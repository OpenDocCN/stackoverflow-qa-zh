# StackOverflow 问答 11544000-11544999

# c# - 输出自 Log4Net 中最后一条消息以来经过的时间

> ID：11544000
> 
> 赞同：2
> 
> 时间：2012-07-18T14:41:51.253
> 
> 标签：c#, log4net

我在 c# 控制台应用程序中使用 log4net，我想知道是否可以让每个日志条目包括自上次日志条目以来经过的时间？

现在，我正在使用`%-4timestamp`（我相信这是自日志开始以来的毫秒数），因此我可以稍后浏览日志并计算条目与前一个条目之间的差异。我希望有一些东西可以用来让经过的时间出现在每条日志消息中。

这可能吗？

提前致谢！

**编辑** 为了澄清经过的时间，我的意思是自上次 log4net 记录消息以来经过的时间量。

例如，如果我有这个日志：

```
0    [main] INFO  MyApp  - Entering application.
36   [main] DEBUG Com.Foo.Bar  - Did it again!
51   [main] INFO  MyApp  - Exiting application. 
```

然后我想要的附加信息是这样的：

```
0   (0)  [main] INFO  MyApp  - Entering application.
36  (36) [main] DEBUG Com.Foo.Bar  - Did it again!
51  (15) [main] INFO  MyApp  - Exiting application. 
```

我在括号之间添加的额外值是自上次日志以来经过的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T15:00:49.540

我知道这很旧，但我只是在寻找相同的东西并且不喜欢包装记录器。我认为更好的方法是使用 a `PatternConverter`：

```
class DeltaPatternConverter : PatternLayoutConverter
{
    private DateTime _last = DateTime.MinValue;

    protected override void Convert(TextWriter writer, log4net.Core.LoggingEvent loggingEvent)
    {
        DateTime now = DateTime.Now;
        int ms = 0;
        if (_last != DateTime.MinValue)
        {
            ms = (int)Math.Round((now - _last).TotalMilliseconds, 0, MidpointRounding.ToEven);
        }
        writer.Write("+" + ms);
        _last = now;
    }
} 
```

像这样使用它：

```
var layout = new PatternLayout("%7timestampms (%7deltams) [%thread] %-5level %logger - %message%newline");
layout.AddConverter("delta", typeof(DeltaPatternConverter));
layout.ActivateOptions(); 
```

或者像这样：

```
<log4net>
  <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
    <layout type="log4net.Layout.PatternLayout">
      <converter>
        <name value="delta"></name>
        <type value="My.Cool.Project.DeltaPatternConverter"></type>
      </converter>
      <conversionPattern value="%7timestampms (%7deltams) [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>
  <root>
    <level value="INFO" />
    <appender-ref ref="ConsoleAppender" />
  </root>
</log4net> 
```

字符串*增量*将被转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:51:13.797

为什么不只跟踪它并自己添加呢？

就像是：

```
public static class LoggingWrapper
    {
        private static ILog logger;
        private DateTime timeOfLastLog;

        static LoggingWrapper()
        {
            logger = LogManager.GetLogger(typeof(Program));
            logger.Info("Logger initialized");
            timeOfLastLog = DateTime.Now;
        }

        public static void Debug(string Message)
        {
            logger = LogManager.GetLogger("YourDebugLoggerName");
            TimeSpan differential = DateTime.Now - timeOfLastLog();
            logger.Debug(Message + "-----" + differential.ToString());
        }
    } 
```

显然你想定制一点，但这是基本的想法。我总是使用包装类来进行日志记录，只是因为它增加了自定义功能。例如，我用它来做这样的自定义异常日志记录：

```
public static void LogException(Exception ex)
{
    logger = LogManager.GetLogger("NHibernate.SQL");
    logger.Error(ex.Message + Environment.NewLine + ex.InnerException + Environment.NewLine + ex.StackTrace, ex);
} 
```

这样，当我想记录异常详细信息时，我可以执行以下操作：

```
try
{
    ThrowAnException();
}
catch(Exception ex)
{
    LoggingWrapper.LogException(ex);
} 
```

代替：

```
try
{
    ThrowAnException();
}
catch(Exception ex)
{
    LoggingWrapper.Error(ex.Message + Environment.NewLine + ex.InnerException + Environment.NewLine + ex.StackTrace);
} 
```

这只是一个例子。还有很多其他的东西使它有用。

# ios - 没有 UITabBar 的 UITabBarController

> ID：11544005
> 
> 赞同：1
> 
> 时间：2012-07-18T14:42:14.323
> 
> 标签：ios, uitabbarcontroller, customization, uitabbar

我一直在尝试从 UITabBarController 隐藏/删除 UITabBar。我的 iPhone 版本中有一个 UITabBar，但我已将导航移至 iPad 版本的新视图控制器。新菜单使用 UITabBarDelegate 方法在 UIViewController 之间切换。

到目前为止，一切都很好。

我现在需要的只是以某种方式隐藏 UITabBar。

我有一个自定义的 UITabBarController 并且我尝试过简单地使用 self.tabBar.hidden = YES; 但我需要视图来填满屏幕。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:55:02.780

所以你有几个选择。假设您的选项卡视图是导航控制器。在这种情况下，您可以拥有一个临时视图控制器，它会立即推送您要使用的“真实”视图控制器，而“真实”视图控制器则实现了以下方法。稍后，通过重置 navigationControllers viewControllers 数组，您可以永久摆脱临时控制器。

```
- (BOOL) hidesBottomBarWhenPushed { return YES; } 
```

如果这对您不起作用，那么您可以使用 window.rootViewController 玩游戏。在启动时，您创建您的 viewController 并将其设置为 rootViewController。稍后，当您想要一个标签栏时，您可以向 appDelegate 发送消息以创建一个 tabBarController 并使您的视图成为第一个视图控制器（原样！）。我刚刚使用 Xcode Tab Bar 项目在一个简单的演示应用程序中验证了这一点。这是我使用的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];

    self.window.rootViewController = viewController1;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)switcher
{
    [viewController1.view removeFromSuperview];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
    self.window.rootViewController = self.tabBarController;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:57:39.800

我找到了我正在寻找的答案

希望这对其他人有帮助

```
for(UIView *view in self.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, self.view.frame.size.height+49, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, self.view.frame.size.height)];
        }

    } 
```

# javascript - 没有在 Javascript 函数中获取 HTML 文本框值？已搜索，但没有找到令人信服的答案

> ID：11544017
> 
> 赞同：0
> 
> 时间：2012-07-18T14:42:25.370
> 
> 标签：javascript, asp.net

我是一名初学者，试图从文本框中获取 HTML 以在 if/else 语句中使用。这是我的 HTML 代码：

```
 <label id="label1">
    Enter any Number:
</label>
<input type="button" id="Button1"  value="button" />
    <input type="text" id="TextBox1" name="myname" /> 
```

我的 JavaScript 代码是：

```
 <script type="text/javascript">
//<![CDATA[
var buttonElement = document.getElementById("Button1");
var txt_value =document.getElementById("TextBox1").value;
buttonElement.addEventListener('click', function() { Clicked(txt_value) }, false);

function Clicked(txt_value) {

    if (txt_value == 7) {
        alert("You are 7");
    }
    else { alert("You are not 7"); }
}
//]]>
    </script> 
```

我观察到

```
 var txt_value =document.getElementById("TextBox1"); 
```

进而

```
 buttonElement.addEventListener('click', function() { Clicked(txt_value.value) }, false); 
```

上面的例子工作得很好。

有人可以告诉我有什么问题吗：

```
 var txt_value =document.getElementById("TextBox1").value; 
```

我不知道为什么我得到一个空的 txt_value

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:46:33.943

原因是您在用户输入任何内容`txt_value` **之前就获得了价值；**因此该值始终为空。

如果您将代码更改为：

```
var txt_value =document.getElementById("TextBox1");//removed .value 
```

并且功能点击到：

```
function Clicked(txt_value) {

    if (txt_value.value == 7) { //added .value
        alert("You are 7");
    }
    else { alert("You are not 7"); }
} 
```

应该管用。

这是一个[jsfiddle](http://jsfiddle.net/7KHsG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:46:40.010

将值的获取移动到点击处理程序中......

```
var textbox1 = document.getElementById("TextBox1");

document.getElementById("Button1").onclick = function () {
    var txt_value = textbox1.value;

    if (parseInt(txt_value, 10) === 7) {
        alert("You are 7");
    } else { 
        alert("You are not 7"); 
    }
}; 
```

现在，您将获得页面加载时文本框中的值。

这是一个**[JSFiddle](http://jsfiddle.net/VDjyG/)**来测试它。

**更新**通过缓存文本框提高了效率。将 addEventListener 移除到 onclick（更多浏览器支持）

# php - 客户的 PHP 部署项目

> ID：11544018
> 
> 赞同：0
> 
> 时间：2012-07-18T14:42:26.207
> 
> 标签：php, licensing, distribution, piracy

> **可能重复：**
> [php 的代码混淆器？](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)
> [部署时如何保护我的源代码？](https://stackoverflow.com/questions/9826672/how-to-protect-my-source-code-when-deployed)

我们正在开发一个打算出售给最终用户的 PHP 项目。我们正在许可这个项目，所以我们的最终用户获得了使用该产品的许可（他们不拥有它）。

我们的问题是我们想在客户的服务器上部署代码，但我们不希望客户能够进一步分发它。使用纯 PHP 代码，您可以轻松地复制粘贴代码并将其提供给您的邻居；），我们希望防止这种情况（有点像防止盗版）。我们可以使用连续剧和激活服务器，但由于客户可以轻松编辑 PHP 代码，这不是一个选项。

你对如何保护这个项目有任何想法，所以卑鄙的海盗将无法非法转售我们的项目。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:49:22.510

您可以使用 ioncube 之类的编码器对代码（或其核心/基本文件）进行编码，并生成绑定到 *.example-domain.com 且无法在任何其他域上运行的许可证文件。通过这种方式，您的代码可以得到很好的保护，不会被分发。

[http://www.ioncube.com/tutorials/encoder_gui/](http://www.ioncube.com/tutorials/encoder_gui/)

还有 ioncube 替代品 - 阅读更多关于 PHP 编码器和许可的信息，大多数适合商业需求（可靠）的编码器 - 付费使用（例如每行编码代码）。在这种情况下，我只会对整个项目所依赖的核心库进行编码。

请记住，这样做可能会让他们非常不愉快，但无论如何，如果产品非常好，它最终会被破解和分发。但通常这意味着你已经做了一些了不起的事情来获得这样的关注，而且很多人正在通过合法途径获得。

我希望这有帮助。

# jquery - jquery background-position-y 当有一个相对类时被触发

> ID：11544022
> 
> 赞同：0
> 
> 时间：2012-07-18T14:42:32.760
> 
> 标签：jquery, background-position

考虑到在 Firefox 中 position-y 不起作用，我需要在 jquery 中编写一些代码，以便能够在 hasClass 'no-event' 时设置 background-position-y。

我做错了什么？

**CSS**

```
#products-events .nav li.no-event a:after{background-position-y:-67px;} 
```

**jQuery**

```
 if ($('#products-events li').hasClass('no-event')) {

        //$('.no-event').css('background-position','-67' + yposition );
    } 
```

小提琴

[http://jsfiddle.net/L8qvz/58/](http://jsfiddle.net/L8qvz/58/)

# android - 如何在模拟器中加载正确的布局？

> ID：11544025
> 
> 赞同：1
> 
> 时间：2012-07-18T14:42:37.600
> 
> 标签：android, layout, emulation

我有两个文件夹 res/layout 和 res/layout-sw600dp。当我尝试在 Tablet Emulator 7 英寸 (1024x600) 中运行我的应用程序时，我在 res/layout 中看到了屏幕布局。如何从模拟器中的 layout-sw600dp 查看平板电脑的另一个布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:48:54.560

双击您要打开的布局或从下拉菜单中选择不同的设置，将加载相关布局。例如 Nexus One、Nexus S 等

如果默认设置不适合您的设备，请在此菜单中添加自定义布局。

要在运行时查看这些布局，您需要在与布局设置匹配的设备\模拟器上运行您的应用程序。

![在此处输入图像描述](../Images/6077be4a2c66c2271b8cffed41c4c69b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:50:18.040

为了能够看到这两种布局，您需要使用不同的 Android 虚拟设备 (AVD)，或者换句话说，使用不同的模拟器。android 文档有一个专门用于[管理 AVD 的](http://developer.android.com/tools/devices/index.html)页面。

android 开发团队提供了一个用于创建 AVD 的工具，名为`AVD Manager`. 我相信您已经使用过它，因为在模拟器上意味着您已经创建了一个！

您可以在 Eclipse 中的以下位置找到它：

> 窗口 -> AVD 管理器

要实际*查看*不同模拟器之间的不同布局，您需要对它们进行不同的配置，以准确表示您想要定位的设备。您应该能够调整硬件选项以使您的模拟器表现不同。[您可以在此处](http://developer.android.com/tools/devices/managing-avds.html)找到硬件选项列表。

# asp.net-mvc-3 - 在部署服务器中编辑 ASP.NET MVC 3 resx 文件，无需重新编译

> ID：11544027
> 
> 赞同：9
> 
> 时间：2012-07-18T14:42:49.293
> 
> 标签：asp.net-mvc-3, visual-studio-2010, deployment, resx, .net

这是我在这里的第一个问题！

我有一个带有 Properties 文件夹的 ASP.NET MVC 3 项目，其中包含一些 .resx 文件，这些文件用于按语言（en/es）区分我的视图中的内容。我正在使用 .Net 4 在 VS2010 中工作。

当我将应用程序部署到服务器时，我发现没有发布 resx 文件，而是有一些 .dll 文件。

我已将构建操作设置为`Embedded resource`,`Do not copy`以输出目录并`PublicResXFileCodeGenerator`作为 .resx 文件属性中的自定义工具。

我想在服务器上有 .resx 文件，并且能够在不重新编译或重新部署的情况下编辑它们。视图应该使用这些更改。

我怎样才能做到这一点？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T20:39:14.813

将 resx 文件放在**App_GlobalResources**中，并将“构建操作”更改为**内容**，将“复制到输出目录”更改为 false。确保“自定义工具”设置为**GlobalResourceProxyGenerator**

这应该使它们即使在运行时也可以更改。

您可以简单地使用 xpath 来查询它们，获取键、值和注释，并使用 XDocument 随意编辑它们。

您还应该知道，这样的事情不适用于 Visual Studio 的发布，因为预编译网站不允许 App_GlobalResources。

# python - 为什么这些简单的 Python 程序不起作用：欧拉 4 和 9

> ID：11544029
> 
> 赞同：0
> 
> 时间：2012-07-18T14:42:54.683
> 
> 标签：python

我正在尝试 Project Euler 并坚持这个：

回文数的两种读法都是一样的。由两个 2 位数字的乘积构成的最大回文数是 9009 = 91 99。

找出由两个 3 位数字的乘积构成的最大回文数。

```
for i in range(1000,100,-1):
    for j in range(1000,100,-1):
        test = i*j
        test = str(test)                #turn product into string
        test2 = test[2:]                #take last two numbers
        test2 = test2[::-1]             #flip them
        if test[:2] == test2:           #if it's a palindrome, the first two should 
            print(i, "\t", j)           #match the flip of last two

input("\n\nPress the ENTER key to exit.") 
```

运行时没有任何反应：命令行计算，但不打印任何内容。该程序确实结束了。

我知道更大的数字不仅仅是第一个和最后两个数字，但应该有足够的回文数，我可以通过它们查看。

这是下一个：

求和为 1000 的毕达哥拉斯三元组。a^2 + b^2 = c^2, a+b+c=1000

```
for a in range(1,32):
    for b in range(1,32):
        c = (a**2 + b**2)**.5
        if a + b + c == 1000:
            print(a,"\t",b,"\t",c)
input("\n\nPress the ENTER key to exit.") 
```

与上一个程序一样，没有输出……但同样，它确实结束了。但我注意到它们都嵌套了 for 循环。这可能与它有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:48:29.037

你的两个测试都是错误的。在第一个示例中，行

```
test2 = test[2:]                #take last two numbers 
```

没有说明注释所说的内容——这一行从字符串中去掉了前两个字符，只留下最后一个数字。无需修复此行，只需检查整个字符串是否等于反转字符串：

```
if test == test[::-1]: 
```

在第二个示例中，您将近似浮点数与精确整数进行比较`1000`。由于浮点数会有舍入误差，因此您找不到完全匹配的值。另请参阅Python 教程中的[浮点算术：问题和限制](http://docs.python.org/tutorial/floatingpoint.html)。

您应该四舍五入`c`到最接近的整数，使用纯整数算术检查它们是否真的是毕达哥拉斯三元组，*然后*测试总和是否为 1000。

正如 DSM 在评论中指出的那样，您的循环也会提前停止。这些值的最大总和约为 106。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:52:07.630

对于第二个问题：简单的错误；c 是一个浮点数，并且您将 a+b+c 与 1000 进行比较；提高到浮点数给出一个浮点数，例如 (3**2+4**2)* *0.5 == 5.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:07:03.807

对于第二个问题，你没有足够大的范围。如果a和b的最大值是31，那么c的最大值可以是(31^2 + 31^2)^0.5，所以a + b + c的和你可能有是(2 + sqrt(2 ) * 31，小于 1000。

至于浮点问题，请确保使用 int() 函数将 c 转换为整数。这可能会与舍入错误产生一些重叠（当我尝试该解决方案时，我认为这对我没有影响），但是即使您手动执行，也应该很容易检查您得到的少数结果是否正确在一分钟的限制内。

# django - 如何获得一个类别中排名靠前的产品？

> ID：11544030
> 
> 赞同：0
> 
> 时间：2012-07-18T14:43:04.347
> 
> 标签：django, view, methods, models

给定一个产品（product_name 是视图中的一个参数），我试图返回该类别中排名靠前的 5 个产品（由方法“get_avg_rating”定义）作为我可以在模板中循环的列表。关于如何做到这一点的任何建议？

```
class Productbackup(models.Model):
    website = models.CharField('Product name', max_length = 200)
    url_friendly = models.CharField('URL friendly', max_length = 200)
    website_url = models.URLField('Product URL')
    description= models.CharField('Description', max_length = 2000)
    category = models.ForeignKey(Categories)
    #category = models.ManyToManyField(Categories)
    image_hero = models.URLField('Hero image url')
    image_second = models.URLField('Second image url')
    image_third = models.URLField('Third image url')
    created_on = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    def __unicode__(self):
        return self.website

    def get_avg_rating(self):
        reviews = Reviewbackup.objects.filter(product=self)
        count = len(reviews)
        sum = 0.0
        for rvw in reviews:
            sum += rvw.rating
        return (sum/count)

    def get_num_reviews(self):
        reviews = Reviewbackup.objects.filter(product=self)
        count = len(reviews)
        return count

RATING_OPTIONS = (
    (1, '1'),
    (2, '2'),
    (3, '3'),
    (4, '4'),
    (5, '5'),
                (6, '6'),
    (7, '7'),
    (8, '8'),
    (9, '9'),
    (10, '10'),
)
class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    created_on = models.DateTimeField(auto_now_add = True)
    updated_at = models.DateTimeField(auto_now = True)
    user = models.CharField('Username', max_length =  200)
    rating = models.IntegerField(max_length=2, choices=RATING_OPTIONS)
    product = models.ForeignKey(Productbackup)
    def __unicode__(self):
        return self.review

class Categories(models.Model):
    category = models.CharField('Category_second', max_length = 200)
        url_friendly = models.CharField('url_friendly', max_length = 200)
    def __unicode__(self):
        return unicode(self.category)

def view_reviews(request, product_name):
    product = get_object_or_404(Productbackup, url_friendly=product_name)
    product_id = product.id
    #get reviews for the this product
    reviews = Reviewbackup.objects.filter(product_id=product_id).order_by("-created_on")
    #similar products in category comparison
    prod_category = Productbackup.objects.filter(category=product.category)
    #top_ranked = Productbackup.objects.order_by('get_avg_rating')[0:5]
    #recently added
    recent_added = Productbackup.objects.order_by('-created_on')[0:5]
    return render_to_response('reserve/templates/view_reviews.html', {'prod_category': prod_category, 'product':product, 'reviews':reviews, 'recent_added':recent_added},
    context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:09:52.223

您可以为此使用[注释](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.annotate)

```
from django.db.models import Sum, Avg

def get_top_products(amount=5):
    try:
         Productbackup.objects.annotate(review_amount=Sum("reviewbackup__product")).\
                               order_by("review_amount")[:amount]
    except Productbackup.DoesNotExist:
        return None 
```

这只是一个基本示例，可以根据您的需要进行扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:56:25.167

尝试实现：

创建字典。它将 Product 作为键，将评级作为值。

循环遍历您的项目 ( `Product.objects`)

在该循环中，将每个项目放入字典中

在该循环之外，按值对字典进行排序。（请参阅[按值对 Python 字典进行排序](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)）

获取字典的最后一项 ( `dictionary[-5]`)。

请注意，您必须处理具有 ex-aequo 评级的项目。确实，如果 10 个项目的分数相同，那么使用上述方法，您的 Top 5 没有任何意义。

这将导致类似于以下的代码：

```
items_with_rating = {}
for product in Product.objects:
    items_with_rating[product] = product.get_avg_rating()

items_sorted_by_rating = sorted(items_with_rating.iteritems(), key=operator.itemgetter(1))

top5_items = items_sorted_by_rating[-5] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:28:05.293

也许这样的事情可以工作？

```
products = [[prod, prod.get_avg_rating()] for prod in Productbackup.objects()]

top_5_items = sorted(products, key=lambda x: x[1], reverse=True)[:5] 
```

# mysql - MySql 选择两个变量

> ID：11544032
> 
> 赞同：0
> 
> 时间：2012-07-18T14:43:11.387
> 
> 标签：mysql, select

我得到了一个从 1 到 1000 的 id 表。如何从表中选择行并将结果插入到我声明的两个变量中？

像这样的一些事情：

```
Select from table1 where id = 1 or id = 27 into var1, var2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:56:33.590

```
SELECT
    @var1 := MAX(IF(id = 1, some_field, NULL)),
    @var2 := MAX(IF(id = 27, some_field, NULL))
FROM table
WHERE id IN (1,27); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:49:01.677

您可以这样做，但您需要确认以下两个限制：

1.  结果集必须恰好包含一行
2.  该行必须恰好包含两列

看到这个：

```
SELECT 'foo', 4 FROM DUAL INTO @a, @b;

SELECT @a, @b;
+------+------+
| @a   | @b   |
+------+------+
| foo  |    4 |
+------+------+ 
```

还有可能：

```
SELECT MIN(id), MAX(Population) FROM world.City INTO @min_id, @max_pop;

SELECT name, population FROM world.Country LIMIT 1 INTO @name, @pop; 
```

# c# - UDP 多播侦听器从不正确的多播组中拾取消息

> ID：11544033
> 
> 赞同：0
> 
> 时间：2012-07-18T14:43:12.040
> 
> 标签：c#, sockets, udp, multicast

我正在编写一个服务，它发送多播消息，以便在网络上我的服务的多个实例之间进行通信。我正在设置两个侦听器并发送两次消息（主 NIC 上的 239.1.1.1，辅助 NIC 上的 239.1.1.2）一切正常，但有时 .2 多播组上的辅助侦听器会接收发送到的消息.1 多播组。知道为什么会发生这种情况吗？

这是我设置听众的方式：

```
PrimaryLocalEP = new IPEndPoint(primaryNIC.Address, vnc.DefaultUtilityPort);
PrimaryClient.ExclusiveAddressUse = false;
PrimaryClient.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
PrimaryClient.Client.Bind(PrimaryLocalEP);
PrimaryClient.JoinMulticastGroup(IPAddress.Parse("239.1.1.1"), primaryNIC.Address);
PrimaryClient.MulticastLoopback = false;
PrimaryRemoteEP = new IPEndPoint(IPAddress.Parse("239.1.1.1"), vnc.DefaultUtilityPort);

ReadThread = new System.Threading.Thread(ReadConnection);
ReadThread.IsBackground = true;
ReadThread.Name = "UDPReadConnection";
ReadThread.Start();

SecondaryLocalEP = new IPEndPoint(secondaryNIC.Address, vnc.DefaultUtilityPort);
SecondaryClient.ExclusiveAddressUse = false;
SecondaryClient.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
SecondaryClient.Client.Bind(SecondaryLocalEP);
SecondaryClient.JoinMulticastGroup(IPAddress.Parse("239.1.1.2"), secondaryNIC.Address);
SecondaryClient.MulticastLoopback = false;
SecondaryRemoteEP = new IPEndPoint(IPAddress.Parse("239.1.1.2"), vnc.DefaultUtilityPort);

ReadThreadSecondary = new System.Threading.Thread(ReadSecondaryConnection);
ReadThreadSecondary.IsBackground = true;
ReadThreadSecondary.Name = "UDPReadConnectionSecondary";
ReadThreadSecondary.Start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:00.593

简短的回答 - 将它们放在不同的端口上。

基本上发生的情况是，在 NIC 硬件识别出需要传递数据包后，即盒子上有一个进程，该进程具有给定多播组的成员资格，操作系统网络堆栈仅使用端口号来识别等待 UDP 输入的进程。您的两个侦听进程中的哪一个获取数据包本质上是随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T19:34:50.673

发生这种情况是因为默认情况下只有一个 NIC 是多播侦听器（由于内部算法取决于接口优先级，因此由操作系统拾取，因此建立的任何 VPN 连接都可能导致问题）。您必须明确设置`SocketOptionName.MulticastInterface`给定的 NIC 以使其始终参与多播侦听。

# java - NoClassDefFoundError 但 jar 在正确的路径中

> ID：11544035
> 
> 赞同：2
> 
> 时间：2012-07-18T14:43:30.513
> 
> 标签：java, jar, noclassdeffounderror

我尝试执行 jar xuggle-xuggler.jar 并且出现此错误（我在 jar 目录中使用 java -jar 命令执行）：

> 线程“main”中的异常 java.lang.NoClassDefFoundError: org/apache/commons/cli/CommandLineParser
> at java.lang.Class.getDeclaredMethods0(Native Method)
> at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
> at java.lang .Class.getMethod0(Unknown Source)
> at java.lang.Class.getMethod(Unknown Source)
> at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
> at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
> 原因：java.lang .ClassNotFoundException: org.apache.commons.cli.CommandLineP arser
> at java.net.URLClassLoader$1.run(Unknown Source)
> at java.net.URLClassLoader$1.run(Unknown Source)
> 在 java.security.AccessController.doPrivileged(Native Method)
> 在 java.net.URLClassLoader.findClass(Unknown Source)
> 在 java.lang.ClassLoader.loadClass(Unknown Source)
> 在 java.lang.ClassLoader.loadClass(Unknown Source)
> .. . 6 更多

但是我所有的jar都在同一个目录commons-cli.jar logback-classic.jar logback-core.jar slf4j-api.jar。

这里的清单：

> Manifest-Version: 1.0
> Ant-Version: Apache Ant 1.8.2
> Created-By: 1.6.0_23-b23 (Sun Microsystems Inc.)
> Implementation-Vendor: www.xuggle.com
> Implementation-Title: xuggle-xuggler
> Implementation-Version: 5.4 .0
> Main-Class: com.xuggle.xuggler.Converter
> Xuggle-Native-App: xuggle-xuggler
> Xuggle-Native-Root: /com/xuggle/ferry
> Xuggle-Native-Paths: i386-xuggle-darwin11;i686-pc- linux-gnu;i686-w64 -mingw32;x86_64-pc-linux-gnu;x86_64-w64-mingw32;x86_64-xuggle-darwin11
> Xuggle-Native-Bundles: i386-xuggle-darwin11;i686-pc-linux-gnu;i686 -w64 -mingw32;x86_64-pc-linux-gnu;x86_64-w64-mingw32;x86_64-xuggle-darwin11
> 类路径：commons-cli.jar logback-classic.jar logback-core.jar slf4j-api.jar

所以，jar 是可见的，不包括在 xuggle-xuggler.jar 中，在类路径中......所以我不明白......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:38:53.383

引用[有关 Manifest 文件的 oracle 文档](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)：

> 警告：文本文件必须以换行符或回车符结尾。如果最后一行没有以新行或回车结束，则不会正确解析。

# javascript - 从方法js中的函数获取对象属性

> ID：11544038
> 
> 赞同：0
> 
> 时间：2012-07-18T14:43:36.270
> 
> 标签：javascript, jquery, oop

> **可能重复：**
> [如何在 jquery 中的单击事件的处理程序中获取对象的 this？](https://stackoverflow.com/questions/4466524/how-to-get-the-this-of-a-object-in-a-handler-for-a-click-event-in-jquery)

我正在尝试创建将一些事件绑定到另一个对象方法的对象。我的代码是这样的：

```
var MAP = MAP || {}
MAP = {
height: 100
/*
 * rest of code
 */
};
var CONFIG = CONFIG || {}
CONFIG = {
  _MAP : MAP,
  setEvents:function(){
   $('#map').mousedown(function(){
   height = this._MAP.height;
   console.log(height);
  }
};
$(function(){ CONFIG.setEvents(); }) 
```

而且我无法将 setEvents 方法中的高度与 MAP.height 连接，但是当我直接从方法调用 this._MAP.height 时（不绑定到鼠标按下），一切都很好。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:47:13.633

在函数体中 for`.mousedown` `this`指的是`$('#map')`找到的 DOMElement。

为了跟踪正确的`this`，您希望将其存储在您的闭包中，在对 的调用之外`.mousedown`。 `var $this = this`例如在`setEvents`函数中。

# c# - 想要使用 C# 编组从 C 函数获取字符串数组作为输出

> ID：11544040
> 
> 赞同：1
> 
> 时间：2012-07-18T14:43:41.917
> 
> 标签：c#, c, marshalling

我在 C 中有函数

```
void GetCharArray(char* arrayNew[5])
{
arrayNew[5]= {"Test", 
            "Test2",
            "Test4",
            "Test5",
            "Test6",        

    };  
}

extern "C" __declspec(dllexport) void GetCharArray(char* arrayNew[5]); 
```

想从我的 C# 代码中调用它，如下所示

```
 [DllImport(@"Test.dll",
        CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]       
    public static extern void GetCharArray(String[] sbOut);

 List<string> testList = new List<string>();
 GetCharArray(testList .ToArray()); 
```

我希望我的 testList 由 C 代码中的值填充。我是否以正确的方式编组它。当调试器到达 GetCharArray() 函数时，它显示没有找到入口点。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:26:38.687

未找到入口点。表示它找不到符号。虽然函数名称是 GetCharArray，但它的符号名称并不完全是 GetCharArray。确保在编译本机 DLL 时导出符号并创建链接器定义并命名符号，以便 DllImport 可以正常运行。如果您需要更多帮助，我可以提供更多信息。我想我知道它为什么不起作用，因为我有一个类似的问题，因为我正确使用了 DllImport。

# 外部资源

*   [如何创建用于从 DLL 导出的 DEF 文件](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.100%29.aspx)

PS 还有一个命令行工具可以从 DLL 中转储信息以检索确切的符号名称。符号的命名惯例各不相同。

# c++ - 一元减号运算符如何处理 C++ 中的布尔值？

> ID：11544041
> 
> 赞同：5
> 
> 时间：2012-07-18T14:43:42.560
> 
> 标签：c++, unary-operator

我目前正在将一些 OpenCV 代码从 C++ 转换为 Java。我不能使用 JavaCV，因为我们需要在本机 Java 中进行转换，而不是 JNA。在代码中的某一时刻，我得到以下任务：

```
dst[x] = (uchar)(-(kHit >= kForeground)); 
```

哪里`dst`是`uchar*`，`kHit`并且`kForeground`是`int`s。

我一直找不到任何关于它是如何工作的，Java 不会将它识别为一个操作。在代码中的另一点对这两个变量进行了操作，它存储两个值之一：255 或 0。

有问题的代码来自`opencv/video/src/bgfg_gaussmix.cpp`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:47:16.253

在 C++ 中，布尔表达式产生两个值之一 -`0`或`1`. 当您将一元减号`-`应用于结果时，您会得到`0`或`-1`。当你重新解释`-1`为`uchar`时，你得到`255`.

您可以使用条件将此表达式转换为 Java：

```
dst[x] = (kHit >= kForeground) ? 255 : 0; 
```

由于分支，它不会像原来的那样快。但是，您对它的速度几乎无能为力，因为 Java 缺乏将布尔值重新解释为数字的能力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T14:47:06.213

`kHit >= kForeground`返回`true`or `false`，这在 C++ 中意味着`1`or `0`。前面的减号将其转换为`-1`or `0`。强制转换为`uchar`( `(uchar)`) 返回`0`for并为否定`0`换行 to 。`255``-1`

~~在 Konrad 的评论之后，我也怀疑这是否定义明确。~~它定义明确，但就可读性而言，它仍然是一段糟糕的代码。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T14:53:21.677

它的基本作用如下：

```
kHit >= kForeground 
```

是 bool 类型的表达式

```
-(kHit >= kForeground) 
```

将此 bool 转换为 int （基于`true==1`and `false==0`）并将其取反，结果为`true==-1`and `false==0`。

然后将其转换为 a `uchar`，从而得到`-1==255`and `0==0`。

必须注意的是，虽然看起来使用了数字的底层实现细节，但所有这些转换都由 C++ 和 C 标准保证，因为负无符号数被指定为根据二进制补码运行。

但是如果 Java 不支持这一点，你总是可以用条件赋值来替换它：

```
dst[x] = (kHit>=kForeground) ? 255 : 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T15:25:28.107

该表达式`(kHit >= kForeground)`产生一个具有值`true`或的布尔值`false`。当应用一元`-`时，`bool`被提升为`int`，并且转换产生`1`for`true`或`0`for `false`。升级后，符号变为`-1`或`0`，然后`uchar`由外部演员转换为。

请注意，重要的信息是一元`operator-`不应用于布尔值，但布尔值被转换`int`为然后应用。这可以用一些模板魔法来测试：

```
template <typename T, typename U>
struct same_type {
    static const bool value = false;
};
template <typename T>
struct same_type<T,T> {
    static const bool value = true;
};
template <typename T>
void f( T value ) {
    std::cout << "Is int? " << std::boolalpha << same_type<T, int>::value << "\n";
    std::cout << "Is bool? " << same_type<T, bool>::value << "\n";
}
int main() {
    f(-true);
} 
```

模板通过使用上面的`f`模板来测试传递参数的类型`int`（简单到足以理解）。如果我们调用模板作为参数类型推导将设置为表达式的类型。如果您运行该程序，您将看到它打印出.`bool``same_type``f``-true``T``-true``Is int? true\nIs bool? false`

# java - 我在 context.xml 中添加的标签何时被读取？

> ID：11544042
> 
> 赞同：0
> 
> 时间：2012-07-18T14:43:43.740
> 
> 标签：java, tomcat, jdbc

在我添加`context.xml`了`Tomcat`以下标签：

```
 <Resource name="jdbc/MyDatasource" auth="Container" type="javax.sql.DataSource"
       driverClassName="org.apache.derby.jdbc.ClientDriver"
       url="jdbc:derby://localhost:1527/my_database;create=true"
       username="me" password="me"
       maxActive="20" maxIdle="10" maxWait="-1" /> 
```

以下标签何时被读取？当我启动服务器时读取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:42:22.090

部署应用程序时会读取此配置。如果您启用了自动部署，Tomcat 将在启动期间部署您的 web 应用程序。

# mysql - 在 mysql 中获取 SQL 代理

> ID：11544044
> 
> 赞同：1
> 
> 时间：2012-07-18T14:43:52.387
> 
> 标签：mysql, sql, agent

我来自 SQL Server 2008 背景。我有一个 mysql 本地服务器正在运行，我想通过 sql 代理设置一些预定的作业。我找到了一些用于 mysql 的粗略的第三方 sql 代理，但没有内置。是否有 sql 代理或推荐的 mysql 代理？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:51:33.527

通常的方法是设置一个 cron 作业来运行一个脚本。我曾经使用 Perl 编写脚本，但 bash 等也会这样做。

# iphone - modalViewController 关闭后视图为空白

> ID：11544045
> 
> 赞同：0
> 
> 时间：2012-07-18T14:44:07.350
> 
> 标签：iphone, ios, uitableview

我正在使用[PPRevealSideViewController](https://github.com/ipup/PPRevealSideViewController/)，并且在用户点击侧视图中的单元格后，我以模态方式显示 ViewController。当我关闭模态视图控制器时，用户点击的视图显示为空白。只有在我移动一点侧视图后，它才会再次显示（刷新）。可能是什么问题？ ![屏幕截图 iOS 模拟器](../Images/e2b9035eb7d12a9f210ca70d393411e5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:43:49.830

实际上，这是您对 viewWillAppear 或 DidAppear 的预加载调用的副作用。如果显示，则不应预加载视图。我将此行为作为默认行为添加到控制器中。但背后的想法是从您尝试预加载的一侧测试 [self.revealSideController sideDirectionOpened] != PPRevealSideDirection 是否。

在这里修复[https://github.com/ipup/PPRevealSideViewController/commit/a1ca242422f0a8b4666df5987ca4a020f869bb99](https://github.com/ipup/PPRevealSideViewController/commit/a1ca242422f0a8b4666df5987ca4a020f869bb99)

# internet-explorer - 如何抑制 Internet Explorer 中的“友好错误消息”？

> ID：11544048
> 
> 赞同：26
> 
> 时间：2012-07-18T14:44:11.510
> 
> 标签：internet-explorer

我想显示一个自定义错误页面：

```
<!doctype html>
<html>
<head><title>400 Bad Request</title></head>
<body><h1>400 Bad Request</h1>
The grob must be in the frobber.
</body>
</html> 
```

不幸的是，Internet Explorer 忽略了 HTTP 服务器发送的响应；隐藏我的页面并显示他们自己的：

![通用的](../Images/a95c72a267f52f43f5c0309c3de26fdb.png)

如何说服 Internet Explorer 显示发送给用户的页面？

**编辑Chrome 从**[2008 年](https://bugs.chromium.org/p/chromium/issues/detail?id=1695)开始做同样的事情。人们要求修复它；但它被标记为**不会修复**。

您可以在答案中使用相同的技巧来修复它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-18T14:44:11.510

解决办法是ＰＡＤＤＩＮＧ。

Microsoft 在知识库文章[KB294807](http://support.microsoft.com/kb/294807)中指出：

> ## 如何：关闭服务器端的 Internet Explorer 5.x 和 6.x“显示友好的 HTTP 错误消息”功能
> 
> ...这些“友好”错误消息仅在发送到客户端的响应小于或等于指定阈值时才会显示。例如，要查看 HTTP 500 响应的确切文本，内容长度必须大于 512 字节。
> 
> **实现这个填充。**为此，请使用 VBScript 字符串函数返回相同字符的字符串，该字符串比 Internet Explorer 5.x 用于显示友好错误消息的 ErrorThreshold 多一个。例如，在 500-100.asp 的标记之前添加以下行：
> 
> ```
>  <% Response.Write String(513, "_") %> 
> ```

## 让它更大

所以我将响应页面扩大到：

```
<!doctype html>
<html>
<head><title>400 Bad Request</title></head>
<body><h1>400 Bad Request</h1>
The grob must be in the frobber.

<!--       
    512 bytes of padding to suppress Internet Explorer's "Friendly error messages"

    From: HOW TO: Turn Off the Internet Explorer 5.x and 6.x "Show Friendly HTTP Error Messages" Feature on the Server Side
          http://support.microsoft.com/kb/294807

    Several frequently-seen status codes have "friendly" error messages 
    that Internet Explorer 5.x displays and that effectively mask the 
    actual text message that the server sends.
    However, these \"friendly\" error messages are only displayed if the 
    response that is sent to the client is less than or equal to a 
    specified threshold.
    For example, to see the exact text of an HTTP 500 response, 
    the content length must be greater than 512 bytes.
  -->
</body>
</html> 
```

问题解决了。

## 奖金阅读

*   [MSDN 博客 - IE 内部 - 友好的 HTTP 错误页面](https://blogs.msdn.microsoft.com/ieinternals/2010/08/18/friendly-http-error-pages/)

> 是什么让 IE 决定显示友好的错误页面？
> 
> 答案是服务器的响应必须满足两个条件：
> 
> *   HTTP 状态码必须为**[400, 403, 404, 405, 406, 408, 409, 410, 500, 501, 505]**
> *   HTTP 响应正文的字节长度必须小于阈值
> 
> 字节长度阈值存储在注册表中 HKEY_LOCAL_MACHINE 的子项 \SOFTWARE\Microsoft\Internet Explorer\Main\ErrorThresholds 下。
> 
> *   **[403、405、410]：** 256 字节
> *   **[400、404、406、408、409、500、501、505]：** 512字节
> *   否则：512 字节

# join - HQL - 我可以在 hql 中使用多个动态连接参数吗？

> ID：11544050
> 
> 赞同：0
> 
> 时间：2012-07-18T14:44:16.077
> 
> 标签：join, hql

我的 HQL 查询中有一个像这样的连接条件

```
LEFT OUTER JOIN T1.country CTRY 

WITH (CTRY.Frequency = T2.FreqId) 
```

但是每当我尝试启动服务器时，它都会显示您的命名查询中有错误。

我也尝试过，但结果是一样的。

那么在多个动态连接条件下连接 2 个表的正确语法是什么。

* * *

异常日志如下所示

```
org.hibernate.hql.ast.QuerySyntaxException: with-clause referenced two different from-clause elements
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:54)
    at org.hibernate.hql.ast.QuerySyntaxException.convert(QuerySyntaxException.java:47)
    at org.hibernate.hql.ast.ErrorCounter.throwQueryException(ErrorCounter.java:82)
    at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:261)
    at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
    at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
    at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
    at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:124)
    at org.hibernate.impl.SessionFactoryImpl.checkNamedQueries(SessionFactoryImpl.java:549)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:413)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:529)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:495)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:656)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:629)
    at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:156)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:338)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:480)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:467)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:483)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:358)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:325)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1172)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:992)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4371)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

无法分享的详细查询..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T15:13:37.350

您无需共享详细查询。只是涉及 COUNTRY、FREQUENCY、TI 和 T2 的查询部分及其显示它们之间关系的映射。

无论如何，以下查询对我有用：

```
select
(select c1.a from c1 where c1.a=c2.a and c1.b=c2.b and c1.c=c2.c) as some_col,
(select c1.b from c1 where c1.a=c2.a and c1.b=c2.b and c1.c=c2.c) as some_other_col
from
c2 
```

但是，使用此方法，您只能从 c1 中选择一列。

如果您还需要 c1 中的一个列值，则必须如上所述再执行一个具有类似条件的连接。

如果子查询可以返回多行（即对于上述条件，如果从 c2 返回多行），那么它会抛出一个错误，说“子查询返回多行”。

# r - R 中的直方图 - x 轴未正确居中

> ID：11544051
> 
> 赞同：3
> 
> 时间：2012-07-18T14:34:10.740
> 
> 标签：r, histogram

`d`我只需键入即可从值列表中获得直方图

```
hist(d) 
```

这就是我得到的：![在此处输入图像描述](../Images/ca2d5d971f2babe75fc5946522fc026e.png)

如何使 x 轴一直延伸到该图的原点（左下角）？为什么它会在 -0.4 处截止？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:11:19.313

宏的答案是迄今为止最简单的方法。但是，如果你真的对默认行为不满意`hist`（真的，这是`axis`我想的默认行为），你总是可以抑制轴并自己绘制它们：

```
set.seed(123)
d <- rnorm(1000)
hist(d,axes = FALSE)
axis(1,at = seq(-3,3,1),labels = TRUE,pos = 0)
axis(2,pos = -3) 
```

![在此处输入图像描述](../Images/23ef3d2b44f923ec8d35b0d6041697bd.png)

至于“为什么？”，绘制轴的默认值必须设置为某个值，因此那里有很多代码努力确保轴和刻度标签根据，好吧，谁写的。总的来说，我认为它做得很好，但当然不是每个人都同意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T14:52:39.127

您可以调整`x`使用`xlim`标签的范围。例如，尝试

```
hist(d,xlim=c(-10,10)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T15:13:28.093

两个建议：

```
#See if this is sufficient:
hist(...)
box()

#If not, try custom axes:
hist(..., xlim = c(-.5, .5), axes = F)
box()
axis(1, seq(-.5, .5, length = 6))
axis(2, seq(0, 30, by = 5)) 
```

# c++ - 在 C++ 中编程 g-adic 扩展

> ID：11544053
> 
> 赞同：0
> 
> 时间：2012-07-18T14:44:23.837
> 
> 标签：c++

我想用 c++ 语言编写 g-adic 扩展，但无论我尝试什么，输出仍然是错误的。让我先解释一下 g-adic 扩展是什么。g-adic 展开是一种表示数字的方法。例如，二进制数，这是数字的 2-adic 扩展。十六进制是 16 进位扩展。所以这是我的代码：

```
#include <iostream>
#include <cmath>
#include <complex>
#include <valarray>

using namespace std;

int main()
{
    int x;
    int g;
    cin>>x;
    cin>>g;
    int k=log(x)/log(g)+1;
    int e;
    int b=0;
    int* myArray=NULL;
    myArray=new int[k];

    for(int i=0;i<k;i++)
    {
        myArray[i]=0;
    }

    while(b!=k)
    {
        e=x/(g^(k-b-1));
        myArray[b]=e;
        x=x-e*g^(k-b-1);
        b++;
    }

    b=0;

    while(b!=k)
    {
        cout<<myArray[b]<<endl;
        b++;
    }

    delete [] myArray;
    myArray=NULL;

    return 0;
} 
```

例如，如果我想将 105 转换为二进制，x=105 和 g=2，k 是新数字的长度。在这种情况下，即 7\. int e=105/2^(7-1)=1。这是第一个数字。那么 x=105-1*2^(7-1)=41。如果你手动这样做，你会发现 105 变成了 1101001。但是如果我编译这段代码，它就是行不通的。我的问题是这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:37:15.693

`^`不做幂运算。它是异或运算符。要进行幂运算，请使用该[`pow`](http://en.cppreference.com/w/cpp/numeric/math/pow)函数。

```
e=x/std::pow(double(g),double(k-b-1));
myArray[b]=e;
x=x-e*std::pow(double(g),double(k-b-1)); 
```

[您可以在 IDE One 上查看您的程序以及我的更改。](http://ideone.com/48BLv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:55:57.320

这里：运行这个程序

```
#include <iostream.h>
#include <cmath>
#include<stdlib.h>
#include<stdio.h>

int main()
{
    int x;
    int g;
    cin>>x;
    cin>>g;

    while(x>g)
    {
        cout<<x%g<<endl;
        x/=g;
    }
            cout<<x%g<<endl;

    return 0;
    } 
```

适用于 105 和 2，不需要数组

# html - GWT Canvas - 保存图像并打开它

> ID：11544054
> 
> 赞同：0
> 
> 时间：2012-07-18T14:44:33.023
> 
> 标签：html, gwt, canvas, html5-canvas

我将图像保存在字符串中，然后当我打开它时它总是 300x150

为什么图像被截断？

300x150 从何而来？

代码就是你所看到的。只需 2 个按钮。

第一个将图像保存在“png”中，另一个从“png”中读取图像

```
 Button save = new Button("copy");
                    save.addClickHandler(new ClickHandler() {
                        @Override
                        public void onClick(ClickEvent event) {
                            ImageElement imageElement = ImageElement.as(image.getElement());

                            Canvas canvasTmp = Canvas.createIfSupported();
                            Context2d context = canvasTmp.getContext2d();
                            context.drawImage(imageElement, 0.0, 0.0, imageElement.getWidth(), imageElement.getHeight());
                            png = canvasTmp.toDataUrl("image/png");
                        }
                    });

                    Button open = new Button("open");
                    open.addClickHandler(new ClickHandler() {

                        @Override
                        public void onClick(ClickEvent event) {

                            final Image image = new Image(png);
                            vp.add(image);
                            image.addLoadHandler(new LoadHandler() {

                                @Override
                                public void onLoad(LoadEvent event) 
                                {
                                    Window.alert("ok");
                                }
                            });

                            image.addErrorHandler(new ErrorHandler() {

                                @Override
                                public void onError(ErrorEvent event) {
                                    Window.alert("error");
                                }
                            } );

                        }
                    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:58:28.957

画布的默认宽度为 300 像素，默认高度为 150 像素。在创建画布之后和绘制图像之前，考虑这样做：

```
int width = imageElement.getWidth()
int height = imageElement.getHeight()
canvasTmp.setWidth(width + "px");
canvasTmp.setHeight(height + "px");
canvasTmp.setCoordinateSpaceWidth(width);
canvasTmp.setCoordinateSpaceHeight(height); 
```

# c# - 添加新网站栏不起作用 找不到名称为“xx”的字段

> ID：11544055
> 
> 赞同：0
> 
> 时间：2012-07-18T14:44:34.597
> 
> 标签：c#, sharepoint-2010

场景是我正在尝试添加一个新的网站栏，我需要更新架构定义。第二次执行更新时说找不到该字段，但它在那里，我什至可以在功能激活崩溃后在站点列上看到它

```
private void AddManagerField(SPWeb currentweb)
        {
             try
            {
                //Add new field to Site Columns
                string managerFieldName = currentweb.Fields.Add(SponsoringCommon.Constants.FIELDS_SPONSORINGMANAGER_NAME, SPFieldType.User, false);
                SPFieldUser managerField = currentweb.Fields.GetFieldByInternalName(managerFieldName) as SPFieldUser;
                managerField.Group = SponsoringCommon.Constants.DEFAULT_TAXONOMY_TERMGROUP_NATIONALELOTERIJSPONSORING;
                managerField.Update();

                SPFieldUser managerField2 = currentweb.Fields.GetFieldByInternalName(managerFieldName) as SPFieldUser;

                string schemaXmlWithResourceTokens = managerField2.SchemaXmlWithResourceTokens;
                int startIndex = schemaXmlWithResourceTokens.IndexOf("\"", schemaXmlWithResourceTokens.IndexOf("DisplayName=\"")) + 1;
                int endIndex = schemaXmlWithResourceTokens.IndexOf("\"", startIndex);
                int substringLength = endIndex - startIndex;
                string value = schemaXmlWithResourceTokens.Substring(startIndex, substringLength);
                schemaXmlWithResourceTokens = schemaXmlWithResourceTokens.Replace(value, "$Resources:SPNLSponsoring,Field_SponsoringManager_Name");
                managerField2.SchemaXml = schemaXmlWithResourceTokens;
                managerField2.Update();

                SPContentTypeId dossierCTID = new SPContentTypeId(SponsoringCommon.Constants.CONTENTTYPES_DOSSIER_ID);
                SPContentType dossierCT = currentweb.ContentTypes[dossierCTID];
                SPFieldLink managerFieldLink = new SPFieldLink(managerField2);
                dossierCT.FieldLinks.Add(managerFieldLink);
                dossierCT.Update(true);
            }
            catch (Exception ex)
            {
                Logger.LogError("error", "AddManagerField(SPWeb currentweb)", ex);
                throw;
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:21:40.670

您是否检查过内部名称是否相同。

如果您有权访问服务器，请尝试获取列的 GUID 并改用它，因为这将保证您正在寻找正确的字段。

您正在传递给此方法的网络中的字段是什么？

抱歉可能看起来很简单，但是一旦我坐下来通过我的代码（在调试之后），我通常会发现我忽略了所有角度。

希望这有助于
Truez

# c# - 如何在反射方法调用上隐式转换

> ID：11544056
> 
> 赞同：23
> 
> 时间：2012-07-18T14:44:35.473
> 
> 标签：c#, .net, reflection, casting, implicit-conversion

我有一个`Thing`可以从`string`. 当我直接调用带有`Thing`参数的方法时，从`string`to的转换`Thing`是正确的。

但是，如果我使用反射来调用相同的方法，则会引发异常

```
System.ArgumentException : Object of type 'System.String' cannot be 
converted to type 'Things.Program+Thing'. 
```

也许有一个很好的理由，但我无法弄清楚。有人知道如何使用反射来完成这项工作吗？

```
namespace Things
{
    class Program
    {
        public class Thing
        {
            public string Some;

            public static implicit operator Thing(string s)
            {
                return new Thing {Some = s};
            }
        }

        public void showThing(Thing t)
        {
            Console.WriteLine("Some = " + t.Some);
        }

        public void Main()
        {
            showThing("foo");
            MethodInfo showThingReflected = GetType().GetMethod("showThing");
            showThingReflected.Invoke(this, new dynamic[] {"foo"});
        }
    }
} 
```

Meta：*请不要讨论为什么隐式转换或反射是不好的。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T15:15:09.213

诀窍是要意识到编译器会`op_Implicit`为您的隐式转换运算符创建一个特殊的静态方法。

```
object arg = "foo";

// Program.showThing(Thing t)
var showThingReflected = GetType().GetMethod("showThing");

// typeof(Thing)
var paramType = showThingReflected.GetParameters()
                                  .Single()
                                  .ParameterType; 

// Thing.implicit operator Thing(string s)
var converter = paramType.GetMethod("op_Implicit", new[] { arg.GetType() });

if (converter != null)
    arg = converter.Invoke(null, new[] { arg }); // Converter exists: arg = (Thing)"foo";

// showThing(arg)
showThingReflected.Invoke(this, new[] { arg }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T15:33:55.340

找到了一个使用 TypeConverter 的答案（正如 Saeed 提到的）
似乎可以完成这项工作。

[使用反射时进行隐式转换的 TypeConverter](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/59c82a52-e6a2-4b0a-ba00-b9e655de947d/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:30:00.633

在这种特定情况下，您可以通过数组类型进行转换，即

```
showThingReflected.Invoke(this, new Thing[] {"foo"}); 
```

但这是一种“作弊”。通常，您不能期望`Invoke`考虑您的 user-defined `implicit operator`。这种转换必须在编译时推断。

# apache - 乘客 Apache '未定义符号：unixd_config'

> ID：11544059
> 
> 赞同：1
> 
> 时间：2012-07-18T14:44:44.300
> 
> 标签：apache, passenger

我正在尝试让 apache 与乘客一起运行。我做了：

```
sudo gem install passenger
sudo passenger-install-apache2-module 
```

在安装了它告诉我要安装的其他东西（例如 apache2-prefork-dev）后，我添加了它说要添加到 http.conf 文件的行，它告诉我 LoadModule 行有语法错误。

```
user@machine:~$ sudo /usr/local/apache2/bin/apachectl restart
httpd: Syntax error on line 174 of /usr/local/apache2/conf/httpd.conf: 
Cannot load /var/lib/gems/1.8/gems/passenger-3.0.13/ext/apache2/mod_passenger.so into server: 
/var/lib/gems/1.8/gems/passenger-3.0.13/ext/apache2/mod_passenger.so: undefined symbol: unixd_config 
```

那是指它告诉我添加的以下代码：

```
174 LoadModule passenger_module /var/lib/gems/1.8/gems/passenger-3.0.13/ext/apache2/mod_passenger.so
175 PassengerRoot /var/lib/gems/1.8/gems/passenger-3.0.13
176 PassengerRuby /usr/bin/ruby1.8 
```

你知道为什么它找不到 unixd_config 吗？

提前致谢！

一些信息：Rails v3.2.6、Ruby 1.9.2p320、gem v1.8.24、apache2（我不知道如何找到版本，但我知道它是 2.x）

如果重要的话：

```
178 <VirtualHost *:80>
179     ServerName www.example.com
180     DocumentRoot /home/dylan/private/project/public
181 
182     <Directory /home/dylan/private/project/public>
183         Order allow,deny
184         Allow from all
185     </Directory>
186 </VirtualHost> 
```

（如果您也想帮助我，我也不知道要为 ServerName 放什么...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T13:29:45.310

如果您之前安装了其他 apache，则可能需要指定 apache。

我尝试了以下命令。

```
env APXS2=/usr/local/apache2/bin/apxs passenger-install-apache2-module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T21:27:47.513

看来弘历是对的。要获取您的 apache 版本：apachectl -V（我必须是 root）

从 [http://httpd.apache.org/docs/2.4/developer/new_api_2_4.html](http://httpd.apache.org/docs/2.4/developer/new_api_2_4.html) unixd_config 这已重命名为 ap_unixd_config。

您将不得不重建乘客： [http ://www.modrails.com/documentation/Users%20guide%20Apache.html](http://www.modrails.com/documentation/Users%20guide%20Apache.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T22:36:27.120

`sudo ln -s /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/usr/include /usr/include`

这对我在优胜美地有帮助。显然，在安装 Xcode 6.1 时不会自动创建符号链接。符号链接指向以前的 SDK 包含目录。唯一有效的是更改符号链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:50:41.757

这绝对是针对错误的 Apache 版本编译 Phusion Passenger 模块的情况。正如banrui 所说，您需要使用指向正确 apxs2 命令的 AXPS2 环境变量运行安装程序，即您打算运行的 Apache 安装。

# php - Doctrine Migration 仅从 CSV 上传加载一条记录

> ID：11544063
> 
> 赞同：0
> 
> 时间：2012-07-18T14:45:01.680
> 
> 标签：php, csv, doctrine, symfony-1.4

我在 symfony 1.4 和 Doctrine 中使用迁移将数据上传到数据库中。

我有一个 CSV 文件，我正在尝试将其批量加载到 sfGuardUser 表中，并将用户 ID 与 sfGuardUserGroup 组 ID 匹配，然后将其加载到 sf_guard_user 表中。

当我运行迁移时，它只从 CSV 加载第一条记录。加载的记录看起来格式正确（构建用户名和日期）。

我在将代码放入迁移之前对其进行了测试，并且它工作正常。

我这里有语法错误，还是没有设置为正确循环？

也许我只是把它完全搞砸了。

**PHP**

```
 public function up()
      {

          $fieldseparator = ",";
          $lineseparator = "\n";
          $csvfile = "web/uploads/batchUpload.csv";

          $file = fopen($csvfile,"r");
          $size = filesize($csvfile);

          $csvcontent = fread($file,$size);

          fclose($file);

          $lines = 0;
          $queries = "";
          $linearray = array();

          foreach(explode($lineseparator,$csvcontent) as $line) {

              //Clean it up
              $lines++;   
              $line = trim($line," \t");      
              $line = str_replace("\r","",$line);      
              $line = str_replace("'","\'",$line);  
              $linearray = explode($fieldseparator,$line);

              //build username
              if (!$linearray[3]) {
                  $username = $linearray[0];
                  $username = substr($linearray[0], 0, 1);
                  $username .= $linearray[1];
                  $username = strtolower($username);
                  $linearray[3] = $username;
              }

              //add sha1 algorithm
              if (!$linearray[4]) {
                  $linearray[4] = "sha1";
              }

              //add is_active
              if(!$linearray[7]) {
                  $linearray[7] = "1";
              }

              //add current date to login, created and updated
                  $now = getdate();           
                  if ($now['mday'] < 10) {
                      $now['mday'] = str_pad($now['mday'], 2, "0", STR_PAD_LEFT);
                  }           
                  if ($now['hours'] < 10) {
                  $now['hours'] = str_pad($now['hours'], 2, "0", STR_PAD_LEFT);
                  }       
                  if ($now['minutes'] < 10) {
                  $now['minutes'] = str_pad($now['minutes'], 2, "0", STR_PAD_LEFT);
                  }       
                  if ($now['seconds'] < 10) {
                  $now['seconds'] = str_pad($now['seconds'], 2, "0", STR_PAD_LEFT);
                  }
                  $linearray[10] = $now['year']. "-" .$now['mon']. 
                          "-".$now['mday']." ".$now['hours'].":".$now['minutes'].":"
                          .$now['seconds'];
                  $linearray[11] = $now['year']. "-" .$now['mon']. 
                          "-".$now['mday']. " ".$now['hours'].":".$now['minutes'].
                          ":".$now['seconds'];

             //load up sql  
             $linemysql = implode("','",$linearray);    
             $conn = Doctrine_Manager::getInstance()->connection();  
             $query = "INSERT INTO sf_guard_user VALUES ('', '$linemysql');";

             //$queries .= $query . "\n";   
             $conn->execute($query);

             //Add userID to group table
             $conn = Doctrine_Manager::getInstance()->connection();  
             $getFirstID = Doctrine::getTable('sfGuardUser')->orderBy('id DESC')
                  ->limit(1)->execute();
             $id = $getFirstID['id'];
             $query = "INSERT INTO sf_guard_user_group ('$id', 5, '$linearray[10]',          '$linearray[11]');";
             $conn->execute($query);
             $query = "INSERT INTO sf_guard_user_group ('$id', 14, '$linearray[10]', '$linearray[11]');";
             $conn->execute($query);
        }// close foreach split
} 
```

**更新**

如果我删除了我试图加载最后一个 id 并将其与 GuardUserGroup group_id 匹配的第二个查询，那么它就可以工作。所以我想我们可以缩小范围并说我的错误在该`//Add userID to group table`部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:07:42.877

更新了我的查询以获取最新的 id 记录。我认为主要问题是 $id 在查询中仍然是一个数组。我是这样破解的：

```
//Add userID to group table
$getFirstID = Doctrine::getTable('sfGuardUser')->createQuery()->select('MAX(id) as id')->fetchArray();
**$id = $getFirstID[0];
$id = $id['id'];**
$q = "INSERT INTO sf_guard_user_group VALUES ('$id', 5, '$linearray[10]', '$linearray[11]');";
$conn->execute($q);
$query = "INSERT INTO sf_guard_user_group VALUES ('$id', 14, '$linearray[10]', '$linearray[11]');";
$conn->execute($query); 
```

# django - 使用传递 access_token 的 django-social-auth 参数创建用户

> ID：11544064
> 
> 赞同：1
> 
> 时间：2012-07-18T14:45:03.853
> 
> 标签：django, facebook, api, django-socialauth

如何使用传递 access_token[的 django-social-auth参数创建用户？](https://github.com/omab/django-social-auth/)示例：django-social-auth.create_user(access_token= 'xxxxxxxxxxxxxxxx...') 这可能吗？

我这样做是因为我在 access_token 中获得了一个 API，它必须在数据库系统中创建用户。www.mysite/api/new/user/[令牌]/

后台：脸书

# android - 将 WebView 站点下载到 HTM(L) 文件并再次在 WebView 中显示

> ID：11544065
> 
> 赞同：3
> 
> 时间：2012-07-18T14:45:03.993
> 
> 标签：android, html, android-webview

我想将当前站点从我的 WebView 从我的应用程序保存到 HTM(L) 文件。因此，当我按下按钮时，显示在我的 WebView 中的当前站点（例如[http://www.google.com](http://www.google.com)）会以 HTM(L) 文件的形式下载到用户手机中。

下载此文件后，我想在 WebView 的另一个时刻显示它。我知道如何在 WebView 中显示 HTM(L) 文件，但有什么我应该知道的。

那么如何在 HTM(L) 文件中从我的 WebView 下载当前网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:40:02.540

1.  获取 WebView 的内容：[如何从 WebView 获取网页内容？](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)

2.  将 HTML 内容写入文件，比如 index.html：[http ://www.anddev.org/working_with_files-t115.html](http://www.anddev.org/working_with_files-t115.html)

3.  现在您知道文件的位置，因此读取该文件的内容并将其显示在另一个 WebView 中。

# asp.net-mvc-3 - 全局授权不起作用 - 导致呈现空白页面

> ID：11544068
> 
> 赞同：0
> 
> 时间：2012-07-18T14:45:10.213
> 
> 标签：asp.net-mvc-3, login, global-asax, authorize-attribute

我正在尝试为我的 MVC3 站点实现一个非常基本的登录方案。如果我理解正确，而不是向我的每个控制器类添加 [Authorize] 标记，我应该能够简单地实现一个全局设置。为此，我在 global.asax 中添加了以下内容：

```
protected void Application_Start()
{
    RegisterGlobalFilters(GlobalFilters.Filters);
}

public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new AuthorizeAttribute());  

} 
```

在我的 webconfig 中，我添加了：

```
<authentication mode="Forms">
   <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

结果是生成的页面完全是空白的。查看 url，似乎 mvc 按预期重定向到我的登录路由，但页面为空。如果我注释掉 global.asax 中的代码并将 [Authorize] 标记直接放在每个控制器中，它就会按预期工作。

作为一种解决方法，我已经实现了我所阅读的 MVC2 最佳实践，即创建一个 BaseController:Controller 类，向其添加 [Authorize] 标记，然后将我所有控制器的固有特性更改为从BaseController 而不是 Controller。

目前这似乎工作得很好。

但是为什么 global.asax 实现不起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:50:06.170

让我们看看这里发生了什么：

1.  您正在导航到`/`
2.  您的全局授权属性生效，并且由于用户未通过身份验证，因此他被重定向到`~/Account/LogOn`（按照您的 web.config 文件中的说明）进行身份验证
3.  您的全局授权属性生效，并且由于用户未通过身份验证，因此他被重定向到`~/Account/LogOn`（按照您的 web.config 文件中的说明）进行身份验证
4.  与 3 相同。
5.  同4。
6.  ...

我认为你说对了。该`LogOn`操作应从身份验证中排除，否则用户将永远无法登录您的网站。

由于您已在全局范围内应用了 Authorize 属性，因此无法做到这一点。一种可能的方法是编写将全局应用的自定义 AuthorizeAttribute 并将此操作排除在身份验证之外。

所以你可以写一个标记属性：

```
public class AllowAnonymousAttribute : Attribute
{
} 
```

和一个全局自定义授权属性：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        var exclude = ((AllowAnonymousAttribute[])filterContext.ActionDescriptor.GetCustomAttributes(typeof(AllowAnonymousAttribute), false)).Any();
        if (!exclude)
        {
            base.OnAuthorization(filterContext);
        }
    }
} 
```

将被注册：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new MyAuthorizeAttribute());  
} 
```

现在剩下的就是用我们的标记属性装饰您希望从身份验证中排除的控制器操作：

```
public class AccountController : Controller
{
    [AllowAnonymous]
    public ActionResult LogOn()
    {
        return View();
    }

    [AllowAnonymous]
    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        ...
    }
} 
```

# javascript - Jquery .each 通过另一个 Div 中的 Divs

> ID：11544072
> 
> 赞同：12
> 
> 时间：2012-07-18T14:45:21.667
> 
> 标签：javascript, jquery, html, each, loops

我目前有以下html：

抱歉编辑，我写这篇文章时没有注意。

```
 <div class ="left">
    <div>1</div>
    <div>2</div>
    <div>3</div>
</div> 
```

我正在使用 JQuery .each 命令使用 .each 遍历每个 div `$('div').each`。虽然我只想用类名“left”遍历 div 内的 div。

我试过使用`$('.left > div').each`，但没有用。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T14:47:29.673

```
$.each( $('.left'), function(i, left) {
   $('div', left).each(function() {

   });
}) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-18T14:47:14.307

这是你要找的吗？

```
$('div.left>div').each(function(){ /* do stuff */ }); 
```

小提琴：http: [//jsfiddle.net/MLnBY/](http://jsfiddle.net/MLnBY/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T14:48:55.023

```
$(".left").children().each(function(i, elm) {
    alert($(this).html())
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T14:47:06.240

语法将`$(".left > div").each(function(){});`代替`.each(".left > div")`.

**更新：**想用`$(".left").children().each()`

# c++ - 如何处理 windows.h 中的 max 宏与 std 中的 max 冲突？

> ID：11544073
> 
> 赞同：77
> 
> 时间：2012-07-18T14:45:22.323
> 
> 标签：c++, iostream, cin

所以我试图从 cin 获取有效的整数输入，并使用了这个[问题](https://stackoverflow.com/questions/5864540/a-simple-question-about-cin/5864560#comment15263994_5864560)的答案。

它建议：

```
#include <Windows.h> // includes WinDef.h which defines min() max()
#include <iostream>
using std::cin;
using std::cout;

void Foo()
{
    int delay = 0;
    do
    {
        if(cin.fail())
        {
            cin.clear();
            cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
        }
        cout << "Enter number of seconds between submissions: ";
    } while(!(cin >> delay) || delay == 0);
} 
```

这在 Windows 上给了我一个错误，说`max`宏不接受那么多参数。这意味着我必须这样做

```
do
{
    if(cin.fail())
    {
        cin.clear();
#undef max
        cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    }
    cout << "Enter number of seconds between submissions: ";
} while(!(cin >> delay) || delay == 0); 
```

让它工作。这很丑陋；有没有更好的方法来解决这个问题？也许我应该存储它的定义`max`并在之后重新定义它？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-18T14:49:08.300

定义宏[`NOMINMAX`](http://support.microsoft.com/kb/143208)：

> 这将抑制 Windef.h 中的最小和最大定义。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-04-20T08:24:52.110

只需将函数名称括在括号中：

```
(std::numeric_limits<size_type>::max)() 
```

在这种情况下不需要 NOMINMAX 宏，而且您不会收到编译器警告

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-18T21:48:17.030

如果您不知道其他人是否可能`windows.h`不包含`NOMINMAX`，则可以定义一个虚拟宏，该宏可用于在不更改定义的情况下抑制类似函数的宏调用：

```
#define DUMMY
...
std::numeric_limits<std::streamsize>::max DUMMY () 
```

也不是很漂亮，但可以工作并且非侵入性。

在使用 Windows 头文件时，我更喜欢通过仅将其包含在专门的代码和头文件中（必要时使用 pimpl）来尽可能地隐藏它，因为它会将太多垃圾扔到全局命名空间中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-18T14:51:12.950

你只是想刷新 cin 缓冲区吗？我总是用：

```
cin.ignore(cin.rdbuf()->in_avail()); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-09T22:43:41.380

如果您碰巧使用 GDI+，则该方法`NOMINMAX`对您不起作用，因为 GDI+ 的标头需要`min`或`max`在全局命名空间中。

在这种情况下，最简单的解决方法是在不再需要`min`/时取消定义。`max`

说明该方法的代码示例：

```
//#define NOMINMAX - this won't work
#include <Windows.h>
#include <gdiplus.h>
#undef max
#undef min
...
#include <cxxopts.hpp> 
```

# vb.net - 文本框失去焦点

> ID：11544076
> 
> 赞同：0
> 
> 时间：2012-07-18T14:45:26.033
> 
> 标签：vb.net, visual-studio-2010

这让我很困惑。我有一个带有文本框、2 个单选按钮、一个确定按钮和一个取消按钮的 Windows 窗体。我一直在玩 Tabbing，但现在我已经删除了它，所以 TextBox1 设置为 TabIndex=1 & TabStop=True，所有其他字段都设置为 TabIndex=0 & TabStop=False。

要访问此表单，我执行以下代码：

```
 Private Sub ComboBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ChooseLeague.SelectedIndexChanged
    If ChooseLeague.SelectedIndex = 0 Then
        Me.Hide()
        MaintainDatabaseAddLeague.RadioButton1.Checked = False
        MaintainDatabaseAddLeague.RadioButton2.Checked = False
        MaintainDatabaseAddLeague.TextBox1.Text = ""
        MaintainDatabaseAddLeague.TextBox1.Focus()
        MaintainDatabaseAddLeague.Show()
    End If
End Sub 
```

窗体打开，光标根据需要在 TextBox 中闪烁。但是，如果我从表单中取消然后通过相同的方法返回到它，则光标不在 TextBox 中，并且取消按钮突出显示/具有焦点。

这是为什么，有什么想法吗？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:53:13.517

由于您正在隐藏和显示表单，因此它显示了最后一个焦点控件。*在*表单可见之前，焦点调用不起作用。

尝试切换它并使用该`Select`方法。

```
MaintainDatabaseAddLeague.Show()
MaintainDatabaseAddLeague.TextBox1.Select() 
```

# c - int 和 float 除法给出 0 作为输出

> ID：11544080
> 
> 赞同：2
> 
> 时间：2012-07-18T14:45:36.380
> 
> 标签：c, gcc

```
int main(void)
{
  int x;
  float y;

  x=10;
  y=4.0;

  printf("%d\n",x/y);

  return 0;
} 
```

我使用 gcc 编译器编译了这段代码，运行时我得到 0 作为输出。
为什么这段代码输出为 0 而不是 2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:48:14.533

这不是部门，而是打印格式。

改变：

```
printf("%d\n",x/y); 
```

到：

```
printf("%f\n",x/y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:54:55.403

**x/y**的结果是 a`float`并按原样传输`printf()`。
但是，您告诉`printf()`using`%d`假设输入是`int`.
在这种情况下，没有类型检查或自动类型转换。`printf()`只会执行你所要求的。这纯属意外，导致打印**0 。**

您应该`%d`在格式字符串中指定并将除法的结果转换为`int`.

```
printf("%d\n", (int)(x/y) ); 
```

或者你可以使用`%f`，但是你会得到**2.5**作为输出。（您可能也想看看 floor() 函数。）

# r - 在 R 中使用 grep 从 data.frame 中删除行

> ID：11544083
> 
> 赞同：13
> 
> 时间：2012-07-18T14:45:44.393
> 
> 标签：r, dataframe, row

我有一个这样的数据框：

```
 d <- data.frame(cbind(x=1, y=1:10,    z=c("apple","pear","banana","A","B","C","D","E","F","G")), stringsAsFactors = FALSE) 
```

我想从这个数据框中删除一些行，具体取决于 z 列的内容：

```
 new_d <- d[-grep("D",d$z),] 
```

这很好用；第 7 行现已删除：

```
 new_d
     x  y      z
  1  1  1  apple
  2  1  2   pear
  3  1  3 banana
  4  1  4      A
  5  1  5      B
  6  1  6      C
  8  1  8      E
  9  1  9      F
  10 1 10      G 
```

但是，当我使用 grep 搜索 z 列中不存在的内容时，它似乎删除了数据框的所有内容：

```
 new_d <- d[-grep("K",d$z),]
    new_d
    [1] x y z
    <0 rows> (or 0-length row.names) 
```

我想以这种或其他方式搜索和删除行，即使我正在搜索的字符串不存在。如何解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T14:51:17.453

您可以使用 TRUE/FALSE 子集来代替数字。

`grepl`类似于 grep，但它返回一个`logical`向量。否定适用于它。

```
 d[!grepl("K",d$z),]
   x  y      z
1  1  1  apple
2  1  2   pear
3  1  3 banana
4  1  4      A
5  1  5      B
6  1  6      C
7  1  7      D
8  1  8      E
9  1  9      F
10 1 10      G 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T14:51:29.823

这是你的问题：

```
> grep("K",c("apple","pear","banana","A","B","C","D","E","F","G"))
integer(0) 
```

尝试 grepl() 代替：

```
d[!grepl("K",d$z),] 
```

这是有效的，因为否定逻辑向量的每一行都有一个条目：

```
> grepl("K",d$z)
 [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
> !grepl("K",d$z)
 [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-18T12:18:51.353

为了完整起见，从 R 3.3.0 开始，`grep`朋友们提出了一个`invert`论点：

```
new_d <- d[grep("K", d$z, invert = TRUE)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T14:50:25.523

您想`grepl`在这种情况下使用，例如`new_d <- d[! grepl("K",d$z),]`.

# tsql - T/SQL EXECUTE AS，如果错误 0x5，则恢复

> ID：11544085
> 
> 赞同：0
> 
> 时间：2012-07-18T14:45:48.980
> 
> 标签：tsql, try-catch, execute

我目前正在用 T/SQL 编写一份特别报告。

基本上，我有一个包含 Windows 用户名的表，我必须为每个人运行一次存储过程（使用游标）。这可以使用`EXECUTE AS USER = 'domain\username'`. 但是，如果用户在生成表后丢失了他的 Windows 登录，我会收到以下错误：

```
 Could not obtain information about Windows NT group/user 'domain\user', error code 0x5. 
```

此错误完全停止该过程，这会给我一个错误。有没有办法忽略此消息而直接跳到下一个光标值？

在此先感谢 Gunnar S. Knudsen

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:01:38.973

如果您使用的是 SQL 2005 或更高版本，则可以使用[TRY...CATCH (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms175976%28v=sql.105%29.aspx)。以下是提供的链接中的示例：

```
-- Verify that the stored procedure does not already exist.
IF OBJECT_ID ( 'usp_GetErrorInfo', 'P' ) IS NOT NULL 
    DROP PROCEDURE usp_GetErrorInfo;
GO

-- Create procedure to retrieve error information.
CREATE PROCEDURE usp_GetErrorInfo
AS
SELECT
    ERROR_NUMBER() AS ErrorNumber
    ,ERROR_SEVERITY() AS ErrorSeverity
    ,ERROR_STATE() AS ErrorState
    ,ERROR_PROCEDURE() AS ErrorProcedure
    ,ERROR_LINE() AS ErrorLine
    ,ERROR_MESSAGE() AS ErrorMessage;
GO

BEGIN TRY
    -- Generate divide-by-zero error.
    SELECT 1/0;
END TRY
BEGIN CATCH
    -- Execute error retrieval routine.
    EXECUTE usp_GetErrorInfo;
END CATCH; 
```

# java - 在远程主机 24x7 上运行 JAR 文件

> ID：11544088
> 
> 赞同：0
> 
> 时间：2012-07-18T14:45:57.350
> 
> 标签：java, jar, udp, hosting

我有一个在家用计算机上运行的 JAR 文件。但由于电源/互联网中断，我无法 24X7 运行它。

JAR 包含-> UDP DatagramChannel、用于更新 MySQL DB 的 JDBC、多线程、执行器池。

直接的答案是购买 VPS，但这不是一个选择，因为 VPS 每月花费 100 美元，因此启动它的**成本很高**，因为 JAR 应用程序目前很小。

便宜的共享虚拟主机不允许**监听端口**（UDP 通道需要）。

我该如何进行。

```
JAR 需要大约 50K 内存和 15KBps 网络 IO。这将在未来增加。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:49:29.423

平均 VPS 每月花费不到 100 美元——有可能以每月 3 美元以上的价格买到便宜的 VPS。

# php - 我可以根据变量的值和名称找出是否在全局空间中定义了变量吗？

> ID：11544094
> 
> 赞同：2
> 
> 时间：2012-07-18T14:46:28.417
> 
> 标签：php, variables, global-variables

我知道变量名，like`$var`和它的值。

如果我检查`isset($GLOBALS[$var_name]) && $GLOBALS[$var_name] == $var`我可能会得到一个肯定的结果，即使变量不是真正的全局变量，但恰好与现有的全局变量具有相同的名称和值:(

我需要这个用于我正在构建的调试函数，以显示有关传递的变量类型的更多信息。

我还可以找出变量是否是静态的吗？:)

ps：反射对我没有帮助..它只能获取对象或函数的信息...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:43:31.777

如果变量是彼此的引用（这本质上是您想要检查的），它们将使用相同的 zval。因此，这里有一个有点讨厌但可行的方法：

```
<?php

    function vars_are_referenced (&$var1, &$var2) {

        // What we are doing *will* throw an error (I said it was nasty ;-) )
        $oldER = error_reporting();
        $oldDE = ini_get('display_errors');
        error_reporting(0);
        ini_set('display_errors', 0);

        // We need to use output buffering, we don't want to break any existing
        // buffering so we cache the contents of the buffer
        $oldBuffer = ob_get_length() ? ob_get_clean() : NULL;

        // If the values are not identical, definitely not a match
        if ($var1 !== $var2) return FALSE;

        // Now we inspect the zval of $var1
        ob_start();
        debug_zval_dump(&$var1);
        preg_match('/\brefcount\((\d+)\)(?:\b|$)/', ob_get_clean(), $matches);
        $var1RefCountBefore = (int) $matches[1];

        // If they are the same, this will increase the refcount
        $temp = &$var2;

        // Inspect the zval of $var1 again
        ob_start();
        debug_zval_dump(&$var1);
        preg_match('/\brefcount\((\d+)\)(?:\b|$)/', ob_get_clean(), $matches);
        $var1RefCountAfter = (int) $matches[1];

        // If refcount is now greater, they are the same
        $result = $var1RefCountAfter > $var1RefCountBefore;

        // Repopulate the output buffer if necessary
        if ($oldBuffer !== NULL) {
            ob_start();
            echo $oldBuffer;
        }

        // Turn error reporting back to correct level
        error_reporting($oldER);
        ini_set('display_errors', $oldDE);

        return $result;

    }

    function test_ref_fail () {
        $a = 1;
        $var_name = 'a';
        var_dump(vars_are_referenced($GLOBALS['a'], $a));
    }

    function test_ref_success_1 () {
        global $a;
        $var_name = 'a';
        var_dump(vars_are_referenced($GLOBALS['a'], $a));
    }

    function test_ref_success_2 (&$a) {
        $var_name = 'a';
        var_dump(vars_are_referenced($GLOBALS['a'], $a));
    }

    $a = 1;
    $b = &$a;
    var_dump(vars_are_referenced($a, $b));
    test_ref_fail();
    test_ref_success_1();
    test_ref_success_2($a); 
```

这将是最好的方法（通过检查 zval），但我相信您可以看到，对于 PHP 中当前可用的函数，这不是一个漂亮的方法。它将引发错误，因为调用时传递引用是按照`debug_zval_dump()`我们需要的方式进行工作所必需的。它将在 PHP >= 5.4 中导致致命错误，因为调用时传递引用已被删除。

所以这是另一种方法 - 我不喜欢它，因为它涉及修改变量，但它*不应该*破坏任何东西，而且至关重要的是，不会引发任何错误并且可以在任何地方工作：

```
<?php

    function vars_are_referenced (&$var1, &$var2) {

        // If the values are not identical, definitely not a match
        if ($var1 !== $var2) return FALSE;

        // Make a copy of the old value
        $oldVal = $var1;

        // Get a new value we can assign that is different to the old value
        $newVal = ($oldVal === 1) ? 2 : 1;

        // Assign the value to $var1
        $var1 = $newVal;

        // See if $var2 has changed
        $result = $var1 === $var2;

        // Put the value of $var1 right again
        $var1 = $oldVal;

        return $result;

    } 
```

这是一个辅助函数（将与上述任一`vars_are_referenced()`定义一起使用），根据作为字符串的变量名称和变量本身来具体确定变量是否为全局变量：

```
<?php

    function var_is_global ($name, &$var) {
        return vars_are_referenced($GLOBALS[$name], $var);
    } 
```

我想不出一种方法来准确检查任意变量是否在对象上下文之外是静态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:41:50.857

您想看看[get_defined_vars()](http://php.net/manual/en/function.get-defined-vars.php)函数，它返回一个包含所有已定义变量的数组。

```
var_dump(get_defined_vars()) 
```

但是如果你想正确地做到这一点，看看 Xdebug，你不仅可以预览设置变量，还可以跟踪它们。[点击这里获取更多信息。](http://derickrethans.nl/variable-tracing-with-xdebug.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T15:38:52.900

eval()'ing 全局语句怎么样？

```
function isglobal($name)
{
    return eval('global $'. $name .'; return isset($'. $name .');');
} 
```

但是，请注意正确转义要检查的名称。

# c++ - 释放返回值/指向 CvMat 的指针的内存

> ID：11544095
> 
> 赞同：1
> 
> 时间：2012-07-18T14:46:30.227
> 
> 标签：c++, opencv

我在使用 OpenCV 释放内存时遇到问题。如何释放返回指针的内存？

这是我的代码：

这是我调用函数细化的函数：

```
int preprocessing_and_classification() { 

/// Section 2D - Perform morphological processing 

            CvMat* image1_edge_morpho = thinning(image1_edge); 
                        ....... 
                        ....... 
                        ........... 

                        //////////////// release the memory /////////////// 
            cvReleaseImage(&img); 
            cvReleaseMat(&image1); 
            cvReleaseMat(&image1_edge); 
            cvReleaseMat(&image1_edge_morpho); 
            cvReleaseImage(&imgg); 
            cvReleaseImage(&imggT); 
            cvReleaseMemStorage(&g_storage); 
            cvReleaseMat(&features); 
            cvReleaseMat(&labels_obtained); 
            ///////////////////////////////////////////////////// 
return num_bacilli; 

} 
```

您可以在下面看到的函数变薄返回指针 Merode：

```
CvMat* thinning(CvMat* M){ 

/* 
Input parameters 
CvMat* M = Pointer to the matrix on which morphological processing needs to be done. 

Output parameters 
CvMat* Merode = Pointer to morphological processed matrix. 
*/ 

    CvMat* Merode = cvCreateMat(h,w,CV_8UC1); 
    . 
    . 
    . 
    . 
    . 
    . 

    ///// Releasing the images, matrices and structuring elements to free memroy. 
   // Matrix Merode is not released as it is the output of this function file 
    cvReleaseStructuringElement(&B); 
    cvReleaseMat( &Mopen ); 
    cvReleaseMat( &temp ); 
    cvReleaseMat( &Mclose ); 
    cvReleaseMat( &temp1 ); 
    cvReleaseMat( &MM ); 
    cvReleaseImage( &img1 ); 
    cvReleaseMemStorage(&g_storage); 
    cvReleaseMat( &Mimg1 ); 
    cvReleaseMat( &Mimg2 ); 

    return Merode; 
} 
```

如何删除 Merode？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:03:49.003

如果您被允许更改`thinning`您可以使用的函数，[`cv::Mat`](http://docs.opencv.org/modules/core/doc/basic_structures.html?#mat)或者[`cv::Ptr<cvMat>`](http://docs.opencv.org/modules/core/doc/basic_structures.html?#ptr)（或者甚至`std::unieue_ptr`或`std::shared_ptr`使用自定义删除器 - 在 c++11 兼容编译器的情况下）

如果不允许更改代码，则应在使用该方法的任何位置删除返回指针。最简单的方法是用`cv::Ptr<>`.

# .net - NetMsmqBinding 关闭时丢失消息

> ID：11544098
> 
> 赞同：2
> 
> 时间：2012-07-18T14:46:35.147
> 
> 标签：.net, wcf, msmq, netmsmqbinding

我一直在用非事务队列测试 WCF 的 NetMsmqBinding。我发现服务，即从队列中读取的部分，在关闭时偶尔会丢失一条消息。

例如，如果我有一个包含数字 1 - 10 消息的队列，并允许它在重新启动之前读取前五条消息（1、2、3、4、5），那么我可能会收到的其余消息是（7、8、9、10）。'6'，它在服务关闭之前要接收的消息丢失了。

这是因为我使用的是非事务性队列吗？有什么方法可以防止这些消息在不进行事务处理的情况下丢失？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:08:57.407

如果您无法使用事务队列，那么防止消息丢失的另一种解决方案是同时运行一个或多个冗余队列通道。

这意味着您发送的消息不是一次，而是 N 次。然后同时处理每条消息 N 次，最终结果应该是没有消息被丢弃。

这样做的原因是，即使每个处理通道都可能丢弃偶尔的消息，但所有 N 个处理通道都不太可能丢弃相同的消息。

您唯一需要确保的是您的系统可以处理添加的卷并且可以幂等地处理消息。

# android - 带有后退按钮问题的 Android ProgressDialog OnClickListener

> ID：11544102
> 
> 赞同：1
> 
> 时间：2012-07-18T14:46:44.173
> 
> 标签：android, progressdialog, onclicklistener

我有一些选项卡类型的活动，用户可以在单击顶部的按钮选项卡时从一个活动导航到另一个活动。单击任何选项卡时，会出现一个 ProgressDialog，带有“正在加载...”视图。我想管理它，因为在加载过程中，如果用户按下后退按钮，它会返回到上一个活动。

我已经尝试使用 ProgressDialog 的 onClickListener 来实现它，但我遇到了 2 个问题。

**第一个**问题是在加载对话框期间：如果用户单击屏幕上的任何位置，则会触发进度对话框的 onClickListener。我不希望这种情况发生；它只能从按钮后面触发。

**第二个**问题是当“正在加载...”出现时，我的 onClickListener 工作 1 或 1.5 秒，而它可见大约 2-3 秒。如果我在 1 或 1.5 秒后按下返回按钮。进度对话框侦听器不执行任何操作并保持相同的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:29:44.243

这就是我解决问题的方法：

```
 public ProgressDialog pDialog;
    @Override
    public void onBackPressed() {
        // TODO Auto-generated method stub
        if (pDialog != null)
            if (pDialog.isShowing())
                return;

        super.onBackPressed();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:05:04.903

覆盖`onBackPressed()`方法并首先关闭您的对话框，然后让`super.onBackPressed()`工作，这样它将关闭您的对话框，您可以返回正常屏幕。

其次，只需设置`dialog.setCancellable(false);`，这样用户即使点击屏幕的任何位置也无法进行操作。

例如，

```
@Override
public void onBackPressed() {
 dialog.dismiss();
 super.onBackPressed();
}

void create ProgressDialog() {
 dialog =  new ProgressDialog/Alerdialog.Builder(this);
 dialog.setTitle(tile);
 dialog.setMessage(message);
 dialog.setCancellable(false);
 dialog.show();
} 
```

一切顺利！

# java-me - 诺基亚java应用程序内购买错误代码在购买完成回调

> ID：11544104
> 
> 赞同：3
> 
> 时间：2012-07-18T14:46:48.877
> 
> 标签：java-me, in-app-purchase, nokia, nokia-s40

我有一个基于 J2ME 的应用程序，而且我是 IAP 购买的新手。我的情况是用户第一次购买应用程序后，他可以使用该应用程序 1 个月，之后他需要重新购买它，同样，如果他想进一步使用它，他必须每个月之后购买它。所以我创建了一个布尔变量，每 30 天后我将其设为 false，然后如果用户通过应用内购买购买应用程序，我可以将这个变量设为 true。所以如果一个月后如果用户想进一步使用它，他可以通过按下按钮重新购买它。在这个按钮中，我使用下面的代码：

```
 int status = manager.purchaseProduct(PURCHASE_ID,
 IAPClientPaymentManager.FORCED_AUTOMATIC_RESTORATION);
 if (status != IAPClientPaymentManager.SUCCESS) {
 System.out.println(Messages.getPaymentError(status));
 return false;
     }
    return true; 
```

并在回调中......

```
public void purchaseCompleted(int status, String purchaseTicket) {
System.out.println("Purchase Completed : "+status+" "+purchaseTicket);
if (status == OK) {
System.out.println("ok");

} else {
System.out.println("Not ok");

}
} 
```

但在回电中我得到一个代码：-35 ....我不知道为什么.....请注意我使用的是诺基亚 asha 303 模拟器，当我对本地 sdk 使用应用内模拟时，我得到了响应代码好的。但是当我使用诺基亚服务器时，我在购买完成时收到错误代码-35。

# c# - WP7 中依赖属性的内部结构

> ID：11544109
> 
> 赞同：1
> 
> 时间：2012-07-18T14:47:06.233
> 
> 标签：c#, windows-phone-7, dependency-properties

在阅读[了 WPF 中依赖属性的内部结构](http://www.abhisheksur.com/2011/07/internals-of-dependency-property-in-wpf.html)后，我想知道如何在 Silverlight 中为 WP7 实现依赖属性。[调查使用了来自xda 论坛](http://forum.xda-developers.com/showthread.php?t=647138)的反射器和 Dll 。

在 WPF 中：

> DependencyProperty 维护您在 WPF 对象层次结构中注册的所有 DependencyProperty 的静态引用。它维护一个名为 PropertyFromName 的 HashTable，它在内部使用它来获取 DependencyProperty 对象。所以换句话说，每个dependencyProperty 对象都注册在一个全局HashTable 中。

在 Silverlight for WP7 DependencyProperties 中具有几乎相同的全局 HashTable（实际上是

```
static Dictionary<Type, Dictionary<string, DependencyProperty>> _registeredProperties 
```

)

但是在查看了*DependencyObject类的**GetValue*和*SetValue*方法的源代码后，我发现根本没有使用 _registeredProperties *。*

 **有谁知道为什么以这种方式实施它？或者也许我错过了什么？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:43:40.330

我认为你确实错过了一些东西。字典（以及它在 WPF 中的`_registeredProperties`任何等效项）用于按名称检索依赖项属性。它主要用于绑定机制（框架必须从类似的表达式中检索 DP `{Binding Path=PropertyName}`）。

当您在`GetValue`or中`SetValue`时，您已经有了对 DP 的引用（它是方法的第一个参数）。因此，`_registeredProperties`在那里是没用的。`GetValue`并且`SetValue`都使用另一个`_valueTable`类型的字典`Dictionary<DependencyProperty, EffectiveValueEntry>`。`_valueTable`是将值与 DP 相关联的实际集合。**

# android - Android：尝试从 URI 播放视频时应用程序强制关闭

> ID：11544113
> 
> 赞同：0
> 
> 时间：2012-07-18T14:47:13.957
> 
> 标签：android, video, streaming, media-player, android-videoview

我编写了这段代码来尝试将视频流式传输到我的 Android 设备。单击图标后，应该会出现一个弹出窗口，其中包含 VideoView。但是，每当我单击图像触发弹出窗口时，它都会强制关闭。我正在使用的 URL 显然可以流式传输到设备，我从另一个 SO 问题中得到它。这是我班上的代码。

```
 video.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.pop_up);
            dialog.setTitle("Safe Cracker Overview");

            VideoView vv = (VideoView)findViewById(R.id.vv01);
            MediaController mc = new MediaController(context);
            mc.setAnchorView(vv);
            mc.setMediaPlayer(vv);
            vv.setMediaController(mc);
            vv.setVideoURI(Uri.parse("http://hermes.sprc.samsung.pl/widget/tmp/testh.3gp"));
            vv.requestFocus();
            vv.start();
            Button ok = (Button)findViewById(R.id.but01);

            ok.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            });

            dialog.show();
        }
    }); 
```

以及弹出布局的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/vv01"
        android:layout_width="fill_parent"
        android:layout_height="200dp"
        android:layout_marginTop="20dp"
        android:background="#0000" >
    </VideoView>

    <Button
        android:id="@+id/but01"
        android:layout_width="150dp"
        android:layout_height="40dp"
        android:layout_gravity="center"
        android:layout_marginTop="10dp"
        android:background="@drawable/green_button"
        android:text="@string/back"
        android:textColor="@color/white"
        android:textSize="16dp" >
    </Button>

</LinearLayout> 
```

任何人都可以在这里看到这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:26.497

你忘了给出参考`dialog for VideoView and Button.`

```
VideoView vv = (VideoView)dialog.findViewById(R.id.vv01);
                          ^^^^^^  
Button ok = (Button)dialog.findViewById(R.id.but01);
                    ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:53:22.877

改变

`VideoView vv = (VideoView)findViewById(R.id.vv01);`

和

`VideoView vv = (VideoView)dialog .findViewById(R.id.vv01);`

并`Button ok = (Button)findViewById(R.id.but01);`与`Button ok = (Button)dialog .findViewById(R.id.but01);`

# javascript - 如何自动对 HTML 表格中共享相同名称的输入值框求和？

> ID：11544121
> 
> 赞同：1
> 
> 时间：2012-07-18T14:47:30.700
> 
> 标签：javascript, jquery, html, velocity

我有一个带有输入框列的 HTML 表，并且希望自动显示框中的值的总和（即，无需单击求和按钮并随着框中的值更改而更新）。表中的行数会有所不同，因为它是通过速度动态创建的。下面是一个示例 HTML 表，我希望显示容量行中的值的总和。我不确定从哪里开始，我尝试了许多 JavaScript 代码，但无法让任何东西正常工作。

```
 <table border = "1" id = "table">
  <TR>
        <TH>Resource</TH> 
        <TH>Vacation</TH>
        <TH>Allocation</TH>
        <TH>Holidays</TH> 
        <TH>Capacity</TH>
        <TH>Remainder</TH>
    </TR>

  #foreach($user in $userList)
  <tr>
  <td>$user.resource</td>

        <td><input type=text name="vacation" size="6" maxlength="10"></td>
        <td><input type=text name="alloc" size="6" maxlength="10"></td>
        <td><input type=text name="holidays" size="6" maxlength="10"></td>
        <td><input type=text name="capacity" size="6" maxlength="10"></td>
        <td><input type=text name="remainder" size="6" maxlength="10"></td>
    </tr>
  #end 
  <tr>
  <td>Total:</td>
  <td></td><td></td><td></td>
  <td class= "capsum"><input type="text" name="captotal" size="6" maxlength="10"></td>
  <td><input type="text" name="remtotal" size="6" maxlength="10"></td>

  </tr>

  </table> 
```

表格中会有多行，容量列中的每个输入框都同名。因此Capsum列的总和应该显示在“capsum”输入框中，并且应该随着输入框中的值的变化而自动计算和更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:13.817

像这样的东西：

```
$('table#table input[name=capacity]').change(function()
{
 var sum = 0;

 $('table#table input[name=capacity]').each(function()
 {
  sum += parseInt($(this).val());
 });

 $('input[name=captotal]').val(sum);
}); 
```

[http://jsfiddle.net/H7DSX/10/](http://jsfiddle.net/H7DSX/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:20:29.743

钩住[`change`事件](http://api.jquery.com/change/)，最好在[表级别](https://stackoverflow.com/questions/265074/does-the-onchange-event-propagate)。然后总结所有值：

```
var updatefns = {};
jQuery.each(["vacation", "alloc" ,"holidays", "capacity", "remainder"], function(i, name) {
     // cache all the elements
     var head = $("#table tr:first th:nth-child("+i+")"); // kind of selector
     var inputs = $("#table input[name=\""+name+"\"]");
     updatefns[name] = function() {
         var sum = 0;
         inputs.each(function(){
             sum+=parseInt(this.value) || 0;
         });
         // set new text:
         head.text(name.charAt(0).toUppercase+name.substr(1)+": "+sum);
     };
});
$("#table").change(function(e){
     var t, n;
     if ((t = e.target) && (n = t.name) && n in updatefns)
         updatefns[n]();
}); 
```

您可以为要更新的头部单元格使用更好的选择器，也许给它们一个相应的属性来选择它们。当然，您可以自由更改新文本的设置方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T14:52:34.390

您需要为需要求和的表单字段分配一个要为 onChange JavaScript 事件处理的函数。

然后，此函数将简单地读出每个字段的值，计算总和，然后将其存储回它需要去的地方。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T14:56:36.497

如果你有 jQuery 试试：

```
<table onchange="reloadSum()"></table>

var reloadSum = function() {
    var sums = $('.toBeSummed'); // this will need to be the class of the things you want to sum
    var sum = 0;
    for (var i = 0; i < sums.length; i++) {
        sum += parseFloat(sums[i].value);// or maybe parseFloat(sums[i].innerHTML)
    }
    $('#capsum').text(sum);
} 
```

如果您没有 jQuery，请获取 jQuery，然后执行此操作。

# c# - 从 aspx 源调用 js 函数

> ID：11544123
> 
> 赞同：0
> 
> 时间：2012-07-18T14:47:42.247
> 
> 标签：c#, javascript, asp.net

我在代码隐藏中编写了一个 Javascript 函数，如下所示：

```
Page.ClientScript.RegisterClientScriptBlock(
    Page.ClientScript.GetType(),
    "MyScript",
    "<script type='text/javascript'>" +
        "var urls="+s +
        "function carousel(params) { ... }" +
    "</script>"); 
```

如何调用我在客户端（在 ASPX 页面级别）**的代码隐藏中编写的 javascript 函数？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:52:41.523

在页面的标记中，您只需要引用该函数 - 通常在事件处理程序中，例如 onClick，就像您使用任何其他 javascript 函数一样，并且理解您必须提供您的参数为适当的...例如

```
<input type='button' onclick="carousel(1)"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:53:14.260

> ***重要提示**：虽然这是添加 javascript 函数的合法方式，但强烈建议不要这样做，因为您正在混合服务器端和客户端代码。经常这样做会导致代码库难以维护。*

## 您的功能是全局客户端功能

您的函数是在全局范围内定义的，因此客户端脚本可以直接访问它：

```
carousel(params); 
```

但是你必须确保没有其他全局函数覆盖它（以防你试图调用它但得到了意想不到的结果）。

## 功能还没有定义？

未定义函数的原因可能有很多。也可能是你的函数有一些语法错误。

反正。您始终可以使用浏览器中的开发工具（Firefox 中的 Firebug 或 Chrome 中的开发工具）检查全局功能。只需按下`F12`它就会出现。打开脚本标签并检查...

如果找不到您的函数，您可以通过将其从后面的代码（当然要清理那些字符串引号）复制到浏览器开发工具的控制台窗口中来检查它的语法，并查看浏览器对它的看法。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:12:53.877

首先，urls 变量看起来是错误的。我不知道它是否是您的真实代码，但请尝试在每行末尾的换行符和换行符。

```
"var urls='"+s + "';\n" 
```

其次你应该使用`Page.GetType()`

之后调用，你可以像往常一样在你的 html 页面中调用它作为 JS 函数，但是如果你想调用它通过 ASP.Net 页面注册，你应该使用`RegisterStartupScript`它，因为它是页面的注册端。

```
Page.ClientScript.RegisterStartupScript(
    Page.GetType(),
    "callScript",
    "<script type='text/javascript'>" +
        "carousel('"+paramFromServerSide+"');" +
    "</script>"); 
```

[更多来自 MSDN](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:47:00.433

![在此处输入图像描述](../Images/bcf85701ec599e76bf3a850e0a94d1ee.png) 试试下面的代码

**代码背后：**

```
protected void Page_Load(object sender, EventArgs e)
    {
        string s = "Hello"; // change it what ever you have i used it for testing
        Page.ClientScript.RegisterClientScriptBlock(
        Page.GetType(),
       "MyScript",
       "<script type='text/javascript'>" +
        "var urls=" +"'"+s+"';\nfunction carousel() { alert(urls); }" +
        "</script>");     
    } 
```

我用过Button控件。

```
<asp:Button ID="Button1" runat="server" OnClientClick="carousel();"  Text="Click Me" /> 
```

如果要在 JavaScript 函数中使用参数，

![在此处输入图像描述](../Images/f5df1258ee8e12dd1b3d1ca750afcb22.png) 请使用以下代码

**代码背后：**

```
protected void Page_Load(object sender, EventArgs e)
    {
       string s = "www.stackoverflow.com";
    Page.ClientScript.RegisterClientScriptBlock(
    Page.GetType(),
   "MyScript",
   "<script type='text/javascript'>" +
    "var urls=" +"'"+s+"';\nfunction carousel(param) { alert('param value:'+param+'  s value:'+urls); }" +
    "</script>");         
    }

<asp:Button ID="Button1" runat="server" OnClientClick="carousel(1);" Text="Click Me" /> 
```

完全希望它会帮助你走向正确的方向。

# xml - 在编译/发布时将 XML 嵌入到 Flash 文件中？

> ID：11544126
> 
> 赞同：1
> 
> 时间：2012-07-18T14:47:56.863
> 
> 标签：xml, flash, actionscript-2

我知道如何在 ActionScript 2 中访问外部 XML 文件，但是在这个项目中，要求 SWF 文件必须是自包含的。

我保留 XML 的原因是因为它是另一个程序的输出，所以如果我可以保持 XML 原样，我就可以避免手动输入数据。

我知道 AS3 中有 [embed] 元标记，但不幸的是我被 AS2 卡住了。

有没有办法使用 ActionScript 2 在编译/发布时嵌入 XML 文件，或读取数据并存储为变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:20:27.240

在 AS3 中，您可以硬编码 XML（不使用嵌入语法）：

```
private var myXml:XML = <root_node>
                            <child_1 />
                            <child_2 />
                        </root_node>; 
```

我刚刚快速[搜索了 AS2](http://www.actionscript.org/forums/showthread.php3?t=215891)，看起来你可以这样做（注意链接的文章提到了一两个陷阱）：

```
xmlData = new XML();
xmlData.ignoreWhite = true;
xmlData.parseXML("<root_node><child_1 /><child_2 /></root_node>;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:39:21.133

经过大量测试，我发现我的局限性太大了，不能仅仅依靠 Flash 来解决我的问题。

因为我仅限于 AS2 并且我不能使用外部 XML，这意味着......

1.  我无法嵌入 XML（AS3 功能）。
2.  如果我尝试将整个 XML 粘贴到舞台上的文本字段中，它会超过 65535 的最大字符限制。
3.  我无法将 XML 直接粘贴到代码编辑器中（多行字符串文字是 AS3 功能）。
4.  对于#3，即使我转义了所有引号并删除了换行符，Flash 也会在这么长的变量上窒息。

所以我所做的是创建一个单独的 HTML 页面，使用 jQuery 我加载目标 XML 文件并清理 Flash 文件未使用的所有数据，并将结果吐出到 div 上，正确转义尖括号和引号，这样结果 XML 数据就足够小，可以放入舞台上的文本字段中，我可以将其用作输入。

所以工作流程变成：

```
Generate XML -> Open HTML page -> Copy Cleaned XML -> Paste into Textfield in Flash -> Publish 
```

这可能是另一个步骤，但 HTML/JavaScript 可以在任何地方运行，并且对我的用户来说非常简单，因此考虑到我的局限性，它最终成为一个很好的解决方案。

# jquery - Ajax 调用未成功或未完成或其他 MVC3

> ID：11544133
> 
> 赞同：0
> 
> 时间：2012-07-18T14:48:18.190
> 
> 标签：jquery, submit

如果浏览器不要求我保存文件，我无法让一个简单的 Ajax 工作并返回 JSON ......然而，就目前而言，我什至无法让 ajax 调用工作......让我给你对我正在努力完成的事情有一个 1000 英尺的视野。我正在尝试拥有 3 个选项卡...其中 2 个代表通过 Web 服务调用搜索数据的两种相似但不同的方式。当 JSON 结果返回时，第三个选项卡将在表格中显示结果。看起来很简单，因为我已经分别成功地完成了这三个组件中的每一个，所以我认为组合会很简单。不是这样。

现在让我烦恼的是，实际上是将 JSON 数据返回到视图，然后切换到该选项卡......我目前遇到的是我进入提交功能并且没有任何反应。这是非常令人沮丧的。首先，这是我设置表单的方式...

```
@using(Html.BeginForm("SearchByDemographic",
          "SearchPatients",
          FormMethod.Post, 
          new{
              id = "searchByDemographics"
          }
      )
 ) 
```

形式没什么特别的。我想在某个时候在那里进行 jq-validation，但是当我到达那里时，我会越过那座桥......这是除了将数据绑定到 jqGrid 的函数之外应该调用控制器的 jquery 函数。 ..我做过类似的事情，但不是一起做的......

```
$('#formSearchByMRN, #searchByDemographics').submit(function (event) {
    debugger;
    //event.preventDefault();
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        dataType: "json",
        success: function (result) {
            debugger;
            //$('#retTable').html(result);
            switchToResultTab(result);
        }
    });
    return false;
});

function switchToResultTab(data) {
    debugger;
    $("#list").setGridParam({
        datatype: 'jsonstring',
        datastr: data,
        caption: 'Patient Search Result'
    }).trigger("reloadGrid");
    $('a[href="#retTable"]').click();
}; 
```

目前，当我单步执行代码时，我从来没有通过调试器函数调用......这就是它停止的地方！！！！我就像地球上发生了什么？我到底是怎么搞砸了这么简单的函数调用的？！我从来没有打过 .ajax 电话？？？让我们假设我在某个地方是个白痴，并且我可以让该死的 ajax 调用工作。一旦我到达那里，每当我到达成功功能时，我的结果总是空的。如果我切换到完成，浏览器会要求我打开或保存 JSON 文件...有没有人有任何一般性建议，我知道这有点专业，所以可能很难得到具体的答案，但任何人都可以提出任何原则我可能在这里俯瞰？您将如何实现类似的结果？

谢谢

**更新：似乎我没有得到我的 URL 或我的方法类型**

不知道为什么调用 this.action 没有得到定义的表单动作......我不知道是否有人对此有任何见解？也许是因为我在该函数中调用了两种不同的形式？

**更新** 好的，无论我做什么，我似乎都无法获得操作或请求类型......如果我这样做

```
var type = this.action; 
```

或者

```
var type = $('#searchByDemographics').attr('action');
var type = this.method; 
```

或者

```
var method = $('#searchByDemographics').attr('method'); 
```

我到底做错了什么？

**更新** 我设法将操作放入操作 url 参数中。似乎我无法做任何事情来让这个东西调用我的方法并返回。

```
var urlVal = event.target.action; 
```

以上是我如何获得动作 **实际的 HTML：取自 IE**

```
<FORM id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" method=post action=/SearchPatients/SearchByDemographic jQuery1720011976762447693911="75" _submit_attached="true"><UL>
<LI><LABEL for=SSN>SSN</LABEL> <BR><INPUT id=SSN name=SSN></LI></UL>
<UL>
<P>Or</P></UL>
<UL>
<LI><LABEL for=FirstName>FirstName</LABEL> <BR><INPUT id=FirstName name=FirstName value=Betty></LI>
<LI><LABEL for=LastName>LastName</LABEL> <BR><INPUT id=LastName name=LastName value=White></LI>
<LI><LABEL for=dateOfBirth>dateOfBirth</LABEL> <BR><INPUT id=dateOfBirth name=dateOfBirth></LI>
<LI><LABEL for=Address1>Address1</LABEL> <BR><INPUT id=Address1 name=Address1></LI>
<LI><LABEL for=Address2>Address2</LABEL> <BR><INPUT id=Address2 name=Address2></LI>
<LI><LABEL for=City>City</LABEL> <BR><INPUT id=City name=City></LI>
<LI><LABEL for=State>State</LABEL> <BR><INPUT id=State name=State></LI>
<LI><LABEL for=Country>Country</LABEL> <BR><INPUT id=Country name=Country></LI>
<LI><LABEL for=PostCode>PostCode</LABEL> <BR><INPUT id=PostCode name=PostCode></LI></UL><INPUT id=submit class=button value="Search By Demographics" type=submit> </FORM> 
```

这通常会很好。但是，我在页面上至少有两个表单这一事实可能会使某些事情复杂化......

```
<DIV id=searchPatient class="float-left ui-tabs ui-widget ui-widget-content ui-corner-all" jQuery1720011976762447693911="52"><UL class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<LI class="ui-state-default ui-corner-top" jQuery1720011976762447693911="56"><A href="#searchByMRN" jQuery1720011976762447693911="58">Search By MRN</A></LI>
<LI class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active" jQuery1720011976762447693911="57"><A href="#searchByDemographics" jQuery1720011976762447693911="59">Search By Demo</A></LI></UL>
<DIV style="MARGIN-TOP: 6px; DISPLAY: inline; FLOAT: left; MARGIN-LEFT: 6px; MARGIN-RIGHT: 6px" id=searchByMRN class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
<FORM id=formSearchByMRN method=post action=/SearchPatients/SearchByMRN?Length=13 data-ajax-update="#retTable" data-ajax-success="switchToResultTab" data-ajax-mode="replace" data-ajax-method="POST" data-ajax="true">
<P>
<UL>
<LI><LABEL for=MRN>MRN#</LABEL><BR><INPUT id=MRN name=MRN></LI>
<LI><LABEL for=MRNDrop>MRNDrop</LABEL><BR><SELECT id=MRNDrop name=MRNDrop><OPTION selected value=MPACMRN>Medipac</OPTION> <OPTION value=NWMRN>NorthWest</OPTION> <OPTION value=BEDFORD>Epic</OPTION> <OPTION value=CHILDRENS>Bedford</OPTION> <OPTION value=CHILDRENS>Childrens</OPTION> <OPTION value=MAGEE>Magee</OPTION> <OPTION value=PASSAVANT>Passavant</OPTION> <OPTION value=MERCY>Mercy</OPTION> <OPTION value=BEST>Medicare</OPTION> <OPTION value=HEALTHPLAN>UPMC Health Plan</OPTION> <OPTION value=EMPIID>EMPI</OPTION></SELECT></LI></UL>
<P></P><INPUT value="Search by MRN" type=submit> </FORM></DIV>
<DIV style="WIDTH: 50%; DISPLAY: inline; FLOAT: left" id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" jQuery1720011976762447693911="70">
<FORM id=searchByDemographics class="ui-tabs-panel ui-widget-content ui-corner-bottom" method=post action=/SearchPatients/SearchByDemographic jQuery1720011976762447693911="75" _submit_attached="true">
<UL>
<LI><LABEL for=SSN>SSN</LABEL> <BR><INPUT id=SSN name=SSN></LI></UL>
<UL>
<P>Or</P></UL>
<UL>
<LI><LABEL for=FirstName>FirstName</LABEL> <BR><INPUT id=FirstName name=FirstName value=Betty></LI>
<LI><LABEL for=LastName>LastName</LABEL> <BR><INPUT id=LastName name=LastName value=White></LI>
<LI><LABEL for=dateOfBirth>dateOfBirth</LABEL> <BR><INPUT id=dateOfBirth name=dateOfBirth></LI>
<LI><LABEL for=Address1>Address1</LABEL> <BR><INPUT id=Address1 name=Address1></LI>
<LI><LABEL for=Address2>Address2</LABEL> <BR><INPUT id=Address2 name=Address2></LI>
<LI><LABEL for=City>City</LABEL> <BR><INPUT id=City name=City></LI>
<LI><LABEL for=State>State</LABEL> <BR><INPUT id=State name=State></LI>
<LI><LABEL for=Country>Country</LABEL> <BR><INPUT id=Country name=Country></LI>
<LI><LABEL for=PostCode>PostCode</LABEL> <BR><INPUT id=PostCode name=PostCode></LI></UL><INPUT id=submit class=button value="Search By Demographics" type=submit> </FORM></DIV></DIV> 
```

问题是，如何准确地得到正确的形式和动作......

# javascript - 正则表达式对我想要做什么是正确的吗？

> ID：11544134
> 
> 赞同：0
> 
> 时间：2012-07-18T14:48:22.070
> 
> 标签：javascript, regex, node.js, webserver

我正在创建一个可重用的 node.js **NavigationController**类，因此我可以在其他服务器端项目中重用它，如果我可能需要或其他人可能会发现它有用。

这是用例。

```
var navController = new NavigationController({
    routes : {
        '/user/:action/:anything' : 'UserController',
        '/app/:action' : 'AppController',
        '/file/:action' : 'FileController',
        '/feedback/:action' : 'FeedbackController',
        '/:anything' : 'ErrorController'
    },
    ErrorController : 'ErrorController'
});
navController.init(); 
```

服务器请求的用户可以调用该对象的这个函数。

```
navController.navigate(req, res); 
```

现在这个和控制器被正确地调用了。作为基于 URL 调用适当控制器对象的一部分的**navigate(req, res)**函数下的东西被定义为名为**getRouteByPath(path)**的函数。此私有函数将获取路由并允许**navigate(req, res)**函数获取要调用的控制器类名称。

```
var getRouteByPath = function(path) {
    for(var route in config.routes) {
        var routeRegex = '';

        var routeParts = route.split('/');

        for(var rp = 0; rp < routeParts.length; rp++) {

            // checking if route part starts with :
            if(routeParts[rp].indexOf(':') === 0) {

                // this is "anything" part
                routeRegex += '[/]?([A-Za-z0-9]*)';

            } else if(routeParts[rp] != "") {
                routeRegex += '[/]?' + routeParts[rp];
            }
        }

        var routeRegexResult = path.match(routeRegex);
        if(routeRegexResult) {
            console.log(routeRegexResult);
            return route;
        }
    }
    return null;
}; 
```

我太担心这个功能，好像这是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:02:04.120

一些缺陷：

*   为什么使用斜杠作为字符类（`[/]`）？无需这样做，仅在正则表达式文字中，您需要使用反斜杠（如`/\//g`）对其进行转义。只需使用单个“ `/`”代替（`new RegExp("/", "g")`）。

*   `.indexOf(<string>)==0`确实有效，但搜索整个字符串并且效率不高。在您的情况下，更好地使用[startswith](https://stackoverflow.com/questions/646628/javascript-startswith)`routePart.charAt(0)==":"`

*   `<string>.match(<string>)`- 我建议构建一个新[`RegExp`对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/)并使用[`.test`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)，因为你不想*匹配*- 我认为也不需要构建捕获组，因为你只返回路由字符串但没有匹配（好的，你记录它们）。

*   您想检查整个是否`path`与您的正则表达式匹配？不要忘记添加`^`和`$`。您当前的 AppController 正则表达式也匹配类似`/user/app/example`.

*   为什么你的斜线（并且只有斜线）是可选的（`/?`）？不仅我认为这不是您想要的，而且在构建正则表达式时，它也为[灾难性回溯打开了大门](http://www.regular-expressions.info/catastrophic.html)`/\/?user\/?([A-Za-z0-9]*)\/?([A-Za-z0-9]*)/`

    为了避免这种情况，您需要将整个组设为可选：`(?:/([^/]*))?`.

*   此外，您应该只构建一次正则表达式（在初始化时）并将它们存储在缓存中，而不是每次调用`getRouteByPath`. 的编译`RegExp`隐藏在您的代码中，尽管它需要发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:03:23.577

几点注意事项：

```
routeRegex += '[/]?([A-Za-z0-9]*)'; 
```

表示可能存在或不存在的路线`//`将匹配可能 a`+`比 a 更适合`*`。

`_`此外，由于网络路由允许我瘦

您的`.split('/')`, 将从路线中删除所有`/`内容，因此它不应该在拆分列表中

# google-chrome-extension - 隐藏扩展以刷新自身

> ID：11544140
> 
> 赞同：0
> 
> 时间：2012-07-18T14:48:30.210
> 
> 标签：google-chrome-extension

我有一个通知扩展程序，它本身显示新通知的数量。

我怎样才能让我的扩展程序在 XX 秒内没有显示时自行刷新，以便它可以更新它的号码？

我试过这个页面：[Chrome extension refresh page when is not visible](https://stackoverflow.com/questions/8705200/chrome-extension-refresh-page-when-is-not-visible) 但它只在它可见时才有效（在这种情况下，在 else 语句中）我无法让它在隐藏时工作。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:58:45.950

您需要将此逻辑放入[背景页面](http://code.google.com/chrome/extensions/background_pages.html)，然后在该文件中使用`setInterval`并在其中运行您的代码。

# asp.net - 自动发布到 Facebook 帐户

> ID：11544142
> 
> 赞同：-2
> 
> 时间：2012-07-18T14:48:40.133
> 
> 标签：asp.net, facebook-graph-api

我创建了一个网站，在该网站上我创建了一个页面，如果我写任何我希望将其发布在我的 Facebook 帐户上的页面，那么您是否有任何 API（应用程序接口）可以在我的网站中使用通过它我可以将帖子自动添加到 Facebook 帐户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:07:20.993

你看过[http://csharpsdk.org/](http://csharpsdk.org/)吗？

它可能是您通过 .NET 框架连接到 Facebook API 的最佳资源，特别是此处的文档：http: [//csharpsdk.org/docs/web/getting-started](http://csharpsdk.org/docs/web/getting-started)

# android - Android 默认照片文件名格式

> ID：11544151
> 
> 赞同：1
> 
> 时间：2012-07-18T14:49:01.930
> 
> 标签：android, filenames

我一直在尝试对在 Motorola Razr 拍摄的照片的时间戳进行逆向工程。我对 UTC - GMT 等感到满意……但一切都不像我所期望的那样。

以下是我正在查看的文件名。

2012-07-179518-07-5295768.jpg

2012-07-179519-29-3395516.jpg

它们是在中部时间下午 2012 年 7 月 17 日拍摄的。

显然第一部分是日期。留下像 518-07-5295768 和 519-07-3395516 这样的时间戳。

这些值我无法解码任何想法？

# spring - Spring 3.1 和 JPA 2 没有正在进行的事务异常

> ID：11544157
> 
> 赞同：5
> 
> 时间：2012-07-18T14:49:12.677
> 
> 标签：spring, jpa-2.0, spring-orm

我已经在这几个星期了。我试过eclipselink，现在只是普通的JPA。我一直遇到同样的问题。每次我尝试刷新我的实体管理器时，我都会收到“javax.persistence.TransactionRequiredException: no transaction is in progress”异常。我知道这与我如何连接所有东西有关，但我无法弄清楚。

我曾尝试编写 JUnit 测试来进行测试，但由于我是 Spring 新手，因此存在完全不同的问题。

需要注意的一些事项： **我没有使用 persistence.xml，因为我使用的是 spring 3.1** * *App Server: WebSphere 8.5 (Liberty Profile)* *

例外

```
[ERROR   ] SRVE0777E: Exception thrown by application class 'org.springframework.web.servlet.FrameworkServlet.processRequest():894'
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress
  at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
  at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
  at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
  at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1221)
  at [internal classes]
[ERROR   ] SRVE0315E: An execption occurred: com.ibm.ws.webcontainer.webapp.WebAppErrorReport: org.springframework.web.util.NestedServletException: Request processing failed&#59; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:153)
    at com.ibm.ws.webcontainer.webapp.WebAppErrorReport.constructErrorReport(WebAppErrorReport.java:194)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1078)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:4173)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:302)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.handleRequest(DynamicVirtualHost.java:296)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1006)
    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$1.run(DynamicVirtualHost.java:253)
    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:457)
    at com.ibm.ws.threading.internal.Worker.executeWork(Worker.java:398)
    at com.ibm.ws.threading.internal.Worker.run(Worker.java:380)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.TransactionRequiredException: no transaction is in progress
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1221)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:757)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:440)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:322)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:939)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1036)
    ... 9 more
Caused by: javax.persistence.TransactionRequiredException: no transaction is in progress
    at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:983)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy120.flush(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy120.flush(Unknown Source)
    at com.smartpharm.dao.AbstractGenericDao.save(AbstractGenericDao.java:22)
    at com.smartpharm.account.dao.impl.AccountDaoJpaImpl.createUser(AccountDaoJpaImpl.java:27)
    at com.smartpharm.account.service.impl.AccountServiceImpl.createUser(AccountServiceImpl.java:21)
    at com.smartpharm.account.controller.AccountController.createAccount(AccountController.java:36)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    ... 49 more 
```

pom.xml 依赖项

```
 <properties>
        <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
    </properties>
<dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.3</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.19</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>commons-pool</groupId>
            <artifactId>commons-pool</artifactId>
            <version>1.6</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.3</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.14</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>com.lexi.lexidata</groupId>
            <artifactId>LexiData</artifactId>
            <version>1.0</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
            <version>1.9.6</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-lgpl</artifactId>
            <version>1.9.7</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.7</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.4.Final</version>
            <type>jar</type>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <type>jar</type>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.1.RELEASE</version>
            <type>jar</type>
            <scope>test</scope>
        </dependency>
    </dependencies> 
```

应用程序配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

     <context:annotation-config/>
     <context:component-scan base-package="com.smartpharm"/>   

     <import resource="db-config.xml"/>
     <import resource="security-config.xml"/>

</beans> 
```

db-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
     xmlns:tx="http://www.springframework.org/schema/tx"
     xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

     <jee:jndi-lookup id="lexiDataSource" jndi-name="jdbc/lexiDb" expected-type="javax.sql.DataSource"/> 
     <jee:jndi-lookup id="smartDataSource" jndi-name="jdbc/smartDb" expected-type="javax.sql.DataSource"/>

     <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="smartDataSource" />
        <property name="packagesToScan" value="com.smartPharm" />
        <property name="jpaVendorAdapter">
           <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
              <property name="showSql" value="true" />
              <property name="generateDdl" value="true" />
              <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
           </bean>
        </property>
     </bean>

     <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
     </bean>

     <tx:annotation-driven transaction-manager="txManager" proxy-target-class="false" />

</beans> 
```

抽象通用道

```
package com.smartpharm.dao;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import org.springframework.transaction.annotation.Transactional;

public abstract class AbstractGenericDao<K,PK> implements GenericDao<K,PK> {

    @PersistenceContext
    public EntityManager em;

    public EntityManager getEntityManager() {
        return em;
    }

    @Transactional
    public K save(K toAdd) {
        em.persist(toAdd);
        em.flush();
        return toAdd;
    }

    abstract public K find(PK pk);

    public void deleteByPrimaryKey(PK pk) {
        em.remove(find(pk));
        em.flush();
    }

    public void delete(K toDelete) {
        em.remove(toDelete);
        em.flush();
    }

} 
```

AccountDaoJpaImpl 包 com.smartpharm.account.dao.impl;

```
import org.apache.log4j.Logger;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import com.smartpharm.account.dao.AccountDao;
import com.smartpharm.account.entities.User;
import com.smartpharm.account.model.CreateUserRequest;
import com.smartpharm.dao.AbstractGenericDao;

@Repository
@Transactional
public class AccountDaoJpaImpl extends AbstractGenericDao<User, Integer> implements AccountDao{

    private static Logger log = Logger.getLogger(AccountDaoJpaImpl.class);

    @Transactional
    public void createUser(CreateUserRequest createUserRequest){
        log.info("creating User for " + createUserRequest.getEmailAddress());

        User user = new User();
        user.setUserName(createUserRequest.getEmailAddress());
        user.setPassword("password");

        user = save(user);

        log.debug("user " + user.getUserId() + " created");
    }

    @Override
    public User find(Integer pk) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

AccountServiceImpl

```
package com.smartpharm.account.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import com.smartpharm.account.dao.AccountDao;
import com.smartpharm.account.model.CreateUserRequest;
import com.smartpharm.account.service.AccountService;

@Service
@Transactional
public class AccountServiceImpl implements AccountService {

    @Autowired
    AccountDao accountDao;

    @Transactional
    public void createUser(CreateUserRequest request){
        accountDao.createUser(request);
    }
} 
```

帐户控制器

```
package com.smartpharm.account.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.smartpharm.account.model.CreateUserRequest;
import com.smartpharm.account.model.CreateUserResponse;
import com.smartpharm.account.service.AccountService;

@Controller
public class AccountController {

    private static Logger log = Logger.getLogger(AccountController.class);

    @Autowired
    AccountService accountService;

    public AccountController(){
    }

    @RequestMapping(value="/admin/createUser", method=RequestMethod.POST)
    public @ResponseBody CreateUserResponse createAccount(@RequestBody CreateUserRequest createUserRequest, HttpServletRequest request, HttpServletResponse response){
        log.debug(createUserRequest);

        accountService.createUser(createUserRequest);

        return new CreateUserResponse("userCreated", "no error");
    }

} 
```

同样在它尝试在数据库层提交之前的日志中，我看到它创建的日志然后两次销毁了一个 EntityManager

```
DEBUG AccountController - CreateUserRequest 
firstName = test
middleInit = test
lastName = tset
emailAddress = test
dob = 
address1 = 
address2 = 
city = 
state = 
zip = 

INFO  AccountDaoJpaImpl - creating User for test

DEBUG SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation

DEBUG SessionImpl - Opened session at timestamp: 13426274946

DEBUG EntityManagerFactoryUtils - Closing JPA EntityManager

DEBUG SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation

DEBUG SessionImpl - Opened session at timestamp: 13426274950

DEBUG EntityManagerFactoryUtils - Closing JPA EntityManager 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:01:54.573

```
@Transactional(propagation=Propagation.MANDATORY) 
```

引用 Spring [JavaDoc`MANDATORY`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/annotation/Propagation.html#MANDATORY)：

> 支持当前事务，**如果不存在则抛出异常**。类似于同名的 EJB 事务属性。

只需将其更改为：

```
@Transactional 
```

使用默认 ( `REQUIRED`) 传播。或者`AccountDaoJpaImpl.createUser()`从外部事务调用，例如包装（`AccountServiceImpl.createUser()`使用`@Transactional`默认传播）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T02:19:36.587

我实际上发现了问题所在。首先，代理没有包裹在我的对象周围。所以没有任何交易开始。一旦我将 aspectj 添加到我的事务管理器声明中，我就开始遇到不同的错误。

结果证明我的切入点定义不正确。

# amazon-ec2 - 为 AWS 实例分配多个 IP 地址的步骤

> ID：11544160
> 
> 赞同：2
> 
> 时间：2012-07-18T14:49:21.637
> 
> 标签：amazon-ec2, amazon-vpc

我目前正在使用 Amazon 的 EC2 实例。正如亚马逊最近发布的那样，我们正在尝试部署具有不同 IP 的多个站点来处理多个 IP 地址。

很难找到从 VPC 实例的多个 IP 地址开始的正确步骤。

是否有分步指南可以遵循？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T20:02:33.647

你总是可以用 google'it :) 但在这里你去：

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#MultipleIPReqs](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#MultipleIPReqs)

# iphone - 在 iOS 应用上登录 Facebook

> ID：11544162
> 
> 赞同：3
> 
> 时间：2012-07-18T14:49:28.033
> 
> 标签：iphone, ios, xcode, facebook

我正在使用 Facebook 创建对我的应用程序的简单登录。

直到昨天它工作正常，如果我有 Facebook 应用程序打开它，如果没有，我有多任务打开 safari，如果没有打开 web 视图。

但是今天，我正在向我的应用程序添加推送通知。目前我唯一改变的是`appID`和`AppDelegate`添加

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound )]; 
```

在构建设置中，我为此 appID 选择了我的配置文件进行调试和发布。

现在我不知道为什么，但登录按钮同时打开 Facebook 应用程序、Safari 和 web 视图。3种不同方式同时开启。

[http://developers.facebook.com](http://developers.facebook.com)上没有与此错误相关的内容。有人知道吗？

***编辑***

我刚刚在其他设备上进行了测试，显然它只发生在我的 iPhone 4S 和 iOS 6.beta3

我会关闭这个问题，对不起

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:05:14.040

这不是我的应用程序的问题，这是因为我使用的是 iOS 6 beta 3

不知道如何解决，但我会尝试 Facebook 帮助

# php - 无法创建嵌套 DIV

> ID：11544166
> 
> 赞同：0
> 
> 时间：2012-07-18T14:49:37.593
> 
> 标签：php, wordpress, html, margin

我无法在我的 WordPress 博客中设置一些 DIV 的样式。我会在 WordPress 论坛上发布这个，但我相信这更像是一个 CSS/HTML 问题，而不是一个实际的 WordPress 问题。作为一个先驱，我会说我现在正在为所有内容设置内联样式，只是为了试验编码（一旦完成，我将把所有内容转移到我的外部样式表......我想人们会因为内联而跳到我身上如果我什么都没说的话，造型:) )。

基本上我正在尝试做一个嵌套的 div 或者我正在尝试在无序列表中的每个列表项之间设置一个边距。我生成的列表基本上是从博客周围的其他帖子中获取的信息，以显示某个类别的最新帖子（PHP 就是这样）。

它正在显示另一个，中间没有边距。它是两个相邻的 div（左边的一个显示文章图像，右边的一个显示帖子的标题和“摘录”）。我想将这两个 div 嵌套到一个大 div 中，这样我就可以移动它并添加边距，但是每当我尝试添加父 div 时，它只会将父 div 显示为只有 4px 高的 div 并且没有嵌套其他两个.

我也尝试自己设置样式，`<li>`但是当我将边距添加到整个 li 时，它会使两个并排的 div 不对齐。

很抱歉，我没有完成 JSFiddle，我想包含我无法在 JSFiddle 中完成的整个代码（w/PHP）。

谢谢您的帮助！

```
<ul style="list-style-type:none;">
    <?php
    global $post;
    $category = get_the_category($post->ID);
    $category = $category[0]->cat_ID;
    $myposts = get_posts(array('numberposts' => 5, 'offset' => 0, 'category__in' => array($category), 'post__not_in' => array($post->ID),'post_status'=>'publish'));
    foreach($myposts as $post) :
        setup_postdata($post);
        ?>
        <li>
            <a href="<?php the_permalink(); ?>">

                <div id="image_con" style="float:left; border:1px solid black; width:200px; height:200px; background-color:black; overflow:hidden;">
                    <div id="image_recent" style="margin-left:-50px;">
                        <?php set_post_thumbnail_size( 300, 300 );
                            the_post_thumbnail(); ?>
                    </div>
                </div>

                <div id="cr_content" style="float:right; border:1px solid black; width:356px; height:200px;">
                <?php 
                    the_title();
                    the_excerpt();
                ?>
                </div>

            </a>
        </li>
    <?php endforeach; ?>
   <?php wp_reset_query(); ?>
   </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:06:20.820

缩进你的代码后，你有：

```
<a>
  <div> 
```

这违反了规则：`<div>`内联元素（ ）内没有块级元素（ `<a>`）：因此您可以使用浏览器为使用非标准代码进行后备所做的任何事情。

如果它有效，它会使主播的命中覆盖面巨大......

更远：

```
<div style="float:left">
<div style="float:right"> 
```

这些漂浮在什么地方？要么你需要一些东西来强制下面的块（例如样式`clear: both`或只使用一个浮动和另一个的边距大小以匹配另一个的宽度+边框+填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:03:41.577

我可以立即看到几个问题：

1.  你没有关闭你的`<ul>`标签。
2.  您将块级元素放置在内联元素中。您需要将它们声明为块级元素。

让我们在这里工作：http: [//jsfiddle.net/vPqDf/1/](http://jsfiddle.net/vPqDf/1/)

# facebook - 在developers.facebook.com/apps 中找不到我的应用，尽管它确实存在

> ID：11544169
> 
> 赞同：1
> 
> 时间：2012-07-18T14:49:41.887
> 
> 标签：facebook

大约 6 个月前，我创建了一个应用程序，让我网站的用户通过 facebook 登录。该应用程序运行良好，我的用户实际上是通过 facebook 登录的。

这是应用程序的详细信息

应用ID：251611944876980 应用名称：SFINZ

现在，当我使用我的用户名登录我的粉丝页面 www.facebook.com/sfinz：sfinz.me 的社交时，如果我尝试访问 developer.facebook.com/apps，我会被重定向到 www.facebook.com/sfinz

我无法找到我需要编辑的这个应用程序！

谁能告诉我发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:57:59.590

你能打开[https://developers.facebook.com/apps/251611944876980](https://developers.facebook.com/apps/251611944876980)吗？这应该是编辑应用程序的页面。如果您无法访问该应用程序，那么您可能使用了其他帐户来创建此应用程序。

# razor - 联系邮件中的动态主题

> ID：11544170
> 
> 赞同：0
> 
> 时间：2012-07-18T14:49:43.913
> 
> 标签：razor, umbraco

我正在开发一个简单的联系系统，我需要在已发送电子邮件的主题字段中显示来自查询字符串的值。

今天已经慢慢陷入疯狂，因为这在我尝试过的每一种方式中都失败了。

我正在使用 Umbraco 4.7.2 和 Ubootstrap（通过 twitter 引导）并修改其中找到的联系表。下面是我的联系表格宏的cshtml

```
@using System.Text
@using System.Collections.Generic;
@using Bootstrap.Logic.Utils
@using umbraco.MacroEngines
@inherits DynamicNodeContext
@{
    dynamic form = Context.Request.Form.ToDynamic();

    if (IsPost)
    {
        if (!Context.IsValidAntiForgery()) { ModelState.AddFormError(@Dictionary.InvalidPost); }
        if (MainHelper.IsEmpty(form.Name)) { ModelState.AddError("name", @Dictionary.FormNameValidation); }
        if (!MainHelper.IsEmail(form.Email)) { ModelState.AddError("email", @Dictionary.FormEmailValidation); }
        if (MainHelper.IsEmpty(form.Enquiry)) { ModelState.AddError("enquiry", @Dictionary.FormCommentValidation); }
    }

    if (!IsPost || !ModelState.IsValid)
    {
    @Html.Raw(library.RemoveFirstParagraphTag(Model.FormText.ToString()))
    <form method="post" action="@Model.Url">
        <fieldset>
            <legend>@Parameter.subject </legend>
            <div class="clearfix @Library.If(!ModelState.IsValidField("name"), "error")">
            @Html.Label(@Dictionary.FormName, "name")
            <div class="input">@Html.TextBox("name", form.Name, new { @class = "xlarge" })
            @if (!ModelState.IsValidField("name"))
            { <span class="help-inline">@string.Join(". ", @ModelState["name"].Errors)</span> }
            </div>
            </div>
            <div class="clearfix">
            @Html.Label(@Dictionary.AddressName, "address1")
            <div class="input">@Html.TextBox("address1", form.Address1, new { @class = "xlarge" })</div>
            </div>
            <div class="clearfix">
            @Html.Label("Add 2", "address2", new { @class = "hide" })
            <div class="input">@Html.TextBox("address2", form.Address2, new { @class = "xlarge" })</div>
            </div>
            <div class="clearfix @Library.If(!ModelState.IsValidField("email"), "error")">
            @Html.Label(@Dictionary.FormEmail, "email")
            <div class="input">@Html.TextBox("email", form.Email, new { @type = "email", @class = "xlarge" })
            @if (!ModelState.IsValidField("email"))
            { <span class="help-inline">@string.Join(". ", @ModelState["email"].Errors)</span> }
            </div>
            </div>
            <div class="clearfix @Library.If(!ModelState.IsValidField("name"), "error")">
            @Html.Label(@Dictionary.FormComment, "enquiry")
            <div class="input">@Html.TextArea("enquiry", form.Enquiry, new { @rows = 5, @cols = 25, @class = "xlarge" })
            @if (!ModelState.IsValidField("enquiry"))
            { <span class="help-inline">@string.Join(". ", @ModelState["enquiry"].Errors)</span> }
            </div>
            </div>
            @Context.GetAntiForgeryHtml()
        </fieldset>
        <div class="actions">
            <button id="SubmitForm" type="submit" class="btn">@Dictionary.Send</button>  
        </div>
    </form>
    @Html.ValidationSummary(@Dictionary.FormValidationSummary, new { @class = "alert-message block-message error" })
    }
    else
    {
        var ok = SendForm(form, @Parameter.subject);
        if (!ok)
        {
            <div id="errorMailSettings">
                @Model.ErrorMessage
            </div>
        }
        else
        {
            // Set Thankyou text from our contact node
            <div id="thankYou">
                <h2>@Model.ThankYouHeaderText</h2>
                @Model.ThankYouMessageText
            </div>
        }
    }
}

@functions 
{
    public bool SendForm(dynamic form, string queryParam)
    {
        // Get the variables from the form and set them in strings
        string strName = Library.StripHtml(form.Name).ToString();
        string strAddressLine1 = Library.StripHtml(form.Address1).ToString();
        string strAddressLine2 = Library.StripHtml(form.Address2).ToString();
        string strEmailFrom = Library.StripHtml(form.Email).ToString();
        string strMessage = Library.StripHtml(form.Enquiry).ToString();

        // Lets set the values passed in from the Macro
        string strEmailTo = Model.EmailTo.ToString();
        string strEmailSubject = queryParam;

        var now = DateTime.Now;
        var strTime = String.Format("{0:HH:mm:ss}", now);
        var strDate = String.Format("{0:dd/MM/yyyy}", now);

        // Let's Replace the placeholders in the email message body
        var strEmailBody = new StringBuilder(Model.EmailBody.ToString());
        strEmailBody.Replace("[Name]", strName); // Find and Replace [Name]
        strEmailBody.Replace("[AddressLine1]", strAddressLine1); // Find and Replace [AddressLine1]
        strEmailBody.Replace("[AddressLine2]", strAddressLine2); // Find and Replace [AddressLine2]
        strEmailBody.Replace("[Email]", strEmailFrom); // Find and Replace [Email]
        strEmailBody.Replace("[Message]", strMessage); // Find and Replace [Message]
        strEmailBody.Replace("[Time]", strTime); // Find and Replace [Time]
        strEmailBody.Replace("[Date]", strDate); // Find and Replace [Date]

        // Now the email is sent out to the owner, lets send out an email
        // to let the user know we have recieved their email & will respond shortly
        string strEmailReplySubject = Model.EmailReplySubject.ToString();
        var strEmailReplyBody = new StringBuilder(Model.EmailReplyBody.ToString());
        strEmailReplyBody.Replace("[Name]", strName); // Find and Replace [Name]

        return MainHelper.TrySendMail(strEmailTo, strEmailSubject, strEmailBody.ToString()) && MainHelper.TrySendMail(strEmailFrom, strEmailReplySubject, strEmailReplyBody.ToString());
    }
} 
```

（我知道代码墙，但我认为更多信息总比更少信息好）

这会导致通过图例字段中的@Parameter.subjet 显示来自宏参数的查询字符串，但是当我在发送函数中进一步尝试将字符串 strEmailSubject 设置为 @Parameter.subject 时，我只会在电子邮件中得到空字段.

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:30:10.857

显然参数在函数上下文中不存在。我建议将它作为参数传递给函数：

```
...

var ok = SendForm(form, Parameter.subject);

...

public bool SendForm(dynamic form, string subject)
{
    ...

    string strEmailSubject = subject;

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:02:02.170

我设法通过以下方式解决了这个问题：

我知道@Parameter.subject 将允许我将查询字符串放入表单中，因此我在表单中创建了一个新文本框来保存参数，然后将其剥离 ala Library.StripHtml(form.Subject).ToString(); 并用它来调用 SendForm 函数

# visual-studio-2010 - Rational Rhapsody C++/cli 模板

> ID：11544171
> 
> 赞同：0
> 
> 时间：2012-07-18T14:49:45.517
> 
> 标签：visual-studio-2010, c++-cli, rhapsody

我是初级程序员，现在我们开始**使用 Rational Rhapsody**进行架构规划的新项目。由于 .net 表单应用程序，我习惯于**使用 C++/CLI ，现在我遇到了 Rational Rhapsody 和 Microsoft** **Visual Studio 2010**之间的连接问题。它仍然**会损坏我的代码**等。例如，移动一些代码并将它们放在类的错误部分，所以我无法编译我的解决方案。

我的问题是：**是否有任何用于 C++/CLI 的 Rational Rhapsody 模板？**

感谢您的以下回复。

PS：这也是我在这个服务器上的第一个线程，所以请耐心等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:20:14.480

Rational Rhapsody 非常具体。我还曾在一家公司使用此案例工具工作过。对于像您这样的问题，有支持热线。他们很快解决了我的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T07:50:32.313

我做了一些小研究，并在 IBM 技术支持下写了一些电子邮件，但我发现了一件令人悲伤的事情。如果您在 Microsoft Visual Studio 2010 中使用 C++/CLI 制作 GUI，并且您使用的是 Rational Rhapsody，**建议您将 C++/CLI GUI 与库分开创建**。所以有两种方法可以解决它：

**A)**使用整个项目，但不要使用 GUI 进行往返，仅在最终版本中，将 GUI 导出到 Rational Rhapsody

**B)**仅使用 Rational Rhapsody 制作库，第二个项目将是包含这些库的 GUI。

我正在尝试第一种方式，所以如果我发现一些有趣的东西，我会尝试分享它。

祝你今天过得愉快。

# axis - org.apache.axis.transport.http.HTTPSender 无法转换为 org.apache.axis.Handler

> ID：11544176
> 
> 赞同：0
> 
> 时间：2012-07-18T14:49:54.727
> 
> 标签：axis, jboss7.x, classcastexception

我正在两个应用服务器之间迁移轴 1.2.1 应用程序，我得到以下类转换异常。

```
Caused by: java.lang.ClassCastException: org.apache.axis.transport.http.HTTPSender cannot be cast to org.apache.axis.Handler 
```

有没有人见过这个？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:45:56.370

我有同样的问题，我所看到的似乎是当您在部署目录的根目录中的 jar 和 ear/war 模块中的 jar 中使用轴时。类加载器实例是轴库的两倍，这样就产生了问题。

一种解决方案是将轴的调用从部署根目录中的 jar 移动到模块（如耳朵或类似的）。我希望这可以帮助你。

问候

# python - Tkinter 将文本大小调整为内容

> ID：11544187
> 
> 赞同：6
> 
> 时间：2012-07-18T14:50:34.183
> 
> 标签：python, tkinter

是否可以调整 Tkinter 文本小部件的大小以适应其内容？

即：如果我放 1 行文字，它会缩小，但如果我放 5 行，它会变大

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:41:36.690

我能想到的唯一方法是每次用户在 Text 小部件中输入文本时计算宽度和高度，然后将小部件的大小设置为此。但这里的限制是只有等宽字体才能正常工作，但无论如何：

```
import Tkinter

class TkExample(Tkinter.Frame):
   def __init__(self, parent):
      Tkinter.Frame.__init__(self, parent)
      self.init_ui()

   def init_ui(self):
      self.pack()
      text_box = Tkinter.Text(self)
      text_box.pack()
      text_box.bind("<Key>", self.update_size)

   def update_size(self, event):
      widget_width = 0
      widget_height = float(event.widget.index(Tkinter.END))
      for line in event.widget.get("1.0", Tkinter.END).split("\n"):
         if len(line) > widget_width:
            widget_width = len(line)+1
      event.widget.config(width=widget_width, height=widget_height)

if __name__ == '__main__':
    root = Tkinter.Tk()
    TkExample(root)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-14T11:25:58.880

在谷歌搜索的顶部找到了这个线程，因此，也许有需要的人会找到它。即使经过数小时的搜索也找不到答案。所以这是我想出的HACK。

我想要一个弹出窗口，它可以正确地围绕文本小部件中任何未知但预先确定的文本，而不是用户输入。此外，Text 小部件需要在其文本内容周围正确地适应自身。

A`tkinter.Label`效果很好，但它没有`tkinter.Text.tag_configure`,`tkinter.Text.tag_bind`我需要用 tkinter 的富文本标签替换一些 HTML 标签。  `tkinter.Text`有富文本标签，但不能很好地扩展，虽然可以`tkinter.Label`很好地扩展，但没有富文本标签。此外，我只是讨厌滚动条和自动换行，除非真的需要它们。这正是我想要的。虽然，这只是这个论坛的一个非常简单的工作摘要。适用于任何字体。仅在 Ubuntu 13.10 (Linux) 中使用 Python 3.3 进行了测试。

```
#!/usr/bin/env python3

import tkinter as tk

class MyFrame(tk.Frame):
    def __init__(self):
        tk.Frame.__init__(self)

        root = self.master
        root.title("My Window Title")

        # Pack Frame into root window and make it expand in "both" x and y
        self.pack(side="top", fill="both", expand=True, padx=10, pady=10)
        # Statistical weight of 1 = 100% for cell (0, 0) to expand 100%
        self.grid_columnconfigure(0, weight=1)
        self.grid_rowconfigure(0, weight=1)

        # The string text
        text = """Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed
diam nonummy nibh euismod tincidunt ut laoreet dolore magna
aliquam erat volutpat. Ut wisi enim ad minim veniam, quis
nostrud exerci tation ullamcorper suscipit lobortis nisl ut
aliquip ex ea commodo consequat. Duis autem vel eum iriure
dolor in hendrerit in vulputate velit esse molestie consequat,
vel illum dolore eu feugiat nulla facilisis at vero eros et
accumsan et iusto odio dignissim qui blandit praesent luptatum
zzril delenit augue duis dolore te feugait nulla facilisi. Nam
liber tempor cum soluta nobis eleifend option congue nihil
imperdiet doming id quod mazim placerat facer possim assum.
Typi non habent claritatem insitam; est usus legentis in iis qui
facit eorum claritatem. Investigationes demonstraverunt lectores
legere me lius quod ii legunt saepius. Claritas est etiam
processus dynamicus, qui sequitur mutationem consuetudium
lectorum. Mirum est notare quam littera gothica, quam nunc
putamus parum claram, anteposuerit litterarum formas
humanitatis per seacula quarta decima et quinta decima. Eodem
modo typi, qui nunc nobis videntur parum clari, fiant sollemnes
in futurum."""

        # Add a tk.Text widget to Frame (self) and its configuration
        textwidget = tk.Text(self, wrap="none", font=("Comic Sans MS", 12),
                             padx=10, pady=10)
        textwidget.grid(row=0, column=0, sticky="nesw")
        # Add the text to textwidget and disable editing
        textwidget.insert(tk.END, text)
        textwidget.config(state=tk.DISABLED)

        # Here is where the HACK begins
        def is_scroll(wh, lower, upper):
            nonlocal size
            size[wh][0] = upper < '1.0' or lower > '0.0'
            size[wh][1] += 20 * size[wh][0] # += 1 for accuracy but slower
        # Call the is_scroll function when textwidget scrolls
        textwidget.config(xscrollcommand=lambda *args: is_scroll('w', *args),
                          yscrollcommand=lambda *args: is_scroll('h', *args))

        # Add a tk.Button to the Frame (self) and its configuration
        tk.Button(self, text="OK", command=self.quit).grid(row=1, column=0,
                                                           sticky="we")

        # For reasons of magic, hide root window NOW before updating
        root.withdraw()

        # Initially, make root window a minimum of 50 x 50 just for kicks
        root.geometry('50x50')
        size = {'w': [False, 50], 'h': [False, 50]}
        # Update to trigger the is_scroll function
        root.update()
        while size['w'][0] or size['h'][0]:
            # If here, we need to update the size of the root window
            root.geometry('{}x{}'.format(size['w'][1], size['h'][1]))
            root.update()

        # Center root window on mouse pointer
        x, y = root.winfo_pointerxy()
        root.geometry('+{}+{}'.format(x-size['w'][1]//2, y-size['h'][1]//2))

        # Now reveal the root window in all its glory
        root.deiconify()

        # Print textwidget dimensions to the console
        print(textwidget.winfo_width(), textwidget.winfo_height())

def main():
    """Show main window."""
    MyFrame().mainloop()

if __name__ == '__main__':
    main() 
```

**说明：**  诀窍是甚至不必为尝试直接扩展或缩小 Text 小部件的徒劳而烦恼。答案有点违反直觉，因为一个人的第一个想法是直接进入那个 Text 小部件并对其做点什么。相反，展开根（最外层）窗口（在本例中为`self.master`），只保留 Text 小部件。十分简单。

将 Text 小部件粘贴 ( `"nesw"`) 到在根窗口中为 100% 扩展而打包的 Frame。随着根窗口的展开，其中的 Frame 和 Text 小部件也会展开。但是，当您扩展根窗口时，测试Text 小部件的`lower`和`upper`边界是否消失`xscrollcommand`，并且`yscrollcommand`（不再滚动）。这些命令将百分位数`lower`和`upper`参数发送到滚动条所需的回调函数，通常是`tkinter.Scrollbar.set`. 但是，我们使用这些命令是因为我们根本不想要滚动条或任何滚动。我们想要一个完美的配合。

如果`lower`和`upper`边界消失了（lower <= 0.0 and upper >= 1.0），这意味着我们的 Text 小部件周围有一个完美贴合的窗口，它也完美贴合了它的文本内容。多田！

添加了一个按钮，以证明即使添加了其他小部件，它仍然可以正常工作。删除一些文本以查看它仍然完美契合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T13:08:55.777

**编辑**：简短方法：

```
text.pack(side="top", fill="both", expand=True, padx=0, pady=0) 
```

* * *

通过重新使用 sc0tt 的答案和 Bryan Oakley 在此处[获取 Text tkinter 小部件的行数](https://stackoverflow.com/questions/20565149/get-of-number-of-lines-of-a-text-tkinter-widget)的答案，我们可以拥有这个也适用于**比例字体的即***用型*代码（在此处发布以供将来参考） ：

 **```
import Tkinter as Tk
import tkFont

class Texte(Tk.Text):
    def __init__(self, event=None, x=None, y=None, size=None, txt=None, *args, **kwargs):
        Tk.Text.__init__(self, master=root, *args, **kwargs)
        self.font = tkFont.Font(family="Helvetica Neue LT Com 55 Roman",size=35)
        self.place(x=10,y=10)
        self.insert(Tk.INSERT,' blah ')
        self.config(font=self.font)
        self.update_size(event=None)
        bindtags = list(self.bindtags())
        bindtags.insert(2, "custom")
        self.bindtags(tuple(bindtags))
        self.bind_class("custom", "<Key>", self.update_size)

    def update_size(self, event):
        width=0
        lines=0
        for line in self.get("1.0", "end-1c").split("\n"):
            width=max(width,self.font.measure(line))
            lines += 1
        self.config(height=lines)
        self.place(width=width+10)

root = Tk.Tk()
root.geometry("500x500")
Texte()
root.mainloop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-24T03:14:26.187

以 sc0tt 的帖子为基础，如果您不使用换行符（例如，仅使用固定宽度并使高度成为唯一的扩展变量），该辅助函数可以很好地工作：

```
def update_height(event):
    text_height = (str(event.widget.index('1.end')) )
    text_int = int(re.search(".(\d+)", text_height).group(1))
    widget_height = int(int(text_int)/160) + 1
    event.widget.config(height=widget_height) 
```**

# javascript - TestComplete 中是否有警告框或 Console.log？

> ID：11544190
> 
> 赞同：0
> 
> 时间：2012-07-18T14:50:51.953
> 
> 标签：javascript, jscript, testcomplete

如果我想将某些内容输出到屏幕上，我将如何使用 Jscript 脚本来执行此操作。我习惯使用 alert 或 console.log 都不起作用。有没有办法只在屏幕上打印一些东西来帮助我调试？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:08:33.020

```
BuiltIn.ShowMessage("Hello govna"); 
```

有诀窍吗

还有其他有用的东西是[这个消息对话框，您可以在其中向输出语句添加一些按钮](http://support.smartbear.com/viewarticle/31335/)

# c# - 使用实体框架和 LDAP 的 Oracle 连接字符串

> ID：11544191
> 
> 赞同：2
> 
> 时间：2012-07-18T14:50:51.733
> 
> 标签：c#, oracle, entity-framework, ldap, connection-string

我有一个使用 Entity Framework 4.3 连接到 Oracle 数据库的 ASP.NET 4.0 应用程序。开发环境上的连接不是问题，因为我们使用标准方法。连接字符串由 Visual Studio 生成。

问题是在生产和验收环境中我们必须使用 LDAP。我已经验证了连接，并且可以使用 Oracle 的 SQL Developer 中的 LDAP 进行连接。

我需要有关 web.config 中连接字符串语法的帮助。它应该是什么样子？我找不到任何示例，并且在生产和验收方面，我没有 Visual Studio 来查看它是否可以自动生成某些东西。

更新：
我需要语法将连接到本地 Oracle Express 的连接字符串更改为使用 LDAP 的连接字符串

```
<connectionStrings>
    <add name="VoccDbContext" connectionString="metadata=res://*/Entities.Vocc.VoccModel.csdl|res://*/Entities.Vocc.VoccModel.ssdl|res://*/Entities.Vocc.VoccModel.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=localhost:1521;PASSWORD=somePassKey;PERSIST SECURITY INFO=True;USER ID=someUser&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T10:01:20.207

回答别人是否需要。解决方法比较简单：

LDAP.ORA 文件必须使用正确的 LDAP 参数进行修改

```
DIRECTORY_SERVERS=(tnsnames.somesite.org:389:636)
DEFAULT_ADMIN_CONTEXT="dc=site,dc=com"
DIRECTORY_SERVER_TYPE=OID 
```

并且比连接字符串类似于没有 LDAP 的情况

```
 <connectionStrings>
    <add name="VoccDbContext" connectionString="metadata=res://*/Entities.Vocc.VoccModel.csdl|res://*/Entities.Vocc.VoccModel.ssdl|&#xD;&#xA;        res://*/Entities.Vocc.VoccModel.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=sameDbName;PASSWORD=somePass;USER ID=someUser;&quot;"         providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T13:46:06.980

U还需要在oraclehome文件夹/network/admin中有一个sqlnet.ora文件，内容如下

```
# sqlnet.ora Network Configuration File

SQLNET.AUTHENTICATION_SERVICES= (NTS)
NAMES.DIRECTORY_PATH= (LDAP,TNSNAMES,EZCONNECT)
```

和具有以下内容的 LDAP.ora

```
DEFAULT_ADMIN_CONTEXT = "dc=world"
DIRECTORY_SERVERS = (server1.x.com:389:636, server2.x.com:389:636)
DIRECTORY_SERVER_TYPE = OID
```

[ldap.ora 帮助](http://orafaq.com/wiki/Ldap.ora)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:40:19.220

如果您使用“/”作为用户名并将密码留空，它将更改为 Windows 身份验证。

[这是关于使用 Windows 身份验证连接到 Oracle 数据库](http://msdn.microsoft.com/en-us/library/dd788095%28v=bts.10%29.aspx)的 MSDN 文章，[这个问题](https://stackoverflow.com/questions/6957076/cant-connect-to-oracle-using-windows-authentication-with-odp-net)解决了用户无法使用 ODP.NET 连接到 Oracle 数据库及其修复的问题。

这是我的 App.Config 连接字符串之一使用 Windows 身份验证连接的样子：

```
 <connectionStrings>
      <add name="EntityFrameworkEntities" connectionString="metadata=res://*/EntityFrameworkModel.csdl|res://*/EntityFrameworkModel.ssdl|res://*/EntityFrameworkModel.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=EntityFrameworkDatabase;PASSWORD=;USER ID=/&quot;" providerName="System.Data.EntityClient"/>
 </connectionStrings> 
```

# facebook - Soundcloud：尝试使用 Facebook 进行身份验证时带有 popup_callback.html 的空白页面

> ID：11544193
> 
> 赞同：2
> 
> 时间：2012-07-18T14:51:04.437
> 
> 标签：facebook, oauth-2.0, soundcloud

我正在使用我的应用程序通过 OAuth2 流程。该应用程序似乎正确请求[https://soundcloud.com/connect](https://soundcloud.com/connect)，并带有“允许'应用程序名称'访问您的 Soundcloud 帐户吗？”。但是，如果我随后尝试在此屏幕上使用 Facebook 进行身份验证，则会加载一个带有 url 的新空白页面：

```
https://soundcloud.com/popup_callback.html?returnTo=http%3A%2F%2Fapp-url.com... 
```

之后，什么也没有发生。如果我用我的应用程序重新请求连接页面，我已经成功登录到 Soundcloud，只需单击“连接”按钮即可。

这是大约一周前的工作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:42:15.087

请参阅 Paul Osman 的评论。这是 Soundcloud 方面的一个错误，现已修复。

# vb.net - 当我尝试在 Visual Basic 中发布我的程序时，它会为我提供安装文件，但不会更新调试文件夹中的 .exe 文件

> ID：11544194
> 
> 赞同：0
> 
> 时间：2012-07-18T14:51:05.077
> 
> 标签：vb.net, visual-studio, debugging, publishing

当我尝试在 Visual Basic 中发布我的程序时，它会为我提供安装文件，但不会更新调试文件夹中的 .exe 文件，这是怎么回事？我能做些什么？我已经重新安装了 VB，但这并没有帮助。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:57:00.410

发布是否会生成发布版本？请尝试检查 Release 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T21:12:40.067

当您发布应用程序时，.exe 文件变为 .exe.deploy 并在安装时解压缩到用户计算机。调试和发布文件夹中的 .exe 文件不会更新，因为发布会在临时目录中生成发布版本，然后将其复制到 .exe.deploy 文件中。

这些是我对您的问题的研究结果，我可以确认默认的 Visual Studio 设置就是这种情况。但是，您的配置可能会有所不同。

希望这可以帮助...

# javascript - 选中时触发复选框

> ID：11544195
> 
> 赞同：0
> 
> 时间：2012-07-18T14:51:11.397
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何在 Jquery 中选中复选框时收听](https://stackoverflow.com/questions/6878757/how-to-listen-to-when-a-checkbox-is-checked-in-jquery)

我正在使用 JQuery 动态创建许多复选框，如下所示。

```
 function createCheckbox(len){

        for(var i = 0; i < len; i++){
            $('#checkboxes').append('<input type="checkbox" ' + 'id=' + i + '></input>');
        }
        return;
      } 
```

在 HTML 中，我有：

```
<div id="checkboxes"></div> 
```

我的目标是每当检查复选框时，能够将其ID（或值）发送到此功能：

```
function hideColumn(columnIndex){
        $('#chart2 td:nth-child(' + (columnIndex+1) + ')').hide(); 
        return;
      } 
```

这将能够处理在我的表中隐藏特定列的逻辑。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:52:43.990

当您`checkbox`动态创建时，您必须使用 jQuery 使用委托事件[`.on()`](http://api.jquery.com/on)。

```
$('#checkboxes').on('change', ':checkbox', function() {
  if( this.checked ) {
    hideColumn( this.id ); // to send value use:   this.value
                           // but in your append code 
                           // there is no value attribute
  }
}); 
```

### 笔记

`.on()`委托事件的语法如下：

```
$( StaticElement ).on( eventName, target, handlerFunction ); 
```

其中，`StaticElement`指的是非动态元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:01:32.000

可能你可以试试这个，只需修改 createCheckbox 函数：

```
function createCheckbox(len){
    for(var i = 0; i < len; i++){
        $('<input type="checkbox" ' + 'id=' + i + '></input>').on('change', function(e) {
            if (this.checked) {
                hideColumn(this.id);
            }
        }).appendTo($('#checkboxes'));
    }
    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:09:09.530

在 jQuery API 中看起来很简单！

```
function createCheckbox(len) {    
  for (var i = 0; i < len; i++) {        
    $('<input type="checkbox" ' + 'id=' + i + '></input>').on('change', function(e) {
      if (this.checked) {
        hideColumn(this.id);
      }
    }).appendTo($('#checkboxes'));
  }
  return; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T14:56:25.477

你有没有尝试过这样的事情？：

```
$("#checkboxes :checkbox").on('change', function(e) {
    if (this.checked) {
        hideColumn(this.id);
    }
}); 
```

# python - ImportError：无法导入名称 IPossibleSitenterfaces 导入 IPossibleSite：版本不匹配？

> ID：11544203
> 
> 赞同：1
> 
> 时间：2012-07-18T14:51:40.223
> 
> 标签：python, plone, zope

学习者警报

FreeBSD 9.0

这是第一次工作：

[http://plone.org/documentation/manual/installing-plone/installation-quick-guide](http://plone.org/documentation/manual/installing-plone/installation-quick-guide)

但是在“Professional Plone 4 Development”之后，无法让 virtualenv 工作

在我的 virtualenv 目录 plonedev 中：

```
bin/instance fg

2012-07-18 09:04:58 INFO ZServer HTTP server started at Wed Jul 18 09:04:58 2012
        Hostname: 0.0.0.0
        Port: 8080

Traceback (most recent call last):

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/Startup/run.py", line 76, in <module>
    run()

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/Startup/run.py", line 22, in run
    starter.prepare()

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/Startup/__init__.py", line 86, in prepare
    self.startZope()

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/Startup/__init__.py", line 259, in startZope
    Zope2.startup()

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/__init__.py", line 46, in startup
    from Zope2.App.startup import startup as _startup

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/Zope2/App/startup.py", line 38, in <module>
    import OFS.Application

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/OFS/Application.py", line 22, in <module>
    import App.Product

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/App/Product.py", line 44, in <module>
    from OFS.Folder import Folder

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/OFS/Folder.py", line 24, in <module>
    from webdav.Collection import Collection

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/webdav/Collection.py", line 30, in <module>
    from webdav.Resource import Resource

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/webdav/Resource.py", line 35, in <module>
    from OFS.event import ObjectClonedEvent

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/OFS/event.py", line 20, in <module>
    import OFS.interfaces

  File "/usr/home/mydir/plonedev/eggs/Zope2-2.13.15-py2.7.egg/OFS/interfaces.py", line 19, in <module>
    from zope.location.interfaces import IPossibleSite

ImportError: cannot import name IPossibleSitenterfaces import IPossibleSite 
```

我 egrepped plonedev 树并在以下位置找到`/usr/home/mydir/plonedev/eggs/zope.location-4.0.0-py2.7.egg/EGG-INFO/PKG-INFO`：

```
 4.0.0 (2012-06-07)
    ------------------

    - Removed backward-compatibility imports:

      - ``zope.copy.clone`` (aliased as ``zope.location.pickling.locationCopy``)

      - ``zope.copy.CopyPersistent`` (aliased as
        ``zope.location.pickling.CopyPersistent``).

      - ``zope.site.interfaces.IPossibleSite`` (aliased as
        ``zope.location.interfaces.IPossibleSite``). 
```

看起来我有一些版本不匹配，但不确定它是如何到达那里的，也不确定如何修复它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:35:43.457

您需要旧版本的 zope.location: 3.9.1。

大多数 Plone 用户使用 buildout 来处理设置正确版本的 zope 实例。我希望 Professional Plone 4 Development 也会推荐这一点。

如果你想在 virtualenv 中手动处理它，你需要查看包的 KGS（Known Good Set），buildout 也可以。Zope2 2.13.15 在这里：http: [//download.zope.org/Zope2/index/2.13.15/versions.cfg](http://download.zope.org/Zope2/index/2.13.15/versions.cfg)

zope.location 本身并不在那里，但在顶部它说：

扩展 = [http://download.zope.org/zopetoolkit/index/1.0.7/ztk-versions.cfg](http://download.zope.org/zopetoolkit/index/1.0.7/ztk-versions.cfg)

如果您查看该文件，您将看到 zope.location 3.9.1。

# ruby-on-rails - 基本 Rails 模型 has_many 和 belongs_to，按日期分组

> ID：11544204
> 
> 赞同：0
> 
> 时间：2012-07-18T14:51:43.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如果这是一个基本问题，我是一个 Rails 新手，请原谅。我正在设置一些模型，并且关系应该是非常基本的，但我有点卡在设置一切的最佳方式上。

我正在尝试显示具有不同时间的研讨会列表。这是我的两张表：

```
create_table "seminars", :force => true do |t|
  t.string   "name"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end

create_table "seminar_times", :force => true do |t|
  t.datetime "start_date"
  t.datetime "end_date"
  t.integer  "seminar_id"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

我想在 localhost:3000/seminars 上显示我的研讨会，如下所示：

```
Intro To Rails      Aug 1   3-5pm and 6-8pm
How To Juggle       Aug 10  6-8pm
Stackoverflow Rocks Aug 13  2-5pm or 6-8pm 
```

一个研讨会可以有许多不同的研讨会时间（这就是我将它们放在两个单独的表格中的原因）。要正常使用直接 SQL 执行此操作，我会加入表，按 start_date 排序，然后按 DAY 和研讨会 ID 分组。

我将如何以“铁路方式”做到这一点？

这是我到目前为止所做的，但这似乎不是正确的方法。

研讨会模型：

```
class Seminar < ActiveRecord::Base
  attr_accessible :name
  has_many :seminar_times, :dependent => :destroy
  validates :name, :presence => true
end 
```

研讨会时间模型：

```
class SeminarTime < ActiveRecord::Base
  attr_accessible :end_date, :seminar_id, :start_date
  belongs_to :seminar, :foreign_key => 'seminar_id'
  default_scope :order => 'start_date'
end 
```

研讨会控制器：

```
def index
  @seminars = SeminarTime.group('date(start_date), seminar_id') #THIS LINE ESPECIALLY SEEMS WRONG TO ME
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @seminars }
  end
end 
```

研讨会时间控制器：

```
def index
  @seminar_times = SeminarTime.all
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @seminar_times }
  end
end 
```

路线.rb

```
resources :seminars 
resources :seminar_times
root to: 'static_pages#home'
match '/seminars',    to: 'seminars#index' 
```

意见/研讨会/index.html.erb：

```
#this also needs some work. i'm not sure how to loop into that group by statement
<% @seminars.each do |seminar| %>
  <%= seminar.seminar.name %>
  <%= seminar.start_date %>
  <%= seminar.end_date %>
<% end %> 
```

我也尝试通过seminar_times_controller 获取所有内容，然后将/seminars 路由到：匹配'/seminars'，到：'seminar_times#index'，但这对我来说似乎也有点不对劲。

希望我说得足够清楚。非常感谢任何指导。谢谢！

* * *

自从我问了这个问题后，我的应用程序发展了一些。我最终添加了一些类别，所以我制作了一个共享模块，这样我就可以在整个应用程序中使用我的排序代码。排序和分组如下所示：

```
module Shared
  def self.category_group_by_day(categories_array)
    seminars = Seminar.joins(:seminar_times, :categories).
      where(:categories => {:name => categories_array}).
      where("date(start_time) > ?", DateTime.now)

    seminars.sort_by! { |s| s.start_date }
    seminar_days = seminars.group_by { |s| [s.start_date.beginning_of_day, s.course_id] }
  end
end 
```

我在我的控制器中这样称呼它：

```
@seminar_days = Shared::category_group_by_day(['Free Seminar', 'Online Seminar']) 
```

然后在我看来：

```
<% @seminar_days.keys.sort.each do |day| %> 
 <%= @seminar_days[day].first.course_name %>
  <%= day.to_s.to_date.strftime("%b %e") %> <%= day.to_s.to_date.strftime("%a") %>
    <% for seminar in @seminar_days[day] %>
      <div>
        <%= seminar.start_date.strftime("%l").strip %>—&lt;%= seminar.end_date.strftime("%l").strip %> <%= seminar.end_date.strftime("%p") %>
      </div>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:45:48.747

尽管我认为自己不够先进，无法就最终的“rails 方式”给出答案，但我已经摆弄了一下并找到了这个解决方案：

在研讨会控制器中：

```
def index
  @seminars_ordered_2 = CourseTime.order(:start_date).map{ |t| t.seminar}.uniq
... 
```

在视图/研讨会/index.html.erb 中：

```
 <table border ="1">
    <% @seminars_ordered_2.each do |seminar| %>
      <tr>
        <td><%= seminar.name %></td>
        <td><% seminar.seminar_times.each do | st | %>
            <%=st.start_date%> till <%=st.end_date%>
            <br>
             <% end%>
        </td>
      </tr>
    <% end %>
    </table> 
```

这给出了类似于你想要的东西。

我找不到数组 uniq 是否保证保留顺序的信息，也就是说，如果 [2,3,2].uniq 总是返回 [2,3] - 不过似乎是这样。

我已经尝试以两种方式组合 group by 和 order by：

```
 @seminars_ordered_1 =Seminar.joins('LEFT OUTER JOIN course_times ON course_times.seminar_id = seminars.id GROUP BY course_times.seminar_id ORDER BY course_times.start_date ')
     @seminars_ordered_2 = CourseTime.group(:seminar_id).map{|t| t.seminar} 
```

但两者都先进行分组，导致订单不能保证总是首先返回第一个日期（第二个日期取决于默认范围中定义的排序）。

# ruby-on-rails - 如何将结帐添加到rails appy

> ID：11544206
> 
> 赞同：0
> 
> 时间：2012-07-18T14:51:48.923
> 
> 标签：ruby-on-rails, ruby

有人可以建议我如何向我的 Rails 应用程序添加结帐。

我有购物车，所有用户都在工作，我似乎找不到代码，而且我还不够好，无法为结帐方面构建它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:13:50.193

我正在阅读使用 Rails 4e (Rails 3.1) 进行敏捷 Web 开发。在本书第 6 章开始，您将构建一个购物车、发送和接收电子邮件以及结帐。如果您遇到困难，他们会很好地解释事情并在网站上为您提供代码。这可能对您有所帮助。

[http://media.pragprog.com/titles/rails4/toc.pdf](http://media.pragprog.com/titles/rails4/toc.pdf) http://pragprog.com/book/rails4/agile-web-development-with-rails

# php - 哪种散列算法提供最长的输出？

> ID：11544215
> 
> 赞同：13
> 
> 时间：2012-07-18T14:52:26.380
> 
> 标签：php, hash, crypt

我很好奇 PHP 的 crypt 函数可以使用哪种散列方法提供最长的输出，并且，如果输出的长度是相对的，它们可能是两个散列的冲突。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T14:54:23.437

请参阅PHP 文档上的[此评论](http://us2.php.net/manual/en/function.hash.php#104987)[`hash()`](http://us2.php.net/manual/en/function.hash.php)：

```
alg       strlen hash (cropped)

md2           32 a9046c73e00331af68917d3804f70655                  
md4           32 866437cb7a794bce2b727acc0362ee27
md5           32 5d41402abc4b2a76b9719d911017c592
sha1          40 aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d
sha256        64 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e730
sha384        96 59e1748777448c69de6b800d7a33bbfb9ff1b463e44354c3553
sha512       128 9b71d224bd62f3785d96d46ad3ea3d73319bfbc2890caadae2d
ripemd128     32 789d569f08ed7055e94b4289a4195012
ripemd160     40 108f07b8382412612c048d07d13f814118445acd
ripemd256     64 cc1d2594aece0a064b7aed75a57283d9490fd5705ed3d66bf9a
ripemd320     80 eb0cf45114c56a8421fbcb33430fa22e0cd607560a88bbe14ce
whirlpool    128 0a25f55d7308eca6b9567a7ed3bd1b46327f0f1ffdc804dd8bb
tiger128,3    32 a78862336f7ffd2c8a3874f89b1b74f2
tiger160,3    40 a78862336f7ffd2c8a3874f89b1b74f2f27bdbca
tiger192,3    48 a78862336f7ffd2c8a3874f89b1b74f2f27bdbca39660254
tiger128,4    32 1c2a939f230ee5e828f5d0eae5947135
tiger160,4    40 1c2a939f230ee5e828f5d0eae5947135741cd0ae
tiger192,4    48 1c2a939f230ee5e828f5d0eae5947135741cd0aefeeb2adc
snefru        64 7c5f22b1a92d9470efea37ec6ed00b2357a4ce3c41aa6e28e3b
gost          64 a7eb5d08ddf2363f1ea0317a803fcef81d33863c8b2f9f6d7d1
adler32        8 062c0215
crc32          8 3d653119
crc32b         8 3610a686
haval128,3    32 85c3e4fac0ba4d85519978fdc3d1d9be
haval160,3    40 0e53b29ad41cea507a343cdd8b62106864f6b3fe
haval192,3    48 bfaf81218bbb8ee51b600f5088c4b8601558ff56e2de1c4f
haval224,3    56 92d0e3354be5d525616f217660e0f860b5d472a9cb99d6766be
haval256,3    64 26718e4fb05595cb8703a672a8ae91eea071cac5e7426173d4c
haval128,4    32 fe10754e0b31d69d4ece9c7a46e044e5
haval160,4    40 b9afd44b015f8afce44e4e02d8b908ed857afbd1
haval192,4    48 ae73833a09e84691d0214f360ee5027396f12599e3618118
haval224,4    56 e1ad67dc7a5901496b15dab92c2715de4b120af2baf661ecd92
haval256,4    64 2d39577df3a6a63168826b2a10f07a65a676f5776a0772e0a87
haval128,5    32 d20e920d5be9d9d34855accb501d1987
haval160,5    40 dac5e2024bfea142e53d1422b90c9ee2c8187cc6
haval192,5    48 bbb99b1e989ec3174019b20792fd92dd67175c2ff6ce5965
haval224,5    56 aa6551d75e33a9c5cd4141e9a068b1fc7b6d847f85c3ab16295
haval256,5    64 348298791817d5088a6de6c1b6364756d404a50bd64e645035f 
```

因此，最长的将是 sha512 或漩涡。既然你提到`crypt()`了，你就下来了`CRYPT_SHA512`，但如果你有空的话，你不一定需要使用它`hash()`。

# solr - Solr：多词同义词

> ID：11544216
> 
> 赞同：2
> 
> 时间：2012-07-18T14:52:26.263
> 
> 标签：solr, synonym

我正在开发一组同义词，您可以在其中找到一些多词表达，例如：

黑莓 => 黑莓

在分析阶段，使用 /admin/analysis.jsp 工具，我可以看到结果是正确的。

诸如“quiero una black berry”之类的查询返回以下序列：

org.apache.solr.analysis.StandardTokenizerFactory {luceneMatchVersion=LUCENE_36}：

```
position    1   2   3   4
term text   quiero  una black   berry
startOffset 0   7   11  17
endOffset   6   10  16  22
type    <ALPHANUM>  <ALPHANUM>  <ALPHANUM>  <ALPHANUM> 
```

org.apache.solr.analysis.SynonymFilterFactory {synonyms=lang/synonyms_es.txt, expand=false, ignoreCase=true, luceneMatchVersion=LUCENE_36}：

```
position    1   2   3
term text   quiero  una blackberry
type    <ALPHANUM>  <ALPHANUM>  SYNONYM
startOffset 0   7   11
endOffset   6   10  22 
```

但是，如果我在“真实”查询中尝试这句话，请求处理程序（edismax 处理程序的演变），标记“black”和“berry”不会被“blackberry”取代。

我在[这里](http://grokbase.com/t/lucene/solr-user/09a8cc8kz4/multi-word-synonyms-and-analysis-jsp-vs-real-field-analysis-query-index)看到你可以通过修改 FieldQParser 插件来解决这种情况。

无论如何，由于这样的帖子是在将近 3 年前发布的，我想知道 Solr 内部是否有解决这个问题的方法，避免扩展一些插件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-02T05:00:51.743

在 Solr-6.5.0 中，您可以通过设置以下参数来启用查询时多词同义词

*从文档*

> ### 母猪参数
> 
> Split on whitespace：如果设置为 false，将一次性将空格分隔的术语序列提供给文本分析，从而启用对术语序列进行操作的分析过滤器的正确功能，例如多词同义词和 shingles。默认为 true：为每个单独的空格分隔的术语单独调用文本分析。

[同义词.txt]

```
black berry => blackberry 
```

[例子]

```
q=black berry
&sow=false
&debug=query 
```

[调试响应]

```
<lst name="debug">
<str name="rawquerystring">black berry</str>
<str name="querystring">black berry</str>
<str name="parsedquery">_text_:blackberry</str>
<str name="parsedquery_toString">_text_:blackberry</str>
<str name="QParser">LuceneQParser</str>
</lst> 
```

现在您可以从调试响应中看到我搜索了**black berry**，但同义词过滤器工厂映射到我在 synonym.txt 中提到的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-13T20:33:33.733

基于此[链接](http://grokbase.com/t/lucene/solr-user/09a8cc8kz4/multi-word-synonyms-and-analysis-jsp-vs-real-field-analysis-query-index)，您应该搜索带引号的“black berry”，因为不带引号使用它会导致 OR 查询，即 black OR berry

# c# - 将 JSON 转换为 XML 空值？

> ID：11544218
> 
> 赞同：0
> 
> 时间：2012-07-18T14:52:32.717
> 
> 标签：c#, xml, json, json.net

当我将 XML 转换为 JSON 并且 XML 字段为 null 时，我得到一些东西，我在 JSON 中返回了一个 null，这是预期的 JSON 输出吗？我将它用于 Web 服务。

我可以关闭 null ，以便它显示空白/空。

XML

```
<GetItemRequest>
    <ApplicationCrediential>
        <ConsumerKey></ConsumerKey>
        <ConsumerSecret></ConsumerSecret>
    </ApplicationCrediential>
</GetItemRequest> 
```

JSON

```
{
  "GetItemRequest": {
    "ApplicationCrediential": {
      "ConsumerKey": null,
      "ConsumerSecret": null
    }
  }
} 
```

# google-chrome - 指示 websocket 服务器不支持任何扩展的标头

> ID：11544225
> 
> 赞同：4
> 
> 时间：2012-07-18T14:52:52.717
> 
> 标签：google-chrome, websocket

我们遇到了 Chrome 19 websockets 的问题。它正在尝试使用`x-webkit-deflate-frame`扩展连接到我们的服务器。但是，我不知道如何向该客户表明我们不支持该扩展程序（或者如果它是 Chrome 19 错误并且只是忽略了我们不支持它的事实？）。我在一些 SO 答案中看到了与此相关的问题，但我看不到一致的解决方案。

例如，如果我们收到标头

```
Upgrade: websocket
Connection: Upgrade
Host: titantest:30100
Origin: http://titantest
Sec-WebSocket-Key: f+7h4rrKKqdRRdD7WwTZow==
Sec-WebSocket-Version: 13
Sec-WebSocket-Extensions: x-webkit-deflate-frame 
```

我们应该用什么来回应？

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: 3eazAhsFLXFWB1OjcYMtzP13yag= 
```

然后附加到我尝试了各种`Sec-WebSocket-Extension`品种

```
Sec-WebSocket-Extension: '-'
Sec-WebSocket-Extension: -
Sec-WebSocket-Extension: 
<- blank: don't send a Sec-WebSocket-Extension header -> 
```

我面前还有一份 websocket 协议的副本，所以请随时指出我错过/误读的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:11:26.387

RFC 6455 的第 9.1 节处理扩展协商。

客户端提出一个扩展列表，服务器从那些它想要接受的提议中进行选择，并使用其返回的 Sec-WebSocket-Extensions 标头指示该选择。它可以通过在服务器握手响应中根本不包含扩展标头来接受 none。

当您不返回扩展标头时，chrome 19 是否存在特定问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T21:39:02.373

从响应中省略 Sec-WebSocket-Extension 是正确的方法。

您还需要确保您正在取消屏蔽接收到的数据。如果您只是想接收文本，除非它被取消屏蔽，否则它会显示为乱码。

该站点对如何取消屏蔽通过 websocket 连接接收到的数据有一个很好的解释：http: [//lucumr.pocoo.org/2012/9/24/websockets-101/](http://lucumr.pocoo.org/2012/9/24/websockets-101/)

# c# - 为什么这是错误的？(C# 任务继续)

> ID：11544227
> 
> 赞同：1
> 
> 时间：2012-07-18T14:52:57.667
> 
> 标签：c#, multithreading, task

当我编写以下代码时：

```
 Task<string> task = Task.Factory.StartNew<string>(() => "first task")
         .ContinueWith(t =>
                 {
                     Console.WriteLine(t.Result);
                     Console.WriteLine("second task");
                 }); 
```

那是错的！

然后我把它改成这样：

```
 var  task = Task.Factory.StartNew<string>(() => "first task")
         .ContinueWith(t =>
                 {
                     Console.WriteLine(t.Result);
                     Console.WriteLine("second task");
                 }); 
```

然后一切正常！

为什么？

“Task task”和“var task”有什么区别？</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T14:55:57.870

您的代码行返回 a `Task`，而不是`Task<string>`对象，因为您写的`ContinueWith`是 ，而不是`ContinueWith<string>`。

一个可以在将来帮助您的提示：当您`var`在变量声明中替换类型时，您可以将鼠标移到`var`Visual Studio 中的关键字上，将显示一个弹出窗口，其中包含`var` *隐藏*在代码中的实际类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:56:15.417

`task`是对延续而不是原始任务的引用（对原始任务的引用作为`t`延续传递）。

Since the continuation doesn't return anything its not a `Task<string>`. Obviously `var` handles this which is why your second example works and the first doesn't.

# clearcase - 如何创建一个包含另一个分支源的新分支 - rtc 源代码控制

> ID：11544233
> 
> 赞同：1
> 
> 时间：2012-07-18T14:53:13.987
> 
> 标签：clearcase, rtc

我有一个包含多个组件的流。我想将此流分为开发流和生产流（有点像 ClearCase UCM 集成和开发流）。

我该如何做到这一点？
（在 ClearCase 中，它是关于为现有流创建子流）

就像是 ：

*   将当前流重命名为 dev-stream。
*   创建一个新的流产品流。
*   创建新组件以匹配“ `dev-stream`”中的组件并将它们添加到“ `prod-stream`”

我有一个与流“dev-stream”一起流动的工作区。要将代码从“ `dev stream`”复制到“ `prod stream`”，我是否需要将工作区流目标从“ `dev-stream`”更改为“ `prod-stream`”并将更改交付到这个新流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:55:51.453

在 RTC 中，您不必创建新组件。您可以随时重命名现有流。

然后我建议在现有（并重命名）的流上创建一个快照，以便为所有组件拍照。

您可以创建一个新流并在其中添加该快照：所有组件都将在一次操作中添加。
您不需要复制任何文件。

您将在第二个流上创建第二个 repo 工作区，并将其加载到第二个本地工作区或沙箱中您想要的任何目录。

# jquery - JQuery - 带有微调器的 Div 不会显示

> ID：11544234
> 
> 赞同：1
> 
> 时间：2012-07-18T14:53:14.383
> 
> 标签：jquery, delay

我有以下函数检索 .php 文件的内容并将其显示在 div 中。检索部分效果很好，但我想展示一个微调器，例如 1 秒。

这是我的 JQuery 函数：

```
function f(par){
$("#load").show();
$.ajax({url: par + ".php",
success: function(result){
    $("#info").html(result);
    $("#info").css("top", Math.max(0, (($(window).height() - $("#info").outerHeight()) / 2) + $(window).scrollTop()) + "px");
    $("#info").css("left", Math.max(0, (($(window).width() - $("#info").outerWidth()) / 2) +   $(window).scrollLeft()) + "px");
    $("#info").delay(1000).show(0);
    }});
$("#load").hide();
}; 
```

此处加载的是带有微调器的 div，并且信息显示良好.. 检索到的信息！主要计划是延迟（因为检索根本不需要时间）show(0) 函数，让微调器运行至少 1 秒。

css 如下（来自[How can I create a "Please Wait, Loading..." 动画 using jQuery?](https://stackoverflow.com/questions/1964839/jquery-please-wait-loading-animation)）：

```
#load {
    display:    none;
    position:   fixed;
    z-index:    1000;
    top:        0;
    left:       0;
    height:     100%;
    width:      100%;
    background: rgba( 255, 255, 255, .8 ) 
                url('http://sampsonresume.com/labs/pIkfp.gif')
                50% 50% 
                no-repeat;
}

#info{
display: none;
position: fixed;
z-index: 500;
height: 40%;
width: 60%;
overflow: auto;
background: rgba(0, 190, 0, .8);
} 
```

我也尝试过使用 $(this).addClass("load"); 但这也没有用。

出了什么问题？

## 解决方案：

（对于那些感兴趣的人）感谢 j08691，解决方案非常简单：

```
setTimeout(function() {
        $("#info").show();
        $("#load").hide();
    }, 1500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:06:54.587

您需要将该`$("#load").hide();`语句移动到 ajax 请求的回调中，因为它现在的方式将在之后立即触发它`$("#load").show();`。此外，`.delay()`用于效果而不是回调。改为使用`setTimeout()`呼叫。

# linux - linux调度程序无法控制进程

> ID：11544235
> 
> 赞同：1
> 
> 时间：2012-07-18T14:53:18.193
> 
> 标签：linux, operating-system, linux-kernel, scheduler

这是在 RHEL 5.x 上

我在其中一个似乎受到影响的进程上运行了 strace，并注意到操作系统没有提供运行 12-15 秒的机会。

硬件是intel core2-duo-quadcore。

只有 8 个应用程序进程正在运行，其余都是系统进程。

关于为什么会发生这种情况的任何提示？任何配置我需要检查调整？这个问题一天发生几次。

由于在套接字上接收大量数据，所有应用程序进程都是 I/O 绑定的。

# javascript - 从后台任务访问主窗口 DOM

> ID：11544243
> 
> 赞同：0
> 
> 时间：2012-07-18T14:53:43.407
> 
> 标签：javascript, jquery, dom

我正在尝试构建一个测试工具，该工具将允许我访问窗口 DOM，并允许我以编程方式填写表单、按下提交按钮等。假设它是一个 Web DOM。jquery（或其他 js 库）可以驻留在后台（假设它是一个不同的应用程序）并为我提供对主窗口 DOM 的控制/访问？

任何想法/概念/指针/问题将不胜感激。

谢谢，周

# eclipse - SVN - Eclipse Juno 难以打开现有工作区并且无法看到分支名称

> ID：11544254
> 
> 赞同：0
> 
> 时间：2012-07-18T14:54:29.237
> 
> 标签：eclipse, svn

我在 Eclipse Juno 中打开了我的 SVN 项目，该项目已在 Indigo 中签出...

我可以查看所有文件和所有内容....但无法签入/同步，因为**它没有显示任何分支名称。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T15:55:28.093

以下步骤对我有用。

确保您的 svn 存储库通过 SVN 存储库视图正确设置。

1.  右键单击要连接到存储库的包资源管理器中的项目。

2.  选择删除选项。不要选中复选框以从文件系统中删除内容。（项目图标将保留在包资源管理器中，但看起来像项目关闭图标。）

3.  现在单击文件>导入。

4.  在出现的弹出窗口中，选择 General>Existing Projects into Workspace，从文件系统中选择项目。它现在将出现在您的包资源管理器中，并带有 svn 图标，表明它已连接到存储库

导入操作会触发 eclipse 检查 .svn 并激活 svn 插件。仅安装 Juno 并将工作区指向现有项目不会触发该步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:22:27.013

问题是您尚未将 SVN 安装到 Juno 安装中。安装它并重新启动，你会没事的。

# java - HttpURLConnection conn.getRequestProperty 返回 null

> ID：11544256
> 
> 赞同：6
> 
> 时间：2012-07-18T14:54:36.760
> 
> 标签：java, http, web, httpurlconnection

我正在尝试将一些数据推送到 BES 的 URL (MDS_CS)

当我在我的代码中设置一些请求标头并提交请求时，提交的请求的标头设置为**null**。

这是我的代码：

```
 HttpURLConnection conn =(HttpURLConnection)url.openConnection();
        conn.setDoInput(true);//For receiving the confirmation
        conn.setDoOutput(true);//For sending the data
        conn.setRequestMethod("POST");//Post the data to the proxy
        conn.setRequestProperty("X-Rim-Push-ID", pushId);
        conn.setRequestProperty("Content-Type", "text/html");
        conn.setRequestProperty("X-Rim-Push-Title", "-message");
        conn.setRequestProperty("X-Rim-Push-Type", "browser-message");                 
        conn.setRequestProperty("X-Rim-Push-Dest-Port", "7874");            
        //Write the data
        OutputStream out = conn.getOutputStream();
        out.write(data.getBytes());
        out.close();

        System.out.println(conn.getHeaderField("X-Rim-Push-ID")); 
```

当我尝试检索**X-Rim-Push-Title**时，最后一行返回 null它是**NULL** 只有正确检索**的 X-Rim-Push-ID**，

请帮我

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T15:35:17.660

不太确定你真正想做什么。但是要查看发布到服务器的内容，您必须将其发布到您自己的服务器上并阅读您在那里收到的数据。

如果您想查看所有 REQUEST 标头，您可以：

```
for (String header : conn.getRequestProperties().keySet()) {
   if (header != null) {
     for (String value : conn.getRequestProperties().get(header)) {
        System.out.println(header + ":" + value);
      }
   }
} 
```

或者在连接之后，您可以打印出 RESPONSE 标头：

```
for (String header : conn.getHeaderFields().keySet()) {
   if (header != null) {
     for (String value : conn.getHeaderFields().get(header)) {
        System.out.println(header + ":" + value);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:32:19.490

我建议使用[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)

```
final HttpClient client = new HttpClient();
final PostMethod method = new PostMethod(uri);
method.addRequestHeader("X-Rim-Push-Title", "-message");
client.executeMethod(method);
String responseBody = method.getResponseBodyAsString();
Header[] headers = method.getResponseHeaders(); 
```

HttpClient 是一种比 HttpURLConnection 更强大的处理 HTTP 的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T09:50:11.063

当我检查我提交的标头和请求的输入流时，我得到 200 ok 状态，但没有任何东西发送到设备

```
from server: 200 | OK

=======REQUEST===============
request header:X-Rim-Push-ID:pushID:1342694818991
request header:Host:win-uhgr7vs88uz.assabb.com:8080
request header:Content-Length:19
request header:X-Rim-Push-Title:-message
request header:User-Agent:Java/1.6.0_18
request header:POST /push?DESTINATION=bestest%40assa-associates.com&PORT=7874&REQUESTURI=/ HTTP/1.1:null
request header:Content-Type:text/html
request header:Accept:text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
request header:Connection:keep-alive
request header:X-Rim-Push-Dest-Port:7874
request header:X-Rim-Push-Type:browser-message
======Response===============
response header:Date:Thu, 19 Jul 2012 10:47:10 GMT
response header:Content-Length:0
response header:X-RIM-Push-ID:pushID:1342694818991
response header:Via:MDS_5.0.3.26
response header:x-rim-multidest-push-supported:true
response header:Server:Apache-Coyote/1.1
response header:x-rim-push-persisted:fals 
```

# objective-c - 使用继承

> ID：11544259
> 
> 赞同：0
> 
> 时间：2012-07-18T14:54:40.850
> 
> 标签：objective-c, inheritance

我有 classA，它在其 .h 文件（数组、字符串等）中声明了一些变量，在其 .m 文件中，它具有对这些变量执行操作的方法。

我即将创建classB，它需要在它的.m 中使用所有相同的方法，并且在它的.h 中需要大多数相同的变量。

我一直在读书，但仍然很困惑。我知道我需要使用继承，但我不确定具体如何。

我认为我需要做的：

**类A.h**

```
@interface classA{
NSMutableArray *myArray;
NSString *myString;
} 
```

**班A.m**

```
#import classA.h
@implementation classA

-(void)displayArray{
for(int x = 0; count < [myArray count], x++){
NSLog(@"%@", [myArray objectAtIndex:x];
} 
```

**B类.h**

```
#import "classA.h"
@interface classB{
} 
```

**B类.m**

```
#import "classB.h"
#import "classA.m"
@implementation classB

-(void)viewDidLoad{
[self displayArray];
} 
```

我希望 classB 有自己的`myArray`，然后`displayArray`在 classB 中调用时，它会显示 classB's `myArray`。而且我需要在更多课程中重复此操作，但我现在只是想让它与 A 和 B 一起工作。

谢谢。

* * *

编辑：我只是编造了这个例子，它不是实际的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:00:25.493

就像 1x1 一样简单 :)

```
@interface classB : classA {

// ...

}

// ...

@end 
```

在它之后，每个实例都`classB`拥有一切`classA`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:00:56.897

您的 classB 需要继承 classA ，仅此而已。

在您的 classB 类中，您可以修改 myArray ivar，displayArray 方法将正确记录它。

# ruby-on-rails - 如何设置 fittype 取决于当前目录？

> ID：11544260
> 
> 赞同：2
> 
> 时间：2012-07-18T14:54:46.140
> 
> 标签：ruby-on-rails, vim

我正在使用 Vim 我想设置我的文件类型，如下所示

```
autocmd BufNewFile,BufRead *_controller.rb set ft=rails syntax=ruby 
```

但取决于当前文件目录示例，如果我打开`/code/project/app/model/somefile.rb`我想设置`filetype`为`model`

现在我正在使用`autocmd BufNewFile,BufRead */app/models/*.rb set ft=model syntax=ruby` 但也许是更好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:04:37.520

这不行吗？

```
autocmd BufNewFile,BufRead */model/*.rb set ft=model 
```

# php - Drupal 7 Field api复选框未保存

> ID：11544261
> 
> 赞同：0
> 
> 时间：2012-07-18T14:54:52.060
> 
> 标签：php, drupal-7, drupal-modules, drupal-field-api

我试图让 Drupal 7 Field 以编程方式工作，但进展不顺利。我只是想创建一个模块来创建一个带有复选框的字段。该模块正在工作，该字段正在工作，但复选框不会保存。

这是我的 hook_field_widget_form：

```
<?php
function add_to_basket_field_widget_form(&$form,&$form_state,$field,$instance,$langcode,$items,$delta,$element)
{
    $element += array(
        '#type' => 'checkbox',
        '#title' => t('Add to basket?'),
        '#default_value' => isset($item['add_to_basket_cfield']) ? $item['add_to_basket_cfield'] : '',
    );
    return $element;
}
?> 
```

当我将它作为模块的一部分运行时，它可以工作，但不会保存刻度或不保存刻度。我已经尝试了我能想到的一切来让它工作，但在 3 天后没有任何迹象表明是时候问专家了

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:11:28.753

尝试[示例模块](http://drupal.org/project/examples/)并查看 field_example 部分。确保您的自定义字段具有 .install 文件中描述的架构，以便您放入自定义字段的值实际保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:41:50.907

希望这对你有帮助

```
$form[$group]['ex_account'] = array(
    '#type' => 'checkbox',
    '#title' => t('your title'),
    '#default_value' => variable_get('ex_account', 1) ? 1 : 0,
    '#description' => t('desc.'),
  );
return system_settings_form($form); or return $form; 
```

# php - 如何将 MySQL 数据库中的这个日期时间与现在进行比较？

> ID：11544266
> 
> 赞同：0
> 
> 时间：2012-07-18T14:55:01.177
> 
> 标签：php, mysql

如何将 MySQL 数据库中的这个日期时间与现在进行比较？

我使用 MySQL 函数 now() 发送了数据库记录中的日期，并试图检测超过 30 天的记录。

```
if (date_diff($myrow["LastLogin"], time()) > -30) {
  } 
```

`$myrow["LastLogin"]`确实包含有效值，因为我将其视为文本。在数据库中确认它是“日期时间”类型。

这里有更多的代码。

```
if ($myrow = mysql_fetch_array($result_set)) { 

  do {
      if (date_diff($myrow["LastLogin"], getdate()) > -30) {
        echo "<tr>";
        echo "<td>" . $myrow["PCName"] . '&nbsp;</td>';
        echo "<td>" . $myrow["LastLogin"] . '&nbsp;</td>';
        echo "</tr>\n";
      }
  } while ($myrow = mysql_fetch_array($result_set));  
} 
```

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:57:58.290

在您的查询中执行此操作，而不是在代码中。

```
SELECT * FROM myTable WHERE LastLogin < DATE_SUB(NOW(), INTERVAL 30 DAY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:58:49.270

你可以在服务器端通过

```
SELECT * FROM logins WHERE LastLogin < NOW() - INTERVAL 30 DAY 
```

如果您需要在客户端执行此操作，则`UNIX_TIMESTAMP`返回整数可能更容易使用：

```
SELECT l.*,UNIX_TIMESTAMP(LastLogin) AS LastLogin_i FROM logins l 
```

如果这些都不适合您的需要，您可以`LastLogin`使用以下方法转换返回的字符串`strtotime()`：

```
lastLogin_i = strtotime($myrow["LastLogin"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:03:23.807

此查询将删除 lastlogin 值超过 30 天的记录。

```
Delete from table where ((now() - lastlogin) > (30*24*60*60)) 
```

# matlab - matlab sum 矢量图

> ID：11544271
> 
> 赞同：0
> 
> 时间：2012-07-18T14:55:18.707
> 
> 标签：matlab, vector, sum

嗨，我有一个对象 A，其中包含 9 个大小为 [1 3] 的向量，三维向量。我如何将所有这些相加以创建一个大小为 [1 3] 的新向量，即如何获取每个向量的贡献，并将它们的每个贡献相加以给我一个最终向量。提前致谢。我的向量存储在一个单元格数组中。如何定义 A：

```
 ri = Rix{1,1};
 rj = Riy{1,1};

 vec2 = @(i)[ri(i), rj(i), 0];
 A = arrayfun(vec2, reshape(1:numel(ri), size(ri)), 'UniformOutput', 0); 
```

这就是我到目前为止所尝试的：

```
 B = cellfun(@(A)nansum(A(:))'un', 0); 
```

有这个错误

？？？b = cellfun(@(distance)nansum(distance(:))'un', 0); | 错误：意外的 MATLAB 表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:06:59.517

这是你想要的？

```
dummy = [1 2 3];
A = {dummy;dummy;dummy;dummy;dummy;dummy;dummy;dummy;dummy}
Asum = sum(cell2mat(A)); 
```

结果：

```
Asum = [9 18 27] 
```

如您所见，`cell2mat`诀窍就在这里。

# wpf - 在 xaml 中包含 xaml 元素

> ID：11544274
> 
> 赞同：3
> 
> 时间：2012-07-18T14:55:26.963
> 
> 标签：wpf, xaml, reference, include

我有两种不同的样式，我试图在其中包含相同的基本元素。例如，Horizo​​ntalButton 具有以下样式：

```
<Style x:Key="HorizontalButton" TargetType="{x:Type custom:SampleButton}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type custom:DispatchButton}">
                <Border Name="outerBorder" Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type custom:SampleGrid}}, Path=ActualWidth, Converter={StaticResource MathConverter}, ConverterParameter=x/7}">
                    <Border Name="innerBorder" BorderThickness="1" BorderBrush="WhiteSmoke" CornerRadius="1" Background="{TemplateBinding Background}">
                        <Grid Margin="2">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="4*"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="1*"></RowDefinition>
                            </Grid.RowDefinitions>
                            <StackPanel Orientation="Vertical" VerticalAlignment="Top">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding Id}"></TextBlock>
                                    <TextBlock Text="{TemplateBinding Code}" Margin="4,0,0,0"></TextBlock>
                                </StackPanel>
                                <TextBlock Text="{TemplateBinding Address}" TextWrapping="Wrap"></TextBlock>
                            </StackPanel>
                            <Rectangle Grid.Row="1" Height="1" Margin="2,0,2,0" Stroke="DarkGray" />
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                                <Grid>
                                    <Ellipse VerticalAlignment="Center" HorizontalAlignment="Center" Width="15" Height="15" Fill="{TemplateBinding SampleColor}" />
                                    <TextBlock Foreground="{TemplateBinding Background}" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{TemplateBinding Sample}"></TextBlock>
                                </Grid>
                                <Image Width="16" Height="16" Source="{TemplateBinding SymbolImage}" Margin="2,0,0,0" />
                            </StackPanel>
                            <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Center" Name="content" />
                        </Grid>
                    </Border>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

VerticalButton 有这种风格：

```
<Style x:Key="VerticalButton" TargetType="{x:Type custom:SampleButton}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type custom:DispatchButton}">
                <Border Name="outerBorder" Height="{Binding RelativeSource={RelativeSource AncestorType={x:Type custom:SampleGrid}}, Path=ActualHeight, Converter={StaticResource MathConverter}, ConverterParameter=x/7}">
                    <Border Name="innerBorder" BorderThickness="1" BorderBrush="WhiteSmoke" CornerRadius="1" Background="{TemplateBinding Background}">
                        <Grid Margin="2">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="4*"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="1*"></RowDefinition>
                            </Grid.RowDefinitions>
                            <StackPanel Orientation="Vertical" VerticalAlignment="Top">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{TemplateBinding Id}"></TextBlock>
                                    <TextBlock Text="{TemplateBinding Code}" Margin="4,0,0,0"></TextBlock>
                                </StackPanel>
                                <TextBlock Text="{TemplateBinding Address}" TextWrapping="Wrap"></TextBlock>
                            </StackPanel>
                            <Rectangle Grid.Row="1" Height="1" Margin="2,0,2,0" Stroke="DarkGray" />
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                                <Grid>
                                    <Ellipse VerticalAlignment="Center" HorizontalAlignment="Center" Width="15" Height="15" Fill="{TemplateBinding SampleColor}" />
                                    <TextBlock Foreground="{TemplateBinding Background}" VerticalAlignment="Center" HorizontalAlignment="Center" Text="{TemplateBinding Sample}"></TextBlock>
                                </Grid>
                                <Image Width="16" Height="16" Source="{TemplateBinding SymbolImage}" Margin="2,0,0,0" />
                            </StackPanel>
                            <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Center" Name="content" />
                        </Grid>
                    </Border>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

如您所见，outerBorder 根据按钮是垂直还是水平设置了不同的属性，但是从 innerBorder 向内的所有内部元素都是相同的。有没有一种方法可以在 xaml 中进行某种包含或引用，这样我只需对内部元素的一个实例进行更改即可获得相同的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:10:52.753

您可能可以将 a`ContentControl`与包含所有共享元素的`ContentTemplate`集合一起使用`DataTemplate`

```
<DataTemplate x:Key="MySharedXaml">
    <!-- Shared XAML here -->
</DataTemplate> 
```

然后在您的控件中，只需在您想要共享 XAML 的任何地方使用它

```
<ContentControl ContentTemplate="{StaticResource MySharedXAML}">
    <ContentPresenter />
</ContentControl> 
```

我唯一不确定的是绑定。您可能需要稍微调整您的 XAML 以确保正确设置绑定。

# android - 如果使用多个 SharedPreferences 不起作用？

> ID：11544275
> 
> 赞同：0
> 
> 时间：2012-07-18T14:55:28.697
> 
> 标签：android, sharedpreferences

在我的应用程序中，我有一个奇怪而烦人的“错误”。“错误”使我的应用程序拒绝加载 sharedPreferences。在我的应用程序的其他部分，我使用一两个 SharedPreferences，祝你好运而且没有错误。但是当我尝试处理其中大约 75 个时，它们似乎已经消失了。

我不知道从哪里开始调试以找出原因。是我的低规格手机还是某种过载导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:31:11.503

看看这里：[http](http://androidresearch.wordpress.com/2012/03/31/writing-and-reading-from-sharedpreferences/) ://androidresearch.wordpress.com/2012/03/31/writing-and-reading-from-sharedpreferences/ 但我相信在这种情况下将数据存储在数据库中会更合适。

# ruby - 在 Rubyscript 上拖放：显示引发错误消息？

> ID：11544282
> 
> 赞同：0
> 
> 时间：2012-07-18T14:56:01.423
> 
> 标签：ruby, windows, drag-and-drop, console

我有一个脚本，我通过将文件从资源管理器拖放到 Windows 桌面上指向我的脚本的链接开始，因此文件名成为我的脚本的参数。这对于不知道如何使用有效参数启动我的脚本的用户来说非常方便。这部分工作完美。

但是当我在脚本中引发错误时，会显示错误消息，但控制台窗口会关闭，但不会给用户时间阅读消息。在脚本末尾或之后放置 a`gets`或 a没有帮助。`sleep``raise`

请问我该如何解决？

```
if ARGV[0] 
  filename = ARGV[0]
else
  raise "No filename given"
end
#some other code with wrong data
error = true
if error   
  raise "An error has occured, wrong data"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:11:32.010

在你的整个程序中添加这个：

```
begin
  all your code...
rescue
  puts $!
  system('pause')
end 
```

# objective-c - OAuth 与雅虎财经

> ID：11544287
> 
> 赞同：1
> 
> 时间：2012-07-18T14:56:19.630
> 
> 标签：objective-c, ios, oauth, oauth-2.0, yahoo-finance

我正在开发一个 iPhone 应用程序，我正在尝试验证并授权用户连接到 yahoo Finance 以查看他的投资组合。我是否可以使用 OAuth 对用户进行身份验证，然后在 TableView 上显示用户的雅虎金融投资组合？

非常感谢。

* * *

是否有任何其他服务，如谷歌金融，我可以用来显示用户的金融投资组合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:19:21.787

我不相信 Yahoo Finance 有任何 API 可以让您检索用户的投资组合。[我在这个话题上看到](http://developer.yahoo.com/forum/General-Discussion-at-YDN/Retrieving-Portfolios-from-My-Yahoo-Finance/1237253160000-61f8d0f3-9923-3551-ba9c-929caa212016)的最后一句话是几年前的事，他说：“据我所知，没有发布金融 API 的计划。” 此外，[Yahoo APIs 页面](http://developer.yahoo.com/everything.html)没有列出任何 Finance APIs。

# multithreading - NSManagedObjectContext 锁

> ID：11544288
> 
> 赞同：0
> 
> 时间：2012-07-18T14:56:21.283
> 
> 标签：multithreading, macos, core-data, locking

我正在使用 Core Data 编写一个多线程应用程序。

我的印象是`- [NSManagedObjectContext lock]`不能作为标准锁使用。作为概念证明，这里是在 Xcode 3“命令行工具”模板之后构建的示例，“核心数据”风格：

```
int main (int argc, const char * argv[])
{
  objc_startCollectorThread();

  NSManagedObjectContext *context = managedObjectContext();

  [context lock];
  [context lock];

  NSLog(@"hello world! (context=%@)", context);

  [context unlock];
  [context unlock];

  return 0;
} 
```

这应该会导致死锁，而不是在 Mac OS X 10.6.8 或 10.7.4 下运行时，我得到了这个日志：

```
2012-07-18 16:53:40.206 test[20004:a0b] hello world! (context=<NSManagedObjectContext: 0x20000df40>) 
```

谁能告诉我发生了什么？

（如果我使用 NSLock 的实例而不是上下文，死锁会按预期发生）

* * *

[这是Apple 文档中关于 NSManagedObjectContext 锁](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/lock)的摘录

## 锁

尝试获取接收器上的锁定。

`- (void)lock`

讨论

此方法会阻止线程的执行，直到可以获取锁为止。应用程序通过要求线程在执行代码之前获取锁来保护代码的关键部分。一旦临界区过去，线程通过调用解锁来放弃锁定。

将此消息发送到托管对象上下文有助于框架了解多线程环境中事务的范围。最好使用 NSManagedObjectContext 的 NSLocking 实现，而不是使用单独的互斥对象。

如果您锁定（或成功尝试锁定）托管对象上下文，则进行锁定调用的线程必须具有保留，直到它调用解锁。如果在多线程环境中没有正确保留上下文，这将导致死锁。

可用性 适用于 Mac OS X v10.4 及更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:51:29.823

似乎由于未知原因，在同一线程中发生后续 NSManagedObject 锁时会被忽略。

这是另一个按预期工作的示例代码（执行时没有日志）：

```
@implementation NSManagedObjectContext (Test)
- (void)testLock:(id)sender
{
  [self lock];

  NSLog(@"hello world! (context=%@)", self);

  [self unlock];
}
@end

int main (int argc, const char * argv[])
{
  objc_startCollectorThread();

  NSManagedObjectContext *context = managedObjectContext();

  [context lock];

  [NSThread detachNewThreadSelector:@selector(testLock:) toTarget:context withObject:nil];

  sleep(2);
} 
```

笔记：

`- (BOOL)[NSManagedObjectContext tryLock]`也返回`YES`任何后续调用。

# swt - 在 Windows 7 中使用 NVIDIA 显卡时，UI 组件不会在 SWT 中呈现

> ID：11544292
> 
> 赞同：0
> 
> 时间：2012-07-18T14:56:28.213
> 
> 标签：swt, nvidia

我在 Windows 7 中运行基于 Eclipse 的应用程序。当我在 Windows 7 上使用 nvidia 显卡时，很少有组件不会呈现。当我使用不同的显卡时，它们会正确呈现。任何人都可以提出这个问题的可能原因。

我正在使用 NVIDIA NVS 300 显卡。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:09:48.023

您是否尝试过更新视频驱动程序？我已经在带有 NVidia 卡的 Win 7 上运行了许多基于 Eclipse 的应用程序，没有任何问题。

# php - 为什么“打印”从右到左打印？

> ID：11544298
> 
> 赞同：7
> 
> 时间：2012-07-18T14:57:19.507
> 
> 标签：php

谁能向我解释这是如何工作的：

```
<?php
    print 5 . print 6 . print 7;
?> 
```

它打印：`76151`

我知道`1`是函数的返回值`print`，但为什么函数的调用顺序相反？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T14:59:33.247

我相信这是因为点运算符是[left-associative](http://us3.php.net/manual/en/language.operators.precedence.php)。

带有括号的表达式看起来像这样：

```
print 5 . (print 6 . (print 7)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:01:25.773

您的功能正在从右到左进行评估。

跟踪与此类似：

```
print (5 . print 6 . print 7) 
```

print 7 首先计算，打印 7 并返回 1。

```
print (5 . print 6 . 1) 
```

这跟踪打印 61 并返回 1 最后：

```
print (5 . 1) 
```

因此你有 76151。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:03:14.637

你的表达式可以这样写：

```
print (5 . print (6 . print 7)); 
```

`print 61`并且`print 7`是返回布尔值`1`，这就是为什么`1`也打印

# c# - 如何在 MVC 视图中使用 jquery/ajax 验证空格

> ID：11544299
> 
> 赞同：4
> 
> 时间：2012-07-18T14:57:22.593
> 
> 标签：c#, asp.net-mvc

我有一个包含表单的 MVC 视图，现在需要验证在特定文本字段中输入的数据。我只需要确保没有空格。在我看来，有人可以给我一个使用 jquery/ajax 脚本进行表单验证的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:12:49.680

将验证构建到视图模型的一部分中可能是一个好主意，这样您的模型中就会有如下内容：

```
[RegularExpression(@"^[\S]*$", ErrorMessage = "White space found")]
public string MyField {get;set;} 
```

然后，您可以在视图中执行以下操作：

```
@Html.TextBoxFor(model => Model.MyField , new { })
@Html.ValidationMessageFor(model => Model.MyField) 
```

要使客户端正常工作，您必须启用客户端验证和不显眼的 JS，您可以通过在`<appSettings>`main 部分中设置以下内容来实现`web.config`

```
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

您还需要将`jquery.validate.js`和`jquery.validate.unobtrusive.js`文件带入您的页面。当您在 MVC3 中创建新项目时，它们都应该捆绑在脚本文件夹中。

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script> 
```

最后，在服务器端操作方法上，您需要一些看起来像这样的东西：

```
 [HttpPost]
    public ActionResult Index(Thing myThing) {

        if (ModelState.IsValid) {
            //Do some work in here because we're all good
            return RedirectToAction("MyOtherAction");
        }

        //Oops the validation failed so drop back to the view we came from
        return View();
    } 
```

完全依赖客户端 JS 是危险的，因为理论上可以绕过导致损坏的数据到达服务器端。

上面的正则表达式应该做你想要的验证，但我的正则表达式技能有点生疏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:02:30.080

[在这里](https://stackoverflow.com/questions/2942325/jquery-form-validate-not-allow-space-for-username-field)找到这段代码：

```
$(document).ready(function(){

  jQuery.validator.addMethod("noSpace", function(value, element) { 
  return value.indexOf(" ") < 0 && value != ""; 
}, "No space please and don't leave it empty");

$("form").validate({
   rules: {
      name: {
          noSpace: true
      }
   }
  });

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:28:29.740

我建议将空白检查作为模型验证的一部分。为此目的，一个简单且可重用的验证属性如下所示：

```
public class NoWhiteSpaceAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        var strValue = value as string;
        if (!string.IsNullOrEmpty(strValue))
        {
            return !strValue.Contains(" ");
        }

        return true;
    }
} 
```

使用示例：

```
[NoWhiteSpace(ErrorMessage = "No spaces allowed")]
public string UserName { get; set; } 
```

# excel - 锁定excel公式

> ID：11544301
> 
> 赞同：0
> 
> 时间：2012-07-18T14:57:27.180
> 
> 标签：excel, excel-2007, excel-formula

我有几张数据表，其中写有公式来比较表之间的值。这些工作表将今天的当前数据与前一天的先前数据进行比较。每天我必须将数据从“当前”表移动到“上一个”表中，然后用今天的今天更新“当前”表。当我从“当前”工作表中剪切数据并将其粘贴到“上一个”工作表中时，它将通过自动更新其中的工作表名称来更改公式，我不希望它这样做。我希望公式保持锁定状态，并且在数据移动时不会改变。

解决这个问题的方法是复制数据而不是剪切它，但我想看看是否有其他解决方案。

这是我正在使用的公式的示例

```
=IF(ISNA(MATCH('Info - Current'!B2,'Diff - Previous'!B:B,0)),FALSE,TRUE) 
```

然后，在我将“信息 - 当前”表中的数据物理剪切到“信息 - 上一个”表中之后，公式将更改为下面的示例。即使公式所在的列位于“信息当前”表中。

```
=IF(ISNA(MATCH('Info - Previous'!B2,'Diff - Previous'!B:B,0)),FALSE,TRUE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:30:18.800

当您`cut`和`paste`公式时，Excel 会更新粘贴的公式以仍指向公式中的原始单元格引用。这是因为你是`moving`一些数据。移动的数据仍然直接绑定到最初引用的单元格。

当您`copy`和`paste`公式时，Excel 假定您的意思是`duplicate`相对于公式引用的单元格的公式。换句话说，它不会更改公式以将它们链接到公式引用的原始单元格。

您已经找到了最好的解决方案，即到`copy and paste`新工作簿，然后`delete`是旧工作簿中的数据。

参考：

[http://www.worldstart.com/cut-vs-copy-in-ms-excel/](http://www.worldstart.com/cut-vs-copy-in-ms-excel/)

# javascript - ExtJS DataView 仅显示最后一个 JSON 元素

> ID：11544302
> 
> 赞同：0
> 
> 时间：2012-07-18T14:57:31.453
> 
> 标签：javascript, json, extjs

我有以下代码：

```
new Ext.DataView({
    store: new Ext.data.JsonStore({
        url: 'request/getAssetsJSON',
        baseParams: {
            _id: this.request._id
        },
        root: 'results',
        fields: [ 'attachment', 'id', 'name', 'property', 'type' ],
        autoLoad: true
    }),
    emptyText: 'No images to display',
    tpl: new Ext.XTemplate(
        '<tpl for=".">',
            '<div class="thumb-wrap" id="{name}">',
            '<div class="thumb"><p>Test</p><img height="45" src="request/getAsset?id={id}&attachment={attachment}" title="{name}"></div>',
            '<span class="x-editable">{name}</span></div>',
        '</tpl>',
        '<div class="x-clear"></div>'
    )
}) 
```

request/getAssetsJSON 发送的 JSON 是：

```
[{"attachment":"img1.png","id":"4dc90e2a6ba440e37601d5d074011e2e","name":"img1"},   
{"attachment":"img2.png","id":"4dc90e2a6ba440e37601d5d074011e2e","name":"img2"},
{"attachment":"img3.png","id":"4dc90e2a6ba440e37601d5d074011e2e","name":"img3"}] 
```

我的问题是 DataView 只显示最后一个图像（img3.png），并且只有一个 GET 请求来请求/getAsset。

我猜 ExtJS 如何迭代我的模板，或者它如何加载数据有问题，但我在这里不知所措。

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:13:30.217

您对所有项目都有相同的 id "id":"4dc90e2a6ba440e37601d5d074011e2e"。您可以在服务器端更改 json 响应或为此数据创建模型并设置 idProperty : '_id'(default idProperty: 'id')

```
Ext.define('YouModel', {
    extend: 'Ext.data.Model',

    config: {
        idProperty : '_id',
        fields: [
            {name: 'id',          type: 'auto'},

            {name : 'attachment',      type : 'string'},
            {name : 'name',  type : 'string'}
        ]

    }
});

new Ext.DataView({
    store: new Ext.data.JsonStore({
        url: 'request/getAssetsJSON',
        baseParams: {
            _id: this.request._id
        },
        root: 'results',
        model: 'YourModel',
        autoLoad: true
    }),
  ....
}) 
```

# ftp - FTP 只传输新文件

> ID：11544304
> 
> 赞同：0
> 
> 时间：2012-07-18T14:57:33.700
> 
> 标签：ftp, jenkins, maven-3, sftp, jenkins-plugins

我在我的网络项目中使用 maven+jenkis。使用 jenkis，我将 WEB-INF 文件夹上传到我的服务器上。现在我只想传输最新的文件。我是否在我的 ftp 配置文件上设置了一些属性，或者我将为 jenkis 执行特定的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:02:37.220

我会使用rsync。它只传输必要的文件，我认为它只能发送大文件的更改部分。

# android - Android java对被销毁对象的引用

> ID：11544307
> 
> 赞同：0
> 
> 时间：2012-07-18T14:57:39.957
> 
> 标签：android, listview, adapter

我已经在我的应用程序中设置了自定义水平分页，比如说 5 页。每个页面都有自己的 ListView 和 ListView Adapter。在我的主 Activity 类中，我有一个自定义对象的 ArrayList，我用它来补充每个 ListView。

所以在我的主要课程中，我可以调用：

```
lvAdapter.setItems(items); 
```

工作正常。

但是当我打电话时：

```
lvAdapter.clearItems(); 
```

我只希望它清除 ListView 中的项目，但它实际上从我的 ArrayList 中删除了该对象的所有项目。我想适配器只持有一个参考？

适配器 clearItems：

```
public void clearItems()
{
      this.items.clear();  //this will remove the object in the ArrayList
      this.notifyDataSetChanged();
} 
```

我正在尝试做的是在活动可见页面上设置项目并为那些不可见的页面设置清除项目。因为当我一次加载所有页面时，我正在处理内存不足的崩溃......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:01:47.333

您可以清除适配器参考，`ListView`例如`listView.setAdapter(null)`

我还将阅读有效的`Adapter`实现，您可以做几件事来减少内存占用，例如正确回收视图`getView(...)`

# python - 在 Python 多重继承中，父类使用子定义的变量有多糟糕？

> ID：11544309
> 
> 赞同：2
> 
> 时间：2012-07-18T14:57:45.323
> 
> 标签：python, multiple-inheritance

```
class BaseOne(object):

    def base_one(self):
        print self.first
        print self.second
        # Do stuffs with self.first and self.second defined from sub class

class BaseTwo(object):

    def base_two(self):
        print self.first
        print self.second
        # Do stuffs with self.first and self.second defined from sub class

class Stackoverflow(BaseOne, BaseTwo):

    def __init__(self):
        super(Stackoverflow, self).__init__()
        self.first = 'Stack'
        self.second = 'Overflow'

class Serverfault(BaseOne, BaseTwo):

    def __init__(self):
        super(Serverfault, self).__init__()
        self.first = 'Server'
        self.second = 'Fault'

Stackoverflow().base_one()
Serverfault().base_one() 
```

在`BaseOne`or`BaseTwo`中，我想使用从子类定义的变量。有没有更好的方法来完成上述操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:02:55.197

我看不出有任何理由不这样做。我建议`first, second = None, None`在基类上添加类似的东西（或创建这两个继承自的更高级别）以解决子类无法设置这些值的情况，否则应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:06:29.470

这与其他语言中的抽象类基本相同。没有理由不这样做。除非您可能在这里弄混了水 - 确保您的代码保持可理解性。

我可能会：

```
class BaseOne(object):
    def base_one(self):
        print self.first()
        print self.second()

    def first(self):
        return "bad boy, don't call this on abstract instance"

    def second(self):
        return 'really, son, you have a problem here. Go create some instances of subclasses!' 
```

# c#-4.0 - 如何使用 Twitterizer for Desktop Application 获取六位数字密码

> ID：11544310
> 
> 赞同：0
> 
> 时间：2012-07-18T14:57:45.323
> 
> 标签：c#-4.0, twitter, desktop, twitter-oauth, twitterizer

为此，我根据本指南[http://www.twitterizer.net/tutorials/getting-started-with-oauth在代码下方参考 Twitterizer2 库和用户](http://www.twitterizer.net/tutorials/getting-started-with-oauth)

```
 OAuthUtility.GetRequestToken("consumer key", "consumer secret"); 
```

但我没有看到 GetRequestToken 只采用两个参数。它需要调用 bacl-url 的附加参数。在我的情况下，我通过服务从客户端移动应用程序获取 accessToken 和 accessSecret，然后使用 Twitterizer 库发布推文。不确定我是否需要用户 accessSecret 或 pin 以进行以下调用

```
 var service = new TwitterService();
  service.AuthenticateWith(ConsumerKey, ConsumerSecret, AccessToken, AccessTokenSecret);
  service.SendTweet(TweetMessage); 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:00:05.357

要获取 6 位密码，您必须将回调 URL 设置为`oob`.

# sql - SQL Server“在”与“小于”

> ID：11544311
> 
> 赞同：2
> 
> 时间：2012-07-18T14:57:50.220
> 
> 标签：sql, sql-server

我有一个要复制的地址表。有 14 种不同类型的地址可用。为了减少复制的数据，我在 AddressType 字段上进行过滤。该字段是一个 int，其值为 1 到 14。我最初有一个过滤器

```
AddressType = 2 
```

，因为我只对这种类型的地址感兴趣。但是，最近的更改要求我复制了 AddressType 1 和 2。我首先将过滤器更改为

```
AddressType in (1,2) 
```

使用过滤器会更好吗

```
AddressType < 3 
```

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:05:16.043

随着数字变大，可能会有显着差异。您不会在较小的数字上看到性能差异，但随着数字变大您会看到差异，尤其是在 AddressType 上有索引的情况下。您的`IN ()`版本基本上被翻译成：

```
WHERE AddressType = 1
   OR AddressType = 2
   OR ... 
```

对于这个具体案例，我同意其他人的看法。(1) 只有 14 个值时的性能差异不太可能引起注意。(2) 乔纳森的观点`IN ()`更准确地反映了你想做的事情，这也是一个好观点。

但是对于可能有更多可能值的未来读者，我认为重要的是要注意当列表不受限制时（或者何时不再提供相同的功能，例如当地址类型发生变化时）事情*会如何变化。*在更大的尺寸下，即使列表中的所有内容都符合范围标准很方便，还有其他事情需要考虑：（1）打字不太方便，这也可能导致更大的批量大小，当我们'再谈极端。`<``IN ()``IN ()``IN (1,2,3,4,5,6,7,8,9,10, ...)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T15:06:01.823

当您的要求发生变化并且需要类型 1、2、9 和 14 时，IN 配方会更好。列表比较更准确地反映了您在做什么（从可能值的小列表中选择两种类型）。

小于符号恰好起作用，但巧合的是，类型的表示容易受到这样的范围比较的影响。

在性能方面，两者之间基本上没有什么可以选择的。小于操作可能会稍微快一些，但幅度不太可能是可测量的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:05:25.227

执行计划看起来相同。我倾向于说你应该使用 IN 以防你需要添加另一个地址类型，如“5”，这将迫使你重写 < 查询。IN 的可扩展性更高，因为添加什么内容并不重要。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-18T15:19:23.020

所有答案都很好......与其他海报一样......它的“你还可以做什么”可能会有所作为。

因此，在任何比较中始终考虑 NULL。您的查询可以写成 NULLS，但是：如果可能有空值...并且如果您决定更改或重用 SQL ad hoc 说，否定它...您可能会遇到比较问题，而不是 IN。

例如 NOT IN (1,2) 如何执行 vs >= 3 ...或者我们可能使用的任何化身。NULL 在第一个中为 TRUE，但在第二个中为 FALSE。（NULLS 是比较）。

考虑 NULLS 应该就像在 SQL 创建中呼吸一样。

# powershell - 显示当前执行函数的名称

> ID：11544316
> 
> 赞同：22
> 
> 时间：2012-07-18T14:57:59.957
> 
> 标签：powershell

如何检索当前在 powershell 中运行的函数的名称？这是我想要的一个例子：

```
Function write-FunctionName
{
write-host "The name of this function is: *SomethingGoesHereButWhat?*"
} 
```

然后当我执行它时，它会显示：

```
>write-FunctionName

The name of this function is: write-FunctioName

> 
```

这可以做到吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T15:03:23.123

该`$MyInvocation`变量包含有关当前正在执行的任何内容的信息：

```
Function write-FunctionName
{
    write-host ("The name of this function is: {0} " -f $MyInvocation.MyCommand)
} 
```

有关详细信息，请参阅`get-help about_automatic_variables`或[此处](http://technet.microsoft.com/en-us/library/hh847768)的 technet 站点。

# javascript - 正则表达式 - 最多删除第二个空格

> ID：11544318
> 
> 赞同：2
> 
> 时间：2012-07-18T14:58:16.977
> 
> 标签：javascript, regex

我认为我正在尝试做的事情是可能的......但我还没有找到实现这一目标的答案。我想在javascript中格式化一个与此类似的字符串：

`+44 (0) 234-567-8901`

进行中的国际 ( +44 ) 和本地 ( (0) ) 调用代码可能会发生变化，因此字符串可能会更长或更短。但是格式始终相同。

我想使用这个字符串并删除所有字符，包括直到第二个空格的空格并删除破折号。例如：

`+44 (0) 234-567-8901 becomes 2345678901`

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:25:30.187

按照您自己的要求（删除包括第二个空格在内的所有内容，并从其余空格中删除破折号）；

使用此模式`^([\S]+\s){2}|-`并什么都不替换。您应该留下一个与您要求的数字相似的数字（`+44 (0) 234-567-8901`变成`2345678901`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:11:02.087

如果您可以依赖字符串的结尾格式是一致的字符数，则可以抓取最后 12 个字符，并删除破折号。

```
var result = str.slice(-12).replace(/-/g, ""); 
```

* * *

如果你真的只是想要一个正则表达式，你可以这样做......

```
var result = str.match(/(\d{3})-(\d{3})-(\d{4})$/).slice(1).join(""); 
```

同样，这依赖于字符串结尾的一致性。如果可能存在差异，则需要进行调整以进行补偿。

* * *

要获取最后一个空格之后的所有内容，`slice()`请将第一个示例中的更改为...

```
.slice(str.lastIndexOf(' ') + 1) 
```

要获取第二个空格之后的所有内容，请将其更改`slice()`为...

```
.slice(str.indexOf(' ', str.indexOf(' ') + 1) + 1) 
```

# objective-c - Objective C 对象未更新

> ID：11544320
> 
> 赞同：2
> 
> 时间：2012-07-18T14:58:20.953
> 
> 标签：objective-c

我正在使用 ARC、XCode 4.2、OS X 10.6 和为 iPad 5.0 模拟器构建（每个对象都显示在表格视图单元格中）。

* * *

我有一个具有以下属性的对象的 NSArray：

```
// Relevant ModelClass.h
@property (strong, nonatomic) ChildObject* childObject;
@property Boolean type1;
@property Boolean type2;

// Relevant ChildObject.h
@property (strong, nonatomic) NSString* name; 
```

我试图确保 ChildObject 的每个实例（始终是 ModelObject 的属性）都有一个名称集以供显示。我正在使用以下代码来完成此操作：

```
// Called after the objects are all loaded into the objects NSArray
// _data is an NSMutableArray that is allocated and initialized
// Loop through the model array and make sure that everyone has a name set
for (ModelClass *model in objects) {
    NSLog(@"B %@", [[model childObject] name]);
    if (model.num == 0) {
        if (model.type1) {
            [model.childObject setName: @"type1"];
            NSLog(@"Updated Name: %@", model.childObject.name);
        }
        else {
            model.childObject.name = @"type2";
        }
    }

    if (! model.childObject.name) {
        [model.childObject setName:@"?"];
    }
    [_data addObject:model];

    NSLog(@"E %@", [[model childObject] name]);
} 
```

该`objects`数组有两个对象：一个有名称，一个没有（并且 type1 的布尔值设置为 true）。

但是，当代码执行时，日志如下所示：

```
// Log Output
2012-07-18 10:40:27.760 AppName[13462:40b] B A Really Long Name    
2012-07-18 10:40:27.760 AppName[13462:40b] E A Really Long Name
2012-07-18 10:40:27.760 AppName[13462:40b] B (null)
2012-07-18 10:40:27.761 AppName[13462:40b] Updated Name: (null)
2012-07-18 10:40:27.761 AppName[13462:40b] E (null) 
```

前三行是正确的（第一个对象的名称未更改，第二个对象的名称设置为`null`）。由于某种原因，第二个对象的名称没有更新，即使看起来代码正在执行以更改其名称。

为什么对象的名称不更新？我是 Objective-C 的新手，所以它可能非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:11:30.653

记住，做

```
@property (strong, nonatomic) ChildObject* childObject; 
```

和

```
@synthesize childObject = _childObject 
```

编译器不会给你的变量一个内存。你必须`alloc`和`init`你`childObject`的才能使用它，或者`setName`它们的变量。你需要类似的东西，

```
_childObject = [[ChildObject alloc] init]; 
```

接着，

```
[_childObject setName:@"Works!!!"]; 
```

# javascript - Google Chrome：如何调试随机“超出最大调用堆栈大小”错误

> ID：11544321
> 
> 赞同：33
> 
> 时间：2012-07-18T14:58:22.627
> 
> 标签：javascript, google-chrome

在复杂的 JavaScript 应用程序（使用 jQuery 和 Ember）中，JavaScript 偶尔会**随机崩溃**，无论是在页面加载期间还是在我对页面执行操作时。错误如下（[截图](http://i.stack.imgur.com/RB2Z9.png)）：

```
Uncaught RangeError: Maximum call stack size exceeded
  Class.proto
  Class.proto
  ... 
```

...有几页`Class.proto`堆栈跟踪行，但没有任何源/行信息，即使在跟踪的底部也是如此。

我知道这指向无限递归，并且可以想象这可能发生在事件系统中，但对我来说没有明显的起点。

我**只能在 Chrome Canary** (22.0.1209.0) 中重现这一点，而不是 Chrome 稳定版或 Firefox。该应用程序不与任何外部服务通信或发出任何 Ajax 请求。

由于它只是偶尔发生，而且没有明显的原因，而且由于没有可用的堆栈跟踪，所以我很难追踪原因。

**我的问题：**我能做些什么来调试这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-18T15:22:24.517

在 Chrome 开发者工具栏中启用“异常中断”。**在Sources**选项卡的工具栏页脚中使用此![这是图标](../Images/38d013843391183dea6076b091e7d035.png)图标（有 3 种状态！）

 **它应该停止你的代码，你可以看到堆栈！**

# python - 从 postgreSQL 数据库（Django 站点）备份所有数据

> ID：11544323
> 
> 赞同：1
> 
> 时间：2012-07-18T14:58:29.737
> 
> 标签：python, django, linux, postgresql

我正在尝试从我的 postgresql 数据库中备份所有内容。我有 2 个站点，我的 live 站点和 dev 站点。所有代码都是同步的，我只想将所有数据复制到开发站点以进行一些测试，然后添加数据，然后将其复制回来。

我试过浏览 postgres 网站上的文档，现在我很幸运。

我跑来做转储/恢复的命令：

```
pg_dump db_name > joshtestdump 
psql dbname < joshtestdump – 
```

当我运行第一个命令转储数据库时，我收到以下错误消息：

```
pg_dump: [archiver (db)] connection to database "db_name" failed: FATAL:  Ident authentication failed for user "josh" 
```

补充一下，数据库的用户名和密码是空白的。这对任何事情都有影响吗？

我是 postgreSQL 的新手，网络上的每个教程几乎都做同样的事情。

如果您需要更多详细信息，请告诉我！

这是我的数据库详细信息：

```
DATABASE_ENGINE = 'postgresql_psycopg2'           # 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
DATABASE_NAME = 'db_name'             # Or path to database file if using sqlite3.
DATABASE_USER = ''             # Not used with sqlite3.
DATABASE_PASSWORD = ''         # Not used with sqlite3.
DATABASE_HOST = ''             # Set to empty string for localhost. Not used with sqlite3.
DATABASE_PORT = ''             # Set to empty string for default. Not used with sqlite3. 
```

谢谢，

乔什

***更新***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:36:45.803

1.  为什么要使用 gzip 而不是 --format 来获取压缩转储？
2.  为什么要以 root 身份执行此操作？
3.  你为什么不使用 pg_restore 来恢复你的数据库？
4.  为什么你更喜欢随机的网络教程而不是实际的[手册](http://www.postgresql.org/docs/9.1/static/app-pgdump.html)

    pg_dump -U some_user -Fc 数据库名 > mydb.dump

    pg_restore -U some_user -d database_name mydb.dump

# php - 是否有用于从 PHP 的对象范围内访问对象方法的快捷语法？

> ID：11544324
> 
> 赞同：3
> 
> 时间：2012-07-18T14:58:31.640
> 
> 标签：php, methods

我只是根据使用其他语言的经验来询问，这些语言可以根据类范围从全局函数调用中消除方法调用的歧义 - 例如：

```
class Foo {
 function bar(){
   echo 'bletch';
 }

 function baz(){
   $this->bar();
 }
} 
```

所以我想我是在问是否有另一种方法`$this->bar()`，或者换句话说，我怎么能省略`$this`，考虑到上下文，这似乎是多余的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:00:08.177

不，您不能在 PHP 中`bar()`从内部访问，因为您可以轻松地拥有不属于任何类/对象的全局函数（这是您所引用的大多数语言的区别），这将导致冲突。`baz()``$this->``bar()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:18:42.233

简而言之，这是不可能的。

因为在给定以下内容的情况下，调用`bar`将调用在类之外命名的函数`bar`：

```
function bar() {
 echo 'foo';
}

class Foo {
 function bar(){
   echo 'bletch';
 }

 function baz(){
   $this->bar();
 }

 function foobar() {
   bar();
 }
}

$instance = new Foo();

$instance->foobar(); 
```

这将呼应`foo`the`function bar()`而不是`bletch`the`method bar()`

# android - context.getResources().openRawResource() 使应用程序崩溃

> ID：11544326
> 
> 赞同：0
> 
> 时间：2012-07-18T14:58:33.563
> 
> 标签：android, file, text, android-resources, android-context

我正在尝试让 android 从 R.raw 文件夹中已有的文本文件中读取。

我有包含该行的函数 void readfile(Context context)

```
InputStream is = context.getResources().openRawResource(R.raw.data); 
```

但是，当我尝试运行该应用程序时，它会在该行崩溃。你能告诉我一个解决方法吗？或者从该文件中读取的另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:19:09.523

给定的上下文显然存在问题。你应该发布你的 logcat。

有两种方法可以解决您的问题。

1.  传递正确的上下文：查看程序有什么问题以及给定上下文不正确的原因。
2.  扩展应用程序，并将应用程序上下文保存在静态变量中：见这篇[文章](https://stackoverflow.com/questions/4391720/android-how-can-i-get-a-resources-object-from-a-static-context)

# java - 如何检索托管在 Google Docs 上的不受支持的文档的下载链接？

> ID：11544327
> 
> 赞同：0
> 
> 时间：2012-07-18T14:58:38.333
> 
> 标签：java, gdata, google-docs-api

谷歌的官方文档告诉我们：

```
 The download URL for files looks something like this:
 https://doc-04-20-docs.googleusercontent.com/docs/secure/m7an0emtau/WJm12345/YzI2Y2ExYWVm?h=16655626&e=download&gd=true 
```

它还告诉我们文档条目 xml 的完成方式如下：

```
<entry ...
...
<content type='application/zip' src='https://doc-0s-84-docs.googleusercontent.com/docs/securesc/4t...626&amp;e=download&amp;gd=true'/>
...
</entry> 
```

但是无论我尝试使用 gdata java 客户端库，我都无法检索该 url。我尝试了所有 .get* *Link* *() 方法和 .getContent()。有人遇到这个问题并找到解决方案吗？我还尝试获取媒体源并处理其输入流。

最终结果是在我的 java 应用程序服务器 (GAE) 上获取文件的内容（文件是自定义格式的二进制文件），以将其发送给可以解析和查看它的客户端。

干杯，

Ricola3D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:36:54.063

最后我自己找到了解决方案，看来我只是用错了。如果有一天其他人需要，这是代码！

```
URL entryUrl = new URL("https://docs.google.com/feeds/default/private/full/"+mydocumentid);
DocumentEntry mydocument = client.getEntry(entryUrl, DocumentEntry.class);
if (mydocument!=null) { // if we can read the document
  MediaContent content = (MediaContent) mydocument.getContent();
  //URL exportUrl = new URL(content.getUri()); // download url
  MediaSource source = client.getMedia(content);
  InputStream inStream = null;
  OutputStream outStream = null;
  try {
    inStream = source.getInputStream();
    outStream = resp.getOutputStream();
    int c;
    while ((c = inStream.read()) != -1) {
      outStream.write(c); // copy the stream, by 1byte per 1byte is very slow !
    }
  } finally {
    if (inStream != null) {
      inStream.close();
    }
    if (outStream != null) {
      outStream.flush();
      outStream.close();
    }
  } 
```

# magento - Magento - 如何检查登录时输入的电子邮件是否已在网站上注册？

> ID：11544333
> 
> 赞同：0
> 
> 时间：2012-07-18T14:58:49.143
> 
> 标签：magento

我试图告诉用户他们在登录期间输入的电子邮件地址或密码是错误的，而不是默认的“无效的电子邮件或密码”错误。

我去了相关的控制器文件：

.../app/code/core/Mage/Customer/controllers/accountcontroller.php

并将第 141 行的代码更改为：

```
catch (Mage_Core_Exception $e) {
     switch ($e->getCode()) {
          case Mage_Customer_Model_Customer::EXCEPTION_INVALID_EMAIL_OR_PASSWORD:
                if(Zend_Validate::is($login['username'], 'EmailAddress'))
                    $message = $this->__('Wrong password.');
                else
                    $message = $this->__('That email address was not found.');
                    //$message = $e->getMessage();
break; 
```

我使用同一文件中 forgotPasswordPostAction() 函数中的 Zend_Validate::is() 来检查电子邮件是否已注册。但它在登录期间不起作用。即使电子邮件未注册，我也总是收到“密码错误”消息。

是因为我使用 Zend_Validate::is() 错误吗？检查电子邮件是否已注册的正确功能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:34:47.193

admin-user 有一个 authenticate_before 事件，而客户没有。

没有事件可以挂钩。您可能会做的，我认为这是一个坏主意，是扩展 Mage_Customer_AccountController 覆盖 loginPostAction 并更改

`case Mage_Customer_Model_Customer::EXCEPTION_INVALID_EMAIL_OR_PASSWORD:`

在这一点上，你有`$session`你可以`$session->getCustomer()->loadByEmail($NEWCUSTOMER, $login['username'])`

如果`empty($NEWCUSTOMER->getData())`那么电子邮件是错误的。

但是帮助破解者知道他是否攻击了正确的用户名是个坏主意！

# php - 这个将mysql记录导出到csv的php代码有什么问题？

> ID：11544334
> 
> 赞同：-1
> 
> 时间：2012-07-18T14:58:50.860
> 
> 标签：php, mysql, foreach

我的文件上有这段代码，它适用于不同的文件，但在这个新文件上，它与有效的文件做同样的事情，它不起作用

```
mysql_select_db($db);
$result = mysql_query("
SELECT 
    CONCAT(`employees`.`first_name`,
            ' ',
            `employees`.`middle_name`,
            ' ',
            `employees`.`last_name`) AS `fullname`,
    `banks`.`bank_code`,
    `bank_branch_code`.`branch_code`,
    `employees`.`account_number`,
    `pay_roll_history`.`payable`,
    `employees`.`email`,
    `banks`.`payment_type`,
    `banks`.`process_mode`
FROM
    `employees`,
    `banks`,
    `bank_branch_code`,
    `pay_roll_history`
WHERE
    `employees`.`bank_id` = `banks`.`bank_id` 
    AND `employees`.`employee_id` = `pay_roll_history`.`employee_id` 
    AND `banks`.`bank_id` = `bank_branch_code`.`bank_id` 
    AND `pay_roll_history`.`payroll_date` = '$this_date'
");

//Open a csv file
$fp = fopen('c:\users\oteheddy\Desktop\test\BankReport.csv', 'w');

//*************************************
// fetch a row and write the column names out to the file
$row = mysql_fetch_assoc($result);
$line = "";
$comma = "";

foreach($row as $name => $value) {
    $line .= $comma . '"' . str_replace('"', '""', $name) . '"';
    $comma = ",";
}
$line .= "\n";
fputs($fp, $line);

// remove the result pointer back to the start
mysql_data_seek($result, 0); 
```

我得到这些错误

> 警告：第 32 行 C:\xampp\htdocs\pitss\export\bankexport.php 中为 foreach() 提供的参数无效
> 
> 警告：mysql_data_seek() [function.mysql-data-seek]：偏移量 0 对第 40 行 C:\xampp\htdocs\pitss\export\bankexport.php 中的 MySQL 结果索引 18（或查询数据未缓冲）无效

我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:13:02.790

第一件事是第一件事：
确保查询没有**错误**，您可以`mysql_error()`在您的情况下使用。

* * *

第二件事：
[**使用准备好的查询**](http://bobby-tables.com/php.html)，您现在拥有的查询可以导致一个[bobby-table](http://bobby-tables.com/ "我们称他为小鲍比桌......") ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:03:11.890

如果您的 $row 变量不是数组，则会引发此错误。

所以查询本身可能会引发错误。

尝试检查 mysql 错误`mysql_error()`并在其他任何地方进行适当的错误处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:03:17.070

你不检查是否`$result`是资源或只是`FALSE`，
你不检查你是否有一个数组`$row`，可能是`FALSE`

您可以使用 mysql_error() 查看最后一个数据库错误

# jsf - Facelet 包含一个 servlet 生成的内容

> ID：11544336
> 
> 赞同：1
> 
> 时间：2012-07-18T14:58:54.277
> 
> 标签：jsf, servlets, facelets

我想使用 ui:include 在 facelet 中包含一个 servlet 生成的内容。到目前为止，我只有错误。

请注意，servlet 工作正常，来自浏览器的 GET 请求正常。

请注意，我可以成功地包含来自另一个 facelet 文件的内容，但不是在生成 servlet 时。

我用谷歌搜索并stackoverflow了我的问题，但找不到匹配的回复。

myfacelet.xhtml（位于 webapp 的根目录，即通过“http://localhost:8080/mywebapp/myfacelet.xhtml”访问）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
  <title>JSF Dynamic Content</title>
</h:head><h:body>
  <h3>Dynamic content:</h3>
  <ui:include src="dynamic-content"/>
</h:body>
</html> 
```

MyServlet.java（可以通过“http://localhost:8080/mywebapp/dynamic-content”访问）：

```
@WebServlet(name = "DynamicContentServlet", urlPatterns = {"/dynamic-content"})
public class DynamicContentServlet extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter writer = response.getWriter();
    writer.println("<p>Dynamic stuff</p>");
  }
} 
```

web.xml（仅与 JSF 相关的东西）：

```
<context-param>
  <param-name>javax.faces.PROJECT_STAGE</param-name>
  <param-value>Development</param-value>
</context-param>
<servlet>
  <servlet-name>FacesServlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>FacesServlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
  <url-pattern>*.jsf</url-pattern>
  <url-pattern>*.faces</url-pattern>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

对于 ui:include="/dynamic-content" 和 urlPatterns="/dynamic-content"（或 ui:include="/mywebapp/dynamic-content" 和 urlPatterns="/dynamic-content"），错误是：

```
javax.faces.view.facelets.TagAttributeException: /myfacelet.xhtml @12,48 <ui:include src="/dynamic-content"> Invalid path : /dynamic-content
at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:152)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:195)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
(...)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:662) 
```

对于 ui:include="dynamic-content" 和 urlPatterns="/dynamic-content" 或 ui:include="dynamic-content.bla" 和 urlPatterns="*.bla"，错误是：

```
java.io.FileNotFoundException
at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnection.java:369)
at com.sun.faces.facelets.impl.DefaultFaceletCache._getLastModified(DefaultFaceletCache.java:172)
at com.sun.faces.facelets.impl.DefaultFaceletCache.access$000(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:82)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:78)
at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:121)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:256)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:366)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.IncludeHandler.apply(IncludeHandler.java:147)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:195)
at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
(...)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
at java.lang.Thread.run(Thread.java:662) 
```

另请注意，servlet 永远不会被执行。

我的代码有什么问题？

包括可能吗？

我怎样才能实现它？

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:16:35.573

`<ui:include>`只能包含另一个 Facelets 文件，而不是 JSP/Servlet 的输出。

您要么需要将 Servlet 替换为完整的 Facelets 文件，要么使用 Facelets 标记文件或 Facelets 复合组件，其中 HTML 也可以使用 JSTL 标记或`rendered`属性动态生成，如果需要，在支持 bean 的帮助下或支持组件。

如果您出于某种原因绝对需要使用 Servlet，例如因为您正处于从遗留 JSP/Servlet 到 JSF/Facelets 的迁移过程中，并且没有太多时间来正确地将 Servlet 转换为健全的 Facelets 方法，那么你也可以考虑使用[OmniFaces](http://omnifaces.org)[`<o:resourceInclude>`](http://showcase.omnifaces.org/components/resourceInclude)的组件：

```
<o:resourceInclude path="/dynamic-content" /> 
```

但如前所述，这不是正确的设计方法。对于适当的长期解决方案，您应该考虑用 Facelets 文件/标签/复合文件替换 Servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:45:36.580

我也在开发一个应用程序，该应用程序必须执行动态页面生成，包括嵌入图像、 `<map>`标签和在翻转时突出显示的 `<area>`相关标签。`<div>`

我天真的第一个测试方法是从 StringBuffer: 中写出整个 html `response.getWriter().println(sb.toString());`。这行得通，但它是一个 hack，并且没有利用我的 JSF 模板。即使我写出整个`<ui:composition>`元素，它也不使用模板。

在 Java EE 6 教程中，有关于如何创建自定义组件的详细信息。见这里：[http ://docs.oracle.com/javaee/6/tutorial/doc/glpcb.html](http://docs.oracle.com/javaee/6/tutorial/doc/glpcb.html)

这似乎支持上面 BalusC 的评论， *“......使用 Facelets 标记文件或 Facelets 复合组件，其中 HTML 也可以使用 JSTL 标记或渲染属性动态生成，如果需要，在支持 bean 或支持组件的帮助下。”*

你的旅费可能会改变！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T09:37:48.890

自问题发布以来已经有一段时间了，但有人可能会觉得它很有用，如果我做了一些愚蠢的事情，我欢迎您的更正！我遇到了同样的问题，我通过javascript锻炼解决了它，我使用的线索来自这个链接[https://www.w3schools.com/howto/howto_html_include.asp](https://www.w3schools.com/howto/howto_html_include.asp)，我的servlet是动态生成一个地图标签，它使用servlet过滤器（轮廓）在（web.xml）文件上设置，所以我使用上述链接中的javascript应用了xhtml中的链接，（注意：rtutil.appUrl返回我的JSF应用程序的上下文路径），我应用如下：

```
<div w3-include-html="#{rtutil.appUrl}/contours/map"></div>
        <script type="text/javascript" src="resources/js/rtscript.js"></script>
        <script type="text/javascript">
            includeHTML();
            $(document).ready(function () {
                cityplanmap();
            });
        </script> 
```

# asp.net-mvc - RouteCollection.Ignore 和 RouteCollection.IgnoreRoute 之间的区别？

> ID：11544338
> 
> 赞同：18
> 
> 时间：2012-07-18T14:58:55.603
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, ignoreroute

`RouteCollection.Ignore(url, constraints)`和有什么区别`RouteCollection.IgnoreRoute(url, constraints)`？

### 背景

新的 MVC 项目`IgnoreRoute`在 Global.asax`RegisterRoutes`方法中包含此调用，以跳过路由到 .axd 位置的请求，这些位置在 ASP.NET 系统的其他地方处理。

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 
```

我想为一个项目添加一个额外的被忽略的路由，然后我开始输入新行。之后`routes.I`，Intellisense 会弹出`.Ignore`和`.IgnoreRoute`，听起来都差不多。

根据 MSDN 文档，您可以看到一个是该类的实例方法，`System.Web.Routing.RouteCollection`另一个是该类的扩展方法`System.Web.Mvc.RouteCollectionExtensions`。

*   `RouteCollection.Ignore`：“如果请求 URL 满足指定的约束，则定义不应检查与路由匹配的 URL 模式”（[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd992982.aspx)）。
*   `RouteCollection.IgnoreRoute`：“忽略给定的可用路由列表和约束列表的指定 URL 路由”（[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd470170.aspx)）。

两者都采用路由 URL 模式和一组限制在该 URL 模式上应用路由的约束。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-18T14:58:55.603

在[CodePlex 上的](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/44b53cd4dd84#src%2fSystem.Web.Mvc%2fRouteCollectionExtensions.cs)[源代码`System.Web.Mvc.RouteCollectionExtensions`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/44b53cd4dd84#src%2fSystem.Web.Mvc%2fRouteCollectionExtensions.cs)和在我的本地 GAC 上运行一点[ILSpy 之间](http://wiki.sharpdevelop.net/ILSpy.ashx)`System.Web.Routing.RouteCollection`，似乎没有区别，尽管它们似乎有完全独立的代码来做同样的事情。

### `RouteCollection.IgnoreRoute`（通过[CodePlex 源](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/44b53cd4dd84#src/System.Web.Mvc/RouteCollectionExtensions.cs)）

```
public static void IgnoreRoute(this RouteCollection routes, string url, object constraints) {
    if (routes == null) {
        throw new ArgumentNullException("routes");
    }
    if (url == null) {
        throw new ArgumentNullException("url");
    }

    IgnoreRouteInternal route = new IgnoreRouteInternal(url) {
        Constraints = new RouteValueDictionary(constraints)
    };

    routes.Add(route);
} 
```

### `RouteCollection.Ignore`（通过 ILSpy 反编译）

```
public void Ignore(string url, object constraints) {
    if (url == null) {
        throw new ArgumentNullException("url");
    }
    RouteCollection.IgnoreRouteInternal item = new RouteCollection.IgnoreRouteInternal(url) {
        Constraints = new RouteValueDictionary(constraints)
    };
    base.Add(item);
} 
```

### 差异

唯一真正的区别是位置的明显区别，一个是`RouteCollection`类本身的实例方法，一个是该类的扩展方法。在考虑了来自实例与扩展执行的代码差异（例如对扩展实例进行重要的空检查）之后，它们看起来是相同的。

在它们的核心，它们都使用完全相同的`StopRoutingHandler`类。两者都有自己的密封`IgnoreRouteInternal`类版本，但这些版本在代码上是相同的。

```
private sealed class IgnoreRouteInternal : Route {
    public IgnoreRouteInternal(string url)
        : base(url, new StopRoutingHandler()) {
    }
    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary routeValues) {
        return null;
    }
} 
```

# orchardcms - Orchard CMS：如何为仪表板中创建的部分应用模板？

> ID：11544341
> 
> 赞同：2
> 
> 时间：2012-07-18T14:58:57.913
> 
> 标签：orchardcms

我在仪表板中创建了一个包含一个内容部分的内容类型，我想为此内容部分创建一个模板。

但我只看到这部分的领域的形状，而不是部分本身。是否可以为仪表板创建的部件创建模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:38:38.727

对的，这是可能的。动态类型的形状和代码定义的类型之间没有区别。

但是，如果要覆盖形状，则首先需要一个形状。如果该部件是从管理仪表板构建的，它不会为自己发出形状，只会为其字段发出形状。您可能应该使用代码编写适当的部分。

# actionscript-3 - 相对于另一个影片剪辑定位一个影片剪辑

> ID：11544343
> 
> 赞同：0
> 
> 时间：2012-07-18T14:59:03.137
> 
> 标签：actionscript-3, flash

我在舞台上有两个电影剪辑，我要做的是相对于另一个 mc 的左侧定位第二个 mc（第一个的宽度是 24px，而第二个是 151px）

我认为做到这一点的方法是给第二个 mc 第一个的 x，然后从第二个 mc x 中减去宽度，但它似乎不起作用。as3如何计算mc的x定位？它是从mc的中心出来还是以某种方式使用原点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:36:55.573

当您创建影片剪辑时，会在该过程中创建一个注册点，此类型的所有转换都是从该注册点引用的。

如果您在 Flash 环境而不是代码中创建影片剪辑，您可以在创建影片剪辑时选择在哪个位置创建此点。有一个方形网格，您可以选择它。我通常喜欢使用左上角，所以当你这样做时：

`moveclipA.x = movieclipB.x - movieclipA.width`

然后你会得到它正好定位在左边的movieclipB旁边。

你的电影剪辑是如何定位的？它们是相互叠加的吗？如果是这样，我怀疑您的注册点位于中心。为了解决这个问题，您可以将它向左移动的距离乘以 2

# python - 更新 PyQt 小部件

> ID：11544344
> 
> 赞同：2
> 
> 时间：2012-07-18T14:59:14.780
> 
> 标签：python, matplotlib, pyqt

我有一个 Python 程序来使用自定义 matplotlib 小部件绘制一个简单的图形。我的代码如下：

```
import sys
from GUI import *
import random
import matplotlib.pyplot as plt

class GUIForm(QtGui.QDialog):

    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self,parent)
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)

        QtCore.QObject.connect(self.ui.pushButton,
                               QtCore.SIGNAL('clicked()'), self.PlotFunc)

    def PlotFunc(self):
        randValList = random.sample(range(0, 10), 10)
        print(randValList)
        self.ui.PlotWidget.canvas.ax.clear()
        self.ui.PlotWidget.canvas.ax.plot(randValList)

    def callFunc(self):
        myapp.PlotFunc()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = GUIForm()
    myapp.show()
    sys.exit(app.exec_()) 
```

当我运行程序时，我可以看到 GUI，但是当我单击按钮时，绘图不显示线条。空图可见。但是，如果我这样做

```
def __init__(self, parent=None):
            QtGui.QWidget.__init__(self,parent)
            self.ui = Ui_Dialog()
            self.ui.setupUi(self)

            QtCore.QObject.connect(self.ui.pushButton,
                                   QtCore.SIGNAL('clicked()'), self.PlotFunc)
            self.ui.PlotWidget.canvas.ax.plot(randValList) 
```

或者

```
if __name__ == "__main__":
        app = QtGui.QApplication(sys.argv)
        myapp = GUIForm()
        myapp.show()
        self.PlotFunc()
        sys.exit(app.exec_()) 
```

程序绘制图形。所以我猜它与`sys.exit(app.exec_())`但不知道如何解决这个问题有关。任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T15:02:44.330

无论如何，如果您在 PlotFunc 的末尾添加这一行，它会起作用吗？

```
self.ui.PlotWidget.canvas.draw() 
```

# django - 在 AJAX 时使用 django 序列化程序到 json，但在响应中使用模板标签

> ID：11544348
> 
> 赞同：1
> 
> 时间：2012-07-18T14:59:37.723
> 
> 标签：django

我有一个模型表，我在 AJAX 操作上将其序列化为 JSON。

现在在客户端，我的模型结构为 JSON，但我很想在已发送的数据上使用 django 模板标签。

例如，假设我的 JSON 模型中有一个日期参数。django 序列化程序将对其进行序列化，我无法在客户端控制它，因为它已经被“编译”了。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:25:05.380

If you want to format the data first, then send a rendered template fragment as your Ajax response, rather than JSON.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:21:09.667

在客户端，您可以使用一些基于 javascript 的模板引擎，例如[mustache](https://github.com/janl/mustache.js#readme)。

```
/* For example */
var json_data = {
    name: "Joe",
    amount: 10.55
};

var template = "{{name}} spends {{amount}}";
$('#some-div').html(Mustache.render(template, json_data)); 
```

[在 django 模板上，如果没有这个 gist](https://gist.github.com/1313862)`{{ stuff }}`提供的非常方便的`{% verbatim %}`模板标签，就很难逃脱。

另一种方法是：使用静态文件作为客户端模板并通过 AJAX 调用获取它们。

# json - Spring surf javascript 支持的 webscript 和 JSON 对象

> ID：11544351
> 
> 赞同：1
> 
> 时间：2012-07-18T14:59:42.983
> 
> 标签：json, spring, alfresco, web-scripting, alfresco-share

我真的需要帮助。在过去的 2 或 3 个小时里，我试图简单地在 freemarker 中列出一个带有 javascript 支持的 webscript 的 JSON 对象，但没有运气。

让我们将我的脚本命名为 x，所以：

x.get.js

```
function main(){
    //model.data = {'name':'Test Object','size':100};
    model.data={
        "2012": {
            "A": {
                "a": "on",
                "b": "off",
                "list": [
                    1,
                    2,
                    3,
                    4
                ]
            }
        },
        "2013": {
            "B": {
                "c": "on",
                "d": "off"
            }
        }
    };

   logger.log(jsonUtils.toJSONString(model.data));
}

main(); 
```

x.get.html.ftl

```
<#assign keys = data?keys>
<#list keys as tag>
   ${jsonUtils.encodeJSONString(tag)}<#if tag_has_next>,</#if>
</#list> 
```

当我尝试仅使用第一个 model.data（已注释掉）时，它工作正常，并且记录器写出完整的 JSON，我在呈现的 HTML 中得到“名称，大小”。

但是，当我这样尝试时，我在呈现的 HTML 中什么也得不到，并且记录器会说一些奇怪的事情：

```
 {"2012":"org.mozilla.javascript.UniqueTag@1a31e0a: NOT_FOUND","2013":"org.mozilla.javascript.UniqueTag@1a31e0a: NOT_FOUND"} 
```

所以呢？这个 JSON 也是有效的，所以我错过了一些对话或神秘的功能或什么？

谢谢您的帮助

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T09:14:17.487

通常你应该使用 js 中的正常对象/值填充你的模型，并在你的 ftl 模板 x.get.json.ftl 中生成 json

# sql - 如何为 FTP 任务调试或设置断点到 SSIS 包

> ID：11544354
> 
> 赞同：2
> 
> 时间：2012-07-18T14:59:52.640
> 
> 标签：sql, ssis

我有一个部署在服务器上的 SSIS 包，现在我需要调试它`SSIS package`

所以我已经在我的本地机器上下载了它，但是

> 我无法在任何步骤上设置断点:(

也无法编译或运行为什么会出现这样的错误

```
Error : Failed to decrypt protected XML node "DTS:Property" with 
error 0x8009000B "Key 
not valid for use in specified state.". 
You may not be authorized to access this   information. This error occurs when there  
is a cryptographic error. Verify that the 
correct key is available.   C:\Users\Job1.dtsx  1   1 
```

包保护级别设置为：EncryptSensitiveWithUserKey

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:42:20.500

您收到此错误是因为您不是保存/部署包的用户。如果包是通过使用用户密钥保存 sesative 来加密的，那么只有该用户才能正确运行或调试包。您需要更改包保护级别以不保存敏感，然后重新构建它。接下来，您将需要重新输入敏感数据，例如 FTP 凭据等，然后将包保护级别更改为使用密码加密敏感。然后，您将能够调试该包。

如果您部署到 MSDB，那么选择依赖服务器存储进行加密总是一个好主意。如果你这样做，那么当你从包存储中拉取包时，它会使用你的用户密钥自动加密，你可以轻松地设置适当的保护级别

# c++ - COUNTING 对相交和弦的数量

> ID：11544355
> 
> 赞同：0
> 
> 时间：2012-07-18T14:59:53.137
> 
> 标签：c++, algorithm, tree, red-black-tree

考虑`N`一个圆圈中的和弦，每个和弦都由它的端点决定。描述一种`O(nlogn)`确定在圆内相交的弦对数的解决方案。

*假设：没有两个和弦共享一个端点。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:45:41.720

存在一个通用的线段相交算法，它在 O(nlogn) 中完成这项工作。
这可以在您的情况下使用，因为两个弦不能在圆的外部相交。
以下链接包含算法：
[http ://www.cs.princeton.edu/~chazelle/pubs/IntersectLineSegments.pdf](http://www.cs.princeton.edu/~chazelle/pubs/IntersectLineSegments.pdf)

PS
它需要基本的计算几何知识（线扫描、范围树）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T15:20:40.640

在我的头顶上，按极角对和弦端点进行排序（这是 O(n log n) 部分）。然后通读排序列表（即 O(n)）——如果两个相邻的端点属于同一个弦，则它没有交点。如果列表中的两个相邻条目属于不同的和弦，则可能存在交集，具体取决于这两个和弦的其他端点所在的位置 - 例如，如果和弦 A 在其排序顺序中具有端点 A1 和 A2，并且类似地，和弦 B 具有 B1和B2，在列表中找到B2-A1不是交集，因为B1在前，A2在后。但是，B1-A2 将是一个交叉点。

另请参阅 biziclop 的评论以获取另一种更精心构建的解决方案。

# c# - 一个非常常见的 C# 模式，它打破了一个非常基本的 OOP 原则

> ID：11544356
> 
> 赞同：14
> 
> 时间：2012-07-18T14:59:57.693
> 
> 标签：c#, oop, encapsulation, solid-principles, design-principles

这是一个非常简单的问题，我仍然很不安：

为什么现在广泛接受一个类通过访问器方法返回对其私有成员的引用？这不是完全破坏了封装原则吗？如果可以，那为什么不把会员公开！？

```
public class EncapsulationViolator
{
  private object abuseMe;

  public object AbuseMe 
  {
    get { return abuseMe; }
  }
} 
```

**编辑**我正在考虑的情况是这样的

```
EncapsulationViolator ev = new EncapsulationViolator();

object o = ev.AbuseMe;

o.SetValue(newValue); 
```

现在 ev 的状态通过传递性发生了变化，因为它的成员 abuseMe 的状态发生了变化。

在 DDD 的上下文中，如果对象是聚合根，这是不行的。我引用

> 只允许外部对象保存对根的引用。对内部成员的瞬态引用只能在单个操作中使用。因为根控制着访问，所以它不会被内部结构的改变弄得措手不及。
> 
> [*[领域驱动设计](http://books.google.co.uk/books?id=xColAAPGubgC&pg=PA129&lpg=PA129&dq=Allow%20external%20objects%20to%20hold%20references%20to%20the%20root%20only.%20Transient%20references%20to%20internal%20members%20can%20be%20passed%20out%20for%20use%20within%20a%20single%20operation%20only.%20Because%20the%20root%20controls%20access,%20it%20cannot%20be%20blindsided%20by%20changes%20to%20the%20internals&source=bl&ots=qaSAamWM1r&sig=hL6f0FYklIMTT5cV0RkW6b3Ri-k&hl=en&sa=X&ei=1CGGU8T4PMS9OaaEgIgK&ved=0CEoQ6AEwAw#v=onepage&q=Allow%20external%20objects%20to%20hold%20references%20to%20the%20root%20only.%20Transient%20references%20to%20internal%20members%20can%20be%20passed%20out%20for%20use%20within%20a%20single%20operation%20only.%20Because%20the%20root%20controls%20access,%20it%20cannot%20be%20blindsided%20by%20changes%20to%20the%20internals&f=false)*，埃里克·埃文斯]

... 二传手 schmetters ...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T15:10:17.097

您将 C++ 术语“引用”与 C#*按值*（引用的）传递对象的事实混为一谈。

在这种情况下，getter 的调用者`AbuseMe`不能*换出*私有字段`abuseMe`。因此，没有违反封装。

```
EncapsulationViolator x = new EncapsulationViolator();
object y = x.AbuseMe;
y = 17; // I have not changed x.AbuseMe

Debug.Assert(y != x.AbuseMe); // Passes! 
```

此外，属性 getter 和 setter 允许对私有字段进行适当的封装，并且在功能上与将它们实现为方法相同（实际上它们由编译器实现为方法）。

返回私有变量*可能会*破坏封装的一种情况是，当您返回对数组的引用时：

```
class X
{
    private int[] amazing = new int[10];

    public int[] Amazing { get { return this.amazing; } }
}

X a = new X();
int[] x = a.Amazing;
int[] y = a.Amazing;

x[2] = 9;
Debug.Assert(x[2] != y[2]); // Fails! 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T15:08:28.723

这取决于成员是什么类型的对象。例如，如果它是一个字符串，那么它是不可变的，因此您无法更改该字符串。

如果是可变对象，可以从类外改变对象的内容，但不能替换对象本身。

如果不能从类外部更改对象，则 getter 应返回对象的不可变版本。

如果你做错了，模式可能会破坏封装，但如果做得正确，封装是完整的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-18T15:04:43.653

我认为它不会破坏封装。类仍然决定返回值的`AbuseMe`来源。它可能来自不同的成员，也可能每次都重新创建或复制。

关键是该类决定它允许用户对该成员做什么（获取/设置或两者以及它们的可见性），它可以执行验证并防止设置无效值，并且用户不需要知道该值在哪里来自。

此外，如果您想向 get/set 方法添加自定义逻辑，您可以这样做而不会破坏与其他程序集的兼容性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T18:36:35.663

IMO - 这里有太多的答案正在推广 getter/setter。Getter/setter 非常适合程序代码，您要么进行一些计算并设置结果，要么获取值并做出决定。

OO 编程中一个众所周知的原则是[Tell don't ask](http://pragprog.com/articles/tell-dont-ask)基本上是说您不应该询问其内部状态的对象来做出决定。

话虽如此，我自己使用访问器/属性。但是，如果可能，我会尽量避免它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T15:11:00.080

getter 和 setter 的重点是专门强制封装。关键是您不直接访问该对象，而是强制它由您定义的函数访问。getter 和 setter 是封装。如果您决定只返回对象，那是您的事，但您不允许在不点击 getter 的情况下直接访问。

阅读： [http ://en.wikipedia.org/wiki/Mutator_method](http://en.wikipedia.org/wiki/Mutator_method)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T15:05:30.627

这只是语法糖。它与 Java 的 getXXX 和 setXXX 方法没有什么不同。

# python - 以 Python 方式转换字典

> ID：11544357
> 
> 赞同：2
> 
> 时间：2012-07-18T15:00:02.170
> 
> 标签：python

我有 2 个字典：

```
dict1 = {'field1':'value1', 'field2':'value2',...... }
dict2 = {'field1':'value1_1', 'field2':'value2_2','field3':'value3_3'} 
```

我希望 dict1 的 field1 和 field2 的值是 dict2 的 field1 和 field2 的值。

所以我希望 dict1 是：`dict1 = {'field1':'value1_1', 'field2':'value2_2'}`，但 dict1 有许多其他键/值对不在 dict2 中，我想保持它们相同。

最pythonic的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:02:12.250

可能是这样的：

```
dict1.update({key : dict2[key] for key in dict1 if key in dict2}) 
```

或者用一个简单的循环：

```
for key in dict1:
    if key in dict2:
        dict1[key] = dict2[key] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:05:21.940

您可以尝试听写理解：

```
dict1 = {key : value for key, value in dict2.iteritems() if key in dict1} 
```

编辑看过 mouad 的回答：

```
dict1 = {key : dict2[key] for key in dict1} 
```

# firefox - CSS 和 JS 的 GZIP 在 Google Chrome 中不起作用，但在 Firefox 中起作用

> ID：11544358
> 
> 赞同：2
> 
> 时间：2012-07-18T15:00:02.297
> 
> 标签：firefox, google-chrome, header, compression, gzip

我最近想出了如何在我将用来为我的 Intranet 应用程序提供服务的 WAMP 服务器上启用 GZIP（或 Deflate）。

但是，在 Google Chrome 中进行测试时，我看到 PHP 文件已压缩，但 Javascript 文件和 CSS 未压缩。Response 标头显示它未压缩，Google Pagespeed 确认了这一点。

另一方面，Firefox 可以毫无问题地接收所有压缩文件。

以下是主要 CSS 文件的标题作为示例：

**谷歌浏览器**

```
Date: Wed, 18 Jul 2012 14:48:43 GMT
Content-Length: 6533
Last-Modified: Wed, 18 Jul 2012 00:42:33 GMT
Server: Apache/2.2.21 (Win64) PHP/5.3.10
ETag: "a00000001509b-1985-4c50ff04b26ef"
Vary: Accept-Encoding
Content-Type: text/css
Accept-Ranges: bytes

200 OK 
```

**火狐**

```
Date: Wed, 18 Jul 2012 14:33:14 GMT
Server: Apache/2.2.21 (Win64) PHP/5.3.10
Last-Modified: Wed, 18 Jul 2012 00:42:33 GMT
Etag: "a00000001509b-1985-4c50ff04b26ef"
Accept-Ranges: bytes
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 1273
Content-Type: text/css

200 OK 
```

这是我的 WAMP 设置、代码的问题，还是只是谷歌浏览器？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:51:46.377

Google chrome 确实支持 JS/CSS gzip。

```
Request URL:http://d1o7y22ifnbryp.cloudfront.net/static/7793/css/all.min.css
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/css,*/*;q=0.1
Accept-Charset:GBK,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:zh-CN,zh;q=0.8
Connection:keep-alive
Host:d1o7y22ifnbryp.cloudfront.net
User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5 
```

响应标头

```
Accept-Ranges:bytes
Cache-Control:max-age=604800
Connection:keep-alive
Content-Encoding:gzip
Content-Length:17933
Content-Type:text/css
Date:Wed, 18 Jul 2012 15:43:46 GMT
ETag:"805dc-19c87-4c4a305735340"
Expires:Wed, 25 Jul 2012 15:43:46 GMT
Last-Modified:Thu, 12 Jul 2012 14:45:57 GMT
Server:Apache/2.2.22 (Amazon)
Vary:Accept-Encoding 
```

我认为问题应该出在apache配置中。

# c - 将值从程序集传递到 C

> ID：11544360
> 
> 赞同：0
> 
> 时间：2012-07-18T15:00:13.950
> 
> 标签：c, gcc, assembly, arm

我想简单地将一个变量从程序集传递给 C 并将 C 传递给程序集。

问题是我不想使用固定内存寻址（即，将值放在特定位置，然后使用指针访问该特定位置）。

我最初以为我可以使用寄存器，但总共只有 16 个！我可能有超过 16 个要传递的值。

所以接下来我能想到的就是将值推入堆栈。但这是否意味着我必须使用内联汇编才能在 C 中访问它？像这样的东西：

```
 asm ( assembler template 
       : output operands                  /* optional */
       : input operands                   /* optional */
       : list of clobbered registers      /* optional */
       ); 
```

还有其他方法可以解决这个问题吗？谁能给我一个非常简单的例子，将一些东西放在堆栈上，然后用 C 代码访问它？

组装菜鸟！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:12:30.677

你能声明一个常规的 C 函数，从 C 调用它，并允许编译器自动处理参数（根据你的本地约定）吗？

如果是这样，您只需使用*实现*该函数`asm`，并直接引用命名的 C 参数列表变量。

例如，*使用 68881 的 fsinx 指令*：

```
float my_fsinx(float angle)
{
    float result;
    asm ("fsinx %1,%0" : "=f" (result) : "f" (angle));
    return result;
} 
```

此示例基于[GCC Extended Asm](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)文档，您应该可以在其中找到更多示例。

* * *

现在扩展，根据评论，通过一个简单的指针和计数来处理可变数量的参数......

```
float my_fsinx_sum(float *angles, int num_angles)
{
    float result, sum;
    int i;
    for (i=0, sum=0; i < num_angles; ++i)
    {
        asm ("fsinx %1,%0" : "=f" (result) : "f" (angles[i]));
        sum += result;
    }
    return sum;
} 
```

不，我不确定你为什么要对一堆角度的正弦求和，但希望你明白这一点。我还没有尝试过，所以可能`angles[i]`需要在 asm 之前将值复制到本地浮点变量中 - 试试看。

* * *

您也可以使用可变参数列表函数，但这有点复杂。如果没有更多关于*你想要完成*什么以及*你已经尝试过什么*的详细信息，我无法猜测哪个更好。

*编辑*——好的，现在我已经看到了你上面的评论，你肯定不想要一个变量参数列表函数：那些仍然有一些在调用站点硬编码的参数。

# c# - Visual Studio 测试机调试器

> ID：11544361
> 
> 赞同：1
> 
> 时间：2012-07-18T15:00:16.460
> 
> 标签：c#, visual-studio-2010, visual-c++

我有一个混合的 C# 和 CLI C++ 项目，它在 Windows XP 测试机器上从 C++ 引发异常。我想知道是否有人知道我可以在测试机器上安装一个轻型工具（没有安装 Visual Studio 本身）来识别异常的位置。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:39:51.983

安装 Windows 调试器。它是免费的，可以在以下网址找到：http: [//msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)

有许多网站和书籍详细介绍了如何使用 Windows 调试器。微软提供以下站点供参考： http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff551063 (v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551063(v=VS.85).aspx)

[http://windbg.info/doc/1-common-cmds.html](http://windbg.info/doc/1-common-cmds.html)有一个常用 WinDbg 命令的列表。

它非常有用，可以安装在测试机器上，并且可以用来读取 minidump，这与 Visual Studio 2008 和更早版本不同。

要随时生成转储，请在测试机器上启动任务管理器，右键单击要从中转储的应用程序，然后选择“创建转储文件”。

如果您的应用程序有转储或小型转储，则可以使用 WinDbg.exe（Windows 调试器）通过命令“!analyze -v”获取堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:07:02.903

不要忘记远程调试器！我觉得这是理想的，假设您可以通过网络连接到您的开发盒。如果开发箱在不同的房间，请使用测试机器上的远程桌面。

[这里的说明](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

[并在此处查看我的答案以及更多提示](https://stackoverflow.com/a/9981190/180326)

# c# - 使用 C# 查找访问我的系统的用户 ID

> ID：11544363
> 
> 赞同：4
> 
> 时间：2012-07-18T15:00:25.010
> 
> 标签：c#, filesystemwatcher

我正在使用 C# 开发一个小型应用程序

*   将作为服务运行
*   将监视（使用 FileSystemWatcher）并记录对某个目录下的文件所做的更改，例如 C:\

我能够实现上述目标，以下是我正在寻找的指针/建议

*   如果有人访问（有或没有管理员权限）我的机器（使用运行命令并将输入作为 \mysystemname\C$ 传递）并在目录下创建/删除/修改文件，那么我应该如何获取用户 ID帐户。例如，如果我使用 System.Environment.UserName，那么它会给出我的用户名。

如果有人可以为我提供指点，是否可以监控上述情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:29:08.600

如果这是跟踪对共享驱动器的远程文件访问，您可能需要查看这个开源项目： http: [//www.codeproject.com/Articles/62357/Monitoring-Access-to-Your-Shared-Files-on -网络](http://www.codeproject.com/Articles/62357/Monitoring-Access-to-Your-Shared-Files-on-Network)

浏览代码我看不到用户名是如何检索的，但该应用程序看起来具有您需要的功能。

# c++ - for 循环中奇怪的 srand 行为；C++

> ID：11544364
> 
> 赞同：2
> 
> 时间：2012-07-18T15:00:30.783
> 
> 标签：c++, srand

只需编写一个程序来洗牌，并根据 RNG 是在 for 循环内部还是外部播种而得到不同的行为；IE。

```
 for(int i = 0; i < 52; i++)
{
  srand(time(0));  
  Card temp = deck[i];
  int toSwap = rand()%52;
  deck[i] = deck[toSwap];
  deck[toSwap] = temp;
} 
```

给出输出

```
Nine of Hearts
Ace of Clubs
Two of Clubs
Three of Clubs
Four of Clubs 
```

等等，但是

```
void DeckOfCards::shuffle()
{
  srand(time(0));  
  for(int i = 0; i < 52; i++)
  {
  Card temp = deck[i];
  int toSwap = rand()%52;
  deck[i] = deck[toSwap];
  deck[toSwap] = temp;
  }
  currentCard =0;
} 
```

导致

```
Ace of Hearts
Queen of Spades
Four of Hearts
Seven of Clubs
Five of Hearts 
```

（正确的功能）。任何人都知道为什么重新播种 RNG 会导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:03:19.673

如果您需要伪随机数，则只需要一次种子。如果您多次调用 srand 并且在时钟种子更改之前执行此操作，那么您将获得相同的值而不是随机值。一开始只播种一次。您可以打开其他程序（winamp 等）以获得更多随机值（您需要减慢程序速度；）或者为随机迭代制作空循环可以修复第一个程序。但是您需要非常大的随机数，例如 20 亿（必须小于 40 亿））

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:04:52.980

由于 time(NULL) 仅每秒更改一次，因此如果 for 循环完成时间不超过一秒，RNG 种子将是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:44:23.023

虽然其他人是完全正确的，你不想在循环中使用 srand(time(0)) 因为你会得到很差的随机性，因为你重复设置相同的种子，你可能希望记住这一点用于调试：如果您需要能够“重播”一个案例，请将种子写入日志文件并允许显式设置种子。否则使用随机数调试应用程序可能会相当棘手......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:53:29.827

您可以改用 boost posix time。

但在所有情况下，如果您只需要调用 srand 两次，则可以使用两个不同的固定值。

或者，我使用此函数以毫秒为单位获取时间

```
 inline long
    getTimeMs ()
    {
      struct timeval start;
      long mtime;

      gettimeofday (&start, NULL);

      mtime = ((start.tv_sec) * 1000 + start.tv_usec / 1000.0) + 0.5;

      return mtime;
    } 
```

问候

# c# - XMLSerializer 没有为 List 类型的属性正确反序列化 XML

> ID：11544365
> 
> 赞同：3
> 
> 时间：2012-07-18T15:00:31.783
> 
> 标签：c#, xml-serialization

我得到一个 XML 类型的数据，比如这个；

```
<Response>
  <Clients>
    <Client>
      <ID>1</ID>
      <Name>John</Name>
      <Age>25</Age>
      <Address>Some address</Address>
    </Client>
    <Client>
      <ID>2</ID>
      <Name>Mark</Name>
      <Age>22</Age>
      <Address>Some address2</Address>
    </Client>
    <Client>
      <ID>3</ID>
      <Name>Phil</Name>
      <Age>30</Age>
      <Address>Some address3</Address>
    </Client>
  </Clients>
</Response> 
```

在 C# 中，我有以下代码：

```
[XmlRoot("Response")]
public class MyClients
{
    [XmlElement("Clients", typeof(MyClient))]
    public List<MyClient> Clients { get; set; }
}

public class MyClient
{
    [XmlElement("ID")]
    public int ID;

    [XmlElement("Name")]
    public string Name;

    [XmlElement("Age")]
    public int Age;

    [XmlElement("Address")]
    public string Address;
} 
```

我尝试获取这些数据，使用

```
public ActionResult GetClients()
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("someUrl");
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    XmlSerializer serializer = new XmlSerializer(typeof(WFMClientsList));
    Stream receiveStream = response.GetResponseStream();
    WFMClientsList clients = (MyClients)serializer.Deserialize(receiveStream);
} 
```

但我没有得到任何回应。

谁能解释如何`List<MyClient>`正确反序列化 XML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:24:31.587

问题是您声明的内容实际上与您的 XML 不匹配。如果您从当前声明中序列化一个对象，您会得到：

```
<?xml version="1.0" encoding="utf-16"?>
<Response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Clients>
    <ID>1</ID>
    <Name>John</Name>
    <Age>25</Age>
    <Address>Some address</Address>
  </Clients>
</Response> 
```

尝试：

```
[XmlRoot("Response")]
public class MyClients
{
    [XmlArray("Clients")]
    [XmlArrayItem("Client")]
    public List<MyClient> Clients { get; set; }
}

[XmlRoot("Client")]
public class MyClient
{
    [XmlElement("ID")]
    public int ID;
    [XmlElement("Name")]
    public string Name;
    [XmlElement("Age")]
    public int Age;
    [XmlElement("Address")]
    public string Address;
} 
```

产生：

```
<?xml version="1.0" encoding="utf-16"?>
<Response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Clients>
    <Client>
      <ID>1</ID>
      <Name>John</Name>
      <Age>25</Age>
      <Address>Some address</Address>
    </Client>
  </Clients>
</Response> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:07:24.847

这是错`XmlSerializer serializer = new XmlSerializer(typeof(WFMClientsList));` 的`XmlSerializer serializer = new XmlSerializer(typeof(MyClients));`

你失去了类的属性`MyClient`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:25:03.207

```
 public static T DeserializeObject<T>(string xml)
        {
            XmlSerializer xs = new XmlSerializer(typeof(T));
            MemoryStream memoryStream = new MemoryStream(StringToUTF8ByteArray(xml));
            XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
            return (T)xs.Deserialize(memoryStream);
        }

private static Byte[] StringToUTF8ByteArray(string pXmlString)
        {
            UTF8Encoding encoding = new UTF8Encoding();
            byte[] byteArray = encoding.GetBytes(pXmlString);
            return byteArray;
        } 
```

# android - android 2.2中的蓝牙连接

> ID：11544366
> 
> 赞同：0
> 
> 时间：2012-07-18T15:00:35.667
> 
> 标签：android, bluetooth

我正在使用 android 2.2，我尝试了以下代码在 android 中发送数据

```
BluetoothDevice device=BluetoothAdapter.getDefaultAdapter().getRemoteDevice(MACID);
Method m=device.getClass.getMethod("createRFcommSocket",new Class[]{int.class};
BluetoothSocket socket=(BluetoothSocket)m.invock(device,1);
socket.connect();
OutputStream os;
os=socket.getOutputStream();
os.write("hai".getBytes());
os.flush();
os.close();
socket.close(); 
```

找到以下错误：

```
ERROR : java.io.IOException:Connection refused 
```

请在这方面帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:03:43.340

你加了这些吗？

```
<uses-permission android:name="android.permission.BLUETOOTH" />

<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

# jsf - 上传完成后 Richfaces 4 文件上传重定向

> ID：11544373
> 
> 赞同：1
> 
> 时间：2012-07-18T15:01:05.710
> 
> 标签：jsf, richfaces, seam

我想在上传单个文件后重定向到另一个页面。源 xhtml 和目标 xhtml 位于同一目录中。我尝试在 fileUploadListenerMethod 中返回一个字符串：

```
public String loadFills(FileUploadEvent event) throws Exception {
  return "treeOrderRequestStatus";
} 
```

但这不会导致重定向。

我也尝试通过 faces-config.xml 完成它：

```
<navigation-rule>
  <from-view-id>/userpages/manualDataLoad.xhtml</from-view-id>
  <navigation-case>
    <from-action>#{manualDataLoader.loadFills}</from-action>
    <to-view-id>/userpages/treeOrderRequestStatus.xhtml</to-view-id>
    <redirect/>
  </navigation-case>
</navigation-rule>

<navigation-rule>
  <from-view-id>/userpages/manualDataLoad.xhtml</from-view-id>
  <navigation-case>
    <from-outcome>treeOrderRequestStatus</from-outcome>
    <to-view-id>/userpages/treeOrderRequestStatus.xhtml</to-view-id>
    <redirect/>
  </navigation-case>
</navigation-rule> 
```

这些都不起作用。

最后，我尝试执行由 uploadcomplete 事件触发的链接：

```
<rich:fileUpload fileUploadListener="#{manualDataLoader.loadFills}"
    maxFilesQuantity="1" createTempFiles="false" uploadLabel="Import Fill Data"
    addLabel="Select Fill File">
  <a4j:ajax event="uploadcomplete" execute="redirect"/>
</rich:fileUpload>

<h:link id="redirect" outcome="treeOrderRequestStatus"/> 
```

仍然没有骰子。在每一次尝试中，我都尝试了多种不同的指定目标页面的组合（例如：包括 .xhtml 扩展名，包括目录，...），但尚未成功。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:47:27.663

执行属性标签是定义将在请求中发送到服务器的组件。您可以尝试使用标签组件中的`uploadcomplete`JavaScript 方法单击链接/按钮：`<rich:fileUpload>`

```
<rich:fileUpload fileUploadListener="#{manualDataLoader.loadFills}"
    maxFilesQuantity="1" createTempFiles="false" uploadLabel="Import Fill Data"
    addLabel="Select Fill File">
  <a4j:ajax event="uploadcomplete" onbegin="document.getElementById('yourFormName:redirect').click();" />
</rich:fileUpload>

<h:commandButton id="redirect" action="treeOrderRequestStatus" style="display: none"
    tabindex="-1" /> 
```

此外，最好删除 faces-config.xml 中的这些导航规则，以保持文件中没有不必要的配置。

# iphone - IOS 6屏幕旋转不使用情节提要

> ID：11544382
> 
> 赞同：7
> 
> 时间：2012-07-18T15:01:45.197
> 
> 标签：iphone, ios, rotation

任何尝试最新 iOS 6 测试版（版本 2 或 3）的人都有相同的自动旋转不工作体验？

我没有使用故事板，而是纯粹的导航控制：

```
self.navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.window addSubview:navController.view]; 
```

并且有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: ](UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

- (NSUInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

但是 IOS 根本没有支持，在 3GS/4S 和 4.3,5.0.5.1 模拟器上与所有以前的 iOS 都可以正常工作，但 iOS 6 似乎只是有问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T15:04:24.043

iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用的`shouldAutorotateToInterfaceOrientation:`方法。`UIViewController`取而代之的是，您应该使用`supportedInterfaceOrientations`and`shouldAutorotate`方法。

[在这里阅读更多](http://9to5mac.com/2012/06/25/apple-pushes-ios-6-0-update-to-devs/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-02T06:40:30.287

代替`[self.window addSubview:navController.view];`

插入`self.window.rootViewController = navController;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:10:02.007

解决方案是：由于我的应用程序试图从 4.3+ 开始支持，我必须使用导航控制器来进行每个视图切换。

通过 ios6 似乎代表导航控制器，我必须定义自己的导航控制器，并设置条件和功能来改变其旋转行为。

当我加载视图时，我会执行 ([self.navigationCONtroller setEnableLandscape:(BOOL)false])。这样，您就拥有了导航控制器的完整控制器。

注意：我确实尝试过覆盖导航控制器方法，但似乎只是被忽略了。（这也只发生在 ios 6.0 上），还没有测试 6.1，所以不确定它是否得到修复（如果有，请告诉我）

# c# - 线程安全的通用字段

> ID：11544384
> 
> 赞同：5
> 
> 时间：2012-07-18T15:01:50.017
> 
> 标签：c#, .net, thread-safety, lockless

我有一个通用字段和一个封装它的属性：

```
T item;

public T Item
{
    get { return item; }
    set { item = value; }
} 
```

问题是这个属性可以从一个线程写入并同时从多个线程读取。如果`T`是`struct`, or `long`, 读者可能会得到部分旧值和部分新值的结果。我怎样才能防止这种情况？

我尝试使用`volatile`，但这是不可能的：

> volatile 字段不能是“T”类型。

由于这是我已经编写的代码的一个更简单的例子，它使用`ConcurrentQueue<T>`，所以我也考虑在这里使用它：

```
ConcurrentQueue<T> item;

public T Item
{
    get
    {
        T result;
        item.TryPeek(out result);
        return item;
    }

    set
    {
        item.TryEnqueue(value);
        T ignored;
        item.TryDequeue(out ignored);
    }
} 
```

这会起作用，但在我看来，对于应该简单的事情来说，它是过于复杂的解决方案。

性能很重要，因此，如果可能，应避免锁定。

如果 a`set`与 同时发生`get`，我不在乎`get`返回旧值还是新值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:13:02.340

我最初考虑`Interlocked`过，但我认为它在这里实际上并没有帮助，因为`T`它不限于引用类型。（如果是的话，原子性已经很好了。）

老实说，我会*从*锁定开始 - 然后衡量性能。如果锁是非竞争的，它应该是非常便宜的。只有当你证明最简单的解决方案太慢时，才考虑变得更深奥。

基本上，由于此处不受约束的通用性，您对这很简单的期望失败了 - 最有效的实现将根据类型而有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:20:04.410

这完全取决于类型，`T`.

如果您能够设置`class`约束，那么在这种特殊情况下 `T`您不需要做*任何事情。*[引用分配是原子的](https://stackoverflow.com/a/2193445/50776)。这意味着您不能对基础变量进行部分或损坏的写入。

阅读也是如此。您将无法阅读部分写入的参考。

如果`T`是一个结构，则只能以原子方式读取/分配以下结构（根据 C# 规范的第 12.5 节，强调我的，也证明了上述陈述）：

> **以下数据类型的读取和写入应是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。**此外，具有上一个列表中的基础类型的枚举类型的读取和写入也应该是原子的。其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不必是原子的。除了为此目的设计的库函数之外，不能保证原子读-修改-写，例如在递增或递减的情况下。

因此，如果您所做的只是尝试读/写，并且满足上述条件之一，那么您不必做任何事情（但这意味着您还必须对 type 施加约束`T`）。

如果您不能保证对 的约束`T`，那么您将不得不求助于类似[`lock`语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx)来同步访问（对于前面提到的读取和写入）。

如果您发现使用该`lock`语句（实际上是[`Monitor`class](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)）会降低性能，那么您可以使用[`SpinLock`structure](http://msdn.microsoft.com/en-us/library/system.threading.spinlock.aspx)，因为它旨在帮助在`Monitor`过于繁重的地方：

```
T item;

SpinLock sl = new SpinLock();

public T Item
{
    get 
    { 
        bool lockTaken = false;

        try
        {
            sl.Enter(ref lockTaken);
            return item; 
        }
        finally
        {
            if (lockTaken) sl.Exit();
        }
    }
    set 
    {
        bool lockTaken = false;

        try
        {
            sl.Enter(ref lockTaken);
            item = value;
        }
        finally
        {
            if (lockTaken) sl.Exit();
        }
    }
} 
```

但是，请注意，[如果等待时间过长，](http://msdn.microsoft.com/en-us/library/ms228964.aspx)[的性能`SpinLock`可能会下降并且与类相同`Monitor`](http://msdn.microsoft.com/en-us/library/ms228964.aspx)；当然，鉴于您使用的是简单的分配/读取，它不应该花费*太*长时间（除非您使用的结构由于复制语义而体积*庞大）。*

当然，您应该自己测试一下您预测将使用此类的情况，并查看哪种方法最适合您（`lock`或`SpinLock`结构）。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-18T15:13:18.923

为什么你需要保护它呢？

更改变量的引用实例是原子操作。因此，您阅读的`get`内容不会无效。您无法判断它是旧实例还是新实例`set`同时运行。但除此之外，你应该没问题。

CLI 规范的第 I 部分第 12.6.6 节指出：“当对一个位置的所有写访问大小相同时，符合标准的 CLI 应保证对不大于本机字大小的正确对齐的内存位置的读写访问是原子的。”

并且由于您的变量是引用类型，因此它始终具有本机单词的大小。因此，如果您执行以下操作，您的结果永远不会无效：

```
Private T _item;
public T Item
{
    get
    {
        return _item;
    }

    set
    {
        _item = value
    }
} 
```

例如，如果您想坚持通用的东西并将其用于一切。该方法是使用载体助手类。它大大降低了性能，但它将是无锁的。

```
Public Foo
{
    Private Carrier<T> 
    {
        T _item
    }

    Private Carrier<T> _item;
    public T Item
    {
        get
        {
            Dim Carrier<T> carrier = _item;
            return carrier.item;
        }

set
    {
        Dim Carrier<T> carrier = new Carrier<T>();
        carrier.item = value;
        _item = carrier;
    }
} 
```

}

通过这种方式，您可以确保始终使用引用类型并且您的访问是无锁的。缺点是所有集合操作都会产生垃圾。

# svn - 在netbeans中，如何在项目视图中选择所有当前打开的文件

> ID：11544386
> 
> 赞同：1
> 
> 时间：2012-07-18T15:01:55.277
> 
> 标签：svn, netbeans, ide, workflow

如何选择我当前在项目视图中打开的文件，而无需浏览项目树并单独按 ctrl+单击它们。

编辑多个文件后，我想使用 SVN 插件对它们进行比较和提交。为此，我目前在项目树中搜索我需要的所有文件，然后右键单击并选择 diff。因为几乎总是我打开的文件是我想要比较的，所以在项目视图中自动选择它们并保存拖网会很好。

如果我错过了一个文件，这尤其令人讨厌，因为我似乎无法找到一种方法将其添加到差异选项卡而不重做整个过程。

将 SVN 与 netbeans 一起使用的解决方案或更好的方法会很棒:)

非常感谢，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:03.950

在我看来，更好的方法如下：

*   从 Subversion 签出/更新您的项目，以确保您有新的源文件
*   打开并更改您想要的任何文件并保存更改
*   右键单击`Source packages`，然后`Subversion->Commit`，它将提交您对源代码所做的所有更改

希望有帮助。

# .net - 具有自动更新功能的自定义安装程序

> ID：11544388
> 
> 赞同：2
> 
> 时间：2012-07-18T15:02:02.717
> 
> 标签：.net, windows-installer

.Net 中是否有可用作具有自动更新功能的自定义安装程序（在安装、注册表项等期间应具有自定义表单）的选项。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:42:12.460

另一个快速轻松地创建 MSI 软件包的免费替代方案是[Advanced Installer](http://www.advancedinstaller.com)，即“*简单*”项目类型，其他的需要商业许可证。它有一个 VS 插件，安装时会自动集成，适用于 VS 2010 和 2012，还支持自动命令行构建。

它还有一个对话框编辑器，但这需要您注册应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:21:23.217

查看Microsoft 站点上的[Visual Studio 安装程序部署。](http://msdn.microsoft.com/en-us/library/2kt85ked)这是一个很大的部分，有很多文章。

如果您想修改安装界面，请查看此部分：[自定义 Windows 安装程序包](http://msdn.microsoft.com/en-us/library/k2he6h0w)

# php - 有时，服务器无法更改语言环境

> ID：11544391
> 
> 赞同：0
> 
> 时间：2012-07-18T15:02:06.850
> 
> 标签：php, apache, locale

我有一个 PHP 脚本问题，有时会在 Apache 错误日志中触发奇怪的警告：

```
bash: warning: setlocale: LC_ALL: cannot change locale (fr_FR.utf8)
bash: warning: setlocale: LC_ALL: cannot change locale (fr_FR.utf8)
bash: warning: setlocale: LC_ALL: cannot change locale (fr_FR.utf8)
bash: warning: setlocale: LC_ALL: cannot change locale (fr_FR.utf8) 
```

以下是生成此警告的代码。（用于配置gettext）。

```
 $lang='fr_FR.utf8';
    $filename = 'default';
    putenv("LC_ALL=$lang");
    setlocale(LC_ALL, $lang);
    bindtextdomain($filename, './config/locale');
    bind_textdomain_codeset($filename, "UTF-8");
    textdomain($filename); 
```

奇怪的是警告没有系统地出现。如果我重新启动 Apache，它会在几分钟内不会出现（即服务数百个请求而没有任何警告），然后它会逐渐开始出现。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:12:29.663

`setlocale`不是线程安全的（参见[What does thread safe mean in a PHP context?。](https://stackoverflow.com/questions/8334123/what-does-thread-safe-mean-in-php-context)这就是 Zend 框架实现自己的 Locale 系统的原因。

# apache-flex - 如何阻止 spinnerList 在 flash builder 中重复？

> ID：11544393
> 
> 赞同：0
> 
> 时间：2012-07-18T15:02:10.253
> 
> 标签：apache-flex, flash-builder, spinner, mxml, repeat

我有一个不断滚动的微调器列表如何阻止它重复数据？

```
<s:SpinnerListContainer id="branchSpinner" width="100%" >
    <s:SpinnerList id="branchData" width="100%" height="100%" labelField="data" selectedIndex="1" > 
        <s:ArrayList >
            <fx:Object id="b1" data="branch 1"></fx:Object>
            <fx:Object id="b2" data="branch 2"></fx:Object>
            <fx:Object id="b3" data="branch 3"></fx:Object>
            <fx:Object id="b4" data="branch 4"></fx:Object>
            <fx:Object id="b5" data="branch 5"></fx:Object>
        </s:ArrayList>
    </s:SpinnerList>
</s:SpinnerListContainer> 
```

我寻找了诸如重复数据之类的属性，但我找不到它。任何帮助将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:07:47.000

我假设您想要删除革命，列表头部和尾部匹配并且可以再次滚动。

如果是这样，这可以通过将**wrapElements**属性更改为 false 来实现。*（使用 Flex 4.6 SDK 时）。*

例如：

```
<s:SpinnerList change="myEvent(event)" labelField="data" selectedIndex="2" wrapElements="false">
    <s:ArrayList>
        <fx:Object data="10"></fx:Object>
        <fx:Object data="12"></fx:Object>
        <fx:Object data="16"></fx:Object>
        <fx:Object data="20"></fx:Object>
        <fx:Object data="22"></fx:Object>
        <fx:Object data="24"></fx:Object>
        <fx:Object data="28"></fx:Object>
        <fx:Object data="32"></fx:Object>
        <fx:Object data="36"></fx:Object>
        <fx:Object data="40"></fx:Object>
    </s:ArrayList>
</s:SpinnerList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:11:48.967

SpinnerList 的全部目的是不断重复。如果您不希望它重复，请使用常规[List](http://help.adobe.com/en_US/flex/using/WSc2368ca491e3ff923c946c5112135c8ee9e-7fff.html)。常规列表确实具有移动优化的皮肤。

# django - 用户管理器方法 create() 和 create_user()

> ID：11544398
> 
> 赞同：13
> 
> 时间：2012-07-18T15:02:19.033
> 
> 标签：django, django-users, django-managers

我遇到了对象管理器`create()`方法的一些可疑行为。如果您使用此方法，则创建对象似乎`User`不需要`password`字段。`User`结果你得到`User`了空白`password`。如果您使用`create_user`方法并且未指定`password`它会`User`使用不可用的密码创建（通过 to `set_unusable_password()`）。

我不确定为什么当您尝试在没有的情况下创建用户时`create()`方法不会- 在文档中指定此字段是必需的。方法/文档有问题吗？`raise exception``password``create()`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-18T15:43:42.150

这正是用户模型具有自定义管理器的原因，该管理器具有[`UserManager.create_user()`](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L149)创建用户的方法。`QuerySet.create()`在实例上使用该方法有两个问题`User`：

1.  如果您运行管理命令`python manage.py sql`，请注意`auth_user`架构：

    ```
    CREATE TABLE "auth_user" (
        ...
        "password" varchar(128) NOT NULL,
        ...
    ) 
    ```

    在 SQL 中，空字符串 ,`''`不等于`NULL`, 即`ISNULL('') != TRUE`.

2.  `QuerySet.create()`并且`QuerySet.update()` **不触发模型验证**。模型验证仅在`ModelForm`实例调用`Model.full_clean()`实例方法时发生。

    `QuerySet`在直接使用 API 的上下文中引发验证错误在Django 中毫无意义。这就是为什么你可以做类似的事情，`User.objects.create(username='foo', password='')`即使`CharField().validate(value='', None)`会`ValidationError`为一个空白字符串引发 a 。

由于上述原因，您应该推迟使用`User.objects.create()`并依赖`User.objects.create_user()`模型自定义管理器提供的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:24:38.203

查看 django 的源用户模型，有一个自定义管理器，片段：

```
class UserManager(models.Manager):
    # ...   
    def create_user(self, username, email=None, password=None):
        """
        Creates and saves a User with the given username, email and password.
        """
        now = timezone.now()
        if not username:
            raise ValueError('The given username must be set')
        email = UserManager.normalize_email(email)
        user = self.model(username=username, email=email,
                          is_staff=False, is_active=True, is_superuser=False,
                          last_login=now, date_joined=now)

        user.set_password(password)
        user.save(using=self._db)
        return user 
```

# forms - 使用 ASP.Net 在表单身份验证中确定登录的用户电子邮件和 ID

> ID：11544401
> 
> 赞同：1
> 
> 时间：2012-07-18T15:02:20.720
> 
> 标签：forms, authentication

我已经在我的应用程序中实现了登录和创建用户向导。但是，当我登录系统时，默认情况下会显示窗口身份，而不是我在登录表单中登录的凭据。

知道为什么会发生这种情况。登录并创建用户似乎工作正常。

谢谢您的帮助。夜叉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:06:29.610

尝试查看这篇文章 - [http://msdn.microsoft.com/en-us/library/ms178344.aspx](http://msdn.microsoft.com/en-us/library/ms178344.aspx)

或者这应该工作......

```
 MembershipUser membershipUser = Membership.GetUser();
 if (membershipUser != null)
 {
   string loggedinuser = Membership.GetUser().ToString();
   yourdiv.InnerHtml = loggedinuser;
 } 
```

将上述内容与***System.Web.Security 一起使用；***这将启用会员资格

还要确保您的 web.config 使用的是表单，而不是 Windows 身份验证。

# c# - ASP.Net Membership Change Password 方法不显示

> ID：11544403
> 
> 赞同：1
> 
> 时间：2012-07-18T15:02:39.690
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership

我已经实现了一个自定义成员资格提供程序。我的代码示例如下所示

```
public class CustomMembershipProvider : MembershipProvider
{
   public override bool ChangePassword(string username, string oldPassword, string newPassword)
   {
      //logic for changing password
   }

   public override bool ValidateUser(string username, string password)
   {
      //logic for validating user credentials
   }
} 
```

`web.config`然后我通过使用在文件中注册了上述自定义成员资格

```
<membership defaultProvider="CustomMembershipProvider">
 <providers>
  <clear/>
   <add name ="CustomMembershipProvider" type="MyApplication.CustomMembershipProvider"/>
 </providers>
</membership> 
```

现在，当我想对用户进行身份验证时，我可以调用

```
System.Web.Security.Membership.ValidateUser(username, password); 
```

这行得通。但是，当我想调用更改密码的方法时，我尝试调用：

```
System.Web.Security.Membership.ChangePassword(username, oldPassword, newPassword); 
```

它给了我智能感知和编译错误，`System.Web.Security.Membership`说不包含`ChangePassword`.

我如何将我的`ChangePassword`方法链接为可调用的，`System.Web.Security.Membership`或者我是否以错误的方式解决了这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:08:38.230

确保您的会员资格提供者定义明确：

```
<membership defaultProvider="CustomMembershipProvider">
  <providers>
    <clear />
    <add connectionStringName="ConnString" enablePasswordReset="true" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" name="CustomMembershipProvider" type="MyMembershipProvider" />
  </providers>
</membership> 
```

我认为那`MyApplication.MyMembershipProvider`是您的自定义 Membership 课程。我会重命名为其他`web.config`名称，以便以后更容易阅读，所以当你看到它时你知道它是什么类。

但是，我相信您的问题的答案是，**您需要利用 Membership 中的 Provider 类**。由于您定义了一个自定义提供程序，您将使用它来执行一些自定义更改。

```
var didChange = System.Web.Security.Membership.Provider.ChangePassword("", "", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-29T07:45:57.927

如果 WebSecurity.ChangePassword 中的任何参数为空，则不会调用 Custom Memembership provider Change Password

# css - internet explorer 7 放置一个不存在的地方 Magento 形式

> ID：11544404
> 
> 赞同：0
> 
> 时间：2012-07-18T15:02:42.090
> 
> 标签：css, internet-explorer, html-lists, internet-explorer-7

除了 IE7 之外，所有浏览器都尊重我的代码，它放置了`</ul>`我的代码中不存在的一个，以我的表单结构完成。

下面的代码是在IE9的源代码中生成的：

```
<div class="fieldBairro_end">
                    <li class="fields">
                        <div class="field">
                            <label for="bairro_end" id="complemento_end" class="required"><em>*</em>Bairro</label>
                            <div class="input-box">
                                <input type="text" name="bairro_end" value="" title="bairro_end" id="bairro_end" class="input-text required-entry" />
                            </div>
                        </div>
                    </li>

                    </div> 
```

IE7中相同的代码部分

```
<DIV class=fieldBairro_end></DIV></DIV></LI>
<LI class=fields>
<DIV class=field><LABEL class=required id=complemento_end for=bairro_end><EM>*</EM>Bairro</LABEL> 
<DIV class=input-box><INPUT class="input-text required-entry" id=bairro_end title=bairro_end name=bairro_end> </DIV></DIV>
</LI></UL></DIV> 
```

这是一个名为的标签，但在 IE9 中，这个标签出现在它下面的一行中

虽然我正在尝试制作 JQuery 或 JavaScript 来解决它，但感谢您的帮助

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:21:32.853

使用没有 UL 标签的 LI 标签不是有效的标记。重复问题：

[使用 <li> 而不包含 <ul> 标签危险吗？](https://stackoverflow.com/questions/2031725/is-using-li-without-enclosing-ul-tags-dangerous)

您最好更改布局以使用常规 DIV 标签而不是 LI。

# c# - SDL_Event 和事件类型

> ID：11544406
> 
> 赞同：0
> 
> 时间：2012-07-18T15:02:52.167
> 
> 标签：c#, sdl

不是最好的标题，但是，SDL_Event 与所有 SDL 事件（如 SDL_QuitEvent、SDL_ActiveEvent 等）之间的关系是什么？我正在为 C# 使用 SDL 绑定，但在处理它们时无法确定类型系统使用什么类型；它们不是 SDL_Event 的子类。我应该只使用`object`，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T17:19:42.867

老问题，但仅适用于长尾搜索：

an`SDL_Event`只是结构（`SDL_QuitEvent`等）的一大集合。根据`SDL_Event::type`，您设置或查看不同的子结构及其数据。

* * *

来自 SDL1.2 中的**SDL_events.h**：

```
typedef union SDL_Event {
    Uint8 type;
    SDL_ActiveEvent active;
    SDL_KeyboardEvent key;
    SDL_MouseMotionEvent motion;
    SDL_MouseButtonEvent button;
    .
    .
    .
    SDL_SysWMEvent syswm;
} SDL_Event; 
```

* * *

来自**SDL2**中的 SDL_events.h ：

```
typedef union SDL_Event
{
    Uint32 type;                    /**< Event type, shared with all events */
    SDL_CommonEvent common;         /**< Common event data */
    SDL_WindowEvent window;         /**< Window event data */
    SDL_KeyboardEvent key;          /**< Keyboard event data */
    .
    .
    .
} SDL_Event; 
```

# c - `gethostbyname` 如何在不要求调用者释放资源的情况下返回 `struct hostent *`？

> ID：11544411
> 
> 赞同：10
> 
> 时间：2012-07-18T15:03:11.313
> 
> 标签：c, network-programming

```
struct hostent *gethostbyname(const char *name) 
```

请注意，hostent.h_addr_list 是一个具有不同长度的字段。

该函数如何`gethostbyname`实现返回指向结构的指针但不需要调用者释放资源？

R. Stevens 的著名著作 Unix Network Programming Vol 1 中使用的所有示例都不包含释放这些返回指针的代码，我认为这些不是无知的。来自 MSDN 的一个示例也做了相同[的使用示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:07:49.123

您链接到的`man`页面包含答案：

> 当非 NULL 时，返回值可能指向静态数据，见下面的注释。

稍后：

> 函数 gethostbyname() 和 gethostbyaddr() 可能会返回指向静态数据的指针，这些指针可能会被以后的调用覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:20:36.507

假设一个实现想要处理任意大的地址列表，它可以做这样的事情：

```
struct hostent *gethostbyname(const char *name) {
    static struct hostent *results = 0;
    static size_t resultsize = 0;
    size_t count = get_count_of_addresses(name)
    if (count > resultsize) {
        struct hostent *tmp = realloc(results, N * count + M);
        if (tmp) {
            results = tmp;
            resultsize = count;
        } else {
            // handle error, I can't remember what the docs say
        }
    }
    fill_in_hostent(results, name);
    return results;
}; 
```

或者，sockets 库可以`results`在退出时释放一些东西（例如安装`atexit`处理程序），以避免调试工具报告内存泄漏。

我忽略了地址数量在调整结构大小和填充结构之间可能发生变化的可能性——实际上，您会取回 DNS 结果，然后对其进行处理，因此这是不可能的。我将其保留为两个单独的调用，以避免为 DNS 结果引入伪代码表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:08:45.647

它*可能*指向静态内存。如果要保留多个结果，则需要对其进行深层复制。不是浅拷贝，因为该结构本身包含指针。

注意线程安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T15:04:27.677

它可能指向静态内存，即每次调用都使用相同的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-07T03:26:33.820

MS 告诉我们[https://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)

```
The memory for the hostent structure returned by the 
gethostbyname function is allocated internally by the 
Winsock DLL from thread local storage. Only a single 
hostent structure is allocated and used, no matter how 
many times the gethostbyaddr or gethostbyname functions 
are called on the thread 
```

所以它在 Windows 上是线程安全的，但是......

它已从 POSIX 中删除，man7.org 告诉我们，在 Linux 上，主机名语言环境不是线程安全的。[http://man7.org/linux/man-pages/man3/gethostbyname.3.html](http://man7.org/linux/man-pages/man3/gethostbyname.3.html)

..MS 告诉我们

```
The gethostbyname function has been deprecated 
by the introduction of the getaddrinfo function 
```

不幸的是，替换（getaddrinfo，大多数平台上的线程安全）不是套接字 1.x 的一部分，并且在旧平台上不可用。

# c++ - char * 放入 cout 时有垃圾

> ID：11544415
> 
> 赞同：1
> 
> 时间：2012-07-18T15:03:15.887
> 
> 标签：c++

获取 char 指针并将其放入输出的简单程序。

```
char * get()
{
    char ss [256];
    sprintf (ss,"%d",1);
    return ss;
}

int _tmain(int argc, _TCHAR* argv[])
{
    char *f = get();
    cout<<f;
    char d[50] ;
    cin>> d;
} 
```

我的输出只有垃圾。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:04:51.533

函数正在返回局部变量的地址。该代码具有未定义的行为并给出无法预料的结果。

`ss`驻留在堆栈上，函数`get()`返回一个指向它的指针。

```
char * get()
{
} // Life time of ss ends here 
```

改用[std::string](http://www.cplusplus.com/reference/string/string/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:06:21.830

当 get() 函数返回时，局部变量超出范围。即，它的值变得不确定。

要解决，您可以使用...

```
static char ss[255];
// or  
char *ss = (char *)calloc(1,255);
// or with C++
char *ss = new char[255]; 
```

等等……

你决定权衡。使用静态变量，每次调用 get() 都可以更改缓冲区的内容。但是使用涉及分配的方法，您的调用者需要释放内存并知道是使用 free() 还是 delete。有些人通过在调用时向函数提供缓冲区来解决问题，比如......

```
void get(char *buf, int limit);
// or
void get(char *buf, int& limitActual); 
```

然后主要的是，在处理字符串时，在 C/C++（甚至 std::string）中，您正在处理必须以某种方式管理的内存。使用字符串时，要非常小心自动变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:06:56.380

您的数组 ss[] 仅存在于 get() 的范围内。
因此，一旦您离开函数，您从 get() 返回的指向它的指针就无效了。

# android - 在 Android 中更新通知的文本（取决于之前的值）

> ID：11544423
> 
> 赞同：2
> 
> 时间：2012-07-18T15:03:27.630
> 
> 标签：android, notifications

我正在实现一个接收消息并在您收到消息时通知您的应用程序。我想实现一个类似Whatsapp的通知系统：如果我只收到一条消息，消息的标题会显示在通知中；如果那时我收到另一个，通知必须说我有两条消息，依此类推。

我想获取通知的先前 contentText 以便能够知道用户到目前为止收到了多少条消息，然后将现在收到的消息数量添加到其中，但我找不到如何获取它。

我在 android-developers 中发现了这一点：“您可以使用对象成员字段修改每个属性（上下文和通知标题和文本除外）。” 这是否意味着我无法获取 contentText？如果我不能得到它，我应该将数字保存在静态类或类似的东西中吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T08:40:27.847

我可能会迟到回答您的问题，但是您可以通过以下方式将其与一种解决方法集成：

(1) 在您的应用程序中，您需要一个变量来计算“未读消息”。我建议您集成一个扩展的类`android.app.Application`。这有助于您在全局范围内处理变量，例如在多个活动中。这是一个例子：

```
import android.app.Application;

public class DataModelApplication extends Application {

    // model
    private static int numUnreadMessages;
    // you could place more global data here, e.g. a List which contains all the messages

    public int getNumUnreadMessages() {
        return numUnreadMessages;
    }

    public void setNumUnreadMessages(int numUnreadMessages) {
        this.numUnreadMessages = numUnreadMessages;
    }

    ...
} 
```

不要忘记将应用程序添加到您的`AndroidManifest`：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name="name.of.your.package.DataModelApplication" >

    <activity ... />
    ...
</application> 
```

(2) 在您`Activity`或您每次收到新消息时使用 setter`Fragment`递增，例如：`numUnreadMessages`

```
// within a Fragment you need to call activity.getApplication()
DataModelApplication application = (DataModelApplication) getApplication();
int numUnreadMessages = application.getNumUnreadMessages();
application.setNumUnreadMessages(++numUnreadMessages); 
```

(3) 现在您可以使用未读消息的数量更新您的通知，例如

```
// within your service or method where you create your notification
Intent mainActivityIntent = new Intent(this, MainActivity.class);
PendingIntent pIntent = PendingIntent.getActivity(this, 0, mainActivityIntent, 0);

DataModelApplication application = (DataModelApplication) getApplication();
int numMessages = application.getNumUnreadMessages();

// build the notification
NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

// Sets an ID for the notification, so it can be updated
int notifyID = 1;
String contentTitle = "You have " + numMessages + " unread message(s)";
String contentText = "Click here to read messages";

Builder notifyBuilder = new NotificationCompat.Builder(this)
    .setContentTitle(contentTitle)
    .setContentText(contentText)
    .setContentIntent(pIntent)
    .setAutoCancel(true)
    .setNumber(numMessages) // optional you could display the number of messages this way
    .setSmallIcon(R.drawable.ic_launcher);

notificationManager.notify(notifyID, notifyBuilder.build()); 
```

(4) 每次用户阅读消息或用户通过单击该通知打开 Activity 时，不要忘记重置或减少 numUnreadMessages 的值。它与步骤 (2) 类似，但将值递减或将其设置为`0`.

希望能帮助你/任何人开始:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T15:16:54.957

您可以使用与旧通知相同的通知 id的**notify方法**

> public void notify (String tag, int id, Notification notification) 自：API 级别 5 发布要在状态栏中显示的通知。如果您的应用程序已经发布了具有相同标签和 id 的通知并且尚未取消，它将被更新的信息替换。

# c# - 将背景“固定”到控件底部

> ID：11544425
> 
> 赞同：1
> 
> 时间：2012-07-18T15:03:39.063
> 
> 标签：c#, wpf, background, tiles

我有一个`UserControl`使用以下代码设置的重复图像背景：

```
<UserControl.Background>
    <ImageBrush ImageSource="Resources/image.jpg" Viewport="0,0,32,32" ViewportUnits="Absolute" TileMode="Tile" Stretch="None" AlignmentX="Left" AlignmentY="Top" />
</UserControl.Background> 
```

它工作正常。但是，问题在于平铺图像来自控件的顶部，因此如果垂直调整控件的大小，背景的新可见部分似乎会从控件的底部出来。

我希望图像从底部到顶部而不是从顶部到底部平铺，以便在调整控件大小时，新可见的背景来自顶部，而不是底部

我怎样才能做到这一点？我试过设置`AlignmentY`，`Bottom`但它没有改变任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:26:25.030

好的，这可能不是你要找的，但我发现你的问题很有趣。

我能够水平地做到这一点（新图像从左侧出现，而不是从右侧出现）。
通过在您的用户控件上将“FlowDirection”设置为“RightToLeft”，它将执行您需要的水平操作。我不知道这是否可能垂直。我还在研究中......

```
 <Canvas FlowDirection="RightToLeft">
        <Canvas.Background>
            <ImageBrush ImageSource="Resources/image.jpg" Viewport="0,0,32,32" ViewportUnits="Absolute" TileMode="Tile" Stretch="None" AlignmentX="Left" AlignmentY="Bottom" />
        </Canvas.Background>
    </Canvas> 
```

这是我的 UserControl 的第一个元素，但这个“FlowDirection”可以放置在用户控件根目录的基本元素（通常是网格）上。但是，使用画布，您可以确保此“流向”不会影响用户控件中的任何其他组件。

希望这能为您指明一个好的方向。

- 编辑 -

大声笑我不敢相信这有效，但它确实有效！基于我的第一个工作，并使用转换器作为画布的边距：

转换器：

```
 [ValueConversion(typeof(double), typeof(Thickness))]
    public class SizeToInverseMarginConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (targetType != typeof(Thickness))
                throw new InvalidOperationException("The target must be of type 'Thickness'");

            double vNewVal = -5000 + (double)value;
            return new Thickness(0, vNewVal, 0, 0);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    } 
```

然后用户控件的内容：

```
<UserControl.Resources>
    <My:SizeToInverseMarginConverter x:Key="s2m" />
</UserControl.Resources>
<Grid x:Name="MainGrid">
    <Canvas FlowDirection="RightToLeft" Margin="{Binding Path=ActualHeight, ElementName=MainGrid, Converter={StaticResource s2m}}">
        <Canvas.Background>
            <ImageBrush ImageSource="Resources/image.jpg" Viewport="0,0,32,32" ViewportUnits="Absolute" TileMode="Tile" Stretch="None" AlignmentX="Left" AlignmentY="Bottom" />
        </Canvas.Background>
    </Canvas>
</Grid> 
```

# python - Python，rrdtool 创建 - 时间戳，时区

> ID：11544426
> 
> 赞同：1
> 
> 时间：2012-07-18T15:03:39.017
> 
> 标签：python, timezone, ubuntu-10.04, epoch, rrdtool

屋里的大家好！

我的 python 脚本创建了一个 rrd 文件。create_rrd 和更新函数以值“interval”和“starttime”（当前纪元）启动。使用函数时的纪元时间是正确的。但是：对 rrd 文件执行 rrdtool 提取，最后一个时间戳是每次 2 小时前。我用 ENV 'TZ' 调用 subprocess.Popen 的技巧不起作用。所以所有 rrd 文件更新都会失败。有谁知道为什么，我做错了什么？

最好的问候斯特凡

```
 def create_rrd(self, interval, starttime):
    interval = str(interval)
    interval_mins = float(interval) / 60
    heartbeat = str(int(interval) * 2)
    ds_string = 'DS:test:GAUGE:%s:U:U' % heartbeat
    rra_1 = 'RRA:AVERAGE:0.5:1:' + str(int(4000 / interval_mins))
    rra_2 = 'RRA:AVERAGE:0.5:' +  str(int(30 / interval_mins)) + ':800'
    rra_3 = 'RRA:AVERAGE:0.5:' + str(int(120 / interval_mins)) + ':800'
    rra_4 = 'RRA:AVERAGE:0.5:' + str(int(1440 / interval_mins)) + ':800'
    cmd_create = [
        '/omd/versions/default/bin/rrdtool',
        'create',
        self.rrd_name,
        '-b',
        str(starttime-10),
        '--step',
        interval,
        ds_string,
        rra_1,
        rra_2,
        rra_3 ,
        rra_4,
    ]
    print cmd_create
    cmd = Popen(cmd_create, stdout=PIPE, stderr=PIPE, env={'LANG':'de_DE@euro','TZ':'Europe/Berlin'})
    cmd_output = cmd.communicate()
    self.errorprint(cmd_output)
    #p = Popen(["date"], env={'TZ':'America/New_York'})
    #p.wait()
    #p = Popen(["date"], env={'TZ':'Europe/Berlin'})
    #p.wait()

def update(self, starttime, *values):
    values_args = ''.join([str(value) + ':' for value in values])[:-1]
    values_final = '%s:%s' % (str(starttime), values_args)
    cmd_update = [
                '/omd/versions/default/bin/rrdtool',
                'update',
                self.rrd_name,
                values_final,
    ]
    print cmd_update
    cmd = Popen(cmd_update, stdout=PIPE, stderr=PIPE, env={'LANG':'de_DE@euro','TZ':'Europe/Berlin'})
    cmd_output = cmd.communicate()
    self.errorprint(cmd_output 
```

以下是用于创建和更新的 Popen 的命令列表：

```
rrd create
['/omd/versions/default/bin/rrdtool', 'create', '/tmp/test1/CPU_utilization_util.rrd', '-b', '1342630417', '--step', '300', 'DS:test:GAUGE:600:U:U', 'RRA:AVERAGE:0.5:1:800', 'RRA:AVERAGE:0.5:6:800', 'RRA:AVERAGE:0.5:24:800', 'RRA:AVERAGE:0.5:288:800']
rrd update
['/omd/versions/default/bin/rrdtool', 'update', '/tmp/test1/CPU_utilization_util.rrd', '1342630427:8.37649086759'] 
```

# python - 表单不是由模板生成的

> ID：11544429
> 
> 赞同：1
> 
> 时间：2012-07-18T15:03:46.473
> 
> 标签：python, django

我从不久前开始研究 Django 表单。我一直让表单由他们自己生成，只需编写：

```
{{ test_form.as_p  }} 
```

成功了。

然后我决定解决这个问题来定制这个模板，但由于某种原因，这条线：

```
{{ form.subject }} 
```

不显示表格。我误解了[文档](https://docs.djangoproject.com/en/dev/topics/forms/)吗？我还检查了生成的 HTML，它有点简单地跳过了 {{ form.suject }}

这是代码：

模板：

```
<form action="/contact/" method="post">
{{ form.non_field_errors }}
<div class="fieldWrapper">
    {{ form.subject.errors }}
    <label for="id_subject">Email subject:</label>
    {{ form.subject }}
</div>
<div class="fieldWrapper">
    {{ form.message.errors }}
    <label for="id_message">Your message:</label>
    {{ form.message }}
</div>
<div class="fieldWrapper">
    {{ form.sender.errors }}
    <label for="id_sender">Your email address:</label>
    {{ form.sender }}
</div>
<p><input type="submit" value="Send message" /></p> 
```

和相关的视图：

```
def contact(request):

if request.method == 'POST':
    form = contact_form(data=request.POST)
    if form.is_valid():
        subject = form.cleaned_data['subject']
        message = form.cleaned_data['message']
        sender = form.cleaned_data['sender']
        recipents = ['grit.erlum@gmail.com']
        send_mail(subject, message, sender, recipents)
        print 'mail sent'
return render_to_response('contact.html', {'contact_form' : contact_form}, context_instance=RequestContext(request)) 
```

当然还有表单类：

```
class contact_form(forms.Form):

subject = forms.CharField(max_length=100)
message = forms.CharField(max_length=1000, widget=forms.Textarea)
sender = forms.EmailField() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:13:08.983

在您的 render_to_response 中，只需更改：

{'contact_form'：contact_form}

到

{'form'：contact_form}

或您的模板，将 {{ form.xxx }} 更改为 {{ contact_form.xxx }}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:16:27.297

您的视图没有`contact_form`定义变量，但您将其传递给`render_to_response`. 您还需要创建表单的未绑定版本并将其传递给`render_to_response`喜欢：

```
def contact(request):
    if request.method == 'POST':
        form = contact_form(data=request.POST)
        if form.is_valid():
            ...
    else:
        form = contact_form() # An unbound form
        return render_to_response('contact.html', {'form' : form}, context_instance=RequestContext(request)) 
```

# c# - 部分类一致性

> ID：11544430
> 
> 赞同：0
> 
> 时间：2012-07-18T15:03:50.953
> 
> 标签：c#, class, partial

我正在使用 MVC 3 C# 应用程序。我**将模型扩展到部分类，以包含一些数据注释......**

我担心的是我有数百个表，并且该项目处于开发阶段，这意味着**如果另一个开发人员甚至我自己更改了相应的模型，我手动创建的一些部分类很容易变得过时**..（数据类型、命名等)

**那么有没有办法保证我的 Partial 类与 EF 模型正确匹配？**

另一件值得赞赏的事情是类似于**部分类生成器，它将选择模型上的相应数据类型和名称并自动创建部分类..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:04:50.037

这更多是一个设计问题，如果您的扩展类在底层数据模型更改时被破坏，那么我不相信这是对部分类的正确使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:07:28.530

这很简单，如果底层模型发生变化，您的单元测试应该会失败，并且您的系统很可能无论如何都无法编译。

我不明白您对部分类生成器的期望，它如何知道您的系统所需的行为？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T12:53:03.110

我的方法是使用 ViewModels。所以我不直接将我的 EF 模型映射到我的视图上，我使用那些 ViewModel 并将所有**数据注释**属性放在那里（例如`DisplayName`）。

# cakephp - CakePHP Foreach 查找循环问题

> ID：11544432
> 
> 赞同：1
> 
> 时间：2012-07-18T15:03:59.567
> 
> 标签：cakephp, loops

现在，我已经间隔了我得到的唯一正确的输出，这个数字是一个 step_id，但它并没有给我所有的 ID。就像我说的那样，当我的步骤表中的 user_id 是正确的 id 类型时，我希望调试能够在屏幕上打印/回显所有 step_ids。

调试输出如下：

app/controllers/steps_controller.php (line 109)

1323

Notice (8): Undefined offset: 1 [APP/controllers/steps_controller.php, line 109]app/controllers/steps_controller.php (line 109)

注意（8）：未定义偏移量：2 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：3 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：4 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：5 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：6 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：7 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

注意（8）：未定义偏移量：8 [APP/controllers/steps_controller.php，第 109 行]app/controllers/steps_controller.php（第 109 行）

更新 ：

我不确定这是否是一个错误，但在我的 foreach 循环中我有'Step.user_id'，然后 find 命令无论如何都指向 Step 表，所以我改变了它！但它仍然不起作用。

有了下面的新代码，它或多或少是相同的代码。当步骤表中的用户 ID 与仅具有正确角色的用户 ID 匹配时，我使用调试命令打印所有步骤 ID，例如 >3。然而调试只给了我一个返回的结果！然后是“未定义的偏移量：”1 到 8。

关于我做错了什么的任何想法？请？？

```
 foreach($getUserIds as $k=>$data) {
            //$StepConditions = ;

            $getStepIds = $this->Step->find('all', array('conditions' => array('user_id' => $getUserIds[$k]['User']['id'])));

            debug($getStepIds[$k]['Step']['id']);

        } 
```

* * *

我在这里搜索过，但我似乎找不到任何人发布过这个问题，所以我希望你能帮忙！

好的，我函数的主要目的是从我的数据库中获取所有“步骤”，但前提是 user_id > 3。

我对 CakePHP 很新，所以我对这些 find 命令不太擅长 let。现在，就目前而言，如果我调试 $getSteps，它只会给我 0,1 和 2 个编号的数组。主题中的所有信息都是正确的，但我知道用户组完成了三个以上的步骤。

然后我调试，$getUserIds，它给了我我想要的所有用户 ID，但并不是所有这些用户都完成了所有步骤，我只说了三个。

任何希望都是最受欢迎的！

非常感谢格伦

```
function Breakdown($id = null) {
    $getUserIds = $this->Step->User->find(
        'all',
        array(
            'conditions' => array('role_id' => 2)
             )
        );

    foreach ($getUserIds as $k=>$data) {

        $getSteps = $this->Step->find(
                'all', 
                array(
                      'conditions' => array('Step.user_id' => $getUserIds[$k]['User']['id'])
                     ) 
        );
        debug($getSteps);

    }

die();
} //End of Breakdown() function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:47:21.410

您可以在条件中包含“>”以获取 user_id 大于 3 的所有步骤：

```
$getSteps = $this->Step->find('all', array('conditions' => array('Step.user_id >' => 3)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T09:02:37.373

正如您在问题中所说：“我的功能的主要目的是从我的数据库中获取所有'步骤'，但前提是 user_id > 3”

这是代码示例：

```
function Breakdown($id = null) {
    $this->User->bindModel(array(
                                 'hasMany' => array( 
                                                    'Step' => array( 
                                                                    'className' => 'Step',
                                                                    'foreignKey' => 'user_id'
                                                                   )
                                                   )
                                 )
                           ); //dynamically bind model
    $userWithSteps = $this->User->find('all', array('conditions' => array('User.role_id' => 2)));

    }
pr(userWithSteps );
die();
} //End of artistsBreakdown() function 
```

它已经完成了。您不需要使用 foreach 循环。请询问它是否不适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:16:55.203

没关系，

我已经解决了我的问题！我认为用户被分配到每个步骤，但他们只被分配到项目，因此它不起作用。

我要做的是创建一个新表并为每个用户建立每个步骤的链接。

非常感谢你们在这方面给我的所有帮助和支持！

格伦·柯蒂斯。

# .net - 如何在 .NET 中使用 printdocument 前进到新页面？

> ID：11544436
> 
> 赞同：0
> 
> 时间：2012-07-18T15:04:16.383
> 
> 标签：.net, delphi-prism, printdocument, oxygene

> **可能重复：**
> [Hasmorepages PrintPageEventArgs 属性究竟做了什么？](https://stackoverflow.com/questions/11544989/what-does-hasmorepages-printpageeventargs-property-do-exactly)

我想在不离开打印事件的情况下将打印推进到新页面。

到目前为止，我发现你不能，你必须离开打印事件。然后，再次调用它以获得新页面。

如果这是真的，是否有一种解决方法，您可以告诉打印机或打印文档在新页面上开始打印而不必离开打印事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:24:39.493

不。正如您在[其他相关问题](https://stackoverflow.com/q/11544989/62576)中看到的那样，正确的方法是将`PrintPageEventArgs.HasMorePages`属性设置为`True`，然后在再次调用事件时开始下一页。

# java - 使用蜡染光栅化器将其转换为 PNG/JPEG 时拉伸 SVG 图像？

> ID：11544446
> 
> 赞同：3
> 
> 时间：2012-07-18T15:04:44.883
> 
> 标签：java, svg, png, jpeg, batik

我目前正在尝试使用 batik rasterizer 库将一些 .svg 图像渲染为 .png/.jpg 图像。

如果我尝试在其纵横比内转换图像，一切正常，但是当我尝试更改纵横比时（假设矢量图像是二次的，例如 32x32，我想将其拉伸到 64x32），它给了我一个输出大小为 64x32 像素的图像，矢量在图像中间绘制为 32x32 区域。这是我正在使用的代码：

```
PNGTranscoder transcoder = new PNGTranscoder();

transcoder.addTranscodingHint(PNGTranscoder.KEY_WIDTH, width); //64px
transcoder.addTranscodingHint(PNGTranscoder.KEY_HEIGHT, height); //32px 
```

另外，我想使用转码提示拉伸图像直到它的宽度为 128 像素，与它的高度无关`PNGTranscoder.KEY_MAXWIDTH`，但是转码器只是不会将图像缩放到这个宽度。

我究竟做错了什么？

# postgresql - postgres 的 nls_date_format

> ID：11544456
> 
> 赞同：2
> 
> 时间：2012-07-18T15:05:04.647
> 
> 标签：postgresql

我们正在尝试将价值数十年的 Oracle 代码移植到 Postgres。

我们的 Oracle 代码设置 NLS_DATE_FORMAT = 'mm/dd/yy'，这具有很好的效果，即每当日期列出现在 select 语句中时，它都会自动格式化为“mm/dd/yy”。

在 Postgres 中我能找到的最接近的是 SET DATESTYLE TO SQL,US; 但这会导致返回日期字段，如“07/17/2012 16:41:42.109852 EDT”。

是的，我可以修改数百个 SQL 语句中的每一个以使用 to_char() 或其他类型转换，但是 Postgres 真的没有这种简单的能力来自定义日期的默认输出格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:50:39.590

不，PostgreSQL 没有这样的设置。

依赖 Oracle 中的 NLS_DATE_FORMAT（因此隐式数据转换）是一个糟糕的选择。所以抓住机会，让你的 SQL 代码更可靠。

# ruby - 如何从 SystemStackError 中获取回溯：堆栈级别太深？

> ID：11544460
> 
> 赞同：50
> 
> 时间：2012-07-18T15:05:13.617
> 
> 标签：ruby

在编写 ruby​​ 代码时，我经常很难调试无限递归。有没有办法从 a 中获取回溯`SystemStackError`以找出无限循环到底发生在哪里？

## 例子

给定一些方法`foo`，它们在循环`bar`中`baz`相互调用：

```
def foo
  bar
end

def bar
  baz
end

def baz
  foo
end

foo 
```

当我运行此代码时，我只会收到消息`test.rb:6: stack level too deep (SystemStackError)`。至少获取堆栈的最后 100 行会很有用，所以我可以立即看到这是一个 和 之间的循环，`foo`如下所示：`bar``baz`

```
test.rb:6: stack level too deep (SystemStackError)
  test.rb:2:in `foo'
  test.rb:10:in `baz'
  test.rb:6:in `bar'
  test.rb:2:in `foo'
  test.rb:10:in `baz'
  test.rb:6:in `bar'
  test.rb:2:in `foo'
  [...] 
```

有没有办法做到这一点？

**编辑：**

正如您从下面的答案中看到的那样，Rubinius 可以做到。不幸的是，一些[rubinius 错误](http://github.com/rubinius/rubinius/issues/1692)阻止我将它与我想调试的软件一起使用。所以准确地说，问题是：

**如何使用 MRI（默认 ruby​​）1.9 获得回溯？**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-02-05T18:52:40.287

稍后发现此问题的人的另一种方法...一个[出色的要点](https://gist.github.com/jbgo/4493822)提供了有关在控制台中启用跟踪功能并将所有函数调用打印到文件的说明。刚刚在 1.9.3-p194 上测试过，效果很好。

包括这里，以防有一天主旨消失：

```
$enable_tracing = false
$trace_out = open('trace.txt', 'w')

set_trace_func proc { |event, file, line, id, binding, classname|
  if $enable_tracing && event == 'call'
    $trace_out.puts "#{file}:#{line} #{classname}##{id}"
  end
}

$enable_tracing = true
a_method_that_causes_infinite_recursion_in_a_not_obvious_way() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-13T15:03:42.147

这是我在调试 ruby​​/rails 时不时遇到的一个有点令人烦恼的问题。我刚刚发现了一种可行的技术，可以在堆栈崩溃系统堆栈并且真正的回溯丢失或乱码之前检测堆栈超出范围。基本模式是：

```
raise "crash me" if caller.length > 500 
```

提高 500 直到它不会过早触发，并且您将很好地跟踪您不断增长的堆栈问题。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-18T15:08:37.643

这里：

```
begin
  foo
rescue SystemStackError
  puts $!
  puts caller[0..100]
end 
```

该方法`Kernel#caller`将堆栈回溯作为数组返回，因此这将打印回溯中的前 0 到 100 个条目。因为`caller`可以随时调用（并用于一些非常奇怪的事情）即使 Ruby 不打印 SystemStackErrors 的回溯，您仍然可以获得回溯。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-23T17:47:32.960

结合来自多个答案的建议，当您的调用堆栈太深时，这将引发错误（带有堆栈跟踪）。这将减慢所有方法调用，因此您应该尽量将其放置在您认为无限循环发生的位置附近。

```
set_trace_func proc {
  |event, file, line, id, binding, classname| 
  if event == "call"  && caller_locations.length > 500
    fail "stack level too deep"
  end
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-08-28T20:42:47.663

如果你碰巧使用了 pry，这实际上会让你闯入太深的方法调用链。

```
set_trace_func proc { |event, file, line, id, proc_binding, classname|
  if !$pried && proc_binding && proc_binding.eval( "caller.size" ) > 200
    $pried = true
    proc_binding.pry
  end
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-18T23:14:44.670

您可以使用 Ruby 1.8 获得这种堆栈跟踪。如果 1.9 样式语法（例如`{foo: 42}`）的存在是唯一的问题，那么编译[Ruby 1.8 head](https://rvm.io//rubies/installing/)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-08-05T14:13:15.007

显然这被跟踪为[功能 6216](https://bugs.ruby-lang.org/issues/6216)并在 Ruby 2.2 中修复。

```
$ ruby system-stack-error.rb
system-stack-error.rb:6:in `bar': stack level too deep (SystemStackError)
        from system-stack-error.rb:2:in `foo'
        from system-stack-error.rb:10:in `baz'
        from system-stack-error.rb:6:in `bar'
        from system-stack-error.rb:2:in `foo'
        from system-stack-error.rb:10:in `baz'
        from system-stack-error.rb:6:in `bar'
        from system-stack-error.rb:2:in `foo'
        from system-stack-error.rb:10:in `baz'
         ... 10067 levels...
        from system-stack-error.rb:10:in `baz'
        from system-stack-error.rb:6:in `bar'
        from system-stack-error.rb:2:in `foo'
        from system-stack-error.rb:13:in `<main>' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-01T16:50:40.677

我在这里尝试了很多东西，但找不到递归在哪里（我使用的是 Ruby 2.0）。

然后，我尝试了“愚蠢的事情”。我在终端中运行了问题代码（在我的例子中是单元测试），然后`Ctrl-C`当我认为攻击性测试正在运行时按下（几个`puts`调用有帮助）。果然，我得到了完整的回溯：）

在 2013 年的 Macbook Pro 上，我有整整 3 或 4 秒的时间来响应。

# windows - 如何每 2 分钟更新一次 Windows 注册表？

> ID：11544466
> 
> 赞同：1
> 
> 时间：2012-07-18T15:05:36.040
> 
> 标签：windows, vbscript, registry

我正在 VBA 中编写一个脚本，它将监视注册表值，如果它更改脚本将覆盖它。到目前为止，我编写了一个脚本来检查注册表中的值并将其更新为给定值。但我的问题是如何每 2 分钟或值更改时更新注册表？请帮忙 ！！！

```
On Error Resume Next
HKEY_CURRENT_USER = &H80000001
strComputer = "."
Set objReg = GetObject("winmgmts:\\" & strComputer & "\root\default:StdRegProv")
strKeyPath = "Control Panel\Desktop"
ValueName = "ScreenSaveActive"
    objReg.GetStringValue HKEY_CURRENT_USER, strKeyPath, ValueName, strValue
    objReg.CreateKey HKEY_CURRENT_USER, strKeyPath
If IsNull(strValue) Then
    Wscript.Echo "The value is either Null or could not be found in the registry."
Else
    Wscript.Echo "Value: ", strValue
    strValue = "1"
    objReg.SetStringValue HKEY_CURRENT_USER, strKeyPath, ValueName, strValue
    Wscript.Echo "Value after change ", strValue
End If 
```

问候， 厄尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:41:43.697

只需将您的代码放在一个循环中，并告诉它在每次循环之间休眠 2 分钟，所以这样的事情可能会起作用：

```
Do While 1

    ...
    [your code here]
    ...

    WScript.Sleep(120 * 1000) ' 120 seconds in 2 minutes and it expects milliseconds
Loop 
```

但是，如果该值为 null，那么继续进行可能没有任何意义，因此如果是这种情况，可能值得`Exit Do`在 about it is null 之后添加一行`Echo`以停止循环。

但请注意，您使用的是 VBscript，而不是 VBA（它们相似，但仍然是不同的语言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:52:19.693

以下示例在 Excel VBA 中完成。将以下代码放入`ThisWorkbook`：

> ```
> Option Explicit 
> ```

```
Public TimerActive As Boolean
Public TimerInterval As String ' e.g. "00:02:00"
Public TimerProcedure As String
Private NextSchedule As Variant

Private Sub Workbook_BeforeClose(Cancel As Boolean)
    TimerActive = False
    Application.OnTime EarliestTime:=NextSchedule, _
                       Procedure:=TimerProcedure, Schedule:=False
End Sub

Private Sub Workbook_Open()
    TimerProcedure = "Module1.myTimerProc"
    TimerInterval = "00:00:10"
    TimerActive = True
    ScheduleTimer TimerInterval, TimerProcedure
End Sub

Public Sub ScheduleTimer(nextInterval As String, procName As String)
    NextSchedule = Now + TimeValue(nextInterval)
    Application.OnTime NextSchedule, procName
End Sub 
```

然后，按照以下过程创建 Module1：

> ```
> Option Explicit 
> ```

```
Public Sub myTimerProc()
    With ThisWorkbook
        If .TimerActive Then
            Debug.Print Now & " Hi!"
            .ScheduleTimer .TimerInterval, .TimerProcedure
        End If
    End With
End Sub 
```

这会在调试（立即）窗口中每 10 秒打印一次消息“Hi！”。您可以轻松地修改示例以写入注册表 - 只需在此模块中创建另一个过程并`Debug.Print`通过调用您编写的过程替换语句。计时器在您打开 excel 文件后立即激活，并在您关闭它之前停用。

**请**注意****

 ***   您需要事件中的`TimerActive`标志以及语句 in以允许 Excel 正确关闭：如果您没有此额外代码，它将无限期地重新触发计时器。`Workbook_Close``if``myTimerProc`
*   该文件需要保存为“启用宏的工作簿”，并且可能需要签名或放入受信任的位置。否则，其中的宏将不会运行（被 Excel 禁用）。**

# delphi - 以模态形式创建时，Delphi 父窗口位于其他窗口的顶部

> ID：11544467
> 
> 赞同：2
> 
> 时间：2012-07-18T15:05:38.860
> 
> 标签：delphi, delphi-7, delphi-xe2, vcl

我创建了一个窗口，它应该突出显示窗体上的控件。当父窗体位于另一个窗口之后时，此窗口不应**位于其他应用程序窗口的顶部（尝试 Alt+Tab）。**除非红框是从模态表单创建的，否则这可以正常工作。

我想要实现的是，当从模式对话框创建并切换到另一个应用程序时，红框不会停留在其他窗口的顶部。

我想省略 PopupParent 和 PopupMode，因为代码应该在 Delphi 7 - XE2 中工作（老实说，我尝试使用 PopupParent 没有任何成功）。

框架未关闭的事实不是问题。

请检查下面的完整源代码（创建一个新的 VCL 应用程序并替换整个单元文本，不要在表单上放置任何组件）。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics,
  Controls, Forms, Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
  private
    procedure HighlightButton(Sender: TObject);
    procedure CreateModalDialog(Sender: TObject);
  protected
    procedure DoCreate; override;
  end;

  TOHighlightForm = class(TForm)
  private
    fxPopupParent: TCustomForm;
    procedure SetFormLook;
    procedure WMMouseActivate(var Message: TWMMouseActivate); message WM_MOUSEACTIVATE;
    procedure WMNCHitTest(var Message: TWMNCHitTest); message WM_NCHITTEST;
  protected
    procedure Paint; override;
    procedure DoCreate; override;
    procedure Resize; override;
    procedure CreateParams(var Params: TCreateParams); override;
  public
    procedure ShowAt(const aPopupParent: TCustomForm; aRect: TRect; const aInflateRect: Integer = 0);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TOHighlightForm }

procedure TOHighlightForm.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);

  if HandleAllocated then
  with Params do begin
    if Assigned(fxPopupParent) then
      WndParent := fxPopupParent.Handle;
  end;
end;

procedure TOHighlightForm.DoCreate;
begin
  inherited;

  Color := clRed;

  FormStyle := fsStayOnTop;
  BorderStyle := bsNone;
  Position := poDesigned;
  DoubleBuffered := True;
end;

procedure TOHighlightForm.Paint;
begin
  with Canvas do begin
    Brush.Color := Self.Color;
    FillRect(Self.ClientRect);
  end;
end;

procedure TOHighlightForm.Resize;
begin
  inherited;

  SetFormLook;
  Repaint;
end;

procedure TOHighlightForm.SetFormLook;
var
  HR1, HR2: HRGN;
  xR: TRect;
begin
  if not HandleAllocated then
    exit;

  xR := Self.ClientRect;

  HR1 := CreateRectRgnIndirect(xR);
  InflateRect(xR, -3, -3);
  HR2 := CreateRectRgnIndirect(xR);

  if CombineRgn(HR1, HR1, HR2, RGN_XOR) <> ERROR then
    SetWindowRgn(Handle, HR1, True);
end;

procedure TOHighlightForm.ShowAt(const aPopupParent: TCustomForm; aRect: TRect;
  const aInflateRect: Integer);
begin
  if fxPopupParent <> aPopupParent then begin
    fxPopupParent := aPopupParent;
    RecreateWnd;
  end;

  if aInflateRect > 0 then
    InflateRect(aRect, aInflateRect, aInflateRect);

  SetBounds(aRect.Left, aRect.Top, aRect.Right-aRect.Left, aRect.Bottom-aRect.Top);

  Resize;

  ShowWindow(Handle, SW_SHOWNOACTIVATE);
  Visible := True;
end;

procedure TOHighlightForm.WMMouseActivate(var Message: TWMMouseActivate);
begin
  Message.Result := MA_NOACTIVATE;
end;

procedure TOHighlightForm.WMNCHitTest(var Message: TWMNCHitTest);
begin
  Message.Result := HTTRANSPARENT;
end;

{ TForm1 }

procedure TForm1.CreateModalDialog(Sender: TObject);
var xModalForm: TForm;
begin
  xModalForm := TForm.CreateNew(Self);
  try
    with TButton.Create(Self) do begin
      Parent := xModalForm;
      Top := 70;
      Left := 10;
      Width := 200;
      OnClick := HighlightButton;
      Caption := 'This does not work (try Alt+Tab)';
    end;

    xModalForm.ShowModal;
  finally
    xModalForm.Free;
  end;
end;

procedure TForm1.DoCreate;
begin
  inherited;

  with TLabel.Create(Self) do begin
    Parent := Self;
    Left := 10;
    Top := 10;
    Caption :=
      'I create a window, that should highlight a control on a form.'#13#10+
      'This window should not stay on top of other application windows when'#13#10+
      'the parent form is behind another window (try Alt+Tab).'#13#10+
      'This works fine unless it is a modal form.';
  end;

  with TButton.Create(Self) do begin
    Parent := Self;
    Top := 70;
    Left := 10;
    Width := 200;
    OnClick := HighlightButton;
    Caption := 'This works fine';
  end;

  with TButton.Create(Self) do begin
    Parent := Self;
    Top := 100;
    Left := 10;
    Width := 200;
    OnClick := CreateModalDialog;
    Caption := 'Open modal window and try there';
  end;
end;

procedure TForm1.HighlightButton(Sender: TObject);
var
  xR: TRect;
  xControl: TControl;
begin
  xControl := TControl(Sender);
  xR.TopLeft := xControl.ClientToScreen(Point(0, 0));
  xR.BottomRight := Point(xR.Left+xControl.Width, xR.Top+xControl.Height);

  with TOHighlightForm.CreateNew(Self) do begin
    ShowAt(Self, xR, 3);
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:26:30.937

不要测试`HandleAllocated`，`CreateParams`当然它还没有...

```
procedure TOHighlightForm.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);

//  if HandleAllocated then // <------
  with Params do begin
    if Assigned(fxPopupParent) then
      WndParent := fxPopupParent.Handle;
  end;
end; 
```

`fsStayOnTop`如果您不希望表单保持在顶部，请不要使用。

```
procedure TOHighlightForm.DoCreate;
begin
  inherited;

  Color := clRed;
//  FormStyle := fsStayOnTop; // <-----
  BorderStyle := bsNone;
  Position := poDesigned;
  DoubleBuffered := True;
end; 
```

自我是你的主要形式，你想使用拥有框架的形式（模态形式）

```
procedure TForm1.HighlightButton(Sender: TObject);
var
  xR: TRect;
  xControl: TControl;
begin
  xControl := TControl(Sender);
  xR.TopLeft := xControl.ClientToScreen(Point(0, 0));
  xR.BottomRight := Point(xR.Left+xControl.Width, xR.Top+xControl.Height);

  with TOHighlightForm.CreateNew(Self) do begin  
    ShowAt(GetParentForm(TControl(Sender), False), xR, 3); // <--------
  end;
end; 
```

# jquery - jQuery 移动动态页面不滚动

> ID：11544469
> 
> 赞同：0
> 
> 时间：2012-07-18T15:05:42.747
> 
> 标签：jquery, jquery-mobile, scroll, jquery-templates

我使用**jQuery mobile** Framework 和**jQuery Tmpl**为 iPhone 创建了一个 Web 应用程序。

每个**静态**页面**都可以正常工作**。
但是**动态**页面（*使用 Json 和 Tmpl 构建*）不会滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:34:36.853

在我们使用的 jQuerymobile 模板中，这是：

```
$(document).on('touchmove', function(e){
    e.preventDefault();
}); 
```

阻止我们的页面滚动。
很明显：S

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:39:10.110

尝试这个：

```
$( '#foo' ).trigger( 'updatelayout' ); 
```

`updatelayout`事件通知其他组件他们可能需要调整其布局以响应其内容更改。开发人员正在构建动态应用程序，从页面中注入、隐藏或删除内容，或以任何影响页面尺寸的方式对其进行操作，也可以手动触发此 updatelayout 事件，以确保页面上的组件更新以响应变化。请参阅[http://jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# security - 不同文本的 Rijndael 加密生成相同的加密文本？

> ID：11544475
> 
> 赞同：1
> 
> 时间：2012-07-18T15:06:16.907
> 
> 标签：security, encryption, rijndael

两个不同文本的 Rijndael 加密生成相同加密文本的可能性有多大。

说我有一个纯文本

“abc” > 加密到 > “defdefdef”

这会发生吗？

“hij” > 也加密为 > “defdefdef”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:09:30.857

对于相同的密钥，机会为零。不同的输入映射到具有相同键的不同输出。

对于不同的密钥，用两个不同的密钥加密的两个不同的文本碰巧产生相同的密文的可能性很小。当我说微不足道时，我的意思是微不足道。今天，仙女座星系更有可能停在太阳旁边。

# javascript - 媒体元素集成到 Ckeditor

> ID：11544481
> 
> 赞同：3
> 
> 时间：2012-07-18T15:06:30.550
> 
> 标签：javascript, audio, ckeditor, mp3, mediaelement.js

我在所见即所得的编辑器ckeditor上遇到了一些麻烦。在试图摆脱任何基于 Flash 的媒体播放器时，我偶然发现了 MediaElement (http://mediaelementjs.com/)，它被认为是播放音频和视频的好选择 ( [http://drupal.org/node /1035630](http://drupal.org/node/1035630)）。

有没有一种简单的方法可以将此播放器集成到媒体插件中？我想应该有一种方法可以将基于 Flash 的播放器换成媒体元素..？

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:31:33.557

您可以基于 flash 插件创建自定义插件。

大写很重要，这里是风格指南：编码风格指南 [http://docs.cksource.com/FCKeditor_3.x/Design_and_Architecture/Coding_Style](http://docs.cksource.com/FCKeditor_3.x/Design_and_Architecture/Coding_Style)

复制`_source/plugins/flash`目录并重命名，我们称之为mediaelement。

将重命名的目录放在这里`/plugins/mediaelement`。

然后重命名`/plugins/mediaelement/dialogs/flash.js`为`mediaelement.js`.

将您的`16px X 16px`工具栏按钮图像添加到`/plugins/mediaelement/images/`目录中。
我知道`.png`文件工作，没有尝试过其他人。

* * *

**配置：**
在您的配置中加载新插件：

```
config.extraPlugins = 'mediaelement'; 
```

将按钮添加到工具栏配置设置`'MediaElement'`

```
config.toolbar_xxx 
```

* * *

**文件修改**
您需要更改对“flash”插件名称和文件的引用。以下是加载插件和打开对话框窗口所需的最小更改：

插件/mediaelement/dialogs/mediaelement.js (174)

```
CKEDITOR.dialog.add( 'mediaelement', function( editor ) 
```

插件/mediaelement/plugin.js (22 - 33)

```
 CKEDITOR.plugins.add( 'mediaelement',
  {
    init : function( editor )
    {
      editor.addCommand( 'mediaelement', new CKEDITOR.dialogCommand( 'mediaelement' ) );
      editor.ui.addButton( 'MediaElement',
        {
          label : 'Media Element',
          command : 'mediaelement',
          icon: this.path + 'images/mediaelement_btn.png'
        });
      CKEDITOR.dialog.add( 'mediaelement', this.path + 'dialogs/mediaelement.js' ); 
```

这里有一些关于创建插件的教程：http:
[//docs.cksource.com/CKEditor_3.x/Tutorials](http://docs.cksource.com/CKEditor_3.x/Tutorials)

它们将使您了解结构和所需元素。我在使用现有插件的副本时通过教程了解了这一点，这需要一些时间，但您需要的大部分内容都在那里。

教程包含有关创建对话窗口和使用的参数的信息，它们将帮助您了解`plugins/mediaelement/dialogs/mediaelement.js`文件中发生的情况。

您可以修改对话框文件以包含 MediaElement 实现使用的字段。我建议您将 Flash 的嵌入代码与 Media Element 的嵌入代码进行比较，以查看哪些部分相互对应，并相应地修改对话框文件。

# java - 在 Java 中创建 GUI 的最简单方法是什么？

> ID：11544483
> 
> 赞同：10
> 
> 时间：2012-07-18T15:06:45.257
> 
> 标签：java, swing, user-interface

我目前正在尝试为我编写的程序创建一个 GUI，该程序可以帮助您将站点密码保存到文件中。截至目前，该程序将允许您在终端/cmd 中编辑并向您提供这些内容。我希望它有一个 GUI，开头有 2 个按钮，说明你想“查看你的密码”还是“编辑密码”。“查看您的密码”将带您到 GUI 的另一个部分，让您查看您的密码，“编辑密码”将带您到 GUI 的一个部分，让您将密码和详细信息添加到文件中。有人可以为我提供好的在线教程，让我完成这个吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-18T15:13:42.587

如果您想以标准方式执行此操作，您可以尝试使用 Java（准确地说是 JFC）附带的**Swing ，它有很好的教程和支持。**这里是官方教程：[Swing 教程。](http://docs.oracle.com/javase/tutorial/uiswing/)

如果您想使用使用本机操作系统组件的东西，那么**SWT**适合您。Lars Vogel 在这个主题中有很多教程： [SWT 教程](http://www.vogella.com/articles/SWT/article.html)。

如果您想要一些新的和闪亮的东西，那么看看*Java FX*。它旨在与**FLEX**竞争，它也是 Oracle 的东西：[Java FX 教程](http://docs.oracle.com/javafx/) *（编辑：JavaFX 不再是 SDK 的一部分）*。

还有其他框架，但在我看来，这些是最有用且有据可查的。

Swing 和 SWT 的一大优点是您可以使用**WindowBuilder**轻松创建 UI-s。您可以在这里查看它：[WindowBuilder](http://www.eclipse.org/windowbuilder/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T15:08:16.393

Swing 上的[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/)是一个很好的资源。如果您不喜欢使用 Java 代码手动编写 UI，那么有几个 GUI 构建器，您可以在其中直观地布置 UI，并在代码隐藏中填写行为。例如， [Netbeans](http://netbeans.org/)有这样的东西，并且有[WindowBuilder](http://www.eclipse.org/windowbuilder/) for [Eclipse](http://eclipse.org)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T15:10:06.333

如果您不必使用 Swing，您也可以尝试[Java FX 2.x](http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm)，我认为它的外观和感觉更好。最新版本的 Netbeans 有一个 Java FX 构建器，但是根据您的描述，以编程方式设置框架应该相当容易。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T15:07:53.263

干得好：

*   [http://www.javabeginner.com/java-swing/java-swing-tutorial](http://www.javabeginner.com/java-swing/java-swing-tutorial)
*   [http://docs.oracle.com/javase/tutorial/uiswing/components/index.html](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T15:11:31.747

如果您想减轻 Java GUI 编程，那么也许您可以考虑使用一些框架，例如[Griffon](http://griffon.codehaus.org/)。我使用它，它比纯 Swing 容易得多。

# mysql - 更改格式日期MySql

> ID：11544484
> 
> 赞同：4
> 
> 时间：2012-07-18T15:06:51.323
> 
> 标签：mysql, sql

我在 MySql 中有日期类型列。默认情况下，MySql 日期格式为 YYYY/MM/DD。但实际上我更喜欢使用 DD/MM/YYYY 格式。

**我可以更改列日期格式吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:44:56.267

不，您不能更改 DATE、DATETIME 或 TIMESTAMP 列的默认 MySQL 格式。

但是您可以在 SQL 语句中使用 MySQL 函数将 DATE 表达式输出为不同格式的字符串。

```
DATE_FORMAT( datecol , '%m/%d/%Y')  AS datecol 
```

（这将在 SELECT 列表中正常工作，但避免在任何谓词中使用它（即 WHERE 子句）。在那里，您将要引用裸列，并使用转换您首选格式 'MM/DD/YYYY' 的字符串STR_TO_DATE 函数，例如

```
datecol >= STR_TO_DATE('07/16/2012','%m/%d/%Y') 
```

* * *

话虽如此，我认为在与数据库的交互中使用 MySQL 默认 DATE 格式并处理代码中的格式更改确实会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T17:31:59.503

其他 DBMS 具有您可以更改的默认格式，即使在会话的基础上也是如此。例如，在 Oracle 中，您可以简单地更改`NLS_DATE_FORMAT`会话变量，Oracle 将使用您的自定义格式进行输入和输出。MySQL 没有。

有几个[服务器变量](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html)(`date_format`和`datetime_format`) 您可能会考虑适合此目的：

```
mysql> SHOW VARIABLES LIKE 'date%_format';
+-----------------+-------------------+
| Variable_name   | Value             |
+-----------------+-------------------+
| date_format     | %Y-%m-%d          |
| datetime_format | %Y-%m-%d %H:%i:%s |
+-----------------+-------------------+ 
```

首先，它们是服务器端的并且它们不是动态的（它们不能在运行时设置）。但更糟糕的是，它们从未真正使用过。这些变量根本不会影响日期格式。它们目前已被弃用并排队等待删除。

总结一下：不，你不能。**日期格式是固定的。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:08:28.063

尝试`echo date('d/m/Y', strtotime($date));`

这将获取您现有的日期，将其转换为 UNIX 时间并将其转换回具有您所需格式的日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T17:13:04.410

正如其他人所解释的那样，这是不可能的，但这是替代解决方案，它需要进行一些调整，但它的工作方式类似于日期列。

我开始思考，如何让格式化成为可能。我有个主意。为它做触发器怎么样？我的意思是，添加 type 列`char`，然后使用 MySQL 触发器更新该列。那行得通！我做了一些与触发器相关的研究，最后提出了这些查询：

```
CREATE TRIGGER timestampper BEFORE INSERT ON table
FOR EACH
ROW SET NEW.timestamp = DATE_FORMAT(NOW(), '%d/%m/%Y'); 
```

```
CREATE TRIGGER timestampper2 BEFORE UPDATE ON table
FOR EACH
ROW SET NEW.timestamp = DATE_FORMAT(NOW(), '%d/%m/%Y'); 
```

您不能使用`TIMESTAMP`or`DATE`作为列类型，因为它们有自己的格式，并且会自动更新。

所以，这是您的替代时间戳或日期替代方案！希望这会有所帮助，至少我很高兴我得到了这个工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T22:13:19.233

迟到的答案：

这个问题令人困惑，因为日期类型列的格式通常为 YYYY-MM-DD，但我想我理解 OP 想问的问题：

他在字符串列中有日期，可能是 VARCHAR 或 CHAR 或 TEXT 类型，年月日用斜杠分隔，而不是连字符 (YYYY/MM/DD)，并希望创建一个日期列，格式为日期（日/月/年）。

然后会这样，他可以在表中创建一个新列并使用以下事务来创建新格式

```
UPDATE table SET `new_date_column`=
CONCAT(
   -- the day
   (SELECT SUBSTRING_INDEX(`old_date_column`,'/',-1)),
   "/",
   -- the month
   (SELECT SUBSTRING_INDEX((SELECT SUBSTRING_INDEX(`old_date_column`,'/',2)),'.',-1)),
   "/",
   -- the year
   (SELECT SUBSTRING_INDEX(`old_date_column`,'/',1))
) 
WHERE 1; 
```

# c++ - 从不同的类访问矢量对象

> ID：11544485
> 
> 赞同：0
> 
> 时间：2012-07-18T15:06:52.323
> 
> 标签：c++, class, object, vector

我用指针创建了一个向量，并在一个名为的方法中从从 Modul 派生的类 DigOut 创建了新对象

```
BOOL Cbeckhoff_frontendDlg::OnInitDialog()
{
//...
std::vector<Modul*> arrDigOut;
arrDigOut.push_back(new DigOut(IDC_CHECK1, this,"GVL.DigOut1",pAddr));
//...
for(iNumDO = 0;iNumDO<1;iNumDO++) arrDigOut[iNumDO]->InitCheck(this);
//...
} 
```

如何从不同的方法访问向量，例如：

```
void Cbeckhoff_frontendDlg::OnBnClickedButton3()
{
for(iNumDO = 0;iNumDO<1;iNumDO++) arrDigOut[iNumDO]->SetID();
} 
```

我考虑过使用公共指针或 setter 和 getter，
但我不会像这样创建成员变量：

```
std::vector<Modul*> *   parrDigOut; 
```

在抱怨的地方，没有声明 Modul。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:13:19.867

如果我理解正确，只需将其公开并在其前面添加此行：

```
class Modul; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:16:46.730

Your example gives the impression you are declaring the `vector` at function scope. Its lifetime ends at the end of the function call (and all memory is leaked). Store it as a class member and a member functions `begin` and `end` that forward to the `begin` and `end` member functions of the `vector`. Possibly wrap them in a `dereference_iterator` to hide the fact that they are pointers.

```
class foo {
public:
  foo() { 
    // add things to s_
  }

  ~foo() { 
    // dont forget to delete everything in s_
  }
  typedef std::vector<my_stuff*>::iterator iterator;
  typedef std::vector<my_stuff*>::const_iterator const_iterator;
  iterator begin() { return s_.begin(); }
  iterator end() { return s_.end(); }
  const_iterator begin() const { return s_.begin(); }
  const_iterator end() const { return s_.end(); }

  // or to hide the pointers
  typedef boost::indirect_iterator< std::vector<my_stuff*>::iterator > iterator;
  iterator begin() { return boost::make_indirect_iterator(s_.begin()); }
  iterator end() { return boost::make_indirect_iterator(s_.end()); }
private:
  std::vector<my_stuff*> s_;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:17:10.487

You could define a member variable as you described. On top of the class declaration just provide a forward declaration,

```
class Modul; 
```

This is to let the compiler know that such a class is going to get defined somewhere down the line.

The member variables need not be public as it is accessed from another function in the same class.

And just declare the member as:

```
std::vector<Modul*>   parrDigOut; //No need of pointers 
```

However, you could think of using a smart pointer to make sure that it gets deleted when the parent class gets out of scope

# python - 如何使用 virtualenv 在 OpenShift DIY 上设置 Django 应用程序

> ID：11544487
> 
> 赞同：5
> 
> 时间：2012-07-18T15:06:55.393
> 
> 标签：python, django, virtualenv, openshift

由于 RedHat openshift 不支持 Python 2.7，我选择使用 Do-It-Yourself (DIY) 应用程序。

[我可以使用精彩的教程](https://openshift.redhat.com/community/blogs/enabling-python-27-on-a-paas-with-the-openshift-diy-app-type)成功安装 python 2.7、setuptools、PIP 。现在我想设置一个 VirtualEnv 并在其中安装 Django 和其他库。

那么，有没有类似的（如上所述：一步一步的过程）教程来配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:12:41.720

我编写了一个示例应用程序，它在 Python 2.7、由 uWSGI（或 Gunicorn；开发者选择）和 Jenkins CI 提供支持的 Django 1.4 上运行。当然使用 Virtualenv

[https://github.com/ksurya/openshift-diy-py27-django-jenkins](https://github.com/ksurya/openshift-diy-py27-django-jenkins) (dead - repo没了), 替代方案是[https://github.com/joskid/openshift-diy-py27-django-jenkins](https://github.com/joskid/openshift-diy-py27-django-jenkins) (接缝到是相同的）

其他类似的示例项目：

1.  [https://github.com/ehazlett/openshift-diy-py27-django](https://github.com/ehazlett/openshift-diy-py27-django)
2.  [https://github.com/zemanel/openshift-diy-django-example](https://github.com/zemanel/openshift-diy-django-example)

# javascript - 多个进度条/html5文件上传

> ID：11544493
> 
> 赞同：1
> 
> 时间：2012-07-18T15:07:15.850
> 
> 标签：javascript, html, upload, xmlhttprequest

这不是全部代码，但我认为它是相关部分。如何为每个放入拖放区的文件动态创建单独的进度条？

```
function sendFile(file) {
    xhr.upload.addEventListener('progress', function (ev) {
        var bar = document.getElementById("progressBar");
        progressBar.value += percentComplete;
    }, false);

    dropzone.ondrop = function (event) {
        event.stopPropagation();
        event.preventDefault();

        var filesArray = event.dataTransfer.files;
        for (var i = 0; i < filesArray.length; i++) {
            sendFile(filesArray[i]);
            //trigger progress bar with sendFile

            document.getElementById('file').innerHTML += '<li>' + filesArray[i].name + '&nbsp;' + '<progress id="progressBar"     value="0" max="100"></progress></div></li>';
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:37:02.607

我用jquery对你的代码稍作改动。

```
 function sendFile(file) {
        xhr.upload.addEventListener('progress', function (ev) {
            var bar = document.getElementById("progressBar");
            progressBar.value += percentComplete;
        }, false);

        dropzone.ondrop = function (event) {
            event.stopPropagation();
            event.preventDefault();

            var filesArray = event.dataTransfer.files;
            for (var i = 0; i < filesArray.length; i++) {
                sendFile(filesArray[i]);
                //trigger progress bar with sendFile
    $('#outputlist').append('<li>'+fileArray[i].name+'   <progress  value="0" max="100"></progress></li>');

            }
        } 
```

让我们来点你必须更新与文件名相对应的进度条，这是一个挑战。

```
<progress id=fileArray[i].name value="0" max="100"></progress> 
```

您可以使用文件名更新进度条。

# sql - Jasper iReport - 如何使用变量表达式调用带有参数的子数据集？

> ID：11544495
> 
> 赞同：0
> 
> 时间：2012-07-18T15:07:18.610
> 
> 标签：sql, dataset, jasper-reports, ireport

我需要一个变量表达式来调用带有附加参数的子数据集。

我有一个数据集，它返回一份杂货购买清单。就像是：

```
Milk, NJ, $1.23

Chicken, DE, $5.45

Milk, NY, $1.44 
```

我可以使用购买价格的总和变量来获得价格总和。但是，我需要一个将州税考虑在内的总数。在上面的示例中，假设 NJ 销售税乘数为 1.06，NY 销售税为 1.08。而不是我的牛奶总和是 2.76 (=1.44 + 1.23)，我需要它是 2.859 (=1.23*1.06 + 1.44*1.08)。

我有一个`SALES_TAX`带有查询的子数据集：

```
SELECT tax_multiplier FROM mydb.sales_tax WHERE state=$P{STATE} 
```

我基本上需要：

```
Sum($F{PURCHASE_PRICE} * $V{getTax($F{PURCHASE_STATE)}) 
```

我怎样才能做到这一点？使用主数据集中的购买状态字段查询 SALES_TAX 子数据集时，我的 getTax 变量需要是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:57:27.407

玛丽安娜，

您可以在查询中建立一个税字段吗？您可以创建一个案例陈述来评估购买的状态。您的查询可能会显示税前价格、税值和税后价格。case 语句看起来像（我使用的是 Oracle，您可能需要针对您的数据库进行调整）：

```
 CASE
 WHEN PURCHASE_STATE = 'NY' THEN 1.08          
 WHEN PURCHASE_STATE = 'NJ' THEN 1.06     
 WHEN PURCHASE_STATE = 'DE' THEN 1.00    
 ELSE 1.05                               /** default value **/
 END AS TAX_RATE 
```

如果您想在 iReport 中执行此操作，我建议您创建一个变量来应用税率。变量表达式将类似于：

```
 $F{PURCHASE_STATE} == "NY" ? "1.08" : 
   $F{PURCHASE_STATE} == "NJ" ? "1.06" :
     $F{PURCHASE_STATE} == "DE" ? "1.00" : "1.05" 
```

然后，您的 iReport 详细信息带应输出一个带有文本字段表达式
$F{PURCHASE_PRICE} 的文本字段、一个带有文本字段表达式 $V{TAX_RATE} 的文本字段和一个带有文本字段表达式 $F{PURCHASE_PRICE} 的文本字段*$V{TAX_RATE}。

如果您想在 SQL 查询中使用子查询来查找销售税，您可以：

```
 SELECT P.PURCHASE_ITEM                   AS ITEM, 
      P.PURCHASE_PRICE                    AS PRICE, 
      P.PURCHASE_STATE                    AS STATE, 
      (SELECT T.TAX_RATE 
           FROM TAX_TABLE T 
           WHERE T.STATE = P.PURCHASE_STATE
      )                                   AS TAX_RATE, 
      PURCHASE_OTHER_INFO                 AS OTHER
 FROM PURCHASE_TABLE P 
```

# apache2 - Apache2 上的 FallbackResource (2.2.22 (Ubuntu))

> ID：11544499
> 
> 赞同：7
> 
> 时间：2012-07-18T15:07:46.207
> 
> 标签：apache2, apache2-module

我正在尝试清理我的 apache 虚拟主机，因为我有许多“别名”，并且将它们全部放入 mod_rewrite 可能很烦人。但是，虽然我可以自己访问特定的 URL（例如[http://example.dev/robots.txt](http://example.dev/robots.txt)、[http://example.dev/](http://example.dev/)，但虚拟主机不会回退到列出的 URL ( `FallbackResource /index.php`)。

vhost 是 Zend Framework 项目的容器，没有设置 .htaccess 文件。

访问日志显示`.... "GET / HTTP/1.1" 302 0`，但 Google Chrome 显示“未收到数据”和“错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接但未发送任何数据。”

注释掉该`FallbackResource`行并重新启用`<Location />`基于 - 的 mod_rewrite 可以按预期工作。

**编辑：**虚拟主机中没有任何东西可以阻止它工作。几`Alias`行（FallbackResource 应该使用）和一些`FilesMatch`停止访问具有特定扩展名的文件。日志中唯一出现的是 404，当它尝试访问 URL 而不是 index.php（列出的资源）时。

```
<VirtualHost *:80>
    ServerAdmin webmaster@site.com
    ServerName example.com
    ServerAlias www.example.com

    DocumentRoot /var/website/current/html/

    SetEnv APPLICATION_ENV productionbackend

    # must be most specific first
    Alias /i/static /var/website/static/i
    # more /i/* Alias
    Alias /i       /var/website/current/resources/common-furniture/

    # protecting files in the directory.
    <FilesMatch ".*\.xml">
        Order allow,deny
        Deny from all
    </FilesMatch>

    <Directory "/var/website/current/html/">
        Options FollowSymLinks All
        AllowOverride All
    </Directory>

    ErrorLog  logs/error.log
    CustomLog logs/access.log common
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-12T11:46:31.990

我有一个解决方案。正如我在对原始问题的评论中所说，我也遇到了同样的问题。我的虚拟主机非常简单：

```
<VirtualHost *:8029>
    DocumentRoot "C:\path\to\wwwroot"
    ServerName localhost
        <Directory />
                AllowOverride All
        </Directory>
</VirtualHost> 
```

我的 htaccess 只包含：

```
FallbackResource index.html 
```

我已添加`DirectoryIndex`到我的 .htaccess 文件中。现在是这样写的：

```
FallbackResource /index.html
DirectoryIndex index.html 
```

这解决了这个问题。

**为什么这行得通？**

空响应仅`/`在第二次调用该 url 并被浏览器缓存时发生。出于某种原因，在这种情况下似乎`FallbackResource`失败了，所以我认为通过确保 index.html 通过指定提供服务`DirectoryIndex`，就不需要后备了。您可以称其为解决方法。

# ruby-on-rails - 橡胶自动重启后无法连接到 ec2 实例

> ID：11544507
> 
> 赞同：0
> 
> 时间：2012-07-18T15:08:09.307
> 
> 标签：ruby-on-rails, amazon-ec2

在此处输入代码我第一次尝试使用橡胶将 Rails 3 应用程序部署到 ec2。在命令 cap Rubber:create_staging 运行期间，要求实例重新启动，然后它不会接受连接。这是它的外观：

```
 ** [out :: production.foo.com] Setting up grub2-common (1.99-21ubuntu3.1) ...
 ** [out :: production.foo.com] Setting up grub-pc-bin (1.99-21ubuntu3.1) ...
 ** [out :: production.foo.com] Setting up grub-pc (1.99-21ubuntu3.1) ...
 ** [out :: production.foo.com] Generating grub.cfg ...
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] Found linux image: /boot/vmlinuz-3.2.0-26-virtual
 ** [out :: production.foo.com] Found initrd image: /boot/initrd.img-3.2.0-26-virtual
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1.
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] Found linux image: /boot/vmlinuz-3.2.0-23-virtual
 ** [out :: production.foo.com] Found initrd image: /boot/initrd.img-3.2.0-23-virtual
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] /usr/sbin/grub-probe: warn:
 ** [out :: production.foo.com] 
 ** [out :: production.foo.com] disk does not exist, so falling back to partition device /dev/xvda1
 ** [out :: production.foo.com] .
 ** [out :: production.foo.com] Found memtest86+ image: /boot/memtest86+.bin
 ** [out :: production.foo.com] done
 ** [out :: production.foo.com] Processing triggers for libc-bin ...
 ** [out :: production.foo.com] ldconfig deferred processing now taking place
 ** [out :: production.foo.com] Processing triggers for resolvconf ...
 ** [out :: production.foo.com] resolvconf: Error: /etc/resolv.conf isn't a symlink, not doing anything.
 ** [out :: production.foo.com] Processing triggers for initramfs-tools ...
 ** [out :: production.foo.com] update-initramfs: Generating /boot/initrd.img-3.2.0-26-virtual
    command finished in 131854ms
  * executing "echo $(ls /var/run/reboot-required 2> /dev/null)"
    servers: ["production.foo.com"]
    [production.foo.com] executing command
    command finished in 460ms
  * executing "echo $(ls /mnt/your_app_name-production 2> /dev/null)"
    servers: ["production.foo.com"]
    [production.foo.com] executing command
    command finished in 473ms
 ** Updates require a reboot on hosts ["production.foo.com"]
 ** Rebooting ...
  * executing "sudo -p 'sudo password: ' reboot"
    servers: ["production.foo.com"]
    [production.foo.com] executing command
    command finished in 479ms
  * executing `rubber:_direct_connection_production.foo.com_887'
  * executing "echo"
    servers: ["production.foo.com"]
 ** Failed to connect to production.foo.com, retrying 
```

问题是，通过运行 Rubber:create 或任何其他橡胶命令，在创建和初始化实例后，在写入 /etc/hosts 文件后，我收到“连接失败”错误，一切都停在那里。

如果我对写在 hosts 文件中的地址执行 ssh，那么我就可以完美连接到实例，所以我不明白问题出在哪里……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:14:05.803

确保 EBS 卷 /dev/xvda1 已附加到 ex2 实例。

转到 EC2 -> 卷并查看您拥有的 EBS 卷。如果您看到该卷处于可用状态，请尝试将其附加到 ec2 实例并重新启动该实例。

# android - 在 viewPager 中平滑停止滚动

> ID：11544510
> 
> 赞同：1
> 
> 时间：2012-07-18T15:08:19.543
> 
> 标签：android, scroll, google-play, android-viewpager

基本上，Play商店（又名Android Market）和Android官方启动器上的viewpager的工作方式与支持库中针对这种情况的方式不同，我希望获得与那里相同的UI体验在页面之间滚动。

情况是这样的：当您触摸 viewpager 在页面之间滚动（并滚动一点），然后您停止触摸并再次快速触摸时，我得到了不同的行为：

*   在 Play 商店（和官方启动器）上，滚动动画停止并与触摸保持同步。
*   在支持库上，viewpager 只是停止动画并跳转到它要转到的页面，无论你在哪里触摸它。

如何实现与 Play 商店和官方启动器上的功能相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T23:43:58.067

[Android Playground](http://code.google.com/p/android-playground/)项目具有您所说的平滑停止滚动。

更具体地说，检查[这个](http://code.google.com/p/android-playground/source/browse/trunk/SwipeyTabsSample/src/net/peterkuterna/android/apps/swipeytabs/SwipeyTabs.java)自定义的“ `View Pager`”类。

# objective-c - 在 OS X 上制作 QuickLook 生成器的最简单方法是什么？（脚本-> html-> webkit 视图？）

> ID：11544513
> 
> 赞同：1
> 
> 时间：2012-07-18T15:08:26.530
> 
> 标签：objective-c, quicklook

我不了解Objective C，但非常想制作一个简单的QuickLook 生成器。

这是我的计划：

myfile.extension -> QuickLook 生成器使用脚本（例如简单的 shell 脚本或我提供的其他方式）解析文件，然后输出 html 文件 -> QuickLook 使用 webkit 视图显示此 html 文件

我基本上是在寻找一个模板或教程，我可以在其中插入我自己的脚本，而不用担心 QuickLook 生成器本身是如何工作的，而不必学习 Objective C（我正在学习，但速度很慢！ ）。

非常感谢，如果有人可以提供帮助，或者甚至只是指出我正确的方向。我相信它将来也会对其他人有用。

编辑：

我发现了以下我之前错过的内容，它确实部分回答了我的问题：

[http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLDynamicGeneration.html#//apple_ref/doc/uid/TP40005020-CH15-SW2](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/Quicklook_Programming_Guide/Articles/QLDynamicGeneration.html#//apple_ref/doc/uid/TP40005020-CH15-SW2)

这是我所希望的更复杂的解决方案，这意味着我将不得不深入研究 Objective-C。如果有人知道如何简化此代码，我将不胜感激。

例如有没有办法改变教程中的线路：

场合=InitializeCoreDataStackWIthURL(url);

类似的东西，比如：

(字符串) 场合 = (myshellscript.sh $url 的输出)

请记住，我不了解 Objective-C，所以我不知道如何编写核心数据堆栈，甚至不知道那是什么！

非常感谢您花时间回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:54:28.523

你不需要使用 Objective-C 来编写生成器，但你肯定需要编写 C 代码。

Quick Look 的沙箱禁止在生成器中调用外部脚本（或任何外部代码）。

# sql-server - 实体框架 - 如何管理不同数据库中但在同一服务器上的表？

> ID：11544516
> 
> 赞同：3
> 
> 时间：2012-07-18T15:08:30.233
> 
> 标签：sql-server, entity-framework, database-design

我正在使用 SQL Server 2008。

似乎在 EF 中我需要为每个数据库使用不同的实体上下文。在数据库之间连接表意味着必须允许这样做，这很不方便，并且更有可能我只是将所有内容都放在一个数据库中。

我错过了什么吗？当然 EF 可以比这更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:15:13.673

您可以将实体映射到返回连接表的视图，因此您的 EF 模型不了解所有这些技术数据库内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:17:00.580

我认为它没有得到适当的支持，但是[这个家伙已经设法让它工作了](http://rachel53461.wordpress.com/2011/05/22/tricking-ef-to-span-multiple-databases/)。

基本上，她为数据库设置了同义词，并破解了 edmx 文件。

# php - 使用 PHP 和 MySQL 的多语言动态内容

> ID：11544517
> 
> 赞同：0
> 
> 时间：2012-07-18T15:08:30.937
> 
> 标签：php, mysql, multilingual

我正在使用 PHP 和 MySQL 开发一个网站 我将 XML 用于静态数据以便能够创建多语言网站 问题在于数据库中的其他内容是为每个表中的每种语言创建一个列更好还是什么？而且我没有使用任何模板引擎所以我想知道能够解决这个问题的好方法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:13:10.373

最好`language`在数据库表中添加一列。将新内容保存到数据库时，必须设置语言。在前端，您根据用户选择的语言提取内容。

```
SELECT * FROM ContentTable WHERE ContentID=<pageid> AND Language='en'
SELECT * FROM ContentTable WHERE ContentID=<pageid> AND Language='fr' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:16:20.993

也许你会在这里找到答案：

[Schema多语言数据库](http://fczaja.blogspot.be/2010/08/multilanguage-database-design.html)

取决于您网站的架构和其他内容。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:16:28.650

不，不要为每种语言创建一个列 - 这是不好的非规范化 - 您将不得不为每种新语言更改表。

有一张这样的语言表：

```
language_id, name, code 
```

例如，当您有一张桌子时`text_pages`，它可能如下所示：

```
page_id, language_id, title, content 
```

然后，每页每种语言都有一行。或者您可以在没有主表的情况下使用`language_id`- 记录将采用默认语言，而第二个表`text_pages_ml`将保留`page_id, language_id, title, content`- 只有其他语言，翻译！然后您可以轻松地用 覆盖主要记录`LEFT JOIN`，以防当前语言与默认语言不同。

**请注意，第二个示例的优点**是您还可以有许多不应该翻译的列！例如`author_id, date_created, date_updated`，等 -`LEFT JOIN`将仅覆盖那些已翻译的主要字段，并且不会出现不需要翻译的重复数据！

有很多实现，但是阅读了 RDB Normalization 并且从不考虑每个字段设计的每种语言的列。

# android - 如何使用 Ecore 模型生成的包 - Android？

> ID：11544520
> 
> 赞同：1
> 
> 时间：2012-07-18T15:08:33.913
> 
> 标签：android, eclipse-emf-ecore

作为我项目的一部分，我使用 Ecore 图创建了类图并从中生成了一个模型。我使用本教程作为参考。http://www.vogella.com/articles/EclipseEMF/article.html。 ..我的问题是一旦我创建了模型（在本教程的第 4 节“生成模型代码”）......我如何在我的普通 android 项目中使用它，就像我在我的简单 android 项目中导入其他包一样。 ??

在本教程的第 6 节中，它在插件项目中使用这些模型..但我想在我的正常项目中使用该模型代码..我希望你能得到我想要问的内容..如果你需要更多，请询问我这方面的详细信息...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:54:57.383

我不确定答案，但这个 bugzilla 说它有一个用于 Android 的 EMF 运行时端口：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=296770](https://bugs.eclipse.org/bugs/show_bug.cgi?id=296770)

# android - google-tv 的多媒体播放控制和数据流

> ID：11544531
> 
> 赞同：0
> 
> 时间：2012-07-18T15:08:53.157
> 
> 标签：android, google-tv

我只是想知道是否有任何文件或流程图解释了 google-tv 上多媒体播放的控制和数据流。我在移动部分（很棒的播放器-> omx_codec 等）也知道同样的情况，但我认为这不适用于 google-tv 多媒体播放。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:14:21.837

我们正在迁移到 OMX。在 I/O 上宣布的下一个版本将基于 OMX。请查看[Google I/O 2012 - 在 Google TV 上获取您的内容以](http://www.youtube.com/watch?v=bNbKpUqkOso)了解更多信息。

此外 - 流程一直与 Android 相同。但是，您可能看不到某些方法调用，因为当前版本中存在错误。这将在下一个版本中修复。如果您需要特定项目，请询问。

# django - Django po文件像mo文件一样编译

> ID：11544532
> 
> 赞同：0
> 
> 时间：2012-07-18T15:08:56.037
> 
> 标签：django, po, mo

我对这个翻译系统有点陌生，但据我了解，.po 文件是翻译字符串，.mo 文件是这些翻译的编译翻译。我遇到的问题是我的一个 .po 文件充满了十六进制代码，例如已编译的 .mo 文件，现在当我运行 compilemessages 时，我在该文件上收到一条错误消息：

_djangojs.po:1：关键字“Mac”未知

此文件中不存在“Mac”一词。就像我说的，这里只有十六进制字符。关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:11:44.820

将您的翻译复制到其他地方并重新生成 .po 和 .mo 文件，然后使用 msgmerge 将旧的 .po 翻译引入新生成的 .po 文件。

# php - PHP BCrypt for Ruby on Rails 设计密码

> ID：11544540
> 
> 赞同：3
> 
> 时间：2012-07-18T15:09:44.283
> 
> 标签：php, ruby-on-rails, bcrypt

我正在尝试使用 PHP 验证 Devise Ruby on Rails 生成的一些密码。设计被配置为使用 bcrypt。

我的代码是：

```
$database_record = "$2a$10$..."; // generated by devise
$user_input = 'asdasd';
$password = crypt($user_input, '$2a$10$usesomesillystringforsalt$');

if (crypt($user_input, $database_record) == $password) {
    echo "<br/>Password verified!";
}
else {
    echo '<br/>failed!'; } 
```

我看到的文档正在使用这种方法，但它对我不起作用。我是不是忘记了什么？“胡椒串”应该以任何方式使用？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:21:57.467

我对这部分感到困惑。

```
$password = crypt($user_input, '$2a$10$usesomesillystringforsalt$'); 
```

我认为您对文档的后面部分感到困惑，该部分指定了如何创建哈希并保证它是 bcrypt。在您的情况下，您正在验证哈希，因此它会自动执行此操作。

你想要做的是跳过它并做：

```
if (crypt($user_input, $database_record) == $database_record) { 
```

因此，如果这按我的预期工作，`crypt($user_input, $database_record)`将从中获取盐`$database_record`并使用它来运行 bcrypt on `$user_input`。然后你想再次比较结果，`$database_record`因为它是正确密码的 bcrypt 哈希。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T15:16:19.803

使用 PHP 5 >= 5.5.0

```
$pepper = 'xxxyyyzzz'; //get value from config/initializers/devise.rb
$password = '12345678'; //clear password to validate

$db_pass = '***************************'; //password stored on database

$options = [
    'salt' => substr($db_pass,7)
];

$ok = ($db_pass == password_hash($password.$pepper, PASSWORD_BCRYPT, $options)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:04:44.773

我终于发现了如何解决这个问题。设计在密码末尾添加胡椒，然后执行加密。

工作代码是：

```
if (crypt($passwordToValidate.$pepper, $encryptedPassword) == $encryptedPassword)
   echo 'ok!';
else
   echo 'failed!'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-09T00:47:10.603

我遇到了一个问题，即 php 生成的密钥像 $2y ......，但是 ruby​​ $2a ..... 更多在这里[https://github.com/ircmaxell/password_compat/issues/49](https://github.com/ircmaxell/password_compat/issues/49)

# python - Python ASCII 和 Unicode 解码错误

> ID：11544541
> 
> 赞同：13
> 
> 时间：2012-07-18T15:09:48.423
> 
> 标签：python, string, sqlite, character-encoding

将某个字符串插入我的数据库时，我遇到了这个非常令人沮丧的错误。它说的是：

> Python 无法解码字节字符，需要 unicode”

经过大量搜索，我发现可以通过将字符串编码为[Unicode](http://en.wikipedia.org/wiki/Unicode)来克服此错误。我尝试通过首先解码字符串然后以[UTF-8](http://en.wikipedia.org/wiki/UTF-8)格式对其进行编码来做到这一点。像：

```
string = string.encode("utf8") 
```

我收到以下错误：

```
'ascii' codec can't decode byte 0xe3 in position 6: ordinal not in range(128) 
```

我一直死于这个错误！我如何解决它？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-18T15:12:47.733

你需要采取有纪律的方法。 [实用的 Unicode，或者我如何停止痛苦？](http://nedbatchelder.com/text/unipain.html)拥有您需要的一切。

如果您在该代码行上收到该错误，那么问题在于这`string`是一个字节字符串，而 Python 2 正在隐式尝试为您将其解码为 Unicode。但它不是纯ASCII。您需要知道编码是什么，并正确解码。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T15:15:25.990

该`encode`方法应用于`unicode`对象以将它们转换为`str`具有给定编码的对象。该`decode`方法应该用于`str`给定编码的对象以将它们转换为`unicode`对象。

我想您的数据库以 UTF-8 存储字符串。因此，当您从数据库中获取字符串时，请`unicode`通过`str.decode('utf-8')`. 然后只`unicode`在你的 python 程序中使用对象（文字用 定义`u'unicode string'`）。在将它们存储到数据库之前，将它们转换为`str`带有`uni.encode('utf-8')`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T15:19:06.507

编辑：正如您从反对票中看到的那样，这不是最好的方法。紧随其后的是一个极好的且强烈推荐的答案，因此，如果您正在寻找一个好的解决方案，请使用它。这是一个 hackish 解决方案，以后不会对您友好。

我感觉到你的痛苦，我遇到了很多同样的错误。我解决它的最简单方法（这可能不是最好的方法，这取决于您的应用程序）是将事物转换为 unicode，并忽略错误。[这是Unicode HOWTO - Python v2.7.3 文档](http://docs.python.org/howto/unicode.html#the-unicode-type)中的一个示例

```
>>> unicode('\x80abc', errors='strict')
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
UnicodeDecodeError: 'ascii' codec can't decode byte 0x80 in position 0:
                    ordinal not in range(128)
>>> unicode('\x80abc', errors='replace')
u'\ufffdabc'
>>> unicode('\x80abc', errors='ignore')
u'abc' 
```

虽然这可能不是最方便的方法，但这是一种对我有用的方法。

编辑：

评论中的几个人提到这是一个坏主意，即使提问者接受了答案。这不是一个好主意，如果您要处理欧洲和重音字符，它会搞砸的。但是，如果它不是生产级代码，如果它是您正在处理的个人项目，并且您需要快速修复以使事情顺利进行，那么您可以使用它。您最终将需要使用正确的方法来修复它，这些方法在下面的答案中提到。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T15:12:33.860

0xE3 代码点是 Unicode 中带有波浪号的“a”。您的原始字符串很可能已经采用 UTF-8 格式，因此您无法使用默认的 ASCII 字符集对其进行解码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-31T14:45:12.833

*python 2.7 中的字符串是一个编码字符串（主要以 ASCII 编码），但不是字符串或 unicode。*

因此，当您执行 string.encode('some encoding') 时，您实际上是在对编码字符串进行编码（使用某种编码）

Python 必须首先使用默认编码（python 2.7 中的 ASCII）解码该字符串，然后再进一步编码。您的字符串不是以 ASCII 编码，而是以其他一些编码（UTF8、LATIN-1 ..）编码的，因此当 python 尝试使用 ASCII 对其进行解码时，它会引发错误，因为*ASCII 编解码器无法解码给定字符串中的少数字符ASCII 范围 (0 - 127)*

```
#to encode above given string, first decode that using some encoding
decoded_string = string.decode('utf8')
#now encode that decoded string
decoded_string.encode('utf8') 
```

# javascript - Javascript数组传输，但值不是

> ID：11544543
> 
> 赞同：1
> 
> 时间：2012-07-18T15:09:55.373
> 
> 标签：javascript

我有一个`quickbuy_view.checkout()` 接受`product`对象的函数。我用

```
quickbuy_view.checkout(new Product(12530257)) 
```

这是出现错误的代码的一部分

```
console.log('quickbuy_view')
console.log(quickbuy_view)
console.log('quickbuy_view.product')
console.log(quickbuy_view.product)
console.log('quickbuy_view.product.displays');
console.log(quickbuy_view.product.displays);

var display = quickbuy_view.product.displays[0];
//This is where the actual error occurs
$('#quickbuy .display .main img').attr('src',display.vw1Reg) 
```

在 chrome 的控制台中，我可以看到它`quickbuy_view.product`返回一个`displays`长度为 3 的数组的对象。但是，当我尝试 log 时`quickbuy_view.product.displays`，返回一个空数组。

奇怪的是，当我稍后进入时`quickbuy_view.product.displays`，我得到了预期的数组。

[![控制台视图](../Images/8251f9a2c8535a5c1c8fa3c944f676c5.png)](https://i.stack.imgur.com/UuO4I.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:17:11.357

这是因为 Chrome 开发工具的`console.log`工作方式。当您记录一个对象时，它仍然是活动的，也就是说它不是它当前状态的快照商店。但是，当您记录原语时，它是属性的当前状态。

因此，`displays`数组是在记录代码之后设置的，但是当您检查该`product`属性时，它是“活动的”，因此在您展开它之前它不会被更新。

# video - 在 JUnit/Selenium 测试中捕获远程机器上的测试视频

> ID：11544547
> 
> 赞同：1
> 
> 时间：2012-07-18T15:10:09.133
> 
> 标签：video, junit4, selenium-grid

我在远程机器上使用 Eclipse3.2-Junit4 框架和 Selenium Grid 运行 Selenium Web 驱动程序脚本。我想捕获正在运行测试的屏幕视频。我试过蒙特媒体库，但它只在主机即集线器上录制视频。但我的要求是记录在 Selenium 节点（即远程机器）上运行的完整测试。你能告诉我这个东西是否有一些Java库。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T10:16:12.460

我想了很长时间，但从技术上讲，拥有视频几乎没有用。

截图可以代替视频相当不错。

从我的角度来看，[这](https://stackoverflow.com/a/6598227/1300626)是要走的路。

进一步的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T22:36:39.113

您可以使用 VNC 查看器或远程桌面连接到远程机器，Monte Video 录像机将记录本地机器屏幕上的所有内容——包括查看器的输出。

# python - 彻底关闭 Python 脚本

> ID：11544553
> 
> 赞同：3
> 
> 时间：2012-07-18T15:10:29.493
> 
> 标签：python, bash, process, exit, kill

我有一个用 Python 编写的线程服务器，我开始使用以下 shell 脚本：

```
#!/bin/bash

base_path="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

public_dns=$(curl -s http://169.254.169.254/latest/meta-data/public-hostname)
echo $public_dns > "$base_path/client/address"

cd "$base_path/server"
python "server.py" &
echo $! > "$base_path/server_pid"
echo "Server running" 
```

我将 PID 回显到一个文件，以便我可以使用另一个 shell 脚本关闭服务器：

```
#!/bin/bash

base_path="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

kill -9 `cat "$base_path/server_pid"`
rm "$base_path/server_pid"
rm "$base_path/client/address" 
```

但是，我知道，考虑到服务器有许多线程将 I/O 输入到网络和硬盘中，这是一种不好的方法......所以我想做的是让第二个脚本以某种方式与服务器交互并告诉它启动一个关闭序列，该序列将干净地关闭所有线程、关闭和归档日志等。

现在我知道了[atexit](http://docs.python.org/library/atexit.html)，并以这种方式对其进行了测试：

```
import atexit
def byebye(o):
    o.write('stop')
    o.flush()
    o.close()

o = open('log','w')
o.write('start')
o.flush()

atexit.register(byebye, o)

while True:
    pass 
```

但是当我`kill -9`的过程中，`byebye()`并没有被解雇。[我应该使用全能`kill -9`](http://www.youtube.com/watch?v=Fow7iUaKrq4)以外的命令吗？我将如何关闭该过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:17:21.957

在我看来，您正在尝试实现一个守护进程。关于 python 中的守护进程实现有各种参考：

上一个 stackoverlow 问题： [如何在 Python 中创建守护进程？](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)

PEP 关于守护进程：http: [//www.python.org/dev/peps/pep-3143/](http://www.python.org/dev/peps/pep-3143/)

python模块实现PEP3143： [http ://pypi.python.org/pypi/python-daemon/](http://pypi.python.org/pypi/python-daemon/)

请注意，PEP 是草案。

更多关于守护进程：[http ://en.wikipedia.org/wiki/Daemon_%28computing%29](http://en.wikipedia.org/wiki/Daemon_%28computing%29)

通常，守护程序的启动、停止和重新启动如下：

```
mydaemon start
mydaemon stop
mydaemon restart 
```

所以你不需要知道 PID 或其他任何东西来阻止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:21:55.267

`kill 9`是原子动力的——你不需要自己清理。更好的方法是使用不同的、更温和的信号（`HUP`例如，通常用于向服务器进程发出信号表明该关闭了），并教你的 python 代码如何优雅地处理它。

[信号模块文档](http://docs.python.org/release/2.6.8/library/signal.html)应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:11:41.397

我不是特别习惯于使用线程进行编程，但不是发送`kill -9`（对应于`SIGKILL`），您可以发送`SIGINT`或其他一些用户定义的信号。 `SIGINT`（`kill -2`在我的系统上）很好，因为 python 已经理解了。（当 python 捕获该信号时，它会引发 a `KeyboardInterrupt`），但任何信号都可以工作。您只需要注册一个干净地退出程序的信号处理程序。

# javascript - 获取触发jquery blur() 事件的点击对象

> ID：11544554
> 
> 赞同：43
> 
> 时间：2012-07-18T15:10:42.300
> 
> 标签：javascript, jquery, events, jquery-events, onblur

假设我这样做：

```
$(target).blur(function(e){
  //do stuff
}); 
```

有没有办法获取被点击的对象以触发模糊动作？

我尝试使用`e.target`，但这似乎是返回附加到模糊操作的对象而不是单击的对象。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-18T15:17:20.227

诀窍是等待一个额外的滴答声：

```
$(el).blur(function (event) {
    // If we just hangout an extra tick, we'll find out which element got focus really
    setTimeout(function(){
       document.activeElement; // This is the element that has focus
    },1);
}) 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-07-18T15:20:53.060

如果我正确理解您的问题，应该这样做：

```
$(function() {

    var clicky;

    $(document).mousedown(function(e) {
        // The latest element clicked
        clicky = $(e.target);
    });

    // when 'clicky == null' on blur, we know it was not caused by a click
    // but maybe by pressing the tab key
    $(document).mouseup(function(e) {
        clicky = null;
    });

    $(target).blur(function(e) {
        console.log(clicky);
    });​​

}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T15:13:40.880

在事件处理程序中，`this`将是事件绑定到`e.target`的元素，并且将是触发事件的元素（可能与 相同或不同`this`）。

你正在处理一个`blur`事件，而不是一个`click`事件。因此，在您的事件中，您将拥有您`blur`编辑的元素。如果你想要`click`ed 元素，你需要另一个事件来获得它。

`blur`可以由其他事件触发，例如聚焦某物；不只是点击某物。因此，无法获取“导致模糊”的元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T15:12:18.853

在处理函数中使用 this`blur`将为您提供模糊的元素。

```
$(target).blur(function(e){
   var blurredElement = this;  // dom element
   // To make a jQuery object 
   var blurredElement = $(this);
}); 
```

在`blur`事件中，您无法捕获单击的元素。要获得`click`ed 元素，您需要`click`事件。例如：

```
$(element).click(function() {
  var clickedElement = this;
}); 
```

要获得焦点元素，您可以使用`:focus`选择器，例如：`$(':focus')`将返回文档中的焦点元素。

# xml - 使用具有共同 id 的另一个节点集对 for-each 进行排序

> ID：11544555
> 
> 赞同：1
> 
> 时间：2012-07-18T15:10:44.607
> 
> 标签：xml, xslt, xpath

我希望对由 for-each 生成的表进行排序。确定排序的数据不包含在 for-each 节点集中，而是包含在 . 节点集和节点集之间有一个common_id。我尝试将 common_id 分配给 for-each 中的局部变量，但排序看不到它。有没有办法做到这一点？下面的一些例子。

示例 XML

```
<root>
  <seq>
    <common_id>B1U3</common_id>
    <seq_data>1</seq_data>
  </seq>
  <seq>
    <common_id>R3D</common_id>
    <seq_data>3</seq_data>
  </seq>
  <seq>
    <common_id>Y3110W</common_id>
    <seq_data>2</seq_data>
  </seq>

  <detail>
    <common_id>Y3110W</common_id>
    <other_data>spame</other_data>
  </detail>
  <detail>
    <common_id>B1U3</common_id>
    <other_data>spamo</other_data>
  </detail>
  <detail>
    <common_id>R3D</common_id>
    <other_data>spama</other_data>
  </detail>
</root> 
```

所需输出

```
____________________________    
¦Common Id      ¦Other Data¦
¦---------------¦----------¦
¦B1U3           ¦spama     ¦
¦Y3110W         ¦spame     ¦
¦R3d            ¦spamo     ¦
¦_______________¦__________¦ 
```

当前的 XSLT

```
<xsl:template match="/">
  <table>
    <tr>
        <td>Common ID</td>
        <td>Other Data</td>
    </tr>
    <xsl:for-each select="detail">
      <xsl:variable name="local_id" select="common_id"/>
      <xsl:sort select="../seq[common_id = $local_id]/seq_data"/>
        <tr>
          <td><xsl:value-of select="common_id"/></td>
          <td><xsl:value-of select="other_data"/></td>
        </tr>
    </xsl:for-each>
  </table>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:56.487

如果您使用`current()`函数而不是变量，它会起作用吗？此外，您可能希望使排序数字而不是字典：

```
<xsl:sort select="../seq[common_id = current()/common_id]/seq_data"
          data-type="number"/> 
```

# ajax - 如何在 Coldfusion 中修改 MySQL 查询的结果（用 HTML 按钮/文本替换数据库整数）

> ID：11544559
> 
> 赞同：1
> 
> 时间：2012-07-18T15:10:57.130
> 
> 标签：ajax, arrays, coldfusion

我正在使用数据表和 Jquery Mobile（服务器 Coldfusion8，MySQL 5.0.88）来显示表格数据。虽然这很好用，但我正在尝试将 AJAX 集成到表中，因此每当用户页面或过滤器时，都会再次查询并更新数据库。

[现在我正在尝试使用这个代码片段](http://www.jonathonjoyce.co.uk/2011/12/07/using-coldfusion-cfcs-to-return-data-to-datatables-1-8-2/)让它工作

```
var userTable = $('#users).dataTable({
    "sAjaxSource": "path/to/handler.cfc?method=GetUsers",
    "aoColumns": [
        { "mDataProp": "id" , "sTitle": "ID"},
        { "mDataProp": "name" , "sTitle": "Name"},
        { "mDataProp": "surname" , "sTitle": "Surname"},
        { "mDataProp": "email" , "sTitle": "Email Address"}
      ]
    }); 
```

在 CF 内部：

```
<cffunction name="GetUsers" access="remote" output="false" returntype="any" returnformat="json"> 
    <cfquery name="local.qryUsers" datasource="dsn">
      SELECT id, name, surname, email FROM tblUsers
    </cfquery>

    <cfscript>
      local.strData = StructNew();
      local.strData['aaData'] = QueryToArray(local.qryCandidates);
      return local.strData;
     </cfscript>

</cffunction> 
```

我的问题是我需要修改查询中的一些数据，例如我正在存储一个名为*status*的列，其值为 1、2、3、4、5，当我构建查询结果时，我正在替换状态用正确的语言和正确的文字编号。或者我在每一行都有一个 Jquery Mobile 编辑/删除控制组，我在数据库中没有。

**问题**：
有没有办法将此添加到从 MySQL 返回到 Coldfusion 的查询结果中 = 我如何 (a) 通过循环列并用一些文本 (状态) 替换数字来修改查询结果和 (b) 我怎么能向查询结果（编辑/删除）按钮添加一个完整的列，这样我就可以将整个内容输入 AJAX 响应？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:12:03.520

循环和更改的示例

```
<cfloop query="MyQuery">
    <cfscript>
        variables.myNewValue = "aaa #MyColumn#";
        QuerySetCell(MyQuery, "MyColumn", variables.myNewValue, CurrentRow);
    </cfscript>
</cfloop> 
```

至于添加列 - 尝试[QueryAddColumn()](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_m-r_16.html)函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:07:57.933

You can loop over the query and use [QuerySetCell](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/querysetcell.html) to modify contents of a column.

```
<cfloop query="local.qryUsers">
  <cfset QuerySetCell(local.qryUsers, "status", "your new value", local.qryUsers.currentRow)>
</cfloop> 
```

You can use [QueryAddColumn](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/queryaddcolumn.html) to add a column to a query.

```
<cfset QueryAddColumn(local.qryUsers, "yourNewColumnName", [1,2,3])> 
```

# c++ - 使用 VS2010 的 msbuild 构建时，我可以从命令行设置平台工具集吗？

> ID：11544563
> 
> 赞同：13
> 
> 时间：2012-07-18T15:11:03.687
> 
> 标签：c++, visual-studio-2010, command-line, msbuild

当我从命令行使用 msbuild 构建 VS2010 时，我可以在不编辑 vcxproj 文件的情况下从命令行将平台工具集更改为 v90（即 Visual Studio 2008 工具链）吗？

我目前在我的构建脚本中使用以下命令行：

```
mysystemf("msbuild %s.vcxproj /t:rebuild /p:configuration=release,platform=%s", prjname, platform); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-12-02T05:06:59.543

是的，您可以在不更改 vcxproj 文件的情况下设置 PlatformToolset。

如果你打开一个 vcxproj 文件，你会看到有一个`PlatformToolset`属性。对于visual studio 2012，它是v110；对于VS2010，是v100；对于 VS2008，它是 v90。

您可以覆盖此属性`/p:PlatformToolset=v110/v100/v90`以更改工具链。

注意：有时，msbuild 失败并出现错误`Unsupported platformtoolset value`，这主要是因为您没有指定`VisualStudioVersion`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:33:20.193

PlatformToolset 被配置为配置的 PropertyGroup 的一部分。

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
  <ConfigurationType>Application</ConfigurationType>
  <UseDebugLibraries>true</UseDebugLibraries>
  <CharacterSet>Unicode</CharacterSet>
  <PlatformToolset>v90</PlatformToolset>
</PropertyGroup> 
```

如果您想从命令行更改工具集，您应该为每个工具集添加一个配置（使用 IDE 很容易完成），然后为构建调用该配置。

msbuild %s.vcxproj /t:rebuild /p:configuration= **VC90Release** ,platform=%s

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T07:56:14.240

[我在 MSDN 中](http://msdn.microsoft.com/en-us/library/dd293607.aspx)找到了答案：

> 要使用 Visual C++ 9.0 工具集重新构建项目，请键入以下任一命令：
> 
> msbuild myproject.vcxproj /p:PlatformToolset=v90 /t:rebuild

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:19:59.807

从这里[http://msdn.microsoft.com/en-us/library/bb397428](http://msdn.microsoft.com/en-us/library/bb397428)

它说添加 /ToolsVersion:3.5 将构建它，就好像它是一个 VS 2008 项目

# javascript - Ember：使用 {{action}} 标签处理多个事件？

> ID：11544565
> 
> 赞同：17
> 
> 时间：2012-07-18T15:11:06.267
> 
> 标签：javascript, ember.js

我正在使用 Ember.js，我试图让一个 div 元素具有两种不同的操作：一种是鼠标进入，另一种是鼠标离开。我试着做：

```
<div {{action "stopInfo" on="mouseLeave"}} {{action "startInfo" on="mouseEnter"}}> 
```

但它只会触发第一个动作（mouseleave）。

有没有办法对同一个元素进行 2 个操作？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T15:26:23.317

根据问题[#569](https://github.com/emberjs/ember.js/issues/569)，不支持标签的多个操作助手。要处理多个事件，您应该为此使用自定义`Ember.View`。在您的情况下，请参阅[http://jsfiddle.net/pangratz666/2V9cP/](http://jsfiddle.net/pangratz666/2V9cP/)：

**车把**：

```
{{#view App.ActionView}}
    ... content of div ...
{{/view}} 
```

**JavaScript**：

```
App.ActionView = Ember.View.extend({
    stopInfo: function(evt) { console.log('stop info'); },
    startInfo: function(evt) { console.log('start info'); },

    click: Ember.alias('stopInfo'),
    mouseLeave: Ember.aliasMethod('stopInfo'),

    mouseEnter: Ember.aliasMethod('startInfo')
});​ 
```

我在`Ember.alias`这里使用了帮助程序，只是为了说明如何将相同的函数用于多个视图事件......

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-08T15:52:56.353

这可能会在下一个版本的 Ember (1.13) 中得到支持。修复它的 PR 在这里：[https ://github.com/emberjs/ember.js/pull/11373](https://github.com/emberjs/ember.js/pull/11373)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T19:43:39.970

我会为此使用[ember-composable-helpers](https://github.com/DockYard/ember-composable-helpers)。

```
<button {{action (pipe addToCart purchase redirectToThankYouPage) item}}>
  1-Click Buy
</button> 
```

或者

```
<button {{action (queue (action "backupData") (action "unsafeOperation") (action "restoreBackup"))}} /> 
```

# java - 在 Java 中解码 Base64 字符串

> ID：11544568
> 
> 赞同：70
> 
> 时间：2012-07-18T15:11:17.673
> 
> 标签：java, base64

我正在尝试解码一个简单的 Base64 字符串，但无法这样做。我目前正在使用该`org.apache.commons.codec.binary.Base64`软件包。

我正在使用的测试字符串是：`abcdefg`，使用 PHP 编码`YWJjZGVmZw==`。

这是我目前正在使用的代码：

```
Base64 decoder = new Base64();
byte[] decodedBytes = decoder.decode("YWJjZGVmZw==");
System.out.println(new String(decodedBytes) + "\n") ; 
```

上面的代码没有抛出错误，而是没有按预期输出解码后的字符串。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-18T15:16:30.600

修改您正在使用的包：

```
import org.apache.commons.codec.binary.Base64; 
```

然后像这样使用它：

```
byte[] decoded = Base64.decodeBase64("YWJjZGVmZw==");
System.out.println(new String(decoded, "UTF-8") + "\n"); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-07-23T07:17:05.507

以下内容应适用于最新版本的 Apache 通用编解码器

```
byte[] decodedBytes = Base64.getDecoder().decode("YWJjZGVmZw==");
System.out.println(new String(decodedBytes)); 
```

和编码

```
byte[] encodedBytes = Base64.getEncoder().encode(decodedBytes);
System.out.println(new String(encodedBytes)); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-05-01T20:44:08.070

如果不想用apache，可以用Java8：

```
byte[] decodedBytes = Base64.getDecoder().decode("YWJjZGVmZw=="); 
System.out.println(new String(decodedBytes) + "\n"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-03T09:38:35.063

通常base64用于图像。如果您想解码图像（在此示例中为 jpg，使用 org.apache.commons.codec.binary.Base64 包）：

```
byte[] decoded = Base64.decodeBase64(imageJpgInBase64);
FileOutputStream fos = null;
fos = new FileOutputStream("C:\\output\\image.jpg");
fos.write(decoded);
fos.close(); 
```

# c# - TypeConverters 和 null

> ID：11544572
> 
> 赞同：0
> 
> 时间：2012-07-18T15:11:30.977
> 
> 标签：c#, typeconverter

我正在使用一个类来存储连接字符串。我的应用程序从设置类中读取设置并将其分配给实例变量。然后将其绑定到一些控件。我的连接字符串类具有以下属性集：

```
[TypeConverter(typeof(ConnectionStringConverter))] 
```

我的类型转换器如下所示。

问题是，如果设置文件中的设置为空白，则设置类返回 null。而不是我使用默认构造函数的连接字符串类的实例。

请有人能帮我解开这个谜语。

谢谢。

```
public class ConnectionStringConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        if (sourceType == typeof(string))
            return true;
        else
            return base.CanConvertFrom(context, sourceType);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
    {
        if (value is string)
            return (ConnectionString)(value as string);
        else
            return base.ConvertFrom(context, culture, value);
    }

    public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType == typeof(string))
            return (string)(value as ConnectionString);
        else
            return base.ConvertTo(context, culture, value, destinationType);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:02:30.727

我相信问题在这里：

```
public override object ConvertFrom(ITypeDescriptorContext context, 
    CultureInfo culture, object value)
{
    // The first condition.
    if (value is string)
        return (ConnectionString)(value as string);
    else
        return base.ConvertFrom(context, culture, value);
} 
```

让我们分解条件语句：

```
if (value is string) 
```

这很好，这是您将字符串转换为`ConnectionString`类的地方。

```
return (ConnectionString)(value as string); 
```

这是问题线。如果`value`为 null，则`value as string`也为 null，并且您将返回一个 null 引用。

相反，你想这样做：

```
return (ConnectionString)(value as string) ?? new ConnectionString(); 
```

如果`value`为 null，则[coalesce 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)`ConnectionString`将提供使用默认无参数构造函数调用的类的实例。

# maven - 在 maven commandlineArgs 插件中使用 commandlineArgs 传递带有空格的字符串

> ID：11544581
> 
> 赞同：0
> 
> 时间：2012-07-18T15:12:00.760
> 
> 标签：maven, batch-file, mojo

是否可以在 maven mojo 插件 的**commandlineArgs**中添加双引号？
在批处理中，我有 %1 - 只获取字符串的第一部分，直到第一个空格

我试过引用： **“**但它没有帮助，
例如`<commandlineArgs>"path"</commandlineArgs>`

我试过 **了** `<commandlineArgs>&quot;path&quot;</commandlineArgs>`
但我得到：

未能执行目标 org.codehaus.mojo:exec-maven-plugin:1.2:exec

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <id>export_objects</id>
                    <phase>package</phase>
                    <goals>
                        <goal>exec</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <executable>export_obj.bat</executable>
                <commandlineArgs>###LONG PATH WITH SPACE###</commandlineArgs>   
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:54:40.133

使用 XML CDATA：

```
<commandlineArgs><![CDATA[###LONG PATH WITH SPACE###]]></commandlineArgs> 
```

或者：

```
<arguments><argument><![CDATA[###LONG PATH WITH SPACE###]]></argument></arguments> 
```

# java - 如何使用 db spring 3.1 安全性为每个用户登录/退出实现自定义 SHA-256 salt？

> ID：11544587
> 
> 赞同：2
> 
> 时间：2012-07-18T15:12:16.153
> 
> 标签：java, spring, authentication, salt

我正在广泛阅读文档[Spring 3.1 安全文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html)，但我找不到所有问题的答案。

在 Spring Web 应用程序中，基于表单登录（用户 + pwd），我想使用 SHA-256 对用户密码进行加盐，为每个用户使用随机加盐。这意味着我必须在我的数据库中为每个用户保存盐和散列密码。到目前为止没有问题。

1.  很明显，我必须自己实现`UserDetailsService`以从我的数据库中获取我的用户信息并在我的`spring-security.xml`.

2.  似乎我必须`getSalt()`在我的实现之上添加一个额外的方法，`UserDetails`以便在检查用户提供的登录名与存储的散列密码时可用。

然后情况变得不明朗。我应该拦截登录请求。从第 6.4.3 节开始，似乎 Spring 会将用户提交的凭据映射到一个`Authentication`对象并将其提交给`AuthenticationManager`.

我的问题是：

`Authentication`i) Spring 将提交什么实现`AuthenticationManager`？如何找回用户名和密码？

ii) 看来我必须实现自己的`AuthenticationManager`. 在每次调用时，我都会从数据库中`authenticate(...)`获取登录名和密码。`UserDetails`然后，用相应的盐对提供的密码进行哈希处理，并与数据库哈希项进行比较。正确的？

iii) `AuthenticationManager`API 也有一个`supports(...)`方法。应该如何实施？

iv) 应该如何`Authentication`配置`AuthenticationManager`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:49:50.150

我一定没有正确阅读您的问题，但 Spring Security 提供了开箱即用的加盐密码：

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-services.html#d0e3021](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/core-services.html#d0e3021)

如果 8 位 salt 不足，您可以将自己的 SaltSource 注入 DaoAuthenticationProvider。该手册实际上强烈建议这样做。

# php - PHP日期时间到Unix时间戳

> ID：11544590
> 
> 赞同：2
> 
> 时间：2012-07-18T15:12:27.890
> 
> 标签：php, datetime

如何在 php.ini 中将字符串“MdY::H:i:s”转换为 unix 时间戳。我刚刚意识到操作日期和时间一定是任何编程语言中最耗时的实体。

小问题：为什么你认为没有任何通用的日期时间格式。为什么相同的数据会有如此多的变化？啊啊啊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:14:33.603

OOP 方式（需要 PHP >= 5.3.0）：

```
$dt = DateTime::createFromFormat("M-d-Y::H:i:s", $input);
$ts = $dt->getTimestamp(); 
```

您当然应该检查`createFromFormat`（`false`如果发生错误）的返回值，但您也应该**绝对**检查[`DateTime::getLastErrors()`](http://php.net/manual/en/datetime.getlasterrors.php); 否则，如果您输入的日期是“Jan 32”，您可能会感到惊讶。[请参阅我的](https://stackoverflow.com/a/10120725/50079)答案以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T10:39:39.967

我有此问题服务不可用（带有消息） ResponseText：错误：在布尔值上调用成员函数 getTimestamp() 如何解决此问题。

# apache-flex - 用于扩展 nextLevel 的灵活 DataGrid 自定义按钮

> ID：11544594
> 
> 赞同：1
> 
> 时间：2012-07-18T15:12:45.597
> 
> 标签：apache-flex, renderer, flexicious

我只是在学习如何使用 Flexicious DataGrid，但我遇到了问题。当我设置我的 DataGrid 时，我会这样做：

```
 var flexDataGridColumnLevel:FlexDataGridColumnLevel = new FlexDataGridColumnLevel();
    flexDataGridColumnLevel.columns = columns;
    flexDataGridColumnLevel.nextLevelRenderer = new ClassFactory(ExampleNextLevelRenderer);
    flexDataGridColumnLevel.selectedKeyField = "entityId";

    this._view.grid2.columnLevel = flexDataGridColumnLevel; 
```

为了让我的专栏更上一层楼。当我这样做时，小“+”按钮单元格被添加为每行中的第一个单元格。添加一个全新的列。不过我不想要这个。

我想从本质上劫持“+”图标功能，但将其添加到不同的按钮中。在我的行中，我有一列，该列中的每一行都有一个按钮。当用户单击该按钮时，我想展开该行；做点击那个“+”图标通常会做的事情。另外，我根本不希望显示“+”图标。

我根本不知道如何做到这一点，也无法在互联网上找到任何示例。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:52:28.307

在网格上设置`enableDefaultDisclosureIcon=false`，您还可以`enableExpandCollapse=true`在任何列上使用来控制哪一列具有展开折叠图标。如果要使用自定义按钮，请使用 itemRenderer 并单击调用

```
var cell:IFlexDataGridCell = parent as IFlexDataGridCell;
cell.level.grid.expandChildrenOf(cell.rowInfo.data)) 
```

# mysql - 为什么这个 Rails SQL 查询不起作用：company.status = 'active' AND (companies.status_override = '' OR Companies.status_override = NULL)

> ID：11544595
> 
> 赞同：0
> 
> 时间：2012-07-18T15:12:46.033
> 
> 标签：mysql, sql, ruby-on-rails-3

我有以下完整查询，它什么也不返回。

```
@companies.where("(companies.status = 'active' AND (companies.status_override = '' OR companies.status_override = NULL)) OR companies.status_override = 'active'") 
```

我希望第一部分`(companies.status = 'active' AND (companies.status_override = '' OR companies.status_override = NULL))`将返回所有`status`设置为“活动”并`status_override`设置为空的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:14:40.273

在不知道数据库结构的情况下，这`= NULL`是一个嫌疑犯。试试`IS NULL`吧。

与 NULL 进行算术比较的行为并不像您预期​​的那样；更多细节可以在[Mysql 参考中找到](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:26:39.390

最可能的解释是没有任何行满足 WHERE 子句中的谓词。您的 where 子句采用以下形式：

```
( a AND ( b OR c ) ) OR d 
```

在哪里

```
a = companies.status = 'active'
b = companies.status_override = '' 
c = companies.status_override = NULL
d = companies.status_override = 'active' 
```

所以，基本上，我们知道表中没有任何行满足条件`d`。而且我们知道没有任何行同时满足条件`a`和`b`.

条件`c`是不可能的；它永远不会满足。

要测试表达式是否包含 NULL，请使用`expr IS NULL`. IE

```
companies.status_override IS NULL 
```

如果您不关心 status_override 列上的索引范围扫描操作（很可能您不关心），您可以使用 IFNULL() 函数进行一些简化...

```
(companies.status = 'active' AND IFNULL(companies.status_override,'') = '') OR companies.status_override = 'active' 
```

或使用该`NULLIF()`功能

```
(companies.status = 'active' AND NULLIF(companies.status_override,'') IS NULL) OR companies.status_override = 'active' 
```

# c# - 相似但不完全相同的元素的 MVC 部分视图

> ID：11544598
> 
> 赞同：2
> 
> 时间：2012-07-18T15:12:48.697
> 
> 标签：c#, asp.net-mvc-3, views, partial-views, renderpartial

我目前正在将现有的 webforms 应用程序转换为 MVC，但不确定如何设计其中一个页面。现有页面有 2500 行代码，负责显示相同信息的多个不同视图。以下示例只是此页面的一小部分（工具栏），但我不确定避免重复代码的最佳方法是什么。

管理员视图工具栏：保存、PDF、打印、拼写检查、管理文档、员工视图切换

工具栏的经理视图：保存、PDF、打印、拼写检查、员工视图切换

工具栏的员工视图：保存、PDF、打印、拼写检查

我已将应用程序拆分为三个不同的视图。他们使用相同的局部视图来呈现页面的内容，但目前每个视图都有自己的工具栏副本。因此，用于保存、PDF、打印和拼写检查的 HTML 元素在每个视图中都是重复的。最好有一个局部视图来呈现工具栏，但为了做到这一点，我需要在视图中放置某种逻辑来确定它是否应该显示 Employee View Toggle 链接或管理文档。

在开发其他新页面时，我也遇到了类似的问题。最初，不同页面的需求具有相同的元素，我们将其拆分为部分视图。在测试和添加更多功能之后，最终局部视图需要在每个页面上略有不同。通常它只是某些控件的可见性，但最终部分视图最终会在其中包含一堆逻辑来检查几件事以确定是否应该显示某些内容。

在大多数元素相同的情况下，处理略有不同的视图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:27:22.590

如果这只是权限问题，显示或隐藏同一控件/部分视图/其他的不同部分，我会说只需编写一个并在其中包含一些代码来检查权限并有条件地渲染或不渲染各个部分。像这样的东西：

```
<%@ Control Language="C#" %>

This is the toolbar!!

<div class="fake-css-class">
<%:Html.ActionLink("Save", "Save") %>
<%:Html.ActionLink("PDF", "Pdf") %>
<%:Html.ActionLink("Spell Check", "SpellCheck") %>
<% if (CurrentUser.IsInRole("Admin") { %>
<%: Html.ActionLink("Administrative Documents", "AdminDocs") %>
<%} %>
<% if (CurrentUser.IsInRole("Admin") || CurrentUser.IsInRole("Manager"){
        %>
<%: Html.ActionLink("Employee View Toggle", "EmpView") %>
<%} %>
</div>

<br />
<br /> 
```

编辑：

当逻辑变得更复杂时，将函数添加到您的安全代码中，以便您可以将所有逻辑分离到您的模型/控制器中，并在视图中进行单个函数调用。例如这样的：

```
public bool Authorize(string controllerName, string actionName) {

            bool authorize = false;

            foreach(var permission in this.permissions) {
                if (permission.Matches(controllerName, actionName)) {
                    authorize = permission.Affirmative;
                }
            }

            return authorize;
        } 
```

这样，您可以将代码放在视图之外，而只需在视图中添加一行代码。上面的代码只是从我当前的项目中取出并用作示例，但是您可以编写任何复杂的逻辑并将其放在模型或控制器中，这样您的视图就会保持干净，并且您不会将业务逻辑放在那里。

# wordpress - Wp eCommerce - 单击产品标签时保持在类别内。

> ID：11544601
> 
> 赞同：0
> 
> 时间：2012-07-18T15:12:54.500
> 
> 标签：wordpress, e-commerce

我在 WP eCommerce 中设置了类别，也设置了产品标签。但是，假设我在 T 恤类别中，然后单击产品标签“蓝色”。我希望它保留在 T 恤类别中，而不是在整个商店中展示所有产品。这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:01:42.333

我解决了这个从产品标签中创建单独的自定义导航然后使用同位素来处理产品过滤的问题。这实际上比我想象的要容易。只是想我会发布我的决议，以防有人遇到这个问题。

# erlang - Erlang 路由器出错

> ID：11544607
> 
> 赞同：1
> 
> 时间：2012-07-18T15:13:11.397
> 
> 标签：erlang, router, mochiweb

我尝试像[那里](http://www.metabrew.com/article/a-million-user-comet-application-with-mochiweb-part-2)一样使用 Mochiweb 制作彗星服务器。

如果我从 erlang shell 做，没关系。

但是如果尝试从命令行使用 mochiweb 启动第一个节点：

```
erl -pa ebin edit deps/*/ebin -boot start_sasl -sname n1 -s server +K true -setcookie secret_key -s reloader 
```

第二个带路由器：

```
erl -pa ebin edit deps/*/ebin -boot start_sasl -sname router -setcookie secret_key -eval 'net_adm:ping(n1@localhost), router:start_link().' 
```

如果我从浏览器连接到 mochiweb 我有这个错误

```
=CRASH REPORT==== 18-Jul-2012::19:04:45 ===
crasher:
initial call: mochiweb_acceptor:init/3
pid: <0.73.0>
registered_name: []
exception exit: {noproc,
                    {gen_server,call,
                        [undefined,{login,"234567e",<0.73.0>}]}}
  in function  gen_server:call/2
  in call from server_web:loop/2
  in call from mochiweb_http:headers/5
ancestors: [server_web,server_sup,<0.55.0>]
messages: []
links: [<0.57.0>,#Port<0.1406>]
dictionary: [{mochiweb_request_qs,
                  [{"session_id","234567e"},{"obj_id","page"}]},
              {mochiweb_request_path,"/polling"}]
trap_exit: false
status: running
heap_size: 2584
stack_size: 24
reductions: 1516 
```

我认为问题出在 router.erl 的这个字符串中：

```
-define(SERVER, global:whereis_name(?MODULE)). 
```

因为 -eval ( **net_adm:ping(n1@localhost)** ) 的第一部分启动时没有错误，我可以在**节点()**中看到**n1@localhost 。**. 但是 -eval 的第二部分（**router:start_link()**）不适用于**?MODULE**。

 ******我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T00:08:22.887

看起来应该使用当前模块的名称全局注册的**gen_server**（？MODULE 被替换为它）尚未启动。**global:whereis_name(?MODULE)**在这种情况下将返回**undefined**，就像您在发布的日志中看到的那样。

找到应该执行此操作的代码部分（通过在该模块中查找 ?MODULe 和/或 gen_server:start_link ）并确保它在第一个节点上执行。******

# javascript - 如何清除 WebGL 中的矩形区域？

> ID：11544608
> 
> 赞同：4
> 
> 时间：2012-07-18T15:13:12.180
> 
> 标签：javascript, html, canvas, webgl

WebGL 有一个`clear`清除整个表面的方法。清除特定矩形表面的最佳方法是什么？例如，我想将一个从 (50, 50) 开始的 100x100 像素框设置为全零 (ARGB 0, 0, 0, 0)。我现在能想到的就是用一个写入零的片段着色器绘制一个四边形。没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T16:10:27.433

您可以使用 SCISSOR 测试将清除（和一般渲染）限制为矩形。

```
// turn on the scissor test.
gl.enable(gl.SCISSOR_TEST);

// set the scissor rectangle.
gl.scissor(x, y, width, height);

// clear.
gl.clearColor(r, g, b, a);
gl.clear(gl.COLOR_BUFFER_BIT ...);

// turn off the scissor test so you can render like normal again.
gl.disable(gl.SCISSOR_TEST); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T00:24:31.510

如果在 webgl 上下文中，视口之外的任何东西都将被绘制，剪刀之外的任何东西都将被剪裁并且根本不绘制！

# php - PHP：MIME 类型的文件扩展名？

> ID：11544609
> 
> 赞同：6
> 
> 时间：2012-07-18T15:13:15.577
> 
> 标签：php, file, mime

> **可能重复：**
> [如何确定与 PHP 中的 MIME 类型关联的扩展名？](https://stackoverflow.com/questions/1147931/how-do-i-determine-the-extensions-associated-with-a-mime-type-in-php)

我知道如何获取给定*文件*的 MIME 类型，但有没有办法只给定*扩展名*？

示例输入：

```
jpg 
```

示例输出：

```
image/jpeg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:22:00.857

我见过的 Apache 环境最优雅的解决方案是[http://www.php.net/manual/en/function.mime-content-type.php#107798](http://www.php.net/manual/en/function.mime-content-type.php#107798)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:24:47.770

试试[这个](https://stackoverflow.com/questions/1147931/how-do-i-determine-the-extensions-associated-with-a-mime-type-in-php)来获取关于哪个扩展是哪个 mime 类型的信息，但当然请注意这不会很准确（例如 png 扩展上可能的 gif 文件..）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:22:23.510

我没有安装 Fileinfo 扩展，但是从 PHP 文档来看，似乎 Fileinfo 可能会为您提供该信息，该信息以前由已弃用的函数提供`mime_content_type()`

[http://www.php.net/manual/en/function.mime-content-type.php](http://www.php.net/manual/en/function.mime-content-type.php)

[http://www.php.net/manual/en/ref.fileinfo.php](http://www.php.net/manual/en/ref.fileinfo.php)

# android - Android TextView 按字母携带文本

> ID：11544612
> 
> 赞同：0
> 
> 时间：2012-07-18T15:13:21.570
> 
> 标签：android

有没有办法在Android中通过字母在TextView中携带文本？

如果未设置任何设置 - TextView 按单词携带文本，当单词太长时，TextView 中的空白可能会很大。

示例——我在说什么： ![逐字携带文本](../Images/95ab50013cfe26053c57910b461ed10e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:42:40.653

如果你可以在 XML 中的 TextView 中获得它，我会尝试给它一个属性：

```
android:singleLine 
```

如果您必须在 Java 中执行此操作，有几个选项可以将其保持在同一行：

```
textView.setSingleLine();
textView.setTransformationMethod(new SingleLineTransformationMethod()); 
```

如果您确实想要多行，但您希望它以一种不会在单词上拆分的方式中断，您可能必须通过分析 TextView 的宽度以及一行可以容纳多少个字符来手动完成，然后适当地插入换行符。以上两种方法都会将TextView的内容保持在一行，并且会水平滚动。你可以看看[这个人](https://groups.google.com/d/msg/android-developers/RnVJoxgbxrM/kJN3k6V-7DIJ)是怎么做的。

另一种选择是查看 android:ellipsize 属性，但我认为它不会满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:25:54.113

不确定我是否正确理解了您想要的内容，但我猜......如果您想在一行中显示 TextView，而不“破坏”句子，您应该添加`android:singleLine="true"`到 TextView。

否则，您可以用空格替换“_”字符，在这种情况下，我相信它将携带文本，从最后一个空格开始。

# macos - Dia命令行在OSX上不起作用

> ID：11544613
> 
> 赞同：1
> 
> 时间：2012-07-18T15:13:25.923
> 
> 标签：macos, command-line, dia

我在 OSX 10.7.4 的命令行中使用 Dia 时遇到问题。[我从http://dia-installer.de/download/macosx.html](http://dia-installer.de/download/macosx.html)下载并安装了 OSX dmg我一直在用它来为论文创建图形，我非常喜欢它。

我正在使用 makefile 来调用 pdflatex、bibtex 和 R，以便它会在需要时从头开始构建所有内容，但无法让 Dia 的命令行工作。

我想使用带有 -e 和 -t 的命令行将图形导出到特定目录，以便 pdflatex 可以将它们放入 pdf 中。(http://dia-installer.de/doc/en/re01.html)

我遇到的问题是，每当我从终端调用它时，它都会调出 GUI。即使我转移到 /Applications/Dia.app/Content/Resources/bin/ 并使用命令“./dia -v”。它给了我一堆关于“输入法”的错误，然后显示了 GUI。

我查看了 Dia FAQ，它有很多关于 Windows 命令行的信息，但没有关于 OSX 的信息。

我希望这里有人曾经遇到过这个问题并且知道如何让它工作。

提前致谢。

# javascript - iframe 使其可通过和图像点击

> ID：11544615
> 
> 赞同：0
> 
> 时间：2012-07-18T15:13:27.090
> 
> 标签：javascript, html, iframe, publisher

我是广告网络的发布者，我想知道是否可以通过图像使 iframe 可点击，所以当有人点击它时，广告网络放在 iframe 上的链接会像弹出窗口一样显示-在下，就像有人点击了它一样...我尝试了：`<span></span>`或者`<div></div>`但图像不可点击...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:17:10.670

是的，请查看 jquery .click() 方法。

它看起来像这样。

```
$('img').click(function(){

    $('div.link').show();

}; 
```

基本上，您将单击“事件处理程序”应用于文档的一部分，然后在单击它时触发一个函数。

祝你好运

[api.jquery.com](http://api.jquery.com) - 进一步研究的链接。

# asp.net - 试图用 Ajax 处理 XML

> ID：11544620
> 
> 赞同：0
> 
> 时间：2012-07-18T15:13:31.397
> 
> 标签：asp.net, xml, ajax

我写了一个代码，从哈佛大学获取生成的 XML 文件，并将其放在下拉列表中，接下来您可以从列表中选择一门课程，它将生成一个包含课程详细信息的表格。

```
 <script type="text/javascript" src="Script/jquery-1.7.2.js"></script>
     <script type="text/javascript">
     $('#button').click(function () {
         document.getElementById("span").style.visibility = "visible";
         document.getElementById("button").style.visibility = "hidden";
         $.ajax({
             type: "GET",
             url: "Harvard.aspx?field=COMPSCI",
             success: function (data) {
                 var courses = data.documentElement.getElementsByTagName("Course");
                 var options = document.createElement("select");
                 $(options).change(function () {
                     ShowCourseDetails(this);
                 });
                 for (var i = 0; i < courses.length; i++) {
                     var option = document.createElement("option");
                     option.value = $(courses[i]).find("cat_num").text();
                     option.text = $(courses[i]).find("title").text();
                     options.add(option, null);
                 }
                 document.getElementById("selectDiv").appendChild(options);
                 document.getElementById("span").style.visibility = "hidden";
             }
         });
     });
    function ShowCourseDetails(event) {
        // get the index of the selected option 
        var idx = event.selectedIndex;
        // get the value of the selected option 
        var cat_num = event.options[idx].value;
        $.ajax({
            type: "GET",
            url: "http://courses.cs50.net/api/1.0/courses?output=xml&&cat_num=" + cat_num,
            success: function (data) {
                $("#TableDiv").html(ConvertToTable(data.documentElement));
            }
        });
    }
    function ConvertToTable(targetNode) {
        targetNode = targetNode.childNodes[0];
        // first we need to create headers
        var columnCount = 2;
        var rowCount = targetNode.childNodes.length
        // name for the table
        var myTable = document.createElement("table");
        for (var i = 0; i < rowCount; i++) {
            var newRow = myTable.insertRow();
            var firstCell = newRow.insertCell();
            firstCell.innerHTML = targetNode.childNodes[i].nodeName;
            var secondCell = newRow.insertCell();
            secondCell.innerHTML = targetNode.childNodes[i].text;
        }
        // i prefer to send it as string instead of a table object
        return myTable.outerHTML;
    }
</script> 
```

和身体：

```
<div id="main">
            <div class="left">
                 <input id="button" type="button" value="Get all science courses from HARVARD"/>
                 <br />
                 <span id="span" style="visibility: hidden">Downloading courses from harvard....</span>
                 <div id="selectDiv"></div>
                 <div id="TableDiv"></div>
            </div>
        </div> 
```

我在下拉列表中得到的只是下拉列表中所有行的“未定义”，有人可以看到我写的代码的问题吗？

提前 10 倍 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:19:06.747

工作 jsFiddle：http: [//jsfiddle.net/3kXZh/44/](http://jsfiddle.net/3kXZh/44/)

嗯，我发现了几个问题..

首先，我不会在 HTML 中设置“onclick”。您希望将操作层与内容层分开。

由于您仍然使用 jQuery，请尝试以下操作：

```
$('#button').click(function() {
    /* function loadXMLDoc contents should go here */
}); 
```

并改变：

```
<input id="button" type="button" onclick="loadXMLDoc()" value="Get all sci..."/> 
```

到：

```
<input id="button" type="button" value="Get all sci..." /> 
```

要解决您在 JavaScript 中的*直接*问题，请从以下更改 loadXMLDoc 函数：

```
option.value = courses[i].getElementsByTagName("cat_num")[0].text;
option.text = courses[i].getElementsByTagName("title")[0].text; 
```

对此：

```
option.value = $(courses[i]).find("cat_num").text();
option.text = $(courses[i]).find("title").text(); 
```

这应该足以让您从那里创建表格。

# sql - SQL Server 2005 不会更新行

> ID：11544621
> 
> 赞同：0
> 
> 时间：2012-07-18T15:13:31.897
> 
> 标签：sql, sql-server

我目前有一个 SQL Server 2005 设置，并且已经成功运行了很长一段时间，没有任何问题。

截至今天早上，我们的网站应用程序一直在尝试对各个行执行更新。但是，每次发生更新时，数据库中的数据都不会更新。

我们的应用程序代码没有以任何方式更改，并且似乎没有任何类型的错误。

SQL Server 中是否有任何东西可以阻止对数据库执行更新？事务日志的大小是否会阻止数据在 SQL Server 数据库上更新？或者任何可能导致这种奇怪行为的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:18:52.600

我们在其中一台服务器上遇到了类似的行为，这是由于日志文件位于磁盘空间不足的硬盘驱动器上 - 因此值得检查。

还要检查是否未达到自动增长限制：

![在此处输入图像描述](../Images/8503abfdfa0c42404457bac3560474a2.png)

# java - 如何远程调试 Java 类？

> ID：11544628
> 
> 赞同：0
> 
> 时间：2012-07-18T15:13:43.690
> 
> 标签：java, debugging

我将其设置为 JAVAWS_VM_ARGS: -Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y

远程调试。一切正常，直到我想调试或进入 Java 类，如 java.lang.Class。而且我附上了来源......有人知道我是否需要做一些额外的事情吗？在我的 Eclipse 中还是在这些论点中？

谢谢，泰奥

# c# - 新进程进入时自动刷新列表视图

> ID：11544630
> 
> 赞同：0
> 
> 时间：2012-07-18T15:14:08.190
> 
> 标签：c#

```
public void processloader(object temp) 
{

    Process[] processes = null;
    try
    {
        processes = Process.GetProcesses();
    }

    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        Application.Exit();
        return;
    }
    listView1.BeginUpdate();
    listView1.Clear();
    int threadscount = 0;
    listView1.Items.Clear();
    foreach (Process p in processes)
    {
        try
        {
            string[] prcdetails = new string[] { p.ProcessName, p.Id.ToString(), p.StartTime.ToShortTimeString(), p.PriorityClass.ToString(), (p.WorkingSet64 / 1048576).ToString() + "Mb", p.Threads.Count.ToString() };
            ListViewItem proc = new ListViewItem(prcdetails);
            listView1.Items.Add(proc);
            threadscount += p.Threads.Count;
        }
        catch { Console.WriteLine(p); }
    }
    statusBar1.Panels[0].Text = "Processes : " + processes.Length.ToString();
    statusBar1.Panels[1].Text = "Threads : " + (threadscount + 1).ToString();
    listView1.EndUpdate();
    listView1.Refresh();

} 
```

这是我使用 System.threading.timer() 每秒调用此函数的刷新器块。我需要一个像原始任务管理器刷新功能这样的解决方案有人可以帮忙吗？请提供一些示例代码。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:17:33.723

使用以下链接对您的问题有帮助：

[http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/f8cb71ef-aba6-42f6-a462-533bca201d9e](http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/f8cb71ef-aba6-42f6-a462-533bca201d9e)

# c# - 在 CodeSnippetCompileUnit 中导入命名空间

> ID：11544634
> 
> 赞同：3
> 
> 时间：2012-07-18T15:14:20.873
> 
> 标签：c#, .net, codedom

当使用 CodeCompileUnit 通过 CodeDOM 生成代码时，您可以通过创建一个与定义类型的命名空间分开的 CodeNamespace 来导入命名空间。使用 Imports 属性允许您添加所需的名称空间。如果将 CodeNamespace 添加到 CodeCompile 单元，导入将出现在 CodeDOM 生成的文件的顶部。

例如，使用 CSharpCodeProvider 编译以下 CodeDOM 图：

```
CodeCompileUnit compileUnit = new CodeCompileUnit();
CodeNamespace importsNamespace = new CodeNamespace {Imports = {new CodeNamespaceImport("System"), new CodeNamespaceImport("System.Collections.Generic"), new CodeNamespaceImport("System.Linq")}};
CodeNamespace typeNamespace = new CodeNamespace("MyTypeNamespace");
compileUnit.Namespaces.Add(importsNamespace);
compileUnit.Namespaces.Add(typeNamespace); 
```

会产生

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.269
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;
using System.Linq;

namespace MyTypeNamespace {

} 
```

CodeSnippetCompileUnit 允许您编译已作为字符串输入的类型定义。例如，字符串“public class TestClass {}”可以用作 CodeSnippetCompileUnit 的值。将与上面相同的代码与 CodeSnippetCompileUnit 一起使用：

```
const string testClassCodeString = "public class TestClass {}";
CodeSnippetCompileUnit snippetCompileUnit = new CodeSnippetCompileUnit {Value = testClassCodeString};
CodeNamespace importsNamespace = new CodeNamespace {Imports = {new CodeNamespaceImport("System"), new CodeNamespaceImport("System.Collections.Generic"), new CodeNamespaceImport("System.Linq")}};
CodeNamespace typeNamespace = new CodeNamespace("MyTypeNamespace");
compileUnit.Namespaces.Add(importsNamespace);
compileUnit.Namespaces.Add(typeNamespace); 
```

将生成一个仅包含以下内容的文件：

```
public class TestClass {} 
```

如何将此类型包含在命名空间中，或将命名空间导入从 CodeSnippetCompileUnit 生成的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:16:43.327

即使 CodeSnippetCompileUnit 派生自 CodeCompileUnit，编译器在从 CodeDOM 图生成代码时也会忽略 Namespaces 属性。从 CodeSnippetCompileUnit 生成的代码仅包含对象的 Value 属性中的字符串。

如果您有上下文无关的代码片段，则导入命名空间或将代码片段包含在命名空间中的唯一选择是在设置 CodeSnippetCompileUnit 的值之前修改字符串。

使用上述问题中的代码作为起点的示例：

```
string namespaceString = "MyTypeNamespace";
string codeString = "public class TestClass {}";
string snippetValue = string.Format(@"
using System;
using System.Collections.Generic;
using System.Linq;

namespace {0}
{{

{1}

}}", namespaceString, codeString, Environment.NewLine);

var snippetCompileUnit = new CodeSnippetCompileUnit {Value = snippetValue}; 
```

这将产生：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace MyTypeNamespace
{

public class TestClass {}

} 
```

# node.js - npm 不会递归安装 devDependencies

> ID：11544641
> 
> 赞同：2
> 
> 时间：2012-07-18T15:14:47.010
> 
> 标签：node.js, npm

在`connect-assets`my`package.json`的依赖项中有。它`package.json`看起来像：

```
 "dependencies": {
    "connect-file-cache": "0.2.4",
    "mime": "1.2.2",
    "snockets": "1.3.6",
    "underscore": "1.1.7"
  },
  "devDependencies": {
    "async": "0.1.14",
    "coffee-script": "~1.3.1",
    "connect": "1.8.5",
    "nib": "0.2.0",
    "bootstrap-stylus": "0.2.0",
    "nodeunit": "0.5.4",
    "stylus": "0.22.2",
    "request": "2.1.1",
    "watchit": "0.0.4",
    "less": "1.3.0"
  } 
```

但是当我运行时`npm install`（有或没有`--dev`and `--dev-all`），它只安装了`connect-assets`, no `stylus`,`nib`等。

我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:30:25.503

这仅仅是因为不**应该**`npm`以这种方式工作。如果我想安装一些依赖的模块，我必须输入它们的目录。**`devDependencies`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T12:00:05.673

应该知道 npm 不会传递文件中指定的`.npmignore`文件。如果有人希望使用 git repo 中存在的 devDependency 中的文件，但神秘地不存在于 npm 交付中，这可能是罪魁祸首。**

# sql-server - 为 SQL Server 开发关系数据库的最简单方法

> ID：11544642
> 
> 赞同：-1
> 
> 时间：2012-07-18T15:15:01.043
> 
> 标签：sql-server, database-design, rdbms

对于那些有这方面经验的人，你会推荐什么特别的工具？

*   微软访问
*   微软视觉工作室
*   SQL 管理工作室
*   ETC？

与 SQL Server 2008 R2 一起使用，作为具有多个表和关系的在线预订系统的一部分，并合并到 ASP.Net 站点中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:33:41.957

你的问题有点模糊，所以我将给出一个可能比你需要的更广泛的答案。

TL;DR - SSMS 为数据库提供了一个很好的开发环境。

通常，在构建新系统时，我会在白板上设计数据结构。一旦这些定义得很好，我就使用 SSMS 的表设计器将它们放入 SQL 中，包括主键和外键，但没有额外的索引。

一旦我定义了基本布局，我将生成一个数据库图，将其打印出来并检查以确保 1) 我已经按照定义构建了系统，并且 2) 我没有看到任何明显的缺失项. 假设没有问题，我将开始开发。

此时，如果我想使用Entity Framework，我可以使用DB-First方法，我准备好了。如果我想使用另一种方法，例如 DataReaders/DataSets，我也可以使用。

我在 SSMS 中手动构建的任何视图、存储过程等。

在完成大部分功能之前，我会省略索引，以免过早地创建最终没有价值的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:30:40.893

SQL Management Studio 和 Visual Studio 都是不错的选择。使用 Visual Studio，您可以在一个窗口中处理数据库和项目。您可以在 Visual Studio 中执行大多数基本的数据库操作。SQL 管理为您提供额外的选项和灵活性，例如备份数据库向导、SQL Profiler、执行计划

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T15:19:58.433

我会选择 SQL Management Studio。我以前使用过它，它满足了所有要求，并且没有任何问题。而且我认为使用 SQL Server 2008 R2 将是一个安全的选择。

# javascript - 更改选择框中的语言时的jQuery调用函数

> ID：11544646
> 
> 赞同：0
> 
> 时间：2012-07-18T15:15:17.633
> 
> 标签：javascript, jquery, jquery-plugins

我有以下问题。为了翻译一个网站，我使用了[jQuery Localize](https://github.com/coderifous/jquery-localize/)插件。这工作正常。However, I want a CSS styled selectbox with flags and languages, and when a different option is selected the call to `$("[data-localize]").localize("example", { language: $(this).attr('value')`should be made to translate the page.

我目前正在使用这段代码，它适用于普通的非样式选择框。

```
<script type="text/javascript">
    $(function() {
        $('#polyglot-language-options').change(function() {
            if ($(this).attr('value') == "en") {
                $("[data-localize]").localize("example", {
                    language: $(this).attr('value')
                });
            }
            else if ($(this).attr('value') == "nl") {
                location.reload();
            }
        });
    });
</script> 
```

但我想对其进行样式设置，所以我尝试集成[“polyglot”语言切换器](http://www.ixtendo.com/polyglot-language-switcher-jquery-plugin/)。但是，当前代码不起作用。

如何整合 $("[data.localize]").localize(); 这段代码中的函数：

```
$('#polyglotLanguageSwitcher').polyglotLanguageSwitcher({
    effect: 'fade'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:22:42.990

此插件（[源代码](http://www.ixtendo.com/demo/polyglot-language-switcher-jquery-plugin-1.2/js/jquery.polyglot.language.switcher.js)）不遵循[jQuery 插件设计指南](http://docs.jquery.com/Plugins/Authoring)。我很快发现的错误：

*   它不允许链接，因为它不返回`this`
*   它一次只适用于一个元素（不使用`each()`）

*   它有一个奇怪的元素层次结构。它似乎需要一个带有 id 的元素，其中包含一个`form`包含 a `select`（如在[演示](http://www.ixtendo.com/demo/polyglot-language-switcher-jquery-plugin-1.2/index.html)中）。在我看来，这样的插件应该只在语言选择元素上调用。

*   它似乎是自动导航，想要配置页面结构。该精美框中的每个`li`项目都包含指向相应页面的链接。
*   因此，它既不会触发它所在的表单，也不会触发`change`您想要收听的事件。

就目前而言，您不能随意使用此特定插件。如果您想修复所有错误，我祝您度过愉快的时光:-) 尽管如此，还是*可以*操作插件代码，让您在选择事件上注册回调（您可以在其中调用本地化插件）。否则，您将需要选择其他选择插件（或自己从头构建一个，调整现有代码）

# apache - 使用 Mod_Rewrite 有条件地编辑 cookie

> ID：11544647
> 
> 赞同：0
> 
> 时间：2012-07-18T15:15:25.270
> 
> 标签：apache, http, mod-rewrite

1.  我的 cookie 值 JSESSIONID 的格式为 id.bunchofstuff
2.  我的 cookie 值 name_of_msfcookie 的形式是 bundleofstuff2
3.  如果 MSF cookie 存在，我想将我的 JSESSIONID 更改为 id.bunchofstuff2。

但是怎么做？这是我的尝试：

```
RewriteEngine On
RewriteCond %{HTTP_COOKIE} name_of_msfcookie=(.*) #checks for  existence of value (value can be any character or series of characters) in cookie
RewriteRule ^(.*) - [CO=JSESSIONID:JSESSIONID[7].name_of_msfcookie:.place.com] 
```

它不起作用 - 我认为 JSESSIONID[7].name_of_msfcookie 是无效语法）-=。我想不出任何有效的语法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:14:42.250

该语法对我来说很好，并且设置的 cookie 看起来是正确的。这是我在使用带有`name_of_msfcookie=something`cookie 的规则向 apache 发送请求时看到的：

```
Set-Cookie: JSESSIONID=JSESSIONID[7].name_of_msfcookie; path=/; domain=.place.com
Vary: Cookie 
```

不知道这是否是你想要做的。请注意，[CO] 标志*将 cookie 发送到浏览器*。

# git - 使用 Unix 实用程序拆分文本文件，例如 grep 和 sed

> ID：11544649
> 
> 赞同：1
> 
> 时间：2012-07-18T15:15:26.117
> 
> 标签：git, shell, sed, grep, dynamics-nav

我是 Unix 实用程序的新手，但尝试学习新东西并尝试将我的简单 ruby​​ 脚本切换到某种 shell 脚本做同样的事情。但我不知道如何处理这项任务。

我需要拆分一个包含几个小对象的大文件。每个对象都以如下行开头：`OBJECT Type Number Name`.

当我使用 Ruby 时，我正在遍历文件行，如果我找到了模式，我开始将行转储到文件中。直到我再次找到这种模式。

完成后，我将收到一堆较小的文件，而不是一个大文件。

但是是否可以使用 shell 脚本和 Unix 实用程序来做同样的事情？`grep`, `sed`... 无需调用`perl`, `ruby`?

**编辑**：我正在尝试开发自定义**git**命令并使用 Windows。所以只有 msysgit 附带的实用程序可供我使用。

创建的对象的文件名模式如下`Type-Number.txt`。

**更新**：感谢@perreal，我提出了以下代码，它可以满足我的要求。希望其他使用 git 的 Dynmaics NAV 开发人员会发现这`git object splitter`很有用：

```
#!/bin/sh
#
# Splits text file with multiple Dynamics NAV object into many files, one per object.
# If no input file name is given, default name (all.txt) will be used instead.
#

if [ -n "$1" ] 
then
    ALL="$1"
else
    ALL="all.txt"
fi

awk '{
    if (/^(OBJECT ).*/) {
        file = toupper(substr($2,1,3))$3".TXT"
        print > file 
    } else {
        print >> file 
    }
}' "$ALL" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:00:04.220

```
awk '{ 
  if (/(OBJECT.*)/) {
    file = OBJECT$2$3$4
    print > file
  } else {
    print >> file
  }
}' input_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:19:48.020

我认为您正在寻找“上下文拆分”命令： csplit

```
$ csplit filename '/OBJECT/' 
```

# android - 如何在图像视图中一起旋转、缩放和拖动，并在 Android 中使用边框

> ID：11544654
> 
> 赞同：4
> 
> 时间：2012-07-18T15:15:55.107
> 
> 标签：android, android-imageview, multi-touch

如何在 Android Imageview 中一起执行旋转、缩放和拖动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T10:07:52.540

对于旋转、缩放和旋转，[试试](http://code.almeros.com/android-multitouch-gesture-detectors#.UVv75zc8Hcd)这个。工作100%。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T10:00:44.733

你可以尝试这样的事情：

```
package com.my.test;

import android.app.Activity;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.ScaleGestureDetector.OnScaleGestureListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageViewActivity extends Activity implements OnClickListener, SurfaceHolder.Callback {
    ImageView view;
    final static String TAG = "TAG";
    ScaleGestureDetector scaleGestureDetector;
    Thread mDrawingThread;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /*PinchImageView view = new PinchImageView(this);
        view.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT));

        setContentView(view);*/
        setContentView(R.layout.main);
        PinchImageView view = (PinchImageView) findViewById(R.id.image);
        view.setDrawable(getResources().getDrawable(R.drawable.pic));

        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(this);
        button = (Button) findViewById(R.id.button2);
        button.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.getId() == R.id.button1) {
            PinchImageView view = (PinchImageView) findViewById(R.id.image);
            view.setDrawable(getResources().getDrawable(R.drawable.pic));
        }
        if(v.getId() == R.id.button2) {
            PinchImageView view = (PinchImageView) findViewById(R.id.image);
            view.setDrawable(getResources().getDrawable(R.drawable.penguins));
        }
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

}

/**
 * @author 
 *
 */
public class PinchImageView extends SurfaceView {

    final String TAG = "TAG";
    final static int HORIZONTAL_SNAP_GAP = 30;
    final static int VERTICAL_SNAP_GAP = 50;
    private static final int INVALID_POINTER_ID = -1;

    private Drawable mIcon;
    private float mPosX;
    private float mPosY;

    private float mLastTouchX;
    private float mLastTouchY;
    private int mActivePointerId = INVALID_POINTER_ID;

    private ScaleGestureDetector mScaleDetector;
    private float mScaleFactor = 1.f;

    public PinchImageView(Context context) {
        this(context, null, 0);
    }

    public PinchImageView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public PinchImageView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        //mIcon = context.getResources().getDrawable(R.drawable.pic);
        //mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(), mIcon.getIntrinsicHeight());

        mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        // Let the ScaleGestureDetector inspect all events.
        mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0);
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                if(mPosX > HORIZONTAL_SNAP_GAP) mPosX = HORIZONTAL_SNAP_GAP;
                if(mPosY > VERTICAL_SNAP_GAP) mPosY = VERTICAL_SNAP_GAP;
                Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
                int displayWidth = display.getWidth();
                int displayHeight = display.getHeight();
                if(mPosX + mIcon.getBounds().width() < getWidth() - HORIZONTAL_SNAP_GAP) mPosX = getWidth() - HORIZONTAL_SNAP_GAP - mIcon.getBounds().width();
                if(mPosY + mIcon.getBounds().height() < getHeight() - VERTICAL_SNAP_GAP) mPosY = getHeight() - VERTICAL_SNAP_GAP - mIcon.getBounds().height();

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            /*if(mPosX > 0 || mPosY > 0) {
                Animation an = new TranslateAnimation(mPosX, 0, mPosY, 0);
                an.setDuration(2000);
                an.setRepeatCount(-1);
                //an.initialize(10, 10, 10, 10);

                setAnimation(an);
                an.startNow();
                invalidate();
            }*/
            break;
        }
        }

        return true;
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.save();
        canvas.translate(mPosX, mPosY);
        canvas.scale(mScaleFactor, mScaleFactor);
        if(mIcon != null) mIcon.draw(canvas);
        canvas.restore();
    }

    private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            mScaleFactor *= detector.getScaleFactor();

            // Don't let the object get too small or too large.
            mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

            invalidate();
            return true;
        }
    }

    public void setDrawable(Drawable draw) {
        mIcon = draw;
        mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(), mIcon.getIntrinsicHeight());
        invalidate();
    }
} 
```

# wpf - 主页上的 Silverlight 按钮，链接到命令，从不调用方法

> ID：11544659
> 
> 赞同：0
> 
> 时间：2012-07-18T15:16:15.150
> 
> 标签：wpf, silverlight, button, icommand, delegatecommand

我是 Silverlight 的新手，而且我有点过头了，所以我可能遗漏了一些非常明显的东西。我正在使用图像编辑器，我的主页上有一个按钮，可以在我的画布上旋转图像或文本。但是，该按钮没有调用我的旋转方法。编辑：现在是。

这是我编写的与按钮相关的所有代码

主页.xaml

```
<Button Command="{Binding Path=Project.RotateCWElementCommand}"..../> 
```

项目.cs -

```
#region properties

public ICommand RotateCWElementCommand { get; set; }

#endregion

#region methods
public Project(int siteID)
    {
        this.RotateCWElementCommand = new DelegateCommand(RotateCWElement, CanRotateCWElement);
    }

    private void RotateCWElement(object param)
    {
        FrameworkElement element = this.SelectedElement;
        RotateTransform cwRot = new RotateTransform();

        cwRot.Angle = 90;
        cwRot.CenterX = element.ActualWidth * 0.5;
        cwRot.CenterY = element.ActualHeight * 0.5;
        element.RenderTransform = cwRot;

    }

#end region

#region Command conditions

private bool CanRotateCWElement(object param)
    {
        return true;
    }

#endregion 
```

现在的问题是它只会旋转一次，并且一些图像质量似乎也会丢失。当我单击并拖动它们时，图像会奇怪地移动，有时当我单击完整的图像质量时会返回。

如果有人对此有任何想法，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:27:39.230

听起来好像`Button.DataContext`不包含一个名为`Project.RotateCWElementCommand`

验证您的 Button 是否`DataContext`具有名为 的属性`Project`，并且`Project`具有名为`RotateCWElementCommand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:59:56.293

Visual Studio 中的输出窗口对于在 Silverlight 中查找绑定问题非常有帮助，并且有助于澄清 Rachel 的建议是否存在问题。

# r - R fitdistr 用于 Beta 分布：哪些起始参数？

> ID：11544660
> 
> 赞同：1
> 
> 时间：2012-07-18T14:46:13.380
> 
> 标签：r, estimation, python, beta

我需要将我的数据拟合到 Beta 分布中并检索 alpha 参数。我正在尝试从 python (rpy2) 使用 R，我的代码如下所示：

```
from rpy2 import *
from rpy2.robjects.packages import importr
MASS = importr('MASS') #myVector is a Numpy array with values between 0 and 1
MASS.fitdistr(myVector,"beta") 
```

但我得到这个错误：

```
Error in function (x, densfun, start, ...)  : 
  'start' must be a named list
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 82, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/rpy2/robjects/functions.py", line 34, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in function (x, densfun, start, ...)  : 
  'start' must be a named list 
```

我似乎找不到任何带有详细示例的 R 文档，所以我只找到[了这个](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/Beta.html)：

> ***start*** 一个命名列表，给出要使用初始值优化的参数。对于某些命名的分布，这可以省略（请参阅详细信息）。... 附加参数，用于 densfun 或 optim。特别是，它可用于通过下限或上限或两者指定边界。如果包含 densfun 的参数（或对应于字符串规范的密度函数），它们将保持固定。

我真的不知道：

*   将什么作为起始参数以及这将如何影响我的估计
*   在 Python 中使用什么语法，因为`start=list(shape1=0.5, shape2=0.5)`不会成功

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:48:33.657

好的，经过一点点挖掘，我找到了解决方案：

```
from rpy2.robjects import DataFrame
starter= DataFrame({'shape1':0.5,'shape2':0.5})
x = MASS.fitdistr(myValues, "beta", start=starter)) 
```

# jsp - 如何在 JSP 的自定义标记中使用 IntelliJ 语言注入

> ID：11544672
> 
> 赞同：13
> 
> 时间：2012-07-18T15:16:42.957
> 
> 标签：jsp, intellij-idea

我的公司在我们的 JSP 中使用自定义标签来包装 JavaScript。我无法让 IntelliJ 将这些标签的内容视为 JavaScript。这是一个简单的示例，说明我们的标签是什么样子的。

```
<ui:script>
  //Include javascript here...
  alert('Any code in here is treated as JavaScript');
</ui:script> 
```

有什么建议么？我尝试使用语言注入，但找不到正确的设置。

我刚刚注意到这个问题更多地与在`<ui:script>`标签中使用 JSP 特定语言有关。一个更糟糕的例子（注意 ${selectedReportID} 破坏一切的标签）：

```
<ui:script>
    new Kamino.DependencyLoader({
        source: [
            '/static/js/modules/folders/Report.js'
        ],

        onSuccess: function () {
            new Kamino.Report({
                id: '${selectedReportID}',
                element: 'content-reporting-report-list'
            });
        }
    }).load();
</ui:script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T19:40:12.287

这就是 IntelliJ IDEA 12 中对我有用的方法。

这是带有自定义标记 ( `aui:script`) 的 JSP 片段，它呈现了一些 javascript 代码：

![前](../Images/4528e253a1c1395245e22760f0421f6d.png)

如您所见，它是纯文本，即 alt+enter 不提供任何建议等。

这是我在**语言注入设置中添加的****XML 标记注入**：

 **![环境](../Images/56c7a8732013537e5e71086e03efdfe8.png)

请务必选择正确的命名空间。在此之后，相同的代码看起来像这样（打开文件后预计会有一些小的延迟）：

![后](../Images/abe01a4a562573c69aa1fa67be7ca199.png)

它的颜色不同，如您所见，标签之间的`aui:script`代码知道 javascript 上下文、可用的建议等。

如果这对你有用，请尝试，我没有像我想要的那样使用它:)**

# asp.net-mvc-3 - 无法使用 Entity Framework 4.3.1 和 Oracle ODAC 部署 MVC 3 项目

> ID：11544673
> 
> 赞同：1
> 
> 时间：2012-07-18T15:16:44.140
> 
> 标签：asp.net-mvc-3, deployment, oracle10g, entity-framework-4.3

我目前正在尝试将我一直在开发的 MVC 3 应用程序部署到我们的测试 Web 服务器，并且在正确加载所有内容时遇到了一个主要问题。为了尝试提供尽可能多的信息，我正在执行 bin 部署（我已将所有引用发送到本地复制），并且正在通过文件系统在 web 项目上进行基本发布到应用程序目录服务器。我正在使用的组件是：

实体框架 4.3.1 Oracle ODAC 11.2.0（版本 4.112.3.0）

此应用程序有 2 个实体框架对象，一个用于 SQL Server 数据库，另一个用于 Oracle 10g 数据库。我相信问题在于实体框架对象进入 Oracle 数据库。这是我的第一个 MVC 3 项目和我的第一个部署（这里有很多“新”变量），所以我不确定我是否遗漏了任何东西。我该如何解决这个问题？在我的本地机器上一切正常，只有当我将项目部署到服务器时，我才会遇到问题。

到目前为止我尝试过的事情：

我所有的控制器都继承自一个基本控制器（BaseController），实体框架对象的实例就在其中。我无法访问从 BaseController 继承的任何控制器的 Index 视图，但 HomeController 从 Controller 继承。此页面工作正常。我已经尝试从其他控制器中继承，这使我可以进入索引视图，但是回到 BaseController 会再次导致堆栈跟踪中的错误。该错误似乎发生在我声明我的实体框架对象进入 oracle 数据库的那一行：

```
protected internal RadixWebDataPRDX dbRadixData = new RadixWebDataPRDX(); 
```

我复制了 Oracle.DataAccess.dll，这仍然会导致问题。

我的这个错误的堆栈跟踪如下，谢谢：

“/RadixMVC”应用程序中的服务器错误。

找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not be installed.]
   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1420503
   System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +34

[ArgumentException: The specified store provider cannot be found in the configuration, or is not valid.]
   System.Data.EntityClient.EntityConnection.GetFactory(String providerString) +63
   System.Data.EntityClient.EntityConnection.ChangeConnectionString(String newConnectionString) +483
   System.Data.EntityClient.EntityConnection..ctor(String connectionString) +77
   System.Data.Objects.ObjectContext.CreateEntityConnection(String connectionString) +40
   System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName) +17
   RadixMVC.Models.Data.RadixWebDataPRDX..ctor() in C:\Users\862599\Documents\Visual Studio 2010\Projects\RadixMVC\RadixMVC\RadixMVC.Models.Data\RadixDataPRDX.Designer.cs:34
   RadixMVC.Controllers.BaseController..ctor() in C:\Users\862599\Documents\Visual Studio 2010\Projects\RadixMVC\RadixMVC\RadixMVC\Controllers\BaseController.cs:17
   RadixMVC.Controllers.AccountsPayableController..ctor() +29

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'RadixMVC.Controllers.AccountsPayableController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +181
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +77
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +66
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +209
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +50
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +23
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970356
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:30:07.427

Bob 说的是解决这个问题的方法。ODAC 组件也必须安装在服务器上（我不知道这一点）。谢谢鲍勃！

# android - 附加到条形码应用程序中多个按钮的侦听器异常

> ID：11544674
> 
> 赞同：2
> 
> 时间：2012-07-18T15:16:43.783
> 
> 标签：android, android-intent, zxing

好的，所以我正在为我的公司开发一种内部条形码扫描仪，以便在我们移动计算机和设备时使用。经过一些试验和错误后，我目前几乎通过 Intent 设置 Zxing 条码扫描仪。

这就是我想要做的。

在三个字段旁边，`EditText`我有三个`ImageButtons`，当单击时，实现`BarcodeScanner`, 一旦扫描返回值并将值输入到`EditText`字段中。我能够使用一个对应于一个的“听众”成功地做到这一点`ImageButton`。但是在尝试对`Buttons`一个侦听器使用多个之后，它会调用条形码扫描仪，但在尝试返回条形码值时会崩溃。

`RuntimeException`调试器显示主线程已暂停，我必须在 Logcat 中出现错误之前恢复调试器两次。

这是来自 LogCat 的错误日志：

> 07-17 17:38:49.251：E/AndroidRuntime(30942)：java.lang.RuntimeException：无法恢复活动 {com.fmi.inventory/com.fmi.inventory.MainActivity}：java.lang.RuntimeException：交付失败结果 ResultInfo{who=null, request=49374, result=-1, data=Intent { act=com.google.zxing.client.android.SCAN flg=0x80000 (has extras) }} 到活动 {com.fmi.inventory /com.fmi.inventory.MainActivity}：java.lang.NullPointerException

这是我的主要活动：

```
package com.fmi.inventory;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageButton;

public class MainActivity extends Activity {

    ImageButton button;
    ImageButton button1;
    ImageButton button2;
    EditText editField;
    Activity activity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        activity = this;
        button = (ImageButton)findViewById(R.id.scanCubeID);
        button1 = (ImageButton)findViewById(R.id.scanEmployeeID);
        button2 = (ImageButton)findViewById(R.id.scanConfigID);
        button.setOnClickListener(listener);
        button1.setOnClickListener(listener);
        button2.setOnClickListener(listener);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onResume() {
        super.onResume();

    }

    public void setCubeClick(){
        editField = (EditText)findViewById(R.id.editCubeID);
    }

    public void setEmployeeClick(){
        editField = (EditText)findViewById(R.id.editEmployeeID);
    }

    public void setConfigClick(){
        editField = (EditText)findViewById(R.id.editConfigID);
    }

    private View.OnClickListener listener = new View.OnClickListener() {
        public void onClick(View v) {
            IntentIntegrator integrator = new IntentIntegrator(activity);
            integrator.initiateScan();

        }
    };

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        switch (requestCode) {
        case IntentIntegrator.REQUEST_CODE:
            if (resultCode == Activity.RESULT_OK) {

                IntentResult intentResult = IntentIntegrator
                        .parseActivityResult(requestCode, resultCode, intent);

                if (intentResult != null) {

                    String contents = intentResult.getContents();
                    String format = intentResult.getFormatName();
                    this.editField.setText(contents);
                    // this.elemQuery.setText(contents);
                    //this.resume = false;
                    Log.d("SEARCH_EAN", "OK, EAN: " + contents + ", FORMAT: "
                            + format);
                } else {
                    Log.e("SEARCH_EAN", "IntentResult je NULL!");
                }
            } else if (resultCode == Activity.RESULT_CANCELED) {
                Log.e("SEARCH_EAN", "CANCEL");
            }
        }
    }
} 
```

这是我的 MainActivity 布局 .xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/editCubeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scanEmployeeID"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/scanCubeID"
        android:ems="10"
        android:hint="@string/edit_cubeid" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editEmployeeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/scanConfigID"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/editCubeID"
        android:layout_below="@+id/editCubeID"
        android:ems="10"
        android:hint="@string/edit_employeeid" />

    <EditText
        android:id="@+id/editConfigID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/scanConfigID"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/editEmployeeID"
        android:layout_below="@+id/editEmployeeID"
        android:ems="10"
        android:hint="@string/edit_configid" />

    <ImageButton
        android:id="@+id/scanCubeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_action_scan"
        android:onClick="onClick" />

    <ImageButton
        android:id="@+id/scanEmployeeID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_below="@+id/scanCubeID"
        android:src="@drawable/ic_action_scan"
        android:onClick="onClick" />

    <ImageButton
        android:id="@+id/scanConfigID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:contentDescription="@string/desc"
        android:layout_below="@+id/scanEmployeeID"
        android:src="@drawable/ic_action_scan"
        android:onClick="onClick" />

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/editConfigID"
        android:text="@string/button_continue" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:57:19.010

当您扫描后`Activity`进来时。您正在访问但它是**NULL**。`onActivityResult``editField`

 **因为你从来没有初始化它..

您正在初始化它们`setCubeClick`,`setEmployeeClick`或`setConfigClick`,

但我很害怕他们从来没有打电话给他们……试试`Initialize`他们`OnCreat`**

# .net-3.5 - 如何为此循环编写 Lambda 表达式？

> ID：11544676
> 
> 赞同：1
> 
> 时间：2012-07-18T15:16:47.030
> 
> 标签：.net-3.5, lambda

如果可能的话，我很好奇如何将其编写为 lambda 表达式。

```
For (int i = 0; i < MyList.Count; i++)
{
    MyMethod(MyList[i].Id, MyList[i].Value);
}

public void MyMethod(string id, string value)
{
   // do kung-fu
} 
```

我已经看到了如何使用 lambda 表达式来调用对象的方法，但是我找不到这样的方法。

我意识到循环工作得很好。我只是想知道它是否可以完成以及如何完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:19:47.583

我不会使用 lambda 表达式 - 但我*会*使用`foreach`循环：

```
foreach (var item in MyList)
{
    MyMethod(item.Id, item.Value);
} 
```

如果你*真的*想使用`List<T>.ForEach`你可以写：

```
MyList.ForEach(item => MyMethod(item.Id, item.Value)); 
```

......但我不会。

# apache - Apache 基于 URL 重定向到两个不同的服务器

> ID：11544678
> 
> 赞同：0
> 
> 时间：2012-07-18T15:16:58.857
> 
> 标签：apache, mod-rewrite

我想做以下事情：

我有一个服务器 A ( `http://server-a:9000/`) 和服务器 B ( `http://server-b:8000/`)。此外，我安装了一个在 80 端口上运行的 Apache。

当我访问 apache 时，`http://localhost/product`我想将此请求传递给`http://server-a:9000/product`

和

当我访问 apache 时，`http://localhost/details`我想将请求传递给`http://server-b:8000/details`.

我已经使用以下配置进行了此操作：

```
ProxyPass /product http://server-a:9000/product
ProxyPassReverse /product http://server-a:9000/product

ProxyPass /details http://server-b:8000/product
ProxyPassReverse /details http://server-b:8000/product 
```

但是使用此配置，原始 URL`http://localhost/product`将替换为`http://server-a:9000/product`.

如何配置我的 Apache 使其不替换 URL？显示的 URL 应始终为`http://localhost/product`.

先感谢您

托本

# python - 从本地服务器 python 脚本中检索 netstat

> ID：11544684
> 
> 赞同：0
> 
> 时间：2012-07-18T15:17:17.497
> 
> 标签：python, webserver

如何从本地服务器的 python 脚本中检索 netstat -a 数据。我已经尝试过`subprocess.Popen(['ssh','server','pass','netstat','-a'],stdout=file1)`，但它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:55:47.710

您必须从假定运行 netstat 的所需服务器获得基于密钥的授权。在没有基于密钥的授权的情况下，ssh 命令将返回询问密码的提示。

以下是基于密钥的授权链接：
[http](http://wp.uberdose.com/2006/10/16/ssh-automatic-login/)
://wp.uberdose.com/2006/10/16/ssh-automatic-login/或
[http://linuxproblem.org/art_9.html](http://linuxproblem.org/art_9.html)

交换密钥后，您问题中提到的命令不需要任何密码，运行时不会出现提示。

```
subprocess.Popen(['ssh','server','netstat','-a'],stdout=file1) 
```

# iphone - 当观察者为零时，观察者会自动移除吗？

> ID：11544690
> 
> 赞同：3
> 
> 时间：2012-07-18T15:17:37.897
> 
> 标签：iphone, objective-c, ios, observer-pattern

我正在`addObserver:selector:name:object:`使用`viewDidLoad`。

我正在使用`removeObserver:name:object:`in`viewWillDisappear:animated:`删除观察者。

如果我通过传递错误的参数来删除观察者失败会发生什么`removeObserver:name:object:`？
（例如，如果我将错误的通知传递给参数`name`或将错误的对象传递给`object`or ，则不会删除观察者`Observer`）

如果调用后观察者仍然不为零`removeObserver:name:object:`，我可以发现删除观察者失败，因为将调用 notificationSelector。

但是如果观察者在调用后变为 nil `removeObserver:name:object:`，我无法确定删除观察者是否失败。

当观察者为零时，观察者会自动移除吗？
还是`notification dispatch table`of`NSNotificationCenter`变得越来越大，最终应用程序变慢了？

**编辑**

当我使用 UIViewController 对象的子类作为观察者时，调用 ViewController 后应用程序不会崩溃`dealloc`。
但是当我使用其他类的对象时，应用程序在对象`dealloc`被调用后崩溃。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T15:33:13.300

**更新：**来自[`-[NotificationCenter removeObserver:]`](https://developer.apple.com/documentation/foundation/nsnotificationcenter/1413994-removeobserver?language=objc)：

> 如果您的应用面向 iOS 9.0 及更高版本或 macOS 10.11 及更高版本，则无需在其`dealloc`方法中取消注册观察者。否则，您应该调用此方法或`removeObserver:name:object:`在观察者或任何指定`addObserverForName:object:queue:usingBlock:`或被`addObserver:selector:name:object:`释放的对象之前调用。

**老答案：**

观察者不会被自动移除。从 NSNotificationCenter 类参考：

> 重要提示：通知中心不保留其观察者，因此，您必须确保在释放观察者之前取消注册观察者（使用 removeObserver: 或 removeObserver:name:object:）。（如果不这样做，如果中心向已释放的对象发送消息，则会生成运行时错误。）

因此，您应该致电

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

`dealloc`如果您不能 100% 确定之前没有删除观察者，请在您的方法中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:36:04.353

您只需要放入正确的观察者即可删除观察者。如果您将错误的参数传递给 name 或 object（或 nil），接收器将不会将它们用作删除标准。

所有的 Cocoa 程序都有一个默认的 NSNotificationCenter，所以一旦你删除了观察者，你就不必担心它会占用更多的内存。

# excel - 如何转换一组类型而不是。实例到 Excel 中所有这些实例的列表中

> ID：11544693
> 
> 赞同：0
> 
> 时间：2012-07-18T15:17:38.433
> 
> 标签：excel, vba

我已经四处寻找这方面的指导，但我有点缺乏经验，所以可能错过了一些明显的东西 - 抱歉！

我希望能够转换一组类型而不是。以动态的方式将实例添加到这些实例的列表中，以便我可以更新实例的数量，并且列表会更新（填写新行）。

```
Type 1  |   0
Type 2  |   3
Type 3  |   2
Type 4  |   1 
```

会回来

```
Project 1   |  Type 2
Project 2   |  Type 2
Project 3   |  Type 2
Project 4   |  Type 3
Project 5   |  Type 3
Project 6   |  Type 4 
```

如果没有 VBA 是可能的，那就太好了。

理想情况下，它不会以数组的形式返回——尽管如果这样做也不是问题（尤其是如果这样做更简单的话）

我在想VBA中会定义一些函数，它返回一个数组，可以坐超过100行并随着实例数量的变化而填充？

它需要能够在没有时进行管理。实例更改例如类型 4 有 10 个实例，类型 2 没有实例

希望这很清楚，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:18:39.353

您可以通过使用包含一些中间结果的帮助列在没有 VBA 的 Excel 中实现这一点。以下屏幕截图显示了它是如何工作的：

![Excel 的屏幕截图，结果在 F 和 G 列中，从第 2 行开始](../Images/1808ad9a2ea812527109f0291794f427.png)

这是 Excel 的屏幕截图，以`D`为中间列，所需结果以列`F`和`G`开始，从行开始`2`

行`1`包含引导您的公式的起始值。列`D`中的单元格用作计数器。每当它达到零时，就会从 column 中的单元格中读取其新值`B`。`D2`例如，单元格中的倒计时公式是

```
=IF(D1=0,INDIRECT("B"&(G1+2))-1,D1-1) 
```

并且对于该列中的所有单元格都是相似的，行索引会自动调整。

列中的单元格`G`跟踪当前的类型编号，`1`每当列中的单元格`D`命中时，都会增加`0`。`G2`例如，单元格的公式是

```
=IF(D1=0,G1+1,G1) 
```

这可以满足您的需求……几乎。如果列`B`中的单元格的值为 ，则会出现障碍`0`。在这种情况下，您需要跳到下一个非零单元格。这可以做到，并且整个示例也可以稍微清理一下。但是，我不想在这方面花费太多精力，直到您实际对此答案做出了一些回应，证明您有兴趣自己学习一些更高级的 Excel 公式。

# asp.net - 客户端上的 RadComboBoxItem hide() 不持久

> ID：11544694
> 
> 赞同：0
> 
> 时间：2012-07-18T15:17:48.597
> 
> 标签：asp.net, telerik-combobox

**你在做什么？**

使用 RadComboBox，我在某些条件下从用户视图中隐藏项目。

**有什么问题？**

但是，当我单击组合框，然后单击页面上的其他任何位置（换句话说，在聚焦组合框后失去焦点）时，组合项目完美地隐藏起来，我隐藏的所有项目再次变得可见。

**你还尝试过什么？**

考虑到我可能没有正确使用 Telerik RadCombo 客户端 API，我决定检查从 RadComboBox 聚焦和取消聚焦时，已删除或禁用的项目是否也会神奇地重新出现。

结果; 此问题仅在隐藏项目时发生，而不是在删除或禁用 RadComboBox 项目时发生。

**问题演示**

为了清楚和方便起见，我设置了一个非常简单地演示问题的页面。下载[TestRadComboItemHide.zip](http://www.ping24.com/downloads/TestRadComboItemHide.zip)并提取 TestRadComboItemHide.aspx。

将此 ASPX 放入网站/webapp 项目并运行，确保您在 bin 中安装了 Telerik dll，或者在您的开发计算机上安装了 Telerik。

**附加信息**

1.  我已在 Telerik 支持论坛上请求帮助。（24 小时前，还没有任何有用的回复）
2.  为 ASP.NET AJAX Q1 2010 使用 RadControls：2010.1.415.40

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:04:26.327

该问题的[解决](http://www.telerik.com/community/forums/aspnet-ajax/combobox/radcomboboxitem-hide-on-client-side-not-persisting.aspx)方法已发布在 Telerik 论坛上。该解决方案是由另一个论坛成员提供的，而不是 Telerik。

# javascript - ASP.NET 页面：当服务器返回文件进行下载时如何调用 javascript 方法

> ID：11544698
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:02.037
> 
> 标签：javascript, asp.net, postback

我有一个 ASP.NET 页面，其中发出请求，一段时间后服务器返回新页面或只是文件以供下载。我想在屏幕上指出服务器正在“处理中...”，而返回数据需要一些时间。

当用户点击提交时调用 javascript 很容易。此外，在 Postback 上重新加载页面会导致任何“处理中...”指示符（一些 DIV 在页面顶部弹出）消失。

我的问题主要是服务器返回的数据不是页面而是要存储的文件的情况。如何捕捉服务器开始返回数据并运行 javascript/remove "Processing" DIV 的时刻？如果回复不同的哑剧类型，它甚至是一种方法吗？在哪些情况下甚至是可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:37:12.373

有几种方法可以近似您尝试使用计时器和假设发生的事情，但要真正做到您所描述的，您需要轮询服务器以获取下载发生的指示。

我要做的是获取文件， Response.WriteFile 它，然后将标志写入某个存储，无论是数据库还是文件系统，或其他任何唯一标识事务已完成的存储。在客户端，您的脚本正在轮询服务器，而在服务器上，轮询响应正在检查存储中是否存在指示下载已发生的标志。

这里的关键是您必须更好地控制下载过程本身......仅仅重定向到文件不会给您所需的控制。如果您需要有关如何完成任何这些步骤的更多细节，请告诉我。

# ios - 我应该使用 NSString 还是 int32 存储外部对象 ID（来自 REST 服务器的 ID）？

> ID：11544700
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:11.240
> 
> 标签：ios, core-data

NSString 似乎是最安全的选择，但也是最懒惰的。我不太了解核心日期内部结构，所以我不确定使用索引整数属性而不是索引 NSString 属性会带来什么性能优势（如果有的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:24:12.860

关于性能的假设是不好的。没有证据，假设一文不值。

如果实现得好，数据库引擎可能会比 int32 更快地比较字符串，并且字符串索引也有可能比 int32 索引更快。所以不要假设 int32 总体上会更快。

从最简单的解决方案开始。最简单意味着更少的错误。懒惰是好的。

然后使用分析器查看占用 CPU 周期的内容并进行处理。如果基于字符串的查找有问题，请尝试使用 int32 id。或者其他方式，无论如何。这里重要的词是分析器。

# java - 我们实际上是在这里实例化一个抽象类吗？

> ID：11544701
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:12.817
> 
> 标签：java

```
// Concrete implementation built atop skeletal implementation
  static List<Integer> intArrayAsList(final int[] a) {
    if (a == null)
      throw new NullPointerException();
    return new AbstractList<Integer>() {
      public Integer get(int i) {
        return a[i]; // Autoboxing 
      }

      @Override
      public Integer set(int i, Integer val) {
        int oldVal = a[i];
        a[i] = val; // Auto-unboxing
        return oldVal; // Autoboxing
      }

      public int size() {
        return a.length;
      }
    };
  } 
```

到目前为止，我知道我们根本无法实例化抽象类。但是我们在这里不做同样的事情`return new AbstractList<Integer>()`吗？我很困惑 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:20:58.137

**不**，您正在创建一个*匿名*类。您正在对抽象类进行子类化，并同时提供一个实现并实例化它。

如果你试试这个：

```
return new AbstractList<Integer>(); 
```

你会得到一个错误，因为你不会提供一个具体的实现。

如果您感到困惑，您可以随时查看*官方*教程。这里是： [Java 内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:25:27.650

您正在创建一个继承抽象类的匿名类。您需要将 Abstract 类的所有抽象方法都实现到匿名类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:20:21.850

不，它不是实例化抽象类，因为代码提供了该类的实现。它就像一个匿名的内部类。

就像信息一样，所有类型的内部类在编译过程之后都会生成一个 .class 文件。所以，代码：

**测试.java**

```
public class Test {

    abstract class Foo {
        abstract void foo();
    }

    public Foo bar() {
        return new Foo() {
            @Override
            void foo() {
                System.out.println( "foo!!!" );
            }
        };
    }

    public static void main( String[] args ) {
        new Test().bar().foo();
    }

} 
```

会产生：

*   Test.class：文件的公共类（Test.java）
*   Test$Foo.class：Test 类内部的抽象内部类。
*   Test$1.class：在 bar 方法中编码的匿名内部类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:40:13.090

**不**，您正在创建一个*匿名*类。

您的代码：

```
return new AbstractList<Integer>() {
    public Integer get(int i) {
        return a[i]; // Autoboxing 
    }

    @Override
    public Integer set(int i, Integer val) {
        int oldVal = a[i];
        a[i] = val; // Auto-unboxing
        return oldVal; // Autoboxing
    }

    public int size() {
        return a.length;
    }
}; 
```

相当于：

```
...

return new myNewClass()

...

public class myNewClass extends AbstractList<Integer>{
    public Integer get(int i) {
        return a[i]; // Autoboxing 
    }

    @Override
    public Integer set(int i, Integer val) {
        int oldVal = a[i];
        a[i] = val; // Auto-unboxing
        return oldVal; // Autoboxing
    }

    public int size() {
        return a.length;
    }
} 
```

# python - 在python中计算文件中的字符串

> ID：11544704
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:15.683
> 
> 标签：python, string

我有 10 个文件，其中包含 100 个名为 randomnumbers(1-10).py 的随机数。我想创建一个程序，当找到一个字符串 123 时说“恭喜”，并计算 123 出现的次数。我有“祝贺”部分，我已经为计数部分编写了代码，但结果总是为零。怎么了？

```
for j in range(0,10):
n = './randomnumbers' + str(j) + '.py'          
s='congradulations' 
z='123' 
def replacemachine(n, z, s):
    file = open(n, 'r')             
    text=file.read()    
    file.close()    
    file = open(n, 'w') 
    file.write(text.replace(z, s))
    file.close()
    print "complete"
replacemachine(n, z, s) 
count = 0
if 'z' in n:
    count = count + 1
else:
    pass
print count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:08:43.120

考虑：

```
some_file_as_string = """\
184312345294839485949182
57485348595848512493958123
5948395849258574827384123
8594857241239584958312"""

num_found = some_file_as_string.count('123')
if num_found > 0:
    print('num found: {}'.format(num_found))
else:
    print('no matches found') 
```

做`'123' in some_file_as_string`一个有点浪费，因为它仍然需要查看整个字符串。无论如何，您最好计数并在计数返回大于 0 时执行某些操作。

你也有这个

```
if 'z' in n:
    count = count + 1
else:
    pass
print count 
```

这是询问字符串'z'是否存在，您应该检查`z`变量（不带引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T18:13:28.027

`if 'z' in n`正在测试文字字符串`'z'`是否在*文件名* `n`中。由于您仅在 内打开文件`replacemachine`，因此无法从外部访问文件内容。

最好的解决方案是从内部计算出现次数`replacemachine`：

```
def replacemachine(n, z, s):
    file = open(n, 'r')
    text=file.read()
    file.close()
    if '123' in text:
        print 'number of 123:', text.count('123')
    file = open(n, 'w')
    file.write(text.replace(z, s))
    file.close()
    print "complete" 
```

然后你就不需要那个代码了`replacemachine(n, z, s)`。

# ssl - Heroku：搭载安全

> ID：11544706
> 
> 赞同：1
> 
> 时间：2012-07-18T15:18:19.703
> 
> 标签：ssl, heroku, https

我想为我的客户创建一个需要存储一些机密信息（但没有绝密信息）的小型网站。我为此创建了一个 heroku 应用程序。由于我需要一些 SSL 安全性，因此我正在考虑使用[https://myapp.herokuapp.com](https://myapp.herokuapp.com)来捎带。我不在乎域名，只关心安全。有什么理由比我购买自定义证书更不安全吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:47:49.450

一个都没有。SSL 就是 SSL，它只取决于你想要什么 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:39:02.467

[如果您的网站使用 cookie，则在公共后缀](http://publicsuffix.org/)下托管您的应用程序会更安全，因为这样浏览器将保护您免受恶意超级 cookie 的侵害。herokuapp.com 不是公共后缀。

# php - 您可以使用 $_FILES[tmp_name] 来记住文件位置吗？

> ID：11544707
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:23.660
> 
> 标签：php, image, file-upload

我现在正在构建一个表单，如果缺少字段或输入错误的字段，它会将用户返回到表单本身。输入之一是图像文件。我想知道你是否想再次回显图像位置，你用`$_FILES[tmp_name]`吗？

例如`value="$_FILES[tmp_name]"`回显位置，这样用户就不必再次重新选择图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:23:39.340

不，您不能`$_FILES['tmp_name']`以这种方式使用，因为这不是它在用户计算机上的名称，而是它在您的`tmp`文件夹中的服务器上的临时名称。不确定是否有办法做到这一点。如果我找到任何东西，我会调查它并让你知道，但我怀疑有。

如果您使用 AJAX 文件上传，则不必担心这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:24:05.873

这是不可能的。`$_FILES[tmp_name]`反映服务器上已上传图片的完整路径。无法在浏览器中预先选择上传字段，也无法获取上传文件的完整客户端路径。

因此，如果出现错误，您可以将此临时文件复制到另一个位置并将已上传的图像显示给用户，而不是再次给他上传字段。但是如果用户没有尝试修复他的无效字段，您需要确保删除这个复制的图像。

或者您将字段的验证与图像上传部分分开。使用一些 ajax 魔法或单独的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:24:32.737

这是不可能的，您可以尝试在文件输入上使用 value 属性来查看它没有效果。

想象一下，如果你能做到这一点，那将是一个严重的安全问题（即：隐藏一个具有预填充值的文件输入，该值具有重要文件的公共路径，并与其他一些细节同时获取）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:24:49.200

如果表单是通过普通的 html 表单提交提交的，那么您无权访问用户的文件路径。您最好的选择是使用 AJAX 表单提交。

# deployment - 从新机器推送现有的 Heroku 项目

> ID：11544708
> 
> 赞同：1
> 
> 时间：2012-07-18T15:18:30.097
> 
> 标签：deployment, heroku

我正在尝试通过“git push heroku”将项目推送到 Heroku，但不断收到错误消息“您的带有指纹 XXXX 的密钥无权访问...”该项目已经存在，并且已从其他机器多次推送.” 我已经在这台机器上设置了 SSH 密钥，但是当我通过“heroku keys:add”添加它时，我得到了前面提到的错误。尝试重新开始，我做了以下事情：

heroku logout heroku login（使用我在 Heroku 上工作的凭据） heroku 密钥：删除 heroku 密钥（显示没有密钥） ssh-keygen -t rsa（生成新密钥） heroku 密钥：添加（成功添加新生成的密钥） heroku 键（我看到我添加的键）

然后在完成所有这些之后，如果我运行“git push heroku”，我仍然会收到关于我的密钥无法访问的错误消息。我确定我缺少一些基本的东西，但我无法弄清楚。任何帮助/指导将不胜感激。

克里斯

# c# - 使用指令匹配

> ID：11544711
> 
> 赞同：1
> 
> 时间：2012-07-18T15:18:41.063
> 
> 标签：c#, .net, regex

我有几个需要格式化的类。我需要将 using 指令放在命名空间内。换句话说，我必须改变：

```
// some comment about system
using System;
using System.Collections.Generics; // needed to create lists

namespace MyNamespace
{
     ... code 
```

进入：

```
namespace MyNamespace
{

     // some comment about system
     using System;
     using System.Collections.Generics; // needed to create lists

     ... code 
```

*所以简而言之，我希望能够匹配：*

```
// some comment about system
using System;
using System.Collections.Generics; // needed to create lists 
```

* * *

到目前为止我所做的是这个正则表达式：`(?s)(//.*?(?=\r))(\r\n|^)*using .*?;`

第一组`(//.*?(?=\r))(\r\n|^)`匹配评论。因此，如果用户有评论，我也愿意接受该评论。请注意，我`*`在组的末尾放置了一个 0 或更多评论。由于某种原因，第二次使用不匹配，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:08.313

尝试正则表达式`(?s)((//[^\n\r]*)\s*?)*((using [^;]+;)\s*?)+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:27:15.813

你真的需要正则表达式吗？为什么不使用纯字符串函数？您只需要`using`在 a 之前找到注释和指令`namespace`，然后将它们移到它后面（可能还有缩进）。

就像是：

*   逐行读取文件
*   如果该行以`//`（可能在空格之后）开头，请记住它（这是注释）
*   多行注释（`/*`to `*/`）比较棘​​手。
*   如果该行以 开头`using`，请记住它
*   如果该行以 开头`namespace`，则打印它，打印所有记住的行，然后打印其余行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:43:40.043

如果你在哪里有类似的东西：

```
// comment goes here
using System.Text.RegularExpressions; // for regexes
using System.Text; /* comment */
using System.Collections.Generic; // som comment
   /* this is a long comment
       that spans multiple lines
       in order to explain this using */
using System.Foo;

namespace EncloseCodeInRegion
{ 
```

正则表达式：

```
(((//.*?\r\n)|( */\*[\s\S]*?\*/))?(\r\n)? *using .+?;(( *//.*(?=\r))|( */\*[\s\S]*?\*/))?)(?=[\s\S]*?namespace) 
```

将匹配所有 using 语句。

# android - Android 和 Socket 上的 UTF-8 和 SJIS 问题

> ID：11544713
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:41.757
> 
> 标签：android, sockets, utf-8, shift-jis

我正在为 Android 和 PC 开发一个聊天应用程序，它使用套接字相互通信。问题是，虽然我需要该应用程序可以使用日语，但 Android 端会出现字符代码问题。

服务器在 PC 上工作，当所有客户端都在 PC 上时一切正常，所以我尝试在 Android 端进行所有编码/解码。在两个客户端上，我都尝试了 System.getProperty("file.encoding");

并发现 PC 使用 Shift_JIS 而 Android 使用 UTF-8。所以我做了

```
//on the Android output
OutputStream output = socket.getOutputStream();
PrintWriter writer = new PrintWriter(output);
writer.println(new String(msg.getBytes(), "Shift_JIS"));
writer.flush();

//on the Android input
InputStream input = socket.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(input));
String line = reader.readLine();
String lineDec = new String(line.getBytes("Shift_JIS"), "UTF-8"); 
```

但仍然遇到字符代码问题。

我已经尝试为彼此更改“Shift_JIS”和“UTF-8”但仍然没有工作......如果您有任何建议，我会很高兴。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:53:15.467

你为什么打电话`String.getBytes()`？您可以创建`OutputStreamWriter`/`InputStreamReader`并使用构造函数指定字符集。这将使用适当的字符集处理字符串到字节流的转换。只需在两边显式指定 UTF-8。就像是：

```
OutputStream output = socket.getOutputStream();
OutputStreamWriter writer = new OutputStreamWriter(output, "UTF-8");
writer.println("message"); 
```

# php - 为什么 PHP 一次发送所有内容？

> ID：11544714
> 
> 赞同：0
> 
> 时间：2012-07-18T15:18:44.673
> 
> 标签：php, javascript, html

> **可能重复：**
> [什么是输出缓冲？](https://stackoverflow.com/questions/2832010/what-is-output-buffering)

我有一些内容需要一段时间才能由 PHP 生成。同时，我想使用这个简单的 JS 技巧来显示“正在加载...”消息。一旦生成输出，该消息就会消失。

```
<p id="loading_msg">Loading...</p>

<h1>Hello</h1>
<?php
    sleep(2); // This is the greedy function call
    print '<p>This content definitely took a while to be generated !.</p>';
?>

<script type="text/javascript">
    var e = document.getElementById("loading_msg");
    e.style.display = "none";
</script> 
```

问题是，`sleep(2);`它不会发送所有内容直到阻塞，而是在生成所有页面之前等待，**然后**一次性发送**所有**内容。它显然破坏了我的“正在加载...”消息的目的，因为它在 2 秒过去之前没有出现。关于为什么以及如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:19:45.127

默认情况下，PHP 将缓冲您的输出并向用户发送较少数量的较大块。您可以使用[`flush`](http://php.net/manual/en/function.flush.php)立即将写入缓冲区的内容发送给用户：

```
<p id="loading_msg">Loading...</p>

<h1>Hello</h1>
<?php
    flush();
    sleep(2); 
```

[`ob_start`](http://ca.php.net/manual/en/function.ob-start.php)如果您之前通过调用php.ini 指令或 php.ini 指令启用了输出缓冲，这[`output_buffering`](http://www.php.net/manual/en/outcontrol.configuration.php)将不起作用`1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:28:25.263

使用 'flush' 可能适用于某些网络服务器/浏览器（meagar 是正确的，在启用输出缓冲时它不会工作 - 但这并不意味着它会在其余时间工作）。

由网络服务器决定何时恢复为分块编码 - 只要您不压缩输出流，大多数将在您调用 flush 时启动分块响应。然后由浏览器决定何时开始呈现不完整的响应 - 并且行为也会因内容而异 - 例如，在表格具有结束标记之前，不会开始呈现表格。

然后尝试在接收页面中处理它的更好的解决方案是在发送页面中处理它 - 例如使用 litebox 来显示消息。或者，消息可以显示在一个临时页面中，该页面重定向到生成的内容。

# android - 视图寻呼机中的 DatabaseObjectNotClosedException

> ID：11544724
> 
> 赞同：0
> 
> 时间：2012-07-18T15:19:02.217
> 
> 标签：android, database, cursor, android-viewpager

我有一个自定义的水平视图寻呼机来浏览列表视图，每个列表视图都是从数据库表中的条目中填充的。列表视图与数据库中的表一样多。现在的问题是我得到了 DatabaseObjectNotClosedException。我在 DbHelper 中有三个相关的方法。这是我的 DbHelper 中的代码。

```
public int countTables() {
    int count = 0;
    String SQL_GET_ALL_TABLES = "SELECT * FROM sqlite_master WHERE type='table'";
    Cursor cursor =DB.rawQuery(SQL_GET_ALL_TABLES, null);
    cursor.moveToFirst();
    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()) {
        count = cursor.getCount();
    }
    cursor.close();
    count = count - 2;
    return count;
}

public String getTableName(int count) {
    String tabname = "";
    String SQL_GET_ALL_TABLES = "SELECT * FROM SQLITE_SEQUENCE";
    Cursor cursor = DB.rawQuery(SQL_GET_ALL_TABLES, null);
    cursor.moveToPosition(count);
    tabname = cursor.getString(cursor.getColumnIndex("name"));
    cursor.close();
    DB.close();
    return tabname;
}
public Cursor getAll(String tableName) {
    return (getReadableDatabase().rawQuery("SELECT _id, note type FROM "
            + tableName, null));

} 
```

这是包含视图寻呼机类的主要活动。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewp);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.threepageviewer);
    myPager.setAdapter(adapter);
    DbHelper helper = new DbHelper(this);
    count = helper.countTables();
    myPager.setCurrentItem(count - 1);
    temp1 = temp = helper.countTables() - 1;
private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return count;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        helper = new DbHelper(Listing.this);
        View view = null;

        if (position == count) {
            view = inflater.inflate(R.layout.middle, null);
            ListView list = (ListView) view.findViewById(R.id.listView1);
            // helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(position);
            dataset_cursor = helper.getAll(tabName);
            startManagingCursor(dataset_cursor);
            adapter5 = new NoteAdapter(dataset_cursor);
            list.setAdapter(adapter5);
            // adapter.notifyDataSetChanged();
            temp--;
            temp1--;
        }

        if (position < temp) {
            temp--;
            temp1--;
            view = inflater.inflate(R.layout.left, null);
            ListView list1 = (ListView) view.findViewById(R.id.listView1);
            // helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(position);
            dataset_cursor1 = helper.getAll(tabName);
            startManagingCursor(dataset_cursor1);
            adapter1 = new NoteAdapter(dataset_cursor1);
            list1.setAdapter(adapter1);
            // adapter1.notifyDataSetChanged();
            // Toast.makeText(getBaseContext(), tabName, Toast.LENGTH_LONG);
            temp--;
            temp1--;
        }
        if (position > temp) {
            temp++;
            temp1++;
            view = inflater.inflate(R.layout.right, null);
            ListView list2 = (ListView) view.findViewById(R.id.listView1);
            // helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(position);
            dataset_cursor2 = helper.getAll(tabName);
            startManagingCursor(dataset_cursor2);
            adapter2 = new NoteAdapter(dataset_cursor2);
            list2.setAdapter(adapter2);
            // adapter2.notifyDataSetChanged();
        }

        ((ViewPager) collection).addView(view, 0);
        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }

} 
```

首先执行 countTable()，然后执行 getTableName()。我不能在 countTables 方法中使用 DB.close()，因为当我使用 getTableName 获取表名时，活动强制关闭说数据库已经关闭。

我尝试覆盖 onDestroy、onStop 等。我认为它没有用，因为当我浏览 listViews 时会显示 Execption。

我怎样才能摆脱这个 DatabaseObjectNotClosedException ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:22:30.200

你可以调用你的 onCreate() 方法

尝试

```
cursor.close() <--
helper.close(); 
```

# java - hadoop中的连续作业未运行

> ID：11544731
> 
> 赞同：0
> 
> 时间：2012-07-18T15:19:21.880
> 
> 标签：java, hadoop, mapreduce, hdfs

我有一组为 hadoop 编写的连续作业。只有第一种方法运行，并以成功运行结束。第二种方法（工作）根本没有开始。这是我的代码：

只是 distanceCalculator 方法运行，它不会继续进行。

```
import java.io.*;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.StringTokenizer;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.io.DoubleWritable;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapreduce.lib.input.*;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.Mapper.Context;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.omg.CosNaming.IstringHelper;

import weka.classifiers.functions.LibSVM;
import weka.core.Attribute;
import weka.core.FastVector;
import weka.core.Instance;
import weka.core.Instances;
import weka.filters.unsupervised.attribute.Add;

import com.wipro.decision.SVMDecision;
import com.wipro.instance.InstanceData;

//include path of test file

public class UniqueEntityClustering {

static Configuration conf = null;
static  Instances inpInst  = null;
static FastVector fvWekaAttributes = null;
static String pathOfTestFile = "/user/root/TestData.txt";
static String pathOfRefFile = "";
static String pathOfClustFile = "";
static String job3RefFile = "";
static int iterations = 0;

/* Mapper
 * The mapper that will read the input file and generate the distance file
 */

public static class ClustererMapper 
extends Mapper<Object, Text, Text, Text>{

    private FileSystem fs;
    private ArrayList<String> curClustArr = new ArrayList<String>();
    //static int iterations;

//      static String pathOfRefFile = "";

    public void setup(Context context) 
            throws IOException, InterruptedException {

        FileSystem fs = FileSystem.get(new Configuration());
        String fileName = "";
        if(iterations == 0)
            fileName = "/user/root/AllClusterDistances/part-r-00000";
        else
            fileName =     
"/user/root/AllClusterDistances"+iterations+"/part-r-00000";
        Path svmpath = new Path(fileName);
        InputStream ins = fs.open(svmpath);
        BufferedReader reader = new BufferedReader(new 
InputStreamReader(ins));
        String line=null;
        String[] clustPairIDs = null;
        String[] temp = null;

        if((line=reader.readLine())!=null)
            clustPairIDs = line.split("=");

        temp = clustPairIDs[0].split("/");
        curClustArr.add(0, temp[0]);
        curClustArr.add(1, temp[1]);
    }

    public void map(Object key, Text value, Context context) throws 
IOException, InterruptedException {

        String text = value.toString();
        String[] values = null;
        int flag = 0;

        if(iterations < 1)
            values = text.split("\\t");
        else
            values = text.split("=");

        if(!curClustArr.contains(values[0]))
            context.write(new Text(values[0]),new Text("0"));
        else
        {
            if(flag==0)
            {
                flag=1;
                String wKey = curClustArr.get(0) + "+" + 
curClustArr.get(1);
                context.write(new Text(wKey), value);
            }
        }
    }

}

public static class ClustererReducer 
extends Reducer<Text, Text, Text, Text> {

    public void reduce(Text key, Iterable<Text> values, 
            Context context
            ) throws IOException, InterruptedException {

        for (Text val : values) {
            context.write(key, val);
        }
    }
}

public static class DistMapper 
extends Mapper<Object, Text, DoubleWritable, Text>{

    private HashMap<String,Double> RefMap = new HashMap<String,Double>();

    public void setup(Context context) throws IOException, InterruptedException   
{

        String line = null;
        String[] temp = null;

        FileSystem fs = FileSystem.get(new Configuration());
        Path svmpath = new Path(job3RefFile);
        InputStream ins = fs.open(svmpath);
        BufferedReader reader = new BufferedReader(new   

InputStreamReader(ins));

        while((line=reader.readLine())!=null)
        {
            temp = line.split("=");
            RefMap.put(temp[0], Double.valueOf(temp[1]));
        }

    }

    public void map(Object key, Text value, Context context) throws 
IOException, InterruptedException {

        String text = value.toString();
        String[] values = text.split("=");
        String curMapEle = values[0];
        String[] curMapEleArr = curMapEle.split("+");

        String line = null;
        String curFileEle = null;
        String[] curFileEleArr = null;
        String temp = null;
        Double min = null;
        Double dist = null;
        FileSystem fs = FileSystem.get(new Configuration());
        Path svmpath = new Path(pathOfClustFile);
        InputStream ins = fs.open(svmpath);
        BufferedReader reader = new BufferedReader(new 
InputStreamReader(ins));

        while((line=reader.readLine())!=null)
        {
            curFileEle = line.split("=")[0];
            curFileEleArr = curFileEle.split("+");
            if(!curFileEle.equals(curMapEle))
            {
                for(int i=0; i<curMapEleArr.length; i++)
                    for(int j=0; j<curFileEleArr.length; j++)
                    {
                        temp = 
curMapEleArr[i]+"/"+curFileEleArr[j];
                        dist = RefMap.get(temp);
                        if(i==0 && j==0)
                            min=dist;
                        else
                        {
                            if(dist<min)
                                min=dist;
                        }
                    }
                temp = curMapEle + "/" + curFileEle;
                context.write(new DoubleWritable(min), new 
Text(temp));
            }    
        }
    }

}

public static class DistReducer 
extends Reducer<DoubleWritable, Text, Text, DoubleWritable> {

    public void reduce(Text key, Iterable<Text> values, Context context) throws 
IOException, InterruptedException {

        for (Text val : values) {
            context.write(val, new 
DoubleWritable(Double.valueOf(key.toString())));

        }
    }

}

public static class DistanceMapper 
extends Mapper<Object, Text, DoubleWritable, Text>{

    private FileSystem fs;
    static LibSVM svm = null;

    public void setup(Context context) 
    {
        try {
            fs = FileSystem.get(context.getConfiguration());
        } catch (IOException e) {
            e.printStackTrace();
        }

        Attribute Attribute1 = new Attribute("nameDist");
        Attribute Attribute2 = new Attribute("locDist");
        Attribute Attribute3 = new Attribute("workDist");

        FastVector fvNominalVal = new FastVector(2);
        fvNominalVal.addElement("0");
        fvNominalVal.addElement("1");
        Attribute ClassAttribute = new Attribute("class", fvNominalVal);

        fvWekaAttributes = new FastVector(4);
        fvWekaAttributes.addElement(Attribute1);    
        fvWekaAttributes.addElement(Attribute2);  
        fvWekaAttributes.addElement(Attribute3); 
        fvWekaAttributes.addElement(ClassAttribute);

        inpInst = new Instances("Rel", fvWekaAttributes, 1);           
        inpInst.setClassIndex(3);

        FileSystem fs;
        ObjectInputStream ob = null;
        try {
            fs = FileSystem.get(new Configuration());

            Path svmpath = new Path("/user/root/j48.model");
            InputStream ins = fs.open(svmpath);
            ob = new ObjectInputStream(ins);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        //          try {
        try {
            svm = (LibSVM)ob.readObject();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        /*      } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }*/

    }

    public void map(Object key, Text value, Context context
            ) throws IOException, InterruptedException {

        String text = value.toString();
        String[] values = text.split("\t");
        int mclusterID = Integer.valueOf(values[0]);
        String mfirstName = values[1];
        String mmiddleName = values[2];
        String mlastName = values[3];
        String mlocation = values[4];
        String[] mworkArray = new String[values.length - 5];
        for(int i=5; i<values.length; i++) {
            mworkArray[i-5] = values[i];
        }

        InstanceData mapInstance = new InstanceData(mfirstName, 
mmiddleName, mlastName, mlocation, mworkArray);

        FileSystem fs = FileSystem.get(new Configuration());
        Path path = new Path(pathOfTestFile); //fstatus.getPath();
        FSDataInputStream fis = fs.open(path);
        BufferedReader reader = new BufferedReader(new 
InputStreamReader(fis));
        String line = null;
        while ((line = reader.readLine()) != null) {

            String[] ele = line.split("\t");

            int fclusterID = Integer.valueOf(ele[0]);

            if(fclusterID == mclusterID)
                continue;

            String ffirstName = ele[1];
            String fmiddleName = ele[2];
            String flastName = ele[3];
            String flocation = ele[4];
            String[] fworkArray = new String[ele.length - 5];
            for(int i=5; i<ele.length; i++) {
                fworkArray[i-5] = ele[i];
            }

            InstanceData fileInstance = new InstanceData(ffirstName, 
fmiddleName, flastName, flocation, fworkArray);

            double nameDist = 
NameDistance.getDistanceBetweenNames(mapInstance, fileInstance);
            double locationDist = 
LocationDistance.getDistanceBetweenLocations(mapInstance, fileInstance);
            double workDistance =        
WorkDistance.getDistanceBetweenWorkArr(mapInstance, fileInstance);

            try {
                fs = FileSystem.get(context.getConfiguration());
            } catch (IOException e) {
                e.printStackTrace();
            }

            Attribute Attribute1 = new Attribute("nameDist");
            Attribute Attribute2 = new Attribute("locDist");
            Attribute Attribute3 = new Attribute("workDist");

            FastVector fvNominalVal = new FastVector(2);
            fvNominalVal.addElement("0");
            fvNominalVal.addElement("1");
            Attribute ClassAttribute = new Attribute("class", fvNominalVal);

            fvWekaAttributes = new FastVector(4);
            fvWekaAttributes.addElement(Attribute1);    
            fvWekaAttributes.addElement(Attribute2);  
            fvWekaAttributes.addElement(Attribute3); 
            fvWekaAttributes.addElement(ClassAttribute);

            inpInst = new Instances("Rel", fvWekaAttributes, 1);           

            inpInst.setClassIndex(3);

            Instance inst = new Instance(4);
            inst.setValue((Attribute)fvWekaAttributes.elementAt(0), 
nameDist);      
            inst.setValue((Attribute)fvWekaAttributes.elementAt(1), 
locationDist); 
            inst.setValue((Attribute)fvWekaAttributes.elementAt(2), 
workDistance); 
            inst.setValue((Attribute)fvWekaAttributes.elementAt(3), 
"0");

            inpInst.add(inst);

            //try {
            try {
                svm.classifyInstance(inpInst.instance(0));
            } catch (Exception e) {
                e.printStackTrace();
            }
            double prob = SVMDecision.decision_value;
            DoubleWritable outputKey = new DoubleWritable();
            outputKey.set(prob);
            Text outputValue = new 
Text(String.valueOf(mclusterID)+"/"+String.valueOf(fclusterID));

            context.write(outputKey, outputValue);
            /*                  } catch (Exception 
e) {
                e.printStackTrace();
            }*/
        }
        //}
    }
}

public static class DistanceReducer 
extends Reducer<DoubleWritable, Text, Text, DoubleWritable> {

    public void reduce(DoubleWritable key, Iterable<Text> values, 
            Context context
            ) throws IOException, InterruptedException {

        for (Text val : values) {
            context.write(val, key);
        }
    }
}

public static void distanceCalculator(Path inputDir, Path outputDir) throws 
Exception{

    conf = new Configuration();
    Job job = new Job(conf, "distanceCalculator");
    job.setJarByClass(UniqueEntityClustering.class);
    job.setInputFormatClass(TextInputFormat.class);

    job.setMapperClass(DistanceMapper.class);
    job.setReducerClass(DistanceReducer.class);

    job.setMapOutputKeyClass(DoubleWritable.class);
    job.setMapOutputValueClass(Text.class);

    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(DoubleWritable.class);

    FileInputFormat.addInputPath(job, inputDir);
    FileOutputFormat.setOutputPath(job, outputDir);

    System.exit(job.waitForCompletion(true) ? 0: 1);        

}

public static void findCluster(Path inputPath, Path outputPath, int ite) throws 
IOException, ClassNotFoundException, InterruptedException
{
    conf = new Configuration();
    Job job = new Job(conf, "Clusterer"+ite);
    job.setJarByClass(UniqueEntityClustering.class);
    job.setInputFormatClass(TextInputFormat.class);
    //ClustererMapper.iterations = ite;
    //ClustererMapper.pathOfRefFile = fileName;
    job.setMapperClass(ClustererMapper.class);
    job.setReducerClass(ClustererReducer.class);

    FileInputFormat.addInputPath(job, inputPath);
    FileOutputFormat.setOutputPath(job, outputPath);

    System.exit(job.waitForCompletion(true) ? 0: 1);
}

public static void distjob(Path inputPath, Path outputPath, int ite) throws 
IOException, ClassNotFoundException, InterruptedException
{
    conf = new Configuration();
    Job job = new Job(conf, "Dist"+ite);
    job.setJarByClass(UniqueEntityClustering.class);
    job.setInputFormatClass(TextInputFormat.class);

    job.setMapperClass(DistMapper.class);
    job.setReducerClass(DistReducer.class);

    FileInputFormat.addInputPath(job, inputPath);
    FileOutputFormat.setOutputPath(job, outputPath);
    System.exit(job.waitForCompletion(true) ? 0: 1);
}

public static void main(String[] args) throws Exception {

    conf = new Configuration();
    //String[] otherArgs = new GenericOptionsParser(conf, 
args).getRemainingArgs();
    if (args.length != 2) {
        System.err.println("Usage: wordcount <in> <out>");
        System.exit(2);
    }

    boolean isClusteringTerminated = false;

    String job2OutDir = null;
    String job2InpDir = null;
    String job3InpDir = null;
    String job3OutDir = null;
    String job1OutDir = null;
    String job1InpDir = null;
    String job3OutDirBase = null;

    String job2OutDirBase = "/user/root/clusterer";
    job3OutDirBase = "/user/root/AllClusterDistances";

    job1InpDir = "/user/root/TestData";
    job1OutDir = "/user/root/AllClusterDistances";

    //int iterations = 0;
    //String pathOfRefFile = "";

    //job2InpDir = "/user/root/OutputDist"+String.valueOf(iterations);

    //Start the jobs

    distanceCalculator(new Path(job1InpDir), new Path(job1OutDir));

    //while(isClusteringTerminated == false) {
        //parameters for job 2

        if(iterations == 0) {
            pathOfRefFile = job1OutDir + "/" + "part-r-00000";
            job2InpDir = job1InpDir;
        }
        else {
            pathOfRefFile = job3OutDir+ "/" + "part-r-00000";
            job2InpDir = job2OutDirBase + String.valueOf(iterations - 
1);
        }

        job2OutDir = job2OutDirBase + String.valueOf(iterations);
        findCluster(new Path(job2InpDir), new Path(job2OutDir), 
iterations); //, pathOfRefFile);

        //parameters for job 3
        job3RefFile = job1OutDir + "/" + "part-r-00000";
        job3InpDir = job2OutDir;
        job3OutDir = job3OutDirBase + String.valueOf(iterations);

        distjob(new Path(job3InpDir), new Path(job3OutDir), iterations);

        iterations++;

        isClusteringTerminated = determineTermination(new 
Path(job3OutDir));
    //}

}

public static boolean determineTermination(Path dirPath) {

    FileSystem fs = null;
    try {
        fs = FileSystem.get(new Configuration());
    } catch (IOException e) {
        e.printStackTrace();
    }

    FileStatus[] fstatuses = null;
    try {
        fstatuses = fs.listStatus(dirPath);
    } catch (IOException e) {
        e.printStackTrace();
    }
    for (FileStatus fstatus : fstatuses) {
        Path path = fstatus.getPath();
        if (! path.getName().startsWith("part-r")) {
            continue;
        }
        FSDataInputStream fis = null;
        try {
            fis = fs.open(path);
        } catch (IOException e) {
            e.printStackTrace();
        }
        BufferedReader reader = new BufferedReader(new 
InputStreamReader(fis));
        String line = null;
        try {
            line = reader.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }
        String[] values = line.split("=");
        double val = Double.valueOf(values[1]);
        if(val < 0.0)
            return true;    

    }
    return false;
}

} 
```

# android - 可跨文本可定制吗？安卓

> ID：11544732
> 
> 赞同：1
> 
> 时间：2012-07-18T15:19:21.850
> 
> 标签：android, spannable

```
String aux = getInserzionista(offerta.getIdInserzionista());

    sotto_titolo.setText("Offerta dal " + aux);

    int inizio = 12;
    int fine = 11+aux.length();

    sotto_titolo.setMovementMethod(LinkMovementMethod.getInstance());

    sotto_titolo.setText(sotto_titolo.getText().toString(),BufferType.SPANNABLE);

    Spannable mySpannable = (Spannable) sotto_titolo.getText();

    ClickableSpan myClickableSpan = new ClickableSpan() {
       @Override
       public void onClick(View widget) {

       }
    };

//if i put this, not work
mySpannable.setSpan(new ForegroundColorSpan(Color.RED), inizio, fine, 0);
mySpannable.setSpan(myClickableSpan, inizio, fine + 1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

![结果](../Images/afc8806a1290df1e7165affd70d5fe94.png)

但如果我把这个：

```
mySpannable.setSpan(new ForegroundColorSpan(Color.RED), 0, 4, 0); 
```

它有效，因为从 0 到 4 的文本是彩色的！

![结果](../Images/ea11fcc7778810dd32b4afd69abe26ef.png)

所以，我的问题是：

如何更改链接的颜色（蓝色和带下划线的颜色）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:23:03.733

因为您在这一行 mySpannable.setSpan(new ForegroundColorSpan(Color.RED), 0, 4, 0); 中设置了一个静态值 4。设置文本长度代替 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:08:32.090

您是否尝试过使用 updateDrawState()？

# jquery - 循环浏览每个输入时从选择中获取文本

> ID：11544738
> 
> 赞同：2
> 
> 时间：2012-07-18T15:19:37.130
> 
> 标签：jquery

我正在从 5 个选项卡表单中获取所有输入。循环浏览它们时，我会将它们添加到评论部分。我让它工作正常，但我想显示选择下拉菜单的文本而不是值，因为该值对用户没有意义。这是我正在使用的几个代码片段。这是里面和 $(:input.each(function(){} 我检查它是否是一个选择。如果是这样，我设置一个 tmp 变量并在名称上添加 '_in'，因为我有所有字段名称加上那个在确认选项卡上。然后我检查新变量的长度以确保它在确认选项卡上。如果是这样，请将 html 更新为文本。问题是它显示所有下拉文本选项。如果我这样做 .val( ) 它只给出所选值的值。

```
//Gives all text options from the drop down.
if ($(this).prop('type') == 'select-one') {
  var tmp = '#'+$(this).attr('name')+'_in';
  if ($(tmp).length > 0) {
    $(tmp).html($(this).text());
  }         
}

//Gives only value of selected option from drop down.
if ($(this).prop('type') == 'select-one') {
  var tmp = '#'+$(this).attr('name')+'_in';
  if ($(tmp).length > 0) {
    $(tmp).html($(this).val());
  } 
```

固定解决方案

```
if ($(this).prop('type') == 'select-one') {
  var tmp = '#'+$(this).attr('name')+'_in';
  var tmp2 = '#'+$(this).attr('name')+' option:selected';
  if ($(tmp).length > 0) {

tmp3 = $(tmp2).text();
$(tmp).html(tmp3);
}           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:23:09.907

您可以通过使用获取选择的文本

`$("#yourdropdownid option:selected").text();`

# android - 从另一个调用片段

> ID：11544739
> 
> 赞同：0
> 
> 时间：2012-07-18T15:19:40.353
> 
> 标签：android, android-fragments

我有扩展 FragmentActivity 的 Mainactivity ，我正在使用布局中加载片段

```
LinearLayout formLayout = (LinearLayout)findViewById(R.id.mainLayout);
        formLayout.removeAllViews();

          FragmentTransaction fragmentTransaction =      fragmentManager.beginTransaction();

         Search fragment = new  Search(maincontrolActivity.this);

          fragmentTransaction.add(R.id.mainLayout,fragment , "MY_FRAG");
          fragmentTransaction.commit(); 
```

在 PatientSearch 我通过使用调用 apoointementsearch （另一个片段）

```
startActivity(new Intent(Search.this.getActivity(), AppointementSearch.class).putExtra("Position",0));

but it crashs giving this log ,I am sure that I put them in the AndroidManifest

07-18 17:13:15.780: E/AndroidRuntime(3579): FATAL EXCEPTION: main
07-18 17:13:15.780: E/AndroidRuntime(3579): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.appnetics/com.appnetics.AppointementSearch}: java.lang.InstantiationException: com.appnetics.AppointementSearch
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1739)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.os.Looper.loop(Looper.java:132)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread.main(ActivityThread.java:4123)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at java.lang.reflect.Method.invoke(Method.java:491)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at dalvik.system.NativeStart.main(Native Method)
07-18 17:13:15.780: E/AndroidRuntime(3579): Caused by: java.lang.InstantiationException: com.appnetics.AppointementSearch
07-18 17:13:15.780: E/AndroidRuntime(3579):     at java.lang.Class.newInstanceImpl(Native Method)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at java.lang.Class.newInstance(Class.java:1301)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.Instrumentation.newActivity(Instrumentation.java:1025)
07-18 17:13:15.780: E/AndroidRuntime(3579):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1730)
07-18 17:13:15.780: E/AndroidRuntime(3579):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:51:43.537

只需添加一个片段，您只需要一个`Fragment`,

```
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
Search fragment = new  Search();
fragmentTransaction.add(R.id.mainLayout,fragment , "MY_FRAG");
fragmentTransaction.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:46:20.797

我不确定我是否正确理解了你，但你不能有意地开始新的片段。如果`AppointementSearch.class`是片段，则不能使用此行：

```
startActivity(new Intent(Search.this.getActivity(), AppointementSearch.class).putExtra("Position",0)); 
```

显示新片段的使用`FragmentManager`或启动包含该片段的新活动。

# javascript - 检测窗口选项卡上的情况

> ID：11544743
> 
> 赞同：0
> 
> 时间：2012-07-18T15:19:47.503
> 
> 标签：javascript, jquery, html, detection

是否可以从其他网站检测打开的选项卡上的活动？

例如，访问者从我的网站单击了一个窗口选项卡到 example.com，我想检测他何时按下了里面的某个按钮，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:25:09.293

这是不可能的，因为如上所述，这是一个巨大的安全风险。想象一下这可能会导致侵犯隐私。

尽管有免责声明，但唯一的方法是通过浏览器扩展/插件或在与浏览器相同的计算机上运行的应用程序。

# c++ - 使用 Gdiplus::Image 处理错误

> ID：11544748
> 
> 赞同：2
> 
> 时间：2012-07-18T15:20:00.213
> 
> 标签：c++, image, error-handling, gdi+

使用时如何处理错误`Gdiplus::Image::FromFile()`？我故意让它尝试读取一个不存在的文件。
它没有抛出任何异常，也没有返回 NULL。

我可以事先检查文件是否存在，但如果文件不是有效的图像文件，或者出现其他问题怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:27:28.453

在 GDI+ 的示例中：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms535371%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535371%28v=vs.85%29.aspx)因此，您应该验证 Image::GetLastStatus() ==好的[http://msdn.microsoft.com/en-us/library/windows/desktop/ms535383%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535383%28v=vs.85%29.aspx)

# bash - Bash 随机化变量

> ID：11544749
> 
> 赞同：2
> 
> 时间：2012-07-18T15:20:03.247
> 
> 标签：bash, variables, random

我正在编写一个 bash 脚本，以基本上在 CPU 上播放石头剪刀布。我遇到的问题是我不能让它在变量之间随机选择，而是选择第一个变量。这是需要工作的代码部分：

```
r="rock"
p="paper"
s="scissors"
RPS=$r||$p||$s    #The line that needs to be fixed
#rps=$r||$p||$s works but only outputs rock...
echo $RPS 
```

我已经尝试在论坛上寻找方法来做到这一点，但谷歌只会弹出论坛以从另一个文件中随机选择行，而不是在文件本身中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:25:34.253

```
declare -a values=(rock paper scissors)
echo "${values[$(( $RANDOM % ${#values[*]} ))]}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:29:26.477

像这样的东西怎么样：

```
choices=(rock paper cissors) # Define an array with 3 choices
RPS=${choices[$RANDOM%3]}    # Pick one at random 
```

### 讨论

Bash 有一个名为 $RANDOM 的内置变量，它返回一个随机整数。

# css - ie7中输入的浮动偏移错误

> ID：11544751
> 
> 赞同：0
> 
> 时间：2012-07-18T15:20:05.353
> 
> 标签：css, internet-explorer-7

我正在研究一些跨浏览器的表单样式，并在 ie7 中遇到了问题。

如果您在 ie7 中查看我的链接[小提琴](http://jsfiddle.net/8zpcN/)，您会看到第一行的输入是偏移的。在其下方类似样式的跨度不会遇到相同的问题。

我正在测试的系统适用于我尝试过的所有其他浏览器。

有没有人可以解决这个问题，或者更简单的方式来设置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:17:54.197

答案是在所有字段元素周围包裹一个 div 以消除 hasLayout 错误。

更多信息可以在这里找到：http: [//my.safaribooksonline.com/book/web-development/css/9780321703392/the-usual-suspects/ch04lev1sec3](http://my.safaribooksonline.com/book/web-development/css/9780321703392/the-usual-suspects/ch04lev1sec3)

```
<form action="#" class="form-horizon">
<fieldset>
    <legend>Test Form</legend>
    <!-- div fixes hasLayout inherited margin bug in ie7-->
    <div>
        <label for="input-focused">Focused</label>
        <input type="text" id="input-focused" class="focus" value="focused input" />
        <label for="input-no-edit">Non editable</label>
        <span id="input-no-edit" class="no-edit-input">none editable</span>
    </div>
</fieldset>
</form> 
```

# dbus - 在 Gjs / Gnome Shell 中调用 DBus 方法

> ID：11544758
> 
> 赞同：7
> 
> 时间：2012-07-18T15:20:27.683
> 
> 标签：dbus, gnome-shell, gjs

如果我有总线名称、对象路径和接口，我如何从 Gjs（在 gnome-shell 扩展中）调用 DBus 方法？

我正在寻找以下 python 代码的等价物：

```
import dbus
bus = dbus.SessionBus()
obj = bus.get_object("org.gnome.Caribou.Keyboard", "/org/gnome/SessionManager/EndSessionDialog")
obj.Open(0, 0, 120, dbus.Array(signature="o")) 
```

（请注意，由于某些 python-dbus 魔术，我没有显式使用该接口，但我可以使用`iface = dbus.interface(obj, "org.gnome.SessionManager.EndSessionDialog")`。由于我有接口名称，我可以使用查询它的解决方案。另请注意，此示例将是在 Gjs 中很傻，因为它回调到 gnome-shell）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-27T20:39:42.810

The import `imports.dbus` is deprecated since gnome-shell 3.4. The new way is to use `Gio` as described [here](https://mail.gnome.org/archives/gnome-shell-list/2013-February/msg00059.html):

```
const Gio = imports.gi.Gio;

const MyIface = '<interface name="org.example.MyInterface">\
<method name="Activate" />\
</interface>';
const MyProxy = Gio.DBusProxy.makeProxyWrapper(MyIface);

let instance = new MyProxy(Gio.DBus.session, 'org.example.BusName',
'/org/example/Path'); 
```

(Note that the original post uses `makeProxyClass`, correct is `makeProxyWrapper`.)

You can get the interface definition, for example, by using introspection. For pidgin/purple do:

```
$ dbus-send --print-reply --dest=im.pidgin.purple.PurpleService \
/im/pidgin/purple/PurpleObject org.freedesktop.DBus.Introspectable.Introspect 
```

Further explanations on introspection and inspection of interfaces can be found [here](http://cheesehead-techblog.blogspot.de/2012/08/dbus-tutorial-introspection-figuring.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T13:37:06.380

这应该给你一个更好的主意：

```
gjs> const DBus = imports.dbus;
gjs> for (let i in DBus) log(i); 
```

# google-chrome-extension - 无法让 NPAPI 插件适用于 mime 类型“image/webp:webp:WebP”

> ID：11544764
> 
> 赞同：0
> 
> 时间：2012-07-18T15:20:43.877
> 
> 标签：google-chrome-extension, npapi

我已经为 webP 编译了 NPAPI 插件：

[http://code.google.com/p/webp-npapi-linux/](http://code.google.com/p/webp-npapi-linux/)

它在我的 Firefox 中效果很好。我根本不明白如何让它从谷歌浏览器工作。我创建了 json 文件：

```
$ cat manifest.json
{
  "name": "My First Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension that I made.",
  "plugins": [
    { "path": "webp-npapi.so", "public": true }
  ]
} 
```

然后我启动谷歌浏览器，进入 chrome://extensions，点击“加载解压的扩展...”。我可以看到它出现在列表中：

```
My First Extension - Version: 1.0 (Unpacked)
The first extension that I made.
ID: bakhhdpebhmgoaecbmpkcbnmcmnamhhk 
```

但是我仍然无法打开没有 *.webp 图像！

我的测试 HTML 页面是：

```
<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN"> 
<html> 
 <head> 
  <title> 
   Hello World Demonstration Document
  </title> 
 </head> 
<embed type="image/webp:webp:WebP" id="pluginId">
<script>
  var plugin = document.getElementById("pluginId");
  var result = plugin.myPluginMethod();  // call a method in your plugin
  console.log("my plugin returned: " + result);
</script>
 <body> 
  <h1> 
   Hello, World!
  </h1> 
<img src="1.sm.webp" alt="too bad"/>
 </body> 
</html> 
```

文件在本地下载（wget [http://www.gstatic.com/webp/gallery/1.sm.webp](http://www.gstatic.com/webp/gallery/1.sm.webp)）。ldd 在我看来还不错：

```
$ ldd webp-npapi.so
    linux-vdso.so.1 =>  (0x00007fffafdad000)
    libwebp.so.2 => /usr/lib/x86_64-linux-gnu/libwebp.so.2 (0x00007ff82fd60000)
    libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007ff82fa4c000)
    libm.so.6 => /lib/libm.so.6 (0x00007ff82f7c9000)
    libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007ff82f5b3000)
    libc.so.6 => /lib/libc.so.6 (0x00007ff82f251000)
    /lib64/ld-linux-x86-64.so.2 (0x00007ff8301c9000) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T10:40:57.287

这是解决方案。由于某种原因，firefox 有一个内置的 mime 类型机制 (??) 并且确实将 webp 识别为图像。另一方面，铬需要被告知图像是 webp。

在我的 Linux 机器上，我所要做的就是注册 MIME 类型`/etc/mime.types`（或`~/.mime.types`在用户级别注册）。要验证 mime 类型是否已注册，请发出：

```
$ grep webp /etc/mime.types
image/webp                  webp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:39:19.527

插件无法加载可能有多种原因。

1.  **npapi 插件在成功加载之前在 chrome 中崩溃**
    在这种情况下，您需要使用以下命令从终端运行 google chrome：并调试问题（例如，[像这样](http://www.firebreath.org/display/documentation/Debugging+Plugins#DebuggingPlugins-Linux)`google-chrome --plugin-startup-dialog`使用 gdb ）

2.  **未找到插件的依赖项（在我的情况下发生了这种情况，请参阅截图）**
    ![webp-npapi.so 插件的 ldd](../Images/577fd7b69fd0f7ef9fe38e28e3ed5c0e.png) 确认库（libwebp.so）已安装并由 webp-npapi.so 通过执行`ldd webp-npapi.so`（并检查缺少库的输出） ）。在我的情况下，webp-npapi 插件是针对 构建的`libwebp.so.0`，但是编译源代码会导致更新的库版本`libwebp.so.3`。您是否从源代码编译了 webp-npapi-plugin？

3.  **该插件正确加载，但您的 embed/object 标签不太可能出错，如果它在 Firefox 中未更改 - 您可以** *使用*该插件
    发布示例页面吗？

# regex - mod_rewrite（动态到静态 URL）中的 RewriteCond %{QUERY_STRING} 不起作用

> ID：11544773
> 
> 赞同：-1
> 
> 时间：2012-07-18T15:21:10.133
> 
> 标签：regex, apache, .htaccess, mod-rewrite, redirect

由于我很幸运地设法让查询字符串正确重定向之前只是传递了查询字符串参数，并且整个网站和 webmasterworld 中关于查询字符串重定向的总体建议似乎是“将其作为 RewriteCond 查询字符串处理”，我尝试对一组大约 10 个 URL 使用以下类型规则。

示例网址：

```
http://www.example.org/training_book.asp?sInstance=1&EventID=139 
```

到目前为止我所拥有的：

```
RewriteCond %{QUERY_STRING} ^training_book.asp\?sInstance=1&EventID=139  
RewriteRule /clean-landing-url/ [NC,R=301,L] 
```

所以，我想要发生的是

```
http://www.site.org/training_book.asp?sInstance=1&EventID=139 301> http://www.site.org/clean-landing-url 
```

但相反，正在发生的是：

```
http://www.site.org/training_book.asp?sInstance=1&EventID=139 301> http://www.site.org/training_book.asp/?sInstance=1&EventID=139 
```

它在查询字符串之前附加一个正斜杠，然后解析完整的 URL（显然是 404ing。）

我错过了什么？实际 %{QUERY_STRING} 参数是否存在正则表达式问题？

提前致谢！

# 编辑 -

这就是我到目前为止的位置。

根据下面@TerryE 的建议，我尝试实施以下规则。

我有一组带有以下参数的 URL：

```
http://www.example.org/training_book.asp?sInstance=1&EventID=139
http://www.example.org/training_book.asp?sInstance=2&EventID=256
http://www.example.org/training_book.asp?sInstance=5&EventID=188 
```

等等

需要重定向到

```
http://www.example.org/en/clean-landing-url-one
http://www.example.org/en/clean-landing-url-two
http://www.example.org/en/clean-landing-url-three 
```

等等

这是我目前拥有的 htaccess 文件的确切结构，包括目前运行良好的“简单”重定向的完整示例（注意 - [http://example.com](http://example.com) > [http://www.example.com](http://www.example.com)重定向已强制执行在 httpd.conf 中）

```
#301 match top level pages
RewriteCond %{HTTP_HOST} ^example\.org [NC]
RewriteRule ^/faq.asp /en/faqs/ [NC,R=301,L] 
```

此块中的所有 URL 都属于这种类型。所有这些 URL 都可以完美运行。

```
#Redirect all old dead PDF links to English homepage.
RewriteRule ^/AR08-09.pdf /en/ [NC,R=301,L] 
```

此块中的所有 URL 都属于这种类型。所有这些 URL 都可以完美运行。

问题就在这里：我仍然无法获得以下类型的 URL 来重定向。根据@TerryE 的建议，我尝试如下更改语法。下面的块不能正常工作。

```
#301 event course pages
RewriteCond %{QUERY_STRING} sInstance=1EventID=139$
RewriteRule ^training_book\.asp$ /en/clean-landing-url-one? [NC,R=301,L] 
```

这个的输出是

```
http://staging.example.org/training_book.asp/?sInstance=1&EventID=139 
```

（目前适用于 staging.example.org，将适用于 example.org）

（在最初的问题中，我通过从 training_book 将其更改为 event_book 来“隐藏”了一些实际语法，但我已将其改回尽可能真实。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:48:29.030

文档。QUERY_STRING包含. *_* `?`您的条件正则表达式不应该匹配。这更有意义：

```
RewriteCond %{QUERY_STRING}   ^sInstance=1&EventID=139$ 
RewriteRule ^event_book\.asp$ /clean-landing-url/ [NC,R=301,L] 
```

正斜杠是由不同的 Apache 过滤器 (DirectorySlash) 引起的。

# wpf - 如何强制 DataGrid 为其列重建 VisualTree

> ID：11544778
> 
> 赞同：0
> 
> 时间：2012-07-18T15:21:57.370
> 
> 标签：wpf, datagrid, visual-tree, datagridcolumnheader

我有带有 DataGrid 的 WPF 表单。用户可以通过按钮手动将新列添加到数据网格中。这是添加新列的代码：

```
 private void ColumnAdornerAddButton_MouseDown(object sender, MouseButtonEventArgs e)
    {
        DataGridTextAdornerColumn column = new DataGridTextAdornerColumn();
        column.Header = "New column";
        column.HeaderStyle = (Style)FindResource("columnHeader");
        column.AdornerTemplate = (DataTemplate)FindResource("columnAdorner");
        Binding binding = new Binding("Data");
        binding.Mode = BindingMode.TwoWay;
        column.Binding = binding;

        grid.Columns.Insert(grid.Columns.Count - 1, column);

        //Add adorner
        DataGridColumnHeader header = GetColumnHeaderFromColumn(column);
        AddAdorner(header, column.AdornerTemplate, column.IsReadOnly);
    }

    private DataGridColumnHeader GetColumnHeaderFromColumn(DataGridColumn column)
    {
        // dataGrid is the name of your DataGrid. In this case Name="dataGrid" 
        List<DataGridColumnHeader> columnHeaders = GetVisualChildCollection<DataGridColumnHeader>(grid);
        foreach (DataGridColumnHeader columnHeader in columnHeaders)
        {
            if (columnHeader.Column == column)
            {
                return columnHeader;
            }
        }
        return null;
    } 
```

问题是，在我将列添加到网格后，它的标题尚未生成，并且它不存在于可视树中。因此，我无法获取新列的标题并将装饰器应用于它。我试图在网格的可视树上递归调用 ApplyTemplate，但没有任何运气。

有没有办法强制网格为代码中的新列生成 DataGridColumnHeader？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:47:36.340

嗨，将列添加到数据网格后，调用 DataGrid 的方法 UpdateLayOut()。

```
datagrid.UpdateLayout(); 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:42:49.920

我只是想增强解决方案，该方法
`datagrid.Items.Refresh();` 将有助于重新创建视图（Datagrid）。因此您可以在 datagrid 中看到更新的值

# vba - 如何使 application.reminder 事件起作用？

> ID：11544779
> 
> 赞同：1
> 
> 时间：2012-07-18T15:21:58.947
> 
> 标签：vba, events, outlook

我在一个类模块中有这个代码 - 正如在[msdn](http://msdn.microsoft.com/en-us/library/ff870058.aspx)和[这个 stackoverflow 线程上所说](https://stackoverflow.com/questions/8497523/macro-works-in-2003-wont-work-in-2007)

```
Public WithEvents objReminders As Outlook.Reminders

Private Sub Application_Startup()
    Set objReminders = Application.Reminders
End Sub

Private Sub Application_Reminder(ByVal Item As Object)
    Call Send_Email_Using_VBA
    MsgBox ("Litigate!") 
End Sub 
```

[我尝试使用该线程](http://www.vbaexpress.com/forum/showthread.php?t=35985)底部的代码，但也不会启动。

我能得到的只是 Outlook 的提醒弹出窗口。没有断点被击中，Msgbox 永远不会显示 - 即使我删除了函数调用。我已经重新启动了几次，但没有结果。

我错过了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:31:02.730

您`WithEvents`用于处理对象`Reminder`上的事件`objReminders`，但您没有声明要匹配的子项。在我下面的代码中，请注意`objReminders_...`与您的`Application_...`潜艇。

我在 Outlook 2003 中使用了您的代码（我没有 Office 2007，因此无法在那里进行测试），并得出以下结论：

```
Public WithEvents objReminders As Outlook.Reminders

Private Sub objReminders_Snooze(ByVal ReminderObject As Reminder)
    Call Send_Email_Using_VBA
    MsgBox ("Litigate!")
End Sub

Private Sub Class_Initialize()
    Set objReminders = Outlook.Reminders
End Sub 
```

在普通代码模块中用这个实现：

```
Sub test()

Dim rmd As New ReminderClass

rmd.objReminders.Item(1).Snooze 1 'Triggers objReminders_Snooze in class module
rmd.objReminders.Item(2).Snooze 1

End Sub 
```

现在，这触发了`Snooze`我明确调用的事件。但是，这也应该适用于您在事件首次出现时触发（据我所知，这不会在提醒从 a 唤醒时触发`Snooze`）。我没有设置任何提醒来测试 - 如果您有除此之外的困难，我将为此设置一些我自己的测试。

```
Private Sub objReminders_ReminderFire(ByVal ReminderObject As Reminder)
    Call Send_Email_Using_VBA
    MsgBox ("Litigate!")
End Sub 
```

* * *

**更新：**

在 2010 年玩过这个之后，我发现以下方法可以工作（至少会触发，但它似乎一直在触发）：

```
Private Sub Application_Reminder(ByVal Item As Object)
    Call Send_Email_Using_VBA
    MsgBox ("Litigate!")
End Sub 
```

这是在`ThisOutlookSession`对象模块中设置的。添加这个对你有什么帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T19:34:44.787

值得注意的是，这必须在 ThisOutlookSession 代码中，而不是不同的模块

```
Private Sub objReminders_ReminderFire(ByVal ReminderObject As Reminder)
    Call Send_Email_Using_VBA
    MsgBox ("Litigate!")
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T09:27:28.247

此问题的实际答案如下：如果您正在设置定期约会，并将代码放入约会的 Application_Reminder 事件中，除非您在约会本身的下拉菜单中特别设置提醒期限，否则不会触发提醒事件。

我玩了几天，除非它是一个单一的约会，否则该事件永远不会触发 - 重复从来没有奏效。

设置一个提醒时间为 5 分钟的定期约会，一切正常。

仅供参考，这是我使用存储在本地文件夹中的电子邮件模板每月发送用户信息（自我密码重置）提醒的一些代码。现在完美运行。如果发送称为链接“发送邮件”的自动电子邮件，请记住创建自己的新类别。每个约会都必须设置为此类别，并在 Sub 中进行检查。

```
 Private Sub Application_Reminder(ByVal Item As Object)
      Dim objMsg As MailItem

       On Error Resume Next

    'IPM.TaskItem to watch for Task Reminders
    If Item.MessageClass <> "IPM.Appointment" Then
      Exit Sub
    End If

    If Item.Categories <> "Send Mail" Then
      Exit Sub
    End If

     'Check which Template for Reminder we need to send by looking for the keyword in the Reminder Appointment

If InStr(Item.Subject, "e-Expenses Password Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\e-Expenses Resetting your own password.oft")

ElseIf InStr(Item.Subject, "e-Learning Password Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\e-Learning Resetting your own password.oft")

ElseIf InStr(Item.Subject, "EMIS Password Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\EMIS Web Resetting your own password.oft")

ElseIf InStr(Item.Subject, "NHS email Password Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\NHS Net eMail Resetting your own password.oft")

ElseIf InStr(Item.Subject, "STRATA Password Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\STRATA Resetting your own password.oft")

ElseIf InStr(Item.Subject, "VPN Password String Resets") > 0 Then
    Set objMsg = Application.CreateItemFromTemplate("C:\Reminder Emails\VPN Resetting your own password.oft")

Else: Exit Sub

End If

 'Location is the email address we send to, typically to ALL users
  objMsg.To = Item.Location
  objMsg.Subject = Item.Subject  'Make the subject of the Appointment what we want to say in the Subject of the email
  objMsg.Send

  Set objMsg = Nothing
End Sub 
```

玩得开心。

戴夫·托马斯

# sql - AS400 SQL 查询确定谁是今年 70.5 岁的记录

> ID：11544782
> 
> 赞同：0
> 
> 时间：2012-07-18T15:22:06.030
> 
> 标签：sql, db2, ibm-midrange

我正在努力寻找今年将年满 70.5 岁的人。

dob7 = DECIMAL(7) YYYYDDD

```
select acctno, name, address, status, year(curdate()) - year(date(digits(dob7))) as Age
from mydata.cdmast cdmast
left join mydata.cfmast cfmast
on cdmast.cifno = cfmast.cifno
where status <> 'R' and year(curdate()) - year(date(digits(dob7))) >= 70 
```

上面的代码返回以下错误：

`[Error Code: -181, SQL State: 22008] [IBM][System i Access ODBC Driver][DB2 for i5/OS]SQL0181 - Value in date, time, or timestamp string not valid`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:41:27.657

看到其他答案后，我正在提交自己的答案。这应该有在 上使用任何索引的好处`dob7`，并且应该在没有太多“技巧”的情况下工作。

我已经修改了`WHERE`您原始查询中的子句。我假设“.5 年”意味着“6 个月”，尽管这是可以调整的。我故意将计算包裹在 CTE 中以“封装”逻辑；这些操作应该几乎是免费的。

```
WITH Youngest (dateOfBirth) as (
               SELECT CURRENT_DATE - 70 YEARS - 6 MONTHS
               FROM sysibm/sysdummy1),
     Converted (dateOfBirth, formatted) as (
                SELECT dateOfBirth, YEAR(dateOfBirth) * 1000 + DAYOFYEAR(dateOfBirth)
                FROM Youngest)
SELECT acctno, name, address, status, 
       YEAR(CURRENT_DATE) - INT(dob7 / 1000) 
                          - CASE WHEN DAYOFYEAR(CURRENT_DATE) < MOD(dbo7, 1000)
                                 THEN 1
                                 ELSE 0 END as Age
FROM myData.cdMast cdMast
JOIN Converted
ON Converted.formatted >= dob7
LEFT JOIN myData.cfMast cfMast
ON cdMast.cifno = cfMast.cifno
WHERE status <> 'R' 
```

请注意，它会将闰日出生的人视为在 3 月 1 日过生日（由于`DAYOFYEAR()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:18:46.860

从[DATE](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/db2/rbafzscadate.htm)标量函数文档：

> 实际长度为 7 的字符串，以*yyyynnn*形式表示有效日期，其中*yyyy*是表示年份的数字，而*nnn*是 001 到 366 之间的数字，表示该年的某一天。

重新格式化日期：

```
DATE(SUBSTR(DIGITS(DOB7),4,4) || SUBSTR(DIGITS(DOB7),1,3)) 
```

要在当年年底前选择 70.5 岁或以上：

```
YEAR(CURRENT_DATE) - YEAR(DATE(SUBSTR(DIGITS(DOB7),4,4) || SUBSTR(DIGITS(DOB7),1,3))) = 70
AND MONTH(DATE(SUBSTR(DIGITS(DOB7),4,4) || SUBSTR(DIGITS(DOB7),1,3))) >= 6
OR YEAR(CURRENT_DATE) - YEAR(DATE(SUBSTR(DIGITS(DOB7),4,4) || SUBSTR(DIGITS(DOB7),1,3))) > 70 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:47:47.877

错误消息是说 DOB7 的内容不能转换为日期。DOB7 的值是否与其中一种有效格式匹配？请注意，许多需要引号。 [http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/db2/rbafzscadate.htm](http://publib.boulder.ibm.com/infocenter/iseries/v6r1m0/index.jsp?topic=/db2/rbafzscadate.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:26:03.617

试试这个：

```
(year(curdate()) - mod(dob7, 10000)) >= 70 
```

这是使用模运算来提取年份，而不是尝试将其转换为日期。

顺便说一句，以这种方式存储日期似乎很尴尬。数据库具有对日期和时间的内置支持，因此通常最好以本机格式存储它们。

如果您的出生日期确实是 yyyymmm，那么以下内容应该可以使用多年：

```
(year(curdate()) - cast(dob7/1000 as int)) >= 70 
```

半年时间：

```
(year(curdate()) - cast(dob7/1000 as int))+(1-mod(dob7,1000)/365.0) >= 70.5 
```

# javascript - Rails：传递值：视图到控制器以使用 Javascript/Ajax 进行查看

> ID：11544785
> 
> 赞同：1
> 
> 时间：2012-07-18T15:22:12.727
> 
> 标签：javascript, ruby-on-rails, ajax

在我的一种形式中，我有一个名为 event_id 的元素，我从下拉框中选择该值。选择 event_id 后，我想使用 Ajax 调用控制器，并将 panel_event_id 作为我可以在表单的其余部分中使用的 ruby​​ 变量返回。这就是我正在做的事情：

在 routes.rb 中，我有以下内容：

```
match 'panel_event_id', :to => "panels#event_id" 
```

我有以下 javascript 函数（不确定语法）：

```
<script type="text/javascript">
  $('select').change(set_session_event_id);

  function set_session_event_id()
  {
    var event_id = document.getElementById("event_id");
    var event_id_value = event_id.value;
    $.post('panel_event_id', { set_event_id: event_id_value });
  }
</script> 
```

我在 panel_controler.rb 中放入了什么，方法如下：

```
def panel_event_id
end 
```

在我看来，我该如何采取行动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:32:55.167

您可以在控制器中呈现 json：

```
def panel_event_id
  ...
  render :json => panel_event.as_json(:only => [ :id ])
end 
```

之后，您可以处理 post 方法的成功事件。请参阅此处的文档：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)和此处[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)和此处[http://api.rubyonrails.org/classes/ActiveModel/序列化程序/JSON.html#method-i-as_json](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json)。

# c# - LINQ to Entities 不支持指定的类型成员。

> ID：11544790
> 
> 赞同：0
> 
> 时间：2012-07-18T15:22:18.793
> 
> 标签：c#, json, asp.net-mvc-3

尝试从 Json Post 中的模型中提取值以使用自动完成功能在断点处出现此错误

> LINQ to Entities 不支持指定的类型成员“SuggPromise”。仅支持初始化器、实体成员和实体导航属性

这是模型

```
 public string SuggPromise
    {
        get
        {
            return Title;
        }
    } 
```

这是Json请求

```
 public ActionResult QuickSearch(string term)
    {
        var promises = promiseRepository.Promises
            .Where(r => r.Title.Contains(term))
            .Take(10)
            .Select(r => new { label = r.SuggPromise});
        return Json(promises, JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:07:03.840

您只能使用映射到 LINQ-To-Entities 表达式中的数据库列的属性。`SuggPromise`似乎不是一个。要么使用：

```
yadda.blah.Select(r => new { label = r.Title }) 
```

在 EF 中进行投影；或者

```
yadda.blah.AsEnumerable()
    .Select(r => new { label = r.Title }) 
```

获取整个实体，然后使用 LINQ-To-Objects 进行投影。

# c# - FileStream，只产生一个结果？

> ID：11544791
> 
> 赞同：2
> 
> 时间：2012-07-18T15:22:19.447
> 
> 标签：c#, filestream

我有两个文件流，它们从不同的文件收集不同的信息：

```
FileStream dataStruc = new FileStream("c:\\temp\\dataStruc.txt", FileMode.Create, FileAccess.ReadWrite);

FileStream csvFile = new FileStream("c:\\temp\\" + fileName + ".txt", FileMode.Create, FileAccess.ReadWrite);

StreamWriter sw = new StreamWriter(csvFile);
StreamWriter swc = new StreamWriter(dataStruc); 
```

当两个流写入器都用于获取相同的信息时，如下所示：

```
sw.WriteLine(sheet); 
swc.WriteLine(sheet); 
```

然后`sw`streamwriter 从文件中获取信息。我是否错误地设置了我的文件流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:24:41.347

假设您没有收到任何异常/错误，并且`csvFile`FileStream 的正确路径之类的基本内容已通过验证并被发现是正确的：尝试[`Flush()`](http://msdn.microsoft.com/en-us/library/system.io.stream.flush.aspx)使用[`Close()`](http://msdn.microsoft.com/en-us/library/system.io.stream.close). 更好的是：使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)声明。

**编辑**
再次阅读您的问题后：您确定您只是没有切换文件流吗？

```
StreamWriter sw = new StreamWriter(csvFile);
StreamWriter swc = new StreamWriter(dataStruc); 
```

与

```
StreamWriter sw = new StreamWriter(dataStruc);
StreamWriter swc = new StreamWriter(csvFile); 
```

您的问题和描述相当模糊：“*两个流作者都用于获取相同的信息*”。如何使用流**编写**器来**获取**信息？另外：“ *sw streamwriter 有来自文件的信息*”：你能更具体吗？这没有意义。

不管是什么情况；使用调试器卢克！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:36:45.053

我想你有两个 StreamWriters 对文件的**并发**访问冲突。

您使用 . 打开流`FileMode.Create`。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)（我的亮点）：

> 指定操作系统应该创建一个新文件。**如果文件已经存在，它将被覆盖**。此操作需要 FileIOPermissionAccess.Write 权限。System.IO.FileMode.Create相当于请求如果文件不存在就使用CreateNew；**否则，使用 Truncate**。

我不确定第二个`StreamWriter`（取决于初始化的顺序）是否会覆盖第一个的文件`StreamWriter`或只是失败。无论哪种方式，他们都会尝试相互冲突的工作。

可能的解决方案：

*   确保流仅一个接一个地访问文件，例如通过在第二个流访问文件之前关闭第一个流，例如使用[using](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块。
*   更改`FileMode`流上的 ，以便在可能的情况下不会覆盖现有文件。（请参阅上面的文档。）

# c# - 聚焦 wpf 列表框而不更改所选项目

> ID：11544798
> 
> 赞同：3
> 
> 时间：2012-07-18T15:22:30.573
> 
> 标签：c#, wpf, data-binding, listbox, prism

### 数据模板中的列表框

```
 <ListBox 
                ItemsSource="{Binding Path=(Duties:IPicker.Choices)}"
                   SelectedValue="{Binding Path=(Duties:IPicker.Selection), 
                   ValidatesOnDataErrors=True, 
                   UpdateSourceTrigger=PropertyChanged, 
                   NotifyOnValidationError=True}">
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel MaxWidth="{DynamicResource ListWidth}" />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox> 
```

### SelectedValue 绑定完全有效只有当用户控件加载时不移动焦点

当我导航回控件（使用 Prism 导航）时，我想关注用户控件中的第一个元素，这恰好是列表框。

但是当我添加以下行时，每次我向后导航时，选择都会重置为第一个项目，显示为蓝色突出显示 - 选择不会停留在先前选择的项目上。

```
Loaded += (sender, e) => 
        control.MoveFocus(new TraversalRequest(FocusNavigationDirection.First)); 
```

没有这条线一切正常，除了列表框没有键盘焦点（先前选择的列表框项目的灰色突出显示而不是蓝色突出显示）。

此外，只有当我在向前导航之前关注另一个列表框时才会出现问题，即有两个 lisbox，如果我在向前导航之前停留在第一个列表框上，那么即使使用 movefocus，也会保留正确的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:30:40.463

尝试在加载事件上将焦点设置在列表框的选定项目上，如下所示 -

```
Loaded += ((sender, e) =>
{
   ListBoxItem item = myListbox.ItemContainerGenerator.ContainerFromItem(myListbox.SelectedItem) as ListBoxItem;
   item.Focus();
}); 
```

# javascript - jQuery 通过父函数返回 $.post 回调

> ID：11544799
> 
> 赞同：0
> 
> 时间：2012-07-18T15:22:31.257
> 
> 标签：javascript, ajax, jquery, callback

> **可能重复：**
> [从 $.ajax() 函数内部返回值](https://stackoverflow.com/questions/8187201/return-value-from-inside-of-ajax-function)

以下面的函数为例：

```
function($data) {
    $.post(
        url,
        {
            'data': $data
        },
        function(response){
            return response;
        }
    );
} 
```

我怎样才能使父函数：`function($data) { ... }`return `response`？

由于脚本的性质，我无法将其余的逻辑放入 post 回调中。*（见下文）*

```
var methods = {

        'email' : function(field) {
            var value = field.val();
            var response = false;
            field.addClass("loading");
            $.post(
               ajaxData.url, 
               {
                  'action':'validate_form',
                  'value': value,
                  'method': field.data('method')
               }, 
               function(response){
                   return response;
               }
            ).complete(function() {
                field.removeClass("loading");
            });
        },

        'password' : function(field) {
            var value = field.val();
            var response = {};
            if (value.length < 8) {
                response.result = false;
                response.message = 'Your password must be a minimum of 8 characters';
            } else {
                response.result = true;
                response.message = false;
            }
            return response;
        },

        'verify_password' : function(field, dependancies) {
            var value = field.val();
            var response = {};
            if (value != dependancies["password"].val()) {
                if (!dependancies["password"].val() || !value) {
                    return false;
                }
                response.result = false;
                response.message = 'Passwords do no match';
            } else {
                response.result = true;
                response.message = false;
            }
            return response;
        }
    } 
```

其中的每个属性`methods`都是一个可以调用的函数，该`return`值稍后在脚本中使用。

```
var response = methods[field.data('method')](field, field.data('dependancies')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:24:37.613

由于**A** of`AJAX`代表`Asynchronous`，所以你不能随心所欲地返回。您可以尝试使用如下回调函数：

```
function($data, callback) {
    $.post(
        url,
        {
            'data': $data
        },
        function(response){
            return callback(response);
        }
    );
} 
```

例如：

```
var myObj = {
   myfunc: function($data, callback) {
        $.post(
            url,
            {
                'data': $data
            },
            function(response){
                return callback(response);
            }
        );
    }
}

myObj.myfunc($data, function(response) {
  // process here with response
}); 
```

# python - PyQt4 - 关闭对话框窗口，exec_（）不起作用

> ID：11544800
> 
> 赞同：1
> 
> 时间：2012-07-18T15:22:31.543
> 
> 标签：python, dialog, pyqt4

尝试使用 PyQt4 构建用户界面。弹出一个对话框窗口，我希望它做一些事情，然后在按下“确定”时关闭。不幸的是，我似乎无法让它工作 - 尝试了 Dialog.exec_()、Dialog.close()、self.exec_()、self.close() 的各种组合，向 Dialog 发出“已接受”信号.accept 等。到目前为止，没有任何效果，我不太清楚为什么。这是它的代码：

这样初始化的对话框窗口；

```
def begin_grab(self):
    self.GrabIm=qtg.QDialog(self)
    self.GrabIm.ui=Ui_Dialog()
    self.GrabIm.ui.setupUi(self.GrabIm)
    self.GrabIm.show() 
```

对话窗口；

```
class Ui_Dialog(object):

    def setupUi(self, Dialog):
        Dialog.setObjectName(_fromUtf8("Dialog"))
        ...
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("accepted()")), self.accept)
        QtCore.QObject.connect(self.buttonBox, QtCore.SIGNAL(_fromUtf8("rejected()")), Dialog.reject)
        QtCore.QMetaObject.connectSlotsByName(Dialog)

    def accept(self):
        if self.radioButton.isChecked()==True: #assume it is true
            #Call continuous grabber
            print "Grabbing continuously"
            Dialog.exec_() #Close it here
        else:
            #Call trigger server
            print "Grabbing triggered"
            self.exec_() 
```

不断发生的主要事情是在 accept() 函数中显示“Dialog”是未知变量的消息，或者如果我使用 self.exec_() 或类似的，它说 exec_() 不是已知属性。如果我尝试做accept(self, Dialog)，并将self.accept(Dialog) 放在connect 语句中，它也会崩溃。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T03:21:27.937

你做错了。您不应修改 Qt Designer 生成的代码 ( `Ui_Dialog`)。您应该子类`QDialog`化并在那里定义`accept`：

```
class MyDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(MyDialog, self).__init__(parent)
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)
        # use new style signals
        self.ui.buttonBox.accepted.connect(self.accept)
        self.ui.buttonBox.rejected.connect(self.reject)

    def accept(self):
        if self.ui.radioButton.isChecked(): # no need to do ==True
            #Call continuous grabber
            print "Grabbing continuously"
        else:
            #Call trigger server
            print "Grabbing triggered"
        super(MyDialog, self).accept()  # call the accept method of QDialog. 
                                           # super is needed 
                                           # since we just override the accept method 
```

然后将其初始化为：

```
def begin_grab(self):
    self.GrabIm=MyDialog(self)
    self.GrabIm.exec_()  # exec_() for modal dialog
                           # show() for non-modal dialog 
```

但是看看你的代码，我不会那样做。让对话框返回，`accept/reject`然后在调用者（即主窗口）中执行条件操作：

```
class MyDialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(MyDialog, self).__init__(parent)
        self.ui = Ui_Dialog()
        self.ui.setupUi(self)
        # use new style signals
        self.ui.buttonBox.accepted.connect(self.accept)
        self.ui.buttonBox.rejected.connect(self.reject) 
```

和调用者代码：

```
def begin_grab(self):
    self.GrabIm=MyDialog(self)
    if self.GrabIm.exec_():  # this will be True if dialog is 'accept'ed, False otherwise
        if self.GrabIm.ui.radioButton.isChecked():
            #Call continuous grabber
            print "Grabbing continuously"
        else:
            #Call trigger server
            print "Grabbing triggered" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:10:30.793

您可以重新实现 closeEvent ，这将帮助您在对话框退出之前进行一些处理

```
def closeEvent(self,event):
   print "I am here"
   event.accept() 
```

# ios - 如何让 appDidBecomeActive 显示 rootViewController 的视图？

> ID：11544802
> 
> 赞同：0
> 
> 时间：2012-07-18T15:22:34.707
> 
> 标签：ios, view, viewwillappear

我的 rootViewController 顶部有一个 UIImageView（顺便说一下，我正在使用情节提要）并且我希望我的应用程序，无论何时从睡眠状态开始，都可以在 rootViewController 顶部显示该视图。

在`application:didFinishWithLaunchOptions`该视图实际出现之后，因为它在情节提要上属于它，但是每当它从睡眠中醒来并进入 rootViewController 时，它就永远不会显示

我猜`viewWillAppear`不叫，这是为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:49:28.317

为了在应用程序激活时执行操作，依赖 viewWillAppear 或 DidAppear 是不安全的。最好将观察者添加到应用程序的 rootviewcontroller 确实成为活动通知。

将此添加到您的根视图控制器的 viewDidLoad

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(methodToShowViewOnTop)
                                             name:UIApplicationDidBecomeActiveNotification object:nil]; 
```

并确保实现该方法

```
-(void)methodToShowViewOnTop{
                // code that puts the view on top
} 
```

# cron - Cronjob 在 Debian 上失败

> ID：11544803
> 
> 赞同：1
> 
> 时间：2012-07-18T15:22:47.177
> 
> 标签：cron, debian, sh, jobs

我不知道为什么我的 cronjob 没有被执行。以下是详细信息：

我在 /usr/src 中有一个名为 stundenplan.sh 的脚本，它执行一个 jar 文件。如果您从控制台运行脚本，它本身就可以工作。但是尝试从 cronjob 运行它是行不通的。

脚本如下所示：

```
#!/bin/sh
java -jar vorlesungsplaene.jar 
```

jar 文件位于与预期相同的目录中。

我定义了两个 cronjobs：

```
# m h  dom mon dow   command
  30 * * * * /usr/src/stundenplan.sh
 0-59 * * * * echo "dude" >> /tmp/test.txt 
```

下面的工作很好，在 test.txt 文件中一丝不苟地写着“dude”。

正如您在 syslog 中看到的，上面的作业失败了：

```
Jul 18 15:29:01 vps47327 /USR/SBIN/CRON[16361]: (root) CMD (echo "dude" >> /tmp/test.txt)
Jul 18 15:30:01 vps47327 /USR/SBIN/CRON[16364]: (root) CMD (/usr/src/stundenplan.sh)
Jul 18 15:30:01 vps47327 /USR/SBIN/CRON[16365]: (root) CMD (echo "dude" >> /tmp/test.txt)
Jul 18 15:30:01 vps47327 /USR/SBIN/CRON[16363]: (CRON) error (grandchild #16364 failed with exit status 1) 
```

有什么建议、想法或解决方案吗？;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:31:38.087

它看起来像一个路径问题。Crontab 可能是从某个任意目录运行的，因此它找不到 jar 文件。

尝试做：

`30 * * * * cd /usr/src && ./stundenplan.sh`

这并不是最漂亮的解决方法，但如果它有效，那么至少你知道问题出在哪里。可能将 jar 文件的完整路径放在脚本中可能更优雅，但我会把这个问题留给你。:)

希望能帮助到你！

# c# - backgroundWorker 和与远程数据库的连接 WinForms 中的进度

> ID：11544806
> 
> 赞同：0
> 
> 时间：2012-07-18T15:23:00.880
> 
> 标签：c#, winforms, progress-bar, database-connection, backgroundworker

我希望我可以以图形方式表示连接到我的远程数据库，因为无法知道确切的连接持续时间，我认为无休止的进度控制应该可以完成这项工作。目前我正在使用 WaitCursor 这并没有让我满意。

当我使用 Progressbar 等控件时，当我单击开始连接时，进度会停止，因为它没有在单独的线程中使用，所以我尝试使用 backgroundWorker，但不知道如何将其用于数据库连接目的。

我的代码：

```
using System;
using System.Linq;
using System.Windows.Forms;

namespace MyNameSpace
{
    public partial class Form1 : Form
    {
        dbDataContext db;
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            myProgressBar.Style = ProgressBarStyle.Marquee;
            System.Windows.Forms.Application.DoEvents();
            db = new dbDataContext();

            var Users = from p in db.Users
                        where p.UserName == TxtUser.Text
                        select p;
            foreach (var record in Users)
            {
                Global._UserName = record.UserName;
                Global._UserID = record.ID;
            }
            label1.Text = "User ID = " + Global._UserID;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:25:32.323

如果您不知道需要多长时间，通常的技术是在选取框模式下显示进度控件。

```
myProgressBar.Style = ProgressBarStyle.Marquee; 
```

# sql - SQL 中的权重因素

> ID：11544808
> 
> 赞同：1
> 
> 时间：2012-07-18T15:23:06.590
> 
> 标签：sql, sql-server

我有一份报告，我在其中计算跨国家和子区域的报价。现在我有一些 Country 为 null 的引号。

```
Table 
Quote Number | Country | Subregion | Quote Count 
12233        | Germany | EMEA      | 100 
2223         | Blank   | EMEA      | 3333
3444         | France  | EMEA      | 200
455454       | Spain   | EMEA      | 300 
```

没有空国家的总报价等于 1000，其中 10% 与德国等相关。因此德国的权重因子为 0.1。

所以我总共有 3333 个引用，其中国家字段为空白。因此，我被要求获取 EMEA 的报价，并使用基于当前报价分布的加权因子在德国、西班牙、法国和其他 EMEA 国家等国家/地区分配报价，然后将报价添加到计数中该地区的其他国家/地区，例如 EMEA 。

所以目前我对如何做到这一点完全感到困惑？有任何想法吗 ？

帮助 ？有人？

第 1 步 - 获取 EMEA 中所有国家/地区的当前权重因子。在 sql 中？

第 2 步 - 获取没有为 EMEA 分配国家/地区的报价的报价计数。在 sql 中？

第 3 步 - 获取报价并根据加权因子向每个国家/地区添加 x 个报价。在 sql 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:01:20.830

根据您的样本中的数据：

```
WITH    Factors
      AS ( SELECT   Country ,
                    SUM([Quote Count])
                    / CAST(( SELECT SUM([Quote Count])
                             FROM   dbo.quotes
                             WHERE  Region = q.Region
                                    AND Country IS NOT NULL
                           ) AS FLOAT) AS WeightingFactor ,
                    q.Region
           FROM     dbo.quotes q
           WHERE    country IS NOT NULL
           GROUP BY q.Country ,
                    q.Region
         )
SELECT  q.country ,
        ( SELECT    SUM([quote count])
          FROM      dbo.quotes
          WHERE     Country IS NULL
                    AND Region = q.Region
        ) * f.WeightingFactor + SUM(q.[Quote Count]) AS [Quote Count]
FROM    dbo.quotes q
        JOIN Factors f ON q.Country = f.Country
                          AND q.Region = f.Region
WHERE   q.Country IS NOT NULL
GROUP BY q.Country ,
        q.Region ,
        WeightingFactor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:42:52.760

要获得加权因子，请执行以下操作：

```
select country, quotecount,
       quotecount*1.0/sum(quotecount) over (partition by null) as allocp
from t
where country <> 'Blank' 
```

要重新添加这些，请加入总数：

```
select t.country, t.region, t.quotecount,
       (t.quotecount + allocp*b.BlankBQ) as AllocatedQC
from (select country, quotecount,
             quotecount*1.0/sum(quotecount) over (partition by region) as allocp
      from t
      where country <> 'Blank'
     ) t join
     (select sum(QuoteCount) as BlankBQ
      from t
      where country = 'Blank'
      group by region
     ) b
     on t.region = b.region 
```

# html - 如何使用 HTML/CSS 使文本相对于背景？

> ID：11544811
> 
> 赞同：0
> 
> 时间：2012-07-18T15:23:13.970
> 
> 标签：html, css, text

我已经做到了，以便我的背景图像可以缩放以适应视口的大小。现在，我希望文本相对于背景图像进行缩放。注意：我将`<img>`标签用于背景图像，因为这允许使用较小的浏览器窗口（即移动设备）进行缩放。

CSS

```
img.bg
{
    min-height: 100%;
    min-width; 781;

    width: 100%;
    height: auto;

    top: 0;
    left: 0;

    position: absolute;
    z-index: 1;
}

@media screen and (max-width: 781)
{
    img.bg
    {
        left: 50%;
        margin-left: -390.5;
    }
}

#container 
{
    position: relative;
    top: 0px;
    width: 781;
    height: 758;
    border: 1px solid black
    z-index: 2;
}

#left
{   
    position: relative;
    left: 1.280409731113956%;
    top: 14.51187335092348%;
    padding-top: 10px;
    padding-left: 10px;
    padding-right: 10px;
    width: 50%;
    height: 50%;
    z-index: 2;
}   

p
{
    font: 14px Georgia;
    color: #FFFFFF;
} 
```

HTML

```
<img class="bg" src="background.jpg">

<div id="container">
<div id="left">
    <p>Text</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:39:06.817

据我所知，您不能仅使用 css 以这种方式动态缩放文本。

如果您使用类似这样的方法使选定的字体大小与 window.innerWidth 成比例，您可能可以使用 jQuery 来做到这一点。

```
function resizeText(event) {
       //your text element
       var $text = $('h2');

       if(window.innerWidth <= 781){

           //font scaling ratio
           var  fontSize = window.innerWidth/100;             
           $text.css('font-size', fontSize+'px');   

       } else {
           $text.css('');
       }
}

  //run above on window load and resize events
  window.onresize = resizeText;
  window.onload = resizeText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:05:33.473

你是在做所有的文字还是只是标题？您可能想查看“Fittex”或“Bigtext”。

您可以严格使用 CSS 和媒体查询来做到这一点。

几天前，我还在这里看到了另一种方法，有人的方法是严格使用 CSS 而没有媒体查询。

另请查看这篇文章： [是否可以根据浏览器宽度动态缩放文本大小？](https://stackoverflow.com/questions/5358183/is-it-possible-to-dynamically-scale-text-size-based-on-browser-width)

# delphi - VarToDateAsString 返回意外结果

> ID：11544812
> 
> 赞同：0
> 
> 时间：2012-07-18T15:23:18.010
> 
> 标签：delphi, datetime, variants

德尔福有这个功能：

```
function VarToDateAsString(const V: TVarData): TDateTime;
....
LResult := VarDateFromStr(S, VAR_LOCALE_USER_DEFAULT, 0, Result); 
```

使用今天的日期执行此操作：

```
 VarDateFromStr('07;12;18', VAR_LOCALE_USER_DEFAULT, 0, Result); 
```

那么结果将相等

```
Result = '07;18;12' 
```

有没有可能修复？

代码示例

```
procedure TForm1.Button1Click(Sender: TObject);
var
  LDateTimeVar: Variant;
  LDateTime: TDateTime;
begin
  // Current date separator in OS settings is ';'
  LDateTimeVar := '07;12;18';
  LDateTime := VarToDateTime(LDateTimeVar);
  // Expected LDateTime = '07;12;18', 
  // but will be LDateTime = '07;18;12'  
  ShowMessage(DateToStr(LDateTime));
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:55:08.003

`VarToDateAsString`调用 'oleaut32's`VarDateFromStr`来执行转换，如果你有中间的年份，它就会失败。

`variants.VarToDateAsString`：

```
function VarToDateAsString(const V: TVarData): TDateTime;
var
  ...
begin
  _VarToWStr(S, V);
  LResult := VarDateFromStr(S, VAR_LOCALE_USER_DEFAULT, 0, Result);
  ... 
```

在第二行放一个断点，你会看到`Result`参数会颠倒日期和年份。您可以通过调用自己进行测试`activex.VarDateFromStr`。

您可以绕过`variants.VarToDateAsString`调用`VarDateFromStr`并实现自己的函数，但不要考虑使用 from 的东西，`sysutils`因为它也不支持中间格式的一年。依次`sysutils.TryStrToDateTime`调用. 下面是整个函数：`ScanDate``GetDateOrder`

```
function GetDateOrder(const DateFormat: string): TDateOrder;
var
  I: Integer;
begin
  Result := doMDY;
  I := 1;
  while I <= Length(DateFormat) do
  begin
    case Chr(Ord(DateFormat[I]) and $DF) of
      'E': Result := doYMD;
      'Y': Result := doYMD;
      'M': Result := doMDY;
      'D': Result := doDMY;
    else
      Inc(I);
      Continue;
    end;
    Exit;
  end;
end; 
```

如您所见，中间没有年份排序。

看起来你必须自己解析字符串：

```
uses
  varutils;

function MyVarDateFromStr(const strIn: WideString; LCID: DWORD; dwFlags: Longint;
  out dateOut: TDateTime): HRESULT; stdcall;
begin
  // write your parser here and return a valid 'dateOut'
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  LDateTimeVar: Variant;
  LDateTime: TDateTime;
begin
  varutils.VarDateFromStr := MyVarDateFromStr;   // replace the broken function

  // Current date separator in OS settings is ';'
  LDateTimeVar := '07;12;18';
  LDateTime := VarToDateTime(LDateTimeVar);
  // Expected LDateTime = '07;12;18',
  // but will be LDateTime = '07;18;12'
  ShowMessage(DateToStr(LDateTime));
end; 
```

# jsf - 如何限制数据在 JSF 的数据表中连续显示

> ID：11544813
> 
> 赞同：1
> 
> 时间：2012-07-18T15:23:23.237
> 
> 标签：jsf, datatable

可以根据 c:if 限制数据表中的数据显示。

让我们说

现在显示的输出：

```
Startdate     end date   status    Edit

2012-02-02    2012-03-02 Waiting   edit

2012-02-03    2012-03-04 Approved   edit 
```

预期输出：

```
Startdate     end date   status    Edit

2012-02-02    2012-03-02 Waiting   edit

2012-02-03    2012-03-04 Approved 
```

当状态为 Waiting 时，应显示编辑链接。当它被拒绝或批准时，不应显示编辑链接

这是我的 Xhtml 文件。

```
 <h:form>
      <h:dataTable value="#{employeeleave}" var="e"
            styleClass="order-table"
            headerClass="order-table-header"
            rowClasses="order-table-odd-row,order-table-even-row"
            columnClasses="order-table-odd-column,order-table-even-column"
        >

        <h:column>
            <f:facet name="header">
                Start Date
            </f:facet>
                #{e.startDate}
        </h:column>

        <h:column>
            <f:facet name="header">
                End Date
            </f:facet>
                #{e.endDate}
        </h:column>

        <h:column>
            <f:facet name="header">
                Reason
            </f:facet>
                #{e.reason}
        </h:column>

        <h:column>
            <f:facet name="header">
                Status
            </f:facet>
                #{e.status}
        </h:column>
            <h:column>
        <f:facet name="header">
            Edit
        </f:facet>
        <c:if test="${e.status == 'Waiting'}">
        <p:commandLink value="Edit" action="editLeave" id="editleave" >
        <f:setPropertyActionListener value="#{e}" target="#{employeeDetails.employeeLeaveSelected}" />
        </p:commandLink>
        </c:if>
        </h:column>
    </h:dataTable>  
    </h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:27:20.200

JSTL 标记不能那样工作。它们在视图构建期间运行，而不是在您似乎期望的视图渲染期间运行。在视图构建期间不可用，因此在您的特定情况下始终`${e}`解析**为**`null`.

您需要改用 JSF 组件的`rendered`属性。

代替

```
<c:if test="${e.status == 'Waiting'}">
    <p:commandLink value="Edit" action="editLeave" id="editleave" >
        <f:setPropertyActionListener value="#{e}" target="#{employeeDetails.employeeLeaveSelected}" />
    </p:commandLink>
</c:if> 
```

经过

```
<p:commandLink value="Edit" action="editLeave" id="editleave" rendered="#{e.status == 'Waiting'}">
    <f:setPropertyActionListener value="#{e}" target="#{employeeDetails.employeeLeaveSelected}" />
</p:commandLink> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# css - 如何应用孩子的边框半径道具？

> ID：11544817
> 
> 赞同：4
> 
> 时间：2012-07-18T15:23:36.627
> 
> 标签：css

我在父包装器中有三个 div。当我申请`border-radius:20px;`父母时，我会得到圆形边框。但是，当我在子 div 上应用特定的圆角时，什么也没有发生。请看下面的代码：

我的HTML：

```
<nav id='sliderNav'>
  <div id='sliderDiv'>
    <ul id='slider'>
      <li>
        <img src='bookaparty.jpg' width='290' height='417' />
      </li>
      <li>
        <img src='bottledeals.jpg' width='290' height='417' />
      </li>
    </ul>
  </div>
  <div id='slider3Div'>
    <ul id='slider3'>
      <li>
        <img src='bookaparty.jpg' width='290' height='417' />
      </li>
      <li>
        <img src='bottledeals.jpg' width='290' height='417' />
      </li>
    </ul>
  </div>
  <div id='slider2Div'>
    <ul id='slider2'>
      <li>
        <img src='bookaparty.jpg' width='290' height='417' />
      </li>
      <li>
        <img src='bottledeals.jpg' width='290' height='417' />
      </li>
    </ul>
  </div>
</nav> 
```

我的CSS：

```
#sliderNav {
  display:block;
  text-align:center;
  font-size:0;
}

#sliderDiv { 
  border-top-left-radius:20px;
  border-bottom-left-radius:20px;
}

#slider2Div {
  border-top-right-radius:20px;
  border-bottom-right-radius:20px;
}

#slider3Div {
  border-top-left-radius:20px;
  border-top-right-radius:20px;
}

#sliderNav div {
  font-size:18px;
  display:inline-block;
} 
```

这不起作用，但是如果我更改为以下内容，我会得到每个角落的圆角：

```
#sliderNav div {
  font-size:18px;
  display:inline-block;
  border-radius:20px;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:29:35.333

我将建议使用简写`border-radius`（如果使用 PIE.htc，它将在 IE8 及以下版本中工作）：

**注意：** `border-radius`速记如下：`border-radius: top-left top-right bottom-right bottom-left`

```
#sliderDiv{ 
  -webkit-border-radius: 20px 0 0 20px;
  -moz-border-radius: 20px 0 0 20px;
  border-radius: 20px 0 0 20px;
}
#slider2Div{
  -webkit-border-radius: 0 20px 20px 0;
  -moz-border-radius: 0 20px 20px 0;
  border-radius: 0 20px 20px 0;
}
#slider3Div{
  -webkit-border-radius: 20px 20px 0 0;
  -moz-border-radius: 20px 20px 0 0;
  border-radius: 20px 20px 0 0;
} 
```

我喜欢使用速记的几个原因：

1.  PIE.htc ( [css3pie.com](http://css3pie.com) )需要
2.  每个角的语法很糟糕，并且每个前缀都不同（例如`border-top-left-radius`vs. `-moz-border-radius-topleft`）。

# xcode - 是什么导致clang：错误：不支持的选项'--serialize-diagnostics'与xcode

> ID：11544819
> 
> 赞同：5
> 
> 时间：2012-07-18T15:23:41.303
> 
> 标签：xcode, clang

我正在尝试使用 Xcode 构建执行 clang 分析器。这适用于另一个项目，但现在我得到了下面描述的错误。有人见过这个吗？

**我的命令行：**

> /Users/builder/Tools/checker-267/scan-build -k -v -o scan_output xcodebuild -scheme MyScheme -configuration Release -sdk iphoneos CONFIGURATION_BUILD_DIR=build 'CODE_SIGN_IDENTITY=iPhone Distribution:'
> 
> 我明白了（尽管此警告也出现在之前成功完成 LINTING 的项目中）：
> 
> 警告：找不到语言方言“objective-c”的“ccc-analyzer”编译器的内置搜索路径和预处理器定义。
> 
> 然后得到不受支持的选项“--serialize-diagnostics”错误，这似乎是问题：
> 
> 详细信息：无法获取工具“/Users/builder/Tools/checker-267/libexec/ccc-analyzer”的消息类别信息。原因：无法执行“clang”：/Users/builder/Tools/checker-267/libexec/ccc-analyzer 第 428 行没有这样的文件或目录。
> 
> 对象：方法： -messageCategoryInfoForExecutablePath：线程：{name = (null), num = 5} 请在[http://bugreport.apple.com](http://bugreport.apple.com)
> 提交错误， 并附上此警告消息以及您可以提供的任何有用信息。clang：错误：不支持的选项'--serialize-diagnostics' clang：错误：没有这样的文件或目录：'/Users/builder/Library/Developer/Xcode/DerivedData/Civitas-cjaysrhpylwnfoaagvkzrnpvmkhq/Build/Intermediates/HAClient.build/Release -iphoneos/HAClient.build/Objects-normal/armv7/HAClient.dia' 命令 /Users/builder/Tools/checker-267/libexec/ccc-analyzer 失败，退出代码为 1

感谢您的建议，但它仍然失败。我得到：

检查依赖项

t 发现“ccc-analyzer”编译器的内置搜索路径和语言方言“objective-c”的预处理器定义。编译器：/Users/builder/Tools/checker-267/libexec/ccc-analyzer 原因：/Users/builder/Tools/checker-267/libexec/ccc-analyzer -v -E -dM -arch i386 -isysroot /applications/ Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -x objective-c -c /dev/null 2>&1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:12:48.237

它似乎是由为 arm ( `-sdk iphoneos`) 编译引起的。将sdk更改为`-sdk iphonesimulator`一切都会好的。

# programming-languages - 一个程序编写了这个数据文件 - 是否可以判断该程序是用什么语言编写的？

> ID：11544820
> 
> 赞同：-4
> 
> 时间：2012-07-18T15:23:42.277
> 
> 标签：programming-languages

智力锻炼。我有一个文件，它包含结构化数据，其中一些是简单的文本 - 就像这样（文件名/扩展名没有帮助）：

> DB1<80>^@¢^O^@^@^^^@^BX^A^@O¤<97>CALCULA~计算器ÿÿf^Q^@^B]^A^A^K0ZERO ÿÿÌ^O^@^ B]^A^B^B1ONE ÿÿÌ^O^@^B]^A^C^B2TWO ÿÿÌ^Q^@^B]^A^D^D3THREE ÿÿÌ^P^@^B]^A^E^C4FOUR ÿÿÌ^P^@^B]^A^F^C5FIVE ÿÿÌ^U^@^BM^A^H^FmathPROBLEMÿÌÿ^W^@^BX^A^P#¤<85>¤+PAGEcloseÿÿÿf^O^@^ B]^A^R^B6SIX ÿÿÌ^Q^@^B]^A^S^D7SEVEN ÿÿÌ^Q^@^B]^A^T^D8EIGHT ÿÿÌ^P^@^B]^A^U^C9NINE ÿÿÌ^P^@^B]^A^V^B10TEN ÿÿÌ^R^@^B^P^A^W^@¤t+ ¤uplus+^S^@^B]^A"^E11ELEVEN ÿÿÌ^S^@ ^B]^A#^E12TWELVE ÿÿÌ^U^@^B]^A$^G13 十三岁 ÿÿÌ^U^@^B]^A%^G14十四岁 ÿÿÌ^T^@^B]^A&^F15十五岁 ÿÿÌ^S^@ ^B^P^A'^@¤t- ¤uminus-^[^@^B^T^A(^H¤7¤x^[退格.¤v%% ^T^@^B]^A2^ F16SIXTEEN ÿÿÌ^U^@^B]^A3^G17SEVENTE~ ÿÿÌ^U^@^B]^A4^G18EIGHTEEN ÿÿÌ^U^@^B]^A5^G19NINETEEN ÿÿÌ^S^@^B]^A6^E20TWENTY ÿÿÌ^T^@^B^P^A7^@¤t= ¤uequals=*^@^BX^A8V¤<8c>(数学 26-50)SMRIGHTMore 麻木的<99>Ìÿ^U^@^BX^A@^G¤:CLEARDI~ ÿÿf3^@^BX^AA/¤8¤x^ [,hold,ctrl.^[backspace.DELTCHARDeleteÿÿf^U^@^B]^AB^G21TWENTYO~ ÿÿÌ^U^@^B]^AC^G22TWENTTW~ ÿÿÌ^U^@^B]^AD^G23TWENTTH~ ÿÿÌ ^U^@^B]^AE^G24TWENTFO~ ÿÿÌ^U^@^B]^AF^G25TWENTFI~ ÿÿÌ^T^@^B^P^AG^H¤t*¤utimes* ^Y^@^B^P^AH^H¤t/ ¤除以/ ^P^@^BU^B^@^PandandÌÿÿ^_^@^BX^B^A^T¤<8c> (地理)FLAG!USAÿø^?^P^@^BE^B^BAlbertaþüÔ(^@^BU^B^ChBritish Columbia不列颠哥伦布þüÔ^Y^@^BU^B^D0ManitobaManitobþüÔ!^@^BU^B^EHNew BrunswickNew BrunswþüÔ2 ^@^BU^B^Fp纽芬兰和拉布拉多Newf & LabradorþüÔ*^@^BU^B^GPNorthwest TerritoriesNW TerritorþüÔ^W^@^B^L^B^H^GprovinceMANITOBA^W^@^BX^B^P#¤< 85>¤+PAGEcloseÿÿf^U^@^B^L^B^Q^GCanadaCANADAF~^T^@^BE^B^R新斯科舍þüÔ^X^@^BU^B^S0NunavutNunavutþüÔ^X^@^BU^B^ T0OntarioOntarioþüÔ^]^@^BE^B^U爱德华王子岛þüÔ^V^@^BU^B^V(魁北克魁北克þüÔ$^@^BU^B^WhSaskatchewanSaskat-chewanþüÔ^N^@^BE^B^XYukonþüÔ^T^@ ^BQ^B ^H¤ta ¤uuha ÿÌÌ)^@^BQ^B0^@¤7¤x^[退格。¤t.¤<83>¤S¤<85>¤+¤<82>.ÿÿf&^ @^B^\^B17加拿大首都CANADAF~首都^]^@^BU^B2PEdmontonEdmon^M

我很想知道如何最好地“漂亮地打印”数据 - 所以我想以原来的结构查看数据。所以我在这里要知道的第一件事是：

一个程序编写了这个文件 - 是否可以判断该程序可能是用什么语言编写的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:50:31.813

我会查看开始的 4 到 8 个字节，它们通常用作识别二进制数据文件的“幻数”。如果您可以识别文件格式，则可能能够识别创建它的软件。

顺便说一句，“DB1<80>”听起来应该是某种数据库。但是，如果它是一个合适的 DBMS 系统，那么您可能无法跟踪编写应用程序代码的语言，因为数据库通常绑定到各种语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:34:47.447

您是否在程序中使用此数据文件？

什么平台？

看起来它可能是包含字符串的 db、xml 或 plist。

我会尝试将它传递给一个数据对象，看看你是否可以将该数据对象转换为 xml，然后将 xml 转储到日志中，看看它是否更具可读性。

更多细节会有所帮助。

# php - 如何在php中将整数转换为字节数组

> ID：11544821
> 
> 赞同：16
> 
> 时间：2012-07-18T15:23:43.383
> 
> 标签：php, bytearray

如何将整数转换为 4 个字节的数组？

这是我要移植的确切代码（在 C# 中）

```
int i = 123456;
byte[] ar = BitConverter.GetBytes(i);
// ar will contain {64, 226, 1, 0} 
```

我将如何在 PHP 中做同样的事情？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T15:33:05.677

等效转换为

```
$i = 123456;
$ar = unpack("C*", pack("L", $i)); 
```

**[看到它在行动](http://ideone.com/rikaX)**。

您应该知道字节顺序（小/大端）取决于机器架构（在 的情况下也是如此`BitConverter`）。这可能好也可能不好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T15:41:41.590

由于 PHP 中字节数组的等价物是字符串，因此可以这样做：

```
$bytes = pack('L', 123456); 
```

为了形象化，使用`bin2hex`：

```
echo bin2hex($bytes);
// 40e20100
// (meaning 64, 226, 1, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:29:50.240

```
$i = 123456;
$byte_array = unpack('C*', $i);

var_dump($byte_array);
array(6) {
  [1]=>
  int(49)
  [2]=>
  int(50)
  [3]=>
  int(51)
  [4]=>
  int(52)
  [5]=>
  int(53)
  [6]=>
  int(54)
} 
```

# c# - 在 Visual Studio 2012 RC 中看不到 Oracle Data Provider for .NET

> ID：11544822
> 
> 赞同：2
> 
> 时间：2012-07-18T15:23:44.937
> 
> 标签：c#, oracle, entity-framework, odp.net

我正在将 Web 应用程序移植到 Entity Framework 4.5。我的主要目标是同时支持 MSSQL 和 Oracle 数据库，并能够以编程方式（在 Global.asax 中）告诉 ORM 以哪个数据源为目标。SQL 和 Oracle 模式在功能上显然是相同的；这是我们已经在生产中使用的一种方法，以及我们想要丢弃的另一个 ORM。

注意：我们正在测试它的机器有 Windows 8 Release Preview Build 8400 64 位、Visual Studio Professional 2012 RC 11.0.50706.0 和 .NET framework 4.5.50501。它不是标准的开发机器（其他有 XP 和 7 w/Visual Studio 2010 和 .NET 4），而是我们用来测试这些新技术的新机器。我不知道这些新技术是否有问题，还没有在“标准”开发机器上测试过。

**精简版**

我将在下面详细解释情况，但主要问题是：

1.  在“添加新的 ADO.NET 实体数据模型”向导中，我看不到我安装的 ODP.NET 数据提供程序（见下文），因此我无法从 Oracle 数据库创建模型。为什么？此外，在“关于 Visual Studio”弹出窗口中，我没有看到列出的适用于 Visual Studio 的 Oracle 开发人员工具。我担心 Oracle 开发人员工具无法正常工作，但 Oracle 通用安装程序说一切都已正确安装（我重新启动了几次）。
2.  实现此要求的最佳实践是什么？

**长版**

首先，我们从 SQL Server 数据库创建实体数据模型。到目前为止，一切都很好。

[然后，我们从http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)安装了 ODAC 11.2 Release 4 和 Oracle Developer Tools for Visual Studio (11.2.0.3.0)

我已经成功地初始化了我们的模型，`SIAEntities`（它继承自 `ObjectContext`），使用：

```
 System.Data.EntityClient.EntityConnectionStringBuilder builder = new System.Data.EntityClient.EntityConnectionStringBuilder();
        builder.Metadata = "res://*/SIA.Models.SIAModelOracle.ssdl|res://*/Models.SIAModel.csdl|res://*/Models.SIAModel.msl";
        builder.ProviderConnectionString = "data source=***;persist security info=True;user id=***;password=***";
        builder.Provider = "Oracle.DataAccess.Client"; 
        SIAEntities db2 = new SIAEntities(builder.ConnectionString); 
```

其中`SIA.Models.SIAModelOracle.ssdl`是一个自定义写入文件（嵌入式资源），它覆盖了 .edmx 的 SSDL 部分并具有以下修改：

1.  `Provider`根节点的属性`Schema`设置为`Oracle.DataAccess.Client`
2.  所有数据类型名称都转换为它们的 Oracle 等效名称（datetime > date、nvarchar > varchar2、image > blob 等）
3.  在 which 中添加的`oracle.dataaccess.client`节点`web.config`映射`bool`到`number(1,0)`和`tinyint`到`number(3,0)`

执行第一个查询时出现错误（一个简单的`SELECT`）：我将其跟踪为由于对数据库执行的查询中的双引号引起的，迫使它区分大小写。

通过手动编辑自定义 .ssdl 文件并将所有内容大写，我可以让 EF “看到”表格并识别一列接一列，但我没有将这个解决方案推得太远（因此在阅读整个表格之前停止），因为a) 它看起来不太干净 b) 我很难理解 .ssdl 和 .csdl/.msl 部分之间的链接，所以我不知道在哪里大写，在哪里不大写！

我正在考虑避免这种手动工作的另一个策略可能是尝试从 Oracle 模式生成一个单独的模型，并将这两个`ObjectContext`s 与另一个处理它们之间的选择的类包装起来，但正如问题 #2 所说，我做不到那。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T17:24:07.960

Edit: Oracle has now released a version (11.2.0.3.20) of Oracle Developer Tools for Visual Studio that works with Visual Studio 2012 and .NET 4.5\. You'll need this version (or higher) of these tools for Visual Studio 2012 Entity Designer support and other Visual Studio 2012 integration. Get it here:

[http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)

Edit #2: Visual Studio 2013 is supported beginning with version 12.1.0.1.2

FYI - I created a video to highlight some of the other features of these tools:

[http://www.youtube.com/watch?v=68tlel4iJdM](http://www.youtube.com/watch?v=68tlel4iJdM)

Christian Shay

Oracle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T19:23:32.770

Oracle 发布[了支持 VS2012 和 .NET 4.5 的 ODP.NET](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)。在此版本的文档中，我看不到他们太多。

# django - 在 mod_wsgi 和 dJango 上提供静态文件（服务器：Heroku）

> ID：11544825
> 
> 赞同：0
> 
> 时间：2012-07-18T15:24:05.363
> 
> 标签：django, heroku, mod-wsgi, static-files

我无法通过运行 mod_wsgi 和 dJango 的 Web 服务器提供静态文件。我们的服务器提供商是 Heroku。

因为文件是静态的，不应该被评估，我听说应该直接提供它们而不是通过 mod_wsgi 而dJango 不应该接触它们？

我觉得这应该是一件简单的事情，但我正在努力解决它。如果有人能指出我应该如何尝试存储和提供静态文件的正确指导，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:00:22.337

这个想法是使用 Web 服务器来处理对静态文件的请求，而不是将这些请求传递给您的 Django 实例。这样做的原因是，与 Django 应用程序不同，Web 服务器针对提供静态内容进行了优化。

您真正需要做的唯一事情是配置您的 Web 服务器以处理与您的路径匹配的请求，`STATIC_URL`并将`MEDIA_URL`这些请求的文档根设置为应用程序存储静态和媒体文件的位置。

# java - jsoup 获取状态码

> ID：11544827
> 
> 赞同：0
> 
> 时间：2012-07-18T15:24:18.407
> 
> 标签：java, jsoup

我需要用 Jsoup 检查请求的状态码，如果 200 去解析 html。

如果我使用这个：

```
dom = jSoupClass.connect( "http://www.google.it" )
    .userAgent("Mozilla/5.0 (Windows; U; WindowsNT 5.1; en-US; rv1.8.1.6) Gecko/20070725 Firefox/2.0.0.6")
    .execute();

status = dom.statusCode(); 
```

我将获得响应状态代码，但我该如何解析 html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:29:37.203

只需像应该做的那样调用`parse()`响应。`Document doc = dom.parse()`

# asp.net - 使用 Ninject.MVC3 在测试项目中添加绑定

> ID：11544832
> 
> 赞同：4
> 
> 时间：2012-07-18T15:24:38.353
> 
> 标签：asp.net, asp.net-mvc-3, ninject

我很难弄清楚这些天对于 Ninject 和 ASP.NET MVC 3 的最佳方法是什么。

我已经`Install-Package Ninject.MVC3`在我的应用程序上使用过，并且我的引导类具有以下方法：

```
public static void Start() 
public static void Stop()
private static IKernel CreateKernel()
private static void RegisterServices(IKernel kernel) 
```

一切都很好，它按预期加载了我的模块。但从历史上看，我所做的是这样的：

# 我的应用程序.dll

```
Kernel.Bind<ISomething>().To<Something>();
Kernel.Bind<IBlah>().To<Blah>();
Kernel.Bind<IFoo>().To<Foo>(); 
```

# MyApp.Tests.dll

**在这里，我想覆盖 ONLY`ISomething`的绑定，所以我以前只是取消绑定我需要模拟/重新绑定的东西：**

```
Kernel.Unbind<ISomething>();
Kernel.Bind<ISomethig>().To<TestSomething>(); 
```

但是`Nuget`包中没有一种方法可以暗示使用`App_Start`原始库中的类来实现这一目标的深思熟虑的方法。如果我在我的测试应用程序中放置另一个 Ninject 引导类，它似乎只是准备构建一个新内核：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(TestNinjectBootstrapper), "Configure")] 
```

我可以将内核静态存储在原始引导程序中并从测试项目中调用，但这感觉不对。我是不是想太多而错过了什么？或者想得太少:)

啊。什么是好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T21:51:39.493

要在不同的项目中重用接口/类映射注册，可以创建 NInject 模块。模块只需要实现 INinjectModule 接口，但为了简单起见，大多数应该扩展 NinjectModule 类。

因此，您可以在模块内放置接口/类映射，如下例所示：

```
public class WarriorModule : NinjectModule
{
    public override void Load() 
    {
        Bind<IWeapon>().To<Sword>();
        Bind<Samurai>().ToSelf().InSingletonScope();
    }
} 
```

定义此类模块后，您可以使用此模块中定义的映射来实例化内核。您只需在创建内核对象期间将此模块指定为参数：

```
IKernel kernel = new StandardKernel(new WarriorModule()); 
```

请注意，您可以使用多个模块创建和实例化内核。

因此，模块将帮助您重用默认映射配置。映射配置将在一个地方定义，这将简化维护，特别是如果有多个项目使用相同的接口/类映射配置。

还有一些其他功能，例如“动态模块加载”等。有关模块的更多信息可以在[这里](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)找到。

# jquery - 如何在使用 jquery 一键后禁用操作链接

> ID：11544833
> 
> 赞同：0
> 
> 时间：2012-07-18T15:24:37.847
> 
> 标签：jquery, jsp

我有一个jsp页面。有一个动作链接。我希望当用户单击操作链接时，使用与操作相关的类执行某些操作，并且同时该链接应该为任何其他第二次单击禁用。并且用户应该保持在同一页面上。还应在同一页面上显示一条消息“链接已禁用”有人可以提供一些代码或任何方法吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:09:19.753

这是一个可能的解决方案。评论中解释了脚本的工作原理。

### 演示

[http://jsfiddle.net/insertusernamehere/hp45v/](http://jsfiddle.net/insertusernamehere/hp45v/)

### JavaScript

```
$(document).ready(function () {

    // add a handler for the click event to the specific element
    $('#action_link').click( function(event) {

        // write that message
        $('#action_message').text('The link is disabled.');

        // do/call your action here (like ajax or some DOM stuff)
        $('#action_response').text('Something happened here');

        // release the event handler that it won't fire again
        $(this).unbind('click');

        // prevent default action of the link - this is not really necessary as the link has no "href"-attribute
        event.preventDefault();
    });

}); 
```

### HTML

```
<a id="action_link">Action link</a>
<div id="action_message"></div>
<div id="action_response"></div> 
```

### 延期

如果您有多个具有不同操作的链接，则可以对所有链接使用一个类，例如：

```
<a class="action" data-action="load">Action 1</a>
<a class="action" data-action="view">Action 2</a> 
```

并将 JavaScript 函数重写为：

```
// add a handler for the click event to all elements with the class 'action'
$('.action').click( function(event) {

    if ('load' == $(this).attr('data-action')) {
        // your action here (like ajax or some DOM stuff)
        $('#action_response').text('The action was: load'); 
    }

    if ('view' == $(this).attr('data-action')) {
        // your action here (like ajax or some DOM stuff)
        $('#action_response').text('The action was: view'); 
    }

    // release the event handler that it won't fire again
    $(this).unbind('click');
}); 
```

# php - 在 Magento 中实例化（而不是对象）后，是什么导致块为假？

> ID：11544835
> 
> 赞同：0
> 
> 时间：2012-07-18T15:24:42.097
> 
> 标签：php, xml, magento

我一直在为我的 Magento 模块在 adminhtml 中获取一个新表单。然而，我在实际加载块时遇到了一个严重的问题。我可以使用我在另一个堆栈溢出问题中找到的这段代码加载一个测试块（使用 phtml 布局）（我在 adminhtml 控制器中实现了这个）：

```
 $block = $this->getLayout()->createBlock('coupsmart_coupon/adminhtml_forms');
    error_log('The block:' . var_export($block, true));
    if($block)
    {
        $block->setTemplate('test/test.phtml');
        error_log(var_export($block->getTemplate(), true));
        error_log('The HTML:');
        error_log(var_export($block->toHtml(),true));   
    } 
```

使用测试块，我得到了正确的 html（在我的 adminhtml/default/default/template 文件夹中找到）。

但是，当我实例化一个 grid_container 块时，它不会运行该`if($block){}`部分，因为该块是错误的。但是在我的 grid_container 块类中，我有一个`__constructor()`记录输出的方法，因此它正在运行构造函数，这意味着我的类实例化（和命名）是正确的。

什么会导致构造函数在块上运行，但对于一个`Mage_Adminhtml_Block_Widget_Grid_Container`类，它仍然返回 false？

如果需要更多代码（控制器、grid_container 块、网格块、配置等），请告诉我，我会发布。我只是不想被可能冲淡问题的代码溢出所淹没。

编辑：网格容器

```
class Coupsmart_Coupon_Block_Adminhtml_Forms extends
Mage_Adminhtml_Block_Widget_Grid_Container
{       
    public function __construct()
    {
        error_log('adminhtml forms (parent) construct');
        $this->_controller = 'adminhtml_forms';
        $this->_blockGroup = 'coupsmart_coupon';
        $this->_headerText = Mage::helper('forms')->__('Coupon Manager');
        $this->_addButtonLabel = Mage::helper('forms')->__('Edit Coupon');
        parent::__construct();
    }
} 
```

当我实例化块时，会显示上面容器中的错误日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:25:09.203

The returned block can be false if an exception is thrown while it's instantiated. In your code, this may certainly come from this part : `Mage::helper('forms')`.
In the config.xml file of your module, have you defined the helpers like this ? :

```
<global>
    <helpers>
        <forms><class>Coupsmart_Coupon_Helper</class></forms>
    </helpers>
</global> 
```

Else, replace `forms` by the other code you used in the calls to `Mage::helper('forms')` (from what it seems, this should probably rather looks like this : `Mage::helper('coupsmart_coupon')`)

# python - 通过python监控dbus消息

> ID：11544836
> 
> 赞同：3
> 
> 时间：2012-07-18T15:24:45.187
> 
> 标签：python, dbus

我正在尝试制作一个 python 应用程序来读取通过 DBus 的消息，它给出了与 bash **dbus-monitor**相同的输出。根据我从搜索中得到的信息，代码应该非常简单明了，例如：

```
import dbus, gobject
from dbus.mainloop.glib import DBusGMainLoop

def msg_cb(bus, msg):
    args = msg.get_args_list()
    print "Notification from '%s'" % args[0]
    print "Summary: %s" % args[3]
    print "Body: %s", args[4]

if __name__ == '__main__':
    DBusGMainLoop(set_as_default=True)
    bus = dbus.SessionBus()

    string = "interface='org.freedesktop.Notifications',member='Notify'"
    bus.add_match_string(string)
    bus.add_message_filter(msg_cb)

    mainloop = gobject.MainLoop ()
    mainloop.run () 
```

但是启动它时，我只收到 DBus 返回的消息，说应用程序已连接，这与我执行 bash 命令时得到的不同：

```
dbus-monitor --session interface='org.freedesktop.Notifications',member='Notify' 
```

在这种情况下，我可以看到所有符合过滤条件的消息。有人请帮助我了解我失败的地方吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T21:16:21.507

`Notify`是一种方法，而不是信号，因此您需要添加`eavesdrop='true'`作为匹配规则的一部分，以接收不适合您的消息。如果您运行 dbus-monitor，您会注意到`eavesdrop`dbus-monitor 设置的规则中的键。

这是行为上的改变，我相信自从 dbus-1.5.6 修复了[bug 39450](https://bugs.freedesktop.org/show_bug.cgi?id=39450)以来。

# java - 采访：如何保证一个线程一个接一个地运行？

> ID：11544843
> 
> 赞同：22
> 
> 时间：2012-07-18T15:25:26.843
> 
> 标签：java, multithreading

有线程`T1`，`T2`又`T3`如何保证线程`T2`后运行`T1`和线程`T3`后运行`T2`？

这个问题在我的采访中被问到。我没有回答。请详细说明。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T15:36:26.067

这将是最简单、最愚蠢的方法：

```
final Thread t1 = new Thread(new T1()); // assume T1 is a Runnable
t1.start();
t1.join();
final Thread t2 = new Thread(new T2());
t2.start();
t2.join();
final Thread t3 = new Thread(new T3());
t3.start();
t3.join(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T16:54:45.427

@Assylias 已经发布了明显且最简单的方法 - 使用 T1 运行方法创建/启动 T2 和 T2 运行方法创建/启动 T3。

恕我直言，这几乎毫无意义，但可以做到。

使用 Join() 的解决方案不能回答这个问题——它们确保线程的终止是有序的，而不是它们的运行。如果面试官不明白，你无论如何都需要找另一份工作。

在一次采访中，我的回答是'为了*****为什么？线程通常用于避免您要问的内容！'。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T15:49:00.460

一种方法是如下所示。虽然很复杂。您可能希望为此使用[`java.util.concurrent.CyclicBarrier`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)该类。

每个线程完成后设置布尔值并通知下一个线程继续。即使它是一`AtomicBoolean`门课，我们也需要这样`synchronized`我们才能做到。`wait()``notify()`

传入锁对象或者可能有一个`begin()`方法会更干净`T2`，`T3`因此我们可以将锁隐藏在这些对象中。

```
final Object lock2 = new Object();
final Object lock3 = new Object();
boolean ready2;
boolean ready3;
...
public T1 implements Runnable {
    public void run() {
        ...
        synchronized (lock2) {
            // notify the T2 class that it should start
            ready2 = true;
            lock2.notify();
        }
    }
}
...

public T2 implements Runnable {
    public void run() {
        // the while loop takes care of errant signals
        synchronized (lock2) {
            while (!ready2) {
                lock2.wait();
            }
        }
        ...
        // notify the T3 class that it should start
        synchronized (lock3) {
            ready3 = true;
            lock3.notify();
        }
    }
}
...
public T3 implements Runnable {
    public void run() {
        // the while loop takes care of errant signals
        synchronized (lock3) {
            while (!ready3) {
                lock3.wait();
            }
        }
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-05T07:02:23.243

有线程T1、T2、T3，如何保证线程T2在T1之后运行，线程T3在T2之后运行呢？OR 有三个线程 T1、T2 和 T3？你如何确保 Java 中的 T1、T2、T3 序列？问题主要是T3应该先完成，T2其次，T1最后。我们可以使用线程类的 join() 方法。为确保执行三个线程，您需要首先启动最后一个线程，例如 T3，然后以相反的顺序调用连接方法，例如 T3 调用 T2.join，T2 调用 T1.join。这样，T1 将首先完成，T3 将最后完成。

```
public class Test1 {
    public static void main(String[] args) {
        final Thread t1 = new Thread(new Runnable() {
            public void run() {
                System.out.println("start 1");
                System.out.println("end 1");
            }//run
        });

        final Thread t2  = new Thread(new Runnable() {
            public void run() {
                System.out.println(" start 2 ");
                try {
                    t1.join(2000);
                } catch (Exception e) {
                    e.getStackTrace();
                }
                System.out.println(" end 2");
            }
        }) ;

        final Thread t3 = new Thread( new Runnable() {
            public void run() {
                System.out.println(" start 3 ");

                try {
                    t2.join(4000);
                }catch(Exception e) {
                    e.getStackTrace();
                }
                System.out.println(" end  3 ");
            }
        });
       // we are reversing the order of the start() method
        t3.start();
        t2.start();
        t1.start();

    }
} 
```

从输出中，您可以看到线程以不同的顺序启动，因为您不知道哪个线程将获得 CPU。它是线程调度程序的决定，所以我们无能为力。但是，您可以看到线程以正确的顺序完成，即 T1 然后 T2 然后 T3。

还有另一种方法。伪代码是：

```
t1.start();

    t1.join(); // signals t2 to wait

    if( !t1.isAlive()) {
        t2.start();// if t1 is finished then t2 will start
    }

    t2.join();//signals t3 to wait

    if (!t2.isAlive()) {
        t3.start(); 
    } 
```

让我们来看一个完整的程序：

```
 public class Tic implements Runnable{
   public void run() {
       try {
            for (int i = 0; i < 2; i++) {
                  System.out.println("tic");
            }
    } catch (Exception e) {
        // TODO: handle exception
        e.getStackTrace();
    }
   }
}

public class Tac implements Runnable{
       public void run() {
           try {
                for (int i = 0; i < 2; i++) {
                      System.out.println("tac");
                }
        } catch (Exception e) {
            // TODO: handle exception
            e.getStackTrace();
        }
       }
    }
public class Toe implements Runnable{
       public  void run() {
           try {
                for (int i = 0; i < 2; i++) {
                      System.out.println("toe");
                }
        } catch (Exception e) {
            // TODO: handle exception
            e.getStackTrace();
        }
       }
    }

public class RunThreads1 {
public static void main(String[] args) {
    try {

        Tic tic = new Tic();
        Tac tac = new Tac();
        Toe toe = new Toe();
        Thread t1 = new Thread(tic);
        Thread t2 = new Thread(tac);
        Thread t3 = new Thread(toe);
        t1.start();

        t1.join(); // signals t2 to wait

        if( !t1.isAlive()) {
            t2.start();// if t1 is finished then t2 will start
        }

        t2.join();//signals t3 to wait

        if (!t2.isAlive()) {
            t3.start(); 
        }

    }catch(InterruptedException e) {
        e.printStackTrace();
    }
}
} 
```

输出是：tic tic tac tac toe toe

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T15:35:38.913

在每个线程的开始（除了 t1），让它在它的前任上调用 join()。使用执行器（而不是直接使用线程）是另一种选择。还可以考虑使用信号量 - T1 应该在完成时释放许可证，T2 应该尝试获得两个许可证，并在完成后释放它们，T3 应该尝试获得三个许可证等等。使用 join 或 executors 将是首选路线。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-22T19:45:58.287

猜猜面试官问的是三个线程按顺序完成工作。例如，如果一个线程打印 1,4,5...第二个 2,5,8 和第三个 3,6,9 等..您的输出应该是 1,2 ,3,4,5..... Ist 线程打印 1 并让第 2 个线程有机会打印 2..etc.，

我使用cyclebarriers进行了尝试。一旦“一个”打印出1，它就会在调用cb.wait时给两个机会，当两次运行时，它将依次以类似的方式调用三个并且它将继续。如果有任何错误，请告诉我在代码中

```
import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;

class one implements Runnable{
    CyclicBarrier cb;
    one(CyclicBarrier cb){this.cb=cb;}
    public void run(){
        int i=1;
        while(true)
        {
            System.out.println(i);
            try {
                Thread.sleep(1000);
                cb.await();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (BrokenBarrierException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            i=i+3;
        }
    }

}
class two implements Runnable{
    CyclicBarrier cb;
    int i=2;
    two(CyclicBarrier cb){this.cb=cb;}
    public void run(){

        System.out.println(i);
        try {
            cb.await();
            i=i+3;
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (BrokenBarrierException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}

public class oneTwoThree {
    public static void main(String args[]){
        Runnable threePrinter = new Runnable() {
            int i=3;
            public void run() {
                System.out.println(i);
                i=i+3;
            }
        };

        CyclicBarrier bar2 =new CyclicBarrier(1,threePrinter);//, barrier1Action);
        two twoPrinter  =new two(bar2);
        CyclicBarrier bar1 =new CyclicBarrier(1,twoPrinter);

        Thread onePrinter=new Thread(new one(bar1));
        onePrinter.start();
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-18T15:27:11.777

线程也是可运行的。您可以简单地按顺序运行它们：

```
t1.run();
t2.run();
t3.run(); 
```

这显然兴趣不大。

假设他们希望线程并行运行，一种解决方案是让每个线程启动下一个线程，因为[JMM 保证](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)：

> 线程上的 start() 调用发生在已启动线程中的任何操作之前。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-28T06:14:35.887

我尝试了一种更简单的方式.. 使用等待和通知。（与我上一篇文章中的循环屏障方法相反）。

它使用一个“状态”类......它获得三种状态：1、2、3。（默认为 3）。在 3 时触发 t1，在 1 时触发 t2，在 2 时触发 t3，以此类推。

类：State// int i=3 T1// 打印 1,4,7... T2// 打印 2,5,8 T3// 打印 3,6,9 等，

请让我知道您的意见或代码中的任何问题。谢谢。

这是代码：

```
public class State {

    private int state ;

    public State() {
        this.state =3;
    }

    public synchronized int getState() {
        return state;
    }

    public synchronized void setState(int state) {
        this.state = state;
    }

}

public class T1 implements Runnable {

    State s;
    public T1(State s) {
        this.s =s;
    }

    @Override
    public void run() {
        int i =1;

        while(i<50)
        {
            //System.out.println("s in t1 "+ s.getState());

            while(s.getState() != 3)
            {

                synchronized(s)
                {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

            }

            synchronized(s)
            {
                //if(s.getState() ==3)

                if(s.getState()==3)
                System.out.println("t1 "+i);
                s.setState(1);
                i = i +3 ;
                s.notifyAll();

            }

        }

    }

}

public class T2 implements Runnable {

    State s;
    public T2(State s) {
        this.s =s;
    }

    @Override
    public synchronized void run() {
        int i =2;

        while(i<50)
        {

            while(s.getState() != 1)
            {

                synchronized(s)
                {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

            }

            synchronized(s)
            {
                //if(s.getState() ==3)

                if(s.getState()==1)
                System.out.println("t2 "+i);
                s.setState(2);
                i = i +3 ;
                s.notifyAll();

            }

        }

    }

}

public class T3 implements Runnable {

    State s;
    public T3(State s) {
        this.s =s;
    }

    @Override
    public synchronized void run() {
        int i =3;

        while(i<50)
        {

            while(s.getState() != 2)
            {
                synchronized(s)
                {
                    try {
                        s.wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

            }

            synchronized(s)
            {

                if(s.getState()==2)
                System.out.println("t3 "+i);
                i = i +3 ;
                s.setState(3);
                s.notifyAll();
            }

        }

    }}

    public class T1t2t3 {
        public static void main(String[] args) {

            State s = new State();
            Thread t1 = new Thread(new T1(s));
            Thread t2 = new Thread(new T2(s));
            Thread t3 = new Thread(new T3(s));

            t1.start();
            t2.start();
            t3.start();

        }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-18T20:14:05.453

> 我们如何确保线程 T2 在 T1 之后运行，线程 T3 在 T2 之后运行？

```
NOTE: Assuming that it is not about scheduling the threads in the required order 
```

我们可以使用[条件](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)接口。

我们需要两个绑定到单个[Lock](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)的条件：**condition1**来协调 T1 和 T2，**condition2**来协调 T2 和 T3。**将条件**
1传递给 T1 和 T2，将**条件**2 传递给 T2 和 T3。 因此，我们将在它的 run 方法中 让 T2在**condition1上***等待，这将由 T1**发出信号*（来自 T1 的 run 方法，在 T1 开始/完成其任务之后）。同样在它的 run 方法中让 T3在**condition2上***等待*，这将*发出信号* ************通过 T2（来自 T2 的 run 方法，在它开始/完成它的任务之后）。************

 ********** * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-20T07:00:06.143

在启动线程 T2 和 T3 之前使用线程 isAlive 方法。

```
Thread t1 = new Thread(new T1()); 
Thread t2 = new Thread(new T2()); 
Thread t3 = new Thread(new T3()); 
t1.start();

if(t1.isAlive()){   

    t2.start();

}

if(t2.isAlive()){

    t3.start();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-18T15:28:41.690

创建一个优先级队列，每个踏板都在另一个创建的踏板中。然后，您可以`Thread.join`在完成后应用，从优先级队列中删除该线程，然后再次执行队列的第一个元素。伪代码：

```
 pthread [3] my_threads
    my_queue
    for t in pthreads:
         my_queue.queue(t)

   while !my_queue.empty()
      pop the head of the queue
      wait until it complets
      thread.join() 
```

实施留作练习，所以下次你做对了！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-03T10:37:19.697

在使用以下代码时尝试以下代码，您可以以这种方式运行 n 个线程。

```
import java.util.HashSet;
import java.util.Set;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class CyclicExecutionOfThreads {

    public static void main(String args[]) {

        int totalNumOfThreads = 10;
        PrintJob printJob = new PrintJob(totalNumOfThreads);

        /*
        MyRunnable runnable = new MyRunnable(printJob, 1);
        Thread t1 = new Thread(runnable);

        MyRunnable runnable2 = new MyRunnable(printJob, 2);
        Thread t2 = new Thread(runnable2);

        MyRunnable runnable3 = new MyRunnable(printJob, 3);
        Thread t3 = new Thread(runnable3);

        t1.start();
        t2.start();
        t3.start();
        */

        //OR

        ExecutorService executorService = Executors
                .newFixedThreadPool(totalNumOfThreads);
        Set<Runnable> runnables = new HashSet<Runnable>();

        for (int i = 1; i <= totalNumOfThreads; i++) {
            MyRunnable command = new MyRunnable(printJob, i);
            runnables.add(command);
            executorService.execute(command);
        }

        executorService.shutdown();

    }
}

class MyRunnable implements Runnable {

    PrintJob printJob;
    int threadNum;

    public MyRunnable(PrintJob job, int threadNum) {
        this.printJob = job;
        this.threadNum = threadNum;
    }

    @Override
    public void run() {
        while (true) {
            synchronized (printJob) {
                if (threadNum == printJob.counter) {
                    printJob.printStuff();

                    if (printJob.counter != printJob.totalNumOfThreads) {
                        printJob.counter++;
                    } else {

                        System.out.println();
                        // reset the counter
                        printJob.resetCounter();

                    }

                    printJob.notifyAll();

                } else {
                    try {
                        printJob.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            }

        }
    }

}

class PrintJob {
    int counter = 1;
    int totalNumOfThreads;

    PrintJob(int totalNumOfThreads) {
        this.totalNumOfThreads = totalNumOfThreads;
    }

    public void printStuff() {
        System.out.println("Thread " + Thread.currentThread().getName()
                + " is printing");

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }

    public void resetCounter() {
        this.counter = 1;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-28T08:49:42.190

```
package thread;

class SyncPrinter {
    public static void main(String[] args) {
        SyncPrinterAction printAction1 = new SyncPrinterAction(new int[]{1,5,9,13}, true);
        SyncPrinterAction printAction2 = new SyncPrinterAction(new int[]{2,6,10,14}, true);
        SyncPrinterAction printAction3 = new SyncPrinterAction(new int[]{3,7,11,15}, true);
        SyncPrinterAction printAction4 = new SyncPrinterAction(new int[]{4,8,12,16}, false);

    printAction1.setDependentAction(printAction4);
    printAction2.setDependentAction(printAction1);
    printAction3.setDependentAction(printAction2);
    printAction4.setDependentAction(printAction3);

    new Thread(printAction1, "T1").start();;        
    new Thread(printAction2, "T2").start();
    new Thread(printAction3, "T3").start();     
    new Thread(printAction4, "T4").start();

}
}

class SyncPrinterAction implements Runnable {

private volatile boolean dependent;
private SyncPrinterAction dependentAction;
int[] data;

public void setDependentAction(SyncPrinterAction dependentAction){
    this.dependentAction = dependentAction;

}

public SyncPrinterAction( int[] data, boolean dependent) {
    this.data = data;
    this.dependent = dependent;
}

public SyncPrinterAction( int[] data, SyncPrinterAction dependentAction, boolean dependent) {
    this.dependentAction = dependentAction;
    this.data = data;
    this.dependent = dependent;
}

@Override
public void run() {
    synchronized (this) {

        for (int value : data) {

            try {
                while(dependentAction.isDependent())
                    //System.out.println("\t\t"+Thread.currentThread().getName() + " :: Waithing for dependent action to complete");
                wait(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            dependentAction.setDependent(true);

            System.out.println(Thread.currentThread().getName() + " :: " +value);
            dependent = false;
        }

    }

}

private void setDependent(boolean dependent) {
    this.dependent = dependent;

}

private boolean isDependent() {
    return dependent;
}

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-10T05:58:54.810

**通过使用 join 可以确保一个线程一个接一个地运行。**

```
class MyTestThread implements Runnable{

    public void run() {
    System.out.println("==MyTestThread : START : "+Thread.currentThread().getName());
    for(int i = 0; i < 10; i++){
        System.out.println(Thread.currentThread().getName() + " :i = "+i);
    }
    System.out.println("==MyTestThread : END : "+Thread.currentThread().getName());
    }

}
public class ThreadJoinTest {

    public static void main(String[] args) throws InterruptedException {
        Thread thread1 = new Thread(new MyTestThread(), "t1");
        Thread thread2 = new Thread(new MyTestThread(), "t2");

        thread1.start();
        thread1.join();
        thread2.start();
        thread2.join();

        System.out.println("====All threads execution===completed");
    }

} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-30T15:02:20.960

concurrent 包有更好的类来使用共享对象。其中一种方法是这样的。

```
public static void main(String[] args) {

    final Lock lock = new ReentrantLock();
    final Condition condition = lock.newCondition();

    ThreadId threadId = new RunInSequence.ThreadId();
    threadId.setId(1);
    Thread t1 = setThread("thread1",lock, condition, 1, 2, threadId);
    Thread t2 = setThread("thread2",lock, condition, 2, 3, threadId);
    Thread t3 = setThread("thread3",lock, condition, 3, 1, threadId);
    t1.start();
    t2.start();
    t3.start();

}

private static class ThreadId {
    private int id;

    public ThreadId() {
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
}

private static Thread setThread(final String name,final Lock lock, final Condition condition, int actualThreadId, int nextThreadId,
        ThreadId threadId) {
    Thread thread = new Thread() {
        @Override
        public void run() {
            while (true) {
                lock.lock();
                try {
                    while (threadId.getId() != actualThreadId) {
                        try {
                            condition.await();
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                    System.out.println(name+"prints: " + actualThreadId);
                    threadId.setId(nextThreadId);
                    condition.signalAll();
                } finally {
                    lock.unlock();
                }
            }
        }
    };
    return thread;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-12T12:06:32.540

```
package io.hariom.threading; 
```

//你有三个线程T1、T2、T3，你如何保证它们按T1、T2、T3的顺序完成？

公共类 ThreadTest1 {

```
public static void main(String[] args) {

    Thread thread1 = new Thread(new MyRunnable(null));
    Thread thread2 = new Thread(new MyRunnable(thread1));
    Thread thread3 = new Thread(new MyRunnable(thread2));
    thread1.start();
    thread2.start();
    thread3.start();

} 
```

}

类 MyRunnable 实现 Runnable { Thread t;

```
MyRunnable(Thread t) {
    this.t = t;

}

@Override
public void run() {
    if (t != null) {
        try {
            t.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    System.out.println(Thread.currentThread().getName() + " starts");
    try {
        Thread.sleep(10);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    System.out.println(Thread.currentThread().getName() + " ends");
} 
```

}

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-11-28T11:00:03.453

```
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

class Worker implements Runnable {

  BlockingQueue<Integer> q = new LinkedBlockingQueue<>();
  Worker next = null; // next worker in the chain

  public void setNext(Worker t) {
    this.next = t;
  }

  public void accept(int i) {
    q.add(i);
  }

  @Override
  public void run() {
    while (true) {
      int i;
      try {
        i = q.take(); // this blocks the queue to fill-up
        System.out.println(Thread.currentThread().getName() + i);
        if (next != null) {
          next.accept(i + 1); // Pass the next number to the next worker
        }
        Thread.sleep(500); // Just sleep to notice the printing.
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }
  }
}

public class PrintNumbersSequentially {
  public static void main(String[] as) {

    Worker w1 = new Worker();
    Worker w2 = new Worker();
    Worker w3 = new Worker();

    w1.setNext(w2);
    w2.setNext(w3);
    w3.setNext(w1);

    new Thread(w1, "Thread-1: ").start();
    new Thread(w2, "Thread-2: ").start();
    new Thread(w3, "Thread-3: ").start();

    //Till here all the threads have started, but no action takes place as the queue is not filled for any worker. So Just filling up one worker.
    w1.accept(100);
  }
} 
```

我想这可以帮助你。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-01-23T15:50:44.227

这是我使用**CountDownLatch**来解决问题的方法。

T1 线程在完成其工作后向 T2 发出信号，T2 向 T3 发出信号。

```
 public class T1T2T3 {
  public static void main(String[] args) {

    CountDownLatch c1 = new CountDownLatch(1);
    CountDownLatch c2 = new CountDownLatch(1);
    Thread T1 = new Thread(new Runnable() {

      @Override
      public void run() {
        System.out.println("T1");
        c1.countDown();
      }
    });
    Thread T2 = new Thread(new Runnable() {
      @Override
      public void run() {
        //should listen to something from T1
        try {
          c1.await();
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
        System.out.println("T2");
        c2.countDown();
      }
    });
    Thread T3 = new Thread(new Runnable() {
      @Override
      public void run() {
        try {
          c2.await();
        } catch (InterruptedException e) {
          e.printStackTrace();
        }
        System.out.println("T3");
      }
    });

    T1.start();
    T3.start();
    T2.start();
  }
} 
```*********

# vb.net - 如何使用代码在 Visual Basic 2010 Express 中停止调试？

> ID：11544850
> 
> 赞同：0
> 
> 时间：2012-07-18T15:25:44.457
> 
> 标签：vb.net, vb6

在 Visual Basic 6.0 中，我可以使用以下代码来停止调试所有窗体：

```
Private Sub Form_Unload(Cancel As Integer)
Dim Form As Form
For Each Form In Forms
  Unload Form
  Set Form = Nothing
Next Form
End Sub 
```

我的问题是：如何使用与上述代码类似的代码停止调试 Visual Basic Express 10 中的所有表单？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:11:08.670

没有额外的管道、VB 特定功能以及支持在其他程序集中创建的表单等的最佳选择是`Application.Exit`.

# knockout.js - KnockoutJS 模板忽略“controlsDescendantBindings”

> ID：11544853
> 
> 赞同：0
> 
> 时间：2012-07-18T15:25:52.193
> 
> 标签：knockout.js, template-engine, knockout-2.0

我的模板中有一部分不想被渲染，所以我尝试[了文档建议的](http://knockoutjs.com/documentation/template-binding.html)“controlsDescendantBindings” 。

我做了一个示例，其中模型包含两个属性，“父”和“子”。必须显示父级，但不得渲染子级。

我正在使用[KO Programmatic 插件](https://github.com/AdamPflug/Knockout.Programmatic)。

它适用于普通绑定：http: [//jsfiddle.net/vtortola/QXJVb/](http://jsfiddle.net/vtortola/QXJVb/)

它在使用模板时有效：http: [//jsfiddle.net/vtortola/uKLnm/3/](http://jsfiddle.net/vtortola/uKLnm/3/)

并且在以编程方式使用 KO 时不起作用：http: [//jsfiddle.net/vtortola/XGApK/](http://jsfiddle.net/vtortola/XGApK/)

有人知道解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:16:46.160

两件事情。

1.  您使用的是淘汰赛 2.0 和 jQuery tmpl。这些一起玩不好。自 2.0 以来，Knockout 就内置了自己的模板引擎。jQuery tmpl 已被弃用，我认为它的创建者也不再开发它。你不应该使用它。
2.  您的第二把小提琴没有调用`ko.applyBindings`，这是必要的步骤。你的第一个工作，因为你有那个电话。

这是[您的小提琴](http://jsfiddle.net/tyrsius/uPVU8/1/)，使用模板和停止绑定。这是使用jQuery方法[的小提琴](http://jsfiddle.net/tyrsius/uPVU8/3/)

**注意**
Knockout 提供了自己的方法来限制绑定到特定 div。KO Programmatic 看起来有点……没必要。这是[文档页面](http://knockoutjs.com/documentation/observables.html)的片段：

> 或者，您可以传递第二个参数来定义要在文档的哪个部分搜索数据绑定属性。例如，ko.applyBindings(myViewModel, document.getElementById('someElementId'))。这将激活限制为 ID 为 someElementId 的元素及其后代，如果您希望拥有多个视图模型并将每个模型与页面的不同区域相关联，这将非常有用。

**更新：**

正如所承诺的那样，这些小提琴按照您的描述工作的截图。

常规方法： ![jsFiddle](../Images/1445cf71cefb65f3a1acb9fee9e8627c.png)

jQuery/KO 编程方法： ![在此处输入图像描述](../Images/7cf49334057132b59988c7c5daa8fd0d.png)

# iphone - 在 iPhone 中使用 Welcome to Google Maps API Premier

> ID：11544857
> 
> 赞同：0
> 
> 时间：2012-07-18T15:26:05.703
> 
> 标签：iphone, google-maps, signature

我正在使用谷歌地图在 iPhone 上开发一个商业应用程序。我有 Google map api Premier 客户端 ID 和加密密钥，可以将 Google Map 用于“方向”等一些有限服务。我使用以下代码生成了签名密钥： [http ://code.google.com/p/gmaps-samples/source /browse/trunk/urlsigning/urlsigner.m?spec=svn2498&r=2498](http://code.google.com/p/gmaps-samples/source/browse/trunk/urlsigning/urlsigner.m?spec=svn2498&r=2498)

但 WS 仍然声称“连接太多”。

在 iPhone 中使用 Google Maps API Premier 有什么问题吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:54:48.690

此外，您可以在此处了解更多关于商业用户 Maps API 网络服务配额的信息： [https ://developers.google.com/maps/documentation/business/faq#usage_limits](https://developers.google.com/maps/documentation/business/faq#usage_limits)

很可能与使用 iPhone 的 API 无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T17:20:22.550

我建议您向 Maps API for Business 支持团队（Maps API Premier 的新名称）打开一个案例。您可以通过以下方式进行：http: [//support.google.com/enterprisehelp/bin/answer.py](http://support.google.com/enterprisehelp/bin/answer.py?hl=en&answer=142858&rd=1) ?hl=en&answer=142858&rd= 1 如果您还没有访问权限，也可以使用以下表单提交请求： [http ://support.google.com/enterprisehelp/bin/answer.py?hl=en&answer=142246#request](http://support.google.com/enterprisehelp/bin/answer.py?hl=en&answer=142246#request)

撇开错误消息不谈，您想从 iPhone 使用服务器端地理编码似乎令人担忧。这样做的问题是，由于设置了限制，您将无法随着用户群的增长而扩展。相反，您应该尝试阅读客户端地理编码。有一篇非常好的文章解释了如何做出这个决定： [https ://developers.google.com/maps/articles/geocodestrat](https://developers.google.com/maps/articles/geocodestrat)

“连接太多”听起来不像是您可能从 Google 服务器获得的错误消息，而是与平台有关。如果您联系支持人员，他们将能够为您检查。

我希望这会有所帮助！

# java - hiddenText = ca.a.getText(); 给出 NullPointerException？

> ID：11544859
> 
> 赞同：0
> 
> 时间：2012-07-18T15:26:21.260
> 
> 标签：java

编辑：谢谢你的所有答案，真的有很多帮助和一些很好的提示。

大家好，我是新来的Java 编程新手，所以我会尽力提供任何相关信息。

我的问题是我正在尝试创建两个类，第一个类（ClassA）是一个 GUI，第二个（ClassB）是（ClassA）的逻辑。

我的代码的一个简单示例是：-

**A类**

```
import javax.swing.*;
import java.awt.*;

public class ClassA extends JFrame {

JTextField a = new JTextField();

JButton but = new JButton("Click");

ClassB cb = new ClassB();

public ClassA() {
    setTitle("Test");
    setLookAndFeel();
    setSize(250, 100);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    GridLayout mainGrid = new GridLayout(1, 1, 20, 20);
    setLayout(mainGrid);

    add(a);
    add(but);
    but.addActionListener(cb);
    setVisible(true);
}

private void setLookAndFeel() {
    try {
        UIManager.setLookAndFeel(
                "com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel"
                );
    } catch (Exception exc) {
        //ignore error
    }
}

public static void main(String[] args) {
    ClassA Alch = new ClassA();
}

} 
```

**B类**

```
import java.awt.event.*;

public class ClassB implements ActionListener{
String command;
String text;

ClassA ca;

@Override
public void actionPerformed(ActionEvent event) {
    command = event.getActionCommand();
    if (command.equals("Click")) {
        text = ca.a.getText();
        System.out.println(text);
    }

}
} 
```

我遇到的问题是让 ClassB 读取 JTextField *a*。

如果我删除线

```
text = ca.a.getText(); 
```

并使用

```
System.out.println(command); 
```

它输出 Click 所以其余的代码似乎可以工作，但只要我添加

```
text = ca.a.getText(); 
```

当我使用“单击”按钮时，我得到一个 NullPointerException。

所以问题是我应该如何编写代码让 ClassB 读取 JTextField 并输出它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:31:33.903

你有`ClassA`变量`ca`，但你还没有初始化它。所以首先你需要初始化`ca`变量才能使用它。

```
ClassA ca - new ClassA(); 
```

* * *

与您的问题无关，但正如您所说，您是 java 新手。永远记住永远不要在逻辑类中拥有接口类的实例变量。这是一个糟糕的设计。

我建议你找到一些关于 MVC 设计模式的好文章，然后再跳回到 OOP。打下坚实的基础总是更好的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:31:42.877

该`ca`变量从未初始化。您需要`ClassA ca = new ClassA()`在您的某处添加类似的东西`ClassB`- 可能在构造函数中。

**澄清编辑**

每条评论：

如果变量在构造函数中被初始化，则需要使用`ca = new ClassA()`，否则变量将仅在构造函数中作用域。因此，例如：

```
public ClassB() {
    ca = new ClassA();
} 
```

但是，如果您出于某种原因不想添加构造函数，您也可以修改变量的现有声明：

```
public class ClassB implements ActionListener{
    String command;
    String text;
    ClassA ca = new ClassA();
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:35:22.637

首先，您必须在 ClassB 中创建 ClassA 的实例：

```
ClassA ca = new ClassA(); 
```

那么你应该知道 ca 是一个实例变量，如果你不初始化一个实例变量，它会得到空值。

提示：最好将您的实例变量设为私有并通过 getter 和 setter 方法访问它们：

```
private JTextField txtField1 = new JTextField();

private JButton btnAction1 = new JButton("Click");

private ClassB cb = new ClassB();

public JTextField getTxtField1() {
    return txtField1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:54:45.743

`ca`您可以通过调用在 ClassA 的构造函数中初始化 ClassB 的字段`cb.ca = this`，但这有点脏。字段应该几乎总是私有的，即不能从类外部访问。

解决这个问题的最好方法是忘记 ClassB 并使用匿名类来代替它。在 ClassA 的构造函数中添加新的 ActionListener 匿名实现。

```
but.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent event) {
        command = event.getActionCommand();
        if (command.equals("Click")) {
            String text = a.getText();
            System.out.println(text);
        }
}); 
```

或者，您可以将标签作为参数提供给 ClassB 的构造函数并将其保存到（ClassB 的）字段中。

```
private JTextField field;

public ClassB(JTextField field) {
    this.field = field;
} 
```

# javascript - 使用 node.js 模块，在什么情况下模块会执行两次？

> ID：11544863
> 
> 赞同：4
> 
> 时间：2012-07-18T15:26:36.030
> 
> 标签：javascript, node.js

我有一个模块，它包装了我的应用程序正在使用的 Socket.io 功能，它看起来像这样：

```
// realtime.js
var io = require('socket.io'),
    sio;

exports.init = function(expressServer) {
    sio = io.listen(expressServer);
}

... 
```

主 app.js 文件看起来像

```
// app.js
var rt = require('./realtime.js'),
    other = require('./other.js');
...
rt.init(expressServer); 
```

另一个模块也使用 rt.js

```
// other.js
var rt = require('./realtime.js');
... 
```

我的问题是，other.js 和 app.js 是否都具有相同的 rt.js 实例？

[关于与 redis 相关的 SO](https://stackoverflow.com/questions/8931239/how-to-access-variables-declared-in-main-app-js-in-seperate-route-files-in-node)的答案让我相信上述陈述是正确的，但在[此处的文档](http://nodejs.org/api/modules.html)中它说

> 多次调用 require('foo') 可能不会导致模块代码被多次执行。这是一个重要的特点。有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。

这似乎意味着不能保证是这种情况？

最后[，这个问题](https://stackoverflow.com/questions/7622385/nodejs-modules-and-duplication-if-an-app-uses-two-modules-that-require-a-common)似乎表明它取决于文件名，并且由于只有一个 rt.js 实例，因此不应多次执行。如果是这种情况，它仅取决于 rt.js 是同一个文件还是取决于 require 指定的路径。基本上，如果 rt.js 和 other.js 在 lib/ 中，并且 app.js 比 other.js 中的要求低一级，并且 app.js 会从不同的文件指向 rt.js，这有关系吗？

如果有人能为我解决这个困惑，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T01:04:30.517

模块目前只评估一次，但你不应该依赖它。在模块中有任何状态都被认为是不好的做法。是什么阻止您将对 sio 的引用传递给 other.js？

```
//realtime
var io = require('socket.io'),

exports.init = function(expressServer) {
    return io.listen(expressServer);
}

// app.js
var rt = require('./realtime.js'),
    other = require('./other.js');
...
var sio = rt.init(expressServer);
// now ask other.js to use same sio instance
other.use_sio(sio); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:37:09.843

确保不要在多个地方安装 socket.io。如果您在不同的模块中需要 socket.io，其中每个模块都从不同的路径搜索包，那么每个模块将加载一个单独的包实例。

应用目录布局：

```
-module1
--/npm_modules //has socket.io
---/socket.io
--/module1.js //requires socket.io from module1/npm_modules

-module2
--/npm_modules //has another socket.io installation
---/socket.io
--/module2.js //requires socket.io from module2/npm_modules (Does not create a reference to what was required in module1.) 
```

希望这可以帮助。

# .net - 使用转义键失去对 ToolStripMainMenu 项目的关注？

> ID：11544866
> 
> 赞同：2
> 
> 时间：2012-07-18T15:26:49.213
> 
> 标签：.net, vb.net, menustrip

我的一个表单中有一个 MenuStrip，这样用户就有一个菜单栏，他们可以从中选择各种东西。为方便起见，有些还映射了快捷键。通过覆盖 MenuStrip 的渲染器，我还实现了所有项目及其子菜单的自定义外观。

当我对附有下拉列表的项目使用快捷键时，会出现此问题。当列表关闭时，如果我按了转义键，列表将按预期关闭，但仍选择父项。它仍然突出显示，并且仍然具有焦点。再次按下退出键没有任何作用。我认为我应该自己实施这种行为？如果是这样，怎么做？ToolStripMenuItems 似乎没有任何函数调用会告诉它取消选择。

编辑：如果有人好奇，我正在寻找在表单的 KeyDown 事件中捕获转义键。我用它来退出表格。这是代码：

```
Private Sub myForm_KeyDown(sender as Object, e As KeyEventArgs) Handles Me.KeyDown
   If e.KeyCode = Keys.Escape Then
      Me.Close()
      e.Handled = True
   End If
End Sub 
```

但即使我对此发表评论，我仍然会遇到上述行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:55:59.047

默认情况下，放置在表单的 KeyDown 事件中的代码只会在表单本身具有焦点时触发。为了触发这些事件而不管表单上的焦点是什么，您必须更改表单的以下属性：

KeyPreview 从**False**到**True**。

当焦点位于窗体上的任何控件上时，这会导致窗体的“键”相关事件触发。

# javascript - 如何将某些 HTML 从一个页面获取到另一个表单中？

> ID：11544867
> 
> 赞同：1
> 
> 时间：2012-07-18T15:26:48.840
> 
> 标签：javascript, jquery, html

我正在开发的网站上有一个工作计算器。一个人收集了他需要的作品后，我怎样才能让他们在点击按钮时重定向到联系我们页面，并将他们计算的作品插入文本框中？

更多信息：

在计算器中，初始作品通过使用 Javascript 脚本显示在表格中，如下所示：

```
for(var i=0; i < cartArray.length; i++){
    var cartRow = $("<tr>", {
        html:'<td class="itemname">'+cartArray[i][1]+'</td><td><input class="quantity" name="'+cartArray[i][0]+'" type="text" size="2" value="'+cartArray[i][3]+'"/></td><td><a href="#'+cartArray[i][0]+'">Remove</a></td>'
    });
    cartTable.append(cartRow);
    totalCost += (cartArray[i][2] * cartArray[i][3]);
} 
```

我只需要将项目名称、数量和总数插入到文本框中。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:29.097

如果两个页面都在同一个域中，我建议您使用 window.opener 来引用另一个页面。例如：document.getElementById("textfield1").value = window.opener.document.getElementById("textfield2").value;

[在https://developer.mozilla.org/en/DOM/window.opener](https://developer.mozilla.org/en/DOM/window.opener)中了解有关 window.opener 的更多信息

# apache - 我想用 .htaccess 禁用目录而不是子目录的访问

> ID：11544868
> 
> 赞同：2
> 
> 时间：2012-07-18T15:26:52.523
> 
> 标签：apache, .htaccess, url

我想用 .htaccess 禁用目录而不是子目录的访问

我已经编写了一个重写规则来将所有内容重定向到子目录（public_html），但是如果用户知道 url，它的父级仍然可以访问，我想禁用当前目录而不是子目录的访问

```
    # 打开重写。
    重写引擎开启

    # 仅适用于该域的 URL
    RewriteCond %{HTTP_HOST} ^(www.)?domain.com$

    # 仅适用于不在文件夹下的 URL。
    RewriteCond %{REQUEST_URI} !^/文件夹/

    # 不适用于指向现有文件或文件夹的 URL。
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # 重写所有这些以插入/文件夹。
    重写规则 ^(.*)$ /folder/$1

    # 同时重定向根文件夹。
    RewriteCond %{HTTP_HOST} ^(www.)?domain.com$
    RewriteRule ^(/)?$ 文件夹/index.php [L]

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:39:57.440

您必须在主服务器配置中使用两个 .htaccess 文件或两个 Directory 部分（如果您的服务器允许 .htaccess 文件，第一个解决方案会更容易）。

在你的根目录中放入一个 .htaccess ，内容如下：

```
Allow from none
Deny from all 
```

并在您的`public_html`文件夹中放置一个内容：

```
Allow from all 
```

这样，您的根目录中将无法访问任何内容，但是您`public_html`会覆盖它，并且在那个位置上，一切都将是可访问的。

### 编辑：

你想要的可以通过把这个 .htacces 放在你的根目录中来完成：

```
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_URI} !^/public_html/
RewriteRule ^(.*)$ public_html/$1 
```

并将您的原始文件放入`public_html`并对其进行修改以反映它现在在`public_html`文件夹中。我发布的这个配置负责跳过根目录，并假装是`public_html`根目录。

# javascript - 即使表单无效，也会调用 HTML 5 表单提交处理程序

> ID：11544869
> 
> 赞同：0
> 
> 时间：2012-07-18T15:26:59.780
> 
> 标签：javascript, jquery, html

我正在为使用 HTML 5 表单验证 API 的 HTML 5 应用程序编写一些单元测试。我`submit`在表单上附加了一个事件处理程序，该处理程序在序列化为 JSON 并将其传递给我的服务器之前进行了一些自定义处理。

不过，我发现，如果我`submit()`在表单上启动一个 jQuery 事件，即使它无效，我的提交处理程序仍然会被调用。

相反，我希望我的事件处理程序不会因为表单无效而被调用。

我创建了一个 JSFiddle 来演示（在 Chrome 20 中测试）：

[http://jsfiddle.net/jonbca/SYg4h/22/](http://jsfiddle.net/jonbca/SYg4h/22/)

那么，什么给了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:41:53.057

触发“.submit()”处理程序与 HTML5 表单验证机制没有任何关系。该机制实际上完全独立于 JavaScript，实际上它在 DOM API 中几乎不可用。您可以在表单元素上显式调用“checkValidity()”，但这只会返回一个布尔结果，并且不会执行*用户*单击“提交”表单控件时发生的任何可视表单更新。

重要的是要记住，许多花哨的 HTML5“智能标记”行为旨在让事情在*不需要*JavaScript 的情况下发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:38:04.963

尝试触发提交按钮：

```
$('#submitBtn').click(); 
```

如果你没有，就做一个隐藏的，复制动作。

**小提琴**：http: [//jsfiddle.net/SYg4h/30/](http://jsfiddle.net/SYg4h/30/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T15:36:03.233

尝试在按钮上使用点击处理程序

```
$('#myform').submit(function (e) {
    // check for validation here
    var value = $('#foo').val();
    if (!value || value == undefined)
        $('#message').html('It did not submit');
    else
        $('#message').html("It submitted");
    return false;
});

$('#submitBtn').click(function(){
    $('#myform').submit();
}); 
```

试试这个：http: [//jsfiddle.net/Cqzcu/4/](http://jsfiddle.net/Cqzcu/4/)

# python - Python 精确采样

> ID：11544870
> 
> 赞同：0
> 
> 时间：2012-07-18T15:27:00.787
> 
> 标签：python, monitoring, timing, sampling

我正在尝试每毫秒对 CPU 寄存器进行采样并计算频率。为了进行准确的测量，我要求采样时间非常准确。我一直在使用 time.sleep() 来实现这一点，但睡眠在 1 秒后不是很准确。

我想做的是设置一个计数器并在该计数器达到某个值并且计数器以准确的速率递增时进行采样。我正在运行 Python 2.6。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:37:56.740

我怀疑那里可能有几个 Python 包可以帮助您满足您的需求。我也怀疑 Python 不是该目的的正确工具。

有timeit模块

有带有时钟（）的时间模块，它不是挂钟，而是 CPU 使用时钟（用于初始化 time.clock() 对象的应用程序。它是一个浮点值，在位下方显示一些 12+ 位，即 1.12345678912345 . Python 浮点数的准确性并不为人所知，而且我个人认为 time.clock() 的返回值并不准确。

您可以搜索其他 Python 内省工具，例如检查、itertools 和其他时间进程。但是我怀疑它们的准确性取决于测量同一事物的多次迭代的运行平均值。

# facebook - 如何在 UTC 中获取 Facebook 广告统计信息

> ID：11544871
> 
> 赞同：0
> 
> 时间：2012-07-18T15:27:00.257
> 
> 标签：facebook, api, timezone, stat

有没有办法获取 UTC 时间的广告统计信息，返回的统计信息似乎与广告帐户时区一致。我们尝试为广告帐户定义 UTC 时区，但我们没有找到任何与 UTC 时间匹配的国家（我们假设它与夏令时有关）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:08:03.020

不可以，必须在广告帐户的时区中检索 24 小时（或 24 小时的倍数）的统计信息。如果您每小时检查一次统计信息并每小时存储一次，您可以计算任意时区的统计信息，但 API 将始终以账户所在时区的统计信息进行响应

# google-app-engine - Google App Engine 上的 Request_logs - 为新版本附加擦除？

> ID：11544873
> 
> 赞同：0
> 
> 时间：2012-07-18T15:27:04.897
> 
> 标签：google-app-engine

我使用以下代码设置了一个 cron 作业来下载日志：

```
echo [password] | appcfg.py request_logs --num_days=1 --severity=0 --append --passin --email=[user] --quiet /tmp/code/ ~/site_logs/`date +%m-%d-%y`.txt 
```

我每 5 分钟运行一次，这对于让最新的日志可用于 grep 非常有用。但是，如果我增加版本号，日志似乎不会追加。它只是覆盖文件。

我错过了什么吗？有没有更好的方法可以将日志连续转储到磁盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T23:01:55.173

如果您仍然遇到此问题，您可以公开一个最小的 API 来公开当前版本 id 并在获取之前对其进行查询。这是hacky，但它的工作原理。

可以使用 os.environ['CURRENT_VERSION_ID'] 检索当前服务的版本 ID。请参阅：[https ://developers.google.com/appengine/docs/python/runtime](https://developers.google.com/appengine/docs/python/runtime)

# android - 真的与 Android 中的 setPreviewCallback 混淆，需要建议

> ID：11544877
> 
> 赞同：4
> 
> 时间：2012-07-18T15:27:13.010
> 
> 标签：android, android-layout, android-activity, android-camera, surfaceview

我正在Android上构建一个应用程序，从相机中获取帧，处理它们，然后在surfaceView上显示帧，以及通过canvas和drawbitmap等在SurfaceView上绘图。

只是为了检查一下，SurfaceView 和 Bitmaps and Canvases 是最好的方法吗？我追求速度。

假设上述答案是肯定的，那么问题将是：我应该在哪里放置以下函数

```
camera_object.setPreviewCallback(new PreviewCallback()
     public void onPreviewFrame(byte[] data, Camera camera){ 
```

我应该把它放在 onCreate() 还是应该把它放在 surfaceCreated() 或 surfaceChanged() ？

我声明了我的 mainactivity 类如下：

```
public class MainActivity extends Activity implements SurfaceHolder.Callback, Camera.PreviewCallback
{ 
```

并且在那个类中，Eclipse 迫使我在 MainActivity 类中为 onpreviewframe 创建一个覆盖函数，如下所示

```
public void onPreviewFrame(byte[] data, Camera camera){
} 
```

但它永远不会被调用。我应该尝试使用这个功能吗？使用它更好吗？或者它只是一个 Eclipse 的东西？

请指教

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T23:12:18.570

您是否从应用程序调用[setPreviewDisplay()](http://developer.android.com/reference/android/hardware/Camera.html)、[startPreview()](http://developer.android.com/reference/android/hardware/Camera.html)和[setPreviewCallback(this)](http://developer.android.com/reference/android/hardware/Camera.html)？否则，您将不会收到任何对 onPreviewFrame() 的调用。事实上，如果您使用的是 SurfaceView，那么回调预览缓冲区是屏幕上显示的实际缓冲区的副本。因此，如果要显示这些复制的缓冲区，则需要创建一个新视图并覆盖它。这将是低效的。我建议您改用[SurfaceTexture](http://developer.android.com/reference/android/graphics/SurfaceTexture.html)并使用“onFrameAvailable”回调来获取帧，然后手动绘制和显示。这方面的一个例子可以在默认 Android 相机应用程序的[PanoramaActivity代码中找到。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.1_r1/com/android/camera/panorama/PanoramaActivity.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:20:20.557

没有`camera_object.setPreviewDisplay(surface_holder);`您将无法接收相机回调；也不要忘记

```
surface_view.setVisibility(View.VISIBLE);
surface_holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

您可以将相机预览隐藏在另一个视图下；在 3.0 及更高版本上，您甚至可以将表面推出屏幕（将其显示在屏幕底部下方）。我不确定后一个技巧是否适用于 2.3.6。

# hudson - 如何根据不同的工作发送电子邮件通知

> ID：11544879
> 
> 赞同：1
> 
> 时间：2012-07-18T15:27:15.777
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins

我有基于提交触发构建的作业 A，在作业 A 完成后，作业 B 将作为下游作业触发。

在我的情况下，工作 A 和 B 都发送电子邮件通知。

我如何配置像作业 A 触发作业 B 这样在成功完成作业 B 后，我想向作业 A 的提交者以及全局收件人发送电子邮件通知。

有人可以帮我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:43:03.367

**1.**试试[Blame Upstream Committers](https://wiki.jenkins-ci.org/display/JENKINS/Blame+Upstream+Committers+Plugin)插件。

**2.**如果您通过 Job-A 的“触发参数化构建”触发 Job-B，那么您可以将 Job-A 的任何信息传递给 Job-B。

（对于那个，我不确定提交者是如何保存的——请告知您使用的插件以及提交者是否被列为某种环境变量）。

# java - 将多个 java 数组列表合并到一个 json 对象中

> ID：11544884
> 
> 赞同：1
> 
> 时间：2012-07-18T15:27:27.430
> 
> 标签：java, json, list, gson, flot

我有 2 个浮点数的 Java 列表（Arraylists），x 和 y 协调的 ListA 和 ListB，如下所示：

```
ListA = 10.1, 17.3, 30.0
ListB = 1.4, -14.7, 5.1 
```

我想创建一个 json 对象，以便将两个数组列表合并为一个 json 对象，如下所示：

```
[ { label: "A", data: [ [10.1, 1.4], [17.3, -14.7], [30.0, 5.1] ] }] 
```

我可以使用 [flot](http://code.google.com/p/flot/)进行绘图。

我一直在查看[Gson 库](https://sites.google.com/site/gson/gson-user-guide/)，但我看不到一个简洁的方法来做到这一点 - 有没有比为每个键设置循环并手动附加 "[ { ..." 等更简单的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:01:58.477

我想我明白你需要什么。您正在尝试创建对象结构以按照您显示的格式创建 JSON。我对吗？因此，请尝试以下操作：

```
// define a class to represent each graph
public class GraphData {

    private String label;
    private List<Float[]> data;

    // gets and sets to label and data

} 
```

需要将浮点数组列表填充为（使用 listA 和 listB）：

```
List<Float[]> yourFirstListOfData = new ArrayList<Float[]>();
for ( int i = 0; i < listA.size(); i++ ) {
    yourFirstListOfData.add( new Float[]{ listA.get(i), listB.get(i) } );
} 
```

要生成 JSON（在另一个类中）：

```
List<GraphData> graphList = new ArrayList<GraphData>();

GraphData graphData1 = new GraphData();
graphData1.setLabe1( "A" );
graphData1.setData( yourFirstListOfData );

GraphData graphData2 = new GraphData();
graphData2.setLabel( "B" );
graphData2.setData( yourSecondListOfData );

graphList.add(graphData1);
graphList.add(graphData2);

Gson gson = new Gson();
String json = gson.toJson( graphList );

// prints the generated json
System.out.println( json ); 
```

# entity-framework - Entity Framework 如何检测受更新语句影响的行

> ID：11544890
> 
> 赞同：1
> 
> 时间：2012-07-18T15:27:46.647
> 
> 标签：entity-framework, ef-model-first, optimistic-concurrency

我正在使用实体框架、模型优先、带有 Npgsql 提供程序的自我跟踪实体（VS2010 - .NET 4 目标）。

我正在尝试跟踪乐观并发异常，但我的问题是，一旦实体中的列被标记为固定，`OptimisticConcurrencyException`即使受影响的行> 0，也会引发 an。

[在这里](https://stackoverflow.com/q/11257826/15186)进行了一些挖掘之后，我想知道为什么实体框架通过`dbCommand.ExecuteReader(CommandBehavior.SequentialAccess)`后跟 a`dbDataReader.Read()`而不是`dbCommand.ExecuteNonQuery()`命令文本是简单的更新语句时发出更新命令？

```
UPDATE "schema"."table" 
SET "bool_column" = FALSE 
WHERE ("id" = 7526) AND ("xmin" = 1249804) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:20:15.767

如果要检索任何计算列（StoreGeneratedPattern = "Computed" 或 "Identity"），则基础提供程序应在 INSERT 或 UPDATE 语句之后立即发出 SELECT 语句。

Npgsql 目前在 INSERT 操作期间仅支持 SERIAL。它不支持在 UPDATE 操作期间检索计算列。消费者应调用 Refresh(RefreshMode.StoreWins, entity) 从数据源获取值。

这意味着当前版本的 Npgsql 提供程序不支持乐观并发。

# asp.net-mvc-3 - 流畅的验证 - MVC 3

> ID：11544891
> 
> 赞同：2
> 
> 时间：2012-07-18T15:27:49.033
> 
> 标签：asp.net-mvc-3, fluentvalidation

我在 MVC 3 中使用流畅验证。是否可以关闭控制器中特定后期操作的流畅验证？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:53:54.517

假设您正在使用`AttributedValidatorFactory`并且您想禁用对 Home 控制器上的 Index 操作的验证 POST 动词，您可以编写一个自定义验证器工厂：

```
public class MyAttributedValidatorFactory : AttributedValidatorFactory
{
    private readonly Func<HttpContextBase> _contextAccessor;
    public MyAttributedValidatorFactory(Func<HttpContextBase> contextAccessor)
    {
        _contextAccessor = contextAccessor;
    }

    public override IValidator GetValidator(Type type)
    {
        var context = _contextAccessor();
        var rd = context.Request.RequestContext.RouteData;
        var action = rd.GetRequiredString("action");
        var controller = rd.GetRequiredString("controller");

        if (string.Equals("post", context.Request.HttpMethod, StringComparison.OrdinalIgnoreCase) &&
            string.Equals("index", action, StringComparison.OrdinalIgnoreCase) && 
            string.Equals("home", controller, StringComparison.OrdinalIgnoreCase)
        )
        if (type == typeof(MyViewModel))
        {
            return null;
        }

        return base.GetValidator(type);
    }
} 
```

它将用于替换您的默认值`Application_Start`：

```
FluentValidationModelValidatorProvider.Configure(config =>
{
    Func<HttpContextBase> contextAccessor = 
        () => new HttpContextWrapper(HttpContext.Current);
    config.ValidatorFactory = new MyAttributedValidatorFactory(contextAccessor);
}); 
```

然后如果您在 Home 控制器上有以下操作：

```
[HttpPost]
public ActionResult Index(MyViewModel model)
{
    ...
} 
```

FluentValidation 不会启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T11:38:26.897

你错过了一些重要的 fluentvalidation 点，称为 Validator 定制。

在这里找到[http://fluentvalidation.codeplex.com/wikipage?title=mvc](http://fluentvalidation.codeplex.com/wikipage?title=mvc)

验证器定制

使用 FluentValidation v3，您可以使用 CustomizeValidatorAttribute 来配置验证器的运行方式。例如，如果您希望验证器仅针对特定规则集运行，那么您可以通过指定要验证的参数来指定该规则集名称：

```
public ActionResult Save([CustomizeValidator(RuleSet="MyRuleset")] Customer cust) {
  // ...
} 
```

这个

# c# - 什么表达式 <>c__DisplayClass9 在 c# 中是什么意思

> ID：11544894
> 
> 赞同：2
> 
> 时间：2012-07-18T15:27:59.197
> 
> 标签：c#, decompiling

我使用反编译器来获取 C# 中某些库的源代码。它产生的未知（对我而言）构造之一如下：

```
Action action = null;
<>c__DisplayClass9 class2;
action = new Action(class2, (IntPtr) this.<OptimizeVisuals>b__6); 
```

诸如此类的事情，`<>c__DisplayClass9`或者`(IntPtr) this.<OptimizeVisuals>b__6`我就是无法理解。更何况这个表达式不能用C#编译器编译，所以我需要想出更友好的东西。试图用谷歌搜索其中的一部分，但没有运气。你能给我一些提示吗？似乎它可能与匿名方法有关，但这是我最好的猜测。

提前致谢。

**编辑**：也许我最初的问题不是很清楚我需要实现什么。所以只是再次强调：我需要将提到的代码转换为普通的 C# 代码，做与反编译之前相同的事情。我的任务是更改我正在反编译的库中的某些内容，同时保持其他功能（如提到的功能）不变。这对我来说真的很重要，所以如果有人能帮助我，我会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:34:21.900

编译器为自动实现的属性、匿名方法等生成一些成员。为防止与您自己的名称发生冲突，编译器使用在 C# 中非法的名称（但在 CLR 中仍然合法）。

# java - 来自子类的静态类依赖对象初始化

> ID：11544895
> 
> 赞同：2
> 
> 时间：2012-07-18T15:28:03.733
> 
> 标签：java, inheritance, static

我有这个父抽象类，它定义了一个 Apache 记录器静态对象。像这样的东西：

```
import org.apache.log4j.Logger;

public abstract class A {

    private final static Logger logger;

        (...)

} 
```

我知道这段代码是非法的，因为记录器对象没有初始化。问题是我不想用 logger = Logger.getLogger(A.class); 初始化它 因为我希望每个子类都使用自己的类对象对其进行初始化，这样我就可以知道哪个类导致了哪个错误。

但同时我想在基类 A 中包含一些我的日志记录方法。

对此的最佳做法是什么？我应该用 A.class 初始化它，然后为每个子类重新实例化它吗？不知何故，这对我来说感觉不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:31:30.390

使用创建它的实际类对其进行初始化：

```
logger = Logger.getLogger(getClass()); //log4j way of creating loggers 
```

为此，您需要从声明中删除`static`修饰符。`logger`我更喜欢保留它`private`并通过 getter 方法访问它，但您也可以制作它`protected`并直接从`A`子类访问。

您不必担心会创建许多记录器对象，每个类实例一个记录器：在后台`Logger`包含记录器映射，并且每次创建新记录器时 - 它都会被缓存。当您第二次尝试获取同一类的记录器时 - 它只是从内部地图中检索。

因此，如果您的层次结构中有 5 个类 -`Logger`无论您调用多少次，都只会创建 5 个对象`getLogger(getClass())`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:31:34.777

> 我应该用 A.class 初始化它，然后为每个子对象重新实例化它吗？

您应该为每个子**类**重新实例化它。

# c# - 从 ASP.NET Web 应用程序运行 .exe 的权限问题

> ID：11544897
> 
> 赞同：4
> 
> 时间：2012-07-18T15:28:05.040
> 
> 标签：c#, asp.net, iis-7

我们有一个 .exe 文件，我们需要在网站上下订单时执行该文件。当我们在本地测试它时，它使用 IIS Express 可以正常工作。当我们将其移至 IIS 时，它会失败。我们假设这是一个权限错误，就好像我们将应用程序池设置为以管理员身份运行然后脚本再次运行一样。我们的问题是，当 App Pool 是 ApplicationIdentity 时，我们如何以管理员身份执行 .exe？我们正在使用以下代码：

```
var process = new Process
                          {
                              StartInfo = new ProcessStartInfo
                                              {
                                                  FileName = executablePath,
                                                  Arguments = argumentList,
                                                  Domain = domain,
                                                  UserName = userName,
                                                  Password = securePassword,
                                                  UseShellExecute = false,
                                                  LoadUserProfile = true
                                              }
                          };

        process.Start();
        process.WaitForExit();
        process.Close(); 
```

.exe 正在尝试写入用户 AppData 文件夹，这就是它失败的原因。它是第 3 方应用程序，因此我们无法更改源代码。

编辑：也澄清一下，当我们在 procmon 中指定用户名和密码时，它似乎仍然从 ISUR 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:37:02.093

我们通过在 IIS AppPool 上启用用户配置文件并在其尝试写入的文件夹上设置 IIS 用户的权限来解决此问题。

我们起诉 ProcMon 以查找程序失败的位置以及它试图写入的文件夹是 C:\Windows\System32\config\systemprofile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:34:09.590

我实际上不记得了，但是其中一个正在 100% 工作（我之前遇到过这个问题）

让我知道其中一个是正确的。

![在此处输入图像描述](../Images/f6d66edcf52698b0bed3e5920462fc58.png)

![在此处输入图像描述](../Images/554c5fa723195d0c2266ec6f233252f6.png)

# java - Hadoop映射器构造函数，何时以及如何？

> ID：11544898
> 
> 赞同：0
> 
> 时间：2012-07-18T15:28:06.563
> 
> 标签：java, eclipse, hadoop, mapreduce

好的，所以我尝试运行我的程序，但出现了这个错误：

java.lang.RuntimeException: java.lang.NoSuchMethodException: org.(..).SimpleMapReducePricing$SimplePricingMapper.()

这意味着我必须用构造函数初始化我的映射器，对吗？所以，我的问题是为什么我必须这样做，（因为我在任何示例中都没有看到它）以及我怎样才能以简单（noob）的方式做到这一点？我正在使用新的 api，我的代码如下：

```
 public class SimplePricingMapper 
    extends Mapper<Object, Text, Text, DoubleWritable>
    {   public void map(Object key, Text value, Context context
        ) throws IOException, InterruptedException { 
```

等等...

ps 我看到了一个类似的问题，但我必须承认答案让我更加困惑。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:31:59.503

我没有看到您的代码的上下文，但根据您的异常消息，您似乎`Mapper`是`inner class`.`SimpleMapReducePricing`

Hadoop 无法实例化`Mapper`没有 的实例`SimpleMapReducePricing`，因此您应该将您的`Mapper`类定义为静态的。

```
public static class SimplePricingMapper 
```

我还怀疑您嵌入了减速器`SimpleMapReducePricing`，因此您还应该将其定义为静态的。

# tomcat - 在 Tomcat 中启用跨站点请求

> ID：11544901
> 
> 赞同：3
> 
> 时间：2012-07-18T15:28:16.713
> 
> 标签：tomcat, cross-domain

首先，这可能被标记为重复问题，但其他问题根本没有回答。我想没有人觉得它有趣。

我想在我的 tomcat 服务器中启用跨站点请求。谷歌显示，在 apache 中，我们可以通过添加来启用跨站点

```
Access-Control Allow-Origin. 
```

如何在 tomcat 中完成这项工作。我想要两件事，第一是向所有人开放访问，第二是对有限站点的访问。

有可能吗？如果有，怎么做。

如果无法进行跨站点请求，API 是如何工作的。我可以将一些数据发送到 Paypal 服务器，然后我会收到回复。我知道这是在某些服务器端语言（Java、PHP）中完成的。但我想知道它是否也可以来自 Java Script，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:04:07.827

我想我找到了一种方法，当从 Tomcat 服务器（即从 Servlet）发送响应时，将响应标头设置为具有这些

```
Response.setHeader("Access-Control-Allow-Origin","http://www.myserver.com"); 
```

正如克里斯评论的那样，它不在 Apache 指令中。它只在响应标头中。希望它对尝试跨域请求的人有所帮助。

# ruby-on-rails - 我可以在 Rails 上使用 ruby 获取和发布相同的方法吗？

> ID：11544904
> 
> 赞同：0
> 
> 时间：2012-07-18T15:28:19.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, http

我是 web 开发的新手，特别是 ruby​​ on rails。我正在开发一个 Web 界面，我在同一方法上使用“获取”和“发布”请求。当我使用 get 方法并发送参数（如用户名和密码）时，它们在 url 中可见。因此，以下是我所做的。

form1.html.erb

```
<%= form_for :modify, :method => "post", :url => {:action => "method2"} do |f|%>
#code here to input username and password
<%=end%> 
```

在我的 routes.rb 中，我为 method2 编写了以下路由：

```
post 'controller/method2'
get 'controller/method2' 
```

当我输入`username and password`并单击提交时，它会`post 'method2'`在控制器中找到并执行代码，并显示`method2.html.erb`为相同的方法有一个`get request`，并且方法2 也有一个视图。

但是，我怀疑这不是正确的方法。我不希望密码可见。我开始知道我有两个选择，将密码存储在会话中或发送发布请求。我不想存储在会话中，因为它不安全。当我写一个 post 方法时，当用户试图回来时页面过期。为了防止其中任何一种发生，我在控制器中使用了与 post 和 get 相同的操作，现在我在 url 中看不到任何可见的参数。

如果这不是正确的方法，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:34:41.247

如果您想要一种操作用户和密码的可靠方法，我建议您阅读[Ruby on Rails 教程](http://ruby.railstutorial.org)，这是一个很好的教程，它将向您学习 Rails 编程的基础知识，包括安全的用户名/密码使用。

或者，您可以使用[Devise](https://github.com/plataformatec/devise/)，这是用于此目的的非常流行的 gem。

如果不知道您在做什么，我不会尝试实施安全的用户/密码系统...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:35:23.467

在你的控制器中，你应该有这个：

```
render 'controller/method2' 
```

你应该在这个路径中有一个文件：

```
app/views/controller/method2.html.erb 
```

你不需要有两条路线。

# asp.net-mvc - mvc 连接字符串问题

> ID：11544906
> 
> 赞同：2
> 
> 时间：2012-07-18T15:28:28.720
> 
> 标签：asp.net-mvc, database, asp.net-mvc-3

我想知道如何在虚拟目录中的 mvc3 项目上将以下数据源从 Ip 更改为 localhost。

```
 <connectionStrings>
    <add name="ApplicationServices" connectionString="Data Source=xx.xx.xx.xx;Initial Catalog=aspnetdb;Persist Security Info=True;User ID=xxxCompany;Password=xxx@xxxx"/>
    <add name="DATABASEContext" connectionString="Data Source=xx.xx.xx.xx;Initial Catalog=DATABASEContext;Persist Security Info=True;User ID=xxxCompany;Password=xxx@xxxx; MultipleActiveResultSets=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:34:06.957

使用句号`.`。SQL Server 将句点转换为 localhost。您可能需要包含实例名称。如果您使用 SQLExpress，您很可能会`./SQLEXPRESS`用作数据源。

# login - 仅将 Expect 脚本从 Telnet 转换为 SSH

> ID：11544911
> 
> 赞同：0
> 
> 时间：2012-07-18T15:28:42.983
> 
> 标签：login, ssh, expect, cisco

任何帮助，将不胜感激。我需要将继承的期望脚本从 Telnet 转换为仅 SSH 登录。首先，我是一个路由器专家，继承了我们所有的预期脚本模板，这是不久前写的。到目前为止，只需稍加修改，它们就能够顺利运行。我们的客户想要摆脱 Telnet，因此几个月前我们准备好所有 Cisco 路由器和交换机以支持 Telnet 和 SSH。到目前为止，我们的脚本都很好。但是，Telnet 支持和服务器很快就会消失，我需要弄清楚如何重新配置​​所有脚本模板以在仅 SSH 的环境中工作。

因此，这是一个获取 sh ver 输出的简单模板示例：

```
#!/usr/local/bin/expect -f
#
set force_conservative 0  ;# set to 1 to force conservative mode even if
                          ;# script wasn't run conservatively originally
if {$force_conservative} {
        set send_slow {1 .1}
        proc send {ignore arg} {
                sleep .1
                exp_send -s -- $arg
        }
}

####################################################################
# Info for command line arguments

set argv [ concat "script" $argv ]

set router [ lindex $argv 1 ]

####################################################################
set timeout 15
set send_slow {1 .05}
spawn telnet $router
match_max 100000
expect Username:
sleep .1
send  -s -- "user\r"
expect Password:
sleep .1
send  -s -- "pass\r"
expect *
send  -s -- "\r"
expect *
sleep .2
send  -s -- "sh ver\r"
expect *
sleep .2
send  -s -- "end\r"
expect *
sleep .2
send  -s -- "wr\r"
expect *
sleep .2
send  -s -- "exit\r"
expect *
sleep .2

expect eof 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:11:23.677

代替：

```
spawn telnet $router
match_max 100000
expect Username:
sleep .1
send  -s -- "user\r"
expect Password:
sleep .1
send  -s -- "pass\r" 
```

尝试使用：

```
spawn ssh -M username@$router
while 1 {
        expect {
                "no)?"          {send "yes\r"}
                "sername:"      {send "username\r"}
                "assword:"      {send "password\r"}
                ">"             {break}
                "denied"        {send_user "Can't login\r"; exit 1}
                "refused"       {send_user "Connection refused\r"; exit 2}
                "failed"        {send_user "Host exists. Check ssh_hosts file\r"; exit 3}
                timeout         {send_user "Timeout problem\r"; exit 4}
                }
        } 
```

# glassfish - Glassfish - JEE6 - 使用拦截器来衡量性能

> ID：11544912
> 
> 赞同：2
> 
> 时间：2012-07-18T15:28:47.450
> 
> 标签：glassfish, java-ee-6, introspection, performancecounter

为了测量方法的执行时间，我看到了使用建议

```
public class PerformanceInterceptor {
   @AroundInvoke
   Object measureTime(InvocationContext ctx) throws Exception {
   long beforeTime = System.currentTimeMillis();
   Object obj = null;
   try {
      obj = ctx.proceed();
      return obj;
   }
   finally {
      time = System.currentTimeMillis() - beforeTime;
      // Log time
   }
} 
```

然后放

```
@Interceptors(PerformanceInterceptor.class) 
```

在您想要测量的任何方法之前。

无论如何，我尝试了这个，它似乎工作正常。

我还添加了一个

```
public static long countCalls = 0; 
```

到 PerformanceInterceptor 类和一个

```
countCalls++; 
```

到 measureTime() 似乎也可以正常工作

戴上新帽子后，我会问我是否可以使用 countCalls，Glassfish/JEE6 是否可以在用作拦截器的 Java 类中使用静态变量……特别是在线程安全方面。我知道通常你应该在 Java 中同步类变量的设置，但我不知道 JEE6/Glassfish 的情况如何。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:44:23.707

在这种情况下，容器没有提供任何额外的线程安全。每个 bean 实例都有自己的拦截器实例。因此，多个线程可以同时访问静态 countCalls。

这就是为什么你必须像往常一样保护它的读取和写入。其他可能性是使用[AtomicLong](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicLong.html)：

```
private static final AtomicLong callCount = new AtomicLong();

private long getCallCount() {
   return callCount.get();
}

private void increaseCountCall() {
   callCount.getAndIncrement();
} 
```

正如预期的那样，这些解决方案只有在所有实例都在同一个 JVM 中时才能工作，因为需要集群共享存储。

# scala - ClassCastException 在 Scala 中使用 ArgumentCapture 进行 Double

> ID：11544913
> 
> 赞同：1
> 
> 时间：2012-07-18T15:28:49.320
> 
> 标签：scala, mockito

我在使用 scala 时遇到`ArgumentCapture`问题`Double`。我试图捕捉`Double`一个模拟特征的论点。尝试捕获`Int`.

这是一个示例测试：

```
import org.scalatest.FunSuite
import org.scalatest.mock.MockitoSugar
import org.mockito.Mockito._
import org.mockito.ArgumentCaptor

trait MockedTrait {
    def mockedDoubleMethod(double: Double)
    def mockedIntegerMethod(integer: Int)
}

class ClassUnderTest(myTrait: MockedTrait) {
    def methodUnderTest {
        myTrait.mockedIntegerMethod(3)
        myTrait.mockedDoubleMethod(5.0)
    }
}

class MyTest extends FunSuite with MockitoSugar {

    test("A basic test") {
        val myTrait = mock[MockedTrait]

        val classUnderTest = new ClassUnderTest(myTrait)
        classUnderTest.methodUnderTest

        val capturedInteger = ArgumentCaptor.forClass(classOf[Int])
        verify(myTrait).mockedIntegerMethod(capturedInteger.capture)

        val capturedDouble = ArgumentCaptor.forClass(classOf[Double])
        verify(myTrait).mockedDoubleMethod(capturedDouble.capture) // Throws ClassCastException
    }

} 
```

我得到以下异常：

```
java.lang.Integer cannot be cast to java.lang.Double
java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Double
    at scala.runtime.BoxesRunTime.unboxToDouble(Unknown Source)
    at MyTest$$anonfun$1.apply$mcV$sp(MyTest.scala:30)
    at MyTest$$anonfun$1.apply(MyTest.scala:20)
    at MyTest$$anonfun$1.apply(MyTest.scala:20)
    at org.scalatest.FunSuite$$anon$1.apply(FunSuite.scala:1265)
    at org.scalatest.Suite$class.withFixture(Suite.scala:1968)
    at MyTest.withFixture(MyTest.scala:18) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T12:05:35.600

我有类似的问题。我相信这应该可以解决它：

```
val capturedDouble = ArgumentCaptor.forClass(classOf[java.lang.Double]) 
```

# c - 在 C 中通过 Zeromq 重定向标准输出

> ID：11544915
> 
> 赞同：0
> 
> 时间：2012-07-18T15:28:54.473
> 
> 标签：c, string, client-server, stdout, zeromq

我正在使用 zeromq 客户端服务器模型。

我的客户端从命令行获取选项并将它们发送到服务器。服务器读取每个选项并将输出生成到标准输出（它是从一个简单的命令行工具改编而来的）。

将标准输出重定向回客户端的最佳方法是什么？

如果我可以将 stdout 指向一个字符串，我可以将它复制到 zmq_msg_data 以进行传输。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:38:45.553

您可以将其重定向到文件 `freopen( "file.txt", "w", stdout );`

或...`stringstream`结合`cout.rdbuf()`

# image - 在 actionscript 中使用产品名称作为变量显示文件夹中的图片

> ID：11544917
> 
> 赞同：1
> 
> 时间：2012-07-18T15:29:04.880
> 
> 标签：image, actionscript-3, apache-flex

嗨，我有一个显示产品详细信息的弹出窗口，我想显示与产品名称相同的文件夹中的图片 - 例如：

```
...
imageName  = "pca" + this._product.productID;
... 
```

我的问题是如何使用 imageName + .jpeg 显示图像

这样做可行，但我需要能够用变量替换图像名称 - 动态：

```
 <mx:Image name="testImg" width="100%" height="100%" source="file:///C|/MultimediaSync/pictures/pca98694E000.jpg">
    </mx:Image> 
```

我想做的是这样的，但它不起作用：

```
<mx:Image name="testImg" width="100%" height="100%" source="file:///C|/MultimediaSync/pictures/&imageName">
    </mx:Image> 
```

我被困在这里的语法上……可能是一个简单的，但我是 as3/Flex 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:23:49.673

首先定义一个类绑定你需要的图像。然后可以检索、编码（使用编码器）图像的位图并将其分配给 mx.controls.Image 实例的源属性。

图像形成后，可以将其作为子对象添加到画布中。或者，如果源属性绑定到从类实例获得的编码数据，它应该可以工作。我遇到了同样的问题，第一个解决方案对我有用。以下是我的参考。

[http://shyarmal.blogspot.com/2012/12/flex-displayable-image-from-image.html](http://shyarmal.blogspot.com/2012/12/flex-displayable-image-from-image.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:30:23.530

将您的标记`imageName`为[**Bindable**](http://livedocs.adobe.com/flex/3/html/help.html?content=databinding_2.html)：

```
[Bindable]
private var imageName:String; 
```

然后在源代码中使用大括号`{}`：

```
<mx:Image name="testImg" width="100%" height="100%" 
    source="file:///C|/MultimediaSync/pictures/{imageName}">
</mx:Image> 
```

每当您更改`imageName`变量时，`source`将分别更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:10:25.617

如果您的变量具有完整的图像路径，那么您必须为图像分配一个 ID

```
<mx:Image **id="testImage"** name="testImg" width="100%" height="100%" source="file:///C|/MultimediaSync/pictures/&imageName">
</mx:Image> 
```

[1] 您可以分配一个像

```
testImage.Source=imageName; 
```

并在每次您的 imageName 变量 chagen 时调用。

[2] 确保您的变量必须是`[Binadable]`. 根据上面的答案。

希望您的问题会得到解决...

# django - 是否可以将内置的评论表单嵌入到另一个表单中？

> ID：11544918
> 
> 赞同：0
> 
> 时间：2012-07-18T15:29:14.903
> 
> 标签：django, django-forms, django-views, django-comments

我有一个表格来编辑有关某些内容的信息，因为它可能会发生变化。我想做的是使用 Django 注释来要求在编辑信息时，进行编辑的用户提供注释说明他们做了什么，例如“名称中的固定错字”。是否可以将评论表单嵌入到我的其他表单中，同时不需要评论字段以外的任何字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:40:25.350

您可以使用名为 superform.py 的 hack： [https ://stackoverflow.com/a/3206463/57812](https://stackoverflow.com/a/3206463/57812)

还有这个嵌套表单项目： [https ://github.com/dszczyt/django-nested-forms](https://github.com/dszczyt/django-nested-forms)

# macos - Excel Mac 2011 - X 轴位置

> ID：11544919
> 
> 赞同：0
> 
> 时间：2012-07-18T15:29:21.793
> 
> 标签：macos, excel

我想在 Excel 2011 中为我的 Mac 制作一个条形图并定位 x 轴，以便标签位于每列的左侧，而不是中心。在下图中，它们位于中间。我怎样才能做到这一点？

![在此处输入图像描述](../Images/eb7af672cf5c25a1c7d46a110e5618e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:36:13.107

不确定这在 Mac 版本中如何流动，但在 Excel 2007 (Windows) 中，您想要的设置位于 X 轴格式选项上：`Position Axis | On tick marks`

现在，在这一步之后，您可能会发现左右两列以一种令人不快的方式被切断。解决此问题的方法是在图表数据区域上方和下方添加一个空白行，并扩展图表系列以包含这些空白行。最后结果：

![在此处输入图像描述](../Images/c7d8d775013e41d2b8e4f09e3b5b41d9.png)

# java - 从 Ant 构建文件运行 Java 程序

> ID：11544920
> 
> 赞同：1
> 
> 时间：2012-07-18T15:29:24.620
> 
> 标签：java, ant

所以我写了一个 ant build.xml 文件，我从两个 Java 程序中获取类文件，一个扩展另一个，将它们打包成两个单独的 jar 文件，然后启动它们。

```
<java classname="Main">
             <classpath>
                  <pathelement location="${mainDir}"/>
                  <pathelement path="${Main-Class}"/>
             </classpath>
       </java> 
```

每当我调用 ant 时，它都会说找不到“Main”。如果需要，我可以发布其余的 build.xml 文件，但这只是我感到困惑的部分。我很确定我的类名是正确的，但我最大的问题是弄清楚位置和路径的含义。现在我只有虚拟变量。

编辑：这是整个文件。

```
<?xml version="1.0"?>
<project default="dist" name="webscarab">
<description>Class</description>
<property name="ClassFiles" location="..\Simple\trunk\dev\Class\bin\" />
<property name="mainClassFiles" location="..\Simple\trunk\dev\main\build\" />
<property name="buildDir" location=".\build" />
<property name="distDir" location=".\dist" />
<property name="mainDir" location="..\Simple\trunk\dev\webscarab\src\" />
<target name="init">
        <tstamp/>
        <mkdir dir="${buildDir}"/>
        <mkdir dir="${distDir}"/>
</target>
<target name="dist" depends="init">
    <jar destfile="${distDir}/package${DSTAMP}.jar" basedir="${ ClassFiles}"/>
    <jar destfile="${distDir}/package-web-${DSTAMP}.jar" basedir="${mainClassFiles}"/>
    <java classname="Main">
     <classpath>
       <pathelement location="${mainDir}"/>
       <pathelement path="${Main-Class}"/>
     </classpath>
   </java>
</target>
</project> 
```

编辑 2：我应该提到所有内容都已编译，并且我拥有所有 .class 文件。这不是我需要在 Ant 文件中做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:33:45.833

您可能需要更改元素以指向正在创建的罐子，现在类路径似乎指向源，这是行不通的，因为类路径需要编译的 .class 文件或包含它们的罐子.

出于风格的考虑，我还会将任务移动到一个单独的“运行”或“运行应用程序”目标中，该目标取决于 dist 目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:37:10.280

有关“找不到类”的错误消息可能是由于不正确的类路径。

类路径应授予对应用程序所需的所有类和资源文件的访问权限。它由一组目录和 jar 文件组成。`location`将表示单个目录或路径，而`path`将表示多个，由您的平台分隔`;`或`:`取决于您的平台。

在你的情况下，在我看来，你希望你的类路径要么由目录组成`${pegaFuzzClassFiles}`，要么由jar 文件组成。您可以使用单个元素来执行此操作，但我建议使用多个元素，因为我认为这更清楚。`${webScarabClassFiles}``${distDir}/package-pega-${DSTAMP}.jar``${distDir}/package-web-${DSTAMP}.jar``<pathelement path="…"/>``<pathelement location="…"/>`

您还应该确保您的应用程序使用的任何第三方库在该路径上也可用。您可以在其中嵌套一个或多个`<fileset>`，`<classpath>`每个都描述`jar`给定目录中的所有文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:46:18.437

我没有大量的 ant 经验，但您可能需要明确告诉 java 要运行哪个 jar 文件。

```
<java jar="path-to-jar-file" classname="org.owasp.webscarab.Main"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:40:44.057

你需要 Javac 任务来编译你的代码，然后你可以运行你编译的类。有关 Javac 任务的更多信息，请访问[http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)

***第二条建议：*** 无论您是否在 Windows 上，强烈建议使用 unix 斜杠“/”。更改您的 mainDir、distDir 和 buildDir 属性位置。

# java - 构建游戏！maven项目

> ID：11544922
> 
> 赞同：2
> 
> 时间：2012-07-18T15:29:26.720
> 
> 标签：java, maven, playframework, playframework-1.x

我正在使用 play 1.2.4 创建一个网络应用程序。它与其他一些 maven 项目的应用程序一起工作：它们使用 maven 编译和解析（依赖关系）。

现在我需要修改我的 play 应用程序，以便它也可以用 maven 编译和启动。

因此，我下载了 maven (3.0.4)，安装了 maven 模块并根据[https://github.com/wangyizhuo/play-maven](https://github.com/wangyizhuo/play-maven)和[http://www.playframework.org/modules/maven-head/home做了一切](http://www.playframework.org/modules/maven-head/home)

我设法在我的项目中自动创建一个 pom 文件。问题是播放框架中的 jar 没有复制到 lib 文件夹中，当我尝试执行`mvn package`时它们丢失了。

有没有办法让 maven 模块正常工作？如果没有，是否有另一种可能从 maven 编译和启动项目（即可以由 maven 执行的中间 ant 文件？）

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:35:10.863

[这](https://stackoverflow.com/questions/586202/best-practices-for-copying-files-with-maven)很好地解释了它。我还没有查看您所引用的模块，但这向您展示了如何在构建中创建任务和包含目录。

您是否需要使用 maven 来构建/运行它？如果没有，看起来有一个社区贡献的扩展，允许您在游戏中[使用 maven](http://www.playframework.org/modules/maven-head/home)。

# python - 在python中获取字符串中的第一个数字

> ID：11544929
> 
> 赞同：0
> 
> 时间：2012-07-18T15:29:51.090
> 
> 标签：python, string, match

这是我使用 python 的第一天，我被困住了。我有一个文件，其内容如下所示：

*   声明//跳过
*   foo bar //显示为选项
*   标签//跳过
*   1个
*   2 富
*   3 巴
*   4 富吧
*   ...
*   23546477 bar bar bar foo

如果用户选择 foo，我只想返回 1,2,4 和 23546477 并写入文件：

*   目标 1
*   目标 2
*   目标 4
*   目标 23546477

这是我到目前为止提出的：

```
import sys
import re

def merge():

   if (len(sys.argv) > 1):
    labfile = sys.argv[1]
    f = open(labfile, 'r')
    f.readline()
    string = f.readline()
    print "Possible Target States:"
    print string
    var = raw_input("Choose Target States: ")
    print "you entered ", var
    f.readline()
    words = var.split()
    for line in f.readlines():
      for word in words:
        if word in line:
          m = re.match("\d+", line)
          print m
          //get the first number and store it in a list or an array or something else

    f.close()

merge() 
```

不幸的是，它不起作用-我看到的行`<_sre.SRE_Match object at 0x7fce496c0100>`不是我想要的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:15.147

你想做（至少）：

```
if m:  #only execute this if a match was found
   print m.group()  #m.group() is the portion of the string that matches your regex. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:40:12.853

查看[文档](http://docs.python.org/library/re.html#re.match)-`re.match`返回一个 Match 对象，这就是您所看到的。 [`re.findall`](http://docs.python.org/library/re.html#re.findall)将为您提供与给定行中的模式匹配的字符串列表。

To get just the first, you *do* want to use Match objects, but you want [`re.search` not `re.match`](http://docs.python.org/library/re.html#search-vs-match) and then you need to call `m.group()` to get the matched string out of the Match object.

# vba - VBA VLookup 允许用户选择目录上的文件名

> ID：11544930
> 
> 赞同：1
> 
> 时间：2012-07-18T15:29:58.300
> 
> 标签：vba, excel, lookup

我一直在尝试`VLookup`使用 VBA 将公式插入到列中。这`Table_array`是变量并且每个月都在变化，所以我想要一个对话框来指定我要使用的文件。每个月的`Table_array`格式都相同，到目前为止我的公式如下：

```
Sub VlookupMacro()

Dim FirstRow As Long
Dim FinalRow As Long
Dim myValues As Range
Dim myResults As Range
Dim myFile As Range
Dim myCount As Integer

Set myFile = Application.GetOpenFilename("Excel Files (*.xls), *.xls")

Set myValues = Application.InputBox("Please select the first cell in the column with the values that you're looking for", Type:=8)

Set myResults = Application.InputBox("Please select the first cell where you want your lookup results to start ", Type:=8)

Range(myResults, myResults.Offset(FinalRow - FirstRow)).Formula = _
    "=VLOOKUP(" & Cells(FirstRow, myValues.Column) & ", myFile.value($A$2:$B$U20000), 5, False)"

If MsgBox("Do you want to convert to values?", vbYesNo) = vbNo Then Exit Sub

Columns(myResults.Column).Copy
Columns(myResults.Column).PasteSpecial xlPasteValues
Application.CutCopyMode = False 

End Sub 
```

在代码没有越过`Set = myFile`行的那一刻，我遇到了“myFile”的问题。任何建议或修改都将受到欢迎。除此之外，变量文件永远不会超过 20000 行（这就是我在公式中固定范围的原因），我们将始终选择第 5 列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:38:09.157

`GetOpenFileName`不会返回一个对象。因此，您无法`Set`获得价值。

尝试：

```
FileName = Application.GetOpenFilename(FileFilter:="Excel Files (*.xls), *.xls", Title:="Please select a file") 
If FileName = False Then 
     ' User pressed Cancel
    MsgBox "Please select a file" 
    Exit Sub
Else 
    Workbooks.Open Filename:=FileName  
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:38:03.290

您已将 MyFile 声明为一个范围，但您正试图将文件名放入 var。GetOpenFileName 函数返回文件名，但不打开文件。您必须将文件名保存为字符串变量，然后使用该文件名打开工作簿。

# c# - C#字符串到var数据类型

> ID：11544934
> 
> 赞同：-4
> 
> 时间：2012-07-18T15:30:13.437
> 
> 标签：c#, string

如何将数据类型从 string 更改为 var ？

例子：

```
private void button1_Click(object sender, EventArgs e)
    {
        work("checkBox1");
    }

    public void work(string check)
    {

    string number = "1";
            if (number == "1")
            {
                check.Checked = true;
                MessageBox.Show("True");
            }
            else
            {
                check.Checked = false;
                MessageBox.Show("False");
            }

    } 
```

我怎么解决这个问题

> “字符串”不包含“已检查”的定义，并且不接受“已检查”的扩展方法

但我想工作按钮插入复选框名称

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T15:31:48.667

改变..

```
public void work(string check) 
```

... 至 ...

```
public void work(CheckBox check) 
```

然后像这样调用它：

```
work(checkBox1); 
```

您*可以*使用字符串，然后通过查找控件，`Form.Controls`但使用 CheckBox 本身会容易得多。

* * *

要解决挑剔的@daveL，您不能将`var`类型作为方法参数。要使您的代码正常工作，您可以使用`CheckBox`or `dynamic`。

对于认为这是可能的世界上的@daveL，这里有一些关于[隐式类型*局部*变量](http://msdn.microsoft.com/en-us/library/bb384061.aspx)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:32:41.620

最简单的方法是将其传递给复选框的实际引用，而不仅仅是复选框的名称。

```
private void button1_Click(object sender, EventArgs e) 
{ 
    work(checkBox1); 
} 

public void work(CheckBox check) 
{ 

string number = "1"; 
        if (number == "1") 
        { 
            check.Checked = true; 
            MessageBox.Show("True"); 
        } 
        else 
        { 
            check.Checked = false; 
            MessageBox.Show("False"); 
        } 

} 
```

# iphone - 将错误的图像加载到 iphone

> ID：11544936
> 
> 赞同：0
> 
> 时间：2012-07-18T15:30:25.663
> 
> 标签：iphone, imageview

我正在从网络服务中获取我的图像并将其粘贴到我的应用程序中。Web 服务将图像保存为 img.jpg。我想将图片更改为不同的，所以我又得到了一张并将图片保存在同一位置到 img.jpg。它覆盖了文件

当我查看我的网络服务时，图片是新的。我使用 AsyncImageView 检索图像，如下所示：

```
[AsyncImageLoader sharedLoader] cancelLoadingURL:logoView.imageURL];

logoView.imageURL=[NSURL URLWithString:logourl]; 
```

logourl 填充了正确的 url，但它没有抓取新图像。它保留了旧图像。

如何清除旧图像并使用新图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:36:48.157

您必须从缓存中删除旧图像，因为 ImageLoader 认为它们相同的两个图像的 URL 相同。

```
[[AsyncImageCache sharedCache] removeImageForURL:logoView.imageURL]; 
```

编辑：

好像我的代码来自旧版本的`AsyncImageLoader` 试试这个：

```
[[AsyncImageLoader defaultCache] removeObjectForKey:logoView.imageURL];
//Make sure logoView.imageURL is a NSURL 
```

# asp.net - .Net Framework 数据提供程序可能未安装？

> ID：11544940
> 
> 赞同：2
> 
> 时间：2012-07-18T15:30:40.520
> 
> 标签：asp.net, asp.net-mvc-3

我有一个在 VS 2010 中创建的 ASP.NET 网站，它使用 MVC3 (Razor) 和实体框架以及 MSSQL 数据库。该项目在我的机器上运行良好，但是当我发布并上传到我的主机时出现错误：

```
Unable to find the requested .Net Framework Data Provider.  It may not be installed. 
```

现在我相信我已将所有必需的 DLL 添加到我的 /bin 文件夹中。这是我在 web.config 文件中的连接字符串：

**连接字符串**

```
 <add name="WhimsicalFurnishingEntities" 
     connectionString="metadata=res://*/App_Code.WhimsicalFurnishingModel.csdl|res://*/App_Code.WhimsicalFurnishingModel.ssdl|res://*/App_Code.WhimsicalFurnishingModel.msl;
     provider=System.Data.SqlClient;
     provider connection string=&quot;
      data source=localhost\sqlexpress;
      Initial Catalog=DBNAME;
      integrated security=True;
      User ID=DBUSER;
      Password=DBPASSWORD;
      user instance=True;
      multipleactiveresultsets=True;
      App=EntityFramework&quot;" 
providerName="System.Data.EntityClient" /> 
```

我已经读到您可能需要为数据库 SQL 客户端添加另一个连接字符串，我已经尝试过：

**我试过的**

```
 <add name="WhimsicalFurnishingMembership"
    connectionString="data source=localhost\sqlexpress;Initial Catalog=DBNAME;Integrated Security=false;User ID=DBUSER;Password=DBPASSWORD;"
    providerName="System.Data.SqlClient"/> 
```

但是，同样的错误仍然存​​在。这是我从堆栈跟踪中得到的确切错误：

```
[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may    not be installed.
]
System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1434271
WebMatrix.Data.DbProviderFactoryWrapper.CreateConnection(String connectionString) +64
WebMatrix.Data.<>c__DisplayClass15.<OpenConnectionStringInternal>b__14() +16
WebMatrix.Data.Database.get_Connection() +19
WebMatrix.Data.Database.EnsureConnectionOpen() +12
WebMatrix.Data.<QueryInternal>d__0.MoveNext() +71
System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +4231764
WebMatrix.Data.Database.QuerySingle(String commandText, Object[] args) +103
WebMatrix.WebData.SimpleMembershipProvider.CheckTableExists(Database db, String tableName) +59
WebMatrix.WebData.SimpleMembershipProvider.CreateTablesIfNeeded() +55
WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider sMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables) +73
WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) +51
ASP._Page__AppStart_cshtml.Execute() in ******\wwwroot\_AppStart.cshtml:3
System.Web.WebPages.ApplicationStartPage.<ExecuteInternal>b__3() +65
System.Web.WebPages.ApplicationStartPage.<GetSafeExecuteStartPageThunk>b__a(Action action) +7
System.Web.WebPages.ApplicationStartPage.ExecuteInternal() +78
System.Web.WebPages.ApplicationStartPage.ExecuteStartPageInternal(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +202
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +41

[HttpException (0x80004005): Exception of type 'System.Web.HttpException' was thrown.]
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application, Action`1 monitorFile, Func`2 fileExists, Func`2 createInstance, IEnumerable`1 supportedExtensions) +88
System.Web.WebPages.ApplicationStartPage.ExecuteStartPage(HttpApplication application) +287
System.Web.WebPages.WebPageHttpModule.StartApplication(HttpApplication application, Action`1 executeStartPage, EventHandler applicationStart) +113
System.Web.WebPages.WebPageHttpModule.StartApplication(HttpApplication application) +71
System.Web.WebPages.WebPageHttpModule.Init(HttpApplication application) +217
System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +517
System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Exception of type 'System.Web.HttpException' was thrown.]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

还有另一种方法可以尝试调试吗？我是否遗漏了必须包含在 web.config 或 _AppStart.cshtml 文件中的任何内容？

谢谢你

# java - notify() 调用的位置重要吗？（Java）

> ID：11544941
> 
> 赞同：4
> 
> 时间：2012-07-18T15:30:40.513
> 
> 标签：java, multithreading

假设我有以下情况：

```
synchronized void someMethod() {
    ...
    try {
       wait();
    }catch(InterruptedException e) {
       System.out.println("InterruptedException caught");
    } 
    ...
} 
```

和

```
synchronized void someOtherMethod() {
    ...
    notify();  
} 
```

并且`Thread`访问首先`someMethod`，进入`wait`然后`someOtherMethod`通知它并返回`Runnable`状态。`notify()`调用在方法中的位置是否重要？即使我将`notify()`调用定位在方法内的不同位置，我也注意到行为没有变化。

拨打电话时不应该`Thread`立即通知`notify()`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T15:32:55.123

块中`notify()`调用的位置*无关紧要*，因为根据定义，如果您仍在块中，那么您仍然持有锁。`synchronized`*`synchronized`*

 *> 调用 notify() 时不应该立即通知线程吗？

是的。调用`notify()`将等待队列（等待条件）中的一个线程（如果有）放入阻塞队列（等待锁定）。这确实会立即发生，但被唤醒的线程需要先获得锁才能开始运行。所以它立即被移出等待队列，但仍在等待获得锁。

顺便说一句，我建议把它写成`this.wait()`并且`this.notify()`只是为了明确哪个对象受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:47:32.353

不，notify() 调用在同步块中的位置无关紧要。

我推荐的风格：

```
class SomeClass {
  synchronized void someMethod() throws InterruptedException{
    ...
    while (! someCondition) {
      wait();
    } 
    ...
  }

  synchronized void someOtherMethod() {
    ...
    makeConditionValid();
    notifyAll();  
  }
} 
```

注意在调用`while`周围使用循环`wait`。一些 JVM 会发出*虚假通知*，因此无法保证在通知线程时，导致它等待的原始条件是有效的。此外，在通知线程放弃锁之前，被唤醒的线程不会运行；所以有可能在等待线程执行时条件再次无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:36:12.963

这些调用（即`Object#wait`和`Object#notify`）需要在同步块中进行。由于您的方法是同步的，因此同步块的范围包括方法内的所有内容。因此，定位与它无关。*

# sql - SQLXMLBulkLoad 架构验证问题（简单）

> ID：11544943
> 
> 赞同：0
> 
> 时间：2012-07-18T15:30:49.023
> 
> 标签：sql, xml, bulk-load

我有一个包含员工和信息的巨大 XML 文件，并且有一个问题。

XML 文件示例：

```
<Employees>
  <Employee>
    <EmployeeID>blah</EmployeeID>
    <FirstName>blah</FirstName>
    <LastName>blah</LastName>
    <MiddleName>blah</MiddleName>
    .......... and on
  </Employee>
    ........ and on
</Employees> 
```

我的架构，到目前为止是这样的：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<xsd:element name="Employees" sql:relation="The_Employees">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="Employee">
                <xsd:element name="EmployeeID" sql:field="EmpNo" type="xsd:integer"/>
                <xsd:element name="FirstName" sql:field="FirstName">
                    <xsd:simpleType>
                        <xsd:restriction base="xsd:string">
                            <xsd:whiteSpace value="collapse"/>
                        </xsd:restriction>
                    </xsd:simpleType>
                </xsd:element>
               .......... and on
            </xsd:element>
        </xsd:sequence> 
    </xsd:complexType>
</xsd:element> 
```

根据我的研究，根元素应该包含与您在数据库中的表的关系（为了隐私起见，本示例中的名称是“The_Employees”）所以，我建立了这个关系，并且还为每个建立了 sql:field列名，因为在大多数情况下，列名与 XML 元素标记不同。但是，我如何将每个单独`<Employee>`的标签与我的表相关联？此外，在验证 XML 时，它会引发此错误：

> 'Employee' 的内容必须匹配 (annotation?, (simpleType | complexType)?, (unique | key | keyref)*))。发现问题始于：元素。

似乎验证器认为我正在尝试将内容拆分为两个单独的表，因此需要对其进行注释，但我不是。有什么建议么？

仅供参考：这里的最终产品将是一个 VB.NET 程序，它使用 SQLXMLBulkLoad 将 XML 文件中的数据加载到新的 SQL 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:31:13.337

好吧...修复很简单，我正在回答这个问题，以便将来有人可以参考它。如果您有一个根元素以及该根元素下的每个单独的父元素并且您正在使用 BulkLoad，那么您可以将根元素设置为 sql:is-constant = 1。这告诉架构根元素存在，但是忽略它。此外，上述架构已修改为：

```
<xsd:element name="Employees" sql:is-constant=1>
<xsd:complexType>
    <xsd:sequence>
        <xsd:element name="Employee" sql:relation="The_Employees">
          <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="EmployeeID" sql:field="EmpNo" type="xsd:integer"/>
            <xsd:element name="FirstName" sql:field="FirstName">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:string">
                        <xsd:whiteSpace value="collapse"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:element>
           .......... and on
          </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
    </xsd:sequence> 
</xsd:complexType> 
```

# selenium - 如何在硒测试中正确调用外部类（包含硒命令）？

> ID：11544946
> 
> 赞同：1
> 
> 时间：2012-07-18T15:30:59.047
> 
> 标签：selenium, webdriver

我在 Eclipse 中使用 Selenium Web Driver 和 JUnit。我想通过为可重复步骤创建新类来减少我的代码。为了方便起见，我想将这些类存储在单独的文件中。例如，这样的一类：

```
import org.openqa.selenium.ie.InternetExplorerDriver;

 //Login
public class Login {
private InternetExplorerDriver driver;

String url;
String name;
String password;
String language;
public Login (String ur, String nam, String pass, String lang){
    url=ur;
    name=nam;
    password=pass;
    language=lang;
}
 public void log_in (){
 driver.get(url);
 driver.findElement(By.name("username")).sendKeys(name);    
 driver.findElement(By.name("password")).sendKeys(password);    
 driver.findElement(By.name("language")).sendKeys(language);    
 driver.findElement(By.name("logon_action")).click(); 
  }  
  } 
```

这是我的主要测试：

```
package bobsworld;

import init.Login;

import org.junit.Assert;
import org.junit.Test;
import org.openqa.selenium.Alert;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class WebTest {
private WebDriver driver;

@Test
public void testUnit() throws Exception {

//Open new window
System.setProperty("webdriver.ie.driver", "IEDriverServer.exe");
driver = new InternetExplorerDriver();

//Login 
init.Login login = new init.Login ("myurl", "log","pas","English");
  login.log_in();
} 
```

问题在于对象驱动程序。我得到`java.lang.NullPointerException`并且无法执行测试。我应该如何组织对登录和代码的调用以使我的测试工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:40:28.953

您尝试实现的是一种非常流行的方法，称为“PageObjects”。

你的问题：

1.  使用一些 checkstyle 工具来提高代码质量

2.  总体上对 Java 进行大量研究

3.  登录类或“init.Login”（将包的一部分作为类的前缀是很不寻常的）不能使用相同的 WebDriver 实例，因为您不转发它。通常你会打开第二个 WebDriver 实例，但这似乎是不可能的，尽管我不知道你的设置。您必须将“驱动程序”作为参数转发给 Login 类的构造函数。

4.  尝试使用[此处](http://code.google.com/p/selenium/wiki/PageObjects)描述的真实 PageObjects 包括PageFactory 以提高可读性和可维护性

# jquery - 单击并按住以滚动、触摸开始、触摸移动、触摸结束

> ID：11544948
> 
> 赞同：2
> 
> 时间：2012-07-18T15:31:02.820
> 
> 标签：jquery, bind, mousedown, touchstart, touchmove

我有一个可滚动的 div。我希望人们能够通过“按住”滚动列表，并选择一个按钮进行点击。

问题是当一个按钮被按住以滚动 div 时，它会触发点击功能。

我希望滚动时不会触发。我需要一些方法来区分保持功能的点击。

所以我正在使用：

```
$('.panel').bind("touchstart mousedown", function (e) {
console.log(e.type);
$(this).addClass('resize');

}).bind("touchmove mousemove", function (e) {
$(this).removeClass('resize');

}).bind("touchend mouseup", function (e) {
$(this).removeClass('resize');
$('.panel').addClass('flip');
}); 
```

我想到了以下解决方案。

当超过`'.panel'`时，按钮激活，按下：`mousedown``500 ms`

```
$(this).addClass('resize'); 
```

当`'.panel'`为`mouseup`时，按钮恢复正常状态，然后所有按钮进行输出运动：

```
$(this).removeClass('resize');
 $('.panel').addClass('flip'); 
```

但是如果是 user `mousemove`，则`mousedown`and`mouseup`动作被取消。

只是不知道如何付诸实践

与此类似：http: [//m.microsoft.com/windowsphone/en-us/demo/default.aspx](http://m.microsoft.com/windowsphone/en-us/demo/default.aspx)

请建议。

# c - 使用 libgcrypt 和 Elgamal 加密和解密时的数据丢失

> ID：11544954
> 
> 赞同：4
> 
> 时间：2012-07-18T15:31:14.567
> 
> 标签：c, elgamal, libgcrypt

我正在使用 Libgcrypt 和 Elgamal 来加密一个字节块，我遇到了 2 个问题：

1.  当我不使用填充并且我的字节块以零字节开始时，我在解密期间丢失了第一个字节；

2.  如果我使用填充，则加密效果很好，但是当我解密时，填充不会被删除。显然第一个零字节仍然存在。

使用 RSA 我遇到了同样的问题:(

我的测试代码在那里：[www.tiago.eti.br/storage/post.c](http://www.tiago.eti.br/storage/post.c "post.c") 它不使用填充。

要使用填充，您需要更改：

```
#define PADDING "raw" 
```

到

```
#define PADDING "pkcs1" 
```

并更改加密算法更改：

```
#define ALG "elg" 
```

到

```
#define ALG "rsa" 
```

要编译，您需要使用：

```
gcc -Wall -g post.c -lgcrypt -o post 
```

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:15:51.173

我在 Libgcrypt 邮件列表中发布了同样的问题，我得到了答案。

Libgcrypt 直到 1.5.0 都不会删除填充：它识别标志，但对填充不做任何事情。

所以解决方案是将 Libgcrypt 更新到 1.5.0。

# java - 从作为后台作业运行的 shell 脚本生成进程

> ID：11544955
> 
> 赞同：0
> 
> 时间：2012-07-18T15:31:20.863
> 
> 标签：java, multithreading, shell

我正在开发一个 Web 应用程序，其中我在前端运行 Java，在后端运行 shell 脚本。该应用程序主要是关于分析许多文件，Java程序从用户那里获取输入，例如他们想要分析哪个文件，从哪个日期到他们想要分析的日期。假设用户提供7月1-8日的数据。我需要处理 8 天的文件。每天有大约 100 个文件需要处理。所以我的目标是让这个过程并行而不是顺序执行。对此我基本上有两个想法。我想和你分享这个，并得到你的建议。

计划 1：有一个 Java 程序（业务层），它使用流程构建器调用 shell 脚本。我可以将用户给定的日期（例如（1-8））拆分为 4 个线程，每个线程将执行两天的操作。例如（1-2）线程1和（3-4）线程2，它继续。如果我遵循这种方法，那么所有的优点和缺点是什么。还有如何通过这种方法在线程之间进行协调。

计划 2：从 Java 调用 shell 脚本并在 shell 脚本内部生成多个进程，正如我之前所说，我可以生成进程 1 来完成日期 (1-2) 和进程 2 (3-4) 的工作，然后就可以了在。这种方法的所有优点和缺点是什么。我正在将处理后的输出写入单个文件。因此，如果我有多个进程，如何让多个进程更新单个文件。

还有与我的问题相关的任何链接的任何参考

重要提示：正如我所说，我需要在 shell 脚本中每天处理 100 个日志文件，我的要求之一是不断更新我的前端环境，了解我在 shell 脚本中的作业状态（即第 1 天已完成） ，第 2 天已完成，依此类推。我知道我可以从 shell 脚本中回显，然后我可以从 Java 中获取值。但问题是，如果我在 shell 脚本中执行回显，在处理文件的循环中，我的调用将终止，我必须再次从 Java 回调。有关如何进行此更新的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:32:30.407

首先，我建议考虑优化的第一条规则：不要优化。

然后如果你真的认为你需要优化它，我会选择第一种方法并尽可能多地使用 Java。

一种方法可能如下：1）使用 ProcessBuilder 运行所有进程并创建一个`List<Process>` 2）将每个进程包装到一个 ShellScriptProcess 并获取一个`List<ShellScriptProcess>`

```
class ShellScriptProcess implements Runneable() {

  private Process process;
  public ShellScriptProcess(Process process) {
     this.process=process;
  }

  boolean synchronized finished = false;
  public void run() {
    process.waitFor(); //this will wait until the process terminates
    finished = true;
  }
  public boolean isFinished(){
    return finished;
 }
} 
```

3）等待进程完成

```
while(!allFinished) {
    for (ShellScriptProcess sp : shellScriptProcesses) {
      allFinished = true;
      if (sp.isFinished()) {
          // hurray, a process has finished, inform the UI
          // you want to do something smarter here though, 
          //like removing the finished processes from the list
      }
      else {
          allFinished = false;
      }
   }
} 
```

这只是一个非常粗略的解决方案，只是为了展示如何实现这一点的想法。而且我没有测试代码，它可能包含语法错误:) 希望这会有所帮助。

# image - 从图像中推断路径

> ID：11544956
> 
> 赞同：1
> 
> 时间：2012-07-18T15:31:24.903
> 
> 标签：image, map, path, shapes

我正在寻找这个问题的解决方案：输入中给出的地图（图像）的所有路径的推断，包含形状（作为障碍物）

# bash - 行数 - 如何排除文件夹？

> ID：11544958
> 
> 赞同：7
> 
> 时间：2012-07-18T15:31:32.400
> 
> 标签：bash

我正在使用 bash 来计算项目中的源代码行数。这是代码：

```
#!/bin/bash
find . -name '*.java' | xargs wc -l
find . -name '*.xml' | xargs wc -l 
```

我想从 ./gen 文件夹中排除文件。我认为这与“修剪”有关，但我不知道该怎么做。

**编辑** 谢谢 ruakh，但他的代码不是我的最终解决方案，我不得不让它再次计算行数。如果有人想要，这是完成的事情：

```
#!/bin/bash
find . -path ./gen -prune -o -name '*.java' | xargs wc -l
find . -name '*.xml' | xargs wc -l 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T16:21:43.553

我无法使 ruakh 的解决方案发挥作用，最终得到了以下结果：

```
find . -not -path '*/gen*' -a \( -name '*.java' -o -name '*.xml' \) 
```

`egrep`还发现了一个基于 GNU find的有趣选项：

```
find a/ -regextype egrep -not -path '*/gen*' -a -regex '.*(java|xml)$' 
```

为了计算匹配文件中的行数，您可以坚持`xargs cat | wc -l`到最后：

```
find . -not -path '*/gen*' -a \( -name '*.java' -o -name '*.xml' \) | xargs cat | wc -l 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T15:38:19.440

这个命令：

```
find . -path ./gen -prune -o -name '*.java' -print 
```

将打印内部某处的所有`*.java`文件的路径`.`，减去内部某处的文件`./gen`。

# android - FrameLayout to RelativeLayout ClassCastException 即使没有使用 FrameLayout

> ID：11544964
> 
> 赞同：17
> 
> 时间：2012-07-18T15:31:47.303
> 
> 标签：android, android-layout, classcastexception, android-relativelayout, android-framelayout

在我的应用程序中，我有一个布局，它有一个`RelativeLayout`我想在运行时以编程方式设置边距的布局。但是当我这样做时，它让我`ClassCastException`说`FrameLayout`can't cast to `RelativeLayout`。我没有使用任何 FrameLayout，也没有为`FrameLayout`. 问题仍然存在。我使用的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rl_root"
android:background="@color/menu_bg"
android:layout_width="wrap_content"
android:layout_height="fill_parent" >

<RelativeLayout
    android:id="@+id/ll_lhs_menu"
    android:layout_width="300dip"
    android:layout_height="fill_parent"
    android:background="@color/menu_bg"
    android:orientation="vertical">

    .....

</RelativeLayout>

<RelativeLayout
    android:id="@+id/rl_right"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:background="@drawable/capture_port"
    android:scrollbars="none" >

    ....

</RelativeLayout>

</RelativeLayout> 
```

这是我的 onCreate，我将边距设置为父布局：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.menu);

 _rootLayout = (RelativeLayout) findViewById(R.id.rl_root);
RelativeLayout.LayoutParams _rootLayoutParams = new RelativeLayout.LayoutParams(_rootLayout.getWidth(), _rootLayout.getHeight());
_rootLayoutParams.setMargins(300, 0, 300, 0);
_rootLayout.setLayoutParams(_rootLayoutParams);
} 
```

这是 LogCat：

```
 07-18 21:12:39.410: E/AndroidRuntime(7663): FATAL EXCEPTION: main
    07-18 21:12:39.410: E/AndroidRuntime(7663): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams cannot be cast to android.widget.FrameLayout$LayoutParams
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:268)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.View.measure(View.java:10828)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:764)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:519)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.View.measure(View.java:10828)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4355)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:267)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:1912)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.View.measure(View.java:10828)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.ViewRoot.performTraversals(ViewRoot.java:960)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.view.ViewRoot.handleMessage(ViewRoot.java:2062)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.os.Handler.dispatchMessage(Handler.java:99)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.os.Looper.loop(Looper.java:132)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at android.app.ActivityThread.main(ActivityThread.java:4128)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at java.lang.reflect.Method.invokeNative(Native Method)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at java.lang.reflect.Method.invoke(Method.java:491)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    07-18 21:12:39.410: E/AndroidRuntime(7663):     at dalvik.system.NativeStart.main(Native Method) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-18T15:35:04.960

如果是 RelativeLayout.LayoutParams，请尝试设置 FrameLayout.LayoutParams。当您在运行时设置布局参数时，您必须从它的父级设置。

所以，它将是：

```
FrameLayout.LayoutParams _rootLayoutParams = new FrameLayout.LayoutParams(_rootLayout.getWidth(), _rootLayout.getHeight());
_rootLayoutParams.setMargins(300, 0, 300, 0);
_rootLayout.setLayoutParams(_rootLayoutParams); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-28T02:11:31.240

我以前遇到过这个错误，这是因为我试图转换参数而不是创建一个新实例。我希望这有帮助。

就在这儿 ：

```
RelativeLayout.LayoutParams _rootLayoutParams = new RelativeLayout.LayoutParams(_rootLayout.getWidth(), _rootLayout.getHeight()); 
```

应该：

```
RelativeLayout.LayoutParams _rootLayoutParams = new RelativeLayout.LayoutParams(_rootLayout.getLayoutParams()); 
```

现在您已经拥有了父（根）布局中的所有布局参数，您可以使用它们为您正在膨胀的子视图设置参数。

```
// Example usage:   
// viewGroup is the parent in this case whose parameters we want as a reference point.
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(viewGroup.getLayoutParams());

// Now we can add a rule stating that we want to center our new view both horizontally and vertically in the parent (viewGroup) view.
params.addRule(RelativeLayout.CENTER_IN_PARENT);

// Add more rules here if you would like
params.addRule(newRule2);

// After all of your new parameters are laid out, assign them to the view you want them applied to  
newView.setLayoutParams(params);

// Add the view to your hierarchy and enjoy
viewGroup.addView(newView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T03:47:52.447

我建议@id/rl_root 的父级必须是未显示在此 xml 中的 FrameLayout。LayoutParam 的类型应该与其父级相同，而不是自身。

# java - 反转句子中每个单词中的字符 - Thinbug

> ID：11544966
> 
> 赞同：0
> 
> 时间：2012-07-18T15:31:54.603
> 
> 标签：java, stack, reverse

此代码在`main`函数内部：

```
Scanner input = new Scanner(System.in);

System.out.println("Type a sentence");
String sentence = input.next();

Stack<Character> stk = new Stack<Character>();
int i = 0;

while (i < sentence.length())
{
    while (sentence.charAt(i) != ' ' && i < sentence.length() - 1)
    {
        stk.push(sentence.charAt(i));
        i++;
    }
    stk.empty();
    i++;
} 
```

这是`empty()`功能：

```
public void empty()
{
    while (this.first != null)
        System.out.print(this.pop());
} 
```

它不能正常工作，因为通过输入`example sentence`我得到这个输出：`lpmaxe`。第一个字母丢失，循环停止，而不是从空格算到句子的下一部分。

我正在努力实现这一目标：

`This is a sentence`---> `sihT si a ecnetnes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:40:20.060

根据对原始帖子的修改，OP 现在表明他的目标是反转句子中单词的字母顺序，但将单词留在初始位置。

我认为，最简单的方法是使用 String`split`函数，遍历单词并颠倒它们的顺序。

```
String[] words = sentence.split(" "); // splits on the space between words

for (int i = 0; i < words.length; i++) {
    String word = words[i];
    System.out.print(reverseWord(word));

    if (i < words.length-1) {
        System.out.print(" "); // space after all words but the last
    }
} 
```

其中方法`reverseWord`定义为：

```
public String reverseWord(String word) {
    for( int i = 0; i < word.length(); i++) {
        stk.push(word.charAt(i));
    }
    return stk.empty();
} 
```

并且`empty`方法已更改为：

```
public String empty() {
    String stackWord = "";
    while (this.first != null)
        stackWord += this.pop();
    return stackWord;
} 
```

**原始回复**

最初的问题表明OP想要完全颠倒这句话。

你有一个双循环结构，你并不真正需要它。

考虑这个逻辑：

1.  从输入字符串中读取每个字符并将该字符压入堆栈
2.  当输入字符串为空时，从堆栈中弹出每个字符并将其打印到屏幕上。

所以：

```
for( int i = 0; i < sentence.length(); i++) {
    stk.push(sentence.charAt(i));
}
stk.empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T15:46:37.610

我假设您希望您的代码做的是依次反转每个单词，而不是整个字符串。因此，给定`example sentence`您希望它输出的输入`elpmaxe ecnetnes` *not* `ecnetnes elpmaxe`。

您看到`lpmaxe`而不是的原因`elpmaxe`是因为您的内部`while`循环不处理字符串的最后一个字符，因为您有`i < sentence.length() - 1`而不是`i < sentence.length()`。您只看到一个单词的原因是您的`sentence`变量仅包含输入的第一个*标记*。这就是该方法的`Scanner.next()`作用；它读取下一个（默认情况下）以空格分隔的标记。

如果你想输入一个完整的句子，总结`System.in`如下：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in)); 
```

并打电话`reader.readLine()`。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:03:08.587

假设您已经输入`sentence`并调用了 Stack 对象`stk`，这是一个想法：

```
char[] tokens = sentence.toCharArray();
for (char c : tokens) {
    if (c == ' ') {
        stk.empty();
        System.out.print(c);
    } else  {
        stk.add(c);
    }
} 
```

因此，它将一次扫描一个字符。如果我们击中一个空格字符，我们会假设我们已经击中了一个单词的结尾，反向吐出那个单词，打印那个空格字符，然后继续。否则，我们会将字符添加到堆栈中并继续构建当前单词。（如果您还想允许使用句号、逗号等标点符号，请更改`if (c == ' ') {`为类似等`if (c == ' ' || c == '.' || c == ',') {`。）

至于为什么你只得到一个字，darrenp 已经指出了。（就个人而言，除非速度是问题，否则我会使用 Scanner 而不是 BufferedReader，但这只是我的意见。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T00:08:03.273

```
import java.util.StringTokenizer;
public class stringWork {
public static void main(String[] args) {
    String s1 = "Hello World";
    s1 = reverseSentence(s1);
    System.out.println(s1);
    s1 = reverseWord(s1);
    System.out.println(s1);
}
private static String reverseSentence(String s1){
    String s2 = "";
    for(int i=s1.length()-1;i>=0;i--){
        s2 += s1.charAt(i);
    }
    return s2;
}
private static String reverseWord(String s1){
    String s2 = "";
    StringTokenizer st = new StringTokenizer(s1);
    while (st.hasMoreTokens()) {
        s2 += reverseSentence(st.nextToken());
        s2 += " ";
    }
    return s2;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T06:53:56.780

公共类 ReverseofeachWordinaSentance {

```
/**
 * @param args
 */
public static void main(String[] args) {
    String source = "Welcome to the word reversing program";

    for (String str : source.split(" ")) {
        System.out.print(new StringBuilder(str).reverse().toString());
        System.out.print(" ");
    }
System.out.println("");

    System.out.println("------------------------------------ ");
    String original = "Welcome to the word reversing program";
    wordReverse(original);
    System.out.println("Orginal Sentence :::: "+original);
    System.out.println("Reverse Sentence :::: "+wordReverse(original));
}

public static String wordReverse(String original){

    StringTokenizer string = new StringTokenizer(original);

    Stack<Character> charStack = new Stack<Character>();

    while (string.hasMoreTokens()){

    String temp = string.nextToken();

    for (int i = 0; i < temp.length(); i ++){

    charStack.push(temp.charAt(i));
}
    charStack.push(' ');
}

    StringBuilder result = new StringBuilder();
    while(!charStack.empty()){
    result.append(charStack.pop());
}

    return result.toString();   
} 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-18T15:22:30.537

```
public class reverseStr {
public static void main(String[] args) {
    String testsa[] = { "", " ", "       ", "a ", " a", " aa bd  cs " };
    for (String tests : testsa) {
        System.out.println(tests + "|" + reverseWords2(tests) + "|");
    }
}

public static String reverseWords2(String s) {
    String[] sa;
    String out = "";
    sa = s.split(" ");
    for (int i = 0; i < sa.length; i++) {
        String word = sa[sa.length - 1 - i];
        // exclude "" in splited array
        if (!word.equals("")) {
            //add space between two words
            out += word + " ";
        }
    }
    //exclude the last space and return when string is void
    int n = out.length();
    if (n > 0) {
        return out.substring(0, out.length() - 1);
    } else {
        return "";
    }
} 
```

}

这可以传入leetcode

# javascript - 如何使用 javascript 更改 .css 优先级

> ID：11544967
> 
> 赞同：2
> 
> 时间：2012-07-18T15:31:56.253
> 
> 标签：javascript, css, internet-explorer, stylesheet

我需要使用 javascript 更改加载的 .css 文件的优先级。我发现我可以通过替换 < link rel="stylesheet".... > 标记在 head 元素中的位置来做到这一点。此解决方案适用于除 IE 之外的所有浏览器。我为此使用以下代码：

```
var firstCss =  styleSheets[0].ownerNode;
var defaultCss =  styleSheets[1].ownerNode;
firstCss.parentNode.insertBefore(defaultCss, firstCss); 
```

那么对于此类问题是否有更好的解决方案，或者也许有人知道如何使此代码在 IE 下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:43:30.483

我解决问题的方式可能不是最好的，但它确实有效。我写了以下代码：

```
if (document.createStyleSheet) {
  document.createStyleSheet(defaultCss.href,0);
  defaultCss.cssText = "";
} else {
  firstCss.ownerNode.parentNode.insertBefore(defaultCss.ownerNode, firstCss.ownerNode);
} 
```

我使用 "defaultCss.cssText = "";" 清理旧的 CSS 文件，导致您无法在 IE7-8 下获取 styleSheet 的 ownerNode（但您可以在 IE9 中进行）并删除旧的样式表。因此，即使您将 CSS 文件加载到第一个位置，您仍然会在最后一个位置具有相同的内容，并且它将被优先考虑。我检查它在 IE 7 - 9 和其他 borwsers 下工作，样式表也不会再次从服务器加载 IE 从缓存中获取它。希望它对某人有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T15:40:45.833

加载 CSS 文件的顺序对应用样式的影响很小。对某个元素应用什么样式取决于 CSS 规则中使用的选择器的特殊性。即使稍后声明具有较低特异性的样式，较高的特异性也会推翻较低的特异性。

特异性可以看作是 (a,b,c,d) 形式的四个数字的组合，其中 a 优先于 b，b 优先于 c，c 优先于 d。所以 (0,0,0,2) 比 (0,0,0,1) 具有更高的特异性， (0,0,1,0) 比 (0,0,0,2) 具有更高的特异性。

样式声明的顺序（即加载样式表的顺序）仅在选择器以完全相同的特性使用时才重要。

例如：

```
A: h1
B: #content h1
C: <div id="content">
<h1 style="color: #fff">Headline</h1>
</div> 
```

A的特异性是0,0,0,1（一个元素），B的特异性是0,1,0,1（一个ID参考点和一个元素），C的特异性值是1,0,0 ,0，因为它是内联样式。由于 0001 = 1 < 0101 = 101 < 1000，第三条规则具有更高的特异性，因此将被应用。如果第三条规则不存在，则将应用第二条规则。

# python - 从子列表中提取具有最大项目的元组（在目录中查找最新报告）

> ID：11544977
> 
> 赞同：0
> 
> 时间：2012-07-18T15:32:52.620
> 
> 标签：python, tuples

我有一个脚本，可以在一系列子目录中创建所有 pdf 的目录列表。输出是元组，其中包括保存为字符串的文件的年份以及生成报告的单元的 ID，如下所示：

```
unit1, 2010
unit2, 2002
unit2, 2005
unit2, 2010 
unit3, 2003 
```

我现在要做的是创建一个报告，该报告根据第二项中包含最大值的元组查找最新报告。通常，我会在 Access 中使用 MAX 查询执行此操作，但是，我试图从那以后消除该步骤并一次编写所有提取。使用我的原始代码，我的输出将包括以下内容：

```
unit1, '2010'
unit2, '2010'
unit3, '2003' 
```

我环顾四周，意识到我需要更改我的脚本，以便它生成一个匹配每个唯一 ID 的元组列表。[使用我从将元组列表拆分为同一元组字段的子列表中](https://stackoverflow.com/questions/8092877/split-a-list-of-tuples-into-sub-lists-of-the-same-tuple-field)找到的出色答案，我能够将结果拆分为一组子列表。这意味着我的输出现在如下：

```
[[(unit1, '2010')],[(unit12, '2010'), (unit2, '2010'), (unit2, '2005'), (unit2, '2002')],[(unit3, '2003']] 
```

我现在的困难是尝试从每个包含最高值项目的子列表中提取元组。我尝试了以下方法：

```
import glob, os, itertools, operator  
dirtup = []
for f in glob.glob('P:\Office*\Technical*\Bureau*\T*\*\YR2*\R*\*\*.pdf'):
    fpath, fname = os.path.split(f)
    fyr = fpath[91:95]
    vcs = 'Volume'
    rname, extname = os.path.splitext(fname)
    rcid = fname[0:7]
    dirtup.append ((f, fyr, rcid, vcs))

dirtup2 = sorted(dirtup, key=operator.itemgetter(2))

for key, group in itertools.groupby(dirtup2, operator.itemgetter(2)):
    maxval = max(x[1] for x in dirtup2)

print [x for x in dirtup2 if x[1] == maxval] 
```

这仅返回匹配 fyr 最大值的元组，而不是每个子列表的 fyr 最大值。

**编辑**

使用 mglison 的第一个答案，我能够获得输出（包含具有最大值的第二项的元组）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:39:19.123

您可以根据特定字段对每个子列表进行排序，并获取已排序子列表的第一个元素。

```
for key,group in itertools.groupby(dirtup2,operator.itemgetter(2)):
    newlist=sorted(group,key=operator.itemgetter(1),reverse=True)
    tuple_with_max=newlist[0]
    print tuple_with_max 
```

# ruby-on-rails - 错误登录 Rails 3“SessionsController#create 中的名称错误”

> ID：11544978
> 
> 赞同：0
> 
> 时间：2012-07-18T15:32:55.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试使用 has_secure_password 进行示例登录。gem 文件已添加，但此错误仍然存​​在：

```
undefined local variable or method `password_digest' for #<User:0x23129a0>
app/controllers/sessions_controller.rb:8:in `create' 
```

在这个文件中

```
sessions_controller.rb 
```

第 8 行如下所示：

```
if user and user.authenticate(params[:password]) 
```

* * *

```
class SessionsController < ApplicationController
  def new

  end

  def create
    user = User.find_by_name(params[:name])
    if user and user.authenticate(params[:password])
      session[:user_id] = user.id
      redirect_to admin_url , notice: "Login efetuado com sucesso."
     else
       flash[:notice] = 'Usuario ou senha errados'
       redirect_to login_url
    end
  end

  def destroy
    session[:user_id] = nil
    redirect_to login_url, notice: "Logout Efetuado com sucesso."
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:10:47.627

我同意贝拉的观点，即这是重复的。但是，如果原始答案不够清楚，这里有分步说​​明。

要添加`password_digest`到您的用户模型...

在控制台中执行：

```
$ rails generate migration AddPasswordDigestToUsers 
```

这将创建一个类似的文件：（文件开头的十四位数字将与我的不同，因为它基本上是您运行生成命令时的时间戳。您可以在[此处](http://guides.rubyonrails.org/migrations.html#creating-a-standalone-migration/%22here%22)`/db/migrate/20120419234606_add_password_digest_to_users`阅读有关生成独立迁移的更多信息。）

打开您刚刚创建的迁移文件并进行编辑，使其看起来像这样：

```
class AddPasswordDigestToUsers < ActiveRecord::Migration
  def change
    add_column :users, :password_digest, :string
  end
end 
```

保存并关闭文件。然后，在控制台中，运行：

```
$ bundle exec rake db:migrate
$ bundle exec rake db:test:prepare 
```

此时，您的用户模型应该具有该`password_digest`属性，并且（希望）您不会再收到错误。

# javascript - 数组上的 .indexOf 函数在 IE7/8 中使用 JavaScript 不起作用

> ID：11544983
> 
> 赞同：15
> 
> 时间：2012-07-18T15:33:09.740
> 
> 标签：javascript, internet-explorer-8, internet-explorer-7

谁能告诉我 IE 7 和 IE 8 是否支持 JavaScript .indexOf() 方法，因为我收到错误：

```
SCRIPT438: Object doesn't support property or method 'indexOf' 
```

从 IE9 调试控制台（在 IE7 和 IE8 浏览器模式下使用）。

对于下面的评论，使用 .indexOf() 的代码如下：

```
if(shirt_colour == 'black') {
    p_arr=['orange','red','green','yellow','bblue','rblue','pink','white','silver','gold'];
    if( p_arr.indexOf(print_colour) != -1 ) rtn = true;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-18T15:34:32.633

在 IE<9`indexOf()`上，它没有“很好”地实现。尝试在您的代码中添加此功能：

```
if (!Array.prototype.indexOf)
{
  Array.prototype.indexOf = function(elt /*, from*/)
  {
    var len = this.length;

    var from = Number(arguments[1]) || 0;
    from = (from < 0)
         ? Math.ceil(from)
         : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++)
    {
      if (from in this &&
          this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```

如果在 ECMA-262 标准中找不到，它将“替换”原始功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T10:01:47.533

以下代码可能会有所帮助。

```
function findIndexOf(findfrom, findthis) {
    for (i = 0; i < findfrom.length; i++) {
        if (findfrom[i] == findthis) {
            return i;
        }
    }
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-21T17:39:16.350

如果你需要`indexOf`在 IE<=8 中，你应该考虑使用下面的[polyfill](https://remysharp.com/2010/10/08/what-is-a-polyfill)，这是[MDN 推荐的](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
// Production steps of ECMA-262, Edition 5, 15.4.4.14
// Reference: http://es5.github.io/#x15.4.4.14
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function(searchElement, fromIndex) {

    var k;

    // 1\. Let o be the result of calling ToObject passing
    //    the this value as the argument.
    if (this == null) {
      throw new TypeError('"this" is null or not defined');
    }

    var o = Object(this);

    // 2\. Let lenValue be the result of calling the Get
    //    internal method of o with the argument "length".
    // 3\. Let len be ToUint32(lenValue).
    var len = o.length >>> 0;

    // 4\. If len is 0, return -1.
    if (len === 0) {
      return -1;
    }

    // 5\. If argument fromIndex was passed let n be
    //    ToInteger(fromIndex); else let n be 0.
    var n = +fromIndex || 0;

    if (Math.abs(n) === Infinity) {
      n = 0;
    }

    // 6\. If n >= len, return -1.
    if (n >= len) {
      return -1;
    }

    // 7\. If n >= 0, then Let k be n.
    // 8\. Else, n<0, Let k be len - abs(n).
    //    If k is less than 0, then let k be 0.
    k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

    // 9\. Repeat, while k < len
    while (k < len) {
      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the
      //    HasProperty internal method of o with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      //    i.  Let elementK be the result of calling the Get
      //        internal method of o with the argument ToString(k).
      //   ii.  Let same be the result of applying the
      //        Strict Equality Comparison Algorithm to
      //        searchElement and elementK.
      //  iii.  If same is true, return k.
      if (k in o && o[k] === searchElement) {
        return k;
      }
      k++;
    }
    return -1;
  };
} 
```

# .net - Hasmorepages PrintPageEventArgs 属性究竟做了什么？

> ID：11544989
> 
> 赞同：2
> 
> 时间：2012-07-18T15:33:21.127
> 
> 标签：.net, printing, delphi-prism, printdocument

我试图了解 Hasmorepages PrintPageEventArgs 属性是什么，为什么要使用它以及它是如何工作的。

MSDN Library 并没有很好的解释。他们所说的只是，如果您将其设置为 true，则会再次调用 printpage 事件。这是否意味着事件会自行循环而不离开或离开并再次调用自身或依赖您再次调用 printpage 事件？

我只是想了解 PrintPageEventArgs.hasmorepages 属性。任何提示或帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:00:01.113

它不是 PrintDocument 的属性，而是 PrintPageEventArgs 的属性。将其实例传递给您的 PrintPage 事件处理程序。

PrintController 和 PrintDocument 类的工作方式很大程度上受 Windows 中实现打印的方式的影响。一个核心实现细节是它是*基于页面的*。打印机驱动程序一次处理一页，底层的winapi函数是StartPage()。渲染到打印设备上下文的任何内容最终都在一页上。然后 EndPage() winapi 函数完成页面并将其提交给假脱机程序。

在打印 3 页文档时绘制调用图表可能会有所帮助：

```
StartDoc()
    PrintDocument.BeginPrint event
    StartPage()
       PrintDocument.PrintPage event, e.HasMorePages = true
    EndPage()
    StartPage()
       PrintDocument.PrintPage event, e.HasMorePages = true
    EndPage()
    StartPage()
       PrintDocument.PrintPage event, e.HasMorePages = false
    EndPage()
    PrintDocument.EndPrint event
EndDoc() 
```

现在应该清楚了，通过分配 e.HasMorePage = true，您可以让 PrintController 继续触发 PrintPage 事件。您可以对文档进行分页并在 PrintPage 事件处理程序中呈现正确页面的内容。例如，您需要 BeginPrint 事件将内部页面计数器设置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:18:11.430

`HasMorePages`是`PrintPageEventArgs`您作为事件参数接收的布尔属性。`True`如果要打印更多页面，或者`False`如果当前页面是最后一页，则将其设置为在打印当前页面之后。

事件总是由框架中的某些东西为您调用，并且永远不应该由您直接调用。它们是*事件*，这意味着它们被派去告诉你发生了什么事，并给你一个回应或反应的机会。

如果将其设置为`True`，则`PrintPage`自动再次调用该事件；你不叫它自己。（这正是 MSDN 文档所说的：如果您将其设置为 true，则会**再次调用**printpage 事件。它并没有说*您需要再次调用它*- 它说*再次*调用它。）

```
ev.HasMorePages := DoYouHaveMorePagesToPrint; 
```

有关事件的 VB.NET 示例以及如何使用`ev.HasMorePages`，请参阅[PrintDocument 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument%28v=VS.71%29.aspx)。有关 的信息`PrintPageEventArgs`，请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printpageeventargs%28v=vs.71%29.aspx)，其中包含指向[PrintPageEventArgs 成员的](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printpageeventargs_members%28v=vs.71%29.aspx)链接（包括`HasMorePages`）。

# android - 从相机拍照失败 20% 的时间

> ID：11544992
> 
> 赞同：4
> 
> 时间：2012-07-18T15:33:47.753
> 
> 标签：android, cordova, camera, cyanogenmod

```
var camera = {
  settings : {
    quality : 50,
    targetWidth : 1024,
    targetHeight : 1024,
    correctOrientation : true
  }
};
var error = function(message) {
  alert("Error happened while trying to get a picture", message);
};
document.addEventListener("deviceready", function() {
  camera.toFile = function() {
    this.settings.destinationType = navigator.camera.DestinationType.FILE_URI;
    return this;
  },
  camera.toBase64 = function() {
    this.settings.destinationType = navigator.camera.DestinationType.DATA_URL;
    return this;
  },
  camera.fromCamera = function() {
    this.settings.sourceType = navigator.camera.PictureSourceType.CAMERA;
    return this;
  };
  camera.fromLibrary = function() {
    this.settings.sourceType = navigator.camera.PictureSourceType.PHOTOLIBRARY;
    return this;
  };
  camera.fromPhotoAlbum = function() {
    this.settings.sourceType = navigator.camera.PictureSourceType.SAVEDPHOTOALBUM;
    return this;
  }
  camera.get = function(callback) {
    navigator.camera.getPicture(function(data) {
      alert("taking a picture successful");
      callback(data);
    }, error, camera.settings);
  };
}, false); 
```

这是我的相机小包装。我这样称呼它：

```
camera.fromPhotoAlbum().toBase64().get(function(base64){}); 
```

大约 20% 的时间，“alert(”拍照成功“);” 不调用，而没有显示错误。如果我取消拍照，则会显示一条带有“尝试拍照时发生错误”消息的警报，因此错误回调起作用。

基本上什么都不会发生。我已经在 CM9 上的三星 Galaxy S2 和全新的 HTC One X 上对其进行了测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T16:41:06.063

最近我回答了关于同样问题的[另一个问题。](https://stackoverflow.com/questions/11505127/phonegap-does-not-restore-the-application-after-camera-activity/11544431)我们在我的公司遇到了这个问题并解决了。它与Android系统的关系比Phonegap更多。

发生的事情是当您启动相机时，您的应用程序进入 onStop()。在那里，如果需要内存，Android 系统有权终止您的应用程序。碰巧的是，当相机拍照并将其转储到内存中时，内存通常会变低，因此当您的用户拍照时，您的应用程序很有可能会被杀死。

现在您的应用程序已经死了，当相机完成时，它会重新启动您的应用程序。这就是为什么它表现得如此奇怪。相机返回到您的应用程序，但与之前的实例不同，因此您的回调永远不会被调用，因为它不再存在。

您可以通过降低图片的质量并通过 URI 而不是数据将其传递给您的应用程序来降低发生这种情况的频率，但问题不会完全消失。

为了解决回调永远不会发生的问题，我们制作了一个 Java 回调来启动相机并在每次拍摄时将图片保存到相同的位置。然后，当应用程序从被杀状态重新启动时，它会在该位置查找图片。

对于一个愚蠢的问题，这是一个奇怪的解决方案，但是如果您的应用程序被杀死，那么相机回调就不会发生。如果您需要有关如何使 Java 回调来执行此操作的更多信息，请告诉我，我会将我们的代码放在这里。否则，请查看[此 SO 答案](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)以获取更多信息。

编辑：这是我们在主要 DroidGap 活动中使用的代码：

```
private static final String folderPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/appName";
private static final String filePath = "phonegapImage.jpg";

@Override
public void onCreate(Bundle savedState) {
    //...The rest of onCreate, this makes the Java available in JavaScript
    appView.addJavascriptInterface(this, "Camera");
}

public void takePhoto(final String callback) {
    Log.v("Camera Plugin", "Starting takePhoto callback");

    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(folderPath, filePath)));
    startActivityForResult(intent, TAKE_PICTURE);
}

public String getPhotoUri() {
    return Uri.fromFile(new File(folderPath, filePath)).toString();
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        case TAKE_PICTURE:
            if (resultCode == Activity.RESULT_OK) {
                //Do whatever you need to do when the camera returns
                //This is after the picture is already saved, we return to the page
            }
            break;
        default:
            Log.v("Camera", "Something strange happened...");
            break;
    }
} 
```

然后，在您的 JavaScript 中，您可以使用以下命令调用相机：

```
Camera.takePhoto("onPhotoURISuccess");
//Then, to get the location of the photo after you take it and load the page again
var imgPath = Camera.getPhotoUri(); 
```

所以，就是这样。只需确保将所有路径/文件/页面/等名称更改为您要在应用程序中使用的名称。这将在每次拍摄照片时覆盖该图像，但如果您不希望这样做，您可能会想办法动态命名它们。您可以像使用 JavaScript 中的任何其他路径一样使用该 URI。

# ruby-on-rails - 回形针 - image.rb 中的路径

> ID：11544993
> 
> 赞同：0
> 
> 时间：2012-07-18T15:33:48.610
> 
> 标签：ruby-on-rails, paperclip

我正在使用回形针在我的 rails 应用程序中上传图像。

我有 2 个模型“图像”和“书”，其中一本书可以有许多图像，图像属于书。在我的“图像”表中，我有 4 列：

*   ID
*   book_id
*   数据文件路径
*   数据文件名

“data_file_path”列存储图像的路径，“data_file_name”列存储图像名称和扩展名

在我的 image.rb 文件中，我有以下几行代码：

```
has_attached_file :data, :path => "http://www.test.org/book/book_images/:data_file_path/:book_id/:style/:basename.:extension",
                         :url =>    "http://www.test.org/book/book_images/:data_file_path/:book_id/:style/:basename.:extension" 
```

注意上面代码中的 ':data_file_path'。

在我看来，当我执行 <%=image.data.url(:thumb)%> 时，我得到以下路径：

```
http://www.test.org/book/book_images/data_file_path/9124/thumb/1897_EK91_201107.jpg 
```

它不是从 d-base 中检索 data_file_path 值，而是显示变量名称。

如何获取 url 中的 data_file_path 值。

非常感谢您的宝贵帮助。一段时间以来，我一直在为此苦苦挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:51:29.627

啊，我终于想通了。我需要使用 Paperclip.interpolates。

我在 config/initializers/paperclip.rb 文件中添加了以下内容

```
 Paperclip.interpolates :data_file_path do |attachment, style|
  attachment.instance.data_file_path 
  end 
```

然后只需将“data_file_path”添加到 image.rb 中的路径：

```
has_attached_file :data, :path => "http://www.test.org/book/book_images/:data_file_path/:book_id/:style/:basename.:extension",
                         :url =>    "http://www.test.org/book/book_images/:data_file_path/:book_id/:style/:basename.:extension" 
```

希望这可能对其他人有帮助:)干杯

# silverlight - 使用 Prism (Silverlight) 生成布局

> ID：11544996
> 
> 赞同：0
> 
> 时间：2012-07-18T15:33:57.693
> 
> 标签：silverlight, layout, prism

我是 Prism 的新手，有一个概念问题。

我想要构建的是一个 Silverlight 应用程序，它可以从配置文件加载其布局（以及使用的模块）。想象一下，我有许多模块（例如图表、树视图和 Newsticker），我想使用我的配置文件来确定其中哪些在我的应用程序中可见，以及它们在屏幕上的位置。

因此，如果我想要一个只有 Graph 和 Treeview 而没有 Newsticker 的应用程序，那么只创建一个包含这两个模块的视图的 XAML 文件就足够了吗？这个 XAML 文件会是外壳吗？

然后我可以在启动时使用不同的 XAML 文件/shell/配置文件来“生成”不同外观的应用程序吗？

我不需要在运行时切换布局，我只想能够轻松地配置我的应用程序以使用一组不同的模块。我将不胜感激正确方向的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:07:46.063

以下是我发现的一些方法：

[http://blog.roundthecampfire.net/2011/10/creating-composable-ui-with-f-and-prism.html](http://blog.roundthecampfire.net/2011/10/creating-composable-ui-with-f-and-prism.html)

[http://www.dotnetpatterns.net/content/147-Lesson-2-Prism-creating-a-dynamic-region-layout-with-templates](http://www.dotnetpatterns.net/content/147-Lesson-2-Prism-creating-a-dynamic-region-layout-with-templates)

# android - Android - 从服务器或互联网的任何地方下载一个文件夹，并根据它在应用程序中应用更改

> ID：11544998
> 
> 赞同：0
> 
> 时间：2012-07-18T15:33:57.697
> 
> 标签：android

我刚刚完成了一个应用程序，但我想让用户安装不同的语言包（包含 mp3 文件的文件夹），并将这些 mp3 文件应用到我的应用程序中！我该怎么做？如何让用户用户下载该文件夹？以及如何在我的应用程序下载时进行更改？

（这就像谷歌地图应用程序，他们告诉你要安装哪个地图等等！我的与mp3文件有关！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:48:25.337

您无法下载文件夹。文件夹只是一个容器，但所有数据都保存在文件中，而不是文件夹中。因此，您必须下载存储在文件夹中的所有文件，或者可能更简单，将文件分发到存档（如 zip）中，然后无论需要多少文件，或者您需要什么文件夹结构，您所要做的就是下载一个文件并解压。