# StackOverflow 问答 10029000-10029999

# combobox - Excel VBA组合框返回索引不是值

> ID：10029001
> 
> 赞同：3
> 
> 时间：2012-04-05T12:53:27.033
> 
> 标签：combobox, excel, vba

我在 Excel 2007 中设置了一个组合框，它从另一个工作表中收集其列表项。当我尝试通过宏访问所选项目的值时，返回的只是索引值而不是实际值。

```
DateDropDown = Sheets("Input Form").Shapes("APPDateDropDown").ControlFormat.Value 
```

组合框中的值列为“Jan-12”，但是当我运行上面的代码时 DateDropDown 返回为 37（项目的索​​引）。

如何让它返回值“Jan-12”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:58:18.133

```
With Sheets("Input Form").Shapes("APPDateDropDown")
    DateDropDown = .ControlFormat.List(.ControlFormat.ListIndex)
End With 
```

# javascript - 如何在 HTML 文件中使用 svg 突出显示整个地图？

> ID：10029004
> 
> 赞同：1
> 
> 时间：2012-04-05T12:53:34.337
> 
> 标签：javascript, html, map, svg, mouseover

这是地图编码。如果我将鼠标悬停在地图上，它会突出显示仅显示一半的状态。我需要强调完整的状态。怎么做？任何人都可以帮我编码...

她是我们的 HTML 编码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html>
<head>
 <script type="text/javascript" src="js/jquery-1.js">
 var aid;
 var disid;
 var but;
 var hovid;
 </script>
    <title>Sample Map</title>
    <style type="text/css">
        .button {                       
            list-style-type: none;
            padding: 0;
            margin: 0;
            width: 100px;
            font-family:"Arial", Helvetica, Sans-serif;
            font-size:14px;v
            font-weight: bold; 
        }
    </style>

</head>
<body>
     <div>
        <!-- <p><a><button class="button" onclick="getid('VA','1','VA1','46','')";>Zoom</button></a></p> -->
        <p><a><button class="button" onclick= "sample.style.zoom='2300%'">Zoom</button></a></p>
        <button class="button"onclick= "sample.style.zoom='100%'">Zoom Out</button>         
    </div> 
<!--    <table>
     <tr>     
     <td> --> <div id="sample"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="700" height="500">

<polyline fill="#c0c3c5" id="KY1" title="Kentucky" alt="Kentucky" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" points="
    500.441,263.861 519.982,261.672 527.197,259.595 527.905,257.709 530.413,256.524 530.479,255.049 532.128,253.862 
    532.072,252.457 540.856,244.216 540.864,244.264 538.589,244.089 537.851,243.049 536.241,242.449 535.75,240.996 
    533.173,238.515 533.231,237.692 530.597,234.998 531.316,233.435 530.781,230.627 530.781,230.627 528.975,228.691 
    527.19,228.215 525.973,225.548 524.385,226.236 523.034,228.147 521.104,228.767 518.115,227.233 516.802,227.828 
    516.454,228.738 515.22,228.559 513.299,226.783 508.794,226.435 507.269,223.303 505.197,221.858 503.135,222.735 
    501.486,221.724 499.633,223.385 500.554,224.641 500.064,225.881 501.259,226.137 501.105,227.831 498.844,228.127 
    496.451,229.948 495.07,229.116 492.96,229.656 493.607,232.788 491.278,234.587 490.614,237.195 488.653,237.714 487.86,239.469 
    487.837,241.85 486.289,243.296 483.179,241.962 482.883,240.586 481.676,239.776 482.273,240.805 480.57,241.011 480.997,241.997 
    479.969,242.69 480.156,244.352 479.224,244.76 478.745,245.989 478.408,245.047 477.161,245.259 475.939,243.798 473.506,245.307 
    472.427,247.555 468.408,245.295 466.396,245.884 465.938,244.891 466.096,246.879 465.344,247.479 464.821,246.169 
    463.313,246.82 462.113,245.998 461.558,246.416 462.041,247.836 461.383,248.588 460.169,248.138 458.925,250.765 
    460.069,253.706 454.872,255.64 454.62,257.494 455.961,259.672 454.62,261.216 448.309,258.937 446.057,261.607 446.887,263.396 
    446.925,266.685 445.605,270.267 443.757,269.407 442.896,271.563 461.841,270.314 461.136,267.126 464.089,267.174 
    464.391,267.746 481.355,266.352 481.978,265.647 500.441,263.861" onmouseover="getstate('KY','17','','KY1');" onmouseout="onout('KY1');"><title>Kentucky</title></polyline>

<polyline fill="#c0c3c5" id="OH1" title="Ohio" alt="Ohio" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" points="
    545.233,168.086 533.923,176.797 530.205,177.313 526.158,179.271 521.791,179.139 521.14,178.462 519.449,178.738 
    518.338,178.549 516.531,177.317 513.018,176.452 495.778,178.437 500.535,222.528 501.486,221.724 503.135,222.735 
    505.197,221.858 507.269,223.303 508.794,226.435 513.299,226.783 515.22,228.559 516.454,228.738 516.802,227.828 
    518.115,227.233 521.104,228.767 523.034,228.147 524.385,226.236 525.973,225.548 527.19,228.215 528.975,228.691 
    530.781,230.627 534.104,229.693 534.405,227.264 535.615,226.61 534.705,223.909 536.431,219.708 537.908,219.829 
    538.283,221.624 539.354,220.335 540.222,220.539 539.172,218.129 539.979,217.634 539.759,216.364 540.446,214.741 
    541.875,214.269 543.063,211.814 544.403,212.763 546.07,211.648 549.936,207.213 550.254,205.473 549.648,204.752 
    550.342,203.011 550.119,202.119 550.712,201.92 550.564,199.059 551.643,195.083 551.105,193.692 551.299,192.52 550.067,190.643 
    550.456,189.982 551.832,189.336 551.869,189.331 548.445,167.054" onmouseover="getstate('OH','35','','OH1');" onmouseout="onout('OH1');"><title>Ohio</title></polyline>    

<polyline fill="#c0c3c5" id="TN1" title="Tennessee" alt="Tennessee" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" points="
    547.005,258.142 519.982,261.672 481.978,265.647 481.355,266.352 464.391,267.746 464.089,267.174 461.136,267.126 
    461.841,270.314 442.896,271.563 442.566,272.441 442.116,270.633 441.231,270.85 441.993,273.718 440.677,274.601 
    441.598,275.787 439.899,276.097 441.156,277.86 439.612,280.212 440.607,281.83 439.073,282.184 439.889,282.889 439.577,283.445 
    436.892,284.996 437.67,286.516 436.927,287.202 437.466,288.361 436.222,288.641 434.894,291.565 435.431,295.197 
    434.263,295.366 433.888,296.621 432.572,297.281 461.637,295.572 496.773,292.57 514.591,290.681 514.564,287.004 
    515.268,286.275 517.391,286.089 517.988,283.31 519.572,281.555 521.415,280.522 524.753,280.015 528.858,276.253 
    531.123,275.589 532.06,273.732 531.916,272.61 533.325,272.756 533.646,271.518 535.344,270.267 536.552,271.847 539.736,268.385 
    540.869,267.848 542.748,268.568 544.534,264.847 545.677,263.764 547.03,263.848 546.424,262.896 546.94,261.359 546.537,260.654 
    547.005,258.142" onmouseover="getstate('TN','42','','TN1');" onmouseout="onout('TN1');"><title>Tennessee</title></polyline>

    </svg>  </div> <!--</td>     
     </tr> 
    </table> -->
     <script type="text/javascript" >

    function getstate(aid,disid,but,hovid) { 
    var elem = document.getElementById(hovid);
                elem.setAttributeNS(null,"stroke","#404040");
                elem.setAttributeNS(null,"stroke-width","2.35");
     }       
          function onout(hovid) { 
            var elem1 = document.getElementById(hovid);
                elem1.setAttributeNS(null,"stroke","#FFFFFF");
                elem1.setAttributeNS(null,"stroke-width","2.35");
           }
     </script>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:28:01.550

这与分层顺序有关。你的中间状态被埋在另外两个之下。要将其置于顶部以使边框显示在最顶部，您必须最后插入元素。

一个快速修复方法是给你的元素一个 ID：`<svg id="id_svg" ...`

然后在你的 getstate() 函数中，在最后插入：

`document.getElementById('id_svg').appendChild( elem );`

处理这组复杂性的一种可能更好的方法是使用诸如 raphaeljs 之类的库。它修复了许多烦恼，并且是跨浏览器兼容的。

例如，看这个小提琴：http: [//jsfiddle.net/3345Q/](http://jsfiddle.net/3345Q/)

# asp.net - ASP.NET DropDownList 没有得到正确的 SelectedItem

> ID：10029018
> 
> 赞同：1
> 
> 时间：2012-04-05T12:54:15.490
> 
> 标签：asp.net, rest, gridview, drop-down-menu

我们将 ASP.NET 用于我们的一个项目。然而，当我们试图读取我们在链接点击的回调函数中使用的 DropDownList 的 SelectedItem 或 SelectedValue 属性时，我们没有得到正确的 SelectedItem。

```
<FooterTemplate>
<asp:DropDownList ID="cmbTesters" ClientIDMode="Static" runat="server" Width="300px" DataSource='<%# PopulateTesterNames() %>' DataTextField="FullName" DataValueField = "PK_ID"></asp:DropDownList>
</FooterTemplate> 
```

这是 aspx 文件中的 DropDownList。下拉菜单出现在 GridView 的页脚行中。我们在单击链接时调用以下代码集。

```
 if (int.TryParse(((DropDownList)dgCreateCPRVerificationResponse.FooterRow.FindControl("cmbTesters")).SelectedValue, out TesterID))
  {
   TesterID = int.Parse(((DropDownList)dgCreateCPRVerificationResponse.FooterRow.FindControl("cmbTesters")).SelectedValue);
  } 
```

我们面临的问题是，无论我们选择什么值，SelectedValue 始终是列表中的第一项。我们正在使用 global.asax 文件中定义的基于 REST 的 URL。另请注意，这不是建立在任何框架上的。

请尽快提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:46:06.653

确保将下拉列表和gridview的绑定方法放在里面`if (!IsPostBack)`

# teamcity - 我可以让 TeamCity 代理将注册表设置作为代理属性使用吗？

> ID：10029031
> 
> 赞同：2
> 
> 时间：2012-04-05T12:55:00.420
> 
> 标签：teamcity

我们最近添加了一个新的 TeamCity 构建代理。因为它没有安装 ASP.NET MVC 3，所以我们的几个构建在该代理上失败。

当然，我*可以*在代理上安装 MVC 3，但我想要更智能的东西。

显然，我还可以在代理配置文件中添加代理属性，并将其指定为依赖项，但这会涉及更新 14 个不同的代理。

有什么方法可以让 TeamCity 代理发现（可能通过注册表）是否安装了某些东西？有什么办法可以集中配置吗？

我们目前使用的是 TeamCity 6.5.6，但如果有帮助的话，我们很快就会升级到 7.x。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:32:03.453

我们的跟踪器中有相关问题：http: [//youtrack.jetbrains.com/issue/TW-13126](http://youtrack.jetbrains.com/issue/TW-13126) 可以编写代理端插件来执行此类操作。您可以在问题中找到一些如何实现此插件的要点。

# android - 从 html 文件解析 RSS 提要

> ID：10029037
> 
> 赞同：0
> 
> 时间：2012-04-05T12:55:23.837
> 
> 标签：android

我有 RSS 提要的 url 在 url 的上下文中[**单击此处**](http://www.oxfordtimes.co.uk/news/yourtown/bicester/9628857.Golf_centre_will_become_caravan_park/r/?ref=rss)，您可以在那里看到标题和描述。现在我需要将其解析为 android 我已尝试对其进行搜索，但所有帮助都与 xml 格式有关。但是在这里我想要“HTML解析”之类的东西，并且基于我可以解析的特定新闻描述..如果是的话，关于这些解析有什么想法那么请帮助我...

在我的搜索中，我发现[这个链接](https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android)可能对我有用，它引导或吸引我使用“Apache Feedparser”，所以这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:19:09.817

我的建议是使用[JSoup](http://jsoup.org/)来解析 HTML。

它使用起来非常简单，并且有据可查，解析页面应该不会有太多麻烦。

* * *

编辑，为您指出解析页面的正确方向：

你应该看看这个[文档页面](http://jsoup.org/cookbook/extracting-data/selector-syntax)。

您应该能够使用以下内容解析标题和文章内容：

```
Document doc = Jsoup.connect("http://.....").get();
String title = doc.select("h3").first().text(); //text in <h3> tag
String articleContent = doc.select("div.articleLeft p").toString(); //text in <p> elements nested in the <div class="articleLeft"> 
```

# android - 给定更新查询的 Android SQLite 等效项

> ID：10029038
> 
> 赞同：1
> 
> 时间：2012-04-05T12:55:33.300
> 
> 标签：android, sqlite

我必须在**Android SQLite中执行以下查询**

```
UPDATE player SET rank=rank+1 WHERE rank >= 3; 
```

这里的**rank**是**INTEGER**类型的列名。

我知道更新方法

```
update(tablename, values, whereClause, whereArgs); 
```

我将**player**作为**第一个参数**传递，**rank >= 3**作为**第三个参数**，**null**作为**最后一个参数**，但我无法找到作为**第二个参数**传递的内容。根据文档，它应该是**ContentValues**的对象。

所以我将它的对象创建为

```
ContentValues values = new ContentValues();
values.put("rank",?????); 
```

我很困惑将值放在我表中的列的**rank键的值上。**请建议我将什么作为值传递给值的**put() 方法**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:02:06.487

或者，您可以使用 exec 并执行您的 sql 命令

```
db.execSQL("UPDATE player SET rank=rank+1 WHERE rank >= 3"); 
```

要使用 update 方法，您需要使用 Cursor 获取变量中的当前排名，然后手动执行 + 操作“current+1”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:59:03.380

I believe **update** method is not *One-Size-Fit-All* method. So I think you need to use **rawQuery()** to achieve this kind of sql execution. for example:

```
db.rawQuery("UPDATE player SET rank=rank+1 WHERE rank >= 3;", null); 
```

*or perhaps use execSQL as said by el7r*

# google-maps-api-3 - 如何使用谷歌文档中的数据在谷歌地图上显示标记？

> ID：10029048
> 
> 赞同：2
> 
> 时间：2012-04-05T12:56:17.503
> 
> 标签：google-maps-api-3, google-apps-script, google-docs-api

我有一个名为联系人的电子表格，其中包含名称、位置、联系人电子邮件。如何在 javascript 中将此数据导入谷歌地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:05:17.857

如果这是供个人使用，我建议使用 Google Apps 脚本从您的电子表格中加载数据并填充您的地图： [https ://developers.google.com/apps-script/service_maps](https://developers.google.com/apps-script/service_maps)

此外，您甚至可以使用联系人 API 从联系人列表中检索数据。

# objective-c - 在 uitableviewcell 中捕捉 uiimageviewe 触摸

> ID：10029049
> 
> 赞同：0
> 
> 时间：2012-04-05T12:56:19.797
> 
> 标签：objective-c, uitableview, uiimageview, uiimage

我有以下代码不起作用：我从来没有到达`goToFoodDetail`.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"<#MyCell#>";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    NSInteger objectLocation = indexPath.row;

    UILabel* lblText = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 260, 20)];
    [lblText setFont:[UIFont fontWithName:@"Helvetica" size:10.0]];
    [lblText setText:[food foodName]];
    [cell addSubview:lblText];

    UILabel* lblType = [[UILabel alloc] initWithFrame:CGRectMake(0, 21, 260, 20)];
    [lblType setFont:[UIFont fontWithName:@"Helvetica" size:9.0]];
    lblType.textColor = [UIColor blueColor  ];
    [lblType setText:[food foodType]];
    [cell addSubview:lblType];

    UIImageView * detailImage = [[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"paris.jpg"]] autorelease];
    detailImage.frame = CGRectMake(270, 4, 40, 36);   
    cell.imageView.userInteractionEnabled = YES;
    cell.imageView.tag = indexPath.row;

    UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(goToFoodDetail:)];
    tapped.numberOfTapsRequired = 1;
    [cell.imageView addGestureRecognizer:tapped];   
    [tapped release];

    [cell addSubview:detailImage];
    [detailImage release];
    [lblText release];
    [lblType release];
    return cell;
}

-(void)goToFoodDetail :(id) sender
{
    UITapGestureRecognizer *gesture = (UITapGestureRecognizer *) sender;
    NSLog(@"Tag = %d", gesture.view.tag);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:30:23.293

看起来您正在创建一个新的 UIImageView 来显示图像 Paris.jp 并将其添加到您的单元格中，然后将点击手势识别器添加到单元格的默认图像视图中，但没有设置它的图像。您是打算在每个单元格中有两个图像视图，还是只有一个？

如果您打算让单元格的图像视图既显示图像又可点击，那么您不需要创建其他图像视图。您可以设置 cell.imageView.image = [UIImage imageWithName:"Paris.jog"] 并将手势识别器附加到相同的位置。

# youtube-api - IE8 错误：脚本 innerhtml 加载

> ID：10029050
> 
> 赞同：0
> 
> 时间：2012-04-05T12:56:20.867
> 
> 标签：youtube-api, innerhtml, swfobject

我使用 swfobject 为 Youtube 视频开发了一个加载器。使用的插件：jQuery 1.6.4 + SWFobject 2.2

在 IE8 上一切正常！它在 script.innerHTML 处崩溃...

```
<div id"youtube"><div id="player"></div></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

脚本

```
function loadYoutube(videoID)
{
var script = document.createElement("script");
script.type = "text/javascript";
document.getElementById("youtube").appendChild(script);
script.innerHTML = 'var params = { allowScriptAccess: "always", wmode: "transparent", allowfullscreen:"true" }; var atts = { id: "player" }; swfobject.embedSWF("http://www.youtube.com/v/'+videoID+'?enablejsapi=1&playerapiid=ytplayer&version=3", "player", "870", "550", "8", "flash/expressInstall.swf", null, params, atts);';
}
loadYoutube('BoEKWtgJQAU')​​​;​ 
```

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:39:27.113

IE8（和我相信的 IE7）的 innerHTML 存在问题，如果您尝试以这种方式使用它，它会崩溃。我有一个类似的问题，并通过使用 .text 而不是 .innerHTML 解决了它。

因为这只是一个 IE8/IE7 问题，您应该输入一些逻辑来测试 IE8/IE7 并使用 .text 而不是 .innerHTML。我使用的是 jQuery，所以能够像这样测试 IE8：

```
if ($.browser.msie && parseInt($.browser.version, 10) === 8) {
    script.text = 'var params = { allowScriptAccess: "always", wmode: "transparent", allowfullscreen:"true" }; var atts = { id: "player" }; swfobject.embedSWF("http://www.youtube.com/v/'+videoID+'?enablejsapi=1&playerapiid=ytplayer&version=3", "player", "870", "550", "8", "flash/expressInstall.swf", null, params, atts);';
} else {
    script.innerHTML = 'var params = { allowScriptAccess: "always", wmode: "transparent", allowfullscreen:"true" }; var atts = { id: "player" }; swfobject.embedSWF("http://www.youtube.com/v/'+videoID+'?enablejsapi=1&playerapiid=ytplayer&version=3", "player", "870", "550", "8", "flash/expressInstall.swf", null, params, atts);';
} 
```

如果您不使用 jQuery，那么有很多示例向您展示如何测试不同的浏览器版本。

# facebook - 所有 facebook 小部件突然停止工作

> ID：10029051
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:56:28.610
> 
> 标签：facebook

这是我的博客，所有 facebook 小部件突然停止工作我需要有人帮助我：

[http://www.petropedia.blogspot.com](http://www.petropedia.blogspot.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:04:55.343

你不见了

```
<div id="fb-root"></div> 
```

# java - 使用 java 映射/列表按类似结构分组

> ID：10029054
> 
> 赞同：2
> 
> 时间：2012-04-05T12:56:50.850
> 
> 标签：java, data-structures

我想在 Java 中实现一个快速的“分组依据”功能。我有一个`List<List<String>>`并且我想根据不同索引的分组进行迭代。

例如：

```
A1 B1 C1 value_1 A1 B1 C2 value_2 A1 B2 C1 value_3  A1 B2 C2 value_4 
```

我想要在第一列和第三列上使用分组进行一些聚合。而且我希望它快速 - 避免在每个查询中计算每个总和。“表”中的值不断变化。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:01:19.640

听起来最简单（最少编程）的方法是使用 SQL 数据库。您可以使用[内存中的 SQLite](http://www.sqlite.org/inmemorydb.html)数据库。SQLite 的最佳 Java 库来自[Xerial.org](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:01:30.750

一些注意事项：首先，您需要 `Comparator`为您想要将商品分类到的每个订单进行自定义。假设您的对象是`Foo`实例，那么您将拥有

```
class FirstComparator implements Comparator<Foo> {
  public int compareTo(Foo o1, Foo o2) {
    ...
  }
}

class SecondComparator implements Comparator<Foo> {
  public int compareTo(Foo o1, Foo o2) {
    ...
  }
} 
```

等等。

然后，您将能够使用 轻松对集合进行排序`Collections.sort(fooList, yourComparator)`。

这里的问题是您想要许多自定义排序顺序并且您希望动态更新。我在这里建议的最佳想法是拥有许多包含相同项目的不同集合，并且已经按顺序排列。

你可以这样做，例如：

```
TreeMap<Foo> firstOrder = new TreeMap<Foo>(new FirstComparator<Foo>());
TreeMap<Foo> secondOrder = new TreeMap<Foo>(new SecondComparator<Foo>()); 
```

现在，当您将一个项目添加到集合中时，您只需将其添加到两个集合中，它们就会自动排序，您不必对它们调用排序，并且在添加或删除元素时会动态更新。唯一的额外重量是您将对对象的引用增加一倍，因此您正在用空间换取速度。

请注意，如果列值在添加到树后发生更改，这将不起作用，因为这将需要对`TreeMap`必须显式调用的整体进行重新排序。如果您更改地图中现有元素的比较器值，您只会使其无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:00:51.837

Java 不太适合该任务。我宁愿使用内存中的 SQL 数据库。首先将值转储到表中，然后使用`select`SQL 语句按不同列分组、排序或求和检索行。

# teamcity - Are there any TeamCity plugins that'll allow me to use Hyper-V for cloud agents?

> ID：10029055
> 
> 赞同：5
> 
> 时间：2012-04-05T12:57:09.657
> 
> 标签：teamcity

We're currently moving most of our internal servers to Hyper-V VMs. At some point we'll do the same for our TeamCity build agents.

I'm wondering whether we can use the Cloud Agent feature of TeamCity to elastically spin up VMs when needed. Is this possible? Is there a plugin for this? We're using System Center Virtual Machine Manager, if that makes it easier.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:23:36.113

As far as I know there are no out of the box plugins for System Center. However, there are two plugins which can be used as a reference if you chose to write your own:

*   [http://confluence.jetbrains.net/display/TW/Cloud-VMWare+plugin](http://confluence.jetbrains.net/display/TW/Cloud-VMWare+plugin)
*   [http://confluence.jetbrains.net/display/TW/Local+Cloud](http://confluence.jetbrains.net/display/TW/Local+Cloud)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:41:44.437

您始终可以在构建过程中使用 PowerShell 进行虚拟机管理。如果我没记错的话，Virtual Machine Manager 只是一个用于执行 PowerShell 命令的 gui 外观，并让您能够在执行之前复制和粘贴命令。

# google-earth-plugin - 如何一次性删除部分添加到 GE 的线串？

> ID：10029057
> 
> 赞同：0
> 
> 时间：2012-04-05T12:57:15.600
> 
> 标签：google-earth-plugin

我正在尝试逐步绘制一条道路作为 GE 插件上的动画。我在一个数组中有一组坐标（纬度，经度），我在一个循环中以小的时间间隔使用以下函数来动画地绘制小部分的整个道路。

```
var intFeatureCounter4Trace=0  
  function createPath(lat1,lng1,lat2,lng2,strToolType){
        lineStringPlacemark = ge.createPlacemark('');
        var lineString = ge.createLineString('');
        lineStringPlacemark.setGeometry(lineString);
        lineString.setTessellate(true);
        lineString.getCoordinates().pushLatLngAlt(lat1,lng1,0);
        lineString.getCoordinates().pushLatLngAlt(lat2,lng2,0);
        lineStringPlacemark.setStyleSelector(ge.createStyle(''));
        var lineStyle=lineStringPlacemark.getStyleSelector().getLineStyle();
        lineStyle.setWidth(5);
        lineStyle.getColor().set("9900FFFF"); //'aabbggrr' format
        intFeatureCounter4Trace+=1;
        ge.getFeatures().appendChild(lineStringPlacemark);
    } 
```

在小部分绘制道路时，我正在跟踪添加到 GE 插件的小线段的数量，并使用此功能计数使用以下函数在循环中删除所有添加的线段：-

```
function clearPath(){
    for(var i=0;i<intFeatureCounter4Trace;i++){
       ge.getFeatures().removeChild(ge.getFeatures().getLastChild());
    }
} 
```

问题是对于大量（纬度，经度）来说，比如 20,000 左右，该`clearPath()`功能会挂起浏览器，有时一些不应该删除的功能也会被删除。有没有办法一次性删除所有较小的部分？即，有没有办法将所有较小的片段逐部分（作为动画）附加到单个功能，然后从 GE 插件 DOM 中一次性将其删除，而不是逐部分删除？

问候，湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:19:05.040

有几种方法可以解决这个问题。

首先，使用现有代码，您只需使用[google.earth.executeBatch](https://developers.google.com/earth/documentation/reference/google_earth_namespace#ab26414915202d39cad12bcd5bd99e739)函数包装对您的`clearPath`方法的任何调用。这应该会停止挂起并更快地执行 api 调用。

```
google.earth.executeBatch(ge, clearPath); 
```

其次，您可以简单地编写一个更简洁的`clearPath`函数来删除所有功能，而无需全局索引。

```
function clearPath() {
  var features = ge.getFeatures();
  while (features.getFirstChild()) {
    features.removeChild(features.getFirstChild());
  }
} 
```

第三，我将接近它的方式是改变你`createPath`的简单地创建一个单一的线串地标。然后我将创建一个`amendPath`方法来更新该地标的坐标数据。最后，我将更改`clearPath`方法以简单地在线串坐标数组上调用 clear 。如果需要，您也可以添加一个`removePath`方法...

虽然它是写在这里并且未经测试的，但以下几行应该可以工作。

```
var path = null; // global reference to the placemark we will create

// set up the path placemark
function createPath() {
  path = ge.createPlacemark('');
  path.setStyleSelector(ge.createStyle(''));

  var line = ge.createLineString('');
  line.setTessellate(true);

  var style = path.getStyleSelector().getLineStyle();
  style.setWidth(5);
  style.getColor().set("9900FFFF");

  path.setGeometry(line);
  ge.getFeatures().appendChild(path);
}

// update the path placemark's coordinate geometry
function ammendPath(lat1,lng1,lat2,lng2) {
  var line = path.getGeometry();
  line.getCoordinates().pushLatLngAlt(lat1,lng1,0);
  line.getCoordinates().pushLatLngAlt(lat2,lng2,0);
  path.setGeometry(line);
}

// clear the path placemark's coordinate geometry 
function clearPath() {
  path.getGeometry().getCoordinates().clear();
}

// remove the path placemark entirely (if required...)
function removePath() {
  ge.getFeatures().removeChild(path);
} 
```

# ios - IOS dealloc 永远不会被调用

> ID：10029068
> 
> 赞同：0
> 
> 时间：2012-04-05T12:58:19.003
> 
> 标签：ios, dealloc

我有一个基于导航的应用程序，可以在一些 ViewController 之间切换。如果我按下“goHome”按钮，`popViewControllerAnimated:`则调用该方法并返回主屏幕。但是有一个问题：没有调用 dealloc 方法，也没有释放先前视图中的所有元素。所有的动画/UI 元素仍然挂在内存中。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:13:11.410

在您的 UIViewController 中确保您的 dealloc 具有正确的签名并且最后调用超级视图：

```
 - (void) dealloc {
     //Release your stuff
     [super dealloc];
 } 
```

还要记住，在处理 UIViewControllers 时，您还需要处理 viewDidUnload 中的内存（并不能真正解决您的问题，但我想我会把它扔在那里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:23:28.717

首先，切换到自动引用计数是个好主意，这会让您的生活更轻松。其次，确保不再保留对控制器或其他对象的引用。

有趣的故事，有一次我忘记将`NSFetchedResultsController`'s 的委托设置为 nil 和其他内存错误，并且当获取的结果控制器试图调用委托时得到一个丑陋的异常，但它已经消失了。

# java - JXL and Android i/o permission denied

> ID：10029073
> 
> 赞同：0
> 
> 时间：2012-04-05T12:58:31.117
> 
> 标签：java, android, io, xls, jxl

I am trying to write an application that adds data to an exsiting spreadsheet on sdcard.

I am having a problem when i try to create a Writable workbook:

`outputWorkbook = Workbook.createWorkbook(outputWorkbookFile,inputWorkbook);`

I get the error in Logcat in Eclipse:

`04-05 13:29:54.809: W/System.err(32653): java.io.FileNotFoundException: /mnt/sdcard/Dev/Spreadsheets/in.xls (Permission denied)`

I can read the input file and get the contents of a cell, i can instanciate a Writable workbook or instanciate an input workbook, but not both.

```
private void doStuff() {
    File directory = Environment.getExternalStorageDirectory();
    inputWorkbookFile = new File(directory + "/Dev/Spreadsheets/in.xls");
    outputWorkbookFile = new File(directory + "/Dev/Spreadsheets/out.xls");

    try {

        // Put data into an array for easier iteration
        double data[];
        data = new double[7];
        data[0] = income;
        data[1] = diesel;
        data[2] = carHire;
        data[3] = radio;
        data[5] = 0;
        data[6] = itemCost;

        inputWorkbook = Workbook.getWorkbook(inputWorkbookFile);
        Log.e("Testing", "Opened workbook");

        if (isExternalStorageAvailable() && isExternalStorageReadable()) {
            Log.e("Testing", "storage readable and available");
            outputWorkbook = Workbook.createWorkbook(outputWorkbookFile,
                    inputWorkbook);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:07:40.113

您需要在您的 AndroidManifest [uses-permission](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)标签中声明权限`android.permission.WRITE_EXTERNAL_STORAGE`。

# javascript - 骨干关系没有正确设置反向关系？

> ID：10029075
> 
> 赞同：4
> 
> 时间：2012-04-05T12:58:38.143
> 
> 标签：javascript, backbone.js, backbone-relational

我正在尝试使用[Backbone.Relational](https://github.com/PaulUithol/Backbone-relational)在我的应用程序中设置一些关联。

基本上我有 Backbone`Search`和`Service`模型。搜索有一个`ServiceList`包含许多服务的集合。

但是，我似乎无法从服务初始化程序中访问父搜索。当我尝试记录父搜索时，我得到`null`. 谁能看到我做错了什么？

我的搜索模型是这样设置的（代码可能有语法错误，我正在从 coffeescript 即时翻译）：

```
var Search = new Backbone.RelationalModel({
  urlRoot: '/searches',

  relations: [{
    type: Backbone.HasMany,
    key: 'services',
    relatedModel: 'Service',
    collectionType: 'ServiceList',
    reverseRelation: {
      key: 'search'
    }
  }],

  initialize: function(options) {
    // => Search "has services:", ServiceList
    console.log this, "has services:", @get('services');
  }
});

var Service = new Backbone.RelationalModel
  initialize: function() {
    // => Service "in" null
    console.log this, "in", @get('search');
  }
}); 
```

或者，如果您更喜欢 CoffeeScript：

```
class Search extends Backbone.RelationalModel
  urlRoot: '/searches'

  relations: [
    type: Backbone.HasMany
    key: 'services'
    relatedModel: 'Service'
    collectionType: 'ServiceList'
    reverseRelation:
      key: 'search'
  ]

  initialize: (options) ->
    // => Search "has services:", ServiceList
    console.log this, "has services:", @get('services')

class Service extends Backbone.RelationalModel
  initialize: ->
    // => Service "in" null
    console.log this, "in", @get('search') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T14:05:01.687

**简答**

您根本无法在服务的初始化方法中访问反向关系的值。

反向关系的值在初始化完成后设置。

**更长的答案**

假设这个javascript：

```
Search = Backbone.RelationalModel.extend({
  urlRoot: '/searches',

  relations: [{
    type: Backbone.HasMany,
    key: 'services',
    relatedModel: 'Service',
    reverseRelation: {
      key: 'search'
    }
  }],

  initialize: function(options) {
    console.log(this, "has services:", this.get('services'));
  }
});

Service = Backbone.RelationalModel.extend({
  initialize: function() {
    console.log(this, "in", this.get('search'));
  }
}); 
```

当您使用相关服务创建新的搜索模型时：

```
s1 = new Search({name:"Some Search",services:[{name:"service1"},{name:"service2"}]}); 
```

将会发生的事情是：

```
new Service model created (for service1) - name set to "service1"
  (but, since what got passed to the model for properties is {name:"service1"}
   you can see how this model cannot know its reverse relation yet.)
new Service model created (for service2) - name set to "service2"
  (same as above)
new Search model created (for 'some search')
  name set to 'some search'
  service1 Service model added to Search.services
    (triggers 'update:search' event on Service1 model)
  service2 Service model added to Search services
    (triggers 'update:search' event on Service2 model) 
```

直到将 service1 和 service2 服务模型添加到 Search.services 集合中，才设置了 service1.search 和 service2.search 的反向关系。

这是一个显示控制台中操作顺序的 JS 小提琴：http: [//jsfiddle.net/MNh7N/6/](http://jsfiddle.net/MNh7N/6/)

# java - Dangling Threads in Java

> ID：10029076
> 
> 赞同：4
> 
> 时间：2012-04-05T12:58:43.517
> 
> 标签：java, multithreading

What happens to dangling threads in Java?

Like if I create an application and it spawns multiple threads. And one of the threads does not finish and the main program finishes before that. What will happen to this dangling thread? Will it stay in the thread pool infinitely or JVM will kill the thread after a threshold time period???

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T12:59:49.763

这取决于线程是否被标记为“守护进程”。当 JVM 退出时，守护线程将被杀死。如果有任何线程不是守护进程，那么 JVM 根本*不会*退出。它将等待这些线程首先完成。

默认情况下，线程采用其父线程的守护进程状态。主线程设置了守护程序`false`，因此由它分叉的任何线程也将是`false`. 您可以在线程开始`true` *之前*将守护程序标志设置为：

```
Thread thread = new Thread(...);
thread.setDaemon(true);
thread.start(); 
```

# java - how heavy is a java array?

> ID：10029084
> 
> 赞同：0
> 
> 时间：2012-04-05T12:59:06.880
> 
> 标签：java, arrays

I have the below declaration in my code:

```
String[] array1 = new String[]; 
```

if array1 has 1.000.000 elements (all strings with 80 characters) how heavy is it? I mean for the RAM memory.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T13:24:32.470

答案是它取决于*许多*因素：

*   您正在使用的 JVM；即提供者和版本
*   无论您使用的是 32 位还是 64 位 JVM。
*   无论您是否使用“压缩 oops”（在 64 位 HotSpot JVM 上：-XX:+UseCompressedOops）。
*   是否使用 UTF-8 字符串（一些 HotSpot JVM 支持：-XX:+UseCompressedStrings）
*   String 数组的元素是否存在`null`，
*   String 数组的元素是否是同一个引用，
*   字符串是否被实习，实习是否有效，
*   字符串是否共享相同的后备数组，
*   等等。

默认情况下，动态创建的字符串不会被实习。如果你实习他们，你可以节省空间，如果你的数据集中有很多“相等”的字符串。但是如果字符串池的另一面有存储开销（它是一个大的哈希表），那么如果相等与不相等的字符串的比率太小，那么您会*浪费*空间而不是节省空间。

关于支持数组的点也很复杂。背景是`split`方法（例如）创建共享原始字符串字符数组的字符串对象。如果您创建大量相同原始字符串的子字符串，则可以节省空间。但另一方面是，如果您创建大字符串的小子字符串，则小子字符串可能会导致原始字符串的整个后备数组保持可访问性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T13:01:02.443

它依赖于实现。假设一个典型的 JVM 在内部使用 UTF-16 编码，它可能是这样的。

100 万个元素 * 80 个字符 * 2 个字节 = 1.6 亿字节的文本数据。

为每个字符串的内部数据结构（比如 16 个字节左右）、对每个字符串的引用（比如 8 个字节）和数组本身（比如 12 个字节）添加一些开销，你有：

**184,000,012 字节**

# c++ - How to compare two patterns efficiently in C++

> ID：10029085
> 
> 赞同：0
> 
> 时间：2012-04-05T12:59:19.097
> 
> 标签：c++, algorithm, pattern-matching

```
pattern 1: [(0,1)(2,4)] => [(2,3)(3,4)(4,5)] 
pattern 2: [(0,1)] => [(2,3)(4,5)] 
```

In my definition `pattern 2` is a subpattern of `pattern 1`, since `(0,1)` of `pattern 2` is contained by `(0,1)(2,4)` of `pattern 1` and `(2,3)(4,5)` of `pattern 2` is contained by `(2,3)(3,4)(4,5)` of `pattern 1`.

What is appropriate and efficient algorithm to implement this comparison? Thanks:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:35:14.353

Trivial：pattern2 的每个字符出现在 pattern1 中，并且顺序相同。前面的一个简单检查是长度（模式2）<=长度（模式1），因此这是O（长度（模式1））。这是最优的，因为必须考虑所有字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:18:44.210

概念上：计算pattern1和pattern2的[最长公共](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)子序列，并检查是否等于pattern2。

实际上：您想测试 pattern2 是否是 pattern1 的子字符串。这可以通过对两个字符串进行一次扫描来更快地完成。

# android - 永久禁用 Android Lock

> ID：10029086
> 
> 赞同：0
> 
> 时间：2012-04-05T12:59:20.860
> 
> 标签：android

我想永久禁用 Android 屏幕中的锁定。即即使在电源重置后，也不应该出现锁定

我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:16:34.640

要在 Android 屏幕中永久禁用锁定。您需要扩展`DeviceAdminReceiver`以在设备管理员列表中添加您的应用程序，之后您需要使用`KeyguardManager`启用/禁用锁屏。

**注意**：`DeviceAdminReceiver`适用于 Android 2.2

有关更多信息，请参阅文档：

[设备管理](http://developer.android.com/guide/topics/admin/device-admin.html)

[使您的应用程序成为设备管理员](http://rootfs.wordpress.com/2010/09/09/android-make-your-application-a-device-administrator/)

# asp.net-mvc-3 - MVC3 Auto Generated code error

> ID：10029087
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:59:29.730
> 
> 标签：asp.net-mvc-3

HI i am doing a MVC 3 application. I am using Entity framwork database approach first method. So all the code is generated automatically. But the problem is when i click on "Edit", "Details" and "Delete" link i get this error.

```
The parameters dictionary contains a null entry for parameter 'id' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Edit(Int32)' in 'Fin_trial_06.Controllers.AuthorController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
Parameter name: parameters. 
```

My controller code is :

```
 public ActionResult Details(int? id)
    {
        Author authors = _entities.Authors.Single(n => n.Author_ID == id);
        return View(authors);
    }

public ActionResult Edit(int id)
    {
        return View(_entities.Authors.Find(id));
    }

    // POST: /Author/Edit/

    [AcceptVerbs(HttpVerbs.Post)]
      public ActionResult Edit(int id, Author aut)
    {
        if (id == null)
            return View("AuthorNotFound"); 
        try
        {
            _entities.Entry(aut).State = EntityState.Modified;
            _entities.SaveChanges();

            TempData["Message"] = "You have successfully Editied Author";
            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    }

 public ActionResult Delete(int id)
    {
        return View(_entities.Authors.Find(id));
    }

    // POST: /Author/Delete/5

    [HttpPost]
    public ActionResult Delete(int id, Author aut)
    {
        try
        {

            _entities.Entry(aut).State = EntityState.Deleted;
            _entities.SaveChanges();
            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

Help Please ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:04:10.977

嗯，信息似乎很清楚

```
 [AcceptVerbs(HttpVerbs.Post)]
      public ActionResult Edit(int id, Author aut)
    {
        if (id == null) 
```

如果 id == null，则无法输入操作。

小后果：

```
if (id == null) 
```

没用

解决方案：您是否说 id 是

```
int ? 
```

或者您不要忘记在您的编辑视图中为您的 ID 放置一个隐藏字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:07:38.267

在该方法中放置一个断点以查看是否将 id 传递给您的编辑函数。如果不是，那么您的视图是错误的，并且没有传递您要编辑的项目的 ID。如果您发布您的视图代码，我可以告诉您它的失败之处。

# selenium - 使用正在运行的 Firefox 实例运行 Selenium WebDriver 测试

> ID：10029088
> 
> 赞同：0
> 
> 时间：2012-04-05T12:59:33.073
> 
> 标签：selenium, webdriver

我使用 Selenium IDE 已经有一段时间了，现在我想试试 WebDriver。我喜欢它比脚本更多的编程，而且我可以使用类方法等等。有一件事，那就是使用 IDE 更方便。它在 Firefox 的打开窗口/实例中运行。

真的很烦人，每当我开始测试时，我都必须等到一个新的 Firefox 窗口打开。

有人知道是否有办法使用打开的窗口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:44:49.490

这目前不是受支持的功能。但是，跟踪器中存在一个[悬而未决的问题](http://code.google.com/p/selenium/issues/detail?id=18)。[您可能希望在此处](http://code.google.com/p/selenium/issues/detail?id=18#c39)尝试为 Firefox 和 InternetExplorer 驱动程序制作的非官方补丁。

# javascript - 百万 IF 语句的替代方案

> ID：10029089
> 
> 赞同：8
> 
> 时间：2012-04-05T12:59:34.010
> 
> 标签：javascript, if-statement

使用 JavaScript，我从网页中提取名称并以某种方式将它们串在一起（可能与数组一起使用）。一旦我把所有的名字收集在一起，我需要创建另一个字符串来给出这些名字的所有电子邮件地址。电子邮件地址不在网页上，因此我必须以某种方式在我的脚本中列出所有可能的 thisName=thisEmail。我正准备用大量的 if 语句来解决这个问题，但我认为必须有一种更有效的方法。有什么建议么？

```
var x = getElementById("names");
var name = x.InnerHTML;
var email;
if (name == 'Steve'){ email == 'steve462@gmail.com'; }
if (name == 'Bob'){ email == 'duckhunter89@gmail.com'; }
.... 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T13:01:27.333

一个 switch 语句，因为您的代码只是 if-elses :-)

不，老实说。最好的办法是，如果您能找到一个简单的算法来从任何给定名称创建电子邮件地址，例如

```
function mail(name) {
    return name.toLowerCase() + "@gmail.com";
}
var email = mail("Bob") // example usage 
```

如果它们差异很大，您可以使用对象作为键值映射：

```
var mails = {
    "Steve": "steve@gmail.com",
    "Bob": "bob1@freemail.org",
    ...
}
var email = mails[name]; 
```

如果您必须确定需要使用哪种算法，您也可以将它们结合起来：

```
var map = [{
    algorithm: function(name) { return name+"@something"; },
    names: ["Steve", "Bob", ...]
},{
    algorithm: function(name) { return "info@"+name+".org"; },
    names: ["Mark", ...]
}];
for (var i=0; i<map.length; i++)
    if (map[i].names.indexOf(name) > -1) {
        var email = map[i].algorithm(name);
        break;
    } 
```

或者当它更简单时：

```
var domains = {
    "gmail.com": ["Steve", "Bob", ...],
    "free.xxx": ["Mark", ...],
    ...
};
for (var domain in domains)
    if (domains[domain].indexOf(name) > -1)
        var email = name.toLowerCase()+"@"+domain;
        break;
    } 
```

尽量减少交付给客户端的数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:04:03.700

您可以将所有电子邮件地址存储在关联数组中，例如

伪代码

```
var emailsList = ["steve" => "steve@gmail.com", "bob" => "bob@gmail.com"];
then email = emailsList[name]; will solve your problem 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:04:07.307

您可以提前创建一个对象：

```
var name_email_map = {
 "Steve": "steve@gmail.com",
 "Bob": "bob@gmail.com",
 "John": "j7hogli123123@telus.net"
} 
```

对于您使用的任何语言，这很容易从带有 JSON 库的某些服务器端语言输出。本页底部有 JSON 库列表：http: [//www.json.org/](http://www.json.org/)

如果您在服务器端使用 PHP，您只需 json_encode 一个关联数组，您可能从数据库中选择了该数组。

```
var name = 'Bob'; //x.innerHTML;
var email = name_email_map[name];
alert(email); // Alerts bob@gmail.com
alert(name_email_map['John']); // Alerts j7hogli123123@telus.net 
```

# java - 我可以在 EJB 3.1 项目中使用 Gin 和 Guice 吗？

> ID：10029090
> 
> 赞同：0
> 
> 时间：2012-04-05T12:59:43.430
> 
> 标签：java, ejb, guice, cdi, gwt-gin

我将使用 EJB3.1 技术启动一个 Java EE 项目。我知道新的 EJB 概念允许上下文和依赖注入。

在一个旧项目中，我在 GWT 项目中使用了**GIN**和**GUICE 。**很不错。我可以将这些框架也用于 EJB 吗？还是您认为另一个框架会是更好的选择？

有什么经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:03:23.490

如本教程所述，这是可能的：[Guice 教程第 3 部分 – 将 Guice 与 EJB 集成](http://musingsofaprogrammingaddict.blogspot.com/2009/03/guice-tutorial-part-3-integrating-guice.html)

我会选择 Guice 而不是任何其他 DI 框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:59:00.230

> 还是您认为另一个框架会是更好的选择？

在不知道任何要求的情况下不可能回答这个问题。CDI 和 EJB 在同一个规范中定义，因此您可以绝对确定它们可以很好地协同工作。

了解您为什么计划使用 EJB 3.1（当然不是因为这个名字听起来很酷）以及您想要使用 EJB 的哪些特性也很重要。

根据经验，我会将核心 API 放在一起（在这种情况下是 EJB 和 CDI），除非我有充分的理由开始混合。

# c++ - 识别 ffmpeg 的 rtsp 断开连接

> ID：10029095
> 
> 赞同：2
> 
> 时间：2012-04-05T13:00:00.310
> 
> 标签：c++, ffmpeg, rtsp

我可以在使用 ffmpeg 读取 rtsp 流进行重新连接时识别出 ConnectionLost 等事件吗？

# c# - DateTime.Parse("2012-09-30T23:00:00.0000000Z") 总是转换为 DateTimeKind.Local

> ID：10029099
> 
> 赞同：65
> 
> 时间：2012-04-05T13:00:12.567
> 
> 标签：c#, asp.net, .net, datetime, utc

我想解析一个表示 UTC 格式的 DateTime 的字符串。

我的字符串表示包括 Zulu 时间规范，该规范应指示该字符串表示 UTC 时间。

```
var myDate = DateTime.Parse("2012-09-30T23:00:00.0000000Z"); 
```

从上面我希望 myDate.Kind 是 DateTimeKind.Utc，而不是 DatetimeKind.Local。

我在做什么错以及如何解析代表 UTC 时间的字符串？

非常感谢！

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-04-05T13:05:50.940

我会亲自使用我的[Noda Time](http://nodatime.org/)项目。（诚​​然，我作为作者有偏见，但它会更干净......）但如果你不能这样做......

使用`DateTime.ParseExact`指定您期望的确切格式，并在解析代码中包含`DateTimeStyles.AssumeUniversal`和：`DateTimeStyles.AdjustToUniversal`

```
using System;
using System.Globalization;

class Test
{
    static void Main()        
    {
        var date = DateTime.ParseExact("2012-09-30T23:00:00.0000000Z",
                                       "yyyy-MM-dd'T'HH:mm:ss.fffffff'Z'",
                                       CultureInfo.InvariantCulture,
                                       DateTimeStyles.AssumeUniversal |
                                       DateTimeStyles.AdjustToUniversal);
        Console.WriteLine(date);
        Console.WriteLine(date.Kind);
    }
} 
```

（为什么它会在默认情况下调整到本地，`AdjustToUniversal`这超出了我的范围，但没关系......）

编辑：只是为了扩展我对 mattytommo 建议的反对意见，我的目的是证明它会丢失信息。到目前为止，我失败了——但以一种非常奇特的方式。看看这个 - 在欧洲/伦敦时区运行，时钟回到 2012 年 10 月 28 日，当地时间凌晨 2 点（UTC 凌晨 1 点）：

```
DateTime local1 = DateTime.Parse("2012-10-28T00:30:00.0000000Z");
DateTime local2 = DateTime.Parse("2012-10-28T01:30:00.0000000Z");
Console.WriteLine(local1 == local2); // True

DateTime utc1 = TimeZoneInfo.ConvertTimeToUtc(local1);
DateTime utc2 = TimeZoneInfo.ConvertTimeToUtc(local2);
Console.WriteLine(utc1 == utc2); // False. Hmm. 
```

看起来有一个“有或没有 DST”标志存储在*某个地方*，但如果我能弄清楚在哪里，我会被吹走的。[`TimeZoneInfo.ConvertTimeToUtc`](http://msdn.microsoft.com/en-us/library/bb495915.aspx)状态文档

> 如果*dateTime*对应的时间不明确，则此方法假定它是源时区的标准时间。

*转换时似乎*不是这种情况`local2`......

编辑：好的，它变得更加陌生 - 这取决于您使用的框架版本。考虑这个程序：

```
using System;
using System.Globalization;

class Test
{
    static void Main()        
    {
        DateTime local1 = DateTime.Parse("2012-10-28T00:30:00.0000000Z");
        DateTime local2 = DateTime.Parse("2012-10-28T01:30:00.0000000Z");

        DateTime utc1 = TimeZoneInfo.ConvertTimeToUtc(local1);
        DateTime utc2 = TimeZoneInfo.ConvertTimeToUtc(local2);
        Console.WriteLine(utc1);
        Console.WriteLine(utc2);

        DateTime utc3 = local1.ToUniversalTime();
        DateTime utc4 = local2.ToUniversalTime();
        Console.WriteLine(utc3);
        Console.WriteLine(utc4);
    }
} 
```

所以这需要两个*不同的*UTC 值，用 解析它们`DateTime.Parse`，然后以两种不同的方式将它们转换回 UTC。

.NET 3.5 下的结果：

```
28/10/2012 01:30:00 // Look - we've lost information
28/10/2012 01:30:00
28/10/2012 00:30:00 // But ToUniversalTime() seems okay...
28/10/2012 01:30:00 
```

.NET 4.5 beta 下的结果：

```
28/10/2012 00:30:00 // It's okay!
28/10/2012 01:30:00
28/10/2012 00:30:00
28/10/2012 01:30:00 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-21T22:49:36.477

像往常一样，乔恩的回答非常全面。也就是说，还没有人提到`DateTimeStyles.RoundtripKind`。如果要将 DateTime 转换为字符串并转换回相同的 DateTime（包括保留`DateTime.Kind`设置），请使用该`DateTimeStyles.RoundtripKind`标志。

正如 Jon 所说，正确的做法是在将 DateTime 对象转换为字符串时使用“O”格式化程序。这保留了精度和时区信息。同样，正如乔恩所说，`DateTime.ParseExact`在转换回来时使用。但是如果你使用 DateTimeStyles.RoundtripKind，你总能取回你输入的内容：

```
var now = DateTime.UtcNow;
var strNow = now.ToString("O");
var newNow = DateTime.ParseExact(strNow, "O", CultureInfo.InvariantCulture, DateTimeStyles.RoundtripKind); 
```

在上面的代码中，`newNow`与 是完全相同的时间`now`，包括它是 UTC 的事实。`DateTime.Now`如果运行除了替换之外的相同代码`DateTime.UtcNow`，您将获得`now`back as的精确副本`newNow`，但这次是本地时间。

出于我的目的，这是正确的，因为我想确保传入和转换的任何内容都转换回完全相同的内容。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-05T13:02:54.070

使用`TimeZoneInfo`以下内容使用该类：

```
var myDate = TimeZoneInfo.ConvertTimeToUtc(DateTime.Parse("2012-09-30T23:00:00.0000000Z")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T18:05:05.380

您可以对解析器方法使用以下格式：`yyyy-MM-ddTHH:mm:ss.ffffffK`

这将在最后正确处理时区信息（[从 .NET 2.0 开始](http://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.80).aspx)）。

回复：[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-15T20:50:13.423

之前遇到过类似的问题，几个小时后（并拉扯头发）最终使用[DateTime.SpecifyKind](https://msdn.microsoft.com/en-us/library/system.datetime.specifykind(v=vs.110).aspx)：

```
DateTime.SpecifyKind(inputDate, DateTimeKind.Utc); 
```

我相信有人也在上面的评论中避开了这一点。

# sql - 这两个 SQL 查询有什么区别

> ID：10029101
> 
> 赞同：2
> 
> 时间：2012-04-05T13:00:16.630
> 
> 标签：sql, database, select, join

第二个查询是第一个查询的缩写形式吗？第二个是在做类似隐式 JOIN 的事情吗？他们都返回相同的结果......所以我想知道哪个更好用。使用 SQL Server 2008。感谢您的回答。

第一次查询

```
SELECT b.columnOne, a.columnTwo
FROM tableA As a JOIN tableB As b ON a.id = b.id 
```

第二次查询

```
SELECT b.columnOne, a.columnTwo 
FROM tableA As a, tableB as b
WHERE a.id = b.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:04:32.807

它们是相同的。第二个**不**使用 ANSI 标准连接，而第一个是。

许多（尽管不是全部）开发人员更喜欢第一个版本（ANSI 标准），因为它将`JOIN`逻辑保存在一个地方。它允许将**过滤器逻辑**保留在`WHERE`子句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:04:01.573

第一个查询是正确的。
第二个查询的执行计划被“翻译”为第一个，因为引擎知道您正在连接表，所以**在这种情况下它们是相同的**。
无论如何，当您使用涉及多个相关表的查询时，您应该始终使用`JOIN`语法（因为它是为此而生的）并避免`WHERE`：使用后者，如果引擎无法转换为`JOIN`语法，您可能会创建大量查询，因为您相乘每个表中的记录数（称为笛卡尔积）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:05:31.830

在我看来，单独指定连接（第一种形式）更清晰。然后您可以在 WHERE 子句中添加您的搜索条件。但是是的，这两种形式是等价的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:05:33.087

两个查询都将返回相同的结果，

看看关于 MS SQL 连接的文章 - [http://www.codeproject.com/Articles/102805/SQL-Joins](http://www.codeproject.com/Articles/102805/SQL-Joins)

第一个查询是正确的，我们可以使用连接对条件应用更多过滤器 - 左外连接、右外连接、完全外连接等

# python - 如何轻松地将 GQLQuery 的日期字段格式化为另一个时区？

> ID：10029102
> 
> 赞同：1
> 
> 时间：2012-04-05T13:00:17.843
> 
> 标签：python, django, google-app-engine, timezone, pytz

[编辑] 而且，我应该最优雅地补充一下？我想（但不确定如何）我可以先循环遍历python代码中的结果并在那里格式化每个日期，但我宁愿只循环一次...... [\编辑]

就我而言，英国夏令时（最近才开始）。

目前我最上面直接格式化的日期是正确的，但结果的各个行中的日期仍然是 UTC（晚 1 小时）。示例输出是一个看起来像这样的模板页面（`datetime.now`在这种情况下，返回的 UTC 是 12:42）：

> 现在时间：2012年04月05日13:42
> 
> 2012-04-05 13:10:00 事件 234
> 
> 2012-04-05 13:10:00 事件 235
> 
> 2012-04-05 13:10:00 事件 236
> 
> ...

这就是我正在做的...

```
from pytz.gae import pytz  # N.B. Using the recommended version of pytz
from datetime import datetime

# Use datetime now (in UTC) to select upcoming events (also stored in UTC)

nowat = datetime.now()
upcoming_events = db.GqlQuery(
  "SELECT * FROM Event WHERE eventdatetime >= :1",nowat)

# Convert time to BST and print to string…

utc = pytz.timezone('UTC')
nowat = utc.localize(nowat)
bst = pytz.timezone('Europe/London')
timenow = nowat.astimezone(bst).strftime("%H:%M on %d %B, %Y")

# Pass results to template for formating… (this is the Django engine)

template_values = {
        'time' : timenow,
        'events' : upcoming_events
 }
path = os.path.join(os.path.dirname(__file__),'html','today.html')
self.response.out.write(template.render(path,template_values)) 
```

我认为可能有一些魔法我可以类似地应用在模板代码中 - 但似乎`date` [内置的](https://docs.djangoproject.com/en/dev/ref/templates/builtins/)似乎只允许格式化日期时间而不是从 UTC 转换。

模板是：

```
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/css/main.css" />
  </head>
  <body>
    <p>Time is now: {{ time }}</p>
    <table>
      {% for event in events %} 
        <tr>
          <td> {{ event.eventdatetime }} </td>
          <td> {{ event.name }} </td>
        </tr>
      {% endfor %}  
    </table>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:40:01.340

使用 django 的模板引擎，您可以[在模板中使用时区感知输出](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#time-zone-aware-output-in-templates)

文档中的示例用法：

```
{% load tz %}

{% timezone "Europe/Paris" %}
    Paris time: {{ value }}
{% endtimezone %}

{% timezone None %}
    Server time: {{ value }}
{% endtimezone %} 
```

# c# - 帖子的主机服务配置？

> ID：10029104
> 
> 赞同：0
> 
> 时间：2012-04-05T13:00:28.753
> 
> 标签：c#, wcf, web-services, rest

您好，我的控制台应用程序是我的 wcf restful 服务的主机，我最终设法开始工作（到目前为止）。我的问题是这个主机服务会与“POST”一起使用吗？它适用于获取但不确定您是否需要主机在发布或删除时做更多事情？

```
class Program
{
    static void Main(string[] args)
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(RawDataService), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(IReceiveData), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");
        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:35:20.020

您的服务将与 POST 一起正常工作。界面中的属性将定义操作是 POST 还是 GET。请参阅此处的 WebInvokeAttribute 文档：

[http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.aspx)

# sql - 将存储过程保存在 XSD 文件中

> ID：10029106
> 
> 赞同：0
> 
> 时间：2012-04-05T13:00:32.383
> 
> 标签：sql, ms-access

我有一个可以使用的数据库，`mdb`我正在构建一个新的应用程序，我暂时需要它来使用`mdb`它，将来我会将它转移到`SQL`. 问题是我想构建类似存储过程的东西，但无法在 Visual Studio 中完成`mdb`（我正在使用 xsd 文件）。

有没有办法制作存储过程之类的东西并将其连接到`mdb`？

例如：我想要一个具有 4 个参数的存储过程，然后能够在“where”中进行检查。

我在 xsd 文件中没有看到任何这样做的方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:07:28.047

您可以做的最好的事情是使用建议的 sp 的内容构建一个查询。某种抽象，比如基于使用哪种后端的工厂模式可能与目前一样好。

# c# - 通过控制台应用程序获取 SharePoint 网站页面加载时间的最佳方法是什么

> ID：10029108
> 
> 赞同：0
> 
> 时间：2012-04-05T13:00:38.347
> 
> 标签：c#, sharepoint, page-load-time

我正在尝试创建一个控制台应用程序来计算 sharePoint 网站页面的页面加载时间。我需要缓存和未缓存的页面加载时间。

到目前为止，我已经尝试使用**System.Net.WebClient**和**System.Diagnostics.stopwatch**来计算页面加载时间。但我仍然不确定做同样事情的最佳方法是什么。

**使用 WebClient 的示例代码**

```
class Program
{
    static void Main(string[] args)
    {

        string urls = "https://www.google.com/";
        using (WebClient client = new WebClient())
        {
            int i = 0;
            for (i = 0; i < 2; i++)
            {
        //Get uncached data for the first time and next time get data from cache
                if (i == 0)
                    client.CachePolicy = new System.Net.Cache.RequestCachePolicy(System.Net.Cache.RequestCacheLevel.BypassCache);
                Stopwatch stopwatch = new Stopwatch();
                stopwatch.Start();// start System.Diagnostics.Stopwatch before downloading url
                client.Credentials = new System.Net.NetworkCredential("Username", "Password", "Domain");
                String result = client.DownloadString(urls);
                stopwatch.Stop();
                Console.WriteLine(String.Format("{0} = {1}", urls, stopwatch.Elapsed.TotalSeconds));

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T07:57:06.820

取决于你真正追求的是什么...

如果您只想对第一次和重复页面加载时间进行偶尔的综合分析，那么 pagestest.org 的私有实例可能会满足您的需求（设置起来非常简单）

如果您想知道真正的用户体验是什么，请尝试使用 boomerang.js 或在 Google Analytics 中使用 Site Speedd

# c# - 在另一个线程中运行 WPF 控件

> ID：10029109
> 
> 赞同：18
> 
> 时间：2012-04-05T13:00:48.363
> 
> 标签：c#, wpf, multithreading, task-parallel-library, blocking

我在我的项目中使用了一个视觉控件，它来自一个我没有源代码的库。
一次在屏幕上使用其中三个控件来更新（大约 200 毫秒）以获得良好的 UI 响应需要太长时间。（我可能需要一次更新所有三个，这让我的 UI 在他们都在思考的时候卡住了大约 600 毫秒）。

我已经阅读了一些关于 TaskScheduler 的帖子，并开始研究并行任务功能，作为在它们自己的线程中运行这些控件中的每一个的一种方式。该平台将是多核的，所以我想利用同步处理。

问题是我什至不知道我不知道该怎么做，虽然..

是否有合适的设计模式可以在与 WPF 中的主 UI 线程不同的线程中运行控件？

**具体来说**：它是一个第三方地图控件，当给定一个新的位置或缩放级别时，重绘需要很长时间（~200ms）。也许其中三个更新频率最高为 4Hz - 显然它们不会跟上..
我已经将 WPF 控件封装在一个用户控件中，并且需要在它自己的线程中运行每个实例，同时仍然捕获用户输入（鼠标点击， 例如）。

**更新**：虽然我正在寻找解决方案，但到目前为止我已经实现了以下内容。
我的主 (UI) 线程生成一个线程，该线程创建一个包含相关控件的新窗口，并将其定位在正确的位置（因此它看起来只是一个普通控件）。

```
_leftTopThread = new Thread(() =>
{
   _topLeftMap = new MapWindow()
   {
      WindowStartupLocation = WindowStartupLocation.Manual,
      Width = leftLocation.Width,
      Height = leftLocation.Height,
      Left = leftLocation.X,
      Top = leftLocation.Y,
      CommandQueue = _leftMapCommandQueue,
   };

   _topLeftMap.Show();
   System.Windows.Threading.Dispatcher.Run();

});

_leftTopThread.SetApartmentState(ApartmentState.STA);
_leftTopThread.IsBackground = true;
_leftTopThread.Name = "LeftTop";
_leftTopThread.Start(); 
```

用于向地图发送命令（移动位置等）`CommandQueue`的[线程安全 BlockingCollection](http://msdn.microsoft.com/en-us/library/dd997371.aspx)队列在哪里。
现在的问题是我*可以*

*   由于`System.Windows.Threading.Dispatcher.Run()`通话而有用户输入
*   或者阻塞CommandQueue，监听主线程发送的命令

我无法等待命令，因为它会占用我所有的线程 CPU！
是否可以阻止*并*让事件消息泵工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T10:49:47.277

好吧，我有一个可行的方法 - 但它可能不是最优雅的..

我有一个窗口，其中包含我在 XAML 中的第三方（慢速渲染）控件。

```
public partial class MapWindow : Window
{
    private ConcurrentQueue<MapCommand> _mapCommandQueue;
    private HwndSource _source;

    // ...

} 
```

我的主（UI）线程在线程上构造并启动此窗口：

```
_leftTopThread = new Thread(() =>
{
   _topLeftMap = new MapWindow()
   {
      WindowStartupLocation = WindowStartupLocation.Manual,
      CommandQueue = _leftMapCommendQueue,
   };

    _topLeftMap.Show();
    System.Windows.Threading.Dispatcher.Run();

});

_leftTopThread.SetApartmentState(ApartmentState.STA);
_leftTopThread.IsBackground = true;
_leftTopThread.Name = "LeftTop";
_leftTopThread.Start(); 
```

然后我得到线程中窗口的句柄（在它初始化之后）：

```
private IntPtr LeftHandMapWindowHandle
{
    get
    {
        if (_leftHandMapWindowHandle == IntPtr.Zero)
        {
            if (!_topLeftMap.Dispatcher.CheckAccess())
            {
                _leftHandMapWindowHandle = (IntPtr)_topLeftMap.Dispatcher.Invoke(
                  new Func<IntPtr>(() => new WindowInteropHelper(_topLeftMap).Handle)
                );
            }
            else
            {
                _leftHandMapWindowHandle = new WindowInteropHelper(_topLeftMap).Handle;
            }
        }
        return _leftHandMapWindowHandle;
    }
} 
```

.. 并将命令放入与线程窗口共享的线程安全队列后：

```
var command = new MapCommand(MapCommand.CommandType.AircraftLocation, new object[] {RandomLatLon});
_leftMapCommendQueue.Enqueue(command); 
```

..我让它知道它可以检查队列：

```
PostMessage(LeftHandMapWindowHandle, MapWindow.WmCustomCheckForCommandsInQueue, IntPtr.Zero, IntPtr.Zero); 
```

窗口可以接收我的消息，因为它已经挂钩到窗口消息：

```
protected override void OnSourceInitialized(EventArgs e)
{
    base.OnSourceInitialized(e);

    _source = PresentationSource.FromVisual(this) as HwndSource;
    if (_source != null) _source.AddHook(WndProc);
} 
```

..然后它可以检查：

```
private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled) // 
{
    // Handle messages...
    var result = IntPtr.Zero;

    switch (msg)
    {
        case WmCustomCheckForCommandsInQueue:
            CheckForNewTasks();
            break;

    }
    return result;
} 
```

..然后在线程上执行！

```
private void CheckForNewTasks()
{
    MapCommand newCommand;
    while (_mapCommandQueue.TryDequeue(out newCommand))
    {
        switch (newCommand.Type)
        {
            case MapCommand.CommandType.AircraftLocation:
                SetAircraftLocation((LatLon)newCommand.Arguments[0]);
                break;

            default:
                Console.WriteLine(String.Format("Unknown command '0x{0}'for window", newCommand.Type));
                break;
        }
    }
} 
```

就这么简单.. :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T13:24:54.403

我也一直在研究这个，我能找到的最相关的信息是在这篇博文中（但我还没有测试过）：

[http://blogs.msdn.com/b/dwayneneed/archive/2007/04/26/multithreaded-ui-hostvisual.aspx](http://blogs.msdn.com/b/dwayneneed/archive/2007/04/26/multithreaded-ui-hostvisual.aspx)

> 它在 UI 线程上创建一个 HostVisual，然后启动一个后台线程，创建一个 MediaElement，将其放入 VisualTarget（指向 HostVisual）中，并将其全部放入我们的 hacky VisualTargetPresentationSource。

这种方法的问题在于，用户显然无法与新线程中运行的控件进行交互。

# jquery - 使用带有简单工具提示 jquery 插件的函数

> ID：10029119
> 
> 赞同：1
> 
> 时间：2012-04-05T13:01:48.470
> 
> 标签：jquery, jquery-plugins, tooltip, jquery-tooltip

我为我创建了这个函数，用于调用工具提示：

```
<script>

function tooltip(texto) {

    $(document).ready(function(){   
        $("a#toolshow").easyTooltip({
            tooltipId: "easyTooltip",
            content: ''+texto
        });
     });
 }

</script>

<style>
#easyTooltip { padding:5px 10px; border:2px solid #93C0D2; background:#000000; color:#FFFFFF; width:auto; font-family:Arial;
font-size:12px; }

#easyTooltip2 { padding:5px 10px; border:2px solid #93C0D2; background:#000000; color:#FFFFFF; width:auto; font-family:Arial;
font-size:12px; }

</style>

<a href="#" id="toolshow" onmouseover="javascript:tooltip('Área de
Consulta Seleccionada');" class="op_links_select"><b>(?)</b></a> 
```

我为与插件简单工具提示一起使用而创建的功能可以正常工作，问题是 2：

1）当我浏览链接时，Tolltip 没有立即显示，我需要在其他时间放置链接以显示工具提示

2）工具提示显示很多次没有一次，当我浏览链接时，我看到了 3 次工具提示，我不明白为什么，我想以这种方式使用这个插件来简单的工具提示，因为它最适合我可以从链接中调用 javascript 函数并根据需要发送我自己的文本，但是我有这些问题，如果你能告诉我一些关于我的事情，我会告诉你从这一刻起感谢你的帮助 :)

向所有人致以最诚挚的问候，谢谢

# objective-c - Objective-C 属性/继承/设计建议

> ID：10029123
> 
> 赞同：0
> 
> 时间：2012-04-05T13:02:08.203
> 
> 标签：objective-c, oop, design-patterns, inheritance, properties

我有一个基类`MyDevice`。我也有一个基类`MyDeviceController`：

```
@interface MyDeviceController : NSObject {
    MyDevice* device;
}

@property (retain) MyDevice* device;

@end 
```

MyDeviceController 在设备的设置器中有一些通用逻辑，我想保留在子类中。

我有 2 个 MyDevice 子类：

```
@interface MyAudioDevice : MyDevice

- (void)audioMethod;

@end 
```

和

```
@interface MyVideoDevice : MyDevice

- (void)videoMethod;

@end 
```

`MyDeviceController`以及:的两个子类，`MyVideoDeviceController`它们`MyAudioDeviceController`必须有一个`MyVideoDevice`and`MyAudioDevice`作为`device`属性。

实现这两个 MyDeviceController 子类的最佳方法是什么？或者对于这种情况可能有一些模式？

更新

我找到的第一个解决方案是重新声明属性`My[Audio|Video]DeviceController`：

```
@interface MyAudioDeviceController : MyDeviceController

@property (retain) MyAudioDevice* device;

@end 
```

并在实施中

```
@implementation MyAudioDeviceController

- (void)setDevice:(MyAudioDevice*)device
{
    NSAssert([device isKindOfClass:[MyAudioDevice class]], @"What's the...?");
    [super setDevice:device];
}

- (MyAudioDevice*)device
{
    return (MyAudioDevice*)[super device];
}

@end 
```

在这个解决方案中我唯一不喜欢的是重新定义`device`方法。

可能有另一种解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:15:33.103

在你的控制器中重写`-(void)setDevice:(Device *)device`以确保它只接受`MyVideoDevice`或`MyAudioDevice`。如果您需要通用控制器的逻辑，只需将其复制过来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:19:41.370

我的 Objective-c 有点偏离，但希望这能让您了解我在评论中的意思。

“为我的设备使用一个接口（我忘记了在objective-c中调用了什么），然后对其进行编程，以便控制器可以接受任何类型的设备。”

理论上，特定于设备的所有内容都应该是私有的，并且您使用通用接口，因此您可以拥有许多不同的具体设备而不必担心。

一个接口，例如

```
@protocol MediaDevice
- void play
- void stop
- void pause
@end 
```

实现

```
@interface AudioDevice : NSObject <MediaDevice> 
@end

@implementation AudioDevice
- void play
{
    [super play]
}
// ...
@end 
```

控制器

```
@interface DeviceController : NSObject
@property (readwrite, assign) MediaDevice device
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:37:23.187

我想我找到了最好的解决方案。解决方案是在 property 的实现中使用该`@dynamic`指令`device`。

```
@interface MyAudioDeviceController : MyDeviceController

@property (retain) MyAudioDevice* device;

@end 
```

和实施：

```
@implementation MyAudioDeviceController

@dynamic device;

- (void)setDevice:(MyAudioDevice*)device
{
    NSAssert([device isKindOfClass:[MyAudioDevice class]], @"What's the...?");
    [super setDevice:device];
}

- (void)someAduioDeviceControllerMethod
{
    [self.device audioMethod];
}

@end 
```

# c++ - 在 C++/Qt 中定义纯虚拟信号是否有效？

> ID：10029130
> 
> 赞同：15
> 
> 时间：2012-04-05T13:02:27.247
> 
> 标签：c++, qt, abstract-class, signals-slots

我正在制作一个抽象基类，并在想我*可能* 想要一个纯虚拟信号。但是当我编译时，我收到了我定义的纯虚拟信号的警告：

```
../FILE1.h:27: Warning: Signals cannot be declared virtual
../FILE1.h:28: Warning: Signals cannot be declared virtual 
```

**在 C++/Qt 中定义纯虚拟信号是否有效？定义虚拟信号是否有效？**

[Qt 的信号和槽文档页面](http://qt-project.org/doc/qt-4.8/signalsandslots.html)说您可以定义虚拟槽，但不谈论信号。我似乎找不到关于纯虚拟信号的好信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T13:35:20.933

*   信号从来没有实现[1]（即，您在 .h 文件中定义信号，然后在 .cpp 中没有实现）。
*   声明一个纯虚函数的主要目的是强制继承类提供一个实现。

鉴于以上两个陈述，这是我的想法：

信号没有实现，但将其声明为纯虚拟将需要继承类提供实现......这与“信号没有实现”直接冲突。这就像要求某人同时出现在两个地方一样，这是不可能的。

**所以总而言之，似乎声明一个“纯虚拟”“信号”应该是一个错误，因此是无效的。**

* * *

对于抽象基类，我认为是正确的：

当一个人只声明“虚拟”功能时，它仍然会发出警告。为了避免任何警告，我认为解决方案是不使用任何“虚拟”或“纯虚拟”来限定信号，然后继承类不会声明任何信号，但仍然可以发出基类中定义的信号。

[1] 当我说“信号永远没有实现”时，我的意思是实现类的人没有提供实现。我知道在幕后 Qt 的 moc 在 moc_FILE1.cpp 中提供了一个实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-26T17:13:38.847

该警告是由 moc 报告的，而不是由 C++ 编译器报告的，并且它是有效的，除非在抽象接口的特定情况下。

虚拟信号的唯一有效用途是在声明不派生自的抽象接口时，`QObject`如此[出色答案](https://stackoverflow.com/a/18113601/1329652)中所述。这种方法没有错。Moc 试图提供帮助，因为在大多数情况下，虚拟信号是错误的。

即使那样，*没有*收到警告的简单解决方法是跳过`signals:`界面中的关键字。这是完全没有必要的，因为接口不是从 moc 派生的`QObject`，因此根本不应该由 moc 处理：

```
// https://github.com/KubaO/stackoverflown/tree/master/questions/virtual-slot-10029130
#include <QtCore>

class IDogInterface {
public:
   // no signals: section since it's not a QObject!
   virtual void barks() = 0; // a signal
};

class ADog : public QObject, public IDogInterface {
   Q_OBJECT
public:
   Q_SIGNAL void barks() override; // implementation is generated by moc
};

class Monitor : public QObject {
   Q_OBJECT
   int m_count{};
   Q_SLOT void onBark() { m_count++; }
public:
   int count() const { return m_count; }
   void monitorBarks(IDogInterface * dog) {
      QObject * dogObject = dynamic_cast<QObject*>(dog);
      if (dogObject) {
         connect(dogObject, SIGNAL(barks()), SLOT(onBark()));
      } else {
         qWarning() << "cannot monitor barking on dog instance" << (void*)dog;
      }
   }
};

int main() {
   ADog dog;
   Monitor monitor;
   monitor.monitorBarks(&dog);
   emit dog.barks();
   Q_ASSERT(monitor.count() == 1);
}
#include "main.moc" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T13:05:38.327

我认为拥有（纯）虚拟信号根本没有意义。提供给 Qt的`signals`宏只是扩展为`protected`，因此您声明的所有信号实际上都是受保护方法的声明。生成的代码`moc`将提供这些功能的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T09:26:30.300

有一种解决方案可以创建纯虚函数，它将给定的插槽连接到信号，反之亦然。例如：

```
class IBaseInterface
{
  public:
    virtual bool connectToSignal1(QObject* pReceiver, const char* pszSlot, bool bConnect) const = 0;
};

class CDerived : public QObject, public IBaseInterface
{
  Q_OBJECT
  public:
    virtual bool connectToSignal1(QObject* pReceiver, const char* pszSlot, bool bConnect) const;
  signals:
    void signal1(const QString& msg);
};

bool CDerived::connectToSignal1(QObject* pReceiver, const char* pszSlot, bool bConnect) const
{
 if(bConnect)
   return connect(this, SIGNAL(signal1(QString)), pReciever, pszSlot);
 return disconnect(this, SIGNAL(signal1(QString)), pReciever, pszSlot);
} 
```

进一步在客户代码中可以键入：

```
class CSomeClass : public QObject
{
    Q_OBJECT
protected /*or public, or private*/ slots:
    void someSlot(const QString& msg);
};
void CSomeClass::somefunction()
{
    IBaseInterface* p = new CDerived;
    if (!p->connectToSignal1(this, SLOT(someSlot(QString)), true))
    QMessageBox::warning(this, tr("Warning"), tr("Cannot connect ...."), QMessageBox::Ok);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-30T22:26:16.697

虚拟信号有意义的两种情况：

1.  派生类可能希望通过跳过基类实现来选择性地阻止信号的发送。
2.  派生类可能希望将其用作事件机制，并在将信号发送给侦听器之前或之后对信号做出反应。

这两种情况也可以用其他较少 OOP 的方式来处理。

# visual-studio-2010 - 尝试在 Visual Studio 2010 中打开 Visual Studio 2010 解决方案时，为什么 Visual Studio 转换向导会运行？

> ID：10029131
> 
> 赞同：0
> 
> 时间：2012-04-05T13:02:30.887
> 
> 标签：visual-studio-2010

以下是详细信息，以防有帮助：

我正在使用 Visual Studio 2010 Premium（版本 10.0.30319.1 RTMRel）

这是 Visual Studio 解决方案文件的标头：

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010
... 
```

有任何想法吗？

**更新：**

在听取了 DevinB 的建议（见第一条评论）后，我发现升级进行了以下更改：

*   将 .net 框架从 3.5 更新到 4.0
*   将“旧工具版本”从 3.5 更新到 4.0
*   将单元测试框架从 10.1 降级到 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:24:37.663

安装 Visual Studio 2010 的 service pack 1 解决了我的问题。我就是这样想出来的：

我通过运行升级并将文件与原始文件进行比较以查看发生了什么变化，从而听取了 DevinB 的建议（请参阅有关问题的第一条评论）。我发现升级进行了以下更改：

*   将 .net 框架从 3.5 更新到 4.0
*   将“旧工具版本”从 3.5 更新到 4.0
*   将单元测试框架从 10.1 降级到 10

由此我猜测问题是我需要使用 Service Pack 1 升级 Visual Studio。

# ctypes - *** 检测到 glibc *** python: free(): 下一个大小无效（快速）：

> ID：10029132
> 
> 赞同：1
> 
> 时间：2012-04-05T13:02:33.733
> 
> 标签：ctypes, glibc

我有一个调用 C 函数的 python 程序。我将一些包含可变字符的结构发送给 c 函数，我的 c 函数填充了该结构。

类myS（结构）： *字段*= [（“x”，c_int），（“缓冲区”，100 * c_char）]

我将它发送给 C 函数，C 函数填充这个结构中的值。我的程序工作得很好，但是返回后它会抛出一个错误

*** 检测到 glibc *** python: free(): 下一个大小无效（快速）：

程序的后续执行显示以下 3 个错误之一，代码几乎没有变化（例如 print "hi"）。

*** 检测到 glibc *** python: malloc(): 无效的下一个大小（快速）：

*** 检测到 glibc *** python: free(): 下一个大小无效（快速）：

分段故障

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:05:23.413

您已经破坏了内存领域，简单明了，可能是通过超出传递给 C 函数的内存的末尾进行写入，但是，如果没有看到源代码，我们将永远无法确定。

该消息仅在`glib`检测到内存分配记帐信息已损坏时出现。

# antlr - ANTLR 如何使用具有相同开头的词法分析器规则？

> ID：10029137
> 
> 赞同：5
> 
> 时间：2012-04-05T13:02:55.533
> 
> 标签：antlr, grammar, lexer

如何使用具有相同开头的词法分析器规则？

我正在尝试使用两个类似的词法分析器规则（具有相同的开头）：

```
TIMECONSTANT: ('0'..'9')+ ':' ('0'..'9')+;
INTEGER     : ('0'..'9')+;
COLON       : ':'; 
```

这是我的示例语法：

```
grammar TestTime;

text      : (timeexpr | caseblock)*;

timeexpr  : TIME;
caseblock : INT COLON ID;

TIME      : ('0'..'9')+ ':' ('0'..'9')+;
INT       : ('0'..'9')+;
COLON     : ':';
ID        : ('a'..'z')+;

WS        : (' ' | '\t' | '\r' | '\n') {$channel=HIDDEN;}; 
```

当我尝试解析文本时：

```
12:44
123 : abc
123: abc 
```

前两行正确解析，第三行 - 生成错误。出于某种原因，'123:' ANTLR 解析为 TIME（虽然不是）...

那么，有没有可能用这样的词法来制作语法呢？

在我的语言中，有这样的规则对于使用 case-blocks 和 datetime 常量是必要的。例如，用我的语言可以写成：

```
case MyInt of
  1: a := 01.01.2012;
  2: b := 12:44;
  3: ....
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T17:18:27.767

一旦`DIGIT+ ':'`匹配，词法分析器期望 this 后面跟着另一个`DIGIT`匹配 a `TIMECONSTANT`。如果这没有发生，它就不能依靠另一个匹配`DIGIT+ ':'`的词法分析器规则，并且词法分析器不会放弃已经匹配`':'`的匹配一个`INTEGER`.

一个可能的解决方案是`':' DIGIT+`在规则的末尾有选择地匹配并在匹配时`INTEGER`更改令牌的类型：

```
grammar T;  

parse
 : (t=. {System.out.printf("\%-15s '\%s'\n", tokenNames[$t.type], $t.text);})* EOF
 ;

INTEGER      : DIGIT+ ((':' DIGIT)=> ':' DIGIT+ {$type=TIMECONSTANT;})?;
COLON        : ':';
SPACE        : ' ' {skip();};

fragment DIGIT : '0'..'9';
fragment TIMECONSTANT : ; 
```

解析输入时：

```
11: 12:13 : 14 
```

将打印以下内容：

```
INTEGER         '11'
COLON           ':'
TIMECONSTANT    '12:13'
COLON           ':'
INTEGER         '14' 
```

## 编辑

> 不太好，但工作...

真的。但是，这不是 ANTLR 的缺点：我知道的大多数词法分析器生成器在正确标记这样的 a 时都会遇到问题`TIMECONSTANT`（当`INTEGER`和`COLON`也存在时）。ANTLR 至少有利于在词法分析器中处理它:)

您*也*可以让解析器而不是词法分析器来处理它：

```
time_const : INTEGER COLON INTEGER;
INTEGER    : '0'..'9'+;
COLON      : ':';
SPACE      : ' ' {skip();}; 
```

但是，如果您的语言的词法分析器忽略空格，则输入如下：

```
12 :    34 
```

当然，也将按`time_const`规则匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:16:21.573

ANTLR 词法分析器不能回溯，这意味着一旦它到达 TIMECONSTANT 规则中的“：”，它必须完成该规则，否则将引发异常。您可以通过使用谓词来测试冒号后面是否存在数字，从而使您的语法正常工作。

```
TIMECONSTANT: ('0'..'9')+ (':' '0'..'9')=> ':' ('0'..'9')+;
INTEGER     : ('0'..'9')+;
COLON       : ':'; 
```

这将迫使 ANTLR 在确定它在 TIMECONSTANT 规则中之前查看冒号之外的内容。

# python - 如何确定一个多边形是否在另一个多边形内？

> ID：10029139
> 
> 赞同：4
> 
> 时间：2012-04-05T13:03:13.883
> 
> 标签：python, svg, polygon

我有一个简单的示例（[SVG 源代码](http://pastie.org/3732822)），如下所示。**d**属性中描述的id 为“ **rect2816** ”的**路径：**

 ****```
m 140.53571,188.625 0,148.1875 273.9375,0 0,-148.1875 -273.9375,0 z 
m 132.25,42.03125 c 3.64586,0.0236 7.47296,0.12361 11.5,0.28125 36.65941,1.43507 57.84375,15.88072 57.84375,32.84375 0,7.41614 -1.94981,21.58652 -13.28125,24.09375 -14.58711,3.2276 -40.46224,-5.35276 -53.125,6.625 -26.65285,25.21104 -48.00843,-19.04537 -57.875,-32.84375 -12.16196,-17.00847 0.24962,-31.35357 54.9375,-31 z 
```

在这里，第一行描述了父多边形，第二行 - 孔（如您所见）。但是我怎样才能找到这个洞程序方式呢？我正在使用 Python。也许有一些图书馆可以轻松解决？

![另一个多边形内的一个多边形](../Images/0be27478562a74d9aef6e0cc9daab852.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:33:07.737

将路径转换为 ​​(x,y) 对，并将此函数应用于第二个多边形的每个点。

[http://www.ariel.com.au/a/python-point-int-poly.html](http://www.ariel.com.au/a/python-point-int-poly.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:27:29.847

与其说是 Pythonic 的答案，不如说是几何算法：

当 B 的每个角和 B 的每条边完全在多边形 A 内时，多边形 B 在多边形 A 的内部。

要确定角（点）是否在多边形内，一种简单的方法是从多边形上咬掉所谓的“耳朵”。“耳朵”是一个凸角，咬掉它意味着简单地去除这个角。每次咬人时，检查点是否在耳朵内（你咬掉的三角形）。（有数学证明，对于每个无环多边形，您至少可以找到两个这样的耳朵（凸角）。）

要确定 B 的边是否完全在 A 内，意味着您必须确定该边是否正在切割多边形 A 的任何边。

当然，如果两个多边形都是完全凸的，则根本不必检查边缘。

这是一种直截了当的方法，没有您必须执行的基本几何检查的详细信息。但也许它对你有帮助。****

# iphone - 如何从 NSMutablestring 替换字符串的一部分

> ID：10029143
> 
> 赞同：0
> 
> 时间：2012-04-05T13:03:24.513
> 
> 标签：iphone

我正在开发一个应用程序。我从数组中获取字符串并从该字符串中替换 .xml 并转到下一页。如果我回来执行该代码，应用程序将在该替换字符串行崩溃。下面是我的代码.

```
 -(void)open:(UITapGestureRecognizer*)recognizer
  {
       NSInteger i=(recognizer).view.tag;
       NSMutableString *s1=[listoflessons objectAtIndex:i];
       [default1 setObject:s1 forKey:@"KeyToXmlFile"];
       NSLog(@"%@",[default1 objectForKey:@"KeyToXmlFile"]);
        [s1 replaceCharactersInRange:[s1 rangeOfString: @".xml"] withString: @""];
        [default1 setObject:s1 forKey:@"KeyToSelectedFile"];
        [listoflessons removeObjectAtIndex:i];
      [listoflessons insertObject:[default1 objectForKey:@"KeyToXmlFile"] atIndex:i];
        NSLog(@"%@",listoflessons);
       SecondViewCOntroller *snd=[[SecondViewCOntroller    alloc]initWithNibName:@"SecondViewCOntroller" bundle:nil];
       [self.navigationController pushViewController:snd animated:YES];
      } 
```

所以请告诉我如何避免那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:10:40.400

我的猜测是“listoflessons”中的对象是 NSString 类型而不是 NSMutableString。

尝试替换这一行：

```
 NSMutableString *s1=[listoflessons objectAtIndex:i]; 
```

有了这个：

```
 NSMutableString *s1=[[NSMutableString alloc] initWithString:[listoflessons objectAtIndex:i]]; 
```

# erlang - erlang refs 在节点/VM 重启之间是唯一的吗？

> ID：10029154
> 
> 赞同：7
> 
> 时间：2012-04-05T13:04:05.950
> 
> 标签：erlang, uuid, ref

文档说

> ```
> make_ref() -> ref() 
> ```
> 
> 返回一个几乎唯一的引用。
> 
> ^(返回的引用将在大约 2 82)次调用后重新出现；因此它对于实际用途来说是独一无二的。

但我的眼睛告诉我，在 VM 重新启动之间，我可以轻松获得相同的 ref：

```
[~] erl
Erlang R14B04 (erts-5.8.5)
1> make_ref().
#Ref<0.0.0.33>
2> make_ref().
#Ref<0.0.0.37>
^C

[~] erl
Erlang R14B04 (erts-5.8.5)
1> make_ref().
#Ref<0.0.0.33> 
```

那么，Erlang 的 Refs 有多独特呢？当标签在 mq 或 db 中持久存在并且可能由不同的 VM 会话生成时，它们是否适合用作唯一的“标签”生成器。

我知道 UUID 可以用于此。众所周知，pids() 是可重复的、可重用的，如果序列化然后从持久存储中加载，则绝不是唯一的。

问题是，什么是 refs()——更像是 UUID 还是更像 pids()？refs() 在节点之间是唯一的吗？重启之间？有没有关于这个话题的官方信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:20:07.373

与节点名称相关的引用并不意味着随机性，只是唯一性。正如您已经注意到的，它们是以循环方式创建的。此外，您是正确的事实引用仅在节点的生命周期内是唯一的。一旦重新启动 VM，就可以重复引用。

与 PID 一样，打印的引用`#Ref<W.X.Y.Z>`包含 - 作为它们的第一个元素 ( `W`) - 关于节点编号的信息：

```
erl -sname right
Erlang R15B (erts-5.9) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9  (abort with ^G)
(right@mars)1> register(right, self()).
true
(right@mars)2> receive M -> M end.
#Ref<6793.0.0.41>
(right@mars)3> 

erl -sname left
Erlang R15B (erts-5.9) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9  (abort with ^G)
(left@mars)1> {right, 'right@mars'} ! make_ref().
#Ref<0.0.0.41>
(left@mars)2> 
```

请注意，在这种情况下`W`，参考是如何`0`在本地节点中的，`6793`在远程节点中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T14:20:30.307

在任何分布式系统中，为了能够生成唯一标识符，您必须依赖具有持久存储的中央原子 ID 生成器，或者确保在任何时间点正确配置集群。第二种情况的一个例子如下。

在分布式 Erlang 集群`{node(), now()}`中可以认为是唯一的。如果您可以确保您的时钟配置合理并且您不会启动两个具有相同名称的节点，您可以尝试使用`{node(), now(), make_ref()}`，这将使冲突的可能性可以忽略不计。

# wcf - WCF 服务支持数据协定序列化程序和 xml 序列化程序

> ID：10029159
> 
> 赞同：0
> 
> 时间：2012-04-05T13:04:12.870
> 
> 标签：wcf, datacontractserializer, xmlserializer

我想创建一个 WCF 服务，该服务将根据请求中的“接受”标头返回 Json 和 XML。我想使用 XML 序列化程序，因为我可以更好地控制 xml 输出。要返回 json，我需要使用数据合同序列化程序。我看到不可能同时配置两者。有人对我如何实现这一点有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:08:43.357

我从您的问题中假设您想要创建一个 REST 类型的 API，它根据请求的标头返回 XML 或 JSON，而不是使用 SOAP 的 API。我确信这在 WCF 中是可能的，但是您必须正确配置配置，而且我很难找到正确配置的良好来源。网络上到处都有线索（[比如这里](http://forums.asp.net/t/1054378.aspx)），但没有一个来源。我以为我有一个正在运行的示例，但似乎我最近所做的一些更改破坏了它。

WCF 中的 REST 太难了。我的建议是使用[ASP.NET Web API](http://www.asp.net/web-api)来构建 REST 服务。它是 MVC 4.0 的一部分，易于使用和配置。开箱即用，它的工作方式就像您期望 REST API 工作一样，并将返回 JSON 或 XML，具体取决于标头中“接受”的设置。请注意，这个 Microsoft 产品的历史是它最初是 WCF REST Start Kit，后来成为 WCF Web API，现在最终成为 ASP.NET Web API。如果您使用 MVC，那么选择它很容易。

# forms - Twitter Bootstrap 表单：使标签栏更宽

> ID：10029160
> 
> 赞同：15
> 
> 时间：2012-04-05T13:04:13.357
> 
> 标签：forms, twitter-bootstrap

问题是关于 Twitter Bootstrap 表单的。现在有人推荐让左列（带有标签）宽于 140px 的方法是什么？重要的是它在移动设备上也看起来不错。

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:47:18.620

在 Bootstrap v2.1.1 中，`.control-label`宽度定义`forms.less`如下：

```
.form-horizontal
{
    .control-label
    {
        width: @horizontalComponentOffset - 20;
    }
} 
```

您可以在导入引导程序后覆盖`@horizontalComponentOffset`项目 LESS 代码中的变量定义`variables.less`。如果您需要对特定页面进行此操作，请在该页面的 LESS 中执行此操作。否则，将其添加为通用导入，或者更好的是，添加您自己的`variables.less`文件，该文件旨在覆盖 Bootstrap 的预定义变量。

就移动设备而言，如果需要，您可以使用[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)为移动设备赋予不同的`@horizontalComponentOffset`价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T07:27:04.753

我尝试了几种方法。还要在 html 文件中添加样式，这在桌面上看起来不错，但在移动设备上却不行。

解决方案是更改 bootstrap.css （尽管我不确定是否打算更改此文件）：

```
.form-horizontal .control-label {
  float: left;
  /*original: width: 140px;*/
  width: 200px;
  padding-top: 5px;
  text-align: right;
}
.form-horizontal .controls {
  /*original: margin-left: 160px;*/
  margin-left: 220px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:10:18.240

不要忘记编辑

```
.form-actions {
    padding-left: 160px;
} 
```

以及 forms.less

我认为这应该设置为变量。

我已经在 forms.less 中为我修改了它（两个新变量在 variables.less 中设置）：

```
// Horizontal-specific styles
// --------------------------

.form-horizontal {
  // Increase spacing between groups
  .control-group {
    margin-bottom: @baseLineHeight;
    .clearfix();
  }
  // Float the labels left
  .control-label {
    float: left;
    // ub was 140px
    width: @labelWidth;
    padding-top: 5px;
    text-align: right;
  }
  // Move over all input controls and content
  .controls {
    // Super jank IE7 fix to ensure the inputs in .input-append and input-prepend
    // don't inherit the margin of the parent, in this case .controls
    *display: inline-block;
    // ub was 20px
    *padding-left: @labelPadding;
    // ub was 160px
    margin-left: @labelWidth + @labelPadding;
    *margin-left: 0;
    &:first-child {
      // ub was 160px
      *padding-left: @labelWidth + @labelPadding;
    }
  }
  // Remove bottom margin on block level help text since that's accounted for on .control-group
  .help-block {
    margin-top: @baseLineHeight / 2;
    margin-bottom: 0;
  }
  // Move over buttons in .form-actions to align with .controls
  .form-actions {
   // ub was 160px
    padding-left: @labelWidth + @labelPadding;
  }
} 
```

# sql - 生成 linq 查询

> ID：10029162
> 
> 赞同：1
> 
> 时间：2012-04-05T13:04:22.293
> 
> 标签：sql, linq, oracle, linq-to-sql

我正在使用 Microsoft PUBS 数据库，其中有两个关系表发布者和 pub_info 发布者在 pub_id 字段上有主键，而 pub_info 有发布者表 pub_id 的外键

我正在尝试使用 linq 查询获取发布者表中可用但 pub_info 表中不可用的记录我知道 sql 中的查询

```
select pub_id from publisher where pub_id not in(select pub_id from pub_info);

var data =db.publisher.where(x=>db.pub_info.select(x1=>x1.pub_id).Contains(x)).Select(x.pub_id) 
```

执行此查询时出错

但我无法了解在 linq 中生成相同的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:18:03.570

您也许可以这样做：

```
var data=(from p in db.publisher
          where !(from pi in db.pub_info
                  select pi.pub_id
                  ).Contains(p.pub_id)
          select p.pub_id
         ); 
```

或者这也可能有效：

```
var data=(from p in db.publisher
          where !db.pub_info.Select(pi => pi.pub_id).Contains(p.pub_id)
          select p.pub_id
         ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:11:48.307

我认为你可以做这样的事情

```
var excludedIds = db.pub_info.Select(pi => pi.pub_id).ToArray();

var data = db.publisher.Where(p => !excludedIds.Contains(p.pub_id); 
```

我可能是错的，但我想我记得它不能在一轮中完成。

编辑：不是一轮意味着我认为你必须“枚举”excludedIds。但是你当然可以在一个查询中写出来。

# ruby - 屏幕抓取 HTML 头部内容？

> ID：10029166
> 
> 赞同：2
> 
> 时间：2012-04-05T13:04:38.953
> 
> 标签：ruby, screen-scraping, nokogiri, mechanize

我很乐意使用 CSS 元素作为识别我想要的内容部分的方法来抓取 HTML 内容，但我需要抓取网页部分的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0028)http://www.peoplesafe.co.uk/ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>PeopleSafe</title>
    <link href="css/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <!--[if lte IE 6]>
    <link href="http://www.peoplesafe.co.uk/styles/default/screen_ie6.css" media="screen" rel="stylesheet" type="text/css" />
    <![endif]-->
    <link rel="icon" href="http://www.peoplesafe.co.uk/styles/default/favicon.ico" />

        <script type="text/javascript" src="js/tabpane.js"></script> 
    <link type="text/css" rel="StyleSheet" href="css/tab.webfx.css?v=2" />

    <meta http-equiv="Author" content="Rare Creative Group" />
    <meta http-equiv="Description" content="Experts in lone worker safety" />
    <meta http-equiv="Keywords" content="lone, worker, safety" />
    <script type="text/javascript" src="js/spotlight.js"></script>
    <script type="text/javascript" src="js/promo.js"></script>    

<script src="http://maps.google.com/maps?ile=api&amp;v=2&amp;sensor=true&amp;key=ABQIAAAA04SCF3o4CZghg6c0Qqgd-RQxzn3bXKr_TQ6C8c2CiIf8-vjJhBS3endtVbbJ1vftXL4Wbb2PwuJ8ag" type="text/javascript"></script> 
<script type="text/javascript"> 
//<![CDATA[
function load()
{
    // required for original Peoplesafe layout:
    start();

    if ( GBrowserIsCompatible() )
    {
        // codice setcenter:
        var map = new GMap2( document.getElementById( "map" ) );

        var customUI = map.getDefaultUI();
        // Remove MapType.G_HYBRID_MAP
        //customUI.maptypes.hybrid = false;
        map.setUI(customUI);
        //map.addControl( new GSmallMapControl() );
        //map.addControl( new GMapTypeControl() );

        map.setCenter( new GLatLng( 51.612308, -1.239453 ), 11 );

        // Crea un nuovo marker nel punto specificato con una descrizione HTML associata:
        function createMarker( point, description, primary_contact_id )
        {
            //var icon = new GIcon();
            ////icon.shadow = "/images/nuvola.png";
            //icon.iconSize = new GSize(87, 38);
            ////icon.shadowSize = new GSize(107, 38);
            //icon.iconAnchor = new GPoint(6, 20);
            //icon.infoWindowAnchor = new GPoint(5, 1);
            //icon.image = "/img/."; 
```

我需要以某种方式解析这条线的纬度和经度：

```
map.setCenter( new GLatLng( 51.612308, -1.239453 ), 11 ); 
```

因此，在我表的一列中，我想要第一部分：

```
51.612308 
```

在第二列中，我想要第二部分：

```
-1.239453 
```

如果没有 CSS 选择器，这可能吗？

**编辑**

感谢到目前为止的帮助，非常感谢！

最初的问题是在您登录网站后立即进行重定向，我已经对其进行了排序，现在当我这样做时：

```
put page.root 
```

我得到了我期望的页面的完整来源。所以现在我的代码（登录后）是：

```
html_doc = page.root

# Find the first <script> in the head that does not have src="..."
#script = html.at_xpath('/html/head/script[not(@src)]')

# Use a regex to find the correct code parts in the JS, using named captures
parts = script.text.match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/)

p parts[:lat], parts[:long]
#=> "51.612308"
#=> "-1.239453" 
```

运行上述内容时出现错误：

```
undefined local variable or method `script' for main:Object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:05:35.543

这是一种解决方案；请注意，返回的部分是字符串，因此您可能需要调用`to_f`它们来执行计算：

```
require 'nokogiri'
html_doc = Nokogiri.HTML(my_html)

# Find the first <script> in the head that does not have src="..."
script = html_doc.at_xpath('/html/head/script[not(@src)]')

# Use a regex to find the correct code parts in the JS, using named captures
parts = script.text.match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/)

p parts[:lat], parts[:long]
#=> "51.612308"
#=> "-1.239453" 
```

如果您不习惯使用该 XPath 表达式来查找脚本，您也可以执行以下操作：

```
script = html.css('head script').find{ |el| el['src'].nil? } 
```

即查找头部中的所有脚本标签，然后使用[标准的 Ruby 方法](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)查找匹配特定条件的第一个元素。

**编辑**：如果您使用的是 Mechanize，它会在内部使用 Nokogiri 来解析和处理文档。您可以通过代码直接获取 Nokogiri HTML Document 对象

```
html_doc = my_mechanize_page.root 
```

…或者您可以使用该方法在页面内容内部[`Mechanize::Page#at`](http://mechanize.rubyforge.org/Mechanize/Page.html#method-i-at)调用 Nokogiri 自己的方法。`at`

*我个人更喜欢前者，因为 Nokogiri 文档为您提供了比仅`at`. 但是，两者都可以使用上面的代码。*

**编辑2**：例如：

```
script = page.at('/html/head/script[not(@src)]')
parts = script.text.match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:12:58.380

是的，这在没有 CSS 选择器的情况下是可能的。如果您可以将页面读入缓冲区或数组，您可以挑选出您需要的部分。

在`(`和处分隔`)`将允许​​您检查唯一的字符串`new GLatLng`。您知道这将是您的纬度/经度之前的元素。另请参阅 NitinJS 的评论和此页面以获取帮助将字符串分开[http://www.tizag.com/javascriptT/javascript-string-split.php](http://www.tizag.com/javascriptT/javascript-string-split.php)

# c# - XNA Basic Paint 程序

> ID：10029167
> 
> 赞同：1
> 
> 时间：2012-04-05T13:04:49.337
> 
> 标签：c#, xna, draw, paint, brush

我启动了一个非常基本的 XNA 4.0 程序，在其中我通过内容加载器加载了一个小点的红色图像。红点是 10x10，边缘是圆形的，使它看起来很圆。我在屏幕上绘制它并将其 X 和 Y 位置更新为鼠标的 X 和 Y 位置。所以基本上它是一个自定义的红色光标。

现在我的问题是：我将如何将此光标用作画笔？当我单击鼠标左键时，我希望它绘制到当前屏幕大小的空白 Texture2D 背景上。它的功能就像 MSPAINT 中的画笔一样。

我想我需要一个 Vector2 点数组来保存鼠标移过的点，并且对于这些点中的每一个，当更新发生时，它会在背景 Texture2D 上绘制点？

这可能不是很有效，但这是我当时能想到的。

我还阅读了 Texture2Ds 的更改颜色数据，但可惜没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:14:43.220

我从未尝试过用 XNA 绘画，但喜欢这个主意！因此，我环顾四周，发现了这个已回答的问题，谁知道这可能正是您所需要的！祝你游戏好运。 [XNA 在运行时在 Texture2D 上绘制/绘制](https://stackoverflow.com/questions/6758690/xna-draw-paint-onto-a-texture2d-at-runtime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T21:08:36.637

对于那些对我如何在屏幕上“绘制”感兴趣的人，可以在这里找到整个代码库 [https://thefoofighter@github.com/thefoofighter/paint.git](https://thefoofighter@github.com/thefoofighter/paint.git)

它当然是解决我的问题的最佳方法，但它完成了我需要它做的事情，而且因为我不需要担心将更大的程序导入到其中进行优化，所以我没有尝试过让它变得更好。

上面的 Git 有一个自述文件，提供了有关更改和优化的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:50:17.840

在加载内容：

```
var renderTarget = RenderTarget2D(graphicsDevice, width, height, false, SurfaceFormat.Color, DepthFormat.None, 0, RenderTargetUsage.PreserveContents); 
```

绘制时：
- 设置此渲染目标
- 在 currentPosition 绘制画笔
- 取消设置渲染目标
- 绘制渲染目标

这样您就不需要将渲染目标中的数据设置/取消设置到纹理上或跟踪先前的位置。

# c++ - C++：const char*const* 的含义

> ID：10029170
> 
> 赞同：21
> 
> 时间：2012-04-05T13:05:17.870
> 
> 标签：c++, pointers, function-prototypes, function-parameter

在其中一个 C++ 程序中，我看到了一个函数原型：`int Classifier::command(int argc, const char*const* argv)`

是什么`const char*const* argv`意思？是一样的`const char* argv[]`吗？`const char** argv`是不是也一样的意思？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T13:08:49.417

来自[C++ 超级常见问题解答](https://isocpp.org/wiki/faq/const-correctness#const-ptr-vs-ptr-const)：

> 从右到左阅读指针声明。
> 
> *   `const X* p`意思是“`p`指向`X`那个是`const`”：`X`对象[不能通过`p`](https://isocpp.org/wiki/faq/const-correctness#ptr-to-const-aliasing).
> *   `X* const p`表示“`p`是`const`指向”`X`的指针`non-const`：您不能更改指针本身`p`，但可以[通过](https://isocpp.org/wiki/faq/const-correctness#ptr-to-const-aliasing).`X`[`p`](https://isocpp.org/wiki/faq/const-correctness#ptr-to-const-aliasing)
> *   `const X* const p`表示“p 是`const`指向 an`X`的指针`const`”：您不能更改指针本身`p`，也[不能通过](https://isocpp.org/wiki/faq/const-correctness#ptr-to-const-aliasing).`X`[`p`](https://isocpp.org/wiki/faq/const-correctness#ptr-to-const-aliasing)
> 
> 而且，哦，是的，我是否提到要从右到左阅读您的指针声明？

`const char * const *`等同于`char const * const *`：指向 const 的（非 const）指针 指向 const char 的指针。

`const char *`等同于`char const *`：指向 const char 的（非常量）指针。

`const char * *`等同于`char const * *`：指向 const char 的（非常量）指针的（非常量）指针。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-05T13:08:57.897

不，它不一样`const char *argv[]`。禁止在特定的`const`取消引用级别修改取消引用的值：

```
**argv = x; // not allowed because of the first const
*argv = y; // not allowed because of the second const
argv = z; // allowed because no const appears right next to the argv identifier 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T13:09:44.053

`const char*const* argv`意思是“指向常量的指针`char`”。它与 不“相同” `const char *argv[]`，但在某种程度上兼容：

```
void foo(const char *const *argv);

void bar(const char **argv)
{
    foo(argv);
} 
```

编译就好了。（如果没有 .，反向将无法编译`const_cast`。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T13:09:28.497

一个不改变的指针指向一个不改变的字符串：

```
const char* aString ="testString";

aString[0] = 'x';   // invaliv since the content is const
aString = "anotherTestString"; //ok, since th content doesn't change

const char const* bString = "testString";
bString [0] = 'x'; still invalid
bString = "yet another string"; // now invalid since the pointer now too is const and may not be changed. 
```

# iphone - iPhone推送通知声音，“语音通知”

> ID：10029171
> 
> 赞同：1
> 
> 时间：2012-04-05T13:05:19.383
> 
> 标签：iphone, ios, ipad, push-notification, apple-push-notifications

我在我的 IOS 应用程序中实现通知，并使用自定义声音。一切正常。

但我不确定如果我使用带有说话声音的声音，这个应用程序是否会被苹果验证。

例如，在我的推送通知中，声音是一种声音：“检测到存在”

**有人已经发布了带有“语音通知”而不是“bipbip”或基本声音的应用程序？**

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:15:00.617

Apple 为声音写道：-（推送通知）

"应用程序包中声音文件的名称。此文件中的声音作为警报播放。如果声音文件不存在或指定了默认值作为值，则播放默认警报声音。音频必须是采用与系统声音兼容的音频数据格式之一；有关详细信息，请参阅“准备自定义警报声音”。”

指：- [https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW1)

# iphone - iphone dev以编程方式更改标签栏项目视图

> ID：10029181
> 
> 赞同：1
> 
> 时间：2012-04-05T13:05:47.057
> 
> 标签：iphone

我有一个标签栏应用程序，现在我要做的是以编程方式更改同一标签栏项目的视图，这意味着我的要求是当应用程序在安装后第一次运行时（我将使用 NSUserDefaults 作为“第一个time”的东西）标签栏的第一项将包含注册类的笔尖或视图，即首先运行注册页面或视图将显示在标签栏的第一项上，然后在每次运行时显示标志在屏幕中将显示在同一个项目中，现在我很困惑如何以编程方式进行操作，因为我总是使用界面生成器为每个项目设置标签栏内的笔尖，现在情况不同了，请。指导我如何完成这项任务，谢谢。萨德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:12:08.283

UITabBarController 有一个名为的方法`setViewControllers:animated:`，可让您提供要显示的视图控制器数组。如果您检测到这不是“第一次”，您可以重新排列您的控制器列表。

# android - 如何将 Android SDK 工具恢复到早期版本？

> ID：10029188
> 
> 赞同：14
> 
> 时间：2012-04-05T13:06:11.057
> 
> 标签：android, android-sdk-tools

是否可以将 Android SDK 工具恢复到较早的版本（例如从 r17 到 r16 或 r15）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:31:09.337

下载旧工具，删除新工具，解压旧工具，大功告成。仅此而已。这些工具可以从您当前sdk的工具目录中的“android”程序下载。

```
android-sdk-linux-17/tools$ ./android 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T12:07:54.040

@erbsman 这也无法从**Android**下载旧版本的 sdk 工具。因为它使用 xml 文件（检查**ANDROID TOOL**上的日志）来获取所有 zip 文件的位置。所以你必须为此做一些破解。查看以下链接以获取 hack

[下载 Android SDK 组件以进行离线安装](https://stackoverflow.com/questions/2766713/android-download-the-android-sdk-components-for-offline-install/9403527#9403527)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:54:47.490

您遇到的问题与 Android 团队对 lib jar 的引用方式所做的更改有关。

这能解决问题吗？[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# android - Sqlite DB with Android 一些基本问题

> ID：10029189
> 
> 赞同：8
> 
> 时间：2012-04-05T13:06:18.847
> 
> 标签：android, sqlite

我想在 Android 中使用 SQLite 数据库。我有几个问题：

1.  数据库有最大大小吗？
2.  数据的安全性如何？
3.  数据库存储在哪里？
4.  数据将在手机上保留多长时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:24:54.793

1.  从理论上讲，它被计算为[35 万亿字节](https://stackoverflow.com/questions/2777954/is-there-a-limit-to-the-size-of-a-sqlite-database)，这对于您的应用程序来说应该绰绰有余，因为手机的内存总是有限的。简而言之，您不应该为移动应用程序问这个问题:)
2.  如果您的手机未植根，则存储在手机内部存储器中的数据库位于最安全的存储区域中。有根电话不为内部或外部存储介质中的任何文件提供任何安全性
3.  如果您不提供任何路径，则默认/理想位置是手机的内存。该文件位于**data/data/package_name/database_file**中。这可以通过探索*DDMS -> FileExplorer*在模拟器上观察到。如果您将文件保存在其他存储介质上，例如 sd 卡，那么当然这意味着您知道将其保存在哪里 :)
4.  只要您的手机可以正常工作并且您不擦除应用程序的缓存、卸载应用程序或恢复出厂设置。如果您在手机上烫伤、压碎或溅水，则无法保证 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:12:38.777

好的.. 我会尝试回答您的大部分问题.. 1) 数据是否安全 - Android 将应用程序特定数据存储在其应用程序特定位置，并且仅向该应用程序提供访问权限。因此，我们可以说，它非常安全，因为没有其他应用程序可以读取您的应用程序的数据，除非为具有相同包名称的 2 个应用程序提供访问权限。

2) 存储 db 的位置 - 它在 data\data\databases\packagename*.db 下 3) 数据将保留在手机上，除非应用程序被卸载 / android 崩溃，在这种情况下，您必须清除手机缓存并应用程序缓存，从而从 android 的惰性手机内存中删除所有内容。

# python - django 多个站点 wsgi 就够了吗？

> ID：10029190
> 
> 赞同：2
> 
> 时间：2012-04-05T13:06:30.503
> 
> 标签：python, django, amazon-ec2, wsgi

我打算在我的服务器上安装许多带有 django 应用程序的 python，

可以在一台服务器上使用 django 和 wsgi 和许多站点吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T13:19:14.327

是的，您的服务器可以处理尽可能多的不同 django 站点！您可以为您想要的每个站点设置指向适当 wsgi 的单独虚拟主机。

请记住，仅仅因为它是可能的并不意味着它是一个好主意，请记住每个站点正在消耗的资源。

# php - Android 和 PHP 之间的特殊字符

> ID：10029193
> 
> 赞同：4
> 
> 时间：2012-04-05T13:06:35.237
> 
> 标签：php, android, special-characters

我再次需要你的帮助。我想将特殊字符从 Android 应用程序发送到 PHP 脚本，反之亦然。

**安卓代码**

* * *

```
...
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("http://www.mypage.com/script.php");
try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("value", "Español"));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = client.execute(post);
    StatusLine statusLine = response.getStatusLine();
    if(statusLine.getStatusCode() == HttpURLConnection.HTTP_OK){
        InputStream inps = response.getEntity().getContent();
        InputStreamReader inp = new InputStreamReader(inps, Charset.forName("ISO-8859-2"));
        BufferedReader rd = new BufferedReader(inp);
        StringBuilder stringBuilder = new StringBuilder();
        String bufferedStrChunk = null;
        while ((bufferedStrChunk = rd.readLine()) != null) {
            stringBuilder.append(bufferedStrChunk);
        }
        Result = stringBuilder.toString();
    }... 
```

**PHP 代码**

* * *

```
<?php
    header("Content-Type: text/plain;charset=ISO-8859-2");
    echo $_POST["value"];
?> 
```

*第一步*

我正在尝试将字符串“Español”从 Android 发送到 PHP。我将字符串存储到 MySQL 表（UNICODE 字符集）中，并且正确获取了字符串。我还得到了每个字符的整数值。结果是“Español”和“69.115.112.97.241.111.108”。因此，Android 将字符“ñ”发送为 241，在 UNICODE 图表中定义为“ń”。请参阅[http://www.ssec.wisc.edu/~tomw/java/unicode.html#x0080](http://www.ssec.wisc.edu/~tomw/java/unicode.html#x0080)

*第二步*

我将字符串从 PHP 返回到 Android，而不是得到“ñ”，而是得到“ń”。这是我迷路的地方。这种情况什么时候发生变化，为什么具有相同的数值它们是不同的？这对我来说太多了，我请求你的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:24:12.593

创建发送的文件时使用**ISO-8859-2 。**`URLEncodedEntity`您可以将其设置为构造函数中的参数。

如果没有指定的字符集，您可能会以服务器以不同方式解释的 UTF-8/UTF-16（最常见）格式发送数据。

**编辑**：看起来**ISO-8859-2**不支持ñ。您可能需要在服务器端进行一些更改。[http://en.wikipedia.org/wiki/ISO/IEC_8859-2](http://en.wikipedia.org/wiki/ISO/IEC_8859-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T21:13:19.820

好的，这是我的最终代码，它可以工作。我必须指定我的环境：**API 15、Android 4.0.3**

*JAVA代码*

* * *

```
...
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost("http://www.mypage.com/script.php");
try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
    nameValuePairs.add(new BasicNameValuePair("value", "Español"));
    post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "ISO-8859-2"));
    HttpResponse response = client.execute(post);
    StatusLine statusLine = response.getStatusLine();
    if(statusLine.getStatusCode() == HttpURLConnection.HTTP_OK){
        InputStream inps = response.getEntity().getContent();
        InputStreamReader inp = new InputStreamReader(inps, Charset.forName("UTF-8"));
        BufferedReader rd = new BufferedReader(inp);
        StringBuilder stringBuilder = new StringBuilder();
        String bufferedStrChunk = null;
        while ((bufferedStrChunk = rd.readLine()) != null) {
            stringBuilder.append(bufferedStrChunk);
        }
        Result = stringBuilder.toString();
    }
... 
```

*PHP代码*

* * *

```
<?php
    header("Content-Type: text/plain;charset=UTF-8");
    echo utf8_encode($_POST["value"]);
?> 
```

使用此代码，我可以将该字符串发送到 PHP 脚本，将其存储在数据库中和/或将其返回到 Android 应用程序（并像发送它一样接收它）我已经为此工作了几天，我希望它将对其他 Android 开发人员有用。顺便说一句，我在 doInBackground() 函数内部的异步类中使用 Java 代码。

谢谢和再见

# chef-infra - Chef and Knife - 在 ec2 上使用三个刀作业启动实例时，刀挂在一个上

> ID：10029195
> 
> 赞同：1
> 
> 时间：2012-04-05T13:06:45.040
> 
> 标签：chef-infra

随意地，刀似乎挂了。我使用以下启动三个 ami。

```
warning: commands will be executed using /bin/sh
job 106 at Thu Apr  5 20:35:00 2012
knife ec2 server create -r "role[redis_server]" -N redis_singapore_development_1_1_1333629300 -E development --region ap-southeast-1 -Z ap-southeast-1a -I ami-c4622596 --flavor t1.micro -G redis -x ubuntu -S sg_development -i /home/ubuntu/.ec2/sg_development.pem > /tmp/redis_singapore_development_1_1_1333629300
warning: commands will be executed using /bin/sh
job 107 at Thu Apr  5 20:36:00 2012
knife ec2 server create -r "role[redis_server]" -N redis_singapore_development_1_2_1333629300 -E development --region ap-southeast-1 -Z ap-southeast-1a -I ami-c4622596 --flavor t1.micro -G redis -x ubuntu -S sg_development -i /home/ubuntu/.ec2/sg_development.pem > /tmp/redis_singapore_development_1_2_1333629300
warning: commands will be executed using /bin/sh
knife ec2 server create -r "role[nginx_server]" -N bidder_singapore_development_1_1_1333629300 -E development --region ap-southeast-1 -Z ap-southeast-1a -I ami-c4622596 --flavor t1.micro -G nginx -x ubuntu -S sg_development -i /home/ubuntu/.ec2/sg_development.pem > /tmp/bidder_singapore_development_1_1_1333629300job 108 at Thu Apr  5 20:37:00 2012 
```

两个会完成，一个会卡住。下面是吊刀作业的输出。所有三个靴子将在大约 20% 的时间内工作。刀有知识问题吗？我什至尝试在执行命令之间等待 60 秒，但无济于事。

```
Waiting for server............
Public DNS Name: ec2-122-248-207-247.ap-southeast-1.compute.amazonaws.com
Public IP Address: 122.248.207.247
Private DNS Name: ip-10-131-22-222.ap-southeast-1.compute.internal
Private IP Address: 10.131.22.222

Waiting for sshd.done
Bootstrapping Chef on ec2-122-248-207-247.ap-southeast-1.compute.amazonaws.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T18:05:12.937

由于某种原因，ssh 恶魔的启动没有完成，或者您的刀实例无法 ssh 到盒子。我经历过这两种对我的影响。你需要做一些工作来弄清楚这里发生了什么。

第一步是确定 ssh 是否在盒子上启动并运行。作为第一步，我会查看您的 AWS 控制台并查看它为相关实例显示的内容。

我还会增加刀的详细程度。我总是使用“-VV”选项来获得尽可能多的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T16:05:22.653

就我而言，这是由于 ssh 端口 (22) 在我的网络上被阻止。也许下次检查你是否在防火墙后面。

# c++ - opencv 断言（一般）

> ID：10029196
> 
> 赞同：6
> 
> 时间：2012-04-05T13:06:49.590
> 
> 标签：c++, opencv

一些（大部分）opencv 错误是在运行时发现的——使用 CV_64 而不是 CV_32、访问超出范围等。这使得调试不是一件容易的事，至少当你因为不同的原因不能使用调试模式
时。发生错误，opencv 停止断言（CV::ASSERT 宏）并准确告诉它发生在 opencv 源中的位置。
有没有办法告诉调用代码（我的代码）中发生错误的位置？
假设我们当然处于发布模式（没有断点 - 只有控制台输出）
谢谢

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-04-05T13:12:54.660

**是**的，通常很容易判断 OpenCV 何时失败：您需要做的就是**检查每个函数调用的返回**，并在发生失败时打印错误消息。

# objective-c - 防止倒计时变成负数

> ID：10029197
> 
> 赞同：0
> 
> 时间：2012-04-05T13:06:57.077
> 
> 标签：objective-c, ios, cocoa, nstimer, foundation

我创建了一个倒数计时器，它工作得很好..但是当它达到零时，它会继续倒计时..所以它显示-1、-2、-3等。我该如何防止它这样做？

这是我的实现文件中的代码..

```
@implementation ViewController

-(IBAction)start {

    myTicker = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(showActivity) userInfo:nil repeats:YES];
}

-(IBAction)stop {
    [myTicker invalidate];
}

-(IBAction)reset {
    time.text = @"0";
}

-(void)showActivity {
    int currentTime = [time.text intValue];
    int newTime = currentTime -1;
    time.text = [NSString stringWithFormat:@"%d", newTime];
} 
```

我猜我在某处遗漏了一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:13:06.017

快速解决方法是更改​​：

```
int newTime = currentTime - 1; 
```

进入：

```
int newTime = (currentTime > 0) ? currentTime - 1 : 0; 
```

这将阻止倒数计时器低于零。如果这就是你所需要的，那就足够了。

* * *

当它达到零时，它*不会*关闭计时器或执行操作。为此，您需要在上面的该行之后添加类似以下块的内容：

```
if ((currentTime > 0) && (newTime ==0)) {
    // optionally turn off timer
    fireZeroEvent ();
} 
```

并提供`fireZeroEvent()`功能来做你需要做的任何事情。

我说*可以选择*关闭计时器，因为您可能希望让它继续运行，这样您就可以通过设置来重新开始倒计时，`time.text`而不必重新创建计时器。

因此，`fireZeroEvent()`仅在从 1 到 0 的转换时调用 ，而不是每次计时器在达到零后触发时调用。

# ajax - HTML5 p2p 通信

> ID：10029202
> 
> 赞同：1
> 
> 时间：2012-04-05T13:07:23.130
> 
> 标签：ajax, html, chat, comet, p2p

我需要构建一个 Web 应用程序以在实时流中注入实时字幕。字幕将由具有语音识别软件的操作员（或由打字员）生成，并填充浏览器上的文本区域。消费者将是浏览器中的 HTML5 视频标签。

原理很简单，可能比网络聊天更简单（它是一种单向通信）。

这是我目前的实现：

*   在生产者上 - 当有一些新文本时 - 我通过 AJAX 在我的服务器上调用一个编写器脚本，它将文本写入文件。
*   在消费者身上，我通过 ajax（使用“彗星”轮询）不断调用服务器上的阅读器脚本，它给我返回新文本，我将其注入视频标签以呈现字幕。

这个实现是可行的，但它看起来很复杂，我对它不太满意......对“更智能”或更清洁的架构有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:11:46.840

套接字/nodejs。每次有新数据时，套接字都会为您打开与浏览器的连接。无需投票！

例如检查[这个...](http://martinsikora.com/nodejs-and-websocket-simple-chat-tutorial)

# android - XML sax 解析器 - 忽略未绑定前缀异常

> ID：10029214
> 
> 赞同：0
> 
> 时间：2012-04-05T13:07:55.970
> 
> 标签：android, xml, sax

在android中解析xml文件时，我这样做：

```
try
{
    InputStream is = ...
    MyContentHandler ch = new MyContentHandler();
    Xml.parse(is, Encoding.UTF_8, ch);
}
catch ... 
```

问题是有时我试图解析的文件格式不正确。就我而言，可能存在未声明的命名空间。

我感兴趣的数据不在这些标签内，所以我可以简单地忽略它，但我得到一个未绑定前缀的异常，它不在内容处理程序内，而是在解析器本身；这意味着如果发生异常，整个解析过程将被中断。

有没有一种方法可以使用 sax 解析器忽略这种错误（或完全没有命名空间）？

ps 我想避免将内存中的所有文件作为字符串加载并从中剥离名称空间，或者必须重写文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:14:57.743

我在另一个线程中找到了解决方案。

您需要通过 SAXParserFactory 手动实例化 sax 解析器并获取阅读器，而不是使用 Xml.parse。

然后您可以设置阅读器功能。

在可用的功能中，一个禁用命名空间就可以了。

参考 ->[链接](https://stackoverflow.com/questions/5481043/how-can-i-configure-a-sax-parser-in-the-sun-jvm-to-match-the-android-one)

# java - 将 JAXB 与具有许多相同元素的 XML 文件一起使用

> ID：10029228
> 
> 赞同：2
> 
> 时间：2012-04-05T13:09:04.067
> 
> 标签：java, xml, annotations, jaxb, xml-binding

我正在创建一个 Java 类来映射具有多个相同元素的 XML 文件。以下 XML 是文件外观的示例：

```
<TrackBroadcast>
<DateTime>some date</DateTime>
<From>from someone</From>
<To>to someone</To>
<Classification>some type of classification</Classification>
<Command>some type of command</Command>
<MsgId>some id</MsgId>
<Barge attribute1="???" attribute2="???" attribute3="" etc/> --->The Barge.java class explains the attributes
<Barge attribute1="???" attribute2="???" attribute3="" etc/> --->The Barge.java class explains the attributes
<Barge attribute1="???" attribute2="???" attribute3="" etc/> --->The Barge.java class explains the attributes
<Barge attribute1="???" attribute2="???" attribute3="" etc/> --->The Barge.java class explains the attributes
</TrackBroadcast> 
```

我的 JAXB 类可以读取 DateTime、From、To、Classification、Command 和 MsgId 元素，但无法读取 Barge 元素。我有两个类来尝试封装 XML，但我知道我做错了。这两个类是：

```
@XmlRootElement(name="TrackBroadcast")
public class TrackBroadcast {

    String dataTime;
    String from;
    String to;
    String classification;
    String command;
    String msgId;
    List<Barge> barge = new ArrayList<Barge>();

    public String getDataTime() {
        return dataTime;
    }

    @XmlElement(name="DateTime")
    public void setDataTime(String dataTime) {
        this.dataTime = dataTime;
    }

    public String getFrom() {
        return from;
    }

    @XmlElement(name="From")
    public void setFrom(String from) {
        this.from = from;
    }

    public String getTo() {
        return to;
    }

    @XmlElement(name="To")
    public void setTo(String to) {
        this.to = to;
    }

    public String getClassification() {
        return classification;
    }

    @XmlElement(name="Classification")
    public void setClassification(String classification) {
        this.classification = classification;
    }

    public String getCommand() {
        return command;
    }

    @XmlElement(name="Command")
    public void setCommand(String command) {
        this.command = command;
    }

    public String getMsgId() {
        return msgId;
    }

    @XmlElement(name="MsgId")
    public void setMsgId(String msgId) {
        this.msgId = msgId;
    }

    public List<Barge> getBarge() {
        return barge;
    }

    public void setBarge(List<Barge> barge) {
        this.barge = barge;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final TrackBroadcast other = (TrackBroadcast) obj;
        if ((this.dataTime == null) ? (other.dataTime != null) : !this.dataTime.equals(other.dataTime)) {
            return false;
        }
        if ((this.from == null) ? (other.from != null) : !this.from.equals(other.from)) {
            return false;
        }
        if ((this.to == null) ? (other.to != null) : !this.to.equals(other.to)) {
            return false;
        }
        if ((this.command == null) ? (other.command != null) : !this.command.equals(other.command)) {
            return false;
        }
        if ((this.msgId == null) ? (other.msgId != null) : !this.msgId.equals(other.msgId)) {
            return false;
        }
        if (this.barge != other.barge && (this.barge == null || !this.barge.equals(other.barge))) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 7;
        hash = 43 * hash + (this.dataTime != null ? this.dataTime.hashCode() : 0);
        hash = 43 * hash + (this.from != null ? this.from.hashCode() : 0);
        hash = 43 * hash + (this.to != null ? this.to.hashCode() : 0);
        hash = 43 * hash + (this.classification != null ? this.classification.hashCode() : 0);
        hash = 43 * hash + (this.command != null ? this.command.hashCode() : 0);
        hash = 43 * hash + (this.msgId != null ? this.msgId.hashCode() : 0);
        hash = 43 * hash + (this.barge != null ? this.barge.hashCode() : 0);
        for(int i=0; i<barge.size(); i++){
            Barge b = barge.get(i);
            System.out.println(b.toString());
        }
        return hash;
    }

    @Override
    public String toString() {
        return "TrackBroadcast{" + "dataTime=" + dataTime + ", from=" + from + ", to=" + to + ", classification=" + classification + ", command=" + command + ", msgId=" + msgId + ", barge=" + barge + '}';
    }
} 
```

和

```
@XmlRootElement(name="Barge")
public class Barge {
     String misleBargeVesselId;
     String bargeName;
     String towingVesselName;
     String nonVesselName;
     String towingVesselPhoneNo;
     String towingVesselCompany;
     String positionDate;
     double latitude;
     double longitude;
     String waterwayAbbr;
     double waterwayMileMarker;
     String bargeDirection;
     String bargeCdcType;
     double bargeCdcQuantity;
     String bargeCdcMeasureUnit;
     String bargeLoadStatus;
     String nextEta;

    public String getMisleBargeVesselId() {
        return misleBargeVesselId;
    }

    @XmlAttribute(name="MISLE_Barge_Vessel_Id")
    public void setMisleBargeVesselId(String misleBargeVesselId) {
        this.misleBargeVesselId = misleBargeVesselId;
    }

    public String getBargeName() {
        return bargeName;
    }

    @XmlAttribute(name="Barge_Name")
    public void setBargeName(String bargeName) {
        this.bargeName = bargeName;
    }

    public String getTowingVesselName() {
        return towingVesselName;
    }

    @XmlAttribute(name="Towing_Vessel_Name")
    public void setTowingVesselName(String towingVesselName) {
        this.towingVesselName = towingVesselName;
    }

    public String getNonVesselName() {
        return nonVesselName;
    }

    @XmlAttribute(name="Non_Vessel_Name")
    public void setNonVesselName(String nonVesselName) {
        this.nonVesselName = nonVesselName;
    }

    public String getTowingVesselPhoneNo() {
        return towingVesselPhoneNo;
    }

    @XmlAttribute(name="Towing_Vessel_Phone_No")
    public void setTowingVesselPhoneNo(String towingVesselPhoneNo) {
        this.towingVesselPhoneNo = towingVesselPhoneNo;
    }

    public String getTowingVesselCompany() {
        return towingVesselCompany;
    }

    @XmlAttribute(name="Towing_Vessel_Company")
    public void setTowingVesselCompany(String towingVesselCompany) {
        this.towingVesselCompany = towingVesselCompany;
    }

    public String getPositionDate() {
        return positionDate;
    }

    @XmlAttribute(name="Position_Date")
    public void setPositionDate(String positionDate) {
        this.positionDate = positionDate;
    }

    public double getLatitude() {
        return latitude;
    }

    @XmlAttribute(name="Latitude")
    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    @XmlAttribute(name="Longitude")
    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    public String getWaterwayAbbr() {
        return waterwayAbbr;
    }

    @XmlAttribute(name="Waterway_Abbr")
    public void setWaterwayAbbr(String waterwayAbbr) {
        this.waterwayAbbr = waterwayAbbr;
    }

    public double getWaterwayMileMarker() {
        return waterwayMileMarker;
    }

    @XmlAttribute(name="Waterway_Mile_Marker")
    public void setWaterwayMileMarker(double waerwayMileMarker) {
        this.waterwayMileMarker = waerwayMileMarker;
    }

    public String getBargeDirection() {
        return bargeDirection;
    }

    @XmlAttribute(name="Barge_Direction")
    public void setBargeDirection(String bargeDirection) {
        this.bargeDirection = bargeDirection;
    }

    public String getBargeCdcType() {
        return bargeCdcType;
    }

    @XmlAttribute(name="Barge_CDC_Type")
    public void setBargeCdcType(String bargeCdcType) {
        this.bargeCdcType = bargeCdcType;
    }

    public double getBargeCdcQuantity() {
        return bargeCdcQuantity;
    }

    @XmlAttribute(name="Barge_CDC_Quantity")
    public void setBargeCdcQuantity(double bargeCdcQuantity) {
        this.bargeCdcQuantity = bargeCdcQuantity;
    }

    public String getBargeCdcMeasureUnit() {
        return bargeCdcMeasureUnit;
    }

    @XmlAttribute(name="Barge_CDC_Measure_Unit")
    public void setBargeCdcMeasureUnit(String bargeCdcMeasureUnit) {
        this.bargeCdcMeasureUnit = bargeCdcMeasureUnit;
    }

    public String getBargeLoadStatus() {
        return bargeLoadStatus;
    }

    @XmlAttribute(name="Barge_Load_Status")
    public void setBargeLoadStatus(String bargeLoadStatus) {
        this.bargeLoadStatus = bargeLoadStatus;
    }

    public String getNextEta() {
        return nextEta;
    }

    @XmlAttribute(name="Next_ETA")
    public void setNextEta(String nextEta) {
        this.nextEta = nextEta;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Barge other = (Barge) obj;
        if ((this.misleBargeVesselId == null) ? (other.misleBargeVesselId != null) : !this.misleBargeVesselId.equals(other.misleBargeVesselId)) {
            return false;
        }
        if ((this.bargeName == null) ? (other.bargeName != null) : !this.bargeName.equals(other.bargeName)) {
            return false;
        }
        if ((this.towingVesselName == null) ? (other.towingVesselName != null) : !this.towingVesselName.equals(other.towingVesselName)) {
            return false;
        }
        if ((this.nonVesselName == null) ? (other.nonVesselName != null) : !this.nonVesselName.equals(other.nonVesselName)) {
            return false;
        }
        if ((this.towingVesselPhoneNo == null) ? (other.towingVesselPhoneNo != null) : !this.towingVesselPhoneNo.equals(other.towingVesselPhoneNo)) {
            return false;
        }
        if ((this.towingVesselCompany == null) ? (other.towingVesselCompany != null) : !this.towingVesselCompany.equals(other.towingVesselCompany)) {
            return false;
        }
        if ((this.positionDate == null) ? (other.positionDate != null) : !this.positionDate.equals(other.positionDate)) {
            return false;
        }
        if (Double.doubleToLongBits(this.latitude) != Double.doubleToLongBits(other.latitude)) {
            return false;
        }
        if (Double.doubleToLongBits(this.longitude) != Double.doubleToLongBits(other.longitude)) {
            return false;
        }
        if ((this.waterwayAbbr == null) ? (other.waterwayAbbr != null) : !this.waterwayAbbr.equals(other.waterwayAbbr)) {
            return false;
        }
        if (Double.doubleToLongBits(this.waterwayMileMarker) != Double.doubleToLongBits(other.waterwayMileMarker)) {
            return false;
        }
        if ((this.bargeDirection == null) ? (other.bargeDirection != null) : !this.bargeDirection.equals(other.bargeDirection)) {
            return false;
        }
        if ((this.bargeCdcType == null) ? (other.bargeCdcType != null) : !this.bargeCdcType.equals(other.bargeCdcType)) {
            return false;
        }
        if (Double.doubleToLongBits(this.bargeCdcQuantity) != Double.doubleToLongBits(other.bargeCdcQuantity)) {
            return false;
        }
        if ((this.bargeCdcMeasureUnit == null) ? (other.bargeCdcMeasureUnit != null) : !this.bargeCdcMeasureUnit.equals(other.bargeCdcMeasureUnit)) {
            return false;
        }
        if ((this.bargeLoadStatus == null) ? (other.bargeLoadStatus != null) : !this.bargeLoadStatus.equals(other.bargeLoadStatus)) {
            return false;
        }
        if ((this.nextEta == null) ? (other.nextEta != null) : !this.nextEta.equals(other.nextEta)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 5;
        hash = 17 * hash + (this.misleBargeVesselId != null ? this.misleBargeVesselId.hashCode() : 0);
        hash = 17 * hash + (this.bargeName != null ? this.bargeName.hashCode() : 0);
        hash = 17 * hash + (this.towingVesselName != null ? this.towingVesselName.hashCode() : 0);
        hash = 17 * hash + (this.nonVesselName != null ? this.nonVesselName.hashCode() : 0);
        hash = 17 * hash + (this.towingVesselPhoneNo != null ? this.towingVesselPhoneNo.hashCode() : 0);
        hash = 17 * hash + (this.towingVesselCompany != null ? this.towingVesselCompany.hashCode() : 0);
        hash = 17 * hash + (this.positionDate != null ? this.positionDate.hashCode() : 0);
        hash = 17 * hash + (int) (Double.doubleToLongBits(this.latitude) ^ (Double.doubleToLongBits(this.latitude) >>> 32));
        hash = 17 * hash + (int) (Double.doubleToLongBits(this.longitude) ^ (Double.doubleToLongBits(this.longitude) >>> 32));
        hash = 17 * hash + (this.waterwayAbbr != null ? this.waterwayAbbr.hashCode() : 0);
        hash = 17 * hash + (int) (Double.doubleToLongBits(this.waterwayMileMarker) ^ (Double.doubleToLongBits(this.waterwayMileMarker) >>> 32));
        hash = 17 * hash + (this.bargeDirection != null ? this.bargeDirection.hashCode() : 0);
        hash = 17 * hash + (this.bargeCdcType != null ? this.bargeCdcType.hashCode() : 0);
        hash = 17 * hash + (int) (Double.doubleToLongBits(this.bargeCdcQuantity) ^ (Double.doubleToLongBits(this.bargeCdcQuantity) >>> 32));
        hash = 17 * hash + (this.bargeCdcMeasureUnit != null ? this.bargeCdcMeasureUnit.hashCode() : 0);
        hash = 17 * hash + (this.bargeLoadStatus != null ? this.bargeLoadStatus.hashCode() : 0);
        hash = 17 * hash + (this.nextEta != null ? this.nextEta.hashCode() : 0);
        return hash;
    }

    @Override
    public String toString() {
        return "Barge{" + "misleBargeVesselId=" + misleBargeVesselId + ", bargeName=" + bargeName + ", towingVesselName=" + towingVesselName + ", nonVesselName=" + nonVesselName + ", towingVesselPhoneNo=" + towingVesselPhoneNo + ", towingVesselCompany=" + towingVesselCompany + ", positionDate=" + positionDate + ", latitude=" + latitude + ", longitude=" + longitude + ", waterwayAbbr=" + waterwayAbbr + ", waerwayMileMarker=" + waterwayMileMarker + ", bargeDirection=" + bargeDirection + ", bargeCdcType=" + bargeCdcType + ", bargeCdcQuantity=" + bargeCdcQuantity + ", bargeCdcMeasureUnit=" + bargeCdcMeasureUnit + ", bargeLoadStatus=" + bargeLoadStatus + ", nextEta=" + nextEta + '}';
    }
} 
```

当我解组文件时，我可以在 TrackBroadcast 中获取除 Barges 之外的所有内容。我是 JAXB 的新手，想知道是否有人能看出我可能做错了什么，或者是否有人可以将我推向正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:19:44.780

您应该只需[**要按 JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)默认命名规则添加 JAXB 实现将查找具有名称`@XmlElement(name="Barge")`而不是 的元素：[](http://jcp.org/en/jsr/detail?id=222)**`barge``Barge`**

 **```
@XmlElement(name="Barge")
public List<Barge> getBarge() {
    return barge;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:53:09.443

只需在必填字段设置器上使用首选名称定义 JAXB @XmlElement 注释。此外，我认为从 XML Schema 生成类是比手动确保映射合同更好的选择。**

# jquery - 调整浏览器窗口大小时，图像随机蹦极

> ID：10029231
> 
> 赞同：1
> 
> 时间：2012-04-05T13:09:13.677
> 
> 标签：jquery, html, browser, window-resize

到目前为止我遇到的最神秘的问题。访问我目前正在设计的网站：http: [//ftfranes.com/mliad2/](http://ftfranes.com/mliad2/)

然后只需在页面加载后调整浏览器窗口的大小。您会注意到图像会立即跳到页面的下方。如果我告诉你我对造成这种情况的原因有任何线索，我会撒谎，所以我在这里求助于可能比我更聪明的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:42:17.030

在我看来，关于您的浮动容器，似乎有两个有问题的容器。两者都`.sidebar-right-twitter`占据`.projects`整个宽度，因此（包含您的缩略图）在它们应该并排时`.projects`被推到下方。`.sidebar-right-twitter`

```
.side-bar-right {
  float: right;
  margin-left: 705px;  /* Reduce a lot or omit entirely? */
  :
}

.projects {
  float: left;
  width: 940px;  /* Reduce to nearer 700px */
  :
} 
```

对 CSS 进行这些更改似乎可以解决 Chrome 中的问题。（但是，我确实需要再次调整窗口大小以使其“跳回”。）

**编辑**

小跳跃的第2期...（`H2`似乎是一个红鲱鱼/巧合。）

当您调整窗口大小时，某些*脚本*将`top:368px`应用于`#grid_clone`. 这似乎将缩略图容器向下推得太远了。一个真正的技巧是`margin-top:-28px;`在 CSS 中应用这个元素来抵消这个额外的跳跃。

我怀疑您将需要同时应用`margin-top:-28px;`这两个元素，否则它们将无法对齐。

在评论中继续...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:16:28.493

当我们调整大小时，具有 id grid_clone 的 ul 正在获取 top:845px，因为它绝对定位，它会在底部留下 845px。它是您正在使用的任何插件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:16:59.910

实际上这是一个css问题。`#image-grid`向左浮动以及`.sidebar_right_twitter`. 但是一个元素必须有足够的空间来浮动。如果不是，它将跳转到下一行。因此，通过调整窗口大小，div 不再有足够的空间并转到下一行。

因此，如果您想让元素彼此相邻浮动，您将需要一个容器：

```
<div id="myContainer">
    <div class="floatLeft">
    </div>
    <div class="floatRight">
    </div>
</div> 
```

一定要给浮动 div 一个宽度，它不应该超过给定的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:18:46.207

重新排列你的内容结构，你需要把你`<ul>`的 div 放在右边栏的上方。它们都设置为向左浮动，所以你会希望左边的元素是第一个。

编辑*

您的网格显示在一个无序列表中 -`<ul>`它是在`<div>`包含侧边栏的标签之后创建的。我相信删除提到的定位代码和不正确的浮动的组合将解决您的问题。根据脚本分配给它的位置，它甚至可能`<ul>`不需要浮点数。

玩萤火虫，一开始你可能会抗拒，但对于任何使用 HTML 和 CSS 的人来说，它是必须的

# r - 每个值的累积计数

> ID：10029235
> 
> 赞同：32
> 
> 时间：2012-04-05T13:09:25.237
> 
> 标签：r, count, cumulative-sum

我想创建每个值出现次数的累积计数器。

例如说我有专栏：

```
id  
1  
2  
3  
2  
2  
1  
2  
3 
```

这将变成：

```
id   count  
1     1  
2     1  
3     1  
2     2  
2     3  
1     2  
2     4  
3     2 
```

ETC...

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-05T13:24:27.430

该`ave`函数按组计算一个函数。

```
> id <- c(1,2,3,2,2,1,2,3)
> data.frame(id,count=ave(id==id, id, FUN=cumsum))
  id count
1  1     1
2  2     1
3  3     1
4  2     2
5  2     3
6  1     2
7  2     4
8  3     2 
```

我`id==id`用来创建所有`TRUE`值的向量，当传递给`cumsum`. 你可以`id==id`用`rep(1,length(id))`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-05T13:18:15.760

这是一种获取计数的方法：

```
id <- c(1,2,3,2,2,1,2,3)

sapply(1:length(id),function(i)sum(id[i]==id[1:i])) 
```

这给了你：

```
[1] 1 1 1 2 3 2 4 2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-22T16:56:40.420

`dplyr`方式：

```
library(dplyr)

foo <- data.frame(id=c(1, 2, 3, 2, 2, 1, 2, 3))
foo <- foo %>% group_by(id) %>% mutate(count=row_number())
foo

# A tibble: 8 x 2
# Groups:   id [3]
     id count
  <dbl> <int>
1     1     1
2     2     1
3     3     1
4     2     2
5     2     3
6     1     2
7     2     4
8     3     2 
```

最终按 分组`id`。如果您不希望它分组，请添加`%>% ungroup()`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-29T16:12:22.893

为了完整起见，添加一个 data.table 方式：

```
library(data.table)

DT <- data.table(id = c(1, 2, 3, 2, 2, 1, 2, 3))

DT[, count := seq(.N), by = id][] 
```

输出：

```
 id count
1:  1     1
2:  2     1
3:  3     1
4:  2     2
5:  2     3
6:  1     2
7:  2     4
8:  3     2 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-06T21:07:45.983

我拥有的数据框太大，接受的答案不断崩溃。这对我有用：

```
library(plyr)
df$ones <- 1
df <- ddply(df, .(id), transform, cumulative_count = cumsum(ones))
df$ones <- NULL 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-15T15:51:00.837

获取任何数组的累积计数的函数，包括非数字数组：

```
cumcount <- function(x){
  cumcount <- numeric(length(x))
  names(cumcount) <- x

  for(i in 1:length(x)){
    cumcount[i] <- sum(x[1:i]==x[i])
  }

  return(cumcount)
} 
```

# php - 使用 Symfony\Component\DependencyInjection 配置带有路径的 Silex 应用程序

> ID：10029237
> 
> 赞同：2
> 
> 时间：2012-04-05T13:09:29.543
> 
> 标签：php, symfony1, dependency-injection, silex

我目前正在重构一个`Silex\Application`比最初预期更大的。作为这项工作的一部分，我将服务定义从源移动到 services.yml 中，然后只调用 a `Symfony\Component\DependencyInjection\ContainerBuilder`。代码如下所示：

```
use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\DependencyInjection\Loader\YamlFileLoader;

$container = new ContainerBuilder();
$loader = new YamlFileLoader($container, new FileLocator(__DIR__));
$loader->load(__DIR__ . '/services.yml'); 
```

考虑以下代码行，它是创建的一部分`Doctrine\ORM\EntityManager`：

```
Setup::createAnnotationMetadataConfiguration(array("src/Project/Entity"), true); 
```

在我的 services.yml 中看起来像这样：

```
services:
    doctrine_config:
        class: Doctrine\ORM\Configuration
        factory_class: Doctrine\ORM\Tools\Setup
        factory_method: createAnnotationMetadataConfiguration
        arguments:
            - [src/Project/Entity]
            - true 
```

最后，我的问题。我想将键和值传递给容器构建器，我可以像参数一样访问它，例如，而不是`[src/Project/Entity]`作为 Doctrine-Setup 的第一个参数，我想做这样的事情：`[%ROOT_PATH%/src/Project/Entity]`，其中`%ROOT_PATH%`添加到 ContainerBuilder 有点像这样`$container->???('ROOT_PATH', dirname(__DIR__))`.

我在文档中没有找到类似的东西。我将通读 ContainerBuilder.php 以查看是否可以找到某些内容，但我不确定术语，例如`%OOT_PATH%`在我的场景中是否是变量、定义、别名......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:25:14.637

自己找到的。

就像添加一样简单：

```
$container->setParameter("ROOT_PATH", dirname(__DIR__)); 
```

在我上面的片段中。

# objective-c - 为货币格式自定义 UITextField 适用于 iOS 4.x，但在 iOS 5 中给出 null

> ID：10029246
> 
> 赞同：0
> 
> 时间：2012-04-05T13:10:07.530
> 
> 标签：objective-c, ios, ios5

我正在使用以下链接为本地货币符号和逗号自定义 UItextField：

[http://www.thepensiveprogrammer.com/2010/03/customizing-uitextfield-formatting-for.html](http://www.thepensiveprogrammer.com/2010/03/customizing-uitextfield-formatting-for.html)

```
NSNumber *actualNumber = [currencyFormatter numberFromString:[mstring
                                      stringByReplacingOccurrencesOfString:localeSeparator withString:@""]]; 
```

**在 iOS 5 中，这个实际数字始终为空，而在 iOS 4.x 中它工作正常**

我的代码为此目的的主要方法是：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if (textField.tag == 1)
    {
        if(true)
        {
            NSMutableString* mstring = [[textField text] mutableCopy];
            if([mstring length] == 0)
            {
                //special case...nothing in the field yet, so set a currency symbol first
                [mstring appendString:[[NSLocale currentLocale] objectForKey:NSLocaleCurrencySymbol]];

                //now append the replacement string
                [mstring appendString:string];
            }
            else
            {
                //adding a char or deleting?
                if([string length] > 0)
                {
                    [mstring insertString:string atIndex:range.location];
                }
                else 
                {
                    //delete case - the length of replacement string is zero for a delete
                    [mstring deleteCharactersInRange:range];
                }
            }

            NSString* localeSeparator = [[NSLocale currentLocale]
                                         objectForKey:NSLocaleGroupingSeparator];

            NSNumber *actualNumber = [currencyFormatter numberFromString:[mstring
                                                                    stringByReplacingOccurrencesOfString:localeSeparator
                                                                    withString:@""]];
            NSLog(@"%@",actualNumber);

            [textField setText:[currencyFormatter stringFromNumber:actualNumber]];

            [mstring release];
        }

        //always return no since we are manually changing the text field
        return NO; 
    }
    else
    {
        return YES;
    }
} 
```

这是初始化

```
NSLocale *paklocal = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_PAK"] autorelease];
currencyFormatter = [[NSNumberFormatter alloc] init];
[currencyFormatter setFormatterBehavior: NSNumberFormatterBehavior10_4];
[currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[currencyFormatter setMaximumFractionDigits:0];
[currencyFormatter setLocale:paklocal];

NSMutableCharacterSet *numberSet = [[NSCharacterSet decimalDigitCharacterSet] mutableCopy];
[numberSet formUnionWithCharacterSet:[NSCharacterSet whitespaceCharacterSet]];
nonNumberSet = [[numberSet invertedSet] retain];
[numberSet release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:27:53.240

我认为您遇到了问题，因为`textField:shouldChangeCharactersInRange:replacementString:`添加了 的货币符号`[NSLocale currentLocale]`，这可能与 . 使用的语言环境不同`currencyFormatter`。在我电脑上的模拟器中，它添加了 $（美元）符号 to `mstring`，这在逻辑上被currencyFormatter 拒绝了。

构建时`paklocal`，将其与 . 一起存储`currencyFormatter`并使用它来代替`[NSLocale currentLocale]`.

如果您对 有进一步的问题，请`currencyFormatter`使用`NSLog`显示您发送到其中的字符串。

# database - 填字游戏数据库

> ID：10029247
> 
> 赞同：1
> 
> 时间：2012-04-05T13:10:08.483
> 
> 标签：database, database-design

我想设计一个数据库来存储填字游戏，主要是我有2个表：问题表，网格表，

问题表（q_id, question , answer...） 网格表（g_id, name, ....）

当我将问题表与网格表联系起来时，我在想一个好方法，

Questions_Grid(q_id, g_id)，这对是主键，

我老板建议的另一个解决方案：Grids Table (g_id, q_ids, ....) q_ids 存储此网格中使用的问题的所有 id

哪一个更好？如果你有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:13:43.820

看起来您老板的建议是将问题 ID 列表存储为网格表中的文本列。如果我理解您的要求并且确实如此，那么第一个当然要好得多，因为它已标准化。在您的方案中，您可以进行许多有用的查询，这些查询在您老板的方案中可能会变得混乱或不可能（如果可能的话，速度会很慢）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:13:12.130

第一个选项更好，这样您的数据库架构不会限制每个网格的问题数量。一个经验法则是，当您必须更改架构以使应用程序扩展时，您还没有获得最佳架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:13:37.317

具有一对元组的链接表更加规范化。

```
Question_grid
-------------
q_id
g_id 
```

这将允许您对网格有尽可能多的问题，仅此而已。如果您尝试对列表进行硬编码，那么每个网格将需要相同数量的问题，或者会有空白或其他东西......不好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T13:14:59.617

那么规则是当你在“许多”（问题）关系上有一个“一个”（网格）时制作一个链接表。所以你的选择将是最好的答案，它是标准化的！

# ruby-on-rails-3 - 将 rspec 2 测试组织成 Rails 中的“单元”和“集成”类别

> ID：10029250
> 
> 赞同：13
> 
> 时间：2012-04-05T13:10:24.480
> 
> 标签：ruby-on-rails-3, testing, rspec2

如何将 rspec 2 测试组织成“单元”（快速）和“集成”（慢）类别？

*   我希望能够仅使用`rspec`命令运行所有单元测试，而不是“集成”测试。
*   我希望能够只运行“集成”测试。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-05T13:26:28.947

我们有相同性质的团体。然后我们在本地开发盒和 CI 上一一运行。

你可以简单地做

```
bundle exec rake spec:unit
bundle exec rake spec:integration
bundle exec rake spec:api 
```

这就是我们的 spec.rake 的样子

```
 namespace :spec do
    RSpec::Core::RakeTask.new(:unit) do |t|
      t.pattern = Dir['spec/*/**/*_spec.rb'].reject{ |f| f['/api/v1'] || f['/integration'] }
    end

    RSpec::Core::RakeTask.new(:api) do |t|
      t.pattern = "spec/*/{api/v1}*/**/*_spec.rb"
    end

    RSpec::Core::RakeTask.new(:integration) do |t|
      t.pattern = "spec/integration/**/*_spec.rb"
    end
  end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T13:18:53.453

一种方法是像这样标记您的 RSpec 测试用例：

```
it "should do some integration test", :integration => true do
  # something
end 
```

当您执行测试用例时，请使用：

```
rspec . --tag integration 
```

这将执行所有带有标签的测试用例`:integration => true`。有关更多信息，请参阅此[页面](https://www.relishapp.com/rspec/rspec-core/v/2-4/docs/command-line/tag-option)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-22T19:59:20.813

我必须按如下方式配置我的`unit`和测试：`feature`

```
require 'rspec/rails'

namespace :spec do
  RSpec::Core::RakeTask.new(:unit) do |t|
    t.pattern = Dir['spec/*/**/*_spec.rb'].reject{ |f| f['/features'] }
  end

  RSpec::Core::RakeTask.new(:feature) do |t|
    t.pattern = "spec/features/**/*_spec.rb"
  end
end 
```

必须在@KensoDev 给出的答案中添加`require 'rspec/rails'`和更改。`Rspec``RSpec`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T15:10:46.007

请注意[https://github.com/rspec/rspec-rails](https://github.com/rspec/rspec-rails)，他们告诉您将 gem 放在“group :development, :test”下，如下所示，

```
group :development, :test do
  gem 'rspec-rails', '~> 2.0'
end 
```

但是如果你只把它放在 :test group **only**下，

```
group :test do
  gem 'rspec-rails', '~> 2.0'
end 
```

那么你会得到上面的错误。

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-18T03:24:38.593

我建议使用`.rspec`文件来配置模式而不是使用`rake`，因为在使用 rake 时将标志传递给 RSpec 很棘手。

您可以在`.rspec`文件中读取环境变量：

```
<%= if ENV['TEST'] == 'integration' %>
--pattern spec/integration/**/*_spec.rb
<% else %>
<% ENV['TEST'] = 'unit' %>
--pattern spec/unit/**/*_spec.rb
<% end %> 
```

Then you can run `TEST=integration rspec` to run integration tests or just `rspec` to run unit tests. The advantage of this approach is that you can still pass flags to it like:

`TEST=integration rspec -t login -f doc`

# iphone - 通用应用的自定义视图

> ID：10029256
> 
> 赞同：0
> 
> 时间：2012-04-05T13:11:07.413
> 
> 标签：iphone, ipad, universal

我相信，这个问题是重复的，但我找不到它=(。如何创建自己的 UIView 类，它是从 (iPhone/iPad)*.xib 加载的

我正在尝试接下来的事情：

```
@interface CurtainView : UIView 
```

...

```
- (id)init {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
         self = [[[NSBundle mainBundle] loadNibNamed:@"CurtainView_iphone" owner:self options:nil] objectAtIndex:0];
        [self setFrame:CGRectMake(0, 0, 320, 460)];
    }
    else {                
        self = [[[NSBundle mainBundle] loadNibNamed:@"CurtainView_ipad" owner:self options:nil] objectAtIndex:0];
        [self setFrame:CGRectMake(0, 0, 768, 1004)];
    }
    return self;
}
- (void)drawRect:(CGRect)rect
{
    NSLog(@"there should be some animation on view appirance");

} 
```

和 ...

```
CurtainView* curtain = [[CurtainView alloc] init];
NSLog(@"before");
[self.view addSubview:curtain];
[curtain drawRect:CGRectMake(0, 0, 320, 460)]; 
```

但在这种情况下，我没有得到我期望的结果，并且 drawRect 没有调用。我希望有一种简单的方法可以为通用应用程序创建自定义视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:11:53.707

好的。对不起，我弄错了：

它需要使用：

```
[self addSubview:[[[NSBundle mainBundle] loadNibNamed:@"Curtain_iPhone" owner:self options:nil] objectAtIndex:0]]; 
```

而不是我的：

```
self = [[[NSBundle mainBundle] loadNibNamed:@"CurtainView_iphone" owner:self options:nil] objectAtIndex:0]; 
```

希望它对某人有所帮助。

此外，我不知道为什么，但视图的属性“不透明”应该在“init”方法中设置，而不仅仅是在 IB 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:43:13.317

将此代码放入 .h 文件中#import

```
@interface CurtainView : UIView

@end 
```

将此代码放在 .m 文件中

```
#import "CurtainView.h"

@implementation CurtainView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect{
   // Drawing code
   NSLog(@"there should be some animation on view appirance");
} 
```

现在将此 UIView 称为您的 viewcontroller 类。这将调用drawRect

```
CurtainView* curtain = [[CurtainView alloc] init];
NSLog(@"before");
[curtain drawRect:self.view.frame];
[self.view addSubview:curtain]; 
```

你可以调用你的视图控制器类

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
     self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
 } else {
     self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
 } 
```

# user-interface - 使用表单生成器好不好？

> ID：10029258
> 
> 赞同：0
> 
> 时间：2012-04-05T13:11:12.117
> 
> 标签：user-interface, wysiwyg, formbuilder

我已经从事 Web 开发/设计大约五年了，我正准备使用 Dreamweaver，因为我认为它会使制作网站变得更加容易。后来我听说不鼓励使用 WYSIWYG 编辑器来构建网站，因为它会将“不必要的代码”添加到您的项目中。然后我听说如果您尝试在 Dreamweaver 中编写脚本，它会搞砸。

现在我正在尝试进入软件开发领域。我已经下载了 Netbeans 来使用 Java，它提供了一些类似 .NET 的东西，我可以将控件拖到我的 GUI 上。我真正做的唯一编程就是让按钮做一些事情。我不认为自己学习了很多 Java 是我坚持这一点，但我不认为自己学习它反正...

我知道我不应该使用它来学习，但是我希望有软件开发经验的人发表意见。

使用表单构建器构建 GUI 是否比使用所见即所得编辑器构建网站更糟糕或更糟？这是学习如何编写软件的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:28:28.167

表单构建器和 WYSIWYSG 各有千秋。我想您会发现许多开发人员不使用它们，因为大多数开发人员都是控制狂。它还取决于您使用的特定环境和目标环境/语言。使用表单构建器还不错，但是 IMO 您应该在使用之前学习如何以编程方式创建 UI 元素，以便了解不同控件的属性和方法。此外，表单构建器仅对布局 UI 有用。大部分工作将是迎合 UI 逻辑的层。

使用它们并没有错，但您可能需要在代码中访问控件的属性或方法以促进表示逻辑，因此您仍然需要学习您使用的控件。

希望有帮助。

# makefile - makefile 上的行顺序

> ID：10029259
> 
> 赞同：0
> 
> 时间：2012-04-05T13:11:13.560
> 
> 标签：makefile, gnu-make

我有 main.cpp（包括 main 函数）和 func1.cpp，我想将这些文件与 makefile 链接。经典形式是：

```
main: main.o func1.o
    g++ main.o func1.o -o main
main.o: main.cpp
    g++ -c main.cpp
func1.o: func1.cpp
    g++ -c func1.cpp 
```

或者可以写

```
main: func1.o main.o 
    g++ main.o func1.o -o main
func1.o: func1.cpp
    g++ -c func1.cpp
main.o: main.cpp
    g++ -c main.cpp 
```

或者

```
main: main.o func1.o
    g++ main.o func1.o -o main
func1.o: func1.cpp
    g++ -c func1.cpp
main.o: main.cpp
    g++ -c main.cpp 
```

最后两个与经典的不同吗？一个比另一个有一些优势吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:21:02.987

不，*规则*的顺序只有在您输入时才会起作用`make`，在这种情况下，它可以选择第一条规则作为默认规则。

除此之外，`make`它足够智能，可以执行依赖规则，无论它们在文件中的什么位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:38:48.813

三组规则之间没有区别。但是，`make`知道如何将`.cpp`文件构建为目标文件，因此您真正需要的是：

```
main: main.o func1.o
        g++ main.o func1.o -o $@ 
```

# javascript - 如何使它像jquery？

> ID：10029264
> 
> 赞同：0
> 
> 时间：2012-04-05T13:11:36.793
> 
> 标签：javascript, underscore.js

我刚刚创建了一个像 underscoer.js 这样的小型 js 框架。方法调用由 执行`mc_.grep([1,2,3,4], function(val){ return val > 2; });`。我怎样才能让它更像 jQuery 风格`mc_(var).grep(func..).map(func..);`？有任何想法吗？还有我怎样才能让图书馆变得更好？

[https://github.com/awesomegamer/mc_-js-library](https://github.com/awesomegamer/mc_-js-library)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:14:09.973

如果您的意思是每次从必须返回的函数返回时都希望链接函数调用，则必须返回包装在框架核心的基本对象中的内容，以便您可以调用下一个方法返回的对象。

例如（这是非常基本的）`$('#someid')`调用由 jQuery 像这样返回

```
this.length = 1;
    this[0] = elem;
}

this.context = document;
this.selector = selector;
return this; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:17:59.213

```
// Your function should return a wrapped object
function Wrap(list) {
    return Object.create(Wrap).constructor(list)
}

// set the list as an internal property
Wrap.constructor = function (list) {
    this._list = list
    return this
}

// map function works in one of two ways, if it has an internal _list property
// then it was called as Wrap(list).map(...)
// then call the map function on it with the arguments
// store the result as a new list as _list
// return this so you can chain
//
// If it's not then it was used as Wrap.map(list, ...)
// extract the arguments using [].slice(arguments, 1)
// then return the result of invoking it
Wrap.map = function (list) {
    if (this._list) {
        this._list = this._list.map.apply(this._list, arguments)
        return this
    } else {
        return list.map.apply(list, [].slice.call(arguments, 1))
    }
}

// Wrappers need an unwrap method
// Wrap(list).map(...).filter(...).reduce(...).get()
Wrap.get = function () { 
    return this._list
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:06:45.880

维基百科上有一篇很好的文章，叫做[“方法链”](http://en.wikipedia.org/wiki/Method_chaining)。

一个*过度简化*的链接示例，也可用作[工作 jsfiddle](http://jsfiddle.net/RPjxR/)（只需打开控制台`F12`以查看结果）如下：

```
var a = {
    b: function () {
        console.log('b');
        // Make method chainable:
        return this;
    },
    c: function () {
        console.log('c');
        // Make method chainable:
        return this;
    }
};

// Now you can do:
a.b().c();​ 
```

我建议看一下带[注释的 underscore.js 源代码，](http://documentcloud.github.com/underscore/docs/underscore.html)以避免*“哦该死，我花了这么多时间重新发明轮子”*的感觉。

怎么提高？我只知道一种方法：让它有用。

# ios5 - 为 Snow Leopard 安装 Xcode 4.2 失败

> ID：10029270
> 
> 赞同：9
> 
> 时间：2012-04-05T13:11:53.240
> 
> 标签：ios5, installation, xcode4.2

我已经从官方网站下载了 Xcode 4.2。当安装开始时 - 它显示一个错误：

![在此处输入图像描述](../Images/86d1b8aff004ab9aaafc897c304cd2c6.png)

不是很丰富..有什么问题？在哪里看日志什么的？

PS.我有：Mac OS 10.6.8，Xcode 4.0，~10 GB 可用空间。我只想在 ios5 上测试我的应用程序。

**更新：**

```
Installer[51580]: Failed install preflight: Error Domain=PKInstallErrorDomain Code=102 UserInfo=0x119de62e0 "The package “OpenGLApps.pkg” is untrusted." Underlying Error=(Error Domain=NSOSStatusErrorDomain Code=-2147409654 UserInfo=0x119df06b0 "The operation couldn’t be completed. CSSMERR_TP_CERT_EXPIRED") 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-12T20:46:53.843

您可以尝试将系统日期更改为 2012 年 3 月 26 日之前的日期。有关详细信息，请查看[https://apple.stackexchange.com/questions/45841/xcode-4-2-snow-leopard-doesnt-install](https://apple.stackexchange.com/questions/45841/xcode-4-2-snow-leopard-doesnt-install)

# coldfusion - 从客户端检索通用访问卡 (CAC) 信息

> ID：10029274
> 
> 赞同：1
> 
> 时间：2012-04-05T13:12:18.590
> 
> 标签：coldfusion, coldfusion-9

所以我找到了一些代码

```
<cfset x509 = GetPageContext().getRequest().getAttribute("javax.servlet.request.X509Certificate") />

<cfoutput>not before = #x509[1].getNotBefore()#</cfoutput><br/>
<cfoutput>not after = #x509[1].getNotAfter()#<br></cfoutput>
<cfoutput>#ToBase64(x509[1].getEncoded())#<br></cfoutput>
<cfoutput>#x509[1].getIssuerDN()#<br></cfoutput>
<cfoutput>#x509[1].getIssuerX500Principal()#<br></cfoutput> 
```

我想要这段代码做的是显示来自 CAC 的信息，而不是我得到一个错误`Variable X509 is undefined`......

**编辑**

似乎可以使用另一种解决方案，`CGI.CERT_SUBJECT`但是我不确定如何使该变量成为空字符串以外的任何内容。FWIW 我试图让它在独立的冷融合服务器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:42:15.173

getAttribute() 方法在找不到属性时返回一个 NULL 变量，这就是在这种情况下发生的情况。您必须先查看它是否已定义，然后才能显示它。

```
<cfif StructKeyExists( variables, "x509" )>
     { Code }
</cfif> 
```

关于如何获得你所追求的属性，我无法告诉你，但这将防止错误发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:34:58.060

根据您的 Web 服务器（如果您设置 Apache，我知道 Apache 会这样做`SSLOptions +StdEnvVars +ExportCertData`），您可以获得 PEM 编码的证书作为环境变量（即，`cgi.ssl_client_cert`），您还可以获得其他信息（DN、颁发者的 DN 等）。[这是](http://httpd.apache.org/docs/2.0/mod/mod_ssl.html)环境变量的列表。

# javascript - 如何在 Javascript 中更改 DropDownList Selected 值？

> ID：10029276
> 
> 赞同：14
> 
> 时间：2012-04-05T13:12:29.943
> 
> 标签：javascript

如何更改 javascript 中的选定值并在代码隐藏页面中获取选定值？AutoPostBack 设置为 false。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-05T13:22:01.257

您可以像这样更改它：

```
var ddl = document.getElementById('ddl-id');
var opts = ddl.options.length;
for (var i=0; i<opts; i++){
    if (ddl.options[i].value == "some-value"){
        ddl.options[i].selected = true;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-05T13:17:52.220

```
//setting the value of a drop down list
document.getElementById('my_drop_down').selectedIndex=2; 
```

# php - 如何使我的变量对数据库插入安全？

> ID：10029281
> 
> 赞同：0
> 
> 时间：2012-04-05T13:12:48.830
> 
> 标签：php, content-management-system

我有一个变量，我需要在插入数据库之前删除符号，有什么想法可以将 mysql_real_escape_string() 函数添加到现有代码中吗？

表单页面

此页面是显示数据库内容的基本 html 表单。

```
<?php 
 $query = sprintf( "SELECT * FROM sitecontent WHERE ID = $_GET[id]");
$result = mysql_query($query) or die (mysql_error());
$post = mysql_fetch_array($result);

   ?>

       <form action="editp.php" method="POST" name="editform">
    <label for="pName" style="padding:10px; ">Post Title</label>
    <input type="text" name="pName" style=" width:550px;border:#000099; margin:10px;"   value="<?php echo $post['Post_Title']; ?>"/>
    <label for="pCategory" style="padding:10px; ">Category</label>
    <input type="text" name="pCategory" style=" width:50px;border:#000099; margin:10px;" value="<?php echo $post['Post_Year']; ?>"/>
    <label for="pItem" style="padding:10px;">Item Type</label>
   <select name="pItem" style="border:#000099; margin:10px;">
    <option value="1">News</option>
   <option value="2">Review</option>
 </select>
 <label for="pName" style="padding:10px;">Article ID</label>
      <input type="text" name="pID" style="border:#000099; margin:10px;" value="<?php echo $post['ID']; ?>"/>
  <label for="pName" style="padding:10px;">Post Date</label>
   <input type="text"  name="pDate" style="border:#000099; margin:10px;" value="<?php echo $post['Date']; ?>">
   <label for="pName" style="padding:10px;">Post Author</label>
 <input type="text" name="pAuthor" style="border:#000099; margin:10px;" value="<?php echo $post['Post_Author']; ?>"/>
   <label for="pName" style="padding:10px;">Home Page</label>
  <select name="Page" style="border:#000099; margin:10px;">
  <option value="0">None</option>
  <option value="1">Home</option>
 </select>
 <label for="pPriority" style="padding:10px;">Home Priority</label>
   <select name="pPriority" style="border:#000099; margin:10px;">
 <option value="0">None</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  </select>
    <label for="pName" style="padding:10px;">Post Content</label>
  <textarea style="width:550px; height:200px;border:#000099; margin:10px;" type="text" name="pContent" id="pContent" value="<?php echo $post['Post_Content']; ?>"><?php echo $post['Post_Content']; ?></textarea>
    <span id="btnStrong" style="  padding: 2px 8px;background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer;">Bold</span> &nbsp; <span id="btnItalic" style=" padding: 2px 8px; background-color:#C00;font-family:'Trebuchet MS', Arial, Helvetica, sans-serif; color:#FFF; cursor:pointer;">Italic</span>
   <label for="pImage_Name" style="padding:10px;">Image Name</label>
   <input type="text" name="pImage_Name" style="border:#000099; margin:10px; width:550px;" value="<?php echo $post['Image_Name']; ?>"/>
   <label for="pApproval" style="padding:10px;">Approval</label>
   <select name="pApproval" style="border:#000099; margin:10px;">
  <option value="0">Pending</option>
  <option value="1">Approved</option>
  </select>
   <input type="hidden" name="id" value="<?php echo $_GET['id']; ?>"/>
     <span style="margin-left:10px;">Please check the changes above before submitting</span>                <br/>
   <input type="submit" name="go" value="Submit Changes" style=" padding: 2px 8px;background-color:#C00; color:#FFF; margin:10px;"/>
   </form>

   <?php
$updateq = "UPDATE sitecontent WHERE ID = '$_POST[id]'";
   ?> 
```

更新页面

这是将内容从表单写入数据库的页面。

```
 <?php
 include'includes/connection.php';
 $pName = $_POST['pName'];
 $pItem = $_POST['pItem'];
 $pCategory = $_POST['pCategory'];
 $pDate = $_POST['pDate'];
 $pAuthor = $_POST['pAuthor'];
 $pContent = $_POST['pContent'];
 $Page = $_POST['Page'];
 $id = $_POST['id'];
 $pApproval = $_POST['pApproval'];
 $pPriority = $_POST['pPriority'];
 $pImage_Name = $_POST['pImage_Name'];

 $updateq = "UPDATE sitecontent SET ID = '$pID', Post_Title = '$pName', Post_Year =      '$pCategory', Date = '$pDate', Post_Author = '$pAuthor', Post_Content = '$pContent', Page =      '$Page', Post_Approval = '$pApproval', Priority = '$pPriority', Image_Name = '$pImage_Name'      WHERE ID = '$_POST[id]'";

 $result = mysql_query($updateq) or die (mysql_error());
 header("Location:admin.php");

 ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:13:58.157

对于字符串，只需说：

```
$pName = mysql_real_escape_string($_POST['pName']); 
```

对于整数：

```
$id = intval($_POST['id']); 
```

这里的所有都是它的; 只需为所有变量执行此操作

**编辑**
无论如何，我建议您改用 PDO，这样可以更好地防止 sql 注入！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:23:23.390

哎哟! 不要那样做！

```
 $updateq = "UPDATE sitecontent SET ID = '$pID', ... WHERE ID = '$_POST[id]'";

 $result = mysql_query($updateq) or die (mysql_error()); 
```

如果我发这个怎么办？

```
 id=1%37%3B%20delete%20from%20sitecontent%20where%20%37%37%3D%37 
```

这将使您的查询看起来像：

```
 $updateq = "UPDATE sitecontent SET ID = '$pID', ... WHERE ID = '1'; delete from sitecontent where ''=''"; 
```

这称为 SQL 注入。请使用数据库查询占位符！

即使数据库驱动程序不允许每个查询有多个语句，您仍然可以更改其他人的记录！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:38:53.737

您也可以尝试使用简单的过滤器`foreach`

```
foreach($_POST as $key => $value)
{
    $value = filter_var($value, FILTER_SANITIZE_STRING);
    $value = mysql_real_escape_string($value);
    $_POST[$key] = $value ;
} 
```

# iphone - 添加到主屏幕 - 图标上没有反光

> ID：10029290
> 
> 赞同：4
> 
> 时间：2012-04-05T13:13:16.640
> 
> 标签：iphone, ios, html

> **可能重复：**
> [没有眩光的 iOS Web 应用程序图标](https://stackoverflow.com/questions/5719723/ios-web-app-icon-without-glare)

我正在开发一个移动网络应用程序。

在 iOS 上，您“添加到主屏幕”iOS 会在您预定义的图标上添加反射光。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T14:14:26.530

根据以下链接... [删除 Web 应用程序图标上的默认光泽](http://www.ifans.com/forums/threads/removing-default-gloss-on-a-webapp-icon.211420/)

在链接标签中，您必须将`rel`值设置为`"apple-touch-icon-precomposed"`。

# jquery - 仅使用 jQuery 的十进制数字文本框

> ID：10029291
> 
> 赞同：0
> 
> 时间：2012-04-05T13:13:27.513
> 
> 标签：jquery

我有以下 jQuery 函数来使文本框只接受十进制数字，但问题是它不接受`.`，所以它只作为整数文本框工作，

我不想使用任何插件

这是jQuery函数：

```
$(document).ready(function () {
    $("#textbox1").keydown(function(event)
    {
        if (event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 ||
        (event.keyCode == 65 && event.ctrlKey === true))
        {
            return;
        }
        else if(event.keyCode == 46)
        {
            return;
        }
        else 
        {
            if ((event.keyCode < 48 || event.keyCode > 57) && 
                (event.keyCode < 96 || event.keyCode > 105 ))
            {
                event.preventDefault(); 
            }   
        }        
    });
});​ 
```

[小提琴在这里](http://jsfiddle.net/VKrLx/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:37:49.467

那么`4.5.2`呢？

你的代码没有检查它！

`why`不使用正则表达式？

```
[0-9]+(\.[0-9][0-9]?)? 
```

只需检查比赛`blur` `event`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:59:14.150

```
$("#textbox1").keydown(function(e){
    var key = e.which;

    // backspace, tab, left arrow, up arrow, right arrow, down arrow, delete, numpad decimal pt, period, enter
    if (key != 8 && key != 9 && key != 37 && key != 38 && key != 39 && key != 40 && key != 46 && key != 110 && key != 190 && key != 13){
        if (key < 48){
            e.preventDefault();
        }
        else if (key > 57 && key < 96){
            e.preventDefault();
        }
        else if (key > 105) {
            e.preventDefault();
        }
    }
}); 
```

# ruby-on-rails - 使用 reset_session 与 session[:user_id] = nil 的权衡是什么？

> ID：10029301
> 
> 赞同：1
> 
> 时间：2012-04-05T13:14:01.897
> 
> 标签：ruby-on-rails

我试图了解销毁会话的最佳方法是什么。我想 reset_session 比仅仅清除用户 ala session[:user_id] = nil 更激烈。

但是在很多例子中，我看到了 session[:user_id] = nil 而不是 reset_session。为什么？我是否有理由不想完全破坏会话？

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:48:34.303

在某些情况下，您可能希望会话处于非活动状态，但仍存储在某处。例如，在我正在开发的应用程序中，我们为管理员显示最近活跃用户的列表。这些用户的会话在他们注销时会被停用 ( `session[:user_id] = nil`)，但我们会保留会话以查看最近活跃的用户。

# mysql - MySQL IFNULL“N/A”产生“在集合中找不到项目”错误

> ID：10029305
> 
> 赞同：3
> 
> 时间：2012-04-05T13:14:16.927
> 
> 标签：mysql, sql

我一直在使用 IFNULL 函数在我的 SQL 查询中将 NULL 值转换为零，如下所示：

```
SELECT IFNULL(mem.comment_count,0) FROM members... 
```

这工作正常。我现在正在尝试使用 IFNULL 函数将 NULL 值转换为字符串“N/A”，但我不断收到错误消息：“在与请求的名称或序号相对应的集合中找不到项目”：

```
SELECT IFNULL(mem.address2,'N/A') FROM members... 
```

我什至尝试使用 COALESCE 以防它是一个空字符串而不是 NULL：

```
SELECT COALESCE(NULLIF(mem.address2, ''), 'N/A') FROM members... 
```

但仍然抛出同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T13:18:27.143

您的查询很好，但您的代码可能正在寻找列名？尝试别名：

```
SELECT IFNULL(mem.address2,'N/A') AS address2 FROM members mem ... 
```

# java - 没有祖先的 Google App Engine HRD 查询

> ID：10029310
> 
> 赞同：5
> 
> 时间：2012-04-05T13:14:34.960
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我有一个用 Java 编写的 GAE 项目，我对 HRD 和一个我不知道如何解决的问题有一些想法。

基本上我的系统中有用户。用户由用户 ID、用户名、电子邮件和密码组成。每次创建新用户时，我都想检查是否存在具有相同用户 ID（不应该发生）、用户名或电子邮件的用户。

userid 是关键，所以我认为用这个做一个 get 将是一致的。但是，当我进行查询（并使用过滤器）以查找具有相同用户名或电子邮件的可能用户时，我无法确定结果是否一致。因此，如果有人在几秒钟前创建了具有相同用户名或电子邮件的用户，我的查询可能找不到它。我知道祖先是用来解决这个问题的，但是如果我没有用于查询的祖先怎么办？用户没有父母。

我很高兴听到您对此的想法，以及在这种情况下什么被认为是最佳实践。如果这改变了任何东西，我将使用 Objectify 进行 GAE。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T16:37:44.837

我不建议为您的用户实体使用电子邮件或任何其他自然键。用户更改他们的电子邮件地址，并且您不希望在有人更改他们的电子邮件时最终重写数据库中的所有外键引用。

以下是关于我如何解决此问题的简短说明：

[https://groups.google.com/d/msg/google-appengine/NdUAY0crVjg/3fJX3Gn3cOYJ](https://groups.google.com/d/msg/google-appengine/NdUAY0crVjg/3fJX3Gn3cOYJ)

创建一个单独的 EmailLookup 实体，其 @Id 是电子邮件地址的规范化形式（我只是将所有内容都小写 - 技术上不正确，但当用户不小心将 Joe@example.com 大写时会省去很多痛苦）。我的 EmailLookup 如下所示：

```
@Entity(name="Email")
public class EmailLookup {
    /** Use this method to normalize email addresses for lookup */
    public static String normalize(String email) {
        return email.toLowerCase();
    }

    @Id String email;
    @Index long personId;

    public EmailLookup(String email, long personId) {
        this.email = normalize(email);
        this.personId = personId;
    }
} 
```

我的用户实体中还有一个（未规范化的）电子邮件字段，我在发送出站电子邮件时使用它（保留大小写以防对某人很重要）。当有人使用特定电子邮件创建帐户时，我**在 XG 事务中**通过密钥加载/创建 EmailLookup 和用户实体。这保证了任何个人电子邮件地址都是唯一的。

相同的策略适用于任何其他类型的独特价值；facebook id、用户名等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:12:21.143

绕过 HRD[最终一致性](https://developers.google.com/appengine/docs/java/datastore/hr/)的一种方法是使用`get`而不是`query`. 为此，您需要生成自然 ID，例如生成包含您在请求中收到的数据的 ID：电子邮件和用户名。

由于`get`在 HRD 中具有强一致性，您将能够可靠地检查用户是否已经存在。

例如，一个可读的自然 ID 将是：

```
String naturalUserId = userEmail + "-" + userName; 
```

注意：实际上电子邮件是独一无二的。因此，这本身就是一个很好的自然 ID。无需向其添加虚构的用户名。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T14:58:13.497

您还可以启用跨组事务（请参阅[https://developers.google.com/appengine/docs/java/datastore/overview#Cross_Group_Transactions](https://developers.google.com/appengine/docs/java/datastore/overview#Cross_Group_Transactions)），然后在一个事务中查找用户并创建一个新用户，如果有帮助的话.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-05T18:02:04.297

除非您有其他用途，否则建议避免使用索引字段和查询。这是我之前（Python）使用 key_name 所做的（因为实体 ID 需要是整数）。易于将 key_name 或 id 用于需要链接到用户的其他实体：

```
username = self.request.get('username')
usernameLower = username.lower()
rec = user.get_by_key_name(usernameLower)
if rec is None:
    U = user(
        key_name = usernameLower,
        username = username,
        etc...)
    U.put()
else:
    self.response.out.write(yourMessageHere) 
```

# css - IE中的透明div

> ID：10029314
> 
> 赞同：0
> 
> 时间：2012-04-05T13:14:42.673
> 
> 标签：css, internet-explorer, html, transparent

如何在 IE > 7 中显示具有 alpha 背景的 div。

我有所有浏览器的这个 css 代码

```
background-color: rgba(102, 102, 102, 0.30); 
```

但它在 IE 7,8 中不起作用。实际上，不要在 9 或 10 中测试它。

有人知道如何使它工作，它是在图像上放置一个透明的 div

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:16:55.153

我发现不透明度的最佳跨浏览器选项是使用 30% 透明 png 作为顶部 div 的背景

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:43:01.917

您可以仅为背景创建另一个 div（与您的 div 大小相同，位置 abolute 等），然后将其设置为颜色 + 跨浏览器透明度，例如 `.transparent { filter:alpha(opacity=30); -moz-opacity: 0.3; opacity: 0.3; }`

# android - Android快速切换到已知wifi网络

> ID：10029328
> 
> 赞同：2
> 
> 时间：2012-04-05T13:15:21.747
> 
> 标签：android, networking, wifimanager

我正在尝试编写一些代码来断开当前的 wifi 网络（如果有）并重新连接到具有已知 SSID 的特定 wifi 网络。

我一直在关注这里使用的代码；[如何以编程方式连接到 Android 中的特定 Wi-Fi 网络？](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)

这有效，但连接需要几秒钟，最多约 10 秒。

具体来说，我使用的代码如下；

```
WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
WifiConfiguration config; 
```

我获取配置，是否通过创建一个新配置并将 SSID 和 KeyMgmt 设置为 NONE 然后添加它；

```
wifiManager.add(config); 
```

或者通过获取已经存在的配置；

```
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
    if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
         config = i;
         break;
    }           
 } 
```

然后我打电话；

```
wifiManager.disconnect();
wifiManager.enableNetwork(i.networkId, true);
wifiManager.reconnect(); 
```

我收到了一个检查 wifi 状态的广播，当我连接到正确的 SSID 时，我可以继续，但是，这个过程最多需要 10 秒，我如何设置配置或 wifimanager 以更快地连接到这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:40:47.777

我认为这段代码对你有帮助..

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.network_test);
    context = this;
    mUpdate = new UpdateTimeTask();
    mHandler = new Handler();
    mHandler.post(mUpdate);
    }
public Boolean isNetAvailable(Context con) {
    try{
        connectivityManager = (ConnectivityManager) con.getSystemService(Context.CONNECTIVITY_SERVICE);
        wifiInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        mobileInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if(wifiInfo.isConnected() || mobileInfo.isConnected()) {
            return true;
            }
        }catch(Exception e){
            e.printStackTrace();
            }
    return false;
    }
private class UpdateTimeTask implements Runnable{

    public void run() {
        boolean net = isNetAvailable(context);

        if(net != false) {
        Toast.makeText(getBaseContext(), "network Available", Toast.LENGTH_SHORT).show();
        }
        else
        {
            Toast.makeText(getBaseContext(), "network Not Available", Toast.LENGTH_SHORT).show();
        }
        mHandler.postDelayed(mUpdate, 30000);
    }
} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-24T06:33:15.643

您是否尝试过添加`startScan()`到您的例程以在您希望连接时强制立即重新扫描可用网络？我想用 alarmManager 或类似的东西反复强制执行该命令是可能的，但我认为这可能会对性能/电池产生昂贵的影响。如果你有一个特定的触发器，它可能是一个解决方案。

见这里：http: [//developer.android.com/reference/android/net/wifi/WifiManager.html#startScan()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#startScan())

# wpf - wpf ListBox Binding ObservableCollection 显示数据都搞砸了

> ID：10029330
> 
> 赞同：0
> 
> 时间：2012-04-05T13:15:29.453
> 
> 标签：wpf, binding, listbox, observablecollection

我正在开发一个 Windows 小工具，它将显示来自 sharepoint 的列表，我背后的代码运行良好，并从 sharepoint 收集数据。并且我的 xaml 代码应该在列表框中显示列表，但我绑定它的方式显示数据是逐行显示的，并且只是第一项。不知道为什么。

这是我的 xml 代码

```
<Page x:Class="TipsList.Page1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Page1" Height="350" Width="525">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <ListBox Name="ListboxTips" Width="Auto" ItemsSource="{Binding StateTitle}" />
        <StackPanel Grid.Column="1">
            <Button Click="OnLoad">_Load</Button>

        </StackPanel>
    </Grid>

</Page> 
```

这是我背后的代码：

```
 //The  Url
        siteUrl = "http://site/SandBox";
        //The Site Context using ClientContext class
        //This will create a Client connection to Web Application
        clientContext = new SPSClient.ClientContext(siteUrl);

        //The Web Site to Open

        clientWeb = clientContext.Web;

        var salesInfoList = clientContext.Web.Lists.GetByTitle("Tips");

        //Define the CAMLQuery this will be used to Query to the List

        SPSClient.CamlQuery Query = new SPSClient.CamlQuery();

        SPSClient.ListItemCollection listData = salesInfoList.GetItems(Query);

        //Now Execute the Query

        var queryResultSaleListItems = clientContext.LoadQuery(listData);

        clientContext.ExecuteQuery();

        //Read the Data into the Object

        var TipsList = from Sales in queryResultSaleListItems
                        select Sales;
        ObservableCollection<Tips> colTips = new ObservableCollection<Tips>();
        //Read Every List Item and Display Data into the DataGrid
        foreach (SPSClient.ListItem item in TipsList)
        {

            var tips = new Tips();
            tips.StateTitle = item.FieldValues.Values.ElementAt(2).ToString();
            tips.ProductName = item.FieldValues.Values.ElementAt(4).ToString();
            tips.Quantity = item.FieldValues.Values.ElementAt(5).ToString();

            colTips.Add(tips);
        }
        ListboxTips.DataContext = colTips;
    }
    catch (Exception ex)
    {
        // Log error (including InnerExceptions!)
        // Handle exception
    }

} 
```

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:24:06.340

在您的 xaml 代码中，更改

```
<ListBox Name="ListboxTips" Width="Auto" ItemsSource="{Binding StateTitle}" /> 
```

至

```
<ListBox Name="ListboxTips" Width="Auto" ItemsSource="{Binding}">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <Grid>
        <TextBlock Text="{Binding Path=StateTitle}"/>
      </Grid>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:39:51.633

短一点

```
 <ListBox Name="ListboxTips" Width="Auto" ItemsSource="{Binding ColTips}" DisplayMemeberPath=StateTitle /> 
```

如果您已经将上下文设置为 ColTips 那么您不需要 ItemsSource

# flash - 将闪存“复选框”数据存储到本地文本文件

> ID：10029331
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:15:31.883
> 
> 标签：flash, actionscript-2

有人可以帮助我或告诉我这是否可能。我想在 Flash (AS2) 中制作一个简单的复选框问卷，当用户提交表单时，它将数据存储到本地文本文件中。如此简单的东西，比如你是男性还是女性等等......闪存是否可以将这些信息存储在某个地方。它适用于展览空间中的触摸屏，因此不会在线。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:49:22.333

首先将您的选择按钮存储到一个变量中，然后将您的答案转换为 toString()

```
var myVariable = whatever.toString();

function Writefile(event:MouseEvent) {
var file:FileReference = new FileReference();
var bytes:ByteArray = new ByteArray();
bytes.writeUTFBytes(myVariable);
file.save(bytes,"test.txt");//can be whatever.txt,php,hello just open in txtEditor
}

SaveBTN.addEventListener(MouseEvent.CLICK,Writefile ); 
```

添加一个按钮到舞台或一个更新事件，这应该可以帮助你

# objective-c - 在 Interface Builder 中为通用应用程序创建单个 .xib？(iOS)

> ID：10029332
> 
> 赞同：7
> 
> 时间：2012-04-05T13:15:32.103
> 
> 标签：objective-c, ios, xcode, interface-builder, universal

如果这是一个愚蠢的问题，我深表歉意，但我已经做了一些谷歌搜索和搜索，但没有找到任何人问这个确切的问题。

我从事 iOS 开发已经有一段时间了，但我对 Interface Builder 完全陌生。我想知道的是：有没有办法只创建一个 .xib 文件，然后在通用应用程序中将它用于 iPhone 和 iPad？

对我来说必须单独创建它们似乎很愚蠢。当我可以在代码中做一次（对屏幕大小进行细微调整）时，为什么要在 Interface Builder 中多次放置一些东西？

如果我在这里遗漏/误解了某些东西，请告诉我。就像我说的，我是一个完整的 Interface Builder 新手 :)

编辑：我过去曾向 App Store 提交过非界面构建游戏，其中 iPhone 和 iPad 版本是相同的，所以我不关心在每台设备上使游戏外观/感觉不同。我打算让它们看起来完全一样，除了由于纵横比的不同而导致的一些轻微的定位变化。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T15:18:35.227

如果您知道结果视图会是什么样子，基于自动调整大小，您确实可以只使用一个`.xib`. 如果视图只是某种共享组件，可以根据需要自动调整大小，则可能会派上用场。但是，如果您需要让 iPad 上的视图看起来与 iPhone 上的完全不同，只需使用两个`.xib`s。然后可以根据需要加载适当的，例如在实例初始化程序中，比如这个控制器的 -init：

```
- (id)init
{
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
    {
         self = [super initWithNibName:@"YourNibForPad" bundle:nil];
    }
    else
    {
         self = [super initWithNibName:@"YourNibForPhone" bundle:nil];
    }
    if (self) { /* initialize other ivars */ }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:43:50.987

XIBs 是单独文件的主要原因是因为 Apple 认为为 iPhone/iPod touch 和 iPad 设计的 UI 应该分别针对每一个进行定制。这在他们的[*iOS App Programming Guide*](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)中得到了回应，其中说：

> 对于视图，主要修改是重新设计视图布局以支持更大的屏幕。简单地缩放现有视图可能有效，但通常不会产生最佳结果。您的新界面应该利用可用空间并在适当的情况下利用新的界面元素。这样做更有可能使用户感觉更自然的界面——而不仅仅是更大屏幕上的 iPhone 应用程序。

虽然为实际上是一个 UI 维护两个 XIB 可能需要一些时间，但我觉得这比使用一个 XIB 然后必须连接大部分 UI 元素以便在该 XIB 加载时以编程方式移动它们更简单。毕竟，至少有了两个 XIB，您就可以*看到*每个 UI 的样子，然后轻松地进行视觉更改。

顺便说一句，不要忘记 iOS 5 的故事板（[在此处阅读它们](http://developer.apple.com/library/ios/#documentation/General/Conceptual/Devpedia-CocoaApp/Storyboard.html)），它使管理视图/视图控制器层次结构变得更加简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-22T09:51:22.950

尝试命名它们

`MyCell.xib`和`MyCell ~ ipad.xib`

然后：

```
[self.tableView registerNib: @"MyCell" forCellReuseIdentifier: @"MyUniqueIdentifier"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:44:37.937

如果您使用 IB，则需要为 iPhone 和 iPad 创建 2 个单独的 xib 文件。您需要一个单独的 iPad xib 以使您的应用程序符合 Apple iPad UI 指南。

# ruby - 红宝石 Rspec。获取所有测试列表

> ID：10029334
> 
> 赞同：12
> 
> 时间：2012-04-05T13:15:36.073
> 
> 标签：ruby, rspec

我对 Rspec 进行了一些测试，如下所示：

```
describe "description" do

before :each do
  do_before()
end

it "something_1" do
  ...
end

it "something_2" do
  ...
end

end 
```

我知道我可以通过使用获取当前测试的名称（“ **something_1** ”）

```
example.description 
```

有没有办法获得`before :each`区域内所有描述的数组？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-09-30T16:29:01.857

```
rspec -f d --color --dry-run filename 
```

在 rspec 3.5.2 中为我工作，列出所有测试而不运行它们

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-05T13:54:06.930

曾经有一种方法可以使用标签 --dry-run 来执行此操作，但该方法已被删除并且不再有效。

您可以使用用于格式 = 文档的 -fd。这将向您显示您已完成的所有规格及其外观的长列表。但是，它仍然会运行测试并显示您在此过程中遇到的任何错误。也就是说，它仍然是列出所有测试的好方法。

# jasmine - Jasmine loadFixtures 没有定义？

> ID：10029335
> 
> 赞同：1
> 
> 时间：2012-04-05T13:15:40.443
> 
> 标签：jasmine

[我按照 > http://railscasts.com/episodes/261-testing-javascript-with-jasmine](http://railscasts.com/episodes/261-testing-javascript-with-jasmine) <上的教程进行操作。但我收到错误消息 -> ReferenceError: loadFixtures is not defined in spec/credit_card_spec.js">http://localhost:8888/ **spec** /credit_card_spec.js 。

我现在不知道如何解决这些问题。谁能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T09:16:31.260

在我的情况下，测试帮助文件 helpers/jasmine-jquery-1.3.1.js 不包含某些功能，所以我再次下载它并且我可以工作。

别忘了，你还需要一个 jQuery 帮助文件。

# database - 为库存管理程序创建一个“篮子”？

> ID：10029339
> 
> 赞同：1
> 
> 时间：2012-04-05T13:15:58.750
> 
> 标签：database, database-design, ms-access, relational-database

当您在线购买商品时，您将它们添加到您的购物篮中，当您将商品添加到您的购物篮后，您创建了一个订单。从本质上讲，我正在尝试考虑允许将多个项目放入一个订单中的最佳方法。这更像是不知道如何将数据存储在 Access 中的数据库中的情况。我不知道应该调用什么字段。我目前的尝试是这样的：

```
tblOrders
OrderID (Primary Key)
CustomerID (Foreign Key)
OrderDetailsID

tblOrderDetails
OrderDetailsID
PartID (Foreign Key)
Quantity 
```

[这](http://bit.ly/HoRJfU)是带有示例数据的第一个表的图像，[这](http://bit.ly/HoRX6I)是第二个表的示例。我很可能错过了一些非常明显的东西。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:18:18.400

我会这样构造它：

```
OrderHeader
  ID (Primary Key)
  CustomerID (Foreign Key)

OrderDetail
  ID (Primary Key)
  OrderHeaderID (Foreign Key)
  PartID (Foreign Key)
  Quantity 
```

*   阅读[*匈牙利符号*](http://en.wikipedia.org/wiki/Hungarian_notation)作为命名约定，并考虑删除您的`tbl`前缀。这只是您可以选择忽略的偏好。
*   `OrderDetailID`on`OrderHeader`将不起作用，因为您将无法`1:M`在订单可以有多个明细行的情况下生成必要的关系。
*   为您的主键使用代理`ID`字段。他们使工作`JOIN`变得更容易。如果您想强制一个订单只能使用**一次**的条件，那么您应该对列`OrderHeaderID`和使用唯一的数据库约束来执行此操作`PartID`。

这是您的评论的示例查询...

```
SELECT H.ID OrderID, D.PartID, D.Quantity
FROM OrderHeader AS H INNER JOIN
     OrderDetail AS D ON H.ID = D.OrderHeaderID
WHERE H.ID = 1234; 
```

# numbers - 如何从 Mathematica 中 FoldList 创建的表中选择最后一列数字

> ID：10029340
> 
> 赞同：0
> 
> 时间：2012-04-05T13:15:58.970
> 
> 标签：numbers, wolfram-mathematica, histogram

我是 Mathematica 的新手，我在一件事上遇到了困难。我有这个表，它生成 10 000 乘以 13 个数字（12 个数字 + 1 是一个起始数字）。我需要从所有 10 000 个第 13 个数字中创建一个直方图。我希望它很清楚，很难解释。

这是表格：

```
F = Table[(Xi = RandomVariate[NormalDistribution[], 12];
Mu = -0.00644131;
Sigma = 0.0562005;
t = 1/12; s = 0.6416;
FoldList[(#1*Exp[(Mu - Sigma^2/2)*t + Sigma*Sqrt[t]*#2]) &, s, 
Xi]), {SeedRandom[2]; 10000}] 
```

以下直方图的结果可能是一个表格，它将所有第 13 个数字放到一个表格中 - 比创建直方图非常容易。也许用“选择”？或者，也许您知道解决此问题的其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T00:53:40.327

您可以使用`Part`或（取决于您需要的部分）一些更专业的命令来访问列表的不同部分，例如、`First`和（您需要的那个）。如评论中所述，或将正常工作。`Rest``Most``Last``Histogram[Last/@F]``Histogram[F[[All,-1]]]`

尽管这不是您问题的一部分，但我想指出您可以针对您的特定问题做的一些事情，这将大大加快它的速度。您正在定义`Mu`等`Sigma`10,000 次，因为它们在`Table`命令中。您还要重新计算`Mu - Sigma^2/2)*t + Sigma*Sqrt[t]`120,000 次，即使它是一个常数，因为您将它`FoldList`放在`Table`.

在我的机器上：

```
F = Table[(Xi = RandomVariate[NormalDistribution[], 12];
     Mu = -0.00644131;
     Sigma = 0.0562005;
     t = 1/12; s = 0.6416;
     FoldList[(#1*Exp[(Mu - Sigma^2/2)*t + Sigma*Sqrt[t]*#2]) &, s, 
      Xi]), {SeedRandom[2]; 10000}]; // Timing

 {4.19049, Null} 
```

这种替代方法*快十倍*：

```
F = Module[{Xi, beta}, With[{Mu = -0.00644131, Sigma = 0.0562005,
      t = 1/12, s = 0.6416},
     beta = (Mu - Sigma^2/2)*t + Sigma*Sqrt[t]; 
     Table[(Xi = RandomVariate[NormalDistribution[], 12];
       FoldList[(#1*Exp[beta*#2]) &, s, Xi]), {SeedRandom[2]; 
       10000}] ]]; // Timing

{0.403365, Null} 
```

我`With`用于局部常量以及在( )`Module`中重新定义的其他事物或基于局部常量 ( ) 的计算。[Mathematica StackExchange 上的这个问题](https://mathematica.stackexchange.com/q/559/8)将有助于解释何时使用vs vs 。（我鼓励您进一步探索 Mathematica StackExchange，因为现在大多数 Mathematica 专家都在这里闲逛。）`Table``Xi``beta``Module``Block``With`

对于您的特定代码，`Part`实际上并不需要使用。而不是使用`FoldList`，只是使用`Fold`。它只保留折叠中的最终数字，这与 的输出中的最后一个数字相同`FoldList`。所以你可以尝试：

```
FF = Module[{Xi, beta}, With[{Mu = -0.00644131, Sigma = 0.0562005,
      t = 1/12, s = 0.6416},
     beta = (Mu - Sigma^2/2)*t + Sigma*Sqrt[t]; 
     Table[(Xi = RandomVariate[NormalDistribution[], 12];
       Fold[(#1*Exp[beta*#2]) &, s, Xi]), {SeedRandom[2]; 
       10000}] ]];

Histogram[FF] 
```

以这种方式计算`FF`甚至比以前的版本快一点。在我的系统上`Timing`报告 0.377 秒 - 但与 0.4 秒的这种差异几乎不值得担心。

![在此处输入图像描述](../Images/5bdca2c85b3a415cce56a320e0404942.png)

因为您使用 设置种子`SeedRandom`，所以很容易验证所有三个代码示例是否产生完全相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:05:10.710

让我的评论成为答案： `Histogram[Last /@ F]`

# spring - 在 ManagedBean 中使用 spring 注入显示数据库中的数据表值

> ID：10029346
> 
> 赞同：0
> 
> 时间：2012-04-05T13:16:23.727
> 
> 标签：spring, jsf

JSF + Spring 遇到了这个设计问题：-

我在要加载的页面上有一个显示用户详细信息的数据表，该数据表将从数据库中获取。

所以我的jsf页面有：

```
 <p:dataTable id="userTable" var="user" value="#{userBean.users}" rowKey="#{user.userID}"
                                     selection="#{userBean.selectedUser}" paginator="true" rows="10" > 
```

托管 bean 具有：

```
private List<UserDetails> users; // getters and setters 
```

现在我的托管 bean 需要一个辅助类的 spring 注入来从数据库中获取用户。

```
@ManagedProperty(value="#{userBO}")
private UserBO userBO; 
```

问题是，当对象完全实例化时，会发生弹簧注入。所以我不能将 my`userBO.getUsersFromDataBase()`放在构造函数中并将其分配给 my`users`

我只是不知道如何在我的 managedBean 中使用弹簧注入从数据库中获取用户。Spring 需要完成 ManagedBean 的实例化，以便它可以注入帮助程序类，但是 jsf 页面在 ManagedBean 完全实例化之前很久就请求数据库值。有点卡住了：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:27:23.793

我不熟悉spring，但是在标准JSF中，您可以`@PostConstruct`在构造后和依赖注入后调用的方法上使用注释，例如：

```
@PostConstruct
public void init() {
    userBO.getUsersFromDataBase()
} 
```

# string - 如何在 Tcl 中将字符串转换/转换为布尔值？

> ID：10029349
> 
> 赞同：4
> 
> 时间：2012-04-05T13:16:30.263
> 
> 标签：string, casting, boolean, tcl

我期待

```
if {[some_func $some_args]} {
   ....
} 
```

评估 true 并在`some_func`返回一些字符串后立即工作。但是也有错误。

艰难地学习它，Tcl 只接受

*   空字符串-> False
*   0 -> 假
*   假 -> 假
*   真->真
*   1 -> 真

准确地说：

```
% expr 1
1
% expr 0
0
% expr
wrong # args: should be "expr arg ?arg ...?"
% expr {{}}
% expr true
true
% expr false
false
% expr True
syntax error in expression "True": variable references require preceding $
% expr False
syntax error in expression "False": variable references require preceding $ 
```

它似乎`expr`没有标准化它的返回值。如果给出空字符串，请特别注意空字符串结果。

那么如何轻松地将字符串转换为布尔值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:25:33.877

多想，多看几眼后，答案可能应该是：“视情况而定”

以我的 perl 背景，我期待类似于 perl 的东西。我的错。

在 Tcl`string is true`中似乎是官方的 cast 函数。用于强制转换的有效字符串在[此处定义](http://www.tcl.tk/man/tcl8.4/TclLib/GetInt.htm)：

> 如果 string 是 0、false、no 或 off 中的任何一个，则 Tcl_GetBoolean 将零值存储在 *boolPtr。如果 string 是 1、true、yes 或 on 中的任何一个，则 1 存储在 *boolPtr 中。这些值中的任何一个都可以缩写，也可以接受大写拼写

就我而言，我不关心字符串的内容，所以我可以

```
if {[string length [some_func $some_args]] > 0} {
  ...
} 
```

另一种写法也更简单：

```
if {[some_func $some_args] != {}} {
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T17:22:00.927

从用户的角度来看，Tcl 没有能力或不需要将值从一种类型“转换”到另一种类型。相反，一切都是字符串，你会问“这个值可以解释为一个吗？” 例如：

```
set value 1
string is boolean $value
> 1
string is integer $value
> 1

set value true
string is boolean $value
> 1
string is integer $value
> 0 
```

还有一些`[string is]`检查特定值的子命令，但这主要是为了方便。例如：

```
string is true $value
# effectively equivalent to
expr {[string is boolean $value] && $value} 
```

所以，话虽如此，如果我没记错的话，可以解释为真的字符串随着时间的推移而变化。我的建议是始终使用“true”或“false”，因为所有版本的 Tcl（我认为）都将它们识别为布尔值，并且它们准确地表示了它是布尔值的意图（我认为 1/0 不会这样做）。

如果你真正想做的是找出你是否有一个包含实际内容的字符串，那么只需使用：

```
if {[string length $value] > 0} { ....} 
```

如果你想要做的是模仿其他语言版本的真实性，那么我的建议是*不要那样做*。当然，你可以，通过

```
if { (![string is false $value]) && [string length $value] > 0 } { ... } 
```

但这可能不是正确的方法。

# php - php登录问题

> ID：10029352
> 
> 赞同：-6
> 
> 时间：2012-04-05T13:16:38.230
> 
> 标签：php

以下是我的php登录脚本，有一个问题。如果我输入任何密码，那么它不会验证密码，它会进入用户面板页面。我的代码哪里错了，谁能告诉我正确的方向

N:B: 我是 PHP 新手，也是这个网站的新手。

```
<?php
if(isset($_POST['action']) && isset($_POST['action']) == 'Log In')
{
$uname = mysql_real_escape_string(trim(htmlspecialchars($_POST['uname']))); 
$pass = mysql_real_escape_string(trim(htmlspecialchars($_POST['pass'])));   

$crytpass = hash('sha512','$pass'); 
$err = array();

include_once("toplevel/content/manage/dbcon/dbcon.php");

// check username 
$check_uname = mysql_query("SELECT uname FROM members WHERE uname = '$uname'");
$num_uname = mysql_num_rows($check_uname);

// check password
$check_pass = mysql_query("SELECT pass FROM members WHERE pass = '$crytpass'");
$num_pass = mysql_num_rows($check_pass);

/// userid

$userid = mysql_query("SELECT userid FROM members");    
$re = mysql_fetch_array($userid);
$userid = (int) $re['userid'];

if(isset($uname) && isset($pass))
{
    if(empty($uname) && empty($pass))   
        $err[] = "All field required";  
    else
    {
        // username validation process....

        if(empty($uname))
            $err[] = "Username required";
        else
        {
            if($num_uname == 0)         
            $err[] = "Username is not correct";
        }

        // password validaiton process...

        if(empty($pass))
            $err[] = "Password required";               
        else
        {
            if($num_pass == 0)
            $err[] = "Password is not correct";         
        }

    }
}

if(!empty($err))
{
    foreach($err as $er)
    {
        echo "<font color=red>$er<br></font>";
    }   
}
else
{   
     include("user/include/newsession.php");                   
         header("Location:user/index.php");                     

}

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:21:12.987

这里有很多事情是错的

代替

```
if (isset ( $_POST ['action'] ) && isset ( $_POST ['action'] ) == 'Log In') { 
```

和

```
if (isset ( $_POST ['action'] ) &&  $_POST ['action'] == 'Log In') { 
```

要替换的东西太多了。等我为你重写脚本

**编辑 1**

```
if (isset ( $_POST ['action'] ) && $_POST ['action'] == 'Log In') {
    $uname = prepareStr ( $_POST ['uname'] );
    $pass = prepareStr ( $_POST ['pass'] );
    $shaPass = hash ( 'sha512', $pass );
    $errors = array ();

    include_once ("toplevel/content/manage/dbcon/dbcon.php");

    if (! isset ( $uname ) || empty ( $uname )) {
        $err [] = "Empty Username not allowed";
    }

    if (! isset ( $pass ) || empty ( $pass )) {
        $err [] = "Empty Password not allowed";
    }

    if (count ( $err ) == 0) {
        $mysqli = new mysqli ( "localhost", "root", "", "test" ); // Replace with
                                                                  // DB
                                                                  // Information
        $result = "SELECT uname ,pass FROM members WHERE uname = '$uname' AND pass = '$shaPass'";

        if ($result->num_rows > 0) {
            $err [] = "Invalid username or Password";
        }

        if (count ( $err ) == 0 && $result) {
            $userInfo = $result->fetch_assoc ();
        /**
         * You can do what every you like here
         */
        }
    }

    if (count ( $err ) > 0) {
        /**
         * Kill the user
         */

        echo "<pre>";

        foreach ( $err as $value ) {
            echo $value . "\n";
        }
        die ( "Die! Die! Die!" );
    }

}

function prepareStr($str) {
    $str = htmlspecialchars ( $str );
    $str = trim ( $str );
    $str = mysql_real_escape_string ( $str );

    return $str;
} 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:25:50.827

如果用户名错误，您不应该告诉您的用户，这会使蛮力尝试闯入更容易。

```
<?php
if(isset($_POST['action']) && $_POST['action'] == 'Log In') {
    $userid = false;
    $uname = mysql_real_escape_string(trim(htmlspecialchars($_POST['uname'])));
    // or better
    // $uname = filter_var($_POST['uname'], FILTER_SANITIZE_STRING);
    $pass = $_POST['pass'];   

    $crytpass = hash('sha512',$pass); 
    $err = array();

    include_once("toplevel/content/manage/dbcon/dbcon.php");

    $q = mysql_query("SELECT userid FROM members WHERE uname = '$uname' AND pass='$cryptpass'");

    if(mysql_num_rows($q) > 0){
        $re = mysql_fetch_array($q);
        $userid = (int) $re['userid'];
    } else {
        // username or password wrong
    )

   if($userid) {
      // successfull login
   } 
```

}

# python - Python - 如何在 GNU/Linux 中获取 Firefox 的 URL 栏内容？

> ID：10029355
> 
> 赞同：1
> 
> 时间：2012-04-05T13:16:55.310
> 
> 标签：python, linux, firefox, gnu

我需要使用 Python 获取 Firefox 的 URL 栏（当前打开的选项卡）的内容。我发现很少有适用于 Windows 的解决方案（使用诸如 pywin32 之类的库），但我需要它用于 GNU/Linux（如果可用，那么当然多平台方式是最优选的）。我还通过为 Firefox 安装插件找到了方法，但我希望用户只安装 Python 和（在需要时）它的库 [Python]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:29:13.607

您可能对 DBus 有一些运气，尽管我不知道它是否在标准安装中提供。

# session - 如果用户会话不存在，Facebook 共享器不共享

> ID：10029357
> 
> 赞同：1
> 
> 时间：2012-04-05T13:17:01.210
> 
> 标签：session, facebook-sharer

我在我们的应用程序中使用 facebook 共享器。但是在我的实现中，如果用户尚未登录（facebook 会话不存在），那么它将被重定向到 facebook 登录页面。登录后显示主页，但不显示分享确认页面，继续分享。如果用户会话处于活动状态，它将显示共享屏幕，以便用户可以共享页面。为了在用户 Facebook 会话不活动时正常工作，我是否需要添加任何参数或其他东西？

我的代码将如下所示：

`<a target="_blank" href="http://www.facebook.com/sharer.php?u=URL&t=TITLE">Share this</a>`

谢谢斯里尼
。

# php - php 中的类 Javascript 语法

> ID：10029360
> 
> 赞同：1
> 
> 时间：2012-04-05T13:17:51.443
> 
> 标签：php, javascript

> **可能重复：**
> [PHP 本身是否支持合取和析取？](https://stackoverflow.com/questions/9065182/does-php-support-conjunction-and-disjunction-natively)

在javascript中，您可以轻松编写类似的内容

```
var c = a || b; 
```

它将通过 a 或 b 的值设置 c，这取决于先前定义的值。这意味着这个布尔运算符 || 返回值。但是我们在 PHP 中有相同的方法吗？

是否有任何简短的形式`$c = ($a) ? $a : ($b ? $b : null)`

# php - 使用转储文件在 CLI 模式下使用 PHP APC 缓存

> ID：10029361
> 
> 赞同：11
> 
> 时间：2012-04-05T13:17:52.097
> 
> 标签：php, cron, command-line-interface, apc

我最近开始在我们的服务器上使用 APC 缓存。我们产品中最重要的部分之一是 CLI（Cron/scheduled）进程，其性能至关重要。通常，批处理作业包括并行运行大约 16-32 个进程大约一个小时（它们每隔几分钟“重新启动”一次）。

默认情况下，在 CLI 中使用 APC 缓存是浪费时间，因为在各个调用之间没有保留操作码缓存。但APC也包含`apc_bin_dumpfile()`和`apc_load_dumpfile()`功能。

我在想这两个函数可以用来使 APC 在 CLI 模式下高效，方法是在批处理作业之外的某个时间编译它，存储在单个转储文件中，并让各个进程加载转储文件。

有没有人对这种情况有任何经验，或者你能给出很好的理由为什么它会或不会起作用？如果可以合理地获得任何显着收益，无论是在内存使用还是性能方面？隐藏在阴影中的陷阱是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T20:51:51.857

**免责声明：**当 APC 在 CLI 中运行时，它就像 APC 一样棒，而且它非常棒，但它同样令人沮丧。以健康的耐心使用，彻底，如果你在旋转，请远离问题，记住你正在使用缓存，这就是为什么它似乎什么都不做，实际上什么都不做。删除转储文件，从基础开始，如果这不起作用，忘记它尝试新机器，新操作系统，如果它正在工作，则制作副本，逐个扩展功能 - 有很多东西不起作用，如果它正在工作提交或制作副本，请添加另一部分并再次测试，以进行完整性检查，重新检查之前工作的副本，无论是否陈词滥调；如果一开始你没有成功再试一次，你就不能一直做同样的事情来期待新的结果。

准备好？这就是你一直在等待的：

## 为 cli 启用 apc

[apc.enable-cli](http://www.php.net/manual/en/apc.configuration.php#ini.apc.enable-cli) =1

> 在每个 CLI 请求上创建、填充和销毁 APC 缓存并不理想
> 
> ```
>  - previous answer by unknown poster since removed. 
> ```

你说得对，这很糟糕，让我们解决它好吗？

如果您尝试在 CLI 下使用 APC 并且未启用它，您将收到警告。

就像是：

```
PHP Warning:  apc_bin_loadfile(): APC is not enabled, 
              apc_bin_loadfile not available.
PHP Warning:  apc_bin_dumpfile(): APC is not enabled, 
              apc_bin_dumpfile not available. 
```

**警告：**我建议你不要在 php.ini 中启用 cli，这不值得沮丧，你会忘记你做了它并且对其他脚本有很多其他的头痛，相信我它不值得，使用启动器脚本反而。（见下文）

## cli 中的 apc_loadfile 和 apc_dumpfile

根据[mightye php](http://www.php.net/manual/en/function.apc-bin-dump.php#107160)的评论，我们需要禁用[apc.stat](http://www.php.net/manual/en/apc.configuration.php#ini.apc.stat)否则您将收到警告

就像是：

```
PHP Warning:  apc_bin_dumpfile(): Excluding some files from apc_bin_dump[file].  
              Cached files must be included using full path with apc.stat=0\. 
```

## 启动器脚本 - php-apc.sh

我们将使用此脚本来启动启用 apc 的脚本（例如`./php-apc.sh apc-cli.php`），而不是直接更改属性`php.ini`。

```
#/bin/sh
php -d apc.enable_cli=1 -d apc.stat=0 $1 
```

准备好使用基本功能了吗？你当然是 =)

## 基本 APC 持续存在 - apc-cli.php

```
<?php
/** check if dump file exists, you don't want to use file_exists */
if (false !== $dump_file = stream_resolve_include_path('apc.dump'))
    /** so where were we lets have a look see shall we */
    if (false !== apc_bin_loadfile($dump_file))
        /** fetch what was stored last run just for fun */
        if (false !== $value = apc_fetch('my.awesome.apc.store'))
            echo "$value from apc\n";

/** store what gets fetched the next run just for fun */
apc_store('my.awesome.apc.store', 'awesome in cli');
/** what a shlep lets not do that all over again shall we */
apc_bin_dumpfile(array(),null,'apc.dump'); 
```

**注意：**为什么不使用 file_exists？因为`file_exists == stat`你看到了，我们想要得到这样的回报`apc.stat=0`；在包含路径中工作；使用绝对路径而不是相对路径 - 正如 Avoid 返回的那样`stream_resolve_include_path();`，`include_once`使用`require_once`非`*_once`对应路径；**在不使用 APC** （Muchos 重要传感器）时检查您的统计使用情况，借助 StreamWrapper 回显来调用方法`url_stat;`Oops：致命范围溢出错误！中止通知线程。请参阅[url_stat](http://www.php.net/manual/en/streamwrapper.url-stat.php) 消息：StreamWrapper 导致的错误超出了本讨论的范围。

## 冒烟测试

使用启动器执行基本脚本

```
./php-apc.sh apc-cli.php 
```

一大堆什么都没发生，这就是我们想要的，为什么还要使用缓存？如果它确实输出了任何东西，那么它就不起作用了，对不起。

应该有一个叫apc.dump的dump文件，看看能不能找到？如果你找不到它，那么它没有工作，对不起。

很好，我们有转储文件，没有错误让我们再次运行它。

```
./php-apc.sh apc-cli.php 
```

你想看什么：

```
awesome in cli from apc 
```

成功！=)

PHP 中很少有能像工作的 APC 实现那样令人满意的了。
开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:16:40.183

我**绝对**不会在 CLI 中使用它，因为当你重新启动它时，它几乎就像一开始就没有运行过一样！

使用 APC 的更好方法是让它一直在**网络服务器**上运行，这样当它处于活动状态时，它实际上会做它应该做的事情！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-16T11:12:26.490

我尝试使用 curl 和 APC。它有效

在 CLI 中使用这些命令

```
curl --data "param1=value2" http://testsite.com/test.php 
```

所以它会将数据发布到 test.php 并在其中编写代码。

# java - 如何使用 Java 测试文件是否“完整”（完全编写）

> ID：10029365
> 
> 赞同：33
> 
> 时间：2012-04-05T13:18:01.703
> 
> 标签：java

假设您有一个外部进程将文件写入某个目录，并且您有一个单独的进程定期尝试从该目录读取文件。要避免的问题是读取另一个进程当前正在写出的文件，因此它是不完整的。目前，读取的进程使用最小文件年龄计时器检查，因此它会忽略所有文件，除非它们的最后修改日期超过 XX 秒。

我想知道是否有更清洁的方法来解决这个问题。如果文件类型未知（可能是多种不同的格式），是否有一些可靠的方法来检查文件头中应该在文件中的字节数，与文件中当前的字节数以确认它们匹配？

感谢您的任何想法或想法！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T13:37:07.820

我过去这样做的方式是写入文件的过程写入“临时”文件，然后在完成文件写入后将文件移动到读取位置。

所以写入过程将写入*info.txt.tmp*。完成后，它将文件重命名为*info.txt*。然后读取过程只需要检查*info.txt*的存在- 它知道如果存在，它已经被完整地写入。

或者，您可以让写入过程将*info.txt*写入不同的目录，然后如果您不喜欢使用奇怪的文件扩展名，则将其移动到读取目录。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-05T13:33:02.430

您可以使用外部标记文件。写入过程可以在开始创建文件 XYZ 之前创建一个文件 XYZ.lock，并在 XYZ 完成后删除 XYZ.lock。然后，读者很容易知道，只有当相应的 .lock 文件不存在时，它才能认为文件是完整的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-11T04:20:29.587

我无法选择使用临时标记等，因为客户端通过密钥对 SFTP 上传文件。它们的尺寸可能非常大。

它非常hacky，但我比较了睡几秒钟之前和之后的文件大小。

锁定线程显然不理想，但在我们的例子中，它只是作为后台系统进程运行，所以似乎工作正常

```
private boolean isCompletelyWritten(File file) throws InterruptedException{
    Long fileSizeBefore = file.length();
    Thread.sleep(3000);
    Long fileSizeAfter = file.length();

    System.out.println("comparing file size " + fileSizeBefore + " with " + fileSizeAfter);

    if (fileSizeBefore.equals(fileSizeAfter)) {
        return true;
    }
    return false;
} 
```

注意：如下所述，这可能不适用于 Windows。这是在 Linux 环境中使用的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-26T21:37:22.937

我过去在这种情况下使用 Windows 的一个简单解决方案是使用`boolean File.renameTo(File)` 并尝试将原始文件移动到单独的暂存文件夹：

```
boolean success = potentiallyIncompleteFile.renameTo(stagingAreaFile); 
```

如果`success`is `false`，则`potentiallyIncompleteFile`仍在写入。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-09T10:48:13.687

这可以通过使用[Apache Commons IO](https://mvnrepository.com/artifact/commons-io/commons-io) maven 库 FileUtils.copyFile() 方法来实现。如果您尝试复制文件并获得 IOException，则意味着该文件未完全保存。

例子：

```
public static void copyAndDeleteFile(File file, String destinationFile) {

    try {
        FileUtils.copyFile(file, new File(fileDirectory));
    } catch (IOException e) {
        e.printStackTrace();
        copyAndDeleteFile(file, fileDirectory, delayThreadPeriod);
    } 
```

或定期检查包含此文件的文件夹的一些延迟大小：

```
FileUtils.sizeOfDirectory(folder); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-05T13:25:30.770

即使字节数相等，文件的内容也可能不同。

所以我认为，您必须逐字节匹配旧文件和新文件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-05T13:33:43.807

似乎可以解决此问题的 2 个选项：

1.  最好的选择——写进程以某种方式通知读进程写已经完成。
2.  将文件写入 {id}.tmp，而不是在完成时将其重命名为 {id}.java，并且读取过程仅在 *.java 文件上运行。重命名花费的时间要少得多，这两个过程一起工作的机会也会减少。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-05T13:35:27.297

首先，[当复制到 Samba 共享时，为什么 OS X 不像 Windows 那样锁定文件？](https://stackoverflow.com/questions/9985034/why-doesnt-os-x-lock-files-like-windows-does-when-copying-to-a-samba-share/9985094#9985094)但这是你已经在做的事情的变化。

就读取任意文件和查找大小而言，有些文件具有该信息，有些则没有，但即使是那些没有任何通用表示方式的文件。您将需要每种格式的特定信息，并独立管理它们。

如果您绝对必须在文件完成后“立即”采取行动，那么您的写作过程将需要发送某种通知。否则，您几乎无法轮询文件，并且与从随机文件中读取随机块相比，读取目录在 I/O 方面非常便宜。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-26T10:14:40.393

测试文件是否已完全写入的另一种方法：

```
private void waitUntilIsReadable(File file) throws InterruptedException {
    boolean isReadable = false;
    int loopsNumber = 1;
    while (!isReadable && loopsNumber <= MAX_NUM_OF_WAITING_60) {
        try (InputStream in = new BufferedInputStream(new FileInputStream(file))) {
            log.trace("InputStream readable. Available: {}. File: '{}'",
                    in.available(), file.getAbsolutePath());
            isReadable = true;
        } catch (Exception e) {
            log.trace("InputStream is not readable yet. File: '{}'", file.getAbsolutePath());
            loopsNumber++;
            TimeUnit.MILLISECONDS.sleep(1000);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-12T15:45:14.410

如果您使用 FTP 或 Winscp 传输文件，请将此用于 Unix：

```
public static void isFileReady(File entry) throws Exception {
        long realFileSize = entry.length();
        long currentFileSize = 0;
        do {
            try (FileInputStream fis = new FileInputStream(entry);) {
                currentFileSize = 0;
                while (fis.available() > 0) {
                    byte[] b = new byte[1024];
                    int nResult = fis.read(b);
                    currentFileSize += nResult;
                    if (nResult == -1)
                        break;
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("currentFileSize=" + currentFileSize + ", realFileSize=" + realFileSize);
        } while (currentFileSize != realFileSize);
    } 
```

# jquery - 我怎样才能找到父母点击孩子的索引

> ID：10029368
> 
> 赞同：1
> 
> 时间：2012-04-05T13:18:10.380
> 
> 标签：jquery

单击孩子时，我想知道父索引号。例如，当我点击每个 ul 的孩子时，有一个 3 ul 的 div，它应该显示父索引号。它的父母。我怎样才能得到这个？

jQuery：

```
$('.opSection').on('click','li',function(){

    var num = $(this).parent('ul').index();

    alert(num);

    //alert(chartData.Indices[$(this).index()][$(this).index()]);

    }) 
```

HTML：

```
 <div class="opSection">//parent of all
<dl><dd>
        <ul class="selectGroup" title='allIndia' data-select='1'>
            <li data-index="123" class="c_on">All India</li> // when i click any of li i need 0
        </ul>

        <ul class="selectGroup" title='allIndia' data-select='1'>
            <li data-index="123" class="c_on">All India</li> // when i click this, i need 1
        </ul>
</dd></dl>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:19:32.667

```
$('.opSection').on('click', 'li', function () {
    alert($(this).parent().index();
}); 
```

**注意**我在处理多个元素的事件时使用了事件委托来提高性能。

这里的重要部分是[`parent()`](http://api.jquery.com/parent)选择`ul`, 然后[`index()`](http://api.jquery.com/index)，当不带参数传递时，它返回它相对于其兄弟元素的位置。

**编辑**正如您在评论中所说，您的标记与您在问题中发布的内容不同，请尝试以下操作：

```
$('.opSection').on('click', 'li', function (e) {
    $(e.delegateTarget).find('.selectGroup').index(this.parentNode);
}); 
```

`$(e.delegateTarget)`与 相同（但更快）`$('.opSection')`。然后我们在所有后代 ( [`find()`](http://api.jquery.com/find)) 中搜索所有`<ul />`'，并使用相同的`index()`方法找到我们单击的位置。

# android-intent - 使用 Android 分享 Intent 在 Facebook 上分享视频

> ID：10029371
> 
> 赞同：3
> 
> 时间：2012-04-05T13:18:18.213
> 
> 标签：android-intent

这个问题可能看起来很相似，但与“使用 Facebook sdk 在 Facebook 上共享视频”或“使用共享意图共享纯文本或图像”没有任何关系。我在 SO -> 上关注了这些帖子

[Facebook 的 Android 共享意图](https://stackoverflow.com/questions/7076717/android-share-intent-for-facebook)

[如何在 Facebook 上通过 Android 分享意图与 CAPTION 分享照片？](https://stackoverflow.com/questions/5214764/how-to-share-photo-with-caption-via-android-share-intent-on-facebook)

和这个外部链接

[http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent](http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent)

并了解了android中的共享意图，可以启动它与Android手机上现有的共享应用程序共享图像/视频/文本。我使用此代码在 facebook 上共享图像：

```
package com.mypackage.share;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;

public class FbshareActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Intent share = new Intent(Intent.ACTION_SEND);
        share.setType("image/jpg");

        share.putExtra(Intent.EXTRA_STREAM,Uri.parse("file:///mnt/sdcard/tutu.jpg"));
        startActivity(Intent.createChooser(share, "Share Image"));
    }
} 
```

清单文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mypackage.share"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".FbshareActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

它工作正常。我可以在 facebook 上分享图像。

现在我想上传视频：我替换了这一行： **share.setType("image/jpg");**

用这个
**share.setType("video/3gpp");**

和这个 **share.putExtra(Intent.EXTRA_STREAM,Uri.parse("**file:///mnt/sdcard/dimg1333456357958.jpg** "));** 和这个
**share.putExtra(Intent.EXTRA_STREAM,Uri.parse ("**file:///mnt/sdcard/a123bghy4.3gpp** "));**

但是我在运行代码时遇到了这个错误：

```
/Environment(30996): getExternalStorageState/mnt/sdcard
E/Environment(30996): getExternalStorageList
W/MountService( 2879): getVolumeState(/mnt/sdcard/external_sd): Unknown volume
W/MountService( 2879): getVolumeState(/mnt/sdcard/external_sd): Unknown volume
E/Environment(30996): getExternalStorageState/mnt/sdcard
D/SurfaceFlinger( 2879): [JJ]removeSurface for sid=74 
D/dalvikvm(30996): GC_CONCURRENT freed 1106K, 19% free 8612K/10503K, paused 3ms+5ms
E/SurfaceFlinger( 2879): [JJ]SurfaceFlinger FPS: 24.994677
D/ACRA    (30996): Writing crash report file.
D/ACRA    (30996): Mark all pending reports as approved.
D/ACRA    (30996): Looking for error files in /data/data/com.facebook.katana/app_acra-reports
V/ACRA    (30996): About to start ReportSenderWorker from #handleException
D/ACRA    (30996): Add user comment to null
D/ACRA    (30996): #checkAndSendReports - start
D/ACRA    (30996): Looking for error files in /data/data/com.facebook.katana/app_acra-reports
I/ACRA    (30996): Sending file 1333628258000-approved.stacktrace
D/ACRA    (30996): Connect to https://www.facebook.com/mobile/android_crash_logs/
D/ACRA    (30996): Setting httpPost headers
D/ACRA    (30996): Sending request to https://www.facebook.com/mobile/android_crash_logs/
D/dalvikvm(30996): GC_CONCURRENT freed 631K, 18% free 8644K/10503K, paused 5ms+2ms
W/ResponseProcessCookies(30996): Invalid cookie header: "Set-Cookie: datr=ZY19T4_v6CV68jQn4FTduX_l; expires=Sat, 05-Apr-2014 12:17:41 GMT; path=/; domain=.facebook.com; httponly". Unable to parse expires attribute: Sat
E/SurfaceFlinger( 2879): [JJ]SurfaceFlinger FPS: 4.741684
D/BatteryService( 2879): update start
D/ACRA    (30996): #checkAndSendReports - finish
E/AndroidRuntime(30996): FATAL EXCEPTION: main
E/AndroidRuntime(30996): java.lang.NullPointerException
E/AndroidRuntime(30996):    at com.facebook.katana.service.method.VideoUpload.getRealPathFromURI(VideoUpload.java:144)
E/AndroidRuntime(30996):    at com.facebook.katana.service.method.VideoUpload.start(VideoUpload.java:165)
E/AndroidRuntime(30996):    at com.facebook.katana.binding.AppSession.postToService(AppSession.java:4212)
E/AndroidRuntime(30996):    at com.facebook.katana.service.method.VideoUpload.RequestVideoUpload(VideoUpload.java:73)
E/AndroidRuntime(30996):    at com.facebook.katana.activity.media.UploadVideoActivity.upload(UploadVideoActivity.java:209)
E/AndroidRuntime(30996):    at com.facebook.katana.activity.media.UploadVideoActivity.onClick(UploadVideoActivity.java:169)
E/AndroidRuntime(30996):    at android.view.View.performClick(View.java:3100)
E/AndroidRuntime(30996):    at android.view.View$PerformClick.run(View.java:11644)
E/AndroidRuntime(30996):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(30996):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(30996):    at android.os.Looper.loop(Looper.java:126)
E/AndroidRuntime(30996):    at android.app.ActivityThread.main(ActivityThread.java:4002)
E/AndroidRuntime(30996):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(30996):    at java.lang.reflect.Method.invoke(Method.java:491)
E/AndroidRuntime(30996):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
E/AndroidRuntime(30996):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
E/AndroidRuntime(30996):    at dalvik.system.NativeStart.main(Native Method)
D/SurfaceFlinger( 2879): screenshot: sw=216, sh=135, minZ=0, maxZ=21015
W/ActivityManager( 2879):   Force finishing activity com.facebook.katana/.activity.media.UploadVideoActivity
D/SurfaceFlinger( 2879): screenshot: result = OK
E/android.os.Debug( 2879): Dumpstate > /data/log/dumpstate_app_com_facebook_katana_error
I/dumpstate(31581): begin
W/ActivityManager( 2879): Activity pause timeout for ActivityRecord{40f51e68 com.facebook.katana/.activity.media.UploadVideoActivity}
F//system/bin/logcat(31586): stack corruption detected: aborted
W/PowerManagerService( 2879): Timer 0x3->0x3|0x0
D/VoldCmdListener(   87): asec list
I/dumpstate(31581): done
D/InputTransport( 2879): channel '41014710 Sorry!    - Use *#9900# to take log - (server)' ~ mPointerStates->semaphore initialized 0x586ac000.
D/InputTransport( 2879): channel '41014710 Sorry!    - Use *#9900# to take log - (server)' ~ mPointerStates initialized 0x586ac000.
D/InputTransport( 2879): channel '41014710 Sorry!    - Use *#9900# to take log - (client)' ~ mPointerStates initialized 0x587f1000.
E/SurfaceFlinger( 2879): [JJ]SurfaceFlinger FPS: 0.207880
D/SurfaceFlinger( 2879): [JJ]createSurface for pid 31559 (1280 x 752)
D/SurfaceFlinger( 2879): [JJ]createSurface for pid 2879 (1 x 1)
E/SurfaceFlinger( 2879): [JJ]SurfaceFlinger FPS: 18.909105 
```

我如何调试 com.facebook.katana ？请帮忙。Rgds

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:05:52.950

显然有一个错误 - > [http://bugs.developers.facebook.net/show_bug.cgi?id=16728](http://bugs.developers.facebook.net/show_bug.cgi?id=16728) 在 facebook 的共享意图中，我怀疑这就是它不起作用的原因。Rgds，软软的

# javascript - Javascript 或 jQuery 正在缓存我的 javascript 变量。我该如何重置？

> ID：10029373
> 
> 赞同：1
> 
> 时间：2012-04-05T13:18:24.563
> 
> 标签：javascript, jquery

我有这样的 AJAX 调用：

```
 $('a.delete_task').live('click', function() {
      $this = $(this);

      function deleteFunction(){            

        var obj = $this.parents('.task');
        $(obj).addClass('highlighted');

        $.post($this.attr('href'), { _method: 'delete' }, function(data) {
          if ( $single_item_collection == true ) {
          } else {
          };
        });
      };

      SSK.confirm_delete($this, deleteFunction, "task");
      return false;
    }); 
```

然后我把我`deleteFunction()`的扔进`delete_confirmation`：

```
$(function(){
  window.SSK = new(Class.extend({
  confirm_delete: function(obj, action, label){
    $(".confirm-deletion").live("click", function(){
      action.call(obj);
      $(this).parents("#delete-message").fadeOut();
      return false;
    });
  }, 
```

问题是当我第一次点击它时它会起作用。当我第二次单击它时，它会通过第一个`$(this)`和第二个`$(this)`。同样，当我第三次单击另一个项目时，它会尝试通过所有三个项目，依此类推。

不知何故，它正在缓存`$(this)`。多么疯狂。并在每次再次传递该方法时传递它。

确认删除作为函数会创建一个弹出窗口，并将您最初单击的链接的方法作为变量传递给它`obj`。

然后，如果您单击确认它会这样做：

```
 $(".confirm-deletion").live("click", function(){
      action.call(obj);
      $(this).parents("#delete-message").fadeOut();
      return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:27:32.453

不，这肯定不是疯狂的缓存。阅读[https://developer.mozilla.org/en/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)并重写`confirm_delete`和/或`deleteFunction`。

我很确定您需要`$(this)`在 click-handler 闭包中放入一个缓存值，然后在`deleteFunction`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:11:30.963

每次用户单击“delete_task”时，您都会向元素“确认删除”添加一个单击事件。这就是点击事件被触发多次的原因，它实际上被添加了多次。

# php - 它没有在回显中显示正确的数字

> ID：10029375
> 
> 赞同：0
> 
> 时间：2012-04-05T13:18:26.263
> 
> 标签：php, javascript

我的插入值有问题。问题是当我尝试插入问题编号时。假设我尝试插入 2 个问题。那么对于第一个问题，问题编号（QuestionId）应该是 1，对于第二个问题应该是 2。

但问题是当我插入值时，这两个问题都显示问题编号 3。所以它对每个问题所做的就是插入下一个问题编号，在这个例子中，所有问题都是“3”。

下面是当我为 2 个问题回显 $questionsql 时它显示的示例：

```
INSERT INTO Question (QuestionId, QuestionContent) VALUES ('3','what is my name'), ('3','what is my age') 
```

以上是不正确的。以下是它应该回应的内容：

```
INSERT INTO Question (QuestionId, QuestionContent) VALUES ('1','what is my name'), ('2','what is my age') 
```

所以我想知道的是如何为每个问题显示正确的问题编号，它应该按照问题 1、2、3 等的正确顺序添加正确的问题编号。

下面是将问题附加到表格行中的 javascript 代码和表单代码。用户将问题附加到表格行中。当用户添加第一个问题时，它会附加第 1 个问题和问题，当他们附加第二个问题时，它会附加第 2 个问题和问题等。

```
<script>

    function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $qid = $("<td class='qid'>" + qnum + "</td>");
    var $question = $("<td class='question'></td>");

    $('.questionTextArea').each( function() {

    var $this = $(this);
    var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
                   .attr('value',$this.val())

    $question.append($questionText);

    });

    $tr.append($qid); 
    $tr.append($question);   
    $tbody.append($tr); 

    }

    ++qnum;
    $(".questionNum").text(qnum);
    $(".num_questions").val(qnum);

</script>

<form id="QandA" action="insertQuestion.php" method="post" >

<table id="question">
<tr>
    <th colspan="2">
        Question Number <span class="questionNum">1</span>
        <input type="hidden" class="num_questions" value="" name="numQuestion">
    </th>
</tr>
<tr>
    <td rowspan="3">Question:</td> 
    <td rowspan="3">
        <textarea class="questionTextArea" rows="5" cols="40" name="questionText"></textarea>
    </td>
</tr>
</table>

</form> 
```

下面是插入值的 php 代码。如何让它正确显示 numQuestion。我不能做一个简单的计数循环，因为我可能有 2 次考试，所以在为第一次考试创建问题后，在第二次考试中我需要问题编号再次从“1”开始，所以我认为最好正确显示“numQuestion”。

```
 $i = 0;
$c = count($_POST['gridValues']);

$insertquestion = array();

for($i = 0;  $i < $c; $i++ ){

    switch ($_POST['gridValues'][$i]){

    case "3": 
    $selected_option = "A-C";
    break;

    case "4": 
    $selected_option = "A-D";
    break;

    default:
    $selected_option = "";
    break;

    }      

    $optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = '". mysql_real_escape_string($selected_option)."')";
    $optionrs = mysql_query($optionquery);
    $optionrecord = mysql_fetch_array($optionrs);
    $optionid = $optionrecord['OptionId']; 

    $insertquestion[] = "'". 
                    mysql_real_escape_string( $_POST['numQuestion'] ) ."','".  
                    mysql_real_escape_string( $_POST['questionText'][$i] ) ."','".  
                    mysql_real_escape_string( $optionid ) ."'";

}

 $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, QuestionMarks, OptionId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

echo($questionsql);

mysql_close(); 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:32:22.973

you dont have to generate these question numbers. try using an auto increment sequence in the database. you are confusing some things here. You need a unique identifier in your database, which is a different thing as the numbers of the table in your frontend. also, if you have different exams with different questions, you should have 2 tables, one holding you exams, and one holding your questions with an auto increment id and a foreign key that references the exams it belongs to. In this scenario you dont have to commit the question ids but only query the question name (and the exam refernce), the database will generate your Id. the question count value in your table needs to be independent from your database Id.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:36:19.573

如果它是主键，则保留该字段，如下所示

```
INSERT INTO Question (QuestionContent) VALUES ('what is my name'), ('what is my age') 
```

它会自动将 id 分配给问题。当您获得要显示的数据时，您可以简单地使用变量来生成问题编号。您将不得不避免使用 id 作为问题编号。

# ssrs-2008 - SSRS - 在列中显示行总数

> ID：10029378
> 
> 赞同：0
> 
> 时间：2012-04-05T13:18:38.030
> 
> 标签：ssrs-2008, reporting-services

我正在努力`SSRS 2008`。

我有一份报告如下，我想要总计列中的金额。我无法在列中获得总数。我已经尝试过 Add **Total / Sum()**功能，`SSRS`但没有运气。

```
+---------+-------+--------+-------+                                          
|Supplier | Agent | Amount | Total |
+---------+-------+--------+-------+
|         | A10051| 237.2  |       |
|S2005068 +-------+--------+       |       
|         |A10052 | 23.8   |       |
+---------+-------+--------+-------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:11:14.500

我认为你的设计不合适。最后一列中的总行将位于详细信息组下。如果您想要最后一列的总数，您可以获得但是对于每一行它都会重复。采用

```
=Sum(Fields!Amount.Value,"Supplier") here Supplier is the "Group Name" 
```

为了避免这种重复，我们需要在供应商组中添加总计列并使用`=Sum(Fields!Amount.Value)`总计

或者

右键单击金额列数据 -> 添加总计 -> 之前或之后。这将在您选择之后/之前的相同金额列中显示供应商组的小计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:24:10.237

在供应商组上添加总计，在之前或之后添加，具体取决于您希望它在顶部还是底部。SSRS 将填写`=SUM(Fields!Amount.Value)`并显示下面的总数 268。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T23:45:51.417

制作总行数 =countRows("dataset")

# xml - 在 Blackberry 中使用 Web 服务

> ID：10029380
> 
> 赞同：0
> 
> 时间：2012-04-05T13:18:42.177
> 
> 标签：xml, json, web-services, blackberry, ksoap2

我们正在尝试在blackberry中消费webservices。我们在blackberry上开发应用程序非常新。搜索web后发现我们可以使用org.json.me jar在blackberry中消费json webservices，但它没有工作然后我们发现我们可以在 BB 中使用基于 xml 的 Web 服务。但是我们不知道如何获取数据并将数据发送到 Web 服务。

我们得到 xml 响应的 web 服务 url 是：

[http://somedomainname.com/wcfservice/RestServiceImpl.svc/XML/log](http://somedomainname.com/wcfservice/RestServiceImpl.svc/XML/log)

请指导或建议一种在 BB 中使用 json / xml /ksoap Web 服务的方法。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:37:24.553

下面是一个如何在 BB 中检索和解析 json 的示例：

```
import net.rim.device.api.io.URI;
import net.rim.device.api.io.messaging.*;
import net.rim.device.api.ui.*
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;
import java.io.*;
import org.json.me.*;

public class NetworkSample extends UiApplication 
{
    public static void main(String[] args) 
    {
        NetworkSample app = new NetworkSample();
        app.enterEventDispatcher();
    }
    public NetworkSample() 
    {
        pushScreen(new ParseJSONSample());
    }
}

class ParseJSONSample extends MainScreen implements FieldChangeListener
{

    ButtonField _btnJSON = new ButtonField(Field.FIELD_HCENTER);

    private static UiApplication _app = UiApplication.getUiApplication();

    public ParseJSONSample()
    {
        _btnJSON.setChangeListener(this);
        _btnJSON.setLabel("Fetch page");

        add(_btnJSON);
    }

    public void fieldChanged(Field button, int unused)
    {

        if(button == _btnJSON)
        {

            Thread t = new Thread(new Runnable() 
            {
                public void run()
                {
                    Message response = null;
                    String uriStr = "http://docs.blackberry.com/sampledata.json"; 
                    BlockingSenderDestination bsd = null;
                    try
                    {
                        bsd = (BlockingSenderDestination)
                                    DestinationFactory.getSenderDestination
                                        ("CommAPISample", URI.create(uriStr));
                        if(bsd == null)
                        {
                            bsd =
                              DestinationFactory.createBlockingSenderDestination
                                  (new Context("CommAPISample"),
                                   URI.create(uriStr), new JSONMessageProcessor()
                                   );
                        }

                        // Send message and wait for response
                        response = bsd.sendReceive();
                        _json = response.getObjectPayload();

                        if(_json != null)
                        {
                            _app.invokeLater(new Runnable() 
                            {

                                public void run() 
                                {
                                    _app.pushScreen(new JSONOutputScreen(_json));
                                }

                            });
                        }
                    }
                    catch(Exception e)
                    {
                        System.out.println(e.toString());
                    }
                    finally
                    {
                        if(bsd != null)
                        {
                            bsd.release();
                        }
                    }
                }

            });
            t.start();

        }

}

class JSONOutputScreen extends MainScreen implements TreeFieldCallback 
{

    private TreeField _treeField;

    public JSONOutputScreen(Object JSONData)
    {
        _treeField = new TreeField(this, Field.FOCUSABLE);
        add(_treeField);
        setTree(JSONData);
    }

    void setTree(Object obj)
    {
        int parentNode = 0;

        _treeField.deleteAll();

        try
        {
            if(obj instanceof JSONArray)
            {
                parentNode = populateTreeArray
                                  (_treeField, (JSONArray) obj, parentNode);
            }
            else if(obj instanceof JSONObject)
            {
                parentNode = populateTreeObject
                                 (_treeField, (JSONObject) obj, parentNode);
            }
        }
        catch(JSONException e)
        {
            System.out.println(e.toString());
        }

        _treeField.setCurrentNode(parentNode);
    }

    // Populate the trees with JSON arrays
    int populateTreeArray(TreeField tree, JSONArray o, int p) throws JSONException
    {
        Object temp;
        int newParent;

        newParent = tree.addChildNode(p, "Array " + p);

        for(int i = 0; i < o.length(); ++i)
        {
            temp = o.get(i);

            if(temp == null || temp.toString().equalsIgnoreCase("null"))
            {
                continue;
            }

            if(temp instanceof JSONArray)
            {
                 // Array of arrays
                populateTreeArray(tree, (JSONArray) temp, newParent);
            }
            else if(temp instanceof JSONObject)
            {
                // Array of objects
                populateTreeObject(tree, (JSONObject) temp, newParent);
            }
            else
            { // other values
                newParent = tree.addSiblingNode(newParent, temp.toString());
            }
        }

        return newParent;
    }

    // Populate the tree with JSON objects
    int populateTreeObject(TreeField tree, JSONObject o, int p) throws JSONException
    {
        Object temp;

        int newParent = tree.addChildNode(p, "Object" + p);

        JSONArray a = o.names();

        for(int i = 0; i < a.length(); ++i)
        {
            temp = o.get(a.getString(i));

            if(temp == null || temp.toString().equalsIgnoreCase("null"))
            {
                continue;
            }
            if(temp instanceof JSONArray)
            {
                populateTreeArray(tree, (JSONArray) temp, newParent);
            }
            else if(temp instanceof JSONObject)
            {
                populateTreeObject(tree, (JSONObject) temp, newParent);
            }
            else
            {
                tree.addSiblingNode
                        (newParent, a.getString(i) + ": " + temp.toString());
            }
        }

        return newParent;
    }

    public void drawTreeItem(TreeField treeField, Graphics graphics, int node,
            int y, int width, int indent) 
    {
        if(treeField == _treeField)
        {
            Object cookie = _treeField.getCookie(node);
            if(cookie instanceof String)
            {
                String text = (String) cookie;
                graphics.drawText(text, indent, y, Graphics.ELLIPSIS, width);
            }
        }

    }

    public boolean onSavePrompt()
    {
        // Suppress the save dialog
        return true;
    }

} 
```

来源：[http ://docs.blackberry.com/en/developers/deliverables/21128/Code_sample_Parse_JSON_data_structure_1319797_11.jsp](http://docs.blackberry.com/en/developers/deliverables/21128/Code_sample_Parse_JSON_data_structure_1319797_11.jsp)

以及关于如何在 BB 中检索和解析 XML：

```
import javax.microedition.io.*;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.system.*;
import net.rim.device.api.xml.parsers.*;
import org.w3c.dom.*;
import org.xml.sax.*;

class XML_Parsing_Sample extends UiApplication{
    //creating a member variable for the MainScreen
    MainScreen _screen= new MainScreen();
    //string variables to store the values of the XML document
    String _node,_element;
    Connection _connectionthread;

    public static void main(String arg[]){
        XML_Parsing_Sample application = new XML_Parsing_Sample();
        //create a new instance of the application
        //and start the application on the event thread
        application.enterEventDispatcher();
    }

    public XML_Parsing_Sample() {
        _screen.setTitle("XML Parsing");//setting title
        _screen.add(new RichTextField("Requesting....."));
        _screen.add(new SeparatorField());
        pushScreen(_screen); // creating a screen
        //creating a connection thread to run in the background
        _connectionthread = new Connection();
        _connectionthread.start();//starting the thread operation
    }

    public void updateField(String node, String element){
        //receiving the parsed node and its value from the thread
        //and updating it here
        //so it can be displayed on the screen
        String title="Title";
        _screen.add(new RichTextField(node+" : "+element));

        if(node.equals(title)){
            _screen.add(new SeparatorField());
        }
    }

    private class Connection extends Thread{
        public Connection(){
            super();
        }

        public void run(){
            // define variables later used for parsing
            Document doc;
            StreamConnection conn;

            try{
                //providing the location of the XML file,
                //your address might be different
                conn=(StreamConnection)Connector.open
                  ("http://localhost:8000/content/test.xml");
                //next few lines creates variables to open a
                //stream, parse it, collect XML data and
                //extract the data which is required.
                //In this case they are elements,
                //node and the values of an element
                DocumentBuilderFactory docBuilderFactory
                  = DocumentBuilderFactory. newInstance(); 
                DocumentBuilder docBuilder
                  = docBuilderFactory.newDocumentBuilder();
                docBuilder.isValidating();
                doc = docBuilder.parse(conn.openInputStream());
                doc.getDocumentElement ().normalize ();
                NodeList list=doc.getElementsByTagName("*");
                _node=new String();
                _element = new String();
                //this "for" loop is used to parse through the
                //XML document and extract all elements and their
                //value, so they can be displayed on the device

                for (int i=0;i<list.getLength();i++){
                    Node value=list.item(i).
                      getChildNodes().item(0);
                    _node=list.item(i).getNodeName();
                    _element=value.getNodeValue();
                    updateField(_node,_element);
                }//end for
            }//end try
            //will catch any exception thrown by the XML parser
            catch (Exception e){
                System.out.println(e.toString());
            }
        }//end connection function
    }// end connection class
}//end XML_Parsing_Sample 
```

来源：[http ://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800599/How_To_-_Use_the_XML_Parser.html?nodeid=820554&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800599/How_To_-_Use_the_XML_Parser.html?nodeid=820554&vernum=0)

# iphone - UIWebViewNavigationTypeOther 与 UIWebViewNavigationTypeLinkClicked

> ID：10029383
> 
> 赞同：13
> 
> 时间：2012-04-05T13:18:48.913
> 
> 标签：iphone, uiwebview

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
//my code
} 
```

目前，一旦我在我的 webview 中触摸内部，就会调用我上面的委托方法。

所以我想知道以下两种导航类型有什么区别：`UIWebViewNavigationTypeOther`& `UIWebViewNavigationTypeLinkClicked`。

因为一些选择的 URL 提供了导航类型为`UIWebViewNavigationTypeOther`& 一些提供`UIWebViewNavigationTypeLinkClicked`。

从苹果文件中我无法清除我的自我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-05T13:26:57.927

`UIWebViewNavigationTypeLinkClicked`如果用户点击`<a href="">`样式链接，如果更改是从 Javascript 中完成的（`onclick`例如事件） ，`UIWebViewNavigationTypeOther`则会发生这种情况。

此外`UIWebViewNavigationTypeOther`，如果您第一次加载页面，或者您将被元刷新或其他东西重定向，则使用

# java - 在客户端处理响应消息时出现 JAX-WS 问题

> ID：10029386
> 
> 赞同：1
> 
> 时间：2012-04-05T13:18:57.280
> 
> 标签：java, jax-ws, soap-client, wsdl2java, wsimport

我在 Web 服务的客户端实现方面遇到了一些问题。我有 wsdl，并使用 wsimport 工具创建了类。

当我通过这些类调用 web 服务时，我可以在日志中看到请求和响应......看起来还不错。我不能使用这些类来处理从 WS 接收到的数据，因为结果对象没有关于它包含的字段的定义......

因此，我试图从 WebService 获得原始响应......我通过附加一个 SoapHandler 来做到这一点：

```
BindingProvider bindingProvider = (BindingProvider)port;
List<Handler> handlerChain = new ArrayList<Handler>();
handlerChain.add(new SoapMsgHandler());
bindingProvider.getBinding().setHandlerChain(handlerChain);

result = port.getXmlFromWS();
.... 
```

在处理程序中，我实现了 handleMessage(SOAPMessageContext context) 方法来将消息打印到日志，但我遇到了一个问题......

下面是应该处理响应的 Handler 类的一部分......但我在这一行得到一个异常： SOAPMessage message = smc.getMessage()

例外情况如下：

```
org.w3c.dom.DOMException: WRONG_DOCUMENT_ERR: A node is used in a different document than the one that created it.
    at org.apache.xerces.dom.ParentNode.internalInsertBefore(Unknown Source)
    at org.apache.xerces.dom.ParentNode.insertBefore(Unknown Source)
    at org.apache.xerces.dom.CoreDocumentImpl.insertBefore(Unknown Source)
    at org.apache.xerces.dom.NodeImpl.appendChild(Unknown Source)
    at org.jboss.ws.core.soap.SOAPDocument.appendChild(SOAPDocument.java:222)
    at org.jboss.ws.core.soap.SOAPPartImpl.appendChild(SOAPPartImpl.java:297)
    at com.sun.xml.bind.marshaller.SAX2DOMEx.startElement(SAX2DOMEx.java:176)
    at com.sun.xml.ws.encoding.TagInfoset.writeStart(TagInfoset.java:168)
    at com.sun.xml.ws.message.stream.StreamMessage.writeTo(StreamMessage.java:442)
    at com.sun.xml.ws.message.AbstractMessageImpl.readAsSOAPMessage(AbstractMessageImpl.java:193)
    at com.sun.xml.ws.handler.SOAPMessageContextImpl.getMessage(SOAPMessageContextImpl.java:79) 
```

处理程序实现的一部分：

```
import javax.xml.soap.SOAPMessage;
import javax.xml.ws.handler.MessageContext;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;

public class SoapMsgHandler implements SOAPHandler<SOAPMessageContext> {
  @Override
  public boolean handleMessage(SOAPMessageContext context) {
    printTheMsg(context);
    return true;
  }

  private void printTheMsg(SOAPMessageContext smc) {
   SOAPMessage message = smc.getMessage();  //this line produces the mentioned exception
  ....
  }
  ....
 } 
```

任何有关可能出错的帮助将不胜感激。

# php - 在 Internet Explorer 中转义/剥离 html 标签

> ID：10029392
> 
> 赞同：-2
> 
> 时间：2012-04-05T13:19:22.737
> 
> 标签：php, html, escaping, html-escape-characters

我已经实现了一个模板（在 html 和 php 中），通过它我可以编辑一些（输入和文本区域）中的文本。

编辑完文本后，我将其存储在 mysql 数据库中，以后可以调用此模板。现在，当我在 Internet Explorer 中调用存储在 mysqldatabase 中的文本时，将使用其 html 标签调用该文本，我可以在 textarea 中看到类似这样的内容：

```
p> this is paragraph.</p> 
```

如何告诉 Internet Explorer`<p></p>`和其他 html 标签是 html 标签？

它适用于火狐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:37:12.323

我不太确定你在问什么，但这就是我理解你的问题的方式：

**如何在文本区域中显示 HTML 标记？**

如果这是问题，答案是你不能。`Textarea`在标准 HTML 中无法显示标记。它将以纯文本形式显示其中的任何内容。这就是 textarea 显示您的 HTML 标签和代码的原因；没有对文本区域进行处理以呈现标记。

查看问题的答案[我可以在标签中嵌入 HTML 格式吗？](https://stackoverflow.com/questions/2580247/can-i-embed-html-formatting-inside-of-a-textarea-tag)在stackoverflow上，可能会查看“所见即所得”类型的插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:34:32.023

您希望标签以文本形式显示吗？

使用该功能`htmlspecialchars()`或`htmlentities()`

这会将实体转换为其 html 转义字符

在这里阅读更多[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

# jquery-mobile - jQuery Mobile - CSS Retina 图像替换

> ID：10029394
> 
> 赞同：1
> 
> 时间：2012-04-05T13:19:28.713
> 
> 标签：jquery-mobile, media-queries, retina-display, image-replacement

我有一个使用 jQuery Mobile 运行的移动网站。我想为非视网膜（没有高像素密度的设备）设备提供标准图像，但希望这些图像替换为在高像素密度设备上查看时是原始尺寸的 2 倍的视网膜（高像素密度）图像。我在这里找到了这篇文章：http: [//flowz.com/2010/07/css-image-replacement-for-iphone-4-high-dpi-retina-display/](http://flowz.com/2010/07/css-image-replacement-for-iphone-4-high-dpi-retina-display/)

我用于实现的 jQuery 查找带有 的图像`class="replace-2x"`，并将标准图像替换为同一路径中的一个并`@2x`添加到文件名中。因此`logo.png`将`logo@2x.png`在 Retina 设备上替换为。我的 jQuery 看起来像这样：

```
function highdpi_init() {
    if(jQuery('.replace-2x').css('font-size') == "1px") {
        var els = jQuery(".replace-2x").get();
        for(var i = 0; i < els.length; i++) {
            var src = els[i].src
            src = src.replace(".png", "@2x.png");
            els[i].src = src;
        }
    }
}
jQuery(document).ready(function() {
    highdpi_init();
}); 
```

然而，当页面加载时，这个函数没有被调用或工作（一个或另一个）所以我不确定我是否需要类似的东西`$(".page").live('pageinit', function() {`，或者当页面加载时函数触发或“工作”？帮助？？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:23:34.123

在 JQuery mobile 中，您需要使用`pageinit`，因为该`ready`函数只调用一次；其他所有页面都通过 Ajax 加载，不会触发 ready 事件。有关更多信息，请参阅[JQuery 移动事件](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/events.html)。

```
function highdpi_init() {
    $(".replace-2x").each(function () {
        if ($(this).css("font-size") == "1px") {           
            var src = $(this).attr("src");
            $(this).attr("src", src.replace(/(@2x)*.png/i, "@2x.png").replace(/(@2x)*.jpg/i, "@2x.jpg"));
            $(this).removeClass('replace-2x')
        }
});

$(".ui-page").live('pageinit',function(event){
    highdpi_init();
}); 
```

# objective-c - UISearchBar 和 segues

> ID：10029401
> 
> 赞同：0
> 
> 时间：2012-04-05T13:19:59.780
> 
> 标签：objective-c, uitableview, uisearchbar, detailview

我使用 UITableViewController 来管理数据。当我单击单元格时，我的程序会转到另一个场景（让它成为 myDetailViewController）。但是我刚刚添加了搜索栏（UISearchViewController）并且搜索效果很好，但是当我单击带有过滤数据的表格中的单元格时，什么也没有发生。但是我需要程序去 myDetailViewController 场景查看对象的详细信息。我该如何执行？

顺便说一句，为了更改视图（来自基本单元格，未过滤），我正在使用 segues。而且我也在使用这种方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"nameofmysegue"]) {
//some code to give some data to new controller;
    }
} 
```

当我使用 `tableView:didSelectRowAtIndexPath`: 时，没有 segues 什么都不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:26:06.483

确保将 segue 连接到视图控制器本身而不是 tableview 行。然后在你的`didSelectRowAtIndexPath`，你做一个`[self performSegueWithIdentifier@"mySegueID"];`

# python - Python 为什么不为 sqlite3 游标编写上下文管理器？

> ID：10029403
> 
> 赞同：8
> 
> 时间：2012-04-05T13:20:17.197
> 
> 标签：python, sqlite, connection, contextmanager

这应该可以工作，但只是说没有股票表 - 应该在上下文管理器中的某个地方丢失了连接？

```
import sqlite3
from contextlib import contextmanager

@contextmanager
def doquery(conn, q, params=()):
    c = conn.cursor()
    c.execute(q, params)
    conn.commit()
    yield c    
    c.close()

with sqlite3.connect(':memory:') as db:    
    doquery(db,'''create table stocks
    (date text, trans text, symbol text,
    qty real, price real)''')

    doquery(db,"""insert into stocks
          values ('2006-01-05','BUY','RHAT',100,35.14)""")

    with doquery(db, 'select * from stocks') as r:
        for row in r:
            print row 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T19:41:34.557

问题在于您使用上下文管理器的方式。调用`doquery`只是创建了一个上下文管理器对象——你需要在一个`with`语句中使用它，它会根据需要调用它的`__enter__`和`__exit__`方法。例如，尝试以下操作：

```
from contextlib import contextmanager

@contextmanager
def enter_exit(text):
    print('entering')
    yield text
    print('exiting')

print(enter_exit('attempt 1'))

with enter_exit('attempt 2') as t:
    print(t) 
```

我得到的输出是：

```
<contextlib._GeneratorContextManager object at 0xcf3e90>
entering
attempt 2
exiting 
```

您可能需要重新阅读有关[with 语句](http://www.python.org/dev/peps/pep-0343/)和[contextlib](http://docs.python.org/library/contextlib.html)的文档。

您的代码的另一个问题是，如果`c.execute`或`conn.commit`引发异常，`c.close`将不会被调用 - 我不知道这是否真的有必要，但大概这就是您想要使用上下文管理器而不是函数的原因。地方。以下更改应该可以解决这两个问题：

```
import sqlite3
from contextlib import contextmanager

@contextmanager
def doquery(conn, q, params=()):
    c = conn.cursor()
    try:
        c.execute(q, params)
        conn.commit()
        yield c
    finally:
        c.close()

with sqlite3.connect(':memory:') as db:
    with doquery(db,'''create table stocks
                 (date text, trans text, symbol text,
                 qty real, price real)'''):
        pass

    with doquery(db,"""insert into stocks
                 values ('2006-01-05','BUY','RHAT',100,35.14)"""):
        pass

    with doquery(db, 'select * from stocks') as r:
        for row in r:
            print(row) 
```

但是，我认为这不是最干净的方法。据我所知，没有理由创建三个单独`cursor`的对象 - 您可以为每个查询使用相同的对象。我认为调用`conn.commit`实际上也不是必需的 - 使用数据库连接作为上下文管理器将自动提交事务，或者如果引发异常则回滚它们（参见[sqlite3 模块文档](http://docs.python.org/library/sqlite3.html)）。

编辑：这是一个更干净的版本，它仍然有效。我真的不知道关闭光标实际上做了什么——它可能没有必要（`Cursor.close`甚至似乎没有记录）。

```
import sqlite3
from contextlib import closing

with sqlite3.connect(':memory:') as db:
    with closing(db.cursor()) as c:
        c.execute('''create table stocks
                 (date text, trans text, symbol text,
                 qty real, price real)''')
        c.execute("""insert into stocks
                 values ('2006-01-05','BUY','RHAT',100,35.14)""")
        c.execute('select * from stocks')
        for row in c:
            print(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:00:38.223

这似乎`yield`干扰了`create table`和`insert into`陈述。

在下面我不使用`yield`for except`select`并且它工作正常：

```
#!/usr/bin/python3
import sqlite3
from contextlib import contextmanager

@contextmanager
def doquery(conn, q, params=()):
    c = conn.cursor()
    c.execute(q, params)
    conn.commit()
    yield c
    c.close()

@contextmanager
def doquery2(conn, q, params=()):
    c = conn.cursor()
    c.execute(q, params)
    conn.commit()
    c.close()

with sqlite3.connect(':memory:') as db:
    doquery2(db,'''create table stocks
    (date text, trans text, symbol text,
    qty real, price real)''')

    doquery2(db,"""insert into stocks                                                                                                                
          values ('2006-01-05','BUY','RHAT',100,35.14)""")

    with doquery(db, 'select * from stocks') as r:
        for row in r:
            print(row[0]) 
```

# c# - C# 十进制到 SQL Server 钱

> ID：10029404
> 
> 赞同：3
> 
> 时间：2012-04-05T13:20:17.480
> 
> 标签：c#, sql-server-2008, currency

我有一个带有金钱参数的 SQL Server SPROC。

我将 C# 小数传递给这个 SPROC

如何将小数从 C# 传递到 SPROC 中的货币类型，这样我就不会在该点之后丢失任何值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:29:53.323

只需使用新的`SqlMoney(decimal)`构造函数初始化参数。

`SqlParameter parameter = new SqlParameter("@Money", SqlDbType.Money);`

请参阅[SQLMoney 构造函数](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqlmoney.sqlmoney%28v=vs.90%29.aspx)文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:29:12.897

我会试试这个：[在 c# 中用于赚钱的最佳数据类型是什么？](https://stackoverflow.com/questions/693372/what-is-the-best-data-type-to-use-for-money-in-c)

或者您可以查看`.Parse`覆盖。我知道有很多格式，货币就是其中之一。

# perl - 为什么 IPC::Open3 会死锁？

> ID：10029406
> 
> 赞同：10
> 
> 时间：2012-04-05T13:20:26.560
> 
> 标签：perl, ipc

我浏览了[open3](http://perldoc.perl.org/IPC/Open3.html)的文档，这是我无法理解的部分：

> 如果您尝试从孩子的 stdout writer 和他们的 stderr writer 读取，您将遇到阻塞问题，这意味着您将要使用 select() 或 IO::Select，这意味着您最好使用 sysread( ) 而不是 readline() 用于普通的东西。
> 
> 这是非常危险的，因为您可能会永远阻塞。它假设它将与 bc 之类的东西交谈，既向它写入数据，又从中读取数据。这大概是安全的，因为您“知道”像 bc 这样的命令将一次读取一行并一次输出一行。然而，像 sort 这样的程序首先读取整个输入流，很容易导致死锁。

所以我尝试了，`open3`希望能更好地了解它。这是第一次尝试：

```
sub hung_execute {
    my($cmd) = @_;
    print "[COMMAND]: $cmd\n";
    my $pid = open3(my $in, my $out, my $err = gensym(), $cmd);
    print "[PID]: $pid\n";
    waitpid($pid, 0);
    if(<$err>) {
        print "[ERROR] : $_" while(<$err>);
        die;
    }
    print "[OUTPUT]: $_" while (<$out>);
} 
```

有趣的是，我必须`$err`在这里初始化。

无论如何，当我`execute("sort $some_file");`给出`$some_file`一个包含超过 4096 个字符（我的机器的限制）的文本文件时，它就会挂起。

然后我查看了[这个](http://perldoc.perl.org/perlfaq8.html#How-can-I-capture-STDERR-from-an-external-command%3f)常见问题解答，下面是我的新版本执行：

```
sub good_execute {
    my($cmd) = @_;
    print "[COMMAND]: $cmd\n";
    my $in = gensym();
    #---------------------------------------------------
    # using $in, $out doesn't work. it expects a glob?
    local *OUT = IO::File->new_tmpfile;
    local *ERR = IO::File->new_tmpfile;
    my $pid = open3($in, ">&OUT", ">&ERR", $cmd);
    print "[PID]: $pid\n";
    waitpid($pid, 0);
    seek $_, 0, 0 for \*OUT, \*ERR;
    if(<ERR>) {
        print "[ERROR] : $_" while(<ERR>);
        die;
    }
    print "[OUTPUT]: $_" while (<OUT>);
} 
```

该`sort`命令现在执行得很好，但我不知道为什么。

**[更新]**在阅读了@tchrist 的回答后，我阅读`IO::Select`了，并且经过更多的谷歌搜索，提出了这个版本`execute`：

```
sub good_execute {
    my($cmd) = @_;
    print "[COMMAND]: $cmd\n";
    my $pid = open3(my $in, my $out, my $err = gensym(), $cmd);
    print "[PID]: $pid\n";
    my $sel = new IO::Select;
    $sel->add($out, $err);
    while(my @fhs = $sel->can_read) {
        foreach my $fh (@fhs) {
            my $line = <$fh>;
            unless(defined $line) {
                $sel->remove($fh);
                next;
            }
            if($fh == $out) {
                print "[OUTPUT]: $line";
            }elsif($fh == $err) {
                print "[ERROR] : $line";
            }else{
                die "[ERROR]: This should never execute!";
            }
        }
    }
    waitpid($pid, 0);
} 
```

这工作正常，现在一些事情变得更清楚了。但整体画面还是有些朦胧。

所以我的问题是：

1.  有什么问题`hung_execute`？
2.  我猜`good_execute`是因为`>&`open3 调用中的。但为什么以及如何？
3.  此外，`good_execute`当我使用词法变量（`my $out`而不是`OUT`）作为文件句柄时，它也不起作用。它给出了这个错误：`open3: open(GLOB(0x610920), >&main::OUT) failed: Invalid argument`。为什么这样？
4.  似乎只有一个文件句柄可以在给定时间写入，如果我丢弃持有资源的句柄，其他句柄继续等待。我曾经认为STDERR和STDOUT是独立的流，不共享任何资源。我想我的理解在这里有点缺陷。也请给我一些指示。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T13:42:19.450

您已经遇到了我在文档中所写的问题，然后是一些问题。您正在陷入僵局，因为您在阅读之前正在等待孩子退出。如果它有多个输出管道缓冲区，它将阻塞并下一次退出。另外，您还没有关闭手柄的末端。

你也有其他错误。您不能以这种方式测试句柄上的输出，因为您只是做了一个阻塞的 readline 并丢弃了它的结果。此外，如果您尝试在标准输出之前读取所有标准错误，并且如果标准输出上有多个输出管道缓冲区，那么您的孩子将在您阻止从他的标准错误读取时阻止写入标准输出。

您确实必须使用`select`, 或`IO::Select`, 才能正确执行此操作。您必须仅在该句柄上有可用输出时从该句柄中读取，并且您也不能将缓冲调用与 混合`select`，除非您非常幸运。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T20:04:12.777

`hung_execute`：

```
 Parent                     Child
 ------------------------   ------------------------
 Waits for child to exit
                            Writes to STDOUT
                            Writes to STDOUT
                            ...
                            Writes to STDOUT
                            Tries to write to STDOUT
                              but the pipe is full,
                              so it blocks until the
                              pipe is emptied some. 
```

僵局！

* * *

`good_execute`：

```
 Parent                     Child
 ------------------------   ------------------------
 Waits for data
                            Writes to STDOUT
 Reads the data
 Waits for data
                            Writes to STDOUT
 Reads the data
 Waits for data
 ...                        ...
                            Writes to STDOUT
 Reads the data
 Waits for data
                            Exits, closing STDOUT
 Reads EOF
 Waits for child to exit 
```

管道可能会被填满，阻塞孩子；但是父母很快就会过来清空它，从而解除对孩子的阻碍。没有僵局。

* * *

`">&OUT"`评估为`>&OUT`。（没有要插入的变量）

`">&$OUT"`评估为`>&GLOB(0x########)`。（你插值了`$OUT`。）

有一种方法可以传递词法文件句柄（或者更确切地说是它的描述符），但是有一个关于它们的错误，所以我总是将包变量与`open3`.

* * *

STDOUT 和 STDERR 是独立的（除非您执行类似的操作`2>&1`，即使那样，它们也会有单独的标志和缓冲区）。如果你发现它们不是，你就会得出错误的结论。

# c# - 通用列表的通用扩展方法

> ID：10029408
> 
> 赞同：1
> 
> 时间：2012-04-05T13:20:40.543
> 
> 标签：c#, .net, generics, extension-methods, automapper

这些是我的域和视图类：

```
public abstract class Entity : IEntity
{
    [Key]
    public virtual int Id { get; set; }
}

public class City:Entity
{
    public string Code { get; set; }
}

public class BaseViewModel:IBaseViewModel
{
    public int Id { get; set; }
}

public class CityModel:BaseViewModel
{
    public string Code { get; set; }
} 
```

这是我的映射扩展：

```
public static TModel ToModel<TModel>(this IEntity entity) 
    where TModel : IBaseViewModel
{
    return (TModel)Mapper.Map(entity, entity.GetType(), typeof(TModel));
} 
```

这是它的使用方式：

```
City city = GetCity();
CityModel model = city.ToModel<CityModel>(); 
```

但对于通用列表它不起作用：

```
List<City> cities = GetCities();
List<CityModel> model =cities.ToModel<CityModel>() // doesn't work 
```

是否可以为通用列表编写扩展方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:25:34.450

你需要这样的东西

```
public static List<TModel> ToModel<TModel>(this IEnumerable<IEntity> entity) 
    where TModel : IBaseViewModel
{
    // magic
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:25:33.073

您的扩展方法接受单个实体并返回单个模型。您需要为列表添加重载。像这样的东西：

```
public static List<TModel> ToModel<TModel>(this List<IEntity> entityList)
    where TModel : IBaseViewModel
{
    return (List<TModel>)Mapper.Map(entityList, entityList.GetType(), typeof(List<TModel>));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:28:44.570

除了其他答案，您应该查看[AutoMapper](http://automapper.codeplex.com/)来映射到实体和从实体映射

# lighttpd - Lighttpd 和 mod_access

> ID：10029409
> 
> 赞同：0
> 
> 时间：2012-04-05T13:20:51.620
> 
> 标签：lighttpd

我尝试将 mod_access 添加到我的服务器，但每次运行`lighttpd-enable-mod access`时，它都会显示以下输出：

```
Available modules: auth accesslog cgi evasive evhost expire fastcgi flv-streaming no-www proxy rrdtool simple-vhost ssi ssl status userdir usertrack fastcgi-php debian-doc 
Already enabled modules: auth cgi fastcgi 
Run /etc/init.d/lighttpd force-reload to enable changes 
```

那么为什么 mod_access 不可用呢？我虽然它是标准的轻量级产品？最重要的是如何添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:28:40.617

我认为 mod_access 默认启用。

你检查过你的`lighttpd.conf`吗？您应该手动：

```
server.modules  = (
    "mod_access", 
```

当我列出模块时，我有：

```
lucid@lucid:/home/lucid# lighttpd-enable-mod
Available modules: auth cgi fastcgi proxy rrdtool simple-vhost ssi ssl status userdir
Already enabled modules: fastcgi simple-vhost 
```

如您所见，我在这里没有 mod_access，它在我的 conf 中启用。

# php - 检测客户端的浏览器是否关闭了 Cookie

> ID：10029410
> 
> 赞同：1
> 
> 时间：2012-04-05T13:20:52.613
> 
> 标签：php, web-services, cookies

我想检查我网站的用户是否允许使用 cookie。

基本上我想做以下事情：

```
<?php
     if(cookies are enabled)
     {
          /* Cookies related code goes here */
          /* Create PHP cookie, read cookies etc */
     }
     else
     {
          /* Do something else */
     }
?> 
```

我的想法是检查`setcookie`函数是否返回`true`然后启用cookie，否则不启用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:49:35.620

如上所述：它并不总是有效。

所以，基本上，你可以做这样的事情：

```
<?php
setcookie('enabled', '1');
if($_COOKIE['enabled']=='1'){
    echo('Cookies are enabled. ');
}else{
    if($_GET['nocookies']==1){
        echo('Cookies are disabled. ');
    }else{
        $adr = explode('/', $_SERVER['SCRIPT_NAME']);
        header('Location: '.$adr[count($adr)-1].'?nocookies=1');
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:24:58.730

'setcookie' 返回是不够的。对于 Firefox，即使 cookie 被禁用，此函数也会返回 true。我认为检查它的最佳方法是在 cookie 中设置一个值并在下一个请求中检查该值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-09T15:46:59.870

要准确回答您的问题，如果您创建一个函数

```
<?php
function cookies_are_enabled() {
    setcookie('enabled', 'enabled');
    return $_COOKIE['enabled'] === 'enabled';
}
?> 
```

然后在你的代码中你有：

```
<?php
if (cookies_are_enabled()) {
  /* Cookies related code goes here */
  /* Create PHP cookie, read cookies etc */
} else {
  /* Do something else */
}
?> 
```

**更新：**正如评论中指出的那样。这不会直接起作用。从[setcookie](http://php.net/manual/en/function.setcookie.php) PHP 页面（我的重点）：

> '一旦设置了 cookie，**就可以在下一页加载**时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。注意，像 $_COOKIE 这样的超全局变量在 PHP 4.1.0 中可用。Cookie 值也存在于 $_REQUEST 中。

鉴于您不能信任 setcookie，我能想到的最好的办法就是强制重定向。

```
<?php
function cookies_are_enabled() {
    // if first page load
    // set cookie and redirect
    // if redirected check the cookie
    if (isset($_GET['cookie_check'])) {
        return $_COOKIE['enabled'] === 'enabled';
    } else {
        setcookie('enabled', 'enabled');
        if (empty($_SERVER['QUERY_STRING'])) {
            $url = $_SERVER['PHP_SELF'].'?cookie_check=1';
        } else {
            $url = $_SERVER['PHP_SELF'].'?'.$_SERVER['QUERY_STRING'].'&cookie_check=1';
        }
        exit(header("Location: $url"));
    }
}

if (cookies_are_enabled()) {
    /* Cookies related code goes here */
    /* Create PHP cookie, read cookies etc */
    $message = 'cookies are enabled';
} else {
    /* Do something else */
    $message = 'cookies are <strong>not</strong> enabled';
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cookies!</title>
</head>
<body>
    <p><?php echo $message; ?></p>
</body>
</html> 
```

# css - 按钮/DIV 切换

> ID：10029411
> 
> 赞同：0
> 
> 时间：2012-04-05T13:20:52.630
> 
> 标签：css, html

我有一个按钮，我想在单击它时来回更改其标签。我找到了这个线程

[你如何创建一个切换按钮？](https://stackoverflow.com/questions/309081/how-do-you-create-a-toggle-button)

这个例子

[http://jsfiddle.net/LmULE/](http://jsfiddle.net/LmULE/)

这很好，但我试图弄清楚如何实际更改标签（例如，单击时从“向上”变为“向下”）。

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:26:16.000

我改变了小提琴

[更新小提琴](http://jsfiddle.net/LmULE/95/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:30:53.597

您可以使用`.hasClass();`

```
if ($(this).hasClass("down"))
{
    $(this).html("Down!");
}
else
{
    $(this).html("Up!");
} 
```

在您的代码中：http: [//jsfiddle.net/Before/XNQce/2/](http://jsfiddle.net/Before/XNQce/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:28:55.620

这很简单。

```
$(document).ready(function(){
var i=0;
$('a#button').click(function(){
    $(this).toggleClass("down");
    if(i%2==0)$(this).html('divide by 2');
    else $(this).html('not divide by 2');
    i++;            
});
});​ 
```

使用一个变量，您可以检查您的按钮处于什么状态。上面的代码只是该类型状态管理的粗略。

检查这个[http://jsfiddle.net/LmULE/100/](http://jsfiddle.net/LmULE/100/)

# ruby-on-rails-3 - 时区选择/默认值 - 如何在 Ruby on Rails 中保持隐藏

> ID：10029413
> 
> 赞同：0
> 
> 时间：2012-04-05T13:20:59.400
> 
> 标签：ruby-on-rails-3, datetime, time, timezone

我遇到了时区问题。

我放了

```
config.time_zone = 'Eastern Time (US & Canada)'
config.active_record.default_timezone = 'Eastern Time (US & Canada)' 
```

在我的 application.rb 文件中，它在大多数情况下都能正确处理时间——除了表单之外的所有地方。由于某种原因，它在表格中显示 UTC 时间，您必须输入 UTC 时间。在其他任何地方（包括如果我在文本字段正上方输出时间以进行调试），它会以正确的本地时间显示它，尽管它仍然显示 -0400，我也想隐藏它。在页面上输出时间给我：“2012-04-07 02:35:00 -0400” 但在表格中，它显示为“2012-04-07 06:35:00.000000”

关于为什么它在表格中显示不同的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:01:59.443

你有没有试过，`Time.now.in_time_zone`而不是只是`Time.now`，看看这个[相关的问题](https://stackoverflow.com/questions/4362663/timezone-with-rails-3)

# facebook - 从没有弹出窗口的 F acebook 插件登录

> ID：10029415
> 
> 赞同：1
> 
> 时间：2012-04-05T13:21:03.110
> 
> 标签：facebook, iframe, login, popup, facebook-like

我正在使用[Facebook 之类的插件](http://developers.facebook.com/docs/reference/plugins/like/)。

当用户点击Like按钮时，当他没有登录时，Facebook会显示一个登录弹出窗口。

如何自定义此行为，以在同一窗口或 iframe 中打开登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:05:43.667

由于 Facebook 社交插件在`iframe`标签中呈现，您无法控制这一点，并且 Facebook 不提供自定义该行为的方法。

# java - Schema Spy 找不到 postgresql 驱动程序

> ID：10029423
> 
> 赞同：14
> 
> 时间：2012-04-05T13:21:48.367
> 
> 标签：java, postgresql, jar, driver, schemaspy

我想使用 Schema Spy 来生成模式图，

我指定了以下命令

```
java -jar schemaSpy_5.0.0.jar -t pgsql -host 10.100.71.21[:5432] -db mydb -s public -u username -p password -dp postgresql-8.0-312.jdbc3.jar -o output/ 
```

我在与模式间谍 jar 文件相同的目录中有 postgresql 驱动程序 jar 文件。但它给出了以下错误

```
[schemaSpy_5.0.0.jar]/net/sourceforge/schemaspy/dbTypes/pgsql.properties
java.lang.ClassNotFoundException: org.postgresql.Driver

Failed to load driver 'org.postgresql.Driver'from: [file:/home/panx/postgresql-8.0- 312.jdbc3.jar]
This entry doesn't point to a valid file/directory: [/whereever/postgresql-8.0-312.jdbc3.jar]

Use the -dp option to specify the location of the database
 drivers for your database (usually in a .jar or .zip/.Z). 
```

任何帮助，将不胜感激。

谢谢，

潘卡伊

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T04:42:52.697

我认为问题在于您没有将类路径添加到驱动程序。你必须像这样添加你的类路径

```
java -jar schemaSpy_5.0.0.jar -t pgsql -host 10.100.71.21[:5432] -db mydb -s public -u username -p password -dp /home/panx/postgresql-8.0-312.jdbc3.jar -o output/
```

如果它不起作用，您可以下载该项目的源代码。在项目中，dbTypes 文件夹中有 pgsql.properties 文件。你可以用你的类路径来改变它，我认为这可以解决你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-11T19:20:41.660

我想补充几点。

1.  您将在 Graphviz 中使用 Schema Spy。版本 2.31+ 不会向 Window 的系统路径变量添加条目。因此，在您下载并安装 Graphviz 后，将路径变量更新为 Graphviz 的 bin 目录。(C:\Program Files (x86)\Graphviz2.38\bin)
2.  下载整个项目源以更改属性文件中的类路径的替代方法是使用 7-zip 更新 jar。
3.  使用 7-zip 打开 jar 文件导航到**net/sourceforge/schemaspy/dbTypes/** 右键单击​​ pgsql.properties 说编辑。
4.  更改 driverPath 的以下条目，使其指向 jdbc jar 文件 **driverPath=D:/Work/JavaProjects/tools/postgresql-9.3-1100.jdbc4.jar**
5.  点击保存并更新。这应该可以解决问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-18T13:34:07.317

首先你需要在[这里](https://jdbc.postgresql.org/download.html#supported)下载实际的驱动程序。
然后使用设置的驱动程序路径运行，例如 Windows

```
java -jar schemaSpy.jar  -t pgsql -host localhost:5432 -db _dbname_ -s _schena_name_ -u postgres -p  -o D:\RVA\postgreSQL\  -dp "D:\Program Files (x86)\PostgreSQL\pgJDBC\postgresql-42.2.5.jar" 
```

# mysql - Mysql日期和rails日期与UTC

> ID：10029424
> 
> 赞同：2
> 
> 时间：2012-04-05T13:21:48.967
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

我们希望得到所有在特定日期出生的人。目前我们使用这样的查询：

```
User.where(["day(birthdate) = day(?) AND month(birtdate) = month(?)", Time.now.utc, Time.now.utc ]) 
```

现在，当我们在表单中保护日期为 29/03/1989 的用户时，数据库中的出生日期字段包含以下内容：28/03/1989 22:00:00 UTC+2

问题是当我们使用 mysql 的 day() 函数时，mysql 会将 28 而不是 29 作为一天。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:19:42.927

您使用哪种 MySQL 数据类型来存储生日属性？通过选择数据类型`date`而不是`datetime`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:52:47.320

在 environment.rb (Rails 2.x) 或 application.rb (Rails 3.x) 中设置正确的时区可能会有所帮助，例如 config.time_zone = "Europe/Berlin"？Active Record 应该自动将时间转换到这个区域。

# android - 如何使用服务器数据库？

> ID：10029426
> 
> 赞同：0
> 
> 时间：2012-04-05T13:21:55.360
> 
> 标签：android, sql-server, remote-server

我在 sqlserver 中创建了一个数据库。现在我想将此服务器数据库连接到我的 android 应用程序。所以我可以从世界上任何地方访问它。如何连接它们以及如何访问服务器数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:32:02.100

You need to use `Json or XML format(REST API's) web service` in order to INSERT,UPDATE,DELETE,READ data between your phone and sqlserver. see [this](https://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/) article for more info

and see this post for: [how to connect sql server using JTDS driver in Android](https://stackoverflow.com/questions/7631758/how-to-connect-sql-server-using-jtds-driver-in-android)

# java - alfresco - 获取上传文件的 noderef

> ID：10029428
> 
> 赞同：0
> 
> 时间：2012-04-05T13:21:59.757
> 
> 标签：java, alfresco

我正在尝试将文件的节点引用上传到我的 java 类中的默认根目录。

我试过[这个](http://wiki.alfresco.com/wiki/NodeRef_cookbook#Getting_a_NodeRef_from_its_path)链接。

但它返回空结果集。如何编写搜索查询来获取特定的文件节点。或者有什么方法可以从 java 类中的 sting 创建节点 ref。

我的代码：

```
NodeRef companyHomeNodeRef = null;
            StoreRef storeRef = new StoreRef(StoreRef.PROTOCOL_WORKSPACE,
                    "SpacesStore");

            ResultSet rs = searchService.query(storeRef,
                    SearchService.LANGUAGE_LUCENE, "\\\"/app:company_home/app:user_homes/sys:boris/cm:mypics\\");

            try {
                System.out.println("length :" + rs.length());
                if (rs.length() == 0) {
                    // throw new Exception("Didn't find Company Home");
                } else {
                    companyHomeNodeRef = rs.getNodeRef(0);
                }
            } finally {
                rs.close();
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T19:55:13.577

您的 Lucene 搜索语法不正确。如果你想要上传图片的文件夹，你可以使用：PATH:"/app:company_home/app:user_homes/cm:boris/cm:mypics"

如果您希望对象位于该文件夹中，您可以使用：PATH:"/app:company_home/app:user_homes/cm:boris/cm:mypics/*"

如果您想要该文件夹中的特定对象，您可以使用：PATH:"/app:company_home/app:user_homes/cm:boris/cm:mypics/cm:test.png"

一个测试查询的好工具是节点浏览器，它在 Alfresco Explorer 和 Alfresco Share 中都可用。请务必选择“Lucene”作为搜索语法，然后尝试您的查询。一旦他们返回您正在寻找的对象，请将其插入您的 Java 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:09:00.457

我已经解决了这个问题。下面是从节点引用字符串创建文件的节点引用并更新文件内容的代码。

```
 AuthenticationUtil.runAs(new RunAsWork<String>() {

                @Override
                public String doWork() throws Exception {

                    NodeRef nodeRef = new NodeRef("workspace://SpacesStore/f1a5e908-80cb-4c6e-b919-cc80fe53b835");
                    if(contentService != null) {
                        ContentWriter writer = contentService.getWriter(nodeRef, ContentModel.PROP_CONTENT, true);
                        if(writer != null) {
                            writer.putContent(new ByteArrayInputStream("updated content".getBytes()));
                        } 
                    } 
                    return null;
                }

            }, AuthenticationUtil.getSystemUserName()); 
```

# c++ - 集群节点的 libmemcached 故障转移

> ID：10029432
> 
> 赞同：2
> 
> 时间：2012-04-05T13:22:17.667
> 
> 标签：c++, c, memcached, libmemcached

我在“c”中使用 libmemcached 来写入数据，使用 MEMACACHED_DISTRIBUTION_CONSISTENT_KETAMA。所有密钥都很好地分布在所有集群节点上，但是当我关闭其中一个节点时，密钥不会迁移。在谷歌上搜索并不清楚如何设置 libmemcached 自动执行此操作。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T14:54:38.053

我认为你必须使用：[http ://docs.libmemcached.org/memcached_behavior.html#MEMCACHED_BEHAVIOR_REMOVE_FAILED_SERVERS](http://docs.libmemcached.org/memcached_behavior.html#MEMCACHED_BEHAVIOR_REMOVE_FAILED_SERVERS)

如果您不允许 libmemcached 删除失败的服务器，它们会卡在列表中，因此不会重新分配密钥。

请注意，死服务器将在 MEMCACHED_BEHAVIOR_DEAD_TIMEOUT（参见[1](http://bazaar.launchpad.net/~tangent-trunk/libmemcached/1.2/view/head:/libmemcached/behavior.cc#L240)、[2](http://bazaar.launchpad.net/~tangent-trunk/libmemcached/1.2/view/head:/libmemcached/connect.cc#L684)）秒后再次进行测试。因此，如果它再次启动，它将被带回完整的服务器列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T20:28:47.517

如果 memcached 服务器出现故障，Libmemcached 不会在内部处理密钥迁移。在这种情况下，当 libmemcached 尝试检索存储在故障服务器中的密钥时，将会出现缓存未命中。

如果我们使用 MEMACACHED_DISTRIBUTION_CONSISTENT_KETAMA，它只会确保缓存未命中率是最小的，因为密钥是分布式的，并且不需要完全重新散列。

解决方案：您可以跨多个节点复制密钥，这将帮助您在服务器发生故障时检索（密钥，值）对。但请注意，它不是一个高度一致的解决方案。存在陈旧数据的可能性。

EVICT 失败的服务器，以便将密钥散列到新位置并从集群中删除。

# c++ - 哪个 gcc 和 g++ 版本支持 c 和 c++ 的哪个标准？

> ID：10029437
> 
> 赞同：17
> 
> 时间：2012-04-05T13:22:46.903
> 
> 标签：c++, c, gcc, g++, standards

比如哪个gcc版本支持c99？

是否有任何表格或图表来显示 gcc 和 g++ 的标准支持状态？

gcc 和 g++ 是如何演变的？

谢谢~

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T13:47:07.287

非常严格地说，GCC 只支持 C89、C++98 和 C++03，从 4.3 开始都是肯定的。

到目前为止，对 C99 的支持仍然不完整，但是 GCC 长期以来一直支持一个非常大且可用的子集。

实验性的 C++11 支持从 4.3 开始，此后一直在改进；它在 4.6.x 中已经非常有用，并且在 4.7 中添加了更多功能（尽管 4.7.0 有点不稳定）。

也有一些 C11 支持，但 C11 的许多更改需要一个适当的新 C 库，它不容易替换。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T13:27:26.413

您可以通过最新版本获得最广泛的标准支持 - 目前为 4.7。选择的标准可以用`-std`开关设置。[这是一篇描述可用值的文章](http://gcc.gnu.org/onlinedocs/gcc/Standards.html)。还可以使用 启用一些附加功能/不同行为`-fpermissive`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T13:36:09.793

见[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-29T23:27:28.300

我想这个表也很有用： [cppreference compiler support page](http://en.cppreference.com/w/cpp/compiler_support)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T13:42:04.517

支持细节可以在 gnu 网站上找到。我记得大约有几十个标准 gcc 不适用于 c99。无论如何，在 gcc 中支持 c99 只需要简单的 --std=c99 参数

# tfs - 在 TFS 中显示用户名的替代方法

> ID：10029440
> 
> 赞同：2
> 
> 时间：2012-04-05T13:22:59.123
> 
> 标签：tfs

最近的 TFS 升级导致 TFS 服务器移动到另一个域，我们的用户名与我们的真实姓名无关。因此，在查看签入历史记录或谁签出文件时 - 我们看到的只是数字，您需要找到谁拥有该用户名。

我们不能是唯一有这个问题的公司。您发现了哪些解决方案/替代方案可以“减少”这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:55:55.347

在 TFS 2010 中，这是不可能的。

幸运的是，微软回应了这一流行的抱怨，并在 TFS 11 中引入了一个设置显示名称的选项：

![在此处输入图像描述](../Images/47cd24814b7ddbd228028121969d5f55.png)

# python - Python 挑战 2 级

> ID：10029441
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:23:03.157
> 
> 标签：python

我正在尝试解决[pythonchallenge.com](http://www.pythonchallenge.com/)中的 Python 挑战。我在第 2 级。我被要求在网页源代码中给出的非常大的文本中查找稀有字符。这是： http: [//www.pythonchallenge.com/pc/def/ocr.html](http://www.pythonchallenge.com/pc/def/ocr.html)

首先，我不想要任何解决方案。我只想自己解决它，但我不是高级 Python 程序员。那么你能告诉我要研究什么来解决这个问题吗？我也不知道如何很好地处理文件。在论坛的一些线索中，提到应该使用文件来解决这个问题。那你能告诉我要学什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:26:23.043

首先，将所有字符读入一个字符串。您可以使用[`urllib2`](http://docs.python.org/library/urllib2.html)下载文件、[`open`](http://docs.python.org/library/functions.html#open)从本地磁盘读取文件或对其内容进行硬编码。要在 Python 程序中包含如此长的字符串，您可能需要使用[三引号](http://docs.python.org/tutorial/introduction.html#strings)字符串，如下所示：

```
"""
%%$@_$^__#)^)&!_+]!*@&^}@[@%]()%+$&[(_@%+%$*^@$^!+]!&_#)_*}{}}!}_]$[%}@[{_@#_^{*
@##&{#&{&)*%(]{{([*}@[@&]+!!*{)!}{%+{))])[!^})+)$]#{*+^((@^@}$[**$&^{$!@#$%)!@(&
...
""" 
```

要找出每个字符的出现次数，请查看[**`collections.Counter`**](http://docs.python.org/library/collections.html#collections.Counter).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:32:16.300

使用`Counter`from 集合来计算每个字符的出现次数以查找“稀有”字符。

剩下的留给您查看计数结果后自行计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:26:34.643

提示 1：要打开和读取文件的内容，请使用

```
with open("filename") as f:
    contents = f.read() 
```

提示 2：要计算字符数，一种选择是使用`Counter`.

# jquery - 带有列排序箭头的 JQuery 渐变标题

> ID：10029442
> 
> 赞同：0
> 
> 时间：2012-04-05T13:23:06.383
> 
> 标签：jquery

我一直在尝试找到一种适用于 IE 7+ 和 Firefox 的方法来获取渐变列标题行，并在使用 Jquery 对其进行排序时显示向上/向下箭头。下面的示例表我可以在 Firefox 中工作，但 IE 不会显示箭头。有谁知道如何让它同时适用于两者？

桌子...

```
<script>
    $(document).ready(function(){
        $("#dataTable").tablesorter({ 
            headers: sortClassAsc: 'headerSortUp',
            sortClassDesc: 'headerSortDown',
            headerClass: 'headerSort'
        });
    }); 
</script>

<table id="dataTable" class="dataTable">
    <thead>
        <tr><th>Col1</th><th>Col2</th></tr>
    </thead>
    <tbody>
        <tr><td></td><td></td></tr>
    </tbody>
</table> 
```

css....

```
table.dataTable {
    font-size: 11px;
    background: #fff;
    border-collapse: collapse;
    text-align: left;
    font-weight: normal;
    border-bottom: 1px solid #8AB8E6;
    border-top: 1px solid #8AB8E6;
}

table.dataTable td {
    border-bottom: 1px solid #ccc;
    color: #000;
    padding: 3px 4px;
}

table.dataTable thead tr th {
    font-size: 12px;
    font-weight: normal; 
    padding: 4px;
    border-bottom: 1px solid #8AB8E6;
    color: #000;
    text-decoration: none;
    cursor: pointer;

    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#E0F4FC', endColorstr='#9BC5F4'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#E0F4FC), to(#9BC5F4)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #E0F4FC, #9BC5F4); /* for firefox 3.6+ */
}

table.dataTable .headerSort {
    background-image: url('../images/bg.gif'); 
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}

table.dataTable .headerSortUp {
    background-image: url('../images/asc.gif'); 
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
}

table.dataTable .headerSortDown {
    background-image: url('../images/desc.gif'); 
    background-repeat: no-repeat;
    background-position: center right;
    cursor: pointer;
} 
```

# android - 如何在 Android 中干净地叠加 ScrollableViews

> ID：10029447
> 
> 赞同：0
> 
> 时间：2012-04-05T13:23:43.033
> 
> 标签：android, android-layout, android-side-navigation

为了实现导航栏ala [Facebook](https://stackoverflow.com/questions/8428416/how-to-make-facebooks-app-new-menu-on-android)，我有以下*布局*配置：

```
<FrameLayout
  android:layout_width="match_parent"
  android:layout_height="match_parent"
>
   <!-- This is the Lower Layer hosting the navbar -->
   <LinearLayout
      android:layout_width="match_parent"
      android:layout_height="match_parent"
   >
      <!-- ListView representing the navbar -->
      <ListView 
       />
   </LinearLayout>

   <!-- This is the Top Layer hosting the Content -->
   <FrameLayout 
      android:layout_width="match_parent"
      android:layout_height="match_parent"
   > 
      <!-- This is where the View of the Content will be injected -->
   </FrameLayout>
</FrameLayout> 
```

所以基本的想法是，当我想打开*导航栏*时，我只需将*TopLayer*向右移动，导航栏就会显示出来。现在这很好用，我可以与*导航栏* `ListView`交互以在应用程序中导航，只要注入到内部的视图`TopLayer`不是 a `ScrollableView`（如 another `ListView`、 a`ScrollView`或 a `WebView`）。

例如，当`TopLayer`是一个`WebView`实例时，我无法滚动并与*导航栏* `ListView`交互，因为它是`WebView`滚动的（尽管我将它移到了右侧）。

我想叠加许多`ScrollableView`'s 并非易事，但我希望有一些技巧可以克服这些问题。

谢谢你的帮助！

**编辑**

顺便说一句，这就是我改变`TopLayer`视图的方式（使用[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)）：

```
TranslateAnimation translateAnim = new TranslateAnimation(0.0F, mListView.getWidth(), 0.0F, 0.0F);
translateAnim.setDuration(..);
translateAnim.setFillAfter(true);
mTopLayerView.startAnimation(translateAnim); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:34:52.400

根据我的应用程序 - Android UI Patterns (https://play.google.com/store/apps/details?id=com.groidify.uipatterns)，Facebook 导航和动画有 2 个示例实现，这是：

*   android-sliding-menu-demo: [https://github.com/gitgrimbo/android-sliding-menu-demo](https://github.com/gitgrimbo/android-sliding-menu-demo)
*   gui-sliding-sidebar: [https://github.com/walkingice/gui-sliding-sidebar](https://github.com/walkingice/gui-sliding-sidebar)

如果有效，您可以尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:45:43.723

事实证明，问题不是由于叠加`ScrollableView`s 或其他原因，而是由于使用[TranslateAnimation](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)时动画视图的逻辑位置（即：不可视）仍然绑定到其原始位置。因此，当我以为我在点击导航的项目时，我实际上是在与`ContentView`我认为已经移动的项目进行交互。

现在我正在使用[ObjectAnimator](http://developer.android.com/reference/android/animation/ObjectAnimator.html#setPropertyName%28java.lang.String%29)来解决这个问题，并且效果很好。我只需要确保与 Pre-Honeycomb 设备的兼容性（我正在考虑使用[NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)来解决这个问题。如果有人知道使用旧动画 API 正确解决此问题的任何其他替代方法，请随时回答这个[问题](https://stackoverflow.com/questions/10513289/android-how-to-interact-with-a-view-after-it-has-been-animated)）。

# php - PHP，如何制作：domain.com/profile.php?user=admin

> ID：10029449
> 
> 赞同：-4
> 
> 时间：2012-04-05T13:24:00.877
> 
> 标签：php

我正在用 PHP 制作个人资料页面，

如何使*domain.com/profile.php?user=admin 之*类的 url在 PHP 中工作？（这将显示用户“admin”的个人资料）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:30:05.957

假设您有一个数据库和一个数据库连接以及一个选定的数据库。

```
<?php
// Get your variable (admin)
$user = mysql_real_escape_string($_GET["user"]);

// now query the db
$sql = "SELECT * FROM your_user_database WHERE user = '$user'";
$result = mysql_query($sql);
$datarow = mysql_fetch_row($result);
?> 
```

现在在您的 html 中使用数据行。

```
<div>
    <?php echo $datarow[0] ?> <?php echo $datarow[1] ?> etc...
</div> 
```

祝你好运

# jsf - 如何在 JSF 1.2 中调用多个支持 bean 方法？

> ID：10029450
> 
> 赞同：0
> 
> 时间：2012-04-05T13:24:06.307
> 
> 标签：jsf, call, javabeans

有没有办法从 JSF 中的支持 bean 调用多个方法？

我有这样的事情：

```
 <h:outputLink value="#{bean.selectedEntry.link}">
                    <h:graphicImage
                        url="/CMS/button.png"
                        alt="button"></h:graphicImage>
            </h:outputLink> 
```

当用户单击 outputLink 时，我想从 Bean 执行一些其他方法。有可能的？

PS我正在使用JSF 1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T17:19:52.640

将其替换为`<h:commandLink>`。

例如

```
<h:form>
    <h:commandLink action="#{bean.openLink}">
        <h:graphicImage
            url="/CMS/button.png"
            alt="button"></h:graphicImage>
    </h:commandLink>
</h:form> 
```

和

```
public void openLink() throws IOException {
    // You can just call any (multiple) Java methods here the usual way.
    // ...

    FacesContext.getCurrentInstance().getExternalContext().redirect(selectedEntry.getLink());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:36:34.680

您为什么不想从您在 bean 中调用的方法中调用该方法？

如果您正在调用的方法在其他场景中使用，则重构您的代码以分离关注点并为每个不同的场景提供入口点。

# ssis - ssis 包中派生列的表达式问题

> ID：10029454
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:24:10.393
> 
> 标签：ssis

我有一个像这种格式的字符串。在我的情况下，我只需要从字符串中提取字符

案子

```
1)12AB
2)SD12
3)1WE4 
```

输出

```
1)AB
2)SD
3)WE 
```

我只需要提取字符。我在 SSIS 包的派生列中使用此表达式

```
SUBSTRING(MediaIDCode,1,2) 
```

但是这个表达式只适用于这个条件

```
1)12AB 
```

我需要得到一个适用于上述所有条件的表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:25:52.370

使用脚本组件和 RegEx 删除数值

```
Row.description = System.Text.RegularExpressions.Regex.Replace(Row.description, "[^0-9]", ""); 
```

# java - 为什么我不能在同一个班级中使用微调器中的 int？

> ID：10029455
> 
> 赞同：0
> 
> 时间：2012-04-05T13:24:11.643
> 
> 标签：java, android

好的，所以我正在开发一个 android 应用程序，并且我已经植入了微调器...我总共有四个微调器，我了解到，如果微调器从字符串中读取选项，它有一个定义的选择数字（即第一个选项是“0”接下来是“1”等等）

我有以下微调器的代码

```
 Spinner a = (Spinner) findViewById(R.id.spinner1);
    a.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView adapter, View v, int a,
                long lng) {
            // do something here
            Toast.makeText(adapter.getContext(), "You selected: " + a,
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onNothingSelected(AdapterView arg0) {
            // do something else
        }
    }); 
```

还有一个，但带有 int "b"

但稍后在同一堂课中，我想使用一些数学来获得 e=a,b（即如果 a=6 和 b=5 e=65，或 a=4 和 b=3 e=43）这很容易做到通过执行

```
int e=a*10+b; 
```

问题是我想在你按下按钮时显示这个，所以我有以下代码

```
public void Calc(View v) {
    int e = a * 10 + b;
    Toast.makeText(this, "Value: " + e, Toast.LENGTH_LONG).show();
} 
```

但导致错误““a”和“b”无法解析为变量”为什么会这样以及如何创建一个能够读取这些变量的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:25:37.477

这是范围问题，因为您在方法中声明`a`，所以在方法之外无法访问。将微调器声明为类成员，并且只在方法中分配它：

班级范围：

```
Spinner a; 
```

在方法中：

```
a = (Spinner) findViewById(R.id.spinner1); 
```

然后：

```
public void Calc(View v) {
    int itemA, itemB;
    itemA = a.getSelectedItemPosition();
    itemB = b.getSelectedItemPosition();
    int e = itemA * 10 + itemB;
    Toast.makeText(this, "Value: " + e, Toast.LENGTH_LONG).show();
} 
```

# android - 自定义 android DatePicker 以仅包含月份和年份选择字段

> ID：10029458
> 
> 赞同：2
> 
> 时间：2012-04-05T13:24:19.753
> 
> 标签：android, android-layout, android-intent, android-emulator, android-actionbar

> **可能重复：**
> [如何显示只有月份和年份字段的 android 日期选择器？](https://stackoverflow.com/questions/4122929/how-to-display-date-picker-for-android-with-only-month-and-year-fields)

我在自定义 Android 小部件时遇到问题`DatePicker`。如果我`DatePicker`在我的 Android 应用程序代码中定义了一个：

```
DatePickerDialog datePickerDialog = new DatePickerDialog(...);
datePickerDialog.show(); 
```

我怎样才能使它`DatePicker`只在设备屏幕上显示**月份**和**年份**选择字段而没有**日期选择字段？**

# jquery - jQuery 可拖动位置值

> ID：10029469
> 
> 赞同：0
> 
> 时间：2012-04-05T13:24:57.040
> 
> 标签：jquery, draggable, droppable

我有一个原始的 JavaScript 拖动功能。当我在拖动元素的同时在 Firebug 中查看动态源时，我看到样式的值 - 顶部和左侧发生了变化。

当我在 jQuery 中尝试使用可拖动方法时，源代码中没有 top 和 left 的值。

为什么会这样？...以及如何使用 jQuery 获取元素的实际最后位置并存储它，然后在元素被放置在可放置区域中时使用它来设置位置？

另外，当我使用 droppable 方法时：放置区域由要放置的元素激活覆盖放置区域，而不是鼠标在放置区域上方的位置。这可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:32:32.353

I'm not very sure what you're doing, but this might help -

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

This gets the position relative to the document.

Cheers.

edit: what Alex said!

# c++ - 推断模板的非类型名参数的值

> ID：10029470
> 
> 赞同：2
> 
> 时间：2012-04-05T13:24:58.613
> 
> 标签：c++, templates

如果您使用类型参数定义模板

```
template <class T>
void f(const T& arg){...}; 
```

那么`T`即使没有明确提供参数，编译器也可以推导出参数。有没有办法用下面的模板达到同样的效果？

```
template <int n>
void g(){...}; 
```

我的意思是，当参数是值（int、bool 等）而不是类型时，是否有模板参数推导规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:48:10.513

> 我的意思是，当参数是值（int、bool 等）而不是类型时，是否有模板参数推导规则？

是的，它们与类型完全相同。但是，请注意，所有模板参数推导都取决于参数的已知静态类型（即不是运行时整数变量）（转换运算符除外，其中返回类型很重要）。

所以你可以这样做：

```
template <int n>
void g(int (&array)[n]){...}; 
```

并从数组的大小推断`n`。

# php - PHP 可能的组合 2 个值的 3 个数组

> ID：10029472
> 
> 赞同：2
> 
> 时间：2012-04-05T13:25:03.987
> 
> 标签：php, combinations, combinatorics, discrete-mathematics

> **可能重复：**
> [PHP 采用所有组合](https://stackoverflow.com/questions/9787051/php-take-all-combinations)

我正在考虑用 PHP 做一些东西来显示我所有的车牌组合。例如：

您有 3 个框可以填写最多 2 个值

喜欢

```
BOX1 BOX2 BOX3
75   PM   M5 
7S   PH   MS
Z5   PN   H5
ZS   RM   HS
25   RH   N5
2S   RN   NS

NOT BOX1+BOX1+BOX1
It needs to show me
ex. 75-PM-M5
ex. 75-PH-MS
ex. 75-PN-MS
ex. 75-PM-H5
ex. 75-PH-H5
ex. 75-PN-H5
So, BOX1+BOX2+BOX3

The PHP script needs to calculate all the combinations for BOX1+BOX2+BOX3
So BOX1 value1 and value2 are ONE value not two separate values. 
In BOX2 value1 and value2 are also ONE value not two separate values and so on.

If I want all combinations of 
BOX1'91' + BOX2'HF' + BOX3'PF'
BOX1'74' + BOX2'RT' + BOX3'YT'

It will calculate an amount of 2x2x2=8 combinations 

ex. 91-HF-PF
ex. 91-HF-YT
ex. 91-RT-PF
ex. 91-RT-YT
ex. 74-HF-PF
ex. 74-HF-YT
ex. 74-RT-PF
ex. 74-RT-YT 
```

示例密码

您需要输入 4 个密码才能使用您的 apm 卡

```
PIN1+PIN2+PIN3+PIN4
1    1    1    1
2    2    2    2
3    3    3    3
4    4    4    4
5    5    5    5
6    6    6    6
7    7    7    7
8    8    8    8
9    9    9    9
0    0    0    0 
```

所以你总共有 10x10x10x10=10.000 个组合，它必须显示所有组合

如果有人可以帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T23:32:42.110

**代码 ：**

```
<?php

function combinations($arr, $n)
{
    $res = array();

    foreach ($arr[$n] as $item)
    {
        if ($n==count($arr)-1)
            $res[]=$item;
        else
        {
            $combs = combinations($arr,$n+1);

            foreach ($combs as $comb)
            {
                $res[] = "$item $comb";
            }
        }
    }
    return $res;
}

// Your ARRAY (first array is like 'BOX1', etc - )
// you can put as many items in each 'BOX' as you like... 
// and as many 'boxes' as you like
$words = array(array('A','B'),array('C','D'), array('E','F'));

$combos = combinations($words,0);  // ALWAYS, call it with 0 as the last parameter
print_r($combos);

?> 
```

**输出 ：**

```
Array
(
    [0] => A C E
    [1] => A C F
    [2] => A D E
    [3] => A D F
    [4] => B C E
    [5] => B C F
    [6] => B D E
    [7] => B D F
) 
```

* * *

我认为这正是您所需要的... :-)

# mysql - MySql 查询返回的数组不像输入数组那样排序

> ID：10029474
> 
> 赞同：2
> 
> 时间：2012-04-05T13:25:11.083
> 
> 标签：mysql, arrays, zend-framework

我有一个带有一些 id 的数组，用于从数据库中选择一个行集。

选择顺利，但我没有在有序的给定数组中收到我的结果

插入的数组（var_dump）

```
 0 => string '40201' (length=5)
  1 => string '44089' (length=5)
  2 => string '42106' (length=5)
  3 => string '42740' (length=5)
  4 => string '43812' (length=5)
  5 => string '44331' (length=5)
  6 => string '42109' (length=5)
  7 => string '44147' (length=5)
  8 => string '40464' (length=5)
  9 => string '42108' (length=5) 
```

输出数组

```
array
  0 => 
    array
      'id' => string '40201' (length=5)
  1 => 
    array
      'id' => string '40464' (length=5)
  2 => 
    array
      'id' => string '42106' (length=5)
  3 => 
    array
      'id' => string '42108' (length=5)
  4 => 
    array
      'id' => string '42109' (length=5)
  5 => 
    array
      'id' => string '42740' (length=5)
  6 => 
    array
      'id' => string '43812' (length=5)
  7 => 
    array
      'id' => string '44089' (length=5)
  8 => 
    array
      'id' => string '44147' (length=5)
  9 => 
    array
      'id' => string '44331' (length=5) 
```

我的zend查询：

```
 $select = $this->_db
        ->select()
    ->from(array('file' => 'filehosts'), array('id'))
    ->where('file.id IN(?)', $array);

    $result = $this->getAdapter()->fetchAll($select);
    return $result 
```

我认为这是 id 跟进的结论，第一个被拿走了，然后他只拿了他首先找到的那个在数组中的人，对吗？我怎样才能使这个更严格，这样查询就不会改变数组顺序？

提前致谢。缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:24:41.087

Mysql FIELD 功能将起作用。

```
$select = $this->_db->select()
->from(array('file' => 'filehosts'), array('id'))
->where('file.id IN(?)', $array)
->order(new Zend_Db_Expr('FIELD(file.id, ' . implode(',', $array) . ')'));

$result = $this->getAdapter()->fetchAll($select);
return $result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:31:58.270

When you do a query, you can order the results with `ORDER BY`

```
SELECT * FROM `file` WHERE `file`.`id` IN $array ORDER BY `file`.`id` ASC 
```

I'm not familiar with zend, but I think `->order('file.id')` could do the job.

See [Zend documentation](http://framework.zend.com/manual/en/zend.db.select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:45:52.257

想想底层代码会做什么。

它在几乎可以肯定按 id 排序的文件中遍历它们，并测试它是否在您的数组中，而数组中的顺序完全不同。

$array 中项目的顺序与请求完全无关，重要的是存在与否。

# opengl-es - opengl es：绘制具有渐变渐变的纹理

> ID：10029479
> 
> 赞同：1
> 
> 时间：2012-04-05T13:25:26.070
> 
> 标签：opengl-es, gradient

我对opengl完全陌生，需要一些帮助来绘制应用了渐变的纹理。

现在我正在使用以下代码绘制纹理：

```
glPushMatrix();
glBindTexture(GL_TEXTURE_2D,fcr.texture);
glTranslatef(trans, 0, 0);
glScalef(sc,sc,1.0);
glColor4f(1.0,1.0,1.0,0.4);
glDrawArrays(GL_TRIANGLE_STRIP,0,4);
glColor4f(1,1,1,1); 
```

在上面的代码中，`glColor4f(1.0,1.0,1.0,0.4);`将透明度应用于绘制的图像。现在，我想对图像应用透明渐变而不是纯色透明色，以模拟淡出效果。

找到这个线程[iPhone OpenGL - 如何渐变淡出纹理？](https://stackoverflow.com/questions/3536763/iphone-opengl-how-to-gradient-fade-out-a-texture)，这与我的问题相同，只是我希望将渐变应用于主图像本身而不是反射。但我无法从给出的答案中找出解决方案。

我想我应该使用`glTexEnvi`，但是如何使用渐变绘制另一个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:53:03.813

除了在绘制四边形之前调用 glColor4f 之外，您是否可以设置一个 glColorPointer（或 glVertexAttribPointer），以便四边形的四个顶点中的每一个都获得不同的 alpha 值？

即RGBA值：

```
 (x,x,x,1)       (x,x,x,0)
     -----------------
     |               |
     |               |
     |               |
     |               |
     |               |
     |               |
     -----------------
  (x,x,x,1)      (x,x,x,0) 
```

这将为您提供从右到左的 alpha 渐变。

# php - 输出带有命名空间的 xml 文件

> ID：10029488
> 
> 赞同：0
> 
> 时间：2012-04-05T13:25:38.757
> 
> 标签：php, xml

我正在使用 SimpleXMLElement 生成一个 xml 文件。

由于命名空间，我在格式化文件时遇到了一些困难。希望有人可以提供帮助。（获取数据没有问题...只是不确定何时使用 ->addChild、->addAttribute 和其他任何东西）

该文件需要采用这种精确结构，因为另一个应用程序（JW Player）将从中读取：

```
//xml structure
<?xml version="1.0"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/" xmlns:jwplayer="http://developer.longtailvideo.com/trac/" >
<channel>
<title>MRSS Playlist Playlist</title>
...
<item>
<title>Cardio routine with handweights</title>
<media:content url="videos/set2_first_5min.flv" />
<media:thumbnail url="thumbs/set2_first.png" />
<description>side jumps, arm curls, leg squats, arm lifts</description>
<jwplayer:duration>300</jwplayer:duration> 
<jwplayer:start>5</jwplayer:start> 
</item>
...
</channel>
</rss>
//export xml file
$xml->asXML("devplaylist.xml"); 
```

任何帮助，将不胜感激。谢谢， DK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:55:57.417

尝试这个：

```
<?php
$xml = simplexml_load_string( '<?xml version="1.0"?><rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/" xmlns:jwplayer="http://developer.longtailvideo.com/trac/"></rss>' );
$channel = $xml->addChild( 'channel' );

$channel->addChild( 'title', 'TITLE_HERE' );
$channel->addChild( 'link', 'LINK_HERE' );
$channel->addChild( 'description', 'DESCRIPTION_HERE' );
$channel->addChild( 'language', 'LANGUAGE_HERE' );
$channel->addChild( 'copyright', 'COPYRIGHT_HERE' );
// rest of your nodes

$i=0;
while( ++$i < 2 ) { // will run only once, only for demo purpose...
    $item = $channel->addChild( 'item' );

    $item->addChild( 'title', 'Cardio routine with handweights' );
    $mediaContent = $item->addChild( 'content', '', 'http://search.yahoo.com/mrss/' );
    $mediaContent->addAttribute( 'url', 'videos/set2_first_5min.flv' );
    $mediaThumbnail = $item->addChild( 'thumbnail', '', 'http://search.yahoo.com/mrss/' );
    $mediaThumbnail->addAttribute( 'url', 'thumbs/set2_first.png' );
    $item->addChild( 'description', 'side jumps, arm curls, leg squats, arm lifts' );
    $item->addChild( 'duration', 300, 'http://developer.longtailvideo.com/trac/' );
    $item->addChild( 'start', 5, 'http://developer.longtailvideo.com/trac/' );
}

//export xml file
$xml->asXML("devplaylist.xml");
?> 
```

希望能帮助到你。

# php - PHP define() 不安全用于 mysql 数据库变量？

> ID：10029490
> 
> 赞同：0
> 
> 时间：2012-04-05T13:25:51.360
> 
> 标签：php

正如问题所述，将 define() 用于密码/登录名/表名等是否不安全？

例子：

```
//database server
define('DB_SERVER', "localhost");

//database login name
define('DB_USER', "root");
//database login password
define('DB_PASS', ""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:28:01.583

这并不是真的不安全。但是要确保您必须确保添加此文件的文件在 DocumentRoot 之外。但是您在 DocumentRoot 中只有您的引导文件，对吗？:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:27:41.647

不，这不是不安全的，它只是将值存储在常量中。这些常量仅对您的脚本可见。

# xcode - 在 XCode 之外启动模拟器时，有没有办法强制 iOS 模拟器以横向模式启动？

> ID：10029501
> 
> 赞同：1
> 
> 时间：2012-04-05T13:26:23.700
> 
> 标签：xcode, xcode4, ios-simulator

我知道在您的应用程序代码和 app.plist 文件中，您可以为应用程序设置方向设置，但我对这些信息不感兴趣。我很清楚它，并且我已经多次使用它来满足我的需求。

我希望iOS模拟器在运行我的应用程序之前“启动”时以Left-Home-Landscape模式启动。如果我的应用程序默认为纵向模式，iOS 模拟器应该以横向模式启动，然后我的应用程序应该自动旋转为纵向模式。

我知道我可以启动模拟器，然后从 iOS 模拟器硬件菜单手动旋转设备，但如果我能绕过它，我宁愿不必这样做。

他们的iOS模拟器设置是否被埋在可以做到这一点的地方？我想这不太可能，因为当您启动 iOS 设备时，它总是首先以纵向模式启动。但是，我希望这不是模拟器的确切情况。

**更多信息**

仅供参考，这是针对 XCode ~~4.3.1~~ 4.3.2 的，正如我在下面的评论中提到的，假设我正在启动模拟器而没有通过在 XCode 中调试它来预加载项目。如果我只是启动模拟器，我希望它在横向启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:42:02.353

如果你找不到模拟器 plist，我注意到如果应用程序在模拟器中以横向崩溃，下次运行它时，它会以横向启动。

因此，您可以为按钮或访问已释放对象的任何内容分配一些临时操作，从而导致崩溃。在模拟器中运行应用程序，将其旋转为横向，然后点击按钮使其崩溃。停止应用程序。下次运行它时，它将处于横向。

非常难看，但它很快，它可能会工作。

* * *

抱歉，我刚刚测试过，有几点需要注意：

1) 崩溃必须发生在 willAnimateRotationToInterfaceOrientation 中。也就是说，旋转到横向必须触发崩溃。这使得这个kludge*真的*很难看。

2）当我发布此答案时，我没有看到您添加的信息：如果您在崩溃后退出模拟器程序本身，它将无法正常工作。您必须在崩溃后停止您的*应用程序并重新启动它。*

# javascript - 从 WebSQL 到 IndexedDB 的转换

> ID：10029503
> 
> 赞同：3
> 
> 时间：2012-04-05T13:26:28.833
> 
> 标签：javascript, html, web-sql, indexeddb, offlineapps

我目前正在开发一个用于提交考勤卡的移动应用程序，该应用程序与现有的会计应用程序一起使用。不用说，这个应用程序严重依赖关系数据库，这种特殊的依赖会转化为移动应用程序。

在当前状态下，移动应用程序使用 WebSQL 离线访问加载到设备上的表，同时用户可以访问 Internet。考勤卡在本地数据库上创建，然后在用户重新访问互联网时上传。此功能是应用程序的核心。

我的问题是向 IndexedDB 的过渡是否是 A.) 可行和 B.) 明智之举。如果 WebSQL 避免被弃用，这将不是问题。我开始更好地理解 IndexedDB 以及 JSON 如何使其对相对复杂的数据存储有用，但我无法真正理解它是否真的可以复制关系数据库的功能。

根据应用程序的要求，IndexedDB 似乎不是一个替代方案，但我对这个概念仍然很陌生并且对启蒙持开放态度。

那么 IndexedDB 有可能成为替代方案吗？IndexedDB 能否用于复制具有多个相关表和大量数据的数据库的功能。如果是这样，我在哪里可以找到有关如何执行此操作的信息。如果没有，我有两个替代方案吗？（假设 WebSQL 实际上确实失去了支持并且 IndexedDB 不可行）。

在相关说明中，IndexedDB 会加快本地数据库的填充速度吗？PHP当前用于在用户在线时填充数据库，并且使用大约一百个选项填充表确实需要相当长的时间。当它接近一千时，应用程序就会完全崩溃（这是一种不常见的情况，强烈建议客户端不要使用这么多数据）。

对此的任何帮助都会很棒，我对一般编程非常陌生，对 Web 开发也非常陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:32:17.283

根据[http://www.caniuse.com/indexeddb](http://www.caniuse.com/indexeddb)，对 indexedDB 的支持相当有限，所以我现在不会跳到它。但是，当实现成熟时，这种情况很可能会在未来发生变化。

就个人而言，IndexedDB 看起来既奇怪又复杂，尤其是当您超越简单的单表操作时。我没有对其进行任何实际测试，但是由于您必须手动执行某些操作（例如连接记录），因此您最终会得到更多的 JS 代码，这意味着更多的区域可以隐藏错误。

> 那么 IndexedDB 有可能成为替代方案吗？IndexedDB 能否用于复制具有多个相关表和大量数据的数据库的功能。如果是这样，我在哪里可以找到有关如何执行此操作的信息。如果没有，我有两个替代方案吗？（假设 WebSQL 实际上确实失去了支持并且 IndexedDB 不可行）。

快速搜索会出现[http://blog.oharagroup.net/post/16394604653/a-performance-comparison-websql-vs-indexeddb](http://blog.oharagroup.net/post/16394604653/a-performance-comparison-websql-vs-indexeddb)，其中显示了 IndexedDB 多表使用的一些模式。它还显示了一些性能比较，这对于 IndexedDB 看起来很有希望。但是，请参阅[此答案](https://stackoverflow.com/a/13426292/9990)并对这个基准持保留态度。

> 在相关说明中，IndexedDB 会加快本地数据库的填充速度吗？PHP当前用于在用户在线时填充数据库，并且使用大约一百个选项填充表确实需要相当长的时间。当它接近一千时，应用程序就会完全崩溃（这是一种不常见的情况，强烈建议客户端不要使用这么多数据）。

我是不同行业的类似应用程序的开发人员，我的经验完全不同：即使在较旧的 iPhone 3GS 上，WebSQL 解决方案也能正常运行——我们已经测试了每个表有数千条记录的模式，没有明显的减速。您是否可能在单独的事务中插入每一行？

我们的大多数客户都对该应用程序感到满意，因为它可以在 iPad、iPhone、Android 平板电脑和 Google Chrome 上运行。但是一个客户端的安全要求只允许使用 Windows 和 IE，不允许使用其他浏览器或非 Windows 移动设备。这是我们见过的唯一一个 WebSQL 没有解决它的场景。我们研究了 IndexedDB 和本机应用程序，到目前为止，我们认为本机应用程序是一个更好的选择（C# 基础库可以在 Xamarin 和 Windows Phone 应用程序之间共享，更不用说 C# 比松散类型的 JS 回调更容易编写代码地狱）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T01:51:49.133

我迟到了几年，但我想我会加入并回答 OP 的问题（为了他的利益（可能）和任何发现自己在这里有相同问题的人的利益），这些问题尚未直接回答，并提供一些建议！

> 我有两个替代方案吗？（假设 WebSQL 实际上确实失去了支持并且 IndexedDB 不可行）。

IndexedDB 是目前唯一保留在 W3C 标准轨道上的数据库，因此，就本地客户端数据库而言，它几乎是唯一的选择。

> 那么 IndexedDB 有可能成为替代方案吗？IndexedDB 能否用于复制具有多个相关表和大量数据的数据库的功能。

好...

IndexedDB 是一个**非关系型** *文档存储*。

*   非关系：不允许定义存在于其对象存储（表）中的条目之间的任何关系。所有此类关系都必须由应用程序定义和维护。

*   文档存储：文档的存储库，是任意结构化的数据项。

另一方面，**关系数据库**支持表条目之间关系的定义和维护。这些数据库中的大多数也是*行存储*，它们（您可能知道）是包含在表中的元组的存储库，这些表定义了它们各自的结构。

因此，要回答您的问题，是的，您可以在 IndexedDB 中复制关系数据库提供给您的功能。如果商店中的任何数据项以任何方式相互关联，在某种程度上，您将不得不这样做。

但是考虑到客户端数据库只是您数据的临时中转站，明智的做法是只复制最低限度的数据以保持数据的完整性，并利用其余的功能，例如一旦数据传输，它就存在于服务器端的关系数据库中。

如果转换的想法似乎仍然可以接受，那就去做吧！

但在此之前，您应该了解有关 IndexedDB 的几件事。考虑到它的数据库类型，第一个应该很明显：它本身不支持 SQL。第二个是它的API……至少可以说是笨拙的。

鉴于这些情况，我建议您查看[BakedGoods](https://github.com/klawson88/Baked-Goods)。例如，有了它，在 IndexedDB 数据库中放置一个或多个数据项非常简单：

```
bakedGoods.set({
    data: [{key: "key1", value: "value1"}, {key: "key2", value: "value2"}],
    storageTypes: ["indexedDB"],
    function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

由于某些关系数据库功能的复制可能需要复杂的 CRUD 操作，您可能希望利用 BakedGood 对[用户定义的存储操作功能](https://github.com/klawson88/Baked-Goods#user-defined-storage-operation-functions)的支持。

只是为了完全透明，这个人在这里维护 BakedGoods :)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-29T02:55:43.890

通常使用 SQL 的开发人员由于其复杂的 api，在使用 indexeddb 时会遇到困难。

解决方案是使用任何让 indexedb 超级简单的 indexedb 库，但为了使用该库，我需要了解 indexeddb 的一些概念。

[JsStore](http://jsstore.net)是一个 indexeddb 库，它消除了 indexeddb 的复杂性，使 indexeddb 的使用变得超级简单。它提供了类似 Sql 的 api，使其易于学习。

可以说 - 你有 sql 查询：`select * from table_name where id=1 and name='abc'`

在 JsStore - 查询将是：

```
var con = new JsStore.Instance(db_name);
con.select({
     From:table_name,
     Where: {
         Id: 1,
         Name:'abc'
     }
}).then(function(result){
   console.log(result)
}) 
```

# ruby-on-rails - 按子项过滤模型

> ID：10029506
> 
> 赞同：0
> 
> 时间：2012-04-05T13:26:53.457
> 
> 标签：ruby-on-rails, activerecord

我有一个`Ticket`模型`has_many :tags`。我想找到所有标签在`tag.label`字符串数组中的票。

这是我目前正在尝试的：

```
tags = params[:tags].split(',')
if tags.count > 0 then
  t = t.scoped(include: :tag).where('tags.label' => tags.map(&:label))
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:39:54.787

试试这个范围

```
scope :by_labels, lambda{ |tags| joins(:tags).where('tags.label IN (?)',tags) unless tags.blank? } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:37:52.977

像这样的东西应该工作：

```
Ticket.joins(:tags).where(:tags => { :label => array_of_strings }) 
```

或作为范围：

```
scope :by_labels, lambda { |tags| joins(:tags).where(:tags => { :label => tags }) unless tags.blank? } 
```

Mikhail Nikalyukin 的解决方案的问题是`.map(&:label)`. 那部分不是必需的。

# sdl - 编写更好的游戏循环

> ID：10029510
> 
> 赞同：3
> 
> 时间：2012-04-05T13:27:14.673
> 
> 标签：sdl

我正在编写一个吉他英雄克隆游戏。它工作得很好，但在快速计算机（高帧率）中，动画并不总是流畅。我的意思是，有时音符滚动时会有颠簸。我发现这个问题可能与我的游戏循环有关，它不限制 fps（因为我正在更新经过的帧时间，我认为这没有必要）。当从 140 fps 下降到 60 fps 时，这些颠簸很明显。

我看了一下这个网站：[http](http://www.koonsolo.com/news/dewitters-gameloop/) ://www.koonsolo.com/news/dewitters-gameloop/我正在尝试实施“FPS 依赖于恒定游戏速度”的方法只是为了看看问题是否得到解决。

问题是我的游戏更新和渲染稳定在 60fps，而声音回调似乎远不止于此。我将 Audiere 用于声音，将 SDL 用于计时器/输入。

我以为 SDL_Delay 会暂停游戏线程直到完成，但似乎并非如此。有什么我想念的吗？SDL 在时间上不是一个可靠的库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T22:41:29.473

一些示例或伪代码将非常有助于了解您在做什么。从 SDL_Delay 的文档中：

> 此函数在返回之前等待指定的毫秒数。它至少会等待指定的时间，但由于操作系统调度，它可能会等待更长时间。延迟粒度至少为 10 ms。一些平台的时钟滴答声更短，但这是最常见的。

可能耽误太多了。假设您正在使用 while 循环，您是否尝试过“继续”减慢绘制速度？如果您执行 SDL_Delay(1) 可能会花费更长的时间，从而打乱您的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T22:21:23.600

SDL 实际上非常适合游戏！它一直是我的最爱，因为它的水平出奇的低。

您的 SDL 音频回调总是会很快被调用！通常你会看到以 60fps 渲染的视觉动画，因为这对我们的眼睛来说看起来不错。PC 音频通常以 44,100 个样本/秒的速度运行。这需要更多的维护，以确保音频设备可以播放样本！SDL 将尽可能快地触发回调，以防止音频故障。

# magento - Magento 更改订单状态以完成不开票

> ID：10029516
> 
> 赞同：3
> 
> 时间：2012-04-05T13:27:30.690
> 
> 标签：magento, status

我有一个可下载产品的电子商务商店。当客户订购东西时。然后客户在我为其创建发票之前无法下载产品。所以我需要一个解决方案，然后当客户订购并且订单完成时，客户可以自动下载产品而无需创建发票。请给我一个解决方案

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:50:01.643

我们这样做是因为 Magento 的发票功能对于任何使用 QuickBooks 或类似工具来创建发票的公司来说都是一个无用的步骤。总而言之，您可以使用 Order 模型和方法更改订单*状态*和*状态*（阅读这些） 。将订单状态设置为就像这样简单：`setState()``setStatus()``complete`

```
$orderOBJ = Mage::getModel('sales/order')->load($order->getId());
$orderOBJ->setStatus('complete');
$orderOBJ->save(); 
```

我们甚至扩展了 Magento 以包含报价生成器，创建一种全新的订单类型（状态），在客户批准报价之前将其视为内部报价，然后将其转换为订单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-23T07:54:07.017

我通过将选项 Complete 添加到可用状态列表中来使用不同的方法。[我在我的博客](http://blog.mdnsolutions.com/index.php/magento-free-order-with-status-as-complete/)上写了一篇关于它的文章。我希望它有所帮助。

# air - Adobe Air - 无限制访问警告

> ID：10029522
> 
> 赞同：0
> 
> 时间：2012-04-05T13:28:04.183
> 
> 标签：air, installation

有没有办法限制 Adob​​e Air 应用程序的访问，以使[安装对话框](http://jadedsecurity.net/wp-content/uploads/2011/06/Screen-shot-2011-06-25-at-1.22.03-PM.jpg)中不显示*不受限制的访问*消息？

谢谢。乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:44:16.780

不，但您可以让您的应用程序[签名](http://www.adobe.com/devnet/air/articles/signing-air-applications.html)。这将阻止该消息出现，即使应用程序的访问权限没有改变……</p>

# android - 如何在数据库中插入多行？

> ID：10029524
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:28:11.657
> 
> 标签：android, sqlite

这是我在应用程序数据库中插入行的方法。但它只插入一行。**所以我必须在数据库中添加多行**。此代码用于我的应用程序中的新用户注册。

提前致谢.....

```
public void addProductToCart(String username, String password,
        String email, String contact, String bloodgroup, String city, String state) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues contentValues = new ContentValues();
    contentValues.put(colUsername, username);
    contentValues.put(colPassword, password);
    contentValues.put(colEmail, email);
    contentValues.put(colContact, contact);
    contentValues.put(colBloodgroup, bloodgroup);
    contentValues.put(colCity, city);
    contentValues.put(colState, state);
    db.insert(USERTABLE, colUsername, contentValues);
    db.close();

    context.runOnUiThread(new Runnable() {

        public void run() {
            Toast.makeText(context, "You have registered successfully.",
                    Toast.LENGTH_LONG).show();
            context.finish();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:34:30.543

I don't think there is something else that android supports, but my solution will be to build for that a new class with the Fields you need, and then pass as parameter to the addProductToCart method a list of all the objects you want to put. Inside the method do for loop until you get to the end of the list.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T05:05:05.887

一次注册多个用户是不可能的，如果您想一次添加更多用户，请使用数据库类中的后端进程。尝试在代码中添加值，而不是使用用户界面。如果您将单击功能设置为按钮，则使用您喜欢的值多次调用该方法。

像这样，

db.addProductToCart(username1,password1,email1,contact1,bloodgroup1,city1,state1); db.addProductToCart(username2,password2,email2,contact2,bloodgroup2,city2,state2); db.addProductToCart(username3,password3,email3,contact3,bloodgroup3,city3,state3);

# java - 如何使用 xml 配置在 Spring MVC 上配置 Hessian？

> ID：10029526
> 
> 赞同：0
> 
> 时间：2012-04-05T13:28:25.807
> 
> 标签：java, spring, spring-mvc, hessian

我在 Spring MVC 项目中使用 Hessian。我创建服务器端实现，然后想配置客户端。客户端可以配置`HessianProxyFactory`用于客户端初始化的代码。使用的 URL 现在在代码中进行了硬编码，但我想以某种方式将服务连接为 Spring bean，以便使用`@Autowired`注释处理代码端配置。

这个怎么做？感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:15:08.820

[20.3.3 在客户端的服务中链接中](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/remoting.html#remoting-caucho-protocols-hessian-client)描述：

```
<bean id="accountService" class="org.springframework.remoting.caucho.HessianProxyFactoryBean">
    <property name="serviceUrl" value="http://remotehost:8080/remoting/AccountService"/>
    <property name="serviceInterface" value="example.AccountService"/>
</bean> 
```

`example.AccountService`服务器实现的服务接口在哪里。客户端也需要该接口，但您可能知道这一点。

或者使用 Java 配置：

```
@Bean
public HessianProxyFactoryBean accountService() {
    HessianProxyFactoryBean factory = new HessianProxyFactoryBean();
    factory.setServiceUrl("http://remotehost:8080/remoting/AccountService");
    factory.setServiceInterface(AccountService.class);
    return factory;
} 
```

现在您可以简单地注入：

```
@Autowired
private AccountService accountService; 
```

[`HessianProxyFactoryBean`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/remoting/caucho/HessianProxyFactoryBean.html)允许您配置各种其他功能，例如安全性和超时。

# css - 网站空白右侧平板电脑上的布局

> ID：10029532
> 
> 赞同：2
> 
> 时间：2012-04-05T13:28:45.620
> 
> 标签：css, layout, whitespace

嗨设计了一个网站，在普通浏览器中布局很好，但只要我看一下黑莓剧本，右侧就会出现巨大的空白。在苹果设备上也是如此。这是css代码，如果你想看看你是否去[http://u-zuki-designs.com/beta](http://u-zuki-designs.com/beta)你可以看到。谢谢你

```
`enter code here`/*
Theme Name:u-zuki-designs
Thema URL:www.u-zuki-designs.com
Author Name:u-zuki-designs.com
Version:1.0
*/

@charset "utf-8";

/*Juneral Tag Properties Initilization*/
*{
    padding:0px;
    margin:0px;
}

body{

}

a{
    color:#ffffff;
    text-decoration:none;
}

a:hover{
    text-decoration:none;
    color:#ffffff;
}

a img{
    border:0px;
    margin:0px;
}

ul li{
    list-style:none;
    padding:0px;
    margin:0px;
}

.clear{
    clear:both;
}

.leftside{
    float:left;
}

.rightside{
    float:right;
}

.main{
    width:100%;
    margin:0px auto;
}
/*Juneral Tag Properties Initilization*/

/*Header Starting*/
.header{
    width:100%;
    background:url(../images/header_bg.png) top left repeat-x;
}

.header_in{
    width:1000px;
    margin:0px auto;
    height:86px;
}

.header_menu{
    padding:35px 0px;
}

.header_menu ul li{
    float:left;
    font-family:Tahoma, Geneva, sans-serif;
    font-weight:lighter;
    padding:0px 6px;
}

.header_menu ul li a{
    font-size:12px;
    padding:4px 10px;
}

.header_menu ul li a.active{
    background:#252435;
}

.header_menu ul li a:hover{
    background:#252435;

}

/*Header Ending*/

/*Banner Starting*/
.banner{
    width:100%;
    background:url(../images/banner_bg.png) top left repeat-x;
}

.banner_in{
    width:1000px;
    margin:0px auto;
    height:395px;
}

.banner_in h1{
    font-family:Arial, Helvetica, sans-serif;
    color:#ffffff;
    text-align:center;
}

.banner_in .slider{
    width:655px;
    margin:0px auto;
}
/*Banner Ending*/

/*Content Starting*/
.content{
    width:100%;
    background:url(../images/content_bg.png) top left repeat-x;
    min-height:542px;
}

.content_in{
    margin:0px auto;
    width:1000px;
}

.category{
    border-bottom:1px solid #efefef;    
}

.category_in{
    width:210px;
    margin:0px auto;
}

.category_in ul li{
    float:left;
    padding:0px 3px;
}

.new_work{
    padding-left:90px;
}

.new_work .section_title h2{
    font-family:"Gotham Medium";
    font-weight:lighter;
    font-size:18px;
}

.new_work .section_title a{
    color:#6dc6b6;
    font-family:"Gotham Medium";
    font-size:10px;
    padding:0px 150px 0px 100px;
}

.new_work .website{
    color:#959595;
    font-family:"Gotham Medium";
    font-size:12px;
}

.new_work .identity{
    color:#959595;
    font-family:"Gotham Medium";
    font-size:12px;
}

.new_work .photography{
    color:#959595;
    font-family:"Gotham Medium";
    font-size:10px;
}

.new_work .website p,
.new_work .identity p,
.new_work .photography p{
    font-size:10px;
}

.new_work .website p span,
.new_work .identity p span,
.new_work .photography p span{
    color:#2eae96;
}

.new_work .website,
.new_work .identity,
.new_work .photography{
    width:150px;
    padding:0px 10px;
}

.time_sep{
    font-size:10px;
    color:#b6b6b6;
    margin-left:100px;
}

.feature_icon_set{
    padding-left:130px;
}

.section_title_2 h3{
    font-family:"Gotham Medium";
    font-size:10px;
}

.section_title_2{
    padding-right:110px;
}

a.iconset{
    color:#42b4a1;
    font-family:"Gotham Medium";
    font-size:10px;
}

.icon_set_display{
    background-color:#ffffff;
    height:175px;
    width:544px;
}

/*Content Ending*/

/*Footer Starting*/
.footer{
    width:100%;
    background-color:#e3e3e3;
}

.footer_in{
    width:1000px;
    margin:0px auto;
    padding-left:200px;
}

.top_footer{

}

.top_footer .aboutus{
    padding:25px;
    width:150px;
    font-family:"Gotham Medium";
    font-size:12px;
    color:#9f9fa2;
}

.top_footer .facebookupdate{
    padding:25px;
}

.top_footer .recent_work{
    padding:25px;
}

.top_footer .recent_work img{
    padding:3px;
}

.top_footer .aboutus h4,
.top_footer .facebookupdate h4,
.top_footer .recent_work h4{
    font-family:"Gotham Medium";
    font-size:16px;
    font-weight:normal;
    color:#777777;
}

.bottom_footer{
    padding-left:25px;
}

.bottom_footer ul li{
    float:left;
    color:#ccccce;
    font-family:"Gotham Medium";
    padding:5px 3px;
}

.bottom_footer ul li a{
    color:#6e6e6e;
    font-family:"Gotham Medium";
    font-size:10px;
}
/*Footer Ending*/

/*Font Initilization Starting*/

/*Font Initilization Ending*/

html code 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="nivo-slider/themes/default/default.css" type="text/css" media="screen" />
 <link rel="stylesheet" href="../themes/pascal/pascal.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../themes/orman/orman.css" type="text/css" media="screen" />
<link rel="stylesheet" href="nivo-slider/nivo-slider.css" type="text/css" media="screen" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>U-Zuki-Designs | The Secrect To Creativity</title>
</head>
<body>
<!--Code Starting-->
<div class="main">
  <!--Header Starting-->
  <div class="header">
    <div class="header_in">
      <div class="logo leftside">
        <a href="index.html"><img src="images/logo1.png" alt=" " /></a>
     <a href="index.html"><img src="images/logo2.png" alt=" " /></a>
      </div>
      <div class="header_menu rightside">
        <ul>
          <li><a href="#" class="active">Home</a></li>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Portfolio</a></li>
          <li><a href="#">Services</a></li>
      <li><a href="#">Contact Us</a></li>
        </ul>
        <div class="clear"></div>
      </div>
      <div class="clear"></div>
    </div>
  </div>
  <!--Header Ending-->
  <!--Banner Starting-->
  <div class="banner">
    <div class="banner_in"> 
      <br />
      <h1>Welcome To Our Website</h1>
      <br />
<div class="slider-wrapper theme-default">
<div class="ribbon"></div>
        <!--<img src="images/banner_image.png" alt=" " />-->

                <div id="wrapper">

                <div id="slider-wrapper">

                    <div id="slider" class="nivoSlider">
                        <img src="images/C.jpg" alt="" />
                        <img src="images/b.jpg" alt=""/>
                        <img src="images/ab.jpg" alt="" />
                        <img src="images/D.jpg" alt="" />
                    </div>
                    <!--<div id="htmlcaption" class="nivo-html-caption">
                        <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>.
                    </div>-->

                </div>

            </div>

      </div>
    </div>
  </div>
  <!--Banner Ending-->
  <!--Content Starting-->
  <div class="content">
    <div class="content_in">
      <br />
      <div class="category">
        <div class="category_in">
          <!--<ul>
            <li><a href="#"><img src="images/all.png" alt="" /></a></li>
            <li><a href="#"><img src="images/news.png" alt="" /></a></li>
            <li><a href="#"><img src="images/art.png" alt="" /></a></li>
            <li><a href="#"><img src="images/web.png" alt="" /></a></li>
            <li><a href="#"><img src="images/print.png" alt="" /></a></li>
            <li><a href="#"><img src="images/illustration.png" alt="" /></a></li>
          </ul>
          <div class="clear"></div>
          <br />-->
        </div>
        </div>
      <br />
      <div class="new_work">
            <div class="section_title leftside">
              <h2>New Work</h2>
              <br />
              <br />
              <a href="#"><h4>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;> View all illustrations</h4></a>
            </div>
            <div class="website leftside">
              <span>Website</span><br />
              <img src="images/website.png" alt=" " />
              <p>Lorem Ipsum is simply dummy text of<span>typesetting industry.</span></p>
            </div>
            <div class="identity leftside">
              <span>Idenitity</span><br />
              <img src="images/identity.png" alt=" " />
              <p>Lorem Ipsum is simply dummy text of<span>typesetting industry.</span></p>
            </div>
            <div class="photography leftside">
              <span>Photography</span><br />
              <img src="images/photography.png" alt=" " />
              <p>Lorem Ipsum is simply dummy text of<span>typesetting industry.</span></p>
            </div>
            <div class="clear"></div>
        </div>
        <br />
        <div class="time_sep">
          12.09.2011<img src="images/sep_date.png" alt=" " />
        </div>
        <br />
        <div class="feature_icon_set">
          <div class="section_title_2 leftside">
            <h3>FEATURE: ICON SET</h3>
            <br />  
            <br /> 
            <br />   
            <a href="#" class="iconset">> View full datalis</a>
          </div>
          <div class="icon_set_display leftside">
        <h2><p><b>Our Work</b></p></h2> 
        <br>Welcome to our online graphic design & Photography portfolio. we hope you will see the quality of the our creaitivity we produce and maybe get a understanding of our passion for what we do to add smiles to our clients faces</br>

          </div>
          <div class="clear"></div>
          <br />
          <img src="images/sep2.png" alt=" " />
        </div>
    </div>
  </div>
  <!--Content Ending-->
  <!--Footer Starting-->
  <div class="footer">
    <div class="footer_in">
      <div class="top_footer">
        <div class="aboutus leftside">
          <h4>Our Work</h4>
          <p><br>Our work with our clients is to explore, architect, rebuild, revise, revisit, rebrand, rewrite, rearchitect, and we do it all from start to finish...</br></p>
        </div>
        <div class="facebookupdate leftside">
          <h4>facebook updates</h4>
        </div>
        <div class="recent_work leftside">
          <h4 style="padding-left:3px;">recent works</h4>
          <img src="images/recent1.png" alt=" " class="leftside"/>
          <img src="images/recent2.png" alt=" " class="leftside"/>
          <img src="images/recent3.png" alt=" " class="leftside"/>
          <div class="clear"></div>
          <img src="images/recent4.png" alt=" " class="leftside"/>
          <img src="images/recent5.png" alt=" " class="leftside"/>
          <img src="images/recent6.png" alt=" " class="leftside"/>
          <div class="clear"></div>
        </div>
        <div class="clear"></div>
        <img src="images/footersep.png" alt=" " style="padding-left:25px;"/>
      </div>
      <div class="bottom_footer">
        <ul>
          <li><a href="#">HOME</a></li>
          <li>/</li>
          <li><a href="#">ABOUT</a></li>
          <li>/</li>
          <li><a href="#">FAQ</a></li>
          <li>/</li>
          <li><a href="#">TERMS</a></li>
          <li>/</li>
          <li><a href="#">CONTACT</a></li>
        </ul>
        <div class="clear"></div>
      </div>
    </div>
  </div>
  <!--Footer Ending-->
</div>
<!--Code Ending-->

    <script type="text/javascript" src="nivo-slider/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="nivo-slider/jquery.nivo.slider.pack.js"></script>
    <script type="text/javascript">
    $(window).load(function() {
        $('#slider').nivoSlider({});
    });
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:10:56.400

我的猜测是由于标题图形和信息的宽度。如果您压缩浏览器窗口，您将收到（我假设是）相同的空白区域，因为标题内容向右侧延伸得更远。在不能显示整个宽度的移动环境中，同样会被拉伸并呈现该空白区域。

我知道这不是解决方法，但我认为这是您看到的空白背后的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T16:29:35.757

尝试从css下方删除宽度

```
.footer_in{
    /*width:1000px;*/
    margin:0px auto;
    padding-left:200px;
} 
```

不删除宽度屏幕截图：

![在此处输入图像描述](../Images/00e0e7b3772e26c30cea2124212683c9.png)

从 .footer_in 屏幕截图中删除的宽度：没有水平滚动条。

![在此处输入图像描述](../Images/2040e844d5ce378f3a1093d81c2ee4c6.png)

# asp.net-mvc-3 - mvc3如何清除提交的表单值

> ID：10029533
> 
> 赞同：4
> 
> 时间：2012-04-05T13:28:45.733
> 
> 标签：asp.net-mvc-3, ajax.beginform

我是 asp .net mvc3 的新手。我正在尝试创建一个失败的简单博客评论部分。

我有一个 CommentsViewModel

```
public class CommentsViewModel
{
    public CommentModel NewComment { get; set; }
    public IList<CommentModel> CommentsList { get; set; }
} 
```

对应的视图就像

```
<div id="CommentsArea">
@Html.Partial("CommentsList", Model.CommentsList)
</div>
@using (Ajax.BeginForm("Create",
                   "Comment",
                   new { id = Model.NewComment.detailsId, comment = Model.NewComment },
                   new AjaxOptions { UpdateTargetId = "CommentsArea" ,
                                     HttpMethod = "Post",
                                     InsertionMode = InsertionMode.Replace}))
{
<div class="display-label">Add Comment</div>
<div class="display-field">
    @Html.EditorFor(model => Model.NewComment.Body)
</div>
<input type="submit" value="Post" />
} 
```

现在，当用户输入“发布”按钮时，我希望用新的评论列表更新“CommentsArea”，并用空文本清除表单值。

这是 Post 方法：

```
[HttpPost]
    public ActionResult Create(int id, CommentModel newcomment)
    {
        var newsItem = m_db.NewsList.Single(news => news.Id == id);
        if (!string.IsNullOrWhiteSpace(newcomment.Body))
        {
                newcomment.detailsId = id;
                newsItem.Comments.Add(newcomment);
                m_db.SaveChanges();
        }

        return PartialView("CommentsList", newsItem.Comments);
    } 
```

现在，当用户单击“发布”按钮时，列表会正确更新，但不会清除表单值。即，如果我发布了评论“新评论”，评论列表将更新为“新评论”，但该文本仍保留在表单的编辑框中。

如何清除该文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:47:03.727

只需在表单提交成功时调用 js 函数。

```
@using (Ajax.BeginForm("Create",
                   "Comment",
                   new { id = Model.NewComment.detailsId, comment = Model.NewComment },
                   new AjaxOptions { OnSuccess="ClearInput", HttpMethod = "Post",})) 
```

在 js 函数渲染上再次创建视图

```
function ClearInput(){
      //call action for render create view
      $.ajax({})
} 
```

# javascript - 如何将选项列表添加到自定义实体的案例表单（注意：替换正常的查找字段）？

> ID：10029534
> 
> 赞同：2
> 
> 时间：2012-04-05T13:28:51.273
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, microsoft-dynamics

我要求在案例表单上选择自定义实体“优先级”，而不是使用正常的查找方法，我想显示一个列出了优先级实体的选项列表。

我想出的一种解决方案是让表单上的查找字段正常但不设置为可见，并让 jscript 例程向 DOM 添加一个选择，以便在使用 JSON 请求时查找所需的值。在自定义选择的选定更改事件上，我可以以编程方式设置查找的值。

问题在于它非常混乱且不受支持。

是否有支持的方式来做我想做的事情，如果没有，任何人都可以看到所提供的解决方案有任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:32:48.267

支持使用 javascript 设置查找的值。支持自定义 html 控件作为 Web 资源。您的解决方案将起作用，并且实际上是受支持的自定义。

至于你的其他选择...

据推测，此请求源于用户认为从如此短的优先级实体列表中进行选择需要“太多点击和太多时间”。你的要求可以商量吗？您的用户是否了解查找的所有两个不错的功能： 1\. 您可以键入优先级名称的前几个字母并标记出来，它会自动为您完成。2\. 同样，您可以只输入前几个字母，下拉列表将在查找下方展开，其中包含可用选项。它非常快，您不需要加载单独的屏幕，我认为这是他们的可用性问题。

或者，如果它们在下拉列表中被固定，这个优先级数据可以表示为选项集吗？我有点惊讶您需要一个实体来解决优先级问题，您需要哪些有关优先级的元数据？

# php - 通过php发送邮件到microsoft exchange

> ID：10029546
> 
> 赞同：0
> 
> 时间：2012-04-05T13:29:37.747
> 
> 标签：php, email

我有功能将带有附件的邮件发送到 Microsoft Exchange 服务器。我的问题是，当我想添加附件时，整个消息部分正在将我的文本添加到附件源。当我将附件保存到邮件的正文部分时，我的附件源会记录在电子邮件正文中，而不是创建附件。下面是我的来源。

```
$eol = "\r\n";

$boundary = md5(time());

    $mail = "explame@explame.com";  

$headers  = "From: no-replay@explame.com".$eol;
$headers .= "MIME-Version: 1.0".$eol; //utworzenie headera wiadomosci
$headers .= "Content-type: multipart/alternative; charset=utf-8".$eol;
$headers .= "Message-ID:< TheSystem@".$_SERVER['SERVER_NAME'].">".$eol; 
$headers .= "X-Mailer: PHP v".phpversion().$eol;
$headers .= 'MIME-Version: 1.0'.$eol;
$headers .= "Content-Type: multipart/related; boundary=\"".$boundary."\"".$eol; 
$headers .= "--$boundary".$eol;
$headers .= "Content-Type: text/plain; charset=utf-8".$eol;
$headers .= "Content-Transfer-Encoding: 8bit".$eol;
$headers .= "--$boundary--".$eol.$eol;

if ($file != ''){
    $handle = fopen($file['tmp_name'], 'rb');
    $f_content = fread($handle, $file['size']);
    $attachment =  chunk_split(base64_encode($f_content));
    fclose($handle);

    $content .= "--$boundary".$eol;
    $content .= "Content-type: ".$file['type'].'; '.'name="'.$file['name'].'"'.$eol;
    $content .= 'Content-Disposition: attachment; filename="'.$file['name'].'"'.$eol.$eol;
    $content .= "Content-Transfer-Encoding: base64".$eol;
    $content .= $attachment.$eol.$eol;
    $content .= "--$boundary--".$eol.$eol;

    }
mail($mail, 'title', $content, $headers) 
```

我想我什么都试过了，但对我没有用。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:36:06.900

一个非常好的用于发送邮件（尤其是处理附件）的 PHP 库是 phpmailer 类。

你可以在这里找到它：[http ://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

编辑 - 上面的链接是旧项目，它现在托管在 Github 上并且更经常地维护：[https ://github.com/PHPMailer/PHPMailer](https://github.com/PHPMailer/PHPMailer)

以及如何使用它发送附件的示例：

```
include("class.phpmailer.php");
$mail = new PHPMailer();    
$mail->IsHTML(true);
$mail->SetFrom('from@mydomain.com');
$mail->AddReplyTo('from@mydomain.com'); //set from & reply-to headers
$mail->AddAddress('to@exchangeserver.com'); //set destination address

$mail->Subject="some subject"; //set subject
$mail->Body="some body HTML <br/><br/>"; //set body content

$mail->AddAttachment('filepath', 'filename'); //attach file

$mail->AltBody = "Can't see this message? Please view in HTML\n\n";
$mail->Send(); 
```

# c# - 垂直对齐超过 3 个 ChartArea

> ID：10029547
> 
> 赞同：5
> 
> 时间：2012-04-05T13:29:49.593
> 
> 标签：c#, vertical-alignment, mschart

如果不手动计算位置，我无法在 MSChart 中垂直对齐 3 个以上的图表区域。似乎 MSChart 决定如果您添加更多区域，它将开始水平对齐它们。

我尝试过使用 ChartArea Alignment 属性，例如 Orientation、Style 和 AlignWithChartArea，但如果您尝试更改这些属性，它会与另一个区域重叠。

那么，有没有人尝试过解决这个问题？我能想到的最后一件事是手动计算位置和对齐区域。

谢谢 ！

# javascript - ES5 提供的新方法的实际用途是什么？

> ID：10029549
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:30:00.920
> 
> 标签：javascript, ecmascript-5

借助[ES5-Shim](https://github.com/kriskowal/es5-shim)等库，我们现在可以使用新的热点。**现在**可以使用数组上的许多方法（如`forEach`、`map`、等）来编写干净漂亮的代码。`every`

 **我想要一个列表，列出我**现在**可以在使用当前浏览器的 API（例如 DOM）或仅使用 javascript 时使用这些新方法的实际用途。

我说的是这种：

```
var nodes = document.getElementsByClassName('class')
[].forEach.call(nodes, callback)
function callback(node) {
    console.log(node)
} 
```

[@Esailija](https://chat.stackoverflow.com/transcript/message/3186672#3186672)的另一个例子：

```
[].filter.call( document.myform.elements, function(input){
    return input.type == "text";
}); 
```

这是我正在寻找的实际用途。我可以在实际项目中使用某种模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:44:02.303

我认为，您真正能够使用的第一件事是 bind() 方法。

```
var o = {
    act: function() { ...}
}
// Instead of
element.addEventListener("type", function(){ o.act(); }, false)
// you can write
element.addEventListener("type", o.act.bind(o), false) 
```

这在命名空间模块中非常有用，`this`一切都在哪里。

数组迭代器方法在数据处理方面非常有用。没有具体的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:37:44.163

您可以使用迭代器函数来操作列表。

所以在你使用 for 或 while 循环之前，现在你使用函数。

```
function isTextNode(node) {
    return node.nodeType === Node.TEXT_NODE
}

function extractText(node) {
    return node.data
}

function combineText(memo, text) {
    return memo += text
}

var text = toArray(nodeList).filter(isTextNode).map(extractText).reduce(combineText) 
```

要习惯“如何或为什么有用”，请停止使用 for/while 并将您的数据视为集合或列表，并考虑如何过滤/映射/减少这些列表以提取数据。

还要做一个练习，不要使用闭包，让你的迭代器函数分开，而不是绑定上值。**

# java - 线程“AWT-EventQueue-0”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jnotify

> ID：10029555
> 
> 赞同：1
> 
> 时间：2012-04-05T13:30:28.083
> 
> 标签：java, jnotify

我已经在 Mac OS X 上配置了 Jnotify。我正在使用 MyEclipse 和最新版本的 Jnotify。我是 MAC OS 的新手，刚刚添加了 jnotify.jar 并且还添加了 jnotify.dylib 作为本机库它在开发环境中工作但是当我创建一个可执行的 jar 并在 Mac OS X 上运行它时它将无法工作并且以下异常有发生

```
Exception in thread "AWT-EventQueue-0" java.lang.UnsatisfiedLinkError: no jnotify in java.library.path 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:36:20.340

在代码中插入以下调试行：`System.getProperty("java.library.path");` 如果可能，作为*Main*方法的第一行。

然后运行可执行 jar 并查看它打印的路径。现在确保 jnotify.dylib 位于路径显示的目录之一中。

# android - 无法在 Android 意图中使用该库

> ID：10029557
> 
> 赞同：0
> 
> 时间：2012-04-05T13:30:33.510
> 
> 标签：android, android-intent

我想在我的应用程序中使用文件资源管理器，因此在使用谷歌搜索时，我在 code.google.com 上找到了“ [Android 文件对话框”。](http://code.google.com/p/android-file-dialog/)源代码的输出是一个 android 库，我已将其作为项目属性对话框中的“构建路径上的必需项目”包含在我的 Android 项目中。但是当我运行我的应用程序时，它给了我例外-

```
java.lang.NoClassDefFoundError: com.lamerman.FileDialog 
```

发生错误的行是-

```
Intent intent = new Intent(this, FileDialog.class); 
```

此行在 Activity onCreate 方法中。

我什至在**AndroidManifest.xml**中添加了以下条目-

```
<activity android:name="com.lamerman.FileDialog" /> 
```

我在 Eclipse 中没有收到任何编译错误。

使用库运行应用程序时我是否遗漏了一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:26:23.310

按照[此处](http://developer.android.com/sdk/compatibility-library.html)提到的步骤单击`Setting Up a Project to Use a Library`。在这里，他们提到了如何将 jar 文件添加到库中。

如果您想将库项目添加到您的项目中，请按照[此处](http://developer.android.com/guide/developing/projects/projects-eclipse.html)提到的步骤单击`Referencing a library project`

# iphone - apple-mobile-web-app-capable 和 apple-touch-fullscreen 的区别 iPhone / iOS 元标记

> ID：10029560
> 
> 赞同：18
> 
> 时间：2012-04-05T13:30:58.363
> 
> 标签：iphone, html, ipad, meta-tags, iphone-standalone-web-app

我有一个问题，无论是在谷歌还是直接在苹果开发者论坛上都找不到答案。

两者之间的确切区别是什么：

```
<meta name="apple-touch-fullscreen" content="yes" /> 
```

和

```
<meta name="apple-mobile-web-app-capable" content="yes" /> 
```

?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T08:25:44.293

They behave the same way, at least for now. `apple-mobile-web-app-capable` is the only version mentioned in [Safari documentation](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html), so I would stick with it. It looks to me as if `apple-touch-fullscreen` was used in early demos/previews, so it was left working later when the SDK got actually released, but the preferred version is the one documented.

# c# - “CS1026:) 预期”

> ID：10029563
> 
> 赞同：5
> 
> 时间：2012-04-05T13:31:06.093
> 
> 标签：c#, asp.net-2.0

```
using (SqlCommand cmd = new SqlCommand("ReportViewTable", cnx) 
  { CommandType = CommandType.StoredProcedure }) 
```

当我尝试在浏览器中打开此页面时，我得到了

> CS1026:) 预期错误

在这条线上，但我看不到它在哪里抛出错误。我已经读过`;`可能会导致这个问题，但我没有任何一个。

我可以提供所需的任何其他信息，但老实说，我不知道我需要问什么问题。我正在尝试在谷歌上搜索一些答案，但其中大多数都处理一个额外的分号，而我没有。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T13:38:09.063

如果这是 .NET 2.0，正如您的标签所建议的那样，您不能使用对象初始值设定项语法。直到 C# 3.0 才添加到语言中。

因此，像这样的陈述：

```
SqlCommand cmd = new SqlCommand("ReportViewTable", cnx) 
{ 
    CommandType = CommandType.StoredProcedure 
}; 
```

将需要重构为：

```
SqlCommand cmd = new SqlCommand("ReportViewTable", cnx);
cmd.CommandType = CommandType.StoredProcedure; 
```

您的`using`-statement 可以像这样重构：

```
using (SqlCommand cmd = new SqlCommand("ReportViewTable", cnx))
{
    cmd.CommandType = CommandType.StoredProcedure;
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:32:03.820

You meant this:

```
using (SqlCommand cmd = new SqlCommand("ReportViewTable", cnx)) { cmd.CommandType = CommandType.StoredProcedure; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T13:36:22.463

除了`ioden`答案：

将代码分成多行，
然后双击编译结果中的错误消息应该重定向到确切位置

就像是：

![在此处输入图像描述](../Images/ec6bc5efc4620dbcacb4c55a9b90f5a6.png)

# .net-4.0 - Informix 11.50 Connection Error ERROR [08001] [IBM] SQL30081N using Informix client sdk 3.5

> ID：10029568
> 
> 赞同：1
> 
> 时间：2012-04-05T13:31:13.823
> 
> 标签：.net-4.0, informix

I have a Windows server 2008 R2 64 bit with a VMware instance of Informix Dynmic Server 11.50 virtual appliance 32bit running.
Using the default database server provided in the virtual appliance i have created a database and a table inside it.
I installed the Informix Client SDK 3.5 and the informix data server provider Drivers on the windows server.
I setup the server connection on the windows server using setnet tool.
**I tested the connection with the connect test demo tool of the SDK and the query executed successfully.**
Now when I am testing the .Net provider driver by running the testconn.40_32.exe with the following connection String:

> **testconn40_32.exe -dtc "Database=safdata; Server=192.168.154.128:9088; User ID=root; Password=root"**

I get following error:

> Unable to open socket to server:
> 
> **ERROR [08001] [IBM] SQL30081N** A communication error has been detected. Communic ation protocol being used: "TCP/IP". Communication API being used: "SOCKETS". Location where the error was detected: "192.168.154.128". Communication functio n detecting the error: "recv". Protocol specific error code(s): "*", "*", "0". SQLSTATE=08001

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:57:35.627

我卸载了客户端 SDK 和所有其他驱动程序.. 只重新安装了客户端 SDK 并且它工作。客户端驱动程序与我安装的其他版本的驱动程序冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:00:08.490

您是否在同一台机器上尝试过两种测试？如果没有，那么您可能无法通过防火墙或其他网络设备。

如果您在同一台机器上运行测试，则服务器可以正常工作，而不是`192.168.154.128`使用`localhost`or `127.0.0.1`。您还可以使用`netstat`命令或工具（如 TCView 或 ProcessExplorer）检查 Informix 是否侦听端口 9088。

# objective-c - NSString truncated automatically

> ID：10029571
> 
> 赞同：1
> 
> 时间：2012-04-05T13:31:36.203
> 
> 标签：objective-c, string, truncate

I have a rest webservice which provides a picture file, base64 encoded, in a xml. My App consumes this webservice. Up to this point everything works fine.

`<News> <PictureContent>iVBORw0KGgoAAAANSUhEUgAAAjsA[AND A LOT MORE...]</PictureContent> </News>`

My problem is that this that this PictureContent-String is truncated during the runtime of my app and I have no clue why.

I already tried (gdb)po(NSString *)myString and that command in the debugger console returns also just a truncated string.

During the runtime the string looks like "*** TRUNCATED ***jdklasjdKASDJALKSJDSALDJ[AND A LOT MORE"

# ssl - 在我自己的域中使用没有 SSL 证书的 HTTPS 是否安全？

> ID：10029574
> 
> 赞同：3
> 
> 时间：2012-04-05T13:31:52.950
> 
> 标签：ssl, https, certificate, owner

我想在我自己的一些服务器之间运行一些加密连接。可以使用 Curl（或其他某种机制）使用 HTTPS 进行连接，无需 SSL 证书验证。我正在使用 PHP，但该语言对于这个问题可能并不重要。

我假设在没有 SSL 证书的情况下使用 HTTPS 至少比通过纯 HTTP 进行完全相同的连接更安全，因为至少它是加密的，并且作恶者将不得不付出更大的努力来拦截和解密信息。

据我所知，SSL 证书只说“这个受信任的第三方说您连接的服务器归声称拥有它的人所有”。如果我使用自己的域名或 IP 地址连接，我知道我是所有者。如果我是连接两端的所有者，SSL 证书会提供哪些附加价值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T13:57:38.093

不验证您连接到的服务器的身份会使连接对潜在的 MITM 攻击开放。SSL/TLS 可以在没有证书的情况下使用（使用[匿名密码套件](https://www.rfc-editor.org/rfc/rfc4346#appendix-A.5)），但它们不安全（默认情况下禁用）；正如 TLS RFC 所说：“*请注意，这种模式容易受到中间人攻击，因此不推荐使用。* ”此外，[HTTPS 规范](https://www.rfc-editor.org/rfc/rfc2818)本身期望有一个 X.509 证书。

检查远程方的身份是保护系统安全的必要元素。与可能不是他们声称的身份的远程方秘密交换数据并不是很有用（即使保密得到保证）。

话虽如此，您不必通过商业 CA。您可以使用自签名证书（必须将其作为可信证书单独导入每个客户端），也可以创建自己的机构 CA。有一些工具可以做到这一点，包括 OpenSSL [`CA.pl`](http://www.openssl.org/docs/apps/CA.pl.html)（参见手册页）、[TinyCA](http://tinyca.sm-zone.net/)或[OpenCA](http://www.openca.org/projects/openca/)等。一些操作系统还提供自己的小型 CA 功能。

> 如果我使用自己的域名或 IP 地址连接，我知道我是所有者。如果我是连接两端的所有者，SSL 证书会提供哪些附加价值？

该证书向您保证您确实连接到您的机器并且流量没有被拦截。这就是为什么您需要检查它是否是您认可的证书。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-05T13:38:56.863

SSL 证书更适合您的客户或使用您网站的人。无论哪种情况，数据都是通过相同的连接传输的——这只是第三方是否证明您是安全的问题。

在我上一份工作中，我们在上一份工作中通过 https/ftps 完成了所有内部数据传输，但直到最近才拥有 SSL 证书。由于数据传输是内部的，因此没有区别。

# android - Android MapView trying to add view, but already has parent

> ID：10029576
> 
> 赞同：3
> 
> 时间：2012-04-05T13:31:53.020
> 
> 标签：android, view, map

I have the following code:

```
setContentView(R.layout.maplayout);
// Create Rotate view
mRotateView = new RotateView(this);

// create a map view
mapView = (MapView) findViewById(R.id.mapview);

mRotateView.addView(mapView); // error here
setContentView(mRotateView);
mylocation = new MyLocationOverlay(this,mapView); 
```

But when I add the view I get an error that says that the specified child already has a parent. I assume this is because the mapView is already a child of the layout.

So, how do I resolve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:06:24.373

Option #1: Put `RotateView` in your `res/layout/maplayout.xml` resource as the parent of the `MapView` widget, so you do not have to set that up in Java code.

Option #2: Remove the `MapView` from your `res/layout/maplayout.xml` resource, create an instance of it via its constructor, and add it to your `RotateView` in Java code.

Option #3: Call `removeView()` on the parent to remove the `MapView` from it before calling `addView()` to add it to the `RotateView`.

# android - Access Mac "Site" folder as local host from Android Emulator

> ID：10029581
> 
> 赞同：0
> 
> 时间：2012-04-05T13:32:01.873
> 
> 标签：android, android-emulator, localhost

I have successfully accessed images from my "XXAMP" server on my Windows machine to populate a gridview on an Android emulator, but am having no luck on my mac. Here is what works on my windows:

```
"http://10.0.2.2/helloGridView/imgs/sample_0.jpg", 
```

and I tried this on mac (utilizing Sites folder):

```
"http://172.20.23.1/~verityt/helloGridView/imgs/sample_0.jpg", 
```

Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:51:14.860

使用与 windows 中相同的形式，但请注意，如果您在 mac 上使用“站点”文件夹，则 url 将采用不同的形式。例如，以下是在我的 Mac 上对我有用的方法：

[http://10.0.2.2/~gmanish/noteit.web/controller/appcontroller.php](http://10.0.2.2/~gmanish/noteit.web/controller/appcontroller.php)

10.0.2.2 是本地主机环回地址。gmanish 是我的用户名。相对于我的根文件夹（/Users/gmanish/Sites），其他所有内容都存在于磁盘上。

# iphone - Uitable editing mode make my cell button displays outside the cell

> ID：10029584
> 
> 赞同：0
> 
> 时间：2012-04-05T13:32:15.460
> 
> 标签：iphone

i am using UItable view to show data. i have UIbutton in each cell on right side.when i select edit mode in table my UIButton displays outside from table.please tell me what should i do.

krishan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:05:21.203

根据您创建按钮的方式（代码或 IB），使用代码中的 autoresizingMask 或 IB 中的 Size Inspector 将行为更改为您想要的。你可以告诉它保持左边距不变，或者改变宽度，或者任何你认为最好的东西。

# python - 威尔逊分数区间的 Python 实现？

> ID：10029588
> 
> 赞同：34
> 
> 时间：2012-04-05T13:32:45.473
> 
> 标签：python, algorithm, statistics, ranking

在阅读[了 How Not to Sort by Average Rating](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)之后，我很好奇是否有人对 Bernoulli 参数的 Wilson 得分置信区间的下限进行了 Python 实现？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-05T13:36:33.413

Reddit 使用 Wilson 得分区间进行评论排名，解释和 python 实现可以在[这里找到](https://medium.com/hacking-and-gonzo/how-reddit-ranking-algorithms-work-ef111e33d0d9)

```
#Rewritten code from /r2/r2/lib/db/_sorts.pyx

from math import sqrt

def confidence(ups, downs):
    n = ups + downs

    if n == 0:
        return 0

    z = 1.0 #1.44 = 85%, 1.96 = 95%
    phat = float(ups) / n
    return ((phat + z*z/(2*n) - z * sqrt((phat*(1-phat)+z*z/(4*n))/n))/(1+z*z/n)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-10T10:33:19.813

我认为这个有一个错误的威尔逊电话，因为如果你有 1 up 0 down 你会得到*NaN*因为你不能`sqrt`对负值做 a 。

[查看文章如何不按平均页面排序](http://evanmiller.org/how-not-to-sort-by-average-rating.html)的 ruby​​ 示例时可以找到正确的示例：

```
return ((phat + z*z/(2*n) - z * sqrt((phat*(1-phat)+z*z/(4*n))/n))/(1+z*z/n)) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-14T23:08:37.877

要获得没有连续性校正的 Wilson CI，您可以使用`proportion_confint`. `statsmodels.stats.proportion`要获得具有连续性校正的 Wilson CI，您可以使用以下代码。

```
# cf. 
# [1] R. G. Newcombe. Two-sided confidence intervals for the single proportion, 1998
# [2] R. G. Newcombe. Interval Estimation for the difference between independent proportions:        comparison of eleven methods, 1998

import numpy as np
from statsmodels.stats.proportion import proportion_confint

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
def propci_wilson_cc(count, nobs, alpha=0.05):
    # get confidence limits for proportion
    # using wilson score method w/ cont correction
    # i.e. Method 4 in Newcombe [1]; 
    # verified via Table 1
    from scipy import stats
    n = nobs
    p = count/n
    q = 1.-p
    z = stats.norm.isf(alpha / 2.)
    z2 = z**2   
    denom = 2*(n+z2)
    num = 2.*n*p+z2-1.-z*np.sqrt(z2-2-1./n+4*p*(n*q+1))    
    ci_l = num/denom
    num = 2.*n*p+z2+1.+z*np.sqrt(z2+2-1./n+4*p*(n*q-1))
    ci_u = num/denom
    if p == 0:
        ci_l = 0.
    elif p == 1:
        ci_u = 1.
    return ci_l, ci_u

def dpropci_wilson_nocc(a,m,b,n,alpha=0.05):
    # get confidence limits for difference in proportions
    #   a/m - b/n
    # using wilson score method WITHOUT cont correction
    # i.e. Method 10 in Newcombe [2]
    # verified via Table II    
    theta = a/m - b/n        
    l1, u1 = proportion_confint(count=a, nobs=m, alpha=0.05, method='wilson')
    l2, u2 = proportion_confint(count=b, nobs=n, alpha=0.05, method='wilson')
    ci_u = theta + np.sqrt((a/m-u1)**2+(b/n-l2)**2)
    ci_l = theta - np.sqrt((a/m-l1)**2+(b/n-u2)**2)     
    return ci_l, ci_u

def dpropci_wilson_cc(a,m,b,n,alpha=0.05):
    # get confidence limits for difference in proportions
    #   a/m - b/n
    # using wilson score method w/ cont correction
    # i.e. Method 11 in Newcombe [2]    
    # verified via Table II  
    theta = a/m - b/n    
    l1, u1 = propci_wilson_cc(count=a, nobs=m, alpha=alpha)
    l2, u2 = propci_wilson_cc(count=b, nobs=n, alpha=alpha)    
    ci_u = theta + np.sqrt((a/m-u1)**2+(b/n-l2)**2)
    ci_l = theta - np.sqrt((a/m-l1)**2+(b/n-u2)**2)     
    return ci_l, ci_u

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# single proportion testing 
# these come from Newcombe [1] (Table 1)
a_vec = np.array([81, 15, 0, 1])
m_vec = np.array([263, 148, 20, 29])
for (a,m) in zip(a_vec,m_vec):
    l1, u1 = proportion_confint(count=a, nobs=m, alpha=0.05, method='wilson')
    l2, u2 = propci_wilson_cc(count=a, nobs=m, alpha=0.05)
    print(a,m,l1,u1,'   ',l2,u2)

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# difference in proportions testing 
# these come from Newcombe [2] (Table II)
a_vec = np.array([56,9,6,5,0,0,10,10],dtype=float)
m_vec = np.array([70,10,7,56,10,10,10,10],dtype=float)
b_vec = np.array([48,3,2,0,0,0,0,0],dtype=float)
n_vec = np.array([80,10,7,29,20,10,20,10],dtype=float)

print('\nWilson without CC')
for (a,m,b,n) in zip(a_vec,m_vec,b_vec,n_vec):
    l, u = dpropci_wilson_nocc(a,m,b,n,alpha=0.05)
    print('{:2.0f}/{:2.0f}-{:2.0f}/{:2.0f} ; {:6.4f} ; {:8.4f}, {:8.4f}'.format(a,m,b,n,a/m-b/n,l,u))

print('\nWilson with CC')
for (a,m,b,n) in zip(a_vec,m_vec,b_vec,n_vec):
    l, u = dpropci_wilson_cc(a,m,b,n,alpha=0.05)
    print('{:2.0f}/{:2.0f}-{:2.0f}/{:2.0f} ; {:6.4f} ; {:8.4f}, {:8.4f}'.format(a,m,b,n,a/m-b/n,l,u)) 
```

高温高压

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-30T16:29:51.630

公认的解决方案似乎使用硬编码的 z 值（最适合性能）。

[如果您想要博客文章](http://www.evanmiller.org/how-not-to-sort-by-average-rating.html)中具有动态 z 值（基于置信区间）的 ruby​​ 公式的直接 python 等效项：

```
import math

import scipy.stats as st

def ci_lower_bound(pos, n, confidence):
    if n == 0:
        return 0
    z = st.norm.ppf(1 - (1 - confidence) / 2)
    phat = 1.0 * pos / n
    return (phat + z * z / (2 * n) - z * math.sqrt((phat * (1 - phat) + z * z / (4 * n)) / n)) / (1 + z * z / n) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-03T19:51:57.273

如果您想直接从置信区间实际计算 z 并且希望避免安装 numpy/scipy，您可以使用以下代码片段，

```
import math

def binconf(p, n, c=0.95):
  '''
  Calculate binomial confidence interval based on the number of positive and
  negative events observed.  Uses Wilson score and approximations to inverse
  of normal cumulative density function.

  Parameters
  ----------
  p: int
      number of positive events observed
  n: int
      number of negative events observed
  c : optional, [0,1]
      confidence percentage. e.g. 0.95 means 95% confident the probability of
      success lies between the 2 returned values

  Returns
  -------
  theta_low  : float
      lower bound on confidence interval
  theta_high : float
      upper bound on confidence interval
  '''
  p, n = float(p), float(n)
  N    = p + n

  if N == 0.0: return (0.0, 1.0)

  p = p / N
  z = normcdfi(1 - 0.5 * (1-c))

  a1 = 1.0 / (1.0 + z * z / N)
  a2 = p + z * z / (2 * N)
  a3 = z * math.sqrt(p * (1-p) / N + z * z / (4 * N * N))

  return (a1 * (a2 - a3), a1 * (a2 + a3))

def erfi(x):
  """Approximation to inverse error function"""
  a  = 0.147  # MAGIC!!!
  a1 = math.log(1 - x * x)
  a2 = (
    2.0 / (math.pi * a)
    + a1 / 2.0
  )

  return (
    sign(x) *
    math.sqrt( math.sqrt(a2 * a2 - a1 / a) - a2 )
  )

def sign(x):
  if x  < 0: return -1
  if x == 0: return  0
  if x  > 0: return  1

def normcdfi(p, mu=0.0, sigma2=1.0):
  """Inverse CDF of normal distribution"""
  if mu == 0.0 and sigma2 == 1.0:
    return math.sqrt(2) * erfi(2 * p - 1)
  else:
    return mu + math.sqrt(sigma2) * normcdfi(p) 
```

# vbscript - 我无法理解查询

> ID：10029590
> 
> 赞同：0
> 
> 时间：2012-04-05T13:32:56.063
> 
> 标签：vbscript

我无法理解这个查询？

```
select 
    @:vfOutBalance+@:vfHSSubTotal+@3+orpartpayment,@:vfOutBalance+@:vfHSSubTotal 
from 
    or_equip_upgrd_id 
```

是什么`@3`意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T03:19:07.157

这是一个参数化查询。@ 表示处理查询时将填充的参数。

# c++ - C++ 模板仅限于基类及其派生类

> ID：10029593
> 
> 赞同：3
> 
> 时间：2012-04-05T13:33:06.840
> 
> 标签：c++, class, templates, derived

我正在尝试制作一个资源加载器，并希望拥有一个类资源和一个模板类资源管理器。不同类型的资源继承自基础资源类，例如图像、3d 网格等。

我可以拥有任何类型资源的映射，但是我将无法调用特定于派生类的函数。3dMesh 可能有 getVertecies() ，而图像可能有 getWidth() 等。

因此，我将使用模板化的 resourceManager 类。

然后您可以创建资源管理器，例如：

```
 resourceManager<3dMesh> resMan3DMeshes();
 resourceManager<picture> resManPictures(); 
```

资源管理器将返回资源类型的指针，而不是基础资源类。这样您就可以调用特定于每种资源类型的函数。

```
 pointerToMesh->getVerticies();
 pointerToPicture->getWidth(); 
```

但是，使用这种方法，您可以传入任何内容来创建资源管理器。

```
 resourceManager<int> resManInts(); 
```

这很好，除了资源管理器应该能够调用基础资源类的函数。例如，基础资源类将具有用于从文件加载的虚函数，但资源管理器将无法调用这些函数，因为它可以作为模板传递任何内容，以及 int 或字符串或任何没有 loadFromFile( ）。

我正在考虑对基类进行模板规范化，但随后它将返回基类的指针而不是派生的指针，除非我为每个派生类专门化它，但我可能还没有模板化类，而是为每种类型提供一个资源管理器类。

那么，有什么方法可以使用模板并具有调用派生类函数的优势，同时仍然可以访问基类的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:42:40.607

是的，可以将模板参数限制为特定类的后代。[看到这个答案。](https://stackoverflow.com/a/3801818/51831)

或者你可以让它保持不变。无论如何，如果模板参数不满足所需的接口，资源管理器将无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:43:11.307

如果您希望提供给您的所有类型都具有“loadFromFile()”方法，而不仅仅是在模板中使用此方法。如果有人将您作为模板参数“int”提供给您，它将无法编译，据我所知，这是可以的，这个人不应该这样做。

只需记录您希望给定给您的所有类型的接口（例如“有一个 loadFromFile() 方法”）。

# php - Zend Framework - 在 oop 原理中，方法 '$this->getRequest()->getPost()' 如何工作？

> ID：10029595
> 
> 赞同：4
> 
> 时间：2012-04-05T13:33:13.963
> 
> 标签：php, oop, zend-framework

下面的方法如何工作？

```
$this->getRequest()->getPost(); 
```

`getPost()`类中没有方法`Zend_Controller_Request_Abstract`，但它如何工作？在 OOP 原则中，方法`getPost()`应该出现在`Zend_Controller_Request_Abstract`.

如果没有直接实例，Zend 怎么能引入`getPost()`类呢？`Zend_Controller_Request_Http`

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:35:16.207

`getPost()`是`Zend_Controller_Request_Http`扩展`Zend_Controller_Request_Abstract`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:44:30.387

Zend 将首先将您的所有请求发送到 Zend/Controller/Front.php 中的 FrontController。FrontController 会将 Http 请求注入控制器这里是它发生的代码

```
 /**
     * Instantiate default request object (HTTP version) if none provided
     */
    if (null !== $request) {
        $this->setRequest($request);
    } elseif ((null === $request) && (null === ($request = $this->getRequest()))) {
        require_once 'Zend/Controller/Request/Http.php';
        $request = new Zend_Controller_Request_Http();
        $this->setRequest($request);
    } 
```

> frontcontroller 的目的是**初始化请求环境**，路由传入的请求，然后调度任何发现的动作；它聚合所有响应并在过程完成时返回它们。

更多关于 FrontController 的信息[在这里](http://framework.zend.com/manual/en/zend.controller.front.html)

进一步回答您的问题

```
/**
 * Return the Request object
 *
 * @return Zend_Controller_Request_Abstract
 */
public function getRequest()
{
    return $this->_request;
} 
```

这就是您在 Zend/Controller/Action.php 中的内容 - 这里的注释说 Zend_Controller_Request_Abstract ' **is-a** ' 返回类型。我突出显示'is-a'，因为它可以返回任何'is-a' Zend_Controller_Request_Abstract 类。有关 is-a 的更多信息，请查看此[维基百科](http://en.wikipedia.org/wiki/Is-a)页面

> “在知识表示、面向对象的编程和设计中，is-a 或 is_a 或 is a（包含）是一种关系，其中一个类 D 是另一个类 B 的子类（因此 B 是 D 的超类）。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:14:28.937

虽然我投票结束了这个问题（“这个问题可能会征求意见、辩论、争论、投票或扩展讨论”），但我认为你提出了一个有趣的观点。我认为 ZF 开发团队可以辩护如下：

就框架而言，Action 只需要实现`Zend_Controller_Action_Interface`，本质上就是`dispatch()`方法。该框架提供了一个抽象实现类`Zend_Controller_Action`，我们作为用户级应用程序开发人员通常扩展它来定义我们的操作方法等。但是该类中没有任何实际需要`Zend_Controller_Request_Http`. `$request->getPost()`框架代码中没有固有的依赖关系。只有在用户空间中，我们的应用程序开发人员通常会使用创建实例的默认调度流程，这反过来又使我们能够通过该方法`Zend_Controller_Request_Http`访问 POST 。`getPost()`

人们可以很容易地为 CLI 创建 MVC 应用程序 - 其中 POST 的概念实际上并不适用 - 使用不同的子类`Zend_Controller_Request_Abstract`作为其请求机制。

# c# - SerialPort.Write method hanging, timeout not fired in C#

> ID：10029597
> 
> 赞同：2
> 
> 时间：2012-04-05T13:33:33.517
> 
> 标签：c#, .net, serial-port

I have to write a program that writes on a serial port but sometimes the call to the Write method hangs and the WriteTimeout is never fired so my program hangs indefinitely.

Here is the port creation code:

```
 void DetectX1BackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        String[] ports = SerialPort.GetPortNames();
        int i = 0;
        foreach (string PortName in ports)
        {
            try
            {
                Console.WriteLine("Trying to open:" + PortName);
                SerialPort port = openSerial(PortName);
                Console.WriteLine("Port is open:" + PortName);
                port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);
                port.Write("$ST+IMEI=0000\r\n");
                if (IMEIFoundEvent.WaitOne(250))
                {
                    Console.WriteLine("IMEI Found:[" + imei + "]");
                    if (addresses.ContainsKey(imei))
                    {
                        ((BackgroundWorker)sender).ReportProgress(0, new X1Model(imei, PortName, addresses[imei]));
                    }
                    else
                        Console.WriteLine("imei not in file: " + imei);
                }
                port.Close();

            }
            catch (Exception ex)
            {
                Console.WriteLine("Erreur port " + PortName + ex.Message);
            }
            finally
            {
                i++;
                ((BackgroundWorker)sender).ReportProgress(i * 100 / ports.Length);
            }
        }
    }

   private SerialPort openSerial(string PortName)
    {
        SerialPort port = new SerialPort(PortName);
        port.BaudRate = 57600;
        port.DataBits = 8;
        port.StopBits = StopBits.One;
        port.Parity = Parity.None;
        port.ReceivedBytesThreshold = 1;
        port.Handshake = Handshake.None;
        port.DtrEnable = true;
        port.RtsEnable = true;
        port.WriteTimeout = 5000;
        port.ReadTimeout = 5000;
        if (!port.IsOpen)
            port.Open();
        return port;
    } 
```

Is there anything I'm missing ? I don't know if it's relevant but I'm using Serial To USB Adapters.

Edit: I'm using Windows XP with .Net 4.0\. The line doesnt't exceed 50 characters and ends by a EOL character.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-14T11:05:31.360

我知道这是一个老问题，您现在可能已经解决了，但还没有公认的答案。我昨天遇到了同样的问题，似乎已经解决了——你是在设置写入超时吗？

```
_serialPort.WriteTimeout = 500; 
```

[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.writetimeout.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.writetimeout.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:44:01.900

您还需要设置[`PortName`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.portname.aspx). 您可以从中获取端口列表[`GetPortNames`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx)。这通常会像`COM1`或`COM2`

# android - Onclick 侦听器在设备中不起作用？

> ID：10029601
> 
> 赞同：0
> 
> 时间：2012-04-05T13:33:59.463
> 
> 标签：android, onclicklistener

在我的应用程序中，我有一个 textview 并添加了 onclick 侦听器，它在我的模拟器上运行良好。但在我的设备中无法运行。谁能建议它发生了什么？这是我的布局

```
<RelativeLayout
    android:id="@+id/footerbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginTop="280dp"
    android:background="@drawable/bottom_navigation" >

    <TextView
        android:id="@+id/call"
        android:layout_width="wrap_content"
        android:layout_height="48dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="3dp"
        android:background="@drawable/call_background"
        android:gravity="center_horizontal"
        android:paddingTop="25dp"
        android:clickable="true"
        android:text="Call"
        android:textColor="@drawable/tab_txt_color"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/route"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="3dp"
        android:layout_toRightOf="@+id/call"
        android:background="@drawable/route_background"
        android:gravity="center_horizontal"
        android:paddingTop="25dp"
        android:text="Route"
        android:clickable="true"
        android:textColor="@drawable/tab_txt_color"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/mail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="3dp"
        android:layout_toRightOf="@+id/route"
        android:background="@drawable/email_background"
        android:gravity="center_horizontal"
        android:paddingTop="25dp"
        android:text="Email"
        android:clickable="true"
        android:textColor="@drawable/tab_txt_color"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/web"
        android:layout_width="wrap_content"
        android:layout_height="48dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="3dp" 
        android:background="@drawable/web_background"
        android:gravity="center_horizontal"
        android:paddingTop="25dp"
        android:text="Web"
        android:clickable="true"
        android:textColor="@drawable/tab_txt_color"
        android:textSize="16sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

这是我的代码

```
route = (TextView) findViewById(R.id.route);
route.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(AnotherDetail.this,
                    MapRouteActivity.class);
            startActivity(intent);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:13:26.867

请尝试增加 textview 的大小，因为有时我们点击 textview 但实际上它是点击相对布局而不是文本视图，所以尝试增加你的 textview 大小或在相对布局上设置 oncllick 侦听器

# google-maps - How to Draw Draggable and Resizable rectangle in google map api v3

> ID：10029602
> 
> 赞同：0
> 
> 时间：2012-04-05T13:34:12.727
> 
> 标签：google-maps, google-maps-api-3

I want to draw a custom rectangle which is resizable and draggable with a close button and which is formed with the bounds returned by the query in the database.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:29:13.313

这是一个可调整大小和可拖动的矩形。一点点搜索和一些尝试会给你你需要的东西。

```
function initialize() {
        var myOptions = {
          center: new google.maps.LatLng(44.5452, -78.5389),
          zoom: 9,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'),
          myOptions);

        var bounds = new google.maps.LatLngBounds(
          new google.maps.LatLng(44.490, -78.649),
          new google.maps.LatLng(44.599, -78.443)
        );

        var rectangle = new google.maps.Rectangle({
          bounds: bounds,
          editable: true
        });

        rectangle.setMap(map);
      }

      google.maps.event.addDomListener(window, 'load', initialize); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:43:41.140

我认为您唯一需要添加的是矩形选项中的“可拖动：真”。

所以，应该是这样的；

```
var rectangle = new google.maps.Rectangle({
      bounds: bounds,
      editable: true,
      draggable: true
    }); 
```

这将使矩形可调整大小和可拖动。同样在页面正文中创建一个按钮。

```
<body >
<button onclick="remove()">Close</button>      
</body> 
```

在删除函数中，您可以编写代码以连接到数据库。您必须在 initialize() 之外声明边界才能访问它。此链接可能会帮助您了解如何连接谷歌地图和 MySQL。[https://developers.google.com/maps/articles/phpsqlajax_v3](https://developers.google.com/maps/articles/phpsqlajax_v3)

# linker - d2：以不同的名称从外部库导入函数，它最初是导出的

> ID：10029611
> 
> 赞同：3
> 
> 时间：2012-04-05T13:34:36.600
> 
> 标签：linker, static-linking, d

我正在将用 C 编写的第 3 方库 API 翻译成 D。该库导出了许多名为 like 等的函数`libname_foofunc`，`libname_barfunc`这对于 C 库来说是可以预期的，以防止全局命名空间膨胀。由于 D 比 C 更模块化，我想提供更多的 D'ish 接口并摆脱函数前缀，所以函数看起来像`libname.c.foofunc`and `libname.c.barfunc`。

由于图书馆不知道我的“改进”，我必须以某种方式同时翻译`libname.c.foofunc`并`libname_foofunc`保留正确的外部链接、目标名称修改和调用约定。

假设有办法（我也不知道）告诉链接器外部未解析符号`__imp__D1c7foofuncFZi`对应于`_libname_foofunc`or `libname_foofunc@0`（尽管我必须手动进行名称修改），告诉 D 调用约定是什么仍然存在问题。

`extern(C) int foofunc()`如果我在 中明确指定`libname/c.di`，则不再存在调用约定问题，但名称被转换为`_foofunc`，这也与预期不同。

**那么，D 中是否有办法以与导出名称不同的名称导入外部函数？**

我已经考虑过以原始名称“按原样”导入函数，然后将它们别名为无前缀的类似物，但这似乎很笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:16:18.527

您可以使用

```
alias libname_foofunc foofunc; 
```

这将保持`libname_foofunc`可见，但允许您使用`foofunc`，编译器会将其转换为`libname_foofunc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:44:54.337

考虑到旧约的最后一段，答案是否定的。没有其他语言可以做到这一点，你描述的方式，它不应该。如果 API 设计者想要以您喜欢的方式命名函数，他们会以这种方式公开它们......

现在想象一下 A 组的开发人员更喜欢`some_function()`，然后 B 组更喜欢`someFunction()`，C 组更喜欢`SomeFunction()`......

别名是必须的，无论你使用 D 还是其他东西。它应该是这样的。API 应该简单、简洁、易于理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T17:00:53.693

就链接而言，符号实际上是 C 的东西，因为我们正在谈论 C 链接器。D 在链接和导出符号方面的情况与在 C++ 中的情况基本相同，这就是为什么会出现名称错误之类的原因。您将不得不使用它们的原始名称在 D 中为它们创建声明，因为这是链接器所期望的。D 没有做任何不同或神奇的事情来改变这一点。只有两种方法可以使用不同的名称。

1.  给你的 D 代码中的函数起别名。您可以将别名放在列出符号的任何模块中（因为无论如何您都必须在 D 中声明它们）。然后您的代码可以使用原始名称或别名。我没有看到任何笨拙的地方。

2.  创建包装函数 - 在 C 或 D 中 - 并让您的 D 代码使用它们。

别名肯定会更好恕我直言。它们不会引入任何开销并且不太复杂。

但无论如何，在 D 中使用 C 库时，正常的做法就是使用 C 函数名称。你正在调用 C 函数，这个事实不应该被隐藏。它们不是 D 函数，并且行为不同（即使它们相似）——尤其是在涉及到谁拥有你传递给函数的内存之类的东西时。重命名它们的好处是有争议的。通常是在编写 D 包装器以赋予 API 更清洁、更像 D 的 API（而不仅仅是更改名称）时，不再直接使用 C 函数。在 Phobos 中一个很好的例子是 etc.c.curl 与 std.net.curl。etc.c.curl 纯粹是 C API，不会尝试重命名任何内容。它不会创建任何别名来使符号匹配 Phobos 的命名约定或使它们更像 D。它' s 本质上只是 curl 头文件的 D 版本。另一方面，std.net.curl 建立在它之上，以提供更像 D 的 API 和抽象。它所做的远不止重命名 C 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T18:46:29.023

如果您不想将函数放入模块中，则可以将它们保存在结构中并模拟某种名称空间。例如，您可以这样做：

```
struct libname
{
    struct C
    {
        static int libname_foofunc();
        alias libname_foofunc foofunc;
    }

    static C c;
}

void main()
{
    libname.c.foofunc();
} 
```

# actionscript-3 - 用圆形减去（掩盖？）路径

> ID：10029613
> 
> 赞同：2
> 
> 时间：2012-04-05T13:34:57.453
> 
> 标签：actionscript-3, flash, apache-flex, graphics

我正在使用 Spark:Path 在 Flex 中绘制路径。

我想从这条路径中减去一个圆形，如下图所示：

![在此处输入图像描述](../Images/5c8d8b4d5543ffc77ffc6660e563fa35.png)

（小路又黑又宽）

有任何想法吗？

我尝试使用 Shape 对象创建蒙版，但无法完全创建具有圆孔的蒙版。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T14:18:12.800

找到了。

不涉及口罩。

我拿起`Path`并包裹了`Group`它：

```
<s:Group blendMode="layer">
    <s:Path id="connector" ... />
    <s:Ellipse id="hole" blendMode="erase"> 
```

我将其设置为“图层”，并在使用 blendMode 的路径*后*`blendMode`添加了一个椭圆*`erase`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:58:08.317

您不需要为此使用掩码，只需使用[`curveTo()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#curveTo%28%29)Graphics 类的方法：

```
var shape1:Shape = new Shape();
shape1.graphics.beginFill(0x000000);
shape1.graphics.moveTo(0,0);
shape1.graphics.lineTo(80,0);
shape1.graphics.curveTo(110,30,140,0);
shape1.graphics.lineTo(300,0);
shape1.graphics.lineTo(300,20);
shape1.graphics.lineTo(0,20);
shape1.graphics.lineTo(0,0);
shape1.graphics.endFill(); 
```

这给了你：

![在此处输入图像描述](../Images/0dbb2d8d875b4c5daab05ee13e2f6658.png)

这显然不是使用您的确切尺寸，而是演示了原理。*

# python - python - 如何在python / numpy中对数组上的元素间隔求和？

> ID：10029616
> 
> 赞同：1
> 
> 时间：2012-04-05T13:35:09.123
> 
> 标签：python, arrays, matlab, numpy, sum

如何在 python / numpy 中对数组上的元素间隔求和？

例如，在 matlab 中可能是这样的：

```
y= ones(10,20);
y(1:5,:) = 2;
for k = 1: 10
   psum(k) = sum(y((1:3),k));
end 
```

但是 numpy 的 sum 函数不支持“1:3”

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:40:05.307

大概是这样的：

```
y = numpy.ones((10, 20))
y[0:5] = 2
psum = y[0:3].sum(axis=0) 
```

一个更简单的例子：

```
y = numpy.array([2, 6, 7, 3, 4])
print y[1:4].sum() 
```

prints `16`，中间三个元素的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:46:31.383

这应该可以解决问题：

```
>>> y = np.ones((10, 20))
>>> y[0:5, :] = 2
>>> psum = y[0:3, 0:10].sum(axis=0) 
```

请注意，在 Python 中，索引是从零开始的，而结束索引是不包含在内的。

# sql-server-2008 - SQL Server 2008 在哪里存储安装日志？

> ID：10029619
> 
> 赞同：0
> 
> 时间：2012-04-05T13:35:16.297
> 
> 标签：sql-server-2008

这听起来像是一个奇怪的问题，但我似乎无法找到我的 Microsoft SQL Server 2008 Express 安装的安装日志。根据几篇[Microsoft 支持文章](http://support.microsoft.com/kb/955396)，它们应该存储在以下目录中，但子文件夹 Setup Bootstrap 对我来说不存在。

```
%ProgramFiles%\Microsoft SQL Server\100\Setup Bootstrap\Log\ 
```

安装程序是否有任何其他目录保存安装日志和/或是否有覆盖它的方法？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:17:59.513

您要签`C:\Program Files (x86)`入 64 位安装吗？

你应该检查一下 `C:\Program Files`。

# c# - Mono-LibreOffice System.TypeLoadException

> ID：10029620
> 
> 赞同：2
> 
> 时间：2012-04-05T13:35:19.017
> 
> 标签：c#, mono, ubuntu-11.10, libreoffice

过去，我编写了一个 C# 库来与 OpenOffice 一起使用，它在 Windows 中运行良好，而不是在带有 Mono 的 Ubuntu 下运行。
该库的一部分[在此处](https://stackoverflow.com/questions/7685661/programmatically-convert-word-docx-tot-pdf/7685705#7685705)作为已接受的答案发布。
这几天我发现 Ubuntu 决定迁移到 LibreOffice，所以我用 LibreOffice 最新的稳定版本尝试了我的库。
虽然在 Windows 下它运行良好，但在 Linux 下我收到此错误：

```
Unhandled Exception: System.TypeLoadException: A type load exception has occurred.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: A type load exception has occurred. 
```

通常 Mono 会告诉我们哪个库无法加载，所以我可以安装正确的包并且一切正常，但在这种情况下我真的不知道出了什么问题。

我正在使用`Ubuntu oneiric`并且我的库是用 Framework 4.0 编译的。
在 Windows 下，我必须将其写入 app.config：

```
<?xml version="1.0"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
  </startup>
</configuration> 
```

因为 LibreOffice 程序集使用 Framework 2.0（我认为）。

我怎样才能找到这个错误的原因来解决它？
谢谢

**更新：**
即使使用 Framework 2.0 问题（如预期）进行编译也是一样的。
问题（我认为）是 Mono 没有找到`cli-uno-bridge`软件包（可安装在以前的 Ubuntu 版本上，现在标记为已被取代），但我不能确定。

**更新 2：**
我在 Windows 上创建了一个引用 cli-uno dll 的测试控制台应用程序（它们在 GAC_32 和 GAC_MSIL 中注册）。

**控制台应用程序**

```
static void Main(string[] args)
{
    Console.WriteLine("Starting");
    string dir = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
    string doc = Path.Combine(dir, "Liberatoria siti web.docx");
    using (QOpenOffice.OpenOffice oo = new QOpenOffice.OpenOffice())
    {
        if (!oo.Init()) return;
        oo.Load(doc, true);
        oo.ExportToPdf(Path.ChangeExtension(doc, ".pdf"));
    }
} 
```

**图书馆：**

```
using unoidl.com.sun.star.lang;
using unoidl.com.sun.star.uno;
using unoidl.com.sun.star.container;
using unoidl.com.sun.star.frame;
using unoidl.com.sun.star.beans;
using unoidl.com.sun.star.view;
using unoidl.com.sun.star.document;
using System.Collections.Generic;
using System.IO;
using System;

namespace QOpenOffice
{
    class OpenOffice : IDisposable
    {
        private XComponentContext context;
        private XMultiServiceFactory service;
        private XComponentLoader component;
        private XComponent doc;

        public bool Init()
        {
            Console.WriteLine("Entering Init()");
            try
            {
                context = uno.util.Bootstrap.bootstrap();
                service = (XMultiServiceFactory)context.getServiceManager();
                component = (XComponentLoader)service.createInstance("com.sun.star.frame.Desktop");
                XNameContainer filters = (XNameContainer)service.createInstance("com.sun.star.document.FilterFactory");
                return true;
            }
            catch (System.Exception ex)
            {
                Console.WriteLine(ex.Message);
                if (ex.InnerException != null)
                    Console.WriteLine(ex.InnerException.Message);
                return false;
            }
        }
    }
} 
```

但我看不到***“开始”***！
如果我在应用程序上评论 using(...) ，我会在控制台上看到一行...所以我认为 DLL 有问题。我`"Entering Init()"`在 Init() 上看不到消息。未安装 LibreOffice 和安装 LibreOffice 时的行为是相同的！！！`try..catch`块未执行...
我开始认为mono找不到LibreOffice CLI库...
我使用`updatedb`然后`locate`找到它们，但我总是得到一个空的结果；我不明白，在 Windows 上一切正常...

**更新 3：**
汉斯发表评论后，我刚刚删除了所有内容，但`Init()`在我的库中，但错误仍然存​​在。所以我搬到了动态

```
//private XComponentContext context;
//private XMultiServiceFactory service;
//private XComponentLoader component;
//private XComponent doc;
//private List<string> filters = new List<string>();

#region Constructors
public OpenOffice()
{
    Console.WriteLine("Entering Init()");
    try
    {
        var context = uno.util.Bootstrap.bootstrap();
        var service = (XMultiServiceFactory)context.getServiceManager();
        var component = (XComponentLoader)service.createInstance("com.sun.star.frame.Desktop");
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.Message);
        if (ex.InnerException != null)
            Console.WriteLine(ex.InnerException.Message);
    }
} 
```

现在在控制台中我可以看到

> 开始
> 
> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集 'cli_uretypes，Version=1.0.8.0，Culture=neutral，PublicKeyToken=ce2cb7e279207b9e' 或其依赖项之一。

这不能解决我的问题，但有帮助！
问题是：为什么LibreOffice的Linux安装（安装包+SDK）没有安装这个库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T19:30:16.830

我终于回答了我的问题，但我要感谢@Hans 帮助我找到隐藏的问题。
正如我写的那样，尝试使用 LibreOffice 运行一个简单的应用程序，我收到了这个错误

> 未处理的异常：System.TypeLoadException：发生类型加载异常。
> [错误] 致命的未处理异常：System.TypeLoadException：发生类型加载异常。

没有办法让 Mono 告诉我哪个是错误，我的应用程序也没有向控制台写入任何内容，因此我可以了解哪个部分/行引发了错误。
汉斯回答中的一段为我指明了方向

> .NET 框架有一个真正的即时编译器。Mono 没有，它有一个 AOT（Ahead Of Time）编译器。换句话说，它积极地编译程序集中的所有代码，而不仅仅是将要执行的代码。

所以当我宣布

```
private XComponentContext context;
private XMultiServiceFactory service;
private XComponentLoader component;
private XComponent doc; 
```

Mono 试图在应用程序执行时找到引用的程序集，而不是在处理这些行时！考虑到这一点，我决定继续前进。
所以我删除了变量声明并使用：

```
//private XComponentContext context;
//private XMultiServiceFactory service;
//private XComponentLoader component;

var context = uno.util.Bootstrap.bootstrap();
var service = (XMultiServiceFactory)context.getServiceManager();
var component = (XComponentLoader)service.createInstance(
    "com.sun.star.frame.Desktop"); 
```

再次执行我的应用程序，我能够看到我期望的控制台消息，最后，当`var context = ...`处理行时，我得到了

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集 'cli_uretypes，Version=1.0.8.0，Culture=neutral，PublicKeyToken=ce2cb7e279207b9e' 或其依赖项之一。

所以我终于找到了问题：Ubuntu 11.10 中的 LibreOffice 没有安装`CLI interface package`，并且这个包已经从当前的 Ubuntu 发行版中删除了。
即使我尝试手动安装其他较旧的软件包，甚至转换一些 rpm 软件包，我也无法将 LibreOffice 与 Mono 一起使用。
太糟糕了，即使以前使用 OpenOffice 的发行版也有`cli-uno-bridge`包做这项工作。希望将来会更好......
我也尝试在[AskUbuntu](https://askubuntu.com/questions/122559/libreoffice-mono-integration)上发布一个问题，但目前没有给出有用的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T16:39:34.160

> 通常 Mono 会告诉我们哪个库不能加载

这不是问题，它找到了一个名称正确的程序集。问题在于程序集的*内容*。您使用的引用程序集中存在的类型实际上并不存在于它在运行时找到的程序集中。如果您在 Windows 上构建并在 Linux 上运行，发生这种情况的可能性非常大。应该通过给程序集一个不同的 [AssemblyVersion] 来防止它，但该规则有时会被忽略。例如，微软就做到了。

异常的 InnerException 应该告诉您缺少什么类型。您可以通过向后工作来解决它，使用您在 Linux 机器上找到/安装的 LibreOffice 程序集作为参考程序集，这样您就知道参考和运行时程序集之间存在匹配的事实。现在可能会在缺少的类型上出现编译错误。如果缺少的类型没有在您的程序中直接引用，而是存在于帮助程序集中，那么您将遇到更大的问题。

更新：小心从您的 Init() 方法中得出结论。TypeLoadException 是由将 IL 编译为机器码时的抖动产生的。.NET 框架有一个真正的即时编译器。Mono 没有，它有一个 AOT（Ahead Of Time）编译器。换句话说，它积极地编译程序集中的所有代码，而不仅仅是将要执行的代码。因此，由于程序集中的其他代码可能会引发异常，而不仅仅是 Init() 中的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-26T13:43:59.267

虽然不容易弄清楚，但这个“类型加载异常”错误可能与您的 linux 机器上缺少的包有关。

[在这篇文章中](https://stackoverflow.com/questions/12642333/unhandled-exception-system-typeloadexception-when-running-on-mono-compiled-on)查看我的答案

# sql - 为什么 SSMS 脚本包含服务器名称？

> ID：10029621
> 
> 赞同：0
> 
> 时间：2012-04-05T13:35:20.373
> 
> 标签：sql, sql-server-2008

当我在 SSMS 中生成脚本时，它会创建一个完全限定的名称。

`[Server].[schema].[table]`

根据我的经验，在脚本中包含服务器名称会妨碍部署过程。EG 开发 > 测试 > 产品。成功执行脚本也不需要服务器名称。因此，我倾向于在生成脚本时删除该名称。

我意识到没有灵丹妙药，MS倾向于谨慎地做出这样的决定。那么这背后的想法是什么？出于某种原因，包含服务器名称是否是最佳实践？如果是这样，跨环境部署脚本的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:27:20.237

这不是标准行为

您可能已经更改了某些内容以修改服务器名称。

尝试将“架构限定对象名称”常规设置设置为 false。

理论上它应该删除 [schema] 部分。也许它也会删除服务器名称

# windows - 更改目录会使 %~dp0 停止工作

> ID：10029628
> 
> 赞同：1
> 
> 时间：2012-04-05T13:35:32.290
> 
> 标签：windows, batch-file, command, prompt

我在`C:\`驱动器上有两个批处理文件，并且正在使用`%~dp0`命令使用第一个脚本的路径来复制第二个批处理脚本：

```
COPY %~dp0"Hello World.BAT" C:\"Hello World.bak" 
```

在脚本的早期，我需要更改到根目录之外的子目录，`C:\`但这会阻止上述复制命令工作，我得到的错误是“找不到文件”。如果我留在复制命令的根目录中，`C:\`则可以完美运行。任何想法为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:41:29.150

解决此问题的另一种方法是将 %~dp0 保存在脚本开头的另一个变量中。

```
@echo off
setlocal
set filepath=%~dp0
.
.
some code
.
.
cd away from original path
.
.
COPY "%filepath%Hello World.BAT" "C:\Hello World.bak" 
```

那*应该*行得通。

我很想认为它不起作用的原因与您的报价有关。

你有这个：

```
COPY %~dp0"Hello World.BAT" C:\"Hello World.bak" 
```

用这个替换它：

```
COPY "%~dp0Hello World.BAT" "C:\Hello World.bak" 
```

您需要将整个路径用引号括起来以确保它可以正常工作。如果你有：

```
C:\Program Files\Somefolder\ 
```

作为您的路径并使用引号如何使用它们，结果将如下所示：

```
"C:\Program Files\Somefolder\""Hello World.bak" 
```

它不会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:47:56.350

我还没有完全弄清楚更改当前目录如何导致命令在更改之前运行时失败。但我注意到引号没有放在最佳位置。路径中的空格会导致命令失败，但在我看来，无论您当前的目录如何，它都应该失败。

我会使用：

```
COPY "%~dp0Hello World.BAT" "C:\Hello World.bak" 
```

将引号移到第一个参数的前面可能很重要。为第二个参数移动它并不重要，因为路径中显然没有空格，但对我来说看起来更好。

*编辑*
更仔细地阅读你的问题后，我想这个故事一定还有更多。如果两个批处理文件都在 C 驱动器的根目录中，那么您发布的原始代码应该可以工作。

尝试编辑您的脚本以诊断正在发生的事情。将 ECHO 放在复制命令之前，以便您可以看到脚本正在尝试执行的操作。（或者只是确保 echo 处于打开状态，但是可能更难在输出中找到正确的行。）

```
echo COPY %~dp0"Hello World.BAT" C:\"Hello World.bak" 
```

如果您仍然无法找出问题所在，请发布结果以便其他人提供帮助。

# javascript - 谷歌浏览器是否支持正文 onunload() 函数？

> ID：10029632
> 
> 赞同：1
> 
> 时间：2012-04-05T13:35:46.397
> 
> 标签：javascript, jquery, html, google-chrome

我编写代码如下：

```
<script type="text/javascript">
function onBack(){
window.history.forward(-1);} 
```

```
<body onunload="onBack();" onpageshow="if (event.persisted) onBack();"> 
```

它适用于 Firefox 和 IE，但不适用于 google crome？请帮忙...... ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:40:38.343

尝试这个：

```
window.onbeforeunload = function() {
    return "Are you sure?";
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:11:07.853

使用 Jquery 卸载。所有浏览器都支持的

```
$(window).unload(function () {
    alert("byebye");
}); 
```

在 safari 和 chrome（版本 14 及更高版本）中，onbeforeunload 和 onunload 事件被忽略。

# java - Java 形状共享边界

> ID：10029635
> 
> 赞同：0
> 
> 时间：2012-04-05T13:35:51.717
> 
> 标签：java, graphics2d, tiling

我正在编写一个生成彭罗斯平铺的程序，我想使用 Java 的 Graphics2D 类。我想知道是否有任何方法可以检查 2 个或更多形状是否彼此共享边界。我应该只比较斜率和基点还是有其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:47:12.780

我觉得最好将坐标与碰撞检测进行比较。

我找到了这些教程，如果您需要，它们可能会对您有所帮助。

2d 碰撞检测 - [http://zetcode.com/tutorials/javagamestutorial/collision/](http://zetcode.com/tutorials/javagamestutorial/collision/)

3d 碰撞检测 - [http://www.java-tips.org/other-api-tips/java3d/collision-detection-with-java3d-2-2.html](http://www.java-tips.org/other-api-tips/java3d/collision-detection-with-java3d-2-2.html)

希望这可以帮助

# python - 如何用 xlrd 读取公式

> ID：10029641
> 
> 赞同：2
> 
> 时间：2012-04-05T13:36:21.270
> 
> 标签：python, excel, xlrd

我正在尝试做一个解析器，它读取几个 excel 文件。我需要的值通常位于行的底部，您可以在其中找到所有上层元素的总和。因此，单元格值实际上是“=sum()”或“A5*0.5”，可以说...对于使用 excel 打开此文件的用户来说，它看起来像一个数字，这很好。但是如果我尝试用 ws.cell(x, y).value 读取这个值，我什么也得不到。

所以我的问题是如何用 xlrd 读取这种字段，如果可以像 ws.cell(x, y).value 或类似的东西那样读取它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:49:34.487

根据您的问题的链接，我已经在上面发布，xlrd 的作者说，“这项工作正在‘进行中’，但由于 xlrd 的重点在其他地方，因此不太可能很快可用”。由此，我假设对此您无能为力。注意：这是基于作者在 2011 年 1 月的评论。

# c# - VSTO 在代码中启动 EXCEL

> ID：10029643
> 
> 赞同：0
> 
> 时间：2012-04-05T13:36:25.767
> 
> 标签：c#, excel, office-interop, excel-2010

我正在尝试使用以下代码行启动 Excel 应用程序的新实例：

```
excelApp = new MSExcel.Application();
((MSExcel.Application)excelApp).Visible = true; 
```

但应用程序仅启动几秒钟。它不会发生在使用相同代码的单词中。有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:38:38.390

以下代码打开word文档

```
wordApp = new Word.Application();
wordObject.Documents.Open(FileName: fileName, ReadOnly: isReadOnly);
wordObject.Visible = true; 
```

# c# - 当类型为 StringCollection 时，ApplicationSettings 未绑定到属性

> ID：10029646
> 
> 赞同：1
> 
> 时间：2012-04-05T13:36:34.207
> 
> 标签：c#, winforms, serialization, windows-forms-designer, application-settings

我在 C# winforms 中工作，我想要以下行为：

在 applicationsettings 中定义一个字符串列表，然后将它们绑定到我的表单中的一个属性。

我能够用一个字符串（不是一个列表）来做到这一点而没有太大问题。我在设置文件中定义了我的字符串，打开了设计器，转到（ApplicationSettings），并添加了绑定。

为了用一堆字符串来做到这一点，我首先将 StringCollection 作为我的设置类型，这似乎工作正常。然后我创建了一个相同类型的属性（StringCollection）。

在设计器中，该属性根本无法选择，我不知道为什么。它不会显示在要绑定的可用属性列表中。

我是否需要我的财产上的一些特殊属性才能使绑定起作用？我是否为我的应用程序设置使用了错误的数据类型？

澄清：我的所有属性都在我的表单设计器中正确显示。我遇到的具体问题是，一旦加载了设计器，我试图通过属性网格的（应用程序设置）部分将 StringCollection 类型的属性绑定到 ApplicationResource。尝试从该列表中选择我的属性是显示所有自定义“字符串”属性的地方，但“字符串集合”类型的属性不显示。

# sql - 在 SQL 中连接表上的两列

> ID：10029647
> 
> 赞同：5
> 
> 时间：2012-04-05T13:36:42.917
> 
> 标签：sql

我有一个很容易理解的问题，但对我来说实现起来并不那么简单。

我有一个名为**Time**的表：

```
-----------------------------------
 DAY     TIME1     TIME2
-----------------------------------
 1       08.00     09.40
 1       09.40     10.00
 1       10.00     11.40
 2       08.00     08.50
 2       08.50     10.40
 ---------------------------------- 
```

我想要得到的是：

```
-------------------
 DAY     TIME     
-------------------
 1       08.00     
 1       09.40     
 1       10.00     
 1       11.00     
 2       08.00     
 2       08.50     
 2       10.40     
 ------------------ 
```

我试过这段代码：

```
SELECT DISTINCT sub.val FROM (
  SELECT Time1 AS val FROM Time
  UNION ALL
  SELECT Time2 AS val FROM Time
) AS sub 
```

它只返回时间列。我不知道加入**“日”**专栏。当我试图在“DISTINCT sub.val”之后添加**“Day”时，它出错了。**怎么做？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:40:41.443

```
select distinct day, time1 from mytab
union
select distinct day, time2 from mytab 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:40:36.400

```
SELECT DISTINCT sub.Day, sub.val as Time FROM (
  SELECT Day, Time1 AS val FROM Time
  UNION ALL
  SELECT Day, Time2 AS val FROM Time
) AS sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T13:42:43.450

试试这个

```
SELECT DISTINCT *
FROM (
    SELECT day, time1 FROM Time
    UNION ALL SELECT day, time2 FROM Time
) AS x
ORDER BY x.day 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T13:44:07.787

这可能会有所帮助：

```
SELECT
    DAY,
    TIME1
FROM
    YourTable AS T
UNION
SELECT
    DAY,
    TIME2
FROM
    YourTable AS T
ORDER BY DAY,TIME1 
```

# c# - XNA 屏幕管理

> ID：10029649
> 
> 赞同：0
> 
> 时间：2012-04-05T13:36:56.237
> 
> 标签：c#, xna

我正在使用来自 AppHub [http://create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)
的 这个示例 我正在使用这个示例为我的游戏创建一个菜单系统。游戏已经创建并可以在没有任何菜单等的情况下运行，因此我希望使用游戏状态管理。

我一直在看这个例子，它只是说将游戏代码实现到 GameplayScreen 类中。但是我有这个问题，因为我不能在这个位置加载某些游戏元素有几个原因（一个是这个类没有继承 Microsoft.Xna.Framework.Game）所以我有点茫然我如何在某个地方加载它们否则，例如仍然可以访问它们。我的游戏主要由两部分组成，控制大部分游戏的 PongSystem 和掌握大部分游戏细节的 PongGame。

如果有人可以帮助解释我如何将我的游戏实现到这个例子中，那将不胜感激。我的游戏可以在这里找到 - [http://min.us/mYZYMgzdC](http://min.us/mYZYMgzdC)

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:42:07.080

如果您不介意基本`winform`菜单，您可以随时以 Windows 形式创建菜单并使用`Process`类调用您的游戏。

```
 Process myProcess = new Process();
        myProcess.StartInfo.FileName = //You .exe FilePath
        myProcess.Start(); 
```

如果您不喜欢这种方法，有人在[这里](https://stackoverflow.com/questions/3941418/very-simple-menu-in-xna)发布了类似您的问题并获得了一些链接。

祝你的菜单好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:49:02.533

使用 GameComponent 对象，您可以加载所需的一切。( [http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx) ) 它们是线程化的，非常适合处理不同的逻辑部分而不会造成混乱你的屏幕。

创建一个主屏幕并向其添加组件，然后创建您的主游戏类，它可以引用您的组件。

抱歉，如果我没有很清楚地解释这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:09:24.297

从我过去的项目中，我发现这些教程（1-7）对使用 GSM 非常有帮助，

第一部分 - [http://www.youtube.com/watch?v=-mw6kGYCllI](http://www.youtube.com/watch?v=-mw6kGYCllI)

最后一部分 - [http://www.youtube.com/watch?v=3fbCZMuPCe0](http://www.youtube.com/watch?v=3fbCZMuPCe0)

如果您遵循教程，它将为您提供一个很好的基础。

这是我开发的最新游戏菜单/游戏的屏幕截图。

[http://philipstarritt.com/wave/ironfist](http://philipstarritt.com/wave/ironfist)

希望这可以帮助

# java - 我们如何用java在json中编码属性

> ID：10029650
> 
> 赞同：-3
> 
> 时间：2012-04-05T13:36:58.103
> 
> 标签：java, xml, json

在 XML 中，我们在标签内有属性

```
<x attributename="y"> Abcd </x> 
```

我们如何用java在json中编码属性

例如：

```
{
  "AAAA": {
    "-BBBB": "01-1-2011",
    "-CCCC": "11:11",
    "Data": [
      {
        "EE": "1111",
        "FF": "1"
      }
    ]
  }
} 
```

如果我们将 json 代码放在这个网站 [http://jsontoxml.utilities-online.info/](http://jsontoxml.utilities-online.info/)中 ，然后将其转换为 xml，我们会发现：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <AAAA BBBB="01-1-2011" CCCC="11:11">
        <Data>
            <EE>1111</EE>
            <FF>1</FF>
        </Data>
    </AAAA> 
```

那么我们如何用 java 编码 'BBBB' 和 'CCCC'

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:38:58.593

JSON 中没有“属性”，有键、值、数组和对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:38:58.657

正如您所说，属性在 XML 中。您不要在 JSON 中这样做，因为它不是格式的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:53:37.527

正如 ahanin 所说，JSON 没有属性。但是，您可以建立自己的约定：

```
{
  "AAAA": {
    "attributes" : {
        "-BBBB": "01-1-2011",
        "-CCCC": "11:11"
         },
    "Data": [
      {
        "EE": "1111",
        "FF": "1"
      }
    ]
  }
} 
```

虽然这对我来说似乎有点毫无意义。属性只是表示键值对的另一种方式，即使在 XML 中也不是必需的。

# hbase - 如何为 hbase 创建外部表

> ID：10029653
> 
> 赞同：3
> 
> 时间：2012-04-05T13:37:08.000
> 
> 标签：hbase, hive

我能够在 HBase 的配置单元中创建外部表，现在我需要创建一个具有可变列的外部表，这意味着 HBase 中的列对于特定表不是固定的，列的数量是可以创建的在数据插入时动态地，处理这种情况的方法应该是什么。

总结：当 HBase 表中的列数不固定时，如何在 hive 中创建外部表。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:45:03.950

1.  在 Hbase shell 中创建表

    `create 'hbase_2_hive_names', 'id', 'name', 'age'`

2.  将数据加载到 Hbase（输入文件必须在 HDFS 中）

    `export HADOOP_CLASSPATH=$(/usr/local/hbase/bin/hbase classpath);$HADOOP_HOME/bin/hadoop jar /usr/local/hbase/hbase-0.94.1.jar importtsv -Dimporttsv.columns=HBASE_ROW_KEY,id:id,name:fn,name:ln,age:age hbase_2_hive_names /var/data/samples/names.tsv`

3.  在 Hive shell 中创建外部表

    `CREATE EXTERNAL TABLE hbase_hive_names(hbid INT, id INT, fn STRING, ln STRING, age INT) STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,id:id,name:fn,name:ln,age:age") TBLPROPERTIES("hbase.table.name" = "hbase_2_hive_names");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T05:31:13.437

Step1：**登录HBase Shell**

```
hbase shell 
```

Step2：**创建HBase表**

```
hbase(main):001:0> create 'hbase_emp_table', [{NAME => 'per', COMPRESSION => 'SNAPPY'}, {NAME => 'prof', COMPRESSION => 'SNAPPY'} ]
Created table hbase_emp_table
Took 1.5417 seconds
=> Hbase::Table - hbase_emp_table 
```

Step3：**描述HBase表：**

```
hbase(main):002:0> describe 'hbase_emp_table'
Table hbase_emp_table is ENABLED
hbase_emp_table
COLUMN FAMILIES DESCRIPTION
{NAME => 'per', VERSIONS => '1', EVICT_BLOCKS_ON_CLOSE => 'false', NEW_VERSION_BEHAVIOR => 'false', KEEP_DELETED_CELLS => 'FALSE', CACHE_DATA_ON_WRITE => 'false', DATA_BLOCK_ENCODING =>
 'NONE', TTL => 'FOREVER', MIN_VERSIONS => '0', REPLICATION_SCOPE => '0', BLOOMFILTER => 'ROW', CACHE_INDEX_ON_WRITE => 'false', IN_MEMORY => 'false', CACHE_BLOOMS_ON_WRITE => 'false',
PREFETCH_BLOCKS_ON_OPEN => 'false', COMPRESSION => 'SNAPPY', BLOCKCACHE => 'true', BLOCKSIZE => '65536'}
{NAME => 'prof', VERSIONS => '1', EVICT_BLOCKS_ON_CLOSE => 'false', NEW_VERSION_BEHAVIOR => 'false', KEEP_DELETED_CELLS => 'FALSE', CACHE_DATA_ON_WRITE => 'false', DATA_BLOCK_ENCODING =
> 'NONE', TTL => 'FOREVER', MIN_VERSIONS => '0', REPLICATION_SCOPE => '0', BLOOMFILTER => 'ROW', CACHE_INDEX_ON_WRITE => 'false', IN_MEMORY => 'false', CACHE_BLOOMS_ON_WRITE => 'false',
 PREFETCH_BLOCKS_ON_OPEN => 'false', COMPRESSION => 'SNAPPY', BLOCKCACHE => 'true', BLOCKSIZE => '65536'}
2 row(s)
Took 0.1846 seconds 
```

Step4：**向HBase表中插入数据**

```
put 'hbase_emp_table','1','per:name','Ranga Reddy'
put 'hbase_emp_table','1','per:age','32'
put 'hbase_emp_table','1','prof:des','Senior Software Engineer'
put 'hbase_emp_table','1','prof:sal','50000'

put 'hbase_emp_table','2','per:name','Nishanth Reddy'
put 'hbase_emp_table','2','per:age','3'
put 'hbase_emp_table','2','prof:des','Software Engineer'
put 'hbase_emp_table','2','prof:sal','80000' 
```

Step5：**检查HBase表数据**

```
hbase(main):012:0> scan 'hbase_emp_table'
ROW                                             COLUMN+CELL
 1                                              column=per:age, timestamp=1606304606241, value=32
 1                                              column=per:name, timestamp=1606304606204, value=Ranga Reddy
 1                                              column=prof:des, timestamp=1606304606269, value=Senior Software Engineer
 1                                              column=prof:sal, timestamp=1606304606301, value=50000
 2                                              column=per:age, timestamp=1606304606362, value=3
 2                                              column=per:name, timestamp=1606304606338, value=Nishanth Reddy
 2                                              column=prof:des, timestamp=1606304606387, value=Software Engineer
 2                                              column=prof:sal, timestamp=1606304608374, value=80000
2 row(s)
Took 0.0513 seconds 
```

Step6:**使用 hive 或 beeline 登录 Hive shell**

```
hive 
```

Step7：**创建 Hive 表**

```
CREATE EXTERNAL TABLE IF NOT EXISTS hive_emp_table(id INT, name STRING, age SMALLINT, designation STRING, salary BIGINT) 
STORED BY 'org.apache.hadoop.hive.hbase.HBaseStorageHandler' 
WITH SERDEPROPERTIES ("hbase.columns.mapping" = ":key,per:name,per:age,prof:des,prof:sal") 
TBLPROPERTIES("hbase.table.name" = "hbase_emp_table"); 
```

Step8：**选择Hive表数据**

```
hive> select * from hive_emp_table;
INFO  : OK
+--------------------+----------------------+---------------------+-----------------------------+------------------------+
| hive_emp_table.id  | hive_emp_table.name  | hive_emp_table.age  | hive_emp_table.designation  | hive_emp_table.salary  |
+--------------------+----------------------+---------------------+-----------------------------+------------------------+
| 1                  | Ranga Reddy          | 32                  | Senior Software Engineer    | 50000                  |
| 2                  | Nishanth Reddy       | 3                   | Software Engineer           | 80000                  |
+--------------------+----------------------+---------------------+-----------------------------+------------------------+
2 rows selected (17.401 seconds) 
```

# javascript - 如何在 GWT 中公开类功能

> ID：10029656
> 
> 赞同：3
> 
> 时间：2012-04-05T13:37:10.993
> 
> 标签：javascript, gwt, code-generation

我有一个用 Java 编写的类库，并希望将其转换为 Javascript。所有方法都非常简单，主要与操作集合有关。我有一个类 GameControl，我可以对其进行实例化，并且我希望它的方法暴露给页面上的其他 Javascript 代码。

我想使用GWT。我在 GWT 中有一个正在运行的项目，它可以编译，但我不知道如何公开我的 GameControl 类的实例（+功能）。

我认为使用 JSNI 公开我的对象应该可以工作，但它没有。这是它现在的样子的简短版本：

**游戏入口点.java**

```
import com.google.gwt.core.client.EntryPoint;

public class GameEntryPoint implements EntryPoint {

    private GameControl _gameControl;

    @Override
    public void onModuleLoad() {
        _gameControl = new GameControl();
        expose();
    }

    public native void expose()/*-{
        $wnd.game = this.@game.client.GameEntryPoint::_gameControl;
    }-*/;

} 
```

**游戏控制.java**

```
package game.client;
public class GameControl {
    public boolean isEmpty(int id){
        // does stuff...
        return true;
    }   
} 
```

所以，GWT 确实编译了代码，我看到有一个`GameControl_0`对象正在构建并设置到`$wnd.game`中，但没有`isEmpty()`找到方法。

我预期的最终结果是`window.game`作为`GameControl`所有公共方法`GameControl`公开的实例。

我怎样才能做到这一点？

**编辑** 根据`@jusio`的回复，使用 JSNI 显式公开`window`属性有效，但它太冗长了。我正在尝试 gwt-exporter 解决方案。我现在有

**游戏入口点.java**

```
package game.client;

import org.timepedia.exporter.client.ExporterUtil;
import com.google.gwt.core.client.EntryPoint;

public class GameEntryPoint implements EntryPoint {

    @Override
    public void onModuleLoad() {
        ExporterUtil.exportAll();
    }

} 
```

**RoadServer.java**

```
package game.client;

import org.timepedia.exporter.client.Export;
import org.timepedia.exporter.client.ExportPackage;
import org.timepedia.exporter.client.Exportable;

@ExportPackage("game")
@Export("RoadServer")
public class RoadServer implements Exportable {
    int _index;
    int _id;
    public RoadServer(int index,int id){
        this._id=id;
        this._index=index;
    }
} 
```

但仍然没有导出任何代码（特别是没有`RoadServer`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T13:46:04.773

您只公开了`GameControl`. 如果你想公开其他方法，你也必须公开它们。例如：

```
 public native void expose()/*-{
        var control = this.@game.client.GameEntryPoint::_gameControl;   
        var gameInstance = {
            gameControl: control,
            isEmpty:function(param){
              control.@game.client.GameEntryPoint::isEmpty(*)(param);   
            }  

        }

        $wnd.game = gameInstance;
    }-*/; 
```

还有一个名为[gwt-exporter](http://code.google.com/p/gwt-exporter/)的框架，它可能会让你更轻松

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:37:14.387

这可能会有所帮助。

[http://code.google.com/p/gwtchismes/wiki/Tutorial_ExportingGwtLibrariesToJavascript_en](http://code.google.com/p/gwtchismes/wiki/Tutorial_ExportingGwtLibrariesToJavascript_en)

# eclipse - .svn/entries：没有这样的文件或目录

> ID：10029659
> 
> 赞同：2
> 
> 时间：2012-04-05T13:37:19.157
> 
> 标签：eclipse, svn

我正在使用 subclipse 从 Eclipse 提交和更新。今天遇到 svn 的麻烦（[丢失 .svn/format，该怎么办？](https://stackoverflow.com/questions/10026794/lost-svn-format-what-to-do)）我想试试看我是否可以从命令行提交。

尝试从命令行提交给了我一个

```
.svn/entries: No such file or directory 
```

错误。我[检查了](https://stackoverflow.com/questions/817987/how-to-commit-change)我的代码，做
[svn info](https://stackoverflow.com/questions/943665/how-to-update-a-file-in-svn)给了我

```
Path: .
URL: https://svn.somewhere.ac.uk/svn/some/ndeklein/MS
Repository Root: https://svn.somwhere.ac.uk/svn/some
Repository UUID: *
Revision: 5258
Node Kind: directory
Schedule: normal
Last Changed Author: anonym
Last Changed Rev: 5258
Last Changed Date: 2012-04-05 13:59:00 +0100 (Thu, 05 Apr 2012) 
```

在我看来，我的根文件夹中的 .svn 文件夹缺少一些必要的文件或文件夹，因为它也缺少[format](https://stackoverflow.com/questions/10026794/lost-svn-format-what-to-do)。不过，我不明白在重新结账时怎么可能，也不知道如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:01:55.873

您使用的是 SSD 磁盘和 Linux 吗？我是，这是我唯一一次看到这类错误（我使用的是 ext4 和加密）。尝试使用硬盘，或者仔细阅读[以下内容：](https://wiki.archlinux.org/index.php/Solid_State_Drives)

# c# - 查询返回 0 行

> ID：10029663
> 
> 赞同：2
> 
> 时间：2012-04-05T13:37:29.450
> 
> 标签：c#, asp.net, mysql

我正在为工作网站构建非常简单的搜索引擎。它有 3 个可选输入字段，术语、类别和雇主。术语和雇主字段是文本输入，类别是下拉列表。搜索逻辑非常愚蠢、复杂且不可扩展，但此搜索只能使用一次，我所需要的只是它适用于少数情况，因为当时我有更重要的事情要做t试图让它变得更好。

这是返回带有搜索结果的 DataSet 的方法。

```
private DataSet GetResults(string term, string category, string employer)
{
        string query = "SELECT * FROM Jobs ";

        MySqlConnection conn = DBConnection.Connect();
        MySqlCommand cmd = new MySqlCommand();
        cmd.Connection = conn;
        cmd.CommandType = CommandType.Text;

        if (String.IsNullOrEmpty(term) && String.IsNullOrEmpty(category) && String.IsNullOrEmpty(employer))
        {
            cmd.CommandText = query;
        }
        else
        {
            query += "WHERE ";
            if (!String.IsNullOrEmpty(term))
            {
                query += "Title LIKE '%@term%' OR Job_Desc LIKE '%@term%' ";

                if (!String.IsNullOrEmpty(category))
                    query += "AND Category = @category ";
                if (!String.IsNullOrEmpty(employer))
                    query += "AND Title LIKE '%@employer%' AND Job_Desc LIKE '%@employer%' ";
            }
            else if (!String.IsNullOrEmpty(category))
            {
                query += "Category = @category ";

                if (!String.IsNullOrEmpty(term))
                    query += "AND Title LIKE '%@term%' OR Job_Desc LIKE '%@term%' ";
                if (!String.IsNullOrEmpty(poduzece))
                    query += "AND Title LIKE '%@employer%' OR Job_Desc LIKE '%@employer%' ";
            }
            else if (!String.IsNullOrEmpty(employer))
            {
                query += "Naziv LIKE '%@employer%' OR Job_Desc LIKE '%@poduzece%' ";

                if (!String.IsNullOrEmpty(term))
                    query += "AND Title LIKE '%@term%' OR Job_Desc LIKE '%@term%' ";
                if (!String.IsNullOrEmpty(category))
                    query += "AND Category = '@category' ";
            }
            cmd.CommandText = query;
            cmd.Parameters.AddWithValue("@term", term.Trim());
            cmd.Parameters.AddWithValue("@category", category.Trim());
            cmd.Parameters.AddWithValue("@employer", employer.Trim());
        }

        MySqlDataAdapter dataAdapter = new MySqlDataAdapter(cmd);
        DataSet searchResult = new DataSet();
        dataAdapter.Fill(searchResult);
        conn.Close();
        return searchResult;
    } 
```

问题在于以下。当我只搜索一个术语或雇主时，我得到 0 行作为回报，但我得到了从下拉列表中选择的类别的结果，并且不是用 LIKE 条件而是用 = 查询的。起初我的猜测是我对 LIKE 运算符以及 OR 和 AND 有问题，但是当我使用内置代码的相同查询手动查询数据库时，我得到了结果。我的下一个猜测是我的参数有问题，因为如果我用实际的用户查询替换参数占位符，我会得到结果。

这行得通。query += "Title LIKE '%C 程序员%' OR Job_Desc LIKE '%C 程序员%' ";

感谢您的帮助，抱歉英语不好。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:44:07.943

使用 % 而不是在查询中设置 LIKE 运算符中使用的参数值

```
cmd.Parameters.AddWithValue("@term", "%" + term.Trim() + "%");
cmd.Parameters.AddWithValue("@category", category.Trim());             
cmd.Parameters.AddWithValue("@employer",  "%" + employer.Trim() + "%"); 
```

当然删除查询文本中的 % 。也不需要像 @category 参数那样在每个字符串参数前面加上单引号

但是，此代码需要进一步改进。如果您没有术语值或雇主值，则形成的 sql 字符串不包含相应参数的占位符。但是，最后，所有参数都添加了。因此，该命令将因意外参数异常而失败。

# .net - 在没有 .net 框架的 VB.NET 中创建应用程序

> ID：10029667
> 
> 赞同：0
> 
> 时间：2012-04-05T13:37:39.313
> 
> 标签：.net, vb.net

我已经学会了使用 Visual Studio 在 VB.NET 中创建程序，但缺点是我需要 .NET 框架，它不是在每台计算机上。我可以在不需要 .NET 框架的情况下在 VB.NET 中创建程序吗？如果是，我需要什么工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T13:41:00.073

> 但它的缺点是我需要.NET 框架，它不是在每台计算机上。

为您的程序包括一个安装程序，如果需要，它将安装 .NET Framework。MSDN 有一篇关于如何做到这一点的好文章：http: [//msdn.microsoft.com/en-us/library/7eh4aaa5.aspx](http://msdn.microsoft.com/en-us/library/7eh4aaa5.aspx)

> 我可以在不需要 .NET 框架的情况下在 VB 中创建程序吗？

假设您的意思是 VB.NET，那么不，不是真的。Microsoft VB.NET 编译器编译为中间语言，您的代码可能对 .NET Framework 本身有数百个依赖项。您可以使用*其他*框架，例如 Mono，但它们也必须安装，并且已经安装的可能性要小得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-02T20:33:52.903

VB6 不需要 .NET 框架，可以在任何 Windows 和 MSSQL 版本（甚至是 64 位）上运行。

您可以使用安装在其上的最新 ador 和 adodb 驱动程序 (MS Office)，但 VB.NET 是可行的方法，并且您无法在没有 .NET 框架的情况下创建应用程序。

.NET 框架是免费的，您只需将其包含在您的设置中（如前所述）。

# properties - C++ Builder XE - 发布数组属性

> ID：10029672
> 
> 赞同：0
> 
> 时间：2012-04-05T13:37:59.123
> 
> 标签：properties, c++builder, custom-component, c++builder-xe

我正在编写我的自定义可视化组件，发现将它的一些属性发布为数组很方便：

```
class PACKAGE TVctDiag2 : public TCustomControl
{
__published:
    __property int ArrowStyle[int index] = {read=GetArrowStyle,write=SetArrowStyle};
protected:
    void __fastcall SetArrowStyle(int index, int value);
    int __fastcall GetArrowStyle(int index);
...
}; 
```

组件的构建和安装没有问题。但是在我尝试在表单上插入组件后，会显示访问冲突消息框。在调试我发现的错误源时，该方法*GetArrowStyle*被调用，*索引*值为 -1，这会导致读取数组边界。我知道*TVctDiag2*类（=集成开发环境）的用户不知道数组大小是多少。数组的大小是恒定的，并且是一个很小的数字（6），因此替代解决方案是：

```
class PACKAGE TVctDiag2 : public TCustomControl
{
__published:
    __property int ArrowStyle1 = {read=GetArrowStyle1,write=SetArrowStyle1};
    __property int ArrowStyle2 = {read=GetArrowStyle2,write=SetArrowStyle2};
    __property int ArrowStyle3 = {read=GetArrowStyle3,write=SetArrowStyle3};
    __property int ArrowStyle4 = {read=GetArrowStyle4,write=SetArrowStyle4};
    __property int ArrowStyle5 = {read=GetArrowStyle5,write=SetArrowStyle5};
    __property int ArrowStyle6 = {read=GetArrowStyle6,write=SetArrowStyle6};
protected:
    void __fastcall SetArrowStyle1(int index, int value);
    int __fastcall GetArrowStyle1(int index);
    void __fastcall SetArrowStyle2(int index, int value);
    int __fastcall GetArrowStyle2(int index);
    void __fastcall SetArrowStyle3(int index, int value);
    int __fastcall GetArrowStyle3(int index);
    void __fastcall SetArrowStyle4(int index, int value);
    int __fastcall GetArrowStyle4(int index);
    void __fastcall SetArrowStyle5(int index, int value);
    int __fastcall GetArrowStyle5(int index);
    void __fastcall SetArrowStyle6(int index, int value);
    int __fastcall GetArrowStyle6(int index);
...
}; 
```

但我更喜欢更通用的解决方案。如果可能的话，如何通过对象检查器更改属性值来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:26:30.440

将数组属性声明为`public`。 `__published`用于设计时编辑和 RTTI 生成，不支持数组属性：

```
class PACKAGE TVctDiag2 : public TCustomControl
{
public:
    __property int ArrowStyle[int index] = {read=GetArrowStyle,write=SetArrowStyle};
protected:
    void __fastcall SetArrowStyle(int index, int value);
    int __fastcall GetArrowStyle(int index);
...
}; 
```

你的第二个例子是错误的。您需要`index`从 getter/setter 方法中删除参数，因为属性不使用索引（通过使用非数组属性，您可以将它们声明为`__published`）：

```
class PACKAGE TVctDiag2 : public TCustomControl
{
__published:
    __property int ArrowStyle1 = {read=GetArrowStyle1,write=SetArrowStyle1};
    __property int ArrowStyle2 = {read=GetArrowStyle2,write=SetArrowStyle2};
    __property int ArrowStyle3 = {read=GetArrowStyle3,write=SetArrowStyle3};
    __property int ArrowStyle4 = {read=GetArrowStyle4,write=SetArrowStyle4};
    __property int ArrowStyle5 = {read=GetArrowStyle5,write=SetArrowStyle5};
    __property int ArrowStyle6 = {read=GetArrowStyle6,write=SetArrowStyle6};
protected:
    void __fastcall SetArrowStyle1(int value);
    int __fastcall GetArrowStyle1();
    void __fastcall SetArrowStyle2(int value);
    int __fastcall GetArrowStyle2();
    void __fastcall SetArrowStyle3(int value);
    int __fastcall GetArrowStyle3();
    void __fastcall SetArrowStyle4(int value);
    int __fastcall GetArrowStyle4();
    void __fastcall SetArrowStyle5(int value);
    int __fastcall GetArrowStyle5();
    void __fastcall SetArrowStyle6(int value);
    int __fastcall GetArrowStyle6();
...
}; 
```

如果您想为单个数组值使用单独的属性，我建议通过`index`在属性声明上使用说明符，回到使用带有一组 getter/setter 方法的索引（我什至会声明一个`public`数组属性再次为好的衡量标准，以防您需要遍历代码中的值）：

```
class PACKAGE TVctDiag2 : public TCustomControl
{
__published:
    __property int ArrowStyle1 = {read=GetArrowStyle,write=SetArrowStyle,index=0};
    __property int ArrowStyle2 = {read=GetArrowStyle,write=SetArrowStyle,index=1};
    __property int ArrowStyle3 = {read=GetArrowStyle,write=SetArrowStyle,index=2};
    __property int ArrowStyle4 = {read=GetArrowStyle,write=SetArrowStyle,index=3};
    __property int ArrowStyle5 = {read=GetArrowStyle,write=SetArrowStyle,index=4};
    __property int ArrowStyle6 = {read=GetArrowStyle,write=SetArrowStyle,index=5};
public:
    __property int ArrowStyle[int index] = {read=GetArrowStyle,write=SetArrowStyle};
protected:
    void __fastcall SetArrowStyle(int index, int value);
    int __fastcall GetArrowStyle(int index);
...
}; 
```

如果要对数组进行设计时编辑，则需要编写自定义组件编辑器并将其注册到 IDE，或者将数组属性重新写入 a `TCollection`（RTTI 和设计时编辑完全支持此功能）。

# android - 如何知道是否定义了 XML 属性？

> ID：10029673
> 
> 赞同：0
> 
> 时间：2012-04-05T13:38:02.240
> 
> 标签：android, android-layout

我有一个自定义的 TextView，我想在构造函数中找出相应的 xml 布局中是否声明了某个 XML 属性。

```
<com.stuff.CustomTextView
  android:id="@+id/tv01"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:textSize="8sp" />

public CustomTextView(Context context, AttributeSet attrs) {
   super(context, attrs);
   // find out if textSize was defined
   if (!wasAttributeDefined(attrs,"textSize")) // EDIT
     setTextSize(10); // EDIT
} 
```

我不知道这是否有效，但我尝试了以下方法（没有运气）：

```
attrs.getAttributeFloatValue("android","textSize",(float)-1.0); 
```

谢谢。

编辑：

好吧，如果有人感兴趣，有一种（可能不是很好）解决这个问题的方法。有点像：

```
private boolean wasAttributeDefined(AttributeSet attrs, String name) {
    for (int i=0; i<attrs.getAttributeCount(); i++)
        if (attrs.getAttributeName(i).equals(name))
            return true;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:45:17.020

您应该使用以下方法测试您的属性：

`R.id.tv01.attr.textSize`

# java - 插入 MBean 拦截器

> ID：10029678
> 
> 赞同：1
> 
> 时间：2012-04-05T13:38:09.223
> 
> 标签：java, jmx, mbeans

我正在一个实现 MBean 的 java 项目中工作，我需要在注册之前拦截 MBean 并更改/添加它们的属性。例子 ：

domainName:name=myMBean --> domainName:name=myMBean1,type=myType

我发现[这个链接](http://docs.oracle.com/cd/E19698-01/816-7609/6mdjrf85d/index.html)介绍了如何应用默认拦截器以外的拦截器，但我不知道如何在代码中执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:00:52.437

一旦你注册了 bean，显然为时已晚。最简单的方法是更改​​注册的完成方式。如果您向我们展示您用于注册 bean 的框架，那么我将能够提供更多帮助。

通常，实际注册的任何操作都在执行以下操作：

```
private MBeanServer mbeanServer;
...
mbeanServer.registerMBean(mbean, objectName); 
```

因此，您可以提供不同的`ObjectName`：

```
ObjectName objectName = new ObjectName("domainName:name=myMBean1,type=myType"); 
```

但我假设您不是自己进行注册。

* * *

顺便说一句，我不确定您是否可以切换到使用不同的 JMX 框架，但我最近对我的[Simple JMX 系统](http://256.com/sources/simplejmx/)进行了最后的润色。它允许对象在发布时以[编程方式命名](http://256.com/sources/simplejmx/javadoc/simplejmx/com/j256/simplejmx/common/JmxSelfNaming.html)。

# sql - Apache Sling sql uery 通过 json 进行 lastModified

> ID：10029679
> 
> 赞同：0
> 
> 时间：2012-04-05T13:38:17.273
> 
> 标签：sql, json, apache, sling

我已成功按 jcr:lastModified 字段排序结果。我似乎无法按 lastModified 日期字段过滤结果。查询如下所示。

//在[http://docs.jboss.org/exojcr/1.12.11-GA/developer/en-US/html/ch-jcr-query-usecases.html#JCR.DatePropertyComparison找到](http://docs.jboss.org/exojcr/1.12.11-GA/developer/en-US/html/ch-jcr-query-usecases.html#JCR.DatePropertyComparison)

select * from nt:resource where ( jcr:lastModified >= TIMESTAMP '2006-06-04T15:34:15.917+02:00' )

它只返回 500 服务器错误。

有任何想法吗？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:55:57.563

好的，

所以这就是答案。花了很多时间才能让它工作，但这里是查询。

select * from nt:base where(jcr:lastModified>= TIMESTAMP '2010-02-01T00:00:00.000Z')

我希望这对其他人有所帮助，关于这些东西的文档很薄而且很粗略。

保罗

# sql - 如何在 postgres 数据库上切换两个 ID [PK]？

> ID：10029691
> 
> 赞同：2
> 
> 时间：2012-04-05T13:39:06.750
> 
> 标签：sql, postgresql

我想更改 Postgres 上两行的 ID，以切换它们。它们已经被定义为外键，所以我不能使用第三个数字来进行切换。

如何在一个 SQL 查询或事务中执行此操作？

例子：

```
UPDATE mytable SET id=2 WHERE ID=1;
UPDATE mytable SET id=1 WHERE ID=2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:04:26.357

您提到外键，但仍不清楚`id`是外键约束的引用列还是引用列。

如果**`id`是引用的列**，您只需定义 fk 约束[**`ON UPDATE CASCADE`**](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)。然后你可以`id`随心所欲地改变你的。更改级联到依赖列。

* * *

如果**`id`是引用列**（并且没有其他外键约束指向它），那么自**PostgreSQL 9.0**以来还有另一种更快的方法。您可以使用可延迟的主键或唯一键。考虑以下演示：

**请注意**`id`，如果您想使用来自另一个表的**外键**约束进行引用，则不能使用它。[我在这里](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)引用手册：

> 被引用的列必须是被引用表中不可延迟的唯一或主键约束的列。

试验台：

```
CREATE TEMP TABLE t
( id integer
 ,txt text
 ,CONSTRAINT t_pkey PRIMARY KEY (id) DEFERRABLE INITIALLY DEFERRED
);
INSERT INTO t VALUES
 (1, 'one')
,(2, 'two'); 
```

更新：

```
UPDATE t
SET    id = t_old.id
FROM   t t_old
WHERE (t.id, t_old.id) IN ((1,2), (2,1)); 
```

结果：

```
SELECT * FROM t; 

id | txt
---+-----
2  | one
1  | two 
```

您还可以在同一事务中声明`DEFERRABLE INITIALLY IMMEDIATE`和使用约束。`SET CONSTRAINTS ... DEFERRED`

请务必阅读手册中的详细信息：

*   [`CREATE TABLE`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)
*   [`SET CONSTRAINTS`](http://www.postgresql.org/docs/current/interactive/sql-set-constraints.html)

* * *

Even 似乎可以使用`DEFERRABLE INITIALLY IMMEDIATE`并且没有`SET CONSTRAINTS`. 我发布了一个[关于那个](https://stackoverflow.com/q/10032272/939860)的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:19:16.843

您是否尝试过类似的方法：

```
BEGIN;

CREATE TEMP TABLE updates ON COMMIT DROP AS
SELECT column1::int oldid, column2::int newid
FROM ( VALUES (1, 2), (2, 1) ) foo;

UPDATE mytable
FROM updates
SET id = newid
WHERE id = oldid;

--COMMIT;
ROLLBACK; 
```

当然，当您准备好时，回滚会被注释掉并提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:54:40.120

```
begin;
alter table mytable drop constraint_name;
UPDATE mytable SET id=-1 WHERE ID=1;
UPDATE mytable SET id=1 WHERE ID=2;
UPDATE mytable SET id=2 WHERE ID=-1;
alter table mytable add table_constraint;
commit; 
```

# php - Union Activerecord codeigniter 框架

> ID：10029695
> 
> 赞同：0
> 
> 时间：2012-04-05T13:39:20.793
> 
> 标签：php, sql, codeigniter

我正在尝试在 codeigniter 中执行联合。我在其他地方找到了这个代码骨架：

```
 $this->db->select('title, content, date');
 $this->db->from('mytable');
 $query = $this->db->get();
 $subQuery1 = $this->db->_compile_select();

 $this->db->_reset_select();

 // #2 SubQueries no.2 -------------------------------------------

 $this->db->select('title, content, date');
 $this->db->from('mytable2');
 $query = $this->db->get();
 $subQuery2 = $this->db->_compile_select();

 $this->db->_reset_select();

 // #3 Union with Simple Manual Queries --------------------------

 $this->db->query("select * from ($subQuery1 UNION $subQuery2) as unionTable");

 // #3 (alternative) Union with another Active Record ------------

 $this->db->from("($subQuery1 UNION $subQuery2)");
 $this->db->get(); 
```

让我感到困惑的是，您在原始子查询中有一个 get_where 子句，您如何包含它？像这样的东西：

查询 1

```
 $this->db->select('Id,title, content, date');
 $this->db->from('mytable');
 $query = $this->db->get_where('Boo', array('Id' => $foo['foo_Id']);
 $subQuery1 = $this->db->_compile_select(); 
```

查询 2

```
 $this->db->select('title, content, date');
  $this->db->from('mytable2');
  $query = $this->db->get_where('Boo', array('Title' => $foo['foo_Title'])
  $subQuery2 = $this->db->_compile_select(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:54:17.703

您可以将它们全部写成一个。您不必遵循这种方式。这里我写一个例子：

```
$q = '
 SELECT userid 
 FROM users
 WHERE userid=10
 UNION
 SELECT userid
 FROM users
 WHERE userid=5
';
$result = $this->db->query($q);
return $result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T02:38:09.157

如果没有很好的文档记录，您找到的示例将很难遵循；我会警告你不要这样做。

您的其他选择包括：

*   意见
*   存储过程
*   硬编码查询

我建议对其进行硬编码，除非您要节省切换数据库引擎的可能性，正如评论者所提到的那样。

请记住，[始终使用手套](http://thedailywtf.com/Articles/The_Complicator_0x27_s_Gloves.aspx)

# python - 文件描述符重定向卡住

> ID：10029697
> 
> 赞同：3
> 
> 时间：2012-04-05T13:39:21.737
> 
> 标签：python, sys

在我实现的守护程序类示例中，使用了描述符重定向。

```
sys.stdout.flush()                       
sys.stderr.flush()                       
si = file(self.stdin, 'r')               
so = file(self.stdout, 'a+')             
se = file(self.stderr, 'a+', 0)          
os.dup2(si.fileno(), sys.stdin.fileno()) 
os.dup2(so.fileno(), sys.stdout.fileno()) # This line doesn't work
os.dup2(se.fileno(), sys.stderr.fileno()) 
```

`os.dup2(so.fileno(), sys.stdout.fileno())`不管用。它不会引发错误。此行之后的代码不会被执行。

我将此示例简化为仅包含问题区域的类：

```
class Deamon(object):
    def __init__(self, pidfile, stdout='/dev/null'):
        self.pidfile = pidfile
        self.stdout = stdout
    def get_stdout(self):
        so = file(self.stdout, 'a+')
        os.dup2(so.fileno(), sys.stdout.fileno())
        print 'executed' 
```

在`os.dup2(so.fileno(), sys.stdout.fileno())`代码卡住之后。为什么会这样？

**编辑**（使用@C2H5OH 代码实现）：

```
 try:                                                           
        pid = os.fork()                                            
        if pid > 0:                                                
            # exit first parent                                    
            sys.exit(0)                                            
    except OSError, e:                                             
        sys.stderr.write(                                          
                'fork #1 failed: %d (%s)\n' % (e.errno, e.stderror)
                )                                                  
        sys.exit(1)                                                

    os.chdir("/")                                                  
    os.setsid()                                                    
    os.umask(0)                                                    

    try:                                                           
        pid = os.fork()                                            
        if pid > 0:                                                
            # exit from second parent                              
            sys.exit(0)                                            
    except OSError, e:                                             
        sys.stderr.write(                                          
                "fork #2 failled: %d (%s)" % (e.errno, e.strrerror)
                )                                                  
        sys.exit(1)                                                

    # redirect standart file descriptors                           
    os.setsid()                                                    
    sys.stdin.flush()                                              
    sys.stdout.flush()                                             
    sys.stderr.flush()                                             

    dev_null = os.open(os.devnull, os.O_RDWR)                      
    os.dup2(dev_null, sys.stdin.fileno())                          
    print 'executed 1'                                             
    os.dup2(dev_null, sys.stdout.fileno())                         
    print 'executed 2'                                             
    os.dup2(dev_null, sys.stderr.fileno())                         
    os.close(dev_null)    

    # write pidfile
    # FIXME: file is not writes!                     
    atexit.register(self.delpid)                
    pid = str(os.getpid())                      
    file(self.pidfile, 'w+').write("%s\n" % pid) 
```

在`stop`我尝试`self.pidfile`现有的方法中：

```
def stop(self):                  
    print file(self.pidfile, 'r') 
```

这是引发错误：

> IOError：[Errno 2] 没有这样的文件或目录：'/tmp/deamon-example.pid'

问题仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:23:28.833

您将 Python 文件句柄与操作系统文件描述符混合在一起，这是自找麻烦。

虽然您使用`os.dup2()`重定向是正确的`sys.stdout`（因为直接分配可能无法完全工作，如果其他模块获得了对它的引用），您应该在操作系统级别使用`os.open()`.

这是我们在工作场所使用的守护程序代码：

```
if os.fork() > 0:
    os._exit(0)
os.setsid()
sys.stdin.flush()
sys.stdout.flush()
sys.stderr.flush()
null = os.open(os.devnull, os.O_RDWR)
os.dup2(null, sys.stdin.fileno())
os.dup2(null, sys.stdout.fileno())
os.dup2(null, sys.stderr.fileno())
os.close(null) 
```

如果您想将标准输出重定向到某个文件，只需使用不同的文件名而不是预定义的常量`os.devnull`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:52:25.007

[http://docs.python.org/library/os.html#os.dup2](http://docs.python.org/library/os.html#os.dup2)

上面的文档说：`os.dup2(fd, fd2) Duplicate file descriptor fd to fd2, closing the latter first if necessary.`

所以这条线： `os.dup2(so.fileno(), sys.stdout.fileno())` 显然正在关闭`sys.stdout`，它有效地关闭了所有输出。代码出现“卡住”，但您只是没有看到任何输出。即，没有错误。

最重要的是，您将 stdout 重定向到`/dev/null`：

```
def __init__(self, pidfile, stdout='/dev/null'):
    #...
    self.stdout = stdout         # <--self.stdout points to /dev/null
def get_stdout(self):
    so = file(self.stdout, 'a+') # <-- opening /dev/null for append?
    # even if the next line worked, you're appending to /dev/null and you wouldn't see any output
    os.dup2(so.fileno(), sys.stdout.fileno()) 
```

# php - 将字符串分解为变量

> ID：10029699
> 
> 赞同：17
> 
> 时间：2012-04-05T13:39:31.197
> 
> 标签：php

有没有办法将字符串分解为变量，例如

```
some_function($min, $max, "3, 20"); 
```

这样 $min 被赋值为 3，$max 被赋值为 20。

我知道我可以简单地使用

```
$data = explode("3, 20"); 
```

只是想知道是否有另一种方法。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-05T13:40:32.687

PHP 的语言构造[`list()`](http://us3.php.net/manual/en/function.list.php)可以通过分配一个数组来对变量（甚至是其他数组键）执行多个赋值。

```
list($min, $max) = explode(",", "3,20"); 
```

但是，您仍然需要将 a`trim()`应用于您的变量，因为该`$max`值将具有前导空格，或者替换`explode()`为`preg_split('/\s*,\s*/', $string)`以将其拆分为逗号和周围的空格。

**注意：**请谨慎使用`list()`以确保您分配的数组包含与`list()`变量相同数量的元素。

在**PHP 5.x**中，当直接将值分配给另一个数组时，作为该数组的一个元素，`list()`值在 PHP 5.x 中从右到左分配，而不是从左到右。换句话说，您最终会得到向后填充的数组（最后一个值，第一个）。

[https://www.php.net/manual/en/migration70.incompatible.php](https://www.php.net/manual/en/migration70.incompatible.php)

在**PHP 7.x** `list()`中，当将元素直接分配给数组时，参数是从左到右分配的。换句话说，您最终将第一个值作为接收者数组中的第一个元素。

> ```
> <?php
>     list($a[], $a[], $a[]) = [1, 2, 3];
>     var_dump($a);
> ?> 
> ```

[PHP 手册](https://www.php.net/manual/en/migration70.incompatible.php)

**PHP 5.X** Last value 获取第一个元素的位置，但接收者必须是一个数组（在本例中 $a，是数组）！

```
array(3) {
  [0]=>
  int(3)
  [1]=>
  int(2)
  [2]=>
  int(1)
} 
```

**PHP 7.x**第一个值成为第一个数组元素。

```
array(3) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  int(3)
} 
```

[PHP 手册](https://www.php.net/manual/en/migration70.incompatible.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-04-01T06:53:05.017

从**PHP 7.1 开始**有一个新特性叫做

> **对称数组解构**：速记数组语法 ([]) 现在可用于解构数组以进行赋值（包括在 foreach 中），作为现有 list() 语法的替代方案，该语法仍受支持。

这意味着您现在可以执行以下操作：

```
[$one, $two] = explode(";", "one;two");
echo $one; // one
echo $two; // two 
```

作为 list() 的替代方案，我发现它自己是一个非常优雅且易读的解决方案，随 7.1+ 一起出现......它是相同的，但更好。

注意：正如引号所示，您可以使用简写数组语法（*[]*）在 foreach 声明中分配变量，但这与问题无关，所以请检查一下！

文档：[https ://www.php.net/manual/en/migration71.new-features.php](https://www.php.net/manual/en/migration71.new-features.php)

# asp.net-mvc - 在修改现有子实体框架的同时添加新子对象

> ID：10029703
> 
> 赞同：5
> 
> 时间：2012-04-05T13:39:52.417
> 
> 标签：asp.net-mvc, entity-framework, disconnected

我看过一些类似问题的答案，但它们似乎并不适合我。

我正在尝试从 Entity Framework: DbContext(page 90) 中合并一个模式，但它似乎不起作用。我正在使用的代码如下：

```
[HttpPost]
public ActionResult Edit(Order order)
{
     if (ModelState.IsValid)
     {
         db.Orders.Add(order);
         db.Entry(order).State = EntityState.Modified;

         foreach (var orderDetail in order.OrderDetails)
         {
              if (orderDetail.OrderId == 0)
              {
                  db.Entry(orderDetail).State = EntityState.Added;
              }
              else
              {
                  db.Entry(orderDetail).State = EntityState.Modified;
              }
              // The example order that I'm updating has two child entities
              // so this orderId will be for the third, added one.
              int addedOrderDetailId = order.OrderDetails[2].OrderId;
          }
          db.SaveChanges();
          return RedirectToAction("Index");
     }

     ViewBag.CustomerId = new SelectList(db.Customers, "CustomerId", "CompanyName", order.CustomerId);

     return View(order);

} 
```

我一直在运行一个示例，其中 Order 对象有两个现有的 OrderDetail 对象，我正在尝试添加第三个。我包含了 addedOrderDetailId 变量，以便我可以将其添加到“Watch”并查看它何时更改

我发现正在发生的是，实体框架正在将添加的 OrderDetail 对象的 OrderId （进入 foreach 循环时为 0）更新为 Order 对象的 OrderId。这发生在通过 foreach 循环的第一次迭代之后（当第一个子实体的状态更改为已修改时。这意味着所有三个子实体都被标记为已修改。这导致 SaveChanges() 尝试更新条目进入不存在的数据库。

如果其他人遇到过这个问题，那么我将非常感谢任何解决此问题的建议。我还必须处理被删除的现有子对象，但我还没有解决这个问题，所以如果有人知道这种模式，那也将不胜感激。

编辑：

在听取了 Slauma 的建议并删除了 db.Orders.Add(order)。我能够将调用移动到 foreach 循环下的 db.Entry(order).State 。这使我可以循环遍历循环并将每个 OrderDetail 对象的状态设置为针对现有对象进行修改并为添加的对象添加状态。然后，我只需将父项的 OrderId 分配给子项的 OrderId 即可，更新成功。我还包含了在编辑过程中用于删除子对象的代码。我不确定这有多有效，但它确实有效。这是修改后的代码：

```
 [HttpPost]
    public ActionResult Edit(Order order)
    {
        if (ModelState.IsValid)
        {
            List<int> previousProductIds = db.OrderDetails
                .Where(ep => ep.OrderId == order.OrderId)
                .Select(ep => ep.ProductId)
                .ToList();

            List<int> currentProductIds = order.OrderDetails
                .Select(o => o.ProductId)
                .ToList();

            List<int> deletedProductIds = previousProductIds
                .Except(currentProductIds).ToList();

            foreach (var deletedProductId in deletedProductIds)
            {
                OrderDetail deletedOrderDetail = db.OrderDetails
                    .Where(od => od.OrderId == order.OrderId && od.ProductId == deletedProductId)
                    .Single();

                db.Entry(deletedOrderDetail).State = EntityState.Deleted;
            }

            foreach (var orderDetail in order.OrderDetails)
            {
                if (orderDetail.OrderId == 0)
                {
                    db.Entry(orderDetail).State = EntityState.Added;
                    orderDetail.OrderId = order.OrderId;
                }
                else
                {
                    db.Entry(orderDetail).State = EntityState.Modified;
                }
            }
            db.Entry(order).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.CustomerId = new SelectList(db.Customers, "CustomerId", "CompanyName", order.CustomerId);
        return View(order);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:23:19.023

从您的代码中删除这一行：

```
db.Orders.Add(order); 
```

这实际上会将*包含所有 orderDetails*的订单置于`Added`状态。关系修正（在 中自动发生`Add`）将把`OrderId`of *all* `OrderDetails`设置为 order 的 key。当您进入循环时`orderDetail.OrderId`，`!= 0`所有详细项目都将进入循环，并且您始终会进入将状态设置为 的分支`Modified`。循环完成后，没有 orderDetail 项目处于`Added`状态。

# c# - 并非所有测试都在包含数组的参数化 NUnit TestFixture 中运行

> ID：10029706
> 
> 赞同：7
> 
> 时间：2012-04-05T13:39:56.867
> 
> 标签：c#, testing, nunit, resharper, parameterized

我有一个测试类如下：

```
[TestFixture("someurl1", new[] { "param1", "param2" }, 15)]
[TestFixture("someurl2", new[] { "param3" }, 15)]
public class my_test
{
    public my_test(string url, string[] fields, int someVal)
    {
        // test setup
    }
} 
```

在 ReSharper 6.1 和 NUnit 2.5.10 中运行此测试时，测试没有运行两次，正如预期的那样，它只运行一次。在我看到的测试结果中列出

```
my_test("someurl1", System.String[], 15) 
```

这让我认为这两个夹具被视为相同，并且 NUnit 没有区分两个测试中的字符串数组。

作为一种解决方法，我在构造函数中添加了一个虚拟参数。如果我为每个夹具设置不同的值，那么所有测试都会运行。

是否不可能有包含不同值的数组的 TestFixtures？我刚刚从 ReSharper 5 升级，所以我想知道这是否相关。我已经阅读了 6.x 中参数化测试的一些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:46:16.680

```
[TestFixture("someurl1", "param1|param2", 15)]
[TestFixture("someurl2", "param3", 15)]
public class my_test
{
    private string[] _fields;

    public my_test(string url, string fieldList, int someVal)
    {
        _fields = fieldList.Split('|');
        // test setup
    }

    [Test]
    public void listFields()
    {
        foreach (var field in _fields)
        {
            Console.WriteLine(field);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:16:31.223

我认为这与在 TestFixture 构造函数中更新一个数组有关，我在某处读到你不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T08:42:26.677

事实证明，如果参数化测试夹具的构造函数中出现任何问题，这就是绝对错误消息。当其他代码中的东西失败时，您不会得到返回的实际异常信息。

因此，您可能应该将您的设置代码移动到`[SetUp]`或`[TestFixtureSetUp]`或确实确保您的构造函数正在执行而没有错误。但实际上你应该做第一个建议，只将测试夹具参数保存在构造函数中，并在另一种方法中对它们进行处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:35:23.757

您是否尝试过在其下创建单个测试作为通用 TestFixture ？？？就像是

```
[TestFixture]
public class my_test
{
    private bool my_test(string url, string[] fields, int someVal)
    {
        // test setup
        return DidTestCompleteOk;
    }

    [Test]
    public void TestURL1()
    {
        Assert.IsTrue( my_test("someurl1", new[] { "param1", "param2" }, 15));
    }

    [Test]
    public void TestURL2()
    {
        Assert.IsTrue( my_test("someurl2", new[] { "param3" }, 15) );
    }
} 
```

# ruby-on-rails - Model.where(field: nil) 的相反查询是什么

> ID：10029711
> 
> 赞同：2
> 
> 时间：2012-04-05T13:40:08.063
> 
> 标签：ruby-on-rails

我有一个名为 GuestOrder 的模型：

```
class GuestOrder < ActiveRecord::Base
end

# == Schema Information
#
# Table name: guest_orders
#
#  id             :integer         not null, primary key
#  notes          :string(255)
#  adults         :integer
#  children       :integer
#  created        :datetime
#  placed         :datetime
#  billed         :datetime
#  user_id        :integer
#  guest_table_id :integer
#  take_away_id   :integer
#  created_at     :datetime
#  updated_at     :datetime 
```

检索`GuestOrders`where `billed`is`nil`效果很好：

```
GuestOrder.where(billed: nil) 
```

但是我怎样才能检索`GuestOrders`where `billed`is `not nil`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:44:13.637

来，试试这个！

```
GuestOrder.where("billed is not null") 
```

那可行！这使用常规 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:51:17.450

你可以试试这个

```
 GuestOrder.where("billed IS NOT NULL") 
```

使用大写字母 IS NOT NULL........

# jenkins - 詹金斯启用安全不起作用

> ID：10029716
> 
> 赞同：1
> 
> 时间：2012-04-05T13:40:27.073
> 
> 标签：jenkins

我尝试根据[wiki 中的说明](https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup)启用 Jenkins CI 安全性（“初始步骤”部分）。当我保存配置时，浏览器会要求我提供一些凭据，但是由于我还没有设置任何凭据，因此无法创建新的用户帐户（根据上面的页面），因此我得到了

```
Status Code: 401, Exception: Bad credentials 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:44:29.110

要返回 Jenkins，请查看此页面：[帮助！我把自己锁在外面了](https://wiki.jenkins-ci.org/display/JENKINS/Disable+security)。

为了防止再次发生这种情况，我一直发现最简单的方法是启用安全性（我不确定您设置了哪种方法），然后使用“添加”按钮添加我自己的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T05:51:10.390

我在 Linux 上使用 Chrome 时遇到了同样的问题，并且每次保存安全设置后都会被身份验证弹出窗口锁定。我发现使用 Chrome 的“隐身窗口”或 Firefox 都可以。

# mercurial - 推送秘密变更集

> ID：10029718
> 
> 赞同：12
> 
> 时间：2012-04-05T13:40:34.907
> 
> 标签：mercurial, mercurial-phases

这可能看起来很矛盾，我知道秘密变更集是私有的，但是如果我想备份这些秘密变更集怎么办？

我与一些分支并行工作，有时我想推动一个，而不是其他的。为了实现这一点，我在不同的克隆中工作，但我讨厌这样。

所以现在 mercurial 有了阶段，我可以创建秘密分支并将所有内容都放在同一个存储库中。问题是在秘密分支的开始和它的发布之间，我想备份那些秘密变更集（我在另一台机器上有一个克隆只是为了保存我的备份，以防我的本地仓库或我的机器发生问题）。

有没有办法做到这一点，或者我的工作流程完全错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T05:31:46.253

无需标记任何秘密。如果您只想推送一个分支，请使用：

```
hg push -r REV 
```

这只会推动 REV 及其祖先。

Secret 对 Mercurial 补丁队列修订很有用，因为它们无论如何都不能被推送，并且它可以防止本地克隆复制它们。

Draft 非常适合跟踪未推送的更改。如果您仍想备份它们，推送它们会将它们翻转为公开，但您可以将它们重置为草稿（与另一个存储库相比）：

```
hg phase -fd 'outgoing(URL)' 
```

（默认推送存储库的 URL 可以为空）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T20:38:16.187

似乎阶段仍然相对较新，并且一些工作流程，例如这个，似乎还没有被包括在内。截至 2013 年 3 月 19 日，我相信您可以做到这一点的唯一方法是手动将阶段从秘密更改为公开。

您可以从命令行使用这些命令：

```
for /f "delims=" %a in ('hg log --template "{rev} " -r "secret()"') do @set secret=%a
hg phase -d %secret%
hg push -f
hg phase -sf %secret% 
```

这不会更改您要推送到的存储库上对秘密的提交，我尝试更改推送以执行此操作（但不成功）：

```
hg push -f --remotecmd hg phase -sf %secret% 
```

提交必须完全匹配`remote hg command`才能工作，但无论如何我无法让它在远程存储库上进行更改。

==================================================== ==========

如果您想使用像 TortoiseHG Workbench 这样的 GUI，您现在必须手动完成所有操作（在您想要的任何存储库上更改 GUI 中的阶段）。抱歉，希望我们能尽快找到更好的解决方案！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T14:44:28.887

The best approach is a combination of @mischab1's [answer](https://stackoverflow.com/a/15582126/851737), @mark-tolonen's [answer](https://stackoverflow.com/a/10039530/851737) and aliases.

By following mischab1's answer, you make sure that pushing to your backup location will not change the phase to "public".

Second step would be to add the backup location to your repository's hgrc/paths:

```
[paths]
default = ...
backup = backup_location 
```

The next step is to define a backup command via alias in the global hgrc, e.g. "bubr" (for backup current branch) or "burev" (backup current rev).

```
[alias]
bubr = push -b . backup
burev = push -r . backup 
```

`hg bubr` or `hg burev` will then push the current branch/revision to the location defined as "backup" path.

**Edit** This still has the drawback that you could accidentally push all changes with "hg push" so defining also an `hg pubr` command to push the current branch and not using "hg push" per default might be helpful.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-27T18:07:24.087

```
@echo off
rem hgfullpull_naive.cmd
setlocal
set SRC_REPO=%~f1
set DST_REPO=%~f2
set TMP_DIR=%TEMP%\%~n0.tmp
set NODES_LIST=%TMP_DIR%\%~n0.%RANDOM%.tmp

if "%SRC_REPO%"=="" exit /b 1
if "%DST_REPO%"=="" exit /b 1
if "%SRC_REPO%"=="%DST_REPO%" exit /b 1

call :ALL
del /Q "%NODES_LIST%"
endlocal
goto :eof

:ALL
    md "%TMP_DIR%"
    hg log --rev "secret()" --template "{node}\n" --repository "%SRC_REPO%" >"%NODES_LIST%" || exit /b 1
    call :CHANGE_PHASE "%SRC_REPO%" --draft
    hg pull --repository "%DST_REPO%" "%SRC_REPO%"
    call :CHANGE_PHASE "%SRC_REPO%" --secret
    call :CHANGE_PHASE "%DST_REPO%" --secret
    goto :eof

:CHANGE_PHASE 
    setlocal
    set REPO=%~1
    set PHASE=%~2
    for /F "eol=; delims= usebackq" %%i IN ("%NODES_LIST%") DO (hg phase %PHASE% --force --rev %%i --repository "%REPO%")
    endlocal
    goto :eof 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-17T19:33:37.900

这是迄今为止我想出的最好的。我认为它基本上等同于您希望推/拉能够做的事情。

1.  将您要传输的所有秘密变更集标记为草稿
2.  在源代码库中运行`hg bundle -r last_draft_rev bundlefile.hg path\to\backup\repo`
3.  在目标仓库中运行`hg unbundle bundlefile.hg`
4.  变更集将作为草稿进入备份
5.  将第一个草稿变更集标记为秘密，它的所有后代都将被标记为秘密

如果变更集仍被标记为机密，我无法让#2 工作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-23T00:54:45.617

现在最简单的事情是通过将以下内容添加到其 hgrc 配置文件中来将备份存储库标记为非发布。

```
[phases]
publish = False 
```

有关更多信息，请参阅[Mercurial 的 Wiki](http://mercurial.selenic.com/wiki/Phases#Publishing_Repository)。

# jquery - 文本框更改事件 - jquery

> ID：10029723
> 
> 赞同：0
> 
> 时间：2012-04-05T13:40:39.930
> 
> 标签：jquery, textbox

我有一个文本框控件，脚本是

```
<asp:TextBox ID="txtDate" EnableTheming="false" CssClass="calender" 
                        runat="server" ClientIDMode="Static"></asp:TextBox> 
```

在日历控件中，如果我选择一个特定日期，我需要在该特定日期从数据库中获取记录，所以我尝试将文本框更改事件作​​为

```
$(function () {
    $('#txtDate').change(function () {
        $.ajax({
            type: "POST",
            url: "/DataService.asmx/fetchAbsentees",
            contentType: "application/json; charset=utf-8",
            data: "{'date' : '" + $("#txtDate").val() + "'}",
            dataType: "json",
            success: function (data) {
                alert("Successfully reached.");
            },
            error: function (req, status, error) {
                alert("ERROR:" + error.toString() + " " + status + " " + req.responseText);
            }
        });
    }).triggerHandler('change');
}); 
```

Web服务从这里很好地被触发，但是每当我运行应用程序时它就会被触发，我希望它只有在我更改文本框中的日期时才会被触发......任何人都可以在这里帮助我。

注意：我正在使用母版页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:45:32.880

您需要删除以下部分：

```
.triggerHandler('change'); 
```

这会导致事件立即触发。

您的最终代码应如下所示：

```
$(function () {

    $('#txtDate').change(function () {
        $.ajax({
            type: "POST",
            url: "/DataService.asmx/fetchAbsentees",
            contentType: "application/json; charset=utf-8",
            data: "{'date' : '" + $("#txtDate").val() + "'}",
            dataType: "json",
            success: function (data) {
                alert("Successfully reached.");
            },
            error: function (req, status, error) {
                alert("ERROR:" + error.toString() + " " + status + " " + req.responseText);
            }
        });
    });

}); 
```

# sql-server-2008 - SQL Server 2008 - 从 SQL Server 2000 移动数据

> ID：10029725
> 
> 赞同：0
> 
> 时间：2012-04-05T13:40:41.727
> 
> 标签：sql-server-2008, migration, sql-server-2000, database-migration

我们公司准备下周搬迁，目前我们的所有数据库都使用 SQL Server 2000，托管在我们自己的大楼中。出于多种原因，他们决定将数据转移到本地公司，但他们运行的是 SQL Server 2008。

我想对一些事情提出建议：

1.  我们正在尝试为我们的几个数据库设置一个测试，以查看我们的应用程序（连接字符串等）出现了什么问题。在不丢失数据或不必重新创建表等的情况下，将数据库从我们的 SQL Server 2000 机器获取到新机器的最佳方法是什么？我尝试了数据库复制向导，但我们网络内的限制不允许这样做。如果我在 SQL Server 2008 上创建一个数据库并`RESTORE`从 SQL Server 2000 .bak 文件执行一个数据库，我将丢失所有事务，对吗？如果我稍后替换事务文件怎么办？我认为那行不通。

2.  如何将 SQL Server 2000 数据库正确升级到 SQL Server 2008？我已经针对我们的大多数数据库运行了该向导，除了一些我可以解决的小问题外，它都很干净。

我们的 SQL Server 2000 是我们的生产服务器，因此它在任何时候都无法复制文件……直到搬家。我们的客户已被告知在某些日期之间会有一个短暂的中断期，所以没关系，但我想我的意思是我现在不能停止 SQL Server 代理，只是为了复制日志文件等用于测试目的.

非常感谢任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:45:40.427

创建 SQL Server 2000 的数据库备份并将其还原到 SQL Server 2008。

设置复制，将 SQL Server 2000 作为发布者，将 SQL Server 2008 作为订阅者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:07:35.693

Just back up 2000, and then restore it. You won't lose transactions, no difefrent to doing a full backup on your current server.

You'll need to add any SQl logins and set the permissions etc. You'll need to to do fix users for them as well. If you only use integrated access then you don't need to.

e.g.

```
Use MyDataBase
EXEC sp_change_users_login Auto_Fix, 'MyUser' 
```

And you'll need to set the compatibility level

```
Use
exec sp_bcp_dbcmptlevel 'model'
to get it
and then

EXEC sp_dbcmptlevel 'MyDatabase', ??

to set it. 
```

Another option, would be to install 2000 on your new machine restore a back from the old one and then do an inplace upgrade through the 2008 installation wizard. That sort of thing tends to give my sphincters palpitations though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:54:01.173

不确定哪个是最好的方法。我认为数据库备份和恢复将是一个好主意。不过，您会同时丢失一些数据。

如果您在 2005 或 2008 的 2 个版本之间迁移，我建议您进行日志备份以减少丢失的数据，但我认为此选项在 2000 上不可用

我可以给您的一条建议是，在这些链接上查看 2000 年和 2005 年以及 2005 年和 2008 年已停产的功能：

*   [2005年](http://msdn2.microsoft.com/en-us/library/ms144262%28SQL.90%29.aspx)
*   [2008年](http://msdn2.microsoft.com/en-us/library/ms144262%28SQL.100%29.aspx)

# java - eclipse的奇怪行为无法加载某些类

> ID：10029728
> 
> 赞同：0
> 
> 时间：2012-04-05T13:40:53.033
> 
> 标签：java, eclipse

我有两个不同的工作区。在每个文件夹中，我都有源文件夹 ch17 和包 cont。我在第一个工作区中编写了一个简单的类（如下），它编译并运行得很好。但是，当我尝试在另一个工作区中运行它时出现错误

> 找不到主类：cont.DirList。程序将会退出

我已经检查了源文件夹（在光盘上）并且这个类就在那里。我什至从命令行编译它，但它没有帮助。此工作区中的类编译并运行正常。但是，当我尝试将新类添加到此源文件夹时，它会显示相同的错误。我还尝试将相同的类添加到不同的源文件夹，但随后显示相同的错误。我试图删除这个文件夹并再次添加它，刷新它，重新启动eclipse等，但仍然有错误。

出了什么问题以及如何解决？

```
package cont;

import java.util.regex.*;
import java.io.*;
import java.util.*;

public class DirList {

  public static void main(String[] args) {
    File path = new File(".");
    String[] list;
    if(args.length == 0)
      list = path.list();
    else
      list = path.list(new DirFilter(args[0]));

    Arrays.sort(list, String.CASE_INSENSITIVE_ORDER);
    for(String dirItem : list)
      System.out.println(dirItem);
  }
}

class DirFilter implements FilenameFilter {
  private Pattern pattern;
  public DirFilter(String regex) {
    pattern = Pattern.compile(regex);
  }

  public boolean accept(File dir, String name) {
    return pattern.matcher(name).matches();
  }
} /* Output:

DirectoryDemo.java
DirList.java
DirList2.java
DirList3.java

*///:~ 
```

# mysql - MySQL在特定行中查找具有最大值的元组，其中有多个符合条件的元组

> ID：10029733
> 
> 赞同：0
> 
> 时间：2012-04-05T13:41:18.227
> 
> 标签：mysql

关系：产品（制造商，型号，类型）笔记本电脑（型号，价格，速度，内存，高清，屏幕）PC（型号，价格，速度，内存，高清）打印机（型号，价格，颜色，价格）

我正在寻找价格最高的打印机。我知道我可以找到价格最高的打印机，但是如果有多个元组共享条件（最高价格），我该怎么做

我试过的：

```
SELECT model FROM printer HAVING COUNT(*) >= 1 WHERE price > all; 
```

我知道这是一次可怕的尝试，我仍在努力学习。但是当我完全停止时，我无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:45:45.533

不知道我是否理解你的需求：

```
SELECT model FROM printer
WHERE price = (SELECT MAX(price) FROM printers) 
```

# iphone - 为什么在 iOS5 中创建带有中文文本的框架设置器非常慢

> ID：10029736
> 
> 赞同：3
> 
> 时间：2012-04-05T13:41:55.473
> 
> 标签：iphone, objective-c, ios, core-text

我发现在 iOS5 中使用 CTFramesetterCreateWithAttributedString 创建带有中文字符串的框架设置器非常慢，但在 iOS4 中，它很快。

我已经进行了这样的测试：（chinese.txt 包含 77571 个中文字符，english.txt 包含 233727 个字符）

```
 NSString *englishCtn = [NSString stringWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", [self documentDirectory], @"english.txt"] encoding:NSUTF8StringEncoding error:nil];
 NSAttributedString *englishCtnA = [[NSAttributedString alloc] initWithString:englishCtn];
 NSString *chineseCtn = [NSString stringWithContentsOfFile:[NSString stringWithFormat:@"%@/%@", [self documentDirectory], @"chinese.txt"] encoding:NSUTF8StringEncoding error:nil];
 NSAttributedString *chineseCtnA = [[NSAttributedString alloc] initWithString:chineseCtn];

double start = [[NSDate date] timeIntervalSince1970];
CTFramesetterCreateWithAttributedString((CFAttributedStringRef)englishCtnA);
NSLog(@"english length:%d time %f", englishCtn.length, ([[NSDate date] timeIntervalSince1970] - start) * 1000);

start = [[NSDate date] timeIntervalSince1970];
CTFramesetterCreateWithAttributedString((CFAttributedStringRef)chineseCtnA);
NSLog(@"chinese length:%d time %f", chineseCtnA.length, ([[NSDate date] timeIntervalSince1970] - start) * 1000); 
```

在 iOS 5 中，结果是：

中文长度：77571 时间：12140.347004

英文长度：233727 时间：75.886011

在 iOS 4 中，结果是：

中文长度：77571 时间：53.114176

英文长度：233727 时间：55.696011

我使用xCode工具时间分析器看看会发生什么，我发现函数TRun::GetNextLigatureCandidateCharRange(long)占用大部分时间，我不知道如何优化，求助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:39:13.060

The C++ portions of the runtime were largely, if not entirely added in iOS 5, and that is where it fails. To me that suggests that you should file a bug report with apple, or open an inquiry on your account if you have any remaining.

# linux - Shell 脚本无法将文件数据传递给 shell 输入

> ID：10029746
> 
> 赞同：2
> 
> 时间：2012-04-05T13:42:10.627
> 
> 标签：linux, shell, cat, piping

```
cal April 2012 | cat > t | cat < t | more 
```

为什么什么都不显示？为什么不显示

```
 April 2012       
Su Mo Tu We Th Fr Sa  
 1  2  3  4  5  6  7  
 8  9 10 11 12 13 14  
15 16 17 18 19 20 21  
22 23 24 25 26 27 28  
29 30 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:46:49.877

`|`（匿名管道）将第一个进程的 stdout ( `1`) 与第二个进程的 stdin ( ) 连接起来`0`。将输出重定向到文件后，没有任何标准输出，因此没有任何东西可以通过管道传输。此外，`cat | cat < file`这并没有什么意义，它有两个输入连接到标准输入（至少在 bash 中，重定向稍后出现，“wins”：`echo uiae | cat <somefile`将输出 somefile 的内容）

如果要显示命令的输出，同时将其写入文件，请使用`tee`二进制文件。它写入文件，但仍写入标准输出

```
cal April 2012 | tee t | more
cat t # content of the above `cal` command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:46:21.663

因为它首先`cat > t`将其所有输出发送到一个名为的*文件*`t`，而不再为管道留下任何内容。

如果您的意图是将其发送到文件并通过`more`终端，只需使用：

```
cal April 2012 | tee t | more 
```

这个`| cat < t`结构很奇怪，我什至不确定它是否会起作用。它试图将两个完全*不同*的东西连接到标准输入，`cat`当然这是不必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:46:07.487

`t`如果当前目录中没有现有文件，这对我有用。我在 Ubuntu Oneiric 上使用 bash。

```
$ cal April 2012 | cat > t | cat < t | more
 April 2012       
 Su Mo Tu We Th Fr Sa  
 1  2  3  4  5  6  7  
 8  9 10 11 12 13 14  
 15 16 17 18 19 20 21  
 22 23 24 25 26 27 28  
 29 30
$ cal April 2012 | cat > t | cat < t | more
$ rm t
$ cal April 2012 | cat > t | cat < t | more
 April 2012       
 Su Mo Tu We Th Fr Sa  
 1  2  3  4  5  6  7  
 8  9 10 11 12 13 14  
 15 16 17 18 19 20 21  
 22 23 24 25 26 27 28  
 29 30 
```

# sql-server - SQL Server 2008 - 从插入触发器执行 sp_start_job - 作业是否异步运行？

> ID：10029747
> 
> 赞同：3
> 
> 时间：2012-04-05T13:42:12.483
> 
> 标签：sql-server, sql-server-2008, triggers, database-security, sql-server-job

我希望使用**sp_start_job**从**插入触发器**中启动作业。

插入触发器所在的表每天只有几次插入。

这样做的目的是让插入触发器不必**等待作业**完成 - 这是正确的吗？

该工作向公司内的关键人员发送电子邮件，通知新数据。

另外，这个想法的**缺点是什么？**

用于插入数据的登录名/用户是否需要任何**特殊权限/角色**？

或者该工作是否需要**由**登录名/用户拥有？

触发器是否以登录名/用户的权限运行？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:12:17.607

是的，您可以从程序的输出中看到它不会即时发送电子邮件，而是将其添加到队列中，因此它不会通过等待发送电子邮件来锁定任何内容，然后继续执行触发器。

您可以在以下位置查看您的电子邮件日志

```
SELECT * FROM sysmail_log 
```

另一个可能对您有帮助的查询是

```
SELECT * FROM sysmail_mailitems 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:58:36.507

[使用sp_send_email](http://EXEC%20sp_send_dbmai)发送电子邮件非常快。您可以从触发器内部调用它，可能会损失 20 毫秒。不是您通常需要异步执行的操作。

# c# - 在子页面中嵌入 javascript 标签

> ID：10029750
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:42:17.967
> 
> 标签：c#, javascript, asp.net, visual-studio-2010, master-pages

我有一个链接到调查投票页面的 JavaScript 代码。当我在普通的 aspx 页面（没有母版页）中嵌入 JavaScript 代码时，我可以正常进行调查，没有任何问题，但是当我在使用母版页的页面中嵌入相同的代码时，我得到空白页。

这种方式不起作用： http: [//gyazo.com/27f38b5b04897cf0b17747eab05cf746](http://gyazo.com/27f38b5b04897cf0b17747eab05cf746)

这种方式有效： http: [//gyazo.com/c69d3b95afe4a0070cd09834e479a97f](http://gyazo.com/c69d3b95afe4a0070cd09834e479a97f)

## 更新

使用`<script src='<%=ResolveClientUrl("~/Survey/xlaabsolute.asp?p=1")%>' type="text/javascript" />`正确呈现投票但投票按钮不做任何回发[http://gyazo.com/b39fcaa8de3438c8c2a625e3816ba4be](http://gyazo.com/b39fcaa8de3438c8c2a625e3816ba4be)。

我可以看到内容[http://gyazo.com/b39fcaa8de3438c8c2a625e3816ba4be](http://gyazo.com/b39fcaa8de3438c8c2a625e3816ba4be)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:45:55.257

可能是脚本被引用的方式。

您在属性中使用了相对位置，如果它不在允许被发现`src`的位置，则可能会发生变化。`Survery/...`也许将其更改为`/Survey/...`它始终根据根路径而不是文档当前所在的位置定位文件？

您还可以`runat="Server"`使用传统的 ASP 相对链接制作您的脚本标记并引用该脚本：`src="~/Survey/..."`因此它可以正确解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:48:38.453

无论在何处使用控件，解决问题并使其正常工作的方法是使用[ResolveClientUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveclienturl.aspx)，如下所示：

```
<script src='<%=ResolveClientUrl("~/Survey/your_script.js")%>' type="text/javascript" /> 
```

# java - 如何以编程方式在 Horizo ntalListView 中滚动？

> ID：10029753
> 
> 赞同：1
> 
> 时间：2012-04-05T13:42:26.813
> 
> 标签：java, android, listview

我`HorizontalListView`使用以下方法在课堂上执行新逻辑：

```
private DataSetObserver mDataObserver = new DataSetObserver() {

    @Override
    public void onChanged() {
        synchronized (HorizontalListView.this) {
            mDataChanged = true;
            int firstVisiblePos = HorizontalListView.this.getFirstVisiblePosition();
            int lastVisiblePos = HorizontalListView.this.getLastVisiblePosition();
            Log.i(mTag, "firstVisiblePosl " + firstVisiblePos+ " lastVisiblePos  " + lastVisiblePos );
            if (mAdapter.getCount() > lastVisiblePos) {
                int sumTotal = 0;
                for (int i = firstVisiblePos; i < mAdapter.getCount(); i++) {
                    View child = HorizontalListView.this.getChildAt(i);
                    if (child != null) {
                        sumTotal += child.getWidth();
                    }
                }
                int sumPartial = 0;
                for (int i = lastVisiblePos; i < mAdapter.getCount(); i++) {
                    View child = HorizontalListView.this.getChildAt(i);
                    if (child != null) {
                        sumPartial += child.getWidth();
                    }
                }

                Log.i(mTag, "sumTotal " + sumTotal+ " sumPartial " + sumPartial);
                mScroller.startScroll(sumTotal, 0, sumPartial, 0);
            }
        }

        Log.i(mTag, " " + mCurrentX + "mNextX " + mNextX);
        invalidate();
        requestLayout();
    } 
```

但这没有效果：我想向左滚动到 mAdapter 的最后一项可见。

# java - 如何编写过滤后的 IObservableList

> ID：10029755
> 
> 赞同：5
> 
> 时间：2012-04-05T13:42:34.627
> 
> 标签：java, data-binding, filter, eclipse-databinding

通过一些 API 调用，我[**`IObservableList<E>`**](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fdatabinding%2Fobservable%2Flist%2FIObservableList.html)从 Eclipse 数据绑定框架中得到了一个 . 我希望`IObservableList<E>`根据元素 type 上定义的一些谓词从中派生另一个`E`。派生列表应根据原始列表的变化动态更新。

我怎样才能最好地实现它？我考虑过 subclassing `DecoratingObservableList`，但不知道如何使用它。

当然，我可以自己实现整个`IObservableList`接口，但我想知道周围是否有其他实用程序类可供我使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:51:19.690

我认为扩展`DecoratingObservableList`是一个好的开始。我还建议专注于准确的预期用途，而不是立即实现整个 API。例如，您是否需要通过随机访问写入`set`？如果没有，那么不要费心实施它。这涵盖了 mutable 的只读视图，`ObservableList`将修饰列表的更改事件映射到过滤列表上的适当更改事件：

```
public class FilteredObservableList<E> extends DecoratingObservableList
{
  private final IObservableList decorated;
  private final Predicate pred;
  private final List<E> filtered = new ArrayList();

  public FilteredObservableList(
      IObservableList decorated, Predicate pred, boolean disposeDecoratedOnDispose)
  {
    super(decorated, disposeDecoratedOnDispose);
    this.decorated = decorated;
    this.pred = pred;
    for (Object o : decorated) filtered.add(pred.eval(o)? (E) o : null);
  }

  @Override protected void handleListChange(ListChangeEvent event) {
    final List<ListDiffEntry> diffs = new ArrayList();
    final List<Integer> mapping = new ArrayList();
    int i = 0;
    for (E e : filtered) mapping.add(e != null? i++ : i);
    event.diff.accept(new ListDiffVisitor() {
      @Override public void handleAdd(int index, Object element) {
        final boolean passes = pred.eval(element);
        filtered.add(index, passes? (E) element : null);
        final Integer outInd = mapping.get(index);
        mapping.add(index, outInd);
        if (passes) {
          diffs.add(new FilteredDiffEntry(outInd, true, element));
          for (int i = index + 1; i < mapping.size(); i++)
            mapping.set(i, mapping.get(i) + 1);
        }
      }
      @Override public void handleRemove(int index, Object element) {
        final boolean passes = filtered.get(index) != null;
        filtered.remove(index);
        final int outInd = mapping.get(index);
        mapping.remove(index);
        if (passes) {
          diffs.add(new FilteredDiffEntry(outInd, false, element));
          for (int i = index; i < mapping.size(); i++)
            mapping.set(i, mapping.get(i)-1);
        }
      }
    });
    if (!diffs.isEmpty()) {
      final ListDiffEntry[] difAry = diffs.toArray(new ListDiffEntry[diffs.size()]);
      fireListChange(new ListDiff() {
        @Override public ListDiffEntry[] getDifferences() { return difAry; }
      });
    }
  }

  public ListIterator<E> listIterator() {
    getterCalled();
    final Iterator<E> it = decorated.iterator();
    return new ListIterator<E>() {
      E next;
      boolean nextReady;
      public boolean hasNext() {
        getterCalled();
        if (nextReady) return true;
        while (it.hasNext()) {
          next = it.next();
          if (next != null) { nextReady = true; break; }
        }
        return nextReady;
      }
      public E next() {
        getterCalled();
        if (hasNext()) { nextReady = false; return next; }
        else throw new NoSuchElementException();
      }
      public void add(Object o) { throw new UnsupportedOperationException(); }
      public boolean hasPrevious() { throw new UnsupportedOperationException(); }
      public int nextIndex() { throw new UnsupportedOperationException(); }
      public E previous() { throw new UnsupportedOperationException(); }
      public int previousIndex() { throw new UnsupportedOperationException(); }
      public void remove() { throw new UnsupportedOperationException(); }
      public void set(Object o) { throw new UnsupportedOperationException(); }
    };
  }

  public interface Predicate { boolean eval(Object o); }

  private static final class FilteredDiffEntry extends ListDiffEntry {
    private final int pos;
    private final boolean isAdd;
    private final Object el;
    FilteredDiffEntry(int pos, boolean isAdd, Object el) {
      this.pos = pos; this.isAdd = isAdd; this.el = el;
    }
    @Override public int getPosition() { return pos; }
    @Override public boolean isAddition() { return isAdd; }
    @Override public Object getElement() { return el; }
  }

  @Override public Object move(int _, int __) { throw new UnsupportedOperationException(); }
  @Override public Object remove(int _) { throw new UnsupportedOperationException(); }
  @Override public Object set(int _, Object __) { throw new UnsupportedOperationException(); }
  @Override public void add(int _, Object __) { throw new UnsupportedOperationException(); }
  @Override public boolean add(Object _) { throw new UnsupportedOperationException(); }
  @Override public boolean addAll(Collection _) { throw new UnsupportedOperationException(); }
  @Override public boolean addAll(int _, Collection __) {
    throw new UnsupportedOperationException();
  }
  @Override public void clear() { throw new UnsupportedOperationException(); }
  @Override public boolean remove(Object _) { throw new UnsupportedOperationException(); }
  @Override public boolean removeAll(Collection _) { throw new UnsupportedOperationException();}
  @Override public boolean retainAll(Collection _) { throw new UnsupportedOperationException();}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:30:14.303

这是一个只读实现。

几个警告：

*   这取决于编辑时的基本 DecoratingObservableList 触发事件。
*   如果装饰列表在迭代器创建时间之后发生更改，则迭代器将不会生效，它就像那样工作`CopyOnWriteArrayList`。可以说它应该扔`ConcurrentModificationExceptions`在那里。

如果它必须是可写的，你能定义你想如何做索引映射，或者指定你是否要允许列表中的非唯一项吗？

```
package filteredobservablelist;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import java.util.ListIterator;

import org.eclipse.core.databinding.observable.list.DecoratingObservableList;
import org.eclipse.core.databinding.observable.list.IObservableList;
import org.eclipse.core.databinding.observable.list.ListChangeEvent;
import org.eclipse.core.databinding.observable.list.ListDiff;
import org.eclipse.core.databinding.observable.list.ListDiffEntry;

public class FilteredObservableList extends DecoratingObservableList {

    private static final class FilteredListDiff extends ListDiff {

        private final List<ListDiffEntry> filteredDiffs;

        private FilteredListDiff(List<ListDiffEntry> filteredDiffs) {
            this.filteredDiffs = filteredDiffs;
        }

        @Override
        public ListDiffEntry[] getDifferences() {
            return filteredDiffs.toArray(new ListDiffEntry[filteredDiffs.size()]);
        }
    }

    public interface Predicate {

        boolean evaluate(Object element);

    }

    private final Predicate predicate;
    private List<Object> filteredList;

    public FilteredObservableList(IObservableList decorated, boolean disposeDecoratedOnDispose, Predicate predicate) {
        super(decorated, disposeDecoratedOnDispose);

        this.predicate = predicate;
        rebuildCache();
    }

    @Override
    protected void handleListChange(final ListChangeEvent event) {
        final List<ListDiffEntry> filteredDiffs = new ArrayList<ListDiffEntry>(event.diff.getDifferences().length);
        for (ListDiffEntry element : event.diff.getDifferences()) {
            if (predicate.evaluate(element.getElement())) {
                filteredDiffs.add(element);
            }
        }

        rebuildCache();

        if (!filteredDiffs.isEmpty()) {
            fireListChange(new FilteredListDiff(filteredDiffs));
        }
    }

    private void rebuildCache() {
        filteredList = new ArrayList<Object>();
        for (Object element : getDecorated()) {
            if (predicate.evaluate(element)) {
                filteredList.add(element);
            }
        }
    }

    @Override
    public boolean contains(Object o) {
        return filteredList.contains(o);
    }

    @Override
    public boolean containsAll(Collection c) {
        return filteredList.containsAll(c);
    }

    @Override
    public Object get(int index) {
        getterCalled();
        return filteredList.get(index);
    }

    @Override
    public int indexOf(Object o) {
        getterCalled();
        return filteredList.indexOf(o);
    }

    @Override
    public int lastIndexOf(Object o) {
        getterCalled();
        return filteredList.lastIndexOf(o);
    }

    @Override
    public List subList(int fromIndex, int toIndex) {
        getterCalled();
        return this.filteredList.subList(fromIndex, toIndex);
    }

    @Override
    public IObservableList getDecorated() {
        return (IObservableList) super.getDecorated();
    }

    @Override
    public Iterator iterator() {
        return listIterator();
    }

    @Override
    public ListIterator listIterator() {
        return this.listIterator(0);
    }

    @Override
    public ListIterator listIterator(int index) {
        getterCalled();

        final ListIterator iterator = filteredList.listIterator(index);

        return new ListIterator() {

            @Override
            public boolean hasNext() {
                getterCalled();
                return iterator.hasNext();
            }

            @Override
            public boolean hasPrevious() {
                getterCalled();
                return iterator.hasPrevious();
            }

            @Override
            public Object next() {
                getterCalled();
                return iterator.next();
            }

            @Override
            public int nextIndex() {
                getterCalled();
                return iterator.nextIndex();
            }

            @Override
            public Object previous() {
                getterCalled();
                return iterator.previous();
            }

            @Override
            public int previousIndex() {
                getterCalled();
                return iterator.previousIndex();
            }

            @Override
            public void add(Object o) {
                throw new UnsupportedOperationException();
            }

            @Override
            public void set(Object o) {
                throw new UnsupportedOperationException();
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException();
            }
        };
    }

    @Override
    public Object move(int oldIndex, int newIndex) {
        throw new UnsupportedOperationException();
    }

    @Override
    public Object remove(int index) {
        throw new UnsupportedOperationException();
    }

    @Override
    public Object set(int index, Object element) {
        throw new UnsupportedOperationException();
    }

    @Override
    public void add(int index, Object o) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean add(Object o) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean addAll(Collection c) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean addAll(int index, Collection c) {
        throw new UnsupportedOperationException();
    }

    @Override
    public void clear() {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean remove(Object o) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean removeAll(Collection c) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean retainAll(Collection c) {
        throw new UnsupportedOperationException();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T14:14:24.733

您可能想查看具有可过滤、可观察列表的[GlazedLists的源代码。](http://www.glazedlists.com/)

# javascript - chrome - 在调试脚本中相当于 Visual Studio 的 F5

> ID：10029756
> 
> 赞同：1
> 
> 时间：2012-04-05T13:42:37.330
> 
> 标签：javascript, debugging, google-chrome

在 Chrome 中，您可以通过`F12`. 当它通过脚本单步执行时，您可以点击`F10`跳过。

**问题：**你如何告诉它继续直到它到达下一个断点？与调试 c# 代码时可以点击的 Visual Studio 的 F5 类似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:46:45.687

`F8`. 有关更多详细信息，请参阅[http://code.google.com/chrome/devtools/docs/scripts-breakpoints.html](http://code.google.com/chrome/devtools/docs/scripts-breakpoints.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:46:18.930

按`F8`键。

# benchmarking - 缓存到缓存延迟的基准

> ID：10029763
> 
> 赞同：0
> 
> 时间：2012-04-05T13:43:12.680
> 
> 标签：benchmarking, intel, amd-processor

我正在寻找一个可以测量处理器的缓存延迟和带宽的基准。特别是我需要测量从一个内核到另一个内核的缓存到缓存时间（包括不同的芯片和不同的插槽）。

需要在 linux 上运行的东西。

显示最新 CPU 上此类测试结果的网页目前也是一个不错的折衷方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T04:14:21.303

试试 lmbench3，它有各种基准测试，包括你想要的

# asp.net-mvc - 通过 EntityModel 在 asp.net mvc 中查看？

> ID：10029765
> 
> 赞同：1
> 
> 时间：2012-04-05T13:43:16.843
> 
> 标签：asp.net-mvc, entity-framework, ado.net

我有一个名为 ECommerceEntities 的实体模型，其中包含多个实体。如果我想在 asp.net mvc 的视图中使用此模型，我可以将 ECommerceEntities 实例传递给视图吗？或者我可以在 ECommerceEntities 中传递一个实体。

我是说 ：

```
//Can I use this?
public ActionResult Index()
{
   ECommerceEntities entity = new ECommerceEntities();
   return View(entity);
} 
```

或者

```
//Should I use this?
public ActionResult Index()
{
   ECommerceEntities.OneEntity one_entity = new ECommerceEntities.OneEntity();

   //filling one_entity here and then send to view

   return View(one_entity );
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:50:48.207

如果你问是否可能，两者都可以。是的，这两个选项都可以。但是，如果您只需要视图中的子实体，我只需将子实体传递到视图中。传递超过需要的东西没有用，对吧？

不要忘记，在 MVC 中，无论您传入视图的任何对象（例如 EcommerceEntities）都可以通过 MVC 的自动模型绑定在帖子中设置其属性，该模型绑定将帖子中的数据映射到您传入视图的对象中。

因此，这意味着如果您不小心，有人可以劫持 http 帖子并可以使用他们选择的各种随机数据填充 EcommerceEntities 及其子实体，并且您可能会不小心将这些数据保存到您的数据库中，因为您没有预料到一些设置这些属性。

因此，在 MVC 中工作时，您必须保护视图中未使用但传递到视图中的属性，以确保没有人注入它们。

如果您决定传入 EcommerceEntities，请确保您使用白名单或查看 MVC 的绑定属性以在您的实体回发到您的控制器时保护您的数据。

由于涉及保护这么多额外数据的工作，我会说如果屏幕将正确填充子实体对象，那么子实体将是最好的。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:50:09.040

如果要显示所有实体的列表（通常使用 Index 操作），您可能希望从数据库上下文中获取所有实体：

```
public ActionResult Index()
{
    // assumes dbContext is already initialized
    ICollection<ECommerceEntities> entities = dbContext.ECommerceEntities
    return View(entities);
} 
```

# python - 如何将英文 Gmail imap 日期转换为法文日期格式

> ID：10029767
> 
> 赞同：0
> 
> 时间：2012-04-05T13:43:26.437
> 
> 标签：python, datetime, locale, strptime

我必须用 Django 的 Python 脚本阅读 Gmail 的 imap 邮件，它运行良好，除了日期。

我将日期抓取为这种格式：`'2 Apr 2012 13:21:43'`并使用`strptime`：

```
date = strptime(date, "%d %b %Y %H:%M:%S") 
```

但是我遇到了一个错误，因为我的语言环境是`fr_FR`并且在法国`Apr`不是有效的月份缩写，而且我不知道谷歌使用的其他月份名称。如果我知道的话，我可以做一个映射：

```
{'Apr':'avr.',...} 
```

有谁知道我如何使用正确的语言环境？我可以使用我的时区`strptime`来指示日期是英文格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:50:39.273

尝试

```
import locale
locale.setlocale(locale.LC_ALL,'en_US') 
```

**更新**

如果您不更改您的位置，请查看 dateutil 包以及[http://pypi.python.org/pypi/python-dateutil/1.5 。](http://pypi.python.org/pypi/python-dateutil/1.5)当我设置 fr_FR 语言环境时，它适用于您的示例。

```
from dateutil import parser
date = '2 Apr 2012 13:21:43'
date = parser.parse(date) 
```

# java - 需要列表操作逻辑帮助

> ID：10029774
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:44:03.613
> 
> 标签：java, algorithm, file, list, logic

伙计们，

我有一段代码可以搜索一些类似的 .ser 文件并将它们加载到列表中

文件是（rulesIncr1.ser、rulesIncr2.ser、rulesIncr3.ser ......等等）

现在加载所有文件，我编写了以下逻辑

```
String defaultfilename = "rulesincr";
int i=1;
                String incrFile;
                //THE FOLLOWING CODE WILL CHECK FOR ANY NU8MBER OF INCR RULES FILE IN THE LOCATION AND ADD THEM TO A RULE MODEL LIST
                do
                {
                    String tempincr = new Integer(i).toString();
                    incrFile = defaultfilename.concat(tempincr).concat(".ser");
                    FileInputStream fis= new FileInputStream( filePath.concat(incrFile));
                    ObjectInputStream inStreamIncr = new ObjectInputStream(fis); 
                    myRulesIncr = (List<RuleModel>)inStreamIncr.readObject();
                    i++;
                }

                while(new File(filePath.concat(incrFile)).isFile()); 
```

现在我面临的问题是每次刷新 myRulesIncr 并且最后只加载最后一个文件。我需要拥有所有加载的文件。请指教

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:48:13.620

线

```
myRulesIncr = (List<RuleModel>)inStreamIncr.readObject(); 
```

在您的循环中将始终覆盖`myRulesIncr`变量指向的列表。如果你想添加所有这些`RuleModel`实例，`myRulesIncr`你应该有类似的东西

```
List<RuleModel> myRulesIncr = new ArrayList<RuleModel>();

while{
//your while loop without the 
//myRulesIncr = (List<RuleModel>)inStreamIncr.readObject(); line
myRules.addAll( (List<RuleModel>)inStreamIncr.readObject() );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:49:44.460

我不熟悉标准列表对象，但问题似乎在这里：

```
myRulesIncr = (List<RuleModel>)inStreamIncr.readObject(); 
```

您似乎每次都在制作一个新列表，即使不是，我相信您需要递增到下一个节点，即`myRulesIncr = myRulesIncr.next()`

# ruby-on-rails - 如何在 rails 3 路线中省略两个模型的控制器？

> ID：10029781
> 
> 赞同：0
> 
> 时间：2012-04-05T13:44:48.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在构建一个 rails3 应用程序，目前我的 routes.rb 文件中有以下行：

```
get "/:id" => 'tapes#show' 
```

换句话说，您可以使用和显示**磁带** （我也在使用friendly_id gem，因此用户实际上看到的是一个友好的 URL 形式）`website.com/tapes/1``using website.com/1``website.com/tapename`

现在，我想要实现的是对**用户**页面做同样的事情。因此，与其显示用户页面，`website.com/users/alex`我还希望能够使用`website.com/alex`.

有没有办法在 routes.rb 中实现这个“用户”逻辑**以及现有的“磁带”**规则并以某种方式设置优先级？因此，如果有人访问`website.com/alex`我的应用程序，将搜索是否有 ID 为“alex”的**用户**记录，如果没有找到，则查找 ID 为“alex”的**磁带**。

我可以在路线中使用某种高级约束吗？有任何想法吗？

非常感谢您的帮助，

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:50:22.047

Rails 无法确定您尝试访问的控制器。唯一可行的方法是：

1.  您可以根据名称上的一些正则表达式来确定它将解析为哪个模型。或者

2.  您知道用户名和磁带名从不冲突，并且愿意承担访问数据库以解析正确控制器的成本。

出于多种原因，这可能是一个坏主意，它会影响性能，也不符合`RESTful`原则，并且可能会让用户感到困惑。

# jquery - Chrome 未将样式表 css 规则应用于具有 jquery 隐藏和显示 div 的某些元素（屏幕截图）

> ID：10029783
> 
> 赞同：3
> 
> 时间：2012-04-05T13:44:51.157
> 
> 标签：jquery, css, google-chrome, behavior

您好，我在 chrome 中有一个非常奇怪的问题，我无法弄清楚！

我正在创建一个在线文本浏览器游戏，我遇到的问题可以通过导航到这里来检查。

[http://www.novactown.com/account?id=10003#_account](http://www.novactown.com/account?id=10003#_account)

你会注意到你在一个名为**Account**的选项卡上，下面是一个黑色`h2`的类`.playerBar`（它有 css `.playerBar {border: 1px solid #222;}`）

**截屏**

[http://www.images.novactown.com/eg1.png](http://www.images.novactown.com/eg1.png "在标签上的朋友和黑色 h2 类 playerBar 与 1px 边框为 222")

现在，如果您单击“**朋友**”选项卡，它将显示帐户的朋友。

帐户的朋友显示与选项卡上的**帐户**完全相同，但**css**不应用该类，即使该选项卡上的每个人都有类。`h2`**`.playerBar``h2``.playerBar`**

 ****截屏**

[http://www.images.novactown.com/eg2.png](http://www.images.novactown.com/eg2.png "是具有相同类 .playerBar 的 h2，但 chrome 不应用边框规则。")

此外，如果您导航到“**朋友**”选项卡并按 f5，它现在将正确显示`h2`并应用`.playerBar`CSS。

选项卡是动态的，并且应用`onchange`绑定到`hash`.

我通过 W3C 验证运行它，一切都很清楚。

希望我说得足够清楚，我只是想不出为什么 chrome 会这样做，我检查了 IE、Mox、Safari 和 Opera，一切正常！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:18:32.943

我正在运行 Chrome 并且它可以正常显示，要么你已经修复它，要么它可能是一个缓存的东西？当您从浏览器查看源代码时，您的标记和 css 会显示您的期望吗？**

# c# - 使用连接时避免子集合上的重复项

> ID：10029784
> 
> 赞同：1
> 
> 时间：2012-04-05T13:44:51.843
> 
> 标签：c#, nhibernate

我在 Nhibernate 上做这个查询

```
FROM             Entity e
LEFT JOIN FETCH  e.Collection1
LEFT JOIN FETCH  e.Collection2
LEFT JOIN FETCH  e.Collection3 
```

由于加入，我在 Collection3 上多次重复相同的元素。如何在避免重复项目的同时急切加载所有集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:11:02.957

对于使用一个连接的急切加载，然后`.TransformUsing(Transformers.DistinctRootEntity)`就可以了。有关示例，请参阅此[博客文章（使用急切加载可能会产生意外结果）。](http://puredotnetcoder.blogspot.co.uk/2011/07/using-eager-loading-can-produce.html)但是，一旦您有两个或多个连接，`TransformUsing`就会崩溃。

请参阅Ayende的这篇[博](http://ayende.com/blog/4367/eagerly-loading-entity-associations-efficiently-with-nhibernate)`Eagerly loading entity associations efficiently with NHibernate`文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:39:04.967

我认为您可以使用`"Transformers.DistinctRootEntity"`：

```
session.QueryOver<Entity>()
   .Fetch(entity => entity.SubEntity).Eager
   .TransformUsing(Transformers.DistinctRootEntity)
   .List(); 
```

但它是在 Web 服务器层（不是 SQL Server）上完成的

如果您只想获取某些字段（而不是实体），则可以使用 Distinct 或 Group By。

# java - 如何使用 JDBCTemplate.queryForMap 获取地图数据

> ID：10029785
> 
> 赞同：44
> 
> 时间：2012-04-05T13:45:05.190
> 
> 标签：java, spring, jdbctemplate

如何从中加载数据`JDBCTemplate.queryForMap()`并返回地图接口。如何在地图内部维护查询数据。我试图加载但我得到以下异常，即**org.springframework.dao.IncorrectResultSizeDataAccessException: Incorrect result**

代码：-

```
public List getUserInfoByAlll() {
    List profilelist=new ArrayList();
    Map m=new HashMap();
    m=this.jdbctemplate.queryForMap("SELECT userid,username  FROM USER");
    Set s=m.keySet();
    Iterator it=s.iterator();
    while(it.hasNext()){
        String its=(String)it.next();
        Object ob=(Object)m.get(its);
        log.info("UserDAOImpl::getUserListSize()"+ob);
    }
    return profilelist;
} 
```

请帮帮我

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-05T13:49:10.733

`queryForMap`如果您想获得单行是合适的。您正在选择没有`where`子句，因此您可能想要`queryForList`. 该错误可能表明需要`queryForMap`一行，但您查询正在检索许多行。

[查看文档。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/) 有一个`queryForList`只需要 sql；返回类型是

`List<Map<String,Object>>`.

所以一旦你有了结果，你就可以做你正在做的事情。我会做类似的事情

```
List results = template.queryForList(sql);

for (Map m : results){
   m.get('userid');
   m.get('username');
} 
```

我会让你填写详细信息，但在这种情况下我不会遍历键。我喜欢明确说明我的期望。

如果您有一个`User`对象，并且您实际上想要加载 User 实例，则可以使用`queryForList`带有 sql 和类类型的

`queryForList(String sql, Class<T> elementType)`

（哇，自从我离开 Javaland 以来，Spring 发生了很大变化。）

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-10-15T14:27:06.220

我知道这真的很旧，但这是查询 Map 的最简单方法。

只需实现 ResultSetExtractor 接口来定义要返回的类型。下面是一个如何使用它的例子。您将手动映射它，但对于简单的地图，它应该很简单。

```
jdbcTemplate.query("select string1,string2 from table where x=1", new ResultSetExtractor<Map>(){
    @Override
    public Map extractData(ResultSet rs) throws SQLException,DataAccessException {
        HashMap<String,String> mapRet= new HashMap<String,String>();
        while(rs.next()){
            mapRet.put(rs.getString("string1"),rs.getString("string2"));
        }
        return mapRet;
    }
}); 
```

这将为您提供具有多行（无论您的查询返回多少）的 Map 返回类型，而不是 Map 列表。您可以在此处查看 ResultSetExtractor 文档：http: [//docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/jdbc/core/ResultSetExtractor.html](http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/jdbc/core/ResultSetExtractor.html)

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-05-25T19:27:00.513

要添加到@BrianBeech 的答案，这在 java 8 中更加精简：

```
jdbcTemplate.query("select string1,string2 from table where x=1", (ResultSet rs) -> {
    HashMap<String,String> results = new HashMap<>();
    while (rs.next()) {
        results.put(rs.getString("string1"), rs.getString("string2"));
    }
    return results;
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-11-05T10:29:53.967

你可以做这样的事情。

```
 List<Map<String, Object>> mapList = jdbctemplate.queryForList(query));
    return mapList.stream().collect(Collectors.toMap(k -> (Long) k.get("userid"), k -> (String) k.get("username"))); 
```

输出：

```
 {
  1: "abc",
  2: "def",
  3: "ghi"
} 
```

# mongodb - MongoDB 在一次更新中更新许多具有不同时间戳的文档

> ID：10029787
> 
> 赞同：0
> 
> 时间：2012-04-05T13:45:22.617
> 
> 标签：mongodb

我在一个 MongoDB 集合中有 10000 个文档。我想使用每个文档相隔 1 秒的日期时间值更新所有文档（因此所有日期时间值都是唯一的，并且相隔 1 秒）。有没有办法通过一次更新来做到这一点，而不是依次更新每个文档，这会导致 10000 次不同的更新操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:10:45.020

不，没有办法用一个更新语句来做到这一点。没有在服务器上运行以允许此类更新的表达式。对此有一个[功能请求](https://jira.mongodb.org/browse/SERVER-458)，但尚未完成，因此无法使用。

# ruby - 如何在Ruby中从开始索引到最后选择字符串的一部分？

> ID：10029788
> 
> 赞同：2
> 
> 时间：2012-04-05T13:45:25.607
> 
> 标签：ruby

```
string = "Yellow"
puts string[1..string.length] -> outputs "ellow" 
```

有没有更短的方法让 Ruby 在不使用 string.length 的情况下做同样的事情？例如，在 Python 中，我们可以编写 string[1:] 并且它会执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T13:50:13.947

在 Ruby 中使用`[]`获取字符串或数组的索引时，使用负数将从索引的末尾开始计数，以`1`(`[-0]`将与`[0]`) 相同。

在你的例子中，

```
puts string[1..-1] 
```

将输出所需的字符串`"ellow"`。相等，

```
puts string[1..-2] 
```

会产生`"ello"`等等。

[字符串#[] 的文档](http://ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:47:36.500

您应该在间隔中使用 -1 作为右边界：

```
string = "Yellow"
puts string[1..-1] -> outputs "ellow" 
```

# c# - 使用 iTextSharp 提取 FlateDecode 图像

> ID：10029789
> 
> 赞同：1
> 
> 时间：2012-04-05T13:45:29.143
> 
> 标签：c#, itextsharp

我想从 PDF 中提取图像。我现在正在使用 iTextSharp。一些图像可以正确提取，但大多数图像没有正确的颜色并且失真。我用不同的 PixelFormats 做了一些实验，但我没有找到解决问题的方法......

这是分隔图像类型的代码：

```
if (filter == "/FlateDecode")
{
   // ...
   int w = int.Parse(width);
   int h = int.Parse(height);
   int bpp = tg.GetAsNumber(PdfName.BITSPERCOMPONENT).IntValue;

   byte[] rawBytes = PdfReader.GetStreamBytesRaw((PRStream)tg);
   byte[] decodedBytes = PdfReader.FlateDecode(rawBytes);
   byte[] streamBytes = PdfReader.DecodePredictor(decodedBytes, tg.GetAsDict(PdfName.DECODEPARMS));

   PixelFormat[] pixFormats = new PixelFormat[23] { 
         PixelFormat.Format24bppRgb,
         // ... all Pixel Formats
    };
    for (int i = 0; i < pixFormats.Length; i++)
    {
        Program.ToPixelFormat(w, h, pixFormats[i], streamBytes, bpp, images));
    }
} 
```

这是将图像保存在 MemoryStream 中的代码。将图像保存在文件夹中是稍后实现的。

```
private static void ToPixelFormat(int width, int height, PixelFormat pixelformat, byte[] bytes, int bpp, IList<Image> images)
{
    Bitmap bmp = new Bitmap(width, height, pixelformat);
    BitmapData bmd = bmp.LockBits(new Rectangle(0, 0, width, height),
       ImageLockMode.WriteOnly, pixelformat);
    Marshal.Copy(bytes, 0, bmd.Scan0, bytes.Length);
    bmp.UnlockBits(bmd);
    using (var ms = new MemoryStream())
    {
       bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Tiff);
       bytes = ms.GetBuffer();
    }
    images.Add(bmp);
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T22:10:44.383

即使您找到了问题的解决方案，我也建议您在上面修复您的代码。

我相信失真问题是由于行数据边界不匹配引起的。PdfReader 以字节边界返回数据。例如，对于 20 像素宽的灰度图像，每个图像行将获得 20 个字节的数据。位图类适用于 32 位边界。创建宽度为 20 像素的位图时，Bitmap 类将生成步幅（字节宽度）=32 字节的灰度位图。这意味着您不能像在 ToPixelFormat() 中那样使用 Marshal.Copy() 方法简单地将检索到的字节从 PdfReader 复制到新位图中。

源字节数组中的第一个像素位于第 21 个字节，但目标位图需要它作为第 33 个字节，因为位图的 32 位边界。为了解决这个问题，我必须创建大小考虑每个数据行的 32 位边界的字节数组。

将数据从从 PdfReader 检索到的字节数组逐行复制到新的字节数组中，并考虑 32 位行边界。现在我有了边界匹配位图类边界的数据字节，因此我可以使用 Marshal.Copy() 将其复制到新位图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:28:07.143

我找到了解决我自己问题的方法。要提取所有页面上的所有图像，无需实现不同的过滤器。iTextSharp 有一个图像渲染器，它将所有图像保存为其原始图像类型。

只需执行以下操作：http: [//kuujinbo.info/iTextSharp/CCITTFaxDecodeExtract.aspx](http://kuujinbo.info/iTextSharp/CCITTFaxDecodeExtract.aspx) 您不需要实现 HttpHandler ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:07:24.593

PDF 支持多种图像格式。我不认为我会采用您在这里选择的这种方法。您需要从流本身的字节中确定图像格式。例如，JPEG 通常以 ASCII 字节 JFIF 开头。

.NET (3.0+) 确实提供了一种尝试选择正确解码器的方法：BitmapDecoder.Create。请参阅[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapdecoder.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapdecoder.aspx)

如果这不起作用，您可能需要考虑一些第三方成像库。我使用过 ImageMagick.NET 和 LeadTools（价格过高）。

# c# - 图像未出现在 domDocument 中

> ID：10029805
> 
> 赞同：0
> 
> 时间：2012-04-05T13:46:32.347
> 
> 标签：c#, winforms, browser

什么会导致图像不出现在 webBrowser.domDocument 中？

我总是使用以下代码从 webBrowser 获取一些东西：

```
 IHTMLDocument2 doc = (IHTMLDocument2)browser.Document.DomDocument;
                HTMLBody body = (HTMLBody)doc.body;

                foreach (IHTMLImgElement img in doc.images)
                {
                     //logic here
                } 
```

但是，这一次图像没有显示出来。

什么会导致这种情况发生？

# python - Python 中的持久引用

> ID：10029807
> 
> 赞同：0
> 
> 时间：2012-04-05T13:46:33.630
> 
> 标签：python, persistence, pickle

我希望我的程序存储数据以供以后使用。到目前为止，没有任何问题：在 Python 中有很多方法可以做到这一点。

事情变得有点复杂，因为我想在实例之间保留引用。如果列表 X 是列表 Y（它们具有相同的 ID，修改一个就是修改另一个），那么下次我加载数据时应该是真的（同时程序的另一个会话已经停止）。

我知道一个解决方案：pickle 模块会跟踪引用，并且会记住我的 X 和 Y 列表完全相同（不仅是它们的内容，还有它们的引用）。

不过，使用 pickle 的问题在于，如果您将所有数据转储到单个文件中，它就可以工作。如果您有大量数据，这并不是很聪明。

你知道解决这个问题的另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:58:00.347

最简单的做法可能是将您希望保存的所有状态包装在字典中（可能以变量名或其他唯一但可预测的标识符作为键），然后腌制和解封该字典。字典中的对象将根据需要在彼此之间共享引用：

```
>>> class X(object):
...     # just some object to be pickled
...     pass
... 
>>> l1 = [X(), X(), X()]
>>> l2 = [l1[0], X(), l1[2]]
>>> state = {'l1': l1, 'l2': l2}
>>> saved = pickle.dumps(state)
>>> restored = pickle.loads(saved)
>>> restored['l1'][0] is restored['l2'][0]
True
>>> restored['l1'][1] is restored['l2'][1]
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:24:16.657

我建议使用`shelve`over pickle。它具有更高级别的功能，并且更易于使用。

[http://docs.python.org/library/shelve.html](http://docs.python.org/library/shelve.html)

如果您因为操作大量数据而遇到性能问题，您可以尝试其他库，例如 pyTables：

[http://www.pytables.org/moin](http://www.pytables.org/moin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:55:59.223

ZODB 被开发用于保存持久的 python 对象和所有引用。只需从 Persistent 继承您的类并玩得开心。[http://www.zodb.org/](http://www.zodb.org/)

# iphone - openURL 中的电话无法正常工作

> ID：10029809
> 
> 赞同：0
> 
> 时间：2012-04-05T13:46:39.713
> 
> 标签：iphone, openurl, tel

在我的应用程序中，我想拨打选定的号码。为此，我有以下代码

```
 +(void)makeCallToSelectedContact:(NSString*)phoneNo{

    NSMutableString *phoneNumber = [NSMutableString stringWithString:phoneNo];

    [phoneNumber replaceOccurrencesOfString:@" " 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];
    [phoneNumber replaceOccurrencesOfString:@"(" 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];
    [phoneNumber replaceOccurrencesOfString:@")" 
                                 withString:@"" 
                                    options:NSLiteralSearch 
                                      range:NSMakeRange(0, [phoneNumber length])];

    NSLog(@"phoneNumber => %@",phoneNumber);
    if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:+%@",phoneNumber]]]) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:+%@",phoneNumber]]];
    }
    else {
        NSLog(@"Unable to open");
        [self showAlertWithTitle:@"Alert" andMessage:@"This Device Doesn't Support Call Functionality"]; 
    }
} 
```

可以说，如果我没有像 +91 1234567890 这样的 ph 值，那么它将正确呼叫该号码。但是，如果我有没有 + 和国家代码的号码，例如 1234567890，那么它会将其转换为 +12 34567890，这是错误的电话号码。这是我的控制台日志

```
 2012-04-05 19:13:37.960 Search[22453:11003] phoneNumber => +911234567890

2012-04-05 19:13:47.928 Search[22453:11003] phoneNumber => 1234567890 
```

我错过了什么？任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:58:35.133

创建 URL 时添加“+” - 看：

```
if([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:+%@",phoneNumber]]]) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:+%@",phoneNumber]]];
} 
```

# actionscript-3 - 将 swf 加载到另一个 swf - 子 swf 阶段问题

> ID：10029814
> 
> 赞同：0
> 
> 时间：2012-04-05T13:46:59.410
> 
> 标签：actionscript-3, flash

所以我将电影 B 加载到电影 A 中 - 使用 Loader 类。一切正常。但在其中一台客户端机器上，子 swf 并未添加到显示列表中。相反，他在屏幕上得到了五个运行点。他看到了预加载器，但是当它完成加载时，应用程序崩溃并运行这些点。我猜它试图在舞台可用之前将子 swf 添加到舞台，尽管我添加了正确的脚本来检查子 swf 中的舞台

在子 swf 构造函数中：

```
if (stage) {
    init();
}else {
    addEventListener(Event.ADDED_TO_STAGE, init);
}

private function init(e:Event = null):void 
{
    removeEventListener(Event.ADDED_TO_STAGE, init);
    //...... the rest
} 
```

我怀疑客户端机器很慢，这可能是造成这种情况的原因。 ![在此处输入图像描述](../Images/3c140334e3040f7e86482e2ba05834e6.png)

它在其他任何地方都按预期工作 - mac 和 pc。

任何想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:53:47.900

首先，正如您所说，它在包括您的（mac）在内的多台机器上运行良好，我认为这可能是浏览器问题，因为您的客户端可能有不同的浏览器，或者是 flash 版本。

根据您提供给我的信息，我建议您跟进您的客户端运行它的平台，例如 Windows XP、Vista 或 7。与您的浏览器、资源管理器、Fire Fox 或 Chrome 进行交叉检查，仅列举最常见的。以及 Flash 文件如何嵌入到 HTML 中，这可能对不同的浏览器有影响

检查您的客户端 Flash 版本，他们可能只需要更新它。可能已损坏 此外，在您的问题中，您应该输入您的 SWF 所在的链接，然后我们都可以检查它，看看这个错误有多常见。

最后要注意的可能是您的代码，但您还没有发布您的加载器类以供社区或我查看。它的所有猜测让我们不知道你怎么走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:45:15.757

当加载的影片剪辑被编译为比客户端更新版本的闪存时，我已经看到这种情况发生。检查播放器的 Flash 版本和 SWF 以确保不是这种情况。

# plugins - Facebook评论插件消失了

> ID：10029815
> 
> 赞同：2
> 
> 时间：2012-04-05T13:46:59.923
> 
> 标签：plugins, facebook-comments

我在我的页面中安装了我的评论插件，它工作了两个星期，它突然停止工作，它完全从我的页面上消失了。我看不到它，我问过的 8 个人也看不到。我正在使用 XFBML 代码。希望我没有被禁止，我没有做错任何事......

这是网站：www.chrissyler.com/primeramision.html

有人可以帮忙吗？这种情况经常发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T23:58:53.337

你可以在这里看到：http: [//developers.facebook.com/tools/debug/og/echo ?q=http%3A%2F%2Fwww.chrissyler.com%2Fprimeramision.html](http://developers.facebook.com/tools/debug/og/echo?q=http%3A%2F%2Fwww.chrissyler.com%2Fprimeramision.html)

如果您使用的是现代浏览器，您可以在 javascript 控制台中看到一条（或两条）错误消息。

您缺少进入 HTML 正文的特殊 DIV。 `<div id="fb-root"></div>`.

# php - 为什么我的邮件表格不起作用？

> ID：10029822
> 
> 赞同：-2
> 
> 时间：2012-04-05T13:47:24.517
> 
> 标签：php

我正在尝试设置一个电子邮件表单以从我的网站发送反馈，这是表单：

```
 <form method='post' action='mailform.php'>
     <fieldset>
         <label for='message'><b>Reflection:<b></label><br/><br/>
         <p>Tell us what you thought of the Workshop, did you enjoy the tasks?, Could we have done anything different?</p>
         <textarea name='message' rows='15' cols='80'>
         </textarea><br/>
         <input type='submit' VALUE='Send' size='5' />
     </fieldset>
 </form> 
```

这是`mailform.php`

```
 <?php
      $message = $_REQUEST['message'] ;
      mail("address here", $message);
  ?> 
```

我不断收到与 ?> 位有关的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:52:12.090

[mail()](http://php.net/manual/pt_BR/function.mail.php)函数需要 3 个参数：

```
$targetEmail = 'whoever@email.com';
$subject = 'Sending e-mails from PHP is fun!';
$message = 'Do you agree?';

mail($targetEmail, $subject, $message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:52:35.067

[mail()](http://php.net/manual/en/function.mail.php)有三个重载。到，主题，消息。

尝试：

```
<?php
  $message = $_REQUEST['message'];
  mail("address here", "subject line", $message);
?> 
```

对于电子邮件，我必须建议您使用预制脚本或库。它更安全、更清洁，而且您不必担心标题或任何东西。

# python - 通过 Python 确定 JDK 安装目录

> ID：10029823
> 
> 赞同：0
> 
> 时间：2012-04-05T13:47:27.107
> 
> 标签：python, path, directory, java

我目前正在用 Python 编写一个程序，如果它在系统上，我想确定 JDK 安装目录的路径。有没有办法在 Python 中做到这一点？如果没有，有没有办法用 Java（或其他语言）来做？如果是后者，我可以从 Python 中打开一个子进程来获取它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:49:03.613

您可以检查 JAVA_HOME 或 JDK_HOME 系统变量。但不能保证没有安装其他 JDK。您必须更具体地说明您愿意实现的目标。

# c# - 网络驱动器在启动时不可用

> ID：10029825
> 
> 赞同：4
> 
> 时间：2012-04-05T13:47:35.173
> 
> 标签：c#, .net-4.0, network-drive, windows-xp-embedded, windows-networking

我有一个 C# 应用程序，它在启动时加载，并将数据记录到安装为 X 的网络驱动器：

当机器首次启动时，应用程序会抛出 X:\ 不可用的错误。如果我重新启动应用程序，同样的错误。

但是，如果我打开 Windows 资源管理器并双击浏览驱动器，我可以运行该应用程序，它会连接到 X: 就好了。

尽管已映射，网络驱动器是否不会在启动时自动初始化？有没有办法将它们设置为自动初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:19:46.997

我有完全相同的问题。我不知道是否有更好的方法，但我在访问映射驱动器之前将其添加到我的代码中。

```
Process mapDrive = new Process();
mapDrive.StartInfo.FileName = "net.exe";
mapDrive.StartInfo.Arguments = @"use c: \\server\share";
mapDrive.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
mapDrive.Start(); 
```

这样，无论驱动器在启动时是否可用，它都将始终可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:20:06.797

有关要检查的事项列表，请参阅[如何](https://stackoverflow.com/questions/133660/how-can-i-access-a-mapped-network-drive-with-system-io-directoryinfo)在此处访问映射的网络驱动器。我的猜测是您的用户不存在该驱动器，或者访问它时存在权限问题。要检查的另一项是[您调用 Impersonate 的顺序](http://www.daniweb.com/software-development/csharp/threads/159290/getting-mapped-drives-list)，假设您正在这样做，也就是说。

根据[无法从 Windows 服务访问映射驱动器上的文件](https://stackoverflow.com/questions/3098486/cannot-access-files-on-drive-mapped-network-share-from-a-windows-service)，您根本不应该这样做。请参阅已接受答案中提供的 Microsoft 链接。

# android - 如何使用 TimerTask 运行线程？

> ID：10029831
> 
> 赞同：24
> 
> 时间：2012-04-05T13:47:51.793
> 
> 标签：android, multithreading, timer, timertask

我正在努力寻找 Android 上 TimerTask 函数的文档。我需要使用 TimerTask 每隔一段时间运行一个线程，但不知道如何去做。任何建议或示例将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-05T14:08:07.423

我已经实现了这样的东西，它工作正常：

```
 private Timer mTimer1;
    private TimerTask mTt1;
    private Handler mTimerHandler = new Handler();

    private void stopTimer(){
        if(mTimer1 != null){
            mTimer1.cancel();
            mTimer1.purge();
        }
    }

    private void startTimer(){
        mTimer1 = new Timer();
        mTt1 = new TimerTask() {
            public void run() {
                mTimerHandler.post(new Runnable() {
                    public void run(){
                        //TODO
                    }
                });
            }
        };

        mTimer1.schedule(mTt1, 1, 5000);
    } 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-04-05T13:52:28.093

您使用 a ，当您使用任何-methods[`Timer`](http://developer.android.com/reference/java/util/Timer.html)安排 a 时，它会自动为您创建一个新线程。`TimerTask``schedule`

例子：

```
Timer t = new Timer();
t.schedule(myTimerTask, 1000L); 
```

这将创建一个 Timer`myTimerTask`在属于该 Timer 的线程中运行，每秒一次。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-11-25T06:08:47.157

这是计时器任务的完美示例。

```
Timer timerObj = new Timer();
TimerTask timerTaskObj = new TimerTask() {
    public void run() {
       //perform your action here
    }
};
timerObj.schedule(timerTaskObj, 0, 15000); 
```

# c# - fancyBox 和 aspx c# 集成

> ID：10029836
> 
> 赞同：1
> 
> 时间：2012-04-05T13:48:07.513
> 
> 标签：c#, jquery, asp.net, fancybox

试图了解如何将 fancyBox 与 aspx c# 网站集成。例如这段代码在哪里：

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script> 
```

Site.master 页面？还是每个单独的 .aspx 文件？

这个怎么样：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script> 
```

我假设这在 html 部分：

```
<a class="fancybox" rel="group" href="big_image_2.jpg"><img src="small_image_2.jpg" alt="" /></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:49:28.337

你可以把它放在Master页面上一次，如果页面上没有任何fancybox类也没有问题。

所有脚本代码，在母版页上，html 代码可以在任何地方（母版或其他使用母版的页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:52:52.837

将其`<head>`放在母版页上的标记之间。

```
<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script> 
```

我会把它放在你的页面上

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script> 
```

然后是您需要的链接和图像等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:17:43.627

当您下载了fancybox 后，它附带了一堆示例，请右键单击.html 页面并查看源代码，以便您更轻松地使用它们。

这是 给你的[演示](http://jsfiddle.net/B36Ap/)

# php - 使用 php 调整图像大小

> ID：10029838
> 
> 赞同：3
> 
> 时间：2012-04-05T13:48:09.983
> 
> 标签：php, image, resize

```
function resize($originalImage){

          list($width, $height) = getimagesize($originalImage);
          $newName=basename($originalImage);
          $imageResized = imagecreatetruecolor(128, 128);
          $imageTmp     = imagecreatefromjpeg ($originalImage);
          imagecopyresampled($imageResized, $imageTmp, 0, 0, 0, 0, 128, 128, $width, $height);

          imagejpeg($imageResized, "resizedImg/$newName",100);
          imageDestroy($imageResized);

} 
```

该脚本返回具有正确名称的图像，但它只是黑色的？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:08:50.660

如果您在调整图像大小时遇到​​问题，请使用此代码。根据需要进行修改。

```
function resizeImage($file){

         define ('MAX_WIDTH', 1500);//max image width               
         define ('MAX_HEIGHT', 1500);//max image height 
         define ('MAX_FILE_SIZE', 10485760);

         //iamge save path
         $path = 'storeResize/';  

        //size of the resize image 
         $new_width = 128; 
         $new_height = 128;    

        //name of the new image           
        $nameOfFile = 'resize_'.$new_width.'x'.$new_height.'_'.basename($file['name']);       

        $image_type = $file['type'];
        $image_size = $file['size'];
        $image_error = $file['error'];
        $image_file = $file['tmp_name'];
        $image_name = $file['name'];        

        $image_info = getimagesize($image_file);

        //check image type 
        if ($image_info['mime'] == 'image/jpeg' or $image_info['mime'] == 'image/jpg'){    
        }
        else if ($image_info['mime'] == 'image/png'){    
        }
        else if ($image_info['mime'] == 'image/gif'){    
        }
        else{            
            //set error invalid file type
        }

        if ($image_error){
            //set error image upload error
        }

        if ( $image_size > MAX_FILE_SIZE ){
            //set error image size invalid
        }

        switch ($image_info['mime']) {
            case 'image/jpg': //This isn't a valid mime type so we should probably remove it
            case 'image/jpeg':
            $image = imagecreatefromjpeg ($image_file);
            break;
            case 'image/png':
            $image = imagecreatefrompng ($image_file);
            break;
            case 'image/gif':
            $image = imagecreatefromgif ($image_file);
            break;
        }    

        if ($new_width == 0 && $new_height == 0) {
            $new_width = 100;
            $new_height = 100;
        }

        // ensure size limits can not be abused
        $new_width = min ($new_width, MAX_WIDTH);
        $new_height = min ($new_height, MAX_HEIGHT);

        //get original image h/w
        $width = imagesx ($image);
        $height = imagesy ($image);

        //$align = 'b';
        $zoom_crop = 1;
        $origin_x = 0;
        $origin_y = 0;
        //TODO setting Memory

        // generate new w/h if not provided
        if ($new_width && !$new_height) {
            $new_height = floor ($height * ($new_width / $width));
        } else if ($new_height && !$new_width) {
            $new_width = floor ($width * ($new_height / $height));
        }

        // scale down and add borders
    if ($zoom_crop == 3) {

         $final_height = $height * ($new_width / $width);

         if ($final_height > $new_height) {
            $new_width = $width * ($new_height / $height);
         } else {
            $new_height = $final_height;
         }

    }

        // create a new true color image
        $canvas = imagecreatetruecolor ($new_width, $new_height);
        imagealphablending ($canvas, false);

        if (strlen ($canvas_color) < 6) {
            $canvas_color = 'ffffff';       
        }

        $canvas_color_R = hexdec (substr ($canvas_color, 0, 2));
        $canvas_color_G = hexdec (substr ($canvas_color, 2, 2));
        $canvas_color_B = hexdec (substr ($canvas_color, 2, 2));

        // Create a new transparent color for image
        $color = imagecolorallocatealpha ($canvas, $canvas_color_R, $canvas_color_G, $canvas_color_B, 127);

        // Completely fill the background of the new image with allocated color.
        imagefill ($canvas, 0, 0, $color);

        // scale down and add borders
    if ($zoom_crop == 2) {

            $final_height = $height * ($new_width / $width);

        if ($final_height > $new_height) {
            $origin_x = $new_width / 2;
            $new_width = $width * ($new_height / $height);
            $origin_x = round ($origin_x - ($new_width / 2));
            } else {

            $origin_y = $new_height / 2;
            $new_height = $final_height;
            $origin_y = round ($origin_y - ($new_height / 2));

        }

    }

        // Restore transparency blending
        imagesavealpha ($canvas, true);

        if ($zoom_crop > 0) {

            $src_x = $src_y = 0;
            $src_w = $width;
            $src_h = $height;

            $cmp_x = $width / $new_width;
            $cmp_y = $height / $new_height;

            // calculate x or y coordinate and width or height of source
            if ($cmp_x > $cmp_y) {
        $src_w = round ($width / $cmp_x * $cmp_y);
        $src_x = round (($width - ($width / $cmp_x * $cmp_y)) / 2);
            } else if ($cmp_y > $cmp_x) {
        $src_h = round ($height / $cmp_y * $cmp_x);
        $src_y = round (($height - ($height / $cmp_y * $cmp_x)) / 2);
            }

            // positional cropping!
        if ($align) {
            if (strpos ($align, 't') !== false) {
                $src_y = 0;
            }
                        if (strpos ($align, 'b') !== false) {
                                $src_y = $height - $src_h;
                        }
                        if (strpos ($align, 'l') !== false) {
                $src_x = 0;
            }
            if (strpos ($align, 'r') !== false) {
                $src_x = $width - $src_w;
            }
        }

            // positional cropping!
            imagecopyresampled ($canvas, $image, $origin_x, $origin_y, $src_x, $src_y, $new_width, $new_height, $src_w, $src_h);

         } else {       
        imagecopyresampled ($canvas, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
    }
        //Straight from Wordpress core code. Reduces filesize by up to 70% for PNG's
        if ( (IMAGETYPE_PNG == $image_info[2] || IMAGETYPE_GIF == $image_info[2]) && function_exists('imageistruecolor') && !imageistruecolor( $image ) && imagecolortransparent( $image ) > 0 ){
            imagetruecolortopalette( $canvas, false, imagecolorstotal( $image ) );
    }
        $quality = 100;            
        $nameOfFile = 'resize_'.$new_width.'x'.$new_height.'_'.basename($file['name']);       

    if (preg_match('/^image\/(?:jpg|jpeg)$/i', $image_info['mime'])){                       
        imagejpeg($canvas, $path.$nameOfFile, $quality);  

    } else if (preg_match('/^image\/png$/i', $image_info['mime'])){                         
        imagepng($canvas, $path.$nameOfFile, floor($quality * 0.09)); 

    } else if (preg_match('/^image\/gif$/i', $image_info['mime'])){               
        imagegif($canvas, $path.$nameOfFile); 

    }
} 
```

# html - 为子元素中的多种类型有效地组合 CSS 选择器

> ID：10029842
> 
> 赞同：2
> 
> 时间：2012-04-05T13:48:16.030
> 
> 标签：html, css, css-selectors

如果我想`<input type="submit"/>`在`<div class="control-group control-connected">`in 中设置所有样式`<form>`，我可以应用这种类型的选择器：

```
form div.control-group.control-connected input[type=submit]{} 
```

但是，假设我也想为`<button>`这些类型的 div 中的元素设置样式。

有没有比这样做更有效的方法？

```
form div.control-group.control-connected input[type=submit],form div.control-group.control-connected button 
```

该实现似乎相当冗长，而且也是多余的，我不应该能够做这样的事情吗？

```
form div.control-group.control-connected (input[type=submit], button) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:51:09.897

更短的方法是对具有共同风格的元素使用类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:51:14.810

如果您想使用更紧凑的语法，我怀疑您必须使用[LESS 。](http://lesscss.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:51:24.807

检查这个

[http://sass-lang.com/](http://sass-lang.com/)

sass lang 会清理你的 CSS

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:52:40.200

如果您需要特异性，请使用您提到的符号。目前没有广泛支持原生 CSS mixin 来实现你想要的。

如果您对使用 CSS 提高开发人员的生产力感兴趣，我建议您尝试一下 SASS： [http://sass-lang.com/](http://sass-lang.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T13:55:41.533

在我们获得对 CSS 嵌套的支持之前，您要么必须像这样写出来，要么使用某种预处理器，例如[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)，以允许您编写更易于阅读的样式表。

***注意：** LESS、SASS 和其他变体要求您在在网站上显示之前从输入格式（LESS、SASS 等）转换为 CSS。有自动执行此操作的方法（服务器端和客户端）。*

## LESS 中的示例

```
form div.control-group.control-connected {
 input[type=submit], button {
  /* Styles here */
 }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T13:55:48.193

在原生 CSS 中，解决方案是：

1：给元素添加一个ID属性`div.control-group.control-connected`。

```
#control-connected input[type=submit],
#control-connected button {
    /* css */
} 
```

2：给元素添加一个通用的类名。

```
.fancy-style {
    /* css */
} 
```

非本地 CSS 解决方案将是[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)。

# android - 从网上获取图像并将其保存到手机内存中？

> ID：10029843
> 
> 赞同：1
> 
> 时间：2012-04-05T13:48:19.687
> 
> 标签：android, url, android-file, android-image

我需要从网上获取图像并将其存储在手机中以备后用。

我试过这个：

```
 public Drawable grabImageFromUrl(String url) throws Exception
    {
     return Drawable.createFromStream((InputStream)new URL(url).getContent(), "src");
    } 
```

所以这是我从 Url 获取图像的函数，我只需要一个过程来获取返回的可绘制对象并保存。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:01:22.223

根据[此处](https://stackoverflow.com/questions/3296850/android-how-to-store-images-from-url-save-it-in-sd-card)，您实际上可以使用不同的方法下载图像。在保存之前将其存储为可绘制对象是绝对必要的吗？因为我认为您可以先保存它，然后在需要时打开它。

```
URL url = new URL ("file://some/path/anImage.png");
InputStream input = url.openStream();
try {
    //The sdcard directory e.g. '/sdcard' can be used directly, or 
    //more safely abstracted with getExternalStorageDirectory()
    String storagePath = Environment.getExternalStorageDirectory();
    OutputStream output = new FileOutputStream (storagePath + "/myImage.png");
    try {
        byte[] buffer = new byte[aReasonableSize];
        int bytesRead = 0;
        while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
            output.write(buffer, 0, bytesRead);
        }
    } finally {
        output.close();
    }
} finally {
    input.close();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:05:41.987

在这里看到这个完整的例子

[http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)

# java - 停止 JPopupMenu 窃取焦点

> ID：10029846
> 
> 赞同：11
> 
> 时间：2012-04-05T13:48:27.363
> 
> 标签：java, swing, focus, jpopupmenu

我有一个`JTextField`我希望建议结果与用户输入相匹配的结果。我将这些建议显示`JList`在`JPopupMenu`.

**但是**，当通过编程方式打开弹出菜单时[`show(Component invoker, int x, int y)`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPopupMenu.html#show%28java.awt.Component,%20int,%20int%29)，焦点从`JTextField`.

奇怪的是，如果我`setVisible(true)`改为调用，焦点并没有被盗；但是`JPopupMenu`没有附加到任何面板上，并且当在盒子打开时最小化应用程序时，它会停留在窗口上。

我也尝试将焦点重置为`JTextField`using `requestFocus()`，但随后我必须恢复插入符号的位置 using `SwingUtilities.invokeLater()`，并且*稍后的调用*给用户一点余地来处理现有内容/覆盖它/或做其他不可预测的事情。

我得到的代码实际上是：

```
JTextField field = new JTextField();
JPopupMenu menu = new JPopupMenu();

field.addKeyListener(new KeyAdapter() {
    public void keyTyped(KeyEvent e) {
        JList list = getAListOfResults();

        menu.add(list);
        menu.show(field, 0, field.getHeight());
    }
}); 
```

任何人都可以建议最好的途径来以`JPopupMenu`编程方式显示，同时保持对 的关注`JTextField`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T11:38:20.800

技术答案是将弹出窗口的可聚焦属性设置为 false：

```
popup.setFocusable(false); 
```

这意味着 textField 必须接管通常由列表本身处理的所有键盘和鼠标触发的操作，例如：

```
final JList list = new JList(Locale.getAvailableLocales());
final JPopupMenu popup = new JPopupMenu();
popup.add(new JScrollPane(list));
popup.setFocusable(false);
final JTextField field = new JTextField(20);
Action down = new AbstractAction("nextElement") {

    @Override
    public void actionPerformed(ActionEvent e) {
       int next = Math.min(list.getSelectedIndex() + 1,
               list.getModel().getSize() - 1);
       list.setSelectedIndex(next);
       list.ensureIndexIsVisible(next);
    }
};
field.getActionMap().put("nextElement", down);
field.getInputMap().put(
        KeyStroke.getKeyStroke("DOWN"), "nextElement"); 
```

由于您的上下文与 JComboBox 非常相似，您可能会考虑查看 BasicComboBoxUI 和 BasicComboPopup 的源代码。

**编辑**

只是为了好玩，以下*不是*回答焦点问题 :-) 相反，它演示了如何使用可排序/可过滤的 JXList 仅显示下拉列表中与键入的文本相对应的选项（此处带有开头规则）

```
// instantiate a sortable JXList
final JXList list = new JXList(Locale.getAvailableLocales(), true);
list.setSortOrder(SortOrder.ASCENDING);

final JPopupMenu popup = new JPopupMenu();
popup.add(new JScrollPane(list));
popup.setFocusable(false);
final JTextField field = new JTextField(20);

// instantiate a PatternModel to map text --> pattern 
final PatternModel model = new PatternModel();
model.setMatchRule(PatternModel.MATCH_RULE_STARTSWITH);
// listener which to update the list's RowFilter on changes to the model's pattern property  
PropertyChangeListener modelListener = new PropertyChangeListener() {

    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        if ("pattern".equals(evt.getPropertyName())) {
            updateFilter((Pattern) evt.getNewValue());
        }
    }

    private void updateFilter(Pattern newValue) {
        RowFilter<Object, Integer> filter = null;
        if (newValue != null) {
            filter = RowFilters.regexFilter(newValue);
        }
        list.setRowFilter(filter);
    }
};
model.addPropertyChangeListener(modelListener);

// DocumentListener to update the model's rawtext property on changes to the field
DocumentListener documentListener = new DocumentListener() {

    @Override
    public void removeUpdate(DocumentEvent e) {
        updateAfterDocumentChange();
    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        updateAfterDocumentChange();
    }

    private void updateAfterDocumentChange() {
        if (!popup.isVisible()) {
            popup.show(field, 0, field.getHeight());
        } 
        model.setRawText(field.getText());
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
    }
};
field.getDocument().addDocumentListener(documentListener); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T17:34:31.327

它对我来说是直截了当的。添加以下内容

`field.requestFocus();`

后

```
 menu.add(list);
 menu.show(field, 0, field.getHeight()); 
```

当然，您必须根据`JTextField`.

IE;

```
 menu.show(field, field.getX(), field.getY()+field.getHeight());
 menu.setVisible(true);
 field.requestFocus(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:39:07.327

您可以查看 JXSearchField，它是[xswingx的一部分](http://code.google.com/p/xswingx/ "xswingx")

# xcode - 上传项目成功，但在 iTunes 连接中仍显示“等待上传”

> ID：10029847
> 
> 赞同：1
> 
> 时间：2012-04-05T13:48:27.533
> 
> 标签：xcode, loader

我的 xcode 版本是 4.3。我成功上传了我的项目，Organizer-Archives 说：“xxx”中没有发现问题。“xxx”已通过验证，可提交至 App Store。但在 iTunes Connect 中，项目状态仍然显示“等待上传”。我重新上传了，但是状态还是显示“等待上传”。

这是 Apple 的服务器或应用程序加载器的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:42:27.250

如果您的 xcode 由于任何原因停止，则在将应用程序上传到应用程序商店时。应用程序的 iTunes 商店状态是 - 上传接收，但在 xcode 管理器中存档的状态未提交。那么你可能会遇到任何问题。所以请注意

1- 应用商店上的状态是 - 上传已收到，2- 在组织中 - 已提交。

那么就没有问题了。

# c++ - C++ 通过引用传递 - 可以这样做吗？

> ID：10029849
> 
> 赞同：1
> 
> 时间：2012-04-05T13:48:29.577
> 
> 标签：c++, function, reference

我有几个导致编译错误的文件，可以执行以下操作吗？

header1.h

```
class Class1{
public:
void function1(Class1 &);
}; 
```

header2.h

```
class Class2{
public:
void function2(Class2 &, Class1 &);
}; 
```

cpp2.cpp

```
#include "header2.h"
void Class2::function2(Class2 & my2Class, Class1 & my1Class){}; 
```

主文件

```
#include "header1.h"
#include "header2.h"

// functions 
```

该错误表明 header2.h 对 Class1 作为一种类型一无所知。如何在此头文件中声明 Class1 类型的对象，而不使用包含或不将两个类放在同一个文件中（它们是完全独立的，应该只满足在 main 中调用的内部函数）？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T13:49:22.783

您可以使用前向声明：

```
class Class1; //forward declare Class1
class Class2{
public:
void function2(Class2 &, Class1 &);
}; 
```

将类型的参数传递给函数不需要完全定义类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:56:54.557

让每个标头都包含需要相关信息的其他标头，但带有预处理定义以避免循环引用或重复声明。例如 header2 应该是

```
#ifndef FUNCS_H

#define FUNCS_H

#include "header1.h"

    class Class2{
    public:
    void function2(Class2 &, Class1 &);
    };
#endif 
```

这就是我在 C++ 中做所有标题的方式

# package - d2：默认包模块（如 __init__.py，但用于 D）

> ID：10029852
> 
> 赞同：1
> 
> 时间：2012-04-05T13:48:43.550
> 
> 标签：package, d

考虑一下我有一个带有复杂树`private`或`package`模块的大型库包——我们称之为`funnylib`. 最终用户不希望直接触摸内部模块（如`funnylib.foo`等`funnylib.bar`），所以我想提供外部接口 - 像这样：

*有趣的lib.d：*

```
public import funnylib.foo;
public import funnylib.bar;
public import funnylib.baz; 
```

像最终用户一样`import funnylib`被导入。问题是 D 不允许同时拥有`funnylib.d`和`funnylib/`。

**D中是否有类似“默认包模块”的东西，就像`__init__.py`在Python中一样？如果不是，那么进行上述设计的正确方法是什么？**

**更新1 ：** 我考虑过将内部模块移动到类似的包`funnylib_private`中，这样`funnylib`可以很好地导入，但这会降低保护成本（非常不希望），因为funnylib将不再访问`package`受保护的符号，并且会导致文件布局不愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:23:30.363

使用记录在案的公共导入创建一个简单的`all`模块以导入库

```
module funnylib.all;

public import funnylib.foo;
public import funnylib.bar;
public import funnylib.baz; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:17:31.157

您不能拥有同名的模块和包。因此，例如，Phobos 不能有 a`std/algorithm.d`和 a `std/algorithm/sorting.d`。`std/algorithm.d`并且`std/algorithm`会发生冲突。典型的做法是[棘轮怪胎描述](https://stackoverflow.com/a/10030449/160887)并使用一个名为`all`的模块，该模块公开导入该包中的所有模块。但是如果你想隐藏你正在使用子模块的事实，那么你可以简单地做类似的事情

```
funnylib.d
_funnylib/foo.d
_funnylib/bar.d
_funnylib/baz.d 
```

并且没有`_funnylib`在任何地方记录，但这不适用于 ddoc，因为它会为每个`_funnylib`模块生成文档，并且它会生成的最多的`funnylib.d`是模块文档，因为它没有任何要记录的符号。模块系统的设计理念不是您将要像您尝试做的那样隐藏模块。

现在，目前*正在*讨论一个[提案，](http://forum.dlang.org/thread/jl4gvo$2d6j$1@digitalmars.com)以便在模块变得太大时将其干净地拆分为一个包（例如，当您拆分`std.algorithm`为`std.algorithm.search`,`std.algorithm.sorting`等时，明确使用的代码`std.algorithm.countUntil`不会中断，即使现在是`std.algorithm.search.countUntil`）。一旦解决了，你就可以使用它，但是文档仍然会为每个子模块完成，而不是你的超级模块。它实际上是一种转换代码的方法，而不是试图隐藏您正在拆分模块的事实。它基本上相当于使用一个`all`模块，但在包曾经是单个模块的情况下，它带有一些语义糖以避免破坏代码。

# c# - 使用 dllImport 在 C#.net 中调用 C++ Dll

> ID：10029857
> 
> 赞同：-1
> 
> 时间：2012-04-05T13:49:09.680
> 
> 标签：c#, c++, pinvoke, call, dllimport

请找到以下示例

```
void ExitLibrary(); // C++ function 
```

我可以像下面那样转换为 C#

```
[DllImport("VisualFOD.dll", CharSet = CharSet.Ansi)]
public static extern void ExitLibrary(); 
```

此方法将用于启动实时捕获

```
bool StartLive(DShowLib::Grabber* f_Grabber, HDC f_hHdc, RECT f_WindowRect); 
```

此方法将用于启动实时捕获

```
[DllImport("TIS_UDSHL09_vc71.dll", CharSet = CharSet.Ansi)]
public static extern bool StartLive(IntPtr f_Grabber, IntPtr f_hHdc, Rectangle f_WindowRect); 
```

我无法访问第二条语句 C++ 函数中提到的实际类 DShowLib::Grabber。

您知道如何声明和获取库类名吗？

此 dll 不是作为对 C# 环境的引用的 COM/.Net dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T06:27:53.153

如果我正确理解您的问题，如果 DShowLib::Grabber 类驻留在 DLL 中（并由 C++ 头文件访问），您将无法直接在 C# 中访问它。

有两种解决方案。首先，可以将原生的DLL类封装在C++/CLI类中，这样就可以包含原生的C++头文件；其次，您可以编写自己的 DLL，您可以在其中展平 DLL 类并 P/Invoke 您的展平方法。

扁平化是指：

```
class C
{
    void M(int i, float j);
} 
```

方法 M 必须像这样调用：

```
__declspec(dllexport) BOOL __stdcall C_M(C * instance, int i, float j)
{
    if (instance == nullptr)
        return FALSE;

    instance->M(i, j);

    return TRUE;
} 
```

但是，请考虑对您的问题的评论。如果您可以为您感兴趣的库使用现成的包装器，您应该这样做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:52:52.980

有很多尝试使 C#/C++ 互操作更容易，但到目前为止，来自 Microsoft 的托管 C++ 可能是最好的（尽管它不是 C++ 标准的一部分）。

另一个有希望的选择是 Mono 的 CXI，

[http://tirania.org/blog/archive/2011/Dec-19.html](http://tirania.org/blog/archive/2011/Dec-19.html)

它提供了一种符合标准的方法。

它仍然需要一些黑客攻击（可能是 Google Summer of Code 2012），但它最终应该支持 Visual C++ 和 Windows。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T05:19:42.073

是的。您可以通过 PInvoke 直接从您自己的 C# 代码中实例化和访问 C++ 类对象，但它非常复杂并且涉及大量工作，请到这里阅读 C++ PInvoke Interop SDK 可以做什么。

[http://www.xinterop.com/index.php/2013/04/13/introduction-to-c-pinvoke-interop-sdk/](http://www.xinterop.com/index.php/2013/04/13/introduction-to-c-pinvoke-interop-sdk/)

（虽然它是一个商业软件。我是作者）

# android - 如何保存活动的ui状态

> ID：10029865
> 
> 赞同：0
> 
> 时间：2012-04-05T13:49:29.547
> 
> 标签：android, state, lifecycle, android-activity

我被这个问题困住了。让我解释一下这个问题。

为简单起见，我有两个活动，让我们将第一个活动命名**为父**活动，将第二个活动命名为**子**活动。

在父活动中，我有一些项目的列表视图，在列表视图下面我有一个价格过滤器按钮来根据价格过滤列表。当用户单击价格过滤器按钮时，子活动开始。

在儿童活动中，我提供了一个搜索栏来设置价格。在子活动中，我在搜索栏下方有两个按钮取消和过滤。

现在我有三种不同的情况：

1.  在第一种情况下**：**用户单击父活动中的价格过滤器按钮，然后子活动开始。在子活动中，用户调整搜索栏（**让我们说这个子活动的状态为 STATE1**）然后单击**过滤器**按钮，然后用户将进入父活动和如果用户再次单击价格过滤器按钮，现在将看到过滤器结果，而不是子活动应该从用户离开的地方开始意味着它应该显示**STATE1** ..（我可以通过在两个活动中设置 FLAG_ACTIVITY_REORDER_TO_FRONT 来做到这一点）

2.  在第二种情况下**：**用户首先使用第一种情况，现在单击父活动中的价格过滤器按钮，然后子活动开始。在子活动中，用户调整搜索栏（**让我们说这个子活动的状态为 STATE2**）但现在用户不想过滤列表，然后单击**取消**按钮，如果用户再次单击价格过滤器按钮，则用户现在只需返回父活动，而不是子活动应该显示**STATE1**。但它显示的是**STATE2**

3.  在第三种情况下**：**用户首先使用第一种情况，现在单击父活动中的价格过滤器按钮，然后子活动开始。在子活动中，用户调整搜索栏（**让我们说这个子活动的状态为 STATE3**）但现在用户不想过滤列表，然后单击**android 手机后退**按钮，然后用户现在只需返回父活动，如果用户再次单击价格过滤器按钮，则子活动应该显示**STATE1**，但这里子活动既不显示**STATE1**也不显示**STATE2**，因为它正在重新创建.

简而言之，仅在第一种情况下，我想保存子活动的状态并希望在每种情况下都显示这种状态。（我尽力让您了解我的问题）

我想明确我需要保存搜索栏状态。我将通过某种方式携带 seekbar 值。

为了完成这项任务，我已经阅读了活动生命周期五次，但通过这种方式，我只能存储一些所需的值，我无法存储搜索栏状态。

伙计们没有任何帮助，所以请帮助我。

提前致谢

兰詹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:57:54.223

为什么你不能使用 seekbar 获得值`Seekbar.getProgress()`？

# java - 具有复杂自定义函数性能问题的 Frange 的 Solr 查询

> ID：10029867
> 
> 赞同：1
> 
> 时间：2012-04-05T13:49:32.517
> 
> 标签：java, solr, solrj

我们正在进行一个 solr 查询，其中我们提供了一个自定义函数（这非常复杂）并按该函数的值对结果进行排序。查询所用的时间在 200 到 400 毫秒的范围内。在此之后我们添加了

`fq:{!frange l=40 u=100}$complexCustomFunction`

所以整个复杂的查询看起来像

`solr/select?customFunc=complexFunction(querySpecificValue1,querySpecificValue2)&sort_by=$customFunc&fq={!frange l=40 u=100}$customFunc...`

仅添加此 frange fq 后，查询所需的时间增加了十倍，因此大约需要 4 秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:46:46.373

我们只是将 frange 从 fq 移动到 q ，这将查询所用的时间从 200 毫秒更改为 400 毫秒。结果查询现在看起来像这样：

`customFunc=complexFunction(querySpecificValue1,querySpecificValue2)&sort_by=$customFunc&q={!frange l=40 u=100}$customFunc...`

# visual-studio - Is there a Visual Studio Tool to show the assembly's object model?

> ID：10029870
> 
> 赞同：4
> 
> 时间：2012-04-05T13:49:35.840
> 
> 标签：visual-studio, visual-studio-2010, modeling

I don't want to deal with EF, but I'd like a visual, automatically updated or updateable representation of my assembly's object model, denoting relationships with other classes in the model, like the EF model but not related to persistence. It seems like this should exist, but the only things I can find are highly manual or assuming you want to persist all your objects. I definitely do not want to pay for something.

Is there something like that that I am missing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T05:57:57.890

I am pretty sure that the "View Class Diagram" option is available in all Visual Studio 2010 edtions. Here is another thread about it: [Visual Studio 2010 Professional: class diagram tool](https://stackoverflow.com/questions/3842444/visual-studio-2010-professional-class-diagram-tool)

Just check if you have it on your context menu.

Not that you will have to explicitly tell the tool to show associations such as aggregated classes, it will only show inheritance by default.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T05:02:31.277

The "Class Diagram" is what you are looking for. If this is only available in VS Ultimate, then you might be out of luck. It kind of makes sense though, because the ultimate version is supposed to have all of the "planning" tools (architecture explorer, and other UML features).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:44:56.737

There are less expensive solutions from modeling vendors, such as ModelMaker,

[http://www.modelmakertools.com/modelmaker/screenshots.html](http://www.modelmakertools.com/modelmaker/screenshots.html)

# bash - 将字符串参数从 bash 脚本传递到 matlab 文件的最接近方法是什么？

> ID：10029872
> 
> 赞同：6
> 
> 时间：2012-04-05T13:49:40.850
> 
> 标签：bash, matlab, parameters

我有 matlab 文件 matlab_param.m

```
function matlab_param(param1, param2)

disp(sprintf('param1 : %s', param1));
disp(sprintf('param2 : %s', param2)); 
```

我想要 bash 脚本 bash_param.sh 看起来像

```
#!/bin/bash
echo $1
echo $2
./matlab_param.m $1 $2 
```

我想运行这个 bashscirpt

```
./bash_param.sh hello world 
```

它会打印

```
hello
world
param1 : hello
param2 : world 
```

我用谷歌搜索了几个小时，找不到任何确切的解决方案。到目前为止我得到的最接近的是

```
matlab -nodesktop -nosplash -nodisplay -r "try, run ('./test_param.m'); end; quit" 
```

我需要对所有参数进行硬编码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:59:04.637

你试过了吗：

```
#!/bin/bash
echo $1
echo $2
matlab -nodesktop -nosplash -nodisplay -r "try, test_param('$1','$2'); end; quit" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:24:01.553

如果您希望能够将参数传递给 matlab 函数，我建议您创建一个简单的 shell 脚本：

```
matlab -nodisplay -r "try, test_param('$1','$2'); end; exit" 
```

然后你可以在unix中运行：

```
$ sh test_param.sh hello world 
```

不确定如何避免 MATLAB 标头输出以及是否将其传递给管道。

# php - PHP - 接受多个支付网关

> ID：10029880
> 
> 赞同：3
> 
> 时间：2012-04-05T13:50:19.663
> 
> 标签：php, paypal, e-commerce, payment-gateway, google-checkout

我正在创建一个网站，我将在其中销售单件商品，并希望能够通过 Paypal、Google Checkout 和亚马逊接受付款，但不想只为一件商品使用一些繁重的电子商务软件。

我正在寻找一个好的 PHP 解决方案，它可以轻松实现所有 3 个，例如 Django-Merchant for Django。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T15:25:09.697

如果您期待有关解决方案架构设计的建议，

首先，您需要创建一个包含所有网关必需的所有方法的接口

```
interface PaymentGateway {
   public function processPayment();
   public function authorize();
} 
```

然后为每个支付网关创建具体的类

```
public class GoogleCheckoutGateway extends PaymentGateway {
     public function processPayment() {
        //Code to process google checkout payment
     }
}

//Same like other payment gateways like paypal
public class PaypalCheckoutGateway extends PaymentGateway {
     public function processPayment() {
        //Code to process paypal payment
     }
} 
```

然后创建一个业务逻辑方法通过处理不同的网关来处理支付

```
public class PaymentProcessor {
     public function processPayment(string gateway) {
        //Create the respective object depending upon gateway
        $gateway = getGateway(type);
        $response = $gateway->processPayment();
     }
} 
```

此设计将帮助您稍后添加其他网关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:07:03.797

可预见的未来单品？这些第 3 方结帐替代方案中的每一个（只是区分术语*“网关”*，它在信用卡支付方面具有不同的含义）都提供了一个 API 和示例代码/SDK。

我认为查找它们是一种很好的做法，这样您就可以“第一手”了解每项工作的工作方式，这将进一步帮助您在需要一些软件包时继续前进 - 回复：您可以修改您的需求和/或知道如果/何时发生问题如何处理。

您*可能*还会发现，每个提供的任何“订单管理界面”都是您真正需要使用的（re: *single item*）——一个典型的被夹在*开发人员和企业主*之间的案例（知道你真正想做什么和/或完成）。

# java - 是否可以在 Java 中编写“foreach”函数？

> ID：10029881
> 
> 赞同：3
> 
> 时间：2012-04-05T13:50:20.023
> 
> 标签：java

在 PHP 中，可以做到`foreach($array as $key=>$value){//codes`. 是否可以在 Java 中创建一个函数来执行`foreach(arr,function(key,value){//codes});`？

我不太擅长Java。为了使函数工作，它必须接受所有数据类型。另外，我不确定回调函数是否可以在 Java 中使用。

PS“不可能”是一个有效的答案，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T13:52:11.063

是的你可以：

```
List<String> ls = new ArrayList();
ls.add("Hello");
ls.add("world");
//your foreach sentence
for(String s : ls) {
    System.out.println(s);
} 
```

这也适用于其他类。

更新

当您遍历列表（数组或链表）时，索引将是索引。您将需要使用替代整数来保存索引：

```
List<String> ls = new ArrayList();
ls.add("Hello");
ls.add("world");
//your foreach sentence
int index = 0;
for(String s : ls) {
    System.out.println("index: " + index);
    System.out.println(s);
    //put your logic here...
    //at the end, update the index manually
    index++;
} 
```

如果您需要遍历 Map （基于键，值的结构），那么您应该使用@LukasEder 描述的方法（改编他的代码）：

```
Map<K, V> array = new HashMap<K, V>();
for (Entry<K, V> entry : array.entrySet()) {
    // You have to explicitly call your callback. There is no "callback-syntax"
    // to the Java "foreach" loop
    System.out.println("key: " + entry.getKey());
    System.out.println("value: " + entry.getValue());
    //put your logic here...
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T14:16:47.640

其他答案已经解释了“增强的 for 循环”语法是如何工作的。这很可能就是你所需要的。

但我想解决您实际提出的问题：

> 是否可以在 Java 中创建一个函数来执行以下操作：

```
 foreach(arr,function(key,value){//codes}); 
```

如所写，这将是一个将另一个函数作为参数的函数（或方法）。这在当前定义的 Java 中是不可能的。Java 不允许将函数（或方法）视为一等对象。它们不能作为参数传递。您可以在（当前）Java 中获得的最接近的方法是创建这样的`Function`接口：

```
public interface Function {
   public void fun(Object arg1, Object arg2);
} 
```

并按如下方式使用它：

```
Object[] arr = ...
foreach (arr, new Function() {
    public void fun (Object key, Object value) {
        // do stuff
    }}); 
```

（我正在考虑一个事实，即 PHP 数组更像是 Java HashMap 而不是 Java 数组。这会影响你实现这种东西的方式......但这有损于我试图提出的要点。 )

在未来的某个时候，Java 将得到增强，以支持一流的函数/闭包/lambda 或类似的东西。有一段时间，该功能原计划用于 Java 7，但为了完成 Java 7，不得不推迟。

**更新**- 现在很明显， Java 8*将*支持 lambda 。这个新功能已在早期版本下载中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T13:53:01.747

由于 PHP 数组实际上是关联数组，因此最接近您的代码的是使用 Java `Map`：

```
Map<K, V> array = new HashMap<K, V>();
for (Entry<K, V> entry : array.entrySet()) {
  // You have to explicitly call your callback. There is no "callback-syntax"
  // to the Java "foreach" loop
  MyClass.myMethod(entry.getKey(), entry.getValue());
} 
```

将`<K>`and替换`<V>`为更具体的类型，例如`Map<String, String>`，或`Map<Integer, String>`等...

如果您使用的是真正的（索引）数组，则不能编写“foreach”循环来访问索引。您将不得不求助于索引循环：

```
// Using Java arrays
String[] array = { "a", "b", "c" };
for (int i = 0; i < array.length; i++) {
  MyClass.myMethod(i, array[i]);
}

// Using Java Lists
List<String> list = Arrays.asList("a", "b", "c");
for (int i = 0; i < list.size(); i++) {
  MyClass.myMethod(i, list.get(i));
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-05T13:52:02.223

Java中有一个foreach，例如：

```
List<String> list = new ArrayList<String>();
list.add("a");
list.add("b");
list.add("c");

for (String s : list) {
    System.out.println(s);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T13:53:35.233

是的，Java[有那个](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html). [`Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)它允许对数组和s进行迭代。

```
List<String> list = new ArrayList<>();
...
for(String s : list) { // since List<T> implements Iterable<T>.
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-05T14:06:30.873

是的。如果您正在迭代实现 Iterable 的数组或对象，则以下语法将起作用：

```
SomeType someValue=null;
for (someValue : setOfValues) {
   ...
} 
```

例如：

```
Map<String,String> colors=new HashMap<String,String>();
colors.put("r","red");
colors.put("g","green");
colors.put("b","blue");
for (String code : colors.keySet()) {
  process(code, colors.get(code));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-05T13:53:52.673

是的，只要您正在迭代的集合实现，您就可以`Iterable`。所以你可以有这样的东西：

```
Map<String, Object> map = new HashMap<String, Object>();
...
for (String str : map.keySet())
{
     System.out.println(str);
} 
```

那应该创建一个`HashMap`键值集合。如果您只想遍历普通集合，例如`Lists`and `Arrays`，您可以执行以下操作：

```
List<String> strings = new ArrayList<String>();
....
for(String str : strings)
{
     System.out.println(str);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-05T13:54:14.153

它被称为**“增强的 for 循环”**

截屏：[http ://www.youtube.com/watch?v=w41D0V-BnKQ](http://www.youtube.com/watch?v=w41D0V-BnKQ)

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

[http://www.java-tips.org/java-se-tips/java.lang/the-enhanced-for-loop.html](http://www.java-tips.org/java-se-tips/java.lang/the-enhanced-for-loop.html)

# php - 如何将对象转换回数组？

> ID：10029883
> 
> 赞同：1
> 
> 时间：2012-04-05T13:50:23.047
> 
> 标签：php, php-5.3, stdclass

在这个[问题](https://stackoverflow.com/questions/10013143/how-to-access-the-property-value-of-an-array-which-has-been-converted-into-an-o)之后，我使用这个函数将数组转换为对象，

```
function array_to_object($array)
{
    if(!is_array($array)) {
        return $array;
    }

    $object = new stdClass();
    foreach($array as $key => $value)
    {
        $key = (string) $key ;
        $object->$key = is_array($value) ? array_to_object($value) : $value;
    }
    return $object;
} 
```

所以，

```
$obj =  array('qualitypoint', 'technologies', 'India'); 
```

结果，

```
stdClass Object
(
    [0] => qualitypoint
    [1] => technologies
    [2] => India
) 
```

但是现在我需要将对象转换回数组，这样我才能得到这个结果，

```
Array
(
    [0] => qualitypoint
    [1] => technologies
    [2] => India
) 
```

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:51:50.933

## 什么会很好，但不会真正起作用

通常一个好的开始方法是简单地[将对象转换为数组](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)：

```
$arr = (array) $obj; 
```

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：**整数属性是不可访问的**；私有变量在变量名前面加上类名；受保护的变量在变量名前有一个“*”。这些前置值在两边都有空字节。

不幸的是，这对您不起作用，因为属性具有“整数”名称。

* * *

上面的一个变体是[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)：

```
$arr = get_object_vars($obj); 
```

这里重要的一点是`get_object_vars`尊重可见性，这意味着它**只会**为您提供公共属性，`$obj`因为您不是从`$obj`.

但是，这在这种情况下也不起作用：`get_object_vars`也不会为您提供整数命名的属性。

## 什么会起作用（但不好）

[迭代一个对象](http://php.net/manual/en/language.oop5.iterations.php)也会给你它具有的*可见*属性（在这种情况下只有`public`属性），但它也会处理具有整数名称的属性：

```
$arr = array();
foreach($obj as $k => $v) {
    $arr[$k] = $v;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:01:14.933

实现这一目标的另一种方法是：

```
$array = array(json_decode(json_encode($object), true)); 
```

当我测试时，我对不可访问的属性没有任何问题。

**更新：**它也适用于

```
$object = new stdClass();
$object->{0} = 'qualitypoint';
$object->{1} = 'technologies';
$object->{2} = 'India'; 
```

# c# - 获得分周来获取月份列表的方法

> ID：10029884
> 
> 赞同：4
> 
> 时间：2012-04-05T13:50:32.143
> 
> 标签：c#, asp.net, linq

我正在使用这种方法从我的数据中获取周开始列表。但是，在月底，一周可能是两个月之间的间隔，但是我很难使用我的方法来检查我的方法中的间隔周以获取月份

**获取月份列表的方法**

```
var monthlist = data.Select(x => new { wkdate =  x.WKENDstart }).OrderBy(y => y.wkdate).Select(m => new
        {
            monthname = m.wkdate.ToString("MMM yyyy", CultureInfo.CreateSpecificCulture("en-US"))
        }).Distinct().ToList(); 
```

**检查其是否为拆分周的方法**

```
public static bool isSplitWeek(System.DateTime Enddate, System.DateTime Startdate)
{
    bool isSameMonth = (Enddate.Month == Startdate.Month) ? true : false;

    return !isSameMonth ? true : false;

} 
```

我基本上尝试使用一个 if 它说 x.WKENDstart，这样如果一周从一个月开始并在另一个月结束，我就会得到两个月。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:54:33.497

您似乎在考虑这种方法：

```
public static bool isSplitWeek(System.DateTime Enddate, System.DateTime Startdate)
{
    return Enddate.Month != Startdate.Month;
} 
```

* * *

所以也许是这样的：

```
public static IList<string> TransformDates(DateTime start, DateTime end)
{
    List<string> months = new List<string>
    {
        start.ToString("MMM yyyy", 
                CultureInfo.CreateSpecificCulture("en-US"))
    };

    if (isSplitWeek(start, end))
    {
        months.Add(end.ToString("MMM yyyy", 
                CultureInfo.CreateSpecificCulture("en-US")));
    }

    return months;
} 
```

...

```
var monthlist = data
    .Select(x => new 
    { 
        start =  x.WKENDstart,
        end = x.WKENDstart.AddDays(6)
    })
    .OrderBy(y => y.start )
    .Select(m => new
    {
        monthname = TransformDates(m.start, m.end) // IList<string> 
    })
    .Distinct()
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T15:35:22.203

在决定如何解决这个问题后，我决定使用 .WHERE 子句和 .Union 通过这样做，我能够在一个部分处理正常的几周，在另一个部分拆分几周，然后将它们结合在一起。问题的关键是使用 where 子句。

```
 var monthlist1 =                
    data.Select(x => new { wkdate = x.WKENDDATE }).OrderBy(y => y.wkdate).Where(l=> ExportHelper.isSplitWeek(l.wkdate,l.wkdate.AddDays(6)) != true)
    .Select(m => new{monthname = m.wkdate.ToString("MMM yyyy", CultureInfo.CreateSpecificCulture("en-US"))})
    .Distinct()            
    .ToList();

  var monthlist2 = 
     data.Select(x => new { wkdate = x.WKENDDATE.AddDays(6) }).OrderBy(y => y.wkdate).Where(l=> ExportHelper.isSplitWeek(l.wkdate.AddDays(-6),l.wkdate) == true).Select(m => new
    {monthname = m.wkdate.ToString("MMM yyyy", CultureInfo.CreateSpecificCulture("en-US"))}) 
    .Distinct()            
    .ToList();

  var monthlist = monthlist2.Union(monthlist1)
   .Distinct()
   .ToList(); 
```

# ruby-on-rails - 如何使用 Ruby 1.9.3、passenger、nginx 和 rvm 安装 rails 3.2.2？

> ID：10029886
> 
> 赞同：0
> 
> 时间：2012-04-05T13:50:38.110
> 
> 标签：ruby-on-rails, nginx, passenger

我按照[本](http://thekindofme.wordpress.com/2010/10/24/rails-3-on-ubuntu-10-10-with-rvm-passenger-and-nginx/)教程成功安装了带有 ruby​​ 1.9.3、passenger、nginx 和 rvm 的 Rails 3.0.11。但是当我尝试以类似的方式配置 rails 3.2.2 时，我遇到了很多错误。主要问题是只能访问 public/ 目录中的内容。我尝试创建一个带有索引页面的 Home 控制器，将 'root :to => "home#index"' 添加到 config/routes.rb 并删除了 public/index.html。我得到的是“出了点问题”页面。

我尝试预编译资产，但没有帮助。

我正在使用 Ubuntu 10.04 作为服务器。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T20:01:44.180

试试这些命令。

`$ rake assets:precompile` 编译资产

`$ rake db:setup RAILS_ENV="production"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:42:52.640

无论如何尝试运行以下命令：

```
$> sudo apt-get update && sudo apt-get upgrade
$> rvm get head 
```

接着

```
$> rake db:migrate RAILS_ENV=production 
```

# asp.net-mvc-3 - ASP.Net MVC 3 自动映射器

> ID：10029888
> 
> 赞同：0
> 
> 时间：2012-04-05T13:50:45.960
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, viewmodel, automapper

我正在使用 Entity Framework 4.1 和 Automapper 开发一个 ASP.Net MVC 3 Web 应用程序，以将我的对象的属性映射到 ViewModels，反之亦然。

我有以下名为 Shift 的课程

```
public partial class Shift
{
    public Shift()
    {
        this.Locations = new HashSet<ShiftLocation>();
    }

    public int shiftID { get; set; }
    public string shiftTitle { get; set; }
    public System.DateTime startDate { get; set; }
    public System.DateTime endDate { get; set; }
    public string shiftDetails { get; set; }

    public virtual ICollection<ShiftLocation> Locations { get; set; }

} 
```

还有一个名为 ViewModelShift 的 ViewModel

```
public class ViewModelShift
{
    public int shiftID { get; set; }

    [DisplayName("Shift Title")]
    [Required(ErrorMessage = "Please enter a Shift Title")]
    public string shiftTitle { get; set; }

    [DisplayName("Start Date")]
    [Required(ErrorMessage = "Please select a Shift Start Date")]
    public DateTime startDate { get; set; }

    [DisplayName("End Date")]
    [Required(ErrorMessage = "Please select a Shift End Date")]
    public DateTime endDate { get; set; }

    [DisplayName("Shift Details")]
    [Required(ErrorMessage = "Please enter detail about the Shift")]
    public string shiftDetails { get; set; }

    [DisplayName("Shift location")]
    [Required(ErrorMessage = "Please select a Shift Location")]
    public int locationID { get; set; }

    public SelectList LocationList { get; set; }

} 
```

然后我在控制器中有以下代码

```
[HttpPost]
    public ActionResult EditShift(ViewModelShift model)
    {
            if (ModelState.IsValid)
            {
                Shift shift = _shiftService.GetShiftByID(model.shiftID);
                shift = Mapper.Map<ViewModelShift, Shift>(model);
             }
     } 
```

效果很好，当变量 'shift' 第一次填充 Shift 详细信息时，延迟加载也会加载相关的 'Locations' 集合。

但是，一旦发生映射，shift.Locations 就等于 0。无论如何设置 AutoMapper，它只是将 ViewModel 类中的属性映射到班次而不删除位置集合？

一如既往地感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:03:41.203

Automapper 能够为创建的地图的特定成员指定选项。

[https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation](https://github.com/AutoMapper/AutoMapper/wiki/Configuration-validation)

试试这个：

```
 Mapper.CreateMap<ViewModelShift, Shift>()
       .ForMember(dest => dest.Locations, opt => opt.Ignore()); 
```

# vb.net - ASPNET MVC2 ActionFilter Order 属性由于 procetion 级别而无法访问

> ID：10029893
> 
> 赞同：0
> 
> 时间：2012-04-05T13:50:54.827
> 
> 标签：vb.net, asp.net-mvc-2, actionfilterattribute, custom-action-filter

我正在尝试在我的 ASP.NET MVC2 应用程序中设置 ActionFilterAttribute 的 Order 属性。

```
<LoginFilterAttribute(Order = 1)> _
<AdminFilterAttribute(Order = 2)> _ 
```

Visual Studio 智能告诉我可以键入 Order 属性，但是当我这样做时，编译器会抛出错误“Order 未声明。由于其 procetion 级别，它可能无法访问。”

我能做些什么来解决这个问题？

对于我的示例，我阅读并遵循这篇文章 [http://msdn.microsoft.com/en-US/library/dd381609.aspx](http://msdn.microsoft.com/en-US/library/dd381609.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:56:20.000

这是错误的 VB.NET 语法。给：

```
<LoginFilterAttribute(Order := 1)> _
<AdminFilterAttribute(Order := 2)> _ 
```

一试。

# generics - Struts 2 - Map 和泛型的类型转换问题

> ID：10029904
> 
> 赞同：2
> 
> 时间：2012-04-05T13:51:36.193
> 
> 标签：generics, map, struts2

在我的操作类中`Map<Long, Set<String>>`，我有一个名为 accountsMap 的属性。假设我得到的关键值是 100,101,102。我在 JSP 中对复选框进行了编码，因此 POST 参数如下所示：

```
accountsMap[100]=string1
accountsMap[100]=string2
accountsMap[101]=string3
accountsMap[101]=string4
accountsMap[102]=string5 
```

所以生成的映射应该包含 3 个条目，键为 100,101,102。键为 100 的 Map 条目应该有一个带有 2 个字符串（string1 和 string2）的 Set 作为其值。希望你能明白。

在提交页面时，我确实在我的操作中从 struts 中获得了一个填充的地图。但是 Map 的泛型信息似乎已被丢弃。首先，Map 的键是 Integer 类型，而不是原始 Map 所期望的 Long。然后，地图的值是类型`String[]`；而不是`Set<String>`。Struts 能够使用我的 setter 设置这些值，但是当我对 Map 进行任何操作时，假设键类型为 Long，值类型为 Set，我得到类转换异常。

如何让 struts 在 Map 中设置正确的值类型？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:47:44.153

解决了！

我没有为该属性提供一个 getter，因为它是页面中的只写属性 - 当页面加载时我不会有它的值。我添加了一个吸气剂（作为一种绝望的措施），它解决了这个问题！呸呸呸？！:-)

# python - 在 DJANGO 的同一查询中使用“contains”和“iexact”

> ID：10029905
> 
> 赞同：29
> 
> 时间：2012-04-05T13:51:36.887
> 
> 标签：python, django, django-queryset

如何在 Django 中的同一查询中使用`contains`和字段查找？`iexact`

像那样 ..

```
casas = Casa.objects.filter(nome_fantasia__contains__iexact='green') 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-05T13:54:08.993

如果您需要不区分大小写`contains`，请使用[`icontains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#icontains)：

```
casas = Casa.objects.filter(nome_fantasia__icontains = 'green') 
```

哪个转换为

```
... WHERE nome_fantasia ILIKE '%green%' 
```

在 SQL 中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T13:56:19.137

老实说，你不需要。两个结果集重叠。如果您打算`AND`使用最严格的：`__iexact`. 如果你想`OR`使用`__contains`

只是为了回答您的问题，您可以执行以下操作（注意这是一个`AND`）

```
casas = Casa.objects.filter(nome_fantasia__contains='green', nome_fantasia__iexact='green') 
```

# drupal-7 - Drupal 7 - 博客模块 - 为单个博客文章添加标题

> ID：10029906
> 
> 赞同：1
> 
> 时间：2012-04-05T13:51:38.920
> 
> 标签：drupal-7, blogs

我被要求为一个用 Drupal 7 构建的网站添加一个博客。我激活了博客模块并做了几个条目。

帖子在博客页面上显示得很好，但是当我点击单个条目时，它只是帖子的文本。我想将标题添加到页面。

这怎么可能？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:18:31.643

要么你在 page.tpl.php 中删除了标题，要么你有一个页面--blog.tpl.php 已经删除了标题。

复制您的 page.tpl.php 并将其重命名为**page--blog.tpl.php**（**请注意，页面和博客之间有两个破折号，它不会只使用一个破折号**）并添加这个 PHP 片段：

```
<h1 id="page-title"><?php print $title ?></h1> 
```

然后清除 Drupal 的缓存。如果这对您不起作用，请尝试将其添加到**node--blog.tpl.php**。

# file - 如何替换文件中的某些字符和EOF

> ID：10029907
> 
> 赞同：0
> 
> 时间：2012-04-05T13:51:45.810
> 
> 标签：file, shell, search, sed, ack

在一些 PHP 文件中，我想替换`"?>\s\t\n\EOF"`. 我对此进行了测试，以搜索发生此问题的所有文件：

```
ack "\?\>[\s\n\t]+\z" 
```

我得到结果，但我只想替换它`?>EOF`。我用“sed”测试另一个命令：

```
sed 's/?>[\n\t\s]+\z/?>/' 
```

你有什么建议吗？

例子 ：

```
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:24:33.150

ack 是基于 perl 的，而 sed 不能识别像 \z 这样的东西。使用 perl：

```
perl -pe 's/\?\>[\s\n\t]+\z/?>\n/' 
```

此外，\z 不是 EOF，而只是字符串的结尾，因此 \z 将匹配每一行的结尾。如果您希望它仅在文件末尾匹配，则需要使用 \z 以外的其他内容。

# python - 将 Python 程序转换为汇编 IEEE 694

> ID：10029908
> 
> 赞同：2
> 
> 时间：2012-04-05T13:51:51.113
> 
> 标签：python, assembly

它是否存在任何将 Python 程序或代码源文件转换为汇编 IEEE 694 的工具？生成的字节码必须在 IEEE 694 模拟器上工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:11:19.137

除了 Nuitkla，还有[cython——](http://cython.org)它可以将 Python 代码转换为 C 文件，您可以从中编译成汇编源代码。

如果你想要它来提高本机代码的速度，我建议你使用[pypy——](http://pypy.org)用 Python 编写的 Python 解释器，它具有 jit（即时代码翻译）到 x86_64 本机代码的特性。

[corepy](http://www.corepy.org)也很有趣，它允许您从 Python 代码中内联输入汇编指令 - 这样您就可以拥有一个使用高级 CPU 架构（如 sse3）的 Python 程序（作为 .py 源运行，无需编译）和 ss4（如果它还支持 avx，则不是 shure），以及其他架构，例如 IBM Cell 处理器（在解锁的 Playstation 3s 中）

# android - 在android中重启micro sd卡

> ID：10029910
> 
> 赞同：2
> 
> 时间：2012-04-05T13:51:57.193
> 
> 标签：android

我正在尝试使用 android 应用程序模拟 micro sd 卡的弹出/插入。使用根内核和 umount/mount，无济于事。似乎 umount/mount 命令不会在卡控制器上执行电源循环。

任何帮助或指示都会非常有帮助。

设备：三星 Galaxy S II

提前致谢， BTR Naidu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:38:17.390

通过在 MMC 驱动程序堆栈中添加我自己的 ioctl 命令并从用户端可执行文件发出这些命令来实现这一点。编写自己的可执行文件的步骤是我[个人博客](http://www.btrnaidu.com/index.php/building-own-executable-in-android/)中的文档。

# javascript - 谷歌地图方向服务发送不同的响应格式

> ID：10029916
> 
> 赞同：0
> 
> 时间：2012-04-05T13:52:23.743
> 
> 标签：javascript, google-maps

我正在使用 javascript、google 方向服务我在地图上有多个源点和一个目标点。我需要找到离目标点最近的源点。由于方向服务异步工作，我需要用它们的纬度/纬度映射点。但是问题是，方向服务发送的响应格式发生了变化。

```
 function calcRoute(start, end) {
    var request = {
        origin:start,
        destination:end,
        travelMode:google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, 
        function (response, status) {
            distanceCount++;
            if (status == google.maps.DirectionsStatus.OK) {                    
                var dist = computeTotalDistance(response);
                console.log(dist);
                if (dist &lt; minDistance) {
                    minDistance = dist;
                    minDistanceIndex = locationsMap[response.ug.origin.Ua+""+response.ug.origin.Va];
                }
                if (distanceCount == vl.length) {
                    drawWay(vl[minDistanceIndex], fsl);
                }
            }
        }
    );
} 
```

问题出现在线

```
minDistanceIndex = locationsMap[response.ug.origin.Ua+""+response.ug.origin.Va]; 
```

**response.ug.origin.Va**和**response.ug.origin.Ua**来自谷歌方向服务，但有时会变为**response.ug.origin.Xa**和**response.ug.origin.Ya**。

你有什么想法为什么它会不时改变？或任何想法如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:50:41.447

您不必访问这些内部属性，它们不是 API 的一部分，因此它们可能会更改。

仅使用规范中定义的属性/方法，响应提供的所有数据都可以通过它们访问，

例子：

```
response.routes[0].legs[0].start_location
//returns latLng of the origin 
```

除此之外：

您的描述听起来好像您最好使用[DistanceMatrixRequest](https://developers.google.com/maps/documentation/javascript/distancematrix#distance_matrix_requests)

# jquery - jQuery 数据表：我想在左边放一个数据表，在右边放一个 div

> ID：10029918
> 
> 赞同：1
> 
> 时间：2012-04-05T13:52:27.437
> 
> 标签：jquery, datatables

我想使用 div 为我的页面创建一个两列布局。像这样的东西：

```
<div class="wrapper">
    <div class="left_column">
        {jQuery Datatable here}
    </div>
    <div class="right_column">
    </div>
</div> 
```

发生在我身上的是，当页面被渲染时，jQuery 以某种方式关闭了“包装器”div，所以它看起来像这样（我使用 Chrome 的 Inspect this element 来查看代码）：

```
<div class="wrapper">
    <div class="left_column">
        {jQuery Datatable here}
    </div>
</div>  ---------------------------- Why?
<div class="right_column">
</div> 
```

任何帮助深表感谢！

编辑：原来是我们的页面处理器负责这个:(。jQuery没有错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:31:55.453

为什么不把 right_column 放在包装器外面，而另一个包装器包含所有内容：

```
<div class="parentWrapper">
    <div class="wrapper"> // float left
        <div class="left_column">
            {jQuery Datatable here}
        </div>
    </div>
    <div class="right_column"> // float left or right

    </div>
</div> 
```

# jquery - JQuery 多个选择器

> ID：10029922
> 
> 赞同：0
> 
> 时间：2012-04-05T13:52:34.583
> 
> 标签：jquery, html

我有以下 HTML 标记：-

```
<select name="List1" id="l1">
<option>One</option>
<option>Two</option>
<option>Three</option>
<option>Four</option>
<option>Five</option>
</select>  

<select name="List2" id="l2">
<option>One</option>
<option>Two</option>
<option>Three</option>
<option>Four</option>
<option>Five</option>
</select> 
```

使用以下 Jquery：-

```
$('#l1 option:nth-child(n+5)').wrapAll('<optgroup label="Group 1">');

$('#l2 option:nth-child(n+5)').wrapAll('<optgroup label="Group 1">'); 
```

我想将其转换为使用一条 Jquery 行来处理

所以使用这个： -

```
$('#l1 option:nth-child(n+5), #l2 option:nth-child(n+5)').wrapAll('<optgroup label="Group 1">'); 
```

似乎包装了两个选择列表中组合的所有元素。

我希望上面单独包装每个选择列表的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:56:14.137

你不能`wrapAll`但不能包装所有元素......

您必须使用两个选择器，或者使用一个`end`不是最佳实践的选择器...

`wrapAll` [文档](http://api.jquery.com/wrapAll/)：

> 描述：围​​绕匹配元素集中的所有元素包裹一个 HTML 结构。

# facebook - 应用访问令牌无法检索测试用户？

> ID：10029925
> 
> 赞同：1
> 
> 时间：2012-04-05T13:52:41.097
> 
> 标签：facebook, access-token

我无法使用我的应用访问令牌获取我的测试用户列表。首先，我通过以下图形 api 调用获取应用访问令牌：

```
 https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials 
```

成功了，我得到了格式的访问令牌

```
 APP_ID|SomeRandomCharacters 
```

现在我尝试使用以下图形 API 调用获取我的测试用户列表：

```
 https://graph.facebook.com/APP_ID/accounts/test-users?access_token=APP_ACCESS_TOKEN 
```

但是，我的 iOS 代码中出现“错误 URL”错误。

如果我尝试直接在浏览器中访问该地址，我会收到 HTTP 400 Bad Request，如果我在 Graph API explorer 中尝试，我会收到

```
 {  "error": 
        {    "message": "An access token is required to request this resource.",     
             "type": "OAuthException",     
             "code": 104  
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T16:13:07.310

检查您的应用程序未定义为“桌面/本机” - 如果是，则您的应用程序机密被视为不可信的 API 调用可以更改应用程序的设置（包括测试用户）

假设是应用程序机密已与您的本机应用程序一起分发并且不可信。

# regex - 需要 Linux Bash grep 命令的 RegExp 帮助来过滤掉包含方括号的行

> ID：10029926
> 
> 赞同：7
> 
> 时间：2012-04-05T13:52:44.133
> 
> 标签：regex, linux, bash, grep, square-bracket

使用以下示例，我需要过滤掉仅包含“ABC”的行，同时跳过与“ABC”匹配且包含方括号的行：

```
2012-04-04 04:13:48,760~sample1~ABC[TLE 5332.233 2/13/2032 3320392]:CAST
2012-04-04 04:13:48,761~sample2~ABC
2012-04-04 04:13:48,761~sample3~XYZ[BAC.CAD.ABC.CLONE 232511]：测试

```

这是我所拥有的，但到目前为止，我无法成功过滤掉带方括号的行：

`bash-3.00$ cat Metrics.log | grep -e '[^\[\]]' | grep -i 'ABC'`

请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:02:10.130

根据评论编辑：

尝试`grep -i 'ABC' Metrics.log | grep -v "[[]" | grep -v "ABC\w"`

输入：

```
2012-04-04 04:13:48,760~sample1~ABC[TLE 5332.233 2/13/2032 3320392]:CAST
2012-04-04 04:13:48,761~sample2~ABC
2012-04-04 04:13:48,761~sample3~XYZ[BAC.CAD.ABC.CLONE 232511]:TEST
2012-04-04 04:13:48,761~sample4~XYZ
2012-04-04 04:13:48,761~sample5~ABCD
2012-04-04 04:13:48,761~sample6~ABC:TEST 
```

输出：

```
2012-04-04 04:13:48,761~sample2~ABC
2012-04-04 04:13:48,761~sample6~ABC:TEST 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:22:40.477

```
 $cat log |  grep -v '\[.*\]' | grep ABC 
```

# java - 如何检查客户端电脑上的端口是否打开？

> ID：10029933
> 
> 赞同：1
> 
> 时间：2012-04-05T13:53:04.217
> 
> 标签：java, udp

我有 UDPserver，它接收来自客户端的消息并向它们发送响应。但我需要检查 UDPclients 是否在线。使用 isReachable 我可以测试 pc 是否在线。但是当不同的客户端使用同一台电脑但端口不同时，如何检查端口是否打开（端口5678的客户端1在线但客户端2 6777已关闭。IP 192.168.1.7 IP isReachable在这种情况下，但客户端2没有）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:59:31.653

UDP 是一种无连接、不可靠的面向数据包的协议。如果没有套接字绑定到远程机器上的特定端口，那么数据包将被简单地丢弃。

您必须实现某种协议，支持检测客户端是否在线。也许会定期发送保持活动类型的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:02:23.373

您在这里混淆了两个不同的概念。“isReachable”函数是一个 IP 层属性，它只是检查所讨论的 IP 地址是否响应 IP 协议数据包（确实如此）。

UDP 是一种广播数据报协议，专为 IP 上未确认的数据广播而设计，因此它没有内置的“可达性”概念。您的 UDP 客户端必须以某种方式监视传入的检测消息，并相应地响应它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:03:30.980

IsReachable 只会在给定主机上执行 ICMP 回显请求（ping），因此如果您的客户端未运行但只要您的主机响应 ICM 请求，它就会显示为可访问的。

如果您要检查您的远程客户端是否正在运行，您将需要实现一个简单的“ping”协议：即：您的服务器将向客户端发送一条特殊消息，客户端必须对其做出响应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:09:12.400

如果唯一的问题是知道客户端是否还活着，那么来自客户端的保持活动消息是最简单的。例如，您可以从包的内容（或发送方端口）中识别客户端。

如果您希望向客户端发送消息，我认为您必须在两端都有一个 UDP 服务器，然后交换“客户端-服务器”正在侦听的端口并将其用于通信。

当然，后者会导致防火墙出现问题，因为大多数会阻止所有传入流量。

# ios - 升级 Xcode 后路径上的数据模型编译失败

> ID：10029934
> 
> 赞同：3
> 
> 时间：2012-04-05T13:53:08.557
> 
> 标签：ios, xcode, compilation, datamodel

升级到 Xcode 4.3.2 后，我在构建时开始收到以下错误：

```
Compilation failed for data model at path '/Users/Administrator/Library/Developer/Xcode/DerivedData/AppName-ffeggcadwojrwacrwosvadafamrk/Build/Products/Debug-iphoneos/Data.momd/Data.mom' 
```

这在升级之前没有发生，如果我在运行先前版本的 Xcode 的机器上检查相同的项目，它工作正常。没有错误。

我在[这里](https://stackoverflow.com/questions/7993760/compilation-failed-for-data-model-at-path-when-compiling-core-data-model-after)和[这里](https://stackoverflow.com/questions/6788215/data-model-version-compile-error-after-upgrading-to-lion-xcode4-1)找到了一些类似的帖子，但没有一个答案有帮助。从错误消息中，它提供的文件路径不包含文件，所以我猜测它是我需要更改的某个属性，但我找不到它。

请帮忙，谢谢。

编辑：在进一步调查中，如果我从数据模型文件中删除某些实体，我可以阻止它出错，我们目前正在使用一个大型的预先创建的 sqlite 文件来加载数据，所以我可以重新创建数据模型文件，但这意味着重新创建sqlite 这会有点痛苦。有人知道为什么某些实体会导致这种情况吗？

# internet-explorer - swfobject 未定义，即嵌入 youtube 视频时

> ID：10029937
> 
> 赞同：1
> 
> 时间：2012-04-05T13:53:13.123
> 
> 标签：internet-explorer, youtube, swfobject

我有一个似乎无法解决的问题
我有这个网站[http//:makeandsee.com/shadow.html](http://makeandsee.com/shadow.html)

它从单个 youtube 用户那里提取所有 youtube 视频并显示它们，这在除 IE 之外的所有浏览器中都可以正常工作。在 IE 中它会抛出一个错误，说 swfobject 没有定义，这是没有意义的，因为所有其他浏览器都没有问题，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:47:19.183

您是否可以访问 Javascript 中的 swfobject？而*不是*做这样的事情？

```
function getFlashMovieObject(movieName){
    if (window.document[movieName]){
        return window.document[movieName];
    }
    if (navigator.appName.indexOf("Microsoft Internet")==-1){
        if (document.embeds &amp;&amp; document.embeds[movieName])
            return document.embeds[movieName];
    }
    else{
        return document.getElementById(movieName);
    }
} 
```

# django - 需要澄清使用 Django 1.4 表单向导，特别是预填充和保存

> ID：10029942
> 
> 赞同：5
> 
> 时间：2012-04-05T13:53:20.363
> 
> 标签：django, django-forms, django-formwizard

我们正在使用 Django 1.4 的新表单向导功能构建一个向导。
这方面的文档非常简洁，我们找不到任何高级示例。我们正在使用一个命名的步骤向导（需要支持我们使用的列表视图/数据网格）和一个会话后端。该向导旨在编辑角色和链接权限，旨在提供添加和编辑功能。我们通过在第一步询问用户是否要添加或编辑来做到这一点。

下一步取决于该选择；如果用户想要编辑，会有一个搜索屏幕，然后是一个显示结果的[列表视图/数据网格。](https://github.com/bradleyayers/django-tables2)然后，用户可以选择其中一个结果并转到详细信息屏幕，然后是[FilteredSelectMultiple](http://anentropic.wordpress.com/2009/11/05/more-django-mptt-goodness-filteredselectmultiple-m2m-widget/)页面，允许他/她将权限链接到该角色。

如果用户想要添加新角色，则跳过搜索和结果屏幕，用户直接进入详细信息屏幕，然后是链接屏幕。
这一切都很好，在 urls.py 中使用*condition_dict*，但我们想知道一些关于一般功能的事情：

When a specific pre-existing role is selected, how can we fill the details and the link-screen with the corresponding data?

我们是否实例化一个角色对象并以某种方式将其传递给两个表单，如果是，我们在哪里实例化它，我们是否需要分别为每个表单执行此操作（这似乎有点过头了）？

保存时，通常的做法是创建角色对象的另一个实例，将表单数据添加到其中并保存，还是我们可以以某种方式重新使用表单中使用的对象？

我们已经尝试重载*get_form_instance*以返回角色实例，并且我们在文档中查看了*instance_dict*，但感觉方法错误，并且在网上找不到示例，我们甚至不确定这些是否用于 pre -填充数据，或者即使我们走在正确的轨道上。

从逻辑上讲，我会说在选择现有角色的步骤中，我需要使用所选对象的实例来填充向导变量，并且这些变量会显示在表单中。在向导结束时，我们反转该过程并从向导变量中获取所有数据，并将它们添加到新实例化的角色对象中并保存它。理想情况下，此实例将自行确定是否需要执行 INSERT 或 UPDATE，具体取决于是否填充了主键。

如果任何人都可以提供一个例子，或者向正确的方向轻推，那将不胜感激。

views.py 中的 wizardview 类的代码如下：

```
class RolesWizard(NamedUrlSessionWizardView):

def get_template_names(self):
    # get template for each step...
    if self.steps.current == 'choice':
        return 'clubassistant/wizard_neworeditrole.html'
    if self.steps.current == 'search':
        return 'clubassistant/wizard_searchrole.html'
    if self.steps.current == 'results':
        return 'clubassistant/wizard_pickrole.html'
    if self.steps.current == 'details':
        return 'clubassistant/wizard_detailsrole.html'
    elif self.steps.current == 'rights':
        return 'clubassistant/wizard_roles.html'

def get_context_data(self, form, **kwargs):
    # get context data to be passed to the respective templates
    context = super(RolesWizard, self).get_context_data(form=form, **kwargs)

    # add the listview in the results screen
    if self.steps.current == 'results':
        # get search text from previous step
        cleaned_data = self.get_cleaned_data_for_step('search')
        table = RolesTable(Roles.objects.filter(
            role_name__contains=cleaned_data['searchrole'])
        )
        RequestConfig(self.request, paginate={
            "per_page": 4,
            }).configure(table)
        # add the listview with results
        context.update({'table': table})

    # add a role instance based on the chosen primary key
    if self.steps.current == 'rights':
        cleaned_data = self.get_cleaned_data_for_step('results')
        role_id = cleaned_data['role_uuid']
        role = get_object_or_404(Roles, pk=role_id)
        context.update({'role': role})

    return context

def done(self, form_list, **kwargs):
    # this code is executed when the wizard needs to be completed

    # combine all forms into a single dictionary
    wizard = self.get_all_cleaned_data()

    if wizard.get("neworeditrole")=="add":
        role = Roles()
    else:
        role = get_object_or_404(Roles, pk=wizard.get("role_uuid"))

    # many-to-many rights/roles
    role.role_rights_new_style.clear()
    for each_right in wizard.get('role_rights_new_style'):
        RightsRoles.objects.create(role=role, right=each_right,)

    # other properties
    for field, value in self.get_cleaned_data_for_step('details'):
        setattr(role, field, value)

    role.save()

    # return to first page of wizard...
    return HttpResponseRedirect('/login/maintenance/roles/wizard/choice/') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:12:14.780

对于未来的谷歌人：

我在使用 get_form() 方面取得了一些成功，因为它是在呈现表单之前调用的。从几个 ModelForms 开始：

```
class Wizard1(models.ModelForm): 
    class Meta:
        model = MyModel
        fields = ('field0', 'model0')
class Wizard2(models.ModelForm): 
    class Meta:
        model = MyModel
        excludes = ('field0', 'model0') 
```

然后，在您的 SessionWizardView 中：

```
class MyWizard(SessionWizardView):
    def get_form(self, step=None, data=None, files=None):
        form = super(ExtensionCreationWizard, self).get_form(step, data, files)

        if step is not None and data is not None:
            # get_form is called for validation by get_cleaned_data_for_step()
            return form

        if step == "0":
            # you can set initial values or tweak fields here

        elif step == "1":
            data = self.get_cleaned_data_for_step('0')
            if data is not None:
                form.fields['field1'].initial = data.get('field0')
                form.fields['field2'].widget.attrs['readonly'] = True
                form.fields['field3'].widget.attrs['disabled'] = True
                form.fields['model1'].queryset = Model1.objects.filter(name="foo")

        return form 
```

该操作都在第 1 步中。您从第 0 步请求经过验证的数据（这会触发对第 0 步的另一个 get_form() 调用，所以要小心），然后您可以访问在第 0 步中设置的任何值。

我提供了几个可以在字段上更改的设置示例。您可以更新查询集以限制 ChoiceField 中的值，或再次重新显示值但将其设为只读。我注意到一个警告...... readonly 在 ChoiceField 上不起作用。您可以将其禁用，但是当您提交表单时该值不会传播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:49:26.147

让我们看看我能不能帮忙。我做了一个表单向导，根据答案添加步骤。在每个步骤中，我都将所有表单保存在会话变量中，如下所示：

```
def process_step(self, request, form, step):
  request.session['form_list'] = self.form_list
  request.session['initial'] = self.initial 
```

然后，每次呈现该视图时，我都会使用所有先前的数据实例化一个新的表单向导：

```
def dynamic_wizard(request):
  if not request.session.get('form_list'):
        form = Wizard([Form1])
    else:
        form = Wizard(request.session.get('form_list'), initial = request.session['initial'])
    return form(context=RequestContext(request), request=request) 
```

# php - PHP获取上个月特定日期的时间戳

> ID：10029945
> 
> 赞同：1
> 
> 时间：2012-04-05T13:53:33.353
> 
> 标签：php

我可以使用 strtotime() 获取给定日期“上个月”的时间戳吗？如果不是，最有效的方法是什么？

这就是我想要的东西

```
strtotime("5 last Month"); 
```

代替

```
$time_day= 5;
$time_month= date("m");
$time_year= date("Y");

if($time_month<1){
$time_month=12;
$time_year--;
}else{
$time_month--;
}

$date=mktime(0,0,0,$time_month,$time_day,$time_year); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T00:38:32.367

不幸的是，您想要做的事情目前无法`strtotime()`在 PHP 中使用。以下是如何在一行中实现你想要的，使用[`mktime()`](http://php.net/manual/en/function.mktime.php)and [`date()`](http://php.net/manual/en/function.date.php)：

```
$timestamp = mktime(0, 0, 0, date('n') - 1, 21); 
```

上面的代码将找到上个月第**21天的时间戳。**随便换个`21`就行。

这有效，因为：

> 小于 1 的值（包括负值）倒序引用上一年的月份，所以 0 是 12 月，-1 是 11 月，依此类推。[[PHP 文档]](http://php.net/manual/en/function.mktime.php)

因此，如果月份是`1`（一月），您将使用月份值运行`mktime()`，`0`这意味着“上一年的十二月”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:55:31.000

试试这个。

`mktime()`

[http://uk3.php.net/manual/en/function.mktime.php](http://uk3.php.net/manual/en/function.mktime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T15:48:31.323

## 漏洞

首先，我需要纠正一个小错误：

```
if($time_month<1)    // If month==0
    {
    $time_month=12;    // New month==12
    $time_year--;
    } 
```

这样，有 13 个月......（ 0,1,2,3,4,5,6,7,8,9,10,11,12 ）。[日期](http://php.net/manual/en/function.date.php)指定`date("m")`从 1 到 12，那么该代码应该是：

```
if($time_month==1)    // If month==1
    {
    $time_month=12;    // New month==12
    $time_year--;
    } 
```

## 不要优化

再想一想，我不会费心尝试进一步优化它。请记住，[过早的优化是万恶之源](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)。如果您的代码有效并且相对较短（就是这种情况），那么最好保持这种状态。想想即使有一个函数可以做你想做的事，唯一的区别是你不必自己编写代码，但后台进程会非常相似，所以没有太多需要优化的地方（关于速度/资源）。

## 评论你的代码

另外，我建议写一两行评论说明它的作用。如果您想在一年左右的时间内重用它，那么理解代码将会很有用。

最后一个想法。不同的月份有不同的日子。我不确定您的代码是与手动输入一起使用还是根据当天使用，但是如果您写的是 03 会发生`day="31";`什么`date("m")`？

## 可能的解决方案

看看这个：[链接](http://www.php.net/manual/en/datetime.sub.php)。它以这种方式工作：

```
<?php
$date = new DateTime('2000-01-20');
$date->sub(new DateInterval('P10D'));    // 10 days ago
echo $date->format('Y-m-d') . "\n";
?> 
```

它会输出`2000-01-10`

# ios - iOS Route-Me：添加用户位置标记

> ID：10029950
> 
> 赞同：3
> 
> 时间：2012-04-05T13:53:43.873
> 
> 标签：ios, xcode, marker, route-me

我一直在尝试将以下内容添加到 Route-Me 应用程序中。

*   在起始位置添加标记
*   将地图移动到用户位置
*   将标记移动到该新位置

我正在使用 MapBox ios 示例中的基本示例，因为我的地图来自离线 mbtiles 商店。

这是我的头文件：

```
#import <UIKit/UIKit.h>

#import "RMMapView.h"
#import "RMMarker.h"
#import "RMMapViewDelegate.h"
#import "RMMarkerManager.h"
#import "CoreLocation/CoreLocation.h"

@interface MBTiles_ExampleViewController : UIViewController
{
    RMMapView *mapView;
}

@property (nonatomic, retain) IBOutlet RMMapView *mapView;
@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, retain) CLLocation *currentLocation;
@property (nonatomic, retain) RMMarkerManager *markerManager;
@property (nonatomic, retain) RMMarker *locationMarker;

@end 
```

这是我的实现文件：

```
#define kStartingLat   30.0f
#define kStartingLon  -10.0f
#define kStartingZoom   1.5f

#import "MBTiles_ExampleViewController.h"

#import "RMMBTilesTileSource.h"
#import "RMMapContents.h"
#import "RMMarker.h"

#import "RMMarkerManager.h"
#import "CoreLocation/CoreLocation.h"

@implementation MBTiles_ExampleViewController

@synthesize mapView;
@synthesize currentLocation;
@synthesize locationManager;
@synthesize markerManager;
@synthesize locationMarker;

(void)viewDidLoad
{
    CLLocationCoordinate2D startingPoint;

    startingPoint.latitude  = kStartingLat;
    startingPoint.longitude = kStartingLon;

    NSURL *tilesURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"control-room-0.2.0" ofType:@"mbtiles"]];

    RMMBTilesTileSource *source = [[[RMMBTilesTileSource alloc] initWithTileSetURL:tilesURL] autorelease];

    [[[RMMapContents alloc] initWithView:self.mapView 
                              tilesource:source
                            centerLatLon:startingPoint
                               zoomLevel:kStartingZoom
                            maxZoomLevel:[source maxZoom]
                            minZoomLevel:[source minZoom]
                         backgroundImage:nil] autorelease];

    mapView.enableRotate = NO;
    mapView.deceleration = NO;

    mapView.backgroundColor = [UIColor blackColor];

    mapView.contents.zoom = kStartingZoom;

    if (nil == locationManager)
        locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;

    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    [locationManager startUpdatingLocation];

    UIImage *iconImage = [UIImage imageNamed:@"marker.png"];

    locationMarker = [[RMMarker alloc] initWithUIImage: iconImage];

    [markerManager addMarker: locationMarker AtLatLong: startingPoint];  

}

(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    [mapView moveToLatLong:newLocation.coordinate];

    RMLatLong newCoords = {newLocation.coordinate.latitude, newLocation.coordinate.longitude};

    if (nil != markerManager)
       [markerManager moveMarker:locationMarker AtLatLon: newCoords];

}

(void)dealloc
{
    [mapView release];

    [super dealloc];
}

@end 
```

marker.png 已添加到我的资源文件夹中。

所以我的问题

1.  为什么我的起始标记没有显示？
2.  我在 SnowLeopard 上使用 xcode，那么模拟器真的能找到我的位置吗？因为地图不动。

任何帮助都会很棒，因为我尝试了这么多代码片段和教程，但没有一个最终奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:07:12.167

Regarding your second question, from the apple docs:

In Xcode 4.0 and 4.1, you could simulate only the current location in your application. As of Xcode 4.2, you can simulate locations other than your current location in iOS applications that use Core Location. To set a location, choose Edit Scheme from the scheme selector in the toolbar, select the Run action, and click the Options tab. You can then choose a location from the Location menu

[http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T08:31:52.903

在移动后清洁标记后，我能够让它工作。

```
marker = [[RMMarker alloc] initWithUIImage:[UIImage imageNamed:@"marker.png"] anchorPoint:CGPointMake(0.5f, 1.f)];
[mapView.contents.markerManager addMarker:marker AtLatLong:locPoland];
[mapView.contents.markerManager moveMarker:marker AtLatLon:locWawa];
[mapView.markerManager moveMarker:marker AtLatLon: locUser];
[mapView moveToLatLong:locUser];
marker = nil; 
```

# eclipse - 类声明中的 Eclipse CDT 语法错误

> ID：10029952
> 
> 赞同：1
> 
> 时间：2012-04-05T13:53:59.007
> 
> 标签：eclipse, gcc, mingw, declaration, eclipse-cdt

刚刚使用 MinGW gcc 为 Eclipse 安装了 CDT。C 程序“HelloWorld”编译并运行正常。但是尝试在一个新的 .h 文件中添加一个类声明。类定义的语法错误。尝试编写我自己的类声明并使用新的类向导。

除了 eclipse 之外，还使用了许多其他 C++ ide。想用eclipse进行团队整合。让类声明起作用的日食秘诀是什么？

以下是错误： gcc -O0 -g3 -Wall -c -fmessage-length=0 -o src\main.o ..\src\main.c 在来自 ../src/main.c:10 的文件中：

```
../src/Logger.h:11: parse error before "Logger"
../src/Logger.h:11: syntax error before '{' token 
```

这是发生错误的类头文件“Logger.h”。

```
#ifndef LOGGER_H_
#define LOGGER_H_

class Logger {
public:
    Logger();
    virtual ~Logger();
};

#endif /* LOGGER_H_ */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:28:06.087

在 Eclipse 中创建的项目是作为 C 项目创建的，而不是 C++ 项目。因此不支持类声明。

解决方案：使用 C++ 类型创建一个新项目，将代码移动到新的 C++ 项目，删除旧的 C 项目，将新的 C++ 项目重命名为所需的名称，然后运行 ​​clean & rebuild。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-10T10:41:15.740

索引器可能会感到困惑。

我做了一个项目-> C/C++ 索引-> 重建，这为我解决了这个问题。

# sql - SQL 查询 SELECT FROM 2 个表 - 等于返回正确的结果，但不需要等于

> ID：10029953
> 
> 赞同：2
> 
> 时间：2012-04-05T13:53:59.463
> 
> 标签：sql, select, where

基本上，我想从 customers 表中获取所有未出现在 brochure_requests 表中的行。

```
SELECT *      
  FROM customers  JOIN  brochure_requests
    WHERE brochure_requests.first_name != customers.customer_first_name
    AND brochure_requests.last_name != customers.customer_last_name 
```

该查询在参数为 = 时有效，但只要我运行一个 != 查询，程序 (HeidiSQL) 就会无限期挂起或直到我取消它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:58:27.927

您在 brochure_requests 表中没有 customerID 吗？

如果你这样做，你可以这样做：

```
select * from customers 
where customerId not in (select customerId from brochure_requests) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T13:57:31.000

使用`NOT EXISTS`，例如

```
SELECT *      
FROM customers 
WHERE NOT EXISTS (
    SELECT 1
    FROM   brochure_requests
    WHERE  brochure_requests.first_name = customers.customer_first_name
    AND    brochure_requests.last_name = customers.customer_last_name) 
```

我还建议在`brochure_requests.first_name`and`brochure_requests.last_name`字段上添加索引以提高性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T13:58:24.853

```
SELECT 
    *
FROM 
    customers  
    LEFT JOIN brochure_requests
        ON brochure_requests.first_name = customers.customer_first_name
        AND brochure_requests.last_name = customers.customer_last_name

WHERE 
    brochure_requests.first_name IS NULL 
```

此外，请考虑通过将 CustomerID 添加为外键来规范化您的数据库，`brochure_requests`而不是复制名字和姓氏。

# r - 使用 R 中的 fft 从特征函数计算密度

> ID：10029956
> 
> 赞同：5
> 
> 时间：2012-04-05T13:54:06.750
> 
> 标签：r, fft

我想计算特征函数已知的分布的密度函数。以正态分布为例。

```
norm.char<-function(t,mu,sigma) exp((0+1i)*t*mu-0.5*sigma^2*t^2) 
```

然后我想使用 R 的 fft 函数。但我没有得到正确的乘法常数，我必须重新排序结果（取第二半，然后取值的前半）。我尝试了类似的东西

```
 xmax = 5
 xmin = -5
 deltat = 2*pi/(xmax-xmin)
 N=2^8
 deltax = (xmax-xmin)/(N-1)
 x = xmin + deltax*seq(0,N-1)
 t = deltat*seq(0,N-1)
 density = Re(fft(norm.char(t*2*pi,mu,sigma)))
 density = c(density[(N/2+1):N],density[1:(N/2)]) 
```

但这仍然是不正确的。在密度计算的背景下，有人知道 R 中 fft 的一个很好的参考吗？显然，问题在于连续 FFT 和离散 FFT 的混合。有人可以推荐一个程序吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T01:27:41.317

只是很麻烦：拿笔和纸，写下要计算的积分（特征函数的傅里叶变换），离散化，然后重写各项，使它们看起来像离散傅里叶变换（FFT 假设间隔从零开始）。

请注意，这`fft`是一个未归一化的变换：没有`1/N`因子。

```
characteristic_function_to_density <- function(
  phi, # characteristic function; should be vectorized
  n,   # Number of points, ideally a power of 2
  a, b # Evaluate the density on [a,b[
) {
  i <- 0:(n-1)            # Indices
  dx <- (b-a)/n           # Step size, for the density
  x <- a + i * dx         # Grid, for the density
  dt <- 2*pi / ( n * dx ) # Step size, frequency space
  c <- -n/2 * dt          # Evaluate the characteristic function on [c,d]
  d <-  n/2 * dt          # (center the interval on zero)
  t <- c + i * dt         # Grid, frequency space
  phi_t <- phi(t)
  X <- exp( -(0+1i) * i * dt * a ) * phi_t
  Y <- fft(X)
  density <- dt / (2*pi) * exp( - (0+1i) * c * x ) * Y
  data.frame(
    i = i,
    t = t,
    characteristic_function = phi_t,
    x = x,
    density = Re(density)
  )
}

d <- characteristic_function_to_density(
  function(t,mu=1,sigma=.5) 
    exp( (0+1i)*t*mu - sigma^2/2*t^2 ),
  2^8,
  -3, 3
)
plot(d$x, d$density, las=1)
curve(dnorm(x,1,.5), add=TRUE) 
```

# ios5 - 在 iOS 5 中自定义标签栏时出现错误的图像 Y。

> ID：10029961
> 
> 赞同：4
> 
> 时间：2012-04-05T13:54:11.993
> 
> 标签：ios5, uitabbarcontroller, tabbar

iOS 包含 setFinishedSelectedImage:withFinishedUnselectedImage: 用于自定义标签栏。我创建了一些高度为 49 的纹理，我在底部看到了一个奇怪的黑色边框。然后，在添加了一个 alpha 通道后，我意识到问题在于图像向上偏移了大约 4 个点。我发给你截图。而且，这个也有同样的问题（黑色怪线），虽然很难看到。 [http://kurrytran.blogspot.com.es/2011/10/ios-5-tutorial-creating-custom-tab-bar.html](http://kurrytran.blogspot.com.es/2011/10/ios-5-tutorial-creating-custom-tab-bar.html)

![在此处输入图像描述](../Images/caf336373bf69f8c321c4c9bf1bddf51.png)

这是代码： UIImage *selectedImage0 = [UIImage imageNamed:@"count_button_pressed"]; UIImage *unselectedImage0 = [UIImage imageNamed:@"count_button_released"];

```
UIImage *selectedImage1 = [UIImage imageNamed:@"date_button_pressed"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"date_button_released"];

UIImage *selectedImage2 = [UIImage imageNamed:@"stats_button_pressed"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"stats_button_released"];

UITabBar *tabBar = self.tabBar;
UITabBarItem *item0 = [tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBar.items objectAtIndex:2];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2]; 
```

你知道会发生什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T17:26:23.743

tabbaritem 完成的图像不在标签栏上垂直居中，因为它们是标准标签栏项目图标的替代品。

标签栏项目图像被移到顶部，从而为标签栏项目标题文本留出空间。

tabbaritem 完成的图像应该只包含图标。要更改选项卡栏中的选定项目背景，请使用 UITabBar 中的 selectionIndicatorImage 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:02:54.957

您可以创建透明图像并配置您的 UITabbar 以将其用作选择图像。在我看来，它清晰而优雅:)

```
// Create Transparent image on the fly
CGRect rect = CGRectMake(0, 0, 1, 1);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(context, [[UIColor clearColor] CGColor]);

CGContextFillRect(context, rect);
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
// Set tabbar selection image to be the transparent image we've created before
tabBar.selectionIndicatorImage = img; 
```

# maven - 在 Maven 中，我如何递归地构建文件系统中存在但在反应器之外的 -SNAPSHOT 依赖项？

> ID：10029967
> 
> 赞同：4
> 
> 时间：2012-04-05T13:54:28.967
> 
> 标签：maven, maven-2, maven-3

我在文件系统的相邻目录中有两个项目，如下所示：

*   project_a (-SNAPSHOT)
*   project_b（-SNAPSHOT，取决于 project_a）

我想构建 project_b 并让 Maven 发现 project_a 存在于文件系统上，从而构建它，而不是在本地 repo 中查找它的工件。

我可以在聚合器中构建这些并使用反应器来选择 project_b ie

```
mvn --projects project_b [goal] 
```

然而，这是有问题的，因为

*   这个两个项目的例子是我真实构建的简化，它由几十个项目组成，我不想维护一个列出所有项目的聚合器项目。
*   我只想递归构建 -SNAPSHOT 依赖项

有没有一种巧妙的方法可以让 Maven 执行递归构建，在文件系统上查找 -SNAPSHOT 依赖项目并构建它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-26T09:09:36.310

不久前我需要这个，并在 nodejs 中制作了一个简单的递归包装器 cli。[https://github.com/kenglxn/mvnr/blob/master/README.md](https://github.com/kenglxn/mvnr/blob/master/README.md)

从 npm 安装

```
sudo npm install -g mvnr 
```

然后只需将任何 maven 命令传递给 mvnr，它就会在 cwd 下的所有 mvn 项目上运行该命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:19:28.413

您可以使用[Maven Reactor 插件](http://maven.apache.org/plugins/maven-reactor-plugin/index.html)，例如尝试`mvn reactor:make -Dmake.folders=foo,bar`

# javascript - Javascript 对象属性在一个单独的文件中

> ID：10029968
> 
> 赞同：0
> 
> 时间：2012-04-05T13:54:32.867
> 
> 标签：javascript, object, properties

我有一个具有数千个属性的 JavaScript 对象，如果可能的话，我想要将这些属性放在一个单独的文件中（比如说一个 txt），以便系统管理员能够随意进行更改而不会弄乱代码。

这可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:57:03.687

是的，这是[JSON](http://json.org/example.html)（Javascript Object Notation）的完美应用。它允许您将名称/值对存储在充当“迷你数据库”的树结构中。它闪电般快速，易于导航，并且广泛用于可能的平台。

```
{
    "glossary": {
        "title": "example glossary",
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"]
                    },
                    "GlossSee": "markup"
                }
            }
        }
    }
} 
```

# mysql - 如何在mysql数据库中自动编号（自动递增）guid字段

> ID：10029970
> 
> 赞同：0
> 
> 时间：2012-04-05T13:54:33.747
> 
> 标签：mysql, sql-server, database, guid, auto-increment

在 sql-server 中有自动增加 guid 字段的功能。

```
CREATEGUID() 
```

我怎样才能在 Mysql 中做同样的事情？我是数据库编程的新手。我想创建 16 字节自动递增的主键字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:15:16.330

MySQL 具有返回 char/varchar 的 UUID() 函数。例如，您可以使用 BINARY(16) 或 CHAR(36) 来保存这样的数据（二进制文件在插入之前需要一些数据转换）。

但 MySQL 仅支持数字数据类型的 AUTO_INCREMENT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:08:33.273

您可以创建一个 BEFORE INSERT 触发器来检查自动增量 guid 字段的新值，如果它为 NULL，则设置 value = [UUID()](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid)。

这个函数也可能有用 - [UUID_SHORT()](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid-short)。

UUID_SHORT() -*将“短”通用标识符作为 64 位无符号整数返回（而不是 UUID() 函数返回的字符串形式的 128 位标识符）。*

# url - Url Mapping、Url 重定向/重写

> ID：10029971
> 
> 赞同：1
> 
> 时间：2012-04-05T13:54:38.430
> 
> 标签：url, grails, redirect, url-rewriting, url-mapping

我想将我的 '/' uri 重定向到给定控制器的操作。我曾经通过以下代码做到这一点`UrlMappings.groovy`：

```
"/"(action: "highlights", controller: "project") 
```

但是，这不会重写浏览器中的 url。它重定向到正确控制器的操作，但浏览器的导航 URL 仍然位于`myProject/`. 我希望将其更新为“正确的”uri，以便重新加载等使用“正确的”uri。

我试过了：

```
"/"(uri: "/project/highlights") 
```

但我收到状态 404 响应。

关于我应该如何进行的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:03:27.633

UrlMappings 仅用于如何将 url 映射到您的 controller.action。它不会做任何重定向。如果你想做 url 重定向，你可能需要在你的应用服务器前面设置一个 http 服务器，比如 apache，或者更简单的方法是设置一个 controller.action 来手动进行重定向。

```
"/"(action: "redirect", controller: "project") 
```

在`project`控制器和`redirect`操作中，只需将用户重定向到您的`highlights`操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:06:39.627

# javascript - 验证文本框中的数值

> ID：10029974
> 
> 赞同：0
> 
> 时间：2012-04-05T13:54:47.277
> 
> 标签：javascript, regex, validation, numbers

我必须允许用户在文本框中只允许数值。它应该删除任何非数字方法。无论他们如何提供输入...键入或复制+粘贴。

我的代码

```
var nCheck  = function (field) {
var re = /^[0-9]*$/;
               if (!re.test(field.value)) {

                       field.value = field.value.replace(/[^0-9]*$/g,"");
               }
 }; 
```

这有效，除非您复制粘贴类似 aaa2 的内容。而 aaaa 或 aa 工作。问题是当最后一个地方包含失败的数字时。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:57:30.393

做就是了

```
field.value = field.value.replace(/[^0-9]/g,""); 
```

这将替换所有不是数字的东西，您甚至不必运行该`test`函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T13:59:02.407

意思是“字符串的`$`结尾”。删除它，它应该可以工作。

其他提示：

替换`*`为`+`; `*`包括空字符串

也许最好警告用户，以防数字字符是拼写错误（比如按 Q 而不是 1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:57:05.040

如果您使用 jQuery，请查看[textola](http://www.texotela.co.uk/code/jquery/numeric/)一个 jquery 数字插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:00:45.413

没有正则表达式：

```
field.value = isNaN(field.value) ? '' : field.value; 
```

# java - 应该如何组织提供 REST Web 服务的 JEE6 企业应用程序？

> ID：10029976
> 
> 赞同：4
> 
> 时间：2012-04-05T13:55:19.853
> 
> 标签：java, design-patterns, jakarta-ee, rest, jax-rs

从一个月前开始，我一直在努力学习宁静的网络服务。现在我确实练习了语法并且理解了这些概念，我决定制作一个非常简单的企业应用程序，其中包括 EJB、JPA 和 REST。我正在努力了解组织这种系统的最佳方式是什么。如果有该领域经验的人能给我一些关于什么是最佳实践以及如何解决我当前问题的提示，我将不胜感激。

请让我给你看这张图。抱歉，我无法获得更好的分辨率（使用 Ctrl+鼠标向上滚动进行缩放）：

![在此处输入图像描述](../Images/9f951a8888f21a73b0322d8dacb0d511.png)

如您所见，这是一个非常简单的企业应用程序，它有 2 个模块。

此应用程序不使用 CDI（我想在没有 CDI 帮助的情况下实现我的目标，并且）

当一些客户端（任何可互操作的客户端）发送带有一些参数的@GET 时，REST 服务应该将这些参数传递给 EJB 模块，该模块将在数据库中搜索并发回适当的数据。最后，服务将在 JAXB 的帮助下自动编组并将 .XML 发送回客户端。

我的问题如下：

*   我得到一个 ClassCastException，因为 EJB 模块中的实体与 WebModule 中的 JAXB 类不兼容（即使它们的变量相同）
*   我不知道应该如何组织事情，以便前端可以编组和解组这些实体。
*   实体类是否应该与 JAXB 映射结合在前端？如果那样的话，就不再需要 EJB 模块了。但问题是，我想要 EJB 模块，因为我经常在那里进行 CRUD 操作。
*   将 EJB 公开为 REST Web 服务（混合）怎么样？你认为这是个好主意吗？它对我有什么帮助？
*   同样，如果我在 web 模块中创建 JAXRS+EJB 的混合体，我必须在前端创建我的 JPA 实体，这是我以前从未做过的事情。你认为这是一个好习惯吗？
*   你有什么建议？使用 REST Web 服务的企业应用程序的组织方式通常是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:53:48.323

下面是一个作为会话 bean 实现的 JAX-RS 服务的示例，它使用 JPA 进行持久性，使用 JAXB 进行消息传递可能看起来像这样。（注意 an`EntityManager`被注入到会话 bean 中，为什么要避免这种行为？）：

```
package org.example;

import java.util.List;

import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Stateless
@LocalBean
@Path("/customers")
public class CustomerService {

    @PersistenceContext(unitName="CustomerService",
                        type=PersistenceContextType.TRANSACTION)
    EntityManager entityManager;

    @POST
    @Consumes(MediaType.APPLICATION_XML)
    public void create(Customer customer) {
        entityManager.persist(customer);
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("{id}")
    public Customer read(@PathParam("id") long id) {
        return entityManager.find(Customer.class, id);
    }

    @PUT
    @Consumes(MediaType.APPLICATION_XML)
    public void update(Customer customer) {
        entityManager.merge(customer);
    }

    @DELETE
    @Path("{id}")
    public void delete(@PathParam("id") long id) {
        Customer customer = read(id);
        if(null != customer) {
            entityManager.remove(customer);
        }
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("findCustomersByCity/{city}")
    public List<Customer> findCustomersByCity(@PathParam("city") String city) {
        Query query = entityManager.createNamedQuery("findCustomersByCity");
        query.setParameter("city", city);
        return query.getResultList();
    }

} 
```

如果要在服务器端和客户端使用相同的域对象。然后我将通过 XML 而不是注释提供 JPA 映射，以避免客户端上的类路径依赖。

**了解更多信息**

*   [第 1 部分 - 数据模型](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-15.html)
*   [第 2 部分 - JPA](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-25.html)
*   [第 3 部分 - JAXB（使用 MOXy）](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html)
*   [第 4 部分 - RESTful 服务（使用 EJB 会话 bean）](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html)
*   [第 5 部分 - 客户](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-55.html)

* * *

**更新**

**META-INF/persistence.xml**

persistence.xml 文件是您指定指向包含 JPA 映射的 XML 文件的链接的位置：

```
<persistence-unit name="CustomerService" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>CustomerService</jta-data-source>
    <mapping-file>META-INF/orm.xml</mapping-file>
</persistence-unit> 
```

**META-INF/orm.xml**

您将在此文件中添加 JPA 元数据的 XML 表示。

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings
    version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">
    <entity class="org.example.Customer">
         <named-query name="findCustomersByCity">
            <query>SELECT c FROM Customer c WHERE c.address.city = :city</query>
         </named-query>
         <attributes>
            <id name="id"/>
            <basic name="firstName">
                <column name="FIRST_NAME"/>
            </basic>
            <basic name="lastName">
                <column name="LAST_NAME"/>
            </basic>
            <one-to-many name="phoneNumbers" mapped-by="customer">
                <cascade>
                    <cascade-all/>
                </cascade>
            </one-to-many>
            <one-to-one name="address" mapped-by="customer">
                <cascade>
                    <cascade-all/>
                </cascade>
            </one-to-one>
         </attributes>
    </entity>
    <entity class="org.example.Address">
        <attributes>
            <id name="id"/>
            <one-to-one name="customer">
                <primary-key-join-column/>
            </one-to-one>
        </attributes>
    </entity>
    <entity class="org.example.PhoneNumber">
        <table name="PHONE_NUMBER"/>
        <attributes>
            <id name="id"/>
            <many-to-one name="customer">
                <join-column name="ID_CUSTOMER"/>
            </many-to-one>
        </attributes>
    </entity>
</entity-mappings> 
```

**了解更多信息**

*   [创建 RESTful Web 服务 - 第 2/5 部分（XML 元数据）](http://blog.bdoughan.com/2012/04/creating-restful-web-service-part-25.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:39:15.457

I think that you miss one additional component here - application service. Additionally, your `CRUDFacade` is just a `CredentialRepository`.

With components I mentioned above, there are two possible solutions:

1.  If you had an application service clearly separated, yours `SampleService` would be just one of many possible methods of exposing such service to the outside world. You can have `SampleRestResource`, `SampleYamlResource` ;) or any other of your choice. In such case, I'd recommend to create `CredentialDTO` and annotate its fields with `@XmlRootElement`. Yours application service returns this DTO to the outside world and `SampleRestResource` (formerly `SampleService`) just forwards it.
2.  If you don't want to introduce additional building blocks like DTO (maybe along with assembler) and the separate `SampleRestResource` class, you can add annotations on your application service methods - I'm not sure if it's possible with all JAXWS implementations, though.

Following approach I described, usually I put rest resources along with application services in one module. Your EJB module (which currently looks for me as a pure domain module) is just one of its dependencies.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:42:29.013

将您要公开的域与模型域分开是一个好主意，所以我会保持这样，实体和生成的类不耦合。解决此 ClassCastException 的一种直接方法是在 Web 模块中将 jaxb 类映射到作为输入的实体，反之亦然作为输出。您可以手动完成，也可以使用不同的库来解决此映射问题。即推土机（http://dozer.sourceforge.net/）

# sql-server - 如何检查 SQL Server 表是否为系统表

> ID：10029979
> 
> 赞同：10
> 
> 时间：2012-04-05T13:55:36.340
> 
> 标签：sql-server, tsql, ssms

使用存储过程`sp_msforeachtable`可以为数据库中的所有表执行脚本。

但是，我想从中排除一些系统表。本能地，我会检查属性`IsSystemTable`或`IsMSShipped`. 这些不像我期望的那样工作 - 例如，我有一个名为`__RefactorLog`：

![系统表](../Images/bb5b1f68889256fff2baff32d620622d.png)

但是当我查询这是一个系统表还是 MS Shipped 表时，SQL Server 报告我的表都不是系统表：

```
exec (N'EXEC Database..sp_msforeachtable "PRINT ''? = '' + CAST(ObjectProperty(Object_ID(''?''), ''IsSystemTable'') AS VARCHAR(MAX))"') AS LOGIN = 'MyETLUser'
-- Results of IsSystemTable:
[dbo].[__RefactorLog] = 0
[schema].[myUserTable] = 0 
```

和

```
exec (N'EXEC Database..sp_msforeachtable "PRINT ''? = '' + CAST(ObjectProperty(Object_ID(''?''), ''IsMSShipped'') AS VARCHAR(MAX))"') AS LOGIN = 'MyETLUser'

-- Results of IsMSShipped:
[dbo].[__RefactorLog] = 0
[schema].[myUserTable] = 0 
```

当我查看表的属性（在 SSMS 内）时，该表被标记为系统对象。`IsSystemObject`但是不存在类似的对象属性（AFAIK）。

除了对象属性之外，如何检查表是否是系统对象？SSMS 如何检查表是否为系统对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T14:05:59.517

在对象资源管理器中打开“系统表”文件夹时，Management Studio 2008 似乎运行了一些非常难看的代码，关键位似乎是：

```
CAST(
 case 
    when tbl.is_ms_shipped = 1 then 1
    when (
        select 
            major_id 
        from 
            sys.extended_properties 
        where 
            major_id = tbl.object_id and 
            minor_id = 0 and 
            class = 1 and 
            name = N''microsoft_database_tools_support'') 
        is not null then 1
    else 0
end          
             AS bit) AS [IsSystemObject] 
```

`tbl`（的别名在哪里`sys.tables`）

所以它似乎是一个组合——要么`is_ms_shipped`是`sys.tables`1，要么具有特定的扩展属性集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T17:29:41.260

__refactorlog 与 SSMS 所建议的相反，是一个用户表。它用于在部署期间跟踪无法从当前数据库状态推断出的架构更改，例如重命名表。

如果所有其他用户表都在自定义（非 dbo）模式中，则可以使用 isMSshipped/isSystemTable 属性和模式名称的组合来确定表是否在脚本的“范围内”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:06:53.307

在过去，我一直假设在 sys.objects 表中，列 is_ms_shipped 指示对象是否是系统对象。（此列被其他系统表继承，例如 sys.tables。）

该标志可以由过程 sp_ms_markSystemObject 设置。然而，这是一个未记录的过程，不受 Microsoft 支持，我认为我们不应该知道它，所以我没有告诉你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:15:13.053

我错过了什么吗？

> 但是，我想从中排除一些系统表

至少在 SQL Server 2008 上，`sp_MSforeachtable` **已经**排除了系统表，正如它的摘录所示：

```
+ N' where OBJECTPROPERTY(o.id, N''IsUserTable'') = 1 ' + N' and o.category & ' + @mscat + N' = 0 ' 
```

# c# - 从 HTML 页面上单击的按钮调用 C# 函数

> ID：10029981
> 
> 赞同：2
> 
> 时间：2012-04-05T13:55:36.993
> 
> 标签：c#, html

我的应用程序 (C#) 包含一个嵌入式 Web 浏览器，它将从服务器加载 HTML 页面。将为这个特定的应用程序从头开始创建 HTML 页面。我的意图是有以下程序：

*   用户打开应用程序
*   嵌入在应用程序中的 Web 浏览器将加载 HTML 页面
*   用户将单击 HTML 页面上的按钮
*   此操作触发 AC# 功能（在客户端）
*   功能做一些工作
*   将数据列表发送回网页
*   网页将检索此数据并显示它
*   用户的浏览器将被刷新以显示新页面

现在我的问题如下：

*   在服务器页面上单击按钮时如何触发客户端的C#函数

*   传输数据的最佳方式是什么（可能是对象）

*   HTML页面上的函数如何在继续执行函数之前等待接收到数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:12:48.887

使用 WebBrowser 控件，您可以使用[ObjectForScripting](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)属性。这将允许 JavaScript 使用 window.external 调用 C# 代码。*C# 方法名*

您可能需要解决序列化问题，您可能需要使用*webbrowser* .Document.InvokeScript 将您的数据触发回 JavaScript（我没有亲自使用 window.external 调用的结果，所以不能代表它）。

# c# - ShowDialog() 没有得到 DialogResult

> ID：10029982
> 
> 赞同：4
> 
> 时间：2012-04-05T13:55:40.340
> 
> 标签：c#, winforms, visual-studio-2010

这很奇怪。我从来没有在 C# 中遇到过 ShowDialog 的这个问题。出于某种奇怪的原因，当为 64 位操作系统开发的代码尝试显示打印机对话框时，它从不这样做，并且 DialogResult 为“无”。我已经通过逐行调试它并且看不到任何线索。我检查了命名空间并确认我设置了正确的引用：

```
using System.IO;
using System.Windows.Forms; 
```

这是代码：

```
 private void printToolStripMenuItem_Click(object sender, EventArgs e)
    {
        printDoc.DefaultPageSettings = pgSettings;
        PrintDialog dlg = new PrintDialog();
        dlg.Document = printDoc;
        if (dlg.ShowDialog() == DialogResult.OK)
        {
            printDoc.Print();
        }
    } 
```

对于 32 位机器，完全相同的代码在几乎相同的版本中没有问题。显示对话框，用户选择打印机，按 OK，任务完成。

在 64 位版本中，ShowDialog() 对 PrintDialog() 不起作用，但对 PrintPreviewDialog() 起作用！

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:59:26.960

我认为这已经在其他地方得到了回答：

[http://social.msdn.microsoft.com/Forums/en-US/netfx64bit/thread/a707d202-1a8b-43b1-9fff-08aa7ceb200a/](http://social.msdn.microsoft.com/Forums/en-US/netfx64bit/thread/a707d202-1a8b-43b1-9fff-08aa7ceb200a/)

> 尝试设置 USEExDialog = True - 它应该可以工作。

# c# - C# 和 libharu：使用 TTF 字体

> ID：10029985
> 
> 赞同：1
> 
> 时间：2012-04-05T13:55:47.140
> 
> 标签：c#, truetype, libharu

我正在尝试在 libharu 中使用 TTF 字体。

```
string arialtmp = doc.LoadTTFontFromFile("c:\\windows\\fonts\\ariali.ttf", true);
HPdfFont arial2 = doc.GetFont(arialtmp, "CP1250");

page.SetFontAndSize(arial2, 25);
page.BeginText();
page.MoveTextPos(50, 650);
page.ShowText("bla blaa!!");
page.EndText(); 
```

但是 libharu 不使用 ariali.ttf 。我没有得到任何编译错误或其他任何东西，libharu 只是不使用该字体。我也可以写该死的.ttf 并得到相同的结果。

那么有什么问题呢？

我正在使用带有 c# 界面和 Visual Studio 2010 的 libharu

# java - 在 Java 密钥库中存储 PGP（公共）密钥 - Bouncycastle

> ID：10029987
> 
> 赞同：6
> 
> 时间：2012-04-05T13:55:55.293
> 
> 标签：java, bouncycastle, pgp

我在 SSO 的实现中使用 bouncycastle (JAVA) 进行签名、加密、解密和签名验证。我有原始 PGP 公钥和私钥，我需要将它们存储在 Java 密钥库中。这些 PGP 公钥没有证书。

我知道对于公钥（根据 Keystore 的 javadoc：http: [//docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)），我必须创建证书。创建证书后，我可以将其作为 KeyStore.TrustedCertificateEntry 导入密钥库。但是，我无法为 org.bouncycastle.openpgp.PGPPublicKey 类型创建证书条目。

我在网上搜索过，但找不到任何有效的例子：

1.  Bouncycastle 文档：[http](http://www.bouncycastle.org/wiki/display/JA1/X.509+Public+Key+Certificate+and+Certification+Request+Generation) ://www.bouncycastle.org/wiki/display/JA1/X.509+Public+Key+Certificate+and+Certification+Request+Generation 为 X.509 密钥生成证书 -
2.  Bouncycastle 示例 - org.bouncycastle.openpgp.examples.DirectKeySignature：将证书（PGPSignature 类型的对象）直接添加到 PGPPublicKey。总而言之 - 我已经签署（认证）PGPPublicKey，但我无法将这种类型的密钥存储到 java 密钥库中。

    ```
    OutputStream out = new ByteArrayOutputStream();

    if (armor)
    {
        out = new ArmoredOutputStream(out);
    }

    PGPPrivateKey pgpPrivKey = secretKey.extractPrivateKey(secretKeyPass.toCharArray(), "BC");

    PGPSignatureGenerator       sGen = new PGPSignatureGenerator(secretKey.getPublicKey().getAlgorithm(), PGPUtil.SHA1, "BC");

    sGen.initSign(PGPSignature.DIRECT_KEY, pgpPrivKey);

    BCPGOutputStream            bOut = new BCPGOutputStream(out);

    sGen.generateOnePassVersion(false).encode(bOut);

    PGPSignatureSubpacketGenerator spGen = new PGPSignatureSubpacketGenerator();

    boolean isHumanReadable = true;

    spGen.setNotationData(true, isHumanReadable, notationName, notationValue);

    PGPSignatureSubpacketVector packetVector = spGen.generate();
    sGen.setHashedSubpackets(packetVector);

    bOut.flush();

    return PGPPublicKey.addCertification(keyToBeSigned, sGen.generate()).getEncoded(); 
    ```

我主要对编程解决方案（java 源代码）感兴趣，但使用一些工具的示例也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:27:18.817

我认为您应该从中提取 a`java.security.PublicKey`并`PGPPublicKey`使用它来构造一个`X509Certificate`可以存储在密钥库中的内容。

```
JcaPGPKeyConverter c = new JcaPGPKeyConverter();
PublicKey publicKey = c.getPublicKey(pgpPublicKey);
// ... Use Bouncy's X509V3CertificateGenerator or X509v3CertificateBuilder
// ... to construct a self-signed cert
X509Certificate x509Certificate = // ...
// ... add cert to KeyStore 
```

`X509Certificate`从查看创建一个`PublicKey`：[生成随机证书](https://stackoverflow.com/questions/9787467/generate-random-certificates)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T01:55:28.227

如果您只想保存公钥，为什么不能将密钥内容保存到 Java 密钥库中？然后检索内容并在需要时转换为 PGPPublicKey 对象。

首先创建一个包装类

```
public class PgpPublicKeyWrapper implements Key {
    private final String keyContent;
    public PgpPublicKeyWrapper(final String keyContent) {
        this.keyContent = keyContent;
    }
    @Override
    public String getAlgorithm() {
        return "PGP-PublicKey"; // you can call whatever you want
    }
    @Override
    public String getFormat() {
        return "RAW"; // has to be raw format
    }
    @Override
    public byte[] getEncoded() {
        return keyContent.getBytes();
    }
} 
```

然后你可以这样做来保存它

```
keyStore.setKeyEntry("think a name for alias", new PgpPublicKeyWrapper(key), PASSWORD, null); 
```

当你想找回它

```
Key key = this.keyStore.getKey(alias, PASSWORD);
InputStream is = new ByteArrayInputStream(key.getEncoded());
PGPPublicKey publicKey = readPublicKey(is); 
```

对于 readPublicKey()，您可以在网上找到很多关于如何将 InputStream 读取到 PGPPublicKey 对象的示例。

# android - 测得的频率切换时间与 cpuinfo_transition_latency 不同

> ID：10029998
> 
> 赞同：2
> 
> 时间：2012-04-05T13:56:25.697
> 
> 标签：android, arm, scaling, frequency, measurement

我刚刚在 Pandaboard ES（OMAP4460，ARM Cortex A9，1.2 GHz）上进行了一些测量，以检查 CPU 频率变化需要多长时间。我正在运行带有 3.0.8 内核的 Android 4.0.3。我修改了`omap_cpufreq_scale()`函数，在函数`omap2plus-cpufreq.c`的入口和出口处切换了一个 GPIO 引脚，并用示波器测量了时间。

测得的开关时间在和之间变化`3.9ms`，`4.5ms`而

```
cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_transition_latency 
```

报告`300000ns`将是`0.3 ms`. 有谁知道为什么会有如此大的差异？transition_latencies 通常是如何确定的？

我在数据表中找不到任何时序值。

更新：

我在修改后的内核模块中发现了一个小错误。测量的执行时间位于 和 的范围内`268µs`，`1210µs`具体取决于原始频率和所选频率。

# php - MySQL PHP：在日期时间列中使用 NOW() 时获取 0000-00-00 00:00:00

> ID：10029999
> 
> 赞同：0
> 
> 时间：2012-04-05T13:56:33.360
> 
> 标签：php, mysql

使用以下代码中的 SQL：

```
public function saveOrder() {
  $id = $this->getUserId();
  $this->db->query("INSERT INTO orders VALUES (null, '$id', '$this->basket_lines', '$this->total', NOW() )");
  return $this->db->id();  
} 
```

上面的最后一列是`DATETIME`字段，数据库中的结果默认为`0000-00-00 00:00:00`.

我也尝试过列格式`timestamp`并使用：

```
ALTER TABLE  `content ` CHANGE  `date`  `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

从另一个帖子，但无济于事。

谁能发现什么问题？

谢谢

编辑：顺便说一句，我正在使用从 DB 类中转义我的 SQL 语句

```
 $this->SQL = $this->mysqli->real_escape_string($SQL);
    $this->result = $this->mysqli->query($SQL); 
```

编辑 2：我现在正在逃避预查询

```
 $i=mysql_real_escape_string($id);
    $b=mysql_real_escape_string($this->basket_lines);
    $t=mysql_real_escape_string($this->total);
    $this->db->query("INSERT INTO orders VALUES (null, '$i', '$b', '$t', NOW() )"); 
```

仍然无法正常工作，这一切都很奇怪吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:03:22.557

您没有转义**任何**数据。您的数据很可能会弄乱您的其余查询。您也很可能对 SQL 注入持开放态度。至少，您应该使用[`mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)，但最好将[准备好的查询与 PDO](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:06:46.217

如果字段是 TIMESTAMP 类型

尝试

```
$this->db->query("INSERT INTO orders VALUES (null, '$id', '$this->basket_lines', '$this->total', CURRENT_TIMESTAMP() )"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:07:25.430

我认为查询本身没有任何问题。

但是，我建议您阅读这两个链接。
[http://nl.php.net/manual/en/book.pdo.php](http://nl.php.net/manual/en/book.pdo.php)
[http://nl3.php.net/manual/en/function.mysql-real-escape-string.php](http://The%20way%20you%27re%20using%20mysql%20is%20a%20HUGE%20security%20risk.)
你使用的方式mysql 是一个巨大的安全风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:42:11.097

您的转义概念错了，您需要转义您将插入 DB 中的数据，以防止 SQL 注入，而不是整个查询！因此，您应该执行以下操作：

```
$id=$this->mysqli->real_escape_string($id);
$basketlines=$this->mysqli->real_escape_string($this->basket_lines);
$total=$this->mysqli->real_escape_string($this->total);   
$SQL="INSERT INTO orders VALUES (null, '$id', '$basketlines', '$total', NOW() )");
$this->result = $this->mysqli->query($SQL); 
```

我很确定您的所有问题都是因为在转义整个查询时，查询变得格式错误，不再是有效的 SQL 查询。