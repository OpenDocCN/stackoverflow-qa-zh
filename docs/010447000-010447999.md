# StackOverflow 问答 10447000-10447999

# php - 如何从此 JSON 中提取数据？

> ID：10447000
> 
> 赞同：-2
> 
> 时间：2012-05-04T10:24:37.833
> 
> 标签：php, arrays, json, extract

我得到了这个 JSON，但必须知道如何从中提取数据。

我试过`$data['success'][0]['success']`了，它奏效了

但是我想要像 $getPlayerLimit 这样的东西并返回 1000

```
Array
(
    [result] => success
    [source] => Array
        (
            [0] => getPlayerLimit
            [1] => getPlayerCount
        )

    [success] => Array
        (
            [0] => Array
                (
                    [result] => success
                    [source] => getPlayerLimit
                    [success] => 1000
                )

            [1] => Array
                (
                    [result] => success
                    [source] => getPlayerCount
                    [success] => 0
                )

        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:32:59.377

可以迭代数组以找到`getPlayerLimit`

```
 foreach($data['success'] as $item)
    {
        if($item['source'] == 'getPlayerLimit')
        {
            /*
                $item looks like:

                Array
                (
                    [result] => success
                    [source] => getPlayerLimit
                    [success] => 1000
                )
            */
            echo 'player limit is: ' . $item['success'];
        }
    } 
```

# java - MySQL 在 Preparing Statement 中被阻塞，行为非常奇怪

> ID：10447009
> 
> 赞同：4
> 
> 时间：2012-05-04T10:25:05.507
> 
> 标签：java, mysql, query-optimization

就像我之前解释[的](https://stackoverflow.com/questions/10213886/set-priorities-between-mysql-processes)那样，我的 mysql 数据库服务器出现了一些问题。我会知道您的意见并有一些想法，因为我在一个黑洞中，我不知道，因为正在发生服务器的行为。

我将尝试解释所有环境。我有 1 个数据库，有很多表。我们用 java 制作了一个导出器工具，可以从数据库中导出所有数据。数据存储在 5 个不同的表中，我需要将数据连接到 5 个表中。这些是表格：

DB的结构是一个从一些传感器接收信息并存储它的系统。

测量表：我们从传感器接收到的测量值。

```
+--------------------+------------+------+-----+---------+----------------+
| Field              | Type       | Null | Key | Default | Extra          |
+--------------------+------------+------+-----+---------+----------------+
| id                 | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version            | bigint(20) | NO   |     | NULL    |                |
| counter            | char(2)    | YES  |     | NULL    |                |
| datemeasurement_id | datetime   | NO   | MUL | NULL    |                |
| datereal_id        | datetime   | NO   | MUL | NULL    |                |
| delayed            | bit(1)     | NO   |     | NULL    |                |
| frequency          | tinyint(4) | YES  |     | NULL    |                |
| measuringentity_id | bigint(20) | NO   | MUL | NULL    |                |
| real               | bit(1)     | NO   |     | NULL    |                |
| tamper             | bit(1)     | NO   |     | NULL    |                |
| value              | float      | NO   |     | NULL    |                |
+--------------------+------------+------+-----+---------+----------------+ 
```

测量实体表：一个传感器可以测量多个事物（温度、湿度）。这些就是实体。

```
+--------------+------------+------+-----+---------+----------------+
| Field        | Type       | Null | Key | Default | Extra          |
+--------------+------------+------+-----+---------+----------------+
| id           | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version      | bigint(20) | NO   |     | NULL    |                |
| household_id | varchar(4) | NO   | MUL | NULL    |                |
| operative    | bit(1)     | NO   |     | NULL    |                |
| type         | char(20)   | NO   |     | NULL    |                |
| unit         | char(3)    | NO   |     | NULL    |                |
| interval     | float      | YES  |     | NULL    |                |
+--------------+------------+------+-----+---------+----------------+ 
```

sensor_measuring_entity：一个传感器可以关联多个实体。

```
+--------------------+------------+------+-----+---------+-------+
| Field              | Type       | Null | Key | Default | Extra |
+--------------------+------------+------+-----+---------+-------+
| sensor_id          | bigint(20) | NO   | PRI | NULL    |       |
| measuringentity_id | bigint(20) | NO   | PRI | NULL    |       |
| version            | bigint(20) | NO   |     | NULL    |       |
+--------------------+------------+------+-----+---------+-------+ 
```

传感器表：传感器的信息，与上表中的测量实体相关。

```
+---------------------+-------------+------+-----+---------+----------------+
| Field               | Type        | Null | Key | Default | Extra          |
+---------------------+-------------+------+-----+---------+----------------+
| id                  | bigint(20)  | NO   | PRI | NULL    | auto_increment |
| version             | bigint(20)  | NO   |     | NULL    |                |
| battery             | bit(1)      | NO   |     | NULL    |                |
| identifier          | char(6)     | NO   |     | NULL    |                |
| installationdate_id | datetime    | NO   | MUL | NULL    |                |
| lastreceiveddate_id | datetime    | YES  | MUL | NULL    |                |
| location_id         | bigint(20)  | NO   | MUL | NULL    |                |
| operative           | bit(1)      | NO   |     | NULL    |                |
| tampererror         | smallint(6) | NO   |     | NULL    |                |
+---------------------+-------------+------+-----+---------+----------------+ 
```

位置表：放置传感器的位置。

```
+------------+------------+------+-----+---------+----------------+
| Field      | Type       | Null | Key | Default | Extra          |
+------------+------------+------+-----+---------+----------------+
| id         | bigint(20) | NO   | PRI | NULL    | auto_increment |
| version    | bigint(20) | NO   |     | NULL    |                |
| height     | tinyint(4) | YES  |     | NULL    |                |
| operative  | bit(1)     | NO   |     | NULL    |                |
| place      | char(15)   | NO   | MUL | NULL    |                |
| room       | char(15)   | NO   |     | NULL    |                |
| typesensor | char(15)   | NO   |     | NULL    |                |
| formaster  | bit(1)     | YES  |     | NULL    |                |
+------------+------------+------+-----+---------+----------------+ 
```

导出信息的算法对于像这样跨越数据，尝试导出我们可以在单独的 csv 文件中拥有的所有类型的传感器的单独信息非常重要：

```
for (int i = 0; i < households.length; i++) {

openConnection();

for (int j = 0; j < values.length; j++) {

    for (int k = 0; k < rooms.length; k++) {

        if (places.length > 0) {

        for (int l = 0; l < places.length; l++) {

            for (int m = 0; m < height.length; m++) {

                export(startDate2, endDate,
                    households[i], values[j],
                    rooms[k], places[l],height[m]);
                }
            }
        } else {
            for (int m = 0; m < height.length; m++) {

                export(startDate2, endDate,
                    households[i], values[j],
                    rooms[k], null, height[m]);
            }
        }

    }
}

try {
    connection.close();
} catch (SQLException e1) {
    e1.printStackTrace();
}

        }

public void export(String startTime, String endTime, String household,
        String type, String room, String place, String height)
        throws ExporterException {

    String sql = buildSQLStatement(startTime, endTime, household, type,
            room, place, height);

    Statement query;

    try {
        query = connection.createStatement();
        ResultSet result = query.executeQuery(sql); 
        …
        (The exporting to csv code)
        …

private String buildSQLStatement(String startTime, String endTime,
        String household, String type, String room, String place,
        String height) {

    String sql = "select HIGH_PRIORITY m.datemeasurement_id, me.type, l.place, m.value, l.room, l.height, s.identifier "
            + "FROM measurement as m STRAIGHT_JOIN measuring_entity as me ON m.measuringentity_id = me.id "
            + "STRAIGHT_JOIN sensor_measuring_entity as sme ON me.id = sme.measuringentity_id "
            + "STRAIGHT_JOIN sensor as s ON sme.sensor_id = s.id "
            + "STRAIGHT_JOIN location as l ON l.id = s.location_id"
            + " WHERE m.datemeasurement_id "
            + " >"
            + "'"
            + startTime
            + "'"
            + " AND m.datemeasurement_id"
            + " <"
            + "'"
            + endTime
            + "'"
            + " AND m.measuringentity_id"
            + " IN (SELECT  me.id FROM measuring_entity AS me WHERE me.household_id="
            + "'"
            + household
            + "'"
            + ")"; 
```

我的大问题是：有时这个应用程序使用数据库中的这段代码，运行起来真的很慢。MySQL 运行速度非常慢，而 MYSQL 在其他时候运行速度非常快。我们无法理解为什么会发生这种行为差异。

例如，当它很慢时（CPU 的 0.3-0%），从数据库中导出所有数据可能需要大约 3 天（大约 200.000 个查询），但就像我之前说的，有些时候服务器会执行在 30-40 分钟内完成相同的工作（CPU 的 85%）。

我们看到的问题是，当行为缓慢时，mysql 会花费大量时间处于“准备”状态（每个查询大约 140 秒），试图优化查询，但就像我说的那样，这种情况只会发生几次. 不是每次。

```
1016 | root   | localhost:53936                | OptimAAL      | Query   |   10 | preparing | select HIGH_PRIORITY m.datemeasurement_id, me.type, l.place, m.value, l.room, l.height, s.identifier 
```

这些是可以执行的查询之一：

```
EXPLAIN select HIGH_PRIORITY m.datemeasurement_id, me.type,
l.place,m.value, l.room, l.height, s.identifier
FROM measurement as m
STRAIGHT_JOIN measuring_entity as me ON m.measuringentity_id=me.id
STRAIGHT_JOIN sensor_measuring_entity as sme ON me.id=sme.measuringentity_id
STRAIGHT_JOIN sensor as s ON sme.sensor_id=s.id
STRAIGHT_JOIN location as l ON l.id=s.location_id
WHERE m.datemeasurement_id  >'2012-01-19 06:19:00'
AND m.datemeasurement_id <'2012-01-19 06:20:00'
AND m.measuringentity_id IN (SELECT  me.id FROM measuring_entity AS me
WHERE me.household_id='0022')
AND (height = '0')
AND (type = 'Brightness')
AND (place = 'Corner')
AND (room = 'Living room')
ORDER BY datemeasurement_id 
```

这是解释的结果：

```
+----+--------------------+-------+-----------------+-----------------------------------------------+--------------------+---------+-------------------------------+------+-------------+
| id | select_type        | table | type            | possible_keys                                 | key                | key_len | ref                           | rows | Extra       |
+----+--------------------+-------+-----------------+-----------------------------------------------+--------------------+---------+-------------------------------+------+-------------+
|  1 | PRIMARY            | m     | range           | FK93F2DBBC6292BE2,FK93F2DBBCA61A7F92          | FK93F2DBBC6292BE2  | 8       | NULL                          |    4 | Using where |
|  1 | PRIMARY            | me    | eq_ref          | PRIMARY                                       | PRIMARY            | 8       | OptimAAL.m.measuringentity_id |    1 | Using where |
|  1 | PRIMARY            | sme   | ref             | PRIMARY,FK951FA3ECA61A7F92,FK951FA3ECF9AE4602 | FK951FA3ECA61A7F92 | 8       | OptimAAL.m.measuringentity_id |    1 | Using index |
|  1 | PRIMARY            | s     | eq_ref          | PRIMARY,FKCA0053BA3328FE22                    | PRIMARY            | 8       | OptimAAL.sme.sensor_id        |    1 |             |
|  1 | PRIMARY            | l     | eq_ref          | PRIMARY,place                                 | PRIMARY            | 8       | OptimAAL.s.location_id        |    1 | Using where |
|  2 | DEPENDENT SUBQUERY | me    | unique_subquery | PRIMARY,FK11C7EA07E6EB51F2                    | PRIMARY            | 8       | func                          |    1 | Using where |
+----+--------------------+-------+-----------------+-----------------------------------------------+--------------------+---------+-------------------------------+------+-------------+ 
```

显然，如果我们更改日期间隔的值，数据量会增加很多，因为我们的数据库中有大约 100 万个测量值。

我尝试了一切：

更改 mySQL 配置文件 (/etc/my.cnf)：

```
[mysqld]
#bind-address = 141.21.8.197
max_allowed_packet = 128M
sort_buffer_size = 512M
max_connections=500
query_cache_size = 512M
query_cache_limit = 512M
query-cache-type = 2
table_cache = 80
thread_cache_size=8
key_buffer_size = 512M
read_buffer_size=64M
read_rnd_buffer_size=64M
myisam_sort_buffer_size=64M
innodb_flush_log_at_trx_commit=2
innodb_buffer_pool_size=700M
innodb_additional_mem_pool_size=20M
datadir=/data/mysql
socket=/var/lib/mysql/mysql.sock
user=mysql
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0
#Enable logs
log = /var/log/mysql/mysql-log.log 
log-error = /var/log/mysql/mysql-error.log  
long_query_time = 1
log-slow-queries = /var/log/mysql/mysql-slow.log
[mysqld_safe]
log-error=/var/log/mysql/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

*   使用不同类型的 JOIN 来强制它避免优化查询。
*   使用 nice -20 为过程提供最高优先级。
*   在代码中使用存储过程而不是查询。
*   关闭与数据库的任何其他连接，只为我拥有数据库，没有任何其他连接。
*   更改并尝试优化查询。
*   ...

正如你所看到的，我尝试了一切，但我不知道我能做些什么来确保服务器始终保持快速。

这些是服务器的信息：

```
MySQL version:  5.1.61-log / x86_64 
RAM: 8 GB
OS: CentOS release 6.2 (Final)
CPU: 4 Cores / Xeon E6510  @ 1.73GHz 
```

我真的很感谢你的帮助，

编辑：

我想补充一点，现在对我来说最大的问题是为什么会发生服务器的不同行为。因为我知道可以优化查询，但有时使用此代码可以非常快速地工作。

我现在的噩梦是知道为什么有时工作速度很快，但并非总是如此。现在我正在与 IT 人员核实是否可能是硬件访问、硬盘或类似问题。

看起来这也可能是 SQL 配置的问题，或者可能是它在 MYSQL 中的查询优化器，但我无法发现我的黑洞的解决方案是什么。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:50:39.393

我可以想到一些你可以做的优化。

首先，使用绑定变量和准备好的语句。

```
PreparedStatment stmt = connection.prepareStatement(
"select HIGH_PRIORITY m.datemeasurement_id, me.type, l.place, m.value, l.room, l.height, s.identifier "
+ "FROM measurement as m STRAIGHT_JOIN measuring_entity as me ON m.measuringentity_id = me.id "
+ "STRAIGHT_JOIN sensor_measuring_entity as sme ON me.id = sme.measuringentity_id "
+ "STRAIGHT_JOIN sensor as s ON sme.sensor_id = s.id "
+ "STRAIGHT_JOIN location as l ON l.id = s.location_id"
+ " WHERE m.datemeasurement_id  > ? "
+ " AND m.datemeasurement_id  < ? "
+ " AND m.measuringentity_id IN (SELECT  me.id FROM measuring_entity AS me WHERE me.household_id= ? )";

stmt.setDate(1, startDate);
stmt.setDate(2, endDate);
stmt.setString(3, household);

stmt.executeQuery(); 
```

其次，删除 IN - 你不能在这里对测量实体使用单独的连接吗？IN 通常表现不佳。

第三，您可以使用批处理来执行插入吗？批量插入应该可以显着提高速度。

这些是我能想到的几件事。如果您的查询没有在 Java 端进行优化，那么世界上所有的 SQL 调优都将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:50:23.237

我的总体答案是，只对所有数据进行一次查询，然后用 java 将其拆分。（使用几乎相同的代码，您在那里发布）

第一个瓶颈是为每个家庭打开连接。第二个取决于家庭、价值、房间、地点、高度数组的大小。发送这么多查询是个坏主意，因为连接的开销非常大。您应该将每条信息连接到一个（可能是大查询）中并计算您需要多长时间来获取数据）。

# python - 如何使用列表理解从这个列表列表中创建一个列表？

> ID：10447010
> 
> 赞同：-2
> 
> 时间：2012-05-04T10:25:05.723
> 
> 标签：python, list, python-3.x

**如何在一行中做到这一点。**

```
 b=[['1','2','3','4','5'],['11','12','13','14','15'],['6','7','8','9','10']]
   c=[]
   for x in b:
        for y in x:
            c.append(int(y))
   c.sort()
   print(c) 
```

预期输出：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T10:27:12.693

```
>>> b=[['1','2','3','4','5'],['11','12','13','14','15'],['6','7','8','9','10']]
>>> sorted(int(j) for i in b for j in i)
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T10:26:29.170

```
import itertools
c = sorted(int(a) for a in itertools.chain(*b)) 
```

或者，正如@jamylak 正确指出的那样：

```
import itertools
c = sorted(int(a) for a in itertools.chain.from_iterable(b)) 
```

using`map`稍微快一点（并且比@jamylak 的答案中的双重列表理解更快）：

```
import itertools
c = sorted(map(int, itertools.chain.from_iterable(b))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T10:29:59.050

另一种变化

```
>>> from itertools import chain
>>> b=[['1','2','3','4','5'],['11','12','13','14','15'],['6','7','8','9','10']]
>>> sorted(chain(*b),key=int)
['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15'] 
```

如果你想要一个整数列表，那么

```
>>> sorted(map(int,chain(*b)))
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15] 
```

速度比较

```
>>> t1=Timer(stmt='sorted(map(int,chain(*b)))',setup='from __main__ import b;from itertools import chain')
>>> t2=Timer(stmt='sorted(int(i) for l in b for i in l)',setup='from __main__ import b')
>>> t3=Timer(stmt='sorted(int(a) for a in chain(*b))',setup='from __main__ import b;from itertools import chain')
>>> print "%.2f usec/pass" % (1000000 * t1.timeit(number=100000)/100000)
33.23 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t2.timeit(number=100000)/100000)
35.60 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t3.timeit(number=100000)/100000)
36.19 usec/pass 
```

# c# - 上传 Excel 工作表并将数据导入 SQL Server 数据库

> ID：10447015
> 
> 赞同：13
> 
> 时间：2012-05-04T10:25:23.730
> 
> 标签：c#, asp.net-mvc, sql-server-2008

我正在开发这个简单的应用程序来上传 Excel 文件 ( `.xlsx`) 并将该 Excel 工作表中的数据导入 .NET 中的 SQL Server Express 数据库

在浏览并选择文件后，我在单击导入按钮时使用以下代码来执行此操作。

```
protected void Button1_Click(object sender, EventArgs e)
{
        String strConnection = "Data Source=.\\SQLEXPRESS;AttachDbFilename='C:\\Users\\Hemant\\documents\\visual studio 2010\\Projects\\CRMdata\\CRMdata\\App_Data\\Database1.mdf';Integrated Security=True;User Instance=True";
        //file upload path
        string path = FileUpload1.PostedFile.FileName;
        //string path="C:\\ Users\\ Hemant\\Documents\\example.xlsx";
        //Create connection string to Excel work book
        string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 12.0;Persist Security Info=False";
        //Create Connection to Excel work book
        OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);
        //Create OleDbCommand to fetch data from Excel
        OleDbCommand cmd = new OleDbCommand("Select [ID],[Name],[Designation] from [Sheet1$]", excelConnection);
        excelConnection.Open();
        OleDbDataReader dReader;
        dReader = cmd.ExecuteReader();
        SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
        //Give your Destination table name
        sqlBulk.DestinationTableName = "Excel_table";
        sqlBulk.WriteToServer(dReader);
        excelConnection.Close();
    } 
```

但是当我使用时代码没有运行

```
string path = FileUpload1.PostedFile.FileName;` 
```

乃至

```
string path="C:\ Users\ Hemant\Documents\example.xlsx";` 
```

`dReader`无法采用这种格式的路径。

它只能采用以下格式的路径

```
string path="C:\\ Users\\ Hemant\\Documents\\example.xlsx"; 
```

即`\\`在路径中。为此我必须硬编码路径，但我们必须浏览文件。

那么，任何人都可以提出一个解决方案来使用所采用的路径`FileUpload1`来导入数据吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T10:51:06.257

您正在处理一个 HttpPostedFile；这是“上传”到 Web 服务器的文件。您确实需要将该文件保存在某处然后使用它，因为...

...在您的实例中，恰好是您将网站托管在文件所在的同一台机器上，因此路径是可访问的。一旦您将站点部署到另一台机器上，您的代码就无法正常工作。

将其分解为两个步骤：

1）将文件保存在某处 - 很常见：

```
string saveFolder = @"C:\temp\uploads"; //Pick a folder on your machine to store the uploaded files

string filePath = Path.Combine(saveFolder, FileUpload1.FileName); 

FileUpload1.SaveAs(filePath); 
```

现在您在本地拥有文件，可以完成真正的工作。

2）从文件中获取数据。您的代码应该按原样工作，但您可以简单地以这种方式编写连接字符串：

```
string excelConnString = String.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties="Excel 12.0";", filePath); 
```

然后，您可以考虑删除刚刚上传和导入的文件。

为了提供更具体的示例，我们可以将您的代码重构为两种方法：

```
 private void SaveFileToDatabase(string filePath)
    {
        String strConnection = "Data Source=.\\SQLEXPRESS;AttachDbFilename='C:\\Users\\Hemant\\documents\\visual studio 2010\\Projects\\CRMdata\\CRMdata\\App_Data\\Database1.mdf';Integrated Security=True;User Instance=True";

        String excelConnString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0\"", filePath);
        //Create Connection to Excel work book 
        using (OleDbConnection excelConnection = new OleDbConnection(excelConnString))
        {
            //Create OleDbCommand to fetch data from Excel 
            using (OleDbCommand cmd = new OleDbCommand("Select [ID],[Name],[Designation] from [Sheet1$]", excelConnection))
            {
                excelConnection.Open();
                using (OleDbDataReader dReader = cmd.ExecuteReader())
                {
                    using(SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection))
                    {
                        //Give your Destination table name 
                        sqlBulk.DestinationTableName = "Excel_table";
                        sqlBulk.WriteToServer(dReader);
                    }
                }
            }
        } 
    }

    private string GetLocalFilePath(string saveDirectory, FileUpload fileUploadControl)
    {

        string filePath = Path.Combine(saveDirectory, fileUploadControl.FileName);

        fileUploadControl.SaveAs(filePath);

        return filePath;

    } 
```

你可以简单地打电话`SaveFileToDatabase(GetLocalFilePath(@"C:\temp\uploads", FileUpload1));`

考虑查看 Excel 连接字符串的其他[扩展属性](http://www.connectionstrings.com/excel)。他们派上用场了！

您可能想要进行的其他改进包括将您的 Sql 数据库连接字符串放入配置中，并添加适当的异常处理。请考虑此示例仅用于演示！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:38:11.730

不知道为什么文件路径不起作用，我有一些类似的代码可以正常工作。但是如果有两个“\”它可以工作，你总是可以做`path = path.Replace(@"\", @"\\");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:44:53.577

尝试使用

```
string filename = Path.GetFileName(FileUploadControl.FileName); 
```

然后使用以下命令将文件保存在指定位置：

```
FileUploadControl.PostedFile.SaveAs(strpath + filename); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-26T19:00:51.837

您可以将 OpenXml SDK 用于 *.xlsx 文件。它的工作速度非常快。我为这个 sdk 做了简单的 C# IDataReader 实现。见[这里](https://github.com/gSerP1983/OpenXml.Excel.Data)。现在您可以使用 SqlBulkCopy 轻松将 excel 文件导入 sql server 数据库。它使用小内存，因为它通过 SAX（XML 的简单 API）方法（OpenXmlReader）读取

例子：

```
private static void DataReaderBulkCopySample()
{            
    using (var reader = new ExcelDataReader(@"test.xlsx"))
    {
        var cols = Enumerable.Range(0, reader.FieldCount).Select(i => reader.GetName(i)).ToArray();
        DataHelper.CreateTableIfNotExists(ConnectionString, TableName, cols);

        using (var bulkCopy = new SqlBulkCopy(ConnectionString))
        {
            // MSDN: When EnableStreaming is true, SqlBulkCopy reads from an IDataReader object using SequentialAccess, 
            // optimizing memory usage by using the IDataReader streaming capabilities
            bulkCopy.EnableStreaming = true;

            bulkCopy.DestinationTableName = TableName;
            foreach (var col in cols)
                bulkCopy.ColumnMappings.Add(col, col);

            bulkCopy.WriteToServer(reader);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-17T14:47:16.393

```
 public async Task<HttpResponseMessage> PostFormDataAsync()    //async is used for defining an asynchronous method
    {
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }
        var fileLocation = "";
        string root = HttpContext.Current.Server.MapPath("~/App_Data");
        MultipartFormDataStreamProvider provider = new MultipartFormDataStreamProvider(root);  //Helps in HTML file uploads to write data to File Stream
        try
        {
            // Read the form data.
        await Request.Content.ReadAsMultipartAsync(provider);

            // This illustrates how to get the file names.
            foreach (MultipartFileData file in provider.FileData)
            {
                Trace.WriteLine(file.Headers.ContentDisposition.FileName); //Gets the file name
                var filePath = file.Headers.ContentDisposition.FileName.Substring(1, file.Headers.ContentDisposition.FileName.Length - 2); //File name without the path
                File.Copy(file.LocalFileName, file.LocalFileName + filePath); //Save a copy for reading it
                fileLocation = file.LocalFileName + filePath; //Complete file location
            }
    HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.OK, recordStatus);
            return response;
}
catch (System.Exception e)
    {
            return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
}
public void ReadFromExcel()
{
try
        {
            DataTable sheet1 = new DataTable();
            OleDbConnectionStringBuilder csbuilder = new OleDbConnectionStringBuilder();
            csbuilder.Provider = "Microsoft.ACE.OLEDB.12.0";
            csbuilder.DataSource = fileLocation;
            csbuilder.Add("Extended Properties", "Excel 12.0 Xml;HDR=YES");
            string selectSql = @"SELECT * FROM [Sheet1$]";
            using (OleDbConnection connection = new OleDbConnection(csbuilder.ConnectionString))
            using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectSql, connection))
            {
                connection.Open();
                adapter.Fill(sheet1);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }          
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-28T05:17:22.237

```
A proposed solution will be:   

protected void Button1_Click(object sender, EventArgs e)
{
        try
        {
            CreateXMLFile();

        SqlConnection con = new SqlConnection(constring);
        con.Open();

        SqlCommand cmd = new SqlCommand("bulk_in", con);

        cmd.CommandType = CommandType.StoredProcedure;

        cmd.Parameters.AddWithValue("@account_det", sw_XmlString.ToString ());

       int i= cmd.ExecuteNonQuery();
            if(i>0)
            {
                Label1.Text = "File Upload successfully";
            }
            else
            {
                Label1.Text = "File Upload unsuccessfully";
                return;

            }

        con.Close();
            }
        catch(SqlException ex)
        {
            Label1.Text = ex.Message.ToString();
        }

    }
     public void CreateXMLFile()
        {

          try
            {
                M_Filepath = System.IO.Path.GetFileName(FileUpload1.PostedFile.FileName);
                fileExtn = Path.GetExtension(M_Filepath);
                strGuid = System.Guid.NewGuid().ToString();
                fNameArray = M_Filepath.Split('.');
                fName = fNameArray[0];

                xlRptName = fName + "_" + strGuid + "_" + DateTime.Now.ToShortDateString ().Replace ('/','-');
                 fileName =  xlRptName.Trim()  + fileExtn.Trim() ;

                 FileUpload1.PostedFile.SaveAs(ConfigurationManager.AppSettings["ImportFilePath"]+ fileName);

                strFileName = Path.GetFileName(FileUpload1.PostedFile.FileName).ToUpper() ;
                if (((strFileName) != "DEMO.XLS") && ((strFileName) != "DEMO.XLSX"))
                {
                    Label1.Text = "Excel File Must be DEMO.XLS or DEMO.XLSX";
                }
               FileUpload1.PostedFile.SaveAs(System.Configuration.ConfigurationManager.AppSettings["ImportFilePath"] + fileName);
               lstrFilePath = System.Configuration.ConfigurationManager.AppSettings["ImportFilePath"] + fileName;
               if (strFileName == "DEMO.XLS")
                {

                    strConn = "Provider=Microsoft.JET.OLEDB.4.0;" + "Data Source=" + lstrFilePath + ";" + "Extended Properties='Excel 8.0;HDR=YES;'";

                } 

                if (strFileName == "DEMO.XLSX")
                {
                    strConn = "Provider=Microsoft.ACE.OLEDB.12.0;" + "Data Source=" + lstrFilePath + ";" + "Extended Properties='Excel 12.0;HDR=YES;'";

                }

                strSQL = " Select [Name],[Mobile_num],[Account_number],[Amount],[date_a2] FROM [Sheet1$]";

                OleDbDataAdapter mydata = new OleDbDataAdapter(strSQL, strConn);

                mydata.TableMappings.Add("Table", "arul");
                mydata.Fill(dsExcl);
                dsExcl.DataSetName = "DocumentElement";
                intRowCnt = dsExcl.Tables[0].Rows.Count;
                intColCnt = dsExcl.Tables[0].Rows.Count;

                if(intRowCnt <1)
                {

                    Label1.Text = "No records in Excel File";
                    return;
                }
                if  (dsExcl==null)
                {

                }
                else
                    if(dsExcl.Tables[0].Rows.Count >= 1000 )
                    {

                        Label1.Text = "Excel data must be in less than 1000  ";
                    }

                for (intCtr = 0; intCtr <= dsExcl.Tables[0].Rows.Count - 1; intCtr++)
                {

                    if (Convert.IsDBNull(dsExcl.Tables[0].Rows[intCtr]["Name"]))
                    {
                        strValid = "";

                    }
                    else
                    {
                        strValid = dsExcl.Tables[0].Rows[intCtr]["Name"].ToString();
                    }
                    if (strValid == "")
                    {
                        Label1.Text = "Name should not be empty";
                        return;

                    }
                    else
                    {
                        strValid = "";
                    }

                    if (Convert.IsDBNull(dsExcl.Tables[0].Rows[intCtr]["Mobile_num"]))
                    {
                        strValid = "";

                    }
                    else
                    {
                        strValid = dsExcl.Tables[0].Rows[intCtr]["Mobile_num"].ToString();
                    }
                    if (strValid == "")
                    {
                        Label1.Text = "Mobile_num should not be empty";

                    }
                    else
                    {
                        strValid = "";
                    }

                    if (Convert.IsDBNull(dsExcl.Tables[0].Rows[intCtr]["Account_number"]))
                    {
                        strValid = "";

                    }
                    else
                    {
                        strValid = dsExcl.Tables[0].Rows[intCtr]["Account_number"].ToString();
                    }
                    if (strValid == "")
                    {
                        Label1.Text = "Account_number should not be empty";

                    }
                    else
                    {
                        strValid = "";
                    }

                    if (Convert.IsDBNull(dsExcl.Tables[0].Rows[intCtr]["Amount"]))
                    {
                        strValid = "";

                    }
                    else
                    {
                        strValid = dsExcl.Tables[0].Rows[intCtr]["Amount"].ToString();
                    }
                    if (strValid == "")
                    {
                        Label1.Text = "Amount should not be empty";

                    }
                    else
                    {
                        strValid = "";
                    }

                    if (Convert.IsDBNull(dsExcl.Tables[0].Rows[intCtr]["date_a2"]))
                    {
                        strValid = "";

                    }
                    else
                    {
                        strValid = dsExcl.Tables[0].Rows[intCtr]["date_a2"].ToString();
                    }
                    if (strValid == "")
                    {
                        Label1.Text = "date_a2 should not be empty";

                    }
                    else
                    {
                        strValid = "";
                    }
                }

            }
         catch 
            {

            }

         try
         {
             if(dsExcl.Tables[0].Rows.Count >0)
             {

                 dr = dsExcl.Tables[0].Rows[0];
             }
             dsExcl.Tables[0].TableName = "arul";
             dsExcl.WriteXml(sw_XmlString, XmlWriteMode.IgnoreSchema);

         }
         catch
         {

         }
}`enter code here` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-23T14:31:59.207

```
using System.IO;
using System.Data;
using System.Data.OleDb;
using System.Data.SqlClient;
using System.Configuration;

protected void Button1_Click(object sender, EventArgs e)

{

    //Upload and save the file

    string excelPath = Server.MapPath("~/Files/") + Path.GetFileName(FileUpload1.PostedFile.FileName);

    FileUpload1.SaveAs(excelPath);

    string conString = string.Empty;

    string extension = Path.GetExtension(FileUpload1.PostedFile.FileName);

    switch (extension)

    {

        case ".xls": //Excel 97-03

            conString = ConfigurationManager.ConnectionStrings["Excel03ConString"].ConnectionString;

            break;

        case ".xlsx": //Excel 07 or higher

            conString = ConfigurationManager.ConnectionStrings["Excel07+ConString"].ConnectionString;

            break;

    }

    conString = string.Format(conString, excelPath);

    using (OleDbConnection excel_con = new OleDbConnection(conString))

    {

        excel_con.Open();

        string sheet1 = excel_con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null).Rows[0]["TABLE_NAME"].ToString();

        DataTable dtExcelData = new DataTable();

        //[OPTIONAL]: It is recommended as otherwise the data will be considered as String by default.

        dtExcelData.Columns.AddRange(new DataColumn[2] { new DataColumn("Id", typeof(int)),

            new DataColumn("Name", typeof(string)) });

        using (OleDbDataAdapter oda = new OleDbDataAdapter("SELECT * FROM [" + sheet1 + "]", excel_con))

        {

            oda.Fill(dtExcelData);

        }

        excel_con.Close();

        string consString = ConfigurationManager.ConnectionStrings["dbcn"].ConnectionString;

        using (SqlConnection con = new SqlConnection(consString))

        {

            using (SqlBulkCopy sqlBulkCopy = new SqlBulkCopy(con))

            {

                //Set the database table name

                sqlBulkCopy.DestinationTableName = "dbo.Table1";

                //[OPTIONAL]: Map the Excel columns with that of the database table

                sqlBulkCopy.ColumnMappings.Add("Sl", "Id");

                sqlBulkCopy.ColumnMappings.Add("Name", "Name");

                con.Open();

                sqlBulkCopy.WriteToServer(dtExcelData);

                con.Close();

            }

        }

    }

} 
```

将其复制到**网络配置中**

```
<add name="Excel03ConString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties='Excel 8.0;HDR=YES'"/>

<add name="Excel07+ConString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 8.0;HDR=YES'"/> 
```

你也可以参考这个链接：[https ://athiraji.blogspot.com/2019/03/how-to-upload-excel-fle-to-database.html](https://athiraji.blogspot.com/2019/03/how-to-upload-excel-fle-to-database.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-09T05:53:20.993

```
 protected void btnUpload_Click(object sender, EventArgs e)
    {
        divStatusMsg.Style.Add("display", "none");
        divStatusMsg.Attributes.Add("class", "alert alert-danger alert-dismissable");
        divStatusMsg.InnerText = "";
        ViewState["Fuletypeidlist"] = "0";
        grdExcel.DataSource = null;
        grdExcel.DataBind();

        if (Page.IsValid)
        {
            bool logval = true;
            if (logval == true)
            {
                String img_1 = fuUploadExcelName.PostedFile.FileName;
                String img_2 = System.IO.Path.GetFileName(img_1);
                string extn = System.IO.Path.GetExtension(img_1);

                string frstfilenamepart = "";
                frstfilenamepart = "DateExcel" + DateTime.Now.ToString("ddMMyyyyhhmmss"); ;
                UploadExcelName.Value = frstfilenamepart + extn;
                fuUploadExcelName.SaveAs(Server.MapPath("~/Emp/DateExcel/") + "/" + UploadExcelName.Value);
                string PathName = Server.MapPath("~/Emp/DateExcel/") + "\\" + UploadExcelName.Value;
                GetExcelSheetForEmp(PathName, UploadExcelName.Value);

                if ((grdExcel.HeaderRow.Cells[0].Text.ToString() == "CODE") && grdExcel.HeaderRow.Cells[1].Text.ToString() == "SAL")
                {
                    GetExcelSheetForEmployeeCode(PathName);
                }
                else
                {
                    divStatusMsg.Style.Add("display", "");
                    divStatusMsg.Attributes.Add("class", "alert alert-danger alert-dismissable");
                    divStatusMsg.InnerText = "ERROR !!...Please Upload Excel Sheet in header Defined Format ";
                }

            }
        }

    }

    private void GetExcelSheetForEmployeeCode(string filename)
    {
        int count = 0;
        int selectedcheckbox = 0;
        string empcodeexcel = "";
        string empcodegrid = "";
        string excelFile = "Employee/DateExcel" + filename;
        OleDbConnection objConn = null;
        System.Data.DataTable dt = null;
        try
        {
            DataSet ds = new DataSet();
            String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Persist Security Info=True;Extended Properties=Excel 12.0 Xml;Data Source=" + filename;
            // Create connection. 
            objConn = new OleDbConnection(connString);
            // Opens connection with the database. 
            if (objConn.State == ConnectionState.Closed)
            {
                objConn.Open();
            }
            // Get the data table containing the schema guid, and also sheet names. 
            dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            if (dt == null)
            {
                return;
            }
            String[] excelSheets = new String[dt.Rows.Count];
            int i = 0;
            // Add the sheet name to the string array. 
            // And respective data will be put into dataset table 
            foreach (DataRow row in dt.Rows)
            {
                if (i == 0)
                {
                    excelSheets[i] = row["TABLE_NAME"].ToString();
                    OleDbCommand cmd = new OleDbCommand("SELECT DISTINCT * FROM [" + excelSheets[i] + "]", objConn);
                    OleDbDataAdapter oleda = new OleDbDataAdapter();
                    oleda.SelectCommand = cmd;
                    oleda.Fill(ds, "TABLE");
                    if (ds.Tables[0].ToString() != null)
                    {
                        for (int j = 0; j < ds.Tables[0].Rows.Count; j++)
                        {
                            for (int k = 0; k < GrdEmplist.Rows.Count; k++)
                            {
                                empcodeexcel = ds.Tables[0].Rows[j][0].ToString();
                                date.Value = ds.Tables[0].Rows[j][1].ToString();

                                Label lbl_EmpCode = (Label)GrdEmplist.Rows[k].FindControl("lblGrdCode");
                                empcodegrid = lbl_Code.Text;
                                CheckBox chk = (CheckBox)GrdEmplist.Rows[k].FindControl("chkSingle");
                                TextBox txt_Sal = (TextBox)GrdEmplist.Rows[k].FindControl("txtSal");

                                if ((empcodegrid == empcodeexcel) && (date.Value != ""))
                                {
                                    chk.Checked = true;
                                    txt_Sal.Text = date.Value;
                                    selectedcheckbox = selectedcheckbox + 1;
                                    lblSelectedRecord.InnerText = selectedcheckbox.ToString();
                                    count++;
                                }
                                if (chk.Checked == true)
                                {

                                }
                            }

                        }

                    }
                }
                i++;
            }

        }
        catch (Exception ex)
        {
            ShowMessage(ex.Message.ToString(), 0);
        }
        finally
        {
            // Clean up. 
            if (objConn != null)
            {
                objConn.Close();
                objConn.Dispose();
            }
            if (dt != null)
            {
                dt.Dispose();
            }
        }
    }

    private void GetExcelSheetForEmp(string PathName, string UploadExcelName)
    {
        string excelFile = "DateExcel/" + PathName;
        OleDbConnection objConn = null;
        System.Data.DataTable dt = null;
        try
        {

            DataSet dss = new DataSet();
            String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Persist Security Info=True;Extended Properties=Excel 12.0 Xml;Data Source=" + PathName;
            objConn = new OleDbConnection(connString);
            objConn.Open();
            dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            if (dt == null)
            {
                return;
            }
            String[] excelSheets = new String[dt.Rows.Count];
            int i = 0;
            foreach (DataRow row in dt.Rows)
            {
                if (i == 0)
                {
                    excelSheets[i] = row["TABLE_NAME"].ToString();
                    OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + excelSheets[i] + "]", objConn);
                    OleDbDataAdapter oleda = new OleDbDataAdapter();
                    oleda.SelectCommand = cmd;
                    oleda.Fill(dss, "TABLE");

                }
                i++;
            }
            grdExcel.DataSource = dss.Tables[0].DefaultView;
            grdExcel.DataBind();
            lblTotalRec.InnerText = Convert.ToString(grdExcel.Rows.Count);

        }

        catch (Exception ex)
        {
            ViewState["Fuletypeidlist"] = "0";
            grdExcel.DataSource = null;
            grdExcel.DataBind();
        }
        finally
        {
            if (objConn != null)
            {
                objConn.Close();
                objConn.Dispose();
            }
            if (dt != null)
            {
                dt.Dispose();
            }
        }

    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-10-29T13:00:36.793

```
 protected void btnUpload_Click(object sender, EventArgs e)
    {
          if (Page.IsValid)
            {
                bool logval = true;
                if (logval == true)
                {
                    String img_1 = fuUploadExcelName.PostedFile.FileName;
                    String img_2 = System.IO.Path.GetFileName(img_1);
                    string extn = System.IO.Path.GetExtension(img_1);

                    string frstfilenamepart = "";
                    frstfilenamepart = "Emp" + DateTime.Now.ToString("ddMMyyyyhhmmss"); ;
                    UploadExcelName.Value = frstfilenamepart + extn;
                    fuUploadExcelName.SaveAs(Server.MapPath("~/Emp/EmpExcel/") + "/" + UploadExcelName.Value);
                    string PathName = Server.MapPath("~/Emp/EmpExcel/") + "\\" + UploadExcelName.Value;
                    GetExcelSheetForEmp(PathName, UploadExcelName.Value);

                }
            }

    }

    private void GetExcelSheetForEmp(string PathName, string UploadExcelName)
    {
        string excelFile = "EmpExcel/" + PathName;
        OleDbConnection objConn = null;
        System.Data.DataTable dt = null;
        try
        {

            DataSet dss = new DataSet();
            String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Persist Security Info=True;Extended Properties=Excel 12.0 Xml;Data Source=" + PathName;
            objConn = new OleDbConnection(connString);
            objConn.Open();
            dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            if (dt == null)
            {
                return;
            }
            String[] excelSheets = new String[dt.Rows.Count];
            int i = 0;
            foreach (DataRow row in dt.Rows)
            {
                if (i == 0)
                {
                    excelSheets[i] = row["TABLE_NAME"].ToString();
                    OleDbCommand cmd = new OleDbCommand("SELECT * FROM [" + excelSheets[i] + "]", objConn);
                    OleDbDataAdapter oleda = new OleDbDataAdapter();
                    oleda.SelectCommand = cmd;
                    oleda.Fill(dss, "TABLE");

                }
                i++;
            }
            grdByExcel.DataSource = dss.Tables[0].DefaultView;
            grdByExcel.DataBind();

        }

        catch (Exception ex)
        {
            ViewState["Fuletypeidlist"] = "0";
            grdByExcel.DataSource = null;
            grdByExcel.DataBind();
        }
        finally
        {
            if (objConn != null)
            {
                objConn.Close();
                objConn.Dispose();
            }
            if (dt != null)
            {
                dt.Dispose();
            }
        }

    } 
```

# tsql - SQL CLR 返回两个新列

> ID：10447020
> 
> 赞同：0
> 
> 时间：2012-05-04T10:25:48.740
> 
> 标签：tsql, sql-server-2005, sqlclr

我有一个 SQL CLR 函数，它目前返回一个用逗号分隔的字符串。

我将如何编写语句以将两个新列返回到我的结果集中。

例如

```
Select A, B, MyCLRFunction(X,Y) C From MyTable 
```

回报：-

```
One    Two    Three,Four
Five   Six    Seven,Eight 
```

我希望它返回：-

```
One    Two    Three    Four
Five   Six    Seven    Eight 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:31:10.487

您需要将 CLR 函数从标量转换为表值，以允许它返回多于一列。

请参阅[CLR TVF 上的 MSDN 条目](http://msdn.microsoft.com/en-us/library/ms131103%28v=sql.90%29.aspx)

如果问题中没有更多信息，就不可能提供更详细的答案。

# ruby - 两个进程同时在数据库中保存一条记录

> ID：10447030
> 
> 赞同：3
> 
> 时间：2012-05-04T10:26:37.393
> 
> 标签：ruby, database, database-design, data-storage

当多个用户同时在数据库（MySQL、Postgres）中插入数据时会发生什么？它如何确定先插入哪条记录和稍后插入哪条记录的优先级。如果答案是特定于程序的应用程序，我是在参考网络应用程序时询问的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:56:00.757

一般来说，两件事永远不会**同时发生**。有一系列工作，在某种程度上，一件事总是先于另一件事发生。

但是，在某些情况下，整体交易可能需要多个步骤——如果其中两种交易几乎同时开始，它们可能会在时间上重叠。这可能会导致问题。

例如，假设一个人在购物车中购买了一些东西，步骤包括为他们创建订单记录以及递减和库存计数。如果两个人几乎同时开始这个过程，他们都可能在库存减少以显示该物品缺货之前购买该物品。

在可能发生此类事情的情况下，postgres（和其他现代数据库）提供了限制程序以保护自己的方法。这些包括**事务**和**锁定**。

使用**事务** [（请参阅此处的 postgres 文档）](http://www.postgresql.org/docs/8.1/static/sql-set-transaction.html)，语句组作为一个单元运行——如果后面的步骤之一失败，所有步骤都将“回滚”。（例如，如果由于商品现在缺货而无法减少库存，则可以回滚订单创建。）

使用**锁定** [（请参阅此处的 postgres 文档）](http://www.postgresql.org/docs/8.1/static/sql-lock.html)，表（甚至表中的单个行）被锁定，以便任何其他想要访问它们的进程等待或超时。这将防止两个进程几乎同时更新相同的数据。

In general, the vast majority of applications don't require either of these approaches. Unless you're working in an environment such as at a bank where the tables involved contain financial transactions, you probably won't have to worry about it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:48:27.520

从来都不是完全相同的时间。一个会在另一个之前发生。除非您实施自己的优先级机制，否则哪个会是不确定的，您永远不应该依赖它。

至于会发生什么，那要看情况了。

对于同一张表的两次插入，如果数据完整性取决于它们在数据库设计中的执行顺序，那么这将是一个可怕的缺陷。

对于冲突（例如对同一记录的两次更新）。有两种实现。

悲观锁定。假设对相同的数据会有大量更新，所以在它周围发出一个锁。如果锁存在，则更新失败（例如，如果第一个尚未完成，则第二个）并带有一些合适的消息。

乐观锁定。假设碰撞很少发生。这样做的通常方法是在每次更新时更改的记录中添加一个时间戳字段。因此，当您读取数据时，您会得到时间戳，而当您写入数据时，您只会这样做，如果您拥有的时间戳与现在存在的时间戳匹配，则更新所述时间戳作为其中的一部分。如果不匹配，请执行“其他人更改了此数据消息”。

有一个妥协的立场，你尝试合并两个更新。（例如你改名，我改地址）。不过，您需要真正考虑一下，它很混乱，并且很快就会变得非常复杂，并且运行错误会造成数据混乱的真正风险。

智商比我高得多的人在这些东西上花了很多时间，我个人喜欢像我一样保持它，简单......

# jquery - 使用jquery隐藏带有空白src的图像

> ID：10447031
> 
> 赞同：2
> 
> 时间：2012-05-04T10:26:42.563
> 
> 标签：jquery, visibility, hidden

我在一个页面上有 4 个子图像，它们从数据库中获取它们的 src 属性。他们都有一个 class="subImage"。当没有数据库条目时，我想隐藏该元素，而不是像我目前拥有的那样有一个断开的链接。我在 jQuery 中尝试过：

```
<script>
$(document).ready(function() {
    $('.subImage[src^=""]').css('visibility:hidden');
});
</script> 
```

我走远了吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:29:37.987

尝试隐藏它们

```
 $("img").error(function(){
       $(this).hide();
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:57:28.850

更好的方法是使用 CSS。您可以使用属性选择器根据其属性的值来选择元素。像这样。

```
.subImage[src=""] { /* Selects all .subImage where the src is blank. */
    visibility: hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:31:04.150

你可以做

```
$(document).ready(function() {
    $('.subImage').filter(function(){ return this.src === ''}).hide();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:31:28.973

您将参数传递给 css 函数，如下所示：

```
$(selector).css('visibility','hidden') 
```

或者

```
$(selector).css({'visibility':'hidden', 'newAttr':'newValue'}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:51:13.457

这应该这样做：

```
$(document).ready(function() {
    $('img[src=""]').hide();
}); 
```

# struts2 - 使用 struts2 提交和加载相同的表单

> ID：10447033
> 
> 赞同：0
> 
> 时间：2012-05-04T10:26:49.480
> 
> 标签：struts2

我有一个 test.jsp，其中包含一个 html.using 以下标签

```
<s:form action="showTrainingPage">
<s:include value="%{objBarcodeCertificationTaskForm.strTrainingPage}"></include> 
<s:submit type="image" src="../../images/next.png"/>
</s:form> 
```

价值在行动中动态发展。

```
<action name="showTrainingPage" method="getTrainingDetails" class="certificationTask">
            <result name="input" >test.jsp</result>
</action> 
```

但这无济于事。当我单击下一步时，它说请求的源不可用。请让我知道如何解决。

# jquery - .map() 回调函数的第二个参数

> ID：10447034
> 
> 赞同：0
> 
> 时间：2012-05-04T10:26:51.700
> 
> 标签：jquery

回调函数中第二个参数的目的是什么`.map()`？

我认为没有必要，因为您可以`this`改用：

```
> $('p').map(function (index, element) {
      return this===element;
});
[true, true, true, true] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:29:07.837

一个有用的功能是，如果您在回调中调用*另一个*闭包，您仍然可以获得对该元素的“现成”引用，因为`this`不再正确。

# magento - 编写 Magento 模块的更好方法是什么？

> ID：10447038
> 
> 赞同：0
> 
> 时间：2012-05-04T10:27:01.587
> 
> 标签：magento

我的问题专门针对**已经编写了至少一个 Magento 模块**的程序员。
我正在编写一个 Magento 模块，它将与其他 Magento 模块进行大量交互。
所以，我的问题是：在 Adminhtml 中，您更愿意使用 Magento 小部件（网格、选项卡、手风琴......）还是编写自己的块？
如果有人在这里分享他们的经验，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:55:16.367

这实际上可能取决于您要完成的工作。

如果您能够使您的模块与小部件一起正常工作，那么我说去吧。它将使您的模块与 Magento 的其余部分具有一致的外观和感觉，因此[希望]您模块的大多数用户都会有宾至如归的感觉。

就我个人而言，由于缺乏关于它们的文档，我很难让它们全部工作（如果你认为很难在前端找到如何做的东西，等到你尝试寻找后端的东西）。

但是，如果您发现您的模块很难在小部件的范围内工作，那么我认为制作您自己的模块并不困难。

最终归结为您的模块需要什么。

# kernel - DebugView (Win7 x64) 中未显示内核调试输出

> ID：10447039
> 
> 赞同：0
> 
> 时间：2012-05-04T10:27:06.143
> 
> 标签：kernel, windows-7-x64, debugview

我正在使用 DebugView 4.78 来调试驱动程序的输出。我已使用[此处](http://www.osronline.com/article.cfm?id=295)的说明（选项 1，将 DEFAULT 值设置为 0xf），重新启动，但我仍然无法从我的驱动程序中获得任何调试输出（驱动程序版本为 chk x64 win7）。

想法？

编辑：我发现了问题，一步中的构建过程是将新的 .sys 文件复制到驱动程序位置（C:\Windows\System32\drivers），但是，即使复制操作显示“复制了 1 个文件”，我可以看到目标文件没有更新...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:27:00.757

由于 Visual Studio 是 32 位的，因此在 64 位 Windows 上它是一个 WOW64 进程。如果这样的进程试图写入`%WinDir%\System32\`结果将被重定向到`%WinDir%\SysWOW64`. 通过使用特殊别名*Sysnative*，您可以写入`%WinDir%\Sysnative`，然后它将`%WinDir%\System32\`按预期以 结束。

[在这里](http://msdn.microsoft.com/en-us/library/aa384187%28VS.85%29.aspx)查看更多。

# java - 找不到合适的驱动程序

> ID：10447041
> 
> 赞同：0
> 
> 时间：2012-05-04T10:27:18.453
> 
> 标签：java, sql, netbeans

我正在尝试在 java 6 中执行 sql 查询：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

/**
 *
 * @author ramy
 */
public class JavaTest 
{

    public static void main(String[] args) 
    {
        try
        {
            String url="jdbc:msql://127.0.0.1:1521;DatabaseName=test";
            Connection ct=DriverManager.getConnection(url,"","");
            Statement st=ct.createStatement();
            ResultSet result;
            result=st.executeQuery("select * from utente");
            while(result.next())
            {
                String temp=result.getString("Num_tessera");
                System.out.println(temp);
            }
            ct.close();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }
} 
```

我在Mac Os X上安装了mysql 5.5集群，在url中我刚刚写了我的本地IP（localhost），数据库名是test。
为什么找不到数据库？我必须安装一些驱动程序吗？我已经安装了数据库，并且“utente”是一个现有的表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:28:34.850

我怀疑问题是您的 JDBC URL：

```
"jdbc:msql://..." 
```

你的意思是

```
"jdbc:mysql://..." 
```

在任何情况下？

（是的，您的类路径中*还*需要[MySQL 驱动程序](http://dev.mysql.com/downloads/connector/j/)。这不是您需要*安装*的东西，但 jar 文件需要可用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:30:09.107

确保您的类路径中有 MySQL JDBC 驱动程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:31:10.480

还请检查您的 URL 中的端口，因为 1521 是 Oracle 而 MySQL 是 3306

# c++ - std::string 与字符串

> ID：10447045
> 
> 赞同：0
> 
> 时间：2012-05-04T10:27:30.543
> 
> 标签：c++, string, namespaces, std

我在我的代码中使用了许多命名空间，包括 std one ，所以当我想在我的代码中声明一个字符串变量时，我应该精确 std::string 还是我可以只放 string ：

```
#include <string.h> 

using namespace std;
using namespace boost;
using namespace xerces;

int main()
{
    /*! should I declare my str like this */
    std::string str;
    /*! or I can declare it like this */
    string str1;
    cout << str << str1 <<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T10:33:34.900

由于您有`using namespace std;`，因此名称的`string`含义与`std::string`[*] 相同。因此，这是您喜欢的风格问题（如果您喜欢，`std::string`则可以省略`using namespace std;`）。

`std::`和之间存在一些名称冲突`boost::`，特别是对于标准化之前在 Boost 中试验的东西。因此，例如，如果您包含适当的标题，那么两者都`std::shared_ptr`存在`boost::shared_ptr`。它们可能会或可能不会引用相同的类型，我没有检查 Boost 在定义自己的类型之前是否尝试检测标准类型。

`std`因此，同时使用和命名空间不一定是一个好主意`boost`。您可以将单个名称与`using std::string;`, 而不是整个命名空间一起使用。

[*] if`std::string`已定义，但未定义，因为您没有包含`<string>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T10:34:44.033

你可以只写`string`。但是如果`boost`或者`xerces`也有一个符号`string`呢？我建议不要使用这些`using`指令。不仅`string`如此，可能会发生冲突。您实际上是将大量符号拉入全局命名空间。如果你真的想避免打字`std::`，那么你可以使用 typedef：

```
typedef std::string MyStr; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T10:28:27.993

你可以放只要`string`你使用`using namespace std;`.

在所有情况下添加`using namespace std;`可能不是最好的主意，因为在某些情况下它可能会导致命名空间之间的冲突（尽管不太可能`string`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T10:32:09.243

通常不需要指定`std::string`是否已将`using namespace std;` **BUT**声明为一般情况，如果有多个名称空间包含具有相同名称的不同类，那么`namespace::type`无论是否存在`using`声明。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T10:28:49.327

您正在使用命名空间`std`，因此您不需要添加前缀`string`，`std::`但如果您愿意，可以添加。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T10:49:27.570

编码的一个好方法是不要在标头中使用任何相关的命名空间，以防止在#include 时将命名空间暴露在外部。但是在编译后的源代码中，你可以做任何你想做的事情，甚至使用 std 命名空间并调用 std::string。有时甚至需要它（如果您包含定义相同字符串类的两个命名空间）。

# php - 请帮我处理我的评论部分 sql 查询

> ID：10447048
> 
> 赞同：1
> 
> 时间：2012-05-04T10:27:53.943
> 
> 标签：php, mysql, sql, comments

好的，伙计们，我在这里需要一点帮助！使用 PHP 和 mysql，我做了一个评论部分，用户可以添加评论。首先，页面基于 ItemID 并显示正确的项目。当他们添加评论时，我会使用他们的用户名和 ItemID 并将其作为 comment.username 和 messageailmentID 放入评论表中。所以页面显示正确，并且评论部分效果很好，除了我似乎无法正确获取 SQL 查询。我尝试了很多变化，但没有运气。我希望任何人在 ItemID 页面下发布的评论仅显示该 ItemID 下的评论（特别是 messageailmentID）。

我的查询范围，但这是我目前的查询范围：

```
SELECT `comment`.messageID, `comment`.message, `comment`.username, `comment`.messageailmentID, Items.ItemID
FROM `comment`, Items
WHERE varItemID = `comment`.messageailmentID 
```

（使用dreamweaver，varItemID 基本上是$_GET['Items.ItemID']）

编辑：例如，用户单击一个项目，将他们带到 itemdetails.php?ItemID=8。当他们发表评论时，它会将 Items.ItemID 添加到 comment.messageailmentID 中。

表列的重要部分是：

项目：项目ID

评论：CommentID、消息、comment.username、messageailmentID（即页面ItemID）

varItemID 不是列，而是 $_GET['ItemID']，在此查询中甚至可能不需要它，因为它是在另一个查询中完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:32:24.823

您的查询正在获取所有行。

你应该使用：

*   `JOIN`用于指定表之间关系的子句。
*   `WHERE`用于指定要获取哪些特定项目的子句。

尝试这个：

```
SELECT
    comment.messageID,
    comment.message,
    comment.username,
    comment.messageailmentID,
    Items.ItemID
FROM Items
LEFT JOIN comment
ON Items.ItemID = comment.messageailmentID
WHERE Items.ItemID = 42 
```

使用左连接意味着即使没有评论它仍然会返回一行。如果您不想这样做，请使用 INNER JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:48:30.710

谢谢你们帮我弄清楚自己的愚蠢！我使用的有效查询是：

```
SELECT `comment`.messageID, `comment`.message, `comment`.username
     , `comment`.ItemID, Items.ItemID
  FROM Items 
 INNER JOIN `comment` 
    ON Items.ItemID = `comment`.ItemID
 WHERE Items.ItemID = varItemID 
```

`varItemID`是一个`$_GET['ItemID']`也。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:33:53.427

尝试以下

```
SELECT comment.messageID, comment.message, comment.username, comment.messageailmentID, Items.ItemID

FROM comment, Items

WHERE Items.ItemID = comment.messageailmentID and Items.ItemID = ". $_GET['Items.ItemID'] 
```

# ruby-on-rails - 避免 rake 资产的正确方法是什么：Heroku 上的预编译错误

> ID：10447049
> 
> 赞同：4
> 
> 时间：2012-05-04T10:27:55.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline

我在 Rails 3.2.2 上运行并部署在 Cedar 堆栈上。我仍然收到以下错误：

```
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432? 
```

甚至[指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)也建议设置`config.assets.initialize_on_precompile`为 false，但提到：

> 确保在部署之前测试 rake assets:precompile 在本地。它可能会暴露您的资产引用应用程序对象或方法的错误，因为无论此标志的值如何，这些仍然在开发模式的范围内。

[诸如此类的](http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/)一些文章建议使用[Heroku labs](https://devcenter.heroku.com/articles/labs-user-env-compile)。但即便如此，它也有其自身的含义，因为它仍处于测试阶段。

我在网上阅读了其他几个来源，包括：

[Rails 3.1 assets:precompile 连接到数据库](https://stackoverflow.com/questions/8728257/rails-3-1-assetsprecompile-connecting-to-database)

[rake 资产：预编译不适用于 heroku](https://stackoverflow.com/questions/9787766/rake-assetsprecompile-not-working-on-heroku)

都有不同的解决方案。那么避免这个错误的正确方法是什么？有人在 Heroku 实验室遇到过什么大问题吗？有更好的方法吗？

**附言**。只是要清楚。是在本地运行`rake assets:precompile RAILS_ENV=development`还是`rake assets:precompile RAILS_ENV=production`在本地运行它的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:52:51.943

问题源于您的应用程序在运行该 rake 任务时尝试连接到 postgres。摆脱错误的唯一方法是阻止这种情况发生，或者使用`user_env_compile`您提到的附加组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:04:57.470

(1) 我总是按照你的建议添加这个

```
config.assets.initialize_on_precompile = false 
```

(2) 而且，如果使用 ActiveAdmin 和/或 Devise，在预编译资产时通过如下编码 routes.rb 排除它们的路由

```
 unless ARGV.join.include?('assets:precompile')
    ActiveAdmin.routes(self)

    devise_for :admin_users, ...etc....
    devise_for :users, ...etc...

    devise_scope :user do
    get "/login", ..etc
  end 
```

根据[这里](https://github.com/gregbell/active_admin/issues/474)和其他地方

# magento - 如何在magento中获取订单的发货日期？

> ID：10447055
> 
> 赞同：6
> 
> 时间：2012-05-04T10:28:21.917
> 
> 标签：magento, shipping

我正在使用 Magento 社区版本 1.5.1.0。

我想获取订单的发货日期，magento 怎么可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T12:40:00.933

Magento 中的订单没有发货日期。他们有发货，每一个都有一个创建日期。

您可以使用以下方式访问订单发货

```
$order->getShipmentsCollection(); 
```

然后在装运时，您可以调用 getCreatedAt() 来检索创建日期。

因此，完整的代码将是

```
/** @var $order Mage_Sales_Model_Order */
foreach($order->getShipmentsCollection() as $shipment){
    /** @var $shipment Mage_Sales_Model_Order_Shipment */
    echo $shipment->getCreatedAt();
} 
```

# javascript - ExtJs：确定触发商店更新事件的网格

> ID：10447059
> 
> 赞同：1
> 
> 时间：2012-05-04T10:28:33.493
> 
> 标签：javascript, extjs

我在 ExtJs 3.3.1 中使用 livegrid，但相信这个问题对 ExtJs 来说是全球性的。商店中的侦听器如何知道事件来自哪个网格？

这是为什么和一些代码。

我在商店有一个监听器，在更新时我想知道在网格中选择了哪些行并暂停事件。这一切都是为了让我可以在网格中进行选择，更新该范围内的字段并更新整个选择中的该字段。选择是在没有复选框的情况下完成的，只需突出显示行。由于该侦听器被许多网格使用，我需要一种方法来从网格侦听器作为参数获取的内容中获取它，但这只是存储、记录和操作

```
Ext.override(Ext.ux.grid.livegrid.Store, {
    listeners: {
      'update': function(store, record, action) {
        if (action=='commit'){ //each update has 2 actions, an edit and a commit
          var selected = grid.getSelectionModel().getSelections();  //need to know which grid
          if (selected.length>1){ //if more than one row selected
            grid.suspendEvents();
            store.writer.autoSave = false;
            for(var i=0; i < selected.length; i++){
              if (this.fieldChanged) {
                for (var name in this.fieldChanged) { 
                  //get the field changed and update the selection with the value
                  if (selected[i].get(name)!=this.fieldChanged[name]){
                    selected[i].set(name, this.fieldChanged[name]);
                  }
                } 
              }
            }
            grid.resumeEvents();
            store.fireEvent("datachanged", store);
            store.writer.autoSave = true;
          }
        }
        if (action=='edit'){
          this.fieldChanged = record.getChanges()
        }
      }
    }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:58:32.337

可能有更多的网格使用商店。最好在 Ext Js 4 中观察 Gridpanel 类，如下所示：

```
//Associate all rendered grids to the store, so that we know which grids use a store.
Ext.util.Observable.observe(Ext.grid.Panel);
Ext.grid.Panel.on('render', function(grid){
    if (!grid.store.associatedGrids){
        grid.store.associatedGrids=[];
    }
    grid.store.associatedGrids.push(grid);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:59:45.793

在扩展中会更容易，但也可以在覆盖中完成。

```
MyGridPanel = Ext.extend(Ext.ux.grid.livegrid.EditorGridPanel, { 
    initComponent: function(){  
        MyGridPanel.superclass.initComponent.call(this);
        this.store.grid = this;
    }
}); 
```

编辑 --- 显示如何在覆盖中执行，它不漂亮但很有用。

```
var oldInit = Ext.ux.grid.livegrid.EditorGridPanel.prototype.initComponent;
Ext.override(Ext.ux.grid.livegrid.EditorGridPanel, {
    initComponent: function(){
        oldInit.call(this);
        this.store.grid = this;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:46:59.077

我自己找到了一个解决方案，我覆盖了 livegrid 以在其存储中包含对自身的引用，就像这样

```
Ext.override(Ext.ux.grid.livegrid.EditorGridPanel, {
    listeners: {
      'afterrender': function(self) {
        this.store.grid = this.id;
      }
    }
  }); 
```

然后在我的商店监听器中，我可以参考 store.grid

# android - Android敬酒Listview元素？

> ID：10447066
> 
> 赞同：0
> 
> 时间：2012-05-04T10:28:47.970
> 
> 标签：android, listview

我正在使用以下代码在 Android 中创建一个 listView：

```
 ListView listView = (ListView) List.this.findViewById(R.id.mylist);
         listView.setTextFilterEnabled(true);

         String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" ,"asdsad","asdsdsa","asdasdsa"};

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,R.layout.list_item,values);

            // Assign adapter to ListView

            listView.setAdapter(adapter);
            listView.setVisibility(0); 
```

**现在我想从我的 ListView 中 Toast 一个选定的项目，所以我使用以下代码：**

```
listView.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position,
                        long id) {

                    String item = ((TextView)view).getText().toString();

                    Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();

                }
            }); 
```

但不幸的是，我收到以下代码的错误

```
listView.setOnItemClickListener(new OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View view, int position,
                            long id) 
```

错误是

**new AdapterView.OnItemClickListener(){} 类型必须实现继承的抽象方法 AdapterView.OnItemClickListener.onItemClick(AdapterView, View, int, long)**

那么我应该怎么做才能纠正这个错误并打印我的 listview 元素？ **编辑**

**整个代码**

```
package com.notification;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.Toast;
import android.view.*;

public class List1 extends Activity 
{

Context context=this;

@Override
        public void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);
        //ListView
        try{

         ListView listView = (ListView) List1.this.findViewById(R.id.mylist);
         listView.setTextFilterEnabled(true);

         String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
            "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
            "Linux", "OS/2" ,"asdsad","asdsdsa","asdasdsa"};

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(context,R.layout.list_item,values);

            // Assign adapter to ListView

            listView.setAdapter(adapter);
            listView.setVisibility(0);

            //required
            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view, int position,long id)
                //public void onItemClick(ListView<?> listview, View view, int position,long id)
                {

                 Toast.makeText(List1.this, "hi",Toast.LENGTH_LONG).show();
                }
            });

            //required
            }
       catch(Exception e)
       {
        Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();}
       }
} 
```

什么都没有烤。为什么？
**编辑 2**
**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<Button xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/tv1"
    android:padding="10dp"
    android:background="@drawable/textview1"
    style="@style/textview_text"
    android:textSize="16dp">

</Button> 
```

**列表视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

  <ListView
        android:id="@+id/mylist"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:59:00.583

将列表项的样式更改为 R.layout.simple_liast_item_1 而不是自定义样式。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String> (this,android.R.layout.simple_list_item_1,values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:02:17.890

您已将您的**java 编译器版本设置为 1.5**，因此它给出了错误。

你可以做两件事。

1）删除*onItemClick*`@Override`之前写的

 *2)`right-click project - properties - java compiler - check-Enable project setting - change to 1.6`

此外，还需要进行其他更改。

显示时`YouActivityName.this`改为使用`getBaseContext()``Toast`

项目可以为空，所以改变......`String item = values[position]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:33:33.780

```
 ListView listView = (ListView) findViewById(R.id.mylist);
    listView.setTextFilterEnabled(true);

    final String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
       "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
       "Linux", "OS/2" ,"asdsad","asdsdsa","asdasdsa"};

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, values);

       // Assign adapter to ListView

       listView.setAdapter(adapter);
       listView.setVisibility(0);

       listView.setOnItemClickListener(new OnItemClickListener() {
           @Override
           public void onItemClick(AdapterView<?> parent, View view, int position,
                   long id) {

               String item = values[position];

               Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();

           }
       }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:38:30.117

尝试这个，

```
Toast.makeText(getApplicationContext(),
                ((TextView) view).getText(), Toast.LENGTH_SHORT).show(); 
```*

# drupal - 如何将 webform 生成的表单包装在 div 中？

> ID：10447073
> 
> 赞同：0
> 
> 时间：2012-05-04T10:29:15.617
> 
> 标签：drupal, drupal-6, drupal-theming

我现在正在使用 Drupal。是否可以将社区 webform 模块生成的表单包装在 div 中？任何主题方法或挂钩点来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:35:14.263

您可以通过 hook_page_alter 在表单周围添加一个 div，例如：

```
function hook_page_alter(&$page) {
  // Add help text to the user login block.
  $page['content']['...']['form'] = array(
    '#prefix' => '<div>', 
    '#suffix' => '</div>',
  );
} 
```

# c# - get_Offset 和 Offset 的区别？

> ID：10447076
> 
> 赞同：1
> 
> 时间：2012-05-04T10:29:27.723
> 
> 标签：c#, excel, excel-interop

我不明白 和 之间的`get_Offset`区别`Offset`：

[MSDN 关于 NamedRange.get_Offset](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.namedrange.get_offset.aspx)状态

> 此 API 支持 Visual Studio 基础结构，不打算直接从您的代码中使用。使用 Offset 属性而不是此方法。

这到底是什么意思？对于直接在代码中广泛使用的[get_Value](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.namedrange.get_value%28v=vs.80%29.aspx)方法也有类似的说法。

下面的例子对我来说也是一样的。

```
myRange.get_Offset(1,0).Value = "Foo";
myRange.Offset[1,0].Value = "Foo"; 
```

他们有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:36:15.733

```
get_Something 
```

是由 CLR 为属性访问器生成的内部函数`get`。

例如，如果您有财产

```
public string Name {get;set;} 
```

编译后你会发现一个

`get_Name`和`set_Name` *方法*，因为属性只是单个类域中 set-variable/get-variable 概念的简单*包装器。*

**作为一种内部方法，使用它不是一个好习惯，最好使用用户定义的清晰`property`访问。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:39:46.653

get_Offset 理论上可以在没有警告的情况下更改或删除。如果文档说要使用另一种等效方法，您应该这样做。get_Value 仅在 Visual Studio 2005 中以这种方式标记，因此您可以自由使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:36:02.643

差异与文档所说的完全一样。您应该使用`Offset`属性，而不是`get_Offset`方法。

该方法只是公开的，因为他们需要其他类可以以这种方式访问​​它。如果他们找到使用该类的更好方法，该方法可能会在任何未来版本中消失，并且它甚至不会被提及为重大更改，因为文档明确指出您不应该使用它。

# c - 我的未定义引用已定义

> ID：10447078
> 
> 赞同：1
> 
> 时间：2012-05-04T10:29:30.187
> 
> 标签：c, undefined-reference

当我尝试编译它时，它显示“testrand.c:(.text+0x11): undefined reference to `rand_number'”

```
1 #include <stdio.h>
2 #include <time.h>
3 
4 int rand_number(int param);
5 
6 main()
7 {
8 while(5)
9 {
10         printf("%d", rand_number(15));
11         sleep(1);
12 }       
13 
14 
15 int rand_number(int param)
16  {
17   srand((unsigned int)time(NULL));
18     int x = param;
19     int rn = rand() % x;
20         return rn;
21 }       
22 } 
```

但是，我在上面已经明确定义了......

我尝试在引号中包含 time.h，包括 stdlib.h 等……但仍然不知道发生了什么。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:32:42.313

发生这种情况是因为您的`rand_number`函数是在其他函数中定义的，`main`.

这应该可以解决您的问题：

```
#include <stdio.h>
#include <time.h>

int rand_number(int param);

main()
{
    while(5)
    {
        printf("%d", rand_number(15));
        sleep(1);
    }
}

int rand_number(int param)
{
    srand((unsigned int)time(NULL));
    int x = param;
    int rn = rand() % x;
    return rn;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:32:32.513

您已经`rand_number`在`main`其中定义了不允许的函数。

通过在第 13 行放置 a 来关闭 main() `}`。并`}`从第 22 行删除

# javascript - 实时颜色选择器 hsv 到十六进制字符串？

> ID：10447079
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:29:30.330
> 
> 标签：javascript, colors, hex, draggable, hsv

我需要的是一个实时颜色选择器（在控件仍然被拖动而不是释放它们时生成实时颜色），它使用某种可拖动的控件，可以上下拖动以确定色调饱和度和值。然后应将可拖动事物中的 hsv 转换为十六进制字符串，例如“#000000”。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:32:49.660

看一下

*   [http://www.dematte.at/colorPicker/](http://www.dematte.at/colorPicker/)和
*   [http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/)

两者都应该符合您的要求。

问候，

斯蒂芬

# php - 如何在 Web 应用程序中显示和操作视觉对象？

> ID：10447088
> 
> 赞同：0
> 
> 时间：2012-05-04T10:29:59.093
> 
> 标签：php, javascript, mysql, html5-canvas, data-visualization

仅使用 HTML、CSS、JavaScript 和带有服务器端脚本语言（例如 PHP 和 MySQL）的关系数据库，您如何检索和显示数据对象并直观地操作它们？

通过操作，我的意思是创建新对象、检索存储的对象、可视化它们的属性（例如，使圆直径变大或变小），以及基于拖放（改变大小、形状和位置）调用方法和设置字段值。

一个使用示例是带有磁性计数器的物理办公室白板的在线表示，用于问题监控和跟踪。一个表有指定问题所有者的行，以及代表业务工作流的列，例如 4 阶段“分配”、“调查”、“实施”、“同意关闭”流程（或其他任何内容，只是一个示例）。

用户将单击一个按钮来创建一个新的问题对象，该对象具有自己的唯一 ID 号。它的形状取决于它的问题类型、它的颜色和它的状态（红色、琥珀色、绿色，例如没有计划，落后但恢复计划，计划中）。将其拖到相关的表格单元格将根据其行索引将其分配给所有者，并根据列索引设置生命周期状态。每次拖放或更改对象时，视觉更改都会反映在数据库中的对象属性中。

我在使用 HTML5 画布元素或带有一些巧妙 CSS 的 SVG 之间纠结。我可以弄清楚如何将数据库中已有的内容放到屏幕上，但不知道如何通过屏幕操作和存储更改。我还假设这可以在 HTML/CSS/JavaScript/PHP/MySQL 中完成，但是可以使用哪些其他技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:44:15.403

这听起来最适合作为客户端中心 ajax 的东西。这表示：

*   用 Javascript 编写整个 UI。是使用 canvas、svg 还是纯 HTML5 + CSS3，取决于您的个人偏好、浏览器支持和功能要求。
*   服务器有两个工作：服务于 javascript 应用程序，并响应 ajax 请求。

然后可以完全在 Javascript 中完成拖放；您可能想使用一个为您实现细节的 javascript 库（您可以使用一些 jQuery 扩展）；您只需要订阅正确的事件，并触发 ajax 请求来更新和查询您的数据。例如，如果用户将一个项目拖到一个表格单元格中，您将获得该项目的 ID、表格单元格的 ID，并触发一个 ajax 请求，告诉服务器“项目 X 现在分配给单元格 Y”，服务器响应“OK”（在这种情况下，您可以在 UI 中使更改永久化）或错误消息（在这种情况下，您可能想要弹出通知或类似的东西）。

通信协议最好的选择是 JSON；它内置于 jQuery 以及大多数 javascript 实现中，它可以轻松通过防火墙和 Web 浏览器，并且大多数编程生态系统（包括 PHP）都内置了 JSON 编码和解码。此外，与基于 XML 的替代方案相比，JSON 的开销非常低。

无论哪种方式，这都不容易，没有灵丹妙药让它只需点击几下就可以工作，你必须问是否值得付出努力。另外，考虑到很明显，当脚本被阻止或在没有足够支持的平台上时，大量 javascript 的界面将无法正常工作（或根本无法正常工作）——想想 CPU 较弱的移动设备和不合标准的网络浏览器， ETC。

# apache - 为 apache 安装 mod_wsgi 模块

> ID：10447094
> 
> 赞同：4
> 
> 时间：2012-05-04T10:30:50.957
> 
> 标签：apache, mod-wsgi

当我为 Apache 安装 WSGI 模块时

[我从http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-win32-ap22py27-3.3.so](http://code.google.com/p/modwsgi/downloads/detail?name=mod_wsgi-win32-ap22py27-3.3.so)下载了模块

重命名为 mod_wsgi.so

复制到 C:\Program Files\Apache Software Foundation\Apache2.2\modules

在 C:\Program Files\Apache Software Foundation\Apache2.2\conf 中编辑“httpd.conf”

在 httpd.conf 的模块加载部分添加行 'LoadModule wsgi_module modules/mod_wsgi.so'

重启阿帕奇

Apache 无法重启

错误日志中的错误是：C:/Program Files/Apache Software Foundation/Apache2.2/conf/httpd.conf 第 129 行的语法错误：无法加载 C:/Program Files/Apache Software Foundation/Apache2.2/modules/ mod_wsgi.so into server: 找不到指定的模块。

这不是文件扩展名或权限的问题。请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T11:20:23.340

确保以下几点：

1.  您没有隐藏扩展并且已经添加了两次扩展。
2.  mod_wsgi.so 文件对于任何 Apache 服务用户都是可读的。
3.  你的 Apache 是 32 位的。
4.  你的 Python 是 32 位的。
5.  你的 Python 是为所有用户安装的，而不仅仅是你安装它的用户。

# java - 如何从 SQL 查询中提取列名作为字符串 SQL 查询作为字符串传递

> ID：10447095
> 
> 赞同：0
> 
> 时间：2012-05-04T10:30:55.293
> 
> 标签：java, api, jakarta-ee

SQL 查询将作为字符串传递给我的方法，如果查询是例如，我如何检索查询中的列名

```
Select name, dob, age, gender from table1; or 
Select uname AS name, hgt AS height, wgt AS weight from table1; 
```

我想获取数组或列表中的列名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:03:53.930

虽然有点令人费解，但这对问题中列出的两个查询都有效：

```
String query = "Select uname AS name, hgt AS height, wgt AS weight from table1";
Pattern p = Pattern.compile("\\s*\\w+,");Pattern p1 = Pattern.compile("\\s+\\w+\\s+from");
Matcher m = p.matcher(query);Matcher m1=p1.matcher(query);
String colsOnly="";
while(m.find()){colsOnly+=(m.group().trim());}
while(m1.find()){colsOnly+=(m1.group().substring(0,m1.group().length()-4).trim());}
String[] cols = colsOnly.split(","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:34:17.343

你有没有尝试过

```
ResultSetMetaData rsmd = rs.getMetaData();
String name = rsmd.getColumnName(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T06:30:14.693

```
 String str = "select dept,empid as eid , ename as name,deptname,deptid as department_id from emp";

    String[] arr = str.split("as");
    StringTokenizer str1 = new StringTokenizer(str, " ,");
    ArrayList<String> arrStr = new ArrayList<>();
    while (str1.hasMoreTokens())
    {
        String strT = str1.nextToken().toString();          
        arrStr.add(strT);
    }       
    for (int i = 0; i < arrStr.size(); i++)
    {
        if (arrStr.get(i).equals("as"))
        {
            System.out.println("Orignal\t" + arrStr.get(i - 1));
            System.out.println("Alias\t" + arrStr.get(i + 1));
        }
    } 
```

输出

原始帝国

别名 eid

原名

别名

原始部门

别名部门_id

# documentum - Documentum DQL 查询以将文件形式的客户端机器导入到存储库

> ID：10447096
> 
> 赞同：2
> 
> 时间：2012-05-04T10:31:02.153
> 
> 标签：documentum

谁能告诉我如何仅使用“DQL”将文档从客户端机器导入到 documentum 存储库，下面是我正在使用的命令......它不起作用的想法......我得到的错误是`[DM_SYSOBJECT_E_CANT_ACCESS_FILE- Unable to access file due to operating system error.`

```
CREATE abc OBJECT 
set object_name='xyz', 
set folder_title='pqr', 
set doc_subtype_code='XXXX', 
set template_code='00', 
set doc_subtype_nme='abc Documents', 
set isworkflowrequired=1,
set iscreatedfrombiztemplate=0, 
set sec_classification_code='O', 
set acl_domain='myacldomain', 
set acl_name='myacl'
set product_wf_code='0'
LINK '/Cabinet123/MYDocs', 
SETFILE 'C:\mydoc.doc' WITH CONTENT_FORMAT='msw8'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:20:35.563

根据文档，使用 setfile 上传的文件必须位于 Content Server 本地或对 Content Server 可见的网络位置。

# java - 如何从类中的另一个函数正确访问方法？

> ID：10447101
> 
> 赞同：0
> 
> 时间：2012-05-04T10:31:09.567
> 
> 标签：java, android, class

我从来没有做过太多的 Java 编程，大部分都是 PHP / RUBY / Javascript，所以我不完全确定如何访问`wLock.release()`from `onDestroy`？

```
public class SlammedNavigatorActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "SN Wake Lock");
        wLock.acquire();
    }

    public void onDestroy() {
        wLock.release();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:32:59.300

您应该将局部变量转换`wLock`为私有字段：

```
public class SlammedNavigatorActivity extends DroidGap {
  private PowerManager.WakeLock wLock;

  public void onCreate(Bundle savedInstanceState) {
    // ...
    wLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "SN Wake Lock");
    // ...
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:34:08.457

使其成为实例变量：

```
public class SlammedNavigatorActivity extends DroidGap {

    private PowerManager.WakeLock wLock;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        this.wLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "SN Wake Lock");
        wLock.acquire();

    }

    public void onDestroy() {
        this.wLock.release();
    }
} 
```

为什么在做 Android 编程之前不学习语言基础知识？阅读[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)，或一本关于 Java 的好书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:34:19.197

使 wLock 成为类成员

```
public class SlammedNavigatorActivity extends DroidGap {

    private PowerManager.WakeLock wLock;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wLock = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "SN Wake Lock");
        wLock.acquire();

    }

    public void onDestroy() {

        wLock.release();
    }
} 
```

# javascript - javascript 如果图像

> ID：10447104
> 
> 赞同：0
> 
> 时间：2012-05-04T10:31:21.423
> 
> 标签：javascript

所以..我有一个 XMLHttpRequest 图片上传器，**我不知道如何限制图片上传器只上传图片**，我已经限制了文件大小，所以它是 3mb，所以它不是太大

问题**你如何限制图片上传者只上传图片**

图片上传代码

```
 // following line is not necessary: prevents running on SitePoint servers
    if (location.host.indexOf("sitepointstatic") >= 0) return

    var xhr = new XMLHttpRequest();
    if (xhr.upload && file.type == ("image/jpg"||"image/png") && file.size <= $id("MAX_FILE_SIZE").value) {

        // create progress bar
        var o = $id("progress");
        var progress = o.appendChild(document.createElement("p"));
        progress.appendChild(document.createTextNode("upload " + file.name));

        // progress bar
        xhr.upload.addEventListener("progress", function(e) {
            var pc = parseInt(100 - (e.loaded / e.total * 100));
            progress.style.backgroundPosition = pc + "% 0";
        }, false);

        // file received/failed
        xhr.onreadystatechange = function(e) {
            if (xhr.readyState == 4) {
                progress.className = (xhr.status == 200 ? "success" : "failure");
            }
        };

        // start upload
        xhr.open("POST", "upload.php", true);           
        xhr.setRequestHeader("X_FILENAME", file.name);
        xhr.send(file);
    }
    else
    {
    alert("file in unsported at this time " + file.type);
    } 
```

我只是想检查他们的文件扩展名只是为了清楚。
谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:40:58.320

不要依赖 javascript 来过滤上传的文件。我建议只检查文件扩展名——它在 99.9% 的时间里都适用于诚实的用户，恶意用户会找到绕过任何 javascript 的方法。

安全性来自服务器端验证。在服务器上，您可以使用函数或库将文件解析为图像来检查。例如，您可以运行一个函数来检查图像的尺寸，如果文件不是图像，则会引发错误。

# ruby-on-rails - 如何修复 Aurigma 上传到 S3 的内容类型？

> ID：10447106
> 
> 赞同：2
> 
> 时间：2012-05-04T10:31:30.203
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, content-type

我们的用户有两种上传图片的方式。一种是通过简单的 HTML 表单，另一种是通过名为 Aurigma 的 iPhone 应用程序。我们使用 Paperclip 处理图像并将它们存储在 S3 上。使用 Aurigma 上传的图像最终会具有错误的内容类型，这会导致它们作为应用程序打开。

我尝试了两种解决方案：

```
before_save :set_content_type

def set_content_type
  self.image.instance_write(:content_type,"image/png")
end 
```

和：

```
before_post_process :set_content_type

def set_content_type
    self.image.instance_write(:content_type, MIME::Types.type_for(self.image_file_name).to_s)
end 
```

似乎这两种解决方案都被忽略了。

使用回形针 3.0.2 版，Aurigma 1.3 版，我正在从我的 iPhone 上传截图。这是我的回形针配置：

```
has_attached_file :image, {
   :convert_options => { :all => '-auto-orient' }, 
   :styles => {
     :iphone3 => "150x150",
     :web => "300x300"
   },
   :storage => :s3, 
   :bucket => ENV['S3_BUCKET'],
   :s3_credentials => {
      :access_key_id => ENV['S3_KEY'],
      :secret_access_key => ENV['S3_SECRET']
   }, 
   :path => "/pictures/:id/:style.:extension",
   :url => "/pictures/:id/:style.:extension"}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T09:54:13.857

据我了解，首先您将所有文件从客户端设备上传到您自己的服务器（通过 Aurigma Up），然后将这些文件上传到 Amazon S3。我在尝试更改客户端设备上的内容类型时遇到了类似的问题。这是不可能的。您应该在服务器上发送文件，然后在将文件上传到 S3 之前更改内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:31:48.320

我刚刚回答了一个[类似的问题](https://stackoverflow.com/a/10445339/7793)。

您需要对其自身进行复制或使用带有查询字符串中指定的内容类型的预签名 url。

使用适用于 Ruby 的 AWS 开发工具包和[`url_for`](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)：

```
object = bucket.objects.myobject
url = object.url_for(:read, :response_content_type => "image/png") 
```

# android - 处理程序 postDelayed 不会延迟发布？

> ID：10447108
> 
> 赞同：1
> 
> 时间：2012-05-04T10:31:45.820
> 
> 标签：android, handler, postdelayed

我想更改 onBackPressed 方法的一些值......我像这样覆盖它：

```
@Override
public void onBackPressed() {

            final Handler backHandler = new Handler();
            backHandler.postDelayed(new Runnable() {
                public void run() {
                    exitCount = 0;
                    Log.d("exitCount", "exitCount: " + exitCount);
                }
            }, Toast.LENGTH_SHORT);

} 
```

但问题是处理程序立即发布......没有延迟。我在哪里做错了？抱歉，如果这是一个蹩脚的问题，我对 Android 还是很陌生。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:35:34.063

那是因为`Toast.LENGTH_SHORT`价值为零。尝试使用您选择的延迟值声明您的常量。看[这里](http://developer.android.com/reference/android/widget/Toast.html#LENGTH_SHORT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:40:32.580

使处理程序成为活动的一部分（或者如果不是用于 UI 线程，则成为您要向其发布消息的线程的一部分），并使用毫秒延迟而不是 Toast.LENGTH_SHORT 的值为零，因此它会立即发生。

```
public class SomeActivity extends Activity {
    private Handler mHandler = new Handler();

    @Override
    public void onBackPressed() {
        mHandler.postDelayed(new Runnable() {

            @Override
            public void run() {
                Log.d("tag", "Hello, Handler!");
            }
        }, 1000); // one second
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:41:39.303

使用贝洛代码，我希望它会起作用。

```
runOnUiThread(new Runnable() {

            @Override
            public void run() {
                backHandler.postDelayed(new Runnable() {
                public void run() {
                    exitCount = 0;
                    Log.d("exitCount", "exitCount: " + exitCount);
                }
            }, Toast.LENGTH_SHORT);
            }
        }); 
```

# javascript - 如何检查我的 div 标签字段是否为空，以及它的空是否对 Jquery 执行某些操作

> ID：10447111
> 
> 赞同：1
> 
> 时间：2012-05-04T10:32:08.143
> 
> 标签：javascript, jquery

我有 5 个`div`具有相同类别的标签。每个`div`标签都有一个文本框和一个带有数字的下拉列表。

如何检查所有这些`div`标签的文本框和下拉列表是否为空以及是否“做某事”。

`$step``div`是一个包含我所有标签的数组。

```
var $step = $(".wizard-step2:visible"); 
```

我的 Textbox 有一个类`Comment`，我的 Dropdownlist 有一个类`Grade`。

到目前为止我已经对此进行了编码，但它是错误的，我不希望它检查每个`div`标签，我希望它检查所有标签。

这是错误的代码：

```
var Comment = $step.find(".Comment").val();
var Grade = $step.find(".Grade").val();

for (var i = 0; i < $step.length; i++) {
    if (Comment != null && Grade > 0) { {
        // do this
    }
    } else {
        alert("You must enter both fields");
    }
} 
```

编辑：

我认为我没有很好地解释我的问题，我的代码就像我在这个问题上得到的所有答案一样工作。我不想用这个 if 语句来检查每个 div 标签。我希望能够检查所有的 div 标签是否有任何空字段做某事“如果所有的 div 标签字段都填满了做某事。

允许用户将字段留空，但如果所有 div 标签字段都已填充，则执行某些操作。

我不想为每个 div 标签做一个 if 语句，如果所有 div 标签都有任何空字段或者如果都是字段，我想做一个 if 语句。

假设我有 5 个 div 标签。我已经填写了其中的 4 个，当我填写最后一个时，5 个 div 标签被填写。在这里我想要这个“做点什么”，否则什么都不应该发生。我不希望在填充的 div 标签 1、2、3、4 上执行 if 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:38:01.173

像这样的东西：

```
$(".wizard-step2:visible").each(function(){
    var Comment = $(this).find(".Comment").val();
    var Grade = $(this).find(".Grade").val();

    if (Comment != '' && Grade > 0) {
    {
        // do this
    } else {
        alert("You must enter both fields");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:49:24.457

找到每个类的填充元素，并使用结果选择的长度来执行测试：

```
var $step = $(".wizard-step2:visible");

// returns true if the element's value is not null
function filled() {
    return !!this.value;
}

// count the number of non-empty elements
var n_step     = $step.length; 
var n_comments = $step.find('.Comment').filter(filled).length;
var n_grades   = $step.find('.Grade'  ).filter(filled).length;

if (n_comments === n_step && n_grades === n_step) {
     // all filled
} else if (n_comments === 0 && n_grades === 0) {
     // all empty
} else {
     // mixed - do nothing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:38:13.987

尝试在每个内容中发表您的评论，例如

```
 var bOK, Comment, Grade ;
        $step.each(function(){
        Comment = $(this).find(".Comment").val();
        Grade = $(this).find(".Grade").val();
if(put your condition here)
else {
bOK = false;
return false
}
        });
// Now test your condition with bOK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:39:39.433

您可以像这样遍历集合或数组：

```
$(".wizard-step2:visible").each(function(count){
    var isCommentEmpty = $(this).find(".comment").val().length == 0;
    if(isCommentEmpty){
        alert('Comment on div ' + count + ' is empty!';
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:51:39.797

您应该使用 jQuery`each()`方法来遍历您`$(".wizard-step2:visible")`的 div 数组。

看看我创建的这个[**jsFiddle**](http://jsfiddle.net/95377/1/)，以展示如何实现这一点

**编辑 ：**

这是此处 jsFiddle 代码的要点：-

```
$('.wizard-step2:visible').each(function(){

    var txtBox = $(this).find('.comment');
    var Select = $(this).find('.Grade');
    var thisDiv = $(this).attr('id');

    if(txtBox.val().length > 0 && Select.val().length > 0)
    {
        alert("values for " +thisDiv+ " are fine");
    }
    else
    {
        alert("please fill in both values for " + thisDiv);
    } 
}); 
```

# java - 读取属性文件时出现空指针异常

> ID：10447113
> 
> 赞同：3
> 
> 时间：2012-05-04T10:32:10.877
> 
> 标签：java, intellij-idea, maven-3

```
propsdatabase = new Properties();
InputStream dbin = getClass().getResourceAsStream("/properties/database.properties");
propsdatabase.load(dbin); 
```

我正在通过名为“properties”的文件夹中名为“database.properties”的属性文件读取我的数据库连接详细信息。就在根目录下面。

当 jar 在 Eclipse 中导出时，代码运行良好。

但我使用 IntelliJ 中的 Maven 项目来获取 jar 。它抛出 NUll 指针异常。

由于 dbin 的值为 NULL。（我也打印并检查了）。

我的结论是无法识别读取文件的路径。

现在 IntelliJ 一切正常。

在 Eclipse 中导出为 jar 时，jar 虽然包含属性文件夹，但未检测到 IT。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:39:09.290

返回 null的原因`getResourceAsStream`是该`/properties/database.properties`文件不在 Maven 类路径中。

将您的属性文件夹移动到文件夹下`/src/main/resources`，当 Maven 创建一个 jar 文件时，该`/properties/database.properties`资源将被包含在内，您将停止获取 NPE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:36:54.437

是的，`getResourceAsStream`毫无疑问是返回null。我怀疑您的 jar 文件不包含该文件。尝试运行：

```
jar tvf yourfile.jar 
```

去检查。接下来，检查 jar 文件的构建步骤。如果没有看到构建文件，很难说出问题所在，因此请编辑您的问题以包含该信息，如果您在查看这些步骤时它没有跳出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:39:01.457

您的 Maven 构建步骤是否包含 jar 中的属性文件？检查生成的 jar 文件。如果您不知道如何始终重命名并在末尾添加“.zip”并打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:55:42.647

您可以尝试使用路径和 FileInputStream 读取属性文件：

```
Properties properties = new Properties();
FileInputStream input = null;
try {
   input = new FileInputStream(new File(CONFIGURATION_FILE));
   properties.load(input);
}catch(...){...} 
```

# spring - 使用云 SQL 对 spring/jpa/hibernate 和 google-appengine 进行单元测试：缺少 API 包 rdbms

> ID：10447117
> 
> 赞同：1
> 
> 时间：2012-05-04T10:32:32.887
> 
> 标签：spring, hibernate, unit-testing, google-app-engine, google-cloud-sql

我尝试使用 spring/jpa/hibernate 和 GAE/Google Cloud SQL 进行简单测试。

但我找不到正确的配置，我总是不断得到：

```
Caused by: com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'rdbms' or call 'OpenConnection()' was not found.
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:98) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.makeSyncCall(RdbmsApiProxyClient.java:95) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at com.google.appengine.api.rdbms.RdbmsApiProxyClient$ApiProxyBlockingInterface.openConnection(RdbmsApiProxyClient.java:73) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at com.google.cloud.sql.jdbc.internal.SqlProtoClient.openConnection(SqlProtoClient.java:58) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at com.google.cloud.sql.jdbc.Driver.connect(Driver.java:66) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at com.google.cloud.sql.jdbc.Driver.connect(Driver.java:26) ~[appengine-api-1.0-sdk-1.6.4.1.jar:na]
    at java.sql.DriverManager.getConnection(DriverManager.java:579) ~[na:1.7.0]
    at java.sql.DriverManager.getConnection(DriverManager.java:190) ~[na:1.7.0]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:192) ~[hibernate-core-4.1.2.Final.jar:4.1.2.Final] 
```

* * *

版本：

*   弹簧框架：3.1.1
*   休眠：4.1.2
*   谷歌应用引擎：1.6.4.1

* * *

持久性.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
      http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">

    <persistence-unit name="gae-test" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.gro.gae.domainmodel.user.UserEntity</class>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"></property>
            <property name="hibernate.show_sql" value="true"></property>
            <property name="hibernate.hbm2ddl.auto" value="update"></property>
            <property name="hibernate.connection.url" value="jdbc:google:rdbms://sqlpetstocks:petstocks/dngdatabase"></property>
            <property name="hibernate.connection.driver_class" value="com.google.appengine.api.rdbms.AppEngineDriver"></property>
            <property name="hibernate.connection.driver_class" value="com.google.cloud.sql.Driver"></property>
        </properties>
    </persistence-unit>

</persistence> 
```

* * *

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <jpa:repositories base-package="com.gro.gae.persistence"
        factory-class="com.gro.gae.persistence.CustomJpaRepositoryFactoryBean" />

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="gae-test" /> 
    </bean>

    <bean name="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <context:annotation-config />

    <tx:annotation-driven />

</beans> 
```

* * *

单元测试 ：

```
@RunWith(org.springframework.test.context.junit4.SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:applicationContext-persistence.xml" })
@TestExecutionListeners( { DependencyInjectionTestExecutionListener.class, TransactionalTestExecutionListener.class })
@TransactionConfiguration(defaultRollback = true)
@Transactional
public class ConfigurationTest  {

    @Test
    public void testConfig(){

    }

} 
```

有任何想法吗 ？

谢谢

纪尧姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T22:03:43.173

为时已晚，但也许它会帮助某人。
我发现了同样的问题，[VM args](https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide?hl=es#using_the_java_development_server)在 JUnit 执行下不起作用。

解决方案是让我为测试定义另一个 entityManager/persistenceUnit。

关键是改变新`testPersistence.xml`的属性：

```
<property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver"/>
<property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms:localhost:3306/DB_NAME" /> 
```

和

```
<property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
<property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/DB_NAME" /> 
```

希望这可以帮助。

# haskell - 卡修斯和哈姆雷特

> ID：10447128
> 
> 赞同：0
> 
> 时间：2012-05-04T10:33:04.030
> 
> 标签：haskell, web, hamlet

我习惯于 hamlet 生成内部样式表，如下所示：

`style = [hamlet|<style type=text/css> h3 {margin-bottom: 0} |]`

如何重写以使用 Cassius/Lucius 而不是纯文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:40:19.743

```
toWidget [lucius|
h3 {
    margin-bottom: 0;
}
|] 
```

将生成一个 Yesod 小部件，其中包含您的 CSS。Yesod 书[http://www.yesodweb.com/book](http://www.yesodweb.com/book)有一些非常有启发性的例子。

# javascript - 使用 jQuery 恢复计时器

> ID：10447141
> 
> 赞同：0
> 
> 时间：2012-05-04T10:34:06.887
> 
> 标签：javascript, jquery

我正在使用来自[http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/的插件](http://www.erichynds.com/jquery/a-new-and-improved-jquery-idle-timeout-plugin/)

我想恢复计时器。我写了这个，因为我也想从服务器获取数据。但是**onResume**不起作用（意味着计时器没有重置）。

```
$.get("test1.php?data="+message, function(result){
    //      $("div").html(result);
    $('#idletimeout').html(result)._onResume();
}); 
```

# java - 如何在 ArrayAdapter 类的 getView 方法中使用 startActivityForResult？

> ID：10447143
> 
> 赞同：4
> 
> 时间：2012-05-04T10:34:10.237
> 
> 标签：java, android, android-intent

我想使用 startActivityForResult 从 ArrayAdapter 类调用另一个意图，但我不能这样做。这是我的代码。

**ArrayAdapter 类构造函数**

```
public QsShareManagerAdapter(Context context, String[] values, Long[] size,String[] time,
        boolean isRoot, Boolean[] attrdir, ArrayList<Boolean> selected,boolean type,
        LinearLayout linearLayout,String SHARE,String qsUsername) 
{
    super(context, R.layout.listlayout, values);
    this.context = context;
    this.values = values;
    this.size = size;
    this.time=time;
    this.isRoot = isRoot;
    this.attrdir = attrdir;
    this.selected = selected;
    this.type=type;
    this.linearLayout=linearLayout;
    this.SHARE=SHARE;
    this.qsUsername=qsUsername;
}

    @Override
public View getView(final int position, View convertView, ViewGroup parent) 
{
    String spliter = "/";
    tag=SHARE.split(spliter);

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.listlayout, parent, false);

    //
    addFiles=(Button)linearLayout.findViewById(R.id.add_files);
    manageUser=(Button)linearLayout.findViewById(R.id.manage_users);
    deleteSharedFolder=(Button)linearLayout.findViewById(R.id.delete_shared_folder);
    copyFiles=(Button)linearLayout.findViewById(R.id.copy);
    deleteFiles=(Button)linearLayout.findViewById(R.id.delete_files);

    addFiles.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
              Intent intent=new Intent(context,QsFileSelector.class).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  ;
              intent.putExtra(QsFileSelector.SELECTED_FILES,existing_seletedFile);
              intent.putExtra(QsFileSelector.FILE_OR_DIRECTORY, tag[6]);
              startActivityForResult(intent); 
            Toast.makeText(context, "Add Files", Toast.LENGTH_SHORT).show();
        }
    });

    manageUser.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(context, "Manage User", Toast.LENGTH_SHORT).show();              
        }
    });

    deleteSharedFolder.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
              boolean status=serverURL.folderRequestResponseURI("DELETED_CREATOR", tag[6], qsUsername, tag[5], null, "");
              if(status){
                  Toast.makeText(context, "Delete Share Folder", Toast.LENGTH_SHORT).show();
              }
        }
    });

    copyFiles.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(context, "Copy", Toast.LENGTH_SHORT).show();
        }
    });

    deleteFiles.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Toast.makeText(context, "Delete", Toast.LENGTH_SHORT).show();
        }
    });

    TextView textView = (TextView) rowView.findViewById(R.id.txtview);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.icon);
    TextView sizeView = (TextView) rowView.findViewById(R.id.size);

    final CheckBox checkbox = (CheckBox) rowView
            .findViewById(R.id.checkbox);

    String s = values[position];

    checkbox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {
        int postion=position;
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) 
        {
            // TODO Auto-generated method stub
            if(isChecked){
                addToList(values[postion],true);
            }else{
                addToList(values[postion],false);                   
            }
        }
    });
    rowView.setTag(s);
    if (!values[position].contains("my_shared_folder") && isRoot && type) 
    {
        s = values[position] + " 's Shared Folder";
        textView.setText(s);
    } 
    else 
    {
        textView.setText(values[position]);
    }

    if (size.length != 0)
    {
        double sizeinKb = size[position] / 1024;

        if (sizeinKb > 1024) {
            double sizeinMb = sizeinKb / 1024;
            sizeView.setText(Double.toString(round(sizeinMb, 2,
                    BigDecimal.ROUND_HALF_UP)) + " MB | "+time[position]);
        }

        else if (sizeinKb > 1048576) {
            double sizeinGB = sizeinKb / (1024 * 1024);
            sizeView.setText(Double.toString(round(sizeinGB, 2,
                    BigDecimal.ROUND_HALF_UP)) + " GB | "+time[position]);
        }

        else {
            sizeView.setText(Double.toString(round(sizeinKb, 2,
                    BigDecimal.ROUND_HALF_UP)) + " KB | "+time[position]);
        }

    }

    if (attrdir[position]) 
    {
        imageView.setImageResource(R.drawable.icon_folder_logo);
        sizeView.setText("");
    }
    else 
    {
        checkbox.setVisibility(View.VISIBLE);
        if (s.contains(".mp3") || s.contains(".wav")) 
        {
            imageView.setImageResource(R.drawable.audio);
        }
        else if (s.contains(".zip") || s.contains(".rar")
                || s.contains(".tar")) 
        {
            imageView.setImageResource(R.drawable.zip);
        }
        else if (s.contains(".db")) 
        {
            imageView.setImageResource(R.drawable.db_icon);
        }
        else if ((s.contains(".png")) || (s.contains(".jpg"))) 
        {
            imageView.setImageResource(R.drawable.imagview);
        }
        else if ((s.contains(".doc")) || (s.contains(".docx"))) 
        {
            imageView.setImageResource(R.drawable.doc);
        }
        else if ((s.contains(".xls")) || (s.contains(".xlsx"))) 
        {
            imageView.setImageResource(R.drawable.excel);
        }
        else if ((s.contains(".pdf"))) 
        {
            imageView.setImageResource(R.drawable.pdf);
        }
        else 
        {
            imageView.setImageResource(R.drawable.unknown);
        }
    }
    /*
     * for(int i=0;i<size.size();i++){
     * sizeView.setText(Integer.toString(size.get(i))); }
     */     

    if(fileList.contains(values[position]) && checkStatus.contains(true)){
        linearLayout.setVisibility(View.VISIBLE);
        checkbox.setChecked(true);
    }

    if(fileList.size() == 0){
        linearLayout.setVisibility(View.GONE);
    }
    checkbox.setTag(values[position]);
    return rowView;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T10:36:19.267

使用`context`您拥有的并将该上下文转换为活动。像：

```
((Activity)context).startActivityForResult(intent); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T10:35:46.590

```
addFiles.setFocusable(false); 
```

我认为您应该更改`Context`为`Activity`...在您的适配器构造函数中更改它... activity.startActivityForResult(intent,position);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:36:17.557

为什么你不能？你有上下文，使用它。

更新：必须将其转换为 Activity 或更改类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:45:47.243

采用

```
getApplicationContext().startActivityForResult(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-28T09:53:18.680

要实现这一点，您需要上下文

> ((Activity)context).startActivityForResult(intent, 1);

如果你只需要启动 Activity 然后这样做

> context.startActivityForResult(intent, 1);

# facebook - Facebook 的“无时区事件”迁移

> ID：10447145
> 
> 赞同：0
> 
> 时间：2012-05-04T10:34:17.240
> 
> 标签：facebook, migration, timezone

Facebook 最近在其开发者路线图中添加了无时区事件（https://developers.facebook.com/roadmap/#timezone-less-events），上面写着

“自从最初创建此迁移以来，我们已向事件添加了一个时区字段，该字段指示预计事件发生的时区名称（如此处定义）。仅供参考，开发人员在 ISO 8601 中读取时间应该支持完整标准读取事件时间时。大多数事件返回本地时间（无 GMT 偏移），但未来事件可能会返回其他格式（即仅日期和精确）。

它适用于 ISO 8601 格式的日期，但如果我得到纪元格式的日期，我总是会得到 +7 小时的差异。

例如

[https://graph.facebook.com/369000383135224](https://graph.facebook.com/369000383135224)返回

```
{
  "id": "369000383135224",
  "owner": {
    "name": "Horst Uwe Peter",
    "id": "1117563687"
  },
  "name": "Event in Dublin time 10:25",
  "start_time": "2012-05-04T10:25:00",
  "end_time": "2012-05-04T11:25:00",
  "timezone": "Europe/Dublin",
  "location": "Dublin, Ireland",
  "venue": {
    "id": "110769888951990"
  },
  "privacy": "FRIENDS",
  "updated_time": "2012-05-04T09:27:29+0000",
  "type": "event"
} 
```

和

[http://graph.facebook.com/369000383135224?date_format=U](http://graph.facebook.com/369000383135224?date_format=U)返回

```
{
  "id": "369000383135224",
  "owner": {
    "name": "Horst Uwe Peter",
    "id": "1117563687"
  },
  "name": "Event in Dublin time 10:25",
  "start_time": 1336152300, <== Fri, 04 May 2012 17:25:00 GMT
  "end_time": 1336155900, <== Fri, 04 May 2012 18:25:00 GMT 
  "timezone": "Europe/Dublin",
  "location": "Dublin, Ireland",
  "venue": {
    "id": "110769888951990"
  },
  "privacy": "FRIENDS",
  "updated_time": 1336123649,
  "type": "event"
} 
```

以及使用 GRAPH 端点的 FQL

graph.facebook.com/fql?q=选择 eid、名称、描述、位置、地点、开始时间、结束时间、更新时间、创建者、隐私 FROM 事件 WHERE eid = 369000383135224

```
{
  "data": [
    {
      "eid": 369000383135224,
      "name": "Event in Dublin time 10:25",
      "description": "",
      "location": "Dublin, Ireland",
      "venue": {
        "id": 110769888951990
      },
      "start_time": 1336152300, <== Fri, 04 May 2012 18:25:00 GMT
      "end_time": 1336155900, <== Fri, 04 May 2012 18:25:00 GMT
      "update_time": 1336123649,
      "creator": 1117563687,
      "privacy": "FRIENDS"
    }
  ]
} 
```

这是否意味着迁移仅适用于 ISO 8601 格式的日期？并且对 FQL 或纪元日期格式没有影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:24:17.153

我管理的页面上的事件从未返回时区。

我发现在前端对话框中输入的事件时间在“America/Los_Angeles”中被视为当地时间（完成了美国夏令时的更改，因此您会在冬季看到 +6，在夏季看到 +7）和然后转换为“UTC”以存储在数据库中。

为了显示，我使用以下 php 函数来显示正确的时间，并在页面上注意时间是事件位置的本地时间：

```
function fb_event_time_convert($fb_time) {
$origin_dtz = new DateTimeZone('UTC');
$remote_dtz = new DateTimeZone('America/Los_Angeles');
$fb_time_str = '@' . $fb_time;
$origin_dt = new DateTime($fb_time_str, $origin_dtz);
$remote_dt = new DateTime($fb_time_str, $remote_dtz);
$offset = $origin_dtz->getOffset($origin_dt) - $remote_dtz->getOffset($remote_dt);
return $fb_time - $offset;
} 
```

# javascript - 如何修改 advlink.js？

> ID：10447148
> 
> 赞同：1
> 
> 时间：2012-05-04T10:34:20.500
> 
> 标签：javascript, tinymce

我认为应该很容易的事情现在花费了我大量的时间。

我只是想在 /plugins/advlink/js/advlink.js 文件中编辑一些文本。

考虑这个函数：

```
function getTargetListHTML(elm_id, target_form_element) {
    var targets = tinyMCEPopup.getParam('theme_advanced_link_targets', '').split(';');
    var html = '';
    html += '<select id="' + elm_id + '" name="' + elm_id + '" onchange="this.form.' + target_form_element + '.value=';
    html += 'this.options[this.selectedIndex].value;">';
    html += '<option value="_self">' + tinyMCEPopup.getLang('advlink_dlg.target_same') + '</option>';
    html += '<option value="_blank">' + tinyMCEPopup.getLang('advlink_dlg.target_blank') + ' (_blank)</option>';
    html += '<option value="_parent">' + tinyMCEPopup.getLang('advlink_dlg.target_parent') + ' (_parent)</option>';
    html += '<option value="_top">' + tinyMCEPopup.getLang('advlink_dlg.target_top') + ' (_top)</option>';

    for (var i=0; i<targets.length; i++) {
        var key, value;

        if (targets[i] == "")
        continue;

        key = targets[i].split('=')[0];
        value = targets[i].split('=')[1];

       html += '<option value="' + key + '">' + value + ' (' + key + ')</option>';
    }

    html += '</select>';

    return html;
} 
```

例如，如果我`advlink_dlg.target_blank`在适当的语言文件中进行更改，则更改似乎正常。

但是，如果我尝试将`' (_blank)'`同一行上的更改为任何内容，例如。`' (__blank)'`， 没发生什么事。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:00:46.923

你所做的应该有效！

我将 (in `/plugins/advlink/js/advlink.js`) 行更改为

```
html += '<option value="_blank">' + tinyMCEPopup.getLang('advlink_dlg.target_blank') + ' (XXXXXXXXXXXX_blank)</option>'; 
```

看看我在选择一些文本+按下链接按钮后得到了什么：

![在此处输入图像描述](../Images/a3e3fd9f192f15f402e1bd491b3eeeba.png)

# c# - 单击单个单元格时，如何突出显示整个 DataGrid 行？

> ID：10447152
> 
> 赞同：10
> 
> 时间：2012-05-04T10:34:31.867
> 
> 标签：c#, wpf, xaml, datagrid

我有一个 DataGrid 定义如下。当我单击 DataGrid 中的一个单元格时，仅突出显示该单元格。如何更改它，以便在单击单元格时突出显示整行？

```
<DataGrid Name="fileGrid" AutoGenerateColumns="False" Height="150" Width="Auto" 
            Margin="10,10,0,0" 
            HorizontalAlignment="Left" VerticalAlignment="Top" SelectionChanged="fileGrid_SelectionChanged">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Company Name" 
            x:Name="columnCompanyName" 
            Binding="{Binding Path=Customer.CompanyName}"
            IsReadOnly="True">                    
        </DataGridTextColumn>

        <DataGridTextColumn Header="Customer Surname" 
            x:Name="columnCustomerSurname" 
            Binding="{Binding Path=Customer.Surname}"
            IsReadOnly="True">
        </DataGridTextColumn>

        <DataGridTextColumn Header="Customer Address" 
            x:Name="columnAddressLine1" 
            Binding="{Binding Path=Customer.Address.Line1}"
            IsReadOnly="True">
        </DataGridTextColumn>

        <DataGridTextColumn Header="Customer City" 
            x:Name="columnCity" 
            Binding="{Binding Path=Customer.Address.City}"
            IsReadOnly="True">
        </DataGridTextColumn>

    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T10:44:25.127

你试过`<DataGrid SelectionMode="Single" SelectionUnit="FullRow">`吗？

但实际上，如果我单击一个单元格，则它的默认行为会突出显示整行

SelectionMode 文档：[https ://msdn.microsoft.com/en-us/library/system.windows.controls.datagridselectionmode%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.windows.controls.datagridselectionmode%28v=vs.110%29.aspx)

SelectionUnit 文档：[https ://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionunit%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionunit%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T10:41:04.877

查看 selectionmode 属性 [http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionmode.aspx)

# c++ - C++ 执行 使用按钮的编码测试 UI。WINAPI（无 MFC）

> ID：10447154
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:34:45.790
> 
> 标签：c++, winapi, coded-ui-tests

我想知道是否可以在单独的 GUI 应用程序中执行我通过按钮单击编写的编码 UI 测试。测试项目没有生成我可以看到的exe。

基本上我有一个 c++ GUI 应用程序，当我按下 OK 按钮时，我希望运行编码的 UI 测试，打开网页并搜索某个短语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:57:41.287

CodedUI 测试项目不会生成 exe 文件，因为它们不打算独立运行。但是，您可以从 C#/VB 应用程序运行 CodedUI 代码，前提是您添加了正确的引用并初始化了播放引擎。

仅供参考，但如果您打算分发此类应用程序，则涉及依赖和许可问题。

# css - div中的图像对齐

> ID：10447162
> 
> 赞同：0
> 
> 时间：2012-05-04T10:35:19.587
> 
> 标签：css, image, html, alignment

我正在为 webapp 创建标题部分。我在按应有的方式对齐和定位事物时遇到了一些困难。![在此处输入图像描述](../Images/de7ac7fbef54411e6e4e8e87077ed52d.png)

您在右侧看到的注销按钮应向上移动到浅灰色区域。换句话说，与徽标相同。这是该部分的 html：

```
<div>

    <img src="Images/logo.png" id="imgLogo" alt="" />
    <img src="Images/logout-idle.png"
         alt=""
         id="imgLogout"
         onmouseover="this.src='Images/logout-hover.png'"
         onmouseout="this.src='Images/logout-idle.png'"
         onmousedown="this.src='Images/logout-down.png'"
         />

</div> 
```

这些元素的 CSS：

```
#imgLogo{
    margin: 0 auto;
    display: block;
}

#imgLogout{
    float: right;
    margin-top: 4px;
    margin-right: 10px;
} 
```

我究竟做错了什么？我该怎么做才能让那个该死的注销按钮移到顶部？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:43:13.547

对于 img 徽标，我会制作一个 div 元素并将其作为背景，如下所示：

```
#imglogo{
    background: url('Images/logo.png') no-repeat;
} 
```

然后对于注销按钮，我会将其放在 div 中，如下所示：

```
<div id="imglogo">
<img src="Images/logout-idle.png"
     alt=""
     id="imgLogout"
     onmouseover="this.src='Images/logout-hover.png'"
     onmouseout="this.src='Images/logout-idle.png'"
     onmousedown="this.src='Images/logout-down.png'"
     />
</div> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:44:53.393

如果你设置

```
 #imgLogout{
    float: right;
    margin-top: 4px;
    margin-right: 10px;
    } 
```

到

```
 #imgLogout{
     position: absolute;
     top: 4px;
     right: 10px
     } 
```

这将把它放在你想要的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:39:00.273

您应该为每个元素设置宽度。第二个img应该有

```
display: block 
```

也是。

或者你可以使用这样的东西

```
#imgLogout{
    float: right;
    margin-top: 4px;
    margin-right: 10px;
}

#imgbg {

    background-image: url(Images/logo.png);
    background-position: 50% 50%;
    background-repeat: no-repeat;
}

<div id="imgbg">
    <img src="Images/logout-idle.png"
         alt=""
         id="imgLogout"
         onmouseover="this.src='Images/logout-hover.png'"
         onmouseout="this.src='Images/logout-idle.png'"
         onmousedown="this.src='Images/logout-down.png'"
         />
</div> 
```

# javascript - 启动 asp 会话 OnClick（单击链接时）

> ID：10447165
> 
> 赞同：0
> 
> 时间：2012-05-04T10:35:32.503
> 
> 标签：javascript, session, asp-classic, onclick

我有这个代码：

`<a href="index.asp" onclick="<%Session("example") = True%>">LINK</a>`

问题是会话示例中的此结果在加载此页面时为真，而不是在单击链接时。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:40:15.610

页面中的所有服务器代码在页面发送到浏览器之前在服务器上运行。你最终在浏览器中得到的只是：

```
onclick="" 
```

如果要在浏览器中发生事件时运行服务器代码，则必须向服务器发出另一个请求。您可以回发页面并将一些信息发送回服务器（在 querystring/formdata/cookie 中），或者使用 AJAX 请求包含您要运行的服务器代码的不同页面。

* * *

### 编辑：

要使用查询字符串，请重新加载同一页面并将例如添加`?ex=1`到 URL。在服务器代码中，您可以检查并设置会话：

```
If Request.QueryString("ex") = "1" Then
  Session("example") = True
End If 
```

# php - PHP：插入一行并选择插入行的ID

> ID：10447172
> 
> 赞同：0
> 
> 时间：2012-05-04T10:35:50.767
> 
> 标签：php, mysql, sql

插入一行后，我想知道它的 id。是否可以通过插入在同一个查询中获取它？请注意，我在 PHP 上遇到了问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:36:55.053

是的，您可以使用[`mysql_insert_id`](http://php.net/manual/en/function.mysql-insert-id.php)

> mysql_insert_id — 获取上一次查询生成的 ID

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:39:01.347

使用 mysql_* 函数：

```
// after the query
$id = mysql_insert_id(); 
```

使用 MySQLi

```
// after the query
$id = $mysqli->insert_id; 
```

使用 PDO

```
// after the query
$id = $pdo->lastInsertId(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:42:06.620

或者，更好的是，对于 mysqli/oop：

```
$mysqli->query("INSERT ...");
echo $mysqli->insert_id; 
```

[http://php.net/manual/en/mysqli.insert-id.php](http://php.net/manual/en/mysqli.insert-id.php)

# android - 如何为 ListView 项上的单击事件设置侦听器

> ID：10447179
> 
> 赞同：0
> 
> 时间：2012-05-04T10:36:17.013
> 
> 标签：android, onclick, android-listview

我为项目单击事件编写了以下代码`ListView`，但是当我运行应用程序并单击项目时，没有任何操作。为什么会这样？

```
 public class ListingActivity extends Activity implements OnClickListener{
    private ListView list;
    private Button sortBtn,filter;
    double destLat,destLng;
    AlertDialog alert;
    MyAdabpter adapter;

    ArrayList<HashMap<String,String>> filteredList;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listviewer);
        list = (ListView) findViewById(R.id.list);
        sortBtn = (Button) findViewById(R.id.sort_btn);
        filter = (Button) findViewById(R.id.filter_btn);
    //      ListAdapter adapter = new SimpleAdapter(this, FetchXMLData.mylist , R.layout.list_item, 
    //              new String[] { "Name", "Vicinity","Distance","Rating"}, 
    //              new int[] { R.id.name, R.id.address,R.id.distance,R.id.rating });
        adapter = new MyAdabpter(this);

        list.setAdapter(adapter);
        list.setTextFilterEnabled(true);
        list.setEnabled(true);
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                    long arg3) {
                // TODO Auto-generated method stub
                destLat = Double.parseDouble(FetchXMLData.mylist.get(position).get("Latitude"));
                destLng = Double.parseDouble( FetchXMLData.mylist.get(position).get("Longitude"));
                Intent intent = new Intent(Intent.ACTION_VIEW, 
                        Uri.parse("http://maps.google.com/maps?saddr=" + LocationSearch.latitude + "," + LocationSearch.longitude + 
                                "&daddr=" + destLat + "," + destLng));
                    intent.setComponent(new ComponentName("com.google.android.apps.maps", 
                        "com.google.android.maps.MapsActivity"));
                    startActivity(intent);

            }
        });

        sortBtn.setOnClickListener(this);
        filter.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.sort_btn:
            showSortList();
            break;

        case R.id.filter_btn:
            showFilterList();
            break;
        default:
            break;
        }

    }
    protected void showSortList() {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"Rating", "Distance"};
        AlertDialog.Builder builder = new AlertDialog.Builder(ListingActivity.this);
        builder.setTitle("Sort by");
        FetchXMLData.mylist = FetchXMLData.templist;
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                Collections.sort(FetchXMLData.mylist,Collections.reverseOrder(new MyComparator(items[item].toString())));
                dialog.dismiss();
                adapter.notifyDataSetChanged();
            }
        });
        alert = builder.create();
        alert.show();
    }
    protected void showFilterByRating() {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"only 5 stars", "only 4 stars","only 3 stars", "only 2 stars","only 1 star"};

        AlertDialog.Builder builder = new AlertDialog.Builder(ListingActivity.this);
        builder.setTitle("Filter by Rating");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                dialog.dismiss();
                FetchXMLData.mylist = FetchXMLData.templist;
                filteredList = new ArrayList<HashMap<String,String>>();
                if(item == 0 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(!FetchXMLData.mylist.get(i).get("Rating").equals(""))
                        {
                            if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Rating").toString()) == 5)
                            {
                                filteredList.add(FetchXMLData.mylist.get(i));
                            }
                        }
                    }
                    FetchXMLData.mylist = filteredList;
                    adapter.notifyDataSetChanged();
                }
                else if(item == 1 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(!FetchXMLData.mylist.get(i).get("Rating").equals(""))
                        {
                            if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Rating")) == 4.0 )
                            {
                                filteredList.add(FetchXMLData.mylist.get(i));
                            }
                        }
                    }
                    FetchXMLData.mylist = filteredList;
                    adapter.notifyDataSetChanged();
                }
                else if(item == 2 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(!FetchXMLData.mylist.get(i).get("Rating").equals(""))
                        {
                            if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Rating")) == 3.0 )
                            {
                                filteredList.add(FetchXMLData.mylist.get(i));
                            }
                        }
                    }

                }
                else if(item == 3 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(!FetchXMLData.mylist.get(i).get("Rating").equals(""))
                        {
                            if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Rating")) == 2.0 )
                            {
                                filteredList.add(FetchXMLData.mylist.get(i));
                            }
                        }
                    }

                }
                else if(item == 4 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(!FetchXMLData.mylist.get(i).get("Rating").equals(""))
                        {
                            if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Rating")) == 1.0 )
                            {
                                filteredList.add(FetchXMLData.mylist.get(i));
                            }
                        }
                    }

                }
                if(filteredList.size() > 0)
                {
                    FetchXMLData.mylist = filteredList;
                    adapter.notifyDataSetChanged();
                }
                else
                {
                    Toast.makeText(getApplicationContext(),"Sorry,no data found", Toast.LENGTH_SHORT).show();
                }
            }
        });
        alert = builder.create();
        alert.show();
    }
    protected void showFilterList() {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"By Rating", "By Distance", "By Name"};

        AlertDialog.Builder builder = new AlertDialog.Builder(ListingActivity.this);
        builder.setTitle("Filter by");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                dialog.dismiss();
                FetchXMLData.mylist = FetchXMLData.templist;
                if(items[item].equals("By Rating"))
                {
                    showFilterByRating();
                }
                else if(items[item].equals("By Distance"))
                {
                    showFilterByDistance();
                }
                else if(items[item].equals("By Name"))
                {
                    //showFilterByName();
                }

            }
        });
        alert = builder.create();
        alert.show();
    }
    protected void showFilterByDistance() {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"between 0-2km", "between 2-4km","between 4-5km"};

        AlertDialog.Builder builder = new AlertDialog.Builder(ListingActivity.this);
        builder.setTitle("Filter by Distance");
        FetchXMLData.mylist = FetchXMLData.templist;
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                dialog.dismiss();
                filteredList = new ArrayList<HashMap<String,String>>();
                if(item == 0 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) > 0 && Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) <= 2  )
                        {
                            filteredList.add(FetchXMLData.mylist.get(i));
                        }
                    }

                }
                else if(item == 1 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) > 2 && Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) <= 4 )
                        {
                            filteredList.add(FetchXMLData.mylist.get(i));
                        }
                    }

                }
                else if(item == 2 && FetchXMLData.mylist.size() > 0)
                {
                    for(int i = 0; i < FetchXMLData.mylist.size(); i++)
                    {
                        if(Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) > 4 && Float.parseFloat(FetchXMLData.mylist.get(i).get("Distance")) <=5  )
                        {
                            filteredList.add(FetchXMLData.mylist.get(i));
                        }
                    }

                }
                if(filteredList.size() > 0)
                {
                    FetchXMLData.mylist = filteredList;
                    adapter.notifyDataSetChanged();
                }
                else
                {
                    Toast.makeText(getApplicationContext(),"Sorry,no data found", Toast.LENGTH_SHORT).show();
                }
            }
        });
        alert = builder.create();
        alert.show();
    }
    protected void showFilterByName() {
        // TODO Auto-generated method stub
        final CharSequence[] items = {"between 0-2km", "between 2-4km","between 4-5km"};
        FetchXMLData.mylist = FetchXMLData.templist;
        AlertDialog.Builder builder = new AlertDialog.Builder(ListingActivity.this);
        builder.setTitle("Enter key word");
        builder.setSingleChoiceItems(items, -1, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
                Toast.makeText(getApplicationContext(), items[item], Toast.LENGTH_SHORT).show();
            }
        });
        alert = builder.create();
        alert.show();
    }

} 
```

以下是我的布局文件`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000000"
android:orientation="vertical" >

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:dividerHeight="5dp" >
</ListView>

<RelativeLayout
    android:id="@+id/footer_menu"
    style="@android:color/transparent"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_gravity="bottom"
    android:orientation="vertical" >

    <Button
        android:id="@+id/sort_btn"
        android:layout_width="160dp"
        android:layout_height="fill_parent"
        android:background="@drawable/footer_button"
        android:text="Sort"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />

    <Button
        android:id="@+id/filter_btn"
        android:layout_width="160dp"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@+id/sort_btn"
        android:background="@drawable/footer_button"
        android:text="Filter"
        android:textColor="#FFFFFF"
        android:textStyle="bold" />
</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T07:41:24.900

你想做这样的事情：

```
public class YourActivity extends ListActivity implements OnItemClickListener{

    @Override
    public void onCreate(Bundle icicle){
        super.onCreate(icicle);
        setContentView(R.layout.your_layout);
        getListView().setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // Do your thing here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:37:41.520

```
 listView.setOnItemClickListener(new OnItemClickListener() {
       @Override
       public void onItemClick(AdapterView<?> parent, View view, int position,
               long id) {

           String item = values[position];

           Toast.makeText(getBaseContext(), item, Toast.LENGTH_LONG).show();

       }
   }); 
```

# xpath - Xpath：选择跟随直到节点

> ID：10447184
> 
> 赞同：4
> 
> 时间：2012-05-04T10:36:37.527
> 
> 标签：xpath

在 Xpath 中，我需要选择`<p>`节点之后的`<h2>DATA</h2>`节点，直到 next `<h2>`，所以在如下结构中：

```
<div class="box">
    <h2>NO</h2>
    <p>B:<span> Y</span></p>
    <h2>DATA</h2>
    <p>AA:<span> CONTENT</span></p>
    <p>AA:<span> MORE</span></p>
    <h2>NO</h2>
    <p>C:<span> Z</span></p>
    <h2>DATA</h2>
    <p>BB:<span> CONTENT</span></p>
    <p>BB:<span> MORE</span></p>
</div> 
```

应该选择：

```
 <p>AA:<span> CONTENT</span></p>
    <p>AA:<span> MORE</span></p>
    <p>BB:<span> CONTENT</span></p>
    <p>BB:<span> MORE</span></p> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T10:51:49.167

这个怎么样？

```
p[preceding-sibling::h2[1][.="DATA"]] 
```

* * *

我用于检查我提供的 xpath 的 python 测试：

```
>>> from lxml import etree
>>> doc = etree.XML("""<div class="box">
...     <h2>NO</h2>
...     <p>B:<span> Y</span></p>
...     <h2>DATA</h2>
...     <p>AA:<span> CONTENT</span></p>
...     <p>AA:<span> MORE</span></p>
...     <h2>NO</h2>
...     <p>C:<span> Z</span></p>
...     <h2>DATA</h2>
...     <p>BB:<span> CONTENT</span></p>
...     <p>BB:<span> MORE</span></p>
... </div>""")
>>> doc.xpath('p[preceding-sibling::h2[1][.="DATA"]]')
[<Element p at 252ef70>, <Element p at 252efc8>, <Element p at 2542050>, <Element p at 25420a8>]
>>> doc.xpath('p[preceding-sibling::h2[1][.="DATA"]]/text()')
['AA:', 'AA:', 'BB:', 'BB:'] 
```

# google-drive-api - 谷歌云端硬盘 Java 身份验证

> ID：10447185
> 
> 赞同：1
> 
> 时间：2012-05-04T10:36:37.567
> 
> 标签：google-drive-api

我正在尝试使用[此处指定的文档获取访问令牌和刷新令牌。](https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials)这样做时，我面临一个问题：

```
java.lang.NoSuchMethodError: com.google.api.client.json.JsonFactory.fromInputStream(Ljava/io/InputStream;Ljava/lang/Class;) 
```

在哪里可以找到包含此类和方法的 jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:20:50.903

[Google Drive Java 客户端库](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)基于Google [APIs Java 客户端库](http://code.google.com/p/google-api-java-client/downloads/list)。确保你也下载它。zip 包含库及其所有依赖项。

还要确保您的编译/类路径中没有冲突的 Google API 客户端库版本，因为此方法仅在更高版本中可用。

# iphone - iOS 中的自定义 Cover Flow 实现

> ID：10447186
> 
> 赞同：2
> 
> 时间：2012-05-04T10:36:40.300
> 
> 标签：iphone, ios, ipad, ios5

而不是coverflow中的图像，我想在scrollView中有一个列表按钮（对于coverflow中的每个图像），单击它们应该导航到另一个页面，该页面再次包含滚动视图内的按钮列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:45:30.107

您可以使用[iCarousel](https://github.com/nicklockwood/iCarousel)一个接受 UIViews 作为组件的开源库:)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:25:01.400

使用 - [https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AFOpenFlow/AFOpenFlowView.m](https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AFOpenFlow/AFOpenFlowView.m)

并覆盖**AFOpenFlowView.m中的****touchesEnded**事件

 **这可能会帮助你。**

# mysql - Int id 与 varchar id

> ID：10447189
> 
> 赞同：6
> 
> 时间：2012-05-04T10:36:45.110
> 
> 标签：mysql, int

哪种类型的 id 更适合在 mysql 中查询和用作外键：

1) 大小为 20 的 Varchar id

2)内部标识

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T10:38:08.750

int 通常更好，因为它提供更好的性能。

如果您的项目有一个[自然键](http://en.wikipedia.org/wiki/Natural_key)，它是一个 varchar，您可以使用它并且它会起作用。但是通过添加一个整数[代理键](http://en.wikipedia.org/wiki/Surrogate_key)，您将获得性能改进（以及其他一些好处） 。`AUTO_INCREMENT`您可以为此添加一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:40:10.973

INT ID 总是更可取的..

它速度更快，并且在数据库上使用更少的存储空间。

有时需要 VARCHAR ID，但 INT 更有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:56:12.537

Int IDS 更有效，因为数据库只需比较一次。

所以假设你有`n`行。如果您使用 an`int`那么您将`O(n)`其视为最坏的情况。好像你在哪里使用`varchar(20)`你正在看的`O(n*20)`

# ant - ant 脚本不能支持嵌套的 If 语句？

> ID：10447190
> 
> 赞同：4
> 
> 时间：2012-05-04T10:36:46.790
> 
> 标签：ant, build, ivy

您好我正在尝试构建一个基于 if 条件复制某个 lib 文件的 ant 脚本。但是，当我收到此错误时，它似乎不起作用：

build.xml:20：文件集不支持嵌套的“if”元素。

这是失败的部分：

```
<target name="resolve">
        <delete dir="${lib.dir}">
            <include name="*" />
        </delete>

        <copy todir="${lib.dir}">
            <fileset dir="ext-libs" >
                <if name="${release}" value="true">
                    <include name="hello-client-[^DEBUG]*.jar" />
                </if>
                <else>
                    <include name="hello-client-*DEBUG.*.jar" />
                </else>

            </fileset>
        </copy>
    </target> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:53:03.643

**@JoseK**是对的。ANT 文件集不支持嵌套的“if”语句。事实上，“if”语句不是核心 ANT 的一部分，推荐的方法是使用条件目标（参见示例）

**@slipset**在正确的轨道上。[常春藤配置](http://ant.apache.org/ivy/history/latest-milestone/tutorial/conf.html)可用于有选择地选择您的依赖项。

# 例子

此示例旨在以两种方式之一调用

```
$ ant clean build
$ tree
.
|-- build.xml
|-- ivy.xml
`-- lib
    |-- slf4j-api-1.6.4.jar
    `-- slf4j-simple-1.6.4.jar 
```

或者

```
$ ant -Drelease=1 clean build
$ tree
.
|-- build.xml
|-- ivy.xml
`-- lib
    |-- logback-classic-1.0.3.jar
    |-- logback-core-1.0.3.jar
    `-- slf4j-api-1.6.4.jar 
```

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="resolve">
        <ivy:resolve/>
    </target>

    <target name="retrieve-alt" depends="resolve" unless="release">
        <ivy:retrieve pattern="lib/[artifact]-[revision](-[classifier]).[ext]" conf="altruntime"/>
    </target>

    <target name="retrieve-release" depends="resolve" if="release">
        <ivy:retrieve pattern="lib/[artifact]-[revision](-[classifier]).[ext]" conf="runtime"/>
    </target>

    <target name="build" depends="retrieve-alt,retrieve-release"/>

    <target name="clean">
        <delete dir="lib"/>
    </target>

</project> 
```

笔记：

*   目标上的**if**和**unless**子句对“release”属性的存在执行条件测试。
*   ivy**检索**任务使用配置来决定应该使用哪些 jar 来填充“lib”目录。
*   **检索**模式包括一个“分类器”模式，以防万一您的 ivy 映射拉下其他 Maven 工件，如源或 javadoc jars。

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="altruntime"   description="Alternative 'runtime' configuration" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="altruntime"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>

        <!-- runtime dependencies -->
        <dependency org="ch.qos.logback" name="logback-classic" rev="1.0.3" conf="runtime->default"/>

        <!-- altruntime dependencies -->
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="altruntime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>
    </dependencies>

</ivy-module> 
```

笔记：

*   我强烈建议始终为每个依赖项指定配置映射。然后，这将直接映射到您打算如何使用 jar，例如填充类路径。

# 附录

## 如何使用常春藤配置

ivy 配置可用于模拟 Maven 范围，但实际上 ivy 配置可以表示任何逻辑依赖项分组。

以下是任何 Java 构建所需的 3 个标准类路径：

```
<configurations>
    <conf name="compile" description="Required to compile application"/>
    <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
    <conf name="test"    description="Required for test only" extends="runtime"/>
</configurations> 
```

请注意使您能够创建更大集合的“扩展”语法。例如，**运行时**jar 集还包括**编译**代码所需的任何内容。

Ivy 配置很难理解，除非您意识到它们可用于选择性地填充 ANT 路径：

```
<ivy:cachepath pathid="compile.path" conf="compile"/>

<javac ..... classpathref="compile.path"/> 
```

或用于有选择地填充目录

```
<ivy:retrieve pattern="build/WEB-INF/lib/[artifact].[ext]" conf="runtime"/> 
```

## 配置映射

映射用于决定项目中的 jar 组与其他项目中的 jar 组之间的关系。

这通常发生如下：

```
<dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/> 
```

这里我们的**编译**配置由远程**默认**配置填充（通常其他模块编译依赖项）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:42:40.667

好吧，[apache 文档很清楚](http://ant.apache.org/manual/Types/fileset.html)，您不能将 an 嵌套`<if>`在`<fileset>`

您可能已经看到了[ant-contrib 文件集任务](http://ant-contrib.sourceforge.net/fileset.html)的示例，它**确实**具有`if`作为条件参数

您可以[下载](http://ant-contrib.sourceforge.net/)并使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:56:10.677

我自己做的有点不同。我有

```
<target name="internal-resolve" description="retrieve dependencies with ivy">
    <ivy:retrieve pattern = "${basedir}/lib/[conf]/[artifact].[ext]" conf = "${configuration}" />
</target> 
```

它将罐子放在一个名为`lib/${configuration}`配置作为参数传递的目录中

```
 <target name = "resolve-compile">
    <antcall target = "internal-resolve">
        <param name = "configuration" value = "compile"/>
    </antcall>
</target> 
```

因此，每当调用 resolve-compile 时，都会将 jar 放入`lib/compile`. 这给了我：

```
<path id = "compile.class.path">
    <fileset dir="${basedir}/lib/compile" includes="*.jar"/>
</path> 
```

最后

```
 <target name="compile" 
          depends="init, resolve-compile"
          description="Compile all Java-classes">
    <javac deprecation="false"
           encoding="utf8"
           debug="true"
           srcdir="${java.src.dir}"
           destdir="${build.classes.dir}"
           classpathref="compile.class.path"/>
  </target> 
```

鉴于此，您可以轻松创建自己`resolve-build`的罐子，将罐子放入`lib/build`

当然，您需要将`build`配置添加到您的 ivy.xml 为

```
 <configurations>
      <conf name="compile" visibility="public" description="Whatever"/>
      <conf name="build" visibility="public" description="Whatever"/>
  </configuration> 
```

# javascript - 可以忽略“错误加载脚本”js错误吗？

> ID：10447198
> 
> 赞同：9
> 
> 时间：2012-05-04T10:37:17.413
> 
> 标签：javascript, firefox

我有一个脚本来处理 window.onerrors 并将其推送到我的服务器。我看到一些仅在 Firefox 中发生的“错误加载脚本”错误。

我四处搜索，人们忽略了“错误加载脚本”错误。例如

1.  [神秘的“脚本错误”。在 Chrome 和 Firefox 中以 Javascript 报告](https://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox)
2.  [Firefox：“错误加载脚本”](https://stackoverflow.com/questions/1087518/firefox-error-loading-script)

可以像上面那样安全地忽略这些错误吗？或者我应该只在 Firefox 中忽略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T10:37:32.603

如果忽略你的意思是隐藏，是的，可能。

只需像这样引用您的代码：

```
try {

    // put code that produce error

}
catch( error ){

    // console.log(error);

}; 
```

隐藏错误可能不是解决您问题的更好方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T20:16:06.783

`window.onerror`在 Firefox 14+中未报告“加载脚本错误” ： [MDN](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror#Browser_compatibility)，[Bugzilla](https://bugzilla.mozilla.org/show_bug.cgi?id=737087)。

# java - 填充有数组的多行列表视图？

> ID：10447202
> 
> 赞同：0
> 
> 时间：2012-05-04T10:37:39.067
> 
> 标签：java, android

我有三个数组，我想用它们填充列表视图，直到现在我设法用一个数组和数组适配器填充列表视图，但现在我需要将所有三个数组放在列表视图的每个项目中。简单的代码会有很多帮助。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:53:38.893

请参考此代码来创建自定义适配器

```
public class ListViewAdapter extends BaseAdapter {

private ArrayList<TimeRecord> record = new ArrayList<TimeRecord>();

TextView txtTime, txtNote;

public ListViewAdapter() {

    record.add(new TimeRecord("38:23", "Feeling good!"));
    record.add(new TimeRecord("49:01", "Tired. Needed more caffeine"));
    record.add(new TimeRecord("26:21", "I’m rocking it!"));
    record.add(new TimeRecord("29:42",
            "Lost some time on the hills, but pretty good."));

}

@Override
public int getCount() {

    // TODO Auto-generated method stub
    return record.size();
}

@Override
public Object getItem(int position) {

    // TODO Auto-generated method stub
    return getItem(position);
}

@Override
public long getItemId(int position) {

    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position , View convertView , ViewGroup parent) {

    // TODO Auto-generated method stub

    if (convertView == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        convertView  = inflater.inflate(R.layout.row_xml, parent, false);
    }
    TimeRecord time = record.get(position);

    txtTime = (TextView) convertView.findViewById(R.id.txtTime);
    txtTime.setText(time.getTime());

    txtNote = (TextView) convertView.findViewById(R.id.txtNote);
    txtNote.setText(time.getNote());

    return convertView;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:39:27.870

将三个数组合并为一个数组并像以前一样填充它

# jira - Jira 启动因卸载插件而失败

> ID：10447203
> 
> 赞同：1
> 
> 时间：2012-05-04T10:37:41.490
> 
> 标签：jira, jira-plugin

我正在使用 SDK 3.10 部署 Jira 报告插件并遇到以下问题：

JIRA 需要以下插件，但尚未启动：

```
Gadget Directory Plugin (com.atlassian.gadgets.directory)
Atlassian JIRA - Plugins - Project Config Plugin (com.atlassian.jira.jira-project-    config-plugin)
Atlassian OAuth Admin Plugin (com.atlassian.oauth.admin)
Embedded Gadgets Plugin (com.atlassian.gadgets.embedded)
Atlassian JIRA - Plugins - Shared Application Access Layer (SAL) Plugin(com.atlassian.sal.jira)
Gadget Dashboard Plugin (com.atlassian.gadgets.dashboard)
Atlassian JIRA - Plugins - Look And Feel Logo Upload Plugin (com.atlassian.jira.lookandfeel)
Atlassian JIRA - Plugins - Gadgets Plugin (com.atlassian.jira.gadgets)
Atlassian REST - Module Types (com.atlassian.plugins.rest.atlassian-rest-module)
FishEye Plugin (com.atlassian.jirafisheyeplugin)
Gadget Spec Publisher Plugin (com.atlassian.gadgets.publisher)
Atlassian JIRA - Plugins - REST Plugin (com.atlassian.jira.rest)
Atlassian OAuth Service Provider Plugin (com.atlassian.oauth.serviceprovider)
Opensocial Plugin (com.atlassian.gadgets.opensocial) 
```

备注：我的笔记本电脑上没有安装 Jira。那是问题吗？另外，我正在使用 Java SE 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:46:03.873

我认为您必须提供更多信息，例如 pom.xml 基础 pom 和依赖项，也许还有一些日志。JIRA SDK 生成编译日志文件，您可以将其包含在内。另一件事，您可以跳过线束测试。尝试使用以下方式构建插件：

mvn clean package -Patlassian -Dmaven.test.skip=true

# android - Android on click listener 传递 json 变量

> ID：10447207
> 
> 赞同：0
> 
> 时间：2012-05-04T10:37:55.640
> 
> 标签：android, events, click, listener

我有一个 ListView 并且我想要它，这样，当您单击列表中的一个项目时，它会将您带到另一个活动，但带有我单击的变量。

例如，如果我有 item1、item2、item3 我想要它，这样，当我单击 item1 时，它会将我带到另一个活动，并且在该其他活动中，json 提要中 item1 内的所有内容都会显示出来。

到目前为止，这是我的代码：

```
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ChooseTeamActivity extends ListActivity {
    public String FullData = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    setContentView(R.layout.chooseact);
    final String FullData = getIntent().getStringExtra("FullData");
    Log.v("lc", "chooseActivity:" + FullData);
    try{

   JSONObject obj = new JSONObject(FullData);
   List<String> leagues = new ArrayList<String>();

   JSONObject objData = obj.getJSONObject("data");

   JSONArray jArray = objData.getJSONArray("structure");

   for (int i=0; i < jArray.length(); i++)
   {     JSONObject oneObject = jArray.getJSONObject(i);   

    JSONArray DivisionsArray = oneObject.getJSONArray("divisions");

    for (int d=0; d < DivisionsArray.length(); d++){

        JSONObject DivDict = DivisionsArray.getJSONObject(d);   
        leagues.add(DivDict.getString("name"));
    }

   }
   setListAdapter ( new ArrayAdapter<String>(this, R.layout.single_item, leagues));

   ListView list = getListView();

    list.setTextFilterEnabled(true);

    list.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            //Toast.makeText(getApplicationContext(), ((TextView) arg1).getText(),1000).show();
            Intent nextScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
            nextScreen.putExtra("FullData", FullData);
            startActivity(nextScreen);
        }
        });

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:49:08.023

保留一个对 DivisionArray 的字段引用，然后重写 onListItemClicked 以获取单击项的索引，然后在 DivisionArray 中查找该项：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    // TODO: Add code here to look up the item in DivisionArray by index, then use
    // that to launch an activity either with the index or the JSON structure as an extra
} 
```

获得索引后，您可以使用索引或 JSON 结构启动活动：

```
 Intent intent = new Intent(this, MyActivity.class);
    intent.putExtra("selectedItem", /* TODO: use the index to the item or the JSON structure itself here */);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:49:36.680

覆盖点击事件处理程序：

```
@Override
protected void onListItemClick (ListView l, View v, int position, long id) { 

} 
```

并在那里添加代码以使用参数触发您的活动（例如，您的 json 内容，或获取它的方法）

```
Intent intent = new Intent(this, DetailedActivity.class);
//leagues.get(position);
//or just use the position:
foo.putExtra("itemIndex", position);
//foo.putExtra("fullData", FullData); //or just the part you want
startActivity(foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T10:50:41.017

您可以使用该`setOnItemClickListener()`方法并使用意图来传递要在列表中显示的数据的字符串，如下所示

```
list.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) {
                          Bundle b = new Bundle();
                          b.putString("itemData",data[poition]);
                          Intent intent = new Intent(Activity1.this,Activity2.class);
                          intent.putExtras(b);
                          startActivity(intent);
            }
        }); 
```

这里的 data[] 是一个字符串数组，其中包含要从 Activity1 传递到 Activity2 的数据。活动 1 是当前活动，您也可以修复活动 2，只需使用不同的数据填充它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:08:11.023

**使用此代码。**

```
 yourListView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> arg0, View arg1, final int position, long arg3) 
        {

            Intent intent = new Intent(YourActivity.this, NotesActivity.class);
            intent.putExtra("Date", "Item To Pass In Ur Activity");
            startActivity(intent);
        }
    }); 
```

**在您的活动上编写以下代码以获取列表视图传递的项目**

```
String selectedDate = getIntent().getStringExtra("Date"); 
```

# javascript - 根据元素高度分割段落的最有效方法

> ID：10447210
> 
> 赞同：0
> 
> 时间：2012-05-04T10:38:03.050
> 
> 标签：javascript, jquery, html

将很长的 HTML 段落元素动态拆分为给定高度的较小段落的最有效方法是什么？

下面的函数（jQuery）递归地从文本中一次删除一个单词，检查新的长度，并在文本被分解成可接受的小块时停止。

```
function split_par(element, max_height)
{
  if (element.height() <= max_height)
    return;
  var array = element.text().split(" ");
  var pos = 0;
  while (element.height () > max_height)
  {
    pos -= 1;
    element.html("<p>" + array.slice(0,pos).join(" ") + "</p>");
  }
  var next_par = element.clone();
  next_par.html("<p>" + array.slice(pos).join(" ") + "</p>");
  $('body').append(next_par);
  split_par(next_par, max_height);
} 
```

这是低效的并且需要很长时间，但这是我找到的最可靠的方法。我确信有更好的方法。我也不熟悉 Javascript 或 jQuery，所以任何关于代码的一般提示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:44:21.507

也许将文本放置在容器元素（例如 div）中并使用[Jquery Masonry](http://masonry.desandro.com/)之类的东西就可以了。

# java - 是什么导致“二元运算符'=='的操作数类型错误”与第二种类型 ?

> ID：10447212
> 
> 赞同：5
> 
> 时间：2012-05-04T10:38:10.927
> 
> 标签：java, netbeans

当我检查 StoredCredential 的实例是否为空时

```
if(storedCredential != null){
  //do something
} 
```

Netbeans 7.1 显示以下警告：

```
bad operand types for binary operator '=='
  first type:  com.blah.dbcore.mypublic.beans.StoredCredential
  second type: <nulltype> 
```

它编译正确并且没有抛出 RuntimeExceptions，但 Netbeans 仍然显示警告。使用“！=”检查实例是否不为空，会给出相同的错误。

下面的代码做同样的事情，但不太清楚：

```
if (!(storedCredential instanceof StoredCredential)) {
  //do something
} 
```

Netbeans 对这个表达式没有任何问题。

因为它编译没有问题，所以我假设我将包含该类的 .jar 添加到库中的方式有​​问题。这是我在这个 jar 中遇到的唯一问题，这个 .jar 中没有其他类给我这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T14:58:25.983

我也遇到过这个问题。此外，在我尝试将问题类的实例传递给接受 Object 作为参数的方法时，出现以下错误：

```
required: String,Object
found: String,SomeClass
reason: actual argument SomeClass cannot be converted to Object by method invocation conversion 
```

结果编译器无法确定我的类的正确类型。

我的课程（我们称之为 com.blah.lib.SomeClass）在一个 NB 项目（我们称之为项目 1）中，并在第 3 方 jar 中扩展了一个类，这是项目 1 的库。

另一个NB项目（我们称之为Project 2）依赖于Project 1并使用了com.blah.lib.SomeClass，但它的libs中没有第3方jar，所以在编译Project 2时，编译器无法确定完整的com.blah.lib.SomeClass 的继承。

所以解决方案是将第 3 方 jar 也添加到 Project 2 的库中。

我知道这已经有好几年了，但我想我会发布这个答案，以防它帮助其他人在未来谷歌搜索这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:57:31.723

Netbeans 告诉您，在程序中的那个时候，`storedCredential`不可能为空。这可能意味着您已经`storedCredential`在该方法的前面调用了一个方法或访问了一个数据成员。

# mysql - 在没有会话/连接到数据库的情况下使用 Hibernate 生成（批量）SQL 查询的线索

> ID：10447213
> 
> 赞同：1
> 
> 时间：2012-05-04T10:38:11.560
> 
> 标签：mysql, hibernate, bulkinsert

我有一个特定的情况，我想知道 hibernate 如何使用它的模式元数据来生成 HQL 或者如果需要的话。

因此，我遇到了需要将对象图更新到 DB 的情况，交易是只有具有非空（或非默认）值的字段需要更新。这是我的用例：我们有一个批量编辑功能，它允许我们的后端支持团队能够为特定产品更新大约 25-30 个字段。因此，他们提供产品 ID，并且需要更新该列的值。

然而，在这种情况下使用休眠是有其代价的，我们从数据库中提取整个大对象图，然后更新特定字段并执行 Session.merge。作为没有。编辑数量正在增加，这增加了 CPU 使用率，现在我们必须重新设计它，使其负载增加 5 倍。

所以我们想转向生成 sql 查询，然后运行批量更新（即使这意味着直接在 SQL 中运行它们）。但是我想知道，hibernate 已经巧妙地使用元数据来生成查询。如果我只能使用某种拦截器，它只允许包含非空值的字段用于查询生成。

所以这是一个大而模糊的问题：hibernate 如何生成查询。是否有一个好的起点，或者有人知道以前是否曾尝试过类似的事情。

这个问题可能看起来像将 CSV 批量上传到 MySQL，但事实并非如此。批量上传/编辑主要是编辑同一张表的记录，在这种情况下，字段属于10个不同的表，因此需要推断相关的连接。我只是想使用休眠来避免脏的 IF-ELSE stmt 生成 SQL 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:31:31.840

我已经从不同的 Schema 完成了数据迁移，200 万条记录的加载、转换/合并与现有记录大约需要 30 分钟，保存在我的开发机器上。所以也许还有改进的余地

可以加速的事情

*   分批工作并`session.clear()`在每个之后使用以摆脱以前缓存的数据（否则随着时间的推移刷新会变得更加昂贵）
*   加载对象图时使用预取路径
*   将经常需要的数据（XYZType）缓存在内存和 session.attach 之后`clear()`
*   使用时间最多的个人资料
*   不确定它是否适用于休眠，但 NHibernate 有反射优化器：使用 sessionfactories 类元数据而不是反射来设置属性
*   启用更新语句的批处理

# iphone - 将字节转换为 UIImage

> ID：10447218
> 
> 赞同：0
> 
> 时间：2012-05-04T10:38:24.207
> 
> 标签：iphone, objective-c, xcode, nsmutablearray, mfmailcomposeviewcontroller

当我将我的 NSMutableArray 转换为 NSdata 时，我以字节为单位获得 NSMutableArray 数据。现在我想把它转换成 UIImage，因为我想通过电子邮件发送我的数组数据，但是我在 UIImage 中得到了 null。

这是我的代码。

```
 NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewArray];
      UIImage *image = [UIImage imageWithData:data];
      [controller addAttachmentData:image mimeType:@"image/png"
             fileName:@"labelData"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:19:50.427

要将图像转换为字符串，您需要一种将 NSData 转换为 base64Encoded 字符串并返回的方法（大量示例[http://cocoadev.com/wiki/BaseSixtyFour](http://cocoadev.com/wiki/BaseSixtyFour)）。最容易使用的是 NSData 上的类别，因此您可以执行以下操作：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:viewArray];
NSString* pictureDataString = [self base64EncodingWithLineLength:data];
UIImage* image = [UIImage imageWithData:[NSData 
        dataFromBase64EncodedString: pictureDataString]];
[controller addAttachmentData:image mimeType:@"image/png"
         fileName:@"labelData"];

- (NSString *) base64EncodingWithLineLength:(NSData*) data {

const unsigned char* bytesArr=[data bytes];
unsigned int lineLength=0;
NSMutableString *result = [NSMutableString stringWithCapacity:[data length]];
unsigned long ixtext = 0;
unsigned long lentext = [data length];
long ctremaining = 0;
unsigned char inbuf[3], outbuf[4];
unsigned short i = 0;
unsigned short charsonline = 0, ctcopy = 0;
unsigned long ix = 0;

while( YES ) {
    ctremaining = lentext - ixtext;
    if( ctremaining <= 0 ) break;

    for( i = 0; i < 3; i++ ) {
        ix = ixtext + i;
        if( ix < lentext ) inbuf[i] = bytesArr[ix];
        else inbuf [i] = 0;
    }

    outbuf [0] = (inbuf [0] & 0xFC) >> 2;
    outbuf [1] = ((inbuf [0] & 0x03) << 4) | ((inbuf [1] & 0xF0) >> 4);
    outbuf [2] = ((inbuf [1] & 0x0F) << 2) | ((inbuf [2] & 0xC0) >> 6);
    outbuf [3] = inbuf [2] & 0x3F;
    ctcopy = 4;

    switch( ctremaining ) {
        case 1:
            ctcopy = 2;
            break;
        case 2:
            ctcopy = 3;
            break;
    }

    for( i = 0; i < ctcopy; i++ )
        [result appendFormat:@"%c", encodingTable[outbuf[i]]];

    for( i = ctcopy; i < 4; i++ )
        [result appendString:@"="];

    ixtext += 3;
    charsonline += 4;

    if( lineLength > 0 ) {
        if( charsonline >= lineLength ) {
            charsonline = 0;
            [result appendString:@"\n"];
        }
    }
}

return [NSString stringWithString:result];
}

static char encodingTable[64] = {
'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P',
'Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f',
'g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v',
'w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/' }; 
```

试试这个方法可能会对你有所帮助。

# android - BOOT_COMPLETED 的 BroadcastReceiver 未从 sleep() 返回

> ID：10447223
> 
> 赞同：2
> 
> 时间：2012-05-04T10:38:56.540
> 
> 标签：android, broadcastreceiver, sleep, delay, bootcompleted

我有一个对 BOOT_COMPLETED 做出反应的 BroadcastReceiver。反过来它会发出一个意图，但是这个意图应该延迟一段时间。出于某种原因，如果 sleep() 调用的参数大于大约。6000 毫秒，睡眠永远不会返回（我从未在下面的代码中看到“睡眠完成！”消息）。也没有抛出异常。低于 6000 毫秒一切正常！

任何想法如何解决这个问题都会很棒！

```
public class BootReceiver extends BroadcastReceiver
{   
    @Override
    public void onReceive( final Context context, final Intent intent)
    {                  
        Thread thr = new Thread ()
        {
            @Override
            public void run()
            {
                Log.e ( "Test", "Going to sleep!" );

                try {
                   sleep(8000);
                } catch (InterruptedException e) { e.printStackTrace(); }

                Log.e ("Test","Sleep done!");
            }
        };
        thr.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:54:35.017

> 我有一个对 BOOT_COMPLETED 做出反应的 BroadcastReceiver。反过来它会发出一个意图，但是这个意图应该延迟一段时间。

然后，您应该使用`AlarmManager`to `set()`a`PendingIntent`在您指定的延迟后关闭。

> 出于某种原因，如果 sleep() 调用的参数大于大约。6000 毫秒，睡眠永远不会返回（我从未在下面的代码中看到“睡眠完成！”消息）。

您有`BroadcastReceiver`相当于“应用程序无响应”(ANR) 的情况，因为您将主应用程序线程占用了太长时间。

> 也没有抛出异常。

是的，但是 LogCat 中有一个警告——至少，曾经有过。

# php - 计算 PHP 中缺少的函数参数

> ID：10447236
> 
> 赞同：0
> 
> 时间：2012-05-04T10:39:28.913
> 
> 标签：php

是否可以计算 PHP 函数中缺少的参数？我想做这个：

```
// I have this
function foo($param1, $param2, $param3) {
    // I need some sort of argument counter
}

foo("hello", "world"); 
```

当我使用上面的 foo 函数时，我想要一种方法来找出并非所有参数都被使用。

通过计算所有参数并与 get_defined_vars() 进行比较，或者使用一个函数来计算缺失参数的数量。

编辑：如果打开 error_reporting 时缺少某些参数，我需要停止运行的方法。

```
if(!foo($param)) { echo "Couldn't Foo!"; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:41:09.777

采用[`func_num_args()`](http://www.php.net/manual/en/function.func-num-args.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:46:29.990

如果您想以超动态方式执行此操作，请使用反射来获取预期的参数计数并将该数字与 func_num_args() 返回的值进行比较：

```
function foo($p1 = null, $p2 = null, $p3 = null) {
    $refl = new ReflectionFunction(__FUNCTION__);

    $actualNumArgs = func_num_args();
    $expectedNumArgs = $refl->getNumberOfParameters();

    $numMissingArgs = $expectedNumArgs - $actualNumArgs;

    // ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:24:38.223

调用参数不足的函数将引发错误。如果您需要允许调用具有较少参数的函数，则需要在函数声明中使用默认值定义它们并测试默认值以查看哪些已被省略。

像这样的东西（**再次改进**）：

```
function foo () {

  // Names of possible function arguments
  // This replaces the list of arguments in the function definition parenthesis
  $argList = array('param1', 'param2', 'param3');

  // Actual function arguments
  $args = func_get_args();

  // The number of omitted arguments
  $omittedArgs = 0;

  // Loop the list of expected arguments
  for ($i = 0; isset($argList[$i]); $i++) {
    if (!isset($args[$i])) { // The argument was omitted - this also allows you to skip arguments with NULL since NULL is not counted as set
      // increment the counter and create a NULL variable in the local scope
      $omittedArgs++;
      ${$argList[$i]} = NULL;
    } else {
      // The argument was passed, create a variable in the local scope
      ${$argList[$i]} = $args[$i];
    }
  }

  // Function code goes here
  var_dump($omittedArgs);

} 
```

这对于可能维护代码的其他人来说有点违反直觉 - 参数列表现在维护为字符串数组而不是函数参数列表，但除此之外它是完全动态的并且可以实现您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T10:42:07.907

根据您的需要，最简单的解决方案可能是默认参数：

```
function foo($param1 = null, $param2 = null, $param3 = null) {
  if ($param3 !== null) {
    // 3 params are specified
  } else if ($param2 !== null) {
    // 2 params are specified
  } else if ($param1 !== null) {
    // 1 param is specified
  } else {
    // no param is specified
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T10:42:31.257

您可以使用内置的 php 函数：

参数数组：http: [//php.net/manual/en/function.func-get-args.php](http://php.net/manual/en/function.func-get-args.php)

参数数量：http: [//php.net/manual/en/function.func-num-args.php](http://php.net/manual/en/function.func-num-args.php)

从数组 [http://php.net/manual/en/function.func-get-arg.php获取参数](http://php.net/manual/en/function.func-get-arg.php)

# android - 如何更改 ListView 中所选项目的背景颜色？

> ID：10447238
> 
> 赞同：3
> 
> 时间：2012-05-04T10:39:36.433
> 
> 标签：android, android-listview

我见过许多类似的问题，每个答案都非常针对问题，没有直接的答案，或者我找到了展示如何创建选中项目的复选框的教程。而且我无法从这些代码中理解如何做到这一点。

我正在关注在[此处](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)找到的教程，这就是我的代码看起来只是不同名称的方式。

我想要一个多重选择ListView，当一个项目被选中时，背景颜色会改变以标记我选择的项目。

也许我可以使用自定义选择器来完成这个？我了解常见的方法是保存选定的位置并在 getView 函数中执行某些操作。我看到人们创建 ViewHolder，但我并不真正理解它与任何东西有什么关系。有人可以帮帮我吗？

提前致谢， 埃里克

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T12:37:14.293

好吧，我终于解决了，希望这对某人有所帮助：

我所做的是创建一个`ArrayList<Integer>`存储所选项目的所有位置，并在点击时切换背景颜色。

在我的适配器中，我定义：

```
public ArrayList<Integer> selectedIds = new ArrayList<Integer>(); 
```

使用以下方法：

```
 public void toggleSelected(Integer position)
{
    if(selectedIds.contains(position))
    {
        selectedIds.remove(position);

    }
    else
    {
        selectedIds.add(position);
    }
} 
```

从 ArrayList 中添加\删除项目

在我的 getView 方法中：

```
 if (selectedIds.contains(position)) {
            convertView.setSelected(true);
            convertView.setPressed(true);
            convertView.setBackgroundColor(Color.parseColor("#FF9912"));
        }
        else
        {
            convertView.setSelected(false);
            convertView.setPressed(false);
            convertView.setBackgroundColor(Color.parseColor("#000000"));
        } 
```

这将检查位置是否存储在 ArrayList 中。如果是这样，请将其绘制为选定的。如果不是，则相反。

剩下的就是 OnItemClick 监听器，我补充说：

```
 ((YourAdapter)list.getAdapter()).toggleSelected(new Integer(position)); 
```

当 YourAdapter 是您的 ListView 的适配器时

希望这对任何人都有帮助，因为这是一个通用的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T19:24:49.567

您还可以将以下选择器设置为列表项布局的背景：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@color/android:transparent" />
    <item android:drawable="@drawable/listitem_normal" />
</selector> 
```

来源：[通过自定义选择器的 ListView 项目背景](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-23T20:43:37.583

有一个普通的 XML 解决方案。下面的语法是 WRT API 15。我使用了以下列表项模板：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/item_selection">
    <ImageView />
    <.. />
</LinearLayout> 
```

它指向 res/drawable-hdpi 中的文件 item_selection.xml（在 Android Studio 0.8.14 中）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@android:color/holo_blue_dark" android:state_selected="true" />
</selector> 
```

# c# - 使用 SQLCommand - 它会处理传递给字符串的项目吗？

> ID：10447246
> 
> 赞同：0
> 
> 时间：2012-05-04T10:39:55.860
> 
> 标签：c#, dispose, sqlcommand

我正在使用“使用”命令为我处理/关闭连接进行一些 SQL 连接。如果我从 using 命令中将项目传递给字符串，它们会在连接关闭/处理后保留吗？

如果是这样，那么确保项目保留在字符串中而不是被丢弃以便我以后可以使用它们的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:46:04.597

如果我理解正确，您的意思是作为命令参数传递的对象？据我所知，当命令被释放时，它们并没有被释放。确保正确处置它们的最简单方法是手动访问`SqlCommand.Parameters`.

例如，您可以使用以下代码。

```
if (command.Parameters != null)
{
    foreach (object parameter in command.Parameters)
    {
        IDisposable disposableParameter = parameter as IDisposable;
        if (disposableParameter != null)
        {
            disposableParameter.Dispose();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:47:39.800

我认为你搞砸了几个概念。当您构建 SQL 查询时，您有 2 个选项，使用字符串构建它，例如：

```
"Select from " + TableName + " where " + ColumnName + "=" + ColumnValue ... 
```

**很坏！**永远不要这样做，您必须使用参数，例如：

```
"Select from " + "TableName + " where " + ColumnName + "=@Value" 
```

[在使用SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)注入感兴趣的值之后。

**在这两种情况下，实际值的生命周期都与 SQL 字符串无关**。值生命周期取决于您如何使用保存该值的变量。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:13:35.193

字符串总是按值传递。所以，如果我正确理解你的问题，你的字符串应该保持不变。using 语句只会处理命令。

# .htaccess - kohana .htaccess 中的 AllowOverride ALL 是什么意思？

> ID：10447253
> 
> 赞同：1
> 
> 时间：2012-05-04T10:40:29.397
> 
> 标签：.htaccess, kohana

我刚刚从这里 (http://kohanaframework.org/download) 安装了 kohana v3.1.4 "fasciinucha" STABLE 并且对 .htaccess 有疑问。如果我按照建议将 example.htaccess 更改为 .htaccess，则会收到此错误“Internal Server Error”。所以我通过更改来解决此问题

文件/etc/apache2/sites-enabled/000-default 部分中的“AllowOverride AuthConfig”到“AllowOverride All”。

任何人都可以解释以下内容吗？

1.  “ALL”指的是什么？这可能是安全风险吗？谁是“全部”？

2.  在我的 Kohana .htaccess 文件中，我可以将 RewriteBase 路径更改为 / 或 /kohana/ 它没有任何区别？..这是为什么？

谢谢你的帮助，

你的，

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:01:19.730

1.  由于[Apache 2.0 文档](http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride)AllowOverride 选项的上下文是目录。不知道为什么这个选项出现在 .htaccess 文件中。无论如何，AllowOverride 选项告诉 Apache`.htaccess`文件中声明的哪些指令可以覆盖早期的配置指令。`All`- .htaccess 文件中允许任何具有 .htaccess 上下文的指令。`AuthConfig`允许使用授权指令。

2.  因为站点 BASE 的设置是通过Kohana中`/application/bootstrap.php`的配置选项进行的。`base_url` `Kohana::init()`

# scala - Stream-cons #:: 如何在 Scala 中翻译？

> ID：10447262
> 
> 赞同：7
> 
> 时间：2012-05-04T10:41:03.550
> 
> 标签：scala

我目前正在通过“Scala 编程”一书学习 Scala。到目前为止，对于看起来很奇怪的所有事情都有很好的解释（从 Java 程序员的角度来看），但是这个使用 Stream 生成斐波那契数列的例子让我有点困惑：

```
def fibFrom(a: Int, b: Int): Stream[Int] =
  a #:: fibFrom(b, a + b) 
```

Stream的构建是如何完成的？当然，`#::`运营商对此负有某种责任。我知道，因为它以 结尾`:`，所以它是右关联的，但这并不能解释 Stream 的创建。我猜它以某种方式隐式转换为构造函数，但我不明白为什么以及如何准确。

我已经在寻找答案`Predef.scala`，`LowPriorityImplicits.scala`但到目前为止还没有运气。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T10:49:47.683

它是正确关联的，因此它可以作为正确参数的方法：

```
fibFrom(b, a + b).#::(a) 
```

至少这是它试图在语法上做的事情。`Stream[Int]`没有这样的方法。幸运的是，对某些具有此方法（[代码](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/Stream.scala#L1022)）`object Stream`的类具有隐式含义。`ConsWrapper`

所以，在隐式解析之后你得到的是：

```
immutable.this.Stream.consWrapper(fibFrom(b, a + b)).#::(a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:54:30.220

流类似于列表。它只知道它的头部和流的其余部分：Stream(head: T, tail: Stream[T])。不同之处在于，一个 Stream 是懒惰地评估的。方法名称末尾的“：”表示该方法是右关联的。所以表达式 a #:: fibFrom(b, a + b) 被（由编译器）翻译成 fibFrom(b, a + b).#::(a)。

# java - 如何在服务器端调用具有多部分请求的 URL，而不是文件，而是包含文件内容的字符串

> ID：10447266
> 
> 赞同：4
> 
> 时间：2012-05-04T10:41:21.090
> 
> 标签：java, groovy

我的 servlet 中有一个 xml 文件内容作为字符串，我需要使用多部分发布请求调用另一个 URL 以将其上传为 xml 文件。

有没有办法可以做到？

到目前为止，这就是我正在做的

```
private def createConfiguration(def sessiontoken)
{
    /*reqParams is request.getParameterMap(), fileParams is again a map*/
    def charset = "UTF-8";
    def query = String.format("emailaddress=%s&projectid=%s&cfgname=%s&cfgdesc=%s&cfgfile=%s",
        URLEncoder.encode(sessiontoken, charset),
        URLEncoder.encode(reqParams.c_Cfgname[0], charset),
        URLEncoder.encode(reqParams.c_Cfgdesc[0], charset),
        URLEncoder.encode(reqParams.c_Cfgtype[0], charset),
        URLEncoder.encode(reqParams.CFGFILE[0], charset),)

    URLConnection connection = new URL(fileParams.login).openConnection()
    connection.setDoOutput(true)
    connection.setRequestProperty("Accept-Charset", charset)
    connection.setRequestProperty("Content-Type", "multipart/form-data;charset=" + charset)
    try {
        connection.getOutputStream().write(query.getBytes(charset))
    }
    finally {
        connection.getOutputStream().close()
    }
    InputStream response = connection.getInputStream()
    def xmlString=response.getText()
    xmlString
} 
```

~~下面是获取的异常~~

~~严重：Servlet RedirectRequest 的 Servlet.service() 引发异常 java.io.IOException：服务器返回 HTTP 响应代码：URL 为 800：`http://abhishek157:10070/project/create.action` 在 sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at sun.net .www.protocol.http.HttpURLConnection$getInputStream.call(Unknown Source) 。.~~

**更新**

[BalusC](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)得到了这个非常有用的链接，所以我使用了它。

```
private def getStreamFromString(str)
{
    // convert String into InputStream
    InputStream is = new ByteArrayInputStream(str.getBytes())
    is
}

private def createConfiguration(def sessiontoken)
{

    println "ok good $sessiontoken"
    def charset = "UTF-8"
    def boundary = Long.toHexString(System.currentTimeMillis())
    def CRLF = "\r\n"
    String param = "value"

    URLConnection connection = new URL(fileParams.create).openConnection()
    println fileParams.create
    connection.setDoOutput(true)
    connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
    PrintWriter writer = null
    try {

        OutputStream output = connection.getOutputStream()
        writer = new PrintWriter(new OutputStreamWriter(output, charset), true)

        // Sending normal param.
        writer.append("--" + boundary).append(CRLF)
        writer.append("Content-Disposition: form-data; name=\"sessiontoken\"$CRLF$CRLF$sessiontoken").append(CRLF)
        //writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF)
        writer.append(CRLF)
        writer.append(param).append(CRLF).flush()

        writer.append("--" + boundary).append(CRLF)
        writer.append("Content-Disposition: form-data; name=\"cfgname\"$CRLF$CRLF${reqParams.c_Cfgname[0]}").append(CRLF)
        //writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF)
        writer.append(CRLF)
        writer.append(param).append(CRLF).flush()

        writer.append("--" + boundary).append(CRLF)
        writer.append("Content-Disposition: form-data; name=\"cfgdesc\"$CRLF$CRLF${reqParams.c_Cfgdesc[0]}").append(CRLF)
        //writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF)
        writer.append(CRLF)
        writer.append(param).append(CRLF).flush()

        writer.append("--" + boundary).append(CRLF)
        writer.append("Content-Disposition: form-data; name=\"cfgenv\"$CRLF$CRLF${reqParams.c_Cfgtype[0]}").append(CRLF)
        //writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF)
        writer.append(CRLF)
        writer.append(param).append(CRLF).flush()

        // Sending xml file.
        writer.append("--" + boundary).append(CRLF)
        writer.append("Content-Disposition: form-data; name=\"cfgfile\"; filename=\"" + reqParams.FILENAME[0] + "\"").append(CRLF)
        writer.append("Content-Type: text/xml; charset=" + charset).append(CRLF)
        writer.append(CRLF).flush()
        BufferedReader reader = null
        try {
            reader = new BufferedReader(new InputStreamReader(getStreamFromString(reqParams.CFGFILE[0]), charset))
            for (String line; (line = reader.readLine()) != null;) {
                writer.append(line).append(CRLF)
            }
        }
        catch(Exception e)  {
            e.printStackTrace()
        }
        finally {
            if (reader != null) try { reader.close(); } catch (IOException logOrIgnore) {}
        }
        writer.flush();
        writer.append("--" + boundary + "--").append(CRLF)
    } 
    finally {
        if (writer != null) writer.close();
    }
    InputStream response = connection.getInputStream()
    def xmlString=response.getText()
    xmlString
} 
```

~~在控制台上我得到~~

~~[http://abhishek157:10070/project/create.action](http://abhishek157:10070/project/create.action)
完成~~

~~但它根本没有击中`http://abhishek157:10070/project/create.action`~~
有什么帮助吗？

**更多更新**

真正的请求（从 html 表单工作，我从网络浏览器中选择文件）

```
-----------------------------7dcf4d30e8a
Content-Disposition: form-data; name="sessiontoken"

4611685684744086913
-----------------------------7dcf4d30e8a
Content-Disposition: form-data; name="cfgname"

sadf
-----------------------------7dcf4d30e8a
Content-Disposition: form-data; name="cfgdesc"

sadf
-----------------------------7dcf4d30e8a
Content-Disposition: form-data; name="cfgenv"

Production
-----------------------------7dcf4d30e8a
Content-Disposition: form-data; name="cfgfile"; filename="C:\Simon\xmls\agentind.xml"
Content-Type: text/xml

<?xml version="1.0" encoding="UTF-8"?> and so on... 
```

与 fiddler 中的实际请求匹配后更新了 params 部分。查看`createConfiguration`功能

获取异常（`create.action`从 servlet 调用时）

**注意**：我在发送参数之前检查了servlet `create.action`，所有都是有效的

```
java.lang.NumberFormatException: null 
```

服务器中没有读取任何参数，所有参数都以`null`. 哪里有问题。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:30:58.493

在您更新的代码中，您忘记调用`connection.getInputStream();`以实际发送 HTTP 请求（并检索 HTTP 响应）。

# windows-7 - 从智能卡中删除生物识别数据

> ID：10447271
> 
> 赞同：1
> 
> 时间：2012-05-04T10:41:39.460
> 
> 标签：windows-7, biometrics

我正在尝试使用 Windows 生物识别框架从智能卡中删除记录的指纹信息。

我可以通过以下步骤删除记录的指纹：

开会

```
WinBioOpenSession 
```

使用指纹读取器登录

```
WinBioLogonIdentifiedUser 
```

读取可用的指纹

```
WinBioEnumEnrollments 
```

去除指纹信息

```
WinBioDeleteTemplate 
```

但这仅在用户可用时才有效！

**有没有办法以卡片管理员的身份删除生物识别信息？**

编辑：我使用的是金雅拓智能卡。

# c - 调用函数以填充它后的空结构

> ID：10447273
> 
> 赞同：1
> 
> 时间：2012-05-04T10:41:49.217
> 
> 标签：c

我有一个结构

```
typedef struct
{
  my ints
  and char's
} structname; 
```

在我的服务器`.c`文件里面`main()`

```
structname Header; 
```

我打电话给`function(Header);`

查看另一个`.c`文件

并用例如填充标题`strcpy(Header.Name1,pch);`

正如我用来`gdb`调试它一样正确填充

```
(gdb) p Header.Name1
$5 = "Bilka\000\332\326\377\177\000\000\001\000\000\000\000\000\000\000\b]\022\"E\177\000\000p\356\332\326\377\177\000\000\034\000\000\000\000\000\000\000\t\000\000\000\000" 
```

在此函数结束并返回后`TRUE`，它会返回到 server.c 上的下一行，但如果我在 Header.Name1 上进行打印，我会得到一个空白标题，这可能是什么原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T10:45:07.557

C 中的函数参数是按值传递的。因此，如果您的函数签名如下所示：

```
foo function(structname Header); 
```

这意味着在调用函数时会*复制*参数。然后，您在函数内修改该临时副本，但这不会更改原始对象。您可能希望将指向您的结构的指针传递给函数：

```
foo function(structname * Header)
{
  //...
  strcpy(Header->Name1, pch);
}

// ...
structname Header;
function(&Header);
printf("%s\n", Header.Name1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:45:53.117

C 函数是按值传递的，因此当您调用 时`function(Header);`，您传递的是结构**的副本**并对其进行修改，您应该将指向该结构的指针传递给另一个函数：

```
function(&Header); 
```

# java - 重定向网络流量

> ID：10447274
> 
> 赞同：0
> 
> 时间：2012-05-04T10:41:50.533
> 
> 标签：java, networking

我正在尝试重定向一些流出的流量，所以当被问到 1.1.1.1:2222 本地机器时转到 2.2.2.2:3333

使用 java 完成此任务的最简单方法是什么？

此致

windows上的hosts文件不是！一个选项

编辑： ip 1.1.1.1:2222 是一个外部 IP（我不拥有的服务器）。因此我无法创建一个简单的套接字服务器来重定向流量。我必须以某种方式更改数据包方向

另请注意，这是我要重定向的**OUTGOING部分。**一个简单的例子是，如果我要求 www.google.dk 我得到 facebook

这必须从java中完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:10:20.930

你不能在 Java 中做这种事情。实际上，您通常根本无法在用户空间应用程序中执行此操作。

如果您使用的是 Linux 平台，您可能会配置`iptables`为拦截指定类型的发往特定 IP 地址/端口的传出数据包，并重写目标 IP 地址。但是，这实际上是系统/网络管理问题，而不是编程问题。

正如您可以想象的那样，如果非特权应用程序可能导致流量重新路由，您可以做各种令人讨厌的事情。您需要 Linux 上的 root 权限才能更改 iptables 配置。

* * *

> 这必须从java中完成。

好吧，除非您询问应用程序*重定向自己的请求*，否则它不能在 Java 中/从 Java 中完成。

（在特殊情况下，您可以通过实现一个自定义套接字工厂来执行此操作，该工厂打开连接到与您的应用程序代码的更高级别所要求的不同的地方。但是，我认为这不是您要问的为了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:48:36.093

我认为它可以很容易地用套接字实现，基本上：

1.  在 1.1.1.1:2222 上打开一个 ServerSocket
2.  打开一个到 2.2.2.2:3333 的套接字
3.  将第一个的输出流重定向到第二个的输入流，反之亦然

你有一个例子[here](http://www.java2s.com/Code/Java/Network-Protocol/RedirectsincomingTCPconnectionstootherhostsports.htm)

# java - drop-and-create-tables 太容易掉线了

> ID：10447275
> 
> 赞同：1
> 
> 时间：2012-05-04T10:41:53.923
> 
> 标签：java, mysql, database-design, jpql, toplink

我刚刚将我的 persistence.xml 从

```
<property name="toplink.ddl-generation" value="drop-and-create-tables"/> 
```

到

```
<property name="toplink.ddl-generation" value="create-tables"/> 
```

正如我所料，现在数据在应用程序运行之间仍然存在。但是，这并不是我期望此设置起作用的方式。不应该只在表丢失或不匹配时创建删除和创建？

我只是想知道这是否是标准的，或者可能表明我没有正确使用 JPA，当设置了 drop-and-create 时，表太容易被核弹了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:49:34.527

是的，我认为你的观察是正确的。至少我有同样的问题。如果您描述的行为有另一种选择，那就太好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:51:31.513

这是预期的行为。

`create-tables`只会尝试创建表，如果表已经存在，则不会删除或替换它，将使用现有表。这不会*检查*表是否与您尝试创建的表匹配 - 仅检查具有给定名称的表是否存在。如果您的方案发生变化，您必须手动（或通过其他机制）删除表，以便下次重新创建它。

`drop-and-create-tables`将首先删除现有表，然后创建新表。请注意，当它们被删除时，这将丢失表中的所有数据。

# ajax - 如何比较发送ajax请求后收到的消息

> ID：10447282
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:42:32.517
> 
> 标签：ajax

我正在使用 Firefox 发送 ajax 请求。完成请求后，我得到了一个变量作为响应。

例如，我收到消息为“true”，我想将其与字符串“true”进行比较，根据经验，条件应该为 true。

但是当我调试源代码时，我看到一些奇怪的字符被添加到响应中作为“\r\n\r\ntrue”。任何解决方案。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:46:38.447

您收到的 AJAX 共鸣正在添加那些不需要的字符。检查您的来源。

# php - 如何实现 XSLT 标记化功能？

> ID：10447292
> 
> 赞同：4
> 
> 时间：2012-05-04T10:43:04.530
> 
> 标签：php, xml, xslt, tokenize

似乎 EXSLT 标记化功能不适用于 PHP XSLTProcessor (XSLT 1.0)。

我试图在纯 XSL 中实现它，但我无法让它工作：

```
<xsl:stylesheet
    version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:func="http://exslt.org/functions"
    xmlns:exsl="http://exslt.org/common"
    xmlns:my="http://mydomain.com/">

    <func:function name="my:tokenize">
        <xsl:param name="string"/>
        <xsl:param name="separator" select="'|'"/>
        <xsl:variable name="item" select="substring-before(concat($string,$separator),$separator)"/>
        <xsl:variable name="remainder" select="substring-after($string,$separator)"/>
        <xsl:variable name="tokens">
            <token><xsl:value-of select="$item"/></token>
            <xsl:if test="$remainder!=''">
                <xsl:copy-of select="my:tokenize($remainder,$separator)"/>
            </xsl:if>
        </xsl:variable>
        <func:result select="exsl:node-set($tokens)"/>
    </func:function>

    <xsl:template match="/">
        <xsl:copy-of select="my:tokenize('a|b|c')"/>
    </xsl:template>

</xsl:stylesheet> 
```

预期结果 ：

```
 <token>a</token><token>b</token><token>c</token> 
```

实际结果 ：

```
 abc 
```

我知道这个问题已经发布了很多次，但我找不到一个简单的解决方案。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T10:56:39.703

引用[http://www.exslt.org/str/functions/tokenize/index.html](http://www.exslt.org/str/functions/tokenize/index.html)

> 以下 XSLT 处理器支持 str:tokenize：
> 
> *   4XSLT，来自 4Suite。（版本 0.12.0a3）
> *   来自 Daniel Veillard 等人的 libxslt。（版本 1.0.19）

由于 PHP 使用 libxslt，这意味着`tokenize`可用，但您必须使用正确的扩展名称空间（您不这样做）：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:str="http://exslt.org/strings"
    extension-element-prefixes="str"
    … 
```

然后你可以使用 tokenize 作为一个函数，例如构建一个带有数字 1-12 的选择框：

```
<select name="months">
    <xsl:for-each select="str:tokenize('1,2,3,4,5,6,7,8,9,10,11,12', ',')">
        <xsl:element name="option">
            <xsl:attribute name="value">
                <xsl:value-of select="."/>
            </xsl:attribute>
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:for-each>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:48:59.307

我可能有点过时，因为我不使用函数，但是我有以下`tokenize`模板，它可以满足您的需求，无需任何特殊扩展：

```
<xsl:template name="tokenize">
  <xsl:param name="string"/>
  <xsl:param name="separator" select="'|'"/>

  <xsl:choose>
    <xsl:when test="contains($string,$separator)">
      <token>
        <xsl:value-of select="substring-before($string,$separator)"/>
      </token>
      <xsl:call-template name="tokenize">
        <xsl:with-param name="string" select="substring-after($string,$separator)"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <token><xsl:value-of select="$string"/></token>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

它按如下方式调用，应该为您提供所需的输出：

```
<xsl:call-template name="tokenize">
  <xsl:with-param name="string" select="'a|b|c'"/>
</xsl:call-template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:18:57.127

**您不必编写自己的实现 - 只需使用现有的[FXSL](http://fxsl.sf.net) `str-split-to-words`模板，它提供了更强大的功能**。

这是一个简短的使用演示`str-split-to-words`：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">

   <xsl:import href="strSplit-to-Words.xsl"/>
   <xsl:output indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
      <xsl:variable name="vwordNodes">
        <xsl:call-template name="str-split-to-words">
          <xsl:with-param name="pStr" select="/"/>
          <xsl:with-param name="pDelimiters" 
                          select="', &#9;&#10;&#13;'"/>
        </xsl:call-template>
      </xsl:variable>

      <xsl:apply-templates select="ext:node-set($vwordNodes)/*"/>
    </xsl:template>

    <xsl:template match="word">
      <xsl:value-of select="concat(position(), ' ', ., '&#10;')"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>out, of
 luck</t> 
```

**产生了想要的结果 - 所有单词及其位置的序列**。

**请注意**，参数中提供的任何最大长度的相邻分隔符字符序列都`pDelimiters`用作分隔符：

```
1 out
2 of
3 luck 
```

# android - 蓝牙-Android ICS Base 构建

> ID：10447293
> 
> 赞同：-3
> 
> 时间：2012-05-04T10:43:04.767
> 
> 标签：android

我为模拟器构建了 android ICS 基础软件。这构建好了。然后，我修改了路径下的c文件：“external\bluetooth\bluez\attrib\gattrip.c”。此位置还有其他 c 文件。我不确定如何在 ICS 基础上构建此文件。

在我为 Emulator 成功构建之前，我使用了如下所示的命令：

source build/envsetup.sh lunch full-eng make –j4

我是否需要为这些文件构建 NDK 构建，如果是，我该怎么做？也请您告诉我如何构建这个 c 文件以及如何检查它是否已成功构建。

问候和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:12:16.703

您可以通过再次构建整个 Android 来编译它们。或者您可以尝试手动交叉编译这些片段。但我会进行全面重建。

转到克隆 git 的目录并运行以下命令：

```
. build/envsetup.sh && lunch full-eng && make –j4 
```

如果您能够为模拟器构建 rom，您应该能够再次构建它。

# ios - 保存CIImage，通过转换成CGImage，会报错

> ID：10447297
> 
> 赞同：0
> 
> 时间：2012-05-04T10:43:29.263
> 
> 标签：ios, uiimage, cgimage

我有一张从 AVFoundation 抓取的图片：

```
[stillImage captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {
    NSLog(@"image capture");

    NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
    UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

然后我通过首先转换为 CIImage 来裁剪此图像：

```
beginImage = [CIImage imageWithCVPixelBuffer:CMSampleBufferGetImageBuffer(imageSampleBuffer) options:[NSDictionary dictionaryWithObjectsAndKeys:[NSNull null], kCIImageColorSpace, nil]];

    //first we crop to a square
    crop = [CIFilter filterWithName:@"CICrop"];
    [crop setValue:[CIVector vectorWithX:0 Y:0 Z:70 W:70] forKey:@"inputRectangle"];
    [crop setValue:beginImage forKey:@"inputImage"];
    croppedColourImage = [crop valueForKey:@"outputImage"]; 
```

然后我尝试将其转换回 CGImage 以便我可以将其保存出来：

```
CGImageRef cropColourImage = [context createCGImage:croppedColourImage fromRect:[croppedColourImage extent]];
    UIImage *cropSaveImage = [UIImage imageWithCGImage:cropColourImage];

    //saving of the images
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

     [library writeImageToSavedPhotosAlbum:[cropSaveImage CGImage] orientation:(ALAssetOrientation)[image imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){
     if (error) {
         NSLog(@"ERROR in image save :%@", error);
     } else
     {
         NSLog(@"SUCCESS in image save");
     }

     }]; 
```

但是，这会引发错误：

> 图像保存错误：错误域=ALAssetsLibraryErrorDomain Code=-3304“无法为保存的照片编码图像。” UserInfo=0x19fbd0 {NSUnderlyingError=0x18efa0 "无法为保存的照片编码图像。", NSLocalizedDescription=无法为保存的照片编码图像。}

我在其他地方读到，如果图像是 0x0 像素，就会发生这种情况，并且从 CIImage 到 CGImage 的转换可能会导致问题。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:59:58.110

我让它工作了！

我所做的是将我的所有代码替换为：

```
NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
UIImage *image = [[UIImage alloc] initWithData:imageData];
NSLog(@"*image size is: %@", NSStringFromCGSize(image.size));

//test creating a new ciimage
CIImage *ciImage = [[CIImage alloc] initWithCGImage:[image CGImage]];
NSLog(@"ciImage extent: %@", NSStringFromCGRect([ciImage extent])); 
```

这给了我一个可用的 CIImage。然后我可以用它来过滤它，然后保存它：

```
CIImage *croppedColourImage = [crop outputImage];

//convert it to a cgimage for saving
CGImageRef cropColourImage = [context createCGImage:croppedColourImage fromRect:[croppedColourImage extent]];

//saving of the images
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library writeImageToSavedPhotosAlbum:cropColourImage metadata:[croppedColourImage properties] completionBlock:^(NSURL *assetURL, NSError *error){
    if (error) {
        NSLog(@"ERROR in image save: %@", error);
    } else
    {
        NSLog(@"SUCCESS in image save");
        CGImageRelease(cropColourImage);
    }
}]; 
```

# java - 如何通过java代码启动RMI Registry？

> ID：10447300
> 
> 赞同：6
> 
> 时间：2012-05-04T10:43:42.900
> 
> 标签：java, client, rmi, rmiregistry

我为客户端和服务器编写了 java 程序。但是，要运行程序，我需要手动启动 rmi 注册表！如何通过java代码（通过服务器）启动RMI注册表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T10:48:06.887

使用`LocateRegistry.createRegistry(port)`. 请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/java/rmi/registry/LocateRegistry.html#createRegistry%28int%29)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-22T06:00:15.397

首先，您需要通过 shell/命令行在 java bin 文件夹中执行“start rmiregistry”（创建 CLASSPATH system var to java class/jar 到项目以在 RMI Register 中注册，RMI Registry 需要知道它们的类）。

在您可以使用 LocateRegistry.getRegistry() 之前。

# antlr - 为自定义脚本编写 antlr 语法

> ID：10447301
> 
> 赞同：1
> 
> 时间：2012-05-04T10:43:55.340
> 
> 标签：antlr, antlr3

我在 antlr 的帮助下从旧的脚本引擎迁移到 PHP。

用 $ 包围的脚本变量。例如：$myvar$。脚本函数调用：$func($func2('bla-bla'),123)

这只是注入到 html 中，没有任何特定字符。例如：

```
<h1>$myvar$</h1> 
```

将显示为

```
<h1>Sergey</h1> 
```

我的语法如下：

```
grammar ScriptParser;

options{
output = AST;
ASTLabelType = CommonTree;
}

tokens{
FUNC_CALL;
VAR;
RAW_OUTPUT;
}

program :   stmt*
;

stmt
:   varAtom
    |
    WHAT PLACE HERE???
    ;

expr
options{
    backtrack=true;
    }
    :   orExpr
;

orExpr  :   andExpr (('or'|'||')^ andExpr)*
;

andExpr :   equalityExpr (('and'|'&&')^ equalityExpr)*
;

equalityExpr
    :   comparisonExpr (('=='|'!='|'<>'|'=')^ comparisonExpr)*
;

comparisonExpr
    :   additiveExpr (('>'|'<'|'<='|'>=')^ additiveExpr)*
;

additiveExpr
    :   multiplicativeExpr (('+'|'-')^ multiplicativeExpr)*
;

multiplicativeExpr
    :   notExpr (('*'|'/')^ notExpr)*
;

notExpr
    :   (op='!'|'not')? negationExpr
;

negationExpr
    :   (op='-')? primary
;

primary :   atom
        |'(' expr ')'
;

atom    :   ID
        | varAtom
        | NUMBER
        | HTML_SYMBOL
        | stringAtom
;

varAtom :   '$'ID'(' exprList ')' ->^(FUNC_CALL ID exprList?)
        | '$'ID'$' ->^(VAR ID)
;

stringAtom
    : DOUBLEQUOT! ( ESC_SEQ | ~('\\'|DOUBLEQUOT) )* DOUBLEQUOT!
        | QUOT! ( ESC_SEQ | ~('\\'|QUOT) )* QUOT!
    ;

exprList:   (expr (',' expr)*)?
;

//Begin Lexer

ID  :   CHAR(LCHAR|DIGIT|CHAR)* 
;
    fragment LCHAR
    :   CHAR|'_'
;
    fragment CHAR
    :   LC|UC
;
fragment LC
    :   'a'..'z'|'а'..'я'
    ;
fragment UC
    :   'A'..'Z'|'А'..'Я'
;

HTML_SYMBOL
    :   '&'LC*';'
    ;

fragment ESC_SEQ
    :   '\\' ('b'|'t'|'n'|'f'|'r'|'\"'|'\''|'\\')
;
QUOT    :   '\''
;
DOUBLEQUOT  :   '"'
;

NUMBER  :   INT | FLOAT
;

fragment INT    :   '0'|('1'..'9' DIGIT*)
;
fragment FLOAT  :   INT('.' DIGIT*)
;

fragment DIGIT
    :   '0'..'9'
; 
```

我应该在 stmt 规则中放置什么以将所有与脚本无关的项目标记为原始输出？

```
 stmt
    :   varAtom
        |
        WHAT PLACE HERE???
        ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:34:33.173

**尝试在所有其他词法分析器规则的末尾**添加以下词法分析器规则：

```
OTHER
 : .
 ; 
```

然后将此词法分析器规则添加到您的`stmt`规则中：

```
stmt
 : varAtom
 | OTHER
 ; 
```

# php - php从右到左反向电子邮件

> ID：10447304
> 
> 赞同：0
> 
> 时间：2012-05-04T10:44:00.540
> 
> 标签：php, string, reverse

我有电子邮件：ue.aporue.lraporue@otlatnom-dratta.nhoj

我希望它像：

john.attard-montalto@europarl.europa.eu

当我使用时，`revWords('ue.aporue.lraporue@otlatnom-dratta.nhoj');`我得到：

eu.europa.europarl@montalto-attard.john

```
function revWords($string) {
    //We need to find word boundries
    $wordChars = 'abcdefghijklmnopqrstuvwxyz';
    $buffer = '';
    $return = '';
    $len = strlen($string);
    $i = 0;
    while ($i < $len) {
        $chr = $string[$i];
        if (($chr & 0xC0) == 0xC0) {
            //UTF8 Characer!
            if (($chr & 0xF0) == 0xF0) {
                //4 Byte Sequence
                $chr .= substr($string, $i + 1, 3);
                $i += 3;
            } elseif (($chr & 0xE0) == 0xE0) {
                //3 Byte Sequence
                $chr .= substr($string, $i + 1, 2);
                $i += 2;
            } else {
                //2 Byte Sequence
                $i++;
                $chr .= $string[$i];
            }
        }
        if (stripos($wordChars, $chr) !== false) {
            $buffer = $chr . $buffer;
        } else {
            $return .= $buffer . $chr;
            $buffer = '';
        }
        $i++;
    }
    return $return . $buffer;
} 
```

有人可以帮我吗谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T10:46:36.947

PHP 有一个内置函数来反转字符串： http: [//php.net/manual/en/function.strrev.php](http://php.net/manual/en/function.strrev.php)

使用有什么问题

```
//strrev ( string $string )

echo strrev('ue.aporue.lraporue@otlatnom-dratta.nhoj');

//Returns john.attard-montalto@europarl.europa.eu 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:46:03.920

为什么不[strrev](http://php.net/strrev)？

```
echo strrev("ue.aporue.lraporue@otlatnom-dratta.nhoj"); 
```

# c# - 如何对单选按钮列表的单选按钮进行验证？

> ID：10447305
> 
> 赞同：0
> 
> 时间：2012-05-04T10:44:01.830
> 
> 标签：c#, asp.net

这里我有gridview，其中包含从数据库中检索到的一些值。我们为每一行放置单选按钮列表，每行包含4个单选按钮。对于特定行，我希望禁用这 4 个单选按钮。为此，我尝试了以下代码......但它不起作用......

```
if (j == 0) {
    dtrelative.Rows.InsertAt(rd3, 0);

    // rBtnList.Items[0].Enabled = false;

    //rBtnList.Items[0].Attributes.Add("Enabled","False");
    ////rBtnList.Items[1].Attributes.Add("Enabled", "False");
    ////rBtnList.Items[2].Attributes.Add("Enabled", "False");
    ////rBtnList.Items[3].Attributes.Add("Enabled", "False"); 

    //rtButton.Attributes.Add("Enabled", "False");                    

    rBtnList.HasAttributes.Equals(rtButton).GetType();
    rtButton.Enabled = false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:50:16.883

尝试使用[GridView.RowDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

例如。

```
protected void GVRowDataBound(object sender, GridViewRowEventArgs e)
 {
       var radioList= (RadioButtonList) e.Row.FindControl("ID");     
 } 
```

# richfaces - 将rich:orderingList 与rich:inplaceInput 结合

> ID：10447307
> 
> 赞同：1
> 
> 时间：2012-05-04T10:44:15.527
> 
> 标签：richfaces

我想要一个可以移动/排序并同时可编辑的条目列表。所以我很难以这种方式将rich:orderingList 与rich:inplaceInput 结合起来：

```
<rich:orderingList value="#{detailModel.afterObject.metadata.getTitlesAsList()}"
                            var="title" itemLabel="#{title.value}" itemValue="#{title.position}" listWidth="300px">
    <rich:panel style="width:300px;">
        <rich:inplaceInput value="#{title.value}"/>
    </rich:panel>
</rich:orderingList> 
```

我得到了可以订购的列表，但条目不可编辑。

我错过了什么还是不可能这样做？

也许结合其他组件？

# javascript - 通过弹出在父窗口中填充选择框

> ID：10447309
> 
> 赞同：1
> 
> 时间：2012-05-04T10:44:24.483
> 
> 标签：javascript

我有一个弹出窗口，它填充了在父窗口中找到的选择列表。

这是我用于从弹出窗口中填充选择列表的 javascript 代码：

```
function add_2_list(element) {
    var destinationList =window.opener.document.getElementById('selectlist_id');
    var select_index = destinationList.length;
    destinationList.options[select_index] = new Option(element, element, true) 
} 
```

此代码在 mozilla firefox 上运行良好，但似乎不适用于 Internet Explorer 9。

如果有人可以帮助我找出解决 IE 9 问题的方法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:50:47.307

试试这篇文章

[http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/92df3532-7497-41cb-b3bf-0f8cab7451d1](http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/92df3532-7497-41cb-b3bf-0f8cab7451d1)

# xsd - 一个 XSD 方案还是多个 XSD 方案？

> ID：10447318
> 
> 赞同：0
> 
> 时间：2012-05-04T10:45:09.037
> 
> 标签：xsd, xml-namespaces

在一个复杂的项目中，我有许多 XML 文件，如数据文件、配置文件等。它们都很相似，但内容不同（有些是数据文件，有些是配置文件等），当然结构也略有不同（例如根节点）但是一些“核心”元素是相同的。

但是，特定元素的某些子元素不应在一个文件中，而应在另一个文件中。

为每个文件创建单独的 XSD 方案或为整个项目创建单个 XSD 是一种好习惯吗？

我想我应该将一个 XSD 映射到一个命名空间，对吗？

在这种情况下，最好有一个单一的命名空间（和 XSD），例如

[http://www.example.com/myproject/schema](http://www.example.com/myproject/schema)

或对于每个文件：

[http://www.example.com/myproject/schema/configfile1](http://www.example.com/myproject/schema/configfile1)

[http://www.example.com/myproject/schema/configfile2](http://www.example.com/myproject/schema/configfile2)

[http://www.example.com/myproject/schema/datafile3](http://www.example.com/myproject/schema/datafile3)

[http://www.example.com/myproject/schema/datafile4](http://www.example.com/myproject/schema/datafile4)

问候 divB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:22:06.633

如果每个数据/配置文件的结构不同，我会为每个数据/配置文件选择单独的 XSD 和命名空间——也许使用一个公共 XSD，它包含在所有 XML 文件共有的部分的特定部分中。

# entity-framework - .net mvc codefirst 多个 SiteDataContextInitializer 一个数据库

> ID：10447321
> 
> 赞同：1
> 
> 时间：2012-05-04T10:45:46.823
> 
> 标签：entity-framework, ef-code-first, poco, datacontext

我正在尝试创建要重用的模块。例如，创建和处理用户操作（登录、注册等）、然后构建它并在其他项目中使用 dll 的 Membership 项目。

因此，在 Membership 项目中，我使用自己的命名空间创建了我的 POCO 类和 DataContext：

```
namespace CloudOne.Membership.Models
{
    public class SiteDataContext : DbContext
    {
        public DbSet<User> Users { get; set; }
        public DbSet<UserRole> UserRoles { get; set; }
        public DbSet<UserRoleJoin> UserRoleJoins { get; set; }

        // Twist our database
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
            base.OnModelCreating(modelBuilder);
        }
    }

    public class SiteDataContextInitializer : DropCreateDatabaseAlways<SiteDataContext>
    {
        protected override void Seed(SiteDataContext context)
        {
            // users

            var user = new User { UserID = "UserA", Password = "D33177D41FD48F0027BD10D2689E8599", DateCreated=DateTime.Now, DateLastLogin = DateTime.Now };

            context.Users.Add(user);

            var roles = new List<UserRole>
            {
                new UserRole { RoleID = "Admin" },
                new UserRole { RoleID = "Editor" },
                new UserRole { RoleID = "Customer" },
                new UserRole { RoleID = "Guest" }
            };

            roles.ForEach(m => context.UserRoles.Add(m));

            var userRoleJoin = new UserRoleJoin { UserID = "UserA", RoleID = "Admin" };

            context.UserRoleJoins.Add(userRoleJoin);
        }
    }
} 
```

然后我在一个主项目中使用，使用 CloudOne.Membership.dll 作为参考，主项目又有了自己的 Namespace、DataContext 和 seed：

```
namespace CloudOne.Models
{
    public class SiteDataContext : DbContext
    {
        public DbSet<Category> Categories { get; set; }
        public DbSet<Product> Products { get; set; }
        public DbSet<ProductPrice> ProductPrices { get; set; }
        public DbSet<ProductPicture> ProductPictures { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
            base.OnModelCreating(modelBuilder);
        }
    }

    public class SiteDataContextInitializer : DropCreateDatabaseAlways<SiteDataContext>
    {
        protected override void Seed(SiteDataContext context)
        {
            // data seeding here

            context.SaveChanges();
        }
    }
} 
```

然后我从 global.asax 调用两个初始化器

```
protected void Application_Start()
        {
            Database.SetInitializer<SiteDataContext>(new SiteDataContextInitializer());
            Database.SetInitializer<CloudOne.Membership.Models.SiteDataContext>(new CloudOne.Membership.Models.SiteDataContextInitializer());

            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        } 
```

现在的问题是，当我访问使用主项目类的页面时，它为主类中定义的 POCO 创建数据库（ModelFirst），并为主项目数据上下文中定义的数据播种，但它不创建 POCO 或种子对于会员资格。而且，当访问使用会员数据的页面时......它仅为会员重新创建数据库。

那么，我如何将会员资格（和其他模块）与主项目一起使用，而不必手动添加表、关系和播种，而不是在主项目中？

例如，主要项目是关于购物车的，为了使用会员模块，我必须复制 ShoppingCart DataContext 中的所有 POCO 类以及创建用户、角色等的种子部分。但是该代码已经在会员资格中。初始化程序，那么如何封装它，这样就不需要将所有模块的代码复制到主应用程序中就可以拥有包含所有表和数据的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:42:05.693

很有可能这是一个连接字符串问题，并且数据库实际上是在您期望的地方创建的。

我的猜测是您已经`SiteDataContext`在 web.config 中定义了连接字符串，但您没有明确定义`CloudOne.Membership.Models.SiteDataContext`连接字符串。

EF 将考虑这两个单独的 DbContexts —— 你不能简单地通过使类同名来合并它们。因此，它正在寻找单独的连接字符串与您分配的单独初始化指令一起使用。

我没有用 EF 4.1 尝试过这个，但我相信模型更改跟踪将防止两个上下文共享同一个物理数据库（[如此处所述](https://stackoverflow.com/a/8037717/941058)）。

简而言之，我相信您的直接问题是您没有使用连接字符串初始化您的成员资格上下文，因此它默认为本地。EF 将尝试在活动应用程序域（您的购物车网站）中查找具有您的上下文名称的连接字符串，因此它需要位于该站点的 web.config 中。

# jquery-mobile - 搜索输入焦点不起作用

> ID：10447324
> 
> 赞同：0
> 
> 时间：2012-05-04T10:45:51.147
> 
> 标签：jquery-mobile

在一个简单的搜索输入

```
$('#search-basic').val(''); // and value is correctly deleted
$('#search-basic').focus(); // highlighted but no cursor inside input
$('#search-basic').trigger('change');  // not work (result list not deleted) 
```

我试过了

```
setTimeout(function(){$('#search-basic').focus()}, 50); 
```

或者

```
$("#search-basic").focus(function() {
$(this).val('');
$(this).trigger('change');
$(this).select();
});
$("#search-basic").mouseup(function(e){
e.preventDefault();
});
$('#search-basic').focus(); 
```

同样的结果......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:51:31.970

您是否使用唯一 ID？

如果您使用的是“文本”输入元素，请尝试使用 keyup 而不是 mouseup。

你有任何支持的HTML吗？

编辑：

尝试：

```
$("#search-basic").bind("focus", function(){
  $(this).val("").change();
}).bind("keypress", function(e){
  if (e.keyCode == 13) {
    return false;
  }
});
$(document).ready(function(e) {
  $('#search-basic').focus();
}); 
```

这将为您对点击的焦点进行排序：

```
$(document).ready(function(e) {
    $("li div a").bind("mouseup", function(){
        $('#search-basic').focus();
    });
}); 
```

# ios5 - 如何在 ios 5.1 中使用 json？

> ID：10447330
> 
> 赞同：0
> 
> 时间：2012-05-04T10:46:14.623
> 
> 标签：ios5

我是第一次在我的应用程序中实现 json。

在我的应用程序中，我必须从 web 服务接收参数到我的应用程序，但我找不到任何教程可以在 ios5.1 中从我的应用程序传递参数

那么网上有没有任何教程可以从中获得对我有用的教程。

我试图用谷歌找到，但我没有成功。请我需要帮助。我不知道 json ios5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:44:22.523

我知道你可以使用[SB JSON](http://stig.github.com/json-framework/)。并且指南应该在 Github 页面上。

如果 SBJSon 不适合您，请尝试[在 iOS 5 Tutoria 中使用 JSON](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。

# google-maps-api-3 - 查找谷歌位置自动完成返回零结果的时间

> ID：10447332
> 
> 赞同：8
> 
> 时间：2012-05-04T10:46:22.283
> 
> 标签：google-maps-api-3, google-places-api

我使用谷歌地方自动完成来提供地方建议。现在这就是我想要的：当用户键入不在谷歌数据库中的位置时，即谷歌返回零结果，我需要能够捕获零结果事件，并触发我的客户自动完成。

当谷歌返回零结果时，我如何找到？如果结果为零，autocomplete.getPlace() 将返回一个状态，但这是在 place_changed 事件中，仅当用户从下拉列表中选择建议时才会触发。如何让它在 place_changed 事件之外工作？

这是我使用的代码，请根据此提出建议：

```
autocomplete = new google.maps.places.Autocomplete(input,options);
google.maps.event.addListener(autocomplete, 'place_changed', function() {
   var place = autocomplete.getPlace();
   document.getElementById('place_name').value = place.name;
   document.getElementById('location_lat').value = place.geometry.location.lat();
   document.getElementById('location_lon').value = place.geometry.location.lng();
   document.getElementById('location_add').value = place.formatted_address;
   $('#locationInput').attr('title', place.formatted_address);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T13:43:53.190

发现了一招，

`AutoComplete``keyup`由输入节点的事件触发，则：

`display: none;`如果没有结果，则隐藏结果下拉列表

或者

`display`如果有结果，则以清除样式显示结果下拉列表

`document.getElementsByClassName('pac-container')[0]`您可以通过(native) 或`$('.pac-container')`(jQuery)获取下拉列表

所以只需将`display`下拉列表设置为“阻止”，然后跟踪它以检测结果状态。

从[google官方示例修改的简单示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete)：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Google Maps JavaScript API v3 Example: Places Autocomplete</title>
        <script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"
            type="text/javascript"></script>

        <style type="text/css">
            body {
                font-family: sans-serif;
                font-size: 14px;
            }
            #map_canvas {
                height: 400px;
                width: 600px;
                margin-top: 0.6em;
            }
        </style>

        <script type="text/javascript">
            var ns = {}; // a name space
            ns.checktimes = 0; // a couter of check times
            // the check function
            // @param dropdown: the drop-down list of Places.AutoComplete
            // @param msg: the div to show message
            ns._doCheck = function (dropdown, msg) {
                if (dropdown.style.display == '') {
                    msg.innerHTML = 'has results? true';
                    ns.checkTimer = null;
                }
                else if (dropdown.style.display == 'none') {
                    msg.innerHTML = 'has results? false';
                    ns.checkTimer = null;
                } else if (ns.checktimes < 20) { // check at most 10 seconds
                    ns.checktimes++;
                    ns.checkTimer = setTimeout(function () {
                        ns._doCheck(dropdown, msg);
                    }, 500);
                }
            }
            function initialize() {
                var mapOptions = {
                    center: new google.maps.LatLng(-33.8688, 151.2195),
                    zoom: 13,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
            var map = new google.maps.Map(document.getElementById('map_canvas'),
                mapOptions);

            var input = document.getElementById('searchTextField');
            var autocomplete = new google.maps.places.Autocomplete(input);

            autocomplete.bindTo('bounds', map);

            var infowindow = new google.maps.InfoWindow();
            var marker = new google.maps.Marker({
                map: map
            });

            google.maps.event.addListener(autocomplete, 'place_changed', function() {
                infowindow.close();
                var place = autocomplete.getPlace();
            if (place.geometry.viewport) {
                map.fitBounds(place.geometry.viewport);
            } else {
                map.setCenter(place.geometry.location);
                map.setZoom(17);  // Why 17? Because it looks good.
            }

            var image = new google.maps.MarkerImage(
                place.icon,
                new google.maps.Size(71, 71),
                new google.maps.Point(0, 0),
                new google.maps.Point(17, 34),
                new google.maps.Size(35, 35));
            marker.setIcon(image);
            marker.setPosition(place.geometry.location);

            var address = '';
            if (place.address_components) {
                address = [(place.address_components[0] &&
                place.address_components[0].short_name || ''),
                (place.address_components[1] &&
                place.address_components[1].short_name || ''),
                (place.address_components[2] &&
                place.address_components[2].short_name || '')
                ].join(' ');
            }

            infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
            infowindow.open(map, marker);
            // update stored value
            ns.oldValue = document.getElementById('searchTextField').value;
        });

        // Sets a listener on a radio button to change the filter type on Places
        // Autocomplete.
        function setupClickListener(id, types) {
            var radioButton = document.getElementById(id);
            google.maps.event.addDomListener(radioButton, 'click', function() {
            autocomplete.setTypes(types);
            });
        }

        setupClickListener('changetype-all', []);
        setupClickListener('changetype-establishment', ['establishment']);
        setupClickListener('changetype-geocode', ['geocode']);
        }

        // to check whether responsee and has results
        function startCheck () {
            // the input node
            var inp = document.getElementById('searchTextField'),
                value = inp.value; // value of input node
            if (value && ns.oldValue != value) { // has value and changed, start check
                // drop-down list and message div
                var dropdown = document.getElementsByClassName('pac-container')[0],
                    msg = document.getElementById('msg');
                // trick! change style to display='block'
                dropdown.style.display = 'block';
                // update stored value
                ns.oldValue = value;
                // initiate checktimes
                ns.checktimes = 0;
                // clear previous timer if exists
                if (ns.checkTimer)
                    clearTimeout (ns.checkTimer);
                ns.checkTimer = setTimeout(function () {
                    ns._doCheck(dropdown, msg);
                }, 500);
            }
        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    </head>
    <body>
        <div>
            <div id="msg">has results? </div>
            <input id="searchTextField" type="text" size="50" onkeyup="startCheck();">
            <input type="radio" name="type" id="changetype-all" checked="checked">
            <label for="changetype-all">All</label>

            <input type="radio" name="type" id="changetype-establishment">
            <label for="changetype-establishment">Establishments</label>

            <input type="radio" name="type" id="changetype-geocode">
            <label for="changetype-geocode">Geocodes</lable>
        </div>
        <div id="map_canvas"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T02:56:44.640

我认为您的情况可能与 Google 返回零结果不同。您问题中的一个假设是，`place_changed`事件“仅在 [the] 用户从下拉列表中选择建议时触发”是不正确的。从`google.maps.places.Autocomplete`类*事件*文档中`place_changed`：

> 当 PlaceResult 可用于用户选择的 Place 时，将触发此事件。 **如果用户输入了控件未建议的 Place 名称并按下 Enter 键，则会触发 place_changed 事件，该事件包含 name 属性中的用户输入，没有定义其他属性。**

否则，Google 应该会向您返回结果，因为用户选择了自动完成下拉选项中的结果之一。如果直接用户输入不是驱动您的方案的原因，那么检查零结果不应该只涉及检查一个、一些或一部分`google.maps.places.PlaceResult`属性，例如：

*   the :`address_components`数组`google.maps.GeocoderAddressComponent`
*   `id`
*   `name`
*   `reference`
*   `types`字符串数组（例如 [ , ] 或 [ , `political`] ）`locality``restaurant``establishment`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-06T09:49:04.007

您也可以通过这种方式获得结果。预测是谷歌地图返回的数组。

```
const displaySuggestions = (predictions, status) => {
      if (status !== google.maps.places.PlacesServiceStatus.OK) {
        if (status === 'ZERO_RESULTS') {
          alert('zero results found')
        }
        return;
      }
    };
    // you can create autocompleteService as variable outside the function as well
    const autocompleteService = new google.maps.places.AutocompleteService();
    // input is string of what user types 
    autocompleteService.getPlacePredictions({ input: input, types: ['address'] }, displaySuggestions); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-02T20:34:24.657

您可以通过简单的方式获得零结果（输入 onChange 事件）：

```
const _handleChange = (event, value) => {
    setTimeout(() => {
        const dropdownList = document.getElementsByClassName('pac-container')[0];
        if (dropdownList.childElementCount === 0) {
            // Zero results
        } else {
            // Has results
        }
        console.log('child count:', dropdownList.childElementCount);
    }, 100);
}; 
```

# javascript - 将复选框绑定到 AngularJs 中的对象值

> ID：10447337
> 
> 赞同：2
> 
> 时间：2012-05-04T10:46:30.667
> 
> 标签：javascript, angularjs

问题在于将复选框的状态（选中/未选中）绑定到对象值。

HTML：

```
<div ng:controller="Ctrl"> 
   <div ng:repeat="(letter, number) in obj">
     {{letter}} and {{number}}
     <input type="checkbox" ng:model="obj[letter]">
</div> 
```

​</p>

控制器：

```
function Ctrl() {
    this.obj = {a:true,b:true};    
};​ 
```

单击第一个复选框时，它会影响第二个复选框的状态，但模型是正确的，因此 obj 变为 {a:false, b:true}。

示例可以在 [http://jsfiddle.net/alexpetrov/tRxzr/找到](http://jsfiddle.net/alexpetrov/tRxzr/)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:29:47.367

将 ng-repeat 绑定到对象而不是原始类型。

```
function Ctrl() {
    this.obj = [{id: 'a', checked: true}, {id: 'b', checked: true}];
} 
```

[http://jsfiddle.net/tRxzr/1/](http://jsfiddle.net/tRxzr/1/)

绑定到原始类型会混淆 ng-repeat，这是一个错误： [https ://github.com/angular/angular.js/issues/933](https://github.com/angular/angular.js/issues/933)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T20:30:25.733

当 JSON 不完全由您控制时，您将获得原始数组而不是对象。你想在同样的地方做一个 ng-repeat。

To bind ng-repeats to checkboxes to a primitive array and get the selected items. See the plunker code here.

[http://plnkr.co/edit/i6IiGY42h8CiOMaqT9SZ?p=preview](http://plnkr.co/edit/i6IiGY42h8CiOMaqT9SZ?p=preview)

# java - 使用 Spring 和 html 表单获取对象

> ID：10447345
> 
> 赞同：0
> 
> 时间：2012-05-04T10:47:01.180
> 
> 标签：java, forms, spring

我正在尝试通过构建简单的网站来学习 Spring 框架，现在我遇到了一个问题。

我想做这样的事情：用户选择要上传的文件并从列表中选择它是什么类型的文件。现在我有这样的事情：

```
<form:form modelAttribute="uploadItem" method="post" enctype="multipart/form-data">
<fieldset>
    <div class="form_elem">
        <label for="file">File</label> 
        <input type="file" name="fileData"/>
</div>
<div class="form_elem">
        <label for="file_type">File type</label> 
        <form:select path="fileType">
                    <form:options items="${fileTypes}" />
        </form:select>
</div>
<input type="submit"/>
</fieldset> 
```

现在在我的控制器中我有

```
@RequestMapping(value = "/addWordFile", method = RequestMethod.GET)
public String showFileAdder(Model model) {
    model.addAttribute(new UploadItem());
    model.addAttribute("fileTypes", Arrays.asList("first type", "second type"));
    return "questionFileAdd";
}

@RequestMapping(value = "/addWordFile", method = RequestMethod.POST)
public String processUploadedFile(UploadItem uploadItem, Model model)
        throws Exception {
    String type=uploadItem.getFileType();
    return showFileAdder(model);
} 
```

这是问题所在，当用户选择文件类型时，我只得到一个字符串，我需要手动创建一个对象，比如 SimpleFileFileReader 使用类作为名称，或者只对我支持的每种文件类型使用大 switch-case 语句。

是否可以以 html 形式显示字符串，但是当它被处理时，我会得到某个类的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:59:36.173

这是一个 OO 问题而不是 Spring 问题。你想要的是一个 SimpleFileReader 的工厂。简单地使用 a`Map<String, SimpleFileReader>`可能是您的解决方案：

*   地图的`keySet()`包含所有文件类型
*   从 GUI 获取文件类型后，使用`map.get(fileType)`获取与此类型关联的 SimpleFileReader

你也可以使用 en 枚举：

```
public enum FileType {
    TYPE_1 {
        public SimpleFileReader getFileReader() {
            return new Type1SimpleFileReader();
        }
    },

    TYPE_2 {
        public SimpleFileReader getFileReader() {
            return new Type2SimpleFileReader();
        }
    };

    public abstract SimpleFileReader getFileReader();
} 
```

为您提供文件类型的`FileType.values()`数组。Spring 可以自动将输入字段映射到枚举，获取关联的文件阅读器就像

```
SimpleFileReader reader = fileType.getFileReader(); 
```

# c# - 秒表的替代品？

> ID：10447346
> 
> 赞同：6
> 
> 时间：2012-05-04T10:47:08.920
> 
> 标签：c#, wpf, stopwatch

我正在使用 WPF 开发一个非常简单的秒表，但使用`System.Diagnostics`秒表非常慢且根本不可靠，与我的应用程序每 1 秒的系统时钟相比，实际时钟为 3 秒。

我做了一些关于秒表慢的搜索，找到了很多结果但没有解决办法，所以我决定想出自己的计数器。

这是我想出的一个示例：

```
System.Windows.Threading.DispatcherTimer _update;
DateTime _started;
bool isRunning = false; 
```

更新线程：

```
_update = new System.Windows.Threading.DispatcherTimer(new TimeSpan(0, 0, 0, 0, 1), System.Windows.Threading.DispatcherPriority.Normal, delegate
{
    if (isRunning)
        iTimer.Content = new DateTime((DateTime.Now - _started).Ticks).ToString("HH:mm:ss");
}, this.Dispatcher); 
```

我有 2 个按钮，bToggle 负责启动、停止和恢复它，另一个按钮称为 bReset。

```
private void bReset_Click(object sender, RoutedEventArgs e)
{
    isRunning = false;
    iTimer.Content = "00:00:00";
    bToggle.Content = "Start";
}

private void bToggle_Click(object sender, RoutedEventArgs e)
{
    if ((string)bToggle.Content == "Start")
    {
        isRunning = true;
        _started = DateTime.Now;
        bToggle.Content = "Stop";
    }
    else if ((string)bToggle.Content == "Resume")
    {
        isRunning = true;
        bToggle.Content = "Stop";
    }
    else
    {
        isRunning = false;
        bToggle.Content = "Resume";
    }
} 
```

它可以正常启动和重置，但由于我使用的是实际时间，如果我停止和恢复，它会跳秒直到实际时间。

我该如何解决这个问题，或者是否有替代秒表的替代品，它实际上对当前时间有很好的准确性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:56:36.483

您需要引入一个额外的变量`TimeSpan accumulatedTime`，每当有人单击停止时，您就可以在其中保存经过的间隔。

和：

```
iTimer.Content = (new DateTime((DateTime.Now - _started).Ticks) + accumulatedTime).ToString("HH:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:02:56.453

采用`System.Timers.Timer`

您可以启动和停止它，并在计时器滴答事件中设置一个计数器。

这是一个简单的例子：

```
public partial class MainWindow : Window
{
    private Timer _timer;
    private int _time;

    public MainWindow()
    {
        InitializeComponent();

        _time = 0;

        _timer = new Timer(1000);
        _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed);
    }

    void _timer_Elapsed(object sender, ElapsedEventArgs e)
    {

        Dispatcher.Invoke(new Action(() =>
                                         {
                                             _time++;
                                             tbTime.Text = _time.ToString();
                                         }));

    }

    private void btnStartStop_Click(object sender, RoutedEventArgs e)
    {
        if (_timer.Enabled)
        {
            _timer.Stop();
        }
        else
        {
            _timer.Start();
        }
    }
} 
```

xml:

```
<Grid>
    <StackPanel>
        <Button Name="btnStartStop" Content="start/stop timer" Click="btnStartStop_Click" />
        <TextBlock Name="tbTime" Text="00:00" />
    </StackPanel>
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:17:07.777

我认为这条线是你的问题：

```
_update = new System.Windows.Threading.DispatcherTimer(new TimeSpan(0, 0, 0, 0, 1), System.Windows.Threading.DispatcherPriority.Normal 
```

它告诉 WPF 您希望您的代理每秒执行 1000 次，并将其安排在第二高的优先级。这比`Render`and具有更高的优先级`DataBind`，我认为 Render 和 DataBind 都需要实际显示您输入的更新值`iTimer.Content`。

您应该将 DispatcherPriority 设置为 Background 并使用较低的频率（例如 20 毫秒 - 无论如何，人类看不到任何快于 50 fps 的东西。）

# c++ - 也许有人可以看到我缺少的东西（调试案例、C++、函数指针）

> ID：10447347
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:47:09.380
> 
> 标签：c++, debugging

我`void (*Draw)(WidgetVisualization *);`在 WidgetVisualization.h 中的类 WidgetVisualization 中有一个函数指针。

我有`extern void GraphicVisualizationDraw(WidgetVisualization *w)`WidgetVisualization.cpp。

在 WidgetVisualization 的构造函数中，我分配`Draw = GraphicVisualizationDraw;`.

这是 LCDGraphic.cpp 中的函数：

```
void GraphicVisualizationDraw(WidgetVisualization *widget) {

} 
```

当我尝试将函数指针“Draw”分配给函数`GraphicVisualizationDraw`时，我得到一个无效的写入。有什么线索吗？

这是 valgrind 的输出：

```
==8281== Invalid write of size 4
==8281==    at 0x52D12C7: LCD::WidgetVisualization::WidgetVisualization(LCD::LCDCore*, std::string, Json::Value*, int, int, int) (WidgetVisualization.cpp:72)
==8281==    by 0x530F0C3: LCD::LCDCore::BuildLayouts() (LCDCore.cpp:342)
==8281==    by 0x5306A07: LCD::LCDControl::ConfigSetup() (LCDControl.cpp:213)
==8281==    by 0x53062EC: LCD::LCDControl::Start() (LCDControl.cpp:57)
==8281==    by 0x52D84E4: (anonymous namespace)::lcdcontrol_init(_VisPluginData*) (actor_lcdcontrol.cpp:115)
==8281==    by 0x40645FA: visual_plugin_realize (lv_plugin.cpp:207)
==8281==    by 0x405B1E7: visual_actor_realize (lv_actor.cpp:265)
==8281==    by 0x404C02B: visual_bin_realize (lv_bin.c:108)
==8281==    by 0x80507D1: main (lv-tool.cpp:378)

WidgetVisualization::WidgetVisualization(LCDCore *v, std::string n, Json::Value *section, int row, int col, int layer) : Widget(v, n, section, row, col, layer,
    WIDGET_TYPE_VISUALIZATION | WIDGET_TYPE_RC | WIDGET_TYPE_SPECIAL) {

    LCDError("widgetvisualization: layer: %d", layer_);

    if(lcd_type_ == LCD_TEXT)
        Draw = TextVisualizationDraw;
    else if(lcd_type_ == LCD_GRAPHIC)
        Draw = GraphicVisualizationDraw;// line 72
    else
        Draw = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:00:19.800

这个错误似乎与类本身的代码无关，它似乎与`WidgetVisualization`创建类对象的内存位置有关。

问题是当进行 Draw 的初始化时，运行时意识到对象的位置不正确。

在堆栈跟踪之后：

```
==8281== Invalid write of size 4
==8281==    at 0x52D12C7: LCD::WidgetVisualization::WidgetVisualization(LCD::LCDCore*, std::string, Json::Value*, int, int, int) (WidgetVisualization.cpp:72)
==8281==    by 0x530F0C3: LCD::LCDCore::BuildLayouts() (LCDCore.cpp:342) 
```

一个被调用的成员函数`BuildLayouts()`似乎是对该对象进行错误分配的一个很好的候选者。您应该仔细检查该代码。

# css - CSS中的边界半径

> ID：10447350
> 
> 赞同：3
> 
> 时间：2012-05-04T10:47:24.497
> 
> 标签：css, internet-explorer-8, border

我在修复 IE8 中的浏览器兼容性问题时遇到问题。我使用以下代码：

```
input[type="submit"],input[type="reset"] {
    border:0px;
    /*background-image:url(../images/button.jpg);*/
    background-color:#3778aa;
    background-repeat:repeat-x;
    width:79px;
    height:27px;
    cursor:pointer;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#ffffff;
    -moz-border-radius: 7px;
    -webkit-border-radius: 7px;
    -khtml-border-radius: 7px;
    border-radius: 7px;
    behavior: url(../images/ie-css3.htc); 
} 
```

并将“ie-css3.htc”文件放置在正确的位置。但是 IE8 的曲线仍然不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:50:22.600

我不知道该`behaviour`属性，但也许[CSS3 Pie](http://css3pie.com/) javascript 库会为您完成这项工作：

> PIE 使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T10:50:40.163

使用[CSS#PIE](http://css3pie.com/)并按照说明进行操作。它支持 Internet Explorer 6-9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T21:16:49.470

[CSS3 Pie](http://css3pie.com/)是 IE8 及之前版本的border-radius 解决方案。

# javascript - 将段落文本设置为 JSON 数据结果

> ID：10447351
> 
> 赞同：0
> 
> 时间：2012-05-04T10:47:28.103
> 
> 标签：javascript, jquery, html, mobile

我正在努力寻找一个使用一些 JSON 数据结果并为其设置段落文本的示例。

这是我的 JSON 结果...

```
[{"availability":58.2,"oee":44.5,"performance":41.2,"quality":68.9}] 
```

我要做的就是将段落的文本设置为等于“oee”结果。

这是我尝试过的 var，但它不起作用。不知道为什么在我使用的 Java 调试器中没有显示 JavaScript 错误。

```
<script type="">
$(document).ready(function () {
    $.getJSON("http://....../mesmobileservice/MESService.svc/JSON/data/macid=1", function (data) {
        $("#mac001OEE").text($(this).data("oee")); 
    });              
}); 
```

这是一个简单的 Kendo UI 应用程序。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:49:22.207

```
$("#mac001OEE").text(data[0].oee); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T10:50:34.870

```
$("#mac001OEE").text(data[0].oee); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:54:08.273

当您通过 AJAX 获得 JSON 字符串时，jQuery 会将其转换为 Object。如果你给你的对象贴上标签，我的拙见会更优雅：

```
{"myObj": {
    "availability":58.2,
    "oee":44.5,"performance":41.2,
    "quality":68.9
   }
} 
```

然后你可以像这样访问你的数据：

```
data.myObj.oee 
```

# java - Java圆角bug

> ID：10447353
> 
> 赞同：5
> 
> 时间：2012-05-04T10:47:35.593
> 
> 标签：java, swing, border

我正在使用 Java 开发 GUI，并且正在尝试为我的边界设置圆角。

```
JPanel recentProjectsPanel = new JPanel();
    recentProjectsPanel.setLayout(new BorderLayout());
    recentProjectsPanel.setBackground(Color.red);
    recentProjectsPanel.setBorder(new LineBorder(Color.green, 15, true)); 
```

这是我得到的输出（不要介意颜色）：

![失败的边界 GUI](../Images/edf09e2de0b150c5b53855b6da93d733.png)

为什么我会在角落里看到这些红色条纹？有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:09:46.800

您可能会使用 的变体[`TextBubbleBorder`](https://stackoverflow.com/a/8463742/418556)。

![](../Images/49a61ca3ed27f9b299bb7d4cc2f5135a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:14:18.433

看看这个

[Java - 在paintComponent中进行合成的圆角面板](https://stackoverflow.com/questions/9291836/java-rounded-corner-panel-with-compositing-in-paintcomponent)

这有很多关于相同的信息。

# unix - AWK脚本在for循环上抛出语法错误

> ID：10447358
> 
> 赞同：1
> 
> 时间：2012-05-04T10:48:09.400
> 
> 标签：unix, syntax, awk

我试图让这个脚本工作以计算有多少 .doc 和 .pdf 类型的文件。但是我不断在 for 循环的最后一个括号上收到语法错误。

```
awk: ./parselog.awk:14:     for ($7 in count)
awk: ./parselog.awk:14:                     ^ syntax error 
```

这是 awk 脚本：

```
#!/usr/bin/awk -f
BEGIN {}
{
    file = match($7, "/datasheets/")
    doccheck = match(tolower($7), ".doc")
    pdfcheck = match(tolower($7), ".pdf")
    if( doccheck || pdfcheck )
    {
            count[$7]++
    }
}
    END{

    for ($7 in count)
    {
            frequency = count[$7]
            sub(/datasheets/,"",$7)
            minusextension = $7
            sub(/\....$/, "", minusextension)
            print minusextension, $7, frequency
    }
    sort
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:52:52.097

您不能在该循环`$7`中用作变量名。将块中的`for`所有内容更改为或类似的内容。`$7``END``key`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:17:50.100

您可以使用单线执行此操作：

```
[ghoti@pc ~]$ find . \( -name "*.doc" -or -name "*.pdf" \) -print | awk -F. '{c[$NF]++} END {for(ext in c){printf("%5.0f\t%s\n", c[ext], ext);}}'
  232   pdf
   45   doc
[ghoti@pc ~]$ 
```

请注意，这会将扩展的选择从 awk 脚本中移到`find`管道中较早的命令中。如果你真的想让它成为一个独立的 awk-only 脚本（而不是 shell），我想你可以这样做：

```
#!/usr/bin/awk -f

BEGIN {

  # List of extensions we're interested in:
  exts["doc"]=1;
  exts["pdf"]=1;

  FS=".";
  cmd="find . -print";
  while (cmd | getline) {
    if (exts[$NF]==1) {
      c[$NF]++;
    }
  }
  for (ext in c) {
    printf("%5.0f\t%s\n", c[ext], ext);
  }
  exit;
} 
```

请注意，该`find`命令还遍历子目录。如果你只想要当前目录，你可以分别换入`ls *.pdf *.doc`和`ls`。

# jquery - jQuery 动画功能在 Firefox 11 和 12 上不起作用

> ID：10447359
> 
> 赞同：1
> 
> 时间：2012-05-04T10:48:09.897
> 
> 标签：jquery, firefox

我不确定这是否特定于 Firefox 11 和 12，但 jQuery 的动画功能不再起作用。

我创建了一个小提琴来证明这一点 - [http://jsfiddle.net/hndy4/](http://jsfiddle.net/hndy4/)

该问题在 Firefox 12 (Ubuntu) 和 Firefox 11 (MAC) 上都存在。有什么想法或解决方法吗？

PS - 该演示在 Chrome、Safari 上运行良好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:56:15.463

尝试：

```
(function($) {
    $(document).ready(function() {
         $('html, body').animate({ scrollTop: 4545 }, 1000);
    });
})(jQuery); 
```

你的意思是这样的吗

# windows-phone-7 - WP7当里面有控件时如何删除一个数据透视项目

> ID：10447361
> 
> 赞同：1
> 
> 时间：2012-05-04T10:48:19.583
> 
> 标签：windows-phone-7, pivotitem

我曾经这样做是为了删除一个枢轴项：nameOfThePivot.Items.remove(nameOfthePivotItem)。

但后来我将我的枢轴项目更改为：

```
 <controls:PivotItem x:Name="DistributionPivot"  >
        <controls:PivotItem.Header>
            <TextBlock Text="distribution" />
        </controls:PivotItem.Header> 
```

现在无法删除此项目：我收到错误消息：ArgumentException 未处理

这显然是一个已知的错误，但我找不到如何修复它。你有另一个想法来隐藏一个pivotItem。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:47:58.167

有两种方法可以做到这一点：要么将您的项目作为绑定集合并更新基础集合，要么在代码中生成项目，然后添加和删除它们。

无法删除在 XAML 中创建的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:59:13.557

我使用在 XAML 中创建的 PivotItems 执行此操作。我创建了这些扩展方法作为助手。

```
public static class PivotFeatureSwitchHelper
    {
        public static bool RemovePivotItemIfExistsByHeaderName(this Pivot p, string headerKey)
        {
            var item = FindPivotItemWithHeaderName(p, headerKey);
            return item != null && p.Items.Remove(item);
        }

        public static PivotItem FindPivotItemWithHeaderName(this Pivot p, string name)
        {
            return (PivotItem)p.Items.FirstOrDefault(mem => name.Equals( (string)(((PivotItem)mem).Header), StringComparison.OrdinalIgnoreCase));
        }
    } 
```

编辑：

由于您已经自定义了每个标题（而不是 Pivot 的 HeaderTemplate），因此您应该转换为 TextBlock 并获取 Text 属性，而不是转换为字符串。由于您的使用更具体到您的应用程序，因此我将保留该示例，因为它对于遇到类似问题的其他人会更有用。

# sql - 如何查看填充 Excel 电子表格的 Oracle 查询？

> ID：10447366
> 
> 赞同：0
> 
> 时间：2012-05-04T10:48:43.193
> 
> 标签：sql, oracle, excel

我有一个连接到 Oracle 数据库的电子表格。它使用从数据库中提取特定字段的查询来填充 Excel。我想查看它正在使用的查询，以便我可以修改它。

它使用 Office 2003 和 Oracle 11g。目前，它会使用最新数据自动刷新。我需要对查询进行逆向工程，以便它只给我昨天的所有信息。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:16:37.470

我们还在使用 2003 Excel。我从来没有看到像手拿着文件这样的图标，但我找到了绕过它的方法。当您选择编辑查询时，您只需点击下一步，直到按钮更改为完成，您将看到一个保存查询按钮。我保存了查询，然后用笔记本进入它，它看起来像这样 -

```
XLODBC
1
DBQ=J:\SHEALY.mdb;DefaultDir=J:\;Driver={Microsoft Access Driver (*.mdb)};DriverId=25;FIL=MS Access;MaxBufferSize=2048;MaxScanRows=8;PageTimeout=5;SafeTransactions=0;Threads=3;UserCommitSync=Yes;
SELECT `Inventory by Class - Detail`.ITEMNO, `Inventory by Class - Detail`.CLASS, `Inventory by Class - Detail`.ONHAND, `Inventory by Class - Detail`.EPLANT_ID  FROM `J:\SHEALY`.`Inventory by Class - Detail` `Inventory by Class - Detail`  WHERE (`Inventory by Class - Detail`.ITEMNO Like 'I%') OR (`Inventory by Class - Detail`.ITEMNO Like 'UI%')  ORDER BY `Inventory by Class - Detail`.ITEMNO, `Inventory by Class - Detail`.EPLANT_ID

ITEMNO  CLASS   ONHAND  EPLANT_ID 
```

我的目标是找到原始源查询。这告诉我它是什么，然后我可以回到源头并更改选择标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:21:52.093

我没有在我的 PC 上安装更高版本的 Excel，所以我不能准确地告诉你要按下的按钮/要查看的屏幕，但是我已经使用来自各种数据库的嵌入式数据源完成了 HEAPS。

您需要查看“外部数据”连接。我认为在 2003 年您仍然可以右键单击包含数据的表并从那里访问外部数据属性（以及选择“刷新”）

在里面你会发现一个指向定义的按钮： - 单个表（/视图） - 或 SELECT 语句

select 语句是您需要查看的。

注意：有两种查看查询的方法 - 一种加载外部 MS 查询工具 - 你不想要 - otehr 只会在 Excel 中显示原始查询 - 这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T17:01:25.720

**在 Excel 2013 中：**

1.  数据 > 现有连接
2.  双击（一个）连接
3.  属性 > 定义

SQL 将在命令文本中

# mysql - 优化 MYSQL 查询

> ID：10447369
> 
> 赞同：0
> 
> 时间：2012-05-04T10:48:56.527
> 
> 标签：mysql, optimization

我有一个遗留的 PHP 应用程序（不使用任何框架）——在某些地方它有一些真正的减速，一些查询需要 8-10 秒。

下面是这些慢查询之一的摘录，我可以看到我正在获取文件排序，这表明由于原因（或者至少我认为）运行缓慢 - 任何人都可以建议如何优化我的查询以防止使用文件排序？该表有大约 600,000 行（所以它相当大）

```
Schema added:
(MailList_Tags)
Field   Type    Null    Key Default Extra
MailListID  int(11)     PRI 0    
Tag varchar(60)     PRI      

(MailList)    
Field   Type    Null    Key Default Extra
MailListID  int(11)     PRI NULL    auto_increment
GroupID varchar(8)  YES     NULL     
HotelID varchar(8)  YES     NULL     
Title   varchar(20) YES     NULL     
FirstName   blob    YES     NULL     
LastName    blob    YES     NULL     
CompanyName varchar(200)    YES     NULL     
Address blob    YES     NULL     
Postcode    varchar(12) YES     NULL     
Country varchar(200)    YES     NULL     
Tel varchar(40) YES     NULL     
Fax varchar(40) YES     NULL     
Email   blob                 
md5digest   varchar(32)     UNI      
Sub1    int(1)      MUL 0    
Sub2    int(1)      MUL 0    
Sub3    int(1)      MUL 0    
OptInState  char(1)     MUL P    
UpdateDetailsState  char(1) YES     NULL     
Bounce  int(11)         0

EXPLAIN SELECT  `Tag` , COUNT( DISTINCT (
`MailList_Tags`.`MailListID`
) ) AS  `Count` 
FROM  `MailList` 
JOIN  `MailList_Tags` ON  `MailList`.`MailListID` =  `MailList_Tags`.`MailListID` 
WHERE HotelID =  'ca4b9ac9'
AND OptInState =  'V'
GROUP BY  `Tag`

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  MailList_Tags   index   MailListID  MailListID  64  NULL    962583  Using index; Using filesort
1   SIMPLE  MailList    eq_ref  PRIMARY,OptInState  PRIMARY 4   user_db.MailList_Tags.MailListID    1   Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:30:34.870

你需要一些索引：

*   在表上`MailList_Tags`，添加一个`UNIQUE`索引`(Tag, MailListID)`

*   在表上`MailList`，添加一个索引`(OptInState, HotelID, MailListID)`。

然后尝试这个查询（更改`COUNT( DISTINCT MailList_Tags.MailListID )`为`COUNT(*)`，应该产生相同的结果）：

```
SELECT  Tag 
     ,  COUNT( * )
          AS  `Count` 
FROM  MailList 
  JOIN  MailList_Tags 
    ON  MailList.MailListID = MailList_Tags.MailListID 
WHERE  HotelID =  'ca4b9ac9'
  AND  OptInState =  'V'
GROUP BY  Tag 
```

或者这个：

```
SELECT  Tag 
     ,  COUNT(*)
          AS  `Count` 
FROM  MailList 
WHERE  EXISTS 
       ( SELECT  *
         FROM  MailList_Tags 
         WHERE  MailList.MailListID = MailList_Tags.MailListID 
           AND  HotelID =  'ca4b9ac9'
           AND  OptInState =  'V'
       )
GROUP BY  Tag 
```

# string - 比较 matlab 中的两个字符：char 105 和 char 99

> ID：10447372
> 
> 赞同：0
> 
> 时间：2012-05-04T10:49:11.490
> 
> 标签：string, matlab, comparison, char, string-comparison

我正在尝试比较两个字符串（来自matlab）

```
the first one has as type : 1*99 char
the second one has as type : 1*105 char 
```

我如何进行转换才能进行比较？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:41:08.127

这个问题很模棱两可（不同的大小并不意味着不同的*类型*等），但我知道你想剪切第二个字符向量的最左边或最右边的元素（这里`SecondCharVector`）以匹配第一个字符向量的大小（这里`FirstCharVector`）。

一些示例字符向量：

%`FirstCharVector`是 1x99 字符向量。

```
FirstCharVector = [ repmat('abcdefghij', 1, 9), 'abcdefghi' ]; 
```

%`SecondCharVector`是 1x105 字符向量。

```
SecondCharVector = [ repmat('abcdefghij', 1, 10), 'abcde' ]; 
```

切断最左边的元素（字符串的头部），`SecondCharVector`使其大小与`FirstCharVector`：

```
SecondCharVector(1:(size(SecondCharVector, 2)-size(FirstCharVector, 2))) = []; 
```

或者，切断最右边的元素（字符串的尾部），`SecondCharVector`使其大小与`FirstCharVector`：

```
SecondCharVector(size(FirstCharVector, 2)+1:end) = []; 
```

请注意，此代码假定`SecondCharVector`水平尺寸比 长`FirstCharVector`，并且未选中。

# php - 挣扎于 JQuery .each() 函数

> ID：10447374
> 
> 赞同：0
> 
> 时间：2012-05-04T10:49:19.227
> 
> 标签：php, jquery, jquery-ui, facebook-graph-api

希望这将是一个简单的解决方案，但我自己似乎无法解决。

背景是我正在尝试创建一个网络应用程序，它将您所有的 Facebook 朋友放入 jQuery UI 自动完成中，并在您完成选择朋友并单击链接/按钮等时发布到他们的墙上。

我让一个朋友可以正常工作，但是要求已经改变（一如既往）以使多个朋友可以工作。

到目前为止，我已经与多个朋友一起工作，除了实际发布到用户朋友的墙上。

**代码**

我将尝试将其保留在与我认为如下问题相关的代码中：

我有一个隐藏的输入，我设法用 id 填充：

```
<input id="fbid" type="hidden" value="12345, 567890, "> 
```

然后我有一个 jQuery 函数，该函数在单击链接以发布到朋友的墙上时运行。

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId      : '12345678', // App ID
        channelUrl : '/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        oauth      : true, // enable OAuth 2.0
        xfbml      : true  // parse XFBML
    });

    // Additional initialization code here

    FB.login(function(response)
    {
        if (response.authResponse)
        {                                               
            $("#send-voucher").click(function() {

                // Post message to friend's wall

                var opts = {
                    message : 'This is the message',
                    name : 'This is the name',
                    link : 'http://www.opticalexpress.co.uk',
                    description : 'This is the description',
                    picture : '/voucher_valid.png'
                };

                var referees = $("#fbid").val();

                // remove last comma and space from the end of the string
                referees = $.trim(referees);
                referees = referees.substring(0, referees.length - 1);

                var referee = referees.split(', '); // comma space
                referee.each(function() {

                    FB.api('/'+ referee +'/feed', 'post', opts, function(response)
                    {
                        if (!response || response.error)
                        {
                            alert('Posting error occured');
                        }
                        else
                        {
                            alert('Success - Post ID: ' + response.id);
                            $("#send-voucher").hide();
                            $("#voucher-sent").fadeIn('slow');
                        }
                    });
                });
            });
        }
        else
        {
            alert('Not logged in');
        }
    }, { scope : 'publish_stream' });
}; 
```

firebug 报告的错误是`referee.each is not a function`

如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:52:32.037

它需要 jQuery 包装器，改变这个：

```
referee.each(function() { 
```

到：

```
$(referee).each(function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:53:46.853

您只能`each()`在 jQuery 对象上使用。您的`referees`变量是一个字符串数组，因此您需要从基础`$`jQuery 对象调用它并将其作为参数传递，如下所示：

```
$.each(referee, function() {
    // ...
} 
```

或者，您可以将变量包装在 jQuery 对象中，如下所示：

```
$(referee).each(function() {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T10:56:18.590

你必须这样称呼它：

```
$.each(referee, function() { ... }); 
```

jQuery.each() 需要一个集合作为第一个参数，然后是一个回调函数。

# html - 占位符在所有浏览器中都不能正常工作

> ID：10447376
> 
> 赞同：5
> 
> 时间：2012-05-04T10:49:23.730
> 
> 标签：html, css

> **可能重复：**
> [如何在 Firefox 和其他不支持 html5 标签选项的浏览器中获取占位符文本？](https://stackoverflow.com/questions/3429520/how-do-i-get-placeholder-text-in-firefox-and-other-browsers-that-dont-support-t)

我创建了一个登录弹出框，并使用占位符来显示输入字段名称，但在其他浏览器中，例如`IE9`，`IE8`甚至`IE10`没有在输入中显示占位符文本。

我该如何解决这个问题？有没有其他方法可以填写输入字段？

```
<input name="username" type="text" value="" placeholder="Username" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:03:41.273

正如 OEZI 所说，并非所有浏览器都支持它。

试试这个

```
<input name="username" type="text" value="" onfocus="if (this.value == 'Username') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Username';}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:58:59.243

`placeholder`是新的 HTML5 功能的一部分，直到现在所有浏览器都没有完全支持。欲了解更多信息，请查看：

*   [http://caniuse.com/#search=placeholder](http://caniuse.com/#search=placeholder)（更多html5/css3-features：[http](http://caniuse.com/) ://caniuse.com/ ）
*   [http://wufoo.com/html5/attributes/01-placeholder.html](http://wufoo.com/html5/attributes/01-placeholder.html)（更多html5-features：[http](http://wufoo.com/html5/) ://wufoo.com/html5/ ）

**编辑：**
如果你使用 jQuery，有[这个小插件](https://github.com/mathiasbynens/jquery-placeholder)可以添加对所有浏览器的支持，直到 IE6。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:04:08.513

到目前为止，IE8 不支持占位符。您可以使用

```
<input type="text" name="username" onfocus="if(this.value=='Username') this.value='';" onblur="if(this.value=='') this.value='Username';" /> 
```

# javascript - 函数内外的javascript数组

> ID：10447379
> 
> 赞同：0
> 
> 时间：2012-05-04T10:49:30.520
> 
> 标签：javascript

我有一些javascript数组，我在函数中附加并在函数运行后调用（数据库信息是对CouchDB的调用）：

```
$(document).ready(function() {

  my_array = [];

  view_name = db_name+'/farms_by_name'
  $db.view(view_name, {
    success: function(data) {
       console.log(data)
       for (i in data.rows) {
           console.log(data.rows[i]);
           plot_name.push(data.rows[i].value.name);
           my_array.push("0");
           console.log(my_array)
           console.log(my_array.length)
        }
    },
    error: function(e) {
      alert('Error loading from database: ' + e);
    }
  });

  console.log(my_array);
  console.log(my_array.length);

}); 
```

使用 firebug，我看到在函数中正确附加了数组，例如 console.log 返回的单个元素

```
my_array = ["0"]
my_array.length = 1 
```

但是函数之后的console.log（首先出现在firebug日志中）显示：

```
my_array = [ ]
my_array.length = 1 
```

在日志中检查时 my_array 显示：

```
[ ]
0              "0" 
```

谁能向我解释这种行为并解释我应该如何正确附加数组，以便我可以在 db success 函数之外调用长度并正确循环它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:59:03.697

zerkms 是对的：变量正在成功回调函数中进行更改。`$(document).ready`在名为 -say- logAfterSuccess的函数中添加第二个函数

```
function logAfterSuccess()
{
    console.log(my_array);
    console.log(my_array.length);
} 
```

并简单地从成功回调中调用该函数：

```
success: function()
{
    //code goes here
    logAfterSuccess();
} 
```

那应该会给您预期的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:56:06.477

最后两个`console.log`将始终返回 [] 和 0，因为您正在检查回调函数之外的数组，如果您将检查移动到回调函数内部，您应该得到您想要的结果。

例如：

```
$(document).ready(function() {

  my_array = [];

  view_name = db_name+'/farms_by_name'
  $db.view(view_name, {
    success: function(data) {
       console.log(data)
       for (i in data.rows) {
           console.log(data.rows[i]);
           plot_name.push(data.rows[i].value.name);
           my_array.push("0");
           console.log(my_array);
           console.log(my_array.length);
        }
        afterArrayPopulated(my_array);
    },
    error: function(e) {
      alert('Error loading from database: ' + e);
    }
  });
});

function afterArrayPopulated(arr){
  console.log(arr)
  console.log(arr.length)
} 
```

# ruby-on-rails - 通过 HATBM 创建嵌套属性

> ID：10447393
> 
> 赞同：1
> 
> 时间：2012-05-04T10:50:19.900
> 
> 标签：ruby-on-rails, nested-forms

我想通过 HATBM 为我的应用程序创建一个嵌套表单

我的模型是

学习 => has_many :samples

样本 => has_many :expts

Expt => has_one :run

在我的研究中——我的新观点

```
<% form_for @study do |f| %>
    <%= f.label :study_Title %>
    <%= f.text_field :study_title, :size => 20 %><br \>
    <% for sample in Sample.find(:all) %>

        <div>
          <%= check_box_tag "study[sample_ids][]", sample.id, @study.samples.include?(sample) %>
          <%= sample.name %>
        </div>
    <% end %>
    <p><center><%= submit_tag "Next" %></center></p>
<% end %> 
```

在研究控制器中

```
def create
    @study = Study.new(params[:study])
    if current_user.id?
       # Put the current user_id in the study.user_id
        @study.user_id = current_user.id
    end 
    if @study.save
      redirect_to :controller => "samples", :action => "add_sample_details", :method => "post", :id => @study.id
    else
      render :action => "new"
    end 
  end 
```

在示例控制器中的我的 add_sample_details 操作中

```
 def add_sample_details
    @study = Study.find(params[:id])  
    @samples = Sample.find(:all, :joins => :study, :conditions => { :studies => { :id => @study.id } })
  end 
```

我无法创建样本属性来更新其记录，也无法为特定样本创建新的 expt 记录

```
<% form_for @samples do |f| %>
    sample fields
and then 
            <% f.fields_for :expts do |f_expts| %>
            <% end %>
<% end %> 
```

我收到此错误“未定义的方法 `sample_sample_path' for #”

请有人告诉我我在哪里犯了错误。

干杯

# ms-access - 访问查询如果/或条件

> ID：10447398
> 
> 赞同：1
> 
> 时间：2012-05-04T10:50:33.777
> 
> 标签：ms-access

我正在尝试在 Access 的查询设计中编写 OR 语句，但它不起作用！声明如下：

`Duration:If([Status2]="Q","2.5 Hours",IIf([Status2]=WS,"4 Hours", IIf([Status2]=MG,"3 Hours 15 Mins",IIf([Status2]=ID,"3.5 Hours"))))`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:07:05.133

正如 Zaider89 指出的那样，您`I`从第一个`IIf()`.

您还比较`[Status2]`了 4 个不同的值： Q; WS; 镁；ID。您将这些值中的第一个用引号括起来，而不是其他值。这让我怀疑 db 引擎会将未引用的值视为参数，并要求您提供 WS、MG 和 ID 的值。

您的最后一个`IIf()`表达式包含“真实部分”但没有“虚假部分”：

```
IIf([Status2]=ID,"3.5 Hours") 
```

您可以解决这些问题，但我建议您考虑改用[开关功能](http://office.microsoft.com/en-us/access-help/switch-function-HA001228918.aspx)。在您尝试旁边的列中的查询设计网格中的单行上尝试以下操作`IIf()`。

```
Duration:Switch([Status2]="Q","2.5 Hours",
[Status2]="WS","4 Hours",
[Status2]="MG","3 Hours 15 Mins",
[Status2]="ID","3.5 Hours") 
```

这种`Switch()`方法对我来说看起来更好。但是，我认为最好还是创建一个单独的查找表，其中一列用于`[Status2]`映射值，另一列用于映射值。然后将该表加入到您的查询中。创建表后，在查询中使用它很容易，我认为它比使用`Switch()`或嵌套`IIf()`表达式的方法更容易理解。当您需要添加新条件时，扩展也更容易——只需将它们作为行添加到查找表中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:12:34.143

如果那是您访问数据库的直接副本，那么您在开头的 If 上缺少 I。它应该是 IIF 而不是 IF。

# jboss - 请通过 jboss-cli 帮助配置 JBoss 7 “邮件会话”

> ID：10447406
> 
> 赞同：1
> 
> 时间：2012-05-04T10:50:56.497
> 
> 标签：jboss, jboss7.x

我需要通过`jboss-cli`命令行创建 smtp 邮件连接器。到目前为止，我已经设法在配置 xml 中创建`<mail-session>`和`<smtp-server>`节点：

```
/subsystem=mail/mail-session="java:/mail/myMail":add(jndi-name="java:/mail/myMail", from="noreply@acme.com")
/subsystem=mail/mail-session="java:/mail/myMail"/server=smtp:add 
```

以上所有导致配置文件中的以下部分：

```
<!-- default JBoss session with auth data -->
<mail-session jndi-name="java:jboss/mail/Default">
  <smtp-server ssl="true" outbound-socket-binding-ref="mail-smtp">
    <login name="user" password="pass"/>
  </smtp-server>
</mail-session>
<!-- Created mail session -->
<mail-session jndi-name="java:/mail/myMail" from="noreply@acme.com">
  <smtp-server outbound-socket-binding-ref="mail-smtp">
     <!-- no login node -->
  </smtp-server>
</mail-session> 
```

在玩了 GUI 管理控制台后，我发现该`<smtp-server>`节点应该包含`<login name="login" password="pass">`子节点，但我不知道该怎么做，JBoss Admin guide 没有关于这个主题的线索。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T07:48:30.757

此命令为默认会话添加用户名和密码（根据需要在命令中更改会话名称）

```
/subsystem=mail/mail-session=java\:jboss\/mail\/Default/server=smtp/:write-attribute(name=username,value=your-username)

/subsystem=mail/mail-session=java\:jboss\/mail\/Default/server=smtp/:write-attribute(name=password,value=you-password) 
```

# windows-phone-7 - VOIP SIP - 帮助从 PCM 编码到 U-law

> ID：10447408
> 
> 赞同：0
> 
> 时间：2012-05-04T10:51:05.493
> 
> 标签：windows-phone-7, sip, voip, downsampling

我正在开发 VOIP Windows Phone 项目（Windows Phone 的软电话应用程序）。目前，我（Windows phone 软电话）只能接收和听到另一个软电话的声音，只有 ONE-WAY。我可以将我的语音（RTP 数据包）发送到另一个软电话，但它包含完整的噪音。我按照这个[http://www.codeproject.com/Articles/14237/Using-the-G711-standard?msg=2573223#xx2573223xx](http://www.codeproject.com/Articles/14237/Using-the-G711-standard?msg=2573223#xx2573223xx)对 U-law 和 PCM 之间的 RTP 数据包进行编码和解码。解码功能对我很有效，但编码却不行。

我解码 RTP 数据包并以 8000Khz 的采样率播放它（它是 U-law 格式的采样率）。这是我的播放代码：

```
SoundEffect soundEffect = new SoundEffect(buffer, 8000, AudioChannels.Mono);
SoundEffectInstance soundInstance = soundEffect.CreateInstance();
soundInstance.Play(); 
```

关于编码，我使用Windows Phone的麦克风录制语音=>编码为U-Law格式=>放入RTP数据包=>发送。但是这些数据包包含完整的噪音，而另一个软电话（目的地呼叫）只接收噪音和噪音。

麦克风录制数据的格式为：PCM 16 bit - 16KHz。您有什么解决方案可以帮助我解决吗？

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:16:12.797

@Rowland：我使用 WP 的麦克风来捕获数据

```
public Microphone microphone = Microphone.Default;     
private byte[] buffer; 
Queue<byte[]> recordedVoice = new Queue<byte[]>(); 
```

每次获取 320byte

```
microphone.GetData(buffer); 
```

我把它保存到队列中

```
recordedVoice.Enqueue(buffer); 
```

然后我将每一项记录的语音编码为 U-Law 格式（编码函数引用自[http://www.codeproject.com/Articles/14237/Using-the-G711-standard?msg=2573223#xx2573223xx](http://www.codeproject.com/Articles/14237/Using-the-G711-standard?msg=2573223#xx2573223xx)）：

```
byte[] encoded = G711MuLaw.G711MuLawEncode(recordedVoice.Dequeue()); 
```

但它没有正确编码。

@sipwiz：我认为 NAudio 不支持 WP7，因为它是 C# 项目，而不是 Silverlight。

@Rowland & sipwiz：收到你的回复我很高兴，非常感谢。

# android - 如何在android中对齐自定义对话框中心？

> ID：10447410
> 
> 赞同：8
> 
> 时间：2012-05-04T10:51:07.570
> 
> 标签：android, android-alertdialog, customdialog

我正在开发我想将对话框显示为屏幕大小的应用程序。所以我使用了下面的代码。我通过这里得到了解决方案[警报消息没有显示在警报对话框中？](https://stackoverflow.com/questions/10432184/alert-message-is-not-displaying-in-alert-dialog-box)

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
    TextView title = new TextView(this);
    title.setText("DM2");
    title.setBackgroundColor(Color.DKGRAY);
    title.setPadding(10, 10, 10, 10);
    title.setGravity(Gravity.CENTER);
    title.setTextColor(Color.WHITE);
    title.setTextSize(20);

    TextView text = new TextView(this);  
    text.setText("Hello This text");  
    text.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    text.setTextSize(20);        
    text.setGravity(Gravity.CENTER);

    //Creates a linearlayout layout and sets it with initial params
    LinearLayout ll = new LinearLayout(this);
    ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    ll.setGravity(Gravity.CENTER);
    ll.addView(text); 
    builder.setCustomTitle(title);
    builder.setPositiveButton(
            "Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.dismiss();
                }
            }); 

    Dialog d = builder.setView(ll).create();
    //Fills up the entire Screen
    WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
    lp.copyFrom(d.getWindow().getAttributes());
    lp.width = WindowManager.LayoutParams.FILL_PARENT;
    lp.height = WindowManager.LayoutParams.FILL_PARENT;
    d.show();
    d.getWindow().setAttributes(lp); 
```

但我希望对话框以居中对齐的方式出现。现在它显示在窗口顶部。我尝试使用 lp.garvity = Gravity.center，但没有奏效。如果设备方向发生变化，我需要再按一次确定按钮来关闭对话框。如何解决这个问题？

在此先感谢 Pushpa

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-02T22:26:41.197

我有点晚了，但迟到总比永远好 :-) 你可以使用下面的代码：（我也看到了[这里](https://stackoverflow.com/a/10412653/1918752)）

```
dialog = new Dialog(activity, android.R.style.Theme_Translucent_NoTitleBar);

dialog.setContentView(R.layout.activity_upload_photo_dialog);

Window window = dialog.getWindow();
window.setLayout(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
window.setGravity(Gravity.CENTER);

//The below code is EXTRA - to dim the parent view by 70%
LayoutParams lp = window.getAttributes();
lp.dimAmount = 0.7f;
lp.flags = LayoutParams.FLAG_DIM_BEHIND;
dialog.getWindow().setAttributes(lp);
//Show the dialog
dialog.show(); 
```

希望我帮助...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T11:12:05.987

这对我有用：

```
lp.height = WindowManager.LayoutParams.WRAP_CONTENT; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T10:56:50.580

尝试使用 android:layout_gravity="center" 而不是 android:gravity="center"... 这可能对您有帮助..

```
android:layout_gravity="center" 
```

或者

你可以试试这个。。

```
 <activity android:theme="@android:style/Theme.Dialog"
        android:name=".Splash">
    </activity> 
```

> 编写完整的 xml 代码并制作简单的 Activty 并在 AndroidManifest.xml 中添加一个属性，当您将 Activity 注册到 AndroidManifest.xml 时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T11:14:13.040

也许这有效：

```
WindowManager.LayoutParams WMLP = dialog.getWindow().getAttributes();

WMLP.gravity = Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL

dialog.getWindow().setAttributes(WMLP); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T05:05:10.823

**注意**：- 这是用于“**自定义布局**”... :)

我也在为此苦苦挣扎，经过几个小时的苦苦挣扎，我得出了这个结果

早些时候我是这样创建对话的：-

```
 final Dialog dialog = new Dialog(PopupforeditActivity.this); 
```

添加样式“No titleBar”后，它开始按照我创建的方式获取布局。

为此，您必须使用参数“fillParent”创建布局并创建这样的对话框

```
 final Dialog dialog = new Dialog(PopupforeditActivity.this,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
dialog.setContentView(R.layout.dialog_billing_cart);
        dialog.setCancelable(true); 
```

以上是编码部分

您`Layout`部分地将整个布局放入`RelativeLayout`

并提供您的布局属性`android:layout_centerInParent="true"`

前任：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/transparent" >

<!--Your Layout-->

  <ScrollView
        android:id="@+id/scrlView_FormHolder"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:layout_centerInParent="true"

        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp" >
</ScrollView>

</RelativeLayout> 
```

如果您不想错过“标题”，您可以在自定义布局中将其作为 TextView ..

希望它会有所帮助..因为它帮助了我:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-29T04:41:58.257

我用这种风格在中心 android 中显示对话框

```
<style name="CustomDialogue" parent="Theme.MaterialComponents.Dialog">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:layout_gravity">center</item>
    <item name="android:minWidth" type="dimen">600dp</item>
    <item name="android:layout_margin" type="dimen">8dp</item>
</style> 
```

*   我使用 android:layout_gravity 在中心显示对话框。
*   设置 minWidth 是因为否则对话框看起来更窄。
*   layout_margin 已设置，因此在较小的屏幕中对话框周围有足够的边距。

## 在 android:layout_gravity="center" 之前

[![前](../Images/f72c1bd5c8950c40fc786d4ff0ffcbd6.png)](https://i.stack.imgur.com/dcxdx.png)

## 在 android:layout_gravity="center" 之后

[![后](../Images/c55f161a50fd0bb3b7f3e4b925e3daa8.png)](https://i.stack.imgur.com/OPVGn.png)

# objective-c - 用于操作照片叠加层的 API

> ID：10447414
> 
> 赞同：0
> 
> 时间：2012-05-04T10:51:31.237
> 
> 标签：objective-c, ios, ipad, api, image-processing

我正在制作一个 iPad 应用程序并且我有这个图像：![蛋！](../Images/cd83293aab0e4c08d2cb6ffdb09cf811.png)我想为用户提供一个选项，用他们自己图书馆中的照片替换鸡蛋的脸（假设我有一个头部有空白区域的鸡蛋）。我想知道是否有合适的 api 用于操作/覆盖我可以插入的照片或图像？非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:34:59.063

如果您想按照您所描述的那样进行基本的图像操作，您将需要查看 CoreImage 库。

首先，您将从用户库中获取图像 - 您将以模态方式呈现 UIImagePicker（在最简单的场景中）。这将使您返回所选图像。

然后您将继续识别人脸 - CoreImage 为您提供 CIDetector，它可用于获取包含人脸的矩形。然后，您可能会从脸部周围的矩形中抓取图像。

然后你拍摄面部图像，并将其放在你的蒙面蛋后面。

# asp.net - ASP 数据库连接问题

> ID：10447420
> 
> 赞同：0
> 
> 时间：2012-05-04T10:51:51.530
> 
> 标签：asp.net, database, database-connection, connection-string, webforms

我正在寻找很多在线连接到 MS SQL 数据库的方法。我在 web.config 中使用连接字符串。它对我们想要的效果非常好，看起来像这样：

```
<connectionStrings>
    <add name="xxx" 
         connectionString="SERVER=xxx;UID=xxx;Trusted_Connection=Yes;DATABASE=xxx;"
      providerName="xxx" />
</connectionStrings> 
```

这是最好的连接方式。然后我将它与一个主要使用gridview的asp web表单应用程序一起使用

```
 <asp:SqlDataSource ID="MatchDataSource" Runat="server"

            SelectCommand="SELECT * FROM [xxx].[Matcxxxh]"
            UpdateCommand="UPDATE [xxx].[Matxxxch] SET [xxx] = 
              @xxx, [xxx] = @xxx, [xxx] = 
              @xxx WHERE x=@xxxAnd x=@xxx"
            ConnectionString="<%$ ConnectionStrings:xxx %>">
            <UpdateParameters>
                <asp:Parameter Type="String" Name="CSISN"/>
                <asp:Parameter Type="String"  Name="ProcName"/>

            </UpdateParameters>
        </asp:SqlDataSource>

        <asp:GridView ID="GridView1" Runat="server" 
            DataSourceID="MatchDataSource" Width="100%">
            <RowStyle BackColor="white" ForeColor="black" Font-Italic="false" BorderColor="Black" />

            <Columns>

                <asp:TemplateField SortExpression="xxx" HeaderText="xxx">
                    <EditItemTemplate>
                        <asp:TextBox ID="editxxx" Runat="server" Text='<%# Bind("xxx") %>' 
                            MaxLength="15" ToolTip="Enter CSI SN"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" Runat="server" ErrorMessage="You must provide a xxx." ControlToValidate="editxxx">*</asp:RequiredFieldValidator>
                    </EditItemTemplate>
                    <ItemTemplate><asp:Label Runat="server" Text='<%# Bind("CSISN") %>' ID="Label1"></asp:Label></ItemTemplate>
                </asp:TemplateField> 
```

我的问题是

1.  我这样做对吗？
2.  谁能给我指出一个合适的教程来展示最佳实践？
3.  脚本完成运行后如何在最后关闭连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:57:16.790

1.  这是从配置中使用连接字符串的众多方法*之一。*没有什么问题。看起来不错。

2.  不，因为这是一个主观的事情，而不是我们在这里回答的那种事情。

3.  脚本完成后连接将关闭。你不需要做任何事情（`SqlDataSource`照顾所有的细节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:43:36.123

我反对使用 SqlDataSource。

是的，它在该页面上运行良好。但是，如果调用需要在另一个页面上使用，您最终需要复制和粘贴内容以使其在那里工作。

我建议创建某种类来调用数据库并将其作为 List 或 IEnumerable 返回。然后使用该类，您可以在后面的代码中分配数据源。

下面是一个使用实体框架查询数据的小例子。

* * *

数据访问类

```
public static class DataAccess
{
    public static List<Section> GetDataFromDatabase()
    {
        List<Section> recordList;
        using (CustomEntities context = new CustomEntities())
        {

            IQueryable<Section> query = from records in context.Records
                                                 select sections;
            recordList= query.ToList<Record>();
        }
        return recordList;
    }
} 
```

* * *

代码隐藏使用

```
 private void BindLists()
    {
        // Get the data
        List<Section> theData = DataAccess.GetDataFromDatabase();

        // Assign the data source
        gridView.DataSource = theData;

        // Bind the grid view
        gridView.DataBind();
    } 
```

* * *

这种方式在您的应用程序中提供了更多的重用，并使更改更容易。

# tomcat - 在 windows 中编辑 built.xml 以获取 tomcat 的路径位置

> ID：10447422
> 
> 赞同：0
> 
> 时间：2012-05-04T10:52:02.017
> 
> 标签：tomcat, struts

我正在使用 Windows，试图将我的 Tomcat 的路径设置为`C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22`in `built.xml`。请告诉我如何指定。

```
<taskdef name="reload" classname="org.apache.catalina.ant.ReloadTask">
    <classpath>

        <path location="${appserver.home}/server/lib/catalina-ant.jar"/>
    </classpath>
</taskdef> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:28:41.753

两种方式：

1.  将属性添加到您的 build.xml

2.  带参数运行ant

    ant -Dappserver.home="c:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22" 重新加载

# javascript - 在 RegEx 中创建第 n 级嵌套模式的算法

> ID：10447423
> 
> 赞同：3
> 
> 时间：2012-05-04T10:52:07.683
> 
> 标签：javascript, regex, algorithm, recursion

如[可以使用正则表达式匹配嵌套模式中所述吗？](https://stackoverflow.com/q/133601/1176601)，不可能创建正则表达式来匹配任意嵌套模式。但是是否有可能创建一个算法来生成第 n 级“嵌套”的正则表达式？

基本上，我想替换`trim(whatever)`为`rtrim(ltrim(whatever))`

我设法手动创建了 3 个级别（javascript 语法）：

```
level[1] = /\(([^()]*)\)/g
level[2] = /\(((?:[^()]*\([^()]*\))*[^()]*)\)/g
level[3] = /\(((?:(?:(?:[^()]*\([^()]*\))*[^()]*)*\((?:(?:[^()]*\([^()]*\))*[^()]*)*\))*[^()]*)\)/g 
```

以下是一些测试数据：

```
1st(ddd) + 1st(ddd)
2nd(dd(d))
3rd(a(b) + (cd(h) + d(dfas) + zzz))
4th(a(b(c(d))))
8th(a(b(c(d(e(f(g())))))) 
```

我知道在每个级别都`[^()]*`需要用可以包含括号的非捕获组替换，但我不确定如何**概括第 n 级的算法**......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:08:39.540

您可以从理论上更深入地考虑它：嵌套`n`深度的括号匹配只是围绕匹配`n-1`深度或更小（至少有一个`n-1`深度）的括号。

我们可以给出正则表达式的递归定义。让`X[n]`成为精确嵌套`n`级别`Y[n]`的正则表达式，并成为包含括号的字符串的正则表达式，其中任何级别的嵌套都可以达到`n`级别，所以：

```
X[n] = \( (Y[n-2] X[n-1])+ Y[n-2] \)

Y[n] = [^()]* ( \( Y[n-1] \) [^()]* )* 
```

with `Y[0] = X[0] = [^()]*`(无嵌套) and `X[1] = \([^()]*\)`. （我不关心非捕获组等的细节，这些空间只是为了便于阅读。）

基于此编写算法应该很容易。

* * *

这些新的（较少相互递归的）定义中的正则表达式变得更长更慢（它们是多项式而不是指数）。

设`l[n]`为 的长度`X[n]`，`L[n]`为 的长度`Y[n]`，则（常数项只是每个项中的硬编码字符）：

```
L[n] = 19 + L[n-1] = 19*n + L[0] = 19*n + 6

l[n] = 3 + L[n-2] + l[n-1] + 2 + L[n-2] + 2
     = 7 + 2 * L[n-2] + l[n-1]
     = -57 + 38 * n + l[n-1] 
```

`l[0]`和具有适当的初始条件`l[1]`。这种形式的递推关系有二次解，所以只有`O(n^2)`. 好多了。

（对于其他人，我之前有一个 is 的定义`Y[n]`；`Y[n] = Y[n-1] | X[n]`这个额外的递归意味着`X`正则表达式的长度是`O(2.41^n)`，这很糟糕。）

（新的定义`Y`是一个诱人的暗示，甚至可能存在一种`X`线性的写作方式`n`。不过我不知道，我感觉对`X`精确长度的额外限制意味着这是不可能的。）

* * *

以下是一些计算上述正则表达式的 Python 代码，您可以将其翻译成 javascript 而不会有太多麻烦。

```
# abbreviation for the No Parenthesis regex
np = "[^()]*"

# compute Y[n] from Y[n-1]
def next_y(y_n1):
    return np + "(?:\(" + y_n1 + "\)" + np + ")*"

# compute X[n] from X[n-1] and Y[n-2]
def next_x(x_n1, y_n2):
    return "\((?:" + y_n2 + x_n1 + ")+" + y_n2 + "\)"

# compute [X[n], Y[n], Y[n-1]]
# (to allow us to make just one recursive call at each step)
def XY(n):
    if n == 0:
        return [np, # X[0]
                np, # Y[0]
                ""] # unused
    elif n == 1:
        return ["\([^()]*\)", # X[1]
                next_y(np),   # Y[1]
                np]           # Y[0]

    x_n1, y_n1, y_n2 = XY(n-1) # X[n-1], Y[n-1], Y[n-2]

    return [next_x(x_n1, y_n2), # X[n]
            next_y(y_n1),       # Y[n]
            y_n1]               # Y[n-1]

# wrapper around XY to compute just X[n]
def X(n):
    return XY(n)[0]

# wrapper around XY to compute just Y[n]
def Y(n):
    return XY(n)[1] 
```

# c++ - 在 VS2010 中使用 Boost.Pool - 链接器错误

> ID：10447424
> 
> 赞同：4
> 
> 时间：2012-05-04T10:52:12.597
> 
> 标签：c++, boost

[Boost.Pool 文档](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/boost_pool/pool/installation.html)说（强调我的）：

> **Boost Pool 库是一个只有头文件的库。**这意味着没有要构建的 .lib、.dll 或 .so；只需将 Boost 目录添加到编译器的包含文件路径，就可以了！

但是当我尝试在 VS2010 SP1 中编译这样的代码时：

```
#include <string>
#include <vector>

#include <boost\pool\pool_alloc.hpp>

int main()
{
    typedef std::basic_string<wchar_t, std::char_traits<wchar_t>, 
        boost::pool_allocator<wchar_t>> PoolString;

    std::vector<PoolString> vec;
    for (int i = 0; i < 100; i++)
    {
        PoolString s(L"Some test string. ABCDEF.");
        vec.push_back(s);
    }

    // Release pool memory
    boost::singleton_pool<boost::pool_allocator_tag, sizeof(wchar_t)>::release_memory();

    return 0;
} 
```

我得到一个链接器错误：

> 错误 LNK1104：无法打开文件“libboost_thread-vc100-mt-gd-1_49.lib”

Boost.Pool 文档不正确吗？我在这里想念什么？如何使用 Boost.Pool？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:11:01.600

`boost::singleton_pool`正在使用位于 中的默认互斥锁实现，`boost::thread`而*不仅仅是*标头。

有关如何删除依赖项的信息，请参阅下面引用的[singleton_pool 标头：](http://www.boost.org/doc/libs/1_49_0/boost/pool/singleton_pool.hpp)

> **互斥体**此类是用于保护对底层池的同时访问的互斥锁类型。可以是任何 Boost.Thread Mutex 类型或 boost::details::pool::null_mutex。它被暴露出来，以便用户可以正常声明一些单例池（即同步），但出于效率原因，一些没有同步的单例池（通过指定 boost::details::pool::null_mutex）。成员 typedef mutex 公开此模板参数的值。此参数的默认值为 boost::details::pool::default_mutex ，它是 boost::details::pool::null_mutex 的同义词（当编译器中关闭线程支持时（因此未设置 BOOST_HAS_THREADS），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:20:44.713

在 boost/config/user.hpp:261 中有

```
//
// Turn threading support off if BOOST_DISABLE_THREADS is defined:
//
#if defined(BOOST_DISABLE_THREADS) && defined(BOOST_HAS_THREADS)
#  undef BOOST_HAS_THREADS
#endif 
```

我想如果你在包含它之前#define BOOST_DISABLE_THREADS 会解决它。在您必须为您的用户管理此选项到您的构建系统之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:09:57.887

从我看到的 boost::pool 对线程库的依赖被添加到 boost 1_48 中（参见[1.47](http://www.boost.org/doc/libs/1_47_0/boost/pool/detail/mutex.hpp)和[1.48](http://www.boost.org/doc/libs/1_48_0/boost/pool/detail/mutex.hpp)

我认为这是不幸的，一个更好的决定是只使用标头[轻量级互斥锁](http://www.boost.org/doc/libs/1_49_0/boost/smart_ptr/detail/lightweight_mutex.hpp)

您可以更改 pool\detail\mutex.hpp 但与线程库链接可能更简单，尤其是在您使用其他库时。

# sql - 从 SQL Server 中的 xml，获取下一个兄弟值

> ID：10447433
> 
> 赞同：3
> 
> 时间：2012-05-04T10:53:09.040
> 
> 标签：sql, sql-server, xml

我有一个看起来像这样的表：

```
CREATE TABLE CustomerXmlData
(CustomerId int,
CustomerData xml) 
```

CustomerId 链接到主客户表，CustomerData 是一个看起来像这样的 xml 文档

```
<Person>
  <Product>
    <Name>ABC</Name>
    <Value>500</Value>
  </Product>
  <Product>
    <Name>XYZ</Name>
    <Value>600</Value>
  </Product>
</Person> 
```

有几十万这样的行。在伪代码中，我想做的是“找到where = 'XYZ' 的平均值” `Value`。`Product``Name`

我知道如何根据元素属性或基于文档中唯一的父级来获取值，但在这种情况下，这些都没有任何用处。我找不到任何可以让我找到`Name`我想要的然后获得下一个兄弟姐妹的值的东西。

我可以使用`FOR XML`和创建一个边缘表，但是我是否必须用光标循环遍历它？我希望有一个更有效的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:44:49.057

> 我找不到任何可以让我找到我想要的名称然后获取下一个兄弟的值的东西。

```
declare @Name varchar(10)
set @Name = 'XYZ'

select N.value('.', 'int') as Value    
from CustomerXmlData
  cross apply CustomerData.nodes
    ('/Person/Product[Name = sql:variable("@Name")]/Value') as T(N) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:11:09.123

试试这个（编辑为按名称过滤）：

```
DECLARE @Name VARCHAR(50)
SET @Name = 'XYZ'

SELECT Name, AVG(Value) 
FROM (
SELECT 
    c.value('Name[1]', 'VARCHAR(50)') AS Name
    , c.value('Value[1]', 'DECIMAL') AS Value
FROM CustomerXmlData
CROSS APPLY CustomerData.nodes('//Product[Name = sql:variable("@Name")]') AS t(c)
) T
GROUP BY Name 
```

# sql - Postgresql 查询 - 按子查询结果排序

> ID：10447443
> 
> 赞同：8
> 
> 时间：2012-05-04T10:54:04.290
> 
> 标签：sql, postgresql, join, subquery

我有一个查询，我想选择所有喜欢一组给定艺术家的用户。还有一些其他关于国家/地区等的 WHERE 标准。这是架构的样子。

```
 users                     favourite_artists             artists

+----------+------------+    +-----------+------------+    +--------+--------+
|    id    |  country   |    |  user_id  |  artist_id |    |  id    |  name  |
+----------+------------+    +-----------+------------+    +--------+--------+
|     1    |     gb     |    |     1     |      6     |    |   1    |  Muse  |
|     2    |     gb     |    |     1     |      5     |    |   2    |  RATM  |
|     3    |     us     |    |     1     |      3     |    |   3    |  ABBA  | 
|     4    |     us     |    |     2     |      3     |    |   4    |   U2   |
+----------+------------+    +-----------+------------+    +--------+--------+ 
```

我想按他们喜欢的艺术家的数量来排序。我还想包括不喜欢任何艺术家但符合 WHERE 标准的用户。预期的结果集看起来像。

```
+--------+---------------+----------------+
|   id   |    country    |   match_count  |
+--------+---------------+----------------+
|    6   |      gb       |       4        |
|    9   |      gb       |       4        |
|    2   |      gb       |       3        |
|    1   |      gb       |       2        |
|    5   |      gb       |       0        |
|    4   |      gb       |       0        |
+--------+---------------+----------------+ 
```

我一直在尝试使用子查询来获取 match_count 并通过它进行排序，但它的执行速度很慢，所以我认为必须有更好的方法。

```
 SELECT users.id, users.country
   (SELECT COUNT(*) FROM favourite_artists 
    WHERE user_id = users.id AND artist_id IN (1,3,4,9)) AS match_count        
   FROM "users" 
   WHERE users.country = 'gb'
   ORDER BY match_count DESC; 
```

我正在使用 Postgresql 9.0.7。有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T11:04:43.917

您的查询正在为 中的每一行执行一个子查询`users`。这样的查询被称为“*相关子查询*”，它们的性能很糟糕，这是可以理解的。

相反，您想要加入：

```
SELECT users.id, users.country, count(artist_id) as match_count
FROM users
LEFT JOIN favourite_artists ON user_id = users.id AND artist_id IN (1,3,4,9)
WHERE users.country = 'gb'
GROUP BY 1, 2
ORDER BY 3 DESC; 
```

`favourite_artists(user_id)`假设您有一个索引，或者更好的是一个[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html) ，这个查询将更有效地获得连接行`favourite_artists(user_id, artist_id)`。

# visual-studio - 如何添加对 Visual Studio .cu 项目的引用？

> ID：10447445
> 
> 赞同：0
> 
> 时间：2012-05-04T10:54:12.617
> 
> 标签：visual-studio, dll, cuda

我正在尝试在我的`.cu`项目中使用 ArrayFire 库。引用对话框似乎仅适用于 CLR 项目。

ArrayFire 自己的文档非常少，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:59:35.480

选择您的项目并单击属性

选择 C/C++ --> 常规 --> 将以下内容添加到“其他包含目录” $(AF_PATH)\include;

选择链接器 --> 常规 --> 将以下内容添加到“附加库目录”$(AF_PATH)\lib;

选择链接器->输入->将以下内容添加到“附加依赖项” libaf.lib;libafGFX.lib;

请记住，许可证文件必须位于 Visual Studio 2010 的项目文件夹中，或者您需要有 Internet 连接才能使用 ArraFire

# asp.net - 使用 Groupby 从 mySql 表中检索行

> ID：10447446
> 
> 赞同：1
> 
> 时间：2012-05-04T10:54:19.423
> 
> 标签：asp.net, mysql, sql

我有一张桌子

![桌子](../Images/070efb7227db7fa52f4ca74e2078f809.png)

我正在使用以下查询

```
select max(dblVersion),sName,fCompleted,ixLastModifiedBy,dtCreatedAt,dtLastModifiedAt,fStatus from tblechecklisttemplateversion group by ixTemplate 
```

我得到下表作为输出 ![表2](../Images/bd3e7b8fdd41652e7ea57cf1f21f535b.png)

其他列的行值不对应dblVersion列..如何显示对应的行值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:10:40.090

试试这个

```
SELECT 
   a.dblVersion,
   a.sName,
   a.fCompleted,
   a.ixLastModifiedBy,
   a.dtCreatedAt,
   a.dtLastModifiedAt,
   a.fStatus 
FROM 
   tblechecklisttemplateversion a
JOIN (
    SELECT 
        ixTemplate,
        max(dblVersion) as dblVersion 
    FROM 
        tblechecklisttemplateversion 
    GROUP BY 
        ixTemplate) as b
ON 
    a.ixTemplate=b.ixTemplate and a.dblVersion=b.dblVersion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:05:04.100

这可能会帮助你..

[MySQL - 在选择时获取行号](https://stackoverflow.com/questions/2520357/mysql-get-row-number-on-select)

更改查询 -

```
 SELECT 0 INTO @x;
  select (@x:=@x+1) as  
  rownumber,max(dblVersion),sName,fCompleted,ixLastModifiedBy,dtCreatedAt,
  dtLastModifiedAt,fStatus 
  from tblechecklisttemplateversion group by ixTemplate 
```

# solr - 分组在 solr 中不起作用

> ID：10447450
> 
> 赞同：1
> 
> 时间：2012-05-04T10:54:45.393
> 
> 标签：solr, solrj, fieldcollapsing

我已经安装并配置了带有 tomcat 容器的 solr 3.6.0。我已经创建了 solr 示例文档的索引。我想对此应用分组功能。我已经根据以下文档应用了分组查询：[http](http://wiki.apache.org/solr/FieldCollapsing) ://wiki.apache.org/solr/FieldCollapsing 并且我没有看到字段折叠。我的意思是我看到了结果，但没有看到分组。我的理解是它应该工作。我已经在`solrconfig.xml`.

```
<searchComponent name="query" class="org.apache.solr.handler.component.CollapseComponent" /> 
```

在我的 solr home 中，所有字段都被索引和存储。

我看不出我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T17:04:12.407

您不需要在`solrconfig.xml`. 如果您使用的是 3.6，则您需要的分组功能是标准的。

简单地：

*   删除您添加到 solrconfig.xml 的行并重新启动 Solr。
*   使用附加参数运行查询`group=true&group.field=group_field`

（确保`group_field`您使用的在您的架构中被索引）

# c - 如何使用 ICU4C 规范化字符串？

> ID：10447452
> 
> 赞同：1
> 
> 时间：2012-05-04T10:55:02.423
> 
> 标签：c, unicode, icu, normalize

我发现 ICU 文档有点挑战性。

我的问题是：如何使用 ICU4C 规范化字符串？

我正在查看 unorm2_normalize，但是如果缓冲区不够大怎么办？我以前怎么会知道这个？自然，我想规范化整个字符串。

谢谢！:>

PS这里是该功能的API文档：http: [//icu-project.org/apiref/icu4c/unorm2_8h.html#a0a596802db767da410b4b04cb75cbc53](http://icu-project.org/apiref/icu4c/unorm2_8h.html#a0a596802db767da410b4b04cb75cbc53)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:05:59.097

您会从 pErrorCode 参数中的所有这些函数调用中获得错误代码。这就是您调用此类函数的方式：

```
UErrorCode error = U_ZERO_ERROR;
unorm2_normalize( ... &error );
....
if( !U_SUCCESS( error ) )
{
    // handle error...
} 
```

以下是错误代码：http: [//icu-project.org/apiref/icu4c/utypes_8h.html#a3343c1c8a8377277046774691c98d78c](http://icu-project.org/apiref/icu4c/utypes_8h.html#a3343c1c8a8377277046774691c98d78c)

在您的情况下，您可能想要执行以下操作：

```
if( error == U_STRING_NOT_TERMINATED_WARNING
   || error == U_BUFFER_OVERFLOW_ERROR )
{
    // enlarge the buffer...
} 
```

# iphone - Array 变化时自动更新 UITableView

> ID：10447456
> 
> 赞同：0
> 
> 时间：2012-05-04T10:55:28.413
> 
> 标签：iphone, ios, arrays, uitableview, nsmutablearray

我有一个包含 UITableView 的视图控制器，它使用 NSMutableArray 通过通常的 UITableViewDelegate 和 UITableViewDataSource 方法确定其内容。

过去，我使用 NSFetchedResults 控制器来更新 TableView，因为它的查询结果发生了变化。在这种情况下，我想在将项目添加到数组中/从数组中删除时适当地更新 UITableView。

我该如何处理？我是否应该使用 addItem/removeItem 方法将 NSMutableArray 包装在模型类中，这些方法使用委托或通知来触发 UITableView 上的 reloadData？还是有更优雅的解决方案？

数组中最多有 20 个项目，因此性能不是什么大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:12:29.870

警告：**非 ARC 示例**

您可以设置您的 tableview 用作属性的数组

```
//.h

..... {

    NSArray* array_;

}

@property (nonatomic, retain) NSArray* array;

//.m 
```

合成数组

```
@synthesize array = array_; 
```

当数组更改时我们很感兴趣，因此请覆盖 setter 方法

```
-(void)setArray:(NSArray*)array {
    if (array_ != array) {
        [array_ release];
        array_ = [array retain];
        [self.tableview reloadData];
    }
 } 
```

然后每当你修改你的tableview数据时，`array:`在修改数据的最后。

```
self.array = newArray; 
```

由于它是一个属性，外部类/视图将能够修改数组并且表将更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:12:28.970

似乎 NSArrayController 是我想要的，但它在 iOS 中不可用，所以看起来 KVO 是我最好的选择。

# javascript - 用对话框连接 dgrid

> ID：10447458
> 
> 赞同：0
> 
> 时间：2012-05-04T10:55:42.107
> 
> 标签：javascript, dojo, event-handling, dgrid

嗨，这是我的 dGrid html 的代码：

```
 <table id="Assign_Segments" class="dGrid" 
    dojoType="dgrid.GridFromHtml" style="width:700px">
            <tbody>
                <tr>
                    <th data-dgrid-column="{field:'InputCell', sortable:true}">
    <bean:message key="IDD_POPSEG_PAGE.IDC_LBL_INPUTCELL" bundle="flowchart"/>
                    </th>
                    <th data-dgrid-column="dgrid.Editor({field:'Segment', 
    sortable:false, widgetArgs: segmentSelectOptions}, dijit.form.Select, 'click')">
  <bean:message key="IDD_POPSEG_PAGE.IDC_LBL_SEGNAME" bundle="flowchart"/></th>
                </tr>
            </tbody>
     </table> 
```

我已经使用以下方法将它们连接起来：

```
dojo.global.segmentSelectOptions = function(object){

    var opts = [{
        'label': 'seg1',
        'value': 'seg1'
    }, {
        'label':'New Segment...',
        'value':'new'
    }, {
        'label': 'seg2',
        'value': 'seg2'
    }];

    return { onChange: function(newValue){
        if(newValue=='new'){
            var dlg =  dijit.getWidget('CreateFolder','dijit.Dialog');
            dlg.show();

        }
    }, 
    class: "fullWidthWidget", 
    options: opts};
}; 
```

如您所见，此代码打开一个对话框。现在我想访问`dgrid`我在对话框中按下特定按钮时选择的单元格，并根据对话框中的输入更改单元格的值。如何从该功能访问单元格？问题是它可以是 dgrid 中的任何单元格，并且他们没有 id 可以使用`dijit.byId();`

请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:40:32.280

解决方案是从对话框的 hide() 向您更改网格的函数提供回调。但是，您需要在使用商店的 put() 语句之前使用此行：

```
grid.dirty = {}; 
```

# java - 为什么不显示实时输出到 JTextArea？

> ID：10447459
> 
> 赞同：1
> 
> 时间：2012-05-04T10:55:42.067
> 
> 标签：java, swing, console, jtextarea

我使用 JTextArea 来显示解压缩文件的状态。但由于某种原因，它不显示附加的文本。 **任何人都可以提出解决方案吗？**

```
public class UnzipFile extends Thread{
private static FtpTabPanel panel;
private File archive,outputDir;

public UnzipFile(File archive, File outputDir, FtpTabPanel panel) {
    UnzipFile.panel = panel;
    this.archive = archive;
    this.outputDir = outputDir;
}

@Override
public void run() {
    super.run();
    unzipArchive();
}

public void unzipArchive() {
    try {
        ZipFile zipfile = new ZipFile(archive);
        for (Enumeration e = zipfile.entries(); e.hasMoreElements(); ) {
            ZipEntry entry = (ZipEntry) e.nextElement();
            unzipEntry(zipfile, entry, outputDir);
        }
        panel.statusTextArea.append(String.valueOf(System.currentTimeMillis()));

    } catch (Exception e) {
        OeExceptionDialog.show(e);
    }
}

private void unzipEntry(ZipFile zipfile, final ZipEntry entry, File outputDir)  {
    if (entry.isDirectory()) {
        createDir(new File(outputDir, entry.getName()));
        return;
    }

    File outputFile = new File(outputDir, entry.getName());
    if (!outputFile.getParentFile().exists()){
        createDir(outputFile.getParentFile());
    }

    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            panel.statusTextArea.append("Extracting: " + entry + "\n");
        }
    });

    try {
    BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
    BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));
    IOUtils.copy(inputStream, outputStream);
    outputStream.close();
    inputStream.close();    
    }catch (IOException io){
        OeExceptionDialog.show(io);
    }catch (NullPointerException n){
        OeExceptionDialog.show(n);
    }catch (ArithmeticException a){
        OeExceptionDialog.show(a);
    }
}
} 
```

**在下面的代码中，我使用 SwingWorkers 但它仅从 zip 文件中解压缩一项，并且 jtextArea 中没有任何内容**

```
public class UnzipWorkers extends SwingWorker<String,Void> {
private WebTextArea statusTextArea;
private File archive,outputDir;

public UnzipWorkers(WebTextArea statusTextArea,File archive,File outputDir) {
    this.archive=archive;
    this.outputDir=outputDir;
    this.statusTextArea = statusTextArea;
}

@Override
protected String doInBackground() throws Exception {
        statusTextArea.append(String.valueOf(System.currentTimeMillis()));
        try {
            ZipFile zipfile = new ZipFile(archive);
            for (Enumeration e = zipfile.entries(); e.hasMoreElements(); ) {
                ZipEntry entry = (ZipEntry) e.nextElement();
                String status = unzipEntry(zipfile, entry, outputDir);
                return status;
            }
        } catch (Exception e) {
            OeExceptionDialog.show(e);
        }

    return null;  
}

@Override
protected void done() {
    super.done();
    try {
        statusTextArea.append( get() + "\n");
        FileTreePanel.btnRefresh.doClick();
    } catch (InterruptedException e) {
        e.printStackTrace();  
    } catch (ExecutionException e) {
        e.printStackTrace(); 
    }
}

private String unzipEntry(ZipFile zipfile, final ZipEntry entry, File outputDir)  {
    String success = "Extracted failed: "+ entry + "\n";
    if (entry.isDirectory()) {
        createDir(new File(outputDir, entry.getName()));
    }

    File outputFile = new File(outputDir, entry.getName());
    if (!outputFile.getParentFile().exists()){
        createDir(outputFile.getParentFile());
    }
    try {
        BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
        BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));
        IOUtils.copy(inputStream, outputStream);
        outputStream.close();
        inputStream.close();
        success="Extracted successfully: " + entry + "\n";
    }catch (IOException io){
        OeExceptionDialog.show(io);
    }catch (NullPointerException n){
        OeExceptionDialog.show(n);
    }catch (ArithmeticException a){
        OeExceptionDialog.show(a);
    }
    return success;
}

private void createDir(File dir) {
    if (!dir.exists()) {
        try {
            dir.mkdirs();
        } catch (RuntimeException re) {
            OeExceptionDialog.show(re);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:37:35.560

从这一行来看：

```
panel.statusTextArea.append(String.valueOf(System.currentTimeMillis())); 
```

你在 EDT 上运行你的代码，否则你会得到一个 IllegalThreadAccess 异常。因此，实际上，您的整个提取过程是作为单个事件的处理完成的。您更新 TextArea 的请求只是被推送到事件队列并在那里等待，直到您完成“处理”触发提取代码的事件。

您必须在专用线程上运行代码（使用 SwingWorker）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:03:41.697

您是否尝试过移动

```
panel.statusTextArea.append(String.valueOf(System.currentTimeMillis())); 
```

在循环内部？

# cakephp - CakePHP 路由 - 参数作为动作

> ID：10447461
> 
> 赞同：0
> 
> 时间：2012-05-04T10:55:42.857
> 
> 标签：cakephp, routing

我的 CakePHP 路由有问题，而且食谱并没有真正帮助我。

我试图将参数路由为操作的扩展。如果不为我的每个操作手动输入路线，我怎么能做到这一点？

例如：
“users/settings/general”到 UsersController::settings_general()
“users/settings/privacy”到 UsersController::settings_privacy()
等等

或者我应该在设置操作中检查给出的参数并从控制器调用它？像这样的东西

`<?php
..
$sub_action = $this->request->params[0]
$this->settings_$subaction();
?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:07:05.700

如果不编写自定义路由类，我认为这是不可能的。阅读这篇文章如何使用和编写自己的路由类：http: [//mark-story.com/posts/view/using-custom-route-classes-in-cakephp](http://mark-story.com/posts/view/using-custom-route-classes-in-cakephp)

我建议您只为每个操作声明一条直接路线。或者你会有数千个这样的动作？

您还可以尝试将所有用户/设置/* 路由到单个操作`UsersController::settings()`并在那里获取参数并调用`$this->setAction('settings' . $param);`参见[http://api20.cakephp.org/class/controller#method-ControllersetAction](http://api20.cakephp.org/class/controller#method-ControllersetAction)

# sql-server-2008 - 在哪里随机订购结果集 - 在数据库中还是在内存中？

> ID：10447465
> 
> 赞同：1
> 
> 时间：2012-05-04T10:56:00.680
> 
> 标签：sql-server-2008, random, in-memory

数据源将包含大约。5000 条记录。我知道可以使用`orderby newid()`. 但是要排序的数据应该是分页的。这意味着第 n 页不能包含前一页（n-1、n-2 等）的记录。现在我想我有两种方法可以走：在数据库中排序，或者在内存中排序（因为 5000 条记录足够小，可以将其保存在内存缓存中）。

对于选项 1（在 db 中排序），我不确定是否可能，因为应该分页数据。如果可以，有可能吗？对于选项 2，是否有任何好的算法（好的是高性能和高度随机的排序器）来对内存中的数据进行排序？在这种情况下你会怎么做：在内存或数据库中排序，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:51:33.797

您可以在 TSQL 中使用伪随机数来生成可重现的随机值列表。

从 的计算中删除注释分隔符`@Seed`将导致序列随着 的每个新值而变化`@LastLogin`。

```
-- Some user specific value that does not change.
declare @UserId as Int = 42
-- Some user specific value that changes as often as you want the order to change for a user.
declare @LastLogin as DateTime = SysDateTime()
-- Paging parameters.
declare @PageSize as Int = 10
declare @PageNumber as Int = 2

select @UserId as Seed, @UserId + DatePart( ms, @LastLogin ) as AlternativeSeed, @LastLogin as LastLogin
declare @Seed as Int = @UserId -- + DatePart( ms, @LastLogin )

; with Numbers ( Number, PseudorandomNumber ) as (
  -- Select the "first" row from your data.
  select 1, Rand( @Seed )
  union all
  -- Add the "next" row from your data.
  select Number + 1, Rand( 1000000 * PseudorandomNumber )
    from Numbers
    where Number < 100
  ),
-- Add row numbers to the previous rowset to allow paging.
NumbersWithRowNumber as (
  select *, Row_Number() over ( order by PseudorandomNumber ) as RowNumber
    from Numbers
  )
-- Select the requested page of data.
select *
  from NumbersWithRowNumber
  where RowNumber between @PageSize * ( @PageNumber - 1 ) + 1 and @PageSize * @PageNumber
  order by RowNumber 
```

# jsf - 做 去之前还是之后？

> ID：10447466
> 
> 赞同：-1
> 
> 时间：2012-05-04T10:56:00.937
> 
> 标签：jsf, primefaces, facelets

我正在使用 JSF2 facelets。

我正在尝试使用`<ui:composition>`和`<ui:insert>`标签将一段代码从一个页面插入另一个页面。

我有页面 A，其中包含页面 B 中的代码。

`<h:form id="formIdPageA">` ...

`<h:form id="formIdPageB">`

问题似乎是表单 id，因为我收到错误：

`System error: Cannot find component with identifier ":formIdPageA:fileListId" in view.`

这是从页面 B 插入到页面 A 的一段代码。这里可以看到 id：

```
 <tr>
                        <td colspan="2">
                            <p:selectOneMenu id="locationId" value = "#{PFMultiFileSelectMgmtBean.selectedLocationId}">
                                <p:ajax update=":formIdPageA:fileListId" listener="#{PFMultiFileSelectMgmtBean.LocationChangeEvent}"/>
                                <f:selectItems value="#{PFJobMgmtBean.outputLocationList}"/>                                
                            </p:selectOneMenu>
                        </td>
                        <td>                                
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <p:selectManyCheckbox id="fileListId" value="PFMultiFileSelectMgmtBean.selectedFiles"  layout="pageDirection">  
                                <f:selectItems value="#{PFMultiFileSelectMgmtBean.fileNames}" />  
                            </p:selectManyCheckbox>  
                        </td>
                    </tr> 
```

这就是我将它插入页面 A 的方式：

```
<p:dialog id="basicDialog" header="Select Files" widgetVar="dlgMultiFileSelect" modal="true" height="500" width="500" resizable="false">
    <ui:insert>  
        <ui:include src="/pageB.xhtml"/>
    </ui:insert>  
</p:dialog> 
```

有谁知道是否可以包含这样的页面？`<ui:composition>`是在正文标签之前还是在页面 B 之后？这个可以吗：

```
<body>
    <f:view>    
        <h:form id="formIdPageB">
                <ui:composition>... 
```

?

**好的，找到了：**

问题是我使用了 PrimeFaces 组件`<p:dialog>`并将其放置在页面 A outside`<h:form>`和 outside`<body>`中，如下所示：

```
 </h:form>
 </f:view>      
</body>
<p:dialog...>        
   <ui:include src="/pageB.xhtml"/>       
</p:dialog> 
```

这似乎是错误的。现在我搬进了`<p:dialog>`表格里面，一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:31:47.610

插入和组合是 JSF 中的模板工具。当你使用 ui:insert 时，你创建了一个插入点，可以使用你的模板在页面中插入（使用 ui:define）。以下是如何正确使用模板和合成的教程：

[http://www.ibm.com/developerworks/java/library/j-jsf2fu2/index.html](http://www.ibm.com/developerworks/java/library/j-jsf2fu2/index.html)

如果我理解得很好，您需要在页面 A 和页面 B 中重用代码块。所以我会将代码提取到单独的文件中并将其包含到页面 A 和页面 B 中。

不过，如果您想将 <ui:composition> 放在 <body> 中，则可以。您可以查看文档示例：

[http://docs.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/ui/composition.html](http://docs.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/ui/composition.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:39:14.897

`<ui:composition>`围绕您想要包含的部分。那是什么，以及它是否包含或排除`<body>`，完全取决于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:55:57.290

我不确定您是否正确使用了 ui:insert。插入是一个占位符。你需要给它一个名字。然后，您使用 ui:define 将代码放入该占位符中。我认为对于您要执行的操作，您只需要删除 ui:insert 标记并将 ui:include 保留在页面 A 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:24:31.353

问题是我使用了 PrimeFaces 组件并将其放置在页面 A outside 和 outside 中，如下所示：

```
 </h:form>
  </f:view>      
</body>
<p:dialog...>        
   <ui:include src="/pageB.xhtml"/>       
</p:dialog> 
```

这似乎是错误的。现在我移动到表格里面，一切都很好。

# web-applications - 使用 LoadOnDemand 作为 XML 的 ultrawebgrid 分页

> ID：10447467
> 
> 赞同：0
> 
> 时间：2012-05-04T10:56:03.143
> 
> 标签：web-applications, pagination, infragistics, ultrawebgrid

我有一个启用了分页的 ultrawebgrid。由于要显示的数据大约为 10K 行，因此通过设置 LoadOnDemand="XML" 属性进行分页。

我面临的问题是当我浏览页面时，我可以看到发生了 AJAX 调用，但显示的数据只是第一页的数据。

例如：我有 10 页数据，当我单击“3”页时，网格会显示“1”页本身的内容。

但是，如果我对任何列进行排序或过滤，排序和过滤结果都符合预期。

**.aspx：**

```
<DisplayLayout BorderCollapseDefault="Separate" Name="SampleGrid" RowHeightDefault="20px" SelectTypeRowDefault="Single" Version="4.00" AllowColSizingDefault="Free" SelectTypeColDefault="Single" TableLayout="Fixed" AllowAddNewDefault="Yes" AllowSortingDefault="OnClient" AllowUpdateDefault="Yes" AutoGenerateColumns="False" CellClickActionDefault="Edit" ViewType="Hierarchical">.

<Pager><PagerStyle CssClass="igwgPgrBlack2k7" /></Pager>

</DisplayLayout> 
```

**.vb：**

```
Protected Sub SampleGrid_InitializeDataSource(ByVal sender As Object, ByVal e As Infragistics.WebUI.UltraWebGrid.UltraGridEventArgs) Handles SampleGrid.InitializeDataSource

Dim dsData As System.Data.DataSet

Dim sql As String

dsData = DataManager.ExecuteDataset(ConnectionType.XXX, Data.CommandType.Text, sql) // getting dataset

'Me.SampleGrid.DisplayLayout.Pager.PageCount = Math.Ceiling(dsData.Tables(0).Rows.Count/Me.SampleGrid.DisplayLayout.Pager.PageSize) //on first load, i'm getting the PageSize as 8 whereas it has to be 50 rows, I tried setting the page size in 'InitializeLayout' but 'InitializeDataSource' event is called first. So where do i set the grid's PageSize.

SampleGrid.DataSource = dsData
End Sub

Protected Sub SampleGrid_InitializeLayout(ByVal sender As Object, ByVal e As Infragistics.WebUI.UltraWebGrid.LayoutEventArgs) Handles SampleGrid.InitializeLayout

Dim htmlString As New StringBuilder

SampleGrid.Browser  = BrowserLevel.Xml

e.Layout.LoadOnDemand   = LoadOnDemand.Xml

e.Layout.RowsRange = 50

e.Layout.XmlLoadOnDemandType = XmlLoadOnDemandType.Accumulative

SampleGrid.DisplayLayout.Pager.StyleMode=PagerStyleMode.QuickPages

SampleGrid.DisplayLayout.EnableInternalRowsManagement=True 

SampleGrid.DisplayLayout.Pager.AllowCustomPaging=True 

SampleGrid.DisplayLayout.Pager.AllowPaging = True

SampleGrid.DisplayLayout.Pager.PageSize = 50

SampleGrid.DisplayLayout.Pager.QuickPages = 5

htmlString.Append("<table cellspacing='0' cellpadding='0' style='width:100%;border:solid 1px Black;'>")

htmlString.Append("<tr>")

htmlString.Append("<td width='25%' align='right'>Viewing page [currentpageindex] of [pagecount] </td>")

htmlString.Append("<td align='center'>")

htmlString.Append("<b>[page:1:First]&nbsp;[prev]</b>")

htmlString.Append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")

htmlString.Append("[default]")

htmlString.Append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")

htmlString.Append("<b>[next]&nbsp;[page:[pagecount]:Last]</b>")

htmlString.Append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")

htmlString.Append("</td>")

htmlString.Append("<td width='25%' align='left' title='Enter page number and press Enter'>")

htmlString.Append("Go to:<input id='PagerGotoPageNumber' size='5' style='vertical-align:text-bottom;height:20px;font-family:verdana;font-size:8pt;padding:0 0 0 0;border:solid 1px black' onkeydown='return gotoPageKeyDown();' type='text' autocomplete='off' />")

htmlString.Append("<button style='height:22px' onclick='gotoPage();'>Go</button>")

htmlString.Append("</td>")

htmlString.Append("</tr>")

htmlString.Append("</table>")

SampleGrid.DisplayLayout.Pager.Pattern=htmlString.ToString()

End Sub

Private Sub SampleGrid_PageIndexChanged(ByVal sender As System.Object, ByVal e As Infragistics.WebUI.UltraWebGrid.PageEventArgs) Handles SampleGrid.PageIndexChanged

        SampleGrid.DisplayLayout.Pager.CurrentPageIndex = e.NewPageIndex

    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:44:55.440

使用自定义分页，您应该为要加载的页面提供数据。这是必要的，因为您的自定义分页可以实现为具有字母而不是页码，[如 Infragistics 帮助中的示例](http://help.infragistics.com/NetAdvantage/ASPNET/2011.1/CLR4.0/?page=WebGrid_Using_Custom_Paging.html)。

如果您希望这样做，则需要进行以下更改：

*   PageIndexChanged 事件应该被删除。
*   您绑定到的数据集应该只包含特定页面的元素。请注意，这也会对排序和过滤产生影响，并且可能会阻止它们工作，除非您返回过滤和/或排序的结果。

显示使用您正在使用的代码进行分页的简单示例是：

```
Protected Sub UltraWebGrid1_InitializeDataSource(sender As Object, e As Infragistics.WebUI.UltraWebGrid.DataSourceEventArgs) Handles UltraWebGrid1.InitializeDataSource        
    Me.UltraWebGrid1.DisplayLayout.Pager.PageCount = 4

    Me.UltraWebGrid1.DataSource = Me.GetEmployees(Me.UltraWebGrid1.DisplayLayout.Pager.CurrentPageIndex)
End Sub

    Private Function GetEmployees(page As Integer) As DataTable
    Dim dtData As DataTable = New DataTable("Employees")

    dtData.Columns.Add("EmployeeID", GetType(Integer))
    dtData.Columns.Add("Name", GetType(String))
    dtData.Columns.Add("OnSite", GetType(Boolean))
    dtData.Columns.Add("DateOfHire", GetType(DateTime))
    dtData.Columns.Add("Department", GetType(Integer))

    For i As Integer = (page - 1) * 50 To (page - 1) * 50 + 50 Step 1
        dtData.Rows.Add(New Object() {i, String.Format("Name {0}", i), (i Mod 2 = 0), DateTime.Today, i Mod 8})
    Next

    Return dtData
End Function

'Protected Sub UltraWebGrid1_PageIndexChanged(sender As Object, e As Infragistics.WebUI.UltraWebGrid.PageEventArgs) Handles UltraWebGrid1.PageIndexChanged
'    Me.UltraWebGrid1.DisplayLayout.Pager.CurrentPageIndex = e.NewPageIndex
'End Sub 
```

请注意，您可能不需要使用自定义分页，如果将 DisplayLayout.AllowCustomPaging 设置为 false，那么当您单击分页器中的第一个、上一个、数字、下一个和最后一个选项时，网格将自动处理分页。这也将允许您保持数据不变，而不必手动处理排序和过滤。如果你这样做，你仍然会删除 PageIndexChanged 处理程序。

请注意，对于输入后的转到按钮，您可能需要在 JavaScript 中设置页面，这可以使用[WebGrid](http://help.infragistics.com/NetAdvantage/ASPNET/2011.1/CLR4.0/?page=WebGrid_Object_CSOM.html)的 goToPage 客户端方法完成。

虽然它与您遇到的问题无关，但在使用 InitializeDataSource 设置 WebGrid 的 DataSource 时，将[EnableInternalRowsManagement](http://help.infragistics.com/NetAdvantage/ASPNET/2011.1?page=Infragistics4.WebUI.UltraWebGrid.v11.1~Infragistics.WebUI.UltraWebGrid.UltraGridLayout~EnableInternalRowsManagement.html)设置为 true 没有影响。

# ms-access - 访问 2007 引用完整性而不使用表中的查找

> ID：10447468
> 
> 赞同：1
> 
> 时间：2012-05-04T10:56:05.883
> 
> 标签：ms-access, lookup-tables

我在这里看到了关于不在表格中使用查找的各种帖子。如果不这样做，如何在字段和查找表中的允许值之间强制执行参照完整性？我无法在表字段和查找表中的字段之间创建关系，因为我无法在字段上创建唯一（无重复）索引 - 特定值需要在表中的记录中多次出现。但是，如果我使用字段属性对其进行查找并从查找表中指定它必须包含的字段，则可以确保无法将数据输入到不在查找表中的该字段中。

还是我在这里完全搞错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:46:13.133

我建议您始终创建用于编辑记录的表单。在这些表单中，您可以创建在正确的表和字段中执行查找的组合框。那里有一些选项，因此您可以将数据输入限制为仅存储在表中的那些值。此选项称为列表限制（您将在组合属性中看到它）。

另一种强制数据存在于查找表中的重要方法是通过关系。

```
tblProducts
  ProductID (primary key)
  CategoryID (foreign key)
  ProductDescription

tblCategories
  CategoryID (primary key)
  Category 
```

在关系窗口中，您将在 CategoryID 字段上定义上述两个表之间的关系。你在这里完成了几件事。仅在 Products 表中存储 CategoryID 会更有效，因为您将存储更少的数据。此外，如果您更改类别上的名称，所有记录都将立即反映该更改。每个显示产品及其类别的地方都需要创建一个组合框，以便显示类别描述而不是显示类别 ID。

作为旁注，我建议您很少将值列表选项用作组合中的行源类型。使用 Table/Query 选项然后创建适当的查找表是一种更加健壮和灵活的设计。

# java - 如何使用蜡染在 SVG 图像中绘制简单的线条？

> ID：10447477
> 
> 赞同：1
> 
> 时间：2012-05-04T10:56:21.537
> 
> 标签：java, svg, batik

我有一个 SVG 图像，我想根据该图像上的一些坐标绘制一条简单的线。我想在 Java 中使用 Batik 来做到这一点，但不知道如何也找不到足够的文档。有人能帮我吗？

另外，如果您知道我可以使用任何其他 Java 库来实现这一点，请告诉我！

# jquery - 如何自定义 dynatree 图像？

> ID：10447483
> 
> 赞同：0
> 
> 时间：2012-05-04T10:56:42.657
> 
> 标签：jquery, jquery-dynatree

我正在使用 jquery dynatree 插件。（http://wwwendt.de/tech/dynatree/doc/samples.html）我正在使用它的 vista 主题，我想要而不是每个文件夹左侧的小三角形（节点扩展器符号） ，我的自定义图像（加号）符号来了。此外，我想删除文件夹图像，并且不应使用任何图像代替文件夹图像..可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:48:16.740

您可以编辑用于图像的 CSS 文件中的图像。我们用更好看的图标替换了文件夹图标，并将树线替换为 Windows 7 样式的箭头，指示树是否已展开。

我们编辑的图像是icons.gif。

只需确保将替换图像对齐在同一位置，以避免更改 css 文件中的所有背景位置。

# tridion - 创建一个从另一个组件复制字段值的组件

> ID：10447484
> 
> 赞同：5
> 
> 时间：2012-05-04T10:56:49.223
> 
> 标签：tridion

我正在尝试在 Tridion 2011 SP1 中创建一个 Component1。我也有已经创建的 Component2。

在 Tridion 中创建 Component1 时，我有两个字段用于该组件，一个称为“SelectedType”，它是一个下拉列表，其值 A、B、C 是架构中定义的选项。另一个名为“Name”的字段也是一个下拉列表，但其值应根据从“SelectedType”字段中选择的值从第二个组件中检索。

Component2 具有以下名为“A”、“B”、“C”的字段。Component2 中的每个字段都是多值的，并且是文本类型。

因此，例如，如果我从“SelectedType”下拉字段中选择值“A”，那么我的“名称”下拉字段应该填充从 Component2 的字段“A”中获取的值。

不应通过向 Tridion UI 添加任何扩展或使用任何 .NET 代码来实现此功能。

这应该完全使用 Tridion 中的可用功能来实现。

Tridion 中是否有任何实现事件处理程序/侦听器的范围，当第一个下拉字段中的值更改发生事件时，它将值填充到下一个下拉字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:00:41.643

这不是 Tridion 的内置功能，因此您必须编写某种扩展。如果您坚持“没有 GUI 扩展或 .NET 代码”的说法，那么答案就是简单的“否”。

如果您愿意考虑编写扩展并且您使用的是 Tridion 2011（或更高版本），那么您可以使用 Data Extender 完成此操作，因为您想要的依赖关系在两个组件之间（而不是同一组件中的字段） ）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:27:58.650

恐怕如果不创建 GUI 扩展，这将是不可能的。此功能目前在 SDL Tridion 2011 中并非开箱即用。这就是 GUI 可扩展的原因。

# linux - 在用户模式下读取 kallsyms

> ID：10447491
> 
> 赞同：9
> 
> 时间：2012-05-04T10:57:22.170
> 
> 标签：linux, kernel, symbols

我正在编写有关低级内容的代码。我需要知道内核符号地址才能编写可靠的代码。因此，当我在 Ubuntu kernel-3.0.19 中处于用户模式时，我试图读取 kallsyms。这就是用户模式下的 kallsyms 输出。

... 00000000 r __ksymtab_prepare_kernel_cred 00000000 r __kcrctab_prepare_kernel_cred 00000000 r __kstrtab_prepare_kernel_cred ...

我怎样才能在用户模式下解决这个问题。当我是 root 并且一切都正常时，但这不是我需要的。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T07:03:14.677

故意`/proc/kallsyms`显示零而不是非 root 用户的真实地址。这降低了一点安全风险。

[此上游提交](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=455cd5ab305c90ffc422dd2e0fb634730942b257)中提供了详细信息。另请参阅如何在 kallsyms.c 的[s_show() 函数中](http://lxr.free-electrons.com/source/kernel/kallsyms.c?v=3.0#L501)`%pK`使用打印说明符，负责在 .c 中提供记录。`s_show``/proc/kallsyms`

我怀疑是否仍然有可能以某种方式获得符号地址而不是 root 用户。`System.map`没有root权限也无法访问。写到`/proc/sys/kernel/kptr_restrict`.

# tridion - 如何使用核心服务将外部文件导入 SDL Tridion 2011？

> ID：10447494
> 
> 赞同：9
> 
> 时间：2012-05-04T10:57:41.147
> 
> 标签：tridion

我想使用核心服务将 PDF、Word 和 Excel 文件推送到 SDL Tridion 2011。

我尝试了下面的代码，但得到了这个错误：

> 属性“BinaryContent”的值无效。无法打开上传的文件：

```
using (ChannelFactory<ISessionAwareCoreService> factory =
    new ChannelFactory<ISessionAwareCoreService>("wsHttp_2011"))
{
  ISessionAwareCoreService client = factory.CreateChannel();
  ComponentData multimediaComponent = (ComponentData)client.GetDefaultData(
                                       ItemType.Component, "tcm:19-483-2");
  multimediaComponent.Title = "MultimediaFile";

  multimediaComponent.ComponentType = ComponentType.Multimedia;
  multimediaComponent.Schema.IdRef = "tcm:19-2327-8";

  using (StreamUploadClient streamClient = new StreamUploadClient())
  {
    FileStream objfilestream = new FileStream(@"\My Documents\My Poc\images.jpg",
                                              FileMode.Open, FileAccess.Read);
    string tempLocation = streamClient.UploadBinaryContent("images.jpg",
                                                           objfilestream);
  }
  BinaryContentData binaryContent = new BinaryContentData();
  binaryContent.UploadFromFile = @"C:\Documents and Settings\My Poc\images.jpg";
  binaryContent.Filename = "images.jpg";
  binaryContent.MultimediaType = new LinkToMultimediaTypeData()
  {
    IdRef ="tcm:0-2-65544"
  };
  multimediaComponent.BinaryContent = binaryContent;

  IdentifiableObjectData savedComponent = client.Save(multimediaComponent,
                                                      new ReadOptions());

  client.CheckIn(savedComponent.Id, null);
  Response.Write(savedComponent.Id);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:23:41.693

在这里阅读 Ryan 的优秀文章[http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011)

所有二进制文件都以相同的方式处理 - 因此他的图像技术对文档同样有效，只需确保使用具有适当 mime 类型的 Schema。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T13:42:10.467

使用核心服务将二进制文件上传到 Tridion 的过程是：

1.  使用 . 文件将二进制数据上传到 Tridion 服务器`StreamUploadClient`。这将返回 Tridion 服务器上文件的路径。
2.  创建一个`BinaryContentData`指向 Tridion 服务器上的文件的文件（因此使用从第 1 步返回的路径）
3.  创建一个`ComponentData`引用`BinaryContentData`来自步骤 2的
4.  保存`ComponentData`

您在步骤 2 中设置文件的本地路径。

```
binaryContent.UploadFromFile = @"C:\Documents and Settings\My Poc\images.jpg"; 
```

但是 Tridion 将永远无法在那里找到该文件。相反，您应该设置从以下位置返回的路径`UploadBinaryContent`：

```
string tempLocation;
using (StreamUploadClient streamClient = new StreamUploadClient())
{
  FileStream objfilestream = new FileStream(@"\My Documents\My Poc\images.jpg",
                                            FileMode.Open, FileAccess.Read);
  tempLocation = streamClient.UploadBinaryContent("images.jpg", objfilestream);
}
BinaryContentData binaryContent = new BinaryContentData();
binaryContent.UploadFromFile = tempLocation; 
```

请注意，[Ryan 的原始代码](http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011)正是这样做的。

# c - 尝试在数组中生成一定数量的随机数字

> ID：10447495
> 
> 赞同：2
> 
> 时间：2012-05-04T10:57:50.070
> 
> 标签：c, arrays, random, placement

使用这个程序，我试图将一个 6x15 数组设置为 0，然后在数组的随机槽中放置一个随机数 x 次。然而，事情并没有按计划进行……

注意 MAX_ROWS 为 6，MAX_COLS 为 15，OCEAN 为 0

```
#include <stdio.h>
#include <time.h>
#include "util.h"

int rand_number(int param);

main()
{
int map[MAX_ROWS][MAX_COLS]; //initializes an array, map, with the dimensions 6 and 15.

//sets all values in the array to 0
int a,b;

for (a = 0; a < MAX_ROWS; a++)
{
for (b = 0; b < MAX_COLS; b++)
{map[a][b]=OCEAN;}
}

int shipnum = 6; 
```

这应该放置随机数。（shipnum 只是我用来限制我放置的船只数量的值）：

```
while(shipnum > 0)
{
map[rand_number(MAX_ROWS)][rand_number(MAX_COLS)] = 3;
shipnum -= 1;
map[rand_number(MAX_ROWS)][rand_number(MAX_COLS)] = 2;
shipnum -= 2;
map[rand_number(MAX_ROWS)][rand_number(MAX_COLS)] = 1;
shipnum -= 3;
} 
```

但是，当我跑步时

```
/*This will print the array*/
for (a = 0; a < MAX_ROWS; a++)
{
for (b = 0; b < MAX_COLS; b++)
{printf("%d ", map[a][b]);}
printf("\n");
}
} 
```

我被给

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

当我真的想得到类似的东西时

```
0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 2 0 0 0 0 0 3 0 0 
0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 
```

这是我用来生成随机数的函数。

```
/*This will generate a random number*/
int rand_number(int param)
{
srand((unsigned int)time(NULL));
int x = param;
int rn = rand() % x;
return rn;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:02:08.763

每次调用时`rand_number`，都使用 重置伪 rng `srand((unsigned int)time(NULL));`，删除该行或将其移动到 main() 的开头

不要在程序中*多次*调用 srand() ，在程序启动时的某个地方。

根据您要执行的操作，请记住随机数生成器不会产生唯一数字，因此如果您想保证已`shipnum`在数组中放置条目，则可能需要考虑这一点。即您对 rand_number() 的 6 次调用都可能产生 4 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:01:46.243

您在每次通话时都重新播种随机生成器，这将使其不是随机的。删除这一行：

```
srand((unsigned int)time(NULL)); 
```

您的代码还允许在已经有船的地方编写船。如果您不想允许这样做，则应在将船放入该单元之前检查该单元是否为空。

```
int x = rand_number(MAX_ROWS);
int y = rand_number(MAX_COLS);
if (map[x][y] == 0) {    /* Add this check! */
    map[x][y] = 1;
    shipnum -= 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:08:37.983

除了不多次调用 srand() 之外，您将不会使用您拥有的 while 循环获得所需的输出。你说你想要总共 6 艘船，1、1、1、2、2、3，但是你的 while 循环放置了每种类型的一个，之后你的`shipnum`will == 0，让你脱离循环。

相反，创建三个独立的船舶放置例程，每种类型一个。此外，您需要确保您的位置不在另一艘船的顶部——这正是您在随机函数中快速调用 srand() 时发生的情况，并且在其他时间也可能发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:10:29.563

让我印象深刻的第一件事是，您没有检查现有单元是否已经分配了一艘船。我会使用 0 作为哨兵值。

另外（自从我使用随机数以来已经有一段时间了），我敢打赌你的种子有问题。我相信计算机太快了，您的功能无法成功，这意味着您用作种子的“时间”总是相同的。

将种子设为外部（在函数体外部声明），并初始化一次。

# android - android首选项更改相同PreferenceActivity中显示的首选项

> ID：10447499
> 
> 赞同：3
> 
> 时间：2012-05-04T10:58:10.650
> 
> 标签：android, sharedpreferences

我有两个首选项 xml 文件。第一个（pref2.xml）包含 2 个首选项：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

   <CheckBoxPreference 
        android:key="key"
        android:title="title" 
        android:defaultValue="false"
    />
   <CheckBoxPreference 
        android:key="key2"
        android:title="title" 
        android:defaultValue="false"
    />
 </PreferenceScreen> 
```

另一个（pref1.xml）包含 1 个首选项：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

   <CheckBoxPreference 
        android:key="key"
        android:title="title" 
        android:defaultValue="false"
    />

 </PreferenceScreen> 
```

在我的偏好活动中，我试图改变它们：

```
 public void onCreate(Bundle savedInstanceState) {       
            super.onCreate(savedInstanceState);   

            addPreferencesFromResource(R.xml.pref1);
            this.getPreferenceScreen().removeAll();
            addPreferencesFromResource(R.xml.pref2);
            final ListAdapter adapter = getPreferenceScreen().getRootAdapter();
            Log.d("LOG", "size of sharedPreferences"+adapter.getCount()+"(should be 2)"); 
```

实际上在这里我得到了正确的输出并且一切都正确显示。但我想更改关于一个偏好的显示偏好。因此，我在首选项活动中实现了 OnSharedPreferenceChangeListener：

```
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
    super.onSharedPreferenceChanged(sharedPreferences, key);

    //switch the widget type
    if (key.equals("key")){
        this.getPreferenceScreen().removeAll();
                    addPreferencesFromResource(R.xml.pref1);
                    final ListAdapter adapter = getPreferenceScreen().getRootAdapter();
                    Log.d("LOG", "size of sharedPreferences "+adapter.getCount()+" (should be 1)");
    }
 } 
```

嗯，pref1 首选项显示正确，但输出

> “sharedPreferences 2 的大小”

表明在后台仍然应用了旧的首选项。如果我遍历 listAdapter 我也会得到旧的偏好。

## 知道我该如何解决这个问题吗？

我发现 listadapter 有点过时了。如果我通过 getPreferenceScreen().getPreferenceCount() 获得项目计数，我会得到正确的数量。但是我如何访问这些首选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:48:36.380

我相当确定问题在于您有两个带有“key”键的偏好，即使它们位于不同的屏幕上。首选项由其密钥标识，并且这需要是唯一的以避免冲突。侦听器只知道从键中更改了哪个首选项。我会将键更改为具有唯一值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:12:13.663

编辑：嗯，不对：S

...

好的，我终于找到了解决方案。更改 PreferenceScreen 后，我需要再次手动绑定 listView：

```
 getPreferenceScreen().bind((ListView)findViewById(android.R.id.list)); 
```

# php - 如何对 APC 缓存进行碎片整理

> ID：10447501
> 
> 赞同：5
> 
> 时间：2012-05-04T10:58:16.867
> 
> 标签：php, caching, apc

是否可以对 APC 缓存进行碎片整理，或者唯一可用的选项是清除并重建它？
如果我们不能对其进行碎片整理，转储整个缓存清除它然后重新加载转储是否是个好主意？这会清除碎片吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T14:51:48.450

APC 将操作码存储在 ram 中。它没有碎片管理。

碎片整理的唯一方法是刷新缓存。在 php 脚本中使用 apc_clear_cache()。或者重启httpd。

请注意，APC 将不得不重建其缓存。

如果您给 APC 足够的内存，则应该没有（或很少）碎片。在这里查看我的答案，看看如何猜测所需的 ram [是什么导致 PHP 中“无法为池分配内存”？](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:52:20.410

有替代方法。如果您使用密码安装名为[apc.php](https://github.com/krakjoe/apcu/blob/master/apc.php)的某个文件（非常重要！），您可以登录该站点并从那里刷新操作码和用户缓存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-22T08:16:36.453

在 Debian 8 上，安装 APC：

```
sudo apt-get install -y php5-apcu 
```

然后复制`apc.php`到您的网络根目录：

```
cp /usr/share/doc/php5-apcu/apc.php /var/www/html 
```

编辑文件，修改`ADMIN_USERNAME`& `ADMIN_PASSWORD`。

然后`apc.php`在浏览器中访问该文件，登录并点击`Clear Cache`。

# zend-framework - 使用 Zend_Service_Ebay_Finding 检索卖家物品

> ID：10447503
> 
> 赞同：0
> 
> 时间：2012-05-04T10:58:21.673
> 
> 标签：zend-framework

我希望使用 Zend_Service_Ebay_Finding API 的 findItemsAdvanced 调用检索所有卖家商品。我有点困惑如何使用它？有没有人有这个方法如何工作的例子？我试过

```
$response = $finding->findItemsAdvanced('seller=<SELLERNAME>'); 
```

但是什么都没给我？

将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:52:33.403

最后，我重载了 Zend_Service_Ebay_Finding API 并添加了 2 个方法来获取所有卖家信息。也许这会帮助其他有同样问题的人。

```
/**
 * Finds items for a specific seller
 * and a page
 *
 * @param  string            $seller
 * @param  int               $page
 * @return Zend_Service_Ebay_Finding_Response_Items
 */
public function sellerItems($seller, $page = 1){
    // prepare options
    $options = array('itemFilter(0).name' => 'Seller', 'itemFilter(0).value(0)' => $seller, 'paginationInput.entriesPerPage' => 100);
    // do request
    return $this->_findItems($options, 'findItemsAdvanced');
}

/**
 * Finds items for a specific seller - iterates through pages
 * and a page
 *
 * @param  string            $seller     
 * @return array
 */
public function getAllSellerItems($seller) {
    $page1 = $this->sellerItems($seller);
    $pages = $page1->paginationOutput->totalPages;
    $items = $page1->searchResult->item;

    $full = array();
    foreach($items as $item) {
        $full[] = $item;
    }
    if($pages > 1) {
        for($i = 2;$i <= $pages; $i ++) {               
            $results =  $this->sellerItems($seller, $i);
            $items = $results->searchResult->item;
            foreach($items as $item) {
                $full[] = $item;
            }   
        }           
    }
    return $full;
} 
```

# php - jquery mobile丢失了带有ajax post的css

> ID：10447505
> 
> 赞同：0
> 
> 时间：2012-05-04T10:58:33.473
> 
> 标签：php, jquery, html, css, jquery-mobile

我正在使用 jQuery Mobile 创建一个移动应用程序，但我遇到了一个小问题。我想创建一个列表，其中包含我从 ajax 帖子中获得的数据库中的一些内容。

标记如下所示：

```
<div data-role="page">
<div data-role="header">
    <h1>Facturen</h1>
</div><!-- /header -->

<div data-role="content">   
    <ul data-role="listview" data-inset="true" id="Invoices">
        <div id="invoiceList"></div>
    </ul>
</div><!-- /content -->

<div data-role="footer">
    <h4>Page Footer</h4>
</div><!-- /footer --> 
```

这是 jQuery：

```
$.ajax({
        type: "POST",
        url: "invoices/index.php",
        data: '',
        complete: function(data)
        {
            $('#invoiceList').html(data.responseText);
        }
    }); 
```

好吧，我把查询的结果放在

*   但在某种程度上，列表的 CSS 不起作用。

    如果我尝试这样做，效果很好：

    ```
    <ul data-role="listview" data-inset="true" id="Invoices">
            <li>test</li>
            <li>test</li>
            <li>test</li>
            <li>test</li>
        </ul> 
    ```

    有人知道如何解决这个问题吗？

    提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:05:20.137

尝试将您添加到`ul`元素`id`中`class` `invoiceList`，因为您将元素附加到`li`元素中`div`并且格式将不起作用：

```
<ul data-role="listview" data-inset="true" id="Invoices" class="invoiceList">

</ul>

<script>
$.ajax({
    type: "POST",
    url: "invoices/index.php",
    data: '',
    complete: function(data)
    {
        $('.invoiceList').html(data.responseText);
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:28:35.187

在 jQuery Mobile 中，每当您更新元素时​​，通常都会有一个后续步骤，您会在该步骤上触发操作。例如，当您将新事物添加到未排序列表中时，您需要调用

```
$('#invoiceList').listview('refresh'); 
```

这将在将这些元素添加到`complete:`回调中的 UL 后立即进行。

如果这不会产生您正在寻找的行为，您还可以尝试其他各种方法。例如，您可能需要执行[`.append()`](http://api.jquery.com/append/)操作而不是使用`.html()`. 在这种情况下，我更频繁地看到这种用法。

# iphone - iOS - 在不使用 ARC 的应用程序中使用 Twitter 反向身份验证

> ID：10447506
> 
> 赞同：3
> 
> 时间：2012-05-04T10:58:42.880
> 
> 标签：iphone, ios, xcode, twitter

我有一个不使用 ARC 的应用程序。现在我想集成 twitter 框架以在我的应用程序中获取身份验证访问令牌。我刚刚收到了启用反向身份验证的应用程序。我正在尝试这个例子 - [https://github.com/seancook/TWiOS5ReverseAuthExample](https://github.com/seancook/TWiOS5ReverseAuthExample) 工作正常，但是当我尝试将它与我的项目集成时，它给我带来了一堆内存问题和 BAD_ACCESSes 显然是因为启用了代码 ARC。有什么办法可以在我的应用程序中使用它吗？

谢谢，任何提示将不胜感激。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:09:46.303

您可以做的一件事就是将***-fno-objc-arc***添加到包含的非 ARC 支持的文件中，然后进入项目构建阶段，如图所示 ![在此处输入图像描述](../Images/5a41831921c3d0aecc79dacac3d17f63.png)

然后只需单击要在上面放置编译器标志的文件，如图所示

![在此处输入图像描述](../Images/54f5b16405f3541123c8b52124daeb7d.png)

只需将标志放在弹出窗口中

# android - 创建游戏服务器

> ID：10447513
> 
> 赞同：0
> 
> 时间：2012-05-04T10:59:03.043
> 
> 标签：android, iphone

我有兴趣为未确定的多人游戏创建服务器，无论是基于 PC 还是基于移动设备。任何游戏服务器显然都是事件驱动的、异步的和快速的。我在 Web 开发方面非常有经验，通常使用 Symfony for PHP 或 Django for Python 等框架。

有什么可以与高性能游戏服务器开发的 Web 框架相媲美的吗？ROS（机器人操作系统）是一个复杂的 C/C++ 框架的例子，它针对实时性能进行了优化，包括常见的机器人功能。有没有为游戏设计的类似的东西？

现在我最感兴趣的是创建基于浏览器的 WebGL 游戏或 iPhone 游戏。因此，我正在考虑使用 Django 作为我的请求处理程序，并且只是通过 AJAX 进行通信。我知道这对于 PC 网络游戏来说效果很好，但我不确定与 iPhone/其他移动设备进行远程通信的最佳方式是什么。使用 Web 框架来仲裁移动应用程序是否常见？

这是一个开放式问题，因此非常感谢任何建议、想法或进一步阅读的链接。如果有人有任何好的阅读材料，我很乐意看看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:12:41.530

由于您具有 Web 开发背景，您可能会对 mozilla [http://browserquest.mozilla.org/的实验性 Node.js/HTML5 游戏感兴趣](http://browserquest.mozilla.org/)

源代码可在此处获得[https://github.com/mozilla/browserquest](https://github.com/mozilla/browserquest)

它使用 websockets 进行客户端/服务器通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:57:18.100

绝对可以使用 Web 框架。这在很大程度上取决于游戏的类型。与朋友交谈和 Eliminator Pro 之间的要求有很大不同。但总的来说，对于很多游戏设计来说，Web 框架/服务模型效果很好。

您还可以查看现有项目，例如[cocoas live](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CIYBEBYwAA&url=http://code.google.com/p/cocoslive/&ei=mCWkT-aKBO7k6QHlsvWeCQ&usg=AFQjCNEhGME1KbgVISIbghjxjBmRwqN85Q)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T19:23:56.817

> 使用 Web 框架来仲裁移动应用程序是否常见？

是的，它是看看 webview（在 android 中）

> 有什么可以与高性能游戏服务器开发的 Web 框架相媲美的吗？ROS（机器人操作系统）是一个复杂的 C/C++ 框架的例子，它针对实时性能进行了优化，包括常见的机器人功能。有没有为游戏设计的类似的东西？

你不需要一个实时系统，这只是一个非常好的服务器（取决于客户端的数量）在任何情况下我都会推荐java。它几乎与 c++ 应用程序一样快（如果不是更快）（感谢 jit），您可以轻松地将其连接到 android（它们是兼容的）或将其用作经典的 Web 框架

# jakarta-ee - 会话超时后哪些浏览器设置可能会导致页面加载错误？

> ID：10447516
> 
> 赞同：1
> 
> 时间：2012-05-04T10:59:30.840
> 
> 标签：jakarta-ee, jsf-2, internet-explorer-9, glassfish-3

我的客户在会话超时后加载我们的 Web 应用程序时收到页面加载错误。它只发生在 IE9 上，它在 Firefox 上完美运行，这意味着他会被重定向到带有 FF 的登录页面。当他删除所有 cookie 和浏览器历史记录时，它再次在 IE9 中运行。我在日志文件中没有看到任何错误消息。

我无法在同一台服务器上重现我的 IE9 中的错误。因此我得出结论，这个问题可能是由我的客户 IE9 中的某些设置引起的。问题是：

哪些浏览器设置可能会导致此类问题以及如何解决此问题？

附加信息：

*   Web 应用程序仅创建一个包含会话 ID 的 cookie
*   服务器：Glassfish 3.1 使用 JSF 2.0 + Primefaces 3.0 构建的 Java EE 应用程序
*   客户端：Win7 + IE9，兼容模式设置为IE7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:47:00.367

导致这种情况的设置是 IE9 中的 TLS 1.0 支持。它被禁用了，当我们启用它时，它起作用了。

Glassfish 服务器仅支持 TLS，SSL 3 支持已关闭。我们通过在 Glassfish 中打开 SSL 3 支持解决了这个问题。去：

* * *

配置 --> cerver 配置 --> 网络配置 --> 协议 --> http-listener-2

转到 SSL 选项卡

检查启用 SSL3。

节省。

* * *

或者，您可以在 IE 中启用 TLS 1.0 支持，如果您有能力在公司范围内执行此操作。

希望这可以帮助某人。

干杯

阿恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:13:16.433

这是一个会话合并问题。我们在使用 IE8 时遇到了同样的问题。

重现问题的步骤：在新的 IE 窗口中打开应用程序，让它静置直到会话超时。

a) 在新选项卡中打开应用程序或最小化上一个窗口并在新窗口中打开相同的应用程序。

b) 如果您关闭了之前的 IE 窗口，IE 进程需要一些时间才能结束，大约需要 2 分钟。如果您在这 2 分钟内打开一个新 url，它会被分配相同的进程 ID。

这仅发生在 IE8 上，而不是 FF 或 Chrome。

要解决此问题，您必须使用 -nomerge 参数打开 iexplorer.exe。

更多[信息](http://blogs.msdn.com/b/ie/archive/2009/05/06/session-cookies-sessionstorage-and-ie8.aspx)

# git - Gerrit 和 Active Directory

> ID：10447520
> 
> 赞同：9
> 
> 时间：2012-05-04T10:59:49.360
> 
> 标签：git, active-directory, ldap, gerrit

我正在尝试设置 Gerrit 以使用我们的公司 Active Directory 进行身份验证。我知道很多人已经设法让它发挥作用，但它对我不起作用。

如果我按以下方式运行`ldapsearch`命令，我会得到正确的结果，所以我知道我的搜索字符串是正确的：

```
ldapsearch -h myserver -b "CN=Users,DC=mycompany,DC=com" -D "CN=adam,CN=Users,DC=mycompany,DC=com" -w mypassword "(sAMAccountName=adam)" 
```

但是在我的 Gerrit 配置中使用这些相同的设置不起作用：

```
[auth]
    type = LDAP
[ldap]
    server = ldap://myserver
    accountBase = CN=Users,DC=mycompany,DC=com
    groupBase = OU=Gerrit,DC=mycompany,DC=com
    user = CN=adam,CN=Users,DC=mycompany,DC=com
    password = mypassword
    referral = follow
    accountPattern = (sAMAccountName=${username})
    groupPattern = (cn=${groupname})
    accountFullName = displayName
    accountMemberField = memberOf
    accountEmailAddress = mail 
```

当我尝试使用我的帐户登录时，出现以下异常`etc/error_log`：

```
[2012-05-04 10:03:04,595] ERROR com.google.gerrit.server.auth.ldap.LdapRealm : Cannot query LDAP to autenticate user
javax.naming.NamingException: [LDAP: error code 1 - 00000000: LdapErr: DSID-0C090627, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, vece^@]; remaining name 'CN=Users,DC=mycompany,DC=com'
    at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3072)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2978)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2785)
    at com.sun.jndi.ldap.LdapCtx.searchAux(LdapCtx.java:1839)
    at com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1762)
    at com.sun.jndi.ldap.LdapCtx.c_search(LdapCtx.java:1779)
    [...] 
```

有没有人设置了类似的配置可能会有所帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:21:05.857

对不起各位，我的错在这里。在我的配置中，我使用`ldap.user`我的设置名称而不是`ldap.username`. 一旦我改变了我的 AD 绑定工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:32:07.303

在您使用的示例`"CN=adam,CN=Users,DC=myusers,DC=com"`中，但错误消息表明可分辨名称应类似于`...,CN=Users,DC=NRII,DC=com`. 检查您在配置中指定的基础对象是否正确，例如，`cn=adam`从属于哪个条目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:14:07.500

错误是您尝试在不绑定的情况下进行搜索，但这是您的 LDAP 应用程序应该为您执行的操作，因此 Gerrit 应该使用提供的信息，绑定然后搜索。但错误意味着它在那里跳过了一步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-14T11:11:28.837

我努力让它工作（Gerrit 2.13.1）。那时我在一家监管严格的公司，所以我不敢要求在公司的 Active Directory 上为 Gerrit 创建一个专用用户。不幸的是，这家公司的标准用户创建过程（在 Windows 中？）是姓氏和名字，导致 AD 用户名如下：

*CN=Doe, John,OU=EvilCorp 用户,DC=foo,DC=bar,DC=corp*

```
 ^
       | 
```

*专家的眼睛可能会通过OU=EvilCorp Users*中的空格字符看到问题，但这是逗号

> ,

*在像CN=Doe, John*这样的 LastName, FirstName 模式中产生了问题。

一旦我创建了我的 Gerrit 专用用户（*GerritUser*，没有名字），该行：

*用户名 = CN=GerritUser,OU=EvilCorp 用户,DC=foo,DC=bar,DC=corp*

被接受，我能够使用我通常的个人 Windows / AD 用户 ID 和密码登录。

请注意，如果您尝试转义逗号（如*CN=Doe\, John... ），则 gerrit.config 文件被声明为**无效*，无论是否带有双引号 "

 *对于正则表达式编写者来说，很明显只删除逗号会更方便。

注意：*在 Windows 上使用 gerrit 测试*

etc/gerrit.config 的摘要

```
...
[auth]
type = LDAP
[ldap]
server = LDAP://xx.yy.zz.ww
username = CN=GerritUser,OU=EvilCorp Users,DC=foo,DC=bar,DC=corp
accountBase = ou=EvilCorp Users,dc=foo,dc=bar,dc=corp
accountPattern = (&(objectClass=user)(sAMAccountName=${username}))
accountFullName = displayName
accountEmailAddress = mail
... 
```

etc/secure.config 的摘要

```
...
[ldap]
password = Password_Of_GerritUser
... 
```*

# java - C3p0 属性对 spring/hibernate 应用程序的影响？

> ID：10447528
> 
> 赞同：1
> 
> 时间：2012-05-04T11:00:07.223
> 
> 标签：java, spring, hibernate

我将为连接池配置 c3Po 配置。以下属性是什么意思？

```
preferredTestQuery  : query to test the connection
testConnectionOnCheckin : above query is executed when connection is returned back to pool
testConnectionOnCheckout : above query is executed when connection is taken from pool
idleConnectionTestPeriod : 
```

我的理解正确吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:04:11.797

这些设置控制 C3P0 如何测试超时连接。我通常使用“SELECT 1;” 例如，用于测试 MySQL 连接。还有其他方法可以测试连接，并且某些选择会影响性能，因此我建议您阅读此处提供的文档：[http ://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing](http://www.mchange.com/projects/c3p0/index.html#configuring_connection_testing)

# javascript - 在 asp.net 用户控件中找不到隐藏字段

> ID：10447529
> 
> 赞同：1
> 
> 时间：2012-05-04T11:00:07.400
> 
> 标签：javascript, asp.net, html

我有一个asp.net 用户控件（.ascx）。用户控件有一个 HTML 隐藏字段。

```
<input id="HiddenField1" type="hidden" runat="server" /> 
```

用户控件触发一个 HTML 窗口弹出，用户在弹出窗口中输入几个值，然后在弹出窗口关闭后，一个字符串值保存在该隐藏字段中。

```
document.getElementById("HiddenField1").value = windowResult; 
```

最后，用户控件的后端代码通过从隐藏字段中提取字符串值来完成一些任务。

```
string[] nameValuePair = new string[2];
nameValuePair = HiddenField1.Value.Split('%'); 
```

问题是 document.getElementById("HiddenField1") 在执行时失败。因为当我在网页中使用用户控件时，控件的 ID 变为`[my usercontrol name] + $ + [hidden field name]`. （例如。`ctrl_TaxonomyTree1$HiddenField1`）

由于用户控件将被动态填充，我不能总是知道实例的名称。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:02:55.387

它`id`不再是`HiddenField1`因为你使用`runat=server`

```
document.getElementById('<%=HiddenField1.ClientID %>').value = windowResult; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:04:09.253

**编辑**

**由于控件包含代码块（即 <% ... %>） ，因此**无法修改 Controls 集合****

 **```
<head id="head1" runat="server">
  <script>
   document.getElementById('<%=HiddenField1.ClientID %>').value = windowResult; 
  </script>    
</head> 
```

当您将 runat="server" 属性添加到标记时，运行时会将其视为 HtmlHead 控件。

**编辑**

您在评论中提供的错误的解决方案

**从页面的头部删除 JavaScript 并将其添加到页面的主体并使其正常工作**

检查：[错误文章](http://www.aspsnippets.com/Articles/The-Controls-collection-cannot-be-modified-because-the-control-contains-code-blocks-ie.aspx)

这将是

```
document.getElementById('<%=HiddenField1.ClientID %>').value = windowResult; 
```

因为在隐藏文件中是在服务器端，你需要获取文件的客户端 ID 才能在你的 javascript 中获取值。

## 对于 Asp.net 4.0

如果您使用的是 Asp.net 4.0 版本，请查看以下内容：[ASP.NET 4.0 Client ID Feature](http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature)

**Control.ClientIDMode 属性**- 获取或设置用于生成 ClientID 属性值的算法。

**AutoID** ClientID 值是通过将每个父命名容器的 ID 值与控件的 ID 值连接起来生成的。在呈现控件的多个实例的数据绑定方案中，将在控件的 ID 值前面插入一个递增值。每个段由下划线字符 (_) 分隔。此算法在早于 ASP.NET 4 的 ASP.NET 版本中使用。

**静态** ClientID 值设置为 ID 属性的值。如果控件是命名容器，则该控件用作它所包含的任何控件的命名容器层次结构的顶部。

**可预测** 此算法用于数据绑定控件中的控件。ClientID 值是通过将父命名容器的 ClientID 值与控件的 ID 值连接起来生成的。如果控件是生成多行的数据绑定控件，则在末尾添加 ClientIDRowSuffix 属性中指定的数据字段的值。对于 GridView 控件，可以指定多个数据字段。如果 ClientIDRowSuffix 属性为空，则在末尾添加序号，而不是数据字段值。这个数字从零开始，每行加 1。每个段由下划线字符 (_) 分隔。

**Inherit** 控件继承其 NamingContainer 控件的 ClientIDMode 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:03:31.140

你应该使用 ClientID，像这样

```
document.getElementById("<%= HiddenField1.ClientID %>").value = windowResult; 
```

您应该始终使用 ClientID，因为客户端上的 ID 根据服务器控件所在的容器而有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:04:23.793

我的印象是客户端 ID 只会分配给具有 runat="server" 属性的服务器控件 IE，但无论如何您可以使用属性 ClientIdMode="Static" 将 ClientID 设置为始终是您指定的那个或ClientIDMode="Predictable" 将 ClientID 设置为服务器生成但始终相同**

# java - 在哪里存储 MVC 模型中的内容以及组件如何通信？

> ID：10447530
> 
> 赞同：5
> 
> 时间：2012-05-04T11:00:12.407
> 
> 标签：java, swing, model-view-controller

我之前用 Java 创建了一些 GUI 应用程序，每次我真的只是在乱搞，直到事情完成我想要它做的事情，使用我在网上找到的几个 GUI 示例的片段。最近，我阅读了更多关于使用 Swing 在 Java 中编写 GUI 时的良好实践，但我仍然不清楚。让我首先描述一下我想在下一个项目中做什么，以便我们可以以此为例：

我想创建一个可执行的应用程序，让用户能够加载图像、对这些图像执行一些操作并保存项目。核心应该有一个主图像查看器，其下方有一个简单的导航器，用于在加载的图像之间切换。应该有带有对图像执行操作的按钮的面板（例如按钮“从图像中选择背景颜色”），并且应该可以选择从工具栏或菜单访问这些操作。

我知道例如 GUI 应该从 Event Dispatch Thread 启动，并且我可以使用 SwingWorker 进行耗时的操作。我还了解到，通过使用操作，我可以将功能与状态分开，并为面板按钮、工具栏按钮和菜单项创建一个操作。

我不明白的是所有这些东西是如何相互交流的，以及我把什么放在哪里。例如：我是否在一个单独的模型中维护我的程序的状态（因此当前显示的是哪个图像，设置了哪些设置）并将对该模型的引用放在我的主窗口类中？那么控制器呢？我是否保留对控制器中模型的引用是否正常？当我对图像进行一些计算时，我是从控制器更新 gui 中的图像，还是使用简单的重绘从 gui 本身更新图像？

我想我的主要问题是我真的不明白如何让我的程序的不同部分进行通信。一个 GUI 由很多部分组成，然后是所有这些动作和侦听器、模型、控制器，所有这些都需要以某种方式进行交互。我不断在所有这些对象中添加对几乎所有内容的引用，但这会使所有内容都变得非常混乱。

我在网上找到的另一个例子：http: [//www.devdaily.com/java/java-action-abstractaction-actionlistener](http://www.devdaily.com/java/java-action-abstractaction-actionlistener)

我理解这是如何工作的，但我不明白的是如何真正改变“会做'Cut'动作”。进入实际的切割动作。假设它涉及在查看器中从我的图像中剪切一部分，我会将图像传递给动作吗？如果这个过程需要很长时间，我会在动作中创建一个新的 SwingWorker 吗？然后我如何让 SwingWorker 在计算时更新 GUI？我是否会将 GUI 的引用传递给 SwingWorker，以便它可以不时更新它？

有没有人有一个很好的例子来说明如何做到这一点，或者可能有一些关于如何正确学习这个的提示，因为我有点茫然。有很多信息和很多不同的做事方式，我真的很想学习如何使用干净的代码创建可扩展的应用程序。是否有一个很好的开源项目，代码不多，可以很好地演示我描述的 GUI，以便我可以从中学习？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T15:28:22.430

我已经构建了一些 Swing 和 SWT GUI。我发现 GUI 需要它自己的模型 - 视图 (MV) 结构。应用程序控制器与 GUI 模型交互，而不是与 GUI 组件交互。

基本上，我为我的 GUI 中的每个 Swing JPanel 构建了一个 Java bean。GUI 组件与 Java bean 交互，应用程序控制器与 Java bean 交互。

这是我创建的 Spirograph GUI。

![在此处输入图像描述](../Images/0b5ace7b20e2ee6346982c38b3db56fb.png)

这是管理 Spirograph 参数的 Java bean。

```
import java.awt.Color;

public class ControlModel {

    protected boolean isAnimated;

    protected int jpanelWidth;
    protected int outerCircle;
    protected int innerCircle;
    protected int penLocation;
    protected int penSize;

    protected Color penColor;
    protected Color backgroundColor;

    public ControlModel() {
        init();
        this.penColor = Color.BLUE;
        this.backgroundColor = Color.WHITE;
    }

    public void init() {
        this.jpanelWidth = 512;
        this.outerCircle = 1000;
        this.innerCircle = 520;
        this.penLocation = 400;
        this.penSize = 2;
        this.isAnimated = true;
    }

    public int getOuterCircle() {
        return outerCircle;
    }

    public void setOuterCircle(int outerCircle) {
        this.outerCircle = outerCircle;
    }

    public int getInnerCircle() {
        return innerCircle;
    }

    public void setInnerCircle(int innerCircle) {
        this.innerCircle = innerCircle;
    }

    public int getPenLocation() {
        return penLocation;
    }

    public void setPenLocation(int penLocation) {
        this.penLocation = penLocation;
    }

    public int getPenSize() {
        return penSize;
    }

    public void setPenSize(int penSize) {
        this.penSize = penSize;
    }

    public boolean isAnimated() {
        return isAnimated;
    }

    public void setAnimated(boolean isAnimated) {
        this.isAnimated = isAnimated;
    }

    public Color getPenColor() {
        return penColor;
    }

    public void setPenColor(Color penColor) {
        this.penColor = penColor;
    }

    public Color getBackgroundColor() {
        return backgroundColor;
    }

    public void setBackgroundColor(Color backgroundColor) {
        this.backgroundColor = backgroundColor;
    }

    public int getJpanelWidth() {
        return jpanelWidth;
    }

    public int getJpanelHeight() {
        return jpanelWidth;
    }

} 
```

编辑添加控制面板类。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JToggleButton;
import javax.swing.SwingConstants;

import com.ggl.spirograph.model.ControlModel;

public class ControlPanel {

    protected static final Insets entryInsets = new Insets(0, 10, 4, 10);
    protected static final Insets titleInsets = new Insets(0, 10, 20, 10);

    protected ControlModel model;

    protected DrawingPanel drawingPanel;

    protected JButton drawButton;
    protected JButton stopButton;
    protected JButton resetButton;
    protected JButton foregroundColorButton;
    protected JButton backgroundColorButton;

    protected JLabel message;

    protected JPanel panel;

    protected JTextField outerCircleField;
    protected JTextField innerCircleField;
    protected JTextField penLocationField;
    protected JTextField penSizeField;
    protected JTextField penFadeField;

    protected JToggleButton animationToggleButton;
    protected JToggleButton fastToggleButton;

    protected static final int messageLength = 100;
    protected String blankMessage;

    public ControlPanel(ControlModel model) {
        this.model = model;
        this.blankMessage = createBlankMessage();
        createPartControl();
        setFieldValues();
        setColorValues();
    }

    public void setDrawingPanel(DrawingPanel drawingPanel) {
        this.drawingPanel = drawingPanel;
    }

    protected String createBlankMessage() {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < messageLength / 4; i++) {
            sb.append("    ");
        }
        return sb.toString();
    }

    protected void createPartControl() {
        panel = new JPanel();
        panel.setLayout(new GridBagLayout());

        int gridy = 0;

        JLabel title = new JLabel("Spirograph Parameters");
        title.setHorizontalAlignment(SwingConstants.CENTER);
        addComponent(panel, title, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        resetButton = new JButton("Reset Default Parameters");
        resetButton.setHorizontalAlignment(SwingConstants.CENTER);
        resetButton.addActionListener(new ResetButtonListener());
        addComponent(panel, resetButton, 0, gridy++, 4, 1, entryInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        JLabel outerCircleLabel = new JLabel("Outer circle radius:");
        outerCircleLabel.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, outerCircleLabel, 0, gridy, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        outerCircleField = new JTextField(5);
        outerCircleField.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, outerCircleField, 2, gridy++, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel innerCircleLabel = new JLabel("Inner circle radius:");
        innerCircleLabel.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, innerCircleLabel, 0, gridy, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        innerCircleField = new JTextField(5);
        innerCircleField.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, innerCircleField, 2, gridy++, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel penLocationLabel = new JLabel("Pen location radius:");
        penLocationLabel.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, penLocationLabel, 0, gridy, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        penLocationField = new JTextField(5);
        penLocationField.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, penLocationField, 2, gridy++, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        JLabel penSizeLabel = new JLabel("Pen size:");
        penSizeLabel.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, penSizeLabel, 0, gridy, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        penSizeField = new JTextField(5);
        penSizeField.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, penSizeField, 2, gridy++, 2, 1, entryInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        message = new JLabel(blankMessage);
        message.setForeground(Color.RED);
        message.setHorizontalAlignment(SwingConstants.LEFT);
        addComponent(panel, message, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.HORIZONTAL);

        title = new JLabel("Drawing Speed");
        title.setHorizontalAlignment(SwingConstants.CENTER);
        addComponent(panel, title, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        JPanel buttonPanel = new JPanel(new GridLayout(1, 2, 4, 0));

        animationToggleButton = new JToggleButton("Animated");
        animationToggleButton.setSelected(model.isAnimated());
        animationToggleButton.setHorizontalAlignment(SwingConstants.CENTER);
        animationToggleButton.addActionListener(new DrawingSpeedListener(
                animationToggleButton));
        buttonPanel.add(animationToggleButton);

        fastToggleButton = new JToggleButton("Fast");
        fastToggleButton.setSelected(!model.isAnimated());
        fastToggleButton.setHorizontalAlignment(SwingConstants.CENTER);
        fastToggleButton.addActionListener(new DrawingSpeedListener(
                fastToggleButton));
        buttonPanel.add(fastToggleButton);

        addComponent(panel, buttonPanel, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        title = new JLabel("Drawing Colors");
        title.setHorizontalAlignment(SwingConstants.CENTER);
        addComponent(panel, title, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        buttonPanel = new JPanel(new GridLayout(1, 2, 4, 0));

        foregroundColorButton = new JButton("Pen");
        foregroundColorButton.setHorizontalAlignment(SwingConstants.CENTER);
        foregroundColorButton.addActionListener(new ColorSelectListener(
                foregroundColorButton));
        buttonPanel.add(foregroundColorButton);

        backgroundColorButton = new JButton("Paper");
        backgroundColorButton.setHorizontalAlignment(SwingConstants.CENTER);
        backgroundColorButton.addActionListener(new ColorSelectListener(
                backgroundColorButton));
        buttonPanel.add(backgroundColorButton);

        addComponent(panel, buttonPanel, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        title = new JLabel("Drawing Controls");
        title.setHorizontalAlignment(SwingConstants.CENTER);
        addComponent(panel, title, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);

        buttonPanel = new JPanel(new GridLayout(1, 2, 4, 0));

        drawButton = new JButton("Draw");
        drawButton.setHorizontalAlignment(SwingConstants.CENTER);
        drawButton.addActionListener(new DrawButtonListener());
        buttonPanel.add(drawButton);

        stopButton = new JButton("Stop");
        stopButton.setHorizontalAlignment(SwingConstants.CENTER);
        stopButton.addActionListener(new StopButtonListener());
        buttonPanel.add(stopButton);

        addComponent(panel, buttonPanel, 0, gridy++, 4, 1, titleInsets,
                GridBagConstraints.CENTER, GridBagConstraints.HORIZONTAL);
    }

    protected void addComponent(Container container, Component component,
            int gridx, int gridy, int gridwidth, int gridheight, 
            Insets insets, int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
                gridwidth, gridheight, 1.0, 1.0, anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

    protected void setFieldValues() {
        outerCircleField.setText(Integer.toString(model.getOuterCircle()));
        innerCircleField.setText(Integer.toString(model.getInnerCircle()));
        penLocationField.setText(Integer.toString(model.getPenLocation()));
        penSizeField.setText(Integer.toString(model.getPenSize()));
    }

    protected void setColorValues() {
        foregroundColorButton.setForeground(model.getBackgroundColor());
        foregroundColorButton.setBackground(model.getPenColor());

        backgroundColorButton.setForeground(model.getPenColor());
        backgroundColorButton.setBackground(model.getBackgroundColor());
    }

    public JPanel getPanel() {
        return panel;
    }

    public class ResetButtonListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            model.init();
            setFieldValues();
        }

    }

    public class StopButtonListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            drawingPanel.stop();
        }

    }

    public class DrawButtonListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent event) {
            message.setText(blankMessage);

            int ocTest = isNumeric(outerCircleField.getText());
            int icTest = isNumeric(innerCircleField.getText());
            int plTest = isNumeric(penLocationField.getText());
            int psTest = isNumeric(penSizeField.getText());

            boolean isInvalid = false;

            if (psTest < 0) {
                message.setText("Pen size is not a valid integer");
                isInvalid = true;
            }

            if (plTest < 0) {
                message.setText("Pen location radius is not a valid integer");
                isInvalid = true;
            }

            if (icTest < 0) {
                message.setText("Inner circle radius is not a valid integer");
                isInvalid = true;
            }

            if (ocTest < 0) {
                message.setText("Outer circle radius is not a valid integer");
                isInvalid = true;
            }

            if (isInvalid) {
                return;
            }

            if (ocTest > 1000) {
                message.setText("The outer circle cannot be larger than 1000");
                isInvalid = true;
            }

            if (ocTest <= icTest) {
                message.setText("The inner circle must be smaller than the outer circle");
                isInvalid = true;
            }

            if (icTest <= plTest) {
                message.setText("The pen location must be smaller than the inner circle");
                isInvalid = true;
            }

            if (isInvalid) {
                return;
            }

            model.setOuterCircle(ocTest);
            model.setInnerCircle(icTest);
            model.setPenLocation(plTest);
            model.setPenSize(psTest);

            drawingPanel.draw(model.isAnimated());
        }

        protected int isNumeric(String field) {
            try {
                return Integer.parseInt(field);
            } catch (NumberFormatException e) {
                return Integer.MIN_VALUE;
            }
        }

    }

    public class DrawingSpeedListener implements ActionListener {

        JToggleButton selectedButton;

        public DrawingSpeedListener(JToggleButton selectedButton) {
            this.selectedButton = selectedButton;
        }

        @Override
        public void actionPerformed(ActionEvent arg0) {
            if (selectedButton.equals(animationToggleButton)) {
                model.setAnimated(true);
            } else {
                model.setAnimated(false);
            }

            animationToggleButton.setSelected(model.isAnimated());
            fastToggleButton.setSelected(!model.isAnimated());
        }

    }

    public class ColorSelectListener implements ActionListener {

        JButton selectedButton;

        public ColorSelectListener(JButton selectedButton) {
            this.selectedButton = selectedButton;
        }

        @Override
        public void actionPerformed(ActionEvent arg0) {
            if (selectedButton.equals(foregroundColorButton)) {
                Color initialColor = model.getPenColor();
                Color selectedColor = JColorChooser.showDialog(drawingPanel,
                        "Select pen color", initialColor);
                if (selectedColor != null) {
                    model.setPenColor(selectedColor);
                }
            } else if (selectedButton.equals(backgroundColorButton)) {
                Color initialColor = model.getBackgroundColor();
                Color selectedColor = JColorChooser.showDialog(drawingPanel,
                        "Select paper color", initialColor);
                if (selectedColor != null) {
                    model.setBackgroundColor(selectedColor);
                }
            }
            setColorValues();
        }

    }

 } 
```

# c# - 使用 Jquery 禁用 ASPX 页面上的背景或所有控件

> ID：10447534
> 
> 赞同：0
> 
> 时间：2012-05-04T11:00:37.537
> 
> 标签：c#, javascript, jquery, asp.net, dialog

我正在使用此代码显示一个对话框，该对话框将确认删除按钮，它工作正常，但是当它弹出时它不会禁用 ASP.Net 页面的任何控件，因此我可以单击任何控件或文本框，

我想做的第一件事是在 Jquery 打开我的 Div 标签框时淡出页面，然后禁用所有控件。

这是代码

**Div（自定义对话框）**

```
 <div id="divConfMessage">
        <div align="center">
            <br /><asp:Label ID="Label1"  runat="server" Text="Deleting this eDecision will remove all site content and uploaded documents. Are you sure you wish to continue?" CssClass="headertext"></asp:Label><br /><br /><br /><br /><br />
            <asp:Button ID="btnConfOK" Width="200px" Height="25px" CssClass="gradientbutton" OnClick="btDelete_Click" Runat="server" Text="Yes"></asp:Button>
            <asp:Button ID="btnConfCancel" Width="200px" Height="25px" CssClass="gradientbutton" Runat="server" Text="No"></asp:Button><br /><br /><br />
        </div>
</div> 
```

**脚本 (jquery)**

```
 <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("input[id$='btDelete']").click(function() 
        {
        $("#divConfMessage").fadeIn();
        });
    });
</script> 
```

**按钮**

```
 <td>
    <asp:Button ID="btDelete" runat="server" CssClass="gradientbutton" OnClick="btDelete_Click"
    OnClientClick="this.disabled=true;this.value='Please Wait...';" Text="Delete" Width="200px"  />
</td> 
```

**对话框的 CSS**

```
 #divConfMessage
{
    position: absolute;
    width: 500px;
    height: 200px;
    top: 50%;
    left: 30%;
    margin-left: -150px; /* Negative half of width. */
    margin-top: -100px; /* Negative half of height. */
    border: 2px solid #000;
    DISPLAY:none;
    background-color:White;
    line-height:20px;
    text-align:center;
} 
```

**笔记**

除了 CSS 之外，所有代码都在页面的 ASP 内容占位符中，我有 2 个具有不同控件的另一个内容 + 一个定义所有这些内容占位符的母版页。

```
<asp:Content ID="Content4" ContentPlaceHolderID="cphSubmit" runat="server">
<%@ Page Language="C#" MasterPageFile="~/my.Master" AutoEventWireup="true" CodeBehind="c.aspx.cs" Inherits="a.b.c" Title="e"  meta:resourcekey="PageResource1"  %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:02:09.920

设置模态=真；对于 dilogbox 有 modal 属性，您可以将其设置为 True。

尝试使用[Jquery 对话框](http://jqueryui.com/demos/dialog/#modal-message)（它带有 JqueryUI 插件）。

```
$( "#YourDivorContainerToShowAsDialog" ).dialog({
            modal: true,
            buttons: {
                Ok: function() {
                    $( this ).dialog( "close" );
                }
            }
        }); 
```

编辑：如果你不想使用按钮，然后像这样使用

```
 $( "#YourDivorContainerToShowAsDialog" ).dialog({
                modal: true             
            }); 
```

或者如果你想使用 CSS 那么你可以试试

```
#YourDivorContainerToShowAsDialog 
{
position: absolute;
Z-index: withMaxValue
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:19:19.080

给出一个更高**`Z-index`**的值 `#divConfMessage`，然后模态 dalog 将位于一切之上。

当您添加对话框时，以这种方式将其附加到正文：

```
 add_block_page();
 add_modal_box();

function add_block_page(){
    var block_page = $('<div class="page"></div>');
    $(block_page).appendTo('body');
}

function add_modal_box(){
    var pop_up = $('<div id="divConfMessage"></div>');
     $(pop_up).appendTo('.page');
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T12:12:53.217

使用一张透明图像淡出页面。

添加一个 outerDiv 并将图像应用到 div。

```
<div id="outerDiv"  style="display:none;">
<div id="divConfMessage">
        <div align="center">
            <br /><asp:Label ID="Label1"  runat="server" Text="Deleting this eDecision will remove all site content and uploaded documents. Are you sure you wish to continue?" CssClass="headertext"></asp:Label><br /><br /><br /><br /><br />
            <asp:Button ID="btnConfOK" Width="200px" Height="25px" CssClass="gradientbutton" OnClick="btDelete_Click" Runat="server" Text="Yes"></asp:Button>
            <asp:Button ID="btnConfCancel" Width="200px" Height="25px" CssClass="gradientbutton" Runat="server" Text="No"></asp:Button><br /><br /><br />
        </div>
</div>
</div> 
```

用于外层的 CSS

```
# outerDiv
{
top:0%;
left:0%;
position:absolute;
background-image:url('../img/FloatingPanel.png');//transperant image
color:White;
z-index: 1102;
Height:100%;
width:100%;
} 
```

为#divConfMessage 提供比outerDiv 的Z-index 更高的Z-index（即：1103）。显示btDelete的outerDiv onclick

# php - 如何在 php 中加密 $_GET 数据？

> ID：10447536
> 
> 赞同：1
> 
> 时间：2012-05-04T11:00:46.830
> 
> 标签：php, variables, encryption, get

就像在 php 中我们使用 $_GET 在 url 中传递变量一样，我想传递包括我想要匿名的用户 id 的变量，所以可以做一些事情来在传递变量和变量之前加密变量一旦取到页面上，就可以解密得到原始变量值。

例如：

在传递变量之前 $id=10;

以 $id=dasfgjg 的形式传入 url；

从 url 获取并解密 $id=10;

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:17:33.500

如果您打算仅在服务器端加密/解密，则可以使用 RC4 密码

[http://www.phpkode.com/source/s/rc4-cipher-0-1/rc4-cipher-0-1/RC4.php](http://web.archive.org/web/20121103182123/http://www.phpkode.com/source/s/rc4-cipher-0-1/rc4-cipher-0-1/RC4.php)

```
$my_secret_key = '3klmsd94mms.saeo44o!!3le';

if( isset($_GET['p']) ) {
  $id = RC4::decrypt($my_secret_key, $_GET['p']);
  // ....
}
else {
  echo '<a href="/?p='.RC4::encrypt($my_secret_key, 12).'">Go to the page</a>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:02:33.310

只需为数据库中的每条记录生成随机字符串（确保它是唯一的）并将其保存在那里。然后将其用作标识符。请注意，当然，这与加密无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:08:38.137

一种快速而肮脏的方式来实现这一点（对于每个请求）

*   在客户端上，创建一个类似于 'xx:10:yy' 的字符串，其中 xx 和 yy 是由 pf 随机字符组成的字符串
*   在客户端上，创建用户加盐/散列密码的加盐散列
*   将此哈希用作密钥，将第一个项目符号中的字符串用作明文以使用例如 crypt.js 进行加密
*   在请求中发送加密字符串和盐
*   在服务器上使用传输的盐和用户加盐/哈希密码来恢复密钥
*   在服务器上使用 mcrypt 或朋友来解密字符串
*   在服务器上使用标准 PHP 文本处理函数从解密的字符串中恢复有效负载

# java - 如何删除临时重定向（HTTP 307）上的帖子参数？

> ID：10447541
> 
> 赞同：0
> 
> 时间：2012-05-04T11:01:03.797
> 
> 标签：java, http, redirect, header, response

我在重定向请求时遇到问题。我有一个传入的[GET](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)或[POST](http://en.wikipedia.org/wiki/POST_%28HTTP%29)。`http://foo.com/bar?A=b`我使用 HTTP 307 将其重定向到`http://hockily.com/dockily?C=d&E=f`.

但是在 hockily.com 上，我同时拥有 A、C 和 E。A 在 GET 参数上，C 和 E 在 POST 参数上。我需要删除 A。我不应该发送它。我怎样才能做到这一点？

我正在使用 Java`Response`来获得类似的回报

```
return Response.temporaryRedirect(
    URI.create((String) s.get("redirectString"))
).build(); 
```

请随时评论我无法提供的额外信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:49:54.830

在 POST 请求后将客户端从新 URI 重定向到 GET 的正确 HTTP 状态代码是 303。您应该改用该`seeOther()`方法。

# android - 重用选项菜单 xml - 这是一种好习惯吗

> ID：10447546
> 
> 赞同：0
> 
> 时间：2012-05-04T11:01:24.270
> 
> 标签：android, options-menu

在多个活动中使用相同的选项菜单是否被认为是一种好习惯？

例如：

您有许多“编辑对象”活动，每个活动容纳不同的对象。“编辑对象”活动中的选项菜单将允许用户保存、丢弃（如果用户正在添加新项目）或删除（如果正在编辑）对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:09:51.647

如果每个对象都有相同的菜单，请使用它。如果您不需要它，则没有理由拥有 x 个相同的文件。当您想要更改某些内容时，在一个文件中就像在多个文件中一样更容易。

# mysql - 数据库更改时可以自动更新图形吗？

> ID：10447549
> 
> 赞同：1
> 
> 时间：2012-05-04T11:01:54.567
> 
> 标签：mysql, r, statistics, business-intelligence

我正在与 R 合作为我的公司创建一些图表，下一步是让它们在线并动态更新。

图形是通过与 MySQL 数据库的连接生成的。该数据库每天都有新条目，我希望图形随着数据库的变化而更新。

是否可以在线发布图形并对其进行频繁更新？使脚本自动运行并替换服务器上的文件...也许使用其他一些工具或软件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:13:52.823

您可以让守护程序/cron 查询数据库以获取更新，然后重新创建图形并将其发布到服务器。如果数据库对象是从 1 个表创建的，您可以查看使用`trigger`并`lib_mysqludf_sys sys_exec`调用外部脚本来重新创建和发布图形。启用/使用`lib_mysqludf_sys`. 脚本以`sys_exec`运行 mysql db 的用户身份运行，因此可以恶意使用它来破坏 db，并且如果安装了 mysqldb 的所有用户都可以使用它。

# javascript - Chrome 中的 DOM 访问

> ID：10447558
> 
> 赞同：0
> 
> 时间：2012-05-04T11:02:42.913
> 
> 标签：javascript, dom, google-chrome

我在玩 Chrome 时注意到这两个功能的工作方式相同：

```
<img src="picture.jpg" id="myelement" />

function stuff(){
var x=document.getElementById("myelement");
x.style.display="none";
}//works almost everywhere

function stuff(){
myelement.style.display="none";
}//only works in Chrome 
```

为什么 Chrome 允许我直接从 id 访问元素而不使用“getElementById”？这样做是不好的做法吗？会影响性能吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:04:06.063

Chrome 会自动创建与每个具有 id 的元素相对应的全局变量。在生产代码中使用这些变量是一个非常糟糕的主意，因为在 javascript 中没有变量是静态的 - 有人可能后来分配了其他东西，`myelement`而您无法知道。

如果你确实使用了这个特性（大概是在测试环境中，比如控制台），我猜它会比 快`getElementById()`，因为分配`myelement`给相应节点的代码无论如何都会先运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:23:04.020

不，它不会损害性能，Firefox 也允许这样做。即使出现变量名冲突情况，局部变量也将获得优先权。

像

<img src="picture.jpg" id="myelement" />

函数东西（）

{

var myelement="测试变量";

myelement.style.display="none"; //这将导致错误，因为**myelement**现在是一个变量

}

# php - 如何检查 PHPUnit 正确抛出的异常？

> ID：10447568
> 
> 赞同：3
> 
> 时间：2012-05-04T11:03:03.320
> 
> 标签：php, exception, phpunit, testcase

我的 CalTest 类中的 Cal 类中有 div() 有以下方法来测试 div()。

```
public fucnction div($a,$b){
   if($b == 0){
    throw new Exception("Divided by zero");
   }
   return $a/$b
} 
```

我只能通过 testDiv() 但 testDiv2()。

![在此处输入图像描述](../Images/2a0bf443f77ade06062694ecd203f6b5.png)

我想检查一下使用 PHPUnit 正确抛出的异常。我在这里想念什么？非常感谢您的帮助。谢谢！

![在此处输入图像描述](../Images/ea4ce3304fb95762f8e1d19c17cc2a85.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:21:45.233

您的第二张截图（有错误的截图）有

> “@expectedException 异常”

而第三个有

> @expectedException InvalidArgumentException

你真的仍然得到错误吗？你保存文件了吗？

* * *

为我工作：

## Foo.php

```
<?php

class Foo
{
    static function t()
    {
        throw new InvalidArgumentException('Hi there');
    }
}

?> 
```

## FooTest.php

```
<?php
require_once 'Foo.php';
class FooTest extends PHPUnit_Framework_TestCase
{
    /**
     * @expectedException InvalidArgumentException
     */
    public function testT()
    {
        Foo::t();
    }
}

?> 
```

## 结果

```
$ phpunit .
PHPUnit 3.6.10 by Sebastian Bergmann.

.

Time: 0 seconds, Memory: 5.25Mb

OK (1 test, 1 assertion) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:31:05.313

刚刚遇到同样的问题。出于某种原因，PHPUnit 不允许您将 设置`expectedException`为通用异常，我不知道为什么。就我个人而言，我选择抛出自定义异常代码，而不是每次我想区分异常时都必须创建一个新的异常类。

这是我解决它的方法：

```
/**
 * @expectedException Test_Exception
 */
public function testDivByZero()
{
    try {
        // Fyi you don't need to do an assert test here, as we are only testing the exception, so just make the call
        $result = $this->object->div(1,0);
    } catch (Exception $e) {
        if ('Exception' === get_class($e)) {
            throw new Test_Exception($e->getMessage(), $e->getCode());
        }
    }
 }

 // Test_Exception.php
 class Test_Exception extends Exception
 {
     public function __construct($message = null, $code = 0, Exception $previous = null)
     {
         parent::__construct($message, $code, $previous);
     }
 } 
```

这将允许您以您想要的方式设计您的代码，并抛出“通用”异常。基本上它只是测试 Exception 类，如果它是通用的，则将其重新包装为不同的异常；测试异常。

**- 更新 -**

昨天发现他们已经[删除了当前“master”分支中的通用异常限制](https://github.com/sebastianbergmann/phpunit/pull/88)，这将是 3.7。显然，首席工程师不想修补 3.6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:38:22.237

它在 PHPUnit 抛出的异常中是这样说的：

> 您不能排除通用异常类。

让您的类抛出[更详细的 Exceptions](http://php.net/manual/en/spl.exceptions.php)，并进一步指定您在单元测试中期望的异常类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-30T17:00:10.460

此问题已在`PHPUnit 3.7.x`

您可以在 PHPUnit 3.7.x 中使用以下通用异常

```
 /**
     * @expectedException Exception     
     */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T18:16:01.390

你可以做这样的事情

编写单元测试，以便注入触发异常所需的值

//断言 $this->assertTrue($this->setExpectedException('PHPUnit_Framework_ExpectationFailedException'));

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T16:08:39.727

我创建了一个父类方法来做到这一点。事实上，这个类来自 laravel，但在任何情况下都是有效的。

这个方法最酷的部分是在 PHP 中使用匿名函数

```
<?php
class TestCase 
         /* if you are not using laravel, you dont need this 
        extends Illuminate\Foundation\Testing\TestCase */ {

    protected function assertThrows( $function , $classException = "/Exception" )
    {
        try 
        {
            // Anonymous functions FTW
            $function();
        }
        catch( /Exception $objException )
        {
            // the assertInstanceOf should solve from here but
            // it is not working that great
            // @see http://stackoverflow.com/questions/16833923/phpunit-assertinstanceof-not-working
            if( $objException instanceof $classException ) {
                return $this->assertTrue( true );
            } else {
                // this will throw a error with a cool message
                return $this->assertEquals( $classException  , get_class( $objException ));
            }
        }
        // no exception happened.
        return $this->fail( "Exception " . $classException . " expected." );
    }

}

class LanguageTest extends TestCase {

    /**
     * Test the translation
     *
     * @return void
     */
    public function testTranslation()
    {
        // this test may be ok
        $this->assertThrows( 
            function(){ throw new Full\Path\Exception(":("); }, 
            "Full\Path\Exception" );

        // this test may fail 
        $this->assertThrows( 
            function(){ return 1 + 1; }, 
            "Some\Excepted\Exception" );

        // this test may work 
        $this->assertThrows( 
            function(){ throw new Exception( "sad" ); }
        );
    }

} 
```

# algorithm - 将运行时间减少到 O(n)

> ID：10447569
> 
> 赞同：2
> 
> 时间：2012-05-04T11:03:12.657
> 
> 标签：algorithm

我得到了这个关于硬件的问题，但我不知道该怎么做：
数组 A[1...n] 包含从 0 到 n 的所有整数，除了一个。数组未排序。
在这个问题中，我们不能通过单个操作访问 A 中的整个整数。
A 的元素以二进制表示，我们可以用来访问它们的唯一操作是“获取 A[i] 的第 j 位”，这需要恒定的时间。

我必须在 O(n) 时间内找到丢失的整数。

正常执行此操作所需的时间是 O(NlgN) （在 N 数组上运行，并获取所有作为 N - lgn 位函数的位）。

如果不阅读所有位，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:15:08.883

现在让我们假设对于某些 k，n 是 2^k - 1。

让我们再看一个 k = 3 的例子。

```
000
001
010
011
100
101
110
111 
```

你会注意到，当有一个完整的集合时，就像上面显示的那样，每一列（每个数字的位置）都有相同数量的 1 和 0。当然，为方便起见，我们将其显示为已排序，但实际上，我并不是说它是排序的。

我们来看看下面的列表

```
000
001
010
011
100
110
111 
```

我们查看所有元素的第一位（ O(n) ）并找出哪个计数小于另一个。

我们看到，对于第一位，有一个数字，其最高有效位中的 1 缺失。这意味着我们知道我们的数字在其最高有效位中有一个。

基本上，我们分成两组，一组最高有效位为 1，另一组最高有效位为 0。较小的一组向我们展示了缺失数字的位。

我们在较小的分区上做同样的事情。

Since it is O(n) + O(n/2) + O (n/4) ... it is basically O (2n) which is O (n).

**EDIT**

For the general case, refer to [the following document, bottom of page 1](http://www.cs.ucdavis.edu/~martel/222a/samp.hw.pdf).

Basically, it involves making use of the fact that when n is not a power of two, you can take into account the fact that given n, you know exactly how many should fall under the bit=1 partition and the bit=0 partition if this was a complete set.

# c# - 浮动左属性在同步融合 HTML 到 PDF 转换中不起作用

> ID：10447570
> 
> 赞同：0
> 
> 时间：2012-05-04T11:03:19.200
> 
> 标签：c#, asp.net, .net, pdf, pdf-generation

我在我的 html 代码 css 属性 float left 属性中使用 syncfusion pdf 报告，我应用在 div 上的属性不起作用请给出任何建议

这是我的代码

```
"<div name=\"divname\" style=\"width: 450px; float: left; text-align: right; height: 30px;\">"+
                "<div style=\"width: 100px; text-align: right; height: 30px; float: left; position: relative;\">"+
                    "<span>Client Name: </span>"+
                "</div>"+
                "<div style=\"width: 325px; padding-left: 10px; text-align: left; height: 30px; position: relative; float: left;\">"+
                    "1233"+
                "</div>"+
            "</div>"+
            "<div name=\"divcompany\" style=\"width: 450px; float: left; text-align: right; height: 30px;\">"+
                "<div style=\"width: 100px; text-align: right; height: 30px; float: left; position: relative;\">"+
                    "<span>Company: </span>"+
                "</div>"+
                "<div style=\"width: 325px; padding-left: 10px; text-align: left; height: 30px; position: relative; float: left;\">"+
                     "1233"+
                "</div>"+
            "</div>"+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:56:53.303

Syncfusion Essential PDF 使用 Internet Explorer Web 浏览器控件通过生成 EMF 将 html 文件呈现为 PDF 文档。PDF 文档将与在 IE 浏览器中呈现的 HTML 文件相同。

您已将文本右对齐，将 text-align 属性设置为“左”以使您的 div 内容左对齐。

问候，乔治

# forms - Zend :: 将 get 参数从 controller/action?param=value 更改为 controller/action/param/value

> ID：10447572
> 
> 赞同：1
> 
> 时间：2012-05-04T11:03:21.407
> 
> 标签：forms, zend-framework, url, redirect, get

我有一个带有 get 方法的表格。在提交查询字符​​串出现在 url 之后？标记。但我希望它像 url 一样 zend

从：controller/action?param=value 到：controller/action/param/value

我应该使用 javascript 重定向吗？或者创建一个辅助函数 zend 来完成这项工作？有没有更好的解决方案？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:52:21.710

这取决于你的行动。假设您的表单操作就像`'somecontroller/test'`

```
Public function testAction(){
//codes

//You must be redirecting like this
$this->_redirect('/anothercontroller/fooaction?param=value');

//You can change that to
$this->_redirect('/anothercontroller/fooaction/param/value');

} 
```

这样您就可以在该 fooaction 中获得该值

```
 $this->_request->getParam('param'); 
```

# java - 如何从 JPA 查询中获取结果，按自定义条件过滤

> ID：10447573
> 
> 赞同：0
> 
> 时间：2012-05-04T11:03:26.457
> 
> 标签：java, jpa-2.0, jpql, criteria-api

是否有机会通过似乎只是一个 java 函数的复杂自定义条件来过滤查询结果？我希望这个标准函数在实体创建和将其放入结果集合之间发挥作用。例如，我有以下实体和查询

```
@Entity
@NamedQueries{
    @NamedQuery(name="myquery",query="...")
}
class MyEntity{
    @Id
    public long id;

    @Column(name="NAME")
    public String name;

    @Column(name="description")
    public String description;
} 
```

我可以执行`myquery`并指定分页参数以获取具有固定大小的结果集。但是我想做一些额外的复杂过滤，不能用查询来表达。如果我制作一些后查询处理功能并使用它来过滤查询结果，我会破坏分页不变量，页面大小。这不会很好和方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:10:10.183

没有简单的方法可以做到这一点。`setFirstResult()`和`setMaxResults()`方法应用于生成的 SQL 查询。例如，在 MySQL 中，`LIMIT (10, 10)`被添加到查询的 where 子句中）。因此，如果您在执行查询后过滤结果，您将始终获得较少数量的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:18:16.697

NamedQueries 是实现这一目标的错误方法。

您需要即时构建查询。

```
EntityManager em=....
Query queryObject = em.createQuery(queryString); 
```

或者

```
Query queryObject = em.createNativeQuery(queryString); 
```

# android - 从消息中获取返回数据到 Android 处理程序

> ID：10447574
> 
> 赞同：4
> 
> 时间：2012-05-04T11:03:29.123
> 
> 标签：android, handler

今天，我将一些数据发送到处理程序，以对 OpenFeint 方法进行非静态调用。一切都很好，直到我不知道如何检索信息。

主类中的方法调用：

```
public static float getPercentageAchievement(String idAchievement) {
    Message msg = new Message();
    msg.what = OpenFeintXHandler.GET_PERCENTAGE_ACHIEVEMENT;
    Bundle args = new Bundle();
    args.putString(BUNDLE_ARG_1, idAchievement);
    msg.setData(args);
    ms_kOpenFeintHandler.sendMessage(msg);
    return msg.getData().getFloat(BUNDLE_RETURN); // msg is empty here
} 
```

处理程序类中的消息处理：

```
case GET_PERCENTAGE_ACHIEVEMENT:
        msg.getData().putFloat(
                OpenFeintX.BUNDLE_RETURN,
                otherGetPercentageAchievement(msg.getData().getString(
                        OpenFeintX.BUNDLE_ARG_1)));
        break; 
```

处理程序类中的测试方法：

```
private float otherGetPercentageAchievement(String idAchievement) {     
    return 200;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:10:25.377

您可以以这种格式设置数据

设置数据时

```
Message msg = new Message();
msg.obj = data which you want to set // for object data
Msg.arg1  = data which you want to set // for integer data 
```

在获取数据时

```
String data = (String) msg.obj; // If object is of String
int integerData = msg.arg1; 
```

`msg.arg1`一次只传递一个数据你也可以传递数据`msg.arg2`它们都是整数类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:09:06.957

但是为什么要坚持接收消息中的返回值呢？认为消息是异步发送的，因此可以在处理程序中设置值之前执行返回语句......

我会做：

```
String data=otherGetPercentageAchievement(msg.getData().getString(OpenFeintX.BUNDLE_ARG_1));
//use the data directly in the handler...set a variable in other class or whatever you want to do here. 
```

# c++ - 错误 C2308：连接不匹配的字符串

> ID：10447577
> 
> 赞同：4
> 
> 时间：2012-05-04T11:03:33.583
> 
> 标签：c++, c, windows, visual-c++, unicode

在尝试编译Visual Studio 2010 中的 Rosettacode 中存在的[C 中的迷宫生成器/求解器时](http://rosettacode.org/wiki/Maze_generation#C)，我在编译过程中遇到了问题。

以下行

```
#   define SPC "　"
wchar_t glyph[] = L""SPC"│││─┘┐┤─└┌├─┴┬┼"SPC"┆┆┆┄╯╮ ┄╰╭ ┄"; 
```

正在抛出错误

```
1>d:\projects\maze_cpp\maze_cpp\main.cpp(14): error C2308: concatenating mismatched strings
1>          Concatenating wide "" with narrow "?????? ??? ?" 
```

考虑到我对 Unicode 的了解有限，以及[MSDN](http://msdn.microsoft.com/en-us/library/86888ehe%28v=vs.71%29.aspx)中对错误的不友好描述，我对这个问题以及如何解决它感到困惑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:07:15.067

您需要转义`"`宽字符串文字中的 s ：

```
wchar_t glyph[] = L"\"SPC\"¦¦¦-++¦-+++---+\"SPC\"?????? ??? ?"; 
```

编辑：

我错过了`SPC`宏（正如 Luchian 和 jrok 已经发布的那样）：

```
#define SPC L"  "
wchar_t glyph[] = L"" SPC L"¦¦¦-++¦-+++---+" SPC L"?????? ??? ?"; 
```

# c# - Azure WCF 服务在 blob 存储文件上出现错误

> ID：10447583
> 
> 赞同：1
> 
> 时间：2012-05-04T11:03:51.307
> 
> 标签：c#, wcf, azure

我有一个带有 WCF 服务作为 WebRole 的 Windows Azure 项目。我在 Azure 中有一个存储帐户，我想在其中保存文件。

我的代码在我使用 Azure 模拟器进行测试时工作。

但知道我得到了下一个错误：

```
Could not find a part of the path 'C:\temp\BatchAzure.log'. 
```

客户端我正在尝试执行的服务：

```
 string path = @"C:\temp\BatchAzure.log";
    var test = service.SaveGezichtBestand(path, "999999"); 
```

我正在使用的方法：

```
public bool SaveGezichtBestand(string filePath, string memberID)
        {
            bool result = false;

            CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
            RoleEnvironment.GetConfigurationSettingValue("StorageConnectionString"));

            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

            // Retrieve a reference to a container 
            CloudBlobContainer container = blobClient.GetContainerReference("facefileblobcontainer");

            // Create the container if it doesn't already exist
            container.CreateIfNotExist();

            //By default, the new container is private, so you must specify your storage account key (as you did above) 
            //to download blobs from this container.
            container.SetPermissions(new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Blob });

            // Retrieve reference to a blob named "myblob"
            CloudBlob blob = container.GetBlobReference(memberID);

            try
            {
                // Create or overwrite the "myblob" blob with contents from a local file
                using (var fileStream = System.IO.File.OpenRead(filePath))
                {
                    blob.UploadFromStream(fileStream);
                    result = true;
                }
            }
            catch (Exception)
            {
                result = false;
                throw;
            }

            return result;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:54:33.953

![在此处输入图片描述][1]嗨

我假设 SaveGezichtBestand 方法是在 WindowsAzure 上运行的 wcf 服务的方法。在这种情况下，除了 azure depoyment 服务已为您创建的目录之外，C 驱动器没有任何目录。如果您不想写入托管 Webrole 的 VM 上的磁盘（在这种情况下是 WCF 服务），则必须在 de *.csdef 配置中的启动任务中创建目录

您还必须将 directorys.cmd 文件添加到您的 wcf 项目中

请记住，在 Azure 回收 VM 期间，VM 本地磁盘上的任何数据都将丢失。

Azure 培训套件演示“WebAndWorkerRoleEnhancements”中的更多信息

米歇尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:12:20.973

我不肯定我会关注你的情况，所以回顾一下......

您的服务最初在本地工作，但现在您已部署到 azure 它不能。您正在从本地客户端使用您的 Web 服务（不是在 azure 上，尤其是在 Web 角色上）。

基于上述问题，您将本地文件路径传递到 azure，您的 webrole 正在尝试使用您的路径访问其自己的文件系统上的文件。要解决此问题，您需要将实际文件传递给 azure（而不仅仅是路径）。您可以使用流或字节数组。

# java - 使用自己的 JSF 配置部署多个 war 文件

> ID：10447584
> 
> 赞同：0
> 
> 时间：2012-05-04T11:04:00.993
> 
> 标签：java, maven, jsf-2, web.xml

我正在使用 Maven 将 Java Web 项目部署到我的 Tomcat 6.0 服务器中。我有一个名为“系统”的项目，它是一场战争，并且有他自己的 JSF 配置和 JSF 托管 bean。

目标是这个系统可以安装一些应用程序，并且应用程序本身也有它们的 Web 内容和 JSF 配置。我的问题来了，我有两个选择。

如果我将应用程序编译为 jar 文件，则 faces-config.xml 文件必须存储在项目的 META-INF 文件夹中，因此在加载 jar 时，JSF 可以找到该文件，因为它位于默认位置。但是，我的应用程序也有网络内容，如果我想阅读它，我必须将它存储在主系统 (webapp) 位置。这是一个实用但不优雅的解决方案。

我想要做的是将应用程序定义为一个war文件，并将其包含在主系统POM文件中，我的应用程序中的每个Web内容都将自动发布到服务器中。这是个好主意，但是我可以用我的 faces-config.xml 文件做什么？我的系统中已经定义了一个，当 Maven 尝试部署它时，它发现服务器中已经有一个相同的命名文件。所以我无法从我的系统中获取我的应用 JSF 配置。

有一种方法可以定义多个 jsf-config 文件，使用 web.xml 中的 context-param。类似的东西有效，但我希望它是动态的：

```
<context-param>
    <param-name>javax.faces.CONFIG_FILES</param-name>
    <param-value>/WEB-INF/faces-config.xml, /WEB-INF/faces-managed-beans.xml,/WEB-INF/faces-navigation.xml</param-value>
</context-param> 
```

有人对此有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:19:41.860

> 这是个好主意，但是我可以用我的 faces-config.xml 文件做什么？我的系统中已经定义了一个...

听起来您应该删除该副本，并在每个 webapp 中放置一个特定于 webapp 的副本。

# zend-framework - Zend Db 查询以选择所有 ID

> ID：10447599
> 
> 赞同：0
> 
> 时间：2012-05-04T11:04:35.320
> 
> 标签：zend-framework, zend-db

我将如何编写 Zend DB 查询以从列 ID 中选择所有？

到目前为止，我已经尝试过：

```
public function getLatestUserID()
    {
        $ids = $this->select()
             ->where('id = ?');
        return $ids;
    } 
```

但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:43:40.183

您只想要`id`列，
您未能调用执行命令。

尝试：

```
//assuming you are using a DbTable model
public function getLatestUserID()
    {
        $ids = $this->fetchAll('id');
        return $ids;
    } 
```

我会这样做，因为我对所有内容都使用了 select() 对象：

```
public function getLatestUserID()
    {
        $select = $this->select();
        //I'm not sure if $this will work in this contex but you can out the table name
        $select->from(array($this), array('id'));
        $ids = $this->fetchAll($select);
        return $ids;
    } 
```

前两个示例应该只返回表的`id`列，现在如果您真的想查询特定的`id`：

```
 public function getLatestUserID($id)
        {
            $select = $this->select();
            $select->where('id = ?', $id);
            //fetchAll() would still work here if we wanted multiple rows returned
            //but fetchRow() for one row and fetchRowset() for multiple rows are probably
            //more specific for this purpose.
            $ids = $this->fetchRow($select);
            return $ids;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:38:20.330

确保包含 getLatestUserID 的类也扩展 Zend_Db_Table_Abstract ：

`$ids = $this->select()->where('id = ?');` 不能工作，因为 where('id = ?'); 期望一个 id 值，例如`where('id = ?', $id);`

如果您想要的是最新插入的行的 ID，请使用：

```
$lastInsertId = $this->getAdapter()->lastInsertId(); 
```

（但是，如果您使用的是 oracle 数据库，这将不起作用，您应该使用`$lastInsertId = $this->getAdapter()->lastSequenceId('USER_TABLE_SEQUENCE');`）

# c - 多线程和死锁

> ID：10447600
> 
> 赞同：-2
> 
> 时间：2012-05-04T11:04:39.387
> 
> 标签：c, multithreading, deadlock

我正在制作一个多线程 C 程序，其中涉及在两个线程之间共享全局动态整数数组。一个线程将继续向其中添加元素，另一个线程将独立扫描数组并释放扫描的元素。任何人都可以建议我如何做到这一点，因为我正在做的是造成死锁 请任何人都可以提供它的代码或解决这个死锁的方法并提供完整的解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:11:35.613

对于线程，我会使用 pthread。用 编译它`-pthread`。

```
#include <pthread.h>

int *array;

// return and argument should be `void *` for pthread
void *addfunction(void *p) {
    // add to array
}

// same with this thread
void *scanfunction(void *p) {
    // scan in array
}

int main(void) {
    // pthread_t variable needed for pthread
    pthread_t addfunction_t, scanfunction_t; // names are not important but use the same for pthread_create() and pthread_join()
    // start the threads
    pthread_create(&addfunction_t, NULL, addfunction, NULL); // the third argument is the function you want to call in this case addfunction()
    pthread_create(&scanfunction_t, NULL, scanfunction, NULL); // same for scanfunction()
    // wait until the threads are finish leave out to continue while threads are running
    pthread_join(addfunction_t, NULL);
    pthread_join(scanfunction_t, NULL);
    // code after pthread_join will executed if threads aren't running anymore
} 
```

这是 pthread 的一个很好的示例/教程：[*klick*](http://timmurphy.org/2010/05/04/pthreads-in-c-a-minimal-working-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:29:29.867

在这种情况下，您需要查看数组上每个操作产生的频率和负载。例如，如果阵列被连续扫描，但每小时只添加一次，那么找到一种非常缓慢、延迟缠身的写入机制来消除对读取锁的需求是值得的。在这种情况下，用互斥锁锁定每个访问将是非常不令人满意的。

如果没有“扫描”操作的详细信息，尤其是持续时间和频率，就不可能建议一种线程通信策略以获得良好的性能。

另一个你不知道的事情是失败的后果——新添加的内容在实际插入之前是否排队一段时间可能并不重要，或者它可能。

如果您想要一个“计算机科学 101”的答案，而且很可能性能很差，请使用互斥锁锁定对数组的每次访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:52:19.060

[http://www.liblfds.org](http://www.liblfds.org)

版本 6 包含一个无锁队列。

为 Windows 和 Linux 开箱即用地编译。

# jquery - Jquery Waypoints 刷新

> ID：10447604
> 
> 赞同：6
> 
> 时间：2012-05-04T11:04:59.983
> 
> 标签：jquery, jquery-waypoints

我正在处理一个页面，该页面使用航点创建一个粘性 div，该 div 向下滚动页面，位置：固定，直到它到达其父 div 的底部。我使用的代码按预期工作，直到调用 $.waypoints('refresh') 然后粘性 div 跳回页面顶部并失去其固定位置。

继承人的代码：

```
$('#content').waypoint(function(event, direction){
if (direction === 'down') {
    $(this).removeClass('sticky').addClass('bottomed');
}
else {
    $(this).removeClass('bottomed').addClass('sticky');
}
}, {
    offset: function() {
    return $('#leftCol').outerHeight() - $('#content').outerHeight();
}

}).find('#leftCol').waypoint(function(event, direction) {
    $(this).parent().toggleClass('sticky', direction === "down");
    event.stopPropagation();
         }); 
```

其中#leftCol 是向下滚动页面的div，#content 是它的父div。

我拥有的CSS是：

```
#content {
width: 975px;
height: auto;
position: relative;
margin-top: 10px;
margin-bottom: 20px;
min-height: 800px;
}

#leftCol {
position: absolute;
width: 974px;
}

.sticky #leftCol {
position:fixed !important;
top:0 !important;
left: 50% !important;
width: 974px !important;
margin-left: -488px;
}

.bottomed #leftCol {
position: absolute !important;
bottom: 0px;
} 
```

任何关于如何在调用 $.waypoints('refresh') 时保持#leftCol 位置的想法都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T11:32:02.763

不要，不要，永远不要使用`fixed`位置元素作为航点。在 GitHub 上查看以下所有已关闭的问题：[#64](https://github.com/imakewebthings/jquery-waypoints/issues/64)、[#44](https://github.com/imakewebthings/jquery-waypoints/issues/44)、[#32](https://github.com/imakewebthings/jquery-waypoints/issues/32)、[#26](https://github.com/imakewebthings/jquery-waypoints/issues/26)、[#24](https://github.com/imakewebthings/jquery-waypoints/issues/24)、[#13](https://github.com/imakewebthings/jquery-waypoints/issues/13)、[#10](https://github.com/imakewebthings/jquery-waypoints/issues/10)、[#4](https://github.com/imakewebthings/jquery-waypoints/issues/4)。

这很容易成为关于 Waypoints 最容易被误解的事情，而且我没有充分说明 Waypoints 是如何运作的，这绝对是我的错。我计划在插件的下一次迭代中更清楚地说明这一点。

对于任何想知道的人：Waypoints 通过查看元素的页面偏移量来工作。但是固定位置元素的页面偏移量会随着用户滚动而不断变化。因此，无论何时调用刷新，无论是手动、添加另一个航点还是通过调整浏览器大小，该航点的位置都会更改以匹配用户当时在页面滚动中所处的位置。您想要的是一个正常的静态位置元素，它不会让文档流成为航点。在我在 Waypoints 项目网站上给出的示例中，waypoint 是一个保持原位的包装元素，而`nav`它通过 CSS 包装获得和失去固定定位。对于不了解页面偏移量和 CSS 的人来说，执行 OP 在这里所做的事情非常容易，因为它看起来很直观。同样，这将在未来的文档/示例中更直接地解决。

# c# - 带有支持文件检测的 API 的云存储

> ID：10447608
> 
> 赞同：2
> 
> 时间：2012-05-04T11:05:09.933
> 
> 标签：c#, dropbox, google-drive-api, onedrive, cloud-storage

嗨，我正在寻找一些云存储（Dropbox、SkyDrive、Google Drive 等），它具有不错的 API (C#) 并具有某种订阅服务，因此当添加新文件时它会通知我，所以我可以拿起它并使用它。这是否存在或者我必须每 x 分钟轮询一次云存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:28:51.193

对于 Google Drive，[这里](https://stackoverflow.com/questions/10303297/can-my-app-be-notified-of-file-updates-on-my-google-drive-folder/10303455#10303455)已经问过这个问题。

基本上这在 Drive API 上尚不可用，但我们已计划在未来的版本中使用它。同时，您应该查看非常方便轮询[的 Google Documents List API 的更改提要。](https://developers.google.com/google-apps/documents-list/#detecting_changes_to_resources)

# powershell - 是否可以使用 Powershell 在 Active Directory 中设置用户 memberOf 属性

> ID：10447609
> 
> 赞同：3
> 
> 时间：2012-05-04T11:05:19.277
> 
> 标签：powershell, active-directory, powershell-2.0

我需要创建一个在 Active Directory 中设置一些用户属性的 Powershell 脚本。

我正在使用 Set-AdUser 命令并传入一个用户对象，如下所示：

```
$user = Get-AdUser -Identity $userIdentity
$user.MemberOf = $dn_of_group
Set-ADUser -Instance $user 
```

这将返回“适配器无法设置属性“MemberOf”的值”的错误。

是否可以从 powershell 设置 MemberOf 属性？

如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:22:59.177

您无法修改该`MemberOf`属性 - 您需要使用Cmdlet[将用户添加到组中：](http://technet.microsoft.com/en-us/library/ee617210.aspx)`Add-ADGroupMember`

```
Add-ADGroupMember $dn_of_group $user 
```

# css - 完整的背景和非预期的 1px 边框

> ID：10447613
> 
> 赞同：1
> 
> 时间：2012-05-04T11:05:35.057
> 
> 标签：css, internet-explorer-8

我正在使用以下代码来呈现完整的背景、框、页眉和页脚。在所有浏览器中一切都很好（ie8+，我不关心 ie7）。但在 ie8 中，背景周围会呈现 1px 的边框。为什么？

```
 <style type="text/css">

        /*
            start reset
            http://meyerweb.com/eric/tools/css/reset/ 
        */

        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed, 
        figure, figcaption, footer, header, hgroup, 
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }
        article, aside, details, figcaption, figure, 
        footer, header, hgroup, menu, nav, section {
            display: block;
        }
        body {
            line-height: 1;
        }
        ol, ul {
            list-style: none;
        }
        blockquote, q {
            quotes: none;
        }
        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }
        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        /*
            end reset
        */

        .header, .footer
        {
            position: fixed;
            z-index: 2;
            left: 0px;
            width: 100%;
            background: white;
            opacity: 0.4;
            filter: alpha(opacity=40);
        }

        .header
        {
            top: 0;
            height: 30px;
        }

        .footer
        {
            bottom: 0px;
            height: 30px;
        }

        .box
        {
            position: relative;
            float: right;
            z-index: 2;
            margin: 100px 100px 0 0;
            width: 300px;
            padding: 20px;
            background: white;
            -moz-box-shadow: 0 0 20px black;
            -webkit-box-shadow: 0 0 20px black;
            box-shadow: 0 0 20px black;
        }

        .background
        {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
        }

        .background img
        {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            min-width: 50%;
            min-height: 50%;
        }

        p
        {
            font: 15px/2 Georgia, Serif;
            text-indent: 40px;
        }

    </style>

</head>

<body>

    <div class="header">
        Vestibulum erat wisi.
    </div>

    <div class="box">
        <p>
            Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sitamet, wisi. Aenean
            fermentum, elit eget tincidunt condimentum, erosipsum rutrum orci, sagittis tempus
            lacus enim ac dui. Donec non enimin turpis pulvinar facilisis. Ut felis. Praesent
            dapibus, neque idcursus faucibus, tortor neque egestas augue, eu vulputate magna
            eroseu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsanporttitor,
            facilisis luctus, metus.
        </p>
    </div>

    <div class="footer">
        Vestibulum erat wisi.
    </div>

    <div class="background">
        <img src="http://mslove88.files.wordpress.com/2011/10/mountain.jpg" alt="" />
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:12:30.133

只需将以下代码放在 CSS 里面`<style>`，我希望它能解决您的问题。

`html { border:none; }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:11:55.707

你使用重置样式表吗？

因为它可以是正文边距/填充设置。每个浏览器都有自己的默认 CSS 样式表，并且重置样式表将其全部“重置”为 0，使它们都相同。

Google 结果中的第一个：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:12:58.283

我在我的网站上也面临同样的问题。所以我给出负点的值，如下所示。试试看。我为身体部分做。你也可以试试这个表格，div。

```
<body style="margin-top: -10px; margin-left: 0px; margin-right: 0px; padding: 0px;> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:38:59.860

更改您的代码，如下所示。也可以一一尝试 div、form、body 标签。

```
.background img
        {
            position: absolute;
            top: -5;
            left: -5;
            right: -5;
            bottom: -5;
            margin: auto;
            min-width: 50%;
            min-height: 50%;
        } 
```

# objective-c - 将 UITableView 添加到现有项目：添加数组以填充行时崩溃

> ID：10447615
> 
> 赞同：2
> 
> 时间：2012-05-04T11:05:38.550
> 
> 标签：objective-c, uitableview

我正在向项目中添加一个 TableView，其中包含可供选择的国家/地区。添加新文件（iPad+XIB 的 UITableView 子类），编写触发 IBAction 代码（如果默认国家/地区不正确，则编辑文本字段），建立一些连接并出现空表视图。我已经阅读了几个教程，但我无法找出问题所在：**当带有单词的数组加载到 - (void)viewDidLoad 时，应用程序崩溃并出现以下警告：**

> 2012-05-04 12:34:36.740 pruebaF1[4017:f803] *** 断言失败 -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061 2012-05-04 12: 34：36.741 pruebaF1 [4017：f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView：cellForRowAtIndexPath：”返回一个单元格...

CountryVieWController 连接：

**文件所有者的连接** Outlets dataSource -> File's Owner 委托 -> File's Owner 引用 Outlets 视图 -> File's Owner

代码：

```
//  CountryTableVieWController.h
#import <UIKit/UIKit.h>
@interface CountryTableVieWController :      
UITableViewController<UITableViewDelegate,UITableViewDataSource> 

{
    NSMutableArray *countriesArray;
    NSArray *countryArray;
}
@end

//  CountryTableVieWController.m
#import "CountryTableVieWController.h"
#import "pruebaF1SecondViewController.h"

@interface CountryTableVieWController ()
@end

@implementation CountryTableVieWController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
    // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{   

    [super viewDidLoad];

    countriesArray = [[NSMutableArray alloc] initWithObjects:@"Austria", @"Italy", @"France",nil];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:40:04.293

您需要为 UITableView 实现委托方法。

看看这个：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10)

我发现最简单的方法是你的 UITableView 正在询问你的代码应该在单元格中做什么。您可以使用这些方法来配置您的表格视图和其中的 UITableViewCells。

你将需要这样的东西：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    [countriesArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
    }

    NSString *country  = [countriesArray objectAtIndex:indexPath.row];
    cell.textLabel.text = country;
    return cell;
} 
```

# android - 如何为Android 4.0.3编译浏览器源代码

> ID：10447622
> 
> 赞同：0
> 
> 时间：2012-05-04T11:06:18.753
> 
> 标签：android

[我从https://github.com/android/platform_packages_apps_browser](https://github.com/android/platform_packages_apps_browser)下载了浏览器源代码。

我可以在[http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)教程的帮助下访问隐藏和内部包。

我无法为 Android 4.0.3 构建源代码。但是当为 Android 4.0.3 编译时，Eclipse 显示“此类必须实现继承的抽象方法 AbsSpinner.layout(int, boolean)，但不能覆盖它，因为它在 FolderSpinner 中不可见。要么使类型抽象，要么使继承的方法FolderSpinner 类中的可见”错误。

提前感谢您的帮助。

问候， Vibhor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:51:45.500

您只能将 AOSP 应用程序构建为整个固件的一部分。它们不是为单独构建而设计的。

# apache - Apache - 使用新域重定向

> ID：10447624
> 
> 赞同：0
> 
> 时间：2012-05-04T11:06:27.923
> 
> 标签：apache, redirect, dns

我们的网站已经在（比如）stuff.com 上运行了一段时间，其中有大量用于不同应用程序的子域，red.stuff.com、blue.stuff.com，当然还有大量内容 stuff.com /东西/在/我/头

我们最近购买了一个新域名，awesome.com。

我们可以配置 Apache 以永久替换出现的任何请求中的“stuff.com”，并永久替换为“awesome.com”吗？这种方法会使任何搜索引擎列表和现有链接保持有效吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:48:12.090

您可以使用 Apache 的[重写引擎](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)。将此添加到您的虚拟服务器配置中（在 http.conf 或启用站点的目录中）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} stuff.com
RewriteRule ^(.*) %{HTTP_HOST}$1 [C]
RewriteRule ^(.*)stuff.com(.*) http://$1awesome.com$2 [R,L] 
```

将`[C]`两条规则链接在一起。第一条规则将请求的域名插入到请求中。下一条规则将请求重定向到新域名，必要时提取子域和 URL 的其余部分。

它应该重定向任何传入的请求（我使用 URL 中的子域、文件和查询字符串对其进行了测试），因此搜索引擎链接仍然可以工作。不过，我不知道它如何影响搜索引擎排名。

# unicode - 为什么字符 é 在 UTF-8 中编码为 0xC3 0xA9？

> ID：10447626
> 
> 赞同：4
> 
> 时间：2012-05-04T11:06:40.983
> 
> 标签：unicode, encoding, utf-8

如果我将字符写入`é`文件并使用十六进制编辑器打开它，我可以看到字节 0xC3、0xA9。

在维基百科中，第一个字节称为前导字节，第二个字节称为尾随字节。0xC3 它是一个元数据字节，这意味着它用 1 个字节 0xA9 编码的字符，但它的 unicode 值`é`是[0xE9](http://www.unicode.org/charts/PDF/U0080.pdf)。

我基本上想知道为什么`é`它用 0xA9 而不是 0xE9 编码。文本编辑器如何从 0xC3A9 转换为 0xE9？有什么移位操作吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T11:11:13.413

是什么让您认为 0xC3 是“元数据字节”？

**UTF-8 中的每个**字节都包含有关已编码代码点的相关信息。

UTF-8 编码代码点的第一个字节包含一个标记（前导 1 的数量），它指示用于编码代码点^((*)的字节总数) **和**实际代码点的前几位。然后所有尾随字节包含一个“继续标记”（位`10`）和编码代码点的另外 6 个位。

关于 UTF-8 的 Wikipedia 文章对[这个过程有很好的描述](https://en.wikipedia.org/wiki/UTF-8#Description)。

有一种直接使用代码点值的编码：UTF-32（又名 UCS-4），基本上是“将代码点值用作 32 位值”

^((*))标记实际上非常简单：如果字节以 (即，它的最高有效位是) 开头`0`，那么它是单字节编码（即，0 到 127 之间的代码点）。如果它以 开头`10`，那么它是一个连续字节。如果是`110`,则分别是 2、3 或 4 字节序列的开始`1110`。并且曾经也被定义过，但在现代 UTF-8 中不再有效（因为只需要对保证永远不会在 Unicode 标准中使用的值进行编码）。`11110``111110``1111110`

# django - 是否有原始 sql 查询的替代方法？

> ID：10447627
> 
> 赞同：0
> 
> 时间：2012-05-04T11:06:46.707
> 
> 标签：django, postgresql, django-1.3

我在 Django 1.3 中有以下模型设置。我有学校和老师的多对多关系。

```
class Teacher(models.Model):
       schools = models.ManyToManyField(School, db_table="schoolteachers", related_name='scteachers') 
```

现在，我有一个显示学校信息的搜索视图。目前，为了显示每个学校的教师，我在学校模型中有一个功能，

```
def get_teachers(self):

  return ' , '.join(school.name for school in self.scteachers.all()) 
```

因此，如果我们显示 50 所学校，我们会提出 50 个我想避免的查询。我正在考虑使用 raw_query。但是还能做点别的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:44:48.277

```
', '.join(School.objects.filter(
  other_way_from_school_to_schoolteachers__teacher__pk=self.pk
  ).values_list('name', flat=True)) 
```

# regex - 替换记事本++中的HTML行

> ID：10447632
> 
> 赞同：0
> 
> 时间：2012-05-04T11:07:09.073
> 
> 标签：regex, notepad++

我需要`<a href="532135412.png" target=_blank>`用 `<a href="./source_files/532135412.png" target=_blank>`.How 我可以用 Notepad++ 来替换这样的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:22:00.410

Notepad++ 支持正则表达式中的[反向引用，因此：](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Regular_Expressions)

找什么 ：`(href=")(532135412.png")`

用。。。来代替 ：`\1./source_files/\2`

将改变这一点：

```
 <a href="532135412.png" target=_blank> 
```

进入这个：

```
<a href="./source_files/532135412.png" target=_blank> 
```

从而为您提供更强大、更通用的解决方案:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:11:27.173

替换`href="`为`href="./source_files/`? 除非您有进一步的要求，否则我认为不需要正则表达式。

**更新**

然后你可以使用（如果你有 Notepad v6.x，因为从那时起就有 PCRE 正则表达式支持）

```
(?<=href=\")([^"]*.gif") 
```

并替换为

```
./source_files/\1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:11:53.037

对我来说听起来像是一个正则表达式替换。这实际上取决于您文件的内容，但看起来您可以使用以下说明完成它：

> ```
> CTRL+H to open "Find/Replace dialog"
> Select "Regular Expression" from search mode (bottom left of dialog)
> This is your Find what: href=\"(.*).png\"
> This is your Replace with: href="./source_files/\1.png" 
> ```

# jquery-mobile - 拆分视图 url 参数传递和动态加载页面

> ID：10447636
> 
> 赞同：0
> 
> 时间：2012-05-04T11:07:29.760
> 
> 标签：jquery-mobile, github, ipad

我是 jquery 移动平台上的新手.. 我面临以下问题

[http://asyraf9.github.com/jquery-mobile/](http://asyraf9.github.com/jquery-mobile/)

我正在为我的应用程序引用此站点示例。

不，问题是......这里的所有编码都是静态的......这是左侧面板和右侧面板中的信息是静态的。

我希望同一件事是动态的，因此我的数据来自本地数据库。

现在，在我的情况下，左侧面板已完美加载。暂时..当我单击该项目（在左侧面板中）时，右侧面板完美加载...

稍后，当我单击任何其他项目时，右侧面板不会加载...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:14:08.793

尝试使用 simplesplitview

[http://simplesplitview.sourceforge.net/](http://simplesplitview.sourceforge.net/)

它非常简单且易于实现。

# c - C中的词法分析器代码

> ID：10447637
> 
> 赞同：0
> 
> 时间：2012-05-04T11:07:39.190
> 
> 标签：c, visual-studio-2010, lexical-analysis

我使用 Visual Studio 2010 for C++ 我为 C 编程的词法分析器实现了代码，但我收到错误消息“缺少类型说明符 - 假定为 int。注意：C++ 不支持默认 int”我的代码有问题吗？还是我只需要更改编译器？这是代码

```
 #include <stdio.h>
    #include <ctype.h>

    //Global variables
     int charClass;
    char lexeme [100];
    char nextChar;
    int lexLen;
    int token;
    int nextToken;
    FILE *in_fp, *fopen();

   // Function Declarations
   void addChar();
   void getChar();
   void getNonBlank();
   int lex();

   //Character classes
   #define LETTER 0
   #define DIGIT 1
   #define UNKNOWN 99

   //Token codes
   #define INT_LIT 10
   #define IDENT 11
   #define ASSIGN_OP 20
   #define ADD_OP 21
   #define SUB_OP 22
   #define MULT_OP 23
   #define DIV_OP 24
   #define LEFT_PAREN 25
   #define RIGHT_PAREN 26

   //Main
       main(){
        if ((in_fp = fopen("front.in", "r")) == NULL)
            printf("ERROR - cannot open front.in \n");
        else{
            getChar();
            do {
                lex();
            }while (nextToken != EOF);
          }
       }

       // lookUp

       int lookup(char ch){
       switch(ch){
       case '(':
           addChar();
           nextToken = LEFT_PAREN;
           break;

       case ')':
           addChar();
           nextToken = RIGHT_PAREN;
           break;

       case '+':
           addChar();
           nextToken = ADD_OP;
           break;

       case'-':
           addChar();
           nextToken = SUB_OP;
           break;

       case'*':
           addChar();
           nextToken = MULT_OP;
           break;

       case'/':
           addChar();
           nextToken = DIV_OP;
               break;

       default:
           addChar();
           nextToken = EOF;
           break;
       }
       return nextToken;
       }
       //AddChar

       void addChar(){
           if (lexLen <= 98) {
               lexeme[lexLen++] = nextChar;
               lexeme[lexLen] = 0;
           }
           else
               printf("Error - lexeme is too long \n");
       }

       //getChar
       void getChar(){
           if ((nextChar = getc(in_fp)) != EOF) {
               if (isalpha(nextChar))
                   charClass = LETTER;
               else if (isdigit(nextChar))
                   charClass = DIGIT;
               else charClass = UNKNOWN;
           }
           else
               charClass = EOF;
       }
       // getNonBlank
       void getNonBlank(){
           while (isspace(nextChar))
               getChar();
       }
       //lex
       int lex(){
           lexLen = 0;
           getNonBlank();
           switch (charClass){
           case LETTER:
                   addChar();
                   getChar();
                   while (charClass == LETTER || charClass ==                    DIGIT){
                       addChar();
                       getChar();
                   }
                   nextToken = IDENT;
                   break;
                   // parse ints lits
               case DIGIT:
                   addChar();
                   getChar();
                   while (charClass == DIGIT){
                       addChar();
                       getChar();
                   }
                   nextToken = INT_LIT;
                   break;

                //pares and ops
               case UNKNOWN:
                   lookup(nextChar);
                   getChar();
                   break;

                   //EOF
               case EOF:
                   nextToken = EOF;
                   lexeme[0] = 'E';
                   lexeme[1] = 'O';
                   lexeme[2] = 'F';
                   lexeme[3] = 0;
                   break;
           }
        // end of switch
           printf("Next toke is: %d, next lexeme is %s\n",nextToken, lexeme);
           return nextToken;
       } 
```

所以对于这个例子 ( sum + 47 ) / total 这应该是输出

下一个记号是：25 下一个词位是（下一个记号是：11 下一个词位是 sum 下一个记号是：21 下一个词位是 + 下一个记号是：10 下一个词位是 47 下一个词位是：26 下一个词位是） 下一个记号是：24下一个词素是/下一个词素是：11 下一个词素是总数 下一个词素是：-1 下一个词素是 EOF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:17:38.470

```
 main(){
    if ((in_fp = fopen("front.in", "r")) == NULL)
        printf("ERROR - cannot open front.in \n");
    else{
        getChar();
        do {
            lex();
        }while (nextToken != EOF);
      }
   } 
```

应该这样改变：

```
 //  return type of main should be explicitly int.
   int  main(){
    if ((in_fp = fopen("front.in", "r")) == NULL)
        printf("ERROR - cannot open front.in \n");
    else{
        getChar();
        do {
            lex();
        }while (nextToken != EOF);
      }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:49:40.473

Main 被错误地声明。

要么接受命令行参数：

```
int main(int argc, char *argv[])
{

    return 0;
} 
```

或者它没有：

```
int main(void)
{
    return 0;
} 
```

[从这里捏的答案](https://stackoverflow.com/a/5020691/759558)

# perl - Math::GMP 安装时出错

> ID：10447641
> 
> 赞同：6
> 
> 时间：2012-05-04T11:07:59.340
> 
> 标签：perl, gmp

我试图安装`Math::GMP`，但它一直失败，我不知道从这里去哪里。这是我输入的内容，这里是指向日志文件的输出：

```
[root@confeng Math-GMP-2.06-VEVNp7]# cpanm Math::GMP
--> Working on Math::GMP
Fetching http://www.cpan.org/authors/id/T/TU/TURNSTEP/Math-GMP-2.06.tar.gz ... OK
Configuring Math-GMP-2.06 ... OK
Building and testing Math-GMP-2.06 ... FAIL
! Installing Math::GMP failed. See /root/.cpanm/build.log for details.
[root@confeng Math-GMP-2.06-VEVNp7]# 
```

我检查了日志，我不确定我应该在这里有什么结构是日志`/root/.cpanm/build.log`

```
cpanm (App::cpanminus) 1.5011 on perl 5.008008 built for i386-linux-thread-multi
Work directory is /root/.cpanm/work/1336128898.6464
You have make /usr/bin/make
You have /usr/bin/wget
You have /bin/tar: tar (GNU tar) 1.15.1
You have /usr/bin/unzip
Searching Math::GMP on cpanmetadb ...
--> Working on Math::GMP
Fetching http://www.cpan.org/authors/id/T/TU/TURNSTEP/Math-GMP-2.06.tar.gz
-> OK
Unpacking Math-GMP-2.06.tar.gz
Entering Math-GMP-2.06
Checking configure dependencies from META.yml
Configuring Math-GMP-2.06
Running Makefile.PL
Checking if your kit is complete...
Looks good
Writing Makefile for Math::GMP
-> OK
Finding PREREQ from Makefile ...
Building and testing Math-GMP-2.06
cp lib/Math/GMP.pm blib/lib/Math/GMP.pm
AutoSplitting blib/lib/Math/GMP.pm (blib/lib/auto/Math/GMP)
/usr/bin/perl /usr/lib/perl5/5.8.8/ExtUtils/xsubpp  -      typemap /usr/lib/perl5/5.8.8/ExtUtils/typemap -typemap typemap  GMP.xs > GMP.xsc && mv GMP.xsc GMP.c
gcc -c   -D_REENTRANT -D_GNU_SOURCE -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/inc$
GMP.xs:4:17: error: gmp.h: No such file or directory
GMP.xs: In function âconstantâ:
GMP.xs:49: warning: label ânot_thereâ defined but not used
GMP.c: In function âXS_Math__GMP_new_from_scalarâ:
GMP.c:93: error: âmpz_tâ undeclared (first use in this function)
GMP.c:93: error: (Each undeclared identifier is reported only once
GMP.c:93: error: for each function it appears in.)
GMP.c:93: error: âRETVALâ undeclared (first use in this function)
GMP.xs:70: warning: implicit declaration of function âmpz_init_set_strâ
GMP.c: In function âXS_Math__GMP_new_from_scalar_with_baseâ:
GMP.c:114: error: âmpz_tâ undeclared (first use in this function)
GMP.c:114: error: âRETVALâ undeclared (first use in this function)
GMP.c: In function âXS_Math__GMP_destroyâ:
GMP.c:133: error: âmpz_tâ undeclared (first use in this function) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T11:37:20.607

> GMP.xs:4:17：错误：gmp.h：没有这样的文件或目录

是重要的部分。

您必须安装 libgmp 的开发文件/头文件。在我的 openSUSE 系统上，相关文件是`/usr/include/gmp.h`，包被调用`gmp-devel`。在 Debian/派生系统上，该软件包称为`libgmp3-dev`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:58:34.767

在我的 Ubuntu 机器上，我通过 Synaptic Package Manager 安装了 libmath-gmp-perl。将编译有问题的 GMP 包。虽然这不是一个好的解决方法，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T11:39:03.443

运行这个命令：

```
yum install gmp-static 
```

# c# - C#中的接口与多重继承

> ID：10447643
> 
> 赞同：12
> 
> 时间：2012-05-04T11:08:19.813
> 
> 标签：c#, .net, interface, multiple-inheritance

我有一组 A 类和 B 类都有一些属性。和另一个具有自己属性的 C 类。

每当我创建类 C 的实例时，我都想使用 objClassC 访问所有三个类的所有属性。

我如何在 C# 中实现这一点？

我面临两个问题：-

1.  我不能同时继承 C 类中的 A、B 类（C# 不支持多重继承）
2.  如果我使用接口而不是 A、B 类（在接口中我们不能包含字段）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-04T11:12:06.957

为什么不在 C 类中包含 A 类和 B 类的实例。使用[组合](http://en.wikipedia.org/wiki/Object_composition)

```
class C
{
//class C properties
public A objA{get;set;}
public B objeB{get;set;}
} 
```

然后就可以访问了

```
C objc = new C();
objc.objA.Property1 = "something";
objc.objB.Property1 = "something from b"; 
```

查看文章[组合与继承](http://lostechies.com/chadmyers/2010/02/13/composition-versus-inheritance/)

**编辑：**

> 如果我使用接口而不是 A、B 类（在接口中我们不能包含字段）

好吧，接口不能包含字段，如果你定义一个，你会得到编译错误。但是接口可以包含属性，但您不能指定[访问说明符](http://msdn.microsoft.com/en-us/library/h05xxt5d.aspx)，因为接口的所有元素都被考虑在内`public`。您可以将接口“A”和“B”的属性定义为：

```
public interface IA
{
     int Property1 { get; set; }
}

public interface IB
{
    int Property2 { get; set; }
} 
```

然后您可以在 C 类中实现它们，例如：

```
public class C : IA, IB
{
    public int Property1 { get; set; }
    public int Property2 { get; set; }
} 
```

稍后您可以将它们用作：

```
C objC = new C();
objC.Property1 = 0;
objC.Property1 = 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T11:14:35.207

接口可以具有属性，但如果您还想使用方法，则可能需要组合或依赖注入。

```
Interface A
{
   int PropA {get; set;}
}

Interface B
{
  int PropB {get; set;}
}

class C : A, B
{

} 
```

// 将这些语句放在某个方法中

```
C c = new C();
c.PropA = 1;
c.PropB = 2; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T11:13:37.937

接口并不能解决缺乏多重继承的问题。他们只是不做同样的事情。您能得到的最接近的方法是使 C 成为 A 的子类，并具有 B 类型的属性。也许如果您告诉我们 A、B 和 C 应该做什么，我们可以给出更适合您需求的答案...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T11:10:11.060

接口可能包含属性，即：

```
public interface IFoo
{
    string Bar { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T03:05:49.717

考虑在使用继承副组合时属性如何以不同的方式暴露给客户端。

遗产：

```
    var myCclass = 新的 Cclass;
    myClass.propertyA;
    myClass.propertyB;
    myClass.propertyC;
    // 等等

```

作品：

```
 var myCclass = new Cclass;
    myCclass.bClass.propertyB;
    myCclass.aClass.propertyA;
    myCclass.propertyC; 
```

继承提供了更简洁的 API - 一件好事。

作文要求我对班级的内部结构有所了解——这不是一件好事。这违反[了得墨忒耳定律](http://en.wikipedia.org/wiki/Law_of_Demeter)——众所周知的最少知识原则。您可以通过让 Cclass 属性一对一地公开/返回 Bclass 和 Aclass 属性来解决此问题 - 然后您的 Bclass 和 Aclass 引用将在 Cclass 中是私有的或受保护的。并且 Cclass 可以完全控制公开的内容，而不是依赖 A & B 不公开您没有公开的内容。

[我同意@AlejoBrz](https://stackoverflow.com/a/10447713/463206)，接口在这里不合适。

我也赞同“更喜欢组合而不是继承”。但这是一个指导方针，而不是硬性规定。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T11:18:32.043

```
public interface IAA
{
    string NameOfA { get; set; }
}
public class AA : IAA
{
    public string NameOfA{get;set;}
}

public interface IBB
{
    string NameOfB { get; set; }
}    
public class BB : IBB
{
    public string NameOfB{get;set;}
}

public class CC : IAA, IBB
{
    private IAA a;
    private IBB b;            

    public CC()
    {
        a = new AA{ NameOfA="a"};
        b = new BB{ NameOfB="b"};
    }

    public string NameOfA{
        get{
            return this.a.NameOfA;
           }
        set{
            this.a.NameOfA = value;
           }
    }

    public string NameOfB
    {
        get{
            return this.b.NameOfB;
        }
        set{
            this.b.NameOfB = value;
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-06T15:38:44.863

接口不能包含字段，但可以包含属性。在大多数情况下，属性可以像字段一样使用，不难说：

```
接口 ISomeProperties
  {int prop1 {get;set;}; 字符串 prop2 {get; 放;}}
接口 IMoreProperties
  {string prop3 {get;set;}; 双prop4 {get; 放;}}
接口 ICombinedProperties : ISomeProperties, IMoreProperties;
  { }

```

给定类型的存储位置`ICombinedProperties`，可以直接访问所有四个属性而无需大惊小怪。

但是，应该注意的是，有些事情可以用字段完成，而不能用属性完成。例如，虽然一个字段可以传递给`Interlocked.Increment`一个属性，但不能；尝试`Interlocked.Increment`通过将属性复制到变量，调用`Interlocked.Increment`该属性，然后将结果复制回属性在某些情况下可能“有效”，但如果两个线程同时尝试执行相同的操作，则会失败（可能例如，两个线程读取值 5，将其递增到 6，然后写回 6，而让两个线程调用`Interlocked.Increment`最初等于 5 的字段将保证产生 7。）。

为了解决这个问题，可能需要让接口包含一些方法，这些方法要么在字段上执行互锁方法（例如，可以有一个调用`Interlocked.Increment`字段并返回结果的函数）和/或包含将调用的函数以字段为`ref`参数的指定委托（例如

```
委托 void ActionByRef<T1>(ref T1 p1);
委托 void ActionByRef<T1,T2>(ref T1 p1, ref T2 p2);
委托 void ActionByRef<T1,T2,T3>(ref T1 p1, ref T2 p2, ref T3 p3);
接口 IThing
{ // 必须允许客户端代码直接使用 T 类型的字段。
  void ActOnThing(ActionByRef<T> proc);
  void ActOnThing<ExtraT1>(ActionByRef<T, ExtraT1> proc, ref ExtraT1 ExtraP1);
  无效 ActOnThing<ExtraT1, ExtraT2>
       （ActionByRef<T> 过程，参考 ExtraT1 ExtraP1，参考 ExtraT2 ExtraP2）；
}

```

给定一个接口实例，可以执行以下操作：

```
  theInstance.ActOnThing(
    (ref int param) => Threading.Interlocked.Increment(ref param)
  );

```

或者，如果一个人有局部变量`maskValue`并且`xorValue`想用原子方式更新该字段`field = (field & maskValue) ^ xorValue`：

```
  theInstance.ActOnThing(
    (ref int Param, ref int MaskValue, ref int XorValue) => {
        诠释旧值，新值；
        做 {oldValue = 参数; newValue = (oldValue & MaskValue) ^ XorValue;
        while (Threading.Interlocked.CompareExchange(ref Param, newValue, oldValue) !=
          旧值），
    参考掩码值，参考异或值）；
  );

```

如果只想对字段执行几种类型的操作，最简单的方法是将它们简单地包含在界面中。另一方面，上面给出的方法允许接口以允许客户端对它们执行任意序列的操作的方式公开其字段。

# jsp - 使用spring mvc在jsp中显示枚举的值

> ID：10447649
> 
> 赞同：2
> 
> 时间：2012-05-04T11:08:52.820
> 
> 标签：jsp, spring-mvc, enums, jstl

我有一个枚举

```
public enum Number
 {
 ONE("one"), TWO("two"), THREE("three"), FOUR("four");
 } 
```

我把这个枚举放到模型中

```
model.addAttribute("myEnum", Number.values()); 
```

现在，在 jsp 页面中，我想显示这些枚举之一的值。

```
<c:out value="${myEnum.ONE}"/> 
```

但它似乎不起作用。我在做什么错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:16:13.613

myEnum 是返回值的列表，您可以创建一个属性等于一个枚举实例的值：

```
model.addAttribute("one", Number.ONE);

<c:out value="${one}"/> 
```

或循环通过 myEnum ：

```
<c:forEach items="${myEnum}" var="value">
    ${value}
</c:forEach> 
```

# java - 如何为安全连接池编写逻辑

> ID：10447651
> 
> 赞同：2
> 
> 时间：2012-05-04T11:09:00.407
> 
> 标签：java, multithreading, connection-pooling

我正在使用 Executors 编写连接池。我的问题是当数据库关闭时，池中的所有连接都变为无效连接。

一种方法是定期刷新连接池，或者检查连接的有效性。处理此类问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:25:00.580

首先，如果你不绝对，绝对，没有办法，必须自己写，这是重新发明完美轮子的真正典型案例。interwebz 上提供了许多精美的连接池实现。

我（在许多其他人中）使用 Apache DBCP：[http ://commons.apache.org/dbcp/](http://commons.apache.org/dbcp/)

如果你有某种超级特殊的数据库，你至少可以依赖一个现有的池解决方案，比如 Commons Pool：[http ://commons.apache.org/pool/](http://commons.apache.org/pool/)

你知道，使用 apache 的东西可以让你和酷孩子坐在一起；）

那么，如果您真的必须自己编写，我建议您这样做：

每当请求连接时，请检查其有效性。没有办法解决这个问题。如果它不再有效，要么立即删除池中的所有连接（假设所有连接都无效），或者只获取下一个连接并删除您检查的连接。重复直到你找到一个有效的，或者你必须扩大池。如果无法建立新连接（显然），增长池将需要检查有效性并中止。否则你手上会有一些很好的无限循环。

检查池并根据需要清理和/或增长它的辅助线程似乎也很好。只是不要单独依赖它，因为它很可能会错过无效的连接，并且您仍然会提供不可用的池元素。

线程（或多个线程）可能仅用于加快速度（检查/增长池），但不适合自己完成这项工作。您必须根据要求检查/增长，辅助线程只能帮助避免这种情况。

# android - NullPointerException - 使用微调器

> ID：10447654
> 
> 赞同：0
> 
> 时间：2012-05-04T11:09:22.387
> 
> 标签：android

我在我的中使用了一个微调器`ListActivity`并获得了一个`NullPointerException`at`setAdapter`方法。我试图在 google 和 stackoverflow 上研究类似的问题，并尝试了他们的建议，但没有用。但是，此代码适用于我的另一个应用程序。

```
options = getResources().getStringArray(R.array.options_array);
Spinner s1 = (Spinner) findViewById(R.id.spinner1);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_spinner_dropdown_item, options);

s1.setAdapter(adapter); // Here is the error
s1.setOnItemSelectedListener(new OnItemSelectedListener()
    {
        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
        {
            int index = arg0.getSelectedItemPosition();
            Toast.makeText(getBaseContext(), 
                "You have selected item : " + options[index], 
                Toast.LENGTH_SHORT).show();                
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {} 
    }); 
```

我的微调器 xml

```
 <Spinner    
        android:id="@+id/spinner1"    
        android:layout_width="25dip"
        android:layout_height="25dip"
            android:entries="@array/options_array"
        android:prompt="@string/spin_prompt"
        android:background="@drawable/expander_ic_maximized"
        android:layout_alignParentRight="true" 
            android:layout_below="@id/name_text"        
        /> 
```

日志猫

```
05-04 09:23:48.492: ERROR/AndroidRuntime(343): Caused by: java.lang.NullPointerException

05-04 09:23:48.492: ERROR/AndroidRuntime(343):     at com.amannain.android.missedcalls.MissedCallsSpinActivity.runSpinner(MissedCallsSpinActivity.java:31)

05-04 09:23:48.492: ERROR/AndroidRuntime(343):     at com.amannain.android.missedcalls.MissedCallsSpinActivity.onCreate(MissedCallsSpinActivity.java:21) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:49:52.667

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_spinner_dropdown_item, **options**); 
```

因为您的 options 值是`null`，所以您得到`NullPointerException`. 检查`options`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:27:33.843

这些一些修改可能会对您有所帮助..

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_spinner_dropdown_item, options);

Here instead of ArrayAdapter you can use SpinnerAdapter, Please modify your code and let me know. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:35:40.187

我认为选项（通过 ArrayAdapter）中的值将变为空。尝试在 log-cat 中查看“选项”的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:32:09.087

您是否在定义微调器 setContentView(R.layout.main) 的活动中设置以下内容；
这个 main.xml 应该有你的微调组件定义为 id "spinner1"

# jquery - cloudant：检索一些临时用户字段

> ID：10447655
> 
> 赞同：4
> 
> 时间：2012-05-04T11:09:31.827
> 
> 标签：jquery, couchdb, cloudant

我正在尝试根据登录的用户过滤我的文档集合。我按照cloudant.com 人员给出的[身份验证说明](http://support.cloudant.com/customer/portal/articles/359311-users-authorization-on-cloudant)，创建了一个 _user 数据库，它可以工作。

现在我的问题是：是否可以使用 jquery.couchLogin 之类的 js 插件向用户对象添加一些临时密钥并从我的代码中检索它？

我要创建的示例：

```
{
    "_id": "org.couchdb.user:agata",
    "_rev": "1-03a67c25da054b5f24d215f4db059d71",
    "name": "agata",
    "type": "user",
    "roles": ["admin"],
    "password_sha": "***",
    "salt": "***",
    "MYKEY1":"my val",
    "MYKEY2":"my val2"
} 
```

然后检索 MYKEY1 AND MYKEY2....

我已经尝试过使用 $.couchLogin，但我能检索到的只是一个 userCtx 对象，它只报告上述一些字段（名称、角色）。看来我应该用 couchdb 代码欺骗 userCtx 对象，我真的不想这样做。

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T09:39:13.483

由于这个问题没有得到答案，我在这里报告 cloudant 支持的答案：

> 出于安全目的，您不能将该信息存储在 Cloudant 的公共集群上的用户文档中。而如果您正在运行 CouchDB、BigCouch 或私有 Cloudant 集群，则可以。
> 
> 但是，您可以将该信息存储在您的一个数据库中，并让客户端（假设它是应用服务器而不是浏览器）执行过滤和权限。

所以我现在的策略是

1.  使用我需要的有关用户的所有信息创建另一个数据库。
2.  使此数据库仅可供授权用户访问
3.  检索客户端（检查登录后）我需要的所有信息。

我会及时通知您以验证它是否有效以及我遇到了什么问题。

**更新**

有效！所以策略基本上是做两个数据库：

1.  一个 (_users) 具有名称、sha 密码等，特定于 cloudant
2.  另一个 (your_users_DB) 仅包含用户名和您需要执行的各种操作所需的其他键。

所以我所做的是创建第二个数据库，其文档结构如下：

```
{"_id":"org.couchdb.user:USERONE",
"name":"USERONE",
"type":"user",
"roles":["user"],
"filters":{"FILTER1":"VAL1","FLTER2":"VAL2"}} 
```

然后当用户（比如说 USERONE）成功登录时，也会检索到这个文档，并且“过滤器”字段用于过滤我的集合。

一种解决方法，但它运行良好

# ruby - Ruby：如何计算字符串开头和结尾的空格数？

> ID：10447658
> 
> 赞同：9
> 
> 时间：2012-05-04T11:09:50.683
> 
> 标签：ruby, string, count, space

要计算字符串开头和结尾的空格数，`s`我会这样做：

```
s.index(/[^ ]/)              # Number of spaces at the beginning of s
s.reverse.index(/[^ ]/)      # Number of spaces at the end of s 
```

当包含空格时，这种方法需要边缘情况，`s`只需要单独处理。

有没有更好（更优雅/高效）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T12:37:25.927

另一个版本，这必须是最短的

```
s[/\A */].size
s[/ *\z/].size 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T11:23:29.660

您可以立即执行此操作：

```
_, spaces_at_beginning, spaces_at_end = /^( *).*?( *)$/.match(s).to_a.map(&:length) 
```

不过绝对不是更优雅。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:24:45.087

我不知道它是否更有效，但这也有效。

```
s.count(' ') - s.lstrip.count(' ')
s.count(' ') - s.rstrip.count(' ') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T11:52:24.810

```
s.split(s.strip).first.size
s.split(s.strip).last.size 
```

你也可以

```
beginning_spaces_length , ending_spaces_length = s.split(s.strip).map(&:size) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T11:32:14.200

这也很容易做到：

```
beginning =  s.length - s.lstrip.length
ending = s.length - s.rstrip.length 
```

# java - 在姜饼上切换视图

> ID：10447660
> 
> 赞同：3
> 
> 时间：2012-05-04T11:09:53.503
> 
> 标签：java, android, xml

我编写了一个使用 Switch 作为切换器的应用程序。当我在 ICS 上运行它时，我没有问题，但是当我在姜饼上运行它时，它崩溃了：

```
05-04 11:00:43.261: E/AndroidRuntime(1455): FATAL EXCEPTION: main
05-04 11:00:43.261: E/AndroidRuntime(1455): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.android.smartscreenon/it.android.smartscreenon.ActivityImpostazioni}: android.view.InflateException: Binary XML file line #58: Error inflating class Switch
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.os.Looper.loop(Looper.java:130)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread.main(ActivityThread.java:3835)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at java.lang.reflect.Method.invoke(Method.java:507)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at dalvik.system.NativeStart.main(Native Method)
05-04 11:00:43.261: E/AndroidRuntime(1455): Caused by: android.view.InflateException: Binary XML file line #58: Error inflating class Switch
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:212)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.Activity.setContentView(Activity.java:1657)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at it.android.smartscreenon.ActivityImpostazioni.onCreate(ActivityImpostazioni.java:43)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
05-04 11:00:43.261: E/AndroidRuntime(1455):     ... 11 more
05-04 11:00:43.261: E/AndroidRuntime(1455): Caused by: java.lang.ClassNotFoundException: android.view.Switch in loader dalvik.system.PathClassLoader[/data/app/it.android.smartscreenon-1.apk]
05-04 11:00:43.261: E/AndroidRuntime(1455):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.createView(LayoutInflater.java:471)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
05-04 11:00:43.261: E/AndroidRuntime(1455):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
05-04 11:00:43.261: E/AndroidRuntime(1455):     ... 23 more 
```

Gingerbread 上似乎没有 Switch。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:59:25.957

请改用切换按钮。在 API 级别 14 中添加了开关。这是[文档](http://developer.android.com/reference/android/widget/Switch.html)。

# c - 是否可以定义 const 值而不是要求用户输入它？

> ID：10447671
> 
> 赞同：0
> 
> 时间：2012-05-04T11:10:39.983
> 
> 标签：c, macros, scanf, c-preprocessor

是否可以在 C 中定义 const 值：

```
#define N; 
```

而不是要求用户输入是使用scanf（）？

如果是这样，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:12:45.693

`#define`ed 值不是正常的常量。它们由预处理器计算/转换，因此您在编译时会丢失它们，并且肯定无法在运行时更改它们。

请注意，此类 a 的语法`#define`是`#define N 5`而不是`#define N;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:16:51.197

预处理器宏定义的扩展是在预处理阶段运行时设置的，甚至在大量编译之前。

因此，例如，如果您这样做`#define N 5`，那么`N`将永远是`5`，而不是其他任何事情。

如果你这样做`#define N my_global_integer`，那么`N`将永远是`my_global_integer`，永远不会有别的。

所以我想你可以这样做：

```
#include <stdio.h>

#define N my_global_integer
int my_global_integer;

int main() {
    scanf("%d", &N);
    printf("%d\n", N);
} 
```

预处理器宏`N`是常量，但它最终扩展为的变量不是。我通常不会建议它，但如果这个问题是一个谜，那么这可能就是答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:12:37.627

不。

在实际编译器甚至看到源代码之前，您定义的内容`define`会被预处理器以文本方式替换。

此外，常量不应该改变，这对于你的想法来说应该是非常明显的危险信号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:12:25.970

不，因为s 在编译时使用[预处理器](http://en.wikipedia.org/wiki/C_preprocessor)`#define`插入到代码中。它们不能在运行时更改。

# android - 列表视图中空白区域的上下文菜单

> ID：10447676
> 
> 赞同：0
> 
> 时间：2012-05-04T11:10:48.173
> 
> 标签：android, android-layout, android-listview, contextmenu

我有一个简单的LinearLayout，里面有ListView（`match_parent`宽度和高度）。我需要一个上下文菜单，以便在长按 ListView 中的任何位置时显示。首先，我调用`registerForContextMenu`了 ListView。这使得上下文菜单仅在对列表项执行触摸时显示。然后我也调用`registerForContextMenu`了 LinearLayout，并将其设置为属性`android:longClickable="true"`。这没有帮助。

所以问题是如何为列表项下方的长按生成上下文菜单？例如，如果我们在列表视图中有 1 个项目，则该项目下方有很多空白空间。如果列表视图根据布局填充整个父级，为什么它不用于上下文菜单调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:28:47.173

我认为长时间单击`ListView`a上的任何地方都不是正常行为，这是用户期望的行为（尤其是在您的情况下，用户单击a`ContextMenu`下方的空白区域会出现 a ）。`ListView``ListView` `ContextMenu`

无论如何，对于您的示例，您可以将`ListView`height 属性设置为`wrap_content`（如果我没记错，这是推荐值），然后为父级和父级注册（当然您必须为两者提供相同的代码）`Contextmenu`。`ListView``LinearLayout`

# php - 如何在 setParameter 中转义'

> ID：10447682
> 
> 赞同：-1
> 
> 时间：2012-05-04T11:11:37.110
> 
> 标签：php, javascript

我有一个 javascript 函数被破坏，因为 ' ('Côte d'Azur') 没有被转义：

Javascript:searchDay('month', 'France', 'Côte d'Azur', '0', '201208', '18');

参数设置如下：

```
$jsUrl = new JavascriptUrl(
        "searchDay",
        array("id", "country", "region", "city" , "month",  "startDay" )
        );      

$jsUrl->setParameter("id", "month");
$jsUrl->setParameter('month', $monthCode);
$jsUrl->setParameter('country', $countryName);
$jsUrl->setParameter('region', $regionName ); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:14:19.980

```
('Côte d\'Azur') 
```

或者

```
("Côte d'Azur") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:14:28.577

听起来像是一份工作[**`addslashes()`**](http://il.php.net/manual/en/function.addslashes.php)。

> ```
> string addslashes ( string $str ) 
> ```
> 
> 在需要在数据库查询等中引用的字符之前返回带有反斜杠的字符串。这些字符是单引号 ( `'`)、双引号 ( `"`)、反斜杠 ( `\`) 和`NUL`（NULL 字节）。
> 
> 的一个示例使用`addslashes()`是当您将数据输入数据库时​​。例如，要将名称 O'reilly 插入数据库，您需要对其进行转义。强烈建议使用 DBMS 特定的转义函数（例如`mysqli_real_escape_string()`MySQL 或`pg_escape_string()`PostgreSQL），但如果您使用的 DBMS 没有转义函数并且 DBMS 使用 \ 来转义特殊字符，则可以使用此函数。这只是将数据放入数据库，不会插入额外的\。将 PHP 指令 magic_quotes_sybase 设置为 on 将意味着 ' 被另一个 ' 转义。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T11:16:10.733

您可以尝试替换`'`字符串中的任何`\'`内容，以便将它们转义，如下所示：

```
$regionName = str_replace("'", "\'", $regionName);
$jsUrl->setParameter('region', $regionName ); 
```

# c++ - C++“new T[size]”不起作用？

> ID：10447683
> 
> 赞同：5
> 
> 时间：2012-05-04T11:11:48.623
> 
> 标签：c++

我有一个模板类定义为：

```
#include <stdio.h>
#include <queue>

using namespace std;

template<class T>
class tbufferpool {
private:
    const int m_initial;
    const int m_size;
    const int m_total;
    T *m_buffer;
    vector<T*> m_queue;

public:
    // constructor
    tbufferpool(int initial, int size) : m_initial(initial), m_size(size), m_total(initial*size) {
        m_buffer = new T[m_total];
        T* next_buffer = m_buffer;
        for (int i = 0; i < initial; ++i, next_buffer += size) {
            m_queue.push_back(next_buffer);
        }
    } 
```

在构造函数的某个时刻，我会这样做：

```
m_buffer = new T[size]; 
```

这适用于大多数用例，但在一个测试中，我得到了 valgrind 报告的以下内存错误（下面的命令和相关代码段），但测试仍然可以通过。有趣的一点是`operator new(unsigned long)`它没有像我预期的那样为我设置“双”的具体 T 类型分配和对齐，但是`unsigned long`？如果我修改我的缓冲池实现和硬代码`new double[size]`，则不会显示此内存错误，但当然我`tbufferpool<double>`现在只能使用。

谁能建议如何解决这个问题？`new T[size]`应该是合法的权利吗？因为模板参数是在编译时由预处理器应用的，它为每个使用的模板类型创建一个新类。这会是编译器错误吗？

test_matrix 是一个包含 30 个测试用例的套件。在 valgrind 中只有一个测试会产生如下所示的问题，但该测试仍然通过。我使用变体检查了问题出处的函数调用的所有输入，并使用`new T[size]`变体将它们与相同的输入一起打印`new double[size]`。我使用 AraxisMerge 比较它们，它们是相同的。恐怕是与内存对齐有关的问题取决于我是使用模板参数还是具体的双精度类型...？

```
$ valgrind --show-reachable=yes --dsymutil=yes --track-origins=yes ./test_matrix
  [snip]
  ==3719== Conditional jump or move depends on uninitialised value(s)
  ==3719==    at 0x3BE86C8: mkl_blas_dscal (in /opt/intel/composerxe-2011.4.184/mkl/lib/libmkl_mc3.dylib)
  ==3719==    by 0x432FFFFFFFFFFFFF: ???
  ==3719==  Uninitialised value was created by a heap allocation
  ==3719==    at 0xD62F: malloc (vg_replace_malloc.c:266)
  ==3719==    by 0x97B15C: operator new(unsigned long) (in /opt/local/lib/gcc46/libstdc++.6.dylib)
  ==3719==    by 0x7FFF5FBFE54F: ???
  ==3719==    by 0x10014BDBF: ???
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x97B288: operator new[](unsigned long) (in /opt/local/lib/gcc46/libstdc++.6.dylib)
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x100013853: tbufferpool<double>::tbufferpool(int, int) (bufferpool.h:30)
  ==3719==    by 0x7003FFFFF: ???
  ==3719==    by 0x100079E7F: ??? (in ./test_matrix)
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x10014BE0F: ???
  ==3719== 
  ==3719== Conditional jump or move depends on uninitialised value(s)
  ==3719==    at 0x3BE86CA: mkl_blas_dscal (in /opt/intel/composerxe-2011.4.184/mkl/lib/libmkl_mc3.dylib)
  ==3719==    by 0x432FFFFFFFFFFFFF: ???
  ==3719==  Uninitialised value was created by a heap allocation
  ==3719==    at 0xD62F: malloc (vg_replace_malloc.c:266)
  ==3719==    by 0x97B15C: operator new(unsigned long) (in /opt/local/lib/gcc46/libstdc++.6.dylib)
  ==3719==    by 0x7FFF5FBFE54F: ???
  ==3719==    by 0x10014BDBF: ???
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x97B288: operator new[](unsigned long) (in /opt/local/lib/gcc46/libstdc++.6.dylib)
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x100013853: tbufferpool<double>::tbufferpool(int, int) (bufferpool.h:30)
  ==3719==    by 0x7003FFFFF: ???
  ==3719==    by 0x100079E7F: ??? (in ./test_matrix)
  ==3719==    by 0x7FFF5FBFE58F: ???
  ==3719==    by 0x10014BE0F: ???
  [snip] 
```

系统详情：

```
/Users/bravegag/code/fastcode_project/build_debug$ uname -a && g++ --version
Darwin Macintosh-4.local 11.3.0 Darwin Kernel Version 11.3.0: Thu Jan 12 18:47:41 PST 2012; 
root:xnu-1699.24.23~1/RELEASE_X86_64 x86_64
g++ (GCC) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:37:46.267

请注意两者的区别

```
m_buffer = new T[size]; 
```

和

```
m_buffer = new T[size](); 
```

在前一种情况下，数组未初始化，因此您的 valgrind 错误：

```
Conditional jump or move depends on uninitialised value 
```

也就是说，根据我的经验，在这种情况下你可以忽略这个特殊的 valgrind 输出。由于您显然使用了某种 blas 实现，因此很可能是 BLAS 库内部优化的效果，不会做坏事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:38:44.020

您的问题与内存分配本身无关。Valgrind 说您正在使用指向的数组中的未初始化值`m_buffer`。你可以得到相同的

```
 T value;
// use value 

```

或者

```
 T values[size];
// use values 

```

要解决此问题，您需要在内存分配后使用适当的值初始化缓冲区，例如

```
 m_buffer = new T[size];
std::fill_n(m_buffer, size, T()); 

```

```
 m_buffer = new T[size](); // doesn't work in gcc3.x.x 

```

或者只使用 std::vector 代替。

# java - Java apns：应用程序下的设备令牌列表

> ID：10447688
> 
> 赞同：0
> 
> 时间：2012-05-04T11:11:59.063
> 
> 标签：java, push-notification, apple-push-notifications

我正在尝试创建一个能够向 iPad/iPhone 设备发送推送通知的 java 项目。通过提供设备令牌的静态列表，我可以使用这个 java 应用程序发送推送通知。

但我想要的是，我需要获取安装相同应用程序的设备的设备令牌列表。那么有什么方法可以获取绑定在应用程序下的设备令牌列表。？？

对此的任何建议都将是可观的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:45:46.303

APNS 根据设备证书生成设备令牌并跟踪它们。但是，您不能向 APNS 索要令牌列表。

在 APNS 生成令牌后，它会被发送回应用程序。您的应用负责将令牌转发到您的服务器。您必须自己将此令牌列表存储在您的服务器上。您稍后可以使用此列表通过 APNS 发送通知。

# outlook - 在 Outlook 中将字符串转换为超链接

> ID：10447693
> 
> 赞同：1
> 
> 时间：2012-05-04T11:12:21.477
> 
> 标签：outlook, add-in

我们的错误 ID 的格式为`ET/s?/d*`，如果在 Outlook 中有一个插件，可以在电子邮件正文中找到这些错误 ID，并将其包装在适当的超链接中，那就太好了。在开始之前，了解它是否可能会很有用。

本质上需要获取消息窗口或预览窗格中的文本，如果它符合特定的正则表达式，则动态修改它。

# wix - Wix3.5：未定义的预处理器变量'$（var.Platform）'

> ID：10447696
> 
> 赞同：3
> 
> 时间：2012-05-04T11:12:27.340
> 
> 标签：wix, preprocessor, wix3.5

我正在尝试为 x64 系统编写 MSI 安装程序

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">

  <?if $(var.Platform)=x64 ?>
  <?define win64Flag = "yes" ?>
  <?else ?>
  <?define win64Flag = "no" ?>
  <?endif ?>

</Wix> 
```

这应该是使用内置变量 Platform 的一种非常简单的方法，但失败如下：

```
D:\>candle m.wxs
Microsoft (R) Windows Installer Xml Compiler version 3.5.2519.0
Copyright (C) Microsoft Corporation. All rights reserved.

m.wxs
D:\m.wxs(4) : error CNDL0150 : Undefined preprocessor variable '$(var.Platform)'. 
```

所以这意味着这个“平台”不是一个内置变量？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:04:08.363

不，它不是内置的。您可能不需要它。有关Candle 如何为您处理大部分细节，请参阅[http://www.joyofsetup.com/2010/05/14/working-hard-or-hardly-working/ 。](http://www.joyofsetup.com/2010/05/14/working-hard-or-hardly-working/)

# monotouch.dialog - 具有向下钻取功能的 Monotouch Dialog News 样式元素

> ID：10447708
> 
> 赞同：0
> 
> 时间：2012-05-04T11:13:25.067
> 
> 标签：monotouch.dialog

在 Montouch 对话框中，我想要一个新闻列表样式的元素表，其中我可以在左侧有一个图像、一个主标题、一个值，并且能够添加一个点击事件，然后显示新闻项目详细信息。

我玩过以下元素：

```
ImageStringElement, BadgeElement 
```

...但这些都没有提供我想要的所有要求。

任何想法或我需要创建自定义元素。如果是这样，我将如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T06:56:46.437

您可以使用 XCode 创建自己的 CustomCell 并加载 nib：

```
var cell =(CustomCell) tv.DequeueReusableCell("CellPlace");
if(cell==null)
cell = (CustomCell)Runtime.GetNSObject(NSBundle.MainBundle.LoadNib("CustomCell",new CustomCell(),null).ValueAt(0)); 
```

# linux - 在命令提示符 (Linux) 上将操作作为参数传递

> ID：10447709
> 
> 赞同：5
> 
> 时间：2012-05-04T11:13:29.010
> 
> 标签：linux, bash, shell

我在 linux bash 中编写了一个程序，以下是启动/停止该程序的方法：

```
start_program
stop_program
restart_program. 
```

我已经在 /usr/bin 中复制了上面的脚本，所以这些脚本作为命令工作。但我希望我只输入程序名称而不是上面的命令，然后将操作作为参数传递。例如，如果我想启动程序，那么我应该在命令提示符下写：

```
ProgramName start 
```

如果我想卸载然后

```
ProgramName uninstall 
```

如果重启

```
ProgramName restart 
```

那么我怎样才能让它只写程序名称然后将动作作为参数传递并按回车键来做那件事。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T11:20:26.323

一种常见的方法是使用 case 语句：

```
case "$1" in
  start)
    # Your Start Code
    ;;
  stop)
    # Your Stop Code
    ;;
  restart)
    # Your Restart Code
    ;;
  *)
    echo "Usage: $0 {start|stop|restart}" >&2
    exit 1
    ;;
esac 
```

如果你`restart`只是`stop`then `start`，你可以这样做：

```
start() {
  # Your Start Code
}

stop() {
  # Your Stop Code
}

case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    stop
    start
    ;;
  *)
    echo "Usage: $0 {start|stop|restart}" >&2
    exit 1
    ;;
esac 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:27:06.913

Sionide21 是对的。

这里有一篇很棒的小文章：

[http://wiki.bash-hackers.org/scripting/posparams](http://wiki.bash-hackers.org/scripting/posparams)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T18:31:04.307

这是 case 语句的替代方法。

使用bash/shell 中的**if 语句**启动/停止/重新启动/卸载您的程序。

```
#!/bin/bash

start_module() {
      # Your start Code
}

stop_module() {
      # Your stop Code
}

restart_module() {
      # Your restart Code
}

uninstall_module() {
      # Your uninstall Code
}

if [ $# != 1 ]; then                # If Argument is not exactly one
    echo "Some message"
    exit 1                         # Exit the program
fi

ARGUMENT=$(echo "$1" | awk '{print tolower($0)}')     # Converts Argument in lower case. This is to make user Argument case independent. 

if   [[ $ARGUMENT == start ]]; then

    start_module

elif [[ $ARGUMENT == stop ]]; then

    stop_module

elif [[ $ARGUMENT == uninstall ]]; then

    uninstall_module

elif [[ $ARGUMENT == restart ]]; then

    restart_module

else 
    echo "Only one valid argument accepted: START | STOP | RESTART | UNINSTALL
          case doesn't matter. "
fi 
```

将此代码保存到 myScript.sh

```
Usage: 

./myScript.sh Start
./myScript.sh Stop
./myScript.sh check
./myScript.sh uninstall 
```

这是体现这种执行方式[的真实程序示例。](https://github.com/Raman-Kathpalia/IBM-MQ-Multi-Instance-QMgr-Automatic-Start/blob/master/MQ_Multi_Instance_Monitor.bash)

***旁注：***省略任何现有的模块/功能或添加另一个可以轻松完成。

**如何取出/抑制特定模块的运行（例如维护）？**

从***if 语句块***中取出特定模块将禁用它，因为在运行时不会调用该模块。

# android - 自定义操作栏 sherlock 选项卡和下拉列表

> ID：10447710
> 
> 赞同：0
> 
> 时间：2012-05-04T11:13:29.217
> 
> 标签：android, android-layout

我想自定义操作栏下方选项卡的样式。对于我正在使用的操作栏

```
android:theme="@style/Theme.Sherlock.Light.DarkActionBar 
```

但选项卡应该有白色背景和黑色文本颜色。我还想为操作栏的下拉列表设置不同的背景色。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:21:05.477

该网站为您生成更改选项卡的主题，您可以查看它是如何完成的，或者只是使用这个东西生成的主题和资产。[http://jgilfelt.github.com/android-actionbarstylegenerator](http://jgilfelt.github.com/android-actionbarstylegenerator)

# javascript - 使用格式化文本获取 DIV 或 Span 的动态宽度高度

> ID：10447715
> 
> 赞同：0
> 
> 时间：2012-05-04T11:13:41.993
> 
> 标签：javascript, jquery, html

获取包含一些非格式化文本的 Div 或 Span 的宽度或高度非常容易，例如：

```
<div>Hello World</div> 
```

通过使用 JQuery 的 width() 或 height() 方法。这似乎不适用于格式化文本元素，如下例所示：

```
<span id="caption" class="caption" style="left: 406px; top: 357.5px;">
<textformat leading="2">
    <p align="LEFT">
        <font face="Verdana" color="#FFFFFF" size="4" kerning="0" letterspacing="0">
            <b>TYPE</b><b><i>iorad</i></b>and<b>PRESS ENTER</b>
        </font>
    </p>
</textformat>
</span> 
```

这个例子包含了一些格式化的文本元素，当我们渲染 html 页面时它们会很好的显示出来。但是当我们尝试获取动态宽度或高度时，它要么返回 0 要么返回 null，如下所示：

```
$(".caption").width() returns 0 
```

关于从 jquery 或 js 获取动态宽度高度的解决方案有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:18:58.980

那是因为 HTML 代码被破坏了。

内联元素 (span) 中不能有块元素 (p)，因此浏览器会尽力更正代码。您尝试此操作的特定浏览器通过将块元素移到内联元素之外，将内联元素留空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:22:23.327

它的工作。看看这里的演示[http://jsfiddle.net/Simplybj/ZkEyR/1/](http://jsfiddle.net/Simplybj/ZkEyR/1/)

# wordpress - WP 查询不起作用 DESC

> ID：10447718
> 
> 赞同：0
> 
> 时间：2012-05-04T11:14:05.800
> 
> 标签：wordpress

我正在使用以下查询：

```
<?php $postslist = new WP_Query('meta_key=Ordermetakey&orderby=meta_value_num&order=DESC&posts_per_page=5'); 
```

对首页上的小帖子列表进行排序以显示最新消息。它需要通过元键对它们进行排序并执行此 DESC。奇怪的是，即使我已将 ASC 放在此查询中，它也会显示帖子 ASC。

元键的值是日期 - 时间戳：示例：120403 = 03-04-2012

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:19:40.960

你试过这个吗，它只在主页上有效

```
<?php if ( is_home() ) ;?>
<?php
$recentposts=get_posts('showposts=5');
if ($recentposts) {
foreach($recentposts as $post) {
setup_postdata($post);
?>
<p><?php the_time('m.d.y') ?> <a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent     Link to 
<?php the_title_attribute(); ?>"><?php the_title(); ?></a></p>
<?php
}
}
?>
<?php endif; ?> 
```

# android - 本机应用程序和网络应用程序之间的通信

> ID：10447721
> 
> 赞同：-1
> 
> 时间：2012-05-04T11:14:12.097
> 
> 标签：android, web-applications

我想在android中进行本机应用程序和网络应用程序之间的通信。如何做到这一点任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:18:05.867

Android 服务和广播意图允许两个应用程序进行通信。对于网络应用程序，您需要将一些应用程序本地化。我假设您已经在使用 WebView；您需要阅读 WebView 文档，了解如何将 JavaScript 绑定到本机函数，以及本机代码如何调用页面中的 JavaScript。（该 JavaScript 可以是服务器提供的页面的一部分，也可以由您的应用程序注入到页面中。）

# jquery - 日期时间选择器值未保存在数据库中

> ID：10447726
> 
> 赞同：0
> 
> 时间：2012-05-04T11:14:22.867
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我正在使用日期时间选择器。我选择一天并保存数据，但在我的数据库中，它将值保存为`1/1/0001 12:00:00 AM`. 谁能告诉我这是为什么？

```
@model MvcApplication4.Models.Reservation
@using JQueryUIHelpers

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<title>jQuery UI Helpers - @ViewBag.Title</title>
<script src="../../Scripts/jquery-ui.unobtrusive-0.4.0.min.js"   type="text/javascript"></script>
<script src="../../Scripts/jquery-1.7.2.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />       

<script src="@Url.Content("~/Scripts/jquery-ui-1.8.19.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.unobtrusive.min.js")" type="text/javascript"></script>   
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.Room.Room_number, "Room")
    </div>

    <div class="editor-field">
        @Html.DropDownList("Room_ID", string.Empty)
        @Html.ValidationMessageFor(model => model.Room.Room_number)
    </div>

    <fieldset>
        <legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">Detalii Client</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Guest_ID, "First Name")
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Guest.FirstName)
            <div class="editor-label">
                @Html.LabelFor(model => model.Guest_ID, "Last Name")
            </div>

        <div class="editor-field">
            @Html.EditorFor(model => model.Guest.LastName)
            <div class="editor-label">
                @Html.LabelFor(model => model.Guest_ID, "Phone number")
            </div>

        <div class="editor-field">
            @Html.EditorFor(model => model.Guest.Phone)
            @Html.ValidationMessageFor(model => model.Guest_ID)
        </div>
    </fieldset>

    <fieldset>
        <legend class="ui-state-legend-default ui-corner-top ui-corner-bottom">Perioada rezervare</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Data_Check_in)
        </div>
        <div class="editor-field">
            @(Html.JQueryUI().Datepicker("anotherDate").MinDate(DateTime.Today).ShowButtonPanel(true)
      .ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))
            @Html.ValidationMessageFor(model => model.Data_Check_in)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Data_Check_out)
        </div>
        <div class="editor-field">
            @(Html.JQueryUI().Datepicker("CheckoutDate").MinDate(DateTime.Today).ShowButtonPanel(true)
      .ChangeYear(true).ChangeMonth(true).NumberOfMonths(2))
            @Html.ValidationMessageFor(model => model.Data_Check_out)
        </div>
    </fieldset>
    <div class="editor-label">
        @Html.LabelFor(model => model.Preference_ID, "Preference")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Preference_ID", string.Empty)
        @Html.ValidationMessageFor(model => model.Preference_ID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model =>model.Price)
    </div>       

    <div class="editor-field">
        @Html.EditorFor(m =>m.Price)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Card_ID, "CreditCard")
    </div>
    <div class="editor-field">
        @Html.DropDownList("Card_ID", String.Empty)
        @Html.ValidationMessageFor(model => model.Card_ID)
    </div>

    <p><input type="submit" value="Create" /></p>
} 
```

这是我的创建操作：

```
public ActionResult Create()
{
    ViewBag.Card_ID = new SelectList(db.CreditCards, "CardID", "CardType");
    ViewBag.Guest_ID = new SelectList(db.Guests, "Guest_ID", "FirstName");
    ViewBag.Preference_ID = new SelectList(db.Preferences, "Preference_ID", "Preference_Type");
    ViewBag.Room_ID = new SelectList(db.Rooms, "RoomID", "Room_number");
    return View();
} 

//
// POST: /RS/Create

[HttpPost]
public ActionResult Create(Reservation reservation)
{
    if (ModelState.IsValid)
    {
        db.Reservations.Add(reservation);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }

    ViewBag.Card_ID = new SelectList(db.CreditCards, "CardID", "CardType", reservation.Card_ID);
    ViewBag.Guest_ID = new SelectList(db.Guests, "Guest_ID", "FirstName", reservation.Guest_ID);
    ViewBag.Preference_ID = new SelectList(db.Preferences, "Preference_ID", "Preference_Type", reservation.Preference_ID);
    ViewBag.Room_ID = new SelectList(db.Rooms, "RoomID", "Room_number", reservation.Room_ID);
    return View(reservation);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:35:09.923

```
 <input id="dateFormate" type="hidden" value='@System.Threading.Thread.CurrentThread.
CurrentCulture.DateTimeFormat.ShortDatePattern.ToLower().Replace("yyyy", "yy")'/>

            <div>
                    <div>
                        End Date
                    </div>
                    <div>
                        @Html.TextAreaFor(model => model.EndDate)
                    </div>
            </div>

            $('#EndDate').datepicker({
                dateFormat: $('#dateFormate').val(),
                showOn: 'button',
                buttonImageOnly: true,
                buttonImage: '/Content/Calendar.png',
                buttonText: 'Click here (date)'               
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:45:10.590

尝试使用它，对我来说它更简单。
在头部放这个：

```
 <link href="../../Content/css/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/css/jquery.ui.datepicker.css" rel="stylesheet" type="text/css"/>

    <script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.ui.core.min.js" type="text/javascript"></script>
  <script type="text/javascript">
        $(function () {
            $("#Data_Check_out").datepicker({ dateFormat: 'dd-mm-yy' });
            $("#Data_Check_in").datepicker({ dateFormat: 'dd-mm-yy' });
        });
    </script> 
```

在您看来：

```
 <%: Html.LabelFor(model => model.Data_Check_in) %>
        <br />
            <%: Html.EditorFor(model => model.Data_Check_in)%>
            <%: Html.ValidationMessageFor(model => model.Data_Check_in) %>
        <br />
            <%: Html.LabelFor(model => model.Data_Check_out) %>
        <br />
            <%: Html.EditorFor(model => model.Data_Check_out) %>
            <%: Html.ValidationMessageFor(model => model.Data_Check_out) %>
        <br /> 
```

# opencv - OpenCV - 在偏移处绘制轮廓

> ID：10447731
> 
> 赞同：5
> 
> 时间：2012-05-04T11:14:44.397
> 
> 标签：opencv, drawing, contour, approximate

我正在使用 OpenCV 进行图像处理。我正在寻找一个人体，我想隔离（段）。

目前，我能够找到身体的轮廓，并用多边形近似轮廓。接下来，我想在 cvWatershed 中使用该轮廓，以真正隔离身体。

有谁知道我如何在向中心偏移处绘制轮廓？为了说明，请参见下图。

![在此处输入图像描述](../Images/44477ef848a3c957e6fc0c16ff617563.png)

蓝色：轮廓的多边形近似

红色：我想要的多边形，但找不到。（在上图中，我使用了 Photoshop...）

这是我查找和绘制当前轮廓的方法：

```
CvContourScanner scanner = cvStartFindContours(mask, pStorage, sizeof(CvContour),    CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
CvSeq* c;
CvSeq* polyContour;
int numCont = 0;
int perimScale = 4;
int contour_approx_level = 6;
while((c = cvFindNextContour(scanner)) != NULL)
{
    CvSeq* c_new;

    // Polygonal approximation
    c_new = cvApproxPoly(c, sizeof(CvContour), pStorage, CV_POLY_APPROX_DP, contour_approx_level, 0);

    // Create the new contour
    cvSubstituteContour(scanner, c_new);
    numCont++;
}

polyContour = cvEndFindContours(&scanner);
int i = 0;
for(i=0, c=polyContour; c!=NULL; c = c->h_next, i++)
{
    cvDrawContours(pOutput, c, cvScalar(255,125,0), cvScalar(255,255,0), -1, 2, 8);
}

/* Draw the contour at an offset towards the center here */
// Based upon the answers, I found 2 solutions 
```

**编辑**：根据以下答案，我找到了两种解决方案：

```
// 1) Erode - 
// void cvErode( const CvArr* A, CvArr* C, IplConvKernel* B=0, int iterations=1 );
cvErode(pOutput, pOutput, NULL, 3);

// 2) Another option - draw with a black border and thick pencil:
cvDrawContours(pOutput, c, cvScalarAll(0), cvScalarAll(0), 12, 2, 8); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:08:29.437

只需在获取轮廓之前 [侵蚀您找到的蓝色多边形。](http://opencv.itseez.com/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)[这里](http://opencv.itseez.com/modules/imgproc/doc/filtering.html?highlight=erode#void%20cvErode%28const%20CvArr%2a%20src,%20CvArr%2a%20dst,%20IplConvKernel%2a%20element,%20int%20iterations%29)是 C API（对不起，我对 C API 不是很熟悉）。

```
// void cvErode( const CvArr* A, CvArr* C, IplConvKernel* B=0, int iterations=1 );
cvErode(pOutput, pOutput, NULL, 3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:57:31.893

它可能不是最优雅的东西，但它肯定会起作用：

1.  在新数组中绘制原始轮廓。
2.  计算它的距离变换。
3.  阈值：如果您想要 10 个像素的偏移量，请将距离图中的像素保持在 10 以上。
4.  找到新图像的轮廓。

可以使用函数 直接在轮廓上完成类似且可能不太严格的事情`pointPolygonTest()`。

# java - java中什么时候抛出连接超时异常？

> ID：10447732
> 
> 赞同：0
> 
> 时间：2012-05-04T11:14:51.230
> 
> 标签：java, httpurlconnection

这是我的代码：

```
connection.setConnectTimeout(5000);
ObjectOutputStream out=new ObjectOutputStream(connection.getOutputStream());
out.writeObject(to_be_sent);
out.flush();
out.close();
int resp_code=connection.getResponseCode();
if(resp_code==200)
{
 JOptionPane.showMessageDialog(obj.frame, "Your Application has been sent Successfully");
} 
```

如您所见，我已将连接超时设置为 5 秒。我想知道这个连接时间异常是什么时候抛出的，哪一行抛出它。当 connection.getResponseCode() 5 秒没有返回任何东西时会抛出它吗？
**编辑**
刚刚查找了javadocs，发现只有`IOException`在无法连接到服务器时才会抛出getResponse代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:24:14.090

> 我想知道这个连接时间异常是什么时候抛出的，哪一行抛出它。

我认为它会发生在打开输出流的语句中。

但是，最好的答案是自己尝试并查看。对整个事情进行尝试/捕获，尝试连接到将要超时的 URL，然后检查堆栈跟踪以查看超时异常的来源。

* * *

> 刚才查了javadocs，发现只有在连接不上服务器的时候`getResponseCode()`才会抛出。`IOException`

这可能是真的（......我并不完全相信......）但这并不意味着在那之前不会抛出异常。如果你仔细想想，它*几乎必须*在那之前发生。如果您尚未建立连接，则无法将数据写入和刷新到服务器！

* * *

Eugenio的回答也是正确的。`setConnectTimeout(...)`您必须在尝试连接之前打电话。如果你之后设置它，超时没有效果。

* * *

> 所以这是我的实际问题。我想告诉用户他没有连接到互联网。为此，我给了`connectTimeout()`. 但不是抛出超时异常，而是抛出`MalformedURLException`.

据推测，这是因为它无法进行 DNS 查找来解析 URL 中的主机名。或者（更可能是 IMO），由于 URL 格式不正确而引发了此异常……这完全是一个不同的问题。*如果真正的*问题是有人输入了错误的 URL，那么您不想告诉用户互联网已关闭！

如果你想测试你是否有互联网连接，你需要做一些较低级别的事情...... 例如

*   尝试打开与您已知 IP 地址的主机的套接字连接，
*   尝试使用`InetAddress.getByName()`来解析已知的 DNS 名称，或
*   使用`NetworkInterface`该类查看本地计算机是否具有“实时”网络接口。

实际上，当您考虑所有可能出错以阻止有效的互联网访问时，确定“互联网正在运行”是相当困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:26:37.357

创建连接和连接是一个多步骤的过程，一些参数在执行连接后不会有任何影响。

假设您正在使用 URLConnection，如果您已经调用了 connect()，或者隐式执行连接的方法之一，它根本没有任何效果。

如果连接是使用 getOutputStream 方法隐式建立的，则将在您的第二行代码中引发异常

如果无法在指定时间内建立连接，则会引发 java.net.SocketTimeoutException。有关连接方法和设置连接参数的更多信息在[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#connect%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:19:27.137

> 我想知道这个连接时间异常是什么时候抛出的

当连接尝试超时时抛出。

> 以及哪条线抛出它。

堆栈跟踪告诉你哪一行抛出它。

# java - HSQLDB SQLException：建立数据库连接的内存不足

> ID：10447733
> 
> 赞同：10
> 
> 时间：2012-05-04T11:14:51.333
> 
> 标签：java, hsqldb

我们有一个带有本地 HSQLDB 数据库的桌面应用程序。一些客户报告他们的应用程序停止工作。当我尝试使用 DbVisualizer 打开它时，我可以在调试控制台上看到：

```
12:45:32 [DEBUG pool-2-thread-1 D.?] RootConnection:     jdbcDriver.connect("jdbc:hsqldb:C:\test\database.db", {user=**, password=})
java.sql.SQLException: error in script file line: 56 out of memory
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.jdbcConnection.<init>(Unknown Source)
    at org.hsqldb.jdbcDriver.getConnection(Unknown Source)
    at org.hsqldb.jdbcDriver.connect(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.onseven.dbvis.d.B.D.?(Z:1548)
    at com.onseven.dbvis.d.B.F$A.call(Z:278)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

有谁知道打开这个并分析问题所在？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T10:55:37.530

通常，当数据库损坏时会发生此异常。尝试备份数据库。有关此主题的另一个讨论，请参见[此处](https://stackoverflow.com/questions/3144638/am-i-crazy-switching-an-established-product-from-hsqldb-to-apache-derby)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:34:42.447

使用不兼容的驱动程序版本打开 HSQLDB 数据库时会出现此错误。例如，我在使用 version`2.2.8`打开使用 version 保存的 HSQLDB 数据库时收到它`1.8.1.3`。我使用[SQuirrel](http://squirrel-sql.sourceforge.net/)查看这些数据库，并且必须设置几个不同的驱动程序来支持每个版本。我想[DB Visualizer](http://www.dbvis.com/)具有类似的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T06:36:05.660

确保如果数据库非常大，则为堆分配更多内存。查看[Java 堆空间内存不足](https://stackoverflow.com/questions/6748432/java-heap-space-out-of-memory)

# ruby-on-rails - 如何将数据放在Prawn表格的下一行

> ID：10447737
> 
> 赞同：1
> 
> 时间：2012-05-04T11:15:01.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, prawn

我正在使用虾宝石，我的 show.pdf.prawn 中有这个

```
pdf.text "Customer:  #{@customer.name}", :size => 20, :style => :bold, :align => :center

pdf.move_down 10

billing = @customer.billing_addresses.map do |item|
      [
        'Billing Address', "#{item.billing_address}",
        'City', "#{item.city}",
        'Pincode', "#{item.pincode}",
        'Country', "#{item.country.country_name}",
        'State', "#{item.state.state_name}",
        'Tel. Work', "#{item.tel_work}",
      ]
    end

    pdf.table billing,
    :border_width => 0,
    :font_size => 11,
    :position => :center,
    :column_widths => { 0 => 200, 1 => 300},
    :row_widths => { 0 => 500, 1 => 500} 
```

我得到这个错误

> 对虾::错误::CannotFit

似乎是什么问题？我该如何解决？我浏览了对虾错误的文档，上面写着“当要求对虾将某些东西放入一个太小的盒子时引发无法适应”我无法理解……我认为问题是一切都排成一排……如何使其显示在单独的行中？？？，任何指导都会有所帮助，在此先感谢。！！

# .net - 不同应用程序域上的加密字符串更改

> ID：10447739
> 
> 赞同：1
> 
> 时间：2012-05-04T11:15:05.877
> 
> 标签：.net, sharepoint, encryption, powershell, aes

通过 powershell 和 sharepoint 应用程序页面调用以下加密和解密算法：

```
 public static string Encrypt(string dataToEncrypt, string password, string salt)
    {
        AesManaged aes = null;
        MemoryStream memoryStream = null;
        CryptoStream cryptoStream = null;

        try
        {
            Rfc2898DeriveBytes rfc2898 = new Rfc2898DeriveBytes(password, Encoding.UTF8.GetBytes(salt), 10000);

            aes = new AesManaged();
            aes.Key = rfc2898.GetBytes(32);
            aes.IV = rfc2898.GetBytes(16);

            memoryStream = new MemoryStream();
            cryptoStream = new CryptoStream(memoryStream, aes.CreateEncryptor(), CryptoStreamMode.Write);

            byte[] data = Encoding.UTF8.GetBytes(dataToEncrypt);
            cryptoStream.Write(data, 0, data.Length);
            cryptoStream.FlushFinalBlock();

            return Convert.ToBase64String(memoryStream.ToArray());
        }
        finally
        {
            if (cryptoStream != null)
                cryptoStream.Close();

            if (memoryStream != null)
                memoryStream.Close();

            if (aes != null)
                aes.Clear();
        }
    } 
```

为什么加密的字符串会发生变化？是关于应用领域的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:41:50.463

当我使用相同的数据、密码和盐运行问题代码时，每次都会产生相同的结果。你应该确保 dataToEncrypt 和 Salt 每次都是相同的，即使一个字节改变了，其余的也改变了。

尽管如此，对于语义安全来说，这不是你想要的。您想要一个随机盐以使暴力破解密码变得更加困难，并且需要一个随机的非秘密 IV 集，以便两个相同的明文没有相同的密文。

这是[加密和解密字符串](https://stackoverflow.com/a/10366194/637783)的最佳实践示例，使用设计的加密算法安全功能。这`SimpleEncryptWithPassword`类似于您正在做的事情，尽管在示例中派生键的迭代是可变的，并且出于性能原因，您可能希望对其进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:28:13.260

加密字符串因`$`字符而异。`$`应该在通过 powershell 调用函数时进行转义。

# grails - ActiveMQ 嵌入式代理 SSL

> ID：10447741
> 
> 赞同：6
> 
> 时间：2012-05-04T11:15:12.617
> 
> 标签：grails, ssl, activemq

我正在尝试设置一个支持 SSL 的嵌入式 ActiveMQ 代理。

我不断收到相同的错误消息：

```
ActiveMQ Transport Server: ssl://localhost:61613, called closeSocket()
2012-05-04 12:53:11,961 [ActiveMQ Transport Server: ssl://localhost:61613] ERROR          broker.TransportConnector  - Could not accept connection : No available certificate or key corresponds to the SSL cipher suites which are enabled. 
```

对此进行搜索表明在生成密钥库和信任库时可能出现故障。

我尝试使用这些指南生成密钥库和信任库，但没有成功。 [http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#CreateKeystore](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#CreateKeystore)

[http://activemq.apache.org/how-do-i-use-ssl.html](http://activemq.apache.org/how-do-i-use-ssl.html)

我试图在 grails 中进行设置，并在 conf/spring/resources.groovy 中定义 EmbeddedActiveMq，如下所示：

```
SpringSslContext sslContext = new SpringSslContext()
    FileSystemResource keyStoreResource = new FileSystemResource("/path/to/keyStore")
    FileSystemResource trustStoreResource = new FileSystemResource("/path/to/trustStore")
    sslContext.setKeyStore(keyStoreResource)
    sslContext.setKeyStorePassword("password")
    sslContext.setTrustStore(trustStoreResource)
    sslContext.setTrustStorePassword("trustword")

    SslBrokerService broker = new SslBrokerService()
    broker.setBrokerName("broker")
    broker.setPersistent(true)
    broker.setUseJmx(true)
    broker.setSslContext(sslContext)

TransportConnector connector = new TransportConnector
connector.setUri(new("ssl://localhost:61613"))
broker.addConnector(connector)
broker.start() 
```

然后使用我真的无法获得任何其他有价值的调试信息

```
 System.setProperty("javax.net.debug", "ssl,handshake,data,trustmanager,keymanager") 
```

是否存在 java 仍在尝试使用 jre6/lib/security 中的证书文件的问题？

为了使密钥库等正常工作，您需要做一些具体的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T13:36:11.233

看看 ActiveMQ 单元测试，尤其是[SslBrokerServiceTest](https://github.com/apache/activemq/blob/master/activemq-unit-tests/src/test/java/org/apache/activemq/transport/tcp/SslBrokerServiceTest.java#L59)。它展示了如何正确配置 SslBrokerService 以及如何创建`KeyStore`和`TrustStore`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T15:11:50.183

[您在上面提供的链接 (http://activemq.apache.org/how-do-i-use-ssl.html) 实际上引用了在Thawte](https://search.thawte.com/support/ssl-digital-certificates/index?page=content&id=SO10061)解决您的问题的故障排除指南。完成这些步骤并验证您是否可以正常工作。

另一个线索，这可能是一个长镜头，但无论如何 - 当我在 Java 中遇到证书问题时（虽然主要是 DSA 证书 -**确保你有 RSA 证书以减少麻烦**），安装的 JVM 对某些密码有出口限制。这是“补丁”的链接。我不认为这会是你的情况，但无论如何，可能是一个检查的想法。

[http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html)

# hadoop - Hadoop中的数据复制错误

> ID：10447743
> 
> 赞同：23
> 
> 时间：2012-05-04T11:15:19.210
> 
> 标签：hadoop, replication

我正在按照[Michael Noll 的教程](http://www.michael-noll.com/wiki/Running_Hadoop_On_Ubuntu_Linux_%28Single-Node_Cluster%29)在我的机器上实现 Hadoop 单节点集群，并且遇到了数据复制错误：

这是完整的错误消息：

> ```
> > hadoop@laptop:~/hadoop$ bin/hadoop dfs -copyFromLocal
> > tmp/testfiles testfiles
> > 
> > 12/05/04 16:18:41 WARN hdfs.DFSClient: DataStreamer Exception:
> > org.apache.hadoop.ipc.RemoteException: java.io.IOException: File
> > /user/hadoop/testfiles/testfiles/file1.txt could only be replicated to
> > 0 nodes, instead of 1   at
> > org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1271)
> >     at
> > org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:422)
> >     at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)  at
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >     at java.lang.reflect.Method.invoke(Method.java:597)     at
> > org.apache.hadoop.ipc.RPC$Server.call(RPC.java:508)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:959)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:955)     at
> > java.security.AccessController.doPrivileged(Native Method)  at
> > javax.security.auth.Subject.doAs(Subject.java:396)  at
> > org.apache.hadoop.ipc.Server$Handler.run(Server.java:953)
> > 
> >     at org.apache.hadoop.ipc.Client.call(Client.java:740)   at
> > org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)  at
> > $Proxy0.addBlock(Unknown Source)    at
> > sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)     at
> > sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> >     at
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >     at java.lang.reflect.Method.invoke(Method.java:597)     at
> > org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
> >     at
> > org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
> >     at $Proxy0.addBlock(Unknown Source)     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:2937)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:2819)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2000(DFSClient.java:2102)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2288)
> > 
> > 12/05/04 16:18:41 WARN hdfs.DFSClient: Error Recovery for block null
> > bad datanode[0] nodes == null 12/05/04 16:18:41 WARN hdfs.DFSClient:
> > Could not get block locations. Source file
> > "/user/hadoop/testfiles/testfiles/file1.txt" - Aborting...
> > copyFromLocal: java.io.IOException: File
> > /user/hadoop/testfiles/testfiles/file1.txt could only be replicated to
> > 0 nodes, instead of 1 12/05/04 16:18:41 ERROR hdfs.DFSClient:
> > Exception closing file /user/hadoop/testfiles/testfiles/file1.txt :
> > org.apache.hadoop.ipc.RemoteException: java.io.IOException: File
> > /user/hadoop/testfiles/testfiles/file1.txt could only be replicated to
> > 0 nodes, instead of 1   at
> > org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1271)
> >     at
> > org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:422)
> >     at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)  at
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >     at java.lang.reflect.Method.invoke(Method.java:597)     at
> > org.apache.hadoop.ipc.RPC$Server.call(RPC.java:508)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:959)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:955)     at
> > java.security.AccessController.doPrivileged(Native Method)  at
> > javax.security.auth.Subject.doAs(Subject.java:396)  at
> > org.apache.hadoop.ipc.Server$Handler.run(Server.java:953)
> > 
> > org.apache.hadoop.ipc.RemoteException: java.io.IOException: File
> > /user/hadoop/testfiles/testfiles/file1.txt could only be replicated to
> > 0 nodes, instead of 1   at
> > org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1271)
> >     at
> > org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:422)
> >     at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)  at
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >     at java.lang.reflect.Method.invoke(Method.java:597)     at
> > org.apache.hadoop.ipc.RPC$Server.call(RPC.java:508)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:959)     at
> > org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:955)     at
> > java.security.AccessController.doPrivileged(Native Method)  at
> > javax.security.auth.Subject.doAs(Subject.java:396)  at
> > org.apache.hadoop.ipc.Server$Handler.run(Server.java:953)
> > 
> >     at org.apache.hadoop.ipc.Client.call(Client.java:740)   at
> > org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)  at
> > $Proxy0.addBlock(Unknown Source)    at
> > sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)     at
> > sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> >     at
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >     at java.lang.reflect.Method.invoke(Method.java:597)     at
> > org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
> >     at
> > org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
> >     at $Proxy0.addBlock(Unknown Source)     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:2937)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:2819)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2000(DFSClient.java:2102)
> >     at
> > org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2288) 
> ```

当我执行时：

```
bin/stop-all.sh 
```

它表示datanode尚未启动，因此无法停止。不过，**jps**的输出表明存在数据节点。

我尝试**格式化 namenode**，**更改所有者权限**，但它似乎不起作用。希望我没有错过任何其他相关信息。

提前致谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T18:35:34.573

对我有用的解决方案是一个一个地运行 namenode 和 datanode，而不是一起使用`bin/start-all.sh`. 使用这种方法会发生什么情况是，如果您在网络上设置数据节点时遇到一些问题，并且stackoverflow 上的许多帖子表明namenode 需要一些时间来启动，则错误是清晰可见的，因此，应该给它一些时间在启动数据节点之前启动。此外，在这种情况下，我遇到了名称节点和数据节点的不同 ID 的问题，我必须更改与名称节点相同 ID 的数据节点的 ID。

逐步的过程将是：

1.  启动名称节点`bin/hadoop namenode`。检查错误（如果有）。
2.  启动数据节点`bin/hadoop datanode`。检查错误（如果有）。
3.  现在使用“bin/start-mapred.sh”启动任务跟踪器、作业跟踪器

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T11:33:13.390

查看您的名称节点（可能是[http://localhost:50070](http://localhost:50070)），看看它说您有多少个数据节点。

如果它是 0，那么要么你的 datanode 没有运行，要么它没有配置为连接到 namenode。

如果为 1，请检查 DFS 中有多少可用空间。可能是数据节点没有可以写入数据的任何地方（数据目录不存在，或者没有写入权限）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T01:23:40.863

虽然解决了，但我正在为未来的读者添加这个。Cody 关于检查 namenode 和 datanode 开始的建议很有用，进一步调查导致我删除了 hadoop-store/dfs 目录。这样做为我解决了这个错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-06T18:26:27.057

我遇到了同样的问题，我查看了 datanode 日志，并有一条警告说 dfs.data.dir 的权限不正确......所以我只是更改了它们并且一切正常，这有点奇怪。

具体来说，我的“dfs.data.dir”设置为“/home/hadoop/hd_tmp”，我得到的错误是：

```
...
...
WARN org.apache.hadoop.hdfs.server.datanode.DataNode: Invalid directory in dfs.data.dir: Incorrect permission for /home/hadoop/hd_tmp/dfs/data, expected: rwxr-xr-x, while actual: rwxrwxr-x
ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: All directories in dfs.data.dir are invalid.
...
... 
```

所以我简单地执行了这些命令：

*   我用“bin/stop-all.sh”阻止了所有的恶魔
*   使用“chmod -R 755 /home/hadoop/hd_tmp”更改目录的权限
*   我用“bin/hadoop namenode -format”再次给namenode格式。
*   我重新启动了恶魔“bin/start-all.sh”
*   瞧，datanode 已启动并运行！（我用命令“jsp”检查了它，其中显示了一个名为 DataNode 的进程）。

然后一切正常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T11:40:28.403

`dfs.name.dir`就我而言，我错误地为and设置了一个目的地`dfs.data.dir`。正确的格式是

```
 <property>
 <name>dfs.name.dir</name>
 <value>/path/to/name</value>
 </property>

 <property>
 <name>dfs.data.dir</name>
 <value>/path/to/data</value>
 </property> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-17T19:33:39.390

我删除了 hdfs-site.xml 中的额外属性，然后这个问题就消失了。Hadoop 需要改进其错误消息。我尝试了上述每种解决方案，但都没有奏效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T15:04:18.533

我遇到了同样的问题。当我查看**localhost:50070**时，在集群摘要下，所有属性都显示为 0，除了“DFS Used% 100”。通常，出现这种情况是因为HADOOP_INSTALL/conf 和hosts 文件下的三个***-site.xml文件存在一些错误。**

就我而言，原因是无法解析主机名。**我只需将“IP_Address 主机名”添加到/etc/hosts**就解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-29T21:43:00.493

就我而言，我不得不删除：

`/tmp/hadoop-<user-name>`文件夹和格式并开始使用`sbin/start-dfs.sh`

`sbin/start-yarn.sh`

# iphone - 合并 ManagedObjectContext 时未调用 NSFetchedResultsChangeUpdate

> ID：10447744
> 
> 赞同：4
> 
> 时间：2012-05-04T11:15:23.380
> 
> 标签：iphone, ios, ios5

我在多个线程上使用 Core Data，所以我为每个线程创建了一个 ManagedObjectContext。当我保存 MOC-Thread 时，我会执行合并，以便在 MOC-main 中进行修改。

更改已存在的托管对象时，不会为我的 NSFetchResultsControllers 调用 NSFetchedResultsChangeUpdate 事件。但是，当我插入或删除托管对象时，会调用我的 NSFetchResultsController 的事件。只是不用于更新。

有人熟悉这个问题吗？

# php - 维基百科服务器 gzip 内容

> ID：10447745
> 
> 赞同：0
> 
> 时间：2012-05-04T11:15:26.767
> 
> 标签：php, curl, wikimedia

wikimedia api 是否支持 gzip 编码。我正在使用 curl 来获取内容。我使用了接受 gzip 编码。但它似乎不起作用..

```
curl_setopt($ch,CURLOPT_ENCODING , "gzip"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:28:10.667

您是否尝试添加 'Accept-Encoding: gzip, deflate' 来获取请求标头？我用这个样本试了一下：

[http://pastebin.com/AmndVB3e](http://pastebin.com/AmndVB3e)

它发送了 gzip 压缩的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T23:11:12.517

回答你的字面问题：是的，确实如此。

对此进行测试的一种方法是安装[Firebug](http://getfirebug.com)并在“Net”选项卡处于活动状态时访问[MediaWiki API URL 。](http://en.wikipedia.org/w/api.php)您将看到的响应标头应如下所示：

```
HTTP/1.0 200 正常
日期：格林威治标准时间 2012 年 5 月 7 日星期一 23:05:37
服务器：阿帕奇
X-Content-Type-Options: nosniff
缓存控制：私有
MediaWiki-API-错误：帮助
内容编码：gzip
变化：接受编码
内容长度：37421
内容类型：文本/html；字符集=utf-8
X-Cache：来自 sq59.wikimedia.org 的 MISS，来自 amssq35.esams.wikimedia.org 的 MISS，来自 amssq44.esams.wikimedia.org 的 MISS
X-Cache-Lookup：来自 sq59.wikimedia.org:3128 的 MISS，来自 amssq35.esams.wikimedia.org:3128 的 MISS，来自 amssq44.esams.wikimedia.org:80 的 MISS
连接：保持活动

```

（不，这不仅仅是因为 Wikipedia 的前端代理；我只是在我自己的 wiki 上尝试了相同的方法，它不在代理后面，并且得到了相同的`Content-Encoding`标题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:19:36.697

试试（让我知道它是否有效，我无法从你的其他 Curl 选项中告诉自己）

```
curl_setopt($ch, CURLOPT_ENCODING, "deflate, gzip, identity"); 
```

# python - 是否值得用 cython 重写我的代码？

> ID：10447746
> 
> 赞同：3
> 
> 时间：2012-05-04T11:15:44.720
> 
> 标签：python, numpy, scipy, cython

我有一个使用 numpy 和 scipy 的 python 程序。在其中添加 cython 将是一个耗时的过程，因为数据类型有很多变化

它的 cprofile 如下所示：http: [//imgur.com/a/Sgvof](http://imgur.com/a/Sgvof)

大部分时间（73%）都被`<scipy.integrate_odepack.odeint>` 我的问题用完了，使用 cython 是否可以加快这个功能（也许是通过更快的调用）和其余的。在这个例子中，这个函数被调用了 ~10^6 次。如果是这样，我可以期待多少速度？如果速度至少提高 4 到 5 倍，我会考虑这样做

笔记：

如果提供的信息不充分，请在下方评论，我很乐意提供

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:31:00.783

您可能不会看到太多（如果有的话）改进。SciPy（更具体地说，您最感兴趣的代码`odeint`）已经是一个 CPython 模块（用 Fortran 编写），而不仅仅是 python。

如果这是一个仅限 python 的函数调用，那么用 Cython 编写它（这比编写一个完整的 CPython 模块更容易，尽管我个人会编写 ac 或 c++ dll 并使用 ctypes 调用它......）会增加你的表现。但可能不在这种情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:49:42.497

有一半的时间`<scipy.integrate_odepack.odeint>`花在里面`dx_dv`，`dx_du`这些看起来像是 python 函数。这些是您可以定位的功能，特别是如果它们很复杂。

需要记住的一件事是，如果减速仅仅是因为这样，`calling overhead * number of calls`那么我预计情况不会有太大改善。这种开销不会消失，实际上它可能会变得更复杂。你将使用 SciPy C -> Python -> 你的 C 而不是 SciPy C -> Python。

# python - 在特定列中查找和替换

> ID：10447748
> 
> 赞同：-3
> 
> 时间：2012-05-04T11:15:53.457
> 
> 标签：python, perl, sed, awk, vi

我有一个这样的文件：

```
Name Position Letter String
Bla 123 A ..B.,,,.C..
Bla 123 B ..a.,,,.C..
Bla 123 C ..b.,,,.A.. 
```

我想用 Letter 替换`.`and `,`（在第一行是`A`）

最终产品：

```
Name Position Letter String
Bla 123 A AABAAAAACAA
Bla 123 B BBaBBBBBCBB
Bla 123 C CCbCCCCCACC 
```

awk 的想法是将第 4 列中的字符替换为第 3 列中的“the”字符。我认为 awk 应该是解决此问题的正确工具，但我坚持替换字符串中的字符。

`sed s/\(^.\{4\}\)./\\{3\}/`没用，我认为 sed 可能是错误的工具。

欢迎使用 awk/sed/python/perl/vi 解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T11:24:05.433

```
perl -pale '$F[3]=~s/[.,]/$F[2]/g;$_=join" ",@F' file 
```

[**看见**](http://ideone.com/g0Atv)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T11:24:53.920

不使用的解决方案`regular expressions`：

```
 with open('in.txt') as f:
        for x in f:
            x=x.rstrip().split()
            x[-1]=x[-1].replace('.',x[-2])
            x[-1]=x[-1].replace(',',x[-2])
            print(" ".join(x))

    Name Position Letter String
    Bla 123 A AABAAAAACAA
    Bla 123 B BBaBBBBBCBB
    Bla 123 C CCbCCCCCACC 
```

# console - 使用自动化后台进程下载 Insight 数据

> ID：10447749
> 
> 赞同：1
> 
> 时间：2012-05-04T11:15:54.203
> 
> 标签：console, facebook-insights

我正在构建 ac# 控制台应用程序，它将作为每周（或可能每天）运行的后台自动化进程运行，以下载页面级别和发布级别的洞察数据。我有一个管理多个 facebook 页面的 facebook 帐户，我需要获取所有这些页面的数据。

我仍然不知道如何从我的控制台应用程序中获取访问令牌，以及我可以在哪里发送页面级别和帖子级别 Insights 的请求？

我可以从 UI 下载 CSv 文件，我也可以使用 API 来做到这一点，还是我必须下载 JSON 字符串然后解析它？

感谢您的帮助

# eclipse - 如何在 EGit 中使用 utf8 文件名设置 git

> ID：10447750
> 
> 赞同：3
> 
> 时间：2012-05-04T11:16:02.897
> 
> 标签：eclipse, git, egit

我有一个 java 项目，其中包含名称中带有变音符号的文件。我如何设置一个 git 存储库，以便它可以与 Eclipse 的 EGit 插件一起使用。

我已经尝试过一个简单的

```
 git init
 git add * 
```

[但正如您在这篇文章](https://stackoverflow.com/questions/10444398/eclipse-egit-and-git-on-command-line-show-different-status)中看到的那样，这被证明是无效的。

我想我必须以某种方式告诉 git 它必须将文件名视为 utf8。

我在 Max OSX 10.7 上，但我在 Windows 7 Pro 上看到了同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T23:48:40.937

MacOS 以分解形式 (NFD) 对字符（在文件名中）进行编码，而其他所有人都使用组合形式 (NFC)。使用 Git 添加文件名时，分解后的表单会进入存储库，因为 Git（Windows 除外）不会重新编码它从磁盘读取的文件名。

EGit 假定使用组合形式。如果您在 Mac 上使用非 ascii 名称，请仅在 repo 中使用 EGit 或 JGit，除非您知道这些问题。

从 1.7.10 开始的适用于 Windows 的 Git 使用 UTF-8 NFC。

组合形式意味着像“Ä”这样的字符被编码为一个unicode字符，而分解形式意味着它被编码为“A”+“在前一个字符上方添加两个点”。

```
$ touch Ä
$ echo Ä|od -tx1a
0000000    c3  84  0a                                                    
           ?  84  nl                                                    
0000003
$ ls|od -tx1a
0000000    41  cc  88  0a                                                
           A   ?  88  nl                                                
0000004
$ 
```

更新：从 1.7.12 开始，OS X 上的本机 git 可以选择以与 Windows 上的 EGit 和 Git 兼容的方式预先组合非 ASCII 字符。您需要将 core.precomposeunicode 配置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T21:00:54.377

AFAIK JGit 和 EGit 始终使用 UTF-8 路径编码，但本机 git 不保证 [1]

[[1] 在http://schacon.github.com/git/git-commit.html](http://schacon.github.com/git/git-commit.html)中搜索“编码”， 另见[http://git.661346.n2.nabble.com/Path-character-encodings-td7346463。 html](http://git.661346.n2.nabble.com/Path-character-encodings-td7346463.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-26T19:41:09.253

注意：即使`core.precomposeunicode`设置为`true`，您仍然可能遇到问题，如[Jeff King的](https://github.com/peff)[提交 750b2e4](https://github.com/git/git/commit/750b2e4785e5956122b3c565af65eb1929714fba)中所示 ( [)](https://github.com/peff)[`peff`](https://github.com/peff)

### [t3910](https://github.com/git/git/blob/750b2e4785e5956122b3c565af65eb1929714fba/t/t3910-mac-os-precompose.sh#L144-L151) : 显示`core.precomposeunicode`分解文件名失败

> 如果您的 git 存储库中有现有的分解文件名（例如，使用未预先组合 unicode 的旧版本 git 创建的文件名），带有 `core.precomposeunicode`set 的现代 git 不能很好地处理它们。
> 
> 问题是我们将来自磁盘的路径标准化为它们的预组合形式，然后将它们与索引中的文字字节进行比较。
> 如果您在索引中有预先组合的表单，这会使事情变得更好。
> 如果您实际上在索引中有分解的形式，事情会变得更糟。
> 
> 因此，具有分解文件名的路径可能会将其预组合变体列为未跟踪文件（即使预组合变体根本不存在于磁盘上）。

# asp.net - 为什么我不应该将我的 asp.net 网站或 webapp 部署到 IIS 中域的根目录？

> ID：10447758
> 
> 赞同：5
> 
> 时间：2012-05-04T11:16:20.460
> 
> 标签：asp.net, web-applications, web, iis-7.5, web-deployment

几年前，我记得我在一个域情况下处理多个站点时遇到了困难，其中一个站点被放置在根目录中。

当时我阅读了一篇权威文章，清楚地向我解释了*为什么*这是一个坏主意，我记得是级联 web.config 问题是主要原因（迫使您取消声明与子项目本质上不相干的冲突引用项目）。从此以后，我总是在自己的虚拟路径中部署任何网站，使用根目录中的单个重定向指向默认网站。

我似乎再也找不到那个权威参考，从那时起部署考虑可能已经改变。

这种情况的优点和更有可能的缺点是什么？我之所以问，是因为与我合作的一家公司不赞成以这种方式分离部署，我认为这不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:52:15.463

**简短的回答：隔离**。IMO 在不隔离它们的情况下托管不同的网站/网络应用程序的好处是没有意义的。

长答案：

**优点：**

*   使用没有特定绑定（即别名）的单个端口：如果您无权访问网站绑定，它很有用
*   快速部署和动态网站创建：您可以创建一个新的子网站，而无需在 IIS 端声明它
*   共享设置：将网站基础设置应用于所有子站点（文档、mime 类型等...）

**缺点：**

*   **应用程序池隔离**：无身份隔离、无工作进程隔离、无故障/恢复隔离等...（超时、内存限制等...）

*   **AppDomain 或终身隔离**：你必须照顾你的网站 AppDomains。如果您共享同一个 AppDomain，您将共享相同的生命周期：如果 AppDomain 被卸载，则此 AppDomain 下的所有网站都将关闭并重新加载（即，如果您触摸 AppDomain web.config）

*   **架构隔离**：一些 Web 应用程序开发需要在 IIS 端进行一些调整，如果您只为一个应用程序调整 IIS 池或网站，它会对所有站点产生影响。例如，我考虑 32 位和 64 位设置或通配符映射。

*   **代码和安全隔离**：在同一个工作进程和/或 AppDomain 中运行的应用程序对跨应用程序访问/黑客/攻击的保护较少。您必须更加警惕，以确保来自应用程序的信息无法被其他人读取。

*   **审计**：审计网站活动和失败可能会更加困难。

Web 应用程序隔离一直是互惠环境的目标，以保护应用程序之间的相互隔离。

自 IIS 7 起，应用程序池隔离通过“应用程序池标识”走得更远：http: [//www.adopenstatic.com/cs/blogs/ken/archive/2008/01/29/15759.aspx](http://www.adopenstatic.com/cs/blogs/ken/archive/2008/01/29/15759.aspx)

我也找到了这篇文章：[http](http://searchsecurity.techtarget.com/tip/Web-application-isolation) ://searchsecurity.techtarget.com/tip/Web-application-isolation 。

您还应该查看 SharePoint 网站集体系结构。这是想法：http: [//blogs.msdn.com/b/sgoodyear/archive/2011/11/18/9848865.aspx](http://blogs.msdn.com/b/sgoodyear/archive/2011/11/18/9848865.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:52:23.020

我能想到的在一个域下托管多个“站点”（例如 IIS 中的一个“网站”）的主要禁忌症是用户身份隔离；当您配置例如 Windows 身份验证时，登录到 /site1 的访问者也将登录到 /site2，这可能是您不想要的。

这同样适用于在域级别设置的 cookie。在 IIS 中，网站是一个安全边界（对于客户端也是如此），并且在同一个域中拥有多个“站点”可能会使您面临安全漏洞......

至于将一个“站点”放在根目录中，将其他“站点”放在子文件夹中；您为“根站点”设置的 appsettings 将级联到“子文件夹站点”；同样，这可能不是问题，但它是一个潜在的安全漏洞。

# extjs - extjs 4.x 与 Sencha Architect v2.x

> ID：10447759
> 
> 赞同：1
> 
> 时间：2012-05-04T11:16:23.290
> 
> 标签：extjs, extjs-mvc, extjs4.1, sencha-architect

我们正在尝试使用 Sencha Architect v2.x（UI 设计师）评估 extjs 4.x，以用于我们的内部销售跟踪系统。我们能够设计和开发每个/单个模块，如用户管理器、项目管理器等，作为使用设计器的应用程序。

但是，为了使整个应用程序工作 - 由菜单或仪表板驱动并在单独的选项卡中打开每个模块/应用程序，我们无法找出适当的方法。我们是否期望在单个设计文件中设计整个应用程序，我认为这不切实际，因为我们将拥有 50 多个模块和许多 UI。

我们希望拥有类似于仪表板的东西，左侧是树形菜单，右侧是打开的选项卡。在菜单上单击我们创建一个选项卡（如果尚未添加）并打开最初使用设计器设计的应用程序。例如，如果用户点击“销售订单”，我们会打开销售订单选项卡等等。

我们想确保我们确实使用设计师和模型，商店。我将不胜感激有关模型、商店等组件的可重用性的建议。参考：[http ://blog.dnet-ebusiness-suite.com/2012/04/sales-order-to-invoice-and-delivery.html](http://blog.dnet-ebusiness-suite.com/2012/04/sales-order-to-invoice-and-delivery.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:42:57.600

Architect 2 没有一个设计文件。事实上，每个类都有自己的文件。您不需要有单独的项目。事实上，元数据和 Architect 生成的源代码都非常友好。

# django - 如何更改 Facebook 抓取的数据之类的？

> ID：10447762
> 
> 赞同：1
> 
> 时间：2012-05-04T11:16:55.960
> 
> 标签：django, facebook, facebook-like

我在我的网站上使用 facebook "like" 作为 iframe。facebook 按钮从我的网站 url 中删除的数据不正确。我们如何自定义发送或抓取的这些数据？即我正在使用django，因此有一个base.html，它具有facebook 的元标记。此 base.html 扩展到整个站点。现在我无法理解如何为我的网站拥有的每个单独页面自定义这些元标记。有没有办法在 iframe 本身中赋予这些属性？

问题清楚了吗？否则请发表评论，我将进行必要的更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:22:30.250

你的意思是开放图元标签吗？

[http://ogp.me/](http://ogp.me/)

我认为在页面中的任何位置（即在 head 标签之外）添加元标签以在每个页面上自定义它们的内容是无效的，但我认为在 html 5 中在 head 标签之外添加元标签是有效的，所以我建议先尝试一下，然后如果可以的话，尝试设置它，以便在您的 base.html 中元标记包含一个变量，然后在您使用 base.html 的每个页面上，您可以指定单个页面上的变量值。

# windows - 如何在特定时间运行指定的 bat 文件，即调度程序

> ID：10447770
> 
> 赞同：0
> 
> 时间：2012-05-04T11:17:52.147
> 
> 标签：windows, batch-file

我一直在使用 at 命令来安排任务

```
ex: at 14:45 my.bat 
```

我在命令提示符下得到 o/p

```
"JOB ID is added" 
```

但是这个命令没有在我安排的时间被触发..

谁能帮帮我吗.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:06:21.463

我怀疑问题*不*在于 BAT 文件根本没有执行，而是 i) BAT 文件中的单个命令失败，或者 ii) 输出没有发送到您正在查找的位置中的一个或两个为了它。（如果批处理文件中的任何内容请求输入，事情会变得更加奇怪，因为a）默认情况下批处理文件可能根本无法与“控制台”交互，并且b）在批处理文件执行时系统可能无论如何都无人看管.) 如果我的怀疑是正确的，那么没有*一个*“修复一切”，而是一大堆小修复......你必须击中每一个。

找出实际以“admin”（而不是您的普通用户）身份登录所需的密码，打开一个 DOS 框，然后尝试运行批处理文件。您应该可以看到某种错误消息。解决这个问题。然后再试一次......并解决下一个问题。不断纠正问题并再次尝试，直到最终一切正常。

# android - Android：表sql查询错误

> ID：10447771
> 
> 赞同：1
> 
> 时间：2012-05-04T11:18:00.347
> 
> 标签：android, sql, contacts

我正在尝试向联系人数据库发送查询：

```
String CONTACTS = "/data/data/com.android.providers.contacts/databases/contacts.db";
SQLiteDatabase sqlDB;
try{
   sqlDB = SQLiteDatabase.openDatabase(CONTACTS,null, SQLiteDatabase.OPEN_READONLY);
}catch(SQLiteException sqlE){
   Log.e(TAG, sqlE.getMessage());
}
callCursor = sqlDB.rawQuery("SELECT _id, date, duration, number, type, name, numbertype,  COUNT(*) as cnt FROM calls WHERE ( 1=1 ) GROUP BY (number) ORDER BY cnt DESC", null); 
```

但我得到了错误

```
05-04 15:21:28.271: E/SQLiteDatabase(883): android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file 
```

是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T22:55:11.307

String CONTACTS = "/data/data/com.android.providers.contacts/databases/contacts.db"; 应该是 String CONTACTS = "/data/data/com.android.providers.contacts/databases/contacts2.db";

# asp.net - ASP.NET DropDownList - 如何处理缺失值？

> ID：10447776
> 
> 赞同：0
> 
> 时间：2012-05-04T11:18:29.397
> 
> 标签：asp.net, drop-down-menu, selected

我在 SQL 表中有一个值列表，用于填充 DropDownList，具有唯一的整数作为每个项目的值和字符串作为可见文本（通过 SqlDataSource）。数据库中还有第三个字段，它是一个标志，指示列表项是否处于活动状态（非活动项目不会显示在 DropDownList 中）

在下拉列表中所做的选择作为整数值（作为构成整个记录的数据集的一部分）存储在数据库中，而不是文本值。

随着时间的推移，可以通过将 DropDownList 中的项目标记为非活动来移除这些项目。但是，仍然需要打开旧记录，这些记录可能有一个现在不活动的项目作为其数据的一部分......

我的问题是，确保旧记录下拉列表中包含缺失值的最佳方法是什么？

想到的两种方法是：

仅使用当前活动的项目填充 DropDownList 并在加载记录时捕获应用程序尝试选择不存在的值时，返回到数据库以查看它应该是什么（文本值）并手动添加它进入下拉菜单。

或者...

使用所有列表项（活动和非活动）填充 DropDownList，加载记录，然后以编程方式删除所有非活动项（对现在选择的任何项执行）。

这些似乎都不是特别有效，所以我想知道这种事情是否有最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:12:00.780

有很多最佳方法来做这类事情，我在这里定义了其中的几个，如果您的下拉列表项目数少于 200，请使用以下任何一种，假设下拉列表是**产品**

1)
      i) 加载下拉列表中的所有**产品记录，并通过设置****visible=false**
隐藏不活动的      记录 i) 当您加载用户记录时，如果其可见则查找其下拉列表值而不是选择它并享受，如果不是可见而不是通过设置其属性**visible=true**使其可见并选择它并在标志中设置其索引或 id 以在您/用户执行所需的操作后再次 更改其可见性（ **visible=false ）。**

2)
      i) 仅加载下拉列表中的活动**产品**
记录      ii) 在加载用户记录时，还使用​​sql 中的**联接加载其****产品详细信息**（名称、id、inactive_status） 。**iii）如果**项目处于非活动状态，则      签入该用户记录，然后将其记录添加到下拉列表中，因为您现在拥有其所有详细信息以及用户详细信息记录**，否则**只需选择它。

 ********重要提示：**如果您的下拉列表中有数百万个项目，则使用**ADVANCE SEARCH**技术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:41:00.083

我要做的第一件事是质疑您的业务逻辑 - 如果某个项目在其他地方的活动行中用作外键，您是否能够使该项目处于非活动状态？如果你让它不活动，它不应该删除所有外键吗？

要回答你的问题，虽然我会采用第二个想法的变体，但在页面中进行过滤可能比直接使用 SQL 慢，所以我猜你现在有这样的东西来填充下拉列表

```
SELECT * FROM Table WHERE Active = 1 
```

你应该已经有了你的记录和外键值，所以我会把它改成这个

```
SELECT * FROM Table WHERE Active = 1 OR PrimaryKey = [YourForeignKey] 
```

然后您将始终拥有选定的项目，但也应该相当有效。******

# jquery - 为什么我的 jQuery 函数总是在条件下执行？

> ID：10447777
> 
> 赞同：1
> 
> 时间：2012-05-04T11:18:29.523
> 
> 标签：jquery, function, conditional-statements

我打算将我的函数放在条件语句中执行。如果该语句为真，则应执行该函数，反之亦然。

这是代码：

```
$(document).ready(function(){
  $.fn.validateName = function(){
    return true;
  }

  $('input[name=name]').blur(function(){
    var a = $(this).val();
    if (a.length == 0)
    {
       $('#alert_name').fadeIn();
    }
    else 
    {
       $('#alert_name').hide();
       $(this).validateName();
    }     
  })
}) 
```

validateName 函数只是返回真值，所以当输入值大于 0 时，应该返回 'true' 值。但在我的情况下，无论条件如何，函数总是被执行并返回“真”值。

请告诉我问题出在哪里。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:26:59.863

您没有从模糊功能返回任何内容。

```
$(document).ready(function() {
    $.fn.validateName = function() {
        return true;
    }

    $('input[name=name]').blur(function() {
        var a = $(this).val();
        if (a.length === 0) {
            $('#alert_name').fadeIn();
            return false;
        }
        else {
            $('#alert_name').hide();
            return $(this).validateName();
        }
    })
})​ 
```

# xml - SSRS 使用 Xml 数据源 [WCF]，这是可能的，但它是否可取？

> ID：10447780
> 
> 赞同：3
> 
> 时间：2012-05-04T11:18:47.270
> 
> 标签：xml, wcf, architecture, reporting-services

我们需要在报告中使用 WCF 作为数据源。[服务器模式]

点网 4.0/SSRS 2008 R2/ASP.Net 4.0

这背后的想法是在从报告到标准应用程序网格的整个应用程序中应用通用业务规则。

从本质上讲，它会按照以下方式工作

通常如下

[RDL - SQL 服务器数据提供程序 - 数据库]

但我们需要的是

[RDL - XML/自定义数据提供者 - WCF 方法 - 业务层 - - DB]

我们的主应用程序也将使用 WCF 层。实际上，出于实际目的，它是一个接口层，所以如果我们不得不使用 SSRS 的 Web 服务，那么会考虑这种方法是否有优势。

我发现了一些关于我们方法的文章

[http://weblogs.asp.net/jezell/archive/2008/02/21/using-wcf-endpoints-with-sql-reporting-services.aspx](http://weblogs.asp.net/jezell/archive/2008/02/21/using-wcf-endpoints-with-sql-reporting-services.aspx)

[http://www.codeproject.com/Articles/37270/Consuming-a-WCF-Service-from-an-SSRS-RDL-Server-Re](http://www.codeproject.com/Articles/37270/Consuming-a-WCF-Service-from-an-SSRS-RDL-Server-Re)

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/aa0c8c5e-28a7-440f-a1c1-62e8bb184b8d/](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/aa0c8c5e-28a7-440f-a1c1-62e8bb184b8d/)

[http://msdn.microsoft.com/en-us/library/ms154655(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms154655(v=sql.105).aspx)

[http://devblog.bardoloi.com/2011/09/using-wcf-web-services-as-data-source.html](http://devblog.bardoloi.com/2011/09/using-wcf-web-services-as-data-source.html)

[http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx](http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx)

考虑到这里的限制，无论哪种方式

[http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx#repservxmlds_topic5](http://msdn.microsoft.com/en-us/library/aa964129(SQL.90).aspx#repservxmlds_topic5) 这一切都变得有点可怕。

我不想做的当然是走上一条特定的道路，这会影响报告设计能力、性能，并可能限制可以创建的报告类型。

如果有人对上述布局有任何意见或经验，我将不胜感激您的意见和投入。

我也非常愿意接受可能的替代方案，即我们如何创建包含数据的报告，这些数据已经通过业务层进行适当的数据按摩等

为长篇道歉。

利亚姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:15:07.360

我现在也在考虑同样的情况。自从提出这个问题以来已经有一段时间了，但我会为任何对此场景感兴趣的人添加这个。

So far it's not worth the effort, getting SSRS to interact with our WCF service takes too long and has several restrictions, most of them are outlined in the links you provided.

Here are the two alternatives I'm now contemplating

1.  Call the service before the report and pass the output as a parameter (the report has to parse the XML which is another issue)
2.  Call the service and convert its output to a more tabular format (after all the dataset is a table) convert to XML and send it to the report as a parameter (also need to be parsed but it could be easier than the original output as is in our case)
3.  Create a custom dataset extension that is more suitable to handle WCF calls and gives you greater control over the process.

All in all, I'm in a tight spot regarding this issue since there's no easy way to acomplish this out of the box.

Hope this helps anyone!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:41:11.617

This is our solution and it worked quiet well for us so far. There is a lot of work involved though.

Option 3 in the answer that Carlos provided was the direction we had to take when we encountered issues with transferring a lot of Data through the WCF layer for large reports.

Essentially the Custom Data Processing Extension makes the calls to the WCF layer and in the event that the amount data that is returned is large (over a certain threshold) then this data is cached and we return to the Custom Data Processing Extension an indicator of the amount of calls that required to retrieve all the data.

We then make the required amount of calls.

So for 1/2 million records we may need 20 calls to the WCF with each call appending the data to the SSRS dataset.

The report viewer displays without issue the data 11,000 + pages but in order to export to Excel we need to run it on SSRS 2012.

Exporting > 500,000 records to Excel can take 10 mins. Opening the Excel file actually takes longer. :)

# android - 手动将 Fragment 添加到 BackStack

> ID：10447781
> 
> 赞同：0
> 
> 时间：2012-05-04T11:18:54.757
> 
> 标签：android, android-layout, android-fragments

我目前正在使用 ViewGroup（SwipeyTab 实现）在片段之间切换。但是，某些片段“页面”被同一选项卡上的其他片段替换，所以我最初尝试过：

```
 FragmentTransaction ft = fragment.getFragmentManager().beginTransaction();
                ft.remove(currentFragment);                 
                ft.add(newFragment,"");
                ft.commit(); 
```

该代码将删除当前片段但不添加 newFragment（来自 Logcat，它将被实例化但不会出现）。

我最终根据当前状态将它添加到 FragmentPagerAdapter.getItem(int position) 调用中（基于此：[Replace Fragment inside a ViewPager](https://stackoverflow.com/questions/7723964/replace-fragment-inside-a-viewpager)）。但是，我希望能够将每个新替换的片段添加为后堆栈的一部分。

我尝试在删除片段之前添加到 backstack：

> currentFragment.getFragmentManager().beginTransaction().addToBackStack(null).commit(); FragmentTransaction ft = fragment.getFragmentManager().beginTransaction(); ft.remove(currentFragment);
> ft.commit(); 但这没有用 - 它将最后一个片段添加到后台堆栈，所以当我按下后，它只会重新加载当前片段。

无论如何我可以将一个片段添加到以“非传统”方式替换的后台堆栈中吗？

# python - if 语句嵌套在 for 循环中

> ID：10447782
> 
> 赞同：1
> 
> 时间：2012-05-04T11:18:57.837
> 
> 标签：python, if-statement, for-loop

```
c = file('cluster_info.txt')
for i in zip(ys[-10:],result): # has ten elements
    for j in c.readlines():
        cluster = j.split(',')
        if q in cluster:
            m = (q[i],cluster[0])
            f = pylab.figure() # code for plot starts here
            for n, fname in enumerate(m):
                image=Image.open(fname).convert("L")
                arr=np.asarray(image)
                f.add_subplot(2, 1, n)  # this line outputs images on top of each other
                pylab.imshow(arr,cmap=cm.Greys_r)
            pylab.title("%s, Top:Predicted,Bottom:Observed" %i[0])
            pylab.show()
        else:
            continue 
```

这是来自较大代码的片段，我希望生成 10 个图像/图，但 python 不生成图。我想我没有在 for 循环中正确嵌套 if 和 else:。请告诉我这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:20:59.727

你的意图是`else: continue`什么？如果要继续外循环（`i`），最好使用`else:break`. 否则你也可以删除`else`分支

另外，`i`似乎根本没有在您的循环中使用？不可能的

# ajax - 在 ajax 调用的 JSF 中，我们如何使用不同的 JSF 页面来创建 HTML 片段进行渲染？

> ID：10447785
> 
> 赞同：0
> 
> 时间：2012-05-04T11:19:06.543
> 
> 标签：ajax, jsf

我有一个 JSF 页面，其中有一个`div`用作弹出窗口的页面。

当用户单击某个`button`或时，会显示此弹出窗口`link`，直到它被隐藏。

我想要另一个 JSF 页面，通过 AJAX 调用为这个 div 提供内容。我隐约记得使用 Struts Action 和 JSP 片段执行此操作。

在 JSF 2.0 中可以做到这一点吗？

**额外细节：**

我的情况如下：

1.  我有一个页面将员工的详细信息显示为汇总表，使用`dataTable`带有类的标签`EmployeeInfo`作为提供 a `Collection`of `EmployeeBean`s 的支持 bean。在此页面上，我有一个`radio`按钮作为`dataTable`. 此页面有一个`div`隐藏的。
2.  当`radio`按钮打开并单击某个按钮时，通过`AJAX`调用，我们需要点击支持 bean 以获取`EmployeeBean`如上所述已选择的详细信息并`div`基于此`AJAX`调用填充。

我不想在第一页完整提交并获得第二页的原因是，因为我想保存在第一页上所做的任何更改的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:30:38.580

使用标签，您可以很容易地显示或隐藏内容。这些都是快速输入的粗略代码，但在您的 bean 中，假设您有以下内容：

```
public class MyBean {
  public boolean renderHidden = false;

  public void toggleHidden(AjaxBehaviorEvent event) {
    renderHidden = !renderHidden;
  }
} 
```

然后在您的 JSF 页面中，您将有一个链接来显示隐藏您的弹出窗口作为 ui:fragment 完成：

```
<h:commandLink value="Click Me!">
  <f:ajax event="click" listener="#{myBean.toggleHidden}" render="hiddenarea" />
</h:commandLink>

<ui:fragment id="hiddenarea" rendered="#{myBean.renderHidden}">
  <div><!-- Content to show/hide here --></div>
</ui:fragment> 
```

如果需要，该 ui:fragment 可以很容易地位于您通过 ui:include 包含的另一个 JSF 页面中。重要的一点是 f:ajax take 是进行 AJAX 调用（在本例中为单击事件）并更新指定元素（隐藏区域）的原因。

# json - 无法显示来自 json.net 的数据

> ID：10447788
> 
> 赞同：0
> 
> 时间：2012-05-04T11:19:15.607
> 
> 标签：json, json.net

任何人都可以帮助解决这个问题，无论我尝试什么我都无法在网页上显示数据，我可以设置断点`JObject o = JObject.Parse(ws);`并查看数据，但是我尝试过的每次尝试都会导致不同的错误。我正在尝试做的是获取 areaName 和国家。

我尝试过以下示例：http: [//james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/) 和[http://forums.asp.net/t/1780822.aspx/1?How+to+traverse+in+ json+](http://forums.asp.net/t/1780822.aspx/1?How+to+traverse+in+json+)没有运气

任何帮助，将不胜感激。乔治

我的代码如下：

```
string ws = @"{ ""search_api"": { ""result"": [ { ""areaName"": [ {""value"": ""London"" } ],  ""country"": [ {""value"": ""United Kingdom"" } ], ""latitude"": ""51.517"", ""longitude"": ""-0.106"", ""population"": ""7421228"",  ""region"": [ {""value"": ""City Of London, Greater London"" } ],  ""timezone"": [ {""offset"": ""1.0"" } ],  ""weatherUrl"": [ {""value"": ""http:\/\/www.worldweatheronline.com\/London-weather\/City-of-London-Greater-London\/GB.aspx"" } ] }, { ""areaName"": [ {""value"": ""London"" } ],  ""country"": [ {""value"": ""Canada"" } ], ""latitude"": ""42.983"", ""longitude"": ""-81.250"", ""population"": ""346774"",  ""region"": [ {""value"": ""Ontario"" } ],  ""timezone"": [ {""offset"": ""-4.0"" } ],  ""weatherUrl"": [ {""value"": ""http:\/\/www.worldweatheronline.com\/London-weather\/Ontario\/CA.aspx"" } ] } ] }}";

       JObject o = JObject.Parse(ws);

       var weatherCity = o["areaName"][0]["value"];
       ViewBag.WeatherSearch = weatherCity.ToString();

       //var weatherCity = o["search_api"][0]["result"]["areaName"]["value"];
      // JArray arr = (JArray)o.SelectToken("search_api");
      // JObject cityTown = (JObject)arr[0].SelectToken("result").SelectToken("areaName");
     //  var weatherCity = cityTown.SelectToken("value");
       // IList<string> WeatherCity = o.SelectToken("result").Select(s => (string)s).ToList();
       //string WeatherCity = (string)o.SelectToken("result[0].areaName[0].value");
       //IList<string> WeatherCities = o["result"].Select(m => (string)m.SelectToken("areaName[0].value")).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:08:22.630

怎么样：

```
var weatherCity = o["search_api"]["result"][0]["areaName"][0]["value"]; 
```

`o`代表根，所以你不能跳过任何节点。

# c# - 在元素（父/子）WPF中获取元素

> ID：10447790
> 
> 赞同：0
> 
> 时间：2012-05-04T11:19:20.913
> 
> 标签：c#, wpf, visual-studio

我有一个关于访问另一个元素中的元素的问题。

**情况**

```
<grid name=container>
    <grid name=menu >
       inside here is the menu
    </grid
 <button />
<grid> 
```

如果按下按钮，则需要隐藏第二个网格（带有菜单）。按下按钮时如何访问网格元素。这需要不使用网格的实际名称，因为它位于数据模板中，并且多个对象使用同一个模板，但只有实际活动的对象需要隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:30:31.237

RoutedEventArgs 类具有 Source、OriginalSource 属性，可用于确定所需信息。此外，事件处理程序中也提供了 sender 参数。

以下链接解释了 Source、OriginalSource 和 Sender 中的区别（并回答了问题）。 [RoutedEventArgs.Source 与 Sender](https://stackoverflow.com/questions/7235975/routedeventargs-source-vs-sender)

RoutedEventArgs.OriginalSource - 最初引发事件的原始对象

RoutedEventArgs.Source - 引发事件的对象。这通常与 OriginalSource 相同，但在处理复合控件时，它可以是包含 OriginalSource 对象的父级。*

Sender - 处理事件的当前元素

# gcc - -lm 选项在 g++ 中有什么作用？

> ID：10447791
> 
> 赞同：20
> 
> 时间：2012-05-04T11:19:22.560
> 
> 标签：gcc, g++

`-lm`g++ 中的 option 有什么作用，什么时候需要它？

是否有 g++ 选项的完整描述？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-04T11:22:49.647

这是一个链接器选项。它告诉链接器与 ( `-l`)`m`库 (libm.so/dll) 链接。那是数学图书馆。如果你经常需要它`#include <math.h>`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-28T16:55:04.367

该选项对以下内容没有任何作用`g++`：参考此答案[https://stackoverflow.com/a/1033940/1143274](https://stackoverflow.com/a/1033940/1143274) `libstdc++`要求`libm`，因此它将始终由 链接**`g++`**。

但是，也有某种自动链接行为，我可以`gcc`在这个线程[http://www.linuxforums.org/forum/programming-scripting/125526-c-gcc-math-h-lm.html](http://www.linuxforums.org/forum/programming-scripting/125526-c-gcc-math-h-lm.html)上进行调查似乎没有找到关于它来自哪里以及它适用于哪些库的答案......

# c# - 忽略 C# 中的单引号

> ID：10447796
> 
> 赞同：0
> 
> 时间：2012-05-04T11:19:41.467
> 
> 标签：c#

在我的程序中，我有这个声明......

```
ct = String.Format(@"select [Movie Selector] from WSTMDS3
            natural prediction join 
            (select

             '{0}'as[Age],
            '{1}'as[Education Level],
            '{2}'as[Gender],
            '{3}'as[Home Ownership],
            '{4}'as[Internet Connection],
            '{5}'as[Marital Status]

            )as MovieSelector",
             TextBox1.Text,
             DropDownList1.SelectedValue,
             DropDownList2.SelectedValue,
             DropDownList3.SelectedValue,
             DropDownList4.SelectedValue,
             DropDownList5.SelectedValue)
                ; 
```

但是在下拉列表1“教育水平”中，我有一些价值，比如这个硕士学位'我如何在这个声明中使用单引号'。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T11:21:51.443

您不应该使用它`string.Format`来构建您的查询。您应该使用参数化查询。

```
adomdCommand.CommandText = "SELECT ... @P1 ...";
adomdCommand.Parameters.Add(new AdomdParameter("P1", TextBox1.Text));
// etc.. 
```

**有关的**

*   [参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)
*   [以编程方式添加 Adomd 参数 C#](https://stackoverflow.com/questions/4959768/adding-adomd-parameters-programmatically-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:24:46.840

使用 SqlCommand 和 SqlParameter。例子

```
SqlCommand sqlCom=new SqlCommand();
sqlCom.CommandText=@"select [Movie Selector] from WSTMDS3
        natural prediction join 
        (select

         @P0 as[Age],
        @P1 as[Education Level],
        @P2 as[Gender],
        @P3 as[Home Ownership],
        @P4 as[Internet Connection],
        @P5 as[Marital Status]

        ";
sqlCom.Parameters.AddWithValue("@P0",TextBox1.Text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:25:51.303

除了使用参数化查询 - T-SQL 语法中单引号的转义方法是将它们加倍。

# android - android：在应用计费RESULT_SERVICE_UNAVAILABLE

> ID：10447801
> 
> 赞同：4
> 
> 时间：2012-05-04T11:19:59.660
> 
> 标签：android, in-app-billing

我昨晚收到这种错误..我不知道发生了什么。我这边有什么问题吗？我没有更改我的代码，但是当我清除数据或重新安装应用程序时，它向我显示......！！！！！！令人沮丧…………

```
05-05 04:18:16.000: E/Finsky(17538): [1] NotifyingErrorListener.onErrorResponse: Server error on InAppPurchaseInformationRequest: com.android.volley.ServerError

05-05 04:18:16.010: D/Finsky(17538): [1] MarketBillingService.sendResponseCode: Sending response RESULT_SERVICE_UNAVAILABLE for request 227869xxxxxxx6110 to com.mypackage.
MarketBillingService.sendResponseCode: Sending response RESULT_ERROR for request 227869xxxxxxx6110 to com.mypackage. 
```

有人说从市场重新安装应用程序..ya 这是一种解决方案，但还有其他方法吗？？？？？？

我只是想知道我这边有什么问题......？？

[android in-app billing - restoreTransactionInformation](https://stackoverflow.com/questions/9763761/android-in-app-billing-restoretransactioninformation)说“虽然你不需要用 CONFIRM_NOTIFICATIONS 消息来响应这个意图”。如果我实现了这个但是有人有这方面的经验，那就太好了。

帮我

提前致谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T07:37:38.560

如果您在日志中找到此消息：

05-30 09:28:23.760: E/Volley(4636): [13] BasicNetwork.performRequest: [https://android.clients.google.com/vending/api/ApiRequest的意外响应代码 429](https://android.clients.google.com/vending/api/ApiRequest)

这意味着您在给定的时间内发送了太多 RESTORE_TRANSACTIONS 请求。谷歌显然有一些限制要求。它在测试应用内计费期间发生在我身上，大约。20-30 恢复事务请求正常，然后 - 服务不可用响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:31:21.567

很可能您收到此消息是因为 Google Play 应用程序此时未运行，并且在您重新安装该应用程序后，Google Play 再次启动并运行。

当您再次遇到同样的问题时，请尝试启动 Google Play 应用程序，然后返回您的应用程序并再次尝试访问帐单。

# ruby-on-rails - mongoid 查询的问题

> ID：10447804
> 
> 赞同：0
> 
> 时间：2012-05-04T11:20:08.443
> 
> 标签：ruby-on-rails, ruby, mongoid

我正在使用带有 rails 3.2.3 的 mongoid 3.0。

mongoid.yml 看起来像：

```
development:
  sessions:
    default:
      database: dana-x
      hosts: localhost 
```

服务器运行没有问题。但是当我尝试执行以下代码时：

```
User.where(:login => user_name).first 
```

服务器返回 NoMethod 错误：

```
undefined method `map' for "localhost":String

.bundle/ruby/1.9.1/gems/moped-1.0.0.beta/lib/moped/cluster.rb:20:in `initialize'
.bundle/ruby/1.9.1/gems/moped-1.0.0.beta/lib/moped/session.rb:52:in `new'
.bundle/ruby/1.9.1/gems/moped-1.0.0.beta/lib/moped/session.rb:52:in `initialize'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions/factory.rb:60:in `new'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions/factory.rb:60:in `create_session'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions/factory.rb:41:in `default'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions.rb:109:in `default'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions.rb:354:in `__session__'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions.rb:199:in `mongo_session'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/sessions.rb:157:in `collection'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual/mongo.rb:208:in `initialize'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual.rb:47:in `new'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual.rb:47:in `create_context'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual.rb:30:in `context'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual.rb:20:in `rescue in first'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/contextual.rb:18:in `first'
app/controllers/feed_controller.rb:5:in `index'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:414:in `_run__980518159__process_action__502500855__callbacks'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call'
.bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:68:in `block in call'
.bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in `each'
.bundle/ruby/1.9.1/gems/journey-1.0.3/lib/journey/router.rb:56:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/rack/mongoid/middleware/identity_map.rb:33:in `block in call'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
.bundle/ruby/1.9.1/bundler/gems/mongoid-cb1312e5385c/lib/rack/mongoid/middleware/identity_map.rb:33:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__647823261__call__262699075__callbacks'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/reloader.rb:65:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
.bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app'
.bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
.bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
.bundle/ruby/1.9.1/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in `call'
.bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call'
.bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:220:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
.bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:14:in `call'
.bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/home/scepion1d/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/scepion1d/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/scepion1d/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我认为这个问题与db有关。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:23:15.247

对于 mongoid 3.0 mongoid.yml 应该如下所示：

```
development:
  sessions:
    default:
      database: dana-x
      hosts:
        - localhost:27017 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:50:21.333

我的默认 mongoid.yml 包含：

```
 development:                                                                                                                                                                                                                                                                                                                
    host: localhost                                                                                                                                                                                                                                                                                                            
    database: mydatabse 
```

在您的 mongoid.yml 中测试没有会话的配置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:58:51.453

`host`需要单个主机定义，`hosts`用于阵列（即具有复制）

```
development:
  sessions:
    default:
      database: dana-x
      host: localhost 
```

或者，如果您确实有副本集，则可以这样定义（在[此处的文档](http://mongoid.org/docs/installation/replication.html)中介绍）：

```
development:
  sessions:
    default:
      database: dana-x
      hosts:
        - - 10.10.10.1
          - 27017
        - - 10.10.10.2
          - 27017
        - - 10.10.10.3
          - 27017 
```

# ocaml - let ... in 的 OCaml 语法错误

> ID：10447809
> 
> 赞同：3
> 
> 时间：2012-05-04T11:20:31.177
> 
> 标签：ocaml, syntax-error

我认为我有一个非常简单的问题，但无法弄清楚出了什么问题。我想打开一个文件并尝试在文件不存在或其他情况下使用自定义消息失败。

这是我的代码（对不起法语评论）：

```
if (argc = 1) then
    aide ()
else
    (* Si plus d'un argument, on récupère le type *)
    if argc >= 2 then
        let stage = int_of_string (Sys.argv.(1)) in
            if stage != 0 && stage != 1 then
                aide ()
            else
                ()
    else
        ()
    ;    
    (* Si plus de deux arguments, on récupère aussi l'entrée *)
    if argc >= 3 then
        let filename = Sys.argv.(2) in
        let input =
        try
            open_in filename
        with _ -> failwith ("Impossible d'ouvrir le fichier " ^ filename)
    else
        ()
    ;
;; 
```

我在 with 关键字上有语法错误。有人有想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:42:25.500

发生错误是因为您绑定`input`到一个值但没有在`then`分支中返回任何内容。

您应该对值做一些事情并在块 之后`input`返回。`()``try/with`

```
if argc >= 3 then
    let filename = Sys.argv.(2) in
    let input = (* The error is in this line *)
    try
        open_in filename
    with _ -> failwith ("Impossible d'ouvrir le fichier " ^ filename)
else
    () 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:02:30.970

您的问题是您的代码什么都不做，您定义了值 «input» 但不使用它，并且 Ocaml 不喜欢什么都不做的代码。你应该这样写：

```
if (argc = 1) then
    aide ()
else begin
    (* Si plus d'un argument, on récupère le type *)
    if argc >= 2 then
        let stage = int_of_string (Sys.argv.(1)) in
            if stage != 0 && stage != 1 then
                aide ()
            else
                ()
    else
        ()
    ;    
    (* Si plus de deux arguments, on récupère aussi l'entrée *)
    if argc >= 3 then
        let filename = Sys.argv.(2) in
        let input =
        try
            open_in filename
        with _ -> failwith ("Impossible d'ouvrir le fichier " ^ filename)
        in
        (* Le code principal du programme qui utilise la valeur input *)
    else
        ()
    ;
end;; 
```

关于您的代码的其他说明：

1.  我不认为你想使用 «failwith ("Impossible d'ouvrir le fichier " ^ filename)» 因为它会引发一个不会被捕获的异常。你已经抓住了它，所以打印一条错误消息并退出：

    ```
    (print_endline ("Impossible d'ouvrir le fichier " ^ filename); exit 1) 
    ```

2.  你应该使用«begin»和«end»

# android - 如何防止所有活动屏幕在android中旋转

> ID：10447811
> 
> 赞同：4
> 
> 时间：2012-05-04T11:20:45.407
> 
> 标签：android, rotation

我的应用程序包含大约 15 个活动。现在我知道了一种防止活动旋转的方法，即覆盖**onConfigurationChanged()**方法并在 xml 中定义它。

因为我有大约 15-20 个活动覆盖它们，所以我认为这不是最佳实践。那么有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:24:58.363

您可以在清单中添加它：

```
android:screenOrientation="portrait" 
```

对于您要限制的每项活动。也适用于“风景”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T11:26:32.473

检查[这个](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)。`activity`如果您想限制方向，清单文件标签内的这个属性可以产生奇迹。为了进一步参考，以下内容非常重要：

> 注意：当您声明横向或纵向值之一时，它被认为是对活动运行方向的硬性要求。因此，您声明的值允许按 Google Play 等服务进行过滤，因此您的应用程序仅可用于支持您的活动所需方向的设备。例如，如果您声明“landscape”、“reverseLandscape”或“sensorLandscape”，那么您的应用程序将仅适用于支持横向方向的设备。但是，您还应该明确声明您的应用程序需要纵向或横向的`<uses-feature>`元素。例如， `<uses-feature android:name="android.hardware.screen.portrait"/>`. 这纯粹是由 Google Play（以及其他支持它的服务）提供的过滤行为，并且平台本身并不控制当设备仅支持某些方向时是否可以安装您的应用程序。

这是开发人员网站本身提供的规范。因此，如果您将应用程序限制为仅在纵向上执行，则还建议您在清单中使用以下标签，就在`activity`标签之前：

```
<uses-feature android:name="android.hardware.screen.portrait"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:26:40.050

提供的清单条目@Stuart 是您具体示例中的最佳选择。

但总的来说，为了避免重复每个活动的代码，我会定义自己的类来扩展 Android`Activity`并在其`onCreate()`. 然后我的每个活动都会扩展我的扩展，而不是直接扩展 Android 提供的活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:26:01.420

将此添加到您的清单中：

```
 <activity  android:screenOrientation="portrait"></activity> 
```

# java - 尝试在 android 的 if else 语句中更改 int 值时遇到麻烦

> ID：10447817
> 
> 赞同：0
> 
> 时间：2012-05-04T11:21:01.367
> 
> 标签：java, android, loops, if-statement, int

我目前正在尝试在我的 android 应用程序的 if else 语句中更改 int 值。到目前为止，我已经尝试了很多方法并在互联网上进行了搜索，但找不到任何解决方案。

这是我的代码。

```
package sirtat.individualProject.PublicTransportationTimeScheduler;
import android.app.Activity;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;

import android.view.View;
import android.widget.Button;

import android.widget.Toast;

import android.widget.TimePicker;
import android.widget.DatePicker;

import java.util.Calendar;
import java.util.Locale;
import android.database.Cursor;

public class ScheduleActivity extends Activity {
    SQLiteDatabase db;

    TimePicker timePicker;
    DatePicker datePicker;

    int hour, minute;
    int yr, month, day;

    static String fDate1="DepartureDate";
    static String fDate2="DepartureDate";
    static String fTime="DEPART_TIME";
    static String fTime2="DEPART_TIME";

    public static final String view_Schedule1 = "ViewSchedule1";
    public static final String sBusArrival = "SBusArrivalLocation";
    public static final String sBusDepart = "SBusDepartLocation";
    public static final String sBusArrivalT = "SBusArrivalTime";
    public static final String sBusDepartT = "SBusDepartTime";
    public static final String fDepart = "FlightDeparture";
    public static final String sBusSchedule = "SkyBusSchedule";
    public static final String sBusDate = "SkyBusDate";
    public static final String fDate = "FlightDate";

    private int Min;
    private String VarMin = Min+" " + "minute";

    //private String VarMin = "";

    /** Called when the activity is first created */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.schedule_layout);

        db = openOrCreateDatabase("PublicTransport2" , SQLiteDatabase.CREATE_IF_NECESSARY, null);

        db.setVersion(1);
        db.setLocale(Locale.getDefault());
        db.setLockingEnabled(true); 

        Calendar today = Calendar.getInstance();

        //--GET THE CURRENT DATE--
        yr= today.get(Calendar.YEAR);
        month = today.get(Calendar.MONTH);
        day = today.get(Calendar.DAY_OF_MONTH);

        //--GET THE CURRENT TIME--
        hour = today.get(Calendar.HOUR);
        minute = today.get(Calendar.MINUTE);

        timePicker = (TimePicker) findViewById(R.id.timePicker);

        datePicker = (DatePicker) findViewById(R.id.datePicker);

        //--Button view--
                Button btnOp1 = (Button) findViewById(R.id.btnOption1);
                btnOp1.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        int year1 = datePicker.getYear();
                        int mnth1 = datePicker.getMonth() + 1;
                        int dy1 = datePicker.getDayOfMonth();
                        int hr1 = timePicker.getCurrentHour();
                        int min1 = timePicker.getCurrentMinute();

                        fDate1 = (pad(year1)) + ("-") + (pad(mnth1))
                             + ("-") + (pad(dy1));
                        fTime = (pad(hr1)) + (":") + (pad(min1));

                        ScheduleOp1();  
                            }
                    private Object pad(int b) {
                        // TODO Auto-generated method stub
                        if (b >= 10){
                            return String.valueOf(b);
                        }else{
                           return "0" + String.valueOf(b);
                        }

                    }
                   });  

                Button btnOp2 = (Button) findViewById(R.id.btnScheduleOption2);
                btnOp2.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        int year2 = datePicker.getYear();
                        int mnth2 = datePicker.getMonth() + 1;
                        int dy2 = datePicker.getDayOfMonth();
                        int hr2 = timePicker.getCurrentHour();
                        int min2 = timePicker.getCurrentMinute();

                        fDate2 = (pad2(year2)) + ("-") + (pad2(mnth2))
                             + ("-") + (pad2(dy2));
                            fTime2 = (pad2(hr2)) + (":") + (pad2(min2));

                            ScheduleOp2();

                    }

                    private Object pad2(int c) {
                        // TODO Auto-generated method stub
                        if (c >= 10){
                            return String.valueOf(c);
                        }else{
                           return "0" + String.valueOf(c);
                        }
                    }

                });

            }

    protected void ScheduleOp1() {
        // TODO Auto-generated method stub

        db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
        db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +VarMin+"');");

         Cursor cur = fetchAllTodos();
            startManagingCursor (cur);

        if (cur.moveToFirst()) {

            for(int Min = -140; Min >= -150; Min=Min-5)
            {
            Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                     +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                        Toast.LENGTH_LONG).show();
            }
        }else {
            Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
        }
            }     

    protected void ScheduleOp2(){

        Toast.makeText(getBaseContext(), "Date selected:"
                 + fDate2 + "\n" +
                "Time Selected:" + fTime2,
                Toast.LENGTH_LONG).show();
    }

           //fetching records from database
         public  Cursor fetchAllTodos() {   
         return db.query(view_Schedule1, new String [] {sBusDepart, 
                 sBusArrival, sBusDepartT, sBusArrivalT }, null, null, null, null, null);
           }

    } 
```

这是代码的重要部分

```
protected void ScheduleOp1() {
        // TODO Auto-generated method stub

        db.execSQL("DROP VIEW IF EXISTS " +view_Schedule1);
        db.execSQL("CREATE VIEW " +view_Schedule1+ " " +
                " AS SELECT " +sBusDepart+ "," +sBusArrival+ "," 
                +sBusDepartT+ "," +sBusArrivalT+ " FROM" + " "
                +fDepart+ " " + "INNER JOIN" + " " +sBusSchedule+ " " +
                "ON " +sBusSchedule+ "." +sBusDate+ "=" +fDepart+ "." 
                +fDate+ " " + "WHERE " +fDate+ "= '" +fDate1+"'"+" "+
                "AND" + " " +sBusDepartT+ " " + "= strftime('%H:%M', '" +fTime+ "', '" +VarMin+"');");

         Cursor cur = fetchAllTodos();
            startManagingCursor (cur);

        if (cur.moveToFirst()) {

            for(int Min = -140; Min >= -150; Min=Min-5)
            {
            Toast.makeText(getBaseContext(), cur.getString(0)+ "  " +cur.getString(1)+ "  "
                     +cur.getString(2)+ "  " +cur.getString(3)+ "\n",
                        Toast.LENGTH_LONG).show();
            }
        }else {
            Toast.makeText(this, "Not found", Toast.LENGTH_LONG).show();
        }
            } 
```

我尝试使用 for 循环来减少值，但到目前为止还没有让它工作。有什么建议或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:47:23.477

局部变量`Min`在

```
for(int Min = -140; Min >= -150; Min=Min-5) 
```

与实例成员不同`Min`：

```
private int Min; 
```

如果要更改实例成员的值，则需要将 for 循环更改为：

```
for(Min = -140; Min >= -150; Min=Min-5) 
```

顺便说一句，你也可以写：

```
for(Min = -140; Min >= -150; Min-=5) 
```

另请注意，更改 的值`Min`不会`VarMin`自动更改 的值。如果您希望它们被链接，则`VarMin`每次更新时都需要更新。`Min`

最后，另一方面，Java 中的约定是对变量使用小型大写字母：`Min`=> `min`，`VarMin`=>`varMin`等。

**编辑**

与其创建`varMin`成员，不如创建一个私有方法：

```
private String getVarMin() {
    return min+" " + "minute";
} 
```

并在您使用该`varMin`变量的任何地方调用该方法。这样，您可以确保始终使用最新的 min 值。

# python - Python 上下文管理器：有条件地执行主体？

> ID：10447818
> 
> 赞同：18
> 
> 时间：2012-05-04T11:21:04.123
> 
> 标签：python, contextmanager

我正在编写一个基于 MPI 的应用程序（但 MPI 在我的问题中并不重要，我提到它只是为了揭示基本原理）并且在某些情况下，当工作项少于进程时，我需要创建一个新的通信器不包括无关的进程。最后，新的通信器必须由有工作要做的进程（并且只能由它们）释放。

一个巧妙的方法是编写：

```
with filter_comm(comm, nworkitems) as newcomm:
    ... do work with communicator newcomm... 
```

主体仅由有工作要做的进程执行。

上下文管理器中有没有办法避免执行正文？我理解上下文管理器的设计是为了避免隐藏控制流，但我想知道是否有可能规避这一点，因为在我的情况下，我认为为了清楚起见这是合理的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-02-17T22:19:26.053

已提出有条件地跳过上下文管理器主体的能力，但如[PEP 377](https://www.python.org/dev/peps/pep-0377/)中所述被拒绝。

我做了一些关于替代品的研究。这是我的发现。

首先让我解释一下我的代码示例的背景。您有一堆想要使用的设备。对于每个设备，您必须获取设备的驱动程序；然后使用驱动程序使用设备；最后释放驱动程序，以便其他人可以获取驱动程序并使用该设备。

这里没有什么不寻常的。代码大致如下：

```
driver = getdriver(devicename)
try:
  dowork(driver)
finally:
  releasedriver(driver) 
```

但是，当行星没有正确对齐的每个满月时，获得的设备驱动程序是错误的，并且无法对设备进行任何操作。这没什么大不了的。只需在这一轮跳过该设备，然后在下一轮重试。通常司机是好的。但即使是坏的驱动程序也需要发布，否则无法获得新的驱动程序。

（固件是专有的，供应商不愿意修复甚至承认这个错误）

代码现在如下所示：

```
driver = getdriver(devicename)
try:
  if isgooddriver(driver):
    dowork(driver)
  else:
    handledrivererror(geterrordetails(driver))
finally:
  release(driver) 
```

每次需要使用设备完成工作时，都需要重复大量样板代码。[python上下文管理器](https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager)的主要候选者，也称为[with 语句](https://docs.python.org/3/reference/compound_stmts.html#the-with-statement)。它可能看起来像这样：

```
# note: this code example does not work
@contextlib.contextmanager
def contextgetdriver(devicename):
  driver = getdriver(devicename)
  try:
    if isgooddriver(driver):
      yield driver
    else:
      handledrivererror(geterrordetails(driver))
  finally:
    release(driver) 
```

然后使用设备时的代码又短又甜：

```
# note: this code example does not work
with contextgetdriver(devicename) as driver:
  dowork(driver) 
```

但这不起作用。因为上下文管理器必须让步。它可能不会产生。不屈服将导致`RuntimeException`提高 by `contextmanager`。

所以我们必须从上下文管理器中取出检查

```
@contextlib.contextmanager
def contextgetdriver(devicename):
  driver = getdriver(devicename)
  try:
    yield driver
  finally:
    release(driver) 
```

并将其放在`with`语句的正文中

```
with contextgetdriver(devicename) as driver:
  if isgooddriver(driver):
    dowork(driver)
  else:
    handledrivererror(geterrordetails(driver)) 
```

这很丑陋，因为现在我们再次有一些样板文件，每次我们想要使用设备时都需要重复这些样板文件。

所以我们想要一个可以有条件地执行主体的上下文管理器。但我们没有，因为[PEP 377](https://www.python.org/dev/peps/pep-0377/)（正是建议这个特性）被拒绝了。

我们可以自己引发异常，而不是不让步：

```
@contextlib.contextmanager
def contextexceptgetdriver(devicename):
  driver = getdriver(devicename)
  try:
    if isgooddriver(driver):
      yield driver
    else:
      raise NoGoodDriverException(geterrordetails(driver))
  finally:
    release(driver) 
```

但现在您需要处理异常：

```
try:
  with contextexceptgetdriver(devicename) as driver:
    dowork(driver)
except NoGoodDriverException as e:
  handledrivererror(e.errordetails) 
```

它的代码复杂性成本与上面对好的驱动程序的显式测试几乎相同。

不同之处：有一个例外，我们可以决定不在这里处理它，而是让它冒泡调用堆栈并在其他地方处理它。

还有区别：当我们处理异常时，驱动程序已经被释放了。虽然通过显式检查，驱动程序尚未发布。（except 在 with 语句之外，而 else 在 with 语句内）

我发现滥用[生成器](https://docs.python.org/3/glossary.html#term-generator)可以很好地替代可以跳过正文的上下文管理器

```
def generatorgetdriver(devicename):
  driver = getdriver(devicename)
  try:
    if isgooddriver(driver):
      yield driver
    else:
      handledrivererror(geterrordetails(driver))
  finally:
    release(driver) 
```

但是调用代码看起来很像一个循环

```
for driver in generatorgetdriver(devicename):
  dowork(driver) 
```

如果您可以忍受这个（请不要），那么您就有一个可以有条件地执行正文的上下文管理器。

似乎防止样板代码的唯一方法是使用回调

```
def workwithdevice(devicename, callback):
  driver = getdriver(devicename)
  try:
    if isgooddriver(driver):
      callback(driver)
    else:
      handledrivererror(geterrordetails(driver))
  finally:
    release(driver) 
```

和调用代码

```
workwithdevice(devicename, dowork) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T11:29:57.133

这个功能似乎被[拒绝了](http://www.python.org/dev/peps/pep-0377/)。Python 开发人员通常更喜欢显式变体：

```
if need_more_workers():
    newcomm = get_new_comm(comm)
    # ... 
```

您还可以使用高阶函数：

```
def filter_comm(comm, nworkitems, callback):
    if foo:
        callback(get_new_comm())

# ...

some_local_var = 5
def do_work_with_newcomm(newcomm):
    # we can access the local scope here

filter_comm(comm, nworkitems, do_work_with_newcomm) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-21T17:37:09.983

像这样的东西怎么样：

```
@filter_comm(comm, nworkitems)
def _(newcomm):  # Name is unimportant - we'll never reference this by name.
    ... do work with communicator newcomm... 
```

你实现`filter_comm`装饰器来做它应该用`comm`and做的任何工作`nworkitems`，然后根据这些结果决定是否执行它所包裹的函数，传入`newcomm`.

它不如 优雅`with`，但我认为这比其他提案更具可读性并且更接近您想要的内容。如果你不喜欢这个名字，你可以给内部函数`_`命名，但我选择了它，因为它是 Python 中使用的正常名称，当语法需要一个你永远不会实际使用的名称时。

# iphone - 如何将 UIImageView 大小定义为 UIImage 分辨率？

> ID：10447820
> 
> 赞同：6
> 
> 时间：2012-05-04T11:21:23.020
> 
> 标签：iphone, ipad, uiimageview, uiimage

我有一个场景，我正在使用 Web 服务获取图像，并且所有图像的分辨率都不同。现在我的要求是我想要每个图像的分辨率并使用它来定义 UIImageView 的大小，这样我就可以防止我的图像变得模糊

例如，如果图像分辨率为 326 像素/英寸，则图像视图应该是该图像的大小可以完全表示而没有任何模糊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:30:09.017

```
UIImage *img = [UIImage imageNamed:@"foo.png"];
CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
UIImageView *imgView = [[UIImageView alloc] initWithFrame:rect];
[imgView setImage:img]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T17:11:31.867

图像大小是它的分辨率。

您的问题可能是 - 视网膜显示！

检查视网膜显示，因此 - 使 UIImageView**宽度/高度小两倍**（这样每个 UIImageView 像素将由四个较小的 UIImage 像素组成，用于视网膜显示）。

如何检查视网膜显示：

[https://stackoverflow.com/a/7607087/894671](https://stackoverflow.com/a/7607087/894671)

如何检查图像大小（实际上不将图像加载到内存中）：

```
NSString *mFullPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] 
                stringByAppendingPathComponent:@"imageName.png"];

NSURL *imageFileURL = [NSURL fileURLWithPath:mFullPath];

CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)imageFileURL, NULL); 

if (imageSource == NULL) 
{ 
    // Error loading image ... 
} 

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache, nil]; 

CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (CFDictionaryRef)options); 

NSNumber *mImgWidth;

NSNumber *mImgHeight;

if (imageProperties) 
{   
    //loaded image width
    mImgWidth = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelWidth); 

    //loaded image height      
    mImgHeight = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelHeight); 

    CFRelease(imageProperties); 
}

if (imageSource != NULL) 
{
    CFRelease(imageSource);
} 
```

所以 - 例如：

```
UIImageView *mImgView = [[UIImageView alloc] init];

[mImgView setImage:[UIImage imageNamed:@"imageName.png"]];

[[self view] addSubview:mImgView];

if ([UIScreen instancesRespondToSelector:@selector(scale)]) 
{
    CGFloat scale = [[UIScreen mainScreen] scale];

    if (scale > 1.0) 
    {
        //iphone retina screen
        [mImgView setFrame:CGRectMake(0,0,[mImgWidth intValue]/2,[mImgHeight intValue]/2)];
    }
    else
    {
        //iphone screen
        [mImgView setFrame:CGRectMake(0,0,[mImgWidth intValue],[mImgHeight intValue])];
    }
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:27:52.887

您可以使用以下代码获取图像大小。所以，首先计算下载的图像大小，然后根据它制作图像视图。

```
UIImage *Yourimage = [UIImage imageNamed:@"image.png"];
CGFloat width = Yourimage.size.width;
CGFloat height = Yourimage.size.height; 
```

希望对你有帮助..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T11:28:24.540

```
 UIImage *oldimage = [UIImage imageWithContentsOfFile:imagePath];  // or you can set from url with NSURL  

CGSize imgSize = [oldimage size];

  imgview.frame = CGRectMake(10, 10, imgSize.width,imgSize.height);
[imgview setImage:oldimage]; 
```

100% 工作....

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T20:19:12.023

要解决这个问题，我们需要注意[**设备的显示分辨率。**](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density).

例如，您有一个[**分辨率为**](http://graphicssoft.about.com/od/resolution/a/realproblem.htm) ***326ppi***的图像，与 iPhone4、iPhone4S 和 iPod 4th Gen 相同。所以您可以简单地使用@Nit 和@Peko 建议的解决方案。但是对于其他设备（或这些设备上具有不同分辨率的图像），您将需要应用数学来[**计算尺寸**](http://graphicssoft.about.com/cs/resolution/a/increasingres.htm)以获得更好的显示效果。

现在假设您有***260ppi****（尺寸为 W x H）*的图像，并且您希望将其显示在 iPhone4S 上，因此其中每英寸包含的信息小于 iPhone 的显示分辨率，因此我们需要通过减小图像大小来调整它的大小326/260 系数。所以现在你将使用的 imageView 的大小是

```
imageViewWidth = W*(260/326);

imageViewHeight = H*(260/326); 
```

一般来说：

```
resizeFactor = imageResolution/deviceDisplayResolution;
imageViewWidth = W*resizeFactor;
imageViewHeight = H*resizeFactor; 
```

在这里，我正在考虑当我们在 imageView 中设置图像并调整它的大小时，它不会从图像中删除或添加像素，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-14T00:41:07.940

让 UIImageView 通过使用 contentMode 属性为您调整图像大小来完成工作。

您可能希望使用静态大小（“frame”属性）来显示您的 UIImageView，该大小表示您要显示的图像的最大尺寸，并允许图像在该框架内根据它们自己的特定尺寸要求调整大小（总体大小、纵横比等）。**通过掌握contentMode**属性，您可以让 UIImageView 为您处理不同大小的图像做繁重的工作。它有许多不同的设置，其中之一是 UIViewContentModeScaleAspectFit，它会根据需要缩小图像以适应 UIImageView，如果图像更小，它将简单地居中显示。您可以使用设置来获得您想要的结果。

请注意，使用这种方法，您不需要做任何特殊的事情来处理与 Retina 显示器相关的缩放问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T06:00:36.687

根据您在问题正文中所述的要求，我相信您无需更改 UIImageView 大小。

使用这行代码，图像可以完全表示而没有任何模糊：

```
imageView.contentMode = UIViewContentModeScaleAspectFit; 
```

# asp.net-mvc - 随着时间的推移将项目从 web 表单转换为 MVC - 可以这样做吗？

> ID：10447821
> 
> 赞同：2
> 
> 时间：2012-05-04T11:21:26.523
> 
> 标签：asp.net-mvc

我正在开发一个由 SQL 服务器数据库支持的典型 3 层网络表单应用程序。此外，有几个表单调用了从主机上的 DB2 数据库中获取数据的 DAL 层，并且这个逻辑被很好地封装了。这个项目中大约有 80 个表单，但我想说至少有 50 个表单非常相似，以至于它们会共享相同的 2 或 3 个视图。

所以告诉我你是否认为这是一个灾难的秘诀......我被要求探索以增量方式将这个项目转换为 MVC 的可能性。我们永远不会得到管理层的同意，花时间一举完成项目的转换。它必须在我们与业务相关的版本中逐步完成 - 即，我们每隔几个月发布一次，我被要求探索如何在每个版本中进行较小的更改，以朝着 MVC 前进。由于它们是 2 个完全不同的框架，我不会立即看到如何做到这一点。我的一个想法是划分 UI 部分，将其放入 MVC 项目中，然后让控制器调用我们现在拥有的 DAL。你甚至可以有一个包含不同项目类型的解决方案吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:13:43.243

我最近做过类似的事情。我有一个在 ASP .Net 和 Oracle 中开发的正在运行的应用程序。该应用程序有几个性能问题，因此我们必须重新考虑这一点。我们都同意我们应该同时将它迁移到 MVC。

因此，我创建了一个新项目 MVCWebClient。在那个新项目中，我们一一创建了我们的页面。现在用户使用旧应用程序的登录页面登录到我们的应用程序，我们更改了指向新应用程序的链接。

除会话外，一切正常。因为我们在会话中存储了 uid/pwd，所以我创建了一个虚拟页面，将会话参数传输到我们的 MVC 应用程序。

例如，我现有的应用程序具有以下 URL：-

/登录.aspx

/首页.aspx

/财务/Payslip.aspx

我创建了一个集成页面来传输这样的会话 /Integration.aspx?urlRequest=/MVCApp/Finance/Payslip

我的主要导航链接变成这样 /Login.aspx

/首页.aspx

/Integration.aspx?urlRequest=/MVCApp/Finance/Payslip

如果您对我的解决方案感兴趣，请随时询问详细信息。

# android - com.google.ads.AdView 无法实例化

> ID：10447822
> 
> 赞同：1
> 
> 时间：2012-05-04T11:21:26.760
> 
> 标签：android, xml, admob

我使用了 admob sdk 并添加为外部 jar。在我指定的 xml 中

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<TextView android:id="@+id/headerfield"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<ListView android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

<com.google.ads.AdView 
    android:id="@+id/ad"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"    
    ads:adUnitId="Publisher Id"
    ads:loadAdOnCreate="true" />    
</LinearLayout> 
```

显现

```
<activity android:name="com.google.ads.AdActivity"
    android:configChanges="keyboard|keyboardHidden|orientation"/> 
```

但在图形模式下，它给了我一个错误日志：

```
com.google.ads.AdView - the following class could not be instantiated. 
```

在节目里面它的显示

您必须使用 configChanges 在 AndroidManifest.xml 中声明 AdActivity。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:38:27.110

从[文档](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals#adactivity)中，您需要在活动中包含其他 configChanges（假设您使用的是 4.3.1 或更高版本）：

```
<activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

如果遇到无法识别 screenSize 和 minimumScreenSize 的问题，则必须编译 aganist Android 3.2 或更高版本。查看此[迁移博客文章](http://googleadsdeveloper.blogspot.com/2011/11/migrating-to-v431-of-admob-sdk-for.html)，了解有关从 4.1.1 升级到更新版本的更多信息（同样适用于迁移到 6.0.0）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:26:02.517

您是否也导出了 AdMob 库？

进入 Project Properties > Java Build Path > Order and Export

检查您的 admob.jar 旁边的小框是否已选中；如果没有，请这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T15:57:03.010

如果有人仍在查看此线程，请检查您渲染视图的 API 级别是否低于 17。对我来说，它在 17 时工作。您可以使用图形布局上方的小机器人来更改它。

# postgresql - PostgreSQL：2+ 客户端，唯一约束 -> 竞争条件

> ID：10447824
> 
> 赞同：2
> 
> 时间：2012-05-04T11:21:33.920
> 
> 标签：postgresql, unique, race-condition

我很感兴趣，避免这个小问题的最佳做法是什么:)

让我们使用 2 个客户端，它们都试图在具有唯一约束的表中插入行。
假设它是“url”列。

一次可能会出现以下情况：
  1) Client A 看，表中是否有 url "a"
  2) Client A 得到答案，没有那个 url
  3) Client A 要插入 url "a"
  4) 客户 B 看，表中是否有 url "a"
  5) 客户 B 得到答案，没有那个 url
  6) 客户 A 插入 url "a"
  7) 客户 B 将插入 url "a"，但得到重复键错误

**我是否理解正确，避免它的最佳方法 - 只是在应用程序级别重试？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:39:23.900

您可以通过在事务开始时取出显式锁来避免错误，但这可能对并发性和吞吐量不利。

[http://www.postgresql.org/docs/current/interactive/explicit-locking.html](http://www.postgresql.org/docs/current/interactive/explicit-locking.html)

如果您不阻止并发尝试，则需要以一种或另一种方式处理重试。您可以将其封装在一个函数中，而不是将该逻辑放在应用程序代码中。逻辑类似于 merge_db() 示例：

[http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:48:35.343

如果在 SERIALIZABLE 隔离级别下运行，客户端 B 将被迫等待 A 的事务完成，然后返回 url 的值。由于该值尚不存在，因此您无法在记录上加锁（没有记录），因此将使用索引上的间隙锁定。但正如@kgrittn 提到的，这会对性能和并发性产生负面影响。所以最好处理重复键错误

# hibernate - 合并后选择：休眠

> ID：10447825
> 
> 赞同：0
> 
> 时间：2012-05-04T11:21:40.500
> 
> 标签：hibernate

在同一服务（事务）中合并（更新）同一实体后，我想选择一个实体及其子实体（加入）。我知道合并返回您更新的对象，但该对象具有已更新的数据，而不是所有具有数据库数据的实体。此外，如果在合并后我执行一个选择来尝试获取具有所有子实体的实体，它返回的对象只是更新了数据的对象（其余字段和子实体为空）。

有什么办法可以解决吗？必须在同一个事务中执行所有内容，因为该服务有很多数据库操作必须在提交之前正确执行。

谢谢。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:49:51.380

这完全取决于您如何构建代码。如果您可以为您要实现的目标提供更多信息/代码，这将有所帮助。

根据您的描述，检查您是否在实体及其子项之间正确设置了级联选项。您可以设置合并操作的级联，这也应该刷新子级。（注意：只有在延迟加载的情况下在合并操作之前获取了任何子项时，这才有效）。

对于您的第二个问题，这再次取决于您如何构建代码，以及您从 db.xml 获取数据的方式。但是，理想情况下，与一个请求/工作单元相关的所有数据库操作都应该在一个事务中处理。

# android - VideoPlayer 显示错误 (1, -1)

> ID：10447830
> 
> 赞同：0
> 
> 时间：2012-05-04T11:21:56.073
> 
> 标签：android, video-streaming, android-video-player

我正在我的应用程序中播放视频，我观察到这样做会产生一些奇怪的结果。我要播放的视频在服务器上，我必须让它们运行 android 的本机视频播放器。我在几台设备上测试了结果，发现视频在操作系统版本大于等于 ton 2.3.3 的设备上运行，但在其他设备上不运行，显示错误 (1, -1)。现在我的问题是，要么更高版本的操作系统有一些额外的视频编解码器和格式支持，那是因为视频是在它们上面播放的，还是其他的？为什么少数设备上的此错误并非全部？

**视频在本机 videopalyer 中正常工作的设备：**

三星 Google Nexus 操作系统 4.0.1

带有 OS 2.3.3 的三星 Galaxy S

**无法播放的设备：**

HTC-Desire 与 OS 2.2

带有 OS 2.2 的三星 Galaxy S

任何关于这个问题的帮助总是值得赞赏的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:31:31.087

由于多种原因，可能会发生此错误。问题可能在于视频播放器，以及您正在阅读视频的来源，视频是来自 HTTp 服务器还是 RSTP 服务器......其中任何一个都可能是原因。你必须相应地检查。在我们的案例中，我们通过使用 Video View 解决了这个问题，并且还更改了 URL 以使其播放。

# ruby-on-rails-3 - Rails 中的“嵌套属性”是什么？

> ID：10447837
> 
> 赞同：1
> 
> 时间：2012-05-04T11:22:29.870
> 
> 标签：ruby-on-rails-3

我是rails的新手。谁能告诉我嵌套属性到底是什么以及何时使用它们，并举一个很好的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:54:02.253

我会说检查这两个 railscast

1.  [嵌套模型表单第 1 部分](http://railscasts.com/episodes/196-nested-model-form-part-1)

2.  [嵌套模型表单第 2 部分](http://railscasts.com/episodes/197-nested-model-form-part-2)

    如果您想阅读，请检查[此](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#M002132)

# iphone - 无法在 iphone 应用程序中添加 Facebook SDK

> ID：10447842
> 
> 赞同：0
> 
> 时间：2012-05-04T11:22:59.440
> 
> 标签：iphone, facebook, youtube-api

我正在开发一个 iphone 应用程序，我正在将视频上传到 youtube，我已经成功地解决了这个问题。

现在，当我尝试在应用程序中集成 facebook 时，由于两个 sdk 中的 SBJason.h 文件，它正在创建一个问题。因为两个 sdk 在他们的 SDK 工具包中都有 SBJason 文件。

所以我需要有任何你可以建议的解决方法。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:59:04.733

您必须删除其中一个 SDK 的`SBJson`.

先看看哪个是更新的

如果您看到任何更新的，请保留并删除旧的。

如果两者都相同，那么您可以删除它们中的任何一个，它不会影响项目（希望如此）

# android - 在应用程序运行时更改 XML 形状颜色

> ID：10447843
> 
> 赞同：0
> 
> 时间：2012-05-04T11:23:00.893
> 
> 标签：android, xml

是否可以在应用程序运行时更改 Java 代码中的矩形（以 xml 绘制）颜色？

我的矩形.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/listview_background_shape">
    <stroke android:width="2dp" android:color="#ffffff" />
    <padding android:left="20dp"
        android:top="20dp"
        android:right="20dp"
        android:bottom="20dp" />

    <solid android:color="#006600" />
</shape> 
```

通过以下方式在 main.xml 中绘制：

```
<View
    android:id="@+id/myRectangleView"
    android:layout_width="wrap_content"
    android:layout_height="100dp"
    android:background="@drawable/rectangle"/> 
```

我试过这样：

```
 GradientDrawable sd;
    View viewrectangle;
    viewrectangle = (View) findViewById(R.id.myRectangleView);
    sd = (GradientDrawable) viewrectangle.getBackground();
    sd.setColor(0xffffff00);
    sd.invalidateSelf(); 
```

只有当我把它放在 OnCreate 方法中时它才有效。

我想通过一个按钮改变矩形颜色，所以我把这段代码放在按钮的 onClick() 方法中。但是当我在应用程序运行时单击按钮时，颜色不会改变。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:59:13.263

使用此代码并且它有效，或者考虑使用 viewrectangle.invalidate() 重新绘制 viewrectangle，但它不应该是 nescarry：

```
View viewrectangle;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    viewrectangle = (View) findViewById(R.id.myRectangleView);

}

public void doClick(View v) {
    GradientDrawable sd = (GradientDrawable) viewrectangle.getBackground();
    sd.setColor(0xffffff00);
    sd.invalidateSelf();
} 
```

在本例中，“doClick()”方法在 main.xml 中设置：

```
<Button android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:text="Button"
        android:onClick="doClick"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:02:40.343

你可以试试彩色滤光片。我以前用它来更改按钮的颜色（请注意，它们一开始是标准灰色），如果你从另一种颜色开始，它可能是一个非常不同的结果。无论如何，我是如何做到的一个例子：

导入 PorterDuff 图形材料：

```
import android.graphics.PorterDuff; 
```

在类中定义要进行颜色过滤的项目并设置过滤器：

```
Button atdButton = (Button) convertView.findViewById(R.id.attendbutton);

    if (atdState[position].equals("P")) {
        atdButton.getBackground().setColorFilter(0xFF00FF00,  // Set filter to green
                PorterDuff.Mode.MULTIPLY);
    } else if (atdState[position].equals("T")) {
        atdButton.getBackground().setColorFilter(0xFFFFFF00,  // Set filter to yellow
                PorterDuff.Mode.MULTIPLY);
    } else if (atdState[position].equals("E")) {
        atdButton.getBackground().setColorFilter(0xFFFF6600,  // Set filter to orange
                PorterDuff.Mode.MULTIPLY);
    } else if (atdState[position].equals("U")) {
        atdButton.getBackground().setColorFilter(0xFFFF0000,  // Set filter to red
                PorterDuff.Mode.MULTIPLY);
    } else {
        atdButton.getBackground().clearColorFilter();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:36:34.037

您可以将此代码放在一个单独的方法中，并且您可以从按钮的 onClick 调用该方法。

# spring-data - Spring Data PagingAndSortingRepository

> ID：10447848
> 
> 赞同：2
> 
> 时间：2012-05-04T11:23:13.390
> 
> 标签：spring-data

正如 Gierke 在他的博客文章中所述，我将 Spring Data 与 QueryDSL 一起使用。一切正常，实现起来相对简单，但我现在已经达到了一个需要分页和排序的数据视图的地步。似乎，一个人必须选择一个或另一个。为什么是这样？真的没有办法两者兼得吗？到目前为止，我们已经在时间和精力上投入了大量资金来实施所有事情，如果被困在这样一个看似简单的任务上，那就太可惜了。

简而言之，我需要创建一个方法，该方法采用 QueryDSL 谓词、可分页和某种形式的排序对象来提供过滤、分页和排序的结果。

任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:25:56.697

`PageRequest`有一个构造函数`PageRequest(int page, int size, Sort sort)`，因此可以简单地将您的排序选项通过管道`PageRequest`传递到实例中，并将其传递给`PagingAndSortRepository`in 或`QueryDslSpecificationExcutor`.

# php - 在 PHP 中拆分字符串最快最有效的方法

> ID：10447849
> 
> 赞同：1
> 
> 时间：2012-05-04T11:23:17.367
> 
> 标签：php, string

我需要通过找到第一个字符来拆分字符串。最快的写法是什么？

**字符串示例：**

```
$string = 'Some text here| some text there--and here|another text here'; 
```

**预期结果：**

```
$new_string = 'Some text here'; 
```

这是一个解决方案，我有。有没有更有效的方法来做到这一点？

```
$explode = explode('|', $string);  
$new_string = explode[0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:24:48.520

使用`strpos()`和`substr()`。`Strpos()`一旦找到第一个匹配项就会返回，而`explode()`必须遍历整个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:28:11.800

使用`strstr()`：

```
strstr($string, "|", true); 
```

将返回所有内容，直到第一个管道 (|)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:30:59.393

```
$string = 'Some text here| some text there--and here|another text here';
$string = substr($string, 0, strpos($string,'|'));
print $string; 
```

编辑：使用 strstr() 更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T14:27:07.310

爆炸可以变成单线

```
list($first,) = explode('|', $string,2); 
```

但是， strtok 看起来是最简洁的解决方案。

至于效率 - 选择哪种方式来执行这种微不足道的操作根本不重要。

无论处理的数据**量**如何导致效率低下。理智的程序员会不惜一切代价避免处理大量数据。从效率的角度来看，其他任何事情都是完全垃圾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T11:27:57.253

最好搭配：

```
$first = strtok($string, '|'); 
```

如果你喜欢，你可以去和爆炸：

```
$explode = explode('|', $string, 1); 
```

也`strpos()`，`substr()`并且`strstr()`对此有好处。

# sql - SQL Server 中的舍入和值比较问题

> ID：10447850
> 
> 赞同：0
> 
> 时间：2012-05-04T11:23:24.090
> 
> 标签：sql, sql-server-2008

当我试图得到两个明显相等的数字之间的差异时，我得到一个不同于零的数字。

```
product_price       min_product_price   price_dif
40,609756097561     40,609756097561         -2,1316282072803E-14 
```

我知道如果没有导致此问题的所有查询，这可能是一个难以回答的问题，但我会尝试解释，

`product_price`直接来自 ERP 数据库。

`min_product_price`获得一个

```
MIN(ItemSellingPrices.UnitPrice) as min_product_price 
```

连同一个 group by 子句。这不应该意味着数字相同吗？

我对这类问题没有经验，所以如果这太基本了，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:27:30.097

看起来像一个浮点问题。

如果您将货币值存储在`float`或`real`列中，请尝试改用`decimal`/`numeric`数据类型。

例如，要存储 12 个十进制值，您可以使用`decimal(18, 12)`。

# java - 裁剪时选择图像的一部分

> ID：10447854
> 
> 赞同：-1
> 
> 时间：2012-05-04T11:23:38.130
> 
> 标签：java, image, swing

我在 java swing 中裁剪图像，但是当我选择图像的一部分进行裁剪时，我需要使选择部分对用户可见。就像该图像上的透明矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:43:31.397

[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)显示了一种渲染这种选择矩形的方法，`mouseRect`. 渲染由`boolean selecting`属性控制。

附录：一旦你知道选择的范围，你就可以使用`getSubimage()`克隆图像的相应部分。[这里](https://stackoverflow.com/a/3078354/230513)有一个相关的例子。

# c++ - C++成员变量值根据是否打印出来而改变

> ID：10447856
> 
> 赞同：3
> 
> 时间：2012-05-04T11:23:43.327
> 
> 标签：c++

我有一个`ZoneDeVie`包含向量向量的类`Bacterie*`。该类`Bacterie`包含一个 int 值`energie`（默认设置为 10）和一个`toString()`打印该值的函数。在`ZoneDeVie`构造函数中，我构建了 2D 表，用默认的 a 实例填充每个单元格`Bacterie`。然后，在我的主要方法中，我通过打印表格`toString()`中的最后一个来进行测试。`Bacterie`由于某种原因，它返回一个随机的、令人讨厌的大整数（通常类似于：3753512）；但是，如果我在 ZoneDeVie 的`toString()`构造函数中调用 Bacterie 的方法，则 main 方法将正确打印出来。

```
#include <iostream>
#include <sstream>
#include <vector>
using namespace std;

class Bacterie {
public:
    Bacterie() { this->energie = 10; }
    string toString() {
        stringstream ss;
        ss << "Energie: " << this->energie;
        return ss.str();
    }
protected:
    int energie;
};

class ZoneDeVie {
public:
    ZoneDeVie(int width, int height) {
        Bacterie* bac = new Bacterie();

        // without this [following] line, the call to `toString`
        // in the main method will return an obnoxiously-large value
        //bac->toString();
        for (int i=0; i<height; i++) {
            vector<Bacterie*> bacvec = vector<Bacterie*>();
            this->tableau.push_back(bacvec);
            for (int j=0; j<width; j++) {
                this->tableau[i].push_back(bac);
            }
        }
    }
    vector<vector<Bacterie*> > tableau;
};

int main(int argc, char *argv[]) {
    int x,y;
    x = 9; y = 39;
    ZoneDeVie zdv = ZoneDeVie(10,40);
    cout << "zdv(" << x << "," << y << ") = " << zdv.tableau[x][y]->toString();

    return 0;
} 
```

**输出（在 ZoneDeVie 的构造函数中调用“toString()”）：** `zdv(9,39) = Energie: 10`

**输出（在 ZoneDeVie 的构造函数中没有调用“toString()”）：** `zdv(9,39) = Energie: 4990504`

为什么我需要先调用我的 toString() 方法才能在 main 方法中调用它以使其行为符合预期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:29:46.977

你的 for 循环中的结束条件被交换。您应该首先遍历`width`然后遍历`height`：

```
class ZoneDeVie {
public:
    ZoneDeVie(int width, int height) {
        Bacterie* bac = new Bacterie();

        for (int i=0; i<width; i++) {
            vector<Bacterie*> bacvec = vector<Bacterie*>();
            this->tableau.push_back(bacvec);
            for (int j=0; j<height; j++) {
                this->tableau[i].push_back(bac);
            }
        }
    }
    vector<vector<Bacterie*> > tableau;
}; 
```

这将编译并提供正确的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:39:13.827

这段代码有几个问题。

1.  目前尚不清楚默认构造函数的`Bacterie`作用。

2.  目前尚不清楚`ZoneDeVie::tableau`本地向量`bacvec`是什么以及如何使用。

3.  尚不清楚复制构造函数和`operator=`for 类`ZoneDeVie`是如何定义的（都在 中使用`main()`）。

4.  似乎您表中的所有条目都使用指向相同的指针进行初始化`Bacterie` `bac`

# python - plone如何为结束日期之后应该移动到另一个文件夹的事件添加内容规则

> ID：10447858
> 
> 赞同：2
> 
> 时间：2012-05-04T11:23:53.840
> 
> 标签：python, plone

我希望为一个事件创建一个内容规则，以便在事件的**到期日期（即结束日期**）之后，它应该被移动到另一个文件夹。如何指定内容规则。请指导。使用克隆 4.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:36:06.897

不确定您是否可以使用内容规则执行此操作；在那个确切时间没有运行代码。您需要运行外部 cron 作业来触发对过期事件的扫描。

为什么不直接使用集合来列出其他位置的过期事件？

# javascript - 仅在单选按钮单击时显示 div

> ID：10447861
> 
> 赞同：0
> 
> 时间：2012-05-04T11:24:13.330
> 
> 标签：javascript, javascript-events

我有一个这样的HTML代码

```
 <li>
            <ul>
               <li id="6"><input type="radio" name="sell" value="sell" id="sell" />Sell</li>
               <li id="7"><input type="radio" name="rent" value="rent" id="rent" />Rent</li>
       <li id="8"><input type="radio" name="donate" value="donate" id="donate" />Donate</li>
             </ul>

            <div id="selltab" style="display:none;">
       eeeeeeeee
    </div>
    <div id="renttab" style="display:none;">
       ffffffffff
    </div>
       <div id="donatetab" style="display:none;">
       ggggggggg
       </div>

 </li> 
```

我只需要在单击相应的单选按钮时显示每个 div，否则它应该被隐藏。现在我已经编写了一个 javascript，但它不能正常工作。

```
 $(document).ready(function(){
    $("radio[@name='sell']").click(function(){

        if ($("radio[@name='sell']:checked").val() == 'sell')
            $("#selltab").css("display","block");

    });

}); 
```

这是为了测试在单击价值出售单选按钮时是否可以显示出售选项卡...但似乎在某些地方有一些错误...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:41:32.413

通过使用切换功能，您可以做到这一点。

```
$('#selltab').hide();
$('#renttab').hide();

$('input[name=sell]').click(function(){
   $('#selltab').toggle();
})
$('input[name=rent]').click(function(){
    $('#renttab').toggle();
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:30:37.223

我认为这就是你想要的：http: [//jsfiddle.net/Wsg3q/](http://jsfiddle.net/Wsg3q/)

```
<form>
  <input type="radio" name="group" value="sell" id="sell" /> sell <br/>
  <input type="radio" name="group" value="rent" id="rent" /> rent <br/>
  <input type="radio" name="group" value="donate" id="donate" /> donate <br/>
</form>

<div id="selltab" >
   eeeeeeeee
</div>
<div id="renttab" >
   ffffffffff
</div>
<div id="donatetab" >
   ggggggggg
</div> 
```

Javascript：

```
$('div').hide();

$("input[name=group]:radio").change(function() {
     $( '#' + $(this).attr('id') + 'tab' ).show();
    $('div:not(#' + $(this).attr('id') + 'tab)' ).hide();
});
​

​ 
```

# android - 如何在 Android 中以 FOCUS_MODE_MACRO 作为默认值打开本机相机

> ID：10447862
> 
> 赞同：0
> 
> 时间：2012-05-04T11:24:13.953
> 
> 标签：android, android-camera

我在android设备中打开了本机相机，如下所示：

我想使用默认设置 FOCUS_MODE_MACRO 打开 Android 设备的本机相机。我尝试并寻找它，但我没有得到适当的解决方案。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

所以，任何人都可以帮助我解决这个问题。是否有任何我需要输入的参数或是否有任何其他解决方案？

提前致谢。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:33:21.550

[http://code.google.com/p/zxing/downloads/list](http://code.google.com/p/zxing/downloads/list)

这个相机有点无关紧要，但是对项目的事件检查有一个好主意，也许对上课有用

# java - 如何显示或读取 docx 文件

> ID：10447865
> 
> 赞同：12
> 
> 时间：2012-05-04T11:24:22.780
> 
> 标签：java, android, ms-word, docx

我是在 android 中渲染文件的新手，我想在我的应用程序中渲染或显示 docx 文件。

我已经从 docx 文件中提取了文本，但现在我也想从 docx 文件中提取图像。

我已经找到了几种在纯 J​​ava 中显示图像的方法，但是对于 Android 有什么好的例子吗？

我试过这段代码来获取图像但没有工作......

```
public void extractImages(Document xmlDoc)
{
    NodeList binDataList = xmlDoc.getElementsByTagName("w:drawings");
    String fileName = "";
    Node currentNode;
    for(int i = 0; i < binDataList.getLength(); i++)
    {
        currentNode = binDataList.item(i);
        if(currentNode.getNodeType() == Node.ELEMENT_NODE && ((Element)currentNode).hasAttribute("w:name"))
        {               
            File newImageFile = new File(picDirectory, ((Element)currentNode).getAttribute("w:name").replaceFirst("wordml://", ""));
            if(newImageFile.exists())
            {

            }
            else
            {
                if(writeImage(newImageFile, currentNode))
                {
                    //Print some success message
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T12:40:45.760

看看[AndroidDocxToHtml](https://github.com/plutext/AndroidDocxToHtml)，我用它来演示在 Android 上使用 docx4j。

几个警告。

首先，该项目不包含所有 docx4j 依赖项，仅包含 docx 到 HTML 转换所需的依赖项。因此，如果您想做其他事情，则可能需要其他依赖项。

其次，docx4j 需要 JAXB - 请参阅[此博客文章 re JAXB on Android](http://www.docx4java.org/blog/2012/05/jaxb-can-be-made-to-run-on-android/) - 应用程序启动时的 JAXB 上下文初始化需要一段时间，具体取决于设备。有一些方法可以解决这个问题，但需要付出额外的努力。

如果您只想提取图像，而不关心它们与文本的关系，您可以只查找图像部分。您可以为此使用[OpenXML4J](http://sourceforge.net/projects/openxml4j/)，并避免使用 JAXB。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T20:46:30.507

在 Android 中创建图像最简单的方法是使用[`BitmapFactory`](http://developer.android.com/reference/android/graphics/BitmapFactory.html)工厂方法。

该类`BitmapFactory`具有`Bitmap`从字节数组、文件或 InputStream 创建的方法。

一旦你有了一个对象，你可以通过使用方法在你的布局中`Bitmap`设置它来显示它。`ImageView`[`setImageBitmap`](http://developer.android.com/reference/android/widget/ImageView.html#setImageBitmap%28android.graphics.Bitmap%29)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T08:54:29.923

您可以解压缩文件（重命名为 .zip 并打开它），然后您可以调查文件夹结构、图像所在的位置等。

# java - Log4j 每天滚动 catalina.out 而不重新启动 Tomcat？

> ID：10447866
> 
> 赞同：2
> 
> 时间：2012-05-04T11:24:25.433
> 
> 标签：java, log4j, rotation, tomcat7, catalina

我无法正确配置 Log4j。我期待 Log4j 在午夜轮换我的 catalina.out 文件，如下所示配置它..

**log4j.properties：**

```
log4j.rootLogger=INFO, CATALINA

# Define all the appenders
log4j.appender.CATALINA=org.apache.log4j.DailyRollingFileAppender
log4j.appender.CATALINA.File=/var/log/tomcat7/catalina.out
log4j.appender.CATALINA.Append=true
log4j.appender.CATALINA.Encoding=UTF-8

# Roll-over the log once per day
log4j.appender.CATALINA.DatePattern='.'yyyy-MM-dd-HH-mm'.log'
log4j.appender.CATALINA.layout = org.apache.log4j.PatternLayout
log4j.appender.CATALINA.layout.ConversionPattern =%d{HH:mm:ss} %5p [%t] - %m%n 
```

配置后，我重新启动了 Tomcat，所有内容都写入：

```
/var/log/tomcat7/catalina.out 
```

为了测试我的配置，我将当前日期时间更改为 23:59:59：

```
#ls -l /var/log/tomcat7/
-rw-r--r-- 1 tomcat7 tomcat7 5840  4\. May 00:00 catalina.out 
```

如您所见，它在午夜没有旋转......（？）

重新启动 Tomcat 时，它工作得非常好：

```
#ls -l /var/log/tomcat7/
-rw-r--r-- 1 tomcat7 tomcat7 5840  4\. May 13:37 catalina.out
-rw-r--r-- 1 tomcat7 root    2395  4\. May 00:00 catalina.out.*CURRENTDATE*.log 
```

甚至可以在不重新启动 Tomcat 的情况下旋转我的日志文件吗？

在此先感谢，马利

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-05T19:28:44.290

这个问题有三种解决方案：

1.  将写入 catalina.out 的默认 tomcat 日志外观更改为例如：slf4j，以及使用它和 log4j 带来的所有好处。
2.  配置系统 cron 运行 tomcat 日志文件的 logrotate
3.  将默认日志记录类从 ConsoleAppender 更改为 FileAppender。

解决方案的好处：

1.  非常灵活，因为 slf4j 提供了许多选项，尤其是 log4j，无论如何你都可以使用。
2.  简单，不需要触摸 tomcat 配置。
3.  禁用控制台输出的简单配置更改

缺点：

1.  需要额外的库，影响 tomcat 托管的所有应用程序，需要用 log4j 替换默认配置。
2.  cron+logrotate 仅适用于 linux；在带有调度程序的 Windows 中可能没有那么简单。在 windows 环境中需要额外的脚本。
3.  仅提供带日期的简单备份。无法设置日期模式。不压缩旋转文件。

    第一个问题的解决方案，[在这里](http://www.srccodes.com/p/article/16/configure-simple-logging-facade-for-java-slf4j-with-log4j-as-underlying-logging-framework)
    描述 第二个问题的解决方案在[这里](http://teklimbu.wordpress.com/2007/10/16/managing-your-linuxunix-log-files-using-logrotate/)
    描述 第三个问题的解决方案在[这里描述](https://stackoverflow.com/questions/1146759/catalina-out-rolling-with-tomcat-6-0)

您也可以组合解决方案。例如，使用 crontab 对通过将 catalina.out 更改为其他名称创建的文件进行 gzip 压缩。我还建议离开 tomcat，以便它记录到 catalina.out，并使用 log4j 将您的应用程序配置为不同的文件。这样，来自 tomcat 的非无关紧要的日志不会向您的日志发送垃圾邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T00:32:35.533

> 甚至可以在不重新启动 Tomcat 的情况下旋转我的日志文件吗？

是的，如果你愿意为此工作。

您的 log4j 配置最终只会与 bin/catalina.sh 用于将 stdout 重定向到 logs/catalina.out 的标准 shell 重定向作斗争。您不能简单地使用 log4j 配置来更改 System.out 的行为方式。

如果要轮换 conf/catalina.out，则必须根据启动 Tomcat 的方式采取一些替代措施：

*   如果您使用 jsvc 启动 Tomcat 并且您使用的是 commons-daemon 1.0.4 或更高版本，则可以将 SIGUSR1 发送到 jsvc 进程以重新打开日志文件。这将允许您将现有日志文件移动到另一个文件（只是更改其名称并继续记录到新文件名），然后执行“kill SIGUSR1”：然后将重新打开原始文件名并且新的日志消息将去吧。
*   如果您使用 bin/catalina.sh 启动 Tomcat，您可以对其进行修改，使其不再进行重定向，而是将输出通过管道传输到 Apache httpd 的 rotatelogs 或 chronolog 等滚动记录器进程。

# batch-file - 批处理文件 gpg 命令

> ID：10447870
> 
> 赞同：0
> 
> 时间：2012-05-04T11:24:45.697
> 
> 标签：batch-file, gnupg

我想使用 GnuPG 加密文件。我已经写了一个 .bat 文件来做到这一点。bat文件的内容是这样的

```
gpg --trust-model always --recipient aaa@yyy.com --encrypt File_name 
```

当我要加密的文件在我的本地机器上时，它可以正常工作。但我想要的是加密共享路径上的文件（不复制到我的本地机器）。当我将 File_name 指定为 \\shared_pa​​th\File_name 时，我得到 gpg: file not found 错误。任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:43:09.773

也许 gpg 无法处理 UNC 路径。尝试使用 PUSHD 将您的目录临时更改为 UNC 路径

```
pushd \\shared_path
gpg ...
popd 
```

# objective-c - 应用程序崩溃 - “DiskImageCache：无法解析旧目录的绝对路径。”

> ID：10447871
> 
> 赞同：16
> 
> 时间：2012-05-04T11:24:46.180
> 
> 标签：objective-c, ipad, ios5, ios-simulator

我正在开发一个应用程序，我在其中显示用户在 PDF 文件中输入的数据。PDF 文件也是动态创建的。

这一切都很好。

我已经实现了 QuickLook 框架来显示 pdf 文件。当我调用 QL 框架时，PDF 文件 id 显示得很好，但是当回到调用屏幕时，我的应用程序崩溃了，没有任何崩溃日志或内存警告。

我用下面的代码调用 QL：

```
[[self navigationController] presentModalViewController:qlPreviewer animated:YES]; 
```

创建的日志是

```
DiskImageCache: Could not resolve the absolute path of the old directory.
[Switching to process 3070 thread 0x17603]
[Switching to process 3070 thread 0x15503] 
```

这很有趣.....当我在 Instruments 中运行相同的程序来检查泄漏和内存管理时，我只能在滚动 PDF 文档并查看所有页面时才能发现泄漏。但是，有趣的是，我没有看到任何应用程序崩溃。此外，我确实尝试过使用`ZombieEnabled = YES`和不使用它，但没有使用 Instruments 导致应用程序崩溃。

我对如何解释这一点一无所知，并且一直在尝试不同的方法来解决这个问题。另外，我试过 UIWebView 但结果是一样的。

我再次尝试检查问题并发现了一些有趣的东西。当我直接从 X-Code 执行代码时-如上所述，我遇到了崩溃。

在其他情况下，如果我通过单击 sim 中的应用程序来执行应用程序...不会崩溃

我还没有在设备上检查这个。有人可以确认设备上的崩溃吗？

此外，谷歌没有这个问题的答案。

提前感谢您的回答。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T02:32:00.657

我有完全相同的问题。

作为一种解决方法，您可以禁用或删除“所有异常”断点。这可能会使调试变得更加困难，但它并不像必须一直重新启动应用程序那么糟糕。

![导致问题的断点](../Images/f600fae2a003c1591a984d15c8a830e5.png)

这是导致问题的断点。我很久以前就设置了它，以至于我忘记了它的存在

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-05T20:33:02.477

从设备中删除应用程序帮助我解决了这个问题。也许一开始您也应该尝试“产品>清洁”以确保所有资源都将复制到您的设备。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T03:27:18.727

我能够用这段代码修复我的：

```
FirstViewController.h

NSURLRequest* reqObj;
@property(nonatomic, retain) NSURLRequest* reqObj;

FirstViewController.m

reqObj = [NSURLRequest requestWithUrl:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60.0];

NSURLConnection* conn = [[NSURLConnection alloc] initWithRequest:reqObj delegate:self]; 
```

然后我没有在这一行之后将其加载到我的视图中，而是等待`connectionDidFinishLoading`然后将其加载到我的视图中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T20:10:21.877

有趣：这也是我的应用程序刚刚开始的。检查泄漏时没有错误，但在 sim 中运行应用程序实际上会导致断点，而不是崩溃。我可以点击继续，应用程序继续运行，没问题。
我的问题也与 PDF 有关，但我只是使用 Web 视图来显示应用程序包中的 PDF。我检查了 dealloc 中的所有内容，一切正常，这可能是 iOS 5.1 的错误。当我了解更多时，我会更新。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T10:58:56.790

当您在代码中删除对象引用但在 xib 中有其引用时，可能会发生这种情况。删除不再需要的插座。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-06T04:12:51.283

@JimP，这不是 iOS 5.1 错误。它也刚刚开始发生在我的应用程序上，在 iOS5.0 上。它似乎只影响超过一页长度的 pdf，并且似乎最常在滚动到文档末尾时触发（尽管有时也更早）。在第二次加载时，它似乎也更频繁地发生。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-29T22:31:24.187

刚刚遇到了在我正在转换为 iOS 8 的应用程序中加载 pdf 文件的问题。自第一台 iPhone 以来，该应用程序一直运行良好。我刚刚删除了 All Exceptions 断点来解决它。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-18T16:15:48.633

I don't know if it's the same problem but I had an issue where switching from a PDF view to another more than three times via the tab bar controller caused a crash.

Turned out that embedding the views I was switching to within Navigation controllers put a stop to the crashing.

# php - cufon 没有正确渲染字体

> ID：10447874
> 
> 赞同：0
> 
> 时间：2012-05-04T11:24:53.730
> 
> 标签：php, html, cufon

我正在使用提供的 psd 设计一个网站。我在 psd 和网站中使用相同的字体（lanenar 字体）（使用 cufon 工具转换），但与 psd 中的字体相比，网站字体非常薄。（成功应用了 Cufon，但结果不一样）字体的大小是一样的，即使我使用的是粗体字体。所以我需要知道这个问题，这样我才能解决它。

这是我的网页设计：[http ://designs.digitaldreamstech.com/motto/index.php/pages/details?albumId=1](http://designs.digitaldreamstech.com/motto/index.php/pages/details?albumId=1)

图片是[http://designs.digitaldreamstech.com/motto/images/Gallery.jpg](http://designs.digitaldreamstech.com/motto/images/Gallery.jpg)

请仅检查菜单，因为我仅在菜单部分应用了 cufon。

这是我所做的

1）使用cufon转换器工具 [http://cufon.shoqolate.com/generate/转换字体](http://cufon.shoqolate.com/generate/)

2）使用cufon-yu.js和生成的字体js文件应用

你认为这是与转换有关的问题吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:53:27.277

请提供更多信息。浏览器等，您正在使用的系统（浏览器中的 mac/ubuntu 抗锯齿字体）等...

顺便说一句，Photoshop 和 Webfonts 并不完全可以比较。即使他们使用相同的 .ttf

# google-app-engine - Google App Engine 上的错误 Python 2.7 - 无法使用 CGI 处理程序启用线程安全

> ID：10447879
> 
> 赞同：22
> 
> 时间：2012-05-04T11:25:20.627
> 
> 标签：google-app-engine, python-2.7

我曾尝试从 Python 2.5 迁移到 Python 2.7，但每次都遇到相同的错误。

我在 Python 2.5 中使用 app.yaml 文件和一个脚本 main.py 做了一个非常简单的测试，它工作正常。脚本只是一个 Hello World 类型来检查一切工作正常。

应用程序.yaml

```
application: sparepartsfinder
version: 1
runtime: python
api_version: 1

handlers:

- url: /blog
  script: main.py

- url: /blog/new_entry
  script: main.py 
```

主文件

```
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class MainPage(webapp.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.out.write('Hello, webapp World!')

application = webapp.WSGIApplication(
                                     [('/', MainPage),
                                      ('/blog', MainPage),
                                      ('/blog/new_entry',MainPage),
                                      ('/blog/archive/.*',MainPage)],
                                     debug=True)

def main():
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

当我更改为 Python 2.7 时，我会按照[Google App Engine](https://developers.google.com/appengine/docs/python/python27/using27#Configuring_the_Application)上的文档对app.yaml 和 main.py 脚本进行更改。

应用程序.yaml

```
application: sparepartsfinder
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:

- url: /blog
  script: main.py

- url: /blog/new_entry
  script: main.py 

- url: /blog/archive/.*
  script: main.py

- url: .*
  script: main.py 
```

主文件

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('Hello prueba!')

app = webapp2.WSGIApplication([('/', MainPage),
                               ('/blog', MainPage),
                               ('/blog/new_entry',MainPage),
                               ('/blog/archive/.*',MainPage)],
                              debug=True) 
```

不幸的是，它在本地或当我尝试将新配置上传到 Google App Engine 时都不起作用。（我总是犯同样的错误）。

我可能会在 Windows XP 上理解我的机器（我同时拥有 Python 2.5 和 2.7）中的问题，但在我上传时却没有。

这是错误：

> 2012-05-04 13:02:07 运行命令：“[u'C:\Python25\python2.5.exe', '-u', 'C:\Archivos >de programa\Google\google_appengine\appcfg.py ', '--no_cookies', u'--email=salvador.sanjuan@gmail.com', '--passin', 'update', 'C:\Documents and Settings\SSanjuan\Mis documentos\Dropbox\Dropbox\ Python\SpareParts']" 解析 yaml 文件时出错：对象无效：无法使用 CGI 处理程序启用线程安全：“C:\Documents and Settings\SSanjuan\Mis documentos\Dropbox\Dropbox\Python\SpareParts\app.yaml 中的 main.py "，第 27 行，第 1 列 2012-05-04 13:02:31（进程退出，代码 1）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-04T11:35:47.350

在您的 app.yaml 中使用`main.application`而不是。`main.py`您需要前者才能设置`threadsafe`为`true`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-25T18:45:05.493

我也遇到了同样的问题，这是答案。

对于 Python 2.5 运行时，您正在指定文件的路径——即脚本：myfolder/myfile.py。

对于 Python 2.7 运行时，您正在指定一个对象。因此假设 myfile.py 包含一个适当的 WSGI 对象“app”，它被指定为脚本：myfolder.myfile.app。

# plugins - 使用 TemplateRenderer 的 Jira-Servlet-Plugin

> ID：10447882
> 
> 赞同：2
> 
> 时间：2012-05-04T11:25:31.950
> 
> 标签：plugins, jira, velocity, jira-plugin

我正在尝试开发一个简单的 HTTP-Servlet 来呈现速度模板。

我的小服务程序：

```
Map<String, Object> context = Maps.newHashMap();
resp.setContentType("text/html;charset=utf-8");
templateRenderer.render("/templates/test/input.vm", context, httpRespnse.getWriter()); 
```

atlassian-plugin.xml

```
<webwork1 key="newactions1" name="New actions1" class="java.lang.Object">
    <actions>
        <action name="test.ActionAlpha" alias="FirstNewAction">
            <view name="success">/templates/test/input.vm</view>
            <view name="error">/templates/test/input.vm</view>
            <view name="input">/templates/test/input.vm</view>
        </action>
    </actions>
</webwork1> 
```

（见：[https](https://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Internationalising+Your+Plugin) ://developer.atlassian.com/display/JIRADEV/Plugin+Tutorial+-+Internationalising+Your+Plugin ）

到目前为止一切正常，但是在呈现页面后，左侧的菜单栏丢失了（网络部分中的其他菜单网站）

如果我在浏览器中手动调用 URL，操作名称后面带有“！default”，则会显示侧边栏。

```
http://host:port/jira/secure/FirstNewAction!default.jspa 
```

但是，如果我在没有“！默认”的情况下调用 URL，则输出与 servlet 产生的相同。TemplateRenderer 是否有可能添加“！默认”术语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:02:32.877

我猜

```
Map<String, Object> context = Maps.newHashMap();
templateRenderer.render("/templates/test/input.vm", context, httpRespnse.getWriter()); 
```

将空映射传递给渲染方法，如果省略 context 参数，则应传递包含 webResources 的默认上下文。另一个想法是添加类似

```
meta name="decorator" content="atl.admin" 
```

到头部部分

# objective-c - Dateformatter 更改我日期的年份

> ID：10447883
> 
> 赞同：6
> 
> 时间：2012-05-04T11:25:42.280
> 
> 标签：objective-c, ios, date, nsdateformatter

我尝试使用 dateformatter 显示日期，但这个更改日期的年份。

这是方法：

```
setLabelWithDate:(NSdate *)date{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    [dateFormatter setTimeZone:gmt];    
    [dateFormatter setDateFormat:@"dd MMMM YYYY"];

    NSLog(@"Date : %@",date);
    NSLog(@"stringFromDate %@",[dateFormatter stringFromDate:date]);

    self.selectedDateLabel.text = [dateFormatter stringFromDate:date];
    [dateFormatter release];
} 
```

这就是控制台中显示的内容：

```
2012-05-04 13:08:50.442 MyAppli[3339:fb03] Date : 2012-12-30 00:00:00 +0000
2012-05-04 13:08:50.443 MyAppli[3339:fb03] stringFromDate 30 December 2013 
```

我在这里。dateFormatter 将 myDate 添加一年，我真的不知道为什么。这种情况仅发生在一年中的最后两个日期（12 月 30 日和 31 日）。

谢谢你的帮助。

亚历山大

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T11:45:45.193

采用

```
[dateFormatter setDateFormat:@"dd MMMM yyyy"]; // lowercase y 
```

你可能应该检查[this](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)和[this](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/)。

# javascript - 在服务器上，不渲染玩家移动

> ID：10447885
> 
> 赞同：0
> 
> 时间：2012-05-04T11:25:45.010
> 
> 标签：javascript, jquery

这段代码渲染了玩家的动作，改变了画面。在本地，它在服务器上工作正常，更改图片不可见。但是，如果您取消注释警报（“right1”）；和警报（“right2”）；将被视为图像变化。怎么让服务器也看到图片变了？

```
var timer;
function GoRight(toPosition, level, mines) {
    clearInterval(timer);

    var left = $("#man").position().left;
    var top = $("#man").position().top;

    $("#man").attr('style', 'position:absolute;display:block;left:' + left + 'px;top:' + top + 'px;')
    $("#man").attr("class", "");

    var tempi = 0;
    timer = setInterval(
        function () {
            if (left >= toPosition) {
                left = toPosition;
                $("#man").attr('style', 'position:absolute;display:block;left:' + left + 'px;top:' + top + 'px;')
                clearInterval(timer);
                $("#man").attr('src', '/content/games/kamikaze2/right0.gif');

                return;
            }
            tempi += 8;
            left += 8;
            $("#man").attr('style', 'position:absolute;display:block;left:' + left + 'px;top:' + top + 'px;')

            if (tempi % 16 == 0) {
             //  alert("right1");
                $("#man").attr('src', '/content/games/kamikaze2/right1.gif');
            }
            else {
             //   alert("right2");
                $("#man").attr('src', '/content/games/kamikaze2/right2.gif');
            }
        }, 70);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:55:59.840

这就像一个惊喜，但它在 if else 之后帮助了我一行

```
$("#man").attr('src'); 
```

但它有效

# c# - 对话框出现然后消失

> ID：10447890
> 
> 赞同：0
> 
> 时间：2012-05-04T11:25:54.200
> 
> 标签：c#, javascript, jquery, asp.net

当我单击按钮对话框时，它会出现和消失，我厌倦了使用不同的插件和数百个教程，但不知道为什么事情不能正常工作，可能是因为我正在使用 ASP.Net 页面及其从母版页继承

这是代码，

```
 <asp:Content ID="Content4" ContentPlaceHolderID="cphSubmit" runat="server">
<div id="question" style="display:none; cursor: default"> 
        <h1>Would you like to contine?.</h1> 
        <input type="button" id="yes" value="Yes" /> 
        <input type="button" id="no" value="No" /> 
</div> 
   <input id="test" type="submit" value="Show Dialog" /> 
    <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>
    <script type="text/javascript" src="/_layouts/1033/ui.core.js"></script>
    <script type="text/javascript" src="/_layouts/1033/jquery-ui-1.7.3.custom.js

"></script>
    <script type="text/javascript" src="JS.js"></script>
    <script type="text/javascript">
         $(document).ready(function() { 

        $('#test').click(function() { 
            $.blockUI({ message: $('#question'), css: { width: '275px' } }); 
    }); 

    $('#yes').click(function() { 
        // update the block message 
        $.blockUI({ message: "<h1>Remote call in progress...</h1>" }); 

        $.ajax({ 
            url: 'wait.php', 
            cache: false, 
            complete: function() { 
                // unblock when remote call returns 
                $.unblockUI(); 
            } 
        }); 
    }); 

    $('#no').click(function() { 
        $.unblockUI(); 
        return false; 
    }); 

}); 
</script>

<hr />
</asp:Content> 
```

它是我从这里下载的一个 jquery 插件，

[我正在使用的 Jquery 插件](http://jquery.malsup.com/block/#dialog)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:36:30.310

因为你正在使用

```
<input id="test" type="submit" value="Show Dialog" /> 
```

由于哪个对话框消失而导致回发尝试

```
<input id="test" type="button" value="Show Dialog" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:25:14.607

试试这个代码，我希望它能工作：

```
 $('#your form name').submit(function() { 
       $.blockUI({ message: $('#question'), css: { width: '275px' } });   
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:29:24.200

你的按钮`#test`是一个提交按钮，如果你想看到消息，它需要阻止提交到表单

尝试

```
$('#test').click(function(e) {
    e.preventDefault();
    $.blockUI({ message: $('#question'), css: { width: '275px' } }); 
}); 
```

# ruby-on-rails - Heroku/postgresql 搜索

> ID：10447893
> 
> 赞同：1
> 
> 时间：2012-05-04T11:25:56.803
> 
> 标签：ruby-on-rails, postgresql, heroku

我有一个数据库，其中包含使用各种不同字符的城市名称，从 åäö 到越南标志。地名都是大写的，例如“New York”和“Aix En Provence”。

我现在的问题是尝试在使用 postgresql 的 Heroku 中搜索这些城市名称。

```
p = Place.where("upper(name) LIKE '%" + place_name_searched.to_s.upcase.tr('åäöüñï','ÅÄÖÜÑÏ') + "%'").first 
```

这是我想出的最好的方法，但它只是对 åäö 等的修复，并没有捕捉到所有 100 多个不同的字符，例如“é”。解决方案是不再填写该字符串。

一个普遍的问题是 upper(name) 似乎可以很好地翻译所有内容，但 upcase 只能处理英文字母。所以相应的搜索将是 .where("TÄBY like 'TäBY') if place_name_searched = 'täby'。

那么，如何将诸如“Täby”和“Jidd Ḩafş”之类的 postgresql 条目与用户输入的小写字符串（“täby”、“jidd hafs”）相匹配？

在我的应用程序的 Mysql 版本中一切正常，但是一旦我上传到 Heroku，一切都会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:11:57.363

Postgres 有一个名为“ILIKE”的扩展，用于不区分大小写的模式匹配。

```
p = Place.where("upper(name) ILIKE '%" + place_name_searched.to_s.upcase.tr('åäöüñï','ÅÄÖÜÑÏ') + "%'").first 
```

但请注意，这只适用于 Postgres，因此您需要检查您正在运行的环境，以决定是否使用这个环境而不是常规环境。

# java - 制作基于 CLI 的 Java 计算器

> ID：10447895
> 
> 赞同：-4
> 
> 时间：2012-05-04T11:25:59.127
> 
> 标签：java, command-line-interface, calculator

我想做一个简单的计算器，但我不知道如何像真正的计算器一样输入许多操作。

```
switch (choice)
        {
            case 1:
                System.out.println("Please enter 2 numbers only: " );
                x = input.nextInt();
                y = input.nextInt();
                sum = calc.add(x,y);
                System.out.printf("The sum is %d\n\n",sum);
                out.write(x + "+" + y + "=" + sum);
                break;       
            case 2:
              ...
            case 3:
            ...
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:29:55.990

没有问题，但我有一些建议。

我会

*   根据操作“+”而不是 1 创建 case 语句。
*   使消息与操作匹配。例如`write(x + "*" + y`乘法时。也不要把它们都称为“总和”
*   确保我在最后阅读了 nextLine()。
*   在每一行之后写一个新行。
*   `default:`当用户输入未知操作时添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:25:43.390

使用[`ScriptEngine`](http://download.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html). EG[在这里](https://stackoverflow.com/questions/7441625/how-to-find-a-button-source-in-awt-calculator-homework/7441804#7441804)。

![](../Images/e676b97e956b24c465079a239f5837f3.png)=![](../Images/b095ad42f9afb26357ecf37308a19417.png)

它有一个 GUI（显然），但您可以简单地允许用户输入 JS 可以处理的任何公式。这是我网站上的另一个[示例](http://pscode.org/jse.html)，它允许通过文本字段输入公式。

# c++ - 有没有一种简洁的方法可以将文本输出到调试窗格？

> ID：10447899
> 
> 赞同：2
> 
> 时间：2012-05-04T11:26:12.140
> 
> 标签：c++, debugging, macros, console

我想在调试时显示一些日志消息。一种选择是使用非常丑陋的

```
#ifdef DEBUG
    std::cout << "I'm in debug mode!\n";
#endif 
```

在[JUCE](http://www.rawmaterialsoftware.com/juce.php)库中，有一个很好的宏，可以将文本输出到调试窗格

```
DBG("I'm in debug mode!") 
```

juce 解决方案还允许您执行以下操作

```
int x = 4;
DBG(String("x=") + String(x)) 
```

我想知道 std:: 或 boost:: 中是否存在类似的简洁方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:27:13.667

为什么不自己写：

```
#ifdef DEBUG
#define DBG(x) std::cout << x;
#else
#define DBG(x)
#endif 
```

对于命名空间

```
namespace DBG
{
inline void DBG(const char* x)
{
#ifdef DEBUG
    std::cout << x;
#endif
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:43:22.513

如果你想要类似 printf 的东西，你应该使用一些其他的宏：

```
void DebugPrintLn(const char* format, ...);
inline void Nothing(...) {}

#ifdef DEBUG
#define DBG DebugPrintLn
#else
#define DBG Nothing // Or __noop on Visual C++
#endif 
```

Using`Nothing`是可移植的，但仍然计算参数（__noop 保证*不会*计算任何参数，特定于 VC++）。如果您可以使用宏变量参数更好（在 GCC 和最新的 VC++ 上都可用）：您甚至可以以可移植的方式跳过任何参数计算：

```
#ifdef DEBUG
#define DBG(...) DebugPrintLn(__VAR_ARGS__)
#else
#define DBG(...) ((void)0)
#endif 
```

在任何情况下，您都以相同的方式使用它：

```
DBG("Lucky day: %s %i", "Friday", 13); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:35:48.483

我还编写了自己的便携式 TRACE 宏。我在这里分享：

```
#ifdef ENABLE_TRACE
#  ifdef _MSC_VER
#    include <windows.h>
#    include <sstream>
#    define TRACE(x)                           \
     do {  std::stringstream s;  s << (x);     \
           OutputDebugString(s.str().c_str()); \
        } while(0)
#  else
#    include <iostream>
#    define TRACE(x)  std::clog << (x)
#  endif        // or std::cerr << (x) << std::flush
#else
#  define TRACE(x)
#endif 
```

例子：

```
#define ENABLE_TRACE  //can depend on _DEBUG or NDEBUG macros
#include "my_above_trace_header.h"

int main (void)
{
   int     v1 = 123;
   double  v2 = 456.789;
   TRACE ("main() v1="<< v1 <<" v2="<< v2 <<'\n');
} 
```

欢迎任何改进/建议/贡献;-)

# authentication - github - 在推/拉时询问用户名并通过

> ID：10447900
> 
> 赞同：2
> 
> 时间：2012-05-04T11:26:19.783
> 
> 标签：authentication, github, push, pull

我有这个问题，我每次推或拉时都必须把它放进去。我认为这是新的。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:39:40.790

您可能正在使用 https 网址。切换到 ssh 并确保您的密钥设置正确（如果您的密码为空），您不必输入用户名和密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:34:10.753

你以前有过这个问题吗？这很可能意味着您的公钥设置有问题。确保在生成公钥时不要设置密码短语。另外，请确保您首先尝试使用以下方式登录 GitHub

```
ssh -T git@github.com 
```

这应该在没有任何密码的情况下工作。如果没有，请再次检查您正在使用的操作系统的设置说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T23:48:19.107

Switch from `https`to `ssh`- 来自 GitHub 帮助文档的说明在[此处](https://help.github.com/articles/why-is-git-always-asking-for-my-password)。

# android - 将值设置为 TextView 时出现空指针异常

> ID：10447901
> 
> 赞同：-2
> 
> 时间：2012-05-04T11:26:30.080
> 
> 标签：android

```
TextView t =(TextView)findViewById(R.id.place); 
t.setText("A"); 
```

我在方法内部调用上面的代码`onCreate()`。我的活动是一个 ListActivity。但是为什么这给了我以下错误

```
05-04 14:21:40.840: E/AndroidRuntime(16168): Caused by: java.lang.NullPointerException 
```

这是我定义 TextView 的 XML

```
<TextView android:id="@+id/place"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textSize="16sp"
            android:textStyle="bold" 
            android:focusable="false"
            android:text=""
            android:layout_gravity="left"/> 
```

以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:29:40.330

```
public class yourclass extends Activity{
    TextView t;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.patient);
            t =(TextView)findViewById(R.id.place); 
            t.setText("A");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:37:19.517

嘿，我猜您没有为列表视图设置正确的布局。

在 ListActivity 的 onCreate 中设置一个布局，有点像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/gradient_unselected"
android:orientation="vertical" >
<ListView
    android:id="@+id/blacklist_view"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:divider="@drawable/seperator"
    android:dividerHeight="1dp" >
</ListView>

</LinearLayout> 
```

并且行项目布局应该不同。

# sml - SML 中的类型推断

> ID：10447902
> 
> 赞同：1
> 
> 时间：2012-05-04T11:26:30.240
> 
> 标签：sml

我目前正在学习 SML，我有一个关于我没有名字的问题。我们暂时称它为“类型别名”。假设我有以下数据类型定义：

```
datatype 'a stack = Stack of 'a list; 
```

我现在想添加一个显式的“空堆栈”类型。我可以通过将它添加到数据类型来做到这一点：

```
datatype 'a stack = emptystack | Stack of 'a list; 
```

现在我可以模式匹配像“push”这样的函数：

```
fun push (emptystack) (e:'a) = Stack([e])
  | push (Stack(list):'a stack) (e:'a) = Stack(e::list); 
```

这里的问题是`Stack([])`并且`emptystack`是不同的，但我希望它们是相同的。所以每次 SML 遇到一个`Stack([])`它应该“知道”这是`emptystack`（在推送的情况下它应该使用空堆栈匹配）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:43:21.090

这种混叠在 SML 中是不可能的。

相反，如果这是您想要的，您应该将您的数据类型设计为在其表示中明确。

您可能更适合类似于更多定义的`'a list`东西：

```
datatype 'a stack = EmptyStack | Stack of 'a * 'a stack; 
```

这样做的缺点是不允许您在其上使用列表函数，但您确实得到了一个显式的空堆栈构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:47:47.263

简短的回答是：不，这是不可能的。

您可以使用代码创建类型别名

```
type number = int

val foo : number -> int -> number =
 fn a => fn b => a+b

val x : int = foo 1 3;
val y : number = foo 1 3; 
```

但是，顾名思义，它只适用于类型。您的问题适用于没有语法的值构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:58:20.367

由于您想要一个值`emptystack`与另一个值同义`Stack []`，因此您可以将要查找的内容称为“值别名”。与内置运算符`=`或模式匹配进行比较的值不允许使用别名。

您可以通过创建自己的相等运算符来实现这一点，但您将失去使用内置的能力`=`（因为标准 ML 不支持自定义运算符重载）以及在您的类型的值构造函数上进行模式匹配的能力。

或者，您可以为您的类型构造一个范式并始终比较范式。只要实际可行，请遵循 Sebastian 的明确建议。在某些情况下，明确的代数类型将比允许以不同方式表示相同值的简单代数类型复杂得多。

# javascript - 检查哪些标志是整数的开/关？

> ID：10447911
> 
> 赞同：3
> 
> 时间：2012-05-04T11:26:56.663
> 
> 标签：javascript, jquery

首先对不起我的英语。假设我有，

```
0 // 0
1 // 1
2 // 10
3 // 11
4 // 100
5 // 101
6 // 110
7...................... 
```

现在，我可以说 5 有两个（第 3 和第 1）ON 标志。类似地，7 具有三个（第 1、第 2 和第 3）ON 标志，依此类推。

现在，假设我有一个输入 2 和 flag1、flag2、...... flagn。我需要以编程方式找到只有 flag2 为 ON。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:29:06.507

你不能，因为你已经可以在二进制表示中看到。A 3 可以是 3 或 2+1。所以使用二的幂：

```
0 // 0000
1 // 0001
2 // 0010
4 // 0100
8 // 1000 
```

然后在检查 的值时`5 (0101)`，您会看到 1 和 4 的位已设置，因此您知道启用了哪些标志。

我不知道确切的 JavaScript 语法，但可以这样做：

```
FLAG_1 = 1
FLAG_2 = 2
FLAG_3 = 4
FLAG_4 = 8
FLAG_5 = 16

var foo = FLAG_2 | FLAG_5; // Use binary OR (|) to add flags

if (foo & FLAG_5)
{
    // Do something that has to be done when FLAG_5 is set
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T11:34:11.183

这可以通过[JavaScript 位运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)，`&`特别是运算符来完成。如果输入数字是，`2`那么您可以检查设置了哪些标志，如下所示：

```
console.log(2 & 1); // 1 = 00000001b, result = 0
console.log(2 & 2); // 2 = 00000010b, result = 2, bingo!
console.log(2 & 4); // 4 = 00000100b, result = 0
console.log(2 & 8); // 8 = 00001000b, result = 0 
```

该运算符的行为描述如下：

> 按位与
> 
> 在两个操作数的对应位都是 1 的每个位位置返回一个 1。

# 编辑

上面的例子可以写成这样的循环：

```
var input = 7;
for(var bit = 0; bit < 8; bit++) {
    var mask = Math.pow(2, bit);
    console.log("bit #" + bit + " is", (input & mask) == mask ? "set" : "clear");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:34:30.503

您可以使用带有标志位置的 & 运算符检查标志是否打开（0-indexed）

```
if (num & (1 << flagPosition)) { /*flag is on */}
else { /*flag is off */} 
```

您可以检查是否只有一个标志在使用 & 与这种形式的数字 2^N - 1 （其中 N 是最大标志数 + 1）

```
var N = (1 << 31) - 1;
if (N & num == 1 << flagPosition)  {/* only flagPosition is ON*/}
else { /*flagPosition is OFF or there are other ON flags*/} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:35:30.020

```
num = 6
arr = new Array();
while(num!=0){
   arr.push(num%2);
   num = parseInt(num/2);
}
console.log(arr) 
```

Arr 将具有位 1 和 0，您可以从中找到 ON

# c - 为什么 getch() 在 C 中抛出错误

> ID：10447912
> 
> 赞同：1
> 
> 时间：2012-05-04T11:26:56.857
> 
> 标签：c, keyboard, codeblocks, arrow-keys

我在 Windows XP 中的 Code :: Blocks 中运行 C 程序。我收到一个错误

```
"drawing operation is attempeted when there was no current window" 
```

什么可能导致这种情况，我该如何解决？我的代码如下：

```
#include <stdio.h>
#include <conio.h>
static int get_code(void);
// System dependent key codes
enum
{
    KEY_ESC     = 27,
    ARROW_UP    = 256 + 72,
    ARROW_DOWN  = 256 + 80,
    ARROW_LEFT  = 256 + 75,
    ARROW_RIGHT = 256 + 77
};
int main(void)
{
    int ch;
    puts("Press arrow keys, escape key + enter to exit:");
    while (( ch = get_code()) != KEY_ESC )
    {
        switch (ch)
        {
        case ARROW_UP:
            printf("UP\n");
            break;
        case ARROW_DOWN:
            printf("DOWN\n");
            break;
        case ARROW_LEFT:
            printf("LEFT\n");
            break;
        case ARROW_RIGHT:
            printf("RIGHT\n");
            break;
        }
    }
    getchar();   // wait
    return 0;
}
static int get_code(void)
{
    int ch = getch();    // Error happens here
    if (ch == 0 || ch == 224)
        ch = 256 + getch();
    return ch;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:47:17.823

α来自`getche()`输入，它提示用户输入，当用户按下一个键然后输入它会在标准输出“屏幕”上回显该键，因为箭头是不可打印的键，所以你可以做类似的事情像这样：

```
switch (ch)
        {
        case ARROW_UP:
            printf("\bUP\n");
            break;
        case ARROW_DOWN:
            printf("\bDOWN\n");
            break;
        case ARROW_LEFT:
            printf("\bLEFT\n");
            break;
        case ARROW_RIGHT:
            printf("\bRIGHT\n");
            break;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:35:31.423

[实际上 conio.h 不是 Code :: Blocks http://en.wikipedia.org/wiki/C_standard_library](http://en.wikipedia.org/wiki/C_standard_library)中不支持的标准头文件

getch() 定义仅在 conio.h 中找到，因此它显示错误 try scanf to get user input。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:55:57.587

Code::Blocks(MinGW) 没有 conio.h 头文件。所以你不能使用 getch() 函数。

# jquery - 来自 URL 的 jQuery 模态对话框，不使用 .load({modal:true})

> ID：10447913
> 
> 赞同：0
> 
> 时间：2012-05-04T11:26:57.137
> 
> 标签：jquery, url, dialog, include, modal-dialog

快速：请建议在模式对话框中加载 URL 的最佳方法，其中要加载的 URL 未导入调用页面的 DIV。

更多细节：我有一个带有 jQ​​uery 数据表的 HTML 页面。双击一行时，我想从 URL 加载模式对话框。我通常将 jQuery UI 对话框用于我的对话框窗口。我看到的解决方案是在我的页面中添加一个 DIV，比如说`<div id="divPopup">`，然后在 dblclick 上加载这样的对话框： $("#divPopup").load("my_url.html").dialog({modal ：真的}）;

这在我的情况下提出了一些问题 - 本质上它是将页面直接导入 DIV，并且一些 javascript 包含错误 - 规范，谷歌位置服务之一。jQuery 文档引用了与 Ajax 加载调用相同的来源策略。是的，我可以在父页面中包含 Google 位置链接，但从设计的角度来看，我不喜欢这个想法，并且它使对话框无法单独使用。还有其他问题 - 加载页面足够复杂，无需向其中导入更多 HTML/脚本，从设计的角度来看，对话框可能需要包含父页面已经包含的某些 javascript 文件等。

我宁愿将窗口加载为未导入页面的新模式窗口。我对 jQuery 比较陌生。以前我使用模态 HTML 对话框，但我不确定它们是最佳解决方案/跨浏览器友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:30:02.827

您可以将所需的 div 添加到 iframe 中。

# haskell - Haskell 内部的 IO 实现

> ID：10447914
> 
> 赞同：3
> 
> 时间：2012-05-04T11:26:59.203
> 
> 标签：haskell, io, semantics

我知道事实上，我们不能独立实现 IO monad，但我不知道究竟是为什么。这段代码是尝试使用函数式语言实现命令式范式。你能解释一下这个例子和真正的 IO 之间的区别吗？看起来函数 main 实现了正确的操作顺序并且保持惰性。

```
import System.IO.Unsafe   

data Io a = Io a 

runIO :: Io a -> a
runIO (Io a) = a

instance Monad Io where  
 return x = Io x
 Io a >>= f = f a

-- internal side effect function 
output :: Show a => a -> Io () 
output s  = return $! unsafePerformIO $ print s

----------------------------------------------------------------

mainIO :: Io ()                             
mainIO = do output "A"  
            b <- return "B"
            output b     
            output b 
            x <- return (undefined :: String)
            return undefined
            output "C"    
            head [output "C", output "C"]
            output x  
            output "D"

test = runIO mainIO 
```

输出：

```
"A"
"B"
"B"
"C"
"C"
<interactive>: Prelude.undefined 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T11:47:16.920

我不确定你想展示什么。您已经`IO`在 Haskell 中嵌入了编码，使用现有的实现`IO`作为目标。

关键是您使用`unsafePerformIO` 和`print`--- 您从其他 IO 系统借用的原语。

考虑一下：如果您没有任何其他可依赖的 IO 系统会怎样。所以没有`print`或以其他方式调用原始 IO 函数。你将如何实现 IO？

因此，虽然您可以在 Haskell 中以多种方式实现 IO 抽象，但您总是不得不依靠新的运行时原语函数来实际调用操作系统来执行真正的 IO。那是不能在 Haskell 本机中实现的位。

* * *

作为参考，请参阅 Wouter Swierstra 的博士论文[“效果的功能规范”](https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.722.8440&rep=rep1&type=pdf)，它概述了在 Haskell 中对 IO 和其他效果进行编码的各种方式，并将 IO 规范定义为纯功能数据类型（种类扩展你所做的事情）。

![在此处输入图像描述](../Images/608fade7f23d0ca8e7ee11a6351623e5.png)

# android - Andengine Box2D物理体在增加重量时不旋转

> ID：10447916
> 
> 赞同：1
> 
> 时间：2012-05-04T11:27:05.443
> 
> 标签：android, box2d, andengine, game-physics

Andengine Box2D物理体在增加重量时不会旋转，否则它会完美旋转。我正在制作一个玩家可以投掷炸弹的游戏，当玩家用bombsBody的自然重量投掷炸弹时它会完美旋转，但是当我增加炸弹的重量时炸弹不旋转。我卡在这里..请帮助。谢谢你。

```
if (bomb)           
{
    mScene.detachChild(target);
    target = null;      
    bombFire = new Sprite(mBall2.getX()+mBall2.getWidth()/2,mBall2.getY(),bombFireRegion);
    mScene.attachChild(bombFire);
    bombBody = PhysicsFactory.createCircleBody(mPhysicsWorld, bombFire,BodyType.DynamicBody, bombFixDef);
    bombBody.setMassData(bombMass);
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(bombFire, bombBody, true, true));               
    Vector2 v = new Vector2((xpt-mBall2.getX()),(ypt-mBall2.getY()));
    bombBody.applyLinearImpulse(v,bombBody.getWorldCenter());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:21:13.533

更改现有主体的质量最好通过缩放该主体的现有质量数据来完成。这将质心保持在正确的位置，并确保质量和转动惯量正确匹配。

```
b2MassData massData;
body->GetMassData(&massData);

float scaleFactor = desiredMass / massData.mass;
massData.mass *= scaleFactor;
massData.I *= scaleFactor;

body->SetMassData(&massData); 
```

需要注意的一件事是，这不会影响车身上固定装置的密度。如果您在此之后从车身添加或删除任何夹具，质量数据将根据夹具重新计算，而不是从您的质量数据中重新计算。因此，您必须在更换固定装置后再次执行此操作以恢复您想要的质量。

# android - 数据未插入到预建数据库中

> ID：10447920
> 
> 赞同：2
> 
> 时间：2012-05-04T11:27:17.167
> 
> 标签：android, sqlite

[这是我的项目](http://www.mediafire.com/?ffo1tfas72ygna9)

在这里，我想在我的数据库中插入一些东西。我也[将此链接](https://stackoverflow.com/questions/8700262/how-to-insert-data-into-the-database-file-which-is-in-the-assets-folder) 用作参考，但徒劳无功。

但这是我的错误日志。

```
05-04 16:53:20.272: E/AndroidRuntime(18378): FATAL EXCEPTION: main
05-04 16:53:20.272: E/AndroidRuntime(18378): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.crews.databaseproto.activity/com.crews.databaseproto.activity.DatabaseProtoActivity}: java.lang.IllegalStateException: database not open
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)  
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.os.Looper.loop(Looper.java:130)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at java.lang.reflect.Method.invokeNative(Native Method)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at java.lang.reflect.Method.invoke(Method.java:507)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at dalvik.system.NativeStart.main(Native Method)
05-04 16:53:20.272: E/AndroidRuntime(18378): Caused by: java.lang.IllegalStateException: database not open
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.database.sqlite.SQLiteDatabase.endTransaction(SQLiteDatabase.java:555)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at com.crews.databaseproto.activity.DataBaseHelper.insertData(DataBaseHelper.java:153)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at com.crews.databaseproto.activity.DatabaseProtoActivity.onCreate(DatabaseProtoActivity.java:37)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-04 16:53:20.272: E/AndroidRuntime(18378):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-04 16:53:20.272: E/AndroidRuntime(18378):    ... 11 more 
```

提前致谢。抱歉链接错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:08:46.133

打开数据库如下

```
 SqliteDatabase db=myDbHelper.getWritableDatabase();
 ContentValues cv=new ContentValues();
 cv.put(COLUMN_NAME,10);
 cv.put(COLUMN_NAME,"Kaushik");
 cv.put(COLUMN_NAME,"dhor sala");
 cv.put(COLUMN_NAME,22.332322332);
 cv.put(COLUMN_NAME,88.2323232);
 float row id=db.insert(TABLE_NAME,null,cv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:13:26.550

```
public synchronized SQLiteDatabase getWritableDatabase() 
```

无需覆盖此功能。只需使用内置的。

还，

```
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE); 
```

更改您打开要写入的数据库的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:32:47.283

数据已插入，但由于 DeptId 是主键，因此在表 Dept 中插入重复数据时出错。

```
 05-05 00:01:09.783: E/Database(1011):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1562) 
```

# haskell - 删除列表列表中给定元素的出现

> ID：10447924
> 
> 赞同：3
> 
> 时间：2012-05-04T11:27:42.137
> 
> 标签：haskell

我有这个函数可以删除列表列表中给定元素的出现。

```
remove          :: Eq a => a -> [[a]] -> [[a]]
remove    y []  = error "Can't remove an element from an empty list"
remove    y xs  = map (filter(/=y)) xs 
```

我如何能够使用列表理解做同样的事情

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:37:55.533

对于每个`l`in `xs`，添加`filter (/= xs) l`到结果列表中：

```
remove y xs = [filter (/= y) l | l <- xs] 
```

或者，通过嵌套理解删除过滤器。对于 each `xs`in`xss`和 for each `x`in `xs`，`x`仅当它不同于 时才保留`y`：

```
remove y xss = [ [x| x <- xs, x /= y] | xs <- xss] 
```

如果你只是在练习也没关系，但你的版本`map`要好得多:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:32:25.650

我猜大概是这样的：

```
 remove y ls = [f|l <- ls, let f = filter (/= y) l] 
```

应该没事。

它基本上指出，对于`l`您可以在 list 中进行的每个绑定`ls`，将过滤后的列表添加`f`到结果列表中。

# ember.js - Ember.js - ArrayController 和 CollectionView 之间的区别

> ID：10447926
> 
> 赞同：4
> 
> 时间：2012-05-04T11:27:46.013
> 
> 标签：ember.js, collectionview

ArrayController 和 CollectionView 都具有使用模板呈现“内容”数组的相同功能，只是集合视图具有“追加..”方法可以追加到 DOM 中的任何位置。我对吗？还有其他区别吗？哪个会更有用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T15:34:57.870

ArrayController 只是 Ember.ArrayProxy 的扩展。它提供了一个将数组集作为其内容的接口。它处理向任何观察者发送数组突变通知。它不处理与 DOM 相关的任何事情，并且与事件或视图层完全隔离。

CollectionView 是一个视图（这意味着它操作 DOM 并处理事件），它采用 ArrayController（或任何满足 Ember.Array 期望的东西）并将其内容反映为 Ember.Views。它监听 ArrayController 发出的突变事件，并更新自身以匹配。它通过专门监听 arrayDidChange 消息来工作。如果没有来自其内容的这些消息，它就不会知道创建或销毁其视图。

当您使用 {{#each YourApp.yourArrayController}} 帮助器时，您实际上是在实例化一个 Ember.CollectionView，它将控制器作为其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:09:46.943

ArrayController is a Controller. CollectionView is a View. That's a pretty fundamental conceptual difference. In theory, ArrayController requires a View to render an array using a template. That's why the View has the append methods and the Controller does not.

# objective-c - uiwebview 在滚动到底部时崩溃

> ID：10447931
> 
> 赞同：0
> 
> 时间：2012-05-04T11:28:02.233
> 
> 标签：objective-c

我有一个显示 pdf 文件的 UIWebView。

滚动到最底部时，应用程序崩溃，就在它“反弹”的时候。

我已经尝试`theWebView.scrollView.bounces=NO`在我的 WebView 的 ViewController 的 viewDidLoad 以及呈现此 ViewController 的控制器中进行设置。

还有其他机构面临类似问题或提出解决方案吗？

# tycho - 如何调试 maven tycho 插件？

> ID：10447933
> 
> 赞同：0
> 
> 时间：2012-05-04T11:28:09.430
> 
> 标签：tycho

我按照[http://wiki.eclipse.org/Developing_Tycho](http://wiki.eclipse.org/Developing_Tycho)中提到的步骤下载了 tycho 源代码。[要调试 eclipse 项目（使用 maven tycho），我按照http://docs.codehaus.org/display/MAVENUSER/Dealing+with+Eclipse-based+IDE](http://docs.codehaus.org/display/MAVENUSER/Dealing+with+Eclipse-based+IDE)中提到的步骤

现在，当我运行 maven build 并启动远程调试应用程序时，它给出的错误如下：

`Failed to connect to remote VM. Connection refused.Connection refused: connect`

如何获取 eclipse-maven 端口号？

还有其他方法可以调试 tycho 吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:20:49.733

solved! execute mvnDebug command from command line so it will halt at breakpoint and then start eclipse remote debug application. It works.. Previously I executed maven debug command from eclipse maven debug configuration which doesnt work.

# c# - 如何在 C# 中使文本在文本框中多次显示？

> ID：10447936
> 
> 赞同：0
> 
> 时间：2012-05-04T11:28:33.590
> 
> 标签：c#, loops, textbox, while-loop, richtextbox

我想在文本框中多次显示某些内容。例如，如果您使用此代码并将richtextbox 替换为messagebox，它将继续显示文本，直到循环结束。我想将textBox1中的文本显示到richTextBox1中，然后让程序按回车键，然后在richtextbox中再次输入。抱歉，这有点令人困惑，但是如果您有任何问题，请发表评论，我会更清楚。这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        Clipboard.SetText(textBox1.Text);

        int text = 0;
        int end = int.Parse(textBox2.Text);
        while (text<=end)
        {
            richTextBox1.Text=(Clipboard.GetText());
            text++;
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:44:07.153

在您的代码中，您有：

```
richTextBox1.Text=(Clipboard.GetText()); 
```

您的代码不起作用的原因是因为在每个循环中，您都将文本设置为剪贴板上的任何内容，因此在循环结束时它只会在那里放置一次。您需要“附加”或添加到文本的末尾，以便它多次出现：

```
richTextBox1.Text += richTextBox1.Text + (Clipboard.GetText()); 
```

或者：

```
richTextBox1.Text += (Clipboard.GetText()); 
```

这会将剪贴板文本添加到 RichTextBox 的末尾，因此您将多次拥有相同的文本，但都在同一行。如果要使文本出现在多行上，则必须在附加文本后添加新行：

```
richTextBox1.Text += (Clipboard.GetText())+"\r\n"; 
```

或者：

```
richTextBox1.Text += (Clipboard.GetText())+Enviroment.NewLine; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:34:05.637

使用 Timer 而不是使用循环，并将其间隔时间保持为 2 秒。并在按钮上单击启动计时器并将结束声明为类变量，当满足“结束”变量的条件时，停止计时器。

```
private void button1_Click(object sender, EventArgs e)
        {
            end = int.Parse( textBox2.Text);
            timer1.Start();

        }
        private int end = 0;
        private int start = 0;
        private void timer1_Tick(object sender, EventArgs e)
        {
            if (start == end)
            {
                timer1.Stop();
            }
            else
            {
                start++;
                textBox1.Text = start.ToString();
            }
        } 
```

# logging - 如何在 Play 中以 DEV 模式设置自定义 log4j 属性文件！框架？

> ID：10447939
> 
> 赞同：1
> 
> 时间：2012-05-04T11:28:40.783
> 
> 标签：logging, configuration, playframework, log4j, playframework-1.x

我有一个带有生产特定日志设置的 log4j.properties：

```
log4j.appender.Rolling.File=${catalina.home}/logs/thelog.log 
```

但这对任何好的本地主机都不起作用。如果在 DEV 模式下没有运气，我尝试设置不同的日志文件：

```
%dev.application.log.path=/log4j_local.properties 
```

如果我在 conf 文件夹中有 log4j.properties 文件，则似乎未应用此应用程序设置。

有没有办法在 PROD 和 DEV 模式下进行不同的日志记录设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:15:44.570

```
%test.application.log.path=/log4j.test.properties 
```

并将内容放入 yourprojectroot/conf/log4j.test.properties

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:55:47.973

启动服务器时可以覆盖记录器配置文件路径，如下所述： [http ://www.playframework.org/documentation/2.0/SettingsLogger](http://www.playframework.org/documentation/2.0/SettingsLogger)

希望能帮助到你。问候，

# javascript - 控制台为同一元素返回不同的高度，即ff和chrome？

> ID：10447942
> 
> 赞同：1
> 
> 时间：2012-05-04T11:28:50.763
> 
> 标签：javascript, jquery

我在元素#inner 上设置了 .outerHeight(true) 但目前它返回高度值

即：304 ff：317 铬：289

谁能解释我可能在哪里出错？

JS

```
var wH = $(window).height(),
    wrapper = $('#wrapper'),
    inner = $('#inner'),
    innerH = inner.outerHeight(true),
    more = inner.find('.more'),
    close = inner.find('.close'),
    titleH = $('#title').outerHeight(true),
    excerpt = $('.excerpt'),
    excerptH = excerpt.outerHeight(true),
    lowerH = $('.lower').outerHeight(true),
    upper = inner.find('.upper'),
    footerH = $('#footer').height()
    body = $('body');

// Set #wrapper off page
wrapper.css('bottom', -innerH);

// Store tier1 calculation as data attribute
wrapper.data('tier1', -innerH+titleH+footerH);
console.log(innerH);
//console.log(-innerH+titleH+footerH);
// Animate #wrapper above #footer
wrapper.delay(500).animate({ bottom: wrapper.data('tier1') }, 400); 
```

CSS

```
body{font-family:Arial,Helvetica,sans-serif;overflow: hidden;}
h1{text-align:center;width:600px;margin:0 auto;padding:20px 0 45px;font-size:28px;font-weight:bold;line-height:26px;}
p{margin-bottom:20px;}

#tiers{background:#f2f2f2;height:100%;}
#wrapper{width:100%;position:absolute;bottom:0;left:0;background:#dedede;}
#inner{width:840px;margin:0 auto;}
.upper{display:none;}
.upper p{margin-bottom:0;}
.col{width:410px;}
.btn{background: #000000;color: #FFFFFF;display: block;font-size: 20px;font-weight: bold;width:30px;height:30px;text-align:center;line-height:30px;position: absolute;text-decoration: none;}
.more{top:20px;right:20px;}
.close{display:none;top:60px;right:20px;}
.excerpt{display: block;} 
```

HTML

```
<body class="tier1">

  <div id="tiers">
      <div id="wrapper">
      <div id="inner" class="clearfix">
          <a href="#" class="close btn">-</a>
          <a href="#" class="more btn">+</a>
          <div class="lower">
            <h1 id="title">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</h1>
            <p class="excerpt">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
              quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
              consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
              cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
              proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
          </div>
          <div class="upper">
            <div class="col left"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
            <div class="col right"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p></div>
          </div>
      </div>
    </div>
  </div>
  <div id="footer"></div>

</body> 
```

页面链接：http: [//bit.ly/IA65Mb](http://bit.ly/IA65Mb)

凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:50:37.930

我能够发现一些差异：

*   `p`有一个 20px`margin-bottom`传播到`#inner`chrome 中。我不记得这个功能的细节，但我想我曾经听说过它实际上是正确的行为。我认为只有铬有它。查看[示例](http://jsfiddle.net/orig/tT5Wh/2/)
*   由于某种原因`#excerpt`，ff 和 chrome 的高度不同 - 文本渲染可能略有不同？

我认为解决第一个问题可以解决您遇到的问题。跨浏览器获得完全相同的结果是一种矫枉过正。

# php - 替换字符串中的随机单词

> ID：10447943
> 
> 赞同：0
> 
> 时间：2012-05-04T11:28:55.217
> 
> 标签：php, string, str-replace

我想创建一个替换字符串中随机单词的函数。这是我的想法。

1.  给定一个字符串，我会在该字符串中给出一个随机索引位置。
2.  从该索引中，我将用我想要的单词替换最近的单词
3.  除此之外，我会将刚刚替换的单词存储到一些存储变量/数据库/文件中

前任。

随机词种子：树、猫、狼、苹果

字符串：敏捷的棕色狐狸跳过懒惰的狗。

可能的结果：

1.  苹果棕狐跳猫懒狗。
2.  懒惰的狗上方的快速棕色狼树。
3.  懒惰苹果上的快树狐狸树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:32:35.927

只需`explode`空格上的字符串，并使用 a`rand()`替换。像：

```
<?php
$string = "The quick brown fox jumps over the lazy dog.";
$aWords = explode($string, " ");
foreach ($aWords as $word)
{
    if(rand(1,2) == 1)
    {
        //replace the word
    }
}
// implode the string
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:31:43.483

最清晰的代码将由

1.  将字符串拆分为数组单词（例如，使用`explode`或`preg_split`用于更繁重的逻辑）
2.  根据需要替换数组中随机选择的条目
3.  `implode`用（例如）将单词重新连接成一个字符串

# android - 带有Construct 2游戏引擎的移动浏览器的声音格式

> ID：10447944
> 
> 赞同：1
> 
> 时间：2012-05-04T11:28:57.333
> 
> 标签：android, ios, audio

我正在一个项目中使用[构建 2 游戏引擎构建游戏](http://www.scirra.com/)。
该游戏适用于移动设备，声音为 ogg 格式，我在 android 2.3（在真实设备上）及其工作（延迟大，但工作）中对其进行了测试。在 iOS 中它不起作用（设备上的 iOS 5.0.1 和模拟器上的 4.3/5.1）。

我在 safari 桌面浏览器中对其进行了测试-> 不工作，但如果我更改为 m4a 格式 -> 它可以工作（不在 iOS 中）

我必须做些什么才能让它在 Android 和 iOS 上都运行。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:57:43.277

要在所有平台上播放音频，每个声音都需要一个 .m4a 文件和一个 .ogg 文件。例如，gunfire.m4a 和 gunfire.ogg。

Construct 2 在导入 WAV 文件时自动编码 .ogg，如果您使用的是 Windows 7，它会自动编码 .m4a。但是，如果您使用的是 Windows XP 或 Vista，它不会为您编码此音频，因为许可问题（它不是免费格式）。不过，您应该能够找到自己的编码器。只需自己对文件进行编码，然后将 .m4a 文件导入到与相应 .ogg 同名的 Construct 2。在 Google 上搜索“AAC 编码器”，您应该很快就能找到一些东西。

# haskell - 具有 Haskell 函数依赖的模糊类型变量

> ID：10447945
> 
> 赞同：3
> 
> 时间：2012-05-04T11:29:01.953
> 
> 标签：haskell, types, typeclass, functional-dependencies

我在玩 Haskell 的 FunctionalDependencies-Extension 以及 MultiParamTypeClasses。我定义了以下内容：

```
class Add a b c | a b -> c where
    (~+) :: a -> b -> c
    (~-) :: a -> b -> c
    neg :: a -> a
    zero :: a 
```

效果很好（我尝试过使用 Int 和 Double 的实例，最终目标是能够在不显式转换的情况下添加 Int 和 Doubles）。

当我尝试为 neg 或 (~-) 定义默认实现时，如下所示：

```
class Add ...
    ...
    neg n = zero ~- n 
```

GHCi (7.0.4) 告诉我以下内容：

```
Ambiguous type variables `a0', `b0', `c0' in the constraint:
  (Add a0 b0 c0) arising from a use of `zero'
Probable fix: add a type signature that fixes these type variable(s)
In the first argument of `(~-)', namely `zero'
In the expression: zero ~- n
In an equation for `neg': neg n = zero ~- n

Ambiguous type variable `a0' in the constraint:
  (Add a0 a a) arising from a use of `~-'
Probable fix: add a type signature that fixes these type variable(s)
In the expression: zero ~- n
In an equation for `neg': neg n = zero ~- n 
```

我想我确实理解这里的问题。GHC 不知道要使用*哪个*零，因为它可以是任何零，产生任何东西，而这些东西又被输入到`~-`我们只知道的 a 中，它有一个`a`正确的论点并产生一个`a`.

那么我如何指定它应该是来自同一个实例的零，即我如何表达如下内容：

```
neg n = (zero :: Add a b c) ~- n 
```

我认为`a`,`b`和`c`here*不是*周围类的 abc ，而是任何 ab 和 c ，那么我该如何表达一个对局部类型变量的引用的类型呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:52:52.593

拉出一个`neg`只`zero`使用一种类型的超类：

```
class Zero a where
    neg :: a -> a
    zero :: a

class Zero a => Add a b c | a b -> c where
    (~+) :: a -> b -> c
    (~-) :: a -> b -> c 
```

关键是您的方式`zero :: Int`可能是from`zero`或*from*，`Add Int Int Int`并且无论您是从默认实现或实例声明还是普通代码中引用它，都无法消除两者之间的歧义。*`zero``Add Int Double Double`*

 *（您可能会反对`zero`from`Add Int Int Int`和`zero`from`Add Int Double Double`将具有相同的值，但编译器无法知道有人不会`Add Int Char Bool`在不同的模块中定义并在`zero`那里给出不同的值。）

通过将类型类一分为二，我们消除了歧义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T11:56:23.097

您不能将`zero`函数表达为`Add`类的一部分。类声明中的所有类型变量都必须在类的每个函数的类型声明中遇到；否则，Haskell 将无法决定使用哪个类型实例，因为它的约束太少。

换句话说，`zero`它不是您正在建模的类的属性。您基本上是在说：“对于任何三种类型`a`, `b`, `c`，该类型必须存在一个零值`a`”，这是没有意义的；你可以选择任何一个`b`and`c`它会解决问题，因此`b`and`c`完全无法使用，所以如果你有 an`Add Int Int Int`或 an `Add Int (Maybe String) Boat`，Haskell 不知道更喜欢哪个实例。您需要将否定和“零性”的属性分成单独的类型类：

```
class Invertible a where
  invert :: a -> a

neg :: Invertible a => a -> a
neg = invert

class Zero a where
  zero :: a

class Add a b c | a b -> c where
  (~+) :: a -> b -> c
  (~-) :: a -> b -> c 
```

我不明白为什么你甚至需要 ; 中的`Invertible`and`Zero`约束`Add`。你总是可以在不知道它们的零值的情况下添加数字，不是吗？为什么要表达`neg`为要求`~+`；有一些数字应该是可加的而不是可以否定的（例如自然数）？只需将类关注点分开即可。*

# c# - 将 ASP.NET 更改为 4.0 是否会使用 CLR 4 运行虚拟目录？

> ID：10447947
> 
> 赞同：1
> 
> 时间：2012-05-04T11:29:10.903
> 
> 标签：c#, asp.net, .net-4.0, iis-6, clr

我们计划将 .NET 4 与我们的一项 Web 服务一起使用，因为它可以更好地处理 ThreadPool。

这让我想到，如果我将运行虚拟目录的 ASP.NET 版本更改为 4.0，我什至不必使用 .NET 4 重新编译我的库，因为 IIS 将使用 .NET CLR 4 生成新的 w3process，而我的所有库都将是装在里面。

这意味着它将在我的 .NET 2 库中使用新的 ThreadPool。有些东西听起来不太对劲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:31:56.050

> 有些东西听起来不正确？

不，是对的。当您将虚拟目录配置为使用 ASP.NET 4 时，即使所有程序集都已针对 .NET 2.0 编译，应用程序也将使用 CLR 4.0 运行。

* * *

更新：

要验证这一点，您可以创建以下`Test.aspx`页面：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System.Threading" %>
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <%= typeof(ThreadPool).Assembly.FullName %>
</body>
</html> 
```

现在编译 ASP.NET 应用程序以 .NET 2.0 为目标，并将其托管到 IIS 6.0 中配置为使用 ASP.NET 4.0 版本的虚拟目录中。当您导航到`Test.aspx`以下输出时，将生成：

```
mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

然后将虚拟目录 ASP.NET 版本交换回 2.0 并生成以下内容：

```
mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

因此，我们可以看到，只需更改虚拟目录中的目标框架版本，我们就可以在 CLR 4.0 中运行应用程序。

# css - 真正大量图像的浏览器处理

> ID：10447950
> 
> 赞同：0
> 
> 时间：2012-05-04T11:29:30.597
> 
> 标签：css, image, memory, browser

有没有人对浏览器如何处理真正的大图像有任何经验/信息。我们正在使用一系列大型 jpeg 来模仿视频（不要问为什么），并且想知道将它们全部组合成一个大型 jpeg 并使用背景定位来推进帧是否有任何问题。如果我们的图像很小，那么这种方法可能是值得的，因为更少的 http 请求和更大的 jpeg 压缩，但是由于图像很大（每个大约 30kb）和很多（700 帧），如果有的话最好知道在浏览器中抛出如此大的图像是否存在任何已知问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T09:01:01.737

[JPEG 的最大图像尺寸为 65535x65535](http://en.wikipedia.org/wiki/JPEG#cite_note-2)，因此您可能必须将帧排列成正方形而不是简单的胶片，而且您可能仍然会用完空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:33:46.760

30Kb 不是那么大，但是如果图像位于远程服务器上，您可能无法将所需的图像数量输出到浏览器，因为图像刷新速度可能不够快。

# php - 如何阻止我的推特代码将撇号输出为'

> ID：10447954
> 
> 赞同：0
> 
> 时间：2012-05-04T11:29:47.163
> 
> 标签：php, xml, twitter

我正在使用以下函数来创建 Twitter 提要。您可以在[nicolaelvin.com](http://nicolaelvin.com)的投资组合页脚中查看结果。我如何摆脱那个 ' 并使它成为撇号？

```
function twitify($str){
                $str = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a href=\"\\2\" target=\"_blank\">\\2</a>", $str);
                $str = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a href=\"http://\\2\" target=\"_blank\">\\2</a>", $str);
                $str = preg_replace("/@(\w+)/", "@<a href=\"http://www.twitter.com/\\1\" target=\"_blank\">\\1</a>", $str);
                $str = preg_replace("/#(\w+)/", "#<a href=\"http://search.twitter.com/search?q=\\1\" target=\"_blank\">\\1</a>", $str);
                return $str;
        }

    function twitter(){

        $twitterRssFeedUrl =  "http://twitter.com/statuses/user_timeline/nicolaElvin.rss";
        $twitterUsername = "nicolaElvin";
        $amountToShow = 5;
        $twitterPosts = false;
        $xml = @simplexml_load_file($twitterRssFeedUrl);
        if(is_object($xml)){
            foreach($xml->channel->item as $twit){
              if(is_array($twitterPosts) && count($twitterPosts)==$amountToShow){
                break;
              }
              $d['title'] = stripslashes(htmlentities($twit->title,ENT_QUOTES,'UTF-8'));
              $description = stripslashes(htmlentities($twit->description,ENT_QUOTES,'UTF-8'));
              if(strtolower(substr($description,0,strlen($twitterUsername))) == strtolower($twitterUsername)){
                $description = substr($description,strlen($twitterUsername)+1);
              }
              $d['description'] = $description;
              $d['pubdate'] = strtotime($twit->pubDate);
              $d['guid'] = stripslashes(htmlentities($twit->guid,ENT_QUOTES,'UTF-8'));
              $d['link'] = stripslashes(htmlentities($twit->link,ENT_QUOTES,'UTF-8'));
              $twitterPosts[]=$d;
            }
        }else{
            die('cannot connect to twitter feed');
        }

        if(is_array($twitterPosts)){

            echo '<ul>';
            foreach($twitterPosts as $post){
                $description=twitify($post['description']);

              echo '<li><time>'.date('F j, Y, g:i a',$post['pubdate']).'</time></li><li>'.$description.'</li>';
            }
            echo '</ul>';
        }else{
            echo '<p>No Twitter posts have been made</p>';
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:46:48.183

我不知道到底是什么问题。但我认为编码是由“htmlentities()”函数引起的。[在此处](http://php.net/manual/de/function.htmlentities.php)查找正确的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:12:48.610

您正在使用一个非常过时的 API 端点，您正在使用 RSS 并且没有正确使用诸如`htmlentities`.

建议使用正确的 API 端点 ( )，使用 JSON 而不是 RSS，并且在实际显示数据之前`https://api.twitter.com/1/statuses/user_timeline.json`不要打扰。`htmlentities`

哦，顺便说一句，您在推文上使用了 URL 正则表达式，但是由于所有 URL 现在都是 t.co URL，因此无需费心寻找不以 http:// 开头的 URL

# mysql - SUM() 在 LEFT JOIN 的所有行上？

> ID：10447963
> 
> 赞同：2
> 
> 时间：2012-05-04T11:30:12.237
> 
> 标签：mysql

我一直在玩 LEFT JOIN，我想知道是否有可能从以下查询中的所有用户那里获得所有评分的总和。下面让我了解登录用户是否已评分，但我也想显示其他用户的总评分。

```
$query = mysql_query("
SELECT com.comment, com.comment_id, r.rate_up, r.rate_down
FROM comments com
LEFT JOIN ratings r
ON com.comment_id = r.comment_id
AND r.user_id = '" . $user_id_var . "'
WHERE page_id = '" . $category_id_var. "'"); 
```

我尝试了以下方法，但由于某种原因，我只收到一条评论/行。

```
$query = mysql_query("
SELECT com.comment, com.comment_id,
r.rate_up, r.rate_down 
SUM(r.rate_up) AS total_up_ratings, 
SUM(r.rate_down) AS total_down_ratings,
FROM comments com
LEFT JOIN ratings r
ON com.comment_id = r.comment_id
AND r.user_id = '" . $user_id_var . "'
WHERE page_id = '" . $category_id_var. "'"); 
```

任何帮助表示赞赏。我需要不同类型的 JOIN 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:36:48.457

您是否尝试过`GROUP BY page_id`在 SQL 末尾使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:40:08.433

我不知道您是否有意复制评论行，但如果不是，您可以尝试为这样的评级编写子选择：

```
select comment_id, user_id, sum(rate_up) as sum_rate_up, 
sum(rate_down) as sum_rate_down from ratings 
group_by comment_id, user_id; 
```

然后将其包含在您的联接查询中：

```
select com.comment, com.comment_id, r.user_id, r.sum_rate_up, 
r.sum_rate_down from comments com 
left join (select comment_id, user_id, sum(rate_up) as sum_rate_up, 
sum(rate_down) as sum_rate_down from ratings 
group_by comment_id, user_id) as r 
on com.comment_id = r.comment_id where page_id = '".$category_id_var."' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:35:28.623

如果在 SQL 中使用聚合函数（如`SUM()`），则需要相应的`GROUP BY`子句。

在您的情况下，最有可能的是`com.comment_id`；这将为您提供所有评分的总和`comment_id`：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:35:43.410

你可以这样做：

```
SELECT 
    com.comment, 
    com.comment_id,
    Total.total_down_ratings,
    Total.total_up_ratings
FROM comments com
LEFT JOIN 
(
SELECT
    SUM(r.rate_up) AS total_up_ratings, 
    SUM(r.rate_down) AS total_down_ratings,
    r.comment_id
FROM
    ratings r
GROUP BY
    r.comment_id
) AS Total
ON com.comment_id = Total.comment_id
AND r.user_id = '" . $user_id_var . "'
WHERE page_id = '" . $category_id_var. "'" 
```

# python - Django：我在哪里放置可重用的函数？

> ID：10447966
> 
> 赞同：0
> 
> 时间：2012-05-04T11:30:30.687
> 
> 标签：python, django, django-views

> **可能重复：**
> [如何在 Django 应用程序中包含自定义模块](https://stackoverflow.com/questions/2576060/how-can-i-include-custom-modules-in-a-django-app)

我想在我的视图中重复使用一些功能。我是否在views.py 中定义它们？这样做的“django方式”是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:28:24.917

我见过使用`utils.py`文件的项目。如果里面的功能只属于一个应用程序，它会进入应用程序目录。如果它在应用程序之间共享，它可以进入一个名为`common`或类似效果的应用程序。

# java - 多线程（无状态类）

> ID：10447969
> 
> 赞同：3
> 
> 时间：2012-05-04T11:30:31.410
> 
> 标签：java, multithreading, stateless

为长代码帖子道歉，但我想知道是否有人可以帮助解决多线程问题（我对多线程很陌生）。我正在尝试为可以与多个线程共享的 RESTFUL Web 服务 API 设计一个外观类。我正在使用 HttpURLConnection 进行连接，并使用 Google GSON 在 JSON 数据之间进行转换。

下面的课程是我到目前为止所拥有的。在这个例子中，它有一个公共方法来进行 API 调用（authenticateCustomer()），而私有方法用于促进 API 调用（即构建 POST 数据字符串、发出 POST 请求等）。

我制作了这个类的一个实例并与 1000 个线程共享它。线程调用 authenticateCustomer() 方法。大多数线程工作，但有一些线程得到一个空指针异常，这是因为我没有实现任何同步。如果我使 authenticateCustomer() 方法“同步”，它就可以工作。问题是这会导致并发性较差（例如，POST 请求突然需要很长时间才能完成，这将阻塞所有其他线程）。

现在我的问题。下面的类不是无状态的，因此是线程安全的吗？类中的极少数字段被声明为 final 并在构造函数中分配。所有方法都使用局部变量。Gson 对象是无状态的（根据他们的网站），无论如何都在 API 方法中创建为局部变量。

```
public final class QuizSyncAPIFacade 
{
    // API Connection Details
private final String m_apiDomain;
private final String m_apiContentType;
private final int m_bufferSize;

// Constructors
public QuizSyncAPIFacade()
{
    m_apiDomain      = "http://*****************************";
    m_apiContentType = ".json";
    m_bufferSize = 8192; // 8k
}

private String readInputStream(InputStream stream) throws IOException
{
        // Create a buffer for the input stream
    byte[] buffer = new byte[m_bufferSize];

    int readCount;

    StringBuilder builder = new StringBuilder();

    while ((readCount = stream.read(buffer)) > -1) {
        builder.append(new String(buffer, 0, readCount));
    }

    return builder.toString();
}

private String buildPostData(HashMap<String,String> postData) throws UnsupportedEncodingException
{
    String data = "";

    for (Map.Entry<String,String> entry : postData.entrySet()) 
    {
        data += (URLEncoder.encode(entry.getKey(), "UTF-8") + "=" + URLEncoder.encode(entry.getValue(), "UTF-8") + "&");        
    }

    // Trim the last character (a trailing ampersand)
    int length = data.length();

    if (length > 0) {
        data = data.substring(0, (length - 1));
    }

    return data;
}

private String buildJSONError(String message, String name, String at)
{
    String error = "{\"errors\":[{\"message\":\"" + message + "\",\"name\":\"" + name + "\",\"at\":\"" + at + "\"}]}";

    return error;
}

private String callPost(String url, HashMap<String,String> postData) throws IOException
{
    // Set up the URL for the API call 
    URL apiUrl = new URL(url);

    // Build the post data
    String data = buildPostData(postData);

    // Call the API action
    HttpURLConnection conn;

    try {
        conn = (HttpURLConnection)apiUrl.openConnection();
    } catch (IOException e) {
        throw new IOException(buildJSONError("Failed to open a connection.", "CONNECTION_FAILURE", ""));
    }

    // Set connection parameters for posting data
    conn.setRequestMethod("POST");
    conn.setUseCaches(false);
    conn.setDoInput(true);
    conn.setDoOutput(true);

    // Write post data
    try {
        DataOutputStream wr = new DataOutputStream(conn.getOutputStream());
        wr.writeBytes(data);
        wr.flush();
        wr.close();
    } catch (IOException e) {
        throw new IOException(buildJSONError("Failed to post data in output stream (Connection OK?).", "POST_DATA_FAILURE", ""));           
    }

    // Read the response from the server                
    InputStream is;

    try {
        is = conn.getInputStream();
    } catch (IOException e) {
        InputStream errStr = conn.getErrorStream();

        if (errStr != null) 
        {
            String errResponse = readInputStream(errStr);
            throw new IOException(errResponse);
        } 
        else 
        {
            throw new IOException(buildJSONError("Failed to read error stream (Connection OK?).", "ERROR_STREAM_FAILURE", ""));
        }
    }

    // Read and return response from the server
    return readInputStream(is);
}

/* -------------------------------------
 * 
 * Synchronous API calls
 * 
   ------------------------------------- */

public APIResponse<CustomerAuthentication> authenticateCustomer(HashMap<String,String> postData)
{
    // Set the URL for this API call
    String apiURL = m_apiDomain + "/customer/authenticate" + m_apiContentType;

    Gson jsonConv = new Gson();

    String apiResponse = "";

    try 
    { 
        // Call the API action
        apiResponse = callPost(apiURL, postData);

        // Convert JSON response to the required object type
        CustomerAuthentication customerAuth = jsonConv.fromJson(apiResponse, CustomerAuthentication.class);

        // Build and return the API response object
        APIResponse<CustomerAuthentication> result = new APIResponse<CustomerAuthentication>(true, customerAuth, null);

        return result;
    } 
    catch (IOException e) 
    {
        // Build and return the API response object for a failure with error list
        APIErrorList errorList = jsonConv.fromJson(e.getMessage(), APIErrorList.class);

        APIResponse<CustomerAuthentication> result = new APIResponse<CustomerAuthentication>(false, null, errorList);

        return result;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:37:33.177

如果您收到错误，可能是因为您正在重载身份验证服务（如果您一次执行此操作，则不会发生这种情况）也许它返回一个错误，如 500、503 或 504，您可能会忽略并得到什么都没有，你会返回`null` [http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

假设你没有 1000 cpu，我会使用更少的线程，拥有这么多线程可能会更慢而不是更高效。

我还会检查您的服务是否每次都正确返回，并调查您获得`null`价值的原因。

如果您的服务一次只能处理 20 个请求，您可以尝试使用 a`Semaphore`作为最后的手段。这可以用来限制并发请求的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:39:56.293

任何无状态类本质上都是线程安全的，只要它访问的对象要么是线程私有的，要么本身是线程安全的。

# php - 适用于 Whois 的亚马逊 AWS？

> ID：10447970
> 
> 赞同：1
> 
> 时间：2012-05-04T11:30:33.197
> 
> 标签：php, python, amazon-web-services, whois

我一直在寻找 Whois Api，但它们中的大多数价格昂贵且不够可靠。我们可以用 Python 或 Php 编写代码。

我们需要提供 Whois 查询服务，以便与我们的网站集成。为此我们需要什么 AWS 资源？我们每天至少需要 5k 次查找。

AWS 提供： S3 、弹性等。我们感到困惑。由于亚马逊提供免费轮胎。它允许查找谁吗？由于谷歌应用引擎从未允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:49:29.463

您要使用的 Amazon 服务是服务器服务：EC2。您可以获得对服务器的完全访问权限，当然，您可以在端口 43（Whois 协议要求的端口）上执行套接字连接。

# html - SelectOneRadio 并禁用 inputText

> ID：10447974
> 
> 赞同：0
> 
> 时间：2012-05-04T11:30:43.850
> 
> 标签：html, jsf, jsf-2, facelets

这是我的html代码。

```
 <table >
            <tr>
                <th rowspan="3">
                        <h:selectOneRadio layout="pageDirection"
                        onClick="alert('selam')" id="selectOneRadio">
                        <f:selectItem itemValue="Categori" itemLabel="Radio 1" />
                        <f:selectItem itemValue="Service" itemLabel="Radio 2" />
                        <f:selectItem itemValue="Follower" itemLabel="Radio 3" />
                    </h:selectOneRadio>
                </th>
                <td>
                <h:inputText value="inputText 1" />
                </td>
            </tr>
            <tr>
                <td>
                <h:inputText value="inputText 2" />
                </td>
            </tr>
            <tr>
                <td>
                <h:inputText value="inputText 3" />
                </td>
            </tr>               

        </table> 
```

我想选择其中一个单选按钮。当我单击其中一个时，我希望禁用 inputText。

例如：

*   如果我单击 Radio 1 ，则输入 Text 1 将被禁用。
*   如果我单击 Radio 2 ，则输入 Text 2 将被禁用。
*   如果我单击 Radio 3 ，则输入 Text 3 将被禁用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:35:19.667

将单选按钮值绑定到托管 bean 属性，并用于`<f:ajax>`在单选按钮更改时发送 ajax 请求和更新部分视图，并使用`disabled`属性来禁用`<h:inputText>`取决于所选单选按钮项值的选项。

例如

```
<h:panelGroup id="inputs">
    <table>
        <tr>
            <th rowspan="3">
                <h:selectOneRadio value="#{bean.radio}" layout="pageDirection">
                    <f:selectItem itemValue="Categori" itemLabel="Radio 1" />
                    <f:selectItem itemValue="Service" itemLabel="Radio 2" />
                    <f:selectItem itemValue="Follower" itemLabel="Radio 3" />
                    <f:ajax render="inputs" />
                </h:selectOneRadio>
            </th>
            <td>
                <h:inputText value="#{bean.input1}" disabled="#{bean.radio == 'Categori'}" />
            </td>
        </tr>
        <tr>
            <td>
                <h:inputText value="#{bean.input2}" disabled="#{bean.radio == 'Service'}" />
            </td>
        </tr>
        <tr>
            <td>
                <h:inputText value="#{bean.input3}" disabled="#{bean.radio == 'Follower'}" />
            </td>
        </tr>               
    </table>
</h:panelGroup> 
```

和

```
@ManagedBean
@ViewScoped
public class Bean {

    private String radio;
    private String input1;
    private String input2;
    private String input3;

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:13:37.270

看看这个，我想这就是你要找的

```
<html>
<head>
<script type="text/javascript">
    function enable_area(opt)
    {
        //get the required document element and disable corresponding element.
        document.form.textarea1.disabled = (opt == 'Categori' ? true : false);
        document.form.textarea2.disabled = (opt == 'service' ? true : false);
        document.form.textarea3.disabled = (opt == 'Follower' ? true : false);
    }
</script>
</head>
<body>
    <form action="" method="post" name="form">
        <!--Pass the value field as selector when clicked on radio button-->
        Radio1 <input type="radio" name="radio" value="Categori" onclick="enable_area(this.value);" />
        <textarea name="textarea1"></textarea>
        <br />
        Radio2 <input type="radio" name="radio" value="service" onclick="enable_area(this.value);" />
        <textarea name="textarea2"></textarea>
        <br />
        Radio3 <input type="radio" name="radio" value="Follower" onclick="enable_area(this.value);" />
        <textarea name="textarea3"></textarea>
    </form>
</body>
</html> 
```

# c# - WPF 文本块/直接通过 Inlines.Add() 设置 BOLD、ITALIC、UNDERLINE 标记

> ID：10447975
> 
> 赞同：2
> 
> 时间：2012-05-04T11:30:52.563
> 
> 标签：c#, wpf, textblock

这是在 C# 代码中直接粘贴带有 HTML 标记的 TextBlock Inlines 的任何解决方案，如下所示：

```
string example = "Here is <Bold>bold</Bold> text, and here is <Italic>italic</Italic>.";
TextBlock.Inlines.Add(example); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:26:22.533

你可以看看[这个](http://www.codeproject.com/Articles/33196/WPF-Html-supported-TextBlock)项目

# c# - 从文本 C# 中删除停用词

> ID：10447980
> 
> 赞同：3
> 
> 时间：2012-05-04T11:31:01.877
> 
> 标签：c#

我想从输入字符串中删除一组停用词，我有以下过程

```
string[] arrToCheck = new string[] { "try ", "yourself", "before " };

string input = "Did you try this yourself before asking";
foreach (string word in arrToCheck )
{
input = input.Replace(word, "");
} 
```

这是执行此任务的最佳方法吗，特别是当我有（450）个停用词并且输入字符串很长时？我更喜欢使用替换方法，因为当停用词出现在不同的形态中时，我想删除它们。例如，如果停用词是“do”，则从（doing、does 等）中删除“do”。有什么更好和最快处理的建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:41:05.487

我可以建议一个`StringBuilder`吗？

[http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)

```
string[] arrToCheck = new string[] { "try ", "yourself", "before " };

StringBuilder input = new StringBuilder("Did you try this yourself before asking");
foreach (string word in arrToCheck )
{
    input.Replace(word, "");
} 
```

因为它在自己的数据结构中完成所有处理，并且不分配数百个新字符串，我相信您会发现它的内存效率要高得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:56:15.210

这有几个方面

**过早的优化**
给出的方法有效并且易于理解/维护。它会导致性能问题吗？如果没有，那就不用担心了。如果它曾经导致问题，那么看看它。

**预期结果**
在示例中，您希望输出是什么？

```
"Did you this asking" 
```

或者

```
"Did you  this   asking" 
```

您已经在“try”和“before”的末尾添加了空格，但没有在“yourself”的末尾添加空格。为什么？错字？

string.Replace() 区分大小写。如果您关心大小写，则需要修改代码。

使用 partials 很麻烦。
单词在不同的时态中变化。从“doing”词中删除“do”的例子，但是“take”和“take”呢？停用词的顺序很重要，因为您正在更改输入。有可能（我不知道有多大可能但有可能）在更改之前不在输入中的单词在更改之后“出现”在输入中。你想每次都回去重新检查吗？

你真的需要删除部分吗？

**优化**
当前方法将通过输入字符串 n 次工作，其中 n 是要编辑的单词数，每次替换时创建一个新字符串。这*很*慢。

使用**StringBuilder**（上面的akatakritos）会加快速度，所以我会先试试这个。重新测试看看这是否使它足够快。

可以使用linq

**编辑**
只是用''分割来演示。您还需要考虑标点符号并决定它们应该发生什么。
**结束编辑**

```
[TestMethod]
public void RedactTextLinqNoPartials() {

    var arrToCheck = new string[] { "try", "yourself", "before" };
    var input = "Did you try this yourself before asking";

    var output = string.Join(" ",input.Split(' ').Where(wrd => !arrToCheck.Contains(wrd)));

    Assert.AreEqual("Did you this asking", output);

} 
```

将删除所有整个单词（以及空格。将无法从删除单词的位置看到），但如果没有一些基准测试，我不会说它更快。

用 linq 处理部分会变得很麻烦，但如果我们只想要一次通过（不检查“发现的”单词）就可以工作

```
[TestMethod]
public void RedactTextLinqPartials() {

    var arrToCheck = new string[] { "try", "yourself", "before", "ask" };
    var input = "Did you try this yourself before asking";

    var output = string.Join(" ", input.Split(' ').Select(wrd => {
        var found = arrToCheck.FirstOrDefault(chk => wrd.IndexOf(chk) != -1);
            return found != null
                   ? wrd.Replace(found,"")
                   : wrd;
    }).Where(wrd => wrd != ""));

    Assert.AreEqual("Did you this ing", output);

} 
```

仅仅从这个角度来看，我会说它比 string.Replace() 慢，但没有一些数字就无法判断。它肯定更复杂。

**底线**
String.Replace() 方法（修改为使用字符串生成器并且不区分大小写）看起来是一个很好的首选解决方案。在尝试更复杂的事情之前，我会在可能的性能条件下对其进行基准测试。

嗯，
艾伦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T20:06:17.853

干得好：

```
var words_to_remove = new HashSet<string> { "try", "yourself", "before" };
string input = "Did you try this yourself before asking";

string output = string.Join(
    " ",
    input
        .Split(new[] { ' ', '\t', '\n', '\r' /* etc... */ })
        .Where(word => !words_to_remove.Contains(word))
);

Console.WriteLine(output); 
```

这打印：

```
Did you this asking 
```

提供`HashSet`了非常快速的查找，所以 450 个元素`words_to_remove`应该没有问题。此外，我们只遍历输入字符串**一次**（而不是像您的示例中那样*每个单词删除一次*）。

但是，如果输入字符串很长，有一些方法可以提高内存效率（如果不是更快的话），方法是不要一次将拆分结果保存在内存中。

不仅要删除“do”，还要删除“doing”、“does”等……您必须在`words_to_remove`. 如果您想以一般方式删除前缀，则可以（相对）有效地使用一[组](http://en.wikipedia.org/wiki/Trie)单词来删除（或者输入字符串的后缀[树](http://en.wikipedia.org/wiki/Suffix_tree)），但是当“do”*不是*应该删除的东西的前缀，例如“did”？*或者当它是不应该*被删除的东西的前缀时，比如“狗”？

顺便说一句，要删除任何大小写的单词，只需将适当的不区分大小写的比较器传递给`HashSet`构造函数，例如[StringComparer.CurrentCultureIgnoreCase](http://msdn.microsoft.com/en-us/library/system.stringcomparer.currentcultureignorecase%28v=vs.100%29.aspx)。

### - - 编辑 - -

这是另一种选择：

```
var words_to_remove = new[] { " ", "try", "yourself", "before" }; // Note the space!
string input = "Did you try this yourself before asking";

string output = string.Join(
    " ",
    input.Split(words_to_remove, StringSplitOptions.RemoveEmptyEntries)
); 
```

我猜它应该更慢（除非`string.Split`在内部使用哈希表），但是很好而且整洁；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T11:42:35.160

对于从句子中删除字符串列表并将结果重新聚合在一起的简单方法，您可以执行以下操作：

```
var input = "Did you try this yourself before asking"; 
var arrToCheck = new [] { "try ", "yourself", "before " };
var result = input.Split(arrToCheck, 
                         arrToCheck.Count(), 
                         StringSplitOptions.None)
                  .Aggregate((first, second) => first + second); 
```

这将通过您的单词分隔符将您的原始字符串分开，并使用拆分数组中的结果集创建一个最终字符串。

结果将是，`"Did you this before asking"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T11:43:44.663

缩短您的代码，并使用 LINQ

```
string[] arrToCheck = new string[] { "try ", "yourself", "before " };   
var test = new StringBuilder("Did you try this yourself before asking"); 

arrToCheck.ForEach(x=> test = test.Replace(x, "")); 

Console.Writeln(test.ToString()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T11:47:36.623

```
String.Join(" ",input.
          Split(' ').Where(w=>stop.Where(sW=>sW==w).
                   FirstOrDefault()==null).ToArray()); 
```

# asp.net - 我们如何在asp.net中进行部分页面更新

> ID：10447982
> 
> 赞同：0
> 
> 时间：2012-05-04T11:31:10.330
> 
> 标签：asp.net, ajax, partial

我们想在详细视图布局中显示表格的某些字段，并希望单独更新每个字段。我们可以这样做吗`asp.net`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:34:27.610

使用`UpdatePanel`和`ScriptManager`。

有关详细信息，请参见此处：[UpdatePanel 控件简介](http://msdn.microsoft.com/en-us/library/bb399001.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:32:48.053

利用将为您完成任务的 AJAX ...

您可以使用 AJAX-Toolkit 控件[**UpdatePanel**](http://msdn.microsoft.com/en-us/library/bb399001.aspx)对您的页面进行部分更新。还要检查：[使用 UpdatePanel 控件实现 ASP.NET AJAX](https://stackoverflow.com/users/314488/pranay-rana)

# php - 获取 tt_content uid

> ID：10447983
> 
> 赞同：5
> 
> 时间：2012-05-04T11:31:15.560
> 
> 标签：php, typo3

我正在开发一个扩展，允许管理员将内容保存到数据库中。

而且我希望扩展的每个实例在数据库中都应该有它自己的 ID。有没有办法在扩展 php.ini 中获取 tt_content uid（我猜是扩展实例 ID）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T11:54:06.513

您在数组中获取所有 tt_content 的数据：

```
$this->cObj->data 
```

IE：

```
$uidOfCE = $this->cObj->data['uid']; 
```

如果你使用 Extbase 当然你需要先获取内容对象，即：

```
$this->contentObj = $this->configurationManager->getContentObject();
debug($this->contentObj->data, "current tt_content's data"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-13T05:29:22.133

这是方法（在 TYPO3 9.5.4 和 10.4.3 中测试）

获取控制器内的当前内容ID

```
$this->configurationManager->getContentObject()->data['uid']; 
```

和

> 这将返回您可以直接呈现的整个**HTML**内容

```
$conf = [
    'tables' => 'tt_content',
    'source' => $uid, //uid of tt_content
    'dontCheckPid' => 1
];
$html = $GLOBALS['TSFE']->cObj->cObjGetSingle('RECORDS', $conf); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-28T13:56:57.733

对于更新该答案并知道插件 uid 的效果，您可以调试`\TYPO3\CMS\Core\Utility\DebugUtility::debug($this->configurationManager->getContentObject()->data['uid'], 'parameter');`

如果未完成，则调试不显示，`uid`因为`configurationManager`并`contentObject`使用延迟加载。

这适用于 TYPO3 8.7 并经过测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T08:10:18.673

$contentId 是typo3后端的内容ID

```
$content_rec = $GLOBALS["TYPO3_DB"]->exec_SELECTgetrows('header,bodytext','tt_content','uid='.$contentId);
$this->markerArray['###content###'] = $content_rec[0]['bodytext']; 
```

# c++ - std::fstream 错误

> ID：10447986
> 
> 赞同：2
> 
> 时间：2012-05-04T11:31:22.640
> 
> 标签：c++, file-io, std

我在解析文件时遇到了一些问题

我要解析的文件的最后两行是：

> f 814/866/896 1035/1100/989 817/965/898
> 
> [无，来自\n的影响]

这就是我读取文件的方式：

```
while(!inFile.eof())
{
    inFile>>sCommand;

    if(sCommand == L"#") 
    {}
    else if(sCommand == L"f")
    {
        int iPos, iTex, iNorm;
        iPos=iTex=iNorm = -1;

        for(auto face=0; face<3; ++face)
        {
            inFile>>iPos;
            --iPos;
            if(inFile.peek() == L'/')
            {
                inFile.ignore();
                inFile>>iTex;
                --iTex;
                if(inFile.peek() == L'/')
                {
                    inFile.ignore();
                    inFile>>iNorm;
                    --iNorm;
                }
            }

            objVertexIndex iObj;
            iObj.iPos=iPos;
            iObj.iTex=iTex;
            iObj.iNorm=iNorm;
            this->AddVertex(iObj);
        }
        m_MaterialIndices_C.push_back(m_CurrentMaterial);
    } //END IF

    inFile.ignore( 1000, '\n' );
} //END WHILE
inFile.close(); 
```

但是，文件的最后一行什么都不包含，我遇到了一些麻烦。在文件的最后一行之前，`inFile.ignore( 1000, '\n' );`会发生并且我希望`std::fstream::eof()`被检测到，但由于某种原因它不是。如果一行上没有任何内容，显然`sCommand`仍然是上一行中的相同命令，这给我带来了一些麻烦。

有没有办法检查这个？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:00:58.423

不是真正的答案，而是评论（我不知道如何评论）。如果`\n`在最后一行后面有 2 个数字，`eof`则不会触发。我在使用时遇到了类似的问题`.eof()`，可能会更好地检查您阅读的内容作为继续阅读的条件。

# mysql - 外键列的默认值

> ID：10447987
> 
> 赞同：1
> 
> 时间：2012-05-04T11:31:23.057
> 
> 标签：mysql, database-design, foreign-keys, default-value

我正在使用 PHP/MySQL 开发一个多租户 Web 应用程序。我已经提出了关于外键和默认值的一般约定问题。

我有一个**MailTemplate**表，用于存储为应用程序中的各种操作发送的邮件中使用的模板。表格列如下：

```
MailTemplate
  id (PK)
  company_id (FK)
  name
  subject
  body 
```

company_id 列引用了**Company**表。基本上，公司可以为他们的行动创建不同的模板。但我也想为每个动作都有一个预定义的模板，以防公司不选择自定义个人模板。

我相信我应该将这些默认模板存储在此表中。但问题是，我是将默认模板的 *company_id* 列保留为*NULL*，还是应该在**Company表中创建一个虚拟行并在****MailTemplate**表中引用该行的 id ？

我检查了周围，但每个人似乎都以不同的方式完成了。我想知道这种情况的一般约定是什么。

提前致谢。

# multithreading - 显示进度的线程的名称是什么？

> ID：10447988
> 
> 赞同：0
> 
> 时间：2012-05-04T11:31:24.617
> 
> 标签：multithreading, progress

我编写了一个由 3 个线程组成的程序：2 个线程做一些有用的事情，第 3 个线程将进度打印到控制台。进度打印线程是否有特定名称，如果有，它有什么名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:37:15.387

我认为这没有任何约定。你用什么语言工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:08:36.163

我可能会称它为“日志记录”，毕竟控制台输出可以很容易地重定向到文件中。

# objective-c - presentModalViewController 直到稍后才会触发

> ID：10447990
> 
> 赞同：2
> 
> 时间：2012-05-04T11:31:26.057
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我在初始视图控制器的 viewWillAppear 中有这段代码

```
if (howManyLeft == 0) {
        NSLog(@"HERE");
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
        DayCompleteViewController *dayComplete = (DayCompleteViewController *)[storyboard instantiateViewControllerWithIdentifier:@"dayComplete"];
        dayComplete.delegate = self;
        [self presentModalViewController:dayComplete animated:YES];
    } 
```

NSLog 正确触发，但是第二个视图没有立即显示。如果您稍后单击显示弹出视图的 tableview 单元格，然后关闭弹出视图，则即使没有其他代码显示模态视图，也会显示模态视图。

为什么它在启动时不立即显示，而不是等待某些事情先发生？

当我有一个 NavigationController 和 segue 时，我的工作正常，但是我已经删除了它，因为它不需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:49:33.053

将该代码从 移动`viewWillAppear`到`viewDidAppear`- 您会遇到延迟（通常是`wait_fences`错误），因为您试图在当前视图出现之前呈现模式视图控制器（因此它会尝试同时呈现两个视图控制器）

# c# - 在没有 SQL 客户端的情况下在 VS2010 中创建与数据库的连接 - 动态

> ID：10447994
> 
> 赞同：0
> 
> 时间：2012-05-04T11:31:39.563
> 
> 标签：c#, sql-server, visual-studio

如何在没有 SQL Client 的情况下在 VS2010 中动态创建与数据库的连接？

我尝试使用`ConnectionStringSettings`and`SqlConnection`我成功了，但我不应该使用 SQL Client。

我正在使用[大规模](https://github.com/robconery/massive)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:36:39.757

可能是您错过了`System.Configuration`项目中的引用，因此*Massive*在您的 app.config 中找不到连接字符串。

按照[github 上的说明，](https://github.com/robconery/massive)我可以使用在我的 app.config 中具有纯`SqlClient`连接字符串的 Massive 查询我的 SQL Express 数据库，而不会出现任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:43:32.100

您应该可以使用`System.Data.OleDb.OleDbConnection`.

使用这样的连接字符串：

```
Provider=SQLOLEDB;Server=myServerAddress;Database=myDataBase;Uid=myUsername; Pwd=myPassword; 
```