# StackOverflow 问答 11589000-11589999

# excel - Excel 列中的排名值

> ID：11589006
> 
> 赞同：3
> 
> 时间：2012-07-21T02:31:16.880
> 
> 标签：excel, vba

给定一个包含三列的 Excel 文件（类似于[此](http://i.stack.imgur.com/IYqQF.jpg)）：Group、Number 和 Rank。

在每个组中，他必须将值从最小到最大排列。如果值匹配，它们将获得相同的排名。因此，如果一个值最大，则排名为 1。如果它是第二大的，则排名为 2，依此类推。

然后这个过程应该为第二组值重新启动。如何完成这项任务？也许使用数组/冒泡排序？ - 但我不确定这是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:21:16.850

我想我有你正在寻找的解决方案——不过我必须分三栏来做。

假设您有 A 列中的组和 B 卷中的分数；您将要先按组排序，然后按分数排序。

然后您将要继续将前面提到的公式放在 C2 列中：

```
=SUMPRODUCT(($A$2:$B$25=A2)*($B$2:$B$25>B2))+1 
```

然后自动填充。

然后你要在单元格 D2 中放置一个计数器：

```
=IF(COUNTIFS($A$2:A2,A2,$B$2:B2,B2)=1,0,1) 
```

然后自动填充。

然后你会想把这个方程放在单元格 E2 中：

```
=IF(C2<>C1,C2-SUMIF($A$2:A2,A2,$D$2:$D$25),C2) 
```

然后自动填充。

可能有更简单/更好的方法来做到这一点 - 但这肯定会给你你正在寻找的东西：

![排名解决方案](../Images/fa00d106a5925dfce130cfd9da97c927.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:30:19.407

我用一个额外的专栏解决了你的问题：

在“C”列中，您必须使用此公式（假设值从第 2 行到第 10 行）得到给定组中数字频率的倒数：

```
=1/SUM(IF(($A$2:$A$10=A2)*($B$2:$B$10=B2);1;0)) 
```

然后在下一列 (D) 中，您可以通过对 C 中的值求和来获得所需的排名：

```
=SUM(IF(($B$2:$B$10>B2)*($A$2:$A$10=A2);$C$2:$C$10;0))+1 
```

这两个公式都是数组公式（公式？），在 Excel 中输入时需要按 Shift+Ctrl+Enter。

![格式化为表格](../Images/e9aadac7a019bd7d47461687ae41057e.png)

如果您将数据格式化为表格，则可以使用（在 Excel 2010 中）以下公式：

```
=1/SUM(IF(([Group]=[@Group])*([Number]=[@Number]);1;0))
=SUM(IF(([Number]>[@Number])*([Group]=[@Group]);[Freq];0))+1 
```

（根据您的设置，您可能需要用逗号替换分号。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T09:56:40.647

（刚刚注意到您的评论，但已经写了以下内容，所以也可以上传它，因为它可能对这个问题的未来观众有用）

`=SUMPRODUCT(($A$2:$A$18=A2)*($B$2:$B$18>B2))+1`.

![在此处输入图像描述](../Images/befd4237c70af5ab471e62318ec3cd9d.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T02:48:53.870

我做了一个自定义排序，第一级排序是组列（从小到大），第二级排序是值列（从大到小）。然后在排名列中我使用了公式

```
=IF(B2=B1,C1,COUNTIF($A$2:A2,A2)) 
```

其中 A2 是第一行。然后我把它一直拖下来。

这为您提供排名 PLUS 一切都在屏幕上进行视觉排序，就像您完成时一样。

# java - Java中的平坦地形生成

> ID：11589008
> 
> 赞同：1
> 
> 时间：2012-07-21T02:31:42.163
> 
> 标签：java, terrain

我目前正在开发 2D 生存游戏，我想生成自己的自定义地形问题是，我不知道如何！我想让它类似于[Minicraft](http://en.wikipedia.org/wiki/Minicraft)（不是我的世界），它是随机平坦的地形，但我不知道该怎么做。我试着理解 Notch 的实际代码，但这一切似乎都是胡言乱语。

如果有人可以将我链接到教程或至少解释如何做，请做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:42:05.597

此[示例](https://stackoverflow.com/a/11556441/230513) `implements Icon`用于`TexturePaint`合成地砖。

![图片](../Images/4d94c9fb98d1981ba2c41dd40107da0f.png)

# ruby-on-rails - Rails 中的作用域配置变量

> ID：11589009
> 
> 赞同：0
> 
> 时间：2012-07-21T02:31:42.493
> 
> 标签：ruby-on-rails

我正在使用我的`config/environments/<env>.rb`文件来设置自定义配置变量（请参阅[https://stackoverflow.com/a/5053882/483520](https://stackoverflow.com/a/5053882/483520)）。例如，我可能会设置以下内容：

```
config.google_analytics_on = false #or true, in a production environment
config.google_analytics_account = "<account-string>" 
```

能够做到这一点会很好：

```
config.google_analytics.on = false
config.google_analytics.account = "<account-string>" 
```

这样我的所有 google_analytics 变量都将在该范围内。然而，rails 抱怨`config.google_analytics`没有被定义。我如何创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:35:28.420

```
opts = {on: false, account: "<account-string>"}
config.google_analytics = OpenStruct.new(opts) 
```

# android - 将 HTC 3D 连接到 ADB

> ID：11589011
> 
> 赞同：1
> 
> 时间：2012-07-21T02:31:46.493
> 
> 标签：android, eclipse, adb, udev, linux-mint

我正在尝试将我的 Android HTC3D 手机连接到我的笔记本电脑，并且已经解决这个问题很长一段时间了。我做了一些研究并扫描了stackoverflow，但没有解决我的问题。到目前为止，我已经按照以下教程进行操作：http: [//developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)但无济于事我会执行`./adb devices`它，它会给我一个空列表。然后我开始四处搜索，发现这个 stackoverflow Q&A [HTC Desire usb connection issue with Ubuntu 10.04](https://stackoverflow.com/questions/8860900/htc-desire-usb-connection-issue-with-ubuntu-10-04)，建议我将它们重命名为 70、71、90 和 99。所以我尝试了，仍然没有......这导致我到另一个帖子: [Debugging Android App on Device](https://stackoverflow.com/questions/8638635/debugging-android-app-on-device/8641534#8641534)这给了我一个脚本来自动生成 70-android.rules 文件......仍然没有。

到目前为止**这是我的设置**：

*   操作系统 - Linux Mint 11
*   IDE - 日食
*   手机：HTC 3D
*   电话型号：PG86100
*   手机已通过以下方式设置为调试模式`Settings->Developer Options->USB Debugging`
*   规则文件：

    #宏基

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0502", MODE="0666"

    #戴尔

    SUBSYSTEM=="usb", SYSFS{idVendor}=="413c", MODE="0666"

    #富士康

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0489", MODE="0666"

    # Garmin-华硕

    SUBSYSTEM=="usb", SYSFS{idVendor}=="091E", MODE="0666"

    ＃ 谷歌

    SUBSYSTEM=="usb", SYSFS{idVendor}=="18d1", MODE="0666"

    # 宏达电

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0bb4", MODE="0666"

    #华为

    SUBSYSTEM=="usb", SYSFS{idVendor}=="12d1", MODE="0666"

    #京瓷

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0482", MODE="0666"

    # LG

    SUBSYSTEM=="usb", SYSFS{idVendor}=="1004", MODE="0666"

    #摩托罗拉

    SUBSYSTEM=="usb", SYSFS{idVendor}=="22b8", MODE="0666"

    # 英伟达

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0955", MODE="0666"

    #泛泰

    SUBSYSTEM=="usb", SYSFS{idVendor}=="10A9", MODE="0666"

    ＃ 三星

    SUBSYSTEM=="usb", SYSFS{idVendor}=="04e8", MODE="0666"

    ＃ 锋利的

    SUBSYSTEM=="usb", SYSFS{idVendor}=="04dd", MODE="0666"

    ＃ 索尼爱立信

    SUBSYSTEM=="usb", SYSFS{idVendor}=="0fce", MODE="0666"

    #中兴通讯

    SUBSYSTEM=="usb", SYSFS{idVendor}=="19D2", MODE="0666"

任何帮助或建议都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T02:39:31.400

# 解决方案：

我正在使用我在 BestBuy 为我的旧手机挑选的 griffon USB 数据线。用 HTC 自带的 USB 线换掉那根线，它可以工作。

# python - 没有名为 dbindexes 的模块

> ID：11589022
> 
> 赞同：0
> 
> 时间：2012-07-21T02:33:34.037
> 
> 标签：python, django, google-app-engine, autoload

我的目标是使用非 SQL 数据库启用 SQL 功能。我的应用部署在 Google Appengine 上。[我已经根据http://www.allbuttonspressed.com/blog/django/2010/09/Get-SQL-features-on-NoSQL-with-django-dbindexer](http://www.allbuttonspressed.com/blog/django/2010/09/Get-SQL-features-on-NoSQL-with-django-dbindexer)上的说明使用 dbindexer lib 和 autoload lib 设置了我的 django 项目. 但是，当它在 dev_appserver 上运行时，会发生异常：“Caught ImportError while rendering: No module named dbindexes”。为什么是这样？我的项目设置：

*   博客应用
    *   模型.py
    *   ...
    *   数据库索引.py
*   画廊应用
    *   模型.py
    *   ...
    *   数据库索引.py
*   数据库索引.py
*   设置.py

这是我的项目 settings.py 的摘录

```
INSTALLED_APPS = (
    'autoload',
    'dbindexer',
    'djangoappengine',
    'djangotoolbox',
    ...
)

DATABASES = {
    'default': {
    'ENGINE': 'dbindexer',
    'TARGET': 'gae',
},
    'gae': {
        'ENGINE': 'djangoappengine.db',
    },
}

AUTOLOAD_SITECONF = 'dbindexes' 
```

**请注意，所有不相关的部分都显示为省略号 (...)**

谢谢

# delphi - 在 Delphi 中检索列表视图项值的正确方法是什么

> ID：11589025
> 
> 赞同：1
> 
> 时间：2012-07-21T02:34:17.843
> 
> 标签：delphi, tlistview

现在我正在使用下面的代码来获取 ListView items 值，我想知道这是否是正确的方法，或者我应该以另一种方式来做。

**父项值的示例：**

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(ListView1.Selected.Caption);
end; 
```

**子项值的示例：**

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage(ListView1.Selected.SubItems.Strings[items_index_here]);
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T02:50:15.003

你的第一个代码看起来不错，除了你应该先检查是否有一个`Selected`项目：

```
if Assigned(ListView1.Selected) then  // or ListView1.Selected <> nil
  ShowMessage(ListView1.Selected.Caption); 
```

您的第二个可以简化（并且应该包括我上面提到的相同检查）：

```
if Assigned(ListView1.Selected) then
  ShowMessage(ListView1.Selected.SubItems[Index]); 
```

`TStrings`后代（如`TStringList`和`TListItem.SubItems`）具有默认属性，这是使用的快捷方式`TStrings.Strings[Index]`；您可以改为使用`TStrings[Index]`. `MyStringList.Strings[0]`您可以只使用, 而不是, 这也适用于和之`MyStringList[0]`类的东西。您不需要，但可以使用.`TMemo.Lines``TListItem.SubItems``SubItems.Strings[Index]``SubItems[Index]`

# c++ - 使用 POD 高效移动班级

> ID：11589028
> 
> 赞同：9
> 
> 时间：2012-07-21T02:35:10.200
> 
> 标签：c++, c++11

如何有效地移动具有大量 POD 成员的类？例子：

```
struct{
    int a1;
    int a2;
    int a3;
    ...
    ...
    ...
}; 
```

“移动”是指行为类似于移动语义（std::move）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T02:39:12.747

POD 不移动，它们只是复制。因为没有间接性。因此，只需使用普通赋值，并要求编译器针对您想要的任何效率进行优化。记住要系统地测量之前（你在地球上做的不同）和之后。还要考虑浪费的程序员时间，也就是金钱，是否值得微优化。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-21T03:58:10.413

这个问题暴露出对 C++11 中的运动的用途缺乏了解。

当您复制具有指针或以其他方式拥有资源的对象时，有两种方法可以进行该复制。您可以复制指针/资源引用，也可以分配新对象/资源并将原始对象/资源的值复制到新对象/资源中。

在第一种情况下，您会得到两个引用*同一*对象的对象。Qt 经常这样做。如果您使用一个对象来修改它所引用的内容，那么您也在修改另一个对象。您通常需要某种引用计数器，以免双重删除指针或双重释放资源。

在第二种情况下，您将得到两个完全独立的对象。这通常称为“值语义”，因为如果您将一个 POD 复制到另一个 POD 中，之后您将拥有两个完全独立的对象。改变一个不会改变另一个。

移动语义是一种 C++11 机制，允许通常具有值语义的对象在某些条件下具有引用语义。它本质上允许一个对象*窃取*另一个对象实例引用的指针/资源。

例如，采取`std::vector`; 这只是动态分配和调整大小数组的包装。与大多数 C++ 标准库对象一样，`vector`实现值语义。如果复制 a `vector`，则新向量必须分配一个新数组并将每个元素从旧数组复制到新数组中。完成后，您将拥有两个完全独立的数组。

移动语义是一种将 a 中包含的*数组*`vector`转移到另一个数组的方法。操作后，移动源对象是“空的”（技术上处于未定义状态，但它与它分配的数据有效分离）。现在新`vector`的指针与旧的指针完全相同`vector`。new`vector`将删除它没有分配的内存。

如您所见，这都是基于对象拥有资源的概念。`vector`分配并拥有一个数组；它的析构函数会摧毁它。这就是你定义所有权的方式。运动是关于*转移所有权*。

POD 不能表示指针或资源的所有权，因为 POD 必须具有普通的析构函数（即：不做任何事情的析构函数）。因为 POD 不能表达所有权，所以*没有东西可以移动*。如果对象不拥有任何东西，则不能在对象之间转移所有权。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-21T03:03:56.280

您必须发挥工程判断力。想象一个例子，你正在谈论是否使用 a`std::array<int, N>`或 a `std::vector<int>`with `N`items，其中`N`是编译时常量。

当`N`很小的时候，`std::array<int, N>`是明显的赢家，因为没有堆分配。副本（以及相当于副本的移动）很便宜。

当`N`非常大时，`std::vector<int>`是明显的赢家，因为尽管有一个堆分配，并且`vector`无论`N`.

时`N == 3`，毫无疑问哪个是更好的选择。当`N == 3,000,000`毫无疑问哪个是更好的选择时。

作为设计师，你的工作就是走进这两个极端之间的灰色地带并做出正确的决定。没有永远正确的决定。针对您预期的用例的性能测量有很长的路要走。用于`<chrono>`那些性能测量。如果您不知道是什么`<chrono>`，请搜索 stackoverflow。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T04:03:24.497

创建一个类以指向具有 POD 的类并在前者上使用 std::move 。

# iphone - 在相机拍摄时收集 GPS 位置和指南针方向？

> ID：11589032
> 
> 赞同：1
> 
> 时间：2012-07-21T02:35:38.853
> 
> 标签：iphone, objective-c, ios

我的应用程序目前使用带有自定义叠加层的相机来拍摄和保存照片。

理想情况下，我还想在拍摄照片时收集以下 3 个参数：

1.  精确的 GPS 定位
2.  指南针方向
3.  手机倾斜

我主要专注于获取项目 1 和 2。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:37:59.167

您应该在 viewController 的 .h 文件中声明几个变量

```
float locLat;   //for latitude
float locLon;   //for longitude
float direction;  // for angle in radian
CLLocationManager *Manager; 
```

在 viewdidload 方法的 .m 文件中

```
Manager = [[CLLocationManager alloc] init];
Manager.delegate = self; 
Manager.desiredAccuracy = kCLLocationAccuracyBest; 
Manager.distanceFilter = 1.0; 
[Manager startUpdatingLocation];
[Manager startUpdatingHeading]; 
```

这些委托方法将在您获取位置更新的位置调用

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    userlat = newLocation.coordinate.latitude;
    userlon = newLocation.coordinate.longitude;
} 
```

这将为您提供指南针值更新

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading 
{
    float direction = newHeading.trueHeading;    
} 
```

您可以在 imagepicker 的 didFinishPickingMediaWithInfo 委托方法中使用这三个值。

# c++ - 如何在不读/写密钥文件的情况下使用 crypto++？

> ID：11589036
> 
> 赞同：2
> 
> 时间：2012-07-21T02:36:45.423
> 
> 标签：c++, rsa, crypto++

我正在使用 Crypto++ RSA api 加密和解密某些东西，RSAES_OAEP_SHA_Encryptor 和 RSAES_OAEP_SHA_Decryptor 都需要一个存储 pub/pri 密钥的文件。</p>

:( ，但我需要将密钥存储在我的 C++ 代码变量中，有什么方法可以避免访问文件吗？

还是有比 Crypto++ 更好的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:03:55.123

粗略浏览一下用户指南和 API 文档表明您应该能够将 FileSource 替换为[StringSource](http://www.cryptopp.com/docs/ref/class_string_source.html#a86185516e7339e3a6192be9b88493a00)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T08:17:34.103

Crpyto++ [Keys and Formats](http://www.cryptopp.com/wiki/Keys_and_formats) wiki 页面深入介绍了这一点。您可以使用`DEREncodePrivateKey`、`DEREncodePublicKey`、`BERDecodePrivateKey`和`BERDecodePublicKey`。这是带有两个示例的简短介绍。

第一个使用 DER 编码将密钥保存到文件中。

```
ByteQueue q1;
publicKey.DEREncodePublicKey(q1);

FileSink fs1("key_1.der", true);
q1.TransferTo(fs1); 
```

第二个使用 DER 编码将密钥保存到字符串中。

```
ByteQueue q2;
publicKey.DEREncodePublicKey(q2);

string key_2;
StringSink ss2(key_2);
q2.TransferTo(ss2); 
```

您可以使用`BERDecodePublicKey`来恢复已保存的密钥。

使用私钥时，请使用`DEREncodePrivateKey`和`BERDecodePrivateKey`。

# openerp - 比较字符串两个字段

> ID：11589038
> 
> 赞同：-1
> 
> 时间：2012-07-21T02:37:00.853
> 
> 标签：openerp

我只是编辑我的 OpenERP，但是……我有点困惑

如何比较字段 A 和字段 B 但它不应该是同一个字符串

这是我的代码

```
def check_description(self, cr, uid,ids, context=None):
    field = self.browse(cr, uid, ids, context=context)
    check = True
    for field in fields:
        check = check and (not field.A==field.B)
    return check
_constraints = [(_check_description, 'Please use a different string',['Warning','Description'])] 
```

但是......然后我打电话使用on_change。没有回应

请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T04:09:30.380

我看到了你的代码，但它不符合标准，它需要很少的 imp 如下所示

```
def check_description(self, cr, uid,ids, context=None):
    for record in self.browse(cr, uid, ids, context=context):
        if record.A==record.B:
            return False
    return True
_constraints = [(_check_description, 'Please use a different string',['Warning','Description'])] 
```

如果您继续检查更多记录，则应在发现未匹配项后立即中断循环，它将继续等待。第二件事`_constraints`是触发保存记录，因此如果`on_change`确定 `_constraints`块不会被执行，但是如果您想要 on_change 上的相同功能，您需要编写 on_change 并触发并且如果找到相同的值使用`raise osv.except_osv("", "")`这将显示屏幕上的正确消息。

问候。

# java - 如何正确使用此 Java 正则表达式的负前瞻？

> ID：11589041
> 
> 赞同：3
> 
> 时间：2012-07-21T02:37:35.660
> 
> 标签：java, regex, negative-lookahead

我希望这个 Java 正则表达式匹配两个括号之间的*所有文本：*

```
%(.*?)\((.*?)(?!\\)\) 
```

显示评论：

```
%(.*?)      # match all text that immediately follows a '%'
\(          # match a literal left-paren
(.*?)       # match all text that immediately follows the left-paren
(?!\\)      # negative lookahead for right-paren: if not preceded by slash...
\)          # match a literal right-paren 
```

但它没有（如本[测试](http://fiddle.re/rcyg)所示）。

对于此输入：

> `%foo(%bar \(%baz\)) hello world)`

我期待`%bar \(%baz\)`但看到`%bar \(%baz\`（没有逃脱的右括号）。我猜我对负前瞻结构的使用在某种程度上是不正确的。有人可以解释我的正则表达式的问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:07:35.443

我解决了这个问题。**当我实际上需要负后瞻**时，我正在使用负前瞻。

正则表达式应该是：

```
%(.*?)      # match all text that immediately follows a '%'
\(          # match a literal left-paren
(.*?)       # match all text that immediately follows the left-paren
(?<!\\)     # negative lookbehind for right-paren: if not preceded by slash...
\)          # match a literal right-paren 
```

[此处](http://fiddle.re/6g8v)演示了此修复程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:46:11.923

你甚至不需要环顾四周。只需使用否定字符类`[^\\]`并将其包含在组中：

```
%(.*?)\((.*?[^\\])\) 
```

# javascript - 是否可以使用外部变量从另一个函数调用一个函数？

> ID：11589042
> 
> 赞同：0
> 
> 时间：2012-07-21T02:37:37.653
> 
> 标签：javascript, node.js

我创建了一个创建会话 ID 的函数

```
sessionId = ot.create_session(location, function(sessionId){
    console.log('The session ID is: ' + sessionId + '++++++++');
    return sessionId;
}); 
```

我可以从函数内部打印出会话 ID，但不能从函数外部访问它。

* * *

失败了，我想调用一个函数，将变量传递给函数

```
sessionId = ot.create_session(location, function(sessionId){
    console.log('The session ID is: ' + sessionId + '++++++++');
    sendToUser(sessionId);
}); 
```

但是，我需要 sendToUser 来获得更多数据，即先前声明的变量*data*

所以..我会这样做

```
sessionId = ot.create_session(location, function(sessionId){
    console.log('The session ID is: ' + sessionId + '++++++++');
    sendToUser(sessionId);
});

sendTo User(sessionId, data){
} 
```

但是，这也不起作用

整个代码位于： http: [//pastebin.com/CdV3rdh0](http://pastebin.com/CdV3rdh0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:01:28.723

以下片段：

```
setTimeout(function() {
   console.log("I'm first! Am I?"); // #2
}, 0);

console.log("Hahah, I'm first!"); // #1 
```

*会首先*登录“哈哈，我是第一个！” 然后“我是第一个！我是吗？” 到控制台。为什么？

javascript 解释器首先从上到下运行任何函数，然后再执行其他任何操作（例如在零秒后执行回调函数）。这是因为 javascript 中的函数通常是非阻塞的，并且 IO 是异步完成的。这意味着， setTimeout 不会等到它作为第一个参数得到的匿名函数被执行，而只是注册函数回调以在零秒内执行。它在解释器到达文件末尾后立即执行。

因为`ot.create_session`需要将文件写入磁盘来创建会话，所以 sessionId 仅在回调函数内部可用，并且您永远无法从那里获取 sessionId，因为当回调函数被调用时，外部函数已经执行完毕整个上下文已经消失了:)

为什么你仍然需要回调函数外部的会话 id？`data`for的第二个参数`sendToUser`似乎也可以在回调函数中使用。简单地写`sendToUser(sessionId, data)`。

# cpu-cache - 获取 2 种不同的 L1 icache 行大小

> ID：11589043
> 
> 赞同：4
> 
> 时间：2012-07-21T02:37:39.057
> 
> 标签：cpu-cache

我在我的 PC 上使用 Ubuntu 12.04 和 intel i5 450。我使用了两种方法来获取一级指令缓存的缓存行大小。但结果不同。

```
firo@snow:~/ws$ getconf LEVEL1_ICACHE_LINESIZE

32

firo@snow:~/ws$ cat /sys/devices/system/cpu/cpu0/cache/index1/coherency_line_size 

64 
```

有什么不对？太混乱了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-25T02:26:02.357

给定一个 Intel CPU 并假设标准 Linux/glibc 并且没有`cpuid`...

`getconf`从/报告的缓存值`sysconf()`来自 glibc 的 [i386/sysconf.c](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/unix/sysv/linux/i386/sysconf.c;h=9896099c3bffd973629841555fc0db3c1528356c;hb=8fe89494e6516048759425ec30d8878a6233e00f#l459)。sysfs 中的那些来自[intel_cacheinfo.c](https://github.com/torvalds/linux/blob/master/arch/x86/kernel/cpu/intel_cacheinfo.c#L_371)。

最明显的区别是 sysfs 只返回来自`cpuid`4 的值，而`sysconf()`首先查看`cpuid`2 并且只检查`cpuid`4 如果其中一个字节是`0xFF`. sysconf.c 中 0x09 的条目之间存在差异：

```
 { 0x09,  4, 32, M(_SC_LEVEL1_ICACHE_SIZE),   32768 }, 
```

以及[Intel® 64 and IA-32 Architectures Software Developer's Manual 的](http://download.intel.com/products/processor/manual/325462.pdf#page=628)表 3-22 ：

> 09H | 缓存 | 一级指令缓存：32KBytes，4-way set associative，64 byte line size

所以它看起来像 glibc 中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:07:49.167

getconf 返回一个内核配置值，其语义由内核代码决定，而 /sys 则返回 cpu 的物理特性。要了解差异，您需要检查内核配置变量在内核代码中的使用方式。

# javascript - 获取点击图片的类并修改对应的表单域

> ID：11589046
> 
> 赞同：0
> 
> 时间：2012-07-21T02:37:55.890
> 
> 标签：javascript, jquery

我被这个任务困住了：

我有一个附带 onclick="myFunction(this);" 的函数 到我页面的数十张图片。在函数内部，我检索点击图像的类名。最后，我想查看一个 html 表单并修改一个与检索到的类具有相同 id 的输入字段。

这是一个澄清的例子：

1.  用户单击带有 class="green" 的图像
2.  我们找到 id="green" 的表单的输入字段并将其值更改为 1

或者

1.  用户单击带有 class="red" 的图像
2.  我们找到 id=red" 的表单的输入字段并将其值更改为 1

等等..

我有大部分代码，但我似乎没有得到的是我应该如何使用检索到的图像类在表单中找到相应的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:45:53.080

如果您使用的是 jQuery，并且我假设您是因为您将问题标记为“jquery”，那么您不想要一个`onclick=...`，您想用 jQuery 分配处理程序：

```
$("img").click(function() {
    $("#" + $(this).attr("class")).val("1");
    // or
    $("#" + this.className).val("1");
}); 
```

但是使用您现有的`myFunction()`，您可以这样做：

```
function myFunction(el) {
    var matchingInput = document.getElementById(el.className);
    if (matchingInput)
        matchingInput.value = "1";
} 
```

如果您要查找的元素具有 id，则“查看 html 表单”的概念实际上并不适用，因为（如果您的 html 有效）将只有一个元素具有任何给定的 id，因此您可以获得参考直接使用`document.getElementById()`或等效的 jQuery/CSS 选择器添加到该元素`$("#someid")`。

Note that using the `class` attribute for this purpose makes it impossible to assign other classes to the same img elements, so I'd suggest you instead use a `data-xxx` attribute:

```
<img data-relatedFieldId="field1" class="someclass1 someclass2" src="..."> 
```

And then in your function:

```
$("#" + $(this).attr("data-relatedFieldId")).val("1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T02:42:09.977

您可以将类名与`#`符号连接并选择输入标签：

```
 var clas = $(this).attr('class') // if image has only 1 class 
 $('#' + clas).val('1') 
```

# c# - 当 ChildWindow 有一个 ShowInTaskBar = false 的 ChildWindow 并且所有任务栏消失时，ShowInTaskBar 错误

> ID：11589047
> 
> 赞同：0
> 
> 时间：2012-07-21T02:38:08.633
> 
> 标签：c#, wpf

我有一个窗口 WindowA，它将使用 ChildWindowB.Owner = WindowA 打开 ChildWindowB。在 ChildWindowB 中，我想用 ChildWindowC.Owner = ChildWindowB 和 ChildWindowC.ShownInTaskBar = false 打开一个 ChildWindowC。

问题是当我打开 ChildWindowC 时，WindowA 和 ChildWindowB 的任务栏会消失，但如果 ChildWindowC 关闭，任务栏就会出现。

这是WPF的错误还是我做错了什么？

（请参阅此截屏视频[http://screencast.com/t/a7rMTOOpMzvN](http://screencast.com/t/a7rMTOOpMzvN) - 上传新截屏视频）

[我在https://skydrive.live.com/?cid=c6d447771583bdab&resid=C6D447771583BDAB!104&id=C6D447771583BDAB!104](https://skydrive.live.com/?cid=c6d447771583bdab&resid=C6D447771583BDAB!104&id=C6D447771583BDAB!104)上传了我的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:19:21.380

我看了你的截屏。对我来说，它看起来不像是一个错误。看起来 Windows 正在根据您打开的最顶层表单来判断 alt+tab 菜单中显示的内容。

*   当您只使用 ShowInTaskbar = true 打开 WindowA 时，它会在 alt+tab 菜单中显示 MainWindow。
*   当您打开同样具有 ShowInTaskbar = true 的 WindowB 时，它会在菜单中显示该表单的标题 (ChildWindowB)。
*   一旦你打开 WindowC，ShowInTaskbar = false，Windows 会判断使用它的设置，所以它从 alt+tab 菜单中隐藏了你的应用程序。

我没有参考来证明这是正在发生的事情......只是我的观察。

我不确定为什么当其他两个窗口可见时您决定隐藏最后一个窗口。您的所有表单是否都单独显示在任务栏中？我在那个截屏视频中看不到它。

# macros - 关于 Makefile 的语法

> ID：11589051
> 
> 赞同：0
> 
> 时间：2012-07-21T02:39:24.693
> 
> 标签：macros, makefile, grammar, target, prerequisites

```
WINCONFS = WindowsDebugMinGW WindowsReleaseMinGW

$(WINCONFS) : WINTOOLS=CC=gcc.exe CCC=g++.exe CXX=g++.exe AS=as.exe CND_PLATFORM=Cygwin-Windows

WindowsDebugMinGW : BUILDCONF=WindowsDebugMinGW
WindowsReleaseMinGW : BUILDCONF=WindowsReleaseMinGW 
```

任何知道 'a : b=c=de=fg=h' <=此语法含义的人？代码在同一行，没有添加点击命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:44:02.120

它设置的值`$(WINTOOLS)`仅适用于那些特定目标。

请参阅有关[*特定于目标的变量值*](http://www.gnu.org/software/make/manual/make.html#Target_002dspecific)的文档。

# rspec - 请求规格与设计

> ID：11589055
> 
> 赞同：2
> 
> 时间：2012-07-21T02:39:46.927
> 
> 标签：rspec, devise, capybara, omniauth

我希望这应该很容易回答。我确实环顾四周，找不到答案，即使它可能是直截了当的。

当运行我的规范和

```
visit correspondences_path 
```

我明白了

```
Failure/Error: visit '/correspondences'
 ActionView::Template::Error:
   No route matches {:controller=>"users/omniauth_callbacks", :action=>"passthru", :provider=>:facebook}
 # ./app/views/layouts/_navigation.html.erb:12:in `_app_views_layouts__navigation_html_erb___642964846_100119950' 
```

显然，我的导航栏上有omniauth 按钮，尽管在浏览器中一切正常。该页面仅在用户通过 Devise 身份验证时才可见：

```
user = FactoryGirl.create(:user_with_correspondences, correspondences_count: 1) 
```

然后我，

```
sign_in_as_a_valid_user(user) 
```

这是我在规范/支持中定义的助手......所以一切都应该正常工作，我想。

如果我，相反

```
get correspondences_path 
```

我得到的只是页面上的一个 doctype 声明（当打印 page.html 时），并且任何其他断言都通过了，即使它们不应该通过。

我很含糊，因为我确信我在这里做了一些愚蠢的事情，有人会很快向我指出，而不必发布我所有不是很有趣的代码。提前表示感谢。

路线很简单：

```
authenticated :user do
  root :to => 'correspondences#index'
end

root :to => 'home#index'

devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" }
resources :users, :only => [:show, :index]

resources :correspondences
resources :recipients 
```

支持/request_macros.rb

```
module ValidUserRequestHelper
  def sign_in_as_a_valid_user(user)
    post_via_redirect user_session_path, 'user[email]' => user.email, 'user[password]' => user.password
  end 
```

并在 spec_helper.rb

```
...
config.include ValidUserRequestHelper, :type => :request
...
end 
```

所以在规范中：

```
...
it "shold display a users corresponces" do
  user = FactoryGirl.create(:user_with_correspondences, correspondences_count: 1)
  sign_in_as_a_valid_user(user)
  visit correspondences_path
  page.all('.correspondences').count == 3 #never gets here
end 
```

令人沮丧...我不明白为什么当我不测试它时它甚至尝试链接到 facebookomniauth...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T18:58:49.723

就我而言， user.rb 上的设计配置行与身份验证提供程序名称不匹配。我正在尝试读取`=link_to "login using Twitter", user_omniauth_authorize_path(:twitter)`配置（请注意我缺少一个“t”）`user.rb``devise :omniauthable, :omniauth_providers => [:twiter]`

# mysql - 在 mqsql 查询语句中使用变量

> ID：11589057
> 
> 赞同：0
> 
> 时间：2012-07-21T02:40:08.663
> 
> 标签：mysql

我想删除硬编码的 Item_code 并放置一个 $whereis 变量。但是这样做的正确语法是什么？

```
$query = "SELECT *
    FROM `stock`
    WHERE Item_code = '{$testingone}' AND size='{$sizurl}'
    "; 
```

# mysql - Sakila Schema 未导入 MySQL

> ID：11589060
> 
> 赞同：1
> 
> 时间：2012-07-21T02:40:56.720
> 
> 标签：mysql

我在 Mysql5.0.51b 中导入 Sakila 数据库时遇到问题。具体问题出在“DELIMITER SYNTAX”中，我尝试了一些替代方法，但没有奏效。

我使用 APPServr。

MYSQL 消息错误：

```
 --
-- Triggers for loading film_text from film
--
DELIMITER;

MySQL said: 

#1064 - You have an error in your SQL syntax; check the manual that 
 corresponds to your MySQL server version for the right syntax to use near 
'DELIMITER' at line 1 
```

分隔符代码：

```
DELIMITER ;;
CREATE TRIGGER `ins_film` AFTER INSERT ON `film` FOR EACH ROW BEGIN
    INSERT INTO film_text (film_id, title, description)
        VALUES (new.film_id, new.title, new.description);
  END;;

CREATE TRIGGER `upd_film` AFTER UPDATE ON `film` FOR EACH ROW BEGIN
    IF (old.title != new.title) OR (old.description != new.description) OR (old.film_id != new.film_id)
    THEN
        UPDATE film_text
            SET title=new.title,
                description=new.description,
                film_id=new.film_id
        WHERE film_id=old.film_id;
    END IF;
  END;;

CREATE TRIGGER `del_film` AFTER DELETE ON `film` FOR EACH ROW BEGIN
    DELETE FROM film_text WHERE film_id = old.film_id;
  END;;

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:12:50.953

我不熟悉`APPServr`，并且会怀疑它在发送到 MySQL 之前扭曲了一些命令（这​​不是指责，只是怀疑）。

我已经`sakila`在课堂上成功导入了无数次数据库。在我看来，最好的方法是从命令行客户端简单地`SOURCE`使用它：`mysql`

```
mysql> SOURCE /path/to/sakila-schema.sql
mysql> SOURCE /path/to/sakila-data.sql 
```

否则，您可以通过命令行从 shell/Command 导入：

```
bash$ mysql < /path/to/sakila-schema.sql
bash$ mysql < /path/to/sakila-data.sql 
```

而且，使用 MySQL Workbench，我已经证明这没有问题。

# html - 我似乎无法控制特定元素的样式

> ID：11589077
> 
> 赞同：2
> 
> 时间：2012-07-21T02:43:17.233
> 
> 标签：html, css

有一个图像我想绝对定位并添加一个 z-index，但我似乎无法实现它。

```
 <div>  
   <ul class="etalage">
     <li>
       <img class="etalage_thumb_image" src="codecanyon/demo_files/images/image1_thumb.jpg">
       <img class="etalage_source_image" src="codecanyon/demo_files/images/image1_large.jpg">
     </li>
   </ul>
 </div> 
```

我可以使用以下方法控制过度风格：

```
.etalage {
  margin-right: 50px;
  margin-bottom: 20px;
  clear: both;
} 
```

但这不会影响我想要的源图像：

```
.etalage_source_image {
  position: absolute;
  top: 165px;
  left: 140px;
  z-index: 100;
} 
```

我究竟做错了什么？:_\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:49:17.540

您应该将包装器的位置设置为相对位置，具有相对定位的页面元素使您可以控制在其中绝对定位子元素。

```
.etalage {
    position: relative:
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:45:14.103

```
.etalage {
  margin-right: 50px;
  margin-bottom: 20px;
  clear: both;
  position:relative;
}

.etalage_source_image {
  position: absolute;
  top: 165px;
  left: 140px;
  width: xx;
  height: xx;
  z-index: 100;
} 
```

我认为你应该给你的父母而不是`position:relative`给`ul`div

# jquery - 使用 qtip 自定义提示

> ID：11589079
> 
> 赞同：0
> 
> 时间：2012-07-21T02:43:43.310
> 
> 标签：jquery, jquery-plugins, tooltip, qtip

我对这个[例子的提示很感兴趣。](http://craigsworks.com/projects/qtip/features/#styles)

我当前的 qtip 用于表格单元格。

```
$(document).ready(function()
{
     $('td[title]').qtip();
}); 
```

如何修改它以获得与示例相同的效果？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:12:43.283

将示例中引用的样式对象直接传递给 .qtip() 方法。如果记忆有用：

```
$('td[title]').qtip({
    content: {
        text: 'Neat!'
    },
    style: {
        tip: 'leftMiddle',
        border: {
            width: 10,
            radius: 6,
            color: '#FA6900'
        },
        background: '#F38630',
        color: '#333'
    }
}); 
```

编辑：我还应该提到，除非您指定要放置在工具提示中的内容，否则您将看不到任何内容。这通常也在传递给 qtip 的配置对象中完成。更新了我的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:33:19.057

使用 qtip2 而不是 qtip1 将解决问题。

CSS：

```
.tdStyle{
     background: #123456;
     color: #FEDCBA;
     text-align: left;
     border-radius: 4px;
     border: 2px solid white;
     width: 400px;
       }; 
```

JS：

```
$('td[title]').qtip({
style: {
    classes: 'tdStyle'
}
}); 
```

# php - 将文章的 ID 添加为隐藏输入而不确保它存在于服务器端是否被认为是不好的做法？

> ID：11589082
> 
> 赞同：0
> 
> 时间：2012-07-21T02:44:29.830
> 
> 标签：php, mysql, html, security

假设我有以下表格：
1\. `comments`: `c_id`, `a_id`, `body`
2\. `articles`: `a_id`, `title`,`body`

我有一个评论系统（类似于 SO）。但是当然我必须提供要发布的文章的 ID，并且有很多方法可以做到这一点。

因此，我采用了简单的方法，即使用文章 ID 创建一个隐藏输入，就像这样：
`<input type="hidden" name="article_id" value="1" />`
然后简单地将其发布到服务器端。并使用 MySQL 插入到表中。但是，不良用户是否可以更改隐藏输入中的数据？

例如，如果他更改隐藏的输入并输入无效的 ID，或者不存在的文章或我真正不需要的任何内容。这是我应该考虑的事情吗？因为唯一会发生的是无效评论，仅此而已。因为我得到了`intval`所有整数输入，所以我不害怕任何类型的 SQL 注入。

底线：我是否真的关心无效评论，并首先发出额外的查询检查文章是否存在，这将占用更多资源，以确保不会插入无效的无害评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:50:19.743

用户可以更改数据是 100% 正确的。底线是，客户端上的任何东西都可以被客户端修改（好或坏）。

无论您如何使用它，我肯定会验证来自客户端的 ID。如果您有正确的外键关系设置，将无效 ID 插入数据库在技术上应该会失败，但假设您没有设置，那么它可能会导致数据库中充满无效数据。

此外，如果您跟踪所有提交的“无效”ID 以及提交它们的用户，您可以（将来）实现可以阻止/禁止用户发表评论的逻辑等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T02:46:20.363

您应该始终检查以确保用户没有插入错误/无效数据。

永远不要相信客户。更改隐藏值非常容易

现在您的数据库中应该有外键约束，这将部分保护您免受此影响，但是如果他们将文章 ID 更改为有效的东西，但也许他们无权访问（文章已锁定）您想要保护 vs那

# hadoop - Hive 中的日期差异小于 15 分钟

> ID：11589084
> 
> 赞同：1
> 
> 时间：2012-07-21T02:45:28.723
> 
> 标签：hadoop, mapreduce, hive, hiveql

下面是我的查询，在最后一行中，我试图查看日期之间的差异是否在 15 分钟内。但是每当我运行以下查询时。

```
SELECT TT.BUYER_ID , COUNT(*) FROM
(SELECT testingtable1.buyer_id, testingtable1.item_id, testingtable1.created_time from (select user_id, prod_and_ts.product_id as product_id, prod_and_ts.timestamps as timestamps from testingtable2 LATERAL VIEW explode(purchased_item) exploded_table as prod_and_ts where to_date(from_unixtime(cast(prod_and_ts.timestamps as BIGINT))) = '2012-07-09') prod_and_ts RIGHT OUTER JOIN (SELECT buyer_id, item_id, rank(buyer_id), created_time, UNIX_TIMESTAMP(created_time)
FROM (
    SELECT buyer_id, item_id, created_time
    FROM testingtable1
    where to_date(from_unixtime(cast(UNIX_TIMESTAMP(created_time) as int))) = '2012-07-09'
    DISTRIBUTE BY buyer_id
    SORT BY buyer_id, created_time desc
) a
WHERE rank(buyer_id) < 5) testingtable1 ON (testingtable1.item_id = prod_and_ts.product_id AND testingtable1.BUYER_ID = prod_and_ts.USER_ID 
AND abs(datediff(testingtable1.created_time,FROM_UNIXTIME(cast(prod_and_ts.timestamps as BIGINT)))) <= 15) where prod_and_ts.product_id IS NULL ORDER BY testingtable1.buyer_id, testingtable1.created_time desc) TT GROUP BY TT.BUYER_ID; 
```

我总是得到例外 -

```
FAILED: Error in semantic analysis: line 10:144 Both Left and Right Aliases
Encountered in Join 15 
```

我的查询有什么问题吗？或者在 Hive 中我们不能以分钟为单位计算日期之间的差异？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:59:26.847

我认为问题在于您的加入。来自[Hive 语言手册](http://hive.apache.org/docs/r0.9.0/language_manual/joins.html)：

> Hive 仅支持等式连接、外连接和左半连接。Hive 不支持非相等条件的连接条件，因为很难将此类条件表示为 map/reduce 作业。

# iphone - 如何以编程方式使 UIToolbar 覆盖？

> ID：11589085
> 
> 赞同：0
> 
> 时间：2012-07-21T02:45:43.730
> 
> 标签：iphone, ios, xcode

我的大部分相机覆盖屏幕都被不透明的覆盖覆盖。对于剩下的部分，我想添加一个`UIToolbar`带有几个按钮的。请务必提及如何以编程方式使这些按钮可点击！

这是我添加叠加层的方法，它看起来很完美。

```
- (UIView*)CommomOverlay  {
    //Both of the 428 values stretch the overlay bottom to top for overlay function. It doesn't cover it. 
    UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,428)];
    UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,428)];
    [FrameImg setImage:[UIImage imageNamed:@"newGraphicOverlay.png"]];
    [view addSubview:FrameImg];
    return view; 
} 
```

同样，我将如何添加一个工作工具栏（可点击且功能齐全，上面有 2 个按钮）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:43:12.683

试试这个：（在你的 viewDidLoad 或 viewWillAppear 中）

```
//create toolbar and set origin and dimensions
UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 428, 320, 32)];

//create buttons and set their corresponding selectors
UIBarButtonItem *button1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(button1Tap:)];
UIBarButtonItem *button2 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRewind target:self action:@selector(button2Tap:)];

//if you want custom icons, use something like this:
UIBarButtonItem *button3 = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"icon1_portrait.png"] landscapeImagePhone:[UIImage imageNamed:@"icon1_landscape.png"] style:UIBarButtonItemStylePlain target:self action:@selector(button3Tap:)];

//add buttons to the toolbar
[toolbar setItems:[NSArray arrayWithObjects:button1, button2, nil]];

//add toolbar to the main view
[self.view addSubview:toolbar]; 
```

*   像这样创建选择器：

    ```
    -(void)button1Tap:(id)sender {
        NSLog(@"Button 1 was tapped!");
        // do whatever needs to happen
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T10:22:37.367

如果我对您的理解正确，您所要做的就是`UIToolBar`在函数中添加一个：

```
- (UIView*)CommomOverlay  {
    //Both of the 428 values stretch the overlay bottom to top for overlay function. It doesn't cover it.
    UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,428)];
    UIImageView *FrameImg = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,428)];
    [FrameImg setImage:[UIImage imageNamed:@"newGraphicOverlay.png"]];
    UIToolbar *myToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    UIBarButtonItem *myBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(myFunction)];
    [myToolBar setItems:[NSArray arrayWithObjects:myBarButtonItem, nil] animated:YES];
    [FrameImg addSubview:myToolBar];
    [view addSubview:FrameImg];
    return view;
} 
```

# jquery - JQM：可编程地更改输入的标签

> ID：11589096
> 
> 赞同：1
> 
> 时间：2012-07-21T02:49:59.753
> 
> 标签：jquery, jquery-mobile

我有一个带有标签的文本输入：

```
<li data-role="fieldcontain">
<label for="number">Amount:</label>
<input type="number" name="number" id="vitalamount" value=""  />
</li> 
```

我现在正在尝试更改输入的标签，但以下代码不起作用。

```
$("#vitalamount").attr("label","something else"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:55:44.880

`attr`修改元素的属性而不是它的兄弟元素，您可以使用`prev()`or`siblings`来选择`label`和更改它的文本：

```
$("#vitalamount").siblings("label").text('something else'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:02:37.890

如果您没有在标签标签中包含表单字段，那么您应该使用 for 属性将其与您要标记的表单元素的 id 相关联。

[参考](http://webdesign.about.com/od/forms/a/aa052206.htm/)

所以，放入`id`属性`for`not `name`。

数量：

现在，如果你的`id`输入为`vitalamount`

```
$('label[for="vitalamount"]').html('New value of label'); 
```

# java - 如何调用最具体版本的重载方法？

> ID：11589098
> 
> 赞同：0
> 
> 时间：2012-07-21T02:50:13.020
> 
> 标签：java, dispatch

我有一个原始的碰撞系统，它检查每对对象以查看它们是否发生碰撞。

```
int size = drawables.size();
for(int i = 0; i < size; ++i)
{
    for(int j = i+1; j < size; ++j)
    {
        Drawable drawable = drawables.get(i);
        Drawable drawable2 = drawables.get(j);
        if(CollisionDetector.areColliding(drawable, drawable2))
        {
            CollisionHandler.handleCollision(drawable, drawable2);
        }
    }
} 
```

`CollisionDetector`和`CollisionHandler`都有各自功能的通用和特定版本，例如

```
public static boolean handleCollision(Drawable drawable1, Drawable drawable2)
public static boolean handleCollision(Player player, SolidRectangle rectangle)
public static boolean handleCollision(Player player, Snowflake snowflake) 
```

其中`Player`, `SolidRectangle`, 和`Snowflake`都延伸`Drawable`。我希望上面的循环调用每个可用方法的最具体版本，但目前它只会调用超类的那个`Drawable`。有没有办法在不手动检查类的情况下做到这一点`instanceof`？

我可以从以下示例中看到这可能是不可能的： If `B extends A`and `C extends A`and I write the methods

```
public void foo(A a, C c)
public void foo(B b, A a) 
```

然后有

```
A objectB = new B();
A objectC = new C();
foo(objectB, objectC); 
```

的电话`foo`会模棱两可，但我希望有人可能比我对此事有更多的了解。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T02:58:30.517

[访问者设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)为Java中的[多分派](http://en.wikipedia.org/wiki/Multiple_dispatch)提供了一种替代方案。

除此之外，还有一些选择：

有一个过时的[MultiJava 项目](http://multijava.sourceforge.net/)在 Java 中实现了多分派支持，还有几个其他项目使用反射来支持 Java 中的多方法：Java [Multimethods](http://www.lshift.net/blog/2006/06/23/multimethods-for-java)，[Java Multimethods Framework](http://igm.univ-mlv.fr/~forax/works/jmmf/)。也许还有更多。

您还可以考虑另一种支持多方法的基于 Java 的语言，例如[Clojure](http://clojure.org/multimethods)或[Groovy](https://blogs.oracle.com/sundararajan/entry/multimethods_in_groovy)（这些链接指向示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:13:47.177

您还需要确保它`CollisionHandler.handleCollision(a,b)`等同于`CollisionHandler.handleCollision(b,a)`. 使用正常的方法分派解决了一半的问题：

```
drawable.handleCollision(drawable2) 
```

但要做到这一点有点像尝试实现在`equals()`不同类型的对象之间工作所需的（有点乏味的）检查。

从概念上讲，您似乎正在寻找一种方法来选择基于（无序）运行时类型*对调用的函数。*类似 a 的东西`HashMap<Set<Class>,CollisionHandler>`，除了最后我检查了 Java 不支持泛型泛型（而且 Set 可能效率不高）。沿着这些思路最有效的解决方案是`HashMap<ClassPair,CollisionHandlerFunctor>`通过反射填充（确保您同时获得 ClassPair(Player.class,Snowflake.class) 和 ClassPair(Snowflake.class,Player.class)，但即便如此它看起来也不像它可以非常有效。

# vba - VBA 将字符串转换为日期

> ID：11589099
> 
> 赞同：7
> 
> 时间：2012-07-21T02:50:14.627
> 
> 标签：vba, excel, vb6

我在 Excel 表中有以下格式的数据：

```
项目代码                            交货日期
5456987 24.01.2009
5456988                                          
5456989 12.24.2009
5456990 2009 年 12 月 24 日

```

我已将 DeliveryDate 的值存储在一个数组中。我需要对日期的基础做出决定，然后将结果打印在新的工作表中。所以我必须将值转换为数组：

```
Dim current as Date, highest as Date, result() as Date
For Each itemDate in DeliveryDateArray
    current = CDate(itemDate)
    if current > highest then
         highest = current
    end if
    ' some more operations an put dates into result array
Next itemDate
'After activating final sheet...
Range("A1").Resize(UBound(result), 1).Value = Application.Transpose(result) 
```

不幸的是，CDate() 函数抛出错误：

> 运行时错误“13”：
> 
> 类型不匹配

VBA中是否有一个函数可以：

*   解析*任何*日期格式的字符串并返回一个日期对象来处理。
*   如果字符串为空或格式错误（用于循环中的比较），则返回一个空的日期对象。

**编辑：**

要重现错误，只需运行 `myDate = CDate("24.01.2009")`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T04:00:35.803

尝试使用`Replace`，看看它是否适合你。正如我所看到的，上面已经提到过几次的问题是 CDate 函数在周期上阻塞。您可以使用替换将它们更改为斜杠。要回答您关于 vba 中可以解析任何日期格式的函数的问题，您没有任何非常有限的选项。

```
Dim current as Date, highest as Date, result() as Date 
For Each itemDate in DeliveryDateArray
    Dim tempDate As String
    itemDate = IIf(Trim(itemDate) = "", "0", itemDate) 'Added per OP's request.
    tempDate = Replace(itemDate, ".", "/")
    current = Format(CDate(tempDate),"dd/mm/yyyy")
    if current > highest then 
        highest = current 
    end if 
    ' some more operations an put dates into result array 
Next itemDate 
'After activating final sheet... 
Range("A1").Resize(UBound(result), 1).Value = Application.Transpose(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:06:02.630

看起来它可能会在空数据行上引发错误，您是否尝试在运行 CDate() 函数之前确保 itemDate 不为空？我想这可能是你的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T08:58:05.163

我使用了这段代码：

ws.Range("A:A").FormulaR1C1 = "=DATEVALUE(RC[1])"

A 列将是 mm/dd/yyyy

RC[1] 是 B 列，TEXT 字符串，例如 01/30/12，这不是日期类型

# ios - ios的正则表达式

> ID：11589103
> 
> 赞同：0
> 
> 时间：2012-07-21T02:50:40.370
> 
> 标签：ios, regex

我需要从 NSString 中删除/替换除字母数字、-、& 之外的所有字符。我如何构造我的正则表达式以实现我想确保用户不会在 uitextfield 中输入除字母数字、& 和 - 以外的任何字符。我怎样才能做到这一点。以前我在 shouldchangecharactersineange 中处理了一些事情，但现在过滤器变得越来越大，无法处理 if 条件。正则表达式可能是我的方案的最佳选择。我很欣赏你的想法和意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:29:23.610

```
-(BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)r replacementString:(NSString*)s
{
  NSCharacterSet * reject = [[NSCharacterSet characterSetWithCharactersInString:@"QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890-&"] invertedSet];
  if ([s rangeOfCharacterFromSet:reject].length)
  {
    return NO;
  }
  return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:18:21.113

您可以使用该`NSString`方法`rangeOfCharctersFromSet:`进行此检查。

首先构造一个包含你允许的字符的字符集，然后用来`invertedSet`获取所有不允许的字符的集合。然后在您的字符串中搜索此集中的字符范围。如果未找到集合中的任何字符，则返回范围值为`{NSNotFound, 0}`

```
NSMutableCharacterSet *legalCharacters = [NSCharacterSet alphanumericCharacterSet];
[legalCharacters addCharactersInString:@"-&"];
NSCharacterSet *illegalCharacters = [legalCharacters invertedSet];

NSString *testString = @"ThisStringWillFail@#$%";

if ([testString rangeOfCharacterFromSet:illegalCharacters].location == NSNotFound) {
    // string passed validation
} else {
    // string failed validation
} 
```

# ios - iOS 上的低级共享内存

> ID：11589105
> 
> 赞同：2
> 
> 时间：2012-07-21T02:51:42.823
> 
> 标签：ios, objective-c, ios-simulator, ipc, shared-memory

我正在尝试在 iOS 上构建一块共享内存。它编译和链接，但`shmget()`在最无辜的参数上抛出一个 SIGSYS 信号：

```
NSString *p = [[NSBundle mainBundle] pathForResource:@"crash" ofType: nil];
key_t tok = ftok([p UTF8String], 918273);
int mid = shmget(tok, 4096, IPC_CREAT|S_IRUSR|S_IWUSR); 
```

`tok`是一个很大的正整数，而不是 -1。大小 - 尝试 1024，效果相同。

iOS 上是否支持 SysV 共享内存？头文件和库都存在，否则编译器/链接器会抱怨。相同的代码适用于模拟器。我究竟做错了什么？

我的兴趣源于[这个问题](https://stackoverflow.com/questions/11588474/quincykit-plcrashreporter-provide-description-before-the-crash)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:42:04.417

该`shm_open()/mmap()`组合在模拟器和设备（在 iOS 4 上测试）上都像宣传的那样工作，无需任何明确的权限更改。

注意：`shm_open()`奇怪地记录为可变参数。实际上，您需要使用访问掩码指定第三个参数 - 类似`S_IRUSR`标志的组合或八进制`chmod`值。

编辑：看起来它在 iOS 7 中坏了。即使指定了 O_CREAT 标志，shm_open 也会返回 -1 和 errno=2 (ENOENT)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:26:49.863

在 iOS 上，你根本不能使用共享内存我不知道确切的细节，但我知道 a）它是为了安全，b）它是沙盒环境的一部分

所以我从我自己和我在越狱场景中的存在知道上面但是这里有一些描述沙盒的链接以及它们如何影响共享内存

[http://www.trailofbits.com/resources/ios4_security_evaluation_paper.pdf](http://www.trailofbits.com/resources/ios4_security_evaluation_paper.pdf)

[http://lists.apple.com/archives/cocoa-dev/2012/Apr/msg00535.html](http://lists.apple.com/archives/cocoa-dev/2012/Apr/msg00535.html)

# visual-studio-2010 - 安装 SQL Server 2012 - 错误：以前的 Visual Studio 2010 实例需要更新

> ID：11589107
> 
> 赞同：40
> 
> 时间：2012-07-21T02:51:53.073
> 
> 标签：visual-studio-2010, sql-server-2012

我正在尝试安装 SQL Server 2012 开发人员版，我可以到达它正在执行安装规则检查的地步，但其中一个规则一直失败：

'需要更新的以前的 Visual Studio 2010 实例'

它基本上表明我需要安装 VS2010 SP1。但是，我确实安装了 VS2010 SP1。我尝试重新应用 VS2010 SP1 并在 SQL Server 2012 媒体上安装 VS2010 补丁，但无济于事。

还有其他人看到这个问题吗？有什么我可以尝试的想法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-20T02:19:32.540

I had this issue too, after following [this guide](http://sqlserver-help.com/2011/12/08/help-getting-visual-studio-service-pack-error-while-installing-sql-server-2012-release-candidate-0-rc0/), it was simply 1 additional patch that was required to get past the

> Rule "Prior Visual Studio 2010 instances requiring update." failed.

Was to locate this file, and patch my machine

> VS10sp1-KB983509.msp

Simply do a file search on the installation media for SQL Server 2012, in my case it was in \redist\VisualStudioShell (whereas in the guide it's listed as being in a different location).

Then hit 're-run'.

![Failed State](../Images/46a44ba37b6c61190d01dd0fa465b848.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-11-24T05:06:21.470

有两种方法：

第一的 ：

在你`CD`的里面`SQL Server 2012`

你可以走这条路`\redist\VisualStudioShell`。

而你最安装这个文件`VS10sp1-KB983509.msp`。

几分钟后，您的问题得到解决。

重新启动计算机，然后启动`SetUp`.`SQL Server 2012`

看这张照片。

![在此处输入图像描述](../Images/980ee158776c352cfa412bd1d904a5fd.png)

第二：

但是如果你想在线下载`Service Pack 1`查看[这个链接](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

并按下载。

下载后运行这个exe文件，让它下载并修复你的VS2010到VS2010 SP1。

然后重新启动你的窗口。

完成此操作后，您可以安装`SQL Server 2012`

![在此处输入图像描述](../Images/2aa8c91922bed8d99a22fd66f0ea71dc.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-02T05:07:53.143

我想安装 SQL Server 2014，同样的故事发生了。我之前安装了 VS2010 和 VS2015。我尝试了所有没有效果的解决方案。最后如果你有新版本的 VS，比如 VS2015 或 VS2017，卸载 VS2010（如果你真的不需要它）。

如果您想在您的系统上安装 VS2010，请先安装 SQL Server，然后再安装 VS2010。安装 SQL Server 时，它使用的是 VS2010 的实例，如果您之前安装过 VS2010，并且是旧版本，则会出现此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T06:21:04.430

我在安装 SQL Server 2014 时遇到了同样的问题。原来这是由于我在 2010 年安装的**Windows Phone 工具包**造成的。如果遇到这种情况，请确保**卸载任何不是最新的 Windows Phone 工具。**

我通过查看日志发现了这一点，可以通过单击打开 HTML 文件的“详细报告”找到该日志。文件路径方便地显示在 HTML 页面中。打开文件所在的目录并查找“Detail.txt”。然后搜索“失败”这个词。

就我而言，有一行显示**WP_[something]**为“已安装”。我搜索了 WP_ 项目，发现了一些关于卸载 Windows Phone 工具包的问题的博客文章。

当我试图卸载 windows phone 时，我遇到了更多麻烦。卸载程序想要安装三个软件包而不是卸载工具包。最终找到这篇博文：http: [//blogs.msdn.com/b/astebner/archive/2010/07/12/10037442.aspx](http://blogs.msdn.com/b/astebner/archive/2010/07/12/10037442.aspx)链接到这个 XNA 清理工具：http: [//blogs.msdn.com/b/ astebner/archive/2009/04/10/9544320.aspx](http://blogs.msdn.com/b/astebner/archive/2009/04/10/9544320.aspx)。

我运行了清理工具，最后 SQL Server 安装程序通过了检查并允许我安装。希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T13:28:56.817

仅安装 Service Pack (VS10sp1-KB983509.msp) 对我来说还不够。

我必须卸载 Visual Studio Team Explorer 2010 才能继续安装 :)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-04T18:50:38.527

我做了之前对这个问题的回答中提供的一切，但仍然有问题。我确实安装了更新，但我再次运行安装程序，在 SQL 2012 安装程序在屏幕上打开时重新应用更新，我可以再次运行检查。完成后，我再次运行检查，它通过了。

# ejs - 你如何预编译 ejs 模板到文件

> ID：11589108
> 
> 赞同：9
> 
> 时间：2012-07-21T02:52:53.197
> 
> 标签：ejs

所以我想将 ejs 模板预编译成 .js 文件

```
var compiled = ejs.compile(source);
fs.writeFileSync(target, 'myTemplateFunction = ' + compiled); 
```

但这会变成

```
function (locals){
   return fn.call(this, locals, filters, utils.escape);
} 
```

将 ejs 模板预编译和写入 .js 文件的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T14:48:47.917

您可以将 templates.js 文件（手动或在代码中）创建为空模块。然后在编译模板后，将编译后的函数附加到空模块上。

```
var ejs = require('ejs');
var fs = require('fs');

fs.writeFileSync('./template.js', 'module.exports = { }', 'utf8');

var compiled = ejs.compile(fs.readFileSync('./example.ejs', 'utf8'));

// Add an example function to the template file that uses the compiled function
require('./template').example = compiled;

// Get the example template again (this could be in another file for example)
var output = require('./template').example;
var html = output({ id: 10, title: 'Output' }); 
```

由于默认情况下[会缓存模块](http://nodejs.org/api/modules.html#modules_caching)，因此您应该可以在`require('./template.js')`任何需要的地方进行缓存，并且它会附加所有预编译的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T01:02:48.670

[Lodash _.template()](https://lodash.com/docs/4.17.4#template)方法在编译期间创建 EJS 模板函数的字符串表示形式，并将其作为*源*属性附加到编译后的函数。您可以将该字符串存储到 JS 文件中，将其嵌入到 HTML 中，或者在睡觉前将其读给您的孙子孙女。

例如：

```
> var _ = require('lodash');
> var compiled = _.template('Hi <%= user %>!');
> compiled({ user: 'Axel' })
"Hi Axel!"
> compiled.source
"function(obj) {
  obj || (obj = {});
  var __t, __p = '';
  with (obj) {
    __p += 'Hi' + ((__t = ( user )) == null ? '' : __t) + '!';
  }
  return __p
}"
> var fs = require('fs')
> var src = 'module.exports = ' + compiled.source;
> fs.writeFileSync('mylittlescript.js', src); 
```

[Webpack 的ejs-loader](https://github.com/okonet/ejs-loader)模块使用这种方法。另请注意，npm package [ejs](https://www.npmjs.com/package/ejs)不提供此类*源*属性。

# azure - ASP .Net 网站 - 无响应

> ID：11589111
> 
> 赞同：0
> 
> 时间：2012-07-21T02:54:18.247
> 
> 标签：azure

我有一个托管在天蓝色云上的 ASP .Net 网站（以前在 Godaddy 共享托管中）该网站基本上是一个多用户测试网站，用户登录并进行在线测试。

该站点一次加载测试的所有问题（40 个数字），并使用 javascript 显示/隐藏向用户一个接一个地显示。并且每个选定的答案都应立即使用确认按钮进行确认，该按钮会进行 ajax 调用以将答案保存到服务器。

现在两个托管服务提供商都给我同样的问题。当有这么多并发用户（我认为）时，答案不会被保存（ajax 调用），并且当单击最终提交按钮（回发）时，页面就会挂起。所以这一定是我的代码的问题。

我昨天创建了一个新的 web 角色实例，前 60 多个测试运行没有任何问题，晚上很少有用户报告错误。所以我猜测一些内存泄漏或某种积累。

我使用 LINQ to SQL 进行数据库操作。

真正的问题是我不知道如何在我们的开发机器中复制这个（负载测试？）。

任何形式的建议或提示表示赞赏。

（如果您需要有关代码或其他详细信息的更多信息，请告诉我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:20:38.490

出于生产目的将应用程序移至 Windows Azure 后，您确实应该拥有[Cerebrata 的诊断管理器](http://www.cerebrata.com/Products/AzureDiagnosticsManager/)的副本。这将使您可以轻松查看所有日志和性能计数器，以确保您解决了正确的问题。

如果没有一些数据，您是否需要扩大、扩大或是否存在对不同资源的争用将很难确定。

我与这家公司或产品没有任何关系，我只是诚实地认为它是完成这项任务的最佳选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:02:16.500

您是否在调试或发布中部署了站点？

当站点以调试模式部署时，我们经历了一些非常古怪的事情。

[调试与发布](https://stackoverflow.com/questions/2446027/c-sharp-debug-vs-release-performance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T05:59:12.267

如果您的站点存在性能问题（考虑到您的代码没有问题），您可以将[VM 的大小](http://msdn.microsoft.com/en-us/library/windowsazure/ee814754.aspx)增加到中型或大型以获取更多资源。

Ans 同时处理流量（多个用户），您可以根据您网站的流量[将您的应用程序](https://stackoverflow.com/questions/2850714/how-does-windows-azure-platform-scale-for-my-app)从 1 个实例扩展到没有实例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T08:26:39.283

要在您的开发网站上轻松复制负载，您可以使用 Visual Studio Web 测试。

它允许记录浏览器会话并重播它，但使用一台或多台机器并行 X 量会话。如果您有泄漏或并发错误，它应该可以帮助您查看它。

Web 测试功能不是所有[版本的 Visual Studio 的](http://www.microsoft.com/visualstudio/11/en-us/products/compare)一部分，如果您今天没有它，它会变得很昂贵。

您可以多花几个小时或多或少地做同样的事情。

1 - 使用我最喜欢的网络调试工具之一[fiddler](http://www.fiddler2.com/fiddler2/)来“记录”您的页面和服务器之间的交换。

2 - 使用 fiddler 重放一些 http 请求，看看是否可以重现问题

3 - 为了进一步推动您的网站，您可以创建一个小型 C# 程序来复制您在 fiddler 中看到的 http 请求，但具有多个并行线程。您将需要使用 HttpClient 类。

# google-app-engine - GAE清除数据库

> ID：11589114
> 
> 赞同：0
> 
> 时间：2012-07-21T02:56:13.413
> 
> 标签：google-app-engine, google-cloud-datastore

我的数据存储中有一个错误，导致我无法通过控制台查看它。我想删除整个数据存储并重新开始。

以下适用于开发服务器：

```
db.delete(db.Query(keys_only=True)) 
```

当我在远程服务器上运行相同的程序时，出现以下错误（并且数据存储未清除）

```
 illegal key.path.element.type: __Stat_PropertyType_PropertyName_Kind__
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~34thquote/1.360465535514332795/core/handlers/quotes.py", line 72, in get
    db.delete(db.Query(keys_only=True))
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 1610, in delete
    delete_async(models, **kwargs).get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 815, in get_result
    result = rpc.get_result()
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1653, in __delete_hook
    self.check_rpc_success(rpc)
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py", line 1216, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: illegal key.path.element.type: __Stat_PropertyType_PropertyName_Kind__ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T03:56:27.103

如果要删除某种（或所有类型）的所有实体，最简单的方法是使用[datastore_admin](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)，它在您的实时应用程序的管理控制台中启用。

# mercurial - 如何确保 Mercurial 存储库克隆（或任何 DVCS）中没有未保存的工作

> ID：11589118
> 
> 赞同：1
> 
> 时间：2012-07-21T02:57:42.170
> 
> 标签：mercurial, dvcs, bazaar

简短的：

您如何确保任何 DVCS 的分布式存储库克隆中没有未保存的工作？

我正在专门为 Mercurial 考虑这一点，但它也适用于 git、bzr 等。

细节：

回到糟糕的过去，我曾经运行可能会执行相当于 - 伪代码的 cron 作业，因为我可能不记得 CVS 命令：

```
find all checked out CVS trees
   do a cvs status command (which I think is something like cvs update -n?) 
   | grep '^M' to find all modified files not yet committed to the central repo 
```

（这些日子很糟糕（1）因为我们使用的是 CVS，（2）因为有时我是负责制作 sue 的人，没有丢失任何东西。好吧，那最后不是那么糟糕，但正在溃烂。）

问：对于像 Mercurial 这样的现代 DVCS 系统，我如何进行等效操作。我认为这很容易，但仔细检查会发现缺少一些部分：

我开始做类似的事情

```
find all ...path/.hg directories, and then look at ...path
    do hg status - look at the output  // this is easy enough
    do hg outgoing // this is where it gets interesting 
```

你可能认为做一个 hg 传出就足够了。但不一定。

考虑：

```
cd workspace-area
hg clone master repo1
hg clone repo1 repo2
rm -rf repo1
hg clone repo2 repo1 
```

现在repo1的默认路径是repo2，反之亦然。

当然，如果您有正确的工作流程，就不会发生这种情况。如果你只从你上游的东西克隆，永远不要从同龄人那里克隆。但是...轻量级克隆是顶级做 DVCS 的部分原因。另外，它已经发生在我身上。

为了处理这个问题，我通常在某个地方有一个 hg 路径，在我的 ~/.hgrc 中设置，设置为某个项目主 URL。这很好用 - 对于那个项目。如果你有很多很多项目，那就不太好了。即使您称它们为 project1-master project2-master 等，它们也会有很多。如果由于想要在项目之间共享的库而导致子存储库激增，则更糟糕的是。

此外，这必须在用户的 .hgrc 中。或网站 .hgrc。对于可能没有设置 .hgrc 的人来说不是很好——比如一个不知道他系统上几十个（或数百个）项目的来龙去脉的管理员 - 但他仍然希望做他的用户寻找陈旧工作的青睐。（他们可能已经预料到了。）或者，如果您只是想提供有关如何执行此操作的标准说明。

我考虑将项目（或列表）的一些标准主存储库的名称放入文本文件中，并签入存储库。说 repo/.hg_master_repos。这看起来可能有效，虽然它有一些问题（您可能只看到全局项目主，而不是额外的本地项目主。我不想解释更多。）。

但是......在我这样做之前，有没有这样做的标准方法？

* * *

顺便说一句，这是我到目前为止所拥有的：

```
#!/usr/bin/perl
use strict;

# check to see if there is any unsaved stuff in the hg repo(s) on the command line

# -> hg status, looking for Ms, etc.
#        for now, just send it all to stdout, let the user sort it out

# -> hg outgoing
# issue: who to check outgoing wrt to?
#   generic
#      a) hg outgoing
#           but note that I often make default-push disabled
#           also, may not point anywhere useful, e.g
#               hg clone master r1
#               hg clone r1 r2
#               rm -rf r1
#               hg clone r2 r1`
#           plus, repos that are not clones, masters...
#      b) hg outgoing default-push
#      c) hg outgoing default
#   various repos specific to me or my company

foreach my $a ( @ARGV ) {
    print "**********  $a\n";
    $a =~ s|/\.hg$||;
    if( ! -e "$a/.hg" ) {
        print STDERR "Warning: $a/.hg dos not exist, probably not a Mercurial repository\n";
    }
    else {
        foreach my $cmd (
                 "hg status",
                 # generic
                 "hg outgoing",
                 "hg outgoing default-push",
                 "hg outgoing default",
                 # specific
                 "hg outgoing PROJECT1-MASTER",
                 "hg outgoing MY-LOCAL-PROJECT1-MASTER",
                 "hg outgoing PROJECT2-MASTER",
                 # maybe go through all paths?
                 # maybe have a file that contains some sort of reference master?
                )
          {
              my $cmd_args = "$cmd -R $a";
              print "=======  $cmd_args\n";
              system($cmd_args);
          }
    }
} 
```

正如你所看到的，我没有用任何东西来装饰它来解析它所得到的东西——只是让用户，我，来关注它。

但只是做

```
find ~ -name '*.hg' | xargs ~/bin/hg-any-unsaved-stuff.pl 
```

发现了很多我不知道的可疑未保存的东西。

hg status 报告的未保存的旧更改非常可疑。传出报告的未推动工作是可疑的，但对于认为克隆是分支的人来说，这可能不是那么糟糕。但是，我不希望有一个分叉的克隆永远存在，而是将事物放在分支上，以便有人可以通过从一个地方克隆来查看所有历史。

底线：

是否有一种标准方法可以找到未保存的工作、未签入和/或未推送的工作，这种方法不易受到我上面提到的各种周期的影响？

在某处的文件中记录“真实”项目主存储库是否有一些约定？

嗯...我想如果在某处记录了推送和克隆魔杖签入所涉及的存储库，我可以猜测正确的项目大师可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:11:03.327

以下是您可以执行的操作：

1.  确定服务器上可能的中央存储库。

2.  迭代客户端上的存储库以将它们与中央存储库匹配。

3.  `hg outgoing`针对您找到的中央存储库运行。

更详细一点：

1.  我假设您的存储库有一个中心位置，否则您的问题将变得毫无意义。现在，可以**通过根变更集来识别**存储库。此变更集将是修订版零，您可以获得完整的变更集，如下所示：

    ```
    $ hg log -r 0 --template "{node}" 
    ```

    `(node, URL)`在服务器上运行脚本，将配对列表转储到客户端可访问的文件中。URL 将成为推送目标。

2.  在客户端上运行脚本，首先`(node, URL)`从服务器下载列表，然后识别所有本地存储库和服务器上的相应推送 URL。

3.  `hg outgoing URL`使用您在上一步中找到的 URL运行。您可以（并且应该！）使用完整的 URL，`hg outgoing`以避免依赖于客户端上完成的任何本地配置。这样您就可以避免处理路径，`default`并且`default-push`由于 URL 指向服务器，因此您知道这是一个可以比较的好 URL。

    如果服务器有多个相同存储库的克隆，那么将有几个不同的 URL 可供选择。然后，您可以全部尝试并使用具有最少传出变更集的报告，或者您可以通过在服务器端组合克隆（通过将所有克隆中的变更集拉到单个存储库中）来回避问题，然后与此组合存储库进行比较。

当您在客户端上运行脚本时，您可能有一些本地存储库并且在服务器上不存在。您的脚本应该处理这些：它可能应该向开发人员发送一封电子邮件，要求他在服务器上创建存储库。

最后，一个存储库可能有多个根变更集。以上仍然可以很好地工作：所有以正常方式完成的克隆将在服务器和客户端上保持修订为零相同。因此，即使有多个根，脚本也会正确地将客户端 repo 与服务器 repo 匹配。

仅当开发人员运行类似的操作`hg clone -r the-other-root ...`时，上述操作才会失败，因为另一个根现在变为修订版零。因此，存储库将被视为本地存储库。无论如何，您的脚本都应该处理它，所以这没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:26:24.443

如果您只关心数据丢失并且您正在使用 git，那么只需创建一个存储库。将所有创建的存储库作为遥控器添加到该存储库并运行

```
git fetch --all 
```

这将有效地备份所有存储库中的所有数据。它还备份所有引用的当前快照。

# javascript - Javascript 无法识别 2 个不同的 PDF 文件

> ID：11589122
> 
> 赞同：0
> 
> 时间：2012-07-21T02:59:58.927
> 
> 标签：javascript, asp.net-mvc, pdf

我有两个 PDF 文件。如果我选择第二个 PDF (kfz) 进行打印，第一个 PDF (bike) 无论如何都会打印。为什么是这样？有两种不同的路径。

```
<script>
        function printTrigger(elementId) {
            var getMyFrame = document.getElementById(elementId);
            getMyFrame.focus();
            getMyFrame.contentWindow.print();
        }

    </script>

<tr>
                    <td>
                        Fahrrad Kaufvertrag 
                    </td>
                    <td>
                        <%= Html.ActionLink("Download", "DownloadBikeContract", new { id = 1 }, new { @class = "SaveContract" })%>
                    </td>
                    <td>
                    <img src="../../Styles/Images/Buttons/printer.png" onclick="printTrigger('iFramePdf');" />
                    <iframe id="iFramePdf" src="../../Files/KaufvertragFahrrad.pdf" style="display: none;">
                    </iframe>
                </td>
            </tr>

            <tr>
                <td>
                    KFZ - Kaufvertrag
                </td>
                <td>
                    <%= Html.ActionLink("Download", "DownloadKFZContract", new { id = 2 }, new { @class = "SaveContract" })%>
                </td>
                <td>
                    <img src="../../Styles/Images/Buttons/printer.png" onclick="printTrigger('iFramePdf');" />
                    <iframe id="iFrame1" src="../../Files/KaufvertragKFZ.pdf" style="display: none;">
                    </iframe>
                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:03:21.787

你的第二张图片说`onclick="printTrigger('iFramePdf');"`，但第二个 iframe 的 ID 是`iFrame1`，不是`iFramePdf`。您只需要将正确的字符串传递给您的`printTrigger()`呼叫。

# django - Django通过电子邮件发送错误

> ID：11589124
> 
> 赞同：3
> 
> 时间：2012-07-21T03:00:17.857
> 
> 标签：django, email

我一直在努力让电子邮件在 Django 中工作以进行日志记录以及 500 和 404 错误，而在我的一生中，我无法让它工作。我有`DEBUG=False`和所有其他设置。我有以下电子邮件设置：

```
EMAIL_HOST = 'host'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'username'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_SUBJECT_PREFIX = 'something'
EMAIL_USE_TLS = True
SERVER_EMAIL='blah@blah.com' 
```

我将 Amazon SES 用于上述设置。我还有以下内容：

```
SEND_BROKEN_LINK_EMAILS=True
ADMINS = (
    ('name', 'email'),
)
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
) 
```

还有什么我想念的吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T07:18:03.827

是的，不是`ADMINS = ()`接收`SEND_BROKEN_LINK_EMAILS`，而是接收`MANAGERS = ()`

[https://docs.djangoproject.com/en/dev/ref/settings/#managers](https://docs.djangoproject.com/en/dev/ref/settings/#managers)

[https://docs.djangoproject.com/en/dev/howto/error-reporting/#errors](https://docs.djangoproject.com/en/dev/howto/error-reporting/#errors)

在管理员下添加此权利，它应该可以工作：

```
MANAGERS = ADMINS 
```

您可能还想在设置中指定 EMAIL_BACKEND，例如假设 SMTP：

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' 
```

[https://docs.djangoproject.com/en/dev/ref/settings/#email-backend](https://docs.djangoproject.com/en/dev/ref/settings/#email-backend)

# c++ - Qt 和 C++：双重继承与组合？

> ID：11589126
> 
> 赞同：0
> 
> 时间：2012-07-21T03:00:59.980
> 
> 标签：c++, qt, inheritance

我的问题如下。我想制作一个新的小部件，它是 a `QTableWidget`+ a `QMenuBar`（具有特定配置`QTableWidget`）。目前，我创建了一个 MyWidget ，它源自`QWidget`并包含 a `QTableWidget`+ a `QMenuBar`。`MyWidget`但是是否有可能通过从`QTableWidget`and派生来做同样的事情`QMenuBar`？如果有可能构造函数是什么样的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T03:40:56.280

由于 QTableWidget 和 QMenuBar 都继承自 QWidget，我强烈建议不要使用双重继承。例如，请参阅[这个问题](https://stackoverflow.com/questions/406081/why-should-i-avoid-multiple-inheritance-in-c)。

您目前所做的通常被认为是“正确”的方式，至少在 Qt 中是这样。我怀疑你想使用多重继承而不是组合的主要原因是你可能觉得你必须编写一堆函数，以便使用你的小部件的人可以添加到 QMenuBar。这样的函数可能如下所示：

```
QAction *MyWidget::addMenuToMyQMenuBar(QMenu *menu)
{
    return myMenu->addMenu(menu);
} 
```

对我来说这有点傻，相反，我建议您简单地为您的 QMenuBar 创建一个访问器函数：

```
QMenuBar *MyWidget::menuBar()
{
    return myMenu;
} 
```

现在使用您的课程的人可以做到

```
myWidget->menu()->addAction(someAction); 
```

这种编码风格在 Qt 源代码中很常见，我认为它更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:40:29.937

这听起来像组合将满足您的需求。

继承满足`is-a`关系（NewWidget是QTableWidget，NewWidget是QMenuBar？）
组合满足`has-a`关系（NewWidget有QTableWidget，NewWidget有QMenuBar？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T21:51:47.263

一次从两个 QWidget 继承是不可能的。每个 QWidget 也是一个 QObject。MOC（元对象编译器）无法处理此类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T03:52:57.773

继承 - 关系是 X isa Y

组合 - 关系是 X 有一个 Y

有你的答案 - X 和 Y 之间的关系是什么？

# java - 如何使用 Java 中的 Scanner 读取文本文件中的特定字符？

> ID：11589133
> 
> 赞同：2
> 
> 时间：2012-07-21T03:02:45.267
> 
> 标签：java, file, text, char

基本上，我试图从一个连续的文本文件中读取 4 个字符。前两个是我将声明给变量的整数，接下来的两个是我需要分配给字符串或字符的字符，以便稍后将它们打印出来。

我知道如何获取整数，但我阅读字符的主要问题是我不确定如何获取，并且其中一些字符可能是 ' '，或者只是一个空格。我不知道我应该如何获得一个空间作为角色。我需要稍后在程序中使用这些字符来打印一些东西。

到目前为止，我几乎已经做了类似的事情

```
Scanner s = new Scanner(new FileInputStream("textfile.txt"));

int a = s.nextInt();
int b = s.nextInt(); 
```

但是，如果我尝试使用 next 会出现错误，尤其是当我尝试获取 ' ' 字符时。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:12:25.627

我不知道是否有办法使用 Scanner 获取下一个字符，但如果我处于相同的情况，我将使用 nextLine() 然后对我获得的字符串进行操作。您可以使用 charAt() 来获取特定字符。很像：

```
String str = s.nextLine();

char c1 = str.charAt(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:14:56.683

尝试使用来读取空格字符是有道理`next()`的，因为它是默认的分隔符。

您可以使用 . 将分隔符更改为不应出现在输入数据中的内容`[Scanner.useDelimiter()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T03:26:55.003

由于您正在读取 4 个连续字符，因此最好使用 InputStreamReader。

```
InputStreamReader in = new InputStreamReader(new FileInputStream("textfile.txt")));

int a = in.read()
int b = in.read()
char c = (char)in.read()
char d = (char)in.read() 
```

如果您只使用 ASCII 字符，那么您可以跳过 InputStreamReader 并直接使用 FileInputStream。

# objective-c - 声明存在时没有可见的声明错误，Objective c

> ID：11589134
> 
> 赞同：0
> 
> 时间：2012-07-21T03:03:04.587
> 
> 标签：objective-c, xcode, declaration, segue, cs193p

嗨，我在 graphPoint.y 代码部分收到错误“'CalculatorBrain' 没有可见的@interface 声明选择器'runprogram:usingVariableValues:'”

```
-(id) programToGraph:(GraphingView *)sender{

 CGPoint graphPoint;

for( int x =-100;x<100; x++)
    {
    NSDictionary* xValue = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:x] forKey:@"X", nil];
    graphPoint.x =x;
    //error occurs here
    graphPoint.y = [self.graphingPoint runProgram: [self.graphingPoint program] usingVariableValues:xValue];
    }   
} 
```

我通过 segue 和协议传递了 self.graphingPoint，因此它与位于不同 MVC 中并调用 runprogram:usingVariableValues 的对象“CalculatorBrain”具有相同的值。我对calculatorBrain 的实现具有上述方法并在它自己的viewController 中工作，但是当我通过协议方法在这个新的viewController 中调用它时，它说我没有在CalculatorBrain 中声明它。这是原始声明

```
@interface CalculatorBrain : NSObject

- (void)pushOperand:(double)operand;
- (double)performOperation:(NSString *)op;
@property (nonatomic, readonly) id program;
+ (NSString *)descriptionOfProgram:(id)program;

+ (double)runProgram:(id)program usingVariableValues: (NSDictionary*) variableValues;

@property (nonatomic, strong) NSDictionary* testVariableValues;
- (void) testValue : (NSString*) test;
-(void) variablePressed:(NSString*) variable;
-(NSString*) callDescription;
+(NSString*) descriptionTop: (NSMutableArray*) stack;
-(id) undoVariable; 
```

是否会因为我分配一个应该是浮点数的 CGPoint.y 值而导致错误？另外，由于这些是单独的 MVC，我应该避免将其中一个文件导入到另一个文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:12:02.190

您正在进行实例方法调用。`+ (double)runProgram:(id)program usingVariableValues: (NSDictionary*) variableValues;`是一个类方法。

有两个潜在的修复：

*   将 更改`+`为`-`.
*   更改`[self.graphingPoint runProgram:...]`为`[[self.graphingPoint class] runProgram:...]`

我不知道代码的结构如何，所以不清楚哪个更合适。

# r - 有条件的 nls

> ID：11589139
> 
> 赞同：0
> 
> 时间：2012-07-21T03:05:09.870
> 
> 标签：r, nls

我正在尝试将条件 nls 与 R 2.15.1 相匹配。相同的代码在 R 2.13 上运行良好，但现在 R 2.15.1 抛出错误。

```
x <- seq(from = 17, to = 47, by = 5)
y <- c(26.2, 173.6, 233.9, 185.9, 115.4, 62.0, 21.7)
Data <- data.frame(y, x)

Fit <- nls(formula =  y ~ ifelse(test = x <= Mu, yes = Mean <- c1*exp(-((x-Mu)/Sigma11)^2), no =  Mean <- c1*exp(-((x-Mu)/Sigma12)^2)),
       data = Data, start = list(c1 = 240, Mu = 25, Sigma11 = 5, Sigma12 = 14), algorithm = "port",
       lower = list(Sigma11 = 0, Sigma12 = 0)) 
```

错误是

```
Error in nls(formula = y ~ ifelse(test = x <= Mu, yes = Mean <- c1 * exp(-((x -  : 
  parameters without starting value in 'data': Mean 
```

**已编辑**

我正在拟合以下模型：

```
$f(x) = c_{1}  \exp\left(-\left(\frac{x-\mu}{\sigma_{(x)}}\right)^2\right)$

where $\sigma_{(x)} = \sigma_{11}$ if  $x \le \mu$ and $\sigma_{(x)} = \sigma_{12}$ if  $x > \mu$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:54:20.197

此代码适用于 R 2.15.1。

```
x <- seq(from = 17, to = 47, by = 5)
y <- c(26.2, 173.6, 233.9, 185.9, 115.4, 62.0, 21.7)
Data <- data.frame(y, x)

Fit <- nls(formula =  y ~ ifelse(test = x <= Mu, ye = c1*exp(-((x-Mu)/Sigma11)^2), no = c1*exp(-((x-Mu)/Sigma12)^2)),
       data = Data, start = list(c1 = 240, Mu = 25, Sigma11 = 5, Sigma12 = 14), algorithm = "port",
       lower = list(Sigma11 = 0, Sigma12 = 0)) 
```

# android - 使用处理程序更新 TextView

> ID：11589145
> 
> 赞同：1
> 
> 时间：2012-07-21T03:08:08.853
> 
> 标签：android, android-ui, runnable, android-handler

我正在尝试制作一个从 5 到 1 的简单计数器，并在每秒后更新视图。我试过在没有处理程序的情况下只用一个简单的循环来做这件事，但它只是在等待后向我显示 1 或者它强制关闭。我也尝试过弄乱`runOnUIThread`和线程，但我错过了一些东西。

这是我的代码：

```
package com.ammad.test;
import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class Main extends Activity {

    TextView tv;
    Button b1;
    Handler mHandler;
    int i = 5;
    private Runnable runnable;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = (TextView) findViewById(R.id.tvShow);
        b1 = (Button) findViewById(R.id.bt1);

        runnable = new Runnable() {
            public void run() {
                // do your stuff - don't create a new runnable here!
                tv.setText(String.valueOf(i));
                i--;
                mHandler.postDelayed(runnable, 500);

            }
        };
        b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                mHandler.post(runnable);
                mHandler.removeCallbacks(runnable);

            }
        });

    }

    public void doTheLoop() {

        /*
         * runOnUiThread(new Runnable() {
         * 
         * public void run() { for (int i = 5; i >= 1; i--) { // TODO
         * Auto-generated method stub tv.setText(Integer.toString(i)); for (int
         * j = 0; j < 200000; j++) ; } }
         * `enter code here`
         * });
         */
        // mHandler.post(runnable);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:22:34.360

你在哪里实例化`mHandler`？我认为该代码丢失了，否则会因 NullPointerException 而失败。这很重要，因为如果您只是在其中使用无参数构造函数实例化它，`onCreate`它将使用 UI 线程的消息队列。

但是还有其他问题：在您的`Runnable.run`方法中，您实际上并没有检查是否`i`小于零，因此它总是会`postDelayed`自行调用。此外，您正在`setText`从非 UI 线程更新 UI ( )，这可能会导致未定义的行为。

我认为您的代码比它需要的要复杂一些。如果这个例子被简化并隐藏了你的实际意图，这个例子可能太简单了，但这里有一些基本可以工作的东西，尽管你需要对其进行一些编辑才能编译（捕获 InterruptedException 等）

```
 new Thread() {
        public void run() {
            while(i > 0) {
                Thread.sleep(1000);
                mTextView.post(new Runnable() {
                    public void run() {
                        mTextView.setText(Integer.toString(i--));
                    }
                });
            }
        }
    }.start(); 
```

# asp.net-mvc-3 - 在 mvc3 中像 facebook 一样聊天

> ID：11589159
> 
> 赞同：-3
> 
> 时间：2012-07-21T03:14:48.010
> 
> 标签：asp.net-mvc-3

我必须在我的网站中实现像 facebook 这样的聊天选项。请让我知道任何提供现成工具或任何文章或教程的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:28:01.903

如果没有谷歌搜索，我不知道有任何网站提供“现成工具”或文章/教程。

我想如果您打算创建这样的功能，您将熟悉发送/接收/处理用户发送的数据，以及分配用户 ID 和处理会话。假设您了解这些操作，我将仅强调一个您可能不熟悉的过程。

我建议使用[长轮询](https://www.google.co.uk/search?q=long%20polling)来查询页面以获取聊天更新。此方法涉及客户端请求（使用 AJAX）您服务器上的页面内容，您的服务器在有更新要发送（或超时前不久）之前不响应请求。此过程允许页面在一定程度上接收事件，而不是过于频繁地检查更新，因此降低了用户浏览器需要发出的请求数量，从而也降低了您的功能的带宽使用。

# android - 为什么 Faye 不能在 Android webview 控件上工作？

> ID：11589160
> 
> 赞同：3
> 
> 时间：2012-07-21T03:14:55.313
> 
> 标签：android, webview, faye

问候，

我在 faye 服务器上订阅了一个页面。一切都在浏览器上运行良好。现在当我们将网页放在一个android webview 控件上时，Faye 根本不工作。我们没有收到来自 faye 的任何消息。我已经启用了 javascript 但仍然无法正常工作。

非常感谢您的帮助，最好的

# java - AChartEngine 在添加点和平移后崩溃

> ID：11589165
> 
> 赞同：1
> 
> 时间：2012-07-21T03:15:29.153
> 
> 标签：java, android, charts, nullpointerexception, achartengine

我正在使用[AChartEngine](http://code.google.com/p/achartengine)构建一个 Android 应用程序并且遇到奇怪的错误。

**在我向我已经建立的图表中添加新点并触摸/平移图表后，我得到一个`NullPointerException`**in `LineChart(XYChart).getSeriesAndPointForScreenCoordinate(Point)`，其中`GraphicalView`的变量`oldX`并且`oldY`被发现为空。这些变量设置在 中`GraphicalView.onTouchEvent()`，但显然没有被调用。

有没有办法`onTouchEvent()`在初始化我的图表时手动触发，或者有没有解决这个错误的方法？

这是我的图表设置代码：

```
mChartView = ChartFactory.getLineChartView(this, mDataset, mRenderer);
mChartView.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint();
        double[] xy = mChartView.toRealPoint(0);
        if (seriesSelection == null) {
            Toast.makeText(viewer.this,
                    "No chart element was clicked",
                    Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(
                    viewer.this,
                    "Chart element clicked", Toast.LENGTH_SHORT)
                    .show();
        }
    }
}); 
```

这是我添加新点的方法：

```
protected class NewPoints extends AsyncTask<Double, Void, Void> {
    @Override
    protected Void doInBackground(Double... values) {
        mCurrentSeries.add(values[0], values[1]); // x, y

        if (mChartView != null) {
            mChartView.repaint();
        }
        return null;
    }
} 
```

我的测试代码：

```
for(double i = 0; i < 10; i++) {
    new NewPoints().execute(i, Math.log(i));
} 
```

这是 LogCat 输出：

```
07-20 18:46:12.570: E/AndroidRuntime(13800): FATAL EXCEPTION: main
07-20 18:46:12.570: E/AndroidRuntime(13800): java.lang.NullPointerException
07-20 18:46:12.570: E/AndroidRuntime(13800):    at org.achartengine.chart.XYChart.getSeriesAndPointForScreenCoordinate(XYChart.java:840)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at org.achartengine.GraphicalView.getCurrentSeriesAndPoint(GraphicalView.java:135)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at com.maximz.viewer$1.onClick(viewer.java:185)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.view.View.performClick(View.java:3511)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.view.View$PerformClick.run(View.java:14110)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.os.Handler.handleCallback(Handler.java:605)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.os.Looper.loop(Looper.java:137)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at java.lang.reflect.Method.invokeNative(Native Method)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at java.lang.reflect.Method.invoke(Method.java:511)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-20 18:46:12.570: E/AndroidRuntime(13800):    at dalvik.system.NativeStart.main(Native Method) 
```

**更新1：**

我用 AChartEngine 源代码重新编译，调试显示错误发生在这个方法中：

```
public SeriesSelection getSeriesAndPointForScreenCoordinate(final Point screenPoint) {
    if (clickableAreas != null)
      for (int seriesIndex = clickableAreas.size() - 1; seriesIndex >= 0; seriesIndex--) {
        // series 0 is drawn first. Then series 1 is drawn on top, and series 2
        // on top of that.
        // we want to know what the user clicked on, so traverse them in the
        // order they appear on the screen.
        int pointIndex = 0;
        if (clickableAreas.get(seriesIndex) != null) {
          RectF rectangle;
          for (ClickableArea area : clickableAreas.get(seriesIndex)) {
            rectangle = area.getRect(); // EXCEPTION HERE: area is null
            if (rectangle != null && rectangle.contains(screenPoint.getX(), screenPoint.getY())) {
              return new SeriesSelection(seriesIndex, pointIndex, area.getX(), area.getY());
            }
            pointIndex++;
          }
        }
      }
    return super.getSeriesAndPointForScreenCoordinate(screenPoint);
  } 
```

异常被抛出该`rectangle = area.getRect();`行，其中`area`为 null 因为**`clickableAreas.get(0)`以某种方式返回 null clickableAreas 的集合**。

我将尝试通过检查 clickableArea 是否为空来修补它，但这引出了一个问题：**我是否正确添加了点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:28:16.913

根据堆栈跟踪，异常发生在以下 XYChart.java 代码的第二行（如果我的源代码具有匹配的行号）：

```
for (ClickableArea area : clickableAreas.get(seriesIndex)) {
    rectangle = area.getRect();  // <--- Exception here!
    if (rectangle != null && rectangle.contains(screenPoint.getX(), screenPoint.getY())) {
        return new SeriesSelection(seriesIndex, pointIndex, area.getX(), area.getY());
    }
    pointIndex++;
} 
```

我看不出这怎么会发生。

**你能用 AChartEngine 的源代码编译你的代码并调试吗？**

此外`oldX`&在 GraphicalView.java`oldY`中都被声明为原始s。如果他们是原始人，他们`float`怎么可能呢？`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:55:53.757

空指针异常可能是由于您的 AchartEngine jar 文件有时会在不再使用时停止使用。因此，您应该通过右键单击您的项目来检查构建路径上的 jar 文件。从中选择选项

```
 Order and Export->choose your jar files->click up and down button. 
```

它可用于打开项目中使用的 jar 文件。

# python - PyPI：我如何测试和分发用自由 pascal 编写的本机 python 扩展（没有任何 C 代码）？

> ID：11589167
> 
> 赞同：0
> 
> 时间：2012-07-21T03:15:49.527
> 
> 标签：python, freepascal, pypi

在[使用 Pascal 开发 Python 模块](http://wiki.freepascal.org/Developing_Python_Modules_with_Pascal)教程之后，我能够使用出色的[Free Pascal 编译器](http://www.freepascal.org/)在 Windows 上的 object pascal 中创建一个 python 模块。

问题是：我应该如何分发未使用标准 C 工具链编译的本机代码模块？

我应该只要求用户安装 Free Pascal 吗？如果是这样，我如何说服 distutils 调用它？

还是我应该只分发二进制文件？Free Pascal 支持[一堆编译目标](http://wiki.freepascal.org/Platform_list)，因此交叉编译二进制文件没有问题。在 PyPI 上为 windows 分发二进制文件是完全正常的，但是其他平台呢？

无论哪种方式：我如何在所有这些平台上测试模块？

* * *

PS：听起来不像是商业广告，而是为了回答不可避免的问题，“为什么不直接用 C 来写？” 我只能说，在 C 和 pyrex/Cython 中编写了扩展，free pascal 是迄今为止我所拥有的最简单的时间，而且我非常乐意跳过几个圈来使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:17:33.673

绝对分发二进制套件。我怀疑人们是否愿意安装 Free Pascal。

要在许多平台上测试模块，最好的选择是使用 VirtualBox 在您自己的开发机器上运行这些操作系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:57:13.210

只需分发二进制文件，只要模块不链接到太具体的 python 库，就可以了。即：尝试链接lib python 而不是libpython2.7.so.1.2.3.whatever

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T00:55:24.813

回想起来，这真的不是一个好问题。

最适合*我的特定情况*的答案是将系统视为应用程序而不是模块，并将应用程序本身作为二进制文件分发。

# django - 使用 Django 在 Heroku 上提供根级静态文件？

> ID：11589169
> 
> 赞同：15
> 
> 时间：2012-07-21T03:16:36.937
> 
> 标签：django, heroku, favicon

我需要在 Heroku 上提供几个根级别的静态文件（例如，`domain.com/favicon.ico`）。这是目前的文件列表：

```
favicon.ico
crossdomain.xml
sitemap.xml
robots.txt
humans.txt
apple-touch-icon-57x57-precomposed.png
apple-touch-icon-57x57.png
apple-touch-icon-72x72-precomposed.png
apple-touch-icon-72x72.png
apple-touch-icon-114x114-precomposed.png
apple-touch-icon-114x114.png
apple-touch-icon-precomposed.png
apple-touch-icon.png 
```

我到处搜索，找不到提供大量静态文件的标准方法。无论我在哪里托管它们（在 Heroku 上使用 collectstatic 或 Amazon S3），在我的 urls.py 中明确定义和重定向 14 个文件似乎都不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:08:21.223

这是我目前的解决方案。反馈表示赞赏。

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from settings import STATIC_URL, ASSETS, DEBUG, AWS_STORAGE

#ASSETS is a tuple: ('favicon.ico, 'robots.txt', ...)    
urls = [('^%s$' % f, 'redirect_to', {'url': STATIC_URL + f}) for f in ASSETS]
urlpatterns += patterns('django.views.generic.simple', *urls)

#Serve static files from runserver if in dev mode with S3 off.
if DEBUG and not AWS_STORAGE:
    urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-19T11:19:46.367

尽管这是一个老问题，但我仍然有问题。我喜欢从当前解决方案中的列表生成 URL 的方式，但我不相信这是最好的。

不过，经过一番研究，我发现[realfavicongenerator.net](https://realfavicongenerator.net/)是一个非常有用的资源，它为您生成所有必需的 favicons 文件，并且我的一位同事向我发送[了这篇文章](http://staticfiles.productiondjango.com/blog/failproof-favicons/)，该文章似乎支持所提出的解决方案，并带有更新的 Django 版本。

基于以上所有，我的解决方案是使用原生站点地图框架、用于 robots.txt 的[django-robots](https://github.com/jezdez/django-robots)和 ROOT_ASSETS 字典，文件前缀作为键，值作为文件列表，例如：

```
ROOT_ASSETS = {
    "images/favicons/": [
        "apple-touch-icon-114x114.png",
        "apple-touch-icon-120x120.png",
        "apple-touch-icon-144x144.png",
        "apple-touch-icon-152x152.png",
        "apple-touch-icon-180x180.png",
        "apple-touch-icon-57x57.png",
        "apple-touch-icon-60x60.png",
        "apple-touch-icon-72x72.png",
        "apple-touch-icon-76x76.png",
        "apple-touch-icon-precomposed.png",
        "favicon.ico",
    ]
} 
```

然后我生成我的网址：

```
from django.conf.urls import patterns, url, include
from django.contrib.staticfiles.storage import staticfiles_storage

root_assets_urls = []
for prefix, files in ROOT_ASSETS.iteritems():
    for f in files:
        asset_url = staticfiles_storage.url("{prefix}{file}".format(prefix=prefix, file=f))
        root_assets_urls.append(
            url(r'^{0}$'.format(f), RedirectView.as_view(url=asset_url))
        )
root_assets = patterns('', *root_assets_urls)

urlpatterns = patterns(
    '',
    url(r'^', include(root_assets)),
    [...]
) 
```

我还在我的主模板的头部包含了由[realfavicongenerator.net生成的 HTML。](https://realfavicongenerator.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:54:52.763

我没有找到任何 url 配置文件，所以我认为 heroku 不提供这项服务。

根据[官方文档](https://devcenter.heroku.com/articles/django-assets)，您需要将数据保存在外部服务上

编辑：

因此，根据 heroku 文档，只有 301 重定向到 S3 可以帮助您。甚至对于模板中的所有媒体（ico、favicons、png 和其他图像）文件设置到 S3 服务的绝对路径以及`urls.py`设置 301 中的 robots 和 crossdomain.xml 重定向到 S3 的效果更好。对于 sitemap.xml 更好地使用[本机解决方案](https://docs.djangoproject.com/en/dev/ref/contrib/sitemaps/)

在开发中使用正确的重定向代码并没有错。

# jquery - HTML/Jquery/Javascript 身份验证和授权模式 (ASP.NET)

> ID：11589180
> 
> 赞同：2
> 
> 时间：2012-07-21T03:19:04.097
> 
> 标签：jquery, asp.net, security, design-patterns

我有一个 jquery 移动网站，它只有 HTML 和 Jquery 代码，并且使用 Sharepoint webservices 访问后端数据。到目前为止，一切都很好。

现在，我们需要为我们的移动网站实现登录身份验证，并限制对我们网站上某些页面的访问。存在另一个 asp.net 站点（不同的域），它已经在 asp.net 中实现了登录功能。我们计划重用其他站点的相同后端逻辑。

有没有跨域登录的模式？如何进行会话管理？

希望我很清楚。感谢您的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:27:47.177

跨域资源共享似乎是要走的路！一旦外部 asp.net 站点完成身份验证，其他一切都与非 CORS 方法相同。

检查[此](http://caniuse.com/#feat=cors)浏览器对 CORS 的支持。

这是一个很好的博客[，](http://www.bennadel.com/blog/2327-Cross-Origin-Resource-Sharing-CORS-AJAX-Requests-Between-jQuery-And-Node-js.htm)它演示了 CORS 的用法。

希望这对您有所帮助。

# android - 如何从 webview 获取结果值？

> ID：11589183
> 
> 赞同：-1
> 
> 时间：2012-07-21T03:19:29.073
> 
> 标签：android, webview

我想从 Android 的 webview 获取返回值。我曾经`webview.postUrl`发布过价值，但如何获得我在 php 中回显的结果？有谁能够帮助我？谢谢。这是我的代码

```
 String url = "http://192.168.0.20/exe/test/aaa/test.php";
    String postData = "uID=md5_id&uPWD=md5_pass";

    WebView webview = (WebView) findViewById(R.id.webview);
    WebSettings webviewSettings = webview.getSettings();
    webviewSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webviewSettings.setJavaScriptEnabled(true);
    webviewSettings.setSavePassword(false);
    webviewSettings.setSaveFormData(false);
    webviewSettings.setSupportZoom(true);
    webview.setWebChromeClient(new WebChromeClient());

    webview.postUrl(url, EncodingUtils.getBytes(postData, "utf-8")); 
```

php如下所示，

```
$uID=$_POST['uID'];
$uPWD=$_POST['uPWD'];
//echo "$uID : $uPWD";
if($uID==$uPWD){
echo "ok";
}else{
echo "fail";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:42:29.093

看起来您想使用诸如 HttpClient 之类的类而不是为其使用 WebView 来发出 HTTP 请求。查看[此问题](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)以获取有关使用 HttpClient 的信息。

# couchdb - 如何重命名 CouchDB 数据库？

> ID：11589186
> 
> 赞同：20
> 
> 时间：2012-07-21T03:20:34.990
> 
> 标签：couchdb

我没有看到用于重命名 CouchDB 数据库的 API，也没有看到 Futon 中的选项来做同样的事情。

除了复制到另一个数据库然后删除原始数据库之外，是否有一种重命名数据库的一步法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-21T22:01:46.450

添加到多米尼克和 PPPaul 所说的......

重命名文件绝对是要走的路（确保将其重命名为同一用户，而不是意外更改所有权`root`或其他内容）。

在完全运行的生产环境中这样做是完全安全的，是的。HTTP/REST API 的众多优点之一是没有与数据库有状态连接的适配器。每个请求都是一个新请求。所以基本上重命名完成后对 CouchDB 的第一个请求就可以使用新名称。

但是等等，还有更多！

一件非常酷的事情是，即使在重命名之后，CouchDB 服务器仍然有一个文件本身的打开文件句柄（这不受重命名 inode 的影响），所以在 CouchDB 服务器实际重新启动之前，你仍然会也可以使用旧名称访问数据库。

### 更新

[ATfPT](https://stackoverflow.com/users/1197730/atfpt)在评论中的出色观察，显然 DB 名称需要以小写字母开头，否则它不会出现在 Futon 中。

### 更新

Another thing I remembered: to find out where the DB files are, run this: `couch-config --db-dir`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-21T14:50:10.237

如果您有权访问数据库文件本身（`/var/lib/couchdb`取决于您的安装），您可以简单地重命名它。

据我所知，这将有效地“重命名”数据库。我会确保在您执行此操作时服务器没有运行，以防万一。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-10T16:02:43.030

I am using couchdb 2, i assume the previous answers are for an older version because the database files are not listed in the /var/lib/couchdb folder found using 'couch-config --db-dir' command.

the simplest way i am following is to use futon and replicate the db you want to rename to a new desired name then delete the old database.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:07:31.783

Assuming you don't want to corrupt your databases, rename the .couch files when CouchDB is *not* running.

# android - Android/Eclipse：LogCat 协助

> ID：11589188
> 
> 赞同：0
> 
> 时间：2012-07-21T03:21:59.003
> 
> 标签：android, eclipse, logcat, trace

我目前正在构建一个 Android 应用程序，但它一直在崩溃。

我正在尝试从选项菜单开始一项活动。我尝试了许多不同的方法来启动活动，但每次在 startActivity 时我都会得到相同的结果。我在 Manifest 文件中定义了活动，我可以从按钮运行活动，而不是从 onOptionsItemSelected。

我收到的错误是 ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord,Intent) 错误，所以我去搜索并发现了以下问题：

[Android：ActivityThread.performLaunchActivity 错误](https://stackoverflow.com/questions/3008745/android-activitythread-performlaunchactivity-error)

但是，我不是在解决这个问题。

我想知道的是如何让我的 logcat 错误跟踪以上面链接中询问者显示的格式显示？我在我的 logcat 中找不到“Caused By”或任何类似的东西，这将使调试对我来说变得更加简单。因此，如果有人能告诉我如何在 logcat 中找到这些信息，我将不胜感激。

在此先感谢，亚当。

[编辑] 这是 LogCat 输出。这只是关于我的手机在做什么的大量信息，与手机上实际运行的应用程序无关！

```
07-21 15:36:48.441: E/DataRouter(1825): usb connection is true
07-21 15:36:48.441: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:50.022: E/AlarmManagerService(1986): android_server_AlarmManagerService_set to type=0, 1342850486.300000000
07-21 15:36:50.442: E/DataRouter(1825): usb connection is true 
07-21 15:36:50.442: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:52.446: E/DataRouter(1825): usb connection is true 
07-21 15:36:52.446: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:54.447: E/DataRouter(1825): usb connection is true 
07-21 15:36:54.447: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:56.447: E/DataRouter(1825): usb connection is true 
07-21 15:36:56.447: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:58.447: E/DataRouter(1825): usb connection is true 
07-21 15:36:58.447: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:36:59.996: E/AlarmManagerService(1986): android_server_AlarmManagerService_set to type=3, 148500.000000000
07-21 15:37:00.011: E/AlarmManagerService(1986): android_server_AlarmManagerService_set to type=3, 148498.243000000
07-21 15:37:00.452: E/DataRouter(1825): usb connection is true 
07-21 15:37:00.452: E/DataRouter(1825): InvokeOemRequestHookRaw usbstatus true is failure 4
07-21 15:37:02.452: E/DataRouter(1825): usb connection is true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:26:16.067

你有没有展示过 LogCat 的意思，

转到**Window->Show View->Other->Android->LogCat**。这里提供了整个 android 代码调试/跟踪小部件，您只需单击即可获取它。

# lua - Lua：如何找出一个元素是否是一个表格而不是一个字符串/数字？

> ID：11589190
> 
> 赞同：20
> 
> 时间：2012-07-21T03:22:36.370
> 
> 标签：lua, lua-table

正如标题所说，我可以做哪些功能或检查来确定一个 lua 元素是否是一个表？

```
local elem = {['1'] = test, ['2'] = testtwo}
if (elem is table?) // <== should return true 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-21T03:31:48.830

```
print(type(elem)) -->table 
```

Lua 中的类型函数返回它的第一个参数是什么数据类型（字符串）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-09T09:57:09.710

在原始问题的背景下，

```
local elem = {['1'] = test, ['2'] = testtwo}
if (type(elem) == "table") then
  -- do stuff
else
  -- do other stuff instead
end 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-10T17:32:29.967

您可能会发现这有助于提高可读性：

```
local function istable(t) return type(t) == 'table' end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-21T03:32:06.630

使用`type()`：

```
local elem = {1,2,3}
print(type(elem) == "table")
-- true 
```

# arrays - 如何在 matlab 中使用预分配数组中的零？

> ID：11589193
> 
> 赞同：2
> 
> 时间：2012-07-21T03:23:49.990
> 
> 标签：arrays, matlab

我有一个在循环中增加大小的数组。matlab 中的解决方案是使用 x = zeros(1, 9) 预分配零；我的问题是有时数组在数组的开头和结尾会有一些零。这些零是我数据的一部分。当它的大小为 5 时，我需要使用数组，然后当它是 7 时，最后当它有 9 个元素时。如何在不将 em 与预分配零混淆的情况下使用它们？

**更新** 使用 NAN 是最简单的方法，对我来说效果很好。altho Prashant 发布了一个更复杂的解决方案，可以很好地满足其他要求。（我的功能很简单。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T03:37:29.053

最简单的方法是预先分配给`NaN`

```
dataArray = nan(nRows, nColumns) 
```

您也可以确保其余代码跟踪您的索引，但`NaN`s 非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:36:11.267

使用变量跟踪大小。
我需要更多地了解你的用法才能给你一个具体的答案，但考虑这样的事情：

```
Preallocate max space for mem
While looping over data sets
    Set k = 1
    While looping over data set elements
        Add element to mem(k)
        Set k = k + 1
    End
    Extract the data you want with mem(1:k-1)
    Use the extracted data
End 
```

Matlab 喜欢预先分配的数据，因为通常你可以知道你的数据集有多大。

```
While looping over data sets
    Determine size of data set, and preallocate mem here with that size
    Set k = 1
    While looping over data set elements
        Add element to mem(k)
        Set k = k + 1
    End
    mem already has exactly the data you need, so begin using it
End 
```

当然，我们更喜欢向量命令来摆脱循环和计数器变量：

```
While looping over data sets
    Use vector calculation with only the input you need to produce only the output you need
    mem already has exactly the data you need, so begin using it
End 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T03:36:11.937

您可以通过多种方式初始化矩阵，包括使用 NaN 值，例如`x = nan * ones(1, 9);`（或您想要开始的任何其他值，如果您替换`nan`为一个值，具体取决于您计划如何填充它）。

# spring - 动态添加实体到休眠

> ID：11589194
> 
> 赞同：2
> 
> 时间：2012-07-21T03:24:06.800
> 
> 标签：spring, hibernate, dynamic, entity

我们如何添加更多实体来休眠？Mine 是一个基于 spring 和 hibernate 的独立应用程序。

我有关于新实体的类文件的元数据。如何在不重新启动或更改配置 XML 文件的情况下将它们添加到休眠会话工厂？

所有的映射都由 hibernate 自己管理。并且只有像连接参数这样的配置是在 XML 中维护的。

***简而言之，如果我有实体的类文件位置，我如何指示 hibernate 从那里拾取实体，而无需重新启动或更改配置文件？***

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T03:52:32.003

从休眠[文档](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/SessionFactory.html)：

> SessionFactory 的内部状态是不可变的。一旦它被创建，这个内部状态就会被设置。此内部状态包括有关对象/关系映射的所有元数据。

您可以做的是为每组动态加载的实体设置一个单独的 SessionFactory。创建一个[配置](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/Configuration.html)并将[您的新类添加](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/Configuration.html#addAnnotatedClass%28java.lang.Class%29)到其中。使用它来创建一个[新的 SessionFactory](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory%28%29)或[EntityManagerFactory](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/ejb/EntityManagerFactoryImpl.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-09T20:41:49.920

这样做的方法如下：

```
Configuration configuration = new Configuration().configure("hibernate.cfg.xml"); // base configuration

configuration.addAnnotatedClass(MyClass1.class); // @Entity classes
configuration.addAnnotatedClass(MyClass2.class);
configuration.addAnnotatedClass(MyClassN.class);

Session session = configuration.buildSessionFactory().openSession();
// Work with session... 
```

# plot - 像素：获取特定图中的像素

> ID：11589195
> 
> 赞同：1
> 
> 时间：2012-07-21T03:24:49.327
> 
> 标签：plot, pixel, pixels, bresenham

我想知道是否有一种算法可以在某个“像素化”区域内获取像素？

因此，如果我们有一个未填充的 3 x 3 像素正方形，则未填充的图将是： 2,2 网格为：

```
1,1 2,1 3,1
1,2 2,2 3,2
1,3 2,3 3,3 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:29:18.270

听起来您正在寻找类似于计算机图形学中使用的填充多边形扫描转换算法的东西。您选择的确切算法将取决于您需要它运行多快以及您想要支持哪种形状（凸面最容易，凹面更难，带孔的形状也更难）。有很多很好的阅读材料，这里有一些很好的图表：

[http://www.csee.umbc.edu/~rheingan/435/pages/res/gen-4.Scan-single-page-0.html](http://www.csee.umbc.edu/~rheingan/435/pages/res/gen-4.Scan-single-page-0.html)

谷歌“填充多边形扫描转换”了解更多信息。

# internet-explorer - 股票报价代码

> ID：11589201
> 
> 赞同：0
> 
> 时间：2012-07-21T03:27:33.813
> 
> 标签：internet-explorer, stock

我已经设法让我的股票行情在除 Internet Explorer 之外的所有浏览器中工作。有人可以看看，看看有什么问题。这是下面的页面链接。感谢所有的帮助。

[http://petrowest.squarespace.com/home/](http://petrowest.squarespace.com/home/)

这是codepen链接 [http://codepen.io/ggilmore/pen/single-stock-price](http://codepen.io/ggilmore/pen/single-stock-price)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:45:12.423

问题是内容需要查询为jsonp，而不是json。请参阅以下内容：

[http://jsfiddle.net/qHdwS/2/](http://jsfiddle.net/qHdwS/2/)

# hadoop - hadoop 负载均衡

> ID：11589202
> 
> 赞同：1
> 
> 时间：2012-07-21T03:27:59.193
> 
> 标签：hadoop, mapreduce

我以以下格式生成了多个不同的密钥：

“71 1 2”、“69 2 3”、“68 5 6”等

但是，我发现这些对中的大多数都使用相同的减速器。

即使我实现了一个自定义分区器，我们使用的 getNumPartitioner 方法，hash_val % numReducers，也主要返回值，该值由少数几个加载它们的减速器组成，而其他减速器保持空闲。，据我了解，我们可以使用 WritableComparator 对keys进行排序但不能控制keys去不同的reducer。

有没有办法改善负载平衡？请帮忙。

我在下面附上一些代码以使我的解释清楚：

```
String a = "71 1 2";
String b = "72 1 1";
String c = "70 1 3";

int hash_a = a.hashCode();
int hash_b = b.hashCode();
int hash_c = c.hashCode();

int part_a = hash_a % 10;
int part_b = hash_b % 10;
int part_c = hash_c % 10;

System.out.println("hash a: "+hash_a+" part_a: "+part_a);
System.out.println("hash b: "+hash_b+" part_b: "+part_b);
System.out.println("hash c: "+hash_c+" part_c: "+part_c); 
```

输出：

哈希 a：1620857277 part_a：7 哈希 b：1621780797 part_b：7 哈希 c：1619933757 part_c：7

正如我们所见，不同的键倾向于映射到同一个 reducer。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:07:10.013

首先，您不能简单地采用 java 模运算，因为有时哈希码可能是负数，并且肯定不存在所谓的负分区。所以你可能会取一个绝对值。

其次是我在互联网上找到的一个强大的哈希函数。它不是正常的 32 位 int，而是生成 64 位长。同样，这也受到负分区问题的影响，但您可以自己纠正它。

```
private static long[] byteTable;
private static final long HSTART = 0xBB40E64DA205B064L;
private static final long HMULT = 7664345821815920749L;

private static long[] createLookupTable() {
byteTable = new long[256];
long h = 0x544B2FBACAAF1684L;
for (int i = 0; i < 256; i++) {
  for (int j = 0; j < 31; j++) {
    h = (h >>> 7) ^ h;
    h = (h << 11) ^ h;
    h = (h >>> 10) ^ h;
  }
  byteTable[i] = h;
}
return byteTable;
}
public static long hash(String s) {
byte[] data = s.getBytes();
long h = HSTART;
final long hmult = HMULT;
final long[] ht = createLookupTable();
for (int len = data.length, i = 0; i < len; i++) {
  h = (h * hmult) ^ ht[data[i] & 0xff];
}
return h;
} 

public static void main(String[] args) {

String a = "71 1 2";
String b = "72 1 1";
String c = "70 1 3";

long hash_a = hash(a);
long hash_b = hash(b);
long hash_c = hash(c);

long part_a = hash_a % 10;
long part_b = hash_b % 10;
long part_c = hash_c % 10;

System.out.println("hash a: "+hash_a+" part_a: "+part_a);
System.out.println("hash b: "+hash_b+" part_b: "+part_b);
System.out.println("hash c: "+hash_c+" part_c: "+part_c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T11:59:16.793

看起来你有一个数据倾斜问题，你需要在你的分区器中更聪明一点。您可以尝试几件事：

*   Hadoop 附带了一个[MurmurHash](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/util/hash/MurmurHash.html)实现。您可以尝试在分区程序中使用它代替 hashCode() ，也许这会让您获得更均匀的分区。
*   也许您需要超越散列。是否有任何关于您的密钥是如何生成的，您可以利用它来获得更均匀的分布？例如，在键“71 1 2”上，您可以按分区数分割空间并修改第一个数字（例如 71）吗？

您没有提到数据中的某些键是否实际上是重复的。如果是这样，[自定义组合器](http://www.philippeadjiman.com/blog/2010/01/14/hadoop-tutorial-series-issue-4-to-use-or-not-to-use-a-combiner/)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T21:14:38.723

我不确定使用“更好”的哈希函数是否会有所帮助，因为不平衡的分布可能是由于您处理的数据的性质。对于相同的输入，哈希函数总是给出相同的输出。

# ruby-on-rails - form_for 和 has_many ：通过

> ID：11589205
> 
> 赞同：0
> 
> 时间：2012-07-21T03:28:42.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我有一个简单的帖子模型，它有多个标签：通过 post_tags。这允许多对多关系。但是我无法让 form_for 和 fields_for 工作。我真的被困住了，因为我在 form_for 助手上找不到任何文档，其中包含 has_many :through 关系。我观看了 rails 的施法，阅读了之前的堆栈问题，甚至研究了 Rails 3 Way。任何人，这就是我得到的。

```
 class Post < ActiveRecord::Base
  belongs_to :blog

  has_many :post_tags, :dependent => :destroy
  has_many :tag, :through => :post_tags, :dependent => :destroy 

  has_many :post_categories, :dependent => :destroy
  has_many :category, :through => :post_categories, :dependent => :destroy 

  attr_accessible(:title, ...)

  accepts_nested_attributes_for :tag, :allow_destroy => true   

end 
```

和

```
class PostTag < ActiveRecord::Base
  belongs_to :tag
  belongs_to :post
end 
```

和

```
class Tag < ActiveRecord::Base
    has_many :post_tags
    has_many :post, :through => :post_tags
end 
```

我的控制器代码是

```
def new
    @title = "Create a New Post"
    @user = User.find(params[:user_id])
    @blog = @user.blog
    @post = @blog.post.new
    @post.ptype = params[:type]
    3.times { @post.tag.build}
  end

  def create
    @user = User.find(params[:user_id])
    @blog = @user.blog
    @post = @blog.post.new(params[:post])

    if @post.save
        ...
    end
  end 
```

形式是

```
<%= form_for([@user,@blog,@post],:url => user_blogs_posts_path, :html => {:multipart=>true}) do |p| %>
    <%= render 'shared/error_messages', :object => p.object %>
    ... 
        <%= p.fields_for :tag do |t|%>
            <%=t.label :tag %>
            <%=t.text_field :tag %>
        <% end %>

        <%=p.submit%>
<% end %> 
```

错误是

```
Can't mass-assign protected attributes: tag_attributes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T03:30:19.670

添加`:tag_attributes`到`attr_accessible`_`Post`

```
attr_accessible :title, ..., :tag_attributes, ... 
```

# apache - Apache AliasMatch - 如何指定多个主机？

> ID：11589206
> 
> 赞同：0
> 
> 时间：2012-07-21T03:28:50.483
> 
> 标签：apache

在我的 httpd.conf 中，我有一个 AliasMatch 规则，我需要将其应用于**除一个之外的**所有 VirtualHosts 。有没有一种优雅的方法可以避免将规则复制到每个 VirtualHost 指令中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:46:44.233

并不真地。但是，如果除了一个之外，所有虚拟主机中还有其他东西，您可以将这些指令全部放在一个文件中，然后[`Include`](http://httpd.apache.org/docs/2.2/mod/core.html#include)将该文件放在需要它的每个虚拟主机中。

# haskell - 模棱两可的出现“只是”

> ID：11589207
> 
> 赞同：3
> 
> 时间：2012-07-21T03:28:53.827
> 
> 标签：haskell, emacs, ghc, ghci, haskell-platform

我是一个绝对的初学者。使用 emacs 浏览 LYAH。

我目前的设置：

*   Ubuntu 12.04 LTS（使用体验-初学者）
*   GNU Emacs 23（使用体验-初学者）
    *   能够在haskell专业模式下工作

发现难以遵循此处描述的[第 2 点的说明（带上 haskell 库）。](http://www.haskell.org/haskellwiki/Emacs/Installing_haskell-mode)

还需要指导以启用[Scion IDE](http://www.haskell.org/haskellwiki/Emacs#Scion)。

**问题：**

.hs 代码

```
data Maybe a = Nothing | Just a 
```

运行代码时，出现以下错误：

请忽略拼写错误，原贴：

```
*Main> just "Haha" 
```

交互>：339：1：不在范围内：“只是”

**这是真正的错误**（在 Tikhon Jelvis 的评论之后添加）：

```
*Main> Just "Haha"  
interactive>:341:1:  
    Ambiguous occurrence `Just'  
    It could refer to either `Main.Just',    
                             defined at /home/optimight/baby.hs:89:26  
                          or `Prelude.Just',  
                             imported from `Prelude' at /home/optimight/baby.hs:1:1  
                             (and originally defined in `Data.Maybe') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T04:25:03.120

您的错误只是告诉您有*两种*可能的版本，`Just`而 GHCi 不知道该选择哪一个。

每个 Haskell 程序都会隐式导入一大堆函数和数据类型。这些构成了“前奏”。其中一种类型是`Maybe`. 这意味着每个程序都已经可以访问一种类型，就像您定义的类型一样，具有完全相同的名称。

你可以通过两种方式克服这个问题。最好的选择是只选择不同的名称：

```
data MyMaybe a = MyJust a | MyNothing 
```

（我相信你可以想出比这更好的名字：P。）

另一种选择是显式导入 Prelude，隐藏`Maybe`：

```
import Prelude hiding (Maybe (..)) 
```

程序顶部的这一行只是告诉 Haskell 导入它通常导入的所有内容，*除了* `Maybe`它的所有构造函数（`Just`和`Nothing`）。

现在您将遇到另一个问题：GHCi 不知道如何将您的`Maybe`类型的值呈现为字符串以显示在提示符上。你会得到这样的错误：

```
<interactive>:1:1:
No instance for (Show (Maybe [Char]))
  arising from a use of `print'
Possible fix: add an instance declaration for (Show (Maybe [Char]))
In a stmt of an interactive GHCi command: print it 
```

你需要做的是告诉编译器一个`Maybe`值看起来是一个字符串。令人高兴的是，这非常容易。事实上，这*很*容易，连电脑都能做到！如果您将类型定义为：

```
data Maybe a = Just a | Nothing deriving (Show) 
```

然后编译器将为您编写一个`show`函数（基本上`toString`来自其他语言）。现在您的原始语句 ( `Just "Haha"`) 应该可以正常工作了。

另外：启用 Scion 完全是一个完全不同的问题。在您了解更多 Haskell 并且实际上正在从事某种更大的项目之前，我认为不值得为此烦恼。目前，标准的 Haskell 模式应该绰绰有余。

# php - PHP MySQLi 无法识别登录信息

> ID：11589210
> 
> 赞同：0
> 
> 时间：2012-07-21T03:29:37.793
> 
> 标签：php, mysqli, database-connection

我无法使用 mysqli 类登录数据库。

我得到下一个错误：

```
Warning: mysql_query(): Access denied for user 'www-data'@'localhost' (using password: NO) 
```

我有下一个代码：

```
$this->mysqlCon = new mysqli($siteConfig['db']['hostname'], $siteConfig['db']['username'], $siteConfig['db']['password'], $siteConfig['db']['database']); 
```

`var_dump()``$siteConfig['db']`回报：

```
array(4) {
  ["hostname"]=>
  string(9) "localhost"
  ["username"]=>
  string(4) "root"
  ["password"]=>
  string(*) "***Censored***"
  ["database"]=>
  string(*) "***Censored***"
} 
```

我的 VPS 正在运行**Debian 6 32bit**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T10:15:07.763

```
Warning: mysql_query()
             ^---------------------- notice something? :) 
```

你似乎混淆了你`mysql`的`mysqli`代码。

# java - Java ME：如何显示一个简单计算器的输出？

> ID：11589212
> 
> 赞同：-1
> 
> 时间：2012-07-21T03:29:50.310
> 
> 标签：java, java-me, midp, lcdui

我正在使用 Java ME 制作计算器。我很难显示输出。

这是我的代码：

```
 public void menuadd(){

  vswitch=2;
  Form formadd = new Form("addition");
  add1 = new TextField("1st Number:", "", 30, TextField.DECIMAL);

  add2 = new TextField("2nd Number:", "", 30, TextField.DECIMAL);
  disp = Display.getDisplay(this);
  cmdok = new Command("OK", Command.OK, 2);
  formadd.addCommand(cmdok);
  formadd.append(add1);
  formadd.append(add2);   
  formadd.setCommandListener(this);
  disp.setCurrent(formadd);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:08:54.027

尝试这样的事情：

```
public void commandAction(Command c,Displayable dy)
{
if(c.equals(cmdok))
{
int num1=Integer.parseInt(add1.getString());
int num2=Integer.parseInt(add2.getString());
int result=num1+num2;
formadd.append(result+""); // +"" required to convert Integer back to String
}
} 
```

或请描述你想把结果放在哪里

# android - 如何通过我的耳机串流 DTMF 音？

> ID：11589213
> 
> 赞同：2
> 
> 时间：2012-07-21T03:29:52.567
> 
> 标签：android, dtmf

对android来说有点新。我有一个应用程序启动并运行，我正在生成 DTMF 信号并解释使用微控制器生成的内容。我成功地生成了音调，但是音调正在通过扬声器播放，我想通过拼接的耳机插孔播放音调（所以即使在解决方案之后，我也需要在它认为没有时覆盖 android 切换到扬声器的愿望耳机在那里）。提前致谢。代码在这里..

```
package edu.lehigh.cse.paclab.carbot;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ToggleButton;
import android.media.ToneGenerator;
import android.media.AudioManager;

import static android.media.ToneGenerator.TONE_DTMF_0;
import static android.media.ToneGenerator.TONE_DTMF_1;
import static android.media.ToneGenerator.TONE_DTMF_2;
import static android.media.ToneGenerator.TONE_DTMF_3;
import static android.media.ToneGenerator.TONE_DTMF_4;
import static android.media.ToneGenerator.TONE_DTMF_5;
import static android.media.ToneGenerator.TONE_DTMF_6;

public class DTMFActivity extends Activity {
private static final String TAG = "DTMF";

ToggleButton forward;
ToggleButton reverse;
ToggleButton c_clockwise;
ToggleButton clockwise;
ToggleButton pointTurnLeft;
ToggleButton pointTurnRight;

static final ToneGenerator _toneGenerator = new ToneGenerator(AudioManager.STREAM_DTMF, 100);

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    forward = (ToggleButton)findViewById(R.id.forward);
    reverse = (ToggleButton)findViewById(R.id.reverse);
    c_clockwise = (ToggleButton)findViewById(R.id.c_clockwise);
    clockwise = (ToggleButton)findViewById(R.id.clockwise);
    pointTurnLeft = (ToggleButton)findViewById(R.id.pointTurnLeft);
    pointTurnRight = (ToggleButton)findViewById(R.id.pointTurnRight);

}

public void onPause() {
    super.onPause();
}

public void onDestroy() {
    super.onDestroy();
}

public void forward(View v){

    if(!forward.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "forward: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_0);
        Log.e(TAG, "forward: emitting");
    }
}

public void reverse(View v){

    if(!reverse.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "reverse: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_1);
        Log.e(TAG, "reverse: emitting");
    }
}

public void c_clockwise(View v){

    if(!c_clockwise.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "c_clockwise: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_2);
        Log.e(TAG, "c_clockwise: emitting");
    }
}

public void clockwise(View v){

    if(!clockwise.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "clockwise: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_3);
        Log.e(TAG, "clockwise: emitting");
    }
}

public void pointTurnLeft(View v){

    if(!pointTurnLeft.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "pointTurnLeft: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_4);
        Log.e(TAG, "pointTurnLeft: emitting");
    }
}

public void pointTurnRight(View v){

    if(!pointTurnRight.isChecked()){
        _toneGenerator.stopTone();
        Log.e(TAG, "pointTurnRight: not emitting");
    }
    else{
        _toneGenerator.startTone(TONE_DTMF_5);
        Log.e(TAG, "pointTurnRight: emitting");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T16:06:15.887

尝试`STREAM.MUSIC`代替`STREAM.DTMF`：

```
static final ToneGenerator _toneGenerator = new ToneGenerator(
                                              AudioManager.STREAM_MUSIC, 100); 
```

# php - php。增量器问题

> ID：11589214
> 
> 赞同：0
> 
> 时间：2012-07-21T03:30:06.403
> 
> 标签：php

我有这个代码：

```
<?php

$html=<<<EOF  
    <p>{${$var[$n++]}[name]}</p>    
EOF;

$array=array(0,1,2,3,4,5,6);

for ($y = 0; $y < count($array) / 3; ++$y)
    { echo $html; }

?> 
```

并且对于每个循环`$n`都从头开始计数：0,1,2 → 0,1,2 → 0。

如果我想继续`$n`：0,1,2 → 3,4,5 → 6，我该怎么办？

* * *

## 活生生的例子

```
<?php

$vps_de_ctt_s1=array(       
    "name"=> "Xen VPS 200",
    // etc      
);  

$vps_de_ctt_s2=array(       
    "name"=> "Xen VPS 400",
    // etc      
);  

// etc

$dc_id_tmp=array(
    "vps_de_ctt_s1",
    "vps_de_ctt_s2",
    "vps_de_ctt_s3",

    "vps_de_ctt_s4",
    "vps_de_ctt_s5",
    "vps_de_ctt_s6",

    "vps_de_ctt_s7"
);

$html=<<<EOF
<tr>
    <td class="column-left">&nbsp;
    </td>
    <td class="column-right">
        <h5>{${$dc_id_tmp[$i++]}[name]}</h5>
    </td>
    <td class="column-right">
        <h5>{${$dc_id_tmp[$i++]}[name]}</h5>
    </td>
    <td class="column-right">
        <h5>{${$dc_id_tmp[$i++]}[name]}</h5>
    </td>
</tr>
EOF;

?>

<?php for ($y = 0; $y < count($dc_id_tmp) / 3; ++$y)    
    { echo $html; }    
?> 
```

* * *

用于字数统计的垃圾文本。没有它就无法更新帖子。用于字数统计的垃圾文本。没有它就无法更新帖子。用于字数统计的垃圾文本。没有它就无法更新帖子。用于字数统计的垃圾文本。没有它就无法更新帖子。用于字数统计的垃圾文本。没有它就无法更新帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:59:45.640

请尝试此代码。

```
<?php
function htmlcontent($i) {
//use global keywork to access ur local variables 
// [variable scope][1]
 global $dc_id_tmp,  $vps_de_ctt_s1, $vps_de_ctt_s2;

 echo '<tr>
    <td class="column-left">&nbsp;
    </td>
    <td class="column-right">
        <h5>'.${$dc_id_tmp[$i]}['name'].'</h5>
    </td>
    <td class="column-right">
        <h5>'.${$dc_id_tmp[$i++]}['name'].'</h5>
    </td>
    <td class="column-right">
        <h5>'.${$dc_id_tmp[$i++]}['name'].'</h5>
    </td>
</tr>';
}
?>

<?php for ($y = 0; $y < count($dc_id_tmp_all) ; ++$y)    
    { htmlcontent($y); }    
?> 
```

希望这会帮助你。

# macos - 名称不在 sudoers 文件中：fedora for virtualbox guest addition on max OSX

> ID：11589219
> 
> 赞同：0
> 
> 时间：2012-07-21T03:31:18.093
> 
> 标签：macos, virtualbox, fedora

我正在尝试使用 VirtualBox 在我的 VM 上运行以下程序（我在运行 OS X 的 Mac 上并且 VM 正在运行 fedora）：

```
VBoxLinuxAddiitons.run 
```

我不断收到一条错误消息，提示用户“不在 sudoers 文件中”。

这整件事是为了改变我的虚拟机上的屏幕分辨率。

我需要更改密码还是添加新密码？不太确定在这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:57:01.113

1.  以 root 身份登录到您的虚拟机。
2.  运行 visudo
3.  添加一行`yourusername ALL=(ALL) ALL`

或者，您可以在以 root 身份登录时运行 VBoxLinuxAdditions.run 脚本。

# iphone - 试图只检测正确的滑动

> ID：11589221
> 
> 赞同：0
> 
> 时间：2012-07-21T03:31:51.660
> 
> 标签：iphone, objective-c, ios, ipad, uiswipegesturerecognizer

我试图只用 UISwipeGestureRecognizer 检测右滑动。即使我已将其设置为“右”，它仍会在两个方向上记录滑动。我在网上搜索并阅读了 Apple 提供的所有开发页面。我没有看到成功做到这一点的方法。

按照要求：

。H：

```
IBOutlet UISwipeGestureRecognizer *decade1;
@property (nonatomic, retain) UISwipeGestureRecognizer *decade1; 
```

米：

```
@synthesize decade1;

- (void)scrollViewDidScroll:(UIScrollView *)sender 
{
    if((page == 4) && (decade1))
{

        printf("HELLO!!");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:07:49.027

像这样创建手势识别器，并将其添加到您想要的视图中：

```
UISwipeGestureRecognizer *rightSwipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipe:)];
[rightSwipeGestureRecognizer setDirection:UISwipeGestureRecognizerDirectionRight];
[self.view addGestureRecognizer:rightSwipeGestureRecognizer]; 
```

定义一个方法来处理滑动：

```
-(void)rightSwipe:(UISwipeGestureRecognizer*)recognizer {

    NSLog(@"Right swipe"); 
```

}

如果它仍然不起作用，请尝试不将识别器添加到视图中，并查看是否有另一个识别器处于活动状态..

编辑（看到你的代码后）：

您在 scrollViewDidScroll 方法中有您的逻辑，这就是它对任何类型的滑动（实际上是滚动）做出反应的原因。我怀疑您的手势识别器甚至可以在这种类型的设置中使用。

手势识别器需要添加到视图中，然后您需要连接一个在识别手势时将运行的方法。请记住，如果将手势识别器的方向设置为向右，则该方法仅应在向右滑动后调用。我会再次复习这门课，以充分了解它是如何工作的。[UIGestureRecognizer 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)

由于您使用的是 UIScrollView，因此识别滑动有点棘手，因为它有自己的识别器。看看[如何识别 UIScrollView 中的滑动手势](https://stackoverflow.com/questions/3648967/how-to-recognize-swipe-gesture-in-uiscrollview)

我还建议保持简单，并以编程方式添加 UISwipeGestureRecognizer（很可能您甚至不需要为其声明实例变量，因为该对象将返回到识别器上的 @selector 函数。

# java - 在 java 和 groovy 中准确地表示时间

> ID：11589228
> 
> 赞同：1
> 
> 时间：2012-07-21T03:34:50.043
> 
> 标签：java, groovy

我需要对以整和/或十分之一小时表示的时间单位进行计算，并想知道 BigDecimal 是否适合它的数据类型。从我收集到的 BigDecimal 将适用于货币计算，所以我认为在我必须处理 1.5 + 0.6 类型的简单数学的情况下也是如此。我的想法在这里正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:55:44.750

简短的回答是肯定的。如果您正在执行十进制计算，那么 BigDecimal 是一个很好的类，可以用来避免任何类型的舍入错误。但是，这可能不是最有效的方法。如果性能不是问题，那么我会说 BigDecimal 将满足您的目的。

另一种方法是在几分钟内执行您的计算，然后将您的答案除以 6 以提供结果。在这种情况下，您可以使用 Integer 并将昂贵的计算推迟到最后。当您除以 6 时，您可以将答案转换为双倍。

```
Double answer = 154 / 6.0 //154 represents calculated minutes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:11:50.513

因为你的问题提到你只需要十分之一小时的工作，所以它是基于这个最小时间单位的倍数的表示，即 6 分钟。

通过这种方式，可以使用整数数据类型（如 Integer 或[BigInteger](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html%5d) ）来表示时间，具体取决于表示的最大时间。

您甚至可以编写一个自定义类来包装 (Big)Integer 并提供格式化为字符串、其他类型之间的转换等的方法。

# php - 在 ENUM 类型的 SQL 语句中使用 WHERE 会破坏 mysql_query

> ID：11589230
> 
> 赞同：0
> 
> 时间：2012-07-21T03:35:29.417
> 
> 标签：php, mysqli

编码：

```
 $query = "SELECT * FROM tweets WHERE read=n";
        $result = mysqli_query($mysqli,$query);

        $row = mysqli_fetch_array($result, MYSQLI_ASSOC);
        echo $row["from_user"], $row["text"]; 
```

上面的代码给了我这个：

```
Warning: mysqli_fetch_array() expects parameter 1 to be mysqli_result, boolean given in /index.php on line 16 
```

下面的代码没有：

```
 $query = "SELECT * FROM tweets";
        $result = mysqli_query($mysqli,$query);

        $row = mysqli_fetch_array($result, MYSQLI_ASSOC);
        echo $row["from_user"], $row["text"]; 
```

“读取”字段是 ENUM('y','n')。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T03:45:27.260

`read`是 MySQL 中的保留关键字。因为它是您的列的名称，所以在 WHERE 子句中的单词周围添加反引号，这应该可以解决问题：

```
SELECT * FROM tweets WHERE `read` = 'n'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:45:11.253

您需要引用该`ENUM`值以及 escape `read`，[这是 MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)：

```
$query = "SELECT * FROM tweets WHERE `read` = 'n'"; 
```

# asp.net - 在 asp.net 中的两个用户控件之间传递数据

> ID：11589232
> 
> 赞同：0
> 
> 时间：2012-07-21T03:35:44.270
> 
> 标签：asp.net

我有一个约束 categoryname 的 UC_Categories.ascx **(UC_1)**。UC_Products.ascx **(UC_2)**将按类别名称显示产品。它们都在一个名为 BookShop.aspx ( Page )**的页面中**

在页面中，当用户单击一个**UC_1**（步骤 1）时，它将按类别名称呈现一个**UC_2** （步骤 2 ）。**我通过向Page**发送一个参数为 categoryname 的请求来处理第 1 步。Step2 新建一个**UC_2**，设置属性值为categoryname，执行FillProductByCategoryName方法。然后将**UC_2**添加到页面中的 PlaceHolder。但我没有显示**UC_2**。

我需要每个人的帮助或建议。

感谢您阅读我的问题！ps：我的英文不是很好。

在 UC2 的代码隐藏中：

```
public void FillProduct()
    {

        ProductsMN productsMN = new ProductsMN();
        if (dlBook == null)
        {
            dlBook = new DataList();
            dlBook.DataSource = productsMN.GetByCategoryName(CategoryName);
            dlBook.DataBind();
        }
        else
        {
            dlBook.DataSource = productsMN.GetByCategoryName(CategoryName);
            dlBook.DataBind();
        }
    }

    public string CategoryName { get; set; } 
```

在页面的代码隐藏中

```
 protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
        }
        string categoryName = Request.QueryString["categoryName"] as string;
        if (!string.IsNullOrWhiteSpace(categoryName))
        {
            BookContent.Controls.Clear(); // BookContent : Placeholder
            Control c = Page.LoadControl("~/UC/UC_Books.ascx") as UC.UC_Books;
            UC.UC_Books ucBook = new UC.UC_Books();
            ucBook.CategoryName = categoryName;
            ucBook.FillProduct(); //line 10
            BookContent.Controls.Add(ucBook); //line 11
        }

    } 
```

在 Page 的 PageLoad 处，useBook 包含数据。但在页面（视图）中，我看不到数据。我认为 //line11 未执行或不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:52:56.640

您需要将公共属性和 UserControl 的控件的构造函数公开给父页面。

假设您的 Usercontrol 有一个标签：

```
<asp:Label ID="MyLabel" runat="server" visible="true"/> 
```

在 UserControl 的代码隐藏中添加这个。

```
 //Constructor
    public MyUserControl()
    {
        Category = new Label();
    }
    //Exposing the Label
    public Label Category
    {
        get { return this.MyLabel; }
        set { this.MyLabel = value; }
    } 
```

假设您已将 UserControl 添加到父页面，并且其 ID 为“MyUserControl”。

要将 UserControl 的标签值设置为某事，请使用以下命令：

```
MyUserControl.Category.Text=Response.QueryString["categoryname"];//Obviously you would want to encode it first. 
```

如果您需要在 UserControl 的代码隐藏中调用父页面的功能，则必须使用委托。我不会推荐这种方法。

# facebook-graph-api - 使用电子邮件地址查找 Facebook ID

> ID：11589233
> 
> 赞同：1
> 
> 时间：2012-07-21T03:35:57.630
> 
> 标签：facebook-graph-api

我需要使用电子邮件地址找出用户的 Facebook ID 和他/她的所有公开个人资料。虽然在[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)据说可以通过以下方式找到它：

graph.facebook.com/search?q=shaon@yahoo.com&type=user

其中 q 是用户邮件地址。它不起作用。据我所知，这是facebook的一个错误。您可以从这里查看详细信息：developers.facebook.com/bugs/429972587034829 和 /274710012636144

我也从 stackoverflow 得到一些问题，但没有正确的描述。喜欢：[通过电子邮件地址获取 Facebook 用户 ID](https://stackoverflow.com/questions/3250214/get-facebook-user-id-by-email-address)

如果有人可以建议任何其他链接或任何其他方式来完成此任务，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:56:46.877

我尝试了许多测试用例。此查询似乎仅适用于您帐户的朋友。它不适用于朋友的朋友、页面粉丝（如果您被认证为页面）或随机用户。

这与 Facebook 普遍收紧隐私控制的做法是一致的。

# asp.net - 如何在 C# 中比较两个日期而不比较时间？

> ID：11589236
> 
> 赞同：1
> 
> 时间：2012-07-21T03:36:11.587
> 
> 标签：asp.net, date, compare

我想比较 C# 中的两个日期我尝试过 Toshortdate() 但它对我不起作用我不知道为什么？我只想比较日期而不是时间。我的代码如下：

```
 Convert.ToDateTime(b.CreatedDate).ToShortDateString() == Convert.ToDateTime(objbreedable.LastBDate).ToShortDateString() 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T03:39:10.350

使用日期属性。

```
Convert.ToDateTime(b.CreatedDate).Date == Convert.ToDateTime(objbreedable.LastBDate).Date 
```

# html - 最后一个 DIV 填充父 DIV 高度的剩余部分（无 JS 或绝对位置）

> ID：11589241
> 
> 赞同：3
> 
> 时间：2012-07-21T03:38:07.433
> 
> 标签：html, css

我希望 div C 填充父 div A 的剩余高度，同时允许兄弟 div B 具有可调节的高度。仅使用 CSS（无 javascript）可以做到这一点吗？

“绝对位置 div C”已经回答了其他类似的问题，但这对我不起作用，因为我希望 div B 根据其内容具有可变高度。

```
+---------------------------------------+
| D +---------------------------------+ |
| i | div B (min and variable height) | |
| v +=================================| |
|   |               ^                 | |
| A |               |                 | |
|   |              div C              | |
|   |      (remainder of height)      | |
|   |               |                 | |
|   |               v                 | |
|   +---------------------------------+ |
+---------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T04:34:38.833

如果将顶部 div 设置为 float: left 和 width: 100% 会怎样？

我试图在 JSFiddle 中对其进行测试，它似乎可以工作。

代码在[这里](http://jsfiddle.net/tyUP4/1/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T04:27:47.817

这可能不适合你（只有非常现代的浏览器实现它），但值得一提的是，灵活的盒子模型旨在解决这样的问题。一个例子（[jsfiddle](http://jsfiddle.net/pyvDb/)）：

HTML：

```
<div id="container">
    <div class="top">Hello there.</div>
    <div class="bottom">Hello to you as well!</div>
</div> 
```

CSS：

```
body, html {
    height: 100%;
}

#container {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    /* Set a hard-to-work-with height */
    height: 82%;
    border: 1px solid #000;
}

.top {
    -webkit-box-flex: 1;
}

.bottom {
    /* Emphasize that we want the bottom to take up more space */
    -webkit-box-flex: 10;
    background: #999;
} 
```

编辑：在这里进一步阅读：http: [//coding.smashingmagazine.com/2011/09/19/css3-flexible-box-layout-explained/](http://coding.smashingmagazine.com/2011/09/19/css3-flexible-box-layout-explained/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T04:30:35.527

您可以通过“伪造” a 来做到这一点`table`，而不使用一个。

只需设置一个`div`结构来模仿表格的`tr, td`结构，并将 CSS 设置为将`div`s 显示为`table`.

[http://jsfiddle.net/Kyle_Sevenoaks/EYuNz/3/](http://jsfiddle.net/Kyle_Sevenoaks/EYuNz/3/)

*（单击带有内容的 div 以添加更多内容，它会显示可变高度）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T06:31:40.790

***这是另一种方法。***

**参考：** [**jsFiddle**](http://jsfiddle.net/xq5xz/)

这个**不是** `float`div 而是使用 a`#divWrapper`来处理内部`#divTop`和`#divBottom`需求。

**HTML：**

```
<div id="divContent">

    <div id="divWrapper">

      <div id="divTop">
        <p>This is random webpage content for div B. <br />
           This is random webpage content for div B. <br />
           This is random webpage content for div B. <br />
           This is random webpage content for div B. <br />        
           The 'background-color' aqua is the size of this div B. <br />
            <b>Note CSS 'min-height' is optionally used for this div. </b>
        </p>
      </div>

      <div id="divBottom">
        <p>The remainder of the space is used by div C. Line 01 <br />
           The remainder of the space is used by div C. Line 02 <br />
           The remainder of the space is used by div C. Line 03 <br />
           The remainder of the space is used by div C. Line 04 <br />
           The remainder of the space is used by div C. Line 05 <br />
           The remainder of the space is used by div C. Line 06 <br />
           The remainder of the space is used by div C. Line 07 <br />
           The remainder of the space is used by div C. Line 08 <br />
           Since this div is secondary, contents may clip. Line 09 <br />
           The remainder of the space is used by div C. Line 10 <br />
           The remainder of the space is used by div C. Line 11 <br />
           The remainder of the space is used by div C. Line 12 <br />
           The remainder of the space is used by div C. Line 13 <br />
           The remainder of the space is used by div C. Line 14 <br />
          </p>
      </div>

    </div>

</div> 
```

**CSS：**

```
#divContent {
    background-color: yellow;
    border: 3px solid red;
    width:400px;
    height: 400px;
}

#divWrapper {
    height: 90%;
    width: 90%;
    top: 5%;
    left: 5%;
    position: relative;
    border: 1px solid black;
    overflow: hidden;
}

#divTop {
    background-color: aqua;
    min-height: 155px;          /* Optional minimum height setting */
}

#divBottom {
    background-color: pink;
    width: 100%;
}

#divTop:hover, #divBottom:hover {
    background-color: white;
} 
```

# java - 除了转义引号之外还有其他方法吗？

> ID：11589246
> 
> 赞同：0
> 
> 时间：2012-07-21T03:39:42.923
> 
> 标签：java

我正在使用 httpclient 进行发布请求，并且一些字符串有很多引号，除了转义它们之外我还能做些什么。要摆脱它们需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T03:41:36.730

如果它们真的很长，您可以从文件中读取它们，但据我所知，Java 中没有替代的字符串文字形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:43:02.967

查找/替换？我假设您的意思是手动，当然以编程方式不会花费很长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T03:44:22.800

您可以使用另一个字符，也许是一个单引号，然后它们会替换它。

```
String withDQuotes = "a 'string' with 'lots' of 'quotes' here".replace( "'", "\"" ); 
```

此解决方案的问题是您是否需要发送单引号。也许，您可以使用您确定不会发送的字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T04:01:25.177

您可能应该研究一个合适的模板系统，如[FreeMarker](http://freemarker.sourceforge.net/)或[Velocity](http://velocity.apache.org/)或类似的东西。嵌入的字符串只会让你看起来很糟糕，而且维护起来很痛苦。

# javascript - 通过 AJAX 从子域请求页面会起作用吗？

> ID：11589248
> 
> 赞同：1
> 
> 时间：2012-07-21T03:40:42.860
> 
> 标签：javascript, jquery, ajax, cross-domain, subdomain

我正在编写要在 youtube 视频页面上运行的用户脚本。它需要使用 jQuery 向 gdata.youtube.com 发出请求以使事情变得更容易。这会起作用还是违反跨域政策？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:11:51.070

它违反了跨域政策，因为您没有在 youtube.com 上托管它，因此域或子域，它仍然不是脚本所在的域，因此它不会工作。

# c# - 在它离开代码隐藏之前更改html

> ID：11589251
> 
> 赞同：1
> 
> 时间：2012-07-21T03:41:07.340
> 
> 标签：c#, vb.net, html-agility-pack

在 vb.net 或 C# 网站中

如何在它离开服务器之前访问最终的 html，以便我可以从代码隐藏中进行最终的 html 调整。（我不想使用 JavaScript 进行这些调整）

是否是页面 PreRenderComplete 事件将是触发的最后一个事件，我将能够看到发送到浏览器的 html，我将能够使用 HtmlAgilityPack 编辑 html？

这必须很容易做到并且可能

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:13:08.093

修改已经写出的 HTML 至少不是微不足道的（如果不是不可能的话）。响应正在写入输出流，很可能已经部分发送到客户端。

如果您使用 WebForms，那么在渲染之前操作控件树并在其中插入元素会容易得多（PreRenderComplete 听起来不错）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:03:39.533

您可以覆盖`Page_Render`并轻松拦截输出流。这样做没有风险。在任何`Page`：

```
 protected override void Render(System.Web.UI.HtmlTextWriter writer)         
 {
      // intercept the output stream and write to your own 
      // StringWriter, bound to a StringBuilder

      var sb = new StringBuilder();
      var sw = new StringWriter(sb);
      base.Render(sw);

      string html = sb.ToString();

      // do stuff to alter "html"

      ..

      // write it to the real output stream

      writer.Write(html)
 } 
```

如果您使用`UpdatePanels`（异步回发）它可能会有点麻烦，因为 HTML 以特殊方式格式化。即使在那里，也不是不可能改变，但它需要更多的工作，因为在 UpdatePanel 数据块中实际上有一个校验和。（好在很简单，就是内容的长度）。但并不像仅仅更改内容并将其写回那么简单。

但是对于非异步回发，它看起来像任何其他 HTML 页面，将其更改为您喜欢的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T18:02:02.170

嗨，我只是想分享我在阅读对我的帖子的回复并在网上进行一些搜索并参考此论坛帖子[http://forums.asp.net/t/1146098.aspx/1](http://forums.asp.net/t/1146098.aspx/1) 并使用HtmlAggilityPack [http://htmlagilitypack.codeplex.com/wikipage?title=Examples](http://htmlagilitypack.codeplex.com/wikipage?title=Examples)

这是代码

```
Imports System.IO
Imports HtmlAgilityPack

Partial Class Default2
    Inherits System.Web.UI.Page

    Protected Overrides Sub Render(ByVal writer As HtmlTextWriter)

        Dim mem As New System.IO.MemoryStream()
        Dim twr As New System.IO.StreamWriter(mem)
        Dim myWriter As System.Web.UI.HtmlTextWriter = New HtmlTextWriter(twr)
        MyBase.Render(myWriter)

        myWriter.Flush()
        myWriter.Dispose()

        Dim strmRdr As New System.IO.StreamReader(mem)
        strmRdr.BaseStream.Position = 0
        Dim pageContent As String = strmRdr.ReadToEnd()
        strmRdr.Dispose()
        mem.Dispose()

        writer.Write(AlterWithHTMLAGP(pageContent))

    End Sub

    Function AlterWithHTMLAGP(ByVal pageSource As String) As String

        Dim htmlDoc As HtmlDocument = New HtmlDocument()

        htmlDoc.OptionFixNestedTags = True

        htmlDoc.LoadHtml(pageSource)

        Dim newNode As HtmlNode = HtmlNode.CreateNode("<div>" & "someHtml" & "</div>")

        Dim body As HtmlNode = htmlDoc.DocumentNode.SelectSingleNode("//body")

        body.PrependChild(newNode)

        Return htmlDoc.DocumentNode.WriteTo()

    End Function

End Class 
```

# sql - 按到期日（0-30,31-60等）未清余额的会计表设计

> ID：11589253
> 
> 赞同：2
> 
> 时间：2012-07-21T03:41:13.453
> 
> 标签：sql, finance, account, accounting

我有一个包含以下字段的会计交易表：

*   交易标识
*   日期
*   交易类型（收费、付款、信用等）
*   借方账户
*   信用账户
*   数量

我有以下记录

```
id  date         type     debaccount   credaccount   amount
--  ----------   -------  ----------   -----------   ------
1   02/13/2012   charge   utilities    receivables   $200.00
2   02/17/2012   charge   maintenan    receivables   $150.00
3   03/06/2012   credit   receivables  utilities     ($20.00)
4   03/27/2012   charge   repairs      receivables   $80.00
5   04/29/2012   charge   utilities    receivables   $135.00
6   05/21/2012   charge   utilities    receivables   $70.00
7   06/22/2012   charge   utilities    receivables   $60.00
8   07/19/2012   payment  receivables  utilities     ($100.00) 
```

现在我可以毫无问题地获得平衡，所以我知道：

账户公用事业收入 200-20（信用）+135+70+60 = 445 - 100（支付）= 余额 $345

现在我需要的是在到期日之前获得未结余额，例如：

```
Account      0-30 days   31-60 days  61-90 days   90+ days    Balance
---------    ---------   ----------  ----------   ---------   ----------
receivables  $60.00      $70.00      $135.00      $200.00     $465.00
                                                  ($20)       $445.00
                                                  ($100)      $345.00 
```

我已经看到，当您有未结余额时，如果您付款，该付款将影响最后一笔费用（如表中所示）。我的问题是我是否需要在交易和交易之间建立关系，以便我知道一笔付款会影响“x”笔费用。这是我想到的唯一解决方案，以便在到期日之前获得所需的未结余额。

任何帮助将不胜感激！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T09:21:43.407

如果您使用的是 excel 2010，那么您可以使用**“sumifs”**功能。

您可以检查虚拟解决方案。

测试.xlsx

[URL=http://www.4shared.com/file/bVIFy_X8/test.html]test.xlsx[/URL]

# r - 矢量化 R 过滤并在数据框中获取多个滞后值

> ID：11589254
> 
> 赞同：0
> 
> 时间：2012-07-21T03:41:16.323
> 
> 标签：r, filtering, dataframe, data.table, lag

我有一个矢量化问题，我似乎无法在线找到解决方案。我有一个非常大的数据框，目前我正在使用以下循环来过滤和获取滞后值：

```
rowtype <-c('A','B','A','A','B','B','B','B','A','B','B','A','B','A','B','B','A','A');
values1<-c(2,1,8,5,-4,6,42,10,20,5,7,8,-2,8,9,3,2,5); 
index<-seq(1:length(values1));

df<-data.frame(rowtype, values1, index);

mininumBsize <- 2;

df$firstBLagged<-0;
df$secondBLagged<-0;
df$thirdBLagged<-0;

for (idx in which(df$rowtype=='A') )
{
  #get the past 5 lagged values of type 'B' that exceed a threshold
  laggedValues <- rev(df[df$rowtype=='B' & df$values1 > mininumBsize & df$index < idx,]$values1)[1:5];

  #take out any NA values here
  laggedValues[is.na(laggedValues)]<-0;

  #store those lagged values back into the dataframe
  df$firstBLagged[idx]<-laggedValues[1];
  df$secondBLagged[idx]<-laggedValues[2];
  df$thirdBLagged[idx]<-laggedValues[3];
} 
```

数据框的输出如下所示：

```
> df
   rowtype values1 index firstBLagged secondBLagged thirdBLagged
1        A       2     1            0             0            0
2        B       1     2            0             0            0
3        A       8     3            0             0            0
4        A       5     4            0             0            0
5        B      -4     5            0             0            0
6        B       6     6            0             0            0
7        B      42     7            0             0            0
8        B      10     8            0             0            0
9        A      20     9           10            42            6
10       B       5    10            0             0            0
11       B       7    11            0             0            0
12       A       8    12            7             5           10
13       B      -2    13            0             0            0
14       A       8    14            7             5           10
15       B       9    15            0             0            0
16       B       3    16            0             0            0
17       A       2    17            3             9            7
18       A       5    18            3             9            7 
```

本质上，对于类型为“A”的每一行，我想获得超过某个阈值“mininumBsize”的“B”类型的过去 5 个值。然后我想将它存储回数据帧到 df$firstBlagged 等，以便以后可以将其用于回归和其他分析。

不幸的是，这段代码运行时间太长（我也想了解如何编写更好的 R）。大多数在线示例显示了如何仅对行本身进行过滤，而不是如何根据条件获取滞后值。有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:31:25.257

我没有看到一种完全矢量化的简单方法，但如果存在的话，我有兴趣学习它。但是，我可以让它更有效率。

让我们使用更大的 data.frame，这样我们就可以使用`system.time`：

```
rowtype <-rep(c('A','B','A','A','B','B','B','B','A','B','B','A','B','A','B','B','A','A'),1000)
values1<-rep(c(2,1,8,5,-4,6,42,10,20,5,7,8,-2,8,9,3,2,5),1000) 
index<-seq(1:length(values1))

df<-data.frame(rowtype, values1, index) 
```

现在我们将您的代码包装成一个函数：

```
addlagged<-function(df,mininumBsize = 2){
  df$firstBLagged<-0;
  df$secondBLagged<-0;
  df$thirdBLagged<-0;

  for (idx in which(df$rowtype=='A') )
  {
    #get the past 5 lagged values of type 'B' that exceed a threshold
    laggedValues <- rev(df[df$rowtype=='B' & df$values1 > mininumBsize & df$index < idx,]$values1)[1:5];

    #take out any NA values here
    laggedValues[is.na(laggedValues)]<-0;

    #store those lagged values back into the dataframe
    df$firstBLagged[idx]<-laggedValues[1];
    df$secondBLagged[idx]<-laggedValues[2];
    df$thirdBLagged[idx]<-laggedValues[3];
    }
  return(df)
} 
```

现在更有效的功能：

```
 addlagged2<-function(df,mininumBsize = 2){  
  #make sure rowtype is not a factor, but a character
  df$rowtype<-as.character(df$rowtype)
  #subset before the loop
  df2<-subset(df,!(rowtype=="B" & values1<mininumBsize))

  #initialize vectors
  firstBLagged <- rep(0,nrow(df2))
  secondBLagged <- rep(0,nrow(df2))
  thirdBLagged <- rep(0,nrow(df2))

  for (idx in which(df2$rowtype=='A') )
  {
    #get the past 3 lagged values of type 'B'    
    laggedValues <- df2$values1[1:idx][df2$rowtype[1:idx]=='B']
    #do not use rev
    laggedValues <- laggedValues[length(laggedValues):(length(laggedValues)-2)]

    #don't save to data.frame inside loop, use vectors
    firstBLagged[idx]<-laggedValues[1];
    secondBLagged[idx]<-laggedValues[2];
    thirdBLagged[idx]<-laggedValues[3];
  }
  #take out any NA values here (do it only ones and not inside the loop)
  firstBLagged[is.na(firstBLagged)]<-0
  secondBLagged[is.na(secondBLagged)]<-0
  thirdBLagged[is.na(thirdBLagged)]<-0

  #create columns in df     
  df$firstBLagged<-0
  df$secondBLagged<-0
  df$thirdBLagged<-0

  #transfer results to df
  df$firstBLagged[!(as.character(df$rowtype)=="B" & df$values1<mininumBsize)]<-firstBLagged
  df$secondBLagged[!(as.character(df$rowtype)=="B" & df$values1<mininumBsize)]<-secondBLagged
  df$thirdBLagged[!(as.character(df$rowtype)=="B" & df$values1<mininumBsize)]<-thirdBLagged
  return(df)
} 
```

它更快吗？

```
> system.time(df2<-addlagged(df))
       User      System verstrichen 
     37.157      24.591      61.735 
> system.time(df3<-addlagged2(df))
       User      System verstrichen 
      2.866       0.517       3.382 
```

结果是否相同？

```
> df3$rowtype<-factor(df3$rowtype)
> identical(df2,df3)
[1] TRUE 
```

什么是改进功能的大部分计算时间？让我们看看输出`Rprof`：

```
> summaryRprof()
$by.self
                 self.time self.pct total.time total.pct
"=="                 0.346    61.79      0.346     61.79
":"                  0.189    33.75      0.189     33.75
"$"                  0.016     2.86      0.016      2.86
"$<-.data.frame"     0.005     0.89      0.005      0.89
"try"                0.001     0.18      0.002      0.36
"-"                  0.001     0.18      0.001      0.18
"is.na"              0.001     0.18      0.001      0.18
"tryCatch"           0.001     0.18      0.001      0.18

$by.total
                 total.time total.pct self.time self.pct
"=="                  0.346     61.79     0.346    61.79
":"                   0.189     33.75     0.189    33.75
"$"                   0.016      2.86     0.016     2.86
"$<-.data.frame"      0.005      0.89     0.005     0.89
"$<-"                 0.005      0.89     0.000     0.00
"try"                 0.002      0.36     0.001     0.18
"-"                   0.001      0.18     0.001     0.18
"is.na"               0.001      0.18     0.001     0.18
"tryCatch"            0.001      0.18     0.001     0.18

$sample.interval
[1] 0.001

$sampling.time
[1] 0.56 
```

大部分时间都花在循环中的所有子集化和创建序列上。使用 *apply 函数对此无济于事。我尝试使用 data.table 及其二进制搜索，但没有帮助；很可能是因为我必须在循环内设置一个键。我对data.table没有太多经验，所以可能我做错了什么。

最后，这是代码审查，并不真正属于 Stack Overflow。

# ios - 这块有什么问题？

> ID：11589259
> 
> 赞同：1
> 
> 时间：2012-07-21T03:42:03.960
> 
> 标签：ios, animation, objective-c-blocks

我有一个名为“主机”的 UIView，其中包含许多其他视图。Host 是 glView 的子视图。主机也是一个实例变量。所以我有以下方法：

```
-(void) doCancel:(id)sender {
    ANNOUNCE
    X.messageIsShowing = NO;
    CGFloat fadeOutTime = 0.4f;
    [UIView animateWithDuration:fadeOutTime animations:^{ 
        host.alpha = 0.f; 
    } completion:^(BOOL finished){
        [host removeFromSuperview];
        [host release];
    }];
} 
```

它应该淡出主机视图，然后将其从其超级视图中删除。它工作了几个星期，但现在它在“[host removeFromSuperview];”行上出现 EXC_BAD_ACCESS 崩溃。自从它起作用以来，我确实改变了很多东西，但据我所知，这种方法没有任何改变。

我添加了日志语句，所以现在它看起来像这样：

```
-(void) doCancel:(id)sender {
    ANNOUNCE
    X.messageIsShowing = NO;
    CGFloat fadeOutTime = 0.4f;
    CCLOG(@"host.alpha: %f", host.alpha);
    [UIView animateWithDuration:fadeOutTime animations:^{ 
        host.alpha = 0.f; 
    } completion:^(BOOL finished){
        CCLOG(@"host.alpha: %f", host.alpha);
        CCLOG(@"host %@", host);
        CCLOG(@"[host superview]: %@", [host superview]);
        [host removeFromSuperview];
        [host release];
    }];
} 
```

所有四个日志语句都工作并打印预期的内容。所以'host'和host的superview对于日志语句是有效的。但它仍然在 [host removeFromSuperview] 上崩溃。我还玩了很多断点。但是调试命令在完成块内不起作用 - 没有任何 ivars 在范围内，可能是因为完成块在线程 1 而不是 0 上运行。谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:44:52.223

看看`[host release]`块的内部。我猜这`host`是一个实例变量？（它似乎不是一个局部变量。）如果是这样，在你释放它之后，你应该将它设置为`nil`，比如

```
[host release];
host = nil; 
```

否则，它可能指向一个已释放的对象，下一个使用它的地方会崩溃。

# opengl - 粘连和闪烁的问题

> ID：11589262
> 
> 赞同：-2
> 
> 时间：2012-07-21T03:42:55.850
> 
> 标签：opengl

当我想使用 gluint 和 glint 时，出现以下错误，

```
gluint was not declared in this scope
glint was not declared in this scope 
```

我是否错过了我应该拥有的图书馆？程序中需要 GLFW 和 GLEW 的所有其他内容都运行良好，当我用 unsigned int 和 int 替换 gluint 和 glint 时，程序运行。

没有按预期的方式工作，但它仍然运行。当我得到它时，我会弄清楚，我认为这与我的顶点和片段着色器代码是废话有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T04:13:56.030

我假设您使用的是 C 或 C++，因为您没有说是哪个。

OpenGL中没有`glint`和`gluint`定义。有*和* `GLint`然而`GLuint`。毕竟，C/C++ 是区分大小写的语言。

# cassandra - hector 的 indexedslicesquery 或 rangelicesquery 哪个性能更好？

> ID：11589264
> 
> 赞同：2
> 
> 时间：2012-07-21T03:43:21.183
> 
> 标签：cassandra, hector

当我使用 cassandra 时，我遇到了 cassandra 读取的性能瓶颈。

有两种方法可以读取我的数据，这是大量的行键。第一个是使用索引并通过索引切片查询 api 进行查询。第二个是使用rangeslicequery api，因为行是序列。

当我使用索引时，它总是抛出超时异常。然后我想知道rangeslicequery是否性能更好？

具有 200k 行和 3m 列的 cf。检索 20k 行的查询。

密钥缓存为 30000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:31:46.500

我认为在这种情况下，使用 range_slice_query 可能会更好。它以块的形式从磁盘流式传输数据，而不是对每个索引条目进行随机读取（我认为这就是 get_indexed_slices 的工作方式）。唯一可以确定的方法是尝试两者并进行比较。

要停止超时，您可以减少每个查询返回的行数（“计数” [http://wiki.apache.org/cassandra/API/](http://wiki.apache.org/cassandra/API/)）或增加您使用 hector 的超时长度。

您是否考虑过使用 hadoop 来做您想做的事情？20k 行相当多，它可能更适合您的任务。cassandra 源代码提供了一个 InputFormat 可以使用。它在下面使用范围查询，预先检查要为每个令牌范围查询哪个节点。这可能是进行查询的最快方法。这是关于[http://wiki.apache.org/cassandra/HadoopSupport](http://wiki.apache.org/cassandra/HadoopSupport)的文档。

# php - 文件上传 Codeigniter 和 ajax

> ID：11589265
> 
> 赞同：1
> 
> 时间：2012-07-21T03:43:21.443
> 
> 标签：php, jquery, codeigniter

我不确定我在这里做错了什么。

控制器

```
function do_test()
{
    $config['upload_path'] = './images';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '10000';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';
    $config['overwrite'] = TRUE;
    $confit['remove_spaces'] = TRUE;

    $this->load->library('upload', $config);
    $this->load->library('form_validation');

    $this->form_validation->set_rules('file', 'trim|required|xss_clean');
    $test = $this->input->post('file');
    var_dump($test); //var dump return : string(21) "C:\fakepath\truth.jpg"

    if ( ! $this->upload->do_upload($test))
    {
        echo "no";
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        echo "yes";
    }
} 
```

形式

```
<?php echo form_open_multipart('home/do_test', array( 'id' => 'skill-form-test' ) );?>

    <input type="file" name="userfile" id="file" size="20" />

    <br /><br />

    <input type="submit" value="upload" />

    </form> 
```

jQuery

```
$('#skill-form-test').submit(function(e) {
    e.preventDefault();

    $.post(base_url + "index.php/home/do_test", { file : $("#file").val()  }, function(data)
        {
            }, "json");
    alert ( $("#file").val() + "-" + base_url ); //This alerts: C:\fakepath\truth.jpg-http://siteurl.com/
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-21T05:47:29.423

**更新**：该修复适用于 CodeIgniter v3，可能不适用于最新版本。

只是改变

```
if ( ! $this->upload->do_upload($test)) 
```

到

```
if ( ! $this->upload->do_upload('userfile')) 
```

将解决问题。

希望这对您有所帮助。谢谢！！

# mysql - 良好的数据库设计，可变数量的属性

> ID：11589267
> 
> 赞同：13
> 
> 时间：2012-07-21T03:43:36.393
> 
> 标签：mysql, database, database-design

我正在尝试创建一个包含设备列表的数据库。所有的设备都会有某些共同的属性（例如制造商、型号#、序列号等），然后还有特定于某个设备的其他属性（即调制解调器将具有访问权限#，而太阳能电池板将具有输出能力）。我不确定如何用良好的数据库设计原则来表示这些不断变化的属性，我尝试过在网上搜索，但我不完全确定要搜索什么。

我提出了以下可能的解决方案以及我对它们的初步想法：

1.  拥有一个包含所有可能属性的大表，并将 null 放在不适用的地方。显然，这有一些缺陷。

2.  每种设备类型都有一个单独的表格。这似乎使用起来可能是一场噩梦，如果我想打印所有设备的列表，我怎么知道要查找哪些表？

3.  有一个包含公共属性的表，以及使用外键访问的每种设备类型的其他表，以存储额外的属性。我可能可以完成这项工作，但这会很麻烦，而且感觉不是一个很好的解决方案。

4.  实体-属性-值类型模型。只是看起来不太适合我想做的事情。

我在数据库方面没有很多经验，所以我在这里边学习边学习，任何与此问题相关的链接或关于数据库设计的“必读”文章将不胜感激。谢谢！

编辑：首先，我发现我需要谷歌“继承映射”，这可能会帮助其他有类似问题的人。为了解决这个问题，我最终使用了#2 和#3 的混合体。它实际上非常简单，运行良好，并且解决了添加额外设备类型的问题，而没有 EAV 的复杂性。感谢所有的意见和建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T04:10:13.933

选项 1、2 和 3 有一个非常严重的缺陷：当有人想出一个新属性时，您必须修改基础表模式。在选项 1 的情况下，引入新设备类型的可能性使问题更加复杂。你有多确定这组属性在任何时候都是固定的？如果中断或告诉客户不，您不能拥有新属性，您会有多高兴？

如果您很可能对常用属性进行查询，您可以尝试混合使用 3 和 4，在拆分属性类型而不是设备类型时会抛出一些 2，这似乎更加不稳定。如果我理解正确，选项 4 是选项 1 的正常形式版本，它解决了其所有固有问题（稀疏性和脆性）。

```
INVENTORY( id*, model, manufacturer, serial )
ATTRIBUTE( id*, name, type, description )
INVENTORY_FACT_STRING( inv_id*, attr_id*, value )
INVENTORY_FACT_NUMBER( inv_id*, attr_id*, value )
INVENTORY_FACT_LIST_STRING( inv_id*, attr_id*, ordinal*, value ) 
```

等等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T08:37:25.930

Martin Fowler 在他的一本书和他的网站上概述了备选方案 1、2 和 3。

[单表继承（选项 1）](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)

[具体表继承（选项2，排序）](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)

[类表继承（选项 3）](http://martinfowler.com/eaaCatalog/classTableInheritance.html)

我的偏好是选项 3。每个选项在总体方案中都有其位置。

EAV 非常适合在运行中添加新属性。但是当需要将数据转化为有用的信息时，EAV 数据库可能是一场噩梦。

我有一个更长的答案，我会按需发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T04:13:34.907

我认为您面临常规的数据库规范化。您需要以下表格：

```
Items -> Id, Name, Model, Brand Id
Brands -> Id, Name
Attribute Names -> id, name
Attribute Mappings -> Id, Names Id, Items Id, Attribute Description 
```

如果有多个属性，则在属性表中列出并与产品 ID 等相关联。尝试提出第 3 种规范化形式

[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T04:07:45.313

任何 SQL 数据库都很难解决这个问题。MySQL 没有很好的答案。

1) 有效，您可以为重要的设备类型添加一些视图。它减少了连接数并允许对每个字段进行查询和索引。

2）您可以在视图中使用联合所有查询。PostgreSQL 和 Informix 具有表继承。

3) 这通常是一种实现选择。同样，您可以使用视图进行连接。

4) PostgreSQL、Informix、Oracle、IBM DB2 和 MS SQL Server 支持 XML 数据类型来实现值对。

在更高级别上，您可以使用 XML 开发设备的元模型。然后，您可以使用此模型生成架构 SQL 查询和 CRUD 代码。

# actionscript-3 - Flex 4 使用椭圆作为蒙版

> ID：11589268
> 
> 赞同：0
> 
> 时间：2012-07-21T03:44:00.403
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flex4

Flex中有没有办法绘制`<s:Ellipse>`并使用它来遮盖图像？这是`<s:Ellipse>`我写的一个：

```
<s:Ellipse id="imageFrame" width="150" height="150" rotation="325" top="50" left="50">
    <s:stroke>
        <s:LinearGradientStroke weight="5">
            <s:GradientEntry color="0x000000"/>
            <s:GradientEntry color="0xFFFFFF"/>
            <s:GradientEntry color="0x000000"/>
        </s:LinearGradientStroke>
    </s:stroke>
</s:Ellipse> 
```

...看起来像这样：

![在此处输入图像描述](../Images/37fe211eb61793047b01442d8b2da69c.png)

我想使用该`<s:Image>`组件加载图像，将其放在环内，然后遮盖图像，以便只有中心的孔显示图像，就像相框一样。

可以做到吗，或者这是不可能的，因为椭圆中心的“洞”只是不可见的填充？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:16:03.993

`SpriteVisualElement`一种方法是通过在显示对象的图形上绘制一个圆圈来屏蔽图像。

![面具](../Images/660e1d6b6e8138bd1100f2c2f987bbd9.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               backgroundColor="0x0">

    <fx:Script>
        <![CDATA[
            override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
            {
                super.updateDisplayList(unscaledWidth, unscaledHeight);

                var g:Graphics = imageMask.graphics;
                g.clear();
                g.beginFill(0xff);
                g.drawEllipse(50, 50, 150, 150);
                g.endFill();
            }
        ]]>
    </fx:Script>

    <s:Image id="image"
             mask="{imageMask}"
             source="http://www.artyfactory.com/art_appreciation/art_movements/art%20movements/cubism/still_life_with_mandolin.jpg" />

    <s:SpriteVisualElement id="imageMask" />

    <s:Ellipse id="imageFrame"
               width="150"
               height="150"
               rotation="325"
               top="50"
               left="50">
        <s:stroke>
            <s:LinearGradientStroke weight="5">
                <s:GradientEntry color="0x000000" />
                <s:GradientEntry color="0xFFFFFF" />
                <s:GradientEntry color="0x000000" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Ellipse>

</s:Application> 
```

# ruby - ruby 使用数组值添加到哈希

> ID：11589269
> 
> 赞同：12
> 
> 时间：2012-07-21T03:44:00.667
> 
> 标签：ruby, hash

我尝试了以下 ruby​​ 代码，我认为它会将单词长度的哈希返回到具有这些长度的单词。相反，它是空的。

```
map = Hash.new(Array.new)    
strings = ["abc","def","four","five"]
strings.each do |word|
  map[word.length] << word  
end 
```

但是，如果我将其修改为

```
map = Hash.new
strings = ["abc","def","four","five"]
strings.each do |word|
  map[word.length] ||= []
  map[word.length] << word  
end 
```

它确实有效。

第一个版本不只是创建一个默认值为空数组的哈希吗？在这种情况下，我不明白为什么 2 个块给出不同的值。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-21T04:07:17.780

问题是您实际上并没有为哈希键分配任何内容，您只是使用`<<`运算符来修改默认值的现有内容。由于您没有为哈希键分配任何内容，因此不会添加它。实际上，您会注意到默认值是修改后的值：

```
h = Hash.new []
p h[0]           # []
h[0] << "Hello"
p h              # {}
p h[0]           # ["Hello"]
p h[1]           # ["Hello"] 
```

这是因为相同的`Array`对象被维护为默认值。您可以使用`+`运算符来修复它，尽管它可能效率较低：

```
map = Hash.new []
strings = ["abc", "def", "four", "five"]

strings.each do |word|
    map[word.length] += [word]
end 
```

现在它按预期工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-21T07:26:00.203

综上所述，检查[Enumerable#group_by](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-group_by)：

```
["abc", "def", "four", "five"].group_by(&:length)
#=> {3=>["abc", "def"], 4=>["four", "five"]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T03:58:36.520

我认为第一个版本的真正含义是默认值只有*一个*数组。如果新数组尚不存在，则第二个示例显式创建一个新数组。

这看起来像一个很好的阅读来进一步[澄清](http://blog.luckyus.net/2008/11/13/a-hash-of-arrays-and-a-hash-of-hashes-in-ruby/)。

# php - MySQL删除行直到某个点

> ID：11589272
> 
> 赞同：7
> 
> 时间：2012-07-21T03:44:24.670
> 
> 标签：php, mysql, sql

我正在为客户建立一个拍卖网站，我有一个问题，我需要从投标表中删除投标，直到某个点，该点由投标人的数量或底价决定。

让我进一步解释一下。我有一个数据表：

```
Bidder1 $7,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $7,000.00  Sat 21 Jul 2012 12:26:34
Bidder1 $6,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $6,000.00  Sat 21 Jul 2012 12:26:11
Bidder1 $5,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $5,000.00  Sat 21 Jul 2012 12:25:34
Bidder2 $1,100.00  Sat 21 Jul 2012 12:23:53
Bidder1 $1,000.00  Sat 21 Jul 2012 12:22:33
Bidder1 $550.00    Sat 21 Jul 2012 12:22:33
Bidder2 $500.00    Sat 21 Jul 2012 12:22:23
Bidder2 $100.00    Sat 21 Jul 2012 12:22:23 
```

正如你所看到的，有 2 个竞标者在争夺它。现在每个投标人都可以随时取消他们的投标，但是，假设投标人 2 取消了他们的投标，系统会将拍卖中的所有投标标记为已取消（客户要求），而不仅仅是他们最新的投标。如果是这种情况（投标人 2 取消了他们的投标），那么投标人 1 的投标应该回滚到 1000 美元，这是拍卖的底价（因为您应该能够知道，因为投标人 1 连续两次投标，分别是 550 美元和 1000 美元）。

这是我希望的只是棘手的部分，而不是不可能的部分。假设我有 3 个投标人：

```
Bidder1 $7,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $7,000.00  Sat 21 Jul 2012 12:26:34
Bidder3 $6,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $6,000.00  Sat 21 Jul 2012 12:26:11
Bidder1 $5,250.00  Sat 21 Jul 2012 12:25:44
Bidder2 $5,000.00  Sat 21 Jul 2012 12:25:34
Bidder3 $1,100.00  Sat 21 Jul 2012 12:23:53
Bidder1 $1,000.00  Sat 21 Jul 2012 12:22:33
Bidder1 $550.00    Sat 21 Jul 2012 12:22:33
Bidder2 $500.00    Sat 21 Jul 2012 12:22:23
Bidder2 $100.00    Sat 21 Jul 2012 12:22:23 
```

如果投标人 2 取消他们的投标，那么我需要回滚到投标人 3 的最新投标，但投标人 1 仍然获胜。

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:33:41.477

第一计数总数 投标人

```
$result = mysql_query("select distinct(bidder_id) from table where bid_id=1"); 
```

//考虑我们要删除bidder_id=2个出价

```
if(mysql_num_rows($result) == 2 ) {
 //select min bid of bidder
 $row = mysql_fetch_row(mysql_query("select * from table where bidder_id=2 order by bid_price asc limit 1"));

 $bidder_min_amount = $row['bid_price'];
 $bidder_min_id = $row['id'];

 //find out other bidder min bid id 
    /*
    Bidder1 $7,250.00  Sat 21 Jul 2012 12:25:44
    Bidder2 $7,000.00  Sat 21 Jul 2012 12:26:34
    Bidder1 $6,250.00  Sat 21 Jul 2012 12:25:44
    Bidder2 $6,000.00  Sat 21 Jul 2012 12:26:11
    Bidder1 $5,250.00  Sat 21 Jul 2012 12:25:44
    Bidder2 $5,000.00  Sat 21 Jul 2012 12:25:34
    Bidder2 $1,100.00  Sat 21 Jul 2012 12:23:53
    Bidder1 $1,000.00  Sat 21 Jul 2012 12:22:33
    Bidder1 $550.00    Sat 21 Jul 2012 12:22:33
    Bidder2 $500.00    Sat 21 Jul 2012 12:22:23
    Bidder2 $100.00    Sat 21 Jul 2012 12:22:23
    //may be first case like this
    Bidder1 $75.00    Sat 21 Jul 2012 12:22:33
    */ 
    //finding out if Bidder1 $75.00 exist
    $row = mysql_query("select * from table where bid_price <= $bidder_min_amount and bidder_id!=2 order by bid_price asc");
    if(mysql_num_rows($row) > 0 ) { 
     mysql_query("delete from table where id > ".$row['id'] );
    } else {
      $row = mysql_query("select * from table where bid_price >= $bidder_min_amount and bidder_id!=2 order by bid_price asc");
      if(mysql_num_rows($row) > 0 ) { 
         mysql_query("delete from table where id > ".$row['id'] );
        }
    } 
} //first condition complete if total bidder is 2
else {
    //if n bidders just remove the bids of bidder
    mysql_query("delete from table where bidder_id=2");
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:32:56.060

对于两个以上的投标人：

1.  按出价者和最高出价分组，将为您提供每个出价者及其最高出价的一行。
2.  删除现有投标人的投标。
3.  按日期输入订单表，然后按投标人分组。
4.  从#3 的结果中删除所有出价 < 最低出价的行。这将删除导致最低出价的所有出价，现在为每个用户留下一个出价，这是他们的最后一次出价。

您有一个特殊情况，只有两个投标人：

1.  删除现有投标人的行。
2.  搜索出价 = 保留价的行
3.  如果有行，则删除所有出价<保留价的行。这将为您留下与底价相匹配的最后一个出价。
4.  如果没有行，这意味着未满足保留，请删除bid < max(bid) 的所有行。剩下的一行是当前拍卖的最高出价。

这有点冗长——你不需要每次都分组——但我写它是为了在你从 db shell 运行查询时可以确认结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:09:43.200

听起来您需要处理两种情况-第一种是取消出价者是最高出价者；第二个是如果取消投标人不是最高出价者。

如果取消出价者是最高出价者，您可以删除他们第一次出价后的每个出价，包括其他用户的出价。如果他们不是最高出价者，您只需删除他们的所有出价，而让其他用户不理会。这是基于您提供的示例案例；让我知道这是否不正确，我会调整。

我假设您的数据库结构或多或少是这样的：

```
users
    id
    name
bids
    id
    user_id
    auction_id
    price 
```

在运行您的删除之前，我会`MAX(id)`为当前拍卖和取消投标人的当前拍卖出价（假设拍卖是＃1，取消投标人是＃2）：

```
SELECT MAX(id) AS max_auction FROM bids WHERE auction_id=1
SELECT MAX(id) AS max_bidder FROM bids WHERE auction_id=1 AND user_id=2 
```

然后，您将根据需要比较这两者并进行处理：

```
if ($max_auction == $max_bidder) {
    // the cancelling-bidder is the highest-bidder
    // get the ID of their first bid so we can delete every bid after it
    $result = mysql_query("SELECT MIN(id) FROM bids WHERE auction_id=1 AND user_id=2");
    $row = mysql_fetch_array($result);
    mysql_query("DELETE FROM bids WHERE auction_id=1 AND id>=" . $row[0]);
} else {
    // the cancelling-bidder is not the highest-bidder
    // just remove all of their bids
    mysql_query("DELETE FROM bids WHERE auction_id=1 AND user_id=2");
} 
```

# java - 在 java web 服务器上生成文件

> ID：11589273
> 
> 赞同：0
> 
> 时间：2012-07-21T03:44:42.263
> 
> 标签：java, web-applications

我有一个 Web 服务，它在服务器上生成一堆文件（比如 tomcat），这些文件被压缩并通过 servlet 的 OutputStream 流回客户端。

这部分很清楚。我正在努力解决的部分是如何管理这些文件，以便如果两个客户端碰巧同时使用此功能。

我可以想到几种可能的解决方案，但我不确定处理这个问题的最简单和最好的方法是什么，我很想听听一些想法。

例如：我可以创建一个带有附加到目录名称的时间戳的目录，例如`tmp_123142345`，在我将 zip 文件写入流之后删除这个文件夹。两个人不太可能在同一毫秒内尝试下载同一个文件。

但是，有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:59:10.207

您可以使用 File 类中的 createTempFile 方法。这将让 Java 为您创建一个独特的文件夹，您可以在其中放置文件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:51:08.023

这不太可能，但并非不可能。您可能需要一个可以在董事会会议上吹嘘它没有冲突的解决方案。:)

有一个全局同步计数器或更好的`AtomicLong`计数器。创建目录名称，如`"tmp_"+ (atomicLongCounter.addAndGet(1))`

所以每个人都会有唯一的目录，即使他们在同一毫秒登陆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T03:53:29.910

我认为您的解决方案还可以，但是您确实不需要删除文件。您可以在任务管理器中编写一个任务，负责每天一次删除所有这些文件（只是清理目录）。看看[这里](https://stackoverflow.com/questions/1755880/call-function-periodically-in-java)，有一些解决方案可以使 de 目录干净。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T03:59:45.287

为什么不使用[`java.util.UUID`](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)？它会让您获得可以附加到文件名的唯一 ID。

# webgl - Three.js 线的颜色渐变

> ID：11589274
> 
> 赞同：3
> 
> 时间：2012-07-21T03:44:55.713
> 
> 标签：webgl, three.js

我只能找到 THREE.LineBasicMaterial()。有没有办法从a点到b点有一个简单的颜色渐变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:36:02.123

您可以使用顶点和片段着色器来更改顶点 [0] 和顶点 [1] 的颜色。（线点）见[http://mrdoob.github.com/three.js/examples/webgl_custom_attributes_lines.html](http://mrdoob.github.com/three.js/examples/webgl_custom_attributes_lines.html)

# python - 删除和附加更新的消息仍然显示旧消息

> ID：11589275
> 
> 赞同：1
> 
> 时间：2012-07-21T03:45:03.607
> 
> 标签：python, gmail, append, imap

我在 gmail 邮箱中有一堆邮件，标题略有损坏。我想使用 python 和 gmail 的 imap 接口自动处理和更新它们。我想下载消息，在本地修改标题，然后在服务器上将其删除，然后将固定消息添加回来。问题是，虽然该消息似乎已被正确删除，但在将其添加回旧的、错误的标头后仍然存在。使事情复杂化的是，如果我手动删除 gmail 中的消息，然后在 python 中使用相同的命令添加消息，则新的、好的标题会根据需要出现。

```
>>> import imaplib
>>> import email
>>> mail = imaplib.IMAP4_SSL('imap.gmail.com')
>>> mail.login('user@gmail.com', 'password')
>>> mail.select('label')
('OK', ['2'])
>>> mail.search(None, 'from', 'bad_string')
('OK', ['2'])
>>> ret,data = mail.fetch('2', '(RFC822)')
>>> msg = email.message_from_string(data1[0][1])
>>> msg['from']
'"Doe, John" <john.doe@bad_string.com>'
>>> new = msg['from'].replace('bad_string', 'good_string')
>>> msg.replace_header('From', new)
>>> msg['from']
'"Doe, John" <john.doe@good_string.com>'
>>> mail.store('2', '+FLAGS', '\\Deleted')
('OK', ['2 (FLAGS (\\Seen \\Deleted))'])
>>> mail.expunge()
('OK', ['2'])
>>> mail.search(None, 'from', 'bad_string')
('OK', [''])
>>> mail.select('label')
('OK', ['1']) 
```

此时，python 似乎将电子邮件视为已删除。检查 gmail 的网络界面似乎也显示它已经消失了。标签中只有一封电子邮件，而不是开头的两封，搜索返回空。

```
>>> mail.append('label', None, '"20-Jul-2012 22:30:00 -0400"', str(msg))
('OK', ['[APPENDUID 24 13] (Success)'])
>>> mail.search(None, 'from', 'bad_string')
('OK', ['2'])
>>> mail.search(None, 'from', 'good_string')
('OK', ['']) 
```

但是该消息以原来的错误字符串返回。但是，如果不是以编程方式将其标记为已删除和删除，而是在 gmail 的 Web 界面中删除并清空垃圾箱，然后追加（仍然在与上面相同的 python 会话中，因此在上述输出之后立即运行）...

```
>>> mail.append('label', None, '"20-Jul-2012 22:30:00 -0400"', str(msg))
('OK', ['[APPENDUID 24 14] (Success)'])
>>> mail.search(None, 'from', 'bad_string')
('OK', [''])
>>> mail.search(None, 'from', 'good_string')
('OK', ['2']) 
```

gmail中的IMAP设置如下：

*   当我在 IMAP 中将邮件标记为已删除时：自动删除关闭 - 等待客户端更新服务器。
*   当邮件被标记为已删除并从最后一个可见的 IMAP 文件夹中删除时：立即永久删除该邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:32:45.670

因此，当然，在发布问题后不久答案就会揭开……重要的细节是“当邮件被标记为已删除并从**最后一个可见的 IMAP 文件夹**中删除时”这一行。默认情况下，所有邮件都被选为可见的 IMAP 文件夹，因此邮件将始终在至少一个文件夹中可见。我相信有两种解决方案：

1.  取消选择所有邮件作为可见 IMAP 文件夹。然后，“当消息被标记时...”选项的行为就像我最初在从标签中删除和删除时所期望的那样。如果选择了“归档邮件”，它会简单地删除标签并且它仍然在所有邮件中可见。如果选择“将邮件移至垃圾箱”，则将邮件移至垃圾箱标签。如果选择“永久永久删除”，则消息将被完全删除。

2.  将所有默认文件夹选为可见 IMAP 文件夹和默认 IMAP 设置，而不是对当前标签中的邮件执行任何操作，您可以将邮件复制到“[Gmail]/垃圾箱”标签，然后选择垃圾标签并删除/删除那里的所有内容。这将永久删除该消息。

# java - 为什么一个类需要访问 Spring 上下文？

> ID：11589279
> 
> 赞同：4
> 
> 时间：2012-07-21T03:45:19.323
> 
> 标签：java, spring, dependency-injection

我看到 Spring bean 和其他常规类都可以访问 Spring 应用程序上下文。

我想知道为什么一个类必须处理 Spring 上下文。我的理解是，在 main 方法中，您引导您的应用程序，并且从那时起的所有内容都由 Spring 连接。

如果是这种情况，main 方法应该是唯一需要 ApplicationContext 的地方。您需要 Spring 上下文来完成工作的其他真实案例是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T06:56:14.343

通常beans不需要`ApplicationContext`直接访问。

但是，在某些情况下需要直接访问。例如：

*   要在运行时访问由其名称标识的 bean：

    ```
    class MyClass implements ApplicationContextAware {
        ...
        public void execute(String actionName) {
            Action action = applicationContext.getBean(actionName);
            action.execute();
        }
        ...
    } 
    ```

*   在运行时将自定义参数传递给`prototype`-scoped bean 的构造函数：

    ```
    Bean bean = applicationContext.getBean("myBean", "foo", "bar"); 
    ```

    请注意，如果`Bean`的构造函数不需要在运行时传递自定义参数，则可以注入`ObjectFactory<Bean>`。

*   使用 触发第三方对象的自动装配`AutowireCapableBeanFactory`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T03:52:44.763

事实上，有很多这样的用例。假设您要编写一个身份验证器类，该类需要被某个服务 bean 访问。现在，已经通过 Spring 上下文配置了身份验证器类。那么，您如何访问该 bean？答案是通过 Spring ApplicationContext：

```
class MyClass implements ApplicationContextAware {

    private ApplicationContext context;

    @Override
    void setApplicationContext(ApplicationContext context) throws BeansException {
        this.context = context;
    }

    public void execute() {
        Authenticator authenticator = context.getBean("authenticator", Authenticator.class);
        if (!authenticator.authenticate()) {
            //do some stuff
        } else {
            //do some other stuff
        }
   }
} 
```

重要的是要注意，除了应用程序上下文之外，您不会通过任何方式访问配置的 bean。此外，实例化另一个 ApplicationContext 不是答案，因为它会重复所有配置。

# binary - 二进制乘法器

> ID：11589282
> 
> 赞同：0
> 
> 时间：2012-07-21T03:45:41.073
> 
> 标签：binary, minecraft

有人可以为我提供二进制乘法器背后的基本逻辑。我目前正在研究 Minecraft 游戏中的 4 位乘法器，并设计了 2 位乘法器，但找不到 4 位乘法器，也无法弄清楚.. 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-06T07:51:08.633

初等乘法算法与十进制数完全相同。二进制“按位乘法”只是位的逻辑与。我假设您熟悉加法器的逻辑，因为您已经实现了一个两位乘法器。

你需要做什么：

```
 1) Generate partial products of the 4-bit words

     1010   (10 in decimal)
   x 0101   (5 in decimal)
---------
     1010
    0000
   1010
  0000

 2) Sum up the partial products
     00001010
   + 00000000
    ----------
     00001010
   + 00101000
    ----------
     00110010
   + 00000000
   ----------
     00110010   (50 in decimal) 
```

对于高级乘数，您可以寻找“Booth multiplier”和“Dadda multiplier”。如果您不熟悉数字加法器的概念，请查看“波纹进位加法器”的信息。

# c# - 使用带有 npc 方法的类编写要由 c# 执行的 npc 脚本

> ID：11589289
> 
> 赞同：0
> 
> 时间：2012-07-21T03:47:30.490
> 
> 标签：c#, scripting

我有一个类 (NpcCommands.cs)，其中包含 GetPlayer()、SendMessage() 等通用方法。

有没有办法用我的程序可以加载和执行的 javascript、lua、python、ruby 等编写脚本，这些脚本以某种方式连接到我的类。我的意思是如果在我调用的脚本中

```
NC.GetPlayer().SetHealth(15); 
```

其中 NC 是对我的 NpcCommands 类的引用，它将运行返回我的播放器对象的 GetPlayer() 方法，然后能够从该对象运行方法，例如 SetHealth();

我希望它被编写脚本的原因是因为会有多个 Npc 每个都有自己的条件和响应，例如

```
if (NC.GetPlayer().HasItem(cookie)) {
    NC.GetPlayer().SetHealth(15);
} else {
    NC.SendMessage("No cookies :c");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:08:34.893

您提到的所有语言都有大量示例。以下是一些链接：

Python（IronPython 版本）是一种可能的选择 -[将 IronPython 集成到您的应用程序](http://www.codeproject.com/Articles/24420/Integrating-IronPython-into-your-Applications)中。

LUA 也有 .Net 绑定 - 即从[Channel9](http://channel9.msdn.com/coding4fun/blog/Adding-Lua-scripting-to-your-Net-app-or-game)开始链接。

C# 从一开始也被用于编写脚本，因为您可以在运行时进行编译。

JavaScript.Net（.Net Framework 的一部分）可能是另一种选择。以及 .Net 的其他 JavaScript 实现。

# php - PHP IP地址捕获语句

> ID：11589294
> 
> 赞同：2
> 
> 时间：2012-07-21T03:49:29.230
> 
> 标签：php, ip-address, capture

我正在努力使内容仅适用于我的 IP 地址和其他人。我试过了：

```
<?php
$ip = $_SERVER['REMOTE_ADDR'];

if ($ip = "FirstIp" && $ip="SecondIp") {
echo "Protect Content";
} else {
echo "You do not have permission to look at this.  Your IP has been recorded. $ip";
$fileofips="list.txt";
$ip = "$_SERVER[REMOTE_ADDR]";

$file=fopen($fileofips, 'a');
fwrite($f, $_SERVER[REMOTE_ADDR]);

fclose($f);
}
?> 
```

它甚至不会捕获入侵的 IP。请调整代码;P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T03:52:09.520

```
if ($ip = "FirstIp" && $ip="SecondIp") { 
```

单个等号是赋值，而不是比较。另外，您可能的意思是`||`；`$ip`不能同时是两件事。

```
if($ip === "FirstIP" || $ip === "SecondIP") { 
```

* * *

此外，您可能需要文件中 IP 之间的换行符，因此添加一个`\n`. 此外，将变量放在双引号中，如下所示：

```
$ip = "$_SERVER[REMOTE_ADDR]"; 
```

是没有意义的。使用变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T03:52:41.440

您的`if`语句正在覆盖`$ip`变量，因为您使用的是单个`=`; 将其更改为`==`，也将更改`&&`为`||`（一个 IP 不能同时为两个）：

```
if ($ip == "FirstIp" || $ip == "SecondIp") { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-30T21:59:21.310

就像 Sparkups 的回答一样；

```
$ip = $_SERVER['REMOTE_ADDR'];
if (in_array($ip, ["FirstIp", "SecondIp", "ThirdIp"])) {
    // add hidden content here 
} else {
    echo "Access denied";
} 
```

或者，更好的是，如果 IP 不在数组中，则发布消息并退出。只需执行以下操作：

```
$ip = $_SERVER['REMOTE_ADDR'];
if (!in_array($ip, ["FirstIp", "SecondIp", "ThirdIp"])) {
    echo "Access denied";
    exit; 
} 
```

或者包括一个 404 页面，让它看起来什么都没有：

```
$ip = $_SERVER['REMOTE_ADDR'];
if (!in_array($ip, ["FirstIp", "SecondIp", "ThirdIp"])) {
    include('404.html');
    exit; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T09:33:34.590

在某些情况下使用**[in_array](http://php.net/manual/en/function.in-array.php)**可能更合适：

```
if (in_array($ip, ["FirstIp", "SecondIp", "ThirdIp"])) {
    echo "Protect Content";
} else {
    // 
} 
```

# django - 使用 haystack/solr 进行转义搜索的结果不正确

> ID：11589296
> 
> 赞同：1
> 
> 时间：2012-07-21T03:50:34.777
> 
> 标签：django, solr, django-haystack

我正在使用标准的 lucene 查询解析器，并且我有以下查询：

```
q=\* 
```

我希望这（因为引用 * ）返回实际上在某处有 * 的文档。相反，我得到的是一切都回来了。

其他查询也会发生同样的事情，例如：`q=\*\:\*`

我可以在标准查询解析器中做什么（不移动到 dismax）来进行转义搜索？

谢谢

# java - 为什么调用函数时需要“抛出异常”？

> ID：11589302
> 
> 赞同：120
> 
> 时间：2012-07-21T03:52:27.683
> 
> 标签：java, exception-handling, unhandled-exception, throws, checked-exceptions

```
class throwseg1
{
    void show() throws Exception
    {
        throw new Exception("my.own.Exception");
    }

    void show2() throws Exception  // Why throws is necessary here ?
    {
        show();
    }

    void show3() throws Exception  // Why throws is necessary here ?
    {
        show2();
    }

    public static void main(String s[]) throws Exception  // Why throws is necessary here ?
    {
        throwseg1 o1 = new throwseg1();
        o1.show3();
    }
} 
```

为什么编译器会报告方法`show2()`、、`show3()`和`main()`有

> 未报告的异常 必须捕获或声明要抛出的异常

当我`throws Exception`从这些方法中删除？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-07-21T04:11:04.287

如您所知，在 Java 中，异常可以分为两种：一种需要`throws`子句或如果您不指定则必须处理，另一种则不需要。现在，看下图：

![在此处输入图像描述](../Images/3059902d298be088af1a6dc42d49197e.png)

在 Java 中，你可以抛出任何扩展`Throwable`类的东西。但是，您不需要`throws`为所有类指定子句。具体来说，是这两者的一个`Error`或`RuntimeException`任何一个子类的类。在您的情况下`Exception`，它不是`Error`or的子类`RuntimeException`。`throws`因此，这是一个检查异常，如果您不处理该特定异常，则必须在子句中指定。这就是您需要该`throws`子句的原因。

* * *

来自[Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/definition.html)：

> 异常是在程序执行期间发生的事件，它破坏了程序指令的正常流程。

现在，如您所知，异常分为两种：已检查和未检查。为什么要进行这些分类？

**Checked Exception：**它们用于表示在程序执行过程中可以恢复的问题。它们通常不是程序员的错。例如，用户指定的文件不可读，或没有可用的网络连接等，在所有这些情况下，我们的程序都不需要退出，而是可以采取诸如警告用户之类的操作，或者进入回退机制（如网络不可用时离线工作）等。

**Unchecked Exceptions：**它们又可以分为两种：Errors 和 RuntimeExceptions。不检查它们的一个原因是它们数量众多，并且需要处理所有这些会使我们的程序混乱并降低其清晰度。另一个原因是：

*   **运行时异常：**它们通常是由于程序员的错误而发生的。例如，如果出现`ArithmeticException`除以零或出现an `ArrayIndexOutOfBoundsException`，那是因为我们在编码时不够仔细。它们的发生通常是因为我们的程序逻辑中的一些错误。因此，必须在我们的程序进入生产模式之前清除它们。从某种意义上说，它们是未经检查的，我们的程序在发生时必须失败，以便我们程序员可以在开发和测试时自行解决它。

*   **错误：**错误是程序通常无法从中恢复的情况。例如，如果`StackOverflowError`发生了a，我们的程序就不能做很多事情，比如增加程序的函数调用堆栈的大小。或者，如果`OutOfMemoryError`发生这种情况，我们无法做太多事情来增加程序可用的 RAM 量。在这种情况下，最好退出程序。这就是为什么它们不受检查。

有关详细信息，请参阅：

*   [未经检查的例外——争议](http://docs.oracle.com/javase/tutorial/essential/exceptions/runtime.html)
*   [捕获或指定要求](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-21T04:13:38.323

Java 要求您处理或声明所有异常。如果您没有使用 try/catch 块处理异常，则必须在方法的签名中声明它。

例如：

```
class throwseg1 {
    void show() throws Exception {
        throw new Exception();
    }
} 
```

应该写成：

```
class throwseg1 {
    void show() {
        try {
            throw new Exception();
        } catch(Exception e) {
            // code to handle the exception
        }
    }
} 
```

这样您就可以摆脱方法声明中的“抛出异常”声明。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-15T18:18:39.427

`throws Exception`声明是一种自动跟踪可能由于预期但不可避免的原因而引发异常的方法的方法。声明通常特定于可能抛出的异常类型，例如`throws IOException`或`throws IOException, MyException`。

由于我们在运行程序之前没有预料到的事情，例如被零除或索引越界，我们都已经或最终会编写意外停止并报告异常的代码。由于该方法没有预料到错误，因此无法“捕获”并使用 try catch 子句进行处理。该方法的任何毫无戒心的用户也不会知道这种可能性，他们的程序也会停止。

当程序员知道可能会发生某些类型的错误但想在方法之外处理这些异常时，该方法可以向调用方法“抛出”一种或多种类型的异常而不是处理它们。如果程序员没有声明该方法（可能）抛出异常（或者如果 Java 没有声明它的能力），编译器无法知道，这将由该方法的未来用户知道，捕获并处理该方法可能抛出的任何异常。由于程序可以具有由许多不同程序编写的多层方法，因此很难（不可能）跟踪哪些方法可能引发异常。

即使 Java 具有声明异常的能力，您仍然可以编写一个带有未处理和未声明异常的新方法，Java 将编译它，您可以运行它并希望最好。Java 不会让你做的是编译你的新方法，如果它使用一个被声明为抛出异常的方法，除非你在你的方法中处理声明的异常或者声明你的方法抛出相同的异常或者如果有多个异常，您可以处理一些并抛出其余的。

当程序员声明该方法抛出特定类型的异常时，它只是一种自动警告使用该方法的其他程序员可能发生异常的方法。然后，程序员可以通过声明调用方法也抛出相同的异常来决定处理异常或传递警告。由于编译器已被警告此新方法中可能出现异常，它可以自动检查新方法的未来调用者是否处理异常或声明它并强制其中一个或另一个发生。

这种类型的解决方案的好处是，当编译器报告时，`Error: Unhandled exception type java.io.IOException`它会给出声明抛出异常的方法的文件和行号。然后，您可以选择简单地推卸责任并声明您的方法也“抛出 IOException”。这可以一直执行到 main 方法，然后它会导致程序停止并向用户报告异常。但是，最好捕获异常并以一种很好的方式处理它，例如向用户解释发生了什么以及如何修复它。当方法确实捕获并处理异常时，它不再需要声明异常。可以这么说，降压止步于此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-21T03:53:50.630

`Exception`是一个检查异常类。因此，任何调用声明它`throws Exception`必须处理或声明它的方法的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-08T17:43:33.997

```
void show() throws Exception
{
    throw new Exception("my.own.Exception");
} 
```

由于 show() 方法中存在已检查异常，该方法未处理该异常，因此我们使用 throws 关键字来传播异常。

```
void show2() throws Exception //Why throws is necessary here ?
{
show();
} 
```

由于您在 show2() 方法中使用了 show() 方法，并且您已经传播了至少应该在此处处理的异常。如果您没有在此处处理 Exception ，那么您正在使用 throws 关键字。这就是在方法签名处使用 throws 关键字的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-18T12:53:21.273

基本上，如果您没有在抛出异常的地方处理异常，那么您可以在函数定义处使用“抛出异常”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-26T12:07:17.157

如果通过在当前方法的签名中声明 throws 指令来传播异常，则必须在行或调用堆栈的某处使用 try/catch 构造来处理异常。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-15T08:11:39.153

```
package javaexception;

public class JavaException {
   void show() throws Exception
    {
        throw new Exception("my.own.Exception");
    }

void show2() throws Exception  // Why throws is necessary here ?
{
    show();
}

void show3() throws Exception  // Why throws is necessary here ?
{
    show2();
}
public static void main(String[] args) {

   JavaException a = new JavaException();

   try{
   a.show3();
   }catch(Exception e){
       System.out.println(e.getMessage());
   }
} 
```

您的程序中只有很小的变化。关于主要问题，许多人似乎误解了，每当您抛出异常时都需要处理它，而不是在同一个地方（例如程序中的 show1,2,3 方法），但您必须首先调用调用方方法在“主要”内部。总之，有“抛出”，必须有“捕捉/尝试”，即使发生异常的方法不同。

# javascript - d3.js 如何将节点动态添加到树中

> ID：11589308
> 
> 赞同：32
> 
> 时间：2012-07-21T03:53:28.167
> 
> 标签：javascript, dom, svg, d3.js, transition

我正在使用 d3.js 树，并且想动态添加节点，而不是预加载整个树。

我将如何修改以下内容以便在单击节点时动态添加额外的 JSON 节点？（见下面的链接和下面的代码）

[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

因此，与其预加载整个树，不如只在单击父节点时才检索子节点。我可以在切换函数中检索子节点的 json，但是我不知道如何将它们添加到树中。

```
var m = [20, 120, 20, 120],
    w = 1280 - m[1] - m[3],
    h = 800 - m[0] - m[2],
    i = 0,
    root;

var tree = d3.layout.tree()
    .size([h, w]);

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; });

var vis = d3.select("#body").append("svg:svg")
    .attr("width", w + m[1] + m[3])
    .attr("height", h + m[0] + m[2])
  .append("svg:g")
    .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

d3.json("flare.json", function(json) {
  root = json;
  root.x0 = h / 2;
  root.y0 = 0;

  function toggleAll(d) {
    if (d.children) {
      d.children.forEach(toggleAll);
      toggle(d);
    }
  }

  // Initialize the display to show a few nodes.
  root.children.forEach(toggleAll);
  toggle(root.children[1]);
  toggle(root.children[1].children[2]);
  toggle(root.children[9]);
  toggle(root.children[9].children[0]);

  update(root);
});

function update(source) {
  var duration = d3.event && d3.event.altKey ? 5000 : 500;

  // Compute the new tree layout.
  var nodes = tree.nodes(root).reverse();

  // Normalize for fixed-depth.
  nodes.forEach(function(d) { d.y = d.depth * 180; });

  // Update the nodes…
  var node = vis.selectAll("g.node")
      .data(nodes, function(d) { return d.id || (d.id = ++i); });

  // Enter any new nodes at the parent's previous position.
  var nodeEnter = node.enter().append("svg:g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
      .on("click", function(d) { toggle(d); update(d); });

  nodeEnter.append("svg:circle")
      .attr("r", 1e-6)
      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeEnter.append("svg:text")
      .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
      .text(function(d) { return d.name; })
      .style("fill-opacity", 1e-6);

  // Transition nodes to their new position.
  var nodeUpdate = node.transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  nodeUpdate.select("circle")
      .attr("r", 4.5)
      .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeUpdate.select("text")
      .style("fill-opacity", 1);

  // Transition exiting nodes to the parent's new position.
  var nodeExit = node.exit().transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
      .remove();

  nodeExit.select("circle")
      .attr("r", 1e-6);

  nodeExit.select("text")
      .style("fill-opacity", 1e-6);

  // Update the links…
  var link = vis.selectAll("path.link")
      .data(tree.links(nodes), function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("svg:path", "g")
      .attr("class", "link")
      .attr("d", function(d) {
        var o = {x: source.x0, y: source.y0};
        return diagonal({source: o, target: o});
      })
    .transition()
      .duration(duration)
      .attr("d", diagonal);

  // Transition links to their new position.
  link.transition()
      .duration(duration)
      .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
      .duration(duration)
      .attr("d", function(d) {
        var o = {x: source.x, y: source.y};
        return diagonal({source: o, target: o});
      })
      .remove();

  // Stash the old positions for transition.
  nodes.forEach(function(d) {
    d.x0 = d.x;
    d.y0 = d.y;
  });
}

// Toggle children.
function toggle(d) {

  // I could retrieve the child nodes here, but how to add them to the tree?

  if (d.children) {
    d._children = d.children;
    d.children = null;
  } else {
    d.children = d._children;
    d._children = null;
  }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-21T06:50:43.933

我可以通过在切换函数中添加以下代码来动态添加节点：

```
$.getJSON(addthese.json, function(addTheseJSON) {
    var newnodes = tree.nodes(addTheseJSON.children).reverse();
    d.children = newnodes[0];
    update(d);
}); 
```

注意：我正在使用 jQuery 来检索 json 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T20:03:38.117

我是 D3 的新手，但这个原始代码可能会有所帮助。您可以创建一个 JSON 对象并将其推送到树/链接中。那么这只是重新绘制树的问题。

```
function createTreeNode(source){

var current_node = tree.nodes(source);
var myJSONObject = {"name": "new Node","children": []}; 

if(current_node[0]._children!=null){
current_node[0]._children.push(myJSONObject);
console.log(current_node[0]._children);
source.children = source._children;
source._children = null;
}

else if(current_node[0].children!=null && current_node[0]._children!=null){
current_node[0].children.push(myJSONObject);
console.log(current_node[0].children);
}

else{
current_node[0].children=[]
current_node[0].children.push(myJSONObject);
console.log(current_node[0].children);
}

tree.links(current_node).push(current_node[current_node.length-1]);
navigate_tree(source);} 
```

# objective-c - 指针指向 int 转换编译麻烦？

> ID：11589313
> 
> 赞同：0
> 
> 时间：2012-07-21T03:56:23.467
> 
> 标签：objective-c, pointers, type-conversion, declaration

所以我正在使用 Xcode 编写一些小型的 Objective-C 应用程序，并且我有这行代码：

```
 int * foo;
    foo = 5;
    NSLog(@"does it work... %i", foo); 
```

现在它编译并运行得很好，但我想知道，为什么它会给我警告，“与指针分配不兼容的整数......”？我认为上面的代码告诉它将 foo 指向的任何内容设置为 5，而不是将指针本身设置为 5。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T03:58:38.987

这段代码的工作是偶然的：`int`指针恰好有足够的空间来保存一个整数值，并将`NSLog`指针重新解释为整数，但程序仍然不正确。

应该为指向的指针`int`分配一个整数变量的地址，如下所示：

```
int *foo;
int var;
foo = &var; 
```

现在您可以通过指针分配变量：

```
*foo = 5; 
```

您还可以通过指针或变量读取值：

```
NSLog(@"%d %d", *foo, var); 
```

# windows-phone-7 - 如何在 wp7 中删除 bingmap 控件上的图钉按钮？

> ID：11589316
> 
> 赞同：0
> 
> 时间：2012-07-21T03:56:42.193
> 
> 标签：windows-phone-7

我在 wp7 中有一个 Bingmap 控件。这个 bingmap 包含很多图钉按钮。我想在点击事件触发时删除这个按钮。那么如何去掉这个按钮呢？

我尝试了下面的 c# 代码，但它不起作用

map1.children.remove(pin[i])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:42:46.937

我是这样做的：

*   XAML：在地图控件集 MapItemsControl。您可以在代码更改中将您的图钉集合绑定到 ItemSource。
*   隐藏代码：从 Map set ItemSource NULL 中删除所有图钉。就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:33:28.767

您可以使用 MapLayer 并向该 MapLayer 添加图钉，然后在添加下一个图钉之前清除图层。

不要忘记将 MapLayer 作为子项添加到地图控件

# c# - 模拟 Guid.NewGuid()

> ID：11589320
> 
> 赞同：9
> 
> 时间：2012-07-21T03:57:45.823
> 
> 标签：c#, unit-testing, mocking, tdd, moq

假设我有以下实体：

```
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }
    public Guid UserGuid { get; set; }
    public Guid ConfirmationGuid { get; set; }
} 
```

以及以下接口方法：

```
void CreateUser(string username); 
```

部分实现应该创建两个新的 GUID：一个用于`UserGuid`，另一个用于`ConfirmationGuid`。他们应该通过将值设置为 来做到这一点`Guid.NewGuid()`。

我已经使用接口抽象了 Guid.NewGuid() ：

```
public interface IGuidService
{
    Guid NewGuid();
} 
```

因此，当只需要一个新的 GUID 时，我可以轻松地模拟它。但我不确定如何从一个方法中模拟对同一方法的两个不同调用，以便它们返回不同的值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T04:06:22.217

如果您使用的是起订量，则可以使用：

```
mockGuidService.SetupSequence(gs => gs.NewGuid())
    .Returns( ...some value here...)
    .Returns( ...another value here... ); 
```

我想您还可以执行以下操作：

```
mockGuidService.Setup(gs => gs.NewGuid())
    .Returns(() => ...compute a value here...); 
```

尽管如此，除非您只是在返回函数中提供一个随机值，否则顺序知识似乎仍然很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T04:16:48.213

如果您不能像@Matt 的示例中那样使用 Moq，那么您可以构建自己的类，它基本上可以做同样的事情。

```
public class GuidSequenceMocker
{
    private readonly IList<Guid> _guidSequence = new[]
                                                     {
                                                         new Guid("{CF0A8C1C-F2D0-41A1-A12C-53D9BE513A1C}"),
                                                         new Guid("{75CC87A6-EF71-491C-BECE-CA3C5FE1DB94}"),
                                                         new Guid("{E471131F-60C0-46F6-A980-11A37BE97473}"),
                                                         new Guid("{48D9AEA3-FDF6-46EE-A0D7-DFCC64D7FCEC}"),
                                                         new Guid("{219BEE77-DD22-4116-B862-9A905C400FEB}") 
                                                     };
    private int _counter = -1;

    public Guid Next()
    {
        _counter++;

        // add in logic here to avoid IndexOutOfRangeException
        return _guidSequence[_counter];
    }
} 
```

# sql - 在 postgresql 中，如何填写列中的缺失值？

> ID：11589321
> 
> 赞同：2
> 
> 时间：2012-07-21T03:57:45.390
> 
> 标签：sql, greenplum

我试图弄清楚如何用给定列上具有相同值的其他行中的非缺失值填充一列中缺少的值。例如，在下面的示例中，我希望所有“1”值都等于 Bob，所有“2”值都等于 John

```
ID #   | Name
-------|-----
1      | Bob 
1      | (null)
1      | (null)
2      | John
2      | (null)
2      | (null)
` 
```

编辑：一个警告是我将 postgresql 8.4 与 Greenplum 一起使用，因此不支持相关子查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T11:51:56.473

```
CREATE TABLE bobjohn
        ( ID INTEGER NOT NULL
        , zname varchar
        );
INSERT INTO bobjohn(id, zname) VALUES
 (1,'Bob') ,(1, NULL) ,(1, NULL)
,(2,'John') ,(2, NULL) ,(2, NULL)
        ;

UPDATE bobjohn dst
SET zname = src.zname
FROM bobjohn src
WHERE dst.id = src.id
AND dst.zname IS NULL
AND src.zname IS NOT NULL
        ;

SELECT * FROM bobjohn; 
```

注意：如果给定 ID 存在多个名称，则此查询将失败。（并且它不会触及*不存在*非空名称的记录）

如果您使用的 postgres 版本 >-9，则可以使用 CTE 来获取源元组（这相当于子查询，但更易于读写（恕我直言）。CTE 还解决了重复值问题（以一种相当粗暴的方式）：

```
 --
        -- CTE's dont work in update queries for Postgres version below 9
        --
WITH uniq AS (
        SELECT DISTINCT id
        -- if there are more than one names for a given Id: pick the lowest
        , min(zname) as zname
        FROM bobjohn
        WHERE zname IS NOT NULL
        GROUP BY id
        )
UPDATE bobjohn dst
SET zname = src.zname
FROM uniq src
WHERE dst.id = src.id
AND dst.zname IS NULL
        ;

SELECT * FROM bobjohn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T18:26:14.807

```
UPDATE tbl
SET    name = x.name
FROM  (
    SELECT DISTINCT ON (id) id, name
    FROM   tbl
    WHERE  name IS NOT NULL
    ORDER  BY id, name
    ) x
WHERE  x.id = tbl.id
AND    tbl.name IS NULL; 
```

`DISTINCT ON`独自完成这项工作。不需要额外的聚合。

如果 有多个值`name`，则选择按字母顺序排列的第一个（根据当前语言环境）——这就是 的`ORDER BY id, name`用途。如果`name`是明确的，您可以省略该行。

此外，如果每个 至少有一个非空值`id`，则可以省略`WHERE name IS NOT NULL`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:07:47.347

如果您知道*没有*冲突的值（具有相同 ID 但不同的非空名称的多行），那么这样的事情将适当地更新表：

```
UPDATE some_table AS t1
SET name = (
    SELECT name
    FROM some_table AS t2
    WHERE t1.id = t2.id
      AND name IS NOT NULL
    LIMIT 1
)
WHERE name IS NULL; 
```

如果您只想查询表并动态填写此信息，您可以使用类似的查询：

```
SELECT
    t1.id,
    (
        SELECT name
        FROM some_table AS t2
        WHERE t1.id = t2.id
          AND name IS NOT NULL
        LIMIT 1
    ) AS name

FROM some_table AS t1; 
```

# html - HTML5 + CSS3 下拉导航栏

> ID：11589322
> 
> 赞同：0
> 
> 时间：2012-07-21T03:58:04.703
> 
> 标签：html, css, hover, navigationbar

大家，我还是 HTML5 和 CSS3 的初学者

我的导航栏有问题，当我悬停时，导致底部段落轻微移动。知道如何解决它或发生了什么吗？

这是HTML代码：

```
<!DOCTYPE html>
<html>

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>HTML5, CSS3 and jQuery Navigation menu</title>
<link rel="stylesheet" href="css/nav.css">
<!--[if IE]>
  <script src="html5.js"></script>
<![endif]-->
</head>

<body class="no-js">
  <nav id="topNav">
        <ul>
            <li><a href="#" title="Nav Link 1">HOME</a></li>
           <li><a href="#" title="Nav Link 1">SERVICES</a>
                <ul>
                    <li><a href="#" title="Sub Nav Link 1">Sub Nav Link 1</a></li>
                    <li><a href="#" title="Sub Nav Link 2">Sub Nav Link 2</a></li>
                    <li><a href="#" title="Sub Nav Link 3">Sub Nav Link 3</a></li>
                    <li><a href="#" title="Sub Nav Link 4">Sub Nav Link 4</a></li>
                    <li class="last"><a href="#" title="Sub Nav Link 5">Sub Nav Link 5</a></li>
                </ul>        
              </li>
            <li><a href="#" title="Nav Link 1">ABOUT US</a></li>
            <li class="last"><a href="#" title="Nav Link 1">ENQUITIES</a></li>
        </ul>
  </nav>      
    <p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."<p>
  <script src="js/jquery.js"></script>
  <script src="js/modernizr.js"></script>
</body>

</html> 
```

这是CSS

```
/* JS disabled styles */
.no-js nav li:hover ul { display:block; }

/* base nav styles */
nav {
  margin: 0 auto 20px;
  position: relative;
  background-color: #FFFFFF;
  font: 16px Tahoma, Sans-serif;
}
nav ul { padding:0; margin:0; }
nav li { position:relative; float:left; list-style-type:none; }
nav ul:after { content:"."; display:block; height:0; clear:both; visibility:hidden; }

nav ul a:hover { color: #F90; border-bottom: thin; border-bottom-style:solid;}

nav li a {
  display: block;
  padding: 10px 20px;
  color: #333;
  text-decoration: none;
  font-weight: 600;
}
nav li a:focus { outline:none; text-decoration:underline; }
nav li:first-child a { border-left:none; }
nav li.last a { border-right:none; }
nav a span { display:block; float:right; margin-left:5px; }
nav ul ul { display:none; width:110%; position:absolute; left:0; background:#FFFFFF; }
nav ul ul li { float:none; }
nav ul ul a { padding:5px 10px; border-left:none; border-right:none; font-size:14px; }
nav ul ul a:hover { color: #F90; }

/* CSS3 */

.cssgradients nav li:hover { background-image:-moz-linear-gradient(0% 100px 90deg, #999, #222); background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#222), to(#555)); }
.borderradius nav ul ul { -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
.boxshadow.rgba nav ul ul { background-color:rgba(0,0,0,0.8); -moz-box-shadow:2px 2px 2px rgba(0,0,0,.8); -webkit-box-shadow:2px 2px 2px rgba(0,0,0,.8); box-shadow:2px 2px 2px rgba(0,0,0,.8); }
.rgba nav ul ul li { border-left:1px solid rgba(0,0,0,0.1); border-right:1px solid rgba(0,0,0,0.1); }
.rgba nav ul ul a:hover { background-color:rgba(85,85,85,.9); }
.borderradius.rgba nav ul ul li.last { border-left:1px solid rgba(0,0,0,0.1); border-bottom:1px solid rgba(0,0,0,0.1); -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
.csstransforms ul a span { -moz-transform:rotate(-180deg);-webkit-transform:rotate(-180deg); } 
```

实际上，我正在使用它的教程并尝试转换我自己的想法。任何人，请。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:06:08.967

添加以下 CSS 行：

```
nav ul a { 
   border-bottom: thin; border-bottom-style: solid; border-bottom-color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T04:12:56.123

问题是当您将鼠标悬停在导航项目的底部时，您正在添加一个 1px 的边框。你在这条线上这样做：

```
nav ul a:hover { color: #F90; border-bottom: thin; border-bottom-style:solid;} 
```

在悬停之前，所有导航项都没有边框。悬停时，会创建一个边框，将段落向下移动 1px（边框的大小）。因此，您可以`border-bottom`为所有导航项设置一个。如果您不希望显示该边框，可以使用`border-color: transparent`.

# java - 从 Windows XP 中的 JFileChooser 获取路径值

> ID：11589326
> 
> 赞同：1
> 
> 时间：2012-07-21T03:58:39.257
> 
> 标签：java, swing, file-io, jfilechooser

正如问题所述，我正在尝试使用 JFileChooser 获取路径值。JFileChooser 的返回给我带来了两个问题。首先，我所做的确切性质涉及让用户选择一个目录，然后重命名该文件夹中特定类型的所有文件，例如所有 .pdf 文件，同时保留所有其他文件。在这方面我遇到的 JFileChooser 问题有两个方面：

1）我已经弄清楚如何让 JFileChooser 显示目录中的文件，但不允许用户专门选择一个文件。但是，当“打开”被推送时，字符串的返回值不包括 JFileChooser 中当前查看的目录。例如，如果用户导航到 C:\Documents and Settings\myFolder\Documents\Work 并看到 Work 目录的内容，然后按“打开”，则作为 getAbsolutePath() 调用返回的字符串是“C:\Documents和 Setting\myFolder\Documents" 永远不会返回 "Work"。我如何才能将其呈现在最终结果中？

2）一旦我有了那个字符串，我如何将它转换为一个路径，以便我可以对其中的文件进行操作？"\" 是 Java 的转义，要使用文件路径作为有效的 Path 值，需要对其进行转义，即 "C:\Documents and Settings\myFolder" 不起作用，它必须是 "C:\Documents和设置\myFolder”。如何从 JFileChooser 中的单斜杠 () 返回字符串到我需要的双斜杠 (\) 路径？

我知道答案可能很简单，我只是更习惯于处理 Linux，这不是问题。我刚刚使用我的编程技能找到了我的第一份工作，当然，一切都是 Windows。

在有人建议之前，是的，我知道使用“/”适用于相对路径，但对于我正在编写的应用程序，我需要使用绝对路径，因为这些文件可能位于主机或网络驱动器上，所以我不能使用相对命名，除非我因为没有大量的网络编程经验而忽略了一些东西。

我感谢大家花时间阅读，如果没有回应的话。

汤米·马瑟恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:03:25.623

**1.**要获取所选目录的完整路径，请执行以下操作：

这`myJfc`是一个`instance of JFileChoooser` **这里**

```
String path =  myJfc.getSelectedFile().getAbsolutePath().toString(); 
```

**2.**使用以下方法将字符串转换为路径：

在路径中使用**“\\”而不是“\” 。**

IE。`C:\\Documents and Settings\\myFolder`

请确保您**在 C: 驱动器中具有适当的权限，否则您的文件将不会在那里创建**，如果您没有在 C: 驱动器中创建文件的权限，请尝试您拥有的其他驱动器，例如 D:, E:等等。你不会有任何特权问题。

```
File f = new File(path); 
```

# javascript - 如何在 html 页面中增加组合框的大小

> ID：11589327
> 
> 赞同：0
> 
> 时间：2012-07-21T03:58:43.083
> 
> 标签：javascript, html

我想创建组合框，我想增加大小，但它没有增加，所以如何增加 html 文件的大小。

```
 <html>
 <SELECT NAME="food" SIZE=10> 
 <OPTION VALUE="0">OK 
 <OPTION VALUE="1">Good 
 <OPTION VALUE="2">Best 
 <OPTION VALUE="3">Average 
 </SELECT> 
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:01:12.240

你的意思是你想增加组合框的宽度？

```
<SELECT NAME="food" SIZE="10" style="width: 200px;"> 
```

# java - Java - 是否可以将 JMenuBar 添加到 JFrame 的装饰窗口？

> ID：11589330
> 
> 赞同：6
> 
> 时间：2012-07-21T03:59:15.537
> 
> 标签：java, swing, jframe, frames, jmenubar

我想知道是否可以将 JMenuBar 添加到 JFrame 或 JRootPane 的装饰窗口，或者围绕内容窗格的边框。我看到像 Firefox 或 Photoshop 这样的应用程序在装饰窗口中有它们的菜单栏。

这可能吗？我环顾了谷歌，但我无法找到任何关于这种事情的结果。我希望Java有这种能力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T04:07:37.360

不确定您在寻找什么，但您可以添加`JMenuBar`到`JFrame`- [JFrame.setJMenuBar()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setJMenuBar%28javax.swing.JMenuBar%29)。有关详细信息，请参阅[如何使用菜单](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)教程。

编辑：

下面是一个带有菜单的未装饰框架的过度简化示例，只是为了演示这个想法。

您可能想求助于现有的解决方案——JIDE 就是`ResizableFrame`为了这个目的。它是开源[JIDE-oss](http://www.jidesoft.com/products/oss.htm)的一部分。[Substance L&F](https://stackoverflow.com/a/2793051/1048330)支持标题栏自定义（请参阅[Substance LaF 发生了什么？](https://stackoverflow.com/questions/5898028/what-happened-to-the-substance-laf)）。您还可以通过@camickr非常有效地利用`ComponentMover`和类，有关更多详细信息，请参阅[调整组件大小](http://tips4java.wordpress.com/2009/09/13/resizing-components/)文章。`ComponentResizer`

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class UndecoratedFrameDemo {
    private static Point point = new Point();

    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setUndecorated(true);
        frame.addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                point.x = e.getX();
                point.y = e.getY();
            }
        });
        frame.addMouseMotionListener(new MouseMotionAdapter() {
            public void mouseDragged(MouseEvent e) {
                Point p = frame.getLocation();
                frame.setLocation(p.x + e.getX() - point.x,
                        p.y + e.getY() - point.y);
            }
        });

        frame.setSize(300, 300);
        frame.setLocation(200, 200);
        frame.setLayout(new BorderLayout());

        frame.getContentPane().add(new JLabel("Drag to move", JLabel.CENTER),
                BorderLayout.CENTER);

        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Menu");
        menuBar.add(menu);
        JMenuItem item = new JMenuItem("Exit");
        item.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        menu.add(item);
        frame.setJMenuBar(menuBar);

        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T04:49:25.143

尝试这个...

**将 JMenuBar 添加到 JFrame**

```
JMenuBar menuBar = new JMenuBar();
myFrame.setJMenuBar(menuBar); 
```

**将 JMenuBar 添加到 JPanel**

```
JMenuBar menuBar = new JMenuBar();
myPanel.add(menuBar); 
```

有关该主题的更多信息，请参阅此[JMenuBar 教程链接](http://www.java2s.com/Tutorial/Java/0240__Swing/0400__JMenuBar.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T04:06:50.797

我做了一些挖掘，简短的回答是......不。

基本上框架装饰已卸载到操作系统，因此我们无权访问它的内容。

但是，如果你想去很多工作，你可以实现自己的装饰。不过，您需要负责调整大小和移动。

你可能想看看

[http://java-swing-tips.blogspot.com.au/2010/05/custom-decorated-titlebar-jframe.html](http://java-swing-tips.blogspot.com.au/2010/05/custom-decorated-titlebar-jframe.html)和[http://www.paulbain.com/2009/10/13/howto-draggabe- jframe-without-decoration/](http://www.paulbain.com/2009/10/13/howto-draggabe-jframe-without-decoration/)用于想法

# java - .concat 无法读取空间

> ID：11589333
> 
> 赞同：-1
> 
> 时间：2012-07-21T04:00:50.627
> 
> 标签：java, android, linux

我在这段代码中有问题

```
public void setTmbhUserFtp(View v) {
        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        Server server = serverlist.get(spinner.getSelectedItemPosition() - 1);
        EditText EditAdduser = (EditText) findViewById(R.id.EditAdduser);
        EditText EditPassworduser = (EditText) findViewById(R.id.EditPassworduser);
        String sTextAdduser = EditAdduser.getText().toString();
        String sTextPassworduser = EditPassworduser.getText().toString();

        if (server != null && sTextAdduser.length() > 0
            && sTextPassworduser.length() > 0) {
        final String ADDUSER = "sh /home/add_user.sh".concat(sTextAdduser) .concat(sTextPassworduser);
        FtpConnect u = new FtpConnect();
        Command o = new Command(getResources().getText(R.string.adduser)
                .toString(), ADDUSER, server);
        u.setCommand(ADDUSER);

        pd = ProgressDialog.show(actual,
                getResources().getString(R.string.PleaseWait), o.getName());
        actualThreadCommand = o;
        Thread thread = new Thread(actual);
        thread.start();

    } else {
        Toast.makeText(getBaseContext(),
                getResources().getText(R.string.gagal), Toast.LENGTH_LONG)
                .show();
    }

} 
```

该代码用于像这样在linux中执行

```
sh /home/add_user.sh username password 
```

但是当我从我的 android 尝试时，用户名和密码是一个

所以代码是这样的

```
sh /home/add_user.sh usernamepassword 
```

如果用户名是 irfan，密码是 irfan，则检测代码

```
sh /home/add_user.sh irfanirfan 
```

所以用户名是 irfanirfan 并且没有密码

代码 add_user.sh 是

```
useradd $1; echo -e "$2\n$2" | passwd $1 
```

如何解决

```
final String ADDUSER = "sh /home/add_user.sh ".concat(sTextAdduser) .concat(sTextPassworduser); 
```

.concat(sTextAdduser) 之后必须是空格

所以在linux中会执行

```
sh /home/add_user.sh irfan irfan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:46:15.207

这样你就可以解决你的问题：

```
final String ADDUSER = "sh /home/add_user.sh "+sTextAdduser+" "+sTextPassworduser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:47:33.030

```
final String ADDUSER = "sh /home/add_user.sh ".concat(sTextAdduser)
.concat(" ")
.concat(sTextPassworduser); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:51:02.880

```
final String ADDUSER = "sh /home/add_user.sh "+sTextAdduser+"\\ "+sTextPassworduser; 
```

在 linux 的任何路径中使用 backSlash 后跟一个空格来添加空格。

# php - 不带 APC 的文件上传进度条

> ID：11589339
> 
> 赞同：0
> 
> 时间：2012-07-21T04:02:18.257
> 
> 标签：php, forms, upload, progress-bar, apc

我意识到这已被问过几次，但我找不到适合我的解决方案。

注意：我的虚拟主机不支持 APC。

这是我目前的工作：

我有一个 HTML 表单，带有一个用于输入一些文本的文本框，以及一个用于选择要上传的文件的按钮。一旦单击“提交”类型的按钮，文本和文件就会被发布到 PHP 脚本，该脚本会上传文件并将一些信息输入数据库。

我找到的所有解决方案似乎都过大了。我真正需要的只是在文件开始通过 PHP 脚本上传后显示进度条的 HTML 表单。此外，我需要脚本中的所有其他内容（数据库条目等）才能继续正常运行。

有什么简单的东西可以添加到我的代码中来实现这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:23:11.053

你可以试试**[AXUPLOADER 2.0](http://www.albanx.com/)**，它有一个进度条。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T19:34:20.883

试试这个 PHP/Javascript 创建一个表单页面并将操作设置为 uploader.php

```
<html>
<head>
<script>
function trackUploadProgress(){
    var upload = document.getElementById('file');
    var uploadSize =   upload.getFileSize('1024' , int);
    <?php
    $file = $_FILES['tmp_name']['file'];
    $filesize =  $file.filesize(1024);

    ?>
    var   progress  = uploadSize * 100 / document.getElementById('file_full').value;
    var prog = document.getElementById('prog');
    prog.value == progress;
}
</script>
</head>
<body>
<!-- Your design!-->
<p id="prog"></p>
<?php echo '<p id="file_full">' . $filesize . '</p>';?> 
```

这应该可以在没有外部库的情况下解决问题

# c++ - C++ Win32 应用程序在使用静态文本控件时不断崩溃。不知道为什么

> ID：11589340
> 
> 赞同：0
> 
> 时间：2012-07-21T04:02:25.447
> 
> 标签：c++, c, winapi, win32gui

```
SendMessage(hEditControl, WM_GETTEXT,255,(LPARAM)editbuffer);
 GetWindowText(hTextControl, (LPWSTR)allText,GetWindowTextLength(hTextControl));

//allText = appendStrings((char*)TEXT("whatever"), (char*)TEXT("whatever"));
SetWindowText(hTextControl, (LPCWSTR)allText);

//where editbuffer and allText are defined as:

    static WCHAR*       editbuffer;
    static WCHAR*       allText; 
```

其中 hEditControl 是编辑控件的句柄，hTextControl 是静态文本控件的句柄。我想从编辑控件中获取数据并将其附加到静态控件文本中。但是我的程序在 getwindowtext 函数处崩溃，我不知道为什么。即使没有 appendstring 函数，它仍然会崩溃。顺便说一句，这段代码在我的主窗口的消息处理函数中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:09:29.560

您的两个缓冲区没有为它们分配空间，因此写入它们的任何内容都是未定义的行为。您需要分配内存，最好是静态的`editBuffer`和动态的`allText`，因为 C++ 不支持 VLA。

# c - 使用 printf 的 %s 说明符打印 NULL 的行为是什么？

> ID：11589342
> 
> 赞同：67
> 
> 时间：2012-07-21T04:02:39.560
> 
> 标签：c, linux, language-lawyer, compiler-bug

遇到一个有趣的面试问题：

```
test 1:
printf("test %s\n", NULL);
printf("test %s\n", NULL);

prints:
test (null)
test (null)

test 2:
printf("%s\n", NULL);
printf("%s\n", NULL);
prints
Segmentation fault (core dumped) 
```

尽管这在某些系统上可能运行良好，但至少我的系统抛出了分段错误。这种行为的最佳解释是什么？上面的代码在 C 中。

以下是我的 gcc 信息：

```
deep@deep:~$ gcc --version
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-21T04:31:38.847

首先要做的事情：`printf`期望其 %s 参数的有效（即非 NULL）指针，因此将其传递 NULL 是正式未定义的。它可能会打印“（null）”，也可能会删除硬盘驱动器上的所有文件——就 ANSI 而言，这两种行为都是正确的（至少，Harbison 和 Steele 是这样告诉我的。）

话虽如此，是的，这确实是一种奇怪的行为。事实证明，当你做这样一个简单的事情时，正在发生的事情是`printf`：

```
printf("%s\n", NULL); 
```

gcc足够*聪明*，可以将其解构为对 `puts`. 第一个`printf`，这个：

```
printf("test %s\n", NULL); 
```

足够复杂，以至于 gcc 将改为发出对 real 的调用 `printf`。

（请注意，gcc 在编译时会发出有关您的无效`printf`参数的警告。那是因为它很久以前就开发了解析`*printf`格式字符串的能力。）

您可以通过使用该`-save-temps`选项编译然后查看生成的`.s`文件来自己查看。

当我编译第一个示例时，我得到：

```
movl    $.LC0, %eax
movl    $0, %esi
movq    %rax, %rdi
movl    $0, %eax
call    printf      ; <-- Actually calls printf! 
```

（评论是我添加的。）

但是第二个产生了这个代码：

```
movl    $0, %edi    ; Stores NULL in the puts argument list
call    puts        ; Calls puts 
```

奇怪的是它不打印以下换行符。就好像它已经发现这会导致段错误，所以它不会打扰。（它有——当我编译它时它警告我。）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-21T04:23:46.467

就 C 语言而言，原因是您正在调用未定义的行为，并且任何事情都可能发生。

至于发生这种情况的机制，现代 gcc 优化`printf("%s\n", x)`为`puts(x)`，并且在看到空指针时`puts`没有可打印的愚蠢代码，而常见的实现有这种特殊情况。由于 gcc 不能像这样优化（通常）非平凡的格式字符串，因此当格式字符串中存在其他文本时实际上会被调用。`(null)``printf``printf`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-07-21T04:36:21.847

第 7.1.4 节（C99 或 C11）说：

> ### §7.1.4 库函数的使用
> 
> ¶1 除非在随后的详细描述中另有明确说明，否则以下每个语句均适用：如果函数的参数具有无效值（例如函数域之外的值，或地址空间之外的指针）程序，或空指针，或指向不可修改存储的指针（当相应的参数不是 const 限定时）或具有可变数量参数的函数不期望的类型（提升后），行为未定义。

由于 的规范`printf()`没有说明当您将空指针传递给说明符时会发生什么`%s`，因此该行为是明确未定义的。（请注意，传递要由说明符打印的空指针`%p`不是未定义的行为。）

这是`fprintf()`家庭行为的“章节和诗句”（C2011 - 它是 C1999 中的不同节号）：

> ### §7.21.6.1 fprintf 函数
> 
> `s`     如果不存在`l`长度修饰符，则参数应为指向字符类型数组的初始元素的指针。[...]
> 
>      如果存在`l`长度修饰符，则参数应是指向 wchar_t 类型数组的初始元素的指针。
> 
> `p`     参数应该是一个指向 void 的指针。指针的值以实现定义的方式转换为打印字符序列。

转换说明符的规范`s`排除了空指针有效的可能性，因为空指针不指向适当类型数组的初始元素。转换说明符的规范`p`不要求 void 指针特别指向任何东西，因此 NULL 是有效的。

许多实现打印字符串（例如`(null)`在传递空指针时）的事实是一种危险的善意依赖。未定义行为的美妙之处在于允许这样的响应，但不是必需的。同样，崩溃是允许的，但不是必需的（更遗憾的是——如果他们在一个宽容的系统上工作，然后移植到其他宽容度较低的系统，就会被咬伤）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-21T04:13:10.423

`NULL`指针不指向任何地址，尝试打印它会导致未定义的行为。未定义意味着它由您的编译器或 C 库决定当它尝试打印 NULL 时要做什么。

# php - 未调用 PHP 类方法

> ID：11589343
> 
> 赞同：1
> 
> 时间：2012-07-21T04:02:45.253
> 
> 标签：php

我的 PHP 类有问题，当用户想要关注另一个用户时，会调用 follow 方法，而当用户想要停止关注时，`delete_follow`会调用：

```
class Follow {

    protected static $table_name = "interests";

    public function follow() {
        global $dbh;
        $sql = "INSERT INTO ".self::$table_name." (company_id,user_id,likedate) VALUES (:company_id,:user_id,NOW())";
        $follow = $dbh->prepare($sql);
        $follow->bindParam(':user_id',$_SESSION['user_id']);
        $follow->bindParam(':company_id',$_GET['company']);
        if($follow->execute() == true){
            header("Location: profile.php?company=".$_GET['company']."");
            exit;
        } else {
            header("Location: error.php");
            exit;
        }
    }

    public function delete_follow() {
        global $dbh;
        $sql = "DELETE FROM ".self::$table_name." WHERE company_id = :company_id AND user_id = :user_id LIMIT 1";
        $delete_follow = $dbh->prepare($sql);
        $delete_follow->bindParam(':user_id',$_SESSION['user_id']);
        $delete_follow->bindParam(':company_id',$_GET['company']);
        if($delete_follow->execute() == true) {
            header("Location: profile.php?company=".$_GET['company']."");
            exit;
        } else {
            header("Location: error.php");
            exit;
        }
    }   

} 
```

我的问题是，当调用 delete_follow 方法时，它实际上调用了 follow 方法，我不知道发生了什么。

以下是以下按钮的代码：

```
if(isset($_POST['follow'])) {
    $follows = new Follow();
    $follows->follow();
}

if(isset($_POST['delete_follow'])) {
    $follows = new Follow();
    $follows->delete_follow();
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T04:10:50.027

您的班级名称是`Follow`。类中的第一个方法称为`follow()`. PHP 在这方面不区分大小写，并将该`follow()`方法视为构造函数。所以这个语句————实际上是从你的类中`$follows = new Follow()`调用方法。`follow()`这可能是你的问题。

[在此处](http://ralphschindler.com/2012/03/09/php-constructor-best-practices-and-the-prototype-pattern)阅读有关 PHP 构造函数的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:07:53.860

我想你的表格有错误。也许最好有一个`follow`带有布尔值的字段，比如`yes`or `no`。

# sinatra - 如何在 Sinatra 中使用带有 Haml 部分的本地（或每个视图）变量？

> ID：11589346
> 
> 赞同：7
> 
> 时间：2012-07-21T04:04:36.190
> 
> 标签：sinatra, haml, scope

我在 Sinatra 中有一个 Haml 部分来处理我的所有“页面打开”项目，如元标记。

我希望在这个部分中有一个 page_title 的变量，然后为每个视图设置该变量。

部分是这样的：

```
%title @page_title 
```

然后在视图中，允许执行以下操作：

```
@page_title = "This is the page title, BOOM!" 
```

我已经阅读了很多问题/帖子等，但我不知道如何为我正在尝试做的事情寻求解决方案。我来自 Rails，我们的开发人员通常使用 content_for，但他们设置了所有这些。我真的很想了解这是如何工作的。似乎我必须定义它并以某种方式使用 :locals 但我还没有弄清楚。提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T11:17:21.260

您将变量传递到 Sinatra haml 部分，如下所示：

页面.haml

```
!!!
%html{:lang => 'eng'}
    %body
        = haml :'_header', :locals => {:title => "BOOM!"} 
```

_header.haml

```
 %head
       %meta{:charset => 'utf-8'}
       %title= locals[:title] 
```

在页面标题的情况下，我只是在我的布局中做这样的事情顺便说一句：

布局.haml

```
%title= @title || 'hardcoded title default' 
```

然后在路由中设置@title 的值（使用帮助器保持简短）。

但是，如果您的标题是部分的，那么您可以将这两个示例结合起来，例如：

布局.haml

```
!!!
%html{:lang => 'eng'}
    %body
        = haml :'_header', :locals => {:title => @title} 
```

_header.haml

```
 %head
       %meta{:charset => 'utf-8'}
       %title= locals[:title] 
```

应用程序.rb

```
helpers do
  def title(str = nil)
    # helper for formatting your title string
    if str
      str + ' | Site'
    else
      'Site'
    end
  end
end

get '/somepage/:thing' do
  # declare it in a route
  @title = title(params[:thing])
end 
```

# c++ - 如何确定 QTextBlock 的字体

> ID：11589347
> 
> 赞同：0
> 
> 时间：2012-07-21T04:04:45.650
> 
> 标签：c++, qt, qtextedit, qtextdocument

假设用户将一些随机文本粘贴到`QTextEdit`. 您如何确定该文本的字体。例如，中文。

我已经尝试过获取`QTextCharFormat`该块。但它似乎没有信息。查询给`fontFamily()`我一个空字符串。

我也尝试使用`QTextLayout`- 但这似乎让我获得了文档的默认布局，而不是特定的文本块。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:35:02.953

看来您必须遍历块内的 QTextFragment。片段是包含特定字体信息的内容。

# css - 导航栏在 Google Chrome 中被切断

> ID：11589352
> 
> 赞同：-1
> 
> 时间：2012-07-21T04:05:53.990
> 
> 标签：css

我难住了。当我查看我的温度时。Firefox 中的文件显示完整的导航栏，但是当我在 Google Chrome 中查看时，它会切断“联系”按钮的结尾。我花了很多时间试图解决这个问题，但无济于事......我也尝试过 Firebug，但没有成功。

任何人都可以对此有所了解吗？我对此很陌生，因此将不胜感激任何输入...

[链接到网站](http://360webmedia.com/indexjuly9.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:23:44.610

取出宽度似乎可以解决它。

```
.menuCntr .right {
    width: 630px; <- remove that 
```

# c# - c#中的int是什么？

> ID：11589354
> 
> 赞同：1
> 
> 时间：2012-07-21T04:06:17.643
> 
> 标签：c#, value-type, reference-type

`int`C# 中有什么？它是关键字，还是从*system.ValueTypes*派生的类？如果它是关键字，那么以下行如何编译

```
int i = new int(); // If int is not a class then how does it have a default constructor

Console.WriteLine(i.ToString()); // If int is not a class then how does it have member functions 
```

如果`int`是一个类，那么为什么不需要总是用 初始化它`new`？以下行如何编译？

```
int i = 8; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T04:09:54.020

*int*是CTS 类型[结构](http://msdn.microsoft.com/en-us/library/zcx1eb1e.aspx#Structures)的*别名*。`System.Int32`

阅读 Eric Lippert 发布的 SO 答案 - [ValueTypes 如何从 Object (ReferenceType) 派生并且仍然是 ValueTypes？](https://stackoverflow.com/a/1682604/142822)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T04:09:46.530

`int`是一个关键字，它是值类型 ( `struct`)的别名`System.Int32`。

作为常规值类型，我相信它的继承是`System.Object`-> `System.ValueType`-> `System.Int32`。

因为`int`具有文字符号，如字符串和其他数字类型，您可以创建它的实例而无需`new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:14:28.667

用代码解释代码：

```
Console.WriteLine(typeof(int) == typeof(Int32)); // Outputs: True
Console.WriteLine(typeof(int).Name); // Outputs: Int32 
```

# c++ - 如何一一检查 const char* 值

> ID：11589364
> 
> 赞同：1
> 
> 时间：2012-07-21T04:08:28.153
> 
> 标签：c++, char

我有一个`const char*`变量，它从我编写的函数中获取值。

当我多次将此变量写入文件时，它什么也不写。所以一定是空的或者是用空格填充的。奇怪的是，我写的txt文件中，每次都换行，有没有值。为什么会这样？是不是表示函数返回的值有一个\n？

如何检查 a 的值是否`const char *`为空，或者通常如何检查 char* 中的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:13:46.803

由于 C/C++ 指针可以解释为指针指向的值数组，因此检查 a 值的两种方法`char*`是应用索引运算符或使用指针算术。你可以这样做：

```
const char *p = myFunctionReturningConstChar();
for (int i = 0 ; p[i] ; i++) {
    if (p[i] == '\n') printf("New line\n");
} 
```

或这个：

```
const char *p = myFunctionReturningConstChar();
while (*p) {
    if (*p == '\n') printf("New line\n");
    p++;
} 
```

此外，C++ 库[提供了多种处理 C 字符串的函数](http://www.cplusplus.com/reference/clibrary/cstring/)。`strlen`检查指针是否指向空字符串可能会有所帮助。

# multithreading - cl-actors 返回值

> ID：11589367
> 
> 赞同：1
> 
> 时间：2012-07-21T04:09:18.870
> 
> 标签：multithreading, lisp, common-lisp, actor

这可能是一个愚蠢的问题，或者至少是一个对演员模型有一些错误假设的问题，但也许有人可以教育我。假设我设置了一个类似于[cl-actors](https://github.com/naveensundarg/Common-Lisp-Actors)示例文档中的示例 actor

```
cl-user> (ql:quickload :cl-actors)
:CL-ACTORS

cl-user> (use-package :cl-actors)
T

cl-user> (defactor echo (stream) (message) 
           (format stream "~a~%" message)
           next)
ECHO

cl-user> (defparameter e (echo :stream *standard-output*))
E

cl-user> (send e "Test message")
Test Message
; No value 
```

为什么`; No value`那里而不是`NIL`？有没有办法在不杀死演员线程的情况下获取返回值`(bt:join-thread (cl-actors::get-thread e))`（我怀疑在任何情况下都不会完全按照我的意愿去做）？我特别想获得返回值，而不是玩弄`with-output-to-string`或类似的把戏。

如果您关心的话，我试图解决的更普遍的问题是尝试将来自参与者的信息输出到`cl-who`客户端的页面中。类似的东西

```
(with-html-output (s)
   (:h1 (send e "Test message"))) 
```

`send`如果不返回任何东西，这显然是行不通的。如果特定问题实际上被证明是愚蠢的，则欢迎就更普遍的问题提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:33:20.463

您将流 ( `*STANDARD-OUTPUT*`) 传递给您的演员并将字符串打印到该流。如果您传递您的网络请求输出流，您将在此处打印字符串。如果您想将数据返回给调用参与者以对其进行处理，您应该传递其 id 并将数据发送回给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:19:07.100

我最终稍微改变了 cl-actors 并添加了一个`send-receive`在这种情况下做我想要的构造。修改后的代码在[这里](https://github.com/Inaimathi/Common-Lisp-Actors)（鼓励评论）。核心是这样的：

```
(defmethod send-receive ((self actor) message &optional (timeout 0))
  (let ((tmp (make-queue)))
    (send self tmp message)
    (car (dequeue tmp timeout)))) 
```

Essentially, we declare a temporary queue, send a message with that queue as a receiver, then try to pop a value off it with an optional timeout (`0` means `wait forever`). This depends on the target actor accepting a `sender` parameter, which seems like a sufficiently `actors`y way to go about it..

# python - PIL 到 OpenCV MAT 导致颜色偏移

> ID：11589373
> 
> 赞同：4
> 
> 时间：2012-07-21T04:10:01.510
> 
> 标签：python, opencv, python-imaging-library

使用 PIL 和 OpenCV 加载 png 图像时，会出现颜色偏移。黑色和白色保持不变，但棕色变为蓝色。

我不能发布图片，因为这个网站不允许新手发布图片。

代码编写如下而不是使用 cv.LoadImageM，因为在实际情况下，原始图像是通过 tcp 接收的。

这是代码：

```
#! /usr/bin/env python
import sys
import cv
import cv2
import numpy as np
import Image
from cStringIO import StringIO

if __name__ == "__main__":
    # load raw image from file
    f = open('frame_in.png', "rb")
    rawImage = f.read()
    f.close()

    #convert to mat
    pilImage = Image.open(StringIO(rawImage));
    npImage = np.array(pilImage)
    cvImage = cv.fromarray(npImage)

    #show it
    cv.NamedWindow('display')
    cv.MoveWindow('display', 10, 10)
    cv.ShowImage('display', cvImage)
    cv. WaitKey(0)

    cv.SaveImage('frame_out.png', cvImage) 
```

如何修复颜色偏移？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T08:04:36.740

OpenCV 的图像具有按 BGR 顺序排列的颜色通道，而 PIL 是 RGB。您将需要像这样切换频道：

```
import PIL.Image
import cv2

... 

image = np.array(pilImage) # Convert PIL Image to numpy/OpenCV image representation
image = cv2.cvtColor(image, cv2.COLOR_RGB2BGR) # You can use cv2.COLOR_RGBA2BGRA if you are sure you have an alpha channel. You will only have alpha channel if your image format supports transparency.
... 
```

@Krish：感谢您指出错误。上次我没有时间测试代码。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:26:28.757

光之炼金术士的回答没有用，但确实说明了问题。反向不会被Apha 通道搞砸，即它将BRGA 更改为AGRB。我认为 Froyo 的回答会解决它，但它根本没有改变显示的图像。起作用的是反转 OpenCV 中的颜色。我太新手了，不知道为什么。他们似乎和我一样。最好在 numpy 中反转颜色，因为在 numpy 中计划了额外的处理。但是感谢您的帮助，答案将我引向正确的方向。

```
pilImage = Image.open(StringIO(rawImage));
bgrImage = np.array(pilImage)
cvBgrImage = cv.fromarray(bgrImage)

# Reverse BGR
cvRgbImage = cv.CreateImage(cv.GetSize(cvBgrImage),8,3)
cv.CvtColor(cvBgrImage, cvRgbImage, cv.CV_BGR2RGB)

#show it
cv.ShowImage('display', cvRgbImage)
cv. WaitKey(30)    # ms to allow display 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T05:54:36.187

改变

```
pilImage = Image.open(StringIO(rawImage)) 
```

至

```
pilImage = Image.open(StringIO(rawImage)).convert("RGB") 
```

# java - 从默认包中导入一个类

> ID：11589379
> 
> 赞同：1
> 
> 时间：2012-07-21T04:11:01.260
> 
> 标签：java, netbeans, netbeans-7

在发布我的问题之前，我已经阅读**[了这个](https://stackoverflow.com/questions/2193226/how-to-import-a-class-from-default-package)、[这个](https://stackoverflow.com/questions/2030148/whats-the-syntax-to-import-a-class-in-a-default-package-in-java)**和**[这个。](https://stackoverflow.com/questions/3835279/eclipse-java-how-do-i-import-classes-from-the-default-package)**

我的问题略有不同。

我是java的初学者，我有一个需要在我的项目中使用的jar文件（我相信它被称为库）。我使用 import jar/folder 选项将它导入到我的 netbean 库文件夹中，我可以看到库的内容。不幸的是，我需要导入的类在默认包下，并且使用`import rearrange;`（`rearrange`是类的名称）不起作用。

为了理解如何使用这个类，我反编译了一个导入完全相同的类的类文件，令人惊讶的是它用于`import rearrange;` 导入该类。

我知道我无法从默认包中导入类。我的示例类也没有使用反射。

我做错了什么，我该如何导入这个类？我也知道库（jar 文件）和我的示例类是用 java 1.6 编译的（他们没有使用允许这种类型导入的 1.3.x）

# eclipse-plugin - 使用 tycho 在 RCP 产品中缺少 maven 依赖项

> ID：11589384
> 
> 赞同：0
> 
> 时间：2012-07-21T04:11:57.547
> 
> 标签：eclipse-plugin, tycho

我正在使用 tycho 创建 RCP 产品，但是一旦我将插件 pom 打包设置为**eclipse-plugin**，maven 依赖库就会从项目中删除并由于缺少库而导致很多错误。我尝试在终端上运行 maven和 eclipse ，他们有相同的结果。有谁知道如何解决这个问题，是否有人使用 tycho 导出了完整的 RCP 插件？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:38:31.577

Tycho 不使用 maven 依赖项来编译您的插件。使用插件清单文件指定依赖项，就像使用普通的 eclipse 插件一样。

在 Eclipse 中，将使用工作区（假设安装了 m2e 和 tycho 配置器）或从目标平台中定义的插件（通常是 eclipse 安装）找到依赖项。在命令行上，这些依赖项应该在 p2 存储库中可用 - 这些可以在目标定义文件或具有 p2 布局的 pom 文件中的普通 maven 存储库块中定义。有关使用这些的详细信息，请参阅 [1]。

可以将 Tycho 配置为考虑 pom 依赖项，但这在导出 RCP 应用程序时不起作用 - 需要在 p2 存储库中找到依赖项。

[1] [http://wiki.eclipse.org/Tycho/Reference_Card#Repository_providing_the_context_of_the_build](http://wiki.eclipse.org/Tycho/Reference_Card#Repository_providing_the_context_of_the_build)

# java - 为什么 Java 不初始化数组对象？

> ID：11589385
> 
> 赞同：3
> 
> 时间：2012-07-21T04:12:02.100
> 
> 标签：java, arrays

如果在 java 中运行以下代码：

```
public class Testing {

    public static void main(String[] args) {
        TestObject[] array = new TestObject[4];
        //array[0] = new TestObject();
        System.out.println(Arrays.asList(array));
    }
}

class TestObject {
    String aString;

    public TestObject() {
        aString = "This has been initialized.";
    }
} 
```

它将打印 (null, null, null, null)，如果`array[0] = new TestObject();`未注释，则第一个对象将具有内存地址（而不是 null）。我只是对为什么当数组第一次正确初始化时Java不会自动调用数组中每个对象的构造函数感到困惑。它现在的工作方式有什么优势？这是空间问题（因为这样做成本太高）？

也许我只是忽略了一些愚蠢的事情，或者我只是弄错了。这与我遇到的问题没有直接关系，所以如果是错误的论坛，我深表歉意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T04:16:25.170

如果您想用作为 TestObject 子类的真实对象或使用非默认构造函数构造的真实对象填充数组，会发生什么？在现实世界中，您很少需要包含一堆相同对象的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:15:19.233

随着`new TestObject[4]`您创建一个数组，它可以容纳 4 个对`TestObject`. `TestObject[]`所以了解和之间的区别`TestObject`：

`TestObject[]`是`TestObject`- 对象的参考存储。如果您创建一个`List<TestObject>`，您也必须在列表中填写参考。

# mysql - 从属子查询 v 左连接

> ID：11589386
> 
> 赞同：0
> 
> 时间：2012-07-21T04:12:18.537
> 
> 标签：mysql

此查询显示正确的结果，但是在执行 EXPLAIN 时，它会将其列为“依赖子查询”，我被认为是错误的？

```
SELECT Competition.CompetitionID, Competition.CompetitionName,     Competition.CompetitionStartDate  
FROM Competition  
WHERE CompetitionID NOT   
IN (  
SELECT CompetitionID  
FROM PicksPoints  
WHERE UserID =1    
) 
```

我尝试将查询更改为：

```
SELECT Competition.CompetitionID, Competition.CompetitionName,   Competition.CompetitionStartDate  
FROM Competition  
LEFT JOIN PicksPoints ON Competition.CompetitionID = PicksPoints.CompetitionID  
WHERE UserID =1  
and PicksPoints.PicksPointsID is null 
```

但它显示 0 行。与实际有效的第一个查询相比，上述内容有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:48:54.973

秒查询不能产生行：它声称：

```
WHERE UserID =1  
and PicksPoints.PicksPointsID is null 
```

但为了澄清，我重写如下：

```
WHERE PicksPoints.UserID =1  
and PicksPoints.PicksPointsID is null 
```

因此，一方面，您要求在`PicksPoints`where上的行`UserId = 1`，但又一次您希望该行首先不存在。你能看到失败吗？

外部连接在这方面非常棘手！通常，您使用“外部”表中的列进行过滤，例如`Competition`. 但你不希望这样做；您希望在左连接表上进行过滤。尝试并重写如下：

```
SELECT Competition.CompetitionID, Competition.CompetitionName,   Competition.CompetitionStartDate  
FROM Competition  
LEFT JOIN PicksPoints ON (Competition.CompetitionID = PicksPoints.CompetitionID AND UserID = 1)
WHERE 
PicksPoints.PicksPointsID is null 
```

有关这方面的更多信息，请阅读这篇[不错的帖子](http://www.mysqldiary.com/mysql-left-join/)。

但是，作为附加说明，在性能方面你遇到了一些麻烦，使用子查询或左连接。

使用子查询你会遇到麻烦，因为高达**5.6**（已经完成了一些好的工作），MySQL 在优化内部查询方面非常糟糕，并且你的子查询预计会执行多次。

由于 a规定了从左到右的连接顺序，因此`LEFT JOIN`您遇到了麻烦。`LEFT JOIN`然而，您的过滤器位于正确的表上，这意味着您将无法使用索引来过滤`USerID = 1`条件（或者您将无法使用索引来进行连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:20:43.730

这是两个不同的查询。第一个查询查找与用户 id 1 关联的竞争（通过`PicksPoints`表），第二个查询与与用户 id 1 关联的那些行连接，这些行*还*具有 null `PicksPointsID`。

第二个查询结果为空，因为您正在连接一个名为的表`PicksPoints`，并且您正在查找连接结果中`PicksPointsID`为空的行。这只能发生在

1.  第二个表有一个空行和一个`PickPointsID` *与*第一个表中的竞争 id 匹配的竞争 id，或者
2.  *第二个表中对连接的贡献的所有*列都是空的，因为第一个表中有一个没有出现在第二个表中的竞争 id。

由于`PicksPointsID`听起来确实像主键，因此出现了案例 2。所以来自的所有列`PickPointsID`都是空的，你的 where 子句 ( `UserID=1 and PicksPoints.PicksPointsID is null`) 将永远是假的，你的结果将是空的。

一个普通的左连接应该适合你

```
select c.CompetitionID, c.CompetitionName, c.CompetitionStartDate  
from Competition c
left join PicksPoints p
on (c.CompetitionID = p.CompetitionID)
where p.UserID <> 1 
```

`where`用`and`（制作复杂的连接子句）替换final也可能有效。我将留给您分析每个查询的计划。:)

我个人并不相信`is null`测试的必要性。Shlomi Noach 链接到的文章非常好，您可能会在其中找到一些提示来帮助您。

# javascript - 使用 JQuery 或 Ajax 加载 .txt 文件

> ID：11589387
> 
> 赞同：11
> 
> 时间：2012-07-21T04:12:30.380
> 
> 标签：javascript, ajax, jquery, text-files

如何修复下面的脚本，使其每次都能正常工作！有时它有效，有时则无效。*Pro JQuery*解释了造成这种情况的原因，但没有谈到如何解决它。我几乎肯定它与 ajax 就绪状态有关，但我不知道如何编写它。网上展示了大约 99 种不同的 ajax 和 JQuery 编写方式，这有点让人不知所措。

我的目标是创建一个 HTML shell，可以填充来自基于服务器的文本文件中的文本。例如：假设服务器上有一个名为 AG 的文本文件，其内容为 PF：PF-01、PF-02、PF-03 等。我想提取此信息并在 HTML DOM 出现之前填充它被用户看到。A 在 PHP 中是 @#!#$*& 金色，然后发现我的主机关闭了 fopen()。所以我在这里。

谢谢你的帮助。

**JS - 植物种子.js**

```
var pageExecute = {

fileContents:"Null",
pagePrefix:"Null",
slides:"Null",

init:function () {
    $.ajax({
      url: "./seeds/Ag.txt",
      success: function (data){
            pageExecute.fileContents = data;
      }
});
}
}; 
```

**HTML - 头部**

```
<script type="text/javascript">
    pageExecute.init();
</script> 
```

**HTML - 正文**

```
<script type="text/javascript"> alert(pageExecute.fileContents); </script> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T04:30:01.047

试试这个：

```
var pageExecute = {

    fileContents:"Null",
    pagePrefix:"Null",
    slides:"Null",

    init: function () {
        $.ajax({
            url: "./seeds/Ag.txt",
            async: false,
            success: function (data){
                pageExecute.fileContents = data;
            }
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-21T04:16:54.733

试试这个：

**HTML：**

```
<div id="target"></div> 
```

**JavaScript：**

```
$(function(){
    $( "#target" ).load( "pathToYourFile" );
}); 
```

在我的示例中，div 将填充文件内容。看看[jQuery`.load()`](http://api.jquery.com/load/)函数。

“pathToYourFile”可以是包含您要加载的数据的任何资源。查看加载方法文档以获取有关如何使用它的更多信息。

## 编辑：获取要操作的值的其他示例

**使用[`$.get()`功能](http://api.jquery.com/jQuery.get/)：**

```
$(function(){
    $.get( "pathToYourFile", function( data ) {
        var resourceContent = data; // can be a global variable too...
        // process the content...
    });
}); 
```

**使用[`$.ajax()`功能](http://api.jquery.com/jQuery.ajax/)：**

```
$(function(){
    $.ajax({
        url: "pathToYourFile",
        async: false,   // asynchronous request? (synchronous requests are discouraged...)
        cache: false,   // with this, you can force the browser to not make cache of the retrieved data
        dataType: "text",  // jQuery will infer this, but you can set explicitly
        success: function( data, textStatus, jqXHR ) {
            var resourceContent = data; // can be a global variable too...
            // process the content...
        }
    });
}); 
```

需要注意的是：

```
$(function(){
    // code...
}); 
```

是相同的：

```
$(document).ready(function(){
    // code
}); 
```

通常您需要使用这种语法，因为您希望 DOM 已准备好执行您的 JavaScript 代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T04:33:41.550

这是您的问题：您在正文中有一个脚本标签，它要求 AJAX 数据。即使您要求它将数据写入您的外壳，而不仅仅是喷出它... ...那是您的第一个问题。

原因如下：

AJAX 是异步的。好的，我们已经知道了，但这意味着什么？

好吧，这意味着它将去服务器并请求文件。服务器将去寻找，并将其发送回来。然后您的计算机将下载内容。当内容 100% 下载后，它们将可供使用。

……事情是……

您的程序不会等待这种情况发生。它告诉服务器慢慢来，同时它会继续做它正在做的事情，并且不会再考虑内容，直到它收到来自服务器的调用。

好吧，浏览器在渲染 HTML 时真的非常快。服务器在提供静态（纯文本/img/css/js）文件方面也非常快。

所以现在你在比赛中。哪个会先发生？服务器会用文本回调，还是浏览器会点击询问文件内容的脚本标签？

无论哪一个在刷新中获胜，都会发生。

那么你如何解决这个问题呢？回调。

回调是一种不同的思维方式。在 JavaScript 中，当下载完成时，您通过给 AJAX 调用一个要使用的函数来执行回调。

这就像从工作线上给某人打电话，然后说：当你有我的答案时，拨打这个分机来联系我。

在 jQuery 中，您将在 AJAX 调用中使用一个名为“success”的参数。将`success : function (data) { doSomething(data); }`您传递给 AJAX 调用的该对象的一部分。当文件下载时，一旦下载，jQuery 就会将结果传递给你给它的成功函数，它会做它要做的任何事情，或者调用它要调用的任何函数。

试试看。它肯定会比赛车先看看哪些下载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T04:18:28.067

我建议不要使用`url: "./seeds/Ag.txt",`, 直接定位文件。**相反，使用像PHP**这样的服务器端脚本来打开文件并以平面格式或 JSON 格式返回数据。

您可以在此处找到打开文件的教程：http: [//www.tizag.com/phpT/fileread.php](http://www.tizag.com/phpT/fileread.php)

# zend-framework - 在zend中取消引用带引号的字符串

> ID：11589392
> 
> 赞同：0
> 
> 时间：2012-07-21T04:13:03.067
> 
> 标签：zend-framework

我的表单中有一个文本区域。我通过这样引用将其值保存在数据库中

```
$db->quote(); 
```

它正在像这样将我的价值保存在数据库中---->

```
'do recommendeee for site.\njkdc\nsdkbjvcdsjv\ndsj' 
```

但是在从数据库中获取它的值时，为了取消引用我正在使用 str_replace()，但是它的

不工作，我也尝试使用`stripslashes()`，它也不起作用。

我不知道 zend 中用于取消引用字符串的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:50:30.437

它只是 \n 字符吗？也许您可以使用 PHP nl2br() 函数将您的 \n 更改为 <br> 以进行显示。我不会解决你的问题，但它可能是一种解决方法......

# php - jQuery从动态内容中加载动态内容

> ID：11589397
> 
> 赞同：2
> 
> 时间：2012-07-21T04:13:42.760
> 
> 标签：php, jquery, html

我想知道是否有人能够帮助或指出我的方向。我正在寻找像测验一样的网络应用程序。我需要的是能够从动态创建的按钮或 href 加载动态内容，在这种情况下，它将链接到其他内容。到目前为止，它似乎没有起作用，因为每次单击按钮时我都找不到一个页面。似乎没有通过名称传递.php。我已经在动态内容 div 之外对其进行了测试，它工作正常，但我真的需要它在内部工作。到目前为止我所拥有的：

**索引.php**

```
<body>
<div class="container_12">

    <div id="content">
    <!--dynamic content loads here-->
    </div>
</div>  

</body> 
```

**登录.php**

```
<h1> Login Page </h1>
    <p> this is a test to c if works </p> 
        <a href='Suitable'>Hello</a> <!--button that doesnt work--> 
```

**通用.js**

```
$(document).ready(function() {

//initial
    $('#content').load('Login.php');

    //Handle widget Clicks 
    $('div#content a').click(function() {
        var page = $(this).attr('href');
        $('#content').load('pages/' + page +'.php');
        return false;

    });
}); 
```

**合适的.php**

```
<h1> Working </h1>
<!-- content thats not loading off button--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:20:52.950

您应该为动态加载的元素委托`click`事件，请尝试以下操作：

```
$('#content').on('click', 'a', function(e) {
    e.preventDefault()
    var page = $(this).attr('href');
    $('#content').load('pages/' + page +'.php');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:25:35.360

```
$(document).ready(function() {

    //initial
    $('#content').load('Login.php', function(){
        //Handle widget Clicks 
        $('div#content a').click(function() {
            var page = $(this).attr('href');
            $('#content').load('pages/' + page +'.php');
            return false;

        });

    });

}); 
```

解释：

`load`是异步的。JS 引擎在进入下一行之前不会等待它完成。结果是当你的`click`绑定执行时没有`a`in `div#content`，所以选择器返回一个空数组并且没有绑定发生。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T04:18:00.873

尝试`Live`代替`click`

//处理小部件点击

```
$('div#content a').live('click',function() {
    var page = $(this).attr('href');
    $('#content').load('pages/' + page +'.php');
    return false;

}); 
```

# performance - 测量 js 执行时间是一种判断应用程序响应请求速度的方法吗？

> ID：11589402
> 
> 赞同：1
> 
> 时间：2012-07-21T04:14:06.077
> 
> 标签：performance, node.js, heroku, express

在我的 node.js / express 应用程序的最开始，我有一个类似 microtime() 函数的东西。

```
function microtime (get_as_float) {
    // Returns either a string or a float containing the current time in seconds and microseconds  
    // 
    // version: 1109.2015
    // discuss at: http://phpjs.org/functions/microtime
    // +   original by: Paulo Freitas
    // *     example 1: timeStamp = microtime(true);
    // *     results 1: timeStamp > 1000000000 && timeStamp < 2000000000
    var now = new Date().getTime() / 1000;
    var s = parseInt(now, 10);

    return (get_as_float) ? now : (Math.round((now - s) * 1000) / 1000) + ' ' + s;
} 
```

实际应用程序的代码如下所示：

```
application.post('/', function(request, response) {
  t1 = microtime(true);
  //code
   //code
   response.send(something);
   console.log("Time elapsed: " + (microtime(true) - t1));
} 
```

> 经过时间：0.00599980354309082

我的问题是，这是否意味着从 POST 请求到达服务器到发出响应的时间大约为 0.005 秒？

我已经在客户端对其进行了测量，但我的互联网速度很慢，所以我认为存在一些与应用程序本身无关的延迟。检查请求处理速度的快速简便方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:04:16.670

无耻的插在这里。我编写了一个代理来跟踪每个 Express 请求的时间使用情况。

[http://blog.notifymode.com/blog/2012/07/17/profiling-express-web-framwork-with-notifymode/](http://blog.notifymode.com/blog/2012/07/17/profiling-express-web-framwork-with-notifymode/)

事实上，当我第一次开始编写代理时，我采用了相同的方法。但很快我就意识到这并不准确。我的实现通过替换 Express 路由器来跟踪请求和响应之间的时间差。这允许我添加跟踪器功能。随意尝试一下。

# python - Python - 记录器字符串格式化

> ID：11589403
> 
> 赞同：5
> 
> 时间：2012-07-21T04:14:12.567
> 
> 标签：python, logging, string-formatting

据我了解，

```
 'hello {0}'.format("world") 
```

慢于：

```
"hello %s" % "world" 
```

我的问题是，记录器在传递时如何格式化字符串，如下所示：

```
logger.debug("hello %s", "world") 
```

并假设日志永远不会被关闭，这样做会更好：

```
logger.debug("hello %s" % "world") 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T08:42:18.303

不要忘记，如果您最终使用了 Sentry 等日志聚合服务，那么所有对以下的调用：

```
logger.error("hello %s", planet) 
```

将被归为同一错误的多次出现，而所有调用：

```
logger.error("hello %s" % (planet,)) 
```

将被列为许多不同的错误，每个错误都发生一次。这使得很难对哪些错误实际上经常发生进行分类。

此分组行为基于记录调用的第一个参数的值。在第一个示例中，它们都是相同的，而在第二个示例中，它们都取决于“planet”的值。

因此，重要的是不要在传递给日志记录的字符串上使用 '%' 或 .format 运算符。让日志调用为您完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T04:56:28.527

`logger.debug(msg, arg1, arg2)`[内部](http://hg.python.org/cpython/file/2.7/Lib/logging/__init__.py#327)执行：`msg = msg % (arg1, arg2)`如[文件所述](http://docs.python.org/library/logging.html#logging.Logger.debug)，因此这里不足为奇。

`logger.debug(msg, arg1, arg2, ...)`可能看起来更整洁，`logger.debug(msg % (arg1, arg2, ...))`并且不会过早地执行格式化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T04:54:56.047

任何差异都可以忽略不计。记录器花费的时间主要受其输出通道速度的影响——而 IO*总是*很慢。使用`%`比较的记录器之间的差异`.format`将是每个字符串大约半微秒。平均而言，记录器将花费比这更多的时间 - 可能是几秒钟 - 实际*记录*每个字符串。

# django - Heroku 中由 gunicorn procfile 引起的错误

> ID：11589404
> 
> 赞同：8
> 
> 时间：2012-07-21T04:14:19.900
> 
> 标签：django, heroku

我正在尝试使用提供的文档在 Heoroku 上部署一个小型 django 应用程序。但是我的应用程序没有运行，当我查看 Heroku 上的日志时，问题似乎出在 procfile 上。这是procfile的内容。这是正确的语法吗？

```
web: gunicorn hashem3.wsgi -b 0.0.0.0:$PORT 
```

这是 Heroku 日志显示的内容：

```
2012-07-21T03:02:58+00:00 heroku[slugc]: Slug compilation started
2012-07-21T03:04:28+00:00 heroku[api]: Add shared-database:5mb add-on by 
2012-07-21T03:04:28+00:00 heroku[api]: Release v2 created by xxx
2012-07-21T03:04:28+00:00 heroku[api]: Add PYTHONUNBUFFERED, PYTHONPATH, PATH, LD_LIBRARY_PATH, LANG, PYTHONHOME, LIBRARY_PATH, PYTHONHASHSEED config by xxx
2012-07-21T03:04:28+00:00 heroku[api]: Release v3 created by xxx
2012-07-21T03:04:28+00:00 heroku[api]: Release v4 created by xxx
2012-07-21T03:04:28+00:00 heroku[api]: Deploy 9805b83 by xxx
2012-07-21T03:04:29+00:00 heroku[slugc]: Slug compilation finished
2012-07-21T03:04:30+00:00 heroku[web.1]: Starting process with command `gunicorn hashem3.wsgi -b 0.0.0.0:8157`
2012-07-21T03:04:31+00:00 app[web.1]: bash: gunicorn: command not found
2012-07-21T03:04:32+00:00 heroku[web.1]: Process exited with status 127
2012-07-21T03:04:32+00:00 heroku[web.1]: State changed from starting to crashed
2012-07-21T03:04:32+00:00 heroku[web.1]: State changed from crashed to starting
2012-07-21T03:04:34+00:00 heroku[web.1]: Starting process with command `gunicorn hashem3.wsgi -b 0.0.0.0:54714`
2012-07-21T03:04:35+00:00 app[web.1]: bash: gunicorn: command not found
2012-07-21T03:04:36+00:00 heroku[web.1]: Process exited with status 127
2012-07-21T03:04:36+00:00 heroku[web.1]: State changed from starting to crashed
2012-07-21T03:05:17+00:00 heroku[router]: Error H10 (App crashed) -> GET floating-atoll-1969.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-21T03:05:18+00:00 heroku[router]: Error H10 (App crashed) -> GET floating-atoll-1969.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 by 
```

测试=

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-21T04:35:08.000

您忘记在 requirements.txt 文件中添加 guinicorn 作为依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:22:33.500

在此处查看[文档](https://devcenter.heroku.com/articles/python/)。特别是**使用不同的 WSGI 服务器**部分。

# java - 视频完成后返回活动

> ID：11589410
> 
> 赞同：1
> 
> 时间：2012-07-21T04:16:19.273
> 
> 标签：java, android, video, android-videoview

我有一些使用 videoView 的视频。一切运行良好，但是当视频播放完毕后什么也没有发生，手机停留在黑屏等待再次预播放或手机上闪烁。

我希望视频结束后，回到之前的活动。这是我的代码。

```
 public class chapterone extends Activity {

@Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.videoplayer);

        VideoView videoView =
        (VideoView)this.findViewById(R.id.videoView);
        MediaController mc = new MediaController(this);
        videoView.setMediaController(mc);
        videoView.setVideoURI(Uri.parse(
                "http://video.com/episode/" +
                "cotton1.mp4"));

        /* videoView.setVideoPath(
        Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_MOVIES) +
        "/movie.mp4");
        */

        videoView.requestFocus();
        videoView.start();

        }
        } 
```

URL 只是一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:41:01.330

```
videoView.setOnCompletionListener(completionListener);
    OnCompletionListener completionListener=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            chapterone.this.finish();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T19:55:56.957

我希望能帮助我找到这个，但我不确定使用它是否正确

```
videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener(){
        @Override
        public void onCompletion(MediaPlayer mp){
            // invoke your activity here

        Intent i = new Intent(chapterone.this, videoserie.class);
             startActivity(i);  

        } 
    }); 
```

# xml - 从 Excel 工作表中的文件名生成 DITA 文件

> ID：11589412
> 
> 赞同：0
> 
> 时间：2012-07-21T04:16:37.720
> 
> 标签：xml, dita

我是信息开发人员。

我需要使用存储在 Excel 表中的文件名创建**.dita文件。**

.dita 文件是 XML 文件。文件的结构应该相同。结构如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--Arbortext, Inc., 1988-2011, v.4002-->
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN"
"concept.dtd">
<?Pub Inc?>
<concept id="concept-1-43B80068" xml:lang="en">
<title></title><?Pub Caret -1?>
<shortdesc></shortdesc>
<conbody>
<p></p>
</conbody>
</concept> 
```

然后我需要创建这些文件的映射，如下所示：

```
<map xml:lang="en">
<topicref href = "topic1.dita">
<topicref href = "topic2.dita">
</topicref>
</map> 
```

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:51:34.320

您还可以在 Excel 中为其创建 VBA 宏。选择其中包含文件名的单元格并运行宏。注意：要在输出中获得双引号，您需要将它们放两次为“”

```
Sub CreateDitaConcept()
Dim sFileName As String
Dim iFileNum As Integer

'Read filename from selected cell
sFileName = Selection.Value
'Get a free file number
iFileNum = FreeFile
'Open the file for output
Open sFileName For Output As iFileNum
'Print text to the file
Print #iFileNum, "<?xml version=""1.0"" encoding=""UTF-8""?>"
Print #iFileNum, "<!-- Arbortext etc -->"
Print #iFileNum, "<!DOCTYPE concept PUBLIC ""-//OASIS//DTD DITA Concept//EN"" ""concept.dtd"">"
Print #iFileNum, "<concept id=""concept_id"" xml:lang=""en"">"
Print #iFileNum, "<title>Concept title</title>"
Print #iFileNum, "<shortdesc></shortdesc>"
Print #iFileNum, "<conbody>"
Print #iFileNum, "<p>paragraph</p>"
Print #iFileNum, "</conbody>"
Print #iFileNum, "</concept>"
'Close file
Close #iFileNum 
```

结束子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:10:49.053

假设您知道如何在 Python 中编程并运行 Python 应用程序，您可以尝试以下方法，将文件名放在列表中。如果您需要从 Excel 中读取，那么您可以使用 Python 中读取 Excel 文件的包之一，并使用它来代替下面的 filelist。

```
import os

filelist = ["topic1",
"topic2"
]    # array of dita files

basedir = r'C:/DITA_files/'

# create files
if not os.path.exists(basedir):
    os.mkdir(basedir) 

conceptstr = '''<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN"
"concept.dtd">
<?Pub Inc?>
<concept id="concept-1-%s" xml:lang="en">
<title></title><?Pub Caret -1?>
<shortdesc></shortdesc>
<conbody>
<p></p>
</conbody>
</concept>
'''

id_len = 8
# create concept files and map
for file in filelist:
    print 'Writing ' + basedir + file + '.dita'
    cf = open(basedir + file +'.dita', 'w')
    cf.write(conceptstr) % [random.choice(string.ascii_letters) for n in xrange(id_len)]
    cf.close()

map = open(basedir + 'mymap.ditamap','wt')

map.write('<map xml:lang="en">')
for file in filelist:
    map.write(r'''<topicref href="%s.dita"/>
''' % ( register, register ) )
    map.write('</map>')
    map.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:26:29.190

请注意，您的 DITA 标记无效。所有 DITA 主题都必须有一个`<title>`包含内容的元素。您可能希望添加一些占位符文本作为元素的内容`<title>`，例如：

```
<title>Title goes here</title> 
```

此外，您不需要以下标记，因为这些是 PTC 的 Arbortext Editor 添加的处理说明：

```
<?Pub Inc?>
<?Pub Caret -1?> 
```

# c# - 使用字符串拆分来区分正在解析的字符串

> ID：11589415
> 
> 赞同：1
> 
> 时间：2012-07-21T04:16:58.067
> 
> 标签：c#, .net, string, parsing, token

我需要解析类似于以下格式的行：

```
s = "Jun 21 09:47:50 ez-x5 user.debug if_comm: [TX] 02 30 20 0f 30 31 39 24 64 31 30 31 03 54 "; 
```

我用 [TX] 或 [RX] 分开线路。这是我对解析字符串所做的事情：

```
s = "Jun 21 09:47:50 ez-x5 user.debug if_comm: [TX] 02 30 20 0f 30 31 39 24 64 31 30 31 03 54 ";
string[] stringSeparators = new string[] { "[TX] " + start_key };
string transfer = s.Split(stringSeparators, 2, StringSplitOptions.None)[1];
//At this point, transfer[] = 02 30 20 0f 30 31 39 24 64 31 30 31 03 54
if (!string.IsNullOrEmpty(transfer))
{
    string key = ""; 
    string[] split = transfer.Split(' ');
    if (split[0] == start_key)
    {
        for (int i = 0; i < key_length; i++)
        {
            key += split[i + Convert.ToInt32(key_index)];
        }
        TX_Handle(key);
    }
}

stringSeparators = new string[] { "[RX]" + start_key };
transfer = s.Split(stringSeparators, 2, StringSplitOptions.None)[1];
if (!string.IsNullOrEmpty(transfer))
{
    string key = "";
    string[] split = transfer.Split(' ');
    if (split[0] == start_key)
    {
        for (int i = 0; i < key_length; i++)
        {
            key += split[i + Convert.ToInt32(key_index)];
        }
        RX_Handle(key);
    }
} 
```

基本上，因为我没有实际的方法来比较给定的标记是 [TX] 还是 [RX]，我不得不使用上述方法来分隔字符串，这需要我编写两次基本相同的代码。

有什么方法可以解决这个问题并知道正在解析哪个令牌，这样我就不必复制我的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:25:04.910

最好的方法是查看常见的内容。你的代码有什么共同点？基于 2 个不同标记的拆分和基于 2 个不同标记的函数调用。这可以分解为条件，那么，为什么不将公共元素移动到条件中呢？

```
const string receiveToken = "[RX] ";
const string transmitToken = "[TX] ";

string token = s.IndexOf(receiveToken) > -1 ? receiveToken  : transmitToken; 
```

..现在您有了令牌，因此您可以删除大部分重复项。

```
stringSeparators = new string[] { token + start_key };
transfer = s.Split(stringSeparators, 2, StringSplitOptions.None)[1];
if (!string.IsNullOrEmpty(transfer))
{
    string key = "";
    string[] split = transfer.Split(' ');
    if (split[0] == start_key)
    {
        for (int i = 0; i < key_length; i++)
        {
            key += split[i + Convert.ToInt32(key_index)];
        }
        RX_TX_Handle(key, token);
    }
} 
```

..那么你可以有一个通用的处理程序，例如：

```
void RX_TX_Handle(string key, string token)
{
    token == receiveToken ? RX_Handle(key) : TX_Handle(key);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:42:01.657

如何使用不同的方法并使用正则表达式。混合一点 LINQ，你就有了一些非常容易理解的代码。

```
static void ParseLine(
    string line,
    int keyIndex,
    int keyLength,
    Action<List<byte>> txHandler,
    Action<List<byte>> rxHandler)
{
    var re = new Regex(@"\[(TX|RX)\](?: ([0-9a-f]{2}))+");
    var match = re.Match(line);
    if (match.Success)
    {
        var mode = match.Groups[1].Value; // either TX or RX
        var values = match.Groups[2]
            .Captures.Cast<Capture>()
            .Skip(keyIndex)
            .Take(keyLength)
            .Select(c => Convert.ToByte(c.Value, 16))
            .ToList();
        if (mode == "TX") txHandler(values);
        else if (mode == "RX") rxHandler(values);
    }
} 
```

或者没有正则表达式：

```
static void ParseLine(
    string line,
    int keyIndex,
    int keyLength,
    Action<List<byte>> txHandler,
    Action<List<byte>> rxHandler)
{
    var start = line.IndexOf('[');
    var end = line.IndexOf(']', start);
    var mode = line.Substring(start + 1, end - start - 1);
    var values = line.Substring(end + 1)
        .Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)
        .Skip(keyIndex)
        .Take(keyLength)
        .Select(s => Convert.ToByte(s, 16))
        .ToList();
    if (mode == "TX") txHandler(values);
    else if (mode == "RX") rxHandler(values);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:31:30.260

我不能 100% 确定这是否能回答您的问题，但我会创建一个`TokenParser`负责解析令牌的类。您会发现进行单元测试要容易得多。

```
public enum TokenType
{
    Unknown = 0,
    Tx = 1,
    Rx = 2
}

public class Token
{
    public TokenType TokenType { get; set; }
    public IEnumerable<string> Values { get; set; }
}

public class TokenParser
{
    public Token ParseToken(string input)
    {
        if (string.IsNullOrWhiteSpace(input)) throw new ArgumentNullException("input");

        var token = new Token { TokenType = TokenType.Unknown };

        input = input.ToUpperInvariant();
        if (input.Contains("[TX]"))
        {
            token.TokenType = TokenType.Tx;
        }
        if (input.Contains("[RX]"))
        {
            token.TokenType = TokenType.Rx;
        }

        input = input.Substring(input.LastIndexOf("]", System.StringComparison.Ordinal) + 1);
        token.Values = input.Trim().Split(Convert.ToChar(" "));

        return token;
    }
} 
```

如果解析每个令牌的逻辑大不相同，则可以轻松扩展该示例以允许多个令牌解析器。

# objective-c - 奇怪的崩溃，没有调试器线索

> ID：11589419
> 
> 赞同：0
> 
> 时间：2012-07-21T04:17:34.453
> 
> 标签：objective-c, debugging, crash, cocos2d-iphone

我目前在我的 Level1.m 文件中运行这个代码块，这是我游戏第一关的场景。

```
#import "BankerL1.h"
#import "GameOverScene.h"
#import "BankerGameWin1.h"

// HelloWorldLayer implementation
@implementation BankerL1Layer
@synthesize label = _label;
@synthesize Banker = _Banker;
@synthesize WalkAction = _WalkAction;
@synthesize MoveAction = _MoveAction;

+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
BankerL1Layer *layer = [BankerL1Layer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
// always call "super" init
// Apple recommends to re-assign "self" with the "super" return value
if( (self=[super init])) {

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite *background = [CCSprite spriteWithFile:@"Ninja Menu Background.png"];
    background.position = ccp(winSize.width/2, winSize.height/2);
    [self addChild:background z:-1];

    CCLabelTTF *Levelcounter = [CCLabelTTF labelWithString:@"Level 1" fontName:@"Marker         Felt" fontSize:40];
    Levelcounter.position =  ccp(winSize.width * 0.80,winSize.height * 0.92);
    [self addChild: Levelcounter];

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:     @"GreenorcSpriteSheet_default.plist"];

    CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode     batchNodeWithFile:@"GreenorcSpriteSheet_default.png"];
    [self addChild:spriteSheet];

    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <=6; ++i) {
        [walkAnimFrames addObject: [[CCSpriteFrameCache sharedSpriteFrameCache]     spriteFrameByName: [NSString stringWithFormat:@"Greenorc%d.png", i]]];

    }
    CCAnimation *walkAnim = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];
    self.Banker = [CCSprite spriteWithSpriteFrameName:@"Greenorc1.png"];
    _Banker.position = ccp(winSize.width/2, (winSize.height/2)-190);
    self.WalkAction = [CCRepeatForever actionWithAction:[CCAnimate     actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    //[_Banker runAction:_WalkAction];
    [spriteSheet addChild:_Banker];

    self.isTouchEnabled = YES;

    _targets = [[NSMutableArray alloc] init];

}
return self;
}

- (void) onEnter
{
// First, call super if you override this. ALWAYS.
[super onEnter];

[self schedule:@selector(gameLogic:) interval:1.5];
[self scheduleUpdate]; // use this instead of schedule: if it's for an update method.

}

//Implements the Callback function above
-(void)gameLogic:(ccTime)dt {
[self addTarget];

}

-(void)spriteMoveFinished:(id)sender {
CCSprite *sprite = (CCSprite *)sender;
[self removeChild:sprite cleanup:YES];

if (sprite.tag == 1) { // target
    [_targets removeObject:sprite];

    GameOverScene *gameOverScene = [GameOverScene node];
    [gameOverScene.layer.label setString:@"You Lose :["];
    [[CCDirector sharedDirector] replaceScene:gameOverScene];

} else if (sprite.tag == 2) { // projectile
    [_targets removeObject:sprite];
}
}

//Adds the "targets" or in this case enemies, to the scene and spawns/moves them
-(void)addTarget {

CCSprite *target = [CCSprite spriteWithFile:@"seeker.png"
rect:CGRectMake(0, 0, 40, 40)];

target.tag = 1;
[_targets addObject:target];

// Determine where to spawn the target along the X axis
CGSize winSize = [[CCDirector sharedDirector] winSize];
int minX = target.contentSize.height/2;
int maxX = winSize.height - target.contentSize.height/2;
int rangeX = maxX - minX;
int actualX = (arc4random() % rangeX) + minX;//Randomizes the place it will spawn on X-    Axis

// Create the target slightly off-screen along the top edge,
// and along a random position along the Y axis as calculated above
target.position = ccp(actualX, winSize.height + (target.contentSize.height/2));
[self addChild:target];

// Determine speed of the target
int minDuration = 2.0;
int maxDuration = 5.0;
int rangeDuration = maxDuration - minDuration;
int actualDuration = (arc4random() % rangeDuration) + minDuration;//Speed is randomized     between 2 and 5

// Create the actions
id actionMove = [CCMoveTo actionWithDuration:actualDuration
                                    position:ccp(actualX, -target.contentSize.height/2)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self
                                         selector:@selector(spriteMoveFinished:)];
[target runAction:[CCSequence actions:actionMove, actionMoveDone, nil]];

}

//WHEN THE THINGS COLLIDE, THEY DISSAPEAR
- (void)update:(ccTime)dt {
CGSize winSize = [[CCDirector sharedDirector] winSize];

NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
for (CCSprite *target in _targets) {
    CGRect targetRect = CGRectMake(
                                       target.position.x - (target.contentSize.width/2),
                                       target.position.y - (target.contentSize.height/2),
                                       target.contentSize.width,
                                       target.contentSize.height);
    BOOL playerHit = FALSE;
    for (CCSprite *player in _targets) {
        CGRect playerRect = CGRectMake(
                                       player.position.x - (player.contentSize.width/2),
                                       player.position.y - (player.contentSize.height/2),
                                       player.contentSize.width,
                                       player.contentSize.height);

        if (CGRectIntersectsRect(playerRect, targetRect)) {
            //[targetsToDelete addObject:target];
            playerHit = TRUE;
                [targetsToDelete addObject:target];

            break;
        }
    }

    for (CCSprite *target in targetsToDelete) {
        [_targets removeObject:target];
        [self removeChild:target cleanup:YES];

        _targetsDestroyed++;
        [_label setString:[NSString stringWithFormat:@""]];
        if (_targetsDestroyed > 30) {
            GameWinScene *gameWinScene = [GameWinScene node];
            _targetsDestroyed = 0;
            [[CCDirector sharedDirector] replaceScene:gameWinScene];
        } else{
            NSString *killcounttext = [NSString stringWithFormat:@"Catches: %i",     _targetsDestroyed];
            self.label = [CCLabelTTF labelWithString:killcounttext fontName:@"Zapfino"     fontSize:20];
            _label.color = ccc3(225,225,225);
            _label.position = ccp(winSize.width * 0.20,winSize.height * 0.92);
            [self addChild:_label];
        }
    }

    if (targetsToDelete.count > 0) {
        [targetsToDelete addObject:target];
    }
    [targetsToDelete release];
}

for (CCSprite *target in targetsToDelete) {
    [_targets removeObject:target];
    [self removeChild:target cleanup:YES];
    //[[SimpleAudioEngine sharedEngine] playEffect:@"ProjectileHit.wav"];
}
[targetsToDelete release];
}

-(void) registerWithTouchDispatcher
{
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0
                                          swallowsTouches:YES];
}

-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
return YES;
}

-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {
CGPoint touchLocation = [touch locationInView: [touch view]];
touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
touchLocation = [self convertToNodeSpace:touchLocation];

float bankerVelocity = 320.0/2.0;

CGPoint moveDifference = ccpSub(touchLocation, _Banker.position);

float distanceToMove = ccpLength(moveDifference);

float moveDuration = distanceToMove / bankerVelocity;

    if (moveDifference.x < 0) {
    _Banker.flipX = NO;
    } else {
    _Banker.flipX = YES;
    }

[_Banker stopAction:_MoveAction];

if (!_Moving) {
    [_Banker runAction:_WalkAction];
}
self.MoveAction = [CCSequence actions:
                   [CCMoveTo actionWithDuration:moveDuration position:touchLocation],
                   [CCCallFunc actionWithTarget:self selector:@selector(bearMoveEnded)],
                   nil];

[_Banker runAction:_MoveAction];
_Moving = TRUE;

}

-(void)bearMoveEnded {
[_Banker stopAction:_WalkAction];
_Moving = FALSE;
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
// in case you have something to dealloc, do it in this method
// in this particular example nothing needs to be released.
// cocos2d will automatically release all the children (Label)
self.Banker = nil;
self.WalkAction = nil;

// don't forget to call "super dealloc"
[super dealloc];
}
@end 
```

场景开始，一切正常，除了添加目标（这是我认为正在发生的事情）游戏冻结和崩溃。我不知道添加的目标是否是导致崩溃的原因，但似乎每当目标启动时，它就会崩溃。

调试器中没有任何内容表明游戏崩溃，即使游戏被冻结，Xcode 仍然在运行。请帮助：/谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:35:17.307

在方法中保留`_targets`数组，`init`如下所示：`_targets = [[[NSMutableArray alloc] init] retain];`

# php - 使用php动态设置单选按钮的值

> ID：11589424
> 
> 赞同：0
> 
> 时间：2012-07-21T04:18:40.657
> 
> 标签：php, radio-button

您好 Coders，我在 PHP 中有一个动态创建的表，每一行都有一个单选按钮。目的是根据选择的单选框，用户可以执行多种功能，如删除、修改等。我可以使用硬编码的单选按钮“值”来完成这一切，比如

```
echo "<td>" . '<input type="radio" name="radioSelect" value="2"  checked="checked" />' .  "</td>"; 
```

我正在寻找的是一种动态设置“2”的方法。例如：

```
while($row = mysql_fetch_array($result) and $i<=100)
 { 
  echo "<tr>";
      $sno= $row['SNo'];    

      echo "<td>" . '<input type="radio" name="radioSelect" value= $sno  checked="checked" />' .  "</td>";
 } 
```

这个的语法是什么？这可能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:19:58.227

是的，这称为连接，例如，您已经在使用`.`运算符 after进行连接`"<td>"`。

```
echo "<td>" . '<input type="radio" name="radioSelect" value="' . $sno . '" checked="checked" />' .  "</td>"; 
```

不过，我不确定你为什么这么说。

```
echo '<td><input type="radio" name="radioSelect" value="' . $sno . '" checked="checked" /></td>'; 
```

另外，请注意，一次只能有一个同名的单选按钮`checked`，因此您可能需要重新考虑您在那里所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:54:16.020

你可以这样吗？如果您在 CONCATENATION 中遇到问题。

```
<?php
while($row = mysql_fetch_assoc($result) and $i<=100)
 { $sno= $row['SNo'];?> 
<table>
 <tr>
   <td><input type="radio" name="radioSelect" value= <?php echo $sno; ?>  checked="checked" /> <?php } ?></td>
 </tr>
</table> 
```

# php - 如何创建如下表以及如何使用 PHP 将数据添加到这些表中？

> ID：11589428
> 
> 赞同：0
> 
> 时间：2012-07-21T04:19:34.220
> 
> 标签：php, mysql

我想创建表并使用 PHP 添加数据，如下所示：

### 用户表

*   **表 A** - ID + 名称
*   **表 B** - ID + 值 A + 值 B + ID表 A

我想将用户详细信息放在表 B 中，并将相同的用户 ID + 名称放在单独的表中。我怎样才能做到这一点？如何在 PHPMyAdmin 中编写 SQL？

另外，我需要制作一个用户可以添加朋友的表格。我不知道如何制作这个，但如果您有任何建议，请告诉我。这是我在安卓上开发的一个小型社交应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:25:05.350

因此，这不会是一个简单的一刀切的答案，如果您了解自己在做什么，那将是最好的。您将需要使用 PHP 进行 sql 查询。

**编辑：**我可能误解了你的问题，我很抱歉。据我了解，您正试图找到一种使用 ID 标签将表 A 链接到表 B 的方法（以便单个用户的 ID 扩展到多个表）。我解决这个问题的方法是使用主键。像这样的东西：

```
CREATE TABLE TableA(
    ID INT NOT NULL,
    NAME VARCHAR (20) NOT NULL,
    PRIMARY KEY (ID)
);

CREATE TABLE TableB(
    B_ID INT NOT NULL,
    VALUE A ####,
    VALUE B ####,
    A_ID INT NOT NULL,
    PRIMARY KEY(B_ID)
); 
```

每当您向 TableB 添加值时，还要添加数据所属的主键`ID`。`TableA`在上面的示例`####`中，它不是 sql 语法，它表示您想要存储在这些值中的任何数据类型，因为它没有在您的问题中指定。

这导致的问题是您是否试图允许来自同一用户 ID 的多个条目进入 TableB（即 A_ID=5 在 TableB 中出现多次）？如果是这样，您可以根据我所知道的提供您的数据库方案。如果 TableA 中的每个条目在 TableB 中只有一个条目，则您应该将 A_ID 设置为 TableB 中的主键并去掉 B_ID，因为它将是多余的。

如果这不能完全回答您的问题，请在下面发表评论，解释您仍然不明白的地方以及您需要帮助的地方。如果我的回答与回答您的问题相差无几，请编辑/改写您的问题，以便我们为您提供更好的答案。

干杯和快乐的编码！

# java - 如何向守护进程发出信号以改变行为

> ID：11589433
> 
> 赞同：3
> 
> 时间：2012-07-21T04:21:14.980
> 
> 标签：java, linux, signals, daemon

我编写了一个作为守护进程启动的 Java 应用程序（我通过 bash 守护重定向 stderr 和 stdout 并关闭 stdin）。但是，有时我希望能够向此应用程序发送消息并通知它更改其行为的某些部分。我需要能够从终端向应用程序发送消息，因此任何需要图形实用程序的东西都是不可行的。

行为的改变相当简单。我需要在我的应用程序中切换一个线程的状态，以及一种优雅地关闭应用程序的方法。

我有什么选择来实现这一目标？我知道我可以在进程中有一个线程来侦听某种类型的套接字以获取消息，但这对于我的需求来说似乎有点过分了。

我对 Linux/Unix 上的信号不太熟悉，所以我想问一下我是否可以简单地为某些信号设置自定义处理程序，并在进程收到信号时执行我的代码。

还有其他我根本不知道或没有考虑过的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:58:29.067

信号可能是最简单的。您有 SIGUSR1 和 SIGUSR2 可供应用程序使用，您可以为它们编写一个处理程序来管理您的切换。通常，您不想在处理程序中做太多事情，因此您可以设置一个开关，而您的主循环（或其他）需要检查开关并采取相应措施。同样，可以对信号的接收进行编程，以读取您更改的配置文件。

除此之外，您可以使用任何可用的 IPC（fifos、套接字、MQ），但您将要么对它们进行线程阻塞，要么以某种方式将它们合并为一个`select`语句（或任何与 java 等效的语句）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:53:50.420

就个人而言，我喜欢为此使用操作系统信号。

使用[java.lang.Runtime.addShutdownHook](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)并发送 SIGTERM、SIGINT 或 SIGHUP。

请注意，某些信号保留供内部使用，请查看您正在使用的 JVM 的文档。

[SignalHandler](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/misc/SignalHandler.java.html)不是受支持的公共接口的一部分，因此您的里程可能会有所不同。

如果您从 C 代码实例化 JVM，只需在 JVM 之前设置信号处理程序（用 C 语言），就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:24:34.480

您基本上需要一个与您的应用程序（服务器）通信的小型客户端。所以默认的解决方案应该是使用一些IPC机制。设置 IPC 机制是一次性的工作，而且是值得的，因为它可以很好地适应需求。不推荐使用 IPC 信号。我认为套接字是一个很好的方法。

# mysql - 在 MySQL 中使用变量赋值从最后一行中减去值

> ID：11589439
> 
> 赞同：0
> 
> 时间：2012-07-21T04:23:12.420
> 
> 标签：mysql, design-patterns, query-optimization

根据 MySQL 文档：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。
> 
> [http://dev.mysql.com/doc/refman/5.6/en/user-variables.html](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)

然而，在*High Performance MySQL*一书中，有几个使用这种策略来提高查询性能的例子。

以下是反模式吗？如果是，是否有更好的方法来编写查询，同时保持良好的性能？

```
set @last = null;
select tick, count-@last as delta, @last:=count from measurement; 
```

为了澄清起见，我的目标是找出这一行和最后一行之间的区别。我的表在刻度上有一个主键，它是一个日期时间列。

更新：

在尝试了 Shlomi 的建议后，我恢复了原来的查询。事实证明，将 case 语句与聚合函数一起使用会产生意想不到的行为。参见例如：

```
case when (@delta := (max(measurement.count) - @lastCount)) AND 0 then null
when (@lastCount := measurement.count) AND 0 then null
else @delta end 
```

似乎 mysql 在第一次遍历结果时评估不包含聚合函数的表达式，然后在第二次（分组）遍历时评估聚合表达式。它似乎在第二遍期间或之后评估 case 表达式，并在该评估中使用第一遍中的预先计算值。结果是第三行@delta 始终是@delta 的初始值（因为直到分组通过才发生分配）。我试图将一个组函数合并到 @delta 行中，但无法让它按预期运行。所以我最终回到了没有这个问题的原始查询。

我仍然希望听到更多关于如何更好地处理这样的查询的建议。

更新 2：

很抱歉没有对这个问题做出回应，直到现在我才有机会进一步调查。

使用 Shlomi 的解决方案，我似乎遇到了问题，因为我在读取 @last 变量时使用的是 group by 函数，但在设置它时却没有。我的代码看起来像这样：

```
CASE
    WHEN (@delta := count - @last) IS NULL THEN NULL
    WHEN (@last:= count ) IS NULL THEN NULL
    ELSE (CASE WHEN cumulative THEN @delta ELSE avg(count) END)
END AS delta 
```

MySQL 似乎在第一遍处理不包含聚合函数的表达式，而在第二遍处理包含聚合函数的表达式。上面代码中的奇怪之处在于，即使`cumulative`计算结果为 true，MySQL 也必须看到子句`AVG`中的聚合函数，并决定在第二遍中`ELSE`计算整个内部表达式。`CASE`由于`@delta`在没有聚合函数的表达式中设置它似乎在第一次通过时被设置，并且在第二次通过时 MySQL 已经完成了对设置`@delta`和的行的评估`@last`。

最终，我似乎通过在第一个表达式中包含聚合函数找到了解决方法。像这样的东西：

```
CASE
    WHEN (@delta := max(count) - @last) IS NULL THEN NULL
    WHEN (@last:= max(count) ) IS NULL THEN NULL
    ELSE (CASE WHEN cumulative THEN @delta ELSE avg(count) END)
END AS delta 
```

由于我没有阅读源代码，因此我对 MySQL 所做的事情的理解纯粹基于测试和推测，但希望这将有助于其他可能遇到类似问题的人。

我将接受 Shlomi 的回答，因为它确实是一个很好的解决方案。请注意如何使用聚合函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:06:43.297

我已经深入研究了这个问题，并在上​​面写了一些改进。

我在[这篇文章](http://code.openark.org/blog/mysql/sql-ranking-without-self-join-revisited)中提供了一个解决方案，它使用了可以预期顺序的函数。也考虑[一下我](http://www.percona.com/live/london-2011/session/programmatic-queries-things-you-can-code-with-sql/)去年的演讲。

诸如此类的构造和诸如此类的`CASE`函数`COALESCE`具有已知的潜在行为（至少在更改之前，对吧？）。

例如，`CASE`子句`WHEN`按定义顺序逐一检查条件。

考虑重写原始查询：

```
select 
  tick,
  CASE
    WHEN (@delta := count-@last) IS NULL THEN NULL
    WHEN (@last:=count ) IS NULL THEN NULL
    ELSE @delta
  END AS delta
from 
  measurement,
  (select @last := 0) s_init
; 
```

该`CASE`条款具有三个`WHEN`条件。它按顺序执行它们，直到遇到第一个成功的。我把它们写成前两个**总是失败**的。因此它执行第一个，然后转而执行第二个，最后返回第三个。*总是*。

因此，我克服了期望求值顺序的问题，这是一个真实而真实的问题，当您开始添加更复杂的子句（例如`GROUP BY`,`DISTINCT`等）时最明显`ORDER BY`。

最后一点，在结果集的第一行中，我的解决方案与您的解决方案不同-您的解决方案返回，而我的解决方案返回和`NULL`之间的增量。如果我使用过，我将需要以其他方式更改条件——确保它们在值上**失败。**`0``count``NULL``WHEN`**`NULL`**

# python - 与装饰者合作

> ID：11589444
> 
> 赞同：4
> 
> 时间：2012-07-21T04:23:58.020
> 
> 标签：python, decorator

我想构建不同的函数，其中每个函数都必须使用文件。我已经用装饰器实现了这个。

请让我知道它是否可以更pythonic：

```
def open_file(func):
    def a_wrapper(filename,separator,*args):
        f = open(filename,'w')
        return func(f,separator,*args)
    return a_wrapper

@open_file
def write_multiple_items(file, sep, *args):
    file.write(sep.join(args))

@open_file
def write_one_item(file,sep,name):
    file.write(sep.join(name))

write_multiple_items('foo.txt','--',"Hello","World", "!!!!")
write_one_item('bar.txt','--',"Bye World !!!") 
```

我应该关闭文件吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T04:35:20.233

`with`如果您知道您只想在您的装饰函数中使用该文件，那么最好使用一个语句。另外，`separator`是一个实现细节 - 我会把它放在包装器之外：

```
def open_file(func):
    def a_wrapper(filename, *args):
        with open(filename, 'w') as f:
            return func(f, *args)
    return a_wrapper 
```

此外，正如@Platinum Azure 所指出的，使用[`functools.wraps`](http://docs.python.org/library/functools.html#functools.wraps)装饰器函数总是一个好主意 - 这将确保包装函数的元数据存在于包装函数中（当您希望能够区分您的以编程方式包装函数）。

**编辑：**

您应该移出`separator`包装函数的原因是因为您可能有其他函数只需要获取文件对象并且不需要分隔符。如果您创建这样的函数：

```
def say_hello(fp):
    fp.write("Hello World!") 
```

您*不能*使用`open_file`也尝试传入的装饰器`separator`版本`say_hello`- 尝试它会得到一个`TypeError`，因为您试图调用一个函数，该函数接受一个参数（一个文件对象）和两个参数 - 一个文件对象和一个分隔器。

此外，即使您的所有包装函数都至少需要一个额外的参数，它也不必*是*分隔符。即使使用未经编辑的装饰器，这也是一个合法的包装功能：

```
def laugh(fp, number_of_times):
    fp.write("Ha! " * number_of_times) 
```

这就是我所说`separator`的实现细节的意思。理想情况下，您的代码也是文档。如果您只使用此包装器来写出除以分隔符的数据，那么您应该将分隔符参数留在包装器中，因为它有助于记录应该如何使用包装器。否则，第二个参数并不比第 14 个更重要——并且不应该用它自己的参数来调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T04:34:32.293

您可以在包装函数中使用`try`/`finally`来确保文件已关闭，或者`with`如果您使用的是足够新的 Python 版本，则可以使用该语句。

```
from functools import wraps
def open_file(func):
    @wraps(func)
    def a_wrapper(filename, sep, *args):
        f = open(filename, 'w')
        try:
            return func(f, sep, *args)
        finally:
            f.close()
    return a_wrapper 
```

使用`with`：

```
from functools import wraps
def open_file(func):
    @wraps(func)
    def a_wrapper(filename, sep, *args):
        with open(filename, 'w') as f:
            return func(f, sep, *args)
    return a_wrapper 
```

# iphone - 强、弱和本我

> ID：11589446
> 
> 赞同：0
> 
> 时间：2012-07-21T04:24:31.217
> 
> 标签：iphone, objective-c, memory-management

当 iOS 3.0 发布时，我做了一些`iOS`开发工作，但两年来我都忘记了 iOS 是如何做的。

我记得您确实会在`iOS`3.0 中保留，即使如此，我仍然不记得在二传手中保留的确切原因是什么。到目前为止，这只是让我难过的一件事。

最后但并非最不重要的一点是，在带有 ARC 的 iOS 5 中，默认情况下局部变量很强大。如果他们中的一些人没有二传手，他们怎么能强大呢？（例如，id。）

一些代码来解释我的意思：

```
+(double) popOperandOffStack:(NSMutableArray *) stack{
    double result = 0;

    id topOfStack = [stack lastObject]; 
```

`// how is topOfStack retaining [stack lastObject] if it's simply id?`

```
 if (topOfStack) [stack removeLastObject];

    if ([topOfStack isKindOfClass:[NSNumber class]]){
        result = [topOfStack doubleValue];
    }
    else if ([topOfStack isKindOfClass:[NSString class]]){

        if ([topOfStack isEqualToString:@"+"]){
            result = [self popOperandOffStack:stack] + [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"-"]){
            result = [self popOperandOffStack:stack] - [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"*"]){
            result = [self popOperandOffStack:stack] * [self popOperandOffStack:stack];
        }

        if ([topOfStack isEqualToString:@"/"]){
            result = [self popOperandOffStack:stack] / [self popOperandOffStack:stack];
        }

    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:32:17.803

您可以在编译时不知道它们的确切类型的情况下向对象发送消息。事实上，当您向从数组返回的对象发送消息时，您通常会这样做：您不需要转换`id`为确切的类型，您可以简单地发送一条消息，Objective C 将正确地发送它。此规则的唯一例外是使用点`.`语法访问属性：您确实需要在那里进行强制转换。

其类继承自的每个对象都会`NSObject`响应`retain`、`release`、`autorelease`等等。这就是 ARC 需要知道的全部内容。`id`在最坏的情况下，如果您碰巧指向无效的内容，您将收到“对象不响应选择器”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:24:58.360

You appear to be confusing properties with instance variables and local variables.

**Variables do not have setters.** Properties have setters. Properties of **any type** can have setters (except possibly void). Instance variables might *happen to* correspond to properties, but the variables themselves do not have "setters". `obj->ivar` will never call a setter, **not even under ARC**.

ARC simply does approximately three things:

1.  Insert `retain`, `release`, `autorelease`, and `dealloc` for you. When you write

    ```
    // ARC
    {
      id foo = [array lastObject];
      ...
    } 
    ```

    it gets translated to approximately

    ```
    // MRC
    {
      id foo = [[array lastObject] retain];
      ...
      [foo release];
    } 
    ```

    It uses Objective-C naming conventions to figure out what it needs to retain and release. There are a few optimizations (it *actually* uses `objc_retain()` and friends for reasons described in the [ARC spec](http://clang.llvm.org/docs/AutomaticReferenceCounting.html), plus a few more functions to handle autoreleased objects more efficiently than `-autorelease`.)

2.  Release `__strong` ivars in `-dealloc` for you. It does not call the property setters; it just releases the ivars. It might also set them to `nil`.

3.  Zeroing weak references.`__weak` variables are read/written with `objc_copyWeak()` and friends instead of being accessed directly. There's additionally a hook in `-[NSObject release]` (or so) in order to implement zeroing weak references correctly.

Additionally, the semantics surrounding blocks and `__block` variables are changed in a way that isn't easy to replicate via MRC. Apart from that, I believe everything ARC does can be replicated by calling the ARC runtime support function calls.

The only connection between ARC and setters is that you can get rid of a lot of properties, because the compiler inserts retain/release on ivar access.

# php - 将字符串的最后三个单词放在开头

> ID：11589450
> 
> 赞同：0
> 
> 时间：2012-07-21T04:24:48.613
> 
> 标签：php

我想将字符串的最后三个单词放在开头。例如，这两个变量：

```
$vari1 = "It is a wonderful goodbye letter that ultimately had a happy ending.";
$vari2 = "The Science Museum in London is a free museum packed with interactive exhibits."; 
```

应该变成：

```
"A happy ending - It is a wonderful goodbye letter that ultimately had."
"With interactive exhibits - The Science Museum in London is a free museum packed." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:42:20.997

爆炸，重新排列，然后内爆应该可以工作。[请参阅此处](http://codepad.org/rrsPeg6W)的示例

```
$array = explode(" ", substr($input_string,0,-1));
array_push($array, "-");
for($i=0;$i<4;$i++)
   array_unshift($array, array_pop($array));
$output_string = ucfirst(implode(" ", $array)) . "."; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:41:21.570

```
$split = explode(" ",$vari1);
$last = array_pop($split);
$last = preg_replace("/\W$/","",$last);
$sec = array_pop($split);
$first = array_pop($split);
$new = implode(" ",array(ucfirst($first),$sec,$last)) . " - " . implode(" ",$split) . "."; 
```

或类似的应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T04:41:49.070

一定要温柔地爱我。<3

```
function switcheroo($sentence) {
    $words = explode(" ",$sentence);
    $new_start = "";
    for ($i = 0; $i < 3; $i++) {
        $new_start = array_pop($words)." ".$new_start;
    }
    return ucfirst(str_replace(".","",$new_start))." - ".implode(" ",$words).".";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T05:06:20.383

这将在 2 行代码中为您提供与您想要的完全相同的输出

```
$array = explode(' ', $vari1);
echo ucfirst(str_replace('.', ' - ', join(' ', array_merge(array_reverse(array(array_pop($array), array_pop($array), array_pop($array))), $array)))) . '.'; 
```

# iphone - NSBlockOperation 和 start 方法

> ID：11589451
> 
> 赞同：2
> 
> 时间：2012-07-21T04:24:59.343
> 
> 标签：iphone, objective-c, ios

在查看我的代码时，我发现在很多地方我一直在假设调用`[NSBlockOperationInstance start];`将在主线程上启动此操作。我不知道我为什么会这样想，但我不应该这么肯定。我检查了文档，但找不到任何明确提及该块将在其上运行的线程。`assert([NSThread isMainThread]);`但是，在块的主体中​​断言确实每次使用都会通过`start`，所以我不确定这是否是巧合。有人对这将如何工作有更深入的了解吗？

我忘了提到 [op start] 正在主线程上被调用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T05:29:03.380

好的，这完全取决于您调用 start() 的位置。虽然 NSBlockOperation 会将块分配给其他线程，但 start() 是同步的，并且在所有已分配给 NSBlockOperation 的块完成之前不会返回。

虽然 NSBlockOperation 将并发执行它给定的块，但 NSBlockOperation 本身不是并发的（即 isConcurrent 为假）。因此，根据文档，start() 将在 start() 的调用者的线程中完整执行。

由于调用 start() 的线程在所有块执行完毕后才会返回，因此让调用线程参与执行并发块的线程池是有意义的。这就是为什么您会看到一些块在调用 start() 的线程中执行。

如果您在主线程中看到一个块执行，那么您一定是从主线程调用它。

在相关说明中，如果您的 NSBlockOperation 包含单个块，则该块将始终在调用线程中执行。

请记住，如果您希望 NSOperation 完全并发，则必须在子类中实现适当的功能。

除此之外，您可以将任何 NSOperation 赋予 NSOperationQueue，它将同时执行，因为 NSOperation 被赋予一个队列，并且运行该操作的线程调用 start()。

就个人而言，除非我需要使用它的功能，否则我认为使用 NSBlockOperation 优于 dispatch_async() 没有任何优势。如果您只执行一个块，只需调用

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ }); 
```

如果您想利用 NSBlockOperation 的功能，但又不想在当前调用线程中等待它们完成，那么这样做仍然有意义...

```
// Add lots of concurrent blocks
[op addExecutionBlock:^{ /*whatever*/ }];
// Execute the blocks asynchronously
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    [op start];
    // Now do what you want after all the concurrent blocks have completed...
    // Maybe even tell the UI
    dispatch_async(dispatch_get_main_queue(), ^{
        // Update the UI now that all my concurrent blocks have finished.
    });
}); 
```

**编辑** 要解决您对 tc 答案的评论...

如果你打电话

```
op = [NSBlockOperation blockOperationWithBlock:^{assert([NSThread isMainThread])}];
[op start]; 
```

从主线程，那么有一些保证，和一些高概率。

首先，您保证 [op start] 将在调用线程中运行完成。这是因为 NSBlockOperation 不会覆盖指定它不是并发操作的 NSOperation 的默认行为。

接下来，如果 NSBlockOperation 只有一个块，您很有可能会在调用线程中运行。第一个块在调用线程中运行的概率几乎相同。

但是，上述“概率”并不能保证（只是因为文档没有说明）。我想，一些工程师可能会找到一些理由将该单个块旋转到一个并发队列中，并且只是让调用线程加入另一个线程中正在执行的操作......但我非常怀疑这一点。

无论如何，也许你的困惑来自这样一个事实，即 NSBlockOperation 的文档说它同时执行块，它确实如此。但是，操作本身不是并发的，所以初始操作是同步的。它将等待所有块执行，并且它可能（或可能不）在调用线程上执行其中一些。

虽然不能保证，但我发现只有一个块的 NSBlockOperation 不太可能执行除了在调用线程上执行之外的任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T04:34:27.100

[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/NSBlockOperation_class/Reference/Reference.html)特别说

> 添加到块操作的块以默认优先级分派到适当的工作队列。块本身不应对其执行环境的配置做出任何假设。

我怀疑以下内容会崩溃：

```
NSBlockOperation * op = [NSBlockOperation blockOperationWithBlock:^{ sleep(1); }];
[op addExecutionBlock:^{assert([NSThread isMainThread]); }];
[op start]; 
```

简单地执行块有什么问题？

# c# - 传递 HTML 页面字符串并使用 HtmlAgilityPack 抓取

> ID：11589469
> 
> 赞同：1
> 
> 时间：2012-07-21T04:29:10.437
> 
> 标签：c#, vb.net, html-agility-pack

为什么我会收到此错误？

> “路径中的非法字符”在`htmlDoc.Load(pageSource)`

`pageSource`是 HTML 页面的字符串变量。我需要将页面源作为字符串传递，而不是作为文件而不是作为 URL。我该怎么做呢？

```
Dim ids As New List(Of String)()
Dim pageSource = getHtml(url)

Dim htmlDoc As HtmlDocument = New HtmlDocument()

htmlDoc.OptionFixNestedTags = True

htmlDoc.Load(pageSource)

Dim s As HtmlNodeCollection = htmlDoc.DocumentNode.SelectNodes("//div/@id")

For Each div As HtmlNode In s
    ids.Add(div.Id)
Next 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T04:33:43.890

使用`LoadHtml`代替`Load`：

```
htmlDoc.LoadHtml(pageSource) 
```

[另请参阅来源。](http://htmlagilitypack.codeplex.com/SourceControl/changeset/view/98677#1003091)

# c# - 当其中一个元素旋转 WPF 时将元素保持在一起

> ID：11589470
> 
> 赞同：0
> 
> 时间：2012-07-21T04:29:36.630
> 
> 标签：c#, wpf, xaml

如何旋转 StackPanel 或其他容器中的一项并仍保持对齐？

我想要做的是有一个带有项目名称的标签，其中的文本向上和向下定位，结果值将直接在其下方不旋转。这样做的原因是项目的名称很长，但结果只是一个 1 或 2 位数字，所以如果标签是向上和向下的，我可以在屏幕上挤压更多数据。

似乎项目围绕其原始位置（左上角？）而不是围绕它们的中心旋转，因此以项目原始位置为中心的项目最终偏向一边，但旋转项目的高度和宽度之间的差异。

这是我到目前为止尝试过的代码：

```
<StackPanel Orientation="Vertical" Margin="0, 0, 0, 0">
        <Label Name="x" Content="{Binding Path=SummarizedTestName}" Height="50" HorizontalAlignment="Center" FontSize="14">
            <Label.RenderTransform>
                <RotateTransform Angle="-90" />
            </Label.RenderTransform>
        </Label>
        <Label Content="{Binding Path=Count}" Width="50" HorizontalAlignment="Center" FontSize="14" />
</StackPanel> 
```

我曾考虑过使用 TransformGroup 但问题是 SummarizedTestName 字符串的长度在编译时是未知的（使用实体框架从数据库中提取）。我也尝试过水平和垂直对齐的变体，但由于事物旋转的方式，它们似乎都不能很好地工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:00:21.760

您可以尝试使用[LayoutTransform](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)属性而不是`RenderTransform`. 由于在解析布局*后*`RenderTransform`旋转名称标签，因此计数标签的位置就好像名称标签仍然是水平的。

 *使用`LayoutTransform`会在布局分辨率之前旋转名称标签，并且计数标签应该很好地对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:41:29.003

使用艾伦的答案解决了这个问题。结果如下：

![使用艾伦的答案解决了这个问题。 结果如下：](../Images/36736f2a09f59bd7183a552c8bc4b431.png)

一旦使用了 LayoutTransform，代码就非常简单和干净：

```
 <StackPanel Orientation="Vertical" >
    <Label Name="x" Content="{Binding Path=SummarizedTestName}" FontSize="14" HorizontalAlignment="Left" Margin="0, 0, 0, 10" >
       <Label.LayoutTransform>
           <RotateTransform Angle="90" />
       </Label.LayoutTransform>
    </Label>
    <Label Content="{Binding Path=Count}" FontSize="14" HorizontalAlignment="Right" VerticalAlignment="top" Width="50" />
</StackPanel> 
```

谢谢艾伦！有人给他投票，因为我还不能；）*

# c# - 在第一个表中选择一行后如何使第二个表出现？

> ID：11589471
> 
> 赞同：0
> 
> 时间：2012-07-21T04:29:39.027
> 
> 标签：c#, asp.net, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，正在尝试开发两个动态表，用户可以在其中直接在第一个表中添加新行，当他完成添加后，他将能够选择它以打开第一个表下方的第二个表桌子。我现在在选择第一个表中的行以显示第二个表时遇到问题。**那么如何获得呢？**

仅供参考，我有以下数据库设计：

```
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
QuestionImage Table: ID, QuestionID, URL
Answer Table: AnswerID, Answer
QuizContent Table: ID, QuizID, QuestionID, AnswerID 
```

此外，第一个表将用于插入问题，第二个表将用于插入答案。那么我如何选择一个问题来显示第二个表格并能够插入该问题的答案。

ASP.NET 代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:Table ID="questionsList" runat="server" Width="70%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366; font-size:17px; font-weight:bold;">
                    <asp:TableHeaderRow>
                        <asp:TableHeaderCell>ID</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Question</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Question Order</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Answer Explanation</asp:TableHeaderCell>
                    </asp:TableHeaderRow>
        </asp:Table>

        <asp:Table ID="Table1" runat="server" Width="70%" CellPadding="5" CellSpacing="0" 
                    style="border:2px solid #003366;">
            <asp:TableFooterRow>
                <asp:TableCell>Add</asp:TableCell>

                <asp:TableCell >
                    <asp:TextBox ID="txtQuestion" runat="server"></asp:TextBox>

                    <%--For the txtQuestion TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server"
                                    TargetControlID="txtQuestion" WatermarkText="Type the Question here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:TextBox ID="txtQuestionOrder" runat="server"></asp:TextBox>

                    <%--For the txtQuestionOrder TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender2" runat="server"
                                    TargetControlID="txtQuestionOrder" WatermarkText="Type the Question Order here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:TextBox ID="txtAnswerExplanation" runat="server"></asp:TextBox>

                    <%--For the txtAnswerExplanation TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender3" runat="server"
                                    TargetControlID="txtAnswerExplanation" WatermarkText="Type the Answer Explanation here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <span style="margin:3px 10px 0px 0px;">
                        <asp:ImageButton ID="addButton" runat="server" ImageUrl="Images/tick_small.png" OnClick="addQuestion" />
                    </span>
                </asp:TableCell>
            </asp:TableFooterRow>
        </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

代码隐藏：

```
public void fill_Questions()
    {

        string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string selectQuery = "SELECT * FROM Question";
        SqlCommand cmd = new SqlCommand(selectQuery, conn);
        DataSet ds = new DataSet();
        SqlDataAdapter sda = new SqlDataAdapter();
        sda.SelectCommand = cmd;

        Table table = (Table)UpdatePanel1.FindControl("questionsList");
        try
        {
            table.Rows.Clear();
            //open the connection
            conn.Open();
            //filling the dataset with the data
            sda.Fill(ds);
            //close the connection
            conn.Close();
        }
        catch
        {
            table.Rows.Clear();
        }

        //Loading the data into the table
        if (ds.Tables.Count > 0)
        {
            int rowsNum = ds.Tables[0].Rows.Count;
            for (int i = 0; i < rowsNum; i++) 
            {
                TableRow row = new TableRow();
                table.Rows.Add(row);

                for (int colCount = 0; colCount < 5; colCount++)
                {
                    TableCell cell = new TableCell();
                    row.Cells.Add(cell);

                    if (colCount == 0)
                    {
                        //int n = i + 1;
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["QuestionID"].ToString()));
                    }
                    else if (colCount == 1)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["Question"].ToString()));
                    }
                    else if (colCount == 2)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["QuestionOrder"].ToString()));
                    }
                    else if (colCount == 3)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["AnswerExplanation"].ToString()));
                    }
                    else if (colCount == 4)
                    {
                        ImageButton deleteButton = new ImageButton();
                        deleteButton.ImageUrl = "Images/DeleteRed.png";
                        deleteButton.ID = ds.Tables[0].Rows[i]["QuestionID"].ToString() + "_" + i;
                        deleteButton.Click += new ImageClickEventHandler(deleteQuestion);
                        cell.Controls.Add(deleteButton);

                    }
                } //End for loop
            }//End OUTER for loop

        }//End if statement

    }

    //For deleting question
    public void deleteQuestion(object sender, EventArgs e) 
    {
        string id = ((ImageButton)sender).ID.ToString().Split('_')[0];
        try 
        {
            string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string deleteQuery = "DELETE FROM Question WHERE QuestionID = @id";
            SqlCommand cmd = new SqlCommand(deleteQuery,conn);
            cmd.Parameters.AddWithValue("@id", id);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
            fill_Questions();
        }
        catch(SqlException se){}

        UpdatePanel1.Update();

    }

    //For adding questions
    public void addQuestion(object sender, EventArgs e) 
    {
        try 
        {
            TextBox txtQuestion = (TextBox)UpdatePanel1.FindControl("txtQuestion");
            TextBox txtQuestionOrder = (TextBox)UpdatePanel1.FindControl("txtQuestionOrder");
            TextBox txtAnswerExplanation = (TextBox)UpdatePanel1.FindControl("txtAnswerExplanation");

            string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string insertQuery = "INSERT INTO Question (Question, QuestionOrder, AnswerExplanation) VALUES (@Question, @QuestionOrder, @AnswerExplanation)";
            SqlCommand cmd = new SqlCommand(insertQuery,conn);
            cmd.Parameters.AddWithValue("@Question", txtQuestion.Text);
            cmd.Parameters.AddWithValue("@QuestionOrder", txtQuestionOrder.Text);
            cmd.Parameters.AddWithValue("@AnswerExplanation", txtAnswerExplanation.Text);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
            fill_Questions();
        }
        catch(SqlException se){}
    } 
```

**更新：**

我为答案创建了两个表格，就像我为问题所做的那样。现在，**选择一个问题后，我将如何显示这些表格？**

ASP.NET 代码：

```
<div align="center">
    <h3>Answers List</h3>
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:Table ID="answersList" runat="server" Width="70%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366; font-size:17px; font-weight:bold;">
                    <asp:TableHeaderRow>
                        <asp:TableHeaderCell>Answer</asp:TableHeaderCell>
                    </asp:TableHeaderRow>
        </asp:Table>

        <asp:Table ID="Table2" runat="server" Width="70%" CellPadding="5" CellSpacing="0" 
                    style="border:2px solid #003366;">
            <asp:TableFooterRow>
                <asp:TableCell>Add</asp:TableCell>

                <asp:TableCell >
                    <asp:TextBox ID="txtAnswer" runat="server"></asp:TextBox>

                    <%--For the txtQuestion TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender4" runat="server"
                                    TargetControlID="txtAnswer" WatermarkText="Type the Answer here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:CheckBox ID="isCorrectCheckBox" runat="server" />
                </asp:TableCell>

                <asp:TableCell>
                    <span style="margin:3px 10px 0px 0px;">
                        <asp:ImageButton ID="ImageButton1" runat="server" ToolTip="Add" ImageUrl="Images/tick_small.png" OnClick="addAnswer" />
                    </span>
                </asp:TableCell>
            </asp:TableFooterRow>
        </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
    </div> 
```

# exception-handling - 在 JVM 中捕获任何内容的目的

> ID：11589472
> 
> 赞同：2
> 
> 时间：2012-07-21T04:29:54.713
> 
> 标签：exception-handling, jvm, .class-file

在 Java 字节码中，有一个选项可以将常量池索引 0 指定为异常处理程序类型，从而允许您捕获所有异常。但是，据我了解，这与捕获 Throwable 完全相同。那么这个功能的目的是什么？有一天，Java 的设计者是否设想过添加不继承自 Throwable 的异常类型？看起来不像，但除了懒惰，我想不出其他解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:49:50.073

[JVM 规范（§4.7.3）](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.3)指出：

> 如果该项的值`catch_type`为零，则为所有异常调用此异常处理程序。这用于实现`finally`（§3.13）。

尽管第 3.13 节中没有具体讨论 catch_type zero 的使用，但`finally`在 Java 中编译子句时使用它的提示提供了一个线索。JVM 设计者可能想要一种简单的方法来引用*所有*异常类型，而不必专门引用`Throwable`该类。使用 catch_type 零对于 JVM 来说更容易识别，而不是必须索引到常量池并在`java/lang/Throwable`那里解析类名。

实际上，正如您所说，catch_type 零或指向常量池的索引`java/lang/Throwable`应该相同地工作。

# android - Android：从选项菜单开始活动

> ID：11589480
> 
> 赞同：1
> 
> 时间：2012-07-21T04:31:47.907
> 
> 标签：android, eclipse, android-activity, menu, options

我正在尝试从选项菜单启动一项活动，但我的应用程序不断崩溃。我收到的唯一错误是 Eclipse 调试窗口中的 ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord,Intent) 错误。

下面是我目前正在使用的代码，但请记住，我尝试了多个选项，所有这些选项都以相同的痛苦结束，在同一段代码 - startActivity 语句（通过使用断点发现，因为我'我不确定如何在 LogCat 窗口中查看堆栈跟踪，如我之前的问题[Android/Eclipse：LogCat 帮助中](https://stackoverflow.com/questions/11589188/android-eclipse-assistance-with-logcat)所述）。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.changescheme, menu);
    menu.findItem(R.id.changeScheme).setIntent(new Intent(this, ColourActivity.class));
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);
    this.closeOptionsMenu();
    startActivity(item.getIntent());
    return true;
} 
```

这是changescheme.xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/changeScheme" android:title="Change Colour Scheme" android:icon="@android:drawable/ic_menu_edit"></item>
</menu> 
```

我还尝试在 onOptionsItemSelected 块中使用 switch(item.getItemId()) 语句，而不是在 onCreateOptionsMenu 块中使用 menu.findItem，但仍然没有运气。

我已经在我的清单文件中定义了活动。我也可以从常规按钮启动活动，当应用程序第一次在设备上打开时，活动会在我的初始屏幕后立即启动，我对这两种方法都没有问题。

对我来说，这表明 ColourActivity 类或其关联的布局文件没有问题，但选项菜单中的实现存在问题。

我还在另一个应用程序中实现了与上面所示相同的方法（在代码中）并且没有任何问题，所以我在这里真的很茫然。

所有帮助将不胜感激。

谢谢，亚当。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T04:39:07.977

您正在激活的意图应该指向某个目标组件，这不是您的情况，而是您应该执行以下操作：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);
    this.closeOptionsMenu();
    Intent intent = new Intent(ActivityA.this, ColourActivity.class);
    /*Here ActivityA is current Activity and ColourActivity is the target Activity.*/
    startActivity(intent);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:44:20.257

试试这个，

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflator = getMenuInflater();
    inflator.inflate(R.menu.changescheme, menu);
    return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId())
         {
         case  R.id.changeScheme:
         Log.d("ChangeScheme", "Selected : ChangeScheme Option");

startActivity(new Intent(MainAcitivity.this, ColourActivity.class));

          return true;
         caseR.id.help:
          Log.d("HelpMenu", "Selected : Help Option");
          //Here put your code
          return true;

         }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:48:19.253

检查这个：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu){
        MenuInflater inflater=getMenuInflater();
        inflater.inflate(R.menu.changescheme, menu);
        return true;
    }

@Override 
    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()) {
        case R.id.changeScheme:
            //start activity here
            break;

        case R.id.help:
            //start activity here
            break;
        }
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T12:45:51.167

我现在已经解决了这个问题。

原来问题根本不在`ListActivity`课堂上，而是在`ColourActivity`课堂上。

我试图解析 中的一些颜色`onCreate`，但我忘记在其中一个 RGB 颜色字符串中包含 #，因此崩溃了！

非常感谢大家的帮助，亚当。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T05:09:58.173

嗨亚当，当我在我的模拟器上测试时，您的代码似乎非常好，请检查您是否已将类名“ColourActivity”添加到清单文件中。

```
 <activity android:name="ColourActivity"></activity> 
```

# algorithm - 添加和平移纬度/经度坐标的算法

> ID：11589482
> 
> 赞同：0
> 
> 时间：2012-07-21T04:32:12.900
> 
> 标签：algorithm, coordinates, coordinate-transformation

您好，我正在寻找一种算法，可以让我为特定坐标添加度数。所以假设我有以下位置-0.31399363，-78.44437。我有一个图像，我假设这个位置指向北方，现在我希望能够创建另一个具有 +30 度经度偏移的位置，并且距离初始点 100m。我一直在网上寻找，我发现了一些计算以将十进制坐标转换为度数，我认为这是起点，但我不知道如何根据距离转换十进制坐标。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:38:54.897

我不完全确定我理解这个问题，但要确定纬度/经度坐标之间的距离和方位，您可以使用[Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula)。对我来说，这听起来像，或者可以从中派生出的东西，就是你正在寻找的东西。

# google-app-engine - 应用引擎中的谷歌 oauth2client

> ID：11589489
> 
> 赞同：1
> 
> 时间：2012-07-21T04:33:55.683
> 
> 标签：google-app-engine, google-api, oauth2client

我正在为 google-app-engine 中的某些应用程序编写一个使用 google 的 oauth2 库的程序。当我在我的机器上运行服务器时，它会引发这种类型的 IOError 异常——

```
File "/home/deploy/Downloads/google_appengine/google/appengine/tools/dev_appserver_import_hook.py", line 592, in __init__
raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: '/usr/local/lib/python2.7/dist-packages/oauth2client-1.0c2-py2.7.egg' 
```

我在它命名的目录中有那个蛋文件。我从 google-api-python 项目页面安装了它。我究竟做错了什么？我还注意到目录中的大多数 egg 文件也有一个 ....egg-info 文件。oauth2client-1.0c2-py2.7.egg-info 文件不存在。这会导致错误吗？

如果我打开我的python解释器并尝试打开文件，它会成功打开它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:50:56.720

您必须将该`oauth2client`目录复制到`root`项目文件夹的目录中。App Engine 要求包含所有使用过的软件包。

# java - 从 jar 中提取文件后，如何将它们重新组合成一个有效的 jar？

> ID：11589495
> 
> 赞同：4
> 
> 时间：2012-07-21T04:34:42.380
> 
> 标签：java, jar, manifest, executable-jar, manifest.mf

我从 dacapo 基准 jar 中提取了文件。

```
jar -xf dacapo-2006-10-MR2.jar 
```

然后，我得到了这个文件夹

```
dacapo-2006-10-MR2 
```

我试图以这种方式将它们重新组合在一起：

```
jar cmf dacapo-2006-10-MR2/META-INF/MANIFEST.MF my-dacapo.jar dacapo-2006-10-MR2 
```

但是当我尝试使用新的 jar 时出现错误：

```
java -jar my-dacapo.jar -s small antlr

Exception in thread "main" java.lang.NoClassDefFoundError: Harness
Caused by: java.lang.ClassNotFoundException: Harness
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Harness. Program will exit. 
```

我不熟悉 jar 文件。谁能帮我一个忙？谢谢！

@Bohemian 看来你的解决方案在这里不起作用，见下文

```
> zip -r my-dacapo dacapo-2006-10-MR2
> mv my-dacapo.zip my-dacapo.jar
> java -jar my-dacapo.jar -s small antlr

Invalid or corrupt jarfile my-dacapo.jar 
```

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:42:39.007

jar 只是一个扩展名为“.jar”的压缩文件

压缩文件并将其重命名`.zip`为`.jar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-15T08:13:49.677

Jar 工具提供了一个**u**选项，您可以使用该选项通过修改其清单或添加文件来更新现有 JAR 文件的内容。

添加文件的基本命令具有以下格式：

**jar uf jar-file 输入文件**

在这个命令中：

*   **u**选项表示您要更新现有的 JAR 文件。

*   **f**选项表示要更新的 JAR 文件是在命令行中指定的
    。

*   **jar-file**是要更新的现有 JAR 文件。

*   **input-file(s)**是要添加到 JAR 文件中的一个或多个文件的空格分隔列表。

存档中已有的与添加的文件具有相同路径名的任何文件都将被覆盖。

更多细节：[https ://docs.oracle.com/javase/tutorial/deployment/jar/update.html](https://docs.oracle.com/javase/tutorial/deployment/jar/update.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T04:47:43.023

首先转到该文件解压缩的目录。然后写入命令。

jar cvf（你要插入的类）.class（或你要插入的文件夹）

它将生成可执行的jar文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T04:59:45.237

如果您使用 eclipse，您可以按照以下[步骤](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-33.htm)获取您的 jar并[创建清单](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Ftasks%2Ftasks-35.htm)

你也可能需要阅读[这个](http://viralpatel.net/blogs/create-jar-file-in-java-eclipse/)（你可能没有在清单文件中定义你的主类）

# sql - 在 SQL 查询中查找下一行并仅在前一行匹配时将其删除

> ID：11589499
> 
> 赞同：1
> 
> 时间：2012-07-21T04:35:40.567
> 
> 标签：sql, sql-server-2008, tsql

我有一张这样的桌子。

```
|-DT--------- |-ID------|
|5/30 12:00pm |10       |
|5/30 01:00pm |30       |
|5/30 02:30pm |30       |
|5/30 03:00pm |50       |
|5/30 04:30pm |10       |
|5/30 05:00pm |10       |
|5/30 06:30pm |10       |
|5/30 07:30pm |10       |
|5/30 08:00pm |50       |
|5/30 09:30pm |10       | 
```

仅当前一行与下一行具有相同的 ID 时，我才想删除任何重复的行。我想将重复的行与日期时间保持在最远的将来。例如，上表看起来像这样。

```
|-DT--------- |-ID------|
|5/30 12:00pm |10       |
|5/30 02:30pm |30       |
|5/30 03:00pm |50       |
|5/30 07:30pm |10       |
|5/30 08:00pm |50       |
|5/30 09:30pm |10       | 
```

我能得到关于如何做到这一点的任何提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:33:15.327

```
with C as
(
  select ID,
         row_number() over(order by DT) as rn
  from YourTable
)
delete C1
from C as C1
  inner join C as C2
    on C1.rn = C2.rn-1 and
       C1.ID = C2.ID 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/75784)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T06:04:07.620

执行以下 3 个步骤：[http ://www.sqlfiddle.com/#!3/b58b9/19](http://www.sqlfiddle.com/#!3/b58b9/19)

首先使行顺序：

```
with a as
(
  select dt, id, row_number() over(order by dt) as rn
  from tbl
)
select * from a; 
```

输出：

```
|                         DT | ID | RN |
----------------------------------------
| May, 30 2012 12:00:00-0700 | 10 |  1 |
| May, 30 2012 13:00:00-0700 | 30 |  2 |
| May, 30 2012 14:30:00-0700 | 30 |  3 |
| May, 30 2012 15:00:00-0700 | 50 |  4 |
| May, 30 2012 16:30:00-0700 | 10 |  5 |
| May, 30 2012 17:00:00-0700 | 10 |  6 |
| May, 30 2012 18:30:00-0700 | 10 |  7 |
| May, 30 2012 19:30:00-0700 | 10 |  8 |
| May, 30 2012 20:00:00-0700 | 50 |  9 |
| May, 30 2012 21:30:00-0700 | 10 | 10 | 
```

其次，使用序号，我们可以找到哪些行在底部（以及那些不在底部的行）：

```
with a as
(
  select dt, id, row_number() over(order by dt) as rn
  from tbl
)
select below.*, 
    case when above.id <> below.id or above.id is null then 
        1 
    else 
        0 
    end as is_at_bottom
from a below
left join a above on above.rn + 1 = below.rn; 
```

输出：

```
|                         DT | ID | RN | IS_AT_BOTTOM |
-------------------------------------------------------
| May, 30 2012 12:00:00-0700 | 10 |  1 |            1 |
| May, 30 2012 13:00:00-0700 | 30 |  2 |            1 |
| May, 30 2012 14:30:00-0700 | 30 |  3 |            0 |
| May, 30 2012 15:00:00-0700 | 50 |  4 |            1 |
| May, 30 2012 16:30:00-0700 | 10 |  5 |            1 |
| May, 30 2012 17:00:00-0700 | 10 |  6 |            0 |
| May, 30 2012 18:30:00-0700 | 10 |  7 |            0 |
| May, 30 2012 19:30:00-0700 | 10 |  8 |            0 |
| May, 30 2012 20:00:00-0700 | 50 |  9 |            1 |
| May, 30 2012 21:30:00-0700 | 10 | 10 |            1 | 
```

第三，删除所有不在底部的行：

```
with a as
(
  select dt, id, row_number() over(order by dt) as rn
  from tbl
)
,b as 
(
  select below.*, 
       case when above.id <> below.id or above.id is null then 
           1 
       else 
           0 
       end as is_at_bottom
  from a below
  left join a above on above.rn + 1 = below.rn
)
delete a
from a
inner join b on b.rn = a.rn
where b.is_at_bottom = 0; 
```

核实：

```
select * from tbl order by dt; 
```

输出：

```
|                         DT | ID |
-----------------------------------
| May, 30 2012 12:00:00-0700 | 10 |
| May, 30 2012 13:00:00-0700 | 30 |
| May, 30 2012 15:00:00-0700 | 50 |
| May, 30 2012 16:30:00-0700 | 10 |
| May, 30 2012 20:00:00-0700 | 50 |
| May, 30 2012 21:30:00-0700 | 10 | 
```

您还可以将删除简化为：[http ://www.sqlfiddle.com/#!3/b58b9/20](http://www.sqlfiddle.com/#!3/b58b9/20)

```
with a as
(
  select dt, id, row_number() over(order by dt, id) as rn
  from tbl
)
delete above
from a below
left join a above on above.rn + 1 = below.rn
where case when above.id <> below.id or above.id is null then 1 else 0 end = 0; 
```

* * *

不过，Mikael Eriksson 的答案是最好的，如果我再次简化我的简化查询，它看起来就像他的答案ツ 为此，我 +1 了他的答案。不过，我会让他的查询更具可读性；通过交换加入顺序并提供良好的别名。

```
with a as
(
  select *, row_number() over(order by dt, id) as rn
  from tbl
)
delete above

from a below
join a above on above.rn + 1 = below.rn and above.id = below.id; 
```

现场测试：[http ://www.sqlfiddle.com/#!3/b58b9/24](http://www.sqlfiddle.com/#!3/b58b9/24)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T05:32:17.803

在这里，只需将 [Table] 替换为您的表格名称。

```
SELECT * 
FROM [dbo].[Table]
WHERE [Ident] NOT IN 
(
    SELECT Extent.[Ident]
    FROM 
    (
        SELECT  TOP 100 PERCENT T1.[DT], 
                T1.[ID],
                T1.[Ident],
                (
                    SELECT TOP 1 Previous.ID
                    FROM [dbo].[Table] AS Previous
                    WHERE Previous.[Ident] > T1.Ident -- this is where the identity seed is important
                    ORDER BY [Ident] ASC
                ) AS 'PreviousId'
        FROM [dbo].[Table] AS T1
        ORDER BY T1.[Ident] DESC
    ) AS Extent
    WHERE [Id] = [PreviousId]
) 
```

注意：您需要在表格上添加一个缩进列 - 如果您无法更改表格的结构，请使用 CTE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T05:38:26.727

您可以尝试以下查询...

```
select * from 
(
    select *,RANK() OVER (ORDER BY dt,id) AS Rank  from test
) as a
where 0 = (
select count(id) from (
select id, RANK() OVER (ORDER BY dt,id) AS Rank  from test
)as b where b.id = a.id and b.Rank = a.Rank + 1 

) order by dt 
```

谢谢， 马赫什

# javascript - 在 JavaScript 中为按钮设置动画以从按钮到屏幕中心弹出一个模式对话框？

> ID：11589501
> 
> 赞同：1
> 
> 时间：2012-07-21T04:36:33.000
> 
> 标签：javascript, jquery-ui

我有一个非常具体的技巧，我正在尝试在 JavaScript 中执行，我确信那里有库可以让我做到这一点，但到目前为止，我对精确解决方案的搜索失败了。

我有一个网页，在屏幕的右上角有一个“登录”按钮。当用户单击按钮时，我将在屏幕中央显示一个 CSS 模式对话框，允许用户输入他们的身份验证信息。CSS 对话框已全部设置好，只缺少一件：

我想在用户单击登录按钮时添加一个动画，该按钮显示从登录按钮“打开”到屏幕中心的模式框，以帮助将用户的眼睛吸引到下一个应该去的地方。动画应该感觉类似于将窗口最小化到/从 Windows 任务栏最小化。

谁能给我指出一个具有此功能的 JavaScript 库？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:11:11.183

我想我刚刚在 jQueryUI 中找到了我想要的东西：

有一种“转移”效果，可以将框轮廓从一个元素移动到另一个元素。虽然这不会显示模态对话框本身从按钮扩展，但它应该实现将用户的眼睛从 A 点吸引到 B 点的目标。不过，我很想听听其他解决方案！

jQueryUI 传输演示： http: [//jqueryui.com/demos/effect/default.html](http://jqueryui.com/demos/effect/default.html)（将选择框从“盲”更改为“传输”，然后单击“运行效果”。）

jQueryUI 传输描述： [http ://docs.jquery.com/UI/Effects/Transfer](http://docs.jquery.com/UI/Effects/Transfer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:33:25.863

这是我的尝试：-p [http://jsfiddle.net/zAzqB/](http://jsfiddle.net/zAzqB/)

利用 jQuery 和[jQuery Easing](http://gsgd.co.uk/sandbox/jquery/easing/)库（只是为了使效果更平滑……可以省略 easing 库，它仍然可以正常工作）。在动画发生时克隆应该动画的元素，并将原始元素移动到动画到最终位置的剪辑元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T05:40:05.793

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style>
.clickBrn { height:50px; width:100%; text-align:right;}
.popUp {height:100px; width:500px; margin:auto; background:#333; color:#FFF; font-family:Arial, Helvetica, sans-serif; font-size:18px; text-align:center; line-height:100px; margin-top:100px;}
</style>
<script type="text/javascript" src="javascript/jquery-1.6.2.js"></script>
<script type="text/javascript" src="javascript/jquery.min.js"></script>
</head>

<body>
<div class="clickBrn">
<input type="button" name="btn" id="btn" value="Click" />
</div>
<div id="iAM" class="popUp"> </div>

<script>

$("#iAM").hide();
$("#btn").click(function()
{
//document.getElementById('iAM').style.marginLeft="400px";
$("#iAM").css( { marginLeft : "400px" } );
$("#iAM").show(1000);
});
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T05:14:46.383

我最近使用了 JQuery Mobile SimpleDialog2 并且对它非常满意。我确实注意到动画适用于 chrome，但不适用于 FF。

[http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html](http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html)

# javascript - 如何执行 Ajax GET 请求以从 rails 获取数据并将其传递给 javascript（谷歌地图）？

> ID：11589508
> 
> 赞同：3
> 
> 时间：2012-07-21T04:39:36.713
> 
> 标签：javascript, ruby-on-rails, ajax, google-maps-api-3, ruby-on-rails-3.2

我有一个带有两列纬度和经度的模型位置。我想找到一种方法来获取位置列表并使用 Ajax 和 javascript 将它们传递到谷歌地图。到目前为止，我的代码如下：

地图.js：

```
function initialize() 
{   
    var map;
    var latlng = new google.maps.LatLng(37.09, -95.71);
    var options = {
    zoom: 5, 
    center: latlng, 
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    disableDefaultUI: true,
    disableDoubleClickZoom: true,
    noClear: true,
    navigationControl: true,
    navigationControlOptions: {
        position: google.maps.ControlPosition.TOP_RIGHT
    }
    };
   map = new google.maps.Map(document.getElementById('map'), options);

   var marker = new google.maps.Marker({
    position: latlng, 
    map: map, 
    title: 'Click me', 
    });
} 
```

位置控制器.rb

```
def show
    @location = Location.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @location }
    end
  end 
```

显示地图的页面：

```
<div id="map" onload="initialize();">
</div> 
```

所以现在我想找到一种从 map.js 发出 AJAX 请求的方法，这样我就可以从 Location 模型中获取位置并将其传递给标记对象，以便在地图加载数据库中预先存在的所有位置时被传递给标记并且那些标记出现。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T16:00:11.717

哦，我能够找到获取位置列表的方法。控制器和视图保持不变。

我在 map.js 中添加了以下 ajax，它为我完成了工作。

```
$.ajax({
        type: "GET",
        dataType: "json",
        url: "/locations",
        success: function(data){}
    }); 
```

现在可以将数据传递给谷歌地图中的标记对象。

# php - 错误：字段列表中的未知列

> ID：11589509
> 
> 赞同：1
> 
> 时间：2012-07-21T04:39:58.867
> 
> 标签：php, mysql, login, field

运行以下脚本时，它会显示错误错误：“字段列表”中的“未知列”“电子邮件”。

```
 <?php
  include("connect.php");

  if($loggedin == '1')
  die("You can't register another account while you're logged in.");

  if(isset($_POST['submit']))
  {

  $uname = trim($_POST['username']);

 if($_POST["regkey"]!="171717")
 die("Invalid Registration Key. <br> <a href= register.php>Back</a>");

 if($_POST["pass"]!=$_POST["pass2"])
 die("Passwords do not match. <br> <a href= register.php>Back</a>");

 // Make sure all forms were filled out.

 if((!isset($_POST['username'])) || (!isset($_POST['pass']))
 || ($uname == '') || ($_POST['pass'] == ''))
 die("Please fill out the form completely. <br><br>
 <a href=register.php>Continue</a>");

 $check = @mysql_query("SELECT id FROM players WHERE username = '$uname'");
 $check = @mysql_num_rows($check);

 if($check > 0)
 die("Sorry, that username has already been taken. Please try again.
 <br><br>
 <a href=register.php>Continue</a>");

 $pass = md5($_POST['pass']);

 $date = date("m/d/y");

 $newPlayer = @mysql_query("INSERT INTO players (username, password,   

registered,callname,email) VALUES   ('$uname','$pass','$date','$_POST

[callname]','$_POST[email]')") or die("Error: ".mysql_error());

echo 'You have been registered! You may now <a href=index.php>Log in</a>.';

}
else
{

// A simple example of a form.

echo '
<center>
<form action=register.php method=post>
<p>Registration is currently<b> NOT OPEN.</b><br>
 You must have a valid Registration key to register.</p>
 <table border="2">
 <tr>
<td>Username:</td><td><input type="text" name="username" size="20px"</input>
</td>
</tr>
<tr>
<td>Callname:</td><td><input type="text" name="callname" size="20px"</input>
</td>
</tr>
<tr>
<td>Password:</td><td><input type="password" name="pass" size="20px"</input>
</td>
</tr>
<tr>
<td>Re-type Password:</td><td><input type="password" name="pass2" size="20px"</input>  
</td>  </tr>
<tr>
<td>Email:</td><td><input type="text" name="email" size="20px"</input></td>
</tr>
<tr><td>Registration Key:</td><td><input type="text" name="regkey" size="20px"></input>                                                                                         

 </td>    </tr>
 </table>
 <input type="submit" name="submit" value="Submit"></input>
 </form>';

 }

 ?> 
```

我对 PHP 很陌生，不知道为什么会出现这个错误。$_POST 不应该从表单中获取该值吗？谢谢阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T04:42:59.173

这意味着您的`players`表不包含`email`列。您需要将此列添加到您的表中才能使此脚本正常工作。

所以你的代码中不正确的部分是

```
$newPlayer = @mysql_query("INSERT INTO players(username, password, registered, callname, email)
                           VALUES('$uname', '$pass', '$date', '$_POST[callname]', '$_POST[email]')") or die("Error: ".mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:46:36.997

1.  `email`在您的玩家表中添加一个字段。
2.  `email`您可能在播放器中拼错了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-11T07:31:04.940

```
$sql = "INSERT INTO user_registration (u_name,s_father,s_schoolname,s_rollno,s_class)
VALUES ($name,$father,$school,$rollno,$class)"; 
```

> 错误：INSERT INTO user_registration (u_name,s_father,s_schoolname,s_rollno,s_class) VALUES (Azhar, hassan, Chulli_payaan,1008,10th) “字段列表”中的未知列“Azhar”

# css - 浏览器可比性？

> ID：11589518
> 
> 赞同：0
> 
> 时间：2012-07-21T04:41:52.667
> 
> 标签：css, html, browser

我创建了一个网站，现在我想检查可比性问题，我的网站是 html5

是否需要检查所有浏览器？我要检查哪些浏览器？

像 chrome 所有版本，IE 所有版本等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:44:44.133

使用 html5 技术时，不同的浏览器会隐含不同的功能子集。我可以建议[caniuse 吗](http://caniuse.com/)？该站点将告诉您哪些浏览器支持哪些功能。

在测试方面，只需在 3 大（chrome、firefox ie.）上启动您的网站，如果您愿意，也可以在 safari 和 opera 上启动。检查网站的外观和运行是否符合预期。

# .htaccess - .htaccess 重写 url 以使 SEO 友好

> ID：11589519
> 
> 赞同：0
> 
> 时间：2012-07-21T04:41:52.580
> 
> 标签：.htaccess, url-rewriting

我在[这里](https://stackoverflow.com/questions/11484853/htaccess-mode-rewrite-engine-seems-not-working-in-my-local-marchine)发布了一些与这个主题相关的内容，但我似乎没有得到正确的答案。所以有人可以帮我改变这样的地址：

```
example.com/index.php?page=something => example.com/something

and example.com/index.php => example.com 
```

在 .htaccess 文件中？

这是我的网站链接 www.panhareach.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:18:03.663

试试这个：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ([A-Za-z0-9\-]+)/?$ /index.php?page=$1 [L] 
```

# iphone - RevMob 顶部横幅不隐藏 iphone sdk

> ID：11589521
> 
> 赞同：0
> 
> 时间：2012-07-21T04:42:05.260
> 
> 标签：iphone, ads, revmob

在我的应用程序中，我使用 RevMob sdk 进行广告。在第一个视图中，使用此代码显示广告横幅。

```
[RevMobAds showBannerAdWithAppID:@"xxxxxxxxxxxxxx"]; 
```

在第二个视图中，我使用代码隐藏横幅..

```
[RevMobAds hideBannerAdWithAppID:@"xxxxxxxxxxxxxxxxxxx"]; 
```

此代码运行完美横幅显示在第一个视图中并隐藏在另一个视图中。

**但是** 我的问题是，当我编写代码以在 appilicationdidbecomeactivemethod 中显示弹出窗口时：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
     [RevMobAds showPopupAdWithAppID:@"xxxxxxxxxxxxx"];
} 
```

然后在**第二个视图中，bannerAdd 不隐藏**它仍然会出现在第二个视图中。

我无法意识到问题所在。如果你有任何建议请帮助我...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T17:29:13.537

您使用的方法已弃用，您应该使用：

```
[RevMobAds showBannerAd];
[RevMobAds hideBannerAd];
[RevMobAds showPopup]; 
```

您可以在 api 文档中查看更多信息：http: [//sdk.revmob.com/ios-api/index.html](http://sdk.revmob.com/ios-api/index.html)

# objective-c - UITextField 偶尔辞职

> ID：11589523
> 
> 赞同：0
> 
> 时间：2012-07-21T04:42:21.723
> 
> 标签：objective-c, ios, uitextfield

这是一个非常奇怪的问题，因为我不能在这里给出太多解释。我在 UITableView 单元格中有 UITextField 。很直接...

当我选择我的 UITextField 时，它偶尔会退出，根本不允许用户与键盘交互。这完全是随机发生的，我一点也不知道为什么会这样。这有发生在其他人身上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:05:12.223

当单元格滚动到屏幕外时会发生这种情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:31:52.800

如果我正确理解，您需要向上推（调整大小）您的视图。

1) 确保您的文本字段的委托设置为 viewconntroller。

2) 实现方法

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   [self resizeView:YES toPoint: -70]; // example
   return YES;
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
   [self resizeView:NO toPoint: 0];
} 
```

当 resizeView 是：

```
-(void) resizeView:(BOOL)top toPoint:(int)point
{
   if (top)
       [UIView animateWithDuration:0.3 animations:^{
    self.view.transform = CGAffineTransformMakeTranslation(0, point);
}];
   else 
   {
     [UIView animateWithDuration:0.3 animations:^{
        self.view.transform = CGAffineTransformMakeTranslation(0, point);
    }];
   }
} 
```

您也可以增加文本字段框架，可能是辞职的随机性取决于表格单元格剪切而不是文本字段的触摸句柄。如果可以检查，请尝试禁用表格或单独单元格的用户交互。

# python - 优化：Python、Perl 和 C 后缀树库

> ID：11589525
> 
> 赞同：5
> 
> 时间：2012-07-21T04:42:25.760
> 
> 标签：python, perl, optimization, binding, suffix-tree

我有大约 3,500 个由单行字符串组成的文件。这些文件的大小各不相同（从大约 200b 到 1mb）。我正在尝试将每个文件与其他文件进行比较，并在两个文件之间找到一个长度为 20 个字符的公共子序列。请注意，每次比较期间，子序列仅在两个文件之间通用，而不是在所有文件中通用。

我在这个问题上遇到了一些困难，由于我不是专家，所以我最终得到了一些临时解决方案。我使用 itertools.combinations 在 Python 中构建一个列表，最终得到大约 6,239,278 个组合。然后，我一次将两个文件传递给一个 Perl 脚本，该脚本充当一个用 C 编写的名为[libstree](http://www.icir.org/christian/libstree)的后缀树库的包装器。我试图避免这种类型的解决方案，但 Python 中唯一可比较的 C 后缀树包装器存在[内存泄漏](http://www.daimi.au.dk/~mailund/suffix_tree.html)。

所以这是我的问题。我已经计时了，在我的机器上，该解决方案在 25 秒内处理了大约 500 次比较。这意味着，完成任务需要大约 3 天的连续处理时间。然后我必须再次查看 25 个字符而不是 20 个字符。请注意，我已经超出了我的舒适区并且不是一个非常好的程序员，所以我确信有一个更优雅的方式去做这个。我想我会在这里问它并生成我的代码，看看是否有人对我如何更快地完成这项任务有任何建议。

**Python代码：**

```
from itertools import combinations
import glob, subprocess

glist = glob.glob("Data/*.g")
i = 0

for a,b in combinations(glist, 2):
    i += 1
    p = subprocess.Popen(["perl", "suffix_tree.pl", a, b, "20"], shell=False, stdout=subprocess.PIPE)
    p = p.stdout.read()
    a = a.split("/")
    b = b.split("/")
    a = a[1].split(".")
    b = b[1].split(".")
    print str(i) + ":" + str(a[0]) + " --- " + str(b[0])
    if p != "" and len(p) == 20:
        with open("tmp.list", "a") as openf:
            openf.write(a[0] + " " + b[0] + "\n") 
```

**Perl代码：**

```
use strict;
use Tree::Suffix;

open FILE, "<$ARGV[0]";
my $a = do { local $/; <FILE> };

open FILE, "<$ARGV[1]";
my $b = do { local $/; <FILE> };

my @g = ($a,$b);

my $st  = Tree::Suffix->new(@g);
my ($c) = $st->lcs($ARGV[2],-1);

print "$c"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:42:34.833

与其编写 Python 来调用 Perl 来调用 C，我相信您最好还是放弃 Python 代码并将其全部用 Perl 编写。

如果您的文件肯定只包含一行，那么您可以通过编写来更简单地阅读这些对

```
my @g = <>; 
```

我相信下面的程序执行与您的 Python 和 Perl 代码组合相同的功能，但我无法测试它，因为我目前无法安装 libstree。

但正如 ikegami 所指出的，最好计算并存储每对文件的最长公共子序列，然后将它们分类。我不会继续对此进行编码，因为我不知道您需要什么信息 - 无论是子序列长度还是您是否还需要字符和/或子序列的位置。

```
use strict;
use warnings;

use Math::Combinatorics;
use Tree::Suffix;

my @glist = glob "Data/*.g";
my $iterator = Math::Combinatorics->new(count => 2, data => \@glist);

open my $fh, '>', 'tmp.list' or die $!;

my $n = 0;
while (my @pair = $iterator->next_combination) {
  $n++;
  @ARGV = @pair;
  my @g = <>;
  my $tree  = Tree::Suffix->new(@g);
  my $lcs = $tree->lcs;
  @pair = map m|/(.+?)\.|, @pair;
  print "$n: $pair[0] --- $pair[1]\n";
  print $fh, "@pair\n" if $lcs and length $lcs >= 20;
} 
```

# c# - 提取 swf 文件中的内容

> ID：11589539
> 
> 赞同：0
> 
> 时间：2012-07-21T04:46:38.400
> 
> 标签：c#, .net, parsing, swfobject, decompiling

我有一个 .swf 文件，我需要提取 .swf 文件中的内容，在这种情况下是 .mp3 文件，有没有办法解析或反编译 .swf 文件来提取其内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:23:13.553

I can't see anything about .NET in there. Give SwfDotNet a try. I've half implemented it in the past but the project was abandoned. There's a tutorial at [http://www.codeproject.com/Articles/16834/How-to-create-a-simple-SWF-decompiler-with-the-Swf](http://www.codeproject.com/Articles/16834/How-to-create-a-simple-SWF-decompiler-with-the-Swf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:58:09.793

Sothink SWF Decompiler 应该可以解决问题。

[Sothink SWF反编译器](http://www.sothink.com/product/flashdecompiler/)

有一个免费试用版可用。

# java - Java - 无法通知等待线程？

> ID：11589540
> 
> 赞同：0
> 
> 时间：2012-07-21T04:47:20.200
> 
> 标签：java, multithreading

```
System.out.println("Thread state: " + threads[i].getState());
threads[i].notify(); 
```

产生以下输出：

```
Thread state: WAITING
Exception in thread "Thread-1" java.lang.IllegalMonitorStateException
at java.lang.Object.notify(Native Method)
at MyPakc.An.run(An.java:49)
at java.lang.Thread.run(Thread.java:679) 
```

到底是怎么回事？为什么我不能通知睡眠线程？

编辑：threads[] 类的代码：

```
package Part2;

import java.util.List;
import javax.swing.JPanel;

class BThread extends Thread{
    private boolean completedThisIter = false;

    @Override
    public synchronized void run() {
        while (true) {
            completedThisIter = false;
            doStuff()
            System.out.println("Completed iter");
            completedThisIter = true;
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public boolean getCompletedThisIter() {
        return completedThisIter;
    }
} 
```

编辑：这是调用它的代码

```
public synchronized void run(){
// OTHER STUFF
    for (int iter = 0; iter < 1212; ++iter){
        System.out.println("Iter " + iter);
        lastAssignedBallIndex = -1;
        for (int i = 0; i < numThreads; i++) {
            //System.out.println("Num " + numThreads + "  " + i);
            //ballThreads[i] = new BallThread(ballList.subList(lastAssignedBallIndex+1,lastAssignedBallIndex+numBallsPerThread),
            //        ballPanel);
            //lastAssignedBallIndex += numBallsPerThread;
            System.out.println("State " + ballThreads[i].getState());
            if (ballThreads[i].getState() == Thread.State.NEW) {
                ballThreads[i].start();
            } else { //if (ballThreads[i].getState() == Thread.State.BLOCKED) {
                System.out.println("Thread state: " + ballThreads[i].getState());
                ballThreads[i].notify();
            }
        }
        //try{
            for (int i = 0; i < numThreads; i++) {
                while (!ballThreads[i].getCompletedThisIter()) {
                    System.out.println("iter:" + iter + " ball:" + i + "  " + ballThreads[i].getCompletedThisIter());
                    //wait(); // TODO elliminate polling here
                }
            }
            System.out.println("Joined");
        //}
       // catch(InterruptedException ie){ie.printStackTrace();}

        ballPanel.repaint();
        notifyAll();
        try{
            Thread.sleep(2);
        }
        catch (InterruptedException ie){}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:53:23.230

您正在打印 a 的状态，`ballThreads[i]`然后通知 a `threads[i]`。不确定这是否是预期行为，但当您不拥有对象的监视器时，您不允许通知线程。您确定要在对象的`synchronized()`块内调用它吗？`threads[i]`

* * *

编辑：

> 是的，这段代码取出来的方法是同步的

在对问题进行编辑后，`synchronized`在方法上，而不是在对象的监视器上，您需要将代码放在如下所示的块中：

```
synchronized(threads[i]) {
    // some stuff
    threads[i].notify();
} 
```

这里重要的一点（与`synchronized`方法声明中的关键字相反）是您在 Object 上同步，然后在此块内`notify()`调用*Object*。例子：

```
public void run()
{
    synchronized(myObject) {
        // do some stuff
        myObject.notify();
    }
} 
```

或者

```
public void run()
{
    synchronized(thread1) {
        // do some stuff
        thread1.notify();
    }
} 
```

或者

```
public void run()
{
    synchronized(syncObject) {
        // do some stuff
        syncObject.notify();
    }
} 
```

看到图案了吗？更多信息：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:55:52.430

`wait()`并`notifiy()`要求您在等待的对象上进行同步。如果您在用于锁定同步块的同一对象上执行`wait()`和`notify()`操作，那么您将摆脱非法监视器状态异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T05:22:44.890

您完全误解了`wait`/`notify`机制的工作方式。线程必须决定有什么东西需要等待。然后线程必须调用`wait`. 然后必须发生一些事情。然后你打电话`notify`告诉线程发生了什么事。

`wait`如果没有首先确定它应该等待特定的东西，就不能进行线程调用。`notify`并且在需要通知线程的事情已经发生之前，您不能调用。发生的事情应该与线程决定等待时正在检查的事情相同。

您遇到错误的原因是与等待的事物相关的同步根本不存在，这违反了`wait`/的语义`notify`。

如果您正在等待邮箱非空，那么您应该检查邮箱是否为空，如果是，请调用`wait`. 确保您仍在邮箱的同步例程中，否则您无法知道邮箱（仍然）是空的。然后，当您将一封信放入邮箱（必须在邮箱的同步例程中）时，您调用`notify`以让任何等待线程知道邮箱已更改状态。您必须等待线程可以测试*的东西*，例如邮箱的状态。

# iphone - 如何自定义日历的框架

> ID：11589541
> 
> 赞同：1
> 
> 时间：2012-07-21T04:47:24.590
> 
> 标签：iphone, tapku

我正在将此[日历](http://tapku.com/)用于我的应用程序。

问题：如何调整这个日历的框架。我尝试这样做

```
calendar            =   [[TKCalendarMonthView alloc] init];
calendar.delegate   =   self;
calendar.frame      =   CGRectMake(0, 0, 200, calendar.frame.size.height); 
```

但是它仍然显示为 360 的宽度

有没有人有任何线索如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:37:11.977

如果不对 TKCalendarMonthViewController 进行大量更改，您将无法更改月视图（图块）的宽度。例如，在 -(id)initWithSundayAsFirst 方法中，每个单独的瓦片/天的宽度设置为 46。

```
int i = 0;
for(NSString *s in ar){
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(46 * i, 29, 46, 15)];
    [self addSubview:label];
    label.text = s;
    label.textAlignment = UITextAlignmentCenter;
    label.shadowColor = [UIColor whiteColor];
    label.shadowOffset = CGSizeMake(0, 1);
    label.font = [UIFont systemFontOfSize:11];
    label.backgroundColor = [UIColor clearColor];
    label.textColor = [UIColor colorWithRed:59/255\. green:73/255\. blue:88/255\. alpha:1];
    i++;
} 
```

您会注意到，在许多方法中，图像用于单个图块的背景，因此您需要创建适合您的自定义宽度的图像。例如 -(void)reactToTouch:down 包含：

```
self.selectedImageView.image = [UIImage imageWithContentsOfFile:TKBUNDLE(@"TapkuLibrary.bundle/Images/calendar/Month Calendar Date Tile Selected.png")]; 
```

# iphone - 多维数组并在可扩展的表格视图中显示

> ID：11589542
> 
> 赞同：1
> 
> 时间：2012-07-21T04:47:28.663
> 
> 标签：iphone, objective-c, ipad, multidimensional-array

我是 iphone 技术的新手。我想为类别和子类别制作数组并在表格视图中显示。如果有人单击特定类别，则它会显示其子类别值。我从我的api动态地得到这个值......没有定义我会得到多少这种类型的记录......我的格式如下所示。

```
Category id     Subcatid  
categoryId 1  subcategoryId 2 
              subcategoryId 3  
categoryId 4  subcategoryId 3 
              subcategoryId 4  
              subcategoryId 5 
              subcategoryId 6  
              subcategoryId 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:28:18.123

这是一些可扩展表格视图的示例教程，我认为它可能会对您有所帮助。

1.  [移动和社交网络技术](http://soulwithmobiletechnology.blogspot.com/2011/06/how-does-uitableviewcell-reorder.html)

2.  [KOTree](https://github.com/adamhoracek/KOTree)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:28:23.530

将 NSMutableArray 用于类别和其他子类别，如下所示：

```
NSMutableArray *mut_arrcategory = [NSMutableArray alloc]initWithObjects:@"Category1",@"Category2", nil] // array content can be more.
NSMutableArray *mut_arrSubcategory = [[NSMutableArray alloc]initWithObjects:[NSArray arrayWithObjects:@"SubCategory1",@"SubCategory2", nil],[NSArray arrayWithObjects:@"SubCategory3",@"SubCategory4",@"SubCategory5", nil], nil]; 
```

此处 tableview 将显示 Category1,Category2 ，其子类别将是内容数组

# xslt - 用同级内容替换空元素

> ID：11589545
> 
> 赞同：1
> 
> 时间：2012-07-21T04:47:50.720
> 
> 标签：xslt, xpath

抱歉，如果这被视为“给我 codez”类型的问题，但我的 xpath 技能在这方面还不够。在我看来，它是通用的，足以引起更多人的兴趣

鉴于下面的这个多语言 XML 文件。我们需要用他们的英语兄弟元素替换空白的荷兰语条目。

输入：

```
<Testing> 
  <T4 t="dutch"></T4> 
  <T4 t="english">Testing Software</T4> 
  <T4 t="french"/> 
  <T4 t="italian"/> 
 </Testing> 
 <P> 
  <T1 t="dutch"></T1> 
  <T1 t="english">Testing Phase. </T1> 
  <T1 t="french"></T1> 
  <T1 t="italian"></T1> 
 </P> 
```

输出：

```
<Testing> 
  <T4 t="dutch">
    <trans>Testing Software</trans>
  </T4> 
  <T4 t="english">Testing Software</T4> 
  <T4 t="french"/> 
  <T4 t="italian"/> 
</Testing> 
<P> 
  <T1 t="dutch"><trans>Testing Phase.</trans></T1> 
  <T1 t="english">Testing Phase. </T1> 
  <T1 t="french"></T1> 
  <T1 t="italian"></T1> 
</P> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:00:51.717

这应该工作...

**XML 输入**（包装`input`成格式良好）

```
<input>
    <Testing> 
        <T4 t="dutch"></T4> 
        <T4 t="english">Testing Software</T4> 
        <T4 t="french"/> 
        <T4 t="italian"/> 
    </Testing> 
    <P> 
        <T1 t="dutch"></T1> 
        <T1 t="english">Testing Phase. </T1> 
        <T1 t="french"></T1> 
        <T1 t="italian"></T1> 
    </P> 
</input> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*[@t='dutch'][not(node())]">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <trans><xsl:value-of select="normalize-space(../*[@t='english'])"/></trans>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<input>
   <Testing>
      <T4 t="dutch">
         <trans>Testing Software</trans>
      </T4>
      <T4 t="english">Testing Software</T4>
      <T4 t="french"/>
      <T4 t="italian"/>
   </Testing>
   <P>
      <T1 t="dutch">
         <trans>Testing Phase.</trans>
      </T1>
      <T1 t="english">Testing Phase. </T1>
      <T1 t="french"/>
      <T1 t="italian"/>
   </P>
</input> 
```

# objective-c - 如何将用户重定向到我的应用程序的专业版（IOS）

> ID：11589552
> 
> 赞同：1
> 
> 时间：2012-07-21T04:49:04.380
> 
> 标签：objective-c, ios

我的应用程序有 2 个版本.. lite 和 pro.. 在 lite 版本中我想放置一个按钮，将用户重定向到应用商店中的我的 pro 应用程序.. 我该怎么做？谢谢

如果我要放置一个包含尚未发布的应用程序链接的共享按钮，我会怎么做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:55:16.047

找到您的专业应用程序的链接，然后使用`itms://`或`itms-apps://`替换`http://`。

使用按钮启动此链接。它将避免重定向并登陆应用商店

# php - 将mysql链接传递给函数

> ID：11589553
> 
> 赞同：0
> 
> 时间：2012-07-21T04:49:12.180
> 
> 标签：php, mysqli

这是功能：

```
function getCount($module, $db_link) {
    if($module == "tweets") {
        $query = "SELECT COUNT(*) FROM tweets WHERE `read`='n'";
        $tweet_count = mysqli_query($db_link,$query);
        echo $tweet_count;
    }
} 
```

这是链接（在代码前面定义）：

```
$mysqli = mysqli_connect("localhost", "twitterd", "password", "twitterd") or die('Cannot connect to the database'); 
```

函数调用：

```
<?php getCount("tweets", $mysqli); ?> 
```

如何将`$mysqli`链接传递给 getCount 函数？目前，我收到此错误：

> 可捕获的致命错误：类 mysqli_result 的对象无法在第 7 行的 lib.php 中转换为字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T04:53:36.020

一切都顺利通过；问题是这样的：

```
echo $tweet_count; 
```

您不能将 MySQL 资源转换为字符串。获取行：

```
$row = mysqli_fetch_row($tweet_count);
echo $row[0]; 
```

# assembly - 将不同大小的寄存器压入堆栈

> ID：11589554
> 
> 赞同：1
> 
> 时间：2012-07-21T04:49:18.747
> 
> 标签：assembly, x86, stack

在查看[Intel 的指令集参考](http://download.intel.com/products/processor/manual/325383.pdf "英特尔指令集参考")时，我注意到用于推送 16 位、32 位和 64 位寄存器的操作码是相同的（`50+rw`分别为`50+rd`、 和`50+rd`）。

如果所有操作码都相同，处理器如何知道它需要将哪个寄存器压入堆栈？如果取决于当前的操作模式，那么如果你`ax`在保护模式下压栈，高16位是`eax`不是也压栈了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:52:32.680

您的假设略有偏差（我不怪您，英特尔手册有时可能非常非常神秘），是的，它们可能具有相同的*基本*操作码，但不同于 32 的大小需要大小覆盖前缀，例如：

```
66:50 PUSH AX
50    PUSH EAX 
```

在这里我们可以看到 16 bix 大小的覆盖前缀 ,`0x66`在`PUSH`'ing时使用`AX`。

这是您无法推送字节寄存器的原因之一，因为没有可用的大小覆盖前缀来执行此操作。

# php - 使用 PHP 检索亚马逊商店的产品列表？

> ID：11589556
> 
> 赞同：0
> 
> 时间：2012-07-21T04:49:24.907
> 
> 标签：php, amazon-web-services, amazon

*如果这是一个重复的问题，我深表歉意，但我没有遇到任何有很大帮助的东西。*

我正在为客户建立一个网站，该网站是他们的 eBay 和亚马逊商店的索引。这需要建立一个当前在每个产品中的产品列表。eBay API 有一个足够简单的 GetSellerItems 调用，但我很难在亚马逊的 AWS 中找到类似的东西。

我简要地查看了产品广告 API，但我不相信这是我需要的。

**基本上，我如何使用 PHP 检索特定亚马逊商店的产品列表？**

感谢您提供任何线索或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:53:50.383

[http://aws.amazon.com/code/Product-Advertising-API/4373](http://aws.amazon.com/code/Product-Advertising-API/4373)我认为这是最受欢迎的之一

还有其他基于 php 的库可在..

[http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1](http://aws.amazon.com/code/Product%20Advertising%20API?_encoding=UTF8&jiveRedirect=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T02:02:16.253

通过在 Amazon Marketplace Web Services (https://developer.amazonservices.com/) 注册并使用报告 API，我最能获得商店的库存。

# c# - 可访问性级别问题

> ID：11589560
> 
> 赞同：1
> 
> 时间：2012-07-21T04:50:35.160
> 
> 标签：c#, overriding, internal, access-modifiers

这不是真正的问题标题，因为我真的不知道问题出在哪里，所以我只是猜测。

故事开始尝试向`dynamic`我的 WCF 服务发送和接收类型，这导致我使用[DLR 动态类型的 WCF 序列化](http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/)！

**SerializableDynamicObject**类

```
public class SerializableDynamicObject : IDynamicMetaObjectProvider
{
    private IDictionary<string,object> dynamicProperties = new Dictionary<string,object>();

    #region IDynamicMetaObjectProvider implementation
    public DynamicMetaObject GetMetaObject (Expression expression)
    {
        return new SerializableDynamicMetaObject(expression, 
            BindingRestrictions.GetInstanceRestriction(expression, this), this);
    }
    #endregion

    #region Helper methods for dynamic meta object support
    internal object setValue(string name, object value) 
    {
        dynamicProperties.Add(name, value);
        return value;
    }

    internal object getValue(string name) 
    {
        object value;
        if(!dynamicProperties.TryGetValue(name, out value)) {
            value = null;
        }
        return value;
    }

    internal IEnumerable<string> getDynamicMemberNames() 
    {
        return dynamicProperties.Keys;
    }
    #endregion
} 
```

**SerializableDynamicMetaObject**类

```
public class SerializableDynamicMetaObject : DynamicMetaObject
{
    Type objType;

    public SerializableDynamicMetaObject(Expression expression, BindingRestrictions restrictions, object value) 
        : base(expression, restrictions, value) 
    {
        objType = value.GetType();
    }

    public override DynamicMetaObject BindGetMember (GetMemberBinder binder)
    {
        var self = this.Expression;
        var dynObj = (SerializableDynamicObject)this.Value;
        var keyExpr = Expression.Constant(binder.Name);
        var getMethod = objType.GetMethod("getValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
                                     getMethod,
                                     keyExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override DynamicMetaObject BindSetMember (SetMemberBinder binder, DynamicMetaObject value)
    {
        var self = this.Expression;
        var keyExpr = Expression.Constant(binder.Name); 
        var valueExpr = Expression.Convert(value.Expression, typeof(object));
        var setMethod = objType.GetMethod("setValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
        setMethod, 
        keyExpr, 
        valueExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override IEnumerable<string> GetDynamicMemberNames ()
    {
        var dynObj = (SerializableDynamicObject)this.Value;
        return dynObj.getDynamicMemberNames();
    }
} 
```

使用这个习惯`SerializableDynamicObject`并解决了很多问题后，我终于停止了一个非常奇怪的行为（至少对我来说）。

@**服务** *伪代码*：

```
dynamic X = new SerializableDynamicObject();
X . Ask = "Stackoverflow";
Ping ( X ); // Send to Client 
```

@**客户端** *伪代码*：

```
// Receiving X SerializableDynamicObject
dynamic Y = X;
Log ( Y . Ask ); // Logging @ Chrome Javascript Console (Silverlight Client) 
```

* * *

这花了 2 天时间才最终幸运地到达它:(

**方案一：**

类中`dynamicProperties`成员的访问修饰符是**public**。`SerializableDynamicObject`

 **客户日志 =`Stackoverflow`

**方案二：**

类中`dynamicProperties`成员的访问修饰符是**私有**的或**受保护**的或其他。`SerializableDynamicObject`

 ****客户日志 =`null`

* * *

**问题 ：**

*   **为什么**更改（`dynamicProperties`成员）访问修饰符时客户端输出不同？
*   **从内部方法（`setValue`，方法）访问成员**是否**`getValue`有限制（相同的类，相同的程序集，相同的命名空间）？**
***   我认为问题来自`SerializableDynamicObject`类**true**吗？还是由于**覆盖**`SerializableDynamicMetaObject`而来自类（`BindSetMember`，方法） ？`BindGetMember`**

 ****我不是那个专业的c#书呆子，所以如果问题太详细太长而无法讨论太琐碎的问题，请原谅我！**********

# jquery-jtable - 如何在 jTable ASP.Net MVC 中添加自定义字段

> ID：11589562
> 
> 赞同：4
> 
> 时间：2012-07-21T04:51:19.843
> 
> 标签：jquery-jtable

我想知道如何在 jTable ASP.net MVC 中添加自定义字段列。我将添加一个图像图标，该图标将弹出一个指向我的自定义页面的链接。

## 解决了我的问题：

```
$('#Container').jtable({
    ...
    actions: {
        ...
    },
    fields: {
        TestField: {
            title: ' ',
            sorting: false,
            display: function (data) {
                return "<a href=\"javascript:open_window('Details'," + data.record.ID + ")\">Open details</a>";
            }
        },
    }
}); 
```

# image - 如何在网页上显示与一张图片不同的图片

> ID：11589566
> 
> 赞同：0
> 
> 时间：2012-07-21T04:51:46.163
> 
> 标签：image

谁能告诉我如何在这张图片的不同位置上显示 Facebook、Google 等的图片-![图片](../Images/13087bae9e5400d69e45d0eedea65f83.png)

像这样的东西-![2]: ![结果图片](../Images/168988a2ff88784af85543c3a37cf08f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:05:04.907

这就是所谓的图像“精灵”。它是将一组图像放入单个图像中。

您必须使用 CSS 来选择应该显示“sprite”文件的哪个部分。查看 W3 学校的此链接以获取使用示例：

[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:04:04.513

**CSS：**

对于最上面的图像

```
#topimage{
  background-image:url('/images/image.png');
  background-position:0 0;
  width:200px;
  height:24px;
} 
```

对于从顶部开始的第二个图像，假设图像每个部分的高度为 24px ..

```
#secondimage{

background-image:url('/images/image.png');
background-position:0 -24px;
    //-24px means the picture is shifted up by 24px so 
    //that the second image from top is visible
width:200px;
height:24px;
} 
```

# fpdf - 警告：mail() [function.mail]：SMTP 服务器响应：552 5.7.0 DATA 标头大小超过允许的最大值

> ID：11589568
> 
> 赞同：1
> 
> 时间：2012-07-21T04:52:23.520
> 
> 标签：fpdf, php, email-headers

我是来自西澳大利亚珀斯的[Fijura Web Design的 Beau。](http://www.fijurawebdesign.com.au/)

我的服务器有问题。我正在尝试创建一个脚本，该脚本将发送带有附件的电子邮件，每当我尝试运行该脚本时，我都会收到以下响应：

> **警告：** mail() [function.mail]：SMTP 服务器响应：552 5.7.0 DATA 标头大小超过第**52** 行**E:\folder\folder\_api\sendreports.php中允许的最大值**

 **我使用的代码是一个经过验证的脚本，因为我在数据中心的共享 Linux 服务器上使用它，但我无法让它在我的 Windows 服务器上运行。我使用的脚本是：

```
 include "../reports/rankings.php"; //this is my FPDF attachment
    $to=$array['email']; //this pulls an email address from an array output by my MySQL Server
    $from="Fijura SEO<seo@fijura.com.au>";
    $subject="SEO Ranking Report - New Data ".date("d M Y");
    $message="New SEO data is available. See attached report.";

// a random hash will be necessary to send mixed content
    $separator = md5(time());

// carriage return type (we use a PHP end of line constant)
    $eol = PHP_EOL;

// attachment name
    $filename = "SEO-Ranking-Report-".date("d-M-Y").".pdf";

// encode data (puts attachment in proper format)
    $pdfdoc = $pdf->Output("", "S");
    $attachment = chunk_split(base64_encode($pdfdoc));

// main header (multipart mandatory)
    $headers  = "From: ".$from.$eol;
    $headers .= "MIME-Version: 1.0".$eol; //If I remove all $header information from this line down the email sends fine, just without the attachment.
    $headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol; 
    $headers .= "Content-Transfer-Encoding: 7bit".$eol;
    $headers .= "This is a MIME encoded message.".$eol.$eol;

// message
    $headers .= "--".$separator.$eol;
    $headers .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
    $headers .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
    $headers .= $message.$eol.$eol;

// attachment
    $headers .= "--".$separator.$eol;
    $headers .= "Content-Type: application/octet-stream; name=\"".$filename."\"".$eol; 
    $headers .= "Content-Transfer-Encoding: base64".$eol;
    $headers .= "Content-Disposition: attachment".$eol.$eol;
    $headers .= $attachment.$eol.$eol;
    $headers .= "--".$separator."--";

// send message
    mail($to,$subject,$message,$headers) or die("Failed"); 
```

随附的 PDF 应如下所示：[示例 SEO 排名报告](http://www.fijurawebdesign.com.au/docs/Sample-SEO-Rankings-Report.pdf)

php.ini 文件也配置如下：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = mail.bigpond.com
; http://php.net/smtp-port
smtp_port = 25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T05:24:00.673

I guess your email will be come back.I have 3 recommendation: 1\. Read careful [The Spamhaus Project](http://www.spamhaus.org/) that it cause your emails aren't spam. 2\. create an *.eml and send it via socket. your .eml contain of your email such as type of header,body, attachment and etc. 3\. don't use mail() function of php language, because some of shared hosting ban it.**

# c++ - “源代码中遇到的通用字符名称”警告的目的是什么？

> ID：11589571
> 
> 赞同：1
> 
> 时间：2012-07-21T04:53:04.337
> 
> 标签：c++, c, visual-c++, literals

> **可能重复：**
> [如何解决有关字符文字的 C4428 Visual C++ 警告的这个实例？](https://stackoverflow.com/questions/7078013/how-to-address-this-instance-of-c4428-visual-c-warning-about-a-character-liter)

如果我编译代码：

```
wchar_t c = L'\u00A0'; 
```

使用 /W4 标志，我收到警告：

> 警告 C4428：在源代码中遇到通用字符名称

我不明白的是，这个警告的目的是什么？它试图防止什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:28:22.060

这与错误无关。

据我了解，警告只是告诉您您使用了字符代码而不是实际字符。对于大多数字符来说，这只是为了让事情更具可读性，尽管在您的情况下，字符看起来与普通空间相同，因此使用代码实际上是一个好主意（甚至更好，我喜欢使用宏或枚举unicode 名称，所以它是 NO_BREAK_SPACE）。

无论哪种方式，人们都可以无休止地争论该警告是否真的对任何事情有用。或者你可以禁用那个特定的（可能还有更多你已经禁用的警告，比如关于未使用的内联等的警告）然后继续。

# php - PHP 在后台获取数据

> ID：11589572
> 
> 赞同：0
> 
> 时间：2012-07-21T04:53:05.263
> 
> 标签：php, cakephp, fetch, cakephp-2.1

我们正在构建一个分析应用程序。这将需要用户等待 30 秒，同时我们从另一个来源获取数据并在将其显示给用户之前进行一些计算。

有什么方法可以在后台获取数据时向用户显示等待页面，而不是在获取数据时让页面加载 30 秒。

任何人都可以阐明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:15:45.370

注意：对于灯箱，您必须包含灯箱 js

```
 <script>
    function onload_wating()
    {
    var syncronize_target=SITE_URL+'your_controllername/action_timer/';

    $.lightbox(syncronize_target, {
                width   : 450,
                height  : 260,
                'modal' : true,
                'onOpen'  : function() {    
                    $(".jquery-lightbox-button-close").css({"visibility":"hidden","display":"none"});
                }
            });
      }

    onload_wating();
    <script> 
```

action_timer.ctp

注意：对于倒计时，你必须包括 jquery countdown -> [http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

```
 <script>
     $(function () {    
        $('#syncronize_header_timer').countdown(
                {
                until:+50,
                format: 'MS',
                onExpiry: ltliftOff
                }); 
    });

        function ltliftOff() {

            $.lightbox().close();
        }

    <script>
 <div id="syncronize_header_timer" ></div> 
```

===========================================

在 onload_wating() 上面这个函数打开灯箱并对你的控制器操作进行 ajax 查询并打开 action_timer.ctp

在 action_timer.ctp 中，我们使用倒数计时器。此计时器计数到 50，然后自动关闭。

在这 50 秒之间，您可以从数据库中检索您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T04:56:55.093

一种方法是使用 AJAX 使用 HTTP GET 请求轮询服务器上的页面。

您可以使用数据库甚至更好的[APC](http://www.phpriot.com/articles/php-ajax-file-uploads/3)

编辑：

由于我们不是在这里讨论文件上传，因此 Session 可能是比 APC_UPLOAD_PROGRESS 更好的选择。会话提供每个用户的存储，这在这里应该是理想的，并且无论如何都可以由不同的存储（如 APC）支持。

# php - preg_match URL 可能带有问号

> ID：11589573
> 
> 赞同：0
> 
> 时间：2012-07-21T04:53:07.483
> 
> 标签：php, regex

所以我有一个字符串（即动态的）。它是 $url.. 现在 URL 字符串有时看起来像这样： [http ://site.com/blah123](http://site.com/blah123)

或者

[http://site.com/blah123?blahblah](http://site.com/blah123?blahblah)

现在我正在做

```
 preg_match("/site.com\/(.*)/",$info[url],$matches);
    $gethash = $matches[1]; 
```

但是当有 ? 标记语句后记。

我怎样才能让它抓住斜线（/）和问号之间的所有内容，当有问号时，但当没有问号时，只需抓住斜线（/）之后的所有内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:55:26.767

只是排除`?`：

```
preg_match('/site\.com\/([^?]*)/', $info[url], $matches); 
```

# jquery - 使用 .load() 刷新 div 内容后 jQuery 函数不起作用

> ID：11589576
> 
> 赞同：2
> 
> 时间：2012-07-21T04:53:28.373
> 
> 标签：jquery, ajax

在处理一些表单数据后，我正在使用“ **.load() ”重新加载“** **#some-div ”的内容。**这工作得很好，“ **#some-div** ”被预期的更新内容刷新。问题是我分配的其他 jQuery 函数（例如下面的“ **.some-trigger** ”）在“ **#some-div** ”中的元素被刷新后都不起作用。非常感谢任何见解。这是我的代码的简化表示。

 ******```
<div id="some-div">
    <a class="some-trigger" href="#">I Won't Work Anymore After I've Been Refreshed</a>
</div>

<script> 
    $('.ajax-form').ajaxForm(function() {  
        $("#some-div").load(location.href+" #some-div>*","");
    });

    $('.some-trigger').someFunction();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:58:36.617

您应该为动态加载的元素委托 click 事件，请尝试以下操作：

```
$("#some-div").on('click', '.some-trigger', function() {
   // do something here
}) 
```******

# python - Python：将大量数组写入文本文件

> ID：11589583
> 
> 赞同：1
> 
> 时间：2012-07-21T04:54:39.293
> 
> 标签：python, matrix, text-files

我是 Python 新手，我有一个解决方案，但它看起来很慢而且很愚蠢，所以我想知道是否有更好的方法？

假设我有一个这样定义的矩阵：

```
mat = [['hello']*4 for x in xrange(3)] 
```

我正在使用此函数将其写入文件：

```
def writeMat(mat, outfile):
  with open(outfile, "w") as f:
    for item in mat:
      f.writelines(str(item).replace('[','').replace(',','').replace('\'','').replace(']','\n'))

writeMat(mat, "temp.txt") 
```

这给出了一个如下所示的文本文件：

```
hello hello hello hello
hello hello hello hello
hello hello hello hello 
```

我正在处理的文件非常大。numpy 中的`savetxt`函数会很棒，但我不想将其存储为 numpy 数组，因为虽然矩阵的大部分由单个字符元素组成，但前几列的长度将是许多字符，而且它似乎我（如果我错了，请纠正我）这意味着整个矩阵将使用比必要更多的内存，因为矩阵中的每个元素都是最大元素的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:10:15.513

如果我正确理解你的问题，你可以这样做：

```
f.writelines(' '.join(row) + '\n' for row in mat) 
```

或者

```
f.write('\n'.join(' '.join(row) for row in mat)) 
```

第一个具有作为生成器表达式的优点，它只生成当前行的串联字符串副本

如果您的矩阵条目不是字符串，您可以这样做：

```
f.writelines(' '.join(str(elem) for elem in row) + '\n' for row in mat) 
```

**编辑**

该`file.writelines()`方法似乎在将整个生成器表达式写入文件之前对其进行评估。因此，以下内容将最大限度地减少您的内存消耗：

```
for row in mat:
    f.write(' '.join(row) + '\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:30:40.003

您可以使用[csv 模块](http://docs.python.org/library/csv)：

```
import csv

with open(outfile, 'wb') as f:
     csv.writer(f, delimiter=' ').writerows(mat) 
```

# css - “文本对齐：对齐；” 内联块元素正确吗？

> ID：11589590
> 
> 赞同：51
> 
> 时间：2012-07-21T04:56:04.863
> 
> 标签：css, text-align, justify

其他一些问题已经解决了如何最好地应用`text-align: justify`以使内联块元素均匀分布……例如，[我如何*真正*证明 HTML+CSS 中的水平菜单是正确的？](https://stackoverflow.com/questions/49536/how-do-i-really-justify-a-horizontal-menu-in-htmlcss)

但是，“清除”行内块元素行的 100% 宽度元素由浏览器赋予其自己的行。`line-height: 0;`我不知道如何在不使用父元素的情况下摆脱那个空的垂直空间。

有关问题的示例，请参阅[this fiddle](http://jsfiddle.net/89bnF/)

对于我使用的解决方案`line-height: 0;`，请参阅[this fiddle](http://jsfiddle.net/89bnF/1/)

我正在使用的解决方案要求将一个新`line-height`的应用于子元素，但之前设置的任何`line-height`内容都会丢失。有人知道更好的解决方案吗？我想避免使用表格，以便在必要时可以包装元素，还想避免使用 flexbox，因为还没有浏览器支持。我也想避免浮动，因为间隔的元素数量是任意的。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-23T19:47:02.973

***更新了下面的“未来”解决方案信息；还没有完全支持。***

## 目前的解决方法（IE8+、FF、Chrome 测试）

[**看到这个小提琴。**](http://jsfiddle.net/89bnF/77/)

**相关CSS**

```
.prevNext {
    text-align: justify;
}

.prevNext a {
    display: inline-block;
    position: relative;
    top: 1.2em; /* your line-height */
}

.prevNext:before{
    content: '';
    display: block;
    width: 100%;
    margin-bottom: -1.2em; /* your line-height */
}

.prevNext:after {
    content: '';
    display: inline-block;
    width: 100%;
} 
```

**解释**

具有负下边距的元素`display: block`上`:before`的 将文本行拉高一个行高，这消除了多余的行，但替换了文本。然后使用元素`position: relative`上`inline-block`的位移被抵消，但不添加额外的线。

尽管 css 本身不能直接访问`line-height`“单位”，但`em`在`margin-bottom`and`top`设置中的使用很容易适应任何`line-height`给定的[乘数值](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)之一。所以`1.2`, `120%`, or在计算*上*`1.2em`都*相等*，这使得在这里使用一个很好的选择，因为即使设置了，那么for和将匹配。规范网站外观的良好编码意味着在某些时候应明确定义，因此如果使用任何乘法器方法，则等效单元将给出与. 如果设置为非*`line-height`*`em``line-height: 1.2``1.2em``margin-bottom``top``line-height``em``line-height``line-height``em`长度，例如`px`，而是可以设置。

使用诸如 LESS 或 SCSS 之类的 css 预处理器绝对拥有一个变量或 mixin 可以帮助保持这些值与适当的`line-height`. `line-height`，并在此处进行了适当的设置。

**更新缩小文本（无空格）问题**

Kubi 的评论指出，删除`<a>`元素之间的空格的 html 缩小[会导致理由失败](http://jsfiddle.net/QaS5J/1/)。标记内的[伪空间`<a>`没有帮助](http://jsfiddle.net/QaS5J/4/)（但这是意料之中的，因为空间发生在`inline-block`元素内部），[`<wbr>`在标记之间添加一个`<a>`没有帮助](http://jsfiddle.net/QaS5J/5/)（可能是因为下一行不需要中断），所以如果需要缩小，然后[解决方案是硬编码的不间断空格字符`&nbsp;`](http://jsfiddle.net/QaS5J/6/)- 其他空格字符（如[细空格](http://jsfiddle.net/QaS5J/8/)和[空格](http://jsfiddle.net/QaS5J/9/)）不起作用（令人惊讶）。

## 接近未来的清洁解决方案

[一个](https://developer.mozilla.org/en/CSS/text-align-last)[`webkit`落后于时代](https://bugs.webkit.org/show_bug.cgi?id=76173)的解决方案（在第一次写这篇文章时）是：

```
.prevNext {
    text-align: justify;
    -moz-text-align-last: justify;
    -webkit-text-align-last: justify; /* not implemented yet, and will not be */
    text-align-last: justify; /* IE */
} 
```

[它适用于 FF 12.0+ 和 IE8+](http://jsfiddle.net/89bnF/44/)（IE7 中的错误）。

对于 Webkit，从第 39 版开始（至少，可能在更早的时候已经悄悄出现）它确实支持它***而无需***`-webkit-`扩展，但前提***是*用户*启用*了实验性功能**（可以在 中完成`chrome://flags/#enable-experimental-web-platform-features`）。有传言说版本 41 或 42 应该得到完全支持。由于它还没有得到无缝支持`webkit`，***它仍然只是部分解决方案***。但是，我认为我应该发布它，因为它可能对某些人有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T01:28:03.303

考虑以下：

```
.prevNext {
    display: table;
    width: 100%
}

.prevNext a {
    display: table-cell;
    text-align: center
} 
```

​（另见[编辑过的小提琴](http://jsfiddle.net/89bnF/79/)。）那是你要找的吗？这种技术的优点是您可以添加更多项目，并且它们都将自动居中。所有现代 Web 浏览器都支持。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T23:02:28.160

首先，我喜欢这种方法`pseudo-element`以保持标记语义。我认为你应该坚持整体方法。这比使用表格、不必要的标记或顶级脚本来获取定位数据要好得多。

对于每个强调`text-align`hacky 的人 - 来吧！最好以牺牲 CSS 为代价使 html 具有语义，反之亦然。

因此，据我了解，您正在尝试实现这种合理的内联块效果，而不必担心`line-height`每次都重置对吗？我认为您只需添加

```
.prevNext *{
    line-height: 1.2;  /* or normal */
} 
```

然后你可以像什么都没发生一样开始编码。`*`如果您担心性能，这是 Paul Irish 关于选择器的引用：

“......除非你连接所有的javascript，把它放在底部，缩小你的css和js，gzip你的所有资产，无损压缩你的所有图像，否则你不能关心*的性能。如果你不是如果没有 90+ 的 Page Speed 分数，现在考虑优化选择器还为时过早。”

希望这可以帮助！

-J科尔莫里森

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T21:45:14.213

试图`text-align`解决这个问题是相当骇人听闻的。该`text-align`属性旨在对齐块的内联内容（特别是文本）——它并不意味着对齐 html 元素。

我了解您正在尝试避免浮动，但在我看来，浮动是完成您正在尝试做的事情的最佳方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T22:13:22.620

在您的示例中，您有`line-height:1.2`，没有单位。这可能会导致问题。如果你不使用边框，你可以给父母和孩子一个`line-height`.`0`

我能想到的其他选择是：

1.  `display:table`在父级和子级上使用`display:table-cell`以模拟类似表格的行为。你将第一个项目左对齐，最后一个右对齐。看到这个[小提琴](http://www.jsbin.com/ehiqun/1/edit)。
2.  使用 javascript 对导航子项进行计数，然后给它们一个均匀分布的宽度。例如。4 个孩子，每人 25% `width`。并分别左右对齐第一个和最后一个项目。
3.  有一种方法可以均匀分布项目，但这是一种复杂的方法，需要在 html 中小心放置一些不间断的空格以及负边距和`text-align:justify`. 您可以尝试将其调整为`nav`元素。[请参见此处](http://www.sitepoint.com/forums/showthread.php?862140-Justify-links-in-horizontal-menu&s=5b5d405f8c94600622fa5af0ecdbd313&p=5139534&viewfull=1#post5139534)的示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T20:05:55.243

你的小提琴非常具体。在我看来，对于你的情况，这个 CSS 会很好用：

```
.prevNext {
    border: 1px solid #ccc;
    position: relative;
    height: 1.5em;
}

.prevNext a {
    display: block;
    position: absolute;
    top: 0;
}

.prevNext a:first-child {
    left: 0;
    text-align: left;
}
.prevNext a:last-child {
    right: 0;
    text-align: right;
}
​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-08T18:16:58.607

正如@Scotts 所说，以下内容已在 Chrome 中实现，没有`-webkit`part ，我真的很喜欢 btw，特别是因为我们需要尽快摆脱`-browser-specific-shǐt`真正的。

```
.prevNext {
    text-align: justify;
    -moz-text-align-last: justify;
    -webkit-text-align-last: justify; /* not implemented yet, and will not be */
    text-align-last: justify; /* IE + Chrome */
} 
```

**注意：**虽然 Safari 和 Opera[还不支持它](http://caniuse.com/#search=text-align-last)（08-SEPT-16）。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-07-21T20:50:03.897

我认为最好的方法是使用特定的`class`/创建可点击元素，`id`然后相应地分配`float:left`或`float:right`。希望有帮助。

# stylecop - 强制构造函数摘要说“初始化 班级”？

> ID：11589597
> 
> 赞同：1
> 
> 时间：2012-07-21T04:57:41.613
> 
> 标签：stylecop

我真的很想了解这条规则的意义所在。构造函数“初始化类的新实例”不是很明显吗？

感觉和强制方法摘要说“这是一个方法，它会做某事，返回并可能返回一个值”是一样的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T12:32:39.980

IMO，这主要是关于构造函数摘要的一致性，而不是任何特定构造函数摘要的措辞。如果您要求构造函数有摘要但不检查一致的措辞，您最终会得到各种风格的描述。这并不完全是世界末日，但它会惹恼 API 用户。

如果您有理由保持启用规则并想要一种简单的方法来生成标准构造函数摘要，您可能需要查看[GhostDoc](http://submain.com/products/ghostdoc.aspx)。

# c++ - Direct X & HLSL - 正常重新计算

> ID：11589599
> 
> 赞同：2
> 
> 时间：2012-07-21T04:57:47.547
> 
> 标签：c++, game-engine, hlsl, directx-9

我正在使用 HLSL 和 DirectX 9。我正在尝试重新计算网格的法线，以便 HLSL 由于变换网格而接收更新的法线。什么方法最好做到这一点......而且......D3DXComputeNormals 对我不起作用，因为我不使用 FVF_NORMAL 作为顶点声明......我声明顶点格式如下：

```
const D3DVERTEXELEMENT9 dec[4] =
{
  {0, 0,  D3DDECLTYPE_FLOAT3, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_POSITION,0},
  {0, 12, D3DDECLTYPE_FLOAT3, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_NORMAL,  0},
  {0, 24, D3DDECLTYPE_FLOAT2, D3DDECLMETHOD_DEFAULT, D3DDECLUSAGE_TEXCOORD,0},
  D3DDECL_END()
}; 
```

我知道如何访问邻接数据和顶点缓冲区，但我不确定使用什么方法来正确关联顶点及其法线与面......任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:42:30.670

更新 CPU 上的法线并将其每帧发送到 GPU 并不是一个好主意。那会毁了表演。你真正应该做的是在顶点着色器中计算转换后的法线，就像你对位置所做的那样。HLSL 代码如下所示：

```
float4x4 mWorldView; // World * View
float4x4 mWorldViewProj; // World * View * Proj

struct VS_OUTPUT
{
    float4 position : POSITION;
    float2 tex : TEXCOORD0;
    float3 normalVS : TEXCOORD1; // view-space normal
};

// Vertex Shader
VS_OUTPUT VS(float3 position : POSITION,
             float3 normal   : NORMAL,
             float2 tex      : TEXCOORD0)
{
    VS_OUTPUT out;

    // transform the position
    out.position = mul(float4(position, 1), mWorldViewProj);

    // pass the texture coordinates to the pixel shader
    out.tex = tex;

    // calculate the transformed normal
    float3 n = mul(normal, (float3x3)mWorldView); // calculate view-space normal
    // and use it for vertex lighting
    // ... some shading calculations ...
    // or pass it to the pixel shader and perform per-pixel lighting
    out.normalVS = n;

    // output
    return out;
} 
```

# java - 在android中确定屏幕颜色深度

> ID：11589607
> 
> 赞同：1
> 
> 时间：2012-07-21T04:59:29.067
> 
> 标签：java, android, bitmap, color-depth

我正在尝试确定屏幕的颜色深度，以便在必要时将一些图像转换为 RGB565。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:26:24.423

试试`getWindowManager().getDefaultDisplay().getPixelFormat()`。见[getPixelFormat()](http://developer.android.com/reference/android/view/Display.html#getPixelFormat%28%29) , [PixelFormat](http://developer.android.com/reference/android/graphics/PixelFormat.html)

# python - 在 Python 中将函数分配给具有函数名称的字符串

> ID：11589611
> 
> 赞同：1
> 
> 时间：2012-07-21T05:00:07.420
> 
> 标签：python

假设我有一个分配给变量的函数，`func`. `func`包含函数本身（即`print func`返回`<function func at 0x103f25410>`

我有一个简单的课程：

```
class Item():
    def __init__(self, data):
    # init code
        pass
    def func(self):
        pass
    def dunc(self):
        pass 
```

假设在我`__init__`收到并可以访问它作为. 我可以将其分配给.`func``data``data.func``self.consume = data.func`

但是，如果我有一个数据函数字典呢？

```
{"func" : <function func at 0x103f25410>, "dunk" : <function dunk at 0x103f25410>} 
```

无论如何我可以做类似的事情`self.key = data[key]`吗？换句话说，分配`func`和`dunc`与字典中的数据，但不是明确地必须`self.func`或`self.dunc`每个分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:03:52.753

如果我正确理解您的问题，您可以执行以下操作：

```
def __init__(self, data):
    for name, func in data.items():
        setattr(self, name, func) 
```

然后，您可以参考`self.func`or `self.dunc`（或 中的任何其他内容`data`）。

# java - 用 Java 创建一个 torrent 客户端？

> ID：11589615
> 
> 赞同：3
> 
> 时间：2012-07-21T05:00:37.810
> 
> 标签：java, networking, p2p, bittorrent

> **可能重复：**
> [Java BitTorrent 库](https://stackoverflow.com/questions/944530/java-bittorrent-library)

我想了解更多关于在 java 中创建 torrent 客户端的信息。我在这里问这个问题是因为我不知道我应该从哪个方向开始为 torrent 客户端编程。我想我需要一个

1.  插座
2.  网络洪流使用知识

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T05:08:40.793

Java 套接字 API： [http ://docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

BitTorrent 官方协议规范： http: [//www.bittorrent.org/beps/bep_0003.html](http://www.bittorrent.org/beps/bep_0003.html)

# ruby-on-rails - 附件的Rails 3 Dragonfly uid是正确的，但文件本身是nil

> ID：11589617
> 
> 赞同：1
> 
> 时间：2012-07-21T05:00:52.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, dragonfly-gem

我使用 Dragonfly 和 Amazon s3 进行图像上传。由于某种原因，当我上传图片时，它保存到亚马逊上的正确文件夹，并且 uid 是正确的路径，但它没有显示出来！

每次我打电话`user.avatar`都是零，即使`user.avatar_uid`是正确的。如何让图像正确显示`user.avatar.remote_url`？

```
class User < ActiveRecord::Base

  image_accessor :avatar do
    storage_path { |file| 
      "#{self[:id]}/avatar/pic#{rand(1000)}.#{file.format.to_s.downcase}" 
    }
    after_assign { |a| 
      self.avatar = a.jpg.thumb('300x300#n') if (VALID_PHOTO_TYPES.include? self.avatar.format)
    }
  end  

  attr_accessible :avatar_url, :retained_avatar, :avatar
  attr_reader :id, :avatar_uid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:00:52.590

问题在于`:avatar_uid`attr_reader、attr_writer、attr_accessible 中的任何一个。

如果你的模型中有这个，它就会坏掉。假设任何带有 Dragonfly 的模型都不存在 *_uid 并且仅使用 user.avatar。

# ember.js - Emberjs 和验证

> ID：11589619
> 
> 赞同：25
> 
> 时间：2012-07-21T05:01:06.007
> 
> 标签：ember.js

人们如何处理客户端验证和余烬？

是否有任何开箱即用的插件或处理验证的插件，或者人们只是自己滚动？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T09:16:22.063

[https://github.com/dockyard/ember-validations](https://github.com/dockyard/ember-validations)可能有用。它还连接到[Ember-easy-form](http://reefpoints.dockyard.com/ember/2013/02/21/ember-easy-form.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-06T06:24:01.110

我会扩展 Ember.TextField （或您验证的任何输入类型）并将 classBinding 与计算属性一起使用。这是示例：http: [//jsfiddle.net/caligoanimus/7UNRd/](http://jsfiddle.net/caligoanimus/7UNRd/)

模板：

```
<script type="text/x-handlebars" >
    {{view App.AlphaNumField
        placeholder="alpha-numeric data only"
        valueBinding="App.alphaNumInput"}}
</script> 
```

应用：

```
App = Ember.Application.create({
    AlphaNumField:  Ember.TextField.extend({
        isValid: function() {
            return /^[a-z0-9]+$/i.test(this.get('value'));
        }.property('value'),
        classNameBindings: 'isValid:valid:invalid'
    })
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-16T15:19:19.477

如果您使用引导程序，另一个完全受支持且非常合乎逻辑的选项是使用[bootstrap-validation plugin](http://1000hz.github.io/bootstrap-validator/#validator)。在 ember (ember-cli) 中，这应该使用 bower 安装：

```
bower install --save bootstrap-validation 
```

然后在 ember-cli-build 中，您必须导入依赖项：

```
//bootstrap-validator
  app.import('bower_components/bootstrap-validator/dist/validator.js');
  app.import('bower_components/bootstrap-validator/dist/validator.min.js'); 
```

该解决方案允许您在 html 级别进行验证，让引导程序完成“脏”工作。对于标准验证，这将简单而轻松地完成工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-16T12:45:20.350

我一直在以与@caligoanimus 非常相似的方式处理它，但验证文本框外的焦点并附加错误消息。

代码：

```
App.TextFieldEmpty = Ember.TextField.extend({
   focusOut: function() {
      var valid = this.get('value') ? valid = true : valid = false;
      this.$().next(".err").remove();

      if(!valid){
        this.$().addClass("invalid").after("<span class='err'>This field is required</span>");
      } else {
        this.$().removeClass("invalid")
      }
   }
}); 
```

模板：

```
<script type="text/x-handlebars">
   {{view App.TextFieldEmpty}}
</script> 
```

JSBIN：

[http://jsbin.com/uriroYO/6/edit?html,js,输出](http://jsbin.com/uriroYO/6/edit?html,js,output)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-18T14:45:07.707

我在[jQuery Validate 方面取得了很大的成功：](http://jqueryvalidation.org/)

```
App.MyView = Ember.View.extend({
    templateName: 'my-form-template',
    didInsertElement: function(){
        $("#myForm").validate({
            rules:{
                fname:{
                    required: true,
                    maxlength: 50,
                },
                lname:{
                    required: true,
                    maxlength: 50,
                },
                email: {
                    required: true,
                    email: true,
                    maxlength: 200,
                },
            },
            messages: {
                email: { 
                    email: "Enter a valid email address.",
                },
            },
        });
    }
}); 
```

只需使用 Ember 输入助手，它就使我的表单验证非常干净。您可以使用 jQuery Validate 脚本并将其作为函数放入 .js 文件中，然后在 didInsertElement 上调用它。

jQuery Validate 在您的字段下方添加错误消息以及与规则相关的消息，还允许您通过 .valid() 方法从您的任何操作或事件触发验证。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-31T03:55:31.683

我们创建了自己的文本字段，这些文本字段会在聚焦时引发验证错误，并且其他事件和其他文本字段会扩展它们：

```
App.PhoneNumberField = App.TextField.extend({
    validate: function(value) {
        var self = this.$('input');
        var id = self.attr("id");
        var e164PhoneNumber = formatE164("AU",value);
        var valid = true;
        if(self.val().trim().length == 0 ){
            valid = true;
        }else{
            valid = isValidNumber(e164PhoneNumber);
        }
        if (!valid) {
            self.trigger(Storm.invalidInputEvent(id));
            this.setErrorMessage("error","Phone Number does not look right");
        }else {
            self.trigger(Storm.validInputEvent(id));
            this.clearMessages();
        }
    },

    keyUp: function(evt) {
        if(evt.keyCode >= 37 && evt.keyCode <=40)
        {
          return;
        }
        var textValue = this.$("input").val();
        var input = this.$().find('input');
        var formattedNumber = this.formatInput(textValue);
        input.val(formattedNumber);
        this.set('data',formattedNumber);
    },

    value: function() {
        var phoneNumber = this.get('data');
        if (phoneNumber) {
            return phoneNumber;
        } else {
            return "";
        }
    }.property('data'),

    data: null,

    placeholder: function() {
        return "";
    }.property('placeholder'),

    formatInput: function(textValue){
        var formattedPhoneNumber = formatLocal("AU",textValue);
        return formattedPhoneNumber;
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T15:22:35.643

我会使用模型/持久层，它使用传统的“错误”对象来保存模型上的验证错误。

由于 Ember 在观察变化方面表现出色，我会观察变化的错误对象以确定是否应该显示验证消息。

在我当前的设置中，我使用[Tower.js](http://towerjs.org/)作为框架，因为它使用 Ember 作为视图层，并且具有强大的模型/持久层。该层允许我在模型级别定义验证。每次我尝试持久化模型时，都会对其进行验证并引发错误。在我看来，此错误会中止“理想”路径并且不会继续执行工作流，而是会在模板中呈现验证错误。

# delphi - RAD Studio 调试器引发异常并频繁停止

> ID：11589620
> 
> 赞同：3
> 
> 时间：2012-07-21T05:01:15.757
> 
> 标签：delphi, c++builder, firemonkey

通过 RAD Studio 调试 Mac 应用程序时，调试器会引发异常并频繁停止并显示消息：“无效的远程 api”；我也向质量中心报告了这个问题。我在[这里](http://doxy.phphost.biz/MacBCBCrash.swf)制作了一个描述符视频。我在 vmware 工作站上使用 Windows 7 作为主机操作系统和 osx 10.6 或 10.7。

有人对此有想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T06:18:10.057

看来这个bug终于在XE6中修复了！

# python - 没有名为配置文件的模块

> ID：11589622
> 
> 赞同：0
> 
> 时间：2012-07-21T05:02:40.907
> 
> 标签：python

当我尝试在 z3950 模块的帮助下使用 python 从国会图书馆中搜索 bookdetails 时，出现以下错误

```
from PyZ3950 import zoom

File "/usr/local/lib/python2.6/dist-packages/PyZ3950/zoom.py", line 72, in <module>
    from PyZ3950 import z3950
  File "/usr/local/lib/python2.6/dist-packages/PyZ3950/z3950.py", line 72, in <module>
    from PyZ3950 import asn1
  File "/usr/local/lib/python2.6/dist-packages/PyZ3950/asn1.py", line 2009, in <module>
    import profile
ImportError: No module named profile 
```

请帮我解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:08:33.370

[这篇博](http://www.kindle-maps.com/blog/profiling-python-in-ubuntu.html)文表明它不是 Ubuntu 11.04 上 Python 默认安装的一部分。它说：

> 您需要先[启用多元宇宙存储库](https://help.ubuntu.com/community/Repositories/Ubuntu#Ubuntu_Software_Tab)。
> 
> 解决方案是安装`python-profiler`包，即执行以下命令：
> 
> ```
> sudo aptitude install python-profiler 
> ```
> 
> 然后你可以正常使用python配置文件。

# iphone - NSInputStream 使用本地文件，而不是从服务器拉下的文件

> ID：11589623
> 
> 赞同：0
> 
> 时间：2012-07-21T05:02:40.237
> 
> 标签：iphone, ios, yaml, nsinputstream

嘿伙计们，我正在从网络服务器上下载一个 yaml 文件。我`NSInputStream`的本地 yaml 文件效果很好（使用 file://filename.yaml url 方案）

这是相关的代码片段：

```
NSInputStream * stream = [[NSInputStream alloc] initWithURL:yamlURL]; 
```

其中 yaml url 类似于 http://myip:8000/assets/test.yaml 在浏览器中打开只会导致文件下载...

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T10:46:00.477

我为时已晚，但我刚刚解决了这个确切的问题，所以这里是：

根据文档，

```
The NSStream class does not support connecting to a remote host on iOS. 
```

听起来很愚蠢，initWithURL 仅适用于本地文件。但是有一个简单的解决方法...

苹果的完整解释和代码示例可以在这里找到： [https ://developer.apple.com/library/mac/documentation/cocoa/Conceptual/Streams/Articles/NetworkStreams.html#//apple_ref/doc/uid/20002277- BCIDFCDI](https://developer.apple.com/library/mac/documentation/cocoa/Conceptual/Streams/Articles/NetworkStreams.html#//apple_ref/doc/uid/20002277-BCIDFCDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:13:29.490

Is there anything you're doing with the *stream, After you initWithURL?

If you are taking the content from the InputStream inited with the local file, you would need to be creating a NSOutputStream to take the InputStream and redirect it to Safari. So I don't think just initWithURL: call with the url will tell you much, but the call to open the http:// url in safari will try to determine the content-type and try to output the file. But I don't think safari would be able to display the contents if it was a mulit-part mime yaml file.

# css - 防止部分覆盖的 div 出现在固定 div 上

> ID：11589627
> 
> 赞同：0
> 
> 时间：2012-07-21T05:03:29.840
> 
> 标签：css

我目前有一个固定的 div，它充当页面顶部的搜索栏，然后是容器 div 中的类似平铺的 div，用于在鼠标悬停时改变不透明度的电影海报。但是，如果这些电影海报 div 之一被搜索栏 div 部分隐藏，它们会出现在搜索栏 div 的顶部，如下所示：

![在此处输入图像描述](../Images/6b4050dfbc7331bc0bce5dd31909dd18.png)

有没有办法防止这种情况，但保持可见部分的不透明度变化？

```
.poster
{
    float: left;
    margin-left: 10px;
    margin-top: 10px;
    padding: 2px;
    cursor: pointer;

    opacity: 1;
    transition: opacity .15s ease-in-out;
    -moz-transition: opacity .15s ease-in-out;
    -webkit-transition: opacity .15s ease-in-out;
    -o-transition: opacity .15s ease-in-out;
}

.poster:hover
{
    opacity: 0.65;
} 
```

灰色条的 div 和输入框所在的 div 有这样的功能，以防止它们随页面滚动：

```
position: fixed; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:07:34.860

您可以使用 z-index 属性将一个 div 设置在另一个之上。较高的 z-index 编号将显示在较低的 z-index 编号上方。

# c# - Reflection.Emit 私有字段/属性访问

> ID：11589628
> 
> 赞同：5
> 
> 时间：2012-07-21T05:03:34.453
> 
> 标签：c#

我正在使用 Reflection.Emit 为动态字段生成吸气剂。到目前为止，我的代码在我测试过的所有情况下都有效，除非该字段不公开。当该字段不公开时，调用委托会引发“System.NullReferenceException：对象引用未设置为对象的实例。”

我正在使用此代码生成：（字段是 FieldInfo）

```
DynamicMethod dm = new DynamicMethod(String.Concat ("_Set", field.Name, "_"), typeof(void),
                                             new Type[] { typeof(object), typeof(object) },
                                             field.DeclaringType, true);
ILGenerator generator = dm.GetILGenerator ();

generator.Emit (OpCodes.Ldarg_0);
generator.Emit (OpCodes.Ldarg_1);
if (field.FieldType.IsValueType)
    generator.Emit (OpCodes.Unbox_Any, field.FieldType);
generator.Emit (OpCodes.Stfld, field);
generator.Emit (OpCodes.Ret);

return (Action<object, object>)dm.CreateDelegate (typeof(Action<object, object>)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:13:38.540

您是否使用正确的参数调用？对于私有字段，您需要指定 BindingFlags.NonPublic，例如：

```
var field = this.GetType().GetField("someField", BindingFlags.NonPublic | BindingFlags.Instance); 
```

或者

```
var field = this.GetType().GetField("someField", BindingFlags.NonPublic | BindingFlags.Static); 
```

您可以发布引发异常的程序的完整示例吗？

# stored-procedures - ADO.NET 的存储过程错误

> ID：11589632
> 
> 赞同：0
> 
> 时间：2012-07-21T05:04:06.607
> 
> 标签：stored-procedures, ado.net

我这里有个情况。我的存储过程完全按照我在 SQL Server 中想要的方式工作。

但是，我无法在 ADO.NET 中实现相同的功能。

这是我的存储过程：

```
Create Procedure bridge_Type(
@EmpID INT,
@Name   varchar(50),
@Mob2   numeric(10,0),
@Email  varchar(50),
@Type   varchar(50)
)
AS 
DECLARE @TYPEID int
Set NOCOUNT OFF

BEGIN TRANSACTION

INSERT INTO dbo.EmpType VALUES (@Type)

SET @TYPEID = SCOPE_IDENTITY()

IF @@ERROR <> 0 
BEGIN     
ROLLBACK     
RETURN 
END 

Insert into dbo.Emp VALUES (@EmpID, @Name, @Mob2, @Email, @TYPEID)
IF @@ERROR <> 0
BEGIN 
ROLLBACK
RETURN
END

COMMIT 
```

这是我用于简单注册过程的 ADO.NET 连接。

```
public void InsertInfo()
{
        String empdb = @"Data Source=USER-PC\SQLEXPRESS;Initial Catalog=EmployeeDB;Integrated Security=True";
        SqlConnection conn = new SqlConnection(empdb);
        SqlCommand cmd = new SqlCommand("bridge_Type", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        try
        {
            conn.Open();
            /*cmd.Parameters.Add(new SqlParameter("@EmpID", TextBox1.Text));
            cmd.Parameters.Add(new SqlParameter("@Name", TextBox2.Text));
            cmd.Parameters.Add(new SqlParameter("@Mob2", TextBox3.Text));
            cmd.Parameters.Add(new SqlParameter("@Email", TextBox4.Text));
            cmd.Parameters.Add(new SqlParameter("@Emptype", dropdown1.SelectedValue));
            cmd.Parameters.Add(new SqlParameter("@Emptype", SqlDbType.VarChar, 50));
            cmd.Parameters("@Emptype").Value = dropdown1.SelectedValue; */

            cmd.Parameters.Add(new SqlParameter("@EmpID", SqlDbType.Int));
            cmd.Parameters["@EmpID"].Value = Convert.ToInt32(TextBox1.Text);
            cmd.Parameters.Add(new SqlParameter("@Name", SqlDbType.VarChar, 50));
            cmd.Parameters["@Name"].Value = TextBox2.Text;
            cmd.Parameters.Add(new SqlParameter("@Mob2", SqlDbType.Int));
            cmd.Parameters["@Mob2"].Value = TextBox3.Text;
            cmd.Parameters.Add(new SqlParameter("@Email", SqlDbType.VarChar, 50));
            cmd.Parameters["@Email"].Value = TextBox4.Text;
            cmd.Parameters.Add(new SqlParameter("@Emptype", SqlDbType.VarChar, 50));
            cmd.Parameters["@Emptype"].Value = dropdown1.SelectedValue;

            cmd.ExecuteNonQuery();
        }
        catch (System.Data.SqlClient.SqlException ex)
        {
            string msg = "Insert Error:";
            msg += ex.Message;
            throw new Exception(msg);
        }
        finally
        {
            if (conn != null)
            {
                conn.Close();
            }
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        InsertInfo();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:12:00.143

看起来您错过了 @Mob2 参数中到 int 的转换：

```
cmd.Parameters.Add(new SqlParameter("@Mob2", SqlDbType.Int));
cmd.Parameters["@Mob2"].Value = Convert.ToInt32(TextBox3.Text); 
```

编辑：感谢大卫看到这个。您添加的最后一个参数称为@Emptype，但存储过程期望它被命名为@Type。

# facebook-graph-api - Open Graph：如何创建自定义对象并将自定义操作与它们关联？

> ID：11589633
> 
> 赞同：2
> 
> 时间：2012-07-21T05:05:02.097
> 
> 标签：facebook-graph-api, object, facebook-opengraph

我正在尝试创建一个自定义对象 ( `objnew`) 并尝试将操作与它关联 ( `actnew`)。到目前为止一切都很好。

现在，我必须编写代码，在其中创建类型对象`objnew`和相关操作。

如何创建对象？我得到了将其发布到 Facebook 的示例代码：

```
curl -F 'access_token=XXXXXXXXXXXXXX' \
 -F 'newobj=http://samples.ogp.me/467564296596508' \
    'https://graph.facebook.com/me/myapp:newact' 
```

现在这`newobj`是一个参考。如何创建它并获取 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T09:58:08.427

***请注意以下编辑！***

> 现在，我想添加用户在发布故事时可以参考的多个食谱。我怎样才能使用 API 做到这一点？

您*不*使用 API 执行此操作。

**Open Graph 对象基本上只是引用具有适当 OG 元标记集的页面的 URL。**

因此，只需在您的网站上设置这些 URL - 如果您愿意，您可以手动执行此操作，或者使其成为数据库驱动的，其中 URL 中只有一个参数，让您的脚本从某个表中提取适当的数据并拥有它用该数据填充 OG 元标记。

然后，在发布操作时，您只需将其中一个对象的 URL*作为*参数提供 - Facebook 会完成其余的工作，它会“抓取” URL 并从那里提取数据。

你现在做的方式，使用`http://samples.ogp.me/467564296596508`- 好吧，就像 URL 所说的那样，基本上只是为了*samples*。发布“真实”操作时，对象也应该是*真实*对象——即您网站上的对象，其 URL 指向您的网站。

并使用[Facebook 调试器](https://developers.facebook.com/tools/debug)检查您的对象（并修复它可能发现的任何问题）——这有助于防止您作为该主题的初学者可能遇到的问题。

* * *

**编辑：**自从我最初写这篇文章以来，情况发生了变化——Facebook 现在允许您通过 API 创建对象，这些对象可以属于您的应用程序或特定用户。

有关完整文档，请参阅：[https ://developers.facebook.com/docs/sharing/opengraph/object-api](https://developers.facebook.com/docs/sharing/opengraph/object-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T15:46:45.840

如果您希望您的故事内容托管在您的网站上并让 Facebook 抓取工具创建对象，那么按照 CBroe 的建议进行操作会非常有效。

我只是想补充一点，可以通过调用图形 api 来创建对象来让 Facebook 托管您的对象。请注意，这将为调用 api 的 Facebook 用户创建一个活动日志条目。

**以下是如何使用 api（在 javascrip 中）创建对象的示例**：

```
FB.api(
  'me/objects/yourappdomain:objectypename',
  'post',
  {
    og:title: title,
    og:type: yourappdomain:objectypename,
    yourappdomain:customobjectpropertyname: propertyvalue,
  },
  function(response) {
    // save the created object's id returned as you will need to specify it when creating your storie's action
  }
); 
```

要获取显示如何为您的自定义对象类型执行此操作的示例代码，请转到您应用的 Facebook 开发人员页面。单击 Open Graph -> Object Types -> Get Code（在您要创建的对象类型旁边）。

[请参阅 Facebook Developer 上的使用对象](https://developers.facebook.com/docs/sharing/opengraph/using-objects)

# ruby-on-rails - 在瘦服务器上的 Rails 应用程序中启用 https

> ID：11589636
> 
> 赞同：17
> 
> 时间：2012-07-21T05:05:34.433
> 
> 标签：ruby-on-rails, ssl, https, thin

我有一个在 heroku 上运行瘦服务器的 rails 应用程序。它目前使用http。我想使用 https 进行机器人开发和生产。我从哪里开始做这件事。

我看过这个[railscast](http://railscasts.com/episodes/357-adding-ssl)，他们展示了如何使用 POW 服务器。我不想使用 POW 服务器，我想使用瘦服务器。

我也看过[这里](http://www.buildingwebapps.com/articles/79189-using-ssl-in-rails-applications)：但在这里他们假设你已经打开了 ssl insatlled。

我还没有找到任何展示如何从头开始在瘦服务器上运行 https 的地方。

我想知道是否有人有任何建议。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-21T05:22:39.620

Try this:

```
$ thin start --ssl 
```

You will need a separate instance if you want both ssl and non-ssl ports.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-02T12:13:40.183

我不知道你是否需要它，但这对我有帮助：

```
 thin start --ssl --ssl-verify --ssl-key-file ssllocal/server.key
--ssl-cert-file ssllocal/server.crt 
```

编辑 ssl 密钥和 ssl 字段的路径。例如，我的密钥在 paypal 文件夹中，所以命令是

```
 thin start --ssl --ssl-verify --ssl-key-file paypal/server.key
--ssl-cert-file paypal/server.crt 
```

如果您遇到问题，可以查看这篇文章 - [Thin with SSL support and ruby​​-debug](https://stackoverflow.com/questions/8753566/thin-with-ssl-support-and-ruby-debug)。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-06T09:24:49.910

You should to use **thin** to do it:

```
$ sudo apt-get install thin 
```

And add this line in config/application.rb

```
config.force_ssl = true 
```

Then run app on thin with command line:

```
$ thin start --ssl 
```

# javascript - 使用 Javascript 在黑莓设备上播放视频

> ID：11589641
> 
> 赞同：2
> 
> 时间：2012-07-21T05:06:44.987
> 
> 标签：javascript, jquery, blackberry, cordova

我正在使用 Phonegap 为黑莓设备开发一个应用程序。我需要在我的应用程序中播放视频。是否可以使用 Javascript 播放视频？如果是，请告诉它如何完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T05:17:55.507

如果您的目标是 BB6 及更高版本，则可以使用 HTML5 视频播放器。我最喜欢的库是[mediaelement.js](http://mediaelementjs.com/)，但[这里是](http://html5video.org/wiki/Property%3aBlackberry)兼容库的完整列表。

# android - Android 中的 SMS 发送报告

> ID：11589642
> 
> 赞同：12
> 
> 时间：2012-07-21T05:06:45.933
> 
> 标签：android

我想获得 SMS 发送报告 我正在尝试很多示例，但是，如果我的余额为 0，当我的代码中发送的 SMS 未显示 SMS 发送报告失败时，一个流程不显示发送报告，否则显示报告，如无服务等。我想要当我的余额为 0 时，查找 SMS 发送失败的发送报告。

帮我写任何代码！

提前致谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-21T05:39:24.127

```
BroadcastReceiver sendBroadcastReceiver = new SentReceiver();
    BroadcastReceiver deliveryBroadcastReciever = new DeliverReceiver();;

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();

        try {
            unregisterReceiver(sendBroadcastReceiver);
            unregisterReceiver(deliveryBroadcastReciever);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    try {
        unregisterReceiver(sendBroadcastReceiver);
        unregisterReceiver(deliveryBroadcastReciever);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

    send_sms.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (textView.getText().toString().equals("")
                        | textView.getText().toString().equals(null)) {
                    Toast.makeText(SendSMS.this, enter_ph_no, Toast.LENGTH_LONG)
                            .show();
                } else {

                        sendSMS(textView.getText().toString(), "sms_content");
                        finish();

                }

            }
        });
private void sendSMS(String phoneNumber, String message) {
        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

        registerReceiver(sendBroadcastReceiver, new IntentFilter(SENT));

        registerReceiver(deliveryBroadcastReciever, new IntentFilter(DELIVERED));
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);

    }

    class DeliverReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(getBaseContext(), sms_delivered,
                        Toast.LENGTH_SHORT).show();
                break;
            case Activity.RESULT_CANCELED:
                Toast.makeText(getBaseContext(), sms_not_delivered,
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }
    }

    class SentReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Toast.makeText(getBaseContext(), sms_sent, Toast.LENGTH_SHORT)
                        .show();
                startActivity(new Intent(SendSMS.this, ChooseOption.class));
                overridePendingTransition(R.anim.animation, R.anim.animation2);
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                Toast.makeText(getBaseContext(), "Generic failure",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(getBaseContext(), "No service",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_SHORT)
                        .show();
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                Toast.makeText(getBaseContext(), "Radio off",
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }
    } 
```

# google-apps-script - 需要使用 Gmail 应用脚本帮助的 Gmail 自动转发

> ID：11589646
> 
> 赞同：0
> 
> 时间：2012-07-21T05:07:42.587
> 
> 标签：google-apps-script

我正在使用 Gmail App 脚本将我的自定义标签电子邮件自动转发给两个不同的发件人，但我遇到了一些我想在这里讨论的问题。

在程序开始时，我获得该标签中的线程数，而不是获取消息并将该消息转发到两封不同的电子邮件，之后我将其标记为已读消息，而不是删除其标签。我为此代码使用了及时驱动的触发器。

假设用户“emailuser1”的电子邮件带有自定义标签，并且该用户之前有五个对话，这些对话之前已阅读且没有标签（这意味着现在用户“emailuser1”有一个未读+五个已读电子邮件）。

我的程序类似于以下程序 [http://www.labnol.org/internet/auto-forward-gmail-messages/20665/](http://www.labnol.org/internet/auto-forward-gmail-messages/20665/)

[https://docs.google.com/spreadsheet/ccc?key=0Aofk8L6brI_edFUyaElHeDBKbVBJU3ppXzh1YjVTZUE](https://docs.google.com/spreadsheet/ccc?key=0Aofk8L6brI_edFUyaElHeDBKbVBJU3ppXzh1YjVTZUE)

问题在于，该程序发送 6 封电子邮件（1 封未读 + 5 封已读邮件）而不是仅 1 封电子邮件。下次当用户“emailuser1”邮件来时，程序将发送 7 封邮件。

为了避免这种多次发送，我尝试了一种新技术，将阅读和转发的邮件移动到垃圾文件夹，但问题仍然存在。

同样在 Gmail 常规设置中，我将转换视图标记为关闭。

知道如何解决这个问题，我已经搜索了很多不同的 Gmail 应用程序命令功能，但没有得到正确的响应。

谢谢和问候，狮子座

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:44:59.117

我认为这与 Gmail 将来自同一地址的所有邮件整理到一个线程中这一事实有关，即使您在首选项中将对话视图设置为关闭。

这会导致一个问题，因为到目前为止我还没有看到一种方法来查看将哪个标签应用于消息而不是整个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T00:09:04.233

让脚本从排除所有标记为“已转发”的电子邮件的搜索开始，并让它用该标签标记它转发的每封电子邮件怎么样。

# php - Sqlite > 具有多个值的单列

> ID：11589647
> 
> 赞同：0
> 
> 时间：2012-07-21T05:07:47.473
> 
> 标签：php, sqlite

在 sql 数据库的单个单元格中使用多个值的正确方法是什么。我正在尝试为访客跟踪编写代码，这就是我要跟踪的内容

IP1：index.php
contact.php
sssa.php
IP2：aaduau.php
ssssau.php
等等

我想为一个 IP 地址插入不同的页面名称。什么是正确的算法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:14:22.217

我实际上建议在表中使用两列：`ip_address`, `page_name`.

插入时，您将执行类似以下操作：

```
$ip = $_SERVER['REMOTE_ADDR'];
$page = mysql_real_escape_string($_SERVER['REQUEST_URI']);
mysql_query('INSERT INTO logs (ip_address, page_name) VALUES(INET_ATON("' . $ip . '"), "' . $page . '");'); 
```

要按 IP 提取所有记录，您只需使用：

```
$results = mysql_query('SELECT page_name FROM logs WHERE ip_address=INET_ATON("' . $ip . '");'); 
```

[`INET_ATON()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-aton)用于将 IP 地址`string`转换为网络地址，或`long`. 要转换回来，您可以使用[`INET_NTOA()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_inet-ntoa)，例如`SELECT NTOA(ip_address) AS ip_address FROM logs;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:11:59.097

添加不带引号的逗号 ',' 以将页面名称保存在单个单元格中，并在从数据库中检索数据时使用 PHP explode() 函数来分解字符串。

# quantlib-swig - 在visual C++ 2008 express中通过python进行quantlib-swig绑定，出现链接错误

> ID：11589648
> 
> 赞同：1
> 
> 时间：2012-07-21T05:07:56.747
> 
> 标签：quantlib-swig

文件：

```
D:\Program Files (x86)\Microsoft Visual Studio 9.0

D:\Program Files (x86)\Microsoft Visual Studio 9.0\boost_1_50_0

D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2

D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-SWIG-1.2

D:\Program Files (x86)\Microsoft Visual Studio 9.0\swigwin-2.0.7

D:\Python27 
```

虽然我严格遵循[http://quantcodetips.blogspot.com/2012_02_01_archive.html](http://quantcodetips.blogspot.com/2012_02_01_archive.html)中描述的方法，但在 Visual Studio 2008 命令提示符中设置后

```
set INCLUDE=D:\Program Files (x86)\Microsoft Visual Studio 9.0\boost_1_50_0

set QL_DIR=D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2

set LIB=D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2\ql\Release\;
D:\Program Files (x86)\Microsoft Visual Studio 9.0\boost_1_50_0\stage\lib\ 
```

并将名称 QuantLib-boost1.50-msvc9.obj (D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2\ql\Release) 更改为 QuantLib-vc90-mt.obj；

然后转到 QuantLib-SWIG-1.2，使用

```
 python setup.py build --compiler=msvc 
```

出现链接错误。

```
D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2\ql/time/calendar
s/argentina.hpp : warning C4819: The file contains a character that cannot be re
presented in the current code page (936). Save the file in Unicode format to pre
vent data loss

D:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\link.exe /DLL /nologo
/INCREMENTAL:NO /LIBPATH:D:\Python27\libs /LIBPATH:D:\Python27\PCbuild "/LIBPATH
:D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2\lib" "/LIBPATH:
D:\Program Files (x86)\Microsoft Visual Studio 9.0\QuantLib-1.2\ql\Release\" "/L
IBPATH:D:\Program Files (x86)\Microsoft Visual Studio 9.0\boost_1_50_0\stage\lib
\" /EXPORT:init_QuantLib build\temp.win32-2.7\Release\QuantLib/quantlib_wrap.obj
/OUT:build\lib.win32-2.7\QuantLib\_QuantLib.pyd /IMPLIB:build\temp.win32-2.7\Re
lease\QuantLib\_QuantLib.lib /MANIFESTFILE:build\temp.win32-2.7\Release\QuantLib
\_QuantLib.pyd.manifest /subsystem:windows /machine:I386

LINK : fatal error LNK1181: cannot open input file 'Files.obj'
error: command '"D:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\link.
exe"' failed with exit status 1181 
```

寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:49:00.533

Python distutils 模块（用于构建包装器）在路径名中存在空格问题。将 QuantLib 和 Boost 文件夹移出 C:\Program Files，相应地更改 INCLUDE、QL_DIR 和 LIB 变量，然后重试。

在旁注中，我阅读了您引用的链接中的说明，我不会太严格地遵循它们。例如，您可以使用提供的 VC++2008 解决方案文件 (QuantLib_vc9.sln) 而不是自己创建新项目。这也将避免重命名库的需要，因为它将以正确的名称开始创建它，并且无需从分发中删除内容（这是有原因的）。但如果你都准备好了，这可以等待。

# java - 对于无限运行的查询，哪个是更好的 Java 程序或存储过程

> ID：11589650
> 
> 赞同：1
> 
> 时间：2012-07-21T05:08:40.347
> 
> 标签：java, mysql, performance, stored-procedures, infinite

在 MySQL 环境中，有一个专用的 MySQL 服务器和一个专用的应用服务器，哪个更好 -

一个。在连接到数据库服务器的应用服务器上运行无限 Java 代码，根据连接获取一些记录，然后将它们插入数据库

-或者-

湾。在基于联接（选择）执行插入的数据库上运行无限存储过程

在执行时间、数据库负载、内存要求和数据库继续处理其他插入/更新的能力方面需要答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:20:35.960

我不确定执行时间、数据库负载和内存要求，但根据我的经验，最好在业务层（而不是数据库）中完成所有逻辑工作。此外，存储过程在大型项目中的可扩展性较低且难以维护。所以我的选择是A。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T05:28:42.177

Some info is missing, but I'm guessing as for that:

The rows are most obviously not coming in an an infinite rate.

You are most probably polling as for that. That is, you are making some sort of `sleep()` between cycles.

If you're not - then you should know you could be pressing a high load on the database server in either case.

So, assuming there'll be *some sort* of sleep (let's say **1** second, for simplicity), it turns out there's not much difference between you Java code and the stored routine code. Why is that?

*   The sleeps are idle any way. No locks will be held during sleep time.
*   Any query you issue in Java code must be issued from routine code and vice versa.
*   There is not much (or at all) computational complexity to your code. You're most probably checking on some `MAX(id)` from the target table, then `INSERT INTO ... SELECT ... FROM ... WHERE id > max_id_as_just_calculated`, or something similar.

Execution time may actually be somewhat in favor of routine code, since you do not need to ship result sets back and forth between MySQL and Java. Moreover, you can just `INSERT INTO ... SELECT FROM` in one query, instead of translating result set into java objects/primitives, then preparing new `INSERT` query, translating back to MySQL data.

In terms of DB load I see no real difference, again with a slight improvement on routine side due to network delivery time (time in which locks may still be held).

**Considerations:**

How would you invoke this procedure from Java? It would run for an indefinite amount of time. So would you dedicate a thread to it?

Suppose it crashed (error of some sorts) -- need to be able to re-execute it (not a big deal, just an issue to consider).

You could execute it via the [event scheduler](http://dev.mysql.com/doc/refman/5.1/en/events.html) -- that would solve many of the above issues: instead of looping via the routine, let the scheduler invoke it every *X* seconds. But then - consider locks again.

My own preference: I would probably use Java code, or I would use the event scheduler if I'm comfortable adding this logic to the RDBMS.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T05:24:05.120

I'm not sure there is such a thing as an "infinitely running query". Perhaps you mean a query that is run **repeatedly**.

Anyway, as a general rule, you will get better throughput if you can avoid the overheads of transferring large amounts data backwards and forwards between the database and an application. On the other hand, if the "thing" you are trying to do is computationally intensive (rather than data intensive) then doing the computation in the application (running on a different machine to the DB) is going to reduce DB load.

> Need answer in terms of execution time, db load, memory requirement and ability of the db to continue processing other inserts/updates

It is not possible to quantify these things in the general case, but there are obvious trade-offs:

*   Avoiding transferring lots of data reduces network load and CPU load (in database drivers).
*   But doing "everything" on the database increases the load on the database.

How it will work out in practice will depend critically on the details of the actual use-case.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T05:29:25.927

For some databases I would opt for the stored procedure. Why shift data about and besides the database has knowledge about that data.

But - and it is a bit failing (IMHO) that MySql you cannot have `commit` or `rollback` inside a stored procedure. So I would think that an infinite stored procedure in the MySql context will not work as expected.

# android - 编写长文本以在android屏幕上显示，以便屏幕向下滑动

> ID：11589652
> 
> 赞同：3
> 
> 时间：2012-07-21T05:08:56.197
> 
> 标签：android

我想显示 2-3 页长的文本，尝试使用滚动视图但文本被截断，我是开发新手，请举个简单的例子，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-21T05:45:44.433

在您的 XML 中，编写此 TextView：

```
<TextView
        android:id="@+id/txtDetails"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:maxLines="7"
        android:scrollbars="vertical"
        android:text="TextView"
 /> 
```

在 中`Activity`，写下：

```
TextView txtDetails = (TextView) findViewById(R.id.txtDetails);
txtDetails.setText("Your Text");
txtDetails.setMovementMethod(new ScrollingMovementMethod()); 
```

这将滚动文本`TextView`。不需要写进去`ScrollView`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T05:42:41.003

这将起作用，诀窍是在滚动视图中获取您想要滚动的内容。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:text="@string/text" />

        </LinearLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-21T05:29:44.097

文本被截断意味着您遇到了什么问题。试试下面的代码。有用.....

使用 xml 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="HERE I TOOK NEARLY 3-4 PAGES OF DOCUMENT. IT WORKED" />

</ScrollView> 
```

如果您是动态创建方式，请遵循以下代码：main.java：

```
oncreate()
{
    ScrollView sv=(ScrollView)findViewById(R.id.scrollView1);
    TextView tv=new TextView(this);
    tv.setText("just keep the text what you want here");
    sv.addView(tv);

} 
```

将您的 xml 更改为以下内容：

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > 
</ScrollView> 
```

试试这个代码。有用....

# windows - 如何通过命令行检查我的互联网连接是否正在运行，如果没有运行则连接

> ID：11589653
> 
> 赞同：-2
> 
> 时间：2012-07-21T05:09:04.917
> 
> 标签：windows, networking, batch-file

我有一个有一点问题的移动宽带加密狗。一旦下载的数据达到 430 MB，互联网连接就会自动断开。这可能是网络提供商设置的某种限制。我可以在后台运行一些批处理文件，它会定期检查互联网连接是否正在运行，如果没有运行则连接它。我正在使用 Windows 7。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-12T08:17:14.317

```
@echo off
set "con_name=name_of_your_WAN_connection"
:check
rasdial| findstr /C:"%con_name%" >NUL
if errorlevel 1 rasdial "%con_name%"
timeout /T 60 >NUL
goto check 
```

此脚本每分钟检查一次已建立的 WAN 连接。如果没有建立，拨打它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-10T15:18:09.587

```
netsh wlan CONNECT ssid=SSID HERE name=NETWORK NAME HERE 
```

这适用于 Windows 7 以批量连接到单个网络。但是，如果您转到无线网络属性，您可以将其设置为自动连接到网络。

否则，如果这不起作用，您将不得不使用带有命令 netsh wlan .... 的批处理，如上面建议的那样，以及 google 的 ping 和 if else 语句。

目前就知道这么多，希望对大家有帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-21T06:57:14.790

检查互联网连接是否正常，

在命令提示符下键入`'ping google.com'`并按`press ENTER.`停止 ping`CTRL+C.`

对于连接到互联网，

[http://www.ghacks.net/2009/04/14/connect-to-a-wireless-network-via-command-line/](http://www.ghacks.net/2009/04/14/connect-to-a-wireless-network-via-command-line/)

# ruby-on-rails - 在 Rails 应用程序中存储通用页面应该遵循哪些最佳实践

> ID：11589656
> 
> 赞同：2
> 
> 时间：2012-07-21T05:09:26.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我应该遵循哪些最佳实践来存储通用页面，例如主页、帮助、联系方式、关于我们，以及其他没有特定控制器或模型的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:32:11.547

我通常有一个 non-restful DefaultController 对每个页面都有操作。因为它通常是利用 Rails 的视图助手和布局功能的静态内容，所以我也对它们进行页面缓存。

# php - 在 CMS 上更新新闻

> ID：11589657
> 
> 赞同：0
> 
> 时间：2012-07-21T05:09:52.113
> 
> 标签：php, mysql

所以我一直在尝试为客户编写一个 CMS 来更新他们的网站。我正在努力让更新新闻脚本正常工作，我想知道如何让脚本不仅更新新闻本身，还更新标题。这是脚本：

PHP：

```
 //used to get data from previous page. $previous_title was so I can use it to set the where in the update query.
    if($_GET['title']) {
            $title = $_GET['title'];
             $previous_title = $_GET['title'];
    }
    if($_POST['title']) {
            $title = $_POST['title'];
            $news = $_POST['news'];

            //used to update both news and title
           mysql_query("UPDATE `News` SET `Title`='$title', `Content`='$news' WHERE `Title`='$previous_title'");
    header("Location: viewNews.php");
    } 
```

HTML：

```
 <form id = "addNews" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
                <input type="hidden" name="hidden" id="hidden" value="hidden" />
                <input type="text" name="title" size="68" id = "title" value="<?php echo $query['Title'];?>"/><br/><br/>
                <textarea name="news" id="news"><?php echo $query['Content'];?></textarea><br />
                <input type="submit" value="Update News"/>
                </form> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T05:21:18.550

在更新查询中，您正在更新两个字段`Title & Content`

```
UPDATE `News` SET `Title`='$title', `Content`='$news' WHERE `Title`='$previous_title 
```

但是，如果您只想更新新闻，那么您的 SQL 如下所示：

```
UPDATE `News` SET `Content`='$news' WHERE `Title`='$previous_title 
```

你应该照顾`$previous_title` 因为在这种情况下`$previous_title`可能不可用

```
if($_POST['title']) {
            $title = $_POST['title'];
            $news = $_POST['news'];

           mysql_query("UPDATE `News` SET `Title`='$title', `Content`='$news' WHERE `Title`='$previous_title'");
    header("Location: viewNews.php");
    } 
```

# r - 如何将 doc-term 矩阵转换为 term-term 矩阵？

> ID：11589661
> 
> 赞同：1
> 
> 时间：2012-07-21T05:11:04.010
> 
> 标签：r, matrix, transformation, tm

```
dtm <- DocumentTermMatrix(reuters, control=list(wordLengths=c(1,Inf))) 
```

我正在考虑将 dtm 转换为术语术语矩阵，以下内容不正确：

```
dtm <- dtm %*% t(dtm) 
```

怎么可能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T21:43:29.843

If I understand the structure of a document-term matrix correctly, it is `t(dtm) %*% dtm`. See [this answer](https://stackoverflow.com/questions/10622730/constructing-a-co-occurrence-matrix-from-dummycoded-observations-in-r).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T05:55:23.967

我相信以下方法会起作用（注意您正在创建布尔或邻接矩阵）：

```
t(as.matrix(dtm)) %*% as.matrix(dtm) 
```

对于大 dtm，您将使用`as.matrix`. 该`Matrix`软件包可以提供帮助。注意我切换`i`并`j`在第一个矩阵中进行转置。

```
data("acq")
dtm <- DocumentTermMatrix(acq, control=list(wordLengths=c(1,Inf)))
tdm <- t(dtm)

library(Matrix)
Xt <- sparseMatrix(j=dtm$i, i=dtm$j, x=dtm$v)
X <- sparseMatrix(j=tdm$i, i=tdm$j, x=tdm$v)

Xt %*% X

# For easier viewing
(Xt %*% X) [1:20, 1:20] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T17:18:31.913

```
TDM <- TermDocumentMatrix(x) # Form a Term document matrix

termDocMatrix <- as.matrix(TDM) # convert your TDM into a matrix

termDocMatrix[termDocMatrix>=1] <- 1    # change the TDM into Boolean matrix

# term adjacency matrix
termMatrix <- termDocMatrix %*% t(termDocMatrix)

termMatrix[1:10,1:10]  # inspect terms numbered 1 to 10 
```

# rest - 如何在 AngularJS $resource 中使用路径变量而不是请求参数

> ID：11589666
> 
> 赞同：9
> 
> 时间：2012-07-21T05:12:19.240
> 
> 标签：rest, resources, angularjs, path-variables

可能有一种简单的方法可以做到这一点，但我似乎无法找到方法。

当我单击下面显示的删除按钮时，角度会点击以下网址：

```
http://localhost:8080/rest/managedCourse?id=3 
```

我怎样才能让它传递一个路径变量而不是这样的请求参数：

```
http://localhost:8080/rest/managedCourse/3 
```

这是我的html：

```
<table>
    <tr ng-repeat="course in page.content">
        <td>{{course.title}}</td>
        <td>{{course.description}}</td>
        <td>{{course.creditValue}}</td>
        <td><button ng-click="remove(course.id)">Delete</button></td>
    </tr>
</table> 
```

这是我的控制器：

```
function ManagedCourseController($scope, $resource) 
{
    var ManagedCourse = $resource("rest/managedCourse/:courseId", {courseId:'@id'});

    $scope.page = ManagedCourse.getPage({"page.page": "0", "page.size": "3", "page.sort": "title", "page.sort.dir": "asc"});

    $scope.create = function (managedCourse) {
        ManagedCourse.create(managedCourse);
    }

    $scope.remove = function (courseId) {
        ManagedCourse.remove({id:courseId});
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T06:38:39.650

```
function ManagedCourseController($scope, $resource) 
{
    var ManagedCourse = $resource("rest/managedCourse/:courseId/:id", 
       {courseId:'@id'});
    ... 
```

应该这样做

# vb.net - 继承 Windows.Forms.RichTextBox vb.net 2008

> ID：11589667
> 
> 赞同：0
> 
> 时间：2012-07-21T05:12:23.637
> 
> 标签：vb.net, richtextbox

我正在 vb.net 2008 中编写我的第一个自定义控件。我想将键盘添加到 Richtextbox。一切都很好，否则 iam 无法获取我的自定义控件的名称以在其中输入文本。例如

```
 Private Sub btna_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btna.Click
        If CheckBox1.Checked = True Then
            rtb.SelectedText = AsciiToUrdu(65)
        Else
            rtb.SelectedText = AsciiToUrdu(97)
        End If
    End Sub 
```

唯一的问题是找到控件名称以在其中输入文本。并为我糟糕的英语感到抱歉。

# ruby-on-rails - 如何在 ajax 页面加载时更新导航

> ID：11589670
> 
> 赞同：0
> 
> 时间：2012-07-21T05:12:53.557
> 
> 标签：ruby-on-rails, ajax, pjax

所以我有一个具有两个不同导航标题的 Rails 应用程序。一个用于大多数页面，另一个导航标题仅用于少数页面。此外，由于导航加载在 application.html.erb 页面中（在应用程序的所有页面之间共享），除非用户刷新页面，否则永远不会从服务器刷新导航 html。由于每个页面都是通过 ajax（使用 pjax）加载的，这意味着当我在需要不同导航标题的两个页面之间移动时，导航标题不会更新。

我有一些可能的解决方案，但我不喜欢它们，因为我不想向我拥有的每个视图添加代码。主要解决方案是将导航标头移动到视图中（而不是全局 application.html.erb），或者将 javascript 添加到每个页面以检查导航是否正确，如果不正确则替换它。但是为了替换它，我不确定如何加载部分的 html，它包含来自模型的数据。

注意：直接访问每个 url 都可以。

我觉得我错过了一些简单的方法，因为这感觉应该是一个相当普遍的问题，但我在搜索时找不到任何东西。

编辑：我正在使用 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:06:50.330

Jason，我假设您正在寻找一种方法来更改处于活动状态的选项卡的颜色。

如果正在呈现的 ajax 页面是一个显示视图，请将以下内容添加到 show.js.erb：

由于您没有包含代码，因此我做了两个假设。

**假设 1：**如果第二页处于活动状态，我假设它看起来像这样：

```
<div class="top_menu_bar">
<a class="menu_link controller_1" href="/controller_1">The First Controller</a>
<a class="menu_link controller_2 highlighted" href="/controller_2">The Second Controller</a>
<a class="menu_link controller_3" href="/controller_3">The Third Controller</a>
</div> 
```

请注意，如果您的锚标记类中没有控制器名称，您可以轻松添加它们。它将简化您的 JQuery。但是，解决方案的关键部分是遵循我简要概述的两个步骤。您始终可以根据您的代码修改 JQuery 选择器。

**假设 2：**我假设您有一个 a.highlighted 的 css 规则，这将使任何具有突出显示类的锚从其他锚中脱颖而出。

现在，有了这些假设，让我们讨论一下更改导航的两步解决方案，当您单击页面上使用 Ajax 请求加载的链接或按钮时，说与标签 controller_3 关联的 :show 视图。

你需要做以下两件事：

```
Step 1: Remove the "highlighted" class from the anchor of
      controller_2
Step 2: Add the "highlighted" class to the anchor of controller 3. 
```

您可以通过在 show.js.erb 文件中添加以下内容来做到这一点：

```
$('.highlighted').removeClass("highlighted");
$('.<%= controller_name %>').addClass("highlighted); 
```

如您所见，我们在提供 show.js.erb 时动态插入 controller_name。请注意，您仍然需要句号前缀。

我相信这应该可以解决问题。上述代码中可能存在语法错误，因此请采用整体概念并将其应用于您的情况。为了您的方便，我在 jsfiddle 上放了一个小示例来演示代码的 javascript 部分。[在http://jsfiddle.net/593ce/4/](http://jsfiddle.net/593ce/4/)上查看。

我希望这对你有用，并且你认为这个答案是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:21:42.897

由于您只有两个导航，因此在您的布局中生成它们并隐藏它们。

```
<div id="nav">
  <div id="nav1" class="nav" style="display: none"><a href="#">Nav1</a></div>
  <div id="nav2" class="nav" style="display: none"><a href="#">Nav2</a></div>
</div> 
```

在您页面的 JS 中，创建一个显示您想要的函数的函数。当您通过 pjax 更新页面时，您需要传入一些 JS 来执行，用您想要的调用 chooseNav。

```
<script type="text/javascript">
  function chooseNav(sel) {
    $('#nav .nav').hide();
    $('#nav' + sel).show();
  }

  $(function() {
    chooseNav(1);  // Default nav to load when page loads
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T00:28:53.917

如果您想继续用适当的部分替换导航，您可以在 AJAX 响应中放置以下内容（假设您使用的是 jquery）：

```
$('#navigation').html('<%= escape_javascript(render 'partial') %>'); 
```

# http - 使用 Node.JS 提供 HTTP/1.0 响应（内容长度未知，分块传输编码）

> ID：11589671
> 
> 赞同：14
> 
> 时间：2012-07-21T05:13:13.543
> 
> 标签：http, node.js, http-1.1, transfer-encoding, http-1.0

## 问题

我正在通过 Node.JS 提供长度未知的资源。因此，`Content-Length`无法设置标题。对于 HTTP 1.1，要求对这种性质的资源使用分块编码。Node.JS 知道这一点，并自行使用分块传输编码发送我的数据，并带有以下标头：

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked
Connection: close
... 
```

对于表现良好的客户来说，这一切都很好。 **但是，我必须支持一些表现不佳的客户端（即 Android 2.2 和更早版本）。** 这些客户端不正确支持分块传输编码。

## 修复尝试 #1

我最初的想法是将编码设置为`none`：

```
response.writeHead(200, {'Transfer-Encoding': 'none'}); 
```

这会禁用 Node.JS 的自动分块编码并保持与*大多数*客户端的兼容性。但是，现在我已经破坏了 Android 2.3+ 客户端，因为当他们看到这样一个虚假的传输编码标头时，他们只会咳嗽和窒息。

## 修复尝试 #2（我需要帮助的地方）

当我使用 发出请求时`HTTP/1.0`，服务器会正​​确返回没有分块编码的响应：

```
HTTP/1.1 200 OK
Connection: close
... 
```

这解决了我的问题，并允许我为所有麻烦的客户提供服务。我不必为 发送虚假标头`Transfer-Encoding`，也不必指定内容的长度。

**如何强制 Node.JS 的 HTTP 服务器始终以 HTTP/1.0 模式提供服务？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T06:13:37.467

出于我的目的，我找到了一种简单的方法来禁用强制使用分块，使用响应对象的未记录属性：

```
response.useChunkedEncodingByDefault = false; 
```

就是这么简单。当然，依靠此属性可用于 Node.js 的未来版本并不是最好的。也许有更好的解决方案，但这对我现在有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-28T02:20:17.060

# 强制非分块响应，正确的方式

有一种关闭分块编码的受支持方式：您只需`Transfer-Encoding`使用[request.removeHeader(name)](https://nodejs.org/api/http.html#http_request_removeheader_name)删除标头：

```
response.removeHeader('transfer-encoding'); 
```

无论如何，Node.js 都会尊重。甚至还有一个[测试](https://github.com/nodejs/node/blob/v8.6.0/test/parallel/test-http-remove-header-stays-removed.js#L32)可以防止有人意外改变这种行为，所以我认为它使用起来非常安全。

所以你可以坚持尝试#1，但按照上面的描述做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T09:37:52.847

`Transfer-Encoding: identity`也应该工作。

# javascript - 主干删除视图和 DOM 节点

> ID：11589673
> 
> 赞同：3
> 
> 时间：2012-07-21T05:13:20.067
> 
> 标签：javascript, jquery, dom, backbone.js

所以我注意到我的应用程序在长时间使用后变慢了。特别是当我创建许多视图时，这些视图都是长列表中的每个项目。我曾认为通过使用 view.remove() 删除这些视图将有助于解决问题，但是当它们从页面中删除时，我注意到 Chrome 的时间轴显示我的 DOM 节点数没有减少。我添加的每个视图都会继续增加这个数量。事实上，似乎唯一可以减少此节点数的是页面刷新。

这对我来说感觉不对，我觉得我搞砸了一些非常基本的东西，因为问题似乎出现在我所有的观点中，而不仅仅是这些观点。这些视图列表的发生速度要快得多，因为它们太多了。

有人对我应该寻找什么有任何建议吗？什么样的原因会产生这种行为？

我会提供代码，但我不知道有什么帮助。

TL;DR - View.remove() 正在从页面中删除视图，但我的 DOM 节点计数继续上升并且永远不会下降。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T16:31:44.080

由于未正确清理视图而导致内存泄漏。

阅读： http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

这个： http: [//lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/](http://lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/)

你需要做的不仅仅是`.remove()`征求你的意见。当您尝试关闭视图时，您需要正确销毁所有挂起的事件和其他绑定。一种常见的方法是提供一种`close`关于视图的方法，我在第一篇文章中对此进行了描述。

请务必阅读 Johnny Oshika 在第一篇文章中的评论。它指出了一种实现事件清理的好方法。

# entity-framework - 实体框架代码优先和生产者/消费者模式

> ID：11589674
> 
> 赞同：2
> 
> 时间：2012-07-21T05:13:24.507
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我正在实现生产者/消费者模式：

**制片人**

*   根据搜索条件从数据库中具体化对象
*   应用其他特定于应用程序的过滤逻辑
*   将物化对象排队以进行进一步处理

**消费者**（多线程）

*   从队列接收物化对象
*   使用来自物化对象的数据填充电子邮件模板
*   更新物化对象状态
*   将新对象状态保存到数据库

**问题**

这些对象是使用 Entity Framework Code First 使用与生产者线程关联的上下文来实现的。

消费者线程需要自己的上下文。

是否可以将物化对象（每个对象实际上是一个对象图）从生产者上下文移动到消费者上下文，或者我必须在消费者的上下文中重新实现对象以便在那里更新它？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:31:39.107

我认为您想要的是以下内容：

*   从队列接收物化对象
*   使用来自物化对象的数据填充电子邮件模板
*   **将物化根附加到一个新的上下文（保持这个上下文的范围很小）**
*   更新物化对象状态
*   将新对象状态保存到数据库

实体框架允许您将对象重新附加到上下文跟踪图，并将其视为数据库中对象的当前状态。这意味着它只会更新您在更新块中触及的属性。

即您想在没有事先选择更新路径的情况下遵循此更新：

```
using (var context = new MyContext())
{
    var dummy = new Test{Id= 1};
    context.Tests.Attach(dummy);
    dummy.Something = "Hello World";
    context.SaveChanges();
} 
```

关于此方法需要注意的重要一点是，您只能将实体（由唯一键定义）附加到跟踪图一次。因此，在孤立的上下文中执行此操作或仔细管理附加调用非常重要。

# actionscript-3 - 如何使用动作脚本更改列表组件的背景颜色

> ID：11589676
> 
> 赞同：1
> 
> 时间：2012-07-21T05:13:34.103
> 
> 标签：actionscript-3, apache-flex

如何使用动作脚本更改列表组件的背景颜色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:39:47.793

这是从 的`contentBackgroundColor`style 属性定义的`s:List`。

![列表](../Images/a0e08e61465616da9f9b6a0acb787416.png)

**MXML 示例：**

在 MXML 中，设置组件的`contentBackgroundColor`属性`s:List`。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:List contentBackgroundColor="0xabcdef">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>Item 1</fx:String>
                <fx:String>Item 2</fx:String>
                <fx:String>Item 3</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:List>

</s:Application> 
```

**动作脚本示例：**

在 ActionScript 中，设置样式属性：`setStyle("contentBackgroundColor", 0xabcdef);`

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                list.setStyle("contentBackgroundColor", 0xabcdef);
            }
        ]]>
    </fx:Script>

    <s:List id="list">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>Item 1</fx:String>
                <fx:String>Item 2</fx:String>
                <fx:String>Item 3</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:List>

</s:Application> 
```

这也可以通过为列表创建一个皮肤类来完成。

# java - 在 Netbeans 中创建持久性单元 - 需要 JNDI 名称

> ID：11589677
> 
> 赞同：1
> 
> 时间：2012-07-21T05:13:59.007
> 
> 标签：java, netbeans, ejb-3.1

我正在尝试使用 Netbeans 创建一个持久性单元。但是我无法弄清楚 Jndi 名称应该是什么 - 在数据库连接中，我已成功连接到我的 Db？ ![在此处输入图像描述](../Images/db6b7c266065282c2491c109b253a1b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:20:04.850

我通常做的是在服务器“容器”中设置数据库连接，这取决于您使用的服务器。我在服务器中输入的 JNDI 名称类似于`java:comp/env/jdbc/employee`

# jquery - 如何使用jQuery计算表格单元格内的表格

> ID：11589680
> 
> 赞同：0
> 
> 时间：2012-07-21T05:14:13.277
> 
> 标签：jquery, html, count, html-table

我有一些表格嵌套在一个单元格表中，我想用 jQuery 计算该单元格中有多少个表格，这可能吗？

```
<table>
<thead>
    <tr>
        <th>name</th>
        <th>age</th>
        <th>address</th>
        <th>birthday</th>
        <th>hoby</th>
        <th>country</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td colspan="6">
            <table class="groupbycountry" id="spain">
                <thead> a row of col title  </thead>
                <tbody> rows of data</tbody>
            </table>
            <table class="groupbycountry" id="italy">
                <thead>a row of col title</thead>
                <tbody>rows of data </tbody>
            </table>
            //and many more table of country according the user input 
        </td>
    </tr>
</tbody>

<tfoot>
    <tr>
        <td colspan="6">
            <table name="inputdata">
                <form name="myprofile">
                    //the input tag
                </form>
            </table>
        </td>
    </tr>
</tfoot>
</table> 
```

是否可以计算`class=groupbycountry`该父表中的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:18:40.157

您可以使用[`length`](http://api.jquery.com/length/)返回所选元素数量的 jQuery 属性，请尝试以下操作：

```
var len = $('table:eq(0) .groupbycountry').length 
```

[演示](http://jsfiddle.net/Pfhrz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:18:52.793

你可以做->

```
var tCount = $('.groupbycountry').filter('table').length;
$('#tables').text('There are '+tCount+' tables.'); 
```

[工作的jsFiddle](http://jsfiddle.net/Ohgodwhy/TcJDn/)

# c++ - 如何使用 Boost (Lambda?) 使 std::sort() 更容易？

> ID：11589681
> 
> 赞同：3
> 
> 时间：2012-07-21T05:14:13.823
> 
> 标签：c++, boost, c++03, boost-lambda

假设我有

```
struct Value { int foo(); };
size_t *begin = ...,
       *end   = ...; 
```

如果我想在 C++03 中对一堆`Value`索引进行排序，我必须写一些像这样乏味的东西：

```
struct Comparator
{
    Value *data;
    Comparator(Value *data) : data(data) { }
    bool operator()(size_t a, size_t b)
    { return data[a].foo() < data[b].foo(); }
};
sort(begin, end, Comparator(data)); 
```

有没有办法用 Boost（也许用 Boost.Lambda）更简洁地写这个，最好是在 1 行中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T05:41:56.360

不。

Boost.Lambda 在处理重载运算符时效果最好。一旦您将命名函数调用引入事物中，Boost.Lambda 在使代码更简洁和易于阅读方面就变得不那么有用了。你必须开始使用函数绑定器和其他类似的东西。

而且您使用 lambda 参数作为索引（而不是被索引的值）这一事实可能会在 Boost.Lambda 库中使用 operator[] 时搞砸了。

您*可以*制作与此等效的 Boost.Lambda。但这不会是我称之为“整洁”的任何东西，而且“1 行”会*非常*长。

C++11 将 lambdas 引入语言而不是仅仅将 Boost.Lambda 合并到标准库中是有原因的。

哦，别忘了：Boost.Lambda 通常被认为是过时的。请改用 Boost.Phoenix。当然，它不会比 Lambda 更能帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T05:51:25.597

使用 Boost.Phoenix（这是 Boost 的首选 lambda 库）：

```
#include <boost/phoenix/phoenix.hpp>

{
    // for bind and ref
    using namespace boost::phoenix;

    using namespace boost::phoenix::placeholders;
    std::sort(begin, end
              , bind(&Value::foo, ref(data)[arg1]) < bind(&Value::foo, ref(data)[arg2]) );
} 
```

另一种方法是使用 LocalFunction ，它基本上可以让你以可移植的方式做你正在做的事情（将本地类型传递`std::sort`给 C++03，这是不允许的）。用法应该是（尽管代码未经测试）：

```
#include <boost/local_function.hpp>

{
    int BOOST_LOCAL_FUNCTION(const bind& data, std::size_t lhs, std::size_t rhs)
    {
        return data[lhs].foo() < data[rhs].foo();
    } BOOST_LOCAL_FUNCTION_NAME(comparator)

    std::sort(begin, end, comparator);
} 
```

# python - 用于在数据从链接操作或表单到 mongodb 集合后更新 Flask 模板的 AJAX

> ID：11589682
> 
> 赞同：4
> 
> 时间：2012-07-21T05:14:14.587
> 
> 标签：python, ajax, mongodb, flask

我有一个项目，其中 mongodb 记录通过 Flask 在浏览器中呈现。我还在浏览器中进行了一些交互，允许用户更新数据库中的记录。因此，例如，单击“为我投票”链接，您可以在记录中增加“投票”。然后，该记录的投票记录将出现在“为我投票”链接旁边。

然而，目前我的投票路线看起来像这样，我必须重新加载页面才能更新浏览器中的投票记录：

```
@app.route('/vote_up/<this_record>')
def vote_up(this_record):

    vandalisms.update({'_id':bson.objectid.ObjectId(this_record)}, 
                  {"$inc" : { "votes": 1 }}, upsert=True)

    return redirect("/") 
```

我在这里[http://flask.pocoo.org/docs/patterns/jquery/](http://flask.pocoo.org/docs/patterns/jquery/)看了一下 jquery 和烧瓶的烧瓶文档，并了解那里发生了什么，但不知道如何将其扩展到案例我想先更新 mongodb 集合，然后重新加载一个 div 或 span，指定从更新的记录呈现的新投票，例如

```
 <span id='vote_tally'> {{ item.votes }} </span> 
```

我必须做些什么才能包含到数据库并返回浏览器而不必再次重新加载整个页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T06:25:17.267

我所做的是将这样的事情挂钩到点击事件：

```
$('#vote_tally').load('/vote_up/3452/'); 
```

“ajax” url 返回我要修改的 HTML。

```
@app.route('/vote_up/<this_record>')
def vote_up(this_record):
    if already_voted_for(this_record):
        return """<script type="text/javascript">
                       alert('You can only vote once');
            </script>{0}""".format(count_votes_for(this_record))

    vandalisms.update({'_id':bson.objectid.ObjectId(this_record)}, 
              {"$inc" : { "votes": 1 }}, upsert=True)

    return count_votes_for(this_record) 
```

# php - 从整数值动态创建数组。PHP

> ID：11589685
> 
> 赞同：0
> 
> 时间：2012-07-21T05:14:36.367
> 
> 标签：php, arrays, loops

我计算了数据库中列（字段）的数量，现在我想为每列创建一个数组。这有可能吗？例如：

```
$num = mysql_num_fields($query);
for($i=0; $i<$num; $i++){     // loop 1
    $field_names[] = mysql_field_name($query,$i);
}
for($i=0; $i<$num; $i++){    // loop 2
    while($row = mysql_fetch_array($query)){  // loop 3
        $array[] = $row[$field_names[$i]]
    }
} 
```

现在我基本上希望 $array[] 变量在每次循环 2 结束时改变，这样在 3 个循环结束时我就有 3 个不同的数组。那可能吗？如果是这样，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:28:52.840

Instead of an array for each column you can create a array with field name as a key.

```
$num = mysql_num_fields($query);
for($i=0; $i<$num; $i++){     // loop 1

    $field_names = mysql_field_name($query,$i);
    $field_array[$field_names] = array();
} 
```

after this you will get the following array

```
print_r($field_array); 
```

//out put

```
Array(
[fieldname1] => Array() 
[fieldname2] => Array() 
[fieldname3] => Array() 
[fieldname4] => Array() 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:37:41.077

我不确定您为什么要这样做..但有可能..

```
for($i=0; $i<$num; $i++){    // loop 2
    while($row = mysql_fetch_array($query)){  // loop 3
        $arrayName = "array$i";
         ${$arrayName}[] = $row[$field_names[$i]]
    }
} 
```

因此，如果您有 3 个循环，您将拥有 $array1、$array2、$array3 变量

但同样，我真的建议不要这样做并重新考虑你的设计，必须有更好的方法来做到这一点。

# php - 如何将目录指向在服务器 IP 地址上作为 Apache Web 服务器上的 URL 打开？

> ID：11589686
> 
> 赞同：1
> 
> 时间：2012-07-21T05:14:43.710
> 
> 标签：php, apache, ubuntu, symfony1, webserver

我正在使用最新的 Ubuntu Linux 和 Apache2 Web 服务器。我已将我的主目录设置为 Web 服务器的根目录。在这里，我将多个网站放在不同的文件夹中，例如

```
home/site1/
home/site2/ 
```

他们像这样在浏览器上加载

```
http://123.456.789.102/site1
http://123.456.789.102/site2 
```

所以现在我想做的是，我还有一个目录

```
home/mainsite/ 
```

我希望它在我直接在浏览器中使用这个 URL 时加载

```
http://123.456.789.102 
```

关于这个站点的另一件事是，它是使用 Symfony 框架构建的。所以在配置之后，站点将使用这个 URL 加载

```
http://123.456.789.102/web 
```

所以接下来我必须做一些配置来从 URL 中删除 /web

我不擅长配置 Apache 服务器文件。因此，如果有人可以指导我，那将非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:47:04.680

这应该可以解决您的问题，您不应该使用您的 IP/站点目录，而是将域指向该目录，该目录是 /etc/apache2/sites-available/ 目录
中的主域
main.conf 文件的一些基本配置

```
<VirtualHost *:80>
ServerName MAINDOMAIN.COM
DocumentRoot /home/mainsite/web
ServerAlias www.MAINDOMAIN.COM
<Directory /home/mainsite>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

使用此命令创建指向该站点的符号链接

```
ln -s /etc/apache2/sites-available/main.conf /etc/apache2/sites-enabled/main.conf 
```

对于
/etc/apache2/sites-available/ 的子域 subdomain.conf

```
<VirtualHost *:80>
ServerName SUB.DOMAIN.COM
DocumentRoot /home/site1
ServerAlias www.SUB.DOMAIN.COM
<Directory /home/site1>
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

为它创建一个符号链接。

```
ln -s /etc/apache2/sites-available/subdomain.conf /etc/apache2/sites-enabled/subdomain.conf 
```

最后重启apache2

```
service apache2 restart 
```

这只是基础知识，请查看下面的链接以获取更多信息
[Ubuntu 帮助](https://help.ubuntu.com)
[Ubuntu 11.04 服务器指南](https://help.ubuntu.com/11.04/serverguide/index.html)
[Apache2 指南](http://httpd.apache.org/docs/2.2/)

* * *

*在olivierw的评论后编辑，谢谢*
希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:04:48.043

您可以在此处使用别名：

```
Alias /site1 "/home/site1"

<Directory "/home/site1">
    Options FollowSymlinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

# javascript - 如何使用 JavaScript（或 jQuery）自动滚动到 iframe 的末尾？

> ID：11589690
> 
> 赞同：1
> 
> 时间：2012-07-21T05:15:27.037
> 
> 标签：javascript, jquery

我有以下代码：

```
<iframe id="preview" onLoad="scrollToBottom()"></iframe> 
```

我的目标 - 当框架重新加载时，“scrollToBottom()”函数被触发，它将用户带到 iFrame 的末尾（而不是框架的开头，默认情况下）。我现在的代码是：

```
function scrollToBottom() {
    window.scrollTo(0, document.body.scrollHeight);

} 
```

我知道，我必须以某种方式计算/传递 iframe 的 scrollHeight，但我不知道该怎么做。我想要的是 JavaScript 或 jQuery 的解决方案。我在这里看到了一些解决方案，但没有一个对我有用。顺便说一句...我不需要任何动画或效果...只需要一个简单/简单的解决方案。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:56:04.053

以下方法应该有效。

```
$('#preview').contents().scrollTop($('#preview').contents().height()); 
```

但是，在这种情况下，iframe 本身必须来自您的域，否则会引发错误

> 不安全的 JavaScript 尝试访问框架、域、协议和端口必须匹配。

# javascript - 我想转到杂志的特定页面

> ID：11589697
> 
> 赞同：0
> 
> 时间：2012-07-21T05:18:10.843
> 
> 标签：javascript, jquery, methods, jquery-selectors

我正在使用来自 github 的 turn.js，这很棒。他们有一种方法可以让您转到特定的页码：

```
$('selector').turn('page', pageNumber); 
```

我如何使用外部链接完成这项工作。例如，我单击一个名为“page #20”的链接，它会跳转到该特定页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T05:25:12.343

```
<a href="#" id="page-#20"> Page 20 </a>

$('a[id^="page"]').click(function(){
  var thePage = $(this).prop('id').split('#');
  //$('select').turn('page', thePage[1]);
  console.log('The page is '+thePage[1]);
}); 
```

# graphics - 显式光采样

> ID：11589699
> 
> 赞同：0
> 
> 时间：2012-07-21T05:18:31.920
> 
> 标签：graphics

我在 OpenCL 中编写了一个路径跟踪器。它工作得很好，但收敛速度很慢，特别是对于小灯。顺便说一句，我听说过显式光采样，它大大加快了速度。

主要问题是我不明白它是如何工作的。我已经看到它实现为在每次迭代时将标准 Phong 模型添加到材料的颜色中（例如，[GLSL Path Tracer](http://madebyevan.com/webgl-path-tracing/)）。我还看到它只是作为路径的最后一站添加的。

有人可以解释显式光采样是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T10:55:26.873

法线路径追踪通过在表面法线方向的半球中随机发射光线来计算辐照度。这意味着当你有小光源时，随机击中这个光源的概率非常低。为避免此问题，您必须将集成过程分为两部分：

1.  直接光集成

2.  间接光集成。

但这里有一个问题：我如何确定哪个方向会直接击中光线？有一些技术可以做到这一点。其中之一是为所有灯光选择立体角方向并检查阴影光线，因此您将确定灯光贡献和可见性。

之后，您计算了直接照明。来自半球其他部分的光实际上是间接照明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:12:29.980

看来这两种方法都存在。看：

*   [http://graphics.ucsd.edu/~iman/BDPT/](http://graphics.ucsd.edu/~iman/BDPT/)（路径追踪与下一个事件估计）直接照明方法：
*   Peter Shirley 和 Wang：蒙特卡洛积分的直接照明计算

# google-app-engine - GWT -xss（跨站脚本）演示

> ID：11589701
> 
> 赞同：1
> 
> 时间：2012-07-21T05:18:43.993
> 
> 标签：google-app-engine, gwt, xss

我一直在寻找通过 GWT（V2.4.0）演示一个示例 xss 攻击。我创建了一个带有 html 文本区域和一个提交按钮的表单（GET 方法），提交时它通过 gwt rpc 调用服务器，如果有一个 xss漏洞，示例测试用例`//<SCRIPT SRC=http://ha.ckers.org/xss.js></SCRIPT> //`不应该被过滤。但这不起作用，任何人都可以分享如何执行xss攻击吗？只是一个概述或要点就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:36:29.587

看看[https://developers.google.com/web-toolkit/articles/security_for_gwt_applications#xss](https://developers.google.com/web-toolkit/articles/security_for_gwt_applications#xss)

有一个如何使用内部 html 发起攻击的示例。见章节

> 设置 innerHTML 的代码

它也在页面上给出了对策。

如果您在谈论 XSRF，那么按照建议

> 跨站点请求伪造（XSRF 或 CSRF）是一种网络攻击，攻击者可以在用户不知情的情况下代表经过身份验证的用户执行操作。通常，它涉及制作恶意 HTML 页面，一旦受害者访问该页面，将导致受害者的浏览器向第三方域发出攻击者控制的请求。如果受害者通过第三方域的身份验证，则请求将与该域的浏览器 cookie 一起发送，并且可能会在未经受害者同意的情况下代表受害者触发不良行为 - 例如，删除或修改博客或添加邮件转发规则。

您可以只创建一个页面来发送（未经身份验证的）rpc 请求，并且如果您的浏览器传递已通过身份验证的用户的 cookie 并且 rpc 调用成功，那么攻击就成功了。

# javascript - 使用 Jquery.ajax 方法加载数据后，我想在 Html 中运行脚本

> ID：11589704
> 
> 赞同：0
> 
> 时间：2012-07-21T05:19:14.043
> 
> 标签：javascript, jquery, html

使用 Jquery.ajax 方法加载数据后，我想在 Html 中运行脚本

```
 $.ajax({
     url: '',
     type: 'Get',
     success: function(data)
     {
          var scripts = ???? // here i want get Scripts
     }
 }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:21:37.210

我可以找到这个

```
$.ajax({ 
url : '',
type: 'get',
success : function(data)
  {
     var element = document.createElement('div');
     element.innerHTML = data;
     var scripts = element.getElementsByTagName('script');
     for (var i = 0; i < scripts.length; i++)
        eval(scripts[i].text);
  }
}) 
```

# ruby - 反引号执行在本地工作，但不在服务器上

> ID：11589706
> 
> 赞同：1
> 
> 时间：2012-07-21T05:19:35.723
> 
> 标签：ruby, cucumber, sinatra

这是一个简单的 sinatra 应用程序，它显示黄瓜在浏览器中运行的结果：

```
require 'sinatra'

get '/' do
    `cucumber features --format html`
end

get '/ls' do
    `ls`
end 
```

根路由工作正常，在我的本地机器上做我想做的事：它执行 cucumber 并显示结果。问题是在我的服务器上我得到了错误`No such file or directory - cucumber features --format html`。

*到目前为止我已经完成的故障排除*

*   跑了`ls`路线。它在本地和服务器上都可以工作，并显示我在两种情况下都期望的目录的结果——sinatra 应用程序运行的同一目录。
*   从命令行`cucumber features --format html`通过服务器上的 ssh 运行。同样，它工作正常，输出是我所期望的。

那么，当我使用 ruby​​ 的反引号通过 sinatra 运行它时，为什么会出现错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:26:57.793

Are you sure cucumber is installed on the server? If so, and it was installed via bundler, try changing the command to this:

```
bundle exec cucumber ... 
```

**Edit**

Turns out cucumber was not in the path. Solution is to use the full path to cucumber.

# python - 在 Python 中检索 Geoname XML 中的标签

> ID：11589707
> 
> 赞同：0
> 
> 时间：2012-07-21T05:19:37.253
> 
> 标签：python, minidom, geonames

我希望通过提供纬度和经度从 geoname api 中检索 timezoneId 标签。

[http://api.geonames.org/timezone?lat=39.758720&lng=116.041420&username=demo](http://api.geonames.org/timezone?lat=39.758720&lng=116.041420&username=demo)

它的结构是这样的：

```
<geonames>
<timezone tzversion="tzdata2012c">
<countryCode>CN</countryCode>
<countryName>China</countryName>
<lat>39.75872</lat>
<lng>116.04142</lng>
<timezoneId>Asia/Shanghai</timezoneId>
<dstOffset>8.0</dstOffset>
<gmtOffset>8.0</gmtOffset>
<rawOffset>8.0</rawOffset>
<time>2012-07-21 13:13</time>
<sunrise>2012-07-22 05:05</sunrise>
<sunset>2012-07-22 19:38</sunset>
</timezone>
</geonames> 
```

我正在尝试以这种方式获取元素：

```
document=minidom.parseString(urllib2.urlopen(DATA_SRC).read())
el=document.getElementsByTagName("geonames")[0].getElementsByTagName("timezone")[0].getElementsByTagName("timezoneId")[0]
print el.firstChild.nodeValue 
```

显然 getElementByTagName 没有返回任何孩子......我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:01:44.037

我注意到您在最后一行将其拼写为“noveValue”。这是错字还是实际代码？

如果你想要 timezoneId，你可以在树下继续 getElementsByTagName。

```
document=minidom.parseString(urllib2.urlopen(DATA_SRC).read())
el=document.getElementsByTagName("geonames")[0].getElementsByTagName("timezone")[0].getElementsByTagName("timezoneId")[0]
print el.firstChild.nodeValue 
```

你`el.firstChild.nodeValue`没有返回任何内容的原因是因为它里面没有文本，它返回一个空字符串。您需要继续沿树向下继续查看 timezoneId 的文本节点值。

# c# - 如何在 Ubuntu 上注册 C#.net DLL？我无法在 Ubuntu10.10 上使用 Regasm.exe

> ID：11589709
> 
> 赞同：0
> 
> 时间：2012-07-21T05:20:03.970
> 
> 标签：c#, ubuntu, dll, regasm

我已经使用 GACutil 命令将 .NEt DLL 复制到 GAC 中，并且我正在尝试使用“C:\Windows\Microsoft.NET\Framework\v2.0.50727>regasm testdll.dll /tlb:testdll.tlb”注册 DLL使用这个命令

我在 Ubuntu 10.10 的 Wine 命令提示符上执行此操作

但它说 "fixme:regasm:wmain stub: L"regasm" "testdll.dll" L "/tlb:testdll.tlb"

请帮助我如何在 Ubuntu 10.10 上注册 C#.net DLL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:44:39.020

只是在谷歌上搜索你的标题..

[如何注册一个DLL？](http://ubuntuforums.org/showthread.php?t=885264)

你需要 Wine 程序

```
wine cmd
regsvr32 C:\windows\system32\<COM_DLL>.dll 
```

如果你懂西班牙语，也可以[在这里查看](http://doc.ubuntu-es.org/Wine)

# c# - C# Socket - 如何保持套接字打开？

> ID：11589713
> 
> 赞同：-2
> 
> 时间：2012-07-21T05:20:45.617
> 
> 标签：c#, loops, stream

我有这个代码。我可以成功接收来自客户的数据，但只能接收一次。在我收到一次数据后，如果客户端尝试再发送一次，服务器就没有收到它。任何人都可以帮忙吗？

```
 private void startListening()
    {
        TcpListener server = null;

        try
        {

            server = new TcpListener(IPAddress.Parse("127.0.0.1"), 7079);

            server.Start();

            Byte[] bytes = new Byte[256];
            String data = null;

            //Enter listening loop
            while (true)
            {

                addLog("Waiting for push.");

                TcpClient client = server.AcceptTcpClient();
                addLog("Push request received, accepted.");

                data = null;

                NetworkStream stream = client.GetStream();

                int i;

                //Loop to receive all data
                while((i = stream.Read(bytes, 0, bytes.Length))!=0)
                {
                    //Translate data bytes to ASCII string
                    data = System.Text.Encoding.ASCII.GetString(bytes, 0, i);

                    //Process data
                    data = data.ToUpper();

                    byte[] msg = System.Text.Encoding.ASCII.GetBytes(data);

                    //send response
                    stream.Write(msg, 0, msg.Length);
                    addLog("Received: '" + data + "'");
                }

                //End ALL Connections
                client.Close();
                server.Stop();
            }
        }
        catch(SocketException e)
        {
            addLog("SocketException: " + e);
        }
        finally
        {
            //Stop listening for new clients
            MessageBox.Show("Finished.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T05:27:58.063

您将在循环结束时关闭服务器和客户端 ( `server.Stop();`)。您的外部循环将继续运行并尝试从您的服务器获取一个新的 TcpClient （这意味着建立了一个新的连接），但是由于您已经停止了服务器，所以这将永远不会发生（或者可能会引发异常）。

# jquery - jQuery 显示功能不起作用

> ID：11589717
> 
> 赞同：0
> 
> 时间：2012-07-21T05:22:07.767
> 
> 标签：jquery, show-hide

我试图简单地从隐藏的导航 div 开始，然后在鼠标悬停在它们上方时显示它们。

我曾尝试将 .hover 函数与 .show() 和 .hide 以及 .toggle 一起使用。我还尝试了带有显示和隐藏以及切换功能的 mouseeneter 和 mouseleave 功能。

真正奇怪的是我可以让它反向工作。我可以让它在鼠标悬停时隐藏并在鼠标退出时显示，尽管当鼠标在 div 内时它会闪烁。

这是 html 和 jQuery：

```
<html>

<head><title>Divs</title>

    <link rel="stylesheet" type="text/css" href="reset.css" />

    <link rel="stylesheet" type="text/css" href="divs.css" />

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            $("div.nav").mouseenter(function(e) {
                e.stopPropagation();
                $(this).show();
            }).mouseleave(function(e) {
                e.stopPropagation();
                $(this).hide();
            });

        });

    </script>

</head>

<body>

    <div id="mask">

        <div id="leftNav" class="nav"></div>

        <div id="rightNav" class="nav"></div>

    </div>

</body>

</html> 
```

这是我尝试用于 .hover 函数的代码：

```
$("div.nav").hover(function() {
                $(this).toggle();
            }, function() {
                $(this).toggle();
            }); 
```

这是CSS：

```
div#mask {
    position:relative;
    width:100%;
    height:100%;
    background-color:#4b4747;
}

div.nav {
    display:none;
}

div#leftNav {
    background-color:red;
    width:10%;
    height:100%;
    position:absolute;
    top:0;
    left:0;
    z-index:8000;
}

div#rightNav {
    background-color:red;
    width:10%;
    height:100%;
    position:absolute;
    top:0;
    right:0;
}

div#pictures {
    display:none;
} 
```

我尝试了每种方法的多种变体。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:23:42.547

您不能在元素上使用`.hover()`或其他与鼠标相关的事件，`display: none`这些事件是元素设置的内容`.hide()`以及您的 CSS 最初设置的内容。此类元素不接收鼠标事件，因此您永远不会获得初始`.hover()`或其他鼠标事件事件。

您可以更改逻辑以将不透明度淡化为零而不是隐藏它们。这将使它们不可见，但它们仍将接收鼠标事件。

改成：

```
div.nav {
    opacity: 0;
} 
```

和：

```
 $(document).ready(function () {

        $("div.nav").hover(function(e) {
            e.stopPropagation();
            $(this).animate({opacity: 1});
        }, function(e) {
            e.stopPropagation();
            $(this).animate({opacity: 0});
        });

    }); 
```

使用 opacity 和使用 hide/show 之间的主要区别在于，元素在设置 opacity 时仍然会占用页面中的空间（这就是它仍然可以接收事件的原因），但是当你 hide() 它时，它将不再占据页面中的任何空间（这就是它不接收任何鼠标事件的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:33:46.340

please set the MouseEnter Event For Other Element becase leftnav and rightnav first time is display none and you can not riase MouseEnter For this

# memory-leaks - Finalizer Queue growing but Managed Heaps not

> ID：11589721
> 
> 赞同：5
> 
> 时间：2012-07-21T05:23:15.740
> 
> 标签：memory-leaks, xna, windbg

We have some sort of a leak, the nature of which I don't understand. Gen0/1/2 heaps do not increase in size however Working Set increases until we OOM.

DebugDiag tells me that CLR.DLL owns the increasing memory and also tells me that we have a growing finalizer queue - 100s of thousands of Texture2D (its an XNA app) objects which increase with time.. However no profiler (dotTrace, Ants, CLR Profiler) can find these objects - they don't show in the heap and CLRProfiler claims they are never allocated.

So I look in WinDbg - once again I can see a growing Finalizer queue full of Texture2D. fReachable is empty and it claims all those objects are on the heap anyway.

```
*0:038> !finalizequeue
SyncBlocks to be cleaned up: 0
MTA Interfaces to be released: 0
STA Interfaces to be released: 0
----------------------------------
generation 0 has 1881 finalizable objects (33e365b0->33e38314)
generation 1 has 41580 finalizable objects (33e0dc00->33e365b0)
generation 2 has 685816 finalizable objects (33b70020->33e0dc00)
Ready for finalization 0 objects (33e38314->33e38314)
      MT    Count    TotalSize Class Name
......snip......
00ce67e0   726827     49424236 Microsoft.Xna.Framework.Graphics.Texture2D* 
```

Then I look for those 726,000 instances so that I can find who owns them. Problem is that dumpheap says there's only 218\. Thats pretty much what I expect and what the managed profilers tell me exists.

```
*0:038> !dumpheap -stat -type Microsoft.Xna.Framework.Graphics.Texture2D
total 0 objects
Statistics:
      MT    Count    TotalSize Class Name
00ce67e0      218        14824 Microsoft.Xna.Framework.Graphics.Texture2D
Total 218 objects* 
```

So where are the rest of the items on the finalizer queue coming from? Right now I suspect the growing finalizer queue for the memory allocations as it grows and therefore out OOM. Its as if those 218 items are being added to the Finalizer queue multiple times for some reason.

Many thanks

Andy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T14:28:51.797

为了完整起见，这就是正在发生的事情。

如果您访问 Device.Texture[] 集合，XNA 存在一个问题，会导致在 Texture2Ds 上调用 ReRegisterForFinalize。Sunburn 在每一帧都访问这个集合来解决另一个 XNA 问题，所以如果你有很多纹理，那么这可以非常迅速地建立起来。

XNA 中有几个地方（Texture3D 等）使用相同的模式，所以我假设你可以通过多种方式重现它。

由于没有 XNA 5 的迹象，我们不得不解决它 - 我发现在访问集合后简单地调用 SuppressFinalize 会删除已添加的额外项目。我们认为它是安全的 :-) Sunburn 人正在他们的代码中添加一个修复程序，我们希望这个问题会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T08:50:42.930

是否可以将同一个实例重新添加到 finalize 队列中？来自 Object.Finalize 的文档：

Finalize 仅在给定实例上自动调用一次，除非使用诸如 GC.ReRegisterForFinalize 之类的机制重新注册对象，并且随后未调用 GC.SuppressFinalize。

这是唯一符合您在此处看到的解释的解释。不知道为什么它会重新注册完成。

# javascript - firebug：如何在 firebug 控制台中发送 POST 数据？

> ID：11589726
> 
> 赞同：8
> 
> 时间：2012-07-21T05:24:47.227
> 
> 标签：javascript, html, firebug

是否可以使用 POST 向服务器发送数据？

即）我想将 POST 数据发送到 url：

```
http://www.a.com/b?cmd=tt 
```

使用 POST 数据：

```
a=1
b=2 
```

它是否可行以及如何实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T22:56:47.293

事实上，您现在（从 Firefox 3.5 开始）可以从 Firebug 向任何域进行纯[XHR](https://developer.mozilla.org/en/xmlhttprequest) POST，就像在页面上使用纯 JavaScript 一样，具有相同的主题限制。

如果您想经常使用它，代码有点冗长而且一点也不方便（除非您存储它并每次都复制粘贴）

粘贴到控制台（它会自动打开命令编辑器，因为它 > 1 行）

```
var xhr = new XMLHttpRequest();
xhr.open("POST", "http://test/xhrtest.php?w=www");
xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xhr.send("a=aaa&b=bbb"); 
```

请记住，在服务器端，您必须[启用 CORS](http://enable-cors.org/)才能在 Firebug 中看到响应（否则，请求将被发送，但您不会在 Firebug 中看到响应；您可以在[Fiddler](http://www.fiddler2.com/fiddler2/)中看到它）；如果您在页面上打开了 Firebug `http://foo/somepage`，那么 XHR 将在 HTTP 引荐来源标头字段中发送该 URL，并且必须允许该域通过`Access-Control-Allow-Origin`您可以在服务器配置中设置的标头接收 XHR 响应，或者直接在页面中。

PHP 中的示例：

```
<?php
header('Access-Control-Allow-Origin: *');
//you can adjust it more fine-grained, perhaps in an 'if'
//header('Access-Control-Allow-Origin: ' . $_SERVER['HTTP_ORIGIN']);
//header('Access-Control-Allow-Origin: http://foo');

echo $_POST['a'] . "\r\n";
echo $_POST['b'] . "\r\n";
echo $_GET['w'] . "\r\n";
?> 
```

然后您可以使用 Firebug 的`Net`选项卡来检查响应（`Console`如果您`Console > RIGHT CLICK > Show XMLHttpRequest`启用了选项，也可以在选项卡中）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-21T05:26:11.980

Mike Cooper 关于类似问题的引述：

> 据我所知，Firebug 无法做到这一点。但是，本着 Firebug 的精神，有一个非常有用的 Firefox 扩展，称为[Tamper Data](https://addons.mozilla.org/en-us/firefox/addon/tamper-data/)。这应该能够做你想做的事。
> 
> 它允许您监视浏览器发出的每个请求，并且您可以打开一个选项，允许您在发送之前查看和编辑每个请求。

在源代码中查看其他答案： [如何使用 Firebug 发布到网页？](https://stackoverflow.com/questions/1230140/how-do-i-post-to-a-web-page-using-firebug)
另请参阅：[使用 Firebug 发送表单数据](https://stackoverflow.com/questions/2168436/using-firebug-to-send-form-data)

* * *

如果您只是想修改 HTTP 请求，但要实际创建 HTTP 请求，则上述工作有一个名为[Poster](https://addons.mozilla.org/en-us/firefox/addon/poster/)的 Firefox 扩展，其描述如下：

> 用于与 Web 服务和其他 Web 资源交互的开发人员工具，**可让您发出 HTTP 请求**、设置实体主体和内容类型。这允许您与 Web 服务交互并检查结果...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T18:04:44.657

# 不需要插件。

您可以使用内联 javascript 按钮简单地做到这一点：[https ://stackoverflow.com/a/38643171/2377343](https://stackoverflow.com/a/38643171/2377343)

# java - Why does JSF, on request to update a portion of view instantiate all beans on the page instead of beans used in that part of page?

> ID：11589731
> 
> 赞同：5
> 
> 时间：2012-07-21T05:25:38.657
> 
> 标签：java, jsf, jsf-2

I have been noticing that all of my beans used in the page are unnecessarily getting instantiated on updating any small portion of the page. Ok, they are request scoped so will be instantiated on every request but it should be done only when those beans are needed by that part of the page which is being updated. Isn't it ?

Why this bad design in JSF?

# Update:

I found the real culprit that was causing this behavior, I had `f:event type="preRenderView"` at certain places in my webpage. That actually caused those beans to be re-instantiated in order to invoke the listener. The fix was to use `f:event type="preRenderComponent"` instead. This reduced most of the unnecessary bean instantiations at each request but still I see a few unnecessary bean instantiations.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:56:58.423

在这种情况下，bean 只会在它参与构建视图时被构建（阅读：它的一个属性在 taghandler 的任何属性或UI 组件的`id`or属性中被引用）。`binding`否则它不会被构建。至少，在“常规方式”设计 JSF 视图时，我无法在 Mojarra 2.1.11（也不是 2.0.0）中重现您的问题。

视图不能部分构建，但可以部分保存和恢复其状态，并且可以部分呈现 UI 组件树。

您的“JSF 中的糟糕设计”投诉没有任何论据。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T16:09:57.433

希望我正确地解释了您的问题！

您的页面由表单提交，因此第一次检索或构造组件树（JSF 生命周期的第一步）。

组件树由所有内容组成，而不仅仅是您当前所在的视图。

因此，绑定到任何请求范围 bean 的任何 JSF 组件都会在此阶段进行实例化。

tabView 就是一个很好的例子。想象一个带有四个选项卡的 tabView，每个选项卡绑定到不同的页面，每个页面绑定到相应的请求范围的支持 bean。

尽管并非所有选项卡都同时可见，但它们都是组件树的一部分，因此，如果设置断点，您将看到在请求阶段为每个页面实例化 bean。

# visual-c++ - Drawing an ellipse (with random width, height, x position, and y position) on each timer tick (Visual C++)

> ID：11589733
> 
> 赞同：1
> 
> 时间：2012-07-21T05:26:22.327
> 
> 标签：visual-c++

So I am nearing the end of my tasks in this particular set... I am trying to make an ellipse be drawn every time the timer ticks over. The timer has been enabled by default and the interval for each timer tick is 100ms. When I run the debugging, one ellipse is drawn on the canvas and no more - I have already tried a for-loop and a while-loop to set an arbitrary amount of ellipses to be drawn on each timer tick but that didn't work. Ideally I would like to create buttons that turn the timer on and off (I have a few ideas on how to do this, thanks to an earlier problem that was solved), I would like to get the code for the timer right first. Below is the code I have managed to get so far:

```
private: System::Void timer1_Tick(System::Object^  sender, System::EventArgs^  e) 
         {
             Random^ rGen;
             timer1->Enabled = true;

             Graphics^ mainCanvas = CreateGraphics();

             // while loop to set upper limit for no# of ellipses
             // note: this is just for testing - would like to have
             // ellipses drawn automatically at random etc.
             int i = 0;
             while(i < 20)
             {
             rGen = gcnew Random();
             Brush^ greenBrush = gcnew SolidBrush(Color::Green);
             static int randX = rGen->Next(Width); //random x co-ordinate
             static int randY = rGen->Next(Height); //random y co-ordinate
             static int randWidth = rGen->Next(100); //random ellipse width
             static int randHeight = rGen->Next(100); //random ellipse height
             mainCanvas->FillEllipse(greenBrush, randX,randY,randWidth,randHeight);
             i++;
             }
         } 
```

I am probably missing only one or two crucial things, I have also been learning C# and ASP.NET at the same time so my heads nearly exploding with so much being crammed into it. Any help is appreciated :).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T11:38:06.857

```
 static int randX = rGen->Next(Width); 
```

*static*关键字是你的克星。在局部变量之前使用时，它确保变量只被初始化**一次**。因此，您只能绘制完全相同的椭圆。顺便说一句，使用调试器时很容易看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T21:31:47.740

只是一个快速提示，请确保在此方法之外启用计时器，您可能已经这样做了，但在这里看不到，这可以确保您实际输入了该方法。正如@Hans 所说，删除静态。

# file - How to write process files and write the results in parallel in Scala?

> ID：11589735
> 
> 赞同：2
> 
> 时间：2012-07-21T05:27:08.200
> 
> 标签：file, scala, parallel-processing

This is a follow-up to my [previous](https://stackoverflow.com/questions/11576439/parallel-file-processing-in-scala) question.

Suppose I process my files in parallel. Now I would like to write the processing results to a file. Since the results do not fit in memory I cannot just wait until the processing of all files finish and then write the results. I have to do the processing and writing in parallel somehow.

For example: Suppose I have files with numbers. The file size is about `500M`. The number of files is about `200`. Each file fits in memory but all of them do not fit. Now I would like to write all *even* numbers found in these files to another file.

How to do that in Scala (with `Futures`, and Scala `parallel collections`)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T06:17:58.480

在某些时候，您必须同步写作。如果您不想阻塞其他线程，一种可能性是使用参与者将结果写入文件。这可能看起来像这样：

```
class FileWriterActor(path: String) extends Actor {

  val file = ... // init FileWriter

  // this is how you implement an akka actor
  // plain scala actors look a bit different        
  def receive = {
    case x: MyResult => file.write(x.toString)
  }

  override def postStop() = file.close()
}

// usage
val result = ... // calculation stuff
fileWriter ! result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-18T15:04:53.633

对于不熟悉akka的人：

```
import java.io.{File, PrintWriter}
import akka.actor.{Actor,ActorSystem,Props}

object AkkaWriterExample extends App{

  val outputPath : String = ???
  val system = ActorSystem("WriterSystem")
  val writer = system.actorOf(Props(new WriterActor(new File(outputPath))), name="writer")
  writer ! "this is a test"
  system.shutdown()
  system.awaitTermination()
}

class WriterActor(outFile: File) extends Actor {

  val writer = new PrintWriter(outFile)

  // this is how you implement an akka actor
  // plain scala actors look a bit different        
  def receive = {
    case str:String => println(str); writer.write(str);
  }

  override def postStop() = {
    writer.flush(); 
    writer.close();
  }
} 
```

# php - PHP SQL 查询中的变量

> ID：11589739
> 
> 赞同：-1
> 
> 时间：2012-07-21T05:28:02.817
> 
> 标签：php, sql

该脚本中的变量根本不起作用，这让我发疯，如果有人可以提供帮助，那就太好了！

```
<?php 
$db = mysql_connect('HOST', 'USER', 'PASS') or die('Could not connect: ' . mysql_error()); 
mysql_select_db('DBNAME') or die('Could not select database');

// Strings must be escaped to prevent SQL injection attack. 
$name = mysql_real_escape_string($_GET['name'], $db); 
$score = mysql_real_escape_string($_GET['score'], $db); 
$QuestionN = mysql_real_escape_string($_GET['QuestionN'], $db);        
$hash = $_GET['hash']; 
$num = (int)$QuestionN;
$var1     = mysql_real_escape_string($_POST['var1']);   
$var2     = mysql_real_escape_string($_POST['var2']);           

$secretKey="SecretKey"; # Change this value to match the value stored in the client javascript below 

$real_hash = md5($name . $score . $secretKey); 
if($real_hash == $hash) { 
$query = mysql_query("UPDATE Quiz1 SET " . $var1 . " = (1 + ". $var1 .")". " WHERE Question = " . $var2);
//$query = mysql_query("UPDATE Quiz1 SET " . $score . " = (1 + ". $score .")". " WHERE Question = " . $QuestionN);
//$query = mysql_query("UPDATE Quiz1 SET A = (1 + A ) WHERE Question = 1 ");

    $result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
} 
print($var1) ; 
?> 
```

使用 PDO 进行清理，为任何需要它的人提供具有更好 PHP 实践的相同代码。

```
<?php
        // Configuration
        $hostname = 'host';
        $username = 'user';
        $password = 'pass';
        $database = 'DBNAME';
    //$score = 'A' ; 

        $name = $_GET['name']; 
        $score = $_GET['score']; 
    $QuestionN = $_GET['QuestionN'];   
        $table = $_GET['table'];
$hash = $_GET['hash']; 
    $num = (int)$QuestionN;
        $secretKey="SecretKey"; # Change this value to match the value stored in the client javascript below 

        $real_hash = md5($name . $score . $secretKey); 
       // if($real_hash == $hash) { 

        try {
            $conn = new PDO('mysql:host='. $hostname .';dbname='. $database, $username, $password);
    echo "Connected to database"; // check for connection
    //$dbh->exec("UPDATE Quiz1 SET $score = 1 WHERE Question = 1");  // THIS DOES NOT  
    //$dbh->exec("UPDATE Quiz1 SET B = 1 WHERE Question = 1"); // THIS WORKS
$conn->exec("SET CHARACTER SET utf8");      // Sets encoding UTF-8
//$score = 'A';
//$scoreB = 'A'; 
//14
$author = 'Imanda';
//15
//$id = 1 ;
//16
// query
//$table = 'Quiz1';
//17
$sql = "UPDATE $table 

        SET $score = ( 1 + $score)

        WHERE Question = ?  "  ;
//20
$q = $conn->prepare($sql);
//21
$q->execute(array($QuestionN));

    //AddScore($dbh,'Quiz1','A','1'); 

}
catch(PDOException $e)
    {
    echo $e->getMessage();
    }
//  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:36:18.527

您在两个地方使用 mysql_query，它应该只在一个地方。

```
$query = mysql_query("UPDATE Quiz1 SET " . $var1 . " = (1 + ". $var1 .")". " WHERE Question = " . $var2);

    $result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
} 
```

到

```
$query = "UPDATE Quiz1 SET " . $var1 . " = (1 + ". $var1 .")". " WHERE Question = " . $var2;
    $result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:29:58.577

请务必查看 MySQL 文档以帮助您完成任务。

**mysqli**： http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

**PDO**： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

# django - Django Installation Error :

> ID：11589740
> 
> 赞同：1
> 
> 时间：2012-07-21T05:28:15.500
> 
> 标签：django

Trying to create the first project. First got the below error when I ran,

django-admin.py startproject mysite

then I tried,

django-admin.py

Also symlinked the path and its in the path. But I still get the error.

. . .
File "/Users/Satha/django-trunk/django/bin/django-admin.py", line 7, in execfile(**file**) File "/Users/Satha/django-trunk/django/bin/django-admin.py", line 4, in from pkg_resources import require; require('Django==1.5.dev20120720114244') File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 666, in require needed = self.resolve(parse_requirements(requirements)) File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 546, in resolve requirements = list(requirements)[::-1] # set up the stack File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2438, in parse_requirements yield Requirement(project_name, specs, extras) File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2465, in **init** self.unsafe_name, project_name = project_name, safe_name(project_name) File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 1113, in safe_name return re.sub('[^A-Za-z0-9.]+', '-', name) File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 151, in sub File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 231, in _compile RuntimeError: maximum recursion depth exceeded while calling a Python object

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:42:44.917

除非您有某些特定原因，否则您可能不应该使用不稳定的 django (1.5) 开发版本。尽管我不确定为什么即使使用 dev 分支也会遇到问题，因为它对我来说安装得很好，并且同样容易地创建一个项目。

我建议尝试首先删除开发版本，然后通过安装 django`easy_install`或`pip`将获得 v1.4。 [安装说明在这里](https://docs.djangoproject.com/en/1.4/topics/install/#installing-an-official-release-with-pip)

如果在安装 django 1.4 之后，如果你仍然有这个问题，尝试创建一个[virtualenv](http://www.virtualenv.org/en/latest/index.html)，它将在一个目录中创建一个隔离环境，然后在其中安装 django。

# regex - 在 Visual Studio 2010 中将 MultiLine 替换为 SingleLine

> ID：11589750
> 
> 赞同：0
> 
> 时间：2012-07-21T05:29:31.840
> 
> 标签：regex, visual-studio-2010, replace

我想替换以下 3 行：

```
this.CSType = typeof(DateTimeOffset?);
this.CSTypeString = "Target";
this.MappedCSType = SQLTypes.MappedCSType.NullableDateTimeOffset; 
```

有了这个：

```
result = "Target"; 
```

所以我尝试使用这个正则表达式：

寻找：`:bthis.CSType = typeof(*);\n:bthis.CSTypeString = "{[^"]+}";\n:bthis.MappedCSType = SQLTypes.MappedCSType.*;`

代替：`result = "\1";`

但是有一个错误：`Grouped expression is missing ')'.`

我的表达有问题吗？你的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:26:10.000

我认为您的正则表达式的问题在于您没有定义组。`{[^"]+}`我想您尝试使用语法上不正确的对来定义组。组使用圆括号定义`()`。也`typeof(*)`不会匹配`typeof(DateTimeOffset?)`。

您可以尝试以下 xpath

```
this.CSType = typeof\(.*\);\nthis.CSTypeString = "([^"]+)";\nthis.MappedCSType = SQLTypes.MappedCSType.* 
```

注意一对圆括号`([^"]+)`。该组即组 1 将匹配`Target`字符串。[您可以在http://regexpal.com](http://regexpal.com)验证此 xpath

希望这可以帮助

# javascript - jqPlot graph moves to the right after zooming

> ID：11589751
> 
> 赞同：1
> 
> 时间：2012-07-21T05:29:32.390
> 
> 标签：javascript, zooming, jqplot

I'm using jqplot to draw a curve, now problem with zoom, the graph will be moved to the right after zooming. The zoom example works, I don't know what's wrong in my implementation. Could anyone give me some hints? thanks!

Code:

```
<!doctype html>
<html lang="en">
<head>
    <title>Zoom Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../jquery.jqplot.min.css" />
</head>
<body>
<div style="padding-left: 100px;">
    <h3>Up Link</h3>
    <div id="chartUp1" style="height:300px; width:800px;"></div>
    <div><button id="chartUp1ResetZoom">Reset Zoom</button></div>
</div>
<script type="text/javascript" src="../jquery.min.js"></script>
<script type="text/javascript" src="../jquery.jqplot.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.canvasAxisTickRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.dateAxisRenderer.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.pointLabels.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.cursor.min.js"></script>
<script type="text/javascript" src="../plugins/jqplot.highlighter.min.js"></script>

<script type="text/javascript">
$(function(){
    var dataUp1 = [
        [ ['2012-07-12 06:45:52', 0] ,['2012-07-12 06:46:12', 969] ,['2012-07-12 06:46:23', 672] ,['2012-07-12 06:46:33', 835] ,['2012-07-12 06:46:43', 339] ,['2012-07-12 06:46:53', 1047] ,['2012-07-12 06:47:04', 1004] ,['2012-07-12 06:47:14', 107] ,['2012-07-12 06:47:24', 51] ,['2012-07-12 06:47:34', 40] ,['2012-07-12 06:47:44', 711] ,['2012-07-12 06:47:54', 845] ,['2012-07-12 06:48:04', 1005] ,['2012-07-12 06:48:15', 716] ,['2012-07-12 06:48:25', 596] ,['2012-07-12 06:48:35', 748] ,['2012-07-12 06:48:45', 78] ,['2012-07-12 06:48:55', 49] ,['2012-07-12 06:49:05', 60] ,['2012-07-12 06:49:15', 57] ,['2012-07-12 06:49:25', 67] ,['2012-07-12 06:49:36', 468] ,['2012-07-12 06:49:46', 371] ,['2012-07-12 06:49:56', 865] ,['2012-07-12 06:50:06', 516] ,['2012-07-12 06:50:16', 982] ,['2012-07-12 06:50:26', 874] ,['2012-07-12 06:50:37', 571] ,['2012-07-12 06:50:47', 211] ,['2012-07-12 06:50:57', 238] ,['2012-07-12 06:51:07', 363] ,['2012-07-12 06:51:17', 29] ,['2012-07-12 06:51:27', 182] ,['2012-07-12 06:51:37', 157] ,['2012-07-12 06:51:48', 48] ,['2012-07-12 06:51:58', 57] ,['2012-07-12 06:52:08', 529] ,['2012-07-12 06:52:18', 47] ,['2012-07-12 06:52:28', 56] ,['2012-07-12 06:52:39', 90] ,['2012-07-12 06:52:49', 537] ,['2012-07-12 06:52:59', 423] ,['2012-07-12 06:53:09', 222] ,['2012-07-12 06:53:19', 306] ,['2012-07-12 06:53:29', 203] ,['2012-07-12 06:53:39', 38] ,['2012-07-12 06:53:50', 533] ,['2012-07-12 06:54:00', 561] ,['2012-07-12 06:54:10', 280] ,['2012-07-12 06:54:20', 422] ,['2012-07-12 06:54:31', 868] ,['2012-07-12 06:54:40', 583] ,['2012-07-12 06:54:51', 331] ,['2012-07-12 06:55:01', 356] ,['2012-07-12 06:55:11', 586] ,['2012-07-12 06:55:21', 492] ,['2012-07-12 06:55:31', 203] ,['2012-07-12 06:55:42', 237] ,['2012-07-12 06:55:52', 1022] ,['2012-07-12 06:56:02', 1033] ,['2012-07-12 06:56:12', 346] ,['2012-07-12 06:56:22', 68]  ]
    ];

    var options = {
        seriesDefaults: {
            showMarker: false,
            neighborThreshold: -1
        },
        legend: {
            show: true,
            placement: 'outsideGrid'
        },
        /*highlighter: {
            show: true,
            tooltipLocation: 'n',
            tooltipAxes: 'xy',
            useAxesFormatters: true
        },*/
        cursor: {
            show: true,
            zoom: true
        }
    };
    var plotUp1 = $.jqplot('chartUp1', dataUp1, $.extend({}, options, {
        axes: {
            xaxis: {
                renderer: $.jqplot.DateAxisRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions: {
                    angle: -45,
                    formatString: '%m/%d %H:%M:%S'
                },
                min: '2012-07-12 06:45:52',
                max: '2012-07-12 06:56:22'
            }
        },
        series: [
            { label: 'Send Rate' }
        ]
    }));
    $('#chartUp1ResetZoom').click(function(){
        plotUp1.resetZoom();
    });
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:29:10.670

这不是什么大问题，通常当您放大绘图时，该绘图应该被缩放并且其他旁边的值应该被拉伸。如果发生这种情况，那就没什么问题了。

# jquery - jquery - enable specific items in asp.net radiobuttonlist

> ID：11589753
> 
> 赞同：1
> 
> 时间：2012-07-21T05:29:42.630
> 
> 标签：jquery, asp.net, radiobuttonlist

I know this has been asked before, but it is not working for my scenario. **I have a jquery ui modal form** which contains a radiobuttonlist with static values:

```
 <asp:RadioButtonList ID="rblSlots" runat="server" ViewStateMode="Disabled">
    <asp:ListItem Value="30" enabled="false">30 Minutes</asp:ListItem>
    <asp:ListItem Value="60" enabled="false">1 Hour</asp:ListItem>
    <asp:ListItem Value="90" enabled="false">1 1/2 Hours</asp:ListItem>
    <asp:ListItem Value="120" enabled="false">2 Hours</asp:ListItem>
    <asp:ListItem Value="150" enabled="false">2 1/2 Hours</asp:ListItem>
    <asp:ListItem Value="180" enabled="false">3 Hours</asp:ListItem>
    </asp:RadioButtonList> 
```

Which of course renders as:

```
 <table id="rblSlots">
    <tr>
    <td><span disabled="disabled"><input id="rblSlots_0" type="radio" name="rblSlots" value="30" disabled="disabled" /><label for="rblSlots_0">30 Minutes</label></span></td>
    </tr><tr>
    <td><span disabled="disabled"><input id="rblSlots_1" type="radio" name="rblSlots" value="60" disabled="disabled" /><label for="rblSlots_1">1 Hour</label></span></td>
    </tr><tr>
    <td><span disabled="disabled"><input id="rblSlots_2" type="radio" name="rblSlots" value="90" disabled="disabled" /><label for="rblSlots_2">1 1/2 Hours</label></span></td>
    </tr><tr>
    <td><span disabled="disabled"><input id="rblSlots_3" type="radio" name="rblSlots" value="120" disabled="disabled" /><label for="rblSlots_3">2 Hours</label></span></td>
    </tr><tr>
    <td><span disabled="disabled"><input id="rblSlots_4" type="radio" name="rblSlots" value="150" disabled="disabled" /><label for="rblSlots_4">2 1/2 Hours</label></span></td>
    </tr><tr>
    ...etc... 
```

in my form opener dialog i make an ajax post to grab some vaues from my webservice among them 'timespan' in the following javascipt, i have set timespan to a static variable for debugging, i want to enable the radio buttons which are <= timespan.

```
 var strTS = "30,60,90,120,150,180";
    var aryTS = strTS.split(",");
    var timespan = 120;

    for (i = 0; i <= 5; i++) {

        if ($('#rblSlots [value=' + aryTS[i] + ']').val() <= timespan) {

           $('#rblSlots [value=' + aryTS[i] + ']').removeAttr("disabled");

        }
    }

    $("#appointment-form").dialog("open");
    return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T05:34:42.043

你可以使用`prop`方法：

```
$('#rblSlots input[value=' + timespan + ']').prop('disabled', false) 
```

[演示](http://jsfiddle.net/8q5Q3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T01:52:55.903

清除 IE 和 Firefox 中的缓存后，发现上面的代码在 Firefox 中确实可以工作，但由于某种原因它在 IE 中不起作用。所以我放弃了这种方法，因为无论如何都让我看起来更美观。

放弃了表中单选按钮的 RadioButtonList。
给出了唯一的类名和 style='display:none;' 到包含收音机的行。和我的javascript：

```
 for (i = 0; i <= 5; i++) {
      if (aryTS[i] <= timespan) {
        $(".Slot_" + aryTS[i]).show();
      }
    } 
```

在 IE 和 Firefox 中运行良好

# java - Java样板代码：连接管理

> ID：11589757
> 
> 赞同：1
> 
> 时间：2012-07-21T05:30:18.143
> 
> 标签：java, connection-pooling, meta

在处理连接池时，我们通常有以下代码：

```
connection c = pool.borrow();
try {
    business-logic-using-connection(c);
}
catch(connectionException e) {
    connectionBad = true;
} 
finally{
    if (connectionBad) {
        pool.evict(c);
    } else {
       pool.return(c);
    }
 } 
```

问题是如何使这个样板代码更简单，以便可以执行以下操作：

```
getConnectionAndDoWork(pool, business-logic-code) 
```

人们可以在其中插入他们的业务逻辑，而不必在整个地方重复相同的连接管理代码。一种方法是为业务逻辑代码创建一个接口，例如`doWorkWithConnection`它需要一个连接并做一些工作。但是，这限制了应该返回的业务逻辑代码；

在Java中有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:52:39.573

使用像 Spring 用于[程序化事务管理](http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/transaction.html#transaction-programmatic)的回调模式。

```
interface PooledConnectionCallback<T> {
  T doWithConnection(Connection c);
}

Pool pool = new Pool(poolParams);
Integer returnedValue = pool.execute(
  new PooledConnectionCallback<Integer>() {
    public Integer doWithConnection(Connection c) {
      int someReturnValue = businessLogicUsingConnection(c);
      return someReturnValue;
    }}); 
```

在该`Pool#execute`方法中，您可以拥有处理异常和清理所需的样板代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:06:43.907

如果您使用的是 Spring，请考虑使用 JdbcTemplate 或 NamedParameterJdbcTemplate：

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html)

即使您不使用 Spring，您仍然可以使用相同的基本模板方法模式。只是谷歌“模板方法”。有很多关于它的文章。

# ios - iOS：使用bitset<100> b是否正确；在 iOS 中？

> ID：11589765
> 
> 赞同：1
> 
> 时间：2012-07-21T05:32:31.270
> 
> 标签：ios, xcode

是否可以像 C++ 一样`bitset`在**iOS中使用？**或者我如何`bitset`在**iOS**编码中使用？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T05:42:40.300

iOS 的主要开发语言是 Objective-C，它不能使用 C++ 类型。

但是，您可以将 C++ 源代码添加到您的项目或使用[Objective-C++](https://stackoverflow.com/questions/3684112/what-is-objective-c-and-can-i-use-this-language-in-xcode)（它允许您混合 Objective-C 和 C++）并因此使用`std::bitset`.

# c++ - 为什么这段代码不会产生编译错误？

> ID：11589766
> 
> 赞同：3
> 
> 时间：2012-07-21T05:32:53.540
> 
> 标签：c++, templates, visual-c++

```
template<class T>
void foo()
{
    M
} 
```

除非我实例化它，否则 Visual C++ 不会告诉我上面的代码包含错误。为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T05:36:20.103

因为 Visual C++ 出错了。它没有实现[两阶段查找](https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed)。即使您不实例化它，它也应该检查模板的语法是否正确，但它不会这样做。

[GCC 不接受它。](http://ideone.com/j8ruO)并不是说这必然意味着它是不正确的，但是无论如何，你都有一个例子来说明应该发生的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T11:08:50.597

C++ 标准包含对这个问题的非正式描述，它描述了我认为是一个很好的指导方针，并且被许多人视为规范所暗示的规范性要求。

然而，实现可以指向标准的规范部分，这些部分允许它们比“显而易见的”规则似乎陈述的更进一步。我将在下面描述这一点。

## 非规范性描述

该标准允许实现在实例化之前不检查模板定义。它没有给出关于“模板定义”何时实际上应该是模板定义的正式描述，但通常的实现是做“大括号平衡”/“括号平衡”的形式：从最外面的大括号开始定义的主体，数到你碰到最后一个右括号。中间的一切都被忽略了。

我想标准中的一个例子进一步澄清了这一点

```
template<class T> class X {
  // ... (omitted) ...
  void g(T t) {
    +; // may be diagnosed even if X::g is not instantiated
  }
}; 
```

因此，对模板定义中的语法或语义错误进行早期诊断是一种“实现质量”。

* * *

## 规范性描述

这些规则具有“不需要诊断”的质量。*值得注意的是，即使模板被实例化*，这些规则的实现也被授予不诊断格式错误的模板定义的许可，尽管标准的非规范性说明是这样说的。如果违反了不需要诊断的任何规则，则实现可以自由地对整个程序做任何它想做的事情。

应该注意的是，也没有语法错误的“模板定义”，因为这个术语是由语法本身定义的。孤独`+`使整个封闭的上下文成为一些无意义的标记汤。

Last but not least, the committee knows about these "loopholes", but there was no majority to change this so far, as far as I know.

# iphone - UIKit 字符串绘制方法中的错误？

> ID：11589768
> 
> 赞同：4
> 
> 时间：2012-07-21T05:33:27.500
> 
> 标签：iphone, objective-c, ios

为了复制我在应用程序中遇到的崩溃，我必须创建一个重复率略高的示例，这可能不切实际，但可以准确地演示我的应用程序中发生的情况。在使用 NSString 在后台线程上绘制 NSString 时`NSOperations`，有时会发生崩溃，崩溃之前堆栈跟踪上的最后一次调用是`WebCore::FontFallbackList::~FontFallBackList().`

```
- (void)viewDidLoad
{
    queue = [[NSOperationQueue alloc] init];
    [NSTimer scheduledTimerWithTimeInterval:0.0001 target:self selector:@selector(timerDidFire:) userInfo:nil repeats:YES];
}

-(void)timerDidFire:(NSTimer*)timer
{
    NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^{
        CGRect rect = CGRectMake(0, 0, 50, 50);
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(rect.size.width, rect.size.height), YES, 0.0);
        NSString *string = @"Sd";
        [string drawInRect:rect withFont:[UIFont boldSystemFontOfSize:12] lineBreakMode:UILineBreakModeTailTruncation]; 
        UIGraphicsEndImageContext();     
    }];
    [queue addOperation:op];
} 
```

您可以使用上面的代码轻松复制此崩溃。任何人都对这次崩溃的性质以及为什么会发生有任何见解？（这个问题的解决方法是设置`[queue setMaxConcurrentOperations:1];`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:23:13.370

这似乎是 iOS 5.x 中的回归：它发生在 5.0 和 5.1 模拟器以及 5.1 设备上，但不会在 4.3 模拟器或 4.3.2 设备上发生。

特别是似乎被破坏的字符串绘图 - 如果您所做的只是字符串绘图（避免创建/销毁上下文的开销），崩溃几乎立即发生：

```
-(void)threadFunc:(UIFont *)font {
  @autoreleasepool {
    NSString *string = @" ";
    CGRect r = {{0,0},{50,50}};
    UIGraphicsBeginImageContextWithOptions(r.size, YES, 0);
    for(;;) {
      @autoreleasepool {
        [string drawAtPoint:r.origin withFont:font];
      }
    }
    UIGraphicsEndImageContext();
  }
}

-(void)startThreads
{
  UIFont * font = [UIFont systemFontOfSize:12];
  for (int i = 2; i--;)
  {
    [NSThread detachNewThreadSelector:@selector(threadFunc:) toTarget:self withObject:font];
  }
} 
```

**编辑：**它仅在多核环境中“几乎即时”（即双核设备或模拟器，假设是多核 Mac）。否则，崩溃大约需要 10-20 分钟。我没有双核 iOS 4.x 设备（唯一的可能性似乎是 iPad 2），但一个多小时后单核设备没有崩溃。

我已经向 Apple 提出了一个错误，如果它影响到你，我鼓励你也这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T22:00:47.713

一个简单的解决方法是用 NSAttributedString 替换 NSString。

如果像这样修改，@maq 列出的崩溃测试不会崩溃：

```
-(void)threadFunc:(UIFont *)font {
    @autoreleasepool {
        NSString *string = @" ";
        NSMutableAttributedString *test = [[NSMutableAttributedString alloc] initWithString:string];
        CGRect r = {{0,0},{50,50}};
        UIGraphicsBeginImageContextWithOptions(r.size, YES, 0);
        for(;;) {
            @autoreleasepool {
                 UIFont *font=[UIFont fontWithName:@"Helvetica-Bold" size:30.0f];
                [test addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, test.length)];
                [test drawAtPoint:r.origin];
            }
        }
        UIGraphicsEndImageContext();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T05:41:41.423

我不相信 UIKit 是线程安全的，从后台线程绘制非常时髦。它可能有效，也可能无效。

UIGraphicsBeginContext 的文档实际上明确指出您应该只从主线程调用它。显然，多线程完全不在讨论范围内。

# forms - HTML5中的输入类型=“文本”与输入类型=“搜索”

> ID：11589770
> 
> 赞同：148
> 
> 时间：2012-07-21T05:33:48.010
> 
> 标签：forms, html, input

我是 HTML5 新手，开始使用 HTML5 的新表单输入字段。当我使用表单输入字段时，尤其是`<input type="text" />`在`<input type="search" />`IMO 中，所有主要浏览器（包括 Safari、Chrome、Firefox 和 Opera）都没有任何区别。并且搜索字段的行为也类似于常规文本字段。

`input type="text"`那么，HTML5和`input type="search"`HTML5有什么区别呢？

真正的目的是`<input type="search" />`什么？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-07-21T05:41:30.397

现在，他们之间没有什么大不了的——也许永远不会有。然而，关键是让浏览器制造商能够根据需要使用它做一些特别的事情。

想想`<input type="number">`在手机上，调出数字键盘，或`type="email"`调出特殊版本的键盘，@ 和 .com 以及其他可用的。

在手机上，如果他们愿意，搜索可以调出一个内部搜索小程序。

另一方面，它可以帮助当前的开发人员使用 css。

```
input[type=search]:after { content : url("magnifying-glass.gif"); } 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-21T05:41:04.313

> 它在大多数浏览器中完全没有任何作用。它的行为就像一个文本输入。这不是问题。该规范不要求它做任何特别的事情。WebKit 浏览器对它的处理确实有点不同，主要是在样式方面。
> 
> 默认情况下，WebKit 中的搜索输入具有嵌入边框、圆角和严格的排版控制。

还，

> 这在我所知道的任何地方都没有记录，也没有在规范中记录，但是如果您在输入中添加结果参数，WebKit 将应用一个带有下拉箭头的小放大镜来显示以前的结果。

```
<input type=search results=5 name=s> 
```

[参考](http://css-tricks.com/webkit-html5-search-inputs/)

最重要的是，它为`input type`.

**更新：**

[Chrome 51 移除了对 results 属性的支持：](https://developers.google.com/web/updates/2016/08/chrome-53-deprecations#remove-results-attribute-for-input-typesearch)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-02-08T07:31:40.747

在视觉/功能上，如果输入类型是“**搜索**”，则有 2 个差异：-

1.  您会在输入/搜索框的末尾获得一个“ **X** ”符号以清除框中的文本
2.  按键盘上的“ **Esc** ”键也会清除文本

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-17T15:49:14.977

在某些浏览器上，它还支持“结果”和“自动保存”属性，通过放大镜图标提供自动“最近搜索”功能。

[更多信息](http://www.wufoo.com/html5/types/5-search.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-26T00:20:32.487

实际上要非常小心假设它什么都不做。当您使用类型搜索访问样式输入时，它们具有某些无法更改的属性。尝试更改一个边框，您会发现这是不可能的。还有其他几个不允许的 CSS 属性，请查看[此](http://css-tricks.com/webkit-html5-search-inputs/)以了解所有详细信息。

正如 Jashwant 所提到的，还有 result 属性，尽管它不能很好地工作，除非您还包括 autosave 属性。但是，该下拉菜单在大多数浏览器中不起作用，因此使用风险自负。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-20T01:05:02.710

浏览器的操作有所不同，当您键入一些单词然后`type="search"`在 chrome/safari 中输入 ESC 时，输入框将被清除。但在`type="text"`场景中，这些话不会被清除。所以要小心选择类型，尤其是当你将它用于自动完成或搜索相关功能时

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-12-08T02:36:01.500

使用 input type="search" 使 keybord enterkey 的文本显示“search”，这可能会改善用户体验。但是，如果使用这种类型，则必须调整样式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-18T15:29:11.890

加分点：`input type="search`" 可以使用`onsearch`属性（虽然我注意到这在微软的新 Edge 浏览器中不起作用），这消除了编写自定义`onkeypress=if(key=13) { function() }`东西的需要。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-03-13T09:07:15.187

但它对你的输入元素有不好的影响，如果你设置

```
<input type="search"> 
```

在你的CSS中你设置

```
input {background: url("images/search_bg.gif");} 
```

它根本不会出现。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-03-09T05:17:15.860

这取决于程序员的观点，程序员可以通过查看类型轻松确定输入的目的，并且 CSS 样式和 JavaScript 或 JQuery 很容易验证输入中的规则。

# jquery - Jquery UI 选项卡不适用于 .tabs() 函数

> ID：11589773
> 
> 赞同：0
> 
> 时间：2012-07-21T05:35:07.177
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我对 JQUERY 完全陌生，我有一个项目，我必须在其中使用 JQUERY UI 选项卡我下载了一个 UI 选项卡并按照[此处](http://jqueryui.com/docs/Getting_Started)列出的所有说明进行操作， 我的 html 代码是：

```
 <div id="tab">
    <ul class="tabs">
        <li><a href="#tabs-1">Tab1</a></li>
        <li><a href="#tabs-2">Tab2</a></li>
        <li><a href="#tabs-3">Tab3</a></li>
    </ul> 
    <div class="tab-content" id="tabs1">Tab1</div>
    <div class="tab-content" id="tabs2">Tab2</div>
    <div class="tab-content" id="tabs3">Tab3</div> </div> 
```

我的 JQUERY 函数是：

```
 <script type="text/javascript">

    $(document).ready(function () {
        $('#tab').tabs();
    });
</script> 
```

问题是当我运行该页面时，它显示如下输出： ![这个](../Images/e81235affab2f8187f6b5c047c2f3a5f.png)

而且我无法使用标签导航...我将非常感谢您在这方面的帮助

在此先感谢并寻求您的及时帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:40:08.280

选项卡按钮中的链接：

```
<li><a href="#tabs-1">Tab1</a></li>
<li><a href="#tabs-2">Tab2</a></li>
<li><a href="#tabs-3">Tab3</a></li> 
```

需要匹配`id`选项卡的属性。您的链接使用`tabs-1`、`tabs-2`和 ，`tabs-3`但您的选项卡使用`tabs1`、`tabs2`和`tabs3`。

演示：http: [//jsfiddle.net/ambiguous/kbfjS/](http://jsfiddle.net/ambiguous/kbfjS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:40:23.347

将内容 div 重命名为此，你得到了 dash `-`。

```
<div class="tab-content" id="tabs-1">Tab1</div>
<div class="tab-content" id="tabs-2">Tab2</div>
<div class="tab-content" id="tabs-3">Tab3</div> 
```

# php - 网络安全：从哪里开始

> ID：11589777
> 
> 赞同：3
> 
> 时间：2012-07-21T05:36:36.957
> 
> 标签：php, mysql, security

我正在与一家托管公司合作，使用 PHP 和 MySQL。

我熟悉 SQL 注入和 XXS，并且我知道如何编写代码以使这些不会发生。但是，我仍然计划测试该网站的漏洞。

现在，我对 Web 开发有点陌生，而且我知道有很多关于网站安全的内容需要阅读。

1.  还有哪些其他攻击*通常*用于使用 PHP 和 MySQL 的网站和 Web 服务器？
2.  我如何防范这些攻击？
3.  即使我的代码是完美的，我还需要在托管公司的 Web 服务器配置中寻找哪些可能使 Web 服务器易受攻击的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:10:29.273

需要牢记的事情：

查找`PDO`用于数据库目的，而不是`mysql`or `mysqli`。（PDO 是一个包装器，它简化了不同类型数据库之间的差异——但也大大简化了安全性）。

PDO 的准备好的语句既使构建查询变得容易 100 倍，***也***使它们几乎可以防 SQL 注入，只要您始终准备语句（这对于 PDO 来说也很简单）。

花 15 分钟学习如何在其他两个 mysql 选项中使用 PDO 是非常值得的。

虽然这可能会保护您免受损害数据库的安全，但它并不能保护您免受您可能存储在数据库中以便稍后提供给用户的数据的影响。

在这方面：

1.  验证你从用户那里得到的一切——从表单输入到 GET/POST 值的一切
2.  将您写入用户页面的所有内容作为 html 转义
3.  `include $_GET["page"];`永远不要按原样接受用户输入，选择类等（例如：）

JavaScript——我的宝贝：

1.  了解闭包和模块/命名空间模式。
2.  将它们用于您编写的每个大型应用程序（尤其是任何需要收集任何用户信息等的应用程序）
3.  明白你不能阻止用户在你的网站上运行他们想要的任何东西，就像打开开发控制台并粘贴一些东西一样容易。
4.  了解#3，学习如何使用#1和#2来防止运行#3的用户访问用户提供给你的任何数据（或者你保留的关于用户的数据）

一般来说，将用户信息保留在 cookie 和 URL 字符串之外，并尽可能多地将其保留在 JS 闭包、POST 请求中，然后尽可能保留在用户会话、服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T07:06:38.083

A good resource to read is [OWASP](https://www.owasp.org/), which has a massive Wiki-style site full of information about web security. It can be quite heavy going, as there's a lot there, but it's a very good resource to keep in your bookmarks.

Another site that you might find useful is [PHP The Right Way](http://www.phptherightway.com/), which aims to help you write PHP code more securely and using best practices. This site is still quite new, but already has some good tips.

My advice for your code: the single best thing you can do to make your code secure is to use a decent PHP framework, instead of writing raw PHP code.

All the good frameworks have libraries that will help you avoid dangerous coding practices. For example, they all have database abstraction layers that no only make database work easier, but also much safer. If you follow the guidelines for the framework you're using, you'll be protecting yourself from a lot of the worst dangers. You still need to know what to look out for, of course, but that will help a lot.

My suggestion for a framework to use would be Symphony or CakePHP, but there are loads of others out there.

Hope that helps.

# dll - Mingw、XAudio2 和 GetProcAddress 失败

> ID：11589786
> 
> 赞同：0
> 
> 时间：2012-07-21T05:38:28.930
> 
> 标签：dll, mingw, xaudio2

我正在尝试将 XAudio2 与 Mingw 一起使用。由于我无法弄清楚我应该做什么来让 Mingw 链接 XAudio2，我想我会尝试纯粹通过加载 dll 来使用 XAudio2。但是以下代码无法使用 GetProcAddress 找到 XAudio2Create。

```
#include <windows.h>

static HMODULE xaudio2 = NULL;

int WINAPI WinMain(HINSTANCE hinstance, HINSTANCE hprevinstance, LPSTR lpcmdline, int ncmdshow) {
    xaudio2 = LoadLibraryA("XAudio2_2.dll");
    if (xaudio2 == NULL) {
        MessageBox(NULL, L"LoadLibrary failed", 0, 0);
    }

    void* fnc = GetProcAddress(xaudio2, "XAudio2Create");
    if (fnc == NULL) {
        MessageBox(NULL, L"GetProcAddress failed", 0, 0);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:02:38.497

我发现你必须通过 COM 和 CoCreateInstance()。就像是

```
#include <windows.h>
#include <stdio.h>
#include <XAudio2.h>

int WINAPI WinMain(HINSTANCE hinstance, HINSTANCE hprevinstance, LPSTR lpcmdline, int ncmdshow) {
    WAVEFORMATEX format;
    format.wFormatTag = 1;
    format.nChannels = 1;
    format.nSamplesPerSec = 44100;
    format.nAvgBytesPerSec = 44100;
    format.nBlockAlign = 1;
    format.wBitsPerSample = 8;
    format.cbSize = 0;

    CoInitializeEx(NULL, COINIT_MULTITHREADED);

    IXAudio2* pXAudio2 = NULL;
    IXAudio2SourceVoice* source = NULL;
    IXAudio2MasteringVoice* master = NULL;

    HRESULT hr;
    if ( FAILED(hr = XAudio2Create( &pXAudio2, 0, XAUDIO2_DEFAULT_PROCESSOR ) ) ) {
        MessageBox(0, L"hi", L"hi", 0);
    }

    if ( FAILED(hr = pXAudio2->CreateMasteringVoice(&master ) ) ) {
        MessageBox(0, L"hi", L"hi", 0);
    }

    if ( FAILED(hr = pXAudio2->CreateSourceVoice(&source, &format) ) ) {
        MessageBox(0, L"hi", L"hi", 0);
    }

    char str[30];

    float freq = 0.0;
    source->GetFrequencyRatio(&freq);
    sprintf(str, "%f", freq);
        MessageBoxA(0, str, str, 0);

    UINT32 OperationSetCounter = 0;
    UINT32 OperationID = UINT32(InterlockedIncrement(LPLONG(&OperationSetCounter)));

    if ( FAILED(hr = source->SetFrequencyRatio(1.1,OperationID ) ) ) {
        MessageBox(0, L"hi", L"hi", 0);
    }

    if ( FAILED(hr = pXAudio2->CommitChanges(OperationID ) ) ) {
        MessageBox(0, L"hi", L"hi", 0);
    }

    float freq2 = 0.0;
    source->GetFrequencyRatio(&freq2);
    sprintf(str, "%f", freq2);
    MessageBoxA(0, str, str, 0);

    Sleep(2000);
    float freq3 = 0.0;
    source->GetFrequencyRatio(&freq3);
    sprintf(str, "%f", freq3);
    if (freq3 != 1.0) {
        MessageBoxA(0, str, str, 0);
    }

    source->Start(0);
    return 0;
} 
```

# vb6 - 如何重置日期时间选择器

> ID：11589788
> 
> 赞同：2
> 
> 时间：2012-07-21T05:38:55.183
> 
> 标签：vb6

使用 datetimepicker 默认最小日期和最大日期是

```
dtpicker1.mindate = cdate("01/01/2012")
dtpicker1.maxdate = cdate("31/01/2012") 
```

我想在运行时更改 datetimepicker 中的最小日期和最大日期。

按钮1

我再次通过了mindate和maxdate

```
dtpicker1.mindate = cdate("01/02/2012")
dtpicker1.maxdate = cdate("28/02/2012") 
```

但它显示错误为“ `A value was specified for the MinDate Property that is higher than current value of MaxDate.`”

如何解决这个问题呢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:21:41.767

两种方法可以做到这一点：
**1）**如果你的默认值总是`MinDate`和然后 你需要在定义之前定义如下：`MaxDate``'01/01/2012'``'31/01/2012'``MaxDate``MinDate`

```
dtpicker1.maxdate = cdate("28/02/2012")
dtpicker1.mindate = cdate("01/02/2012") 
```

**2）**如果您的默认值`MinDate`并且`MaxDate`每次都更改，则首先设置`MinDate`低于您的期望`MaxDate`并`MaxDate`高于您的期望，然后`MinDate` 您可以设置您想要的内容，如下所示：`MinDate``MaxDate`

```
dtpicker1.mindate = cdate("01/01/1988")
dtpicker1.maxdate = cdate("31/12/2030")
dtpicker1.mindate = cdate("01/02/2012")
dtpicker1.maxdate = cdate("28/02/2012") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:51:21.653

您必须先更改 maxdate。并检查 dtpicker1 是否必须改为 dtpicker2

```
dtpicker1.maxdate = cdate("28/02/2012")    
dtpicker1.mindate = cdate("01/02/2012") 
```

# javascript - Javascript 计时器未更新

> ID：11589793
> 
> 赞同：2
> 
> 时间：2012-07-21T05:39:38.937
> 
> 标签：javascript, timer, settimeout

我知道已经问了一百万个 JavaScript 计时器问题，但我无法弄清楚这个问题。

元素第`#drive`一次更新（到`0`），但之后没有更新，好像要么`setTimeout()`不工作要么`this.count++`不工作。任何人都知道为什么这不起作用？

谢谢...

```
var timer = {
    timerRunning: false,
    count: 0,
    delay: 1000,

    tick: function() {
        $("#drive").html(this.count);
        this.count++;
        setTimeout(function(){
            if (this.timerRunning)
                this.tick();
        }, this.delay);
    },

    start: function() {
        this.timerRunning = true;
        this.tick();
    },

    stop: function() {
        this.timerRunning = false;
    }
};

timer.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T05:42:59.253

`this`回调内部的值`setTimeout()`不再是您的计时器对象（它将是`window`对象）。这就是为什么它不起作用。

您可以通过为您的对象设置一个闭包变量并改用它来修复它：

```
tick: function() {
    $("#drive").html(this.count);
    this.count++;
    var self = this;
    setTimeout(function(){
        if (self.timerRunning)
            self.tick();
    }, this.delay);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:49:07.477

回调绑定到不同的 this 变量。这是一种解决方法：

```
 tick: function() {
        var self = this;
        $("#drive").html(this.count);
        this.count++;
        setTimeout(function(){
            if (self.timerRunning)
                self.tick();
        }, this.delay);
    } 
```

# c# - If Else DateTime DayOfWeek C#

> ID：11589798
> 
> 赞同：0
> 
> 时间：2012-07-21T05:40:39.583
> 
> 标签：c#, winforms, datetime

例如，如果今天是星期一或星期二，并且与当前系统时间相比，如果他的日程安排在（给定的）时间范围内，则用户可以查看他的密码，但即使今天是星期一或星期二，如果他的给定时间是，假设下午 1:30-5:30，还没有或已经过了那个时间，他将无法查看他的密码。

我希望你能得到练习。下面的代码可以正常工作，但是，如果我把同一天放两次，比如周二和周二，就会发生冲突。如何修复此条件语句？谢谢。

这是我的代码：

```
DateTime systemtime = DateTime.Now;
DateTime timestart = Convert.ToDateTime(txtTimestart.Text);
DateTime timeend = Convert.ToDateTime(txtTimeend.Text);
var systemday = DateTime.Now.DayOfWeek.ToString();
var day1 = Convert.ToString(txtDay1.Text);
var day2 = Convert.ToString(txtDay2.Text);

if (systemday != day1 || systemday != day2)
{
    if (systemtime < timestart || systemtime > timeend)
    {
        MessageBox.Show("You are not authenticated to view your password.", "Get Password Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        return;
    }
    else
    {
        MessageBox.Show("Your password is ...", "Get Password Success", MessageBoxButtons.OK, MessageBoxIcon.None);
        return;
    }
}
else
{
    if (systemtime < timestart || systemtime > timeend)
    {
        MessageBox.Show("You are not authenticated to view your password.", "Get Password Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        return;
    }
    else
    {
        MessageBox.Show("Your password is ...", "Get Password Success", MessageBoxButtons.OK, MessageBoxIcon.None);
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:49:41.033

以您为例，这行代码的意思是：*如果当前日期（系统日）不是星期一或不是星期二*。

```
if (systemday != day1 || systemday != day2) 
```

现在，如果今天是星期二，那么第一个比较为真的不是星期一，它将进入 if 块。如果今天是星期一，则不是星期二，这使得第二次比较 (Systemday != day2) 为真。如果今天不是星期一和星期二，那么它使两个比较 (systemday != day1 || systemday != day2) 都为真。简而言之，您的代码永远不会落入 else 中。

现在为您的问题使用

```
if (systemday == day1 || systemday == day2)
{ 
    if(systemtime>=timestart && systemtime <=timeend)
    {
        MessageBox.Show("Your password is ...", "Get Password Success", MessageBoxButtons.OK, MessageBoxIcon.None);
        return;
    }
    else
    {
        MessageBox.Show("You are not authenticated to view your password.", "Get Password Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        return;
    }
} 
```

# php - 通过php代码连接数据库

> ID：11589803
> 
> 赞同：0
> 
> 时间：2012-07-21T05:41:24.577
> 
> 标签：php, mysql

我正在用 PHP 编写游戏，并使用以下代码连接到数据库

```
//$sqldb=mysql_connect('godaddy.hostedresource.com', 'godaddyUserName', 'godaddyPassword') OR die ('Unable to connect to database! Please try again later.');
$sqldb=mysql_connect('localhost', 'root', 'mypassword') OR die ('Unable to connect to database! Please try again later.'); 
```

这里的诀窍是，如果我在生产服务器上，我会注释掉 godaddy 数据库；当我将代码上传到服务器时，我会注释掉本地主机代码。

不幸的是，发生了不可抗拒的事情，我上传了错误连接的代码，注释掉了；这导致 24 小时锁定客户！:(

有没有办法让代码判断它是否在 localhost 服务器上，如果不是，则查找 godaddy 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:55:14.303

你可以试试这个来确定它是在 live 还是 localhost

```
if($_SERVER["SERVER_NAME"] == "localhost" 
    && 
   $_SERVER["SERVER_ADDR"] == "127.0.0.1"){
  // in localhost
  $hostname = "localhost";
  $username = "localuser";
  $password = "localpassword";
}else{
  // not in localhost
 $hostname = "livehost";
 $username = "liveuser";
 $password = "livepassword";
} 
```

如果无法连接到数据库但将错误保存到文件中，则失败。

```
if(!mysql_connect($hostname,$username,$password)){
 file_put_contents("mysql_connect.error",mysql_error(),FILE_APPEND);
 die("Couldn't connect to database");
} 
```

一个建议，尽量不要使用 mysql_* ，切换到 PDO 或 mysqli ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:45:49.447

```
if ($_SERVER['SERVER_NAME'] == 'the.name.of.your.devel.server') {
    $host = 'localhost';
} else {
    $host = 'name.of.godaddy.server';
}
$sqldb = mysql_connect($host, ....); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T05:45:06.780

我通常使用获取网站的 URL / 域的方法？这可以在某些情况和设置下工作。否则，如果您使用固定IP操作，也可以使用此方法

查看使用 $_SERVER 的方法

[PHP $_SERVER](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T05:45:21.640

一种方法是让您检查您的外部 IP 地址并查看您的位置。解决方案应该通过查看`$_SERVER`全局变量内的属性来呈现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T05:53:49.060

我有一个很好的建议：你编写一个游戏，游戏是一个大程序，你不要在大程序中直接使用 mysql* 函数，因为你应该自己处理它们，比如错误处理。我建议你使用 DB-Handler。请谷歌：DB-Handler PHP

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T05:58:00.120

正如其他人所提到的，您可以使用该`$_SERVER`变量获取您的脚本正在运行的当前站点。但是，我想提供一个替代解决方案。

您可以在您的网站（本地和生产）中创建一个文件夹，例如`config`，然后在其中存储一个配置文件，例如`config.php`，使用以下内容：

```
<?php
// Local
$db_host = 'localhost';
$db_username = 'root';
$db_password = 'mypassword';
?> 
```

对于生产：

```
<?php
// Production
$db_host = 'godaddy.hostedresource.com';
$db_username = 'godaddyUserName';
$db_password = 'godaddyPassword';
?> 
```

并禁止使用目录中的`.htaccess`文件访问目录，例如：

```
deny from all 
```

然后，在您的 PHP 代码中，执行以下操作：

```
<?php
require_once($_SERVER["DOCUMENT_ROOT"] . "/config/config.php");
$sqldb=mysql_connect($db_host, $db_username, $db_password) OR die ('Unable to connect to database! Please try again later.');
?> 
```

现在，只需将不同的配置文件留在它们所在的位置并上传其他所有内容，这样您的代码就可以在运行时访问不同的配置文件。

此外，该`.htaccess`文件应防止任何人通过 HTTP 访问该文件，并且在 PHP 标记中包含文件内容以及 .php 扩展名应防止任何人在能够访问该文件时看到任何内容（PHP 将解析在渲染之前的文件，并且不会输出任何内容）。

# objective-c - 设置核心数据对象的标量属性时的 EXC_BAD_ACCESS (IOS 5)

> ID：11589808
> 
> 赞同：1
> 
> 时间：2012-07-21T05:41:58.293
> 
> 标签：objective-c, ios, core-data, ios5

我在 IOS 5.1 模拟器中运行以下代码：

```
Table* sparkFront =
  [NSEntityDescription insertNewObjectForEntityForName:@"Table"
                                inManagedObjectContext:_context];
NSLog(@"%@", sparkFront);
NSEntityDescription* entity = [NSEntityDescription entityForName:@"Table"
                                          inManagedObjectContext:_context];
NSDictionary* dict = [entity propertiesByName];
for (NSObject* key in [dict allKeys])
{
  NSLog(@"%@", key);
}
sparkFront.columnValuesAddress = 0x606; 
```

此代码在最后一行出现 EXC_BAD_ACCESS 崩溃。Table 对象是一个核心数据对象，实现如下：

```
@interface Table : NSManagedObject
@property (nonatomic) int32_t columnValuesAddress;
@end 
```

我知道 Core Data 本身并不做标量类型，但这是一个仅限 IOS 5+ 的应用程序，我的印象是取消/装箱是自动完成的。上述代码在崩溃前的输出表明我的上下文和实体是好的：

```
2012-07-20 22:17:52.714 otest[95147:7b03] <NSManagedObject: 0x9c87b20> (entity: Table; id: 0x9c86a80 <x-coredata:///Table/t2C0D90D5-E381-4BD0-B65D-8FC83C6D50DB2> ; data: {
columnValuesAddress = 0;
})
2012-07-20 22:17:52.716 otest[95147:7b03] columnValuesAddress 
```

崩溃后，问题报告显示如下：

```
Application Specific Information:
objc_msgSend() selector name: isNSNumber__
Simulator libSystem was initialized out of order.

Thread 0 Crashed:
0   libobjc.A.dylib                 0x00635098 objc_msgSend + 12
1   CoreData                        0x05c2e833 _PFManagedObject_coerceValueForKeyWithDescription + 483
2   CoreData                        0x05bfe3d1 _sharedIMPL_setvfk_core + 209
3   CoreData                        0x05c16687 _svfk_0 + 39
4   ECMCalTests                     0x0187f8f1 -[ECMCalTests testInsertRecords] + 849 (ECMCalTests.m:73)
5   CoreFoundation                  0x003f74ed __invoking___ + 29
6   CoreFoundation                  0x003f7407 -[NSInvocation invoke] + 167
7   SenTestingKit                   0x201039c4 -[SenTestCase invokeTest] + 184
8   SenTestingKit                   0x20103868 -[SenTestCase performTest:] + 183
9   SenTestingKit                   0x201034a9 -[SenTest run] + 82
10  SenTestingKit                   0x20106db2 -[SenTestSuite performTest:] + 106
11  SenTestingKit                   0x201034a9 -[SenTest run] + 82
12  SenTestingKit                   0x20106db2 -[SenTestSuite performTest:] + 106
13  SenTestingKit                   0x201034a9 -[SenTest run] + 82
14  SenTestingKit                   0x20105e97 +[SenTestProbe runTests:] + 174
15  CoreFoundation                  0x00492d51 +[NSObject performSelector:withObject:] + 65
16  otest                           0x0000231c 0x1000 + 4892
17  otest                           0x000025be 0x1000 + 5566
18  otest                           0x00002203 0x1000 + 4611
19  otest                           0x00001f8d 0x1000 + 3981
20  otest                           0x00001f31 0x1000 + 3889 
```

我究竟做错了什么？

更新：我根据核心数据教程实现了属性的设置器/获取器。它仍然崩溃。它永远不会在设置器中遇到断点，因此它甚至在调用设置器之前就崩溃了。我是否遇到了 Apple 代码中的错误？

```
@interface Table : NSManagedObject
{
  int32_t columnValuesAddress;
}
@property (nonatomic) int32_t columnValuesAddress;
@end

@implementation Table

- (int32_t)columnValuesAddress
{
  [self willAccessValueForKey:@"columnValuesAddress"];
  int32_t address = columnValuesAddress;
  [self didAccessValueForKey:@"columnValuesAddress"];
  return address;
}

- (void)setColumnValuesAddress:(int32_t)address
{
  [self willChangeValueForKey:@"columnValuesAddress"];
  columnValuesAddress = address;
  [self didChangeValueForKey:@"columnValuesAddress"];
}

- (void)setNilValueForKey:(NSString *)key
{
  if ([key isEqualToString:@"columnValuesAddress"])
  {
    self.columnValuesAddress = 0;
  }
  else
  {
    [super setNilValueForKey:key];
  }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-20T03:57:34.397

在实体编辑器中，您需要设置您的类。它是在您使用文件模板创建核心数据类文件时为您设置的。我创建了一个没有模板的类文件，因此没有设置类，所以我收到了这些错误。如果它可以看到该类并看到您将其指定为 ，它只会自动装箱和取消装箱`assign`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T19:56:52.040

我创建了一个全新的项目，从头开始重新创建模型，并从旧项目中复制了测试代码。这个新项目运行良好。我不知道为什么旧项目不起作用，但至少有一个解决方案。

# spring-mvc - dojo xhrGET 不工作，而相同的 URL 在浏览器中工作

> ID：11589810
> 
> 赞同：1
> 
> 时间：2012-07-21T05:42:23.423
> 
> 标签：spring-mvc, dojo

我正在尝试根据用户在两个文本框中输入的输入在 Spring MVC 3 应用程序中显示搜索结果。我正在使用 dojo xhrGET 请求（以及用户输入作为几个请求参数）。目的是根据这些框中的值在 dojogrid 中显示搜索结果。

请求（下面列出的示例网址），

```
http://localhost:8080/SampleApp/subscribers?customerId=091300036&searchBy=ci) 
```

当我将它粘贴到浏览器地址栏中时工作正常。但是，当通过 xhrGET 调用时，我没有看到任何响应并且它没有联系控制器。

在 FireBug 中，我在两种情况下都看到了相同的请求。

```
GET http://localhost:8080/SampleApp/subscribers?customerId=091300036&searchBy=ci 200 OK 
```

但是，成功案例（通过浏览器）的响应是一个 JSON 对象，而在 dojo 请求案例中，响应包含我的整个 jsp 源代码。

我应该对 xhrGET 请求做什么。我没有使用正确的道场事件吗？由于这是一个搜索，我使用的是 GET 而不是 POST。这是相关的html和js代码。

```
 <input id="customerId" >    
    <input id="searchName" >
    <button dojoType="dijit.form.Button" type="submit" onclick=search()>
                Search
    </button>   

    dojo.ready(function(){
        var textbox = new dijit.form.TextBox({
            value: "Search By Name or Email",
            onFocus: function(){ 
                var ph = dijit.byId("searchName");
                ph.attr("value",""); },
            placeHolder: "Search By Name or Email"
        }, "searchName");
        textbox.startup();

    });

    dojo.ready(function(){
        var textbox = new dijit.form.TextBox({
            value: "Customer Id",
            onFocus: function(){ 
                var ph = dijit.byId("customerId");
                ph.attr("value",""); },
            placeHolder: "Customer Id"
        }, "customerId");
        textbox.startup();

    });        

    function search() {
        var criteria1 = dijit.byId("customerId").value;
        var criteria2 = dijit.byId("searchName").value;
        dojo.xhrGet({
            // The URL of the request
            url: "/SampleApp/subscribers?customerId=" + criteria1 + "&searchBy=" + criteria2,
            handleAs: "json",
            load: function(newContent) {

            },
            // The error handler
            error: function() {
                alert(error);
            }
        });
    } 
```

# jquery - Twitter Bootstrap 轮播垂直滑动

> ID：11589816
> 
> 赞同：22
> 
> 时间：2012-07-21T05:43:12.390
> 
> 标签：jquery, twitter-bootstrap, carousel, sliding

是否可以在 Twitter Bootstrap 上实现垂直轮播滑动？在 bootstrap.js 我发现这个

```
 , slide: function (type, next) {
  var $active = this.$element.find('.active')
    , $next = next || $active[type]()
    , isCycling = this.interval
    , direction = type == 'next' ? 'left' : 'right'
    , fallback  = type == 'next' ? 'first' : 'last'
    , that = this 
```

我试图将方向更改为“向上”和“向下”，但滑动不起作用。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-22T00:42:36.927

### 是的。

下面是一个 hacky 方法，它通过简单地覆盖 CSS 来完成所有事情。

如果您`vertical`向轮播添加一个类，那么向页面添加以下 CSS 将覆盖垂直滑动：

```
.vertical .carousel-inner {
  height: 100%;
}

.carousel.vertical .item {
  -webkit-transition: 0.6s ease-in-out top;
     -moz-transition: 0.6s ease-in-out top;
      -ms-transition: 0.6s ease-in-out top;
       -o-transition: 0.6s ease-in-out top;
          transition: 0.6s ease-in-out top;
}

.carousel.vertical .active {
  top: 0;
}

.carousel.vertical .next {
  top: 100%;
}

.carousel.vertical .prev {
  top: -100%;
}

.carousel.vertical .next.left,
.carousel.vertical .prev.right {
  top: 0;
}

.carousel.vertical .active.left {
  top: -100%;
}

.carousel.vertical .active.right {
  top: 100%;
}

.carousel.vertical .item {
    left: 0;
}​ 
```

这基本上是将**carousel.less**中的所有内容更改`left`为`top`.

## [JSFiddle](https://jsfiddle.net/mmfansler/2zosm3s6/)

* * *

这至少表明你需要做什么才能让它垂直滑动。但是，在实践中，确实应该向**[carousel.less](https://github.com/twitter/bootstrap/blob/master/less/carousel.less)**`up`添加和`down`类，并向**[bootstrap-carousel.js](https://github.com/twbs/bootstrap/blob/master/js/carousel.js)**添加一个新选项以在它们之间切换。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-05-19T15:47:32.457

与最新（当前）版本的 Bootstrap（v3.3.4）一起使用时，先前答案中提供的解决方案在某些流行的浏览器（如 Google Chrome）上无法正常工作。

如果有人需要与 Bootstrap v3.3.4 一起使用的更新解决方案，这里是——

```
.carousel-inner.vertical {
  height: 100%;
}
.carousel-inner.vertical > .item {
  -webkit-transition: .6s ease-in-out top;
  -o-transition: .6s ease-in-out top;
  transition: .6s ease-in-out top;
}
@media all and (transform-3d),
(-webkit-transform-3d) {
  .carousel-inner.vertical > .item {
    -webkit-transition: -webkit-transform .6s ease-in-out;
    -o-transition: -o-transform .6s ease-in-out;
    transition: transform .6s ease-in-out;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000;
    perspective: 1000;
  }
  .carousel-inner.vertical > .item.next,
  .carousel-inner.vertical > .item.active.right {
    top: 0;
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }
  .carousel-inner.vertical > .item.prev,
  .carousel-inner.vertical > .item.active.left {
    top: 0;
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }
  .carousel-inner.vertical > .item.next.left,
  .carousel-inner.vertical > .item.prev.right,
  .carousel-inner.vertical > .item.active {
    top: 0;
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}
.carousel-inner.vertical > .active {
  top: 0;
}
.carousel-inner.vertical > .next,
.carousel-inner.vertical > .prev {
  top: 0;
  height: 100%;
  width: auto;
}
.carousel-inner.vertical > .next {
  left: 0;
  top: 100%;
}
.carousel-inner.vertical > .prev {
  left: 0;
  top: -100%
}
.carousel-inner.vertical > .next.left,
.carousel-inner.vertical > .prev.right {
  top: 0;
}
.carousel-inner.vertical > .active.left {
  left: 0;
  top: -100%;
}
.carousel-inner.vertical > .active.right {
  left: 0;
  top: 100%;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<div style="width:600px"> <!-- wrap @img width -->
  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" data-interval="3000">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
      <li data-target="#carousel-example-generic" data-slide-to="1"></li>
      <li data-target="#carousel-example-generic" data-slide-to="2"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner vertical" role="listbox">
      <div class="item active">
        <img src="http://placehold.it/600x400&text=First+Slide" alt="First Slide">
        <div class="carousel-caption">
          First Slide
        </div>
      </div>
      <div class="item">
        <img src="http://placehold.it/600x400&text=Second+Slide" alt="Second Slide">
        <div class="carousel-caption">
          Second Slide
        </div>
      </div>
      <div class="item">
        <img src="http://placehold.it/600x400&text=Third+Slide" alt="Third Slide">
        <div class="carousel-caption">
          Third Slide
        </div>
      </div>
    </div>

    <!-- Controls -->
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>
```

注意：将`vertical`类添加到您的`carousel-inner`，或根据需要编辑 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T09:04:52.083

试试这个插件 **[https://github.com/tutorialdrive/Bootstrap-Vertical-Thumbnail-Carousel](https://github.com/tutorialdrive/Bootstrap-Vertical-Thumbnail-Carousel)**

看看这里。

[Twitter Bootstrap 垂直缩略图轮播](https://stackoverflow.com/questions/18416892/how-to-create-carousel-in-bootstrap-with-vertical-thumbnail/18416893#18416893)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T07:16:45.903

试试这个codeply

Bootstrap 4 - 垂直滑块

[https://www.codeply.com/p/JxZ8htyOFN](https://www.codeply.com/p/JxZ8htyOFN)

# sql - SQL - 我需要将总值分成另一个表中的多行

> ID：11589821
> 
> 赞同：0
> 
> 时间：2012-07-21T05:44:38.660
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sqlite

假设我在 SQL Server 2008 中有以下表格

学校表

```
School_Id |Course_Id | Total Students | 
--------------------------------------- 
   1         Acct101        150
   1         Acct102        100
   2         Acct101        110
   2         Acct102        130 
```

班级表

```
School_Id |Course_Id | Class_ID | Capacity
--------------------------------------- 
   1         Acct101     A1       65
   1         Acct101     A2       50
   1         Acct101     A3       70
   1         Acct102     Ab1      100
   1         Acct102     Ab2      100
   2         Acct101     B1       80
   2         Acct101     B2       90 
```

根据给定的信息，我需要显示每个班级的学生总数，如下所示：

```
 School_Id |Course_Id | Class_ID | Capacity | Students 
    ------------------------------------------------- 
       1         Acct101      A1        65        60
       1         Acct101      A2        45        40
       1         Acct101      A3        70        50
       1         Acct102      Ab1       100       70
       1         Acct102      Ab2       100       30
       2         Acct101      B1        80        60
       2         Acct101      B2        90        50 
```

我根据学校表第一行中的学生总数为 150 得到前 3 行中的学生值

所以我把150人分成3个班，划分的时候考虑到班级容量。（我只需要使我的总数在班级限制范围内的任何数字组合。此外，所有教室都必须有学生，因此班级中的零学生是不可接受的）

我怎样才能做到这一点？

请注意，我有一个包含 +500,000 行的表和另一个包含总计汇总值的表，因此我需要根据总计汇总在第一个表中插入值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:21:38.677

如果你满负荷继续，那么你可能会错过一门或多门课。但在这种情况下，你可以一直跑到你的例子中达到 150 人。但是对于第二堂课，你的容量为 100，学生总数为 100所以只有电话 1 会被填满，班级 2 会有 0 个学生。这是更简单的方法。

另一种方法是你得到总学生的比例，即 150 和总人数，即 180，并使用这个比例与每一行相乘以获得每个班级的学生，但这里的问题是，对于某些班级，你可能会得到分数值是不可能的，因此您必须使用圆形或天花板，但这将导致 1 或 2 名学生失踪，具体取决于每行的总分数。这是一个棘手的问题，并且有这么多行，它可能会更加棘手。

编辑：在这里添加第二种方法..试试这个..

```
select cs.*,round(cs.capacity*rt.ratio,0) from
(
select cp.*,sc.totalstudents/cp.cap as ratio
from (select schoolid,courseid,sum(capacity) cap from class ) as cp
inner join 
school sc on cp.schoolid = sc.schoolid and sc.courseid = cp.courseid
) rt
inner join class cs 
on cs.schoolid = rt.schoolid and rt.courseid = cs.courseid 
```

这应该可以正常工作，但可能会错过一些东西或有额外的学生。根据索引，这也应该非常有效。

您也可以使用 NTILE，但这可能会影响性能，因为每行最有可能使用嵌套循环连接与数字表连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:44:21.693

您可以这样做，此查询首先填充容量最大的教室：

```
DECLARE @School TABLE (School_Id INT,Course_Id 
    VARCHAR(50), Total_Students INT)
DECLARE @Class TABLE (School_Id INT,Course_Id 
    VARCHAR(50), Class_ID VARCHAR(50), Capacity INT)
INSERT @School VALUES 
   (1,         'Acct101'        ,150),
   (1,         'Acct102'        ,100),
   (2,         'Acct101'        ,110),
   (2,         'Acct102'        ,130)
INSERT @Class VALUES 
   (1,         'Acct101'     ,'A1'       ,65),
   (1,         'Acct101'     ,'A2'       ,50),
   (1,         'Acct101'     ,'A3'       ,70),
   (1,         'Acct102'     ,'Ab1'      ,100),
   (1,         'Acct102'     ,'Ab2'      ,100),
   (2,         'Acct101'     ,'B1'       ,80),
   (2,         'Acct101'     ,'B2'       ,90)

;WITH y AS (
SELECT  a.*,
        ROW_NUMBER() OVER 
            (PARTITION BY a.School_ID, a.Course_ID ORDER BY a.Capacity DESC) 
            CapacitiyOrderPerSchoolAndCourse,
        SUM(a.Capacity) OVER 
            (PARTITION BY a.School_ID, a.Course_ID) 
            TotalCapacityForSchoolAndCourse,
        b.Total_Students TotalParticipants
FROM    @Class a
JOIN    @School b ON 
        b.School_Id = a.School_Id
        AND b.Course_Id = a.Course_Id
), z AS(
SELECT  x.School_Id, 
        x.Course_Id, 
        y.TotalCapacityForSchoolAndCourse, 
        y.TotalParticipants,
        CASE WHEN y.TotalParticipants < SUM(x.Capacity) THEN 
                y.TotalParticipants
            ELSE 
                SUM(x.Capacity) 
            END NumberOfStudentsInClasses,
        MIN(y.Capacity) ClassCapacity,
        y.Class_ID ClassName,
        MIN(y.Capacity) - 
        CASE WHEN y.TotalParticipants - SUM(x.Capacity) < 0 THEN 
               ABS(y.TotalParticipants - SUM(x.Capacity))
            ELSE
               0
            END StudentsInClass
FROM    y
JOIN    y x ON x.School_Id = y.School_Id 
        AND x.Course_Id = y.Course_Id 
        AND x.CapacitiyOrderPerSchoolAndCourse 
                <= y.CapacitiyOrderPerSchoolAndCourse
GROUP   BY x.School_Id, 
        x.Course_Id, 
        y.CapacitiyOrderPerSchoolAndCourse, 
        y.Class_ID, 
        y.TotalCapacityForSchoolAndCourse, 
        y.TotalParticipants
)

SELECT  
        z.School_Id, 
        z.Course_Id, 
        z.TotalCapacityForSchoolAndCourse, 
        z.TotalParticipants,
        z.ClassName,
        z.ClassCapacity,
        CASE WHEN StudentsInClass < 0 THEN 
                0 
            ELSE 
                StudentsInClass 
            END StudentsInClass
FROM    z 
```

如果您希望每个教室有一定数量的学生，您可以这样做（它根据每个教室的容量为每个教室分配一些学生）：

```
;WITH y AS (
SELECT  a.*,
        SUM(a.Capacity) OVER 
            (PARTITION BY a.School_ID, a.Course_ID) 
            AS TotalCapacityForSchoolAndCourse,
        b.Total_Students TotalParticipants
FROM    @Class a
JOIN    @School b ON 
        b.School_Id = a.School_Id
        AND b.Course_Id = a.Course_Id
), z AS(
SELECT  y.School_Id, 
        y.Course_Id, 
        y.TotalCapacityForSchoolAndCourse, 
        y.TotalParticipants,
        MIN(y.Capacity) ClassCapacity,
        y.Class_ID,
        MIN(y.Capacity) * 1.0 / y.TotalCapacityForSchoolAndCourse 
            AS PercentOfCapacity,
        ROUND(
            MIN(y.Capacity) * 1.0 / y.TotalCapacityForSchoolAndCourse 
                * TotalParticipants
            , 0, 0) 
            AS NumberOfStudents
FROM    y
GROUP   BY y.School_Id, 
        y.Course_Id, 
        y.Class_ID, 
        y.TotalCapacityForSchoolAndCourse, 
        y.TotalParticipants
)
, i AS(
SELECT  
        z.School_Id, 
        z.Course_Id, 
        z.TotalCapacityForSchoolAndCourse, 
        z.TotalParticipants,
        z.Class_ID,
        z.ClassCapacity,
        PercentOfCapacity,
        NumberOfStudents,
        SUM(NumberOfStudents) OVER 
            (PARTITION BY z.School_Id, z.Course_Id) 
            AS SumNumberOfStudents,
        ROW_NUMBER() OVER 
            (PARTITION BY z.School_Id, z.Course_Id 
                ORDER BY NumberOfStudents) 
            AS ClassWithSmallestCapacity
FROM    z
), j AS(
SELECT  i.School_Id, 
        i.Course_Id, 
        i.TotalCapacityForSchoolAndCourse, 
        i.TotalParticipants,
        i.Class_ID,
        i.ClassCapacity,
        i.PercentOfCapacity,
        i.NumberOfStudents,
        i.NumberOfStudents +
        CASE WHEN ClassWithSmallestCapacity = 1 THEN 
                TotalParticipants - SumNumberOfStudents 
            ELSE 0 
            END AS NumberOfStudents2
FROM    i
)

SELECT  *
FROM    j 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T10:51:49.313

试试这个。您必须使用自己的表格和基于此的逻辑。带有光标的 Ntile 将返回完美的数据，并且应该快速安静。对于此方法，您还需要一个数字表。

```
set nocount on
go
drop table soh
go
select salesorderid,round(totaldue -10,0)%180 totaldue into soh
from Sales.SalesOrderHeader
go
create unique clustered index idx_soh_id on soh(salesorderid) 
go
drop table sod
go
select salesorderid,salesorderdetailid,round(linetotal,0)%200 as linetotal  into sod
from sales.SalesOrderDetail
go
create unique clustered index idx_sod_id on sod(salesorderid,salesorderdetailid) 
go
drop table #sod
go
declare @salesorderid int,@totaldue float,@cnt int,@sm float
declare cr_cursor cursor fast_forward 
for select salesorderid ,totaldue from soh
select salesorderid,salesorderdetailid, linetotal,0 as val,ROW_NUMBER() over(partition by salesorderid order by linetotal asc) as rn 
into #sod from sod
create unique clustered index idx_#sod on #sod(salesorderid,salesorderdetailid)
open cr_cursor
while(1=1)
begin
    fetch cr_cursor into @salesorderid,@totaldue
    if (@@FETCH_STATUS <> 0)
    begin
        break
    end
    select @sm =sUM(linetotal) ,@cnt = COUNT(salesorderdetailid) 
    from #sod where salesorderid = @salesorderid
    ;with cte as 
    (select @salesorderid salesorderid,nt,count(*) cnt from 
    (select NTILE(@cnt) over( order by n.cnt asc) nt from nums n where n.cnt <= @sm - @totaldue ) dta
    group by nt
    )
    update s 
    set val = c.cnt
    from #sod s inner join cte c on s.SalesOrderID= c.salesorderid and s.rn= c.nt
end
close cr_cursor
deallocate cr_cursor

select * from #sod
go 
```

# php - 我如何有一个点击动画并显示 div 的链接？

> ID：11589826
> 
> 赞同：0
> 
> 时间：2012-07-21T05:45:31.017
> 
> 标签：php, javascript, html, css

所以我有一个我想要的栏，`sign up link`当你点击它时，会在链接的左侧显示一些文本链接。

下面有一些前后的视觉效果。

我尝试了一些javascript，但没有走多远，我希望它动画出来，但如果我无法弄清楚，现在还可以。任何想法？

![在此处输入图像描述](../Images/c7ffb38cab5fe199c5615ae1714cd8ea.png) ![在此处输入图像描述](../Images/aade1af7405aa8c9aff1b62c9cd59f24.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:51:12.933

也许您可以使用**:target 伪类选择器**和一些 CSS3 转换？在这种情况下，当您单击链接时，div 的不透明度会发生变化并使其可见。我不确定您需要支持哪些浏览器？这在 IE 7 或 8 中不起作用。

这是转换的代码：

HTML

```
<a href="#id1">Sign Up</a> 
```

CSS

```
#id1 {

    opacity: 0;    
}

#id1:target {
    -webkit-transition: opacity 0.5s ease-in-out;
       -moz-transition: opacity 0.5s ease-in-out;
         -o-transition: opacity 0.5s ease-in-out;
                                      opacity: 1; 
```

演示 - [jsFiddle](http://jsfiddle.net/3CYxd/)

编辑：这是我快速制作的第二个示例（幻灯片效果），因此运行不顺畅，但它至少显示了可能的情况 - [jsFiddle2](http://jsfiddle.net/fj7gB/4/) (webkit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T10:04:15.533

```
$(document).ready(function()
{
 $('#id').click(function(e){
   e.preventDefault();
   $("#id2").animate({height : '410'}; /* what ever the styles u need */
 });
}); 
```

不知道你为什么要把它放在另一个函数中。那会做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T12:41:45.323

您可以使用 jQuery 获得此信息。

1.  给你`sign up link`一个你想点击的ID。

2.  创建一个 div，它在您的链接下方有一些高度，并以您希望在用户单击链接时使其看起来的方式为其提供所有样式。

3.  给那个 div 一个 CSS 样式`height: 0px`，这样 div 就会消失。

4.  当用户单击链接时，使用 jQuery`.animate()`函数来切换（或更改）该 div 的高度。

您可以在此处参考 jQuery`.animate()`文档：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T05:49:05.550

您可以尝试与 jquery 一起使用

```
$(function() {
$('#id').click(function(e){
    e.preventDefault();
    $("#id2").animate({height : '410'}; /* what ever the styles u need */

});

}) 
```

试试这个链接

[http://www.w3schools.com/jquery/jquery_effects.asp](http://www.w3schools.com/jquery/jquery_effects.asp)

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://viralpatel.net/blogs/understanding-jquery-animate-function/](http://viralpatel.net/blogs/understanding-jquery-animate-function/)

# math - 如何应用物理力来加速船舶

> ID：11589829
> 
> 赞同：0
> 
> 时间：2012-07-21T05:45:55.360
> 
> 标签：math, physics, havok

我知道浮力并应用它；我的船现在漂浮在水面上。但我不知道如何用力来控制和导航我的快艇？

我正在使用 havok 物理引擎。我的代码是这样的

body->applyForce(stepInfo.m_deltaTime,forwardWorld, pointx);

pointx = 我的应用力点 (-75,0,0); 这个点是我船后侧的一个 3d 点

forwardWorld =它的力值和方向（100,0,0）；在我的船后侧施加 100Nm

我的 pointx 值始终是静态的。

我的 forwardWorld 值每次考试都会改变：

当我想我的船走到前面时，将它设置为 (100,0,0)

当我想我的船向右走时，我将其设置为 (0,0,100)

当我想我的船向左走时，我将其设置为 (0,0,-100)

但这不是一个好方法，因为我的船会以最高速度向左或向右移动，这是错误的，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:03:05.920

你没有说你需要模型做什么。如果这是一款游戏，那么我的建议可能不会让您满意，但如果是为了解决某种工程问题，那么我建议您建立自己的机动模型。这听起来可能令人生畏，但实际上它归结为求解三个微分方程（滚动、偏航和浪涌；您还可以根据自己的兴趣添加摇摆）。您可以使用 Range-Kutta 方法通过集成轻松解决它们。

这是一篇很好地概述了我正在谈论的内容的论文（网上有很多）： [https ://scl.snu.ac.kr/SCL_Research/data/research/science.pdf](https://scl.snu.ac.kr/SCL_Research/data/research/science.pdf)

您需要找到运动方程的系数。我在上面列出的论文中有一些，更多可以在网上找到。首先，我建议使用 KRISO 数据，它们广泛可用，并且在文献中得到了很好的介绍。

编辑：我不喜欢 MatLab，但是如果您可以访问它，那么您可以通过构建 Simulink 模型来非常轻松地求解您的方程。

# java - 将 Resource 标记放在 conf/context.xml 中会出现异常，但是当我将其放置在 META-INF/context.xml 中时可以：为什么会这样？

> ID：11589834
> 
> 赞同：0
> 
> 时间：2012-07-21T05:47:23.020
> 
> 标签：java, jakarta-ee, tomcat, context.xml

为了使用 tomcat 作为服务器连接到 derby 数据库，我最初在`conf/context.xml`Tomcat 中添加了以下内容：

```
<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
 driverClassName="org.apache.derby.jdbc.ClientDriver"
 url="jdbc:derby://localhost:1527/poll database;create=true"
 username="suhail" password="suhail"
 maxActive="20" maxIdle="10" maxWait="-1" /> 
```

以及项目`Resource-ref`的 web.xml 中的标签`WEB-INF/web.xml`。

```
<resource-ref>
<description>my connection</description>
<res-ref-name>jdbc/PollDatasource</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

但是当我运行一个必须连接到数据库的 servlet 时，语句：

```
connection = dataSource.getConnection(); 
```

导致异常：

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null' 
```

我还不明白这个异常的*原因*。

在异常之后，我`Resource`从 Tomcat 中删除了标签`conf/context.xml`并将其放在`META-INF/context.xml`我的项目中。

*当我再次尝试 servlet 时，它毫无例外地工作了！*

`Resource`当我将标签放在全局 context.xml 文件中*（即在 conf/context.xml 中）*时出现异常的原因可能是什么，但是当我将标签放在特定于我的应用程序的 context.xml 中时却没有出现异常?. *（即在 META-INF/context.xml 中）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:28:55.800

添加`<Resource>`到`conf/context.xml`将使该资源的副本可用于您在服务器上部署的每个 web 应用程序 - 可能不是您想要做的。如果你想让 a`<Resource>`全局可用，把它放到`conf/server.xml`下更合适`<GlobalNamiongResources>`。

我希望您遇到的错误是因为您没有在正确的位置安装 JDBC 驱动程序。定义`<Resource>`in`conf/context.xml`可能会导致使用不同的 ClassLoader 来加载您的`<Resource>`.

# php - 简单查询错误

> ID：11589837
> 
> 赞同：2
> 
> 时间：2012-07-21T05:47:53.243
> 
> 标签：php, sql

我正在运行一个函数来检查用户是否已经提交了问题。我已将问题缩小到运行查询代码的函数。由于某种原因，它不起作用。当涉及 AND `user_requester`... 的部分不存在时，该功能确实有效。我确定这是某种语法错误，但我没有从错误报告中得到响应。下面是代码：

```
function question_exists ($question, $user_id) {

$question = sanitize($question);    

$query = mysql_query("SELECT COUNT(`primary_id`) FROM `requests` WHERE 

`question_asked`= '$question' AND `user_requester` = $user_id");

return (mysql_result($query, 0) == 1) ? true : false;

} 
```

澄清：我想防止用户两次提交相同的问题。这就是将 AND 部分添加到查询中的 where 子句的目的。当我添加 AND 部分时，一切都会变得零碎，用户无论如何都可以提交相同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:26:30.637

我会尝试分别执行所有步骤，以便您可以单独测试每个操作的结果。您的退货线路正在处理很多事情，因此很难判断您的问题出在哪里。像这样的东西...

```
function question_exists( $question, $user_id )
{
    $question = sanitize( $question );

    $user_id = (int) $user_id; // additional sanitization in case you didn't do it already.

    $sql = "SELECT COUNT(`primary_id`) FROM `requests` WHERE 
        `question_asked`= '$question' AND `user_requester` = $user_id";
    $result = mysql_query( $sql );
    if ( !$result ) {
       // Note: this would be better sent to an error handling function, this is just for simplicity's sake.
       echo 'Mysql query error: ' . mysql_error();
       exit;
    }

    $row = mysql_fetch_row ( $result );
    if ( $row ) {
        return true;
    } else {
        // temporary debug code
        echo "unknown error</ br>\n";
        echo "sql: " . $sql . "</ br>\n";
        echo "<pre>";
        var_dump( $row );
        echo "</pre>";
        exit();

        // real code for after problem is solved
        return false;
    }
} 
```

如果这仍然没有帮助并且您还没有，请转储您的 $question 和 $user_id 变量以确保您正在接收它们并且您的 sanitize 函数没有做错什么。请注意，我没有运行此代码，因此可能存在语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T05:50:43.747

您指的是哪种错误报告？查询失败不会触发任何 PHP 错误/警告。你需要类似的东西

```
$query = mysql_query(...) or die(mysql_error()); 
```

看看到底发生了什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T05:52:43.227

```
$query = mysql_query("SELECT COUNT(`primary_id`) FROM `requests` WHERE 

`question_asked`= '$question' AND `user_requester` = {$user_id}"); 
```

将大括号添加到查询中的变量。

# php - PHP 套接字编程问题

> ID：11589839
> 
> 赞同：1
> 
> 时间：2012-07-21T05:48:30.610
> 
> 标签：php, sockets

我提前道歉，因为这可能很长。

我正在尝试确定我需要的是套接字编程还是其他一些技术。

*   我有一个充当仪表板的网站/应用程序。
*   我有一个保存 Web 应用程序数据的数据库。
*   我有一个脚本来检索数据并将其插入数据库。

我想做的是让网络应用程序在新数据插入数据库时​​自动更新。我有限的理解使我相信套接字编程可以做到这一点，但我找不到我的问题的答案（也许是因为我不知道去哪里找）。

所以，话虽如此，这是我的问题：

*   使用 PHP 进行套接字编程可以做到这一点吗？
*   托管 Web 应用程序和数据库的服务器可以是套接字服务器和客户端吗？

您可以指导我使用的任何资源都将非常感激。我已经阅读了 php.net 上的基础知识和一些博客文章，但没有很深入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:01:08.123

您应该避免在 webapp 中打开第二个自定义套接字。因为它需要您设置端口转发和防火墙规则才能使其运行。

您应该寻找 WebSocket、轮询或长轮询。

# php - 在mysql中使用ENGINE作为MRG_MYISAM有什么好处吗

> ID：11589851
> 
> 赞同：2
> 
> 时间：2012-07-21T05:51:43.917
> 
> 标签：php, mysql, database, database-design

我正在做一个像谷歌广告词这样的跟踪网站。我只做修改。在那个网站上，我看到他们正在为每个月创建表格并将该表格合并为一个表格，这是针对存储有关点击和搜索详细信息的表格以及具有大量记录的合并表格完成的。对于查询，他们只使用了合并的表，其中有数以亿计的记录。使用这样的表有什么好处吗？而且查询需要 10 多分钟才能执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T06:15:47.490

优点如下，如果您没有得到以下优点，请不要使用它。

轻松管理一组日志表。例如，您可以将不同月份的数据放到单独的表中，用 myisampack 压缩其中的一些，然后创建一个 MERGE 表将它们作为一个表使用。

获得更快的速度。您可以根据某些条件拆分大型只读表，然后将各个表放在不同的磁盘上。以这种方式构建的 MERGE 表可能比使用单个大表快得多。

执行更有效的搜索。如果您确切知道要查找的内容，则可以仅在其中一个基础表中搜索某些查询，并为其他查询使用 MERGE 表。您甚至可以拥有许多使用重叠表集的不同 MERGE 表。

进行更有效的维修。修复映射到 MERGE 表的单个小表比修复单个大表更容易。

立即将许多表映射为一个。MERGE 表不需要维护自己的索引，因为它使用各个表的索引。因此，MERGE 表集合的创建或重新映射速度非常快。（创建 MERGE 表时仍必须指定索引定义，即使没有创建索引。）

如果您有一组表，您可以根据这些表按需创建一个大表，那么您可以根据需要从它们创建一个 MERGE 表。这要快得多，并且可以节省大量磁盘空间。

超过操作系统的文件大小限制。每个 MyISAM 表都受此限制，但 MyISAM 表的集合不受此限制。

您可以通过定义映射到该单个表的 MERGE 表来为 MyISAM 表创建别名或同义词。这样做应该不会对性能产生真正显着的影响（每次读取只有几个间接调用和 memcpy() 调用）。

[您可以在基本信息链接](http://dev.mysql.com/doc/refman/5.1/en/merge-storage-engine.html)、[优点缺点链接](http://dev.mysql.com/doc/refman/5.1/en/merge-table-advantages.html)上阅读更多相关信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-21T06:16:01.453

MRG_MYISAM 仅适用于 MyISAM 表，它们本身不是表的第一个选项。您通常会选择 InnoDB 表。

MRG_MYISAM 引擎是在 MySQL 支持视图和分区之前发明的。范围分区（例如每月分区）很可能是您想要的。

就查询而言，分区对用户是透明的，但仍然使用[修剪](http://dev.mysql.com/doc/refman/5.1/en/partitioning-pruning.html)以便仅从选定的分区中读取查询，从而对其进行优化。

我建议您使用 InnoDB 表，并查看[范围分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)。MRG_MYISAM 和 MyISAM 仍在使用中。他们可以为你工作。只是 MyISAM 引入了这么多麻烦（没有崩溃恢复、表级锁定等等……），以至于很多时候都是不可能的。

# cuda - GPGPU 图像处理以外的应用？

> ID：11589856
> 
> 赞同：0
> 
> 时间：2012-07-21T05:53:00.497
> 
> 标签：cuda, gpu, gpgpu

我正在寻找一些可以移植到 gpgpu 以提高效率的 cpu 应用程序。除了图像处理区域之外，gpgpu 还能在哪些地方使用？这实际上是为了我的研究生项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:37:06.233

GPU 计算引擎的专用处理架构对于您遇到的任何数据处理问题都很有用：

1.  大量数据
2.  对该数据的每个元素执行的重要计算，
3.  计算每个输出元素所需的输入数据适合 GPU 内存，或者可以在需要时进行编排以到达 GPU 内存。

如果可以同时对所有数据元素独立执行计算，这会有所帮助，但这不是严格要求的。

图像处理恰好是这种情况的一个例子——要处理的像素数量有限（但数量很大），并且可以在每个像素上并行执行许多图像算法。

其他示例包括：广义信号分析，例如处理音频信号。图像处理只是信号分析的一种特殊形式。模式识别，其中大部分挑战是将信号与噪声分离。语音识别，有人吗？3 维表面匹配，例如根据有机化合物化学键的弯曲角度确定有机化合物的形状，或者确定两种有机化合物是否可能以有趣的方式相互作用（例如，生物受体）。各种物理建模（碰撞模拟、地震分析等）。当然，还有密码学，你总是可以花更多的计算时间一次又一次地处理相同的数据。

GPU 计算引擎不太适合处理数据量显着使要执行的计算相形见绌的问题。GPU 可以很好地处理内存中的内容。将数据移入或移出 GPU 内存通常是整个计算中最昂贵的步骤，因此您需要确保有足够的计算继续“弥补”将数据加载到内存中的成本。如果数据太大而无法放入内存，则必须采用分布式计算策略。

例如，计算 PB 数据库的主键索引可能不太适合 GPU，因为大部分工作可能都花在将数据从硬盘上移到内存中。索引计算本身相当微不足道，这并不能带来非常有趣的 GPU 胜利，虽然我确信数据可以被分割成块，并且这些块由大量 GPU 核心独立索引，但数据的可变性可能会阻止 GPU 满负荷运行。（当所有“桨手”（处理器内核/线程）都朝着同一个方向拉动时，GPU 代码工作得最好——在单独的数据上统一执行）虽然数据库索引可能会通过使用 GPU 方法看到一些好处，但它肯定不会

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:50:52.803

找出哪些类型的应用程序非常适合 GPGPU 的最简单方法是查看其他团队已经实现的加速。以下是包含该信息的几个链接：

*   [英伟达的案例研究](http://www.nvidia.com/object/cuda-apps-flash-new.html)
*   [AccelerEyes 的案例研究](http://accelereyes.com/examples)

看起来军事/航空航天、生命科学、能源、金融、制造、媒体和其他一些较小的行业都有强劲加速的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:08:22.587

蛮力加密攻击？MD5 由[Whitepixel](http://whitepixel.zorinaq.com/)完成，SHA-256 已由所有比特币矿工完成。另一方面，我不知道`bcrypt()`or的任何 GPU 实现`scrypt()`，但在该领域工作的学者可能是一个更好的人问。

# php - Mysql中一对多所需的示例

> ID：11589860
> 
> 赞同：0
> 
> 时间：2012-07-21T05:54:46.470
> 
> 标签：php, mysql

我有 2 张桌子叫产品和组合。产品表将包含所有产品数据，如 sn、产品名称、产品价格、产品图片等

组合表是对产品进行分组，例如第一个产品的 id 第二个产品的 id 第三个产品的 id 将在一个名为 Set 1 的组中

我需要在 mysql 中使用一对多来获取组合产品的详细信息。

怎么做

感谢先进

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:56:00.850

您可以使用查找表模式：

您可以尝试设计架构，使每个产品 => 组合对是一行。

例如：

```
product_id, combo_id
product_1, combo_1
product_2, combo_1
product_3, combo_1
product_1, combo_2 
```

当您从表中进行选择时，您将需要使用一些非常好的连接和分组：

`"select product.product_name, combo.combo_id from combo, product where product.product_id = combo.combo_id and combo_id = 'combo_1'";`

无论如何，请阅读查找表的方法。这只是我对您可能希望如何设计架构的建议。

# python - GAE - 在线管理控制台

> ID：11589862
> 
> 赞同：0
> 
> 时间：2012-07-21T05:55:06.033
> 
> 标签：python, google-app-engine

有什么方法可以在我的 google appengine 应用程序上在线运行自定义 python 代码？我可以在某个地方使用 python 控制台吗？我在这里和那里看到了模糊的参考，但没有具体的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T08:19:09.850

查看这些[先前的答案](https://stackoverflow.com/questions/1782906/how-do-i-activate-the-interactive-console-on-app-engine)，了解如何在部署的应用程序上启用交互式控制台（您可以在本地开发应用服务器上使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T20:48:04.210

您可以使用远程外壳，即在您的应用引擎 sdk 上。例如 ~/bin/google_appengine/remote_api_shell.py -s your-app-identifier.appspot.com s~your-app-identifier

当您在 shell 中时，您将启用 db 模块。为了使用您的模型，您必须导入它们。

# python - python子进程作为普通用户

> ID：11589870
> 
> 赞同：1
> 
> 时间：2012-07-21T05:56:50.200
> 
> 标签：python, root, sudo

我有一个需要以超级用户身份运行的脚本：

```
$ sudo ./python-script.py 
```

在这个脚本中，我做了一些其他*不需要*超级用户权限的事情。

```
$ os.mkdir('somefolder') 
```

以非 root 用户身份创建目录的最佳/最有效方法是什么？我应该让脚本以root用户身份创建目录，然后更改它的权限吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:01:39.847

`os.mkdir`确实允许您明确指定权限：

```
os.mkdir(path [, mode=0777]) 
```

您还可以选择运行`os.chown`来设置用户和组

```
os.chown(path, uid, gid) 
```

您可能可以像这样获得原始用户（但它可能是特定于平台的？）

```
import os
original_user = os.environ.get('SUDO_USER')
original_uid = os.environ.get('SUDO_UID')
original_gid = os.environ.get('SUDO_GID') 
```

# php - 跨源策略，使用远程页面但在同一台计算机上访问本地主机数据

> ID：11589871
> 
> 赞同：2
> 
> 时间：2012-07-21T05:57:51.540
> 
> 标签：php, mysql

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我在[http://www.stackoverflow.com](http://www.stackoverflow.com)使用 Web 应用程序，在该页面中，我需要使用来自另一台计算机的 mysql 数据填充下拉列表，该计算机位于 wamp 上运行的 192.168.1.145。

我听说如果我们在 headers 和 ajax 配置跨源策略方法（首选 jquery 方法），可以做到这一点

提前致谢

# php - 如何使用 PHP 和 MYSQL 将项目添加到表中，没有 AJAX

> ID：11589875
> 
> 赞同：0
> 
> 时间：2012-07-21T05:58:22.307
> 
> 标签：php

我想知道您将如何构建一个可以根据需要添加任意数量的项目的表格......假设您有视频租赁并且客户想要租赁 3 或 4 部电影。在 Web 应用程序中，我们会提取客户数据，添加租金，然后以某种方式创建一个表格，其中每一行都是客户租用的每个视频。

如果不使用 AJAX，您将如何构建此表？我认为唯一的方法是再次重新加载所有内容，例如，如果您有下拉菜单，则加载所有下拉菜单，如果选择了值，则选择它们，然后单击添加项目按钮，然后添加一行相应的输入，如果我再次点击添加项目，我会做同样的事情......这是正确的方法吗？每次我去向表中添加新项目时都重新构建下拉列表、输入等？我希望这能解释我的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:02:21.180

想到的唯一方法可能是 iframe ？

您可以通过 php 生成链接/锚点作为框架的内容，然后在更改/导航时重新生成它。

否则出于什么原因您不想使用 AJAX？

**还 ...**

您可以拥有一个隐藏的 iframe 并在 onload 事件中获取其内容并将其设置为表格单元格内容并生成/插入新的行/单元格等等。通过锚链接将 iframe 用作您的抓取器。确保添加诸如 nocache 变量之类的内容以保持内容新鲜。

**HTML 页面内容 index.html**

```
<html>
<head>
<title>iFrame Test</title>
  <script type="text/javascript" src="jquery.js"></script>
</head>
<body>
  <iframe name='objGrab' id='objGrabber' style='position:absolute; left:-99999px; top:-99999px;'></iframe>
  <a target="objGrab" href="prc.php?page=1">Page 1</a><br />
  <a target="objGrab" href="prc.php?page=2">Page 2</a>
  <div id='pageContent'></div>
  <script>
    $(function() {
      $("#objGrabber").load(function (){
        $("#pageContent").html($(this).contents().find('body').html());
      });
    });
  </script> 
</body>
</html> 
```

**PHP 页面内容 - prc.php**

```
<?php
  switch($_GET['page']) {
    case "1":
      echo "Contents for page one";
      break;
    case "2":
      echo "Contents for page two ";
      break;
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T06:07:47.597

是的你是对的。如果您不想使用 ajax 并且需要在用户反馈中添加更多行，则您必须重新加载页面并再次为表获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:15:36.023

那会起作用，但请注意一些事情。
你应该更好地设计一个数据库

```
TABLE users
 ID - username
TABLE movie
 ID - title
TABLE users_rent_movie
 ID - userID - movieID - rentedOn - returnedOn - status 
```

因为电影数据库不应该像每分钟，每周一次或什么的那样更新，并且用户不会每小时租一部新电影。缓存一次生成的页面，并继续使用缓存的数据，直到添加/更改新内容或经过 X 时间，这将使事情变得更快（但如果在本地，所有进程/响应将执行得更快）。

# javascript - 为什么我的 Bootstrap 模态窗口在 Opera 中不起作用？

> ID：11589876
> 
> 赞同：3
> 
> 时间：2012-07-21T05:58:31.690
> 
> 标签：javascript, css, twitter-bootstrap, modal-dialog, opera

我有一个使用 Twitter Bootstrap 框架设置的模态登录窗口，完全按照[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)中的描述（使用标记方法并使用他们的演示模态窗口作为起点）。它在多种浏览器上都能很好地工作（这是首先使用[Bootstrap](http://twitter.github.com/bootstrap/index.html "引导主页")的重要原因之一）。

但是，当我在 Opera 中测试我的页面时，模式窗口不起作用。页面按原样淡出，但窗口不出现。为什么？

使用：Bootstrap v2.0.4，Opera 12

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T05:58:31.690

这是 Bootstrap 中的一个[已知错误](https://github.com/twitter/bootstrap/issues/3876 "已知错误")，我确信正在修复中，但对于那些迫不及待或不能随便更改框架版本的人来说，这里有一个很好的修复：问题是由于模态窗口的典型标记中使用的“淡入淡出”类：

```
<div id="myModal" class="modal hide fade in"> 
```

这个`fade`类为模态窗口的出现/关闭提供了漂亮的动画。它显然在 Opera 12 中被破坏了。

虽然删除`fade`该类将使其工作，但没有理由剥夺其他浏览器用户，因此您可以利用这个方便的 Javascript 片段：

```
<script type="text/javascript">
    $(document).ready(function()
    {
        if (navigator.appName == "Opera")
        {
            $('#myModal').removeClass('fade');
        }
    });
</script> 
```

这将删除`fade`Opera 的类，但为其他浏览器保留它。请注意，这将完全禁用 Opera，包括使用旧版本的人。如果您有兴趣缩小修复范围，您可以测试`navigator.userAgent`以确定版本（Opera 12 的用户代理标头`Opera/9.80 (Windows NT 6.1; WOW64; U; en) Presto/2.10.289 Version/12.00`在我的计算机上，但由于这不是通用的，您只想检查`12.00`字符串末尾的存在。也许勤奋且不那么困的人可以在评论中添加一个加强版:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T06:51:54.140

我建议使用modernizr之类的 `$('.no-csstransforms3d .fade').removeClass('fade');` 东西

这样，如果例如 opera release opera 13 上面的代码将无法工作：P

能做`.no-csstransforms3d .modal.fade`

# css - CSS 股票代码修复

> ID：11589878
> 
> 赞同：-2
> 
> 时间：2012-07-21T05:59:01.167
> 
> 标签：css

我终于找到了适用于所有浏览器的股票代码。只是想再做一些 hack 让它看起来更好：

1）使字体与页面其余部分相同 2）去掉“当前股票值”黑条 3）去掉股票代码后面的浅灰色

非常感谢你的帮助

这是页面 [http://petrowest.squarespace.com/home/](http://petrowest.squarespace.com/home/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:05:58.357

我查看了您链接的最石油网站的来源。看起来 petrowest 正在使用这个股票代码模块：

[http://www.google.com/ig/directory?type=gadgets&url=hosting.gmodules.com/ig/gadgets/file/111070972621517437361/mini-stocks-gadget.xml](http://www.google.com/ig/directory?type=gadgets&url=hosting.gmodules.com/ig/gadgets/file/111070972621517437361/mini-stocks-gadget.xml)

将模块嵌入网站后，您应该能够在本地托管 xml 文件，然后编辑股票代码的定义。

如果你查看 petrowest 页面的源代码，你会看到这一行：

`<div class="stock-ticker"><script src="//www.gmodules.com/ig/ifr?url=http://hosting.gmodules.com/ig/gadgets/file/111070972621517437361/mini-stocks-gadget.xml&amp;up_stocks=PRW.TO&amp;synd=open&amp;w=200&amp;h=50&amp;title=&amp;output=js"></script></div>`

然后，如果您单击嵌入的 url，`http://hosting.gmodules.com/ig/gadgets/file/111070972621517437361/mini-stocks-gadget.xml`您将看到一个具有内联 css 定义的函数定义。如果您将 mini-stocks-gadget.xml 保存到您的服务器，您应该能够尝试使用该函数的 css 部分，使其看起来像您想要的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:10:25.483

由于您使用的是模块而不是将代码直接放入网站，因此您必须绕过它：

```
.standard[background-color="#000000"] { display: none; }
.standard { font-size: 14px; /* put in size here */ background:white; /* eliminate grey background} 
```

# swfupload - SWFUpload - 如何取消排队的文件

> ID：11589879
> 
> 赞同：0
> 
> 时间：2012-07-21T05:59:00.307
> 
> 标签：swfupload

我对如何取消 SWFUpload 中的上传有点困惑。我知道您必须将上传的 ID 传递给 cancelUpload() 函数，但似乎当我这样做时它不起作用。我的代码示例是：

```
function remove(number, id) {
    cancelUpload(id);
}

<span onClick = "remove(0, 'SWFUpload_0_0')">filename</span> 
```

但是，文件仍会上传。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:33:30.553

必须添加分配给 SWFUpload 的变量。在这种情况下， swfu.cancelUpload() 起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T03:18:35.130

它已经在 handlers.js 文件中。这将取消您当前的排队文件。

```
ar progress = new FileProgress(file, this.customSettings.progressTarget);
progress.toggleCancel(true); 
```

# c++ - 使用 Maya API 类 MArgList 中的 get 函数时获得神秘的类型转换

> ID：11589884
> 
> 赞同：0
> 
> 时间：2012-07-21T05:59:59.543
> 
> 标签：c++, api, plugins, maya

我正在使用 Maya API 中的 MArgList 类来检索在 Maya 命令行中输入的参数。根据类参考 MArgList::get 应该能够将 int 或 double 作为其第二个参数，但它似乎只期望一个 bool，因此在编译期间会引发转换错误。以下是代码部分和生成的错误。任何关于可能导致这种情况的想法将不胜感激。代码是直接从有关 Maya 插件开发的教程中输入的，所以它为什么不起作用是个谜。

```
const int nPosts = 5;
const double radius = 0.5;
const double height = 5.0;

unsigned index;
index = args.flagIndex( "n", "number" );
if( MArgList::kInvalidArgIndex != index )
    args.get( index + 1, nPosts );

unsigned index;
index = args.flagIndex( "r", "radius" );
if( MArgList::kInvalidArgIndex != index )
    args.get( index + 1, radius );

unsigned index;
index = args.flagIndex( "h", "height" );
if( MArgList::kInvalidArgIndex != index )
    args.get( index + 1, height );

1>Posts1Cmd.cpp(37): error C2664: 'MStatus MArgList::get(unsigned int,bool &) const' :               cannot convert parameter 2 from 'const int' to 'bool &'
1>Posts1Cmd.cpp(39): error C2086: 'unsigned int index' : redefinition
1>          Posts1Cmd.cpp(34) : see declaration of 'index'
1>Posts1Cmd.cpp(42): error C2664: 'MStatus MArgList::get(unsigned int,bool &) const' : cannot convert parameter 2 from 'const double' to 'bool &'
1>Posts1Cmd.cpp(44): error C2086: 'unsigned int index' : redefinition
1>          Posts1Cmd.cpp(34) : see declaration of 'index'
1>Posts1Cmd.cpp(47): error C2664: 'MStatus MArgList::get(unsigned int,bool &) const' : cannot convert parameter 2 from 'const double' to 'bool &'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:30:30.967

如果要从`get`函数中获取新值，则不能拥有目标变量`const`。

尝试

```
int nPosts = 5;
double radius = 0.5;
double height = 5.0; 
```

此外，您不应`index`为每个调用声明一个新变量。只需声明一次并重用它。

# c# - 阻塞函数并等待事件 C#

> ID：11589890
> 
> 赞同：1
> 
> 时间：2012-07-21T06:01:19.450
> 
> 标签：c#, events, .net-4.0, thread-synchronization

我想阻止一个函数并等待一个事件然后继续，在我的情况下，当我单击一个按钮时我想要拥有的伪代码：

*   弹出消息框
*   等待datagridview中的事件点击
*   弹出消息框2
*   等待datagridview中的事件点击
*   弹出一个是/否消息框
*   执行另一个函数

但实际代码不会等待 autoevent.Set() 函数，因此当我想阻塞主函数时，线程调用的函数仍然被阻塞。

我尝试了 ManualResetEvent 和 AutoResetEvent，这是我用于 AutoResetEvent 的代码：

```
 public partial class person : Form
    {

AutoResetEvent auto = new AutoResetEvent(false);  

private void button1_Click(object sender, EventArgs e)
        {
           int old_id, new_id;

            //dataGridView1.ClearSelection(); 
            Thread t1 = new Thread(new ThreadStart(th_remove));
            Thread t2 = new Thread(new ThreadStart(th_replace));

            t1.Start(); 
           old_id = (int)dataGridView1.SelectedRows[0].Cells[1].Value; 

           t2.Start();
           new_id = (int)dataGridView1.SelectedRows[0].Cells[1].Value;

            DialogResult dialogResult = MessageBox.Show("Remplacer", "Vous êtes sûr de vouloir remplacer ?", MessageBoxButtons.YesNo);

            if (dialogResult == DialogResult.Yes)
            {
                db.replace("person", new_id, old_id); 
            }
           }

        private  void th_replace()
        {
            auto.WaitOne();  
            MessageBox.Show("Seléctionnez la ligne remplaçante");
        }

        private  void th_remove()
        {
            auto.WaitOne();          
            MessageBox.Show("Seléctionnez la ligne à supprimer");
        }

        private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
        {
             auto.Set();
        }
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:14:21.073

> 我想阻止一个函数并等待一个事件然后继续

这基本上不是事件驱动的 GUI 的工作方式。您不应该阻止 UI 线程 - 它会阻止屏幕刷新、窗口被拖动、关闭等。

相反，您应该禁用所有您不希望在其他处理正在进行时可用的操作，并且当事件发生时，回调到 UI 线程（例如使用`Control.Invoke`）重新启用相关控件，并继续您的逻辑。

C# 5 将通过异步方法使这一切变得更容易，因为这样您就可以编写看起来同步的代码，该代码“等待”操作完成而不会阻塞线程——但您仍然需要弄清楚何时禁用/启用什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:13:40.290

您可以尝试添加一个同步对象并在您的同步对象上使用[Monitor 的](http://msdn.microsoft.com/en-us/library/x090d6tf)方法。那就是您需要在事件处理程序和同步方法中调用。但请确保您的事件在您进入状态之前不会发生... =) 祝您好运！`Wait``Pulse``Pulse``Wait``Wait`

# java - 用 Set 属性编写一个可以转换为 Java 的 xml 模式

> ID：11589897
> 
> 赞同：1
> 
> 时间：2012-07-21T06:02:38.900
> 
> 标签：java, xml, collections, jaxb

假设我们有以下 xml 模式类型定义：

```
<xsd:simpleType name="StateType">
<xsd:restriction base="xsd:string">
   <xsd:enumeration value="California" />
   <xsd:enumeration value="Arizona" />
   <xsd:enumeration value="Nevada" />
   <xsd:enumeration value="Utah" />
</xsd:restriction>
</xsd:simpleType> 
```

当您将 JAXB 的 xjc 应用于此类型时，它会生成 Java Enum 类型：

```
public enum StateType {

    CALIFORNIA,
    ARIZONA,
    NEVADA,
    UTAH;

} 
```

我的问题是我们如何定义一个模式，当转换为 Java 类时，该类将包含一个可以包含上述枚举值子集的属性？请注意，它不应包含重复的枚举值。此类属性的自然选择是 Set<StateType>，但我不知道如何编写会在 Java 代码中生成 Set<StateType> 属性的模式。如果我们能以某种方式强制 List 不包含重复的条目，该属性也可以是 List<StateType>。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:31:09.483

您可以定义一个方案

> `<xsd:unique>`

element.More 信息可以从以下链接获得。

[确定的 XML 模式](http://www.datypic.com/books/defxmlschema/chapter17.html)

# ruby-on-rails - Mongoid 和质量分配

> ID：11589898
> 
> 赞同：0
> 
> 时间：2012-07-21T06:02:40.430
> 
> 标签：ruby-on-rails, mongoid, strong-parameters

我有以下 mogoid 文档定义/类：

```
class Exercise
  include Mongoid::Document
  field :name, :type => String
  field :description, :type => String

  belongs_to :group

  validates_presence_of :name, :description
end 
```

然后我有以下控制器和保存方法：

```
class ExercisesController < ApplicationController
  respond_to :json

  def create
    @exercise = Exercise.create(params[:exercise])
    @exercise.save!
    respond_with @exercise
  end
end 
```

这对我来说似乎是错误的，并且对批量分配问题持开放态度。

人们通常如何防止这种情况发生，使用强参数 gem 会是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:04:35.533

是的，您*应该*使用 strong_parameters gem，它将是 rails 4 中的默认质量分配保护

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T11:40:19.447

您可以使用 attr_accessible 作为“标准”保护。当然，这仍然有一个缺点，即您向接口公开了很多字段，而您可能只想公开一些字段，但需要在其他控制器中公开这些字段。

# javascript - jQuery.post() 回调无法执行

> ID：11589899
> 
> 赞同：1
> 
> 时间：2012-07-21T06:02:57.740
> 
> 标签：javascript, jquery, jquery-events

我正在使用`jQuery.post()`，一切正常，只是没有调用回调函数。

数据正在正确发送并且服务器正在正确接收等，但之后没有任何反应。我尝试复制参考代码无济于事。

这是我正在使用的内联 Javascript：

```
<head>
    <title></title>
    <script type="text/javascript" src="jquery.js"></script>

    <script type="text/javascript">
        function submit_login_cb(data,status) {
            alert(data);
        }
        function submit_login() {
            $.post("http://localhost:8051/", $("#login_form").serialize(), function(data,status){submit_login_cb(data,status);}, "json");
        }
        </script>
    </head> 
```

为什么回调不起作用？

**编辑：`statusText`返回`jqXHR`对象的字段只是说“错误”......虽然没有其他事情发生（POST请求在服务器上注册）。**

**编辑：Chrome 开发人员工具正在将其打印到控制台：** `XMLHttpRequest cannot load http://localhost:8051/. Origin null is not allowed by Access-Control-Allow-Origin.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:50:03.223

抱歉忘记更新此问题，要解决此问题，只需在您的 WSGI 服务器上允许 Null Origin 即可。

# maven - 嵌入式 Glassfish 中的嵌入式 ActiveMQ（使用 maven-embedded-glassfish-plugin）

> ID：11589901
> 
> 赞同：5
> 
> 时间：2012-07-21T06:03:23.253
> 
> 标签：maven, glassfish, activemq, glassfish-embedded

我正在尝试使用 maven-embedded-glassfish-plugin 运行嵌入的 ActiveMQ glassfish。

我已经分别完成了以下教程，所以我知道基础知识。目标是在 svn 中实现一键构建并避免 3pp 库的设置。

1 [http://www.hascode.com/2011/09/java-ee-6-development-using-the-maven-embedded-glassfish-plugin/](http://www.hascode.com/2011/09/java-ee-6-development-using-the-maven-embedded-glassfish-plugin/)

2 [http://javadude.wordpress.com/2011/07/21/glassfish-v3-1-running-embedded-activemq-for-jms-part-1/](http://javadude.wordpress.com/2011/07/21/glassfish-v3-1-running-embedded-activemq-for-jms-part-1/)

#2 的项目设置从现在开始用作起点，我将尝试合并 #1 中的步骤

我已经设置了 glassfish-resources.xml，希望它能完成 glassfish 管理控制台中的配置教程 1。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
<resource-adapter-config resource-adapter-name="activemq-rar-5.6.0" thread-pool-ids="thread-pool-1">
    <property name="ServerUrl" value="vm://localhost:61616"></property>
    <property name="BrokerXmlConfig" value="broker:(tcp://0.0.0.0:61616)"></property>
</resource-adapter-config>
    <connector-resource enabled="true" jndi-name="amqres"
        object-type="user" pool-name="amqpool">
    </connector-resource>
    <connector-connection-pool
        connection-definition-name="javax.jms.ConnectionFactory"
        fail-all-connections="false" idle-timeout-in-seconds="300"
        is-connection-validation-required="false" max-pool-size="32"
        max-wait-time-in-millis="60000" name="amqpool" pool-resize-quantity="2"
        resource-adapter-name="activemq-rar-5.6.0" steady-pool-size="2" />
    <admin-object-resource res-adapter="activemq-rar-5.6.0"
        res-type="javax.jms.Queue" jndi-name="amqmsg"></admin-object-resource>
</resources> 
```

**pom.xml 的补充**

```
<dependencies>
    <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-rar</artifactId>
        <version>5.6.0</version>
        <type>rar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-core</artifactId>
        <version>5.6.0</version>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

Q1：glassfish-resources.xml 是如何加载的？我应该使用 maven admin 命令还是将它放在一些 META-INF 中？编辑：看起来它在 web-inf if war 和 meta-inf if ejb-jar

Q2：不完全确定下一步是什么。#1 让我将 activemq 和 log4j 库复制到 GLASSFISH_HOME/glassfish/lib 到目前为止，我只在 pom.xml 中添加了依赖项，这里的等价物是什么？

Q3：Rar 也需要部署。如何部署多个应用程序？

# facebook - Facebook Javascript SDK 无法在 .xhtml 页面上运行

> ID：11589903
> 
> 赞同：1
> 
> 时间：2012-07-21T06:04:05.197
> 
> 标签：facebook, xhtml, facebook-javascript-sdk

`html`我在一个文件中试用了 Javascript SDK ，一切正常。然后将相同的代码移动到一个`.xhtml`文件中，它完全停止了工作。

代码如下：

从一个文件移动`test.html`到另一个文件`test.xhtml`并停止工作

```
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
            // Load the SDK Asynchronously
            (function(d){
                var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                ref.parentNode.insertBefore(js, ref);
            }(document));

            // Init the SDK upon load
            window.fbAsyncInit = function() {
                FB.init({
                    appId      : '365436556863538', // App ID
                    channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
                    status     : true, // check login status
                    cookie     : true, // enable cookies to allow the server to access the session
                    xfbml      : true  // parse XFBML
                });

                // listen for and handle auth.statusChange events
                FB.Event.subscribe('auth.statusChange', function(response) {
                    if (response.authResponse) { 
                        FB.api('/me', function(response){
                            if (response.name) {
                                $("#username").html("<img src='https://graph.facebook.com/" + response.id + "/picture'/><div>" + response.name  +"</div>");

                            }
                        })
                        $('#auth-loggedout').hide();
                        $('#auth-loggedin').show();
                    } else {
                        // user has not auth'd your app, or is not logged into Facebook
                        $('#auth-loggedout').show();
                        $('#auth-loggedin').hide();
                    }
                });

                // respond to clicks on the login and logout links
                document.getElementById('auth-loginlink').addEventListener('click', function(){
                    FB.login(function(response) {
                       // handle the response
                     }, {scope: 'email'});
                });
                document.getElementById('auth-logoutlink').addEventListener('click', function(){
                    FB.logout();
                }); 
            } 
        </script>
        <div id="auth-status">
            <div id="auth-loggedout">
                <a href="#" id="auth-loginlink">Login</a>
            </div>
            <div id="auth-loggedin" style="display:none">
                (<a href="#" id="auth-logoutlink">logout</a>)

            </div>
        </div>
        <div>
            <div id="username"></div>
        </div> 
    </body>
</html> 
```

我可以在控制台窗口中找到它：

> 未捕获的 SyntaxError：意外的标识符
> 
> window.script1342849602887=1；

# objective-c - iOS 5.1 [MobileSubstrate] 的解锁方法

> ID：11589912
> 
> 赞同：0
> 
> 时间：2012-07-21T06:06:53.673
> 
> 标签：objective-c, ios, jailbreak

我正在尝试找出解锁设备的方法在哪里。我正在使用 SBAwayLockBar 但 SpringBoard 崩溃并返回 SBAwayLockBar 的实例可能无法响应选择器，解锁。那么，是否有一种私有方法可以让我在 iOS 5.1 上解锁设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:13:51.020

我认为解锁设备的功能在 SBAwayController.h 中。（老实说，我只是快速查看了头文件）。我发现这些很有趣。

```
- (void)attemptUnlockFromSource:(int)source;    // 0x441d5
- (void)attemptUnlock;
- (void)_finishedUnlockAttemptWithStatus:(BOOL)status; 
```

# mysql - 单个 MySQL 查询以根据视图数量从不同表中获取结果

> ID：11589917
> 
> 赞同：0
> 
> 时间：2012-07-21T06:07:51.993
> 
> 标签：mysql

嗨，我知道基本的 MySQL 查询格式，但现在我需要做一些复杂的查询。说（出于解释目的）我有 3 个表，其列**id**、**item_name**和**no_of_views**。我想要一个查询来从这 3 个表中获取前 10 个查看项目。

```
Table1

 id:        item_name        no_of_views
 1          item1             20
 2          item2             25
 3          item3             16
 4          item4             10

Table2

 id:        item_name        no_of_views
 1          itemA             2
 2          itemB             5
 3          itemC             70
 4          itemD             0

Table3

 id:        item_name        no_of_views
 1          item_1             34
 2          item_2             55
 3          item_3             10
 4          item_4             1 
```

我知道我必须加入这些表，然后根据 no_of 视图进行查询

像

```
 $query="
 (SELECT * FROM Table2)
 UNION ALL
 (SELECT * FROM Table2)
 UNION ALL
 (SELECT * FROM Table2)
 ORDER by no_of _views DESC LIMIT 10"; 
```

这工作得很好，但我的问题是我的表中有 100 个项目并且我有很多表，如果这是我这样做的方式，查询将必须从所有表中获取所有结果，然后只给我前 10意见，

我想这样做就像根据没有视图从所有表中只选择 10 个值，比如说我有 10 个表，每个表都有一个 no_of_views，我如何查询以查看哪些项目在所有表中具有最高视图，然后是下一个较低的 no_of_views来自另一个表或同一个表，这都是真的，依此类推。这甚至可能吗？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:00:13.400

将您的查询与以下查询进行比较时，MySQL 执行计划是相同的。优化器仍然只会从每个表中选择前 10 个**（不是完整的记录集）**，然后比较它们，因为这是它需要的最大值。这种方法并不像你想象的那么低效。

```
$query="
(SELECT * FROM Table1 ORDER BY no_of_views DESC LIMIT 10)
UNION ALL
(SELECT * FROM Table2 ORDER BY no_of_views DESC LIMIT 10)
UNION ALL
(SELECT * FROM Table3 ORDER BY no_of_views DESC LIMIT 10)
ORDER by no_of _views DESC LIMIT 10"; 
```

# android - 更新到新版本后检查最新版本

> ID：11589918
> 
> 赞同：0
> 
> 时间：2012-07-21T06:08:00.293
> 
> 标签：android, version

更新到最新版本后，有没有办法检查应用程序的最新版本？

**— 已编辑**

我很抱歉，因为我不清楚。我想知道是否有内置方法而不是在数据库中保存版本值或`SharedPreferences`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:15:02.800

看看这个对上一个问题的[回答](https://stackoverflow.com/a/6952726/369752)。基本上，您使用 PackageManager 获取当前应用程序版本并将其与共享首选项中先前存储的版本进行比较。

有关更多详细信息，请查看[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)类和[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html)类。

# iphone - 在完成游戏时存储分数并在 iPhone 中按下 HighScore 按钮获取数据

> ID：11589919
> 
> 赞同：1
> 
> 时间：2012-07-21T06:08:02.520
> 
> 标签：iphone

我已经完成了这段代码来存储分数。

但这只是给我最后添加的分数，而不是每次都在新索引上存储数据。

```
-(IBAction)btnSaveScore:(id)sender
{
    if(!dictWinData)
        dictWinData = [[NSMutableDictionary alloc] init];

    array = [NSMutableArray arrayWithObjects:txt_EnterName.text,
                                             [NSString stringWithFormat:@"%i",iTap], nil];

    int increment = 0;

    NSLog(@"array data is:--> %@",array);

    for (int intWinData = 1; intWinData < [array count]; intWinData++)
    {
        [dictWinData setObject:array forKey:[NSString stringWithFormat:@"NameScore%d",increment]];
        increment++;
    }
} 
```

如果我的代码中有任何错误，请让我指导。

有没有其他方法来存储数据..？

`NSUserDefaults`有助于存储和显示数据... ？

如何使用`NSUserDefaults`来存储和检索数据。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:06:10.823

问题在于这一行：

```
int increment = 0; 
```

每次按下保存按钮时，`increment`都会将其初始化为零，因此每次将值添加到相同键的字典中`NameScore0`。因此它将覆盖现有的字典值。

您需要将其`increment`设为静态`static int increment = 0;`或将其设为全局变量，它将解决问题。

```
-(IBAction)btnSaveScore:(id)sender
{
    if(!dictWinData)
        dictWinData = [[NSMutableDictionary alloc] init];

    array = [NSMutableArray arrayWithObjects:txt_EnterName.text,
                                             [NSString stringWithFormat:@"%i",iTap], nil];

    static int increment = 0;

    for (int intWinData = 1; intWinData < [array count]; intWinData++)
    {
        [dictWinData setObject:array forKey:[NSString stringWithFormat:@"NameScore%d",increment]];
        increment++;
    }
} 
```

`NSUserDefaults`用于在 ios 设备的设置窗格中显示应用程序设置。不要在那里保存您的应用程序数据。代替`NSUserDefaults`你可以`plist`用来存储数据。

请检查[链接](http://www.youtube.com/watch?v=MuzKKr4frIM)

# python - 使用 python-django 调用动态库（C++）链接

> ID：11589926
> 
> 赞同：-2
> 
> 时间：2012-07-21T06:10:42.347
> 
> 标签：python, django

我正在尝试使用 Django 构建图像处理网站。我已经想出了如何上传图像，但我不确定如何调用 C++ 库来处理图像。

我尝试使用[CType](http://docs.python.org/library/ctypes.html)调用 C++ 库，但该链接仅说明了如何在控制台模式下调用库。我如何将结果放入网页？

我已经 在 github 上上传了[最小的示例。](https://github.com/doph/minimal-django-file-upload-example)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T00:19:49.690

> 我如何将结果放入网页？

[就像你一直做的那样。](https://docs.djangoproject.com/en/dev/ref/request-response/#httpresponse-objects)Python是Python；添加`ctypes`和/或 Django 并不会改变这一点。

# visual-studio-2010 - 我在 Visual Studio 2010 中找不到选项卡控件

> ID：11589927
> 
> 赞同：0
> 
> 时间：2012-07-21T06:10:58.700
> 
> 标签：visual-studio-2010

我用的是VS2010专业版。我在任何地方都找不到**TabControl**。它不仅是 tabControl，还有其他一些。

我需要从某个地方下载它们吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:44:59.847

您引用的链接是 Windows 窗体和 TabControl 在工具箱中：

![在此处输入图像描述](../Images/0b90e6547d5d30447160633c12a5042f.png)

您提到 jQuery 和 ASP.Net 应用程序，您需要使用如下控件： [http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)
[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)
[http： //jquerytab.codeplex.com/](http://jquerytab.codeplex.com/)
[http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774](http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774)
[http://www.codeproject.com/Articles/13165/A-Simple-ASP-NET -Tab-Control-Using-the-MultiView-c](http://www.codeproject.com/Articles/13165/A-Simple-ASP-NET-Tab-Control-Using-the-MultiView-c)
[http://www.codeproject.com/Articles/17292/Tab-control-for-ASP-NET-Applications](http://www.codeproject.com/Articles/17292/Tab-control-for-ASP-NET-Applications)

# c++ - 使用 Cairo 和 Allegro 5

> ID：11589929
> 
> 赞同：2
> 
> 时间：2012-07-21T06:11:29.073
> 
> 标签：c++, cairo, allegro5

新手程序员在这里，

我正在使用 Allegro 5 设计一个 2d 游戏，我注意到在使用 allegro 中的位图（实际上是从 photoshop 导出的 png 文件......）时，旋转的图像看起来不那么出色：[旋转的流星](https://i.stack.imgur.com/27GAP.png)

左边那个是原来的方向，右边那个旋转了10度。它们有点小，但边缘质量的差异很明显。

首先，我*真的*很想避免创建一个包含所有不同旋转位置的精灵表，原因如下：

我对流星和我正在创建的所有其他物体有不同的“效果”，这些物体需要在物体周围发光。我将在每个对象周围应用至少 6 种不同的发光颜色。现在，这些流星中的每一个都需要旋转 30 帧才能显得平滑。假设我想要在游戏中像这样工作的区区 10 个不同的对象；仅用于这些对象的文件就有 1800 个！

我宁愿专注于寻找一种更好的方式来显示旋转的图像，而不是花时间去做。

我已经尝试研究各种 Photoshop 技术，但我能想到的最好的方法是让 Photoshop 中的圆圈稍微小一点，然后让它“发光”相同的灰色阴影，这可以解决旋转问题，但它会使流星看起来很模糊.

然后我做了一些研究，发现 Allegro 5 中提供了各种混合选项。我已经尝试了 al_set_blender 中所有可能的选项 - 它们都没有解决锯齿状边缘的问题。

最后，我再次搜索如何处理这个问题并发现了[这篇](https://stackoverflow.com/questions/6391423/anti-aliasing-in-allegro-5)关于 Allegro 5 中抗锯齿的帖子。正如答案中指出的，有一个可用的抗锯齿选项，但主要限制是只能在绘制图元时工作到后台缓冲区。实际上实现这将是大量的工作，并且每次绘制所有必需的原语似乎效率很低。

然而，在另一篇文章中引起我注意的是这条评论：

> 顺便说一句，如果您不需要游戏的实时性能，**您还可以连接到 libcairo 以绘制漂亮的矢量图形。**将它连接到 Allegro 非常简单，但这是一个不同的话题。

因此，我再次对图形库以及它们如何解决我的问题进行了研究。我查看了 Cairo、SDL、Qt、ImageMagic 等，但最终我同意 Cairo 似乎是适合这项工作的工具。

最后我们得出这篇文章的原因：

**我的问题是：如何将 Cairo 与 Allegro 5 “挂钩”？**

现在，我还没有在 Cairo 上做过任何工作，所以我并没有被它束缚，但我想继续使用 Allegro，除非真的有充分的理由切换到其他东西。

Allegro 有一种简单直接的方式来创建显示并使用 allegro 命令对其进行绘图。但开罗有自己的处事方式，而且开罗似乎根本不管显示器。我可以想象两者一起工作的唯一方法是 Cairo 接收绘图命令，绘制图像，将图像保存为 png 文件，然后打开 allegro 函数并在该文件中读取 1 帧。这不可能是评论者的意思。

无论如何，请随意批评我的思维过程。我不会被冒犯的。如果有什么简单的你觉得我没看懂，请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:37:29.703

Cairo 可以渲染到一块内存，可以将其传输到 Allegro 位图。然而，性能对于实时游戏来说是不可接受的。它对于绘制图表、将 SVG 图像加载到静态位图中等会更有用。抛开性能不谈，我看不出它对旋转位图有何帮助。

您所说的“抗锯齿”仅适用于原语。所以你链接到的那个问题是不相关的。如果在创建/加载旋转位图之前使用这些选项可能会有所帮助：

```
al_set_new_bitmap_flags(ALLEGRO_MIN_LINEAR | ALLEGRO_MAG_LINEAR | ALLEGRO_MIPMAP); 
```

它们通常适用于缩放位图，但您的旋转可能符合条件。

最后，使用预乘 alpha（默认搅拌器）会给你更好的结果。

我刚刚用你的图片测试了这个：

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_image.h>

int main()
{
  ALLEGRO_BITMAP *circle;

  al_init();
  al_init_image_addon();

  al_create_display(640, 480);

  al_set_new_bitmap_flags(ALLEGRO_MIN_LINEAR);

  circle = al_load_bitmap("circle.png");
  if (!circle) return 0;

  al_clear_to_color(al_map_rgb(0,0,0));
  al_draw_bitmap(circle, 100, 100, 0);

  al_draw_rotated_bitmap(circle, 25, 25, 200, 200, 0.174, 0);

  al_flip_display();

  al_rest(5);

  return 0;
} 
```

我相信它会给你想要的外观。

# php - PHP：数组比较问题 - URL

> ID：11589932
> 
> 赞同：3
> 
> 时间：2012-07-21T06:13:10.310
> 
> 标签：php

我已经将 php 代码放在一起，它将通知 YT 视频是有效还是无效。由于我只想要来自 YT 域的 URL，因此我设置了一个数组来捕获任何其他 URL 大小写并返回错误。问题是，当我以如下格式键入 URL 时：`www.youtube.com/v/NLqAF9hrVbY`我收到最后一个回显错误，但是当我`http`在该 URL 前面添加它时，它可以找到。我正在检查`$url`with `PHP_URL_HOST`。

为什么它不接受没有 的允许域的 URL `http`？

**PHP**

```
if ($_POST) {
    $url = $_POST['name'];

    if (!empty($url['name'])) {
        $allowed_domains = array(
            'www.youtube.com',
            'gdata.youtube.com',
            'youtu.be',
            'youtube.com',
            'm.youtube.com'
        );

        if (in_array(parse_url($url, PHP_URL_HOST), $allowed_domains)) {

            $formatted_url = getYoutubeVideoID($url);
            $parsed_url = parse_url($formatted_url);
            parse_str($parsed_url['query'], $parsed_query_string);
            $videoID = $parsed_query_string['v'];

            $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $videoID);

            if ($videoID != null) {

                if (strpos($headers[0], '200')) {
                    echo('<div id="special"><span id="resultval">That is a valid youtube video</span></div>');

                }
                else {

                    echo('<div id="special"><span id="resultval">The YouTube video does not exist.</span></div>');
                    return false;
                }

            }
            {

                echo('<div id="special"><span id="resultval">The YouTube video does not exist.</span></div>');
                return false;
            }
        }
        else {

            echo ('<div id="special"><span id="resultval">Please include a video URL from Youtube.</span></div>');

        }
        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:17:32.617

需要为[parse_url()提供带有协议标识符（方案 - 例如 http）的有效 URL。](http://php.net/manual/en/function.parse-url.php)这就是比较失败的原因。

您可以按如下方式解决此问题。

```
if(substr($url, 0, 4) != 'http')
$url = "http://".$url; 
```

在执行之前使用上述内容

```
if(in_array(parse_url($url, PHP_URL_HOST), $allowed_domains)){ ... } 
```

# python - 如何在python中查找列表是否包含多个相同元素？

> ID：11589933
> 
> 赞同：1
> 
> 时间：2012-07-21T06:13:17.530
> 
> 标签：python, python-3.x

所以我刚开始学习python，每周都会从朋友那里得到迷你课程。这周要做一个简单的老虎机游戏。老虎机中有 6 个项目，当出现 3 个或更多相同项目时，用户获胜。我试过下面的代码：

```
for i in slotScreen:
    if slotScreen.count(i) == 3:
        print('You got 3 of the same! You win!') 
```

当列表中的第一项是同类 3 的一部分时，该代码有效，但如果三个元素都不是列表中的第一个，则该代码不起作用，如下所示：

```
slotScreen = ['lemon', 'cherry', 'lemon', 'lemon', 'pirate', 'bar']  # works

slotScreen = ['cherry', 'lemon', 'lemon', 'lemon', 'pirate', 'bar']  # not work 
```

知道为什么会这样吗？

编辑：更多代码。当我应该收到 You win 3x 消息时，我收到了 You Lose 消息。

```
 for i in slotScreen:
            if slotScreen.count(i) == 6:
                print('You win 10x your bet!!!')
                x = x + int(bet) * 10
                break

            elif slotScreen.count(i) == 5:
                print('You win 5x your bet!')
                x = x + int(bet) * 5
                break

            elif slotScreen.count(i) == 4:
                print('You win 4x your bet!')
                x = x + int(bet) * 4
                break

            elif slotScreen.count(i) == 3:
                print('You win 3x your bet!')
                x = x + int(bet) * 3
                break

            elif slotScreen.count(i) <= 2:
                print('Sorry you lose')
                break 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T07:10:52.220

您的程序总是`break`在第一次`for`迭代中执行，因此它只计算列表的第一个元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T07:29:04.277

Marco de Wit's response is correct. I thought I would offer a possible solution.

```
from collections import Counter

counter = Counter(['cherry', 'lemon', 'lemon', 'lemon', 'pirate', 'bar'])
symbol, count = counter.most_common(1)[0] 
```

This will give you the symbol (in this case, 'lemon') and its count (in this case, 3) of the most common symbol in the list (if you want to deal with ties, you'll need to extend this).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T06:17:41.660

你的代码对我有用：http: [//ideone.com/CKNZb](http://ideone.com/CKNZb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-13T02:11:59.640

您可以尝试转换为 a `set`，然后比较：

```
def main():
    a = [1, 1]
    b = [1, 2]
    print(contains_multiple(a))  # `True`
    print(contains_multiple(b))  # `False`

def contains_multiple(x):
    """Return `True` if `x` contains multiplicates."""
    return len(x) != len(set(x))

if __name__ == '__main__':
    main() 
```

为了避免在 a`list`包含一些[不可散列](https://docs.python.org/3/glossary.html#term-hashable)的项目时出现错误，请使用：

```
from collections.abc import Hashable

def contains_multiple(x):
    """Return `True` if `x` contains multiplicates."""
    return len(x) != len(unique(x))

def unique(iterable):
    """Return `list` of unique items in `iterable`."""
    if all(is_hashable(x) for x in iterable):
        return set(list(iterable))
    unique = list()
    for item in iterable:
        if item in iterable:
            continue
        unique.append(item)
    return unique

def is_hashable(x):
    """Return `True` if `x` is hashable."""
    return isinstance(x, Hashable) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-13T02:40:39.427

使用 dict 理解来制作直方图，然后检查它。

```
>>> L = ['cherry', 'lemon', 'lemon', 'bar', 'bar', 'bar']
>>> d = {f: L.count(f) for f in set(L)}
>>> for fruit in d:
        if d[fruit] > 2:
            print("You got {} {}'s! You win!").format(d[fruit], fruit)

You got 3 bar's! You win! 
```

这段代码现在可能看起来很神秘，但一旦你学会阅读和理解列表和字典推导式，它们就会更容易使用并且更不容易出错。

这是创建然后命名为 d 的字典。它将每个水果作为键，并计算值：

```
>>> {f: L.count(f) for f in set(L)}
{'cherry': 1, 'lemon': 2, 'bar': 3} 
```

python 中的 for 循环可用于循环遍历字典的键，就像列表中的项目或任何其他可迭代项一样容易。然后，您可以使用每个键来访问计数值并对其进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-13T02:49:08.673

虽然我认为其他一些答案已经给出了替代实现，但我认为看看如何修复您当前的算法可能会很有用：

```
 for i in slotScreen:
        if slotScreen.count(i) == 6:
            print('You win 10x your bet!!!')
            x = x + int(bet) * 10
            break

        elif slotScreen.count(i) == 5:
            print('You win 5x your bet!')
            x = x + int(bet) * 5
            break

        elif slotScreen.count(i) == 4:
            print('You win 4x your bet!')
            x = x + int(bet) * 4
            break

        elif slotScreen.count(i) == 3:
            print('You win 3x your bet!')
            x = x + int(bet) * 3
            break

        # no else clause on the if statement, because we can't tell if you've lost yet

    else:  # this else block is attached to the for, and runs if no break was hit
        print('Sorry you lose') 
```

`else`这使用了可以放在`for`循环之后的有点晦涩的子句。`else`仅当循环运行完成时才会运行该块，而不是通过`break`语句提前退出。这意味着只有在检查了列表中的所有值之后才会出现“你输了”代码。请注意，您实际上可以提前停止，因为如果您检查了六长列表中的前 4 个值，则在最后两个值中找不到任何三种值。

您还可以进行一些其他小的改进，例如`slotScreen.count(i)`每个循环只运行一次循环并将其保存到可以由每个`if`/`elif`测试测试的变量中。

# c# - 如何从数据列表中获取最高记录

> ID：11589936
> 
> 赞同：-1
> 
> 时间：2012-07-21T06:13:34.120
> 
> 标签：c#, asp.net

如何在数据列表中按名称获取记录顶部..

```
<asp:DataList ID="dlOtherTrends" runat="server" OnItemDataBound="dlOtherTrends_OnItemDataBound">
                <ItemTemplate>
                    <li><a href="PostDetail.aspx?CatID=<%# Eval("CATID") %>&# <%# Eval("NAME") %>"><img id="imgPost" runat="server" width="70"></a>
                    <span><a href="PostDetail.aspx?CatID=<%# Eval("CATID") %>&# <%# Eval("NAME") %>"><asp:Label ID="lblPostName" runat="server"></asp:Label></a></span></li>
                </ItemTemplate>
                </asp:DataList> 
```

现在这是列表页面..

```
<asp:DataList ID="dlPost" runat="server" OnItemDataBound="dlPost_OnItemDataBound">
                <ItemTemplate>
                    <article>
                        <h1><asp:Label ID="lblPostName" runat="server" Text="Label"></asp:Label></h1><a name="<%# Eval("NAME") %>"></a>
                        <span class="posted">Posted on <asp:Label ID="lblPostDate" runat="server" Text="Label"></asp:Label> by <a href="#">Editor</a></span>
                        <p><img id="imgPost" runat="server" width="540"></p>
                        <p><div id="DivDescr" runat="server"></div></p>
                        <p>&nbsp;</p>
                        <!-- AddThis Button BEGIN -->
                        <div class="addthis_toolbox addthis_default_style ">
                            <a class="addthis_button_facebook_like"<%="fb:like:layout"%>="button_count"></a>
                            <a class="addthis_button_tweet"></a>
                            <a class="addthis_button_google_plusone"<%="g:plusone:size"%>="medium"></a>
                            <a class="addthis_counter addthis_pill_style"></a>
                        </div>
                        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4fc6ff7e30646c29"></script>
                        <!-- AddThis Button END -->
                    </article>
                </ItemTemplate>
            </asp:DataList> 
```

通过单击 imgPost 和 lblPostName 我需要在第二个记录中使用相同的记录....问题是所有记录都在同一页面中，但我想首先显示选定的记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:03:28.797

```
select top name from urdataTable desc 
```

如果您正在使用 sql server，则可以这样做

# jquery - 如何在第一个 div 中获取第一类中的值？

> ID：11589941
> 
> 赞同：0
> 
> 时间：2012-07-21T06:14:05.437
> 
> 标签：jquery

```
<div class="item">
   <div class="name">
     <input type="text" class="XXX">
   </div>
</div>
<div class="item">
    <div class="name">
     <input type="text" class="XXX">
   </div>
</div>
<div class="item">
   <div class="name">
     <input type="text" class="XXX">
   </div>
</div> 
```

如何在 jquery select 中使用 :eq() 从文本框 class="xxx" 获取值，我正在尝试类似 $('.item:eq(0).name.XXX').val();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:16:22.617

您应该在选择器之间使用空格：

```
$('.item:eq(0) .name .XXX').val(); 
```

或者：

```
$('.item:eq(0) > .name > .XXX').val() 
```

或者：

```
$('.item:eq(0)').find('input').val() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T07:06:43.407

只需要在 item:eq(0),name,XXX 之间添加空格

$('.item:eq(0) .name .XXX').val();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:19:47.793

试试`$('.item:eq(0) .name .XXX')`。你需要像 CSS 选择器那样做，它需要一个空间来让下一个选择器应用于后代。或`>`用于直系子女。

# objective-c - UITableViewController - 在表格上方添加空间/移动表格

> ID：11589952
> 
> 赞同：3
> 
> 时间：2012-07-21T06:16:41.773
> 
> 标签：objective-c, uiscrollview, uitableview

我需要在 UITableViewController 中的分组样式 TableView 的顶部（上方）有一个空闲区域。什么是顶？表视图的 NavigationBar 和 SectionTitle 之间的区域。

首先，我用

```
UIEdgeInsets inset = UIEdgeInsetsMake(60, 0, 0, 0);
self.tableView.contentInset = inset; 
```

这在第一刻效果很好，正是我需要的。但是，如果我向下滚动 TableView，视图将移动到新的空闲区域。

跟...共事

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView 
```

似乎不起作用:(

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T16:10:12.857

表视图控制器的根视图*是*表视图，因此您不能将内容放在其上方或下方，因为没有超级视图供您添加它们。

解决方案是改用 UIViewController 子类，您可以为此添加任意大小的表格视图，其上方和下方都有视图。没有涉及太多额外的工作——您必须声明您的视图控制器实现了委托和数据源协议，并在 IB 中连接这些出口，除此之外它与表视图控制器相同。

基本信息 - 你可以有一个没有 UITableViewController 的表格视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T19:56:11.840

如果你的表是只读的，jrturton 就足够了。否则，您还需要将编辑调用从 UIViewController 传播到封闭的 UITableView，如下所示：

```
//In UIViewControler propagate call to tableView property
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
  [super setEditing:editing animated:animated];  
  [self.tableView setEditing:editing animated:animated];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:46:38.940

您可以使用 table 的 headerView 属性创建一个具有所需大小的视图并将其放在 table 的标题视图中，它将为您提供您真正需要的内容。

您可以使用`-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`tableView 的委托方法来放置第一部分的标题视图。

快乐编码:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T15:44:08.243

所以你需要一个表格视图上方的空间，它在滚动时不会被表格视图覆盖？

与其玩弄表格视图，不如尝试在表格视图的`UILabel`顶部或在表格视图标题所在的位置添加一个。然后让表格视图的坐标从标签的正下方开始。这样，当您滚动时，空间，即；这里的标签，总是可见的。

这样做的原因是因为为 a 定义的所有内容`UITableView`，例如页眉或页脚，总是与表格相关联，并且不能单独操作。

# c# - 如何使用 ADOX 目录类实现 IDispoable

> ID：11589953
> 
> 赞同：0
> 
> 时间：2012-07-21T06:17:15.113
> 
> 标签：c#, adox

我正在尝试通过实现 IDisposable 接口来创建一次性 ADOX Catalog 实例，但我收到一个错误，即：ADOX.Catalog' does not contain a definition for 'Dispose' and no extension method 'Dispose'接受第一个参数类型'可以找到 ADOX.Catalog'（您是否缺少 using 指令或程序集引用？）

这是我的代码

```
namespace Disposable
{
class DBGen : IDisposable
{
    Catalog cat; 
    public DBGen()
    {
        cat = new Catalog();
        cat.Create("Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=D:\\AccessDB\\NewMDB.mdb;" +"Jet OLEDB:Engine Type=5");
        Console.WriteLine("Database Created Successfully");
        cat = null;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool b)
    {
        if (b)
        {
            cat.Dispose();
        }
    }
} 
```

}

我收到错误消息

```
 cat.Dispose(); 
```

你能告诉我为什么会这样吗？坦斯克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:22:55.887

该字段`cat`似乎在构造函数中设置为空，因此它一直为空。尝试在将其设置为 null 之前处理“cut”。

如果您要`cat`在类中的其他地方使用 somwhere，则应从构造函数**中删除** `cat=null;`并重写 dispose，如下所示：

```
public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool b)
    {
        if (b)
        {
            if (cat!=null) {
                var disposableCat = cat as IDisposable;
                if (disposableCat != null) {
                   disposableCat.Dispose();
                   cat=null;
                }
            }
        }
    } 
```

# sql-server-2008-r2 - SQL Server 代理给出 - 远程过程调用失败 (0x800706be)

> ID：11589964
> 
> 赞同：26
> 
> 时间：2012-07-21T06:20:16.073
> 
> 标签：sql-server-2008-r2

是否有人知道无法运行 SQL Server 服务的此问题的解决方案。

![在此处输入图像描述](../Images/185720df5ce420b6bc77d520a41bf087.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-25T18:47:50.183

解决方法：安装 [SQL Server 2008 R2 SP2](http://www.microsoft.com/en-us/download/details.aspx?id=30437)，重启，打开 SQL Server 配置管理器，一切正常。

来源：[冻结字节](http://www.i-m-code.com/blog/blog/2013/07/19/sql-server-2008-r2-configuration-manager-wmi-error-saga/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-06-16T04:28:41.497

无需重新安装或更新您的 SQL Server 2008 R2 实例。我遇到了同样的错误，只需启动 MSSQLSERVER 标准服务即可解决。

**如何启动此服务：**

打开管理任务 > 服务 > 选择标准服务选项卡 > 启动 SQL Server 代理（MSSQLSERVER）服务，一切顺利。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-18T15:59:17.010

恕我直言，“右键单击配置管理器并以管理员身份运行”是一个虚假的答案。我对以下一系列事件也有这个问题：我从这里下载了 Windows Azure SDK：http: [//www.windowsazure.com/en-us/develop/downloads/](http://www.windowsazure.com/en-us/develop/downloads/)，它安装了 SQL 2012 express；立即我尝试运行 SQL Server 配置管理器，并且 SQL 2012 的安装破坏了它，因此我得到“远程过程调用失败”。即使我“以管理员身份运行”也是如此。微软说他们无法重现这个，但我再次联系了他们，因为我现在已经重现了两次。而且，如果有任何疑问：卸载 SQL 2012 会导致问题消失，并且配置管理器会再次工作。我在这里写了一篇博客： [http://dbarrowstechblog.blogspot.com/2012/09/the-remote-procedure-call-failed.html](http://dbarrowstechblog.blogspot.com/2012/09/the-remote-procedure-call-failed.html)；还没有解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-18T04:19:01.543

只有在我的工作机器上安装了 Microsoft Visual Studio 2012 设置后才会出现此错误。

由于是 WMI 错误，我重新编译了 MOF 文件 –> mofcomp.exe "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmproviderxpsp2up.mof"

我还取消注册并重新注册了 sql 提供程序 DLL –> regsvr32 "C:\Program Files (x86)\Microsoft SQL Server\100\Shared\sqlmgmprovider.dll" 但问题没有解决。

**解决方案：**

我已经在我的 SQL 2008 R2 实例上应用了 SQL Server 2008 R2 SP2，这解决了 Sql Server 配置管理器的问题。您可以从这里下载安装程序... [http://www.microsoft.com/en-us/download/details.aspx?id=30437](http://www.microsoft.com/en-us/download/details.aspx?id=30437)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-09T15:11:41.970

好的，停止这个。

这是新安装吗？

1.  在集成安全模式下打开 SSMS
2.  右键单击左侧对象资源管理器树中的服务器名称
3.  选择属性 -> 然后选择左侧的“安全”页面
4.  在服务器身份验证下，选择“SQL Server 和 Windows 身份验证模式”
5.  点击确定
6.  完全退出 SSMS
7.  打开“SQL Server 配置管理器”（在开始菜单的“Microsoft SQL Server 2008 R2”菜单项下的配置菜单中
8.  在 SQLExpress 上选择您的实例并重新启动服务器实例（但这对于非 express 也可以）
9.  退出 SSCM - 并再次验证打开的 SSMS，但在“身份验证类型”下拉列表中选择“SQL Server 身份验证” - 输入您的 SQL 用户 ID 和密码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-24T05:42:31.827

在 SQL Server 2008 上安装 SP3 对我有用..所以试一试谢谢！如果这对您有帮助，请不要忘记投票

# javascript - 在 JSPX 中转义 JSON

> ID：11589967
> 
> 赞同：3
> 
> 时间：2012-07-21T06:21:19.883
> 
> 标签：javascript, json, jsp, jsp-tags, jspx

我想在我的 JSPX 中从一些 JSON（通过 Jackson 生成）初始化一个 Javascript 变量，如下所示：

```
<script>
var x = <c:out value="${myJson}" />;
</script> 
```

但我得到的输出看起来像：

```
<script>
var x = {&#034;foo&#034;:&#034bar&#034};
</script> 
```

我看到你在那里做了什么，对字符串进行 HTML 转义。显然，我不能让它完全不转义，因为数据中的尖括号可能会破坏页面。但我真的不需要转义所有引号，因为我没有将 JSON 放在属性值中，对吗？

~~现在，这似乎是用 HTML 编写脚本的一种完全有效的方法，只是不必要的复杂（例如，用 替换空格`&#32;`）。~~事实证明，它在 XHTML 中工作得很好，但是对于 HTML 内容类型，我在 Firefox 和 IE 中都得到一个错误。我不确定其中的原因，但事实就是这样。

那么，这里最好的方法是什么？我真的想简单地转义尖括号而不是转义双引号，还是有其他问题？是否有可以替换的标签`c:out`（我知道有用于转义 Javascript 的 Spring 标签，但这仍然不是正确的转义方式）？人们如何让它发挥作用？

顺便说一句，是的，我可以进行单独的 AJAX 调用，但是为了解决这个问题而进行额外的往返似乎很愚蠢。

**更新**

关于 CDATA 与 PCDATA 以及[HTML 与 XHTML 有何不同，](http://hixie.ch/advocacy/xhtml)我需要了解很多。在这里，我认为 JSPX 会使[多语言标记](http://dev.w3.org/html5/html-xhtml-author-guide/)变得容易，但事实证明，正如有人所说，它[是一大堆讨厌的](https://stackoverflow.com/a/4227942/970288).

对于 HTML，`<script>`元素有一个[CDATA 内容模型](http://www.sitepoint.com/forums/showthread.php?612147-PCDATA-vs-CDATA-just-means-to-be-parsed-or-not-to-be-parsed-as-XHTML-or-HTML&s=839727c348915a9c06b6aea10cbe1e91&p=4229368&viewfull=1#post4229368)（不要与 CDATA 部分混淆），这意味着没有任何东西可以转义，但`</` *必须*绝对避免。

在 JSON 的特殊情况下，结束标记只能出现在带引号的字符串中，因此这意味着转义的安全方法是使用 Javascript（而不是 HTML）转义并替换`</`为`<\/`.

另一方面，对于 XHTML（如果您关心这些事情），您只需像往常一样对所有内容进行 XML 转义（`&`变成`&amp;`等），一切都很好。一个兼容的解决方案必须使用 CDATA 并`<!--/*--><![CDATA[/*><!--*/`在整个`<script>`正文周围保护注释（等），然后转义`]]>`JSON 中的任何出现；`</`而且，为了安全起见，我还是会逃跑。确实很讨厌，但至少它可以自动化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T06:22:42.250

放`escapeXml=false`

```
<c:out value="${myJson}" escapeXml="false"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T03:06:41.343

好的，经过大量研究并且没有真正的帮助，在这里回答我自己的问题。

基于我上面的“更新”，针对 HTML 最直接的方法就是：

```
<script>
var x = ${fn:replace(myJson, "\</", "\<\\/")};
</script> 
```

丑陋但简单。

不幸的是，这*不会*产生有效的 XML 或 XHTML。如果你真的需要它，原件`c:out`可以正常工作，尽管它*不会*产生有效的 HTML。如果你真的需要一个解决方案来处理这两个问题，你可能需要一个自定义的 taglib（或 TAGX），它可以从内容类型切换或执行以下所有操作：

*   将脚本主体包装在[注释保护的](http://hixie.ch/advocacy/xhtml)CDATA 部分中
*   将每个替换`</`为`<\/`
*   将每个替换`]]>`为`]]\>`

# iphone - 如何从xcode给出html文件值

> ID：11589969
> 
> 赞同：1
> 
> 时间：2012-07-21T06:21:32.623
> 
> 标签：iphone, xcode, combobox

我有iphone应用程序我创建了一个组合框我希望该组合框应该直接从xcode而不是从html文件中获取值所以如何做到这一点我正在使用以下代码在html文件中获取组合框

```
NSString *htmlPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"combo.html"];
NSString *htmlContent = [NSString stringWithContentsOfFile:htmlPath];
[webView loadHTMLString:htmlContent baseURL:nil]; 
```

组合.html：

```
 <html>   
 <SELECT NAME="food" SIZE="10" style="width: 200px;" style="height: 100px "> 
 <OPTION VALUE="0">OK</OPTION>
 <OPTION VALUE="1">Good</OPTION>
 <OPTION VALUE="2">Best</OPTION>
 <OPTION VALUE="3">Average</OPTION>
 </SELECT> 
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T08:20:03.893

我不是 100% 确定我理解了这个问题，但我认为您是在问是否可以从您的应用程序包中加载 HTML 文件，然后从您的应用程序中动态插入一些不同的 HTML 内容......对吗？

如果是这样，你当然可以这样做。

首先，我们将内容加载到**可变**字符串中：

```
NSString *htmlPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"combo.html"];
NSError *error;
NSMutableString *htmlContent = [NSMutableString stringWithContentsOfFile: htmlPath 
                                                                encoding: NSUTF8StringEncoding 
                                                                   error: &error]; 
```

要在组合框中**插入**新选项/值，请使用以下内容：

```
// look for the start of the combo box called "food"
NSRange range = [htmlContent rangeOfString: @"select name=\"food\"" 
                                   options: NSCaseInsensitiveSearch];
if (range.location != NSNotFound) {
    // search for the end tag </select>
    range.length = htmlContent.length - range.location;
    NSRange end = [htmlContent rangeOfString: @"</select>" 
                                     options: NSCaseInsensitiveSearch 
                                       range: range];
    if (end.location != NSNotFound) {
        NSString *newChoice = @"Awesome!";  // get this dynamically however you want
        NSString *newOption = 
           [NSString stringWithFormat: @"<option value=\"4\">%@</option>\n", newChoice];
        [htmlContent insertString: newOption atIndex: end.location];
        NSLog(@"htmlContent = %@", htmlContent);
    }
} 
```

如果要**更改**现有组合框选项的显示*值*，请使用如下代码：

```
NSString *optionTwoHtml = @"<option value=\"2\">";
NSRange optionTwo = [htmlContent rangeOfString: optionTwoHtml 
                                       options: NSCaseInsensitiveSearch];
if (optionTwo.location != NSNotFound) {
    int start = optionTwo.location + optionTwoHtml.length;
    // search for the end tag </option>
    optionTwo.length = htmlContent.length - optionTwo.location;
    NSRange end = [htmlContent rangeOfString: @"</option>" 
                                     options: NSCaseInsensitiveSearch 
                                       range: optionTwo];
    if (end.location != NSNotFound) {
        NSString *newValue = @"Better Than Best!";
        NSRange oldRange = NSMakeRange(start, end.location - start);
        [htmlContent replaceCharactersInRange: oldRange 
                                   withString: newValue];
        NSLog(@"htmlContent = %@", htmlContent);
    }
} 
```

**请注意**，此代码仅向您展示了您可以做什么。它没有针对性能进行优化。您显示的 HTML 内容非常小，因此解析代码的效率实际上并不重要。如果您使用更大的 HTML 文件，您可能需要稍微优化一下。

# windows - 获取 Windows 会话 ID

> ID：11589973
> 
> 赞同：1
> 
> 时间：2012-07-21T06:22:29.290
> 
> 标签：windows, session, batch-file

是否有任何命令或批处理脚本允许我只获取用户的会话 ID？我知道`Query Session`，但它显示的信息比我需要的多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T08:37:34.927

就在这里。

```
TASKLIST /FI "USERNAME EQ yourusername" 
```

这将列出由您的用户名启动的所有任务。如果你想对这些任务做点什么，比如（杀死它们）你可以使用

```
TASKKILL /FI "USERNAME EQ yourusername" 
```

但要小心，你最终可能会杀死 EXPLORER.EXE 这会导致 Windows 行为异常，所以我建议这样的事情

```
TASKKILL /FI "imagename eq EXCEL.EXE" 
```

有关如何使用 TASKKILL 和 TASKLIST 类型的更多信息

```
TASKLIST /?
TASKKILL /? 
```

如果您只想要这些任务的 PID，那么您可以通过在命令行中附加 /FO 将 TASKLIST 的输出保存到 CSV 文件，然后像这样键入要写入的文件名

```
tasklist /fi "username eq 25163" /fo csv > mytasks.csv 
```

这将创建一个 CSV 文件，您可以使用 EXCEL 打开该文件，其中包含您需要使用的所有列

# java - 如何通过按钮将表单数据作为句子中的变量发送到剪贴板？

> ID：11589976
> 
> 赞同：2
> 
> 时间：2012-07-21T06:23:22.210
> 
> 标签：java, php, html, forms

我一直试图找出我认为是一个非常简单的问题的答案，但到目前为止还没有运气。不幸的是，到目前为止，我还不太精通 html 或 java。

在我的工作中，我的团队面临着手动输入一系列句子，除了一个变量之外，这些句子每次都相同。这些是必需的文档，每次手动输入时变得相当单调和耗时。除此之外 - 计算机是古老的，内存密集型脚本会更麻烦而不是有益 - 即使这意味着更多的代码我正在寻找最快，最少密集的解决方案，我可以立即向整个团队展示。

我的目标是创建一系列表格，然后将变量插入到预先构建的句子中，并作为一个整体一次性复制到剪贴板。

我只能成功地创建表单并且没有运气；A）将带有变量的句子发布到文本区域中，以便可以手动复制或 B）单击提交按钮以使其在包含变量和复制的同时在看不见的背景中生成预先构建的句子的更优选结果这一切都到剪贴板。

本质上...我想要这样的东西-

```
Name -----
Age-----
Gender-----
Job-----

SUBMIT 
```

单击提交后，它会将下面的所有文本复制到剪贴板而不显示它-

最近添加了感兴趣的人 $name。
感兴趣的人是一份工作，最近没有接受过手术。
$name 是 $gender，当前是 $age。

我知道这是可能的，尽管我不知道如何实际实现它。起初我以为我可以创建表单数据，将其附加到 php 中的变量，在 display:none 环境中的句子中回显变量，然后将其全部复制...不知道，也许我要分配所有的回声句子到另一个变量，然后让提交按钮将变量复制到剪贴板。即使只是这么说也是非常低效的。我需要这些家伙的认真帮助=（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:59:15.663

我想您可以将 $_SESSION 变量与随机字符串占位符一起用于变量。

```
$_SESSION['message']="Person of interest, <<name>>, was recently added.\n...." 
```

提交表单时，只需将占位符替换为实际值，例如：

```
$_SESSION['message']=str_replace('<<name>>',$_POST['name'],$_SESSION['message']); 
```

然后，每当您必须使用该语句时，您可以将其用作，

```
<textarea id='message'><?php echo $_SESSION['message'] ?></textarea> 
```

# android - 如何在运行时更改edittext中选定文本的字体大小？

> ID：11589979
> 
> 赞同：0
> 
> 时间：2012-07-21T06:24:05.677
> 
> 标签：android, android-edittext, android-textattributes

我正在为我的应用程序开发一个文本编辑器，我想在其中编辑选定的文本部分。我几乎完成了它，除了一个功能，即减少所选文本的大小。

我可以像这样增加尺寸： `text=editor.getText(); text.setSpan(new RelativeSizeSpan(2f), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); editor.setText(text);`

但我坚持减小大小，如何减小文本大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:56:55.260

尝试与您用于增加 textsize 使用的代码相同的方法，如下所示，其中编辑器是 EditText

```
 Spannable text=(Spannable)editor.getText(); 
 text.setSpan(new RelativeSizeSpan(0.2f), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);    
 editor.setText(text); 
```

在 RelativeSizeSpan 我使用**0.2f**作为文本大小，这将减少你的文本大小你可以使用你需要的任何大小

# android - android：我无法停止 GPS 更新

> ID：11589980
> 
> 赞同：2
> 
> 时间：2012-07-21T06:24:39.080
> 
> 标签：android, gps, location

我的应用程序使用查找当前位置`GPS`。它在户外工作得很好。但是哪里`GPS`不可用或很差，它会一次又一次地尝试更新，并且会耗尽电池电量。所以我想在`GPS`糟糕或不可用时停止更新。您可能会建议使用

`lm.removeUpdates(locationlistenerforGPS);`

`GPS`当不在室内可用时，它工作正常。`GPS`我喜欢在较差或不可用时停止更新。

我的代码是

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener locationlistenerforGPS = new mylocationlistenerGPS();
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationlistenerforGPS); 
```

我的 locationlistenerGPS() 函数是

```
 private class mylocationlistenerGPS implements LocationListener {
  @Override
  public void onLocationChanged(Location location) {
      counterGPS++;
      if (location != null) {
      Log.d("LOCATION CHANGED", location.getLatitude() + " ");
      Log.d("LOCATION CHANGED", location.getLongitude() + " ");
      Toast.makeText(LocationActivity.this,"latitude: "+
          location.getLatitude() + "longitude: " + location.getLongitude()
          + " Provider:" + location.getProvider() + " Accuracy:" + location.getAccuracy(),
          Toast.LENGTH_LONG).show();
      }

  }
  @Override
  public void onProviderDisabled(String provider) {
  }
  @Override
  public void onProviderEnabled(String provider) {
  }
  @Override
  public void onStatusChanged(String provider, int status, Bundle extras) {
  }
  } 
```

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:39:40.267

不要在. `minTime`_ 请参阅[requestLocationUpdates()](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28java.lang.String,%20long,%20float,%20android.location.LocationListener%29)文档。`minDistance``requestLocationUpdates()`

[onStatusChanged()](http://developer.android.com/reference/android/location/LocationListener.html#onStatusChanged%28java.lang.String,%20int,%20android.os.Bundle%29)中的捆绑附加功能可能包括卫星 - 用于派生修复的卫星数量，这样您可以定义较差的信号，或者如果您需要来自 GPS 的其他信息，您可以使用[NmeaListener 。](http://developer.android.com/reference/android/location/GpsStatus.NmeaListener.html)

# css - Webkit 文本别名在 CSS3 动画期间变得奇怪

> ID：11589985
> 
> 赞同：15
> 
> 时间：2012-07-21T06:25:34.217
> 
> 标签：css, webkit, css-animations

这是一个时髦的。而且我确定它与 webkit 相关，因为它似乎只是 Chrome 版本 20.0.1132.57 和 Safari 5.1.7 中的问题。我上传了一个简短的视频来解释这个问题，因为几乎不可能通过文字来解释。

**视频：http:** [//youtu.be/0XttO-Diz2g](http://youtu.be/0XttO-Diz2g)

**简短版本：** 在 CSS3 动画期间，定位元素（绝对或相对）内的文本似乎会改变其抗锯齿。动画运行时它会变得更粗。

**注意：** 这与缩放元素在动画中变得模糊不同。（[本期](https://stackoverflow.com/questions/10417890/css3-animations-with-transform-causes-blurred-elements-on-webkit)）

有什么想法、解决方法等吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-21T08:27:19.540

更新：我下面的旧答案有效，但只是解决问题的一种黑客方式。相反，请阅读此内容以了解其他元素受到影响的原因：http: [//jsbin.com/efirip/5/quiet](http://jsbin.com/efirip/5/quiet)。简而言之：一个动画元素应该通过给它一个`z-index`.

老答案：

它与 WebKit 相关。老实说，我不确定它为什么会这样做，我认为这也是一个错误。您可以通过向页面上的任何元素添加任何与 3D 相关的 CSS3 声明来阻止它。例子：

```
body {
    -webkit-transform: translateZ(0);
} 
```

或者：

```
body {
    -webkit-backface-visibility: hidden;
} 
```

这些声明的存在导致 WebKit 对动画使用硬件加速，从而防止您指出的问题。

# php - 错误：表 'servername.array' 不存在

> ID：11589986
> 
> 赞同：-1
> 
> 时间：2012-07-21T06:25:36.190
> 
> 标签：php, mysql, arrays, forms, apache

我试图让登录的用户在一个框中输入一个值，然后提交它，表单将它存储在“money”下的数据库中。但是，当我尝试这样做时，我得到错误：表'servername.array'不存在。我知道服务器（蓝色）和表（玩家）存在，但不知道为什么会出现此错误。用户在 $_SESSION['username'] 和 $_SESSION['id'] 下登录。

```
 <?php include("auth.php");?>
  <?php

  if(isset($_POST['submit']))
  {
  $player = @mysql_query
  ("SELECT id, username, password, registered, lastlogin, money, 
  callname, email FROM   players WHERE username = 
  '".$_SESSION['username']."'");
  $player = @mysql_fetch_assoc($player);

  $getmoney = @mysql_query("INSERT INTO $player(money) values('$_POST[amount]')")
  or die("Error: ".mysql_error()); 

 echo '
 <div style="
  top: 395;
  left: 99;
  position: absolute;
  z-index: 1;
  visibility: show;">
  Money Received.
  </div>
  ';
   }
  ?>

  </head>
  <body>
  <p>Bank</p>
  Enter amount of money to recieve.<br>
  <form action="bank.php" method="post">
  <table border=2>
  <tr>
  <td>Amount to Receive:</td><td><input type="text" name="amount" size="20px"></input>
  </td>
  </tr>
  </table>
  <input type="submit" name="submit" value="Get Money"></input>
  </form><br><br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:30:17.393

将这一行更改为这一行：没有 $player 变量（这是上一个查询中的一个数组）

```
$getmoney = @mysql_query("INSERT INTO players(money) values('$_POST[amount]')")
  or die("Error: ".mysql_error()); 
```

# xml - XSL 根据 Element 值删除所有前面的同级

> ID：11589988
> 
> 赞同：3
> 
> 时间：2012-07-21T06:26:29.093
> 
> 标签：xml, xslt, xslt-3.0

您好我需要帮助解析以下 XML。

```
<xmeml>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
    </Test> 
</Doc>
</xmeml> 
```

以以下结束

```
<xmeml>
<Doc>
    <Test>
        <Unit>bcd</Unit>
        <Unit2>2345</Unit2>
    </Test>
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>3456</Unit2>
    </Test>
    <Test>
        <Unit>cde</Unit>
        <Unit2>3456</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>def</Unit>
        <Unit2>4567</Unit2>
    </Test> 
</Doc>
<Doc>
    <Test>
        <Unit>abc</Unit>
        <Unit2>1234</Unit2>
    </Test>
    <Test>
        <Unit>efg</Unit>
        <Unit2>2345</Unit2>
    </Test> 
</Doc>
</xmeml> 
```

我正在尝试创建一个 XSLT 文档来执行此操作，但尚未找到一个有效的文档。我应该注意，“Doc”中所需的匹配参数是，在本例中为“abc”和“1234”，在现实世界中，这些是变量，永远不会是静态可搜索实体。

所以在英语中，我的 XSL 将是这样的：对于任何同时包含匹配的 'Unit' 和 'unit2' 值的父级，删除所有前面的父级 'Test' 包含重复值的 'Unit' 和 'Unit2' 除了最后一个。

非常感谢所有帮助谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T08:12:58.010

这是一种相对简单的方法，尽管我相当确定使用 Meunchian 方法有一种更有效的方法。但是，如果性能不是问题，这可能更容易理解：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml"/>

  <xsl:template match="Test">
    <xsl:variable name="vUnit" select="Unit" />
    <xsl:variable name="vUnit2" select="Unit2" />
    <xsl:if test="not(following::Test[Unit = $vUnit and Unit2 = $vUnit2])">
      <xsl:call-template name="identity" />
    </xsl:if>
  </xsl:template>

  <xsl:template match="@* | node()" name="identity">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

`Test`模板只检查 and 中是否存在具有相同值的后续元素`Test`，如果没有，则正常输出。`Unit``Unit2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T09:20:46.187

在 XSLT 2.0 中使用 for-each-group 构造可以解决许多涉及消除重复的问题。在这种情况下，使用 for-each-group 的解决方案并不明显，因为它实际上不是分组问题（对于分组问题，我们通常在输出中生成一个元素，该元素对应于输入中的一组元素，并且这里不是这种情况。）我会以与 Dimitre 相同的方式处理它：使用 for-each-group 来识别组，因此需要保留的测试元素与需要删除的元素。事实上，我开始解决这个问题并提出了一个与 Dimitre 非常相似的解决方案，除了我认为最后一个模板规则可以简化为

```
<xsl:template match="Test[not(. intersect $vLastInGroup)]"/> 
```

这是我有时使用的编码模式示例，您设置包含具有特定特征的所有元素的节点集值全局变量，然后使用模板规则测试全局节点集的成员资格（使用 predicate `[. intersect $node-set]`） . 按照这种模式，并使用 XSLT 3.0 中可用的一些新语法，我倾向于编写如下代码：

```
<xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:mode on-no-match="shallow-copy"/>

 <xsl:variable name="deletedElements" as="element()*">
  <xsl:for-each-group select="/*/Doc/Test"
                      group-by="Unit, Unit2" composite="yes">
   <xsl:sequence select="current-group()[position() ne last()]"/>
  </xsl:for-each-group>
 </xsl:variable>

 <xsl:template match="$deletedElements"/>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:15:14.670

**一、XSLT 1.0 解决方案**：

**这是最有效的已知 XSLT 1.0 分组方法 - [Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)的简单（无变量、无`xsl:if`、无轴、无`xsl:call-template`**）应用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kTestByData" match="Test"
  use="concat(Unit, '|', Unit2)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Test[not(generate-id()
           = generate-id(key('kTestByData',concat(Unit, '|', Unit2))[last()])
            )]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<xmeml>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>bcd</Unit>
            <Unit2>2345</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>3456</Unit2>
        </Test>
        <Test>
            <Unit>cde</Unit>
            <Unit2>3456</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>def</Unit>
            <Unit2>4567</Unit2>
        </Test>
    </Doc>
    <Doc>
        <Test>
            <Unit>abc</Unit>
            <Unit2>1234</Unit2>
        </Test>
        <Test>
            <Unit>efg</Unit>
            <Unit2>2345</Unit2>
        </Test>
    </Doc>
</xmeml> 
```

**产生了想要的正确结果**：

```
<xmeml>
   <Doc>
      <Test>
         <Unit>bcd</Unit>
         <Unit2>2345</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>3456</Unit2>
      </Test>
      <Test>
         <Unit>cde</Unit>
         <Unit2>3456</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>def</Unit>
         <Unit2>4567</Unit2>
      </Test>
   </Doc>
   <Doc>
      <Test>
         <Unit>abc</Unit>
         <Unit2>1234</Unit2>
      </Test>
      <Test>
         <Unit>efg</Unit>
         <Unit2>2345</Unit2>
      </Test>
   </Doc>
</xmeml> 
```

**请注意**：对于要删除大量节点的节点集，Muenchian 分组方法比二次 (O(N^2)) 同级比较分组要快许多数量级。

* * *

**二、XSLT 2.0 解决方案**：

**II.1 这是一个简单的（非高效且适用于长度较小的节点集）XSLT 2.0 解决方案：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Test[concat(Unit, '+', Unit2) = following::Test/concat(Unit, '+', Unit2)]"/>
</xsl:stylesheet> 
```

**II.2 一个有效的解决方案，使用`xsl:for-each-group`**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vLastInGroup" as="element()*">
  <xsl:for-each-group select="/*/Doc/Test"
       group-by="concat(Unit, '+', Unit2)">
   <xsl:sequence select="current-group()[last()]"/>
  </xsl:for-each-group>
 </xsl:variable>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "Test[for $t in .
        return
         not($vLastInGroup[. is $t])
      ]"/>
</xsl:stylesheet> 
```

# ide - 自定义编辑器中的 F# 智能感知

> ID：11589990
> 
> 赞同：4
> 
> 时间：2012-07-21T06:26:52.890
> 
> 标签：ide, f#, intellisense

有没有办法将 F# intellisense 迁移到我自己的编辑器中，而不必重写它的解析器，最糟糕的是，它的类型推断机制？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T08:43:57.263

[F# 智能感知工具](http://fsxplat.codeplex.com/SourceControl/changeset/view/4d371abd932f#samples/compiler/fsintellisense/Program.fs)可作为独立包提供，包括其解析器和类型推断机制。

我相信在您自己的编辑器中使用该工具并不难（请参阅[此处](http://fsxplat.codeplex.com/wikipage?title=fsharp%20intellisense%20tool)的介绍）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T08:26:32.333

请参阅 MonoDevelop F# 插件（我相信由 Tomas Petricek 编写）。

# c# - .NET（桌面）应用程序的“自动更新”和公共版本控制？

> ID：11589991
> 
> 赞同：2
> 
> 时间：2012-07-21T06:26:53.007
> 
> 标签：c#, versioning, upgrade

我们正在用 C# 构建一个基于桌面的 .Net 应用程序，我们希望包括自动升级，本地桌面不时轮询我们的 Web 服务器以查找更新。

公共版本管理以及在我们的 Desktop .Net 应用程序中包含自动升级的最佳解决方案是什么？

基本上，客户安装我们的桌面软件，比如 15.1 版，当 15.2 版发布时，他们的软件会自动更新到最新版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T06:34:49.650

**.NET 应用程序更新程序组件**使向任何应用程序添加更新程序变得非常容易。它也可以很容易地与现有项目相结合。Microsoft 在 ClickOnce 中也使用了相同的使用 UAB（更新程序应用程序块）的方法。

[参考](http://windowsclient.net/articles/appupdater.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:32:04.547

我建议您使用[ClickOnce Deployment](http://msdn.microsoft.com/en-us/library/142dbbz4%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T06:33:32.083

在以前的应用程序中，我们使用了[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)，这可能是一个选项。 [这里](http://msdn.microsoft.com/en-us/library/s22azw1e%28v=vs.80%29.aspx)解释了更新是如何使用它的。

# android - Android：Menu.xml 错误：没有资源与给定名称匹配

> ID：11589995
> 
> 赞同：0
> 
> 时间：2012-07-21T06:28:58.393
> 
> 标签：android, xml, menu

我正在尝试为我的 android 应用程序制作一个简单的菜单。但不知道为什么我的 menu.xml 文件中出现以下错误：

```
[2012-07-21 11:53:27 - Torchit] W/ResourceType( 5469): Bad XML block: header size 46936 or total size 163847776 is larger than data size 0
[2012-07-21 11:53:27 - Torchit] /home/tigerstyle/workspace/Torchit/res/menu/menu.xml:2: error: Error: No resource found that matches the given name (at 'id' with value '@id/menu_item_about'). 
```

menu.xml 代码如下：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@id/menu_item_about"
      android:title="About"
      android:icon="@drawable/menu_about" />
</menu> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T06:33:48.153

您需要像这样在“@”之后添加一个“+”

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/menu_item_about"
      android:title="About"
      android:icon="@drawable/menu_about" />
</menu> 
```

没有它，它会查找已经使用该 ID 定义的资源。

# ember.js - 将 class/id 关联到 Ember.Select 中的 DropDown 选项

> ID：11589997
> 
> 赞同：4
> 
> 时间：2012-07-21T06:29:35.763
> 
> 标签：ember.js

我有一个 Ember.Select 视图，使用它我可以将内容数组绑定到 DropDown 列表，然后使用 optionValuePath 和 optionLabelPath 我可以分别分配值和标签。但是有没有像“optionClassPath”这样的东西，所以我可以像分配值一样为选项分配类

这是我的代码片段：

```
MyApp = Ember.Application.create();
MyApp.MyView = Ember.View.extend({
  myArr: [{category:"spend",id:"1",cls:"dropdownOption"},{category:"cashflow",id:"2",cls:"dropdownOption"}]
  myVal: ''
}); 
```

然后在我的 Handlebars 模板中，我将其用作

```
{{view Ember.Select
   contentBinding="MyApp.MyView.myArr"
   selectionBinding="MyApp.MyView.myVal"
   optionLabelPath="content.category"
   optionValuePath="content.id"
   optionClassPath="content.cls"
}} 
```

一切正常，但 Ember 似乎没有为选项分配指定的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T04:37:23.580

如果您想直接在 Ember.js 中执行此操作，则必须`reopen` `Ember.SelectOption`按照**@sabithpocker 的**建议进行操作。所以你想要这样的东西，见[http://jsfiddle.net/pangratz666/bhSVn/](http://jsfiddle.net/pangratz666/bhSVn/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{view Ember.Select
       contentBinding="MyApp.myController"
       selectionBinding="MyApp.myController.myVal"
       optionLabelPath="content.category"
       optionValuePath="content.id"
       optionClassPath="content.cls"
    }}
</script>​ 
```

**JavaScript**：

```
MyApp = Ember.Application.create({});

Ember.SelectOption.reopen({
    classNameBindings: 'optionClass'.w(),
    optionClass: function(){
        var classPath = this.getPath('parentView.optionClassPath');
        return this.getPath(classPath);
    }.property('parentView.optionClassPath')
});

MyApp.myController = Ember.ArrayProxy.create({
  content: [{category:"spend",id:"1",cls:"dropdownOption"},{category:"cashflow",id:"2",cls:"dropdownOption"}],
  myVal: ''
});​ 
```

**CSS**：

```
.dropdownOption {
    background-color: green;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T06:51:17.060

你可以在这里查看源代码，这是主不稳定版本，

[https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/select.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-handlebars/lib/controls/select.js)

为了稳定发布它在这里[https://github.com/emberjs/ember.js/blob/0-9-stable/packages/ember-handlebars/lib/controls/select.js](https://github.com/emberjs/ember.js/blob/0-9-stable/packages/ember-handlebars/lib/controls/select.js)

在这也很明显，没有为每个选项设置任何特定类的选项，请检查负责呈现选项的视图，

```
Ember.SelectOption = Ember.View.extend({
  tagName: 'option',
  attributeBindings: ['value', 'selected'],

  defaultTemplate: function(context, options) {
    options = { data: options.data, hash: {} };
    Ember.Handlebars.helpers.bind.call(context, "view.label", options);
  },...... 
```

既没有类的属性绑定，也没有选项的类名绑定。

如果你故意想要做这个扩展只是 Select 可能无济于事，

您还必须扩展 Option 视图以包含类，然后扩展 Select 并使用它而不是车把模板中使用的基本 Option 视图，

```
Ember.Handlebars.compile('{{#if view.prompt}}<option value>{{view.prompt}}</option>{{/if}}{{#each view.content}}{{view Ember.SelectOption contentBinding="this"}}{{/each}}') 
```

如果需要，您还可以考虑重新打开这些课程以进行更改。

**更新**

如果您只想为选项提供特定的 css，您就可以使用普通的 css，不需要这样的东西，只有当您需要为每个选项单独的类时才需要这样做。

```
select{
background-color:#000000;
    color:#FFFFFF;
}  

select option{
background-color:red;
    color:yellow;
} 
```

像这样的CSS应该可以帮助你我猜[http://jsfiddle.net/Qpkz5/520/](http://jsfiddle.net/Qpkz5/520/)

此外，如果您想为每个选项使用单独的 css，则可以对现代浏览器使用类似这样的东西：

```
select option[value="option1"]{
background-color:green;
} 
```

通常不会有我们需要为每个“选项”添加特定类的情况，这应该是 Ember 选项视图没有额外权重的情况。对于这种边缘情况，最好创建自己的扩展解决方案。

# iphone - iOS 中的按日期分段的 UITableView

> ID：11589998
> 
> 赞同：0
> 
> 时间：2012-07-21T06:29:42.263
> 
> 标签：iphone, nsmutablearray, nsmutabledictionary, uitableview

我有`NSMutableArray`哪些乘客的旅程将显示在表格视图中。我在普通的表格视图中正确显示。但我想在分段表格视图中显示表格视图标题将显示日期，其行将显示该特定日期的所有旅程。

我无法弄清楚如何首先将我`NSMuatableArray`分解为各种数组（按日期排列），然后在分段的 tableView 中显示它。

我是 iPhone 的新手。***请帮忙。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:54:52.090

我想你有一个字典数组，其中包含一些用于识别日期的键。

在这里，我发布了将可变数组分配为 Datewise 数组的代码。

```
NSString *lastDate = @"";
NSMutableArray *aryInnerArray = nil;
NSmutableArray *aryChatConversation = [[NSMutableArray alloc] init];
for (NSDictionary *dict in aryTempChat) {
    if (![lastDate isEqualToString:[dict objectForKey:@"date"]]) {
        if (aryInnerArray != nil) {
            [aryChatConversation addObject:[NSDictionary dictionaryWithObjectsAndKeys:lastDate, @"date", aryInnerArray, @"conversation", nil]];
            [aryInnerArray release];
        }
        lastDate = [dict objectForKey:@"date"];
        aryInnerArray = [[NSMutableArray alloc] init];
    }
    [aryInnerArray addObject:dict];
}
if (aryInnerArray != nil) {
    [aryChatConversation addObject:[NSDictionary dictionaryWithObjectsAndKeys:lastDate, @"date", aryInnerArray, @"conversation", nil]];
    [aryInnerArray release];
}
[aryTempChat release]; 
```

希望这可以帮助 ：）

# image - Metro Search Charm 中搜索结果图像的质量

> ID：11589999
> 
> 赞同：1
> 
> 时间：2012-07-21T06:29:46.227
> 
> 标签：image, search, windows-8, microsoft-metro

这应该是微不足道的，这可能只是我糟糕的一天；）我使用 40x40px 的图像来显示搜索结果的类型。如果我在我的主应用程序中使用完全相同的图像，它们会正确显示。如果我在搜索魅力中使用它们，它们的质量会大大降低。

我究竟做错了什么？我尝试了另一种尺寸，另一种图片格式，还是一样。我尝试了另一张图片（下图），那张看起来不错。为什么只有我的圆形图标这么变形？

![图像质量不可接受](../Images/6f0c291ec86fbaa1b3b25701120e8650.png) ![画质还行](../Images/f1824987cf913641f90b89a3d4019448.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:14:01.230

这种情况不会经常发生，但在这种情况下，正确的解决方案似乎只是等待；）在这种情况下，它正好花了 3 个月，这并不是那么快，但时间是完美的——就在正式 Win8 发布之前。我在我的解决方案中没有对结果建议图像做任何新的事情，今天我意识到图像变得清晰。可能由任何 Windows 更新修复。

![在此处输入图像描述](../Images/5d3a48a0a06969d211dae24444fa1a9f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:03:57.730

听起来这可能与图像的自动缩放有关。Windows 将根据像素密度自动放大/缩小，您可以通过使用基于矢量的图像或对于位图图像提供特定于比例的版本来帮助实现良好的缩放。

例如，要将标记中引用的图像缩放为“AppLogo.jpg”，您需要包含以下图像：

*   AppLogo.scale-100.jpg
*   AppLogo.scale-140.jpg
*   AppLogo.scale-180.jpg

您也可以使用文件夹，例如“\scale-140\AppLogo.jpg”。

对于搜索结果图像，100% 的图像是 40x40 像素版本，140 是 56x56，180 是 72x72。只需将图像引用为“AppLogo.jpg”，就会自动使用相应的版本。（您还可以检测比例`DisplayProperties.ResolutionScale`并手动选择图像。）

这是几篇带有更多示例/详细信息的文章：

*   [“缩放到像素密度的指南”](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)
*   [“快速入门：使用文件或图像资源”](http://msdn.microsoft.com/en-us/library/windows/apps/hh465262.aspx)

[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9458fec7-3426-433d-b633-12c6b8ded823)和[这里](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/610718b0-69e8-42d2-a1fe-3c5be5b6515f)的论坛中也有一些缩放讨论（一般性，不是特定于搜索）。