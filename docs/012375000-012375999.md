# StackOverflow 问答 12375000-12375999

# java - Java String split with multicharacter delimiter

> ID：12375003
> 
> 赞同：4
> 
> 时间：2012-09-11T17:34:14.423
> 
> 标签：java, string, split, character

I'm fairly new to Java and I thought this worked the same as with other languages.

For a string:

```
String line = "3::Daniel::Louis||##2::Leon: the Professional::1994||6::Jean::Reno||7::Gary::Oldman||8::Natalie::Portman||##3::Scarface::1983||9::Al::Pacino||10::Michelle::Pfeiffer"; 
```

I want to split it at every `||##`.

But:

```
for(String s : line.split("||##")) {
    System.out.println("|"+s+"|");
 } 
```

returns:

```
||
|3|
|:|
|:|
|D|
|a|
|n|
|i| 
```

... etc.

I was expecting:

```
3::Daniel::Louis

Leon: the Professional 
```

... etc.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T17:37:09.400

You have to escape the | character since it's a regex metacharacter for logical OR

So I would use

```
line.split("\\|\\|##")) 
```

Note that You have to escape the slash as well that is why I use

```
\\| 
```

instead of

```
\| 
```

To escape that metacharacter

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:39:42.543

```
public String[] split(String regex) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:39:32.623

It sounds like you want something like this:

```
Pattern p = Pattern.compile("\\|\\|##", Pattern.LITERAL)  
String[] result = p.split(myString) 
```

I know you can have multiple characters in your delimiter, and that you can *exclude* your delimiter from the output string.

I *don't* know if the example above will work *exactly* for your scenario; you might have to experiment a bit (for example, "escaping" regex "metacharacters" with "\").

Here's the Javadoc for Pattern.compile:

*   [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

And here's more information on Java regex syntax:

*   [http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T17:37:27.180

You need to escape the bars: `|` is a special character in the regex.

Use:

```
for(String s : line.split("\\|\\|##")) { 
```

Alternately, you can use `\Q\E` to force that the entire pattern be used literally:

```
for(String s : line.split("\\Q||##\\E")) { 
```

This is probably the same pattern that you'll get from [`Pattern.quote`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29).

`|` allows you to specify optional patterns in a regex. Your regex is equivalent to `|##`, or: *nothing **OR** ##*. This splits around the empty string, or between every character in the input.

See the [javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html) for `Pattern`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T17:37:30.377

You should escape your `|` characters:

```
for (String s : line.split("\\|\\|##")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T17:37:43.403

You have to escape the '|' like this \|

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T17:58:08.630

Gilberto's solution will work just fine in this case, but you might want to check out [guava](http://docs.guava-libraries.googlecode.com/git/javadoc/index.html?com/google/common/base/Splitter.html). It has a lot of very useful utility classes including a String splitter. With it you could write:

```
Iterable<String> frags = Splitter.on("||##").split(line);
// Do whatever with the iterable...maybe you just want a list?
// List<String> fragList = Lists.newArrayList(frags); 
```

# c# - 在服务器进程期间更新视图

> ID：12375005
> 
> 赞同：-1
> 
> 时间：2012-09-11T17:34:21.267
> 
> 标签：c#, asp.net-mvc-3

设想：

*   我在不是我的 Web 服务器的机器上有 WCF 服务。
*   在网站上，我有一个调用 WCF 服务的请求。
*   在该请求期间，我想更新“进度条”，因为使用 WCF 服务的进程将部分发生（该进程将分批发送数据）。

我的问题是：如何在服务器端的进程中更新视图（进度条）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:08:00.143

[Dino Esposito 在2012 年 3 月的 Msdn 杂志](http://msdn.microsoft.com/en-us/magazine/hh852586.aspx)上讨论了这个具体案例。

总结它的文章，您可以使用[SignalR](http://signalr.net)，它是一个客户端/服务器消息传递框架。它适用于多个“传输”，具体取决于服务器和客户端的能力（websockets、iframe 等）以具有伪持久连接。

该框架用于允许服务器向客户端报告进度，客户端可以更新其 ui（通常是进度条）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T17:50:27.727

您描述的场景似乎适合回调 wcf 服务。有关详细信息，请参阅以下 URL： http: [//msdn.microsoft.com/en-us/magazine/cc163537.aspx](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx)。

# javascript - 我的用户脚本如何根据链接的文本获取链接？

> ID：12375008
> 
> 赞同：3
> 
> 时间：2012-09-11T17:34:43.497
> 
> 标签：javascript, css-selectors, greasemonkey, contains

给定目标页面上的这个 HTML：

```
<dd class="ddTit">
<a href="http://abc.xxx.com/54781.html" target="_blank">special text words</a>
</dd> 
```

如何根据“**特殊文字单词**”获取 url，并在 Greasemonkey 脚本中单击？

我试过这个：

```
var textlink = document.querySelector ("dd.ddTit a[textContent*='special']");
var clickEvent      = document.createEvent ('MouseEvents');
clickEvent.initEvent ('click', true, true);
textlink.dispatchEvent (clickEvent); 
```

没有运气。

我如何根据`textContent`，如包含**特殊**`textContent`字样进行选择？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T00:29:51.710

唉，你不能这样做，`querySelector()`因为[CSS 选择器（还）不提供内容/文本选择器](https://stackoverflow.com/a/4561376/331508)。

这里有3种方法：

1.  循环通过有针对性的节点选择：

    ```
    var ddTitLinks  = document.querySelectorAll ("dd.ddTit a");

    for (var J = ddTitLinks.length - 1;  J >= 0;  --J) {
        var ddTitLink   = ddTitLinks[J];
        //--- Case-insensitive search.
        if (/special text words/i.test (ddTitLink.textContent) ) {
            var clickEvent      = document.createEvent ('MouseEvents');
            clickEvent.initEvent ('click', true, true);
            ddTitLink.dispatchEvent (clickEvent);
            break;
        }
    } 
    ```

2.  使用[jQuery](http://docs.jquery.com/Main_Page)（一个功能强大的库，可以为您省去很多麻烦）：

    ```
    // ==UserScript==
    // @name     _Click Special link(s)
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/*
    // @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
    // ==/UserScript==

    //--- Note that contains() is CASE SENSITIVE.
    var specLink    = $("dd.ddTit a:contains('special text words')");
    if (specLink.length) {
        var clickEvent  = document.createEvent ('MouseEvents');
        clickEvent.initEvent ('click', true, true);
        specLink[0].dispatchEvent (clickEvent);
    } 
    ```

3.  使用 XPath：

    ```
    //--- Note that contains() is CASE SENSITIVE.
    var specLinks   = document.evaluate (
        "//dd[contains(@class, 'ddTit')]/a[contains(text(), 'special text words')]",
        document,
        null,
        XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
        null
    );

    if (specLinks.snapshotLength) {
        var specLink    = specLinks.snapshotItem (0);
        var clickEvent  = document.createEvent ('MouseEvents');
        clickEvent.initEvent ('click', true, true);
        specLink.dispatchEvent (clickEvent);
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:53:26.560

这是一个使用 jquery 执行您想要的操作的greasemonkey 脚本：

```
// ==UserScript==
// @name       your script
// @namespace  http://foobarfoobar.com/
// @version    0.1
// @description  Trigger click with jquery
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// @match      http://*/*
// ==/UserScript==

(function () {
    $(document).ready(function(){
        $('dd.ddTit').find("a:contains('special text words')").bind('click', function() {
            window.location.href = this.href;
            return false;
        }).trigger('click');

    });
})(); 
```

如果您将其中一些代码复制到脚本中，请确保包含以下行：

```
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js 
```

因此 jquery 代码运行良好，还将 @match 规则调整为您要应用脚本的特定站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:15:54.233

如果您真的只有识别链接的内容，您可能必须遍历所有链接才能找到您想要的链接：

```
var links = document.getElementsByTagName( 'a' );

for ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    if ( /special/.test( link.textContent ) ) {
        // do something with link
    }
} 
```**

# java - 如何在我的 Java 项目中找到不需要的 JARS

> ID：12375010
> 
> 赞同：5
> 
> 时间：2012-09-11T17:34:52.390
> 
> 标签：java, spring, hibernate

如何在我的 Java 项目中找到不需要的 JARS。我正在接管一些 Java 项目，其中有很多 JAR，我觉得我不需要它们。有人可以告诉我你是否知道任何快速技巧来找出项目需要或不需要哪些 JAR。

下面是一个带有 MySQL 和 Hibernate 的 Spring Web Flow 项目的 JAR 列表我不需要所有的 JAR 但有人可以告诉我一些技巧

```
activation-1.1.jar
antlr-2.7.6.jar
aopalliance-1.0.jar
asm-3.1.jar
asm-attrs-1.5.3.jar
aspectjrt-1.6.8.jar
aspectjweaver-1.6.8.jar
c3p0-0.9.2-pre4.jar
cas-client-core-3.2.1.jar
cglib-2.2.jar
commons-beanutils-1.8.0.jar
commons-codec-1.4.jar
commons-collections-3.1.jar
commons-dbcp.jar
commons-digester-1.8.1.jar
commons-email-1.0.jar
commons-fileupload-1.1.1.jar
commons-io-1.1.jar
commons-lang-2.5.jar
commons-logging-1.1.1.jar
commons-pool.jar
dom4j-1.6.1.jar
dumbster-1.6.jar
ehcache-1.2.3.jar
files.txt
hibernate-annotations-3.5.0-Final.jar
hibernate-commons-annotations-3.2.0.Final.jar
hibernate-core-3.5.0-Final.jar
hibernate-entitymanager-3.5.0-Final.jar
hibernate-jpa-2.0-api-1.0.0.Final.jar
hibernate-search-3.0.0.GA.jar
hibernate-validator-4.0.2.GA.jar
hsqldb-1.8.0.10.jar
httpclient-4.1.2.jar
httpclient-cache-4.1.2.jar
httpcore-4.1.2.jar
httpmime-4.1.2.jar
icu4j-2.6.1.jar
jackson-core-asl-1.5.3.jar
jackson-mapper-asl-1.5.3.jar
javassist-3.9.0.GA.jar
jaxb-api-2.1.jar
jaxb-impl-2.1.3.jar
jaxen-1.1.1.jar
jcl-over-slf4j-1.5.10.jar
jdom-1.0.jar
joda-time-1.6.jar
joda-time-jsptags-1.0.2.jar
jstl-1.2.jar
jta-1.1.jar
log4j-1.2.14.jar
log4j-1.2.15.jar
lucene-core-2.3.2.jar
lucene-highlighter-2.0.0.jar
mail-1.4.jar
mailapi.jar
mail.jar
mchange-commons-java-0.2.2.jar
mysql-connector-java-5.0.5.jar
org.springframework.aop-3.1.1.RELEASE.jar
org.springframework.asm-3.1.1.RELEASE.jar
org.springframework.aspects-3.1.1.RELEASE.jar
org.springframework.beans-3.1.1.RELEASE.jar
org.springframework.binding-2.3.1.RELEASE.jar
org.springframework.context-3.1.1.RELEASE.jar
org.springframework.context.support-3.1.1.RELEASE.jar
org.springframework.core-3.1.1.RELEASE.jar
org.springframework.expression-3.1.1.RELEASE.jar
org.springframework.faces-2.3.1.RELEASE.jar
org.springframework.instrument-3.1.1.RELEASE.jar
org.springframework.instrument.tomcat-3.1.1.RELEASE.jar
org.springframework.jdbc-3.1.1.RELEASE.jar
org.springframework.jms-3.1.1.RELEASE.jar
org.springframework.js-2.3.1.RELEASE.jar
org.springframework.js.resources-2.3.1.RELEASE.jar
org.springframework.orm-3.1.1.RELEASE.jar
org.springframework.oxm-3.1.1.RELEASE.jar
org.springframework.test-3.1.1.RELEASE.jar
org.springframework.transaction-3.1.1.RELEASE.jar
org.springframework.web-3.1.1.RELEASE.jar
org.springframework.webflow-2.3.1.RELEASE.jar
org.springframework.web.portlet-3.1.1.RELEASE.jar
org.springframework.web.servlet-3.1.1.RELEASE.jar
org.springframework.web.struts-3.1.1.RELEASE.jar
persistence-api-1.0.jar
quartz-1.5.2.jar
slf4j-api-1.5.10.jar
slf4j-log4j12-1.5.10.jar
smtp.jar
spring-ldap-1.3.1.RELEASE-all.jar
spring-security-cas-3.1.0.RELEASE.jar
spring-security-config-3.1.0.RELEASE.jar
spring-security-core-3.1.0.RELEASE.jar
spring-security-crypto-3.1.0.RELEASE.jar
spring-security-ldap-3.1.0.RELEASE.jar
spring-security-openid-3.1.0.RELEASE.jar
spring-security-remoting-3.1.0.RELEASE.jar
spring-security-taglibs-3.1.0.RELEASE.jar
spring-security-web-3.1.0.RELEASE.jar
spring-tx-3.0.5.RELEASE.jar
stax-api-1.0-2.jar
tiles-api-2.1.3.jar
tiles-core-2.1.3.jar
tiles-jsp-2.1.3.jar
tiles-servlet-2.1.3.jar
urlrewritefilter-3.1.0.jar
validation-api-1.0.0.GA.jar
xalan-2.6.0.jar
xml-apis-1.3.02.jar
xmlParserAPIs-2.6.2.jar
xom-1.0.jar 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:39:21.610

最好的方法是使用像[Maven](https://maven.apache.org/)这样的项目管理器，它会自动为您处理依赖关系。这可能是最好的长期解决方案

蛮力的方法是将所有 jar 移动到另一个文件夹中，然后继续尝试编译您的项目。你会得到很多缺失的类错误，所以你要找出哪个 jar 有这个类（谷歌可能会在这里提供帮助），添加它，然后再次编译。

这是我唯一能想到的两种方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:11:54.860

您可以尝试在您的应用程序上运行 JBoss [Tattletale](http://www.jboss.org/tattletale)。这将为您提供有关应用程序依赖关系的报告，包括但不限于未使用的 jar、具有不同版本号的重复 jar 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:03:48.790

如果您使用的是 Eclipse IDE，我建议您下载并使用[ClassPath Helper](http://classpathhelper.sourceforge.net/)
未使用的 jar 的文档可以在这里找到：[Unreferenced Classes](http://classpathhelper.sourceforge.net/documentation/gettingstarted.html) 但是，请阅读注意事项：

> 在使用 Class.forName() 加载类的情况下，这在许多框架中很常见，包括 struts、WAR web.xml 文件、EJB 描述符等。接口常量（静态最终常量）是内联编译的。这意味着尽管在运行时对常量有编译时依赖性，但没有对声明接口/类的引用

**更新：**

> 我正在使用 Eclipse Helios Service Release 2，它对我来说很好用。您需要确保一件事，您必须使用**包资源管理器**（而不是像往常一样的项目资源管理器）来探索您的项目，然后转到 Window -> Show View -> Other -> ClassPath Helper 选择 ClassPath View。

# jaxb - JAXB XJC - 将 XML 模式版本绑定到类名中

> ID：12375011
> 
> 赞同：2
> 
> 时间：2012-09-11T17:35:01.693
> 
> 标签：jaxb, xjc, xml-binding

我们有两个元素名称相同但命名空间不同的 XML 模式。当我使用 xjc 时，编译器将元素分配给相同的类路径和元素。如下所示，根本问题在于对带前导数字的 XML Schema 命名空间的处理；特别是 1.0 和 1.1。XJC 正在将这些不同的 URI 编译到相同的类路径中；特别是_1。这导致与相同的类路径发生冲突：

```
com.companyabc.namespaces.eda.process._1.TheChangeType 
```

bindings.xjb 中将 1.0 绑定到 _1_0 和 1.1 到 _1_1 的语法是什么？

谢谢！！！

XML 模式 1： http: [//namespaces.companyABC.com/EDA/Process/1.0/TheChange](http://namespaces.companyABC.com/EDA/Process/1.0/TheChange)

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:p10="http://namespaces.companyABC.com/EDA/Process/1.0"
targetNamespace="http://namespaces.companyABC.com/EDA/Process/1.0"
elementFormDefault="qualified">
<xs:element name="TheChange" type="p10:TheChangeType" />
<xs:complexType name="TheChangeType">
    <xs:sequence>
        <xs:element name="Field1" type="xs:string" />
    </xs:sequence>
</xs:complexType>
</xs:schema> 
```

XML 模式 2： http: [//namespaces.companyABC.com/EDA/Process/1.1/TheChange](http://namespaces.companyABC.com/EDA/Process/1.1/TheChange)

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:p11="http://namespaces.companyABC.com/EDA/Process/1.1"
targetNamespace="http://namespaces.companyABC.com/EDA/Process/1.1"
elementFormDefault="qualified">
<xs:element name="TheChange" type="p11:TheChangeType" />
<xs:complexType name="TheChangeType">
    <xs:sequence>
        <xs:element name="Field1" type="xs:string" />
        <xs:element name="Field2" type="xs:string" />
    </xs:sequence>
</xs:complexType>
</xs:schema> 
```

错误：

```
[ant:xjc] [ERROR] A class/interface with the same name "com.companyabc.namespaces.eda.process._1.TheChangeType" is already in use. Use a class customization to resolve this conflict.
[ant:xjc]   line 3 of file:/D:/source/1.0/TheChange.xsd 
```

这是使用 XSD 模式注释的解决方案。然而，解决方案应该作为 bindings.xjb 中的绑定模式而不是注解来实现。注释将要求对每个模式进行注释，这是一个问题。

```
<xsd:annotation>
    <xsd:appinfo>
        <jaxb:schemaBindings>
            <jaxb:package name="com.companyabc.namespaces.eda.process._1_0" />
        </jaxb:schemaBindings>
    </xsd:appinfo>
</xsd:annotation>

            <jaxb:package name="com.companyabc.namespaces.eda.process._1_1" /> 
```

这个注解是如何作为 bindings.xjb 中的绑定模式实现的？

# instagram - 无法在 iOS 应用程序中集成 Instagram

> ID：12375016
> 
> 赞同：2
> 
> 时间：2012-09-11T17:35:22.233
> 
> 标签：instagram

我无法使用 ios App 在 Instagram 上发布我的照片。我从 stackoverflow 上的帖子中获得了以下代码，但它不起作用。Instagram 启动时，显示错误无法打开文件。请帮助我。

```
NSURL *instagramURL = [NSURL URLWithString:@"instagram://location?id=1"];
    if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {

        NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
        NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"Image.ig"];
        NSData *imageData = UIImagePNGRepresentation([UIImage imageNamed:@"Icon.png"]);
        [imageData writeToFile:savedImagePath atomically:YES];
        NSURL *imageUrl = [NSURL fileURLWithPath:savedImagePath];
        docController = [[UIDocumentInteractionController alloc] init];
        docController.delegate = self;
        [docController retain];
        docController.UTI = @"com.instagram.photo";
        [docController setURL:imageUrl];
        [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
    }else{

        UIAlertView *errorToShare = [[UIAlertView alloc] initWithTitle:@"Instagram unavailable " message:@"You need to install Instagram in your device in order to share this image" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [errorToShare show];
        [errorToShare release];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T15:17:12.053

Instagram 的最低分辨率为 612x612。始终为 JPG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T10:32:59.283

为了完整起见，最低分辨率保持在**612x612**（这是由于在视网膜设备上显示图像），但 Instagram 现在支持**JPEG**和**PNG**图像。发送到 Instagram 的所有非方形图像必须在发布前进行裁剪。

# html - xslt xml html：如何通过应用 xsl 模板来解码 URL？

> ID：12375017
> 
> 赞同：1
> 
> 时间：2012-09-11T17:35:25.323
> 
> 标签：html, xml, xslt, urldecode

我想在 xsl 转换后对我的数据进行解码，我该怎么办？

资源：

```
<label><![CDATA[%3Clabel%20for%3D%22grp_Jb6dVM%22%20class%3D%22control-label%20span2%22%20%3ETenant%20Name%20%3Cspan%20class%3D%22required%22%3E%2A%3C%2Fspan%3E%3C%2Flabel%3E]]></label> 
```

我想要的输出：

```
<label><![CDATA[<label for="grp_Jb6dVM" class="control-label span2" >Tenant Name <span class="required">*</span></label>]]></label> 
```

那么，我该如何编写我的模板来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:44:17.437

**xsltproc**包含一个名为 decode-uri 的扩展

```
$ xsltproc --dumpextensions | grep code
{http://exslt.org/strings}encode-uri
{http://exslt.org/strings}decode-uri 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:41:29.013

最后，我不打算在 XSL 转换过程中这样做。在任何 oo 语言中，解码它应该不超过 1 行代码。就像在 Java 中一样，

```
java.net.URLDecoder.decode(str, "UTF-8"); 
```

# c# - 使用 MonoMac 创建一个简单的 Hello World 应用程序

> ID：12375022
> 
> 赞同：3
> 
> 时间：2012-09-11T17:35:48.660
> 
> 标签：c#, xcode, mono, interface-builder, monomac

我在 Mac OS X 机器上安装了 XCode、MonoMac、Mono 和 MonoDevelop，但我不知道如何成功地将 Click 事件连接到一个简单的按钮。

首先，我控制拖拽按钮到头文件，它创建了一个出口。现在，我可以从 C# 代码访问我的按钮 (btnHello)，这很酷 - 但是如何以及在何处将事件绑定到它？

我试着做

```
this.btnHello.PerformClick += delegate {
    this.Title = "Hello World";
}; 
```

但是 MonoDevelop 抱怨我不能这样做，因为一些“方法组”的东西。

我已经研究了几天，我找不到任何关于如何做到这一点的教程，我不想使用示例代码，因为它没有给我未来如何正确执行此操作的过程。我尝试查看 MonoTouch 入门指南，因为它接近 MonoMac，但这也无济于事。

任何帮助都会很棒，尤其是关于出口和行动，以及我如何将它们与我的元素联系起来！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T11:15:52.573

尝试：

```
 this.btnHello.Activated += delegate {
    this.Title = "Hello World";
}; 
```

这段代码应该在你的控制器中的某个地方，最有可能在 AwakeFromNib 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T08:03:45.217

大多数问题可能源于您在网上找到的大多数教程仍然引用旧版本的 MonoDevelop、XCode 和 Interface Builder。

我之前发布过这个链接，它展示了如何启动一个基本项目，包括使用新的 XCode 4.2+ 设置的事件处理程序。

[http://tufnelltech.blogspot.ca/2012/01/hello-os-x-from-c-five-steps.html](http://tufnelltech.blogspot.ca/2012/01/hello-os-x-from-c-five-steps.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T23:21:15.450

NSButton.PerformClick() 是一种方法，而不是事件，因此您无法将委托连接到它。

不幸的是，我对 Mac API 不够熟悉，无法建议如何做你想做的事。

# android - 如何在PhoneGap的FileTransfer上传方法中获取View？

> ID：12375028
> 
> 赞同：0
> 
> 时间：2012-09-11T17:36:31.800
> 
> 标签：android, cordova, sencha-touch-2

我已经使用 PhoneGap + Sencha Touch 2 创建了一个本机 android 应用程序。我已成功将文件上传到服务器，但是，我在 FileTransfer upload() 方法中从上传成功回调函数访问视图时遇到问题。这是我的代码：

上传回调：

```
uploadPicture: function(imageURI) {
    var options = new FileUploadOptions(),
    params = new Object(),
    fileTransfer = new FileTransfer(),
    builder = this.getBuilder(),
    app = this.getApplication(),
    uri = encodeURI('/myservlet');

options.fileKey = 'file';
options.fileName = imageURI.substr(imageURI.lastIndexOf('/') + 1);
options.mimeType = 'image/jpeg';

params.myparams = something;
params.moreparams = evenmore;

options.params = params;
options.chunkedMode = false;

fileTransfer.upload(imageURI, uri, this.uploadSuccess.bind(this), this.uploadError.bind(this), options);        
}, 
```

上传成功函数

```
uploadSuccess: function (r) {
    var builderChild = this.getBuilderChild(),
    data = r.response.attachment;

builderChild.addInstance(builderChild.config, data);
navigator.notification.alert('Attachment successful.');
} 
```

当我进入 uploadSuccess 函数时，我的 builderChild 对象未定义。我已经能够通过同一个控制器在其他功能中使用builderChild对象，但在uploadSuccess中不行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:15:46.440

试试这个，我以前就是这样的。

```
var ftSuccess = Ext.bind(this.uploadSuccess, this),
    ftError   = Ext.bind(this.uploadError, this);

fileTransfer.upload(imageURI, uri, ftSuccess, ftError, options); 
```

希望这有帮助

# jsf - JSF EL - 用默认值替换 null

> ID：12375029
> 
> 赞同：8
> 
> 时间：2012-09-11T17:36:39.380
> 
> 标签：jsf, null, el

有没有办法用 JSF EL 表达式中的默认值替换 null，有点像 Oracle`NVL`函数？

我知道我可以做类似的事情

```
#{obj == null ? 'None' : obj.property} 
```

但希望有一种自动的方法来做到这一点，所以我不会在三元猫王运算符的两侧复制/粘贴相同的表达式。

我正在寻找类似的东西

```
#{default(obj.property, 'None')} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T19:10:54.753

EL中不存在这样的东西。不是[现在](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)，也不是[将来](http://java.net/projects/el-spec/pages/Operators)。

您最好的选择是创建自定义 EL 函数。

```
#{my:def(obj.property, 'None')} 
```

*（注意：作为`default`Java 关键字/文字，在 EL 中使用该名称作为函数名称是无效的）*

如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，那么您可以将[`#{of:coalesce()}`](http://showcase.omnifaces.org/functions/Objects)其用于确切目的。

### 也可以看看：

*   [如何创建自定义 EL 函数来调用静态方法？](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-19T07:47:28.550

在某些情况下，您可以使用它：

```
<c:out value="${obj.property}" default="None"/> 
```

（[这里](http://www.coderanch.com/t/643867/JSP/java/print-null-values-EL#2959730)建议）

# perl - 并行处理多个文件

> ID：12375030
> 
> 赞同：2
> 
> 时间：2012-09-11T17:36:41.350
> 
> 标签：perl

我有一个 Perl 脚本，它读取两个文件并处理它们。

第一个文件 - 信息文件 - 我将其存储为哈希 (3.5 gb)

第二个文件 - taregt 文件 - 我正在使用来自 info 文件和其他设计的子例程的信息进行处理。（此文件，目标，范围为 30 - 60 GB）

到目前为止的工作是：

*   将信息文件读入哈希
*   将目标文件分成块

我想在所有块上并行运行：

```
while(chunks){
    # do something 

    sub a {}
    sub b {} 
} 
```

所以基本上，我想读取一个块，写入它的输出并同时为多个块执行此操作。while 循环读取块文件的每一行，并调用各种子程序进行处理。

有没有办法可以在后台读取块？

我不想为每个块读取信息文件，因为它有 3.5gb 长，我正在将它读入哈希，每次都占用 3.5gb。

现在脚本需要 1-2 小时才能运行 30-60GB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:40:41.743

What's about module `File::Map` (memory mapping), it can easy read big files.

```
use strict;
use File::Map qw(map_file);

map_file my $map, $ARGV[0]; # $ARGV[0] - path to your file
# Do something with $map 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:51:54.740

3.5GB 的哈希非常大，您应该考虑使用数据库。根据您执行此操作的方式，您可以继续通过哈希访问数据库。

如果内存不是问题，`fork`那么 ing 将是最简单的解决方案。但是，这会重复该过程，包括哈希，并且只会导致不必要的交换。

如果您无法释放一些内存，则应考虑`use threads`. Perl 线程只存在于解释器内部，对操作系统是不可见的。这些线程与 ing 有相似的感觉`fork`，但是，您可以将变量声明为`:shared`. （你必须`use threads::shared`）

请参阅官方[Perl 线程教程](http://perldoc.perl.org/perlthrtut.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:50:17.953

如果并行任务是独立的，您可以尝试使用 Perl[线程。](http://perldoc.perl.org/threads.html)

# php - 如何从具有 php 后端的网站制作 android 应用程序

> ID：12375034
> 
> 赞同：0
> 
> 时间：2012-09-11T17:36:52.350
> 
> 标签：php, android

我的网站有登录名。

登录网站时使用的 3 个页面是：-

1）login_form.html（这个html页面有表单，用户可以在点击提交时填写数据发送到login_validate.php）

2）login_validate.php（这个php页面验证输入文本，如果他是一个真实的用户，它会将它们重定向到home.php）

3) 主页.php

我想制作一个 android 登录页面，当输入正确的登录用户名和密码而不是显示 home.php 时，它应该显示其他内容。

我能够向 login_validate.php 发出 POST http 请求，我得到 home.php 作为回复，

我的问题是我怎么知道登录成功，因为我没有得到任何成功或失败的回复。当身份验证错误时，我得到 login_form.html，当用户名和密码正确时得到 home.php....

在我的 android 应用程序中，我如何知道他是否输入了正确的用户名和密码，或者我现在从服务器获得的数据中的凭据是否正确？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:39:27.197

在 login_validate.php 中只返回“Ok”或“Bad”状态。然后手动重定向到您需要的任何页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:55:25.277

* * *

使用 Http Response 从您发布数据的 php 脚本中获取响应。它可以根据身份验证是否成功回显 0 或 1。现在阅读您的应用程序中的响应并重定向。

```
 HttpClient client = new DefaultHttpClient();  
                String getURL = "http://www.example.in";
                HttpGet get = new HttpGet(getURL);
                HttpResponse responseGet = client.execute(get);  
                HttpEntity resEntityGet = responseGet.getEntity();  
                if (resEntityGet != null) 
                {  
                            //do something with the response
                            Log.i("GET RESPONSE",EntityUtils.toString(resEntityGet));
                        } 
```

# eclipse - Eclipse 插件消失了

> ID：12375042
> 
> 赞同：0
> 
> 时间：2012-09-11T17:37:33.877
> 
> 标签：eclipse, plugins, adt

在 ubuntu 更新后，我所有的 eclipse 插件都消失了，包括 ADT 插件、数据库插件和 PHP 插件。如果我安装“新”软件，eclipse 会给出错误“重复位置”。伟大的

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:00:24.523

Eclipse 版本更新了吗？无论哪种方式，根据我的经验，最好的选择是重新安装 Eclipse，以确保没有以前安装的垃圾（最好现在消除这种可能性，然后在路上出现一些可能归因于代码问题的错误）。

# selenium - 为什么我不能使用 Selenium 选择单选按钮？按钮突出显示，但未选中

> ID：12375044
> 
> 赞同：0
> 
> 时间：2012-09-11T17:37:39.863
> 
> 标签：selenium, webdriver

我在 Internet Explorer 8 中使用 C#。

我有以下单选按钮代码：

```
wait.Until(ExpectedConditions.ElementExists(By.Id("optNoteReplace")));
driver.FindElement(By.Id("optNoteReplace")).Click(); 
```

当我单步执行代码时，Click 命令会静默执行，并且下一行会突出显示。没有错误，但未选择单选按钮。

代码行执行后，单选按钮周围立即出现一个小方块。我认为这证明选择了正确的单选按钮。

如果我更改代码行以选择另一个单选按钮，则正方形从第一个按钮消失，并重新出现在第二个按钮周围。

如有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:12:57.877

注意您尝试使用它来定位单选按钮的 css 选择器或 xPAth。我通常使用firepath（ffox中的firebug插件） ![火路验证](../Images/4c85396b7d542d1ad13d7762d5e13eaf.png)

这在java中对我有用：

```
@Test
    public void radioButtonCheck(){
        driver.get("http://www.abw.by/index.php?act=finance");

        fluentWait(By.cssSelector("html body div table#main_tb tbody tr td#main_td01 div.block table tbody tr td noindex div div table tbody tr td div:first-child>input:first-child")).click();
    }

public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
//                .pollingEvery(5, TimeUnit.SECONDS)
                .pollingEvery(1, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              }     ; 
```

也尝试使用wait.Until fluent wait。[在此处](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)阅读有关流利等待的一些附加信息

希望这对你有帮助）

# xml - 返回重复节点集中的“最新”节点

> ID：12375053
> 
> 赞同：2
> 
> 时间：2012-09-11T17:38:40.547
> 
> 标签：xml, xpath, repeat

我需要调整以下 XPath 表达式以`Amend_Start_Date`从示例 XML（来自 MS InfoPath）返回“最新”：

```
//my:Amend_Data[0=count(following-sibling::my:Amend_Data)]//my:Amend_Start_Date 
```

和 XML：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.440" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\1c02663d7ed84d09\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.2"?><?mso-infoPath-file-attachment-present?><my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2011-05-05T19:56:08" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
<my:MasterSection>
    <my:Planning_Section>
        <my:Planned_Start_Date>2012-09-12</my:Planned_Start_Date>
        <my:Planned_End_Date>2012-09-14</my:Planned_End_Date>
    </my:Planning_Section>
    <my:Actual_Section>
        <my:Actual_Start_Date>2012-09-13</my:Actual_Start_Date>
        <my:Actual_End_Date>2012-09-15</my:Actual_End_Date>
    </my:Actual_Section>
    <my:Amend_Hider>
        <my:Amend_Info_Repeater_Group>
            <my:Amend_Info_Repeater>
                <my:Amend_Data>
                    <my:Amend_Start_Date>2012-09-16</my:Amend_Start_Date>
                    <my:Amend_End_Date>2012-09-21</my:Amend_End_Date>
                </my:Amend_Data>
            </my:Amend_Info_Repeater>
            <my:Amend_Info_Repeater>
                <my:Amend_Data>
                    <my:Amend_Start_Date>2012-09-23</my:Amend_Start_Date>
                    <my:Amend_End_Date>2012-09-27</my:Amend_End_Date>
                </my:Amend_Data>
            </my:Amend_Info_Repeater>
        </my:Amend_Info_Repeater_Group>
    </my:Amend_Hider>
</my:MasterSection> 
```

我上周四开始使用 XPath ......如果我需要用勺子喂食，请原谅我。就目前而言，列出的表达式返回示例 XML 中的*所有*开始日期节点。它旨在返回“最新” `Amend_Start_Date`，但不是因为 XML 的结构使得`Amend_Start_Date`节点没有组合在一起。在这个例子中，这意味着一个正确的表达式将返回一个开始日期`2012-09-23`而**不是** `2012-09-16`

一定有办法做到这一点！必须以某种`Amend_Data`方式修改节点的相对路径......感谢任何帮助！

**PS：**这与我周五发布的一个问题有关，[可以在这里找到](https://stackoverflow.com/questions/12323195/xpath-get-value-of-last-sibling-in-a-node/12323336#12323336)。您可能会注意到该问题与此问题中列出的示例 XML 的结构差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T19:10:20.817

这：

```
(//my:Amend_Data)[last()]//my:Amend_Start_Date 
```

应该做的伎俩。

不使用`last()`您可以尝试：

```
//my:Amend_Info_Repeater[0=count(following-sibling::my:Amend_Info_Repeater)]/my:Amend_Data/my:Amend_Start_Date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:02:47.273

**使用**：

```
(//my:Amend_Start_Date)[last()] 
```

`my:Amend_Start_Date`这将选择XML 文档中所有元素的最后一个（按文档顺序） 。

**更新**：

如果由于 InfoPath 的 XPath 实现中的一些错误/不合规性，上述表达式无法成功/正确评估，请尝试：

```
//my:Amend_Start_Date
    [not(preceding::my:Amend_Start_Date or ancestor::my:Amend_Start_Date)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:41:21.633

我没有在一个 xpath 中得到它，但也许 xslt 有帮助。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2011-05-05T19:56:08">
    <xsl:output method = "text" indent="yes"/>

    <xsl:variable name="y" select="//my:Amend_Data"/>
    <xsl:variable name="x" select="$y[count($y)]/my:Amend_Start_Date"/>

  <xsl:template match="/">
        <xsl:value-of select="$x"/>
  </xsl:template>
</xsl:stylesheet> 
```

# java - 在 java 中使用监视器

> ID：12375059
> 
> 赞同：0
> 
> 时间：2012-09-11T17:39:22.737
> 
> 标签：java, bash, monitoring, monit

我正在使用该工具`monit`来启动/停止一个进程。我有一个java文件如下：

```
class test {
 public void start()
 {
  //do something
 }
 public void stop()
 {
  //do something
 }
} 
```

当从监视器发出启动命令时，我想调用启动函数，反之亦然。我似乎找不到一个很好的教程来解释我需要采取哪些步骤来执行 start 和 stop 方法。我需要编写一个 bash 脚本吗？并且monit会调用bash脚本，而bash脚本又会调用java方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:44:46.993

java程序的入口点是`main`方法。

```
public static void main(String [] args) 
{
    // args carry the command line arguments.
} 
```

在您的情况下，您应该在该实例上创建一个测试和调用`start()`方法的实例。

```
public static void main(String [] args) 
{
    test obj = new test();
    obj.start();
} 
```

Java 的`Runtime`类提供了一个选项来添加一个[关闭钩子](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)，当 java 程序被终止时该钩子会被调用。您编写了一个简单的线程类，它可以访问`test`在上面的 main 方法中创建的实例，以便在调用关闭挂钩线程的 run 方法时，将其委托给测试实例的 stop 方法。

希望这可以帮助。

# html - 如何（y）在上一行底部上方对齐 div？

> ID：12375060
> 
> 赞同：0
> 
> 时间：2012-09-11T17:39:26.057
> 
> 标签：html, css, layout

我正在尝试通过在 width:100% 容器 div 中填充固定宽度的 div 来创建列布局，当容器中没有空间时让它们“包裹”，从而创建列。要更改列数，我只需更改包含的 div 的宽度。那些包含的 div 可能非常高..

这是我现在拥有的：

```
+------------------------------+
|+----+ +----+ +----+ +----+   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
|+----+ +----+ +----+ |    |   |
|                     |    |   |
|                     |    |   |
|                     |    |   |
|                     +----+   |
|+----+ +----+ +----+ +----+   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
|+----+ +----+ +----+ +----+   |
|                              | 
```

看到这个大腰空间，其中大小的 div 在前一行的最高 div 的底部包裹和对齐？我猜这就是 HTML 的盒子模型的工作原理。

但在这种情况下，我想要得到的是：

```
+------------------------------+
|+----+ +----+ +----+ +----+   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
|+----+ +----+ +----+ |    |   |
|+----+ +----+ +----+ |    |   |
||    | |    | |    | |    |   |
||    | |    | |    | |    |   |
||    | |    | |    | +----+   |
|+----+ +----+ +----+ +----+   |
|                     |    |   |
|                     |    |   |
|                     |    |   |
|                     +----+   |
|                              | 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:54:44.337

看看这样的东西，它几乎与 Pinterest 相同......

[http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)

# sqlite - 黑莓 DatabaseOutOfMemoryException 与 SQLite

> ID：12375065
> 
> 赞同：1
> 
> 时间：2012-09-11T17:39:35.950
> 
> 标签：sqlite, blackberry

我收到以下错误：

```
net.rim.device.api.database.DatabaseOutOfMemoryException 
```

尝试更新我的数据库时。它似乎发生在代码中的随机点（当然这些总是我与数据库交互的点）。

这个错误是什么意思，我怎样才能防止这种情况发生？

顺便说一句，我在使用时使用事务`INSERT`并`UPDATE`加快速度。

任何帮助将不胜感激！

谢谢！！

# mysql - 未知数量列表的数据库设计，每个列表都有可变数量的项目？

> ID：12375070
> 
> 赞同：1
> 
> 时间：2012-09-11T17:40:07.707
> 
> 标签：mysql, database, database-design

我想设计一些允许用户将列表放在一起的东西，比如杂货。如果**每个用户可以有多个列表（即不是固定数量）并且这些列表上都有可变数量的项目（同样，未设置），而有些项目出现在几个不同的列表中**，我如何创建一个数据库而不是可怕多余的？

我对这种问题完全陌生，以前没有组装任何复杂的数据库，也不知道从哪里开始。这是我想出的一个例子，但我怀疑这是正确的做事方式：

![在此处输入图像描述](../Images/69ffdb4150bf791ed729dd34526a6c27.png)

任何帮助或想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:44:16.690

您可以`join table LIST_LINK_ITEM`在三个表之间创建

她的主键是：三个主键的组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:38:45.147

看起来你需要类似的东西：

![在此处输入图像描述](../Images/3b93ae00c69665a0bbbbf240677da060.png)

列表对用户是私有的，但一个项目可以在多个列表之间共享：

*   USER 和 LIST 之间的关系是一对多的，通过一个简单的外键建模。
*   LIST 和 ITEM 之间的关系是多对多的，由它们之间的连接（又名链接）表建模：LIST_ITEM。

我在上图中使用了识别 USER 和 LIST 之间的关系，在“下游”表中生成了更多“自然”键：

*   减少对 JOIN 的需求（您已经知道给定 LIST_ITEM 属于哪个 USER，而无需使用 LIST 进行 JOIN）。
*   但是使下游键“更胖”。

* * *

使用 USER 和 LIST 之间的非识别关系（产生“更苗条”的键）的设计如下所示：

![在此处输入图像描述](../Images/1b80263cb755a725b8d5481d7cc34ea7.png)

# r - 在 R (ggplot2) 中绘制每次具有多个值的时间序列？

> ID：12375084
> 
> 赞同：3
> 
> 时间：2012-09-11T17:40:48.803
> 
> 标签：r, ggplot2, time-series

假设我有数据，包括我离开家的时间和上班所需的分钟数。我会有一些重复的值：

```
08:00, 20
08:04, 25
08:30, 40
08:20, 23
08:04, 22 
```

有些数字会重复（比如 08:04）。我想要做的是运行一个散点图，该散点图在 x 轴上正确缩放，但每个条目允许这些多个值，以便我可以查看趋势。

时间序列甚至是我想要使用的吗？我已经能够绘制一个每次具有一个值的时间序列图，并且我已经绘制了多个值，但没有时间序列缩放。任何人都可以提出一个好的方法吗？偏好 ggplot2 但如果它更容易，我将采用标准 R 绘图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:01:12.143

首先让我们准备更多数据

```
set.seed(123)
df <- data.frame(Time = paste0("08:", sample(35:55, 40, replace = TRUE)), 
                 Length = sample(20:50, 40, replace = TRUE), 
                 stringsAsFactors = FALSE)
df <- df[order(df$Time), ]
df$Attempt <- unlist(sapply(rle(df$Time)$lengths, function(i) 1:i))
df$Time <- as.POSIXct(df$Time, format = "%H:%M") # Fixing y axis
head(df)
    Time Length Attempt
6  08:35     24       1
18 08:35     43       2
35 08:35     34       3
15 08:37     37       1
30 08:38     33       1
38 08:39     38       1 
```

据我了解，您希望保留相同离家时间的观察顺序。起初我忽略了这一点，得到了一个像这样的散点图：

![在此处输入图像描述](../Images/fa71271f231deefb5e85ba56ae2e341a.png)

```
ggplot(data = df, aes(x = Length, y = Time)) + 
  geom_point(aes(size = Length, colour = Length)) + 
  geom_path(aes(group = Time, colour = Length), alpha = I(1/3)) + 
  scale_size(range = c(2, 7)) + theme(legend.position = 'none') 
```

但考虑到三个维度（`Time`和`Length`）`Attempt`散点图不再能向我们展示所有信息。我希望我正确地理解了你，这就是你要找的：

![在此处输入图像描述](../Images/29b05b952cb06d2fca6a5c927d46cc3c.png)

```
ggplot(data = df, aes(y = Time, x = Attempt)) + geom_tile(aes(fill = Length)) 
```

# iphone - 允许滚动内容大小等于帧大小

> ID：12375088
> 
> 赞同：2
> 
> 时间：2012-09-11T17:41:47.320
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview

如何创建`UIScrollView`内容大小仅允许查看一项的分页（但左右两侧的内容更多，应该无法访问）？我想将用户“困”在一个页面上，在任一侧都有反弹，类似于分页`UIScrollView`仅处理一页内容的方式。

但是，如果我将内容大小设置为与我的单页相同的宽度，则滚动将完全禁用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T18:56:06.427

要适当地使任何`UIScrollView`总是反弹，请设置其`alwaysBounceHorizontal/Vertical:`属性：

```
[_scrollView setAlwaysBounceHorizontal:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:00:04.010

将内容大小设置为略大于您的框架大小应该可以做到这一点。一两点肯定会；你甚至可以用一小部分钱侥幸逃脱。无论哪种方式，当用户释放滚动视图时，您的滚动视图委托应处理将视图滚动回“居中”内容偏移量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T17:53:05.643

您可以将 scrollEnabled 设置为 NO，这可以防止滚动视图被移动，但这也可以防止反弹。我认为您需要在存在阻止滚动的条件时将项目移到两侧并重置 contentSize；然后在该条件清除时将它们重新添加。

# android - 在 sqlite 上获取插入错误代码

> ID：12375089
> 
> 赞同：2
> 
> 时间：2012-09-11T17:41:49.127
> 
> 标签：android, sqlite, insert, error-code

如何在 sqlite 数据库（在 android 中）上运行 sql 语句并获取查询结果？我需要确定查询是否已执行。

我想出了：

```
db.execSQL(sql); 
```

但这是一个无效函数。

我从数据库中获取 query_string，所以我不知道是插入或更新或删除语句。我确信它不会是一个选择语句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:54:50.960

尝试这样的事情：

```
public String insertQuery(String sql) {
           try{
       db.execSQL(sql);
           }
           catch (SQLException ex){
               return ex.toString();
           }
           return null;
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:44:44.973

如果你使用[`SQLiteDatabase`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)，你可以做两件事：

**1.)** **无结果查询 ( `UPDATE`, `DELETE`, `DROP`,`ALTER`等...)* *

这些查询不返回任何值，它们会修改数据库。执行此操作的函数称为[`execSQL(String)`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)。你可以简单地给它一个字符串格式的 SQL 查询，它会执行它。

**2.)** **查询结果 ( `SELECT`)* *

这些查询将返回一个[`Cursor`](http://developer.android.com/reference/android/database/Cursor.html)对象。使用游标，您可以迭代结果集，就像使用任何其他迭代器一样。光标将始终“包含”实际结果集中的单行，您可以调用移动函数来前进/后退。执行此操作的函数称为[`rawQuery(String, String [])`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)。您也可以使用该[`query()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)函数，使用此函数，您必须键入更少的 SQL。

**一个例子：**

```
Cursor cursor = database.rawQuery("SELECT * FROM yourtable", null);

for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
{
    /*this means you want to get from the current row a String 
    (CHAR, VARCHAR or TEXT) value from the 0th (first) column*/
    String str = cursor.getString(0);

    /*This means, that you want to get from the current row an 
    integer value from the 1st (second) column*/
    int i = cursor.getInt(1);
    ...
} 
```

# entity-framework - 不同项目中的 Entity Framework 5 和 Visual Studio 2012 POCO 类

> ID：12375090
> 
> 赞同：21
> 
> 时间：2012-09-11T17:42:01.920
> 
> 标签：entity-framework, visual-studio-2012

在 VS 2010 和 EF 4.4 中，您可以在实体框架中使用 DBContext 生成器时移动和编辑 .tt 文件，这样您的 POCO 对象与 DBContext 文件位于不同的项目中。

有关我正在谈论的内容的示例，请参见[此处](https://stackoverflow.com/questions/5565633/separating-entity-framework-poco-and-objectcontext)和[此处。](https://stackoverflow.com/questions/2464909/generate-poco-classes-in-different-project-to-the-project-with-entity-framework)

在 VS2012 / EF5 中，这似乎是不可能的。POCO 类作为 EDMX 文件下的子项生成。无法从 Visual Studio 中复制这些文件。从资源管理器中移动文件无济于事，因为您移动的文件会在编译时重新创建。

我在这里缺少一些基本的东西吗？

我没有在 EF5 中使用任何代码生成项（而我在 EF4.x 中使用）。这可能有区别吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-24T20:08:17.300

在 Visual Studio 2012 中，当您添加 ADO.NET 实体数据模型 (*.edmx) 时，它包含上下文和模型类的 T4 模板作为 EDMX 文件的子项。例如，如果添加 MyModel.edmx，它将有 4 个子项，如下所示：

1.  MyModel.Context.tt
2.  MyModel.Designer.cs（在 C# 项目中）
3.  MyModel.edmx.diagram
4.  我的模型.tt

MyModel.tt 将 POCO 实体生成为子项。要在单独的项目中生成实体，请执行以下步骤：

1.  创建一个单独的类项目。
2.  添加新项目，选择“EF 5.x DbContext Generator”模板。这将创建 *.tt 文件。例如 MyModel.tt。
3.  编辑模板文件如下：

    ```
    const string inputFile = @"MyModel.edmx"; // old value (remove)
    const string inputFile = @"..\MyOtherProjectName\MyModel.edmx"; // new value 
    ```

4.  在您的其他项目中，展开 EDMX 文件并右键单击 MyModel.tt，选择删除。

就是这样。你完成了。您现在将模型和上下文放在一个项目中，将实体放在单独的项目中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T19:22:55.610

查看以下帖子：[Visual Studio 2012 - 无法移动 EF .tt 文件](https://stackoverflow.com/questions/12200258/visual-studio-2012-cant-move-ef-tt-files)

它说明了如何将 .tt 文件的依赖信息删除到关联的 .csproj 文件中的 .edmx 文件中。这将允许您从解决方案资源管理器中拖动 .tt 文件。

只需确保更新 .tt 文件开头的文件路径以指向 .edmx，如上一个答案中所述，如下所示：

```
const string inputFile = @"..\EFTest\EFTestModel.edmx"; 
```

实际上有几个部分和步骤，缺少任何一个都可能导致 POCO 类的分离无法正常工作。我创建了一篇博文，详细介绍了您可以在下面查看的整个过程：

**在 VS.NET 2012 中分离从 T4 模板生成的实体框架 POCO 类：http:**
[//allen-conway-dotnet.blogspot.com/2013/01/separating-entity-framework-poco.html](http://allen-conway-dotnet.blogspot.com/2013/01/separating-entity-framework-poco.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:04:43.640

所以，你现在必须通过 Windows Explorer 移动它。然后在您移动的 .tt 文件中编辑 EDMX 文件的路径。一旦你这样做，它就会起作用。（我知道我说它不是上面的，但我第一次尝试时一定做错了什么。）

# vb.net - Visual Basic Studio 2010：Sterling ActiveX 库

> ID：12375094
> 
> 赞同：1
> 
> 时间：2012-09-11T17:42:17.333
> 
> 标签：vb.net, visual-studio-2010, activex

我是 Visual Basic 的新手，我遇到了一个错误。我正在尝试编写一个最终将由 Sterling Trader（股票交易软件）运行并在其中运行的程序。我正在尝试按照 activeX API 指南的说明来包含对库的引用。以下是指南所说的：

创建对 Sterling ActiveX 库的引用 - 从菜单中选择项目 ---> 引用.... - 从可用引用中选择 Sterling 1.0 类型库。- 如果未找到 Sterling 1.0 类型库，请选择浏览并找到 Sterling.tlb 文件。

启用事件 - 将以下行置于代码的常规部分以声明对象：复制代码

Dim WithEvents m_STIEvents 作为 STIEvents

*   将以下行置于初始化过程中，例如 Form_Load 过程：复制代码

设置 m_STIEvents = 新 STIEvents

*   现在在代码窗口的 Object 下拉控件中选择 m_STIEvents（左上角下拉控件）。您将在“过程”下拉控件（右上角的下拉控件）中看到可用的事件。选择您想要捕获的事件，它将被插入到您的代码中。它应该看起来像这样：复制代码

Private Sub m_STIEvents_OnSTIOrderUpdateMsg(ByVal oSTIOrderUpdateMsg As ISTIOrderUpdateMsg)

*   使用 oSTIOrderUpdateMsg 对象从消息中收集信息。

但是，由于某种原因，我在 Visual Basic 2010 中遇到了错误（该指南必须是过时的）。所以基本上，我盲目地跟随 Intellisense 将我的代码更改为我希望能工作的东西。这是我的代码：

折叠 | 复制代码

`Public Class Form1`

 ````
Dim WithEvents m_STIEvents As SterlingLib.STIEvents

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

   m_STIEvents = New SterlingLib.STIEvents

End Sub 
```

End Class`  `现在，我只是尝试启动并运行一个已成功包含该库的基本程序。但是，当我运行它时，我收到以下错误消息：

“由于以下错误，检索具有 CLSID {5E89F49B-6A12-420F-8570-E510EF1B580A} 的组件的 COM 类工厂失败：80070002 系统找不到指定的文件（来自 HRESULT 的异常：0x80070002）”

如果我单击继续，程序将运行并显示基本窗口。我在网上根本找不到任何有关如何执行此操作的信息，请帮助！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T04:15:36.720

您必须登录 sterling pro 才能使程序正常工作。还安装VB6 将解决COM 问题。这个 API 太旧了。英镑懒得更新了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:08:29.820

我有类似的东西。我关闭了 Windows UAC，错误消失了

见错误列表

[http://web.archive.org/web/20100126001718/http://blogs.msdn.com/joshpoley/pages/errors-007-facility-win32.aspx](http://web.archive.org/web/20100126001718/http://blogs.msdn.com/joshpoley/pages/errors-007-facility-win32.aspx)

[.NET 3.5 ActiveX dll InteropServices.COMException](https://stackoverflow.com/questions/1539205/net-3-5-activex-dll-interopservices-comexception)`

# javascript - 在 OpenLayers 中创建复杂的特征/向量

> ID：12375096
> 
> 赞同：1
> 
> 时间：2012-09-11T17:42:35.813
> 
> 标签：javascript, openlayers

我能找到的与我的问题最接近的帖子是[OpenLayers 中的 Compound complex feature](https://stackoverflow.com/questions/10572786/compound-complex-feature-in-openlayers)。唉，没有人回答。我非常精通 JavaScript，但对 OpenLayers 及其复杂的 API 相对较新。在此之前我已经创建了复杂的控件。但是，这一次我希望创建一个复杂的特征/向量。它的总体思路是该功能具有一个显示图标（例如，一个图钉）作为主要组件。该组件是交互式的并响应用户操作（选择、拖动等）。选择后，我希望渲染与该组件逻辑相关的其他向量（圆形、矩形等）。这些 Vectors 也会监听用户交互。

以前，在 Controller 的情况下，我能够使用其他控制器的源来了解开发方向并成功进行。恕我直言，使用特征/向量有点困难。

我首先使用`OpenLayers.Feature.Vector.CustomClass = OpenLayers.Class( OpenLayers.Feature.Vector, {...});`代码扩展 OpenLayers.Feature.Vector。构造函数将特定参数用于我的特征，创建几个几何对象（点、多边形、线），将它们添加到 OpenLayers.Geometry.Collection，并调用 OpenLayers.Feature.Vector 构造函数并将集合传递给它。

不幸的是，我意识到为了显示一个图标，我不能只使用 Geometry.Point 而是需要为它创建一个 Vector。那种让我失望的原因是我将在我的自定义 Vector 对象中创建 Vectors。一般来说，这并没有什么不寻常的，但我想知道这是否是 OpenLayers 中的工作方式。就像我提到的那样，我发现 API 文档不是很有用，因为它只是说明了一般函数头/简要说明。

如果有人能指出我正确的方向，我将不胜感激（除了基本的“使用自定义图像创建标记”类型之外，还没有在网上找到很多教程）。如果描述不清楚，请告诉我，我会尽力提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:40:44.147

过去我不得不解决类似的问题。使用 OpenLayers（或与此相关的任何映射工具）的最佳方法通常是将图层分成要素类，每个要素类代表点、线或多边形的集合。创建所有层后，您可以创建一个[选择控件，用于侦听每个层上的事件](http://openlayers.org/dev/examples/select-feature-multilayer.html)并做出适当的响应。

如果您需要在逻辑上将这些特征的子集关联在一起，您可以在外部或在父特征的`attributes`对象中存储对这些特征的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-11T14:14:52.200

我的解决方案是提供 FeatureCollection geojson 作为复杂/复合类型数据。在我的例子中，FeatureCollection 由许多 Point 特征和一个 LineString 特征组成。Openlayers 可以使用这个 geojson：

```
var features = (new ol.format.GeoJSON()).readFeatures(geojson) 
```

...并提供功能集合。然后，您可以遍历这些特征并为每个特征提供一些统一的属性/对象。然后，当您定义事件处理程序（悬停或选择/单击）时，访问统一属性以获取任何其他相关功能。

# android - 无中断纵横比的全屏视频

> ID：12375102
> 
> 赞同：6
> 
> 时间：2012-09-11T17:43:01.697
> 
> 标签：android, fullscreen, android-videoview, android-video-player

在我的程序中，我试图全屏播放视频但不破坏播放视频的宽高比，

**在android默认播放器中，当您按下它时，它在左上角有一个按钮，它将视频切换到完整视图，而不会导致视频失真，并*保持纵横比***：

如下图：

![在此处输入图像描述](../Images/9b6a6a50cfbbb848fa4d776e79a2a063.png)

我尝试使用以下代码获取全屏视频：

```
 <?xml version="1.0" encoding="utf-8"?> 
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
       android:layout_height="fill_parent" > 
     <VideoView android:id="@+id/myvideoview" 
         android:layout_width="fill_parent" 
         android:layout_alignParentRight="true"
          android:layout_alignParentLeft="true" 
         android:layout_alignParentTop="true"
          android:layout_alignParentBottom="true" 
         android:layout_height="fill_parent"> 
      </VideoView> 
   </RelativeLayout> 
```

上面的代码导致全屏视频**但**没有保持 Aspest Ratio

请任何人建议我如何在不破坏纵横比的情况下获得全屏视频。

我的视频存储在 App 资源文件夹的 raw 文件夹中。

**请提供完整的工作代码**。

我在这里和谷歌搜索了很多，但我找不到我的目标，

在 stackoverflow 中找到的另一篇文章具有相同的问题，但在此链接中没有正确答案：

[全屏 videoview 无需拉伸视频](https://stackoverflow.com/questions/12211837/full-screen-videoview-without-stretching-the-video#comment16405010_12211837)。

我使用 videoview 在我的应用程序中显示我的视频，如下所示：

```
 public class Video extends Activity {   
    private VideoView videoview;    
      @Override  
         public void onCreate(Bundle icicle) {  
              super.onCreate(icicle);      
               setContentView(R.layout.main);   
   videoview = (VideoView) findViewById(R.id.count_videoview);  
   videoview.setVideoURI(Uri.parse("android.resource://" + getPackageName()
          +"/"+R.raw.first_video));    
   videoview.setMediaController(new MediaController(this));    
   videoview.requestFocus();    
   videoview.start();   
                 }
          } 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:09:51.277

获取原始视频的高度和宽度。
获取屏幕的高度和宽度（在当前方向）。

```
float ratioWidth = screenWidth / videoWidth;
float ratioHeight = screenHeight / videoHeight;
float fullWidth;
float fullHeight;
if (ratioWidth < ratioHeight ) {  
    fullWidth = videoWidth * ratioWidth;
    fullHeight = videoHeight * ratioWidth;
} else {
    fullWidth = videoWidth * ratioHeight;
    fullHeight = videoHeight * ratioHeight;
} 
```

设置`fullWidth`和`fullHeight`到`VideoView`。

# android - Android中的任何类似jQuery parseJSON的东西？

> ID：12375104
> 
> 赞同：0
> 
> 时间：2012-09-11T17:43:10.243
> 
> 标签：android, json, parsing

Web 服务返回一个 JSON 字符串，例如

```
"[{\"Id\":\"1\",\"Name\":\"Peter\"}]" 
```

在 jQuery 中，我可以使用`$.parseJSON`它来将其转换为有效的 JSON 字符串

```
[{"Id":"1","Name":"Peter"}] 
```

Android中有类似的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:51:40.963

Android 带有 org.json 包来解析 json，但还有其他库可能更容易转换为 java 对象：

自带安卓sdk：

*   [org.json](http://developer.android.com/reference/org/json/package-summary.html)

其他可下载的软件包：

*   [GSON](http://sites.google.com/site/gson/gson-user-guide)
*   [杰克逊](http://wiki.fasterxml.com/JacksonInFiveMinutes)

# java - 如何确保 Java 对象的类型为 Map

> ID：12375106
> 
> 赞同：3
> 
> 时间：2012-09-11T17:43:20.390
> 
> 标签：java, collections, casting, type-erasure

简短、一目了然的问题摘要 (TLDR)：我如何确保 Java`Object`是 type 的`Map<String, Object>`？

* * *

我有一个 YAML 文档作为`String`. 我使用来自 a 的 SnakeYAML 创建 YAML，`Map<String, Object>`但在我再次读回之前它可能会被篡改。我不想诉诸 PKI 签名，只要看看 YAML 表示是否仍然是 a 就足够了`Map<String, Object>`，即使`Object`值可能到处都是。我关心*类型*，而不是内容。

那么：我如何确保 an`Object`确实是 type `Map<String, Object>`？

这是我试图规避类型擦除的各种 SuppressWarnings 的方法：

```
Object yamlObject = yaml.load(someYamlDocumentAsString);
// I only want to proceed if this YAML object is a Map<String, Object>
if ((yamlObject instanceof Map<?, ?>)) {
  Map<?, ?> propertyMap = (Map<?, ?>) yamlObject;
  for (Entry<?, ?> propertyEntry : propertyMap.entrySet()) {
    // I am checking each key and throwing if it's not a "String"
    Object propertyKey = propertyEntry.getKey();
    if (!(propertyKey instanceof CharSequence)) {
      throw new BananaException("FIXME"); // FIXME
    }
  }
} else {
  throw new CoconutException("FIXME"); // FIXME
} 
```

## 以上可以做得更好吗？

顺便说一句，我不认为 Java 有类似于 C# 的`as`关键字的东西（来自 MSDN：`as`运算符就像一个强制转换操作。但是，如果转换是不可能的，那么 as 返回 null 而不是引发异常。）？

* * *

在上面的代码之后，我可以安全地抑制警告：

```
@SuppressWarnings("unchecked")
Map<String, Object> aBeautifulAndCozyMap = (Map<String, Object>) propertyMap; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:44:59.967

由于类型擦除，信息在运行时是未知的，所以除了`instanceof`,`getClass().getName()`或`getDeclaredField("...").getGenericType().getActualTypeArguments()`things 之外没有其他方法可以检查它。

在我看来，您应该继续使用它，`instanceof`因为它易于阅读，并且其他开发人员很容易理解您想要做什么。

*PS：我喜欢例外;-)*

# android - 谷歌Playstore有自动完成API吗？

> ID：12375108
> 
> 赞同：0
> 
> 时间：2012-09-11T17:43:38.367
> 
> 标签：android, api, autocomplete

谷歌Playstore有自动完成API吗？我搜索了谷歌，但没有任何关于该 API 的参考。我检查了我的 google 的 api 控制台，但我发现的唯一东西是“Google Play Android Developer API”，根据 google，“该 API 允许您检查或取消用户订阅购买的状态。” 我需要这个用于我正在设计的 android 应用程序。

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-12T13:08:17.417

使用此链接[https://market.android.com/suggest/SuggRequest?json=1&c=0&query=abc&hl=en&gl=US&callback= *callbacks* ._xxx](https://market.android.com/suggest/SuggRequest?json=1&c=0&query=abc&hl=en&gl=US&callback=_callbacks_._xxx) 并将“abc”替换为您的种子关键字。示例：“cat”或“cat ab”、“cat ac”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T17:45:28.067

有非官方的[Android Market API](http://code.google.com/p/android-market-api/)，Google 不支持。除此之外，没有，没有其他 API，也没有任何官方 API。

因此，要回答您的问题，不，没有自动完成 API。您也许可以 HTTP 请求市场的在线版本，但这充其量是困难的（请求、解析、......呃......）。

# jakarta-ee - 在 GlassFish / EclipseLink 中重新启动 JDBC 资源

> ID：12375109
> 
> 赞同：1
> 
> 时间：2012-09-11T17:43:41.090
> 
> 标签：jakarta-ee, jpa, glassfish, eclipselink

有时我遇到需要“重新启动”的情况`PersistenceContext`，但我发现的唯一方法是重新启动 GlassFish 的域，这是我想避免的。

例如，今天我无法部署应用程序，因为一个`Enumerated`属性在 db 中有一个值在枚举值中不存在，并且 JPA 给出了错误：

```
no conversion value provided for the value [foo] in field [bar] 
```

我决定重新定义 db 中的字段`schema`。但是在这个改变之后，我找不到一种方法来做出`GlassFish`/`EclipseLink`意识到这个改变。

是否有避免重新启动域的 JDBC-resource-restart 选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:05:39.640

You could redeploy the application. (you would need to change the code anyway, would you not?)

If using an application managed persistence unit ensure you close your EntityManagerFactory when undeploying.

# configuration - 从节点上的hadoop根目录在哪里指定？

> ID：12375111
> 
> 赞同：4
> 
> 时间：2012-09-11T17:43:46.697
> 
> 标签：configuration, hadoop

我需要设置一个带有 1和 2的`hadoop/hdfs`集群。我知道列出机器数据节点正在运行的文件。但是如何指定从节点上本地安装的位置？还从那里开始的用户帐户？`namenode``datanode``conf/slaves``hadoop/hdfs``hdfs`

编辑：在日志文件中，我发现以下错误，当我试图`start-dfs.sh`

> 错误 org.apache.hadoop.hdfs.server.namenode.NameNode：java.lang.IllegalArgumentException：不包含有效的主机：端口权限：file:///

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:39:09.913

预计用户与主节点上的用户相同。可以通过更改 中的`dfs.data.dir`节点来修改实际数据的位置`hadoop-site.xml`。

# python - 企业 Gmail 中的 IMAP

> ID：12375113
> 
> 赞同：1
> 
> 时间：2012-09-11T17:43:54.570
> 
> 标签：python, gmail, gmail-imap, imaplib

我正在尝试使用 imaplib 和 Python 下载电子邮件。我已经使用我自己的电子邮件帐户测试了脚本，但我无法为我的公司 gmail 执行此操作（我不知道公司 gmail 是如何工作的，但我去 gmail.companyname.com 登录）。当我尝试使用 imaplib.IMAP4_SSL("imap.gmail.companyname.com", 993) 运行脚本时，我收到错误 gaierror name or service not known。有人知道如何使用 imaplib 连接到我公司的 gmail 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:44:56.147

IMAP 服务器仍然是 imap.gmail.com - 试试看？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:00:21.567

如果您是域管理员，您可以将我的库与 OAuth2 服务帐户一起使用。如果您是个人用户，您可能想查看我的 oAuth2WebServerFlow 代码。这应该允许您使用 OAuth（而不是密码）来访问 GMail 的 IMAP。

[https://github.com/richieforeman/oauth2gmail](https://github.com/richieforeman/oauth2gmail)

# php - 从数据库中搜索部分单词

> ID：12375118
> 
> 赞同：1
> 
> 时间：2012-09-11T17:44:48.693
> 
> 标签：php, mysql, codeigniter, search

我有一个简单的 mysql 搜索功能，可以搜索我想扩展的条目标题，以便能够搜索部分单词......

例如，假设我搜索：取消

目前它将返回标题中带有取消单词的任何内容。但理想情况下，它还应该返回标题中带有取消字样的任何内容。

这是我到目前为止所拥有的...

```
function search_title_body($q){
    $q = '+' . $q;
    $q = str_replace(' ', '+', $q);
    $q = "+(".$q.")";

    $query = "SELECT *,
              MATCH(title) AGAINST('$q' IN BOOLEAN MODE) AS score
              FROM results
              WHERE (MATCH(title) AGAINST('$q' IN BOOLEAN MODE))
              AND (published = 1)
              ORDER BY score DESC";

    $query = $this->db->query($query);

    $results = array();

    foreach ($query->result() as $row){
        $results[] = $row;
    }

    return $results;
} 
```

谁能指出我正确的方向？非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:48:58.587

关于什么

```
SELECT *,
MATCH(title) AGAINST('$q' IN BOOLEAN MODE) AS score
FROM results
WHERE title LIKE '%$q%'
AND published = 1
ORDER BY score DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:49:32.010

我认为您正在寻找的是 LIKE 或 ILIKE 功能

```
$q = "somestring";
 $query = "SELECT *,              
          FROM results
          WHERE title ILIKE '%$q%'
          AND (published = 1)
          ORDER BY score DESC"; 
```

还有为什么要创建一个匹配列，num_rows 会给你然后点击数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:49:53.117

您可以使用 like 语句构建您的 $q 以获得这样的查询

```
SELECT * FROM results
WHERE title like '%cancel%' OR title like '%otherword%'
AND (published = 1)
ORDER BY score DESC 
```

# sql - 将 null 替换为零（查询）

> ID：12375121
> 
> 赞同：0
> 
> 时间：2012-09-11T17:44:59.993
> 
> 标签：sql

在我的表中，有 6 列，

```
Id| Car Plate| Username| Color| Year| Rent| 
```

最后一列，数据类型为位但值为空。如何将 null 转换为 0 ？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T17:46:36.047

此查询适用于 T-SQL：

```
UPDATE [yourTableName]
SET Rent = 0
WHERE Rent IS NULL 
```

这会将所有rent 为NULL 的列的Rent 列设置为0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:46:21.533

根据哪个数据库系统，您可以使用[IsNull](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://msdn.microsoft.com/en-us/library/ms184325.aspx&ei=9XhPUMSnG-KxywGNnIFg&usg=AFQjCNEJz08_K6gcpUoI1jPSlAa9ncPOAQ)或[COALESCE](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://msdn.microsoft.com/en-us/library/ms190349.aspx&ei=BXlPUJrAEOPnyAGF6oD4BQ&usg=AFQjCNHvQdwGXJ1jUeQWpIDU7p30Vw-N0Q)

IsNull 示例：

```
Select Id, Car Plate, Username, Color, Year, IsNull(  Rent , Convert(bit, 0)) AS Rent 
```

（链接取自 T-SQL for SQL Server。其他数据库系统可能有不同的语法。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T05:58:43.873

您还可以示例：

选择 ISNULL(DC_Requisition.id,0) 作为 RequisitionId，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-20T08:30:06.827

试试这个代码：

```
SELECT Id, Car Plate, Username, Color, Year,NVL(Rent,0) FROM TABLE; 
```

NVL 函数使用该`Rent`值（如果存在），否则显示 0。

# android - 各种设备上奇怪的 canvas.getMatrix 值

> ID：12375122
> 
> 赞同：1
> 
> 时间：2012-09-11T17:45:16.827
> 
> 标签：android, canvas

我的 Android 应用程序中的 canvas.getMatrix 值有一个奇怪的问题。对于我拥有的自定义视图（我的类，扩展 ImageView），getMatrix() 在“全新”视图上的结果在两个设备（和两个操作系统）上是不同的。各种对我来说没有意义的方式（例如不依赖于维度）。

*   我的视图在布局上排在第二位，仅次于 64dp，在两种设备（Nexus7 和 HTC Desire）上都映射到 96px。
*   在 Nexus 上，初始 matrixFloats[Matrix.MTRANS_Y] 结果为 0（然后当我开始滚动和缩放时它当然会改变）。
*   在 HTC Desire（和 Kindle Fire）上 - 起始值为 96。

Canvas Matrix 在不同版本的 Android 之间有什么不同吗？

感谢您的任何建议 - 希望有人熟悉这个问题。

PS。matrixFloats 是一个 float[9] 数组，它是 Matrix getValues(float[]) 方法的结果。

回答问题，并分享我的“肮脏”解决方案。

1.  这是我在 onDraw() 方法中从画布中取出的 canvas.getMatrix() 矩阵。
2.  为了解决这个问题（我需要这个矩阵来了解我的 ImageView 上图像的哪个区域被点击），方法是添加一个我在开始时根据矩阵的初始状态设置的参数。

# objective-c - arc，强实例变量和弱实例变量

> ID：12375123
> 
> 赞同：3
> 
> 时间：2012-09-11T17:45:18.183
> 
> 标签：objective-c, automatic-ref-counting

只是想完全理解ARC。

```
MyView *testView = [[MyView alloc] init];

__weak MyView *weakView = testView;

[weakView addObserver:self forKeyPath:@"alpha" options:0 context:nil];

testView = nil;

if(weakView) {
     NSLog(@"WeakView exists!");
} 
```

我不明白为什么我的 NSLog 语句正在打印。由于weakView是对testView的弱引用，一旦testView设置为nil，它不应该指向nil吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T18:15:15.303

该`addObserver`方法似乎`retain`和`autorelease`视图。这就是为什么在初始引用被清零后弱引用没有被归零的原因。只需在调试器中运行此代码：

```
UIView *testView = [[UIView alloc] init];

__weak UIView *weakView = testView;

@autoreleasepool {
    [weakView addObserver:self forKeyPath:@"alpha" options:0 context:nil];
}

testView = nil;

if(weakView) {
    NSLog(@"WeakView exists!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:15:46.347

它可能会也可能不会。当对象被释放时它变为 nil。您设置为 nil 的事实`testView`仅意味着您正在释放该对象。但是不能保证该对象会立即被释放。

这里的问题是您假设保留计数的给定值。您认为 alloc+init 序列为您提供了一个计数为 1 的对象，因此当您设置`testView`为 nil 时，它变为 0 并且该对象被释放。

您**永远不**应该假设给定的保留计数。您应该始终考虑相对保留计数。alloc+init 序列返回一个 +1 对象（不是 1 而是 +1）。当您将 set 设置`testView`为 nil 时，ARC 调用`release`并将其转换为 +0 对象（不是 0，而是 +0）。这意味着您无法保证它仍然可以访问。您的弱参考可能有效也可能无效。

实际上发生的事情是，在 init 方法（或父级的链式 init 方法）内部有一个调用，`autorelease`因此您的对象的引用计数还没有 0。它将在下一个游泳池排水管。

编辑：

亚当在他的回复中所说的也是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:25:32.367

你`testView`是局部变量，ARC下的局部变量没有精确的生命周期语义。阅读 6.1：

[http://clang.llvm.org/docs/AutomaticReferenceCounting.html#optimization.precise](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#optimization.precise)

这是什么意思？这意味着编译器可以做它想做的任何事情。

`testView`当前实现在方法结束时释放对象。但是如果优化器（现在，未来，......）决定生命周期结束并且它会更快地释放它（在方法结束之前）怎么办？

换句话说，您正试图依赖未定义的行为。不要这样做，不要依赖它。在这种情况下，您永远不知道对象何时真正释放 = 弱引用归零。

# excel - 子程序 VBA 中的 ReDim

> ID：12375125
> 
> 赞同：0
> 
> 时间：2012-09-11T17:45:26.990
> 
> 标签：excel, vba

```
Sub testCov()
    Rng2 = Sheets("20 Asset Model").Range("b3:f48")
    Dim covMatrix() As Variant
    ReDim covMatrix(1 To Rng2.Columns.Count, 1 To Rng2.Columns.Count)
    Call constructCovMatrix(Rng2, covMatrix)
    MsgBox (covMatrix)
End Sub

Sub constructCovMatrix(rng, ByRef covMatrix)
    '@rng The Range of the return series.

    Dim i As Integer
    Dim j As Integer
    For i = 1 To rng.Columns.Count
        For j = 1 To rng.Columns.Count
            covMatrix(i, j) = Application.WorksheetFunction.Covar(rng.Columns(i), rng.Columns(j))
        Next
    Next
End Sub 
```

代码停在 ReDim 行，说对象丢失。为什么是这样？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T17:53:55.673

试试这个把你的范围设置为一个范围对象来声明它：（内嵌评论）

```
Sub testCov()

    Dim Rng2 As Range '- Declare variable
    Set Rng2 = Sheets("20 Asset Model").Range("b3:f48") '-Set range
    Dim covMatrix() As Variant
    ReDim covMatrix(1 To Rng2.Columns.Count, 1 To Rng2.Columns.Count)
    Call constructCovMatrix(Rng2, covMatrix)
    MsgBox (covMatrix)

    Set Rng2 = Nothing '- Cleanup anytime 'Set' is used
End Sub 
```

**笔记：**

您可能想去 VBA 编辑器的设置和单击工具 > 选项 > 声明变量声明 > 选中

这将确保您需要声明所有变量。

照原样，上面的代码没有声明`Rng2`为范围。因此，当 Excel 第一次看到该名称`Rng2`时，它会创建一个 Variant 类型变量并将其设置为等于第一行中工作表的范围。Excel 注意到这`Sheets("20 Asset Model").Range("b3:f48")`是一个单元格数组，并且它将变量`Rng2`视为数组类型变量，以供您的其余代码使用。假设你想使用命名`Rng2`为范围的变量，我们可以这样声明它并使用`Set`命令来分配它。

当您不声明变量类型时，很容易发生这样的混淆。

# excel - Excel VBA宏：定位列中的第一个空单元格并自动填充它

> ID：12375127
> 
> 赞同：5
> 
> 时间：2012-09-11T17:45:28.390
> 
> 标签：excel, excel-2003, vba

我在电子表格中有两列，列 (A) 和列 (B)。

列 (A) 包含从查询中提取的名称（例如 Brian、Bob、Bill 等），列 (B) 包含三种状态之一（已分配、进行中或待定）。

但是，此查询有时会针对没有名称的状态拉出一些显示“已分配”的行项目，因此表示列 (A) 中名称的相应单元格是空白的。所以我用“未知”手动填充那些空单元格。

我想要做的是创建一个宏来查找列 (A) 中的每个空单元格，如果其右侧的单元格包含单词“Assinged”，则填写单词“Unknown”。

**所以条件是：**

1.  列 (A) 中的空白单元格

2.  右侧对应的单元格（B 列）包含单词“assinged”

**这是我的代码：**

```
Private Sub CommandButton2_Click()

    For Each cell In Columns("A")
        If ActiveCell.Value = Empty And ActiveCell.Offset(0, 1).Value = "Assigned" Then ActiveCell.Value = "Unknown"
    Next cell

End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T21:52:45.987

此处无需循环，利用 excel 内置方法执行得更快。

```
Private Sub CommandButton2_Click()

    Application.ScreenUpdating = False

    With ActiveSheet.UsedRange
        .AutoFilter Field:=1, Criteria1:=""
        .AutoFilter Field:=2, Criteria1:="Assigned"

        If WorksheetFunction.CountBlank(.Columns(1)) > 0 Then
            If .Columns(1).SpecialCells(xlCellTypeVisible).Count > 1 Then
                .Columns(1).SpecialCells(xlCellTypeBlanks).Value = "Unknown"
            End If
        End If

        .AutoFilter
    End With

    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:56:53.563

欢迎来到 SO。

试试这个代码。它会工作得更快一些，应该可以得到你想要的。

**更新**：使代码更加防弹！

```
Private Sub CommandButton2_Click()

Dim cel As Range, rngFind As Range, rngFilter As Range
Dim wks As Worksheet

Set wks = Sheets("sheet1")

With wks

    '-> Error check to make sure "blanks" exist
    Set rngFind = .Range("A1:A" & .Range("B" & Rows.Count).End(xlUp).Row).Find("", lookat:=xlWhole)

    If Not rngFind Is Nothing Then

        Set rngFilter = .Range("A1:B" & .Range("B" & Rows.Count).End(xlUp).Row)

        rngFilter.AutoFilter 1, "="

        '-> Error check to make sure "assigned" exists for blank cells
        Set rngFind = .Columns("B:B").SpecialCells(xlCellTypeVisible).Find("Assigned", lookat:=xlWhole)

        If Not rngFind Is Nothing Then
        '-> okay, it exists. filter and loop through cells

            rngFilter.AutoFilter 2, "Assigned"

            Set rngFind = Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(1)).SpecialCells(xlCellTypeVisible)

            For Each cel In rngFind

                If cel.Offset(0, 1).Value = "Assigned" Then cel.Value = "Unknown"

            Next cel

        End If

    End If

End With

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T19:13:02.697

如果你只需要这样做几次，你可以

1.  将您使用的范围格式化为表格
2.  在 A 列过滤器上仅显示“（空白）”
3.  在 B 列过滤器上仅显示“assinged”
4.  选择 B 列中的所有结果单元格
5.  按`alt`+`:`仅选择可见单元格
6.  按`F2`
7.  输入“未知”
8.  按`ctrl`+`enter`

您的不良数据现在应该是好的！

显然这是一个非基于 vba 的解决方案，但如果您可以避免编码，它可能是最好的。

# objective-c - 试图覆盖特定地址的内存

> ID：12375133
> 
> 赞同：1
> 
> 时间：2012-09-11T17:45:47.810
> 
> 标签：objective-c, memory, pointers, osx-mountain-lion, xcode4.4

我意识到试图篡改来自另一个应用程序或操作系统的内存被认为是糟糕的编程。

但是，我不懂 Objective C，**我需要从一个固定的内存地址读取 25 个字节到一个变量中，然后用不同的 set 替换这 25 个字节**。

我对指针以及所有 * 和 & 和 @ 符号的含义都很糟糕。

我正在使用 XCode 4.4.1 在 Mac OS X 10.8 (Mountain Lion) 中尝试此操作。

我试过这样的事情：

```
char *myPtr = (char*) 0x7FFA8000 // just an example, not the real memory address
char myString[] = *myPtr 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:47:44.630

如果是 25 个字符，你可以这样做：

```
char *myPtr = (char*) 0x7FFA8000; // pointer to arbitrary memory address
char myString[26];                // buffer to copy data to
memcpy(myString, myPtr, 25);      // do the copy
myString[25] = '\0';              // make sure string is terminated 
```

写回任意地址：

```
char *myPtr = (char*) 0x7FFA8000; // pointer to arbitrary memory address
char myString[26];                // buffer to copy data from
memcpy(myPtr, myString, 25);      // do the copy 
```

请注意，在这两种情况下，您只是在访问自己进程的虚拟地址空间中的内存——您不是在读取/写入操作系统或其他进程的内存。

# django - 一页中有两个视图-> ValueError: int() 的无效文字，基数为 10

> ID：12375136
> 
> 赞同：0
> 
> 时间：2012-09-11T17:46:03.007
> 
> 标签：django, django-models, django-views

[这是一个页面中的两个视图](https://stackoverflow.com/questions/12373033/two-views-in-a-django-page)的延续

我已将表单视图和数据库访问视图放入单个网页。目前表单视图不起作用并给出上述错误。

给出错误的行是`updated_event = event.signed_up.remove(request.POST.get('for_removal'))`

这是我的意见.py

```
def ShowSpecificEvent(request, eventslug):
event   = Event.objects.get(slug=eventslug)
form    = RemovalForm(request.POST or None)
context = {'event': event, 'form': form,}
if request.method == 'POST':
    if form.is_valid():
        updated_event = event.signed_up.remove(request.POST.get('for_removal'))
        updated_event.save()
        return HttpResponseRedirect('base_user_removed.html')
    else:   
        return render_to_response('base_specific_event.html', context, context_instance=RequestContext(request))
return render_to_response('base_specific_event.html', context, context_instance=RequestContext(request)) 
```

这是我的 models.py，其中 for_removal 字段正在引用

```
signed_up       = models.ManyToManyField(User, related_name='signed_up', verbose_name='Already signed-up', blank=True, null=True) 
```

这是我的 forms.py 提供输入

```
class RemovalForm(forms.Form):
for_removal = forms.CharField(label='Username of attendee to be removed')

def clean_removalform(self):
    for_removal = self.cleaned_data['for_removal'] 
```

提前致谢！（PS我感觉跟[这个](https://stackoverflow.com/questions/3487010/invalid-literal-for-int-with-base-10-but-cant-see-why-it-is-accessing-an-i)或[那个有关](https://stackoverflow.com/questions/11387424/invalid-literal-for-int-with-base-10-on-python-django)

追溯：

```
 Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/Sky/Documents/Projects/sumc/sumc/events/views.py" in ShowSpecificEvent
  27\.           x = event.signed_up.get(signed_up = form.cleaned_data['for_removal'])
File "/Library/Python/2.7/site-packages/django/db/models/manager.py" in get
  131\.         return self.get_query_set().get(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in get
  358\.         clone = self.filter(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in filter
  621\.         return self._filter_or_exclude(False, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in _filter_or_exclude
  639\.             clone.query.add_q(Q(*args, **kwargs))
File "/Library/Python/2.7/site-packages/django/db/models/sql/query.py" in add_q
  1250\.                             can_reuse=used_aliases, force_having=force_having)
File "/Library/Python/2.7/site-packages/django/db/models/sql/query.py" in add_filter
  1185\.                 connector)
File "/Library/Python/2.7/site-packages/django/db/models/sql/where.py" in add
  69\.             value = obj.prepare(lookup_type, value)
File "/Library/Python/2.7/site-packages/django/db/models/sql/where.py" in prepare
  320\.             return self.field.get_prep_lookup(lookup_type, value)
File "/Library/Python/2.7/site-packages/django/db/models/fields/related.py" in get_prep_lookup
  137\.             return self._pk_trace(value, 'get_prep_lookup', lookup_type)
File "/Library/Python/2.7/site-packages/django/db/models/fields/related.py" in _pk_trace
  210\.         v = getattr(field, prep_func)(lookup_type, v, **kwargs)
File "/Library/Python/2.7/site-packages/django/db/models/fields/__init__.py" in get_prep_lookup
  310\.             return self.get_prep_value(value)
File "/Library/Python/2.7/site-packages/django/db/models/fields/__init__.py" in get_prep_value
  537\.         return int(value)

Exception Type: ValueError at /event/cornwall2012/
Exception Value: invalid literal for int() with base 10: 'a_technicolor_skye' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:31:10.457

通过手动访问数据库中的用户并放入 remove() 方法，我有点破解了它：

```
def ShowSpecificEvent(request, eventslug):
event   = Event.objects.get(slug=eventslug)
form    = RemovalForm(request.POST or None)
context = {'event': event, 'form': form,}
if request.method == 'POST':
    if form.is_valid():
        x = event.signed_up.get(username = form.cleaned_data['for_removal'],)
        event.signed_up.remove(x)
        event.save()
        return render_to_response('base_specific_event.html', context, context_instance=RequestContext(request))
    else:   
        return render_to_response('base_specific_event.html', context, context_instance=RequestContext(request))
return render_to_response('base_specific_event.html', context, context_instance=RequestContext(request)) 
```

但是，有谁知道更好的方法来做到这一点？

# excel - 如何按日期排序excel？

> ID：12375138
> 
> 赞同：9
> 
> 时间：2012-09-11T17:46:15.540
> 
> 标签：excel

这是最荒谬的事情，但我无法在 excel 中按日期排序。我有一列我输入的日期，格式如下

```
14/6/2012
15/12/2012
16/2/2012
17/9/2012
17/10/2012
17/11/2012 
```

诸如此类。但是，当我尝试对它们进行排序时，它仅根据第一个数字进行排序，如上所示。当我突出显示数据时，在 excel 窗口的顶部，它不再说一般，而是说日期，所以我假设 excel 知道它们是日期。但是，如果我去排序和过滤以尝试选择几个不同的级别进行排序，当我尝试按日期排序时，它会显示从 A 到 Z 排序，这似乎很奇怪。然后，当我将日期列复制并粘贴到一个新工作表中以尝试找出问题所在时，其中几个条目变成了哈希值，只是 ######，但只有少数条目做了那和所有这些都组合在一起。

有谁知道可能出了什么问题？这简直让我发疯，这应该是最简单的事情。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2015-06-04T07:03:33.540

1.  选择整列
2.  右键单击 -> 格式化单元格... -> 数字 -> 类别：日期 -> 确定
3.  Data -> Text to Columns -> 选择 Delimited -> Next -> 在您的情况下选择 Delimiters 无关紧要 -> Next -> 选择 Date: DMY -> Finish

现在您应该可以按此列从最旧到最新或从最新到最旧进行排序

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T17:56:35.453

哈希只是因为您的列宽不足以显示“数字”。

关于排序，您应该查看系统区域和语言的配置方式。对于美国地区，Excel 日期输入应为“5/17/2012”而不是“17/05/2012”（2012 年 5 月 17 日）。

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T17:58:34.047

以下是将整个列转换为`date`格式值的步骤。

在日期列的右侧添加一列。右键单击新列并选择`Format`。将格式设置为`date`.

突出显示整个旧日期列并复制它。突出显示新列的顶部单元格并选择`Paste Special`，然后只粘贴`values`。

然后，您可以删除旧列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-21T04:13:59.483

这真的很容易。突出显示 DATE 列并确保其在 Excel 中设置为日期。突出显示您要更改的所有内容，然后转到 [DATA]>[SORT]>[COLUMN] 并设置按日期排序。希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-21T05:46:56.513

这里的问题是 ms excel 无法识别我们作为日期输入的内容，但在菜单栏中显示为日期。选择单元格并输入“=istext(cell ad)”，然后您可以看到它“TRUE”，因此您的日期 ms excel 仍然认为是文本，这就是它自动向左对齐的原因。所以我们应该改变文本的类型。改变方法有很多种。但我认为这太容易了，现在就开始吧。

选择单元格->在菜单栏中转到数据->然后选择“文本到列”对象->在第一个窗口中选择“分隔”，然后单击下一步->删除第二个窗口中的所有刻度并点击下一步按钮->最后一个窗口选择“日期”并选择您喜欢的日期格式，然后点击完成按钮。（然后日期看起来像 2012 年 3 月 14 日星期三）然后您可以使用以前使用的公式使用并检查我们的日期是否在 excel 中被识别。然后，您可以根据需要进行排序。谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-10T09:57:10.973

如果您不想格式化一个单独的列并粘贴正常的日期 - 执行以下操作 - 在数据的最左侧添加一列并恢复您的日期，即如果您已经输入的日期是例如 11.5。 16 输入新的左侧列 160511 （注意只有数字，没有句号。当你现在排序时，不会像你遇到的那样混淆。我使用这种方法已经 30 多年了，它从来没有让我失望. 由于您已按年、月和日放置日期，因此如果您想要或需要打印完整的列表，则无需包含该列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-04T21:43:22.053

例如 1976 年 8 月 12 日。复制您的日期列。突出显示复制的列，然后单击数据> 文本到列> 分隔> 下一步。在分隔符列中选中“其他”并输入 /，然后单击下一步并完成。您将有 3 列，第一列将是 1/8。突出显示它并单击“数字”部分中的逗号，它将为您提供月份为 8.00，因此然后通过单击“主页/数字”中的逗号来减少它，您现在将在第一列中有 8，在第二列中有 18 和1976 年在第三栏。在右侧的第一个空单元格中，使用连接函数并省略年份列。如果您的月份是 A 列，日期是 B 列，年份是 C 列，它将如下所示：=concatenate(A2,"/",B2) 并按 Enter。它看起来像 8/18，但是，当您单击单元格时，您 将看到连接公式。突出显示单元格，然后复制并粘贴特殊值。现在您可以按日期排序。当你掌握它的窍门时，它真的很快。

# r - 来自`mids`对象的ggplot中的条形图

> ID：12375142
> 
> 赞同：1
> 
> 时间：2012-09-11T17:46:39.877
> 
> 标签：r, ggplot2, melt, r-mice

尽管已经使用了 ggplot 几次，但我真的很难在这个问题上取得任何进展。我想如果不尝试使用 ggplot 的可恶尝试，最容易解释我想要做什么，以下内容也很丑陋，但这是我目前能做到的最好的:(

```
require(mice)
impute <- mice(nhanes, seed = 101)

counts <- table(nhanes$hyp)
barplot(counts, main="hyp", xlab="observed")

x11()
counts <- table(complete(impute,1)$hyp)
barplot(counts, main="hyp", xlab="Imputation 1")

x11()
counts <- table(complete(impute,2)$hyp)
barplot(counts, main="hyp", xlab="Imputation 2")

x11()
counts <- table(complete(impute,3)$hyp)
barplot(counts, main="hyp", xlab="Imputation 3")

x11()
counts <- table(complete(impute,4)$hyp)
barplot(counts, main="hyp", xlab="Imputation 4")

x11()
counts <- table(complete(impute,5)$hyp)
barplot(counts, main="hyp", xlab="Imputation 5") 
```

我想创建一个漂亮的图表网格，在 ggplot 中显示这些条形图 - 例如，1 行 6，在 y 轴上都具有相同的比例，以便可以轻松比较它们。

我想我应该使用`ldt <-complete(impute,"long", include=TRUE)`then`melt(ldt, c(".imp",".id","hyp"))`但我就是不知道在那之后如何调用 ggplot :(

请注意，我的真实数据中有许多不同的变量，这仅适用于分类变量。我在想我可以制作一个函数，然后使用`sapply`，但只能在分类列上运行？但我不知道该怎么做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:01:31.730

几点

1.  您需要有`hyp`或有问题的变量作为一个因素。`NA`在执行此操作之前删除这些值是最简单的。
2.  `facet_wrap`（一个变量）或`facet_grid`（一个或多个变量）将为您安排好图表。

例如

```
ldt <-complete(impute,"long", include=TRUE)

ggplot(ldt[!is.na(ldt$hyp),], aes(x= factor(hyp))) + 
  geom_bar() + 
  facet_wrap(~.imp, nrow = 1) +
  xlab('Observed') +
  scale_y_continuous(expand = c(0,0)) 
```

![在此处输入图像描述](../Images/1e8e98d9e9d25f99678ddc43ce208295.png)

# 长篇

`facet_grid`现在你想要`scales = 'free_y'`

```
all_long <- melt(ldt, c(".imp",".id","hyp"))
ggplot(all_long[!is.na(all_long$hyp),], aes(x= factor(hyp))) + 
  geom_bar() + 
  facet_grid(variable ~.imp, scales = 'free_y') +
  xlab('Observed') +
  scale_y_continuous(expand = c(0,0)) 
```

![在此处输入图像描述](../Images/9e98d7c8796a53d84b8cd70a58f537e2.png)

# database-schema - SQuirreL SQL 中列属性的含义

> ID：12375145
> 
> 赞同：2
> 
> 时间：2012-09-11T17:47:10.843
> 
> 标签：database-schema, schema-design, squirrel-sql, tablecolumn

我正在使用 SQuilrreL SQL 连接到本地 MySQL 服务器，并且正在查看某个表的列的规范。同时我在 MySQL（MySQL Workbench）中直接查看同一张表的规范，很明显，列的属性是不同的。例如，在 SQuirelL SQL 中，我有 , 和 等属性`IS_NULLABLE`，`DECIMAL_DIGITS`而`NUM_PREC_RADIX`在 MySQL 中，我有如下属性：`Not Null`, `Auto Increment`, `Zero Fill`。

我的问题 - SQuirreL SQL 中所有列属性的含义是什么？更好的是 - 我如何将它们映射到 MySQL 的属性？（其中一些很明显，例如`IS_NULLABLE`<==> `Not Null`，但大多数都不是那么清楚）。

我需要这个，因为我刚刚使用了 SQuirreL SQL 的插件 CopyDB，从 MySQL 到 Derby，并且想知道转换中是否保留了所有内容以及对表结构进行了哪些更改。

谢谢！

提供

# ios - 你如何预授权一个 facebook 对话框——比如一个 apprequest？

> ID：12375150
> 
> 赞同：1
> 
> 时间：2012-09-11T17:47:28.017
> 
> 标签：ios, facebook, authentication

我的目标是在我的应用程序中制作一个邀请朋友的应用程序按钮。

问题是它要求我登录。这通常不是问题，但在这种情况下，用户已经将他们的登录信息输入到 facebook，以便在应用程序中执行另一个功能。该功能是由目前不可用的其他人编写的。

最终发生的是用户必须登录两次。一次使用对方的功能，一次使用apprequest对话框。我需要以某种方式共享凭据/授权/会话，这样我就不会提示用户登录两次。

我没有看到要在标准应用程序请求对话框代码中传递任何参数来对尝试进行预授权。我认为我可以用 Facebook 对象做一些事情。另外，我对 Objective C 很陌生，所以我对委托的东西的理解真的很薄弱。我一直在看它，但我不知道 facebook 对象作为委托需要什么样的功能。我的理解是，facebook 可以回调委托，本质上是提供异步 ack 或 req 或类似的东西。但是我怎么知道它期望什么样的代表呢？它会传递什么参数？ETC..

无论如何，这是我的应用请求的非常基本的代码块。我不知道从这里去哪里以防止该登录框弹出两次。

```
Facebook *facebook = [[Facebook alloc] initWithAppId:<#(NSString *)#> andDelegate:<#(id<FBSessionDelegate>)#>]; 
// I realize I have to fill in my own AppID, which I have but I'm not entirely sure about the delegate

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Come check out my app.",  @"message",
                               nil];

[self.facebook dialog:@"apprequests" andParams:params andDelegate:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:54:31.053

您需要在实例上设置`accessToken`和`expirationDate`属性`Facebook`才能重用由其他功能创建的会话。`NSUserDefaults`您可以使用或类似机制保留这些值。

请注意，有一个[新版本的 Facebook SDK (3.0)](https://developers.facebook.com/docs/sdk-reference/iossdk/3.0/)具有更好的自动会话处理功能。在未来的某个时候，它可能是强制性的，所以当你有机会时，你应该改用它。

# intellij-idea - 使用 RobolectricTestRunner 的 JUnit 测试卡住了

> ID：12375156
> 
> 赞同：2
> 
> 时间：2012-09-11T17:47:48.673
> 
> 标签：intellij-idea, junit4, robolectric

我正在探索如何使用`JUnit`. 到目前为止，我之所以选择`Robolectric`它，是因为它可以提供更快、更容易的反馈。

不幸的是，我的第一次测试卡住了，我正在寻找一种方法来找出原因。我试图记录`@Before`和`@Test`方法，但看起来它在跑步者初始化的某个地方停止了。

我正在使用 Robolectric 1.1、JUnit 4.8.2、IntelliJ IDEA 和 Android 4.1 SDK。

UPD：我通过在 IDEA 中暂停我的测试执行而进一步前进，我看到 Runner 正在做一些工作，但看起来它卡住了或在这些方法中有循环：

```
getAndroidResourcePathByExecingWhichAndroid():327, ResourceLoader {com.xtremelabs.robolectric.res}

getAndroidResourceSubPath() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:09:19.077

我还没有找到导致此问题的原因，但能够设计一种解决方法。

查看 robolectric 源代码后，似乎 ResourcePathLoader 类尝试了多种方法来获取资源路径，最后一种是 getAndroidResourcePathByExecingWhichAndroid()。

通常对于 Intellij，它应该从“local.properties”文件中查找 SDK 路径。Intellij 通常在您从头开始创建项目时创建此文件，但由于某种原因，它在我的项目中丢失了。

所以解决方法是创建 local.properties 文件并将其存储在项目的根级别，它应该包含以下行

```
sdk.dir=<SDK_PATH> 
```

`<SDK_PATH>`您的 android SDK 存在的路径在哪里。现在，如果您运行测试，它应该可以工作。

# google-apps-script - 谷歌脚本 - 文件下载

> ID：12375158
> 
> 赞同：0
> 
> 时间：2012-09-11T17:47:59.733
> 
> 标签：google-apps-script

我正在使用 Google Script 为我的营销课程编写一个简单的程序。

我们的项目是通过二维码销售歌曲并限制下载次数。跟踪部分已经写好了（SpreadsheetApp 让它变得简单）。我需要做的就是提供文件以供下载。有没有办法做到这一点？

如果没有，我至少可以嵌入一个指向托管 MP3 的外部服务器的链接吗？我尝试使用 app.add(app.createHTML('a file')); 但 Caja 似乎正在过滤 A 标签。我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:59:41.277

首先，我认为 Caja 不会在您编写 UI 应用程序时发挥作用（假设这是基于您使用 app.add 的事实）

使用 UIApp，您可以使用 app.createAnchor() 创建指向外部文件的超链接。

# c - 如何将 SIMD int 向量转换为在 GCC 中浮动？

> ID：12375159
> 
> 赞同：7
> 
> 时间：2012-09-11T17:48:07.217
> 
> 标签：c, gcc, vectorization, simd

我正在为一个项目使用 GCC SIMD 向量扩展，一切都运行得很好，但是强制转换，他们只是重置了向量的所有组件。

[手册](http://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html)指出：

> 可以从一种向量类型转换为另一种向量类型，前提是它们具有相同的大小（实际上，您也可以将向量转换为相同大小的其他数据类型或从其他数据类型转换）。

这是一个简单的例子：

```
#include <stdio.h>

typedef int int4 __attribute__ (( vector_size( sizeof( int ) * 4 ) ));
typedef float float4 __attribute__ (( vector_size( sizeof( float ) * 4 ) ));

int main()
{
    int4 i = { 1 , 2 , 3 , 4 };
    float4 f = { 0.1 , 0.2 , 0.3 , 0.4 };

    printf( "%i %i %i %i\n" , i[0] , i[1] , i[2] , i[3] );
    printf( "%f %f %f %f\n" , f[0] , f[1] , f[2] , f[3] );

    f = ( float4 )i;

    printf( "%f %f %f %f\n" , f[0] , f[1] , f[2] , f[3] );
} 
```

在我的机器上编译`gcc cast.c -O3 -o cast`并运行我得到：

```
1 2 3 4
0.100000 0.200000 0.300000 0.400000
0.000000 0.000000 0.000000 0.000000 <-- no no no 
```

我不是那个汇编大师，但我只是在这里看到了一些字节运动：

```
[...]
400454: f2 0f 10 1d 1c 02 00 movsd 0x21c(%rip),%xmm3
40045b: 00
40045c: bf 49 06 40 00 移动 $0x400649,%edi
400461: f2 0f 10 15 17 02 00 movsd 0x217(%rip),%xmm2
400468: 00
400469: b8 04 00 00 00 移动 $0x4,%eax
40046e: f2 0f 10 0d 12 02 00 movsd 0x212(%rip),%xmm1
400475：00
400476: f2 0f 10 05 12 02 00 movsd 0x212(%rip),%xmm0
40047d：00
40047e: 48 83 c4 08 添加 $0x8,%rsp
400482：e9 59 ff ff ff jmpq 4003e0

```

我怀疑标量的向量等价物：

```
*( int * )&float_value = int_value; 
```

你如何解释这种行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T18:38:19.480

这就是向量转换的定义（其他任何事情都将是完全疯狂的，并且会使标准向量编程习语编写起来非常痛苦）。如果您想实际进行转换，您可能希望使用某种内在函数，例如 _mm_cvtepi32_ps （这会破坏矢量代码的良好架构独立性，当然，这也很烦人；一种常见的方法是使用定义一组可移植的“内在”的翻译头）。

为什么这很有用？原因有很多，但最大的原因如下：

在向量代码中，您几乎从不想分支。相反，如果您需要有条件地做某事，您评估条件的两侧，并使用掩码逐个通道选择适当的结果。这些掩码向量“自然”具有整数类型，而您的数据向量通常是浮点数；您想使用逻辑运算将两者结合起来。如果向量转换只是重新解释位，那么这个极其常见的习语是最自然的。

诚然，可以解决这种情况，或者任何其他常见的向量习语袋，但是“向量是一袋比特”的观点非常普遍，并且反映了大多数向量程序员的思维方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:05:05.823

事实上，在您的情况下甚至没有生成单个向量指令，甚至在运行时也没有执行类型转换。由于`-O3`切换，这一切都是在编译时完成的。这四个`MOVSD`指令实际上是将预转换的参数加载到`printf`. 事实上，根据 SysV AMD64 ABI，浮点参数在 XMM 寄存器中传递。你反汇编的部分是（用 编译得到的汇编代码`-S`）：

```
 movsd   .LC6(%rip), %xmm3
    movl    $.LC5, %edi
    movsd   .LC7(%rip), %xmm2
    movl    $4, %eax
    movsd   .LC8(%rip), %xmm1
    movsd   .LC9(%rip), %xmm0
    addq    $8, %rsp
    .cfi_def_cfa_offset 8
    jmp     printf
    .cfi_endproc 
```

`.LC5`标记格式字符串：

```
.LC5:
    .string "%f %f %f %f\n" 
```

指向格式字符串的指针属于类`INTEGER`，因此在`RDI`寄存器中传递（在 VA 空间的前 4 GiB 中的某处，通过向 的下部发出 32 位移动来保存一些代码字节`RDI`）。寄存器`RAX`（`EAX`用于节省代码字节）加载 XMM 寄存器中传递的参数数量（再次根据 SysV AMD64 ABI 调用具有可变数量参数的函数）。所有四个`MOVSD`（MOVe Scalar Double-precision）移动 XMM 寄存器中的相应参数。`.LC9`例如标记两个双字：

```
 .align 8
.LC9:
    .long   0
    .long   916455424 
```

这两个形成了 64 位四字，在 64 位 IEEE 754 表示`0x36A0000000000000`中恰好是 2 ^(-149 。)在非规范化的 32 位 IEEE 754 中，它看起来像`0x00000001`，所以确实它不是整数的转换`1`（但由于`printf`需要`double`参数，它仍然被预先转换为双精度）。第二个论点是：

```
 .align 8
.LC8:
    .long   0
    .long   917504000 
```

这在 64 位 IEEE 754 和非规范化 32 位 IEEE 754 中是`0x36B0000000000000`or 2 ^(-148)`0x00000002`。对于其他两个参数也是如此。

请注意，上面的代码不使用单个堆栈变量 - 它仅使用预先计算的常量进行操作。这是由于使用了非常高的优化级别 ( `-O3`)。`-O2`如果您使用较低的优化级别（或更低）进行编译，则会发生实际的运行时转换。然后发出以下代码以执行类型转换：

```
 movaps  -16(%rbp), %xmm0
    movaps  %xmm0, -32(%rbp) 
```

这只是将四个整数值移动到浮点向量的相应槽中，因此没有任何转换。然后对于每个元素执行一些 SSE mumbo-jumbo 以将其从单精度转换为双精度（如预期的那样`printf`）：

```
 movss   -20(%rbp), %xmm0
    unpcklps        %xmm0, %xmm0
    cvtps2pd        %xmm0, %xmm3 
```

（为什么不直接使用`CVTSS2SD`超出了我对SSE指令集的理解）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-18T12:56:44.593

您可以通过直接循环元素来从 int 转换为 float

```
float4 cast(int4 x) {
    float4 y;
    for(int i=0; i<4; i++) y[i] = x[i];
    return y;
} 
```

GCC、Clang 和 ICC 都`cvtdq2ps xmm0, xmm0`为此生成一条指令。

[https://godbolt.org/g/KU1aPg](https://godbolt.org/g/KU1aPg)

# asp.net - 表格图像的 ASP 动态显示

> ID：12375161
> 
> 赞同：0
> 
> 时间：2012-09-11T17:48:16.063
> 
> 标签：asp.net, ajax, asp.net-ajax

我试图在 asp 中实现一个简单的 ajax 示例。1\. 表单有一个文本框，它接受用户名并在标签出来后验证用户名。2\. 如果用户名有效，会显示一个（绿色勾号）标志，表示用户名有效 3\. 否则，显示红色叉号图像 4\. ajax 请求正在进行时显示加载动画。

发生的情况是红十字图像显示在文本框之后，其中有一些看起来很奇怪的间隙（空格）。该间隙是为动画加载图像和绿色标志图像保留的。我该如何删除它。我想在 UI 中的同一位置显示绿色或红色图像，因为它们不会同时出现。

![截屏](../Images/250586077f6f9ca57749b93d90c4766c.png)

代码是：

```
 <table><tr><td>
            User Id:&nbsp;</td><td>
            <asp:TextBox ID="TextBox1" runat="server" ontextchanged="TextBox1_TextChanged" 
                AutoPostBack="True"></asp:TextBox></td><td>
            &nbsp;&nbsp;
            <div style="height:30px;width:30px">
            <asp:UpdateProgress ID="UpdateProgress1" runat="server" DisplayAfter="100">
              <ProgressTemplate>
                    <asp:Image ID="loading" runat="server" ImageUrl="loading.gif" Height="20px" Width="20px" />
               </ProgressTemplate>
            </asp:UpdateProgress></div>
            </td><td>
            <asp:Image ID="Image1" runat="server" Height="15px" 
                ImageUrl="~/valid-icon.gif" ToolTip="Valid User Id" Visible="False" 
                Width="15px" /></td><td>
            &nbsp;&nbsp;<asp:Image ID="Image2" runat="server" Height="15px" 
                ImageUrl="~/invalid_icon.png" ToolTip="Invalid User Id. Already exists" 
                Visible="False" Width="15px" />
            &nbsp;</td></tr></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T05:28:01.727

您应该试试这个，将 Valid-icon 和 Invalid-icon 以及具有更新进度的 div 放在一个 td 中，无需将它们放在单独的 td 中。最后将更新进度放在 td. 它会解决你的问题

```
<table>
   <tr>
      <td>
        User Id:&nbsp;
      </td>
      <td>
        <asp:TextBox ID="TextBox1" runat="server" ontextchanged="TextBox1_TextChanged" 
            AutoPostBack="True"></asp:TextBox>
      </td>
      <td>          
        <asp:Image ID="Image1" runat="server" Height="15px" 
            ImageUrl="~/valid-icon.gif" ToolTip="Valid User Id" Visible="False" 
            Width="15px" />

        <asp:Image ID="Image2" runat="server" Height="15px" 
            ImageUrl="~/invalid_icon.png" ToolTip="Invalid User Id. Already exists" 
            Visible="False" Width="15px" />

        <div style="height:30px;width:30px">
           <asp:UpdateProgress ID="UpdateProgress1" runat="server" DisplayAfter="100">
             <ProgressTemplate>
                <asp:Image ID="loading" runat="server" ImageUrl="loading.gif" Height="20px" Width="20px" />
              </ProgressTemplate>
           </asp:UpdateProgress>
         </div>
       </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:04:37.960

好吧，您可以为“Image1”和“Image2”控件的样式属性使用“绝对”位置。

就像是，

```
Images.
{  
 position:absolute; 
  height:150px; 
  width:300px;
    top:100px; 
  left:120px; 
} 
```

然后将此类分配给两个图像控件的 CssClass 属性。然后尝试不同的高度、宽度等值来重叠 pregressbar 图像。

或者

您需要以某种方式将 Progressbar Images 的 Display 属性设置为“none”。像，

```
style="display:none;" 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-11T18:17:39.707

我猜 ontextchanged 事件中的代码流应该是这样的

```
protected void TextBox1_TextChanged(object sender, EventArgs e)
{
     UpdateProgress1.Visible = true;

     // Existing code to check the user validation 

     UpdateProgress1.Visible = false;           

     // Existing code to display image according to validation success or failed
} 
```

# vba - 使用 DLookup 跟踪用户

> ID：12375163
> 
> 赞同：1
> 
> 时间：2012-09-10T16:16:45.593
> 
> 标签：vba

此代码将使用活动用户 id (NBK) 更新表 (tbl_DateTracking)，并根据两个值`CaseID`和更新记录`OCC_Scenario`。

**问题来了：**我们只想将 id 添加到当前正在记录的记录中。问题是所有具有 CaseID/OCC_Scenario 的记录都使用用户 ID 进行更新。换句话说，旧记录正在被更改。

任何人都可以看到要添加到此代码中的内容：仅此当前记录，添加 id ？？？

```
If IsNull(DLookup("[NBK]", "Employees", "[Status]=1")) Then
Retval = MsgBox("Login information not found - Please choose your role manually", vbOKOnly, "Login Error")
     Else
log = DLookup("[NBK]", "Employees", "[Status]=1")

SQLnbk = " Update tbl_DateTracking SET NBK = "
SQLnbk = SQLnbk & "'" & log & "' WHERE "
SQLnbk = SQLnbk & "CaseId = '" & CaseId & "' AND OCC_Scenario = '" & OCC_Scenario & "';"
End If
DoCmd.RunSQL SQLnbk 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:41:30.267

It seems that you are updating records in a form. You can refer to controls on the form, for example:

```
If IsNull(DLookup("[NBK]", "Employees", "[Status]=1")) Then
   Retval = MsgBox( _
      "Login information not found - Please choose your role manually", _
      vbOKOnly, "Login Error")
Else
   log = DLookup("[NBK]", "Employees", "[Status]=1")
   Me.txtNBK=log 
```

    End If

If you are using a query, you will need a unique ID. For example:

```
SQLnbk = " Update tbl_DateTracking SET NBK = "
SQLnbk = SQLnbk & "'" & log & "' WHERE "
SQLnbk = SQLnbk & "UniqueID = " & Me.UniqueID

<...>
CurrentDB.Execute SQLnbk, dbFailOnError 
```

# windows - 在 Powershell 中禁用位置参数绑定

> ID：12375165
> 
> 赞同：7
> 
> 时间：2012-09-11T17:48:27.087
> 
> 标签：windows, powershell

我只想要通过别名的参数：

> script.ps1 -d site1 -c eac34b2d

这不应该被允许：

> script.ps1 站点 1 eac34b2d

```
Param(
    [parameter(Mandatory=$true)]
    [alias("d")]
    $DocRoot,
    [alias("c")]
    $Commit
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:58:06.870

基本上你想禁用位置参数绑定。我在 Powershell 3.0 中写过一种内置方式：使用`[CmdletBinding(PositionalBinding=$false)]`.

[http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2011/09/19/how-to-disable-positional-parameter-binding-in-powershell.aspx](http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2011/09/19/how-to-disable-positional-parameter-binding-in-powershell.aspx)

此处提供了 v2 的解决方法：

[http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/abbc587f-cd7e-4c8d-879f-355339d9d6b7/](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/abbc587f-cd7e-4c8d-879f-355339d9d6b7/)

# c++ - 循环内的malloc

> ID：12375168
> 
> 赞同：0
> 
> 时间：2012-09-11T17:48:40.787
> 
> 标签：c++, proc

如果事先不知道块的数量，那么在循环内动态分配内存是多么安全，特别是性能。

我有一个 Pro*c 文件，它有一个光标。我需要从数据库中获取数据并分配给 C 结构。我不确定是否有任何方法可以找到游标中的记录数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:51:40.993

如果这是你需要的，那就去吧。C++ 中的循环语法没有任何影响`malloc`; 他们只是彼此无关。

但`malloc`通常不是 C++ 中的正确选择。`new`使用类型安全的/操作符会更好一些`delete`，最好的通常是容器，例如`std::vector<>`.

# spring - Spring LDAP 身份验证方法抛出 java.lang.NoSuchMethodError

> ID：12375169
> 
> 赞同：0
> 
> 时间：2012-09-11T17:48:40.673
> 
> 标签：spring, spring-ldap

我正在尝试使用`LDAPTemplate authenticate`Spring LDAP (1.3.1.RELEASE) 中的方法，但它会引发以下异常

`java.lang.NoSuchMethodError: org.springframework.ldap.core.LdapTemplate.authenticate(Ljavax/naming/Name;Ljava/lang/String;Ljava/lang/String;)Z`

以下是我的 Maven 3.0.1 依赖项

```
<dependency>
  <groupId>org.springframework.ldap</groupId>
  <artifactId>spring-ldap-core</artifactId>
  <version>1.3.1.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.springframework.ldap</groupId>
  <artifactId>spring-ldap-core-tiger</artifactId>
  <version>1.3.1.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.springframework.ldap</groupId>
  <artifactId>spring-ldap-odm</artifactId>
  <version>1.3.1.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.springframework.ldap</groupId>
  <artifactId>spring-ldap-ldif-core</artifactId>
  <version>1.3.1.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.springframework.ldap</groupId>
  <artifactId>spring-ldap-ldif-batch</artifactId>
  <version>1.3.1.RELEASE</version>
</dependency> 
```

以下是我用来验证的代码

```
 AndFilter andFilter = new AndFilter();
    andFilter.and(new EqualsFilter("objectclass", "person"));
    andFilter.and(new EqualsFilter("uid", "myid"));
    ldapTemplate.authenticate(DistinguishedName.EMPTY_PATH, andFilter.toString(), "password"); 
```

仅供参考...我使用了其他`LDAPTemplate`方法，例如`search`, `bind`，`unbind`没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:25:08.857

重启服务器后错误消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:15:43.093

LdapTemplate.authenticate 是相当新的。

您可能有 Maven（或您的 IDE）缓存的旧版本库，导致运行时版本比用于编译的版本旧。

# python - 如何在 Microsoft Windows 中执行时立即停止 Python 关闭

> ID：12375173
> 
> 赞同：39
> 
> 时间：2012-09-11T17:48:58.543
> 
> 标签：python, windows

我刚开始上大学，我们将使用 python。我们真的什么都没做，所以我下载了程序并做了一些打印命令，就是这样。

当我运行我的 .py 文件（一个`print`命令）时，它会在出现后立即关闭。我理解它为什么这样做——它给出了输出，所以它完成了它需要做的事情——但我也明白你可以阻止这种情况的发生。

我环顾了这个网站，没有一个解决这个问题的方法有效，或者我不理解它们。

是否有一个简单的命令可以输入到我的 IDLE 编辑器中来暂停程序或其他什么？我`input("prompt: ")`按照某人的建议尝试过，这没有任何区别。

如果没有此命令，有没有办法更改计算机上的设置以使程序不会自动关闭？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-04T20:26:52.470

在 Python 3 中，将以下内容添加到代码末尾：

```
input('Press ENTER to exit') 
```

这将导致程序等待用户输入，按 ENTER 导致程序完成。

`script.py`您可以通过这种方式方便地在 Windows中双击您的文件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-05T13:22:01.753

唯一对我有用的 -i 命令行参数。

只需将所有 python 代码放入 .py 文件中，然后运行以下命令；

```
python -i script.py 
```

这意味着如果您设置 -i 变量并运行您的模块，则 python 不会在 SystemExit 上退出。在此[链接](https://stackoverflow.com/questions/1145428/difference-between-inspect-and-interactive-command-line-flags-in-python)上阅读更多内容。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-11T18:13:53.157

打开您的 cmd（命令提示符）并从那里运行 Python 命令。（在 Windows 上运行或搜索并键入 cmd）它应该如下所示：

```
python yourprogram.py 
```

这将在 cmd 中执行您的代码，并将保持打开状态。但是要使用 python 命令，必须正确安装 Python，以便 cmd 将其识别为命令。如果没有发生这种情况，请检查您的操作系统的正确安装和变量注册

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-09-14T21:40:41.003

放

```
input('Press ENTER to exit') 
```

最后让它停下来。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-11T18:35:06.113

从您的主要 Python 库源中使用 windows 命令提示符运行该命令。例子。

```
C:\Python27\python.exe directoryToFile\yourprogram.py 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-31T20:56:59.320

如果你只是想要延迟

```
from time import *

sleep(20) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-01-29T10:44:08.943

我知道一个简单的答案！打开你的cmd，输入：`cd C:\directory your file is in`然后输入`python your progam.py`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-25T17:04:02.860

根据我使用它的目的，或者如果我正在做其他人会使用的事情，我通常只是`input("Do eighteen backflips to continue")`为了我，如果其他人会使用我只是创建一个批处理文件并在之后暂停它

```
cd '/file/path/here'
python yourfile.py
pause 
```

如果要对文件进行重命名、移动、复制等，我会使用上述方法，并且我的 cmd 需要位于特定文件夹中，以便将它们放在我想要的位置，否则 - 只是

```
python '/path/to/file/yourfile.py'
pause 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-14T08:44:32.720

在 Python 2.7 中，将此添加到我的 py 文件 ( `if __name__ == '__main__':`) 的末尾可以：

```
closeInput = raw_input("Press ENTER to exit")
print "Closing..." 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-26T02:38:13.020

它关闭的原因是程序不再运行，只需添加任何类型的循环或输入来解决此问题（或者您可以通过空闲运行它。）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-27T04:41:04.693

我想我回答这个问题为时已晚，但无论如何这里什么都没有。

我之前遇到过同样的问题，我认为您可以选择两种替代解决方案。

1.  使用睡眠（_sometime）

`from time import * sleep(10)`

2.  使用提示消息（注意我使用的是 python 2.7）

`exit_now = raw_input("Do you like to exit now (Y)es (N)o ? ")'`

`if exit_now.lower() = 'n'`

`//more processing here`

或者，您也可以混合使用这两种方法，您可以在其中提示输入消息并使用 sleep(sometime) 来延迟窗口关闭。选择是你的。

请注意，以上只是一些想法，如果您想在实践中使用其中的任何一种，您可能需要稍微考虑一下您的应用程序逻辑。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-22T20:34:17.227

只需在空闲的“input()”中添加一行代码

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-12-07T12:12:45.180

好吧，我遇到了类似的问题，通过添加环境变量来解决。

在窗口中添加系统变量

姓名 ： `PYTHONPATH`

价值 ：`C:\Python27;`

你的 Python 路径。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-08T07:03:53.773

我在互联网上的任何地方都找不到真正的非脚本特定，双击并且窗口不会关闭解决方案。我想我懒得在不需要的时候拖放或输入，所以经过一些实验后，我想出了一个解决方案。

基本思想是重新关联 .py 文件，以便它们在运行预期脚本之前运行单独的初始脚本。初始脚本使用 /k 参数启动一个新的命令提示符窗口，该参数在完成后保持命令提示符打开并在新窗口中运行您想要的脚本。

也许有充分的理由不这样做，如果有更多知识，请发表评论，但我认为如果遇到任何问题，如果需要，很容易恢复。一个可能不受欢迎的副作用是拖放或键入并从命令提示符运行现在会打开第二个命令提示符，而不是在您拖放或键入的命令提示符中运行。

现在，为了实现，我将初始 python 脚本称为 python_cmd_k.pyw。我正在使用 Python 3.7。其他版本所需的代码可能有所不同。将路径 C:\Python37\python.exe 更改为 python 安装的位置。如果 .pyw 文件还没有，则通过 Windows 将它们关联到 pythonw.exe（不是 python.exe）。

```
import subprocess
import sys

#Run a python script in a new command prompt that does not close
command = 'start cmd /k C:\Python37\python.exe "' + sys.argv[1] + '"'
subprocess.run(command, shell=True) 
```

每次双击任何 .py 脚本时都会运行它，并启动一个新的命令提示符来运行您双击的脚本。当这个初始脚本运行时，通过 pythonw.exe 运行会抑制命令提示符窗口。否则，如果您通过 python.exe 运行它，由于第一个窗口每次都会短暂显示，因此会出现令人讨厌的命令提示符闪烁。显示预期的脚本是因为上面初始脚本中的代码使用 python.exe 运行预期的脚本。

现在通过 Windows 将 .py 文件与 python.exe（不是 pythonw.exe）关联，如果它们还没有，并编辑此关联的注册表项（免责声明：如果您不确定自己在做什么，请务必在编辑之前备份您的注册表）。我不知道注册表中是否有不同路径用于不同版本的 Windows 的文件关联，但对我来说它位于：

```
HKEY_CURRENT_USER\Software\Classes\Applications\python.exe\shell\open\command 
```

将数据更改为 pythonw.exe 路径（不是 python.exe）并将路径添加到上面的 ptyhon 脚本和“%1”作为参数（“%1”传递双击文件的完整路径）。例如，如果 pythonw.exe 和 python_cmd_k.pyw 位于 C:\Python37\ 那么：

```
"C:\Python37\pythonw.exe" "C:\Python37\python_cmd_k.pyw" "%1" 
```

只要您为两者提供正确的路径，就不必将 python_cmd_k.pyw 与 pythonw.exe 放在同一目录中。您可以将它们放在 .reg 文件中，以便在使用脚本和默认行为之间轻松切换。在下面的示例中根据需要更改路径（注册表中的位置、python 的安装、放置 python_cmd_k.pyw 脚本的位置）。

使用 ptyhon_cmd_k.pyw （根据需要更改路径）：

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Classes\Applications\python.exe\shell\open\command]
@="\"C:\\Python37\\pythonw.exe\" \"C:\\Python37\\python_cmd_k.pyw\" \"%1\"" 
```

默认版本（根据需要更改路径）：

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Classes\Applications\python.exe\shell\open\command]
@="\"C:\\Python37\\python.exe\" \"%1\"" 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-02T12:01:21.593

来晚了，但万一有人从谷歌来这里——

转到 .py 文件的位置。按 SHIFT 然后右键单击任意位置并从此处选择打开命令提示符。一旦它启动，只需添加

“python NameOfTheProg.py”到 cmd 行

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-25T10:35:51.060

好吧，我迟到了，但我仍然会回答。大多数答案没有任何意义（对我来说）

首先，没有设置使文件不自动关闭。但是，您可以编写一个脚本来不允许文件自动关闭！

我通常这样做（在脚本或 print() 的末尾）：

```
notClose = "close"
while True:
    notClose = "dontClose" 
```

该脚本使文件继续执行操作（在这种情况下，更改变量字符串），因此它不会关闭。您可以将变量名称和字符串更改为其他内容，但不要使两个字符串相同。

或者，如果您愿意，只需使用 VS Code(Visual Studio Code)。它允许您在程序中运行文件，并且.. 程序不会关闭，即使您遇到错误！（它会告诉你错误是什么，通常它会立即关闭）

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2020-06-16T17:57:31.147

很简单：

1.  以管理员身份打开命令提示符。
2.  类型`python.exe`（前提是您在环境变量中给出了它的路径）

然后，在同一命令提示符窗口中，python 解释器将以`>>>`

这对我有用。

# java - 从 Java 在浏览器窗口中打开 XLS 文件

> ID：12375174
> 
> 赞同：1
> 
> 时间：2012-09-11T17:48:58.933
> 
> 标签：java, javascript, jakarta-ee

我正在用 JavaEE 编写程序，我的老板要求我上传 XLS 文件、查询内容、输出到 XLS 文件，然后在浏览器窗口中打开它。我做了所有这些，除了最后一部分，我不知道如何在浏览器中打开它。这段代码是我试过的，但我得到了

13:47:13,297 错误 [stderr] (http-localhost-127.0.0.1-8080-3) javax.script.ScriptException: sun.org.mozilla.javascript.internal.EvaluatorException: missing ) 在参数列表 (#1) 之后在第 1 行

有人有什么想法吗？

```
 String outWindowOpen = "window.open(C:\\test\\ApromPromSN\\book1.xls);";

        // create a script engine manager
        ScriptEngineManager factory = new ScriptEngineManager();
         // create a JavaScript engine
        ScriptEngine engine = factory.getEngineByName("JavaScript");
         // evaluate JavaScript code from String
        engine.eval(outWindowOpen); 
```

# java - 哪个更快：4 行或矩形 SWT Java

> ID：12375175
> 
> 赞同：3
> 
> 时间：2012-09-11T17:49:22.057
> 
> 标签：java, swt

在 SWT 中绘图时，4 行或一个矩形之间是否存在任何性能差异。即使它的细微差别我也很感兴趣。我正在创建的系统每帧可以进行大量此类调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:55:06.890

在我工作的一个系统上，在对其进行分析之后，我们从绘制一个矩形 + 两条线切换为一条折线，并且我们在绘图方面得到了很大的提升。（画这样的蜡烛：

![在此处输入图像描述](../Images/bfd1ba3224f3a2ce4dd3053445fc4c23.png)

)

它至少快了一倍。

# iphone - NSUserDefaults 用于应用内购买变量？

> ID：12375178
> 
> 赞同：0
> 
> 时间：2012-09-11T17:49:29.757
> 
> 标签：iphone, variables, encryption, in-app-purchase, nsuserdefaults

在我的应用程序中，我一直在 NSUserDefaults 中存储变量，这些变量会因应用程序内的应用内购买而增加。我的问题是，当应用程序更新时，这些变量是否会保留，以便用户在更新后仍然可以访问它们。

此外，存储此类变量的最佳做法是什么？苹果推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:50:50.597

NSUserDefaults 数据不会在应用更新之间被删除，除非用户卸载并重新安装应用。它还存储在备份中（通过 iTunes 和 iCloud），因此只要用户设置了其中一个并且不卸载应用程序，您就可以依赖持久的数据。

作为旁注，您可能应该加密存储在默认值中的值 - 该文件是用户可访问的，这使得篡改成为可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:51:32.263

它们将在更新后保留，但如果用户完全删除应用程序、重新启动操作系统或获得新手机，它们将被删除或不存在，所以我认为这不是一个很好的解决方案，可以依赖任何重要的事情。

# wcf - PollingDuplexHttpBinding Endpoint NotFound - 内容不匹配

> ID：12375181
> 
> 赞同：0
> 
> 时间：2012-09-11T17:49:46.603
> 
> 标签：wcf, silverlight, pollingduplexhttpbinding

我创建了一个 WCF 托管服务，该服务在控制台中运行，以供 silverlight 访问。我的 PolicyHost 运行良好，我的服务加载良好。我可以去我的 silverlight 客户端并执行“添加服务参考”，让 VS2010 使用适当的 wsdl 下载我的服务参考并生成一个代理。

但是，当我调用第一种方法时，我每次都会收到以下消息。

**远程服务器返回错误：NotFound。**

通过 Wcf TraceLog Viewer 深入研究一下，我看到了以下内容；

**内容类型 application/mspd1 已发送到需要 application/soap+msbin1 的服务。客户端和服务绑定可能不匹配。无法处理消息，因为内容类型“application/mspd1”不是预期的类型“application/soap+msbin1”**

现在，如果我删除回调，删除 DuplexPolling 并将其放回 WsHttpBinding - 我的方法调用似乎工作正常。

在尝试将双工轮询配置为正常工作时，我是否遗漏了什么？

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:26:16.980

可能会被覆盖，但无论如何我都会问。您是否使用客户端程序集进行双工轮询？它需要包含在您的参考文献中。您需要在 wcf 服务上使用服务器程序集。当您获得 sdk 时，两个程序集都包含在内。还要确保您使用的是正确的版本。

如果你已经掌握了所有这些，你是如何让 Visual Studio 生成你的代理的？您是否包括合同选项？或者您使用的是可以使用完整框架 CLR 或 silverlight CLR 编译的共享程序集。

# jquery - 在同一个 div 中选择一个类而不是其他类

> ID：12375182
> 
> 赞同：0
> 
> 时间：2012-09-11T17:49:49.937
> 
> 标签：jquery

我有一个包含红葡萄酒和葡萄酒的应用程序。如果某物被选为红酒，则该 div 中的对应酒（且只有该 div）应设置为选中并设置为禁用。这是一个小提琴：http: [//jsfiddle.net/z5FYR/](http://jsfiddle.net/z5FYR/)

基本上，有没有办法让我限制范围（而不是内部 div - 基本上就像这个'subs'，但没有别的）？还是我应该做一个次要的事情来选择像 data-id='23' 之类的东西？

谢谢

**编辑#1** 因此，“is-wine”的三个实例是通过包含在该“.subs”类中来划分的。我只想选择同一个 div 中的一个，而不是其他两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:56:55.110

尝试 jQuery 兄弟姐妹

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

```
$(this).siblings('input.is-wine').attr("checked", this.checked); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:54:33.113

尝试这个

html

```
 <div class='subs'>
        wine<input type='checkbox' class='is-wine' />
        red wine<input type='checkbox' class='is-red-wine' />
    </div>

      <div class='subs'>
        wine<input type='checkbox' class='is-wine' />
        red wine<input type='checkbox' class='is-red-wine' />
          </div>  

        <div class='subs'>
        wine<input type='checkbox' class='is-wine' />
        red wine<input type='checkbox' class='is-red-wine' />

        </div> 
```

js

```
$(document).ready(function(){
    $('.is-red-wine').on('change', function(){
       //alert('this changed');
       $(this).parent().find('input.is-wine').attr('checked','status');
        $(this).parent().find('input.is-wine').attr('disabled',true);
    });
}); 
```

# matlab - 在信号上找到局部最大值及其百分位数

> ID：12375183
> 
> 赞同：0
> 
> 时间：2012-09-11T17:49:50.887
> 
> 标签：matlab, signal-processing, max

我有一个信号，想用 MATLAB 找到它的局部最大值，找到它们的幅度，从最小到最大对它们进行排序，然后选择集合的第 75 个百分位数。

我怎样才能做到这一点？

**第 75 个百分位数：表示集合中 75% 的数据等于或小于此的特定元素。示例：如果我们有从 0 到 100 的值，则 75 是第 75 个百分位数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:12:30.373

对于实值矢量 (1D) 信号，您可以使用Signal Processing Toolbox 中的[findpeaks](http://www.mathworks.com/help/toolbox/signal/ref/findpeaks.html)来查找局部最大值，并指定峰值距离或最大值阈值等参数。

对于复值信号，您可以通过 应用`findpeaks()`到信号的幅度`abs()`。

如果需要对值进行排序，可以使用[sort](http://www.mathworks.com/help/techdoc/ref/sort.html)和[prctile](http://www.mathworks.com/help/toolbox/stats/prctile.html)从值向量计算百分位数。

# ios - 如何在散点图中显示一 (1) 个 plotSymbol？

> ID：12375191
> 
> 赞同：0
> 
> 时间：2012-09-11T17:50:20.730
> 
> 标签：ios, core-plot

环境：iOS 5.1 场景：1-2 个不带任何符号的散点图/线性图。

我只需要显示用户触及散点图的一 (1) 个符号。情节的其余部分没有任何符号。

我理解一个符号代表一个数据点。但我需要绘制所有数据点...只需设置一 (1) 个点/索引，以在每次用户触摸时显示其符号；希望打开/关闭。

问候，里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:06:36.797

使用`-symbolForScatterPlot:recordIndex:`数据源方法。返回要突出显示的索引和`[NSNull null]`其他索引的绘图符号。`-reloadData`当您需要更改突出显示的索引时调用绘图。

# php - mysql查询显示在线酒店预订中的剩余房间类型

> ID：12375192
> 
> 赞同：0
> 
> 时间：2012-09-11T17:50:24.627
> 
> 标签：php, javascript, jquery, mysql, sql

我正在做这个在线预订项目，我在这部分有库存。这是场景。数据库结构：

```
tbl_guestinfo
   guest_id
   name
   checkin
   checkout
   numAdults
   numChild

tbl_rooms
   room_id
   room_name
   guest_id
   type_id

tbl_roomtype
   type_id
   room_rate
   room_type
   noOf_Rooms 
```

我已经可以从我的查询中得到一个很好的结果，我可以扫描所有可用的房间并显示我想要的所有信息。

```
SELECT *
FROM tbl_rooms, tbl_roomtype 
WHERE guest_id NOT IN
(
SELECT `guest_id` from tbl_guestinfo where
(`checkin` < ' $varCheckOut' and `checkout`>= '$varCheckOut' )
OR (`checkin`<= '$varCheckIn' and `checkout`> '$varCheckIn' )
OR (`checkin`>= '$varCheckIn' and `checkout`<='$varCheckOut')
) 
```

我需要的是显示所有剩余的 room_type 可用。因此，例如，如果有 5 间标准间和 5 间豪华间，并且在 2012 年 10 月 1 日至 2012 年 10 月 5 日期间，客人 1 占用了 1 间标准间，并且客人 2 在同一日期占用了 1 间豪华房，则该网站将仍然显示标准房和豪华房，因为每个 room_type 还剩 4 间。

请注意，我会将 room_type 放在一个 html 表中，并将 noOf_Rooms 放在一个组合框中。

请帮助研究和阅读很多，但仍然无法弄清楚。预先感谢您的所有帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:02:00.890

扩展您的查询：

```
 SELECT room_type, count(*)
 FROM tbl_rooms, tbl_roomtype 
 WHERE guest_id NOT IN
 (
   SELECT `guest_id` from tbl_guestinfo where
   (`checkin` < ' $varCheckOut' and `checkout`>= '$varCheckOut' )
   OR (`checkin`<= '$varCheckIn' and `checkout`> '$varCheckIn' )
   OR (`checkin`>= '$varCheckIn' and `checkout`<='$varCheckOut')
 )
 GROUP by room_type 
```

我不喜欢你的房间桌子包含 guest_id。制作类似于“预订”表的东西，用于映射客人和房间，并包含所有日期等。

# javascript - Object.create(Class.prototype) 在这段代码中做了什么？

> ID：12375194
> 
> 赞同：7
> 
> 时间：2012-09-11T17:50:30.440
> 
> 标签：javascript

我正在阅读[javascript 中的 mixin 模式，](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#mixinpatternjavascript)但遇到了这段我不明白的代码：

```
SuperHero.prototype = Object.create( Person.prototype ); 
```

原始代码中实际上有一个错字（大写的 H）。如果我小写它，它会起作用。但是，如果我真的删除了该行，一切似乎都一样。

这是完整的代码：

```
var Person =  function( firstName , lastName ){
  this.firstName = firstName;
  this.lastName =  lastName;
  this.gender = "male";
};

// a new instance of Person can then easily be created as follows:
var clark = new Person( "Clark" , "Kent" );

// Define a subclass constructor for for "Superhero":
var Superhero = function( firstName, lastName , powers ){

    // Invoke the superclass constructor on the new object
    // then use .call() to invoke the constructor as a method of
    // the object to be initialized.

    Person.call( this, firstName, lastName );

    // Finally, store their powers, a new array of traits not found in a normal "Person"
    this.powers = powers;
};

SuperHero.prototype = Object.create( Person.prototype );
var superman = new Superhero( "Clark" ,"Kent" , ["flight","heat-vision"] );
console.log( superman ); 

// Outputs Person attributes as well as powers 
```

做什么`SuperHero.prototype = Object.create( Person.prototype );`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:58:53.330

`Person`它创建一个从构造函数的原型对象继承的新对象。

就像你这样做一样。

```
SuperHero.prototype = new Person(); 
```

除了它在`Person`没有实际调用`Person`构造函数中的代码的情况下创建实例。

这个对象被用作`SuperHero`构造函数的原型对象，这样当你创建一个`SuperHero`实例时，它会继承所有的原型属性`Person`，以及任何直接添加到`SuperHero`原型对象的原型属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T17:58:22.000

它完全按照文档所述：

> 使用指定的原型对象和属性创建一个新对象。

在`proto`这种情况下是`Person`：

参数说明如下：

> 应该是新创建对象的原型的对象。

您的代码`Object.create( Person.prototype );`返回一个对象，该对象复制一个人的属性（在本例中为名字、姓氏和性别）并将它们分配给 SuperHero。

`Person`请注意 a和 a之间的相似之处，`SuperHero`它们都包含 a`firstName`和 a `lastName`。还要注意区别，`Person`包含一个`gender`属性，而你的`SuperHero`包含一个`powers`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:03:28.557

```
SuperHero.prototype = Object.create( Person.prototype ); 
```

这基本上是让`SuperHero`继承所有的属性/原型`Person`。它与 using 几乎相同`new`，但采用了新的 ECMAScript 5 *Object.create()` 方式。如果它有助于理解它，也可以这样写。

```
SuperHero.prototype = new Person(); 
```

我不喜欢专门链接原型，因为这意味着两个原型是交织在一起的，我更喜欢一个是子类，一个是超类。

自己查看它们的一个好方法是做这样的事情。在这里，您可以真正看到`SuperHero`从`Person`. 请注意，它具有所有属性（第一个/最后一个/等），并且是附加的权力。

[**jsFiddle 演示**](http://jsfiddle.net/DccsD/)

```
var person = new Person();
SuperHero.prototype = person; // inheritance here
// the Object.create way is ECMAScript 5 (which not all browsers support yet sadly)

var superman = new SuperHero( "Clark" ,"Kent" , ["flight","heat-vision"] );
console.log( person );
console.log( superman ); ​ 
```

# php - python sorted()方法中实现的timsort算法

> ID：12375195
> 
> 赞同：-3
> 
> 时间：2012-09-11T17:50:39.747
> 
> 标签：php, python, sorting, timsort

我想知道 PHP 中是否有任何算法与 Python 中实现的用于排序列表的 timsort 算法等效？

碰巧我不得不将一些代码从 python 翻译成 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T13:53:55.070

根据 wiki python 的 sort() 是一个 timsort

[http://en.wikipedia.org/wiki/Timsort](http://en.wikipedia.org/wiki/Timsort)

您总是可以尝试在 php 中编写自己的 timsort 实现。我建议阅读 timsort 并查看一些示例。

[https://github.com/swenson/sort](https://github.com/swenson/sort)

# nhibernate - Fluent 映射和 NHibernate Xml 配置

> ID：12375201
> 
> 赞同：0
> 
> 时间：2012-09-11T17:50:54.643
> 
> 标签：nhibernate, orm, fluent-nhibernate

我有一个使用 NHibernate 的应用程序，我正在使用 Fluent NHibernate 来映射我的实体。它工作正常，但是，我想使用 NHibernate 的本地方式创建 SessionFactory，因为我的团队将在其他项目中使用这个库，所以我们需要这种灵活性来移动 nhibernate.cfg.xml。我的问题是：*如何在 SessionFactory 的配置中使用 nhibernate 的本机方式设置 Fluent Mappings？*

我在我的配置方法上尝试这样的事情：

```
private static ISessionFactory Configure()
{
    if (_factory != null)
        return _factory;

    var configuration = new Configuration().Configure();

        // I could set my assembly of mapping here, but it's on our internal framework
    var fluentConfiguration = Fluently.Configure(configuration)
        //.Mappings(c => c.FluentMappings.AddFromAssembly(typeof(ProductMap)))
        .BuildConfiguration();

    _factory = fluentConfiguration.BuildSessionFactory();

    return _factory;
} 
```

我试图通过xml设置它，但它不起作用。

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>     
        <!-- other configs here...-->     
        <mapping assembly="MyApplication.Data.Mapping" />
    </session-factory>
</hibernate-configuration> 
```

我不知道是否有任何方法可以在 xml 上设置此映射并传递给`FluentConfiguration`我的方法上的声明以创建`ISessionFactory`.

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:51:55.030

config 中的映射不起作用，因为它不会考虑 Fluentmappings（Nhibernate 不知道 FluentNhibernate）。您必须通过代码设置它。我能想到的最佳选择是在构建 sessionfactory 之前实现一个挂钩来更改配置对象：

```
private static ISessionFactory Configure()
{
    if (_factory != null)
        return _factory;

    var configuration = new Configuration().Configure();

    foreach(var alteration in alterations)
    {
        alteration.AddTo(configuration);
    }

    _factory = fluentConfiguration.BuildSessionFactory();

    return _factory;
}

// in your alteration
Configuration AddTo(Configuration config)
{
    return Fluently.Configure(config)
               .Mappings(c => c.FluentMappings.AddFromAssembly(typeof(ProductMap)))
               .BuildConfiguration();
} 
```

# node.js - （节点）警告：检测到可能的 EventEmitter 内存泄漏。增加了 11 位听众。使用emitter.setMaxListeners() 增加限制

> ID：12375204
> 
> 赞同：0
> 
> 时间：2012-09-11T17:50:56.673
> 
> 标签：node.js

我是 Nodjs 的新手。setMaxListeners(0) 对我不起作用。我在随后连接到数据库（mysql）时收到此错误。我的代码中只有：

```
var http= require(), etc;
http.createServer(
function (req, res) { ... }).listen(8888); 
```

函数中有许多切换案例，提交表单和在不同切换案例之间执行 sql 查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T04:04:54.737

在没有先看一些代码的情况下，您可能只是看一下您是否使用输入`.on`处理程序而不是`.once`处理程序。

如果您正在创建许多`.on`事件处理程序，一旦请求/响应周期的执行停止，它们可能不会被释放。

尝试将部分或大部分`.on`处理程序转换为使用`.once`，看看效果如何。

# r - multcomp Tukey-Kramer

> ID：12375209
> 
> 赞同：7
> 
> 时间：2012-09-11T17:51:23.803
> 
> 标签：r, statistics, posthoc, lsmeans

我有一个不平衡的实验，我们在三个地点（L、M、H）测量`met`四种不同植被类型（a、b、c、d）的参数（ ）。所有三个地点都存在所有植被类型。植被类型在 L 和 M 处重复 4 次，在 H 处重复 8 次。

因此，简单的 anova 和 TukeyHSD 将不起作用。包 Agricolae ( `HSD.test`) 和 DTK ( `DTK.test`) 仅适用于单向设计，然后是 multcomp...`mcp`函数中的 Tukey 测试是否计算 Tukey-Kramer 对比，还是给出常规的 Tukey 对比？我认为第一个是这种情况，因为该软件包旨在测试不平衡设计的多重比较，但我不确定，因为两种方法产生的 p 值实际上是相同的。那么什么测试是合适的呢？

此外，是否有更合适的方法来为不平衡的数据集进行这种双向方差分析？

```
library(multcomp)

(met     <-  c(rnorm(16,6,2),rnorm(16,5,2),rnorm(32,4,2)))
(site    <-  c(rep("L", 16), rep("M", 16), rep("H", 32)))
(vtype   <-  c(rep(letters[1:4], 16), rep(letters[1:4], 16), rep(letters[1:4], 32)))

dat  <-  data.frame(site, vtype, met)

# using aov and TukeyHSD
aov.000  <-  aov(met ~ site * vtype, data=dat)
summary(aov.000) 
TukeyHSD(aov.000) 

# using Anova, and multcomp
lm.000     <-  lm(met ~ site * vtype, data=dat)
summary(lm.000)
library(car)
Anova.000  <-  Anova(lm.000, data=dat)

dat$int  <-  with(dat, interaction(site, vtype, sep = "x"))
lm.000   <-  lm(met ~ int, data = dat)
summary(lm.000)
summary(glht.000 <- glht(lm.000, linfct = mcp(int = "Tukey"))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T10:53:40.473

对于不平衡数据，可以使用 III 型 SS 的方差分析来代替 I 型 SS [1]。R [2] 中 III 型 anova 的计算：

```
model <- (met ~ site * vtype)
defopt <- options()
options(contrasts=c("contr.sum", "contr.poly"))
print(drop1(aov(model),~.,test="F"))
options <- defopt 
```

对于不平衡的数据，可以使用调整均值的成对比较。R [4] 中的计算：

```
library(lsmeans)
print(lsmeans(model, list(pairwise ~ site)), adjust = c("tukey"))
print(lsmeans(model, list(pairwise ~ vtype)), adjust = c("tukey"))
print(lsmeans(model, list(pairwise ~ site | vtype)), adjust = c("tukey"))
print(lsmeans(model, list(pairwise ~ vtype | site)), adjust = c("tukey")) 
```

第 2 行和第 3 行比较了主效应“site”和“vytpe”​​的水平。第 4 行和第 5 行分别比较了一个因素在另一个因素的每个水平上的水平。

我希望这有帮助。

参考

[1] 米利肯和约翰森。2009\. 杂乱数据分析。第 1 卷。

[2] [http://www.statmethods.net/stats/anova.html](http://www.statmethods.net/stats/anova.html)

[3] [http://cran.r-project.org/web/packages/lsmeans/vignettes/using-lsmeans.pdf](http://cran.r-project.org/web/packages/lsmeans/vignettes/using-lsmeans.pdf)

# java - 调用 MainFrame 后如何运行小程序代码？

> ID：12375210
> 
> 赞同：0
> 
> 时间：2012-09-11T17:51:24.787
> 
> 标签：java, swing, applet, jframe

使用 Java 小程序调用 MainFrame 后如何运行一些代码？这可能吗？

```
Frame frame = new MainFrame(new ClassName(),256,256);
System.out.println("This won't print!"); 
```

有人可以解释我如何在调用 MainFrame 后打印它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:58:48.213

Java 的标准库中没有`MainFrame`类。

您可能看到的是一个既可以作为 Applet 也可以作为应用程序运行的程序。
当作为应用程序运行时，主 GUI 类显然被称为`MainFrame`，而您引用的行是它的构造位置。请注意，它接收一个类的实例`ClassName`；这可能是程序的逻辑所在（模型）。

您`System.out.println` *将*`MainFrame(...)`在构造函数完成后被调用。
只有在系统`System.exit(int)`从构造函数调用返回之前退出系统（例如通过调用），您`System.out.println`才不会被访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:13:30.347

作为一个简单的例子，看一下这段代码：

```
package mainframe;

import javax.swing.JFrame;

/**
 *
 * @author codeguru <codeguru@users.sourceforge.net>
 */
public class MainFrame extends JFrame {

    public static void main(String[] args) {
        JFrame frame = new MainFrame();

        System.out.println("This prints.");
    }
} 
```

这给出了预期的输出：

```
This prints. 
```

从您的原始代码中，我看不到您在问题标题中引用的小程序在哪里。为了帮助您，我们需要更多地了解`MainClass`和`ClassName`。这些看起来像您编写的自定义类，或者是您正在学习的示例的一部分。

# php - PHP如何在没有HTML标签的情况下回显

> ID：12375215
> 
> 赞同：2
> 
> 时间：2012-09-11T17:51:35.283
> 
> 标签：php, html, escaping, xss

我有一种系统，每个人都可以输入他想要的任何内容。不过，他们似乎也可以使用诸如`<img SRC="..."/>`等标签`<a href="..."></a>`。

你怎么能完全防止这种情况呢？例如，如果有人`<h1>Hello</h1>`输入文本不会变大，但它只会显示`<h1>Hello</h1>`.

如果无法做到这一点，请给我一个替代方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T17:55:53.767

要使 HTML 以书面形式显示，您需要使用“转义”特殊字符 &、< 和 > [`htmlspecialchars()`](http://uk.php.net/manual/en/function.htmlspecialchars.php)。

或者，您可以删除所有标签并使用[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T17:54:10.677

您可以尝试：

```
echo htmlspecialchars('<a href="http://www.google.com">Google</a>'); 
```

更多信息[在这里](http://fr2.php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T17:54:37.647

只需在要打印的字符串上使用 htmlentities

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:09:07.787

特殊字符或标签被视为不同的元素。在将文本插入数据库之前，您可以使用**htmlspecialcharacters($string_to_be_inserted)**来转义 html 标签。

所有的 html 标签都会被删除，只有文本会被插入到数据库中。

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T18:16:00.577

您还可以使用[HTMLPurifier](http://htmlpurifier.org/)从用户输入中去除不需要的 HTML 标签

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-25T23:10:05.583

使用 htmlspecialchars_decode() 函数。它对我来说很好......

使用指南

带代码的文本

```
<?php

    $text = " 
    <html>
    <head>
        <title>Page Title</title>
    </head>
    <body>
         Reference site about Lorem Ipsum, giving information on its origins, as well as a random Lipsum generator.
    </body>
    </html> ";

    OR

    $text = $row['columnname'];  // Here define your database table column name.

    echo htmlspecialchars_decode($text);  

?> 
```

输出：

关于 Lorem Ipsum 的参考站点，提供有关其起源的信息，以及随机 Lipsum 生成器。

# javascript - 异步设置为 false 的 jquery ajax 可防止 Chrome 中以前的显示更改

> ID：12375218
> 
> 赞同：7
> 
> 时间：2012-09-11T17:51:40.720
> 
> 标签：javascript, jquery, ajax, google-chrome, browser

所以我有这个：

```
$('.something').click(function(){
          $('body').html('');

          $.ajax({
            url: 'someurl',
            dataType: 'json',
            async: false,
            success: function(data){
              //do stuff
              alert('yo');
            }
          });

          return false;   
}); 
```

在 Firefox 中，正文会在正确发出“哟”警报之前变为空白……但在 Chrome 中，即使在 $('body').html(' ') 调用是在 ajax 之前执行的......这是由于设置为 false 的异步设置......如果它是真的，它也将在 chrome 中正常工作

有没有办法在 Chrome 中正确调用 ajax 之前调用 $('body').html() 调用，同时保持异步标志设置为 false？

此外，最好不必设置超时

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T17:57:23.080

您确定您已经看到在使用该代码进行 AJAX 调用之前页面变为空白吗？这不应该在任何浏览器中发生。

脚本运行时浏览器窗口根本不会更新，因此同步调用将阻止所有更新。

要在 AJAX 调用之前更新浏览器，请使用`setTimeout`，这将在发送请求之前将控件返回给浏览器：

```
$('.something').click(function(){
  $('body').html('');

  window.setTimeout(function() {

    $.ajax({
      url: 'someurl',
      dataType: 'json',
      async: false,
      success: function(data){
        //do stuff
        alert('yo');
      }
    });

  }, 0);

  return false;   
}); 
```

注意：这当然意味着您不能在函数的返回值中使用请求的结果，如果这是同步调用的意图。如果需要事件处理程序同步，则不能在 AJAX 请求之前更新浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-05T20:56:06.003

引用自[http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/)

> async (默认：true) 类型：Boolean 默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用成功/错误/完成回调选项而不是 jqXHR 对象的相应方法，例如 jqXHR.done() 或已弃用的 jqXHR.success()。

也许你可以试试这个：用`$.ajax beforeSend: function () {}`

```
$('.something').click(function() {  
    $.ajax({
        url: 'someurl',
        dataType: 'json',
        async: false,
        beforeSend: function (){
          $('body').html('');
        },
        success: function(data){
          //do stuff
          alert('yo');
        }
    });

    return false;   
}); 
```

# svg - 华硕 Slate 平板电脑上的 RaphaelJS 触控支持

> ID：12375228
> 
> 赞同：3
> 
> 时间：2012-09-11T17:52:02.987
> 
> 标签：svg, touch, raphael

我发现自己处于一个相当脆弱的境地，我正在开发一个 Web 应用程序，其界面几乎完全使用 RaphaelJS 作为 SVG 的前端来表达，但无法访问目标系统（不要让我开始）。目标系统是运行 Windows 7 的[Asus Slate 设备](http://www.asus.com/Eee/Eee_Pad/Eee_Slate_EP121/)，并且支持触摸屏。

我的理解是 Raphael 的`drag`支持会自动包含简单的触摸事件——因此触摸屏会自动像鼠标一样工作。但是，可拖动元素在石板上变得不具有交互性。我尝试使用 Raphael 的`touchstart`,`touchend`和`touchmove`events 与我传递给 的相同函数`drag`，如下所示：

```
var element = canvas.circle( canvas.cwidth / 2, canvas.cheight / 2, 100 ).attr( { fill: 'red', stroke: 'black', 'stroke-width': 5, cursor: 'move' } );

var startDrag = function( x, y )
{
    console.log("starting drag" );
    element.attr( { 'fill-opacity': 0.5 } );
};
var endDrag = function( x, y )
{
    console.log("stopping drag" );
    element.animate( { transform: "T0,0", fill: 'red', 'fill-opacity': 1 }, 1000, 'bounce' );
};
var continueDrag = function( dx, dy, x, y )
{        
    var r = Math.sqrt( dx * dx + dy * dy ) / ( canvas.cwidth / 2 ) * 255;
    var g = x / canvas.cwidth * 255;
    var b = y / canvas.cheight * 255;
    element.transform( [ "T", dx, dy ] );
    element.attr( 'fill', Raphael.rgb( r, g, b ) );
};

element.touchstart( startDrag );
element.touchend( endDrag );
element.touchmove( continueDrag );
element.drag( continueDrag, startDrag, endDrag ); 
```

不幸的是，这根本没有效果。

谁能给我提供任何有用的设备，不包括飞往德克萨斯州以获得对目标设备的开发访问权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T20:38:07.153

好吧，这适用于 PlayBook，它不需要使用触摸事件，而不是等效于单击事件

```
/* Set up generic drag */   
var start=function() {
    this.data("oldt", this.transform());                 
}, move = function(dx, dy) {
    // Set up reluctance:- only move if changed by at least 25 pixels
    if (dx>=25 || dy>=25){
        this.attr("fill","blue");
        this.transform(this.data("oldt") + "T" + dx + "," + dy);
        this.data("move", "T" + dx + "," + dy);
    }}, up = function() {
        this.attr("fill","green")   
    };  
    var box = canvas.rect(150,50,100,100).attr("fill", "white");
    box.drag(move,start,up);
    box.touchstart(function(){
    this.attr("fill","red");
}); 
```

如果框被拖动，它会在释放时变为蓝色和绿色。如果被触摸，它会变成红色，直到它被移动。磁阻降低了对运动的敏感度，因此触摸事件不会因小运动而变成拖动。看到[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/raphaeljs/zA35jGiPPi4)。

# php - 如何从生成的数组中回显内容 $actsAs = array('Containable');

> ID：12375230
> 
> 赞同：1
> 
> 时间：2012-09-11T17:52:13.273
> 
> 标签：php, cakephp, cakephp-2.0

我已经阅读了 CakeBook 上[关于](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)Containable 数组的指南。

```
class Post extends AppModel {
    public $actsAs = array('Containable'); 
```

结果是：

```
array(
    (int) 0 => array(
        'Post' => array(
            'id' => '1',
            'title' => 'This is the first post',
            'slug' => 'this-is-the-first-post',
            'body' => 'body body 111body body 111body body 111body body 111body body 111body body 111body body 111',
            'image_id' => '0',
            'language' => 'sv',
            'translation_id' => '0',
            'created' => '2012-09-03 17:45:57',
            'modified' => '2012-09-03 19:12:21'
        ),
        'Image' => array(
            'id' => null,
            'name' => null,
            'url' => null,
            'alt' => null,
            'description' => null
        ),
        'Asset' => array(),
        'Readmore' => array(),
        'Reference' => array(),
        'Category' => array(),
        'Course' => array(),
        'Tag' => array(),
        'User' => array(
            (int) 0 => array(
                'password' => '*****',
                'id' => '2',
                'username' => 'test0',
                'fullname' => 'Test Test',
                'url' => '',
                'email' => '',
                'role' => 'admin',
                'phone' => '+',
                'created' => '2012-09-03 17:44:22',
                'PostsUser' => array(
                    'id' => '1',
                    'post_id' => '1',
                    'user_id' => '2'
                )
            ),
            (int) 1 => array(
                'password' => '*****',
                'id' => '1',
                'username' => 'test1',
                'fullname' => 'Frank',
                'url' => '',
                'email' => '',
                'role' => 'admin',
                'phone' => '',
                'created' => '2012-09-03 17:41:25',
                'PostsUser' => array(
                    'id' => '3',
                    'post_id' => '1',
                    'user_id' => '1'
                )
            )
        )
    ), 
```

但是打印出数组的特定部分是行不通的。因此，如果我在 Post 的索引视图中，我会写：

```
echo h($post['Post']['title']); 
```

一切都很好，但是当我尝试时：

```
echo h($post['User']['fullname']); 
```

它不起作用。我明白了，当我在帖子和用户之间有一个 hasmany 和 belgosto 关系时，我必须遍历用户。

那么如何打印与帖子关联的所有用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:08:30.123

欢迎来到堆栈溢出！

`$post['User']`是一个用户数组，因此，每个用户都有一个索引，例如，要获取`test0´s`全名，您需要执行以下操作：

```
echo h($post['User'][0]['fullname']); 
```

尝试以下操作以显示所有用户的全名：

```
<?php
foreach($post['User'] as $user) { 
    echo h($user['fullname']);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T07:36:57.973

谢谢！我找到了解决方案。我有点粗心，我之前尝试了一个手动完成的解决方案，并为该模型添加了一个 PostUser 模型和一个控制器。删除它们，一切正常。蛋糕魔法再次起作用。

# c++ - 使用 CMake 添加文件

> ID：12375231
> 
> 赞同：2
> 
> 时间：2012-09-11T17:52:19.337
> 
> 标签：c++, visual-c++, cmake

我现在正在用 CMake 构建一个动态库，我现在遇到的问题与为库添加文件有关。我的项目结构如下：

```
----src
     |
  thrid_party---boost_1_50_0----boost
     |       ---   |        ----libs
     |       ---   |        ---- | --- filesystem
     |       ---   |        ---- | ---   |  ------src 
```

我的CMakeLists.txt文件位于该`src`目录下，文件内容如下：

```
cmake_minimum_required( VERSION 2.6 )
project (temp)
#build the third party library
include_directories( ${irisimp_SOURCE_DIR}/../third_party/boost_1_50_0)
set (boost_path 
${irisimp_SOURCE_DIR}/../third_party/boost_1_50_0/libs)

set (BOOST_LIST
${boost_path}/filesystem/src/codecvt_error_category.cpp 
${boost_path}/filesystem/src/operations.cpp 
${boost_path}/filesystem/src/path.cpp 
${boost_path}/filesystem/src/path_traits.cpp 
${boost_path}/filesystem/src/portability.cpp 
${boost_path}/filesystem/src/unique_path.cpp 
${boost_path}/filesystem/src/utf8_codecvt_facet.cpp 
${boost_path}/filesystem/src/windows_file_codecvt.cpp 
${boost_path}/filesystem/src/windows_file_codecvt.hpp 
)
add_library ( boost SHARED ${BOOST_LIST}) 
```

我运行这个脚本没有问题，但是，输出的 Visual Studio 10 项目不包含文件 `${boost_path}/filesystem/src`夹中的所有源文件。实际上只保留 windows_file_codecvt.cpp。因此，编译此项目将失败。我想知道我应该怎么做才能确保 Visual Studio 10 项目可以包含 CMakeLists.txt 中指示的所有源文件。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:44:49.313

尝试在路径之间放置分号，如下所示：

```
set (BOOST_LIST
  ${boost_path}/filesystem/src/codecvt_error_category.cpp;
  ${boost_path}/filesystem/src/operations.cpp;
  ${boost_path}/filesystem/src/path.cpp;
  ${boost_path}/filesystem/src/path_traits.cpp; 
  ${boost_path}/filesystem/src/portability.cpp;
  ${boost_path}/filesystem/src/unique_path.cpp;
  ${boost_path}/filesystem/src/utf8_codecvt_facet.cpp; 
  ${boost_path}/filesystem/src/windows_file_codecvt.cpp; 
  ${boost_path}/filesystem/src/windows_file_codecvt.hpp;
) 
```

如果这不起作用，请尝试

```
add_library(boost SHARED
  ${boost_path}/filesystem/src/codecvt_error_category.cpp
  ${boost_path}/filesystem/src/operations.cpp 
  ${boost_path}/filesystem/src/path.cpp 
  ${boost_path}/filesystem/src/path_traits.cpp
  ...
  ${boost_path}/filesystem/src/windows_file_codecvt.hpp) 
```

这可能有助于调试问题所在。

# javascript - 在循环中使用 `this` 来定位当前项目

> ID：12375233
> 
> 赞同：2
> 
> 时间：2012-09-11T17:52:20.167
> 
> 标签：javascript, jquery

我已经为我的问题设置了这个 jsfiddle：http: [//jsfiddle.net/7MjN6/](http://jsfiddle.net/7MjN6/)

如您所见，我有两个图像。我希望每个被单击时围绕每个的 div 展开。我正在尝试使用该`this`对象来确保单击图像只会扩展该图像的 div，但我确定我使用`this`错误，因为它没有连接。如果有人可以刺伤我的小提琴，将不胜感激！

HTML：

```
<body>
    <div class="img-container">
        <a href="#"><img src="http://blueantlabs.com/wp-content/themes/blueantplate/img/port-wide/thefutureproject-605.png" /></a>
    </div>
    <div class="img-container">
        <a href="#"><img src="http://blueantlabs.com/wp-content/themes/blueantplate/img/port-wide/thefutureproject-605.png" /></a>
    </div>
</body>​ 
```

JS：

```
$(function(){
    $('.img-container').each(function(index){
        var imgHeight = $(" a img").height();
        $('a').click(function(e){
            e.preventDefault;
            $('div').animate({height: imgHeight});
        });
    });     
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:56:40.980

试试这个方法。你根本不需要`.each`：

```
$(function() {
    $('a').click(function(e) {
        var imgHeight = $(this).find('img').height(); // use "this", find the img inside
        e.preventDefault(); // this is a method, must use parentheses
        $(this).parent().animate({ // "this" is the anchor; move up to the parent
            height: imgHeight
        });
    });
});​ 
```

[http://jsfiddle.net/mblase75/7MjN6/4/](http://jsfiddle.net/mblase75/7MjN6/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:54:46.347

您需要更改`$("div").animate(...)`为`$(this).closest("div").animate(...)`. 事件处理程序内`this`指的是单击的链接。您不想扩展所有 div（您当前的版本会这样做）；您想展开包装点击链接的 div。您使用导航到那个[`.closest()`](http://api.jquery.com/closest/)。

# ruby-on-rails - 在其他方法完成后运行方法延迟作业 rails 3

> ID：12375236
> 
> 赞同：0
> 
> 时间：2012-09-11T17:52:47.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在使用[delayed_job](https://github.com/collectiveidea/delayed_job) gem 来延迟运行方法。

我想先运行一个方法，当第一个方法完成后运行第二个方法。

1º 方法

```
Order.delay(queue: "Job", priority: 1, run_at: job.minutes_to_in_progress_overtime.minute.from_now).inprogress_overtime(job) 
```

2º 方法

```
Order.delay(queue: "Job", priority: 1, run_at: job.minutes_to_cancel_due_to_overtime.minute.from_now).canceled_overtime(job) 
```

这是我的课堂顺序：

```
class Order

  def self.inprogress_overtime(job)
   #actions goes here
  end

  def self.canceled_overtime(job)
   #actions goes here
  end

 end 
```

我该怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:26:09.947

根据您的要求，我认为就这么简单？

```
# enqueue the inprogress_overtime
Order.delay(queue: "Job", priority: 1, run_at: job.minutes_to_in_progress_overtime.minute.from_now).inprogress_overtime(job)

class Order

  def self.inprogress_overtime(job)
    # actions goes here

    # now enqueue the canceled_overtime
    Order.delay(queue: "Job", priority: 1, run_at: job.minutes_to_cancel_due_to_overtime.minute.from_now).canceled_overtime(job)
  end

  def self.canceled_overtime(job)
    # actions goes here
  end

end 
```

注意：可能不需要从 inprogress_overtime 延迟，因为此时您已经在后台作业中运行？

# c# - 为什么 json.net 只显示 s#arp EntityWithTypedId 类？

> ID：12375238
> 
> 赞同：0
> 
> 时间：2012-09-11T17:52:48.443
> 
> 标签：c#, json.net, s#arp-architecture

我在一个项目中使用旧版本的 Sharp arch，我正在尝试使用 JSON.NET 进行序列化。JavascriptSerializer 有效，但我更喜欢 JSON.NET 作为首选项。

这就是问题所在。出于某种原因，当我尝试序列化一个简单的 Sharp 对象时，我得到以下信息：

```
// my sharp object
[Serializable]
public class Contact : Entity
{
    public virtual string EmailAddress { get; set; }
}

...

// in sharp, this is what happens to Entity
[Serializable]
public abstract class Entity : EntityWithTypedId<int> {
    protected Entity();
}

// and then into EntityWithTypedId
[Serializable]
public abstract class EntityWithTypedId<IdT> : ValidatableObject, IEntityWithTypedId<IdT> {
    protected EntityWithTypedId();

    [JsonProperty]
    [XmlIgnore]
    public virtual IdT Id { get; protected set; }

    public override bool Equals(object obj);
    public override int GetHashCode();
    protected override IEnumerable<PropertyInfo> GetTypeSpecificSignatureProperties();
    public virtual bool IsTransient();
} 
```

当我运行以下 JSON 转换时，我只返回`{ "Id" : 0 }`结果。

```
Contact test = new Contact {
    EmailAddress = "test@test.com"
};
string result = JsonConvert.SerializeObject(test); 
```

关于如何返回整个对象内容的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T22:36:55.407

S#arp Architecture 中的 BaseObject 类的成员序列化设置为 OptIn，已在 2.0 中删除。

您的选择是：

*   夏普架构 2.0 更新
*   使用不同的 json 序列化器，[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)很棒。
*   重新编译 Sharp Architecture 1.6 并删除该属性
*   将 JsonProperty 属性添加到要序列化的特定属性

# ios - 从 url 获取的图像不显示是

> ID：12375239
> 
> 赞同：0
> 
> 时间：2012-09-11T17:52:53.710
> 
> 标签：ios, uiimageview

好吧，我有一个自定义单元格，这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier=@"ListTableCell";
    //this is the identifier of the custom cell
    ListsCell *cell = (ListsCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ListsCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    NSURL *url_left=[NSURL URLWithString:[images_url objectAtIndex:(indexPath.row*2)]];
    cell.Left.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:url_left]];
    NSURL *url_right=[NSURL URLWithString:[images_url objectAtIndex:(indexPath.row*2+1)]];
    cell.Right.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:url_right]];

    return cell;
} 
```

网址很好，因为我在 NSLog 中将它们打印出来，它们很好。此外，如果我从属性中放置静态图像，我可以看到它，我只能看到来自网络的图像。

如果与此无关，则数组 image_url 通过解析 json 数组来获取其 url。

也在我的

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
... images_url filling with data.
    [self.myTable.reloadData];
} 
```

我重新加载数据。

这是为什么？

我也有这些方法：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int i=[images_url count]/2;
    return i;
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 81;
} 
```

不要浪费时间，在 [图像计数]/2 中。这是因为我有 10 个网址，但由于在我的自定义单元格中每个单元格有 2 个图像视图，我需要 5 行。

# java - Android HTTPS 客户端不从套接字读取数据

> ID：12375241
> 
> 赞同：2
> 
> 时间：2012-09-11T17:53:01.593
> 
> 标签：java, android, ssl, https, httpclient

我正在开发一个应用程序，它将从 C++ 服务器（目前在我的本地网络上）读取 SSL 加密字符串数据，并以实物形式返回信息。

我已经学习了许多关于 bouncycastle 提供程序、自定义套接字工厂、http 客户端的教程和许多示例，并且我已经能够将信息从模拟器发送到我的 c++ 服务器，但是模拟器无法从插座。相反，我得到：

> java.net.SocketTimeoutException：读取超时

服务器识别握手和连接，并读取模拟器写入的传入语句。

在 AsyncTask 线程中调用请求

```
private class getXmlTask extends AsyncTask<String, String, String> { 

    protected void onPreExecute() {
        pd = ProgressDialog.show(NewJobsView.this,"Retrieving Data","Please Wait",true,false);
        pd.setCancelable(true);

    }
    protected void onPostExecute(String XML) {
        Log.i("XML:", XML);
        parseXml();
        pd.dismiss();
    }

    @Override
    protected String doInBackground(String... params) {
        return getXml();
    }   
} 
```

这是我正在使用的请求类（如果有点乱，请原谅）：

```
public class HttpRequest{

    MyHttpClient httpClient;
    HttpContext localContext;
    private String ret;

    HttpResponse response = null;
    HttpPost httpPost = null;
    HttpGet httpGet = null;
    Context context = null;   

    int retry = 0;

    public HttpRequest(Context c){
        HttpParams params = new BasicHttpParams();

        context = c;

        HttpConnectionParams.setConnectionTimeout(params, 60000);
        HttpConnectionParams.setSoTimeout(params, 60000);
        HttpProtocolParams.setContentCharset(params, HTTP.DEFAULT_CONTENT_CHARSET);
        HttpProtocolParams.setUseExpectContinue(params, true);

        httpClient = new MyHttpClient(context);             

        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);       

        httpClient.setParams(params);
        localContext = new BasicHttpContext();    
    }

    public void abort() {
        try {
            if (httpClient != null) {
                System.out.println("Abort.");
                httpPost.abort();
            }
        } catch (Exception e) {
            System.out.println("MyApp" + e);
        }
    }

    public String sendPost(String url, String data) {
        return sendPost(url, data, null);
    }    

    public String sendPost(String url, String data, String contentType) {
        ret = null; 

        httpPost = new HttpPost(url);
        httpPost.addHeader("User-Agent", data);
        response = null;               

        StringEntity ent = null;        

        try {
            ent = new StringEntity(data,"UTF-8");
        } catch (UnsupportedEncodingException e) {
            Log.e("MyApp", "HttpUtils : UnsupportedEncodingException : "+e);
        }

        httpPost.setEntity(ent);

        try {

            response = httpClient.execute(httpPost);

            if (response != null) {
                ret = EntityUtils.toString(response.getEntity());
                Log.e("MyApp", "HttpUtils: " + ret);
            }
            else{
                abort();
            }

        } catch (Exception e) {
            Log.e("MyApp", "HttpUtils: " + e);
        }

        Log.d("MyApp", "Returning value:" + ret);

        if(retry < 3){
            sendPost(url, data);
            retry = retry +1;
        }
        else{
            return ret;
        }

        return ret;

    }  

} 
```

其他一些注意事项：

我有

> 使用权限 android:name="android.permission.INTERNET"

在我的清单文件中。

我还验证了 SSL 服务器工作正常，因为其他客户端（尽管是 C++）能够保持连接并从套接字读取。

MyHttpClient 对象是

[如何创建包含客户端证书链的 BKS (BouncyCastle) 格式 Java 密钥库](https://stackoverflow.com/questions/4065379/how-to-create-a-bks-bouncycastle-format-java-keystore-that-contains-a-client-c)

我已经旋转了很长时间，任何答案将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:29:23.033

首先检查您的网址，并建议尝试使用[httpsconnection](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)

它比普通的 httpGet 更好，因为有时它会给你 sockettime / ssl 或任何其他 io 异常

# regex - 金额的正则表达式

> ID：12375244
> 
> 赞同：3
> 
> 时间：2012-09-11T17:53:32.867
> 
> 标签：regex

如何在这个正则表达式中设置最高价格限制（例如 £50.00）？

**正则表达式：/** ^\£?[0-9]+. [0-9][0-9]?$/

**用于测试的示例代码**
有效值：
12.55
£12.55
3.88
£0.00

无效值：
12 英镑。
12 英镑
12
英镑 12.445 英镑

在这里，我也想执行以下规则。
**有效：** 50.00（最大）

**无效：** 50.99,100.00,1212221.00

如何在上述正则表达式中实现这一点？
[JSFIDDLE 可在此处获得](http://jsfiddle.net/d9fLe/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:07:06.210

```
/^\£?((50(\.00)?)|([0-4]?[0-9](\.[0-9]{2})))$/ 
```

[http://jsfiddle.net/s2hL7/](http://jsfiddle.net/s2hL7/)

# iphone - 将排行榜分数用于游戏逻辑

> ID：12375245
> 
> 赞同：2
> 
> 时间：2012-09-11T17:53:38.207
> 
> 标签：iphone, ios5, cocos2d-iphone, gamekit

我在规则中看不到任何关于此的内容...但是 Gamekit 指南说您可以检索排行榜分数以显示它们，但我想知道是否可以在匹配过程中使用它们来更好地匹配玩家？有谁知道这样做的例子或自己做过的例子？我对如何实现它不感兴趣，只要它允许使用排行榜数据而不是显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:17:14.227

是的，您可以将数据用于任何您想要的。

GKLeaderboard 的文档经常提到“使用或显示”。 [http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/LeaderBoards/LeaderBoards.html#//apple_ref/doc/uid/TP40008304-CH6-SW13](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/LeaderBoards/LeaderBoards.html#//apple_ref/doc/uid/TP40008304-CH6-SW13)

也没有提到 App Store 审查指南中不允许这样做。 [https://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html) （需要开发者登录）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T05:41:39.333

嘿，您使用以下链接使用 Gamekit 希望它对您有所帮助：

[http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)

[http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2](http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2)

# yahoo - 在 yahoo 管道中组合 rss 提要中的项目以创建摘要或摘要提要

> ID：12375246
> 
> 赞同：1
> 
> 时间：2012-09-11T17:53:38.983
> 
> 标签：yahoo, yahoo-pipes

我需要一个雅虎管道设计，允许我从以下位置拉出现场项目： [http ://www.kayak.com/h/rss/buzzto?code=RTB&mc=USD&max=750](http://www.kayak.com/h/rss/buzzto?code=RTB&mc=USD&max=750)

并将它们变成摘要帖子。

例如：不是 10 个不同航班选项的帖子，而是创建一个新的提要，将过去 2 天的提要项目合并到 1 个新的“读者摘要”或摘要样式提要中。

现在是：

项目 1: LON 到 RTB $1,212 12 月 15 日 - 1 月 19 日在 Multiple Airlines 发现 1 天前

项目 2: PBI to RTB $530 Dec 16 - Jan 19 on United 发现 1 天前

项目 3: NYC to RTB $697 Dec 15 - Jan 18 on Multiple Airlines 发现 1 天前

第 4 项：JFK 到 RTB $815 12 月 14 日 - 1 月 18 日在 Taca Intl Air 发现 1 天前

需要它是：

第 1 项：

LON 至 RTB $1,212 12 月 15 日 - 1 月 19 日在 Multiple Airlines 发现 1 天前

PBI to RTB $530 Dec 16 - Jan 19 on United 1 天前发现

NYC to RTB $697 12 月 15 日 - 1 月 18 日在 Multiple Airlines 发现 1 天前

JFK to RTB $815 Dec 14 - Jan 18 on Taca Intl Air 发现 1 天前

# php - CodeIgninter - 两个左连接导致连接重置

> ID：12375247
> 
> 赞同：0
> 
> 时间：2012-09-11T17:53:39.677
> 
> 标签：php, codeigniter

交叉从 codeigniter 论坛发布，我在那里得到了蟋蟀。

我有一个查询，我使用两个左连接和几个内连接，它始终在 Firefox 中返回连接重置错误，并且在 apache 日志中没有错误消息。

如果我删除“左”参数，则不会发生相同的错误，如果我直接在数据库中从 $this->db->last_query() 运行 SQL 添加 LEFT 连接，它会正确返回（在 phpMyAdmin或命令行）。

不需要传递“内部”参数，我将它们放在那里进行实验。

```
$this->db->select('votes.uid AS voterUID, comments.uid AS voteeUID, voteTypes.id AS voteTypeID, userratingVoter.level AS voterLevel, userratingVotee.level AS voteeLevel');

$this->db->from('votes');

# Join the comments table on comments.id = votes.cid
$this->db->join('comments', 'comments.id = votes.cid', 'inner');

# Join the userauth table for admin WHERE clause below
$this->db->join('userauth',  'userauth.uid = votes.uid', 'inner');

# Join the votesTypes table for the WHERE IN clause below
$this->db->join('voteTypes', 'voteTypes.id = votes.voteid', 'inner');

# Join the userrating table twice once for the Voter once for the Votee
$this->db->join('userrating AS userratingVotee', 'userratingVotee.uid = comments.uid', 'left');
$this->db->join('userrating AS userratingVoter', 'userratingVoter.uid = votes.uid', 'left');

# Where in valid Vote Types
# Valid Vote Types: helpful, interesting, correct, incorrect
#                   5        4            2        7
$validVoteTypes = array(5,4,2,7);
$this->db->where_in('votes.voteid', $validVoteTypes);

# Where vote is active.
$this->db->where('votes.active',1);

# Where timestamp is greater than the last run timestamp.
$this->db->where('votes.timestamp >',$lastrun);

# Only standard user votes count, may have to update this if we get other authids
$this->db->where('userauth.authid',2); 
```

从 $this->db->last_query()... 分解 SQL 在 phpMyAdmin 和命令行中工作。

```
SELECT `votes`.`uid` AS voterUID, `comments`.`uid` AS voteeUID, `voteTypes`.`id` AS voteTypeID, `userratingVoter`.`level` AS voterLevel, `userratingVotee`.`level` AS voteeLevel

FROM (`votes`)

INNER JOIN `comments` ON `comments`.`id` = `votes`.`cid`
INNER JOIN `userauth` ON `userauth`.`uid` = `votes`.`uid`
INNER JOIN `voteTypes` ON `voteTypes`.`id` = `votes`.`voteid`

LEFT JOIN `userrating` AS userratingVotee ON `userratingVotee`.`uid` = `comments`.`uid`
LEFT JOIN `userrating` AS userratingVoter ON `userratingVoter`.`uid` = `votes`.`uid`

WHERE `votes`.`voteid` IN (5, 4, 2, 7)
 AND `votes`.`active` = 1
 AND `votes`.`timestamp` > '2012-03-01 00:00:00'
 AND `userauth`.`authid` = 2 
```

此外，如果我使用标准查询而不是活动记录语法，它会产生相同的结果。

```
$sql = "SELECT `votes`.`uid` AS voterUID, `comments`.`uid` AS voteeUID, `voteTypes`.`id` AS voteTypeID, `userratingVoter`.`level` AS voterLevel, `userratingVotee`.`level` AS voteeLevel FROM (`votes`) INNER JOIN `comments` ON `comments`.`id` = `votes`.`cid` INNER JOIN `userauth` ON `userauth`.`uid` = `votes`.`uid` INNER JOIN `voteTypes` ON `voteTypes`.`id` = `votes`.`voteid` LEFT JOIN `userrating` AS userratingVotee ON `userratingVotee`.`uid` = `comments`.`uid` LEFT JOIN `userrating` AS userratingVoter ON `userratingVoter`.`uid` = `votes`.`uid` WHERE `votes`.`voteid` IN (5, 4, 2, 7) AND `votes`.`active` = 1 AND `votes`.`timestamp` > '2012-03-01 00:00:00' AND `userauth`.`authid` = 2";

$query = $this->db->query($sql); 
```

如果我使用标准 JOIN 而不是 LEFT JOIN 则不会发生错误，尽管它不会返回我需要的数据。

**服务器信息：**

Apache/2.2.14 (Ubuntu) PHP/5.3.2 MySQL 5.1.63 CodeIgniter 2.1.2

应用程序/配置/数据库.php

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'some_user';
$db['default']['password'] = 'some_pass';
$db['default']['database'] = 'some_db';
$db['default']['dbdriver'] = 'mysqli';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:00:06.353

您在 Firefox 中看到错误的原因可能是因为 PHP 由于某种原因异常退出。~~如果您可以在您的 Web 服务器上找到错误日志，您可能会知道原因。~~编辑：刚刚发现您已经查看了错误日志；也许PHP没有设置在那里登录？

最可能的原因是查询返回了太多数据，以至于 PHP 在尝试处理所有数据时内存或处理时间不足。如果是这种情况，您可能想尝试在查询中使用`LIMIT`and`OFFSET`子句来一次获取一个“页面”数据。

# asp.net - 使用 ColdFusion 使用 ASP.Net Web 服务

> ID：12375253
> 
> 赞同：1
> 
> 时间：2012-09-11T17:54:13.910
> 
> 标签：asp.net, web-services, coldfusion

我正在创建一个 ASP.Net 网站来为我们的 ColdFusion 网站记录错误。ASP 站点公开了几个 Web 服务方法，我想传递有关错误的信息。为了测试整个过程，我正在执行以下操作：

```
[WebMethod]
public string InsertEvent(string iAppID) {
    return "Hello, " + iAppID;
}

<cffunction name="TestWebService2" access="remote" returntype="Any" >
    <cfinvoke method="InsertEvent" webservice="http://somewebsite.org/LogEvent.asmx?WSDL" >
        <cfinvokeargument name="iAppID" value="andy" >
    </cfinvoke>
</cffunction> 
```

只要没有需要传入的参数，我就可以使用 ColdFusion cfinvoke 标签调用 web 服务。如果我将参数添加到 web 服务，并尝试将它们传递给服务，我会收到以下错误：

找不到参数为 {iAppID={1}} 的 Web 服务操作 InsertEvent。

ColdFusion 服务器是否缓存 Web 服务调用？还是我错过了其他东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:16:53.050

尝试像这样调用网络服务：

```
<cfset ws = createObject("webservice","http://somewebsite.org/LogEvent.asmx?WSDL") />
<cfset result = ws.InsertEvent("Test Striong") />
<cfdump var="#result#" /> 
```

# jquery - 如何使用 jquery draggable 来防止元素相互拖拽

> ID：12375256
> 
> 赞同：0
> 
> 时间：2012-09-11T17:54:28.670
> 
> 标签：jquery, draggable

我正在使用 jquery 创建一个 UI，其中可以在“表面”div 中拖动多个元素。我不想让任何这些重叠，我真的可以在它们之间强制执行一个边距。理想情况下，我希望在拖动操作期间发生这种情况，以便用户可以看到他们实际上无法让元素彼此重叠（甚至太靠近），并且会意识到他们需要放在其他地方。

我已经查看了遏制选项，它看起来不像我想要的那样。有没有一种我想念的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:52:54.920

能够使用[http://sourceforge.net/projects/jquerycollision/解决](http://sourceforge.net/projects/jquerycollision/)

需要添加可拖动选项障碍：'.elem:not(.ui-draggable-dragging)', preventCollision: true

其中 .elem 是可拖动元素的类。

注意。:not(.ui-draggable-dragging) 是必需的，否则它会防止与自身发生碰撞并且不会移动

# php - PHP 备份和下载

> ID：12375261
> 
> 赞同：1
> 
> 时间：2012-09-11T17:54:44.690
> 
> 标签：php, backup, temp

我想为我的服务器上的文件和文件夹创建一个备份脚本，我发现了这个：

```
# Name of the buckup file
$filename = 'BACKUP_' . date('Y.m.d') . '.tar.gz';
# Target path where to save the file
$targetPath = '/path/to/backup/';
# Directory to backup
$dir = "/path/to/files/";  

# Execute the tar command and save file
system( "tar -pczf ".$targetPath ."".$filename." ".$dir ); 
```

效果很好，然后我可以将 URL 传递给脚本和正确的标题并下载文件。

我的问题是我会经常运行它并且不想将备份保留在服务器上。所以我试图找到一种创造性的方法来创建一个被删除的临时文件。问题是一些文件可能相当大，我无法知道文件何时完全下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:59:35.727

您可以在 /tmp 中创建备份文件，然后使用：

```
# Name of the buckup file
$filename = 'BACKUP_' . date('Y.m.d') . '.tar.gz';
# Target path where to save the file
$targetPath = '/path/to/backup/';
# Directory to backup
$dir = "/path/to/files/";  
# Execute the tar command and save file
system( "tar -pczf ".$targetPath ."".$filename." ".$dir );

readfile("{$targetPath}{$filename}"); // outputs file contents to a browser
unlink("{$targetPath}{$filename}"); // removes file from disk 
```

阅读[http://php.net/manual/ru/function.readfile.php](http://php.net/manual/ru/function.readfile.php)了解更多信息。

PS 此外，您可以使用 ZipArchive 类（内置）更灵活地创建自己的存档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:56:32.327

在数据库中添加文件名/路径和创建的时间戳，编写一个 cron 作业来删除大于您想要保留它的时间的任何内容。让它每小时运行一次，30 分钟。不管你觉得多么频繁是必要的。

至于它是否被下载，创建一个下载管理器。/download/file/id，其中 id 可以是该表中的 PK，并且仅在尚未下载时才删除，除非它已经 48 小时，或者类似的东西。

# web-services - 更改 webservice 调用中的 wsspasswordtype

> ID：12375263
> 
> 赞同：3
> 
> 时间：2012-09-11T17:54:45.627
> 
> 标签：web-services, basic-authentication

我试图通过 .Net 代码（控制台应用程序）使用工作日 Web 服务进行呼叫。

我已经添加了服务参考。所有命名空间的细节都很好，我能够获取命名空间中所有类的成员和方法。

当我尝试执行一个方法时，它会抛出一个错误（Client.AuthenticationErro（无效的用户名/密码）。我已经在代码中提供了客户端凭据并使用基本绑定。请在下面找到我的代码和 App.Config文件。但是当我使用 SOAP UI 进行 Web 服务调用时，一切正常。

```
class Demo
{

        static void GetPhoto(string EmployeeID)
        {
            HR.Employee_Image_GetType EmpImageGetType = new HR.Employee_Image_GetType();
            EmpImageGetType.version = "v17";
            HR.IDType EmpIDType = new HR.IDType();
            EmpIDType.Value = EmployeeID;
            HR.External_Integration_ID_Reference_DataType IDRef = new HR.External_Integration_ID_Reference_DataType();
            IDRef.ID = EmpIDType;

            HR.Employee_ReferenceType[] EmpRefArray = new HR.Employee_ReferenceType[1];
            HR.Employee_ReferenceType Empref = new HR.Employee_ReferenceType();
            Empref.Integration_ID_Reference = IDRef;
            EmpRefArray[0] = Empref;
            EmpImageGetType.Employee_Reference = EmpRefArray;
            var binding=new BasicHttpBinding(BasicHttpSecurityMode.Transport);
            binding.Security.Transport.ClientCredentialType=HttpClientCredentialType.Basic;
            Human_ResourcesPortClient proxy = new Human_ResourcesPortClient((System.ServiceModel.Channels.Binding)binding, new EndpointAddress("https://impl-cc.workday.com/ccx/service/amat1/Human_Resources/v17?wsdl"));
            proxy.ClientCredentials.HttpDigest.ClientCredential.UserName = "XXXXXX@XXXYY";
            proxy.ClientCredentials.HttpDigest.ClientCredential.Password = "xxxx";
            proxy.ChannelFactory.Credentials.HttpDigest.ClientCredential.UserName = "XXXXXX@XXXYY";
            proxy.ChannelFactory.Credentials.HttpDigest.ClientCredential.Password = "xxxx";
            proxy.ClientCredentials.UserName.UserName = "XXXXXX@XXXYY";
            proxy.ClientCredentials.UserName.Password = "xxxxx";
            try
            {
               HR.Employee_ImageType EmpImageType = proxy.Get_Employee_Image(EmpImageGetType);

                Console.WriteLine("Success");

            }
            catch (Exception exp)
            {
                Console.WriteLine("Exception:" +exp.Message +exp.StackTrace);

            }
            Console.ReadLine();
        }

      public static void BypassCertificateError()
        { ServicePointManager.ServerCertificateValidationCallback =
            delegate(Object sender1, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) 
            { return true; };
        }

    }

 - App.Config
<?xml version="1.0"?>
<configuration>
    <configSections>
    </configSections>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="Human_ResourcesBinding" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="TransportWithMessageCredential">
                        <transport clientCredentialType="Basic" proxyCredentialType="Basic"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
                <binding name="Human_ResourcesBinding1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="TransportWithMessageCredential">
                        <transport clientCredentialType="Basic" proxyCredentialType="Basic"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://impl-cc.workday.com/ccx/service/amat1/Human_Resources/v17"
                binding="basicHttpBinding" bindingConfiguration="Human_ResourcesBinding"
                contract="HR.Human_ResourcesPort" name="Human_Resources" />
        </client>
    </system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

**

谁能帮帮我？

# python-2.7 - 列出所有 dwg 文件并将其转换为地理数据库的脚本

> ID：12375267
> 
> 赞同：0
> 
> 时间：2012-09-11T17:55:10.557
> 
> 标签：python-2.7

这个脚本是对之前发布的脚本的改进，但它仍然给我一个“执行失败（CADToGeodatabase）”的错误它能够遍历目录和子目录，列出 dwg 文件，创建地理数据库但不能由于错误，使用要素数据集和要素类填充它！。请帮忙！

```
import os, os.path, arcpy
from arcpy import env
env.workspace = "J:/2010"
# Set workspace and variables
gdb = r"C:\data\2010.gdb"
arcpy.env.workspace = gdb
# Create a FileGDB for the fds
arcpy.CreateFileGDB_management("C:/data", "2010.gdb")
reference_scale = "1500"
for root, dirs, files in os.walk("J:/2010/"):
    for file in files:
        if file.endswith('.dwg'):
           print "current file is: " + file
           outDS = arcpy.ValidateTableName(os.path.splitext("d" +  
           os.path.basename(file))[0])
           arcpy.CADToGeodatabase_conversion(file, gdb, outDS, reference_scale) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:08:32.313

这句话`def recursive_file_gen(r"J:\2010"):`对我来说看起来很奇怪。我认为您不能在此处放置文字字符串。我很惊讶这完全可以运行。也许你打算做类似`def recursive_file_gen(directory=r"J:\2010"):`或简单的事情`def recursive_file_gen():`。

另外，我认为这句话`yield os.path.join(root, file)`需要缩进更多，以便在内部 for 循环中考虑。

我没有具体看到是什么导致脚本仅在一个子目录中工作。我需要更多关于正在发生的事情的细节。

**编辑：**我没有注意到该`recursive_file_gen`功能根本没有被使用。我不知道是什么导致了问题。我认为对arcpy更熟悉的人会对你更有帮助。

# c# - 泛型类型转换

> ID：12375268
> 
> 赞同：8
> 
> 时间：2012-09-11T17:55:15.503
> 
> 标签：c#, .net, generics, casting

我只是在 .NET 泛型类型转换中没有得到任何东西。有人可以解释以下代码片段中发生了什么吗？

```
void Main()
{
    IEnumerable<int> ints = new List<int>();
    IEnumerable<string> strings = new List<string>();

    var rez1=(IEnumerable<object>)ints; //runtime error
    var rez2=(IEnumerable<object>)strings; //works
    var rez3=(List<object>)strings; //runtime error
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T18:00:16.863

让我们从最简单的第二行开始。

该转换有效，因为类型参数 of[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)现在是[*协变*](http://msdn.microsoft.com/en-us/library/dd799517.aspx#InterfaceCovariantTypeParameters)的（这就是`out`in`out T`所做的）。这意味着您可以自由地将 an`IEnumerable<Derived>`转换为 a 。`IEnumerable<Base>`

第一行，这似乎是相同的情况，不起作用，因为`int`它是一个值类型。接口变体根本不适用于值类型，因为值类型并不真正继承自`System.Object`; 它们可以*装箱*成`object`，但不一样。该文档提到

> 差异仅适用于引用类型；如果为变体类型参数指定值类型，则该类型参数对于生成的构造类型是不变的。

最后，第三行不起作用，因为 的类型参数[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)是*invariant*。你可以看到`out`它的类型参数上没有；规则不允许这样做，因为`List<T>`它不是接口：

> 在 .NET Framework 4 中，变体类型参数仅限于泛型接口和泛型委托类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T17:59:37.340

这是因为接口协方差仅适用于引用类型。Int32 当然是一个值类型。

这提供了更多信息：http: [//blogs.msdn.com/b/ericlippert/archive/2009/11/30/what-s-the-difference-between-covariance-and-assignment-compatibility.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/11/30/what-s-the-difference-between-covariance-and-assignment-compatibility.aspx)

这也是如此：[http ://ericlippert.com/2011/09/19/inheritance-and-representation/](http://ericlippert.com/2011/09/19/inheritance-and-representation/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:41:28.007

从 派生的每个类型的定义，`System.ValueType`除了 之外`System.Enum`，实际上定义了两种东西：堆对象类型和存储位置类型。后者的实例可以隐式转换为前者（复制其中包含的数据），而前者的实例可以显式类型转换为后者（同样）；尽管这两种事物都由相同的 描述`System.Type`，并且尽管它们具有相同的成员，但它们的行为却截然不同。

A`List<AnyClassType>`会期望持有一堆堆对象引用；有问题的列表是`List<String>`, `List<StringBuilder>`,`List<Button>`还是其他任何东西，列表的用户可能会感兴趣，但它`List<T>`本身并不真正感兴趣。如果将 a 强制转换为 a `List<Button>`，`IEnumerable<Control>`调用其`GetEnumerator()`方法的人将期望获得一个对象，该对象将输出对从`Control`;派生的堆对象的引用。的回报`List<Button>.GetEnumerator()`将满足这一期望。相比之下，如果有人将 a`List<Int32>`转换为`List<Object>`，则调用的人`GetEnumerator()`会期望输出堆对象引用的`List<Integer>.GetEnumerator`东西，但会产生输出值类型整数的东西。

可以将`Int32`值存储到 a`List<Object>`或 a `List<ValueType>`; 将整数存储到这样的列表会将其转换为其堆对象形式并存储对它的引用；调用`GetEnumerator()`会产生一些输出堆引用的东西。但是，无法指定这样的列表将仅包含对应于 的堆类型的实例`Int32`。在 C++/CLI 中，可以声明类型为“对堆存储值类型的引用”的变量，但 .net 中泛型类型背后的机制不能用于此类类型。

# jquery - 当键盘可见时，jquery mobile 弹出窗口在 ipad 上消失

> ID：12375269
> 
> 赞同：3
> 
> 时间：2012-09-11T17:55:21.067
> 
> 标签：jquery, mobile, popup

我有弹出工作。使用 IPAD 并单击输入字段时，当文本输入字段获得焦点时，键盘显示和弹出窗口消失。这里弹出面板代码。请帮忙。

```
<div data-role="panel" data-id="popover1" data-panel="popover" class="ui-element-fixed-top  ui-triangle-top 
     ui-mobile-viewport ui-panel ui-popover ui-panel-active ui-fixed-overlay" 
    status="hidden" style="top: 0px; display: none; width: 500px; height: 445px; right: 100px; margin-top: 45px;">
      <div class="popover_triangle"></div>

    <div data-role="page" data-show="first" id="popover1-1" data-url="popover1-1" tabindex="0" data-internal-page="true" >
        <div  class="ui-content" role="main" style="font-family: Georgia; font-weight:bold; ">              
            <div  class="ui-field-contain ui-body ui-br" style="height:50px" >
                <label for="email" class="ui-input-text" style="text-align: right">Email:</label>
                <input type="email" name="email" id="email" value="" 
                 class="ui-body-c ui-corner-all ui-shadow-inset" style="width: 340px">
              </div>
                    <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br" style="height:50px">
            <label for="author" class="ui-input-text" style="text-align: right">Book author:</label>
            <input type="text" name="author" id="author" value="" 
            class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" style="width: 340px">
        </div>
        <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br" style="height:70px">
            <label for="title" class="ui-input-text" style="text-align: right">Book title:</label>
            <input type="text" name="title" id="title" value="" 
            class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" style="width: 340px">
        </div>

             <a href="docs-dialogs.html"  data-rel="back"  data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" 
                    class="closePanel ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all" id="btnSend" onclick="send();">
                    <span class="ui-btn-inner ui-btn-corner-all">
                    <span class="ui-btn-text">Send</span></span></a>       

                    <a href="docs-dialogs.html" data-role="button" data-rel="back"  data-corners="true" data-shadow="true" 
                    data-iconshadow="true" data-wrapperels="span" 
                    class="closePanel ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all"><span class="ui-btn-inner ui-btn-corner-all">
                    <span class="ui-btn-text">Cancel</span></span></a>    
    </div>
</div><!-- end page--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T23:20:36.460

我在这里面临同样的情况：

我们有一个 iPad 应用程序，它使用 iOS API 浏览器组件 (UIWebView) 来显示一个 html 页面，其中包含一组基于 Jquery、Jquerymobile 和 KineticJS 的工具。我们使用许多 jquery 小部件，主要是弹出窗口。

打开包含文本输入的特定弹出窗口时存在特定情况。弹出窗口在调用时按预期显示 - 但是，就在用户触摸输入文本并且显示 iPad 的虚拟键盘时，弹出窗口消失。也可能是它根本没有消失，而是以一种不再可见的方式“移动”了。

当我们通过 iPad 内置的 Safari 浏览器测试页面时，不会出现这种情况。在这种情况下，弹出窗口行为正确并被虚拟键盘稍微推动，但一旦键盘消失，弹出窗口就会返回其初始位置。

我相信这始于 iOS 7 及更高版本 - 我记得在以前的 iOS 版本中使用它没有任何问题。

我用 JQM 1.3.2 和 1.4.0 进行了测试。

JQM 团队正在解决这个问题：

[https://github.com/jquery/jquery-mobile/issues/6961](https://github.com/jquery/jquery-mobile/issues/6961)

* * *

变通方法更新：

在弹出窗口中的输入文本上设置焦点（），就在弹出窗口的“afteropen”事件中似乎可以解决这种情况，至少可以接受用户输入：弹出窗口和键盘都正确显示并且用户可以输入...

# java - 在 javafx 中的画布上平移

> ID：12375276
> 
> 赞同：3
> 
> 时间：2012-09-11T17:55:59.323
> 
> 标签：java, javafx-2

我正在尝试使用 javafx 2 创建一个画布，用户可以在其中平移和缩放。对于静态内容，我的解决方案有效，但是一旦在用户平移时更新内容，鼠标事件就会停止工作，直到释放并再次按下鼠标按钮。

以下是演示该问题的最小示例。如果单击白色区域，则可以平移，但如果通过单击红色矩形开始平移，则内容更新时会中断。

```
class Test extends StackPane
{
    private Timer timer = new Timer();
    private Rectangle rect;
    private double pressedX, pressedY;

    public Test()
    {
        setMinSize(600, 600);
        setStyle("-fx-border-color: blue;");

        timer.schedule(new TimerTask()
        {
            @Override
            public void run()
            {
                Platform.runLater(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        if (rect != null)
                            getChildren().remove(rect);

                        rect = new Rectangle(10, 10, 200, 200);
                        rect.setFill(Color.RED);
                        getChildren().add(rect);
                    }
                });
            }
        }, 0, 100);

        setOnMousePressed(new EventHandler<MouseEvent>()
        {
            public void handle(MouseEvent event)
            {
                pressedX = event.getX();
                pressedY = event.getY();
            }
        });

        setOnMouseDragged(new EventHandler<MouseEvent>()
        {
            public void handle(MouseEvent event)
            {
                setTranslateX(getTranslateX() + event.getX() - pressedX);
                setTranslateY(getTranslateY() + event.getY() - pressedY);

                event.consume();
            }
        });
    }
}

public class TestApp extends Application
{
    public static void main(String[] args)
    {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage)
    {
        Scene scene = new Scene(new Test());
        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

我在带有 JDJ7u7 的 Windows 8 64 位上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:33:07.900

Well I think your code is OK, seems to run fine for me and operate without any clear issue using jdk7u7 on windows 7.

I think maybe you want to call `rect.setMouseTransparent(true)`, so that the rectangles don't catch the clicks. The mouse transparency thing isn't to do with the adding and removing of rectangles, it's just the way that picking works in JavaFX.

You may want to consider placing your Test node in a pannable [`ScrollPane`](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ScrollPane.html) rather than implementing the panning yourself - might need to wrap it in a `Group` to get the appropriate behaviour. But the code you have is simple and seems to work fine, so perhaps use of a `ScrollPane` is unnecessary and may even confuse things more.

There is a [`Canvas`](http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html) class in Java, which is something different from what you have, so calling your node something other than `Canvas` is probably a good idea.

Not to do with your question, but using a [`Timeline`](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html) is my preferred way to handle animation rather than a `Timer`, though the `Timer` method will still work as long as you correctly use `Platform.runLater` as you are doing.

Here's a modified sample using a `Timeline` and `.mouseTransparent()` with an added frame counter so that it is clear that animation is happening.

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.beans.property.*;
import javafx.event.*;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.StackPane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;
import javafx.util.Duration;

class Test extends StackPane {
  private Rectangle rect;
  private double pressedX, pressedY;
  private LongProperty frame = new SimpleLongProperty();

  public Test() {
    setMinSize(600, 600);
    setStyle("-fx-border-color: blue;");
    Label count = new Label();
    count.textProperty().bind(Bindings.convert(frame));
    getChildren().add(count);
    count.setMouseTransparent(true);

    setOnMousePressed(new EventHandler<MouseEvent>() {
      public void handle(MouseEvent event) {
        pressedX = event.getX();
        pressedY = event.getY();
      }
    });

    setOnMouseDragged(new EventHandler<MouseEvent>() {
      public void handle(MouseEvent event) {
        setTranslateX(getTranslateX() + event.getX() - pressedX);
        setTranslateY(getTranslateY() + event.getY() - pressedY);

        event.consume();
      }
    });

    Timeline t = new Timeline(new KeyFrame(Duration.millis(100), new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent event) {
        frame.set(frame.get() + 1);

        if (rect != null) {
          getChildren().remove(rect);
        }

        rect = new Rectangle(10, 10, 200, 200);
        rect.setFill(Color.RED);
        rect.setMouseTransparent(true);
        getChildren().add(0, rect);
      }
    }));
    t.setCycleCount(Timeline.INDEFINITE);
    t.play();
  }
}

public class TestApplication extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    stage.setScene(new Scene(new Test()));
    stage.show();
  }
} 
```

![Sample program output](../Images/49cd64b4e84528546302256cd004c428.png)

# c# - 使用 C# 进行异步或批处理

> ID：12375284
> 
> 赞同：2
> 
> 时间：2012-09-11T17:56:50.487
> 
> 标签：c#, asp.net, .net, asynchronous

我在 C# 中有一个 .Net 应用程序，我需要一些异步处理。用户将从 aspx 页面上传 PEOPLE 记录文件，系统应上传文件、解析文件、加载数据库中的人员，然后将文件移出上传到的初始目录。

我不希望用户必须等待，因为某些文件可能有数千条记录，系统可能需要一段时间才能完成所有记录。我基本上想返回一条消息，“感谢您上传文件。系统将处理它并在完成后向您发送电子邮件”。

我已经阅读了新的 async/await 关键字，但我不确定这是否是我应该采取的路线。我基本上只需要一个按钮事件处理程序来上传文件并启动一个“批处理”过程来完成对文件的处理，同时在 UI 上将控制权返回给用户以执行他/她想要在网站上执行的任何其他操作。

我想第二个问题是：在按钮事件处理程序方法中使用时，等待是否将控制权返回给用户？如果是这样，那么这对我来说似乎是一个完美的解决方案，因为它不会阻塞线程或用户。

我应该为此使用更好的方法或模式，还是 async/await 就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:58:03.217

> 我想第二个问题是：在按钮事件处理程序方法中使用时，等待是否将控制权返回给用户？如果是这样，那么这对我来说似乎是一个完美的解决方案，因为它不会阻塞线程或用户。

`await`*在 GUI 应用程序*的按钮事件处理程序方法中使用时，确实会产生消息循环。

> 我应该为此使用更好的方法或模式，还是 async/await 就足够了？

`async`/`await`不会这样做，因为[`async`不会更改 HTTP 协议](http://nitoprograms.blogspot.com/2012/08/async-doesnt-change-http-protocol.html)- 您`await`只会屈服于 ASP.NET 线程池（而不是用户的浏览器）。

解决此问题的最佳方法是让您的 ASP.NET 页面将文件写入磁盘（如果可能，异步），然后返回响应“我们将在完成后通过电子邮件发送给您”。

然后，您可以拥有一个 Win32 服务或监视该目录、处理文件和发送电子邮件的东西。请注意，如果您计划将其部署到云中，则应使用 Azure Blobs/Queues 而不是文件系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:01:35.997

您可以使用异步页面 - 基于`<%@ Page Async="true" ... %>`

链接：http: [//msdn.microsoft.com/en-us/magazine/cc163725.aspx](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T03:12:43.917

如果您对使用 ASP.NET/ThreadPool 处理文件解析/数据库工作/电子邮件通知感到满意，您可以使用 HttpModule/Timer 来实现它。使用 ASP.NET 上传文件，并使用 HttpModule 监视文件系统是否有新的上传并处理文件，或者在文件上传时添加数据库记录并定期轮询数据库以获取新记录。

[本文](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)将助您一臂之力，并概述使用此方法可能遇到的问题。

如果您需要更复杂的东西或者您的网站有大量流量，您最好使用单独的进程（Windows 服务或计划任务）进行批处理。

如果您需要我可以发布的任何示例代码，但目前使用的是 .NET 3.5 而不是 4.0。

# sql - 如何从 SQL 查询分析器结果中复制数据

> ID：12375287
> 
> 赞同：2
> 
> 时间：2012-09-11T17:57:13.710
> 
> 标签：sql, sql-server-2005

我正在将异常的堆栈跟踪插入表中。但是当我从 sql 查询分析器对该表执行选择查询时，我看不到完整的堆栈跟踪。这是代码..

```
DataAccess.ExecuteNonQuery(
    conn, 
    "usp_insert_error_detail", 
    iproductType, 
    "error", 
    ex.Message.ToString(), 
    ex.StackTrace.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:56:30.187

鉴于您说堆栈跟踪的数据类型是 NVARCHAR(200)，这可能还不够。你需要让它更大，因为堆栈跟踪很容易超过 200 个字符。您可以将其设为 NVARCHAR(MAX)，这表示最大存储大小为 2^31-1 字节。存储大小（以字节为单位）是输入字符数的两倍 + 2 个字节。

感谢 JSR 的更正，我没有意识到 varchar(max) 是在 SQL 2005 中引入的。

# android - 将 google places api 与 android 应用程序一起使用的步骤

> ID：12375288
> 
> 赞同：-1
> 
> 时间：2012-09-11T17:57:16.060
> 
> 标签：android, json, database-connection, google-places-api

请帮助我将 google places api 与我的 android 应用程序连接起来。这个应用程序根据食物类型（如印度、中国、大陆等）搜索餐厅，并给出拥有这些设施的餐厅的结果以及用户评论、设施、优惠等详细信息。我一直在寻找这个很长一段时间以来，根据我看到为此使用mapviews的经验，我很困惑是否可以在不使用mapview的情况下做到这一点。我找到了很多关于 google map api 的帮助，但是对 google places api 的帮助很少。我也是第一次使用 json 解析器，所以任何可以帮助我的人都请给出指导答复。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:19:07.410

你需要一个地图视图才能看到地图

谷歌地方可以帮助你搜索一个位置附近的餐馆，还可能还有评论——通过 http 请求访问它

您需要使用 json objects/ 等来解析您想要从 json 获取的数据

# mongodb - 文档数据库和模拟 ACID

> ID：12375289
> 
> 赞同：2
> 
> 时间：2012-09-11T17:57:17.360
> 
> 标签：mongodb, transactions, couchdb, acid, document-database

看到最后的结果

* * *

我想使用文档数据库（出于各种原因）——可能是 CouchDB 或 MongoDB。但是，我的多文档交易也需要 ACID。

但是，我确实计划使用“仅添加”模型 - 更改作为新文档添加（添加是添加，更新是添加副本+转换数据，删除是添加具有相同 ID + 删除标志的空文档）。我会定期对数据库运行压缩以删除非当前文档。

考虑到这一点，以下想法是否存在漏洞：

维护正在进行的当前事务的集合。此集合将保存带有正在进行的事务的事务 ID（GUID + 时间戳）的文档。

```
Atomicity:
    On a transaction:
        Add a document to the transactions in progress collection.
        Add the new documents (add is add, update is copy+add, delete is add with ID and “deleted” flag).
            Each added document will have the following management fields:
            Transaction ID.
            Previous document ID (linked list).
        Remove the document added to the transactions in progress collection.
    On transaction fail:
        Remove all added documents
        Remove the document from the transactions in progress collection.
    Periodically:
        Go over all transaction in progress, get ones that have been abandoned (>10 minutes?), remove the associated documents in the DB (index on transaction ID) and then remove the transaction in progress.
Read transaction consistency (read only committed transactions):
    On data retrieval:
        Load transactions in progress set.
        Load needed documents.
        For all documents, if the document transaction ID is in “transactions in progress” or later (using timestamp), load the previous document in the linked list (recursive). 
```

它有点像 MVCC，有点像 Git。我通过我知道在我开始之前设法完成的事务来设置检索上下文。我通过保留“正在进行的交易”而不是“交易修订”的列表来避免单一序列（因此单一执行）。而且，当然，我避免阅读未提交的事务并提供冲突回滚。

那么 - 这有什么漏洞吗？我的表现会受到严重影响吗？

编辑1：拜托拜托-不要敲打“如果您需要多文档交易，请不要使用文档数据库”。*我知道，出于其他*原因，我还是需要一个文档数据库。

Edit2：添加时间戳以避免来自检索事务开始后开始的事务的数据。可能会将时间戳更改为序列 ID。

Edit3：这是我想到的另一种算法 - 它可能比上面的更好：

## 新算法 - 更容易理解（这次可能更正:)）

```
Support structures:
transaction_support_tempalte {
    _created-by-transaction: <txid>
    _made-obsolete-by-transaction: <txid>
}

transaction_record { //
    transaction_id: <txid>
    timestamp: <tx timestamp>
    updated_documents: {
        [doc1_id, doc2_id...]
    }   
}

transaction_numer { //atomic counter - used for ordering transactions.
    _id: "transaction_number"
    next_transaction_id: 0 //initial.
}

Note: all IDs are model object IDs, not DB ids (don't confuse with logical IDs which are different).
DB ID - different for each document - but multiple DB documents are revisions of one model object.
Model object ID - same for all revisions of the model object.
Logical ID - client-facing ID.

First time setup:
1\. Create the transaction_number document:

Commit process:
1\. Get new transaction ID by atomic increment on the transaction number counter.
2\. Insert a new transaction record with the transaction id, the timestamp and the updated documents.
3\. Create the new version for each document. Make sure the _created-by-transaction is set.
4\. Update the old version of each updated or deleted document as 
   "_made-obsolete-by-transaction" with the transaction id.
   This is the time to detect conflicts! if seen a conflict, rollback.
   Note - this can be done as find-and-modify rather then by serializing the entire document again.
5\. Remove the transaction record.

Cleanup process:
1\. Go over transaction record, sorted by id, ascending (oldest transaction first).
2\. For each transaction, if it expired (by timestamp), do rollback(txid).

Rollback(txid) process:
1\. Get the transaction record for the given transaction id.
2\. For each document id in the "updated documents":
    2.1 If the document exists and has "_made-obsolete-by-transaction" with 
        the correct transaction id, remove the _made-obsolete-by-transaction data.
3\. For each document with the _created-by-transaction-id:
    3.1 remove the document.
4\. Remove the transaction record document.

Retrieval process:
1\. Top-transaction-id = transaction ID counter.
2\. Read all transactions from the transactions collection. 
   Current-transaction-ids[] = Get all transaction IDs.
3\. Retrieve documents as needed. Always use "sort by transaction_id, desc" as last sort clause.
    3.1 If a document "_created-by-transaction-id" is in the Current-transaction-ids[] 
        or is >= Top-transaction-id - ignore it (not yet committed).
    3.2 If a document "_made-obsolete-by-transaction" is not in the Current-transaction-ids[] 
        and is < Top-transaction-id - ignore it (a newer version was committed).
4\. We may have to retrieve more chunks to satisfy original requests if documents were ignored. 
```

我们开始时文件是否已提交？
如果我们在当前执行的事务中看到具有事务 ID 的文档——它是在我们开始检索之前开始但当时尚未提交的事务——所以我们不想要它。如果我们看到一个事务 ID >= top transaction ID 的文档——它是在我们开始检索之后开始的事务——所以我们不想要它。

文档是最新的（最新版本）吗？
如果我们看到一个不在当前事务 ID 中的文档（事务在我们开始之前开始）并且是 < 顶级事务 ID（在我们开始之后开始的事务） - 那么有一个事务在我们过去完成提交使这个文件过时了——所以我们不想要它。

为什么排序不会受到伤害？
因为我们将排序添加为最后一个子句，所以我们总是会首先看到真正的排序工作。对于每个真正的排序“桶”，我们可能会得到多个文档，这些文档代表不同版本的模型对象。但是，模型对象之间的排序顺序仍然存在。

为什么计数器不让事务串行执行（一次一次）？
因为这不是 RDBMS——我们并没有真正的事务，所以我们不会像“选择更新”那样等待事务提交。另一个事务可以在我们完成后立即进行原子更改。

压缩：
有时必须进行一次压缩——获取所有真正旧的文档并将它们删除到另一个数据存储中。这不应该影响任何正在运行的检索或事务。

优化：

1.  将条件放入查询本身。
2.  将事务 ID 添加到所有索引。
3.  确保具有相同模型对象 ID 的文档不会被分片到不同的节点。

费用是多少？
假设我们想要多个文档版本用于历史记录和审计，额外的成本是自动更新计数器、创建交易记录、“密封”每个模型对象的先前版本（标记为过时）并删除交易文档。这不应该太大。请注意，如果上述假设不成立，则额外成本相当高，尤其是对于检索而言。

* * *

结果：

我已经实现了上述算法（修改后的算法略有改动）。从功能上讲，它正在工作。但是，性能（至少在主从复制拓扑中具有 3 个节点的 MongoDB 上，没有 fsync 但在“提交”结束之前需要复制）是非常糟糕的。我一直在阅读我刚刚从不同线程中写入的内容。我在事务集合上获得了持续的集合锁，而我的索引跟不上持续的翻转。对于具有 10 个馈线线程的微小事务，性能上限为 20 TPS。

简而言之 - 不是一个好的通用解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T20:49:51.197

在没有详细说明您的计划的情况下，我认为首先了解 mongoDB 对 ACID 要求的支持可能很有用。

原子性：Mongo 支持对单个文档进行原子更改。通常，最重要的原子操作是 "$set" 和 findAndModify 一些关于这些操作和 mongoDB 中原子性的文档：

```
http://www.mongodb.org/display/DOCS/Atomic+Operations
[http://www.mongodb.org/display/DOCS/Updating#Updating-%24set][1]
http://www.mongodb.org/display/DOCS/findAndModify+Command 
```

一致性：难以实现且相当复杂。我不会尝试在这篇文章中进行总结，但是关于这个主题有很多文章：

```
http://blog.mongodb.org/post/475279604/on-distributed-consistency-part-1
[http://blog.mongodb.org/post/498145601/on-distributed-consistency-part-2-some-eventual][2] 
```

隔离：mongoDB 中的隔离确实存在于文档中，但不存在于任何更高级别。同样，这是一个复杂的主题。除了上面的原子操作链接，我发现的最好的资源是以下堆栈溢出线程：

[为什么 MongoDB 不使用 fsync()？](https://stackoverflow.com/questions/3736533/why-doesnt-mongodb-use-fsync)（一般来说，这个主题的最佳答案有点像金矿，尽管一些关于耐久性的信息已经过时了）

持久性：用户确保数据持久性的主要方法是使用 getLastError 命令（有关更多信息，请参阅下面的链接）来确认副本集中的大多数节点在调用返回之前已写入数据。

```
http://www.mongodb.org/display/DOCS/getLastError+Command#getLastErrorCommand-majority 
http://docs.mongodb.org/manual/core/replication-internals/ (linked to in the above document) 
```

了解了 mongo 中有关 ACID 的所有这些信息，查看一些已经在 mongo 中解决的类似问题的示例将非常有用。我希望以下两个链接对您非常有用，因为它们非常完整且主题正确。

```
Two-Phase Commits: http://cookbook.mongodb.org/patterns/perform-two-phase-commits/

Transactions for e-commerce work: http://www.slideshare.net/spf13/mongodb-ecommerce-and-transactions-10524960 
```

最后，我要问：为什么要进行交易？很少有 mongoDB 的用户发现他们真正需要 ACID 来实现他们的目标。在您继续在 mongo 之上实现整个层以获取事务之前，可能值得退后一步并尝试从另一个角度解决问题。

# css - 每两个表行的第 n 个孩子

> ID：12375293
> 
> 赞同：36
> 
> 时间：2012-09-11T17:57:23.410
> 
> 标签：css, css-selectors

我需要将表格的每两行设为灰色，如果可能的话，我更愿意使用 nth-child。

我已经搞砸了[Chris Coyier 的第 n 个孩子测试器](http://css-tricks.com/examples/nth-child-tester/)，但仍然无法得到它。

我需要以下公式：

```
1,2 - grey
3,4 - white
5,6 - grey
7,8 - white
9,10 - grey 
```

等等。我不想在 html 中放置一个类，因为我确信这将是一些人的建议。如果有办法用 nth-child 解决这个问题，那就是我正在寻找的。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-11T18:04:26.833

意识到你正在做 4 组，然后你可以看到你可以让每 4 个元素和每 4 个元素减一为白色，然后每 4 个元素减 2，或每 4 个元素减 3 为灰色。

因此，您将使用`4n`and `4n-1`，然后使用`4n-2`and `4n-3`：

```
div:nth-child(4n), div:nth-child(4n-1) {
    background: red;
}
div:nth-child(4n-2), div:nth-child(4n-3) {
    background: blue;
} 
```

该代码对您的情况并不精确，我为[jsFiddle proof-of-concept](http://jsfiddle.net/Wte4w/)编写了它。

NB 免责声明：请记住，`nth-child`这在 IE8 中不起作用。典型的问题，当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T06:24:30.300

这是我用来右对齐每个表的第一列的方法。

```
table td:nth-child(2n-1) {
    align: right;
    text-align: right;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-28T19:56:45.530

@Eric 的回答是完全正确的——但是如果你想轻松地将其扩展到 3、4、5 等组，并且你正在使用 Sass，那么这里是代码（如果你想要更多组，只需增加`$largestGroupSize`）：

```
.table-with-grouped-rows {

    // generate styles for .groups-of-2, .groups-of-3, etc.
    $largestGroupSize: 6;
    @for $groupNumPerColor from 2 through $largestGroupSize{

        $totalGroupNum: $groupNumPerColor * 2;

        &.groups-of-#{$groupNumPerColor} {

            $start: $totalGroupNum - 1;
            $end: $groupNumPerColor;
            @for $primaryBgIndex from $start through $end {
                $nthString: #{$totalGroupNum}n - #{$primaryBgIndex};

                > tbody > tr:nth-of-type(#{$nthString}) > td {
                    background-color: $white;
                }
            }

            $start: $groupNumPerColor - 1;
            $end: 0;
            @for $alternateBgIndex from $start through $end {
                $nthString: #{$totalGroupNum}n - #{$alternateBgIndex};
                > tbody > tr:nth-of-type(#{$nthString}) > td {
                    background-color: $light-gray;
                }
            }
        }
    }
} 
```

然后在您的标记中，在`<table>`元素上，您只需添加类`table-with-grouped-rows`和`groups-of-{n}`. 例如，如果您想要一个包含 3 个组的表格，您可以编写：

```
<table class="table-with-grouped-rows groups-of-3"> 
```

繁荣。

# c# - C# - 在其他程序中编辑时实时更新 BackgroundImage

> ID：12375294
> 
> 赞同：1
> 
> 时间：2012-09-11T17:57:23.673
> 
> 标签：c#, image, bitmap, auto-update, viewer

首先，我制作了一个具有拖放功能的桌面 AIR 应用程序来查看磁贴图像，但由于一些问题，我尝试在 C# 中制作相同的内容。你认为什么是更好的选择？（我知道这个小程序的性能不是问题，但我的意思是两者的难度和复杂性）

我正在构建一个简单的 TileViewer，因此在 openFileDialog 中选择了一张图片并将其设置为 Form 的平铺 BackgroundImage。

我的问题是：

1.  我一直在使用计时器（interval = 500）来重新加载图像，所以如果我在 Photoshop 中编辑图像，TileViewer 将自动重新加载更新的图像（因为我将其保存在 Photoshop 中）。

    但问题是 Photoshop 没有这样做的权限，因为图像是在其他程序（我的 TileViewer）中打开的

2.  我删除了计时器并制作了一个刷新按钮。但它是同样的问题。

我想制作一个位图数据的副本，但后来我得到一个错误，我没有足够的内存用于 32px x 32px img。

我的代码：

```
 private string FileName;

    public Form1() {
        InitializeComponent();

        FileName = "";
    }

    // OPEN FILE btn
    private void button1_Click( object sender, EventArgs e ) {
        openFileDialog1.Filter = "PNG Files (*.png)|*.png|JPG Files (*.jpg)|*.jpg";
        if(openFileDialog1.ShowDialog() == DialogResult.OK) {
            button2.Enabled = true;
            FileName = openFileDialog1.FileName;
            setImage();
        }
    }

    // REFRESH btn
    private void button2_Click( object sender, EventArgs e ) {
        if( FileName != "" ) {
            setImage();
        }
    }

    private void setImage() {
        Bitmap tempImg = new Bitmap( FileName );
        Rectangle rect = new Rectangle(0, 0, 100, 100);
        PixelFormat format = tempImg.PixelFormat;

        this.BackgroundImage = new Bitmap( FileName ).Clone( rect, format );
    } 
```

所以小伙伴们，如果你有任何建议或解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:17:48.767

更新 2：

另一个问题是 Rectangle rect = new Rectangle(0, 0, 100, 100);

在构造函数中，您应该传递新图像的宽度和高度，而不是像 100 这样的任意值。

这就是为什么运行时说你内存不足！（它对我有用，我有一台 18 GB 的怪物机器）

更新：

您正在泄漏对象，因此出现内存不足异常

（Haans 已经警告过你不要处理那些东西。）

试试下面的代码

```
private string FileName;

public Form1()
{
    InitializeComponent();

    FileName = "";
}

// OPEN FILE btn 
private void button1_Click(object sender, EventArgs e)
{
    openFileDialog1.Filter = "PNG Files (*.png)|*.png|JPG Files (*.jpg)|*.jpg";
    if (openFileDialog1.ShowDialog() == DialogResult.OK)
    {

        FileName = openFileDialog1.FileName;
        setImage();
    }
}

// REFRESH btn 
private void button2_Click(object sender, EventArgs e)
{
    if (FileName != "")
    {
        setImage();
    }
}

private void setImage()
{
Stream str=new FileStream(FileName,FileMode.Open, FileAccess.Read,FileShare.Read);
        Bitmap tempImg= new Bitmap(Bitmap.FromStream(str));
        str.Close();
        using( tempImg)
        {

        Rectangle rect = new Rectangle(0, 0, tempImg.Width, tempImg.Height);

        PixelFormat format = tempImg.PixelFormat;

        this.BackgroundImage = new Bitmap(tempImg);

        }
} 
```

旧答案

就像杰森说的

你可能需要在你的 setimage 方法中做这样的事情

```
Stream str = new FileStream(file, FileMode.Open, FileAccess.Read, FileShare.Read);
   this.BackgroundImage  = Bitmap.FromStream(str);
str.Close(); 
```

请注意，您最好关闭使用后打开的任何流。

代替

私人无效setImage（）{
**位图tempImg =新位图（文件名）；<---** 矩形 rect = new Rectangle(0, 0, 100, 100);
PixelFormat 格式 = tempImg.PixelFormat；

```
 this.BackgroundImage = new Bitmap( FileName ).Clone( rect, format );  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:21:39.717

The Bitmap.Clone() method doesn't do what you hope it does. It creates a "shallow" copy. You get a new Bitmap object but it still uses the underlying pixel buffer. Including the memory-mapped file that GDI+ uses to keep the pixel data out of the swap file. Which in turn puts a lock on the file.

You'll need to make a "deep" copy, do so with the Bitmap(Image) constructor. Like this:

```
private void setImage() {
    using (var tempImg = new Bitmap(FileName)) {
        this.BackgroundImage = new Bitmap(tempImg);
    }
} 
```

The *using* statement ensures the original image is disposed and the lock gets released.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:04:26.043

您将需要使用 ReadOnly 标志手动打开文件，然后手动将文件的有效负载加载到位图中。

另一种方法是复制文件，然后打开副本。

看看您是否在 Photoshop 打开文件时运行以下代码

```
 FileStream s2 = new FileStream(name, FileMode.Open, FileAccess.Read, FileShare.Read); 
```

# c# - 我可以从命名空间的一部分创建 lib 或外部包吗？

> ID：12375296
> 
> 赞同：0
> 
> 时间：2012-09-11T17:57:28.343
> 
> 标签：c#, asp.net, visual-studio, api, winapi

我有两个项目。一个作为 webapi，第二个作为独立的桌面应用程序。唯一常见的是数据模型。在我的 webapi 中，我得到了命名空间`Api.Models`，我得到了 dekstop`Desktop.Models`

我可以从我的 Api 导出`Api.Models`为 lib 并将其包含在其中`Desktop`吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:14:03.527

您需要创建另一个类库项目 Common.Models，然后将您的 Api.Models 移动到该项目并从 WebApi 应用程序和桌面应用程序中引用它

# php - 链接的 PHP 控件

> ID：12375299
> 
> 赞同：1
> 
> 时间：2012-09-11T17:57:44.733
> 
> 标签：php

我正在制作一个表单验证类，它目前的工作方式是这样的。

```
$validator->setVar($_POST['Username'])
          ->standardFilter(array('XSS', 'SQL_INJECTION'))
          ->customRegex()
          ->replace('This', 'With this')
          ->getResult(); 
```

虽然像这样链接时它可以完美运行，但我无法归档以下结果。

```
$validator->setVar($_POST['Username'])
          ->isValidEmail()
          ->isValidPhoneNumber()
          ->isSet()
          ->isNull()
          ->getResult() 
```

例如，脚本返回以下值

```
->isValidEmail() (true)
->isValidPhoneNumber() (true)
->isSet() (false) 
```

基本上，我将创建一个数组，根据每个函数的结果用真/假填充它，然后我将在数组中查找特定值（假）。如果存在，则无论链的其余部分如何，该类都将返回 false。（或者我可以覆盖变量，在这里并不重要。）

但是，我希望 $validator 一旦从函数中获得 false 就停止链接。假设它从 isSet() 收到了错误。它不应该执行 isNull() 和 getResult() 因为我们已经有一个失败的检查。

我怎样才能在 PHP 中归档它？

**TL;博士：**

```
var_dump($validator->setVar('Test message')->isInteger()->setTrue());
                                             //false     //true

Output: false, because once isInteger() failed, rest of the chain isn't executed. 
```

我怎样才能在 PHP 中归档它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:06:09.063

没有什么比好的源代码更值得学习的了。我建议探索 Zend 框架的[验证类](http://framework.zend.com/apidoc/1.12/db_Zend_Validate_Abstract.html)。它提供了与您描述的相同的[链接功能。](http://framework.zend.com/manual/1.12/en/zend.validate.validator_chains.html)

...[更多源代码](http://phpcrossref.com/zendframework/library/Zend/Validate.php.html)检查 isValid() 具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:01:31.217

尝试这样的事情

```
class FooBar
{
  private $SomethingWrong = false;

  function Bar()
  {
    if( $this->SomethingWrong )
      throw new Exception('SomeThing is wrong');
    return $this;
  }

  function Foo()
  {
    return $this
  }
}

$foobar = new FooBar();
$foobar->Bar()
       ->Foo(); 
```

Foo() 部分不会被执行，因为 Bar() 中的异常。

当然，也有一些变化。如果你不想要一个异常，而是一个静默的非执行，你可以试试这个：

```
class FooBar
{
  private $SomethingWrong = false;

  function Bar()
  {
    $this->SomethingWrong = true;
    return $this;
  }

  function Foo()
  {
    if( !$this->SomethingWrong )  {
      // do my stuff
    }
    return $this
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:11:52.483

在任何语言中，唯一的方法就是抛出异常。您不能返回验证器对象（这是链接所必需的），也不能返回 true 或 false，同时让链接工作。也就是说，我*不*提倡以这种方式使用异常。我完全同意以下 vascowhite 的评论。

与其让它停在链的中间，不如将`isSet`,`isNull`等方法视为告诉验证器要检查什么的指令。然后`validate`在链的末尾调用一个方法。该`validate`方法可以根据验证器状态（由其他方法设置）执行验证。并且该`validate`方法还可以返回 true 或 false 或自定义状态对象，以及验证结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T18:01:49.080

您可以抛出自定义异常，而不是返回值，从而中止代码执行。在代码中添加一个 try-catch 块，处理您的异常，一切正常。

编辑：你也可以做的是有点神奇，而不是真正被推荐。但很高兴知道，这在 php 中是可能的，所以最好使用 Exceptions

```
class PassThroughValidator extends ...
{
    private $val;

    public function __construct($result)
    {
        $this->val = $result;
    }

    public function __call($name, $arguments)
    {
        return $this;
    }

    public function getResult()
    {
        return $this->val;
    }
}

class EmailValidator extends ...
{

    function isMail()
    {
        if (...) {
            // do something here
            return $this;
        }

        // set Result to false or something similar
        return new PassThroughValidator($this->getResult());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T18:09:09.937

考虑到在链的每个步骤中返回的值都是一个对象，您不能让一个链式方法返回 true/false。它必须始终返回一个对象实例。所以我猜你需要做的是在对象上添加一些属性以指示不应该进行验证，如果设置了属性，则忽略验证尝试并按原样返回对象。

所以也许像这样的简化形式，只显示一个这样的验证：

```
class validator {
    protected $ignore_validations = false;
    protected $value = null;
    protected $is_null;

    public function isNull () {
        if(true === $this->ignore_validations) {
            return $this;
        } else if(is_null($this->value)) {
            $this->is_null = true;
            $this->ignore_validations = true;
            return $this;
        } else {
            $this->is_null = false;
            return $this;
        }
    }
} 
```

# ssis - 使用表达式更新列值

> ID：12375305
> 
> 赞同：0
> 
> 时间：2012-09-11T17:58:17.553
> 
> 标签：ssis

我有一个数据流管道，它从文件中获取数据并将其放入表中。我从一个变量（具有文件名）添加了一个派生列，以将文件名添加到管道中。派生列组件在运行时会引发错误“使用表达式更新列值”。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:12:16.800

“使用表达式更新列值”是您的包失败的组件的工具提示。您需要在运行期间查看“进度”选项卡或在运行后查看“执行结果”选项卡，以确定您的实际错误是什么。

# jquery - 如何通过 onClick 事件将参数传递给 jquery 函数？

> ID：12375308
> 
> 赞同：-1
> 
> 时间：2012-09-11T17:58:34.513
> 
> 标签：jquery

> **可能重复：**
> [jquery .click 将参数传递给用户函数](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)

```
 $('#topleft').click(function (x) {
    loadPopupBox();
    $("#popupinner").load('getdetail.php?id=' +x);
    }); 
```

如何从 onclick 事件将值传递给变量 x？变量 x 的值被 POSTED 到 getdetail.php 并且从 getdetail.php 返回的数据被加载到 ID 为 popupinner 的 DIV。现在一切正常，除了数据 POST/GET。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:02:32.890

尝试使用[`.click`](http://api.jquery.com/click/)语法 as `.click( [eventData], handler(eventObject) )`。

见下文，

```
//                    v- Pass data
$('#topleft').click({x:x}, function (event) {
    loadPopupBox();
    $("#popupinner").load('getdetail.php?id=' + event.data.x); //read data from event obj
}); 
```

[eventData]`x`可以访问为`event.data.x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:00:57.260

您可以将 eventData 提供给[click](http://api.jquery.com/click/)函数：

```
$('#topleft').click({x:x}, function (e) {
    loadPopupBox();
    $("#popupinner").load('getdetail.php?id=' +e.datax);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:03:30.353

```
// say your selector and click handler looks something like this...
$("some selector").click({param1: "Hello", param2: "World"}, cool_function);

// in your function, just grab the event object and go crazy...
function cool_function(event){
    alert(event.data.param1);
    alert(event.data.param2);
} 
```

如[jQuery 的 .click 中所见 - 将参数传递给用户函数](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:03:49.200

您需要的是[单击事件处理程序](http://api.jquery.com/click/)。请参阅此[问题](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)以了解它实际上是如何工作的。

# c# - 将带有 WCF 库的 Web 应用程序从 Visual Studio dev 移动到 IIS

> ID：12375311
> 
> 赞同：0
> 
> 时间：2012-09-11T17:59:08.620
> 
> 标签：c#, iis, wcf-binding

我有一个包含 WCF 库的 Web 应用程序。Web 应用程序在端口 64697 上运行，WCF 在端口 50128 上运行。通过运行 VS 2010 进行测试时，我可以转到 localhost:50128/eshop.svc 并查看 svc 页面。我需要做什么才能将项目发布到 IIS 开发服务器？IIS 设置为运行 WCF，因为我在其上放置了测试服务并且可以访问 wsdl。我在 wcf 库中有一个 eshopServive.svc。库名称是“company.EShop.WCF”

谢谢

网络配置片段

```
<services>
      <!-- Note: the service name must match the configuration name for the service implementation. -->
      <service name="company.eShop.Wcf.eShopWCFService"
               behaviorConfiguration="MyServiceTypeBehaviors" >
        <endpoint address="" binding="basicHttpBinding"
                  contract="Nad.CheckoutVendor.Interfaces.ICheckoutVendorService">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
      </service>
   </services>
 <bindings>
     <basicHttpBinding>
       <binding name="BasicHttpBinding_ICheckoutVendorService" closeTimeout="00:01:00"
         openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
           <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
         </security>
       </binding>
     </basicHttpBinding>
   </bindings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:02:23.633

我通常将服务编译为 DLL，然后在服务器上对其进行 GAC。确保 IIS 下的 .svc 文件引用 GAC 的 DLL，如下所示：

```
<%@ Assembly Name="DLLName, Version=1.1.0.0, Culture=neutral, PublicKeyToken=YOURKEY" %>
<%@ ServiceHost Service="DLLNAME.CLASSNAME" %> 
```

# html - 垂直对齐 DIV redux

> ID：12375316
> 
> 赞同：0
> 
> 时间：2012-09-11T17:59:44.650
> 
> 标签：html, css

好的，所以这个问题[已被多次询问和回答](https://stackoverflow.com/questions/79461/vertical-alignment-of-elements-in-a-div)，但我仍然无法提供有效的解决方案。

我想垂直对齐到 DIV 中的中间任意元素。因此，上述问题中的链接教程说：

> ```
> Specify the parent container as position:relative or position:absolute.
> Specify a fixed height on the child container.
> Set position:absolute and top:50% on the child container to move the top down to the middle of the parent.
> Set margin-top:-yy where yy is half the height of the child container to offset the item up. 
> ```
> 
> 代码中的一个示例：

```
<style type="text/css">
    #myoutercontainer { position:relative }
    #myinnercontainer { position:absolute; top:50%; height:10em; margin-top:-5em }
</style>
...
<div id="myoutercontainer">
    <div id="myinnercontainer">
        <p>Hey look! I'm vertically centered!</p>
        <p>How sweet is this?!</p>
    </div>
</div> 
```

除了与教程上的屏幕截图相反，[这不起作用](http://jsfiddle.net/HPN8e/1/)。我唯一改变的是在外部 DIV 周围添加一个边框，这样您就可以看到垂直对齐方式。

所有这一切都是产生一个零高度的 DIV，它呈现为一条直线。如果为外部 DIV 添加高度，则可以看到内部内容，但实际上并没有垂直对齐内容。那么，为什么这个例子不起作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:40:50.930

I believe your containing div also has to have a specified height. If you inspect the #myoutercontainer div with firebug you see that it actually has a height of 13em, which they don't show in the example code given.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:45:34.213

[这是](http://jsfiddle.net/TLzDv/2/)基于这篇[Chris Coyer 文章](http://css-tricks.com/centering-in-the-unknown/)的不同方法。如果要将文本垂直居中到固定大小的 div，则可以[像这样](http://jsfiddle.net/TLzDv/1/)重复该过程。如果你想让它向右对齐，只需转动修改“text-align：center;” myoutercontainer 的样式。

# asp.net-mvc - 删除操作不会被调用

> ID：12375321
> 
> 赞同：0
> 
> 时间：2012-09-11T17:59:56.427
> 
> 标签：asp.net-mvc

单击删除链接时，我想在我的学生控制器中调用 DeleteConfirmed 方法。

学生控制器代码

```
[HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        Student student = db.Students.Find(id);
        db.Students.Remove(student);
        db.SaveChanges();
        return RedirectToAction("Index");
    } 
```

Index.cshtml 在单击时具有删除链接（最后一行代码），我希望调用 DeleteConfirmed 但下面希望 delete.cshtml 存在。我不想显示删除视图，只希望删除发生异步的。

```
@model IEnumerable<SMS.Model.Student>
@{
ViewBag.Title = "Student";
}

<h2>Student</h2>
 @using (Html.BeginForm()) {

<p>
@Html.ActionLink("Create New", "Create")
</p>
<table>
<tr>
    <th>
        @Html.DisplayNameFor(model => model.RegistrationNo)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.FirstName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.MiddleName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.LastName)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.DateofBirth)
    </th>
    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.RegistrationNo)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.FirstName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.MiddleName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.LastName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.DateofBirth)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
        @Html.ActionLink("Details", "Details", new { id=item.Id }) |
        @Ajax.ActionLink("Delete", "Delete", new { id = item.Id },new AjaxOptions { HttpMethod = "Post"})

    </td>
</tr> 
```

}

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:59:46.360

在视图内部而不是

```
@using (Html.BeginForm()) 
```

你应该有

```
@using (Html.BeginForm("DeleteConfirmed", "YourControllerName")) 
```

如果不起作用，删除`ActionName("Delete")`应该可以解决问题。

让我知道这是否有帮助。

# javascript - jquery根据文本框的值切换

> ID：12375329
> 
> 赞同：0
> 
> 时间：2012-09-11T18:00:22.043
> 
> 标签：javascript, jquery

这一定很简单，但我只是被这个困住了......我有一个产品列表，其中有一个数量输入字段，旁边是一个价格列。价格显示两个值。其中之一是隐藏的。如果输入字段的值超过某个值，它应该隐藏另一个价格。示例：（输入：[]，显示 price1price2）

```
input: [2], show <span class=one>price1</span>
input: [5], show <span class=one>price1</span>
input: [8], show <span class=two>price2</span>
input: [9], show <span class=two>price2</span> 
```

到目前为止我的代码（例如，因为我只展示了 2 个产品）：

```
<form name="formname" action="formaction" method="post">
prod 1<input type="text" value="" class="class1" size="3"><span class="one">$1.00</span><span class="two">$2.00</span>
prod 2<input type="text" value="" class="class1" size="3"><span class="one">$4.00</span><span class="two">$6.00</span>
</form> 
```

在脚本标签的底部：

```
$(document).ready(function() {
    if($('input.class1').val() > 5) {
       $('.one').show();
       $('.two').hide();
    }
}); 
```

我错过了什么？也许是表格名称？这只是第一部分...

我的另一个问题是.. 如果所有输入字段（以 class1 作为类）的总和超过 5，我该如何做到这一点，也可以这样做。（所以现在取决于输入字段的总和，而不是每个单独的字段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:23:00.807

```
var inputs = $('input[class^=class]');  // get inputs which class name 
                                        // start with "class" eg: class1, class2..

// fire blur event
// you may use keyup or something else

inputs.on('blur', function(e) {
    var val = 0;

    // adding all inputs value
    // of all inputs with class = blured input class

    $('input.' + this.className).each(function() {
      val += parseInt( this.value, 10);        
    });

    // checking for condition
    if (val > 5) {
       $(this).next('.one').show().next('.two').hide();
    } else {
       $(this).next('.one').hide().next('.two').show();
    }
}); 
```

***[带模糊的演示](http://jsfiddle.net/YMSEn/2/)***

***[带键盘的演示](http://jsfiddle.net/YMSEn/3/)***

### 笔记

将所有 jQuery 代码放在`$(document).ready()`.

### 根据评论

***[看到这个更新](http://jsfiddle.net/YMSEn/5/)***

***代码***

```
if (val > 5) {
   $('.one').show();
   $('.two').hide();
} else {
   $('.one').hide();
   $('.two').show();
} 
```

***[最后评论后更新](http://jsfiddle.net/YMSEn/6/)***

只是改变

```
val += parseInt( this.value, 10); 
```

到

```
val += parseInt( this.value || 0, 10); // default 0, if no value given 
```

### 根据评论

*如何为选择框实现上述代码？*

```
var selects = $('select[class^=class]');  // get selects which class name
                            // start with "class" eg: class1, class2..

// fire change event

selects.on('change', function(e) {
    var val = 0;

    // adding all selects value

    $('select.' + this.className).each(function() {
      val += parseInt( this.value, 10);        
    });

    // checking for condition
    if (val > 5) {
       $(this).next('.one').show().next('.two').hide();
    } else {
       $(this).next('.one').hide().next('.two').show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:06:19.793

您在页面加载时调用它，每次更改输入字段的值时都需要运行它。

考虑将您的 if 块包装在此：

```
$('input.class1').blur(function() {
  if($('input.class1').val() > 5) {
     $('.one').show();
     $('.two').hide();
  }
}); 
```

或者类似的东西，考虑使用`$.on()`.

如果要对它们求和，请为每个输入分配一个公共类，然后使用`$.each()`：

```
$('.common-class').each(function() {
  sum = sum + $(this).val()
}); 
```

希望这可以帮助。

# c++ - 使用三角形库时“未解析的外部符号_triangulate”

> ID：12375330
> 
> 赞同：2
> 
> 时间：2012-09-11T18:00:23.060
> 
> 标签：c++, visual-studio-2010, linker, lnk2019

我目前在我的程序中使用[三角形库。](http://www.cs.cmu.edu/~quake/triangle.html)该库仅包含 .c 和 .h 文件（没有 .lib）。我在 Visual Studio C++ 2010 上收到以下错误：

```
 1>data.obj : error LNK2019: unresolved external symbol _triangulate referenced in function "struct triangulateio __cdecl readfile(void)" (?readfile@@YA?AUtriangulateio@@XZ) 
```

我的 data.cpp 的头文件如下：

```
#ifndef DATA_H
#define DATA_H

#include <WinSock2.h>

#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <fstream>
#include <string>
#include <time.h>
#include <GL/gl.h> //include the gl header file
#include <GL/glut.h> //include the glut header file
#include <GL/glu.h> //include the glut header file
#include <armadillo>

//Namespace
using namespace std;
using namespace arma;

extern "C"
{
    #ifdef SINGLE
    #define REAL float
    #else /* not SINGLE */
    #define REAL double
    #endif /* not SINGLE */

    #include "triangle.h"
}
triangulateio readfile();

#endif 
```

数据.cpp

```
 triangulate("pczAevn", &in, &mid, &vorout); 
```

我已经让我的程序在 Ubuntu 上使用我的 Makefile，但我需要在 Windows 上运行我的程序。随时询问更多信息。

**编辑#1：** 如果你在 VS 中使用三角形库，你必须将以下指令放在 triangle.c 文件的顶部`#define TRILIBRARY` 现在它编译。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:09:46.417

链接器找不到“triangulateio readfile()”的定义，如果它是在 .c 文件中定义的，我的猜测是它没有构建。如果你将它包含在项目中，它可以工作。

# excel - 使用 Sql Server 导入导出实用程序读取 CSV 数据

> ID：12375331
> 
> 赞同：0
> 
> 时间：2012-09-11T18:00:28.517
> 
> 标签：excel, csv, ssis, excel-2007, opencsv

我正在使用 SSIS 工具读取 CSV 文件，但问题是我读取的数据格式错误意味着列数据不匹配。像包含消息的 Note 列数据出现在 Id 列等中。我尝试了所有类型的分隔符和文本限定符，但没有帮助我。

主要问题是 excel 能够以正确的格式显示数据，但 SSIS 不能。我想知道为什么会这样，或者我错过了什么。

非常感谢任何帮助或建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:35:50.670

如果是 csv 文件，请不要在 Excel 中打开。使用写字板（首选）或记事本查看数据。找出分隔符是什么并试一试。这可能会帮助你。

# c# - 搜索字符串文件

> ID：12375335
> 
> 赞同：-4
> 
> 时间：2012-09-11T18:00:41.223
> 
> 标签：c#

这是文本文件中 1 条记录的摘录：“Aggie Ngwenya#15.99#FULL-TIME”

我需要检查第二个“#”之后的最后一位是否为真。换句话说，如果它是“FULL-TIME”，那么我提取该行的其余部分，如果它不是真的，那么忽略它并继续下一行文本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:02:36.690

假设格式是恒定的（每行由 '#' 分隔三个部分），您可以执行以下操作：

```
string[] parts = line.Split('#');
if (parts[2] == "FULL-TIME") DoStuff(); 
```

添加一些错误处理以对不符合您期望的输入做出良好反应可能是明智之举，例如检查*部件*的长度，如果大小写可能是一个问题，则可能进行不区分大小写的比较。

# asp.net - 更新面板已经不起作用了

> ID：12375336
> 
> 赞同：0
> 
> 时间：2012-09-11T18:00:50.350
> 
> 标签：asp.net, drop-down-menu, updatepanel

我不确定这里发生了什么。但是我的页面上有一个更新面板，它正在填充 State 下拉 selecteditem 事件的 City 下拉列表。它工作正常，但由于某种原因现在不行。它甚至没有弹出我在事件中作为第一行代码放置的消息框。

这是标记；

```
<!-- State dropdown selector area -->
        <asp:DropDownList ID="ddlState"  runat="server"
                          AppendDataBoundItems="True" CssClass="dropdowns"
                          BorderColor="Black"
                          BorderStyle="Solid" BorderWidth="2px" TabIndex="7" 
                          DataSourceID="EntityDataSource1" DataTextField="Name"
                          DataValueField="Id" ToolTip="Select a state here" AutoPostBack="True">
            <asp:ListItem Value="" Text="Select a state"/>
        </asp:DropDownList>
        <asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=enerteckEntities"
             DefaultContainerName="enerteckEntities" EnableFlattening="False" EntitySetName="states"
             Select="it.[Name], it.[Id]">
        </asp:EntityDataSource>
        <asp:RequiredFieldValidator ID="rfvState" runat="server" 
                                    ErrorMessage="Please select a state from the dropdown list"
                                    Display="Dynamic" ControlToValidate="ddlState" 
                                    ForeColor="#FF3300">
        </asp:RequiredFieldValidator>
        <!-- End of State dropdown selector area -->
    <br /><br />
    <asp:UpdatePanel ID="updtPanelCity" runat="server">
        <ContentTemplate>
            <asp:DropDownList ID="ddlCity"  runat="server"
                              AppendDataBoundItems="True" CssClass="dropdowns"
                              BorderColor="Black"
                              BorderStyle="Solid" BorderWidth="2px" TabIndex="8" 
                               ToolTip="Select a city here" AutoPostBack="True">
                <asp:ListItem Value="" Text="Select a city"/>
            </asp:DropDownList>
            <asp:RequiredFieldValidator ID="rfvCity" runat="server" 
                                        ErrorMessage="Please select a city from the dropdown list"
                                        Display="Dynamic" ControlToValidate="ddlCity" 
                                        ForeColor="#FF3300">
            </asp:RequiredFieldValidator>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlState" EventName="SelectedIndexChanged" />
        </Triggers>
    </asp:UpdatePanel> 
```

这是后面的代码；

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load

End Sub

Protected Sub ddlState_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlState.SelectedIndexChanged
    MsgBox("are you actually working")
    If IsPostBack Then
        ddlCity.Items.Clear()
        Dim context As New enerteckEntities()

        'Dim query = context.DistinctCityFromZiptax(Convert.ToInt16(ddlState.SelectedValue))
        Dim query = From c In context.ziptaxes Where c.StateID = ddlState.SelectedValue Order By c.City Select c.City, c.ZipTaxId
        ddlCity.DataSource = query.Distinct().ToList()
        ddlCity.DataValueField = "ziptaxid"
        ddlCity.DataTextField = "City"
        ddlCity.DataBind()
    End If

End Sub 
```

我需要对这个问题另眼相看。

编辑：这是脚本管理器中的内容

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    <Scripts>
        <%--Framework scripts--%>
        <asp:ScriptReference Name="MsAjaxBundle" />
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" />
        <asp:ScriptReference Name="WebForms.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebForms.js" />
        <asp:ScriptReference Name="WebUIValidation.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebUIValidation.js" />
        <asp:ScriptReference Name="MenuStandards.js" Assembly="System.Web" Path="~/Scripts/WebForms/MenuStandards.js" />
        <asp:ScriptReference Name="GridView.js" Assembly="System.Web" Path="~/Scripts/WebForms/GridView.js" />
        <asp:ScriptReference Name="DetailsView.js" Assembly="System.Web" Path="~/Scripts/WebForms/DetailsView.js" />
        <asp:ScriptReference Name="TreeView.js" Assembly="System.Web" Path="~/Scripts/WebForms/TreeView.js" />
        <asp:ScriptReference Name="WebParts.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebParts.js" />
        <asp:ScriptReference Name="Focus.js" Assembly="System.Web" Path="~/Scripts/WebForms/Focus.js" />
        <asp:ScriptReference Name="WebFormsBundle" />
        <%--Site scripts--%>

    </Scripts>
</asp:ScriptManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:03:31.467

1 您可以`UpdateMode`在 UpdatePanel 上添加属性。并设置为有条件

```
<asp:UpdatePanel ID="updtPanelCity"
                                 UpdateMode="Conditional"
                                 runat="server">

.... 
```

2 并将您的 ddl 放在更新面板中

```
 <ContentTemplate>
      ....
     <asp:DropDownList ID="ddlState"  runat="server"
                          AppendDataBoundItems="True" CssClass="dropdowns"
                          BorderColor="Black"
                          BorderStyle="Solid" BorderWidth="2px" TabIndex="7" 
                          DataSourceID="EntityDataSource1" DataTextField="Name"
                          DataValueField="Id" ToolTip="Select a state here" AutoPostBack="True">
            <asp:ListItem Value="" Text="Select a state"/>
        </asp:DropDownList>
 </ContentTemplate> 
```

3 并添加`OnSelectedIndexChanged=""`您的 dllState

# c# - 线程安全 FIFO 队列/缓冲区

> ID：12375339
> 
> 赞同：11
> 
> 时间：2012-09-11T18:01:16.243
> 
> 标签：c#, multithreading, .net-3.5, queue, buffer

我需要实现一种任务缓冲区。基本要求是：

*   在单个后台线程中处理任务
*   从多个线程接收任务
*   处理所有接收到的任务，即确保在收到停止信号后缓冲区中的缓冲任务被耗尽
*   必须保持每个线程接收的任务顺序

我正在考虑使用如下所示的队列来实现它。将不胜感激有关实施的反馈。还有其他更好的想法来实现这样的事情吗？

```
public class TestBuffer
{
    private readonly object queueLock = new object();
    private Queue<Task> queue = new Queue<Task>();
    private bool running = false;

    public TestBuffer()
    {
    }

    public void start()
    {
        Thread t = new Thread(new ThreadStart(run));
        t.Start();
    }

    private void run()
    {
        running = true;

        bool run = true;
        while(run)
        {
            Task task = null;
            // Lock queue before doing anything
            lock (queueLock)
            {
                // If the queue is currently empty and it is still running
                // we need to wait until we're told something changed
                if (queue.Count == 0 && running)
                {
                    Monitor.Wait(queueLock);
                }

                // Check there is something in the queue
                // Note - there might not be anything in the queue if we were waiting for something to change and the queue was stopped
                if (queue.Count > 0)
                {
                    task = queue.Dequeue();
                }
            }

            // If something was dequeued, handle it
            if (task != null)
            {
                handle(task);
            }

            // Lock the queue again and check whether we need to run again
            // Note - Make sure we drain the queue even if we are told to stop before it is emtpy
            lock (queueLock)
            {
                run = queue.Count > 0 || running;
            }
        }
    }

    public void enqueue(Task toEnqueue)
    {
        lock (queueLock)
        {
            queue.Enqueue(toEnqueue);
            Monitor.PulseAll(queueLock);
        }
    }

    public void stop()
    {
        lock (queueLock)
        {
            running = false;
            Monitor.PulseAll(queueLock);
        }
    }

    public void handle(Task dequeued)
    {
        dequeued.execute();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:05:31.853

您实际上可以使用开箱即用的[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)来处理这个问题。

它被设计成有 1 个或多个生产者，以及 1 个或多个消费者。在您的情况下，您将有多个生产者和一个消费者。

当您收到停止信号时，请使用该信号处理程序

*   信号生产者线程停止
*   在 BlockingCollection 实例上调用 CompleteAdding

消费者线程将继续运行，直到所有排队的项目都被移除并处理完毕，然后它会遇到 BlockingCollection 完成的条件。当线程遇到该条件时，它就会退出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-10T07:02:23.313

您应该考虑[ConcurrentQueue](https://msdn.microsoft.com/en-us/library/dd267265(v=vs.110).aspx)，实际上是 FIFO。如果不合适，请尝试[Thread-Safe Collections](https://msdn.microsoft.com/en-us/library/dd997305(v=vs.110).aspx)中的一些亲戚。通过使用这些，您可以避免一些风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:11:40.463

我建议你看看[TPL DataFlow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)。[BufferBlock](http://msdn.microsoft.com/en-us/library/hh160414.aspx)是您正在寻找的，但它提供了更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T04:56:57.883

为此，您可以在 .NET 3.5 上使用 Rx。它可能从未出现在 RC 中，但我相信它是稳定的*并被许多生产系统使用。如果您不需要 Subject，您可能会找到 .NET 3.5 的原语（如并发集合），您可以使用 .NET Framework 4.0 之前未附带的原语。

[.net 3.5 的 Rx（反应式扩展）的替代方案](https://stackoverflow.com/questions/6527598/alternative-to-rx-reactive-extensions-for-net-3-5)

* - Nit picker's corner：除了可能超出范围的高级时间窗口，但缓冲区（按计数和时间）、排序和调度程序都是稳定的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-11-05T23:44:58.313

看看我的线程安全 FIFO 队列的轻量级实现，它是一个使用线程池的非阻塞同步工具——在大多数情况下比创建自己的线程要好，也比使用阻塞同步工具作为锁和互斥锁要好。[https://github.com/Gentlee/SerialQueue](https://github.com/Gentlee/SerialQueue)

用法：

```
var queue = new SerialQueue();
var result = await queue.Enqueue(() => /* code to synchronize */); 
```

# php - 为什么这个正则表达式会引发“PREG_BACKTRACK_LIMIT_ERROR”错误？

> ID：12375341
> 
> 赞同：2
> 
> 时间：2012-09-11T18:01:28.657
> 
> 标签：php, regex

在[PHP.net](http://www.php.net/manual/en/function.preg-last-error.php)的示例中，它表示`/(?:\D+|<\d+>)*[!?]/`匹配的正则表达式`foobar foobar foobar`会引发`PREG_BACKTRACK_LIMIT_ERROR`错误。谁能解释为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:05:40.047

[灾难性的回溯。](http://www.regular-expressions.info/catastrophic.html)

嵌套不正确。

# ruby-on-rails - Mailer 使用与 ___ 控制器相同的控制器代码

> ID：12375342
> 
> 赞同：1
> 
> 时间：2012-09-11T18:01:29.720
> 
> 标签：ruby-on-rails, mailer

所以我想邮寄一份报告，其中包含控制器定期定义的类变量。但是在邮件中我必须再次定义它们？有没有办法不重复这个？我考虑过将它更多地移到模型中，但最终它仍然是相同数量的定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:18:38.410

您不必再次定义它们，您可以将它们从控制器作为参数传递给 mailer 方法。

假设您在邮件中需要@ivar1、@ivar2 和@ivar3，您所要做的就是从控制器运行它：

```
MyMailer.some_email(@ivar1, @ivar2, @ivar3).deliver 
```

编辑：

再看看你的问题（和我的回答），我想我可能首先误解了它。

在我的解决方案中，您仍然必须重新定义实例变量。这些值已正确传递，但您仍然必须：

```
def some_email(v1, v2, v3)
  @ivar1 = v1
  @ivar2 = v2
  @ivar3 = v3
end 
```

无法使用控制器中定义的**相同**实例变量。

# c# - 使用媒体库时如何查找歌曲文件名

> ID：12375343
> 
> 赞同：0
> 
> 时间：2012-09-11T18:01:29.100
> 
> 标签：c#, .net, silverlight, windows-phone-7

我使用从媒体库中获取歌曲标题

```
private void ListSongs()
    {
       MediaLibrary lib = new MediaLibrary();
       var SongName = (from m in lib.Songs
       select m.Name).ToList();
       listBox1.ItemsSource = SongName;
} 
```

在这里我可以得到歌曲名称为 m.name，我如何获得文件名？可能是文件名与歌曲名称不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:15:25.833

您无法从 MediaLibrary 中获取 Songs 的文件名，也无法访问这些文件的文件 Stream。访问 MediaLibrary 中的歌曲基本上是沙盒，以防止应用程序“删除”或“窃取”您的音乐。

# iphone - FMOD 停止或重置 DSP？

> ID：12375347
> 
> 赞同：0
> 
> 时间：2012-09-11T18:01:43.687
> 
> 标签：iphone, objective-c, ios, fmod

我有一个关于在 FMOD 中停止 DSP 的问题。我有一个按钮，我想阻止我的 DSP 被启用。

```
- (IBAction)myButton:(id)sender {

   FMOD_DSP_Reset(FMOD_DSP_TYPE_ECHO *myEcho);

} 
```

有任何想法吗？我查看了文档 - 但它对我不起作用。他将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:44:54.397

啊! 我想通了——这很简单。我想我把它复杂化了。

我需要做的就是将简单的 remove 调用加入到操作中。:)

```
result = myEcho->remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T00:22:48.160

还有 DSP::setActive 或 DSP::setBypass

# scala - Scalacheck json 和 case 类

> ID：12375355
> 
> 赞同：3
> 
> 时间：2012-09-11T18:02:17.527
> 
> 标签：scala, specs2, scalacheck

我正在编写一个服务，它接受一个案例类并将其序列化为 json，然后我将其发送到运行 Elastic Search 的实例。

我希望 scalacheck 生成几个带有随机缺失数据的案例类，如下所示：

```
val searchDescAndBrand = SearchEntry("", "Ac Adapters", "Sony", "", "", "", "", "", "", "", "", "", "", "", "","", "", "", "", "", "", 0L)
val searchBrand = SearchEntry("", ", "Sony", "", "", "", "", "", "", "", "", "", "", "", "","", "", "", "", "", "", 0L)
val searchPartNumberAndBrand = SearchEntry("02DUYT", "", "Sony", "", "", "", "", "", "", "", "", "", "", "", "","", "", "", "", "", "", 0L) 
```

你明白了，要么填写值，要么将它们留空（最后一个是`Long`类型。

这是容易的部分，问题是生成的json不只是省略“归档”，而是省略了整个部分，例如：

```
 """
  |{
  |  "from" : 0,
  |  "size" : 10,
  |  "query" : {
  |    "bool" : {
  |      "must" : [
  |        {"match" : {
  |          "description" : {
  |            "query" : "Ac Adapters",
  |            "type" : "phrase"
  |          }
  |        }},
  |        {"match" : {
  |          "brand" : {
  |            "query" : "Sony",
  |            "type" : "phrase"
  |          }
  |        }}
  |      ]
  |    }
  |  }
  |}
  |
""".stripMargin) 
```

如果我有一个带有数据的前 3 个字段的案例类，则 json 将是：

```
 """
  |{
  |  "from" : 0,
  |  "size" : 10,
  |  "query" : {
  |    "bool" : {
  |      "must" : [
  |        {"match" : {
  |          "part_number" : {
  |            "query" : "02D875",
  |            "type" : "phrase"
  |          }
  |        }},
  |        {"match" : {
  |          "description" : {
  |            "query" : "Ac Adapters",
  |            "type" : "phrase"
  |          }
  |        }},
  |        {"match" : {
  |          "brand" : {
  |            "query" : "Sony",
  |            "type" : "phrase"
  |          }
  |        }}
  |      ]
  |    }
  |  }
  |}
  |
""".stripMargin) 
```

所以，简而言之，拥有价值意味着增加

```
{"match" : {
  |          "<specific name here, based on which value we have>" : {
  |            "query" : "<value from scalacheck>",
  |            "type" : "phrase"
  |          }
  |        }} 
```

到结果。

您将如何处理这样的用例？

# ruby-on-rails - Rails：嵌套资源

> ID：12375361
> 
> 赞同：0
> 
> 时间：2012-09-11T18:02:41.800
> 
> 标签：ruby-on-rails, nested-resources

以下路径引发错误：

```
 = link_to 'Subscribers', user_subscribers_path(current_user) 
```

> <#:0x007f9b240b3148> 的未定义方法“user_subscribers_path”

我不确定为什么。

我已经定义了我的路线如下：

```
 resources :users, :only => [:show, :index], :has_many => :subscribers, :shallow => true 
```

谢谢！

**编辑** rake 路线没有显示任何特别有用的东西。仅有的两行订阅者是：

```
users GET    /users(.:format)               users#index {:has_many=>:subscribers}
user GET    /users/:id(.:format)           users#show {:has_many=>:subscribers} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:13:39.663

您需要在路由文件中定义资源订阅者，如下所示

```
resources :users do 
 resources :subscribers
end 
```

这将为您的资源创建所需的路径助手

对于您可以使用的浅层路线

```
 map.resources :users, :shallow => true do |user|
  user.resources :subscribers 
 end 
```

# objective-c - 如何动态地将逗号和小数放在我的 UITextField 中？

> ID：12375363
> 
> 赞同：1
> 
> 时间：2012-09-11T18:02:52.783
> 
> 标签：objective-c, ios, uitextfield, nsnumberformatter

我想在 '11000' 中添加一个 ',' 像这样的 '11,000' 和十进制 ('.') 在 465 像 4.65。我为 Comma 写了这个：

```
- (BOOL) textField: (UITextField *)textField shouldChangeCharactersInRange: (NSRange)range replacementString: (NSString *)string {
    NSString *unformattedValue;
    NSNumberFormatter *formatter;
    NSNumber *amount;

    switch ([textField tag]) {
        case 102:
            unformattedValue = [textField.text stringByReplacingOccurrencesOfString:@"," withString:@""];
            unformattedValue = [unformattedValue stringByReplacingOccurrencesOfString:@"." withString:@""];

            formatter = [[NSNumberFormatter alloc] init];
            [formatter setNumberStyle:NSNumberFormatterDecimalStyle];
            [formatter setGroupingSeparator:@","];
            [formatter setDecimalSeparator:@"."];

            amount = [NSNumber numberWithInteger:[unformattedValue intValue]];
            textField.text = [formatter stringFromNumber:amount];
            break;
        default:
            break;
    }
    return YES;
} 
```

而这样做实际上是把像这样的逗号 1,1000 换成 11000。而且我无法做任何接近小数的事情。请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:33:45.547

`NSNumberFormatter`可以为您处理从字符串到数字的转换并返回。无需自己剥离字符`stringByReplacingOccurrencesOfString`或使用不太宽松的字符串到数字转换方法（如果您希望能够获得小数，`intValue`至少不要使用）。`intValue`

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];

NSNumber *amount = [formatter numberFromString:textField.text];

textField.text = [formatter stringFromNumber:amount]; 
```

根据您需要容忍的输入，如果`NSNumberFormatter`' 的`lenient`设置不够，您可能仍希望对输入字符串进行一些其他清理。如果您想以一种格式解析输入字符串然后以另一种格式输出，您也可以使用多个数字格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T06:47:12.783

使用以下代码在正确的位置手动添加逗号。您可以从此代码中获取逻辑并对其进行调整以满足您的要求。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

NSLog(@"Text:%@textField length:%dRange.length:%lu , Range.location:%lu :: replacementString:%@",textField.text,textField.text.length,(unsigned long)range.length,(unsigned long)range.location,string);
NSMutableString *tempString=textField.text.mutableCopy;
int digitsCount;

if ([string isEqualToString:@""])    //digit removed
{
    NSLog(@"digit removed, string length after trimming:%d",[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].length);
    digitsCount=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].length-1; //digit removed
}else   ///digit added
{
digitsCount=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].length+1 ;
}
NSLog(@"Number of digits:%d",digitsCount);
switch (digitsCount)
{
    //case 1:textField.text=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""];
        //break;
    case 3:textField.text=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""];
        break;

    case 4:
        //remove previous comma...
        tempString=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].mutableCopy;
        [tempString insertString:@"," atIndex:1];
        textField.text=tempString;
            break;

    case 5:
         //remove previous comma...
        tempString=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].mutableCopy;
        [tempString insertString:@"," atIndex:2];
        textField.text=tempString;
        break;

    case 6:
        //remove previous comma...
        tempString=[tempString stringByReplacingOccurrencesOfString:@"," withString:@""].mutableCopy;
        [tempString insertString:@"," atIndex:1];
        [tempString insertString:@"," atIndex:4];
        textField.text=tempString;

        break;

    default:
        break;
}

return YES;
} 
```

# sql - 在 Postgres 中将十六进制字符串转换为 bigint

> ID：12375369
> 
> 赞同：6
> 
> 时间：2012-09-11T18:03:18.877
> 
> 标签：sql, postgresql, hex, postgresql-9.1

我想将 HTML 使用的十六进制字符串转换为 a `bigint`，然后通过用 PL/pgSQL 编写的函数将其转换为 Postgres 中单独的 R、G 和 B 值。

我可以将字符串解码成`bytea`这样：

```
hex bytea := decode(hex, 'hex'); 
```

在具有固定值的查询中，这就像一个美女：

```
select ( array[ (cast(x'ffaa33' as bigint) >> 16) % 256,
                (cast(x'ffaa33' as bigint) >> 8) % 256,
                 cast(x'ffaa33' as bigint) % 256 ] ) 
```

但我不能将两者放在一起，传递 - 例如*'ffaa33'*作为参数。

有人有更好的主意吗？我正在使用 PosgreSQL 9.1？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T19:48:06.583

一个简单的方法是：

```
 select ('x'||lpad(the_hex_value,16,'0'))::bit(64)::bigint; 
```

左边用 0 填充是必要的，因为最左边的位总是被解释为符号位。另请记住，`bigint`已签名，postgres 没有内置的无符号类型。

# c# - 在 Windows Server 2008 中永远不会触发 OutputDataReceived 事件（在 Win7 中正常）

> ID：12375379
> 
> 赞同：0
> 
> 时间：2012-09-11T18:03:53.983
> 
> 标签：c#, .net, process, system.diagnostics

我有一个奇怪的问题，我似乎无法诊断。

我正在调用外部二进制文件，等待它完成，然后根据标准输出传回结果。我也想记录错误。

我写了这个，它在 Windows 7 中很有效

```
namespace MyApp
{
    class MyClass
    {

        public static int TIMEOUT = 600000;
        private StringBuilder netOutput = null;
        private StringBuilder netError = null;

        public ResultClass runProcess()
        {

            using (Process process = new Process())
            {
                process.StartInfo.FileName = ConfigurationManager.AppSettings["ExeLocation"];
                process.StartInfo.WorkingDirectory = Path.GetDirectoryName(ConfigurationManager.AppSettings["ExeLocation"]);

                process.StartInfo.UseShellExecute = false;

                process.StartInfo.RedirectStandardOutput = true;
                process.OutputDataReceived += new DataReceivedEventHandler(NetOutputDataHandler);
                netOutput = new StringBuilder();

                process.StartInfo.RedirectStandardError = true;
                process.ErrorDataReceived += new DataReceivedEventHandler(NetErrorDataHandler);
                netError = new StringBuilder();

                process.Start();

                process.BeginOutputReadLine();
                process.BeginErrorReadLine();

                if (process.WaitForExit(TIMEOUT))
                {
                    // Process completed handle result
                    //return my ResultClass object
                }
                else
                {
                    //timed out throw exception
                }
            }

        }

        private void NetOutputDataHandler(object sendingProcess,
              DataReceivedEventArgs outLine)
        {
            //this is being called in Windows 7 but never in Windows Server 2008
            if (!String.IsNullOrEmpty(outLine.Data))
            {
                netOutput.Append(outLine.Data);
            }
        }

        private void NetErrorDataHandler(object sendingProcess,
            DataReceivedEventArgs outLine)
        {
            //this is being called in Windows 7 but never in Windows Server 2008
            if (!String.IsNullOrEmpty(outLine.Data))
            {
                netError.Append(outLine.Data);
            }
        }

    }
} 
```

所以我将它安装在 Windows Server 2008 机器上，并且永远不会调用 NetOutputDataHandler 和 NetErrorDataHandler 处理程序。

该应用程序是为 .NET v4 编译的。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:18:40.837

您可能想要检查代码访问安全策略。您可以首先使用[caspol.exe](http://msdn.microsoft.com/en-us/library/cb6t8dtz%28v=vs.80%29.aspx)的 -l 参数运行 caspol.exe，以便 -u[ser] 运行应用程序。

不要忘记检查以管理员身份运行应用程序时是否仍然遇到相同的问题

# c# - 是否可以设置 asp.net gridview 单元格的背景？

> ID：12375382
> 
> 赞同：3
> 
> 时间：2012-09-11T18:04:09.733
> 
> 标签：c#, asp.net, css, gridview

可能吗？我只能设置单元格的背景颜色。事情是，如果我设置背景颜色，它不会在您打印页面时显示（默认情况下）。所以我想通过css将背景设置为网格单元格，但在BoundField.ItemStyle类中找不到这个属性（只有'backgroundColor'）。那么，这有可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:06:43.437

你可以试试

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {

      if(condition)//Replace with your condition
      {
        e.Row.Cells[5].Attributes.Add("Style", "background: url(../Images/test.png) no-repeat 5px center
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:25:09.733

尝试这个：

在后面代码中的 RowDataBound 事件中，您可以获得所需单元格的 System.Web.UI.WebControls.TableCell 对象，并使用 CssClass 属性设置其样式：

```
e.Row.Cells[0].CssClass = "myStyle" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:10:14.590

您可以`RowStyle-CssClass`在 GridView 上设置属性，然后将样式应用于您拥有 CSS 样式的单元格（外部样式表、头部等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:12:19.700

如果您希望每个单元格而不是网格视图上的行，您可以添加

```
ItemStyle-CssClass="class name here" 
```

# google-analytics - 无 cookie 环境中的谷歌分析 (brightscript)

> ID：12375383
> 
> 赞同：7
> 
> 时间：2012-09-11T18:04:15.650
> 
> 标签：google-analytics

我正在 Roku 盒子（brightscript）上实现分析事件和页面查看跟踪。这部分不是那么重要，但要知道 JS 不是一个选项，cookie 设置也不是。我可以设置变量，但它们不是典型的 cookie。好的 - 所以我已经实现了一个很好的解决方案（[google-analytics-for-roku-developers/](http://bloggingwordpress.com/2012/04/google-analytics-for-roku-developers/)），一切都很好 - 除了！！

分析似乎没有跟踪唯一性，并且列出零。但是，它可以很好地跟踪事件:)

这是我的 URI 请求示例（为清楚起见已解码）：

```
http://www.google-analytics.com/__utm.gif?utmwv=1&utmn=1736644096&utmsr=720p HDTV&utmsc=24-bit&utmul=en-us&utmje=0&utmfl=-&utmdt=RokuPageView&utmhn=Home&utmr=-&utmp=Home&utmac=UA-5035974-13&utmcc=__utma=1394882688.2097034752.1347384621.1347384621.1347384621.2;+__utmb=1394882688;+__utmc=1394882688;+__utmz=1394882688.1347384621.2.2.utmccn=(direct)|utmcsr=(direct)|utmcmd=(none);+__utmv=1394882688.13C1CJ109560; 
```

所以，问题 #1 - 我[从文档](https://developers.google.com/analytics/resources/concepts/gaConceptsCookies)中了解到 __utma 是跟踪唯一性的元素。你看到那里有什么不对吗？

问题 #2 - 我实现的开发代码为每个事件发送一个新的随机 cookie。这对我来说似乎是错误的。我正在考虑将其更改为在所有事件中持续存在的基于会话的 cookie。那是我远远超出我的理解的时候。对此有何指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:36:16.917

我认为＃2的答案就是＃1的答案。基本上，您需要模拟浏览器如何处理代码中的 cookie。“会话 cookie”只是一个 cookie，即作为 HTTP 标头与请求和响应一起传递的值 - 使它成为会话 cookie 的原因是它的到期日期设置为过去，它告诉浏览器当浏览器实例关闭时将其删除。

Cookie 非常简单——一种绕过 HTTP 无状态（没有内存）这一事实的机制。如果您在响应中传递 HTTP 标头`Set-cookie: <value>`，则客户端应该记住该值并`Cookie: <value>`在后续请求中将其传递回标头中。（与域和过期等有关的 cookie 有更多内容，但并不多）。

因此，如果您的客户端（Roku）有一些持久性机制，那么您只需要存储任何新的 cookie，然后在设置新的随机 cookie 之前，检查标头，如果 cookie 已存储，只需按原样发回即可。您可能需要执行某种任务来定期清理过期的 cookie，等等。

不要害怕饼干。它只是一个标题（具有浏览器赋予的魔力）。

# preg-match - preg_match 问题：分隔符不能是字母数字或反斜杠

> ID：12375385
> 
> 赞同：1
> 
> 时间：2012-09-11T18:04:18.163
> 
> 标签：preg-match, delimiter

我知道这个问题已经在不同的问题中讨论过，但人们给出的答案似乎对我不起作用。我正在处理以下问题：

```
if ( (preg_match($suspect, $lowmsg) )
  || (preg_match($suspect, strtolower($_POST['name'])))
  || (preg_match($suspect, strtolower($_POST['email'])))) 
```

现在，人们一直在说，如果我`"/"`在前面和后面加上 '/email/' 这样的引号，这将解决问题。我尝试将 / 用于电子邮件和姓名，但它仍然让我回到相同的分隔符错误。

我还收到一个最终错误：警告：无法修改标头信息 - 标头已由（我的网站的 send.php:43）在第 61 行发送。这与它有什么关系，或者这只是由于以下原因导致的错误较早的错误？

这是感兴趣的各方的完整代码：

```
<?php

 if(($_POST['email']=="")||($_POST['name']=="")||($_POST['message']==""))

 {

  echo "<html><body><p>The following fields are <strong>required</strong>.</p><ul>";

  if($_POST['name'] == ""){ echo "<li>Name</li>"; }

  if($_POST['email'] == ""){ echo "<li>Email</li>"; }

  if($_POST['message'] == ""){ echo "<li>Message</li>"; }

  echo "</ul><p>Please use your browser's back button to complete the form.</p></body></html>";

 }

 else

 {

  $message = "";

  $message .= "Name: " . htmlspecialchars($_POST['name'], ENT_QUOTES) . "<br>\n";

  $message .= "Email: " . htmlspecialchars($_POST['email'], ENT_QUOTES) . "<br>\n";

  $message .= "Message: " . htmlspecialchars($_POST['message'], ENT_QUOTES) . "<br>\n";

  $subject = htmlspecialchars($_POST['subject'], ENT_QUOTES);

  $pagelink = htmlspecialchars($_POST['pagelink'], ENT_QUOTES);

  $repemail = htmlspecialchars($_POST['repemail'], ENT_QUOTES);

  $injection_strings = array ( "content-type:","charset=","mime-version:","multipart/mixed","bcc:","cc:");

  foreach($injection_strings as $suspect)

  {

   if((preg_match($suspect, $lowmsg)) || (preg_match($suspect, strtolower($_POST['/name/']))) || (preg_match($suspect, strtolower($_POST['/email/']))))

   {

     die ( 'Illegal Input.  Go back and try again.  Your message has not been sent.' );

   }

  }

 $headers = "MIME-Version: 1.0\r\nContent-type: text/html; charset=iso-8859-1\r\n";

 $headers .= "From: \"" . $_POST['/name/'] . "\" <" . $_POST['/email/'] . ">\r\n";

 $headers .= "Reply-To: " . $_POST['/email/'] . "\r\n\r\n";

  mail($repemail, $subject, $message, $headers);

 header("Location: " . $pagelink . "");

 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:08:36.993

可以试试其他的分隔符，比如/#~

见[regexp.reference.delimiters](http://php.net/manual/en/regexp.reference.delimiters.php)

希望有帮助。

编辑：你不需要在 $_POST 内做反斜杠

```
Use $_POST['name'] instead of $_POST['/name/'] 
```

编辑：试试

```
preg_match("/".$suspect."/i", strtolower($_POST['name']); 
```

但是，我认为您不会找到任何`$injection_strings`内部帖子名称。您可能需要重新考虑您的搜索方式。“content_type”不会与您当前的语句匹配“text/html”。您需要尝试其他正则表达式，例如

```
preg_match("/".$suspect."(.*)/i", strtolower($_POST['name'], $output); 
```

所以它会`$output[0]`，你的“可疑”变量。我不确定这是否是您正在寻找的东西，但也许会将您送到正确的轨道。

编辑：在这里。

如果您想查看说“cc：”并找到它是什么电子邮件，请使用它。

```
preg_match("/cc:(.*)/i",'cc:'.$_POST['email'],$output);
$output[0]; would equal your email. 
```

为了与你的 foreach 循环兼容，你可能也想改变它，

在“if 语句”中切换下面的代码

```
preg_match("/".$suspect."(.*)/i",$suspect.$_POST['email']) 
```

# c++ - stl c++优先级队列可以和stl set一起使用吗？

> ID：12375392
> 
> 赞同：2
> 
> 时间：2012-09-11T18:04:33.640
> 
> 标签：c++, stl, set, priority-queue

我的问题与[Is there a Queue (PriorityQueue) implementation 相同，它也是一个 Set？](https://stackoverflow.com/questions/1869036/is-there-a-queue-priorityqueue-implementation-which-is-also-a-set)除了这个是关于 c++ 和 stl 的。

是否可以使用将stl设置为容器类的stl优先级队列？如果没有，是否有一个替代容器类可以与优先级队列一起使用以使其成为一个集合？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T01:52:00.393

的规范`std::priority_queue`不允许“唯一成员资格”。如果您希望优先级队列中的唯一成员资格，那么*您不希望`std::priority_queue`*.

如果您想要一个具有唯一成员资格的优先级队列实现，那么`std::set` *已经这样做了*，因为它保持其成员排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T21:58:56.967

这可能不是最有效的实现，但你可以做这样的事情。（请注意，我不是在这里尝试满足 std::priority_queue 的确切接口，对更改比较运算符或底层容器或 std::set 分配器不感兴趣）。

这个实现只是假装推送成功，而不是在推送副本时抛出。

```
template<class T>
class UniquePriorityQueue
{
public:
    typedef typename std::priority_queue<T>::size_type size_type;

    void push(const T& v)
    {
        auto i = membership_.insert(v);
        if(i.second)
        {
            queue_.push(v);
        }
    }

    void pop(void)
    {
        membership_.erase(queue_.top());
        queue_.pop();
    }

    const T& top() const
    {
        return queue_.top();
    }

    bool empty() const
    {
        return queue_.empty();
    }

    size_type size() const 
    {
        return queue_.size();
    }

private:
    std::priority_queue<T> queue_;
    std::set<T> membership_;
}; 
```

驱动实现的功能的主要...

```
int main()
{
    UniquePriorityQueue<int> q;
    q.push(1);
    q.push(1);
    q.push(8);
    q.push(4);
    q.push(2);
    q.push(8);
    q.push(5);
    q.push(7);

    assert(q.size() == 6);
    assert(q.top() == 8);
    q.pop();

    assert(q.top() == 7);
    q.pop();

    assert(q.top() == 5);
    q.pop();

    assert(q.top() == 4);
    q.pop();

    assert(q.top() == 2);
    q.pop();

    assert(q.top() == 1);
    q.pop();

    assert(q.empty());  
} 
```

# python - 如何使用 PIL Image 在 Django 网页中输出图像

> ID：12375393
> 
> 赞同：1
> 
> 时间：2012-09-11T18:04:38.040
> 
> 标签：python, django, python-imaging-library

我使用 Image.new 在 django 视图中创建一个图像对象，我想在网页中显示它。

x = Image.new('RGB',(400,400)) 返回 HttpResponse(x.show(), mimetype="image/png")

不起作用。

如何将图像对象转换为图像原始二进制文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:17:03.590

您可以将 base64 图像嵌入到一个中`<img src=`，以便您可以尝试将 PIL 图像转换为 base64。

```
from PIL import Image
import StringIO

x = Image.new('RGB',(400,400))
output = StringIO.StringIO()
x.save(output, "PNG")
contents = output.getvalue().encode("base64")
output.close()
return HttpResponse('<img src="data:image/png;base64,' + contents + ' />') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:17:01.987

您有 2 个选项：

1.  将您的图像保存在您的网络服务器可以提供的某个位置
2.  用base64编码，直接显示

第一个选项是首选选项。代码应该是这样的：

```
x = Image.new() # The same stuff than yours
x.save(MEDIA_ROOT + "/generated_images/the_name_of_the_image.jpg", "JPEG")
return HttpResponse(
  "<img src="%s/%s />" % (MEDIA_URL, "/generated_images/the_name_of_the_image.jpg")
) 
```

如果需要，您可以在 base64 中读取（请参阅：[使用 base64 编码图像文件](https://stackoverflow.com/questions/3715493/encoding-an-image-file-with-base64)）并显示它：

```
base64_img = get_base_64()
return HttpResponse('<img alt="Embedded Image" src="data:image/jpeg;base64," % base64_img />') 
```

# python - 多个标点剥离

> ID：12375394
> 
> 赞同：0
> 
> 时间：2012-09-11T18:04:39.480
> 
> 标签：python, regex, string, punctuation

我在这里尝试了多种解决方案，尽管它们剥离了一些代码，但它们似乎不适用于多个标点符号。"[ 或 '，此代码：

```
regex = re.compile('[%s]' % re.escape(string.punctuation))
    for i in words:
        while regex.match(i):
            regex.sub('', i) 
```

我来自： [从 Python 中的字符串中去除标点符号的最佳方法](https://stackoverflow.com/questions/265960/best-way-to-strip-punctuation-from-a-string-in-python)很好，但我仍然遇到双标点符号的问题。我添加了`While`循环以希望对每个单词进行迭代以删除多个标点符号，但这似乎不起作用它只是卡在第一项“[并且不退出它

我只是错过了一些明显的部分，我也只是忘记了吗？

我通过添加冗余和双循环我的列表解决了这个问题，由于相当大的集合，这需要很长时间（甚至几分钟）

我使用 Python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:38:26.617

您的代码不起作用，因为[`regex.match`](http://docs.python.org/library/re.html#search-vs-match)需要字符串的**开头**或**完整**的字符串来匹配。

此外，您没有对`regex.sub()`. `sub`不起作用，但您需要将其结果分配给某些东西。

`regex.search`如果在字符串中的任何位置找到该模式并按预期工作，则返回匹配项：

```
import re
import string

words = ['a.bc,,', 'cdd,gf.f.d,fe']

regex = re.compile('[%s]' % re.escape(string.punctuation))
for i in words:
    while regex.search(i):
        i = regex.sub('', i)
    print i 
```

**编辑**：正如@senderle 在下面指出的那样，while 子句不是必需的，可以完全省略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:10:02.513

这将取代所有不是字母数字的东西......

```
re.sub("[^a-zA-Z0-9 ]","",my_text)

>>> re.sub("[^a-zA-Z0-9 ]","","A [Black. Cat' On a Hot , tin roof!")
'A Black Cat On a Hot  tin roof' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:44:00.073

这是一个简单的方法：

```
>>> print str.translate("My&& Dog's {{{%!@#%!@#$L&&&ove Sal*mon", None,'~`!@#$%^&*()_+=-[]\|}{;:/><,.?\"\'')
>>> My Dogs Love Salmon 
```

使用这个 str.translate 函数将消除标点符号。我通常用它来消除 DNA 序列读数中的数字。

# java - 如何解决截屏应用程序中的问题？

> ID：12375399
> 
> 赞同：2
> 
> 时间：2012-09-11T18:04:56.433
> 
> 标签：java, image, io

我编写了一个基于 GUI 的 Java 程序，它每秒截取 25 个屏幕截图并将它们保存在用户定义的位置。
它工作得很好，除了它有两个问题：

*   图像中缺少鼠标光标，我知道这是因为`BufferedImage`s 中不包含光标信息。它们必须以编程方式添加。
*   获取屏幕截图的线程是一个守护线程。因此，如果我关闭应用程序，线程将被终止，并且正在写入的 PNG 图像被破坏。我想避免这种情况。
以下是我的应用程序的图像：
**屡获殊荣的直观 GUI**：
![在此处输入图像描述](../Images/2c56417004b9077f2cb8018ec915f6f6.png)

**捕获的高清图像如下所示**：
![在此处输入图像描述](../Images/42a9e9f3e3026bc0f2200d041cbe5994.png)
从图像中可以看出，光标信息正在使用`MouseInfo`的静态方法在控制台中显示。

请让我知道如何解决上述两个问题。
**解决问题后，图像现在如下所示：**
![带光标](../Images/19773927d7b53dedb55276ed0bf10d67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:09:04.477

> 图像中缺少鼠标光标，我知道这是因为 BufferedImages 中不包含光标信息。它们必须以编程方式添加。

没错，你必须在之后添加光标。原因是使用 Robot 类截取的屏幕截图从不包含光标。并不是因为“BufferedImage 不包含鼠标信息”。BufferedImage 是一个包含像素栅格的类。

> 获取屏幕截图的线程是一个守护线程。因此，如果我关闭应用程序，线程将被终止，并且正在写入的 PNG 图像被破坏。我想避免这种情况。

简单地说，在屏幕截图线程中，使用一个标志来指示它是否应该继续。只要该布尔值设置为true，就继续截取屏幕截图。确保将其设为非恶魔。因此，当您关闭应用程序时，将标志设置为 false。可能最简单的方法是添加一个 WindowListener：

```
yourFrame.addWindowListener(new WindowAdapter()
{
    public void windowClosed(WindowEvent e)
    {
        screenshotThread.stopTakingScreenshots(); // This methods set the flag
    }
} 
```

* * *

另请注意，您没有花时间制作和保存屏幕截图。您使用 40 毫秒的固定睡眠，但假设拍摄和保存屏幕截图需要 4 毫秒，那么您应该只睡眠 36 毫秒。要计算制作屏幕截图所需的时间，`System.currentTimeMillis();`请在您的方法之前和之后使用`takeShot()`并有所作为。

# c# - F5（刷新）后更新面板闪烁

> ID：12375400
> 
> 赞同：-1
> 
> 时间：2012-09-11T18:05:00.733
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

我在页面上有一个更新面板，当我单击 F5 刷新页面时，其中的项目开始闪烁。可能是什么问题呢 ？有没有办法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:47:52.030

当我在 Chrome 中本地运行我的应用程序时遇到了这个问题。似乎只有当我在本地运行它并在它发布后完全停止时才会这样做。尝试发布您的应用程序，看看它是否修复它。

# java - Hibernate Validator：在注释中使用 if - else 类型的逻辑

> ID：12375401
> 
> 赞同：5
> 
> 时间：2012-09-11T18:05:03.560
> 
> 标签：java, hibernate, hibernate-validator

我正在使用像 @NotEmpty 这样的 Hibernate 验证器来查看类中的特定属性是否为空。类如图所示：

```
@Entity
@Table(name="emergency_messages")
public class EmergencyMessages implements Serializable {

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id", nullable=false)
private Integer id;

@NotEmpty(message="Home message cannot be empty")
@Column(name="home_page_message")
private String homePageMessage;

@Range(min=0, max=1, message="Please select one of the display announcement value")
@Column(name="messages_enabled")
private Integer messagesEnabled;
} 
```

到目前为止，一切都很好。每当属性“homePageMes​​sage”为空时，我可以在浏览器的表单中看到正确的错误消息。

现在情况发生了变化。新的要求是，只有当其他属性“messagesEnabled”设置为 1 时，属性“homePageMes​​sage”才能为空。如果设置为 0，则不应对“homePageMes​​sage”进行空检查。简而言之，“homePageMes​​sage”的验证现在应该依赖于“messagesEnabled”值。

我的问题：这可能与注释有关吗？如果没有，那么我将不得不拆除我的休眠验证器机制并创建我自己的验证类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:07:58.363

我认为您需要编写自定义注释来实现这一点。您也可以使用其他带有自定义注释的休眠验证约束，无需删除任何内容。
检查此[链接](http://blog.inflinx.com/2012/04/24/custom-jsr-303-constraints/)以获取详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T16:42:51.263

以下是我提出的代码（根据 Ajinkya 和 Alex 的建议）：

自定义注释：

```
import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;

import javax.validation.Constraint;
import javax.validation.Payload;

@Target({ElementType.TYPE})  
@Retention(RetentionPolicy.RUNTIME)  
@Documented  
@Constraint(validatedBy=HomePageEmptyMessageValidator.class)
public @interface HomePageEmptyMessage {

String message() default "";

 Class<?>[] groups() default {};

 Class<? extends Payload>[] payload() default {};
} 
```

自定义验证器：

```
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

public class HomePageEmptyMessageValidator implements ConstraintValidator<HomePageEmptyMessage, EmergencyMessages> {

@Override
public void initialize(HomePageEmptyMessage homePageEmptyMessage) {
}

@Override
public boolean isValid(EmergencyMessages emergencyMessages, ConstraintValidatorContext context) {

    if (emergencyMessages == null) {
        return false;
    }

    Integer messageEnabled = emergencyMessages.getMessagesEnabled();
    if (messageEnabled != null) {
        if (messageEnabled == 1) {
            String homePageMessage =  emergencyMessages.getHomePageMessage();
            if (Util.isNullOrEmpty(homePageMessage)) {
                return false;
            } else {
                return true;
            }
        } else {
            return true;
        }
    }

    return false;
}

} 
```

代码中自定义注解的用法：

```
@Entity
@Table(name="emergency_messages")
@HomePageEmptyMessage(message="Home page annoucement cannot be empty if the Display  Announcement is set to Yes")
public class EmergencyMessages implements Serializable {

private static final long serialVersionUID = -7870767517772161300L; 

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id", nullable=false)
private Integer id; 

@Column(name="home_page_message")
private String homePageMessage;

@Range(min=0, max=1, message="Please select one of the display announcement value")
@Column(name="messages_enabled")
private Integer messagesEnabled;
} 
```

我希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:11:04.550

您需要的是[`ConstraintValidator`](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html)实体的实现，使用其[`@Constraint`](http://docs.jboss.org/hibernate/validator/4.0.1/reference/en/html/validator-customconstraints.html#validator-customconstraints-constraintannotation)上的注释。

您可以在此处对依赖于其他字段的字段设置条件。在字段上使用注释的约束应该用于可以对字段本身进行的检查，而不是依赖于其他约束（如最大大小、可为空等）。

# c - 如何检查 void 函数是否使用 printf 成功运行？

> ID：12375404
> 
> 赞同：-4
> 
> 时间：2012-09-11T18:05:14.773
> 
> 标签：c

一位朋友告诉我有一种方法可以在`printf` **不**修改原始`void`功能的情况下进行检查。

但我看不出你怎么能做到。

```
#include<stdio.h>

void test()
{
  int a = 1;
  int b = a;
}

main()
{
    printf("%d",test());    
} 
```

我不断得到

> 错误：无效表达式的使用无效

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T18:07:37.077

我从您的编辑中看到您希望在不修改功能的情况下执行此操作。您可以使用逗号运算符在 a 中进行函数调用`printf`：

```
#include <stdio.h>

void test()
{
    int a = 1;
    int b = a;
}

main()
{
    printf("%d\n", (test(), 0));

    // or even this, to be more explicit:
    printf("%s\n", (test(), "test() was called."));
} 
```

逗号运算符计算第一个操作数 - 在这种情况下是您的函数调用 - 并丢弃结果，然后计算第二个操作数，结果是整个表达式的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:10:30.097

一个例子是将内存指针传递给 void 函数并用您需要的数据填充它，以查看您的 void 函数是否有效。

```
void
test_funtion(bool *answer)
{
    answer = false;
    // do stuff
    if(error happens)
        return;
    answer = true;
    return;
} 
```

我不明白您将如何使用 printf 让程序知道。只有这样，您才能使用 printf 为自己而非机器进行可视化日志记录。

# vb.net - Option Strict On 不允许后期绑定

> ID：12375405
> 
> 赞同：12
> 
> 时间：2012-09-11T18:05:21.700
> 
> 标签：vb.net, visual-studio-2010, strcmp

有人可以帮我解决这个错误吗？

> Option Strict On 不允许后期绑定

这是导致错误的代码：

```
Dim SF6StdData As BindingSource = New BindingSource() 
' ...
If StrComp(SF6StdData.Current("O2AreaCts").ToString, "") = 0 Then
    AreaCts(3) = 0
Else
    AreaCts(3) = Convert.ToDouble(SF6StdData.Current("O2AreaCts").ToString)
End If 
```

我需要重写代码，所以它不会有任何错误。我知道我可以通过在项目属性中将 Option Strict 设置为 Off 来解决此问题，但我真的不想这样做。还有其他方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T18:11:01.933

开启时不允许后期绑定`Option Strict`。如果您需要执行后期绑定，唯一的选择是使用反射或关闭`Option Strict`。然而，一个可取之处是您不必关闭`Option Strict`整个项目。您可以为项目保留它，然后只需`Option Strict Off`在需要执行后期绑定的任何代码文件的顶部添加该行。这不是一个很好的解决方案，但总比影响整个项目要好。

此外，由于`Option Strict`放置在文件顶部仅适用于该文件，因此它甚至不必适用于整个类。如果您将班级拆分为多个`Partial Class`文件，那么您可以`Option Strict`为每个文件进行不同的设置。例如，如果您将大部分类放在一个带有 的文件中`Options Strict On`，然后只将一个方法放在一个`Partial Class`带有 的单独文件中`Option Strict Off`，那么只有一个方法会被松散地编译。课程的其余部分将使用严格的规则进行编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:23:31.773

您需要使 BindingSource 充当强类型数据源。请参阅文档中的备注：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-20T22:15:30.020

这是一篇旧帖子，但我遇到了“Option Strict On 不允许后期绑定”错误。也许另一个答案会帮助别人。当您尝试将 SF6StdData 绑定源中的数据转换为字符串时，可能会出现问题。您可以通过定义具有所需类型的局部变量，然后使用 Ctype 将数据提取到正确的类型来解决该问题。这是我如何解决类似问题的示例。

这段代码给了我后期绑定错误：

```
 Friend Function CountNumCheckedInGroupbox(ByVal gbox As GroupBox, ByRef nameschecked() As String) As Integer
        Dim numchecked As Integer = 0
        For Each ctrl In gbox.Controls
            If TypeOf ctrl Is CheckBox Then                
                If ctrl.Checked = True Then
                    nameschecked(numchecked) = ctrl.Text
                    numchecked += 1
                End If
            End If
        Next
        Return numchecked
    End Function 
```

后期绑定错误发生在我引用“ctrl.Checked”和“ctrl.Text”的地方

我没有直接引用“ctrl”，而是定义了一个类型为 Checkbox 的变量 cbox。然后我将“ctrl”中的信息提取到cbox中。现在代码不显示后期绑定错误：

```
 Friend Function CountNumCheckedInGroupbox(ByVal gbox As GroupBox, ByRef nameschecked() As String) As Integer
        Dim numchecked As Integer = 0
        Dim cbox As CheckBox
        For Each ctrl In gbox.Controls
        If TypeOf ctrl Is CheckBox Then
                cbox = CType(ctrl, CheckBox)
                If cbox.Checked = True Then
                    nameschecked(numchecked) = cbox.Text
                    numchecked += 1
                End If
            End If
        Next
        Return numchecked
    End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-13T15:50:52.993

如果您声明`AreaCts`没有类型，例如：

```
Dim AreaCts as Array 
```

尝试

```
Dim AreaCts() as Double 
```

这修复了我的后期绑定错误。

# ios - 是否有机会调整 UISearchBar texfield 的高度？

> ID：12375407
> 
> 赞同：1
> 
> 时间：2012-09-11T18:05:34.477
> 
> 标签：ios, ios5, uitextfield, uisearchbar

我在谷歌搜索和谷歌搜索，我找不到任何地方我怎么能有一个高度超过 44 像素的 UISearchBar。

这有可能吗？我看过很多其他的 SO 帖子，但没有人工作。

我正在使用 iOS 5。

# udp - Internet 延迟是否将我的客户限制为每小时 120k 同步事务？

> ID：12375410
> 
> 赞同：1
> 
> 时间：2012-09-11T18:05:40.047
> 
> 标签：udp, latency

客户机器向我们的服务器发送 UDP 请求。服务器处理每个请求并发送响应。事务的逻辑要求客户端在发送新请求之前等待响应。

即使客户端和服务器机器的所有处理都是瞬时的，我们的客户似乎仍然平均需要大约 30 毫秒才能通过 Internet 发送/接收往返交易。（以光速行驶约 5,580 英里。）

这是否意味着给定客户平均每小时不能进行超过 120,000 次同步交易？

1 笔交易 = 0.030 秒最少
120k 笔交易 = 1 小时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:10:11.490

**延迟的影响**

由于您*必须*序列化您的请求，延迟将限制您的交易率。

然而，光速计算是理论上的最佳传输时间。在现实生活中，沿途有路由器会增加延迟。

确保并在几天内测量一天中不同时间点的实际 ping 时间，以获得真实的延迟数字。

由于客户端和服务器代码将在小于零的时间内处理，并且处理时间可能至少与延迟时间一样长（取决于您在做什么），假设处理可能不现实时间接近零。

**克服延迟**

如今，有许多相当便宜的方法可以使您的服务器（或至少是您的架构的一层）更靠近您的客户。例如，您可以考虑使用[AWS](http://aws.amazon.com/)等服务将处理资源放置在与您的客户相近的地理位置。然后，您可以为西海岸客户提供与东海岸客户不同的 URL，或者您可以使用地理负载平衡，以便每个人都可以使用相同的 URL（您的负载平衡服务将流量路由到全球最好的服务器）。过去，我已经成功地将[UltraDNS](http://www.neustar.biz/enterprise/dns-services/what-is-external-dns)用于此目的。

# windows-phone-7 - 不授权的 OAuth 库？

> ID：12375413
> 
> 赞同：0
> 
> 时间：2012-09-11T18:06:15.273
> 
> 标签：windows-phone-7, oauth, oauth-2.0

我想为我的应用程序创建一个 OAuth 应用程序，并快速了解 Twitter 是如何做到这一点的。效果很好，输入用户名和密码，游戏就开始了。

但是我尝试了 ReactiveOAuth，它使用 web 控件来显示授权页面，感觉有点过时了。不是推特这样做的方式。

wp7还有其他与oauth一起使用的库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:31:52.773

为了使 OAuth 高效且值得信赖，您的用户必须通过 HTTPS 通过网站登录后端平台。您的应用程序绝不能在内存中拥有用户的密码，当用户成功验证自己时，您所得到的只是一个授权令牌。

# sip - 如何使用 sip servlet 形成多部分 sdp？

> ID：12375419
> 
> 赞同：0
> 
> 时间：2012-09-11T18:06:35.243
> 
> 标签：sip

我想使用 sip servlet 形成一个多部分的 SDP INVITE 消息。

tcpdump 的快照显示了多部分 SDP 的示例，如下所示 ![在此处输入图像描述](../Images/ab8218764653b1327c0b311c219663dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:46:56.863

我无法说出您需要帮助的部分。你知道如何使用 SIP Servlet API 创建 INVITE 吗？如果是这样，那么您可以像这样向消息添加正文：

```
SipServletRequest req;
// create the INVITE
req = ...

// create the SDP
Object multipartSDP = ...

req.setContent(multipartSDP, "multipart/mixed"); 
```

如果您在创建多部分 SDP 本身时需要一些帮助，那么您可以使用[JAIN-SIP 发行版](http://jsip.java.net/)中的 SDP 实用程序。一些示例代码可以在[这里](http://code.google.com/p/jain-sip/source/browse/src/test/unit/gov/nist/javax/sip/multipartmime/MultipartMimeParserTest.java?r=205395d3be388d037ab5cdd0a5395367562b9006)找到。

# c++ - 关于使用 C++ 进行编程原理和实践的“尝试这个”练习，用于迭代

> ID：12375420
> 
> 赞同：1
> 
> 时间：2012-09-11T18:06:36.460
> 
> 标签：c++

我正在学习这本书（自学），如果你能帮助我做一些“试试这个”练习，我将不胜感激。

这是我写的代码：

```
#include "../../../std_lib_facilities.h"

int main()
{
    for (char i ='a'; i <='z'; ++i) {
        int x = i;
        cout << i << '\t' << x << '\n';
    }
    keep_window_open();
    return 0;
} 
```

根据这本书，下一步是：“[...] 然后修改你的程序，以写出一个包含大写字母和数字的整数值的表” 有没有一个函数可以做到这一点，或者我只是有从 A 开始重复循环？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:16:09.920

是的，重复从“A”到“Z”和“0”到“9”的循环。

假设您的书涵盖了函数（可能没有），您可以将 for 循环重构为它自己的函数，可能称为 displayCharactersInTable，它将第一个字符和最后一个字符作为参数。这些将取代循环中“a”和“z”的使用。因此，您的主要功能将如下所示：

```
...
displayCharactersInTable('a', 'z');
displayCharactersInTable('A', 'Z');
displayCharactersInTable('0', '9');
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:44:05.130

```
const char lc_alphabet[] = "abcdefghijklmnopqrstuvwxyz";
const char uc_alphabet[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

int main() {
    for (const char *cur = lc_alphabet; cur < lc_alphabet + sizeof(lc_alphabet); ++cur)
        std::cout << *cur << \t << (int)*cur << '\n';
    for (const char *cur = uc_alphabet; cur < uc_alphabet + sizeof(uc_alphabet); ++cur)
        std::cout << *cur << \t << (int)*cur << '\n';
return 0;
} 
```

此代码不假定字符表示是连续的（甚至按字母顺序递增），因此它适用于所有字符编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T18:42:44.150

```
int b = 97; // the corresponding decimal ascii code for 'a'
int a = 65; // the corresponding decimal ascii code for 'A'

for(int i = 0; i < 26; ++i)
    cout << char('A' + i) << '\t' << a << '\t' << char('a' + i) << '\t' << b << '\n'; //print out 'A' and add i, print out a, print out 'a' and add i, print out b
    ++a; //increment a by 1
    ++b; //increment b by 1 
```

# php - 如何重命名foreach循环中的键？

> ID：12375424
> 
> 赞同：1
> 
> 时间：2012-09-11T18:06:46.350
> 
> 标签：php, xml, foreach

我正在尝试从数据库调用生成 XML，而[我正在使用的实用程序类](http://www.lalit.org/lab/convert-php-array-to-xml-with-attributes/)引发错误`Illegal character in tag name. tag: 0`

我认为这是因为数组是 [0]、[1]、[2] 等。真的我应该将它们都设置为标准的东西，比如“资产”，因为它们都是资产，但我不能那样做因为那时键将是相同的，但也许 ID 会起作用。但我不知道如何更改我在 foreach 循环中使用的键。

我试过了：

```
foreach ($assets as &$key => &$asset) {
    $key2 = $asset->isci;
    $asset = get_object_vars($asset);
} 
```

但我无法传递 $key 的参考。

这是数组外观的简要表示：

```
array(2) {
  [0]=>
  array(25) {
    ["id"]=>
    string(2) "27"
  }
  [1]=>
  array(25) {
    ["id"]=>
    string(2) "25"
  }
  [2]=>
  array(25) {
    ["id"]=>
    string(1) "1"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:12:32.897

在循环遍历数组时修改数组的键通常是一个坏主意——即使语言支持它，调试起来也很混乱。

最简单的方法是在旧数组的基础上简单地构建一个新数组，但使用更好的键：

```
$rekeyed_assets = array();
foreach ($assets as $old_key => $asset)
{
    $new_key = $asset->isci;
    $asset = get_object_vars($asset);

    $rekeyed_assets[ $new_key ] = $asset;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:10:56.383

最方便的方法是更改​​所有键，然后使用`array_combine`修改后的键创建一个新数组。以下是使用`array_map`匿名函数批量执行此操作的方法：

```
$newKeys = array_map(function($asset) { return $asset->isci; }, $assets);
$assets = array_combine($newKeys, $assets); 
```

您也可以对值执行相同的操作：

```
$newKeys = array_map(function($asset) { return $asset->isci; }, $assets);
$newValues = array_map(function($asset) { return get_object_vars($asset); }, $assets);
$assets = array_combine($newKeys, $newValues); 
```

这种方法确实有一个缺点（增加内存使用），如果您的数组有数百万个项目，这可能是一个问题，但在这种情况下，很有可能重组程序会更好，这样它就不需要保留巨大的数组首先在记忆中。

# java - JDK 7 中的链接#registerBootstrapMethod

> ID：12375429
> 
> 赞同：3
> 
> 时间：2012-09-11T18:07:07.890
> 
> 标签：java, java-7, invokedynamic

在 JDK 7 的预览版中，有一组方法可以控制名为 Linkage 的类中的 invokedynamic 调用站点的链接。例如`registerBootstrapMethod`. 这些在 JDK 的最终版本中发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:42:54.500

invokedynamic 指令本身现在具有对 bootstrap 方法的引用

# r - 在R中创建一组长度递减的序列

> ID：12375431
> 
> 赞同：4
> 
> 时间：2012-09-11T18:07:26.757
> 
> 标签：r, sequence

我想制作一组从 x 到 20 的序列，其中 x = c(2:19)。本质上，我想要这个，但不必这样做：

```
a = seq(2, 20)
b = seq(3, 20)
...
q = seq(18, 20)
r = seq(19, 20)

> a
 [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
> b
 [1]  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
...
> q
[1] 18 19 20
> r
[1] 19 20` 
```

我已经尝试使用 for 循环，但我无法完成替换：

```
a = c(2:20)
b = numeric()
for (i in 1:19){
b = seq(a[i]:20)
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T18:11:33.520

```
sapply(2:19, seq, to = 20)

[[1]]
 [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[2]]
 [1]  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[3]]
 [1]  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[4]]
 [1]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[5]]
 [1]  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[6]]
 [1]  7  8  9 10 11 12 13 14 15 16 17 18 19 20

[[7]]
 [1]  8  9 10 11 12 13 14 15 16 17 18 19 20

[[8]]
 [1]  9 10 11 12 13 14 15 16 17 18 19 20

[[9]]
 [1] 10 11 12 13 14 15 16 17 18 19 20

[[10]]
 [1] 11 12 13 14 15 16 17 18 19 20

[[11]]
[1] 12 13 14 15 16 17 18 19 20

[[12]]
[1] 13 14 15 16 17 18 19 20

[[13]]
[1] 14 15 16 17 18 19 20

[[14]]
[1] 15 16 17 18 19 20

[[15]]
[1] 16 17 18 19 20

[[16]]
[1] 17 18 19 20

[[17]]
[1] 18 19 20

[[18]]
[1] 19 20 
```

如果要保存对象并为每个元素命名

```
res <- sapply(2:19, seq, to = 20)
names(res) <- letters[1:length(res)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:03:04.520

扩展 dickoa 的答案以将全局变量分配`a`给`r`（尽管我不明白为什么这比存储在列表中更可取）：

```
mapply(FUN=assign,x=letters[1:18],value=sapply(2:19, seq, to = 20),MoreArgs=list(envir=.GlobalEnv)) 
```

给出：

```
> a
 [1]  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
> b
 [1]  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
> q
[1] 18 19 20
> r
[1] 19 20 
```

# javascript - 用代码理解 JavaScript 中的响应式扩展

> ID：12375433
> 
> 赞同：0
> 
> 时间：2012-09-11T18:07:29.907
> 
> 标签：javascript, reactive-programming

我是**Reactive Extensions**和**JavaScript**的新手。有人可以帮我解开以下代码吗？它来自[Matthew Podwysocki 的 JavaScript 响应式扩展简介](http://codebetter.com/matthewpodwysocki/2010/02/16/introduction-to-the-reactive-extensions-to-javascript/)。

```
<html>
<head>
 <title>Learning ReactiveExtensions</title>
 <!--scripts-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="rx.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function() {
var mouseDragMe = $("#mouseDragMe").context;

var mouseMove = Rx.Observable.FromHtmlEvent(mouseDragMe, "mousemove");
var mouseUp = Rx.Observable.FromHtmlEvent(mouseDragMe, "mouseup");
var mouseDown = Rx.Observable.FromHtmlEvent(mouseDragMe, "mousedown");

    var mouseMoves = mouseMove
.Skip(1)
.Zip(mouseMove, function(left, right) {
    return { x1 : left.clientX,
             y1 : left.clientY,
             x2 : right.clientX,
             y2 : right.clientY };
});

    var mouseDrags = mouseDown.SelectMany(function(md) {
return mouseMoves.TakeUntil(mouseUp);

    mouseDrags.Subscribe(function(mouseEvents) {
$("#results").html(
    "Old (X: " + mouseEvents.x1 + " Y: " + mouseEvents.y1 + ") " +
    "New (X: " + mouseEvents.x2 + " Y: " + mouseEvents.y2 + ")");
});
});                     
});
</script>
</head>
<body>
<div id="mouseDragMe" style="border:solid 1px red;">
    i am a rx newbie
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:48:47.397

那里有这方面的描述。我建议[您观看有关编写您的第一个 Rx 应用程序的视频](http://channel9.msdn.com/Blogs/J.Van.Gogh/Writing-your-first-Rx-Application)。代码在 C# 中，但无论编程语言如何，概念都是完全相同的。

本质上你想了解三件事

1.  将一系列事件概念化为一个序列。就像数组是空间中的数据序列一样，事件可以被认为是时间（或运动）中的数据序列。
2.  运算符（即`Skip`、`Zip`和）`SelectMany``TakeUntil`
3.  订阅语义

在这种情况下，我们有 3 个源序列；`mouseMove`,`mouseUp`和`mouseDown`.

`mouseMove`每次移动鼠标时，该序列都会推送一个鼠标坐标值。例如，如果鼠标从屏幕的左上角开始并沿对角线向下移动，那么您可能会在序列上看到类似`{0,0}`, `{10,10}`,的值。`{20,10}`

`mouseUp`和发布的值`mouseDown`并不有趣，只是它们发布的时间点很有趣。

“拖动”的实际问题需要我们知道鼠标按钮何时被按下，鼠标按下时鼠标所在位置的增量，以及释放按钮时鼠标所在位置。我们可以获得这些位置的增量的方法是取最终位置的值并减去原始位置的值。更好的是，如果我们可以获得所有的中间 delta 值，以便我们可以为运动设置动画。如果我们采用上面的序列，为了获得运动的增量，我们希望拥有原始序列和偏移一个序列

```
Original { 0, 0}, {10,10}, {20,10}  
offby1   {10,10}, {20,10} 
```

这使我们能够计算增量以找出运动（不仅仅是位置）。

```
Original { 0, 0}, {10,10}, {20,10}
offby1   {10,10}, {20,10}
delta    {10,10}, {10, 0} 
```

我们可以使用 Rx 实现此目的的方法是首先使用`Skip(1)`跳过一个值。这创建了我们的`offby1`序列。接下来我们要成对组合值。该`Zip`函数为我们提供了这个（在[我的博客文章中更多关于将序列与 Zip 组合](http://introtorx.com/Content/v1.0.10621.0/12_CombiningSequences.html#Zip)）。

我们可以重写你上面的代码

```
var mouseMoves = mouseMove
.Skip(1)
.Zip(mouseMove, function(left, right) {
    return { x1 : left.clientX,
             y1 : left.clientY,
             x2 : right.clientX,
             y2 : right.clientY };
}); 
```

成为

```
var offby1 = mouseMove.Skip(1);
var mouseMoves = offby1.Zip(mouseMove, function(left, right) {
    return { x1 : left.clientX,
             y1 : left.clientY,
             x2 : right.clientX,
             y2 : right.clientY };
}); 
```

一旦我们有了对，我们需要应用 的简单数学`newValue-OldValue=delta`。这给了我们我们的增量序列，这实际上是我们的运动序列。

```
var offby1 = mouseMove.Skip(1);
var mouseMoves = offby1.Zip(mouseMove, function(current, last) {
    return { x : current.clientX-last.clientX,
             y : current.clientY-last.clientY };
}); 
```

现在我们只想在鼠标按下时获取值。为此，我们使用[SelectMany](http://introtorx.com/Content/v1.0.10621.0/08_Transformation.html#SelectMany)运算符。这表示*对于来自源的每个值，从该源获取 0 个或多个值*。在我们的例子中，每次`mouseDown`发生事件时，我们都希望获得所有的 delta 事件（如`mouseMoves`）。

```
var mouseDrags = mouseDown.SelectMany(function(md) { return mouseMoves;}); 
```

However we only want to keep receiving them until a corresponding `mouseUp` event happens. To do this we `TakeUntil` the `mouseUp` event produces a value.

```
var mouseDrags = mouseDown.SelectMany(function(md) {
  return mouseMoves.TakeUntil(mouseUp);
}); 
```

Now that we have all this plumbing done, we usually apply those movements to the Position/Margin/offset of a UI element. It appears in the example, we just print the value though.

# java - java.sql.SQLException：单点登录仅在 Windows 上受支持。请指定用户名

> ID：12375437
> 
> 赞同：0
> 
> 时间：2012-09-11T18:07:45.610
> 
> 标签：java, android, sql-server, single-sign-on, jtds

我正在使用[jTDS](http://jtds.sourceforge.net/index.html)驱动程序从我的 Android 应用程序连接到 SQL Server 数据库，该应用程序使用 Windows 身份验证。按照[常见问题解答](http://jtds.sourceforge.net/faq.html#windowsAuth)中的建议，我阅读了[READMESSO](http://jtds.svn.sourceforge.net/viewvc/jtds/branches/jTDS%201.2%20%28stable%29/README.SSO?revision=1120&view=markup)文件，并按照说明将本机 SPPI 库 (ntlmauth.dll) 放置在系统路径中（由 PATH 系统变量定义）

![在此处输入图像描述](../Images/b0511295603c55ca9419d82f8ae421ae.png)

但是，当我尝试使用以下代码连接到数据库时：

```
String driver = "net.sourceforge.jtds.jdbc.Driver";
Class.forName(driver).newInstance();
String connString = "jdbc:jtds:sqlserver://192.168.56.1/MyMovies;";
Conncection conn = DriverManager.getConnection(connString); 
```

我得到以下异常：

```
java.sql.SQLException: Single-Sign-On is only supported on Windows. Please specify a user name. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:20:57.670

由于您是从 Android 设备连接的，因此您将无法获得驱动程序连接到 SQL 服务器所需的 SSO 凭据。您提到的设置仅在尝试连接到数据库的 java 程序位于 Windows 机器上时才有效，错误消息清楚地提到了这一点。

除非您的应用程序具有基于连接到数据库的 SSO 用户的授权，否则您应该有一个基于 SQL Server 用户的身份验证机制来连接到服务器，并且所有授权过程都应该与该用户相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:15:29.883

您可能还必须提供用户名。

`"jdbc:jtds:sqlserver://192.168.56.1/MyMovies;instance=SQLEXPRESS;user=foo"`

# asp.net - Ajax 更新面板导致整个页面加载

> ID：12375438
> 
> 赞同：0
> 
> 时间：2012-09-11T18:07:47.640
> 
> 标签：asp.net, ajax, vb.net, updatepanel

我正在使用 VB.Net，问题是无论我如何尝试，我的更新面板都会导致整个页面加载。当我从网站下载示例代码并运行时，它可以工作！！！即使我将这些示例中的全部代码复制到我新创建的网络表单中并运行，它仍然会刷新整个页面！可能是什么问题呢？PS。我已经在我的 web.config 中尝试过，但并没有什么不同！:(

**WebForm1.aspx**

```
 <%@ Page Language="vb" AutoEventWireup="false" CodeBehind="WebForm1.aspx.vb" Inherits="WebApplication1.WebForm1" %>

<%@ Register Assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    Namespace="System.Web.UI" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>How to use UpdatePanel</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true" />

        <asp:Label ID="lblTime1" runat="server" /><br />
        <asp:Button ID="butTime1" runat="server" Text="Refresh Panel" /><br /><br />

        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="butTime1" EventName="Click" />
                <asp:PostBackTrigger ControlID="butTime2" />
            </Triggers>

            <ContentTemplate>
                <asp:Label ID="lblTime2" runat="server" /><br />
                <asp:Button ID="butTime2" runat="server" Text="Refresh Page" /><br />
            </ContentTemplate>
        </asp:UpdatePanel>
        <br />

        <asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="DropDownList1" EventName="SelectedIndexChanged" />
            </Triggers>

            <ContentTemplate>
                <asp:Label ID="lblTime3" runat="server" /><br />
            </ContentTemplate>
        </asp:UpdatePanel>

        <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="true">
            <asp:ListItem>Change</asp:ListItem>
            <asp:ListItem>My</asp:ListItem>
            <asp:ListItem>Value</asp:ListItem>
        </asp:DropDownList>
    </form>
</body>
</html> 
```

**WebForm1.aspx.vb**

```
 Public Partial Class WebForm1
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        lblTime1.Text = DateTime.Now.ToString("T")
        lblTime2.Text = DateTime.Now.ToString("T")
        lblTime3.Text = DateTime.Now.ToString("T")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-10-29T16:24:51.740

如果您有一个从 .net framework v1.1 升级的旧项目，请从您的 Web 配置中删除此行以使其正常工作：

```
<xhtmlConformance mode="Legacy"/> 
```

谷歌了解删除上述内容的影响，但请记住现在是 2018 年，这不再是一个真正的问题，而且我一定是唯一一个不幸的人仍然在 2003 年开始编写代码:(

# javascript - 滚动在 Chrome 中有效，但在 Firefox 或 IE 中无效

> ID：12375440
> 
> 赞同：1
> 
> 时间：2012-09-11T18:07:59.463
> 
> 标签：javascript, cross-browser

当用户单击几个不同的链接时，我使用以下代码滚动窗口：

```
$(document).ready(function(){
$("#footerlink").click(function(){
    $("#slide1").slideto({});
});
$("#logo").click(function(){
    $("#slide1").slideto({});
});
$("#home").click(function(){
    $("#slide1").slideto({});
})      
$("#others").click(function(){
    $("#slide2").slideto({});
})
$("#me").click(function(){
    $("#slide3").slideto({});
});
$("#laughs").click(function(){
    $("#slide4").slideto({});
});
}) 
```

幻灯片功能来自此脚本：

```
(function(b) {
b.fn.slideto = function(a) {
    a = b.extend({
        slide_duration: 1000,
        highlight_duration: 3E3,
        highlight: false,
        highlight_color: "#FFFF99"
    }, a);
    return this.each(function() {
        obj = b(this);
        b("body").animate({
            scrollTop: obj.offset().top
        }, a.slide_duration, function() {
            a.highlight && b.ui.version && obj.effect("highlight", {
                color: a.highlight_color
            }, a.highlight_duration)
        })
    })
}
})(jQuery); 
```

我的问题是滚动只适用于 Chrome 而不是 Firefox 或 IE。FF 和 IE 降级很好，所以链接仍然有效，但我真的很喜欢滚动动画。

仅供参考：我用这两行调用 Jquery：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

这是我的代码的小提琴：http: [//jsfiddle.net/LwXR3/](http://jsfiddle.net/LwXR3/)

你能帮我找出我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:37:09.413

好的，这太长了，无法发表评论。你真的应该避免上面代码中的复制粘贴混乱。减去 id 后的代码几乎完全相同。使用 href 来获取位置，而不是对其进行硬编码。

**HTML**

```
<a class="slideLinks" href="#foo">go to foo</a> 
```

**JavaScript**

```
$(".slideLinks").on("click", function(e){ 
    e.preventDefault(); //p[revent the click
    $(this.hash).slideto({}); //call your slide to function with the hash value for the id
}); 
```

# jdbc - 通过 JDBC 从 Oracle 列读取 BLOB 时 InputStream 读取被阻止

> ID：12375441
> 
> 赞同：2
> 
> 时间：2012-09-11T18:08:00.883
> 
> 标签：jdbc, oracle10g, blob, java-6

在尝试从像下面的代码那样从 BLOB 获得的 InputStream 中读取时，InputStream 进入无限期等待状态。

我从运行在 Jboss 应用服务器上的 Web 应用程序设置这些数据，并且读/写工作非常好，问题是在使用普通 JDBC 运行独立的 Java 代码时。

环境是JDK6，Oracle 10g。

```
 ResultSet rs = this.stmt.executeQuery();
    log.println("ResultSetType: " + (rs != null ? rs.getClass() : null));
    while (rs != null && rs.next()) {
            . . . // read other columns
            Blob savedBlob = rs.getBlob("PERSISTENCE_BLOB");

            long len = savedBlob.length();
            log.println("Going to read bytes..." + len);
            InputStream is  = savedBlob.getBinaryStream();
            log.println("IS Received...");
            log.println("Available : " + is.available());
            ObjectInputStream oip = new ObjectInputStream(is);
            Object obj = oip.readObject();
            oip.close();
            is.close();

            savedBlob.free();
. . . 
```

输出如下...

```
ResultSetType: class oracle.jdbc.driver.OracleResultSetImpl
RowID: XXXXXXXXXXXXXXX  // Row is selected and printed properly
Going to read bytes...6022
IS Received...
Available : 0 
```

但是，如果我尝试在卡盘中读取如下内容.. 它可以正常工作，因为我正在读取序列化对象并希望从 InputStream 打开 ObjectInputStream。

```
. . .    
ResultSet rs = this.stmt.executeQuery();
log.println("ResultSetType: " + (rs != null ? rs.getClass() : null));
while (rs != null && rs.next()) {
   . . .    
   Blob savedBlob = rs.getBlob("PERSISTENCE_BLOB");
   long len = savedBlob.length();
   int start = 1;
   int totalBytesRead = 0;
   int buffSize = 2048;
   byte[] byteBuff = null;

   log.println("Going to read bytes..." + len);
   do {
      byteBuff = new byte[buffSize];
      byteBuff = savedBlob.getBytes(start, buffSize);
      totalBytesRead += buffSize;
      log.println(start + "," + buffSize + " #BLOB bytes: " + new String(byteBuff));
      start += buffSize;

       . . . 

   } while (. . . );
 log.println("Total Bytes: " + totalBytesRead); 
```

输出：

```
ResultSetType: class oracle.jdbc.driver.OracleResultSetImpl
Going to read bytes...6022
1,2048 #BLOB bytes: //......bytes data..........
.....
Total Bytes: 6022 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:34:49.390

[`InputStream.available()`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#available%28%29)并不表示您可以读取多少，它表示它可以返回给您多少（例如从缓冲区），而不会进入 - 潜在的 - 阻塞读取操作。

Javadoc 还指出：

> 请注意，虽然 InputStream 的某些实现会返回流中的字节总数，但许多不会。使用此方法的返回值来分配旨在保存此流中所有数据的缓冲区是不正确的。

和

> InputStream 类的可用方法总是返回 0。

因此，不要`available()`用作任何指示，只需阅读它（这显然可以按照您的其他代码所示工作）。

# nhibernate - Umbraco 和 Courier 在新设置的站点上出现“找不到数据库持久性”错误

> ID：12375444
> 
> 赞同：0
> 
> 时间：2012-09-11T18:08:23.407
> 
> 标签：nhibernate, persistence, umbraco, stack-trace

我也将发布我的答案，但我昨晚在谷歌搜索时找不到这个，所以认为值得在这里列出，让其他人在晚上 9 点拉出头发。

我创建了一个已经存在于其他地方的站点的新[Umbraco](http://www.umbraco.org)实例（我需要为安全测试制作快照，同时继续进行错误修复）。为此，我执行了以下操作：

1.  停止目标网络服务器。
2.  复制了整个webroot，包括`umbraco`文件夹，一个*空* `App_Data`的以及所有的资产，宏，模板等等。（为此，我实际上制作了一个 webroot 的 zip 文件并将其重新膨胀到目标 web 服务器上，但更标准的[xcopy 部署](http://en.wikipedia.org/wiki/XCOPY_deployment)将具有相同的效果。）
3.  备份数据库（其中两个，在我的情况下，但只有一个是 Umbraco 的）并将其还原到目标数据服务器上的新数据库
4.  重新启动目标网络服务器。

通常情况下，我的下一步是告诉 Umbraco 重新发布该站点，清除所有缓存，但是在尝试访问时`http://mydomain.com/umbraco/`，我得到一个[黄屏死机](http://ysod.urbanup.com/4923537)错误读数：

> 找不到数据库持久性，请确保您的 /bin 中有有效的连接字符串和 Umbraco.Courier.Persistence.* dll

和[堆栈](http://en.wikipedia.org/wiki/Stack_trace)跟踪

```
Umbraco.Courier.Core.PersistenceManager.GetPersistenceProvider(Guid id) +294
Umbraco.Courier.ItemProviders.DocumentTypeItemProvider.HandlePack(ItemIdentifier id) in c:\Program Files (x86)\teamcity\buildAgent\work\872c402d3442319c\Core\Umbraco.Courier.Providers\ItemProviders\DocumentTypeItemProvider.cs:140
Umbraco.Courier.Core.ItemProvider.Package(ItemIdentifier id) +88
Umbraco.Courier.RepositoryProviders.Local.Package(ItemIdentifier itemId) in c:\Program Files (x86)\teamcity\buildAgent\work\872c402d3442319c\Contrib\Providers\Umbraco.Courier.RepositoryProviders\Local\Local.cs:227
Umbraco.Courier.Cachehandler.V4.CacheHandler._sendToCache(ItemIdentifier itemId) in c:\Program Files (x86)\teamcity\buildAgent\work\872c402d3442319c\Contrib\Providers\Umbraco.Courier.CacheHandler.V4\Cachehandlers\CacheHandler.cs:211
Umbraco.Courier.Cachehandler.V4.CacheHandler.DocumentType_AfterSave(DocumentType sender, SaveEventArgs e) in c:\Program Files (x86)\teamcity\buildAgent\work\872c402d3442319c\Contrib\Providers\Umbraco.Courier.CacheHandler.V4\Cachehandlers\CacheHandler.cs:133
Vega.USiteBuilder.DocumentTypeManager.SynchronizeDocumentType(Type typeDocType, Type baseTypeDocType) +574
Vega.USiteBuilder.DocumentTypeManager.SynchronizeDocumentTypes(Type baseTypeDocType) +146
Vega.USiteBuilder.DocumentTypeManager.Synchronize() +56
Vega.USiteBuilder.UmbracoManager.Synchronize() +120
Vega.USiteBuilder.UmbracoManager.SynchronizeIfNotSynchronized() +85
System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270 
```

现在我知道`Umbraco.Courier.Persistence.*`DLL 都存在了——尤其是因为我只是从工作环境中复制了它们。

那么给了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:05:44.527

我必须同意该解决方案并不总是有效。我们在尝试使用最新的 Umbraco 4.11.1 构建部署 Courier（构建 26）时遇到相同的“数据库持久性”错误，并且从 umbraco Courier 仪表板单击“部署”会带来相同的错误。回收该站点的应用程序池没有帮助。

也作为 umbraco.org 的帮助票张贴，如果我得到解决方案将张贴在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:08:23.407

上周在这件事上浪费了很多时间，我突然想到要在下次发生时实际记录下如何解决它。

所需要的只是回收相关的应用程序池。如果您不确定如何操作，请查看以下链接之一：

*   Hosting.com：[回收 IIS6 和 IIS7 中的应用程序池](http://www.hosting.com/support/iis6/recycle-application-pools-in-iis6--iis7)
*   TechNet 在[按需回收应用程序池 (IIS 7)](http://technet.microsoft.com/en-gb/library/cc770764(v=ws.10).aspx) — TechNet 上的 IIS6 指令*真的*很烂
*   StackOverflow：[用于回收 IIS6 应用程序池的 PowerShell 脚本](https://stackoverflow.com/a/5824109/205245)
*   StackOverflow：[如何使用`adsutil`回收 IIS6 应用程序池](https://stackoverflow.com/a/11016243/205245)

我希望这可以使其他人免于前一天晚上下班后我感觉良好的挫败感。

# oop - 聚合涉及依赖？

> ID：12375455
> 
> 赞同：2
> 
> 时间：2012-09-11T18:09:08.387
> 
> 标签：oop, uml

我正在为一个项目做 UML 图，但我有疑问......我用一个例子来解释：

```
public class Book{...}

public class Library{
    private ArrayList<Book> books;

    public void insert(Book b){...}

    public Book get(Book b){...}
    } 
```

在这种情况下，书和图书馆之间存在聚合但也存在依赖关系，对吗？聚合是“父”类包含“子”类的关系，而依赖是类通过参数或返回类型使用另一个类的情况。现在，如果一个类A包含另一个类B的对象意味着B的对象已经以某种方式传递给类A的对象，唯一的方法是使用方法（或构造函数），那么聚合涉及依赖？

PS：对不起我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T07:22:05.610

恕我直言，我不同意你的教授。您的图表中确实有聚合，因为`Library`包含`Books`（在语义和句法上）。

UML 依赖关系意味着“某些 UML 元素或一组元素需要、需要或依赖于规范或实现的其他模型元素”（来自我最喜欢的 UML 参考站点：[uml-diagrams.org](http://www.uml-diagrams.org/dependency.html?cid=26)）。当您在两个元素之间放置一个聚合链接时，已经说明一个依赖于另一个，因此在它们之间添加依赖关系是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:25:28.407

我不是 UML 专家，但在[“UML in a Nutshell”](http://www.amazon.co.uk/UML-2-0-Nutshell-Desktop-Reference/dp/0596007957)中我真正喜欢的一件事是，UML 只有在对每个人都直观时才有用。

话虽如此，我建议不要使您的图表过于复杂。并非所有内容都可以也不必在图表中呈现。在您的情况下，`Library`有一些`Books`，聚合/组合的情况（取决于您的描述中未提及的其他细节）。您不必声明这两个类之间的依赖关系，因为聚合暗示了它。在我的理解中，当您想要陈述间接关系时，“依赖关系”很有用，例如运行时依赖关系。

# mongodb - MongoDB：修改服务器上的每个文档

> ID：12375458
> 
> 赞同：0
> 
> 时间：2012-09-11T18:09:22.583
> 
> 标签：mongodb

给定大量（数百万+）文档集合，类似于：

```
{ _id : ObjectId, "a" : 3, "b" : 5 } 
```

直接在服务器上处理这些文档并将结果添加到同一集合中的每个文档的最有效方法是什么？例如，添加一个`c`值等于的键`a+b`。

```
{ _id : ObjectId, "a" : 3, "b" : 5, "c" : 8 } 
```

我更喜欢在外壳中执行此操作。

似乎这`find().forEach()`会浪费时间在 db 和 shell 之间传输，并且`mapReduce()`似乎打算将对象组处理成聚合数据（尽管我可能会误解）。

**编辑：**我更喜欢不阻塞的解决方案，如果有一个（除了在客户端上使用光标）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:53:54.953

来自[db.eval() 上的 MongoDB 文档](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Using%7B%7Bdb.eval%28%29%7D%7D)：

“db.eval() 用于评估数据库服务器上的函数（用 JavaScript 编写）。如果您需要轻而易举地接触大量数据，这很有用。在这种情况下，数据的网络传输可能会成为瓶颈。 "

该文档有一个如何使用它的示例，该示例与您尝试执行的操作非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:16:16.440

`forEach`是您的最佳选择。我会在服务器上（从外壳）运行它以减少延迟。

# javascript - 具有相对位置的 html 表格应该在水平滚动条上可见

> ID：12375459
> 
> 赞同：0
> 
> 时间：2012-09-11T18:09:37.547
> 
> 标签：javascript, html, css

我有像这样的html结构：

```
<table>
    <tr>
        <td colspan="11">                        
            <table style="vertical-align: middle; width=100%;" id="myInnerTable">
                <tr>
                    <td align="right">
                        Some controls
                    </td>
                </tr>
            </table>
        </td>
    </tr>
<tr id=”myOuterTableTR”&gt;
...more <tr> tags
</table> 
```

当没有水平滚动条时，“某些控件”按预期向右对齐并且可见。但是当有水平滚动条时，“某些控件”会转到最右侧并且它们不可见，用户必须滚动到最右侧才能看到它们。

即使有水平滚动条，我也希望它们在屏幕上可见，并且不必向右滚动即可看到它们。

我试图给“myInnerTable”表格固定位置，但在这种情况下，页面布局会受到干扰，就像下一个 tr 标签中的控件`myOuterTableTR`与控件重叠一样`myInnerTable`。所以我认为我只需要`myInnerTable`相对位置。

我想我需要编写一些 JavaScript 并检查是否有任何水平滚动条，然后向 myInnerTable 添加一些右边距/空格，这样它就可以在不滚动的情况下可见。

另外，我没有使用 JScript。

# scala - 是否可以在 sbt 插件中编译文件？

> ID：12375462
> 
> 赞同：2
> 
> 时间：2012-09-11T18:09:50.573
> 
> 标签：scala, sbt

我有一个 sbt 插件，它需要从源文件中获取编译器 AST。我尝试使用以下代码创建一个新的编译器：

```
val settings = new Settings
settings.usejavacp.value = true
val compiler = new tools.nsc.interactive.Global(settings, new StoreReporter()) 
```

但我收到以下错误：

```
java.lang.Error: typeConstructor inapplicable for <none> 
```

似乎它与 sbt 的内部编译器发生了冲突。

那么，有没有办法从 sbt 中获取这些文件的 AST？

或者也许可以直接从 sbt 的编译器中获取它们？（那会更好，因为我不需要每次都重新编译所有内容）

编辑：

似乎使用 tools.nsc.Global 而不是“交互式”不会引发错误，但我不知道如何从中获取 AST。

编辑：

好吧，`tools.nsc.Global`当我尝试编译一些文件时失败并出现同样的错误:(

SBT [FAQ](https://github.com/harrah/xsbt/wiki/FAQ)指出我应该在初始化我的编译器时使用一些“代表性类型” - `settings.embeddedDefaults[MyType]`. 但我无法确切地知道我应该发送给它什么。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T19:45:36.410

这一行意味着使用`java.class.path`系统属性的值作为编译器的类路径：

```
settings.usejavacp.value = true 
```

在 sbt 中，这只会包含启动器 jar，因为这是初始化 jvm 时类路径上的全部内容。启动器 jar 已使用 ProGuard 处理，因此它包含不完整的 Scala 类，并且永远不应位于编译器类路径中。

相反，根据您的需要显式设置类路径：

```
settings.classpath.value = "some;classpath" 
```

# performance - 为什么这个 OpenGL 3 顶点着色器非常慢？

> ID：12375463
> 
> 赞同：3
> 
> 时间：2012-09-11T18:09:52.107
> 
> 标签：performance, opengl, glsl, shader

我有以下顶点着色器：

```
#version 150

in vec4 position;
in vec2 texture;
in int layer;

out vec2 pass_texture;
out float pass_layer;

uniform mat4 _modelToClipMatrix;
uniform float layerDepth[255];

void main (void)
{
    gl_Position = _modelToClipMatrix*vec4(position.xy,layerDepth[layer]/255,position.w);
    // gl_Position = _modelToClipMatrix*position;
    pass_layer = float(layer);
    pass_texture = texture;
} 
```

当我按照这里的方式使用它时，我的帧速率约为 7 FPS。如果我使用第二行（已注释掉）而不是第一行，我的帧速率会跳到大约 50 FPS。似乎数组查找是这里的大问题。为什么速度这么慢？以及如何在保持功能的同时提高性能？

我的硬件是 ATI Radeon HD 4670 256 MB（iMac 2010 型号）。

我的顶点结构如下所示：

```
typedef struct
{
    floatVector2 position; //2*4=8
    uByteVector2 textureCoordinate; //2*1=2
    GLubyte layer; //1
} PCBVertex; 
```

我通过以下方式设置缓冲区：

```
glVertexAttribPointer((GLuint)positionAttribute, 2, GL_FLOAT, GL_FALSE, sizeof(PCBVertex), (const GLvoid *)offsetof(PCBVertex, position));
glVertexAttribPointer((GLuint)textureAttribute, 2, GL_UNSIGNED_BYTE, GL_FALSE, sizeof(PCBVertex), (const GLvoid *)offsetof(PCBVertex, textureCoordinate));
glVertexAttribIPointer(layerAttribute, 1, GL_UNSIGNED_BYTE, sizeof(PCBVertex), (const GLvoid *)offsetof(PCBVertex, layer)); 
```

*一些背景信息：* 我正在制作一个绘图包。用户可以在多个图层上绘制。一层是活动的，它被绘制在最前面。他还可以“翻转”图层，就好像从另一边看一样。我认为当层顺序发生变化时更新所有顶点会效率低下，所以我给每个顶点一个层号并在制服中查找它的当前位置（我只发送 x 和 y 作为位置数据）。另外，作为旁注：片段着色器使用相同的层号来确定颜色，也使用统一的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:16:04.330

If you remove the line

```
gl_Position = _modelToClipMatrix*vec4(position.xy,layerDepth[layer]/255,position.w); 
```

from your shader the uniform `float layerDepth[255];` will become unused. That means the compiler will optimize it away.

Further more, the `layerAttribute` location will become -1, preventing any data transfers for this attrib pointer.

# java - SWT - MessageBox 打开和关闭

> ID：12375469
> 
> 赞同：1
> 
> 时间：2012-09-11T18:10:14.183
> 
> 标签：java, swt, jface

是否可以在用户无需单击按钮的情况下打开和关闭消息对话框？

当用户单击我的表单上的按钮时，该按钮的操作会转到服务器端并收集项目列表，这需要几秒钟。我想要一种方法来告诉用户该操作正在进行中。我在想一个带有一些文本的消息对话框。.

打开消息

```
MessageDialog.openInformation(shell, "Information", "Getting List From Server"); 
```

然后一些如何关闭它（类似`MessageDialog.close`）？

我查看了一个进度条，但这比我真正需要的要多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:16:02.030

一开始它可能看起来像一个很大的开销，但我建议使用[`IProgressMonitor`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIProgressMonitor.html)显示任务进度的 an 。

当他/她看到一个进度条时，用户会知道发生了什么，而不是一个看起来像 gui 被冻结的对话框。

[这](http://www.eclipse.org/articles/Article-Progress-Monitors/article.html)是 Eclipse 关于如何正确使用进度监视器的文章。

如果您真的想实现您的想法（我不建议这样做），您可以尝试以下方法：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    BazMessageDialog dialog = new BazMessageDialog(shell, "Information", null, "Getting List From Server", MessageDialog.INFORMATION, new String[]{"OK", "Cancel"}, 0);
    dialog.open();

    /* Do your stuff */

    dialog.reallyClose();

    shell.dispose();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

public static class BazMessageDialog extends MessageDialog
{

    public BazMessageDialog(Shell parentShell, String dialogTitle,
            Image dialogTitleImage, String dialogMessage,
            int dialogImageType, String[] dialogButtonLabels,
            int defaultIndex) {
        super(parentShell, dialogTitle, dialogTitleImage, dialogMessage,
                dialogImageType, dialogButtonLabels, defaultIndex);
        setBlockOnOpen(false);
    }

    public void reallyClose()
    {
        cancelPressed();
    }

} 
```

但是，这不会阻止您剩余的 gui，因此用户将能够同时使用它。

**编辑**：

刚刚发现，[Opal](http://code.google.com/a/eclipselabs.org/p/opal/)有一个叫做[InfiniteProgressPanel](http://code.google.com/a/eclipselabs.org/p/opal/wiki/InfiniteProgressPanel)的东西，它可能适合你。看一看...

# css - 如何使图像在多个浏览器中始终与文本垂直对齐？

> ID：12375471
> 
> 赞同：0
> 
> 时间：2012-09-11T18:10:14.777
> 
> 标签：css, vertical-alignment, html

我正在尝试在我的网站上创建一个“回复”按钮，该按钮旁边将有一个下拉框，用于指定其他选项。有点像这样：[回复][v]

我可以创建“回复”按钮，但我在使用附加选项按钮时遇到问题：我似乎无法始终如一地获得我想要使用的图像以多个浏览器为中心。例如，Firefox 将图像向下移动，而 chrome 将图像向上移动。（我在下图中添加了红线以显示间距不一致）

[链接](http://home.comcast.net/~ano316gamer/ffcompp.PNG)以显示问题：

有谁知道我怎样才能让这个图像在跨度内正确垂直居中（水平它工作正常！），或者对如何制作我的按钮有其他建议？同样重要的是，“箭头”按钮与“回复”按钮（至少它们的外边框）具有相同的高度，因为我尝试过的一些解决方案导致它“中断”。我还想将箭头按钮图像保留为元素“背景”属性的一部分，以便可以从包含多个图像的 png 中选择它。（出于效率原因，因此网站上的所有图标只加载了一张图像）

我知道我对这个像素偏斜很挑剔，但问题似乎变得更糟，具体取决于我使用的行高，并且确实导致它看起来很糟。任何帮助将不胜感激。谢谢！！

```
<div>
    <a href="#" class="link1"><span class="text">Reply</span></a><a href="#" class="link2"><span class="options"></span></a>
</div>

.link1{
    display: inline-block;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    border: 1px solid black;
    color: black;
    text-decoration: none;
    font-size: 12px;
    line-height: 20px;
}

.link2{
    display: inline-block;
    margin: 0px 0px 0px 0px;
    padding: 0px 0px 0px 0px;
    border: 1px solid black;
    border-left: none;
    color: black;
    text-decoration: none;
    font-size: 12px;
    line-height: 20px;
}

.text{
    margin: 0px 5px 0px 5px;
    padding: 0px 0px 0px 0px;
    font-size: 12px;
}

.options{
    margin: 0px 0px 0px 0px;
    padding: 0px 5px 0px 12px;
    background-image: url("arrow.png");
    background-position: 2px 3px;
    background-repeat: no-repeat;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:37:51.970

您可以使用各种可用方法为不同的浏览器使用不同的样式/样式表，也可以设置一个高度，然后使用`position: absolute`. 我发现大多数时候，`position: absolute;`在许多浏览器中修复问题都做得很好。例如

```
position: absolute;
top: 10px;
left: 100px; 
```

这会将图像向下移动 10 像素，向右移动 100 像素（相对于不是最近的父**元素** `position: fixed;`

# ruby-on-rails - Rails 3.2.3 中的异常图像行为

> ID：12375472
> 
> 赞同：0
> 
> 时间：2012-09-11T18:10:18.777
> 
> 标签：ruby-on-rails, image, asset-pipeline, pipeline, assets

我是 RoR 的新手，在没有安装 sprockets gem 的 Rails 3.2.3 应用程序中，我使用“image_tag”来显示“public/images”中存在的“example.png”，如下所示：

```
<%= image_tag "example.png" %> 
```

它可以工作，但是，到目前为止*，在同一目录中*显示任何其他图像的所有尝试都失败了。例如，

```
<%= image_tag "embassy.png" %> 
```

...失败，即使文件存在。就像应用程序只会显示“example.png”而同一目录中没有其他图像。所有文件的权限都相同。资产管道按以下方式启用，

```
config.assets.enabled = true 
```

...在“配置/应用程序.rb”中。我已经从 API 到随机文章中挖掘了一些资源，但没有什么能帮助我理解这种奇怪的行为。谁能解释一下，

1) Rail 为何以及何时表现出这样的行为？

和/或

2）如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:16:00.987

尝试使用`app/assets`存储图像的目录，它们将`public/assets`在需要时复制到。可以从那里加载图像。

另请参阅[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)以获取更多信息。

# c++ - 将旧的 C++ 代码从 Solaris 移植到 Linux

> ID：12375476
> 
> 赞同：3
> 
> 时间：2012-09-11T18:10:31.967
> 
> 标签：c++, linux, static, solaris

我只是想知道 C++ 中是否允许这种类型的声明

```
 static nextUnassignedTableID = 0; 
  static nextUnassignedFieldID = TSFID_MINIMUM_USER_TSFID; 
```

它不会抱怨 Solaris/AIX 上的任何问题。

但是，在 Red Hat Enterprise Linux 上，它抱怨

```
 TSIDConverter.cpp(637): error #303: explicit type is missing ("int" assumed)
 static nextUnassignedTableID = 0; 

 TSIDConverter.cpp(638): error #303: explicit type is missing ("int" assumed)
 static nextUnassignedFieldID = TSFID_MINIMUM_USER_TSFID; 
```

在 Linux 上，我使用带有命令 icpc -m32 的 Intel 11.1 编译器。

我应该包含其他库以便编译器，还是不再允许这种声明风格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:13:33.683

它几乎从未被允许。第一个 C++ 标准不允许 C“隐式 int”规则；C99 也摆脱了这条规则。但是规则很简单，修复代码也很简单：只要坚持`int`编译器抱怨的地方。乏味，也许，但直截了当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:12:30.330

`Default int`在 C++ 中是不允许的，您需要修复此代码并`int`为变量设置显式类型。

# python - Matplotlib - 为什么条形图线颜色是黑色的？

> ID：12375478
> 
> 赞同：5
> 
> 时间：2012-09-11T18:10:42.290
> 
> 标签：python, colors, matplotlib, bar-chart

我正在使用 Matplotlib 绘制浮点数列表。如果我的列表有 100 个浮点数，那么图表会显示正确的颜色。但如果列表长度为 785 个浮点数，则它仅显示黑色。这是代码。

```
import numpy as np
import matplotlib.pyplot as plt
import Image

Consensus = []
Prediction = []
Final = []
for line in open('1.out').readlines():
    words = line.split()
    Consensus.append(float(words[10]))
    Prediction.append(int(words[11]))

for i,j in zip(Consensus,Prediction):
    Final.append(i*j)

max_score = 3
length = 785
ind = np.arange(length)    # the x locations for the groups
width = 1       # the width of the bars: can also be len(x) sequence

p1 = plt.bar(ind, Consensus, width, color='red')
p2 = plt.bar(ind, Final, width, color='blue')

plt.ylabel('Scores')
plt.title('Scores by group and gender')
plt.xticks(np.arange(0,length,50))
plt.yticks(np.arange(0,max_score,0.2))
plt.savefig('testplot.png')
Image.open('testplot.png').save('testplot.jpg','JPEG') 
```

这是列表长度为 785 时的程序图片。 ![这是列表长度为 785 时的程序图片。](../Images/7054de1b301e76e70d74508a6373d257.png)

这是列表长度为 99 的时候。 ![这是列表长度为 99 的时候。](../Images/a35977ca750177950414f7827cdb5cda.png)

该文件可在此处获得 - [http://pastebin.com/HhPhgPDG](http://pastebin.com/HhPhgPDG)

您可以更改仅复制此文件的前 100 行以检查其他情况。您应该将长度变量更改为文件中的行数。

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-11T18:13:06.557

你的酒吧的边界是黑色的。有可能当你有这么多条时，它们会变得很窄并且边界会混合在一起，所以你只能看到边界而不是彩色的内部。尝试放大图表以查看颜色是否存在。您还可以传递一个`edgecolor='none'`参数`bar`来删除边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:21:07.187

您的条形变得如此密集，以至于只有边界可见。因为它们是黑色的，所以你看到的主要是黑色。解决此问题的两种可能方法：

a) 增加条的宽度

b）删除你的酒吧的边界

# ruby - 检查实例方法

> ID：12375479
> 
> 赞同：1
> 
> 时间：2012-09-11T18:10:45.667
> 
> 标签：ruby, ruby-1.9.3

是否有一个类方法来检查该类是否有某个实例方法？类似的东西`respond_to?`是一个类方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:22:35.783

是的，您可以使用

```
 method_defined? 
```

，这是检查特定类是否定义了实例方法的类方法。以下链接将为您解释更多

[给定一个类，查看实例是否有方法（Ruby）](https://stackoverflow.com/questions/3303347/given-a-class-see-if-instance-has-method-ruby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:23:26.580

使用方法定义？上课

例如：Array.method_defined？：种类

# saml - 向 ADFS 2.0 发送被动联合请求以获取 SAML 2.0 令牌

> ID：12375485
> 
> 赞同：0
> 
> 时间：2012-09-11T18:10:57.747
> 
> 标签：saml, adfs2.0

我有一台工作的 ADFS 机器。我想构建一个将生成 saml 2.0 令牌的被动请求。

对 saml 2.0 令牌的以下请求：

[https://adfstest.cld.sr/adfs/ls/?wa=wsignin1.0&wtrealm=https%3A%2F%2Flocalhost%2FPro%2FFederatedLogin.mvc&wauth=urn:oasis:names:tc](https://adfstest.cld.sr/adfs/ls/?wa=wsignin1.0&wtrealm=https%3A%2F%2Flocalhost%2FPro%2FFederatedLogin.mvc&wauth=urn:oasis:names:tc) : **SAML:2.0** :am:password

生成错误：“Microsoft.IdentityServer.Protocols.Saml.NoAuthenticationContextException：MSIS7040：服务器不支持任何请求的身份验证类型。”

但是，如果我将请求更改为对 saml 1.0 的请求：

[https://adfstest.cld.sr/adfs/ls/?wa=wsignin1.0&wtrealm=https%3A%2F%2Flocalhost%2FPro%2FFederatedLogin.mvc&wauth=urn:oasis:names:tc](https://adfstest.cld.sr/adfs/ls/?wa=wsignin1.0&wtrealm=https%3A%2F%2Flocalhost%2FPro%2FFederatedLogin.mvc&wauth=urn:oasis:names:tc) : **SAML:1.0** :am:password

它可以工作，但 ADFS 生成的令牌是 SAML 1.0。

使用 SAML 2.0 令牌构建被动联合请求的正确形式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:20:53.403

AD FS 2.0 不支持基于 SAML 2.0 的 IDP 发起的 SSO 到 WIF 依赖方应用程序。您在 ws-federation 请求中使用的 url，因此只有 saml 1.1 将由 ADFS 返回。

# sql - 如何根据条件选择包含记录的 TOP X？

> ID：12375486
> 
> 赞同：3
> 
> 时间：2012-09-11T18:10:58.873
> 
> 标签：sql, tsql, select

我有一个表，有多个列，包括一个名为“PolicyNumber”的列

这是一个示例：

```
PolicyNumber

NYH1111
NYD2222
SCH3333
SCS4444
LUH5555
LUS6666
ALH7777
ALW8888
VAH9999
AKH0000
...
NYH1010
NYD2318 
```

此表中有 1,000 多条记录，记录包含每种保单编号类型中的几种。例如，以“NYH”开头的多个策略或以“VAH”开头的多个策略。

可能的策略类型在这里：

```
NYH
NYD
SCH
SCS
LUH
LUS
ALH
ALW
VAH
AKH 
```

如何进行 SELECT TOP 300，其中至少包含每种策略类型中的一种？请记住，保单类型是保单编号的前 3 个字母。

这甚至可能吗？这样做的目的是我必须从生产中获取 300 条记录以转储到测试环境中，并且我需要包含每个策略中的至少 1 条。在我至少有一个之后，它可以完全随机化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:25:22.223

在我的脑海中，你可以这样做：

```
SELECT TOP 30 Column1, Column2, Column3, PolicyNumber
FROM YourTable
WHERE PolicyNumber LIKE 'NYH%'

UNION 

SELECT TOP 30 Column1, Column2, Column3, PolicyNumber
FROM YourTable
WHERE PolicyNumber LIKE 'NYD%'

UNION

/* ... remaining eight policy types go here */ 

ORDER BY PolicyNumber /* Or whatever sort order you want */ 
```

但是，它每次都会给你每种类型的 30 个，而不是一种类型的 X 和另一种类型的 Y。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:27:06.470

我想到的一种快速方法.. 下面的查询将只获取每种策略类型的 1 条记录

```
 SELECT TOP 300 *

 FROM   ( SELECT *,rank1= ROW_NUMBER () OVER (PARTITION BY LEFT (PolicyNo,3) ORDER BY GETDATE ()) FROM MyTable
        ) AS t1

 WHERE  t1.rank1 = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:29:33.803

在 SQL Server 2005+ 上试试这个：

```
;WITH CTE AS
(
    SELECT  LEFT(PolicyNumber) PolicyType, PolicyNumber, 
            ROW_NUMBER() OVER(PARTITION BY LEFT(PolicyNumber) ORDER BY NEWID()) RN
    FROM YourTable
)
SELECT TOP 300 PolicyNumber
FROM CTE
ORDER BY RN, NEWID() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T18:41:57.417

你可以试试这个：

在此解决方案中`newid()`，您首先可以通过每次运行生成**随机顺序。**

为了实现“每项政策至少一项”的目标，我制作了`AtLeastOne`专栏。这会从随机`CTE`表中为每个唯一的三个字母在开始时选择第一个。如果电流`Policy`等于第一个选择的值，则它得到 1，否则为 0。因此，使用此逻辑，您可以**从每个唯一的三个字母中选择一个随机的第一个。**

*`Order By`注意：如果您只需要 Policy 字段，也可以将此逻辑直接放入部件中。（我以这种方式制作了示例，以使其背后的逻辑可见）*

在最后一步中，您只需按`AtLeastOne Des`c 排序，然后按 random排序`ID`。

```
WITH CTE_Policy
AS
(
  SELECT newid() as  ID, Policy
  FROM Code
)
SELECT TOP 300
Policy,
CASE WHEN Policy = (SELECT TOP 1 Policy FROM cte_Policy c
                    WHERE SUBSTRING(c.Policy,1,3) = 
                      SUBSTRING(CTE_Policy.Policy,1,3))
THEN 1 ELSE 0 END  AS AtLeastOne

FROM CTE_Policy
ORDER BY AtLeastOne DESC, ID 
```

这是一个[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d7393/16)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T18:46:59.983

借自 ClearLogic +1 如果可行，请给 ClearLogic 支票

WHERE t1.rank1 = 1 的问题是，如果少于 300 个唯一值，它将停止在 300 个以下

```
 SELECT TOP 300 t1.PolicyNo

 FROM   ( SELECT PolicyNo, rank1= ROW_NUMBER () 
          OVER (PARTITION BY LEFT (PolicyNo,3) ORDER BY NEWID()) 
          FROM MyTable
        ) AS t1

 order by t1.rank, t1.PolicyNo 
```

# iphone - GPUImage 对小图像应用过滤器但显示大图像

> ID：12375487
> 
> 赞同：1
> 
> 时间：2012-09-11T18:11:01.097
> 
> 标签：iphone, objective-c, ios, gpuimage

我正在开发一个应用程序，该应用程序可以从实时摄像机源中计算一些兴趣点。我为此使用的算法非常慢，因此我正在使用`forceProcessingAtSizeRespectingAspectRatio`.

```
[filter forceProcessingAtSizeRespectingAspectRatio:CGSizeMake(100, 80)]; 
```

我显示从过滤器获得的图像如下：

```
GPUImageView *filterView = (GPUImageView *)imageView;
[filter addTarget:filterView]; 
```

我希望能够在设备上显示全分辨率图像。我已经对算法中计算的兴趣点进行了标准化，因此我可以将它们映射到全分辨率图像。但我无法在设备上显示全分辨率图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:15:27.680

我对此的建议是拆分您的处理管道，并让一个输出以全分辨率输出到屏幕，而另一个输出则以较小的尺寸输出。您可以通过向最后一个滤镜添加两个目标来做到这一点：一个是全分辨率的 GPUImageView，另一个是虚拟滤镜（如默认设置下的亮度滤镜）。仅`forceProcessingAtSize`在虚拟过滤器上使用 - : ，而不是在管道的早期使用，您将获得分辨率降低的图像，同时仍将全分辨率图像显示到屏幕上。管道的两个分支将同时更新

# css - 为 css 设置内容类型客户端

> ID：12375491
> 
> 赞同：0
> 
> 时间：2012-09-11T18:11:12.257
> 
> 标签：css, client-side, content-type

我的css是用php生成的。

我想将内容类型设置为 css 但客户端。

我知道服务器端，我们可以做`header('Content-Type: text/css');`

但是有没有办法在客户端强制内容类型为 css？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:25:56.610

服务器必须是在响应标头中设置内容类型的服务器。如果您有某种奇怪的限制，无法单独提供 CSS 文件，请考虑将 CSS 加载到全局共享 php 页面上的 <style> 标记中，在页眉或页脚 html 的任何位置。

# c - 有没有办法在c中创建一个可变长度的数组？

> ID：12375493
> 
> 赞同：7
> 
> 时间：2012-09-11T18:11:16.320
> 
> 标签：c, arrays, function

有没有办法（除了`malloc`）来创建一个用户输入的大小的数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:19:16.067

这完全取决于编译器。

> 中允许使用可变长度自动数组`ISO C99`，作为扩展，**GCC**在 C90 模式和 C++ 中接受它们。这些数组的声明与任何其他自动数组一样，但其长度不是常量表达式。存储在声明时分配，并在退出大括号级别时释放。例如：

```
 FILE *
 concat_fopen (char *s1, char *s2, char *mode)
 {
   char str[strlen (s1) + strlen (s2) + 1];
   strcpy (str, s1);
   strcat (str, s2);
   return fopen (str, mode);
 } 
```

有关更多信息，请参阅[此](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:18:22.190

一种方法是使用 VLA（C99 定义了所谓的“可变长度数组”）。

这是一个例子：

```
#include <stdio.h>

int use_a_vla (int n)
{
  int vla[n]; /* Array length is derived from function argument.  */

  vla[0] = 10;
  vla[n-1] = 10;

  return 0;
}

int main (void)
{
  int i;

  scanf ("%d", &i); /* User input.  */

  use_a_vla (i);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:33:44.110

如果您没有 VLA 或`alloca()`，这里有一个非常笨拙但可移植的基于堆栈的技术：

```
int foo(int size)
{
    if (size <= 64*1024)
    {
        unsigned char   arr[64*1024];
        return bar(arr, size);
    }
    else if (size <= 1*1024*1024)
    {
        unsigned char   arr[1*1024*1024];
        return bar(arr, size);
    }
    else if (size <= 64*1024*1024)
    {
        unsigned char   arr[64*1024*1024];
        return bar(arr, size);
    }
    else
        return -1;       // Assume it's too big
}

int bar(unsigned char arr[], int size)
{
    ...your code goes here...
}

int maincode(int size)
{
    // Invoke bar() indirectly, allocating an array
    // on the stack of at least 'size' bytes
    return foo(size);
} 
```

我不特别推荐这种技术，但它会给你分配在堆栈而不是堆上的不同大小的内存块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T22:29:52.670

我假设你试图避免`malloc`，因为你不知道`realloc`.

本质上，您应该尝试大致执行 C++ 向量的功能。一旦你的数组增长到一定大小，`realloc`它的大小就会增加一倍。

`realloc`如果可能的话会增加你的内存块，如果不可能的话，它会`malloc`创建一个新的并复制内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T18:23:12.977

好吧，这是迂腐的，但您可以编写自己的堆管理代码并调用除 malloc() 之外的内存分配函数。我希望这个答案很有趣而不是烦人。

# actionscript-3 - Red5 RTMPT 通过端口 80 流式传输异常

> ID：12375496
> 
> 赞同：1
> 
> 时间：2012-09-11T18:11:31.983
> 
> 标签：actionscript-3, flash, red5, flash-media-server

我按照[Mondain 的帖子](http://gregoire.org/2009/01/28/rtmpt-and-red5/)在端口 80 上设置了带有 RTMPT 的 Red5，它主要工作。

但是，在 Mac 上，流会在几秒钟后中断。以下是 Red5 控制台的相关摘录：

```
[WARN] [NioProcessor-16] org.red5.server.net.rtmp.RTMPMinaIoHandler - Exception caught null 
[WARN] [Red5_Scheduler_Worker-4] org.red5.server.net.rtmp.RTMPConnection - Closing RTMPTConnection from 98.207.104.42 : 37953 to 54.245.114.146 (in: 64790 out 3665 ), with id 25769, due to too much inactivity (79868 ms), last ping sent 4999 ms ago 
[WARN] [Red5_Scheduler_Worker-4] org.red5.server.net.rtmp.RTMPConnection - This often happens if YOUR Red5 application generated an exception on start-up. Check earlier in the log for that exception first! 
```

有没有人设法让 RTMPT 流媒体在 Mac 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:28:22.520

我使用 Red5 在 Mac 上调试和开发。我对 OSX 上的 Red5 没有任何问题。日志消息实际上告诉您其他地方可能存在其他异常。你也没有告诉任何关于你的 Red5 版本的信息。您应该尝试使用最新的快照/版本。如果您在重新启动 red5 时忘记关闭连接到 red5 服务器的旧浏览器实例，也会发生“由于过多的不活动”。

# c++ - Boost线程禁用

> ID：12375500
> 
> 赞同：2
> 
> 时间：2012-09-11T18:11:47.117
> 
> 标签：c++, multithreading, boost, boost-thread

我尝试实现阻塞队列。主要部分如下（这是一种教育任务）

```
template <typename T>
class Blocking_queue
{
public:
    std::queue<T> _queue;
    boost::mutex _mutex;
    boost::condition_variable _cvar;

    void Put(T& object);
    T Get();
    void Disable()
};

template<typename T>
void Blocking_queue::Put(T& object)
{
    boost::mutex::scoped_lock lock(_mutex);
    _queue.push(T);
    lock.unlock();
     _cvar.notify_one();
}

template<typename T>
T Blocking_queue::Get()
{
    boost::mutex::scoped_lock lock(_mutex);

    while(_queue.empty())
    {
        _cvar.wait(_mutex);
    }

    T last_el = _queue.front();
    _queue.pop();
    return last_el;
}

template<typename T>
void Blocking_queue::Disable()
{

} 
```

我需要实现一个函数 Disable() “释放”所有等待线程（如任务中所写）。问题是我不完全理解这个术语中的“释放”是什么意思，我应该应用什么方法。所以我的想法 - 如下：当 Disable() 被调用时，我们应该在这个地方（在循环内）为当前线程调用一些方法

```
 while(_queue.empty())
    {
        //here
        _cvar.wait(_mutex);
    } 
```

这将释放当前线程，对吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:04:56.867

“释放所有正在等待的线程”是一个几乎没有用的操作。你想用这个操作做什么？

有用的是关闭队列，因此等待队列的每个线程都将被解除阻塞，并且每个要调用 Get() 的线程都将立即返回。要实现这样的行为，只需在队列中添加一个关闭标志并等待“非空或关闭”：

```
template<typename T>
void Blocking_queue::Disable()
{
    boost::mutex::scoped_lock lock(_mutex);
    _shutdown = true;

    _cvar.notify_all()
} 
```

为了表明没有数据，对于 Get() 的调用者，您可以返回一个带有额外布尔值的对或抛出一个特殊异常。没有办法返回 null，因为并非所有类型 T 都有一个 null 值。

```
template<typename T>
std::pair< bool, T > Blocking_queue::Get()
{
    boost::mutex::scoped_lock lock(_mutex);

    while  (_queue.empty() && !_shutdown )
        _cvar.wait(_mutex);

    if ( _shutdown )
        return std::make_pair( false, T() );

    T last_el = _queue.front();
    _queue.pop();
    return std::make_pair( true, last_el );
} 
```

# javascript - 使用 Javascript 居中图像在 javascript 中不起作用

> ID：12375515
> 
> 赞同：-4
> 
> 时间：2012-09-11T18:12:37.323
> 
> 标签：javascript, css, webkit, centering

我有一点小问题，我的投资组合上有一张我的照片，它保持 100% 的高度，我想用边距居中：0 auto; 在 JavaScript 中。这适用于 IE（一次），但不适用于 webkit 浏览器。

我的作品集可以在 www.koenvrij.nl 上找到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:22:43.717

1）你的形象需要`display: block;`工作`margin: 0 auto;`。

2）你有一个内联样式`margin-left: 0px;`。那会出问题

3）图像的父容器中有一堆其他垃圾，所以它将在剩余的未填充区域（而不是整个区域）中居中。

# windows-7 - XNA 鼠标事件是否可以在 Windows 7 PC 上使用单点触控？

> ID：12375520
> 
> 赞同：2
> 
> 时间：2012-09-11T18:13:03.450
> 
> 标签：windows-7, xna, touch, mouseevent

我有一个在 XNA 中为 Windows 7 开发的游戏，它只使用鼠标事件！屏幕周围有用户使用的按钮。

同样的游戏是否可以在 Windows 7 触摸屏上进行单点触控？我不需要任何多点触控功能。

如果没有，我如何在 Windows 7 PC 上的 XNA 中获取触摸事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:42:57.507

触摸屏确实会发送鼠标事件。

尽管根据型号的不同，它们可能会发送按下/释放/移动的鼠标状态略有不同。例如，最初的单点触控 eeetop 有时从不发送按下状态（即使您只是单击也会移动），而后来的多点触控版本按预期工作。

# excel - 使 Excel 切片器跳转到其他切片器选择的值

> ID：12375522
> 
> 赞同：1
> 
> 时间：2012-09-11T18:13:12.827
> 
> 标签：excel, vba, excel-2010

我在链接到 SSAS 多维数据集的数据透视表上有一组 3 个切片器。切片器是年、月和日期。日期切片器非常大，显示我的整个日期维度到 2100 年。

我想让用户选择年份并让月份切片器“跳转”到那一年的一月。Byy定义

日期切片器也会跳转到 1 月 1 日的日期。选择月份切片器值时，日期切片器也会跳转到正确的月份。

有没有人有一些示例代码来做类似的事情？谢谢！

# php - 循环数组值

> ID：12375528
> 
> 赞同：0
> 
> 时间：2012-09-11T18:13:37.647
> 
> 标签：php, arrays, loops

在这里，我从 DB 表的行中访问“日期”键值。我可以回显这些值，没问题。

```
$res = $mysqli->query("SELECT * FROM alfred ORDER BY id ASC");
$row = $res->fetch_all(MYSQLI_ASSOC);

foreach ($row as $key => $value){
    $availDate = $value['date'];
    echo $availDate.'<br />';
} 
```

上面的这个循环显示了来自 DB 的所有“日期”值，在这种情况下，有 3 个日期——“2012-09-25”、“2012-09-27”和“2012-09-29”。但随后我需要将这些“日期”值中的`$date->format('Y-m-d')`每一个与下面代码中的值进行比较，并将每个日期与相应的“忙碌”或“可用”状态显示到单独`<td>`的表格中。我的以下版本仅比较“日期”键的“最后一个”值 - “2012-09-29”，但我需要比较上面数组中的每个“日期”值，这也意味着“2012-09-25”和“2012-09-27”。我尝试了很多版本，但仍然不成功。有任何想法吗？

```
$date = new DateTime();
$endDate = new DateTime('+10 day');
for($date->format('Y-m-d'); $date->format('Y-m-d') < $endDate->format('Y-m-d'); $date->modify('+1 day')){
    if ($date->format('Y-m-d') == $availDate){
    echo '<td>'.$date->format('Y-m-d/D').' busy</td>';
    }   else {
        echo '<td>'.$date->format('Y-m-d/D').' available</td>';
        }
} 
```

这是我现在得到的结果：

```
2012-09-21/Fri available 2012-09-22/Sat available 2012-09-23/Sun available 2012-09-24/Mon available 2012-09-25/Tue available 2012-09-26/Wed available 2012-09-27/Thu available 2012-09-28/Fri available 2012-09-29/Sat busy 2012-09-30/Sun available 
```

但事实上，我还需要在`<td>`“2012-09-25”和`<td>`“2012-09-27”中显示“忙碌”状态，因为这些也是 $row 数组中存在的“日期”值。不幸的是，我不能在这里发布任何图片来展示，但我希望我上面的结果能给你这个想法。

在下面的 in_array 的帮助下解决：

```
$aAvailDate = array();
foreach ($row as $key => $value){
        $aAvailDate[] = $value['date'];
}
$date = new DateTime();
    $endDate = new DateTime('+10 day');
    for($date->format('Y-m-d'); $date->format('Y-m-d') < $endDate->format('Y-m-d'); $date->modify('+1 day')){
        if (in_array($date->format('Y-m-d'), $aAvailDate)){
        echo '<td>'.$date->format('Y-m-d/D').' busy</td>';
        }     else {
            echo '<td>'.$date->format('Y-m-d/D').' available</td>';
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:22:44.760

我还没有测试过你的代码，但我认为你在[`->format('Y-m-d')`](http://uk.php.net/manual/en/datetime.format.php)这里不必要地运行，这搞乱了你的逻辑。

每次运行时，PHP 都会将您的对象转换为字符串，然后您将其与其他字符串进行比较。这不会做任何有用的事情。

相反，您应该使用[类](http://uk.php.net/manual/en/class.datetime.php)[的`DateTime`](http://uk.php.net/manual/en/class.datetime.php)特性来比较对象本身。唯一需要使用该`format()`方法的时候是输出到浏览器、输入 SQL 查询等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:02:06.690

像这样的东西？（如果我理解您要正确执行的操作）

```
<?php

$avail_dates = array();
$res = $mysqli->query("SELECT DATE_FORMAT(date, '%Y-%m-%d') AS availDate FROM alfred ORDER BY id ASC"); 
$row = $res->fetch_all(MYSQLI_ASSOC); 
foreach ($row as $key => $value){ 
$avail_dates[] = $value['availDate']; 
}

$startDate = date('Y-m-d');
$endDate = date('Y-m-d', strtotime(date("Y-m-d", strtotime($startDate)) . " +3 week"));
?>

<table>
<?php
foreach ($avail_dates as $availDate){

echo "<tr><td>$availDate</td>";

if (($startDate <= $availDate) && ($endDate >= $availDate)){
echo "<td class='busy'>busy</td>"; 
}else{
echo "<td>free</td>"; 
}

echo "</tr>";
}
?> 
```

我不会打印值，而是将它们添加到数组中，然后在该数组上运行一个循环，将值与给定的开始日期和结束日期进行比较。如果您只需要一个日期，我也不会从表中获取所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:27:06.200

虽然你的问题不清楚，但 AFAIK

如果可用日期发生在给定日期最多 3 周之间，您想显示“忙碌”，否则显示“空闲”

我想建议你用 MySQL 做这个（未测试）

```
SELECT *,
IF( `DateCol` BETWEEN NOW() AND DATE_ADD(NOW(), INTERVAL 3 WEEK), 'Busy','Free') 
AS status
FROM TableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:27:59.373

尝试`while`循环而不是`foreach`. 此外，直接比较 DateTime 对象，而不是格式化的字符串。

```
$date = new DateTime();
$endDate = new DateTime('+3 week');

while( $date < $endDate) {
    if ($date->format('Y-m-d') == $availDate){
        echo '<td class="busy">busy</td>';
    } else {
        echo '<td>free</td>';
    }
    $date->modify("+1 day");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T18:16:56.147

可能是这样吗？

```
$date = new DateTime();
$endDate = new DateTime('+3 week');
for($date->format('Y-m-d'); $date->format('Y-m-d') < $endDate->format('Y-m-d'); $date->modify('+1 day')){
    $tempDate = $date->format('Y-m-d');
    if ($tempDate === $availDate){
    echo '<td class="busy">busy</td>';
    } else {
      echo '<td>free</td>';
        }
} 
```

# c#-4.0 - 从文本框中删除选定文本并在 C#.NET 中输入新字符

> ID：12375537
> 
> 赞同：6
> 
> 时间：2012-09-11T18:14:24.933
> 
> 标签：c#-4.0

我正在尝试从文本框中删除选定的文本并输入新字符来代替它。例如，如果文本框包含`123456`并且我选择`345`，然后按下`r`键盘，它应该替换选定的文本。

这是我的代码：

```
string _selectText = txtCal.SelectedText;
string _text = Convert.ToString(btn.Text);

if (_selectText.Length > 0) {
   int SelectionLenght = txtCal.SelectionLength;
   string SelectText = txtCal.Text.Substring(txtCal.SelectionStart, SelectionLenght);
   txtCal.Text = ReplaceMethod(SelectText, _text);
}

//replace method function
public string ReplaceMethod(string replaceString, string replaceText) {
   string newText = txtCal.Text.Replace(replaceString, replaceText);
   return newText;
} 
```

谁能告诉我我的错误在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T05:02:58.833

如评论中所述，上面提供的基于替换的答案很可能会替换错误的选择实例。下面的方法可以代替位置，并且不会遇到这个问题：

```
textbox1.Text = textbox1.Text.Substring(0, textbox1.SelectionStart) + textbox1.Text.Substring(textbox1.SelectionStart + textbox1.SelectionLength, textbox1.Text.Length - (textbox1.SelectionStart + textbox1.SelectedText.Length)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T17:06:54.040

以下是您想要的，然后选择替换文本:)

```
 string _text = Convert.ToString(btn.Text);
    int iSelectionStart = txtCal.SelectionStart;
    string sBefore = txtCal.Text.Substring(0, iSelectionStart);
    string sAfter = txtCal.Text.Substring(iSelectionStart + txtCal.SelectionLength);
    txtCal.Text = sBefore + _text + sAfter;
    txtCal.SelectionStart = iSelectionStart;
    txtCal.SelectionLength = _text.Length; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:22:25.573

试试这个

```
if (textbox1.SelectedText.Length > 0)
{
   textbox1.Text = textbox1.Text.Replace(text1.Text.Substring(textbox1.SelectionStart, textbox1.SelectionLength), btn.Text);                
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-09T20:35:49.220

这与其他答案基本相同，但使用 C# 6.0 的格式不同。

```
// If there is selected text, it will be removed before inserting new text.
// If there is no selected text, the new text is inserted at the caret index.
string before = textBox.Text.Substring(0, textBox.SelectionStart);
string after = textBox.Text.Substring(textBox.SelectionStart + textBox.SelectedText.Length);

textBox.Text = $"{before}{insertText}{after}";
textBox.CaretIndex = $"{before}{insertText}".Length; 
```

请注意，我在更改文本*后将*`CaretIndex`设置为新位置。这可能很有用，因为在像这样更改文本时插入符号索引会重置为零。您可能还希望集中文本框以吸引用户注意更改并让他们知道插入符号当前在哪里。

# c# - 如何使用 OpenXml 从 xlsx 文件中提取文本

> ID：12375538
> 
> 赞同：3
> 
> 时间：2012-09-11T18:14:29.167
> 
> 标签：c#, openxml, xlsx, import-from-excel

我需要从 xlsx 文件中提取文本（放入数据库的全文索引中）。我正在使用以下代码：

```
using(SpreadsheetDocument d = SpreadsheetDocument.Open(stream, false)) {
 // Load the shared strings table.
 SharedStringTablePart stringTable = 
  d.WorkbookPart.GetPartsOfType<SharedStringTablePart>()
  .FirstOrDefault();
 if(stringTable == null) System.Diagnostics.Debug.WriteLine("Null string table");
 foreach(WorksheetPart part in d.WorkbookPart.WorksheetParts) {
  foreach(SheetData sheet in part.Worksheet.Elements<SheetData>()) {
   bool added = false;
   foreach(Row r in sheet.Elements<Row>()) {
    foreach(Cell c in r.Elements<Cell>()) {
     if(c.DataType != null) {
      string v = c.CellValue.Text;
      if(v != null && c.DataType.Value == CellValues.SharedString) {
       var tableEntry = stringTable.SharedStringTable.ElementAt(int.Parse(v));
       if(tableEntry != null) {
        v = tableEntry.InnerText;
       }
      }
      if(v != null) {
       if(added) b.Append('\t');
       b.Append(v);
       added = true;
      }
     }
    }
    if(added) b.AppendLine();
   }
  }
 }
}
return b.ToString(); 
```

我在网上找到的示例没有提到共享字符串表 - 当我意识到没有输出字符串数据时，我发现了它。

还有其他我应该知道的问题吗？

对代码的其他批评总是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T16:31:55.310

从单元格中提取实际数据有一些棘手的部分。有时它存储在那里（数字、日期、内联字符串），有时它引用 SharedStringTable。我浏览了相当多的功能，这就是我想出的（有些是复制的，有些是我的）。之后，您应该能够轻松地将其滑入您的代码中

foreach(r.Elements() 中的单元格 c) {

像这样

字符串 v = GetValueFromCell(c, d.WorkbookPart);

```
 /// <summary>
        /// Return si value based on xml cell id number
        /// </summary>
        /// <param name="workbookPart"></param>
        /// <param name="id"></param>
        /// <returns>SharedStringItem for interpretation</returns>
        public static SharedStringItem GetSharedStringItemById(WorkbookPart workbookPart, int id)
        {
            return workbookPart.SharedStringTablePart.SharedStringTable.Elements<SharedStringItem>().ElementAt(id);
        }

        /// <summary>
        /// Return value from the cell based on the cell's information (innards and/or id)
        /// </summary>
        /// <param name="cell">spreadhseet cell</param>
        /// <param name="workbookPart">work book from uploaded file</param>
        /// <returns>string value of the cell</returns>
        public static string GetValueFromCell(Cell cell, WorkbookPart workbookPart)
        {
            int id;
            string cellValue = cell.InnerText;

            if (cellValue.Trim().Length > 0)
            {
                if (cell.DataType != null)
                {
                    switch (cell.DataType.Value)
                    {
                        case CellValues.SharedString:

                            Int32.TryParse(cellValue, out id);
                            SharedStringItem item = GetSharedStringItemById(workbookPart, id);
                            if (item.Text != null)
                            {
                                cellValue = item.Text.Text;
                            }
                            else if (item.InnerText != null)
                            {
                                cellValue = item.InnerText;
                            }
                            else if (item.InnerXml != null)
                            {
                                cellValue = item.InnerXml;
                            }
                            break;

                        case CellValues.Boolean:
                            switch (cellValue)
                            {
                                case "0":
                                    cellValue = "FALSE";
                                    break;
                                default:
                                    cellValue = "TRUE";
                                    break;
                            }
                            break;
                    }
                }

                else
                {
                    int excelDate;
                    if (Int32.TryParse(cellValue, out excelDate))
                    {

                        var styleIndex = (int)cell.StyleIndex.Value;

                        var cellFormats = workbookPart.WorkbookStylesPart.Stylesheet.CellFormats;
                        var numberingFormats = workbookPart.WorkbookStylesPart.Stylesheet.NumberingFormats;
                        var cellFormat = (CellFormat)cellFormats.ElementAt(styleIndex);

                        if (cellFormat.NumberFormatId != null)
                        {

                            var numberFormatId = cellFormat.NumberFormatId.Value;
                            var numberingFormat = numberingFormats.Cast<NumberingFormat>().SingleOrDefault(f => f.NumberFormatId.Value == numberFormatId);

                            if (numberingFormat != null && numberingFormat.FormatCode.Value.Contains("/yy")) //TODO here i should think of locales
                            {
                                DateTime dt = DateTime.FromOADate(excelDate);
                                cellValue = dt.ToString("MM/dd/yyyy");
                            }
                        }
                    }
                }
            }
            return cellValue;
        } 
```

# python - ttk.Entry 的行为方式与 tk.Entry 不同

> ID：12375540
> 
> 赞同：1
> 
> 时间：2012-09-11T18:14:47.957
> 
> 标签：python, tkinter, ttk

我正在切换一个小应用程序（Win 7/64 上的 Python 2.7.3/32）来使用 ttk，但我无法让 ttk.Entry 像 tk.Entry 那样工作；当我设置它的内容时，ttk.Entry 没有更新显示的输入框：

```
import Tkinter as tk
import ttk

class SampleApp(tk.Tk):
    def __init__(self, *args, **kwargs):
        tk.Tk.__init__(self, *args, **kwargs)

        part_num = '1234'
        newPNVar = tk.StringVar()
        newPN = ttk.Entry(self, width=13, textvariable=newPNVar)
        newPNVar.set(part_num)
        newPN.pack()
        #newPN.insert(0, part_num)  also didn't work

        print newPNVar.get()

app = SampleApp()
app.mainloop() 
```

如果我用 tk.Entry 替换 ttk.Entry 并运行示例，则 1234 会显示在“条目”框中，但如果它是 ttk.Entry 则不会。我如何让他们以同样的方式行事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:15:41.147

似乎 ttk 和 tk 对 text 变量的保留略有不同。似乎根本原因是`newPNVar`因为您没有保留参考，所以正在收集垃圾。这似乎不影响`tk.Entry`，但确实影响`ttk.Entry`。

快速解决方法是保留对`newPNVar`（例如：）的引用`self.newPNVar`，无论这种行为差异如何，这可能都是明智之举。

这在 Windows 上适用于我：

```
import Tkinter as tk
import ttk

class SampleApp(tk.Tk):
    def __init__(self, *args, **kwargs):
        tk.Tk.__init__(self, *args, **kwargs)

        part_num = '1234'
        self.newPNVar = tk.StringVar()
        newPN = ttk.Entry(self, width=13, textvariable=self.newPNVar)
        self.newPNVar.set(part_num)
        newPN.pack()
        #newPN.insert(0, part_num)  also didn't work

        print self.newPNVar.get()

app = SampleApp()
app.mainloop() 
```

# marker - 看不到谷歌标记

> ID：12375541
> 
> 赞同：0
> 
> 时间：2012-09-11T18:14:55.377
> 
> 标签：marker

谁能告诉我为什么我在这张地图上看不到标记？

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
    html { height: 100% }
    body { height: 100%; margin: 0; padding: 0 }
    #map_canvas { height: 100% }
</style>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?keykey=AIzaSyBG47z_ebM8I6Ic2-rXL8QiPN5CHCOBwco&sensor=true"></script>
<script type="text/javascript">
    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(37.998727,-0.686259),
            zoom: 18,
            minZoom: 4,
            maxZoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            streetViewControl: false
        }; 
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
    }     

    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(37.998727,-0.686259), 
        map: map
    });
</script>
<body onload="initialize()">
<div id="map_canvas" style="width:600px; height:600px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:22:08.187

查看浏览器的错误控制台：

```
Uncaught ReferenceError: map is not defined 
```

您需要公开该变量，因为`map`当前在`initialize()`. 或者，将标记代码移动到`initialize()`：

```
function initialize() {
    var mapOptions = {
        center: new google.maps.LatLng(37.998727,-0.686259),
        zoom: 18,
        minZoom: 4,
        maxZoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        streetViewControl: false
    }; 
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(37.998727,-0.686259), 
        map: map
    }); 
} 
```

# jquery - Drupal 7：在表单 API 中从外部触发 AJAX 回调

> ID：12375542
> 
> 赞同：3
> 
> 时间：2012-09-11T18:14:56.217
> 
> 标签：jquery, ajax, drupal, drupal-7, form-api

**简而言之：**

我正在尝试通过 jQuery 触发外部事件，从而导致 Drupal 表单上的 AJAX 回调被执行。这将重建几个链式元素。它工作一次，然后中断，直到表单被 Drupal 中的不同元素刷新。

form_state 在第一次尝试时检测到正确的元素作为触发元素，但之后默认为 form_state['buttons'] 数组中的第一个可用按钮。有什么想法吗？

**详细地：**

我有一个复杂的 Drupal 表单，如下所示：

一个（下拉）

B（实际上是B_key和B_literal，2个文本字段）C（下拉）D（下拉）E（下拉）

其中A刷新B，B刷新C，C刷新D，以此类推。除了 B 之外，这些都是下拉元素。每个项目都是一个 key => value 对，我们使用 key 来重建它刷新的元素中的选项。因此，B 的键刷新了 C 中的选项，因为 C 的键用于 D 的选项。

这些完全构建为 Drupal AJAX 回调，并且可以正常工作。但是，B 不是选择，而是 2 个单独的文本字段，1 个是键，1 个是文字。我们这样做是为了对 B 进行 AJAX 自动完成查找，因为列表太大而无法使用选择元素。

我编写了一个外部 jQuery 脚本来执行此查找，并填充这两个字段（B_key 和 B_literal）。一旦我们填充它们，我们就会触发一个自定义事件，由字段的 'ajax' => 'event' => 'hs_changed' 引用，我们在 jQuery 中使用 jQuery('[name=b_literal]').trigger 手动触发该事件()。这在我第一次执行此操作时有效，导致 C 使用一组新选项进行重建。

但是，一旦这种情况发生一次，它就不再重建。我追踪了 form_state，并注意到当为 B 选择一个新值时，表单状态认为一个按钮已被单击（以 form_state['buttons'] 数组中的第一个按钮为准），导致此操作失败。

现在，当我重新加载 A 时，这通常具有 B 的预设值，因此所有子字段（B、C、D、E）都会正确刷新。一旦发生这种情况，我可以再次手动选择 B，它会像以前写的那样工作，如果我们再试一次就会失败。应该注意的是，我的 jQuery 没有绑定问题，因为它仍然能够找到 B 的字段，并更新了值。它手动触发自定义事件（触发drupal字段的ajax），在我们第一次触发后每次都会失败。

这是我们的代码：

表格：

```
$form['a'] = array (
  '#type' => 'select',
  '#options' => $a_options,
  '#default_value' => $a_selected,
  '#required' => TRUE,
  '#prefix' => '<div id="a_wrapper">',
  '#suffix' => '</div>',
  '#ajax' => array(
    'callback' => 'a_ajax_callback',
    'method' => 'replace',
    'effect' => 'fade',
  ),
);

$form['b_key'] = array (
  '#type' => 'textfield',
  '#default_value' => $hierarchy['b_key'],
);

$form['b_literal'] = array (
  '#type' => 'textfield',
  '#default_value' => $hierarchy['b_literal'],
  '#size' => 32,
  '#required' => TRUE,
  '#ajax' => array(
    'callback' => 'b_ajax_callback',
    'method' => 'replace',
    'effect' => 'fade',
    'event' => 'hs_changed',
  ),
  '#prefix' => '<div id="b_wrapper">',
  '#suffix' => '</div>',
);

$form['c'] = array (
  '#type' => 'select',
  '#default_value' => $hierarchy['c'],
  '#empty_option' => '- Select -',
  '#options' => get_children_options_array($hierarchy['b_key'], TRUE),
  '#ajax' => array(
    'callback' => 'c_ajax_callback',
    'method' => 'replace',
    'effect' => 'fade',
  ),
  '#required' => TRUE,
  '#prefix' => '<div id="c_wrapper">',
  '#suffix' => '</div>',
);

//Assume D and E are identical to C 
```

回调：

```
 function a_ajax_callback($form, &$form_state) {

   //Return the field to be rebuilt by the AJAX request  $commands = array();
   $commands[] = ajax_command_replace("#b_key_wrapper", render($form['b_key']));
   $commands[] = ajax_command_replace("#b_literal_wrapper", render($form['b_literal']));

   //We also unset a bunch of form_state['input'] values and such here

   return array('#type' => 'ajax', '#commands' => $commands);
 }

 //The b_ajax_callback and c_ajax_callback are pretty much identical 
```

jQuery：

```
jQuery(document).on("focus", '[name=my_search]:not(.ui-autocomplete-input)', function() { 
  jQuery(this).autocomplete({
    source: function(req, res) {
      ch_search(req, res);
    },
    minLength: 3,
    select: function(event, ui) {
      ch_render_dropdowns(ui.item.id);
    }
  }); 
});

function ch_render_dropdowns(ch_node) {

  var token = jQuery('[name=ajax_token]').val();

  jQuery.ajax({
    url: '/ajax/myFunction/' + ch_node
    async: false,
    cache: false,
    data: {
      'token': token
    },
    success: function(data) {

      jQuery('#autoComplete_logic').html(data);
      jQuery('#autoComplete_logic').hide();

      // Once we have the initial results, fill in the d7 form fields
      // where we have values.
      var b_key = jQuery("#b_key").val();
      var b_name = jQuery("#b_literal").text();

      // Set our Drupal B Fields
      jQuery('[name=b_key]').val(b_key);
      jQuery('[name=b_literal]').val(b_name);

      //Trigger the refresh of all submenus in Drupal
      //This triggers the AJAX callback attached to the b_literal 
      //to rebuild c, d, and e.
      jQuery('[name=b]').trigger('hs_changed');
    }
  });
} 
```

我已经简化了一切，因为有很多逻辑超出了这个问题的范围。自动完成不是问题。触发 b_literal 字段附加的 Drupal AJAX 激活，导致刷新 c、d 和 e，在第一次之后不起作用，除非我们点击字段 a，它通过 Drupal 的 Form API 在内部刷新了 b、c、d 和 e AJAX 逻辑。

Form_state（第一次正确执行）：

[triggering_element] => 数组 ( [#type] => 文本字段 [#title] => B [#description] => [#default_value] => [#size] => 32 [#maxlength] => 255 [#required ] => 1 [#disabled] => [#ajax] => 数组 ( [callback] => b_ajax_callback [method] => replace [effect] => fade [event] => hs_changed )

```
 [#prefix] => <div id="b_literal_wrapper">
        [#suffix] => </div>
        [#input] => 1
        [#autocomplete_path] => 
        [#process] => Array
            (
                [0] => ajax_process_form
            )

        [#theme] => textfield
        [#theme_wrappers] => Array
            (
                [0] => form_element
            )

        [#pre_render] => Array
            (
                [0] => ctools_dependent_pre_render
            )

        [#defaults_loaded] => 1
        [#tree] => 
        [#parents] => Array
            (
                [0] => b
            )

        [#array_parents] => Array
            (
                [0] => b
            )

        [#weight] => 0.002
        [#processed] => 
        [#attributes] => Array
            (
            )

        [#title_display] => before
        [#id] => edit-b--4
        [#name] => b_literal
        [#value] => 
        [#needs_validation] => 1
    ) 
```

Form_state （第二次不正确执行，之后每次）：

```
[triggering_element] => Array
    (
        [#type] => submit
        [#value] => Submit
        [#weight] => 100
        [#attributes] => Array
            (
                [class] => Array
                    (
                        [0] => btn
                        [1] => btn-primary
                    )

            )

        [#after_build] => Array
            (
                [0] => _load_assets_b_select
            )

        [#input] => 1
        [#name] => op
        [#button_type] => submit
        [#executes_submit_callback] => 1
        [#limit_validation_errors] => 
        [#process] => Array
            (
                [0] => ajax_process_form
            )

        [#theme_wrappers] => Array
            (
                [0] => button
            )

        [#defaults_loaded] => 1
        [#tree] => 
        [#parents] => Array
            (
                [0] => submit
            )

        [#array_parents] => Array
            (
                [0] => submit
            )

        [#processed] => 
        [#required] => 
        [#title_display] => before
        [#id] => edit-submit--2
    )

[clicked_button] => Array
    (
        [#type] => submit
        [#value] => Submit
        [#suffix] => </div></section>
        [#weight] => 100
        [#attributes] => Array
            (
                [class] => Array
                    (
                        [0] => btn
                        [1] => btn-primary
                    )

            )

        [#after_build] => Array
            (
                [0] => _load_assets_b_select
            )

        [#input] => 1
        [#name] => op
        [#button_type] => submit
        [#executes_submit_callback] => 1
        [#limit_validation_errors] => 
        [#process] => Array
            (
                [0] => ajax_process_form
            )

        [#theme_wrappers] => Array
            (
                [0] => button
            )

        [#defaults_loaded] => 1
        [#tree] => 
        [#parents] => Array
            (
                [0] => submit
            )

        [#array_parents] => Array
            (
                [0] => submit
            )

        [#processed] => 
        [#required] => 
        [#title_display] => before
        [#id] => edit-submit--2
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:45:35.437

我认为当您使用 jquery 自动完成时存在问题。而不是使用`#autocomplete_path`Drupal 7 Form API中的Given，或使用以下[链接](http://timonweb.com/how-create-ajax-autocomplete-textfield-drupal-7)可能会解决您的问题`#autocomplete_path`

# c# - 在 C# 中使用 N 个线程处理队列的简单方法？

> ID：12375549
> 
> 赞同：7
> 
> 时间：2012-09-11T18:15:23.697
> 
> 标签：c#, multithreading

我有一个帐号列表。Foreach 帐号我需要调用方法`ProcessAccount`。将有大约 150,000 个帐户需要处理，每个帐户可能需要 0.5 到 2 秒来处理。

我想以某种方式设置线程，以便我可以一次处理 4 个帐户。

我可以为此使用一个简单的模式吗？

我想做的是启动 4 个线程来处理前 4 个帐户，然后随着每个单独的线程完成，启动另一个具有下一个帐户的线程，直到所有帐户都已处理。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T18:16:41.423

这很容易使用 TPL（任务并行库）处理。它看起来像

```
ParallelOptions options = new ParallelOptions() { MaxDegreeOfParallelism = 4 };
Parallel.ForEach(accounts, options, a =>
{
    ProcessAccount(a);
}); 
```

[http://msdn.microsoft.com/en-us/library/dd782721.aspx](http://msdn.microsoft.com/en-us/library/dd782721.aspx)

请注意，TPL 可能会决定运行少于 4 个并发线程，但不会根据指定的选项运行超过 4 个。它可能会这样做，例如，如果它确定提供的 lamda（调用 ProcessAccount）受 CPU 限制并且系统上的 CPU 内核少于 4 个。通常，特别是在 .NET 4.5 中，TPL 对要使用的线程数做出了非常好的决定。

正如@Servy 在评论中指出的那样，除非您有非常具体的理由将代码限制为 4 个线程，否则最好让 TPL 自行整理要使用多少个线程。这样，如果相同的代码在 2018 年运行在 128 核处理器上，那么在你转移到其他东西很久之后，它就可以免费使用所有 128 核）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:18:44.210

使用 PLinq：

```
var accounts = //some 150,000 account numbers
accounts.AsParallel().ForAll(ProcessAccount); 
```

或者，如果需要其他参数，请使用 lambda 表达式：

```
accounts.AsParallel().ForAll(account => ProcessAccount(account, argument2, argument3)); 
```

# facebook - 我本地环境中的 Python/Heroku Facebook 应用程序无限循环

> ID：12375550
> 
> 赞同：5
> 
> 时间：2012-09-11T18:15:28.313
> 
> 标签：facebook, authentication, heroku, localhost, infinite-loop

所以我按照所有步骤创建了一个 Facebook/Heroku 应用程序，它在 [http://lokalt.herokuapp.com/上运行良好](http://lokalt.herokuapp.com/)

然后我设置了一个本地环境，但效果不佳，它基本上是在登录时无限循环，并且似乎永远无法将访问令牌获取到 python 应用程序（get_token() 似乎返回 None），我'我很确定我收到了来自 facebook 服务器的响应，尽管我使用了 console.log() 并得到了一个响应对象。

我没有 SSL 在本地工作，但大多数其他事情应该可以工作。

# css - 如何更改 GWT celltable 中的特定列样式

> ID：12375562
> 
> 赞同：2
> 
> 时间：2012-09-11T18:16:06.363
> 
> 标签：css, gwt

我正在尝试将特定列设为蓝色。

为此我正在使用

```
clientsTable.addColumnStyleName(3,"nameColumn"); 
```

CSS是：

```
nameColumn {
   color:blue;
} 
```

但它什么也没做，而如果我将我的 CSS 更改为此

```
nameColumn {
   background-color:blue;
} 
```

它有效，即使标题颜色变为红色，但为什么不改变文本颜色？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:59:45.770

`addColumnStyleName`将 CSS 类添加到`<col>`DOM 中的元素，并且只有[少数 CSS 属性](http://www.w3.org/TR/CSS21/tables.html#columns)适用于那里（另请参阅[浏览器兼容性表](http://www.quirksmode.org/css/columns.html)）

您想改为将 CSS 类应用于列中的每个单元格，使用[`Column#setCellStyleNames()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/Column.html#setCellStyleNames%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:26:00.123

尝试

```
.nameColumn {
    color: blue !important;
} 
```

# php - 从输出中排除当前帖子

> ID：12375566
> 
> 赞同：0
> 
> 时间：2012-09-11T18:16:13.030
> 
> 标签：php, wordpress, post, widget

我编写了一个 Wordpress 小部件，它显示来自自定义标签的自定义数量的帖子（随意使用它）。这是代码：

```
 <?php 
    $category = get_the_category();
    $current_category = $category[0]->term_id;
    ?>

    <?php query_posts("showposts=".$posts_number."&cat=".$current_category."&tag=featured"); // the tag
    if (have_posts()) : while (have_posts()) : the_post(); ?>
        <div class="block-post clearfix">
            <?php
                $thumb = '';
                $width = 287;
                $height = 162;
                $classtext = 'post-image';
                $titletext = get_the_title();
                $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Recent');
                $thumb = $thumbnail["thumb"];
            ?>

            <?php if($thumb <> '' && get_option('aggregate_thumbnails_index') == 'on') { ?>
                <div class="thumb">
                    <a href="<?php the_permalink(); ?>">
                        <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
                        <span class="overlaybig"></span>
                    </a>
                </div>  <!-- end .post-thumbnail -->
            <?php } ?>

            <div class="recenttitle"><h3 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3></div>
        </div> <!-- end .block-post -->
    <?php endwhile; endif; wp_reset_query(); ?> 
```

我的问题是，如何从输出中排除当前帖子？问题是它不检查用户当前是否正在查看它输出的任何帖子。**如何调整代码以跳过用户所在的当前帖子**？

我很确定这是一个简单的解决方法，但我现在迷路了。

**更新：**这是整个小部件的代码，包括 maiorano84 提供的修复：

```
<?php class ArtificePinned extends WP_Widget
{
    function ArtificePinned(){
        $widget_ops = array('description' => 'Displays posts filtered by current category and the tag pinned');
        $control_ops = array('width' => 400, 'height' => 300);
        parent::WP_Widget(false,$name='Artifice Pinned',$widget_ops,$control_ops);
    }

  /* Displays the Widget in the front-end */
    function widget($args, $instance){
        extract($args);
        $title = apply_filters('widget_title', empty($instance['title']) ? ' ' : $instance['title']);
        $posts_number = empty($instance['posts_number']) ? '' : (int) $instance['posts_number'];

        echo $before_widget;

        if ( $title )
        echo $before_title . $title . $after_title;
?>

<?php 
$category = get_the_category();
$current_category = $category[0]->term_id;
$qarr = array(
    'posts_per_page' => $posts_number,
    'cat' => $current_category,
    'tag' => 'featured',
    'post__not_in' => get_the_ID()
);
$q = new WP_Query($qarr);
if($q->have_posts()) : while ($q->have_posts()) : $q->the_post();
?>
    <div class="block-post clearfix">
        <?php
            $thumb = '';
            $width = 287;
            $height = 162;
            $classtext = 'post-image';
            $titletext = get_the_title();
            $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Recent');
            $thumb = $thumbnail["thumb"];
        ?>

        <?php if($thumb <> '' && get_option('aggregate_thumbnails_index') == 'on') { ?>
            <div class="thumb">
                <a href="<?php the_permalink(); ?>">
                    <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
                    <span class="overlaybig"></span>
                </a>
            </div>  <!-- end .post-thumbnail -->
        <?php } ?>

        <div class="recenttitle"><h3 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3></div>
    </div> <!-- end .block-post -->
<?php endwhile; endif;?>

<?php
        echo $after_widget;
    }

  /*Saves the settings. */
    function update($new_instance, $old_instance){
        $instance = $old_instance;
        $instance['title'] = stripslashes($new_instance['title']);
        $instance['posts_number'] = (int) $new_instance['posts_number'];

        return $instance;
    }

  /*Creates the form for the widget in the back-end. */
    function form($instance){
        //Defaults
        $instance = wp_parse_args( (array) $instance, array('title'=>' ', 'posts_number'=>'7') );

        $title = esc_attr($instance['title']);
        $posts_number = (int) $instance['posts_number'];

        # Title
        echo '<p><label for="' . $this->get_field_id('title') . '">' . 'Title:' . '</label><input class="widefat" id="' . $this->get_field_id('title') . '" name="' . $this->get_field_name('title') . '" type="text" value="' . $title . '" /></p>';
        # Number Of Posts
        echo '<p><label for="' . $this->get_field_id('posts_number') . '">' . 'Number of Posts:' . '</label><input class="widefat" id="' . $this->get_field_id('posts_number') . '" name="' . $this->get_field_name('posts_number') . '" type="text" value="' . $posts_number . '" /></p>';
        # Category ?>

        <?php
    }

}// end ArtificePinned class

function ArtificePinnedInit() {
  register_widget('ArtificePinned');
}

add_action('widgets_init', 'ArtificePinnedInit');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:27:24.757

不要使用 query_posts，因为它的目的是修改默认的 Wordpress 循环。请改用[WP 查询](http://codex.wordpress.org/Class_Reference/WP_Query)。

要回答您的问题，解决方案非常简单。我冒昧地使用 WP_Query 给你这个例子：

```
<?php
$qarr = array(
    'posts_per_page' => $posts_number,
    'cat' => $current_category,
    'tag' => 'featured',
    'post__not_in' => get_the_ID()
);
$q = new WP_Query($qarr);
if($q->have_posts()) : while ($q->have_posts()) : $q->the_post();
?> 
```

请记住，我还将“showposts”更改为“posts_per_page”，因为在 2.1 版中不推荐使用 showposts

**更新**：您的代码现在应该如下所示：

```
<?php 
$category = get_the_category();
$current_category = $category[0]->term_id;
$qarr = array(
    'posts_per_page' => $posts_number,
    'cat' => $current_category,
    'tag' => 'featured',
    'post__not_in' => get_the_ID()
);
$q = new WP_Query($qarr);
if($q->have_posts()) : while ($q->have_posts()) : $q->the_post();
?>
    <div class="block-post clearfix">
        <?php
            $thumb = '';
            $width = 287;
            $height = 162;
            $classtext = 'post-image';
            $titletext = get_the_title();
            $thumbnail = get_thumbnail($width,$height,$classtext,$titletext,$titletext,false,'Recent');
            $thumb = $thumbnail["thumb"];
        ?>

        <?php if($thumb <> '' && get_option('aggregate_thumbnails_index') == 'on') { ?>
            <div class="thumb">
                <a href="<?php the_permalink(); ?>">
                    <?php print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, $classtext); ?>
                    <span class="overlaybig"></span>
                </a>
            </div>  <!-- end .post-thumbnail -->
        <?php } ?>

        <div class="recenttitle"><h3 class="title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3></div>
    </div> <!-- end .block-post -->
<?php endwhile; endif;?> 
```

**使固定：**

问题源于此：

```
'post__not_in' => get_the_ID() 
```

问题是 'post__not_in' 需要一个数组。不是整数。我很抱歉，那是我的错误。请将该行代码更改为：

```
'post__not_in' => array(get_the_ID()) 
```

你应该很好。

# powershell - 为什么我的 PowerShell 函数的参数显示为空/空白？

> ID：12375567
> 
> 赞同：4
> 
> 时间：2012-09-11T18:16:18.603
> 
> 标签：powershell, scripting, powershell-2.0

一时兴起，为了学习 PowerShell，我知道自己落后了，我决定编写一个超级简单的脚本来使用 MSBuild 清理代码中的一堆解决方案，然后用一组特定的参数构建它们。这是脚本：

```
$sourceDir = Split-Path -Path $MyInvocation.MyCommand.Definition -Parent
$cleanArgs = '/t:clean /verbosity:q /nologo /P:Configuration=Debug'
$buildArgs = '/verbosity:q /nologo /P:Platform="Any CPU";Configuration=Debug'
$solutions = @("asdf.sln","qwer.sln","zxcv.sln","yuio.sln","hjkl.sln","nm.sln")

function buildWithArgs([string[]]$solutionsToBuild = @(), [string]$args = 'default')
{
    Write-Host args: $args
    foreach($sln in $solutionsToBuild)
    {
        & $env:WINDIR\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe "$sourceDir\$sln $args" | Out-Default
    }
}

buildWithArgs $solutions $buildArgs
buildWithArgs $solutions $cleanArgs 
```

现在，我的问题是函数“buildWithArgs”不尊重 $args 参数，当我运行或调试脚本时，无论我传入什么参数，该参数始终为空。但是，$solutionsToBuild 参数完美无缺。我有不正确的语法吗？即使我的 $cleanArgs 字符串格式不正确或未转义，我什至无法使该函数与“asdf”之类的简单字符串一起使用，因为当我运行它时 $args 始终为空。感谢您可以为肯定是一些小而愚蠢的错误提供任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:34:07.703

首先，`$args`是 PowerShell 中的一个特殊的内置参数，它表示函数的所有参数。这样做的副作用之一是您无法在 ISE 调试器中看到它的值。尝试将其名称更改为`MSBuildArgs`.

确保将`buildArgs`和定义`cleanArgs`为数组。您将它们定义为一个字符串。这样做是为了可以使用 PowerShell 的 splat 运算符（`@`而不是`$`在引用变量时），它将数组中的每个参数作为参数发送给命令。

最后，您不需要引用存储在变量中的参数。PowerShell 将为您做任何报价。

进行这些更改后，您将拥有如下内容：

```
$sourceDir = Split-Path -Path $MyInvocation.MyCommand.Definition -Parent
$cleanArgs = @('/t:clean','/verbosity:q','/nologo','/P:Configuration=Debug')
$buildArgs = @('/verbosity:q','/nologo','/P:Platform="Any CPU";Configuration=Debug')
$solutions = @("asdf.sln","qwer.sln","zxcv.sln","yuio.sln","hjkl.sln","nm.sln")

function buildWithArgs([string[]]$solutionsToBuild = @(), [string[]]$MSBuildArgs= 'default')
{
    Write-Host args: $args
    foreach($sln in $solutionsToBuild)
    {
        $msbuildPath = Join-Path $env:WINDIR Microsoft.NET\Framework64\v4.0.30319\msbuild.exe -Resolve
        & $msbuildPath (Join-Path $sourceDir $sln -Resolve) @MSBuildArgs | `
            Out-Default
    }
}

buildWithArgs $solutions $buildArgs
buildWithArgs $solutions $cleanArgs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:25:21.897

`$args`是 powershell 函数中的一个[特殊的自动变量](http://ss64.com/ps/syntax-automatic-variables.html)。它包含一个参数数组，这些参数未绑定到函数的声明参数。由于运气不佳/缺乏经验，您碰巧将声明的参数之一命名为相同的名称，这将导致问题。

如果您将参数重命名为其他名称，例如`$BuildArgs`，它应该被正确绑定。

但是请注意，您当前的代码将使用由解决方案路径和 args 组成的单个参数执行 msbuild。这不是使用*多个*参数调用 msbuild 的语法。如果这会给您带来问题，我建议您打开另一个问题或在线搜索该特定问题，这样这个问题就不会变得太大。

# sql - 无法展开 SQL 数据库以查看表

> ID：12375568
> 
> 赞同：0
> 
> 时间：2012-09-11T18:16:28.197
> 
> 标签：sql, visual-studio-2010, ssms

出于某种原因，我无法使用 SSMS 扩展我的一个 SQL 数据库以查看表，但如果我使用 Visual Studio 10 与它建立数据库连接，我可以扩展它。

有谁知道可能是什么原因造成的，我该如何解决？

# php - 在过去 7 天内获取注册用户

> ID：12375571
> 
> 赞同：0
> 
> 时间：2012-09-11T18:16:44.947
> 
> 标签：php, mysql, sql

我试图在过去 7 天内获得注册用户，所以我有 users 表

```
+-----+------------+--------------+
| ID  | USERNAME   | ADDED        |
+-----+------------+--------------+
|  1  | Vlad       | 1347386878   |
+-----+------------+--------------+
|  2  | Test       | 1347386578   |
+-----+------------+--------------+ 
```

我在sql下面试过，但输出是空的，没有错误......我需要一些从今天到7天前的东西

```
SELECT date(added), COUNT(id) AS num_registered 
FROM users 
WHERE added < CURDATE() 
AND added > CURDATE() - INTERVAL 7 DAYS 
GROUP BY date(added) LIMIT 1, 7 
```

任何建议如何做到这一点？

**编辑：**

```
$mysql_query = mysql_query('SELECT added, DATE(added), COUNT(id) AS num_reg FROM users_test WHERE added < (UNIX_TIMESTAMP() - (7 * 24 * 60 * 60)) GROUP BY DATE(added) LIMIT 1, 7') or die(mysql_error());
while($row = mysql_fetch_array($mysql_query))
{
    $month = date('F', $row['added']);
    $day = date('j', $row['added']);
    $textbuilder .= '
    <li>
        <a href="#" title="'.$month.' '.$day.', '.$row['num_reg'].' registered">
            <span class="label">'.$day.'</span>
            <span class="count" style="height: 20%">('.$row['num_reg'].')</span>
        </a>
    </li>';
} 
```

**桌子：**

```
CREATE TABLE IF NOT EXISTS `users_test` (
  `id` int(10) NOT NULL,
  `username` varchar(60) NOT NULL,
  `added` int(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `users_test` (`id`, `username`, `added`) VALUES
(1, 'Test', 1347303641),
(2, 'Test1', 1347217241),
(3, 'Test2', 1347130841),
(4, 'Test3', 1347044441); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:22:41.727

`ADDED`是一个 UNIX 时间戳值，所以只需执行以下操作：

```
SELECT
    DATE(Added), Count()
FROM
    Users
WHERE
    Added > ( UNIX_TIMESTAMP() - ( 7 * 24 * 60 * 60 ) )
GROUP BY
    DATE(Added)
LIMIT
    1, 7 
```

请注意，这在您处理闰秒的情况下不起作用，因为它使用一天的近似定义为`24*60*60`，但我想您可以忍受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:21:37.877

您需要将时间戳转换为`datetime`using `FROM_UNIXTIME()`。由于发生了大量转换，因此使用派生表会更容易：

```
SELECT DATE(Added), COUNT(id) AS num_registered FROM
    (SELECT id, username, FROM_UNIXTIME(added) AS added FROM users) u
WHERE added < CURDATE()
    AND added > CURDATE() - INTERVAL 7 DAYS
GROUP BY DATE(added) LIMIT 1, 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:17:43.630

```
SELECT FROM_UNIXTIMESTAMP(added, ,  '%b %D, %Y'), COUNT(id) AS num_registered 
FROM users 
WHERE added > unix_timestamp() - ( 7 - 86400 )
GROUP BY FROM_UNIXTIMESTAMP(added, ,  '%b %D, %Y') 
```

# asp.net - ObjectContext 实例已被释放，不能再用于添加额外下拉列表时需要连接的操作

> ID：12375572
> 
> 赞同：0
> 
> 时间：2012-09-11T18:16:47.300
> 
> 标签：asp.net, vb.net, entity-framework, entity-framework-4

我有以下代码：

```
 If Page.IsPostBack = False Then
        ' If prospect is coming from unique url
        Dim prospect_url As String = Page.RouteData.Values("value")
        ' Save prospect_url into session variable
        Session("prospect_url") = prospect_url
        Using dbContext As IRFEntities = New IRFEntities
            ' Prepopulate the states dropdown.
            Dim getStates = (From p In dbContext.IRF_States _
                             Order By p.name _
                            Select p)
            ddlState.DataSource = getStates
            ddlState.DataTextField = "name"
            ddlState.DataValueField = "id"
            ddlState.DataBind()
            ' Grab info. about prospect based on unique url.
            Dim getProspect = (From p In dbContext.IRF_Prospects _
                              Where p.url = prospect_url _
                              Select p).FirstOrDefault
            ' If they have a record...
            If getProspect IsNot Nothing Then
                'If IsDBNull(getProspect.user_id) Then
                If getProspect.user_id Is Nothing Then
                    ' Prepopulate the form with their information.
                    ' These must have a value, so we need to make sure that no column is null in the database.
                    txtFirst.Text = getProspect.first_name
                    txtLast.Text = getProspect.last_name
                    txtAddress.Text = getProspect.address
                    txtCity.Text = getProspect.city
                    ddlState.SelectedValue = getProspect.state
                    txtZip.Text = getProspect.zip
                    txtPhone.Text = getProspect.phone
                    txtEmail.Text = getProspect.email_address
                    txtYearEnrolling.Text = getProspect.enrolling_in
                Else
                    ' Redirect them to login.
                    Response.Redirect("login.aspx")
                End If
            End If
        End Using
    End If 
```

然后我直接在 ddlState.DataBind() 下面添加了以下内容：

```
 ' Prepopulate the programs dropdown.
             Dim getPrograms = (From p In dbContext.IRF_Program _
                              Order By p.name _
                             Select p)
            ddlProgram.DataSource = getPrograms
            ddlProgram.DataTextField = "name"
            ddlProgram.DataValueField = "id"
            ddlState.DataBind() 
```

现在我得到错误：

> ObjectContext 实例已被释放，不能再用于需要连接的操作

如果我注释掉插入的代码，代码就可以工作。为什么这段代码会导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:19:10.163

你丢失了这个对象：

`dbContext`

那就是这个对象的资源（包括连接操作）已经被处理和清理了。如果您需要数据绑定另一个下拉列表，您可以重新创建对象。

```
Dim dbContext as IRFEntities=Nothing

 Using dbContext= New IRFEntities
   //perform first databind
 End Using

 Using dbContext = New IRFEntities
  //code to perform second databind
 End Using 
```

# octave - 八度箱线图轴

> ID：12375590
> 
> 赞同：0
> 
> 时间：2012-09-11T18:17:58.670
> 
> 标签：octave, boxplot

我想使用八度在一个图中创建多个箱线图。我尝试设置关联每个数据的 x 轴。这是我的代码

```
x = [1, 2, 4];
y1 = [6, 2, 3];
y2 = [1, 7, 3];
y3 = [1, 9, 2];

boxplot ({y1,y2,y3});
set(gca,'XTickLabel',x);
refresh; 
```

但结果看起来很奇怪。轴出现 3 次。我想查看数据 y1 的 x 轴 1、数据 y2 的 2 和数据 y3 的 4 根据[Octave 文档](http://octave.sourceforge.net/statistics/function/boxplot.html)，我找不到如何设置轴。我发现Matlab可以做到这一点:(请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:27:39.727

在`set(gca,'XTickLabel',x);`您必须添加`set(gca, 'xtick', [1:3]);`. 这可以确保在这些数字被手动标签覆盖之前，图中的每个（并且只有每个）框都被分配了一个 x 轴编号。

这是完整的代码：

```
x = [1, 2, 4];
y1 = [6, 2, 3];
y2 = [1, 7, 3];
y3 = [1, 9, 2];

boxplot ({y1,y2,y3});
set(gca, 'xtick', [1:3]);
set(gca,'XTickLabel',x);
refresh; 
```

# c++ - 向量的向量来创建矩阵

> ID：12375591
> 
> 赞同：71
> 
> 时间：2012-09-11T18:18:05.037
> 
> 标签：c++, vector, matrix

我正在尝试输入二维矩阵的尺寸。然后使用用户输入来填充这个矩阵。我尝试这样做的方法是通过向量（向量的向量）。但是每当我尝试读取数据并将其附加到矩阵时，我都会遇到一些错误。

```
//cin>>CC; cin>>RR; already done
vector<vector<int> > matrix;
for(int i = 0; i<RR; i++)
{
    for(int j = 0; j<CC; j++)
    {
    cout<<"Enter the number for Matrix 1";
         cin>>matrix[i][j];
    }
} 
```

每当我尝试这样做时，它都会给我一个下标超出范围的错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2012-09-11T20:33:20.767

在访问任何元素之前，您必须将向量的向量初始化为适当的大小。你可以这样做：

```
// assumes using std::vector for brevity
vector<vector<int>> matrix(RR, vector<int>(CC)); 
```

这将创建一个`RR`大小`CC`向量的向量，用 填充`0`。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-09-11T18:19:57.500

事实上，你的向量的两个维度都是 0。

相反，将向量初始化为：

```
vector<vector<int> > matrix(RR);
for ( int i = 0 ; i < RR ; i++ )
   matrix[i].resize(CC); 
```

这将为您`RR * CC`提供所有元素设置为的维度矩阵`0`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-11T18:25:18.513

我不熟悉 c++，但快速查看文档表明这应该可以工作：

```
//cin>>CC; cin>>RR; already done
vector<vector<int> > matrix;
for(int i = 0; i<RR; i++)
{
    vector<int> myvector;
    for(int j = 0; j<CC; j++)
    {
        int tempVal = 0;
        cout<<"Enter the number for Matrix 1";
        cin>>tempVal;
        myvector.push_back(tempVal);
    }
    matrix.push_back(myvector);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-26T21:26:50.177

假设我们有以下类：

```
#include <vector>

class Matrix {
 private:
  std::vector<std::vector<int>> data;
}; 
```

首先，我想建议您实现一个默认构造函数：

```
#include <vector>

class Matrix {
 public:
  Matrix(): data({}) {}

 private:
  std::vector<std::vector<int>> data;
}; 
```

这时候我们可以如下创建Matrix实例：

```
Matrix one; 
```

下一个战略步骤是实现一个`Reset`方法，该方法采用两个整数参数，分别指定矩阵的新行数和列数：

```
#include <vector>

class Matrix {
 public:
  Matrix(): data({}) {}

  Matrix(const int &rows, const int &cols) {
    Reset(rows, cols);
  }

  void Reset(const int &rows, const int &cols) {
    if (rows == 0 || cols == 0) {
      data.assign(0, std::vector<int>(0));
    } else {
      data.assign(rows, std::vector<int>(cols));
    }
  }

 private:
  std::vector<std::vector<int>> data;
}; 
```

此时，该`Reset`方法将 2D 矩阵的维度更改为给定的维度并重置其所有元素。稍后让我告诉你为什么我们可能需要这个。

好吧，我们可以创建*并初始化*我们的矩阵：

```
Matrix two(3, 5); 
```

让我们为我们的矩阵添加信息方法：

```
#include <vector>

class Matrix {
 public:
  Matrix(): data({}) {}

  Matrix(const int &rows, const int &cols) {
    Reset(rows, cols);
  }

  void Reset(const int &rows, const int &cols) {
    data.resize(rows);
    for (int i = 0; i < rows; ++i) {
      data.at(i).resize(cols);
    }
  }

  int GetNumRows() const {
    return data.size();
  }

  int GetNumColumns() const {
    if (GetNumRows() > 0) {
      return data[0].size();
    }

    return 0;
  }

 private:
  std::vector<std::vector<int>> data;
}; 
```

这时候我们可以得到一些琐碎的矩阵调试信息：

```
#include <iostream>

void MatrixInfo(const Matrix& m) {
  std::cout << "{ \"rows\": " << m.GetNumRows()
            << ", \"cols\": " << m.GetNumColumns() << " }" << std::endl;
}

int main() {
  Matrix three(3, 4);
  MatrixInfo(three);
} 
```

此时我们需要的第二个类方法是`At`. 我们的私有数据的一种吸气剂：

```
#include <vector>

class Matrix {
 public:
  Matrix(): data({}) {}

  Matrix(const int &rows, const int &cols) {
    Reset(rows, cols);
  }

  void Reset(const int &rows, const int &cols) {
    data.resize(rows);
    for (int i = 0; i < rows; ++i) {
      data.at(i).resize(cols);
    }
  }

  int At(const int &row, const int &col) const {
    return data.at(row).at(col);
  }

  int& At(const int &row, const int &col) {
    return data.at(row).at(col);
  }

  int GetNumRows() const {
    return data.size();
  }

  int GetNumColumns() const {
    if (GetNumRows() > 0) {
      return data[0].size();
    }

    return 0;
  }

 private:
  std::vector<std::vector<int>> data;
}; 
```

常量`At`方法获取行号和列号，并返回相应矩阵单元格中的值：

```
#include <iostream>

int main() {
  Matrix three(3, 4);
  std::cout << three.At(1, 2); // 0 at this time
} 
```

`At`具有相同参数的第二个非常量方法返回对相应矩阵单元格中值的*引用：*

```
#include <iostream>

int main() {
  Matrix three(3, 4);
  three.At(1, 2) = 8;
  std::cout << three.At(1, 2); // 8
} 
```

最后让我们实现`>>`运算符：

```
#include <iostream>

std::istream& operator>>(std::istream& stream, Matrix &matrix) {
  int row = 0, col = 0;

  stream >> row >> col;
  matrix.Reset(row, col);

  for (int r = 0; r < row; ++r) {
    for (int c = 0; c < col; ++c) {
      stream >> matrix.At(r, c);
    }
  }

  return stream;
} 
```

并测试它：

```
#include <iostream>

int main() {
  Matrix four; // An empty matrix

  MatrixInfo(four);
  // Example output:
  //
  // { "rows": 0, "cols": 0 }

  std::cin >> four;
  // Example input
  //
  // 2 3
  // 4 -1 10
  // 8 7 13

  MatrixInfo(four);
  // Example output:
  //
  // { "rows": 2, "cols": 3 }
} 
```

随意添加超出范围检查。我希望这个例子对你有帮助:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-27T11:44:19.443

试试这个。`m = row, n = col`

```
vector<vector<int>> matrix(m, vector<int>(n));

for(i = 0;i < m; i++)
{
   for(j = 0; j < n; j++)
   {
      cin >> matrix[i][j];
   }
   cout << endl;
}
cout << "::matrix::" << endl;
for(i = 0; i < m; i++)
{
    for(j = 0; j < n; j++)
    {
        cout << matrix[i][j] << " ";
    }
    cout << endl;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-09T11:59:07.967

Vector 需要在用作`cin>>v[i][j]`. 即使它是一维向量，它仍然需要初始化，[请参阅此链接](https://ide.geeksforgeeks.org/LYDyAz2flg)

初始化后不会报错，[看这个链接](https://ide.geeksforgeeks.org/CCARuDM1ju)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-29T20:16:57.897

您初始化的是*vectors的向量*，因此您必须在示例中命名为 matrix**的原始向量****中包含一个要插入的向量**（向量术语中的“Pushed”） 。

 **还有一件事，您不能使用运算符“cin”直接在向量中插入值。使用一个接受输入的变量，然后将其插入向量中。

请试试这个：

```
int num;
for(int i=0; i<RR; i++){

      vector<int>inter_mat;       //Intermediate matrix to help insert(push) contents of whole row at a time

      for(int j=0; j<CC; j++){
           cin>>num;             //Extra variable in helping push our number to vector
           vin.push_back(num);   //Inserting numbers in a row, one by one 
          }

      v.push_back(vin);          //Inserting the whole row at once to original 2D matrix 
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-02T02:59:35.100

我为此做了这门课。当添加更多项目时，它会产生一个可变大小的矩阵（可扩展）

'''

```
#pragma once
#include<vector>
#include<iostream>
#include<iomanip>
using namespace std;
template <class T>class Matrix
{
public:
    Matrix() = default;
    bool AddItem(unsigned r, unsigned c, T value)
    {
        if (r >= Rows_count)
        {
            Rows.resize(r + 1);
            Rows_count = r + 1;
        }
        else
        {
            Rows.resize(Rows_count);
        }
        if (c >= Columns_Count )
        {
            for (std::vector<T>& row : Rows)
            {
                row.resize(c + 1);
            }
            Columns_Count = c + 1;
        }
        else
        {
            for (std::vector<T>& row : Rows)
            {
                row.resize(Columns_Count);
            }
        }
        if (r < Rows.size())
            if (c < static_cast<std::vector<T>>(Rows.at(r)).size())
            {
                (Rows.at(r)).at(c) = value;
            }
            else
            {
                cout << Rows.at(r).size() << " greater than " << c << endl;
            }
        else
            cout << "ERROR" << endl;
        return true;
    }
    void Show()
    {
        std::cout << "*****************"<<std::endl;
        for (std::vector<T> r : Rows)
        {
            for (auto& c : r)
                std::cout << " " <<setw(5)<< c;
            std::cout << std::endl;
        }
        std::cout << "*****************" << std::endl;
    }
    void Show(size_t n)
    {
        std::cout << "*****************" << std::endl;
        for (std::vector<T> r : Rows)
        {
            for (auto& c : r)
                std::cout << " " << setw(n) << c;
            std::cout << std::endl;
        }
        std::cout << "*****************" << std::endl;
    }
//  ~Matrix();
public:
    std::vector<std::vector<T>> Rows;
    unsigned Rows_count;
    unsigned Columns_Count;
}; 
```

'''**

# c++ - 使用临时端口打开 Boost.Asio UDP 套接字

> ID：12375592
> 
> 赞同：2
> 
> 时间：2012-09-11T18:18:08.540
> 
> 标签：c++, sockets, udp, boost-asio

我正在开发一个应用程序，它将通过 UDP 从另一个本地服务接收 RTP 数据包。在协议的早期，我收到一条带有 IP 地址的消息，我将从该 IP 地址接收这些 RTP 数据包，但端口号将被指定为 0（零）......我将使用临时打开我的 UDP 套接字港口。我对给定消息的响应将包含我打开的实际端口，以便发件人知道将数据包定向到哪里。

我的网络库是带有`boost::asio`. 我在哪里可以找到有关如何在不指定非零端口（即使用临时端口）的情况下打开此类套接字的明确信息？在 boost 文档中搜索“短暂”并没有给我网络结果。

当然，我愿意看到一个实际的例子，但找到好的文档也很好。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:58:03.350

我会质疑使用这样的临时端口，但是...... - 你可以将你的 UDP 套接字绑定到 port `0`，然后[`local_endpoint()`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/basic_datagram_socket/local_endpoint.html)用来检索操作系统分配的实际端口。

# visual-studio-2010 - 在 Visual Studio 10 中加载 Visual Studio 12 项目

> ID：12375594
> 
> 赞同：1
> 
> 时间：2012-09-11T18:18:16.293
> 
> 标签：visual-studio-2010, visual-studio-2012

> **可能重复：**
> [将 Visual Studio 2012 导出为 2010 sln 格式](https://stackoverflow.com/questions/12356855/export-visual-studio-2012-to-2010-sln-format)

我最近切换到 VS12。不幸的是，前几天我的电脑崩溃了，当它在商店里时，我在一台没有 VS12 副本的机器上。当我尝试加载在 VS12 中创建的任何类库或控制台应用程序项目时，它说不兼容。

我可以对项目文件进行任何更新或更改以使其在 Visual Studio 2010 中加载吗？

我已经安装了 .net 4.5，但这似乎不起作用。

# android - 如何在视图中添加 AppWidget？

> ID：12375598
> 
> 赞同：1
> 
> 时间：2012-09-11T18:18:38.657
> 
> 标签：android, android-appwidget, homescreen

我想将默认搜索应用小部件添加到我的应用内的视图中。就像主屏幕一样，但没有任何拖动，我只希望工作区是 4x1 大。

我怎样才能做到这一点？我已经查看了启动器的来源，但它有很多需要理解和删除，因为我希望它尽可能简单......

我知道我可以像这样获取小部件的组件名称：

```
private ComponentName getSearchWidgetProvider() {
    SearchManager searchManager = (SearchManager) mContext.getSystemService(Context.SEARCH_SERVICE);
    ComponentName searchComponent = null;
    searchManager.getSearchableInfo(searchComponent);
    if (searchComponent == null) return null;
    return getProviderInPackage(searchComponent.getPackageName());
}

private ComponentName getProviderInPackage(String packageName) {
    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(mContext);
    List<AppWidgetProviderInfo> providers = appWidgetManager.getInstalledProviders();
    if (providers == null) return null;
    final int providerCount = providers.size();
    for (int i = 0; i < providerCount; i++) {
        ComponentName provider = providers.get(i).provider;
        if (provider != null && provider.getPackageName().equals(packageName)) {
            return provider;
        }
    }
    return null;
 } 
```

那么我怎样才能以最简单的方式将它添加到视图中（让我们说一个线性视图）......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-14T01:21:25.393

使用 AppWidgetHost。我实际上需要它来存储和读取小部件的包名。看，我们都帮忙了。AppWidgetHost 可以实现添加到 LnearLayout。如果我是你，我会使用RelativeLayout，因为RelativeLayout 允许自定义区域本身，如果你希望它居中，那么你可以。除非您在 RelativeLayout 中使用 LinearLayout。

以下是它的实现方式：

您可以编辑它并将其更改为您喜欢的方式。调用“appWidgetId”是为每个小部件提供的 int。您可以存储它，然后让您的应用程序检查存储的文件是否存在，读取它，将文本转换为字符串，然后将字符串转换为 int。

存储信息：

```
String path="/sdcard/widget.txt";
//You can change the path to whatever you want it to be
File f=new File(path);
try{
 FileWriter fw=new FileWriter(f);
 fw.write("whatever text");
 fw.flush();
 fw.close();
}catch(IOException e){
 e.printStackTrace();
} 
```

现在要读取文件，您必须调用 StringBuilder、BufferedReader 和 String 行来获取信息。

```
File f=new File("/sdcard/widget.txt");
//the path must be where you stored the files
StringBuilder sb=new StringBuilder();
try{
BufferedReader br=new BufferedReader(new FileReader(f));
String line;
while((line=br.readLine())!=null){
sb.append(line);
sb.append('\n');
}
br.close();
}catch(IOException e){
e.printStackTrace();
} 
```

现在您只需将文本转换为字符串：

```
String widId=sb.toStrng(); 
```

然后将该字符串转换为 int：

```
int wid=Integer.parseInt(widId); 
```

现在您在此代码中实现该 ID：

```
 public void createWidget(Intent data) {
    Bundle extras = data.getExtras();
    int appWidgetId = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, -1);
    AppWidgetProviderInfo appWidgetInfo = mAppWidgetManager.getAppWidgetInfo(appWidgetId);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(rl.getWidth(), rl.getHeight()/3);
    lp.topMargin = numWidgets * (rl.getHeight()/3);
    AppWidgetHostView hostView = mAppWidgetHost.createView(getActivity().getApplicationContext(), appWidgetId, appWidgetInfo);
    hostView.setAppWidget(widID,appWidgetInfo);
    rl.addView(hostView, lp);
    hostView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        }
    });
    numWidgets ++;
} 
```

这会将选定的小部件添加到布局中。

# jquery - 存储来自表单的用户输入并显示摘要

> ID：12375599
> 
> 赞同：0
> 
> 时间：2012-09-11T18:18:42.887
> 
> 标签：jquery, arrays, forms

我创建了一个表单，我想使用 jquery 将标签和用户输入的输入值存储到一个数组中。在表单的底部，有一个下一步按钮，而不是提交。当用户按下下一步时，他们应该会看到所有标签及其输入的摘要。HTML是这样的：

```
<div class="form-item">
    <label>Zip Code:</label>
    <input type="text" />
</div>

<div class="form-item">
    <label>Address:</label>
    <input type="text" />
</div> 
```

我相信解决这个问题的最好方法是循环遍历每个`div.form-item`使用`each()`，如下所示：

```
$(".form-item").each(function(){
     var label = $(this).find('label').text(); 
     var input = $(this).find('input').val();
}); 
```

我不确定如何使用唯一变量收集多个表单项。我希望这是完全动态的，所以无论有多少表单字段，它都会起作用。我将它们存储在数组中吗？解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:25:21.963

您可以使用`map`方法，还请注意您的类选择器不正确，您错过了`.`.

```
var arr = $('.form-item').map(function() {
               var lab = $('label', this).text();
               var val = $('input', this).val();
               return lab + val;
          }).get() 
```

[http://jsfiddle.net/b5Z6C/2/](http://jsfiddle.net/b5Z6C/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:25:33.977

您可以将其存储在一个数组中，例如：

```
var els = new Array();
$(".form-item").each(function(){
  els.push({
    label: $(this).find('label').text(), 
    value: $(this).find('input').val()});
}); 
```

稍后在代码中您可以执行以下操作：

```
for(var i in els){
  $('.where-you-want-it')
    .append('<p>'+els[i].label+'</p><span>'+els[i].value+'</span>');
} 
```

# windows-runtime - 为什么将 ManipulationDelta 事件处理程序添加到 Image 会阻止滚动？

> ID：12375602
> 
> 赞同：3
> 
> 时间：2012-09-11T18:18:57.353
> 
> 标签：windows-runtime

我在尝试将诸如捏缩放之类的功能添加到在 FlipView 内的 ScrollView 内具有 Image 控件的应用程序时遇到问题。Image 控件和 ScrollView 控件在 FlipView 的 ItemTemplate 中。

这个想法是，如果用户捏缩放图像，它将激活代码，该代码将在图像控件中创建并显示图像的放大版本。（本例中的 Image 控件包含一个 PDF 页面，因此我们需要更大版本的 PDF 页面，而不是 PDF 页面的放大和模糊视图）。

如果我将 ManipulationDelta 事件处理程序附加到图像，它将*捕获*由捏缩放手势产生的 ManipulationDelta 事件，然后我可以使用它来创建 PDF 缩放效果。但是......现在它不会捕捉滚动（拖动？）手势。或者更确切地说，这些也被 ManipulationDelta 事件处理程序捕获。我宁愿避免此时必须实现代码来以编程方式处理滚动。我是否有任何选项可以以某种方式冒泡（或“结束”？） ManipulationDelta 事件以处理滚动？我认为这已经发生了，事件会冒泡到 ScrollView，然后处理滚动。但它似乎不是那样发生的。

我在 ManipulationDelta 事件处理程序中将 e.Handled 设置为 false。并且 IMage 控件上的 ManipulationMode 设置为“All”。我试过“Scale”，但这没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T19:01:07.867

WinRT 中的 ScrollViewer 针对性能进行了优化，并在后台使用 DirectManpulation。这就是为什么同时从 ScrollViewer 滚动和其中的手势都很棘手的原因。

Rob Caplan（MS 员工）的这篇博文提供了更多信息：http: [//blogs.msdn.com/b/wsdevsol/archive/2013/02/16/where-did-all-my-gestures-go.aspx](http://blogs.msdn.com/b/wsdevsol/archive/2013/02/16/where-did-all-my-gestures-go.aspx)

> 不幸的是，如果应用程序既需要滚动又需要手势（例如，检测针对滚动的 CrossSlides），没有好的解决方案。在这种情况下，到处获取指针消息的唯一选择是在任何地方禁用直接操作，但这也会禁用滚动。要恢复它，应用程序需要检测滚动手势本身，然后使用 ScrollToHorizo​​ntalOffset 或 ScrollToVerticalOffset 或通过更新 SelectedIndex 将 ScrollViewer 导航到新位置。这很棘手，并且比让 ScrollViewer 完成它的工作要慢得多。如果可能的话，应该避免它。

希望这可以帮助

# r - R Package devtools 为 HTTR 包安装错误

> ID：12375603
> 
> 赞同：1
> 
> 时间：2012-09-11T18:19:00.280
> 
> 标签：r, github, httr

尝试在 R 中从 Github 安装 Hadley 的 HTTR 包时出现以下错误。

```
> library(devtools)
> install_github("httr")
Installing github repo(s) httr/master from hadley
Installing httr.zip from https://github.com/hadley/httr/zipball
Installing httr
* checking for file 'C:\Users\btibert\AppData\Local\Temp\RtmpSGjjYA\hadley-httr-ee0eafb/DESCRIPTION' ... OK
* preparing 'httr':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* looking to see if a 'data/datalist' file should be added
Error in if (any(update)) { : missing value where TRUE/FALSE needed
Execution halted
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-215~1.0/bin/i386/R" CMD build "C:\Users\btibert\AppData\Local\Temp\RtmpSGjjYA\hadley-httr-ee0eafb" --no-manual --no-vignettes' had status 1 
```

不知道我的问题是什么。这是我在 Windows 7 上的版本信息：

```
$platform
[1] "i386-pc-mingw32"

$arch
[1] "i386"

$os
[1] "mingw32"

$system
[1] "i386, mingw32"

$status
[1] ""

$major
[1] "2"

$minor
[1] "15.0"

$year
[1] "2012"

$month
[1] "03"

$day
[1] "30"

$`svn rev`
[1] "58871"

$language
[1] "R"

$version.string
[1] "R version 2.15.0 (2012-03-30)"

$nickname
[1] "" 
```

更新：建议尝试安装 devtools 的开发版本。我收到了这个错误：

```
> library(devtools)
> install_github("devtools")
Installing github repo(s) devtools/master from hadley
Installing devtools.zip from https://github.com/hadley/devtools/zipball
Installing devtools
* checking for file 'C:\Users\btibert\AppData\Local\Temp\RtmpsbYABm\hadley-devtools-77011a6/DESCRIPTION' ... OK
* preparing 'devtools':
* checking DESCRIPTION meta-information ... OK
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* building 'devtools_0.8.tar.gz'
cygwin warning:
  MS-DOS style path detected: C:/Users/btibert/AppData/Local/Temp/RtmpsbYABm/devtools_0.8.tar.gz
  Preferred POSIX equivalent is: /cygdrive/c/Users/btibert/AppData/Local/Temp/RtmpsbYABm/devtools_0.8.tar.gz
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames

Warning: invalid package 'Files/R/R-2.15.0/library'
Error: ERROR: cannot cd to directory 'C:/Program'
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-215~1.0/bin/i386/R" CMD INSTALL C:\Users\btibert\AppData\Local\Temp\RtmpsbYABm/devtools_0.8.tar.gz --library=C:/Program Files/R/R-2.15.0/library' had status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:13:38.967

您是否尝试过 devtools 的开发版本？

```
install_github("devtools")
install_github("httr") 
```

最近有同样的问题，这是修复...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-13T15:54:49.437

试试这个 install.packages("devtools")

否则试试这个并安装所需的包 apt-get -y install libcurl4-gnutls-dev apt-get -y build-dep libcurl4-gnutls-dev

# python - 绘制椭圆轨道

> ID：12375609
> 
> 赞同：5
> 
> 时间：2012-09-11T18:19:26.973
> 
> 标签：python, matplotlib, astronomy, orbital-mechanics

我正在尝试编写一个代码，使用椭圆 r=a(1-e^2)/(1+e*cos(theta)) 的方程来绘制对象的椭圆路径。我还希望将这些数据放入一个数组中以供其他用途。

```
from numpy import *#Imports Python mathematical functions library
import matplotlib.pyplot as plt #Imports plot library
from pylab import *

a = 5
e = 0.3
theta = 0
while theta <= 2*pi:
    r = (a*(1-e**2))/(1+e*cos(theta))
    print("r = ",r,"theta = ",theta)
    plt.polar(theta, r)
    theta += pi/180

plt.show() 
```

代码为 r 和 theta 吐出正确的值，但绘图是空白的。极坐标图窗口出现，但没有绘制任何内容。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T18:26:54.857

不要`plt.polar`为每个点调用一次。相反，调用它一次，将所有数据作为输入：

```
import numpy as np #Imports Python mathematical functions library
import matplotlib.pyplot as plt #Imports plot library
cos = np.cos
pi = np.pi

a = 5
e = 0.3
theta = np.linspace(0,2*pi, 360)
r = (a*(1-e**2))/(1+e*cos(theta))
plt.polar(theta, r)

print(np.c_[r,theta])

plt.show() 
```

![在此处输入图像描述](../Images/015e6abbc4edca07fbcd29017c3baa8b.png)

* * *

顺便说一句，numpy 可以将计算作为两行来进行，而不是使用 while 循环：

```
theta = np.linspace(0,2*pi, 360)   # 360 equally spaced values between 0 and 2*pi
r = (a*(1-e**2))/(1+e*cos(theta)) 
```

这将`theta`and定义`r`为 numpy 数组（而不是单个值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:22:31.900

我认为你需要`points.append([theta,r])`在最后做`plt.polar(points)`......这也是一个有点整洁的设计

```
from numpy import *#Imports Python mathematical functions library
import matplotlib.pyplot as plt #Imports plot library
from pylab import *

a = 5
e = 0.3
theta = 0

points = []
while theta <= 2*pi:
    r = (a*(1-e**2))/(1+e*cos(theta))
    print("r = ",r,"theta = ",theta)
    points.append((theta, r))
    theta += pi/180
#plt.polar(points) #this is cool but probably not what you want
plt.polar(*zip(*points))
plt.show() 
```

# ruby-on-rails - 在 Rails 中执行 Ruby 函数

> ID：12375610
> 
> 赞同：1
> 
> 时间：2012-09-11T18:19:30.997
> 
> 标签：ruby-on-rails

在我的索引视图中，我希望添加一个按钮来执行一个名为`myFunction(myArg)`. 该功能位于`behaviours/myRubyFile.rb`. 如何创建一个使用特定参数执行该功能的按钮。

编辑：现在我收到一个新错误

`The action 'my_func' could not be found for FunctionsController`

但是`my_func`在 FunctionsController 中定义了一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:30:42.360

通常，您希望从该按钮向服务器发送请求，因此服务器运行 myFunction。要实现这一点，请按照下列步骤操作：

1 - 确保 behavior/myRubyFile.rb 定义了一个模块：

```
module MyRubyModule
  def myFunction(arg)
    #Your logic here
  end
end 
```

2 - 在 routes.rb 中定义一个路由：

```
match '/my_func' => "functions#my_func" 
```

3 - 定义函数控制器：

```
class FunctionsController < ApplicationController
  include MyRubyModule

  def my_func
    arg = params[:arg]
    myFunction(arg)
  end
end 
```

4 - 在视图中创建一个按钮以将请求发送到服务器：

```
<%= button_to "Button", {:action => "my_func", :controller => "functions", :arg => "YOUR ARG HERE"} %> 
```

我没有测试过这段代码，但它应该可以解决问题。

编辑：添加`:arg => "YOUR ARG HERE"`到路线（Thnx nzifnab）

# python - 避免 Python 文件夹中的文件名重复

> ID：12375612
> 
> 赞同：2
> 
> 时间：2012-09-11T18:19:35.413
> 
> 标签：python, filenames

我想下载一些文件并将它们保存在一个文件夹中，文件名可能有一些重复，所以我想避免这种情况发生。我认为它需要一个自动命名系统，但现在我不知道如何制作它。我用`shutil`and`urllib2`来写我的函数。

这是我的代码的一部分：

```
path = 'C:/DL/Others/'+filename+file_ext
with open(path, 'wb') as fp:
    shutil.copyfileobj(req, fp) 
```

如您所知，我们可以通过`os.path.exists('path')`. 我想重命名我的文件并保存它们以避免使用模式重复名称，例如通过在文件名中添加一个数字。所以如果有 4 个具有相同名称的文件，“fname”，我想要这个模式中的 4 个文件：fname - fname(1) - fname(2) - fname(3)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:25:05.143

这样的事情可能是合理的：

```
path = 'c:/DL/Others/%s%s' % (filename, file_ext)
uniq = 1
while os.path.exists(path):
  path = 'c:/DL/Others/%s_%d%s' % (filename, uniq, file_ext)
  uniq += 1 
```

如果原始路径不存在，您将得到 no `_1`，但如果它确实存在，它将一直计数，直到找到一个免费的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:25:27.920

在创建文件时跟踪每个文件名的计数：

```
fname_counts = {}

# ... whatever generates filename and file_ext goes here...

if filename + file_ext in fname_counts:
     fname_counts[filename + file_ext] += 1
else:
     fname_counts[filename + file_ext] = 0

# now check if it's a dupe when you create the path
if fname_counts[filename + file_ext]:
     path = 'C:/DL/Others/%s_%s.%s' % (filename, fname_counts[filename + file_ext], file_ext)
else:
     path = 'C:/DL/Others/' + filename + file_ext 
```

使用两个重复项（“test.txt”）的示例：

```
>>> filenames_and_exts = [('test', '.txt'), ('test', '.txt'), ('test2', '.txt'), ('test', '.cfg'), ('different_name', '.txt')]
>>> fname_counts = {}
>>> for filename, file_ext in filenames_and_exts:
    if filename + file_ext in fname_counts:
        fname_counts[filename + file_ext] += 1
    else:
        fname_counts[filename + file_ext] = 0
    if fname_counts[filename + file_ext]:
        path = 'C:/DL/Others/%s_%s%s' % (filename, fname_counts[filename + file_ext], file_ext)
    else:
        path = 'C:/DL/Others/' + filename + file_ext
    print path

C:/DL/Others/test.txt
C:/DL/Others/test_1.txt
C:/DL/Others/test2.txt
C:/DL/Others/test.cfg
C:/DL/Others/different_name.txt 
```

# .net - 在 VB.NET 或 C# 中编写 VBA Excel 宏，首先是早期绑定，然后是后期绑定

> ID：12375613
> 
> 赞同：4
> 
> 时间：2012-09-11T18:19:42.213
> 
> 标签：.net, .net-4.0, vsto, ms-office

每次看到office Automation using.NET的例子，使用的语言都是VB.NET。

这是因为最初只能在宏中使用 VB 脚本来实现 Excel 等 Office 应用程序的自动化，而编写这些宏的人自然倾向于使用 VB.NET，还是有理由不将 C# 用于 Office 自动化？

似乎我可以从 C# 中实例化 Excel 类，就像我在 VB.NET 中使用 CreateObject 一样。

```
excel = Type.GetTypeFromProgID("Excel.Application"); 
```

如果您必须使用 Excel 自动化编写 .NET 程序，您会使用什么语言，除了可能有 VB.NET 示例之外，还有什么理由避免使用 C#？

**编辑：**

我正在考虑使用对 Microsoft Excel 对象库的显式引用和 Excel 类 Application 对象的显式实例化来编写代码，然后在对程序进行基本测试后，修改代码以使用后期绑定以允许应用程序运行不同版本的 Excel。

代码会完全不同吗？

例如，使用早期绑定我可以做到这一点......

```
var excel2  = new Microsoft.Office.Interop.Excel.Application();
excel2.Visible = true; 
```

在后期投标中，我会被迫使用完全不同的代码吗？

```
excel = Type.GetTypeFromProgID("Excel.Application");
excel.InvokeMember("Visible", BindingFlags.SetProperty, null, excelObject, parameter); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:25:37.807

尽管有更多可用于 VB.NET 的代码示例，但我都成功地使用了这两种方法。

我可以立即想到的一个区别是 API 方法似乎包含大量可选方法参数，这些参数在 C# < 4 中不存在，因此您会发现自己在做类似的事情：

```
object missing = Type.Missing;
Excel.Application xl = new Excel.Application();
xl.Workbooks.Open(fileName, 0, true, 5, "", "", true, 
            Excel.XlPlatform.xlWindows, missing, missing, missing, 
            missing, missing, missing, missing); 
```

而不仅仅是在 VB.NET 中：

```
Dim xl As New Excel.Application()
xl.Workbooks.Open(fileName, 0, True, 5, "", "", true, Excel.XlPlatform.xlWindows) 
```

VB.NET 提供的一些语法糖与编写使用 OLE 自动化库或互操作程序集的应用程序的简洁性大相径庭。

**编辑**：至于早期绑定和后期绑定，我不能说我对后期绑定有任何经验。[本文](http://www.add-in-express.com/creating-addins-blog/2010/03/16/interop-assemblies-late-binding/)讨论了一种为办公应用程序的多个版本安全地实现后期绑定的方法。

引用[文章](http://www.add-in-express.com/creating-addins-blog/2010/03/16/interop-assemblies-late-binding/)：

> ...您可以使用最高版本的 Office 应用程序的互操作开始开发您的加载项。完成此操作后，您可以将对此 Office 版本中引入的功能的早期绑定调用替换为后期绑定调用，并确保这些调用正常工作。然后，您可以将项目引用的互操作程序集替换为应用程序先前版本的互操作程序，并重复该过程。一种重构。这种方法是否有用，由你决定

# vb.net - 仅在调试时出现 VB.NET 套接字异常

> ID：12375615
> 
> 赞同：1
> 
> 时间：2012-09-11T18:19:53.327
> 
> 标签：vb.net, visual-studio-2010, clr, managed-code

我最近在将 VB.NET 解决方案从 VS2005 升级到 VS2010 时遇到了一些相当令人费解的行为。作为参考，该解决方案以 .NET 2.0 为目标，并且在转换之前在调试器中运行没有错误。除了 IDE 更改之外，公司还认为将我的设备从 Win XP (x86) 刷新到 Win 7 (x64) 是合适的。

现在我已经将解决​​方案转换为 VS2010，一旦调试器加载，我就会收到一个 Socket 异常（详情如下）。这只发生在调试器中。在其发布配置中构建解决方案会生成一个正确安装和运行且无错误的 MSI。

收到的异常详情如下：

```
System.Net.Sockets.SocketException was unhandled
  Message=An invalid argument was supplied
  Source=System
  ErrorCode=10022
  NativeErrorCode=10022
  StackTrace:
       at System.Net.Sockets.Socket..ctor(AddressFamily addressFamily, SocketType socketType, ProtocolType protocolType)
       at System.Net.Sockets.TcpListener..ctor(IPAddress localaddr, Int32 port)
       at System.Runtime.Remoting.Channels.Tcp.TcpServerChannel.SetupChannel()
       at System.Runtime.Remoting.Channels.Tcp.TcpServerChannel..ctor(IDictionary properties, IServerChannelSinkProvider sinkProvider, IAuthorizeRemotingConnection authorizeCallback)
       at System.Runtime.Remoting.Channels.Tcp.TcpChannel..ctor(IDictionary properties, IClientChannelSinkProvider clientSinkProvider, IServerChannelSinkProvider serverSinkProvider)
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.RegisterChannel(Boolean SecureChannel)
       at Microsoft.VisualBasic.ApplicationServices.WindowsFormsApplicationBase.Run(String[] commandLine)
       at FSASYSTEM.My.MyApplication.Main(String[] Args) in 17d14f5c-a337-4978-8281-53493378c1071.vb:line 81
       at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

真正令人困惑的部分是，这个异常是在我的单行代码执行之前生成的。Main 方法是通过 VB.NET（托管代码）生成的，我无法对其进行断点，在其中捕获错误（据我了解，由于内核/应用程序上下文切换），也无法对其进行符号调试。

一个可能的解决方法是针对另一个 .NET 框架版本，但是我真的很想了解为什么会发生这种情况。我不明白为什么这样的错误只会出现在调试器中而不是发布的代码中。而且，是的，我已经尝试重新启动机器以确保没有任何剩余的套接字仍在侦听，从而导致绑定失败。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:50:46.037

经过大量的工作和大量的创意咒骂，我能够解决我的问题。事实证明，这个问题与从网络位置运行代码有关。我们公司正在迁移到 ClearCase，它将所有代码存储在一个伪网络驱动器中。事实证明，.NET 4 默认删除了在“远程”主机上定位程序集的能力。由于我的代码似乎在 M: 驱动器上，我的猜测是运行时拒绝加载特定程序集。

为了解决这个问题，我在 app.config 中添加了以下标签：

```
<runtime>
  <loadFromRemoteSources enabled="true"/>
</runtime> 
```

这似乎已经解决了这个问题。但是，如果有人知道通过虚拟网络解析程序集是如何生成特定错误消息的，我很想听听。此外，如果要相信互联网，这种安全措施是在 .NET 4 中引入的，但尽管我已经明确针对框架 2.0，但它仍然会引起问题。

希望这可以为人们节省大量时间。而且，为了您的文学乐趣，一些补充阅读：

[http://through-the-interface.typepad.com/through_the_interface/2011/07/loading-blocked-and-network-hosted-assemblies-with-net-4.html](http://through-the-interface.typepad.com/through_the_interface/2011/07/loading-blocked-and-network-hosted-assemblies-with-net-4.html)

[无法加载文件或程序集 HRESULT：0x80131515（将控制器添加到在网络驱动器上具有程序集引用的 MVC 项目时）](https://stackoverflow.com/questions/8524423/could-not-load-file-or-assembly-hresult-0x80131515-when-adding-controller-to-m)

# vb.net - InvalidCastException 说“指定的演员表无效”。

> ID：12375620
> 
> 赞同：1
> 
> 时间：2012-09-11T18:20:50.827
> 
> 标签：vb.net, oledb, oledbexception

嗨，我收到一个 InvalidCastException 说“指定的演员表无效。”。我不知道问题出在哪里。我的代码有错误吗？

这是我的代码：

```
 Private Sub Form5_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Conn.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\patientinfo.accdb"
    Conn.Open()

    '====retrieve values in database=============
    Dim statement As String = " SELECT patient_name,patient_age,date_confinement,type_sickness, type_fluid, bottle_used, drop_rate FROM tblPatientInfo WHERE 1 ORDER BY ID "
    RetrieveInfos(statement)

End Sub
Public Sub RetrieveInfos(ByRef statement As String)
    Dim cmd As OleDbCommand = New OleDbCommand
    With cmd
        .CommandText = statement
        .CommandType = CommandType.Text
        .Connection = Conn
        .ExecuteNonQuery()

        '--read records in access database----------------
        Dim reader As OleDbDataReader = cmd.ExecuteReader

        If reader.Read Then

            lblName.Text = reader.GetString(0)
            lblAge.Text = reader.GetString(1)
            lblDate.Text = reader.GetString(2)
            lblSickness.Text = reader.GetString(3)
            lblFluid.Text = reader.GetString(4)
            lblBottle.Text = reader.GetString(5)
            lbldrops.Text = reader.GetString(6)

            reader.Close()
        End If
    End With
End Sub 
```

任何帮助，将不胜感激。谢谢！:3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T16:11:41.550

VB 处理数据类型的一个非常烦人的部分是，如果它们是空的，它们中的一些会导致它有一个巨大的翻动。最好的解决方法是将 ready 转换为空值或数据类型的默认 null 值。尝试以下操作：

```
 lblName.Text = If(reader.isdbnull(0),Nothing,reader.GetString(0))
 lblAge.Text = If(reader.isdbnull(1), 0, reader.GetInt16(1))
 lblDate.Text = If(reader.isdbnull(2), date.minvalue, reader.Getdatetime(2)
 lblSickness.Text = If(reader.isdbnull(3), Nothing, reader.GetString(3)
 lblFluid.Text = If(reader.isdbnull(4), Nothing, reader.GetString(4))
 lblBottle.Text = If(reader.isdbnull(5), Nothing, reader.GetString(5))
 lbldrops.Text = If(reader.isdbnull(6), Nothing, reader.GetString(6)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:33:54.757

根据您对问题的评论，我建议更改

`lblAge.Text = reader.GetString(1)`

到

`lblAge.Text = reader.GetInt32(1).ToString`

此外，请确保`Get`为每列使用适当的。对于日期，您应该使用`GetDateTime()`. [这是 MSDN 的](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdatareader.getint32.aspx)链接`OleDbDataReader`；左侧将列出您可以参考的所有方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:34:59.450

尝试检查该值是否为空：

```
If TypeOf reader(1) Is DBNull Then
    lblAge.Text = reader.GetString(1)
End If 
```

但这只有在它是一个字符串时才有效。如果它不是字符串，这应该适用于任何数据类型：

```
If TypeOf reader(1) Is DBNull Then
    lblAge.Text = reader(1).ToString()
End If 
```

# ms-access - 如何在 Access 2000 组合框中设置默认值

> ID：12375621
> 
> 赞同：0
> 
> 时间：2012-09-11T18:20:55.443
> 
> 标签：ms-access, vba, ms-access-2000

我有一个包含组合框的 Access 2000 表单。组合框绑定到表中的字段。当表中的值为空时，我想在组合框上设置一个默认值，而不会使记录变脏。除非它是新记录，否则设置 defaultValue 不起作用。当我尝试设置该值时，我收到错误“您无法为该对象分配值”。

有什么想法吗？

Me.cboName.Value = Me!cboName.Value ' 这会导致上面提到的错误

Me.cboName.DefaultValue = Me!cboName.Value '这对现有记录没有任何作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:58:50.657

创建新记录时输入默认[值。](http://msdn.microsoft.com/en-us/library/office/ff198123.aspx)要显示现有记录的值......我能想到的最简单的方法是使用未绑定的控件。例如，如果您使用的字段是当前事件中的 theName，您将使用如下代码：

```
Private Sub Form_Current()
     me.cboName.value = Nz(me.theName.value,defaultValue)
End Sub 
```

其中 defaultValue 是您之前确定的默认值。这将有效地要求您对名称有两个控件...一个具有绑定值，一个具有显示值。如果这样做，您还必须`theName`在更改时添加代码以更新`cboName`.

正如 Remou 建议的那样，你应该问问自己这是否真的是你想要做的，因为它肯定至少有点混乱。

# java - 在 JFrame (Swing) 中使用 Graphics 时出现空指针异常

> ID：12375626
> 
> 赞同：2
> 
> 时间：2012-09-11T18:21:07.483
> 
> 标签：java, swing, exception, pointers, graphics

我正在慢慢学习java，我决定尝试构建一个井字游戏。我开始尝试画板，我找到了一种简单的方法来画线，每个人都说它行得通。到目前为止我有这个：

```
 public void constructBoard() {
    JFrame frame = new JFrame("Tic Tac Toe");
    frame.setSize(600,600);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocationRelativeTo(null);
    frame.toFront();
    Graphics lines = new Graphics();
    lines = getGraphics();
    lines.drawLine(100,100,300,500);
    lines.setColor(Color.black);
  //  JLabel label = new JLabel ("Hello, World!", SwingConstants.CENTER);
  //  frame.add(label, BorderLayout.CENTER);
} 
```

我的 JFrame 出现了，我的标题在那里，但没有一行。我尝试了多种方法，其中为该行提供了一个单独的方法，例如：

```
public void drawBoard(Graphics lines){
     lines = getGraphics();
     lines.drawLine(100,100,300,500);
     lines.setColor(Color.black);
} 
```

但是当我在我的主类中调用它时，它告诉我我需要括号之间的东西来匹配图形类型。我的编译器 (Eclipse) 推荐 null，但对我来说，这可能会导致空指针异常。

我在 Board 类中有构造板方法，里面有一个带有 super() 的构造函数 Board()。

```
 public Board(){
        super();
    } 
```

然后我有一个主类，它只创建一个 Board 类型的对象并调用我的方法。我搜索了所有我知道要看的地方，到处都说我所拥有的是画线的方法。然后我发现其他有空指针异常的人要么没有得到解决方案，要么没有得到适合我的解决方案。我试过 DebugGraphics，把它全部放在主类中，然后 lines = new Graphics(); 但这给了我一个错误。谢谢你的帮助。

全食宿班：

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class Board extends JPanel {
        public Board(){
            super();
        }
        public void constructBoard() {
            JFrame frame = new JFrame("Tic Tac Toe");
            frame.setSize(600,600);
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLocationRelativeTo(null);
                frame.toFront();
                Graphics lines = new Graphics();
                lines = getGraphics();
                lines.drawLine(100,100,300,500);
            lines.setColor(Color.black);
            //  JLabel label = new JLabel ("Hello, World!", SwingConstants.CENTER);
            //  frame.add(label, BorderLayout.CENTER);
        }
} 
```

完整的主要课程：

```
import java.awt.Color;
import java.awt.Graphics;

public class Main {

    /**
     * @param args
     */
            public static void main(String[] args) {
                // TODO Auto-generated method stub
                    Board board = new Board();
                    board.constructBoard();

            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:17:30.550

我认为你以错误的方式开始。请参阅下面的概念证明，向您展示如何实际覆盖`paintComponent`a 的方法，`JPanel`以便能够在其中显示自定义绘制的图形内容。那是你必须画板的地方。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class App {

    public static void main(String[] args) {
        JFrame frame = new JFrame("Test");
        frame.getContentPane().add(new MainPanel());
        frame.setBounds(100, 100, 600, 400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}

class MainPanel extends JPanel {
    MainPanel() {
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLUE);
        int width = getWidth();
        int height = getHeight();
        drawBoard((Graphics2D) g, width, height);
    }

    private void drawBoard(Graphics2D g2, int width, int height) {
        // TODO: this is the place where you actually want to draw your board
        g2.drawRect(10, 10, width - 20, height - 20);
    }
} 
```

# php - 使用 amfphp 从 extern swf 访问 facebook API

> ID：12375630
> 
> 赞同：0
> 
> 时间：2012-09-11T18:21:38.797
> 
> 标签：php, actionscript-3, amfphp

我正在使用 AMFPHP 1.9（我知道它的旧版本，但现在不重要）。我想与闪存沟通。当 O`facebookApi`从浏览器测试我的服务时，一切正常，我从 Facebook API 获取数据。

但是当我使用 flash (AS 3.0) 进行调试时，我收到以下错误：

```
[SWF] C:\prototypeAfstuderen\test3.swf - 2925 bytes after decompression
User Error
/customers/d/5/a/navidmirzaie.com/httpd.www/facebook-facebook-php-sdk/src/base_facebook.php
An active access token must be used to query information about the current user.
1238
AMFPHP_RUNTIME_ERROR 
```

我的服务如下所示。

```
<?php               

include "../../facebook-facebook-php-sdk/src/facebook.php";     

class facebookApi{              

    private $fbApi;                 

    public function __construct(){          
        $this->fbApi = new Facebook(array(              
        'appId'=>'357570560984266',         
        'secret'=>'484752fa5b8748fd4ac578fc99cbdbaf',               
        'cookie' => true            
        ));     
    }               

    public function getLoggedinUser(){                  
        $data = $this->fbApi->api("/me/","GET",array('acces_token'=>$this->fbApi->getAccessToken()));                                   

        return $data;       

    }               

    public function getPictures(){      
        $data = $this->fbApi->api("/me/photos/","GET",array('acces_token'=>$this->fbApi->getAccessToken()));                    

        return $data;       
    }                                   

}

?> 
```

我正在从我的台式计算机运行我的 swf，我希望可以访问数据。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:09:34.973

可能是因为您尝试从**本地计算机**访问 API （您是从 Windows 运行它，在 C:\prototypeAfstuderen\test3.swf 中），而您的 api 似乎正在**远程服务器**上运行（看起来像 Linux输入路径）？

# ruby-on-rails - Heroku 是否允许 NET::FTP 二进制文件传输？

> ID：12375632
> 
> 赞同：1
> 
> 时间：2012-09-11T18:22:00.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我可以使用 NET::FTP 连接到 ftp 服务器，但似乎我不能使用 net::ftp.getbinaryfile() 甚至无法获得类似 pwd()、list() 等的东西。 heroku 支持这个功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:21:55.713

是的。Heroku 确实支持 NET::FTP 并以二进制模式传输文件。但是，我发现它只支持被动模式[看到这个问题](https://stackoverflow.com/questions/5542916/ftp-to-rails-app-hosted-on-heroku)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:25:58.430

Heroku 会将您的代码编译成 slug，这是一个只读包，可在 dynos 中运行，请参阅：[Slug Compiler](https://devcenter.heroku.com/articles/slug-compiler)

您的应用程序在非常受限的环境中运行，大多数文件操作都被禁止。

# sql - 带有两个条件的 DB2 SQL *basic* SELECT 语句

> ID：12375636
> 
> 赞同：1
> 
> 时间：2012-09-11T18:22:04.363
> 
> 标签：sql, select, db2

我正在尝试生成一个报告，该报告显示满足以下两个条件之一的单个表中的记录：

1) "D" = 'ERR' 并且记录不到一周。

- 或者 -

2) "D" = 'X' OR 'Y' AND 记录超过一小时。

我从需求 #1 开始，但我不知道如何在应用了正确逻辑的同一个查询中执行这两个需求。对于要在报表上显示的记录，这两个条件中的任何一个都可以适用，而条件 #2 实际上也需要有一个 OR 运算符。

我可能还会将此报告更改为从过去 X 小时 (1/2/4/8) 开始工作，但我确信此站点上的另一篇文章解决了这个问题。

```
 SELECT "A", "B", "C"
     FROM Schema."Table" 
    WHERE "D"='ERR' AND TimeStamp >= (CURRENT_TIMESTAMP - 7 DAYS)
 ORDER BY TimeStamp DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:27:03.237

如果您使用`()`，您可以将条件组合在一起以获得所需的输出：

```
 SELECT "A", "B", "C"
       FROM Schema."Table" 
       WHERE ("D"='ERR' AND TimeStamp >= (CURRENT_TIMESTAMP - 7 DAYS)) OR
    (("D" = 'X' or "Y" = 'Y') and TimeStamp > (CURRENT_TIMESTAMP - 1 HOURS))
       ORDER BY TimeStamp DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:31:28.243

使用**括号**将条件与 OR 分开。

```
SELECT "A", "B", "C"
FROM Schema."Table" 
WHERE ("D"='ERR' AND TimeStamp >= (CURRENT_TIMESTAMP - 7 DAYS))
      OR
      (("D" = 'X' or "Y" = 'Y') AND (TimeStamp) > (CURRENT_TIMESTAMP - 1 HOURS))
ORDER BY TimeStamp DESC 
```

# jquery - jQuery 选项卡和页面重新加载 - 显示最后使用的选项卡

> ID：12375638
> 
> 赞同：0
> 
> 时间：2012-09-11T18:22:11.710
> 
> 标签：jquery, tabs

`mypage.php#tab3`当 url 是或默认加载第一个选项卡时，如何重新加载查看的最后一页（重新加载后） ？请注意尝试将 id 添加到 li 链接并捕获哈希。

下面的代码具有预期的效果，**除了**“活动”类。含义：div 在错误的选项卡下可见。谢谢你的建议。

```
<script type="text/javascript">
$(document).ready(function(){
    $(".tabContents").hide();                                       // Hide all tab content divs by default
    if (window.location.hash)
        $(".tabContents").filter(window.location.hash).show();      // Show the div with hash in url
    else
        $(".tabContents:first").show()                              // Show the first div of tab content by default

    $("#tabContainer ul li a").click(function(){                    // Fire the click event         
        var activeTab = $(this).attr("href");                       // Catch the click link
        $("#tabContainer ul li a").removeClass("active");       // Remove pre-highlighted link
        $(this).addClass("active");                             // Set clicked link to highlight state
        $(".tabContents").hide();                                   // Hide currently visible tab content div
        $(activeTab).fadeIn();                                      // Show the target tab content div by matching clicked link.
    });
});
</script>
....
<div id="tabContainer">
    <ul>
        <li><a class="active" href="#tab1" id="tab1">Purchase</a></li>
        <li><a href="#tab2" id="tab2">Sales</a></li>
        <li><a href="#tab3" id="tab3">Transactions</a></li>
    </ul>

    <div id="tab1" class="tabContents">
        <h1>Purchase</h1>
        ... content ...
    </div>
    <div id="tab2" class="tabContents">
        <h1>Sales</h1>
        ... content ...
    </div>
    <div id="tab3" class="tabContents">
        <h1>Transactions</h1>
        ... content ...
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:36:57.483

如果我对您的理解正确，则您的页面需要**深度链接**。
实现这一点的最简单方法是使用 jQuery 地址。你可以从[这里得到它](http://www.asual.com/jquery/address/)

检查这个例子 - [http://www.asual.com/jquery/address/samples/api/](http://www.asual.com/jquery/address/samples/api/)

它有据可查，但这里是一个简单的例子。

```
$.address.change(function(event) {
    var pathNames = event.pathNames;
    // <<< Your code here.  >>>
    //PathNames is the array with all path elements from the anchor.
}); 
```

**编辑：*没有 jQuery 地址***

假设您使用的是 jQuery，您可以收听**onhashchange**

```
$(window).hashchange(function(){
    alert(location.hash);
}); 
```

这将捕获任何锚点更改，但浏览器默认行为会出现问题。所有不存在锚点的链接只会跳转到页面顶部。你不想要这个，所以为了解决这个问题，你想使用地方点击监听器并返回 false 来解决默认行为。
不要忘记手动更改锚点。

```
$('a.deep-linking').click(function(){
    window.location.hash = a.attr('hash');
    return false;
}); 
```

**这可以通过简单的 JavaScript 来实现吗？**
简短的回答是肯定的，但您必须编写更多代码。您将遇到的主要问题是**onhashchange**，因为 IE6/IE7 不支持它。
jQuery 在有问题的浏览器上解决了这个问题，方法是使用超时以固定的小间隔检查哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:00:35.590

找到了 jQuery ready(function() 的一种替代方法。添加了一个主体`onload="load_tab();"`并删除了 if/else 语句以使其工作。仍在寻找在 ready(function() 中工作的修复程序

```
function load_tab() {
    if (window.location.hash) {
        var t = window.location.hash.substr(4)-1;
        var i = window.location.hash;
    }
    else {
        var t = '0';
        var i = '#tab1';
    }

    $(".tabContents").hide();                        // Hide all tab content divs by default
    $('#tabContainer ul li a:eq('+t+')').addClass("active");    // Set highlight state
    $(i).show();
} 
```

# javascript - 使用 ScriptManager.RegisterStartupScript 时出现 Javascript 错误

> ID：12375639
> 
> 赞同：1
> 
> 时间：2012-09-11T18:22:12.353
> 
> 标签：javascript, asp.net, ajax, popup, scriptmanager

注意：以下仅是实时服务器上的问题。在我的本地开发中，一切正常。

我的标记中有一个 javascript 函数，如下所示：

```
 function openNewWin(url) { 
        var x = window.open(url, 'mynewwin', 'width=500,height=500,toolbar=0,scrollbars=0'); 
        x.focus();
    } 
```

在按钮单击事件中，我调用以下命令：

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "OpenWin", "openNewWin('" + url + "')",true); 
```

这不起作用，我在 chrome 中得到以下内容：

```
Uncaught SyntaxError: Unexpected identifier ScriptResource.axd:448
_ScriptLoader$_loadScriptsInternal ScriptResource.axd:448
_ScriptLoader$_loadScriptsInternal ScriptResource.axd:453
_ScriptLoader$_loadScriptsInternal ScriptResource.axd:453
_ScriptLoader$_loadScriptsInternal ScriptResource.axd:453
_ScriptLoader$_nextSession ScriptResource.axd:476
_ScriptLoader$_loadScriptsInternal ScriptResource.axd:462
_ScriptLoader$_nextSession ScriptResource.axd:476
_ScriptLoader$loadScripts ScriptResource.axd:372
PageRequestManager$_onFormSubmitCompleted ScriptResource.axd:1480
$type.createDelegate ScriptResource.axd:628
$type.getHandler ScriptResource.axd:4338
raise ScriptResource.axd:7429
WebRequest$completed ScriptResource.axd:7433
Sys.Net.XMLHttpExecutor._onReadyStateChange 
```

在 IE 中我得到：

```
Message: Expected ')'
Line: 1
Char: 51
Code: 0
URI: http://mysite.com/postage/printpostage.aspx 
```

我无法弄清楚我的 javascript 有什么问题。它在开发中完美运行。

更多详细信息：我正在使用 ASP.NET WebForms。执行代码的按钮嵌套在 UpdatePanel 中。

谢谢你的帮助。

**编辑**：

我删除了 ScriptManager.RegisterStartupScript 并尝试在单击按钮时做一些简单的事情，但我得到了同样的错误。我想这是其他原因造成的。我该如何解决这个问题？

**编辑#2：**

我从头开始，它看起来像是带有 Scriptmanager.registerstartupscript 的任何代码。例如，我尝试使用以下方法，但遇到了同样的问题：

```
 catch (Exception ex)
    {
        ScriptManager.RegisterStartupScript(this, this.GetType(), "AlertError", "alert('Error: " + ex.Message + "');", true);
    } 
```

# java - 从 java 对象创建 xml 文件

> ID：12375647
> 
> 赞同：4
> 
> 时间：2012-09-11T18:22:38.060
> 
> 标签：java, xml

1.  我想从 java 6 创建一个 XML 文件（这是我第一次尝试），我想要一个如何使用 DOM 来做到这一点的示例。我需要一个示例来展示如何构建树？
2.  我可以从 java 对象创建 EDMX 文件吗？

问候，鲍里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:41:35.737

将 java 对象转换为 xml 的最简单示例是：

```
@XmlRootElement( name = "entity")
public class Entity {

    private int age = 22;
    private String firstname = "Michael";

    public int getAge() {
        return age;
    }

    public void setAge( int age ) {
        this.age = age;
    }

    public String getFirstname() {
        return firstname;
    }

    public void setFirstname( String firstname ) {
        this.firstname = firstname;
    }
}

public class Main {
    public static void main( String[] args ) {
        JAXBContext jc = JAXBContext.newInstance( Entity.class );
        Marshaller m = jc.createMarshaller();
        m.marshal( new Entity(), System.out );
    } 
} 
```

将打印到控制台：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><entity><age>22</age><firstname>Michael</firstname></entity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:29:47.870

如果您需要将 java 对象序列化为 XML 文件 - 只需将它们提供给[XStream](http://xstream.codehaus.org/)！它是双向的。代码片段[在这里](http://xstream.codehaus.org/tutorial.html)。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:49:57.440

它认为你应该使用`JAXB`and `JAXP`，这将使你的生活比使用 DOM 更容易......

# java - 将字符串的 ArrayList 与字符串数组进行比较时遇到问题

> ID：12375651
> 
> 赞同：1
> 
> 时间：2012-09-11T18:22:44.257
> 
> 标签：java, arraylist

首先，我创建了字符串的 ArrayList：

`List<List<String>> array1 = new ArrayList<List<String>>();`

然后在用数据填充它并进行打印之后：

```
[John, Smith, 120]
[Albert, Einstein, 170] 
```

现在我想遍历列表并与say进行比较，`String[] array2 = {"Albert", "Einstein", "170"}`到目前为止我已经尝试过：

`if (array1.get(i).equals(array2)) { blah }`

但是这不起作用，我基本上想遍历arraylist并查找我的array2是否匹配。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T18:24:39.433

列表根本*不*等于数组。最简单的解决方法是首先将您的数组包装在一个列表中：

```
if (array1.get(i).equals(Arrays.asList(array2)) 
```

然后将使用`equals`仅对每个项目执行顺序相等检查的实现。

如果您只想找到第*一个*匹配的条目，那么`indexOf`按照路易斯的回答使用也可以。

我还强烈建议您*不要*`array1`在不是数组时调用变量。

最后，如果您`List<String>`只是将其用作包装器以避免必须创建一个包含（例如）名称和年龄的*真实*数据结构，那么不要：创建一个`Person`类，因此您最终会得到：

```
List<Person> people = new ArrayList<Person>();
Person testPerson = new Person("Albert", "Einstein", 170); 
```

...适当地实施平等和散列，你会很高兴。*这样，*您的代码将更易于阅读和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:24:32.307

```
return listOfListsOfStrings.indexOf(Arrays.asList(arrayOfStrings)); 
```

将找出列表中该数组是否有任何匹配项。如果第 i 个列表与数组匹配，则返回 i，如果未找到匹配项，则返回 -1。你甚至不需要`for`循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:35:25.513

根据您给出的示例，两者都是列表。因此，请尝试使用 list1.containsAll(list2) 即 conatinsAll 方法。希望能帮助到你

这里还有一个例子[我是否在 java.util.ArrayList.containsAll 中发现了一个错误？](https://stackoverflow.com/questions/5708445/have-i-found-a-bug-in-java-util-arraylist-containsall)

# javascript - 为什么 jQuery 1.8 不能在 Internet Explorer 9 和 IE8 中工作？（截至 2012 年 9 月的 IE9 最新版本）

> ID：12375655
> 
> 赞同：-3
> 
> 时间：2012-09-11T18:23:04.417
> 
> 标签：javascript, jquery, internet-explorer-9

这是一个一般性的问题，但我确信我不是唯一一个遇到 Internet Explorer（粗略）和 jQuery 1.8 问题的人。

（**免责声明：**我知道这是一个非常广泛的问题，但我希望为自己和未来的 Stack 用户编译一些资源以用于故障排除，因为到目前为止我还没有找到任何帮助。）

**问题：**

为什么 jQuery 中内置的某些事件/函数可以在 Chrome、FireFox、Safari**甚至 Internet Explorer 7 和 8 中**完美运行，但在 Internet Explorer 9 中却不行？

我很清楚我可以在我的页面上模拟“IE8”来解决这个问题，但这并不能解决问题。

这是我到目前为止所做/检查的内容：

*   确保所有`document.ready`代码都包含在结束`body`标记之前。
*   所有`script`标签都有`type=text/javascript`.
*   删除了我的 JS 中的所有“尾随逗号”——IE 不喜欢它们。
*   所有文档标签（即`<!doctype html>`、`<head>`等）都是正确的。

我还能做些什么来确保/帮助 Javascript 和 jQuery 在 Internet Explorer 9 中至少像在 IE8 中一样运行（无需在兼容模式下运行或模拟 IE8）？

**更新**

如果我在页面中放置我的`<script>`标签以包含 jQuery 和我的自定义 JS `<body>`，它的大部分在 IE9 中都能正确执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:53:01.570

万一其他人有同样的问题，经过进一步研究，我找到了解决方案：在 jQuery 1.8 中，核心存在错误。

> 12282：1.8.0 回归 - 文档准备在 IE 9/10 上过早触发。

我已升级到 1.8.1，一切似乎在 IE 7,8 和 9（以及所有“真实”浏览器）中都能正常运行

# c# - 未声明标量变量

> ID：12375657
> 
> 赞同：0
> 
> 时间：2012-09-11T18:23:08.403
> 
> 标签：c#, asp.net, sql

```
protected void DropDownList8_SelectedIndexChanged(object sender, EventArgs e)
{
    var connectionString = (ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    var updateCmd = "UPDATE [CarTab] SET Rent= 1 WHERE ([Model] = @Model)";
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(updateCmd, connection);
        command.Connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

错误：必须为 @Model 声明标量变量。我应该在那里删除/添加什么？想不通。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:26:20.320

你可以试试

```
 command.Parameters.AddWithValue("@Model", value); 
```

你完成代码

```
protected void DropDownList8_SelectedIndexChanged(object sender, EventArgs e)
{
    var connectionString = (ConfigurationManager.ConnectionStrings["Connection"].ConnectionString);
    var updateCmd = "UPDATE [CarTab] SET Rent= 1 WHERE ([Model] = @Model)";
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        using(var command = new SqlCommand(updateCmd, connection))
        {
          command.Parameters.AddWithValue("@Model", value); //Replace with your value

          command.Connection.Open();
          command.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:25:08.683

您必须添加参数`@Model`，例如：

```
 updateCmd.Parameters.Add("@Model", SqlDbType.SomeType);
    updateCmd.Parameters["@Model"].Value = something; 
```

# ruby-on-rails - 使用旧版本 ruby 的 Ruby Rails webrick 服务器

> ID：12375659
> 
> 赞同：4
> 
> 时间：2012-09-11T18:23:12.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, webrick, ruby-1.9.3, ruby-1.8.7

ruby -v 给我 ruby​​-1.9.3-p194。
哪个 ruby​​ 给 /home/ubuntu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
rails -v 给 Rails 3.2.7
哪个 rails 给 /home/ubuntu/.rvm/gems/ruby-1.9.3 -p194/bin/rails

“sudo bundle exec rails s”给出：

```
ubuntu@ip-10-117-73-5:~/ruby/users$ sudo bundle exec rails s
=> Booting WEBrick
=> Rails 3.2.7 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-09-11 20:13:08] INFO  WEBrick 1.3.1
[2012-09-11 20:13:08] INFO  ruby 1.8.7 (2011-06-30) [i686-linux]
[2012-09-11 20:13:08] INFO  WEBrick::HTTPServer#start: pid=4240 port=3000 
```

rvn 信息给了我：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i686-linux]
  - INSTALLATION DIRECTORY: /home/ubuntu/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /home/ubuntu/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/ubuntu/.rvm/gems/ruby-1.9.3-p194
     - /home/ubuntu/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

但是，当我运行 rails server 时，我会在下面看到。

```
[2012-09-11 18:19:53] INFO  ruby 1.8.7 (2011-06-30) [i686-linux] 
```

我不知道这是从哪里来的。

我已经完成了“捆绑安装”和“捆绑更新”以及一大堆事情 - 它仍然使用错误的 ruby​​ 版本。我需要做什么？

编辑：$PATH 变量也只显示了 1.9.3 的相关信息，Webrick 到底是如何获得 1.8.7 的！如果我删除该文件夹 - 它根本不会启动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:13:40.823

看来我需要的是

```
rvmsudo rails server 
```

我现在正在学习何时使用 sudo 何时不使用 - 这是一次痛苦的经历。问题是为 sudo 安装了 1.8.7 - 而其他一切都适合我的用户。但是由于我之前的安装不正确，我无法单独运行“rails server”，所以我不得不使用“sudo rails server”——最终使用的是旧的 ruby​​ 版本。

# windows - 如何正确启动更新程序？

> ID：12375660
> 
> 赞同：0
> 
> 时间：2012-09-11T18:23:15.043
> 
> 标签：windows, winapi, language-agnostic

我有一个需要能够自我更新的程序。我有第二个程序将执行更新、下载和安装。更新程序显然需要能够更新主程序，为此，主程序无法运行。所以我想让主程序通过调用来启动更新程序`ShellExecuteEx`，但是[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759784%28v=vs.85%29.aspx)让我有点困惑。

它说：

> 如果 ... 进程将在 ShellExecuteEx 返回后很快终止，则必须指定 SEE_MASK_NOASYNC 标志。在这种情况下，调用线程将无法完成 DDE 对话，因此 ShellExecuteEx 在将控制权返回给调用应用程序之前完成对话非常重要。未能完成对话可能会导致文档启动失败。

在 下`SEE_MASK_NOASYNC`，它表示`ShellExecuteEx`在操作完成之前调用不会返回。我想要的是启动更新程序，然后立即终止主程序，这样更新程序就可以毫无问题地运行。这是正确的方法吗？为了防止启动的更新程序被标记为在主进程关闭时将被杀死的“子进程”，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T15:16:36.500

你必须调用 ShellExecute 吗？我做了类似的事情并通过 CreateProcess 启动它工作正常。

（实际上，cmd.exe 已启动，它运行一个批处理文件。批处理文件等待，启动更新程序并等待它完成，然后稍等，然后再次启动主应用程序。从来没有遇到过任何问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:22:29.103

DDE 不会用于直接启动 EXE。（它仅用于启动某些类型的文件，如果它们被注册为需要以这种方式启动。如果您只是按名称运行 EXE，则 DDE 应该是无关紧要的。）

因此，您应该指定 SEE_MASK_NOASYNC（以确保 ShellExecuteEx 调用完成了它需要做的所有事情，然后您的应用程序可以在调用返回后立即结束线程）并且 API 应该很快返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:29:32.120

这是一篇关于启动更新程序的好 CodeProject 文章：http: [//www.codeproject.com/Articles/395572/Executable-Integration-Example-External-settings-a](http://www.codeproject.com/Articles/395572/Executable-Integration-Example-External-settings-a)

# javascript - 添加输入名称=“TotalInline[]”的所有值

> ID：12375661
> 
> 赞同：0
> 
> 时间：2012-09-11T18:23:16.313
> 
> 标签：javascript, jquery, arrays, jquery-selectors

如何使用名称从所有输入中添加值`name="TotalInline[]"`？

以下内容不起作用：

```
 var total = 0;
    $.each('input[name="TotalInline[]"];,function() {
        total += this;
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:24:18.560

这应该工作：

```
var total = 0;
$('input[name="TotalInline"]').each(function() {
    // assuming you have ints in your inputs, use parseFloat if those are floats
    total += parseInt(this.value, 10); 
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:24:27.620

```
var total = 0;
$.each($('input[name="TotalInline[]"]'), function() {
    total += parseInt(this.value, 10);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:24:35.143

你有一些严重的语法错误，试试这个：

```
var total = 0;
$('input[name="TotalInline[]"]').each(function () {
  total += parseInt(this.value, 10);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T18:25:47.220

试试这样...

```
var total = 0;
$('input[name="TotalInline[]"]').each(function() {
        total += parseInt($(this).val(),10);
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T18:27:01.087

```
var total = 0;

$('input[name="TotalInline[]"]').each(function() {
    total += +this.value.replace(/[^\d.]/g, '');
}); 
```

*   使用快速正则表达式仅过滤掉数字（和小数点）。
*   使用`+`前缀转换为数字。

# c++ - 使用 VTK 连接流媒体点

> ID：12375662
> 
> 赞同：1
> 
> 时间：2012-09-11T18:23:17.437
> 
> 标签：c++, user-interface, graphics, 3d, vtk

我有一个在循环中调用的函数，每次通过它都会给出一个 3D 点的 (x,y,z)。我正在尝试使用 VTK 实时连接这些点，但我无法让渲染窗口在每一帧后刷新。如果我退出循环，我会看到一堆行。

基本上，这就是我正在做的事情：

```
// Create a vtkPoints object to store the points in it
vtkSmartPointer<vtkPoints> points = vtkSmartPointer<vtkPoints>::New();

vtkSmartPointer<vtkPolyLine> polyLine = vtkSmartPointer<vtkPolyLine>::New();

// Create a cell array to store the lines in   
vtkSmartPointer<vtkCellArray> lines = vtkSmartPointer<vtkCellArray>::New();

// Create a polydata to store everything in
vtkSmartPointer<vtkPolyData> linesPolyData = vtkSmartPointer<vtkPolyData>::New();

// Setup actor and mapper
vtkSmartPointer<vtkPolyDataMapper> mapper = vtkSmartPointer<vtkPolyDataMapper>::New();

vtkSmartPointer<vtkActor> actor = vtkSmartPointer<vtkActor>::New();
actor->SetMapper(mapper);

// Setup render window, renderer, and interactor
vtkSmartPointer<vtkRenderer> renderer =  vtkSmartPointer<vtkRenderer>::New();
vtkSmartPointer<vtkRenderWindow> renderWindow =       vtkSmartPointer<vtkRenderWindow>::New();
renderWindow->AddRenderer(renderer);
vtkSmartPointer<vtkRenderWindowInteractor> renderWindowInteractor =   vtkSmartPointer<vtkRenderWindowInteractor>::New();
renderWindowInteractor->SetRenderWindow(renderWindow);

renderer->AddActor(actor);
renderWindow->Render();
renderer->Render();

int numpoints = 0;

while(some_condition)
{
  call_function(&x,&y,&z);
  double point[3] = {0.0, 0.0, 0.0};
  point[0] = (float)x;
  point[1] = (float)y;
  point[2] = (float)z;

  numpoints++;
  points->InsertNextPoint(point);

  polyLine->GetPointIds()->SetNumberOfIds(numpoints);
  for(unsigned int i = 0; i < num_points; i++)
{
    polyLine->GetPointIds()->SetId(i,i);                        
}

  lines->InsertNextCell(polyLine);

// Add the points to the dataset
linesPolyData->SetPoints(points);

// Add the lines to the dataset
linesPolyData->SetLines(lines);

#if VTK_MAJOR_VERSION <= 5
mapper->SetInput(linesPolyData);
#else
mapper->SetInputData(linesPolyData);
#endif

linesPolyData->Modified();
linesPolyData->Update();

renderWindow->Render();
renderer->Render();

renderWindowInteractor->Enable();

check_loop_exit_condition(); 
} 
```

如果我`renderer->Render()`在循环之外做，我会得到所有的线路（或者至少我认为我会这样做）。有人能弄清楚我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:54:03.113

从[这些文档](http://www.vtk.org/doc/nightly/html/classvtkRenderer.html#adc877bbb1ff9a92e36146f7e379815d5)中，您似乎不应该直接调用

```
renderer->Render(); 
```

你应该只打电话

```
renderWindow->Render(); 
```

# svg - 在将过滤器应用于结果形状之前在 SVG 中组合形状

> ID：12375663
> 
> 赞同：2
> 
> 时间：2012-09-11T18:23:22.933
> 
> 标签：svg

我目前正在用 SVG 绘制徽标。

徽标绘图非常好，但是我想对我的形状应用过滤器。现在标识中的字母由不同的形状组成。

我的问题是如何最好地将所述形状组合成一个结果形状？我发现了一些关于 feBlend 和 veUnion 的信息，但信息分散且稀疏，这是我进入 SVG 美妙世界的第一步。

除了在应用过滤器之前将两个形状合并为一个之外，我还希望（在我的示例中，qabana 一词中的 n ）在应用过滤器之前从形状中减去某些形状。

我正在处理的 SVG 示例：http: [//buffer.io/~simon/qabana-svg/handmade-stackoverflow.svg](http://buffer.io/~simon/qabana-svg/handmade-stackoverflow.svg)（这应该立即向您展示我遇到的问题）。

此外，很高兴听到有关如何在该文件中改进我的 SVG 的任何额外提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:49:58.157

veUnion 目前没有在任何浏览器中实现。如果您想将两个或多个形状合并到一个路径中，您可以使用矢量图形编辑器（例如 Inkscape 或 Illustrator）。如果要对元素进行分组，请使用 <g> 元素，然后将过滤器应用于该元素。

# windows-mobile - Windows CE“管道的另一端没有进程”

> ID：12375667
> 
> 赞同：0
> 
> 时间：2012-09-11T18:23:58.233
> 
> 标签：windows-mobile, embedded, windows-ce

我正在尝试为 Windows CE 5.0 应用程序进行调试，但我什至无法启动调试过程，因为 Visual Studio 会抛出错误“管道的另一端没有进程”。我可以正常运行“Hello World”应用程序，但是当我尝试运行与另一个 DLL 链接的应用程序时，我得到了那个错误。DLL 与可执行文件位于同一文件夹中。我如何从 CE 获得更多关于此的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:59:09.247

听起来程序可能会失败，因为无法加载 .dll。

建议：

1) 确保您在构建中指定“/MTd”（多线程调试）。

2) 修改您的代码以执行显式“LoadLibrary()”而不是[隐式链接](http://msdn.microsoft.com/en-us/library/253b8k2c%28v=vs.80%29.aspx)。检查尝试加载的任何错误。初始化或调用 .dll 上的方法。

您也可以使用 try/catch (C++) 或 MS 结构化异常处理（SEH、C 或 C++）来完成同样的任务：我不确定。

'希望有帮助.. PSM

PS：

Windows CE 5.0 相当老了：您确定不能使用更新版本的 Windows Mobile 吗？它将拥有更友好的用户界面以及更强大的开发环境。恕我直言...

# javascript - 访问 jsrender 模板中的全局 javascript 变量并更新它

> ID：12375671
> 
> 赞同：4
> 
> 时间：2012-09-11T18:24:18.587
> 
> 标签：javascript, jsrender

我正在尝试使用来自 jsrender 模板的值更新全局 javascript 变量。我怎样才能实现它...

我创建了一个小提琴[http://jsfiddle.net/4RH7n/8/](http://jsfiddle.net/4RH7n/8/)

我需要将最后一部电影的名称放入该 javascript 变量中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T23:22:59.083

可以轻松注册自定义标签和助手以访问或修改全局变量。[这里](http://borismoore.github.com/jsrender/demos/scenarios/04_assigning-variables-scenario.html)有一个示例（代码在[这里](https://github.com/BorisMoore/jsrender/blob/master/demos/scenarios/04_assigning-variables-scenario.html)），它显示了两种方式，并说明了从模板中设置和获取全局变量。助手/自定义标签比使用更好`{{* ...}}`（因为这样你可以更好地分离代码和标记） - 但如果你确实使用`{{*`语法，你必须设置`allowCode=true`. （见[这个例子](http://borismoore.github.com/jsrender/demos/scenarios/02_separators-scenario.html)）。

上述方法是使用您自己的扩展来访问任何全局的方法。但是，对于大多数情况，您可能只需要访问某些特定的全局变量。在这种情况下，很容易将全局作为选项传递给`.render()`调用（或者`.link()`如果您使用 JsViews，则调用），如下所示：

```
...render(myData, { foo: myFooGlobal, bar: myBarGlobal }); 
```

然后在模板中的任何表达式中访问它们，例如：

```
... {{:~foo}} ... {{for ~bar}} ... {{/for}} ... 
```

如果您希望能够从所有模板访问这些全局变量（或对特定模板的所有调用），您可以将它们注册为全局（或特定于模板）帮助程序/模板参数，然后您不需要通过渲染/链接调用传递它们。

例如，要为所有模板全局注册它们：

```
$.views.helpers({
    foo: myFooGlobal,
    bar: myBarGlobal 
}); 
```

`~foo`然后，您可以使用（或`foo()`用于函数）以与上述完全相同的方式访问它们。

您可以在[GitHub 上](https://github.com/BorisMoore)找到所有这些方法的示例。

* * *

**更新：**

除了上面提到的文档和示例，[http://www.jsviews.com](http://www.jsviews.com)上还有更多最新的文档和示例，特别是[这里](http://www.jsviews.com/#helpers)和[这里](http://www.jsviews.com/#allowcodetag)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:34:01.207

不太确定您在问什么。数据不会来自模板，您已经在该对象中拥有数据。直接使用即可：

```
window.abcfx = function() {
  alert(movies[movies.length-1].name);
} 
```

[小提琴](http://jsfiddle.net/4RH7n/13/)

# ruby-on-rails-3 - 为什么提交表单时没有将新选择的选项发送到服务器？

> ID：12375674
> 
> 赞同：0
> 
> 时间：2012-09-11T18:24:30.183
> 
> 标签：ruby-on-rails-3, forms, select, option

我有一个这样构建的选择标签：

```
<%= f.select(:id, category_options, include_blank:true) %> 
```

表单显示正常，并选择了适当的模型项的选项标签。但是，当用户选择不同的选项并提交表单时，新选项不会传递给服务器。相反，最初选择的值被传递给服务器。

rails 日志显示正在提交的旧值，而不是新值。此输入的值似乎已缓存。这发生在开发和生产中，并且在开发中 cache_classes = false。

rails 日志如下：

在 2012-09-11 13:42:51 -0400 开始为 127.0.0.1 PUT "/posts/1999" 由 GalleriesController#update 作为 HTML 处理

参数：{"utf8"=>"✓", "authenticity_token"=>"...", "gallery"=>{"publish_on"=>"2012-09-18", "poster_file_temp"=>"", "thumb_file_temp"=>"", "models_attributes"=>{"0"=>{"id"=>"116", "_destroy"=>"false"}, "1"=>​​{"id"=> "6409", "_destroy"=>"false"}}, "categories_attributes"=>{"0"=>{"id"=>"59", "_destroy"=>"false"}}, "thumb_zip_input" =>"", "medium_zip_input"=>"", "large_zip_input"=>"", "website_url"=>"", "commit"=>"上传", "id"=>"1999"}

表格如下所示：

```
 <form accept-charset="UTF-8" action="/galleries/1999" class="edit_gallery" enctype="multipart/form-data" id="edit_gallery_1999" method="post" name="edit_gallery_1999">
        <div style="margin:0;padding:0;display:inline">
            <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="put"><input name="authenticity_token" type="hidden" value="...">
        </div>
        <div class="vert">
            <label for="gallery_publish_on">Publish on</label> <input id="gallery_publish_on" name="gallery[publish_on]" size="30" type="text" value="2012-09-18"> <label for="gallery_poster_file">Poster file</label> <input id="gallery_poster_file_temp" name="gallery[poster_file_temp]" type="hidden"><input id="gallery_poster_file" name="gallery[poster_file]" size="30" type="file">
            <div class='formSection'>
                <img alt="Brandy" src="/content/gallery/poster_file/0000/1999/brandy.jpg">
            </div><label for="gallery_thumb_file">Thumb file</label> <input id="gallery_thumb_file_temp" name="gallery[thumb_file_temp]" type="hidden"><input id="gallery_thumb_file" name="gallery[thumb_file]" size="30" type="file">
            <div class='formSection'>
                <img alt="Thumb" src="/content/gallery/thumb_file/0000/1999/thumb.jpg">
            </div>
            <div id="models">
                <label for="Models">Models</label>
                <div>
                    <select id="gallery_models_attributes_0_id" name="gallery[models_attributes][0][id]">
                        <option value="6409">
                            April
                        </option>
                        <option value="6366" selected="selected">
                            Brandy
                        </option>
                        <option value="9036">
                            Charlie
                        </option>
                        <option value="7490">
                            Craig
                        </option>
                        <option value="9881">
                            Donna
                        </option>
                    </select> <input id="gallery_models_attributes_0__destroy" name="gallery[models_attributes][0][_destroy]" type="hidden" value="false"> <a href="#" class="remove_fields">remove</a>
                </div><input id="gallery_models_attributes_0_id" name="gallery[models_attributes][0][id]" type="hidden" value="6366"> <a href="#" class="add_fields" data-fields="&lt;div&gt; &lt;select id=&quot;gallery_models_attributes_70106238269060_id&quot; name=&quot;gallery[models_attributes][70106238269060][id]&quot;&gt;&lt;option value=&quot;&quot;&gt;&lt;/option&gt;&lt;option value=&quot;6409&quot;&gt;April&lt;/option&gt;&lt;option value=&quot;6366&quot;&gt;Brandy&lt;/option&gt;&lt;option value=&quot;9036&quot;&gt;Charlie&lt;/option&gt;&lt;option value=&quot;7490&quot;&gt;Craig&lt;/option&gt;&lt;option value=&quot;9881&quot;&gt;Donna&lt;/option&gt;&lt;/select&gt; &lt;input id=&quot;gallery_models_attributes_70106238269060__destroy&quot; name=&quot;gallery[models_attributes][70106238269060][_destroy]&quot; type=&quot;hidden&quot; value=&quot;false&quot; /&gt; &lt;a href=&quot;#&quot; class=&quot;remove_fields&quot;&gt;remove&lt;/a&gt;&lt;/div&gt;" data-id="70106238269060">add model</a>
            </div>
            <div id="categories">
                <label for="Categories">Categories</label>
                <div>
                    <select id="gallery_categories_attributes_0_id" name="gallery[categories_attributes][0][id]">
                        <option value="1">
                            Amateur
                        </option>
                        <option value="2">
                            Animals
                        </option>
                        <option value="49">
                            Articles
                        </option>
                        <option value="3">
                            Art
                        </option>
                        <option value="7">
                            Blog
                        </option>
                    </select> <input id="gallery_categories_attributes_0__destroy" name="gallery[categories_attributes][0][_destroy]" type="hidden" value="false"> <a href="#" class="remove_fields">remove</a>
                </div><input id="gallery_categories_attributes_0_id" name="gallery[categories_attributes][0][id]" type="hidden" value="59"> <a href="#" class="add_fields" data-fields="&lt;div&gt; &lt;select id=&quot;gallery_categories_attributes_70106278052860_id&quot; name=&quot;gallery[categories_attributes][70106278052860][id]&quot;&gt;&lt;option value=&quot;&quot;&gt;&lt;/option&gt;&lt;option value=&quot;1&quot;&gt;Amateur&lt;/option&gt;&lt;option value=&quot;2&quot;&gt;Animal&lt;/option&gt;&lt;option value=&quot;49&quot;&gt;Articles&lt;/option&gt;&lt;option value=&quot;3&quot;&gt;Art&lt;/option&gt;&lt;option value=&quot;7&quot;&gt;Blog&lt;/option&gt;&lt;/select&gt; &lt;input id=&quot;gallery_categories_attributes_70106278052860__destroy&quot; name=&quot;gallery[categories_attributes][70106278052860][_destroy]&quot; type=&quot;hidden&quot; value=&quot;false&quot; /&gt; &lt;a href=&quot;#&quot; class=&quot;remove_fields&quot;&gt;remove&lt;/a&gt;&lt;/div&gt;" data-id="70106278052860">add category</a>
            </div>
            <div id='photoset_files'>
                <fieldset>
                    <legend>Zip Files</legend> <label for="gallery_thumb_zip_input">thumb zip</label> <select id="gallery_thumb_zip_input" name="gallery[thumb_zip_input]">
                        <option value="/Library/WebServer/Documents/uploads/thumb copy.zip">
                            thumb copy.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/thumb.zip">
                            thumb.zip
                        </option>
                    </select>&nbsp;[ thumb.zip ]<br>
                    <label for="gallery_medium_zip_input">medium zip</label> <select id="gallery_medium_zip_input" name="gallery[medium_zip_input]">
                        <option value="/Library/WebServer/Documents/uploads/medium copy 10.zip">
                            medium copy 10.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/medium copy 9.zip">
                            medium copy 9.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/medium copy.zip">
                            medium copy.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/medium.zip">
                            medium.zip
                        </option>
                    </select>&nbsp;[ medium.zip ]<br>
                    <label for="gallery_large_zip_input">large zip</label> <select id="gallery_large_zip_input" name="gallery[large_zip_input]">
                        <option value="/Library/WebServer/Documents/uploads/large copy 10.zip">
                            large copy 10.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/large copy 9.zip">
                            large copy 9.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/large copy.zip">
                            large copy.zip
                        </option>
                        <option value="/Library/WebServer/Documents/uploads/large.zip">
                            large.zip
                        </option>
                    </select>&nbsp;[ large.zip ]<br>
                </fieldset>
            </div><label for="gallery_website_url">Website url</label> <input class="wider" id="gallery_website_url" name="gallery[website_url]" size="30" type="text" value=""> <input id="tluo" name="tluo" type="hidden" value="aHR0cDovL2tmLmRldi9nYWxsZXJpZXMvbGlzdA==">
            <div id="submit">
                <input data-disable-with="Uploading..." name="commit" type="submit" value="Upload"> &nbsp;&nbsp; <a href="/galleries/">Cancel</a>
            </div>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:04:00.727

这是因为您正在重复 select 的 id 和 name 属性。不建议有两个具有相同 id 值的 html 元素

尝试更改选择的名称，或者如果您想将其用作数组，那么以这种方式指定名称可能会对您有所帮助

```
 gallery[categories_attributes][0][id][] 
```

这个我用来收集选中的单选按钮值，它可能适用于你的情况

# c# - 为什么用ref关键字传入方法的实例在创建新对象后可以保持不变？

> ID：12375678
> 
> 赞同：2
> 
> 时间：2012-09-11T18:24:49.373
> 
> 标签：c#, object, methods, reference, instance

我遇到了这个棘手的问题。请参阅以下代码：

```
public class Foo
    public int A { get; set; }
}

static void Main(string[] args)
{
    Foo foo1 = new Foo();
    Foo foo2 = new Foo();

    ChangeObject1(foo1);
    ChangeObject2(ref foo2);

    Console.WriteLine("Foo1 = " + foo1.A);
    Console.WriteLine("Foo2 = " + foo2.A);
    Console.ReadKey();
}

static void ChangeObject1(Foo foo)
{
    foo.A += 1;
    foo = new Foo();
}

static void ChangeObject2(ref Foo foo)
{
    foo.A += 1;
    foo = new Foo();
} 
```

经过一番测试，foo1.A 等于 1，而 foo2.A 仍然等于 0。据我了解，这是因为第二种方法是通过引用而不是值传递的实例。这会更改实例的内容，因此当在方法中创建和分配新对象时，不再定义值。

但是想一想我就迷惑了，因为我觉得第一种方法应该有类似的效果，即使它是按值传递的，因为实例的内容仍然在方法之外发生了变化。

有谁知道实际发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:31:44.577

我假设您使用的是 c# 或 java。无论哪种方式，这个概念都是一样的

当你声明你的 foo 变量时

```
Foo foo1 = new Foo() 
```

您正在声明所谓的引用类型。（所有代表类的对象都是引用类型）

所以，存储在其中的值`foo1`并不是真正的 a `Foo`，而是一个保存 that 的内存地址的值`Foo`。

你打电话时

```
 static void ChangeObject1(Foo foo)
    {
        foo.A += 1;
        foo = new Foo();
    } 
```

您正在传递该参考的副本。因此，当您这样做时`foo.A += 1`，您正在更改刚刚传入的对象的成员值。

当你这样做时，`foo = new Foo();` 你只是改变了引用的副本，而不是原始对象引用本身。

现在，当你打电话时

```
 static void ChangeObject2(ref Foo foo)
    {
        foo.A += 1;
        foo = new Foo();
    } 
```

您没有传递您的地址的副本，`Foo`而是传递了您的地址的地址`Foo`。

你可以把它想象成你正在传递原始`Foo`地址本身。

因此，当您致电`foo = new Foo()`foo 之前，您对 foo 做了什么并不重要。您刚刚用一个全新`Foo`对象的地址覆盖了您的地址。

如果您将方法更改为如下所示

```
 static void ChangeObject2(ref Foo foo)
    {
        foo.A += 1;
    } 
```

那么你应该注意到变化

[这是一个解释引用类型的页面](http://www.roseindia.net/java/master-java/Reference-Data-Types.shtml) 它在java中，但同样的原则也适用于c#

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T05:34:54.067

也许如果您从值类型而不是引用类型的角度考虑它会有所帮助。以第一个例子为例（括号中的数字代表一个包含整数值的内存地址）。

**按值传递**

```
[0001] -> 5; 
```

当你按值传递时，值 5 被复制到一个新的内存地址

```
[0002] -> 5;    
[0002] -> 10;    // changes the value of a new reference 
```

更改 [0002] 的值不会影响 [0001]。

* * *

**通过引用传递**

```
[0001] -> 5; 
```

另一方面，如果您传递地址本身（使用 ref 关键字传递）

```
[0001] -> 5;    
[0001] -> 10;    // changes the value of the original reference 
```

您现在可以更改引用所持有的值。

* * *

引用类型而不是保存整数，而是保存对象的地址。因此，如果您通过引用传递，您将传递保存该值的“容器”（即指针/引用）。然后，您可以更改容器中的内容。如果按值传递，就是将值从容器中取出并传递，那么原来的容器就出局了。

# text - OpenOffice.org 作家

> ID：12375683
> 
> 赞同：0
> 
> 时间：2012-09-11T18:25:06.740
> 
> 标签：text, openoffice.org, spacing, openoffice-writer

我想在 OenOffice.org Writer 上以 1.15 的行距书写文本，但我不知道如何更改行距。从格式 > 段落 > 缩进和间距 > 行距我找不到 1.15。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:28:56.037

将其设置`proportional`为`115%`

这个问题可能更适合 SuperUser，而不是 StackOverflow。

# javascript - 将饼图名称显示为标题

> ID：12375687
> 
> 赞同：1
> 
> 时间：2012-09-11T18:25:14.850
> 
> 标签：javascript, highcharts

有没有一种方法可以在饼图的顶部、底部、右侧或左侧显示饼图名称，而无需使用标签，就像他们在[这个](http://www.highcharts.com/demo/combo)highcharts 演示中使用的那样：

```
 labels: {
            items: [{
                html: '<b>Total fruit consumption<b>',
                style: {
                    left: '40px',
                    top: '8px',
                    color: 'black'
                }
            }]
        } 
```

标签有一个以像素为单位的绝对位置，对于馅饼，我使用百分比。
当调整大小时，标签保持在同一个地方并且馅饼移动，并且我无法获得两者的相同百分比相对位置。馅饼示例：

```
{ data: [{ color: '#31B7C9', name: 'Slice 1', y: 1266364.92333333 }, { color: '#9ED93E', name: 'Slice 2', y: 7284620.73 }, { color: '#DABF12', name: 'Slice 4', y: 2330663.39333333 }], name: 'Pie Chart Name', type: 'pie', center: ["25%", "25%"], showInLegend: true, size: "20%", dataLabels: { enabled: false }} 
```

知道如何让饼图名称显示为其标题吗？

[此处](http://jsfiddle.net/VdDXC/1/)jsFiddle 中的示例。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:38:56.090

**编辑：** 所以看起来你想拥有与演示中相同的图表，而不仅仅是一个饼图。如果是这种情况，我下面的答案将失败。您将需要使用标签并定位它们。

----保留以下代码以供将来参考---

是的，使用 title 属性。这里的例子：http: [//jsfiddle.net/wergeld/svkmM/](http://jsfiddle.net/wergeld/svkmM/)

```
title: {
    text: 'A Title!'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T10:08:45.257

[我找到了一个允许在这里](http://highcharts.uservoice.com/forums/55896-general/suggestions/3073133-pie-title)显示饼图标题的插件。

# html - 使两列高度相同

> ID：12375692
> 
> 赞同：8
> 
> 时间：2012-09-11T18:25:25.267
> 
> 标签：html, css, twitter-bootstrap

我正在尝试制作具有 2列等高的 2 列设计（使用[Twitter Bootstrap ）。](http://twitter.github.com/bootstrap/)

让我们看这个例子：

```
<div class="row-fluid">
    <div class="span2">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
        </ul>
    </div>

    <div class="span10">
        test
    </div>
</div> 
```

​ 因为`.span2`是两根柱子中最高的，所以它会`.row-fluid`拉伸以适应它的高度。阅读完[这篇文章](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)后，我期望设置`min-height: 100%`on`.span10`会使其伸展到最大高度，但事实并非如此：

![截屏](../Images/2bf47e85459026ddd4434a386531a1dc.png)

[http://jsfiddle.net/WTNeB/1/](http://jsfiddle.net/WTNeB/1/)

这是为什么？任何解决方案可以`.span10`拉伸到其父高度，避免设置固定高度，以保持这种设计的灵活性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T18:36:18.180

试试这个：

[http://jsfiddle.net/WTNeB/2/](http://jsfiddle.net/WTNeB/2/)

请注意，我添加了`display:table`并且`display:table-cell` **我**更改了 css 选择器名称，以便它获得所需的优先级。

```
.row-fluid {
    border: 1px dotted gray;
    display: table;
}
.row-fluid .span2 {
    border: 1px solid blue;
    display: table-cell;
    float: none;
}
.row-fluid .span10 {
    min-height: 100%;
    border: 1px solid red;
    height: 100%;
    display: table-cell;
    float: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:00:10.313

古老的经典是[仿柱](http://www.alistapart.com/articles/fauxcolumns/)技术。在每个浏览器中都能完美运行，并且易于实现。

然而，一个缺点：您需要添加背景图像（因此需要再添加一个请求，除非您对背景进行[base 64 编码](http://www.freeformatter.com/base64-encoder.html)）。

在具有“自动高度”的块级元素上，无法将 height/min-height 设置为 100%。

# linux - Linux RTC 警报使用相对时间还是绝对时间？

> ID：12375704
> 
> 赞同：1
> 
> 时间：2012-09-11T18:26:09.857
> 
> 标签：linux, linux-kernel, linux-device-driver

我正在尝试在 Linux 设备上配置 RTC 警报。我使用了[RTC 文档](https://www.kernel.org/doc/Documentation/rtc.txt)中的一个示例：

```
 int retval
    struct rtc_time rtc_tm;
    /* .... */
    /* Read the RTC time/date */
    retval = ioctl(fd, RTC_RD_TIME, &rtc_tm);
    if (retval == -1) {
       exit(errno);
    }

    /* Set the alarm to 5 sec in the future, and check for rollover */
    rtc_tm.tm_sec += 5;
    if (rtc_tm.tm_sec >= 60) {
         rtc_tm.tm_sec %= 60;
         rtc_tm.tm_min++;
    }
    if (rtc_tm.tm_min == 60) {
         rtc_tm.tm_min = 0;
         rtc_tm.tm_hour++;
    }
    if (rtc_tm.tm_hour == 24)
         rtc_tm.tm_hour = 0;

    retval = ioctl(fd, RTC_ALM_SET, &rtc_tm);
    if (retval == -1) {
        exit(errno);
} 
```

此代码片段使用绝对时间（从纪元开始），它对我不起作用。我认为这是由于硬件中的错误，但经过一些看似随机的时间后，警报确实触发了。我设法找到的唯一其他文档是[rtc.cc](http://tomoyo.sourceforge.jp/cgi-bin/lxr/source/drivers/char/rtc.c#L491)中的评论：

```
 case RTC_ALM_SET: /* Store a time into the alarm */
 {
      /*
       * This expects a struct rtc_time. Writing 0xff means
       * "don't care" or "match all". Only the tm_hour,
       * tm_min and tm_sec are used.
       */ 
```

仅使用小时、分钟和秒这一事实表明时间与调用 ioctl 的时刻相关。

传递给 ioctl(fd, RTC_ALM_SET, &rtc_tm) 的时间应该是相对的还是绝对的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:08:15.063

RTC 闹钟的工作时间是绝对时间，换句话说，如果您希望闹钟在 5 分钟内响起，那么您应该读取当前时间并将当前时间加上 5 分钟，然后使用结果来设置闹钟时间。

这是来自 TI RTC 芯片文档的文本片段：(http://www.ti.com/lit/ds/symlink/bq3285ld.pdf)

> 在每个更新周期中，RTC 将日期、小时、分钟和秒字节与四个相应的警报字节进行比较。如果发现所有字节都匹配，则寄存器 C 中的报警中断事件标志位 AF 设置为 1。如果启用报警事件，则生成中断请求。

我相信这在 RTC 中是相当标准的......

# android - 如何在 osm 地图上画线

> ID：12375707
> 
> 赞同：4
> 
> 时间：2012-09-11T18:26:34.843
> 
> 标签：android

我有一张 OSM 地图，每 10 秒后，我会在途中更新一次经度和纬度。当用户离开时，我想在地图上绘制一条路线。即我想连接所有的经纬度对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:43:53.473

如果您使用 Osmdroid 来显示您的 OSM 地图，那么您需要的是一个**PathOverlay**，您可以使用它的 addPoint() 方法向其中添加点。查看我对这个问题的回答[OSMDroid PathOverlay](https://stackoverflow.com/questions/10104581/osmdroid-pathoverlay/10109812#10109812)

您应该能够通过此示例非常轻松地调整您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-14T05:33:33.827

这里：

```
private Polyline polyline;
private ArrayList<GeoPoint> pathPoints;

polyline = new Polyline();
polyline.setColor(Helper.getColor(context, R.color.red));
polyline.setWidth(POLYLINE_WIDTH);
mapView.getOverlays().add(polyline);

pathPoints.add(newLatLon);
pathPoints.add(newLatLon1);
pathPoints.add(newLatLon2);
polyline.setPoints(pathPoints); 
```

# c - 优化并重写以下C代码

> ID：12375709
> 
> 赞同：7
> 
> 时间：2012-09-11T18:26:48.027
> 
> 标签：c, optimization

这是一个教科书问题，涉及重写一些 C 代码以使其在给定的处理器架构上表现最佳。

给定：针对具有 4 个加法器和 2 个乘法器单元的单个超标量处理器。

输入结构（在别处初始化）：

```
struct s {
    short a;
    unsigned v;
    short b;
} input[100]; 
```

这是对该数据进行操作的例程。显然，必须确保正确性，但目标是优化其中的废话。

```
int compute(int x, int *r, int *q, int *p) {

    int i;
    for(i = 0; i < 100; i++) {

        *r *= input[i].v + x;
        *p = input[i].v;
        *q += input[i].a + input[i].v + input[i].b;
    }

    return i;
} 
```

所以这个方法有 3 个算术指令来更新整数 r、q、p。

这是我尝试用评论解释我的想法：

```
//Use temp variables so we don't keep using loads and stores for mem accesses; 
//hopefully the temps will just be kept in the register file
int r_temp = *r;
int q_temp = *q;

for (i=0;i<99;i = i+2) {
    int data1 = input[i];
    int data2 = input[i+1]; //going to try partially unrolling loop
    int a1 = data1.a;
    int a2 = data2.a;
    int b1 = data1.b;
    int b2 = data2.b;
    int v1 = data1.v;
    int v2 = data2.v;

    //I will use brackets to make my intention clear the order of operations I was planning
    //with respect to the functional (adder, mul) units available

    //This is calculating the next iteration's new q value 
    //from q += v1 + a1 + b1, or q(new)=q(old)+v1+a1+b1

    q_temp = ((v1+q1)+(a1+b1)) + ((a2+b2)+v2);
    //For the first step I am trying to use a max of 3 adders in parallel, 
    //saving one to start the next computation

    //This is calculating next iter's new r value 
    //from r *= v1 + x, or r(new) = r(old)*(v1+x)

    r_temp = ((r_temp*v1) + (r_temp*x)) + (v2+x);
}
//Because i will end on i=98 and I only unrolled by 2, I don't need to 
//worry about final few values because there will be none

*p = input[99].v; //Why it's in the loop I don't understand, this should be correct
*r = r_temp;
*q = q_temp; 
```

好的，我的解决方案给了我什么？查看旧代码，i 的每个循环迭代都将采用 max((1A + 1M),(3A)) 的最小延迟，其中前一个值用于计算新的 r，而 3 次添加的延迟用于 q。

在我的解决方案中，我展开 2 并尝试计算 r 和 q 的第二个新值。假设加法器/乘法器的延迟使得 M = c*A（c 是某个整数 > 1），r 的乘法运算绝对是速率限制步骤，所以我专注于此。我尝试尽可能多地并行使用乘法器。

在我的代码中，首先并行使用 2 个乘法器来帮助计算中间步骤，然后加法必须将它们组合起来，然后使用最终乘法来获得最后的结果。因此，对于 r 的 2 个新值（即使我只保留/关心最后一个），我需要 (1M // 1M // 1A) + 1A + 1M，总延迟依次为 2M + 1M。除以 2，我**每个循环的延迟值为 1M + 0.5A**。我计算出原始延迟/值（对于 r）为 1A + 1M。因此，如果我的代码是正确的（我都是手工完成的，还没有测试过！）那么我的性能会有一点提升。

此外，希望通过不直接在循环中访问和更新指针（主要感谢临时变量 r_temp 和 q_temp），我节省了一些加载/存储延迟。

* * *

那是我的尝试。绝对有兴趣看看其他人想出什么更好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:42:57.910

是的，可以利用这两条短裤。重新排列你的结构

```
struct s {
    unsigned v;
    short a;
    short b;
} input[100]; 
```

并且您可能能够更好地对齐体系结构上的内存字段，这可能允许更多这些结构位于同一内存页面中，这可能使您遇到更少的内存页面错误。

这都是推测性的，这就是为什么配置文件如此重要。

如果您有正确的架构，重新排列将为您提供更好的[数据结构对齐，](http://en.wikipedia.org/wiki/Data_structure_alignment)这会导致内存中更高的数据密度，因为更少的位丢失到必要的填充以确保类型与常见内存架构强加的数据边界对齐。

# android - Android 上的文本按钮，如 Apollo 音乐播放器中的按钮

> ID：12375718
> 
> 赞同：1
> 
> 时间：2012-09-11T18:27:10.100
> 
> 标签：android, button, android-image, android-button

在开发方面，我是 Android 平台的新手。但是，我从基本视图走得更远，我想创建类似以下按钮的东西：

![艺术家在 Apollo 音乐播放器中查看](../Images/817b63ae7f391032cedc30c442dead42.png)

这就是我想要实现的。我首先认为带有自定义背景的按钮就足够了。但是，我不知道有什么方法可以用里面的文字制作那个更暗的小线。所有图像都像按钮一样反应，并在您触摸它时突出显示。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:50:27.263

如果您查看[Apollo 的源代码，](https://github.com/CyanogenMod/android_packages_apps_Apollo)您会发现[ArtistsFragment](https://github.com/CyanogenMod/android_packages_apps_Apollo/blob/ics/src/com/andrew/apollo/grid/fragments/ArtistsFragment.java)不是由[Button](http://developer.android.com/reference/android/widget/Button.html)组成，而是由[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)类的[子类](https://github.com/CyanogenMod/android_packages_apps_Apollo/blob/ics/src/com/andrew/apollo/adapters/ArtistAdapter.java)创建[的膨胀的 RelativeLayout](https://github.com/CyanogenMod/android_packages_apps_Apollo/blob/ics/res/layout/gridview_items.xml)。

由于任何视图都可以有一个[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html) ，因此您可以创建任何布局以使其看起来像您想要的那样，并且仍然让它像一个按钮一样工作：

```
// Or load it as an item from an existing layout.
View myView = this.getLayoutInflater().inflate(R.layout.anything);
myView.setOnClickListener(new OnClickListener(){

    public void onClick(View arg0) {
        // Do stuff.
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:43:24.650

每个带有图像的片段都可以是背景设置为适当图像的布局。然后，您只需将按钮放在布局内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:43:28.297

您必须使用`Framelayout`或`RelativeLayout`。例如：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView  
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 

        android:scaleType="center"
        android:src="@drawable/your_drawabele" />

    <TextView
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:layout_marginBottom="20dip"
        android:layout_gravity="center_horizontal|bottom"

        android:padding="12dip"

        android:background="#AA000000"
        android:textColor="#ffffffff"

        android:text="your_text" />

</FrameLayout> 
```

# ruby-on-rails - 为什么到处都是 Rails.rb 文件？

> ID：12375720
> 
> 赞同：0
> 
> 时间：2012-09-11T18:27:33.983
> 
> 标签：ruby-on-rails

正在挖掘我的 Rails 应用程序，发现到处都是 rails.rb 文件。在我的 ruby​​ gems 目录中，例如：

```
...gems\devise-2.0.4\lib\devise\rails.rb
...gems\cucumber-rails-1.3.0\lib\cucumber\rails.rb
...gems\railties-3.2.3\lib\rails.rb 
```

我假设每当您发出诸如“rails xxx”之类的命令时都会执行。因此，所有这些额外的 rails.rb 文件与原始 rails.rb 文件相结合，基本上构成了一个大 rails.rb 文件。本质上，当我们输入“rails xxx”时，它会全部通过吗？

只是在寻找一些确认以及更多关于此的知识。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:35:49.413

了解这些`rails.rb`文件在做什么的最好方法是阅读源代码。

*   [集会](https://github.com/rails/rails/blob/master/railties/lib/rails.rb)
*   [设计](https://github.com/plataformatec/devise/blob/master/lib/devise/rails.rb)
*   [黄瓜栏杆](https://github.com/cucumber/cucumber-rails/blob/master/lib/cucumber/rails.rb)

如您所见，在任何库中，文件都采用不同的范围。常见的行为是该文件`rails.rb`通常包含从 Rails 项目加载时初始化库所需的代码。

顺便说一句，这与 script/rails 命令无关，并且没有“big rails.rb”文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:36:47.097

这些文件不会生成，而只是您正在使用的这些库的源文件。

在这种情况下，它们可能是与 Rails 相关的类，它们要么以某种方式扩展 Rails，要么对其进行修改，或者使库与 Rails 交互。

Rails 是 Ruby 领域中非常常见的框架，因此大多数（如果不是全部）库都将与 Rails 进行某种集成。

绝不是在您运行时加载所有这些，`rails XXX`而是​​在您的应用程序加载这些库时，可能会执行它们的 rails.rb 文件以提供与 Rails 的某种集成。

# bash - 如果命令输出包含某个字符串，我如何测试（在一行中）？

> ID：12375722
> 
> 赞同：82
> 
> 时间：2012-09-11T18:27:54.937
> 
> 标签：bash

在 bash 的一行中，当输出`/usr/local/bin/monit --version`不完全包含时，我如何返回退出状态 0，`5.5`而当它包含时，如何返回退出状态 1？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-11T18:32:38.980

```
! /usr/local/bin/monit --version | grep -q 5.5 
```

(`grep`如果找到匹配项，则返回退出状态 0，否则返回 1。`-q`选项“quiet”告诉它不要打印找到的任何匹配项；换句话说，它告诉`grep`你唯一想要的就是它的返回-value。`!`开头的 反转整个管道的退出状态。）

**编辑添加：**或者，如果您想在“纯 Bash”（而不是调用`grep`）中执行此操作，您可以编写：

```
[[ $(/usr/local/bin/monit --version) != *5.5* ]] 
```

（在[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)[的第 3.2.4.2 节“条件构造”中](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)`[[...]]`有解释。就像在 fileglobs 中一样：零个或多个字符，加上，加上零个或多个字符。）[](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)*`*5.5*``5.5`*

 ** * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-11T18:32:54.090

```
[ $(/usr/local/bin/monit --version) == "5.5" ] 
```

eg-1：检查成功

```
[ $(/usr/local/bin/monit --version) == "5.5" ] && echo "OK" 
```

eg-2：检查失败

```
 [ $(/usr/local/bin/monit --version) == "5.5" ] || echo "NOT OK" 
```

或者，仅检查输出是否包含`5.5`：

```
[[ $(/usr/local/bin/monit --version) =~ "5.5" ]] || echo "NOT OK" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-12-19T13:30:19.833

测试grep的返回值：

```
sudo service xyz status | grep 'not' &> /dev/null
if [ $? == 0 ]; then
   echo "whateveryouwant"
fi 
```

我会推荐 cron，它适用于 SALT 堆栈*

# border - 底部边框在 :active 上没有消失

> ID：12375725
> 
> 赞同：0
> 
> 时间：2012-09-11T18:28:05.673
> 
> 标签：border, insets

我试图让底部的蓝色边框在 :active 上消失。持久边框与背景 div 相关联，但当超链接处于活动状态时，即使超链接没有底部边框，它也不会消失。

这是该项目的小提琴：

[http://jsfiddle.net/ajrdesign/cTKnn/5/](http://jsfiddle.net/ajrdesign/cTKnn/5/)

任何人都知道为什么这个背景 div 出现在其他元素之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:55:17.143

弄清楚了。我为 ul li 元素而不是 li 元素添加了边框。所以 :hover 和 :active 很简单，在那个之上添加另一个边框。改变了它，它工作得很好！

[http://jsfiddle.net/ajrdesign/HgnwG/](http://jsfiddle.net/ajrdesign/HgnwG/)

# wpf - 索引器中的子表达式？

> ID：12375726
> 
> 赞同：0
> 
> 时间：2012-09-11T18:28:26.140
> 
> 标签：wpf, data-binding

```
Path=[Items[0].Name] 
```

可能吗？

我之所以问，因为这篇文章[如何在列表视图的组标题中保存 IsExpanded 状态](https://stackoverflow.com/questions/2808777/how-to-save-the-isexpanded-state-in-group-headers-of-a-listview?lq=1)似乎暗示这是可能的。但是，我无法让它工作或查看任何声称这是可能的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:23:54.030

该示例应该在没有方括号的情况下工作。

```
{Binding Path=Items[0].Name} 
```

在其他情况下，您可能需要使用 Binding 的 Source 属性。例如：

```
{Binding Path=Name, Source={Binding Path=Items[0]}} 
```

# file - 此时在基本的 if then 语句中是出乎意料的

> ID：12375729
> 
> 赞同：6
> 
> 时间：2012-09-11T18:28:41.880
> 
> 标签：file, if-statement, batch-file, exists

我正在尝试这个并且无法让它工作？此时获取 datareal\copiesdonotdelete.txt 是意外的。

```
rem @echo off
if exists datareal\copiesdonotdelete.txt goto DoFunction1
Goto DoFunction2
Exit
:DOFunction1
rename data datatemp
rename datareal data
rename datatemp datacopyfiles
Echo Done
Exit
:DOFunction2
 rename data datatemp
 rename datacopyfiles data
 rename datatemp datareal
 Echo Done
 Exit 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T18:43:14.543

它的存在不存在

```
if exist datareal\copiesdonotdelete.txt goto DoFunction1 
```

# grails - 没有身份验证的 Grails Spring Security 插件访问控制/授权？

> ID：12375730
> 
> 赞同：3
> 
> 时间：2012-09-11T18:28:53.377
> 
> 标签：grails, spring-security

**我的问题：**

我很想在我的 Grails 应用程序中使用 Spring Security 插件的访问控制/授权机制，而不必使用插件的身份验证机制。我发现的各种 Grails Spring Security 插件示例（[例如这个）结合了这两个功能。](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)有没有一种简单的方法来进行访问控制？

**背景：**

*   我想为我现有的应用程序添加基于角色的访问控制。我很想只注释我的控制器或使用 Config.groovy 映射方法来设置访问控制。
*   我的应用程序已经有一个用户域类。
*   用户域类已经使用 BCrypt 处理加密密码。
*   该应用程序没有“角色”域类。
*   我已经有了用于处理登录和注销的控制器操作、视图和业务逻辑。我没有兴趣用插件的实现替换它。

**在正确的轨道上，但不是很有帮助：**

我知道这是可能的，正如另一个[问题](https://stackoverflow.com/questions/1322135/spring-security-authorization-without-authentication)中所解释的那样：但是，这些问题及其答案解释了如何使用原始 Spring Security 框架在 Java 应用程序中执行此操作。我希望有人以与 Grails Spring Security 插件的最新版本（撰写本文时为 1.2.7.3）兼容的方式来说明如何执行此操作。我不想重新发明插件已经处理好的轮子。

此外，此[示例](http://blogs.bytecode.com.au/glen/2010/01/15/hacking-custom-authentication-providers-with-grails-spring-security.html)解释了如何执行其中一些操作，但它似乎已过时，因为它基于使用 Spring Security 2.x 的旧版本插件。它也只对应用程序的一个部分使用自定义身份验证，而它看起来仍然在其他地方使用 Spring Security 插件的域类。

**怎么做？**

有人可以为我制定一个方法吗？我假设我需要创建我的角色域类。之后，我假设它将涉及自定义身份验证对象等。但是我如何让他们使用插件的现有代码呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T20:54:26.327

您可以使用自定义身份验证提供程序，我有一个更新版本，这是我最近一次谈话的一部分。请参阅此博客文章，其中包含示例应用程序和演讲视频链接：[http ://burtbeckwith.com/blog/?p=1090](http://burtbeckwith.com/blog/?p=1090)

使用自定义会很简单`UserDetailsService`- 这是插件最常见的自定义，因此它在文档中有自己的章节：http: [//grails-plugins.github.com/grails-spring-security-core/ docs/manual/guide/11%20Custom%20UserDetailsS​​ervice.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/11%20Custom%20UserDetailsService.html)

基本上，您需要创建一个 Spring Security`User`实例，而 Spring Security（和插件）并不关心您如何获取数据。因此，您的自定义`UserDetailsService`只需要成为您当前的身份验证方案和 Spring Security 之间的桥梁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:16:58.893

我最终创建了自己的访问控制/授权机制，而不是使用 Spring Security 插件。我永远无法弄清楚如何将插件的身份验证机制与授权机制分开。自己做这项工作非常容易。

我做了以下事情：

*   创建了一个新的角色域类。
*   向我的 User 域类添加了 Set 属性和 hasMany 关系。
*   创建了一个新的 AuthorizationFilters 过滤器。这是我输入授权规则的地方。在这个过滤器中，我可以检查用户是否具有访问给定 URL 并重定向到登录页面、重定向到“未授权页面”或允许他们通过所需的角色。

这没有插件好的语法糖，也不是很简洁，但它很容易实现和理解。

# primefaces - Primefaces文件下载类实现错误

> ID：12375735
> 
> 赞同：0
> 
> 时间：2012-09-11T18:29:17.743
> 
> 标签：primefaces, download

当我实现 Primefaces UserGuide 中的 Primefaces FileDownload 类时，我的 IDE 显示设置方法返回类型为 void 或更改为构造函数。

> 公共文件下载控制器（）

```
public class FileBean {

private StreamedContent file;

public FileDownloadController() {
InputStream stream = this.getClass().getResourceAsStream("yourfile.pdf");
file = new DefaultStreamedContent(stream, "application/pdf",
"downloaded_file.pdf");
}
public StreamedContent getFile() {
return this.file;
}
} 
```

什么是确切的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T22:24:35.473

那是因为你的班级有不同的名字，要解决这个变化

```
 public FileDownloadController() to public FileBean() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T22:31:12.177

将您的代码更改为这样..

包 org.primefaces.examples.view；

```
 public class FileDownloadController {

private StreamedContent file;

public FileDownloadController() {        
    InputStream stream = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("/images/optimusprime.jpg");
    file = new DefaultStreamedContent(stream, "image/jpg", "downloaded_optimus.jpg");
}

public StreamedContent getFile() {
    return file;
}  
} 
```

# node.js - IISNode 和 Express 3 产生 http 403.13 错误

> ID：12375736
> 
> 赞同：4
> 
> 时间：2012-09-11T18:29:20.447
> 
> 标签：node.js, express, iisnode

我在我的 Win7 机器上本地设置 IIS 7 上的 IISNode。我按照网站上的说明进行操作，样品工作正常。

我在 IIS 管理器中创建了一个新网站和 AppPool 来运行一个全新的 Express 站点外壳。我添加了 web.config 以将 iisnode 模块绑定到我的起始 .js 文件。

当我浏览到默认路由 (/) 时，我收到一个 Http 403.14 错误（服务器配置为不列出目录的内容）。

我试图将 IISNode 示例目录重新映射到我的 Express 应用程序所在的位置，并且发生了同样的错误。

如果我尝试去一个不存在的路线，我会收到 Connect 的 404 错误消息`Cannot VERB ROUTE`。

我觉得我错过了一些简单且（希望很明显）的东西。

有没有人遇到过这个，可以给我一些见解？即使我可以检查，在线查看也几乎没有提供任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:22:33.833

我弄清楚我遇到了什么问题。在我的 web.config 中，我有默认的 IISNode 部分和处理程序部分，用于将 iisnode 模块映射到我的`app.js`文件。

但是，在使用 Express 时，每条路由都必须经过该文件。因此，通过添加下面的重写部分，它解决了我的问题。

```
<rewrite>
  <rules>
    <rule name="Catch All">
      <match url="/*" />
      <action type="Rewrite" url="app.js" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T23:35:33.737

有关更高级的 URL 重写配置，请查看[http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html](http://tomasz.janczuk.org/2012/05/yaml-configuration-support-in-iisnode.html)上的 web.config 模板。此模板允许您将对静态内容的请求重定向到 IIS 静态文件处理程序，并保留通过 HTTP 访问 iisnode 日志的权限。

```
 <?xml version="1.0" encoding="utf-8"?>  
<configuration>  
    <system.webServer>           
      <handlers>  
           <add name="iisnode" path="server.js" verb="*" modules="iisnode"/>  
     </handlers>  
      <rewrite>  
           <rules>  
                <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">  
                     <match url="iisnode"/>  
                </rule>  
                <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">                      
                    <match url="^server.js\/debug[\/]?" />  
                </rule>  
                <rule name="StaticContent">  
                     <action type="Rewrite" url="public{{REQUEST_URI}}"/>  
                </rule>  
                <rule name="DynamicContent">  
                     <conditions>  
                          <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True"/>  
                     </conditions>  
                     <action type="Rewrite" url="server.js"/>  
                </rule>  
           </rules>  
      </rewrite>  
   </system.webServer>  
 </configuration> 
```

**上面的 web.config 有如下效果：**

1.  它将 server.js 指定为 node.js 应用程序的入口点。
2.  它将映射到“公共”子目录中物理文件的所有 URL 请求重定向到 IIS 静态文件处理程序。与从 node.js 应用程序中提供静态内容相比，使用 IIS 静态文件处理程序具有很大的性能优势。该处理程序利用 IIS 和 OS 低级缓存机制，提供卓越的性能。
3.  它允许 IIS 将捕获 node.js 应用程序输出的日志文件作为静态文件提供服务，以便您可以通过 HTTP 访问它们。默认情况下，如果您的 server.js 入口点位于[http://example.com/server.js ，则可以通过](http://example.com/server.js)[http://example.com/iisnode](http://example.com/iisnode)访问日志文件。
4.  [它在http://example.com/server.js/debug](http://example.com/server.js/debug)公开了内置的节点检查器调试器。了解有关使用 iisnode 进行调试的更多信息。
5.  它发送所有其他 HTTP 请求以由 server.js 中的 node.js 应用程序处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-15T17:48:56.490

[在我的链接](https://stackoverflow.com/questions/36608917/how-to-create-the-right-re-write-rules-for-web-config-on-iis-7-5-for-angular-ful)中找到更多信息我在问题的底部有一个工作示例

在其项目配置下方

[![在此处输入图像描述](../Images/d4e99932a1cf24cbac4e50036d3457ed.png)](https://i.stack.imgur.com/6rmn1.png)

在 server.js 的代码下方

```
 "use strict";

 var express = require('express');
 // determind what mode we are
 var env = process.env.NODE_ENV = process.env.NODE_ENV||'developemnt';
 var app = express();
 //configure the view engine

 app.set('views', __dirname + '/views');
 app.engine('html', require('ejs').renderFile);
 app.set('view engine', 'html');

 //app.use('/public', express.static(__dirname + '../public'));

 //the asterisk handles all routes includes javascript, css, html request...
 app.get('*', function (req , res) {
        res.render('index');
 });
 var PORT = 3030;
 app.listen((process.env.PORT!==undefined)?process.env.PORT:PORT);
 console.log('Listening to PORT : ' + process.env.PORT ); 
```

在 index.html 下面

```
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
  <base href="/">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  </head>
  <body ng-app="idetikApp">
  <div ng-view=""></div>
    <script src="app/app.js"></script>
  </body>

</html> 
```

网络配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.webServer>
      <handlers>
           <add name="iisnode" path="server/server.js" verb="*" modules="iisnode"/>
     </handlers>
      <rewrite>
           <rules>
                <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
                     <match url="iisnode"/>
                </rule>
                <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">
                    <match url="^server/server.js\/debug[\/]?" />
                </rule>
                <rule name="StaticContent">
                     <action type="Rewrite" url="public{{REQUEST_URI}}"/>
                </rule>
                <rule name="DynamicContent">
                     <conditions>
                          <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True"/>
                     </conditions>
                     <action type="Rewrite" url="server/server.js"/>
                </rule>
           </rules>
      </rewrite>
   </system.webServer>
 </configuration> 
```

应用程序.js

```
angular.module('idetikApp', [ 'ngResource', 'ngRoute']);

angular.module('idetikApp').config(function ($routerProvider, $locationProvider) {
  $locationProvider.html5Mode(true);
  $routerProvider.when('/', {templateUrl: '/partials/main', controller:'mainctrl'})

});

angular.module('idetikApp').controller('mainctrl', function ($scope) {
  $scope.mayvar = "hello world"
}) 
```

和 main.html

```
<h1>this is a partial</h1>
<h2>{{myvar}}</h2> 
```

和我的文件夹结构

[![在此处输入图像描述](../Images/e0cd992b0b1bef9491042f46981a77df.png)](https://i.stack.imgur.com/ui1Im.png)

但现在我在公共文件中找不到我的文件:(

[![在此处输入图像描述](../Images/8addc555690017ad84b9f6dfddb25358.png)](https://i.stack.imgur.com/eUIPv.png)

# php - SHOW FIELD FROM 中的语法错误

> ID：12375739
> 
> 赞同：0
> 
> 时间：2012-09-11T18:29:29.793
> 
> 标签：php, mysql

我对以下语句有疑问，我知道它可能是小而愚蠢的，但我似乎找不到解决方案。

```
$field_sql = 'SHOW FIELDS FROM '.$table  '  WHERE FIELD '=''.$column'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:31:08.150

当您不需要它们时，您缺少一个点并带有引号：

```
$field_sql = 'SHOW FIELDS FROM ' . $table . ' WHERE FIELD = ' . $column;
                                          ^               ^^^          ^
                                          Missing         Removed extra quotes 
```

但是，对于 SQL 字符串值，您可能需要引号，因此您可以使用与用来表示字符串的引号不同的引号：

```
$field_sql = 'SHOW FIELDS FROM `' . $table . '` WHERE FIELD = "' . $column . '"'; 
```

我还为表名添加了反引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:30:44.560

```
$field_sql = 'SHOW FIELDS FROM ' . $table . ' WHERE FIELD = '.$column; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:32:42.467

你可以试试

```
$field_sql= 'SHOW FIELDS FROM ' . $table .  ' WHERE FIELD =' . $column; 
```

# javascript - 如何使表单的子元素居中？

> ID：12375741
> 
> 赞同：0
> 
> 时间：2012-09-11T18:29:35.007
> 
> 标签：javascript, forms, element, center

我有一个我在 javascript 中动态创建的表单，并以如下方式结束：

```
mybreak=document.createElement("p");
form.appendChild(mybreak);

var buttonElement = document.createElement('button');
buttonElement.setAttribute("type","submit");
buttonElement.innerHTML="<img src=\"images/lock.png\"  width=\"80\" height=\"80\" alt=\"Submit\"/>Try it!";
form.appendChild(buttonElement); 
```

这导致我的提交按钮在页面上左对齐。我希望它以页面为中心。添加 innerHTML 使按钮内的文本居中，这不是我想要的。为我的孩子添加 align = center 属性具有相同的效果。

我在这里缺少什么技巧才能使提交按钮很好地位于页面中心？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:32:30.243

将一些 CSS 添加到`<p>`保存按钮的位置。

```
p {
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:32:42.253

使用 CSS：

```
#element_containing_submit_btn { text-align: center; } 
```

[http://jsfiddle.net/egd9G/](http://jsfiddle.net/egd9G/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:12:57.167

回答我自己的问题我觉得很奇怪，但我所追求的是理解如何严格从 javascript 中将我的提交按钮居中，因为我是动态创建表单并且只需要最后一个提交按钮居中。

解决方案是简单地修改我的原始代码如下：

```
 newDiv = document.createElement("div");
 newDiv.setAttribute("align","center");

 var buttonElement = document.createElement('button');
 buttonElement.setAttribute("text-align","center");
 buttonElement.setAttribute("type","submit");
 buttonElement.innerHTML="<img src=\"images/lock.png\"  width=\"80\" height=\"80\" alt=\"Submit\"/>Try it!";
 newDiv.appendChild(buttonElement);
 form.appendChild(newDiv); 
```

# c++ - 函数调用的括号

> ID：12375745
> 
> 赞同：5
> 
> 时间：2012-09-11T18:30:00.713
> 
> 标签：c++

在下面的代码片段中，如果我排除了第二次调用的括号`std::istreambuf_iterator`，我会在最后一行得到一个编译错误：

> .c_str() 的左边必须有一个类/结构/联合。

```
std::ifstream file("file.txt");;

std::string prog(
    std::istreambuf_iterator<char>(file),
    (std::istreambuf_iterator<char>()));
prog.c_str(); 
```

这些括号实际上是做什么的？在我看来，他们应该能够被排除在外。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:31:21.720

如果没有括号，这将是[**最令人烦恼的 parse**](http://en.wikipedia.org/wiki/Most_vexing_parse)的情况。它不会声明一个变量，而是一个返回 a 的函数`std::string`，调用`prog`并将这两种类型作为参数。如果您稍后尝试调用它，您将收到链接器错误。

# sql - 在 MSSQL 中将每个数值增加 15%

> ID：12375747
> 
> 赞同：4
> 
> 时间：2012-09-11T18:30:18.057
> 
> 标签：sql, sql-server-2008, sql-update

我有一个表**Emp**分别有一个**Name**和**Salary**列。**我想在MSSQL**中将每个薪水提高 15% 。

下面的查询仅针对单个更新，我仍然无法完成...

```
UPDATE    Emp
SET       Salary = '(@Salary / 100) * 15 + @salary'

WHERE Name='Zangiv' 
```

我需要一个查询语句来一次更新多行。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:32:15.197

```
UPDATE Emp
SET salary = salary * 1.15
WHERE Name = 'Zangiv' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:31:56.777

鉴于您提出的要求：

> 我想在 MSSQL 中将每个薪水提高 15%

以下查询将使**所有**薪水增加 15%。

```
UPDATE    Emp
SET       Salary = Salary * 1.15 
```

如果您实际上不想更新表中的**所有**行，请酌情使用`WHERE`子句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T18:32:07.813

根据您的意思是“具有名称的多行`Zangiv`”还是所有行：

```
UPDATE dbo.Emp
SET Salary = Salary * 1.15
--WHERE Name = 'Zangiv'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T18:32:03.617

```
UPDATE Emp SET Salary = Salary * 1.15; 
```

将所有员工的工资提高15%；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T18:34:34.767

SQL 2008 起

```
UPDATE Emp
SET Salary *= 1.15 
```

否则

```
UPDATE Emp
SET Salary = Salary * 1.15 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-04T19:32:59.187

**查询以更新单个特定行**

```
UPDATE Emp
SET Salary = Salary*15/100
WHERE Name = 'Zangiv' 
```

**查询更新所有行**

```
UPDATE Emp SET Salary = Salary*15/100 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-09-07T14:27:52.043

我做了同样的事情而不是增加我将价值降低了 20%，就像这样

> SET 成本 = 成本 - (成本 * 0.20) 其中序列号 = 'mmmmmm'

# passwords - sahi 脚本中用于掩码密码的断言

> ID：12375749
> 
> 赞同：2
> 
> 时间：2012-09-11T18:30:27.850
> 
> 标签：passwords, assertion, sahi

我们如何在 sahi 脚本中应用断言来检查密码字段是否显示掩码值？例如，`**********`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:37:02.270

从输入中获取类型属性并检查它是否等于“密码”：

```
_assertEqual(_textbox("myTextBox").getAttribute("TYPE"), "password") 
```

编辑：为避免混淆，根据下面 Narayan 的评论，正确的做法实际上是：

```
_assertExists(_password("id")) 
```

# c++ - Allegro 5 在图元上绘制位图

> ID：12375750
> 
> 赞同：1
> 
> 时间：2012-09-11T18:30:31.387
> 
> 标签：c++, graphics, sprite, allegro, allegro5

我最近尝试在 allegro 5 中创建一个库存系统，在其中我绘制了一个 20x20 的正方形网格并在周围拖放项目。问题是，我可以看到项目精灵*在我绘制的实际网格下方*，这是一种不需要的效果。这是我的代码：

```
if(draw)
        {
            draw = false;
            al_draw_bitmap(image, item.posx, item.posy, 0);

            if(mouseKey)
               {
                   grab = true;
                   item.posx = mouse.posx - (item.boundx-5);
                   item.posy = mouse.posy - (item.boundy-5);
               }

            else if(mouseKey == false && grab == true)
            {
                for(int i = 0; i < mouse.posx; i += 20)
                {
                    if(i < mouse.posx)
                        item.posx = i;
                }
                for(int j = 0; j < mouse.posy; j += 20)
                {
                    if(j < mouse.posy)
                    {
                        item.posy = j;
                    }
                }
                grab = false;
            }

            for(int i = 0; i <= width; i += 20)
            {
                al_draw_line(i, 0, i, height, al_map_rgb(0, 0, 0), 1);
                al_draw_line(0, i, width, i, al_map_rgb(0, 0, 0), 1);
            }

            al_flip_display();
            al_clear_to_color(al_map_rgb(40,40,40));
        } 
```

（我知道它写得非常糟糕而且没有优化，但我在大约 10 分钟内写了它只是作为一个测试）

我怎样才能使项目精灵不显示它上面的线条？如果我太含糊，这是我的问题的一个例子：

![我的问题](../Images/87fda5ecb788e20796bab8dc8c77ee07.png)

我在 Windows XP 上使用 Codeblocks IDE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:54:06.223

除非您摆弄 OpenGL 设置，否则您将始终将最后绘制的东西放在首位。所以在这种情况下，只需移动`al_draw_bitmap(image, item.posx, item.posy, 0);`到正上方`al_flip_display()`。

请注意，您会遇到一些问题，因为您正在操作`item.posx`并且`item.posy`在该部分中，因此您必须首先缓存结果：

```
int x = item.posx;
int y = item.posy;

// ... 

al_draw_bitmap(image, x, y, 0);
al_flip_display(); 
```

然而，这只是对更大问题的一个创可贴：你不应该改变你的绘图块内的任何东西。整个 if/else 块应该在其他地方。IE：

```
if (event timer is a game tick)
{
  do all logic stuff
  draw = true
}

if (draw)
{
  do all drawing stuff
  draw = false;
} 
```

# algorithm - 双 for 循环的复杂性

> ID：12375755
> 
> 赞同：7
> 
> 时间：2012-09-11T18:30:58.230
> 
> 标签：algorithm, discrete-mathematics, asymptotic-complexity

我正在尝试使用 Big O 表示法找出 for 循环的复杂性。我以前在我的其他课程中也这样做过，但是这个比其他的更严格，因为它是在实际算法上的。代码如下：

```
for(cnt = 0, i=1; i<=n; i++) //for any size n
{
    for(j = 1; j <= i; j++)
    {
       cnt++;
    }
} 
```

和

```
for(cnt = 0, i=1; i<=n; i*=2) //for any size n
{
    for(j = 1; j <= i; j++)
    {
       cnt++;
    }
} 
```

我已经知道第一个循环的复杂度为 O(n)，因为它正在遍历列表 n 次。至于第二个循环，我有点失落。我相信对于每个被测试的 n ，它都会经过 i 次循环。我（错误地）假设这意味着每次评估循环都是 O(n*i) 。我的假设中有什么遗漏的吗？我知道 cnt++ 是常数时间。

感谢您在分析中的帮助。每个循环都在自己的空间中，它们并不在一起。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T18:39:18.823

第一个示例的外循环执行`n`次数。对于外层循环的每次迭代，内层循环都会执行`i`次数，因此总复杂度可以计算如下：第一次迭代一个，第二次迭代两个，第三次迭代三个，依此类推，再加`n`上`n`-第一次迭代。

```
1+2+3+4+5+...+n = (n*(n-1))/2 --> O(n^2) 
```

第二个例子比较棘手：因为`i`每次迭代都加倍，所以外层循环只执行了`Log2(n)`几次。假设它`n`是 的幂`2`，则内部循环的总数为

```
1+2+4+8+16+...+n 
```

这是`2^Log2(n)-1 = n-1`为了复杂性`O(n)`。

对于`n`不是 2 的幂的 s，确切的迭代次数是`(2^(Log2(n)+1))-1`，它仍然是`O(n)`：

```
1      -> 1
2..3   -> 3
4..7   -> 7
8..15  -> 15
16..31 -> 31
32..63 -> 63 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:40:12.287

The first example is O(N^2) and [What is the Big-O of a nested loop, where number of iterations in the inner loop is determined by the current iteration of the outer loop?](https://stackoverflow.com/questions/362059/what-is-the-big-o-of-a-nested-loop-where-number-of-iterations-in-the-inner-loop) would be the question that answers that where the key is to note that the inner loop's number of rounds is dependent on n.

The second example is likely O(n log n) since the outer loop is being incremented on a different scale than linear. Look at binary search for an example of a logarithmic complexity case. In the second example, the outer loop is O(log n) and the inner loop is O(n) which combine to give a O(n log n) complexity.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:37:31.503

希望这不是家庭作业，但我确实看到你至少在这里做了一次尝试，所以这是我对此的看法：

`cnt`递增 n*(n+1)/2 次，这使得两个循环的整个集合为 O(n^2)。第二个循环平均为 O(n/2)，即 O(n)。

# sql - 在 SQLPLUS for Oracle 10.2 中搜索列/字段的搜索命令

> ID：12375756
> 
> 赞同：0
> 
> 时间：2012-09-11T18:30:58.103
> 
> 标签：sql, oracle

我想搜索名为的列/字段`ACC`

我有 28 个用户。我通过这个命令得到了那个信息；列出所有模式：

```
SELECT username FROM all_users ORDER BY username; 
```

我通过以下命令连接到名为“ABCD”的列表中的用户 #13：`SHOW USER;`

这是一个详细的结构。

```
user1 > Has many tables > each table has many column/field.
user2 > Has many tables > each table has many column/field.
user3 > Has many tables > each table has many column/field. 
```

等等。

我需要搜索称为的字段或列`ACC`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:35:28.867

您需要使用[ALL_TAB_COLUMNS](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2103.htm#REFRN20277)或 DBA_TAB_COLUMNS，具体取决于您的访问权限。

以下将为您提供每个表，其中包含列`acc`以及“拥有”该表的用户。

```
select owner, table_name
  from dba_tab_columns
 where column_name = 'ACC' 
```

ALL_TAB_COLUMNS 将显示您登录的用户可以访问的所有表（及其列）。DBA_TAB_COLUMNS 为数据库中的所有内容显示它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:51:27.607

如果我创建一个虚拟表，那么我知道我有一些匹配的数据：

```
create table t42 (field_acct_1 number, field_acct_2 number);
insert into t42 values (123, 456);
insert into t42 values (234, 567);
insert into t42 values (678, 123);
insert into t42 values (123, 123); 
```

根据评论中提到的[最新答案](https://stackoverflow.com/a/12373271/266304)，我可以使用游标和批量收集（以允许重复值）来查找匹配项：

```
set serveroutput on

declare
    type t_values is table of number;
    l_values t_values;

    cursor c1(cp_value number) is
        select owner, table_name, column_name,
            'select "' || column_name
                || '" from "' || owner ||'"."'|| table_name
                || '" where "' || column_name || '" = ' || cp_value
                as query
        from all_tab_columns
        where column_name like '%ACC%'
        and owner != 'SYS'
        and data_type = 'NUMBER'
        order by owner, table_name, column_name;
begin
    for r1 in c1(123) loop
        execute immediate r1.query bulk collect into l_values;
        for i in 1..l_values.count loop
            dbms_output.put_line(r1.owner
               ||'.'|| r1.table_name
               ||'.'|| r1.column_name
               ||':'|| l_values(i));
        end loop;
    end loop;
end;
/ 
```

我已将其限制为查找`NUMBER`列以节省时间并排除`SYS`表，但您可以添加过滤器以减少它必须做的更多工作。除此之外，这几乎是相同的想法。如果不清楚，请参阅较早答案中的嵌入式评论，以了解发生了什么。

这给了我（作为 owner.table.column:value）：

```
SCOTT.T42.FIELD_ACCT_1:123
SCOTT.T42.FIELD_ACCT_1:123
SCOTT.T42.FIELD_ACCT_2:123
SCOTT.T42.FIELD_ACCT_2:123 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:38:50.447

我能够自己弄清楚。

```
SELECT
      COLUMN_NAME 
FROM USER_TAB_COLUMNS 
WHERE COLUMN_NAME like '%ACC%'; 
```

我还可以通过选择找出表名`table_name`

```
SELECT
       COLUMN_NAME,
       TABLE_NAME 
FROM USER_TAB_COLUMNS 
WHERE COLUMN_NAME like '%ACC%'; 
```

以下查询是从不同的表中选择的，它有更多的结果和显示`OWNER`。

```
SELECT 
      distinct owner,
      COLUMN_NAME,
      TABLE_NAME 
FROM all_tab_columns 
WHERE COLUMN_NAME like '%ACC%' 
```

搜索表

```
SELECT
      COLUMN_NAME,
      TABLE_NAME 
FROM USER_TAB_COLUMNS 
where TABLE_NAME like '%X%' 
```

# visual-studio-2012 - 带有 SSDT 的 Visual Studio 2012 SQL 数据库项目

> ID：12375759
> 
> 赞同：5
> 
> 时间：2012-09-11T18:31:13.723
> 
> 标签：visual-studio-2012, sql-server-2012, sql-server-data-tools

我开始使用带有集成 SQL Server 数据工具的 Visual Studio 2012，虽然我观看了 2 篇关于开始使用 SQL 数据库项目的 Microsoft 视频，但我仍然无法理解如何使用它们，尤其是因为我是 db 新手发展。

一些问题：

1.  导入数据库或添加对数据库的引用有什么区别？

2.  服务器资源管理器和 SQL Server 对象资源管理器选项卡有什么区别？在一个中，我可以通过 localhost\SQLEXPRESS.dbname 浏览数据库，另一个通过 localdb\Projects。这些在什么时候同步？

3.  如何更改项目属性下的目标数据库名称？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T18:43:14.880

1) 导入数据库会创建一个包含所有数据库工件的项目。添加数据库作为参考允许项目访问数据库。因此，如果您有一个使用 db 的 SSDT 项目和 ac# 项目，则 c# 项目将获得引用。您可以选择通过导入现有数据库来创建 SSDT 项目。

2) SQL Server 对象资源管理器是 SSDT 的一部分，允许您执行在线 SQL 开发，包括创建新工件、向表中添加数据和执行脚本。

3) 更改目标数据库名称以进行调试（构建/调试时数据库所在的位置）更改项目属性菜单的调试选项卡中的目标连接字符串。

我发现[这个](http://msdn.microsoft.com/en-us/library/hh272686%28v=VS.103%29.aspx)链接很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T22:12:31.387

SQL Server 对象资源管理器 (SSOX) 和服务器资源管理器之间存在许多差异。这里有几个： SSOX 允许您启动重构操作 SSOX 在解决方案资源管理器中提供源代码的逻辑视图

简而言之，SSOX 以数据库开发为目标，而 Server Explorer 是（我认为）许多服务器类型的通用分层查看器。

问候贾米特

# ios - 在 QuickDialog 控制器上搜索/过滤

> ID：12375760
> 
> 赞同：0
> 
> 时间：2012-09-11T18:31:20.987
> 
> 标签：ios, uitableview, quickdialog

如果能够启用 UISearchBar 来过滤 QRadio 元素的长列表，那就太好了。有可能我已经可以使用 QuickDialogController 的自定义子类来执行此操作，但我试了一下，似乎我必须更改很多库代码。有人实现了这个或有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:27:58.560

它没有我想象的那么麻烦。我添加了一种基于块的方式来响应 UISearchBar 事件，并向原始创建者发送[了一个拉取请求。](https://github.com/escoz/QuickDialog/pull/275)

# mapreduce - 好的 MapReduce 示例

> ID：12375761
> 
> 赞同：211
> 
> 时间：2012-09-11T18:31:21.213
> 
> 标签：mapreduce

除了“如何使用 MapReduce 计算长文本中的单词”任务之外，我想不出任何好的例子。我发现这并不是让其他人了解该工具的强大功能的最佳示例。

我不是在寻找代码片段，实际上只是“文本”示例。

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-09-11T18:37:24.077

Map reduce 是一个为高效处理大量数据而开发的框架。例如，如果我们在数据集中有 100 万条记录，并且它以关系表示形式存储 - 派生值并对这些值执行任何类型的转换都是非常昂贵的。

例如，在 SQL 中，在给定出生日期的情况下，要找出一百万条记录中有多少人的年龄 > 30 岁将需要一段时间，而且当查询的复杂性增加时，这只会按数量顺序增加。Map Reduce 提供基于集群的实现，其中数据以分布式方式处理

这是一篇维基百科文章，解释了[`map-reduce`所有内容](http://en.wikipedia.org/wiki/MapReduce)

另一个很好的例子是通过 map reduce 找朋友可以成为理解这个概念的一个强有力的例子，也是一个很好的用例。

就个人而言，发现[这个链接](http://stevekrenzel.com/finding-friends-with-mapreduce)对于理解这个概念非常有用

*复制博客中提供的解释（以防链接失效）*

> # 寻找朋友
> 
> MapReduce 是最初由 Google 开发的框架，允许跨多个域轻松进行大规模分布式计算。Apache Hadoop 是一个开源实现。
> 
> 我将忽略细节，但归结为定义两个函数：map 函数和 reduce 函数。map 函数接受一个值并输出键：值对。例如，如果我们定义一个 map 函数，它接受一个字符串并输出单词的长度作为键，输出单词本身作为值，那么 map(steve) 将返回 5:steve 而 map(savannah) 将返回 8:savannah . 您可能已经注意到 map 函数是无状态的，只需要输入值来计算它的输出值。这允许我们针对值并行运行 map 函数，并提供了巨大的优势。在我们进入 reduce 函数之前，mapreduce 框架通过键将所有值组合在一起，因此如果 map 函数输出以下键：值对：
> 
> ```
> 3 : the
> 3 : and
> 3 : you
> 4 : then
> 4 : what
> 4 : when
> 5 : steve
> 5 : where
> 8 : savannah
> 8 : research 
> ```
> 
> 它们被分组为：
> 
> ```
> 3 : [the, and, you]
> 4 : [then, what, when]
> 5 : [steve, where]
> 8 : [savannah, research] 
> ```
> 
> 然后，这些行中的每一行都将作为参数传递给 reduce 函数，该函数接受一个键和一个值列表。在这种情况下，我们可能会试图找出存在多少特定长度的单词，因此我们的 reduce 函数将只计算列表中的项目数并输出具有列表大小的键，例如：
> 
> ```
> 3 : 3
> 4 : 3
> 5 : 2
> 8 : 2 
> ```
> 
> 减少也可以并行完成，再次提供了巨大的优势。然后我们可以查看这些最终结果，发现我们的语料库中只有两个长度为 5 的单词，等等……
> 
> mapreduce 最常见的例子是计算语料库中单词出现的次数。假设您有一份互联网副本（我很幸运能够在这种情况下工作），并且您想要一份互联网上每个单词的列表以及它出现的次数。
> 
> 您解决此问题的方法是标记您拥有的文档（将其分解为单词），并将每个单词传递给映射器。然后，映射器会将单词连同`1`. 分组阶段将获取所有键（在本例中为单词），并列出 1。然后，reduce 阶段获取一个键（单词）和一个列表（每次该键出现在 Internet 上时的 1 列表），并对列表求和。然后reducer 输出这个词，以及它的计数。当一切都说完后，您将拥有互联网上每个单词的列表，以及它出现的次数。
> 
> 容易，对吧？如果您曾经读过 mapreduce，那么上面的场景并不是什么新鲜事……它是 mapreduce 的“Hello, World”。因此，这是一个真实世界的用例（Facebook 可能会或可能不会实际执行以下操作，这只是一个示例）：
> 
> Facebook 有一个朋友列表（请注意，朋友在 Facebook 上是双向的。如果我是你的朋友，你就是我的）。他们也有大量的磁盘空间，每天处理数亿个请求。他们决定在可能的情况下预先计算计算以减少请求的处理时间。一个常见的处理请求是“你和乔有 230 个共同的朋友”功能。当您访问某人的个人资料时，您会看到您的共同好友列表。该列表不会经常更改，因此每次访问配置文件时都重新计算它会很浪费（当然您可以使用不错的缓存策略，但是我将无法继续为这个问题写关于 mapreduce 的文章）。我们将使用 mapreduce 以便我们可以计算每个人 s 共同的朋友每天一次并存储这些结果。稍后它只是一个快速查找。我们有很多磁盘，很便宜。
> 
> 假设好友存储为 Person->[List of Friends]，那么我们的好友列表为：
> 
> ```
> A -> B C D
> B -> A C D E
> C -> A B D E
> D -> A B C E
> E -> B C D 
> ```
> 
> 每行都是映射器的参数。对于好友列表中的每个好友，映射器都会输出一个键值对。关键将是与此人一起的朋友。该值将是朋友列表。密钥将被排序，以便朋友按顺序排列，导致所有朋友对都去同一个减速器。这很难用文字来解释，所以让我们这样做，看看你是否能看到模式。在所有映射器运行完毕后，您将拥有如下列表：
> 
> ```
> For map(A -> B C D) :
> 
> (A B) -> B C D
> (A C) -> B C D
> (A D) -> B C D
> 
> For map(B -> A C D E) : (Note that A comes before B in the key)
> 
> (A B) -> A C D E
> (B C) -> A C D E
> (B D) -> A C D E
> (B E) -> A C D E
> For map(C -> A B D E) :
> 
> (A C) -> A B D E
> (B C) -> A B D E
> (C D) -> A B D E
> (C E) -> A B D E
> For map(D -> A B C E) :
> 
> (A D) -> A B C E
> (B D) -> A B C E
> (C D) -> A B C E
> (D E) -> A B C E
> And finally for map(E -> B C D):
> 
> (B E) -> B C D
> (C E) -> B C D
> (D E) -> B C D
> Before we send these key-value pairs to the reducers, we group them by their keys and get:
> 
> (A B) -> (A C D E) (B C D)
> (A C) -> (A B D E) (B C D)
> (A D) -> (A B C E) (B C D)
> (B C) -> (A B D E) (A C D E)
> (B D) -> (A B C E) (A C D E)
> (B E) -> (A C D E) (B C D)
> (C D) -> (A B C E) (A B D E)
> (C E) -> (A B D E) (B C D)
> (D E) -> (A B C E) (B C D) 
> ```
> 
> 每行将作为参数传递给减速器。reduce 函数将简单地与值列表相交，并输出与相交结果相同的键。例如，reduce((AB) -> (ACDE) (BCD)) 将输出 (AB) : (CD) 并表示朋友 A 和 B 有 C 和 D 作为共同朋友。
> 
> 减少后的结果是：
> 
> ```
> (A B) -> (C D)
> (A C) -> (B D)
> (A D) -> (B C)
> (B C) -> (A D E)
> (B D) -> (A C E)
> (B E) -> (C D)
> (C D) -> (A B E)
> (C E) -> (B D)
> (D E) -> (B C) 
> ```
> 
> 现在当 D 访问 B 的个人资料时，我们可以快速查找`(B D)`并看到他们有三个共同的朋友，`(A C E)`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-11T20:57:16.243

[类 Hadoop 的 MapReduce 实现的最佳示例之一](https://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/)。

请记住，尽管它们仅限于 MapReduce 思想的基于键值的实现（因此它们的适用性受到限制）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T18:36:51.690

您可以在 MapReduce 中执行的一组熟悉的操作是一组正常的 SQL 操作：SELECT、SELECT WHERE、GROUP BY 等。

另一个很好的例子是矩阵乘法，你传递一行 M 和整个向量 x 并计算 M * x 的一个元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T09:49:12.220

我不时向人们展示 MR 概念。我发现人们熟悉的处理任务，然后将它们映射到 MR 范例。

通常我会做两件事：

1.  分组依据/聚合。在这里，洗牌阶段的优势是显而易见的。洗牌也是分布式排序的解释+分布式排序算法的解释也有帮助。

2.  连接两个表。使用 DB 的人熟悉这个概念及其可伸缩性问题。展示如何在 MR 中完成。

# android - 如何以编程方式从当前主题获取背景颜色

> ID：12375766
> 
> 赞同：38
> 
> 时间：2012-09-11T18:31:30.943
> 
> 标签：android

我试过这样的事情，但我坚持：

```
TypedValue typedValue = new TypedValue(); 
if (this.parentActivity.getTheme().resolveAttribute(android.R.attr.windowBackground, typedValue, true))
{
  // how to get color?
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-22T21:09:19.940

您可以通过以下方式从当前主题中获取背景颜色（或 Drawable）：

```
TypedValue a = new TypedValue();
getTheme().resolveAttribute(android.R.attr.windowBackground, a, true);
if (a.isColorType()) {
    // windowBackground is a color
    int color = a.data;
} else {
    // windowBackground is not a color, probably a drawable
    Drawable d = activity.getResources().getDrawable(a.resourceId);
} 
```

[isColorType](https://developer.android.com/reference/android/util/TypedValue#isColorType())是在 API 级别 29 中引入的。在此之前，您可以改用以下内容：

```
if (a.type >= TypedValue.TYPE_FIRST_COLOR_INT && a.type <= TypedValue.TYPE_LAST_COLOR_INT) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T23:26:17.630

您可以使用以下方法获取主题的资源：

```
TypedArray a = getTheme().obtainStyledAttributes(R.style.ThemeName, new int[] {R.attr.attribute_name});     
int attributeResourceId = a.getResourceId(0, 0); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-19T11:51:07.790

对于您的问题，最简单的方法是：

```
TypedValue typedValue = new TypedValue(); 
if (this.parentActivity.getTheme().resolveAttribute(android.R.attr.windowBackground, typedValue, true))
{
  // how to get color?
  int colorWindowBackground = typedValue.data;// **just add this line to your code!!**
} 
```

# php - 如何按名称获取选择标签的php DOMDocument xpath

> ID：12375767
> 
> 赞同：0
> 
> 时间：2012-09-11T18:31:32.197
> 
> 标签：php, xpath, domdocument

我有以下html：

```
<select type="text" name="City" value="">
<option>city1</option>
<option>city2</option>
<option>city3</option> 
```

我正在尝试使用 DOMDocument 的 xpath 来获取城市数组。到目前为止，我的 xpath 表达式是：

```
$xpath = new DOMXPath($dom);
$nodeList = $xpath->query("//select[name=='City']/option"); 
```

这不起作用，我不知道为什么。

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:34:15.053

尝试

```
$nodeList = $xpath->query("//select[@name='City']/option"); 
```

# java - java等价于printf("%*.*f")

> ID：12375768
> 
> 赞同：20
> 
> 时间：2012-09-11T18:31:32.973
> 
> 标签：java, android, printf, string.format

在 C 中，printf() 语句允许在参数列表中提供精度长度。

```
printf("%*.*f", 7, 3, floatValue); 
```

其中星号分别替换为第一个和第二个值。

我正在寻找 Android/Java 中的等价物；String.format() 抛出异常。

编辑：谢谢，@Tenner；它确实有效。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T18:33:44.520

我用

```
int places = 7;
int decimals = 3;

String.format("%" + places + "." + decimals + "f", floatValue); 
```

有点难看（字符串连接使其性能不佳），但它可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T18:33:54.593

```
System.out.print(String.format("%.1f",floatValue)); 
```

这将打印精度为 1 位小数的 floatValue

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T23:54:48.487

您可以格式化格式：

```
String f = String.format("%%%d.%df", 7, 3);
System.out.println(f);
System.out.format(f, 111.1111); 
```

这将输出：

```
%7.3f
111,111 
```

你也可以使用这样的小助手：

```
public static String deepFormatter(String format, Object[]... args) {
    String result = format;
    for (int  i = 0; i != args.length; ++i) {
        result = String.format(result, args[i]);
    }

    return result;
} 
```

然后，以下调用将与上面的代码等效并返回`111,111`。

```
deepFormatter("%%%d.%df", new Object[] {7, 3}, new Object[] {111.1111}); 
```

它不如 printf 漂亮，而且输入格式可能会变得杂乱无章，但你可以用它做更多事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T18:39:32.180

就像这样...

```
%AFWPdatatype 
```

`A`- 参数数量

`F`- 标志

`W`- 宽度

`P`- 精确

`String.format("%.1f",float_Val);`

# grid - 隐藏网格列改变行的高度

> ID：12375769
> 
> 赞同：1
> 
> 时间：2012-09-11T18:31:40.910
> 
> 标签：grid, extjs4.1, word-wrap

我在动态隐藏网格列方面遇到了非常烦人的问题。在我隐藏列（单元格中有长文本）后，网格行的高度会急剧增加。隐藏前 ![在此处输入图像描述](../Images/254b8e12d07ffe41ea74b269183a7b91.png)

并在隐藏操作后

![在此处输入图像描述](../Images/7d3c65330d539d73f910eed4c26977dc.png)

如您所见，第一行肯定太高了。这种行为的原因可能是我在网格单元格中使用文本换行。

```
.x-grid-cell-inner { white-space: normal; } 
```

是否有任何有效的方法来制作网格行，而不是在隐藏列（并使用 textwrap ）后改变它们的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:34:02.043

我以前亲身遇到过这种奇怪的现象。该问题是由 Ext JS 通过将宽度设置为 0px 来“隐藏”列引起的。

我的解决方案是将事件侦听器添加到网格标题，如下所示：

```
// me is the grid
me.headerCt.on({
    columnhide: me.removeWordWrapOnHide,
    columnshow: me.addWordWrapOnShow,
    scope:      me
}); 
```

不要使用现有的`x-grid-cell-inner`类，而是像这样创建一个新类：

```
<style type="text/css">
    td.grid-cell-wordwrap > div {
        white-space: normal; /* may need !important, not sure */
    }
</style> 
```

然后这两个函数的实现是这样的：

```
removeWordWrapOnHide: function(headerCt, column){
    var me = this,
        wordWrapRe = /wordwrap/;
    if(column.useWordWrap || wordWrapRe.test(column.tdCls)){
        column.tdCls = column.tdCls.replace("grid-cell-wordwrap", "");
        column.useWordWrap = true;  // Flag to check on show
        me.view.refresh();
    }
},

addWordWrapOnShow: function(headerCt, column){
    var me = this,
        wordWrapRe = /wordwrap/;
    if(column.useWordWrap && !wordWrapRe.test(column.tdCls)){
        column.tdCls = "grid-cell-wordwrap " + column.tdCls;
        me.view.refresh();
    }
} 
```

可能不是最有效的方法，但它可以完成工作。

# java - 从/向文件读取/写入数组的最快方法？

> ID：12375774
> 
> 赞同：0
> 
> 时间：2012-09-11T18:31:55.140
> 
> 标签：java, arrays, file, io

我知道这里和网上有几个类似的线程，但我想我似乎做错了什么。我的任务很简单 - 将一个大整数数组（int [] 或 ArrayList 或您认为最好的）写入（然后读取）到文件中。越快越好。我的具体数组中有大约 450 万个整数，当前时间例如（以毫秒为单位）：

*   生成树：14851.13071
*   生成数组：2237.4661619999997
*   保存数组：89250.167617
*   加载数组：114908.08185799999

这是不可接受的，我想时间应该少得多。我究竟做错了什么？我不需要地球上最快的方法，但将这些时间缩短到大约 5 - 15 秒（欢迎减少但不是强制性的）是我的目标。

我当前的代码：

```
long start = System.nanoTime();

Node trie = dawg.generateTrie("dict.txt");
long afterGeneratingTrie = System.nanoTime();
ArrayList<Integer> array = dawg.generateArray(trie);
long afterGeneratingArray = System.nanoTime();

try
{
    new ObjectOutputStream(new FileOutputStream("test.txt")).writeObject(array);
}
catch (Exception e)
{
    Logger.getLogger(DawgTester.class.getName()).log(Level.SEVERE, null, e);
}
long afterSavingArray = System.nanoTime();

ArrayList<Integer> read = new ArrayList<Integer>();
try
{
    read = (ArrayList)new ObjectInputStream(new FileInputStream("test.txt")).readObject();
}
catch (Exception e)
{
    Logger.getLogger(DawgTester.class.getName()).log(Level.SEVERE, null, e);
}
long afterLoadingArray = System.nanoTime();

System.out.println("Generating trie: " + 0.000001 * (afterGeneratingTrie - start));
System.out.println("Generating array: " + 0.000001 * (afterGeneratingArray - afterGeneratingTrie));
System.out.println("Saving array: " + 0.000001 * (afterSavingArray - afterGeneratingArray));
System.out.println("Loading array: " + 0.000001 * (afterLoadingArray - afterSavingArray)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:39:52.197

不要使用 java 序列化。它非常强大和健壮，但不是特别快速（或紧凑）。使用简单的`DataOutputStream`和调用`writeInt()`。（确保使用`BufferedOutputStream`介于`DataOutputStream`和之间`FileOutputStream`）。

如果您想在读取时预先调整数组的大小，请将您的第一个 int 写入数组长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:04:18.747

像下面这样的东西可能是一个相当快的选择。如果您担心减少开销，您还`int[]`应该使用实际的数组。`ArrayList<Integer>`

```
final Path path = Paths.get("dict.txt");
...
final int[] rsl = dawg.generateArray(trie);
final ByteBuffer buf = ByteBuffer.allocateDirect(rsl.length << 2);

final IntBuffer buf_i = buf.asIntBuffer().put(rsl).flip();
try (final WritableByteChannel out = Files.newByteChannel(path,
    StandardOpenOptions.WRITE, StandardOpenOptions.TRUNCATE_EXISTING)) {
  do {
    out.write(buf);
  } while (buf.hasRemaining());
}

buf.clear();
try (final ReadableByteChannel in = Files.newByteChannel(path,
    StandardOpenOptions.READ)) {
  do {
    in.read(buf);
  } while (buf.hasRemaining());
}
buf_i.clear();
buf_i.get(rsl); 
```

# java - 以抽象类为参数的泛型方法

> ID：12375781
> 
> 赞同：1
> 
> 时间：2012-09-11T18:32:08.697
> 
> 标签：java

嗨，我正在尝试创建一个通用方法，该方法接受一个类型为抽象参数化类的参数。在方法内部，我想创建传递参数的实例，因为它是抽象类型的子类，因为我们无法实例化抽象类。

但是我遇到了一些问题。并且错误消息说 RuleType 无法解析为无论如何都不足为奇的类型，但我不知道如何实现这一点。我当前的代码如下。

```
private <F extends AbstractRule<T>, T> void applyRyle(F cRule,ArrayList<T> aFeatures)
{

    Class RuleType = cRule.getClass();

    // if the parameter passed is a subclass of AbstractRule create some objects
    if(!RuleType.getSuperclass().getName().equals("AbstractRule"))
    {
        ArrayList<RuleType<T>> aRules = new ArrayList<RuleType<T>>();
        for(int i = 0; i < 10; i++)
        {

            RuleType<T> aRule= new RuleType<T(pattern.getMatrices().size(), 2,aFeatures);
            aRule.initialise(aRule.getMaxLocalLevel());
            aRules.add(aRule);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:11:08.790

其中一些可以通过使用反射来完成：

```
private <F extends AbstractRule<T>, T> void applyRyle(F cRule, ArrayList<T> aFeatures)
{
     Class<? extends F> ruleType = cRule.getClass();
     // if the parameter passed is a subclass of AbstractRule create some objects
     if(! ruleType.getSuperclass().getName().equals("AbstractRule"))
     {
         ArrayList<? extends F> aRules = new ArrayList<? extends F>();
         for(int i = 0; i < 10; i++)
         {
             F aRule =
                 ruleType
                     .getConstructor(int.class, int.class, ArrayList.class)
                     .newInstance(pattern.getMatrices().size(), 2, aFeatures);
             aRule.initialise(aRule.getMaxLocalLevel());
             aRules.add(aRule);
         }
     } 
```

尽管这可能不是完成您真正想要的事情的最佳方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:14:00.290

首先，您不需要以下行，因为您的通用声明保证 cRule 将是`AbstractRule`.

```
if (!RuleType.getSuperclass().getName().equals("AbstractRule")) 
```

在运行时检查上述内容的正常和更好的方法是使用`instanceof`

```
if (!cRule instanceof AbstractRule) 
```

至于您的`ArrayList`声明，您可以执行以下操作：

```
ArrayList<F<T>> aRules = new ArrayList<F<T>>(); 
```

但是请注意，这`F`与实际的实体类不同`aRule`。`F`将是调用该方法的类型。也就是说，`F`将比 of 的类更宽`aRule`（它可能包括`F`不是 的类的子类的其他子类`aRule`）。

但是，您不能直接创建`F`. 相反，您需要有一些委托方法来为您做这件事。也就是说，你不能写`new F()`. 我们可以做的（因为我们已经有了 的具体实例`F`）是添加一个抽象方法`AbstractRule`，可以创建它自己的新实例，例如。

```
public interface AbstractRule<T extends AbstractRule> {
    T newRule(some parameters you need in the constructor);
} 
```

现在我们可以写：

```
F newRule = aRule.newRule(pattern.getMatrices().size(), 2,aFeatures); 
```

# jquery - jQuery：$作为参数

> ID：12375782
> 
> 赞同：5
> 
> 时间：2012-09-11T18:32:10.430
> 
> 标签：jquery

我正在阅读一本关于 JavaScript 的书，它解释了如何在 JavaScript 应用程序中使用 MVC 模式。在这段代码中，它展示了如何设置控制器。谁能解释为什么 jQuery 美元符号作为参数传递给 line3 中的函数，然后为什么最后一行 (jQuery) 前面没有美元符号？

```
var Controller = {};
// Use a anonymous function to enscapulate scope
(Controller.users = function($){
    var nameClick = function(){
        /* ... */
    };

    // Attach event listeners on page load
    $(function(){
        $("#view .name").click(nameClick);
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:33:30.827

最后一行前面没有美元符号，`jQuery`因为保存 jQuery 的变量的名称是`jQuery`, not `$jQuery`。它立即通过`$`以避免命名冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:36:08.610

简而言之，它确保`$`在该上下文中没有命名任何其他内容。

jQuery 变量名为`jQuery`，`$`是变量名中的有效符号，jQuery 使用它来存储 jQuery 对象。上面的代码可以很容易地重写为使用任何其他变量名而不是`$`

```
var Controller = {};
// Use a anonymous function to enscapulate scope
(Controller.users = function(myJQueryVariable){
    var nameClick = function(){
        /* ... */
    };

    // Attach event listeners on page load
    myJQueryVariable(function(){
        myJQueryVariable("#view .name").click(nameClick);
    });
})(jQuery); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:34:58.500

传递给函数的 jQuery 为函数中的 $ 提供参数。换句话说，为了保证函数理解 $ 是 jQuery 对象，传递 jQuery 完整对象名称而不是 $ 快捷方式。这在使用其他 javascript 库并可能竞争 $ 分配的情况下很有帮助。

# java - 确定应用程序是否安装在android上

> ID：12375783
> 
> 赞同：1
> 
> 时间：2012-09-11T18:32:12.677
> 
> 标签：java, android, plugins, browser

在我的安卓手机上，我启动一个标准浏览器，输入我的网址 www.example.com 并按下打开。我需要一些方法来确定我是否在我的手机上安装了例如 MYAPP，我必须为我的 Android 浏览器编写一个插件，还是我必须向我的网站添加一些 java 功能或其他什么？

我需要一些信息、文章或其他有关如何做到这一点的信息，每种信息都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:39:35.183

@Aleks G 是正确的，你不能这样做。但是，您可以使您的应用程序在您的网页打开时打开，前提是它已经安装。

请参阅此处：[从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:44:13.413

**-**我`don't`认为你想做的事情是可能的......

**-**然而，您可以使用`BroadCast-Receiver`来确定您的浏览器何时打开，然后您可以启动您的应用程序（如果已安装）..

**-**另一种手动检查的方法，您的应用程序是否已安装，请检查`Manage Application`from `Application`， under `Setting`。

# postgresql - 如何根据定义的 where 子句顺序顺序更新字段

> ID：12375793
> 
> 赞同：1
> 
> 时间：2012-09-11T18:32:40.243
> 
> 标签：postgresql

我希望能够根据在 ('[john2].[john2]','[john3].[john3]','[john].[john ]') 子句，但它似乎不会根据其关联的顺序进行更新（请参阅下面的 SQL）。如何根据预定义的 where 子句顺序顺序更新字段？

约翰

```
drop sequence temp_seq;
 create temp sequence temp_seq;

update gis_field_configuration_bycube
 set seq_in_grid = nextval('temp_seq')
 where cube = 'Instruments' and level_unique_name in ('[john2].[john2]','[john3].[john3]','[john].[john]'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:58:23.940

顺序在 IN() 构造中无关紧要，因为它定义了一个集合，而不是严格意义上的值列表。该`VALUES`子句是应该使用的。

此外，假设 Postgres 8.4 或更高版本，`row_number()`将比创建临时序列更方便。

这是应该工作的：

```
update gis_field_configuration_bycube
 set seq_in_grid = rn
from 
(select  row_number() over () as rn , string from
  (values ('[john2].[john2]'),('[john3].[john3]'),('[john].[john]')) as v(string)
) as subquery
 where cube = 'Instruments'
 and level_unique_name=subquery.string; 
```

# c# - 查找通过 SSIS 移动的数据总量

> ID：12375796
> 
> 赞同：0
> 
> 时间：2012-09-11T18:32:43.207
> 
> 标签：c#, .net, sql-server-2008, ssis

SSIS 中有没有办法（通过自定义代码也可以）找出从源移动到目标的数据量？当我说数据量时，我的意思是字节、Kb、Mb 等？我正在考虑在.net 中编写代码，但我没有一个好的起点。有人可以指出我正确的方向吗？

感谢您的任何建议或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:31:23.027

我没有很好的答案，但也许你可以在现有工具中找到一些东西。

如果您可以隔离到某个服务器或逻辑磁盘，则可以使用性能监视器来收集统计信息。请参阅[此白皮书](http://msdn.microsoft.com/en-us/library/dd537533%28v=sql.100%29.aspx)。

SQL 探查器还有一个“写入”列，但我不确定这是否可以转换为 MB。

您还可以在加载前后检查数据库中的可用空间。

# javascript - 附加到原型属性的函数是否没有闭包

> ID：12375798
> 
> 赞同：1
> 
> 时间：2012-09-11T18:32:47.460
> 
> 标签：javascript

我试图弄清楚在创建构造函数后如何向构造函数添加方法。
在下面的代码中，我不能使用 Person 的原型属性来添加一个可以访问 Person 变量的新公共方法。（是否附加到原型属性的函数不关闭主函数中的变量）。
与第一种方式不同，第二种方式有效 - Person 2\. 似乎这些被称为特权方法 - [http://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)。

```
function Person(name, age){}
Person.prototype.details = function(){ 
    return "name: "+name+", age: "+age;
};

function Person2(name, age){
 this.details = function(){ 
    return "name: "+name+", age: "+age;};
}

var per1 = new Person("jim", 22);
var per2 = new Person2("jack", 28);

per1.details();
//=> ReferenceError: age is not defined
per2.details();
//=> "name: jack, age: 28" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:35:20.537

不，它们没有对构造函数 vars 的封闭。它们在不同的范围内。

```
// This function is in one scope.
function Person(name, age) {
}

// This statement is in the parent scope, which 
// doesn't have access to child scopes.
Person.prototype.details = function(){ 
    return "name: "+name+", age: "+age;
}; 
```

这就是“公共”函数在 JavaScript 中的工作方式。您可以`details`通过在构造函数中定义它来创建特权函数：

```
function Person(name, age) {
    this.details = function() { 
        return "name: "+name+", age: "+age;
    };
} 
```

当然，这意味着每个实例`Person`都有自己的`details`函数副本。

正如@Chuck 建议的那样，您还可以制作`name`和`age`公开成员，您可以在原型函数中访问它们：

```
function Person(name, age) {
    this.name = name;
    this.age = age;
}

Person.prototype.details = function(){ 
    return "name: " + this.name + ", age: " + this.age;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:39:31.777

不，通常您会使用第二种方法，或者`this._name = name;`在构造函数中设置并在另一种方法中以这种方式引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:36:50.597

当然不是，该函数是在一个范围内声明的，与声明参数/变量的范围不同，因此 JS 不会知道您在使用哪些变量。假设您有第二个闭包，或者更好（实际上更糟）：一个名为`name`. JS会选择哪一个？

这是给你的一个例子：

```
function MyObject(name)
{
    var localVar = 'foobar';
    this.evilMethod = (function(localVar)
    {
        return function()
        {
            console.log('localVar = '+localVar);//=== name
        };
    })(name);
    this.badMethod = function()
    {
        console.log('localVar = '+ localVar);// === 'foobar'
    };
}
var name = 'Global Name';
var anotherClosure = (function(name)
{
    var localVar = name.toLowerCase();
    return function()
    {
        console.log(name);
        console.log(localVar);
    }
})('Bobby');
MyObject.prototype.closureVars = function()
{
    console.log(name);//Global name
    console.log(localVar);//undefined
}; 
```

现在首先：这是一个糟糕的代码，但你明白了：你可以有数百个同名的变量，一个 JS 必须使用，可能并不总是很清楚。

让原型访问实例闭包变量也有其他含义：例如，您可以更改它们的值，这首先破坏了拥有闭包的意义。
但是*一个国家英里*最大的问题是：多个实例！如果您创建一个构造函数，您很可能会用它实例化超过 1 个对象。**如果它们都共享相同的原型，那将如何工作？**

只需将要在原型中访问的参数/变量分配给属性，就像 FishBasketGordo 的示例一样

# symfony - 字符集的教义错误（排序规则的非法混合） - 我可以更改它吗？

> ID：12375801
> 
> 赞同：2
> 
> 时间：2012-09-11T18:32:56.810
> 
> 标签：symfony, doctrine, pdo

我的问题是我的生产数据库上的所有表和字符串字段都设置为 latin1_swedish_ci。我刚刚在日志中遇到错误时发现：

一般错误：1267 排序规则（latin1_swedish_ci，IMPLICIT）和（utf8_general_ci，COERCIBLE）的非法混合操作'='

我使用 Symfony2 和 Doctrine。不知道为什么一开始就这样设置，但是当我手动更改它们时，我害怕让事情变得更糟。有什么帮助吗？

# sql - SQL 注入说明

> ID：12375802
> 
> 赞同：-2
> 
> 时间：2012-09-11T18:32:58.173
> 
> 标签：sql, security, sql-injection, owasp

有这样的查询：

> `select * from tablename where username='value1' and password='value2';`

如果我设置以下字段：

```
username ='admin' and password ='admin'; 
```

然后我以管理员身份登录网站。

现在，如果我想 SQL 注入我的查询，我将在用户名字段中输入 value
`'or 1=1`，之后查询将执行如下：

`select * from tablename where username ='' or 1=1`

假设在此之后的所有内容都成功执行了查询。

我的问题是基于上面的例子，我们将以什么用户身份登录？

作为：
   1\. 管理员
   2\. 还是表中的第一行？
   3.或任何其他用户以及如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:35:05.903

这只是一个 SQL 查询，它不会登录或执行任何其他应用程序功能。如何处理检索到的数据完全取决于特定的应用程序。

代码可能会愉快地使用结果记录集中的第一行，并假定这是要登录的用户。它也可能抛出异常，例如，如果查询正在使用 LINQ 完成`.SingleOrDefault()`并被使用。没有看到应用程序代码，就无法知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T18:40:13.030

All rows in the `tablename` table will be returned to whatever is running this query. The *order* in which these rows are returned isn't well defined (and tables don't have an order, so your guess of "first row" is wrong for a number of reasons)

We'd then need to see the consuming code to know what happens - it might take the first row it's given, it might take the last row it's given (different runs of this query could have *different* first and last rows, because as I said, the order isn't well defined). It may attempt to (in some manner) merge all of the resulting rows together.

You shouldn't try to reason about *what happens* when your code is subject to SQL injection, you should just apply adequate defenses (e.g. parameterized queries) so you don't have to think about it again.

* * *

For example, lets say, for the sake of argument, that this query always returned the rows in some particular order (so long as the moon is full), such that the lowest `UserID` (or similar) is the first row, and that the consuming code uses the first returned row and ignores other rows. So you decide to "cunningly" create a dummy user with `UserID` 0 which can't do anything and warns you of an attack.

Well, guess what - all the attacker has to do is inject an `ORDER BY CASE WHEN UserName='Admin' THEN 0 ELSE 1 END` into the query - and bingo, the first row returned is now *guaranteed* to be the Admin user.

# ios - 导航栏未显示

> ID：12375803
> 
> 赞同：0
> 
> 时间：2012-09-11T18:33:04.090
> 
> 标签：ios, ipad, uinavigationbar

我正在使用`MGSplitViewController`我的 iPad 应用程序。

我`viewController`以`detailViewController`这种方式添加了一个：

```
my2ndVC *vc = [[my2ndVC alloc] init];
splitViewController.detailViewController = vc; 
```

它工作得很好，现在当我添加一个导航栏到`my2ndVC`

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 448, 44)];

[self.view addSubview:navBar]; 
```

**酒吧没有出现。**

我知道我可以`my2ndVC`这样添加：

```
my2ndVC *vc = [[my2ndVC alloc] init]; 
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:vc];
splitViewController.detailViewController = navController; 
```

但后来我的一个视图控制器中也有一个条件：

```
if ([splitViewController.detailViewController isKindOfClass:[my2ndVC class]]) 
```

建议的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:42:11.167

你不能改变你的条件如下：

```
if ([splitViewController.detailViewController.topViewController isKindOfClass:[my2ndVC class]]) 
```

为了使它更简单：

```
UINavigationController *aNavigationController = (UINavigationController *)splitViewController.detailViewController;
if ([aNavigationController.topViewController isKindOfClass:[my2ndVC class]]) {
    // TRUE...
} 
```

# java - java和nmap中的套接字

> ID：12375804
> 
> 赞同：0
> 
> 时间：2012-09-11T18:33:06.153
> 
> 标签：java, sockets, networking, nmap

我有程序用java编写它等待端口上的连接

当我通过 nmap 扫描服务器时，程序停止（错误）

这是我的代码

```
SSLServerSocketFactory sslServerSocketfactory = (SSLServerSocketFactory)SSLServerSocketFactory.getDefault();
                sslServerSocket = (SSLServerSocket)sslServerSocketfactory.createServerSocket(intSSLport);

out = new PrintWriter(sslSocket.getOutputStream(), true);
                  in = new BufferedReader(new InputStreamReader(sslSocket.getInputStream()));
                  String value = in.readLine(); 
```

感谢 jtahlborn ,,,, 我通过使用 try 和 catch 解决了 ,, 并让 catch 返回

```
sslSocket = (SSLSocket)sslServerSocket.accept() 
```

再次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:57:24.630

nmap 正在扫描打开的端口，尝试连接它们（发送 TCP SYN）。由于您已经打开了服务器套接字，因此当有客户端连接到它时它会返回。在您的情况下，它是 nmap，它尝试连接。

AFAIK，nmap 不会完成 TCP 连接过程（3 次握手）。nmap 将接收由于您调用accept() 而发送的TCP SYN/ACK，并得出端口已打开的结论。就是这样，nmap 不会发送完成 TCP 连接过程 (ACK) 所需的第三条消息。

# java - 解码在 Google App Engine 上作为电子邮件收到的 base64 图像

> ID：12375806
> 
> 赞同：0
> 
> 时间：2012-09-11T18:33:18.870
> 
> 标签：java, google-app-engine, base64, mime-types, javax.imageio

我想解码在 Google App Engine (GAE) 上通过电子邮件收到的 base64 编码图像。当我从 MimeMessage 提取图像时，我得到一个 base64DecoderStream 对象。我最初假设这个解码数据是 ARGB 格式的字节数组，但这里似乎不是这种情况。我通过将解码的字节数组与运行“ImageIO.read(ImageFile).getRGB()”得到的字节数组进行比较来验证这一点，但它们不匹配。

所以我想知道：-

1) 使用 base64 解码图像后，我得到了哪种图像格式数据？

2) 如何在 GAE 上获得实际的 PNG 或 JPG 图像？

3）最后，有没有办法在 GAE 上以 ARGB 格式获取收到的电子邮件图像？

非常感谢任何帮助...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:44:05.070

Base64 编码数据是图像文件本身，而不是解压缩的像素数据。这是附加到消息的实际文件。因此，在解码 Base64 数据后，在这种特殊情况下，您有一个二进制 PNG 文件。

要将其作为图像进行操作，您有多种选择：

1.  将解码`byte[]`后直接传递给`ImagesServiceFactory.makeImage()`.
2.  将解码后的文件写入`byte[]`文件并调用`ImagesServiceFactory.makeImageFromFilename()`.
3.  将解码`byte[]`后作为 a 存储到数据库中`Blob`，然后调用`ImagesServiceFactory.makeImageFromBlob()`.

一旦你这样做了，不幸的是，使用谷歌的内置 API 获取 ARGB 数据似乎并不是一种简单的方法。此处讨论的解决方案可能会有所帮助： [Extracting image pixel values in google appengine](https://stackoverflow.com/questions/4087358/extracting-image-pixel-values-in-google-appengine)。

# c - 如何在C中进行按位异或

> ID：12375808
> 
> 赞同：12
> 
> 时间：2012-09-11T18:33:28.220
> 
> 标签：c, bit, xor

我正在尝试进行 C 编程，但在编写仅使用`~`和`&`运算符的按位 XOR 函数时遇到了麻烦。示例：`bitXor(4, 5) = 1`。我怎样才能做到这一点？

到目前为止，我有这个：

```
int bitXor(int x, int y) {

    return z;
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-11T19:54:43.413

好吧，让我们考虑一下。异或是做什么的？

```
x   y    XOR
------------
0   0     0
1   0     1
0   1     1
1   1     0 
```

那么我们如何把它变成一个函数呢？让我们考虑一下 AND，以及 AND (~x&~y) 的逆序（这恰好是 NOR）：

```
 (~x&~y)
 x   y   AND    NOR   
 ---------------------
 0 & 0  = 0      1    
 1 & 0  = 0      0 
 0 & 1  = 0      0
 1 & 1  = 1      0 
```

看看这两个输出，它非常接近，我们所要做的就是对之前的两个输出 (x AND y) (x NOR y) 进行 NOR 处理，我们就有了解决方案！

```
 (a)       (b)    ( a NOR b )
x AND y   x NOR y    ~a & ~b
-------------------------------
   0         1          0
   0         0          1
   0         0          1
   1         0          0 
```

现在把它写出来：

```
a = ( x & y )
b = ( ~x & ~y )
XOR'd result = (~a & ~b) 
```

答对了！现在只需将其写入函数

```
int bitXor(int x, int y) 
{
    int a = x & y;
    int b = ~x & ~y;
    int z = ~a & ~b;
    return z;
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-11T18:36:14.090

使用[NAND](http://en.wikipedia.org/wiki/NAND_logic)逻辑：

```
int bitNand(int x, int y)
{
    return ~ (x & y);
}

int bitXor(int x, int y)
{
    return bitNand( bitNand(x, bitNand(x, y)),
                    bitNand(y, bitNand(x, y)) );
} 
```

或者：

```
int bitXor(int x, int y)
{
    return ~( (x & y) | (~x & ~y) );
} 
```

或者：

```
int bitXor(int x, int y)
{
    return (x & ~y) | (~x & y);
} 
```

当然这更容易：

```
int bitXor(int x, int y)
{
    return x ^ y;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-11T18:36:50.373

很容易看出

```
x ^ y = (x | y) & ~(x & y) 
```

所以它仍然`|`只用`&`and来表示`~`。德摩根定律告诉我们

```
x | y = ~(~x & ~y) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:42:39.037

> 我希望它只用 ~ 和 &

这对 NAND 门很重要，对吧？研究了这个[电路图后：](http://en.wikipedia.org/wiki/File%3aXOR_from_NAND.svg)

```
int z = ~ ((~(a & ~(a & b)) & (~(b & ~(a & b))); 
```

这同样适用于非按位，即逻辑一，只是替换`!`而不是`~`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-21T09:28:30.180

您可以使用运算符在 c 中执行按位异或`^`运算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-10T14:41:51.913

```
int bitXor(int x, int y) {
  return ~(~(~x & y) & ~(x & ~y));
} 
```

解释：

```
x ^ y = (~x & y) | (x & ~y) = ~(~(~x & y) & ~(x & ~y)) 
```

最后一个程序是利用[德摩根定律](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-10-03T11:54:09.803

```
int xorro(a, b)
{
    if (a == b)
        return 0;
    return 1; 
} 
```

# yacc - 如何使用未处理的字符串？

> ID：12375817
> 
> 赞同：0
> 
> 时间：2012-09-11T18:34:00.710
> 
> 标签：yacc, lex

我正在使用 Lex 和 Yacc 来设计解析器并遇到一些关于注释的问题。

我使用以下 Lex 规则。

```
'#'[^('\r'|'\n')]*    { /* do nothing */ } 
```

它可以工作，但在执行结束时，所有注释都会打印到标准输出。有办法清除吗？感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:43:21.407

字符`'`, `|`, `(`, 和`)`中没有特殊含义`[]`，因此您只匹配（并丢弃）不包含它们的注释。此外，在大多数版本的 lex`'`中根本没有特殊含义——只能`"`用于引用文字字符串。你可能想要的是：

```
"#"[^\r\n]*     { /* do nothing */ } 
```

另外，`#`也没有什么特殊含义，所以也没有必要引用它。

一般来说，如果你使用 lex（或 flex）作为解析器的输入，你永远不需要默认的回显行为，所以最好在最后添加一个“catch-all”规则：

```
.|\n            { fprintf(stderr, "Unexpected character '%c' in input\n", *yytext); } 
```

# ruby - 如何匹配 Sinatra 中的正则表达式路由？

> ID：12375820
> 
> 赞同：1
> 
> 时间：2012-09-11T18:34:13.337
> 
> 标签：ruby, sinatra

我正在尝试使 sinatra 教程中的这段代码片段起作用，以便我可以根据正则表达式匹配设置一些路由。它似乎不起作用，我直接从教程中复制粘贴，关于我所缺少的任何想法。假设我的 sinatra 应用程序正在运行，并且我还有其他结构正确的 GET 路由正在运行，所以我不清楚为什么像这样的直接复制过去不起作用。

```
get %r{/hello/([\w]+)} do
    "Hello, #{params[:captures].first}!"
end 
```

应该更正映射路线，`http://0.0.0.0:4567/hello`但正在路由到“sinatra 不知道这个小曲”错误消息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:38:10.347

`%r{/hello/([\w]+)}`根本不匹配`/hello`。您的正则表达式需要一个斜杠和另一个字符串，但您的路径不包括它。

那条路线将匹配`/hello/there`但不匹配，`/hello`甚至不匹配`/hello/`。

鉴于您正在查看捕获，您可能甚至根本不希望使用它`/hello`，因为该捕获将是`nil`并且谁想和谁打个招呼`nil`？

# java - 使用对象类的参数 vararg 和对象类的数组进行方法重载

> ID：12375823
> 
> 赞同：2
> 
> 时间：2012-09-11T18:34:41.590
> 
> 标签：java, overloading

如果我尝试`flexiPrint()`在类中重载该方法，`Varargdemo`则会产生编译时错误。编译器将以下签名视为相同：

```
public static void flexiPrint(Object... data){}
public static void flexiPrint(Object[] data){} 
```

有人可以向我解释为什么他们会受到同样的对待吗？我一直无法找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:37:05.043

`Object...`只不过是一个数组，这意味着与定义相同`Object[]`

`...`（三个点）代表java中的[可变参数](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。

我们通常在 main 方法中看到这个签名，比如`main(String... args)`

因此，一个类中不允许有多个具有相同签名的方法（编译时错误）。这就是您看到编译时错误的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:38:15.633

它们在“引擎盖下”是相同的。varargs (the `...`) 将数组作为参数传递：

> 必须在数组中传递多个参数仍然是正确的，但是 varargs 功能会自动执行并隐藏该过程。此外，它向上兼容预先存在的 API。

您可以在[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)的文档中找到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:41:15.753

Variable Length Arguments, like `Object...` are syntactic sugar. When used, for example:

```
flexiPrint("apple", "peach", "plum"); 
```

Then "apple", "peach", "plum" are actually turned into: `Object[]{"apple", "peach", "plum"}.

# javascript - 显示特定用户 ID 的特定标签的 30 张 Instagram 图片

> ID：12375828
> 
> 赞同：2
> 
> 时间：2012-09-11T18:35:03.593
> 
> 标签：javascript, jquery, api, instagram

我有一个 Instagram API 调用，它请求用 CrookedSpaces 标记的图像，当这些图像返回时，我正在过滤数据，确保只有来自某个用户的图像（使用他们的用户 ID），代码如下：

```
$(function() {
$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "https://api.instagram.com/v1/tags/crookedspaces/media/recent/?count=100&access_token=TOKEN",
    success: function(data) {
        for (var i = 0; i < 31; i++) {
            var igUID = data.data[i].user.id;
            if(igUID === "USER ID") {
                $(".instagram").append("\
                    <div class='instagram-feed'>\
                        <img class='instagram-image' src='" + data.data[i].images.standard_resolution.url +"' width='325px' alt='" + data.data[i].user.id + " " + igUID + "' onMouseOver=\"toggle_visibility('igImageHover" + i + "');\"/>\
                            <div class='igHover' id='igImageHover" + i + "' onMouseOut=\"toggle_visibility('igImageHover" + i + "');\">\
                            <div class='igHover2'>\
                                SMALL TEST!\
                            </div />\
                            </div>\
                    </div>\
                ");
            } else {
                    console.log("Else portion of code ran " + elseCount + " time(s).");
                    ++elseCount;
                }
        }                
    }
});
}); 
```

但是，我只能显示 27 张图片，因为有 4 张图片不是由该特定用户 ID 发布的。有没有办法强制 for 循环不增加？或者在不将代码发送到无限循环的情况下从 i 中减去 1？

这是 JSFiddle—— [http://jsfiddle.net/UQcZP/](http://jsfiddle.net/UQcZP/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:47:59.170

你可以使用一个while循环：

```
var i = 0;
var used=0;
while (used<31)
{
  if (i < data.data.length){
     // .. Do your work here
     // only increment used when you actually get a match
  }
  else
  {
     // Here we are past the end of the data and did not reach the 30 items, 
     // so just set the number of items to 31 to exit the loop.
     used = 31; 
  }
  i++;    
}​ 
```

# algorithm - 分离相同类型项目的算法

> ID：12375831
> 
> 赞同：15
> 
> 时间：2012-09-11T18:35:13.010
> 
> 标签：algorithm, sorting

我有一个元素列表，每个元素都用一种类型标识，我需要重新排序列表以**最大化**相同类型元素之间的**最小距离。**

集合很小（10 到 30 个项目），所以性能并不是很重要。

每种类型的项目数量或类型数量没有限制，数据可以被认为是随机的。

例如，如果我有一个列表：

*   5项A
*   3项B
*   2项C
*   2 项 D
*   1项E
*   1 项 F

我想制作类似： `A`, `B`, `C`, `A`, `D`, `F`, `B`, `A`, `E`, `C`, `A`, `D`, `B`,`A`

*   A 在两次出现之间至少有 2 项
*   B 在两次出现之间至少有 4 个项目
*   C在出现之间有6个项目
*   D 在出现之间有 6 个项目

有没有一种算法可以实现这一点？

**-更新-**

在交换了一些意见后，我得出了次要目标的定义：

*   **主要目标**：最大化相同类型元素之间的最小距离，仅考虑距离较小的类型。
*   **次要目标：最大化***每种*类型元素之间的最小距离。IE：如果一个组合增加了某种类型的最小距离而不减少其他，那么选择它。

**-更新2-**

关于答案。有很多有用的答案，虽然没有一个是两个目标的解决方案，特别是第二个目标，这很棘手。

关于答案的一些想法：

*   *PengOne*：听起来不错，虽然它没有提供具体的实现，并且并不总是根据第二个目标导致最好的结果。
*   *Evgeny Kluev* : 为主要目标提供了具体的实现，但并没有根据次要目标导致最好的结果。
*   tobias_k：我喜欢随机方法，它并不总能带来最好的结果，但它是一个很好的近似值并且具有成本效益。

我尝试了 Evgeny Kluev、回溯和 tobias_k 公式的组合，但它需要太多时间才能得到结果。

最后，至少对于我的问题，我认为 tobias_k 是最合适的算法，因为它的简单性和及时的良好结果。可能，它可以使用*Simulated annealing*来改进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:28:24.580

首先，您还没有定义明确的优化问题。如果您想最大化相同类型的两个项目之间的最小距离，那是很好定义的。如果你想最大化两个 A 之间、两个 B 和 ... 之间以及两个 Z 之间的最小距离，那么这不是很好定义的。您如何比较两种解决方案：

1.  A 至少相距 4，B 至少相距 4，C 至少相距 2
2.  A 至少相距 3，B 至少相距 3，C 至少相距 4

你需要一个明确的“好”（或者更准确地说，“更好”）的衡量标准。我现在假设度量是：***最大化同一项目中任意两个之间的最小距离***。

这是一个实现最小距离的算法，`ceiling(N/n(A))`其中`N`是项目的总数，`n(A)`是 instance 的项目数`A`，假设它`A`是最多的。

*   订购项目类型`A1, A2, ... , Ak`。`n(Ai) >= n(A{i+1})`
*   将列表初始化`L`为空。
*   对于`j`from `k`to `1`，将 type 的项`Ak`尽可能均匀地分布在`L`.

示例：给定问题中的分布，算法产生：

```
F
E, F
D, E, D, F
D, C, E, D, C, F
B, D, C, E, B, D, C, F, B
A, B, D, A, C, E, A, B, D, A, C, F, A, B 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T19:36:45.950

这听起来像是一个有趣的问题，所以我只是试了一下。这是我用 Python 完成的超级简单的随机方法：

```
def optimize(items, quality_function, stop=1000):
    no_improvement = 0
    best = 0
    while no_improvement < stop:
        i = random.randint(0, len(items)-1)
        j = random.randint(0, len(items)-1)
        copy = items[::]
        copy[i], copy[j] = copy[j], copy[i]
        q = quality_function(copy)
        if q > best:
            items, best = copy, q
            no_improvement = 0
        else:
            no_improvement += 1
    return items 
```

正如评论中已经讨论的那样，真正棘手的部分是质量函数，它作为参数传递给优化器。经过一番尝试，我想出了一个几乎总能产生最佳结果的方法。感谢*pmoleri*指出如何提高效率。

```
def quality_maxmindist(items):
    s = 0
    for item in set(items):
        indcs = [i for i in range(len(items)) if items[i] == item]
        if len(indcs) > 1:
            s += sum(1./(indcs[i+1] - indcs[i]) for i in range(len(indcs)-1))
    return 1./s 
```

这里有一些随机结果：

```
>>> print optimize(items, quality_maxmindist)
['A', 'B', 'C', 'A', 'D', 'E', 'A', 'B', 'F', 'C', 'A', 'D', 'B', 'A'] 
```

请注意，通过另一个质量函数，相同的优化器可以用于不同的列表重新排列任务，例如作为（相当愚蠢的）随机排序器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T14:06:31.567

这是一种算法，它只最大化相同类型元素之间的最小距离，除此之外什么都不做。以下列表用作示例：

```
AAAAA BBBBB CCCC DDDD EEEE FFF GG 
```

*   按每种类型的元素数量以降序对元素集进行排序。实际上，只有最大的集合 (A & B) 以及那些少一个元素的元素集合 (C & D & E) 应该放在列表的头部。其他集合可能未排序。
*   为每个最大集合中的一个元素在数组中保留 R 个最后位置，将剩余数组平均分配给最大集合的 S-1 个剩余元素。这给出了最佳距离：K = (N - R) / (S - 1)。将目标数组表示为具有 K 列和 L = N / K 整行（并且可能是具有 N % K 个元素的部分行）的 2D 矩阵。例如，我们有 R = 2、S = 5、N = 27、K = 6、L = 4 的集合。
*   如果矩阵有 S - 1 个完整行，则使用最大集合 (A & B) 的元素填充此矩阵的前 R 列，否则从最后一个开始依次填充所有列。

对于我们的示例，这给出了：

```
AB....
AB....
AB....
AB....
AB. 
```

如果我们尝试以相同的顺序用其他集合填充剩余的列，则会出现问题：

```
ABCDE.
ABCDE.
ABCDE.
ABCE..
ABD 
```

最后一个'E'距离第一个'E'只有5个位置。

*   从最后一列开始依次填充所有列。

对于我们的示例，这给出了：

```
ABFEDC
ABFEDC
ABFEDC
ABGEDC
ABG 
```

回到线性数组，我们有：

```
ABFEDCABFEDCABFEDCABGEDCABG 
```

* * *

以下是对这个问题使用模拟退火的尝试（C 源）：http: [//ideone.com/OGkkc](http://ideone.com/OGkkc)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T19:37:44.267

我相信你可以把你的问题看作是一堆物理上相互排斥的粒子。您可以迭代到“稳定”的情况。

基本伪代码：

```
force( x, y ) = 0 if x.type==y.type
                1/distance(x,y) otherwise 

nextposition( x, force ) = coined?(x) => same
                           else => x + force

notconverged(row,newrow) = // simplistically
   row!=newrow

row=[a,b,a,b,b,b,a,e]; 
newrow=nextposition(row);
while( notconverged(row,newrow) )
   newrow=nextposition(row); 
```

我不知道它是否会收敛，但这是一个想法:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-27T20:49:17.427

这是另一种方法。

如果每个项目必须与同一类型的每个其他项目保持至少 k 个位置，则从左到右写下项目，跟踪每种类型剩下的项目数量。在每一点放下一个你可以合法放下的最大数量的项目。

如果同一类型的项目不超过 ceil(N / k) 个，这将适用于 N 个项目，因为它将保留此属性 - 在放下 k 个项目后，我们有 k 个更少的项目，并且我们已经放下了至少一个以该类型的 ceil(N / k) 个项目开头的每种类型。

给定一堆混合项目，你可以计算出你可以支持的最大 k，然后布置项目来解决这个 k。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T19:42:47.493

我确信可能有更有效的解决方案，但这里有一种可能性：

首先，请注意，很容易找到产生相同类型的最小距离为 1 的排序。只需使用任何随机排序，MDBIOST 将至少为 1，如果不是更多的话。

*因此，从 MBIOST 为 2 的假设开始。基于 MBIOST 为 2 的假设，*对可能排序的空间进行递归搜索。您可以使用许多条件来修剪此搜索中的分支。如果找到有效的排序，则终止搜索。

如果您找到了一个有效的方法，请再试一次，假设 MBDIST 将为 3。然后 4... 以此类推，直到搜索失败。

**更新：**实际上最好从一个*高*数字开始，因为这会更多地限制可能的选择。然后逐渐减少数量，直到找到有效的排序。

# javascript - 在javascript中，我无法弄清楚如何使正则表达式仅替换捕获而不是匹配

> ID：12375832
> 
> 赞同：3
> 
> 时间：2012-09-11T18:35:12.437
> 
> 标签：javascript, regex

以下功能旨在从文本中删除随机文章（词性）。最终百分比将是用户可调整的，正则表达式更复杂以更好地捕捉单词边界等。它正在替换（大约 50/50），但它也压缩了空格（匹配但未捕获）。我想我在这里真的很傻，但我无法弄清楚正确的语法......有人可以帮忙吗？

```
function posArticles(t) {
   var text = t;
   var re = / (a|the|an) /g;    
   var rArray;

   text = text.replace(re, function(_, m) {
       if (Math.floor(Math.random()*101) < 50) return '';
       else return m;
   });

   return text;
} 
```

我意识到这与 anon 函数的位置/可选参数有关，但我不知道哪个是匹配项，哪个是捕获等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:37:21.277

有很多方法可以做到这一点，但我认为你最好的办法是使用`\b`- 一个“单词边界”的零宽度匹配。这保证了你得到的是“the”而不是“there”或其他什么，但与它周围的空格不匹配。

因此，使用`re = /\b([Aa]n?|[Tt]he)\b/;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:45:38.077

> 我意识到这与 anon 函数的位置/可选参数有关，但我不知道哪个是匹配项，哪个是捕获等等。

传递给回调函数的第一个参数是完全匹配（即：）`_ = ' the '`。下一个参数是您捕获的组 ( `m = 'the'`)。回调函数正在替换整个匹配，因此如果您在表达式中包含空格，它们也将被替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T18:48:51.730

```
if (Math.floor(Math.random()*101) < 50) return ' '; 
```

返回一个空格而不是空字符串:)

# php - isset vs empty vs is_null

> ID：12375833
> 
> 赞同：28
> 
> 时间：2012-09-11T18:35:14.203
> 
> 标签：php

我正在尝试编写一个脚本，当用户上传文件但不输入名称时，会返回错误。我尝试过使用 is_null、empty 和 isset，但它们都不起作用。例如，在下面，即使输入了名称，is_null 也会返回错误。任何人都可以帮忙吗？

```
$caption = $_REQUEST[$name_input_name];

if(is_null($caption)) {
    $file->error = 'Please Enter a Title';
    return false;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-07-29T12:09:30.527

`is_null()``isset()`如果变量未设置，但不设置，则发出警告`empty()`。

```
$a - variable with not null value (e.g. TRUE)
$b - variable with null value. `$b = null;`
$c - not declared variable
$d - variable with value that cast to FALSE (e.g. empty string, FALSE or empty array)
$e - variable declared, but without any value assigned
$a->a - declared, but not assigned object property. (`public $a;`)
A::$a - declared, but not assigned static class property.

         |   $a  |   $b  |   $c  |   $d  |   $e  | $a->a | A::$a |
---------+-------+-------+-------+-------+-------+-------+-------+
is_null()| FALSE | TRUE  |TRUE*W | FALSE | TRUE*W| TRUE  | TRUE  |
---------+-------+-------+-------+-------+-------+-------+-------+
isset()  | TRUE  | FALSE | FALSE | TRUE  | FALSE | FALSE | FALSE |
---------+-------+-------+-------+-------+-------+-------+-------+
empty()  | FALSE | TRUE  | TRUE  | TRUE  | TRUE  | TRUE  | TRUE  |
---------+-------+-------+-------+-------+-------+-------+-------+
null === | FALSE | TRUE  |TRUE*W | FALSE | TRUE*W| TRUE  | TRUE  |
---------+-------+-------+-------+-------+-------+-------+-------+
null ==  | FALSE | TRUE  |TRUE*W | TRUE  | TRUE*W| TRUE  | TRUE  |
---------+-------+-------+-------+-------+-------+-------+-------+

TRUE*W - function return TRUE, but same time emits WARNING. 
```

在[empty() 函数文档页面上](http://php.net/manual/en/function.empty.php)，您可以阅读：

> 以下内容被认为是空的：
> 
> ……
> 
> $var; （声明的变量，但没有值）

代码`$var;`正在定义一个变量，但没有为它分配任何值，这可能会产生误导，但这是错误的。变量`$var`仍然是未定义的并且类型识别函数，例如`is_null()`如果您`$var`作为参数传递，则会发出警告。

但它不适用于未确定的类或对象属性。声明它们而不分配某些值会自动分配 NULL。

**PHP 7.4 中的UPD**类型属性默认情况下不分配为 NULL。如果您没有为它们设置任何值，它们将被视为未分配。

*一些低级描述：*

`isset()`和`empty()`是核心函数，将根据zval类型直接编译成特定的操作码：

```
ZEND_ISSET_ISEMPTY_THIS
ZEND_ISSET_ISEMPTY_CV
ZEND_ISSET_ISEMPTY_VAR
ZEND_ISSET_ISEMPTY_DIM_OBJ
ZEND_ISSET_ISEMPTY_PROP_OBJ
ZEND_ISSET_ISEMPTY_STATIC_PROP 
```

此外，它们将通过相同的功能进行编译[`zend_compile_isset_or_empty`](https://github.com/php/php-src/blob/master/Zend/zend_compile.c)

函数`is_null()`是[类型识别函数](https://github.com/ryantenney/php7/blob/master/ext/standard/type.c)，如`is_numeric`, `is_recource`,`is_bool`等。将像用户定义的函数一样使用操作码等调用`INIT_FCALL_BY_NAME/DO_FCALL_BY_NAME`。

```
/* {{{ proto bool is_null(mixed var)
   Returns true if variable is null
   Warning: This function is special-cased by zend_compile.c and so is usually bypassed */
PHP_FUNCTION(is_null)
{
    php_is_type(INTERNAL_FUNCTION_PARAM_PASSTHRU, IS_NULL);
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-11T18:41:25.383

`isset()` will check if the variable is set, ie

```
<?php

echo isset($var); // false

$var = 'hello'; 
```

`empty()` will check if the variable is empty, ie

```
<?php

$emptyString = '';

echo empty($emptyString); // true 
```

`is_null()` will check for `NULL` which is different from empty, because it's set to `NULL` not an empty string. (NULL might be a confusing concept)

Since your title is a string, I think you want to be using `empty()`

```
if (!isset($_REQUEST[$name_input_name]) || empty($_REQUEST[$name_input_name])) {
    $file->error = 'Please Enter a Title';
    return false;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-08-11T21:18:57.497

**PHP `empty()`vs `is_null()`vs `isset()`：**

|  |    “”</th> |  “富”</th> | 无效的 | *错误的* |    0 | *不明确的* |
| --- | --- | --- | --- | --- | --- | --- |
| `empty()` | *真的* | *错误的* | *真的* | *真的* | *真的* | *真的* |
| `is_null()` | *错误的* | *错误的* | *真的* | *错误的* | *错误的* | *真*  （错误） |
| `isset()` | *真的* | *真的* | *错误的* | *真的* | *真的* | *错误的* |

如果要检查是否存在除或*undefined*以外的*任何*值，请使用*（因为**会在未定义的变量上生成警告。）*`null`*`isset($var)`
*`!is_null()`**

 *如果您想检查该值是非空白文本还是包括零在内的任何数字，它会变得更加棘手：

```
if (!empty($v) || (isset($v) && ($v === 0 || $v === '0'))) {
    // $v is non-blank text, true, 0 or '0'
    // $v is NOT an empty string, null, false or undefined
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-24T15:54:40.183

### 伊塞特（）

来自 PHP 手册 – isset()：

> isset — 确定变量是否已设置且不为 NULL

换句话说，只有当变量不为空时它才返回真。

### 空的（）

来自 PHP 手册 – empty()：

> empty — 确定变量是否为空

换句话说，如果变量是一个空字符串，它会返回真，假，array()，NULL，“0？，0，和一个未设置的变量。

### 一片空白（）

来自 PHP 手册 – is_null()：

> is_null — 查找变量是否为 NULL

换句话说，只有当变量为空时它才返回真。`is_null()`与 相反`isset()`，除了`isset()`可以应用于未知变量的一个差异，但`is_null()`只能应用于已声明的变量。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-11T18:36:28.577

我认为您打算在将其分配给某物`isset` *之前使用：*

```
if(!isset($_REQUEST[$name_input_name]))
{
    $file->error = 'Please Enter a Title';
    return false;
}

$caption = $_REQUEST[$name_input_name]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-11-05T20:24:57.617

和 和之间`isset()`的区别并不容易。它比我们愿意相信的更微妙。`is_null()``empty()`

因为，用文字很难清楚地解释差异，我建议看看[这个页面](https://www.lucidar.me/en/web-dev-class/lesson-3-04-php-variables-functions/)：有一个包含每个函数行为的详细表格。它清楚而充分地解释了这些差异。

顺便说一句，由于对行为的误解，我确信许多 PHP 脚本包含安全漏洞。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-06T05:50:49.830

[这是](https://www.virendrachandak.com/techtalk/php-isset-vs-empty-vs-is_null/)一个很好的解释：

[![在此处输入图像描述](../Images/e1d57413c117fc246fe826b81e089e37.png)](https://i.stack.imgur.com/dWR8F.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-11T18:50:59.967

我用strlen来统计字符数

```
 if (strlen($_REQUEST['name_input_name']) < 1) {
    $file->error = 'Please Enter a Title';
    return false;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-19T07:45:05.967

你可以试试这个：

```
if(!isset($_REQUEST['name_input_name']))
{
    $file->error = 'Please Enter a Title';
    return false;
}
$caption = $_REQUEST['name_input_name']; 
```

注意：$_REQUEST 是一个全局数组，将数据存储在 key=>value 对中。将“name_input_name”视为从服务器提取的值。

如果 name_input_name 设置为某个值，代码将跳过 if 块并将值存储到变量 $caption。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-20T10:19:05.107

我写了这个 php 页面，希望对你有所帮助。如果您运行它，它会显示这些特定类型的变量与这些函数的交互（加上我为自己制作的一个），并且它还使用 == 运算符将它们相互比较： [https ://pastebin.com/whPFMams](https://pastebin.com/whPFMams)

```
<!doctype html>
<html>
<head>
    <style>
    td.first{
        font-weight: bold;
    }
    h3 {
        text-align: center;
    }
    </style>
</head>
<body>
    <h3>FUNCTIONS COMPARISON</h3><br>
<pre>
<h4>Variables</h4>
class obj{};
$n;

Array:
"a" => -1,
"b" => 0,
"c" => 0.0,
"d" => '',
"e" => ' ',
"f" => '0',
"g" => "\0",
"h" => true,
"i" => false,
"j" => null,
"k" => array(), 
"l" => new obj(),
"m" => new stdClass(),
"n" => $n (undefined)

z = (undeclared)

<h4>My function</h4>
function isvalid($value,$strict=false){
    if( !is_null($value) && value!==false && (!empty($value) || $value == 0) ){
        if($strict)
            {
                if(is_bool($value) || is_array($value) || is_object($value))
                    {return false;}
                else
                    {return true;}
            }
        else
            {return true;}
    }
    else
        {return false;}
}

<h4>Var_dump</h4>
<?php
error_reporting(E_ERROR | E_PARSE);

class obj{};

function isvalid($value,$strict=false){
    if( !is_null($value) && $value!==false && (!empty($value) || $value == 0) ){
        if($strict)
            {
                if(is_bool($value) || is_array($value) || is_object($value))
                    {return false;}
                else
                    {return true;}
            }
        else
            {return true;}
    }
    else
        {return false;}
}

$n;
$values = [
"a" => -1,
"b" => 0,
"c" => 0.0,
"d" => '',
"e" => ' ',
"f" => '0',
"g" => "\0",
"h" => true,
"i" => false,
"j" => null,
"k" => array(), 
"l" => new obj(),
"m" => new stdClass(),
"n" => $n
//"z"
];

echo var_dump($values)."\n z = "; echo var_dump($z)."\n";

?>
</pre><br />
<table border = "1">
         <tr>
            <th>== and other</th>
            <?php 
            echo "<th>"; echo var_dump($values["a"]); echo "<br> : a = -1 </th>";
            echo "<th>"; echo var_dump($values["b"]); echo "<br> : b = 0 </th>";
            echo "<th>"; echo var_dump($values["c"]); echo "<br> : c = 0.0 </th>";
            echo "<th>"; echo var_dump($values["d"]); echo "<br> : d = '' </th>";
            echo "<th>"; echo var_dump($values["e"]); echo "<br> : e = ' ' </th>";
            echo "<th>"; echo var_dump($values["f"]); echo "<br> : f = '0' </th>";
            echo "<th>"; echo var_dump($values["g"]); echo "<br> : g = '/0' </th>";
            echo "<th>"; echo var_dump($values["h"]); echo "<br> : h = true </th>";
            echo "<th>"; echo var_dump($values["i"]); echo "<br> : i = false </th>";
            echo "<th>"; echo var_dump($values["j"]); echo "<br> : j = null </th>";
            echo "<th>"; echo var_dump($values["k"]); echo "<br> : k = empty array </th>";
            echo "<th>"; echo var_dump($values["l"]); echo "<br> : l = empty object (Notices with numbers)</th>";
            echo "<th>"; echo var_dump($values["m"]); echo "<br> : m = empty stdClass (Notices with numbers)</th>";
            echo "<th>"; echo var_dump($values["n"]); echo "<br> : n = undefined </th>";
            echo "<th>"; echo var_dump($z); echo "<br> : z = undeclared (Notices)</th>"; 
            ?>
         </tr>
         <?php
         foreach ($values as $key => $val){
            echo '
            <tr>
            <td class="first">'; echo var_dump($val); echo '<br> : '.$key.'</td>';
            foreach ($values as $key2 => $val2){
                echo '<td>'; echo $val==$val2 ? var_dump($val==$val2) : /*var_dump($val==$val2).*/''; echo'</td>';
            }
            echo '<td>'; echo $val==$z ? var_dump($val==$z) : /*var_dump($val==$z).*/''; echo'</td>';
            echo '</tr>';
         }
         //z
         echo '
            <tr>
            <td class="first">'; echo var_dump($z); echo '<br> : z (Notices)</td>';
            foreach ($values as $key2 => $val2){
                echo '<td>'; echo $z==$val2 ? var_dump($z==$val2) : /*var_dump($z==$val2).*/''; echo'</td>';
            }
            echo '<td>'; echo $z==$z ? var_dump($z==$z) : /*var_dump($z==$z).*/''; echo'</td>';
            echo '</tr>';

          //!empty || ==0
         echo '
            <tr>
            <td class="first"> !empty || ==0 </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo !empty($val) || $val==0 ? var_dump(!empty($val) || $val==0) : /*var_dump(!empty($val) || $val==0.*/''; echo'</td>';
            }
            echo '<td>'; echo !empty($z) || $z==0 ? var_dump(!empty($z) || $z==0) : /*var_dump(!empty($z) || $z==0).*/''; echo'</td>';
            echo '</tr>';                            

         //isvalid
         echo '
            <tr>
            <td class="first"> isvalid() </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo isvalid($val) ? var_dump(isvalid($val)) : /*var_dump(isvalid($val)).*/''; echo'</td>';
            }
            echo '<td>'; echo isvalid($z) ? var_dump(isvalid($z)) : /*var_dump(isvalid($z)).*/''; echo'</td>';
            echo '</tr>';  

         //isvalid strict
         echo '
            <tr>
            <td class="first"> isvalid(strict) </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo isvalid($val,true) ? var_dump(isvalid($val,true)) : /*var_dump(isvalid($val,true)).*/''; echo'</td>';
            }
            echo '<td>'; echo isvalid($z,true) ? var_dump(isvalid($z,true)) : /*var_dump(isvalid($z,true)).*/''; echo'</td>';
            echo '</tr>'; 

         //!is_null
         echo '
            <tr>
            <td class="first"> !is_null </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo !is_null($val) ? var_dump(!is_null($val)) : /*var_dump(!is_null($val)).*/''; echo'</td>';
            }
            echo '<td>'; echo !is_null($z) ? var_dump(!is_null($z)) : /*var_dump(!is_null($z)).*/''; echo'</td>';
            echo '</tr>';     

         //isset
         echo '
            <tr>
            <td class="first"> isset (No Notices)</td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo isset($val) ? var_dump(isset($val)) : /*var_dump(isset($val)).*/''; echo'</td>';
            }
            echo '<td>'; echo isset($z) ? var_dump(isset($z)) : /*var_dump(isset($z)).*/''; echo'</td>';
            echo '</tr>';  

         //!empty
         echo '
            <tr>
            <td class="first"> !empty (No Notices) </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo !empty($val) ? var_dump(!empty($val)) : /*var_dump(!empty($val)).*/''; echo'</td>';
            }
            echo '<td>'; echo !empty($z) ? var_dump(!empty($z)) : /*var_dump(!empty($z)).*/''; echo'</td>';
            echo '</tr>';   

         // if
         echo '
            <tr>
            <td class="first"> if </td>';
            foreach ($values as $key => $val){
                echo '<td>'; echo $val ? var_dump(true) : /*var_dump(false).*/''; echo'</td>';
            }
            echo '<td>'; echo $z ? var_dump(true) : /*var_dump(false).*/''; echo'</td>';
            echo '</tr>';      

         ?>
         <tr>
            <th>functions</th>
            <?php 
            echo "<th>"; echo var_dump($values["a"]); echo "<br> : a = -1 </th>";
            echo "<th>"; echo var_dump($values["b"]); echo "<br> : b = 0 </th>";
            echo "<th>"; echo var_dump($values["c"]); echo "<br> : c = 0.0 </th>";
            echo "<th>"; echo var_dump($values["d"]); echo "<br> : d = '' </th>";
            echo "<th>"; echo var_dump($values["e"]); echo "<br> : e = ' ' </th>";
            echo "<th>"; echo var_dump($values["f"]); echo "<br> : f = '0' </th>";
            echo "<th>"; echo var_dump($values["g"]); echo "<br> : g = '/0' </th>";
            echo "<th>"; echo var_dump($values["h"]); echo "<br> : h = true </th>";
            echo "<th>"; echo var_dump($values["i"]); echo "<br> : i = false </th>";
            echo "<th>"; echo var_dump($values["j"]); echo "<br> : j = null </th>";
            echo "<th>"; echo var_dump($values["k"]); echo "<br> : k = empty array </th>";
            echo "<th>"; echo var_dump($values["l"]); echo "<br> : l = empty object (Notices with numbers)</th>";
            echo "<th>"; echo var_dump($values["m"]); echo "<br> : m = empty stdClass (Notices with numbers)</th>";
            echo "<th>"; echo var_dump($values["n"]); echo "<br> : n = undefined </th>";
            echo "<th>"; echo var_dump($z); echo "<br> : z = undeclared (Notices)</th>"; 
            ?>
         </tr>
      </table>
    <br>
    (Notices) : This line is full of Notices. <br>
    (Notices with numbers) : This line has Notices about number types interactions. <br>
    (No Notices) : This line has absolutely no Notices.
</body>
</html> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-17T10:24:05.927

参考：[PHP 中 isset、is_null、empty 之间的区别](https://devhoi.com/threads/different-betwen-isset-vs-is_null-vs-empty-in-php.19/)

*   isset() 表示 $var 已定义且不为空
*   is_null() 表示 $var 已定义且为空。如果未定义则抛出错误。
*   empty() 是什么意思 NO => false, 0, 0.0, "", "0", *null* , array()

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-03T14:31:24.947

is_null 是 isset 的对偶，除了 isset 在变量为 null 时不打印通知。

```
>$ciao;
>var_export(is_null($ciao));
>PHP Notice:  Undefined variable: ciao in php shell code on line 1
>true
>var_export(!isset($ciao));
>true 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-09-06T09:05:17.480

1.  isset() — 确定变量是否已设置且不为 NULL

2.  empty() - 确定变量是否为空。

3.  is_null() - 确定变量是否为空

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2014-10-20T14:13:05.297

在这些 php 函数`empty(),isset() & is_null`中主要用于测试变量。但每个函数都有不同的功能主义者。

学分：[empty()、isset()、is_null()](http://www.queryhome.com/62979/php-empty-vs-isset-php-vs-is_null)*

# paging - Offset Fetch Next 获取所有行

> ID：12375837
> 
> 赞同：9
> 
> 时间：2012-09-11T18:35:28.227
> 
> 标签：paging, sql-server-2012

我在 SQL Server 2012 中有一个查询，它应该根据我指定的页面大小和它所在的页面返回一些记录。它看起来像这样：

```
 SELECT LocID, LocName
FROM Locations
ORDER BY LocName OFFSET @PageNum ROWS
FETCH NEXT @PageSize ROWS ONLY 

```

代码非常简单。不过，我需要做的是将其放入一个函数中以正确返回分页。但是，我也可能需要从此函数返回所有记录，因此我需要选择在没有任何 OFFSET 或 FETCH 的情况下调用该函数（大多数情况下，这是针对没有分页并且应该只是直接数据的报告） . 我想不出一个好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T03:32:28.907

你可以说：

```
@PageNum  INT,
@PageSize INT

...

SELECT @PageSize = COALESCE(@PageSize, 2000000000);   
-- 2 billion should be enough?

... OFFSET (COALESCE(@PageNum, 1)-1)*@PageSize ROWS
FETCH NEXT @PageSize ROWS ONLY; 
```

当您只需要所有行时，将 NULL 传递给两个参数。

# c# - 如何获得 CommonApplicationData 文件夹的一致行为？

> ID：12375839
> 
> 赞同：0
> 
> 时间：2012-09-11T18:35:36.673
> 
> 标签：c#, .net, service, teamcity, profile

我正在使用 C# 开发控制台应用程序，正常运行时将访问 Vista 和 Windows 7 上“C:\ProgramData”中的通用应用程序数据文件夹。

例如：

```
System.Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) 
```

但是，在某些情况下，此应用程序将从服务（例如 TeamCity）生成，这将返回类似“C:\Windows\system32\config\systemprofile\AppData\Roaming”而不是“C:\ProgramData”的内容。我知道这是服务的预期行为，但在我的应用程序中没有预料到它，因为它不是服务（只是由服务启动）。

我希望这种行为保持一致，以便在手动运行应用程序或通过 TeamCity 运行应用程序时，我现在拥有重复的配置文件等。这可能吗？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:49:39.620

玩一点**环境变量**怎么样？见。如果你的应用程序有足够的权限，你就不需要复制你的配置/代码。[`GetEnvironmentVariable`](http://msdn.microsoft.com/en-us/library/y6k3c7b0) [`SetEnvironmentVariable`](http://msdn.microsoft.com/en-us/library/96xafkes)

# html - 如何使背景图像大小保持其比例？

> ID：12375843
> 
> 赞同：1
> 
> 时间：2012-09-11T18:35:47.063
> 
> 标签：html, background-image, css

示例：http: [//jsfiddle.net/SJUeK/](http://jsfiddle.net/SJUeK/)

我希望示例中的背景图像始终是其全高（取决于宽度）。我不能用像素来做，因为它需要响应。

有没有办法做到这一点？或者我需要在 html 中使用 img 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T18:38:37.857

当然：

```
background-size: auto 100%; 
```

[这是一个演示。](http://dabblet.com/gist/3700723)

或者，如果您实际上的意思是“保持其纵横比和缩放以适应容器内部”，那么`background-size: contain`应该做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T14:36:57.707

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

[https://css-tricks.com/perfect-full-page-background-image/](https://css-tricks.com/perfect-full-page-background-image/)

# r - 将 nls() 函数应用于多个子集

> ID：12375845
> 
> 赞同：2
> 
> 时间：2012-09-11T18:35:50.683
> 
> 标签：r, nls

我需要对整个数据集运行非线性最小二乘回归，然后对该数据集的几个子集重复回归。我可以为单个子集执行此操作；例如（其中 y 是通用逻辑方程，x 是从 1 到 20 的向量）：

```
example = nls(x ~ y, subset = c(2:20)) 
```

但我想在 3:20、4:20、5:20 等时间执行此操作。我尝试了一个 for 循环：

```
datasubsets <- sapply(2:19, seq, to = 20)
for (i in 1:19){
    example[i] = nls(x ~ y, subset = datasubsets[i])
} 
```

但我收到“xj[i] 中的错误：无效的下标类型 'list'”。我非常希望避免复制和粘贴 nls() 20 次。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T23:16:23.750

这可以完成工作：`sapply(2:19,function(jj) nls(x~y,subset=jj:20))`.

# jquery - 如何修复 IE 中的拖放错误？

> ID：12375848
> 
> 赞同：0
> 
> 时间：2012-09-11T18:35:53.697
> 
> 标签：jquery

我正在研究拖放元素功能，但在 IE 上遇到问题。

可拖动性有效，但如果我将我的项目拖到浏览器的边缘，内容应该会自动向上或向下滚动（适用于 Chrome、FF）。在 IE 中，元素和被拖动的元素将在不滚动的情况下存储到浏览器的边缘。这是 IE 默认行为吗？这里有没有人可以帮助我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:38:21.383

通常这些问题会发生，而且当你深入你的代码时，它真的很难调试。尝试访问您的拖放插件站点并尝试使用 IE 进行演示。如果它在那里工作，那么您的某些样式或 javascript 可能会发生冲突。一些解决方法将使用他们拥有的最新版本升级插件。
除此之外，进入他们的源代码并开始调试；）

# jquery - 如何从视频中提取帧并将其保存到内存中？

> ID：12375857
> 
> 赞同：1
> 
> 时间：2012-09-11T18:36:24.557
> 
> 标签：jquery, python, django, ffmpeg

我尝试提取帧并将其保存为 output.jpg 在服务器端：

```
f = "ffmpeg -vframes 1 -y -ss "+time+" -i ./media/somemov.mp4 ./media/output.jpg"
subprocess.call(f, shell=True) 
```

在客户端使用：

```
getImage(noOfFrame);  //send the request for call the ffmpeg function from views.py

document.getElementById("main").style.backgroundImage="url(http://localhost:8000/media/output.jpg#"+ new Date().getTime();+")"; 
```

但它太慢了。DIV 总是显示旧图像，因为创建图像需要很长时间。例如，我想要 3 号图像，而 DIV 没有 2，我想要 4 号图像，而 div 没有 3。

有什么方法可以从视频中提取帧（通过 ffmpeg）并将其发送到 Python 而不创建 output.jpg 文件？

我想获取图像数据并将其从服务器（django）发送到网页并将其设置为任何 DIV 的背景图像。

“纯数据发送”解决方案比我的更好吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:47:06.970

简短的回答：不。

不过，有一个更好的方法可以做到这一点。

1.  视频被标记为具有特定时间戳的缩略图/截屏创建
2.  django 删除旧缩略图（如果存在）
3.  django 使用[http://pypi.python.org/pypi/django-celery](http://pypi.python.org/pypi/django-celery)对事件进行排队（该事件是实际的缩略图创建事件）
4.  当事件在队列中时，向用户显示占位符图像 b/c 缩略图不存在
5.  DIV 上的 javascript/ajax 轮询事件队列以完成缩略图。
6.  事件完成后，javascript 实时获取新创建的缩略图并更改 DIV 的 CSS 属性

# sencha-touch-2 - 无法从商店获取我的数据以加载到视图中

> ID：12375859
> 
> 赞同：-1
> 
> 时间：2012-09-11T18:36:31.740
> 
> 标签：sencha-touch-2

我是 Sencha Touch2 的新手，我试图通过从一个简单的商店加载任意数据来启动我的应用程序，然后再继续使用代理。我的视图显示但数据未填充。我见过这个问题，但没有任何帮助我解决的问题。感谢任何帮助和耐心。提前感谢！

**我的模特**

```
Ext.define('SenchaFirstApp.model.Distributors', {
       extend: 'Ext.data.Model',
       config: {
             fields: [
                {name: 't', type: 'string'},
                {name: 'distr', type: 'string'},
                {name: 'group', type: 'string'},
                {name: 'site', type: 'string'},
                {name: 'status', type: 'string'},
                {name: 'actuve', type: 'string'},
                {name: 'assigned', type: 'string'},
                {name: 'state', type: 'string'},
                {name: 'schedule', type: 'string'},
                {name: 'finished', type: 'string'} ],
       }
       }); 
```

**我的观点**

```
var distrStore = Ext.create('SenchaFirstApp.store.DistributorStore');
Ext.define('SenchaFirstApp.view.DistributorView', {
           extend: 'Ext.dataview.DataView',
           requires: [distrStore, 'Ext.data.Store', 'Ext.dataview.List'],
           model: 'SenchaFirstApp.model.Distributors',
           xtype: 'mainlist',
           fullscreen: true,

       config:
       {
           fullscreen: true,
           layout: 'fit',
           border: 5,
           title: 'Distributors',
           html: 'My datalist',
           autoLoad: true,

           items:{
               title: 'Setup',
               xtype:'list',
               store: distrStore,
               fields: [
                  {
                      text: 'T',
                      width: 1,
                      sortable: false,
                      hideable: false,
                      dataIndex: 't'
                  },
                  {
                      text: 'Distributor',
                      width: 50,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'distr'
                  },
                  {
                      text: 'Group',
                      width: 20,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'group'
                  },
                  {
                      text: 'Site Name',
                      width: 20,
                      sortable: false,
                      hideable: false,
                      dataIndex: 't'
                  },
                  {
                      text: 'Status',
                      width: 5,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'status'
                  },
                  {
                      text: 'Active',
                      width: 5,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'active'
                  },
                  {
                      text: 'State',
                      width: 2,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'state'
                  },
                  {
                      text: 'Scheduled',
                      width: 10,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'schedule'
                  },
                  {
                      text: 'Finished',
                      width: 10,
                      sortable: false,
                      hideable: false,
                      dataIndex: 'finished'
                  }
            ]
                  }

       }  
}); 
```

> distrStore.load();

**我的商店**

```
Ext.define('SenchaFirstApp.store.DistributorStore', {
                        extend: 'Ext.data.Store',
                        requires: ['SenchaFirstApp.model.Distributors', 'Ext.dataview.DataView'],

                        config: {
                        //  xtype: 'distrlist',
                            storeId: 'mainlist',
                        model: 'SenchaFirstApp.model.Distributors',
                        autoLoad: true,
                        data: [
                               {t: 'S', distr: 'Smart Systems', site: 'Smart Temps', status: "done", active: 'Yes', assigned: 'Me', state: 'IN',                                                                        schedule: 'today', finished: 'today'},
                               {t: 'I', distr: 'People', site: 'This One', status: "done", active: 'Yes', assigned: 'You', state: 'NC', schedule:                                                   'yesterday', finished: 'tomorrow'}
                              ]}}); 
```

**应用程序.js**

```
Ext.Loader.setConfig({enabled:true});
Ext.application({
    name: 'SenchaFirstApp',
    stores: ['DistributorStore'],
    models: ['Distributors'],
    views: ['DistributorView'],
    requires: ['SenchaFirstApp.view.DistributorView', 'Ext.dataview.DataView', 'SenchaFirstApp.model.Distributors', 'SenchaFirstApp.store.DistributorStore',    'Ext.dataview.List'],

launch: function() {    
    Ext.fly('appLoadingIndicator');
    Ext.Viewport.add(Ext.create('SenchaFirstApp.view.DistributorView'));
    } 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:10:20.630

您不需要创建商店的实例：

```
var distrStore = Ext.create('SenchaFirstApp.store.DistributorStore'); 
```

因为当您在应用程序中定义商店时...

```
Ext.application({
    stores: ['DistributorStore'],
    ...
}); 
```

...它是自动为您创建的。要在您的视图中获取您的商店的引用，只需使用带有名称的字符串：

```
{
    xtype: 'list',
    store: 'DistributorStore',
    ...
} 
```

**其他注意事项**

*   您也不需要加载它，`.load()`因为您已`autoLoad`在商店配置中设置为 true。
*   Your view should extend `Ext.Container`, not `Ext.dataview.DataView`. DataView is used to show data (basically an abstract `Ext.List`. Because you have a list as an item, you can just put it inside a container.
*   You have set `fullscreen: true` on the class as well as in the config. You only need to put it inside the config - but it isn't really neccessary because you are creating and inserting your view into `Ext.Viewport` (in your `app.js`) which is already fullscreen.
*   You do not need `fields` config inside your list. You should use a `itemTpl` to create the template for each row.

# php - 数据字段空值返回 0

> ID：12375860
> 
> 赞同：4
> 
> 时间：2012-09-11T18:36:34.403
> 
> 标签：php, sql-server

我在数据库中存储了一个单选按钮值，它可以是真、假或 NULL。在 null 或 false 的情况下，答案是 0，即为 false。有没有检查空值的解决方案？我尝试过使用 isset 和 Empty，但这些都没有帮助。数据库是 MSSQL，数据类型是位来存储单选按钮的值

```
<input name="radioVal" type="radio" id="radioVal" value="false"
<?PHP
           if(row['radioVal'] == false ) 
              echo "checked='checked' "; 
}
?> />

<input name="radioVal" type="radio" id="radioVal" value="true"
<?PHP
           if(row['radioVal'] == true ) 
              echo "checked='checked' "; 
}
?> /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:39:17.157

尝试

```
 if(false === row['radioVal'] ) //or
 if(NULL === row['radioVal'] ) 
```

并检查 NULL 你可以检查[is_null](http://in3.php.net/manual/en/function.is-null.php)

```
 is_null(row['radioVal']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:39:34.980

位列可能将表示为 a`1`或 a `0`。使用三等号检查值*和*类型。检查是否`row['radioVal'] === 1`为真，`row['radioVal'] === 0`是否为假，`row['radioVal'] === null`是否为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:45:15.880

也许您应该在 SQL 数据库中使用另一种数据类型。

我建议 Enum 或类似的东西：

```
ENUM('false', 'true', 'NULL') 
```

在您的 PHP 文件中，您

```
<?PHP
       if(row['radioVal'] == false ) 
          echo "checked='checked' "; 
}
?> 
```

# linux - 如何在 Mono 下的 VB.NET 中获取 USB 闪存驱动器上的可用空间？

> ID：12375863
> 
> 赞同：0
> 
> 时间：2012-09-11T18:36:42.803
> 
> 标签：linux, vb.net, mono

我正在使用 vb.net（框架 2.0）在 Windows 上开发一个控制台应用程序，然后我想在 Debian 上的 Mono 下运行它。我正在使用 System.IO.DriveInfo 来获取 USB 闪存驱动器上的可用空间。在 Windows 下这工作正常：

`Dim drv As New System.IO.DriveInfo("I:\")`

在 Linux 上，这会产生一个异常：

`Dim drv As New System.IO.DriveInfo("/mnt/usb_flash")`

从谷歌搜索看来，DriveInfo 在 Mono 下没有很好地实现。

如何在 Mono 下从 VB.NET 中的 USB 闪存驱动器获取可用空间？

谢谢。

# r - 使用直方图作为 R 中的输入

> ID：12375881
> 
> 赞同：4
> 
> 时间：2012-09-11T18:35:34.837
> 
> 标签：r, input, histogram

诚然，这是一个非常简单的问题，我只是找不到答案。

在 R 中，我有一个包含 2 列的文件：1 列是分类数据名称，第二列是计数列（每个类别的计数）。**对于一个小数据集，我会使用“reshape”和“untable”函数来制作 1 列并以这种方式进行分析。**问题是，如何用**大数据集**处理这个问题？

在这种情况下，我的数据是巨大的，那是行不通的。

我的问题是，我如何告诉 R 使用以下内容作为分布数据：

```
Cat Count
A   5
B   7
C   1 
```

也就是说，我给它一个直方图作为输入，并让 R 在计算有关数据的其他信息时计算出这意味着有 5 个 A、7 个 B 和 1 个 C。

所需的*输入*而不是输出将使 R 理解数据将与以下相同，

A A A A A B B B B B B B C

在合理大小的数据中，我可以自己做，但是当数据非常大时怎么办？

**编辑**

所有计数的总和为 262,916,849。

就它的用途而言：

这是新数据，试图了解这些新数据与其他数据之间的相关性。需要处理线性回归和混合模型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T18:46:57.110

我*认为*您要问的是重塑类别的数据框并将其计数为单个观察向量，其中类别重复。这是一种方法：

```
dat <- data.frame(Cat=LETTERS[1:3],Count=c(5,7,1))
#  Cat Count
#1   A     5
#2   B     7
#3   C     1
rep.int(dat$Cat,times=dat$Count)
# [1] A A A A A B B B B B B B C
#Levels: A B C 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T19:02:28.793

为了跟进@Blue Magister 的出色回答，这里有一个 100,000 行的直方图，总数为 551,245,193：

```
set.seed(42)
Cat <- sapply(rep(10, 100000), function(x) {
  paste(sample(LETTERS, x, replace=TRUE), collapse='')
  })
dat <- data.frame(Cat, Count=sample(1000:10000, length(Cat), replace=TRUE))
> head(dat)
         Cat Count
1 XYHVQNTDRS  5154
2 LSYGMYZDMO  4724
3 XDZYCNKXLV  8691
4 TVKRAVAFXP  2429
5 JLAZLYXQZQ  5704
6 IJKUBTREGN  4635 
```

按照我的标准，这是一个相当大的数据集，Blue Magister 描述的操作非常快：

```
> system.time(x <- rep(dat$Cat,times=dat$Count))
   user  system elapsed 
   4.48    1.95    6.42 
```

它使用大约 6GB 的 RAM 来完成操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T19:10:52.020

这实际上取决于您要计算的统计数据。该`xtabs`函数将为您创建表格，您可以在其中指定计数。该`Hmisc`软件包具有类似的功能`wtd.mean`，它将采用权重向量来计算平均值（以及用于标准偏差、分位数等的相关函数）。该`biglm`软件包可用于一次扩展部分数据集并进行分析。可能还有其他软件包可以处理频率数据，但最好取决于您要回答的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T20:38:03.220

现有的答案都是将预先分箱的数据集扩展为一个完整的分布，然后使用 R 的直方图函数，该函数内存效率低，并且不会像原始海报所询问的那样针对非常大的数据集进行扩展。[HistogramTools](http://cran.r-project.org/web/packages/HistogramTools/index.html) CRAN 包包含一个 函数，该`PreBinnedHistogram`函数接受中断和计数的参数以在 R 中创建直方图对象，而无需大规模扩展数据集。

例如，如果数据集有 3 个包含 5、7 和 1 个元素的桶，那么到目前为止发布的所有其他解决方案都先将其扩展为 13 个元素的列表，然后创建直方图。 `PreBinnedHistogram`相反，直接从 3 元素输入列表创建直方图，而不在内存中创建更大的中间向量。

```
big.histogram <- PreBinnedHistogram(my.data$breaks, my.data$counts) 
```

# ruby-on-rails - Rails 设计 Auto_Gen 密码

> ID：12375883
> 
> 赞同：1
> 
> 时间：2012-09-11T18:37:50.270
> 
> 标签：ruby-on-rails, ruby, devise

我在注册过程中使用了 Devise gem - 我只希望电子邮件是必需的，所以我会为每个用户自动生成密码。

出于某种原因，我的代码正在为单个用户创建 2 个数据库条目。一 - 使用电子邮件地址。一——只有加密的密码。

用户.rb

```
password = Devise.friendly_token
  User.create!(:email => @current_user_email, :id => @current_user_id, :password => password, :password_confirmation => password)

  before_save { |user| user.email = email.downcase }

  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:45:23.920

在我的一个项目中，我采取了类似的方法，不要求用户使用密码进行注册。它导致了一些主要的头痛和 UX 恶作剧 FWIW。

无论您使用什么来进行持久化，请确保在电子邮件列上设置唯一索引。这将导致异常，但它们很容易处理。

我建议在您的用户模型中使用一个类方法，例如：

```
class User
  def self.create_without_password!(email)
    password = Devise.friendly_token
    User.create!(:email => email.downcase, :password => password, :password_confirmation => password)
  end
end 
```

这应该在不使用 before_save 回调的情况下验证模型并引发非唯一性异常

# sql - 上个月的Oracle日期函数

> ID：12375888
> 
> 赞同：21
> 
> 时间：2012-09-11T18:38:22.587
> 
> 标签：sql, oracle, sql-date-functions

我有下面的查询，其中日期是硬编码的。我的目标是删除硬编码日期；查询应在运行时提取上个月的数据。

```
select count(distinct switch_id)
  from xx_new.xx_cti_call_details@appsread.prd.com
 where dealer_name =  'XXXX'
   and TRUNC(CREATION_DATE) BETWEEN '01-AUG-2012' AND '31-AUG-2012' 
```

我应该`sysdate-15`为此使用函数吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-11T21:06:40.497

稍微修改一下 Ben 的查询，

```
 select count(distinct switch_id)   
  from xx_new.xx_cti_call_details@appsread.prd.com  
 where dealer_name =  'XXXX'    
   and creation_date between add_months(trunc(sysdate,'mm'),-1) and last_day(add_months(trunc(sysdate,'mm'),-1)) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-11T18:42:44.947

该[`trunc()`](http://www.techonthenet.com/oracle/functions/trunc_date.php)函数将日期截断到指定的时间段；所以`trunc(sysdate,'mm')`会返回当月的开始。然后，您可以使用该[`add_months()`](http://www.techonthenet.com/oracle/functions/add_months.php)函数获取上个月的开始时间，如下所示：

```
select count(distinct switch_id)   
  from xx_new.xx_cti_call_details@appsread.prd.com  
 where dealer_name =  'XXXX'    
   and creation_date >= add_months(trunc(sysdate,'mm'),-1) 
   and creation_date < trunc(sysdate, 'mm') 
```

作为一个小方面，您没有在原始查询中*明确*转换为日期。*总是*这样做，要么使用[日期文字](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm)，例如`DATE 2012-08-31`，要么使用[`to_date()`](http://www.techonthenet.com/oracle/functions/to_date.php)函数，例如`to_date('2012-08-31','YYYY-MM-DD')`。如果你不这样做，那么你一定会在某些时候犯错。

您不会使用`sysdate - 15`，因为这将提供当前日期前 15 天的日期，这似乎不是您所追求的。它还将包括一个时间组件，因为您不使用`trunc()`.

* * *

就像一个小演示`trunc(<date>,'mm')`一样：

```
select sysdate
     , case when trunc(sysdate,'mm') > to_date('20120901 00:00:00','yyyymmdd hh24:mi:ss')
             then 1 end as gt
     , case when trunc(sysdate,'mm') < to_date('20120901 00:00:00','yyyymmdd hh24:mi:ss')
             then 1 end as lt
     , case when trunc(sysdate,'mm') = to_date('20120901 00:00:00','yyyymmdd hh24:mi:ss')
             then 1 end as eq
  from dual
       ;

SYSDATE                   GT         LT         EQ
----------------- ---------- ---------- ----------
20120911 19:58:51                                1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T21:00:38.227

上个月的数据——

```
select count(distinct switch_id)
  from xx_new.xx_cti_call_details@appsread.prd.com
 where dealer_name =  'XXXX'
   and to_char(CREATION_DATE,'MMYYYY') = to_char(add_months(trunc(sysdate),-1),'MMYYYY'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-20T03:17:40.267

我相信这也会起作用：

```
select count(distinct switch_id)   
  from xx_new.xx_cti_call_details@appsread.prd.com  
 where 
   dealer_name =  'XXXX'    
   and (creation_date BETWEEN add_months(trunc(sysdate,'mm'),-1) and  trunc(sysdate, 'mm')) 
```

它具有使用*BETWEEN*的优势，这是 OP 使用其日期选择标准的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-23T09:30:25.127

它在 Oracle sql developer 中与我合作

```
 SELECT add_months(trunc(sysdate,'mm'), -1),
           last_day(add_months(trunc(sysdate,'mm'), -1)) 
    FROM dual 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-03T06:05:57.663

获取最后 n 个月的数据检索

```
SELECT * FROM TABLE_NAME 
WHERE DATE_COLUMN BETWEEN '&STARTDATE' AND '&ENDDATE'; 
```

# javascript - 加密的 javascript 实现，包括似是而非的可否认性

> ID：12375896
> 
> 赞同：11
> 
> 时间：2012-09-11T18:38:51.573
> 
> 标签：javascript

是否有任何加密的 javascript 实现，包括似是而非的否认？

我想要展示这里描述的功能的东西：[http ://en.wikipedia.org/wiki/Deniable_encryption](http://en.wikipedia.org/wiki/Deniable_encryption)

可拒绝加密允许加密消息的发送者拒绝发送该消息。这需要一个受信任的第三方。一个可能的情况是这样的：

1.  爱丽丝是鲍勃的妻子，鲍勃怀疑他的妻子通奸。她想和她的秘密情人卡尔交流。她创造了两把钥匙，一把用于保密，另一把用于牺牲。她将密钥（或两者）传递给卡尔。
2.  爱丽丝为卡尔构建了一条无害的消息 M1（打算在被发现时向鲍勃透露）和一封给卡尔的有罪情书 M2。她从消息 M1、M2 中构造了一个密文 C，并将其通过电子邮件发送给 Carl。
3.  Carl 使用他的密钥来解密 M2（也可能是 M1，以读取假消息）。
4.  Bob 发现了发给 Carl 的电子邮件，变得可疑并强迫 Alice 解密该消息。
5.  Alice 使用牺牲密钥向 Bob 透露无害的消息 M1。由于 Bob 不知道另一个密钥，他必须假设没有其他消息 M2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T18:08:52.800

有很多提供加密原语的 Javascript 库，但我从未听说过任何包含合理否认的库。

您可以实施类似于 TrueCrypt 使用的加密方案。它仅限于 2 组加密数据：诱饵数据和真正的秘密数据。但它的设计非常简单，所以如果你不需要超过 2 组数据 - 去吧。您可以修改它以允许超过 2 组，但它不能是“动态的”。

在[TrueCrypt 文档页面](http://www.truecrypt.org/docs/volume-format-specification#Y360)上有详细说明，但基本原理是加密数据包含每个数据集的固定宽度标头。标头包含有关其数据集的信息。在大多数基本场景中，这将只是整个加密块中数据集开始的偏移量、该数据集的长度以及用于检查标头是否成功解密的一些金丝雀值。当用户提供密码时，系统会尝试解密第一个标头，如果失败则尝试下一个标头，直到成功或没有标头。如果成功，则解密标头中指定的字节。

这个方案是为文件系统加密而设计的，所以在你的系统中使用它会有一个很大的缺陷——当对手强迫你透露诱饵数据的密钥时，他会问为什么它的大小小于整个加密块的大小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-24T00:18:32.753

有趣的问题。[这里](http://crypto.stanford.edu/sjcl/)和[这里](https://code.google.com/p/crypto-js/)都有 Javascript 加密库，但您的用例不需要您在 Javascript 中实现它，您最好使用不同的语言。

为什么？可否认加密是一种安全形式，根据定义，它*需要*隐蔽的安全性，因此使用脚本语言实现它可能不是最好的方法（任何人和每个人都可以看到您的实现细节）。用一种强大的、计算能力强的语言编写它，并将其锁定在某个服务器上。

# android - ListView 和 TextFilter

> ID：12375899
> 
> 赞同：0
> 
> 时间：2012-09-11T18:39:05.300
> 
> 标签：android, listview, filter

查看给定位置的列表时不正确。如何表达我需要这个职位？方法**getItemId(position)**没有帮助！有一些示例代码：

```
lv1 = (ListView) findViewById(R.id.list);
inputSearch = (EditText) findViewById(R.id.inputSearch);
final String listcode[] = getResources().getStringArray(R.array.list);
adapter = new ArrayAdapter<String>(this, R.layout.list_item,
        R.id.product_name, listcode);

lv1.setAdapter(adapter);
lv1.setTextFilterEnabled(true);

lv1.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> a, View v, int position,
            long id) {              

        long line = adapter.getItemId(position);
        Integer itemname = new Integer((int) line);
        Intent intent = new Intent();
        intent.setClass(Main.this, ShowKnot.class);
        Bundle b = new Bundle();
        b.putString("defStrID", itemname.toString());
        b.putString("defStrName", listcode[itemname]);
        intent.putExtras(b);
        startActivity(intent);
    }
});
inputSearch.addTextChangedListener(new TextWatcher() {
@Override
public void onTextChanged(CharSequence cs, int arg1, int arg2,
        int arg3) {         
    Main.this.adapter.getFilter().filter(cs);
}
@Override
public void beforeTextChanged(CharSequence arg0, int arg1,
        int arg2, int arg3) {
    // TODO Auto-generated method stub
}
@Override
public void afterTextChanged(Editable arg0) {
    // TODO Auto-generated method stub
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:50:27.860

代替

```
long line = adapter.getItemId(position); 
```

您可以在方法参数中使用“位置”返回列表项位置编号

```
 public void onItemClick(AdapterView<?> a, View v, int position,
        long id) {    

        a.getItemAtPosition(position); 
```

这里的“int position”参数是列表项的索引。

# string - 检查字符串是否包含单词但仅在特定位置？

> ID：12375901
> 
> 赞同：6
> 
> 时间：2012-09-11T18:39:11.087
> 
> 标签：string, delphi, delphi-xe

如何检查字符串是否包含子字符串，但仅在特定位置？

示例字符串：

> 你**最喜欢**的颜色是什么？我[**最喜欢**的]颜色是蓝色

如果我想检查字符串是否包含特定单词，我通常会这样做：

```
var
  S: string;
begin
  S := 'What is your favorite color? my [favorite] color is blue';
  if (Pos('favorite', S) > 0) then
  begin
    //
  end;
end; 
```

我需要确定字符串中是否存在**favourite**一词，忽略它是否出现在 [ ] 符号内，而上面的代码示例显然没有这样做。

因此，如果我们将代码放入布尔函数中，一些示例结果将如下所示：

> TRUE：你**最喜欢**的颜色是什么？我[**我最喜欢的**]颜色是蓝色
> 
> TRUE：你**最喜欢**的颜色是什么？我的 [ **blah blah** ] 颜色是蓝色
> 
> 错误：你的**blah blah**颜色是什么？我[**最喜欢**的]颜色是蓝色

上面的前两个示例是正确的，因为喜欢在 [ ] 符号之外找到，无论它是否在其中。

第三个样本是错误的，因为即使有 favourite 这个词，它也只出现在 [ ] 符号内 - 我们应该只检查它是否存在于符号之外。

所以我需要一个函数来确定一个词（在这个例子中是最喜欢的）是否出现在一个字符串中，但是忽略这个词是否被 [ ] 符号包围的事实。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T10:54:23.943

我喜欢[`Sertac's idea`](https://stackoverflow.com/questions/12375901/check-if-a-string-contains-a-word-but-only-in-specific-position#comment16624231_12375901)删除用括号括起来的字符串，然后再搜索一个字符串。这是通过搜索整个单词和区分大小写扩展的代码示例：

```
function ContainsWord(const AText, AWord: string; AWholeWord: Boolean = True;
  ACaseSensitive: Boolean = False): Boolean;
var
  S: string;
  BracketEnd: Integer;
  BracketStart: Integer;
  SearchOptions: TStringSearchOptions;
begin
  S := AText;
  BracketEnd := Pos(']', S);
  BracketStart := Pos('[', S);
  while (BracketStart > 0) and (BracketEnd > 0) do
  begin
    Delete(S, BracketStart, BracketEnd - BracketStart + 1);
    BracketEnd := Pos(']', S);
    BracketStart := Pos('[', S);
  end;
  SearchOptions := [soDown];
  if AWholeWord then
    Include(SearchOptions, soWholeWord);
  if ACaseSensitive then
    Include(SearchOptions, soMatchCase);
  Result := Assigned(SearchBuf(PChar(S), StrLen(PChar(S)), 0, 0, AWord,
    SearchOptions));
end; 
```

这是该函数的优化版本，它使用指针字符迭代而不进行字符串操作。与以前的版本相比，这可以处理缺少右括号的字符串的情况，例如`My [favorite color is`. 由于缺少括号，此类字符串在那里被评估为 True。

原则是逐个字符地遍历整个字符串，当你找到左括号时，看看那个括号本身是否有一个右对。如果是，则检查从存储位置到左括号的子字符串是否包含搜索到的单词。如果是，则退出该功能。如果没有，请将存储的位置移动到右括号。如果左括号没有自己的右括号，则从存储的位置到整个字符串的末尾搜索单词并退出函数。

***有关此代码的注释版本，请[点击此链接](https://stackoverflow.com/revisions/12386601/2)***。

```
function ContainsWord(const AText, AWord: string; AWholeWord: Boolean = True;
  ACaseSensitive: Boolean = False): Boolean;
var
  CurrChr: PChar;
  TokenChr: PChar;
  TokenLen: Integer;
  SubstrChr: PChar;
  SubstrLen: Integer;
  SearchOptions: TStringSearchOptions;
begin
  Result := False;
  if (Length(AText) = 0) or (Length(AWord) = 0) then
    Exit;
  SearchOptions := [soDown];
  if AWholeWord then
    Include(SearchOptions, soWholeWord);
  if ACaseSensitive then
    Include(SearchOptions, soMatchCase);
  CurrChr := PChar(AText);
  SubstrChr := CurrChr;
  SubstrLen := 0;
  while CurrChr^ <> #0 do
  begin
    if CurrChr^ = '[' then
    begin
      TokenChr := CurrChr;
      TokenLen := 0;
      while (TokenChr^ <> #0) and (TokenChr^ <> ']') do
      begin
        Inc(TokenChr);
        Inc(TokenLen);
      end;
      if TokenChr^ = #0 then
        SubstrLen := SubstrLen + TokenLen;
      Result := Assigned(SearchBuf(SubstrChr, SubstrLen, 0, 0, AWord,
        SearchOptions));
      if Result or (TokenChr^ = #0) then
        Exit;
      CurrChr := TokenChr;
      SubstrChr := CurrChr;
      SubstrLen := 0;
    end
    else
    begin
      Inc(CurrChr);
      Inc(SubstrLen);
    end;
  end;
  Result := Assigned(SearchBuf(SubstrChr, SubstrLen, 0, 0, AWord,
    SearchOptions));
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T19:31:32.650

在[正则表达式](http://docwiki.embarcadero.com/RADStudio/en/Regular_Expressions)中，您可以使用一种叫做[环视的东西。](http://www.regular-expressions.info/lookaround.html)在你的情况下，你可以用消极的后视来解决它：你想要“最喜欢的”，除非它前面有一个左括号。它可能看起来像这样：

```
(?<!\[[^\[\]]*)favorite 
```

Step by step:`(?<!`是否定的lookbehind前缀，我们正在寻找`\[`可选的后跟没有或更多不是关闭或打开括号的东西：`[^\[\]]*`，用 关闭否定的lookbehind `)`，然后紧随其后`favorite`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T22:06:38.260

我认为您可以将您的问题改写为“找到未被方括号包围的所提供字符串的出现”。如果这描述了您的问题，那么您可以继续使用简单的正则表达式，例如`[^\[]favorite[^\]]`.

# ruby - 我可以在 ruby 中捕获 control-q 和 control-s 吗？

> ID：12375905
> 
> 赞同：2
> 
> 时间：2012-09-11T18:39:17.580
> 
> 标签：ruby, signals

对于某些信号，例如 SIGINT，我可以很容易地设置一个陷阱来处理信号并继续执行我认为合适的。我想将 ^q 和 ^s 的典型行为添加到我正在摆弄的 ruby​​ 命令行应用程序中。有没有办法做到这一点 - 特别是便携的，所以我可以在 Windows、iOS、Linux 和 Solaris 中使用它？

编辑：

事实证明，信号永远不会传递给进程。事实上，在进程及其父进程（一个 bash 实例）上运行 strace 表明，进程和父进程都没有得到任何关于正在发生的事情的迹象。他们只是被暂停。

我可能会尝试让一个每秒触发一次的 SIGALARM 处理程序，检查自上次警报以来是否已经过去了超过一秒，如果得出结论该进程已暂停，则进行适当的调用。在负载较重的系统上会出现误报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:05:39.200

在 irb 中输入`Signal.list`。它将列出您应该能够捕获的所有信号。

在 ruby​​ 中捕获信号：

```
Signal.trap("STOP") do
  # handle the signal
end 
```

在终端输入`$ stty -a`. 它应该列出信号及其相关的组合键（如果有的话）。

我相信 ^s 通常是`stop`^q 是`start`.

虽然根据[这个答案](https://stackoverflow.com/a/8513948/1279177)，那些键组合实际上并没有向正在运行的进程发送信号，而是向终端驱动程序发送信号。在这种情况下，`kill -STOP <process>`可以将该信号发送到您的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-18T21:05:25.110

TL;DR 不，您不能捕获它们，因为它们不会产生信号，并且终端下的进程看不到它们，只能启发式地检测它们。但是，如果要能够在终端程序中使用这些键绑定，那么可以，您可以通过禁用终端对它们的特殊处理来做到这一点。

`^q`并且`^s`不会产生信号。这`^z`不是`^s`导致终端信令~~`SIGSTOP`~~（编辑：实际上是`SIGTSTP`）。

什么`^s`是告诉终端不要读取正在写入它的进程的输出。这会导致进程在写入终端时阻塞（它们仍然可以写入其他地方并从标准输入读取，以及执行其他操作）[1]。`^q`告诉终端继续读取和显示进程输出。将终端作为标准输入的进程看不到这些。终端看到键绑定，对其进行操作，并且不会将它们传递给从其终端设备读取的进程。

您可以使用 禁用此特殊行为`stty -ixon`，然后使用 重新启用它`stty ixon`。当我禁用它时，我键入时读取的进程说`^s`是 byte `0x13`，并且`^q`是 byte `0x11`。

[1] 作为展示这一点的实验，您可以打开 2 个终端窗口。`tty`在第二个上执行以找到它的终端设备。然后，在第一个终端上，您可以作为第二个终端`tee $TTY > $OTHER_TTY`的`$OTHER_TTY`终端设备运行。完成此操作后，您可以点击`^s`以阻止对终端的写入，并通过键入一些行来检查这一点。该行将显示在第二个终端中，但不会显示在第一个终端中，此后您输入的任何内容都不会显示在任何一个终端上，直到您点击`^q`。这里发生的情况是，在您点击`^s`并键入一行之后，`tee`仍然可以读取它，并将其输出到我们重定向到第二个终端的 stdout。然后，当它尝试将其写入作为参数传递的第一个文件时，它被阻止，因为它是您阻止的终端`^s`. 它呆在那里等待`write()`返回，直到你击中它才会返回`^q`。

# powershell - Powershell 非位置，可选参数

> ID：12375919
> 
> 赞同：20
> 
> 时间：2012-09-11T18:40:14.697
> 
> 标签：powershell, scripting, arguments

我正在尝试创建一个 powershell (2.0) 脚本，该脚本将接受遵循此基本模式的参数：

```
.\{script name} [options] PATH 
```

其中 options 是任意数量的可选参数 - 考虑详细的“-v”行。PATH 参数将只是最后传入的任何参数，并且是强制性的。可以在没有选项且只有一个参数的情况下调用脚本，并且该参数将被假定为路径。我无法设置仅包含可选参数但也是非位置参数的参数列表。

这个快速脚本演示了我遇到的问题：

```
#param test script
Param(
    $firstArg,
    $secondArg,
    [switch]$thirdArg,
    [Parameter(ValueFromRemainingArguments = $true)]
    $remainingArgs)

write-host "first arg is $firstArg"
write-host "second arg is $secondArg"
write-host "third arg is $thirdArg"
write-host "remaining: $remainingArgs" 
```

当这样调用时：

```
.\param-test.ps1 firstValue secondValue 
```

脚本输出：

```
first arg is firstValue
second arg is secondValue
third arg is False
remaining: 
```

我*试图*创建的行为将使两个参数都落在可选参数中并最终出现在 remainingArgs 变量中。

[这个问题/答案](https://stackoverflow.com/questions/2795582/how-to-specify-a-non-positional-parameter-in-a-powershell-script/2795683)很有帮助地提供了一种实现所需行为的方法，但它似乎只有在至少有一个强制参数时才有效，并且只有当它出现*在*所有其他参数之前。

我可以通过强制 firstArg 并将位置指定为 0 来演示此行为：

```
#param test script
Param(
    [Parameter(Mandatory=$true, Position = 0)]
    $firstArg,
    $secondArg,
    [switch]$thirdArg,
    [Parameter(ValueFromRemainingArguments = $true)]
    $remainingArgs)

    write-host "first arg is $firstArg"
    write-host "second arg is $secondArg"
    write-host "third arg is $thirdArg"
    write-host "remaining: $remainingArgs" 
```

使用与以前相同的输入运行：

```
.\param-test.ps1 firstValue secondValue 
```

输出如下：

```
first arg is firstValue
second arg is
third arg is False
remaining: secondValue 
```

第一个强制参数被赋值，剩下的所有东西都一直掉下去。

问题是：如何设置一个参数列表，使*所有*参数都是可选的，并且它们*都不*是位置的？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-11T20:43:39.657

这个怎么样？

```
function test
{
   param(
      [string] $One,

      [string] $Two,

      [Parameter(Mandatory = $true, Position = 0)]
      [string] $Three
   )

   "One = [$one]  Two = [$two]  Three = [$three]"
} 
```

`One`和`Two`是可选的，只能按名称指定。 `Three`是强制性的，并且可以不提供名称。

这些工作：

```
test 'foo'
    One = []  Two = []  Three = [foo]
test -One 'foo' 'bar'
    One = [foo]  Two = []  Three = [bar]
test 'foo' -Two 'bar'
    One = []  Two = [bar]  Three = [foo] 
```

这将失败：

```
test 'foo' 'bar'
test : A positional parameter cannot be found that accepts argument 'bar'.
At line:1 char:1
+ test 'foo' 'bar'
+ ~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [test], ParameterBindingException
    + FullyQualifiedErrorId : PositionalParameterNotFound,test 
```

这并不*强制*您的强制 arg 放在最后，或者它没有被命名。但它*允许*您想要的基本使用模式。

它也不允许在`$Three`. 这可能是你想要的。但是，如果您想将多个未命名的参数视为 的一部分`$Three`，则添加该`ValueFromRemainingArguments`属性。

```
function test
{
   param(
      [string] $One,

      [string] $Two,

      [Parameter(Mandatory = $true, Position = 0, ValueFromRemainingArguments = $true)]
      [string] $Three
   )

   "One = [$one]  Two = [$two]  Three = [$three]"
} 
```

现在这样的工作：

```
test -one 'foo' 'bar' 'baz'
  One = [foo]  Two = []  Three = [bar baz] 
```

甚至

```
test 'foo' -one 'bar' 'baz'
    One = [bar]  Two = []  Three = [foo baz] 
```

# python - How do I make my post form handling more flexible

> ID：12375923
> 
> 赞同：0
> 
> 时间：2012-09-11T18:40:27.517
> 
> 标签：python, django

I have written what I hope to be a re-usable Django app, but I have a bit of a conundrum on how to make the post form handling flexible. The simplified version of my view code looks like:

```
def do_form(request, entity_id, template_name, success_url):

    form = MyForm(request.POST or None)

    if request.method =='POST':
        if form.is_valid():

            #do some business logic

            return HttpResponseRedirect(finished_url)
    return render_to_response(template_name, 
                              {'form': form},
                             context_instance=RequestContext(request)) 
```

I have followed the advice in James Bennets book "Practical Django Projects" and so you can now configure the template and the success url in the url conf, so for example my url conf could look like this:

```
urlpatterns = patterns('myapp.views',

          url(r'^do/(?P<entity_id>\d+)/$', 
          view = 'do_form',
          name = 'do_form_view',
          kwargs={'template_name':'form.html',
                    'success_url':'/finish/'},),

          url(r'^finish/$', 
          view = 'finish',
          name = 'finish_view')
) 
```

This is all very well and good but when I have come to use this in my real world application I find myself in a situation that this form sits in the middle of some workflow, and I want the success url to be something like `/continue/<workflow_id>/` , and the problem is that you can only have a hardcoded url in the url conf, and the workflow_id will vary every time I hit the do_form code.

Can any one suggest a way to get around this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:09:40.810

您可以通过更改以下内容来实现这一点..

在**views.py**`do_form()`中 更改为**`return HttpResponseRedirect`**

 **```
return HttpResponseRedirect('/continue/%s' %(workflowid)) 
```

在**urls.py**中，您可以拥有

```
url(r'^continue/(?P<workflowid>\d+)/$', 
          view = 'continue',
          name = 'continue_view') 
```

和**views.py**`continue()`中的视图

 **```
def continue(request, workflowid=None):
 ... 
```

这样.. 每当您访问`/continue/`没有数字的 url 时，workflowid 将等于`None`. 每隔一次，当您确实附加了一个 workflowid 时，例如 like `/continue/23/`，那么在您的`continue()`视图中，您可以通过变量访问该 id `workflowid`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:12:35.890

当您将假设的“灵活”success_url 传递给视图时，该视图必须提供所需的标识符。因此，如果您的 URL 和视图不匹配，我们就无法避免两者之间的“违约”。

因此，如果我们要拥有灵活的 URL，就必须强制执行某种约定，如果我们通过 URL 的特殊语法来做到这一点，则不会失去一般性：

```
 'finished_url':  '/finish/<workflow_id>/' 
```

然后，当然，视图必须通过字符串替换来实例化变量以兑现它的契约：而不是

```
 return HttpResponseRedirect(finished_url) 
```

你将会有

```
 return HttpResponseRedirect(finished_url.replace('<workflow_id>', WorkflowID)) 
```

这应该使事情变得相当简单。

重用代码时，您必须记住，这`<workflow_id>`是*应用程序用来调用工作流 id 的任何内容，*这就是为什么我使用复杂的字符串，例如`workflow_id`代替`id`或可能`$1`。

**编辑**：我打算为下一步添加代码（在完成参数中截取工作流 ID），但我看到 keithxm23 击败了我 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:03:47.857

您可以像人们多年来一直“覆盖” Django 基于函数的通用视图一样做到这一点：只需将视图包装在另一个视图中：

```
def custom_do_form(request, entity_id, template_name, success_url):
    template_name = some_method_to_get_template()
    return do_form(request, entity_id, template_name, success_url) 
```****

# c# - AccessViolationException?

> ID：12375924
> 
> 赞同：0
> 
> 时间：2012-09-11T18:40:29.193
> 
> 标签：c#, mysql, access-violation

I'm getting this weird AccessViolationException in my C# program that uses a MySQL database connection. I use values from the database to generate an autocorrect facility for a textbox. Here's the code snippet:

```
private void textBoxName_TextChanged(object sender, EventArgs e)
    {

            AutoCompleteStringCollection asc = Database.getSuggestedNames(textBoxName.Text);
            if (asc != null)
                textBoxName.AutoCompleteCustomSource = asc;                         
    } 
```

The getSuggestedNames(string) method is implemented in Database.cs as follows:

```
public static AutoCompleteStringCollection getSuggestedNames(string namepart)
    {
        string query = "SELECT name FROM worker WHERE name LIKE '%"+namepart+"%';";
        string[] namecolumn = { "name" };
        List<string>[] names = getValues(query,namecolumn);
        AutoCompleteStringCollection namec = new AutoCompleteStringCollection();
        for (int i = 0; i < names[0].Count; i++)
            namec.Add(names[0][i]);
        return namec;
    } 
```

The actual query is done with a separate method in the same file called getValues:

```
private static List<string>[] getValues(string query,string[] columnNames)
    {
        if (connection == null)
            initialize();

        if (connection.State == ConnectionState.Closed)
            connection.Open();

        MySqlCommand cmd = new MySqlCommand(query, connection);
        MySqlDataReader dataReader = cmd.ExecuteReader();
        List<string>[] list = new List<string>[columnNames.Length];

        for (int i = 0; i < columnNames.Length; i++)
            list[i] = new List<string>();

        while (dataReader.Read())
        {
            for(int i=0;i<columnNames.Length;i++)
                list[i].Add(dataReader[columnNames[i]] + "");
        }

        dataReader.Close();
        connection.Close();
        return list;
    } 
```

The exception always occurs when the user enters data into the textbox textBoxName. The error is not very frequent and the call stack shows its the external code that causes the problem. So I assume it should be MySQL that causes the problem.

Can somebody please help me to overcome this problem since there is nothing I can do.

The exact line the error occurs on is line 17 in the following code,which is not much use for me for debugging. Visual Studio does not show any other place. The stack trace shows [external code]. But here it is anyway:

```
1    using System;
2    using System.Collections.Generic;
3    using System.Windows.Forms;
4    
5    namespace LabourManagement
6    {
7        static class ManagementProgram
8        {
9            /// <summary>
10            /// The main entry point for the application.
11            /// </summary>
12            [STAThread]
13            static void Main()
14            {
15                Application.EnableVisualStyles();
16                Application.SetCompatibleTextRenderingDefault(false);
17                Application.Run(new General());
18                         
19            }
20        }
21    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T08:26:54.000

我在处理 DataGridView 自动完成功能时遇到了类似的问题。最后，我发现奇怪的问题'访问冲突读取位置 0x00000000' 是由于 .net 中的一个小半错误，如果您将`null`字符串添加到 AutoCompleteStringCollection 会导致此异常！

因此，当您从诸如数据库之类的源加载自动完成数据时，重要的是确保`null`在向集合中添加数据时避免/跳过项目。

编辑您的代码如下（注意 if 条件：）`if (names[0][i]!=null) ...`：

```
public static AutoCompleteStringCollection getSuggestedNames(string namepart)
{
    string query = "SELECT name FROM worker WHERE name LIKE '%"+namepart+"%';";
    string[] namecolumn = { "name" };
    List<string>[] names = getValues(query,namecolumn);
    AutoCompleteStringCollection namec = new AutoCompleteStringCollection();
    for (int i = 0; i < names[0].Count; i++)
        if (names[0][i]!=null) namec.Add(names[0][i]);
    return namec;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T23:18:24.983

我在 ComboBox 中遇到了同样的问题，我在 SelectedIndexChanged 事件期间编辑了收集的项目。堆栈跟踪将是非托管代码，但编辑 ComboBox.items 集合绝对是罪魁祸首。也许编辑 AutocompleteSource 项目会导致您的问题（因为“建议”模式像 ComboBox 一样工作）。

# ruby-on-rails - Doing efficient mathematical calculations in Redis

> ID：12375926
> 
> 赞同：2
> 
> 时间：2012-09-11T18:40:42.930
> 
> 标签：ruby-on-rails, math, statistics, redis

Looking around the web for information on doing maths in Redis and don't actually find much. I'm using the Redis-RB gem in Rails, and caching lists of results:

```
e = [1738738.0, 2019461.0, 1488842.0, 2272588.0, 1506046.0, 2448701.0, 3554207.0, 1659395.0, ...]
$redis.lpush "analytics:math_test", e 
```

Currently, our lists of numbers max in the thousands to tens of thousands per list per day, with number of lists likely in the thousands per day. (This is not actually that much; however, we're growing, and expect much larger sample sizes very soon.)

For each of these lists, I'd like to be able to run stats. I currently do this in-app

```
def basic_stats(arr)
  return nil if arr.nil? or arr.empty?
  min = arr.min.to_f
  max = arr.max.to_f
  total = arr.inject(:+)
  len = arr.length
  mean = total.to_f / len # to_f so we don't get an integer result
  sorted = arr.sort
  median = len % 2 == 1 ? sorted[len/2] : (sorted[len/2 - 1] + sorted[len/2]).to_f / 2
  sum = arr.inject(0){|accum, i| accum +(i-mean)**2 }
  variance = sum/(arr.length - 1).to_f
  std_dev = Math.sqrt(variance).nan? ? 0 : Math.sqrt(variance)

  {min: min, max: max, mean: mean, median: median, std_dev: std_dev, size: len}
end 
```

and, while I could simply store the stats, I will often have to aggregate lists together to run stats on the aggregated list. Thus, it makes sense to store the raw numbers rather than every possible aggregated set. Because of this, I need the math to be fast, and have been exploring ways to do this. The simplest way is just doing it in-app, with 150k items in a list, this isn't actually too terrible:

```
$redis_analytics.llen "analytics:math_test", 0, -1
=> 156954
Benchmark.measure do
  basic_stats $redis_analytics.lrange("analytics:math_test", 0, -1).map(&:to_f)
end 
=>   2.650000   0.060000   2.710000 (  2.732993) 
```

While I'd rather not push 3 seconds for a single calculation, given that this might be outside of my current use-case by about 10x number of samples, it's not terrible. What if we were working with a sample size of one million or so?

```
$redis_analytics.llen("analytics:math_test")
=> 1063454 
Benchmark.measure do
  basic_stats $redis_analytics.lrange("analytics:math_test", 0, -1).map(&:to_f)
end
=>  21.360000   0.340000  21.700000 ( 21.847734) 
```

## Options

1.  Use the SORT method on the list, then you can instantaneously get min/max/length in Redis. Unfortunately, it seems that you still have to go in-app for things like median, mean, std_dev. Unless we can calculate these in Redis.
2.  Use Lua scripting to do the calculations. (I haven't learned any Lua yet, so can't say I know what this would look like. If it's likely faster, I'd like to know so I can try it.)
3.  Some more efficient way to utilize Ruby, which seems a wee bit unlikely since utilizing what seems like a fairly decent stats gem has analogous results
4.  Use a different database.

## Example using StatsSample gem

Using a gem seems to gain me nothing. In Python, I'd probably write a C module, not sure if many ruby stats gems are in C.

```
require 'statsample'
def basic_stats(stats)
  return nil if stats.nil? or stats.empty?
  arr = stats.to_scale

  {min: arr.min, max: arr.max, mean: arr.mean, median: arr.median, std_dev: arr.sd, size: stats.length}
end

Benchmark.measure do
  basic_stats $redis_analytics.lrange("analytics:math_test", 0, -1).map(&:to_f)
end
=>  20.860000   0.440000  21.300000 ( 21.436437) 
```

## Coda

It's quite possible, of course, that such large stats calculations will simply take a long time and that I should offload them to a queue. However, given that much of this math is actually happening inside Ruby/Rails, rather than in the database, I thought I might have other options.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T19:10:28.707

我想保持这个开放，以防有人有任何意见可以帮助其他人做同样的事情。然而，对我来说，我刚刚意识到我花了太多时间试图强迫 Redis 做一些 SQL 做得很好的事情。如果我简单地将其转储到 Postgres 中，我可以直接在数据库中进行非常有效的聚合和数学运算。我想我只是被困在使用 Redis 的一些东西上，当它开始时，它是一个好主意，但扩展到了一些不好的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T00:02:07.860

如果可以切换到 Redis 2.6，Lua 脚本可能是解决此问题的最佳方法。顺便说一句，测试速度应该非常简单，所以考虑到所需的少量时间投资，我强烈建议尝试 Lua 脚本，看看你得到了什么结果。

您可以做的另一件事是使用 Lua*设置*数据，并确保它还将更新每个列表的相关哈希类型以直接保留最小/最大/平均统计信息，因此您不必每次都计算这些统计信息，因为它们是增量更新的。顺便说一句，并非总是可行，这取决于您的具体用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:12:05.793

我会看看[NArray](http://narray.rubyforge.org/)。从他们的主页：

> 这个扩展库将大型数值数组的快速计算和轻松操作整合到 Ruby 语言中。

看起来他们的[数组类](http://narray.rubyforge.org/SPEC.en)具有您需要内置的大部分功能。该页面上的 Cmd-F“统计”。

# php - Detect image resolution?

> ID：12375930
> 
> 赞同：4
> 
> 时间：2012-09-11T18:40:56.903
> 
> 标签：php, javascript, jquery

I've made some research and couldn't find the answer. Is it possible to detect an image resolution using an upload file field?

Right now, I can detect the size of an image in pixels...But I would need it to find the "inches" size. And I also need to find out the resolution of the image.

Using Javascript would be the best...if possible, if not...PHP maybe?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:45:38.717

提交后，您必须执行此操作。查看 PHP 中的 getimagesize 函数 - [http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:13:02.807

您将需要一个支持该[`FileReader`](https://developer.mozilla.org/en/DOM/FileReader)界面的浏览器 - 在[是否可以在不上传文件的情况下从客户端的文件中获取信息？](https://stackoverflow.com/q/11750542/1048572).

有一些 javascript 库从文件中读取诸如 EXIF 之类的信息：

*   [JsJpegMeta](http://code.google.com/p/jsjpegmeta/)
*   [ImageInfo](http://blog.nihilogic.dk/2008/08/imageinfo-reading-image-metadata-with.html) - 虽然我不确定它是否通过 ajax 从已上传的文件中获取其二进制数据。

如果您想向浏览器不支持此功能的用户提供此功能，您需要上传文件并在服务器端（使用 PHP）进行。

# firefox - 为什么我的安全 ssl 页面会给出错误代码：sec_error_revoked_certificate 即使证书是最新的并且所有链接/样式表/等都是安全的

> ID：12375935
> 
> 赞同：13
> 
> 时间：2012-09-11T18:41:26.393
> 
> 标签：firefox, ssl

我注意到这个问题已经被问过好几次了，但没有一个结果能解决我的问题。

我正在为客户开发一个网站。该网站是[http://www.entirelyintimate.com](http://www.entirelyintimate.com)。这是一个使用 Paypal Pro 进行结帐流程的直销网站。

我们从 Godaddy 购买并安装了 SSL。根据 SSL 检查器网站，链和安装似乎是正确的。

我删除了需要保护的页面上的所有不安全内容 1 个示例 - [https://www.entirelyintimate.com/checkout-complete](https://www.entirelyintimate.com/checkout-complete)

我检查了页面-whynopadlock.com，那里看起来不错。

但是......我仍然收到可怕的错误代码：sec_error_revoked_certificate 我对 SSL 很陌生，所以我可能会忽略一些基本的东西。任何帮助，将不胜感激。

ps 这个社区真的很棒。当我有问题时，我一直潜伏在这里。当我在 Google 搜索结果中看到此网站时，我会自动点击。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T19:30:40.873

`sec_error_revoked_certificate`表示证书已被[吊销](http://en.wikipedia.org/wiki/Revocation_list)。

您的证书可能由您的浏览器信任的 CA 颁发并及时有效，但 CA 可能已将其吊销，您的客户端正在检查吊销（推荐）。

证书吊销是一种机制，可以使证书在其正常到期时间之前失效。客户可以通过 CRL 或 OCSP 检查撤销。

通常，如果私钥已被泄露，如果 CA 认为验证数据毕竟不够，或者可能会自动撤销，则证书会根据与该证书对应的实体（即用户或服务器管理员）的请求而被撤销。 CA 向同一实体颁发另一个证书。

问题的一个可能原因是您可能已经重新加密了您的证书，从而使您的 CA 吊销了旧证书。如果您仍在无意中使用旧的（也许它仍然可用于您的服务器在其密钥库或等效项中），则可能会发生此错误。

[Qualys SSL Labs 的 SSL 检查器](https://www.ssllabs.com/ssltest/)通常是一个更完整的工具，用于检查您的 SSL/TLS 配置。这似乎表明您的证书确实已被吊销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T19:40:18.763

错误原因正如所述：安全证书已被吊销。

您可以[在此处](http://www.digicert.com/help/)输入结帐页面地址进行验证。

恐怕您需要通过 GoDaddy 进行检查。

```
0x4F0DB30A63474B: revoked
    This Update: Sep 11 17:52:23 2012 GMT
    Next Update: Sep 11 23:52:23 2012 GMT
    Reason: cessationOfOperation
    Revocation Time: Sep 10 01:39:38 2012 GMT 
```

# javascript - Javascript new Array 和 join() 方法

> ID：12375940
> 
> 赞同：6
> 
> 时间：2012-09-11T18:41:42.133
> 
> 标签：javascript

受[这个流行演讲](https://www.destroyallsoftware.com/talks/wat)的启发，我想弄清楚一些与创建数组有关的问题。假设我正在创建新数组：

`Array(3)`

在控制台中我得到：

`[undefined, undefined, undefined]`

这很明显。假设我正在加入该数组：

`Array(3).join()`

作为回应，我得到：

`",,"`

这也很容易理解，因为我想这是三个空字符串，用逗号分隔。但是当我想做的时候：

`Array(3).join("lorem")`

我得到的字符串只有两次重复的“lorem”：

`"loremlorem"`

为什么这个词有两个而不是三个重复？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T18:44:03.497

`join`使用作为连接器传递的内容将元素连接在一起。所以你有三个空字符串“围绕” `lorem`s：

```
|lorem|lorem| 
```

如果您不使用空数组，可能会更明显：

```
var arr = [1, 2, 3, 4, 5]; // Like Array(5), except not sparse

arr.join('-and-'); // 1-and-2-and-3-and-4-and-5 
```

顺便说一句，您的第一个示例`join`输出不正确。应该是`,,`或`",,"`。（取决于输出格式。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T18:44:24.310

Join 需要一个分隔符。“lorem”取代了之前的逗号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T18:44:16.697

Join 将数组中的元素与指定的分隔符组合在一起。

因此，由于有 3 个元素，您只需要 2 个分隔符（第 1 和第 2 之间，以及第 2 和第 3 之间）。

```
var a = [1,2,3];
a.join(','); //1,2,3
a.join('test'); // 1test2test3 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T18:52:51.200

查看[加入](http://www.w3schools.com/jsref/jsref_join.asp)文档。

您传递给 join 函数的内容将用作数组元素之间的分隔符。当你用 声明一个数组时`Array(3)`，你正在创建一个包含三个元素的数组。join 方法在这些元素之间插入分隔符，因此您只会看到两个“lorem”。

其实你看到的是：`blank lorem blank lorem blank`. 其中空白是数组的空元素。

尝试执行以下操作：

```
var fruits = ["banana", "orange", "apple"]
fruits.join("lorem") 
```

它会打印

`bananaloremorangeloremapple`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T18:44:17.070

如果您有一个由 3 个成员组成的数组，则是成员*之间*`.join`的填充符，因此应该只有两个连接字符串。

 *因此，您的第二个输出是正确的。

您使用 , 的第一个输出`.join()`似乎是显示错误或测试代码的误传。

的默认值为`.join()`a `","`，因此：

```
new Array(3).join(); 
```

应该给你这个：

```
",," 
```

您显示的输出：

```
[, ,] 
```

将更有可能来自仅`new Array(3)`输入`console`没有`.join()`.*

# c# - 如果未安装 Excel，如何创建 Excel 实例

> ID：12375943
> 
> 赞同：25
> 
> 时间：2012-09-11T18:41:50.770
> 
> 标签：c#, excel, interop, comexception

在我的 C# 应用程序中，借助 Excel Interop dll（作为参考），我正在读取/写入 excel 文件。如果我将此程序移动到未安装 office/excel 的系统（想想干净的机器），我会遇到以下错误。

> System.Runtime.InteropServices.COMException (0x80040154)：检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG） ））。

由于目标机器上没有 excel，因此预计会出现上述错误。
我的问题是，除了在目标机器上注册 Interop dll 之外，还有其他方法可以使用我的程序吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-11T19:03:39.077

> 我的问题是，除了在目标机器上注册 Interop dll 之外，还有其他方法可以使用我的程序吗？

当运行您的程序的计算机上未安装 Excel 时，您询问是否有任何方法可以使用您的程序，该程序使用 Excel 互操作。最简洁的答案是不。更长的答案是肯定的，如果您愿意重构您的程序以不使用互操作。

如果您的目标 Excel 版本是 2007 及更高版本，则可以使用 Microsoft 提供的[OOXml SDK 。](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=5124)如果你愿意花一点钱，你也可以使用[Aspose](https://www.aspose.com/)等第三方库。

可以在[microsoft docs](https://docs.microsoft.com/en-us/office/open-xml/how-to-insert-a-new-worksheet-into-a-spreadsheet)中找到使用 OOXml SDK 将电子表格插入 excel 文件的示例。

```
// Given a document name, inserts a new worksheet.
public static void InsertWorksheet(string docName)
{
    // Open the document for editing.
    using (SpreadsheetDocument spreadSheet = SpreadsheetDocument.Open(docName, true))
    {
        // Add a blank WorksheetPart.
        WorksheetPart newWorksheetPart = spreadSheet.WorkbookPart.AddNewPart<WorksheetPart>();
        newWorksheetPart.Worksheet = new Worksheet(new SheetData());

        Sheets sheets = spreadSheet.WorkbookPart.Workbook.GetFirstChild<Sheets>();
        string relationshipId = spreadSheet.WorkbookPart.GetIdOfPart(newWorksheetPart);

        // Get a unique ID for the new worksheet.
        uint sheetId = 1;
        if (sheets.Elements<Sheet>().Count() > 0)
        {
            sheetId = sheets.Elements<Sheet>().Select(s => s.SheetId.Value).Max() + 1;
        }

        // Give the new worksheet a name.
        string sheetName = "Sheet" + sheetId;

        // Append the new worksheet and associate it with the workbook.
        Sheet sheet = new Sheet() { Id = relationshipId, SheetId = sheetId, Name = sheetName };
        sheets.Append(sheet);
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-11T18:52:56.330

甚至[Microsoft 也不建议在服务器上使用 Interop 库](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)。所以最好找一些替代框架来为你做 Excel。我过去曾为此成功使用[过 Npoi](http://npoi.codeplex.com/)。

我知道这不是您的例外的答案。但老实说，Interop 是通往无穷无尽的麻烦和神秘的异常消息的途径。

**2017 年更新**：我已经有一段时间没有使用 NPOI 并将我的所有项目移动到[EPPlus insted](http://epplus.codeplex.com/) - 基于 OpenXML 的库，可以为您创建现代 xlsx 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:44:59.860

您可以使用 RegSrv32 注册您的 COM

链接：http: [//msdn.microsoft.com/en-us/library/ms859484.aspx](http://msdn.microsoft.com/en-us/library/ms859484.aspx)

您有义务在使用之前注册您的 COM

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:45:31.170

根据我前一段时间需要与服务器上的 Excel 文件交互时所做的所有研究，您必须安装 Office。

# php - how to count filled rows with specific row name - my sql

> ID：12375945
> 
> 赞同：-3
> 
> 时间：2012-09-11T18:41:54.500
> 
> 标签：php, mysql, sql, database

What I want to do is count all my filled rows of specific row name I select, let me give you an example:

Its like I have a table with 6 columns; the very first column is email - and the rest column are slot1, slot2, slot3, slot4, slot5.

Now what I want to have is a function that - when I select a specific email address - it returns how many slots are filled under that email address - just like when we use this command:

```
$t = select * from tabnlename where email=something 
mysql_fetch_array($t)
echo $t['slot1'] . $t['slot1'] and on and on ... 
```

I want a function that counts how many slots are filled where `email = mychoiceemail`.

Let me give you some more details take a look at my sql table

```
supemail           slot1          slot2         slot3           slot4         slot5
opera@gmail.com   somedata       somedata       somedata        somedata       somedata
kaku@gmail.com     somedata                    somedata         somedata
nashu@gmail.com                  somedata 
```

now what i want is when i select opera@gmail.com the function should return 5 as it has all 5 columns filled ! when i select kaku@gmail.com it should return 3 as it has 3 slots filled and when i select nashu@gmail.com it should return 1 only as it has only 1 slot filled !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:47:23.587

看看[mysqli_query](http://www.php.net/manual/en/mysqli.query.php)，那里有很多例子。

您的查询可能类似于：

```
select Count(*)
from MyTable
where email = $something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:49:45.653

[http://php.net/manual/en/function.mysql-num-rows.php](http://php.net/manual/en/function.mysql-num-rows.php)

```
<?php

$link = mysql_connect("localhost", "mysql_user", "mysql_password");
mysql_select_db("database", $link);

$result = mysql_query("SELECT * FROM table1 where email='stuff@email.com'", $link);
$num_rows = mysql_num_rows($result);

echo "$num_rows Rows\n";

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:20:55.917

如果我理解得很好，也许你会寻找类似 sql 的东西，然后试试下面的代码

```
 if ($t['slot1'] == "" ) {$s1 = $t['slot1'] ;}
           else {$s1notnull =$t['slot1'] ; }
        if ($t['slot2'] == "" ) {$s2 = $t['slot2'] ;}
           else {$s2notnull =$t['slot2'] ; }
        if ($t['slot3'] == "" ) {$s3 = $t['slot3'] ;}
           else {$s3notnull =$t['slot3'] ; }
        if ($t['slot4'] == "" ) {$s4 = $t['slot4'] ;}
           else {$s4notnull =$t['slot4'] ; }
        if ($t['slot5'] == "" ) {$s5 = $t['slot5'] ;}
           else {$s5notnull =$t['slot5'] ; }

        $array_empty = array($s1, $s2, $s3, $s4, $s5);
      $how_is_empty = count($array_empty); 
```

希望它有助于编辑。

```
 select email,slot1 as s1, slot2 as s2, slot3 as s3, slot4 as s4, slot5 as s5, (count(s1+s2+s3+s4+s5)) from tabnlename where email=something 
```

# ios - Tinting UIImage to a different color, OR, generating UIImage from vector

> ID：12375946
> 
> 赞同：1
> 
> 时间：2012-09-11T18:41:56.010
> 
> 标签：ios, uiimage, vector-graphics

I have a circle with a black outline, and a white fill that I need to programmatically make the white into another color (via a UIColor). I've tried a handful of other stackoverflow solutions but none of them seem to work correctly, either filling just the outside or an outline.

I have two ways I could do this but I am unsure of how I would get the right results:

Tint just the white color to whatever the UIColor should be,

or,

Make a UIImage from two circles, one being filled and one overlapping that with black.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:45:50.557

如果您决定使用两个圆圈，一个白色和一个黑色，那么您可能会发现这很有帮助。此方法将为您着色一个 uiimage，但它解决了仅着色不透明部分的问题，这意味着如果您提供一个在圆圈周围具有透明度的 png，它只会对圆圈着色。因此，它不会填充图像的整个 24x24 帧，而是只填充不透明的部分。这不完全是您的问题，但如果您使用列出的第二个选项，您可能会遇到这个问题。

```
-(UIImage*)colorAnImage:(UIColor*)color :(UIImage*)image{

CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);
UIGraphicsBeginImageContextWithOptions(rect.size, NO, image.scale);
CGContextRef c = UIGraphicsGetCurrentContext();
[image drawInRect:rect];
CGContextSetFillColorWithColor(c, [color CGColor]);
CGContextSetBlendMode(c, kCGBlendModeSourceAtop);
CGContextFillRect(c, rect);
UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return result; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:02:40.873

对于这样简单的形状，只需使用 CoreGraphics 绘制一个正方形和一个圆形——在您的实现中添加设置填充颜色的功能。

如果它只是黑色和白色 - 当您知道颜色表示时，将白色更改为另一种颜色并不是那么困难。不幸的是，这编写和执行起来更复杂，所以……我的建议是直接去 CoreGraphics 完成你概述的简单任务（糟糕的双关语，抱歉）。

这是一个快速演示：

```
static void InsetRect(CGRect* const pRect, const CGFloat pAmount) {
    const CGFloat halfAmount = pAmount * 0.5f;
    *pRect = CGRectMake(pRect->origin.x + halfAmount, pRect->origin.y + halfAmount, pRect->size.width - pAmount, pRect->size.height - pAmount);
}

static void DrawBorderedCircleWithWidthInContext(const CGRect pRect, const CGFloat pWidth, CGContextRef pContext) {
    CGContextSetLineWidth(pContext, pWidth);
    CGContextSetShouldAntialias(pContext, true);
    CGRect r = pRect;
    /* draw circle's border */
    CGContextSetRGBStrokeColor(pContext, 0.8f, 0.7f, 0, 1);
    InsetRect(&r, pWidth);
    CGContextStrokeEllipseInRect(pContext, r);
    /* draw circle's fill */
    CGContextSetRGBFillColor(pContext, 0, 0, 0.3f, 1);
    InsetRect(&r, pWidth);
    CGContextFillEllipseInRect(pContext, r);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T19:14:27.390

扩展一个 UIView 并只实现 drawRect 方法。例如，这将绘制一个带有黑色轮廓的绿色圆圈。

```
 - (void)drawRect:(CGRect)rect {

          [super drawRect:rect];

          CGContextRef gc = UIGraphicsGetCurrentContext();

          [[UIColor greenColor] setFill];
          CGContextFillEllipseInRect(gc, CGRectMake(0,0,24,24));

          [[UIColor blackColor] set];
          CGContextStrokeEllipseInRect(gc, CGRectMake(0,0,24,24));
    } 
```

# maven - Maven 3 - 在 .jar 中分发自定义插件？

> ID：12375952
> 
> 赞同：6
> 
> 时间：2012-09-11T18:42:14.097
> 
> 标签：maven, maven-3

在此处完成 Maven newb，因此请原谅任何滥用的术语等。

我在 Maven 3 中构建了一个自定义插件（一个定义 git rebase 目标的插件）。我能够：

```
mvn install 
```

没问题。然后我可以从命令行调用目标：

```
mvn edu.clemson.cs.rsrg:git-plugin:rebase 
```

一切都是金色的。我的目录中有这个可爱的 git-plugin-XXX.jar 文件`target`。

我想让我的自定义目标可用于另一个项目，这样当开发团队的其他成员拉下该项目的源代码时，他们可以免费获得我的插件（或至少在`mvn build`.

我的理解是，纯粹的解决方案是为该组设置一个 Maven 存储库并在那里加载我的插件，但这对于单个 hacky 插件来说似乎有点过分了。

想法？

* * *

到目前为止，我已经通过三个不同的插件玩过它：

*   `addjars-maven-plugin:add-jars`

    ```
    <插件>
       <groupId>com.googlecode.addjars-maven-plugin</groupId>
       <artifactId>addjars-maven-plugin</artifactId>
       <版本>1.0.4</版本>
       <执行>
          <执行>
             <目标>
                <goal>添加罐子</goal>
             </目标>
             <配置>
                <资源>
                   <资源>
                      <directory>${basedir}/plugins</directory>
                   </资源>
                </资源>
             </配置>
          </执行>
       </执行>
    </插件>

    ```

在以下期间给我这个错误`mvn build`：

`[ERROR] Error resolving version for plugin 'edu.clemson.cs.rsrg:git-plugin' from the repositories [local (/home/hamptos/.m2/repository), central (http://repo.maven.apache.org/maven2)]: Plugin not found in any plugin repository`

这也导致我后来的格式化插件失败。（很明显，它已经读取了 jar 并确定了组名/插件名，但随后它会在我的本地仓库中查找它？当然它不存在——我正在尝试安装它。）

*   `build-helper:attach-artifacts`

    ```
    <插件>
       <groupId>org.codehaus.mojo</groupId>
       <artifactId>build-helper-maven-plugin</artifactId>
       <版本>1.7</版本>
       <执行>
          <执行>
             <id>附加工件</id>
             <阶段>安装</阶段>
             <目标>
                <goal>附加工件</goal>
             </目标>
             <配置>
                <神器>
                   <神器>
                      <file>${basedir}/plugins/git-plugin-0.1.0a.jar</file>
                      <type>罐子</type>
                   </神器>
                </神器>
             </配置>
          </执行>
       </执行>
    </插件>

    ```

在以下期间给我这个错误`mvn build`：

`[ERROR] Failed to execute goal org.codehaus.mojo:build-helper-maven-plugin:1.7:attach-artifact (attach-artifacts) on project RESOLVE: Execution attach-artifacts of goal org.codehaus.mojo:build-helper-maven-plugin:1.7:attach-artifact failed: For artifact {edu.clemson.cs.rsrg:RESOLVE:12.09.01a:jar}: An attached artifact must have a different ID than its corresponding main artifact.`

（解决：12.09.01a 是主项目。显然这里出了点问题，因为插件和主项目肯定有不同的 artifactID。试图将项目附加到自身之上？）

*   `maven-install-plugin:install-file`

    ```
    <插件>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-install-plugin</artifactId>
       <版本>2.3.1</版本>
       <执行>
          <执行>
             <id>安装-git-plugin</id>
             <phase>初始化</phase>
             <目标>
                <goal>安装文件</goal>
             </目标>
             <配置>
                <file>${basedir}/plugins/git-plugin-0.1.0a.jar</file>
                <包装>罐子</包装>
                <groupId>edu.clemson.cs.rsrg</groupId>
                <artifactId>git-plugin</artifactId>
                <版本>0.1.0a</版本>
             </配置>
          </执行>
       </执行>
    </插件>

    ```

似乎工作正常，直到我尝试调用其中一个目标`mvn edu.clemson.cs.rsrg:git-plugin:rebase`，此时它给了我这个错误：

`[ERROR] Failed to execute goal edu.clemson.cs.rsrg:git-plugin:0.1.0a:rebase (default-cli) on project RESOLVE: Execution default-cli of goal edu.clemson.cs.rsrg:git-plugin:0.1.0a:rebase failed: Unable to load the mojo 'rebase' (or one of its required components) from the plugin 'edu.clemson.cs.rsrg:git-plugin:0.1.0a': com.google.inject.ProvisionException: Guice provision errors: [ERROR] [ERROR] 1) Error in ComponentFactory:ant-mojo [ERROR] at ClassRealm[plugin>edu.clemson.cs.rsrg:git-plugin:0.1.0a, parent: sun.misc.Launcher$AppClassLoader@e776f7] [ERROR] while locating org.apache.maven.plugin.Mojo annotated with @com.google.inject.name.Named(value=edu.clemson.cs.rsrg:git-plugin:0.1.0a:rebase)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:43:57.470

你可能认为它是 hacky，但它是 maven 方式。它需要部署到 Maven 存储库。

如果您将其保存在您可以明确拥有的 groupId 中并且它是开源的，您可以[将其发布到中央](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)

# java - 将 JasperReports 与 Spring 集成

> ID：12375953
> 
> 赞同：1
> 
> 时间：2012-09-11T18:42:16.553
> 
> 标签：java, spring, jasper-reports

如您所知，当使用集成*JasperReports*视图和*Spring*时，您的 xml 文件中的报告数据键只需一个键，我将在下面演示。但是，如果我有多个键怎么办，事实上我无法确定我的地图中的对象数量。

我该如何解决这个问题？

这是我的 jasper-views.xml

```
<bean id = "toPdf"
class = "org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView"
p:url= "classpath:src/newpackage/tcoReport.jasper"
p:reportDataKey="dSource"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:09:35.243

我建议实施您自己的 PdfView。

我将演示它：

```
public class JasperPdfView extends AbstractView {

public JasperPdfView(){
    setContentType("application/pdf");
}

@Override
protected void renderMergedOutputModel(Map<String, Object> model, HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    final JasperPrint print = (JasperPrint)model.get("jasper_print");
    JasperExportManager.exportReportToPdfStream(print, response.getOutputStream());
} 
```

}

我有一个服务可以创建我将传递给视图的 JasperReport 对象。

```
@Override
public JasperPrint generate(ReportContext ctx) throws SQLException {
        Resource res = resourceLoader.getResource(ctx.getFile());
        JasperReport report = JasperCompileManager.compileReport(res.getInputStream());

        HashMap<String, Object> map = Maps.newHashMap();
        map.putAll(ctx.getParams());
        map.put("from", ctx.getFrom().toDate());
        map.put("to", ctx.getTo().toDate());
        JasperPrint print = JasperFillManager.fillReport(report, map, dataSource.getConnection());
        return print;
} 
```

我的控制器生成调用服务并将 JasperReport 放在模型上。

```
@RequestMapping(value = "/{reportName}")
public void printReport(@PathVariable final String reportName, final ParameterForm form, final ModelMap model)
        throws SQLException {
    final ReportContext ctx = reports.get(reportName).build();
    ctx.setFrom(form.getFrom());
    ctx.setTo(form.getTo());
    ctx.getParams().put("customerId",form.getCustomerId());
    model.put("jasper_print", reportService.generate(ctx));
} 
```

JapserPdfView 是通过 ContentNegotiatingViewResolver 确定的。

# php - 使用聚合函数进行行计数

> ID：12375956
> 
> 赞同：0
> 
> 时间：2012-09-11T18:42:31.467
> 
> 标签：php, mysql

我在计算所有行时遇到问题。我的查询是：

```
SELECT info.pid, Name, Addr, Phone, GROUP_CONCAT(URL) as URL
FROM info, images WHERE info.pid = images.pid AND place='$kraj' GROUP BY info.pid 
```

即使没有结果，我也不能使用`mysql_num_rows`因为创建了一行（空值）。`group_concat()`

我尝试放入`COUNT()`查询：

```
...GROUP_CONCAT(URL) as URL, COUNT(info.pid) as num FROM info... 
```

但它为每个连接计算单独的行。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:48:31.790

为什么不过滤掉空值呢？：

```
SELECT info.pid, Name, Addr, Phone, GROUP_CONCAT(URL) as URL
  FROM info
  JOIN images
    ON info.pid = images.pid
 WHERE place = ...
   AND URL IS NOT NULL
 GROUP
    BY info.pid
; 
```

# actionscript-3 - Flash（Actionscript 3）：从 1 个 NetStream 播放 2 个视频？

> ID：12375958
> 
> 赞同：1
> 
> 时间：2012-09-11T18:42:34.410
> 
> 标签：actionscript-3, flash, video, rtmp, amazon-cloudfront

我正在使用 Amazon CloudFront RTMP 源流式传输视频

```
video.attachNetStream(myNetStream);
myNetStream.play(myVideoFileName,0,-1); 
```

它运行良好。现在，我想做的是这样的：

```
video1.attachNetStream(myNetStream);
video2.attachNetStream(myNetStream);
myNetStream.play(myVideoFileName,0,-1); 
```

这不像所写的那样工作，因为出于某种未知原因，一次只能播放两个视频中的一个。我希望 video1 和 video2 从单个 NetStream 播放相同的视频（以节省带宽）并保持完全同步。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:47:45.293

由于安全限制，bitmapData 根本无法访问。我将使用正在播放 2 个网络流的计划 B，但通过删除其音频来减小视频的文件大小。我必须等到亚马逊允许安全策略访问才能使用 bitmapData 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:14:25.423

如果您正在直接播放 FLV 文件（而不是从 FMS 流式传输），您应该能够：

1.  加载文件`URLStream`
2.  等待足够的数据开始将数据复制到`ByteArray`对象
3.  根据需要创建尽可能多的`NetStream`对象并使用该`appendBytes(bytes)`方法

我还没有实际测试过，`appendBytes()`需要看逻辑，但理论上应该可以。

此外，它值得一个基准。但这可能比以与视频相同的速率重新绘制位图副本并保持两个视频同步要好。

# winforms - Windows 窗体 Combobox.Items.Clear() 留下空槽

> ID：12375962
> 
> 赞同：1
> 
> 时间：2012-09-11T18:42:47.560
> 
> 标签：winforms, combobox, items

我正在使用具有多个组合框的 Windows 窗体。根据在第一个组合框中选择的内容确定将哪些项目填充到第二个组合框中。我遇到的问题是如果我在 ComboBox1 中选择 ChoiceA，ComboBox2 是 clear()ed，然后填充有 ChoiceX、ChoiceY 和 ChoiceZ。然后我在 ComboBox1 中选择 ChoiceB，ComboBox2 是 clear()ed，但是没有选项可以添加到 ComboBox2，所以它应该保持为空。问题是，在选择ChoiceB 后，ComboBox2 中有一个带有三个空槽的大白框。所以，基本上，无论多少项目被清除N，这就是选择ChoiceB后出现的空槽数。

这可能有点令人困惑，我希望我解释得足够好。

- 编辑添加代码，希望它有助于清除问题。顺便说一句，mainItemInfo 是另一个“viewmodel”类型的类。它与表单交互以进行更新。

```
private void cmbType_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownItem item = (DropDownItem)cmbType.SelectedItem;
        if (!String.IsNullOrWhiteSpace(item.Text))
        {
            cmbBrand.Enabled = true;
            btnAddBrand.Enabled = true;

            mainItemInfo.FillBrands(new Dictionary<string, string> { { "Type", item.Text } });
            mainItemInfo.SyncBrands(this);
        }
    }

public void FillBrands(Dictionary<string, string> columnsWhere)
    {
        // Clear list
        Brands.Clear();
        // Get data
        StorageData storage = new StorageData(File.ReadAllLines(ItemsFilePath));
        // Fill Brands
        foreach (string type in storage.GetDistinctWhere(columnsWhere, "Brand"))
        {
            Brands.Add(type, new DropDownItem(type, type));
        }
    }

public void SyncBrands(IPopupItemInfo form)
    {
        form.ClearcmbBrand();
        var brands = from brand in Brands.Keys
                     orderby Brands[brand].Text ascending
                     select brand;
        foreach (var brand in brands)
        {
            form.AddTocmbBrand(Brands[brand]);
        }
    }

public void AddTocmbBrand(DropDownItem brand)
    {
        cmbBrand.Items.Add(brand);
    }

    public void ClearcmbBrand()
    {
        cmbBrand.Items.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-03T13:40:04.830

简单地说，您可以添加一个项目，然后再次清除组合框：

```
 cmbBrand.Items.Clear();
   cmbBrand.Items.Add(DBNull.Value);
   cmbBrand.Items.Clear(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:20:31.207

您应该能够将 listbox2 的数据源设置为 null 以清除它，然后使用新数据再次设置它。

因此，在伪代码中，类似于：

```
ItemSelectedInListBox1()
{
    List futureListbox2Items = LoadOptionsBaseOnSelectedItem(item)

    Listbox2.Datasource = null
    Listbox2.Datasource = futureListBox2Items
} 
```

这应该刷新 Listbox2 中显示的项目列表，没有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T14:24:07.633

我能够修复额外的空间。我将 Add 和 Clear 方法更改为：

```
public void AddTocmbModel(DropDownItem model)
    {
        cmbModel.Items.Add(model);
        cmbModel.DropDownHeight = cmbModel.ItemHeight * (cmbModel.Items.Count + 1);
    }

    public void ClearcmbModel()
    {
        cmbModel.Items.Clear();
        cmbModel.DropDownHeight = cmbModel.ItemHeight;
    } 
```

# java - 查找并检查编辑文本中的最后 4 个字符

> ID：12375965
> 
> 赞同：0
> 
> 时间：2012-09-11T18:42:56.897
> 
> 标签：java, android, android-edittext

我正在改进我的应用程序。我想知道是否有一种方法可以根据字符串检查编辑文本中的最后 4 个字符？

我希望这样做以确保输入的文件具有正确的扩展名。

谢谢，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T18:49:28.617

使用 endsWith 方法，例如

```
if (s.endsWith(".jpg")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:44:03.700

细绳。[subString](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#substring%28int,%20int%29) (begin, end) 函数返回子字符串。

您可以对该子字符串执行 equals 操作。

例子：

```
String last4Chars = text.subString(text.length()-4, text.length()); 

    if(last4Chars.equals(otherString))
    {
     //Last 4 characters are same.
     } 
```

注意：在进行上述操作之前，请确保 String 不为空 && 字符串长度大于 4，否则可能会出现异常。

# android - Andengine与三星spen sdk

> ID：12375970
> 
> 赞同：2
> 
> 时间：2012-09-11T18:43:13.323
> 
> 标签：android, andengine, galaxy, samsung-mobile-sdk

我正在使用andengine 开发一个基于opengl renderSurfaceView 的游戏。我想在游戏中添加SPen函数。所以我的方法是使用mSPenEventLibrary并将renderSurfaceView作为参数传递给它的onTouchListner。

mSPenEventLibrary.setSPenTouchListener(mRenderSurfaceView, new SPenTouchListener() ..

现在的问题是运动事件调用了 spenEventLibrary touchlistner 而不是 andengines onTouchListners。我想同时调用它们。我怎么解决这个问题

是否有另一种方法可以将 andengine 与 spen sdk 一起使用？

谢谢！

# java - 自定义 JPanel 对象在添加到 JFrame 时重叠

> ID：12375973
> 
> 赞同：2
> 
> 时间：2012-09-11T18:43:24.147
> 
> 标签：java, user-interface

我正在尝试创建一个自定义计时器，该计时器将记录以天为单位的累积时间流逝。我有一个自定义的 JPanel，它可以为我完成所有的计时器工作。我想与这个 JPanel 有一个 GUI 交互，代表 7 次。但是，当我向 JPanel 或 JFrame 添加多个自定义 JPanel 时，它们不会出现。我已经尝试设置布局并将它们设置为我能想到的所有内容，但没有任何效果。

这是面板的基本设置：

```
public class TimerPane extends JPanel{
    private static JButton button = new JButton("Start");
    private static JLabel label = new JLabel("Time elapsed:");
    private static JLabel tLabel = new JLabel("0:0:0");
    private static JLabel title = new JLabel("Timer");

    public TimerPane(){
        button.addActionListener(new ButtonListener());

        this.add(title);
        this.add(label);
        this.add(tLabel);
        this.add(button);
        this.setOpaque(false);

        this.setPreferredSize(new Dimension(100,100));
        this.setMaximumSize(new Dimension(100,100));
    }
} 
```

这是我最近一次尝试让 JPanel 显示多次（这里只有两次）：

```
public static void main(String[] args){
    JFrame frame = new JFrame("Timer");
    JPanel panel = new JPanel();
    frame.setPreferredSize(new Dimension(700,110));

    panel.setLayout(new BorderLayout());

    panel.add(new TimerPane(), BorderLayout.EAST);
    panel.add(new TimerPane(), BorderLayout.WEST);

    frame.getContentPane().add(panel);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.pack();
    frame.setVisible(true);
} 
```

在此之后执行的 GUI 是 700x110，其中只有最左侧的 100x100 正好用于我的 TimerPane 面板之一。我也在相同的代码上尝试了 GridLayout，但是只有第二个“点”中的 TimerPane 出现。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:52:02.330

首先，请从`static`成员变量中删除：`button`、`label`和。否则，拥有它们，这意味着它们由所有实例共享。您现在将看到 2 个计时器面板。`tLabel``title``static``TimerPane`

接下来，您可以将 更改`BorderLayout`为一个`FlowLayout`实例并添加多个`TimerPane`.

```
panel.setLayout(new FlowLayout(FlowLayout.LEFT));

panel.add(new TimerPane());
panel.add(new TimerPane()); 
```

# javascript - noty.js 返回未定义

> ID：12375976
> 
> 赞同：3
> 
> 时间：2012-09-11T18:43:38.887
> 
> 标签：javascript, jquery

我刚刚开始使用[noty.js](http://needim.github.com/noty/)，但是每当我尝试在“创建 noty”下执行超级基本示例时，我都会不断收到错误消息：

```
Uncaught TypeError: Property 'noty' of object function (a,b){return new e.fn.init(a,b,h)} is not a function 
```

（[jsfiddle](http://jsfiddle.net/svfZa/4/)）

这是noty的问题，还是我的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:53:28.280

最简单的例子是

```
noty({text: 'noty - a jquery notification library!'}); 
```

而不是你的

```
$.noty({text: 'noty - a jquery notification library!'}); 
```

# .net - AvalonEdit 中的 VisualLineElementGenerator 跳过选项卡？

> ID：12375977
> 
> 赞同：1
> 
> 时间：2012-09-11T18:43:43.867
> 
> 标签：.net, wpf, avalonedit

我正在使用 Avalon Edit 编写文本编辑器。

我想将文本中插入的选项卡替换为不可选择。例如，假设我有以下行：

(tab)(tab)(tab)“你好！”

我希望 carret 跳过前三个选项卡并将其自身定位在字符开始之前。

是否可以使用 VisualLineElementGenerator 来实现这样的效果，以便用某种隐藏/不可选择的字符替换选项卡？

换句话说，我希望能够在不选择缩进的情况下缩进我的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T14:38:37.647

目前这是不可能的；所有 VisualLineElements 都是可选的。

AvalonEdit 具有不可选择的“段落缩进”的概念，但这并未在任何公共 API 中公开（它用于自动换行缩进）。

您可以尝试修改该`TextView.BuildVisualLine`方法以支持可自定义的缩进。

# c++ - 保持 cgi 应用程序始终在 c++ 中运行

> ID：12375979
> 
> 赞同：2
> 
> 时间：2012-09-11T18:43:48.560
> 
> 标签：c++, c, apache, cgi

我编写了一个 CGI 应用程序，它由 Apache 服务器运行，等待处理请求。事实是，在收到每个请求后，Apache 运行应用程序，处理请求并相应地回复。它在性能方面有一些缺点，因为通过接收每个请求，它必须加载所有必要的需求和初始化。另一个问题是，在应用程序中，我必须跟踪客户端稍后将发送的 ACK 的一些信息。我怎样才能运行应用程序一次，让它总是等待服务请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:00:40.327

听起来您想[`mod_fastcgi`](http://www.fastcgi.com/mod_fastcgi/docs/mod_fastcgi.html)用于 Apache。从网站：

> 这个第 3 方模块提供对 FastCGI 协议的支持。FastCGI 是一种独立于语言的、可扩展的、开放的 CGI 扩展，可提供高性能和持久性，而不受服务器特定 API 的限制。... FastCGI 应用程序很快，因为它们是持久的。没有每个请求的启动和初始化开销。这使得开发在 CGI 范式中不切实际的应用程序成为可能（例如，巨大的 Perl 脚本，或需要连接到一个或多个数据库的应用程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:06:21.397

如果我正确理解您的问题，您基本上会被有限状态机覆盖。这将允许您具有“等待”状态、“操作”状态等。使用这将允许您提出请求并仅在请求已完成时才采取行动。一个更深入了解的好网站是“http://www.drdobbs.com/cpp/state-machine-design-in-c/184401236”

或者你可以使用承诺。

# php - 使用 foreach 语句遍历数组

> ID：12375983
> 
> 赞同：0
> 
> 时间：2012-09-11T18:44:00.133
> 
> 标签：php, arrays

我有一个数组列表，需要它们用 printf 语句输出

```
<?php
$example = array("first" => "Bob", "last" => "Smith", "address" => "123 Spruce st" );
$example = array("first" => "Sara", "last" => "Blask", "address" => "5678 Maple ct" );

foreach ($example as $key => $val) {
  printf("<p>hello my name is %s %s and i live at %s</p>",$example['first'],$example['last'], $example['address']);
}

?> 
```

以上只是输出最后一个数组，我需要它遍历所有数组并`<p>`使用提供的`key => value`组合生成 a 。这只是一个简化的例子，因为真实世界的代码在输出中会更复杂`html`

我试过

```
foreach ($example as $arr){
printf("<p>hello my name is %s %s and i live at %s</p>",$arr['first'],$arr['last'], $arr['address']);
} 
```

但它只为每个输出一个字符`key => value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:46:44.407

尝试这样的事情：

```
// Declare $example as an array, and add arrays to it
$example = array();
$example[] = array("first" => "Bob", "last" => "Smith", "address" => "123 Spruce st" );
$example[] = array("first" => "Sara", "last" => "Blask", "address" => "5678 Maple ct" );

// Loop over each sub-array
foreach( $example as $val) {
    // Access elements via $val
    printf("<p>hello my name is %s %s and i live at %s</p>",$val['first'],$val['last'], $val['address']);
} 
```

您可以从[这个演示](http://viper-7.com/aKgniZ)中看到它打印：

```
hello my name is Bob Smith and i live at 123 Spruce st
hello my name is Sara Blask and i live at 5678 Maple ct 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:46:54.147

您还需要将 example 声明为数组以获取二维数组，然后附加到它。

```
$example = array();
$example[] = array("first" => "Bob", "last" => "Smith", "address" => "123 Spruce st" ); # appends to array $example
$example[] = array("first" => "Sara", "last" => "Blask", "address" => "5678 Maple ct" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:47:30.437

您正在覆盖`$example`两行。你需要一个多维的“数组数组：”

```
$examples = array();
$examples[] = array("first" ...
$examples[] = array("first" ...

foreach ($examples as $example) {
   foreach ($example as $key => $value) { ... 
```

当然，您也可以`printf`立即执行而不是分配数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T18:48:38.870

您必须制作一个数组数组并循环遍历主数组：

```
<?php

$examples[] = array("first" => "Bob", "last" => "Smith", "address" => "123 Spruce st" );
$examples[] = array("first" => "Sara", "last" => "Blask", "address" => "5678 Maple ct" );

foreach ($examples as $example) {
  printf("<p>hello my name is %s %s and i live at %s</p>",$example['first'],$example['last'], $example['address']);
}

?> 
```

# ios - iOS Document Reviewer，如图像浏览器

> ID：12375984
> 
> 赞同：5
> 
> 时间：2012-09-11T18:44:02.233
> 
> 标签：ios, cocoa-touch, ipad, qlpreviewcontroller

我知道您可以使用 QLPreviewController 来预览文档，但是有没有人有一个整洁的解决方案来启用手势（向右：向左滑动）并保留文档缩放/导航。

有人建议我们可以使用水平 tableview，但最初的实现提出了类似的导航问题。

任何想法或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:57:23.653

[界面视图控制器](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)？听起来很合适。

# jquery-mobile - JQM - 讨论加载动态内容的正确方法

> ID：12375988
> 
> 赞同：0
> 
> 时间：2012-09-11T18:44:05.100
> 
> 标签：jquery-mobile

我想知道下面概述的注入动态内容的过程是否有条不紊地正确。[该方法基于 jQM 的Dynamic Page Generation](http://jquerymobile.com/test/docs/pages/page-dynamic.html)文档中描述的一段稍作修改的代码，该代码取消了明显的声明 ($.mobile.changePage)。

假设页面由 2 个虚拟页面（“pgActLst”和“pgActDet”）组成。虚拟页面“#pgActLst”包含一组锚点，这些锚点通过 PK 指向特定范围内的各种活动；“#pgActDet”详细说明与所选 PK 相关的活动细节。

我的问题涉及 $.mobile.changePage("#pgActDet") 的用法。似乎在我的情况下（锚点），包含此语句变得不必要（实际上会导致无限循环）。请注意，代码会正确刷新内容。下面概述的方法是否合理，或者从长远来看它会咬我吗？据我所知，步骤 S1 在 S2 之前触发。

```
// S1\. Specify the firing event. 
   $("a", "#divActLst").live("click", function (e) {
      .. // Update local storage with selected ActID PK (The PK is retrieved in evt "pagebeforechange").
   })

// S2\. If the target URL points to "pgActDet", retrieve activity details via a web service and 
//    dynamically fill up divActDet.    
   $(document).bind("pagebeforechange", function (e, data) {
      // Check if the target url matches "pgActDet"
      var url = $.mobile.path.parseUrl(data.toPage), reg = /^#pgActDet/;
      if (url.hash.search(reg) == 0) { 
         ..   // Pull PK actID and txt info from local storage.
         GetActDet(actID, txt); // Call up web service and refresh details content.
      };
    )}

 // S3\. Inject html if web service qry GetActDet() is successful.
    function GetActDetOK() {
       .. // Fill up divActDet and bind events.
       //$.mobile.changePage("#pgActDet"); // Seems unecessary. (Is this ok?).   
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:33:32.630

我想，我发现了问题所在。由于某种原因，click 事件触发了两次。为了消除这种烦恼，我通过 die() 重置了处理程序。这可能解释了为什么 $.mobile.changePage("#pgActDet") 是不必要的。

在重写代码时，我使用“pagebeforeshow”事件在详细信息页面中注入动态内容。事件“pagebeforechange”保持不变。代码改编自文章：[jQuery Mobile - Ajax - 动态内容 - 传递参数](http://www.a2zdotnet.com/View.aspx?Id=196#.UFIgzVHCbyL "文章")，用“pagebeforeshow”代替“pageshow”。对于那些感兴趣的人，摘录如下所示。

```
**Html**

<div id="divActLst" data_Items="0">
  ..
  <a href="javascript:void(0);" data_pgid="#pgActDet" data_actid="?actid=111" rel="external"  >
    <span>...</span>
  </a>
  ..                ..
</div>

**Code**

$("a", "#divActLst").die().live("click", function (e) { 
   // Pack relevant info from the clicked link (ie. pgID="#pgActDet", reqActID="?actid=111", actID=111, txt="2012-09-11 08:12...")
   var $this = $(this), o = {};
   o.reqActID = $this.attr("data_actid"); o.actID = o.reqActID.get("=", 1).toInt();
   o.pgID = $this.attr("data_pgid"); o.txt = $this.text().trim();

   $("#divActLst").data("act", o); // Save act info in local storage
   $.mobile.changePage("#pgActDet" + o.reqActID); // Activate page change
   return false;
});

$("#pgActDet").live("pagebeforeshow", function () {
   // Inject dynamic content during this event.    
   var act = $("#divActLst").data("act"); // Get act info from local storage.
   GetActDet(act);
});

function GetActDet(act) {                   
   // Request data via ajax.  If succesful, jump to GetActDetOK.
   var args = '{ActID: ' + act.actID + '}', url = gSvcUrl + "GetDetActivity";
   ..
}

function GetActDetOK(objAct, act) {
   // Format data via template "tplActDet".              
   var cbeg = "//<![" + "CDATA["; var cend = "//]" + "]>"; // Remove CDATA brackets.
   var rslt = tmpl("tplActDet", { dd: objAct }).replace(cbeg, "").replace(cend, "");

   var $divDet = $("#divActDet");
   $divDet.empty().html(rslt).trigger("create");            
   ..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:47:12.307

您可以取消 changePage 语句的原因是您没有阻止 beforepagechange 事件中的默认行为。当事件被触发时，JQM 将运行您的指令并继续其正常行为，即 pagechange。这意味着两件事：如果您发生了一些异步操作（您这样做），它可能不会等待您的操作完成，如果您碰巧执行了 mobile.changePage，它会让您陷入无限循环。处理该问题的正确方法是`e.preventDefault();`在调用 GetActDet 之前添加，并在您检索/生成页面内容后调用 changePage。

# c# - 将实体框架与两个单独的数据库（开发和生产）一起使用

> ID：12375989
> 
> 赞同：3
> 
> 时间：2012-09-11T18:44:06.330
> 
> 标签：c#, asp.net-mvc, entity-framework, web-config, connection-string

因此，我一直在开发使用 Entity Framework 5 的项目一段时间，并决定将代码移至生产环境。

我的问题是这样做的好方法是什么？

我最初的想法是在我的项目中有两个 edmx 文件，然后在我的开发环境中注释掉生产连接字符串，反之亦然。但是，这似乎不可行，因为我不能在连接字符串中有两个具有相同名称的实体模型，从而导致在我的代码中更改模型“上下文”实例，这是没有意义的。

我的另一个想法只是修改开发数据库使用的模型的连接字符串以指向生产数据源（因为它们都具有相同的表结构）。但我不知道我是否会在这里破坏任何东西。

我在这里看过这篇文章，但没有帮助：[Entity framework working with both production and development database](https://stackoverflow.com/questions/6007659/entity-framework-working-with-both-production-and-development-database)

**注意：**我没有使用代码优先模式，而是从数据库生成模型，并且开发和生产数据库都具有同步的数据库结构。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:48:03.117

您可以在 web.config 文件中使用转换来自动切换您引用的数据库。

看看这个类似的答案：[Web.Config Debug/Release](https://stackoverflow.com/questions/5811305/web-config-debug-release)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T18:48:26.443

您的 web.config 中仍然有连接字符串（是的，大而长的实体连接字符串，但它就在那里）。只需确保生产部署中的连接字符串指向生产数据库服务器。我建议使用配置转换：

[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)

# python - 从python中的actionscript读取base64/zlib编码的字符串

> ID：12375991
> 
> 赞同：1
> 
> 时间：2012-09-11T18:44:11.573
> 
> 标签：python, actionscript, base64, zlib

我有一个字符串保存到由 Actionscript 通过 base64 编码然后 zlib 压缩它的数据库。

示例字符串如下：“eNrj4mZkrShgWdHBx1mUmJfNosQIACUhBCI="

如果我通过 Actionscript 解压缩并取消 base64，我会得到我所期望的：

{“xp”：656398，“等级”：34}

但是，我还需要能够读取这个服务器端。现在我正在使用 Python，但我愿意接受一个有效的 PHP 解决方案或类似的解决方案。

到目前为止，在 Python 中我已经尝试过这个：

```
import base64
import zlib

s = 'eNrj4mZkrShgWdHBx1mUmJfNosQIACUhBCI='

print s.decode("base64").decode("zlib") 
```

看起来 Actionscript 在标头中添加了一些额外的位，但我的 Python 不够强大，无法解决这个问题 :) 任何帮助将不胜感激！

编辑：Actionscript 首先获取一个 AS 对象并将其转换为 ByteArray，然后再进行 zlib 压缩并对其进行 base64 处理。看起来这就是生成额外标题/损坏数据信息的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:20:53.783

如果字符串首先是base64-ed然后被压缩，解码它应该是相反的！

您的示例和输出字符串不匹配；

```
In [1]: t = '{"xp": 656398, "rank": 34}'

In [2]: t.encode('base64')
Out[2]: 'eyJ4cCI6IDY1NjM5OCwgInJhbmsiOiAzNH0=\n'

In [3]: t.encode('zlib').encode('base64')
Out[3]: 'eJyrVqooULJSMDM1M7a00FFQKkrMywbyjU1qAVupBsE=\n'

In [4]: t.encode('base64').encode('zlib')
Out[4]: 'x\x9cK\xad\xf42Iv\xf64\xf3t\x894\xf4\xcb\xf25\xf5w.O\xf7\xcc\xf3\xcaH\xca-\xce\xf4\xcft\xac\xf2\xf30\xb0\xe5\x02\x00\xe3E\x0b\xd7' 
```

给定的输入字符串 '{"xp": 656398, "rank": 34}' 不会产生示例输出（参见 Out[3] 和 Out[4]）。

您还应该注意，在这种情况下，`base64`编码字符串比原始字符串长，并且附加*编码*`zlib`最长。压缩这么短的字符串通常不值得开销。

如果我们采用您的示例输出并对其进行处理，这就是我们得到的；

```
In [5]: s = 'eNrj4mZkrShgWdHBx1mUmJfNosQIACUhBCI='

In [6]: s.decode('base64')
Out[6]: 'x\xda\xe3\xe2fd\xad(`Y\xd1\xc1\xc7Y\x94\x98\x97\xcd\xa2\xc4\x08\x00%!\x04"'

In [7]: s.decode('base64').decode('zlib')
Out[7]: '\n\x0b\x01\x05xp\x04\xa8\x88\x0e\trank\x04"\x01' 
```

您可以在输出中清楚地看到文本“xp”和“等级”。接近结尾的'"'可以解释为整数34。

似乎您的动作脚本在编码和压缩数据之前对数据进行了一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:48:50.633

对我来说，您的 Python 脚本似乎以错误的顺序解码。如果你说的编码顺序是正确的，先base64，然后zlib，你必须以相反的顺序解码：

```
print s.decode("zlib").decode("base64") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T18:56:24.957

Tosh，您说您首先对数据进行 base64 编码，然后在将其存储到数据库之前对其进行压缩。到目前为止这很好。压缩后的数据是二进制数据。因此，我假设您已将此数据以二进制格式存储在数据库中。现在你给我们看一个字符串：

> 示例字符串如下：“eNrj4mZkrShgWdHBx1mUmJfNosQIACUhBCI="

根据您的说法，这代表压缩数据。现在，有一个矛盾。一方面压缩数据是二进制数据，另一方面你清楚地向我们展示了一个由 base64 编码产生的字符串（你可以从最后的“=”中推断出来）。

你混淆了一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T19:28:49.390

Flash 可能会破坏这一点，但您应该分享一个来自 Actionscript 的示例，该示例创建并检查此数据。

如果您使用的是第 3 方库，则它可能使用了 Python 预期的替代字符集。

如果您使用的是官方库，Actionscript 似乎以不同的方式实现 UTF8 和 ascii。（这里有不同的方法 - [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/Base64Encoder.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/Base64Encoder.html)）

如果库或您的代码存在问题，则仅查看操作脚本并注意要容易得多，而不是尝试对其进行逆向工程。

我认为它也可能值得尝试反向修复这个错误......

```
import base64
import zlib

flash =  "eNrj4mZkrShgWdHBx1mUmJfNosQIACUhBCI="

original = '{"xp": 656398, "rank": 34}'
encoded = original.encode('zlib').encode('base64')
decoded = encoded.decode('base64').decode('zlib')
print original
print encoded
print decoded 
```

我也可以问你为什么要这样做吗？

1-除非您的数据包更大，否则您不会节省太多带宽。事实上，对小负载进行压缩实际上可以增加大小。

2-假设这是基于网络的，您应该能够让服务器即时执行此操作。

# asp.net-mvc-3 - 如何独立扩展asp.net mvc app和wcf服务

> ID：12375993
> 
> 赞同：0
> 
> 时间：2012-09-11T18:44:12.633
> 
> 标签：asp.net-mvc-3, wcf, iis-7, azure, iis-6

我有 ASP.NET Web 应用程序和 1 个 wcf Web 服务。我想将它们部署到 Azure，以便它们可以独立扩展/扩展。即，我可以将小型 VM 提供给 mvc 应用程序，并将大型 VM 和更多实例提供给 wcf 服务。另一个要求是我需要 https 用于 Web 应用程序。但是，我不想让 https 从 mvc 应用程序到 wcf 服务，这会导致不必要的加密/解密。

我可以将每个应用程序和 wcf 服务部署到 Azure 上的单个托管服务，以便它们可以独立扩展。（因此，如果 3 个应用程序 + 1 个 wcf 服务将在 Azure 上有 4 个托管服务）为了避免 mvc 和 wcf 之间的 https，我尝试使用内部端点。不幸的是，似乎仅在一个主机服务中支持内部端点。

为了避免 mvc 和 wcf 之间的 https，唯一的方法是在一个主机服务中部署 mvc 应用程序和 wcf。但是，您失去了独立扩展的可能性。

总结：

1.  如果每个 mvc 应用程序和 wcf 服务部署到自己的托管服务，我可以实现独立的扩展需求，但是，我无法避免 mvc 应用程序和 wcf 服务之间不必要的加密/解密（https）

2.  如果在一个主机服务中部署应用程序和 wcf 服务。我可以在 app 和 wcf 之间使用内部端点来避免 https 加密/解密。但是，您失去了独立缩放的可能性。

我想知道有没有一种方法可以同时实现。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:15:50.347

您可以按角色独立扩展，而不是按服务。因此，将 WCF 部署为 Service 中的另一个角色应该可以正常工作。但是，如果 WCF 需要具有外部端点或负载平衡（如果 WCF 通过内部端点使用），则您必须考虑端口。

查看 AzureWatch @ [http://www.paraleap.com](http://www.paraleap.com) - 无需任何代码更改，您将在几分钟内独立完成并自动扩展您的两个角色。

高温高压

# web-services - SoapObject 结果返回 anyType{} 作为值

> ID：12375998
> 
> 赞同：2
> 
> 时间：2012-09-11T18:44:39.653
> 
> 标签：web-services, wsdl, android-ksoap2

```
package com.example.gramaniladharidetails;

import java.util.Vector;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.Marshal;
import org.ksoap2.serialization.MarshalFloat;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

  public class GramaNiladhari extends Activity {
private static String SOAP_ACTION1= "http://localhost/getGramaNiladhariData";
private static String NAMESPACE = "http://119.235.4.217/";
private static String METHOD_NAME1 = "getGramaNiladhariData";
private static String URL = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grama_niladhari);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            final String gndLifeCode = prov;
            String LifeCode = "3-2-09-060";
            request.addProperty("gndLifeCode", LifeCode);
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);

            SupportThread st = new SupportThread();
            Log.i("Request", request.toString());
            st.execute(request);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_grama_niladhari, menu);
    return true;
}

private class SupportThread extends
        AsyncTask<SoapObject, Object, SoapObject> {

    @Override
    protected SoapObject doInBackground(SoapObject... req) {
        SoapObject result = null;
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        envelope.setOutputSoapObject(req[0]);
        envelope.addMapping(NAMESPACE, "SerializeInfo",
                new SerializeInfo().getClass());

        Marshal floatMarshal = new MarshalFloat();
        floatMarshal.register(envelope);

        envelope.dotNet = true;

        try {
            envelope.encodingStyle = SoapSerializationEnvelope.XSD;
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            androidHttpTransport.debug = true;

            androidHttpTransport.call(SOAP_ACTION1, envelope);
            SoapObject result = (SoapObject) envelope.getResponse();

            if (envelope.bodyIn instanceof SoapFault) {
                String str = ((SoapFault) envelope.bodyIn).faultstring;
                Log.i("*******", str);

            } else {
                int elementCount = result.getPropertyCount();

                if (elementCount > 0) {
                    String element;

                    for (int i = 0; i < elementCount; i++) {

                        element = result.getProperty(i).toString();
                        Log.d("This is an element", Integer.toString(i)
                                + " --" + element);

                    }
                }

            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return result;
    }

    @Override
    protected void onPostExecute(SoapObject result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        if (result != null) {
            String response_name = result.getName();

            TextView tv = (TextView) findViewById(R.id.textView5);
            tv.setText(result.getProperty(0).toString());
        }

        else {

            Toast.makeText(getApplicationContext(), "No Response",
                    Toast.LENGTH_LONG).show();

        } 
    }
} 
```

}

我正在调用的 web 服务方法重新调整了一个名为 GramaNiladhari 的 complexType 对象。它由 5 种字符串类型组成。当我运行此代码时，我得到以下 SoapObject 结果。

```
anyType{gnName=anyType{}; address=anyType{}; workingDays=anyType{}; gnDivision=anyType{}; contactNumber=anyType{}; } 
```

但是在这里我缺少这些**值**，它们被替换为**anyType{}**。如何检索真实值？

**我已经编辑了我的问题。**

这是在 XML 中解析的请求。

```
 <v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:d="http://www.w3.org/2001/XMLSchema" 
xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" 
xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body>
<getGramaNiladhariData xmlns="http://119.235.4.217/GNService/">
<gndLifeCode i:type="d:string">1-1-21-065</gndLifeCode>
</getGramaNiladhariData></v:Body></v:Envelope> 
```

这是调用 Web 服务后的结果。

```
 <?xml version="1.0" encoding="utf-8"?> <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema"> <soap:Body> <getGramaNiladhariDataResponse xmlns="http://localhost/"> <getGramaNiladhariDataResult><gnName /><address /><workingDays /><gnDivision /><contactNumber /></getGramaNiladhariDataResult></getGramaNiladhariDataResponse></soap:Body></soap:Envelope> 
```

检查请求，似乎请求已顺利通过（即使请求参数 gndLifeCode 具有正确的值， 1-1-21-065 ）。

但响应为空。我需要检索的所有元素都有空标签。

这可能是网络服务中的问题吗？我已经在 SoapUI 中检查了这个 Web 服务，它在那里运行良好（即使它在 SoapClient 中也能运行）。却无法弄清楚这里的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T06:14:08.933

抱歉，我不是 Android 开发人员，所以我无法为您提供确切的答案，但我可以给您一些提示，我的观点出了什么问题

希望你的请求不是很酷，我猜服务器理解

**我认为你的要求是这样的**

```
REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://localhost/">
        <SOAP-ENV:Body>
            <ns1:getGramaNiladhariData/>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

***所以它返回这个***

```
stdClass Object
(
    [getGramaNiladhariDataResult] => stdClass Object
        (
            [gnName] => 
            [address] => 
            [workingDays] => 
            [gnDivision] => 
            [contactNumber] => 
        )

) 
```

**所以你的请求必须是这样的**

```
REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://localhost/">
        <SOAP-ENV:Body>
            <ns1:getGramaNiladhariData>
                <ns1:gndLifeCode>3-2-09-060</ns1:gndLifeCode>
            </ns1:getGramaNiladhariData>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

然后你会得到准确的答案

并确保您的 xmlns 标签，例如 ns1、SOAP-ENV（在我的情况下）这些是相同的，以查看我建议使用soap ui

凉爽的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T06:57:57.387

使用它将输出更改为 xml 格式：

```
httpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
httpTransport.call(SOAP_ACTION, soapEnvelope);
String resultString = httpTransport.responseDump; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T06:12:43.893

进口：

```
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE; 
```

网络服务：

```
/*web service parameters*/
private static final String TAG = SearchResultFragment.class.getSimpleName();
private static final String SOAP_ACTION = "http://tempuri.org/GetMethod";
private static final String METHOD_NAME = "GetMethod";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://127.0.0.1/App_Services/service.asmx"; 
```

这就是我使用它的方式...

```
private SoapObject CallWebServiceDemo() {
    SoapObject result = null;
    try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.implicitTypes = true;
        envelope.dotNet = true;
        envelope.encodingStyle = SoapSerializationEnvelope.XSD;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);
        result = (SoapObject) envelope.getResponse();
    } catch (Exception ex) {
        Log.e(TAG, ex.getMessage());
    }
    return result;
} 
```