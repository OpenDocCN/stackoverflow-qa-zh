# StackOverflow 问答 10618000-10618999

# javascript - 子元素的 JavaScript 鼠标悬停/鼠标移出问题

> ID：10618001
> 
> 赞同：12
> 
> 时间：2012-05-16T11:57:18.177
> 
> 标签：javascript, parent-child, mouseover, mouseout

我有这个小问题，我请求你的帮助。我有一个**div**元素，里面有一个**img**元素，像这样

```
<div id="parent" onmouseover="MyFuncHover()" onmouseout="MyFuncOut()">
    <img id="child" src="button.png" style="visibility: hidden" />
</div>

<script type="text/javascript">
    function MyFuncHover() {
        // Here I have some code that makes the "child" visible
    }

    function MyFuncOut() {
        // Here I have some code that makes the "child" invisible again
    }
</script> 
```

如您所见，图像是**div**的子级。我希望只有当我离开**div**时，孩子才会消失。然而，看起来当我将鼠标移到图像上时，调用了*MyFuncOut()*函数（因为，我想，我通过悬停图像离开了 div）。我不希望这种情况发生。我希望仅在离开**div**区域时调用*MyFuncOut()*函数。

 **我不知道当您将鼠标移到子控件上时，它的父级会调用 mouseout 事件（即使我在子级之上，我仍然在父级之上）。我陷入了困境，我需要你的一些好建议。谢谢！

**变化**

OK 当我“鼠标移出”孩子时，事件冒泡不会将“鼠标移出”事件发送给父级。当我“鼠标悬停”孩子时，它也不会向父母发送“鼠标悬停”事件。那不是我需要的。当我“鼠标悬停”孩子时，我需要不发送父母的“mouseout”事件。得到它？例如，当我不希望将子项上的单击事件传播给父项时，事件冒泡很有用，但这不是我的情况。奇怪的是，当我“将鼠标悬停”它们时，我在同一个父级中还有其他元素不会触发父级的“mouseout”事件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T05:16:06.780

您可以使用 jquery 中可用的“mouseenter”和“mouseleave”事件，这是下面的代码，

```
$(document).ready(function () {
        $("#parent").mouseenter(function () {
            $("#child").show();
        });
        $("#parent").mouseleave(function () {
            $("#child").hide();
        });
    }); 
```

上面是附上一个事件，

```
<div id="parent">
    <img id="child" src="button.png" style="display:none;" />
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-08-21T13:46:34.193

您可以使用下面的解决方案，它是纯 javascript，我使用成功。

```
var container = document.getElementById("container");
var mouse = {x: 0, y: 0};

function mouseTracking(e) {
    mouse.x = e.clientX || e.pageX;
    mouse.y = e.clientY || e.pageY;
    var containerRectangle = container.getBoundingClientRect();

    if (mouse.x > containerRectangle.left && mouse.x < containerRectangle.right &&
            mouse.y > containerRectangle.top && mouse.y < containerRectangle.bottom) {
        // Mouse is inside container.
    } else {
        // Mouse is outside container.
    }
}
document.onmousemove = function () {
    if (document.addEventListener) {
        document.addEventListener('mousemove', function (e) {
            mouseTracking(e);
        }, false);
    } else if (document.attachEvent) {
        // For IE8 and earlier versions.
        mouseTracking(window.event);
    }
} 
```

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T12:17:29.520

只需在您的 MyFuncOut 函数中添加一个 if 语句来检查目标不是图像

```
if (event.target !== imageNode) {
     imageNode.style.display = 'none'
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:02:27.380

我也遇到了这个问题，无法让它工作。这就是我所做的。它更容易而且不是 JavaScript，所以它更快并且不能被关闭。

```
div.container {
    opacity:0.0;
    filter:alpha(opacity="00");
}

div.container:hover {
    opacity:1.0;
    filter:alpha(opacity="100");
} 
```

您甚至可以为不透明度添加 CSS3 过渡，使其具有更平滑的感觉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-12T20:32:03.820

只需设置子元素的css pointer-event:none; 参见示例：

```
#parent {
  width: 500px;
  height: 500px;
  border: 1px solid black;
}

#child {
  width: 200px;
  pointer-events: none; # this does the trick
}
```

```
<div id="parent" onmouseover="MyFuncHover()" onmouseout="MyFuncOut()">
    <img id="child" src="https://i2.wp.com/beebom.com/wp-content/uploads/2016/01/Reverse-Image-Search-Engines-Apps-And-Its-Uses-2016.jpg?w=640&ssl=1" />
</div>

<script type="text/javascript">
    function MyFuncHover() {
      console.log("mouse over")
    }

    function MyFuncOut() {
      console.log("mouse out")
    }
</script>
```**

# jquery - IE 中 eval() 的问题

> ID：10618004
> 
> 赞同：0
> 
> 时间：2012-05-16T11:57:32.810
> 
> 标签：jquery, internet-explorer, eval

运行 IE 时，我在此代码的 eval 行上收到此语法错误。这在 Chrome 和 Firefox 中都可以正常工作，而不是 IE。

```
$(document).ready (function () {
    $.ajax({
        url: 'scripts/isLoggedIn.php',
        success: function (tmp) {
            data = eval ('('+tmp+')');
            if (data.login=='OK') {
                $('#main').load ('scripts/loginok.php');
                $('#menu').show("slow");
            }
        }
    });
}); 
```

请帮我理解这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:07:37.070

使用自动解析数据的[getJSON](http://api.jquery.com/jQuery.getJSON/)方法：

```
$(document).ready (function () {
  $.getJSON('scripts/isLoggedIn.php',
    function (data) {
      if (data.login=='OK') {
        $('#main').load ('scripts/loginok.php');
        $('#menu').show("slow");
      }
    }
  );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:00:40.157

你可以试试：

```
$.parseJSON(tmp); 
```

# xml - 如何使用 libxml2 在 XML 文件中添加 xml-stylesheet 标签？

> ID：10618005
> 
> 赞同：1
> 
> 时间：2012-05-16T11:57:34.290
> 
> 标签：xml, libxml2

我想知道如何插入特殊标签

```
<?xml-stylesheet type="text/xsl" href="XYZ.xslt"?> 
```

在文档中，就在`<?xml version="1.0" ... ?>`Doc 根元素之后和之前 ?? 我目前使用 libxml2 版本 2.7.8

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:50:07.893

知道这个“标签”实际上是一个处理指令会有所帮助，您可以使用 XSLT 指令创建处理指令

```
<xsl:processing-instruction name="xml-stylesheet">
  <xsl:text>type="text/xsl" href="XYZ.xslt"</xsl:text>
</xsl:processing-instruction> 
```

# android - 如何使用 Monkeyrunner 运行单个测试用例

> ID：10618006
> 
> 赞同：2
> 
> 时间：2012-05-16T11:57:37.063
> 
> 标签：android, monkeyrunner, android-testing

根据官方文档功能*MonkeyDevice.instrument(className, args)*非常适合这项任务。

据我了解，这应该这样做：

```
device.instrument('my.package.name/android.test.InstrumentationTestRunner', {'class':'my.package.name.SingleTest'}) 
```

但是它仍然会启动所有测试用例。是错误还是我的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:01:00.303

这是一个黑猩猩虫。我刚刚上传了一个解决问题的[路径](https://android-review.googlesource.com/#/c/37560)。应用后，您将能够使用您正在使用的相同语法运行一个类中的所有测试。

如果您想在补丁合并之前尝试一下，您可以

1.  下载安卓源
2.  樱桃采摘补丁 37560
3.  设置环境（build/envsetup.sh）
4.  午餐
5.  制作黑猩猩
6.  制作猴子跑者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:40:47.420

尝试：

```
device.shell('am instrument -w -e class my.package.name.SingleTest my.package.name/android.test.InstrumentationTestRunner') 
```

出于某种原因，即使使用最新的 sdk 20.0.1 和平台 14，device.instrument() 方式也对我不起作用。

# android - 如何将上下文从 MenuItem onOptionsItemSelected 传递给 ASyncTask？

> ID：10618011
> 
> 赞同：6
> 
> 时间：2012-05-16T11:57:57.183
> 
> 标签：android, static, android-asynctask, fragment, actionbarsherlock

编辑：一行中的问题：

> 如何从 MenuItem onOptionsItemSelected 传递上下文？

编辑2：这是我在做什么的全局指示：[https ://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/FragmentTabsPager.java)

* * *

我正在构建一个基于 ActionBarSherlock 的应用程序。它使用标签、片段和浏览器。它意味着尽可能多才多艺。选项卡可以包含 web 视图或列表视图。这是一个屏幕截图：

![http://dl.dropbox.com/u/11218283/Screenshot_2012-05-16-13-33-08.png](../Images/6e00bde4374c794151986a5d1286ad2c.png)

首次加载选项卡 (SherlockListFragment) 时，它使用 ASyncTask 从提要中读取内容。OnPostExecute 它更新列表并将结果保存到 SharedPreference 字符串（作为一种缓存方式）。可以想象，AsyncTask 需要上下文来执行此操作。我从 SherlockListFragment 调用 asynctask，如下所示：

```
x.new refreshList(this,getActivity()).execute(); 
```

（x 是对我当前文件的引用）。

并像这样将其传输到我的 AsyncTask

```
 public refreshList(TabList a,Context b){
    this.mContext = a;
    this.mCont = b;
} 
```

一切正常。但正如你所看到的，我已经在一个菜单项中添加了一个用于刷新的菜单项。按照我的设置方式，我无法重新运行 ASyncTask，因为我没有适当的上下文信息。谁能告诉我在这种情况下如何执行刷新？

如果任何愿意提供帮助的人需要查看更多代码，我会很乐意遵守。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T18:49:23.970

您说您正在响应 onOptionsItemSelected 中的按钮，因此上下文只是`this`您在 Activity 中执行此操作。如果在片段中是`getActivity()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:59:44.673

像所有小部件一样，您的刷新按钮是 View 的子类，可以调用[view.getContext()](http://developer.android.com/reference/android/view/View.html#getContext%28%29)来获取创建它的 Activity 上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:10:27.900

尽管 Jason 正确回答了我的问题，但之后我发现我还有一个问题。我在我的 FragmentActivity 中放置了 onOptionsItemSelected。当我将它移到我的 ListFragment 中时，我得到了他的答案。

# html - 我有一个带有链接文本 + 链接地址的字符串，如何在 UIWebView 中显示它？

> ID：10618014
> 
> 赞同：0
> 
> 时间：2012-05-16T11:58:10.610
> 
> 标签：html, objective-c, parsing, hyperlink

当我解析来自 rss 的新闻描述时，有一个这种格式的链接：

> 2012 年 4 月 4 日的小发明（index.php?option=com_content task=view id=157 Itemid=100）。

我想展示一个带有链接文本的超链接：

> 2012 年 4 月 4 日的小发明

和链接地址：

> index.php?option=com_content task=view id=157 Itemid=100

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:38:59.403

您可以像这样获取所需的字符串：

```
NSString *string = [NSString stringWithString:@"Little invention of the 4 april 2012 (index.php?option=com_content task=view id=157 Itemid=100)"];
int linkStartIndex = [string rangeOfString:@"(" options:NSBackwardsSearch].location;
NSString *name = [string substringToIndex:linkStartIndex];
NSString *adress = [string substringWithRange:NSMakeRange(linkStartIndex+1, string.length-linkStartIndex-2)];
NSLog(@"\nname = [%@], \naddress = [%@]", name, adress); 
```

如果您使用 UIWebView 来呈现它，请将此字符串添加到您的 webView 的 html 中：

```
NSString *linkTag = [NSString stringWithFormat:@"<a href=\"%@\">%@</a>", adress, name]; 
```

# bash - bash parse filename

> ID：10618015
> 
> 赞同：6
> 
> 时间：2012-05-16T11:58:19.500
> 
> 标签：bash, parsing, tokenize

Is there any way in bash to parse this filename :

`$file = dos1-20120514104538.csv.3310686`

into variables like `$date = 2012-05-14 10:45:38` and `$id = 3310686` ?

Thank you

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T12:10:55.000

All of this can be done with Parameter Expansion. Please read about it in the bash manpage.

```
$ file='dos1-20120514104538.csv.3310686'
$ date="${file#*-}" # Use Parameter Expansion to strip off the part before '-'
$ date="${date%%.*}" # Use PE again to strip after the first '.'
$ id="${file##*.}" # Use PE to get the id as the part after the last '.'
$ echo "$date"
20120514104538
$ echo "$id"
3310686 
```

Combine PEs to put date back together in a new format. You could also parse the date with GNU date, but that would still require rearranging the date so it can be parsed. In its current format, this is how I would approach it:

```
$ date="${date:0:4}-${date:4:2}-${date:6:2} ${date:8:2}:${date:10:2}:${date:12:2}"
$ echo "$date"
2012-05-14 10:45:38 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:12:25.503

Extract id:

```
f='dos1-20120514104538.csv.3310686'
echo ${f/*./}
# 3310686
id=${f/*./} 
```

Remove prefix, and extract core date numbers:

```
noprefix=${f/*-/}
echo ${noprefix/.csv*/}
# 20120514104538
ds=${noprefix/.csv*/} 
```

format the date like this (only partially done:)

```
echo $ds | sed -r 's/(.{4})(.{2})(.{2})/\1.\2.\3/' 
```

* * *

You can alternatively split the initial variable into an array,

```
echo $f
# dos1-20120514104538.csv.3310686 
```

after exchanging - and . like this:

```
echo ${f//[-.]/ }
# dos1 20120514104538 csv 3310686

ar=(${f//[-.]/ })
echo ${ar[1]}
# 20120514104538

echo ${ar[3]}
# 3310686 
```

* * *

The date transformation can be done via an array similarly:

```
dp=($(echo 20120514104538  | sed -r 's/(.{2})/ \1/g'))
echo ${dp[0]}${dp[1]}-${dp[2]}-${dp[3]} ${dp[4]}:${dp[5]}:${dp[6]} 
```

It splits everything into groups of 2 characters:

```
echo ${dp[@]}
# 20 12 05 14 10 45 38 
```

and merges 2012 together in the output.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T04:33:24.787

Using Bash's regular expression feature:

```
file='dos1-20120514104538.csv.3310686'
pattern='^[^-]+-([[:digit:]]{4})'
for i in {1..5}
do
    pattern+='([[:digit:]]{2})'
done
pattern+='\.[^.]+\.([[:digit:]]+)$'
[[ $file =~ $pattern ]]
read -r _ Y m d H M S id <<< "${BASH_REMATCH[@]}"
date="$Y-$m-$d $H:$M:$S"
echo "$date"
echo "$id" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:02:48.477

You can tokenize the string first for `-` and then for `.`. There are various threads on SO on how to do this:

1.  [How do I split a string on a delimiter in Bash?](https://stackoverflow.com/questions/918886/split-string-based-on-delimiter-in-bash)
2.  [Bash: How to tokenize a string variable?](https://stackoverflow.com/questions/5382712/bash-how-to-tokenize-a-string-variable)

To transform `20120514104538` into `2012-05-14 10:45:38` :

Since we know that first 4 characters is year, next 2 is months and so on, you will first need to break this *token* into sub-strings and then recombine into a single string. You can start with the following answer:

1.  [https://stackoverflow.com/a/428580/365188](https://stackoverflow.com/a/428580/365188)

# html - HTML XPath：提取与多个标签混合的文本？

> ID：10618016
> 
> 赞同：17
> 
> 时间：2012-05-16T11:58:21.603
> 
> 标签：html, xpath, scrapy

目标：从特定元素（例如li）中提取文本，同时忽略各种混合标签，即展平第一级子元素并简单地分别返回每个展平子元素的连接文本。

例子：

```
<div id="mw-content-text"><h2><span class="mw-headline" >CIA</span></h2>
    <ol>
    <li>Central <a href="/Intelligence_Agency.html">Intelligence Agency</a>.</li>
    <li>Culinary <a href="/Institute.html">Institute</a> of <a href="/America.html">America</a>.</li>
    </ol>

    </Div> 
```

所需文字：

*   中央情报局
*   美国烹饪学院

除了周围的锚标记阻止简单的检索。

要分别返回每个 li 标签，我们使用简单的：

```
//div[contains(@id,"mw-content-text")]/ol/li 
```

但这也包括周围的锚标签等。和

```
//div[contains(@id,"mw-content-text")]/ol/li/text() 
```

仅返回 li 的直接子元素的文本元素，即 'Central','.'...

寻找自我和后代的文本元素似乎是合乎逻辑的

```
//div[contains(@id,"mw-content-text")]/ol/li[descendant-or-self::text] 
```

但这根本没有回报！

有什么建议么？我正在使用 Python，所以我愿意使用其他模块进行后处理。

（我正在使用看起来符合 XPath 1.0 的 Scrapy HtmlXPathSelector）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T12:48:53.723

**你快到了。有一个小问题**：

```
//div[contains(@id,"mw-content-text")]/ol/li[descendant-or-self::text] 
```

**修正后的表达式为**：

```
//div[contains(@id,"mw-content-text")]/ol/li[descendant-or-self::text()] 
```

**但是，有一个更简单的表达式可以准确地生成指定下所有文本节点的所需串联`li`：**

```
string(//div[contains(@id,"mw-content-text")]/ol/li) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T12:28:35.100

我认为以下将返回正确的结果：

```
//div[contains(@id,"mw-content-text")]/ol/li//text() 
```

注意 text() 之前的双斜杠。这意味着必须返回低于 li 的任何级别的文本节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:26:06.620

字符串连接很棘手。这是使用的快速解决方案`lxml`：

```
>>> from lxml import etree
>>> doc = etree.HTML("""<div id="mw-content-text"><h2><span class="mw-headline" >CIA</span></h2>
...     <ol>
...     <li>Central <a href="/Intelligence_Agency.html">Intelligence Agency</a>.</li>
...     <li>Culinary <a href="/Institute.html">Institute</a> of <a href="/America.html">America</a>.</li>
...     </ol>
...
...     </Div>""")
>>> for element in doc.xpath('//div[@id="mw-content-text"]/ol/li'):
...   print "".join(element.xpath('descendant-or-self::text()'))
...
Central Intelligence Agency.
Culinary Institute of America. 
```

请注意，这`//`可能具有较差的性能/意外执行，应尽可能避免，但对于示例 HTML 片段很难做到这一点。

# java - eclipse中的Maven java项目看不到同一个包中的类

> ID：10618017
> 
> 赞同：3
> 
> 时间：2012-05-16T09:38:50.177
> 
> 标签：java, eclipse, maven

我刚刚开始使用 Maven 来尝试构建一个多模块项目。

除了 2 个小问题，一切都会好起来的。

使用 eclipse 向导创建一个新的 'simple J2EE' 原型的 maven 项目由于 eclipse 中的一个错误而失败，在查找原型时它会忽略代理设置（https://bugs.eclipse.org/bugs/show_bug.cgi?编号=348893)

解决方案是在命令行上创建我的项目，然后将生成的文件结构复制到我的工作空间内的“简单 maven”项目中 - 导入项目也失败了！

然而，我真正的问题是以下

当我单击项目文件夹并“创建一个新的 java 类”时，它会将类放在错误的位置，根据它应该在 maven 体系结构中的位置（我选择了错误的选项吗？）。所以我移动它。

所以现在我创建了第二个类，它具有第一个类作为成员。这两个类显然都在同一个包命名空间内。但是从我的第二个开始，我看不到任何成员类的方法。

我猜我在我的 POM 或我的结构中做错了什么。

但我不知道什么，也不知道您可能需要什么信息来帮助我解决它。

现在我已经恢复到在 Eclipse 中将我的子模块创建为一个单独的包，使用 ANT 和各种 Eclipse 工具来指向所需的库等。然后当我完成测试时，我将项目转换为“maven”项目。完成此操作后，我的父 POM 和子 POM 都在 eclipse 中验证 OK。但是，如果我决定扩展功能并在我的模块中添加一个新类，那么类文件最终会出现在错误的位置，我无法从中看到我的其他类（或它们中的这个新类）。

请帮忙。我喜欢 Maven 的想法并使用它来控制我的依赖项，顺便说一下，我将前往 ANT，也许学习 IVY 进行依赖项控制（尽管我有点沮丧地去所有让 Maven 发挥作用的斗争只是为了把它扔掉！）

我应该坚持使用 ANT / IVY 并忘记 maven，而是为未来保留 maven 目录结构吗？

编辑。

所以我可能错过了一些东西......我只是再次尝试在eclipse中创建一个简单的maven项目，这次我没有选择原型。我已将新的“模块”放在父文件夹下。这不是我一直在做的事情，我已经创建了许多与我的父母处于同一级别的外部模块。我从父级（使用我的测试模块）中的有效 POM 中注意到它有一个部分和其他标签。我会通过将它添加到我的个人模块 POM 中来解决我的问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T01:57:16.263

这是 Eclipse/Maven 怪异的结果，似乎是随机发生的。要解决：

右键单击项目并选择 Maven > 更新项目...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T00:26:25.707

看看你的 .classpath。验证源文件夹和目标是否在 eclipse 期望的位置。

一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T14:10:50.327

也许您的 .project 文件中有类似的配置：

```
<buildSpec>
        <buildCommand>
            <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
            <triggers>full,incremental,</triggers>
            <arguments>
                <dictionary>
                    <key>LaunchConfigHandle</key>
                    <value>&lt;project&gt;/.externalToolBuilders/org.eclipse.wst.common.project.facet.core.builder.launch</value>
                </dictionary>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
            <triggers>full,incremental,</triggers>
            <arguments>
                <dictionary>
                    <key>LaunchConfigHandle</key>
                    <value>&lt;project&gt;/.externalToolBuilders/org.eclipse.jdt.core.javabuilder.launch</value>
                </dictionary>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
            <triggers>full,incremental,</triggers>
            <arguments>
                <dictionary>
                    <key>LaunchConfigHandle</key>
                    <value>&lt;project&gt;/.externalToolBuilders/org.springframework.ide.eclipse.core.springbuilder.launch</value>
                </dictionary>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
            <triggers>full,incremental,</triggers>
            <arguments>
                <dictionary>
                    <key>LaunchConfigHandle</key>
                    <value>&lt;project&gt;/.externalToolBuilders/org.eclipse.wst.validation.validationbuilder.launch</value>
                </dictionary>
            </arguments>
        </buildCommand> 
```

为此配置（或您的其他项目之一）更改它：

```
<buildCommand>
        <name>org.eclipse.wst.common.project.facet.core.builder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.springframework.ide.eclipse.core.springbuilder</name>
        <arguments>
        </arguments>
    </buildCommand> 
```

# php - 如何使用 phpunit 和 xdebug 获得代码覆盖率

> ID：10618023
> 
> 赞同：0
> 
> 时间：2012-05-16T11:58:37.740
> 
> 标签：php, phpunit, xdebug

我想获得一个网站的代码覆盖率。我需要进行手动测试而不是编写代码。

网站的源代码和xdebug、phpunit都在linux服务器上。现在我启动apache并打开网站。我只是不知道如何获得我的手动测试的覆盖率。

我期望的是：

1.  在服务器上进行一些配置
2.  打开我的网站并进行许多手动测试
3.  使用某种方法来获取代码覆盖率

剂量 phpunit + xdebug 可以做到这一点吗？我需要一份报告，html 很好。

PS。我是新人...我的英语和技能不是很好...所以请耐心等待，非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:01:26.347

只需按照[PHPUnit Manual, Code-Coverage Analysis](http://www.phpunit.de/manual/3.0/en/code-coverage-analysis.html)中的所有步骤操作即可。

如果您想使用手动前端测试进行代码覆盖。看看[Selenium IDE](http://seleniumhq.org/projects/ide/)和[PHP Unit](http://www.phpunit.de/manual/current/en/selenium.html)。

# javascript - 将图像加载到滚动 DIV 中

> ID：10618024
> 
> 赞同：0
> 
> 时间：2012-05-16T11:58:37.927
> 
> 标签：javascript, css, html

我在图像库的滚动 DIV 中有许多图像，并且只有在向下滚动后它们在 DIV 中可见时才会加载图像。这导致 DIV 在尝试加载图像时冻结。有什么办法可以解决这个问题吗？我敢肯定它可能与javascript相关。

只是我的简单 DIV。

```
<div style="width:275;height:400;overflow-x:scroll;">

content

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:01:49.147

[http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)

您可以使用 javascript 预加载图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:02:45.150

您需要预加载图像。如果您不想使用 Javascript，请尝试[这种方式。](http://perishablepress.com/a-way-to-preload-images-without-javascript-that-is-so-much-better/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:05:47.893

是的，事实上有许多相关的库用于此目的。主要用于旧浏览器的带宽节省目的，但会做与您在这里想要的相同的工作。

[http://yuilibrary.com/yui/docs/imageloader/](http://yuilibrary.com/yui/docs/imageloader/)

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

同时，如果您的图像尺寸非常大并且它们的行很长，请记住在它们从视图中不可见后隐藏（显示：无）它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:07:10.403

尝试使用这个延迟加载脚本，它将在图像到达可见区域之前加载固定数量的像素之前的图像。这有很多选择

[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:07:11.187

```
function expandDiv(idOfDivElement) {
    divObj = document.getElementById(idOfDivElement);
    var imageObj = document.createElement('img');
    imageObj.setAttribute('src', 'path/example_image.jpg');
    divObj.appendChild(imageObj);
    // your expand div code here
} 
```

# maven - soapUI 和 JUnit 依赖问题

> ID：10618025
> 
> 赞同：1
> 
> 时间：2012-05-16T11:58:40.797
> 
> 标签：maven, junit, soapui

我正在尝试使用集成到 JUnit 的soapUI。我尝试添加[此处](http://www.eviware.com/forum/viewtopic.php?f=2&t=13463&p=33144&hilit=dependencies#p33144)提到的依赖项，但它不起作用。找不到某些类。

在这篇[文章](https://stackoverflow.com/questions/6035469/integrating-soapui-with-junit)中，建议将soapui/lib 目录添加到类路径中，但这对于Maven 来说并不是一个很好的做法。

您知道要将soapUI 集成到JUnit 中添加哪些依赖项到我的项目吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T11:08:25.747

根据您尝试使用 SoapUI 执行的操作，您可以使用其 Maven 插件，而不是尝试将其与 JUnit 集成：http: [//www.soapui.org/Test-Automation/maven-2x.html](http://www.soapui.org/Test-Automation/maven-2x.html) . 例如，您可以使用它来启动 SoapUI 模拟服务器，运行调用 Web 服务的集成测试，然后在完成测试后停止模拟服务器。如果您想这样做，另请参阅 Failsafe 插件。

如果做不到这一点，您可以将 Maven 插件添加到您的测试类路径中。这还应该引入运行 SoapUI 本身所需的所有依赖项：

```
<dependencies>
  <dependency>
    <groupId>eviware</groupId>
    <artifactId>maven-soapui-plugin</artifactId>
    <version>4.5.0</version>
    <scope>test</scope>
  </dependency>
</dependencies>
<repositories>
  <repository>
    <id>eviware</id>
    <url>http://www.eviware.com/repository/maven2/</url>
  </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:09:39.197

您需要在项目下创建一个 ext 文件夹并在其中添加您的依赖项。这是 SoapUI 运行程序将查看的目录，用于所有外部依赖项。

# google-maps - 谷歌地图api图表

> ID：10618028
> 
> 赞同：0
> 
> 时间：2012-05-16T11:58:49.453
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

我有一个融合表和一些融合表的查询。现在我想为每个查询创建动态饼图。饼图的值应该取自两个选择框。如何做到这一点。有三个 html div 元素在我的网页中。一个用于渲染地图，另一个用于融合表可视化，下一个用于图表数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:34:46.077

有一个关于[如何使用 Google Chart Tools 查询 Google Fusion Tables](https://developers.google.com/chart/interactive/docs/fusiontables)的教程。

这是一个例子：

```
google.load('visualization', '1', {packages: ['corechart']});

function drawFTChart() {
  google.visualization.drawChart({
    "containerId": "my_chart_div",
    "dataSourceUrl": 'http://www.google.com/fusiontables/gvizdata?tq=',
    "query":"SELECT Location,Number FROM 1R9FMod3LN7UO3R6jp7gJeSQ9hbEVOwLqF0AZFQg",
    "refreshInterval": 5,
    "chartType": "PieChart",
    "options": {
      "title":"Number distribution over cities"
    }
  });
}

google.setOnLoadCallback(drawFTChart); 
```

# iphone - 如何在 UIViewController 类中的 UIImageView 上绘制一些东西

> ID：10618033
> 
> 赞同：1
> 
> 时间：2012-05-16T11:59:30.253
> 
> 标签：iphone, ios, ipad

我知道一种使用 UIView 类和 UIImage 方法在 iPhone 上绘图的方法。但是我可以在 UIImageView 上绘制 inUIViewController 类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:07:10.120

由于 UIImageView 是 UIView 的子类，你应该能够使用完全相同的方法来做你想做的事。

您还可以在任何其他视图上方添加一个自定义视图（从 UIView 继承）并在该视图上绘制您想要的任何内容。

# c# - 使用 PdfSharp 将 C# 中的 Windows 表单转换为 PDF

> ID：10618036
> 
> 赞同：2
> 
> 时间：2012-05-16T11:59:35.617
> 
> 标签：c#, windows, forms, pdf, pdf-conversion

我正在尝试将 C# windows 窗体的当前内容转换为 pdf 文档。

我正在使用 PDFSharp dll 进行转换，我不确定如何捕获 Windows 表单并将其转换为 PDF。我认为我应该使用该`XGraphics.DrawImage()`方法来复制 windows 窗体的内容。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:41:55.720

您可以先[捕获活动窗口的屏幕截图吗？](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)然后将图像传递到 PDFSharp 中，例如：

```
var doc = new PdfDocument();

var oPage = new PDFPage();

doc.Pages.Add(oPage);
var xgr = XGraphics.FromPdfPage(oPage);
var img = XImage.FromFile(PATH_TO_IAMGE_CAPTURED_HERE);

xgr.DrawImage(img, 0, 0);

doc.Save(YOUR_FILE_PATH_HERE);
doc.Close(); 
```

# c# - 在派生的 C# 用户控件中处理 Windows 通知

> ID：10618041
> 
> 赞同：1
> 
> 时间：2012-05-16T11:59:42.370
> 
> 标签：c#, winapi, user-controls, treeview

如何处理从 .NET TreeView 控件派生的 C# 类中列出[的任何树视图通知？](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486107%28v=vs.85%29.aspx)

我试图处理点击通知，例如，像这样：

```
class ExtendedTreeView : TreeView
{
    private const Int32 NM_FIRST = (Int32)(0U - 0U);
    private const Int32 NM_CLICK = unchecked((Int32)((UInt32)NM_FIRST - 2U));

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == NM_CLICK)
        {
            MessageBox.Show("NM_CLICK");
        }
        base.WndProc(ref m);
    }
} 
```

但是消息框永远不会显示。这是我第一次尝试使用 Win32 API 来修改 .NET 控件的行为，所以我不知道出了什么问题。

这是处理这些通知的正确方法吗？

仅供参考：我知道 .NET TreeView 控件有一个单击事件。这只是第一次测试。稍后我想启用该`TVS_EX_MULTISELECT`样式。由于 .NET TreeView 控件在启用时不会触发任何`AfterSelect`事件`TVS_EX_MULTISELECT`，因此我想稍后调查`TVN_SELCHANGED`和通知的行为。`TVN_ITEMCHANGED`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:18:56.633

事情没那么简单。检查[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773466%28v=vs.85%29.aspx)，NM_CLICK 通知作为 WM_NOTIFY 消息传递。并将其发送到树视图的*父*级。Winforms 有管道将其回显到原始控件，以允许消息由派生自 TreeView 的类处理并自定义事件处理。这是通过将 0x2000 添加到消息中来完成的，即 Winforms 源代码中 WM_REFLECT 的值。

所以代码应该是这样的：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

class ExtendedTreeView : TreeView {
    protected override void WndProc(ref Message m) {
        if (m.Msg == WM_REFLECT + WM_NOFITY) {
            var notify = (NMHDR)Marshal.PtrToStructure(m.LParam, typeof(NMHDR));
            if (notify.code == NM_CLICK) {
                MessageBox.Show("yada");
                m.Result = (IntPtr)1;
                return;
            }

        }
        base.WndProc(ref m);
    }
    private const int NM_FIRST = 0;
    private const int NM_CLICK = NM_FIRST - 2;
    private const int WM_REFLECT = 0x2000;
    private const int WM_NOFITY = 0x004e;

    [StructLayout(LayoutKind.Sequential)]
    private struct NMHDR {
        public IntPtr hwndFrom;
        public IntPtr idFrom;
        public int code;
    }
} 
```

请注意，TreeView 已经完成了所有这些，这就是 NodeMouseClick、Click 和 MouseClick 事件的生成方式。执行此操作的代码也适用于本机控件中的一些怪癖，因此请确保在提交使用它之前确实需要它。如果您想知道发生了什么，请查看参考源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:14:22.773

通知被发送到控件的父级：

> 通知树视图控件的**父窗口**用户在控件中单击了鼠标左键。

这是通过[`WM_NOITIFY`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775583%28v=vs.85%29.aspx)消息完成的。幸运的是，作者还包括一种称为反射的机制，以允许树视图的子类也接收通知。该消息是`&H2000 | WM_NOTIFY`您可以完全视为`WM_NOTIFY`.

另请注意，这[`NM_CLICK`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773466%28v=vs.85%29.aspx)不是消息，而是包装在[`NMHDR`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775514%28v=vs.85%29.aspx)结构中的通知

> 此通知代码以 WM_NOTIFY 消息的形式发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:35:30.327

有两件重要的事情，在 MSDN 中提到：1）msg.lparam 是指向 NMHDR 结构的指针 2）通知发送到父控件

所以工作代码是（编译为控制台应用程序 - 它会在那里打印消息）：

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;

class MyTreeView : TreeView
{
    public TreeView RealTreeView;
    public MyTreeView()
    {
        RealTreeView = new TreeView();
        RealTreeView.Dock = DockStyle.Fill;
        Controls.Add(RealTreeView);
    }
    enum WM
    {
        NOTIFY = 78
    }
    enum NM : uint
    {
        FIRST = 0,
        NM_CLICK = unchecked(FIRST - 2),
        NM_CUSTOMDRAW = unchecked(FIRST - 12),
        NM_DBLCLK = unchecked(FIRST - 3),
        NM_KILLFOCUS = unchecked(FIRST - 8),
        NM_RCLICK = unchecked(FIRST - 5),
        NM_RDBLCLK = unchecked(FIRST - 6),
        NM_RETURN = unchecked(FIRST - 4),
        NM_SETCURSOR = unchecked(FIRST - 17),
        NM_SETFOCUS = unchecked(FIRST - 7)
    }

    [StructLayout(LayoutKind.Sequential)]
    struct NMHDR {
        public IntPtr hwndFrom;
        public UIntPtr idFrom;
        public uint code;
    }

    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);
        if (m.Msg == (int)WM.NOTIFY)
        {
            uint code;
            unsafe
            {
                var nmhdr = (NMHDR*)m.LParam.ToPointer();
                code = nmhdr->code;
            }
            NM nmCode = (NM)code;
            Console.WriteLine("WM_NOTIFY " + nmCode);
        }
    }
}

public class MyGuiClass
{
    public static void Main()
    {
        Form f = new Form();
        var tv = new MyTreeView();
        tv.RealTreeView.Nodes.Add("zero").Nodes.Add("sub-zero");
        tv.RealTreeView.Nodes.Add("one");
        tv.RealTreeView.Nodes.Add("two");
        tv.RealTreeView.Nodes.Add("three");
        tv.Dock = DockStyle.Fill;
        f.Controls.Add(tv);
        Application.Run(f);
    }
} 
```

编辑：当然不要忘记使用 /unsafe 进行编译。

# android - Toast 通知在 Sony Tablet S 上无法正常工作

> ID：10618042
> 
> 赞同：0
> 
> 时间：2012-05-16T11:59:42.410
> 
> 标签：android, notifications, toast

单击某个按钮时，我收到了 Toast 通知。此 Toast 通知在智能手机上运行良好，但在平板电脑上它仅在第一次单击按钮时出现 - 之后 Toast 通知不显示（它在智能手机上出现！）

有什么区别？（智能手机上的操作系统版本为 2.3，平板电脑上的操作系统版本为 3.1 - 尽管清单中的目标是 2.3）

```
//Display Custom Toast
                        if(mToast == null){
                            mToast = new Toast(getContext());
                        } else {
                            mToast.cancel();
                        }

                        ImageView imageView = (ImageView) layout.findViewById(R.id.toast_image);
                        imageView.setImageBitmap(aux.getArtwork(getContext()));

                        TextView tvTitle = (TextView) layout.findViewById(R.id.toast_title);
                        TextView tvArtist = (TextView) layout.findViewById(R.id.toast_artist);
                        TextView tvChannel = (TextView) layout.findViewById(R.id.toast_channel);

                        tvTitle.setText(aux.getTitle());
                        tvArtist.setText(aux.getArtist());
                        tvChannel.setText(aux.getFirstChannel().toString());

                        mToast.setDuration(Toast.LENGTH_SHORT);
                        mToast.setView(layout);
                        mToast.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:07:28.440

这与平板电脑无关。我已经在 Sony S 上成功实现了 toast 消息。我认为您交叉检查了您的代码，是的，当您从一个平台运行到另一个平台时，有时会有所不同。您可以将最低 sdk 版本设置为 2.3，并将目标平台设置为 3.1，以确保应用程序的性能。

# image-processing - 计算机视觉的真实数据收集和评估

> ID：10618051
> 
> 赞同：9
> 
> 时间：2012-05-16T12:00:34.880
> 
> 标签：image-processing, metadata, computer-vision, tracking, evaluation

目前我开始开发一个涉及人类跟踪的计算机视觉应用程序。我想为将在这个项目中录制的视频构建*真实的元数据。*元数据可能需要手动标记，主要包括图像中人类的位置。我想使用元数据来*评估*我的算法的性能。

我当然可以使用例如 qt 和/或 opencv 构建标签工具，但我想知道是否有某种事实上的标准。我遇到了[毒蛇](http://viper-toolkit.sourceforge.net/)，但它似乎已经死了，而且它并不像我希望的那样容易。除此之外，我没有发现太多。

这里有人对标签和评估使用哪种软件/标准/方法有一些建议吗？我的主要偏好是选择面向 c++ 的东西，但这不是硬性限制。

提前致以诚挚的问候和感谢！汤姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T14:24:38.760

我又看了一下[vatic](http://mit.edu/vondrick/vatic/)并让它工作。它是一种在线视频注释工具，旨在通过商业服务进行众包，并在 Linux 上运行。但是，也有离线模式。在这种模式下，不需要用于开发该软件的服务，并且该软件独立运行。

随附的 README 文件中对安装进行了详细描述。其中包括设置 appache 和 mysql 服务器、一些 python 包、ffmpeg。如果您遵循自述文件，这并不难。（我提到我的代理有一些问题，但这与这个软件包无关）。

您可以尝试在线演示。默认输出是这样的：

```
0 302 113 319 183 0 1 0 0 "person"
0 300 112 318 182 1 1 0 1 "person"
0 298 111 318 182 2 1 0 1 "person"
0 296 110 318 181 3 1 0 1 "person"
0 294 110 318 181 4 1 0 1 "person"
0 292 109 318 180 5 1 0 1 "person"
0 290 108 318 180 6 1 0 1 "person"
0 288 108 318 179 7 1 0 1 "person"
0 286 107 317 179 8 1 0 1 "person"
0 284 106 317 178 9 1 0 1 "person" 
```

每行包含 10+ 列，以空格分隔。这些列的定义是：

```
1   Track ID. All rows with the same ID belong to the same path.
2   xmin. The top left x-coordinate of the bounding box.
3   ymin. The top left y-coordinate of the bounding box.
4   xmax. The bottom right x-coordinate of the bounding box.
5   ymax. The bottom right y-coordinate of the bounding box.
6   frame. The frame that this annotation represents.
7   lost. If 1, the annotation is outside of the view screen.
8   occluded. If 1, the annotation is occluded.
9   generated. If 1, the annotation was automatically interpolated.
10  label. The label for this annotation, enclosed in quotation marks.
11+ attributes. Each column after this is an attribute. 
```

但也可以提供 xml、json、pickle、labelme 和 pascal voc 的输出

所以，总而言之，这完全符合我的要求，而且它也很容易使用。不过，我仍然对其他选择感兴趣！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T15:07:00.577

[LabelMe](http://labelme.csail.mit.edu/guidelines.html)是另一个开放的注释工具。我认为它不太适合我的特殊情况，但仍然值得一提。它似乎面向blob标签。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T08:27:53.687

这是所有计算机视觉从业者都面临的问题。如果你是认真的，有一家公司会通过众包为你做这件事。不过，我不知道是否应该在此站点中放置指向它的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-24T22:55:44.017

我在寻找用于图像注释的工具来构建用于训练图像分析模型的地面实况数据集时遇到了同样的问题。

如果您需要为注释绘制多边形轮廓，LabelMe 是一个不错的选择。我以前使用过它，它做得很好，并且在 3d 特征提取方面还有一些很酷的功能。除了 LabelMe，我还做了一个开源工具[LabelD](https://sweppner.github.io/labeld/)。如果您仍在寻找进行注释的工具，请查看！

# iphone - 如何在 iOS 中使用图像上传代码发布更多参数？

> ID：10618056
> 
> 赞同：5
> 
> 时间：2012-05-16T12:00:56.943
> 
> 标签：iphone, ios, upload, image-uploading

嗨，我正在 php 服务器上上传图片，并在此代码的帮助下成功上传

```
- (NSString*)uploadData:(NSData *)data toURL:(NSString *)urlStr:(NSString *)_userID
{
    // File upload code adapted from http://www.cocoadev.com/index.pl?HTTPFileUpload
    // and http://www.cocoadev.com/index.pl?HTTPFileUploadSample
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlStr]];
    [request setHTTPMethod:@"POST"];

//    NSString*  = [NSString stringWithString:@"0xKhTmLbOuNdArY"];
    NSString *stringBoundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",stringBoundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
//  [body appendData:[[NSString stringWithFormat:@"userId=%@",_userID] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"image%@.jpg\"\r\n", _userID] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:data]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString);

    return returnString;

} 
```

现在我也想在 derver 端发送我的用户 ID 我怎样才能发送我的用户 ID？我试过这样

```
[body appendData:[[NSString stringWithFormat:@"userId=%@",_userID] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

但徒劳无功然后我试图以这种方式发送它

```
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"image%@.jpg\"; userId=\"%@\"\r\n", _userID, _userID] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

但再次徒劳，请指导我该怎么做！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:30:15.607

如果您还没有考虑过使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)，那么您应该这样做。它使处理 Web 服务变得更加容易。我做了一些类似于我认为你想做的事情。我编写了一个自定义类来触发网络请求。给你：NetworkClient.h

```
/*
 NetworkClient.h

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import <Foundation/Foundation.h>

extern NSString * const APIKey;

@interface NetworkClient : NSObject

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block;

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block;

+(void)processFileUploadRequestWithURL:(NSString *)url 
                             andParams:(NSDictionary *)params 
                              fileData:(NSData *)fileData 
                              fileName:(NSString *)fileName
                              mimeType:(NSString *)mimeType 
                                 block:(void (^)(id obj))block;

+(void)handleNetworkErrorWithError:(NSError *)error;

+(void)handleNoAccessWithReason:(NSString *)reason;

@end 
```

网络客户端.m

```
/*
 NetworkClient.m

 Created by LJ Wilson on 2/3/12.
 Copyright (c) 2012 LJ Wilson. All rights reserved.
 License:

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 and associated documentation files (the "Software"), to deal in the Software without restriction, 
 including without limitation the rights to use, copy, modify, merge, publish, distribute, 
 sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is 
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or 
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT 
 NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, 
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT 
 OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#import "NetworkClient.h"
#import "AFHTTPClient.h"
#import "AFHTTPRequestOperation.h"
#import "SBJson.h"

NSString * const APIKey = @"APIKEY GOES HERE IF YOU WANT TO USE ONE";

@implementation NetworkClient

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                          block:(void (^)(id obj))block {

    [self processURLRequestWithURL:url andParams:params syncRequest:NO alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
                          block:(void (^)(id obj))block {
    [self processURLRequestWithURL:url andParams:params syncRequest:syncRequest alertUserOnFailure:NO block:^(id obj) {
        block(obj);
    }];
}

+(void)processURLRequestWithURL:(NSString *)url 
                      andParams:(NSDictionary *)params 
                    syncRequest:(BOOL)syncRequest
             alertUserOnFailure:(BOOL)alertUserOnFailure
                          block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"http://www.mydomain.com/mywebservice";
    }

    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:params];
    [dict setValue:APIKey forKey:@"APIKey"];

    NSDictionary *newParams = [[NSDictionary alloc] initWithDictionary:dict];

    NSURL *requestURL;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:requestURL];

    NSMutableURLRequest *theRequest = [httpClient requestWithMethod:@"POST" path:url parameters:newParams];

    __block NSString *responseString = [NSString stringWithString:@""];

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:theRequest];
    __weak AFHTTPRequestOperation *operation = _operation;

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);
    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
                                          if (alertUserOnFailure) {
                                              // Let the user know something went wrong
                                              [self handleNetworkErrorWithError:operation.error];
                                          }

                                      }];

    [operation start];

    if (syncRequest) {
        // Process the request syncronously
        [operation waitUntilFinished];
    } 

}

#pragma mark - processFileUpload
+(void)processFileUploadRequestWithURL:(NSString *)url 
                             andParams:(NSDictionary *)params 
                              fileData:(NSData *)fileData 
                              fileName:(NSString *)fileName
                              mimeType:(NSString *)mimeType 
                                 block:(void (^)(id obj))block {

    // Default url goes here, pass in a nil to use it
    if (url == nil) {
        url = @"http://www.mydomain.com/mywebservice";
    }

    NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:params];
    [dict setValue:APIKey forKey:@"APIKey"];

    NSDictionary *newParams = [[NSDictionary alloc] initWithDictionary:dict];
    AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:url]];  

    NSMutableURLRequest *myRequest = [client multipartFormRequestWithMethod:@"POST" 
                                                                       path:@"" 
                                                                 parameters:newParams 
                                                  constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        [formData appendPartWithFileData:fileData name:fileName fileName:fileName mimeType:mimeType];
    }];

    AFHTTPRequestOperation *_operation = [[AFHTTPRequestOperation alloc] initWithRequest:myRequest];
    __weak AFHTTPRequestOperation *operation = _operation;
    __block NSString *responseString = [NSString stringWithString:@""];

    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        responseString = [operation responseString];

        id retObj = [responseString JSONValue];

        // Check for invalid response (No Access)
        if ([retObj isKindOfClass:[NSDictionary class]]) {
            if ([[(NSDictionary *)retObj valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                block(nil);
                [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
            }
        } else if ([retObj isKindOfClass:[NSArray class]]) {
            if ([(NSArray *)retObj count] > 0) {
                NSDictionary *dict = [(NSArray *)retObj objectAtIndex:0];
                if ([[dict valueForKey:@"Message"] isEqualToString:@"No Access"]) {
                    block(nil);
                    [self handleNoAccessWithReason:[(NSDictionary *)retObj valueForKey:@"Reason"]];
                }
            }
        }
        block(retObj);

    } 
                                      failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                          NSLog(@"Failed with error = %@", [NSString stringWithFormat:@"[Error]:%@",error]);
                                          block(nil);
//                                          if (alertUserOnFailure) {
//                                              // Let the user know something went wrong
//                                              [self handleNetworkErrorWithError:operation.error];
//                                          }

                                      }];

    [operation start];

}

#pragma mark - Error and Access Handling
+(void)handleNetworkErrorWithError:(NSError *)error {
    NSString *errorString = [NSString stringWithFormat:@"[Error]:%@",error];

    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"Connection Error" 
                            message:errorString 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

+(void)handleNoAccessWithReason:(NSString *)reason {
    // Standard UIAlert Syntax
    UIAlertView *myAlert = [[UIAlertView alloc] 
                            initWithTitle:@"No Access" 
                            message:reason 
                            delegate:nil 
                            cancelButtonTitle:@"OK" 
                            otherButtonTitles:nil, nil];

    [myAlert show];

}

@end 
```

其中一些是特定于我所做的。我所有的 Web 服务都使用 APIKey 来增强安全性，并且它们都在处理任何请求之前进行安全检查。网络客户端将返回 NSDictionary 或 NSArray，具体取决于 Web 服务返回的内容（以 JSON 格式）。

要使用图像上传，您可以像这样在 VC 中调用它（根据需要使用尽可能多的参数。：

```
NSData *imageData = UIImagePNGRepresentation(myImage);
NSString *fileName = @"MyFileName.png";

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"Param1", @"Param1Name",
                            @"Param2", @"Param2Name",
                            @"Param3", @"Param3Name", 
                            nil];
// Uses default URL    
[NetworkClient processFileUploadRequestWithURL:nil 
                                     andParams:params 
                                      fileData:imageData 
                                      fileName:fileName
                                      mimeType:@"image/png" 
                                             block:^(id obj) {
    if ([obj isKindOfClass:[NSArray class]]) {
        // Successful upload, do other processing as needed
    }
}]; 
```

随意去掉你不需要的东西。只需保留版权声明即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:11:39.913

你可以试试这个：

```
 [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];  
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n",@"userId"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"%@",_userID] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# android - Android 和 SqlServer 2005

> ID：10618057
> 
> 赞同：0
> 
> 时间：2012-05-16T12:00:58.940
> 
> 标签：android, web-services

有什么方法可以从 Android 应用程序连接到 SQL Server 并使用 Web 服务执行/查询 SQL 语句？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:43:10.137

您只需通过网络连接访问服务器。我强烈建议您为 sql 语句编写服务器端脚本。然后，您可以通过 HttpClient 访问那些服务器端脚本提供的信息。下面的示例代码。

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet(new URI("www.example.com"));
HttpResponse response = client.execute(request);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent())); 
```

确保您在[Async Task](http://developer.android.com/reference/android/os/AsyncTask.html)中完成所有联网。

您还需要修改清单文件以获得 Internet 权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# hibernate - 将 Hibernate 与 MS ACCESS 2007 数据库一起使用（免费 JDBC 驱动程序）

> ID：10618065
> 
> 赞同：1
> 
> 时间：2012-05-16T12:01:24.093
> 
> 标签：hibernate, ms-access, jdbc, reverse-engineering

1.

我想在**MS Access 2007**数据库上使用 Eclipse 的**Hibernate**插件进行**逆向工程**操作。我被迫使用现有的 MS Access 2007 数据库。

 ****一个简单的解决方案是购买 HXTT。但我想用一个**免费的司机**来做我的工作。

所以我尝试应用这篇文章： http: [//www.programmingforfuture.com/2011/06/how-to-use-ms-access-with-hibernate.html](http://www.programmingforfuture.com/2011/06/how-to-use-ms-access-with-hibernate.html) （使用 SQL Server 方言和驱动程序 sun.jdbc .odbc.JdbcOdbcDriver)

不幸的是，我有一个错误，似乎没有人在互联网上：

`Exception while generating code`

 ````
Reason : 
org.hibernate.exception.GenericJDBCException: Error while reading primary key meta data for `c:/myaccessdb.mdb`.TableTest1 
````  `我曾尝试更改我的 MS Access DB 上的主键（删除所有主键）或尝试在只有一个没有主键的表的 MS ACCESS 上进行逆向工程，但我总是遇到问题。

2.

*我工作的目的是每天（每周）传输一个 Oracle 11g 数据库，其中包含来自现有数据库 MS ACCESS 2007 的数据。我想使用一个每周自动启动的程序（Hibernate EJB）Java 来进行数据传输。这是最好的解决方案吗？*

配置 ：

*   sun.jdbc.odbc.JdbcOdbcDriver v???
*   休眠 v3.4
*   蚀

ps：如果您是 HXTT 开发者或卖家，请多多关照我的帖子；）。通过让人们相信你的帮助来赚钱，这很糟糕！

* * *

一个解决方案是使用 Derby Client 驱动程序，作为帖子中的解决方案： [有谁知道 Hibernate 和 java 是否可以有效地与 Access 一起工作？](https://stackoverflow.com/questions/1154034/does-anyone-know-if-hibernate-and-java-will-work-effectively-with-access)

但是需要澄清 Rich Seller 的回答。您能否在不使用付费 HXTT 驱动程序但使用免费 Derby 驱动程序的情况下解释您的答案并解释您的配置（hibernate.cfg.xml、persistence.xml 以及您在属性 name="hibernate.connection.url" 中使用的 URL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:44:12.797

唯一可用的解决方案是像这样连接您的 JDBC 驱动程序：

```
//Load the JDBC driver, useless with a Type 4 JDBC driver
Class.forName(DRIVER_NAME);

//To add specific properties such as a username/password pair
Properties connectionProperties = new Properties();

//Try to establish a connection to the database
connection = DriverManager.getConnection(DATABASE_URL, connectionProperties); 
```

然后，不可能进行免费的逆向工程......唯一的方法是让entitiesManager 成为你美丽的双手。

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:36:17.563

根据[Hibernate 论坛](https://forum.hibernate.org/viewtopic.php?f=1&t=953517)，HXTT 驱动程序是目前唯一可用于将 Hibernate 与 MS Access 结合使用的解决方案。`****

# c++ - Win SSPI(Schannel) - 谁负责分配和清理内存？

> ID：10618072
> 
> 赞同：3
> 
> 时间：2012-05-16T12:01:32.607
> 
> 标签：c++, visual-studio, ssl, sspi, schannel

我想通过 Win SSPI(Schannel) 接口建立 TLS 连接。
我正处于加密 - 解密过程的阶段，我发现自己真的很困惑 -**谁负责管理内存分配**？：

1.  当我想向rempte方发送数据包时，我必须先通过调用EncryptMessage函数来加密数据，该函数包含4个缓冲区：缓冲区到标题，缓冲区到数据应该加密，缓冲区到拖车，和类型为 SECBUFFER_EMPTY 的第四个缓冲区（我必须说我不明白它的用途，但在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375390%28v=vs.85%29.aspx)中被写入添加它。）。现在调用 EncryptMessage 函数时，加密数据在哪里？它会覆盖我作为输入缓冲区发送的数据吗？如果是这样，如果加密数据与我发送的原始缓冲区的大小相比太大，会发生什么？EncrypteMessage 是否分配额外的内存并将其加入原始缓冲区？
2.  当我收到数据时，我还收到了一个加密字节流，我必须将加密数据发送到 DecryptMessage 函数。我的问题又是 - SSPI 在哪里找到解密的数据？如果解密数据比原始流短，谁负责释放分配的剩余字节？
3.  当我解密消息时，该函数有时会返回 SECBUFFER_EXTRA 类型的缓冲区。在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375412%28v=vs.85%29.aspx)中写了这个额外缓冲区的含义。再一次，我不完全明白谁在分配这个内存位置，它只是指向我发送的原始流中任何位置的指针吗？

我不确定是否只有熟悉 SSPI 的人才能回答我，也许是熟悉 Microsoft 实现的人。
我将不胜感激任何答案，甚至部分答案将向我解释 SSPI 管理的内部流程是什么。
谢谢！

# javascript - 使用 JQuery 删除欧元价值和货币格式

> ID：10618076
> 
> 赞同：3
> 
> 时间：2012-05-16T12:02:06.770
> 
> 标签：javascript, jquery, regex

我已经知道如何从标签中获取值，问题是它显示类似

`€123,453.28`

我需要删除欧元符号和逗号才能进行计算。

当然不去掉小数点

```
$(document).ready(function () {
            $("#TxtVatExcluded").keypress(function () {
                var invoicedAmmount = $("#MainContent_VehicleInformationControl_LblInvoicePriceValue").text();
                alert(invoicedAmmount);
                if (invoicedAmmount > 0) {
                    var ammountWithoutVat = $("#TxtVatExcluded").val();
                    var result = (ammountWithoutVat / invoicedAmmount) * 100;
                    $("#OutputLabel").html(result + " %");
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:04:06.740

```
"€123,453.28".replace(/[^\d.]/g,"") // Replace every non digit char or dot char
                                    // With an empty string. 
```

[**现场演示**](http://jsfiddle.net/ds9fx/)

所以在你的代码中：

```
var ammountWithoutVat = $("#TxtVatExcluded").val().replace(/[^\d.]/g,"");
var result = (pareseFloat(ammountWithoutVat, 10) / invoicedAmmount) * 100; 
```

# sharepoint - 颜色编码的 Sharepoint Enterprise Wiki 模板？

> ID：10618080
> 
> 赞同：1
> 
> 时间：2012-05-16T12:02:38.300
> 
> 标签：sharepoint, wiki, code-snippets, color-coding

我工作的公司（Web 开发）希望开始使用 Sharepoint Enterprise Wiki 来共享最佳实践和代码片段等。为了使其更具可读性和用户友好性，我们希望代码片段/代码示例采用颜色编码，就像它们在 Visual Studio 中一样。我对各位聪明人的问题是：

1.  您知道任何允许颜色编码代码片段的 Sharepoint Enterprise Wiki 模板吗？
2.  如果没有，您对如何在 Sharepoint Wiki 页面中启用颜色编码有什么好的建议吗？有没有好的插件可以使用？也许是一个 Web 部件。
3.  如果为代码片段获取 Sharepoint 颜色编码很困难，你能推荐一些帮助颜色代码片段的好网站吗？

您可能有任何建议将不胜感激。我试图在谷歌上查找信息，但还没有找到好的解决方案。

# iphone - findAndResignFirstResponder 不关闭键盘

> ID：10618083
> 
> 赞同：0
> 
> 时间：2012-05-16T12:02:47.343
> 
> 标签：iphone, keyboard

我`UITextFields`在 Interface Builder 中创建了 6 个。输入值并单击搜索按钮后，我需要从视图中关闭键盘。目前我正在使用“findAndResignFirstResponder”并为所有文本字段设置了代表，但是键盘没有关闭。

知道为什么这不起作用吗？有没有更好的方法来关闭键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:03:34.973

用这个

```
[self.view endEditing:YES]; 
```

这将从所有字段中退出键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:08:27.630

在 IBaction “搜索”

```
 [Field1 resignFirstResponder];
    [Field2 resignFirstResponder];
    [Field3 resignFirstResponder];
    [Field4 resignFirstResponder];
    [Field5 resignFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:10:26.113

尝试使用 [Field resignFirstResponder];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:15:04.593

您可以尝试将a**分配**`UITextField`给 the `FirstResponder`，然后将其**辞职**`FirstResponder`：

```
 [someField becomeFirstResponder];
 [someField resignFirstResponder]; 
```

# windows-phone-7 - 保存时文本框中没有文本

> ID：10618085
> 
> 赞同：0
> 
> 时间：2012-05-16T12:02:51.467
> 
> 标签：windows-phone-7, mvvm-light

看法：

```

     文本框 x:Name="feedback" Text="{Binding FeedbackText,Mode=TwoWay}"

```

视图模型：

```
public string FeedbackText
{
get
{
        return _feedbackTextProperty;
}

set
{
        _feedbackTextProperty = value;
    RaisePropertyChanged(FeedbackTextPropertyName);
}
} 
```

我正在使用可绑定的应用程序栏，但是当我单击按钮时，FeedbackText 属性中没有值。看起来好像“lostfocus”没有触发更新属性。

我正在使用 MVVM Light。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T04:04:20.033

我希望我不会太晚。在按下 ApplicationBarIconButton 时，我使用 Window Phone 8 保存 TextBox 文本时遇到了同样的问题。解决此问题的一种方法是更新焦点文本框的绑定源属性。您可以使用以下代码执行此操作：

```
var focusedObject = FocusManager.GetFocusedElement() as TextBox;

if (focusedObject != null)
{
    var binding = focusedObject.GetBindingExpression(TextBox.TextProperty);

    if (binding != null)
    {
        binding.UpdateSource();
    }
} 
```

最好的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:59:56.353

如果单击应用栏按钮时文本框中仍然有焦点，则文本框不会触发丢失焦点事件并导致绑定更新。

是的，这可能令人沮丧。:(

有各种解决方法，例如在这种情况下强制更新绑定或`Binding Helper`在[Coding4Fun Tools](http://coding4fun.codeplex.com/)中。

# jquery - 如何使用 JQuery 一键从浏览器下载图像？

> ID：10618086
> 
> 赞同：1
> 
> 时间：2012-05-16T12:02:53.827
> 
> 标签：jquery, html

我的代码：

```
<div>
    <a href="/images/test-201.gif" class="download">Download</a>
</div> 
```

我需要做的是当我点击下载时。它应该打开一个新窗口，例如保存为该图像。我需要使用 HTML 或 javascript 来执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:06:41.197

简而言之：您不能仅使用 javascript 和 html 来实现这一点。

如果没有服务器端语言（如 php），您将无法强制下载文件。服务器需要将图像连同正确的响应头一起发送给客户端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:10:53.973

简短的回答：这是不可能的。您必须将其发布到后端（服务器）并使用 header 从服务器响应它`Content-disposition: attachment`。

这也不能作为`AJAX`回应，所以你必须做类似的事情

```
document.location = 'download_image.php?file=test-201.gif'; 
```

如上所述，它使用正确的标头响应下载。

据我所知，这是唯一通过 javascript 触发下载的跨浏览器解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T10:22:20.383

您不能仅使用 javascript 来实现这一点。

如果没有服务器端语言（如 php），您将无法做到这一点。服务器需要将图像发送给客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T10:09:54.293

You can do this using an attribute known as download. Just add the attribute download="test image" to your anchor tag. "test image" can be any name you want to give to the image. Here is the syntax :

```
<a href="/images/test-201.gif" class="download" download="test image">Download</a> 
```

# php - 搜索过滤器：最少字符

> ID：10618091
> 
> 赞同：0
> 
> 时间：2012-05-16T12:03:32.680
> 
> 标签：php

这是我用于至少 3 个字符检查的简单代码。如果查询是全数字的，我想例外（代码还可以选择按大小写 ID 进行搜索，这些 ID 短于 3 个字符）。

```
<?php

if (strlen($_POST['Search'])>=3) {

include 'search.php';

} else {

$message = '3+ characters, please';

}

?> 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:05:49.503

用这个：

```
if (strlen($_POST['Search'])>=3 ||is_numeric($_POST['Search'])) {
  //Do stuff
} else
//do other stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:05:00.187

如果我理解正确：

```
<?php

if (is_numeric($_POST['Search']) || strlen($_POST['Search'])>=3) {

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:08:03.460

你应该这样写：

```
// make sure no notices are emitted if the input is not as expected
$search = isset($_POST['Search']) ? $_POST['Search'] : null;

if (!ctype_digit($search)) {
    // it's all digits
}
else if (strlen($search) < 3) {
    // error: less than three characters
}
else {
    // default case
} 
```

随意合并分支是默认情况，“所有数字”情况应转发到相同的代码。

**重要提示**：**仅** [`ctype_digit`](http://php.net/manual/en/function.ctype-digit.php)用于检查输入是否全为数字。[`is_numeric`](http://php.net/manual/en/function.is-numeric.php)也将返回`true`其他类型的输入：

> 数字字符串由可选的符号、任意位数、可选的小数部分和可选的指数部分组成。因此 +0123.45e6 是一个有效的数值。也允许使用十六进制表示法 (0xFF)，但只能没有符号、十进制和指数部分。

# php - 正则表达式：从特定的 xml 元素中获取某些 xml 属性

> ID：10618099
> 
> 赞同：0
> 
> 时间：2012-05-16T12:04:00.870
> 
> 标签：php, regex, xml

我有一个格式如下的文档：

```
<scheme attr1="lorem" attr2="ipsum" global-test="text goes here" global-attr2="second text goes here">
</scheme> 
```

我想使用正则表达式来提取所有匹配的属性`global-(.*)`。它也只能匹配“scheme”元素，因此`(global-([^=]*)="([^"]*)")+`不能使用简单的正则表达式 like。我尝试了以下正则表达式：

```
<scheme.*([\s]+global-([^=]*)="([^"]*)")+ 
```

但这只会匹配“global-attr2”，并将其他全局属性视为 .* 选择器的一部分。在 .* 上设置 * 选择器似乎也无济于事。

而且我知道使用正则表达式从 XML 文档中获取数据并不是一个好习惯，但是这个脚本是用于预处理器的。它在解析 XML 之前对其进行修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:24:41.987

我相信 (...)+ 构造不像您期望的那样工作。它将破坏您以前的匹配项并仅保存最后一个匹配项，而不是扩展匹配组数组。

尝试对 (.)* 进行匹配，看看它是否适用于您的 php 设置。

我试过

```
<scheme(.*?[\s]+global-([^=]*)="([^"]*)")+ 
```

如果 (...)+ 表现不同，我认为这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T23:42:48.603

[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)将匹配所有内容并存储所有内容。所以首先匹配“<scheme”，如果匹配，然后运行`preg_match_all`匹配类似的东西

```
/global-(.*?)=(\w+)/ 
```

然后从`matches[0]`,`matches[1]`等中提取

# c# - 我有时无法从 Silverlight 中的方法中获取方法名称

> ID：10618100
> 
> 赞同：1
> 
> 时间：2012-05-16T12:04:01.790
> 
> 标签：c#, silverlight, reflection, stack-frame, getmethod

我有这种从 Silverlight 客户端记录错误的方法：

```
[MethodImpl(MethodImplOptions.NoInlining)]
public static bool ErrorHandler(Exception error, bool showError = true)
{
    string callingMethod = new StackFrame(1).GetMethod().Name;

    //write log - call webservice
    //show error that some error happened if showError is true
} 
```

我的问题是，当我运行应用程序并调用一个引发异常的方法时，它会记录如下：

```
<ThrowExceptionMethod>b__72: test 
```

但是当具有正常（非开发人员运行时）的人运行此应用程序并引发异常时，它会记录如下：

```
b__72: test 
```

我只是猜测这是由于 SDK Silverlight 运行时所致。很难说，因为我的大多数同事都安装了 Silverlight SDK...有人可以确认这是否是导致此异常的原因。

**解决了！**

这不是 SDK 运行时的原因，只是因为我调用了匿名方法。我在其中添加了这行代码：

```
var listStackFrame = new List<StackFrame>();

for (int i = 1; i < 20; i++)
{
    listStackFrame.Add(new StackFrame(i));
}

string callingMethod = string.Empty; //new StackFrame(1).GetMethod().Name;

foreach (var item in listStackFrame
    .Where(m => m != null && m.GetMethod() != null && !string.IsNullOrEmpty(m.GetMethod().Name) && m.GetMethod().Name.Contains("__")))
{
    callingMethod += item.GetMethod().Name + "->";
} 
```

我不担心这会占用多少资源，因为毕竟发生了异常，用户将停止他正在做的任何事情并联系支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:06:52.843

这通常是因为您正在执行的实际上是一个收益迭代器或匿名委托委托（可能还有其他我遗漏的情况）。发生的事情是编译器实际上为大多数语法糖创建了新方法甚至类。

我认为您可以迭代所有先前的方法调用，以查找第一个没有 [CompilerGenerated] 属性的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:21:41.257

这对于开发机器和普通机器之间的区别是有意义的：

> StackFrame 信息将在 Debug 构建配置中提供最丰富的信息。默认情况下，Debug 版本包含调试符号，而 Release 版本不包含。调试符号包含用于构建 StackFrame 对象的大部分文件、方法名称、行号和列信息。

这是来自[StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe.aspx)的文档。

# java - 在 ANT Java 任务中读取 shell 脚本的输出

> ID：10618104
> 
> 赞同：0
> 
> 时间：2012-05-16T12:04:08.347
> 
> 标签：java, ant, installation

我会很感激任何帮助。

我创建了收集服务器 IP 的 shell 脚本 - weblogic 集群的成员，以在列表中的所有服务器上分发一些文件。

我为分发准备了一个特殊的 ANT 任务，并从另一个 shell 脚本调用此任务。每次我调用 ANT 任务时，我都会传递下一个服务器 IP 以在其上复制文件。这种行为带来了安装结构。

现在我想改进这种行为。我想在 ANT 中将 shell 文件的输出读取到某个列表，我可以从 ANT 任务中循环遍历这些列表。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:12:56.520

您可以简单地使用ant 任务的`outputproperty`属性。`exec`有关完整文档，请参阅[http://ant.apache.org/manual/Tasks/exec.html](http://ant.apache.org/manual/Tasks/exec.html)。有了这个，您还可以处理标准错误输出。

一旦脚本输出位于 ant 属性中，您就可以使用[ant contrib](http://ant-contrib.sourceforge.net/) foreach task [foreach task](http://ant-contrib.sourceforge.net/tasks/tasks/foreach.html)对其进行迭代。

# xpages - 从 8.5.1 和 8.5.3 中的多值字段获取值

> ID：10618106
> 
> 赞同：1
> 
> 时间：2012-05-16T12:04:19.503
> 
> 标签：xpages, xpages-ssjs

最近我们将服务器从 8.5.1 升级到 8.5.3，但遇到了一个问题。假设您在 XPages 中有一个多值字段，如下所示：

```
<xp:inputText id="inputText1" multipleTrim="true">
    <xp:this.multipleSeparator><![CDATA[#{javascript:"\n";}]]></xp:this.multipleSeparator>
</xp:inputText> 
```

在 8.5.1 中，当我们编写`getComponent("inputText1").getValue()`它时，它曾经返回一个字符串，其中所有值都用逗号分隔。所以我们曾经这样做 - `@Explode(getComponent("inputText1").getValue(), ",")`。

但是现在在 8.5.3 中`getComponent("inputText1").getValue()`返回一个包含多个值的实际数组，因为我们现有的代码失败了。

当前的行为对我来说似乎是正确的，但它会在未来的版本中再次改变吗？他们是否可以在不修改任何代码的情况下修改此行为（因为我们必须进行大量修改）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:17:30.360

我不知道确切的版本/修复包，但自 8.5.2 以来，此错误已修复。因为这个，我玩得很开心……

**编辑：** 我认为是这个 SPR：
[http ://www-10.lotus.com/ldd/fixlist.nsf/Public/A3CE2F9EF1B74D728525778A002810E6?OpenDocument](http://www-10.lotus.com/ldd/fixlist.nsf/Public/A3CE2F9EF1B74D728525778A002810E6?OpenDocument)

**编辑 2：**
这里有一些其他潜在的问题：
1.[将 8.5.2 XPages 应用程序移动到 8.5.3](https://stackoverflow.com/questions/9340733/what-are-the-pitfalls-in-when-moving-a-8-5-2-xpages-application-to-8-5-3)
2\. *XSP.partialRefreshGet()*需要一个对象，否则它将不再工作：

```
XSP.partialRefreshGet( '#{id:elementId}' ); // does NOT work in 8.5.3
XSP.partialRefreshGet( '#{id:elementId}' , {} ); // works in 8.5.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:52:17.110

避免将来出现问题的一种方法是编写自己的自定义转换器。

例如

getAsObject: 返回值.split('\n');

getAsString: return value.join('\n');

# php - YII 可能导入限制问题/从其他模块导入模型

> ID：10618107
> 
> 赞同：0
> 
> 时间：2012-05-16T12:04:30.560
> 
> 标签：php, yii

我正在 YII 做一个项目。我计划开发基于站点的模块。一切正常，但今天我创建了一个模块并将其导入主模块。现在，当我在本地主机上访问该站点时，浏览器会显示该`The connection was reset`页面。这是代码

用户模型`/modules/users/models/Users.php`

```
public function relations()
    {
        Yii::import('application.modules.companies.models.Company');
        Yii::import('application.modules.clients.models.Clients');
        Yii::import('application.modules.events.models.Events');
        Yii::import('application.modules.notifications.models.UserNotifications');
        Yii::import('application.modules.tasks.models.UserTasks');

        return array(
...
            'contacts' => array(self::HAS_MANY, 'UserLeeds', 'user_id'),
            'userNotifications' => array(self::HAS_MANY, 'UserNotifications', 'user_id'),
            'userTasks' => array(self::HAS_MANY, 'UserTasks', 'user_id'),
            'userRole' => array(self::BELONGS_TO, 'Roles', 'user_role'),
            'userCompany' => array(self::BELONGS_TO, 'Company', 'user_company_id'),
            'userClient' => array(self::BELONGS_TO, 'Clients', 'user_client_id'),
        );
    } 
```

通知模型`/modules/notifications/models/UserNotifications.php`

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'notificationType' => array(self::BELONGS_TO, 'Notifications', 'notification_type'),
            'user' => array(self::BELONGS_TO, 'Users', 'user_id'),
        );
    } 
```

如果在用户模型中我注释掉该`Yii::import('application.modules.notifications.models.UserNotifications');`行一切正常。

知道我在这里缺少什么。

***更新***

好吧，刚刚发现如果我注释掉任何导入的模块，它就可以正常工作了..

这是否意味着 YII 将模块/模型对其他模块/模型的导入限制为仅 4 个？

问候

# regex - 日期和时间验证的正则表达式

> ID：10618109
> 
> 赞同：0
> 
> 时间：2012-05-16T12:04:36.693
> 
> 标签：regex, c#-4.0

我需要正则表达式来验证日期时间为“MM/DD/YYYY HH:MM”，其中时间为 24 小时格式。

谁能帮我解决这个问题。

感谢您分享您的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:15:09.280

您可以使用具有给定日期范围的 RangeValidator 或 CustomValidator，然后从中使用 DateTime.Parse

# android - Osmdroid 示例不起作用

> ID：10618113
> 
> 赞同：1
> 
> 时间：2012-05-16T12:04:46.993
> 
> 标签：android, openstreetmap, osmdroid

我想使用 osmdroid 制作一个简单的 android 应用程序，它应该只显示一张地图。我也在项目中包含了 osmdroid-android-3.0.8.jar 和 slf4j-android-1.5.8.jar 。

*代码：*

```
package osmdemo.demo;

import org.osmdroid.tileprovider.tilesource.TileSourceFactory;
import org.osmdroid.util.GeoPoint;
import org.osmdroid.views.MapController;
import org.osmdroid.views.MapView;

import android.app.Activity;
import android.os.Bundle;

public class Osm extends Activity {

private MapView         mMapView;
private MapController   mMapController;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
           setContentView(R.layout.main);
       mMapView = (MapView) findViewById(R.id.mapview);
       mMapView.setTileSource(TileSourceFactory.MAPNIK);
       mMapView.setBuiltInZoomControls(true);
       mMapController = mMapView.getController();
       mMapController.setZoom(13);
       GeoPoint gPt = new GeoPoint(51500000, -150000);
       //Centre map near to Hyde Park Corner, London
       mMapController.setCenter(gPt);

   }
} 
```

*main.xml 文件：*

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <org.osmdroid.views.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:id="@+id/mapview"
        ></org.osmdroid.views.MapView>

</LinearLayout> 
```

*清单文件：*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="osmdemo.demo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<uses-feature android:name="android.hardware.location.network" />
<uses-feature android:name="android.hardware.location.gps" />   
<uses-feature android:name="android.hardware.wifi" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Osm"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

*错误：*

```
05-16 17:29:32.612: W/dalvikvm(361): threadid=1: thread exiting with uncaught exception      (group=0x40015560)
05-16 17:29:32.702: E/AndroidRuntime(361): FATAL EXCEPTION: main
05-16 17:29:32.702: E/AndroidRuntime(361): java.lang.RuntimeException: Unable to start    activity ComponentInfo{osmdemo.demo/osmdemo.demo.Osm}: android.view.InflateException: Binary XML file line #7: Error inflating class org.osmdroid.views.MapView
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.os.Looper.loop(Looper.java:123)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-16 17:29:32.702: E/AndroidRuntime(361):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 17:29:32.702: E/AndroidRuntime(361):  at java.lang.reflect.Method.invoke(Method.java:507)
05-16 17:29:32.702: E/AndroidRuntime(361):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-16 17:29:32.702: E/AndroidRuntime(361):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-16 17:29:32.702: E/AndroidRuntime(361):  at dalvik.system.NativeStart.main(Native Method)
05-16 17:29:32.702: E/AndroidRuntime(361): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class org.osmdroid.views.MapView
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-16 17:29:32.702: E/AndroidRuntime(361):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.Activity.setContentView(Activity.java:1657)
05-16 17:29:32.702: E/AndroidRuntime(361):  at osmdemo.demo.Osm.onCreate(Osm.java:19)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-16 17:29:32.702: E/AndroidRuntime(361):  ... 11 more
05-16 17:29:32.702: E/AndroidRuntime(361): Caused by: java.lang.ClassNotFoundException: org.osmdroid.views.MapView in loader dalvik.system.PathClassLoader[/data/app/osmdemo.demo-1.apk]
05-16 17:29:32.702: E/AndroidRuntime(361):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-16 17:29:32.702: E/AndroidRuntime(361):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-16 17:29:32.702: E/AndroidRuntime(361):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.createView(LayoutInflater.java:471)
05-16 17:29:32.702: E/AndroidRuntime(361):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-16 17:29:32.702: E/AndroidRuntime(361):  ... 20 more 
```

谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T05:23:16.857

将 slf4j-android.jar 和 osmdroid-android.jar 放到项目中的文件夹 'libs' 可以解决问题。我测试过

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T07:39:48.273

您需要在清单文件中添加这样的额外权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# xml - 如何使用 XSLT 修改 XML Soap 响应？

> ID：10618119
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:09.527
> 
> 标签：xml, xslt, soap

我有一个相对简单的 Soap 响应消息 XML，我想用 XSLT 对其进行修改。

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
    xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
    xmlns:z="http://some.url/WS/">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
      <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
      </xsl:copy>
    </xsl:template>

    <xsl:variable name="Method" select="name(//soap:Body/*)" />

    <xsl:template match="//soap:Body/*" >
      <xsl:choose>
        <xsl:when test="$Method='Method1Response'">
          <xsl:call-template name="Method1" />
        </xsl:when>
        <xsl:otherwise>

        </xsl:otherwise>
      </xsl:choose>      
    </xsl:template>

      <xsl:template name="Method1" match="//soap:Body/z:Method1Response/z:Method1Result/z:Errors" />

</xsl:stylesheet> 
```

示例 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">
<env:Header xmlns:env="http://www.w3.org/2003/05/soap-envelope">
  <wsa:Action></wsa:Action>
  <wsa:MessageID></wsa:MessageID>
  <wsa:RelatesTo></wsa:RelatesTo>
  <wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
</env:Header>
  <soap:Body>
    <Method1Response xmlns="http://some.url/WS/">
      <Method1Result>
        <Msg>blah blah</Msg>
        <Errors>
          <ErrorItem>error 1</ErrorItem>
          <ErrorItem>error 2</ErrorItem>
        </Errors>
        <Data />
      </Method1Result>
    </Method1Response>
  </soap:Body>
</soap:Envelope> 
```

这个想法是从 Method1Result 下删除错误，如果 Method1 = 特定值。如果没有，请保持原样。我目前拥有的，它没有做。谢谢。

进一步澄清的另一个编辑：我希望为属于不同 Web 服务调用的多个 XML 文件创建一个 XSLT 文件。这意味着 Method1 可以有许多不同的值，例如：GetMeal、GetWindow、GetHandle、GetWeatherReport……我希望为同一个 XSLT 中的每个值创建一个“案例”，以便故意“破坏”用于测试目的的预期 XML。每次我都会删除一个不同的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:14:57.500

问题是匹配的模板**`//soap:Body/*`**调用了一个命名模板，它本身不输出任何东西。这导致**soap:Body**下的所有元素都被忽略。

由于您已经有一个模板来匹配您要删除的元素，您可以删除与**soap:Body**匹配的模板，您应该会发现它会按预期工作。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" 
    xmlns:soap="http://www.w3.org/2003/05/soap-envelope" 
    xmlns:z="http://some.url/WS/"> 
    <xsl:output method="xml" indent="yes"/> 

    <xsl:template match="@* | node()"> 
      <xsl:copy> 
        <xsl:apply-templates select="@* | node()"/> 
      </xsl:copy> 
    </xsl:template> 

    <xsl:template match="//soap:Body/z:Method1Response/z:Method1Result/z:Errors" /> 
</xsl:stylesheet> 
```

当这应用于您的示例 XML 时，将输出以下内容

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">
   <env:Header xmlns:env="http://www.w3.org/2003/05/soap-envelope">
      <wsa:Action/>
      <wsa:MessageID/>
      <wsa:RelatesTo/>
      <wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
   </env:Header>
   <soap:Body>
      <Method1Response xmlns="http://some.url/WS/">
         <Method1Result>
            <Msg>blah blah</Msg>
            <Data/>
         </Method1Result>
      </Method1Response>
   </soap:Body>
</soap:Envelope> 
```

编辑：没有理由你不能有更多匹配的模板来处理你可能会得到的其他方法响应。例如....

```
<xsl:template match="//soap:Body/z:GetMealResponse/z:GetMealResult/z:Leftovers" />
<xsl:template match="//soap:Body/z:Method1Response/z:Method1Result/z:Errors" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:26:23.437

从您的样式表示例中：

```
<xsl:variable name="Method" select="name(//soap:Body/*)" />

<xsl:template match="//soap:Body/*" >
  <xsl:choose>
    <xsl:when test="$Method='Method1Response'">
      <xsl:call-template name="Method1" /> 
```

摆脱变量`$Method`，你不需要它。

注意*匹配模式*（如`match="//soap:Body/*"`，这很尴尬），与 *search 表达式（如`select="name(//soap:Body/*)"`）相比，通常相当简单，不需要 search-the-whole-doc 运算符（因此您可以简化为`match="soap:Body/*"`）。

无需使用显式条件逻辑，只需提供一个与您的特殊情况匹配的模板，并确保它具有比其他候选模板更高的优先级，以便匹配：

```
<xsl:template match="z:Method1Response"/><!-- suppressed --> 
```

或明确提高优先级：

```
<xsl:template match="z:Method1Response" priority="2"/> 
```

或更具体地说，对于包含的错误：

```
<xsl:template match="z:Method1Response[z:Method1Result/z:Errors]"/> 
```

# c# - 保持缓存中的对象不变

> ID：10618120
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:14.727
> 
> 标签：c#, asp.net, xml, caching

这段代码“完美”地工作。创建一个 XDocument，将其放入缓存中，并在下一轮检索它。

但是我希望缓存中的对象不受标记位置之后所做的更改的影响，我在其中添加了一些仅在此会话中有效的元素。

缓存中的对象与页面上的所有用户相关，因此在缓存生命周期内只应生成/更改一次。

我可以从缓存中克隆它或将其存储为我猜想的字符串（不是引用类型）并丢失到新的 XDocument 中，但是最温和的方法是什么？似乎有点矫枉过正，当我可以按原样缓存 XDocument 时......

提前致谢，

斯蒂恩

```
{
            string cachekey = "categories";
            var cateGoryDoc = HttpRuntime.Cache.Get(cachekey) as XDocument;

            if (cateGoryDoc == null)
            {
                XDocument doc = XDocument.Parse(this.ProductList1.getXML());
                IEnumerable<XElement> mainCats =
                    from Category1 in doc.Descendants("product").Descendants("category") select Category1;
                var cDoc = new XDocument(new XDeclaration("1.0", "utf-8", null), new XElement("root"));
                cDoc.Root.Add(mainCats);
                cateGoryDoc = cDoc;
                HttpRuntime.Cache.Insert(cachekey, cDoc, null,
                                             DateTime.Now.AddMinutes(10),
                                             TimeSpan.Zero);
            }

            // I DO NOT WANT TO CHANGE THE DOC IN CACHE!!
            if (HttpContext.Current.Request["tCats"] != null)
            {
                string[] tCats = HttpContext.Current.Request["tCats"].Split(Convert.ToChar(","));

                foreach (string tCat in tCats)
                {
                    cateGoryDoc.Root.Add(new XElement("selectedCategory", tCat));
                }
            }

            this.catecoryXML.DocumentContent = cateGoryDoc.ToString();
            this.catecoryXML.TransformSource = "/XSLTFile1.xslt";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:08:37.753

创建一个新的 XDocument。将内容从您从缓存中检索到的内容复制到您创建的内容中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:10:28.230

克隆它是要走的路。

您可以按如下方式执行此操作：

```
XDocument cachedDocument = ... get it from the cache ...
XDocument clone = new XDocument(cachedDocument);
... modify the clone 
```

# spring - 如何在反序列化时重新注入瞬态 @ManagedProperty？

> ID：10618123
> 
> 赞同：7
> 
> 时间：2012-05-16T12:05:29.140
> 
> 标签：spring, jsf-2, dependency-injection

我正在使用 Spring 和 JSF 2 创建一个 Web 应用程序。业务对象保存在 Spring 容器中，我使用 @ManagedProperty 将它们注入托管 Bean，如下所示：

```
@ManagedBean
@ViewScoped
public class SomeMB implements Serializable {
    private static final long serialVersionUID = 1L;

    @Getter @Setter
    @ManagedProperty("#{someService}")
    private SomeService someService;
    // ... 
```

问题是，我不断从 Spring （ *ServiceLocatorFactoryBean*`NotSerializableException` ）中获取一个类，它正被*SomeService* bean 使用。

 **如果我成功了`transient`，我怎么能在反序列化后重新注入它？

或者，还有什么其他方法可以解决这个问题？

我一直在阅读其他几个类似的问题，但找不到任何与此问题完全相关的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T20:23:22.667

不是通过`@ManagedProperty`注释中的 EL 注入 Spring bean（在 ManagedBean 初始化时执行），而是获取在运行时评估 EL 的 bean。

使用这种方法，JSF bean 应该是这样的：

```
@ManagedBean
@ViewScoped
public class SomeMB implements Serializable {
    private static final long serialVersionUID = 1L;

    private static SomeService someService() {
        return SpringJSFUtil.getBean("someService");
    }
    // ... 
```

以及通过 EL 获取 bean的实用程序类*SpringJSFUtil.java*：

```
import javax.faces.context.FacesContext;

public class SpringJSFUtil {

    public static <T> T getBean(String beanName) {
        if (beanName == null) {
            return null;
        }
        return getValue("#{" + beanName + "}");
    }

    @SuppressWarnings("unchecked")
    private static <T> T getValue(String expression) {
        FacesContext context = FacesContext.getCurrentInstance();
        return (T) context.getApplication().evaluateExpressionGet(context,
                expression, Object.class);
    }
} 
```

这消除了 Spring bean 属性（以进行更多 EL 评估为代价），从而避免了首先拥有该属性的所有序列化问题。

**同样的方法，使用[OmniFaces](http://omnifaces.org)：**

在我的实际代码中，我使用[OmniFaces](http://omnifaces.org)提供的[实用程序类](http://showcase.omnifaces.org/utils/Faces)`evaluateExpressionGet(String expression)`的方法。所以，对于那些也使用它的人来说，这就是我的代码的真实样子：

```
import static org.omnifaces.util.Faces.evaluateExpressionGet;

@ManagedBean
@ViewScoped
public class SomeMB implements Serializable {
    private static final long serialVersionUID = 1L;

    private static SomeService someService() {
        return evaluateExpressionGet("#{someService}");
    }
    // ... 
```

[请注意，这里的方法获取完整的 EL（“#{expression}”），而不仅仅是 Spring bean 名称（或者您会得到 ClassCastException）。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:02:47.470

在 Spring @Service 上尝试 @Scope(value = BeanDefinition.SCOPE_SINGLETON, proxyMode = ScopedProxyMode.INTERFACES)。这应该将一个可序列化的代理对象注入到您的托管 bean 中，该对象将在反序列化后访问时重新定位服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T19:03:33.977

对于那些要关注的人 - 我在注入 ResourceBundle 时遇到了类似的问题。使用 BalusC 的部分答案，我做了以下事情：

```
@ManagedProperty(value="#{myBundle}")
private transient ResourceBundle myBundle;

private Object readResolve() {
    myBundle = FacesContext.getCurrentInstance().getApplication()
        .evaluateExpressionGet(FacesContext.getCurrentInstance(), "#{myBundle}",
        ResourceBundle.class);
    return this;
} 
```

这样，只有在反序列化托管 bean 时才评估 EL。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-06T15:13:08.323

请记住 Spring 手册中的这一点（[链接到 spring](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-constructor-injection)）：

> 基于构造函数还是基于 setter 的 DI？
> 
> 由于您可以混合使用基于构造函数的 DI 和基于 Setter 的 DI，因此将构造函数参数用于强制依赖项并将 setter 用于可选依赖项是一个很好的经验法则。请注意，在 setter 上使用 @Required 注释可用于使 setter 成为必需的依赖项。
> 
> Spring 团队通常提倡 setter 注入，因为大量的构造函数参数会变得笨拙，尤其是当属性是可选的时。Setter 方法还使该类的对象可以在以后重新配置或重新注入。通过 JMX MBean 进行管理是一个引人注目的用例。
> 
> 一些纯粹主义者喜欢基于构造函数的注入。提供所有对象依赖意味着对象总是以完全初始化的状态返回给客户端（调用）代码。缺点是对象变得不太适合重新配置和重新注入。
> 
> 使用对特定类最有意义的 DI。有时，在处理您没有源代码的第三方类时，会为您做出选择。遗留类可能不会公开任何 setter 方法，因此构造函数注入是唯一可用的 DI。**

# windows-phone-7 - 关闭 WP7 中数据绑定项目的上下文菜单

> ID：10618125
> 
> 赞同：2
> 
> 时间：2012-05-16T12:05:31.883
> 
> 标签：windows-phone-7, contextmenu, datatemplate

我的 WP7 中有一个列表框，它使用下面的内容`DataTemplete`来显示列表项

```
 <DataTemplate x:Key="MetaDataTemplate">
            <Grid Width="440" Margin="4,12,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="64"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <toolkit:ContextMenuService.ContextMenu>
                    <toolkit:ContextMenu>
                        <toolkit:MenuItem Header="download" Visibility="{Binding DownloadVisible}" Command="{Binding Download}"/>
                        <toolkit:MenuItem Header="get link" Command="{Binding GetLink}"/>
                        <toolkit:MenuItem Header="delete" Command="{Binding Delete}"/>
                    </toolkit:ContextMenu>
                </toolkit:ContextMenuService.ContextMenu>                    
                <Image Height="64" Width="64" Source="{Binding Thumb}" Stretch="UniformToFill"  />
                <TextBlock Text="{Binding MetaData.Name, Mode=OneWay}" VerticalAlignment="Center" Margin="12,0,0,0" 
                           Style="{StaticResource MetaDataHeaderStyle}" Grid.Column="1" />
            </Grid>
        </DataTemplate> 
```

定义上下文菜单数据模板使得在按下后退按钮时关闭菜单是不可能的！有没有人遇到过这个问题？你是怎么解决的？

我在互联网上搜索了解决方案，但找不到。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:09:50.700

一种方法是`ContextMenu`在后面的代码中有一个变量，并`Opened`在模板中为 ContextMenu 的事件提供一个事件处理程序。

```
<toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu Opened="ContextMenu_Opened">
                            <toolkit:MenuItem Header="stuff">

                            </toolkit:MenuItem>
                            <toolkit:MenuItem Header="more stuff">

                            </toolkit:MenuItem>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu> 
```

在`Opened`事件处理程序中，将 ContextMenu 变量设置为该实例（即发送者）。

```
private void ContextMenu_Opened(object sender, RoutedEventArgs e)
    {
        menu = sender as ContextMenu;
    } 
```

最后，重写 OnBackKeyPress，这样如果变量不为 null，并且菜单已打开，则关闭菜单并取消返回事件。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        if (menu != null && menu.IsOpen)
        {
            menu.IsOpen = false;
            e.Cancel = true;
        }

        base.OnBackKeyPress(e);

    } 
```

应该这样做！如果您有任何问题，或者需要我粘贴完整的代码，请告诉我。

# apache-flex - flex：文件列表

> ID：10618126
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:32.107
> 
> 标签：apache-flex, file, list, mobile

我正在使用 Flash Builder 4.6 制作一个 Flex 移动应用程序，我对想要实现的功能有疑问。

我有一个声明：

```
<s:HTTPService id="getXMLFile" fault="trace('No CCR found!')" result="getPatient(event)"
                       resultFormat="object" url="assets/CCR1.xml"/> 
```

但这仅指向一个文件，并且必须输入。现在已经如何更改 url 并再次执行请求。

```
getXMLFile.url = "assets/CCR2.xml";
getXMLFile.send(); 
```

但我希望有某种功能来检查“资产”包中的所有文件以及每个文件的此代码部分。所以我想要这样的东西：

```
for(var file:string in assets) {
getXMLFile.url = "assets/" + file;
getXMLFile.send();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:41:03.333

```
<fx:Script>
        <![CDATA[
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;

        //Create one xml having all URL, which you can parse on Flex side. Collect all URL in Array (ex:- fileArray), 
        //than you can loop it. You can call parseXML on creationComplete of your application.
        private var fileArray:Array = new Array();
        private var count:int = 0;

        //Collect all URL in this fileArray.
        private function parseXML():void
        {
            //parse XML and puch URL in fileArray
            // xmlLength var is xml length.
            var xmlLength:int;
            for(var i:int;i<xmlLength ;i++)
            {
                var URL:String = "";
                //URL = parse Value from XML; 
                fileArray.push(URL);
            }
            sendRequest();
        }

        private function sendRequest():void
        {
            getXMLFile.url = fileArray (count);
            getXMLFile.send();
        }

        private function getPatient(event:ResultEvent):void
        {
            //If Success request for Next Patient
            requestForNextPatient();
        }

        private function faultHandler(event:FaultEvent):void
        {
            //If fault request for Next Patient 
            requestForNextPatient();
        }

        private function requestForNextPatient():void
        {
            //Request for Next Patient
            count++;
            if(count > fileArray.length)
                sendRequest():
        }

        ]]>
    </fx:Script>

    <s:HTTPService id="getXMLFile" fault="faultHandler(event)" result="getPatient(event)" resultFormat="object" /> 
```

这可能会帮助你......

# c# - MVC3 - 未经授权的用户试用后，登录页面上的 ajax 不起作用，但可以正常工作

> ID：10618130
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:41.620
> 
> 标签：c#, .net, ajax, asp.net-mvc-3, authorization

我在 asp .net 上创建了一个 MVC3 项目，其中用户登录使用 ajax。它正常工作，用户可以在 ajax 表单身份验证（登录按钮触发 ajax 帖子）后使用用户的用户名和传递信息进入授权页面。

但是，如果用户试图通过将直接地址（如：“http://localhost:12799/Anasayfa/Index”）写入地址栏并在身份验证前按 Enter 进入此未经授权的页面，他会点击授权墙并返回，并且在浏览器的地址栏中出现“http://localhost:12799/Giris/Index?ReturnUrl=%2fAnasayfa%2fIndex”这样的url，在这种情况下，当用户尝试正常登录时，ajax登录不起作用，登录按钮可以不开火ajax帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:12:30.960

我找到了解决方案，

我的ajax函数是这样的：`$.post('Giris/GirisGecerliMi', kullanici, girisAjaxReturn);`

当地址栏`http://localhost:12799`与真实网址一起使用时。但是在地址栏写入`http://localhost:12799/Giris/Index?ReturnUrl=%2fAnasayfa%2fIndex`ajax 之后尝试去一个错误的 url。

经过一番搜索，我看到了我的错误，我应该写成：`$.post('/Giris/GirisGecerliMi', kullanici, girisAjaxReturn);`只有一个“/”差异解决了这个问题。很抱歉占用您的时间。

# c# - 适用于 Windows Phone 的文本转语音引擎

> ID：10618136
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:48.770
> 
> 标签：c#, windows-phone-7, text-to-speech

这些天我开始为 Windows Phone 编程。所以，我找不到 TTS（文本到语音）引擎。有人知道这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T05:14:58.430

我最近遇到了这个。[用于 Windows Phone 的夏威夷项目 SDK](http://www.ginktage.com/2012/08/project-hawaii-sdk-for-windows-phone/)。它提到它有文字转语音服务。不过必须试一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T03:25:43.303

我的图书馆进行文字转语音。 [点击这里](http://ttsforwindowsphone7.codeplex.com)

我还没有实现语音到文本，但可能很快就会实现。

# java - java.lang.IllegalStateException：getAttributeNames：会话已经失效

> ID：10618138
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:52.350
> 
> 标签：java, struts

得到错误：

```
java.lang.IllegalStateException: getAttributeNames: Session already invalidated.After logout from parent window. 
```

LogOutUserAction.java

```
public String execute() throws Exception { 
          System.out.println("inside :: LogOutUserAction------");
         //HttpServletRequest request = null;
          HttpServletRequest request = ServletActionContext.getRequest();
         HttpSession session =request.getSession(true);
         session.removeAttribute("loggedInUser");
        request.getSession(false).invalidate();  
      session=null;  
      return "logout";
      } 
```

登录拦截器

```
public String intercept(ActionInvocation invocation) throws Exception {

        final ActionContext context = invocation.getInvocationContext();
        HttpServletRequest request = (HttpServletRequest) context
                .get(HTTP_REQUEST);     

        HttpServletResponse response = (HttpServletResponse) context
        .get(HTTP_RESPONSE);

        HttpSession session = request.getSession(true);
        response.setHeader("Cache-Control", "no-store");
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires", 0);
       /*user logged out from the parent window then set the message
        for click on the popup window*/
        if(session == null){
            System.out.println("set the attribute");
               request.setAttribute("SessionExpired","Your have already logged out");   
             }  

        Object user = session.getAttribute(USER_HANDLE);
        String loginOut = request.getParameter(LOGIN_OUT);  
        System.out.println("loginOut---->"+loginOut);
        if (user == null) {
            // The user has not logged in yet.
            System.out.println(" inside if ");
            // Is the user attempting to log in right now?
            String loginAttempt = request.getParameter(LOGIN_ATTEMPT);  
            /* The user is attempting to log in. */
            if (!StringUtils.isBlank(loginAttempt)) {               
                return invocation.invoke();
            }
            return "login";
        } else {            
            return invocation.invoke();
        }

    } 
```

登录.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sx" uri="/struts-dojo-tags" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%
  if (request.getAttribute("SessionExpired")!= null)
    {
      System.out.println("After Session invalid");

     }
%>

    <html>
    <head>
    <title>Login</title>
    <sx:head cache="true"/>
    <script type="text/javascript">

    </script>
    <script type="text/javascript" language="javascript" src="js/login.js"></script>
    <style type="text/css">
    .style1 {font-family: Verdana, Arial, Helvetica, sans-serif}
    .style2 {
        color: #000099
    }
    </style>
    </head>
    <body bgcolor="#CODFFD" background="<%request.getContextPath();%>images/watermark_new.jpg">
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div align="center"><span class="style1">USER LOGIN</span>
        <br>
        <br>
        <br>
        <s:form action="checkUserLogin.action" validate="true" name = "loginForm">    
       <s:hidden name="loginAttempt" value="%{'1'}" />
       <table border="0" cellspacing="1" cellpadding="0" width="350" >
           <tr>
           <td align="center">
                <b>Login ID</b>
           </td>
             <td>
               <table>
                <s:textfield id="id" name="loginId" value=""   />
                </table>
              </td>
         </tr>
         <tr>   
           <td align="center">
                <b>Password</b>
           </td>

            <td> 
              <table>   
                <s:password id="password" name="loginPassword"  value=""  showPassword="true"/>
              </table>
            </td>
        </tr>
        <tr><td colspan="2" align="center"> 
              <table>   
                <s:submit value="Login" onclick = "return getRoleList()"/>
              </table>
            </td>
         </tr>
         <tr>       
            <td colspan="2" align="center">
              <table>  
             <s:a href="changePasswordScreen.action" >Change Password</s:a>
             </table>
            </td>
          </tr>
        </table>
       </s:form>

    </div>
    <br>
    <br>
    <br>

    </body>

    </html> 
```

正如我在从父窗口注销后在登录 jsp 中提到的那样，需要在弹出窗口上显示消息（当我单击任何链接时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:38:18.117

拦截器可以在调用 Action 之前和之后执行代码。你的什么时候被调用？我会想象正在发生的事情是这样的：

*   在 LogOutUserAction.java 您使会话无效
*   然后执行 LoginInterceptor.intercept。这会尝试从您无效的会话对象中获取一个属性，从而导致 IllegalStateException。

你为什么要使会话无效？您的 LoginInterceptor 使用 USER_HANDLE 属性的存在来指示用户是否已登录。我会在您的 LogOutUserAction 中删除此属性，但不会使会话无效。

# yii - yii 框架在主页中插入联系表

> ID：10618139
> 
> 赞同：0
> 
> 时间：2012-05-16T12:05:56.350
> 
> 标签：yii

我无法理解如何在主页底部呈现默认情况下从 Yii 创建的联系表单。

我能用什么？renderPartial() 或简单地 render() ，这样做的正确方法是什么？

`<?php $this->renderPartial('contact', array('model'=>$model)); ?>`给我返回未定义值 $model 的错误。

我是 Yii 框架的新手，有人可以帮助我吗？

TIA

* * *

现在我在建立联系 Portlet 时遇到问题

这是我的组件 ContactForm.php

```
<?php
   Yii::import('zii.widgets.CPortlet');
   class ContactForm extends CPortlet
   {
      public $title="Contact Us";

      protected function  renderContent() {

        $form = new ContactForm;
           if(isset ($_POST['ContactForm']))
            {
            $form->attributes=$_POST['ContactForm'];
            if($form->validate())
                $this->controller->refresh ();
        }
        $this->render('contactForm', array('form'=>$form));
        }
   } 
```

这是我的 contacForm.php 视图，它给了我错误：

```
 <?php echo CHtml::beginForm(); ?>
   <div class="row">
   <?php echo CHtml::activeLabel($form,'name'); ?>
   <br/>
   <?php echo CHtml::activeTextField($form,'name') ?>
   <?php echo CHtml::error($form,'name'); ?>  
   </div>
   <div class="row">
   <?php echo CHtml::submitButton('Submit'); ?>
   </div>
   <?php echo CHtml::endForm(); ?>

   CException

    ContactForm and its behaviors do not have a method or closure named "getAttributeLabel". 
```

这是 SiteController 的部分，其中有联系功能：

```
 /**
 * Displays the contact page
 */
public function actionContact()
{
    $model=new ContactForm;
    if(isset($_POST['ContactForm']))
    {
        $model->attributes=$_POST['ContactForm'];
        if($model->validate())
        {
            $headers="From: {$model->email}\r\nReply-To: {$model->email}";
            mail(Yii::app()->params['adminEmail'],$model->subject,$model->body,$headers);
            Yii::app()->user->setFlash('contact','Thank you for contacting us. We will respond to you as soon as possible.');
            $this->refresh();
        }
    }
    $this->render('contact',array('model'=>$model));
} 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:39:18.920

看起来像一个 portlet 的用例。这是创建用户登录 portlet 的教程；与联系表，它应该是相似的：

[http://www.yiiframework.com/doc/blog/1.0/en/portlet.login](http://www.yiiframework.com/doc/blog/1.0/en/portlet.login)

# c++ - std::thread 问题

> ID：10618142
> 
> 赞同：9
> 
> 时间：2012-05-16T12:06:04.923
> 
> 标签：c++, multithreading, c++11, valgrind, std

我想我有一种非常糟糕的概念问题。为什么我简单地使用 valgrind 得到很多竞争条件错误。首先我认为这可能是一个错误，我在论坛上看到更新的 linux 滚动版本将解决这个问题......所以现在我有 opensuse tubleweed，100% 更新。以下代码肯定有一些非常错误的地方：

```
#include <iostream>
#include <thread>

using namespace std;

class FOO
{
public:
    void do_something ()
    {
        cout<<"cout somethin\n";
    }
};

int main ()
{
    FOO foo;
    std::thread t (&FOO::do_something,&foo);
    t.join();
} 
```

当我做一个

```
valgrind --tool=drd ./oncordia 
```

我必须尝试 5 次或更多次，我收到以下错误：

```
==6218== drd, a thread error detector
==6218== Copyright (C) 2006-2010, and GNU GPL'd, by Bart Van Assche.
==6218== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==6218== Command: ./oncordia
==6218== 
cout somethin
==6218== Conflicting store by thread 1 at 0x05b5d050 size 8
==6218==    at 0x418E62: std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >::~_Impl() (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x419099: std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::operator()(std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*) const (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x418EDC: std::_Sp_counted_deleter<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:351)
==6218==    by 0x4180B7: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:146)
==6218==    by 0x417F62: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:551)
==6218==    by 0x417E99: std::__shared_ptr<std::thread::_Impl_base, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:751)
==6218==    by 0x417EB3: std::shared_ptr<std::thread::_Impl_base>::~shared_ptr() (shared_ptr.h:93)
==6218==    by 0x418037: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218==    by 0x417CCB: main (main.cpp:18)
==6218== Address 0x5b5d050 is at offset 32 from 0x5b5d030\. Allocation context:
==6218==    at 0x4C2AAB7: operator new(unsigned long) (in /usr/lib64/valgrind/vgpreload_drd-amd64-linux.so)
==6218==    by 0x418A5F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:92)
==6218==    by 0x418846: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:517)
==6218==    by 0x418775: std::__shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:986)
==6218==    by 0x4186C1: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:313)
==6218==    by 0x4185A3: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::allocate_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:531)
==6218==    by 0x418360: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::make_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:547)
==6218==    by 0x4181BF: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::thread::_M_make_routine<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (thread:194)
==6218==    by 0x418005: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218==    by 0x417CCB: main (main.cpp:18)
==6218== Other segment start (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== Other segment end (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== 
==6218== Conflicting store by thread 1 at 0x05b5d050 size 8
==6218==    at 0x417EC6: std::thread::_Impl_base::~_Impl_base() (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x418E74: std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >::~_Impl() (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x419099: std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::operator()(std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*) const (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x418EDC: std::_Sp_counted_deleter<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:351)
==6218==    by 0x4180B7: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:146)
==6218==    by 0x417F62: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:551)
==6218==    by 0x417E99: std::__shared_ptr<std::thread::_Impl_base, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:751)
==6218==    by 0x417EB3: std::shared_ptr<std::thread::_Impl_base>::~shared_ptr() (shared_ptr.h:93)
==6218==    by 0x418037: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218==    by 0x417CCB: main (main.cpp:18)
==6218== Address 0x5b5d050 is at offset 32 from 0x5b5d030\. Allocation context:
==6218==    at 0x4C2AAB7: operator new(unsigned long) (in /usr/lib64/valgrind/vgpreload_drd-amd64-linux.so)
==6218==    by 0x418A5F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:92)
==6218==    by 0x418846: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:517)
==6218==    by 0x418775: std::__shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:986)
==6218==    by 0x4186C1: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:313)
==6218==    by 0x4185A3: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::allocate_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:531)
==6218==    by 0x418360: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::make_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:547)
==6218==    by 0x4181BF: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::thread::_M_make_routine<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (thread:194)
==6218==    by 0x418005: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218==    by 0x417CCB: main (main.cpp:18)
==6218== Other segment start (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== Other segment end (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== 
==6218== Conflicting load by thread 1 at 0x05b5d060 size 8
==6218==    at 0x417F4C: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:550)
==6218==    by 0x417E99: std::__shared_ptr<std::thread::_Impl_base, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:751)
==6218==    by 0x417EB3: std::shared_ptr<std::thread::_Impl_base>::~shared_ptr() (shared_ptr.h:93)
==6218==    by 0x417EDC: std::thread::_Impl_base::~_Impl_base() (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x418E74: std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >::~_Impl() (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x419099: std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::operator()(std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*) const (in /home/ezequiel/projects/oncordia/build/oncordia)
==6218==    by 0x418EDC: std::_Sp_counted_deleter<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::_Sp_destroy_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2>::_M_dispose() (shared_ptr_base.h:351)
==6218==    by 0x4180B7: std::_Sp_counted_base<(__gnu_cxx::_Lock_policy)2>::_M_release() (shared_ptr_base.h:146)
==6218==    by 0x417F62: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::~__shared_count() (shared_ptr_base.h:551)
==6218==    by 0x417E99: std::__shared_ptr<std::thread::_Impl_base, (__gnu_cxx::_Lock_policy)2>::~__shared_ptr() (shared_ptr_base.h:751)
==6218==    by 0x417EB3: std::shared_ptr<std::thread::_Impl_base>::~shared_ptr() (shared_ptr.h:93)
==6218==    by 0x418037: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218== Address 0x5b5d060 is at offset 48 from 0x5b5d030\. Allocation context:
==6218==    at 0x4C2AAB7: operator new(unsigned long) (in /usr/lib64/valgrind/vgpreload_drd-amd64-linux.so)
==6218==    by 0x418A5F: __gnu_cxx::new_allocator<std::_Sp_counted_ptr_inplace<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, (__gnu_cxx::_Lock_policy)2> >::allocate(unsigned long, void const*) (new_allocator.h:92)
==6218==    by 0x418846: std::__shared_count<(__gnu_cxx::_Lock_policy)2>::__shared_count<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >*, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:517)
==6218==    by 0x418775: std::__shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, (__gnu_cxx::_Lock_policy)2>::__shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr_base.h:986)
==6218==    by 0x4186C1: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >::shared_ptr<std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Sp_make_shared_tag, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:313)
==6218==    by 0x4185A3: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::allocate_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::allocator<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > const&, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:531)
==6218==    by 0x418360: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::make_shared<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >, std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (shared_ptr.h:547)
==6218==    by 0x4181BF: std::shared_ptr<std::thread::_Impl<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> > > std::thread::_M_make_routine<std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)> >(std::_Bind_result<void, std::_Mem_fn<void (FOO::*)()> ()(FOO*)>&&) (thread:194)
==6218==    by 0x418005: std::thread::thread<void (FOO::*)(), FOO*>(void (FOO::*&&)(), FOO*&&) (thread:135)
==6218==    by 0x417CCB: main (main.cpp:18)
==6218== Other segment start (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== Other segment end (thread 2)
==6218==    (thread finished, call stack no longer available)
==6218== 
==6218== 
==6218== For counts of detected and suppressed errors, rerun with: -v 
```

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T18:13:25.337

阅读精彩的手册： http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/debug.html#debug.races](http://gcc.gnu.org/onlinedocs/libstdc++/manual/debug.html#debug.races)

代码没问题，valgrind 不理解我们在内部使用的原子操作，`std::shared_ptr`并错误地将它们报告为竞争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T01:13:04.117

cout 是一种资源，应该是互斥锁的（如果 do_something() 的 >1 个线程或 cout 的其他用途，则为竞争条件）

# python - BeautifulSoup '属性错误'

> ID：10618144
> 
> 赞同：1
> 
> 时间：2012-05-16T12:06:13.947
> 
> 标签：python, beautifulsoup

当我运行以下命令时，我得到“AttributeError：'NoneType'对象没有属性'string'”。但是，当对块字符串变量执行相同的任务时；有用。

关于我做错了什么的任何想法？

```
from BeautifulSoup import BeautifulSoup
from urllib        import urlopen

url = ("https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Albert%20Einstein&explaintext")

print ((BeautifulSoup(((urlopen(url)).read()))).find('extract').string).split("\n", 1)[0] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:21:51.147

```
from BeautifulSoup import BeautifulSoup
from urllib import urlopen
url = ("https://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=Albert%20Einstein&explaintext")

soup = BeautifulSoup(urlopen(url).read())
print soup.find('extract')  # returns None 
```

find 方法没有找到带有“extract”标签的任何内容。如果你想看到它的工作，那么给它一个存在于文档中的 HTML 标签，比如“pre”或“html”

'extract' 看起来像一个 xml 标签。您可能想尝试阅读有关解析 XML 的 BeautifulSoup 文档 - [http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Parsing](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Parsing) XML。还有一个新版本的 BeautifulSoup (bs4)。我发现 API 更好。

# html - Gmail 发送的故事 它是如何工作的？

> ID：10618145
> 
> 赞同：1
> 
> 时间：2012-05-16T12:06:18.233
> 
> 标签：html, html5-animation

[我对 Google 发送的故事](http://www.google.com/green/storyofsend/desktop/#/it-starts-with-send)感到非常惊讶。

谁能告诉我它在引擎盖下是如何工作的？我应该从哪里开始学习这套技术来构建这样一个漂亮而伟大的网站？

我应该从哪里开始？是纯粹的 HTML5&CSS3 吗？

以下是关于黑客新闻线程的一些讨论：

*   很好，就是这样。快速浏览会发现每个场景都是一个部分，资产与数据属性相关联，其余的是 TweenJS 和 Three.js 动画的精美组合，由 /assets/js/main.min.js 协调（它还处理看不见的历史）。

*   Swiffy，SWF-to-HTML 转换器 (http://www.google.com/doubleclick/studio/swiffy/) 似乎也用于帮助生成其中一些动画。

仍然可以弄清楚它是如何工作的，提前谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:12:59.023

**指南/有用的网站：**
基础 - [http://www.w3schools.com/html5/](http://www.w3schools.com/html5/)
高级 - [http://www.html5rocks.com/en/tutorials](http://www.html5rocks.com/en/tutorials) （这是一个谷歌项目）
演示 - [http://html5-demos .appspot.com/](http://html5-demos.appspot.com/)
来自 Apple - [http://www.apple.com/html5/](http://www.apple.com/html5/)

swiffy：我试过我的一款移动应用，效果很好。但是 swf 文件有 1mb 的限制。

storyofsend：是的，它使用了three.js

# svg - 将以像素定义的SVG对象缩放到物理单位？

> ID：10618148
> 
> 赞同：9
> 
> 时间：2012-05-16T12:06:36.643
> 
> 标签：svg

我定义了一个宽度和高度为“297mm”和“210mm”的 SVG 元素，并且没有视图框。我这样做是因为我想在 A4 视口中工作，但我想以像素为单位创建元素。

在某些时候，我需要放大以像素为单位定义的对象，以使其适合 A4 页面的一部分。例如，我可能有一个 100 像素宽的对象，我想水平缩放到 30 毫米。

这可能吗？我想我需要一个带有新坐标系的第二个容器，但我找不到任何方法来做到这一点。

**编辑**

看来我（或 SVG）误解了像素是什么。我意识到我可以将一条线的大小调整为 100%，然后得到它的像素大小`getBBox`以找到所需的缩放比例。我编写了这段代码并在 2 台客户端上运行，一台使用 1280x1024 显示器 (80dpi)，另一台使用 1680x1050 LCD (90dpi)：

```
function getDotsPerInch() {
   var hgroup, vgroup, hdpi, vdpi;

   hgroup = svgDocument.createElementNS(svgNS, "g");
   vgroup = svgDocument.createElementNS(svgNS, "g");
   svgRoot.appendChild(hgroup);
   svgRoot.appendChild(vgroup);

   drawLine(hgroup, 0, 100, "100%", 100, "#202020", 1, 1);
   drawLine(vgroup, 100, 0, 100, "100%", "#202020", 1, 1);

   hdpi = hgroup.getBBox().width  * 25.4 / WIDTH;
   vdpi = vgroup.getBBox().height * 25.4 / HEIGHT;

   drawText(hgroup, "DPI, horizontal: " + hdpi.toFixed(2), 100, 100);
   drawText(hgroup, "DPI, vertical:   " + vdpi.toFixed(2), 100, 120);
} 
```

IE9、FF、Opera 和 Chrome 都同意两台显示器的水平和垂直分辨率均为***96*** dpi（尽管 Opera 稍微不准确），而 Safari 报告两台显示器的 dpi 为 0。所以 svg 似乎只是将“像素”定义为“96dpi”。一些快速的谷歌搜索似乎证实了这一点，虽然我还没有找到任何确定的东西，而且大多数点击给出 90dpi，96dpi 作为 FF 变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:01:13.000

您可以嵌套`<svg>`元素并在子元素上使用 viewBox 属性来获取新的坐标系。给子`<svg>`元素 x、y、width 和 height 属性，这些属性是您希望它在父坐标系中出现在父元素上的位置。

# python - 在 wxPython 中的 wxPropertyGrid LongStringProperty 中隐藏转义

> ID：10618152
> 
> 赞同：0
> 
> 时间：2012-05-16T12:06:51.450
> 
> 标签：python, wxpython

我正在使用 wxPython 和 wxPropertyGrid 创建 UI，但无法让 LongStringProperty 像我想要的那样运行。默认行为是显示行返回选项卡等，因为它们是网格视图中各自的转义序列，这不是我想要的......

查看此处的文档：http: [//docs.wxwidgets.org/2.9.2/classwx_p_g_property.html#wxLongStringProperty](http://docs.wxwidgets.org/2.9.2/classwx_p_g_property.html#wxLongStringProperty)我可以看到据说可以覆盖此行为。问题是首先 PG_PROP_NO_ESCAPE 似乎没有在 wxPython 中定义，其次它需要子类化。如果我的理解是正确的，您不能直接在 wxPython 中进行子类化，而是必须使用 propertygrid.PyProperty 来完成，这基本上意味着从头开始重新创建整个类！现在我不确定我是否相信最后一个声明，或者我是否只是编造了它，但无论哪种方式，如果 PG_PROP_NO_ESCAPE 没有定义，我就无法设置它，所以这是一个有争议的问题。

所以我的问题是：是否可以在 wxPython 的 LongStringProperties 中隐藏转义序列，而无需从头开始重新创建整个类，如果可以，你怎么做？

# menu - 将菜单链接标题更改为带有打字稿的图像

> ID：10618154
> 
> 赞同：0
> 
> 时间：2012-05-16T12:06:55.993
> 
> 标签：menu, typo3, typoscript

我的typo3 网站有一个带有以下印刷定义的菜单：

```
lib.footernav = HMENU
lib.footernav.special = directory
lib.footernav.special.value = 38
lib.footernav.entryLevel = 0
lib.footernav.1 = TMENU
lib.footernav.1.NO {
  ATagParams = class = "footer-link"
} 
```

菜单工作得很好。我想要做的是，将链接文本更改为图像，如下所示：

```
<a class="footer-link" href="index.php?id=43&L=1">Facebook</a> 
```

到

```
<a class="footer-link" href="index.php?id=43&L=1"><img src="facebook.gif"/></a> 
```

我怎样才能做到这一点？

如果有帮助，我还可以为此 facebook 链接创建一个新菜单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-10T15:12:19.127

我建议使用菜单目标页面的“媒体”字段来定义菜单中的哪些页面应该使用图像显示。媒体字段可以在页面属性的“资源”选项卡中找到。它是您问题的完美解决方案，因为它允许您为任何菜单项自由选择任何图像：

对于要显示为图像的菜单项，请使用相应菜单页面的媒体字段并选择要使用的图像。对于您希望显示为文本的所有菜单项，只需将媒体字段留空即可。

这是创建该行为的 TS 代码：

```
 1 = TMENU
  1.NO {
    ATagParams = class="footer-link"

    # Replace menu item text with image if defined in page tab "Resources"-->"Media"
    stdWrap.override.cObject = COA
    stdWrap.override.cObject{
      10 = IMAGE
      10.file.import = uploads/media/
      10.file.import.field = media
      10.altText.field = title
    }

  } 
```

**FAL 的 TYPO3 6.2 更新：**

TYPO3 6.2 包括 FAL——一种新的媒体资源管理系统。由于页面属性的资源选项卡现在也基于 FAL，因此您需要不同的 TypoScript 方法来访问这些图像。这是一个最新的解决方案：

```
1 = TMENU
1 {
    wrap = <ul>|</ul>
    NO = 1
    NO {
        wrapItemAndSub = <li>|</li>

        stdWrap.override.cObject = FILES
        stdWrap.override.cObject {
          references {
            table = pages
            fieldName = media
          }

          renderObj = IMAGE
          renderObj {
            file.import.data = file:current:uid
            file.treatIdAsReference = 1
            titleText.data = file:current:title // field:nav_title // field:title
            altText.data = file:current:alternative // field:nav_title // field:title
          }

          # start with first image
          begin = 0
          # show only one image
          maxItems = 1
        }

    }
} 
```

该参数`begin`定义应该使用多张图片中的哪一张（例如，如果您需要一张图片作为页面的标题背景，另一张作为菜单中的图标）。

如果增加`maxItems`参数，将返回多个图像（如果在资源选项卡中定义了多个图像）。

如果您想将图像附加/添加到菜单文本而不是替换它，您必须更改`stdWrap.override.cObject`为`after.cObject`或`before.cObject`在上面的代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:08:52.897

另一种解决方案是为每个链接定义一个自定义类，然后仅为相应链接更改背景图像。这样您就可以通过 css 完全控制菜单的外观：

```
lib.footernav.1.NO {
  ATagParams = class="footer-link {field:title}"
  ATagParams.insertData = 1
} 
```

结果如下html：

```
<a class="footer-link Facebook" href="index.php?id=43&L=1">Facebook</a> 
```

CSS：

```
.Facebook {
  background: transparent url(facebook.gif) no-repeat;
  text-indent:9999px;
} 
```

**编辑：** 我推荐上述解决方案，因为它是解决单个菜单项的快速且相当干净的设置。但是，如果您喜欢印刷术教科书中的一个干净示例：

```
lib.footernav = COA
lib.footernav.10 = HMENU
lib.footernav.10 {
    special = directory
    special.value = 38
    excludeUidList  = 99
    1 = TMENU
    1.NO {
      ATagParams = class = "footer-link"
    }
}

lib.footernav.20 = TEXT
lib.footernav.20  {
    field = title
    typolink.parameter = 99
    typolink.ATagParams = class = "footer-link"
    } 
```

假设您的*facebook 菜单项*是页面 ID 99

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:14:32.083

像这样`lib.footernav.1.NO.stdWrap.wrap = <img src="|.gif" />`？

`wrap.htmlSpecialChars = 1`如果编辑器输入 HTML 特殊字符，请确保添加一个以避免破坏 HTML 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T14:19:20.197

```
lib.footerSocialMedia = HMENU
lib.footerSocialMedia {

special = directory
special.value = 167  

1 = TMENU
1 {

  wrap = <ul class="social-list right">|</ul>    
  expAll = 1
  noBlur = 1

  NO {
    wrapItemAndSub =  <li class="skew-25">|</li>      
    doNotLinkIt = 0
    stdWrap.htmlSpecialChars = 1        
stdWrap.field = 
    ATagParams =data-title="{field:title}" data-tooltip="true"
    ATagParams.insertData=1
    stdWrap.wrap = <span class="{field:tx_menuicon_menuicon}"></span>|
    stdWrap.wrap.insertData=1                
  } 

  ACT = 1    
  ACT {
    wrapItemAndSub =  <li class="skew-25">|</li>
    doNotLinkIt = 0
     stdWrap.field = 
    stdWrap.htmlSpecialChars = 1
    ATagParams =data-title="{field:title}" data-tooltip="true"
    ATagParams.insertData=1
    stdWrap.wrap = <span class="{field:tx_menuicon_menuicon}"></span>|
    stdWrap.wrap.insertData=1
  }    

}    
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T07:49:40.987

首先，您需要在 Page->edit 下的页面媒体中添加图像，然后在媒体中添加图像。此外，请使用以下排版：

```
stdWrap.override.cObject = COA
stdWrap.override.cObject{
      10 = IMAGE
      10.file.import = uploads/media/
      10.file.import.field = media
      10.altText.field = title
} 
```

# css - 如何将图像底部对齐到h1？

> ID：10618155
> 
> 赞同：1
> 
> 时间：2012-05-16T12:06:56.103
> 
> 标签：css, html, alignment

我正在尝试将图像底部对齐到 h1 文本，但我没有达到预期的结果。我尝试添加两个 div 并对齐效果不佳的它们，现在我正在尝试对齐跨度，但我也没有得到想要的结果。

```
<div id="formheader">
        <div id="formlogo"> <img src="../../Pictures/EditIcon.gif" width="17" height="20" alt="login logo"> </div>
        <div id="formtitle"> <span> <img src="../../Pictures/EditIcon.gif" width="17" height="20" alt="login logo">Editor</span> </div>
      </div> 
```

![对齐问题](../Images/57150111abdb2e38ce9c4f61922dccbf.png)

有关如何将图像与文本对齐的任何提示？我不得不从 h1 更改为 span，因为它不会与 h1 对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:10:34.833

像这样写：

```
img{
 vertical-align:bottom;
} 
```

# css - 为 IE 自定义 Firefox/Chrome 样式表

> ID：10618157
> 
> 赞同：0
> 
> 时间：2012-05-16T12:06:59.853
> 
> 标签：css, internet-explorer, firefox

我有一个 Firefox 样式表和一个网站的 chrome/safari 样式表。现在的问题是 IE 没有选择这些样式（因为它们不是典型的一般样式）。我想知道是否有一种简单的方法可以更改每个属性以便能够与 IE 一起使用。我可以为 IE 更改一些样式/属性，但我不知道其中一些的 IE 等效项。以下是 Firefox 样式表中使用的 Firefox 样式示例：

```
#topbar.black {/* Converted 1 gradient*/
background: -moz-linear-gradient(-90deg, #858585 0%, #636363 3%, #202020 50%, black    
51%, black 97%, #262626 100%);

}
#topbar.transparent {/* Converted 1 gradient*/
background: -moz-linear-gradient(-90deg, rgba(133,133,133,0.7) 0%,   
rgba(99,99,99,0.7) 3%, rgba(32,32,32,0.7) 50%, rgba(0,0,0,0.7) 51%, rgba(0,0,0,0.7) 
97%, rgba(38,38,38,0.7) 100%);

}
#topbar {/* Converted 1 gradient*/
background: -moz-linear-gradient(-90deg, #cdd5df 0%, #b0bccd 3%, #889bb3 50%,  
#8195af 51%, #6d84a2 97%, #2d3642 100%);

}
.pageitem {/* Converted 1 border radius*/
-moz-border-radius: 8px;
}
#tributton, #duobutton {/* Converted 1 gradient*/
background: -moz-linear-gradient(-90deg, #cdd4d9 0%, #c0c9cf 3%, #abb7bf 97%,    
#81929f 100%);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:15:42.027

对于 IE 9+，您可以使用`.pageitem {border-radius: 8px}`，因为它是 CSS3 标准。

对于渐变，您可以将这个 CSS hack 用于 IE：`#topbar {filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cdd5df', endColorstr='#b0bccd');}`

Internet Explorer 渐变滤镜不支持色标、渐变角度和径向渐变。这意味着您只能使用 2 种颜色指定水平或垂直线性渐变：StartColorStr 和 EndColorStr。有关更多详细信息，请参见[此处](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)。

# meteor - 如何在流星中正确绑定 jquery ui 行为？

> ID：10618159
> 
> 赞同：8
> 
> 时间：2012-05-16T12:07:03.963
> 
> 标签：meteor, jquery-draggable

我正在尝试使用`.draggable()`通过 Meteor 订阅填充的 jQuery UI 创建一组可拖动的 DOM 对象。我想出的代码看起来像

```
Meteor.subscribe('those_absent', function() {
     $( "li.ui-draggable" ).draggable( { revert: "invalid" } );
});
Meteor.subscribe('those_present', function() {
     $( "li.ui-draggable" ).draggable( { revert: "invalid" } );
}); 
```

这些与一些`Meteor.publish()`调用相对应，因此任何时候集合发生变化，`.draggable()`行为都会被附加。至少，这是我的意图。

然而，它只能工作一次——一旦其中一个`<li>`被拖放，那么它们就不再是可拖动的了。

当对象被删除时，我正在触发一个附加到`Template`项目的自定义事件，如下所示

```
 $( "#c_absent .inner-drop" ).droppable({
        drop: function( event, ui ) {
            ui.draggable.trigger('inout.leave');
        }
    });

  Template.loftie_detail.events = {
      'inout.leave': function (e) {
          Lofties.update({_id:this._id}, {$set: {present: 'N' }});
      }
  }; 
```

因此，我的想法是，对 drop 集合的这种更改应该通过 pub/sub 进程传播并重新运行`.draggable()`上面的行。但它似乎没有。

可以在此处查看完整代码[https://github.com/sbeam/in-out/blob/master/client/inout.js](https://github.com/sbeam/in-out/blob/master/client/inout.js)并且该应用程序位于[http://inout.meteor.com/](http://inout.meteor.com/)（那里其他一些可能与项目随机丢失值或完全从 UI 中消失的问题无关）

因此，如果我对 Meteor 中 pub/sub 如何工作的理解不正确，那么很高兴知道。或者有没有更有效的方法来实现没有它的 UI 行为绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:23:30.660

我在我的应用程序中实现这一点的方式是使用@lashleigh 显示的方法。

我有一个模板事件，它使用如下代码进行侦听：

```
Template.myDraggableItem.events({
    'mouseover .workItem' : function() {
        $(this._id).draggable();
    }
}); 
```

然后我像这样听dragstop。

```
$('body').on('dragstop', '.myDraggableItem', function (e) {
    // Update the collection with the new position
}; 
```

[您可以在aduno.meteor.com](http://aduno.meteor.com)查看使用此代码的应用程序

# java - 当我将鼠标悬停在自定义编辑器中的错误上时，如何显示快速修复

> ID：10618164
> 
> 赞同：2
> 
> 时间：2012-05-16T12:07:15.843
> 
> 标签：java, eclipse-plugin

我为自己的 DSL 编写了一个 Eclipse 编辑器。当打开或保存编辑器时，我会检查内容并为任何语法错误创建问题标记。标记按预期显示在我的编辑器中，也在“问题”视图中。

我有一个扩展点`org.eclipse.ui.ide.markerResolution`并提供了一个`IMarkerResolutionGenerator`为问题标记创建解决方案的实现。这很好用；当我右键单击问题视图中的问题时，快速修复选项会显示在上下文菜单中并且工作正常。

我的编辑器扩展`SourceViewerConfiguration`，我覆盖`getQuickAssistAssistant()`，返回一个扩展`QuickAssistAssistant`。这使我可以右键单击编辑器中的问题并在菜单中查看“快速修复”选项。

当我将鼠标悬停在编辑器中的问题上时，我真的很想获得快速修复解决方案，就像在 java 编辑器中一样。目前只有问题文本出现在工具提示中。是否有一个单独的钩子，或者它是否应该包含在我已经实施的两个快速修复钩子中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:11:09.010

我遇到了同样的问题并为自己找到了解决方案：[How to implement Quick Fix / Quick Assist for custom eclipse editor？](https://stackoverflow.com/questions/8945371/how-to-implement-quick-fix-quick-assist-for-custom-eclipse-editor/8999952#8999952)

据我了解，标记显示在问题视图中，注释显示在编辑器中（在标尺上和鼠标悬停时）。

我使用`org.eclipse.ui.editors.annotationTypes`扩展点来注册我自己的注释类型，并使用`org.eclipse.ui.editors.markerAnnotationSpecification`扩展点来指定外观。在我的自定义`SourceViewerConfiguration`类中，我重写`getAnnotationHover(...)`以返回一个`DefaultAnnotationHover`对象并`getTextHover(...)`返回一个`DefaultTextHover`对象，因此注释显示在我的源查看器中。

要创建注释，您可以使用`org.eclipse.ui.texteditor.SimpleMarkerAnnotation`，您可以构造一个`SimpleMarkerAnnotation`将标记对象传递给构造函数。然后您需要将注解添加到注解模型中。你可以`getAnnotationModel()`在你的`SourceViewer`，然后`addAnnotation(Annotation annotation, Position position)`在`AnnotationModel`. 模型中的所有注释都将显示在编辑器中。

您也可以`org.eclipse.ui.texteditor.AbstractMarkerAnnotationModel`用作注释模型。然后你不需要先创建注释对象，因为`AbstractMarkerAnnotationModel`它提供了一个方法`addMarkerAnnotation(IMarker marker)`。

看看[`IAnnotationModel`界面](http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Ftext%2Fsource%2FIAnnotationModel.html)。

# php - 在 activecollab 路由器中面临缓存问题

> ID：10618170
> 
> 赞同：0
> 
> 时间：2012-05-16T12:07:33.057
> 
> 标签：php, open-source, content-management-system, project, activecollab

我正在开发 activecollab 自定义模块；面临与路由器相关的问题。

我错误地在路由器的操作中输入了错误的操作名称，我们需要在路由器中定义，但在收到错误后我更新了该操作名称但 activecollabs 仍在读取先前的操作我从**缓存**中删除文件并**编译**文件夹但读取先前的操作。

如果您在开发 activecollab 模块时遇到过这个问题，请分享。

我错误地这样做了：（action=>'views'）

```
Router::map('mymodule_view', 'mymodule/view/:request_id', array('controller' => 'mymodule', 'action' => 'views' ), array('req_id' => Router::MATCH_ID) ); 
```

但是在收到错误后，我通过以下方式更新了上面的代码：(action=>'views')

```
Router::map('mymodule_view', 'mymodule/view/:request_id', array('controller' => 'mymodule', 'action' => 'view' ), array('req_id' => Router::MATCH_ID) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:42:09.490

首先，确保您的系统处于开发模式。打开`config/config.php`并确认 APPLICATION_MODE 设置为`in_development`：

```
define('APPLICATION_MODE', 'in_development'); 
```

既然您已经了解了这些内容，请转到 activeCollab，您将在应用程序界面的右下角使用开发工具栏，在 activeCollab 电源按钮旁边（它有一个红色的错误图标）。使用此工具清除缓存、重建图像等。

PS：您也可以清除文件`/cache`夹中的所有文件，以防万一。

# wpf - 如何创建 WPF DataGrid 文本 + 按钮列？

> ID：10618172
> 
> 赞同：0
> 
> 时间：2012-05-16T12:07:36.457
> 
> 标签：wpf, datagrid, datatemplate, wpfdatagrid

我希望我的数据网格中的一列同时显示文本和一个小的省略号“...”按钮 - 类似于您在 Visual Studio 属性网格中看到的内容。这是我正在尝试构建的数据网格列的模型：

![小样](../Images/a8d4c646a9f886e3a949c58526639227.png)

当用户单击省略号按钮时，我将显示一个自定义选择器对话框，然后在列的文本部分中，显示我可以从对话框返回的逗号分隔值（即字符串）。

正如我在这里模拟的那样，如何让数据网格列同时包含文本和按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:14:17.667

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid.Resources>
            <DataTemplate x:Key="mDataTemplate">
                <Button Margin="10,10,0,0" >
                    <Button.Content>
                        <Grid x:Name="ButtonGrid" Height="Auto" HorizontalAlignment="Left" VerticalAlignment="Top">                                
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />                                    
                            </Grid.RowDefinitions>
                            <TextBlock  />
                            <Ellipse />                                
                        </Grid>
                    </Button.Content>
                </Button>
            </DataTemplate>
        </Grid.Resources> </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T16:02:33.947

你必须使用一个`DataGridTemplateColumn`.

示例代码：

```
<DataGrid>
  <DataGrid.Columns>
    <DataGridTemplateColumn Header="Your header">
      <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
          <DockPanel>
            <Button DockPanel.Dock="Right">...</Button>
            <TextBlock Text="{Binding YourProperty}"></TextBlock>
          </DockPanel>
        </DataTemplate>
      </DataGridTemplateColumn.CellTemplate>
    </DataGridTemplateColumn>
  </DataGrid.Columns>
</DataGrid> 
```

# ruby-on-rails - 使用 init.rb Rails 3 创建 gem

> ID：10618174
> 
> 赞同：4
> 
> 时间：2012-05-16T12:07:38.767
> 
> 标签：ruby-on-rails, ruby, gem, init

我创建了一个新的 gem：[https ://github.com/tntwebsolutions/ts3query](https://github.com/tntwebsolutions/ts3query)

在我的 init.rb 文件中，我`require`是主 lib 文件，这应该在加载 rails 应用程序时自动加载 gem。但是当我启动服务器时，它会发现`init.rb`文件没有被加载。

在我的应用程序中，我有这个`Gemfile`：

```
gem "ts3query", "~> 0.2.1" 
```

并在我的`application_controller.rb`：

```
@query = TS3Query.connect :password => password 
```

但后来我得到这个错误：

```
uninitialized constant ApplicationController::TS3Query 
```

如果我这样做：

```
require 'TS3Query'
@query = TS3Query.connect :password => password 
```

它确实有效。但我不知道，我必须在我的 gem 上更改什么才能加载`require 'TS3Query'`rails 应用程序的加载时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:12:20.737

**任何人都不会在任何地方调用init.rb**，将文件从**TS3Query.rb**重命名为**ts3query.rb**，bundler 会自动为您加载它。

避免使用带有大小写字符的名称，Linux 和某些 Mac 具有区分大小写的文件系统，虽然它适用于某些人，但可能不适用于其他所有人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:13:31.183

这是因为您在 lib 中命名 TS3Query.rb 文件的方式。要使其自动获得必需，它需要与 gem ts3query.rb 具有相同的名称和大小写。你有三个选项来解决这个问题：

1.  在 gem 中将文件名更改为 ts3query.rb
2.  将 ts3query.rb 文件添加到您的 gem 中，并且需要 'TS3Query'
3.  将您的 Gemfile 更改为`gem "ts3query", "~> 0.2.1", :require => "TS3Query"`.

# coldfusion - ColdFusion oAuth 授权标头未通过

> ID：10618175
> 
> 赞同：0
> 
> 时间：2012-05-16T12:07:39.440
> 
> 标签：coldfusion, oauth, cfhttp

我的授权标头看起来像这样（为安全起见，参数稍作更改，为了便于阅读而换行）：

```
 <cfset oAuthHeader = 'OAuth oauth_consumer_key="zz3u0Lf9XxkC2KX839r2MS0fDltvLquow3ZMLaOw",
oauth_nonce="9BD4FAE88D1B213F86D908FE183F0501C682EE2F",
oauth_signature="Zy91IhXWGcMxyuAVIlGX%2F3ULTWU%3D",
oauth_signature_method="HMAC-SHA1",
oauth_timestamp="1337169270",
oauth_version="1.0"' 
```

我的 cfhttp 调用如下所示：

```
 <cfhttp url="#oRequestReq.getNormalizedHttpURL()#" method="POST">
            <cfhttpparam type="header" name="Authorization" value="#oAuthHeader#">
            <cfloop collection="#arguments#" item="key">
                <cfif key neq 'fieldnames'>
                    <cfhttpparam type="formfield" name="#key#" value="#arguments[key]#">
                </cfif>
            </cfloop>
        </cfhttp> 
```

运行`<cfdump var="#GetHttpRequestData()#">`，我得到以下信息，这表明我的字段作为 formfield 参数通过 OK，但是我的 Authorization 标头无处可见。

![在此处输入图像描述][1]

Authorization 标头不应该包含在 Headers 结构中吗？[1]：http: [//i.stack.imgur.com/VbQQO.jpg](https://i.stack.imgur.com/VbQQO.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T16:13:46.067

难道不应该...

```
<cfset oAuthHeader = {
    'oauth_consumer_key'="zz3u0Lf9XxkC2KX839r2MS0fDltvLquow3ZMLaOw",
    'oauth_nonce'="9BD4FAE88D1B213F86D908FE183F0501C682EE2F",
    'oauth_signature'="Zy91IhXWGcMxyuAVIlGX%2F3ULTWU%3D",
    'oauth_signature_method'="HMAC-SHA1",
    'oauth_timestamp'="1337169270",
    'oauth_version'="1.0"
}>

<cfhttp url="#oRequestReq.getNormalizedHttpURL()#" method="POST">
    <cfloop collection="#oAuthHeader#" item="key">
        <cfhttpparam type="header" name="#key#" value="#oAuthHeader[key]#">
    </cfloop>
    <cfloop collection="#arguments#" item="key">
        <cfif key neq 'fieldnames'>
            <cfhttpparam type="formfield" name="#key#" value="#arguments[key]#">
        </cfif>
    </cfloop>
    ...
</cfloop> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:09:36.897

你是如何获得 oauth_signature 的？这不是 OAuth 中的硬编码 - 它每次都会生成。

我建议使用这个库[http://oauth.riaforge.org/](http://oauth.riaforge.org/)

那里有一些示例可以帮助您入门。

# php - PHP：如何从 filectime() 中减去例如 9 天

> ID：10618179
> 
> 赞同：0
> 
> 时间：2012-05-16T12:07:53.787
> 
> 标签：php

我想删除所有超过 9 天的文件。由于 filectime 返回一个

某些文件，因此，我只想知道如何减去一个例子：9天

文件时间（）。

**代码**：

```
<?php
 $filename = 'JSONFormate.json';
 if (file_exists($filename)) {
echo "$filename was last changed: " . date("F D Y H:i:s.", filectime
($filename));
echo "\n......".filectime($filename)-777600;
}
?> 
```

**结果** JSONFormate.json 上次更改时间：2012 年 5 月星期二 22:50:10.-777600

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:10:39.877

从结果中减去 777600（[以秒为单位的 9 天）](http://www.google.co.uk/search?ix=sea&sourceid=chrome&ie=UTF-8&q=9%20days%20in%20seconds)`filectime()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:10:50.050

[filectime()](http://php.net/manual/en/function.filectime.php)返回文件的最后修改时间，而不是创建时间。

你也不想休息 9 天`filectime()`。您要做的是从现在起 9 天后删除，看看它是否大于返回的`filectime()`

```
int $last_modified = filectime("...");
int $nine_days_ago = time() - 777600;
if($nine_days_ago < $last_modified) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:18:01.507

我建议使用像这样的 unix 命令`find . -name "*.trc" -mtime +9 -exec rm -rf {} \;` 您可以使用“`”（反引号）或 exec 或 system 在 PHP 中创建一个 cronjob 甚至运行它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:15:44.783

filectime 返回一个 unixtimestamp。如果计算 9 天的 unixtimestamp。然后您可以从您从 filectime 收到的 unixtimestap 中减去 9 天的 unixtimestamp。然后你会得到一个超过 9 天的 unixtimestamp。

然后检查所有时间戳低于计算时间戳的文件。

# wcf - 从地址下载元数据时出错

> ID：10618181
> 
> 赞同：10
> 
> 时间：2012-05-16T12:08:00.467
> 
> 标签：wcf, service-reference

我正在尝试添加服务参考。

从地址下载元数据时出错

这是一次又一次显示的错误吗？

请帮忙

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-11T14:05:50.463

您可能还只需要构建/重建项目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T13:59:00.497

至少有4种可能：

*   元数据交换 mex 端点未定义
*   元数据交换未启用
*   您使用了错误的地址
*   您被某些安全设置阻止

在浏览器中尝试该 url 以查看它返回一个 wsdl

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-17T14:08:43.647

我也发生了同样的事情，我发现我忘记在我的 WCF 服务的接口上添加“服务合同”和“操作合同”注释

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-12T13:04:54.677

只需尝试无任何错误地构建项目并再次提供服务参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T04:37:07.277

在 Web.config 文件中，我更改了：

```
 <endpoint address="" binding="pollingDuplexHttpBinding"
    contract="IAsyncTaskService"/> 
```

对此：

```
<endpoint address="" binding="pollingDuplexHttpBinding"
    contract="DuplexService.Web.IAsyncTaskService"/> 
```

并删除了错误。泽尼

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-29T13:37:04.560

首先尝试重建项目，如果不能修复它，请尝试在 web.config 中将属性**httpGetEnabled**从 FALSE 更改为 TRUE。

```
 <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-10T09:37:20.200

检查 IIS 是否提供服务 URL。就我而言，我更改了 Windows 密码，但忘记了 IIS 在应用程序和应用程序池中都使用了这些凭据。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-21T21:01:58.480

我知道这是一个老歌，但我想我会添加对我有用的东西，这样我就可以在路上再次找到它；）

就我而言，AppPool 用户无权访问 %Windir%\temp，这显然是生成 MEX 数据所必需的。

[在此线程](https://social.msdn.microsoft.com/Forums/vstudio/en-US/bcf678a2-7ada-441c-9860-cf452d925009/adding-webservice-client-to-a-net-45-service-fails-when-adding-from-remote-server?forum=wcf)中向 Amy Peng 大喊小费！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-02T23:07:51.147

这种情况下的另一种可能性是没有端点监听。即，您尝试添加的服务未“启动”。我在尝试添加对我正在处理的 WCF 服务的引用时犯了这个错误，但我忘了打开它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-16T14:36:47.520

我遇到了这样的问题：添加服务引用失败，并显示“方法不允许”消息。

wsdl 在我的浏览器中运行良好..

原因是我将端点配置为监听`http://0.0.0.0:6000/mex`，“添加服务引用”工具似乎不喜欢。将其更改为真实 IP 地址使其工作（例如`http://127.0.0.1:6000/mex`）

# c# - 使用自定义逻辑对 ObservableCollection 进行排序

> ID：10618184
> 
> 赞同：0
> 
> 时间：2012-05-16T12:08:18.230
> 
> 标签：c#, wpf, sorting, observablecollection

新手`WPF`，也是`ObservableCollection`我需要以自己的方式对其进行排序，并在每次添加或删除某些内容时对其进行排序。

```
ObservableCollection<User> users = new ObservableCollection<User>(); 
```

用户对象是这样的：

```
class User
{
    public string Name { get; set; }
    public bool IsOp { get; set; }
    public bool IsAway { get; set; }
} 
```

我想要`IsOp's`列表顶部的所有内容，按字母顺序排列。然后按照字母顺序排列所有非操作。

实现这一目标的正确方法是什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:12:04.890

最简单的方法是使用`CollectionView`：

```
ICollectionView view = CollectionViewSource.GetDefaultView(users);
view.SortDescriptions.Add(new SortDescription("IsOp", ListSortDirection.Descending));
view.SortDescriptions.Add(new SortDescription("Name", ListSortDirection.Ascending)); 
```

当您将视图绑定到该列表时，项目将按指定的顺序出现。

[使用此处](http://www.thomaslevesque.com/2011/11/30/wpf-using-linq-to-shape-data-in-a-collectionview/)显示的技巧，您甚至可以使用 Linq：

```
var query =
    from u in users.ShapeView()
    orderby u.IsOp descending, u.Name ascending
    select u;

query.Apply(); 
```

# visual-studio-2010 - 创建或打开新的 xamarin/mono Android 应用程序解决方案时 Visual Studio 2010 崩溃

> ID：10618185
> 
> 赞同：0
> 
> 时间：2012-05-16T12:08:18.500
> 
> 标签：visual-studio-2010, xamarin.android, xamarin

我已经使用 vs2010 sp1 在我的 w7x64 上安装了 xamarin - 设置后我尝试创建我的第一个“hello world”Android 应用程序（使用本指南一步一步：[Xamarin Hello World Demo](http://docs.xamarin.com/android/getting_started/hello_world%29)）但是当项目加载时（创建）VS崩溃...

据我所见，日志中没有任何用处（devenv.exe /log）但是在应用程序事件日志中我可以找到以下错误

（抠图）P1：devenv.exe

P2：10.0.40219.1

P3：4d5f2a73

P4：Xamarin.AndroidDesigner

P5：1.0.0.0

P6：4fad4cd6

P7：2ee

P8：10

P9：System.NullReferenceException

P10：

附加信息：我已经在我的 VS 中安装了 DevExpress。但是通过卸载这些插件，问题仍然存在。

有没有人有同样的问题或解决方案？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:27:31.800

Xamarin 正在研究这个问题 - 在[http://mono-for-android.1047100.n5.nabble.com/Visual-Studio-2010-crashes-when-opening-a-new-or-上有一些建议的解决方法现有的 Mono-for-Android-project-after-upgrade-to-1-td5709541.html](http://mono-for-android.1047100.n5.nabble.com/Visual-Studio-2010-crashes-when-opening-a-new-or-existing-Mono-for-Android-project-after-upgrade-to-1-td5709541.html)

# jquery - 将单击事件绑定到 jQuery Datatable on() 中的 tr 元素不起作用

> ID：10618189
> 
> 赞同：5
> 
> 时间：2012-05-16T12:08:33.040
> 
> 标签：jquery, datatables

我正在开发一个包含我们所有用户的表格，也可以通过单击表格行并编辑表格中的数据来更改表格，一旦执行点击，表格就会打开。

如果我在页面加载时加载了所有用户，那么我的代码可以正常工作。

一旦我更改我的数据表以在数据表初始化时加载用户，它只会在第一页上工作。

如果我取消注释我的下部`ready(function())`并删除`fnInitComplete`它甚至不会在第一页上工作。

这是我的代码的相关部分：

```
 $(document).ready(function(){
            tbl = $('#nutzer').dataTable( {
                "bJQueryUI": true,
                "sScrollX": "100%",
                "bProcessing": true,
                "bServerSide": true,
                "iDisplayLength": 10,
                "sAjaxSource": "xhr.php",
                "sPaginationType": "full_numbers",
                "fnInitComplete": function() {
                    $('#nutzer tbody tr').on("click", function () {
                        aufklappen(this);
                    } );
                }
            } );

            $( "#create-user" ).button().click(function() {
                $( "#dialog-form" ).dialog( "open" );
            });
//            $('#nutzer tbody tr').on("click", function () {
//                aufklappen(this);
//            } );
        });

        function aufklappen(row) {
            if ( tbl.fnIsOpen(row) ) {
                tbl.fnClose(row);
            } else {
                set = tbl.fnSettings().aoOpenRows[0];
                (set != null) ? (tbl.fnClose(set.nParent)) : null;
                $.post("benutzerBearbeiten.php", { 
                    funktion : "benutzerDaten",
                    id : $(row).children( "td:first-child" ).text()
                }, function(data){
                    tbl.fnOpen( row, data);
                    $( "#deaktivieren").button().click(function(e){
                        e.preventDefault();
                        deaktivieren();
                    });
                    $( "#speichern").button().click(function(e){
                        e.preventDefault();
                        speichern();
                    });
                }
            ) };
        } 
```

通过数据表分页加载页面或更改页面后，我可以手动调用

```
$('#nutzer tbody tr').on('click', function () {
    aufklappen(this);
} ); 
```

并且点击功能完美地绑定到tr。

在我看来，由 datatables-plugin 创建的元素没有将 dom 提升到我定义的 on() 处理程序，但我不知道为什么。

* * *

## 编辑

利用“系统重启”的答案，我最终删除了该`fnInitComplete`部分并添加

```
"asStripeClasses": [ "odd nutzer_tr", "even nutzer_tr"] 
```

到初始化部分和

```
$("body").delegate(".nutzer_tr", "click", function () {
    aufklappen(this);
}); 
```

到`ready(function())`. 附加类`nutzer_tr`是防止打开的 tablerow 关闭。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-16T12:09:37.393

我认为您需要现场活动：

```
$('body').on('click', '#nutzer tbody tr', function () {
    aufklappen(this);
}); 
```

或者可以使用委托（）

```
$('body').delegate('#nutzer tbody tr', 'click', function () {
    aufklappen(this);
}); 
```

# c++-cli - c++/cli 委托 + lambda + 重载函数

> ID：10618191
> 
> 赞同：2
> 
> 时间：2012-05-16T12:09:00.960
> 
> 标签：c++-cli

我不知道如何在 c++/cli 中做同样的事情。我不清楚如何创建委托以及如何调用它。

有人能帮我吗？谢谢。

```
 public class Writer {

    internal Dictionary<Type, Action<object>> Reflective = new Dictionary<Type, Action<object>>();

    public Writer()
    {
        Reflective.Add(typeof(float), (value) => Write((float)value));
        Reflective.Add(typeof(double), (value) => Write((double)value));
    }

    public void Write(float value)
    {
        Console.WriteLine("Float");
    }

    public void Write(double value)
    {
        Console.WriteLine("Double");
    }

    public void Write<T>(T[] values)
    {
        var method = this.Reflective[typeof(T)];
        foreach (var value in values)
        {
            method(value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T18:25:55.403

我不会为你写完整的东西，但这里有一些不明显的东西可以让你开始：

```
typeof(float) ==> System::Single::typeid
// I like to specify the full namespace for explicitness. 
```

Lambdas：C++/CLI 不支持 lambdas。您需要声明一个成熟的方法，并为其构造一个委托。幸运的是，你已经有了，你的两个 Write 方法应该可以工作。不要忘记在声明委托时，如果它是实例方法，则需要指定要在其上调用函数的对象，该对象应该`this`在您的代码中。

# ruby-on-rails - 用于读写 excel 和 csv 文件的 rails gem 或插件

> ID：10618193
> 
> 赞同：2
> 
> 时间：2012-05-16T12:09:10.947
> 
> 标签：ruby-on-rails, ruby, rubygems

嗨，我想从 CSV 和 excel 文件中读取和写入数据。有人可以帮我吗

哪个 gem 或插件更适合这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:28:20.177

ruby 1.9.x 在 Stdlib 中提供了一个不错且快速的 CSV 类，请参见[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/index.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/index.html)。

对于电子表格，我建议[http://spreadsheet.rubyforge.org/](http://spreadsheet.rubyforge.org/)或已经建议的[https://github.com/hmcgowan/roo](https://github.com/hmcgowan/roo)

**编辑**
我可以从我的代码中挖出一个 csv 的例子，这可以帮助你开始。

进口：

```
CSV.foreach(params[:csv][:csv_file].tempfile) do |row|
  # do something with your row ...
end 
```

出口：

```
@export = CSV.generate do |csv|
  # adding header columns
  csv << [
    'Column 1', 
    'Column 2', 
    'Column 3' #, ...
  ]

  @records.each do |record|
    csv << [
      record.name,
      record.description,
      record.created_at #, ...
    ]
  end
end

# if you want to send the data directly to the client (works inside a controller action)
send_data @export, :type => 'text/csv; charset=utf-8; header=present', :disposition => 'attachment: filename=export.csv' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:10:34.237

你可以试试 roo gem for excel

```
 https://github.com/hmcgowan/roo 
```

对于 CSV

```
 https://github.com/arydjmal/to_csv 
```

# javascript - HTML/Javascript onchange 不起作用

> ID：10618194
> 
> 赞同：0
> 
> 时间：2012-05-16T12:09:19.903
> 
> 标签：javascript, html, getelementbyid

这是我关于stackoverflow的第一个问题。

我有一个表格：

```
 <input type="text" id="naam" onchange="naam()" name="toevoegerNaam_1"
placeholder="Uw naam" /> 
```

这是一个很大的表格，这是具体的代码。你看到`onchange="naam()"`

这是功能：

```
<script type="text/javascript" >
function naam(){
    alert("test");

    }

</script> 
```

这行不通！

如果我这样做： onchange="alert('test');" ，它工作正常。

我可以使用 onclick 调用该函数。

我不明白出了什么问题。

请帮我！也许有人看到我是荷兰人（比利时），很抱歉我的英语不好，如果我的问题不够清楚，我会编辑它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:32:20.227

**尝试使用 onkeyup/onkeydown**让功能在您按下键后立即执行，

因为 onchange 只会在**输入字段的焦点改变/移动**时执行。

# android - 如何更改图像视图中设置的形状颜色

> ID：10618195
> 
> 赞同：5
> 
> 时间：2012-05-16T12:09:20.070
> 
> 标签：android

现在问题从设置形状的颜色开始。我在其中创建了一个矩形`drawable`并将其设置为`ImageView`这样

```
<LinearLayout 
        android:layout_width="0dp" 
        android:layout_height="fill_parent" 
        android:orientation="vertical" 
        android:layout_weight="0.15" 
        android:layout_marginRight="10dp"
        android:gravity="center_vertical">
       <ImageView 
        android:id="@+id/iv_priority"
        android:src="@drawable/case_priority"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

**编辑**

我的 case_priority.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle">
  <solid android:color="#009600" />
  <size android:width="30dp"
        android:height="30dp" />
</shape> 
```

现在我需要改变这个形状的颜色。实际上这个颜色来自网络服务，我需要改变它。所以我的**问题**是：我们如何以编程方式更改此形状的颜色。并将其设置为imageview。我在stackoverflow中经历了几个例子，但我无法将其更改为图像视图。请帮助！！！！提前致谢。

**编辑：**

可能是我的问题不清楚，所以只是对 question 的改进。实际上，我有一个 ImageView，我在其中设置了一个实际上是可绘制的源。默认情况下，它是绿色的，如我上面显示的代码所示。现在 web 服务返回需要相应更改的图像视图的颜色，所以我不能在运行时从 xml 更改它，所以我需要从 java 文件更改它。由于我使用的是形状和图像视图，因此 .setBackground() 在这里没有多大帮助。那么可能的解决方案是什么。感谢您的回答，对于给您带来的不便，我们深表歉意。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T09:43:25.187

感谢所有的答案。它帮助我回答。

在我的布局中我改变了`android:src="" to android:background="@drawable/case_priority"` 并且在我的java文件中我n=包含了这个代码：->

```
 Resources res = getResources();
        final Drawable drawable = res.getDrawable(R.drawable.case_priority);
        drawable.setColorFilter(Color.YELLOW, Mode.SRC_ATOP);
        ImageView img = (ImageView)findViewById(R.id.iv_priority);
        img.setBackgroundDrawable(drawable); 
```

就是这样。希望有人会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:14:41.343

将此添加到图像视图

```
android:background="#152" // or some other color code 
```

**编辑1：** 用代码做到这一点

```
ImageView.setBackgroundColor(Color.parseColor("red")); // Or any color code like #000 , #987 
```

**编辑2：**

```
ImageView Imgs = (ImageView) findViewById(R.id.iv_priority);

Imgs.setBackgroundColor(Color.parseColor("ColorCode")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T12:19:18.617

看看这里

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable](http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable)。

`Shape`如果您愿意，您可以使用它`inflate`来扩充您的 XML，而不是创建in 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T12:20:54.657

IimageView.setBackgroundColor("#152");

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-10T13:30:41.110

所有解决方案都建议使用 ImageView 的背景。我认为这不是理想的解决方案。这个问题已经反映了一种直观的方法是什么：将形状应用于`src`属性。为了以编程方式更改形状的颜色，您将执行以下操作：

```
GradientDrawable drawable = (GradientDrawable) priorityImageView.getDrawable();
drawable.setColor(Color.RED); 
```

鉴于形状是按照原始问题分配的：

```
<ImageView 
    android:id="@+id/iv_priority"
    android:src="@drawable/case_priority"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"/> 
```

这也带来了好处，您可以将 ImageView 的背景与其内容分开设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-21T12:10:57.020

作为[Lars Blumberg 的回答](https://stackoverflow.com/a/20495910/543875)，我也不想更改背景，因此我将以下代码应用于我的图像，因为我没有 GradientDrawable：

```
Drawable drawable = imageView.getDrawable();
drawable.setColorFilter(Color.CYAN, PorterDuff.Mode.MULTIPLY); 
```

# javascript - 如何使用 java 脚本查找 asp 控件 ID？

> ID：10618196
> 
> 赞同：1
> 
> 时间：2012-05-16T12:09:20.560
> 
> 标签：javascript, asp.net

我正在使用以下代码来查找控件 ID。

```
alert(document.getElementById("<%# TextBox1.ClientId %>").value ) 
```

但是这段代码给出了错误“需要对象”。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:14:25.810

你需要使用'='，而不是'#'

```
alert(document.getElementById("<%= TextBox1.ClientId %>").value ); 
```

" `<%#`" 符号是用于数据绑定的内联表达式。

那里的“ `<%=`”符号用于显示/翻译目的。它基本上只执行服务器控件属性`Response.Write`的值。[`.ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

有关更多信息，请参阅[这篇关于 asp.net 中的内联表达式的文章。](http://support.microsoft.com/kb/976112)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:14:43.090

在给定的语句中用 = 替换 # 更新语句是

```
 alert(document.getElementById("<%= TextBox1.ClientId %>").value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:13:12.873

```
alert(document.getElementById('Id of control').value ) 
```

您可以通过查看源获得确切的控件ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:15:37.443

在 JavaScript 的上下文中，在客户端`"<%# TextBox1.ClientId %>"`没有任何意义，因为这将由 ASP 根据您的配置方式转换为不同的 ID，在 `TextBox1.ClientIDMode`这里您有 4 种模式描述[Control.ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:20:33.190

要么使用

```
alert(document.getElementById("<%= TextBox1.ClientId %>").value ) 
```

或设置 `ClientIDMode="Static"`为文本框，然后

```
alert(document.getElementById("<%= TextBox1 %>").value ) 
```

另请检查[如何：通过 ID 从 JavaScript 进行访问控制](http://msdn.microsoft.com/en-us/library/dd410598.aspx)

# database - 显示 wordpress 目录的 URL - 我可以删除它吗？

> ID：10618198
> 
> 赞同：0
> 
> 时间：2012-05-16T12:09:26.350
> 
> 标签：database, wordpress, url

我在名为“wp”的目录中安装了 wordpress。当我访问我的网站时，它会显示在 URL 中。

例如。关于我们页面将显示：

```
http://www.domain-name.com/wp/about 
```

我可以更改它以便不显示“wp”吗？

变得简单：

```
http://www.domain-name.com/about 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:12:25.550

您需要将 www.domain-name.com 的根目录更改为 /wp/ （相对于现在的情况）。

# java - 如果json无法转换为bean，如何在json请求/bean的spring验证中处理？

> ID：10618200
> 
> 赞同：0
> 
> 时间：2012-05-16T12:09:34.610
> 
> 标签：java, spring, spring-mvc, jackson, validation

我有经典的 Spring MVC 应用程序。

我想使用相应的 Java Bean 验证表单，并使用 JSR-303 验证注释进行注释。

表单数据由使用 JSON 的 ajax 调用发送。这个 Json 被 Jackson 转换为目标 Java Bean - 由 spring 自动转换：

```
@RequestMapping(value = ControllerConstants.CALCULATION_MAPPING_SUBMIT_FORM,method =  RequestMethod.POST)
public String submitForm(@Valid @RequestBody MyFormBean bean, final BindingResult result) { 
... 
} 
```

问题是，例如，如果我的 bean 中有一个 Integer 字段，但在 JSON 中，值不是数字。在这种情况下，它无法创建无法验证的目标 bean。这种情况无法使用自定义属性编辑器解决，因为无法将不代表整数的文本转换为整数。

似乎这在 Grails 中得到了解决，我们从验证器中得到错误（错误是域对象），它必须在数据绑定期间创建。所以我假设 spring 支持这一点，因此 Grails 只使用 Spring 的支持）

那么如何优雅地解决这种情况来处理这个“验证”错误呢？

**更新**

实际上我想通了，如果我们使用简单的表单提交，这就是spring支持的。问题在于杰克逊反序列化的集成。它不会填充错误。仍然如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:18:02.313

我看到两个选项...

1.  进行客户端验证，如果存在格式问题，则不允许提交表单。

2.  在服务器端，您必须有一种处理异常的机制，该机制将捕获它并将问题报告给客户端。

希望有帮助。

**编辑：**

那么没有客户端验证可能不是一个好的用户体验。用户不希望在进行服务器往返后被提醒有关验证错误。但是，如果这仍然是一个限制，请查看以下 url，它提供了处理此类问题和报告信息性错误消息的优雅方式。

[http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-jsr303-valid-example/)

# recursion - Prolog 递归停止

> ID：10618204
> 
> 赞同：0
> 
> 时间：2012-05-16T12:09:43.527
> 
> 标签：recursion, prolog

在底部，我给出了整个程序（ciao）的链接，以使帮助更容易。我尝试在 Prolog 函数中创建问题列表，例如

```
 questions([[[What, are,you,doing,?],[Where,am,I,Incorrect,?]]]).
 answers([[Im,doing,exercise],[I,do,nothing]],[[You,are,incorrect,at,'..'],[i,dont,know]]]).
 wordkeys([[[Incorrect,50],[doing,20]]]). 
```

我知道它看起来很乱，但我真的需要帮助，我将不胜感激。主要功能是检查哪个答案是最好的（具有最大的关键字点总和）。我的问题是一切看起来都很好（做了一些 write() 来看看发生了什么），直到它进入最后一个函数：

```
count_pnt_keys() 
```

Prolog 检查所有单词是否相等，但何时从关键字中退出应该返回到调用它的函数，但它只是 'no' 。也许我应该在只用 Tail 再次调用相同的函数之前检查列表是否为空？这个怎么做？

规则：

```
count_pnt([],[],[]).
count_pnt([Ah|At],Keys,RList) :-      %choose one answer from answer list and go further
    count_pnt_word(Ah,Keys,Pnts),     %return sum of points for one answer
    count_ADD_POINT(RList,Pnts),      %not important here
    count_pnt(At,Keys,RList).         %call again with next question
/*vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv*/
count_pnt_word([],[],0)
count_pnt_word([Ah|At],Keys,Pnts) :-  %choose one WORD from answer and go further
    count_pnt_keys(Ah,Keys,Pnts),
    count_pnt_word(At,Keys,Pnts).     %call recursion with next word from answer
/*vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv*/
count_pnt_keys([],[],0)
count_pnt_keys(AWord,[Kh|Kt],Pnts) :- %check word with all keys for first question
    get_tail_h(Kh,KWORD,KPOINTS),     %just return head and tail from first key
    AWord==KWORD,                     %check if they are equal
    /*counting points*/ !,            %counting not important when end counting points go out to next
    count_pnt_keys(AWord,Kt,Pnts). %call again if not equal and try with next key 
```

我称之为：

```
test :-
write(AnswerFirst),
count_pnt(FirstPackOfAnswer,FirstPackofKeys,ReturnedListwithpoints),
write(ReturnedListwithpoints). 
```

代码链接 (ciao) [http://wklej.org/id/754478/](http://wklej.org/id/754478/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:41:33.327

您`count_pnt`使用三个自由参数调用，这意味着`count_pnt`它将首先将其所有参数与一个空列表统一起来。在回溯时，递归`count_pnt`子句被调用，这又导致`count_pnt_keys`三个自由参数，这将导致`Ah`与`[]`etc 统一而不是失败。

你真的 `count_pnt`按照代码的建议打电话`test`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:15:17.893

```
count_pnts(_,_,[],_).
count_pnt_word(_,[],_).
count_pnt_keys([],_,_). 
```

应该看起来像这样这是一个问题

# c# - 您将如何使用出生日期计算 C# 中的年龄（考虑闰年）

> ID：10618207
> 
> 赞同：4
> 
> 时间：2012-05-16T12:10:04.243
> 
> 标签：c#, asp.net, .net, c#-4.0, datetime

这是一个问题。我见过很多解决方案，但似乎没有人符合我想要的标准......

我想以这种格式显示年龄

```
20 y(s) 2 m(s) 20 d(s)
20 y(s) 2 m(s)
2 m(s) 20 d(s)
20 d(s) 
```

ETC...

我已经尝试了几种解决方案，但是闰年导致了我的问题。由于闰年，我的单元测试总是失败，无论间隔多少天，闰年都会计算额外的天数。

这是我的代码....

```
public static string AgeDiscription(DateTime dateOfBirth)
{
    var today = DateTime.Now;
    var days = GetNumberofDaysUptoNow(dateOfBirth);
    var months = 0;
    var years = 0;
    if (days > 365)
    {
        years = today.Year - dateOfBirth.Year;
        days = days % 365;
    }
    if (days > DateTime.DaysInMonth(today.Year, today.Month))
    {
        months = Math.Abs(today.Month - dateOfBirth.Month);
        for (int i = 0; i < months; i++)
        {
            days -= DateTime.DaysInMonth(today.Year, today.AddMonths(0 - i).Month);
        }
    }

    var ageDescription = new StringBuilder("");

    if (years != 0)
        ageDescription = ageDescription.Append(years + " y(s) ");
    if (months != 0)
        ageDescription = ageDescription.Append(months + " m(s) ");
    if (days != 0)
        ageDescription = ageDescription.Append(days + " d(s) ");

    return ageDescription.ToString();
}

public static int GetNumberofDaysUptoNow(DateTime dateOfBirth)
{
    var today = DateTime.Now;
    var timeSpan = today - dateOfBirth;
    var nDays = timeSpan.Days;
    return nDays;
} 
```

有任何想法吗？？？

**更新：**

我希望两个日期之间的差异为：

```
var dateOfBirth = DateTime.Now.AddYears(-20);
string expected = "20 y(s) ";
string actual; // returns 20 y(s) 5 d(s)
actual = Globals.AgeDiscription(dateOfBirth);
Assert.AreEqual(expected, actual); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T12:18:20.113

年龄是相当棘手的。这是我使用的结构的相关摘录。

```
public struct Age
{
    private readonly Int32 _years;
    private readonly Int32 _months;
    private readonly Int32 _days;
    private readonly Int32 _totalDays;

    /// <summary>
    /// Initializes a new instance of <see cref="Age"/>.
    /// </summary>
    /// <param name="start">The date and time when the age started.</param>
    /// <param name="end">The date and time when the age ended.</param>
    /// <remarks>This </remarks>
    public Age(DateTime start, DateTime end)
        : this(start, end, CultureInfo.CurrentCulture.Calendar)
    {
    }

    /// <summary>
    /// Initializes a new instance of <see cref="Age"/>.
    /// </summary>
    /// <param name="start">The date and time when the age started.</param>
    /// <param name="end">The date and time when the age ended.</param>
    /// <param name="calendar">Calendar used to calculate age.</param>
    public Age(DateTime start, DateTime end, Calendar calendar)
    {
        if (start > end) throw new ArgumentException("The starting date cannot be later than the end date.");

        var startDate = start.Date;
        var endDate = end.Date;

        _years = _months = _days = 0;
        _days += calendar.GetDayOfMonth(endDate) - calendar.GetDayOfMonth(startDate);
        if (_days < 0)
        {
            _days += calendar.GetDaysInMonth(calendar.GetYear(startDate), calendar.GetMonth(startDate));
            _months--;
        }
        _months += calendar.GetMonth(endDate) - calendar.GetMonth(startDate);
        if (_months < 0)
        {
            _months += calendar.GetMonthsInYear(calendar.GetYear(startDate));
            _years--;
        }
        _years += calendar.GetYear(endDate) - calendar.GetYear(startDate);

        var ts = endDate.Subtract(startDate);
        _totalDays = (Int32)ts.TotalDays;
    }

    /// <summary>
    /// Gets the number of whole years something has aged.
    /// </summary>
    public Int32 Years
    {
        get { return _years; }
    }

    /// <summary>
    /// Gets the number of whole months something has aged past the value of <see cref="Years"/>.
    /// </summary>
    public Int32 Months
    {
        get { return _months; }
    }

    /// <summary>
    /// Gets the age as an expression of whole months.
    /// </summary>
    public Int32 TotalMonths
    {
        get { return _years * 12 + _months; }
    }

    /// <summary>
    /// Gets the number of whole weeks something has aged past the value of <see cref="Years"/> and <see cref="Months"/>.
    /// </summary>
    public Int32 Days
    {
        get { return _days; }
    }

    /// <summary>
    /// Gets the total number of days that have elapsed since the start and end dates.
    /// </summary>
    public Int32 TotalDays
    {
        get { return _totalDays; }
    }

    /// <summary>
    /// Gets the number of whole weeks something has aged past the value of <see cref="Years"/> and <see cref="Months"/>.
    /// </summary>
    public Int32 Weeks
    {
        get { return (Int32) Math.Floor((Decimal) _days/7); }
    }

    /// <summary>
    /// Gets the age as an expression of whole weeks.
    /// </summary>
    public Int32 TotalWeeks
    {
        get { return (Int32) Math.Floor((Decimal) _totalDays/7); }
    }
} 
```

这是一个通过的示例单元测试：

```
 [Test]
    public void Should_be_exactly_20_years_old()
    {
        var now = DateTime.Now;
        var age = new Age(now.AddYears(-20), now);

        Assert.That(age, Has.Property("Years").EqualTo(20)
            .And.Property("Months").EqualTo(0)
            .And.Property("Days").EqualTo(0));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:11:42.980

利用

```
Timespan interval = DateTime.Now - DateOfBirth; 
```

然后使用

```
interval.Days
interval.TotalDays;
interval.Hours;
interval.TotalHours;
interval.Minutes;
interval.TotalMinutes;
interval.Seconds;
interval.TotalSeconds;
interval.Milliseconds;
interval.TotalMilliseconds;
interval.Ticks; 
```

得到想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:16:26.197

检查此代码：

```
{                                                    
    dif = int(datediff("D", Convert.ToDateTime("01/" + Q101m.text + "/" + Q101y.Text), (Convert.ToDateTime(Vdate.text)))/365.25)

    //If dif < 15 Or dif > 49 
    {
           MessageBox.Show("xxxxxxx");
           Q101m.Focus();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:34:18.923

编写这个小函数以获得当年和出生年份之间的闰年天数，并将返回的天数添加到您年龄的天数部分：

```
 private static int NumberOfLeapYears(int startYear, int endYear)
 {         
 int counter = 0;
 for (int year = startYear; year <= endYear; year++)
 counter += DateTime.IsLeapYear(year) ? 1 : 0;
 return counter;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:20:07.773

```
static int AgeInYears(DateTime birthday, DateTime today)
{
    return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-11T10:55:47.367

我在 DateTime 类中创建了一个解决方案作为扩展方法，它是从@HackedByChinese“派生”的：

```
 /// <summary>
    /// Calculate age in years relative to months and days, for example Peters age is 25 years 2 months and 10 days
    /// </summary>
    /// <param name="startDate">The date when the age started</param>
    /// <param name="endDate">The date when the age ended</param>
    /// <param name="calendar">Calendar used to calculate age</param>
    /// <param name="years">Return number of years, with considering months and days</param>
    /// <param name="months">Return calculated months</param>
    /// <param name="days">Return calculated days</param>
    public static bool GetAge(this DateTime startDate, DateTime endDate, Calendar calendar, out int years, out int months, out int days)
    {
        if (startDate > endDate)
        {
            years = months = days = -1;
            return false;
        }

        years = months = days = 0;
        days += calendar.GetDayOfMonth(endDate) - calendar.GetDayOfMonth(startDate);

        // When negative select days of last month
        if (days < 0)
        {
            days += calendar.GetDaysInMonth(calendar.GetYear(startDate), calendar.GetMonth(startDate));
            months--;
        }

        months += calendar.GetMonth(endDate) - calendar.GetMonth(startDate);

        // when negative select month of last year
        if (months < 0)
        {
            months += calendar.GetMonthsInYear(calendar.GetYear(startDate));
            years--;
        }

        years += calendar.GetYear(endDate) - calendar.GetYear(startDate);

        return true;
    } 
```

但我认识到，结果天数可能与其他计算器略有不同。

# sql - 为什么 SQL 将 & 显示为 &？

> ID：10618211
> 
> 赞同：3
> 
> 时间：2012-05-16T12:10:23.880
> 
> 标签：sql, tsql

> **可能重复：**
> [帮助 FOR XML PATH('') 转义“特殊”字符](https://stackoverflow.com/questions/1051362/help-with-for-xml-path-escaping-special-characters)

我需要一些帮助，我的查询如下：

```
STUFF(
    (
      SELECT ',' + CountDesc
      FROM Count INNER JOIN ProjectCount ON Count.Id =  ProjectCount.CountId 
      WHERE ProjectCount.ProjectId = Project.Id ORDER BY Count.CountDesc
      FOR XML PATH('')
    ), 1, 1, '') as  [Country] 
```

发生的情况是，当我运行此查询并且 Count 表在其中一个字段中有 & 时，它会将 & 显示为`&amp;`。

反正有没有不让这种情况发生？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T13:21:10.490

这是因为在 XML 语句中组合的字符串使用的是 XML 特定字符。除了 & 之外，还影响 < 和 >，可能还有其他字符。

我通常会在通话后进行替换：

```
select @str = replace(@str, '&amp;', '&') 
```

并嵌套替换其他字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:39:26.207

根据XML 规范的[第 2.4 节](http://www.w3.org/TR/2000/REC-xml-20001006#syntax)`&`，必须进行转义，除非在少数特殊情况下（例如在注释或 CDATA 部分中）。如果`&`不显示为`&amp;`，则 XML 无效。

# html - 透明度的颜色变化

> ID：10618227
> 
> 赞同：0
> 
> 时间：2012-05-16T12:10:57.407
> 
> 标签：html, html5-canvas

我有一个在 javascript HTML5 画布中生成的图像。我现在想说的是，某种颜色（比如红色）的所有px都变成了透明的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:59:30.450

```
var imgd = context.getImageData(0,0, canvas.widht, canvas.height);
var pix = imgd.data;

// Loop over each pixel and set alpha channel to 255 for every red pixel
for (var i = 0; n = pix.length, i < n; i += 4) {
  if ( pix[i  ] > 240 && pix[i+1 ] < 15 && pix[i+2] < 15 ) // it is kind of red
      pix[i+3] = 255; // alpha channel
}

// Draw the ImageData object at the given (x,y) coordinates.
context.putImageData(imgd, 0,0); 
```

我没有测试代码，但它应该可以工作（如果没有，你有全局的想法）

# mysql - Coldfusion服务器映射到sql server

> ID：10618233
> 
> 赞同：0
> 
> 时间：2012-05-16T12:11:27.067
> 
> 标签：mysql, sql-server, database, coldfusion

我有一个连接到 MySQL 数据库的 ColdFusion 服务器。现在我将数据库更改为现有的 MSSql 服务器。MSSql 服务器具有与 MySQL 相似的数据库，但表名和列名不同。我的问题是，如何在不更改 ColdFusion 代码的情况下将新的 MSSql 服务器映射到 ColdFusion 服务器。意味着不更改 ColdFusion 代码中的表名和列名。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:52:13.310

如果架构不同（不同的列名和列数），那么您可能别无选择，只能重构 CF 代码以反映新的 MSSQL 架构。如果从一个数据库到下一个数据库的表和列名之间存在一对一的关系，您*可以*使用视图——但这会导致开发环境非常混乱。同样......每个表都必须“匹配”列数和数据类型。例子

```
Old table  "users"
firstname, lastname address

New table "tblUsers" 
fname, lname, addr 
```

鉴于上述模式，您的 CF 代码中可能有如下查询：

```
<cfquery name="getUsers" datasource="blah">
SELECT firstname, lastname, address
</cfquery> 
```

所以当你切换数据库时它会失败。但是，如果您创建了这样的视图：

```
CREATE    VIEW [dbo].[Users]
AS
SELECT  u.fname AS firstname, 
        u.lname AS lastname
        u.addr AS address
FROM    dbo.tblusers 
```

然后你的代码就可以工作了。我再次不推荐这个。您最好的做法是更改架构以反映您的代码或重构您的代码以针对新架构工作。但从技术上讲，它确实回答了你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:13:43.400

除非您已经在使用 ORM，否则 CF 中没有方便的函数或映射机制允许您执行此操作。在驱动程序级别可能会有一些操作，或者浸入创建 sql 字符串以在那里进行文本解析的 java 代码，但这超出了我的专业领域。

不过，我的猜测是，您有很多查询分散在整个应用程序中，因此对重做所有查询的任务感到畏惧。就个人而言，我至少会将这个应用程序的数据访问重构为一个或多个 .cfc。即使您所做的只是将每个查询包装到一个函数调用中并将 cfquery 代码替换为一个函数调用，您也可以将所有数据库调用整合到一个地方，并且可以更轻松地进行更改。

# javascript - 有效地突出显示文档中的文本 (JavaScript)

> ID：10618238
> 
> 赞同：1
> 
> 时间：2012-05-16T12:11:52.467
> 
> 标签：javascript, performance, highlight

我如何（有效地 - 不减慢计算机 [cpu]）突出显示页面的特定部分？

可以说我的页面是这样的：

```
<html>
<head>
</head>
<body>
"My generic words would be selected here" !.
<script>
//highlight code here
var textToHighlight = 'selected here" !';
//what sould I write here?
</script>
</body>
</html> 
```

我的想法是将所有正文“克隆”到一个变量中，并通过 indexOf 找到指定的文本，更改（插入带有背景颜色的跨度）“克隆”字符串并用“克隆”替换“真实”正文.
我只是觉得效率不高。
你还有其他建议吗？（有创意:)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:28:25.950

我已经根据我对 SO（[示例](https://stackoverflow.com/a/5905413/96100)）的几个类似问题的回答改编了以下内容。它被设计为可重复使用的，并且已被证明是可重复使用的。它遍历您指定的容器节点内的 DOM，在每个文本节点中搜索指定的文本，并使用 DOM 方法拆分文本节点并将相关的文本块包围在样式`<span>`元素中。

演示：http: [//jsfiddle.net/HqjZa/](http://jsfiddle.net/HqjZa/)

代码：

```
// Reusable generic function
function surroundInElement(el, regex, surrounderCreateFunc) {
    // script and style elements are left alone
    if (!/^(script|style)$/.test(el.tagName)) {
        var child = el.lastChild;
        while (child) {
            if (child.nodeType == 1) {
                surroundInElement(child, regex, surrounderCreateFunc);
            } else if (child.nodeType == 3) {
                surroundMatchingText(child, regex, surrounderCreateFunc);
            }
            child = child.previousSibling;
        }
    }
}

// Reusable generic function
function surroundMatchingText(textNode, regex, surrounderCreateFunc) {
    var parent = textNode.parentNode;
    var result, surroundingNode, matchedTextNode, matchLength, matchedText;
    while ( textNode && (result = regex.exec(textNode.data)) ) {
        matchedTextNode = textNode.splitText(result.index);
        matchedText = result[0];
        matchLength = matchedText.length;
        textNode = (matchedTextNode.length > matchLength) ?
            matchedTextNode.splitText(matchLength) : null;
        surroundingNode = surrounderCreateFunc(matchedTextNode.cloneNode(true));
        parent.insertBefore(surroundingNode, matchedTextNode);
        parent.removeChild(matchedTextNode);
    }
}

// This function does the surrounding for every matched piece of text
// and can be customized  to do what you like
function createSpan(matchedTextNode) {
    var el = document.createElement("span");
    el.style.backgroundColor = "yellow";
    el.appendChild(matchedTextNode);
    return el;
}

// The main function
function wrapText(container, text) {
    surroundInElement(container, new RegExp(text, "g"), createSpan);
}

wrapText(document.body, "selected here"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:33:15.663

```
<html>
<head>
</head>
<body>
<p id="myText">"My generic words would be selected here" !.</p>
<script>
//highlight code here
var textToHighlight = 'selected here" !';
var text = document.getElementById("myText").innerHTML
document.getElementById("myText").innerHTML = text.replace(textToHighlight, '<span style="color:red">'+textToHighlight+'</span>');
//what sould I write here?
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:23:12.813

[**将此与**](http://webcloud.se/log/Selecting-text-with-JavaScript/)[**此**](http://css-tricks.com/overriding-the-default-text-selection-color-with-css/)结合使用，您应该没问题。（这几乎比自己尝试实现选择/选择高亮逻辑要好。）

# facebook - Facebook 应用仪表板“打开图表”选项卡不可用

> ID：10618242
> 
> 赞同：0
> 
> 时间：2012-05-16T12:11:59.800
> 
> 标签：facebook, facebook-opengraph, facebook-apps

我刚刚在 Facebook Developers 上创建了我的应用程序，但是当我单击仪表板上的 Open Graph 选项卡时，它会回答“找不到页面”。

我跳过了一步吗？如何访问此选项卡并开始配置 Open Graph 对象/操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:13:58.163

奇怪这不应该发生。你能打开一个针对 facebook 的错误吗？[https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

# java - 这个简短的java代码的python等价物

> ID：10618247
> 
> 赞同：1
> 
> 时间：2012-05-16T12:12:08.730
> 
> 标签：java, python

我正在用python编写一个套接字服务器。它需要向客户端模块发送确认。引用协议描述：

> “[...]服务器应该确定它是否会接受来自该模块的数据。如果是，服务器将回复模块 01，如果不是 00。”

我在python中实现了这个：

```
connection.send('01') 
```

它不起作用，所以我检查了服务器的 java 实现：

```
 byte[] answer = {
            0x01};
        out.write(answer);
        out.flush(); 
```

我想知道它是否相同？System.out.write(answer); 似乎没有向控制台输出任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:14:11.947

您发送两个字节，`0x30`然后是`0x31`，而 Java 代码只发送一个字节，`0x01`.

请尝试以下操作：

```
connection.send('\x01') 
```

如果您想知道`0x30`and`0x31`来自哪里，它们是字符和的[ASCII](http://en.wikipedia.org/wiki/ASCII)代码。`'0'``'1'`

# html - css3 column-width：水平滚动时内容消失

> ID：10618260
> 
> 赞同：0
> 
> 时间：2012-05-16T12:12:40.397
> 
> 标签：html, css

您可以在此处查看问题：http: [//www.callensewout2011.dreamhosters.com/results.php?q=frankrijk](http://www.callensewout2011.dreamhosters.com/results.php?q=frankrijk)

谁知道如何解决这个问题？

```
<div id="result-wrapper">
<a href="article.php?articleId=173&amp;q=frankrijk">
          <div class="tile" id="tile1">
                <div class="tileTextEmpty">
                     <img src="img/logos/hbvl.png" alt="Logo van Het Belang Van Limburg">
                </div>
                <div class="tileText">
                    <h4>Vliegtuig Hollande getroffen door bliksem </h4>
                    <p>De kersverse nieuwe Franse president François Hollande heeft dinsdag voor het eerst de Duitse kanselier Angela Merkel ontmoet. Hollande moest zijn reis naar Duitsland wel even...</p>
                </div>
          </div>
     </a>
</div>

#result-wrapper {
    -webkit-column-width: 340px;
    -webkit-column-gap: 0px;
    height: 649px;
    width: 1024px;
    overflow-y: auto;
    background-color: 
    black;
}

.tile {
    height: 325px;
    background-position: center top;
    background-repeat: no-repeat;
    background-size: 340px;
    background-color: 
    black;
}

.tileTextEmpty {
    width: inherit;
    height: 155px;
    text-align: left;
}

.tileText {
    height: 135px;
    padding: 10px;
    background-color: black;
    opacity: .8;
    color: #EAEAEA;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:19:43.793

为什么不使用 display:inline-block 或使用 float:left 将内容定位到容器的末尾。

如果您不知道如何使用 display:inline-block，请参阅此内容以供参考

[http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/](http://robertnyman.com/2010/02/24/css-display-inline-block-why-it-rocks-and-why-it-sucks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:15:26.483

有一个 hbox 模块。它可能会有所帮助：

[http://ajaxian.com/archives/css-3-flexible-box-model](http://ajaxian.com/archives/css-3-flexible-box-model)

# oracle - RETURNING ... INTO ... 子句在 Oracle 和 ColdFusion 中引发错误

> ID：10618261
> 
> 赞同：1
> 
> 时间：2012-05-16T12:12:50.240
> 
> 标签：oracle, coldfusion, oracle10g, coldfusion-9

这是我正在运行的查询。

```
<cfquery name="myquery" datasource="mydatasource">
    INSERT INTO 
        myTable (myfield) 
    VALUES 
        (<cfqueryparam cfsqltype="cf_sql_varchar" value="#ARGUMENTS.myValue#" />)
    RETURNING
        id INTO <cfqueryparam cfsqltype="cf_sql_varchar" value="#LOCAL.myid#" />    
</cfquery> 
```

我得到的错误是`ORA-00439: feature not enabled: RETURNING clause from this client type`

我在 cfquery 中遇到了一个名为[GENERATEDKEY](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7fae.html)的功能，我认为这可以用来减轻我无权访问的任何数据库服务器设置。但是我似乎无法让 GENERATEDKEY 返回我的主键，而是得到类似 AAFO9cAAEAAB8vYAAH 之类的东西，这是 Oracle 的 rowid ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:10:02.823

根据您链接的文档，查询结果没有 generatekey 成员。mySQL 有一个 generated_key，但对于 oracle，它是 ROWID，尽管文档说“仅限 Oracle。插入行的 ID。这不是该行的主键，尽管您可以根据该 ID 检索行。” 我不确定如何从一个映射到另一个。如果你省略了语句的返回部分，你会得到 ROWID 的任何东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T14:36:40.540

我对coldfusion不熟悉，可能有一些简单的解决方案。
但如果没有，解决方法可能是创建一个正在使用的存储过程`returning clause`并重新调整它。
这样您就可以改为调用存储过程。

```
create or replace function insert_my_table(my_value varchar2) return number is
   i number;
begin
   insert into my_table (value_col_name) values (my_value) returning id into i;
   return i;
end insert_my_table; 
```

# java - 我的查询在带有索引的休眠中花费了太多时间

> ID：10618262
> 
> 赞同：0
> 
> 时间：2012-05-16T12:12:51.337
> 
> 标签：java, hibernate

我正在使用 Hibernate，我有这张表：

**表 my_entity：**

```
ID_ENTITY        int(10) unsigned PK
ID_ENTITY_TYPE   int(10) unsigned
NAME             varchar(256)
SYNONYM          varchar(32)
KEY `INDEX_synonym` (`SYNONYM`) 
```

我在这张表中有 180.000 行。

当我执行查询时，它需要几秒钟。

```
 query = session.createQuery("from Entity c Where synonym = :synonym");
 query.setParameter(":synonym", MYKEY);     
 lst = query.list(); 
```

如何指示 Hibernate 使用索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:22:14.343

除了生成 SQL 查询并执行它之外，Hibernate 不做任何事情。打开登录以查看它执行的查询。确保这个查询看起来像你想要的。使用您的数据库来分析执行计划并确保有必要的索引。

180,000 行对于一个像样的数据库来说不算什么。除非您的查询加载了大量具有大量急切获取的关联的实体，否则此查询应该在几毫秒内执行。

# java - 解析 BBCode 时发生 XSL 冲突

> ID：10618267
> 
> 赞同：1
> 
> 时间：2012-05-16T12:13:01.407
> 
> 标签：java, xsl-fo

我正在尝试编写解析 Xsl 文件中的 BBCODE 的代码，输入`[b]text[/b]`用于

例如，输出应该是单词 text 但以粗体显示，我已经使用方法完成了 java 类

调用`parseBBCode`并将其导入到 xsl 文件中，此方法解析 BBCode 并生成

具有新字体样式的新 xsl 标记，例如：

```
<fo:inline xsl:use-attribute-sets="font.arial.8" font-style="bold"> text</fo:inline> 
```

从 xsl 文件调用方法并将 Xpath 的 Xpath 传递给它时会出现问题

它打印的文本

实际：方法的返回值作为普通文本而不是 xsl 标签意味着它打印

文本为

```
<fo:inline xsl:use-attribute-sets="font.arial.8" font-style="bold"> text</fo:inline> 
```

预期：我需要他们将输出作为标签处理以打印正确的值。

# c# - 使用 Moq 对使用（动态）的方法进行单元测试

> ID：10618274
> 
> 赞同：0
> 
> 时间：2012-05-16T12:13:16.980
> 
> 标签：c#, unit-testing, dynamic, moq

我有以下方法：

```
public void Enqueue(ICommand itemToQueue)
{
    if (itemToQueue == null)
    {
        throw new ArgumentNullException("itemToQueue");
    }

    // Using the dynamic keywork to ensure the type passed in to the generic
    // method is the implementation type; not the interface.
    QueueStorage.AddToQueue((dynamic)itemToQueue);
} 
```

QueueStorage 是实现 IQueueStorage 的依赖项。我希望对其进行单元测试，但（动态）关键字似乎阻止了 Moq 正确绑定到它。该关键字用于在添加到队列时正确分配具体类类型而不是 ICommand 接口类型。

单元测试如下所示：

```
[Test]
public void Enqueue_ItemGiven_AddToQueueCalledOnQueueStorage()
{
    int timesAddToQueueCalled = 0;

    var dummyQueueStorage = new Mock<IQueueStorage>();
    var testCommand = new TestCommand();

    var queueManager = new AzureCommandQueueManager();

    dummyQueueStorage
        .Setup(x => x.AddToQueue(It.IsAny<TestCommand>()))
        .Callback(() => timesAddToQueueCalled++);

    queueManager.QueueStorage = dummyQueueStorage.Object;

    queueManager.Enqueue(testCommand);

    Assert.AreEqual(1, timesAddToQueueCalled);
} 
```

虽然测试命令是 ICommand 的空白实现：

```
private class TestCommand : ICommand
{
}

public interface ICommand
{
} 
```

`timesAddedToQueuCalled`没有增加。我试过使用`It.IsAny<ICommand>`但`(testCommand)`无济于事。看起来回调方法没有被执行。谁能看到我做错了什么？

编辑：IQueueStorage 代码：

```
public interface IQueueStorage
{
    void AddToQueue<T>(T item) where T : class;

    T ReadFromQueue<T>() where T : class;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:47:44.363

这是可以正常工作的代码：

```
public class AzureCommandQueueManager
{
    public void Enqueue(ICommand itemToQueue)
    {
        if (itemToQueue == null)            
            throw new ArgumentNullException("itemToQueue");

        QueueStorage.AddToQueue((dynamic)itemToQueue);
    }

    public IQueueStorage QueueStorage { get; set; }
}

public interface IQueueStorage
{
    void AddToQueue<T>(T command) where T : class;        
}

public class TestCommand : ICommand  {}

public interface ICommand {} 
```

及测试方法：

```
[Test]
public void Enqueue_ItemGiven_AddToQueueCalledOnQueueStorage()
{
    int timesAddToQueueCalled = 0;

    var dummyQueueStorage = new Mock<IQueueStorage>();
    var testCommand = new TestCommand();

    var queueManager = new AzureCommandQueueManager();

    dummyQueueStorage
        .Setup(x => x.AddToQueue(It.IsAny<TestCommand>()))
        .Callback(() => timesAddToQueueCalled++);

    queueManager.QueueStorage = dummyQueueStorage.Object;

    queueManager.Enqueue(testCommand);

    Assert.AreEqual(1, timesAddToQueueCalled);
} 
```

我看到的唯一区别 - 你有类`private`修饰符`TestCommand`。顺便说一句，如果它是私有的，您如何从测试中访问该类？

# c# - 使用 Sonar for .NET 测试覆盖率

> ID：10618280
> 
> 赞同：1
> 
> 时间：2012-05-16T12:13:34.800
> 
> 标签：c#, .net, sonarqube, gallio

我将 Sonar 3.0.1 与 C-Sharp Plugins Ecosystem 插件一起使用。

使用 Simple Java Runner 运行分析时，我没有收到任何测试覆盖率报告，而是 Gallio 打印以下错误。

> 错误 cgTestReportSensor - 找不到测试报告的源文件

这个文件意味着如果我有文件 Calc.cs 和 TestCalc.cs，Gallio 找不到前者，因此无法生成任何覆盖率报告。

我遵循默认的测试项目命名约定，Sonar 很容易将我的测试项目限定为一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:12:45.230

通常，此类错误意味着 Gallio 在执行单元测试时使用的程序集在运行 Sonar 之前没有“新”编译或移出标准“bin/debug”文件夹。

# php - 防止同一个 IP 24 小时内执行操作

> ID：10618281
> 
> 赞同：0
> 
> 时间：2012-05-16T12:13:39.287
> 
> 标签：php, mysql

所以我一直在编写这个东西，它允许用户每 24 小时点击一次按钮，同时被阻止这样做。具体的例子是一个投票脚本，它应该只允许每 24 小时投票一次（尽管用户可以再次为同一件事投票）。

所以我所做的是在 MySql 中创建一个 timelimit 表

```
CREATE  TABLE IF NOT EXISTS `timelimit` (
  `ipaddress` VARCHAR(50) NOT NULL ,
  `ipdate` DATETIME NOT NULL ,
  PRIMARY KEY (`ipaddress`) )
ENGINE = MyIsam; 
```

IP 地址是一个字符串，因为我懒得将它转换为适当的整数格式，它也应该允许 IPv6 地址。也没有 128 位整数，是吗？

我将保留另一张保存投票的表格，我认为它不在这个问题的范围内。

所以我的问题是......随机的。例如，有些人连续几天不能投票。我们还看到了一天之内的快速增长（几百个）。我们假设这是机器人的工作，因为这个脚本在验证这是否真的是用户的点击方面还没有任何安全性（这是毫无意义的，因为一切都可以由机器人完成。只是一个问题让它变得更难）。

我今天刚投了又试了，程序告诉我可以在……0小时59分钟内再次投票……应该是23小时59分钟！

这里出了点问题，我不能指手画脚。一点都不！

```
$oneday = 86400;
$ip = trim($_SERVER['REMOTE_ADDR']);
require_once "config.php";
$conn = mysql_connect($mysql_host, $mysql_user, $mysql_pass);
mysql_select_db($mysql_db);
//I apologize for still using mysql_
if (!$conn) {
    die("Connection error!");
}

mysql_query("SET time_zone='+0:00';"); // This helped me fix some issues because the field is DateTime

$res = mysql_query("SELECT COUNT(*) FROM `timelimit` WHERE ipdate <= DATE_ADD(NOW(), INTERVAL 1 DAY) AND `ipaddress` = '$ip';"); 
/* supposed to count if there is any entry corresponding 
   to the IP address wihich is in the blocked timeframe. 
   Could be the source of an error, but I can't put my finger on it... */

if (mysql_result($res,0) > 0)   {
    $res2 = mysql_query("SELECT UNIX_TIMESTAMP(ipdate) as ipdate FROM timelimit WHERE ipaddress = '$ip';");
    $lastvote = mysql_result($res2, 0, "ipdate");
    $nextvote = $lastvote + $oneday;
    $timebetween = time() - $lastvote;
    $timetonext = $nextvote - time();
        //Some calculations done for the sake of output.
    die("You can only vote once a day. You can vote again in " . date("H", $timetonext) . " hours and " . date("i", $timetonext) . " minutes");
} else {
    if (isset($_REQUEST['postid'])) {
        $postid = $_REQUEST['postid'];
        $postid = mysql_real_escape_string($postid);

        if (!is_numeric($postid)) {
            die("post id not valid");
        } //The input would be sanitized by now (I hope?)

                //VOTE IS VALID
                //*SNIP* voting logic (increases the counter with an UPDATE table SET votes = votes + 1)
                //Done with the voting, time limit logic again:

        mysql_query("DELETE FROM `timelimit` WHERE ipaddress = '$ip';");
        mysql_query("INSERT INTO `timelimit` (`ipaddress`, `ipdate`) VALUES ('$ip', UTC_TIMESTAMP);"); 
// Could probably be combined into an INSERT and ON EXIST UPDATE query.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:16:35.577

使用[PEAR FloodControl](http://pear.php.net/package/HTTP_FloodControl/)，它会为您完成一切。

示例取自[http://www.tozalakyan.com/fc/index.php#db](http://www.tozalakyan.com/fc/index.php#db)

```
CREATE TABLE fc_logs (
    unique_id varchar(32) NOT NULL,
    data text NOT NULL,
    access int UNSIGNED NOT NULL,
    PRIMARY KEY (unique_id)
) 
```

.

```
require_once 'HTTP/FloodControl.php';
try {
    $ip = HTTP_FloodControl::getUserIP();
} catch (HTTP_FloodControl_Exception $e) {
    die($e);
}
try {
    $fc =& new HTTP_FloodControl();
    $fc->setContainer('MDB2', array(
        'dsn' => 'mysql://username:password@localhost/dbname',
        'table' => 'fc_logs',
        'autooptimize' => true
    ));
    $limits = array (
        86400 => 10       // maximum 10 requests in 24 h
    );
    if (!$fc->check($limits, $ip)) {
        die('Too many requests. Please try later.');
    }
} catch (HTTP_FloodControl_Exception $e) {
    die($e);
}
// Your code... 
```

要求和依赖：

*   PHP 5
*   梨::异常
*   PEAR::DB（可选）
*   梨::MDB（可选）
*   PEAR::MDB2（可选）

# iphone - 仅作为 iPhone 提交通用应用程序

> ID：10618282
> 
> 赞同：0
> 
> 时间：2012-05-16T12:13:40.813
> 
> 标签：iphone, ios, ipad

我正在开发一个通用应用程序，但我还没有完成 iPad 版本。如何在不创建新项目或删除通用应用程序项目中的 iPad 视图控制器类/代码的情况下仅提交 iphone 版本。苹果会批准这样的提交吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:15:42.033

转到您的项目并单击摘要选项卡。在捆绑包标识符和版本号下方有一个设备下拉列表，将其从通用更改为 iPhone。

![在此处输入图像描述](../Images/77bcd1715d2ae12cd9e146c4a8bb9397.png)

# javascript - 在 Backbone.js 的 View 初始化方法中调用外部函数

> ID：10618285
> 
> 赞同：0
> 
> 时间：2012-05-16T12:13:56.147
> 
> 标签：javascript, jquery, backbone.js, underscore.js

在 Backbone.js 的视图中，我有初始化和填充终端功能，如

```
fillTerminal: function() {
    // something to print
},
initialize: function() {
    this.model.bind('change:attr', function(styleProperty, styleValue) {
        // here I want to call fillTerminal function
    });
} 
```

我试过喜欢`fillTerminal()`和`this.fillTerminal(`）但没有成功。有什么解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:53:11.147

在这种情况下绑定时，您必须传入“this”的上下文。您可以在此处阅读有关上下文参数的更多信息：[http ://documentcloud.github.com/backbone/#Events](http://documentcloud.github.com/backbone/#Events)

```
fillTerminal:function(){
    //something to print
},

initialize : function() {
    this.model.bind('change:attr', function(styleProperty, styleValue) {

        // here I want to call fillTerminal function
        this.fillTerminal();

    }, this);
} 
```

# python - M2Crypto.rsa 私钥组件

> ID：10618286
> 
> 赞同：0
> 
> 时间：2012-05-16T12:13:58.957
> 
> 标签：python, components, rsa, private-key, m2crypto

谁能告诉我，如何获取 rsa 私钥的 p、q、dp、dq 和 u 组件？加载密钥：

```
string = open(keyfile,"rb").read();
bio = BIO.MemoryBuffer(string);
rsa = RSA.load_key_bio(bio); 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:13:58.270

`M2Crypto`不支持直接读取rsa参数，不好意思。

`res.pub()`你可以从（有点，因为第一个字节不是它的一部分）得到 e （公共指数）和 n （模数）。

`Crypto`另一方面， API 支持读取更多参数：

```
string = open(keyfile,"rb").read()
import Crypto.PublicKey.RSA
crsa = Crypto.PublicKey.RSA.importKey(string)
print(crsa.n, crsa.e, crsa.d, crsa.p, crsa.q, crsa.u) 
```

# c# - BitmapEffect 替换为 Effects

> ID：10618291
> 
> 赞同：1
> 
> 时间：2012-05-16T12:14:24.240
> 
> 标签：c#, wpf

我有一些代码可以应用于`DropShadowBitmapEffect`UserControl。

Visual Studio 表示`this.BitmapEffect`已***弃用***，我们必须使用`Effects`.

那应该怎么做呢？

```
DropShadowBitmapEffect myDropShadowEffect = new DropShadowBitmapEffect();
myDropShadowEffect.Color = GetShadowColorValue();
myDropShadowEffect.Direction = 250;
// Set the depth of the shadow being cast.
myDropShadowEffect.ShadowDepth = 0;
// Set the shadow softness to the maximum (range of 0-1).
myDropShadowEffect.Softness = 1;
// Set the shadow opacity to half opaque or in other words - half transparent.
// The range is 0-1.
myDropShadowEffect.Opacity = 0.7;
// Apply the bitmap effect to the Button.
this.BitmapEffect = myDropShadowEffect; // BitmapEffect is deprecated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:19:06.540

```
DropShadowEffect myDropShadowEffect = new DropShadowEffect();

myDropShadowEffect.Color = GetShadowColorValue();
myDropShadowEffect.Direction = 250;

// Set the depth of the shadow being cast.
myDropShadowEffect.ShadowDepth = 0;

// Set the shadow softness to the maximum (range of 0-1).
// myDropShadowEffect.Softness = 1;

// Set the shadow opacity to half opaque or in other words - half transparent.
// The range is 0-1.
myDropShadowEffect.Opacity = 0.7;

// Apply the effect to the Button.
this.Effect = myDropShadowEffect; 
```

我不确定什么是等价于`Softness`...您可以尝试调整该[`BlurRadius`](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.dropshadoweffect.blurradius.aspx)值

# apache-flex - AutoSizing Flex Mobile spark textarea 组件

> ID：10618293
> 
> 赞同：8
> 
> 时间：2012-05-16T12:14:26.563
> 
> 标签：apache-flex, flex4, flex4.5, flex-mobile

我想让我的***移动 spark textarea***组件包装所有内容。我发现了 mx_internal 这样做的方式，但我无法调用**mx_internal::getTextField().numLines**方法 - 没有这样的......以前有人做过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:31:32.993

以下是移动端的解决方案：

```
for(var i:int=0; i < StyleableTextField(txt_genel.textDisplay).numLines; i++) {
        ta_height += StyleableTextField(txt_genel.textDisplay).getLineMetrics(i).height;
}
txt_genel.height = ta_height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:33:37.803

这是一个带有少量自定义 TextArea 类的解决方案，有一些注释可以解释更多。

```
package
{   
    import mx.events.FlexEvent;

import spark.components.TextArea;
import spark.components.supportClasses.StyleableStageText;
import spark.events.TextOperationEvent;

public class CustomTextArea extends TextArea
{

    private var _lineNumber:int = 1;
    private var _padding:int;
    private var _minHeight:int;

    public function CustomTextArea()
    {
        super();

        addEventListener(FlexEvent.CREATION_COMPLETE, function setBehaviour(event:FlexEvent):void
        {
            //minHeight to prevent textarea to be too small
            _minHeight = height;
            //padding between textarea and text component inside to calculate line number
            _padding = ((textDisplay as StyleableStageText).x - x) + (width - (textDisplay as StyleableStageText).width);
            //listener for text changing
            addEventListener(TextOperationEvent.CHANGE, setHeight);
        });
    }

    private function setHeight(event:TextOperationEvent):void
    {
        //line number is textwidth divided by component width
        _lineNumber = (((textDisplay as StyleableStageText).measureText(text).width + _lineNumber * _padding) / width) + 1;
        //text height is line number * text height
        var newHeight:int = _lineNumber * (textDisplay as StyleableStageText).measureText(text).height;
        //if new height > min height, set height
        if (newHeight > _minHeight)
            height = newHeight;
    }
}
} 
```

希望这会有所帮助。

编辑：由于行数很多，TextArea 的高度上升太多。应该管。

# android - Android：换屏

> ID：10618299
> 
> 赞同：1
> 
> 时间：2012-05-16T12:15:06.000
> 
> 标签：android, android-activity

> **可能重复：**
> [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

我的应用程序启动并加载第一个屏幕，然后用户通过单击按钮切换到下一个屏幕：

```
 Intent intent = new Intent(DashboardActivity.this, LoginActivity.class);
            startActivity(intent); 
```

然后从那里，用户再次切换到下一个屏幕：

```
 Intent intent = new Intent(LoginActivity.this, NextActivity.class);
            startActivity(intent); 
```

现在堆栈上应该有 3 个屏幕，在最后一个屏幕中，我想一直回到第一个屏幕，如何单击一下？我想将 putExtra("") 数据从最后一个屏幕发送到第一个屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:19:41.930

你可以这样做

```
Intent intent = new Intent(NextActivity.this, DashboardActivity.class);
// This will remove all activities which are on the top of DashboardActivity
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.putExtra("<Your data will be here>");
startActivity(intent); 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:33:51.927

添加这个

在 NextActivity 中，

```
Intent myIntent = new Intent(NextActivity.this, DashBoardActivity.class);
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  myIntent.putExtra("UserName",UserName);
   startActivity(myIntent); 
```

在仪表板活动中，

```
Intent intent = getIntent();
UserName=intent.getStringExtra("UserName"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:20:41.463

它非常简单，你必须再次创建一个指向第一个活动的 Intent 并在那里获取你的数据：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:21:04.013

```
 Intent intent = new Intent(LoginActivity.this, DashboardActivity.class);
 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
 intent.putExtra("string",strValue);
 startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T13:38:06.323

```
Intent intent = new Intent(NextActivity.this, LoginActivity.class);
 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
   startActivity(intent ); 
```

这将从活动堆栈中清除当前活动顶部的所有活动。

# javascript - js动态修改表单时如何更新yiiactiveform设置？

> ID：10618301
> 
> 赞同：1
> 
> 时间：2012-05-16T12:15:11.860
> 
> 标签：javascript, yii

我已经通过 CActiveForm 生成了表单，但是当我通过 javascript 验证输入下一个表单时，不会影响这些。

我知道所有分配输入的属性都可以在`$('ourForm').data('settings').attributes`.

我将通过编辑属性完成解决方案，但我想知道这是否是其他最简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T13:29:38.593

我也想知道，这就是我想出的：

```
var settings = $('#my-active-form').data('settings');
    settings.attributes.push({
        enableAjaxValidation: true,
        errorCssClass: "has-error",
        errorID: 'InputId_em_',
        id: 'InputId',
        inputContainer: "div.form-group",
        model: 'ModelName',
        name: 'modelName[attribute]',
        status: 1,
        successCssClass: 'has-success',
        validateOnChange: true
        //... some other params here...
    });

    jQuery('#my-active-form').yiiactiveform(settings); 
```

工作正常。请注意，inputContainer、errorCssClass、successCssClass 和类似的属性取决于您用来显示活动表单字段的样式。这是引导 3 样式的活动表单输入的设置

# performance - UNION ALL 耗时太长

> ID：10618307
> 
> 赞同：1
> 
> 时间：2012-05-16T12:15:35.090
> 
> 标签：performance, postgresql, query-optimization, union-all

我在多个表上聚集了数据，通常它们看起来像这样：

```
CREATE TABLE 2012_03_09 (
    guid_key integer,
    property_key integer,
    instance_id_key integer,
    time_stamp timestamp without time zone,
    "value" double precision
) 
```

使用这些索引：

```
CREATE INDEX 2012_03_09_a
  ON 2012_03_09
  USING btree
  (guid_key, property_key, time_stamp);

CREATE INDEX 2012_03_09_b
  ON 2012_03_09
  USING btree
  (time_stamp, property_key); 
```

当我分析我的查询时，追加操作的总时间困扰着我。你能解释一下，为什么查询运行时间过长？有什么办法可以优化这样的查询吗？

```
Sort  (cost=262.50..262.61 rows=47 width=20) (actual time=1918.237..1918.246 rows=100 loops=1)    
  Output: 2012_04_26.time_stamp, 2012_04_26.value, 2012_04_26.instance_id_key    
  Sort Key: 2012_04_26.instance_id_key, 2012_04_26.time_stamp    
  Sort Method:  quicksort  Memory: 32kB    
  ->  Append  (cost=0.00..261.19 rows=47 width=20) (actual time=69.817..1917.848 rows=100 loops=1)    
        ->  Index Scan using 2012_04_26_a on 2012_04_26  (cost=0.00..8.28 rows=1 width=20) (actual time=14.909..14.909 rows=0 loops=1)    
              Output: 2012_04_26.time_stamp, 2012_04_26.value, 2012_04_26.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_04_27_a on 2012_04_27  (cost=0.00..8.28 rows=1 width=20) (actual time=1.535..1.535 rows=0 loops=1)    
              Output: 2012_04_27.time_stamp, 2012_04_27.value, 2012_04_27.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_02_a on 2012_05_02  (cost=0.00..12.50 rows=2 width=20) (actual time=53.370..121.894 rows=6 loops=1)    
              Output: 2012_05_02.time_stamp, 2012_05_02.value, 2012_05_02.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_03_a on 2012_05_03  (cost=0.00..24.74 rows=5 width=20) (actual time=59.136..170.215 rows=11 loops=1)    
              Output: 2012_05_03.time_stamp, 2012_05_03.value, 2012_05_03.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_04_a on 2012_05_04  (cost=0.00..12.47 rows=2 width=20) (actual time=67.458..125.172 rows=5 loops=1)    
              Output: 2012_05_04.time_stamp, 2012_05_04.value, 2012_05_04.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_05_a on 2012_05_05  (cost=0.00..8.28 rows=1 width=20) (actual time=14.112..14.112 rows=0 loops=1)    
              Output: 2012_05_05.time_stamp, 2012_05_05.value, 2012_05_05.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_07_a on 2012_05_07  (cost=0.00..12.46 rows=2 width=20) (actual time=60.549..99.999 rows=4 loops=1)    
              Output: 2012_05_07.time_stamp, 2012_05_07.value, 2012_05_07.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_08_a on 2012_05_08  (cost=0.00..24.71 rows=5 width=20) (actual time=63.367..197.296 rows=12 loops=1)    
              Output: 2012_05_08.time_stamp, 2012_05_08.value, 2012_05_08.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_09_a on 2012_05_09  (cost=0.00..28.87 rows=6 width=20) (actual time=59.596..224.685 rows=15 loops=1)    
              Output: 2012_05_09.time_stamp, 2012_05_09.value, 2012_05_09.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_10_a on 2012_05_10  (cost=0.00..28.85 rows=6 width=20) (actual time=56.995..196.590 rows=13 loops=1)    
              Output: 2012_05_10.time_stamp, 2012_05_10.value, 2012_05_10.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_11_a on 2012_05_11  (cost=0.00..20.59 rows=4 width=20) (actual time=62.761..134.313 rows=8 loops=1)    
              Output: 2012_05_11.time_stamp, 2012_05_11.value, 2012_05_11.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_12_a on 2012_05_12  (cost=0.00..8.28 rows=1 width=20) (actual time=12.018..12.018 rows=0 loops=1)    
              Output: 2012_05_12.time_stamp, 2012_05_12.value, 2012_05_12.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_13_a on 2012_05_13  (cost=0.00..8.28 rows=1 width=20) (actual time=12.286..12.286 rows=0 loops=1)    
              Output: 2012_05_13.time_stamp, 2012_05_13.value, 2012_05_13.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_14_a on 2012_05_14  (cost=0.00..16.58 rows=3 width=20) (actual time=92.161..156.802 rows=6 loops=1)    
              Output: 2012_05_14.time_stamp, 2012_05_14.value, 2012_05_14.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_15_a on 2012_05_15  (cost=0.00..25.03 rows=5 width=20) (actual time=73.636..263.537 rows=14 loops=1)    
              Output: 2012_05_15.time_stamp, 2012_05_15.value, 2012_05_15.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
        ->  Index Scan using 2012_05_16_a on 2012_05_16  (cost=0.00..12.56 rows=2 width=20) (actual time=100.893..172.404 rows=6 loops=1)    
              Output: 2012_05_16.time_stamp, 2012_05_16.value, 2012_05_16.instance_id_key    
              Index Cond: ((guid_key = 2105) AND (property_key = 67) AND (time_stamp >= '2012-04-16 00:00:00'::timestamp without time zone) AND (time_stamp <= '2012-05-16 06:25:50.172'::timestamp without time zone))    
Total runtime: 1918.745 ms 
```

# 更新：

还发布 SQL 查询：

```
select time_stamp, value, instance_id_key as segment from perf_hourly_2012_04_26 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_04_27 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_02 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_03 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_04 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_05 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_07 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_08 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_09 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_10 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_11 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_12 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_13 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_14 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_15 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
UNION ALL
select time_stamp, value, instance_id_key as segment from 2012_05_16 where guid_key = 2105 and property_key=67 and time_stamp between '2012-04-16 00:00:00.0'::timestamp without time zone and '2012-05-16 06:25:50.172'::timestamp without time zone
ORDER BY 3 ASC, 1 ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:12:42.690

看起来你应该检查[Postgresql Partitioning](http://www.postgresql.org/docs/8.1/static/ddl-partitioning.html)。您的查询会更简单，并且性能可能会更好（不是 100% 肯定，但我认为值得一试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:02:45.630

除了追加之外，所有行似乎都是第一种类型的索引扫描。我不得不怀疑这是否是最好的索引。由于您似乎选择了重要的时间范围，因此唯一的其他选择是 guid_key 和 property_key。哪个更有选择性？更具选择性的列应该放在第一位（也就是说，如果您不担心排序，我认为您不应该对 100 行进行排序）其次，您是否为此查询或其他查询添加了这些索引？它*可能*如果它们在其他任何地方都没有用，那么丢弃它们是有意义的。索引实际上会降低性能，特别是如果表记录大部分时间已经在内存中，因为它们可能需要数据库从内存中卸载记录以加载索引（然后在完成后重新加载表记录与索引扫描）。

我能给出的唯一真正的建议就是*玩它*。

编辑：

（当然还有其他问题，为什么这些记录没有某种主键，并且我忽略的表本身没有/没有集群，但它们在这里也起作用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T18:18:14.127

UNION 不是您的计时问题，它报告的经过时间基本上是每个分区的索引扫描时间的总和。您的 _a 索引看起来对您的查询谓词具有适当的选择性。我在解释分析中看到的实时罪魁祸首是，在每个分区上进行索引扫描，只检索几行需要很长时间。例如：2012_05_04 5 行 125 毫秒。索引扫描可能会调用 0-5 次查找，具体取决于缓存状态和表大小，如果数据未聚集，则每个数据行将进行一次查找。一个慢速的单轴磁盘应该能够在大约 10 毫秒内进行寻道和块获取，因此对于糟糕的存储系统进行扫描的最坏情况是大约 100 毫秒，但对于更常见的 7200 或 10K rpm 磁盘和多轴，最差假设没有缓存命中的情况应低于 50 毫秒。

此查询在第一次之后立即在第二次尝试时运行得更快吗？如果是这样，这表明存储速度较慢，冷缓存是问题所在。数据库运行在什么样的存储上？如果我们谈论的是缓慢的笔记本电脑驱动器或高延迟的网络挂载，那就可以解释糟糕的 IO 性能。索引扫描也可能受到极端索引膨胀的影响。如果您有数十或数百个死索引条目，因为使用不正确的真空方案对数据进行更新/删除搅动，那么这可能是罪魁祸首。这些表是否定期清空和分析？

正如 Adrian Serafin 所建议的，您应该研究 Pg 的表分区功能。

# jquery - IE8 中的 jQuery SlideDown 不会下推下一个元素

> ID：10618308
> 
> 赞同：1
> 
> 时间：2012-05-16T12:15:35.340
> 
> 标签：jquery, internet-explorer-8, slidedown, slideup

有一个`div`, 后面是一个`ul`.

我适用`slideDown`于`div`, 并且在所有浏览器中都很好地推动了`ul`除 IE8 之外的所有浏览器，其中`div`覆盖了`ul`.

当我应用`slideUp`到 div 时，它*会*`ul`向下滑动 - 在它和前一个元素之间留下很大的间隙。

有没有人遇到过这种行为？可能是什么原因造成的？

[你可以在这里](http://dev.linux.ort.org.il/colleges/)看到一个例子：

单击此图像时会激活 和`slideDown`：`slideUp`![在此处输入图像描述](../Images/e71b861f39e618a431a6f4dda98bc477.png)

它使这个 div 出现或消失： ![在此处输入图像描述](../Images/c6c04c77ce614df6ae7ab0a4764363c7.png)

这就是`ul`当该 div 出现和消失时应该下降和上升的分别： ![在此处输入图像描述](../Images/8e9f69602339c185db400d0dfe98169e.png)

这是代码。的HTML：

```
<div class="clearfix" id="whatWhere">
<ul>
<!--what-->
    <li id="what">
        <span>מה</span>
         <div class="list">
            <ul class="">
              <li class="orange"><a href="http://dev.linux.ort.org.il/colleges?cat=7">אדריכלות ועיצוב פנים</a></li>
              <li class="gray"><a href="http://dev.linux.ort.org.il/colleges?cat=14">אלקטרוניקה</a></li>
              </ul>    
             <div class="toClose">
             <img width="37" height="18" src="http://dev.linux.ort.org.il/colleges/wp-content/themes/twentyeleven/images/close.png">
             </div>
            </div><!--end list-->
    </li>
 <!-- where -->
    <li id="where">
            <span>איפה</span>
            <div class="list">
            <ul class="">
                <li class="orange"><a href="http://dev.linux.ort.org.il/colleges/?p=21">מכללת אורט כפר סבא</a></li>
                <li class="gray"><a href="http://dev.linux.ort.org.il/colleges/?p=19">מכללת אורט קרית ביאליק</a></li>
            </ul>

                 <div class="toClose">
             <img width="37" height="18" src="http://dev.linux.ort.org.il/colleges/wp-content/themes/twentyeleven/images/close.png">
             </div>
                </div><!--end list-->
     </li>
   </ul>
</div>

<ul id="links">
   <li id="hashlama"><a href="http://dev.linux.ort.org.il/colleges/?p=161">השלמה לתואר ראשון להנדסאים</a></li>
   <li id="michlalot"><a href="http://dev.linux.ort.org.il/colleges/?p=165">מכללות אקדמיות להנדסה</a></li>
</ul> 
```

这是 JavaScript：

```
 $(document).ready(function() {  
                  $("#whatWhere ul li  span").click(function () {
                      //if another li open- closed;
                    if($(this).parent().siblings().children(".list").hasClass("highlight")){
                        // $(this).parent().siblings().children("ul").slideUp("slow"); 
                        $(this).parent().siblings().children(".list").css("display","none"); 
                         $(this).parent().siblings().removeClass("open");
                         $(this).parent().siblings().addClass("standBy");
                         $(this).parent().siblings().children(".list").toggleClass("highlight");   
                    } 
                    //open ul of selected li area
                    $(this).next().toggleClass("highlight");   
                    if($(this).next().hasClass("highlight"))
                        {
                        //#whatWhere
                            $(this).parent().parent().parent().addClass("open");
                            //li
                             $(this).parent().addClass("open");
                             $(this).next().slideDown("slow");
                             $(this).parent().siblings().addClass("standBy");
                             $(this).parent().removeClass("standBy");
                        }
                    else
                        {
                         $(this).parent().parent().parent().removeClass("open");
                         //li
                             $(this).parent().removeClass("open");
                         $(this).next().slideUp("slow"); 
                        // $(this).next().css("display","none"); 
                         $(this).parent().siblings().removeClass("standBy");
                         $(this).parent().removeClass("standBy");
                        }
                    }); 

                    $("#whatWhere ul li  .list  div.toClose").click(function () {
                         $(this).parent().parent().parent().parent().removeClass("open"); /*div #whatWhere*/
                             $(this).parent().parent().removeClass("open"); /*li #what/#where*/
                         $(this).parent().slideUp("slow"); 

                         $(this).parent().parent().siblings().removeClass("standBy");/* the other li #what/#where*/
                          $(this).parent().toggleClass("highlight");   /* div .list - maybe not needed*/
                    }); 
                }); 
```

（前段时间我问了一个[关于相同代码](https://stackoverflow.com/q/9989910/278)的问题（并得到了一个很好的答案），但问题出在 Chrome 中，问题行为不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:19:00.743

我有一个类似的问题，问题似乎与圆角的使用有关

```
behavior: url(border-radius.htc); 
```

我的疯狂猜测是任何 CSS 的行为指令都会引起麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:28:57.380

我最终重新编写了 HTML，因此`div`with class="list" 位于`li`id 的“何时”和“哪里”之外。我当然也修改了 JavaScript，以适应这种变化，这就解决了问题

# scorm - SCORM 1.2 到 SCORM 2004 第 3 版转换器

> ID：10618320
> 
> 赞同：1
> 
> 时间：2012-05-16T12:16:12.460
> 
> 标签：scorm, scorm2004, scorm1.2

我正在寻找免费的 SCORM 1.2 到 SCORM 2004 第 3 版转换器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T00:05:15.953

内容很可能已经直接与 LMS 对话。
SCORM 1.2 你会说 lms.LMSGetValue(n) 与 SCORM 2004 你会说 lms.GetValue(n)。所以你可以寻找'API_1484_11'而不是'API'，然后像上面那样进行翻译，这可以解决问题。据我所知，虽然没有魔法转换器。

[http://github.com/cybercussion/SCOBot](http://github.com/cybercussion/SCOBot)。维基已更新。我构建它是为了讨论 SCORM 2004，但可以半优雅地回滚到 1.2，但对字符限制有一定程度的了解，而且 1.2 的大部分内容都是可选地在 LMS 上实现的。至少可以抽出一些东西。

根据 SCORM 1.2 中的“API”查找机制，您可能能够对其进行欺骗。本质上是让内容连接到一个假的“API”，然后转发到 API_1484_11。取决于查找是从上到下还是自下而上开始。

祝你好运

# ruby - 从 Cucumber 输出“管道”时的文本着色

> ID：10618323
> 
> 赞同：1
> 
> 时间：2012-05-16T12:16:33.187
> 
> 标签：ruby

我尝试通过 Ruby 将命令行命令的输出传递给管道。它工作正常，但缺少着色。我怎样才能保存颜色？

这就是我的代码的样子：

```
cmd = "cucumber #{ARGV.join(" ")}"
IO.popen(cmd) do |io|
  io.each { |s| print s }
end 
```

更新：问题的前提是错误的 - IO.popen**确实**保留了颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:43:41.303

`-c`使用该选项运行黄瓜。否则 cucumber 确定终端（管道）不支持着色，如果没有明确强制使用，将丢弃它`-c`。

[https://github.com/cucumber/cucumber/blob/master/lib/cucumber/cli/options.rb#L211](https://github.com/cucumber/cucumber/blob/master/lib/cucumber/cli/options.rb#L211)

```
...
opts.on("-c", "--[no-]color",
        "Whether or not to use ANSI color in the output. Cucumber decides",
        "based on your platform and the output destination if not specified.")
... 
```

# java - 如何在 Android Activity 中从位图创建 Blob？

> ID：10618325
> 
> 赞同：5
> 
> 时间：2012-05-16T12:16:34.757
> 
> 标签：java, android, google-app-engine

我正在尝试创建新的 MyImage ，如[如何使用 google app engine 上传和存储图像](https://stackoverflow.com/questions/1513603/how-to-upload-and-store-an-image-with-google-app-engine-java)中所列。

现在我没有使用任何表格。我有从 Gallery 获取 Uri 的 Android 应用程序：

```
m_galleryIntent = new Intent();
m_galleryIntent.setType("image/*");
m_galleryIntent.setAction(Intent.ACTION_GET_CONTENT);

m_profileButton.setOnClickListener(new OnClickListener()
{
    public void onClick(View v) 
    {
        startActivityForResult(Intent.createChooser(m_galleryIntent, "Select Picture"),1);      
    }
}); 
```

我正在使用 Uri 创建位图。
如何从位图在我的客户端中创建 Blob？
我必须将哪些 jars 添加到我的 android 项目中？

这是使用 Blob 的正确方法吗？
我的主要目标是在 GAE 数据存储中保存从 android 上传的图像，是正确使用此工具还是更好的方法？那就是。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T12:36:17.847

您必须将其转换`Bitmap`为 a `byte[]`，然后才能将其作为 Blob 存储在数据库中。

要将 a 转换`Bitmap`为 a `byte[]`，您可以使用以下命令：

```
Bitmap yourBitmap;
ByteArrayOutputStream bos = new ByteArrayOutputStream();
yourBitmap.compress(Bitmap.CompressFormat.PNG, 100, bos);
byte[] bArray = bos.toByteArray(); 
```

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T11:45:14.007

您可以使用此代码：

```
public static byte[] getBytesFromBitmap(Bitmap bitmap) {
    if (bitmap!=null) {
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG, 70, stream);
        return stream.toByteArray();
    }
    return null;
} 
```

用于转换`bitmap`为 blob。

## 笔记：

blob 是一个二进制大对象。

# c# - EF中子对象的选择性延迟加载

> ID：10618328
> 
> 赞同：1
> 
> 时间：2012-05-16T12:16:40.843
> 
> 标签：c#, entity-framework, entity-framework-4, lazy-loading

我怀疑这是可能的，但无论如何我都会问，以防万一，是否可以调整延迟加载以仅加载“IsDeleted”属性为假的子对象？

这只是为了帮助解决我需要将 .where(x => !x.IsDeleted) 添加到我的大多数方法的事实，这在我看来很混乱。

**编辑**

我的实体是使用 CodeFirst 创建的

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:30:02.237

如果您使用[条件映射](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/06/15/using-conditional-mapping-in-entity-framework.aspx)，这是可能的。在这种情况下，EF 将永远不会加载`IsDeleted`设置为 true 的任何内容，但同时`IsDeleted`列将在您的实体中根本不可用（因为它将用于映射）。如果您的应用程序也可以设置此标志，您将需要为实体映射存储过程 - 您甚至可以为删除操作映射存储过程，这将在数据库中设置标志而不是删除项目。

# c# - 列表中的 WPF Listview 数据绑定

> ID：10618329
> 
> 赞同：2
> 
> 时间：2012-05-16T12:16:46.567
> 
> 标签：c#, wpf, listview, data-binding

我有一个带有几列的列表视图和一个按钮，该按钮加载一个新窗口以输入数据并将数据提交到列表视图。下面有一个截图。 [http://img16.imageshack.us/img16/2597/databinding.jpg](http://img16.imageshack.us/img16/2597/databinding.jpg)

单击添加按钮时，我仅尝试将一项添加到列表视图

```
<ListView x:Name="StepsListView" Height="100" ItemsSource="{Binding Source currentStep}">
       <ListView.View>
          <GridView>
            <GridViewColumn Header="Priority" Width="50" DisplayMemberBinding="{Binding Path=stepPriority}"></GridViewColumn>
            <GridViewColumn Header="Description" Width="185" DisplayMemberBinding="{Binding Path=stepDescription}"></GridViewColumn>
            <GridViewColumn Header="Time" Width="50" DisplayMemberBinding="{Binding Path=stepTime}"></GridViewColumn>
            <GridViewColumn Header="Dep" Width="50" DisplayMemberBinding="{Binding Path=stepDependency}"></GridViewColumn>
            <GridViewColumn Header="Type" Width="100" DisplayMemberBinding="{Binding Path=stepType}"></GridViewColumn>
          </GridView>
       </ListView.View>
</ListView> 
```

这是我的 xaml 代码。请注意，我对 WPF 完全陌生，我使用的“绑定”代码只是来自网络的小片段。我尝试了几种不同的方法，现在我很困惑。

我有一个名为 StepItem 的数据对象。优先级应该是列表视图中的项目编号，因此第一项是优先级 1。

```
public class StepItem
{
    public string stepDescription { get; set; }
    public int stepTime { get; set; }
    public int stepDependency { get; set; }
    public int stepPriority { get; set; }
    public string stepType { get; set; }
} 
```

步骤按钮代码如下。currentStep 是步骤项目的列表

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        Methods start = new Methods();
        start.currentStep = new List<StepItem>();
        string dependency = dependencyTextBox.Text;
        string time = TimeTextbox.Text;
        string priority = priorityTextbox.Text;

        start.currentStep.Add(new StepItem()
        {
            stepDescription = DescriptionTextBox.Text,
            stepDependency = Convert.ToInt32(dependency),
            stepTime = Convert.ToInt32(time),
            stepType = typeTextBox.Text,
            stepPriority = Convert.ToInt32(priority)

        });

        NewRecipe n = new NewRecipe();
        n.addSteptoList(start.currentStep);
    } 
```

然后我需要一些代码来将项目添加到现在我已经得到的列表视图中

```
 public void addSteptoList(List<StepItem> item)
    {
        StepsListView.Items.Add(item);
    } 
```

这段代码现在可能有点乱，因为我一直在搞乱它试图让数据绑定工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:23:25.140

您正在绑定到 ListView 以

```
{Binding Source currentStep} 
```

您需要将 currentStep 设为公共属性

去除

```
public void addSteptoList(List<StepItem> item)
    {
        StepsListView.Items.Add(item);
    } 
```

如果您在按钮中添加了新的 currentStep，则所有项目都将丢失，并且只有最后一个项目

对于数据上下文

this.datacontext = 这个

# java - Android Twitter4J 自动检索 OAuth 和 oauth_token_secret？

> ID：10618330
> 
> 赞同：2
> 
> 时间：2012-05-16T12:16:48.440
> 
> 标签：java, android, twitter4j

我已经在我的 Android 应用程序中实现了 Twitter4J，它运行良好。但是在我使用 twitter 登录页面登录后，它会要求用户手动输入 PIN 码。

在 Twitter4J 类中，有一种方法可以检索和存储（到 sharedpreferences 中）OAuth 和 oauth_token_secret。

```
/**
* Retrieve the oauth_verifier, and store the oauth and oauth_token_secret 
* for future API calls.
*/
@Override
protected Void doInBackground(Uri...params) {
        final Uri uri = params[0];
        final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

        try {
            provider.retrieveAccessToken(consumer, oauth_verifier);

            final Editor edit = prefs.edit();
                    edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
                    edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
                    edit.commit();

                    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
                    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

                    consumer.setTokenWithSecret(token, secret);
                    context.startActivity(new Intent(context,MainAct.class));

                    executeAfterAccessTokenRetrieval();

                    Log.i(TAG, "OAuth - Access Token Retrieved");

                } catch (Exception e) {
                    Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
                }

                return null;
    } 
```

清单 - PrepareRequestTokenActivity

```
<activity android:name=".PrepareRequestTokenActivity" android:launchMode="singleTask">>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="x-oauthflow-twitter" android:host="callback" />
        </intent-filter>
</activity> 
```

我不明白为什么它不检索`OAUTH_TOKEN`和`OAUTH_SECRET`. 如何在不输入 PIN 码的情况下进行授权？难道我做错了什么？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:00:47.807

嘿，这段代码可能会有所帮助，

```
AccessToken accessToken = getAccessToken();

        Configuration conf = new ConfigurationBuilder()
                .setOAuthConsumerKey(TwitterConstants.CONSUMER_KEY)
                .setOAuthConsumerSecret(TwitterConstants.CONSUMER_SECRET)
                .setOAuthAccessToken(accessToken.getToken())
                .setOAuthAccessTokenSecret(accessToken.getTokenSecret())
                .build();

        OAuthAuthorization auth = new OAuthAuthorization(conf,
                conf.getOAuthConsumerKey(), conf.getOAuthConsumerSecret(),
                new AccessToken(conf.getOAuthAccessToken(),
                        conf.getOAuthAccessTokenSecret())); 
```

并获得 AccessToken，

```
public AccessToken getAccessToken() {
    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String tokenSecret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    if (token != null && tokenSecret != null)
        return new AccessToken(token, tokenSecret);
    else
        return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:32:28.930

而不是进行基于 PIN 的身份验证，你可以试试这个例子 [https://github.com/ddewaele/AndroidTwitterSample](https://github.com/ddewaele/AndroidTwitterSample)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T04:17:07.327

我解决了这个问题。这是回调 URL 的问题。

我编辑了这样的常量并且它起作用了。

```
public static final String  OAUTH_CALLBACK_SCHEME   = "x-oauthflow-twitter";
public static final String  OAUTH_CALLBACK_HOST     = "callback";
public static final String  OAUTH_CALLBACK_URL      = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST; 
```

谢谢你

# c# - 从叠加层计算源 RGBA 值

> ID：10618332
> 
> 赞同：1
> 
> 时间：2012-05-16T12:16:51.163
> 
> 标签：c#, rgba

标题看起来有点奇怪，所以这里有一个示例：
您可能熟悉 Windows 7 资源管理器。
当您按下鼠标左键选择某物时，您会得到一个蓝色的半透明矩形。
所以现在的问题是：
有可能计算用于绘制这个矩形的源 RGBA 颜色吗？
我唯一知道的是来自背景的 RGB 值和带有蓝色叠加层的 RGB 值。这是我的意思的屏幕截图：
![在此处输入图像描述](../Images/dc7027c2fa5628e118b25402a3eacd4b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:58:39.847

不，不可能从单个图像中获得。您需要黑白图像上的目标数据（最佳情况）。

之后，您需要使用本文中的第一个论坛： [http ://en.wikipedia.org/wiki/Alpha_compositing](http://en.wikipedia.org/wiki/Alpha_compositing)

# c# - 如何从文本文件中删除不需要的行

> ID：10618334
> 
> 赞同：0
> 
> 时间：2012-05-16T12:16:54.357
> 
> 标签：c#, .net, text

我有我的项目写入两个文本文件。一个用于输入，一个用于输出。最后，我需要它们写入同一个文本文件。

到目前为止，这是我的代码：

```
static void Main( string[] args )
    {
        string line = null;
        string line_to_delete = "--";
        string desktopLocation = Environment.GetFolderPath( Environment.SpecialFolder.Desktop );
        string text = Path.Combine( desktopLocation, "tim3.txt" );
        string file = Path.Combine( desktopLocation, "tim4.txt" );

        using (StreamReader reader = new StreamReader( text ))
        {
            using (StreamWriter writer = new StreamWriter( file ))
            {
                while (( line = reader.ReadLine() ) != null)
                {
                    if (string.Compare( line, line_to_delete ) == 0)
                        File.WriteAllText( file, File.ReadAllText( text ).Replace( line_to_delete, "" ) );
                    continue;
                }
            } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:26:51.567

**如果**要读取输入文件中的所有行并将它们全部写入输出文件，但与给定文本匹配的行除外：

```
public static void StripUnwantedLines(
    string inputFilePath,
    string outputFilePath,
    string lineToRemove)
{
    using (StreamReader reader = new StreamReader(inputFilePath))
    using (StreamWriter writer = new StreamWriter(outputFilePath))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            bool isUnwanted = String.Equals(line, lineToRemove,
                StringComparison.CurrentCultureIgnoreCase);

            if (!isUnwanted)
                writer.WriteLine(line);
        }
    }
} 
```

在这种情况下，比较是使用当前文化进行的（如果您需要搜索“--”，这可能并不重要，但可以明确指定）并且不区分大小写。如果您希望跳过以给定文本开头的所有行，则可能
需要更改。`String.Equals``line.StartsWith`

给定这个输入文件：

```
这是文件的开头
--
一行文字
--
另一行文字

```

它将产生以下输出：

```
这是文件的开头
一行文字
另一行文字

```

**注意**
在您的示例中，您在`while`循环中使用了此代码：

```
File.WriteAllText(file, 
    File.ReadAllText(text).Replace(line_to_delete, "")); 
```

没有其他任何东西可能就足够了（但它会删除不需要的行，用空行替换它们）。它的问题（如果保持空行不是问题）是它会读取内存中的整个文件，如果文件真的很大，它可能会（非常）慢。仅供参考，这是您如何重写它以执行相同的任务（对于不是太大的文件，因为它在内存中工作）：

```
File.WriteAllText(outputFilePath, File.ReadAllText(inputFilePath).
    Where(x => !String.Equals(x, lineToDelete)); 
```

# javascript - 如何在 JQuery 的文本框中获取空值？

> ID：10618335
> 
> 赞同：0
> 
> 时间：2012-05-16T12:16:56.437
> 
> 标签：javascript, jquery, android, jquery-mobile

实际上我有一个注册表单和一个设置页面。当我将页面更改为设置页面时在注册表中输入一些值后，如果我返回注册页面，我希望之前输入的所有这些值都需要为空，但它们会根据我输入的值显示。

以下代码显示了我的代码的完整描述：

索引.html

```
 <section id="main" data-role="page">
      <div data-role="content" class="mainScreen">
              <a href="#Registration" data-transition="slide" data-theme="e" data-role="button" data-icon="arrow-r" data-iconpos="right">Register</a>
              <a href="#settings" data-transition="slide"  data-theme="e" data-role="button" data-icon="arrow-r" data-iconpos="right">Settings</a>
      </div> 
```

```
 <section id="Registration" data-role="page">
   <div class = "registrationScreen">
          Name <input type="text" id="name" name="name"> </input> 
          Age <input type="number" id="age" name="age"></input> 
          Mobile Number <input type="number" id="mobile" name="mobile"> </input>
          Email Id <input type="email" id="email" name="email"> </input> 
          <input type="submit" id="register" name="register" value="Register"> </input>
      </div>
  </section> 
 <section id="settings" data-role="page">

      <div data-role="content">
        <p>.....</p>
      </div>
  </section> 
```

当我将页面更改为设置页面时，在注册表中输入一些值后，根据以下代码，如果我返回注册表，则所有值都必须为空。谁能帮我解决这个问题...等待您的回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:19:48.087

```
$(document).ready(function() {
  $("input[type='text']").val('');  //sets blank to all textboxes of type input
}); 
```

或者，如果您希望清除特定 div 的输入，则：

```
$(".registrationScreen :input:not(input[type='submit'])") { //except for submit
  $(this).val('');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:19:34.500

以下 jQuery 将清除作为该类子级的所有表单元素`registrationScreen`：

```
$(".registrationScreen").children().each(function() {
    $(this).val("");
}); 
```

# android - Unity3D for Android 和 iOS：GUI 教程或免费的 GUI 管理器替代 EZ GUI 和 NGUI

> ID：10618336
> 
> 赞同：2
> 
> 时间：2012-05-16T12:16:56.743
> 
> 标签：android, ios, user-interface, android-layout, unity3d

您认为在 Unity3D 中为移动设备开发 GUI 的最佳方式是什么？尤其是对于 Android，它有很多不同的分辨率。我希望每个设备上的 GUI 看起来都一样。有免费的插件或好的脚本教程吗？或者 NGUI 或 EZ GUI 真的很好用？不幸的是，我没有使用这两个 GUI 管理器的经验。哪个更适合移动 GUI 开发？有没有办法像 Android SDK 那样区分 ldpi、mdpi 和 hdpi 设备？

# url - URL 编码错误

> ID：10618339
> 
> 赞同：1
> 
> 时间：2012-05-16T12:17:01.533
> 
> 标签：url, apache-camel, jql

我正在调用来自 Apache Camel 的 URL。

我将标题“Exchange.HTTP_URI”设置为
`http://localhost:8080/rest/api/2/search?jql=Name~ABC`

但它给出了错误说
Invoking `http://localhost:8080/rest/api/2/search?jql=Name<b>%257E`ABC

为什么**~**被转换为**%257E**
%7E 是 ~ 的代码
而 %25 是 % 的代码

当我设置标题 "Exchange.HTTP_QUERY" 时，它会运行，但是当我看到时，
它实际上只运行`http://localhost:8080/rest/api/2/search`并返回响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:04:30.040

以下代码段运行良好：

```
public class HttpQueryTest 
{
    public static void main( String[] args ) throws Exception {

        CamelContext camelContext = new DefaultCamelContext();
        camelContext.addRoutes(new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from("direct:start")
                .setHeader(Exchange.HTTP_URI, simple("http://google.com?q=Name~ABC"))
                        .to("http://localhost/noSuchUrl").to("log:OUT");
            }
        });
        camelContext.start();
        camelContext.createProducerTemplate().sendBody("direct:start","start");

        TimeUnit.SECONDS.sleep(5);
    }
} 
```

正如我在日志中看到的：

```
12:59:11.230 [main] DEBUG o.a.c.component.http.HttpProducer - Executing http GET method: http://google.com?q=Name~ABC
12:59:11.650 [main] DEBUG o.a.c.component.http.HttpProducer - Http responseCode: 200 
```

如您所见，它使用 Exchange.HTTP_URI 标头值设置目标 URL。然后它使用与您的参数相似的参数创建 Google 查询。

您能否提供演示您的问题的片段，以便我可以重现它？

# javascript - 是否可以更改多个图像及其各自的鼠标悬停命令？

> ID：10618344
> 
> 赞同：0
> 
> 时间：2012-05-16T12:17:27.940
> 
> 标签：javascript, css

感谢您的关注，我有这个计划，我想创建一个画廊，其中我的主图像可以通过将鼠标悬停在一堆 8 个缩略图上进行更改，很简单。

我想添加的是单独的一小束 3 个缩略图，当它们被鼠标悬停时，它们会更改 8 个缩略图图像并让它们调用 8 个新的主图像。对不起，我希望这是可以理解的？

所以它有点像分层或嵌套排列，几乎就像一个小文件夹树，其中新的 3 个拇指持有不同的 8 个拇指库……不，这可能只是让它更加混乱！！！..

我很想这一切都是用鼠标在拇指上完成的，所以它很流畅，没有点击或重新加载页面。

我已经环顾四周，但可能只需要告诉我的搜索引擎中弹出哪些术语/短语/命令。

获取 3 个拇指来更改 8 个拇指和主图像应该很简单，我目前正在使用这个：

```
<img src = "images/nicepic5thumb.png"  onmouseover =”document.main.src = 'images/nicepic5.jpg';"> 
```

主要大图在哪里：

```
<img src = "images/nicepic1.jpg" name= "main"> 
```

而且我想它可以扩展到多个图像。但是，不必这样做，只要效果最好，它就会使一个鼠标悬停更改多个当前超出我能力的鼠标悬停命令。

最终，我的目标是让所有的过渡都消失。

非常感谢指向正确方向的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:24:50.463

我会发送 8 个拇指的 3 个面板（或更多）以及相应的命令来更改主图像并使 3 个索引拇指切换 8 个图像面板的可见性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:26:28.853

[这实际上是在jQuery](http://www.jquery.com)中很容易做到的事情

您需要做的就是向图库中的图像添加一个通用类，或者更有效地向包含图像的元素添加一个 ID，并使用它来选择图像，例如。

```
<img src = "images/nicepic1.jpg" name= "main" id="main_img">
<div id="gallery"><img src="nicepic1thumb.png"><img src="nicepic2thumb.png"><img src="nicepic3thumb.png"></div>
<script>
  $(document).ready(function(){
    $("#gallery img").onmouseover(function(){
      $("#main_img").attr('src',$(this).attr('src').replace("thumb.png",".jpg"));
    }
  }
</script> 
```

这是一个完整的工作画廊，没有动画，完全符合您的要求。

```
<html>
<head>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" type="text/javascript" ></script>
    <script>
        $(document).ready(function(){
            gallery.init();
        });
        var gallery = {
            main_img: null,
            init:function(){
                gallery.main_img = $("#main_img img");
                $("#images img").click(function(){
                    gallery.change($(this).attr('src'));
                });
            },
            change: function(image){
                gallery.main_img.attr('src', image.replace("thumb.png",".jpg"));
            }
        }
    </script>
</head>
<body>
    <div id="gallery">
    <div id="main_img"><img src="images/image1.jpg"/></div>

    <div id="images">     
        <img src="images/image1thumb.png"/><img src="images/image2thumb.png"/><img src="images/image3thumb.png"/><img src="images/image4thumb.png"/><img src="images/image5thumb.png"/>
    </div>
    </div>
<body>
</html> 
```

如果您需要动画，例如淡入淡出之类的东西，请询问。

# grails - 使用 GORM 根据子表中的列排序？

> ID：10618345
> 
> 赞同：4
> 
> 时间：2012-05-16T12:17:29.357
> 
> 标签：grails, grails-orm

我有一个名为员工和子表地址的表。

现在我想使用 GORM 在地址表中获取按地址 1 排序的员工列表。

```
Employee.findAllByName(name, [max: maxRecords, offset: 100,sort: Address.address1, order: desc]) 
```

上述声明不起作用，任何建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:09:54.090

尝试使用这样的[条件](http://grails.org/doc/2.0.x/ref/Domain%20Classes/createCriteria.html)查询...

```
def c = Employee.createCriteria()
def results = c.list (max: maxRecords, offset: 100) {
    eq("name", name)
    address {
        order("addres1", "desc")
    }

} 
```

这对我有用！

**另一种选择**是像这样添加默认排序顺序......

```
class Address{
    …
    static mapping = {
        sort address1:"desc"
    }
} 
```

**但是**，我总是更喜欢将事情作为“按需”的基础来做，而不是定义每次都进行排序，即使可能不需要它。你选。享受！

# iphone - 您可以对 Facebook 帖子进行地理标记吗？

> ID：10618350
> 
> 赞同：2
> 
> 时间：2012-05-16T12:17:34.873
> 
> 标签：iphone, ios, facebook, cocoa-touch, facebook-graph-api

我正在开发一个 iphone 应用程序并使用 facebook 图形 API。我需要知道天气我可以对 Facebook 帖子进行地理标记吗？

提要对话框没有指定任何与位置相关的属性。

[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

任何人都可以对此有所了解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:14:17.857

要使用位置标记帖子，您不会发布到`/feed`端点，而是发布到`/checkins`端点。[您可以在Graph API 文档](http://developers.facebook.com/docs/reference/api/)页面上的*Publishing*标题下看到一些关于它的简短文档，其中告诉您可以发布哪些参数（坐标、位置 (id)、消息和标签（与您在一起的人）。还有更多签入[文档](http://developers.facebook.com/docs/reference/api/checkin/)页面上的信息，但实际上发布它们的信息并不多。

希望这会有所帮助——我很抱歉造成混乱；我完全不知道你最初问的是什么：P

# c# - 在 ObservableCollection 中查找索引

> ID：10618351
> 
> 赞同：2
> 
> 时间：2012-05-16T12:17:51.617
> 
> 标签：c#, .net, observablecollection

这可能非常简单，但我无法提出解决方案。

我有一个：

```
ObservableCollection<ProcessModel> _collection = new ObservableCollection<ProcessModel>(); 
```

此集合已填充，包含许多 ProcessModel。

我的问题是我有一个 ProcessModel，我想在我的 _collection 中找到它。

我想这样做，所以我能够找到 ProcessModel 在 _collection 中的索引，我真的不确定如何做到这一点。

我想这样做是因为我想在 ObservableCollection (_collection) 中获得 ProcessModel N+1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T12:26:03.390

```
var x = _collection[(_collection.IndexOf(ProcessItem) + 1)]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T12:20:25.767

[http://msdn.microsoft.com/en-us/library/ms132410.aspx](http://msdn.microsoft.com/en-us/library/ms132410.aspx)

采用：

```
_collection.IndexOf(_item) 
```

这是获取下一项的一些代码：

```
int nextIndex = _collection.IndexOf(_item) + 1;
if (nextIndex == 0)
{
    // not found, you may want to handle this as a special case.
}
else if (nextIndex < _collection.Count)
{
    _next = _collection[nextIndex];
}
else
{
    // that was the last one
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T12:21:35.170

由于`ObservableCollection`是一个序列，因此我们可以使用`LINQ`

```
int index = 
_collection.Select((x,i) => object.Equals(x, mydesiredProcessModel)? i + 1 : -1)
           .Where(x => x != -1).FirstOrDefault();

ProcessModel pm =  _collection.ElementAt(index); 
```

我已经将您的索引增加到 1，它符合您的要求。

**或者**

```
ProcessModel pm = _collection[_collection.IndexOf(mydesiredProcessModel) + 1]; 
```

**或者**

```
ProcessModel pm = _collection.ElementAt(_collection.IndexOf(mydesiredProcessModel) + 1); 
```

**编辑非空**

```
int i = _collection.IndexOf(ProcessItem) + 1;

var x;
if (i <= _collection.Count - 1) // Index start from 0 to LengthofCollection - 1
    x = _collection[i];
else
    MessageBox.Show("Item does not exist"); 
```

# objective-c - 如何发布 AVASETEXPORTSESSION iOS

> ID：10618356
> 
> 赞同：0
> 
> 时间：2012-05-16T12:18:03.210
> 
> 标签：objective-c, avassetexportsession

我写了如下代码，我在行出现内存泄漏：

```
 AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough]; 
```

我的代码是：

```
NSError *error;
AVMutableComposition* mixComposition = [AVMutableComposition composition];

NSURL*    audio_inputFileUrl = [_songPath valueForProperty:MPMediaItemPropertyAssetURL];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

NSString *video_inputFilePath = [documentsDirectory stringByAppendingPathComponent:@"videoOutput1234videoOutput1234.mp4"];
NSLog(@"output url %@",video_inputFilePath);

NSURL*    video_inputFileUrl = [NSURL fileURLWithPath:video_inputFilePath];

NSArray *docPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docPath=[docPaths objectAtIndex:0];
NSString* outputFilePath = [docPath stringByAppendingPathComponent:@"OutPut.mov"];//[[NSBundle mainBundle] pathForResource:@"OutPut" ofType:@"mov"];
NSURL*    outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
{
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];
}
else {
    NSString *defaultPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"OutPut.mov"];
    [[NSFileManager defaultManager] copyItemAtPath:defaultPath toPath:outputFilePath error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];
}

CMTime nextClipStartTime = kCMTimeZero;

AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

[a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];
if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough];   
_assetExport.outputFileType = @"com.apple.quicktime-movie";
_assetExport.outputURL = outputFileUrl;

if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath]) 
    [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

[_assetExport exportAsynchronouslyWithCompletionHandler:^(void ) {[self saveVideoToAlbum:outputFilePath]; }       ];    

[outputFileUrl release];
[videoAsset release];
[audioAsset release];
if (_assetExport.status == 2) {
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Exporting to library is completed" message:nil delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK",nil];
    [alertView show];
    [alertView release];
    [mixComposition release];
} 
```

**当我尝试发布 AVASETEXPORTSESSION 时，我的应用程序崩溃了，我不知道如何发布它**

你能告诉我答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:31:52.453

你不需要释放：

```
[outputFileUrl release];
[mixComposition release]; 
```

**从您的代码中删除这些行。**您需要这样做，因为您不拥有它们（未分配）。所以你**不需要释放**它们。

然后它现在应该可以工作了。

**自动释放**：

```
AVAssetExportSession* _assetExport = [[[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough] autorelease]; 
```

或**释放**：

```
[_assetExport release]; 
```

# android - 音频手指：写入受阻，写入延迟

> ID：10618357
> 
> 赞同：2
> 
> 时间：2012-05-16T12:18:09.127
> 
> 标签：android, android-mediaplayer, delay

我的日志猫充满了如下消息：

> 05-16 17:36:26.348：WARN/AudioFlinger(34)：写入阻塞 84 毫秒，1845 次延迟写入，线程 0xc658

当我单击按钮时，它实际上会延迟音乐。如何解决这个问题呢？

# asp.net - 将数据集映射到 ASP.NET 中的自定义 .NET 对象

> ID：10618360
> 
> 赞同：1
> 
> 时间：2012-05-16T12:18:18.497
> 
> 标签：asp.net, database, object, datatable, mapping

我想将数据从数据表映射到自定义 .NET 对象。假设我有一个 .NET 对象

```
Public Class MyClass
    Public ID
    Public Prop1
    Public Prop2
End Class 
```

以及数据库中对应的表，其中包含列 ID、Prop1 和 Prop2。

我想从数据库中生成一个 .NET 对象列表。目前我填充数据集并单独映射每个属性。有没有办法自动映射数据库，所以属性会根据属性/列名进行映射。

```
'retreive dataset from db'
DaAdapter.Fill(ds)

'create a new list of my object'
Private l As New List(Of MyClass)

'iterate through dataset (this is the step I want to get rid of - of course'
'it could only work if the property of the MyClass and the column in '
'the database have the same name)'
For Each r As DataRow in ds.Tables(0).Rows
    Dim itm As New MyClass
    itm.ID = r("ID")
    itm.Prop1 = r("Prop1")
    itm.Prop2 = r("Prop2")
    l.Add(itm)
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:24:39.003

恕我直言。最简单的方法是使用[Linq2Sql](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:22:41.720

您可以使用某种对象关系映射 (ORM) 框架。[实体框架](http://msdn.microsoft.com/en-us/data/aa937723)就是其中之一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:27:35.623

没有直接的方法，尽管有许多工具可用于创建与称为实体类的数据库表完全相似的类。有关更多详细信息，请参阅以下链接

[数据库表到 C# 实体类 - FluentNHibernate 的生成器？](https://stackoverflow.com/questions/600669/database-tables-to-c-sharp-entity-classes-generator-for-fluentnhibernate)

您还可以使用 typeddataset、codesmith 工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:30:15.137

我建议[实体框架](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)

您可以使用`database first`仅指向数据库的方法，它将为您创建实体和关联。

它真的很困难，我建议尝试一下

# jquery - 如何使用 jquery 获取 onclick 事件参数

> ID：10618363
> 
> 赞同：3
> 
> 时间：2012-05-16T12:18:25.637
> 
> 标签：jquery

我有一组具有唯一名称和 id 的单选按钮，但每个单选按钮的值是相同的并且 onclick 事件，我想要获得的是文档准备好的选中单选按钮的单击事件内的参数。

```
<input id="lvCP_CP1_0_rbC_0" type="radio" name="lv$ctrl0$UC1$CP" value="rbC" checked="checked" onclick="SetCPPrice('lvCP_CP1_0_rbCPSelected_0','Total:5','CPID:wrAtPJQGUiuKfptENuMumY/M7utu6gZ3VMRy3KI1P9rNCokUUO','CPPriceUS:75.9878666666667','CPriceEU:107.53');"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:20:18.133

```
var onClickAttribute = $('#lvCP_CP1_0_rbC_0').attr('onclick'); 
```

我不知道你为什么需要它，但你可以这样做。

* * *

如果要将字符串拆分为参数：

```
var str = $('#lvCP_CP1_0_rbC_0').attr('onclick');   
var params = str.split("SetCPPrice(")[1].split(',');
params[params.length - 1] = params[params.length - 1].replace(');');
console.log(params);​ 
```

[**现场演示**](http://jsfiddle.net/Er5ze/)

**免责声明**：您不应该真正使用它。

# python - 排序索引？

> ID：10618366
> 
> 赞同：0
> 
> 时间：2012-05-16T12:19:00.367
> 
> 标签：python, sorting, frequency

对于我的家庭作业，我需要分离出文本中出现频率最高的 50 个单词。我已经尝试了很多东西，在我最近的尝试中，我用这个做了一个索引：

```
concordance = {}

lineno = 0

for line in vocab:

    lineno = lineno + 1

    words = re.findall(r'[A-Za-z][A-Za-z\'\-]*', line)
    for word in words: 
        word = word.title()
        if word in concordance:
            concordance[word].append(lineno)
        else: 
            concordance[word] = [lineno]
listing = []

for key in sorted(concordance.keys()):

    listing.append( [key, concordance[key] ]) 
```

我想知道的是，我是否可以将后续的索引按照最常用词到最不常用词的顺序进行排序，然后隔离并打印前50个？我不允许导入除`re`and以外的任何模块`sys`，我正在努力想出一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:24:01.517

`sorted`是一个不需要导入的内置函数。尝试类似：

```
list(sorted(concordance.items(), key = lambda (k,v): v))[:50] 
```

未经测试，但你明白了。

构造`list`函数在那里是因为`sorted`返回一个生成器，您不能直接对其进行切片（`itertools`提供了一个实用程序来执行此操作，但您不能导入它）。

可能有更有效的方法来获取前 50 个，但我怀疑它在这里是否重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:50:38.657

几个提示：

*   在您的 for 循环中使用`enumerate(list)`以一次获取行号和行。
*   尝试`\w`在正则表达式中使用 for word 字符而不是 list `[A-Za-z...]`。
*   阅读该`dict.items()`方法。它将返回一个`(key, value)`对列表。
*   用 操作该列表`list.sort(key=function_to_compare_two_items)`。
*   您可以使用 a 定义该函数`lambda`，但这不是必需的。
*   使用该`len(list)`函数获取列表的长度。您可以使用它来获取单词的匹配数（存储在列表中）。
*   **更新**：哦，是的，并使用切片来获取结果列表的一部分。`list[:50]`获取前 50 个项目（相当于`list[0:50]`），并`list[5:10]`获取从索引 5（含）到索引 10（不含）的项目。
*   要打印它们，请遍历结果列表，然后打印每个单词。或者，您可以使用类似的东西`print '[separator]'.join(list)`来打印一个字符串，其中所有项目都由“[分隔符]”分隔。

祝你好运。

# ios - 是否可以在 iOS 上控制帧速率

> ID：10618371
> 
> 赞同：0
> 
> 时间：2012-05-16T12:19:08.427
> 
> 标签：ios, opengl-es, views

我正在通过设置它的 origin 属性来为一个在屏幕上弹跳的球设置动画，但我发现球的移动并不顺畅。我检查了调用 drawInRect 的频率，它是 30 次/秒，我认为这不足以使快速球运动顺利进行。

我的问题是，是否可以要求系统以 60fps 刷新/重绘屏幕？你能在 OpenGL 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:36:17.010

您可以考虑设置显示链接功能。这将允许您为通过系统的每个绘制调用（或每个特定数量的帧）触发一个方法。你要处理的类是CADisplayLink，[这里](https://zearfoss.wordpress.com/2011/03/09/drawing-with-cadisplaylink/)有一个教程。如果您的动画仍然不够快，那么您的动画将永远不会看起来流畅;)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T12:37:59.387

您无需更改 ios 的 fps 即可获得正确的动画效果。您只需在您的代码中更改它，您可以使用 NSTimer（示例）：-

在某些动画上初始化计时器：-

```
 float theInterval = 1.0/30.0;//Here you can set the frame rate , now set on 30
    [NSTimer scheduledTimerWithTimeInterval:theInterval target:self
        selector:@selector(animateView:) userInfo:nil repeats:YES];

    - (void)animateView:(NSTimer *)theTimer 
    {
    //    your animation block here....
    Something like..
    view.center = CGPointMake(view.center.x+viewMovement.x,
                    view.center.y+viewMovement.y);

        BOOL collision = view.center.y >= view2.center.y - 16 &&
        view.center.y <= view2.center.y + 16 &&
        view.center.x > view2.center.x - 32 &&
        view.center.x < view2.center.x + 32;

    if(collision)
        viewMovement.y = -viewMovement.y

} 
```

这只是一个例子，相应地实现你的逻辑。

# django - Django“无法导入名称成员”

> ID：10618375
> 
> 赞同：1
> 
> 时间：2012-05-16T12:19:29.270
> 
> 标签：django, import

我正在努力解决这个错误。曾经有一个名为 Member 的模型，但我现在删除了对它的所有引用，删除并重新制作了数据库——我搜索了项目，但根本没有找到对“Member”的引用！这是一个全新的项目，所以没有太多内容（我可以重新开始，但我需要知道发生了什么）。

请帮忙，谢谢！

```
ImportError at /admin
cannot import name Member
Request Method: GET
Request URL:    http://localhost:8000/admin
Django Version: 1.4
Exception Type: ImportError
Exception Value:    
cannot import name Member
Exception Location:     

    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-   packages/django/utils/importlib.py in import_module, line 35
    Python Executable:  /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python
Python Version: 2.7.2
Python Path:    
['/Users/methuselah/code/django/ss',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.0.2-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django_extensions-0.8-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL']
Server time:    Wed, 16 May 2012 13:13:47 +0100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:39:25.917

您可以清除 .pyc 文件，这是数据的编译版本，也可以重新启动 python 应用程序服务器，它应该为您重新编译所有内容。

# workflow-foundation-4 - 组织 WF4 工作流 xaml

> ID：10618376
> 
> 赞同：2
> 
> 时间：2012-05-16T12:19:33.717
> 
> 标签：workflow-foundation-4

我在 xaml 中定义了一个相当大的工作流，由嵌套的流程图和序列组成。单击整个层次结构来修改深深嵌入工作流的活动是很痛苦的。项目重建后，工作流设计器重置为顶视图，所以我必须经常这样做。

有没有办法创建单独的 xaml 文件，其中包含部分主工作流并将它们包含在主文件中？这样，我就可以通过简单地从解决方案资源管理器中打开子流来进行编辑。

从 CodeActivity 调用子流 xaml 似乎是个好主意？

还有其他加快工作流程编辑的提示吗？

提前致谢。

亚尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:25:54.507

假设您正在谈论 Visual Studio，自定义 XAML 活动是一个可能的解决方案。

如何 - 您可以创建一个单独的文件来包装其中一个名为 FlowActivity1 的流程图。构建项目时，您应该会看到 FlowActivity1 出现在 Visual Studio 工具箱中。然后，您可以转到主工作流程，并将流程图替换为 FlowActivity1。您还需要在 FlowActivity1 活动上创建参数，以便从主工作流中传递变量值。

# nodes - 如何使用渗透通过节点获取（osm）方式

> ID：10618381
> 
> 赞同：0
> 
> 时间：2012-05-16T12:19:43.217
> 
> 标签：nodes, openstreetmap

当节点（x，y）在这种方式上时，如何检索方式（id，或这种方式标记及其节点）？

例如，一些低效的工作（有时......）就是询问谷歌这个节点的路径名称（不知何故），然后使用渗透通过带有这个道路名称的标签进行过滤。

但我认为有更好的方法来做到这一点。

注意：我不在乎渗透是在 xml 文件还是 db 上工作。两者都适合我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:25:38.533

不清楚，你想做什么，但如果你搜索给定 GPS 坐标的最近节点或边缘，我知道 Osmosis 不是你的好选择，因为它是一个数据转换工具。

您应该将数据文件导出到 PostgreSQL+PostGIS 数据库（例如使用 Osmosis），然后您将能够使用 SQL 创建查询。

# c++ - 优化此代码块

> ID：10618383
> 
> 赞同：1
> 
> 时间：2012-05-16T12:19:50.923
> 
> 标签：c++, optimization, loops

```
for (int i = 0; i < 5000; i++)
   for (int j = 0; j < 5000; j++)
   {
      for (int ii = 0; ii < 20; ii++)
          for (int jj = 0; jj < 20; jj++)
           {
               int num = matBigger[i+ii][j+jj];
               // Extract range from this.
               int low = num & 0xff;
               int high = num >> 8;
               if (low < matSmaller[ii][jj] && matSmaller[ii][jj] > high)
                  // match found
           }
   } 
```

该机器是 x86_64，32kb L1 cahce，256 Kb L2 缓存。

关于如何优化此代码的任何指示？

**编辑**原始问题的一些背景：[Fastest way to Find amxn submatrix in MXN matrix](https://stackoverflow.com/questions/10529278/fastest-way-to-find-a-m-x-n-submatrix-in-m-x-n-matrix)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:22:55.443

我要尝试的第一件事是将and循环移到`ii`and`jj`循环之外。这样，您将使用相同的元素for 2500 万次循环迭代，这意味着您（或编译器，如果幸运的话）可以在这些循环之外提升对它们的访问：`i``j``matSmaller``i``j`

```
for (int ii = 0; ii < 20; ii++)
  for (int jj = 0; jj < 20; jj++)
    int smaller = matSmaller[ii][jj];
    for (int i = 0; i < 5000; i++)
      for (int j = 0; j < 5000; j++) {
        int num = matBigger[i+ii][j+jj];
        int low = num & 0xff;
        if (low < smaller && smaller > (num >> 8)) {
          // match found
        }
      } 
```

这可能会更快（由于对`matSmaller`数组的访问更少），或者可能会更慢（因为我已经改变了对`matBigger`数组的访问模式，并且可能我已经使它对缓存不友好）。一个类似的替代方案是将`ii`循环移到外面`i`并`j`提升`matSmaller[ii]`，但将`jj`循环留在里面。经验法则是，在内部循环中增加多维数组的*最后一个索引比之前的索引更便于缓存。*所以我们修改`jj`and`j`比修改`ii`and更“快乐” `i`。

我要尝试的第二件事 - 是什么类型的`matBigger`？看起来里面的值只有 16 位，所以试试 as`int`和 as `(u)int16_t`。前者可能更快，因为对齐`int`的访问速度很快。后者可能会更快，因为任何时候都有更多的阵列适合缓存。

通过对 的一些早期分析，您可以考虑一些更高级别的事情`smaller`：例如，如果是，`0`那么您不需要检查and`matBigger`的值，因为总是错误的。`ii``jj``num & 0xff < 0`

为了比“猜测并查看它们是否更快”做得更好，您首先需要知道哪条线路最热，这意味着您需要一个分析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:27:01.643

一些基本建议：

1.  对其进行分析，以便您了解热点在哪里。
2.  考虑缓存位置，以及循环顺序产生的地址。
3.  在最内部的范围内使用 more `const`，向编译器提示更多信息。
4.  尝试将其分解，这样您就不会计算测试`high`是否`low`失败。
5.  尝试将偏移量`matBigger`显式地保持`matSmaller`到最内层，进入一个简单的增量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:27:36.883

最好的办法是了解代码应该做什么，然后检查是否存在针对此问题的另一种算法。

除此之外：

*   如果您只是对是否存在匹配条目感兴趣，请确保在`// match found`.
*   确保数据以最佳方式存储。这完全取决于您的问题，但即只有一个大小为 5000*5000*20 的数组和`operator()(int,int,int)`访问元素的重载可能会更有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:42:39.397

`matSmaller`和是什么`matBigger`？尝试将它们更改为`matBigger[i+ii * COL_COUNT + j+jj]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T16:37:15.307

我同意史蒂夫关于重新安排你的循环以将更高的计数作为内部循环。由于您的代码仅进行加载和比较，因此我相信很大一部分时间用于指针运算。尝试一个实验来改变史蒂夫的答案：

```
for (int ii = 0; ii < 20; ii++)
  {
  for (int jj = 0; jj < 20; jj++)
    {
    int smaller = matSmaller[ii][jj];
    for (int i = 0; i < 5000; i++)
      {
      int *pI = &matBigger[i+ii][jj];
      for (int j = 0; j < 5000; j++)
        {
        int num = *pI++;
        int low = num & 0xff;
        if (low < smaller && smaller > (num >> 8)) {
          // match found
        } // for j
      } // for i
    } // for jj
  } // for ii 
```

即使在 64 位模式下，C 编译器也不一定能很好地将所有内容保存在寄存器中。通过将数组访问更改为简单的指针增量，您将使编译器的工作更容易生成高效的代码。

**编辑：**我刚刚注意到@unwind 提出了基本相同的建议。另一个需要考虑的问题是比较的统计数据。低或高比较更有可能吗？安排条件语句，使不太可能的测试首先出现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-16T18:32:21.260

看来这里有很多重复。一种优化是减少重复工作量。使用笔和纸，我将`matBigger`“i”索引迭代为：

```
[0 + 0], [0 + 1], [0 + 2], ..., [0 + 19],
         [1 + 0], [1 + 1], ..., [1 + 18], [1 + 19]
                  [2 + 0], ..., [2 + 17], [2 + 18], [2 + 19] 
```

如您所见，有些位置被多次访问。此外，乘以迭代计数表示访问内部内容：20 * 20 * 5000 * 5000，或 10000000000 (10E+9) 次。好多啊！

所以与其试图加快 10E9 指令的执行速度（如执行（管道）缓存或数据缓存优化），不如尝试减少迭代次数。

该代码正在矩阵中搜索一个范围内的数字：大于最小值且小于最大范围值。

基于此，尝试不同的方法：

1.  查找并记住搜索值大于低值的所有坐标。让我们称这些锚点。
2.  对于每个锚点，找到范围之外的锚点之后的第一个值的坐标。

目的是减少重复访问的数量。锚点允许一次性扫描并允许其他决策，例如查找范围或确定包含锚值的 MxN 矩阵。

另一个想法是创建包含`matBigger`和的新数据结构，`matSmaller`这些结构更适合搜索。

例如，为 中的每个唯一值创建一个 {value, coordinate list} 条目`matSmaller`：

```
 Value    coordinate list
    26 -> (2,3), (6,5), ..., (1007, 75)
    31 -> (4,7), (2634, 5), ... 
```

现在您可以使用此数据结构在其中查找值`matSmaller`并立即知道它们的位置。因此，您可以搜索`matBigger`此数据结构中的每个唯一值。这再次减少了访问矩阵的次数。

# asp.net-mvc - StructureMap-MVC3 中 scan.TheCallingAssembly、scan.WithDefaultConventions 的用途

> ID：10618385
> 
> 赞同：5
> 
> 时间：2012-05-16T12:20:06.000
> 
> 标签：asp.net-mvc, structuremap, nuget

将[StructureMap-MVC3](https://nuget.org/packages/StructureMap-MVC3)包添加到 ASP.NET MVC 应用程序时，会添加一个`IoC`包含`Initialize`方法的类（由 App_Start 文件夹中的某些代码调用），其中包含以下内容：

```
public static class IoC
{
    public static IContainer Initialize()
    {
        ObjectFactory.Initialize(x =>
            {
                x.Scan(scan =>
                    {
                        scan.TheCallingAssembly();
                        scan.WithDefaultConventions();
                    });
                // x.For<IExample>().Use<Example>();
            });
        return ObjectFactory.Container;
    }
} 
```

`scan.TheCallingAssembly()`和`scan.WithDefaultConventions()`代码的目的是什么？[我在StructureMap 文档](http://docs.structuremap.net/ScanningAssemblies.htm#section1)中看不到对这些方法的很好解释。

在非 MVC 项目中使用 StructureMap 时，我发现`x.Scan`可以删除整个部分而不会产生任何影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T14:39:29.037

扫描查看您的 Assembly 中定义的所有类型，并应用 StructureMap 约定来确定它们是否/如何在容器中注册。

`WithDefaultConventions`意思是：“如果在扫描时我找到了一个接口`IExample`，并且有一个`Example`实现的类型`IExample`，那么注册`Example`为”的默认类型`IExample`。

在许多情况下，您可以向容器询问您要查找的任何内容 ( `IExample`)，它会返回一个实现，而无需任何进一步的配置。

# php - Magento - 如何在后端为自定义支付模块设置支付信息

> ID：10618387
> 
> 赞同：0
> 
> 时间：2012-05-16T12:20:11.723
> 
> 标签：php, magento

我创建了一个自定义支付模块，但我只能在 Magento 的管理端显示以下信息

卡类型

卡号：xxxx-后4位

使用美元下订单

但是，如果 pf Paypal 喜欢，我怎样才能获得其他详细信息，

卡验证状态：

地址验证状态：

上次交易 ID：

等等。我从我的自定义支付网关得到所有这些响应，但我不知道要调用什么函数或如何在后端显示它以供店主查看。

谁能帮我这个？现在我的支付模块正在`authorize_capture`作为支付操作，所以我有`Model/PaymentMethod.php`它必须`function capture(Varien Object payment, amount)`处理逻辑。那么我可以从那里设置付款信息还是需要创建任何其他文件？

请告诉我。

编辑：我找到了我需要做的部分答案。

[http://nicholas.piasecki.name/blog/2009/10/add-avs-and-cvn-to-magentos-admin-screen-in-just-637-easy-steps/#comment-1043](http://nicholas.piasecki.name/blog/2009/10/add-avs-and-cvn-to-magentos-admin-screen-in-just-637-easy-steps/#comment-1043)

但我无法覆盖默认的管理模板文件。这个链接告诉创建一个覆盖 Mage/Payment/Block/Info 的 Block 文件，并在其中设置一个要使用的模板。

但它没有阅读它。有人可以告诉我覆盖管理模板文件的正确方法，以便将来的升级不会覆盖它。

我希望有人现在必须熟悉这一点。

它没有从我的覆盖模块块文件中获取代码。我需要覆盖的模板文件是 app/design/adminhtml/default/default/template/payment/default/info.phtml。使用提到的链接，我已经覆盖了 Mage/Payment/Block/Info 并编写了自己的代码，但无法设置和指向我的模板。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:26:29.477

这是 Alan Storm 的一篇好文章，它将向您展示如何向后端添加设置：

[http://alanstorm.com/custom_magento_system_configuration](http://alanstorm.com/custom_magento_system_configuration)

# asp.net-mvc-3 - 如何重定向到引用项目的另一个控制器的操作

> ID：10618388
> 
> 赞同：2
> 
> 时间：2012-05-16T12:20:13.220
> 
> 标签：asp.net-mvc-3, redirect, response.redirect, redirecttoaction, redirecttoroute

嗨，我在我的应用程序中创建了另一个项目。现在我想从旧项目中的动作转移到新项目中控制器的动作。

我尝试了很多事情，例如：

```
return RedirectToAction("ActivityPosting", new RouteValueDictionary(new { controller = "ActivityPosting", action = "ActivityPosting" })); 
```

然后...

```
return RedirectToAction("ActivityPosting", "ActivityPosting") 
```

但是这样它会移动到动作但不显示视图。
我认为问题可能出在端口号上。

旧项目的端口号：http://localhost:18520
，新项目的端口号：http://localhost:52146
但我不知道如何重定向到新端口。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:22:47.200

该`RedirectToAction`方法旨在仅用于在同一项目中执行重定向。如果您想重定向到另一个应用程序，您应该使用绝对 url 和`Redirect`方法：

```
return Redirect("http://example.com/foo/bar"); 
```

# jquery - jscrollpane 打破图片库（简单的图片库专业版）

> ID：10618394
> 
> 赞同：1
> 
> 时间：2012-05-16T12:20:25.473
> 
> 标签：jquery, joomla, jscrollpane, joomla-k2

我正在使用 joomlaworks 的简单图片库专业版。我对它的css做了一些修改。我将拇指放在页面底部并水平滚动。现在我需要用 jScrollPane 更改滚动条。滚动条出现并且工作正常，但是当它处于活动状态时，单击时拇指不会出现在主图像视图（较大的视图）中。

我认为这是因为 jScrollPane 将一些 div 附加到拇指 ul，但我有限的 javascript/jquery 技能使得很难真正看到问题发生在哪里并解决它。

网址：http: [//goo.gl/9Dgq3](http://goo.gl/9Dgq3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:53:08.350

是的，你说得对，这是因为 jscrollpane 添加了额外的 div。

要解决此问题，您需要在`/lvj/plugins/content/jw_sigpro/jw_sigpro/tmpl/Galleria/js/behaviour.js`文件中进行更改：

查找线：

```
var outerContainer = el.parent().parent().parent().parent().parent(); 
```

并将其更改为：

```
var outerContainer = el.parent().parent().parent().parent().parent().parent().parent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:18:11.613

将行为 js 文件更新为

```
 $K2('.sigProGalleriaLink').click(function(event){
console.log("here");
        event.preventDefault();

        // Prevent clicks upon animation
        if($K2(':animated').length) return false;

        // Assign element
        var el = $K2(this);

        // Parent container
        var outerContainer = el.parent().parent().parent().parent().parent();
        var placeholderContainer = $K2(".sigProGalleriaPlaceholderContainer div:first");
console.log(outerContainer );
console.log(placeholderContainer);
        // Placeholder elements
      var targetLink = placeholderContainer.find("a:first");
        console.log(targetLink );
      var targetTitle = placeholderContainer.find("p:first");
        console.log(targetTitle );
      var targetImg = targetLink.find("img:first");
        console.log(targetImg );

        // Source elements
      var sourceLinkHref = el.attr("href");
        console.log(sourceLinkHref );
      var sourceLinkTitle = el.attr("title");
        console.log(sourceLinkTitle );
      var sourceImage = el.find("img:first");
        console.log(sourceImage );

      if(targetLink.attr("href")!==sourceLinkHref){
console.log("should do the animation");
          if(el.find("span:nth-child(2)")){
            var sourceTitle = el.find(".sigProCaption").html();
          } else {
            var sourceTitle = false;
          }

            placeholderContainer.animate({'opacity':0},300,function(){
                targetImg.attr("src",sourceLinkHref);
                var counter = 0;
                targetImg.load(function(){
                    if (counter++ == 0) {
                    targetImg.attr("title",sourceImage.attr("title"));
                    targetImg.attr("alt",sourceImage.attr("alt"));
                    targetLink.attr("href",sourceLinkHref);
                    targetLink.attr("title",sourceLinkTitle);
                    if(targetTitle.hasClass('sigProGalleriaTargetTitle') && sourceTitle) targetTitle.html(sourceTitle);
                    placeholderContainer.animate({'opacity':1},600);
                    }
                });
            }); //.delay(500).animate({'opacity':1},300);

      }

        // Set class for current thumb
        var thumbs = outerContainer.find("ul:first").find("a");
        thumbs.each(function(){
            if($K2(this).hasClass('sigProLinkSelected')){
                $K2(this).removeClass('sigProLinkSelected');
            }
        });
        el.addClass('sigProLinkSelected');

    }); 
```

# android - 如何检查一个活动的多个实例是否存在

> ID：10618402
> 
> 赞同：2
> 
> 时间：2012-05-16T12:20:52.503
> 
> 标签：android, android-activity

我一直在尝试自学 Android，并且刚刚了解到我一直`Activity`在我的代码中创建相同的多个实例。从概念上讲，我知道它就在那里，但是有什么工具（例如 DDMS）可以用来*查看*我创建了多个实例吗？

这也将帮助我了解我的`Intent`标志实验是否有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:27:06.183

您可以使用以下命令可视化当前活动堆栈：

```
adb shell dumpsys activity 
```

它会向您显示如下内容：

```
 Running activities (most recent first):
    TaskRecord{40538e50 #164 A com.xxx}
      Run #3: HistoryRecord{xxxx com.xxx/.activities/xxx}
      Run #2: HistoryRecord{xxx com.xxx/.activities/xxx}
      Run #1: HistoryRecord{xxx com.xxx/.activities/xxx}
    TaskRecord{40a89008 #48 I com.android.htcdialer/.Dialer}
      Run #0: HistoryRecord{409d91d0 com.android.htcdialer/.Dialer} 
```

一些资源：

*   [Android 开发人员上的 Android 调试桥 (ADB)](http://developer.android.com/guide/developing/tools/adb.html)。

*   [Romain Guy 的Android 工具](http://www.youtube.com/watch?v=6Ki66SxTSSs)。（整个演讲不是关于 ADB 以及您可以用它做什么，但值得花一些时间观看，因为他介绍并演示了许多调试工具）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:33:23.103

```
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) {  
            // Activity was brought to front and not created,  
            // Thus finishing this will get us to the last viewed activity  
            finish();  
            return;  
        } 
```

# magento - Magento - 对模板文件的更改未显示 - /customer/form/register.phml

> ID：10618411
> 
> 赞同：1
> 
> 时间：2012-05-16T12:21:47.267
> 
> 标签：magento, php

我正在对 /customer/form/register.phml 进行一些更改，但它们没有出现在前端。我对 login.phtml 和 forgotpassword.phtml 所做的更改会显示出来。

我检查了 magento 是否使用了基本/默认主题的后备，但事实并非如此。我删除了我的主题和基本/默认主题中的 register.phtml 以检查会发生什么：页面显示得很好（当然没有更改）。

我看起来像 magento 从其他地方（也许是核心）获取文件。我不知道如何解决这个问题。

在此先感谢您的帮助。

**我的 Customer.xml 文件看起来像这样，我使用的是 magento 1.5.1**

```
<customer_account_create translate="label">
   <label>Customer Account Registration Form</label>

   <remove name="right"/>
   <remove name="left"/>

   <reference name="root">
       <action method="setTemplate"><template>page/1column.phtml</template></action>
   </reference>

   <reference name="content">
           <block type="customer/form_register" name="customer_form_register"  template="customer/form/register.phtml">
               <block type="page/html_wrapper" name="customer.form.register.fields.before" as="form_fields_before" translate="label">
                   <label>Form Fields Before</label>
               </block>
           </block>
   </reference>
</customer_account_create> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:40:05.907

调试此问题的最佳方法是打开模板路径提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T04:19:25.690

您可能需要编辑`template/persistent/customer/form/register.phtml`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T10:26:58.480

我使用模板提示并发现一个插件替换了该文件。启用模板提示：http: [//vimeo.com/1067069](http://vimeo.com/1067069)帮助很大

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T15:21:30.270

使用模板提示。此外，对于您所做的任何 phtml 更改，请确保您已禁用缓存，并刷新所有缓存（系统 -> 缓存管理）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T13:44:27.890

是的，我同意 WebFlake 打开模板提示，它会让您知道从哪个模板文件中提取表单，很可能您正在修改错误的模板。

这是一个解释如何打开模板提示的链接：http: [//vimeo.com/1067069](http://vimeo.com/1067069)

# eclipse - 如何通过在eclipse中使用ANT来使用jcoverage java工具

> ID：10618412
> 
> 赞同：1
> 
> 时间：2012-05-16T12:21:48.810
> 
> 标签：eclipse, ant, automation, junit4

我想使用 ANT 和 eclipse 为我的单元测试准备 jcoverage 报告。我在用着

*   Apache Ant(TM) 版本 1.8.3 于 2012 年 2 月 26 日编译
*   selenium-server-standalone-2.20.0
*   junit-4.8.1.jar
*   日食 SDK 3.6.1

[我试过这里链接](http://flylib.com/books/en/1.214.1.136/1/)中提到的。

但我无法成功。请提供是否有可用的文件或让我清楚如何准备报告。

我的蚂蚁文件：

```
 <?xml version="1.0"?>

<!DOCTYPE project [
   <!ENTITY start_stop_selenium SYSTEM "start_stop_selenium.xml">
   <!ENTITY properties_build_clean_compile_report SYSTEM  "properties_build_clean_compile_report.xml">
]>

<project name="Run Selenium Tests" default="all_selenium_tests" basedir=".">

        <property name="libs" location="lib" />
        <property name="build.dir" value="${basedir}/build/"/> 
        <property name="build.classes.dir" value="${build.dir}/classes"/> 
        <property name="build.test-classes.dir" value="${build.dir}/test-classes"/> 
        <property name="build.instrumented-classes.dir"  value="${build.dir}/instrumented-classes"/> 
        <property name="build.coverage.dir" value="${build.dir}/coverage"/> 
        <property name="build.reports.dir" value="${build.dir}/reports"/> 
        <property name="lib.dir" value="lib"/> 
        <property name="src" value="src"/> 
        <property name="src.dir" value="${basedir}/src/java"/>  
        <property name="test.dir" value="${basedir}/src/test"/>

<!-- Corresponding Jar file for the Jcoverage.-->
        <path id="jcoverage.path"> 
            <fileset dir="${lib.dir}"> 
                <include name="jcoverage-1.0.5.jar"/> 
                <include name="log4j-1.2.9.jar"/> 
                <include name="bcel-5.1.jar"/> 
                <include name="jakarta-oro-2.0.7.jar"/> 
                <include name="java-getopt-1.0.9.jar"/> 
            </fileset> 
        </path> 

   <path id="junit.class.path">
     <fileset dir="${lib.dir}">
        <include name="ant-junit.jar"/>
        <include name="jcoverage-1.0.5.jar"/> 
        <include name="log4j-1.2.9.jar"/> 
        <include name="bcel-5.1.jar"/> 
        <include name="jakarta-oro-2.0.7.jar"/> 
        <include name="java-getopt-1.0.9.jar"/> 
        <include name="junit-4.8.1.jar"/>
        <include name="selenium-server-standalone-2.20.0.jar"/> 
        <include name="jetty-repacked-7.6.1.jar"/> 
        <include name="org.mortbay.jetty-6.0.0alpha2.jar"/> 
        <include name="httpclient-4.1.2.jar"/>
        <include name="httpcore-4.1.3.jar"/>
        <include name="httpmime-4.1.2.jar"/>
        <include name="selenium-java-2.20.0.jar"/>
        <include name="selenium-java-2.20.0-srcs.jar"/>
        <include name="logging-selenium-1.2.jar"/>
        <include name="poi-3.7-20101029.jar"/>
        <include name="robotframework-2.5.4.1.jar"/>
        <include name="saxon-8.7.jar"/>
        <include name="jxl.jar"/>
    </fileset>
  </path>

        <target name="init"> 

            <!-- <delete dir="${build.dir}"/>
             <delete dir="${build.classes.dir}"/>
             <delete dir="{build.test-classes.dir}"/>
             <delete dir="${build.coverage.dir}"/>
             <delete dir="${build.instrumented-classes.dir}"/>
             <delete dir="${build.reports.dir}"/> -->

            <delete dir="${build.dir}"/>
            <mkdir dir="${build.dir}"/> 
            <mkdir dir="${build.classes.dir}"/> 
            <mkdir dir="${build.test-classes.dir}"/> 
            <mkdir dir="${build.coverage.dir}"/> 
            <mkdir dir="${build.instrumented-classes.dir}"/>
            <mkdir dir="${build.reports.dir}"/> 
        </target>

        <target name="compile" description="compile all classes"> 
                <javac srcdir="${src.dir}" destdir="${build.classes.dir}" failonerror="yes" debug="yes"> 
                </javac>
        </target>

        <target name="instrument" description="Add jcoverage instrumentation"> 
            <instrument todir = "${build.instrumented-classes.dir}"> 
            <ignore regex="org.apache.log4j.*"/> 
            <fileset dir="${build.classes.dir}"> 
            <include name="**/*.class"/> 
            </fileset> 
            </instrument>
        </target>

            <target name="test" description="Unit test the application"> 
                <javac srcdir="${test.dir}" destdir="${build.test-classes.dir}" failonerror="yes" debug="yes"> 
                <classpath refid="junit.class.path"/> 

                <classpath location="${build.classes.dir}"/> 
                </javac>
                <junit fork="yes" dir="${basedir}" errorProperty="test.failed" failureProperty="test.failed"> 

          <!-- note the classpath order, instrumented classes are before the original (uninstrumented) classes. -->

                <classpath refid="junit.class.path"/>
                <classpath location="${build.instrumented-classes.dir}"/> 
                <classpath location="${build.classes.dir}"/> 
                <classpath location="${build.test-classes.dir}"/> 

           <!-- the instrumented classes reference classes used by the jcoverage runtime. --> 

           <classpath refid="jcoverage.path"/> 
           <formatter type="xml"/>  

           <batchtest todir="${build.reports.dir}" > 
           <fileset dir="${build.test-classes.dir}"> 
           <include name="**/*Test.class"/> 
           </fileset> 
           </batchtest> 
           </junit> 
           </target>

    <taskdef classpathref="jcoverage.path" resource="tasks.properties"/>

          <target name="coverage" description="HTML and XML coverage reports can be found in build/coverage"> 
                <report srcdir="${src.dir}" destdir="${build.coverage.dir}"/> 
                <report srcdir="${src.dir}" destdir="${build.coverage.dir}" format="xml"/>  
                <echo> jcoverage reports have been generated. The HTML report is ${build.coverage.dir}/index.html The XML report is ${build.coverage.dir}/coverage.xml </echo> 
          </target>

  <target name="all_selenium_tests" description="The Main Target for running all tests">
        <antcall target="init"/>
        <antcall target="compile"/>
        <antcall target="instrument"/> 
        <antcall target="test"/>
        <antcall target="coverage"/>
 </target> 
</project> 
```

我的junit类：

```
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.server.SeleniumServer;

import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.SeleneseTestCase;
import com.thoughtworks.selenium.Selenium;

public class sample extends SeleneseTestCase {
static Selenium selenium;
@Before
public void setUp() throws Exception {

      SeleniumServer seleniumserver=new SeleniumServer();
       seleniumserver.boot();
       seleniumserver.start();
       selenium = new DefaultSelenium("localhost", 4444, "*firefox", "http://www.google.com");
       selenium.start();        

}

@Test
public void testjcoverage() throws Exception{

selenium.windowMaximize();
selenium.windowFocus();

selenium.setSpeed("1000");

selenium.open("/results-web/results/authentication/public/login?");

selenium.type("id=USER","labcorp" );
selenium.type("id=PASSWORD","Labcorp" );
selenium.click("css=input.loginButton");

selenium.stop();
}
} 
```

控制台错误：

```
Buildfile: E:\jcoverage\jcoverage\refactored-param-build.xml
[taskdef] Could not load definitions from resource $(lib.dir). It could not be found.
all_selenium_tests:
[taskdef] Could not load definitions from resource $(lib.dir). It could not be found.
init:
[taskdef] Could not load definitions from resource $(lib.dir). It could not be found.
compiling:
[taskdef] Could not load definitions from resource $(lib.dir). It could not be found.
instrument:

BUILD FAILED
E:\jcoverage\jcoverage\refactored-param-build.xml:25: The following error occurred while executing this line:
E:\jcoverage\jcoverage\refactored-param-build.xml:96: Problem: failed to create task or type instrument
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.

Total time: 125 milliseconds 
```

请提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:30:49.673

该错误通知您 javac 编译器找不到 junit jar。尽管您将 指定为ant 目标`junit.class.path`中的类路径，但该类路径包含对未在 build.xml 中的任何位置定义的属性的引用`compiling``${libs}`

`lib.dir`此外，您应该在使用它们之前移动属性定义（例如）（例如，在`jcoverage.path`引用的定义之前`${lib.dir}`）

*注意*：您可以看到使用`-verbose`选项调用 ant 或在`<echo>${junit.class.path}</echo>`任务之前调用`<javac>`任务使用的类路径

# php - 如何使用 php 命令从 iPhone 获取 udid 值？

> ID：10618416
> 
> 赞同：0
> 
> 时间：2012-05-16T12:22:15.590
> 
> 标签：php, iphone

我在构建 iPhone 应用程序的第一个版本时忘记输入会话命令。现在，我在每个 PHP 函数中编写了一个会话检查命令。

但是，第一个版本运行不佳，因为它有时会丢失会话。很多人已经在使用第一个版本，目前无法更改。

所以，我在想，如果我可以通过使用 php 命令获取 iPhone 的 udid 值，我就会给他们一个新的会话值，因为它会丢失会话数据。还是有其他解决方案可以做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:40:21.917

您可以使用 web 服务将 udid 从 iphone 发送到 php，然后您可以访问它。

```
 NSString *token=[NSString stringWithFormat:@"%@",deviceToken];
token= [token stringByReplacingOccurrencesOfString:@"<" withString:@""];
token= [token stringByReplacingOccurrencesOfString:@">" withString:@""];
token= [token stringByReplacingOccurrencesOfString:@" " withString:@""];
NSString *post = [NSString stringWithFormat:@"token=%@",token];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.server.com/web-service/save-token.php?"]]];
 [request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Current-Type"];
[request setHTTPBody:postData];
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnstring = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

# node.js - 如何使用 node.js 和 express 实现虚拟目录？

> ID：10618418
> 
> 赞同：9
> 
> 时间：2012-05-16T12:22:26.827
> 
> 标签：node.js, express

我想使用快速静态服务器配置来实现静态服务器：

```
app.configure(function() {
    app.use(express.static(__dirname + '/public'));
}); 
```

但我想将 URL 映射`http://myhost/url1`到目录`C:\dirA\dirB`和`http://myhost/url2`目录`C:\dirC`

如何使用 express.static 实现它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-05T11:07:07.257

这应该适合你：

```
var serveStatic = require( "serve-static" );
app.use('/url1', serveStatic('c:\\dirA\\dirB'));
app.use('/url2', serveStatic('C:\\dirC')); 
```

查看[app.use()](http://expressjs.com/api.html#app.use)的文档。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T14:12:01.787

根据您计划以这种方式映射的目录数量，您可以简单地为`public`文件夹中的这些目录创建符号链接。

在 Windows 中：

```
mklink /D c:\dirA\dirB public\url1 
```

在 Linux 或 OSX 中：

```
ln -s /dirA/dirB public/url1 
```

然后你的静态资产服务器应该透明地从这些目录中提供服务（我从未在 Windows 上测试过，但我不明白为什么它不起作用）。

或者，如果您想包含某种动态路由，您可以编写自己的中间件来替换`express.static`实际上`connect.static`在幕后的中间件。查看[连接源](https://github.com/senchalabs/connect)中的[static.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/static.js)并了解它是如何实现的，编写自己的变体应该相当简单。

# codeigniter - 将 PHP 中的会话与本机移动应用程序一起使用

> ID：10618422
> 
> 赞同：0
> 
> 时间：2012-05-16T12:22:42.110
> 
> 标签：codeigniter, mobile-application, php

我在服务器端使用 CodeIgniter 框架为原生移动应用程序提供后端。在服务器端，我必须使用购物车。我在 CodeIgniter 中使用 db 进行会话。当我们使用会话时，浏览器 cookie 中的 session_id 让会话工作。登录请求成功后，移动应用程序从服务器响应中检索会话 ID - 然后此 session_id 可以在进一步请求中从移动应用程序发送到服务器。

现在CI中有没有办法根据sessionid获取session的数据？就像移动应用程序发送 session_id 'xyz' 那么我如何获取 session_id 为 'xyz' 的会话数据？以及如何在使用购物车的同时更好地使用会话？

以下是我的登录代码。会话存储在`ci_session`数据库表中。

```
function login($username,$password){
    $query = $this->db->select("id,username")->get_where(self::$table, array('username' => $username,'Password'=>$password));
    $arr=$query->row_array();
    if($arr){
        $this->session->set_userdata(array('id'=>$arr['id'],'username'=>$arr['username']));
        // $this->db->insert('ci_sessions',array('user_id'=>$arr['id'],'username'=>$arr['username']));
        return $this->session->userdata('session_id');
    }
    return 0;                    
} 
```

那么我怎样才能得到会话 wrt session_id 以及购物车如何使用它呢？因为我认为在本文档中：[http](http://codeigniter.com/user_guide/libraries/cart.html) ://codeigniter.com/user_guide/libraries/cart.html购物车会根据加载的会话自动存储内容。因此我需要根据 session_id 加载会话，这样我才能正确使用 CIs 购物车库。

如何根据 session_id 加载会话，或者告诉我我是否做得不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:55:02.693

首先，问题的格式和写下来非常糟糕，因此不太容易理解......

如果我理解正确，这就是你得到的：

1.  在移动本机应用程序中，用户登录 - 对基于 CI 的服务器的请求
2.  CI 服务器登录用户，将数据保存到会话并将会话保存到数据库，同时使用会话 ID 响应移动应用程序
3.  然后，只要向服务器发送请求（例如使用购物车时），移动应用就会发送会话 ID

现在 - 如果您将会话存储在数据库表中`ci_session`，您只需要根据提供的会话 ID 请求存储在数据库表中的会话内容，因此使用您的登录脚本示例我会做类似的事情：

```
function loadSessionBySessionId($sessionId){
    $query = $this->db->select("*")->get_where('ci_session', array('session_id' => $sessionId));
    return $query->row_array();              
} 
```

扩展代码以满足您的编码约定和服务器端应用程序。在服务器端应用程序的其他地方处理来自移动应用程序的请求您将检查会话是否返回（如果没有，则应返回 FALSE）并采取进一步的措施......

不知道您的购物车是如何工作的 - 这部分由您自己负责（除非您向我们明确说明您希望我们在您的购物车上为您提供什么帮助）。

# ios - Facebook iOS SDK - 跳转到另一个视图

> ID：10618423
> 
> 赞同：1
> 
> 时间：2012-05-16T12:22:46.387
> 
> 标签：ios, xcode, facebook, ios5

我是 iOS 开发的新手，我已经开始使用 ARC 实现 Facebook SDK。如教程所示，我在 AppDelegate 中添加了 Facebook 实例。我需要应用程序登录 Facebook，而不是在应用程序 didFinishLoading 时而是在按下按钮时。

我在我的视图控制器中创建了一个按钮和一个 IBAction，我正在使用 IBAction 从 AppDelegate 调用一个函数。AppDelegate 中的函数进行登录，然后，当一切正常时，将我返回到相同的视图。我需要实现以下内容：

1.  当我登录函数 fbDidLogin 时，我希望我的应用程序转到另一个视图。我如何从我的 AppDelegate 中做到这一点？

2.  这个函数在 AppDelegate 中，因为 facebook 实例在那里。关于应用程序的架构是否有更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:40:36.167

尝试在视图控制器中添加 Facebook 代码并将 Facebook 对象作为属性。在 Appdelegate 中将此视图控制器添加到您的窗口，并在从 facebook 获取身份验证时访问视图控制器内的 facebook 对象

```
[viewcontroller.facebook handleOpenURL:url]; 
```

fbDidLogin 将在您的视图控制器内，因此您可以推送另一个视图

```
- (void)fbDidLogin {
            [self.navigationController pushViewController:<#(UIViewController *)#> animated:<#(BOOL)#>]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:09:32.543

正如 Mahmoud 上面指出的那样，您可以使用

```
- (void)fbDidLogin {
        [self.navigationController pushViewController:<#(UIViewController *)#> animated:<#(BOOL)#>]
  } 
```

但根据我的经验，最好将您的 facebook 对象保持为单例（阅读[Singleton](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)），就好像您需要在程序中的其他地方访问此对象一样，您需要再次访问您的 appdelegate 对象，这将导致非常混乱的编码

另一方面，将其设置为单例可以让您更好地控制该对象，并且您实际上只需要一个 facebook 对象实例

# java - 在内部存储android中创建目录

> ID：10618425
> 
> 赞同：4
> 
> 时间：2012-05-16T12:22:53.053
> 
> 标签：java, android

是否可以在目录中创建目录。要创建一个目录，只需调用以下代码：

```
File dir1 = getDir("dir1",Context.MODE_PRIVATE); 
```

但是如何在其中创建其他目录`dir1`？

这：

```
File dir2 =getDir("dir1"+"/"+"dir2",Context.MODE_PRIVATE); 
```

抛出异常：

```
File dirFile = java.lang.IllegalArgumentException: File app_dir1/dir2 contains a path separator 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:04:04.243

Context.getDir() 似乎是一种 Android 独有的方法，用于抽象出在私有存储区域内创建目录的过程——它通常不是创建目录的通用方法。

要创建子目录，您应该使用普通的 java 方法，例如

```
File dir2 =new File(dir1, "dir2").mkdir(); 
```

请注意，这里的第一个参数是代表您创建的第一个目录的文件对象，而不是名称。

您可能希望随后设置此目录的权限。

*警告：未经测试*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T13:51:05.463

使用 Context.getDir(String name, int mode) 方法在内部存储中创建或访问目录。引用自文档：

```
File mydir = context.getDir("mydir", Context.MODE_PRIVATE); //Creating an internal dir;
File fileWithinMyDir = new File(mydir, "xyzDir"); //Getting a file within the dir.
fileWithinMyDir.mkDir; 
```

# node.js - 定义到“/client”的路由时，Railway.js + Jade 崩溃

> ID：10618427
> 
> 赞同：2
> 
> 时间：2012-05-16T12:23:11.393
> 
> 标签：node.js, pug, railway.js

当我在 Railway.js 中添加路线“/client”时，我收到了这个奇怪的错误：

```
500 ReferenceError: jade is not defined 
```

我的应用程序中的任何有效路线都得到了这个，而不仅仅是“/client”。这一行似乎被添加到我的 Jade 编译模板的顶部，并且是导致异常的原因：

```
var attrs = jade.attrs, escape = jade.escape, rethrow = jade.rethrow; 
```

除非我定义了一个路由 do '/client'，否则它不会出现在编译的模板中。

'/client/:id?', '/clients'，其他一切正常，只有 '/client'。

有人有线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:54:10.343

当我使用玉模板开发 ExpressJS 应用程序时，我遇到了同样的错误。我发现它只发生在我传递了一个名为`client`. 例如

```
res.render('admin/project_new', {
  标题：'编辑项目'，
  消息：req.flash()，
  客户：someClient
});

```

我认为`client`是渲染玉文件时的保留字（或者可能是其他东西，我对 Node.js 还是有点陌生​​）。我可以通过将其更改为以下方式来修复它：

```
res.render('admin/project_new', {
  标题：'编辑项目'，
  消息：req.flash()，
  theClient: someClient
});

```

# php - 在 JavaScript 中如何访问 session？

> ID：10618428
> 
> 赞同：4
> 
> 时间：2012-05-16T12:23:11.770
> 
> 标签：php, javascript, jquery, session, cakephp

我在 CakePHP 中创建了这样的会话：

```
$User = array('userid'=>232, 'access'=>1)
$this->Session->write('User',$User); 
```

现在我想使用**JavaScript** / **jQuery**`userid`签入会话

 ****是否有任何直接方法可以在**JavaScript**中访问此会话。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-16T12:24:41.703

> 是否有任何直接方法可以直接在 JavaScript 中访问此会话。

不会。会话数据存储在服务器上。

为了访问它，您需要通过 PHP 在 URI 上公开它，然后向该 URI 发出 HTTP 请求（可能使用 Ajax）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:47:09.543

```
// js function
var getUserId = function()  
{ userId = null;
 $.ajax({
    type: "POST",
    url: "ajax.php", // @TODO set the right Path
    async : false,  
        success: function(msg)
    {
        userId = msg;                   
    }
   });
return userId;
}
/*PHP ajax.php*/
<?php
echo $this->Session->get('User'); or $_SESSION['User']
?>

--- CAll----------

var userId = getUserId(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T14:26:52.000

为什么要检查客户端上的用户 ID，在哪里可以伪造、操纵等？只需使用会话 ID。

除此之外，还有两种简单且额外的方法可以将用户 ID 公开给 JavaScript。两者都具有不需要额外 AJAX 调用的优点（使您的页面更具响应性）：

1.  将用户 ID 存储在 cookie 中。
2.  生成一个存储用户 ID 的 JavaScript 变量：

在您的 php 文件中，执行以下操作：

```
<script>
var userId = <?php echo $User['userid']; ?>;
</script> 
```

这只是一个值的示例。将 PHP 变量暴露给 JavaScript 的更好方法是单独的 PHP 文件/控制器操作，如下所示：

```
<?php
session_start();
$myValues = array();
$myValues['User'] = get_user_from_session(); // just an example
// Assemble all your values here
header('Content-type: application/json');
echo "var myValues = ".json_encode($myValues);
// or, if you go for a JSONP style init, use
// echo "initValues(".json_encode($myValues).")"; 
```

然后，您可以将这些值包含在脚本的 src 属性中。然而，这将导致另一个 HTTP 请求。****

# winapi - 在 windows 机器上挂载远程 FTP 服务器

> ID：10618433
> 
> 赞同：0
> 
> 时间：2012-05-16T12:23:29.743
> 
> 标签：winapi, mfc

我想在 vc++ 中编写代码以将远程机器（远程机器上运行 FTP 服务器）挂载为我的 PC 上的本地驱动器。

请推荐可以使用 ftp 协议挂载远程机器的 API，例如“WNetAddConnection2”使用 smb 协议。

或者请提出相同的建议。

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:31:56.183

手动可以通过windows电脑中的“添加网络驱动器”选项来完成，你需要填写服务器的ftp地址，它将被挂载为本地驱动器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:26:30.877

*你好。这不是一项微不足道的任务。将远程机器安装为磁盘需要许多 API。对于 FTP 可以使用 FTP 系列的 WinInet 函数，对于 Shell 需要 pidls 和许多相关的 shell 函数的知识。*

而是使用 MSIEFTP.DLL/Microsoft Internet Explorer FTP 文件夹外壳扩展。:-)

# android - SoftKeyBoard 在使用 support v4 包开发的 Android DialogFragment 中的 EditText 上显示和消失

> ID：10618434
> 
> 赞同：0
> 
> 时间：2012-05-16T12:23:33.560
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在使用 support v4 包开发一个 android 应用程序，其中我使用了 Fragments，而我正在使用 DialogFragment 。我包含 EditText 。当我单击 EditText 输入一些文本时，软键盘刚来又消失，我无法输入文本。

谁能帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:31:06.200

使用下面的代码

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(et_usename, 0); 
```

其中 et_usename 是editext id，如`EditText et_usename=(EditText) findViewById(R.id.et_usename);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:41:22.893

您也可以在触摸事件中打开它，

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if (v.getId() == R.id.receiverText) {
        receiver.selectAll();
        receiver.requestFocus();
        manager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        manager.showSoftInput(receiver, InputMethodManager.SHOW_IMPLICIT);

    } 
```

接收者是我的编辑文本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:41:35.143

```
InputMethodManagerimm(InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD;
imm.getEnabledInputMethodLis(v.getWindowToken(), 0); 
```

写在 EditText 的 onFocuseChangeListener 上，例如

```
EditText.setonFocuseChangeListener(){
public void onFocusChange(View v, boolean hasFocus) {
InputMethodManagerimm(InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD;
    imm.getEnabledInputMethodLis(v.getWindowToken(), 0);
}

} 
```

# iphone - Tabbarcontroller 与导航控制器 iphone 应用程序

> ID：10618436
> 
> 赞同：0
> 
> 时间：2012-05-16T12:23:36.887
> 
> 标签：iphone

我在 iphone 应用程序的一个窗口中添加了一个 tabbarcontroller 和导航控制器。它工作正常。但是当我向一个视图添加一个按钮，并给该按钮一个操作时，应用程序崩溃了。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:35:20.827

确保您已在 .m 类中定义了操作方法。

# ios - 解析位于项目内部的 XML

> ID：10618437
> 
> 赞同：0
> 
> 时间：2012-05-16T12:23:40.867
> 
> 标签：ios, xml, parsing, project

这是我第一次使用 Xcode 解析 XML 文件，它与我习惯的有点不同......我阅读了这两个文档：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/UsingParser.html)

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-BCIJFGJI](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-BCIJFGJI)

我明白发生了什么……但我还有一个问题。如何解析直接位于项目内部的 XML 文件（我的意思是，例如在我通常放置图像的资源文件中？）。他们通常会展示如何获取 XML 文件的 url。但这里不是这样。它将直接加载到 iPad 上，在图像和所有内容中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:02:57.583

您只需提供本地文件的路径：-

```
NSString *myFile= [documentsDirectory stringByAppendingPathComponent:@"youFile.xml"]; 
NSURL *xmlFile = [NSURL fileURLWithPath:myFile];  
NSXMLParser *parser= [[NSXMLParser alloc] initWithContentsOfURL:xmlFile]; 
```

这只是一个实现你自己登录的例子，使用上面两行来获取本地文件的路径。

# svn - 获取当前和以前版本号的 svn 差异的命令

> ID：10618438
> 
> 赞同：54
> 
> 时间：2012-05-16T12:23:41.550
> 
> 标签：svn, tortoisesvn

如何通过命令行获取当前和以前修订号的文件内容的差异？

我怎样才能得到以前的修订号？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-16T12:33:06.633

`svn diff -r HEAD <item>`如果您想了解您的工作副本和上次提交的修订版之间的差异。

`svn diff -r PREV:COMMITTED <item>`如果你想看看最后一次提交做了什么。

你应该看看[Revision Keywords](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html#svn.tour.revs.keywords)。

`svn info <item>`将为您（除其他外）提供该项目的最后一次更改修订。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-16T12:40:38.433

根据您的评论，您希望查看不在您的工作副本中的项目的当前版本和以前版本之间的差异。为此，您需要知道`svn://[repo_root]/[path]/[item]`我假设您知道的项目的 URL（例如 ）。然后执行以下操作：

```
svn info <item-URL> 
```

将包含（除其他外）最后一次更改修订。使用该修订号 R 运行：

```
svn diff -c <R> <item-URL> 
```

它会给你最后的提交差异。

# java - Java：从二进制文件中读取，通过套接字发送字节

> ID：10618441
> 
> 赞同：3
> 
> 时间：2012-05-16T12:23:46.827
> 
> 标签：java, sockets, binary-data

这应该很容易，但我现在无法理解它。我想通过套接字发送一些字节，比如

```
Socket s = new Socket("localhost", TCP_SERVER_PORT);
DataInputStream is = new DataInputStream(new BufferedInputStream(s.getInputStream()));

DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(s.getOutputStream()));

for (int j=0; j<40; j++) {
  dos.writeByte(0);
} 
```

那行得通，但是现在我不想将写入字节写入输出流，而是从二进制文件中读取，然后将其写出。我知道（？）我需要一个 FileInputStream 来读取，我只是无法弄清楚构建整个事物的热度。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:33:47.377

```
public void transfer(final File f, final String host, final int port) throws IOException {
    final Socket socket = new Socket(host, port);
    final BufferedOutputStream outStream = new BufferedOutputStream(socket.getOutputStream());
    final BufferedInputStream inStream = new BufferedInputStream(new FileInputStream(f));
    final byte[] buffer = new byte[4096];
    for (int read = inStream.read(buffer); read >= 0; read = inStream.read(buffer))
        outStream.write(buffer, 0, read);
    inStream.close();
    outStream.close();
}
```

如果没有适当的异常处理，这将是一种天真的方法——在现实世界中，如果发生错误，您必须确保关闭流。

您可能想查看 Channel 类以及流的替代方案。例如，FileChannel 实例提供了可能更有效的 transferTo(...) 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:41:03.333

```
 Socket s = new Socket("localhost", TCP_SERVER_PORT);

        String fileName = "...."; 
```

使用文件名创建 FileInputStream

```
 FileInputStream fis = new FileInputStream(fileName); 
```

创建一个 FileInputStream 文件对象

```
 FileInputStream fis = new FileInputStream(new File(fileName)); 
```

从文件中读取

```
 DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(
        s.getOutputStream())); 
```

一个字节一个字节地读取它

```
 int element;
    while((element = fis.read()) !=1)
    {
        dos.write(element);
    } 
```

或从缓冲区中读取

```
byte[] byteBuffer = new byte[1024]; // buffer

    while(fis.read(byteBuffer)!= -1)
    {
        dos.write(byteBuffer);
    }

    dos.close();
    fis.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:30:02.123

从输入读取一个字节并将相同的字节写入输出

或者像这样使用字节缓冲区：

```
inputStream fis=new fileInputStream(file);
byte[] buff = new byte[1024];
int read;
while((read=fis.read(buff))>=0){
    dos.write(buff,0,read);
} 
```

请注意，您不需要为此使用 DataStreams

# php - 将键值添加到数组而不触发数组

> ID：10618446
> 
> 赞同：-1
> 
> 时间：2012-05-16T12:23:56.357
> 
> 标签：php, arrays

我见过这样的问题，但是如果我将键值对分配给像[这样的空数组](https://stackoverflow.com/questions/6669443/add-a-key-value-in-an-array)

```
$arr[$key] = $value; 
```

我收到 php 通知

```
Notice: Undefined index: <key> in <path> 
```

当然`<key>`是 $key 中的任何值。如何在不触发通知的情况下为新键分配值？

谢谢！

编辑：继承你更精确的代码。这正是我的代码中的内容。这有什么区别吗？

```
while( list( $k, $sum ) = mysql_fetch_row( $res ) ) {
   if( $sum < 0 ) {
    $churn[$k] += $sum;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:28:35.513

在添加密钥之前声明您的数组

```
$arr = array();
$arr[$key] = $value; 
```

或者干脆做

```
$arr = array($key=>$value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:29:28.367

你是什​​么意思`[$value]`

您正在尝试使用给定键获取全新数组的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:30:11.143

你的语法不正确。试试我的快速测试用例，它不会引起任何通知。

```
<?php
    error_reporting(E_ALL);

    $array = array();
    $key = 'new_key';
    $value = 'new_value';
    $array[$key] = $value;

    echo '<pre>';
    var_dump($array);
    exit;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T06:40:07.617

问题出在

```
while( list( $k, $sum ) = mysql_fetch_row( $res ) ) {
   if( $sum < 0 ) {
   $churn[$k] += $sum;
  }   
} 
```

由于 += 运算符。第一次，它被调用，churn['whateverWasIn$k'] 没有设置。第二次就好了..所以要摆脱通知，它必须像：

```
(!isset($churn[$k])) ? $churn[$k] = $sum :  $churn[$k] += $sum; 
```

实现中间语句中缺少的+。所以如果这个键不存在，我想将它增加$sum，声明它并给它$sum的值，否则只需将$sum添加到当前值。

就这样。它的代码看起来并不漂亮，但它让我摆脱了 200 条通知。在我看来，这也不太好看。

谢谢你的帮助。

# javascript - Backbone.js 使用销毁/删除发送变量

> ID：10618451
> 
> 赞同：0
> 
> 时间：2012-05-16T12:24:07.540
> 
> 标签：javascript, ajax, backbone.js

我是主干新手，我正在尝试发送删除命令。我正在使用后期修改选项，但删除只发送方法。下面的例子：

```
 Backbone.emulateHTTP = true;
    Backbone.emulateJSON = true;
    ProductImageModel = Backbone.Model.extend({

            initialize : function() {
            },

            url : "/products/ajaximage",
        });
    //Later called using
    var image = new ProductImageModel({id: id});
    image.destroy(); 
```

问题是，id 永远不会传递，并且 $_POST 中出现的所有内容都是这样的：

```
Array
(
    [_method] => DELETE
) 
```

有没有办法在删除中传递 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:33:02.697

在查看带注释的源代码并查看您的代码时......您正在`Model.url`使用静态属性覆盖该方法。该`Backbone.Model.url`方法如下所示：

```
url: function() {
    var base = getValue(this, 'urlRoot') || getValue(this.collection, 'url') || urlError();
    if (this.isNew()) return base;
    return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + encodeURIComponent(this.id);
} 
```

根据您的模型是否为新模型，它会即时为您生成 URL。

您应该做的，而不是将您的`Model.url`属性`'/products/ajaximage'`默认`Model.urlRoot`为`'/products/ajaximage'`. 这应该允许您执行`Model.destroy()`并获取模型的 ID 作为对服务器的请求 url 的一部分，这样您就知道需要删除哪个模型。

# php - Apache/PHP + LibreOffice

> ID：10618454
> 
> 赞同：0
> 
> 时间：2012-05-16T12:24:25.433
> 
> 标签：php, apache, centos, permission-denied, libreoffice

我已经在我的 CentOS 机器上安装了 LibreOffice RPMS（已经尝试过 3.5.3 和 3.4.6），并且我试图让 PHP 运行一个调用 LibreOffice 的 shell 脚本。在 shell 脚本中，它运行执行这一行：

```
/opt/libreoffice3.4/program/soffice --headless -convert-to $extension.pdf "$1" -outdir $folder 
```

但是，此命令将导致出现以下消息：

```
./createpdf.sh: line 8: /opt/libreoffice3.4/program/soffice: Permission denied 
```

线路本身很好。如果我回显它并在 SSH 中手动运行它，它工作正常。这很可能是因为我以不同的用户身份运行它（注意：不是作为安装它的用户，也不是作为 root），具有不同的权限。

尽管我很绝望，但我已经尝试将整个 libreoffice 文件夹更改为 777，并尝试让“apache”用户成为所有者。那里没有运气。有没有人知道为什么它不让 apache 运行它，以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:34:38.360

作为从命令行运行的替代方案，您是否考虑过使用[PUNO](http://www.wstech2.net/index.php?do=0a,01,05) PHP 包装器运行 UNO（COM 的 Open/Libre Office 替代方案）。这样，您无需担心权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T20:33:11.307

另请参阅[通用网络对象 (UNO)](http://en.wikipedia.org/wiki/Universal_Network_Objects)：有 Python、Java 等可供使用的桥接器。有一些应用程序可以简化转换的使用，请参阅[Docvert](http://holloway.co.nz/docvert/)和 *JODConverter*（[jODconverter](http://sourceforge.net/projects/jodconverter)和[pyODconverter](https://github.com/mirkonasato/pyodconverter)）。

所有这些都可以被 PHP 调用为 web-service 或 exec。

# javascript - 开始时的 Javascript 错误

> ID：10618455
> 
> 赞同：2
> 
> 时间：2012-05-16T12:24:27.683
> 
> 标签：javascript, asp.net, error-handling

当我启动页面时，它给了我这个错误。我可以按否，但代码不起作用。

![在此处输入图像描述](../Images/821cfcc7d6f4dfeda096583d98665cac.png)

代码是我如何解决这个错误？顺便说一下，按钮浏览会打开文件上传，但这是在 c# 中提前谢谢。

```
 <%@ control language="C#" autoeventwireup="true" inherits="Web_Controls_SOLATDFileChooser, App_Web_ivmyhbca" %>

<!--2012-05-11 TP : Redesign da página web -->
<link rel="stylesheet" type="text/css" href="../styles/CMM/InternetFace.css" />
<style type="text/css">
    div.fileinputs
    {
        position: relative;
    }

    div.fakefile
    {
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: 1;
    }

    input.file
    {
        visibility: hidden;
    }
</style>
<script type="text/javascript" language="javascript">
    function clear() {
        document.getElementById("<%=FileUpload1.ClientID %>").value = "";
        document.getElementById("<%=txtFileName.ClientID %>").value = "";
    }
</script>
<script type="text/javascript" language="javascript">
    function uploadFileChange() {
    document.getElementById("<%=txtFileName.ClientID %>").value = document.getElementById("<%=FileUpload1.ClientID %>").value;
    }

</script>

<table width="500px">
    <tr>
        <td valign="middle">
            <div class="fileinputs">
                <!-- Upload file invisivel-->
                <asp:FileUpload ID="FileUpload1" class="file" runat="server"
                    onchange="uploadFileChange();" />
                <!-- button e textbox falsas para poder dar syles-->
                <div class="fakefile">
                    <!--textbox onde está o path do ficheiro-->
                    <asp:TextBox ID="txtFileName" CssClass="textbox"  runat="server"
                        Width="300px" ReadOnly="true" />
                    <!-- button de browse-->
                    <asp:Button ID="btnBrowse" runat="server" Text="Procurar..."
                        ForeColor="White" Height="21px" />
                    <!--button para apagar o path ja que a textbox esta em read-only para prevenir erros-->
                    <asp:Button ID="btnCancel" Height="21px" CssClass="btnSubmit" Text="Apagar" ForeColor="White"
                        OnClientClick="clear();" runat="server" />
                </div>
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:28:50.623

您在该代码中有很多错误

1.  额外`;`之后`{`（在两个功能中*（在您更新之前）*
2.  `documente`而不是`document` *（在您更新之前）*
3.  你调用一个未定义的函数`UploadFileChange`（你调用它`UploadFielChange`）*（在你更新之前）*
4.  里面没有引号`getElementById()`

作为旁注，关闭一个`script`块然后在下一行重新打开另一个块是没有用的。这两个函数可以包含在同一个`script`块中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:26:36.807

“documente”不正确，应改为“document”

同样，也许解释器对“;”有问题 紧跟在“{”之后，没用

Rgds。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:27:31.427

删除`;`之后`{`并更改`documente`为`document`. 此外，还缺少一些引文：

```
<script type="text/javascript" language="javascript">
function clear() {
document.getElementById('<%=FileUpload1.ClientID %>').value ="";
document.getElementById('<%=txtFileName.ClientID %>').value ="";
}
</script>
<script type="text/javascript" language="javascript">
function uploadFielChange() {
document.getElementById('<%=txtFileName.ClientID %>').value = document.getElementById('<%=FileUpload1.ClientID %>').value;

}
</script> 
```

请注意`uploadFielChange`!= `UploadFielChange`，所以你也必须改变它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:26:34.997

您`documente`在我怀疑您想要的整个代码中使用`document`。尝试先改变它。

`;`你在这一行的末尾有一个额外的：`function uploadFielChange() {;`

最后，您需要引用 ID，正如 Alex K. 指出的那样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T12:28:18.610

显然您的服务器模板引擎不起作用：

```
<%=FileUpload1.ClientID %> 
```

没有有效的 JS。[使用http://www.jslint.com/](http://www.jslint.com/)检查您的代码！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T12:28:40.380

去除那个 ”;” 在函数的左括号之后并将“documente”替换为“document”

```
<script type="text/javascript" language="javascript">
function clear() {
document.getElementById(<%=FileUpload1.ClientID %>).value ="";
document.getElementById(<%=txtFileName.ClientID %>).value ="";
}
</script>
<script type="text/javascript" language="javascript">
function uploadFielChange() {
document.getElementById(<%=txtFileName.ClientID %>).value = document.getElementById(<%=FileUpload1.ClientID %>).value;

}
</script>
... 
```

# asp.net - 是否可以通过 VS2010 中的 Web Deploy 过滤已发布的文件夹？

> ID：10618459
> 
> 赞同：2
> 
> 时间：2012-05-16T12:24:45.200
> 
> 标签：asp.net, visual-studio-2010, web-deployment

我想知道是否可以过滤通过 Web 部署（在 Visual Studio 2010 中）发布的元素（解决方案资源管理器中的文件夹）？我知道这没有帮助，但我在我的项目属性中选择了“仅运行此应用程序所需的文件”。

我问这个，因为我有一些文件夹（源图像文件夹、文档文件夹等）我不想上传到服务器上。也许您想知道为什么我将所有这些文件夹都保存在我的解决方案资源管理器中？因为我正在使用一个版本控制系统 (VisualSVN)，它还可以让我跟踪所有这些文件中的所有更改。此外，通过我最喜欢的 IDE 可以更轻松地访问它们 :)

也许有更好的方式来组织自己？如果您有最佳实践或建议，请告诉我。

感谢您的帮助和建议（对于我的第一个 Stackoverflow 帖子！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:36:54.207

在编辑器中或从 Visual Studio 本身中打开 Web 应用程序项目文件（.csproj 或 .vbproj）（参见这篇文章）。

在所需元素中添加一个和/或元素。

例如

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
  ...
  <NoWarn>42016,41999,42017,42018,42019,42032,42036,42020,42021,42022</NoWarn>
  <ExcludeFilesFromDeployment>File1.aspx;File2.aspx</ExcludeFilesFromDeployment>
  <ExcludeFoldersFromDeployment>Folder1;Folder2</ExcludeFoldersFromDeployment>
</PropertyGroup> 
```

查看以下链接了解更多详情：

[http://blogs.msdn.com/b/webdevtools/archive/2010/04/22/web-deployment- exclude-files-and-folders-via-the-web-application-s-project-file.aspx](http://blogs.msdn.com/b/webdevtools/archive/2010/04/22/web-deployment-excluding-files-and-folders-via-the-web-application-s-project-file.aspx)

# actionscript-3 - 如何在 AS3 中更改movieClip 的渐变填充

> ID：10618466
> 
> 赞同：1
> 
> 时间：2012-05-16T12:25:05.420
> 
> 标签：actionscript-3, flash, adobe, gradient, colortransform

假设我在舞台上有一个形状复杂且具有渐变颜色 (A -> B) 的影片剪辑，我想在运行时更改渐变的开始和结束颜色。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:03:36.777

如果您用鼠标绘制此影片剪辑，则不可能。如果您想这样做，您可以将渐变放在一个带有遮罩的矩形 MovieClip 中。蒙版将具有您当前渐变的形状。然后在 AS3 中，您可以在 MovieClip 中重绘渐变（在下面的示例中称为 gradientZone）。

```
var matr:Matrix = new Matrix();
matr.createGradientBox(gradientZone.width, gradientZone.height, 0, 0, 0);
gradientZone.graphics.clear();
gradientZone.graphics.beginGradientFill(GradientType.LINEAR, [0xFF0000, 0x0000FF], [1, 1], [0x00, 0xFF], matr);        
gradientZone.graphics.drawRect(0,0,gradientZone.width, gradientZone.height); 
```

# c++ - opencv将一个矩阵复制到另一个矩阵的第一列

> ID：10618468
> 
> 赞同：3
> 
> 时间：2012-05-16T12:25:18.693
> 
> 标签：c++, image-processing, opencv, matrix

我有一个指针向量，它指向从我的 camrea 和 framegrabber 获得的图像（大小 w=96 h=100 NoImg=100）。如你所见，我正在创建它们的矩阵并开始逐个像素地读取数据。下一步是创建一个更大的矩阵（h=9600 w=100），它可以保存第一列中一个图像的所有像素数据，下一个图像数据到第二列，但是我达到 100 的时间的图像。我想知道 opencv 中是否有任何足够的方法或预先准备好的方法，可以帮助我将所有图像数据直接复制到另一个矩阵的一列？还是我需要一一读取所有像素，就像下面的代码一样，然后将它们一一写入另一个像素？ **编辑** 我最终得到以下代码

```
cv::Mat _mainMatrix(_imageSize,_totalImgNO,CV_8UC1);    
//loop for creating a matrix of each image in the memory
for(counter=0;counter<_totalImgNO;counter++){
    unsigned char* _pointer=(unsigned char*)_imgPtrVector.at(counter);
    cv::Mat _matrixImage(cv::Size(width,height), CV_8UC1,_pointer , cv::Mat::AUTO_STEP);         
    channels=_matrixImage.channels();
    nRows=_matrixImage.rows * channels;
    nCols=_matrixImage.cols;
    if (_matrixImage.isContinuous())
    {
        nCols *= nRows;
        nRows = 1;
    }
    for(int i = 0; i < nRows; ++i)
    {
        p = _matrixImage.ptr<uchar>(i);
        for (int  j = 0; j < nCols; ++j)
        {
            if(iRow<_totalImgNO && jCol<_imageSize){                
                _mainMatrix.at<uchar>(iRow,jCol)=p[j];
                iRow++;
            }               
        }
    }
    jCol++;
    iRow=0; 
    _matrixImage.~Mat();            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:25:02.000

OpenCV 迭代器是 STL 迭代器。这意味着，您可以在它们上使用 STL 函数。

粗略的例子：

```
cv::Mat1b bigmat(9600, 100);
for (int i = 0; i < bigmat.cols; ++i) {
    cv::Mat1b column = bigmatrix.col(i);
    cv::Mat1b &source = *(images[i]);
    std::copy(source.begin(), source.end(), column.begin());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:46:59.710

我认为你想要的真的很接近重塑功能。

告诉我如果我错了:)

[Opencv 重塑](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html?highlight=reshape#Mat%3a%3areshape)

# jquery-ui - jQuery UI Sortable + Dragable - 防止“源”列表中的项目在“目标”列表中被丢弃两次

> ID：10618469
> 
> 赞同：1
> 
> 时间：2012-05-16T12:25:22.190
> 
> 标签：jquery-ui, draggable, jquery-ui-sortable, jquery-ui-draggable

我在“小部件样式”列表集上使用可排序和可拖动的组合。我在连接到 7 个“目标”列表（可排序）的可拖动列表中有我的“可用”项目列表。可用列表具有克隆助手，以确保可用列表始终填充可用项目。这一切都很好，只有一个例外。

一旦将一个项目从可用列拖放到目标列，我不希望它再次可拖动到该列（但是，它可以被拖动到其他列，假设它尚未在该列中。

这是一个应该演示功能的 JS Fiddle：http: [//jsfiddle.net/Y4T32/8/](http://jsfiddle.net/Y4T32/8/)

这是我正在使用的代码：

JS：

```
 $( ".sph-callout-portlet" ).sortable({
        placeholder: "ui-state-highlight"
    });
    $( "#sph-callout-portlet-avail li" ).draggable({
        connectToSortable: ".sph-callout-portlet",
        helper: "clone",
        stop: function(event, ui) {
            //Other functionality here, removed for brevity
        }
    }); 
```

HTML：

```
<ul class="sph-callout-portlet-avail">
    <li>Item 1</li>
    <li>Item 2</li>
    <li>Item 3</li>
    <li>Item 4</li>
</ul>
<ul class="sph-callout-portlet-avail">

</ul>
<ul class="sph-callout-portlet-avail">

</ul>
<!-- Total of 7 empty lists --> 
```

# sharepoint-2010 - 在全文sqlquery中访问自定义爬网属性

> ID：10618471
> 
> 赞同：0
> 
> 时间：2012-05-16T12:25:46.370
> 
> 标签：sharepoint-2010, microsoft-search-server

我的管理属性命名为`e/m/BioOffice/Text`, `e/m/BioPosition/Text`。当我尝试执行以下代码时：

```
 string queryTxt = "SELECT URL, e/m/BioOffice/Text,e/m/BioPosition/Text FROM SCOPE() where \"scope\"='ektron25056203187' And FREETEXT(*,'" + TextBox1.Text.Trim() + "')";

                var query = new FullTextSqlQuery(searchApplicationProxy)
                {   
                    QueryText = queryTxt,
                    ResultTypes = ResultType.RelevantResults,
                    ResultsProvider = SearchProvider.Default,
                    TrimDuplicates = false,
                    EnableStemming = true
                };

                ResultTableCollection resultsTableCollection = query.Execute();
                ResultTable searchResultsTable = resultsTableCollection[ResultType.RelevantResults];                   
                DataTable resultsDataTable = new DataTable();
                resultsDataTable.TableName = "Results";
                resultsDataTable.Load(searchResultsTable, LoadOption.OverwriteChanges);

                Label1.Text = "Total results Count : " + resultsDataTable.Rows.Count; 
```

它给了我一个例外：`Your query is malformed. Please rephrase your query`。请帮助我如何访问这些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:30:32.683

嗨 gaurav 在**搜索服务工具中测试您的查询**

SharePoint 搜索服务工具是一个丰富的 Web 服务客户端，允许开发人员探索给定 SharePoint 搜索 SSP 的范围和托管属性，以关键字或 SQL 语法构建查询，提交这些查询并检查原始 Web 服务结果。此工具可用于故障排除和验证 SharePoint 环境的行为和配置。

您可以在 codeplex 中使用该工具

[http://sharepointsearchserv.codeplex.com/](http://sharepointsearchserv.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:22:50.343

由于托管属性名称中的正斜杠 ('/')，​​Search Server 将此解释为格式错误的查询。这些属性名称应该用双引号 (") 括起来，以便 Search Server 的查询解析器按字面意思解释它们。（请注意表达式后面的 WHERE 子句中如何引用 'scope' 属性。）

```
string queryTxt = "SELECT URL, \"e/m/BioOffice/Text\",\"e/m/BioPosition/Text\" FROM SCOPE() where \"scope\"='ektron25056203187' And FREETEXT(*,'" + TextBox1.Text.Trim() + "')"; 
```

我还看到您可能正在将 Ektron 站点与 Search Server 集成。我建议使用 Ektron 搜索 API 来确保您的查询格式正确。（参考：[AdvancedSearchCriteria](http://reference.ektron.com/developer/framework/Search/AdvancedSearchCriteria/)）

# nosql - 在图形数据库中进行聚合的想法

> ID：10618472
> 
> 赞同：3
> 
> 时间：2012-05-16T12:25:50.270
> 
> 标签：nosql, aggregate-functions, neo4j, graph-databases, gremlin

我知道肯定有很多人在做这件事。

使用 neo4J 进行项目。假设我有一个名为 Photo 的实体。现在它出现在互联网上，有一百万人喜欢它。将这百万个赞放入图表中，然后导航该图表以计算聚合，以便我可以显示计数似乎很愚蠢。当然，索引可以使这更有效，特别是如果索引用于计算聚合（就像它们在 SQL 中一样），但是大量的搜索让我认为情况并非如此。当然，许多聚合只是特定节点的关系计数，但这似乎仍然是错误的（例如，从 Photo 到 Like 事件的图关系看起来很难看）。

也许最好的方法是仅将图形数据库用于它的好处，然后将它们用于事件之类的事情，将它们放入 SQL 数据库中。一个反驳的论点可能是我可以解决所有这些麻烦，然后想要一个汇总，比如“有多少朋友的朋友喜欢这个？” 我就回到了图表的后院。

那里的选择似乎是[编写一些 java](http://neo4j.org/nabble/#nabble-td3317720)或一堆密码查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T19:15:33.260

抢，

有几种选择，

*   有些人认为最好将图形数据保留在图形中，并将原始事件保留在其他一些存储中，并且只是从事件流中派生出更高级别的概念和构造，并在图形中实现它们
*   存储聚合数据的二级索引是相似的，但可能与事务图没有很好的集成
*   也可以使用图内结构来表示聚合值或访问模式，René Pickard 通过图形实时推文查询证明了这[一点](http://www.rene-pickhardt.de/graphity-an-efficient-graph-model-for-retrieving-the-top-k-news-feeds-for-users-in-social-networks/)。源代码在[github上可用](https://github.com/renepickhardt/graphity-evaluation)

通常你必须查看你的用例，是阅读所有喜欢更重要还是只有少数喜欢真正重要，计数也是如此，如果经常阅读，聚合它是有意义的（并保持同步）并从聚合位置读取它。

由于图表的无模式特性，您还可以改进 - 这意味着如果您只有几个喜欢，当您的喜欢计数超过某个数量时，通过计算关系来计算该数字会更快、更明智您可以将其迁移到图像本身的变量中。

这也可能是一种时间驱动的方法，例如，在一张图片发布后不久，周围发生了很多事情，所以你宁愿让计数保持最新（请记住，如果计数相差几个百分点，这并不重要毕竟，所以你也可以懒惰地更新）。一段时间后，该图片不再受到那么多关注，只需将点赞数汇总到一个属性中即可。

# c++ - 这个 C++ 代码是可移植的吗？（假设多维数组有连续的内存布局）

> ID：10618473
> 
> 赞同：19
> 
> 时间：2012-05-16T12:26:02.910
> 
> 标签：c++, arrays, memory, multidimensional-array, portability

首先，如果我犯了任何语法错误等，对不起我的英语......

我的问题是，当我们有一个二维数组时，如果我是对的，从计算机和 C/C++ 的角度来看，它只是一个长的一维数组，索引只是帮助编译器映射到具体地址。

此代码片段在 Visual C++ 中工作，但我想知道，此代码是否*可***移植**并**符合** **标准**(C++98)，不会对其他架构和/或操作系统造成意外：

 ***```
int arr[][3] = { 1, 5, 3, 7, 5, 2, 7, 8, 9 };
const int ARR_NUM = sizeof(arr) / sizeof(int);

int* ptr = reinterpret_cast<int*>(arr);    // NOT: int(*)[][3] !!!
for (int i = 0; i < ARR_NUM; ++i) {
    cout << ptr[i] << endl;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T12:46:45.830

## 标准话

多维数组的元素按行优先顺序存储，因此手动索引是可移植的：

C++98、8.3.4/1：

> 数组类型的对象包含一个连续分配的非空集合，由 N 个类型为 T 的子对象组成。

显然，对于多维数组，这递归地适用。

然而，这种使用`reinterpret_cast`是不可移植的。标准说 (C++98, 5.2.10/1)

> [...] 否则，结果是一个右值，并且 [...]、数组到指针、[...] 标准转换在表达式 v 上执行。

换句话说，传递`arr`立即触发数组衰减到指向其第一个元素的指针。然后 (C++98, 5.2.10/3) 来了

> 执行的映射`reinterpret_cast`是实现定义的。

本节的其余部分列出了一些例外情况，指定了总是明确定义的强制转换。鉴于它们都不适用于这里，因此结论是技术上它是默认实现定义的。

## 定论

从理论上讲，这不是便携式的。实际上，只要架构相同（例如 x86），我当然希望演员能够可靠地工作。

幸运的是，您不必假设这样的事情，因为正如[其他](https://stackoverflow.com/a/10618931/50079) [人提到](https://stackoverflow.com/questions/10618473/is-this-c-code-portable-assuming-multidimensional-arrays-have-continuous-mem/10618866#comment13760969_10618473)的那样，类似的东西`int* ptr = arr[0]`做同样的事情并且保证便携。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T12:49:52.073

如果您想非常严格，则 reinterpret_cast 在标准中的定义不是很好。这将适用于任何地方，但你可以提出一个迂腐的理由来反对它。

采用

```
int *ptr = arr[0]; 
```

为了安全起见。保证了连续的阵列布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:32:43.913

至于假设，多维数组具有连续的内存布局，它符合标准且可移植。自 C 时代以来就是如此，C++ 并没有改变这一点。

但是，`reinterpret_cast`它不是可移植的，因此总体而言，不能保证您的代码在任何地方都可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:39:26.813

如果我没记错`reinterpret_cast`的话不是便携操作。***

# c# - 调试安装版本 - C#

> ID：10618480
> 
> 赞同：0
> 
> 时间：2012-05-16T12:26:20.600
> 
> 标签：c#, debugging

我基本上是在尝试通过用相同 dll 的调试版本替换已安装的 dll 来调试我们软件的已安装版本。

我需要做什么来调试我的应用程序的安装版本。

1.  我需要替换的dll文件存在于GAC中。
2.  安装版本号与调试版本号不同。
3.  我很确定（没有检查），安装的版本有一个强名称，不确定调试版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:40:10.913

这里没有真正的问题，但很明显，您可能会遇到问题使其工作：

*   该应用程序将首先找到 GAC 中的 DLL。因此，您需要注销它并将调试版本复制到与应用程序的 EXE 相同的目录中，以便它始终加载您的替换。在 GAC 中注册调试版本在技术上是可行的，但请参见下一个项目符号。

*   该应用程序将寻找特定的 [AssemblyVersion]，并且不会很高兴在您的替代品中找到另一个。显然，您希望为调试版本提供相同的 [AssemblyVersion]，所以这不是问题。`<bindingRedirect>`如果确实需要，您可以在 app.exe.config 文件中添加一个。

*   如果应用程序没有完全信任地运行，它*可能会检查替换 DLL 的强名称。*因此，请务必使用相同的密钥对其进行签名，而不必为此感到头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:34:45.163

您可以调试“调试”版本以及“发布”版本。需要的是“.pdb”文件。“发布”版本的缺点是某些代码可能已被优化掉，从而使调试变得不那么确定。

这是一篇不错的文章，描述了如何调试 GAC 中的程序集：[http ://www.elumenotion.com/Blog/Lists/Posts/Post.aspx?ID=23](http://www.elumenotion.com/Blog/Lists/Posts/Post.aspx?ID=23)

# html - 我的居中 div 不是很居中

> ID：10618481
> 
> 赞同：0
> 
> 时间：2012-05-16T12:26:20.987
> 
> 标签：html, layout

大家，早安。我在网站上环顾四周，并尝试了这里一些线程的建议，我已经让我的 div 居中，但 div 的左边缘居中，我希望 div 中的内容居中，然后 div 本身居中。

[这就是我的意思。](http://www.emmingerdesign.com/madlab2.html)

CSS中是否可能隐藏了一个边距（有点乱）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:35:19.403

*居中*div的宽度必须大于其内容。**ul**的宽度为 515px，所以我将*居中*的div 宽度更改为 600px：

```
#centered {
    position: relative;
    width: 600px; /* This width must be greater than the content width. */
    margin: 0 auto;
    text-align: left;
} 
```

# liferay - 我如何在 servlet.session.destroy.events 中获取 PortletContext

> ID：10618485
> 
> 赞同：1
> 
> 时间：2012-05-16T12:26:30.660
> 
> 标签：liferay

传送门：Liferay 6.0

在我的 portlet 中，我需要在 application_Scope 维护一个对象，以便所有登录的用户都可以使用它。作为一种解决方案，我认为 PortletContext 将是我应该使用的东西。因此，我继续并将其存储在 portletcontext 中，如下所示

```
PortletContext context = renderRequest.getPortletSession().getPortletContext();
context.setAttribute("attr1", "test"); 
```

现在，当用户注销时，我想从上下文中操作这个对象，为此我编写了一个捕获 servlet.session.destroy.events 的钩子。这是代码的样子

```
public class MySessionDestroyAction extends SessionAction {
@Override
public void run(HttpSession session) throws ActionException {
ServletContext context = session.getServletContext();
String temp = (String) context.getAttribute("attr1");
context.
}
} 
```

由于上面的类有 HttpSession 对象，我可以获得 servletcontext 而不是 portlet 上下文，我仍然尝试过，但我无法获得我在 portlet 中设置的属性值。

我想我应该在 Servletcontext 中设置我的对象，然后尝试，为此，我的 portlet 我修改了我的代码以从 PortalUtil 类中获取 servlet 上下文对象，如下所示

```
HttpServletRequest httpReq = PortalUtil.getHttpServletRequest(request);
ServletContext scontext = httpReq.getSession().getServletContext();
scontext.setAttribute("attr1", "test"); 
```

即使在这样做之后 MySessionDestroyAction 类也不会获得上下文属性。谁能解释这种行为？此外，如果这不是正确的实施方式，任何人都可以建议我应该使用什么方法。

谢谢

# android - 使用 Flex 开发的 Air 应用程序在 Android 2.2.x 上意外停止

> ID：10618486
> 
> 赞同：1
> 
> 时间：2012-05-16T12:26:33.657
> 
> 标签：android, apache-flex, air

我正在使用 Flex (ver 4.5) 开发一个 Android 应用程序。我可以在 Android 2.3.x 及更高版本上完美运行它，但是当涉及到 Android 2.2.x 时，我的应用程序意外停止。
我想知道我应该做些什么才能让它在旧版本的 Android 上运行？

# security - Heroku 应用程序在 VPN 上调用外部 Web 服务

> ID：10618489
> 
> 赞同：9
> 
> 时间：2012-05-16T12:26:42.737
> 
> 标签：security, heroku, proxy, vpn

1.  所以，我们有一个 Heroku 应用程序。
2.  我们有一个在 Intranet 上运行的 Web 服务。
3.  该 Intranet 需要 VPN 连接供外部人员连接。
4.  我们希望我们的 Heroku 应用程序通过 VPN 调用 Intranet 上的 Web 服务。

你会如何解决这个问题？

*一些想法……*

Heroku 似乎没有我们可以在我们的应用程序上激活的 VPN 客户端 :(

我知道有些路由器可以为我们处理 VPN gubbins。是否有在线服务可以让我们为我们的 Intranet 站点设置 VPN 代理？

提前致谢

吨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:56:21.233

恐怕这是不可能的，当然至少不是通过VPN。Heroku 使用 Amazon EC2，因此您甚至无法将其缩小到 IP 范围以允许访问。Heroku 是一个封闭的系统，所以你不能安装额外的组件，所以除非它可以通过 http/https 访问，否则它是不行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T20:59:18.243

我认为您可以使用静态 IP 地址添加来确保您的应用程序通过该 IP 地址连接。

[https://devcenter.heroku.com/articles/quotaguardstatic](https://devcenter.heroku.com/articles/quotaguardstatic)

但我不知道这如何让您使用 VPN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T21:56:41.813

如果您的公司有 Heroku Enterprise，看起来可以在私人空间内完成：[ [https://blog.heroku.com/heroku_private_spaces_are_now_generally_available_within_heroku_enterprise]](https://blog.heroku.com/heroku_private_spaces_are_now_generally_available_within_heroku_enterprise])

[ [https://devcenter.heroku.com/articles/private-spaces]](https://devcenter.heroku.com/articles/private-spaces])

否则，我能想到的最简单的方法是在您的 DMZ 中启动一个代理服务器，该服务器限制从您的 Heroku 应用程序的访问......在上面从 mooreds 设置静态 IP 建议。

# css - 使一个 CSS 类比另一个类占主导地位

> ID：10618495
> 
> 赞同：1
> 
> 时间：2012-05-16T12:27:04.933
> 
> 标签：css

我有一个由两个 css 文档设置样式的元素：

1.

```
ul[editable="yes"] li {
  background:black;
} 
```

2.

```
#menu li {
  background:white;
} 
```

正如您可能已经猜到的那样，我正在设计的元素是一个位于 #menu 元素中的 LI。

我怎样才能使“ul[editable="yes"] li”优于“#menu li”？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:29:11.940

```
background:black !IMPORTANT; 
```

您可以在此处阅读更多信息：http `!IMPORTANT`: [//www.w3.org/TR/CSS21/cascade.html#important-rules](http://www.w3.org/TR/CSS21/cascade.html#important-rules)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:32:19.077

我假设在第一种情况下，#menu 不会是你试图定位的 li 孩子的 ul 的 id。（因为 ID 是唯一的，如果您将相同的 ID 提供给不同的 ul，那么您做错了）。

解决方案是

```
#menu ul[editable="yes"] li {
  background:black;
} 
```

# sql - 一次更新多个字段

> ID：10618501
> 
> 赞同：0
> 
> 时间：2012-05-16T12:27:27.117
> 
> 标签：sql

我试图在整个表格中找到单词 true 的所有实例并将它们更改为“1”。为了将来节省时间，我希望能够一次更改每一列并且只运行一个查询。

`update myTable set field1, field2, field3=1 where field1, field2, field3='true'`

这就是我正在做的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:34:55.057

```
update mytable
set
field1 = case when field1='true' then 1 else field1 end,
field2 = case when field2='true' then 1 else field2 end,
field3 = case when field3='true' then 1 else field3 end
where 
    field1 ='true' or field2='true' or field3='true' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:32:10.890

您当前的语法很接近。您需要为每个字段指定值：

```
UPDATE MyTable
SET
   Field1 = CASE WHEN Field1 = 'True' THEN 1 ELSE Field1 END,
   Field2 = CASE WHEN Field2 = 'True' THEN 1 ELSE Field2 END,
   Field3 = CASE WHEN Field3 = 'True' THEN 1 ELSE Field3 END 
```

这将检查每一行并根据需要更新这些字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:36:50.313

不，正如您所写的那样，没有一种简单的方法可以做到这一点。

您可以做的是使用以下方法动态循环列：

```
select name from sys.columns
  where object_id=(
  select object_id from sys.objects where name like 'myTable '
) 
```

并一一检查。

它需要一些编码并且执行时间不会是最好的，但它会避免你编写大量代码，并且主要优点是你可以通过更改名称来更改表。

# ms-access - 无法更新。重新查询后数据库或对象为只读

> ID：10618507
> 
> 赞同：0
> 
> 时间：2012-05-16T12:27:42.580
> 
> 标签：ms-access, vba

好的，在网上找不到有关此错误的任何信息，所以就到这里。

使用 Access 2003。我有一个包含组合框下拉列表的表单。用户从下拉列表中选择，VBA 代码查看特定表以查看数据是否已存在。如果找到它，它会显示与记录关联的数据。如果没有找到，它会在表中添加一条新记录，然后尝试显示新数据。问题是当使用下面的代码时，它不会显示新数据，除非我在 Me.Requery 中添加。但是，如果我这样做，如果我再次尝试执行相同的过程，它会给我上述错误。

那么，如何才能在添加后显示数据而不会出现上述错误？

这是相关的代码...

```
' Find the record that matches the control.
Dim rs As DAO.Recordset

Set rs = Me.Recordset.Clone

'if no record found, then add a default record
If IsNull(Combo119) Then
    Set rs = CurrentDb.OpenRecordset("SELECT * FROM [Master Reject Data]")
    rs.AddNew
    rs.Fields("production Date") = Date
    rs.Fields("Work Order #") = Combo119.Column(0)
    rs.Fields("Product Type") = ""
    rs.Fields("Shift") = ""
    rs.Fields("Line") = ""
    rs.Fields("# Produced") = 0
    rs.Fields("Reject Type") = ""
    rs.Fields("Reject Quantity") = 0
    rs.Fields("Reject Category") = "Rejection"
    Dim tRec As Long
    tRec = Combo142.ItemData(0)
    rs.Fields("Report Number") = tRec
    rs.Update
    Me.Requery 'this is the line I added to try to get the data to appear
    Set rs = Me.Recordset.Clone
    rs.FindFirst "[Report Number] = " & tRec 'navigate to the newly added record
Else
    rs.FindFirst "[Report Number] = " & Nz(Me![Combo119], 0) 'navigate to the record with the requested report number
End If
If Not rs.EOF Then Me.Bookmark = rs.Bookmark 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:34:39.133

抱歉，再次查看后发现问题。问题是 Me.Requery 语句需要是 Me.Recordset.Requery。完成此操作并添加 Me.Refresh 后，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:40:00.420

为了避免重新查询，我认为您应该打开记录集，指定它应该是一个动态集 `CurrentDb.OpenRecordset("SELECT * FROM [Master Reject Data]", dbOpenDynaset)`- 如果您想让它更整洁一些。至于小虫子，我看你已经找到自己了

# git - Github 上的高级搜索？

> ID：10618509
> 
> 赞同：4
> 
> 时间：2012-05-16T12:27:46.963
> 
> 标签：git, lucene, github

我想在 github 下对符合以下条件的提交进行高级搜索：

*   语言：Javascript
*   创建时间：[2011-01-01 至今]
*   推送：[2012-05-01 TO NOW]
*   叉子：[100 TO *]
*   大小：[100 到 1000] //(kb)

我知道 github 使用 Lucene 来执行搜索，但是四处搜索我找不到任何关于查询语法的文档，如果我遵循 apache Lucene 文档的指导方针，我经常会收到“无效的查询语法”消息。

对于我的个人查询，我已经毫无问题地通过了语言、大小和分叉查询，但是我仍然很难找到一个好的匹配来执行基于日期的查询语法。

**我必须在日期查询中包含时间戳吗？
我可以计算一下现在 - 3 个月这样的日期吗？
例如，我如何搜索从 4 个月前到现在创建的存储库？**

编辑：

我与 github 支持人员交谈，他们对我说，他们使用 Solr 查询语法，该语法允许使用诸如 之类的计算进行日期范围查询`NOW - 4MONTHS`，但由于某种原因，它对我来说不起作用，或者我只是不明白这些过滤器是如何工作的操作（创建和推送）。

只是为了测试它，我试图找到任何以 Javascript 作为主要语言的 Repos，这两种语言都是从组合框中选择的，然后尝试使用 [created} 过滤器进行搜索，看看我有什么奇怪的结果。

对于第一次搜索，我尝试查找从今天到 12 个月前创建的任何 javascript 存储库。

**创建：[NOW-12MONTHS/DAY TO NOW/DAY]**

这给了我总共 233500 个回购，我在顶部列出了“twitter/bootstrap”回购。

对于第二次搜索，我试图找到从今天到 24 个月前创建的任何 Javascript 存储库。

**创建：[NOW-24MONTHS/DAY TO NOW/DAY]**

它不仅给了我比以前更少的存储库，总共 11867，而且我没有在结果页面中列出任何“twitter/bootstrap”存储库（我认为这是错误的，因为我的第二次搜索“包含”第一个）。第一个结果的观察者比“twitter/bootstrap”少，如果我按观察者计数排序结果，那么不把它放在顶部是错误的！

我并不是说网站上有错误，但我只是不明白它是如何使用日期范围进行计算的。希望有人可以帮助我澄清我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:44:39.783

请注意，[自 2012 年 11 月 26 日（“搜索语法改进”）](https://github.com/blog/1328-search-syntax-improvements)（由[Tim Pease 撰写](https://github.com/TwP)）以来，用于比较和范围标准的 Solr 样式语法不再是唯一的选择。

所以搜索超过 10 颗星的项目看起来像：

```
stars:[10 TO *] 
```

现在它是：

```
stars:>10 
```

但是 range 不支持像现在这样的类似 Solr 的语法，您需要指定日期，但*没有*时间戳。

> [`cats pushed:2012-04-30..2012-07-04`](https://github.com/search?q=cats%20pushed:2012-04-30..2012-07-04&type=Repositories)

* * *

2013 年 8 月更新：您现在拥有更多**[搜索 api 示例](https://gist.github.com/jasonrudolph/6057563)**

```
 curl -ni "https://api.github.com/search/repositories?q=more+useful+keyboard" -H 'Accept: application/vnd.github.preview' 
```

> 明星和看客都处于[过渡期](http://developer.github.com/changes/2012-9-5-watcher-api/)。在该转换完成之前，您将使用旧术语（即“watchers_count”）获得星数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T22:43:32.927

这很难看，但是您可以在搜索周围包裹一层，专门解释这些日期查询。例如，在将查询传递给 Lucene 之前，将“Created:[NOW-4MONTHS to NOW]”重写为“Created:[2012-01-21 TO 2012-05-20]”。

使用这种方法会遇到的问题包括：

*   您需要提出包装查询语法。
*   您需要正确解析包装查询语法。
*   您需要将包装查询语法正确地重写为 Lucene 的语法。

据我所知，范围查询不能在其中包含子查询，因此您可以只使用正则表达式来检测您的日期范围查询，特别是如果您可以依靠日期的特定字段名称/时间查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:04:39.693

检查 Solr 文档页面以获取确切的语法：[http ://wiki.apache.org/solr/SolrQuerySyntax](http://wiki.apache.org/solr/SolrQuerySyntax)

对于日期搜索，语法如下：

```
created:[2008-01-01T00:00:00Z TO NOW] 
```

# android - 如何在android的Raw文件夹中写入文件

> ID：10618511
> 
> 赞同：1
> 
> 时间：2012-05-16T12:27:55.967
> 
> 标签：android, android-ndk

在我的任务中，我需要读取和写入 Raw 文件夹中的文件。我做了第一个从我的项目中读取文件，现在我想写同一个文件。所以我很容易在该文件中进行任何更新。

看到这个[如何将文件写入android中的资产文件夹或原始文件夹？](https://stackoverflow.com/questions/3760626/how-to-write-files-to-assets-folder-or-raw-folder-in-android)

我允许用户设置密码，即将通行证写入文件然后读取通行证并验证它是否匹配。是否可以在原始文件夹中写入文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:35:11.093

“res”文件夹中存在的任何数据都是不可写的。您只能从中读取数据。您永远不能即时将数据写入 res 文件夹。如果您正在寻找一种存储用户名和密码凭据的方法，您可以使用 [Shared Prefrence](http://developer.android.com/reference/android/content/SharedPreferences.html)

这是一个关于如何使用它的例子。

[http://marakana.com/forums/android/examples/63.html](http://marakana.com/forums/android/examples/63.html)

**编辑 1**

除非用户使用设置页面中的“清除数据”按钮清除数据，否则在共享首选项中存储数据是持久的。导航到 **设置->管理应用程序->您的应用程序**。在这里，您将看到卸载按钮和清除数据按钮。android 中的另一件事是您将永远无法保存持久数据。您不能使用任何数据存储方法，如首选项、sqlite 或文件系统来永久存储数据。如果用户想擦除数据，他单击“清除数据”按钮，您的数据就消失了。因此，您已经以这种方式进行编码以处理此问题。

由于这是不可能的，您可以尝试使用您的应用程序的受写保护且无法写入的资源。所以这取决于用户，或者您可能必须使用您的服务器将数据存储在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:29:11.350

不，不可能在原始文件夹中写入文件

您应该为此使用共享偏好。

[http://samir-mangroliya.blogspot.in/p/android-shared-preferences.html](http://samir-mangroliya.blogspot.in/p/android-shared-preferences.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:34:36.040

是的，这是做不到的。不要尝试写入原始目录，而是使用共享首选项更新本地文件系统中的文件，如下面的链接所述：

请参考[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T13:26:09.840

Any data present in the "res" folder is not writable. You can only read data from it.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-24T19:50:00.830

See this tutorial from the Android Dev site : [http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)

```
String filename = "myfile";
String string = "Hello world!";
FileOutputStream outputStream;

    try {
  outputStream = openFileOutput(filename, Context.MODE_PRIVATE);
  outputStream.write(string.getBytes());
  outputStream.close();
} catch (Exception e) {
  e.printStackTrace();
} 
```

# c# - 如何在 C# 应用程序中设置 TNSNAMES 文件的正确路径？

> ID：10618512
> 
> 赞同：5
> 
> 时间：2012-05-16T12:28:04.390
> 
> 标签：c#, oracle, tnsnames

我有一个使用 ODP.NET dll 的 C# 程序：

```
oci.dll, ociw32.dll, Oracle.DataAccess.dll,
orannzsbb11.dll, oraocci11.dll, oraociicus11.dll,
OraOps11w.dll. 
```

我有2台电脑。首先安装了整个 ODAC 包，然后没有安装该包。但是我的 exe 目录中有所有必需的 dll，所以我认为 ODAC 不是问题。

这些计算机之间的区别在于`TNSNAMES`文件的路径。

```
First: C:\app\OraHome_1\Network\admin\
Second: C:\Oracle\product\11.2.0\client_1\network\admin 
```

在第一台计算机上，该程序运行良好。但是在第二个具有相同连接字符串的情况下，我得到了错误：

```
cannot open connection (ORA-12154) 
```

使用 SQL Plus，我可以在两台计算机上进行连接。如何向我的程序显示`tnsnames.ora`文件的正确路径？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T12:33:58.940

您可以以`TNS_ADMIN`编程方式设置环境变量。请参阅此页面以[逐步了解。](http://kb.tableausoftware.com/articles/knowledgebase/oracle-connection) 也就是说，如果您想更改为特定`TNS_NAMES.ORA`文件。Oracle 客户端仍必须安装在客户端计算机上。

来自[ConnectionStrings](http://www.connectionstrings.com/oracle) - 不使用 TNS：

```
Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort))(CONNECT_DATA=(SERVICE_NAME=MyOracleSID)));User Id=myUsername;Password=myPassword; 
```

* * *

**编辑：**添加了第三个选项

请[参阅这个问题](https://stackoverflow.com/questions/2006225/getting-location-of-file-tnsnames-ora-by-code)，它可以帮助您找到客户端文件的当前位置`TNS_NAMES.ORA`- 如果您愿意，您可以打开和修改（如果不存在，请添加您自己的连接）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:33:05.763

您无需关心 TNSNames 文件的路径：库本身会自动发现它……一旦您安装了它。这是关键点：在您的项目中分发 dll 是不够的。您需要在需要使用 ODP.Net 的机器上安装它：实际上，安装只是创建了一些注册表项，其中一个指向正确的 oracle 目录（库可以在需要时在其中找到 tnsnames）。

Morover，正如有人指出的那样，您根本不需要 tnsnams 文件。您可以在连接字符串中写入所需的所有内容。这是我在我的环境中使用的一个：

```
Data Source= (DESCRIPTION =
      (ENABLE = BROKEN)
      (ADDRESS_LIST =
      (LOAD_BALANCE = ON)
      (FAILOVER = ON)
      (ADDRESS = (PROTOCOL = TCP)(Host =por10srv-a)(Port = 1521))
      )
      (CONNECT_DATA =
      (SERVICE_NAME = por10.gruppo.autostrade.it)
      (FAILOVER_MODE =
      (TYPE = SELECT)
      (METHOD = BASIC)
      (RETRIES = 10)
      (DELAY = 3)
      )
      )
      );User ID=npa_collaudo;Password=npa_collaudo; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-05T13:31:06.613

您不需要安装 ODP.NET（或就此而言的 Oracle 客户端），因为您似乎拥有本地可分发内联 oracle 客户端所需的 DLL。在您的情况下，TNSNAMES.ORA 文件可能与您的可执行文件位于同一文件夹中，并且您的专用“内联 oracle 客户端”将从那里获取它。否则，应用程序本地的 oracle 客户端将尝试从机器上安装的任何客户端获取它。

# php - 教义2：在一对多的双向关系中，如何从反面保存？

> ID：10618514
> 
> 赞同：6
> 
> 时间：2012-05-16T12:28:14.263
> 
> 标签：php, symfony, doctrine, doctrine-orm

我有下面的一对多双向关系。

使用 symfony2 任务生成 crud 操作后，当我尝试在新/编辑类别表单中保存与类别关联的产品时，产品未保存...

```
namespace Prueba\FrontendBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="category")
 */
class Category
{

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
     */
    protected $products;

    /**
     * @ORM\Column(name="name")
     */
    protected $name;

    public function __construct()
    {
        $this->products = new ArrayCollection();
    }

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function __toString()
    {
        return $this->name;
    }

    public function getProducts()
    {
        return $this->products;
    }

    public function setProducts($products)
    {
        die("fasdf"); //here is not entering
        $this->products[] = $products;
    } 

    public function addProduct($product)
    {
        die("rwerwe"); //here is not entering
        $this->products[] = $product;
    } 
} 
```

```
namespace Prueba\FrontendBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity
 * @ORM\Table(name="product")
 */
class Product
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $category;

    /**
     * @ORM\Column(type="string", length=100)
     */
    protected $name;

    public function getId()
    {
        return $this->id;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name =  $name;
    }

    public function getCategory()
    {
        return $this->category;
    }

    public function setCategory($category)
    {
        $this->category = $category;
    }

    public function __toString()
    {
        return $this->name;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-16T13:00:58.867

由于它是双向的，您需要更新双方的关联。

将此函数添加到类别实体中（如果您愿意，可以将其称为 addChild）：

```
public function addProduct($product)
{
    $this->children->add($product);
} 
```

然后同时更新两个关联：

```
public function setProductCategory($product_category)
{
    $this->productCategory = $product_category;  
    $product_category->addProduct($this);
} 
```

提示：不要使用 $children / $parent 来描述实体。将其称为 $category / $product，当您想添加另一个“父”关系时会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-05T10:22:37.120

另一个简短的解决方案：

在您的类别实体中，将此行添加到您的 addProduct 函数

```
 public function addProduct($product)
    {
        $product->setCategory($this); // setting the cateogry of  product 
        $this->products[] = $product;
    } 
```

# data-structures - 为什么以（反向）顺序添加节点会导致搜索效率低下？

> ID：10618522
> 
> 赞同：1
> 
> 时间：2012-05-16T12:28:47.387
> 
> 标签：data-structures, binary-search-tree

我正在准备考试，我偶然发现了以下问题：

> 如果按以下顺序添加数据，则绘制二叉搜索树：
> 
> `10,9,8,7,6,5,4,3`
> 
> 为什么生成的树不适合高效搜索？

我的答案：

在创建 BST 时，我会认为我们从值 10 作为根节点开始，然后在第一级添加 9 作为左子树值。然后 8 到 9 的左子树，以此类推。我不知道为什么这会导致搜索效率低下。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T12:30:08.650

由于这些值是按降序排列的，因此它们会在每个级别添加到左侧，实际上给您留下了一个链表，它需要 O(N) 进行搜索，而不是 BST 的首选 O(logN)。

绘画：

```
 10
             /
            9
           /
          8
         /
        7
       /
      6
     /
    5
   /
  4
 /
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:30:30.023

这将创建一个链表，因为它只是一系列节点；这是一棵严重不平衡的树。

你应该查查[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)。它们具有相同的时间复杂度，但它会不断地围绕节点移动，因此它总是形成三角形。这将使树保持平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:33:54.977

这是低效的，因为该节点将始终添加到前一个节点的左子树中。对列表中的每个节点进行搜索检查，直到找到结果，即使答案总是在左侧，因此实际上比简单地通过循环搜索列表需要更多的计算。

# javascript - Jeditable - 输入字段上的最大长度，模糊时闪烁

> ID：10618524
> 
> 赞同：1
> 
> 时间：2012-05-16T12:28:48.610
> 
> 标签：javascript, jeditable

我正在使用 Jeditable 来编辑 todolist 中的 li。（我使用它是因为 contenteditable 不适用于拖放..）。我不得不提问：

1.  我可以在输入字段上设置最大长度吗？正如第一个 googlehit 所说，试图编辑 Jedit 文件，但它不起作用。

2.  当我在编辑后模糊输入字段闪烁时，首先输入字段消失，然后再次弹出并很快消失。这很丑陋..任何人都知道它可能是错的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T22:24:05.773

Jeditable 1.7.2 不支持 Maxlength。正如@tobbe 提到的，这里有一个代码修复[http://blogpad-online.blogspot.se/2010/10/jeditable-maxlength_12.html](http://blogpad-online.blogspot.se/2010/10/jeditable-maxlength_12.html)

该代码修复已转换为拉取请求，因此如果您想直接从 github 获取它，您可以在这里：[https ://github.com/tuupola/jquery_jeditable/pull/32](https://github.com/tuupola/jquery_jeditable/pull/32)

# r - 忽略ggplot2 boxplot + faceting +“免费”选项中的异常值

> ID：10618529
> 
> 赞同：11
> 
> 时间：2012-05-16T12:29:03.987
> 
> 标签：r, ggplot2, facet, boxplot, outliers

如何调整我的 Y 轴以忽略异常值，就像在[这篇文章](https://stackoverflow.com/questions/5677885/ignore-outliers-in-ggplot2-boxplot)中一样，但在更具挑战性的情况下，我有 4 个箱线图和“自由刻面”布局？

> p <- ggplot(molten.DF,aes(x=class,y=SOC,fill=class)) + geom_boxplot() + facet_grid(layer~.,scales="free",space="free")

正如您在我的图上看到的，考虑 Y 轴范围内的异常值会使这些框更难阅读。如果结果中仍然可以看到一些异常值并不重要，但我想真正关注盒子！

![自由比例的箱线图，所有异常值（不幸）都是可见的](../Images/259c783d2083ee7dc81d735adb87693b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:35:00.167

这显然取决于你认为什么是异常值。如果您可以计算它，您可以将您`ylim`的值设置为该值，然后将这些点排除在图表之外。

例如，如果您假设上限和下限为 Q3 + 1.5 IQR 和 Q1 - 1.5 IQR，而箱线图通常采用这种方式计算异常值限制，您将有：

```
upper.fence <- quantile(x)[4] + 1.5*IQR(x)
lower.fence <- quantile(x)[2] - 1.5*IQR(x) 
```

然后您可以将这些限制用作`y`值的范围：

```
my.ggplot + coord_cartesian(ylim=c(lower.fence, upper.fence)) 
```

您用于获取上限和下限的过程可以更改，但限制的使用是相同的。

# java - 将带有 itext 的 pdf 直接创建到数据库

> ID：10618533
> 
> 赞同：1
> 
> 时间：2012-05-16T12:29:14.467
> 
> 标签：java, mysql, blob, itext

我需要使用 iText 创建 PDF 文件并将其直接写入 MySQL 数据库

我可以使用所需数据创建 pdf，但目前我使用 Pdfwriter 在某个位置创建文档。

然后，我可以将此文件作为带有准备好的语句的 blob 发送到数据库，然后删除该文件。

有没有更好的解决方案可以直接执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:36:03.960

您需要首先使用 itext 创建一个 PDF，然后您可以将字节数组写入 DB，而无需在磁盘上创建文件。

这是您如何执行此操作的示例，此示例中唯一的内容是显示如何发送在内存中创建的 PDF 数据的邮件，您需要将其写入 DB。

[http://vangjee.wordpress.com/2010/11/02/how-to-create-an-in-memory-pdf-report-and-send-as-an-email-attachment-using-itext-and-爪哇/](http://vangjee.wordpress.com/2010/11/02/how-to-create-an-in-memory-pdf-report-and-send-as-an-email-attachment-using-itext-and-java/)

# xslt - XSL/Saxon 排序规则/命令行

> ID：10618537
> 
> 赞同：2
> 
> 时间：2012-05-16T12:29:25.733
> 
> 标签：xslt, xslt-2.0, collation, saxon

我想在基于撒克逊的 xslt 转换中使用排序规则。源文件：

```
<root>
  <entry name="B" />
  <entry name="Aa" />
  <entry name="Ä" />
  <entry name="Az" />
</root> 
```

和我的转变：

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:saxon="http://saxon.sf.net/">
  <xsl:output indent="yes"/>

  <saxon:collation name="german" lang="de-DE"/>

    <xsl:template match="root">
      <root>
        <xsl:for-each select="entry">
          <xsl:sort select="@name" collation="german"/>
          <sorted entry="{@name}"/>
        </xsl:for-each>
      </root>
    </xsl:template>

</xsl:stylesheet> 
```

这在氧气中几乎可以正常工作，输出为：

```
<root xmlns:saxon="http://saxon.sf.net/">
   <sorted entry="Ä"/>
   <sorted entry="Aa"/>
   <sorted entry="Az"/>
   <sorted entry="B"/>
</root> 
```

（Ä 应该是第二个条目，但我猜这是另一个问题）

但是当我使用命令行时，我得到一个错误：

```
java -jar saxon9he.jar -s:source.xml -o:out.xml -xsl:transformation.xsl

  XTDE1035: Collation file:/Users/<mypath>/german has not been defined
Failed to compile stylesheet. 1 error detected. 
```

看起来撒克逊人现在想`german`用作文件。它不存在。

* * *

问题是：我如何在命令行上使用这个样式表。

如果合适的话，我还会问如何在两个“A”之间排序“Ä”。条目，但我可以在另一个问题中问这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T13:46:52.483

最简单的解决方案是根本不使用 collat​​ion 属性，而是使用

```
<xsl:sort lang="de"/> 
```

它要求系统找到适合德语文本的排序规则，并且可以跨 XSLT 处理器移植。

如果您确实想要更精确的排序规则，这里有关于构建 Saxon 排序规则 URI 的指南：http: [//www.saxonica.com/documentation/extensibility/collat​​ion.xml](http://www.saxonica.com/documentation/extensibility/collation.xml)

您的错误的原因是，当您指定的值是相对 URI 引用时，它被解释为相对于样式表的基本 URI。对于 Saxon，这几乎不可避免地会产生一个不存在的排序规则 URI。目前尚不清楚为什么规范允许相对排序 URI；它们可能对某些产品有用，但它们对撒克逊人没有任何用处。

# php - 在php中插入文件名或文件路径

> ID：10618541
> 
> 赞同：0
> 
> 时间：2012-05-16T12:29:29.943
> 
> 标签：php, mysql, file-upload

我正在 php mysql 中上传文件或路径，如下所示

```
$Image=basename($_FILES['file']['name']);
$Image=str_replace(' ','|',$Image);
$tmppath1="Pic/".$Image;
$Audio=basename($_FILES['file1']['name']);
$Audio=str_replace(' ','|',$Audio);
$tmppath2="Audio/".$Audio;
$Video=basename($_FILES['file2']['name']);
$Video=str_replace(' ','|',$Video);  
$tmppath3="Video/".$Video;               
$imagepath=$_REQUEST['imagepath'];
$audiopath=$_REQUEST['audiopath'];
$videopath=$_REQUEST['videopath']; 
```

在这个上传图像和音频是强制性的我写查询如下所示

```
if($Image && $Audio && !$Video)  
{
$sql="INSERT INTO tbl_Item(Image,Audio) VALUES('$Image','$Audio')";
}
else if($Image && $Audio && $Video)
{
$sql="INSERT INTO tbl_Item(Image,Audio,Video)   VALUES('$Image','$Audio','$Video')";
}
else if($imagepath && $audiopath && !$videopath)  
{
$sql="INSERT INTO tbl_Item(Image,Audio) VALUES('$imagepath','$audiopath')";
}
else if($imagepath && $audiopath && $videopath)
{
$sql="INSERT INTO tbl_Item(Image,Audio,Video)   VALUES('$imagepath','$audiopath','$videopath')";
} 
```

我想插入图像或图像路径，类似的视频或视频路径或音频或音频路径。这样任何一个路径或名称都应该能够存储在我的数据库中，然后检索它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:42:43.177

为什么你不只是将完整的路径与文件所在的文件名一起存储，然后获取文件名的子字符串来获取它？

您可以只对所有人进行一个 sql 查询，但插入一些空值？

```
$imagepath=(!empty($_REQUEST['imagepath']))?$_REQUEST['imagepath']:"";
$audiopath=(!empty($_REQUEST['audiopath']))?$_REQUEST['audiopath']:"";
$videopath=(!empty($_REQUEST['videopath']))?$_REQUEST['videopath']:""; 
```

像这样，您将始终有相同的查询

```
$sql="INSERT INTO tbl_Item(Image,Audio,Video) VALUES('$imagepath','$audiopath','$videopath')"; 
```

# objective-c - 在 iOS 中使用 JSON 更新应用程序的内容

> ID：10618547
> 
> 赞同：0
> 
> 时间：2012-05-16T12:29:59.353
> 
> 标签：objective-c, ios, json

我即将创建一个使用 JSON 更新其内容的应用程序。这就是我计划它的工作方式：当应用程序启动时，它会检查（在互联网连接可用的情况下）远程服务器上设置的 JSON 文件是否比本地存储的文件更新 - 如果是，则下载它。然后，应用程序将该 JSON 中的数据应用到内容。例如，对于“联系人”信息 - 它应用电话号码等数据。

我的问题是，在您看来，这是一种更新应用程序内容的好方法吗？有没有人有过用这种想法构建应用程序的经验？

最好的问候， Zin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:39:44.523

你当然可以这样做。可能会带来更好的用户体验的一件事是询问用户是否允许下载新内容（如果有新内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:47:35.597

这是正常的事情。我有一个电话簿应用程序可以做到这一点。附带说明，如果您需要一个网络类来处理 Web 服务交互，请参阅[此 SO 帖子](https://stackoverflow.com/questions/10618056/how-to-post-more-parameters-with-image-upload-code-in-ios/10618557#10618557)。我编写了一个与[AFNetworking](https://github.com/AFNetworking/AFNetworking/)一起使用的自定义网络类。

# google-app-engine - Webapp2 自定义标签

> ID：10618551
> 
> 赞同：3
> 
> 时间：2012-05-16T12:30:03.203
> 
> 标签：google-app-engine, webapp2

我正在从 webapp1 迁移到 webapp2，从 python 2.5 迁移到 python2.7 我有一些我使用的自定义标签

```
webapp.template.register_template_library('common.templatetags') 
```

并注册：

```
from google.appengine.ext.webapp import template
register = template.create_template_register() 
```

和相应的装饰器和其他一切工作正常

现在我需要使用没有 template.register 的 webapp2 .....

我试过这样做：[http](http://www.john-smith.me/Tag/webapp2) ://www.john-smith.me/Tag/webapp2 但它没有用

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T07:21:48.590

通过使用 add_to_builtins() 解决

```
from django.template.loader import add_to_builtins

add_to_builtins('myapp.templatetags.mytagslib') 
```

# php - utf8 jquery 和 ie

> ID：10618563
> 
> 赞同：1
> 
> 时间：2012-05-16T12:30:34.733
> 
> 标签：php, jquery, internet-explorer, encode

嗨，我使用此代码将文本保存在数据库中

```
function commenttext()
{
  var com=document.getElementById("commenttext").value;
  var xmlhttp;
  if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
  else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
  xmlhttp.onreadystatechange=function()
  {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
      document.getElementById("commentpalm").innerHTML=xmlhttp.responseText;
      }
  }
  xmlhttp.open("GET","func/comment.php?comtext="+com,true);
  xmlhttp.send();
  document.getElementById("commenttext").value="";
} 
```

当我在 mysql admin insteat of utf8 charecter 中看到数据库字段时？？？？节省 。这个 broblem 只有敌人，即在 firefox 或 chrome 中是好的。我将此代码用于所有页面

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

我的编码是 uft8 没有 BOM 。

此问题仅适用于 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:42:44.287

`<meta>`如果您在其中定义的标头已由 Web 服务器发送，则该标记很少真正有帮助。把它放在你的 PHP 应用程序的顶部：

```
header('Content-type: text/html; charset=UTF-8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:54:36.673

尝试：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

并将这一行添加到您的`php.ini`：

```
 default_charset = "utf-8" 
```

# android - Android - 如何将 KeyEvent KeyCode 转换为 Char？

> ID：10618565
> 
> 赞同：8
> 
> 时间：2012-05-16T12:30:55.213
> 
> 标签：android

我想在按下 Android 键盘时获取 KeyCode 事件的 char 值。

```
public void KeyCodeEventAsChar(int keyCode, KeyEvent event) {

  char pressedKey;

  // TODO: convert key Code Event into char

  syslog.d ("TEST", "The pressed key in Android keyboard was char: " + pressedKey);

} 
```

有谁知道如何做到这一点？！

**更新：**

我不想要硬编码的文本！我想把它转换成通讯录字符！

**更新 2：**

我还需要死字符，例如：à、á、ò、ó 等...

**找到答案：**

```
// TODO: convert key Code Event into char
char pressedKey = (char) event.getUnicodeChar(); 
```

**重要提示：** char 只有 1 个字节长度，因此它**不**支持多个字符

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T14:18:50.680

**> 我已经回答了更新问题**

```
// TODO: convert key Code Event into char
char pressedKey = (char) event.getUnicodeChar(); 
```

**重要提示：char 只有 1 个字节长度，因此它不支持多个字符**

希望它能以某种方式帮助你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T14:06:18.227

您可以使用[KeyEvent.getDisplayLabel()](http://developer.android.com/reference/android/view/KeyEvent.html#getDisplayLabel%28%29)来获取键的主要字符。换句话说，物理上打印在其上的标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-31T17:55:31.320

为了测试**找到的答案**，您可以这样做：

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {

    char pressedKey = (char) event.getUnicodeChar();

    Log.d("onKeyUp is: ", Character.toString(pressedKey));

    return super.onKeyUp(keyCode, event);

} 
```

你按下的字母应该出现在`logcat`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:34:25.127

您必须像这样检查哪个键被按下

```
if(keyCode  == KeyEvent.KEYCODE_ENTER){

syslog.d ("TEST", "The pressed key in Android keyboard was Enter" );
} 
```

这是您找到所有 KeyEvents 的链接

[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T13:08:14.353

```
KEYCODE_XX is an int 
```

您可以拥有一个以 keycode 作为参数的方法，并在其中使用 switch case 来执行特定任务。如下所示，

```
void getEvent(KeyEvent keyEvent){

    char pressedKey = (char) keyEvent.getUnicodeChar();

    switch(pressedKey){
        case A://
        syslog.d ("TEST", "The pressed key in Android keyboard was Enter" );
        //DO what you wnat with this event
        break;
        case B:
        syslog.d ("TEST", "The pressed key in Android keyboard was B" );
        //DO what you wnat with this event
        break;
        // so on to check other keys
    }
} 
```

这样，您可以使用 Unicode 来获取相应的值，并且可以将其与键侦听器一起使用以连续获取事件

# c# - 执行 web 方法时出错

> ID：10618566
> 
> 赞同：1
> 
> 时间：2012-05-16T12:30:57.303
> 
> 标签：c#, asp.net, sql, database, web-services

我已经创建了 asp.net WebService。我想在验证他之后更新用户的信息，这意味着如果他输入的新用户名不存在，那么只有他可以更新新用户名，否则不存在。

问题是它成功验证了用户，但是当我尝试指定不存在的新用户名时，它会给我一个错误，例如；

```
 Request format is unrecognized for URL unexpectedly ending in '/UpdateUserInfo'. 
```

以下是我的代码：

```
 public int UpdateUserInfo(string oldusername, string newusername, string mailid, string password)
    {
        string validateUser = "Select UserName from tbl_UserInfo where UserName='" + newusername + "' ";
        con = new MySqlConnection(conString);
        con.Open();
        MySqlCommand cmd1 = new MySqlCommand(validateUser, con);
        string User = cmd1.ExecuteScalar().ToString();
        con.Close();
        if (User == newusername)
        {
            return 0;
        }
        else 
        {
            string updateUser = "Update tbl_UserInfo SET UserName='" + newusername + "',Password='" + password + "',Email_ID='" + mailid + "' where UserName='" + oldusername + "' ";
            con = new MySqlConnection(conString);
            con.Open();
            MySqlCommand cmd = new MySqlCommand(updateUser, con);
            int success = cmd.ExecuteNonQuery();
            con.Close();

            if (success > 0)
            {
                return success;
            }
            else
                return 0;
        }
    } 
```

注意：我希望结果为；

```
 IF my UserName is A and when i update that UserName with same name 
           i.e A than it should not be updated but when i give another name as B 
             than it should be updated by B i.e now UserName A becomes the B 
```

有什么问题？

请给出解决方案。

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:38:54.243

哦，请使用参数化查询。啊，并处置您的 IDisposable 资源。您将省去头痛、SQL 注入、格式不正确的数据，...

```
public int UpdateUserInfo(
    string oldusername, 
    string newusername, 
    string mailid, 
    string password
)
{
    using (var con = new MySqlConnection(conString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "SELECT count(UserName) from tbl_UserInfo where UserName = @newusername";
        cmd.Parameters.AddWithValue("@newusername", newusername);

        var count = (long)cmd.ExecuteScalar();
        if (count < 1)
        {
            return 0;
        }
    }

    using (var con = new MySqlConnection(conString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "UPDATE tbl_UserInfo SET UserName = @newusername, Password = @password, Email_ID = @mailid WHERE UserName = @oldusername";
        cmd.Parameters.AddWithValue("@newusername", newusername);
        cmd.Parameters.AddWithValue("@password", password);
        cmd.Parameters.AddWithValue("@mailid", mailid);
        cmd.Parameters.AddWithValue("@oldusername", oldusername);
        return cmd.ExecuteNonQuery();
    }
} 
```

或者您也可以将它们拆分为单独的方法：

```
public bool UsernameExists(string username)
{
    using (var con = new MySqlConnection(conString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "SELECT count(UserName) from tbl_UserInfo where UserName = @newusername";
        cmd.Parameters.AddWithValue("@newusername", username);
        return (long)cmd.ExecuteScalar() > 0;
    }
}

public int Update(string oldusername, string newusername, string mailid, string password)
{
    using (var con = new MySqlConnection(conString))
    using (var cmd = con.CreateCommand())
    {
        con.Open();
        cmd.CommandText = "UPDATE tbl_UserInfo SET UserName = @newusername, Password = @password, Email_ID = @mailid WHERE UserName = @oldusername";
        cmd.Parameters.AddWithValue("@newusername", newusername);
        cmd.Parameters.AddWithValue("@password", password);
        cmd.Parameters.AddWithValue("@mailid", mailid);
        cmd.Parameters.AddWithValue("@oldusername", oldusername);
        return cmd.ExecuteNonQuery();
    }
}

public int UpdateUserInfo(string oldusername, string newusername, string mailid, string password)
{
    if (!UsernameExists(newusername))
    {
        return Update(oldusername, newusername, mailid, password);
    }
    return 0;
} 
```

# artificial-intelligence - 遗传交叉函数

> ID：10618579
> 
> 赞同：3
> 
> 时间：2012-05-16T12:31:49.890
> 
> 标签：artificial-intelligence, genetic-algorithm, evolutionary-algorithm

我正在用 java 编写一个时间表生成器，使用 AI 方法来满足硬约束并帮助找到最佳解决方案。到目前为止，我已经实现了迭代构造（最受约束的第一个启发式）和模拟退火，并且我正在实现遗传算法。

关于这个问题的一些信息，以及我如何表示它：我有一组事件、房间、功能（事件需要和房间满足）、学生和插槽问题在于为每个事件分配一个插槽和一个房间，例如没有学生被要求在一个时段参加两个活动，所有分配的房间都满足必要的要求。

我有一个评分功能，如果作业对违反软约束的情况进行评分，那么对于每个集合，我的重点是尽量减少这一点。

我实现 GA 的方式是从迭代构造生成的种群开始（这可以使事件未分配），然后执行正常步骤：评估、选择、交叉、变异并保持最佳状态。冲洗并重复。

我的问题是我的解决方案似乎改进得太少了。无论我做什么，人群都倾向于随机适应并被困在那里。请注意，这种适应度总是不同的，但仍然会出现一个下限。

我怀疑问题出在我的交叉函数中，这是其背后的逻辑：

随机选择两个任务进行交叉。让我们称它们为分配 A 和 B。对于 B 的所有事件，请执行以下过程（选择 B 的事件的顺序是随机的）：

获取A中对应的事件，比较赋值。可能会发生 3 种不同的情况。

*   如果其中只有一个未分配，并且可以在子节点上复制另一个分配，则选择此分配。
*   如果它们都被分配，但只有其中一个
    在分配给孩子时不会产生冲突，则选择那个。
*   如果它们都被分配并且没有产生冲突，则随机选择它们中的一个。

在任何其他情况下，该事件都未分配。

这会创建一个孩子，其中有一些父母的任务，一些母亲的任务，所以在我看来这是一个有效的功能。此外，它不会打破任何硬约束。

至于突变，我正在使用我的 SA 的相邻功能根据子项给我另一个分配，然后替换那个子项。

再说一遍。在这种设置下，初始种群为 100，GA 运行并始终趋于稳定在某个随机（高）适应度值。有人可以告诉我我可能做错了什么吗？

谢谢

编辑：格式化和清除一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:57:53.813

如果您能提供原始问题陈述，我将能够为您提供更好的解决方案。这是我目前的答案。

遗传算法不是满足硬约束的最佳工具。这是一个可以使用整数规划（线性规划的特例）解决的分配问题。

线性程序允许用户最小化或最大化由目标函数（分级函数）建模的某些目标。目标函数由单个决策（或决策变量）的总和以及对目标函数的价值或贡献来定义。线性程序允许您的决策变量为十进制值，但整数程序强制决策变量为整数值。

那么，你的决定是什么？您的决定是将学生分配到插槽。这些插槽具有活动需要和房间满足的功能。

在您的情况下，您希望最大化分配到某个位置的学生数量。

你也有限制。在您的情况下，一名学生最多只能参加一个活动。

下面的网站提供了一个关于如何为整数程序建模的很好的教程。

[http://people.brunel.ac.uk/~mastjjb/jeb/or/moreip.html](http://people.brunel.ac.uk/~mastjjb/jeb/or/moreip.html)

对于 java 特定的实现，请使用下面的链接。

[http://javailp.sourceforge.net/](http://javailp.sourceforge.net/)

```
SolverFactory factory = new SolverFactoryLpSolve(); // use lp_solve
factory.setParameter(Solver.VERBOSE, 0); 
factory.setParameter(Solver.TIMEOUT, 100); // set timeout to 100 seconds

/**
* Constructing a Problem: 
* Maximize: 143x+60y 
* Subject to: 
* 120x+210y <= 15000 
* 110x+30y <= 4000 
* x+y <= 75
* 
* With x,y being integers
* 
*/
Problem problem = new Problem();

Linear linear = new Linear();
linear.add(143, "x");
linear.add(60, "y");

problem.setObjective(linear, OptType.MAX);

linear = new Linear();
linear.add(120, "x");
linear.add(210, "y");

problem.add(linear, "<=", 15000);

linear = new Linear();
linear.add(110, "x");
linear.add(30, "y");

problem.add(linear, "<=", 4000);

linear = new Linear();
linear.add(1, "x");
linear.add(1, "y");

problem.add(linear, "<=", 75);

problem.setVarType("x", Integer.class);
problem.setVarType("y", Integer.class);

Solver solver = factory.get(); // you should use this solver only once for one problem
Result result = solver.solve(problem);

System.out.println(result);

/**
* Extend the problem with x <= 16 and solve it again
*/
problem.setVarUpperBound("x", 16);

solver = factory.get();
result = solver.solve(problem);

System.out.println(result);
// Results in the following output:

// Objective: 6266.0 {y=52, x=22}
// Objective: 5828.0 {y=59, x=16} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T17:46:39.957

GA 新手可能会犯许多标准错误：

*   通常，在进行交叉时，请确保孩子有一定的机会继承使父母或父母首先获胜的东西。换句话说，选择一个基因组表示，其中基因组的“基因”片段对问题陈述具有有意义的映射。一个常见的错误是将所有内容编码为位向量，然后在交叉中将位向量在随机位置拆分，拆分位向量所代表的好东西，从而破坏使个人浮动到顶部作为好的候选者的东西。（有限的）整数向量可能是更好的选择，其中整数可以用突变代替，但不能用交叉代替。不保留某些东西（不必是 100%，

*   一般来说，使用的突变比你想象的要少得多。突变主要是为了保持种群的一些多样性。如果你的初始种群不包含任何具有分数优势的东西，那么你的种群对于手头的问题来说太小了，而且高突变率通常无济于事。

*   在这种特定情况下，您的交叉功能太复杂了。永远不要将旨在保持所有解决方案有效的约束放入交叉中。相反，交叉函数应该可以自由地生成无效的解决方案，并且目标函数的工作是在*某种程度上*（不是*完全*）惩罚无效的解决方案。如果您的 GA 有效，那么最终答案将不会包含任何无效作业，前提是 100% 有效作业是完全可能的。坚持交叉中的有效性可以防止有效解决方案通过无效解决方案走捷径到达其他更好的有效解决方案。

我建议任何认为自己编写的 GA 表现不佳的人进行以下测试：运行 GA 几次，并注意达到可接受结果所需的世代数。然后用随机选择替换获胜者选择步骤和目标函数（无论您使用什么 - 锦标赛、排名等），然后再次运行。如果你仍然以与真正的评估者/目标函数大致相同的速度收敛，那么你实际上并没有一个正常运行的 GA。许多说 GA 不起作用的人在他们的代码中犯了一些错误，这意味着 GA 的收敛速度与随机搜索一样慢，这足以让任何人放弃这项技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:33:36.887

我认为 GA 只有在解决方案的一部分（向量的一部分）作为解决方案的独立部分具有重要意义时才有意义，因此交叉函数在两个解决方案向量之间整合了解决方案的有效部分。就像 DNA 序列的某个部分控制或影响个体的特定方面一样——例如，眼睛颜色就是一个基因。然而，在这个问题中，解向量的不同部分相互影响，使得交叉几乎毫无意义。这导致（我的猜测）算法很快收敛到一个单一的解决方案，不同的交叉和突变对适应度只有负面影响。

我不相信 GA 是解决这个问题的正确工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:54:39.613

我认为遗传算法在这个问题上没有任何问题，有些人无论如何都讨厌遗传算法。

这是我要检查的内容：

首先你提到你的遗传算法稳定在一个随机的“高”适应度值，但这不是一件好事吗？在您的情况下，“高”适合度对应好还是坏？您可能在代码的一部分中偏爱“高”适应度，而在另一部分中偏爱“低”适应度，从而导致看似随机的结果。

我认为您希望对交叉操作背后的逻辑更加小心。基本上，对于所有 3 种情况，在许多情况下，做出任何这些选择都不会导致所有交叉个体的适应度增加，但您仍在使用“资源”（可能用于另一个的分配班级/学生/等）我意识到 GA 传统上会通过交叉进行分配，这会导致更糟糕的行为，但是无论如何你已经在交叉阶段执行了一些计算，为什么不选择一个实际上会提高适应度或者可能不一点也不穿越？

要考虑的可选注释：尽管您的迭代构建方法非常有趣，但这可能会导致您拥有过于复杂的基因表示，这可能会导致您的交叉出现问题。是否可以将单个单独的解决方案建模为位或整数的数组（或二维数组）？即使数组变得很长，使用更简单的交叉过程也可能是值得的。我建议使用谷歌搜索“ga 基因表示时间表”，您可能会找到一种您更喜欢的方法，并且可以更轻松地扩展到许多个体（100 对 GA 来说是一个相当小的人口规模，但我知道您仍在测试，还有多少几代人？）。

最后一点，我不确定您使用的是哪种语言，但如果它是 Java 并且您不需要手动编写 GA 代码，我建议您查看[ECJ](http://cs.gmu.edu/~eclab/projects/ecj/ "欧洲法院")。也许即使您必须手动编码，它也可以帮助您开发您的表示或繁殖管道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T13:47:43.923

我会从直接衡量正在发生的事情开始。例如，有多少作业属于您的“任何其他情况”，因此什么都不做？

此外，虽然我们无法从给出的信息中真正看出，但似乎您的任何动作都无法进行“交换”，这可能是个问题。如果时间表受到严格限制，那么一旦您找到可行的方法，您可能无法将课程从 A 室转移到 B 室，因为 B 室将被使用。您需要考虑将课程从 A 移动到 B 以及将课程从 B 移动到 A 的方法。

您有时还可以通过允许违反约束来改进事情。与其禁止交叉违反约束，您可以允许它，但根据违反的“坏处”对适应度进行惩罚。

最后，您的其他运营商也可能是问题所在。如果您的选择和替换操作员过于激进，您可以很快收敛到仅比您开始时稍微好一点的东西。一旦你收敛，单靠突变很难让你重新回到高效的搜索中。

# c# - 在配置部分中创建动态键值对

> ID：10618581
> 
> 赞同：5
> 
> 时间：2012-05-16T12:31:53.940
> 
> 标签：c#, asp.net, configuration

我正在编写一个类来描述配置部分，并且正在寻找一种可能的方法来满足以下情况：

```
<plugins>
    <add name="resize" maxheight="500px" maxwidth="500px"/>
    <add name="watermark" font="arial"/>
</plugins> 
```

列表中的每个项目都可以包含不同的属性以及所需的名称属性。设置默认部分很简单，但我现在不知道如何添加动态键/值对。有任何想法吗？

```
 /// <summary>
    /// Represents a PluginElementCollection collection configuration element 
    /// within the configuration.
    /// </summary>
    public class PluginElementCollection : ConfigurationElementCollection
    {
        /// <summary>
        /// Represents a PluginConfig configuration element within the 
        /// configuration.
        /// </summary>
        public class PluginElement : ConfigurationElement
        {
            /// <summary>
            /// Gets or sets the token of the plugin file.
            /// </summary>
            /// <value>The name of the plugin.</value>
            [ConfigurationProperty("name", DefaultValue = "", IsRequired = true)]
            public string Name
            {
                get { return (string)this["name"]; }

                set { this["name"] = value; }
            }

            // TODO: What goes here to create a series of dynamic 
            // key/value pairs.
        }

        /// <summary>
        /// Creates a new PluginConfig configuration element.
        /// </summary>
        /// <returns>
        /// A new PluginConfig configuration element.
        /// </returns>
        protected override ConfigurationElement CreateNewElement()
        {
            return new PluginElement();
        }

        /// <summary>
        /// Gets the element key for a specified PluginElement 
        /// configuration element.
        /// </summary>
        /// <param name="element">
        /// The <see cref="T:System.Configuration.ConfigurationElement"/> 
        /// to return the key for.
        /// </param>
        /// <returns>
        /// The element key for a specified PluginElement configuration element.
        /// </returns>
        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((PluginElement)element).Name;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-12T20:57:01.877

在你的`ConfigurationElement`你可以覆盖`OnDeserializeUnrecognizedAttribute()`然后将额外的属性存储在某个地方，例如在字典中：

```
public class PluginElement : ConfigurationElement
{
    public IDictionary<string, string> Attributes { get; private set; }

    public PluginElement ()
    {
        Attributes = new Dictionary<string, string>();
    }

    protected override bool OnDeserializeUnrecognizedAttribute(string name, string value)
    {
        Attributes.Add(name, value);
        return true;
    }
} 
```

返回`true`from`OnDeserializeUnrecognizedAttribute`表示您已经处理了无法识别的属性，并防止`ConfigurationElement`基类抛出异常，当您没有`[ConfigurationProperty]`为配置 xml 中的每个属性声明一个时，通常会发生这种情况。

# java - java'assert'和'if () {} else exit;'的区别

> ID：10618582
> 
> 赞同：8
> 
> 时间：2012-05-16T12:31:55.293
> 
> 标签：java, assert

java`assert` 和 和 有什么不一样`if () {} else exit;`？

我可以用`if () {} else exit`代替`assert`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T12:34:41.167

可能有点谷歌？

" 你应该记住的主要事情是 if-else 语句应该用于程序流控制，而 assert 关键字应该只用于测试目的。你不应该使用断言来实际执行应用程序所需的任何操作正常工作。根据 Sun 的官方 Java 文档：“每个断言都包含一个布尔表达式，当断言执行时，您认为该表达式为真。”“

阅读更多：[http ://wiki.answers.com/Q/What_is_the_difference_between_assert_keyword_and_if_keyword_in_java#ixzz1v2GGfAhq](http://wiki.answers.com/Q/What_is_the_difference_between_assert_keyword_and_if_keyword_in_java#ixzz1v2GGfAhq)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:33:49.837

你可以，assert 是专门为断言部分代码而设计的，

`AssertionError`如果断言失败，断言将抛出

* * *

**另见**

*   [`assert`参考](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T12:37:24.447

我可以忽略断言

```
class A{

public static void main(String[] args) {
    assert false;
  System.out.println("hi");
}
} 
```

此代码将默认打印 hi

```
$ java -cp . A
hi
$ java -ea -cp . A
Exception in thread "main" java.lang.AssertionError
    at A.main(A.java:6) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-16T12:56:51.380

> 我可以用`if () {} else exit`代替`assert`吗？

是的，你可以，但是...

*   除非您使条件依赖于一个额外的标志（这使得它更复杂等），否则您将无法关闭测试，

*   您将没有机会在任何封闭的`finally`块中进行整理，

*   `AssertionError`与抛出（或任何其他异常）相比，记录问题的原因会更复杂，并且

*   如果您的代码需要在另一个应用程序中重用（按原样），您的调用`exit`可能会出现问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T12:34:40.017

if-else 用于控制程序的流程。断言不能用于此！断言只是为了在你的代码中有“检查点”来检查“应该总是”匹配的条件。

运行程序时可以打开或关闭断言，以便您可以在开发机器/集成环境中启用断言并在发布版本中禁用它们。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-16T12:34:45.873

`-ea`只有在命令行启用断言时，assert 关键字才会触发异常。if/else 将始终执行。最重要的是，assert 关键字允许编写不太冗长的代码。比较：

```
assert parameter != null; 
```

到：

```
if( parameter != null )
{

}
else
{

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-16T12:35:42.590

除非传递了 -ea 参数，否则断言将被忽略：

java -ea myjar.jar

这样，您可以在测试应用程序时使用它们，但在其他时候忽略它们。

# titanium-mobile - 当 Titanium Appcelerator Module 与 EventKit 集成时，应用程序无法构建

> ID：10618583
> 
> 赞同：0
> 
> 时间：2012-05-16T12:31:55.337
> 
> 标签：titanium-mobile, appcelerator-mobile, titanium-modules, ekeventkit

我正在使用大约 6 个月前创建的日历模块开发钛应用程序。当我为日历创建模块时，我使用的是雪豹。但是最近我为 Lion 升级了我的机器，现在，当我尝试修改模块时，它游戏我的路径错误，我用“~”解决了这个问题。并且模块也构建成功。但是当我将它与应用程序集成时，应用程序正在崩溃，甚至无法构建。这很奇怪，因为到目前为止该模块仍在工作，但现在当我尝试使用最新模块构建应用程序时，它无法正常工作。

当我写`EKEventStore *store = [[EKEventStore alloc] init];`它崩溃。当我对此发表评论时，该应用程序构建完美。我不知道为什么会这样。该模块已成功构建，但与应用程序集成时，应用程序无法构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:38:15.567

在 module.xcconfig 中，尝试将

```
OTHER_LDFLAGS=$(inherited) -framework EventKit 
```

因为当你运行应用程序时，模块正在使用的框架应该放在这个文件中`OTHER_LDFLAGS`

# python - 十六进制字符串到python中的字符

> ID：10618586
> 
> 赞同：15
> 
> 时间：2012-05-16T12:31:56.460
> 
> 标签：python, hex

我有一个十六进制字符串，如：

```
data = "437c2123" 
```

我想根据 ASCII 表将此字符串转换为字符序列。结果应该是这样的：

```
data_con = "C|!#" 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-16T13:08:44.337

在 Python2 中

```
>>> "437c2123".decode('hex')
'C|!#' 
```

在 Python3 中（也适用于 Python2，对于 <2.6，您不能`b`为字符串添加前缀）

```
>>> import binascii
>>> binascii.unhexlify(b"437c2123")
b'C|!#' 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-16T12:35:45.990

```
In [17]: data = "437c2123"

In [18]: ''.join(chr(int(data[i:i+2], 16)) for i in range(0, len(data), 2))
Out[18]: 'C|!#' 
```

这里：

*   `for i in range(0, len(data), 2)`遍历`data`: `0`,`2`等中的每一秒位置`4`。
*   `data[i:i+2]`查看每一对十六进制数字`'43'`,`'7c'`等。
*   `chr(int(..., 16))`将这对十六进制数字转换为相应的字符。
*   `''.join(...)`将字符合并为一个字符串。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-06T08:21:33.053

从 Python 2.6 开始，您可以使用简单的：

```
data_con = bytes.fromhex(data) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-16T12:36:03.000

该`ord`函数将字符转换为数值，而该`chr`函数则相反。所以要转换`97`为`"a"`, 做`ord(97)`

# windows-phone-7 - 是否可以在 windows phone 7 中使用 mms:// url 流式传输视频文件

> ID：10618589
> 
> 赞同：0
> 
> 时间：2012-05-16T12:32:09.113
> 
> 标签：windows-phone-7, c#-4.0, video-streaming

我正在使用 SilverLight 为 Windows phone 7 开发应用程序。现在我正在使用在 windows phone 中流式传输视频，但我的要求是在我的 windows phone 7 应用程序中使用 URL`http://`流式传输视频。`mms://`

我不知道 mms:// 协议，你能告诉我是否可以`mms://`在 windows phone 7 中使用 url 流式传输视频文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:27:00.510

WP7 上的第三方开发目前不支持此协议。

# windows-phone-7 - 是否可以使用 mspn 服务而不注册到应用程序中心来测试我的应用程序？

> ID：10618594
> 
> 赞同：0
> 
> 时间：2012-05-16T12:32:27.860
> 
> 标签：windows-phone-7

我即将开发一个使用 mspn 服务的 windows phone 应用程序。我还没有注册到应用程序中心。是否可以使用 mspn 服务而不注册到应用程序中心来测试我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:28:09.650

我相信是这样。（至少我记得在 2010 年 6 月测试过这个——在注册开放之前。）

你有没有尝试过？
通知过程中没有任何内容需要参考与您的应用程序中心注册有关的任何内容，除非您需要 SSL 或非常大的容量，但您可以轻松地测试这些内容。

# nuget - 将现有第三方引用更新为 NuGet 引用的最佳方法

> ID：10618597
> 
> 赞同：0
> 
> 时间：2012-05-16T12:32:35.290
> 
> 标签：nuget, nuget-package

我一直在尝试在复杂的解决方案（大约 100 个项目文件）中使用 NuGet，并且一直在努力将现有引用（从 /ext/.. 目录）更新到官方 NuGet 目录的引用。据我了解，我们需要手动选择项目文件（从 PackagaManager GUI/Manage Assemblies 中）并更新参考。要知道哪个项目使用了 100 个奇怪的项目中的哪些是很麻烦的。有没有办法（内置到 nuget 或任何其他解决方法）将程序集更新到 nuget 目录，而无需手动选择项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:05:37.797

目前尚不支持此功能，我已在 codeplex 的 nuget 项目下注册了一个[问题。](https://nuget.codeplex.com/workitem/2304)

# asp.net - 如何强制编译 ASP.NET MVC 视图？

> ID：10618600
> 
> 赞同：16
> 
> 时间：2012-05-16T12:32:42.077
> 
> 标签：asp.net, .net, asp.net-mvc, iis, azure

我有一个 Windows Azure Web 角色，其中包含一个使用 ASP.NET MVC 的网站。当 HTTP 请求到达并首次加载页面时，视图（.aspx 或 .cshtml）会被编译，这需要一些时间，因此第一次提供页面所需的时间明显长于稍后提供同一页面的时间。

我已启用`<MvcBuildViews>`（[在此答案](https://stackoverflow.com/a/542944/57428)中描述）强制执行视图的编译时验证，但这似乎对站点部署和运行时的编译没有任何影响。

Azure Web 角色有所谓的启动任务，还有一种特殊的`OnStart()`方法，我可以在其中放置任何预热代码，所以一旦我知道要做什么，将其添加到角色中就不是问题了。

有没有办法强制编译所有视图？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T12:41:33.347

看看[David Ebbo 的 Precompiled Razor Views](http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html)

> **你为什么想这么做？**
> 
> 这样做的一个原因是避免在您的站点启动时出现任何运行时影响，因为在运行时没有任何东西需要编译。这在具有许多视图的站点中可能很重要。
> 
> 此外，您根本不再需要部署 cshtml 文件，从而使部署文件集更小。
> 
> 另一个很酷的好处是它使您能够对视图进行单元测试，这对于标准运行时编译模型来说一直是非常困难的。我将在以后的帖子中更详细地介绍这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-16T14:28:03.730

事实证明，可以使用[ClientBuildManager.PrecompileApplication执行](http://msdn.microsoft.com/en-us/library/system.web.compilation.clientbuildmanager.precompileapplication%28v=vs.90%29.aspx)[ASP.NET 预编译](http://msdn.microsoft.com/en-us/library/bb398860.aspx)，并模仿按需编译行为，但只编译每个页面。试过了 - 第一次加载看起来明显更快。

重要的部分是作为`ClientBuildManager`构造函数参数传递的内容。解决方案是枚举所有对象和枚举`.Applications`中的每个项目，并使用和从每个项目作为构造函数的参数。`Site``.Applications``.VirtualDirectories``Path``VirtualPath``ClientBuildManager`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T13:55:15.457

这是初始负载问题还是稳态问题？看到的一个问题是应用程序池回收问题，默认为 20 分钟超时。如果您禁用超时（或将其设置为较大的值），这是一个有效的解决方法吗？

这是另一个讨论 AppPool 超时以及如何禁用它的[SO 答案。](https://stackoverflow.com/a/9305417/272109)基本上：

```
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-25T15:22:16.877

将此添加到 OnStart：

```
 using (var serverManager = new ServerManager())
        {
            string siteName = RoleEnvironment.CurrentRoleInstance.Id + "_" + "Web";
            var siteId = serverManager.Sites[siteName].Id;
            var appVirtualDir = $"/LM/W3SVC/{siteId}/ROOT";  // Do not end this with a trailing /

            var clientBuildManager = new ClientBuildManager(appVirtualDir, null, null,
                                        new ClientBuildManagerParameter
                                        {
                                            PrecompilationFlags = PrecompilationFlags.Default,
                                        });

            clientBuildManager.PrecompileApplication();
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-04T14:55:48.953

如果您使用 Visual Studio 的发布功能，则有一个更简单的选项：

在“*发布*”对话框 > *“设置”*窗格中，展开“*文件发布选项*”并选中“发布*期间预编译*”，然后单击“*配置*” 。在*高级预编译设置*对话框中，**取消选中** *允许预编译站点可更新*。

来源：[https ://msdn.microsoft.com/en-us/library/hh475319.aspx](https://msdn.microsoft.com/en-us/library/hh475319.aspx)

# dom - 尝试在不刷新的情况下在 DOM 中移动 iframe。Chrome 的“adoptNode”似乎不起作用

> ID：10618602
> 
> 赞同：2
> 
> 时间：2012-05-16T12:32:43.270
> 
> 标签：dom, google-chrome, iframe

这是交易（过度简化了一点）我正在创建一个具有“选项卡”的应用程序，每个选项卡都可以将类似的内容显示为 iFrame。因此，我希望在选项卡切换之间共享这些内容，因为 iFrame 加载的初始请求有点昂贵。

但是，这需要我“保存” iframe，然后重新插入 DOM。这有两个问题：1）我似乎无法访问 iframe 的 contentWindow 以调用 javascript 函数，而它在内存中 2）每当 iframe 插入 DOM 时都会重新加载。

我读到 document.adoptNode 可能会解决问题 #2，所以我尝试了以下操作

 `````
<html> 
 <head> 
 </head> 
 <body> 
  <script> 

    window.onload = function() {
            setTimeout(adoptIFrame, 500);
        };

    var next = ['red', 'blue']
    var index = 0;

    function adoptIFrame() {
        var iFrame = document.adoptNode(document.getElementById("frame")); 
        document.getElementById(next[index++ % 2]).appendChild(iFrame) 
        setTimeout(adoptIFrame, 500);
    }

  </script> 

    <div id="red" style="width:500;height:500;background-color:red;">
    </div>
    <div id="blue" style="width:500;height:500;background-color:blue;">
        <iframe src="your_url" id="frame"/>
    </div>

   </body> 
```` 

但是每次重新插入时，仍然会进行刷新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T16:01:22.750

这有点晚了，但由于我遇到了同样的问题，我做了一些研究，似乎该功能已从 Webkit 中删除：[https](https://bugs.webkit.org/show_bug.cgi?id=81590) ://bugs.webkit.org/show_bug.cgi?id=81590 。`

# c# - 如何将 IQueryable 转换为 DataTable

> ID：10618605
> 
> 赞同：10
> 
> 时间：2012-05-16T12:32:56.150
> 
> 标签：c#, asp.net, visual-studio-2010, linq

我使用 LinQ 编写了查询并使用了该`CopyToDataTable`方法。在该行，它显示从我的数据库类型到`System.Data.DataRow`.

```
var query = from i in dbContext.Personaldetails
            where i.ID == 1
            select i;

            return query.CopyToDataTable(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:36:08.653

`CopyToDataTable`需要`DataRow`对象的集合。请参阅如何：[在通用类型 T 不是 DataRow 的情况下实现 CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb669096.aspx)以解决此问题。

更新：如果您的实体有可为空的字段，您可以修改`ObjectShredder.ExtendTable`方法。查找新列添加到表的位置，并删除第二个参数，该参数提供列中的数据类型（DataColumn 类不支持可为空的数据类型）：

```
foreach (PropertyInfo p in type.GetProperties())
{
    if (!_ordinalMap.ContainsKey(p.Name))
    {
        DataColumn dc = table.Columns.Contains(p.Name) ? table.Columns[p.Name]
            // do not provide column type
            : table.Columns.Add(p.Name); 

        _ordinalMap.Add(p.Name, dc.Ordinal);
    }
} 
```

# android - 列表视图和数据

> ID：10618606
> 
> 赞同：0
> 
> 时间：2012-05-16T12:32:56.870
> 
> 标签：android, listview, textbox, imageview

我有一个`ListView`我有一些元素的地方。每个项目都有一个`ListView`和两个`TextBoxes`。这是我的问题：当我在列表中的元素上计时时，一个新的活动开始了，我有一个`ListView`和两个`TextBoxes`。`ListView`如果我单击新活动中`ListView`的第一个元素，我该怎么`TextBoxes`做`TextBoxes`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:52:01.113

您可以在启动新 Activity 时传递`extras`给您使用的。`Intent`

假设您当前的活动是`MyActivity`，而您想要通过单击列表项开始的活动是`MyNewActivity`; 然后在您的`MyActivity`班级中，在列表项单击侦听器内应修改为：

```
Intent intent = new Intent(MyActivity.this, MyNewActivity.class);
intent.putExtra("my.picture.id", images[itemPosition]);
intent.putExtra("my.header.id", headers[itemPosition]);
intent.putExtra("my.text.id", texts[itemPosition]);
startActivity(intent); 
```

并且在您的`MyNewActivity`班级`onCreate`方法中，您可以检索传递的附加内容，并使用正确的值填充正确的字段：

```
final Intent intent = getIntent();
final int pictureId = intent.getIntExtra("my.picture.id", 0);
final int headerId = intent.getIntExtra("my.header.id", 0);
final int textId = intent.getIntExtra("my.text.id", 0);

((ImageView)findViewById(R.id.my_image)).setImageResource(pictureId);
((TextView)findViewById(R.id.my_header)).setText(headerId);
((TextView)findViewById(R.id.my_text)).setImageResource(textId); 
```

,`images`和数组 - 我想 - 包含您要显示的图像和字符串的资源 ID `headers`。`texts`它们可能可以通过您当前项目的渲染器的数据访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:14:31.937

我会采取与 rekaszeru 不同的方式（至少在检索信息方面）。

在您的第一个活动中，您将使用 onListItemClick 并将信息放入要传递的附加包中，以启动第二个活动。在这种方法中，您使用传入的视图来检索信息，因此您使用什么样的适配器并不重要，适配器中的位置也不重要。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    Intent myIntent = new Intent(FirstClass.this, SecondClass.class);
    myIntent.putExtra("ImageRef", v.findViewById(R.id.imageview)).getTag());
    myIntent.putExtra("Text1", v.findViewById(R.id.TextView1).getText().toString());
    myIntent.putExtra("Text2", v.findViewById(R.id.TextView2).getText().toString());
    FirstClass.this.startActivity(myIntent);
} 
```

然后在第二个活动中检索要使用的信息：

```
private TextView NewTextView1;
private TextView NewTextView2;
private ImageViewView NewImageView;

Bundle extras = getIntent().getExtras();

NewTextView1 = (TextView)findViewBYId(R.id.newtextview1).setText(extras.getString("Text1"));
NewTextView2 = (TextView)findViewBYId(R.id.newtextview2).setText(extras.getString("Text2"));
NewImageView = (ImageView)findViewBYId(R.id.newimageview).setImageResource(extras.getInt("ImageRef")); 
```

# javascript - Javascript scrollIntoView 不适用于更新面板

> ID：10618609
> 
> 赞同：0
> 
> 时间：2012-05-16T12:33:03.690
> 
> 标签：javascript, asp.net, updatepanel

我有一个更新面板，其中有一个网格视图。在gridview 中有很多链接。而且我有一个更新进度，表明该页面正在加载单击gridview 中的任何这些链接。有时gridview中的数据太大了，我必须滚动到底部，如果我点击底部的链接，我将无法看到更新进度，因为它显示在顶部页。因此尝试使用 javascript scroll into view 方法。但它不起作用。任何人都可以为此提出替代方案或解决问题的任何想法。

```
<div onload='dynamicScrollIntoView()'>
    <asp:UpdateProgress ID="progress" runat="server" AssociatedUpdatePanelID="updMain">
        <ProgressTemplate>
            <img id="imgPleaseWait" src='<%= Page.ResolveClientUrl ("~/Common/Images/progressIndicator.gif")%>'
            alt="Please wait..." />
        </ProgressTemplate>
    </asp:UpdateProgress>
</div> 
```

下面是使用的javascript。

```
<script type="text/javascript">
function dynamicScrollIntoView() {
    debugger;
    var updProgress = document.getElementById('<%= progress.ClientID %>');
    if (updProgress != null && updProgress != undefined) {
        updProgress.scrollIntoView(true);
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:35:45.567

尝试页面属性

```
 MaintainScrollPositionOnPostback="True" 
```

# asp.net - 如何将 Web 开发设置添加/下载到现有的 Visual Studio 安装？

> ID：10618612
> 
> 赞同：0
> 
> 时间：2012-05-16T12:33:08.493
> 
> 标签：asp.net, visual-studio-2010

在我的机器上安装 Visual Studio 2010 (10.0.4 SP1) 时，似乎没有安装 Web 开发设置。模板下没有 Web 项目，Web 开发设置不会出现在默认设置列表下（在工具->导入导出设置下）。

我不确定我不只是在某处遗漏了一些明显的“切换到 Web 开发模式”按钮，但我已经用谷歌搜索了一下，但我什么也看不到。

我宁愿不必安装 Visual Web Developer。有什么方法可以将 Web 开发设置添加到我现有的 Visual Studio 安装中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:42:18.420

以下是安装 Web Deploymnet 设置时的安装步骤

· 插入 DVD 或 CDROM 磁盘 1 – 安装程序自动启动。

· 单击安装 Visual Studio 2010 并按照说明进行操作。

o 这将安装 Visual Studio、.NET 框架、开发 Web 服务器和 SQL Server 2008 Express。

o 如果您正在安装 Visual Web Developer 2010 Express Edition，它不会安装 SQL Server 2008 Express - 您需要下载 SQL Server 2008 并单独安装。

· 在选项页面上接受默认选项 - 对于默认环境设置，您可以选择 Web 开发设置。

· 单击安装产品文档链接以安装 MSDN 帮助文件。

您一定错过了，所以再次运行安装程序，因为您不想重新安装 VS，系统会要求您修复安装程序，您可以选择该功能

参考：http://www.siue.edu/~dbock/cmis460/Module%20A%20--%20Appendix%20A%20in%20textbook/ModuleA-InstallSoftware.htm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:46:23.503

[http://www.microsoft.com/web/gallery/install.aspx?appid=VWDorVS2010SP1Pack](http://www.microsoft.com/web/gallery/install.aspx?appid=VWDorVS2010SP1Pack)

这会将 Web 开发部分添加到缺少它们的已安装版本的 Visual Studio（以及 Web 开发所需的所有其他工具）

# git - 使用 windows auth 和登录用户在 windows 上访问 Git 服务器

> ID：10618616
> 
> 赞同：0
> 
> 时间：2012-05-16T12:33:22.633
> 
> 标签：git, version-control, sspi

我已经在 IIS (gitweb.codeplex.com) 上成功安装了 Smart-HTTP Git 服务器并使用 Windows 身份验证配置了访问权限，但是每次从客户端访问服务器存储库都需要输入用户名/密码。

是否可以使用当前登录的用户凭据配置访问权限 - 类似于 :sspi: in cvsnt？（必要时可以切换到另一台服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:06:37.247

For anyone who wanders on that question - here is solution for client side to configure ssh with auth via kerberos (server was configured by our admin).

1.  Install "Putty with Kerberos"
2.  Install git and choose user plink as ssh and choose plink from "Putty with Kerberos".
3.  If environment variable GIT_SSH is not set to plink, set it manually
4.  Run putty from putty.exe "Putty with Kerberos". Enter path to your server and choose ssh. In Connection/SSH/Kerberos select "Attempt Kerberos auth (SSH-2)" on the same page in "auto-login username" select "User name portion of user principal name" In Connection/SSH/Auth unselect "Bypass authentication entirely (SSH-2 only)" and unselect "Display pre-authentication banner (SSH-2 only)." Go back in session and save settings in "Default Settings"
5.  Connect to your server and then it offers to save public key of server in registry - agree.

# c# - 在两种形式之间接收布尔变量的错误

> ID：10618617
> 
> 赞同：0
> 
> 时间：2012-05-16T12:33:24.917
> 
> 标签：c#

全部。

我想接收从 form1 到 form2 的 checkbox1 数据。我使用 get 和 set 方法来接收变量的含义。我为此使用了此代码。但它没有用。为什么？问题出在哪里？

form1.cs

```
...
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Form2 test = new Form2();
            test.checkBox1 = checkBox1.Checked;
            test.Show();
        }
    }
} 
```

form2.cs

```
 ...
namespace WindowsFormsApplication1
    {
        public partial class Form2 : Form
        {
            private bool data7;

            public Form2()
            {
                InitializeComponent();
            }

            public bool checkBox1 
            {
                get { return data7; }
                set { value = data7; } 
            }

            private void Form2_Load(object sender, EventArgs e)
            {
                if (data7 == true)
                {
                    label1.Text = "true";
                }
                else
                {
                    label1.Text = "false";
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T12:35:56.443

```
set { value = data7; } 
```

应该

```
set { data7 = value; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:44:23.227

你的`set`方法不对。它应该是

```
set { data7 = value; } 
```

`Form2`显然将值存储在变量`data7`中，但不存储在 CheckBox 中。您必须执行类似的操作才能将其实际存储在 CheckBox 中

```
public bool checkBox1
{
    get { return myCheckBox.Checked; }
    set { myCheckBox.Checked = value; }
} 
```

另一个问题是将用户输入的结果返回到`Form1`. 由于您在此语句继续后立即`Form2`使用`test.Show();`代码调用，无需等待`Form2`关闭。`test.ShowDialog();`改为打电话。

* * *

在不阻塞的情况下返回结果的另一种选择`Form1`是使用事件。使用这个定义

```
public class Form2ResultEventArgs : EventArgs
{
    public Form2ResultEventArgs(bool checked)
    {
        this.Checked = checked;
    }

    public bool Checked { get; private set; }
} 
```

在`Form2`您将定义这样的事件。

```
public event EventHandler<Form2ResultEventArgs> Form2Result;

private OnForm2Result(bool checked)
{
    var handler = Form2Result;
    If (handler != null) {
        handler(this, new Form2ResultEventArgs(checked));
    }
}

// Assuming that you have a OK button on Form2
private OkButton_Click (...)
{
    OnForm2Result(myCheckBox.Checked);
    this.Close();
} 
```

在 Form1 中

```
var test = new Form2();
test.Form2Result += ProcessResult;
test.Show();

...

private void ProcessResult(object sender, Form2ResultEventArgs e)
{
    bool result = e.Checked;
    ...
} 
```

* * *

**更新**

如果您只想设置标签，为什么不这样做

在 Form2 中

```
public void SetDisplay(bool value) {
    label1.Text = value.ToString();
} 
```

在 Form1 中

```
var test = new Form2();
test.SetDisplay(checkBox1.Checked);
test.Show(); 
```

请注意，`InitializeComponent`在 的构造函数中调用，`Form2`因此标签存在于 之后`new Form2()`。无需在`Form2_Load`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:46:39.357

我想建议，当创建 bool data7 时，它的值设置为 false 或 true 我不在乎，因为如果用户没有设置 CheckBox1，则在首次加载表单时，表单将崩溃。是的，我知道 OP 在给出的代码中确实设置了变量。

```
private bool data7 = false; 
```

我在下面的建议中包含了 Fur Dworetzkys 答案

```
...
namespace WindowsFormsApplication1
{
    public partial class Form2 : Form
    {
        //give the variable a default value
        private bool data7=false;

        public Form2()
        {
            InitializeComponent();
        }

        public bool checkBox1 
        {
            get { return data7; }
            //Here is Furs Correction
            set { data7 = value; } 
        }

        private void Form2_Load(object sender, EventArgs e)
        {
            if (data7 == true)
            {
                label1.Text = "true";
            }
            else
            {
                label1.Text = "false";
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:53:17.560

如果您在 get 或 set 中没有对 data7 做任何事情（例如验证），那么只需摆脱它们。

```
 public partial class Form2 : Form
            {
                public Form2()
                {
                    InitializeComponent();
                }

                public bool checkBox1 { get; set; }

                private void Form2_Load(object sender, EventArgs e)
                {
                    if (checkBox1)
                    {
                        label1.Text = "true";
                    }
                    else
                    {
                        label1.Text = "false";
                    }
                }
            } 
```

# android - VideoView 与 WebView 用于播放 youtube 视频

> ID：10618621
> 
> 赞同：3
> 
> 时间：2012-05-16T12:33:29.987
> 
> 标签：android, webview, youtube, android-videoview

我正在开发一个需要播放 YouTube 视频的应用程序，我尝试使用 webView 和 videoView，我搜索了很多，我实际上找到了一些解决方案，但它们似乎不适合我的应用程序需求：

因此，我首先想知道在应用程序中播放 YouTube 视频的最佳方式（方法）。我应该使用 WebView 并尝试使视频适合视图和其他内容，还是应该尝试 VideoView（我想这有点复杂，因为要能够播放视频，我必须从 Youtube 获取实际的 .3gp） .

好吧，感谢您帮助我找到最佳方法。

意思是虽然我还有另一个问题：有没有办法让 webView 在横向模式下（当手机变成横向时）占据整个屏幕（全屏）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:23:17.717

使用该`WebView`方法可能会导致某些设备出现问题。`VideoView`只要您有一种可靠的方法来解析正确的 url，该方法就会很好地工作。在我的一个应用程序中，我们使用正则表达式并通过 html 解析来执行此操作，到目前为止，它可以快速有效地工作。

# android - 强制刷新UiThread android的MessageQueue

> ID：10618626
> 
> 赞同：2
> 
> 时间：2012-05-16T12:33:52.833
> 
> 标签：android, handler, message-queue, ui-thread, looper

我想尽快将内容刷新到显示器，但我希望在 UI 线程上拥有的设置代码花费的时间太长。在一切完成之前，屏幕上不会呈现任何内容。

因此，如果我执行 View.postDelayed(Runnable, long) 延迟至少 100 毫秒，则布局会在设置开始之前呈现。我想要做的是在 onResume 屏幕上呈现布局（例如），然后继续设置。

我正在寻找一种方法来确保 Looper 清空它的 MessageQueue 并呈现所有内容，直到调用此方法，然后继续处理消息。

我可能应该在后台线程中运行设置，但这会使其他事情复杂化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:22:17.943

```
final Handler handler = new Handler() {
        @Override
        public void handleMessage(Message msg) 
        {
           dialog.dismiss();

        }

    };
  dialog = ProgressDialog.show(Activity.this, "", "Loading ...", false);

            new Thread() 
              {
                public void run()
                 {
                    while(Condition)
                      {
                         do Something
                      }
                    handler.sendEmptyMessage(0);
                 }
               }.start(); 
```

# java - 向循环线程发送消息 java/android

> ID：10618630
> 
> 赞同：0
> 
> 时间：2012-05-16T12:34:06.260
> 
> 标签：java, android, multithreading, loops, message

所以我有以下线程：

```
 public class MyThread extends Thread
{
  Handler cHandler;
 private boolean looprunning = false;
  MyThread() {
  cHandler = new Handler();
          looprunning = true;

  }

  @Override
  public void run(){
      while (looprunning) {
          //do stuff here
        //update another system here or something else.
      }
  }

} 
```

在该线程的 while 循环内，我想运行一个 Runnable，当线程在该 while 循环内循环时，我将其传递给线程。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:44:04.973

首先请标记`looprunning`为 volatile 以获得正确的线程可见性

你可以使用队列

```
Queue<Runnable> taskQueue = new ConcurrentLinkedQueue<Runnable>();
@Override
public void run(){
   while (looprunning) {
       //do stuff here
     //update another system here or something else.
     Runnable r = taskQueue.poll();
     if(r!=null)r.run();
   }
} 
```

您可以使用您选择的（线程安全）队列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:44:32.170

Android 已经提供了一种机制来创建在执行 Runnables 的循环中运行的线程。看看[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:10:44.963

无论您在该运行方法中编写了什么计算，当它完成后向处理程序发送消息以及任何与 UI 相关的事情（例如更改 UI），您都可以这样做，就像我在做 progressdialog dismiss(); 还有一件事，如果尝试在运行中更改 UI 之类的东西，你肯定会得到泄漏窗口错误，因为你试图在非 UI 线程中更改 UI。

```
final Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {

            dialog.dismiss();

        }

    };

            dialog = ProgressDialog.show(NewTransaction.this, "",
                    "Loading Meters...", false);

            new Thread() {

                public void run() {

                    while(Condition){

                                  do Something
                                 }
                    handler.sendEmptyMessage(0);

                }

            }.start(); 
```

# sql - 限制 cakephp 查询中的选定列

> ID：10618631
> 
> 赞同：0
> 
> 时间：2012-05-16T12:34:16.580
> 
> 标签：sql, cakephp-1.3

我想减少 cakephp 的 find('all') 返回的字段数量，但不知道这是否可行。

$this->Group->find('all', $params);

$参数在哪里

```
 $params = array(
        'conditions' => array(                
            'Group.featured' => 1,
            ),
        'contain' => array(
                'User',
                'Class' => array(
                'conditions' => array(
                    'Class.exp IS NOT NULL', 
                    'Class.tb <20',
                                             )
                 )
            )
    )); 
```

问题是我的 Class 表有很多我不需要的列并且需要很长时间才能加载，所以我会只选择 5 个字段。这可以在 Cakephp 中完成还是我最好编写一个常规查询？

就像是

```
 $params = array(
        'conditions' => array(                
            'Group.featured' => 1,
            ),
        'contain' => array(
                'User',
                'Class.a',
                'Class.b', 
                'Class.exp',
                'Class.tb',
                'Class' => array(
                'conditions' => array(
                    'Class.exp IS NOT NULL', 
                    'Class.tb <20',
                                             )
                 )
            )
    )); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:44:04.470

这就是[`fields`参数](http://book.cakephp.org/1.3/en/view/1018/find)的用途。

```
$params = array(
    ...
    'contain' => array(
        'Class' => array(
            'conditions' => array(
                'Class.exp IS NOT NULL', 
                'Class.tb <20',
            ),
            'fields' => array('a', 'b')
        )
    )
); 
```

# c# - 实现一个 80 http 端口监听器

> ID：10618635
> 
> 赞同：0
> 
> 时间：2012-05-16T12:34:29.407
> 
> 标签：c#, http, sockets, desktop-application

我想实现类似于 Fiddler 的功能。

我尝试了 2 个解决方案：

HttpListener

```
HttpListener listener = new HttpListener();
listener.Prefixes.Add("http://*:80/");
listener.Start(); 
```

执行时`Start()`出现错误：

> System.Net.HttpListenerException“该进程无法访问该文件，因为它正被另一个进程使用”

这意味着有一些其他应用程序在端口 80 上侦听，可能是 IIS 或其他。

插座

```
IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName());
IPAddress ipAddress = ipHostInfo.AddressList[0];
IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 80);

// Create a TCP/IP socket.
Socket listener = new Socket(AddressFamily.InterNetwork,
    SocketType.Stream, ProtocolType.Tcp);

 // Bind the socket to the local endpoint and listen for incoming connections.
 try
 {
     listener.Bind(localEndPoint);
// ..... 
```

执行时`listener.Bind()`我得到：

> System.Net.Sockets.SocketException (0x80004005)：每个套接字地址（协议/网络地址/端口）通常只允许使用一次

这意味着同样的事情，已经有另一个应用程序在侦听端口 80。

那么Fiddler如何监听80端口没有这些问题呢？我更喜欢使用像 HttpListener 这样的类，因为它是更高级别的，而不是像套接字这样的低级别类，我必须在其中实现 HTTP 协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:36:22.570

这意味着其他东西正在端口 80 上侦听。您必须先退出该应用程序，然后您的应用程序才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:41:39.027

> 那么Fiddler如何监听80端口没有这些问题呢？

Fiddler 不接受端口 80 上的*传入*连接 - 它充当*传出*HTTP 连接的代理。其他一些应用程序正在使用您机器上的端口 80，因此它被阻止使用，因为给定端口上只能有一个侦听器（在这种情况下，如您在评论中提到的 IIS）。

# wordpress - qTranslate for Wordpress 不会自动给我正确的语言

> ID：10618636
> 
> 赞同：6
> 
> 时间：2012-05-16T12:34:31.513
> 
> 标签：wordpress, localization, qtranslate

我使用 qTranslate for Wordpress 以英语、瑞典语和德语发表我的博客文章。我已激活“检测浏览器语言”，以便将访问者转发到其浏览器指定语言的正确 URL。

因此，如果我访问 blog.domain.com，我会被转移到 blog.domain.com/sv/ 并且我的博客文章是瑞典语的，那太好了！但是现在的问题是，如果我从同一台计算机再次访问 blog.domain.com，我不会被转移，并且博客文章的默认语言是英语。

我在这里做错了吗？我总是需要指定语言似乎很奇怪，我需要它基于浏览器自动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:22:09.453

我遇到了同样的问题，我修改了 qTranslate 以添加此功能。我所做的是保存一个带有语言信息的 cookie，当用户点击小部件中的语言标志时，这个 cookie 被保存。

我的逻辑如下：

*   在显示所有语言的小部件中，将以下参数添加到每个 URL：?save_lang
*   当此参数存在时，保存一个名为“save_lang”且值 = $lang 的 cookie
*   立即重定向到同一页面，但没有该参数“save_lang”
*   调用任何页面时，现在 qTranslate 会将 default_language 设置为设置中的那个。如果 cookie 'save_lang' 存在，那么我将用保存在 cookie 中的那个覆盖 default_language

这么几个步骤：

1.  修改 qtranslate_core.php 文件：

    ```
     //Save the cookie if param ?save_lang is set, and then redirect to the same page without the param
    add_action('qtranslate_loadConfig', 'custom_qtranslate_loadConfig');
    function custom_qtranslate_loadConfig() {

        global $q_config, $_COOKIE;

        // By default, if the save_lang cookie is set, use that one instead
        if(isset($_COOKIE['save_lang'])) {

            $q_config['default_language'] = $_COOKIE['save_lang'];
        }
    }

    // Priority 3: load after function qtrans_init (it has priority 2)
    add_action('plugins_loaded', 'custom_after_qtrans_init', 3);    
    function custom_after_qtrans_init() {

        global $q_config, $_COOKIE;

        if (isset($_GET["save_lang"])) {

            // cookie will last 30 days     
            setcookie('save_lang', $q_config['language'], time()+86400*30, $q_config['url_info']['home'], $q_config['url_info']['host']);       
            wp_redirect(remove_url_param("save_lang", $q_config['url_info']['url']));
            exit();
        }
    }

    function remove_url_param($param_rm, $url) {

        $new_url = str_replace("?$param_rm", '', $url);
        $new_url = str_replace("&$param_rm", '', $new_url);

        return $new_url;
    } 
    ```

2.  修改文件 qtranslate_widget.php（将 'save_lang' 参数添加到每个语言的 URL）：

每次看到这一行：

```
qtrans_convertURL($url, $language) 
```

将其替换为：

```
add_url_param(qtrans_convertURL($url, $language), "save_lang") 
```

然后添加该功能：

```
// Function to add a parameter to a URL
function add_url_param($url, $name, $value = '') {

    // Pick the correct separator to use
    $separator = "?";
    if (strpos($url,"?")!==false)
      $separator = "&";

    // Find the location for the new parameter
    $insertPosition = strlen($url); 
    if (strpos($url,"#")!==false)
      $insertPosition = strpos($url,"#");

    $withValue = ($value == '' ? '' : "=$value");

    // Build the new url
    $newUrl = substr_replace($url,"$separator$name$withValue",$insertPosition,0);

    return $newUrl;

} 
```

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T11:55:43.910

我找到了一个很好的 .htaccess 规则，可以在这里设置 lang cookie：http: [//tips.naivist.net/2012/11/09/remembering-the-user-language-choice/](http://tips.naivist.net/2012/11/09/remembering-the-user-language-choice/)

它看起来更容易并且工作得很好：

只需将您的主要 .htaccess 更改为此：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Language Cookie redirect
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{HTTP_COOKIE} lang=(lang1|lang2) [NC] 
RewriteRule ^(.*)$ /%1/ [R=302,L]

RewriteCond %{REQUEST_URI} ^/(lang1|lang2)/.*$ [NC] 
RewriteCond %{HTTP_COOKIE} !lang=%1 [NC] 
RewriteRule . - [cookie=lang:%1:.%{HTTP_HOST}:144000:/]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

在**lang1**和**lang2**中，您可以在站点中插入已翻译的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T09:31:28.067

很难指出上述描述可能有什么问题

可能的错误可能是当您第一次登录时，您从“检测浏览器语言”中获取输入。并且从下一次从 cookie 中检索它。这个过程可能有问题。或者您可能根本没有使用 cookie。

如果您有登录数据库，则可以保存用户的语言预设。然后在他们登录后立即根据所需的语言更改 url。

# android - 使用多个外键构建数据库以获得高性能

> ID：10618651
> 
> 赞同：0
> 
> 时间：2012-05-16T12:35:01.753
> 
> 标签：android, sql, database, sqlite, database-design

我正在尝试为 android 建立一个本地数据库。我有点失落。

该应用程序是一个文档管理应用程序..我需要保存以下...

```
Document
--------
Id
import date
List<DocTags>
extension 
etc 
```

然后我有许多具有不同信息的 docTag

```
Location
-------
id
name
lat
long

Company
------
Id
name
Street
town 
```

大约 10 种其他文档类型。

我意识到我需要一个表来存储分配给文档的所有 docTag id，但这些与许多不同的表相关。我的问题是我需要通过搜索 doctag Id 或多个 doctag id 来检索文档列表。我们需要假设我们有 10,000 多个文档，这可能相当于 40,000 个文档标签。所以性能是一个主要问题。构建数据库的最佳方法是什么？

我还需要搜索 doctag 名称。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:37:30.650

我会有一个多对多的将文档与标签相关联的 JOIN 表。

我不会*在*多个表中包含这些标签。这打破了第一范式。如果其他表需要引用 Tag 行，也给它们 JOIN 表。

您在下面的评论表明，要么规范化复习是必要的，要么关系模型可能不是解决您的问题的最佳选择。也许 NoSQL、基于文档的解决方案更适合。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-16T13:20:33.597

我只使用过一次或两次 SQLite，但根据我对其他数据库系统的经验，我强烈建议从可靠的关系模式开始，并评估性能，然后再尝试其他任何操作。

在您的情况下，我认为架构看起来像这样。

![带有两个文档标签的示例数据库模式](../Images/6e07217e04589fd2b1bdbcbd9de6a069.png)

（当然，每个 doctag 有两个额外的表格）。

您将有很多表，并且可能需要很长的查询才能获取所有信息，但这不一定是一件坏事。拥有关系模式将允许查询优化器完成其工作，并使未来的查询更容易编写。

获取文档的查询以及有关其位置和公司的任何信息（如果文档没有此标记，则返回 null）如下所示：

```
SELECT * FROM Document
    LEFT JOIN DocumentLocation ON Document.ID=DocumentLocation.DocumentID
        INNER JOIN Location ON DocumentLocation.LocationID=Location.LocationID
    LEFT JOIN DocumentCompany ON Document.ID=DocumentCompany.DocumentID
        INNER JOIN Company ON DocumentCompany.CompanyID=Company.CompanyID 
```

如果这样做的性能确实太慢，那么您可以根据应用程序的预期使用模式研究提高性能的策略（例如缓存、附加索引）。

# qt4 - 如何擦除图形屏幕中的绘图

> ID：10618653
> 
> 赞同：0
> 
> 时间：2012-05-16T12:35:12.130
> 
> 标签：qt4

我正在 QT 中编写一个应用程序，它将在一个小部件中显示地图。它还将根据坐标绘制从起点到终点的路线。现在的问题是，如果我只想撤消绘制路线（我的意思是擦除）。下面的代码片段将告诉我我是如何绘制的。

```
 QGeoMapRouteObject *route = new QGeoMapRouteObject(reply->routes().at(0));
    QColor routeColor(Qt::blue);
    routeColor.setAlpha(127);
    QPen pen(routeColor);
    pen.setWidth(3);
    pen.setCapStyle(Qt::MPenCapStyle);
    route->setPen(pen); 
```

这里这个类“QGeoMapRouteObject”除了setPen之外没有其他选项。请让我知道如何使用这个类“QGeoMapRouteObject”绘制和擦除路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:21:21.987

QGeoMapRouteObject 无法撤消该过程。因为它是被调用的对象。只有调用对象（在您的情况下为图形视图）才能撤消效果。`Just like Pixmap being an object and painter the parent object, Pixmap itself can't draw a Line in it.`

# android - Android：应用关闭时保存实例状态

> ID：10618654
> 
> 赞同：13
> 
> 时间：2012-05-16T12:35:12.840
> 
> 标签：android, oncreate, savestate, onpause

> **可能重复：**
> [如何保存 Android 应用程序的状态？](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

我是 Java 和 Android 的新手，正在构建一些小项目来学习。我制作了一个资金跟踪应用程序，它允许用户输入值并且它只是继续减去它。一切正常，但我希望在应用程序关闭并重新打开时保存或缓存这些值。阅读时，我发现也许 OnPause 可以解决问题，但仍然不是 100% 理解它。

谁能推荐如何做到这一点以及如何应用于我的代码？

非常感谢你的帮助！！

```
package ps.age.sl;

import java.text.NumberFormat;
import java.util.Locale;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;

public class MoneyTrackerActivity extends Activity {
    /** Called when the activity is first created. */
        ImageButton subtract;

        EditText startingmoney,submoney, endmoney, tracker;
        Locale currentLocale = Locale.getDefault();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     //   startingmoney = (EditText) findViewById (R.id.firstmoney);
      //  submoney = (EditText) findViewById (R.id.submoney);
       // subtract = (ImageButton) findViewById (R.id.subbutton);
       // endmoney = (EditText) findViewById (R.id.endtv);
       // tracker = (EditText) findViewById (R.id.trackertv);

        startingmoney.setText("");
        submoney.setText("");
        endmoney.setText("");

subtract.setOnClickListener(new View.OnClickListener() {
         double currentValue=0;       
         double startValue=0;       
            public void onClick(View v) throws  NumberFormatException {

                    if (v == subtract)
                {
                NumberFormat currencyFormatter;
                currencyFormatter = NumberFormat.getCurrencyInstance(currentLocale);

                    String totalString;
                    String x = startingmoney.getText().toString();
                    String y = submoney.getText().toString ();
                            double total;
                        double xm = 0.00;
                        double ym =0.00;

                         try
                          {
                              xm = Double.parseDouble(x);
                          }
                         catch(NumberFormatException n)
                          {
                              xm = 0.00;
                          }
                         try
                         {
                                 ym = Double.parseDouble(y);
                         }
                        catch(NumberFormatException n)
                         {
                                ym = 0.00;
                         }

                   if(startValue!=xm){
                       startValue=xm;
                       currentValue=xm;
                   }

                   currentValue = currentValue -ym;

                    totalString = currencyFormatter.format(currentValue);
                    endmoney.setText(totalString);

                    tracker.setText("you have entered " + totalString +"\n" + tracker.getText().toString());

              }
                    }
                                        });
    }
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:39:26.630

请用于`SharedPreferences`将数据存储在私有应用程序存储中。在 onPause 方法中实现`SharedPrefernces`如下：

```
 @Override
    protected void onPause() 
    {
      super.onPause(); 
      // Store values between instances here
      SharedPreferences preferences = getSharedPreferences("sharedPrefs", 0);
      SharedPreferences.Editor editor = preferences.edit();
      editor.putString("CLASSLABEL", this.getLocalClassName()); // value to store
      editor.putString("STRINGLABEL",String1 );
      editor.putString("STRINGLABEL1",String2);
      // Commit to storage
      editor.commit();
    } 
```

# wpf - 绑定到 observablecollection MVVM 样式的 listboxitem 的上下文菜单

> ID：10618655
> 
> 赞同：0
> 
> 时间：2012-05-16T12:35:15.553
> 
> 标签：wpf, xaml, listbox, contextmenu, observablecollection

我有 3 个列表框都绑定了两个相同类型的 3 个单独的可观察集合。我的 ViewModel 具有通过属性公开的可观察集合。这是一些拖放分组，源列表框可以将项目拖到两个不同的列表中。但我想让用户能够右键单击列表框并设置项目的属性。类型、名称等。我在其中使用数据模板，因为我希望所有三个框在功能上都相同。这很好用，当我单击单个项目时，我可以毫无问题地弹出上下文菜单。我的麻烦是我有一个名为 FieldType 的属性。它是一个具有 4 个潜在值的枚举。在我的一生中，我无法弄清楚如何将 MenuItem 的 IsChecked 属性绑定到该属性......无论如何在功能上。

```
<DataTemplate x:Key="SFTemplateWithContextMenu">
        <TextBlock Text="{Binding Path=FieldName}" ><!--Tag="{Binding DataContext, ElementName=Window}"-->
         <TextBlock.ContextMenu>
                <ContextMenu >
                    <ContextMenu.Resources>
                        <Configurator:EnumToBooleanConverter x:Key="EnumToBooleanConverterc" />
                    </ContextMenu.Resources>
                    <MenuItem  Header="Rename..." />
                    <MenuItem Header="Field Type">
                        <MenuItem.Resources>
                            <Configurator:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
                        </MenuItem.Resources>
                        <MenuItem  Header="String" IsCheckable="True" IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.FieldType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource EnumToBooleanConverterc}, ConverterParameter={x:Static Configurator:TypeDesc.String}, PresentationTraceSources.TraceLevel=High}"/>
                        <MenuItem  Header="Date" IsCheckable="True" IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.FieldType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static Configurator:TypeDesc.Date}}"/>
                        <MenuItem  Header="Barcode" IsCheckable="True" IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Path=DataContext.FieldType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static Configurator:TypeDesc.BarCode}}" />
                    </MenuItem>
                </ContextMenu> 
            </TextBlock.ContextMenu>
        </TextBlock>
    </DataTemplate> 
```

在上面的代码中，您可以在 String、Date 和 Barcode MenuItems 上看到我正在尝试做的事情（必须喜欢正在进行中的代码）。我的问题是它应该调用的暴露属性。我不知道如何在我的 ViewModel 属性中获取与单击的项目相对应的可观察集合中的项目。我有一个值转换器 EnumToBoolean 将位于绑定上以获取检查或不检查。问题是在可观察集合中设置/获取该特定项目的属性。

有什么想法吗？需要更多代码？需要我澄清什么吗？我离我有多近？顺便说一句，ViewModel 代码是用 VB 2010 编写的。

谢谢布莱斯

编辑：我使用天使的建议尝试了以下...

```
 <DataTemplate x:Key="SFTemplateWithContextMenu">
        <TextBlock x:Name="Field" Text="{Binding Path=FieldName}" >
         <TextBlock.ContextMenu PlacementTarget="{Binding ElementName=Field}">
                    <MenuItem  Header="Rename..." />
                    <MenuItem Header="Field Type">
                        <MenuItem.Resources>
                            <Configurator:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
                        </MenuItem.Resources>
                        <MenuItem  Header="Date" IsCheckable="True" IsChecked="{Binding PlacementTarget.DataContext.FieldType, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static Configurator:TypeDesc.String}, PresentationTraceSources.TraceLevel=High}"/>
                    </MenuItem>
            </TextBlock.ContextMenu>
        </TextBlock>
    </DataTemplate> 
```

但这给了我一个错误，上面写着......无法在属性元素上设置属性。不确定这是否是 TextBlox 与 TextBox 的问题？您在示例中使用了 TextBox ...我的猜测是您的代码也会这样做。所以我然后尝试了以下...

```
 <DataTemplate x:Key="SFTemplateWithContextMenu">
        <TextBlock x:Name="Field" Text="{Binding Path=FieldName}" ><!--Tag="{Binding DataContext, ElementName=Window}"-->
         <TextBlock.ContextMenu>
                <ContextMenu PlacementTarget="{Binding ElementName=Field}" >
                    <MenuItem  Header="Rename..." />
                    <MenuItem Header="Field Type">
                        <MenuItem.Resources>
                            <Configurator:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
                        </MenuItem.Resources>
                        <MenuItem  Header="Date" IsCheckable="True" IsChecked="{Binding PlacementTarget.DataContext.FieldType, RelativeSource={RelativeSource AncestorType={x:Type ContextMenu}}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static Configurator:TypeDesc.String}, PresentationTraceSources.TraceLevel=High}"/>
                    </MenuItem>
                </ContextMenu>
            </TextBlock.ContextMenu>
        </TextBlock>
    </DataTemplate> 
```

但这会导致绑定错误... System.Windows.Data 错误：4：无法使用引用“ElementName = Field”找到绑定源。BindingExpression：（无路径）；数据项=空；目标元素是'ContextMenu'（名称=''）；目标属性是“PlacementTarget”（类型“UIElement”）

所以看起来绑定不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:37:01.050

`ContextMenu`不是视觉树的一部分。因此，默认情况下，它不会连接 \ 绑定到应用它的 TextBlock 的数据上下文...

所以有两种方法可以做到这一点......

1.  在单个 MenuItem 的绑定中设置`ContextMenu.PlacementTarget`并引用它。`Path`

例如

```
 <TextBox x:Name="MyTextBlock">
        <TextBox.ContextMenu PlacementTarget="{Binding ElementName=MyTextBlock}">
            <MenuItem 
                 Header="{Binding PlacementTarget.DataContext.MyHeader, 
                                  RelativeSource={RelativeSource
                                      AncestorType={x:Type ContextMenu}}}"
        </TextBox.ContextMenu>
  </TextBox> 
```

所以在上面的例子中......你想**将**菜单项与文本框的数据上下文连接起来。所以你`PlacementTarget`在`ContextMenu`. 此放置目标只能使用 2 种类型的绑定设置...`ElementName`或`StaticResource`. 并且一旦上下文菜单通过 连接到可视元素`PlacementTarget`，使用`Path`meuitem 的绑定中的 来解析数据上下文属性，即`MyHeader`。

或者

使用代理元素方法...

[绑定 datagrid 列可见性 MVVM](https://stackoverflow.com/questions/7711275/bind-datagrid-column-visibility-mvvm/7711611#7711611)

# knockout.js - 在 knockout.js 中单击时从数组中传递对象

> ID：10618662
> 
> 赞同：3
> 
> 时间：2012-05-16T12:35:27.980
> 
> 标签：knockout.js

我是 knockout.js 的新手，我敢肯定，我在这里遗漏了一些简单的东西。我在列表中有一个对象列表，我只想选择其中一个并从中获取一个属性以加载更多数据。

JS：

```
 function category(data) {
                this.categoryName = ko.observable(data.CategoryName);
                this.categoryID = ko.observable(data.CategoryID);
            }

            function CatalogViewModel() {

                //Data
                var self = this;
                self.categories = ko.observableArray([]);
                self.chosenCategoryID = ko.observable();

                //Behaviours
                self.gotoCategory= function (category) {
                    self.chosenCategoryID(category.categoryID);
                    alert(category.categoryID);
                };

                $.getJSON("/api/catalog", function (allData) {
                    var mapped = $.map(allData, function (item) { return new category(item) });
                    self.categories(mapped);
                });
            }

            ko.applyBindings(new CatalogViewModel()); 
```

这是我的 HTML：

```
 <ul data-bind="foreach: categories">
            <li>
                <a  data-bind="click: $parent.gotoCategory"><label data-bind="text: $data.categoryName"></label></a>
            </li>
        </ul> 
```

这些项目完美地列出了但是当我单击和项目时，我希望得到我的 categoryID 但我得到了一堆 javascript，而不是看起来像一个试图评估和论证的函数。

我在这里想念什么？

编辑 - 这是我在警报中收到的内容：

```
function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.I(),d=arguments[0],c.H();return this}a.U.La(c);return d}function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.I(),d=arguments[0],c.H();return this}a.U.La(c);return d} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:21:31.190

看来你`categoryID`是一个可观察的。要访问 observable 的值，您需要将其作为不带参数的函数调用。

所以，你`gotoCategory`应该看起来更像：

```
 self.gotoCategory= function (category) {
                self.chosenCategoryID(category.categoryID());
                alert(category.categoryID());
            }; 
```

# string - c#：如何将 c# 字符串转换为 c++ wstring，反之亦然

> ID：10618667
> 
> 赞同：3
> 
> 时间：2012-05-16T12:35:45.587
> 
> 标签：string, visual-c++, c#-4.0, wstring, widestring

c#代码-

```
字符串 s="おはよう";
```

我想将 s 作为 wstring 发送到 c++ dll。
如何在 c# 中将字符串转换为 wstring？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:19:44.843

A`std::wstring`是一个 C++ 对象，由 C++ 运行时分配并具有依赖于实现的内部格式。您*也许*能够弄清楚如何在 C# 程序中创建其中一个并将其传递给非托管 C++ 代码，但这样做会有些困难并且充满危险。因为 a 的内部结构`std::wstring`依赖于实现，所以对 C++ 编译器或运行时库的任何更改都会破坏您的解决方案。

您尝试做的通常是通过在 C++ 中编写一个接口层来完成，该接口层接受一个`LPTStr`参数，将其转换为 a `std::wstring`，然后调用您想要调用的 C++ 函数。也就是说，如果您要调用的函数声明为：

```
int Foo(std::wstring p); 
```

您将编写一个接口函数：

```
int FooCaller(LPTSTR p)
{
    std::wstring str = p;
    return Foo(str);
} 
```

你`FooCaller`从你的 C# 程序中调用。

简而言之，C# 无法创建和传递 a `std::wstring`，因此您使用翻译层。

# python - R或python中的两种颜色散点图

> ID：10618669
> 
> 赞同：3
> 
> 时间：2012-05-16T12:35:49.507
> 
> 标签：python, r, scatter-plot

我有一个三列和 n 行的数据集。第 1 列包含名称、第 2 列 value1 和第 3 列 value2 (rank2)。

我想绘制一个散点图，其中显示名称的异常值。

`R`我使用的命令是：

```
tiff('scatterplot.tiff')
data<-read.table("scatterplot_data", header=T)
attach(data)
reg1<-lm(A~B)
plot(A,B,col="red")
abline(reg1)
outliers<-data[which(2^(data[,2]-data[,3]) >= 4 | 2^(data[,2]-data[,3]) <=0.25),]

text(outliers[,2], outliers[,3],labels=outliers[,1],cex=0.50)

dev.off() 
```

我得到这样的数字：![在此处输入图像描述](../Images/e4131fa26963b033b53a8fdc166c8b09.png)

我想要的是下半部分的标签应该是一种颜色，上半部分的标签应该是另一种颜色，分别是绿色和红色。

有什么建议，或者命令中的调整？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:49:52.857

您已经有了一个令您满意的逻辑测试。只需在颜色规范中使用它来文本：

```
 text(outliers[,2], outliers[,3],labels=outliers[,1],cex=0.50, 
         col=c("blue", "green")[ 
                which(2^(data[,2]-data[,3]) >= 4 ,  2^(data[,2]-data[,3]) <=0.25)] ) 
```

它当然未经测试，因为您没有提供任何测试用例，但我的理由是该`which()`函数应该为差异 >= 4 返回 1，对于 <= 0.25 的差异返回 2，对于所有其他差异返回 integer(0)，这应该让您将颜色选择与“异常值”向量正确对齐。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T14:18:19.223

使用 python, `matplotlib`(pylab) 来绘制，和`scipy`,`numpy`来拟合数据。诀窍`numpy`是创建一个索引或*掩码*来过滤掉您想要的结果。

**编辑**：想要有选择地为顶部和底部异常值着色？这是我们创建的两种蒙版的简单组合：

```
import scipy as sci
import numpy as np
import pylab as plt

# Create some data
N = 1000
X = np.random.normal(5,1,size=N)
Y = X + np.random.normal(0,5.5,size=N)/np.random.normal(5,.1)
NAMES = ["foo"]*1000 # Customize names here

# Fit a polynomial
(a,b)=sci.polyfit(X,Y,1)

# Find all points above the line
idx = (X*a + b) < Y

# Scatter according to that index
plt.scatter(X[idx],Y[idx], color='r')
plt.scatter(X[~idx],Y[~idx], color='g')

# Find top 10 outliers
err = ((X*a+b) - Y) ** 2
idx_L = np.argsort(err)[-10:]
for i in idx_L:
    plt.text(X[i], Y[i], NAMES[i])

# Color the outliers purple or black
top = idx_L[idx[idx_L]]
bot = idx_L[~idx[idx_L]]

plt.scatter(X[top],Y[top], color='purple')
plt.scatter(X[bot],Y[bot], color='black')

XF = np.linspace(0,10,1000)
plt.plot(XF, XF*a + b, 'k--') 
plt.axis('tight')
plt.show() 
```

![在此处输入图像描述](../Images/28c2c5af3e411aee176123a822d8d85c.png)

# python - 如何绘制带有坐标的 png-osm-map

> ID：10618674
> 
> 赞同：7
> 
> 时间：2012-05-16T12:36:04.803
> 
> 标签：python, matplotlib, gis, openstreetmap

我想在 Python 中创建一个包含几个给定点的地图。为此，我想使用matplotlib 中的[Basemap](http://matplotlib.org/basemap/)。它运作良好，但我不知道如何获得合适的背景图。

如何导入[OSM](http://www.openstreetmap.org/)地图？或者我应该使用不同的映射包？我只想创建一个光栅图并将其保存为 png。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:09:06.903

**这不是我的解决方案；我从问题中粘贴了它，因为提问者没有足够的声誉来回答他自己的问题。**

> 我找到了一个解决方案：
> 
> 在 Basemap 中使用`imshow`会将 png 作为背景图像添加到绘图中。为了获得正确的背景图像，我使用了 [OSM 的导出功能，](http://www.openstreetmap.org/export?lat=38&lon=-95.8&zoom=4&layers=M)边界取自 Basemap 构造函数：
> 
> ```
> m = Basemap(llcrnrlon=7.4319, urcrnrlat=52.0632, urcrnrlon=7.848, llcrnrlat=51.8495,
>         resolution='h', projection='merc')
> 
> im = plt.imread('background.png')
> m.imshow(im, interpolation='lanczos', origin='upper') 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:44:34.090

我从 NASA GIBS tileserver 中找到了一些可访问的底图图像。您也许可以对其他 tileserver 使用相同的方法。

[http://earthdata.nasa.gov/wiki/main/index.php/GIBS_Supported_Clients#Script-level_access_to_imagery](http://earthdata.nasa.gov/wiki/main/index.php/GIBS_Supported_Clients#Script-level_access_to_imagery)

Thi 在 python 子shell 中使用 GDAL 的 gdal_translate：

```
import subprocess
import matplotlib.pyplot
import mpl_toolkits.basemap

l,u,r,d=(7.4319,52.0632,7.848,51.8495)

subprocess.call ('gdal_translate -of GTiff -outsize 400 400 -projwin {l} {u} {r} {d} TERRA.xml Background.tif'.format(l=l,u=u,r=r,d=d),shell=True )

im=matplotlib.pyplot.imread('Background.tif')

m = mpl_toolkits.basemap.Basemap(llcrnrlon=l, urcrnrlat=u, urcrnrlon=r, llcrnrlat=d,
    resolution='h', projection='merc')
m.imshow(im, interpolation='lanczos', origin='upper')

matplotlib.pyplot.show() 
```

这需要来自上述链接的 TERRA.xml 文件，尽管您也可以内联 XML。

# .net - PowerShell - 为什么“除以零异常”没有被捕获？

> ID：10618676
> 
> 赞同：8
> 
> 时间：2012-05-16T12:36:09.020
> 
> 标签：.net, powershell, exception-handling, powershell-2.0, divide-by-zero

在我的机器上，以下代码片段中的每一个都抛出异常，而不是打印到标准输出“1”和“2”为什么没有捕获异常？

```
try {
    [int]$a = 1/0
}
catch {
    write 1
}
finally {
    write 2
}

try {
    [int]$a = 1/0
}
catch [System.Exception] {
    write 1
}
finally {
    write 2
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-16T12:48:41.660

当您使用常量时，**解释器会尝试预先计算结果**，并因除以零错误而失败。您的代码甚至没有被执行，所以没有什么可以捕获的。

您可以通过更改代码以使用变量来自己验证这一点，强制执行它。

```
try {
    $divisor = 0
    [int]$a = 1/$divisor
}
catch {
    write 1
}
finally {
    write 2
} 
```

来自**Windows PowerShell**实战 (p.257)

> 此处的示例使用 1/$null。这样做而不是简单的 1/0 的原因是因为 PowerShell 解释器做了一些称为常量表达式折叠的事情。
> 
> 它查看仅包含常量值的表达式。当它看到一个时，它会在编译时评估该表达式一次，因此它不必浪费时间在运行时再次执行它。
> 
> 这意味着不可能的表达式，例如被零除，将被捕获并视为解析错误。解析错误无法被捕获，也不会在交互式输入时被记录，因此它们不是一个很好的例子。（如果一个脚本调用另一个脚本并且该脚本有这些错误之一，则调用脚本可以捕获它，但被解析的脚本不能。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T12:56:44.967

v2 中的 RuntimeException 不可捕获。它已在 v3 中修复。

除以零属于这一类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:39:10.057

您可以尝试使用这种行引发异常：`trap { "Your Exception" } 1/0`
这将引发异常“除以 0”。虽然我真的不明白为什么你的代码不会抛出异常._。
PS：不应该是这样`catch [System.SystemException]`吗？:)

# c# - 适用于 Windows phone 7 App 开发的最佳 Json 库

> ID：10618677
> 
> 赞同：0
> 
> 时间：2012-05-16T12:36:14.590
> 
> 标签：c#, json, windows-phone-7

我是赢得 7 应用程序开发的新手。我已经在 android 中完成了 app dev 并使用了 org.json 本机库。示例：`org.json.JSONArray`, `org.json.JSONException`,`org.json.JSONObject`

我希望 C# 中的功能与我在 java 中使用此 json 库的功能相似。请告诉我最好的库来做到这一点。目前我正在使用 codetitans 库。代码 ：

```
JSonWriter wr = new JSonWriter(); 
wr.WriteObjectBegin();
wr.WriteMember("set_cookie","0");
wr.WriteMember("test",writer.ToString());
wr.WriteObjectEnd();
string line = wr.ToString();
/* This creates a jsonwriter object and then write key, value pairs.*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:33:04.593

You may also want to consider [ServiceStack](https://github.com/ServiceStack/ServiceStack.Text).Text as this has recently been shown to be the fastest JSON serialiser available.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:57:16.220

我建议尝试 JSON.NET：-

[http://json.codeplex.com/](http://json.codeplex.com/)

下面提供了一个示例，说明如何使用 JSON.NET 进行序列化和反序列化：-

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)

# wpf - 我应该使用 ContentControl 还是模板？

> ID：10618684
> 
> 赞同：1
> 
> 时间：2012-05-16T12:36:44.303
> 
> 标签：wpf, wpf-controls

我正在尝试在 WPF 中创建自己的自定义进度条（以重新创建[Windows 8 Progress Bars](https://stackoverflow.com/questions/9978078/windows-8-fancy-progress-bars-via-c)）。我决定尝试尽可能地坚持标准模式，所以我认为最好从 RangeBase 控件继承。我开始遵循使用模板扩展 RangeBase 的[指南](http://www.devproconnections.com/article/net-framework2/take-it-for-a-spin)。

然而，我遇到的问题是我打算在后面有一些代码（主要用于渲染图形），我不相信我可以通过模板来做到这一点。它是否正确？

最好的做法是切换到使用 ContentControl 并实现与 RangeBase 类似的接口吗？或者还有什么我可以做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:18:17.453

为什么您会难以覆盖 RangeBase 的控件模板并实现自己的外观和感觉？

下面的这个链接通过为 WPF 进度条（以及范围基础）提供一个很酷的控制模板来实现**温度计**

[http://msdn.microsoft.com/en-us/magazine/cc163497.aspx](http://msdn.microsoft.com/en-us/magazine/cc163497.aspx)

# iphone - 如何正确知道设备方向

> ID：10618685
> 
> 赞同：0
> 
> 时间：2012-05-16T12:36:46.877
> 
> 标签：iphone, ipad, device-orientation

我想知道用户启动我的应用程序时的设备方向，以便产生不同的视图。我觉得奇怪的是如下：

```
- (void)viewDidLoad
{
    if ([UIDevice currentDevice].orientation == UIDeviceOrientationPortrait) {
        NSLog(@"1");
    }
    if ([UIDevice currentDevice].orientation == UIDeviceOrientationLandscapeRight) {
        NSLog(@"2");
    }
    if ([UIDevice currentDevice].orientation == UIDeviceOrientationLandscapeLeft) {
        NSLog(@"3");
    }
    if ([UIDevice currentDevice].orientation == UIDeviceOrientationPortraitUpsideDown) {
        NSLog(@"4");
    }
} 
```

没有人打印！我是在ipad模拟器上做的，我认为方向应该是UIDeviceOrientationPortrait。为什么会这样？以及如何正确知道方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:41:08.230

尝试使用

```
[UIApplication sharedApplication].statusBarOrientation 
```

代替

```
[UIDevice currentDevice].orientation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:39:40.777

可能是模拟器根本无法处于定向状态（这没有任何意义，因为您无法真正旋转计算机......）您是否检查过它是否返回`UIDeviceOrientationUnknown`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:41:50.607

文档或 UIDevice 状态：

> 您可以使用方向属性获取当前方向，或者通过注册 UIDeviceOrientationDidChangeNotification 通知来接收更改通知。在使用这些技术中的任何一种获取方向数据之前，您必须使用 beginGeneratingDeviceOrientationNotifications 方法启用数据传递

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html)

因此，您可能会得到未知方向，因为您从未开始生成方向通知。

您还应该在 viewDidLoad 中记录该值，以准确确认您在获得方向时收到的内容。这将是进一步调查的良好起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:41:55.533

```
Use this :-

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {      
if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)     
{       
 //code for portrait   

 }            
else      
{         //code for Landscape 

  }     
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationPortrait ||interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown); 
} 
```

*   (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation是uiviewcontroller的委托方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:42:12.990

根据[docs](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW3)，除非首先调用，否则 的`orientation`属性`UIDevice`将始终返回 0（即）。此方法将启用加速度计，传递通知更改，并更新单例的属性。`UIDeviceOrientationUnknown``-beginGeneratingDeviceOrientationNotifications``orientation``UIDevice`

# java - grails 2.0.3 中未关闭的 GSP 表达式虽然已关闭

> ID：10618690
> 
> 赞同：0
> 
> 时间：2012-05-16T12:37:19.753
> 
> 标签：java, grails, gsp, grails-2.0

我为我的事件实例创建了这个 grails 视图（create.gsp），但是在调用 /event/create 之后，我收到以下错误消息（stacktrace）：

```
 Line | Method
->>  19 | runTask in /grails-app/views/event/create.gsp
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 

Caused by GrailsTagException: Unclosed GSP expression
->>  33 | doCall  in /grails-app/views/event/create.gsp
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
```

这是我的 create.gsp：

```
<%@ page import="testProject.Event" %>
<!doctype html>
<html>
    <head>
        <meta name="layout" content="backend">
        <g:set var="entityName" value="${message(code: 'event.label', default: 'Event')}" />
        <title><g:message code="default.create.label" args="[entityName]" /></title>
    </head>
    <body>
    <div class="speedbar">
       <div class="speedbar-nav"> <a href="#">Color life Admin Panel</a> › <a href="#">Form Styling</a></div> 
       <div class="search">
             <form>
              <input type="text">
             </form>   
       </div>
    </div>
    <div class="grid-1" id="create-event">
    <!-- Line 19--> <g:if test="${flash.message}">

            <div class="alert blue hideit message" role="status">${flash.message}</div>
        </g:if>
        <g:hasErrors bean="${eventInstance}">
                <g:eachError bean="${eventInstance}" var="error">
                <div class="alert red hideit"><g:message error="${error}"/></div>
                </g:eachError>
        </g:hasErrors>
           <div class="title-grid"><g:message code="default.create.label" args="[entityName]" /><span></span></div>
           <div class="content-gird" style="display: block; ">
           <div class="form">
            <g:form action="save" >
                    <g:render template="form"/>
                    <g:submitButton name="create" class="button-a gray" value="${message(code: 'default.button.create.label', default: 'Create')}" />
            <!-- Line 33--> </g:form>
             <div class="clear"> </div>
             </div>
           </div>
        </div>
    </body>
</html> 
```

我的错误在哪里？你看到了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:26:35.983

Grails 2.0.3 中的 GSP 错误报告似乎存在错误。此提交可能已修复它：[https ://github.com/grails/grails-core/commit/fbb46af1aac77dd215eae7a1625f830fc2b1cb29](https://github.com/grails/grails-core/commit/fbb46af1aac77dd215eae7a1625f830fc2b1cb29)

请使用 Grails 2.1.0 RC1 版本重新测试 GSP 错误报告，如果问题仍然存在，请在 Grails Jira 中使用测试用例报告问题。这将有助于改进 GSP 错误报告。谢谢！

# matlab - matlab如何从多个文件夹中读取图像？

> ID：10618696
> 
> 赞同：1
> 
> 时间：2012-05-16T12:37:34.570
> 
> 标签：matlab

我的问题我的图像文件夹组织为

数据库 -> CASIA Iris Image Database (version 1.0) -> folder001(这个文件夹从 001 更改为 108) -> previouse 文件夹包含两个文件夹，每个文件夹包含 3 个图像

文件夹的结构为

[http://imageshack.us/photo/my-images/337/picture1ki.png/](http://imageshack.us/photo/my-images/337/picture1ki.png/)

我如何在 MATLAB 中阅读 CASIA V1.0 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:47:37.297

以下是文件夹中任意数量图像的通用代码。如果您确定每个文件夹有 3 个图像并且您知道每个文件夹的文件名格式，则可以简化它。

```
%# Set the relative path for the database
basePath = 'Database/CASIA Iris Image Database (version 1.0)/';

for iFolder = 1:108
    %# Set current folder
    folder = sprintf('%s%03d/', basePath, iFolder);

    %# Find the image (e.g. bmp) files in the folder. Modify bmp for your needs.
    %#   and also modify 'left' string according to the subfolder of left images
    filenames = arrayfun(@(x) x.name, dir([folder 'left/*.bmp']),'UniformOutput',false);

    for iFile = 1:length(filenames)
        img = imread([folder filenames{iFile}]);

        %# and process the image
        %# ...

    end

    %# Modify the code for to run it for right folder
    %# ...
end 
```

# validation - 验证成功后如何保留数据？

> ID：10618697
> 
> 赞同：0
> 
> 时间：2012-05-16T12:37:36.657
> 
> 标签：validation, jsp, struts, textfield

我有使用struts bean标签库的jsp：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>

    <link rel="stylesheet" type="text/css" href="css/stylesheet.css">

</head>
<body>
<p><a class="colorGrey" href="Welcome.do">
    <bean:message key="menu.label" />
</a> &gt;&gt;<bean:message key="menu.link.addnews" /> </p>
<p><br>
</p>

<html:form action="/NewsSave">
<table width="100%" border="0">
<tr>
<td class="colorGrey" width="164" height="35">
    <bean:message key="body.news.title" />  </td>
<td width="577">
    <html:text property="newsTitle"  size="40" value=""/>    </td>

</tr>
<tr>
<td colspan="2">
    <html:errors property="newstitle" />
</td>
</tr>
<tr>
<td class="colorGrey">
    <bean:message key="body.news.date" />   </td>
<td>
    <html:text property="newsDate" size="10" value=""/>    </td>
</tr>

<tr>
<td height="21" colspan="2" valign="top">
    <html:errors property="newsdate" />
</td>
</tr>
<tr>
<td class="colorGrey" height="61" valign="top">
    <bean:message key="body.news.brief" />  </td>
<td valign="top">
    <html:textarea property="brief" cols="40" rows="6" value=""/>
</td>
</tr>

<tr>
<td height="23" colspan="2" valign="top"><html:errors property="brief" /></td>
</tr>
<tr>
<td class="colorGrey" height="100" valign="top">
    <bean:message key="body.news.content" />
</td>
<td valign="top">
    <html:textarea property="content" cols="40" rows="12" value=""/>
</td>
</tr>
<tr>
<td height="23" colspan="2" valign="top">
    <html:errors property="content" />
</td>
</tr>
</table>

<html:submit value="SAVE"/>
</html:form>
<form method="POST" 
action="Link.do?method=newsList"
onsubmit="return confirm('<bean:message key="body.onsubmit.cancel" />')">
<input type="submit" value="CANCEL">
</form> 
```

而且我使用验证器插件，这意味着在收到不正确的信息后，它会在下面的文本字段中给出消息，告诉您出了什么问题。但问题是提交后一切都消失了。所以它没有信息`text`或`text-area`标签。我知道这是因为`value=""`. 但是我有另一个页面，其中包含用于添加信息的相同字段，从一开始就应该清楚。如果我删除`value=""`，此字段中的信息将在转发后显示在该页面上。所以

1.  转发到另一个页面后，我应该怎么做才能清除表单中的信息？
2.  验证成功后如何保留信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:44:01.903

正如您所提到的，您应该删除 value="" 因为这会将字段设置为空。如果要清除这些值，则应在填充 Form bean 的 Action 类中执行此操作。
如果您发现您的表单 bean 在请求之间保留了它们的值，请检查它们是否是请求范围：操作元素的范围属性应该是 struts.config 中的“请求”

# iphone - 如何使用 iPhone 相机拍摄视频

> ID：10618699
> 
> 赞同：-3
> 
> 时间：2012-05-16T12:37:39.563
> 
> 标签：iphone

我正在开发一个应用程序。我需要使用相机拍摄视频。所以请告诉我如何做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:47:26.207

仔细阅读[UIImagePickerController 类参考。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)它将告诉您如何解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:55:11.330

我假设你知道如何使用`UIImagePickerController`

```
#import <MediaPlayer/MediaPlayer.h> // add MediaPlayer.framework

- (IBAction) startCamera
{
    UIImagePickerController * startCamera;
    startCamera = [[UIImagePickerController alloc] init];
    startCamera.delegate = self;

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) 
    {           
        NSArray *mediaTypes = [NSArray arrayWithObject:(NSString *)kUTTypeMovie];
        startCamera.mediaTypes = mediaTypes ;
        startCamera.sourceType = UIImagePickerControllerSourceTypeCamera;
        startCamera.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo ;
        startCamera.allowsEditing = YES ;

    } 
    else
    {
        startCamera.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    }

        [self presentModalViewController:startCamera animated:YES]; 
        [startCamera release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:58:10.770

试试这个代码片段。仅在设备中测试此代码。在 UIImagePickerDelegate 方法中处理录制的视频。

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init]; 
picker.delegate = self; 
picker.allowsEditing = YES;
if (([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])) 
{
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    [self presentModalViewController: picker animated:YES]; 
}
else
{
    NSLog(@"Put alert no camer found");
        // Put alert no camer found
}
[picker release]; 
```

# javascript - Javascript匿名函数用例

> ID：10618700
> 
> 赞同：2
> 
> 时间：2012-05-16T12:37:49.743
> 
> 标签：javascript, anonymous-function

我正在通过 Eloquent Javascript 工作，我遇到了一个看起来像这样的代码片段：

```
function greaterThan(x) {
  return function(y) {
    return y > x;
  };
}

var greaterThanTen = greaterThan(10);
show(greaterThanTen(9)); 
```

有没有真正的用例来定义这样的函数，里面有一个匿名函数？这样做不是更简单吗：

```
function greaterThan(x,y){
  return x > y;
}

var greaterThanTen = greaterThan(9, 10); 
```

任何想法/评论/建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:42:56.560

[这是一个“闭包”的例子](http://jsfiddle.net/HpWxn/)。基本上，调用`greaterThan()`给你一个函数。该函数，而不仅仅是一个函数，它带有值`x`- 这就像将值`x`永久嵌入到函数中一样。

```
function obj(x) {

    //"public interface"
    //only these are exposed (inc and getX). x is private.
    return {
        inc: function() {
            return ++x;
        },
        getX: function() { //a getter function to retrieve private x
            return x;
        }
    }
}

//the value 10 is "embedded" to the returned object
var myobj = obj(10);

//every call to inc increments that "embedded" value
console.log(myobj.inc()); //11
console.log(myobj.inc()); //12
console.log(myobj.inc()); //13

//but you can never access the variable of `x` directly without a "getter"
console.log(myobj.getX());​ 
```

闭包是 JavaScript 的一大特色。它的一大用途是模拟私有变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:44:14.863

您正在组合功能的第一个示例。

当然你可以用不同的方式来写，但是第一个例子中 GreaterThanTen 的想法是不同的。例如，您可以将其传递给过滤器

```
var a = [ 1 , 10, 100 , 9, 43 ];

function greaterThan(x) {
  return function(y) {
    return y > x;
  };
}
var greaterThanTen = greaterThan(10);
a.filter(greaterThanTen); 
```

返回 [100, 43]

它是函数式编程。有很多优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:42:00.340

除非我错过了什么，否则第一个代码会返回一个函数。第二个返回结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:43:21.747

这不是一个特别好的用例。匿名函数的更好用例是回调，例如：您希望在函数 #1 完成后执行函数 #2。

```
function a(param1, param2, callback) {
    //work on param1 and param2 here
    callback.call(); //triggers the callback function
} 
```

# asp.net - 同一个 asp.net 页面中的两个不同的用户控件

> ID：10618701
> 
> 赞同：0
> 
> 时间：2012-05-16T12:37:57.000
> 
> 标签：asp.net, c#-4.0, web-user-controls

这是我的申请链接，请[下载](http://www.mediafire.com/?zyncso3qi0k6pqi)

我在一个 .aspx 页面中有 2 个不同的用户控件。

第一个用户控件是与数据库绑定的下拉列表。第二个用户控件是gridview。

如果我选择一家公司，该公司的下拉列表产品应显示在第二个用户控件中。

**我的问题是，**当我在下拉列表中选择公司时，gridview 用户控件首先加载，第二个下拉列表选择事件正在触发..

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:44:12.707

您可能应该检查该`IsPostBack`属性，并且仅在它不是回发时才填充控件。

```
void Page_Load()
{
  if (!IsPostBack)
  {
    // Populate the user controls.
  }
} 
```

但是由于您没有显示任何代码，我只是在猜测。

# javascript - 绕过 WebView 跨域安全

> ID：10618706
> 
> 赞同：1
> 
> 时间：2012-05-16T12:38:09.953
> 
> 标签：javascript, objective-c, cocoa, webview, cross-domain

### 场景

*   *带有加载file:///index.html*的 WebView 元素的 Cocoa 应用程序
**   本地资源*文件：///index.html*，具有可编辑的 iframe，其中*src="javascript:;"**   可编辑的 iframe 包含另一个*src="file:///resource.html"的 iframe**

 *### 问题

似乎 WebView 不允许在非本地文档（带有*src="javascript:;"的 iframe ）中加载本地资源（* *resource.html*）。

 *这是来自 MacOSX 的 Safari 错误控制台的确切消息：

```
Not allowed to load local resource: file:///resource.html 
```

### 问题

你知道有什么方法可以绕过这个安全检查吗？我可以修改所有的 javascript 和 Cocoa 代码，但我更喜欢只修改 Cocoa 代码。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:01:26.143

最后我下载了WebKit的源代码，在某个地方插入了一个*return true*来禁用这些安全措施并编译它。

似乎它有效。**

# jruby - 如果我使用 rbenv，如何为 JRUBY_HOME 设置正确的值

> ID：10618707
> 
> 赞同：1
> 
> 时间：2012-05-16T12:38:11.603
> 
> 标签：jruby, rbenv

我用 rbenv 安装了 JRuby

```
ruby -v
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (Java HotSpot(TM) 64-Bit Server VM 1.7.0_01) [linux-amd64-java]

which ruby
~/.rbenv/shims/ruby

gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.2 (2012-05-01 patchlevel 312) [java]
  - INSTALLATION DIRECTORY: /home/myjava_api/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /home/myjava_api/.rbenv/versions/jruby-1.6.7.2/bin/jruby
  - EXECUTABLE DIRECTORY: /home/myjava_api/.rbenv/versions/jruby-1.6.7.2/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-java-1.7
  - GEM PATHS:
     - /home/myjava_api/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8
     - /home/myjava_api/.gem/jruby/1.9
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "install" => "--no-rdoc --no-ri"
     - "update" => "--no-rdoc --no-ri"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

但是 $JRUBY_HOME 没有设置

当我将 $JRUBY_HOME 设置为“/home/myjava_api/.rbenv/versions/jruby-1.6.7.2/bin/jruby”并在重新登录后执行“ **ruby -v** ”时出现错误：“**错误：找不到或加载主类 org.jruby.Main** "

当我删除 $JRUBY_HOME 变量“ **ruby​​ -v** ”工作正常

什么必须是正确的 $JRUBY_HOME 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:59:02.113

在手动管理我的 PATH 一段时间后，我第一次尝试了这个工具（rbenv）并得到了同样的错误：**错误：找不到或加载主类 org.jruby.Main** 我完全忘记取消设置在卸载我以前版本的 jruby 以试用 rbenv 之后，我的 .bash_rc 文件中的旧 JRUBY_HOME 设置。

作为对其他答案的回应，我有某些工具和库需要设置 JRUBY_HOME 变量才能工作， http: [//vertx.io/](http://vertx.io/)就是一个例子。另一方面，如今许多 gems 和工具走另一条路，似乎假设您使用的是 rvm 或 rbenv。因此，使用其中一种工具，但继续设置 JRUBY_HOME 似乎是阻力最小的路径。

幸运的是，当 JRUBY_HOME 设置正确时，它可以与 rbenv 一起正常工作。例如，我的设置是这样的`export JRUBY_HOME="/home/user/.rbenv/versions/jruby-1.7.1"`

原始海报的错误似乎是试图将变量设置为 jruby 可执行文件，而实际上 JRUBY_HOME 应该只是整个 jruby 目录。我认为他的应该是`"/home/myjava_api/.rbenv/versions/jruby-1.6.7.2"`。希望这能说明问题。我意识到这是一个老问题，但是当我搜索错误时，它是第一个相关结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:45:04.450

像`rbenv`or这样的实用程序的全部意义在于`rvm`能够在 ruby​​ 实现之间切换而不必担心更改环境变量，因为它们会为您做这件事；您不需要设置`$JRUBY_HOME`为运行 JRuby（这对您来说是偶然的`/home/myjava_api/.rbenv/versions/jruby-1.6.7.2`），因为这些实用程序旨在使底层实现透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:55:27.343

`$RUBY_HOME`我想一个明显的问题是，如果没有它也能正常工作，你为什么想要它？

`JRuby`安装非常简单，您不需要任何版本管理器。只需下载 Zip 文件并将其解压缩到您喜欢的任何目录即可。然后将`JRuby/bin`目录添加到您的路径。在你的情况下，这似乎是`/home/myjava_api/.rbenv/versions/jruby-1.6.7.2/bin`。

如果您有多个项目需要不同版本`JRuby`或不同组的s，只需为每个项目`gem`提取适当版本的副本。`JRuby`假设您`PATH`为每个项目使用正确的版本，那么正确的版本`JRuby`将会运行，并且它将包含`gem`您为该项目安装的所有 s，并且每个项目将是完全独立的。

# java - Eclipse 中的 com.sun.jdi.InvocationException

> ID：10618709
> 
> 赞同：0
> 
> 时间：2012-05-16T12:38:16.953
> 
> 标签：java, recursion, stack-overflow

当我尝试调试我的代码时，我进入`com.sun.jdi.InvocationException error`了 Eclipse。我的项目有深度递归。当方法调用达到 750 左右时，我在 Eclipse 中收到上述错误。但在运行模式下，我得到了`StackOverflowError`.

是否可以在不增加堆大小的情况下避免这些错误？

# python - TypeError：本机 Qt 信号不可调用

> ID：10618714
> 
> 赞同：3
> 
> 时间：2012-05-16T12:38:29.317
> 
> 标签：python, authentication, pyqt4, basic-authentication, qnetworkaccessmanager

我正在尝试向受保护的网页发出请求，因此我尝试在`QAuthenticator()`. 但是，我收到以下错误：

```
mgr.authenticationRequired(response, auth)
TypeError: native Qt signal is not callable 
```

这是我的脚本的一部分：

```
def authenticate(self):
    username = 'user'
    password = 'pass'
    url = 'http://someurl.com'

    mgr = QNetworkAccessManager(self)

    auth = QAuthenticator()
    auth.setUser(username)
    auth.setPassword(password)

    response = QNetworkRequest()
    response.setUrl(QUrl(url))     

    mgr.authenticationRequired(mgr.get(response), auth) 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T14:36:09.520

如错误消息所示，您不能调用 PyQt 信号。相反，您必须使用以下`emit()`方法：

```
mgr.authenticationRequired.emit(mgr.get(response), auth) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T12:54:25.047

为什么要发出信号？我对该协议的理解是，当网络上的服务器需要身份验证时，QNAM 将发出该信号。您的程序应该连接到该信号，而不是发出它。“连接到此信号的插槽应填充身份验证器对象中内容的凭据（可以通过检查回复对象来确定）。” 我可能错了你正在尝试什么。

# javascript - jQuery grep 方法用于不止一种类型的过滤器

> ID：10618719
> 
> 赞同：1
> 
> 时间：2012-05-16T12:39:18.123
> 
> 标签：javascript, jquery, arrays, filter

我目前正在使用该`jQuery` `$.grep()`方法通过传递给该方法的值来过滤数组，如下所示：

```
var filteredArray = $.grep(arr, function (n, i) {
    return (n.type === type);
}, true); 
```

因此，数组是具有类型属性的对象数组，如果该属性等于传递给它的类型，则过滤掉其他对象并从结果中生成一个新数组。

我如何扩展它以接受多种类型的过滤器？

因此，如果我传递一个最小长度为 1 且不为最大值的过滤器数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:44:37.860

```
var types = [1, 2]; // example of types...

var filteredArray = $.grep(arr, function(element) {
    return $.inArray(element.type, types) >= 0;
});

console.log(filteredArray);​ 
```

[**现场演示**](http://jsfiddle.net/xE3Dy/3)

# c# - 无法连接到任何指定的 MySQL 主机

> ID：10618720
> 
> 赞同：3
> 
> 时间：2012-05-16T12:39:18.880
> 
> 标签：c#, mysql

我正在尝试创建一个连接到 MySQL 数据库的登录表单。我安装了插入表单中的 sql 连接器，但是当我尝试连接时，出现无法连接到任何指定 MySQL 主机的错误。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;

namespace ECBSRecruitmentAgencySoftware
{
    public partial class LogIn : Form
    {
             public LogIn()
        {
            InitializeComponent();
        }

             public bool tryLogin(string username, string password)
             {
                 MySqlConnection con = new MySqlConnection("host=think-tek.net;user=ctutorial;password=chang3d;database=ctutorial_logintest;");
                 MySqlCommand cmd = new MySqlCommand("Select * FROM login WHERE user_name = `" + username + "` AND user_pass = `" + password + "`;");
                 cmd.Connection = con;
                 con.Open();
                 MySqlDataReader reader = cmd.ExecuteReader();
                 if (reader.Read() != false)
                 {
                     if (reader.IsDBNull(0) == true)
                     {
                         cmd.Connection.Close();
                         reader.Dispose();
                         cmd.Dispose();
                         return false;
                     }
                     else
                     {
                         cmd.Connection.Close();
                         reader.Dispose();
                         cmd.Dispose();
                         return true;
                     }
                 }
                 else 
                 {
                     return false;
                 }
             }
        private void button1_Click(object sender, EventArgs e)
        {

            if (tryLogin(textBox1.Text, textBox2.Text) == true)
            {
                MainScreen F2 = new MainScreen();
                F2.Show();
                this.Hide();
            }

             else MessageBox.Show("Wrong details!");

        }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T13:07:24.980

[该站点](http://www.connectionstrings.com/mysql)在连接字符串方面非常有用。您的连接字符串似乎无效。

另外：确保您的用户具有适当的访问权限。许多托管服务提供商仅允许从 localhost 进行访问。您可能必须请求他们允许您的用户进行远程访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:48:53.237

我的 MySQL 连接字符串是：

```
string mySqlConn = "server=localhost;user=username;database=databasename;port=3306;password=password;"; 
```

您的连接字符串会引发什么异常？应该有一个错误号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:46:07.083

尝试示例中给定格式的连接字符串：

```
public bool tryLogin(string username, string password)
             {
                 MySqlConnection con = new MySqlConnection("SERVER=localhost;" +
                    "DATABASE=mydatabase;" +
                    "UID=testuser;" +
                    "PASSWORD=testpassword;");
                 MySqlCommand cmd = new MySqlCommand("Select * FROM login WHERE user_name = `" + username + "` AND user_pass = `" + password + "`;");
                 cmd.Connection = con;
                 con.Open();
                 MySqlDataReader reader = cmd.ExecuteReader();
                 if (reader.Read() != false)
                 {
                     if (reader.IsDBNull(0) == true)
                     {
                         cmd.Connection.Close();
                         reader.Dispose();
                         cmd.Dispose();
                         return false;
                     }
                     else
                     {
                         cmd.Connection.Close();
                         reader.Dispose();
                         cmd.Dispose();
                         return true;
                     }
                 }
                 else 
                 {
                     return false;
                 }
             } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T10:41:58.113

我有同样的问题，错误是在连接字符串中！不知何故，我向两个不同的位置声明了两次。一次到我的本地主机，第二次到服务器机器数据库。当我在客户端机器上发布项目时，无法连接到本地主机（我的电脑是什么）。:-) 我想知道如何得到这个：“无法连接到任何指定的 mysql 主机”

**这就是人如何让他的生活复杂好几天！**:-)

当然，我能够连接到服务器机器上的数据库。

所以，举个例子，这是我的问题。而且，解决方案是一次性向它声明一个数据库！！！

而且，我想分享我工作得很好的连接字符串：

**cs = @"服务器=xxx.xxx.xxx.xxx；uid=xxxx；密码=xxxxxxxxx；数据库=xxxxx；端口=3306"；**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T11:14:20.797

你的字符串连接是正确的，没有错误，但首先在本地服务器上检查它这是异常只会引发你的xampp没有运行，首先启动xampp去浏览器并输入localhost，如果它工作你会看到xampp菜单如果它打开localhost然后尝试连接您的服务器

```
string connection = "server=localhost;database=student_record_database;user=root;password=;";
            MySqlConnection con = new MySqlConnection(connection); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-21T10:51:14.663

```
public bool tryLogin(string username, string password)
{
    MySqlConnection con = new MySqlConnection("SERVER=xx.xx.xx.xx;DATABASE=dbname;UID=user;PASSWORD=password;CheckParameters=False;");
    MySqlCommand cmd = new MySqlCommand("Select * FROM login WHERE user_name = `" + username + "` AND user_pass = `" + password + "`;");
    cmd.Connection = con;
    con.Open();
    MySqlDataReader reader = cmd.ExecuteReader();
    if (reader.Read() != false)
    {
        if (reader.IsDBNull(0) == true)
        {
            cmd.Connection.Close();
            reader.Dispose();
            cmd.Dispose();
            return false;
        }
        else
        {
            cmd.Connection.Close();
            reader.Dispose();
            cmd.Dispose();
            return true;
        }
    }
    else 
    {
        return false;
    }
} 
```

# java - 如何将 `throws IOException` 放到语句中

> ID：10618722
> 
> 赞同：1
> 
> 时间：2012-05-16T12:39:22.210
> 
> 标签：java, io, ioexception

我正在尝试实现一个`class`from `HighestScoreFile.java`，当我编译时，我收到了这个错误：

```
...MemoryGame.java:211: error: unreported exception IOException; must be caught or declared to be thrown
                    HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click);
                                                     ^
1 error 
```

在我实现这个之前`HighestScoreFile.java`，我已经使用一个`main`类进行了测试

```
public static void main(String[] args) throws IOException
    {
        HighestScoreFile("abcdefg", 12, 13, 14, 30);
    } 
```

用于将`HighestScoreFile.java`数据保存到`Highest.txt`.

但是当我使用下面的代码实现另一个时`.java`，它会显示该错误。

```
HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:44:40.040

您需要在方法之外抛出异常：

```
public void someMethod() throws IOException
{
    // ...
    HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click);
    // ..
} 
```

或赶上异常：

```
try 
{
    HighestScoreFile.HighestScoreFile(input, hours, minutes, seconds, click);
}
catch (IOException ex)
{
    // handle the exception
} 
```

我建议您遵循[Java 异常线索](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:41:53.050

您需要`throws IOException`在声明中添加`HighestScoreFile`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:42:24.647

您的代码尝试抛出另一个错误而不是 IOException，但您没有捕获它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T12:43:02.073

错误消息说明了一切：被调用的方法可能会抛出一个`IOException`，*必须被捕获或声明为抛出*。

因此，要么将调用包装在一个`try-catch`块中，要么也声明调用者方法`throws IOException`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T12:43:28.327

您必须将异常声明为在您的方法中抛出（在新 java 文件的方法中抛出 IOException）或用 try / catch 块包围它

# asp.net - 当 UpdatePanel 在 Timer 上触发时 WatermarkExtender 闪烁

> ID：10618728
> 
> 赞同：3
> 
> 时间：2012-05-16T12:39:30.933
> 
> 标签：asp.net, ajaxcontroltoolkit, watermark

我在我的网页中放`UpdatePanel`了一个触发器。`Timer`此外，在面板之外，我将 a`TextBox`与[`WatermarkExtender`](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx).

当计时器滴答作响时，`UpdatePanel`刷新。此外，水印会闪烁（它会从文本框中消失并重新出现）。这种情况每 1 秒发生一次。这是一个大问题。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:24:45.867

There is no way to fix this because of how the extender works. It actually swaps out textboxes on postback. The only way to fix would be to manually write your own extender js code. You can read more about this problem here

[http://forums.asp.net/p/1073683/1605937.aspx](http://forums.asp.net/p/1073683/1605937.aspx)

and here

[http://mattberseth.com/blog/2008/06/rewriting_the_textboxwatermark.html](http://mattberseth.com/blog/2008/06/rewriting_the_textboxwatermark.html)

# php - 如何使用 HTML 地图创建平面图

> ID：10618730
> 
> 赞同：4
> 
> 时间：2012-05-16T12:39:33.863
> 
> 标签：php, javascript, imagemap

我浏览了这个网站，我发现它对理解/查看楼层地图非常有帮助：

[http://www.mouseonhouse.com/property/45/8708/](http://www.mouseonhouse.com/property/45/8708/)

我想做这样的东西。如何从后端动态管理平面图？如果您查看我在上面粘贴的链接，您会在右侧找到平面图的图像，您会注意到您可以通过单击查看平面图中任何部分的详细图像。我知道他们使用 HTML 地图和区域来实现这个概念。

他们有什么方法/工具，这样我就可以设法从后端类似地制作平面图，就像我上传平面图的图像，然后指出不同的区域，最后它会为地图创建类似 HTML 代码的东西。我在前端展示它。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:39:53.560

如果您使用图像地图，我建议您查看[ImageMapster JQuery 插件](http://www.outsharked.com/imagemapster/)，它可以真正帮助完成许多图像地图操作任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:44:44.407

我建议[http://www.maschek.hu/imagemap/imgmap](http://www.maschek.hu/imagemap/imgmap)通过跟踪图像来创建图像映射。我已经在房地产网站上使用它，效果很好。不过，这确实涉及第三方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:50:25.950

看看[我的在线图像地图创建者](http://www.kolchose.org/simon/ajaximagemapcreator/)！

这是我的一个旧测试，但仍然有效。

# django - Django 表单提交 - 避免页面重定向

> ID：10618731
> 
> 赞同：0
> 
> 时间：2012-05-16T12:39:34.367
> 
> 标签：django, django-forms

我正在使用 django 表单来更新一些细节。单击保存更改后，将进行 ajax 调用，执行视图，发送 ajax 响应，执行成功代码 n 页面再次重新加载。n 在重新加载时表单不再有效，执行 from.is_valid() 的 else 部分。

```
if form.is_valid:
    #do something
    return HttpResponse(simplejson.dumps(response), mimetype='application/json')
else:
    #do something
    return render_to_response('ts.html', {'form': form}, context_instance = RequestContext(request)) 
```

我想避免在成功提交表单时重新加载页面并返回 ajax 响应。怎样才能做到这一点？

我已经更改了我的代码，这里是视图、模板和 jquery。

```
if request.POST:
    if form.valid():
         if credentials.correct():
               resp = {'success': True}
               return HttpResponse(simplejson.dumps(resp), mimetype='application/json')
         else:
              resp = {'success': False}
              return HttpResponse(simplejson.dumps(resp), mimetype='application/json')
    else:
         print "error in form"
         return render(request, 'manage_accounts.html', {'creds': creds, 'form': form})
else:
     form = SomeForm()
     return render(request, 'manage_accounts.html', {'creds': creds, 'form': form}) 
```

模板

```
<form action="/accounts/" method="POST" id="bitlychangeform">
  <div id="ajaxwrapper">
{% csrf_token %}
{{ form.non_field_errors }}
<!--{% include "Change_bitly_form.html" %}-->
{{ form.as_p }}
      <div class="clearfix">
        <label></label>
            <div class="input" style="float:right">
            <input type="submit" id="save" value="Save Changes" class="btn btn-primary  "/>
        </div>
     </div>
  </div>
</form> 
```

查询：

```
$(function(){
var form = $('#bitlychangeform');
    form.submit(function(e) {
    jQuery("#save").attr('disabled', true)
    jQuery("#ajaxwrapper").load(
          form.attr('action') + ' #ajaxwrapper',
          form.serializeArray(),
          function(data) {
              jQuery("#save").attr('disabled', false)
      alert(data);
          });
  return false;
      e.preventDefault(); 
  });
}); 
```

当我将 Django 表单用作 {{ form.as_p }} 时，不会发生页面重新加载，但是当我使用“表单的自定义模板，其字段为带 ** 的密码字符字段且仅在单击编辑按钮后才可编辑”时， form.valid() 返回 false。

我要求 django 表单作为我想要的表单自定义模板。谁能指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:59:22.660

我猜您没有覆盖前端的默认表单提交行为，并且您正在正常提交表单。

确保抑制表单提交的默认行为。 [此页面在](https://web.archive.org/web/20150218051521/http://www.micahcarrick.com/ajax-form-submission-django.html)*templates/contact/form.html* 下提供了一个很好的示例

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:23:39.590

您可以在 JavaScript 中通过在提交表单时返回 false 来处理此问题。

```
form.submit(){
    #do something
    #make AJAX call
    #do something
    return false;
} 
```*

# php - 如何在 PHP 中创建 REST API？

> ID：10618734
> 
> 赞同：9
> 
> 时间：2012-05-16T12:39:57.517
> 
> 标签：php, api

我一直在开发游戏网站，并计划添加一个 API 让开发人员为该网站创建游戏。唯一的问题是如何创建一个 API，更具体地说，是用 PHP 或任何其他可以开发 API 的语言的 REST API？

抱歉，API 开发中的新手。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T12:44:59.063

当您了解基本原理时，这很容易。基本上，您希望控制器映射到修改数据的操作，无论该数据是在数据库、XML 文件、CSV 文件还是文本文件中，都取决于您的模型。

我创建了一个简单的 API 框架启动器，您可以查看并开始使用：[https ://github.com/martinbean/api-framework](https://github.com/martinbean/api-framework)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:43:09.107

检查[课间 PHP 框架](http://www.recessframework.org/)。你可以在谷歌上快速搜索，有很多可用的文章:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-22T15:02:02.820

我最近使用 FRAPI 来做到这一点， [http ://getfrapi.com/](http://getfrapi.com/)

它的重点是埋葬所有笨拙的工作，让您专注于 API 真正需要做的事情！...作为一个附加功能，它无需额外的工作即可生成 API 规范。

**2021/06/01 更新：** 项目不再存在！

# android - 检查我在 x 时间段内没有收到 GPS 信号

> ID：10618740
> 
> 赞同：1
> 
> 时间：2012-05-16T12:40:14.803
> 
> 标签：android, timer, gps

我想在丢失 GPS 信号时通知，我发现了这个：
[https](https://stackoverflow.com/a/8322160/1034806)
: //stackoverflow.com/a/8322160/1034806 但是如果 onLocationChanged() 没有启动，我如何比较 getTime() 的两个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:25:42.317

最简单的方法是发送延迟消息：

```
private static final int MSG_SIGNAL_LOST = 1;
private static final int GPS_SIGNAL_LOST_TIME = 10000; // 10 seconds

private final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MSG_SIGNAL_LOST:
            handleGpsSignalLost();
            break;
        }
    };
};

private void handleGpsSignalLost() {
    // GPS signal lost, handle here
}

private void postDelayedGpsLostCheck() {
    mHandler.removeMessages(MSG_SIGNAL_LOST);
    mHandler.sendEmptyMessageDelayed(MSG_SIGNAL_LOST, GPS_SIGNAL_LOST_TIME);
} 
```

`postDelayedGpsLostCheck()`每次调用方法时只需调用方法`onLocationChanged()`。您甚至不需要保存和比较时间。

也别忘了打电话

```
mHandler.removeMessages(MSG_SIGNAL_LOST); 
```

当你从活动中出去时。

# javascript - 从javascript数组自动生成最大'N'值

> ID：10618746
> 
> 赞同：-3
> 
> 时间：2012-05-16T12:40:58.793
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：最小和最大数组值？](https://stackoverflow.com/questions/1669190/javascript-min-max-array-values)
> [从javascript数组生成最大'N'值](https://stackoverflow.com/questions/10617982/generate-max-n-values-from-javascript-array)

```
var arr = new Array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) 
```

如何从这个数组中执行 5 个最大值？结果必须像 `10, 9, 8, 7, 6`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:45:55.640

查看[数组 Java API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)。它将为您提供阅读文档的一些练习，并为您提供解决家庭作业问题的方法；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:14:14.047

你可以试试这个 1.首先你按升序排列数组。2\. 得到它的长度。3\. 获取您需要的最后 5 位数字。

我认为这对你有帮助。..！干杯

# java - Java EE TCP 服务器

> ID：10618747
> 
> 赞同：1
> 
> 时间：2012-05-16T12:41:01.390
> 
> 标签：java, jakarta-ee, tomcat, tcp

我正在用 Java EE/Spring/SpringWEB 开发一个 Web 应用程序。

应用程序的一部分需要通过 TCP/UDP（不是 HTTP）与移动设备通信。我希望所有基础设施都在 Java EE 容器（例如 Tomcat）中运行。我想知道是否有任何标准或 Java EE 容器 (Tomcat) 的一部分可以重用以免费拥有 TCP 服务器？

我的意思是我不想实现我自己的需要可扩展/可靠和高效的 TCP 服务器。我想尽可能多地重用并在适用的情况下使用标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:48:52.133

Java EE 中没有任何东西，不确定 Spring。为了自己实现，我强烈建议使用[netty](http://netty.io/)作为 tcp 服务器的主要构建块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:49:07.040

好吧，Tomcat 不是真正的 Java EE 服务器，而是 Java EE 堆栈的 Web servlet 部分。Java EE 中没有包含真正的官方 TCP 服务器库，除了 Java SE 套接字库。我建议您将开源库[Apache MINA](http://mina.apache.org/)用于 TCP/UDP 服务器功能。它应该适用于 Tomcat。完整的 Java EE 堆栈（glassfish、websphere、weblogic、geronimo..）可能不允许设置 TCP 侦听器，因此如果您从 Tomcat 迁移到完整的 Java EE 堆栈，请务必小心。

# ruby-on-rails - Ruby on Rails。如何在不重新启动服务器的情况下更改生产中的视图文件

> ID：10618751
> 
> 赞同：0
> 
> 时间：2012-05-16T12:41:09.197
> 
> 标签：ruby-on-rails

我制作了允许通过浏览器更改视图文件之一的功能。它更改文件并且不使用数据库。在开发模式下一切正常。但据我所知，rails 在生产模式下缓存所有文件。

有人知道解决方案吗？

我发现这篇文章 [http://railshints.tumblr.com/post/1559660060/reload-rails-templates-dynamically-in-production-mode](http://railshints.tumblr.com/post/1559660060/reload-rails-templates-dynamically-in-production-mode) 但它似乎不起作用或我做错了什么。

我使用 Rails 2.3.5

# sql-server - 数据库创建失败

> ID：10618752
> 
> 赞同：1
> 
> 时间：2012-05-16T12:41:09.920
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我以管理员身份运行打开了我的 SSMS。我使用窗口身份验证连接到实例，如下所示。

![在此处输入图像描述](../Images/bdd48efc14a81f3a2c7b1838253a5e5a.png)

我试图创建一个新的登录名，每次它都显示下面提到的错误....

![在此处输入图像描述](../Images/87f1b6e151d11fe655e21f2bbb5df8cf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:50:29.123

转到数据库的安全选项卡并检查您登录 SSMS 的用户是否出现在用户选项卡中。如果不添加他，然后确保他拥有所有正确的权限。或者使用 sa 帐户登录 SMSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:58:41.143

您的“以管理员身份运行”意味着作为 Windows 管理员。

为了能够创建数据库，您需要使用具有创建数据库权限的登录名登录到 SQL Server

右键单击您的登录名并将其设为 dbcreator：

![在此处输入图像描述](../Images/70354ad2a5746f3d8828d1480d5a3a49.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T08:06:44.503

-close your application -right click on mouse and run as administrator

its happen to me

# java - 哪个 jdbc 驱动程序用于 java 1.6？

> ID：10618753
> 
> 赞同：1
> 
> 时间：2012-05-16T12:41:15.080
> 
> 标签：java, jdbc

在 intalio 服务器中启动进程时出现错误：

> java.lang.RuntimeException:java.lang.UnsupportedException:Java Runtime Environment JRE 1.6 is not supported by this driver.Use sqljdbc4 class library which support JDBC 4.

我用过java版本：1.6，用过sqljdbc4

谁能告诉我为什么我得到这个例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:45:21.333

服务器可能有一个旧版本的 JAR，类加载器会在它到达您的 sqljdbc4.jar 之前获取它。

如果可以，请删除较旧的 JAR，或者告诉服务器更喜欢它在应用程序部署中找到的 JAR。

# python - Django - 如何在 Django 应用程序中重新加载（库）？

> ID：10618756
> 
> 赞同：0
> 
> 时间：2012-05-16T12:41:33.707
> 
> 标签：python, django, shared-libraries, reload

我有一个使用`library.py`文件的 django 应用程序：

**库.py**

```
a=5 
```

**视图 1：**

```
import library
print library.a  # prints 5 
```

`library.py`更新文件并更改后的某个事件`a=10`

**视图 2：**

```
import library
reload(library) # Should refresh library for the entire project 
```

然后我再次执行**视图 1**：

> 它仍然打印 5，为什么？

有人可以解释一下，因为它应该已经打印`10`了，因为我更新了值并重新加载了共享内存中的库`python manage.py runserver`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:46:09.137

> 应该刷新整个项目的库

不，不应该。它只会在当前模块中重新加载它。并且不要使用它来重新加载项目的代码，根据您的部署方案使用正确的方式。

# java - 为什么我的 TopComponent 上的 JavaFX 内容会消失？

> ID：10618757
> 
> 赞同：13
> 
> 时间：2012-05-16T12:41:34.970
> 
> 标签：java, javafx, netbeans-7, javafx-2, netbeans-platform

我遇到了一个问题，这可能是由于对 Netbeans 平台（7.1.2）或 JavaFX 2 的某些原则缺乏理解造成的。我想在`JFXPanel`一个非常简单`Scene`的 Swing`JPanel`中添加一个顶级组件。我通过以下代码实现了这一点：

```
 public accexTopComponent() {
    initComponents();
    setName(Bundle.CTL_accexTopComponent());
    setToolTipText(Bundle.HINT_accexTopComponent());
    putClientProperty(TopComponent.PROP_CLOSING_DISABLED, Boolean.TRUE);

    //Begin of my code
    myFX = new JFXPanel(); //myFX is a static JFXPanel
    Platform.runLater(new Runnable() {

        @Override
        public void run() {

            myFX.setScene(new Scene(ButtonBuilder.create().minHeight(40.0).minWidth(40.0).build()));

        }
    });

      jPanel1.add(myFX);

} 
```

这编译没有问题，当我第一次`Button`显示 JavaFX 时会显示JavaFX。`TopComponent`但是一旦组件被隐藏并再次显示，JavaFX 就会`Button`消失，而其他子组件仍然可见。

为什么 JavaFX 内容会消失？

编辑：

我现在包括整个 TopComponent 的来源。我想这就是你需要自己测试它的全部内容。我没有更改任何其他文件。

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package de.jeed.nbgan.accexplorer;

import java.awt.Color;
import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.scene.Scene;
import javafx.scene.control.ButtonBuilder;
import javafx.scene.text.TextBuilder;
import javafx.scene.web.WebView;
import javafx.scene.web.WebViewBuilder;
import org.netbeans.api.settings.ConvertAsProperties;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.windows.TopComponent;
import org.openide.util.NbBundle.Messages;

/**
 * Top component which displays something.
 */
@ConvertAsProperties(dtd = "-//de.jeed.nbgan.accexplorer//accex//EN",
autostore = false)
@TopComponent.Description(preferredID = "accexTopComponent",
//iconBase="SET/PATH/TO/ICON/HERE", 
persistenceType = TopComponent.PERSISTENCE_ALWAYS)
@TopComponent.Registration(mode = "explorer", openAtStartup = true)
@ActionID(category = "Window", id = "de.jeed.nbgan.accexplorer.accexTopComponent")
@ActionReference(path = "Menu/Window" /*
 * , position = 333
 */)
@TopComponent.OpenActionRegistration(displayName = "#CTL_accexAction",
preferredID = "accexTopComponent")
@Messages({
    "CTL_accexAction=accex",
    "CTL_accexTopComponent=Konten-Explorer",
    "HINT_accexTopComponent=Durchsuchen von Abteilungen und Konten"
})
public final class accexTopComponent extends TopComponent {

    static JFXPanel myFX;

    public accexTopComponent() {
        initComponents();
        setName(Bundle.CTL_accexTopComponent());
        setToolTipText(Bundle.HINT_accexTopComponent());
        putClientProperty(TopComponent.PROP_CLOSING_DISABLED, Boolean.TRUE);
        myFX = new JFXPanel();
        Platform.runLater(new Runnable() {

            @Override
            public void run() {

                myFX.setScene(new                            Scene(ButtonBuilder.create().minHeight(40.0).minWidth(40.0).build()));

        }
    });

      jPanel1.add(myFX);

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();

    jPanel1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
    jPanel1.setLayout(new java.awt.GridBagLayout());

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(54, 54, 54)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(153, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(33, 33, 33)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(74, Short.MAX_VALUE))
    );
}// </editor-fold>                        
// Variables declaration - do not modify                     
private javax.swing.JPanel jPanel1;
// End of variables declaration                   

@Override
public void componentOpened() {
    // TODO add custom code on component opening
}

@Override
public void componentClosed() {
    // TODO add custom code on component closing
}

void writeProperties(java.util.Properties p) {
    // better to version settings since initial version as advocated at
    // http://wiki.apidesign.org/wiki/PropertyFiles
    p.setProperty("version", "1.0");
    // TODO store your settings
}

void readProperties(java.util.Properties p) {
    String version = p.getProperty("version");
    // TODO read your settings according to their version
}
} 
```

在我的例子中，这`TopComponent`是一个名为 AccountExplorer 的组件的一部分，它引用了 JavaFX，并被一个普通的 NB 平台应用程序引用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-12T18:08:10.713

尝试这个：

```
Platform.setImplicitExit(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T09:40:19.643

我们遇到同样的问题。基于以下线程，我们假设一旦面板不再可见，JavaFX 平台就会自动退出，因为所有 JavaFX gui 元素都不再可见。

此假设基于以下信息：
[https](https://forums.oracle.com/forums/thread.jspa?messageID=10287328) ://forums.oracle.com/forums/thread.jspa?messageID=10287328和
[https://forums.oracle.com/forums/thread.jspa?threadID=2390971](https://forums.oracle.com/forums/thread.jspa?threadID=2390971)

在我们的环境中的第一次尝试是在代码中的某处添加一个虚拟 JFXPanel 并将其保留在那里，直到您的程序退出似乎可以工作。

第二次尝试您的代码也可以：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package de.jeed.nbgan.accexplorer;

import javafx.application.Platform;
import javafx.embed.swing.JFXPanel;
import javafx.geometry.Rectangle2D;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.ButtonBuilder;
import javafx.scene.paint.Color;
import javafx.stage.Modality;
import javafx.stage.Screen;
import javafx.stage.Stage;
import javafx.stage.StageStyle;
import org.netbeans.api.settings.ConvertAsProperties;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.windows.TopComponent;
import org.openide.util.NbBundle.Messages;

/**
 * Top component which displays something.
 */
@ConvertAsProperties(dtd = "-//de.jeed.nbgan.accexplorer//accex//EN",
autostore = false)
@TopComponent.Description(preferredID = "accexTopComponent",
//iconBase="SET/PATH/TO/ICON/HERE", 
persistenceType = TopComponent.PERSISTENCE_ALWAYS)
@TopComponent.Registration(mode = "explorer", openAtStartup = true)
@ActionID(category = "Window", id = "de.jeed.nbgan.accexplorer.accexTopComponent")
@ActionReference(path = "Menu/Window" /*
 * , position = 333
 */)
@TopComponent.OpenActionRegistration(displayName = "#CTL_accexAction",
preferredID = "accexTopComponent")
@Messages({
    "CTL_accexAction=accex",
    "CTL_accexTopComponent=Konten-Explorer",
    "HINT_accexTopComponent=Durchsuchen von Abteilungen und Konten"
})
public final class accexTopComponent extends TopComponent {

    static JFXPanel myFX;
    static JFXPanel myDummyFXtoKeepJavaFxRunning;

    public accexTopComponent() {
        initComponents();
        setName(Bundle.CTL_accexTopComponent());
        setToolTipText(Bundle.HINT_accexTopComponent());
        putClientProperty(TopComponent.PROP_CLOSING_DISABLED, Boolean.TRUE);
        myFX = new JFXPanel();
        myDummyFXtoKeepJavaFxRunning = new JFXPanel();
        Platform.runLater(new Runnable() {

            @Override
            public void run() {
                // Actual FX code that will be hidden/shown
                myFX.setScene(new Scene(ButtonBuilder.create().minHeight(40.0).minWidth(40.0).build()));

                // Workaround
                Stage dummyPopup = new Stage();
                dummyPopup.initModality(Modality.NONE);
                // set as utility so no iconification occurs
                dummyPopup.initStyle(StageStyle.UTILITY);
                // set opacity so the window cannot be seen
                dummyPopup.setOpacity(0d);
                // not necessary, but this will move the dummy stage off the screen
                final Screen screen = Screen.getPrimary();
                final Rectangle2D bounds = screen.getVisualBounds();
                dummyPopup.setX(bounds.getMaxX());
                dummyPopup.setY(bounds.getMaxY());
                // create/add a transparent scene
                final Group root = new Group();
                dummyPopup.setScene(new Scene(root, 1d, 1d, Color.TRANSPARENT));
                // show the dummy stage
                dummyPopup.show();

                // size back to scene size
                dummyPopup.sizeToScene();   

                // if you centered it before hiding
                //dummyPopup.centerOnScreen();      
            }
        });

        jPanel1.add(myFX);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();

        jPanel1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPanel1.setLayout(new java.awt.GridBagLayout());

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(54, 54, 54)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(153, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(33, 33, 33)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 193, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(74, Short.MAX_VALUE))
        );
    }// </editor-fold>                        
    // Variables declaration - do not modify                     
    private javax.swing.JPanel jPanel1;
    // End of variables declaration                   

    @Override
    public void componentOpened() {
        // TODO add custom code on component opening
    }

    @Override
    public void componentClosed() {
        // TODO add custom code on component closing
    }

    void writeProperties(java.util.Properties p) {
        // better to version settings since initial version as advocated at
        // http://wiki.apidesign.org/wiki/PropertyFiles
        p.setProperty("version", "1.0");
        // TODO store your settings
    }

    void readProperties(java.util.Properties p) {
        String version = p.getProperty("version");
        // TODO read your settings according to their version
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-18T16:33:20.220

我遇到了同样的问题：我确实遇到了问题，不仅是顶部组件......而且我的模态对话框窗口也有问题。在某些操作系统上，它们最初似乎可以工作（Windows），而在其他操作系统上，对话框以黑色的空框（linux）开始。在某些对话框中（在 Windows 下），在使用对话框时（通常在单击按钮之后），对话框也会变空（通常在第六次单击左右之后？？？）。当将鼠标（不点击）移动到按钮上时，它们会重新出现（但不是其余的）

我还具有最小化和恢复主窗口会导致空窗口的效果（至少在 Windows 下）。

但是：（！！！！！！）我发现用鼠标调整主窗口或对话框的大小会带回内容！！！！所以我认为你对初步死亡的假设不可能是原因（为什么它会回来）。

对于对话框，我找到了一个解决方案：将窗口场景设为类成员，以便稍后在以下 repaint() 方法中访问它：

```
 /**
   * force repaint by re-setting the scene
   * This solves a repainting bug in JavaFx 1.8.05
   */
  private void repaint(){
    setScene(null);
    Platform.runLater(new Runnable() {
      @Override
      public void run() {
        setScene(scene);
      }
    });
  } 
```

在对话框中，我在 showModal() 之前和每个按钮事件结束时使用 repaint() --> 工作正常:-) 但是我没有找到可以在主窗口最小化后调用 repaint() 的事件. 现在是一个新的神秘但解决方案：如果我将 repaint() 放在 MainWindow 的 show() 之前，它一切正常。我不知道为什么...

但我绝对认为这完全是关于 JavaFX 中的一个错误，希望在下一个版本中得到修复。

此致

英戈

# php - 将属性类型转换为对象

> ID：10618763
> 
> 赞同：4
> 
> 时间：2012-05-16T12:41:50.963
> 
> 标签：php

定义属性时是否可以将属性类型转换为对象？例如， $array 是有效的，但是，我对对象的两次尝试都不是。

谢谢

```
class xxx
{
    public  $array=array(),
            $object1=new stdClass(),
            $object2=object()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:43:34.487

不，PHP 不允许您这样做。将对象分配给类属性的唯一方法是通过类方法。

如果您希望在对象初始化时将一个空类分配给类属性，那么您可以通过构造函数方法执行此操作。

```
class xxx {
    public $array = array();
    public $object1;

    public function __construct() {
        $this->object1 = new stdClass();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:44:30.573

这是不可能的，因为类定义是在 PHP 的编译时执行的。此时没有表达式被翻译。这意味着只允许直接赋值，如字符串、浮点数、整数和数组。

请参阅[**运行时与编译时**](https://stackoverflow.com/questions/846103/runtime-vs-compile-time)

# javascript - 在 Firefox 中监视当前选项卡 location.href

> ID：10618771
> 
> 赞同：1
> 
> 时间：2012-05-16T12:42:02.473
> 
> 标签：javascript, firefox, firefox-addon

我想监视 Firefox 浏览器中的用户活动，我需要知道它在当前选项卡中的 location.href。为此，我使用**content.location.href**，但是当这个 location.href 更改时我需要代码。我需要知道我应该监听哪些事件以及浏览器中的哪些对象。

我的一些代码：

```
window.addEventListener("load", function load(event){
    window.removeEventListener("load", load, false);
    myExtension.init();
},false);

var myExtension = {
  init: function() {
    var appcontent = document.getElementById("appcontent");
    appcontent.addEventListener("blur", myExtension.onPageBlur, true);
    appcontent.addEventListener("load", myExtension.onPageLoad, true);
    appcontent.addEventListener("focus", myExtension.onPageFocus, true);
  },

  onPageBlur: function () {
    // Doing something when there is no focus
  },

  onPageFocus: function(aEvent) {
    // Doing something when we get focus
  },

  onPageLoad: function(aEvent) {
    // Doing something on page load
  }
}; 
```

此代码有效，但有一点不需要的行为，当您单击浏览器的位置栏时，会触发 blur 事件，如果 location.href 更改（触发焦点和加载事件），则很难使用 location.href , 保存用户活动数据时需要一些返工优化

我需要代码具有这种行为：

*   适用于选项卡选择
*   适用于选项卡 location.href 更改
*   适用于浏览器的多个窗口

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:37:55.513

You should be [using a progress listener](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners) for that. Your `onLocationChange` will be called every time the location of the current tab changes, you would only need to look at `aURI.spec`. The same approach is used to update the location bar in Firefox.

# asp.net-mvc - 淘汰赛 - 如何从 asp.net MVC 将 Observable 属性设置为 JSON REsult

> ID：10618772
> 
> 赞同：1
> 
> 时间：2012-05-16T12:42:06.927
> 
> 标签：asp.net-mvc, knockout.js

MVC 应用程序返回一个 JSON REsult，其中包含一个 JSON 对象。要使淘汰赛 2 方式绑定起作用，它需要 ko.observable("value")。

有没有一种方法可以设置两种方式绑定到从 MVC 返回的 JSON 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:22:44.773

虽然您可以手动循环遍历您的结构并创建适当的 observables，但您可能希望查看此处描述的映射插件：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

# javascript - 如何在 IE 中运行 Websocket

> ID：10618775
> 
> 赞同：3
> 
> 时间：2012-05-16T12:42:16.520
> 
> 标签：javascript, html

我有一个网站，我正在使用**websocket**我也必须在 IE 上运行我的网站，但*IE 不支持 websocket*有没有办法在 IE 上运行 websocket？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:53:50.397

IE 版本 < 10 不支持 Websocket，但您可以使用替代技术，如 flash 或 ajax-longpolling。

我建议您使用框架，这样您就不必处理所有跨浏览器问题。一个非常好的框架是[socket.io](http://socket.io/)

2017 年编辑：这可能不再是问题，因为现在基本上[全面支持](http://caniuse.com/#search=Websocket)websocket 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:03:50.383

您可以通过High Level Logic Project的博客文章“ [Websocket Server Demonstration](http://highlevellogic.blogspot.se/2011/09/websocket-server-demonstration_26.html) ”下载在 Chrome、Firefox 和 IE（至少）中运行的网页源代码。该网页是为开发人员设置的。

确保您还单击并阅读了文章中的“（更新：MSIE 上的演示）”链接。按照简单的说明将加载允许您在 IE 中运行最新的 websockets 的 google 插件。

# php - JQuery Ajax 不更新记录

> ID：10618780
> 
> 赞同：1
> 
> 时间：2012-05-16T12:42:28.847
> 
> 标签：php, jquery

我有一些 jquery ajax 代码来更新记录，但它没有按预期工作。

这是代码：

```
 function update_records() {
    $.ajax({
  type: "POST", // Set the type then $_GET['id'] or $_POST['id']
  url: "update_record.php",
  data: { category: "John", image: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
});

}; //end function

Then the php

<?php 

  $id = $_REQUEST['id'];

  include 'config.php';

  $result = mysql_query("UPDATE mytable SET title = 'something' where id=$id"); 
  $result = mysql_query("SELECT * FROM mytable WHERE id = '$id'");             
  $array = mysql_fetch_row($result);  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:47:17.047

来自 jQuery.com [http://api.jquery.com/jQuery.ajax/的示例](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  type: "POST", // Set the type then $_GET['id'] or $_POST['id']
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

我无法理解您的查询返回什么。也许你需要选择在哪里`id = $id;`

```
 //  $id = $_POST['id'] or $_GET['id']  Where is $id??? 
  $result = mysql_query("UPDATE mytable SET title = 'something' where id=$id"); 
  $result = mysql_query("SELECT * FROM mytable WHERE id = '$id'");             
  $array = mysql_fetch_row($result);    

 //You can use mysql_error() function to see the error.
 $result = mysql_query("UPDATE mytable SET title = 'something' where id=$id") or    die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:52:05.200

我看到你有：

```
$result = mysql_query("UPDATE mytable SET title = 'something' where id=$id"); 
```

我看不出你的价值在哪里`$id`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:47:04.317

你需要

```
$id = $_REQUEST['id']; 
```

我认为您在执行更新查询之前忘记包含此行。

# servlets - 在 OSM 地图中绘制路径

> ID：10618782
> 
> 赞同：2
> 
> 时间：2012-05-16T12:42:32.960
> 
> 标签：servlets, prolog, openstreetmap, shortest-path

在 Prolog 的实验中，我想使用[OSM](http://www.openstreetmap.org/)提供的数据来计算，例如，遍历兴趣点集合的最短路径。我知道如何使用 Prolog 做到这一点，甚至知道如何从 Java servlet 访问我的 Prolog 程序（负责使用地图呈现页面，或在需要时向其提供信息）。

但是，由于我是 OSM 的新手，我仍然不知道如何让用户从地图中选择一定数量的节点，以及如何回答（我的意思是，如何在地图中绘制）遍历它们的最短路径（给定用户选择的起始节点）。有人可以告诉我如何使用 OSM 地图询问用户的许多兴趣点，然后在它们之间绘制一条路径作为答案吗？

提前致谢！

# html - horizontal scrollbar with css

> ID：10618789
> 
> 赞同：0
> 
> 时间：2012-05-16T12:43:04.783
> 
> 标签：html, css, scrollbar

I have the following html code:

```
<html>
    <body>
        <style>
            div{border:solid 1px;}
            .cool{width:400px;height:102px; overflow:auto;}
            .cool div{width:100px;height:100px;}
        </style>
        <div class="cool">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </body>
</html> 
```

[Try it here](http://jsfiddle.net/H3UWg/)

It is giving a vertical scrollbar but i want horizontal .How can i get it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:48:28.793

[http://jsfiddle.net/H3UWg/1/](http://jsfiddle.net/H3UWg/1/)

Added `display: inline-block` to `.cool div` and `white-space: nowrap` to `.cool`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:46:34.797

If you want the divs to stay inline rather than block, there are a few ways. Personally, I hate `float:left`.

Try this:

```
 .cool{width:400px;height:122px; overflow:auto;white-space:nowrap;}
    .cool div { width:100px;height:100px;display:inline-block;zoom:1;*display:inline; } 
```

Note: The `zoom:1;*display:inline;` business is an IE7 or less hack

[http://jsfiddle.net/HackedByChinese/tPb2v/](http://jsfiddle.net/HackedByChinese/tPb2v/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:53:00.153

This probably isn't what you are hoping for infact I think the other answer are better! But as an alternative, you could have a containing div inside .cool that has a predefined width.

e.g. [http://jsfiddle.net/alexkey/Vs5Wk/](http://jsfiddle.net/alexkey/Vs5Wk/)

# mysql - 如何在 Mysql 中使用行级写入或更新锁？

> ID：10618795
> 
> 赞同：1
> 
> 时间：2012-05-16T12:43:14.850
> 
> 标签：mysql

我想锁定某些特定行以进行更新或删除或插入，表的其余行应保持解锁状态，即可用于任何事务，无论是读取还是写入。如果可以，是否可以在 mysql 中使用，那么请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:46:31.103

首先，你必须使用 InnoDB 引擎，因为 MyISAM 不支持行级锁。

接下来，如果您执行更新，MySQL 将隐式锁定扫描的行。但是，如果您需要显式锁定行，则可以使用`SELECT FOR UPDATE`语句。

# .htaccess - 仅针对域的 Htaccess 301 重定向

> ID：10618797
> 
> 赞同：1
> 
> 时间：2012-05-16T12:43:24.333
> 
> 标签：.htaccess, redirect

我在 htaccess 中有一个这样的 301 重定向列表：

```
Redirect 301 /oldpage1.php http://www.domain.com/newpage1.php
Redirect 301 /oldpage2.php http://www.domain.com/newpage2.php
Redirect 301 /oldpage3.php http://www.domain.com/newpage3.php
... 
```

现在，这些页面应仅针对某个域重定向（现在还有其他域指向同一位置，例如 www.domain.com）。

例如**www.domain.com/oldpage1.php**应被重定向，但**www.sub.domain.com/oldpage1.php**不会。

那么仅对 www.domain.com 应用这些重定向的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T20:51:25.260

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$
RewriteRule ^oldpage1\.php/?$ newpage1.php [L,R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$
RewriteRule ^oldpage2\.php/?$ newpage2.php [L,R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$
RewriteRule ^oldpage3\.php/?$ newpage3.php [L,R=301] 
```

**PS：如果你有上面的几个规则，那么使用**[RewriteMap](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)会好得多。

# shell - 使用 sed 从传入流中删除换行符

> ID：10618798
> 
> 赞同：44
> 
> 时间：2012-05-16T12:43:25.920
> 
> 标签：shell, sed, csh

我是 shell 脚本的新手，我正在尝试使用 SED 从每一行中删除换行符。这是我到目前为止所做的：

```
printf "{new\nto\nlinux}" | sed ':a;N;s/\n/ /g' 
```

仅删除 Ist 换行符。我在某处找到了这个命令：

```
printf "{new\nto\nlinux}" | sed ':a;N;$!ba;s/\n/ /g' 
```

但它给出了：“ba：找不到事件。”

如果我做：

```
printf "{new\nto\nlinux}" | sed ':a;N;s/\n/ /g' | sed ':a;N;s/\n/ /g' 
```

然后它给出了正确的输出，但我正在寻找更好的东西，因为我不确定当我运行脚本时我会得到多少新字符。传入流来自 echo 或 printf 或脚本中的某个变量。提前致谢

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-16T12:45:49.387

要删除换行符，请使用 tr：

```
tr -d '\n' 
```

如果你想用一个空格替换每个换行符：

```
tr '\n' ' ' 
```

该错误`ba: Event not found`来自 csh，并且是由于 csh 试图`!ba`在您的历史列表中匹配。您可以转义`!`并编写命令：

```
sed ':a;N;$\!ba;s/\n/ /g'  # Suitable for csh only!! 
```

但是 sed 是错误的工具，最好使用更合理地处理带引号的字符串的 shell。也就是说，停止使用 csh 并开始使用 bash。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-16T12:59:48.470

这可能对您有用：

```
printf "{new\nto\nlinux}" | paste -sd' '            
{new to linux} 
```

或者：

```
printf "{new\nto\nlinux}" | tr '\n' ' '            
{new to linux} 
```

或者：

```
printf "{new\nto\nlinux}" |sed -e ':a' -e '$!{' -e 'N' -e 'ba' -e '}' -e 's/\n/ /g'
{new to linux} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T05:07:33.980

使用 perl 而不是 sed。perl 类似于 sed：

```
ubuntu@ubuntu:/$ printf "{new\nto\nlinux}" | sed 's/\n/ /g'; echo ''
{new
to
linux}
ubuntu@ubuntu:/$ printf "{new\nto\nlinux}" | perl -pe 's/\n/ /g'; echo ''
{new to linux}
ubuntu@ubuntu:/$ echo -e "new\nto\nlinux\ntest\n1\n2 3" | perl -pe 's/\n/_ _/g'; echo ''
new_ _to_ _linux_ _test_ _1_ _2 3_ _
ubuntu@ubuntu:/$ 
```

# validation - dojo中ValidationTextBox的电子邮件验证？

> ID：10618804
> 
> 赞同：0
> 
> 时间：2012-05-16T12:43:47.077
> 
> 标签：validation, dojo, dijit.form

我正在使用dojo1.7，在这里我正在寻找一个可以验证电子邮件地址的**正则表达式**`dijit.form.ValidationTextBox`，在这里我正在使用小部件。我已经用谷歌搜索了足够多的东西，但什么也没找到。

这是代码，我将**regExp**属性留空。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Email Validation</title>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7/dijit/themes/claro/claro.css">
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.js" data-dojo-config="async: true, parseOnLoad: true"></script>
    <script>
        require(["dojo/parser", "dijit/form/ValidationTextBox"]);
    </script>
</head>
<body class="claro">
    <label for="email">Enter your Email Address:</label>
    <input type="text" name="email" value=""
    data-dojo-type="dijit.form.ValidationTextBox"
    data-dojo-props="regExp:'', required:true, invalidMessage:'Invalid Email Address.'">
</body>
</html> 
```

请有人帮我找到正则表达式。！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T02:32:44.573

如果您想验证可选的电子邮件地址，只需使用以下 JavaScript 代码。

```
dijit.byId("newuser_email2").validator = function(value, constraints){
    if(value == ''){
      return true;
    }
    return dojox.validate.isEmailAddress(value, constraints);
} 
```

请记住在我使用的情况下替换您的输入 id `newuser_email2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:46:21.493

`dojox.validate.regexp`有一些常见数据的正则表达式，包括电子邮件

```
regExp: dojox.validate.regexp.emailAddress 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T14:14:25.503

```
 var emailField = new ValidationTextBox({
        required: true,
        validator: validateWeb.isEmailAddress
    }, "emailField"); 
```

# python - 在 PyCLIPS 中注册 Python 方法的装饰器

> ID：10618805
> 
> 赞同：1
> 
> 时间：2012-05-16T12:43:48.937
> 
> 标签：python, introspection, clips, pyclips

我利用 PyCLIPS 将 CLIPS 集成到 Python 中。Python 方法在 CLIPS 中使用`clips.RegisterPythonFunction(method, optional-name)`. 由于我要注册几个函数并且想保持代码清晰，所以我正在寻找一个装饰器来进行注册。

现在是这样完成的：

```
class CLIPS(object):
...
    def __init__(self, data):
        self.data = data
        clips.RegisterPythonFunction(self.pyprint, "pyprint")
    def pyprint(self, value):
        print self.data, "".join(map(str, value)) 
```

这就是我想做的事情：

```
class CLIPS(object):
...
    def __init__(self, data):
        self.data = data
        #clips.RegisterPythonFunction(self.pyprint, "pyprint")
    @clips_callable
    def pyprint(self, value):
        print self.data, "".join(map(str, value)) 
```

它保留方法的编码并将它们注册在一个地方。

注意：我在多处理器设置中使用它，其中 CLIPS 进程在一个单独的进程中运行，如下所示：

```
import clips
import multiprocessing

class CLIPS(object):
    def __init__(self, data):
        self.environment = clips.Environment()
        self.data = data
        clips.RegisterPythonFunction(self.pyprint, "pyprint")
        self.environment.Load("test.clp")
    def Run(self, cycles=None):
        self.environment.Reset()
        self.environment.Run()
    def pyprint(self, value):
        print self.data, "".join(map(str, value))

class CLIPSProcess(multiprocessing.Process):
    def run(self):
        p = multiprocessing.current_process()
        self.c = CLIPS("%s %s" % (p.name, p.pid))
        self.c.Run()

if __name__ == "__main__":
    p = multiprocessing.current_process()
    c = CLIPS("%s %s" % (p.name, p.pid))
    c.Run()
    # Now run CLIPS from another process
    cp = CLIPSProcess()
    cp.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:57:18.970

这样做应该相当简单：

```
# mock clips for testing
class clips:
    @staticmethod
    def RegisterPythonFunction(func, name):
        print "register: ", func, name

def clips_callable(fnc):
    clips.RegisterPythonFunction(fnc, fnc.__name__)
    return fnc

@clips_callable
def test(self):
    print "test"

test() 
```

编辑：如果在类方法上使用它只会注册未绑定的方法。因此，如果在没有类实例作为第一个参数的情况下调用函数，它将不起作用。因此，这可用于注册模块级函数，但不能用于注册类方法。为此，您必须在`__init__`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:43:13.813

mata 提出的优雅解决方案似乎行不通，因为 CLIPS 环境应该在向其注册方法之前进行初始化。
我不是 Python 专家，但从一些搜索来看，[inspect.getmembers()](http://docs.python.org/library/inspect.html#inspect.getmembers)和[hasattr()](https://stackoverflow.com/questions/610883/how-to-know-if-an-object-has-an-attribute-in-python)的组合似乎可以为您解决问题 - 您可以循环类的所有成员，并注册具有该`@clips_callable`属性的成员到剪辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:48:30.417

现在通过使用装饰器设置要在 CLIPS 中注册的方法的属性并在**init**中使用检查来获取方法并注册它们，它现在可以工作了。也可以使用一些命名策略，但我更喜欢使用装饰器来使注册更加明确。可以在初始化 CLIPS 环境之前注册 Python 函数。这就是我所做的。

```
import inspect

def clips_callable(func):
    from functools import wraps
    @wraps(func)
    def wrapper(*__args,**__kw):
        return func(*__args,**__kw)
    setattr(wrapper, "clips_callable", True)
    return wrapper

class CLIPS(object):
    def __init__(self, data):
        members = inspect.getmembers(self, inspect.ismethod)
        for name, method in members:
            try:
                if method.clips_callable:
                    clips.RegisterPythonFunction(method, name)
            except:
                pass
...
    @clips_callable
    def pyprint(self, value):
        print self.data, "".join(map(str, value)) 
```

为了完整起见，下面包含 test.clp 中的 CLIPS 代码。

```
(defrule MAIN::start-me-up
    =>
    (python-call pyprint "Hello world")
) 
```

如果有人知道更优雅的方法，请告诉我。

# iphone - 如何以编程方式检查用户是否登录到应用商店

> ID：10618806
> 
> 赞同：4
> 
> 时间：2012-05-16T12:43:54.413
> 
> 标签：iphone, ios, ipad

我想通过我的应用程序检查是否有任何用户登录到应用商店。我不确定苹果是否提供了任何条款来检查这一点。我想商店套件可能对我有帮助，但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T12:47:23.750

你不能那样做。StoreKit 框架仅用于为您的应用提供应用内购买功能。不是用户与应用商店的会话状态。

# oracle - Oracle 触发器效率与计划作业

> ID：10618807
> 
> 赞同：2
> 
> 时间：2012-05-16T12:43:55.937
> 
> 标签：oracle

由于最终用户的键盘配置不正确，某些无效字符有时会插入到数据库中。

我们有一个 pl/sql 脚本，它遍历所有列并替换无效字符。该脚本只需不到一分钟即可完成（但我们的系统仍处于测试阶段，并未广泛使用）。

一种解决方案是创建一个触发器，在插入表之前替换无效字符，一种解决方案是使用计划作业来运行所谓的脚本。

哪一个更有效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:58:02.283

如果您使用计划作业，则无效字符仍会在一段时间内出现在您的数据中。如果不是这种情况非常重要，请使用触发器。触发器将确保数据库仅包含有效字符。

我不认为效率在这里很重要。触发器可以轻松跟上用户的数据输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:48:27.610

老实说，不是触发器的粉丝。

您可以通过提供标识需要更新的行的索引来提高计划作业的效率。

一般来说，语法类似于：

```
create index my_speshul_index on my_table(
  case when some_expression then 1 else null end); 
```

some_expression 是检测这些字符是否存在的表达式——可能是一个 regexp_like。

然后你会查询：

```
select ... from my_table
where case when some_expression then 1 else null end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:15:07.733

另一种方法是允许数据按原始类型进入数据库，但创建一个包含已清理数据的虚拟列。

但是，这只有在问题仅限于几列时才可行。由于它可以是所有用户可输入的列，因此带有 regexp_replace 的触发器似乎是最好的方法。根据您允许的字符，它可以像一系列语句一样简单，例如

```
 :new.columnA := regexp_replace(:new.ColumnA,'[^[:print:]]',''); 
```

也就是说，只需删除所有不可打印的字符。

# android - 单击以选择微调器异常

> ID：10618808
> 
> 赞同：1
> 
> 时间：2012-05-16T12:44:01.557
> 
> 标签：android, arrays, spinner, selection, adapter

我有一个微调器，当我通过微调器在数据库中插入值时它工作正常，但是当我从数据库中获取值并将索引传递给微调器时它也可以工作，但是当我单击它来更改值时它会给出错误 Java Null Pointer Exception . 请帮帮我。

```
array_spinner=new String[4];
        array_spinner[0]= sing.gs.getApplicator1();
        array_spinner[1]= sing.gs.getApplicator2();
        array_spinner[2]= sing.gs.getApplicator3();
        array_spinner[3]= sing.gs.getApplicator4();
        app = (Spinner) findViewById(R.id.spnr_app);

        ArrayAdapter adapter = new ArrayAdapter(this,
        android.R.layout.simple_spinner_item, array_spinner);
        app.setAdapter(adapter);

        //singleton check
         if (sing.savedRecord)
            {
                getSetting();
            } 
```

获取设置方法

```
private void getSetting()
{
    try
    {

        app.setSelection(Integer.valueOf(sing.gs.getApplicator_name()));
        datePicker.setText(sing.gs.getSpray_date().toString());

    }
    catch (Exception e)
    {
        Log.e("Retrieve Error", e.toString());
        e.printStackTrace();
    }
} 
```

LOGCAT

```
05-16 17:32:58.511: E/AndroidRuntime(910): FATAL EXCEPTION: main
05-16 17:32:58.511: E/AndroidRuntime(910): java.lang.NullPointerException
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java:376)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:332)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.Spinner$DropDownAdapter.getView(Spinner.java:328)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.AbsListView.obtainView(AbsListView.java:1409)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.ListView.onMeasure(ListView.java:1127)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.View.measure(View.java:8313)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.View.measure(View.java:8313)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
05-16 17:32:58.511: E/AndroidRuntime(910):  at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.View.measure(View.java:8313)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.View.measure(View.java:8313)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.View.measure(View.java:8313)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.os.Looper.loop(Looper.java:123)
05-16 17:32:58.511: E/AndroidRuntime(910):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-16 17:32:58.511: E/AndroidRuntime(910):  at java.lang.reflect.Method.invokeNative(Native Method)
05-16 17:32:58.511: E/AndroidRuntime(910):  at java.lang.reflect.Method.invoke(Method.java:507)
05-16 17:32:58.511: E/AndroidRuntime(910):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-16 17:32:58.511: E/AndroidRuntime(910):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-16 17:32:58.511: E/AndroidRuntime(910):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:16:15.457

请检查它的外观，您的 sing.gs.getApplicator1(); 之一 值为 null .. 请检查所有 sing.gs.getApplicator ..........

原因：转到第 394 行（您的 sdk ArrayAdepter 的第 328 行）

[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)

第394章

所以这里的文本可能为空或项目可能为空。

但是您使用的是内置布局，因此文本不应为空，因此项目可以为空...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:56:39.713

发布您的完整代码和详细说明，这是一个示例微调器，希望对您有所帮助，

```
spinnerSize = (Spinner) findViewById(R.id.spinnerSize);
    sizeArray = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_dropdown_item, size);
    spinnerSize.setAdapter(sizeArray);
    spinnerSize.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> parent, View v, int pos,
                long id) {
            if (sizeCount != 0) {
                Constants.enhancedImage.setTextSize(size[pos]);
                receiver.setTextSize(Integer.parseInt(size[pos]));
                sender.setTextSize(Integer.parseInt(size[pos]));
                message.setTextSize(Integer.parseInt(size[pos]));
            }
            sizeCount++;
        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

和 String size[] 是，

```
String[] size = { "10", "12", "14", "16", "18", "20", "22"}; 
```

# c# - 如何将值从 asp.net 子页面传递到父页面

> ID：10618819
> 
> 赞同：1
> 
> 时间：2012-05-16T12:44:36.813
> 
> 标签：c#, asp.net, return-value, parent-child, popupwindow

我有两个网页，`Page1`和`Page2`，它们都可以打开同一个子弹出页面。

如果父页面是`Page1`我希望来自子页面的某些输入返回到父页面，如果父页面是`Page2`我希望返回其他信息。

我确实确定谁是父页面以及如何将输入返回给它并让它显示在正确的文本框或 DroDownList 中？

我尝试`Request.UrlReferrer`将结果放入字符串变量中，但出现错误“对象未设置为实例”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:47:41.043

由于两个页面都可以是父页面，因此编写一个 javascript 函数，该函数在两个页面上都用作接收器，并根据您的要求在其中编写代码。

例如

父页面上的javascript：

```
SetDataFromPopup(data)
{
    document.getElementById('TextBox1ClientId').value = data;
} 
```

在弹出窗口中写入以下行

```
window.opener.SetDataFromPopup(data); 
```

这应该在您要传递数据的事件上调用，例如假设您在客户端单击时有一个按钮要传递数据，代码应如下所示：

```
<input id="btnSave" type="submit" onclick="window.opener.SetDataFromPopup(data);" >Save</input> 
```

# android - facebook 和 twitter appid 和 app secretid

> ID：10618821
> 
> 赞同：0
> 
> 时间：2012-05-16T12:44:38.090
> 
> 标签：android, ios, facebook, twitter

我正在 Android 和 iPhone 上开发一个应用程序。在这个应用程序中，我同时集成了 Facebook 和 twitter。我的问题是：是否可以为 Android 和 iPhone 使用相同的 Facebook App ID。以及 iPhone 和 Android 的相同 Twitter App ID 和 App Secret？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:53:34.307

是的，您可以在 android 和 iOS 中使用相同的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:54:13.447

您可以使用相同的应用程序 ID 没问题。请记住此应用程序 ID 不是特定于操作系统的

# html - 操作文本位置 CSS/HTML

> ID：10618826
> 
> 赞同：1
> 
> 时间：2012-05-16T12:44:45.067
> 
> 标签：html, css, image, text

我正在构建一个垂直导航栏，无法根据需要格式化图像旁边的文本。我可以使用边距操纵图像。我在我想要的地方得到了它。现在，我尝试操纵文本边距，但没有任何效果。看起来是这样的......

![例子](../Images/bcb11b8b9000329849aca346d1b9c979.png)

HTML：

```
<div class="content_nav">
  <div class="content_nav_item"><a href="#"><img src="images/icon.jpg" height="60px" width="60px" alt="One"><span class="content_nav_item_text">One</span></a></div>
  <div class="content_nav_hr">&nbsp;</div>
  <div class="content_nav_item"><a href="#"><img src="images/icon.jpg" height="60px" width="60px" alt="One"><span class="content_nav_item_text">One</span></a></div>
  <div class="content_nav_hr">&nbsp;</div>
  <div class="content_nav_item"><a href="#"><img src="images/icon.jpg" height="60px" width="60px" alt="One"><span class="content_nav_item_text">One</span></a></div>
  <div class="content_nav_hr">&nbsp;</div>
  <div class="content_nav_item"><a href="#"><img src="images/icon.jpg" height="60px" width="60px" alt="One"><span class="content_nav_item_text">One</span></a></div>
</div> 
```

CSS：

```
.content_nav{
margin:45px 0px 45px 48px;
padding:0px;
width:232px;
height:467px;
background-color:#82c738;
box-shadow:inset 0px 0px 10px #578e30;
float:left;
}
.content_nav_item {
margin:0px 10px 0px 10px;
padding:0px;
height:115px;
}
.content_nav_hr {
margin:0px 10px 0px 10px;
padding:0px;
height:1px;
width:202px;
background-color:#A0DF5C;
}

.content_nav_item_text {
margin:10px 0px 10px 0px;
padding:0px;
}
.content_nav_item img {
margin:28px 10px 0px 20px;
padding:0px;
display:inline;
} 
```

关于为什么我不能定位那个跨度的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:50:10.677

文本在 CSS 中是一种奇怪的鸟，它没有按照你的想法或想要的方式处理。[这是一篇很好的文章](http://phrogz.net/css/vertical-align/index.html)，解释了垂直文本对齐的特性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:54:49.387

文本位于`span`标签之间。这个标签在`a`标签和`div`标签之间。你需要把它们分开。他们正在堆叠文本，并阻止文本移动。

您需要“结束”`img`标签

# php - 试图将一些 PHP 数组代码转换为 VB.NET

> ID：10618827
> 
> 赞同：0
> 
> 时间：2012-05-16T12:44:50.333
> 
> 标签：php, vb.net, arrays

**编辑**

好的，所以在解决了一段时间之后，我想出了一个可行的解决方案，而且它比我最初想象的要干净。谢谢你们的帮助。这是代码。

```
Function Program_Search() As String()
    'An ArrayList of Objects containing strings for each row.
    'So the result is ArrayList(objRow1(strID, strPrograms), objRow2(strID, strPrograms).. etc)
    Dim program_results As ArrayList = Get_Results("SELECT ID, Programs FROM tbMetrics ORDER BY ID ASC", strConnectionString)

    'Initialize the list of programs. This will contian the tbMetrics Programs that match the selected Program name.
    Dim programs As ArrayList = New ArrayList

    'Loop through each row selected
    For Each row As Object In program_results
        'Not currently used.
        Dim strID As String = row(0).ToString

        'An integer representation of a binary number. Each digit represents a different program being checked.
        Dim intPrograms As Integer = CInt(row(1).ToString)

        'Convert number to binary string (reversed)
        Dim strReversed As String = StrReverse(Convert.ToString(intPrograms, 2))

        'Loop through each of the programs in the drop down box which should contain all of the possible choices in order.
        For index As Integer = 0 To ddlPrograms.Items.Count - 1
            'A bit of an ugly if state that checks for a 1 in the binary position for the selected program.
            'Then if it's selected, it checks that the program matches the one selected by the user.
            'Finally, it makes sure it doesn't add the same number to the array.
            If (strReversed.Length - 1) >= index _
                And strReversed(index) = "1" _
                And ddlPrograms.SelectedValue.ToString = ddlPrograms.Items(index).Value.ToString _
                And programs.Contains(intPrograms) = False Then

                'If it passes all of the above checks, then finally add the program integer to the arraylist.
                programs.Add(intPrograms)
            End If
        Next index
    Next row

    'Return the list of programs as an array, to be used with SQL IN().
    Return programs.ToArray
End Function 
```

**结束编辑**

**原文如下**

好的，所以我是一名 PHP 程序员，正在尝试学习一些 VB.NET。数组在 VB.NET 中让我非常困惑，所以我以我知道的方式用 PHP 编写了一些示例代码。如果有人能告诉我它在 VB.NET 中的正确工作方式，我将不胜感激。

```
<?php

function get_result() {
    $result = query("SELECT id, value FROM test_table");
    /*Returned as:
    array(
      array("id1", "value1"), 
      array("id2", "value2")...etc.
    )*/

    $haystack_top = array();

    foreach ($result as $row) {
        $id = $row[0]; //Not used currently
        $value = $row[1];

        for($i=0; $i <= $value; $i++) {
            if (check_value($i)) {
                $haystack_value = get_new_value($i);
                $haystack_top[$value][] = $haystack_value;
            }
        }
    }

    $needle = get_needle();

    $result = array();

    foreach ($haystack_top as $value=>$haystack) {
        if (in_array($needle, $haystack)) {
            $result[] = $value;
        }
    }

    return array_unique($result);
}

?> 
```

这是我在 Vb.NET 中工作的一个较旧的、未完成的副本。它不是我真正需要的形式，因为我在构建 PHP 示例时更改了逻辑的工作方式，但它显示了我在使用数组时遇到的困惑在 VB.NET 中。

```
Function Program_Search() As String()
    Dim program_results As Object = Get_Results("SELECT ID, Programs FROM tbMetrics ORDER BY ID ASC", strConnectionString)

    'Create an array of strings to fill with potential field results.
    Dim fields As List(Of String) = New List(Of String)()

    For Each row As Object In program_results
        Dim strID As String = row(0).ToString
        Dim strPrograms As String = row(1).ToString

        Dim intPrograms As Integer = CInt(strPrograms)

        'Convert number to binary string (reversed)
        Dim strReversed As String = StrReverse(Convert.ToString(intPrograms, 2))

        For index As Integer = 0 To ddlPrograms.Items.Count - 1
            If (strReversed.Length - 1) >= index Then
                If strReversed(index) = "1" Then
                    fields.Add(ddlPrograms.Items(index).Value.ToString)
                End If
            End If
        Next index
    Next row

    Dim programs As String() = fields.ToArray

    Dim results As String()

    If programs.Contains(ddlPrograms.SelectedValue.ToString) Then

    End If

    Return programs
End Function 
```

因为有人对 Get_Results 函数感到好奇，所以这里是它的代码。

```
'Runs the passed query and returns each row as an object within an ArrayList
    Function Get_Results(ByVal query As String, ByVal ConnectionStringName As String) As ArrayList
        Dim sqlComm As Data.SqlClient.SqlCommand = Get_Connection(query, ConnectionStringName)

        'Open that connection
        sqlComm.Connection.Open()

        'Execute the query and store all of the results into the SqlDataReader.
        Dim sqlRead As Data.SqlClient.SqlDataReader = sqlComm.ExecuteReader()

        Dim result As ArrayList = New ArrayList

        'Read each row one by one.
        While sqlRead.Read()
            'Create an object of the size needed.
            Dim row(sqlRead.FieldCount - 1) As Object

            'Fill the row object with the values.
            sqlRead.GetValues(row)

            'Add the result object to the array.
            result.Add(row)
        End While

        'Close all open connections to the database.
        sqlRead.Close()
        sqlComm.Connection.Close()

        Return result
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T14:19:25.427

基于此评论“......老实说，我只是很困惑如何在 VB.NET 中正确创建动态多维数组，以及如何像在我的 PHP 示例中那样使用它们......”，我会提供我的答案。

您的线路：

```
 Dim fields As List(Of String) = New List(Of String)() 
```

创建一个列表，而不是一个数组。列表更易于使用，因为您可以添加项目而无需调整大小。`List(Of MyObject)`如果你想这样做而不是二维数组，你可以做一个。只需创建一个包含两个字段的类并列出这些对象。你的课程大约有 4 行代码。

要创建一个 2D 数组，就像你正在做的那样，你应该在这里找到你需要的一切。

[http://msdn.microsoft.com/en-us/library/d2de1t93(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/d2de1t93(v=vs.90).aspx)

不幸的是，要创建动态 2D 数组，没有简化的方法可以做到这一点。如果我没记错的话，您必须将元素复制到另一个数组。这很蹩脚，我知道。这就是为什么我喜欢这种`List(Of MyObject)`方法，因为您可以`MyList.Add(myObject)`在创建新项目时使用。

如果您需要稍后遍历项目以检索值，则可以使用 for 循环并按如下方式访问它们：

```
MyList(i).MyObjectPropertyName1
MyList(i).MyObjectPropertyName2 
```

VB.NET 可能是可读性更强的语言之一，但对于任何一种语言，您都必须习惯它。我看着你的 PHP，我的头几乎要爆炸了。我敢肯定，如果我花几个小时学习语法，它会（更）有意义。

# javascript - 在javascript中重命名文件

> ID：10618828
> 
> 赞同：2
> 
> 时间：2012-05-16T12:44:56.950
> 
> 标签：javascript, activex, file-rename

我想问如果我想用javascript重命名一个文件，我该怎么办？我尝试了一个我在网上看到但无法工作的功能。

```
function ChangeFileName()
{
    var fso, f;
    fso = new ActiveXObject("Scripting.FileSystemObject");
    f = fso.GetFile("FilePath/MyFile.txt");
    f.name = "MyFile.htm";
} 
```

我在网上搜索，它说 ActiveXObject 仅适用于 IE，我打算在 mozilla 上使用它，因为 mozilla 带有 ubuntu。

除此之外，是否有任何方法可以重命名 javascript 中的文件？在此先感谢您的帮助 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:51:30.383

它是 Javascript（在浏览器中），对吧？

如果您在浏览器中运行，出于安​​全原因，它是不允许的。我认为有一些方法可以使用 IE 和 ActiveX 来做到这一点，但使用纯 Javascript 我认为这是不可能的。

但是您可以在控制台中的 JScript 中执行操作，例如删除单个文件：

```
function MoveFile2Desktop(filespec)
{
   var fso;
   fso = new ActiveXObject("Scripting.FileSystemObject");
   fso.MoveFile(filespec, "newname");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T12:48:08.510

不，您不能使用 javascript 重命名文件。Javascript 无法以任何方式与用户的计算机进行交互——它仅用于与呈现它的网页的内容进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:52:31.517

JavaScript 没有与文件系统交互的内置方法。

宿主对象可能会提供这样的方法。

`window`可用于从典型 Web 浏览器中的网页加载的 JavaScript的宿主对象 ( ) 不公开此类对象。网页不允许编辑访问他们网站的人的磁盘。（IE 例外，带有 ActiveX 和一些安全警告）。

如果您在浏览器扩展或不同的环境（例如 node.js）中运行 JavaScript，那么它可能是可能的。

# ruby-on-rails-3.1 - 如何使用夹具进行测试和开发轨道

> ID：10618832
> 
> 赞同：4
> 
> 时间：2012-05-16T12:45:14.907
> 
> 标签：ruby-on-rails-3.1, fixtures, seed

我知道 seed.rb 用于为数据库播种生产应用程序的数据。

我想创建一些用于测试和开发的数据。

我应该把代码放在哪里来创建这些数据？

谢谢

导轨 3.2

# html - 960个网格系统嵌套网格单元

> ID：10618836
> 
> 赞同：0
> 
> 时间：2012-05-16T12:45:36.277
> 
> 标签：html, css, grid, nested, 960.gs

我正在尝试将嵌套网格与 960 网格系统一起使用，根据 960.gs 网站，如果第一个孩子被分配了 alpha 类并且最后一个孩子被分配了 omega 类，那么它应该可以正常工作。但是，我发现即使使用这些类，第一个子网格也会出现在正确的位置，而任何其他子网格都会出现轻微偏移。可以在[这里](http://jsfiddle.net/xXgzK/)看到一个例子：

HTML：

```
<html>
<head>
    <title>Test</title>
</head>
<body>
    <div class="container_12" style="background:#454545">
        <div class="grid_12" id="wrapper">
            <div class="grid_12 alpha row highlight">
            1
            </div>
            <div class="grid_12 omega row highlight">
            2
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
/*
  960 Grid System ~ Core CSS.
  Learn more ~ http://960.gs/

  Licensed under GPL and MIT.
*/

/*
  Forces backgrounds to span full width,
  even if there is horizontal scrolling.
  Increase this if your layout is wider.

  Note: IE6 works fine without this fix.
*/

body {
  min-width: 960px;
}

/* `Container
----------------------------------------------------------------------------------------------------*/

.container_12,
.container_16 {
  margin-left: auto;
  margin-right: auto;
  width: 960px;
}

/* `Grid >> Global
----------------------------------------------------------------------------------------------------*/

.grid_1,
.grid_2,
.grid_3,
.grid_4,
.grid_5,
.grid_6,
.grid_7,
.grid_8,
.grid_9,
.grid_10,
.grid_11,
.grid_12,
.grid_13,
.grid_14,
.grid_15,
.grid_16 {
  display: inline;
  float: left;
  margin-left: 10px;
  margin-right: 10px;
}

.push_1, .pull_1,
.push_2, .pull_2,
.push_3, .pull_3,
.push_4, .pull_4,
.push_5, .pull_5,
.push_6, .pull_6,
.push_7, .pull_7,
.push_8, .pull_8,
.push_9, .pull_9,
.push_10, .pull_10,
.push_11, .pull_11,
.push_12, .pull_12,
.push_13, .pull_13,
.push_14, .pull_14,
.push_15, .pull_15 {
  position: relative;
}

.container_12 .grid_3,
.container_16 .grid_4 {
  width: 220px;
}

.container_12 .grid_6,
.container_16 .grid_8 {
  width: 460px;
}

.container_12 .grid_9,
.container_16 .grid_12 {
  width: 700px;
}

.container_12 .grid_12,
.container_16 .grid_16 {
  width: 940px;
}

/* `Grid >> Children (Alpha ~ First, Omega ~ Last)
----------------------------------------------------------------------------------------------------*/

.alpha {
  margin-left: 0;
}

.omega {
  margin-right: 0;
}

/* `Grid >> 12 Columns
----------------------------------------------------------------------------------------------------*/

.container_12 .grid_1 {
  width: 60px;
}

.container_12 .grid_2 {
  width: 140px;
}

.container_12 .grid_4 {
  width: 300px;
}

.container_12 .grid_5 {
  width: 380px;
}

.container_12 .grid_7 {
  width: 540px;
}

.container_12 .grid_8 {
  width: 620px;
}

.container_12 .grid_10 {
  width: 780px;
}

.container_12 .grid_11 {
  width: 860px;
}

/* `Grid >> 16 Columns
----------------------------------------------------------------------------------------------------*/

.container_16 .grid_1 {
  width: 40px;
}

.container_16 .grid_2 {
  width: 100px;
}

.container_16 .grid_3 {
  width: 160px;
}

.container_16 .grid_5 {
  width: 280px;
}

.container_16 .grid_6 {
  width: 340px;
}

.container_16 .grid_7 {
  width: 400px;
}

.container_16 .grid_9 {
  width: 520px;
}

.container_16 .grid_10 {
  width: 580px;
}

.container_16 .grid_11 {
  width: 640px;
}

.container_16 .grid_13 {
  width: 760px;
}

.container_16 .grid_14 {
  width: 820px;
}

.container_16 .grid_15 {
  width: 880px;
}

/* `Prefix Extra Space >> Global
----------------------------------------------------------------------------------------------------*/

.container_12 .prefix_3,
.container_16 .prefix_4 {
  padding-left: 240px;
}

.container_12 .prefix_6,
.container_16 .prefix_8 {
  padding-left: 480px;
}

.container_12 .prefix_9,
.container_16 .prefix_12 {
  padding-left: 720px;
}

/* `Prefix Extra Space >> 12 Columns
----------------------------------------------------------------------------------------------------*/

.container_12 .prefix_1 {
  padding-left: 80px;
}

.container_12 .prefix_2 {
  padding-left: 160px;
}

.container_12 .prefix_4 {
  padding-left: 320px;
}

.container_12 .prefix_5 {
  padding-left: 400px;
}

.container_12 .prefix_7 {
  padding-left: 560px;
}

.container_12 .prefix_8 {
  padding-left: 640px;
}

.container_12 .prefix_10 {
  padding-left: 800px;
}

.container_12 .prefix_11 {
  padding-left: 880px;
}

/* `Prefix Extra Space >> 16 Columns
----------------------------------------------------------------------------------------------------*/

.container_16 .prefix_1 {
  padding-left: 60px;
}

.container_16 .prefix_2 {
  padding-left: 120px;
}

.container_16 .prefix_3 {
  padding-left: 180px;
}

.container_16 .prefix_5 {
  padding-left: 300px;
}

.container_16 .prefix_6 {
  padding-left: 360px;
}

.container_16 .prefix_7 {
  padding-left: 420px;
}

.container_16 .prefix_9 {
  padding-left: 540px;
}

.container_16 .prefix_10 {
  padding-left: 600px;
}

.container_16 .prefix_11 {
  padding-left: 660px;
}

.container_16 .prefix_13 {
  padding-left: 780px;
}

.container_16 .prefix_14 {
  padding-left: 840px;
}

.container_16 .prefix_15 {
  padding-left: 900px;
}

/* `Suffix Extra Space >> Global
----------------------------------------------------------------------------------------------------*/

.container_12 .suffix_3,
.container_16 .suffix_4 {
  padding-right: 240px;
}

.container_12 .suffix_6,
.container_16 .suffix_8 {
  padding-right: 480px;
}

.container_12 .suffix_9,
.container_16 .suffix_12 {
  padding-right: 720px;
}

/* `Suffix Extra Space >> 12 Columns
----------------------------------------------------------------------------------------------------*/

.container_12 .suffix_1 {
  padding-right: 80px;
}

.container_12 .suffix_2 {
  padding-right: 160px;
}

.container_12 .suffix_4 {
  padding-right: 320px;
}

.container_12 .suffix_5 {
  padding-right: 400px;
}

.container_12 .suffix_7 {
  padding-right: 560px;
}

.container_12 .suffix_8 {
  padding-right: 640px;
}

.container_12 .suffix_10 {
  padding-right: 800px;
}

.container_12 .suffix_11 {
  padding-right: 880px;
}

/* `Suffix Extra Space >> 16 Columns
----------------------------------------------------------------------------------------------------*/

.container_16 .suffix_1 {
  padding-right: 60px;
}

.container_16 .suffix_2 {
  padding-right: 120px;
}

.container_16 .suffix_3 {
  padding-right: 180px;
}

.container_16 .suffix_5 {
  padding-right: 300px;
}

.container_16 .suffix_6 {
  padding-right: 360px;
}

.container_16 .suffix_7 {
  padding-right: 420px;
}

.container_16 .suffix_9 {
  padding-right: 540px;
}

.container_16 .suffix_10 {
  padding-right: 600px;
}

.container_16 .suffix_11 {
  padding-right: 660px;
}

.container_16 .suffix_13 {
  padding-right: 780px;
}

.container_16 .suffix_14 {
  padding-right: 840px;
}

.container_16 .suffix_15 {
  padding-right: 900px;
}

/* `Push Space >> Global
----------------------------------------------------------------------------------------------------*/

.container_12 .push_3,
.container_16 .push_4 {
  left: 240px;
}

.container_12 .push_6,
.container_16 .push_8 {
  left: 480px;
}

.container_12 .push_9,
.container_16 .push_12 {
  left: 720px;
}

/* `Push Space >> 12 Columns
----------------------------------------------------------------------------------------------------*/

.container_12 .push_1 {
  left: 80px;
}

.container_12 .push_2 {
  left: 160px;
}

.container_12 .push_4 {
  left: 320px;
}

.container_12 .push_5 {
  left: 400px;
}

.container_12 .push_7 {
  left: 560px;
}

.container_12 .push_8 {
  left: 640px;
}

.container_12 .push_10 {
  left: 800px;
}

.container_12 .push_11 {
  left: 880px;
}

/* `Push Space >> 16 Columns
----------------------------------------------------------------------------------------------------*/

.container_16 .push_1 {
  left: 60px;
}

.container_16 .push_2 {
  left: 120px;
}

.container_16 .push_3 {
  left: 180px;
}

.container_16 .push_5 {
  left: 300px;
}

.container_16 .push_6 {
  left: 360px;
}

.container_16 .push_7 {
  left: 420px;
}

.container_16 .push_9 {
  left: 540px;
}

.container_16 .push_10 {
  left: 600px;
}

.container_16 .push_11 {
  left: 660px;
}

.container_16 .push_13 {
  left: 780px;
}

.container_16 .push_14 {
  left: 840px;
}

.container_16 .push_15 {
  left: 900px;
}

/* `Pull Space >> Global
----------------------------------------------------------------------------------------------------*/

.container_12 .pull_3,
.container_16 .pull_4 {
  left: -240px;
}

.container_12 .pull_6,
.container_16 .pull_8 {
  left: -480px;
}

.container_12 .pull_9,
.container_16 .pull_12 {
  left: -720px;
}

/* `Pull Space >> 12 Columns
----------------------------------------------------------------------------------------------------*/

.container_12 .pull_1 {
  left: -80px;
}

.container_12 .pull_2 {
  left: -160px;
}

.container_12 .pull_4 {
  left: -320px;
}

.container_12 .pull_5 {
  left: -400px;
}

.container_12 .pull_7 {
  left: -560px;
}

.container_12 .pull_8 {
  left: -640px;
}

.container_12 .pull_10 {
  left: -800px;
}

.container_12 .pull_11 {
  left: -880px;
}

/* `Pull Space >> 16 Columns
----------------------------------------------------------------------------------------------------*/

.container_16 .pull_1 {
  left: -60px;
}

.container_16 .pull_2 {
  left: -120px;
}

.container_16 .pull_3 {
  left: -180px;
}

.container_16 .pull_5 {
  left: -300px;
}

.container_16 .pull_6 {
  left: -360px;
}

.container_16 .pull_7 {
  left: -420px;
}

.container_16 .pull_9 {
  left: -540px;
}

.container_16 .pull_10 {
  left: -600px;
}

.container_16 .pull_11 {
  left: -660px;
}

.container_16 .pull_13 {
  left: -780px;
}

.container_16 .pull_14 {
  left: -840px;
}

.container_16 .pull_15 {
  left: -900px;
}

/* `Clear Floated Elements
----------------------------------------------------------------------------------------------------*/

/* http://sonspring.com/journal/clearing-floats */

.clear {
  clear: both;
  display: block;
  overflow: hidden;
  visibility: hidden;
  width: 0;
  height: 0;
}

/* http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified */

.clearfix:before,
.clearfix:after,
.container_12:before,
.container_12:after,
.container_16:before,
.container_16:after {
  content: '.';
  display: block;
  overflow: hidden;
  visibility: hidden;
  font-size: 0;
  line-height: 0;
  width: 0;
  height: 0;
}

.clearfix:after,
.container_12:after,
.container_16:after {
  clear: both;
}

/*
  The following zoom:1 rule is specifically for IE6 + IE7.
  Move to separate stylesheet if invalid CSS is a problem.
*/

.clearfix,
.container_12,
.container_16 {
  zoom: 1;
}    

html,body {
        margin:0;
    }

    #wrapper {

    }

    .row {
        margin-bottom:10px;
    }

    .highlight {
        background:yellow;
    } 
```

有没有人解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:24:19.367

首先，您误`grid_12`用了应该`container_12`在包装器中使用的位置。

此外，alpha 和 omega 类是为对齐的单元格设计的，这意味着两个`grid_12`div 不能在 container_12 div 内对齐（这将是 24 列，这不适合）

最后，据我了解，您似乎想将其变成两个对齐的`grid_6`div

希望这可以帮助 ！

# r - 连接两个部分数据表，保留所有 x 和所有 y

> ID：10618837
> 
> 赞同：3
> 
> 时间：2012-05-16T12:45:37.093
> 
> 标签：r, data.table

我在 R 中有两个 data.tables，它们有一组相同的列。它们包含一些具有重叠键的行，并且每个表都包含一些唯一的行。我想对重叠的行求和，并保留每个表中的所有唯一行。

```
data.table.a
Key Total
  1     2
  3     1
  4     3
  5     1

data.table.b
Key Total
  2     5
  3     1
  5     2

result
Key Total
  1     2
  2     5
  3     2
  4     3
  5     3 
```

我怎样才能做到这一点？`data.table.a[data.table.b]`仅执行左连接，并且`data.table.a + data.table.b`由于行数不同而无法工作。

编辑：添加了可重现的代码：

```
data.table.a <- data.table(Key=c(1,3,4,5),Total=c(2,1,3,1))
data.table.b <- data.table(Key=c(2,3,5),Total=c(5,1,2))
result <- data.table(Key=c(1,2,3,4,5),Total=c(2,5,2,3,3)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T13:33:48.597

一种方法是：

```
> rbind(data.table.a,data.table.b)[,list(Total=sum(Total)),keyby=Key]
     Key Total
[1,]   1     2
[2,]   2     5
[3,]   3     2
[4,]   4     3
[5,]   5     3 
```

# php - PHP Word Censor help, censor word based on a criteria using regex

> ID：10618839
> 
> 赞同：2
> 
> 时间：2012-05-16T12:45:40.880
> 
> 标签：php, regex

大家好，我正在尝试构建一个将维持以下标准的正则表达式。

本例中要审查的词“视图”。审查后要使用的字符：“%”，因为“*”弄乱了我的帖子格式。

**单词使用示例：**
view
views
preview
我去看了很棒
的景色 景色很棒不是吗。

**文字审查后的示例：**
%%%%
视图
预览
我去看了伟大
的 %%%% %%%% 是不是很棒。

这是我的一些代码：

```
$string = preg_replace_callback('/\s*'. preg_quote($word, '\\') .'\s*/is', 'bbcode_callback_censored', $string); 
```

麻烦的是这现在匹配所有内容，因为我在正则表达式“\ s”中使用“*”。任何想法我可以做些什么来满足我的标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:57:31.967

不匹配空格，使用**[单词边界](http://www.regular-expressions.info/wordboundaries.html)**

尝试

```
$string = preg_replace_callback('/\b'. preg_quote($word, '\\') .'\b/is', 'bbcode_callback_censored', $string); 
```

[在 Regexr 上](http://regexr.com?30vkd)查看

您只需要确保的内容`$word`不以非单词字符开头或结尾，那么单词边界将不起作用。

`\b`是单词边界。它匹配从单词字符（定义在 中`\w`）到非单词字符（定义在 中）的变化`\W`，或者相反。

**替代方案：*空白边界***

如果您不喜欢单词边界，因为您要替换的单词可能以“#view”等非单词字符开头或结尾，请定义您自己的“空白边界”，例如：

```
(?<=^|\s)#view(?=$|\s) 
```

[在 Regexr 上](http://regexr.com?30vkm)查看

会像这样查看您的代码

```
$string = preg_replace_callback('/(?<=^|\s)'. preg_quote($word, '\\') .'(?=$|\s)/is', 'bbcode_callback_censored', $string); 
```

`(?<=^|\s)`如果之前有字符串的开头或空格，将匹配

`(?=$|\s)`如果前面有字符串的结尾或空格，将匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:58:53.893

对于这个简单的任务，您不必使用缓慢且需要大量内存的正则表达式引擎，使用`str_replace`- 它用替换字符串替换所有出现的搜索字符串。

```
$string = str_replace(' view ','%',$string); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:57:45.460

这会做...

```
$text_without_views = preg_replace('/(^|\W)view($|\W)/','\1***\2',$text_with_views); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T13:01:36.263

```
$str = "view viewing view view";
$str = preg_replace('/(^|\b)view(\b|$)/is', ' %%%% ', $str);
echo $str; 
```

# javascript - 为什么 $(elem).height() 以像素为单位返回高度？

> ID：10618840
> 
> 赞同：0
> 
> 时间：2012-05-16T12:45:41.303
> 
> 标签：javascript, jquery, css

在 jquery 中，当我们这样做`$(elem).height()`或者`.width()`为什么我们要以像素为单位进行测量时，
即如果 elem 高度设置为 200 像素，那么我们得到 200
，如果我们将 elem 高度设置为 20%（比如说它是 200 像素），那么我们也得到 200

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T12:47:55.097

从[jQuery 文档](http://api.jquery.com/height/)：

> .css('height') 和 .height() 之间的区别在于后者返回一个没有单位的像素值（例如，400），而前者返回一个单位完整的值（例如，400px）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T12:47:47.483

它是返回的最合乎逻辑的单位 - 大多数其他单位都是相对的（ems，百分比）。此外，这也是浏览器在内部处理维度的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:50:01.697

像素是测量确切数量的标准方法。任何没有单位的数字都是没有意义的。如果我告诉你你的字体是 20% 的高度，这对你意味着什么？没有什么。您需要知道它是 pt、em 还是 px，它们是可用的绝对单位。像素是如何测量的黄金标准，因为其他像素与字体大小和其他考虑因素有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T12:48:19.477

发生这种情况是因为`width()`并`height()`返回*计算*的宽度/高度（由浏览器计算，以像素为单位），而不是您在 css 中设置的值（in`em`或`%`其他）

# c# - 仅在评论后删除文本（--）

> ID：10618841
> 
> 赞同：1
> 
> 时间：2012-05-16T12:45:43.553
> 
> 标签：c#, text

我的项目目前正在删除 -- 符号后的所有文本，因为它代表评论。我的代码现在正在删除文本文件中文本中的所有文本，在评论之前。

到目前为止，这是我的代码：

```
static void Main( string[] args )
    {
        string line = null;
        string line_to_delete = "--";
        string desktopLocation = Environment.GetFolderPath( Environment.SpecialFolder.Desktop );
        string text = Path.Combine( desktopLocation, "tim3.txt" );
        string file = Path.Combine( desktopLocation, "tim4.txt" );

        using (StreamReader reader = new StreamReader( text ))
        {
            using (StreamWriter writer = new StreamWriter( file ))
            {
                while (( line = reader.ReadLine() ) != null)
                {
                    if (string.Compare( line, line_to_delete ) == 0)
                        File.WriteAllText( file, File.ReadAllText( text ).Replace( line_to_delete, "" ) );
                    continue;
                }
            } 
```

我如何指定它只能删除 te 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:49:54.753

您可以使用正则表达式或以下代码

```
var @index = line.IndexOf(line_to_delete);
if(@index != -1){
    var commentSubstring = line.Substring(@index, line.Length - @index); //Contains only the comments
    line.Replace(commentSubstring, "").ToString()//Contains the original with no comments
} 
```

如果评论在下面的布局中

等等等等——一些评论——更多评论

阿达斯达斯法

asasff——更多评论

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:53:50.093

s.indexOF 搜索第一次使用“--” s.remove 从 indexof 开始并删除所有内容到最后。 **编辑：** 根据 Jays 评论修复异常

```
 string s = "aa--aa";
        int i = s.IndexOf("--");
        if (i >= 0)
            s = s.Remove(i);
        MessageBox.Show(s); 
```

或者在这里我为你划了一个

```
 string s = "aa--aa";
        s = s.IndexOf("--") >= 0 ? s.Remove(s.IndexOf("--")) : s; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T13:17:55.123

您的代码中的问题是，仅当文件包含与“--”完全相同的行时，才会发生替换（这是写入输出文件的唯一指令）。

此外，如果您使用的是 WriteAllText 和 ReadAllText，则不需要 while 循环，并且无论如何您都不能使用它们，因为这样您只会删除“--”而不是之后的所有内容。

我认为这样的事情应该有效：

```
using (StreamReader reader = new StreamReader( text ))
{
    using (StreamWriter writer = new StreamWriter( file ))
    {
        while (( line = reader.ReadLine() ) != null)
        {
            int idx = line.IndexOf(line_to_delete);
            if (idx == 0) // just skip the whole line
                continue;
            if (idx > 0)
                writer.WriteLine(line.Substring(0, idx));
            else
                writer.WriteLine(line);
        }
    }
} 
```

# ruby-on-rails - 如何在不访问数据库的情况下在设计中使用 current_user

> ID：10618842
> 
> 赞同：2
> 
> 时间：2012-05-16T12:45:47.047
> 
> 标签：ruby-on-rails, devise

我对 [如何自定义设计以在会话中存储更多信息有同样的问题？](https://stackoverflow.com/questions/6868160/how-to-customize-devise-to-store-more-informations-in-the-session)

当我使用`current_user`和`user_signed_in?`设计助手时，两者都会导致 SQL 查询访问数据库。有没有更好的方法可以在会话中检索这些信息而无需访问数据库？

用户登录阶段后是否需要自己分配会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:51:55.910

如果您不希望它访问数据库，那么不要使用一个来存储您的会话。相反，将会话存储在内存中。为此，您有几个选项，例如使用[Dalli gem](https://github.com/mperham/dalli)的 memcached或使用[redis-store gem](https://github.com/jodosha/redis-store)的 redis 。这些不是唯一的宝石选择，但它们很受欢迎。我鼓励你去探索还有什么，看看有什么适合你的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T09:48:27.503

有时您只需要`:id`用户的，在这种情况下，您可以在使用会话的应用程序控制器中编写以下方法

```
def current_user_id
  session[:user_id] = session[:user_id] || current_user.id
end 
```

# android - 在 Android 4.0.3 中将 IBinder 转换为 ISurface 时出错

> ID：10618847
> 
> 赞同：0
> 
> 时间：2012-05-16T12:46:04.630
> 
> 标签：android, android-4.0-ice-cream-sandwich

我们在从 IBinder 转换为 ISurface 时遇到错误。

用于转换的代码是，

```
interface_cast<ISurface>(data.readStrongBinder()); 
```

错误是，“ `undefined reference to`android::ISurface::asInterface(android::sp const&)'`”

请帮忙。ABS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T13:44:05.673

这是旧的，但也许会帮助某人。我有类似的问题，但以这种方式转换：

```
interface_cast<IAudioFlinger>(binder); 
```

解决方案是在 Android.mk 文件中包含 libmedia。

```
LOCAL_SHARED_LIBRARIES := \ 
    libmedia 
```

在您的情况下，它应该是表面上的某个库。

# android - ServiceConnection.onServiceConnected() 中的 ClassCastException。绑定服务

> ID：10618850
> 
> 赞同：0
> 
> 时间：2012-05-16T12:46:10.403
> 
> 标签：android, binding, service, bind, serviceconnection

我尝试将服务绑定到活动。但我在这里得到了 ClassCastException：

```
pos.main.client.ClientBackground_Service.ClientBackground_Binder binder = (ClientBackground_Binder) service; 
```

我真的不明白为什么我会得到这个例外。该服务作为进程运行。活动想要获取并使用它。

这是两个类：

```
public class ClientMain_Activity extends Activity
{
private boolean m_IsBound = false;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    if (isMyServiceRunning())
    {
        Intent intent = new Intent(this, ClientBackground_Service.class);
        bindService(intent, m_ServiceConnection, Context.BIND_AUTO_CREATE);

    }
}

private ServiceConnection m_ServiceConnection = new ServiceConnection()
{
    public void onServiceConnected(ComponentName name, IBinder service)
    {

        pos.main.client.ClientBackground_Service.ClientBackground_Binder binder = (ClientBackground_Binder) service;
        // m_Service = binder.getService();
        m_IsBound = true;
    }
};
} 
```

服务等级：

```
public class ClientBackground_Service extends Service implements
    I_ClientBackground_Service
{

private final IBinder m_clientbackground_binding = new ClientBackground_Binder();

public class ClientBackground_Binder extends Binder
{

}

@Override
public IBinder onBind(Intent intent)
{
    return m_clientbackground_binding;
}

@Override
public void onStart(Intent intent, int startId)
{
    super.onStart(intent, startId);
    Log.i(this.getClass().getName(), " ClientBackground_Service started");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:54:06.440

请参见：

*   [从另一个 Activity 绑定到本地服务时出现 ClassCastException](https://stackoverflow.com/questions/4526938/classcastexception-when-binding-to-local-service-from-another-activity)
*   [http://developer.android.com/guide/developing/tools/aidl.html](http://developer.android.com/guide/developing/tools/aidl.html)

# google-app-engine - ndb/Google App Engine 上的简单版本/历史

> ID：10618854
> 
> 赞同：4
> 
> 时间：2012-05-16T12:46:21.083
> 
> 标签：google-app-engine, versioning, app-engine-ndb

我正在寻找一个系统来跟踪 Google App Engine (Python) 上 ndb.Models/Expandos 内容的版本（历史）。

内容可能比较长，可能有很多版本，但版本之间的差异可能很小。我希望其他人已经做过类似的事情，我想知道他们是如何做到的，以及哪些原则可以指导设计和开发。

在部署时不知道数据模型的属性是什么（例如“标题”、“内容”、“正文”、“日期”等），但类型是已知的（日期、文本、 ETC）。

我最初的想法是安排这样的事情：

```
from google.appengine.ext import ndb

class Version(ndb.Expando):
  version_id = ndb.IntegerProperty()
  # dated, etc.
  # data properties are not known in advance, hence Expando

 class MyDoc(ndb.Model):
   head     = ndb.KeyProperty(kind=Version)

   instance = ndb.kind=Property(kind=Version, repeated=True)
   # ^^^ may be a StructuredProperty? 
```

算法概述如下：

### 保存

每次用户保存文档时，将所有最新数据放入一个新数据`Version`并指向`head`该实例。

到那时，或之后的某个时间，浏览旧版本并将完全保存更改为差异（以节省空间），例如[diff-match-patch](http://code.google.com/p/google-diff-match-patch/)。我希望每小时、每天或某个设定时间或某个设定数量的差异进行一次完整的保存。

### 正在加载

加载`head`是微不足道的。

旧版本将被标记为完全保存或差异，并且取决于可以直接返回或从差异编译的数据。

### 想法？

我相信其他人已经解决了这个问题，我很想知道关于它的想法和实现。显然，有完整的版本控制系统，例如 Git、Mercurial 和 Subversion 以及 CVS——但这些系统对于预期目的来说都是多余的，并且无法在 Google App Engine 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T21:31:20.403

一些想法：

*   您需要一个单调递增的版本 ID，因此您可以对版本实体进行范围查询。这可能意味着您需要将所有历史数据与文档放在同一实体组中，并在文档实体或同一组中的单独实体中保留最新版本 ID。如果您想要一个系统范围内单调递增的 ID（例如关联或排序对不同组中的多个实体所做的更改），您将需要查看分片计数器和跨组事务。

*   如果空间足以让您担心存储差异，我不明白为什么您会将完整版本减少为具有后台作业的差异，而不仅仅是更新。如果空间不是一个大问题并且主要功能是能够区分两个任意版本，那么存储完整数据可能会更容易，因此差异的成本与中间版本的数量（或所有版本，如果您的差异在历史版本之间）。假设您不想对过去版本的属性执行查询，您可以通过以紧凑​​形式序列化旧实体并将其存储在非索引 blob 属性中来节省空间。（我假设这就是您存储每个差异的方式，如果您使用差异？）您还可以在每 n 次修订的里程碑中保留完整的文档，

*   从您的描述看来，您更希望 MyDoc 成为对 Version 实体的引用，该实体将包含最重要的数据。也许 MyDoc 更容易包含最重要的数据（并使用 MyDoc 键等对其属性进行索引），并且更新只是使用以前的数据（差异或完整）创建版本。

*   不要忘记容纳删除。也许 MyDoc 消失了（因此它不会出现在键和属性查询中），并且父路径的最新版本包含完整的最后一个已知文档。

（这只是我的想法。我对我工作的 CMS 进行了一些思考，但我还没有构建它。）

# javascript - Backbone.js 查看标记名动态设置？

> ID：10618860
> 
> 赞同：2
> 
> 时间：2012-05-16T12:46:31.913
> 
> 标签：javascript, html, backbone.js

我正在尝试使用 jQueryMobile 和 Backbone.js 为 Phonegap 项目设置基本架构。
我们将针对多个平台并计划在未来进行扩展。
我希望我的 Backbone 代码完全不知道与视图关联的 HTML 元素的类型，因为我们不知道视图在平台上会是什么样子。
一个简单的例子是，在一个平台上，项目列表可能由 a`UL`和`LI`元素组成，但在另一个平台上，出于某种原因，我们可能希望将其切换为 a`DIV`和`P`元素。

目前，如果我不指定 tagName，则默认为`DIV`.
我希望能够在一页上提供这样的模板：

```
<script id="attachmentTemplate" type="text/template">
     <li><a href="#"><%= title %></a></li>
</script> 
```

在另一个提供：

```
<script id="attachmentTemplate" type="text/template">
    <p><a href="#"><%= title %></a></p>
</script> 
```

`DIV`如果不指定 tagName （正如我所说，它默认为） ，我将无法做到这一点。

有没有人有任何建议或方法来做到这一点？关键是我不希望 Javascript 知道 HTML 元素的类型，我希望 HTML 来定义它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-06T15:06:22.060

您可以使用函数在视图中指定 tagName 属性，因此它将是动态的。

```
...

tagName: function(){
    return this.model.get('tagName');
},

... 
```

签出这个小提琴[http://jsfiddle.net/b7mR6/](http://jsfiddle.net/b7mR6/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T12:58:34.467

虽然我不推荐这种架构，但您可以覆盖您的渲染方法：

```
render: function() 
{
    // unbind all handlers since delegateEvents was called in the constructor
    this.undelegateEvents();
    // set this.el to the domElement from the templates
    this.el = this.template(this.model.toJSON()); // or however you get to your template
    // create the shorthand dom reference that setElement() creates
    this.$el = $(this.el);
    // re-delegate the events
    this.delegateEvents();
} 
```

这意味着您无需担心您在模板中定义的 tagName。

编辑：查看主干代码，这正是`setElement`它所做的，所以理论上你可以尝试

```
render: function() 
{
    var tpl = this.template(this.model.toJSON());
    this.setElement(tpl, true);
    return this;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T12:55:48.523

像往常一样，我搜索再搜索并没有找到答案，然后我提出一个问题并自己解决。

我发现如果我像这样制作我的模板：

```
<script id="attachmentTemplate" tagname="li" type="text/template">
    <a href="#"><%= title %></a>
</script> 
```

然后在我的 js 代码中，实例化我的视图时，我可以这样做：
`var attachmentView = new AttachmentListItemView({ tagName: $('#attachmentTemplate').attr('tagname'), model: item });`

而且效果很好。
不知道这是否会是有效的 HTML 或会导致任何问题。

# web-services - 如何在 Rally SOAP API 的父项目详细信息中获取子项目合并数据？

> ID：10618862
> 
> 赞同：1
> 
> 时间：2012-05-16T12:46:35.690
> 
> 标签：web-services, soap, rally

我正在使用它的 SOAP API 从 Rally 获取数据。我有一个父项目，多个子项目在同一个版本上工作。当我获取父项目的发布时，它给了我错误的统计数据，而没有合并子项目的故事点。Rally 的 API 中是否有任何方法/对象，当我获取父发布数据时，我也可以获得子项目的合并发布数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:28:19.313

在 Rally 中处理基于发布的汇总的方式通常是在父项目级别设置发布，并且 UI 中有一个复选框以将发布复制到所有子项目，使用相同的名称和开始/结束日期。因此，您最终会在父项目和所有子项目中实际拥有多个具有相同名称和时间框的 Release 对象。

如果您想汇总发布中故事的统计信息，并遵循上述父/子发布命名一致性约定，您可以使用 queryString = "(Release.Name = \"My Release"\" 对 HierarchicalRequirement 进行查询); 并取回一组故事，其汇总统计数据（例如，计划估算）应该与您想要的汇总统计数据相匹配。

# c - 什么是 sprintf("%!ld")？

> ID：10618868
> 
> 赞同：4
> 
> 时间：2012-05-16T12:47:01.440
> 
> 标签：c, visual-c++, printf

我偶然发现：

```
sprintf(buffer, "%!ld ", date); 
```

我知道 ld 是长整数，但是 ld 的目的是`!`什么？我找不到任何关于此的参考，并且输出似乎与`%ld`我的经典相似

编辑：显然在我的系统上它附加到变量字符串`+to_date('01/01/1904','DD/MM/YYYY'))`......这确实用于查询数据库，因此它将日期转换为实际的oracle日期（我认为）。现在我将尝试看看这是否是一个特殊的 sprintf 以及它来自哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:58:16.547

据我所知，这对 printf 无效 - 或者会被忽略。我知道的唯一情况，您使用类似`%!`Windows 上的 FormatMessage，请参阅[http://msdn.microsoft.com/en-us/library/aa908810.aspx](http://msdn.microsoft.com/en-us/library/aa908810.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:55:56.863

这是一个无效的格式字符串。

我认为大多数 printf 实现在获取无效格式字符串时，将其`%`视为文字，而不是特殊字符。所以它会打印`%!ld`.

如果它对`%ld`您有用，那么，正如一些评论所说，它可能是您平台的非标准扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:06:55.277

我认为它会打印 %!ld 因为这不是 C 中的有效格式说明符。

# java - java 单个数组中的堆栈和队列

> ID：10618876
> 
> 赞同：-1
> 
> 时间：2012-05-16T12:47:19.373
> 
> 标签：java, algorithm, stack, queue

> 设计一种将堆栈`S`和队列映射`Q`到单个数组的数据表示`M`。编写算法以从这两个数据对象中添加和删除元素。

说清楚是的，是功课！

我不是要答案，我只需要一个链接或可以引导我找到答案的东西，或者如果你能给我和可以应用它的例子，我是新手，你可以看到不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:51:59.623

这个非常简单的指南将向您展示堆栈和队列之间的区别：http: [//blog.bakhshi.eu/2005/11/stack-vs-queue.html](http://blog.bakhshi.eu/2005/11/stack-vs-queue.html)

本质上，堆栈和队列的数据都可以存储在数组中。不同之处在于您选择从**哪里**取出新元素。对于堆栈，您取出的下一个元素（'pop'）是您放入的最后一个元素。对于队列，您取出的下一个元素是您放入的第一个元素。

一种方法是创建一个具有数组成员变量的类，然后具有一些方法：

```
addToQueueOrStack()
popFromQueue()
popFromStack() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:37:27.337

首先，您应该知道什么是堆栈和队列。这两种数据结构有一些规律的行为（或操作限制）。

假设我们想把我们的数据放在一个管子里。队列 Q 是一个管道，我们将数据放在一侧，然后将数据弹出到另一侧；而堆栈 S 是我们在同一侧放置和弹出数据的管，而另一侧永远不可访问。

根据您的要求，给定的数组 M 是我们想要放置数据的原始管，我们需要做的是给这个管添加一些操作限制。

在队列 Q 和堆栈 S 中，我们可以将第一个数据放在 array[0] 中，第二个数据在 array[1] 中的前一个数据之后，第三个数据在 array[2] 中，依此类推。我们总是将新数据放在一侧（如数组的“尾部”）。对于队列Q，我们要弹出与我们放入数据的那一侧不同的数据，所以先弹出array[0]处的数据，然后再弹出array[1]处的数据，即：这个地方存放数据，并且数组的索引最小. 对于栈S，我们应该在我们放入数据的同一侧弹出数据，所以首先在“尾部”弹出数据，即：存放数据的地方，并且具有数组的最大索引。

数组的大小是固定的，所以当你的数据到达数组的边缘时要小心。祝你好运。^_^

# c# - SQL如何对两个日期之间一小时内的事件求和并在一行中显示

> ID：10618879
> 
> 赞同：4
> 
> 时间：2012-05-16T12:47:24.850
> 
> 标签：c#, sql, sql-server-2005, view, count

我正在使用 C# 和 SQL Server 2005 开发报告，我只需要显示我们每小时获得的点击量。桌子很大。输出应如下所示：

```
行# | 日期 | 时间 | 命中数
-----------------------------------------
1 | 2012 年 7 月 5 日 | 8:00 | 3
2 | 2012 年 7 月 5 日 | 9:00 | 4
3 | 2012 年 7 月 5 日 | 10:00 | 0
4 | 2012 年 7 月 5 日 | 11:00 | 5

```

我的表是这样的：

```
“命中时间”：

2012 年 7 月 5 日 08:02:24
2012 年 7 月 5 日 08:12:21
2012 年 7 月 5 日 08:23:00
2012 年 7 月 5 日 09:01:00
2012 年 7 月 5 日 09:08:14
2012 年 7 月 5 日 09:12:31
2012 年 7 月 5 日 09:22:27

```

..etc 正如您在 HitTime 字段中看到的那样，我只有日期和时间，我需要在同一日期显示，例如从 8:00 到 8:59 我得到了多少次点击，并且应该是一整天，从那天的第一秒开始到一天的最后一秒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:52:58.073

```
DECLARE @current_date DATETIME

SET @current_date = '2012-05-07';

WITH    hours (hr) AS
        (
        SELECT  0
        UNION ALL
        SELECT  hr + 1
        FROM    hours
        WHERE   hr < 23
        )
SELECT  ROW_NUMBER() OVER (ORDER BY hr) AS rn,
        @current_date AS [date],
        CONVERT(VARCHAR(5), DATEADD(hour, h.hr, @current_date), 108) AS [time],
        COUNT(hs.hittime) AS hitcount
FROM    hours h
LEFT JOIN
        hits hs
ON      hs.hittime >= DATEADD(hour, h.hr, @current_date)
        AND hs.hittime < DATEADD(hour, h.hr + 1, @current_date)
GROUP BY
        hr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:13:26.483

这个怎么样？

```
;WITH aggregation(hit_date, hit_time)
AS
(
SELECT DATEADD(dd, DATEDIFF(dd, 0, hittime), 0)
     , DATEPART(hour, hittime)
FROM test
)
SELECT ROW_NUMBER() OVER (ORDER BY hit_date, hit_time) AS rn
     , CONVERT(VARCHAR,hit_date,101) as [date]
     , CAST(hit_time AS VARCHAR) + ':00' as [time]
     , COUNT(*) as hit_count
FROM aggregation
  GROUP BY hit_date
         , hit_time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T10:23:24.983

```
WITH hit_count AS(
select CONVERT(VARCHAR,hit_time,101)as [date], substring(convert(varchar,hit_time,108), 0, 4)+'00' as [time] from hit
)
select date,[time], count(*) as hit from hit_count group by [time],[date] 
```

如果您想要上午/下午，那么：

```
WITH hit_count AS(
select CONVERT(VARCHAR,hit_time,101)as [date], (substring(convert(varchar,hit_time,100), 12, 4)+'00'+substring(convert(varchar,hit_time,100),18,2)) as [time] from hit
)
select date,[time], count(*) as hit from hit_count group by [time],[date]
GO 
```

# linux - Linux如何调试操作系统冻结问题

> ID：10618882
> 
> 赞同：2
> 
> 时间：2012-05-16T12:47:26.550
> 
> 标签：linux, kernel-module, panic

我正在开发一个内核模块和一个用户空间应用程序来测试该模块。

问题是在测试期间我的系统挂起/冻结。

我在代码中放置了很多调试打印。

打印的最后一条消息就在我的用户空间应用程序中的linux [select调用之前。](http://linux.about.com/od/commands/l/blcmdl2_select.htm)select 是否会以某种方式冻结系统？

那么，我该如何调试问题出在哪里？问题出在用户空间应用程序还是内核模块上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T19:25:58.977

正如 nm 所提到的，您的用户空间程序无法冻结 Linux，因此它是您的内核模块中的一个错误。调试它的最好方法是[使用内核调试器](http://lwn.net/Articles/90913/)，并找出你的模块做错了什么。

常见错误是模块传递给内核的未初始化指针或锁定问题，因此请仔细查看这些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T15:23:31.700

根据定义，用户空间程序不能冻结 Linux。内核中有一个错误。

# c# - WPF 列表框绑定：SelectedItem 未设置

> ID：10618883
> 
> 赞同：3
> 
> 时间：2012-05-16T12:47:31.897
> 
> 标签：c#, wpf, data-binding, mvvm, listbox

我有一个简化为以下 XAML 的 ListBox

```
<ListBox ItemsSource="{Binding Properties}" 
     DisplayMemberPath="Name" 
     SelectedItem="SelectedProperty" /> 
```

在我的 ViewModel 中：

```
private List<Property> propertyList;
private Property selectedProperty;
public List<Property> Properties 
{ 
    get 
    { 
        return propertyList; 
    } 
    set 
    { 
        propertyList = value;
        NotifyPropertyChanged("Properties");
    } 
}
public Property SelectedProperty
{
    get
    {
        return selectedProperty;
    }
    set
    {
        NotifyPropertyChanged("SelectedProperty");
        selectedProperty= value;
    }
} 
```

我的列表框填充得很好，但是无论我尝试什么，当我在列表框中选择一个项目时，似乎都无法更新 SelectedProperty。我已经尝试将它全部切换为使用`ObservableCollection`而不是`List`为 CollectionChanged 添加一个事件处理程序，但这没有奏效。

我确信我错过了一些愚蠢的东西，并且看不到树木的树木。我已经走到了尽头，需要有人介入并提供帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T12:49:09.357

您需要绑定到`SelectedProperty`：

```
<ListBox ItemsSource="{Binding Properties}" 
 DisplayMemberPath="Name" 
 SelectedItem="{Binding SelectedProperty}"  /> 
```

# c# - 奇怪的行为单例

> ID：10618885
> 
> 赞同：0
> 
> 时间：2012-05-16T12:47:36.270
> 
> 标签：c#, .net, wpf

在我的问题中，我并不是真的在寻找解决方案，而是在解释为什么我会出现这种奇怪的行为。我知道 Singleton 有很多危险，最好尽可能避免。

问题发生在 2 个单例类之间（两个线程保存实现）

```
 //Thread Safe Singleton
    private static volatile SQLCon instance;
    private static object syncRoot = new Object();

    public static SQLCon Instance
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                        instance = new SQLCon();
                }
            }
            return instance; 
```

所以我有两个类都实现了单例：

*   MainWindow（99% 的时间都在显示我的 UI）
*   SQLCon（数据库类）

`InitializeTimer()`现在，当我在 MainWindow 默认构造函数中初始化每秒运行的 Timer () 时，开始出现奇怪的行为（所以基本上它应该只启动一次）。

```
 private MainWindow()
    {
        InitializeComponent();
                    InitializeTimer(); //Wierd behaviour
            }

 private void InitializeTimer()
        {
            timerOrders = new DispatcherTimer();
            timerOrders.Tick += new EventHandler(timer_Tick);
            timerOrders.Interval = new TimeSpan(0, 0, 1);
            timerOrders.Start();
        }

    private void timer_Tick(object sender, EventArgs e)
    {
        SQLConn.Instance.DisplayInfo(); //This is method just queries a DB and fills up a simple dataset
    } 
```

为了简短起见，DisplayInfo 只需`DateTime`从数据库中查询几个字段 ( ) 并将其放在标签中。一切都运行良好几分钟然后突然我得到一个负值`DateTime`并且我的应用程序崩溃了。

**解决方案**实际上是`InitializeTimer()`从默认构造函数中删除 并将其`MainWindow`放置在我的程序中运行的另一个计时器中。

可能是什么原因，所以我将来可以避免这种情况？

最好的问候皮特。

# python - Sikuli 和 Python subprocess.call 函数

> ID：10618887
> 
> 赞同：1
> 
> 时间：2012-05-16T12:47:39.637
> 
> 标签：python, sikuli

我正在尝试在 Sikuli 脚本中使用 Python 库中的调用函数。

```
from subprocess import call

call(['notepad.exe']) 
popup("call has ended")
#do something else in the notepad here 
```

问题是在我关闭记事本之前，“通话已结束”的消息永远不会出现。我认为这与`call`执行结束时发送的错误代码有关。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:52:48.353

使用[OpenApp()](http://sikuli.org/docx/globals.html#openApp)或[run()](http://sikuli.org/docx/globals.html#run)，先尝试使用 Sikuli 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:49:55.853

如果您只想启动并立即继续，您应该使用`Popen()`而不是`call()`.

`poll()`如果它们还活着，您应该不时注册子流程对象，如果没有，`wait()`则为它们注册。

# javascript - Jquery：获取选项字段的名称

> ID：10618891
> 
> 赞同：0
> 
> 时间：2012-05-16T12:47:46.853
> 
> 标签：javascript, jquery, html

我正在尝试使用 jquery 将所选 html 表单选项字段的名称复制到另一个字段。
这就是我现在得到的：

### 脚本

```
$(document).ready(
function()
{
    //check for change on the categories menu
    $('#categories').change(function() { 

    //get category value
    name = $('#categories').text();
    $('#name').val(name)

});

}); 
```

### HTML

```
<form action="editcat.pnp" method="post" accept-charset="utf-8">
<table>
<tr>
<td><label for="category">Category:</label></td><td><select name="category_id"     id="categories">
<option value="1">Info</option>
<option value="2">Resr</option>
<option value="3">Pro</option>
<option value="4">Geo</option>
<option value="5">Site's</option>
<option value="6">Well</option>
<option value="7">Link</option>
<option value="#" selected="selected">Please select</option>
</select></td>
</tr>
<tr>
<tr>
<td><label for="name">Name:</label></td><td><input name="name" type="text" size="40" maxlength="40" id="name"></td>
</tr>
<tr>
<td></td><td><input type="submit" value="Update"> <input type="reset"></td>
</tr>
</table>
</form> 
```

问题是名称字段现在包含选项下拉列表中的所有名称，而不仅仅是我选择的名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T12:51:55.700

您应该使用[:selected Selector](http://api.jquery.com/selected-selector/)来获取 selected `option`，然后`.text()`获取其名称。

```
var name = $('#categories option:selected').text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T12:52:12.287

尝试这个....

```
$(document).ready(
function()
{
    //check for change on the categories menu
    $('#categories').change(function() { 

    //get category value
    name = $("#categories option:selected").text();
    $('#name').val(name)

    });
}); 
```

希望它的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:53:08.417

我认为您正在寻找使用`$("#categories").val()`而不是`.text()`.

示例：http: [//jsfiddle.net/shanabus/wZAM7/](http://jsfiddle.net/shanabus/wZAM7/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T12:51:36.640

阅读 jQuery 文档并在[.change()](http://api.jquery.com/change/)函数中显示示例。

# vb.net - 在 VB.NET 中按顺序打印多个 PDF 文件

> ID：10618893
> 
> 赞同：1
> 
> 时间：2012-05-16T12:47:51.200
> 
> 标签：vb.net, pdf, printing, batch-file

我在使用以下代码发送打印命令的顺序中遇到了许多 PDF 文件：

```
For i As Int32 = 1 To qtyToPrint Step 1
   'calls the process for the printing of the pdf files
   Dim myProcess As Process = New Process
   myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
   myProcess.StartInfo.FileName = fileToPrint
   myProcess.StartInfo.Verb = "Print"
   myProcess.StartInfo.UseShellExecute = True
   myProcess.Start()
   myProcess.WaitForExit()
Next 
```

它打印得很好，只是它的顺序不正确。我设法以正确顺序获得它的唯一方法是添加一个计时器并检查打印队列中是否有任何作业，这确实减慢了打印过程，尤其是在创建 500 多个打印作业时。

我想知道是否有更好的方法来打印这些文件，它可以快速打印到哪里并且仍然是有序的。我想到的几件事，但不确定是否可能，是创建一个文本文件或 XML 文件，其中包含要打印的文件列表和数量并将打印机从该列表中排入队列，或者将 PDF 文件转换为 XPS 文档和然后使用 PrintQueue 类将 XPS 文件添加为打印作业。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:06:08.693

更好的选择可能是使用 PDF 库将所有​​ pdf 合并到一个文件中，然后通过库或使用相同的方法打印该单个文件。这样，您只有一个打印作业，并且您可以控制将文档添加到大 PDF 的顺序。

# jquery - jQuery off() 不适用于事件映射

> ID：10618897
> 
> 赞同：1
> 
> 时间：2012-05-16T12:48:10.583
> 
> 标签：jquery, events, binding, map

我正在尝试使用 events-map 属性`jQuery.off()`来禁用事件，但它似乎并没有禁用事件。

根据 jQuery 文档`off()`，应该使用事件映射的键并忽略值。

这是一个例子：http: [//jsfiddle.net/tNBMM/](http://jsfiddle.net/tNBMM/)

选中复选框应该做一个简单的悬停效果。取消选中它会调用该`off()`函数，该函数（如我所见）应该禁用事件，但不会。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:51:14.710

`off()``on()`需要与用于禁用它的完全相同的函数引用。在您当前的版本中，每次单击复选框时，您都会在技术上创建新的`mouseenter`和处理程序。`mouseleave`这是一个更新版本，它使用和 相同的函数参考`on()`，`off()`按预期工作：http: [//jsfiddle.net/tNBMM/2/](http://jsfiddle.net/tNBMM/2/)

* * *

编辑：为了任何未来的访问者，这里是工作代码：

```
var enter = function() { $('#thing').css('background-color', 'red'); },
    leave = function() { $('#thing').css('background-color', 'white'); };
$('#show').click( function() {
    var show = $(this).is(':checked');

    $('#thing')[show ? 'on' : 'off']({
        mouseenter: enter,
        mouseleave: leave
    });
});​ 
```

# camera - 使用 flash cs3 时网络摄像头显示低分辨率视频

> ID：10618901
> 
> 赞同：0
> 
> 时间：2012-05-16T12:48:25.957
> 
> 标签：camera, webcam, resolution, flash-cs3

在我的网络应用程序中，我使用 Flash 获取网络摄像头的实时流，然后使用发布 Flash 文件后生成的 swf 文件将其显示到我的网页。但我面临的问题是视频不是以良好的分辨率显示。我尝试了许多设置，但没有任何效果。这是我在 Flash 中获取视频的代码。

```
var camera;
var video;
var bandwidth:int = 100;
var quality:int = 100;

camera=Camera.getCamera();
camera.setMode(190,130,10000);
camera.setQuality(bandwidth*1024/8, quality);
video = new Video(camera.width * 2.5, camera.height *2.4);
video.attachCamera(camera);
video.smoothing;
addChild(video); 
```

谁能告诉我，我在这里做错了什么。任何获得高分辨率视频的解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:25:12.260

问题已解决。我在提供比相机高度和视频更大的视频高度和宽度方面犯了一个小错误。刚刚删除了这些东西，我的视频分辨率又回到了正轨。代码的变化是：

更改了代码行

```
video = new Video(camera.width * 2.5, camera.height *2.4); 
```

到

```
video = new Video(camera.width, camera.height); 
```

# c# - 如何在 C# 上为 GUI 计算器做简单的算法？

> ID：10618904
> 
> 赞同：0
> 
> 时间：2012-05-16T12:48:36.473
> 
> 标签：c#, algorithm, windows-phone-7, user-interface, calculator

例如我为 WP7 做计算器。

![在此处输入图像描述](../Images/e33f84f7ce80d33a7c4ca534d03e5363.png)

这是我的简单逻辑类：

```
public class CalcLogic
    {
        public static double Calculate(double a, double b, string operation)
        {
            double res = 0;
            switch (operation)
            {
                case ("+"):
                    res = a + b;
                    break;
                case ("-"):
                    res = a - b;
                    break;
                case ("*"):
                    res = a * b;
                    break;
                case ("/"):
                    res = a / b;
                    break;
                default: break;
            }
            return res;
        }
    } 
```

这是在我的 MainPage.xaml.cs 中：

```
private const int Rows = 4, Cols = 4;
        private string[,] buttonTags = { { "7", "8", "9", "/" }, 
                                         { "4", "5", "6", "*" },
                                         { "1", "2", "3", "-" },
                                         { "0", "C", "=", "+" }
                                       };

        private Button[,] buttons;

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            CreateButtons();
        }

        public void CreateButtons()
        {
            buttons = new Button[Rows, Cols];
            for (int i = 0; i < Rows; i++)
            {
                for (int j = 0; j < Cols; j++)
                {
                    buttons[i, j] = new Button();
                    buttons[i, j].Content = buttonTags[j, i];
                    buttons[i, j].Width = 120;
                    buttons[i, j].Height = 110;
                    buttons[i, j].Margin = new Thickness(i * 110 + 5, j * 110 + 100, 0, 0);
                    buttons[i, j].VerticalAlignment = System.Windows.VerticalAlignment.Top;
                    buttons[i, j].HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
                    buttons[i, j].Name = "button" + buttonTags[j, i];
                    buttons[i, j].Click += new System.Windows.RoutedEventHandler(Button_Click);
                    ContentPanel.Children.Add(buttons[i, j]);
                    ContentPanel.UpdateLayout();
                }
            }
        } 
```

问题是 - Button_Click 方法的正确性如何？

```
private void Button_Click(object sender, EventArgs e)
        {
            Button button = sender as Button;
            tbResult.Text += button.Content.ToString();

            string operation = "";
            double a = 0;
            double b = 0;

            if (button.Content.ToString() == "=")
            {
                tbResult.Text = CalcLogic.Calculate(a, b, operation).ToString();
            }
            if (button.Content.ToString() == "C")
            {
                tbResult.Text = "";
            }

            ...

        } 
```

也许我应该只写我的 TextBox 数字并签名，然后解析？但我认为这不是正确的算法。

**升级版：**

我就是这样做的，效果很好。但我不确定正确的实现：

```
private void Button_Click(object sender, EventArgs e)
        {
            try
            {
                Button button = sender as Button;
                double res;
                if (Double.TryParse(button.Content.ToString(), out res))
                {
                    DigitClick(button.Content.ToString());
                }
                else
                {
                    OperatorClick(button.Content.ToString());
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
                ClearAll();
            }
        }

        private void ClearAll()
        {
            first = second = result = 0;
            operStr = "";
            newNum = true;
            tbResult.Text = "";
        }

        private void DigitClick(string dig)
        {
            if (newNum)
            {
                tbResult.Text = "";
            }
            tbResult.Text += dig;
            newNum = false;
        }

        private void OperatorClick(string oper)
        {
            if (oper == "=")
            {
                if (operStr == "=" || operStr == "")
                {
                    return;
                }
                second = Convert.ToInt32(tbResult.Text);
                result = CalcLogic.Calculate(first, second, operStr);
                tbResult.Text = result.ToString();
                operStr = oper;
            }
            else if (oper == "C")
            {
                ClearAll();
            }
            else
            {
                operStr = oper;
                first = Convert.ToInt32(tbResult.Text);
            }

            newNum = true;
        } 
```

我只是想知道 GUI 计算器的最佳实现，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:51:45.470

不太确定你在问什么，但你从来没有为你的操作变量分配任何东西。它始终是一个空字符串。

# ios - 修复警告：无法将合成的 setter/getter 与用户定义的 setter/getter 配对

> ID：10618911
> 
> 赞同：2
> 
> 时间：2012-05-16T12:48:52.023
> 
> 标签：ios, networking, httprequest, compiler-warnings

我在我的应用程序中使用在[这里](http://developer.apple.com/library/ios/#samplecode/MVCNetworking/Listings/Networking_QHTTPOperation_m.html)`QHTTPOperation.{h/m}`发现一切正常，但我收到 8 个警告如下：

> 可写原子属性“acceptableStatusCodes”不能将合成的 setter/getter 与用户定义的 setter/getter 配对
> 
> 可写原子属性“acceptableContentTypes”不能将合成的 setter/getter 与用户定义的 setter/getter 配对
> 
> 可写原子属性 'authenticationDelegate' 无法将合成的 setter/getter 与用户定义的 setter/getter 配对
> 
> ...

我问是因为我注意到在上述链接的项目中没有与`QHTTPOperation.{h/m}.`

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T13:07:39.700

申报财产`nonatomic`。

因为编译器不验证用户定义的访问器的实现是原子的还是非原子的，所以它假定它*不是*原子的。考虑到实际实现使用对象级自旋锁（在某些情况下），这是一个非常安全的假设，并且支持实现的数据是从我们那里抽象出来的。*我们可以*实现联系的唯一方法是使用编译器使用的（私有）运行时函数，然后编译器必须验证调用和参数在这种情况下是否正确。因此，用户定义的访问器不能保证满足标准的 objc 运行时原子合约。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:01:31.543

删除`@synthesize`这些属性。他们提供了获取/设置。

编辑：为了清楚起见。在 .h 中，他们声明了可接受的StatusCodes

```
NSIndexSet *        _acceptableStatusCodes; 
```

和

```
@property (copy,   readwrite) NSIndexSet *          acceptableStatusCodes; 
```

然后，在 .m 中，他们有

```
@synthesize acceptableStatusCodes = _acceptableStatusCodes; 
```

和

```
- (NSIndexSet *)acceptableStatusCodes
{
    return [[self->_acceptableStatusCodes retain] autorelease];
}

- (void)setAcceptableStatusCodes:(NSIndexSet *)newValue
{
    if (self.state != kQRunLoopOperationStateInited) {
        assert(NO);
    } else {
        if (newValue != self->_acceptableStatusCodes) {
            [self willChangeValueForKey:@"acceptableStatusCodes"];
            [self->_acceptableStatusCodes autorelease];
            self->_acceptableStatusCodes = [newValue copy];
            [self didChangeValueForKey:@"acceptableStatusCodes"];
        }
    }
} 
```

这两个块（综合和消息实现）都定义了相同的消息，因此它们是冲突的。设置消息在开始时会额外检查自动生成的合成不会执行（检查 kQRunLoopOperationStateInited），所以我会删除合成，无论如何都会被忽略。

设置消息正确地实现了复制语义

```
 self->_acceptableStatusCodes = [newValue copy]; 
```

它释放了旧值。它还执行 keyValue 更改通知。我不知道他们为什么留在合成器中——看起来他们以后可能想要状态检查，却忘记删除自动生成的获取/设置。

# sql - LIKE 使用返回多行的子查询

> ID：10618912
> 
> 赞同：0
> 
> 时间：2012-05-16T12:48:52.603
> 
> 标签：sql, sql-server, sql-server-2005

有 2 个表 emailinfo(id,email) 和 keywordinfo(id,keyword)。emailinfo 包含 80,000 行，keywordinfo 包含 2000 行。

我想要来自 emailinfo 表的电子邮件，其中不包含来自 keywordinfo 表的关键字。

我不喜欢多行的条件

我将所有关键字都保存在关键字信息表中

现在我必须从 emailinfo 表中获取所有不包含 keywordinfo 表中任何关键字的电子邮件。

我想要如下查询，

```
select email 
from emailinfo 
where email not like % (select keyword from keywordinfo) 
```

我试过以下查询

```
SELECT email 
FROM   emailinfo
       join keywordinfo on email  like '%' + keyword +'%'** 
```

但它没有给我正确的结果，而且速度很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:32:21.523

**您的第二个查询的细微变化如何......？**

```
SELECT Email 
FROM   EmailInfo
LEFT JOIN KeywordInfo ON Email LIKE '%' + Keyword + '%'
WHERE KeywordInfo.ID IS NULL 
```

**示例数据：**

```
CREATE TABLE #EmailInfo (ID INT, Email VARCHAR(50))
INSERT INTO #EmailInfo (ID, Email) VALUES (1, 'test@example.com')
INSERT INTO #EmailInfo (ID, Email) VALUES (2, 'someone@sample.com')
INSERT INTO #EmailInfo (ID, Email) VALUES (3, 'testing@sample.com')
INSERT INTO #EmailInfo (ID, Email) VALUES (4, 'blahblah@blah.com')
INSERT INTO #EmailInfo (ID, Email) VALUES (5, 'example@email.com')
INSERT INTO #EmailInfo (ID, Email) VALUES (6, 'another@goodemail.com')

CREATE TABLE #KeywordInfo (ID INT, Keyword VARCHAR(50))
INSERT INTO #KeywordInfo (ID, Keyword) VALUES (1, 'sample')
INSERT INTO #KeywordInfo (ID, Keyword) VALUES (2, 'test')

SELECT Email 
FROM   #EmailInfo EmailInfo
LEFT JOIN #KeywordInfo KeywordInfo ON Email LIKE '%' + Keyword + '%'
WHERE KeywordInfo.ID IS NULL

DROP TABLE #EmailInfo
DROP TABLE #KeywordInfo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:56:33.473

以下查询将返回 emailinfo 表中没有在keywordinfo 表中定义任何关键字的所有记录。

建议在 emailinfo.email 字段上建立索引以加快查询执行速度。

```
SELECT * FROM emailinfo 
where not exists (Select 1 from
 keywordinfo where emailinfo.email like '%' + keywordinfo.keyword +'%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T13:12:49.327

一个替代的公式消除了类似的：

```
Select
From emailinfo ie
Where not exists (select *
           From  ki
          Where charindex(ki.keyword, ie.email) > 0) 
```

我为格式道歉，我在移动设备上。

我还建议您更改表结构，以便每个关键字位于单独的行中。然后你就不需要 like 运算符了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T01:06:10.577

您是否考虑过使用全文索引，而不是尝试使用 LIKE 提出方案？

Pinal Dave 有一个很好的介绍，可以帮助您入门：http: [//blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)

# css - cfDocument生成的PDF中需要细表边框

> ID：10618917
> 
> 赞同：5
> 
> 时间：2012-05-16T12:49:01.883
> 
> 标签：css, pdf, coldfusion

我正在使用边框折叠 (CSS) 在我的桌子上制作细边框。它们在屏幕上渲染得很好，但是当它们通过 cfDocument 发送到 PDF 中时，它们最终会变成更厚的灰色边框。

我读到 cfDocument 还不支持边框折叠，那么我最好的选择是什么？

冷融合 9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:12:40.550

表格是如此 90 年代，但这似乎对 cfdocument pdf 有效（但在网络浏览器显示上不一致）：

```
.tbl {background-color:#000;}
.tbl td,th,caption{background-color:#fff} 
```

...

```
<table cellspacing="1" class="tbl">
...
</table> 
```

（样式设置中的边框间距不起作用 - 您必须将 attr 放在 table 标记中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T17:46:52.393

我对 cfdocument 中的边框也有同样的问题。以下是我学到的一些技巧：

而不是像这样设置你的CSS：

```
table td {
  border: solid thin black;
} 
```

试试这个：

```
table, table td {
  border: solid black;
}
table {
  border-width: 1px 1px 0 0;
}
table td {
  border-width: 0 0 1px 1px;
} 
```

这明确地使宽度尽可能小。此外，它避免了“加倍”宽度的问题，因为每个单元格都有自己的 1px 边框，然后让它们彼此相邻（因此在单元格之间，您实际上会有 2px 边框）。

此外，您可以减少 cfdocument 标记的“比例”值以减小所有内容的大小，包括边框的厚度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T12:55:42.733

cfdocument 有很多限制。如果您正在寻找 css3 支持、javascript 等，我推荐[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)。它使用 webkit 生成 PDF，因此它支持 Safari/Chrome 支持的大部分内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-07T21:48:42.657

我决定看看 CFDOCUMENT 是否能理解老式的 HTML，因为上述解决方案因浏览器而异。这并不理想，但如果您需要使其工作，这可能会有所帮助：

```
<table cellpadding="1" cellspacing="1" bgcolor="black">
    <tr>
        <td bgcolor="white">Data</td>
        <td bgcolor="white">Data</td>
    </tr>
    <tr>
        <td bgcolor="white">Data</td>
        <td bgcolor="white">Data</td>
    </tr>
    <tr>
        <td bgcolor="white">Data</td>
        <td bgcolor="white">Data</td>
    </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T14:13:37.827

我推荐报告生成器，它会给你细粒度的像素级控制和分页。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-28T16:37:46.387

@gordon，您的解决方案非常接近，它确实在 PDF 上显示了细边框。但它产生了另一个问题——一些边界消失了。我猜这个解决方案适用于简单的表格，而不是复杂的表格。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-24T16:24:57.713

报告生成器仅在您想要快速创建交互式表格类型报告时有用，该报告允许用户取消折叠行以获取更多数据详细信息，这些数据详细信息将成为焦点父行的子行。

我不得不说我发现这非常有用，并且非常接近 SSRS 提供的功能。但是在导出到 pdf 或 excel 时并没有真正的帮助。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-05T09:14:37.873

```
border-bottom: 0.4pt solid #ccc; 
```

# jquery - jQuery post 不工作，数据未定义

> ID：10618919
> 
> 赞同：0
> 
> 时间：2012-05-16T12:49:04.653
> 
> 标签：jquery, post

尝试执行此操作：

```
function getReport(name) {
    $.ajax({
        type: "POST",
        url: "reportAjax.php",
        data: "name="+ name,
        success: function(data){
            var json = $.parseJSON(data);                
        }
    }); 
    alert(data);
}

$(document).ready(function() {
    getReport('mobileDevicesBreakdown_30days');
}); 
```

我越来越`data is not defined`

reportAjax.php 绝对可用并且总是返回一些东西（即使发送给它的变量 - 当前`name`不正确或丢失）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:51:22.367

`alert(data);`在成功回调内部移动：

```
function getReport(name) {
    $.ajax({
        type: "POST",
        url: "reportAjax.php",
        data: "name="+ name,
        success: function(data){
            alert(data);
            var json = $.parseJSON(data);                
        }
    });     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:52:01.863

.ajax 是一个异步方法，所以你`alert(data)`应该在成功部分`.ajax`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:51:53.317

如果您试图提醒数据，它需要在您的成功电话中

```
function getReport(name) {
    $.ajax({
        type: "POST",
        url: "reportAjax.php",
        data: "name="+ name,
        success: function(data){
            var json = $.parseJSON(data);                
            alert(data);
        }
    }); 

} 
```

# node.js - mongoJS 解析 JSON 输出

> ID：10618924
> 
> 赞同：1
> 
> 时间：2012-05-16T12:49:14.097
> 
> 标签：node.js, mongodb, mongojs

我正在玩 nodeJS 和 mongoJS。我已经成功查询了数据库并返回了一组数据：

```
 var databaseUrl = "redirect"; // "username:password@example.com/mydb"
    var collections = ["things", "reports"]
    var db = require("mongojs").connect(databaseUrl, collections);

    db.things.find({url: "google.com"}, function(err, things) {
        if( err || !things) {
            console.log("URL not Found");
        }
        else things.forEach( function(RedirectURL) {
            console.log(RedirectURL);
        } );
    }); 
```

这将返回：

```
{ _id: 4fb2c304f2dc05fe12e8c428,
  url: 'google.com',
  redirect: 
   [ { url: 'www.goolge.com', weight: 10 },
     { url: 'www.google.co.uk', weight: 20 } ] } 
```

我现在需要做的是选择数组的某些元素，例如redirect.weight 或redirect.url。

mongoJS 是否允许我轻松地做到这一点，还是有更好的方法？

任何指针都非常感谢！

里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:01:38.713

MongoJS 实现了 mongo API。对文档内容的调用使用点符号。

所以在上面的例子中，

```
 var weight = RedirectURL.redirect.0.weight 
```

// 等于 10，因为它是重定向数组的第一项。

find 命令也可以使用相同的原理。因此，如果您希望查找权重 = 10 的文档，请使用以下命令

```
 db.things.find({redirect.weight: 10}) 
```

# javascript - 使用 jquery 或纯 javascript 复制 dom 元素的样式

> ID：10618925
> 
> 赞同：0
> 
> 时间：2012-05-16T12:49:25.810
> 
> 标签：javascript, jquery, css

我想知道完成以下任务的最佳方法：使用 jquery 或纯 javascript 代码将一个 dom 元素的样式复制到另一个。

例子：

```
// css file
div.myClass {
    color: red;
} 
```

* * *

```
// html file
<div class="otherClass">
 no style
</div> 
```

* * *

```
// js script
var propertyName = color;
$("div.otherClass").css( propertyName , function () {
    return $("div.otherClass").css(propertyName);
}  ) 
```

js 脚本有效，但我想自动获取 propertyName。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:51:47.167

为什么不将同一类从一个附加到另一个？

```
$("div.otherClass").addClass('myClass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:03:20.160

这是[另一个](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)[jsFiddle](http://jsfiddle.net/shehovn/3AYGg/)的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T12:57:10.573

如果你想替换该元素的样式属性，那么你也可以做这样的事情

```
$("div.otherClass").removeClass("otherClass").addClass("myClass"); 
```

这将首先删除类 otherClass 然后将 myclass 添加到元素

否则约瑟夫的回答效果最好

# c# - 强制注销 - 基本“Active Directory”身份验证

> ID：10618944
> 
> 赞同：0
> 
> 时间：2012-05-16T12:50:51.097
> 
> 标签：c#, asp.net, basic-authentication

如何强制用户退出 IIS Active Directory 身份验证？

清除会话似乎并没有这样做，除非我关闭所有浏览器窗口，否则它不是完全注销..

甚至可以通过代码来做吗？

谢谢！

或者我可以设置身份验证的超时时间吗？似乎现在我可以登录一次，关闭应用程序并在几个小时后返回它，而不必再次输入我的凭据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:56:20.237

可能不可能按照你想要的方式。看看这篇文章[http://visualstudiomagazine.com/articles/2004/05/01/activate-windows-impersonation-selectively.aspx](http://visualstudiomagazine.com/articles/2004/05/01/activate-windows-impersonation-selectively.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:09:32.670

你用`ActiveDirectoryMembershipProvider`吗？你可以试试

```
FormsAuthentication.SignOut();
FormsAuthentication.RedirectToLoginPage(); 
```

# file-io - Verilog I/O 读取字符

> ID：10618945
> 
> 赞同：1
> 
> 时间：2012-05-16T12:50:56.900
> 
> 标签：file-io, io, verilog, modelsim

每当我尝试使用 I/O 进行 verilog 的任何操作时，我似乎都会遇到一些问题。Modelsim 要么抛出某些函数不支持的函数，要么什么都不做。我只需要逐个字符地读取文件并通过端口发送每一位。谁能帮忙

```
module readFile(clk,reset,dEnable,dataOut,done);
parameter size = 4;  
  //to Comply with S-block rules which is a 4x4 array will multiply by
// size so row is the number of size bits wide
parameter bits = 8*size;

input clk,reset,dEnable;
output dataOut,done;

wire [1:0] dEnable;
reg dataOut,done;
reg [7:0] addr;

integer file;
reg [31:0] c;
reg eof;

always@(posedge clk)
begin
 if(file == 0 && dEnable == 2'b10)begin      
    file = $fopen("test.kyle");      
  end    
end

always@(posedge clk) begin
  if(addr>=32 || done==1'b1)begin
    c <= $fgetc(file);
   //  c <= $getc();
    eof <= $feof(file);
    addr <= 0;
  end
end  

always@(posedge clk)
begin
  if(dEnable == 2'b10)begin
    if($feof(file))
        done <= 1'b1;
      else
        addr <= addr+1;
  end
end
//done this way because blocking statements should not really be used
always@(addr)
begin:Access_Data
  if(reset == 1'b0) begin   
    dataOut <= 1'bx;
    file <= 0;
  end
  else if(addr<32)
    dataOut <= c[31-addr];
end 

 endmodule 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T18:31:33.527

我建议一次将整个文件读入一个数组，然后遍历数组以输出值。

下面是如何从文件中读取字节到 SystemVerilog 队列的片段。如果您需要坚持使用普通的旧 Verilog，您可以使用常规数组执行相同的操作。

```
reg [8:0] c;
byte      q[$];
int       i;

// Read file a char at a time
file = $fopen("filename", "r");
c = $fgetc(file);
while (c != 'h1ff) begin
    q.push_back(c);
    $display("Got char [%0d] 0x%0h", i++, c);
    c = $fgetc(file);
end 
```

请注意，`c`它定义为 9 位`reg`. 的原因是`$fgetc`当它到达文件末尾时将返回-1。为了区分 EOF 和有效的 0xFF，您需要这个额外的位。

I'm not familiar with `$feof` and don't see it in the Verilog 2001 spec, so that may be something specific to Modelsim. Or it could be the source of the "function not supported."

# ruby-on-rails - rails autoload_paths 中的错误？

> ID：10618952
> 
> 赞同：2
> 
> 时间：2012-05-16T12:51:25.130
> 
> 标签：ruby-on-rails

我在我的代码中遇到了一个奇怪的错误。我有一个rails应用程序，在lib中有以下两个文件：

lib/module_one/module_two/class_one.rb

```
module ModuleOne
  module Moduletwo
    class ClassOne
      class << self
        def test
          puts 'Class one'
          ClassTwo.test
        end
      end
    end
  end
end 
```

和

lib/module_one/module_two/class_two.rb

```
module ModuleOne
  module ModuleTwo
    class ClassTwo
      def self.test
        puts 'Class two'
      end
    end
  end
end 
```

现在我的问题是，当我进入控制台并编写时：

```
ModuleOne::ModuleTwo::ClassOne.test 
```

它抛出以下内容：`NameError: uninitialized constant ClassTwo`

奇怪的是，这个问题似乎与使用 of`class << self`而不是`self.method`. 如果我像这样更改 class_one.rb 文件，它可以工作！：

```
module ModuleOne
  module ModuleTwo
    class ClassOne
      def self.test
        puts 'Class one'
        ClassTwo.test
      end
    end
  end
end 
```

我在 application.rb 中加载文件，如下所示：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

这是rails中的错误，还是只是我弄错了？

我正在使用 rails 3.1.3 btw

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T10:02:02.263

## 不断查找

所以首先，常量解析的基本过程是 ruby​​ 首先搜索接收者的词法范围（包含引用的类或模块）`ClassTwo`，当它找不到它时，它会上升一个级别（`Module.nesting`返回这个搜索路径） 等等。在您的情况下，这意味着寻找`ModuleOne::ModuleTwo::ClassOne:ClassTwo`, then `ModuleOne::ModuleTwo::ClassTwo`, then`ModuleOne::ClassTwo`等等。

如果失败，ruby 会在封闭类/模块的继承层次结构中查找（例如，ClassOne 的超类定义了一些东西。`ancestors`模块上的方法返回此搜索路径。最后，搜索顶级常量。

## Rails 自动加载

回到 Rails 的神奇加载。在这里`const_missing`，rails 添加了一个钩子，当 ruby​​ 找不到该类时调用该钩子，它基本上试图复制这个搜索逻辑，在每个步骤中查看是否可以加载包含丢失常量的文件。

理想情况下，ruby 会通过搜索路径（即嵌套）进行搜索，但不幸的是它没有：当您引用 时`ClassTwo`，`const_missing`仅使用“ClassTwo”调用。

Rails 通过在其前面加上`const_missing`被调用的类的名称来猜测嵌套（即包含对常量的访问的类）。例如，在您的第二个示例中，它以`ModuleOne::ModuleTwo::ClassOne::ClassTwo`. 您可以通过定义`const_missing`记录它所调用的内容来很容易地看到这一点

```
class Object
  def self.const_missing missing_name
    puts "qualified name is #{self.name}::#{missing_name}"
    super
  end
end 
```

然后 Rails 剥离“ClassOne”并尝试`ModuleOne::ModuleTwo::ClassTwo`等等。

那么为什么会`class << self`有所作为呢？如果您使用`const_missing`日志记录重复第一个案例，您会看到记录的限定名称现在只是`::ClassTwo`. `const_missing`现在正在 ClassOne 的元类上调用，并且由于`class << self`尚未分配给常量，因此它没有名称，因此 rails 试图捏造嵌套的尝试不起作用。

这为一个可怕的解决方法打开了大门：

```
module ModuleOne
  module ModuleTwo
    class ClassOne
      class << self
        def test
          puts 'Class one'
          ClassTwo.test
        end
      end
      FOO = class << self; self; end
    end
  end
end 
```

因为现在调用 const_missing 的类有一个名称 (ModuleOne::ModuleTwo::ClassOne::FOO)，所以现在可以使用 rails 的解决方法。

我认为戴夫的解决方法有效，因为调用了 const_missing`ModuleOne::ModuleTwo::ClassOne`而不是匿名特征类/元类。

真正的解决方法是让红宝石通过`const_missing`嵌套。有一个针对 ruby​​ 的[错误](http://bugs.ruby-lang.org/issues/2740)记录，尽管它已经打开了很长时间。所以是的，这可能被认为是魔法加载中的一个错误（还有其他边缘情况），但根本原因是 ruby​​ api 中的一个弱点，它强制使用脆弱的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:27:11.977

（只是部分答案，但需要格式化。）

这是因为如何`class << self`工作。

例如，如果您将其更改为：

```
class << self
  def test
    self::ClassTwo.test
  end
end 
```

它工作正常。

* * *

*编辑; 太长的合理评论。*

我正在四处寻找......在直观的层面上，这对我来说是有意义的，我只是不知道为什么。不知道我是否知道一个真正的原因，或者我只是在编造。

不过，我不确定为什么`self`似乎是指该模块；“Programming Ruby 1.9”一书没有深入探讨`class <<`语义。我会发推文并参考这个问题，更聪明的人会创建一个真正的答案。

# python - 获取对象名称的问题

> ID：10618955
> 
> 赞同：3
> 
> 时间：2012-05-16T12:51:30.840
> 
> 标签：python, game-engine, blender

我有一个带有几个对象的搅拌机场景，当鼠标悬停在其中一个对象上时，我会得到对象名称，设置一个 empy 对象的属性。我现在拥有的只是场景对象的列表。我能做些什么？

```
import GameLogic
cont=GameLogic.getCurrentController()
obj=cont.getOwner()
print obj
objlist=GameLogic.getCurrentScene().getObjectList()
print objlist
sen=cont.getSensor('sensor')
if sen.isPositive():
    print objlist[0]
    PropName=.... #how to set this with the object name?
    print PropName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:07:19.063

我想您可以使用`SCA_MouseSensor`传感器及其`hitObject`属性来获取鼠标经过的最后一个对象。它返回`None`或`KX_GameObject`类型的对象。当你得到它时，你可以使用它的`name`属性来获取名称（或者只是访问对象的其他属性）。

参考链接：

*   [API 文档中的 SCA_MouseSensor](http://www.blender.org/documentation/blender_python_api_2_59_0/bge.types.html#bge.types.SCA_MouseSensor)
*   [API 文档中的 KX_GameObject](http://www.blender.org/documentation/blender_python_api_2_59_0/bge.types.html#bge.types.KX_GameObject)

我还没有对此进行测试，但我想它在 Blender 游戏引擎中使用时应该可以工作。我找到的信息是指 Blender 2.59，因此请确保使用的是应用程序的适当版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T09:49:16.170

为了对其他人有用，我回答我自己的问题。我所做的是为`mouse over`场景中的每个对象设置一个传感器，并添加一个 python 脚本控制器，以便设置场景的属性`Empty object`。

```
import GameLogic
import Rasterizer as r
r.showMouse(1)   #just in order to get the mouse visible within the game engine
print 'SetProperty.py\n'
cont=GameLogic.getCurrentController()
obj=cont.getOwner()
emptyOb = GameLogic.getCurrentScene().getObjectList()["OBEmpty"]
emptyOb.EmptyProp=obj
print 'object name, within emptyProp: ', emptyOb.EmptyProp 
```

# python - copy.deepcopy 在具有自定义 __new__() 方法的对象上引发 TypeError

> ID：10618956
> 
> 赞同：9
> 
> 时间：2012-05-16T12:51:30.727
> 
> 标签：python, deep-copy

我想实现一个符号类型，它跟踪我们已经拥有的符号（保存在 中`_sym_table`），如果它们存在则返回它们，否则创建新的。编码：

```
# -*- coding: utf-8 -*-

_sym_table = {}

class Symbol(object):
    def __new__(cls, sym):
        if sym not in _sym_table:
            return super().__new__(cls)
        else:
            return _sym_table[sym]

    def __init__(self, sym):
        self.sym = sym
        _sym_table[sym] = self

    def __str__(self):
        return self.sym

    def __cmp__(self, other):
        return self is other

    def __hash__(self):
        return self.sym.__hash__() 
```

但是，当我调用`copy.deepcopy`此类`Symbol`实例的列表时，会引发异常：

```
a = Symbol('a')
b = Symbol('b')
s = [a, b]
t = copy.deepcopy(s) 
```

错误信息：

```
Traceback (most recent call last):
  File "xxx.py", line 7, in <module>
    t = copy.deepcopy(s)
  File "/usr/lib/python3.2/copy.py", line 147, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python3.2/copy.py", line 209, in _deepcopy_list
    y.append(deepcopy(a, memo))
  File "/usr/lib/python3.2/copy.py", line 174, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python3.2/copy.py", line 285, in _reconstruct
    y = callable(*args)
  File "/usr/lib/python3.2/copyreg.py", line 88, in __newobj__
    return cls.__new__(cls, *args)
TypeError: __new__() takes exactly 2 arguments (1 given) 
```

所以我的问题是：

*   如何使用自定义`__new__`方法对这些对象进行深度复制？
*   以及关于何时以及如何使用的任何建议`copy.deepcopy`？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T16:25:24.340

一个问题是，`deepcopy`并且`copy`无法知道要传递哪些参数`__new__`，因此它们仅适用于不需要构造函数参数的类。

`__init__`你可以有参数的原因`__init__`是在复制对象时不调用它，但`__new__`必须调用它来创建新对象。

所以如果你想控制复制，你必须定义特殊的`__copy__`和`__deepcopy__`方法：

```
def __copy__(self):
    return self

def __deepcopy__(self, memo):
    return self 
```

顺便说一句，[单例](http://tech.puredanger.com/2007/07/03/pattern-hate-singleton/)是[邪恶](http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx)的，在 python 中并不真正需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:21:23.813

在我看来，您希望 Symbol 实例是单例。但是，当您想要一个实例的精确副本（即与原始实例相同的不同实例）时，应该使用 Deepcopy。

所以这里的用法有点与 deepcopy 的目的相矛盾。如果你想让它工作，你可以在*Symbol上定义*[__deepcopy__](http://docs.python.org/py3k/library/copy.html#copy.deepcopy)方法。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T08:59:05.097

定义`__getnewargs__`——这样你不仅可以`copy`和`deepcopy`，而且还可以`pickle`。*

# c++ - 如果出现内存分配错误，从 mex 文件中优雅退出

> ID：10618962
> 
> 赞同：0
> 
> 时间：2012-05-16T12:51:51.473
> 
> 标签：c++, matlab, exception, memory-management, mex

我有一个 mex 函数，它采用双精度输入向量，将精度向下转换为临时单精度向量，进行一些处理，然后将处理结果再次向上转换为双精度。

下面的简化代码示例编译并说明了这个过程。

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{           
  int xM = mxGetM(prhs[0]); 
  int xN = mxGetN(prhs[0]);         
  int totalNumElements = xM*xN;       

  plhs[0] = mxCreateDoubleMatrix(xM,xN,mxREAL);

  double* out  = mxGetPr(plhs[0]); 
  double* in   = mxGetPr(prhs[0]);    

  float out32[totalNumElements]; 
  float  in32[totalNumElements]; 

  // ---------> DOWNCAST <---------
  for (int mm = 0; mm < totalNumElements; ++mm)
      in32[mm] = (float)in[mm];
  // ---------- DOWNCAST ----------

  // Do some single precision signal processing (just copy for this example)
  for (int mm = 0; mm < totalNumElements; ++mm)
      out32[mm] = in32[mm];

  // ---------> UPCAST <---------
  for (int mm = 0; mm < totalNumElements; ++mm)
      out[mm] = (double)out32[mm];
  // ---------- UPCAST ---------- 
} 
```

在我的机器上，像这样调用已编译的 mex 函数可以正常工作。.

```
>> x = randn(1e6,1); y=demo(x); 
```

...但是这样调用它会导致 Matlab 意外关闭

```
>> x = randn(1e7,1); y=demo(x); 
```

看到崩溃是由输入向量的大小增加引起的，我猜测错误是由于内存分配失败造成的。如果发生此类错误，我如何优雅地退出到 Matlab 并给出错误消息？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:36:25.257

# **方法一**

好的，一种方法是用 C-style 替换堆栈分配的变量。. .

```
 float*  in32  =  (float*)mxCalloc(totalNumElements, sizeof(float));
 float*  out32 =  (float*)mxCalloc(totalNumElements, sizeof(float)); 
```

当出现内存错误时，Matlab 巧妙地给出如下错误。. .

> 使用演示时出错 内存不足。
> 
> 键入 HELP MEMORY 作为您的选项。

不需要`try-catch`块或异常。

# **方法二**

另一种方法是使用 C++ 风格`std::exception`。堆栈分配的变量可以替换为以下...

```
 float*  in32;
  float*  out32;
  try
  {
      in32  = new float[totalNumElements];
      out32 = new float[totalNumElements];
  }
  catch (std::exception& e)
  {
      std::string msg = std::string("Aw snap: ") + e.what();
      mexErrMsgTxt(msg.c_str());
  } 
```

当出现内存错误时，Matlab 巧妙地给出如下错误。. .

> 使用演示时出错
> 
> 噢快照：std::bad_alloc

# **笔记**

方法 1 更紧凑，更好地与 mex API 集成。最好在 mex 网关函数中使用方法 1，在库中使用方法 2，这可能不仅仅用于制作 Matlab 扩展。这两种方法都要求您使用`mxFree`( `mxCalloc`solution) 或`delete`( `new`solution) 来收取在堆上为`in32`和分配的内存费用`out32`。我仍然不知道如何检测或处理堆栈溢出

# html - 如何为 Internet Explorer 7 和 8 填充 CSS 3 样式？

> ID：10618973
> 
> 赞同：2
> 
> 时间：2012-05-16T12:52:09.587
> 
> 标签：html, css, cross-browser

我为一个客户工作，他`<a>`的网站上有大量元素，这些元素使用相同的样式并引用相同的类名。

我遇到的问题是在我之前从事这个项目的开发人员使用 CSS3 来设置元素的样式并完全忽略了 IE7 和 IE8 的事实，即使它在浏览器模型的范围内，而且这个问题现在在数百页上都很明显.

我想问的是，您认为最好的方法是在不影响标记的情况下进行适当的修复？例如支持边框半径、盒子阴影、渐变等的脚本。

请不要回来回答关于优雅降级的问题，因为这不会发生，我已经和客户谈过了，他们不想采取这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:57:20.510

您可以使用脚本在使用旧 IE 版本的客户端上为您执行“支持”！

在此处下载[脚本。](http://fetchak.com/ie-css3/ie-css3.htc)

此脚本允许对 Internet Explorer 6、7 和 8 的 CSS3 支持。

网址[链接](http://fetchak.com/ie-css3/)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:04:25.120

对于这个问题，我最喜欢的解决方案是[CSS3 PIE](http://css3pie.com/)。这是一个 HTC，它[为 IE 6-9 带来了精选的 CSS3 功能](http://css3pie.com/documentation/supported-css3-features/)。

**注意：** PIE 使用绝对定位的 VML 元素（在 IE6-8 中）来支持各种 CSS3 功能。这可能会导致诸如背景/边框/等消失的问题。该修复通常用于`position: relative;`受影响的元素或其父元素。[有关更多信息（和其他修复），请参阅已知问题](http://css3pie.com/documentation/known-issues/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T12:55:47.713

我认为没有一种解决方案，但您可以组合多个解决方案，例如对于边框半径，您可以使用 jquery 角：

[http://jquery.malsup.com/corner/](http://jquery.malsup.com/corner/)

modernizr 也可以是一个很好的工具！

# windows - 如何在 Windows 上下文菜单中为具有特定扩展名的文件添加条目？

> ID：10618977
> 
> 赞同：1
> 
> 时间：2012-05-16T12:52:13.780
> 
> 标签：windows, registry, contextmenu

我知道有很多关于如何自定义 shell 上下文菜单的问题，但是我尝试过的方法不起作用，所以我添加了一个新问题。

我想在右键单击扩展名为“.log”的文件时在上下文菜单中添加一个条目“使用日志查看器打开”，以不更改与 .log 文件（记事本）关联的默认应用程序，但允许用户选择一个自定义应用程序来打开它们。

为此，我打开了注册表键`HKEY_CLASSES_ROOT\.log`，并添加了一些`shell\OpenWithLogViewer\command`具有正确值的键，但是当我右键单击扩展名为 .log 的文件时，不会显示该条目。

你知道如何解决这个问题吗？

该键`HKEY_CLASSES_ROOT\.log`具有默认值`txtfile`，并包含一个名为 的子键`PersistentHandler`。这个子键会是问题的根源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T13:13:16.497

添加另一个注册表键（例如`HKEY_CLASSES_ROOT\logfile`），`shell`在该键下创建结构并将键的默认值更改`.log`为`logfile`。一种方法是将以下行保存到`.reg`文件中并将该文件合并到注册表中。

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.log]
@="logfile"

[HKEY_CLASSES_ROOT\logfile]

[HKEY_CLASSES_ROOT\logfile\shell]
@="OpenWithLogViewer"
; make OpenWithLogViewer the default action

[HKEY_CLASSES_ROOT\logfile\shell\OpenWithLogViewer]
@="Open with &Log Viewer"
; set label and access key

[HKEY_CLASSES_ROOT\logfile\shell\OpenWithLogViewer\command]
@="\"C:\\path\\to\\logviewer.exe\" %1" 
```

这将类型 ( `logfile`) 与扩展名 ( `.log`) 分开。这样，您就可以在一个地方为一种类型定义可能的操作，并将任意扩展与该类型相关联。

请注意，您还可以通过使用`HKEY_CURRENT_USER\Software\Classes`而不是在每个用户的基础上定义它`HKEY_CLASSES_ROOT`。用户条目优先于系统条目。当您想要更改文件关联或为您自己的用户添加自定义操作但没有系统管理员权限时，这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-24T13:40:57.130

如果您想为您不“拥有”的文件扩展名添加一个条目并且您不想成为默认操作，那么您可以使用[SystemFileAssociations](https://msdn.microsoft.com/en-us/library/windows/desktop/ee872122(v=vs.85).aspx)键：

```
[HKEY_CLASSES_ROOT\SystemFileAssociations\.log\shell\mycommand]
@="My Command"

[HKEY_CLASSES_ROOT\SystemFileAssociations\.log\shell\mycommand\command]
@="\"c:\\path\\myapp.exe\" \"%1\"" 
```

> 要主动处理更改默认程序的后果，您可以使用 HKEY_CLASSES_ROOT\SystemFileAssociations 来注册动词和其他关联信息。由于它们在关联数组中位于 ProgID 之后，因此这些注册的优先级较低。即使用户更改默认程序，这些 SystemFileAssociations 注册也是稳定的，并提供一个位置来注册始终可用于特定文件类型的辅助动词。

此密钥适用于 Windows XP 及更高版本...

# c# - 在 PHP 中实现 Atwood 的 装备我们的 ASCII 盔甲

> ID：10618980
> 
> 赞同：4
> 
> 时间：2012-05-16T12:52:25.647
> 
> 标签：c#, php, algorithm, encoding, ascii85

我正在尝试在 PHP 中实现类似于 Jeff Atwood 的 [Equipping our ASCII Armor](http://www.codinghorror.com/blog/2005/10/equipping-our-ascii-armor.html)的东西。这[是 ASCII85 的 C# 实现](http://www.codinghorror.com/blog/2005/10/c-implementation-of-ascii85.html)。

这[是ASCII85的PHP实现](http://www.phpclasses.org/browse/file/20092.html)

这是我将字符串转换为字节数组的方法：

```
$byteArr = str_split($uid);
foreach ($byteArr as $key=>$val) {
     $byteArr[$key] = ord($val); 
} 
```

什么？现在:) 如何使用 ASCII 85 编码这个字节数组以获得更短的 UID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:27:21.217

这取决于 PHP 实现（您的链接不起作用）。

如果你使用[这个](http://www.phpclasses.org/package/4052-PHP-Encode-and-decode-data-using-the-ASCII85-algorithm.html)，那么代码很简单：

```
<?php
include("ascii85.php"); 

$a = new ASCII85();
$uid = "YOUR-UID-AS-A-STRING"; 

$en = $a->encode($uid); 
$de = $a->decode($en); 

echo $en."\n\n".$de; 
```

# java - 线程“AWT-EventQueue-0”java.lang.NumberFormatException 中的异常：对于输入字符串：“”

> ID：10618983
> 
> 赞同：0
> 
> 时间：2012-05-16T12:52:41.460
> 
> 标签：java

我正在尝试使用 MySQL 在 java swing 中开发 stockManager 应用程序。运行代码时，我收到以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: ""
at java.lang.NumberFormatException.forInputString(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at java.lang.Integer.parseInt(Unknown Source)
at org.bil.service.StockManager.addNewItem(StockManager.java:355)
at org.bil.service.StockManager.actionPerformed(StockManager.java:163)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) 
```

我附上下面的代码..它有点长..请原谅..

StockManager.java

```
package org.bil.service;

import java.io.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

import org.res.bil.PersonInfo;

import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.util.*;

public class StockManager implements ActionListener {

ArrayList itemList;
StockManagerDAO stockManagerDAO;
// Declaration
JPanel topPanel, bottomPanel;
JScrollPane scrollPane;
JFrame frame;
JMenuBar menubar = new JMenuBar();;
JMenu menu = new JMenu();
JMenuItem menuItem;
Toolkit kit = Toolkit.getDefaultToolkit();
Dimension screenSize = kit.getScreenSize();
int screenHeight = screenSize.height;
int screenWidth = screenSize.width;
Image img = kit.getImage("images/icon.JPG");
String entryDate;
int itemNo;
String itemName;
double unitPrice;
double qty;
double totalPrice;
String supplier;
String remarks;
JTextField txtEntryDate;
JTextField txtItemNo;
JTextField txtItemName;
JTextField txtUnitPrice;
JTextField txtQty;
JTextField txtTotalPrice;
JTextField txtSupplier;
JTextField txtRemarks;
JButton BttnSaveAdded;
// Main
public static void main(String[] args) {

    new StockManager();
}

// Constructor
StockManager() {

    frame = new JFrame("Stock Manager");
    frame.setSize(680, 200);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLocation(screenWidth / 4, screenHeight / 4);
    frame.setIconImage(img);
    frame.show();
    userInterface();
    itemList = new ArrayList();
    stockManagerDAO = new StockManagerDAO();
}

// User Interface
public void userInterface()

{
    menubar.add(menu);
    menu = new JMenu("Options");
    menuItem = new JMenuItem("Add New Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("Delete Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("Search Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("Sort Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("View All Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("Backup Item");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menubar.add(menu);
    menu = new JMenu("Help");
    menuItem = new JMenuItem("Help Contents");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menuItem = new JMenuItem("About");
    menu.add(menuItem);
    menuItem.addActionListener(this);
    menubar.add(menu);
    frame.setJMenuBar(menubar);
    JPanel topPanel = new JPanel();
    JPanel bottomPanel = new JPanel();
    // Add Buttons To Bottom Panel
    JButton addItem = new JButton("Add New Item");
    JButton deleteItem = new JButton("Delete Item");
    JButton searchItem = new JButton("Item");
    JButton sortItem = new JButton("Sort Item");
    JButton viewAllItems = new JButton("View AllItem");

    JLabel label = new JLabel(
            "<HTML><FONT FACE = ARIALSIZE = 2><B>Use The options below and In The Menu To Manage Stock");
    // Add Action Listeners
    addItem.addActionListener(this);
    deleteItem.addActionListener(this);
    searchItem.addActionListener(this);
    sortItem.addActionListener(this);
    viewAllItems.addActionListener(this);
    topPanel.add(label);
    bottomPanel.add(addItem);
    bottomPanel.add(deleteItem);
    bottomPanel.add(searchItem);
    bottomPanel.add(sortItem);
    bottomPanel.add(viewAllItems);
    frame.getContentPane().add(topPanel, BorderLayout.NORTH);
    frame.getContentPane().add(bottomPanel, BorderLayout.SOUTH);
    frame.setResizable(false);

}

public void actionPerformed(ActionEvent ae) {
    if (ae.getActionCommand() == "Add New Item") {
        //totalPrice = unitPrice * qty;
        // txtTotalPrice= totalPrice;
        addNewItem();

    }

    else if (ae.getActionCommand() == "Search Item") {
        searchItem();

    }

    else if (ae.getActionCommand() == "Sort Contacts") {
        sortItems();

    }

    else if (ae.getActionCommand() == "Delete Item") {
        deleteItem();

    }

    else if (ae.getActionCommand() == "View All Items") {

        viewAllItemsInStock();

    }

    else if (ae.getActionCommand() == "About") {
        JOptionPane.showMessageDialog(frame,
         "About StockManager:Helps to manage the stock by adding,deleting,searching and displaying items in the stock,",null, JOptionPane.INFORMATION_MESSAGE);

    } else if (ae.getActionCommand() == "Help Contents") {
        showHelp();

    } else if (ae.getActionCommand() == "Backup Contacts") {
        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new File("."));
        chooser.setMultiSelectionEnabled(false);

        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.showSaveDialog(frame);
        FileOutputStream bfout = null;
        FileInputStream bfin = null;
        String filename = null;

        int p;

        try {
            filename = chooser.getSelectedFile().getPath();
        } catch (Exception e) {
        }

        try {
            bfout = new FileOutputStream(filename + "/data.dat");
        } catch (Exception e) {

        }
        try {
            bfin = new FileInputStream("data/data.dat");
        } catch (Exception e) {

        }

        try {
            do {
                p = bfin.read();
                if (p != -1)
                    bfout.write(p);
            } while (p != -1);
        } catch (Exception e) {

        }

    }

}

private void showHelp() {
    // TODO Auto-generated method stub

}

private void viewAllItemsInStock() {
    /*ResultSet rs= st.executeQuery("Select * from test");
    ResultSetMetaData md = rs.getMetaData();
    int columns = md.getColumnCount();
    for (int i = 1; i <= columns; i++) {
    columnNames.addElement( md.getColumnName(i) );
    }
    while (rs.next()) {
    Vector row = new Vector(columns);
    for (int i = 1; i <= columns; i++) {
    row.addElement( rs.getObject(i) );
    }
    data.addElement( row );
    }
    rs.close();
    st.close();
    }
    catch(Exception e) {}
    JFrame tab=new JFrame();
    JTable table = new JTable(data, columnNames);
    JScrollPane scrollPane = new JScrollPane( table );
    tab.add( scrollPane );
    tab.setVisible(true); 
    tab.setSize(300,100);
    }
    });
    }*/

}

private void deleteItem() {
    // TODO Auto-generated method stub

}

private void sortItems() {
    // TODO Auto-generated method stub

}

private void searchItem() {
    // TODO Auto-generated method stub

}

public void addItemFrame() {
    JFrame newFrame;
    newFrame = new JFrame("Add New");
    newFrame.setSize(220, 250);
    newFrame.setResizable(false);
    newFrame.setIconImage(img);

    JLabel lblEntryDate = new JLabel("Item EntryDate: ");
    JLabel lblItemNo = new JLabel("Item No: ");
    JLabel lblItemName = new JLabel("Item Name: ");
    JLabel lblUnitPrice = new JLabel("Item UnitPrice: ");
    JLabel lblQty = new JLabel("Item Qty: ");
    JLabel lblTotalPrice = new JLabel("Item TotalPrice: ");
    JLabel lblSupplier = new JLabel("SupplierDetails: ");
    JLabel lblRemarks = new JLabel("Remarks: ");
    JLabel lblEmpty1 = new JLabel("");
    JLabel lblEmpty2 = new JLabel("");

    txtEntryDate = new JTextField(10);
    txtItemNo = new JTextField(10);
    txtItemName = new JTextField(10);
    txtUnitPrice = new JTextField(10);
    txtQty = new JTextField(10);
    txtTotalPrice = new JTextField(10);
    txtSupplier = new JTextField(10);
    txtRemarks = new JTextField(10);

    JButton bttnAdd = new JButton("Save");
    JButton bttnCancel = new JButton("Save Added!");

    bttnAdd.addActionListener(this);
    bttnCancel.addActionListener(this);

    JPanel centerPane = new JPanel();
    JPanel bottomPane = new JPanel();

    centerPane.add(lblEntryDate);
    centerPane.add(txtEntryDate);
    centerPane.add(lblItemNo);
    centerPane.add(txtItemNo);
    centerPane.add(lblItemName);
    centerPane.add(txtItemName);
    centerPane.add(lblUnitPrice);
    centerPane.add(txtUnitPrice);
    centerPane.add(lblQty);
    centerPane.add(txtQty);
    centerPane.add(lblTotalPrice);
    centerPane.add(txtTotalPrice);
    centerPane.add(lblSupplier);
    centerPane.add(txtSupplier);
    centerPane.add(lblRemarks);
    centerPane.add(txtRemarks);
    bottomPane.add(bttnAdd);
    bottomPane.add(bttnCancel);
    centerPane.setLayout(new GridLayout(0, 2));

    newFrame.getContentPane().add(centerPane, BorderLayout.CENTER);

    newFrame.getContentPane().add(bottomPane, BorderLayout.SOUTH);
    newFrame.setLocation(screenWidth / 4, screenHeight / 4);
    newFrame.show();

}

public void addNewItem() {
    addItemFrame();
    entryDate = txtEntryDate.getText();
    itemNo = Integer.parseInt(txtItemNo.getText());
    itemName = txtItemName.getText();
    unitPrice = Double.parseDouble(txtUnitPrice.getText());
    qty = Double.parseDouble(txtQty.getText());
    totalPrice = unitPrice * qty;
    supplier = txtSupplier.getText();
    remarks = txtRemarks.getText();

    if (itemName.equals("")) {
        JOptionPane.showMessageDialog(null, "Please enter Item name.");
    }
    if (txtUnitPrice.getText() == "") {
        JOptionPane.showMessageDialog(null,
                "Please enter UnitPrice for the item");
    }
    if (txtQty.getText() == "") {
        JOptionPane.showMessageDialog(null,
                "Please enter Quantity of item to be added");
    } else {

        Items item = new Items(entryDate, itemNo, itemName, unitPrice, qty,
                totalPrice, supplier, remarks);
        stockManagerDAO.addNewItem(item);
        JOptionPane.showMessageDialog(null, "Person Saved");
    }
}

} 
```

项目.java

```
public class Items
{
  String entryDate;
   int itemNo;
   String itemName;
   double unitPrice;
   double qty;
   double totalPrice;
   String supplier;
   String remarks;

  // default constructor
  public Items()
  {       
    entryDate ="" ;
    itemNo = 0;
    itemName="";
    unitPrice=0;
    qty=0;
    totalPrice=0;
    supplier="";
   remarks="";
  }

public Items(String entryDate,int itemNo,String itemName,double unitPrice,double qty,double totalPrice,String supplier,String remarks)
{
    this.entryDate = entryDate;
    this.itemNo = itemNo;
    this.itemName = itemName;
    this.unitPrice = unitPrice;
    this.qty =qty;
    this.totalPrice=totalPrice;
    this.supplier=supplier;
    this.remarks=remarks;
} 
//getter and setter methods
   } 
```

StockManagerDAO.java

```
package org.bil.service;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Vector;

import javax.swing.ButtonGroup;
import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

import org.res.bil.PersonInfo;

class StockManagerDAO
{
private ArrayList itemList;
private String userid = "root";
private String password = "sa";
static String url = "jdbc:mysql://localhost/test";; 
private Connection con;

public void StockManagerDAO()
{
    itemList = new ArrayList();
    getConnection();        //Create Connection to the Oracle Database
}

public Connection getConnection(){

    try {
        Class.forName("com.mysql.jdbc.Driver"); 

    } catch(java.lang.ClassNotFoundException e) {
        System.err.print("ClassNotFoundException: ");
        System.err.println(e.getMessage());
    }

    try {
        con = DriverManager.getConnection(url, userid, password);
    } catch(SQLException ex) {
        System.err.println("SQLException: " + ex.getMessage());
    }

    return con;
}

/*public ArrayList searchItem(String name)
{
    try {
        String sql = "SELECT * FROM Item WHERE name like '%"+name+"%'";

        // Create a prepared statement
        Statement s = con.createStatement();

        ResultSet rs = s.executeQuery(sql);

        String itemname = "";
        String itemno = "";
       ........

        while(rs.next())
        {
            id = rs.getInt("id");
            pname = rs.getString("name");
            address = rs.getString("address");
            phone = rs.getInt("phone");
            email = rs.getString("email");

            //Create a Item object
            PersonInfo person = new PersonInfo(id, pname, address, phone, email);

            //Add the person object to array list
            personsList.add(person);
        }
    }
    catch(Exception e){
        System.out.println(e);
    }

    return personsList;
} 
*/
public void addNewItem(Items item) {

    try
    {

        String sql = "INSERT INTO stock(ItemNo ,ItemEntryDate, ItemName, ItemUnitPrice, ItemQty, ItemTotalPrice,ItemSupplier, ItemRemarks) VALUES (?,?,?,?,?,?,?,?) ";

        // Create a Preparedstatement
        PreparedStatement ps = con.prepareStatement(sql);

        ps.setInt(1,item.getItemNo());
        ps.setString(2, item.getEntryDate());
        ps.setString(3, item.getItemName());
        ps.setDouble(4, item.getUnitPrice());
        ps.setDouble(5, item.getQty());
        ps.setDouble(6, item.getTotalPrice());
        ps.setString(7, item.getSupplier());
        ps.setString(8, item.getRemarks());

        ps.executeUpdate();
    }
    catch(Exception e){
        System.out.println(e);
    }
// TODO Auto-generated method stub

}

} 
```

..请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:00:16.803

看起来您正在尝试将空字符串 ( `""`) 解析为整数 (in `Integer.parseInt(txtItemNo.getText())`in `StockManager.addNewItem()`)。

您将需要确保 的内容不为空，或者更好的是，在解析无效字符串时`txtItemNo`捕获。`NumberFormatException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T13:05:36.930

这意味着您`txtItemNo`没有文本，在解析之前检查它并在它无效时显示错误（或捕获异常并在 catch 块中显示错误）

# javascript - 获取超过 x 次调用的所有 JSON 条目

> ID：10618986
> 
> 赞同：0
> 
> 时间：2012-05-16T12:52:51.163
> 
> 标签：javascript, jquery, json, pagination, loops

我正在访问一个 json 文件，该文件每页有 50 个条目，超过 x 个页面。我有条目总数，比如 500 - 相当于 10 页。

我从 json 文件中获取第 1 页的数据，将数据传递给数组，然后重复该函数，但这次是第 2 页。

我已经创建了这个函数，它循环完美地递增和获取每一页，但它不会等待 json 数据被解析并在再次循环之前传递给数组。

基本上我想等到数据处理完毕后再继续。

到目前为止，我的代码大致是这样的：

```
function getJsonData(metroID){
        currentPageNo = 0;
        totalPages = 'x';
        count = 0;

    function jsonLoop(){    
        meroAreaSearchString = 'http://jsonurl'+currentPageNo;

        $.getJSON(meroAreaSearchString,{},function( data ){ 
            if(totalPages == 'x'){
                var totalEntries = data.resultsPage.totalEntries;
                var perPage = data.resultsPage.perPage;
                totalPages = (totalEntries/perPage);
                log(totalEntries+', '+perPage+', '+totalPages);
                log(Math.round(totalPages));
            }
            $.each(data.resultsPage.results.event, function(i,item){
                var name = item.displayName;
                var type = item.type;
                var valueToPush = new Array();
                valueToPush[0] = name;
                valueToPush[1] = type;
                valueToPush[3] = count;
                locations.push(valueToPush);
                count++;    
            });
            });

            if(currentPageNo == totalPages){
                log(locations);
                alert('finished processing all results');
            }else{
                currentPageNo++;    
                jsonLoop();
            }
                currentPageNo++;    
                jsonLoop();
        }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:00:54.887

您是否尝试过使请求同步？只需将这段代码放在函数 getJsonData 的顶部即可

```
$.ajaxSetup({async:false}); 
```

您可以将 async 选项指定为 false 以获取同步 Ajax 请求。这将停止您的函数，直到回调设置一些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:02:16.540

该`$.getJSON()`函数触发一个 AJAX 请求，并在 AJAX 调用成功解析时调用它的回调函数，如果这有意义的话。

基本上，这只是意味着给定一个 call `$.getJSON(url,data,callback);`，jQuery 将触发一个 AJAX 请求以`url`传递`data`它，并`callback`在该调用解决时调用。清晰的直截了当。

您在这里缺少的是 AJAX 调用就是这样——顾名思义，它的**asynchronous**。这意味着在 AJAX 调用的整个生命周期中，它让应用程序中的其他逻辑运行而不是等待它完成。

所以是这样的：

```
$.getJSON(url, data, callback);
alert('foo'); 
```

...很可能会导致在`alert()`您的 AJAX 调用完成之前发生调用。我希望这是有道理的。

为了确保在您的 AJAX 调用完成*后*发生某些事情，您将该逻辑放在回调中。这就是回调的真正用途。

```
$.getJSON(url, data, function (d) {

    something_you_want_done_after_ajax_call();

}); 
```

在您的问题的上下文中，您只需将所有有条件的召回`jsonLoop()`放入您的回调中。由于您的缩进，现在不是很明显，但它目前在您的回调之外。

# java - 构建支持 Eclipse 项目的 RCP

> ID：10618995
> 
> 赞同：1
> 
> 时间：2012-05-16T12:53:08.827
> 
> 标签：java, eclipse, eclipse-rcp, rcp

我想从我们现有的 Eclipse 插件集合中创建一个 Eclipse RCP。我们有一个特点，在我们的 RCP 中，我们希望用户能够打开（“导入”）Eclipse 项目（我们以 Eclipse 项目的形式将我们的一些功能分发到包中。这些应该在工作区中注册，因为模型服务器扫描打开的项目并加载它们）。此外，当我通过 File->open 打开文件时，我们的内部编辑器会抛出异常：只有在加载导入的资源时才可能有意打开文件。

目前，我已经通过依赖 org.eclipse.core.resources 和 org.eclipse.ui.navigator.resources 让 RCP 工作。因此，我可以导入完整的 Eclipse 项目。但是，我不确定 [1] 这是正确/“有意”的做法（例如，导航器视图默认缺少图标）我是否应该使用 CNF？

最主要的是，我们必须支持在 RCP 中加载/导入 Eclipse 项目。如果您知道其他允许导入 Eclipse 项目的 RCP，您的回答甚至会很有帮助。

问候超级用户

[1] [http://wiki.eclipse.org/RCP_FAQ#Is_the_resources_plug-in_.28org.eclipse.core.resources.29_considered_pa​​rt_of_the_Rich_Client_Platform.3F](http://wiki.eclipse.org/RCP_FAQ#Is_the_resources_plug-in_.28org.eclipse.core.resources.29_considered_part_of_the_Rich_Client_Platform.3F)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:17:13.847

如果您使用的是 org.eclipse.ui.navigator.resources，那么您使用的是 CNF（它是 org.eclipse.ui.navigator）。

您拥有的链接是相当过时的信息，在 RCP 应用程序中使用 Eclipse 资源支持将可以正常工作（我们的产品可以做到）。然后，如果您想将应用程序打包为作为 RCP 或在 IDE 环境中工作，那么您离我们更近了一步。此外，尽管您提供的链接说明了什么，但如果您需要，请不要害怕使用 org.eclipse.ui.ide 中的内容。您真正需要关心的是确保您只使用实际 Eclipse API 的类，如果您这样做，那么一切都将适用于未来的 Eclipse 版本。任何公开的都是 Eclipse API，除非它在 ​​Javadoc 中被标记为不打算由客户端使用。

您*不*应该使用资源导航器，因为它已被弃用并且不像 CNF 那样通用。

至于使用 RCP 导入和导出 Eclipse 项目，我们的产品也能做到这一点，而且运行良好。

我会说你在正确的轨道上。

# asp.net - 我可以将 App_Themes css 文件与 Microsoft.Web.Optimization 捆绑在一起吗？

> ID：10618998
> 
> 赞同：10
> 
> 时间：2012-05-16T12:53:28.470
> 
> 标签：asp.net, webforms, minify, bundling-and-minification, app-themes

有谁知道是否可以使用 Microsoft.Web.Optimization 捆绑和缩小 WebForms App_Themes？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T10:24:20.120

这可能是一个可能的解决方案，我是这样做的：

> 那么我们如何在 App_Theme 文件夹中动态注册一些 CSS 文件，而不会将默认文件呈现给客户端呢？简短的回答是，你不能。长答案是，我们可以通过一些工作来解决。

[使用 Asp.Net WebForms App_Themes 的捆绑和缩小 Web 优化](http://boniestdeveloper.net/post/2012/10/30/Using-the-Bundling-and-Minification-Web-Optimisations-with-AspNet-WebForms-App_Themes.aspx)

# php - 使用php打印文件

> ID：10618999
> 
> 赞同：2
> 
> 时间：2012-05-16T12:53:32.780
> 
> 标签：php, printing

我有一个关于使用 php scripting 打印文件的问题。

服务器上是否安装了任何 linux 打印库？我已经用 exec 、 shell_exec 和 system functions 尝试了 lpr 命令。但非主题对我有用。

示例 1：

```
$filedir = "/home/user/domains/domain.com/public_html/print/file/test.txt"  ;
echo shell_exec("lpr $filedir"); 
```

示例 2：

```
$filedir = "/home/user/domains/domain.com/public_html/print/file/test.txt"  ;
echo shell_exec("lpr -P printername $filedir"); 
```

示例 3：

```
$filedir = "/home/user/domains/domain.com/public_html/print/file/test.txt"  ;
echo exec("lpr $filedir"); 
```

示例 4：

```
$filedir = "/home/user/domains/domain.com/public_html/print/file/test.txt"  ;
echo shell_exec("lpr -P printername $filedir"); 
```

示例 5：

```
$filedir = "/home/user/domains/domain.com/public_html/print/file/test.txt"  ;
echo system("lp $filedir"); 
```

[我也在这里](http://www.phpkode.com/scripts/item/php-print/)尝试过这个课程 ，但它向我显示了一个警告消息并且什么也不打印

警告：stream_socket_client() [function.stream-socket-client]：无法连接到 /home/user/domains/domain.com/public_html/print/PrintSendLPR 中的 tcp://1.1.1.1:515（连接超时） .php 在第 122 行

我也检查了很多例子，比如[这里](https://stackoverflow.com/questions/5694144/printing-over-network-from-php-app)、[这里](http://phpdave.wordpress.com/tag/lpr/)和[这里](https://stackoverflow.com/questions/377135/how-to-convert-documents-to-pdf-on-a-linux-php-stack)

请有任何帮助！我必须打印出一个托管在 Linux 服务器上的带有 php 代码的文件，我需要连接到用户的默认打印机或将打印机库/驱动程序安装到服务器中。

非常感谢