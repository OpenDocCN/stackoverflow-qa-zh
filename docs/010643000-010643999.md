# StackOverflow 问答 10643000-10643999

# php - 在 Eclipse 中配置 PHP 项目

> ID：10643001
> 
> 赞同：2
> 
> 时间：2012-05-17T20:26:51.410
> 
> 标签：php, eclipse

我在 Eclipse 中创建了一个 PHP 项目。当我需要运行项目时，我需要选择一个特定的文件并运行它。每当我选择项目并单击运行按钮时，如何定义要运行的默认文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:00:01.727

在运行按钮菜单下选择*运行配置*。然后选择 PHP CLI 应用程序或 PHP Web 应用程序。您可以在此处指定运行项目时要使用的文件。如果您只启用了一个运行配置，那么这就是您按下运行按钮时将运行的配置。

您可以阅读本文的[执行](http://www.tigerheron.com/article/2008/01/eclipse-and-php)*PHP*部分以了解更多详细信息。

# c++ - C++ 使用对字符串的引用作为别名

> ID：10643005
> 
> 赞同：1
> 
> 时间：2012-05-17T20:27:11.707
> 
> 标签：c++, string

使用对象的引用作为别名总是安全的吗？例如，一个字符串：

```
std::string test;
std::string &reftest( test );
std::cout << "test before: " << test << "\n";
std::cout << "reftest before: " << reftest << "\n";
reftest = "abc";
std::cout << "test after: " << test << "\n";
std::cout << "reftest after: " << reftest << "\n"; 
```

是否保证 reftest 和 test 将始终具有相同的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:32:19.500

如果您将参考视为昵称，这会有所帮助。即使你在说`reftest`，你仍然*指*的是`test`。所以，简而言之，是的。

**请注意**，有一些限制。例如，以下不是标准的：

```
std::string &reftest( std::string("test") ); 
```

但是这个

```
const std::string &reftest( std::string("test") ); 
```

是，因为 const 引用可以绑定到临时对象，而非 const 引用不能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T20:32:50.373

它们*是*同一个字符串，就像一个叫罗伯特的人叫鲍勃一样。

正如您所说，这只是同一事物的两个名称-别名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T20:32:29.057

是的。这两个名称指的是同一个对象。

尽管名称之间存在一些差异。例如`decltype(reftest)`，不会产生与 相同的类型`decltype(test)`。

正如其他人指出的那样，有一些方法可以获得不合法使用的引用，但在这些情况下，这是因为引用不是合法变量的别名。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T20:34:11.267

在你的例子中是的，但有*一些*陷阱：

```
struct X {
  std::string& s;
  X(std::string& s) : s(s) {}
};
struct Y {
  std::string s;
};

int main() {
  Y* y = new Y();
  X x(y->s);
  delete y;
  // now, x.s is dangling, as it refers to y->s, which is gone.
  std::cout << x.s << std::endl; // <- segfault
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T20:31:50.067

是的。它们都指向内存中的相同位置。输出每个变量的地址，你会看到这个。

# html - 如何将文本字段和按钮的 div 放在一行中（对于 mailchimp 注册表单）？

> ID：10643009
> 
> 赞同：1
> 
> 时间：2012-05-17T20:27:19.030
> 
> 标签：html, css-float, inline, mailchimp

我正在尝试将时事通讯的注册表单（来自 mailchimp）添加到网页，并希望将文本字段和按钮放在一行中（在页脚中）。

[http://jsfiddle.net/DW2Xd/](http://jsfiddle.net/DW2Xd/2/)

我已经尝试过针对类似问题给出的建议，特别是使用“float-left”或“inline”样式，但没有运气。

有什么建议我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:38:31.140

不是 100% 确定你想要什么，但听起来像这样

[http://jsfiddle.net/DW2Xd/4/](http://jsfiddle.net/DW2Xd/4/)

删除窗体上的显示样式。

希望这就是你要找的。

# html - 浮动的 div 就像一个 clear: left 应用

> ID：10643012
> 
> 赞同：2
> 
> 时间：2012-05-17T20:27:53.513
> 
> 标签：html, css, css-float

我遇到了浮动 div 的问题。在寻找答案时，大多数问题是如何实现我得到的效果，而不是如何实现我想要的。基本上我是浮动 div 来创建 3 列，所需的结果是第四个 div，它应该在第一个 div 正下方的第 1 列中，从第三个浮动 div 以高度结束的地方开始，而不是在它正上方的地方，第一个 div，结束。最新 chrome 中的以下代码演示了我不想要的内容。

我得到的效果就像我期望的那样清晰：左；如果应用于第四个浮动 div 则表现。

下面的代码仅适用于 3 * 400px 小于屏幕宽度但 4 * 400 大于屏幕宽度的分辨率。

这张图片显示了正在发生的事情，我想要第四个 div，我用箭头而不是它所在的位置显示：http: [//img687.imageshack.us/img687/2613/desired.png](http://img687.imageshack.us/img687/2613/desired.png)

```
<html>
    <head>
        <style>
        .div1
        {
            float: left;
            background-color: black;
            height: 100px;
            width: 400px;
        }
        .div2
        {
            background-color: red;
            height: 200px;
            width: 400px;
            float: left;
        }
        .div3
        {
            float: left;
            background-color: blue;
            height: 500px;
            width: 400px;
        }
        .div4
        {
            background-color: green;
            float: left;
            height: 100px;
            width: 400px;
        }
    </style>
</head>
<body>

    <div class="div1"></div>
    <div class="div2"></div>
    <div class="div3"></div>
    <div class="div4"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:51:53.210

从[W3](http://www.w3.org/TR/CSS2/visuren.html#float-position)开始：

> 浮动框的外部顶部不得高于源文档中早期元素生成的任何块或浮动框的外部顶部。

您可能对[jQuery masonry 插件](http://masonry.desandro.com/)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:47:31.380

如果您能够稍微更改 HTML，那么您可以将 div1 和 div4 组合在一起：

```
<html>
    <head>
        <style>
        .group1 {
            float: left;
        }
        .div1
        {
            float: left;
            background-color: black;
            height: 100px;
            width: 400px;
        }
        .div2
        {
            background-color: red;
            height: 200px;
            width: 400px;
            float: left;
        }
        .div3
        {
            float: left;
            background-color: blue;
            height: 500px;
            width: 400px;
        }
        .div4
        {
            clear: both;
            background-color: green;
            height: 100px;
            width: 400px;
        }
    </style>
</head>
<body>

    <div class="group1">
        <div class="div1"></div>
        <div class="div4"></div>
    </div>
    <div class="div2"></div>
    <div class="div3"></div>

</body>
</html>​​​ 
```

# django - 使用脚本加载 Django 数据库

> ID：10643014
> 
> 赞同：0
> 
> 时间：2012-05-17T20:27:57.073
> 
> 标签：django, model

我正在寻找使用 Python 脚本用数据填充我的 Django 模型字段。我知道，如果您有一个 Publisher 模型，您可以进入`python manage.py shell`并执行以下操作：

```
>>> from books.models import Publisher
>>> p1 = Publisher(name='Apress', address='2855 Telegraph Avenue',
...     city='Berkeley', state_province='CA', country='U.S.A.',
...     website='http://www.apress.com/')
>>> p1.save() 
```

我如何在 Python 脚本中运行类似的代码而不进入 manage.py shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:30:28.353

您需要自己[指向设置](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)。

# c# - 正则表达式匹配网站，只有 http 没有 www

> ID：10643015
> 
> 赞同：0
> 
> 时间：2012-05-17T20:28:06.783
> 
> 标签：c#, .net, html, regex

我想从 HTML 代码中获取所有网站。问题是我有一个正则表达式，它接受所有的 URL，但`www`地址中需要有。我需要使用哪种正则表达式来获取`www`内容中没有的 URL？

更新：我使用的正则表达式是：

```
string anchorPattern = 
  @"(?<Protocol>\w+)://(?<Domain>[\w@][\w.:@]+)/?[\w.?=%&=\-@/$,&amp;+]*'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:09:14.283

仅为具有 www 的网址添加 (?=www)

```
@"(?<Protocol>\w+)://(?=www)(?<Domain>[\w@][\w.:@]+)/?[\w.?=%&=\-@/$,&amp;+]*" 
```

或添加 (?!www) 以表示没有 www 网址

```
@"(?<Protocol>\w+)://(?!www)(?<Domain>[\w@][\w.:@]+)/?[\w.?=%&=\-@/$,&amp;+]*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:29:34.357

一个像你一样，但没有看起来像的正则表达式部分`www\.`

# php - 领域模型中的水平扩展模式

> ID：10643019
> 
> 赞同：1
> 
> 时间：2012-05-17T20:28:18.710
> 
> 标签：php, oop, zend-framework, doctrine

我希望能够扩展我的一些模型。一个用例：我有一个带有`User`模型（和适当的控制器 + 视图）的用户模块。然后我有另一个模块（比如 Foo），我想从中添加一个属性`User`（称为 Bar）。

我使用 php、Zend Framework 和 Doctrine，但我正在考虑一种模式，因此不一定适用于这些框架。它更多的是关于架构而不是实现。这可能吗？最好的模式是什么？

我想要这种架构，因为否则你会创建一个`FooUser`模型，它有一个属性`user_id`and `foo`，导致有连接（并且对于每个扩展，你都有连接，这会严重影响性能）。有解决方案吗？

# c# - 更改表单背景图像占用太多内存

> ID：10643021
> 
> 赞同：0
> 
> 时间：2012-05-17T20:28:20.560
> 
> 标签：c#, .net, winforms, memory

我在 Windows 窗体中创建了一个小游戏，并使用属性背景图像。我创建新的位图并将其提供给表单。问题是，该程序使用了太多的内存——每次它创建新的位图的过程都会增加更多的 2k！过了一会儿，我猜垃圾收集器将它们全部删除（内存立即下降），但它可以达到 800k，这对我的小游戏来说太荒谬了。在我将位图放到表单属性之后，我没有任何对位图的引用，即使我将位图设置为空，问题也没有解决。我能做些什么来解决这个内存问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:32:08.523

在设置新图像之前获取对前一个图像的引用，以便您可以处理它：

```
Image oldImage = this.BackgroundImage;
this.BackgroundImage = newImage;
oldImage.Dispose(); 
```

# asp.net-mvc-3 - 将原始 html 转储到 Telerik 网格

> ID：10643029
> 
> 赞同：9
> 
> 时间：2012-05-17T20:29:05.597
> 
> 标签：asp.net-mvc-3, razor, telerik

我有一个使用 Telerik 网格的 MVC3 应用程序。我有一个带有 html 的变量，我想显示原始数据：

```
 o.RawHtml = "This is a <br/> Test";

   @(Html.Telerik().Grid(Model)
   .Columns(columns =>
    {
        columns.Bound(o => o.RawHtml).ClientTemplate("<#= RawHtml #>").Title("Raw");

       }) 
```

根据 Telerik 样本，这应该可以，但它没有。浏览器中的输出显示
“这是一个 < br/> 测试”

而不是想要的：

```
 This is a
  Test 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-17T20:38:52.487

您是否尝试将`Encoded`列的属性设置为`false`？[此页面](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-columns.html)提供了一些信息。

```
<%= Html.Telerik().Grid(Model)
    .Name("Orders")
    .Columns(columns =>
    {
        columns.Bound(o => o.OrderID).Encoded(false);
    })
%> 
```

默认情况下，列是 html 编码的。

# java - 无法从站点获取服务器证书

> ID：10643032
> 
> 赞同：2
> 
> 时间：2012-05-17T20:29:21.710
> 
> 标签：java, https, certificate, urlconnection

我无法从我的网站（其他网站都没有）获得证书。我尝试了一些解决方案`HttpsURLConnection`和方法`getServerCertificates`，但没有解决问题。

```
 URL httpsURL = new URL("https://www.google.com.br/");
 HttpsURLConnection connection = (HttpsURLConnection)httpsURL.openConnection();
 Certificate[] certs = connection.getServerCertificates(); 
```

我收到一个异常说“getServerCertificates 无法解析”。

我认为没有必要使用密钥库，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T15:11:59.657

> 我收到一个异常，说 getServerCertificates 无法解析..

那很奇怪。你确定你使用的是正确的类吗？如果我运行此代码：

```
import java.io.IOException;
import java.net.URL;
import java.security.cert.Certificate;

import javax.net.ssl.HttpsURLConnection;

public class Test {
    public static void main(String[] args) throws IOException {
        URL httpsURL = new URL("https://www.google.com.br/");
        HttpsURLConnection connection = (HttpsURLConnection) httpsURL.openConnection();
        connection.connect();
        Certificate[] certs = connection.getServerCertificates();
        for (Certificate cer : certs) {
            System.out.println(cer.getPublicKey());
        }
    }
} 
```

我得到如下结果：

```
Sun RSA public key, 1024 bits
  modulus: 13069990984429476578...
  public exponent: 65537
Sun RSA public key, 1024 bits
  modulus: 14179907349200548596...
  public exponent: 65537 
```

验证您使用的是什么 SSL 套接字工厂，可能有问题。将此添加到您的代码中并查看它的结果（例如，对我来说是`com.sun.net.ssl.internal.ssl.SSLSocketFactoryImpl`）：

```
System.out.println(connection.getSSLSocketFactory().getClass());
System.out.println(connection.getDefaultSSLSocketFactory().getClass()); 
```

# asp.net - 从 WPF/WinForm 浏览器控件调用的 mailto 标记中的多个收件人

> ID：10643033
> 
> 赞同：1
> 
> 时间：2012-05-17T20:29:23.923
> 
> 标签：asp.net, html

有谁知道如何构建一个包含多个收件人的 mailto 标记，该标记将在 WPF/WinForms 浏览器控件中工作。

我使用的格式是

```
mailto:email1@test.com;email2@test.com 
```

由于某种原因，在浏览器控件中单击此链接时，我无法启动常规 Outlook。但是，它确实适用于单个电子邮件地址。

此外，我能够使用相同的链接格式（普通浏览器而不是浏览器控件）使其与标准 Internet Explorer 中的多个收件人一起使用

该链接是动态构建的，因此它必须适用于可变的收件人列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T06:08:32.623

似乎**mailto:**之后的多个收件人不受官方支持 -[请参阅此链接](http://www.sightspecific.com/~mosh/WWW_FAQ/multrec.html)。但是，您可以使用**cc**和**bcc**标签，例如

```
<a href="mailto:noone@snai1mai1.com?subject=test&cc=buddys@snai1mai1.com,
         buddy2@snail1mail.com&bcc=secretfriend@snai1mai1.com" >Send email</a> 
```

在 WPF 浏览器中运行良好。（注意：删除仅用于格式化的换行符。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T14:14:26.613

扩展上面@Phil 的答案，您可以静态设置`mailto:myself@mydomain.com`, 或`mailto:blackhole@mydomain.com`，然后使用您要向其发送电子邮件的地址列表动态创建 cc/bcc 字段。这样，您仍然遵循 mailto 字段中只有一封电子邮件的约定，但您也可以继续在 cc/bcc 字段中动态创建收件人列表。

特别是如果这是发送给彼此不认识的人（如在邮件列表中），最佳做法是将这些电子邮件放在密件抄送字段中，这样人们的电子邮件地址就会保密（密件抄送 == 密件抄送） .

**编辑：**另一种方法可能是在链接上使用 JavaScript 并使用`location.href=mailto:person1@domain.com,person2@domain.com`，但我不能保证它会起作用 =/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T14:23:55.497

您可以使用

```
mailto:email1@test.com?to=email2@test.com&to=other@email.com&to=more@emails.com 
```

因此，您可以添加多个`to=...`以便在 to 字段中添加多个收件人。

您当然可以将 替换为`to`或`cc`向`bcc`这些字段添加多个收件人。

***免责声明**：这可能不是官方的做法，但我使用的大多数客户似乎都支持它。*

# extjs4 - Extjs4，如何更新窗口 bbar（工具栏）？

> ID：10643037
> 
> 赞同：0
> 
> 时间：2012-05-17T20:29:38.713
> 
> 标签：extjs4

我想动态更新 Extjs 窗口 bbar(toolbar)，但我不知道我应该如何让它工作，

示例代码：

```
var myWin = Ext.create('Ext.window.Window', {
    modal: true,
    layout: 'fit',
    items: {
    // panel
    },
    bbar: ['->', {
    xtype: 'buttongroup',
    items: [{
        text: 'Cancel',
        handler: function () {
        invoicingWin.destroy();
        }
    }]
    }, {
    xtype: 'buttongroup',
    items: [{
        text: 'Continue',
        handler: function () {

        var test = new Ext.Toolbar({
            dock: 'bottom',
            items: ['->', { html: "Close"}]
        });

        //  !! I want to replace this window bbar to test(toolbar)

        } // btn handler
    }]// items
    }]
}).show(); 
```

有谁知道，请帮帮我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T04:13:33.287

我不认为这是一个好的解决方案。但它会起作用。

```
var myWin = Ext.create('Ext.window.Window', {
    modal: true,
    layout: 'fit',
    width:400,
    height:400,
    items: {
    // panel
    },
    bbar: ['->', { 
    xtype: 'buttongroup',
    items: [{
        text: 'Cancel',
        handler: function () {
        invoicingWin.destroy();
        }
    }]
    }, {
    xtype: 'buttongroup',
    items: [{
        text: 'Continue',
        handler: function () {

        var test = new Ext.Toolbar({
            dock: 'bottom',
            items: ['->', { html: "Close"}]
        });
        myWin.removeDocked(myWin.down('toolbar'));
        myWin.addDocked(test);
        //  !! I want to replace this window bbar to test(toolbar)

        } // btn handler
    }]// items
    }]
}).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:59:11.980

IMO，ExtJS 不希望替换面板的工具栏（以及面板的后代）。通常，工具栏将包含所需项目的列表，您只需隐藏/显示它们。

实际上，您仍然可以使用`getDockedItems()`, `getDockedComponent()`, `addDocked()`, `insertDocked()`,`removeDocked()`来满足您的需求。

# c# - 如何将 sql 连接字符串值传递给 C# 程序

> ID：10643038
> 
> 赞同：1
> 
> 时间：2012-05-17T20:29:49.303
> 
> 标签：c#

我对编程世界很陌生（对不起，如果这个问题已经被回答了很多次，至少我没有从搜索互联网中得到任何线索），我最近正在尝试构建一个 C sharp 应用程序。这个exe会在另一个程序中被调用，调用时，程序会传递一个sql连接字符串值给c sharp exe app。我的问题是如何让应用程序获得价值。

连接字符串应该看起来像

```
“Provider=SQLOLEDB.1;Password=xxxxxxxx;Persist Security Info=True;User
ID=xxxxxxxx;Initial Catalog=ATTACH;Data Source=LNGSEAL136504A;
Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Workstation 
ID=LNGSEAL136504A;Use Encryption for Data=False;Tag with column collation when 
possible=False” 
```

我写的是：这是我的代码：class Program { static void Main(string[] args) { Console.WriteLine("its running!"); Console.ReadKey(); 尝试 {

```
 int Len;
            string cnn = null;
            Len = args.Length;
            for (int i = 0; i < args.Length; i++)
            {
                cnn = cnn + " " + args[i];
            }
            Console.WriteLine(cnn);
            Console.WriteLine(Len);               

            Console.ReadKey();

            ADODB.Connection mycnn = new ADODB.Connection();
            mycnn.Open(cnn);
            ADODB.Recordset rs = new ADODB.Recordset();
            rs.Open("sql statements", mycnn);

            mycnn.Close();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
            Console.ReadKey();
        }
    }
} 
```

但它给我一个“无法投射 com 对象错误”。任何想法？请指教。

[解决了]

我使用了 oledbconnection 而不是 adodb，它可以正常工作。感谢所有帮助过的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:34:11.363

您可以通过命令行参数传递连接字符串（使用源应用程序用来调用可执行文件的任何技术），然后您可以在接收可执行文件`args`的函数中从数组中检索它们。`Main(string[] args)`

例如在接收端：

```
class TestClass
{
    static void Main(string[] args)
    {
        // avoiding empty/null checks for simplicity
        string connectionString = args[n]; // where "n" is index value of your
                                           // connection string argument

        DoWork(connectionString);
    }
} 
```

考虑到这一点，可能有更好的方法来完成您的要求。如果您更详细地向我们描述了您的项目，我们可能会提供替代建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:42:09.597

在 c# 中很容易

在发件人应用程序中使用 Process.start("您想要向其发送连接字符串的 exe 路径","连接字符串");

在接收器应用程序和主方法中的 exe 中（在程序类中创建）

```
main(string[] args) 
```

args[0] 将保存其他程序发送的连接字符串。

尝试 ..

# utf-8 - 为什么这个 preg_match() 代码在 PHP CLI 中返回 true 而在 Apache 中返回 false

> ID：10643040
> 
> 赞同：2
> 
> 时间：2012-05-17T20:29:54.750
> 
> 标签：utf-8, preg-match, php

我正在尝试验证一些以 UTF-8 编码的阿拉伯文本，并在 PHP 5.3.8 中遇到意外结果。通过 CLI 运行以下代码片段通过 Apache 返回 true 和 false。

```
var_dump(preg_match("/[[:alnum:]]/i", "عايش لهدف")); 
```

我将 mbstring.func_overload 设置为 7，并将内部编码设置为 UTF-8。我还在 .htaccess 文件中将 AddDefaultCharset 设置为 UTF-8。

有人知道发生了什么吗？

编辑：实际上使用的是 5.3.8（不是 5.3.10）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:39:40.797

很可能您的 CLI 设置为非 utf8 字符集（建议：切换到 UTF8！）所以 PHP 得到了一些非 utf8 编码的字符串。

要使其与 UTF8 字符串一起使用，请使用`u`(utf8) 修饰符::

```
var_dump(preg_match("/[[:alnum:]]/iu", "عايش لهدف")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:33:46.217

您可能正在使用不同的 PHP 设置运行。您可以通过比较 Apache 中 phpinfo() 的输出来验证这一点：

```
<?php phpinfo(); 
```

从命令行到 phpinfo()：

```
$ php -i 
```

# javascript - 在面板中添加 div 元素？

> ID：10643041
> 
> 赞同：1
> 
> 时间：2012-05-17T20:29:57.570
> 
> 标签：javascript, google-maps, gwt, google-maps-api-3, jsni

我正在使用 GWT，并且正在尝试将 google-maps 添加到我的网站。因为我想使用 google-maps V3，所以我使用的是 JSNI。为了在我的网站中显示地图，我需要创建一个 id="map" 的 div 元素并在地图的初始化函数中获取它。我这样做了，结果很好，但它在网页上的位置很有趣，我希望它附加到我在代码中创建的面板上。所以我的问题是我该怎么做？我可以在面板内使用 GWT 以某种方式创建 div 吗？

我试过像这样创建一个新的 HTMLPanel：

```
runsPanel.add(new HTMLPanel("<div id=\"map\"></div>")); 
```

runsPanel 是我要附加到的面板。然而，当我使用以下初始化函数时，它无法检索 div：

```
private native JavaScriptObject initializeMap() /*-{

    var latLng = new $wnd.google.maps.LatLng(31.974, 34.813); //around Rishon-LeTsiyon
    var mapOptions = {
        zoom : 14,
        center : latLng,
        mapTypeId : $wnd.google.maps.MapTypeId.ROADMAP
    };
    var mapDiv = $doc.getElementById('map');
    if (mapDiv == null) {
        alert("MapDiv is null!");
    }
    var map = new $wnd.google.maps.Map(mapDiv, mapOptions);
    return map;

}-*/; 
```

（它会弹出警报 - “MapDiv 为空！”）

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:06:24.083

您需要确保`initializeMap()`在加载时调用，以验证 DOM 元素是否可访问。

尝试刷新您的方法并使用另一种技术来创建地图面板：

1.  扩展`Widget`以定义将用于 Google 地图容器的自定义小部件：

    ```
    public class MapPanel extends Widget {

        private Element container;

        public MapPanel() {

            container = DOM.createDiv();
            container.setId("map");

            // this is required by the Widget API to define the underlying element
            setElement(container);
        }

        @Override
        protected void onLoad() {
            super.onLoad();

                initializeMap();
            }
        }
    } 
    ```

2.  调用初始化：

    ```
    runsPanel.add(new MapPanel()); 
    ```

还有其他问题，比如`id`属性，在 JSNI 方法中硬编码和强制重复代码，`initializeMap()`以及是否为 JSNI 层创建覆盖类型的正确位置以及是否创建覆盖类型，但这超出了这里的范围。

**参考：**

*   [GWT 关于 Widget 最佳实践的帖子](http://googlewebtoolkit.blogspot.com/2009/05/widget-best-practices-widget-building.html)
*   [Google 开发者参考 Overlay 类型](http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsOverlay.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T09:12:08.890

如果您确保在调用 initializeMap() 之前将 runsPanel 附加到 DOM，则您的代码可以正常工作。

您可以使用这个简单的入口点对其进行测试：

```
@Override
public void onModuleLoad() {

  final Panel runsPanel = new ...Panel; /* Use the kind of panel you like */

  runsPanel.add(new HTMLPanel("<div id=\"map\"></div>"));

  RootLayoutPanel.get().add(runsPanel);

  initializeMap();
} 
```

将 HTMLPanel 添加到 runsPanel 是不够的。如果 runsPanel 本身没有附加到 DOM，则`$doc.getElementById('map')`找不到任何东西。

**注意：**确保以某种方式设置“地图” div 的高度，否则您将看不到地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:12:15.427

您可能想通过使用 UiBinder 来简化事情；在此处查看 Hello World 示例：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)

UiBinder 允许您编写定义 UI 布局结构的 XML，类似于使用 HTML 布局页面的方式。然而，XML 可以构造小部件，例如按钮等。此外，您可以将名称附加到 XML 元素并在 Java 代码中引用它以将事件处理程序绑定到它等等。它工作得很好，它使代码变得非常简单读书。

然而，在这些情况下，UiBinder 可以为您制作原生 HTML 元素并按照您想要的方式嵌套它们，而不必调用方法来制作小部件并将它们放入其他小部件中。然而，此外，UiBinder 文档说 UiBinder 可以更好地使用浏览器的本机表示事物的方式，从而产生更高效的代码（来自上面的链接）：

> 除了比通过代码更自然、更简洁地构建 UI 之外，UiBinder 还可以使您的应用程序更高效。浏览器通过将大的 HTML 字符串塞入 innerHTML 属性来构建 DOM 结构比通过一堆 API 调用更好。UiBinder 很自然地利用了这一点，结果是构建你的应用程序最愉快的方式也是构建它的最佳方式。

我认为此功能可能使浏览器更有可能正确注册您的小部件，以便稍后通过 getElementById() 找到它们。

您上面的代码在 UiBinder 中可能如下所示：

```
<g:HTMLPanel ui:field='my_HTMLPanel'>
  <div ui:field='map_div'>
    <!-- put some HTML here -->
  </div>
</g:HTMLPanel> 
```

# shell - Ubuntu shell 脚本不工作

> ID：10643044
> 
> 赞同：0
> 
> 时间：2012-05-17T20:30:23.190
> 
> 标签：shell, ubuntu, cat

使用此脚本，我想在 /etc/hosts 文件中附加一行文本。该脚本似乎无法正常工作。怎么了？

```
su 
cd /etc
cat /home/rugile/file >> hosts 
```

/home/rugile/file 看起来像这样：

```
127.0.0.1 domain.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:31:44.733

`su`打开一个新的外壳。您需要向它提供命令。

```
su << EOF
 ...
EOF 
```

# android - Android 模拟器使用错误的布局资源

> ID：10643045
> 
> 赞同：4
> 
> 时间：2012-05-17T20:30:23.763
> 
> 标签：android, android-layout, android-emulator, android-screen-support

我正在尝试为我正在编写的应用程序支持尽可能多的 android 设备，但在尝试这样做时，我发现了一个奇怪的问题。我有每个屏幕尺寸和密度组合的可绘制文件夹（例如 drawable-small-mdpi、drawable-large-ldpi 等）和每个屏幕尺寸限定符的布局文件夹。我设置了模拟器来测试 small-ldpi（我只使用 WQVGA432）和 small-hdpi 场景（我使用 WQVGA 皮肤并将抽象密度设置为 240）。我发现的问题是 small-hdpi 模拟器访问正确的 layout-small 文件夹，而 small-ldpi (WQVGA432) 模拟器使用 layout-normal 和 drawable-normal-ldpi 文件夹。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

**密度：**

> 用于低密度 (ldpi) 屏幕 (~120dpi) 的 ldpi 资源。
> 
> 用于中等密度 (mdpi) 屏幕 (~160dpi) 的 mdpi 资源。
> 
> hdpi 用于高密度 (hdpi) 屏幕 (~240dpi) 的资源。
> 
> 用于超高密度 (xhdpi) 屏幕 (~320dpi) 的 xhdpi 资源。

**屏幕尺寸：**

> 超大屏幕至少为 960dp x 720dp
> 
> 大屏幕至少为 640dp x 480dp
> 
> 普通屏幕至少为 470dp x 320dp
> 
> 小屏幕至少为 426dp x 320dp

**WQVGA432：**
屏幕：240 x 432
密度：低（120）

**largeHDPI：**
屏幕：240 x 432
密度：高（240）

有人知道问题是什么或如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:08:36.887

[如支持的屏幕范围](http://developer.android.com/guide/practices/screens_support.html#range)所述，设备没有确定的分辨率和密度间隔。所以这不是问题，只是一个小精灵^^。还引用了 Supporting Multiple Screens 文档；

*   “注意：这些最小屏幕尺寸在 Android 3.0 之前没有得到很好的定义，因此您可能会遇到一些设备被错误分类为普通和大。这些也是基于屏幕的物理分辨率，因此可能因设备而异——例如带有系统栏的 1024x720 平板电脑，由于系统栏正在使用它，因此应用程序的可用空间实际上要少一些。”

# php - 如何以编程方式隐藏 Zend_Element_Checkbox 的字段和标签？

> ID：10643062
> 
> 赞同：2
> 
> 时间：2012-05-17T20:32:16.650
> 
> 标签：php, zend-framework, zend-form, zend-form-element

我正在尝试将 display:none 属性设置为 Zend_Element_Checkbox。我设法隐藏了复选框本身。不幸的是，标签仍然显示。

这是我的代码：

```
$this->addElement('Select', 'junior_accounts', array(
    'label' => 'Junior (15yrs & under)',
    'multiOptions' => $personNumberList,
    'tabindex' => $tabIndex++,
  ));

$this->getElement('junior_accounts')->setAttribs(array('style' => 'display: none')); 
```

是否有任何编程方法可以做到这一点，或者我需要设置元素的类并添加适当的 CSS 定义？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T20:53:42.553

如果它是隐藏的并且它应该在整个请求中保持隐藏，而不是您应该将元素类型从 Select 更改为 Hidden。如果您需要稍后显示它（使用 JS），那么您也应该使用 JS 隐藏它，以便没有 JS 的用户可以访问它。您可以隐藏元素（假设使用 jQuery 和包装每个元素的标签）：

```
$('#elementId').parent().hide(); 
//or 
$('#elementId').parent().children().hide() // if you want the container visible 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:45:17.960

像这样的东西应该工作。

```
$this->getElement('junior_accounts')->removeDecorator('Label'); 
```

没测试过，里面可能有错别字

或者，如果您只想隐藏它：

```
$this->getElement('junior_accounts')->getDecorator('Label')->setOption('style', 'display: none'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:47:57.017

您可以访问`Zend_Form_Element`via的标签`Zend_Form_Element::getDecorator()`。然后你可以设置`style`装饰器的选项来控制它的 CSS 属性。

```
$label = $this->getElement('junior_accounts')->getDecorator('Label');

if ($label instanceof Zend_Form_Decorator_Abstract) {
    $label->setOption('style', 'display: none');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-31T11:29:04.200

可能删除元素将是一个选项。如果是这样，我是这样做的：

```
$form->get('product')->remove('version'); 
```

在验证表单之前：

```
$form->getInputFilter()->get('product')->get('version')->setRequired(FALSE); 
```

# facebook - 使用 facebook graph api 检索照片

> ID：10643070
> 
> 赞同：1
> 
> 时间：2012-05-17T20:32:45.590
> 
> 标签：facebook, facebook-graph-api

我将照片上传到我自己的 Facebook 个人资料，并公开。然后我给了我自己的应用程序的*user_photos*和*friends_photos*权限，并收到了访问令牌。我从浏览器执行了这个调用：

```
https://graph.facebook.com/*my_id*/photos?access_token=*access_token* 
```

响应是一个空数据集：

```
{
   "data": [
   ]
} 
```

我究竟做错了什么？这似乎应该很简单，但不确定我在搞砸什么。如果有任何帮助，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:12:54.217

您必须先获取用户相册才能获取相册 ID，

```
https://graph.facebook.com/*my_id*/albums?access_token=*access_token* 
```

因此，您可以使用专辑 ID 调用：

```
https://graph.facebook.com/*album_id*/photos?access_token=*access_token* 
```

这将返回相册中的所有照片。

# node.js - 如何在 node.js 中强制同步？

> ID：10643072
> 
> 赞同：1
> 
> 时间：2012-05-17T20:32:53.093
> 
> 标签：node.js

我一直在尝试了解如何在 nodejs 中强制同步，但大多数尝试都失败了。

例如这段代码：

```
var r = require('request');
var a = require('async');

var hello = function (cb) {
  console.log('Hello from 1!');
  cb();
}

var random = function (cb) {
  console.log(Math.floor(Math.random() * 10));
  cb();
}

var google = function (cb) {
  r('http://google.com', function (err, res, body) {
    console.log(res.statusCode);
  });
  cb();
}

var bye = function (cb) {
  console.log('Bye from 3!');
  cb();
}

a.series([hello, google, random, bye], function () {
  console.log('done');
}); 
```

这并不像您期望的那样工作 - 在我所有的尝试中，来自 Google 的响应代码总是排在最后。

```
Hello from 1!
7
Bye from 3!
done
200 
```

在使用或不使用模块的情况下，如何让这些功能按顺序运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:37:05.407

因为在 Google 请求代码中，您无需等待答案即可调用回调。正确的做法应该是：

```
var google = function (cb) {
  r('http://google.com', function (err, res, body) {
    console.log(res.statusCode);
    cb();
  });
} 
```

因此，如果只有谷歌响应到达，执行将转到下一个函数。

# java - 多线程和对话框显示/关闭在 Android 中给出异常

> ID：10643075
> 
> 赞同：0
> 
> 时间：2012-05-17T20:33:02.430
> 
> 标签：java, android, multithreading, exception, dialog

我有创建多个线程的 Android 应用程序。一些线程使用线程安全的 HttpClient 不断地从服务器获取数据。

示例 1：线程 1 -> 从服务器获取数据，现在我必须显示 Dialog 以通知用户。示例 2：线程 2 ->（在 UI 线程上）显示模式 PendingDialog -> 启动线程 2 -> 在服务器上发布数据并检查响应（不在 UI 线程上）-> runOnUiThread() {dismissPendingDialog()...}

基本上我正在创建线程：

```
classRunnableInstance = new MyRunnable(...);
classThreadInstance = new Thread(classRunnableInstance);
classThreadInstance.start(); 
```

“获取”线程的基本结构是：

```
public void run() {
    try {
        while(shouldRun) {
            SomeResultObj result = MyHttpClient.invokeSomeMethod();
            if(checkIfIMustInformUser(result)) {
                inform();
            }
            sleep();
        }
    }
    catch(IOException e) {
        activityGivenInConstructor.showFetchingDataError(e); //show on UI-thread
    }
}

protected void inform(final SomeResultObj result) {
    activityGivenInConstructor.runOnUiThread(new Runnable() {
        public void run() {
            Dialog dialog = MyDialogUtils.create(context, messageId);
            ...
            dialog.show();
            //or pendingDialog.dismiss();
        }
    });
    shouldRun = false;
    return;
}

protected void sleep() {
    try {
        Thread.sleep(AppConstants.SLEEP_DELAY);
    }
    catch(InterruptedException e) {
        shouldRun = false;
    }
} 
```

此外，我分别在：`onPause()`和中停止和启动线程`onResume()`。

我正在成功处理“一次显示一个对话框”。但是当用户执行某些操作时会出现问题 - 例如：

*   退出申请
*   前往新活动
*   去首页等。

当我显示对话框时（注意：在 UI 线程上），有时会出现`WindowManager$BadTokenException`,`IllegalStateException`等异常`MyActivity has leaked window`。

我可以检查之前`dialog.show()`：

```
if(!Thread.interrupted() && shouldRun && !activityGivenInConstructor.isFinishing()) 
```

但这只能解决退出应用程序问题。在其他情况下会出现一些例外情况。

我应该如何实现这个？不会再有例外了？这是 check/if(!Thread.interrupted()... 我能做的所有事情来防止异常上升吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T17:53:49.660

我不是安卓开发人员，但我做了一些 UI 编码。从您发布的内容来看，如果用户当前所在的屏幕不需要显示模式对话框，那不应该以编程方式处理吗？更具体地说 checkIfIMustInformUser(result) 方法调用？

# javascript - Youtube Javascript API：当用户切换“静音”时运行函数？

> ID：10643076
> 
> 赞同：0
> 
> 时间：2012-05-17T20:33:04.643
> 
> 标签：javascript, youtube, youtube-api

我正在使用此问题中的代码自动播放 iframe 嵌入的 Youtube 视频并为视频启用各种外部控件（例如静音、取消静音）[https://stackoverflow.com/a/7988536/262047](https://stackoverflow.com/a/7988536/262047)

当用户切换静音按钮时，有什么方法可以触发事件？类似的东西`onStateChange`？

**对于背景，这就是我想要完成的事情：**

*   我有几个页面上的视频，每个页面都自动开始播放。每页有一个视频。
*   视频开始静音，然后我有一个按钮可以切换启用/禁用声音。单击该按钮时，它将取消 Youtube 视频的静音并设置一个会话 cookie，告诉任何其他播放器用户已启用声音。
*   一旦 cookie 设置为启用声音，如果用户转到另一个带有自动播放视频的页面，声音将被打开。同样，如果没有 cookie，或者如果 cookie 设置为静音，则所有自动播放的视频都将开始静音。

我有上述所有工作，但有一个问题：如果有人使用视频播放器内的取消静音按钮，那么 cookie 不会被设置，并且视频将在下一页再次静音。我希望能够从玩家那里捕捉到取消静音事件，并相应地设置 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:56:52.637

我不认为有任何事件触发它。我唯一能想到的就是运行一个间隔并使用`player.isMuted()`.

# javascript - iframe 发布表单 - 提交关于输入字段更改的 html 表单

> ID：10643078
> 
> 赞同：1
> 
> 时间：2012-05-17T20:33:16.013
> 
> 标签：javascript, jquery, ajax

我有一个非常简单的 html 表单：

```
<form enctype="multipart/form-data" method="POST" action="fileupload" id="image-upload-form" target="iframe-post-form">
    <input type="file" name="file" id="file-to-upload">
    <input type="submit" value="upload" id="image-upload-submit">
</form> 
```

我正在使用[iframe 发布表单](http://sourceforge.net/projects/iframepostform/)库来提交我的图像。

当我使用以下 jquery 时，它可以完美运行：

```
$(document).ready(function(){
    $('#image-upload-form').iframePostForm({
        post : function() {
           $("#progress-indicator").show();
        },
        complete : function (response) {
        $("#progress-indicator").hide();
            try {
                json = $.parseJSON(response);
            } catch (e) {}
         }
     });
}); 
```

现在，我想消除提交按钮，而页面应该在选择文件后立即自动提交图像。我是 jquery 和 jscript 的初学者，我一定犯了一些小错误，但我无法弄清楚，为什么几乎相同的代码对我不起作用。这是错误代码（我可以在 firebug 中看到，我在该代码中的断点被命中，但图像不再提交）：

```
$(function() {
    $('#file-to-upload').bind('change', function(event) {
        $('#image-upload-form').iframePostForm({
            post : function() {
                $("#progress-indicator").show();
            },
            complete : function (response) {
                $("#progress-indicator").hide();
                try {
                    json = $.parseJSON(response);
                } catch (e) {}
            }
        });
   });
}); 
```

非常感谢您的帮助。

**解决方案：**

收到@Huangism的建议后，终于找到了解决办法。我发布它以防有人需要解决同样的问题：

```
$(function() {
    $('#file-to-upload').bind('change', function(event) {
        $('#image-upload-form').submit().iframePostForm({
            post : function() {
                $("#progress-indicator").show();
            },
            complete : function (response) {
               $("#progress-indicator").hide();
               try {
                   json = $.parseJSON(response);                    
               } catch (e) {}
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:48:59.340

我从未使用过 iframe post form lib，但初始工作代码看起来像是在准备好文档时设置侦听器，在您的代码中，您将设置放在文件上传的更改函数中。所以基本上每次文件加载更改时，它都会每次设置整个帖子表单。

您需要在更改时调用表单的提交功能。我不太确定 post form lib 做了什么，我不知道你的整个代码结构，所以我真的不能提出任何其他建议。但是您的代码的问题是您将帖子表单的设置放在了错误的位置

# php - Radius 搜索 PHP、MYSQL 和谷歌地图

> ID：10643081
> 
> 赞同：6
> 
> 时间：2012-05-17T20:33:24.183
> 
> 标签：php, mysql, ajax, google-maps

我正在使用位置的纬度和经度搜索数据库。我想检索某个半径内的所有位置。

然后我将返回的结果编码为 JSON 并使用 ajax 检索数据，但是我得到一个未定义的错误，这意味着没有从数据库返回数据。

谁能看到我哪里出错了？

这是我的查询

```
$sql="SELECT *, ACOS( SIN( RADIANS( `lat` ) ) * SIN( RADIANS( $fLat ) ) + COS( RADIANS( `lat` ) )
* COS( RADIANS( $fLat )) * COS( RADIANS( `lng` ) - RADIANS( $fLon )) ) * 6380 AS `distance`
FROM `markers`
WHERE ACOS( SIN( RADIANS( `lat` ) ) * SIN( RADIANS( $fLat ) ) + COS( RADIANS( `lat` ) )
    * COS( RADIANS( $fLat )) * COS( RADIANS( `lng` ) - RADIANS( $fLon )) ) * 6380 < 10
    ORDER BY `distance`";

    $result = mysql_query($sql);

    while($r = mysql_fetch_assoc($result)) $rows[] = $r;

    echo json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:45:34.173

我对 trig 或 SQL 没有太多帮助，我刚刚看到了足够多的 Google 地图问题，可以将您指向本教程：

[https://developers.google.com/maps/articles/phpsqlsearch#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch#findnearsql)

有一个查询可以尝试在半径内按距离查找点，希望它对您有用。

使用 3959（英里）或 6371（公里）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-20T11:52:51.790

试试这个：

```
$sql="SELECT * , ACOS( SIN( RADIANS( 'lat' ) ) * SIN( RADIANS( $fLat ) ) + COS( RADIANS( 'lat' ) ) * COS( RADIANS( $fLat )) * COS( RADIANS( 'lng' ) - RADIANS( $fLon )) ) * 6380 AS distance FROM 'markers'
WHERE  distance < 10
ORDER BY distance";

$result = mysql_query($sql);

$rows = mysql_fetch_assoc($result));

echo json_encode($rows);  ` 
```

# ms-access - 表字段说明 - MS Access

> ID：10643082
> 
> 赞同：5
> 
> 时间：2012-05-17T20:33:25.987
> 
> 标签：ms-access, properties

我环顾四周，发现了一些关于如何从字段的“描述”框中获取描述的 VBA 代码，但没有找到如何在表单属性中使用它的方法。

我希望出现一个 ControlTip，其中包含从数据库中的描述中带来的该字段的描述，而不必重写所有描述；我希望有一段可以添加到所有控制提示的复制粘贴代码？

类似的东西（但显然不是）

```
ControlTipText:  Me.ThisControl.ThisControlFieldDescription 
```

任何人都知道代码，或者即使有一个？

编辑：

```
description = Forms("frmTrials").Controls("txtBox").StatusBarText
MsgBox description 
```

以上用于显示状态栏文本。但是我想用活动表单填充“frmTrials”，用当前活动控件填充“txtBox”；这样，当控件变为活动状态时，我可以将 StatusBarText 放入“描述框”文本字段（或控件提示等）中。我试过了

```
description = Forms(Me).Controls(Me.ActiveControl).StatusBarText 
```

这只是向我抛出了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T16:19:04.487

据我了解，您希望在`ControlTipText`每次加载表单时动态设置属性。由于您在评论中指出此应用程序适用于平板设备，因此您可能更愿意在打开表单时限制处理器负载。您可以通过`ControlTipText`使用表单设计保存属性来做到这一点。

使用您的表单名称尝试以下过程，如下所示：

```
SetControlTipText "YourFormName" 
```

这是程序。我在有限的测试中没有发现任何问题。它`ControlTipText`为复选框、组合、列表框和文本框设置。更改第一`Case`行以针对一组不同的控件。

```
Public Sub SetControlTipText(ByVal pFormName As String)
    Dim ctl As Control
    Dim db As DAO.Database
    Dim frm As Form
    Dim rs As DAO.Recordset

    DoCmd.OpenForm pFormName, acDesign
    Set frm = Forms(pFormName)
    If Len(frm.RecordSource) > 0 Then
        Set db = CurrentDb
        Set rs = db.OpenRecordset(frm.RecordSource)
        For Each ctl In frm.Controls
            Select Case ctl.ControlType
            Case acCheckBox, acComboBox, acListBox, acTextBox
                If Len(ctl.ControlSource) > 0 _
                        And Not ctl.ControlSource Like "=*" Then
                    ctl.ControlTipText = _
                        GetDescription(rs.Fields(ctl.ControlSource))
                End If
            Case Else
                ' pass '
            End Select
        Next ctl
        rs.Close
    End If
    Set ctl = Nothing
    Set rs = Nothing
    Set db = Nothing
    Set frm = Nothing
    DoCmd.Close acForm, pFormName, acSaveYes
End Sub 
```

`SetControlTipText`调用这个函数：

```
Public Function GetDescription(ByRef pObject As Object) As String
    Dim strReturn As String

On Error GoTo ErrorHandler

    strReturn = pObject.Properties("Description")

ExitHere:
    GetDescription = strReturn
    On Error GoTo 0
    Exit Function

ErrorHandler:
    strReturn = vbNullString ' make it explicit '
    GoTo ExitHere
End Function 
```

该`SetControlTipText`过程忽略未绑定的表单。如果绑定字段的控制源没有`Description`分配属性，`ControlTipText`则将其设置为空字符串。

这种方法将要求您为表单运行一次该过程，而不是在每次加载表单时运行一些其他过程。如果您稍后更改`Description`任何表单的记录源字段的属性，您可以重新运行`SetControlTipText`以更新`ControlTipText`。

或者，作为准备发布应用程序新版本的一部分，您可以为所有应用程序的表单运行该过程。

```
Dim frm As Object
For Each frm in CurrentProject.AllForms
    SetControlTipText frm.Name
Next frm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T06:01:32.770

您可以尝试对此的变体来遍历表单上的所有控件，并将其工具提示设置为与绑定数据源匹配的任何字段。

```
Private Sub Form_Load()
    ' Load tooltips for the current form '
    ' Place this in all subforms as well '
    SetToolTips Me
    ' If the form is bound at runtime, you can call use instead '
    SetToolTips Me, myDataRecordSet
End Sub

Private Sub SetToolTips(frm As Form, Optional rs As dao.Recordset)
    Dim ctls As Controls
    Dim ctl As Control
    Dim sourceField As String
    Dim description As String

    On Error Resume Next

    Set ctls = frm.Controls
    If rs Is Nothing Then Set rs = frm.Recordset

    For Each ctl In ctls
        sourceField = ctl.ControlSource
        If Len(sourceField) > 0 Then
            description = rs.Fields(sourceField).Properties("Description")
            If Len(description) > 0 Then
                ctl.ControlTipText = description
            End If
        End If
    Next ctl
    Set ctls = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T19:04:19.660

Ended up using a text field to show the descriptions instead of the control tip. I also have an informative photo appear (if there is one so named in the given folder). I should note that I do not have any handling in place for images which are not PNG format, though I'm sure that could be added.

```
Public Function pushInfo(frm As Form)
'On Error Resume Next
Dim desc As String 'description from the status bar of the active control
Dim path As String 'path to image
Dim dbPath As String 'path to the database
Dim hyperPath As String 'path to hyperlink

'Take the statusbar text and push it into the description box caption.
desc = Forms(frm.Name).Controls(frm.ActiveControl.Name).StatusBarText 'Put statusbar text into var "desc"
frm.txtInfo.Caption = vbNewLine & vbNewLine & desc 'Put the text (with linefeeds) into the box
frm.lblInfo.Caption = frm.ActiveControl.Name & " Description:" 'Put the database name of the field into the label

'Set the image in the imgbox
dbPath = Left(CurrentDb.Name, InStrRev(CurrentDb.Name, "\"))   'path to the DB.
path = dbPath & "img\" 'add the img directory
path = path & frm.Name & "\" 'add the form name
path = path & frm.ActiveControl.Name 'add the control's name
path = path & ".png" 'add the jpg suffix
hyperPath = path

If (Len(Dir(path)) = 0) Then 'if the image doesn't exist (this field has no image..)
    path = dbPath & "img\GenericLogo.png" 'set to the logo
    hyperPath = ""
End If

Forms(frm.Name).Controls("imgInfo").Picture = path 'set the picture to the defined path
Forms(frm.Name).Controls("imgInfo").HyperlinkAddress = hyperPath 'set the picture to link to the file
End Function 
```

# c# - 模拟 HttpPostedFileWrapper

> ID：10643083
> 
> 赞同：4
> 
> 时间：2012-05-17T20:33:28.060
> 
> 标签：c#, .net, asp.net-mvc, mocking, moq

我正在尝试模拟 MVC 对象`HttpPostedFileWrapper`，以便我可以特别测试“ContentType”和“InputStream”属性。我这样设置我的模拟：

```
var mockPostedFile = new Mock<HttpPostedFile>();
var mockFileWrapper = new Mock<HttpPostedFileWrapper>(mockPostedFile);
mockFileWrapper.Setup(file => file.ContentType).Returns("application/pdf");
mockFileWrapper.Setup(file => file.InputStream).Returns(fileStream); 
```

但我在第一行得到了这个异常：

> 要模拟的类型必须是接口或抽象或非密封类。

如果我更改`HttpPostedFile`为`HttpPostedFileBase`我打电话时会收到此异常`mockFileWrapper.Object`

> 无法实例化类的代理：System.Web.HttpPostedFileWrapper。找不到与给定参数匹配的构造函数：Moq.Mock`1[System.Web.HttpPostedFileBase]

有谁知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T20:38:03.077

你应该在嘲讽`HttpPostedFileBase`，而不是`HttpPostedFileWrapper`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:36:26.167

您不能模拟没有公共构造函数的类型，例如`HttpPostedFile`.

# android - 如何在Android中做一个字符串阴影跨度？

> ID：10643085
> 
> 赞同：4
> 
> 时间：2012-05-17T20:33:30.320
> 
> 标签：android, xamarin.android

一直在做一些搜索。我可以看到一种将阴影层添加到 TextView 的方法，但我只想对一段文本进行阴影处理。我基本上是在做一个 EditText ，用户可以在其中更改文本选择的样式。其中一种风格是带有颜色选择的阴影。颜色、大小、字体等都有跨度，但我找不到阴影的东西。

基本上我想做类似的事情：（注意代码来自 Mono Droid，但 Java 答案也会有帮助）

```
 var N = new ShadowSpan(color,dx,dy,radius); // no such thing?
        int S = txEdit.SelectionStart;
        int E = txEdit.SelectionEnd;
        Str = new SpannableString(txEdit.TextFormatted);
        Str.SetSpan(N,S,E, SpanTypes.InclusiveInclusive);
        txEdit.SetText(Str, TextView.BufferType.Spannable);
        txEdit.SetSelection(S,E); 
```

任何帮助或建议表示赞赏。我想知道我是否必须弄清楚如何从[android.text.style.CharacterStyle](http://developer.android.com/reference/android/text/style/CharacterStyle.html)派生出我自己的 ShadowSpan 实现（可能覆盖 updateDrawState() 到TextPaint 对象上的[setShadowLayer](http://developer.android.com/reference/android/graphics/Paint.html#setShadowLayer%28float,%20float,%20float,%20int%29)？）或者我只是错过了简单的答案？我不能是唯一一个想要这样做的人，所以我想在尝试一些定制的东西之前我会先问一下。

**- 编辑 -**

我尝试创建自己的 ShadowSpan，它似乎确实有效。如果有人有更好的解决方案，我仍然保持开放状态。似乎某些东西应该已经存在，但我想我不必做太多。

这是我在 Mono for Android 中的内容

```
public class ShadowSpan : Android.Text.Style.CharacterStyle
{
    public float Dx;
    public float Dy;
    public float Radius;
    public Android.Graphics.Color Color;
    public ShadowSpan(float radius, float dx, float dy, Android.Graphics.Color color)
    {
        Radius = radius; Dx = dx; Dy = dy; Color = color;
    }

    public override void UpdateDrawState (TextPaint tp)
    {
        tp.SetShadowLayer(Radius, Dx, Dy, Color);
    }
} 
```

像这样使用

```
 void HandleClick (object sender, EventArgs e)
    {
        var N = new ShadowSpan(1,1,1,Android.Graphics.Color.Red);
        int S = txEdit.SelectionStart;
        int E = txEdit.SelectionEnd;
        Str = new SpannableString(txEdit.TextFormatted);
        Str.SetSpan(N,S,E, SpanTypes.InclusiveInclusive);
        txEdit.SetText(Str, TextView.BufferType.Spannable);
        txEdit.SetSelection(S,E);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T12:13:17.110

仔细考虑之后，通过从 CharacterStyle 派生来实现自定义跨度似乎非常简单。我猜谷歌不想用一堆一次性的 Span 类来膨胀 API。我想在构建我的问题的过程中，我最终回答了它。好吧，希望有一天这可以帮助其他人。感谢所有发布建议的人。

```
public class ShadowSpan : Android.Text.Style.CharacterStyle
{
    public float Dx;
    public float Dy;
    public float Radius;
    public Android.Graphics.Color Color;
    public ShadowSpan(float radius, float dx, float dy, Android.Graphics.Color color)
    {
        Radius = radius; Dx = dx; Dy = dy; Color = color;
    }

    public override void UpdateDrawState (TextPaint tp)
    {
        tp.SetShadowLayer(Radius, Dx, Dy, Color);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T23:57:29.983

我基本上完成了你所做的，除了 Java，它对我有用。

```
private static class ShadowStyleSpan extends ClickableSpan {
    private int radius;
    private int dx;
    private int dy;
    private int color;

    public ShadowStyleSpan(int radius, int dx, int dy, int color) {
        super();
        this.radius = radius;
        this.dx = dx;
        this.dy = dy;
        this.color = color;
    }

    @Override
    public void updateDrawState(TextPaint ds) {
        super.updateDrawState(ds);
        ds.setShadowLayer(radius, dx, dy, color);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:41:07.230

也许你会考虑使用[android:shadowColor](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ashadowColor) , android:shadowDx, android:shadowDy, android:shadowRadius; 或者[setShadowLayer()](http://developer.android.com/reference/android/widget/TextView.html#setShadowLayer%28float,%20float,%20float,%20int%29)。

检查它包含自定义文本示例的[链接](http://mobile.tutsplus.com/tutorials/android/customize-android-fonts/)（向下滚动到文本阴影部分）

也看到[这个](http://blog.stylingandroid.com/archives/378)

# editor - 将多个命令映射到 Vim 中的同一个键

> ID：10643086
> 
> 赞同：2
> 
> 时间：2012-05-17T20:33:34.067
> 
> 标签：editor, vim

我想将几个不同的功能映射到 Vim 中的一个键，并让它们一个接一个地发生。

例如，我想将两个不同的函数映射到`enter`键上——一个在前一行的最后一个字符是大括号时执行某些操作，另一个在前一行的最后一个字符是一个`~`. 但我希望这些在两个单独的功能中。

这可能吗？

PS 我也愿意寻求一种解决方案，让我在一个映射 enter 的函数中`key`调用任何其他映射（如果它不成功）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:24:55.113

*（这应该是一个评论，但我担心它会太长）*

因此，通常，您希望将该键映射到对函数的调用。您不能将它映射到两个东西，所以只需将它映射到一个函数，并在该函数内部执行其他两个函数 - 如果前一行的最后一个字符是空格，则一个执行某些操作，如果前一行的最后一个字符是空格，则另一个执行操作上一行的最后一个字符是波浪号。

或者您可以使用映射函数来检查前一行中的最后一个字符是什么，然后根据该特定字符执行 - 执行某些操作的函数。

*我真的没有什么可做的了，所以我就把它留在这里:-/*

* * *

***评论后编辑：***好吧，这里不赘述，但插件通常只是功能。Vim 没有子程序，只有几种“类型”的函数。插件只是映射到某些键的功能。

现在，我不使用 SuperTab 插件（听说过，但仅此而已），但如果你去想要它，你应该能够首先找出映射到的键是什么（函数名是什么）从那里，该特定功能的作用是什么。它需要什么论据等等......

从那里开始，只需找出如何创建一个*包装函数*来测试*前一个字符*并基于该函数执行该插件函数，或者您想到的执行其他操作的函数。

不确定您通过“通用方式”表示什么。

# iphone - 通用应用程序 - 仅更新 iPhone 版本

> ID：10643092
> 
> 赞同：1
> 
> 时间：2012-05-17T20:34:21.143
> 
> 标签：iphone, ios, ipad

我目前正在对一个通用应用程序进行彻底的重新设计，但经理们决定他们首先要推出 iPhone 版本。问题是因为是完全重新设计，所以旧代码不花很多功夫就不能兼容新框架。那么有没有办法让我提交更新，以便只更新 iPhone 版本，而 iPad 版本继续使用旧版本？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:01:39.250

为此，您必须在一个项目中维护两个代码树，并确保 iPad 使用旧代码而 iPhone 使用新代码。这包括使用其现有库等的旧代码。这听起来有点像一场噩梦，但我相信这是可以实现的，可能值得在 xcode 中创建两个不同的树（读取文件夹）以明确划分......

每当您有更新时，它将适用于所有设备，因此可能值得说明更新仅影响 iPhone 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:56:49.093

不，没有办法做到这一点。由于它是一个通用应用程序，当您将其发布到商店时，更新将同时推送到 iPad 和 iPhone。没有任何解决方法可以阻止该版本也出现在 iPad 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T23:54:19.050

如果@Paul.s 的答案不可行，请将通用目标转换为仅适用于 iPhone 的目标并在 AppStore 中进行更新，并放置一个全大写的应用商店描述，要求 iPad 用户不要更新。

# php - 我如何将这段文本和按钮与网页的布局相匹配？

> ID：10643093
> 
> 赞同：0
> 
> 时间：2012-05-17T20:34:21.680
> 
> 标签：php, html, css, layout

我有我正在制作的网站的 index.php，我有我的网站布局。在导航栏上方，我有一个注销按钮和一些显示登录帐户的文本，我需要调整文本和按钮以在页面上获得固定空间，而不会在用户名太大或太短时移动。

[http://jsfiddle.net/mxh2s/](http://jsfiddle.net/mxh2s/)用于我的索引文件的 JSFiddle，这是我需要修复和调整的位：

```
 <div class="autenticado">
    Está autenticado como:
    <?php
      $query = "Select * from user where id_user='".$_SESSION["user"]."'";
      $resultado = mysqli_query($ligabd, $query);
      $registos=mysqli_fetch_array($resultado);

      echo $registos["username"]."&nbsp;&nbsp;&nbsp;";
      echo "<a href='logout.php' class='button'>Logout</a>";
    ?> 
```

很抱歉我的代码是葡萄牙语...如果您在弄清楚代码时遇到问题，请说出来，我会尽力提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:46:34.723

与此类似的布局应该可以工作。但是我有点猜测，因为您的代码示例不是很清楚。

```
<div id="header">
   <div id="login">
        <button>Sign Out</button>
        <span class="username"></span>
   </div>
</div> 
```

一个基本的 CSS 示例，显然其他属性会根据您的布局而有所不同。

```
#header {
width:100%;
}

#login {
width:auto;
float:right;
}

#login .username {
float:right;
width:auto;
}

#login button {
float:right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:47:10.390

我不太确定我知道你的意思，但对我来说这听起来像是 css 定位：

你也许可以将 div 绝对定位到右上角？

.autenticado{

位置：绝对；顶部：0px；右：0px；}

如果您将所有这些代码都放在一个固定宽度的容器中，只需给它 position: relative; 将其保持在其中。

希望这会有所帮助，尽管我可能误解了你想要的东西:)

# java - 不使用库的游戏 UI

> ID：10643099
> 
> 赞同：-3
> 
> 时间：2012-05-17T20:34:59.820
> 
> 标签：java, lwjgl

我想做自己简单的游戏UI，我想我知道主要的东西是怎么做的。问题是我不知道如何通过在 3D 视图中使用屏幕坐标来绘制简单的 2D 四边形？这甚至可能吗？也许我应该以另一种方式绘制游戏 UI？

请不要推荐任何图书馆。我想了解它是如何完成的，而不是使用现有的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:01:52.167

由于您包含了 lwjgl 标记，因此通常在 OpenGL 中通常是这样完成的，这对您来说也应该可以正常工作：

1.  像往常一样渲染你的底层游戏场景
2.  设置视图，以便您拥有可以在场景顶部渲染的正交视图。它的单位范围从 -1.0f、-1.0f（屏幕左侧、顶部）到 1.0f、1.0f（屏幕底部、右侧），并将绘制在您已经渲染的游戏场景的顶部下方。

    ```
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-1, 1, -1, 1, -1, 1);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glDisable(GL_DEPTH_TEST); 
    ```

3.  使用 -1.0f 到 1.0f 的坐标渲染纹理四边形

    ```
    glBegin(GL_QUADS);
    // <== Bind your texture, material for your GUI button here
    glVertex3f(-0.5, 0.5, 0);
    glVertex3f(0.5, 0.5, 0);
    glVertex3f(0.5, -0.5, 0);
    glVertex3f(-0.5, -0.5, 0);
    glEnd(); 
    ```

这为您提供了分辨率独立性。因此，如果您在 800x600 上玩游戏，四边形将是一种尺寸，但如果您在 1024x768 上玩游戏，它会自动增长以填充屏幕的相同比例区域。

如果你真的想直接在屏幕坐标中写入，那么你可以设置你的 glOrtho 代替（例如范围从 0.0 到 800.0）。但这不推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:58:49.500

使用 GLU.gluOrtho2D(0f, glutScreenWidth, 0f, glutScreenHeight); 将投影设置为正交；

这就是 JBullet 为文本绘制设置投影的方式（它们使用 1 作为 FontRenderer 中的 z 坐标）：

```
// See http://www.lighthouse3d.com/opengl/glut/index.php?bmpfontortho
public void setOrthographicProjection() {
  // switch to projection mode
  gl.glMatrixMode(GL_PROJECTION);

  // save previous matrix which contains the 
  // settings for the perspective projection
  gl.glPushMatrix();
  // reset matrix
  gl.glLoadIdentity();
  // set a 2D orthographic projection
  gl.gluOrtho2D(0f, glutScreenWidth, 0f, glutScreenHeight);
  gl.glMatrixMode(GL_MODELVIEW);
  gl.glLoadIdentity();

  // invert the y axis, down is positive
  gl.glScalef(1f, -1f, 1f);
  // mover the origin from the bottom left corner
  // to the upper left corner
  gl.glTranslatef(0f, -glutScreenHeight, 0f);
} 
```

请参阅[https://github.com/affogato/JBullet-QIntBio-Fork/blob/master/src/com/bulletphysics/demos/opengl/](https://github.com/affogato/JBullet-QIntBio-Fork/blob/master/src/com/bulletphysics/demos/opengl/)并查看 FontRenderer 和 LwjglGL 类...

# objective-c - Build iOS App from XML file

> ID：10643100
> 
> 赞同：3
> 
> 时间：2012-05-17T20:35:02.207
> 
> 标签：objective-c, ios, xml, cocoa-touch

I develop apps for some congresses with a program and speakers etc. There are cases when I have to change the program very quickly. There's not enough time to send it to Apple to let them review the app.

My question is if it is possible to store XML files on a server which will be downloaded when they changed. If it is, is it also possible to store data how the cells should look like? The background image should also be dynamically.

Does Apple reject this type of application or is it O.K.?

**EDIT**
So using plist files is more efficient?
Another thing: When I do something like the following

*   Change the content of each table view cell
*   Change the appearance of the table view and its cells
*   Change the user interaction options, e.g. to control which cells the user can tap on
*   Enable / Disable functions like notifications via the internet

Is it right, that Apple won't reject apps that do something like above?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:43:35.947

It is certainly possible to put XML files on a server and affect the different properties of all views (frame, background colour, alpha, even images if you also download them).

I suggest using NSDictionary instead of an XML, because downloading the file and parsing it is made very easily in a single function: `initWithContentsOfURL:`. It is also possible to edit the plist files for the NSDictionary using XCode.

Just remember a few things:

1.  You do not want to block the UI during the download, so ou probably want to download in a different thread, or at least ha an animated indicator that the file is being downloaded.
2.  Make sure that you application responds correctly if the file cannot be downloaded (the user does not have Wifi access and no data plan, the user is using airplane mode, etc.
3.  Some mechanism like eTag would help you diminish the load on the server and speed-up the loading by not redownloading the file if it has not changed.

Many application seem to use this technique to provide different skins and they are accepted by Apple, as long as what you download only affects UI.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:54:59.033

It is not only allowed, it is recommended. see [WWDC 2010: Session 117 - Building a Server-driven User Experience](https://developer.apple.com/videos/archive/) for tons of tricks and implementation details.

Also [WWDC 2011: Session 114 - Customizing the Appearance of UIKit Controls](https://developer.apple.com/videos/archive/) has some updates, how to streamline the change of appearance.

# c# - 使用 XElement 编辑属性名称

> ID：10643102
> 
> 赞同：0
> 
> 时间：2012-05-17T20:35:10.973
> 
> 标签：c#, .net, xelement

所以我正在寻找一种方法来编辑 XML 文件中的单个元素描述。

例如，假设我有：

```
1  <stack id ="1">Stack1</stack>
2  <book id="EG-FE">This Book</book>
3  <book id="EG-FF">That Book</book>
4  <book id="FE-GT">Another Book</book>
5  <book id="JL-01">Invalid Book Id</book>
6  <stack id="2">Stack2</stack> 
```

你会注意到第 5 行的书有一个奇怪的格式...... id 的第二部分（在“-”之后）有数字，其余部分有字母。我将如何只删除第 5 本书 id 的“-01”部分（即将其更改为：

```
5  <book id="JL">Valid Book Id</book> 
```

不修改任何其他元素？（IE 堆栈）

这是我正在尝试的：

```
using System.Xml.Linq

XElement books = XElement.Load("{file}");

string _Attribute;
foreach (var bookID in books.Nodes()) 
{
    if(bookID.Attribute("book") )
    {
        _Attribute = bookID.Attribute("book")
        if(!Regex.IsMatch(_Attribute., @"^[a-zA-Z-]+$");
        {
            Regex.Replace(_Attribute, @"\d", "");
        }
        bookID.Attribute("book") = _Attribute;
    }
} 
```

显然，这是非常错误的......关于如何解决它的任何想法？

谢谢！

***我没有找到太多直接处理这个问题的帮助，而且我试图拼凑的点点滴滴并没有真正的帮助。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:40:54.313

```
using System.Xml.Linq

XElement books = XElement.Load("{file}");

string _Attribute;
foreach (var bookID in books.Elements("book")) 
{
    if(bookID.Attribute("id") != null)
    {
        _Attribute = bookID.Attribute("book").Value;
        if(!Regex.IsMatch(_Attribute, @"-[0-9]+$"))
        {
            Regex.Replace(_Attribute, @"-[0-9]+$", "");
        }
        bookID.Attribute("id").Value = _Attribute;
    }
} 
```

未经测试和所有那些通常的评论。修正了一些关于 Linq to XML 如何工作的假设，并让 Regex 检查它是否以数字结尾并在这种情况下替换最后的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:01:28.247

```
string strHtml = "<input Type=\"Text\" Name=\"Initial Name Value\" Id=\"ID Value\" />";
XElement root = XElement.Parse(strHtml); // Carrega o Bicho...

root.SetAttributeValue("ValueA", 1); // New Attribute - Int Value

root.SetAttributeValue("ValueC", 3); // New Attribute - Int Value
root.SetAttributeValue("ValueC", null); // Remove Attribute

root.SetAttributeValue("ValueA", "New value for ValueA");

root.SetAttributeValue("Name", "New Name"); // Alterando Value propriedade recebida no Parse()

Console.WriteLine(root); 
```

# php - PHP会话丢失，仅在windows mobile WinCE平台中

> ID：10643103
> 
> 赞同：0
> 
> 时间：2012-05-17T20:35:13.403
> 
> 标签：php, windows, session, mobile, barcode-scanner

我有一个用 php 开发的 web 应用程序，在手持扫描仪和台式电脑上运行良好。带有 CE.net 平台 php 会话的扫描仪工作正常。

但是在带有 WinCE 平台的 windows mobile 手持扫描仪中，会话不会保留在重定向上。

重定向发生在同一个 php 文件中，该文件根据参数分为多个部分。任何人都建议在哪里和什么检查操作系统的依赖关系，移动平台移动 IE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:31:38.183

我认为当访问者使用此类浏览器时，您应该使用请求参数来传递会话 ID。该浏览器可能没有设置会话 ID cookie

# css - css 属性值中的 !default 是什么意思？

> ID：10643107
> 
> 赞同：100
> 
> 时间：2012-05-17T20:35:26.960
> 
> 标签：css, twitter-bootstrap, sass

twitter 引导代码有很多 CSS 属性，`!default`末尾带有 a。

例如

```
p {
  color: white !default;
} 
```

做什么`!default`？

**更新**

我的不好是不清楚。我正在使用 Bootstrap 的 SASS 部分。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2017-03-07T21:47:47.937

!default 在 Bootstrap Sass 中经常使用。它类似于反向 !important。所有引导程序变量都使用 !default 设置，以允许开发人员进一步自定义引导程序。使用 !default sass 只会定义尚未设置的变量。

这允许更大的灵活性。

```
//Example1 Dress color = red
$auroras-dress-color: blue;
$auroras-dress-color: red;

//Example2 Dress color = red
$auroras-dress-color: blue !default;
$auroras-dress-color: red;

//Example3 Dress color = blue
$auroras-dress-color: blue;
$auroras-dress-color: red !default; 
```

那么为什么这很重要？Bootstrap 是一个包。大多数人不会编辑 Bootstrap 源代码。永远不要更新引导源。要自定义引导程序，您将添加自己的变量文件并使用引导程序代码对其进行编译，但不要接触本机引导程序包。Bootstrap sass 的页面在文档中详细介绍了如何自定义和编译它。

我不知道为什么少不这样做。我没有用 less 做太多工作，也不知道它是否有自己的内置变量管理。

小提琴示例 [https://jsfiddle.net/siggysid/344dnnwz/](https://jsfiddle.net/siggysid/344dnnwz/)

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-17T20:42:56.957

据我所知，Twitter Bootstrap 使用 LESS。另一方面，[`!default`它实际上是 Sass 的一部分，](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#variable_defaults_default)用于为 Sass 变量 ( `$var`) 提供默认值，这将使其在给定的上下文中无效，*即使在 Sass*中也是如此。

此外，我无法`!default`在[LESS 文档](http://lesscss.org)中找到任何参考资料，据我所知，它是 Sass 独有的。你确定你在 Bootstrap 的源代码中找到了这个，而不是在其他地方吗？因为我真的不记得在 Bootstrap 的样式表中看到过 Sass/SCSS 代码。

值得一提的是，`!`在 CSS 中以 开头的唯一有效标记是`!important`，[您可能已经知道](http://www.w3.org/TR/CSS21/cascade.html#important-rules).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-09T13:39:10.357

[您可以在sass-lang](https://sass-lang.com/documentation/variables)网站的 doc 部分（变量）中找到以下确切定义和体面的解释- 默认值：

*通常，当您为变量赋值时，如果该变量已经有一个值，它的旧值将被覆盖。但是，如果您正在编写 Sass 库，您可能希望允许您的用户在使用库的变量生成 CSS 之前配置它们。为了实现这一点，Sass 提供了 !default 标志。仅当该变量未定义或其值为空时，才会为该变量分配一个值。否则，将使用现有值。*

# vba - 如何为 VBA 查找/替换脚本设置某种数组

> ID：10643108
> 
> 赞同：1
> 
> 时间：2012-05-17T20:35:33.100
> 
> 标签：vba, replace, ms-word

更新的脚本我正在使用导致锁定...我尝试用 (Replace:=wdReplaceAll) 替换 (Replace:=wdReplaceOne)，但仍然没有这样的运气：

```
Option Explicit
'Dim strMacroName As String
 Dim spellingcorrectionsrep As Long

 Public Sub SpellingReview()
 Dim oShell, MyDocuments 
```

'声明 MyDocs 文件路径： Set oShell = CreateObject("Wscript.Shell") MyDocuments = oShell.SpecialFolders("MyDocuments") Set oShell = Nothing

```
'   Set values for variables of the actual word to find/replace
spellingsuggestionsrep = 0
spellingcorrectionsrep = 0

'   Replacements

SpellingCorrections "dog", "dog (will be changed to cat)", False, True

'    END SEARCHING DOCUMENT AND DISPLAY MESSAGE

MsgBox spellingcorrectionsrep

'strMacroName = "Spelling Review"
'Call LogMacroUsage(strMacroName)

 End Sub
  Sub SpellingCorrections(sInput As String, sReplace As String, MC As Boolean, MW As     Boolean)

'   Set Selection Search Criteria
Selection.HomeKey Unit:=wdStory
With Selection
     With .Find
    .ClearFormatting
    .Replacement.ClearFormatting
    .Replacement.Highlight = True
    .Text = sInput
    .Replacement.Text = sReplace
    .Forward = True
    .Wrap = wdFindStop
    .Format = True
    .MatchWildcards = False
    .MatchCase = MC
    .MatchWholeWord = MW
End With
Do While .Find.Execute = True
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseStart
    Else
        .Collapse Direction:=wdCollapseEnd
    End If

    If .Find.Execute(Replace:=wdReplaceOne) = True Then
    spellingcorrectionsrep = spellingcorrectionsrep + 1
    End If
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseStart
    Else
        .Collapse Direction:=wdCollapseEnd
    End If
  Loop
  End With
 End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:13:27.437

为什么不将其用作通用程序？

```
Option Explicit

Dim wordRep As Long

Public Sub SpellingReview()
    Dim oShell, MyDocuments

    wordRep = 0

    SpellingCorrections "Dog", "Dog (will be changed to DOG)", False, True

    MsgBox wordRep
End Sub

Sub SpellingCorrections(sInput As String, sReplace As String, MC As Boolean, MW As Boolean)
    With ActiveDocument.Content.Find
        Do While .Execute(FindText:=sInput, Forward:=True, Format:=True, _
           MatchWholeWord:=MW, MatchCase:=MC) = True
           wordRep = wordRep + 1
        Loop
    End With

    With Selection.Find
        .ClearFormatting
        .Replacement.ClearFormatting
        .Replacement.Highlight = True
        .Text = sInput
        .Replacement.Text = sReplace
        .Forward = True
        .Wrap = wdFindContinue
        .Format = True
        .MatchCase = MC
        .MatchWholeWord = MW
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
        .Execute Replace:=wdReplaceAll
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:20:53.890

创建一个数组来存储信息并不难

```
Dim Dict() As Variant
' Integer ReplacementCount, String FindText, Boolean MatchCase, Boolean MatchWholeWord, String ReplaceText
Dict = Array( _
            Array(0, "Word", True, True, "word"), _
            Array(0, "Word1", True, True, "word1"), _
            Array(0, "Word2", True, True, "word2"), _
            Array(0, "Word3", True, True, "word3") _
        ) 
```

使用它，您可以遍历每个项目并将替换计数器存储在同一个数组中。

```
For Index = LBound(Dict) To UBound(Dict)
    Do While ReplaceStuffFunction(WithArguments) = True
       Dict(Index)(0) = Dict(Index)(0) + 1
    Loop
Next Index 
```

当我尝试您的第一个示例代码时，它似乎并没有替换所有实例，每次运行 sub 只替换一个，所以要么我做错了，要么不正确（或者它不打算这样做）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T22:09:50.880

```
'In this example, I used two arrays to shorten formal hospital names
'Define two arrays (I used FindWordArray and ReplacewordArray)
'The position of the word (by comma) in each arrays correspond to each other

Dim n as long
Dim FindWordArray, ReplaceWordArray As String 'Change information pertinent to your needs
Dim FWA() As String 'Find words array created by split function
Dim RWA() As String 'Replace array created by split function
Dim HospitalName As String 'This is the string to find and replace

FindWordArray = ("Hospital,Center,Regional,Community,University,Medical") 'change data here separate keep the quotes and separate by commas
FWA = Split(FindWordArray, ",")
ReplaceWordArray = ("Hosp,Cntr,Reg,Com,Uni,Med") 'change data here keep the quotes but separate by commas
RWA = Split(ReplaceWordArray, ",")
'Loop through each of the arrays
For n = LBound(FWA) To UBound(FWA)
    HospitalName = Replace(HospitalName, FWA(n), RWA(n))
Next n 
```

# asp.net-mvc-3 - MVC 3 和 Entity Framework 4.1 数据加载问题

> ID：10643110
> 
> 赞同：0
> 
> 时间：2012-05-17T20:35:42.970
> 
> 标签：asp.net-mvc-3, entity-framework-4

好的！

我不得不说这两种技术都很棒。虽然似乎有些东西我不明白。

您的数据库中有一个数据（假设您想显示一个表中的数据，该表具有对其他表的引用）。

我有一个带有 List 或 IEnumerable 或 IQueryable 或其他任何东西的模型......

因此，在我看来，我想通过对象列表进行 foreach 并利用对其他表的引用的酷特性。当您在控制器中时，控制器没有问题

```
using (var datatabse = new MyEntity)
{
} 
```

但是当您停止使用 db has 已处理时，您会遇到常见错误 ObjectContext 实例已被处理，不能再用于需要连接的操作。

所以我没有看到其他选项作为在内存中创建实体对象的副本......但是你失去了所有很酷的 EF4 引用，你必须首先在你的模型中手动加载数据，然后使用 foreach 在视图上显示它。

所以代替 List<(EF4Type)> 或 IEnumerable<(EF4Type)> 或 IQueryable<(EF4Type)>

您必须执行 List<(MyCustomHelperClass)> 其中 MyCustomHelperClass 表示具有与实体对象类似的属性的类，并且可能还有一些额外的因为您无权访问引用表的属性然后您必须执行 foreach 并将数据加载到此 List 和Razor 视图上的另一个@foreach 显示所有内容。

两倍的工作量，如果项目很大……您可以更全面地了解您需要多少个 helperClass。所有这些很酷的新技术真的要以这种方式使用吗？....或者我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:49:14.183

当您在视图中引用延迟加载的属性时，您可能会遇到该错误。在将它传递给视图之前，您应该在控制器中预先加载您需要的所有内容。

请参阅[加载相关对象（实体框架）](http://msdn.microsoft.com/en-us/library/gg715120%28v=vs.103%29.aspx)。

以下示例将导致在同一查询中使用部门检索所有课程。这是*急切的加载*。

```
// Load all departments and related courses
var departments1 = context.Departments                           
    .Include(d => d.Courses)                           
    .ToList(); 
```

如果没有该`Include()`部分，以后可以检索课程（可能在您的上下文已在视图中处理之后）。这称为*延迟加载*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:01:29.577

除了jrummell 记得的*急切加载*之外，还有另一种加载相关条目的方式，它是*显式加载*。假设您有一个`User`实体，有许多`Groups`与之相关的实体。您可以显式加载它们：

```
var user = context.Users.Find(id); // Load the user.

context.Entry(user)
    .Collection(u => u.Groups)
    .Load(); 
```

这样您就不必使用`.Include()`，甚至可以过滤`Groups`：

```
context.Entry(user)
    .Collection(u => u.Groups)
    .Query()
    .Where(g => g.SomeProperty.Contains("something"))
    .Load(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:40:57.833

导师，

根据您是否拥有存储库或数据库上下文，此对象应该只在控制器操作（请求）期间存在，因此您应该能够在操作范围内完成所需的一切。

也许我误解了，但根据你的问题，这就是你的问题。如果我误解了，那么我仍然建议应该跨控制器引用数据库存储库或数据库上下文，而不是每次都在操作中调用它。

所以你应该在你的控制器中看到这样的东西：

```
public class TasksController : BaseController
{
    private readonly TaskService _serviceTasks;
    public TasksController(IRepository repository)
    {
        _serviceTasks = new TaskService(repository);
    }

    //
    // GET: /Tasks/

    public ActionResult Index()
    {
        var viewModel = _serviceTasks.All<Task>();
        return View(viewModel);         
    }

    public ActionResult Details(int id)
    {
        var domainModel = _serviceTasks.GetById<Task>(id);
        var viewModel = PopulateDetailsViewModel(domainModel);
        return View(viewModel);
    }

    //.. rest of actions cut
} 
```

# .net - 如何构建这个自动增长的 WPF 窗口？

> ID：10643112
> 
> 赞同：1
> 
> 时间：2012-05-17T20:35:53.100
> 
> 标签：.net, wpf

我正在努力解决如何在 WPF 中构建这个窗口。

该窗口有一个文本块，其内容在设计时是未知的。窗口应垂直增长以使整个文本块可见

我尝试了类似于以下的层次结构：

```
Window (auto height)
    Stack Panel (vertical orientation)
        Text Block
        Check Box
        Grid (for precise positioning of the buttons)
            Button 1
            Button 2 
```

这是一个合理的层次结构吗？有没有更好的方法来构建它？

![所需窗口](../Images/ac029052792cff851dc49c62524a5b63.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:06:10.330

您正在做的事情应该可以正常工作。您需要确保在父窗口上使用[SizeToContent 属性。](http://msdn.microsoft.com/en-us/library/system.windows.window.sizetocontent.aspx)像这样的东西：

**XAML**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"  Width="525" SizeToContent="Height">
    <Grid Height="auto" >
        <StackPanel Orientation="Vertical" >
            <TextBlock Name="tb1" TextAlignment="Justify" TextWrapping="Wrap" Text="" />
            <Grid Height="30">
                <CheckBox VerticalAlignment="Center" Name="Random">Random CheckBox</CheckBox>
            </Grid>
            <Grid Height="auto">
                <Button Name="button1" HorizontalAlignment="Right" Margin="0,0,80,0" Width="70" Height="30" Click="button1_Click" />
                <Button Name="Button2" HorizontalAlignment="Right"  Width="70" Height="30" Click="Button2_Click" />
            </Grid>
        </StackPanel>
    </Grid>
</Window> 
```

**代码隐藏”

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        tb1.Text += "TextBlock with contentes set at run-time. " + 
                     "This text block should grow in height as necessary, " + 
                     "and push the other controls down.  The window itself " +
                     "should grow to \n\n Another paragraph\n";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:04:31.740

对我来说看起来不错，假设您希望按钮控件位于文本框下方，堆栈面板不会自动填充父控件。您是否尝试过这种布局并遇到问题，或者这是一个假设性问题？

# ios - 对警报按钮使用标准 Apple 翻译？

> ID：10643114
> 
> 赞同：12
> 
> 时间：2012-05-17T20:36:09.830
> 
> 标签：ios, localization, translation, uialertview

这是真的？当你实例化一个 UIAlertButton 时，你必须为它传递一个明确的 Cancel 按钮标题，像这样：

```
UIAlertView *av = 
    [[UIAlertView alloc] 
         initWithTitle:@"Error" 
         message:err.localizedDescription 
         delegate:nil 
         cancelButtonTitle:@"Cancel" 
         otherButtonTitles:nil]; 
```

这意味着如果你想要一个本地化的应用程序（当然你会这样做），你也必须本地化 Cancel 字符串，即使 Apple 显然已经有了一个规范的翻译。我真的被迫写这样的东西来处理它（或者这甚至可以吗）？

```
NSBundle* uikitBundle = [NSBundle bundleForClass:[UIButton class]];
UIAlertView *av = 
    [[UIAlertView alloc] 
         initWithTitle:NSLocalizedString(@"Error", @"Title for Alert box when error occurs") 
         message:err.localizedDescription 
         delegate:nil 
         cancelButtonTitle:NSLocalizedStringFromTableInBundle(@"Cancel", @"Localizable", uikitBundle, nil) 
         otherButtonTitles:nil]; 
```

这对我来说看起来很可怕，但是我必须维护自己对 Apple HIG 规定的单词的翻译（如“取消”或“确定”）的想法似乎同样荒谬。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T08:22:28.530

如您所料，不建议这样做，因为您的代码引入了一个未记录的、不受支持的依赖项，如果未来的 iOS 更新出现改变 Apple 本地化 UIButton 的方式（不太可能，但谁知道），这可能会破坏您的应用程序。

真的，“OK”和“Cancel”都不是难翻译的东西。如果您不希望翻译人员在您的应用程序本地化工作中为您重新本地化这些内容，那么您可以自己从 iOS 中检索这些内容（使用您的代码）并将翻译内容复制到您的`.strings`文件中，这样您就可以获得可靠的翻译副本从现在开始！

# c# - 如何选择绑定到列表框的 ObservableCollection？

> ID：10643116
> 
> 赞同：2
> 
> 时间：2012-05-17T20:36:16.420
> 
> 标签：c#, wpf, binding, listbox, observablecollection

这甚至可能吗？我有两个 ObservableCollections。我想用其中一个绑定并填充一个列表框。例如，假设我们有 2 个按钮 - 一个用于 Twitter，一个用于 Facebook。单击 Facebook 按钮，它将使用来自 facebook 可观察集合的朋友姓名填充列表框，并将其绑定。单击 Twitter 它将用 Twitter 关注者填充列表框并填充列表框并绑定它。

如何选择将在列表框中填充哪个集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:39:08.120

我只会使用一个可观察的集合并根据用户的选择进行填充。你也可以用两个来源的名字填充它，并有一个过滤器来过滤掉一个或另一个（显然你需要一个包装器对象，你可以在其中指出这个名字是 Facebook 朋友还是 twitter 关注者）。

**编辑**：这是一些快速代码示例，说明如何做到这一点：

```
public interface ISocialContact
{
    string Name { get; }
}

public class FacebookContact : ISocialContact
{
    public string Name { get; set; }
    public string FacebookPage { get; set; }
}

public class TwitterContact : ISocialContact
{
    public string Name { get; set; }
    public string TwitterAccount { get; set; }
} 
```

然后在您的数据上下文中：

```
public ObservableCollection<ISocialContact> Contacts { get; set; }

...

Contacts = new ObservableCollection<ISocialContact> {
                    new FacebookContact { Name = "Face", FacebookPage = "book" },
                    new TwitterContact { Name = "Twit", TwitterAccount = "ter" } 
           }; 
```

在你的 xaml 中：

```
<Grid>
    <Grid.Resources>
        <DataTemplate DataType="{x:Type local:FacebookContact}">
            <TextBlock Text="{Binding FacebookPage}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:TwitterContact}">
            <TextBlock Text="{Binding TwitterAccount}"/>
        </DataTemplate>
    </Grid.Resources>
    <ListBox ItemsSource="{Binding Contacts}" Width="100" Height="100"/>
</Grid> 
```

这会将适当的模板应用于集合中的每个对象。因此，您可以仅使用 facebook 联系人或仅使用 twitter 联系人或混合进行收藏。

另请注意：您不需要通用接口。如果你只是让你`ObservableCollection`的 type ，它也将起作用`object`。但是考虑到它们是由同一个应用程序在同一个列表框中显示的，这表明您可以找到某种通用基础，并且可以创建通用接口或基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:27:49.353

实现这一点的一种不优雅的方法是将 2 个列表框放在同一位置，并将 1 个绑定到 twitter 集合，另一个绑定到 facebook 集合。将它们的可见性绑定到基于按钮单击而更改的属性。就个人而言，我有 2 个单选按钮，并根据选择的单选按钮显示列表框。

```
<ListBox Grid.Row="0" Grid.Column="0" ItemsSource="{Binding Path=TwitterCollection}" SelectedItem="{Binding Path=SelectedTwitterItem}" Visibility="{Binding Path=IsTwitterSelected, Converter={StaticResource visibilityConverter}}" />
<ListBox Grid.Row="0" Grid.Column="0" ItemsSource="{Binding Path=FacebookCollection}" SelectedItem="{Binding Path=SelectedFacebookItem}" Visibility="{Binding Path=IsFacebookSelected, Converter={StaticResource visibilityConverter}}" /> 

<RadioButton Grid.Row="1" Grid.Column="0" GroupName="rdoOptions" Content="{Binding Path=TwitterLabel}" IsChecked="{Binding Path=IsTwitterSelected}" />
<RadioButton Grid.Row="1" Grid.Column="1" GroupName="rdoOptions" Content="{Binding Path=FacebookLabel}" IsChecked="{Binding Path=IsFacebookSelected}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:44:15.137

在您的 ViewModel 中，创建一个公开一个或另一个 ObservableCollection 的属性，并在单击按钮时将其换出：

```
private ObservableCollection<string> _twitterFriendList;
private ObservableCollection<string> _facebookFriendList;

private ObservableCollection<string> _selectedFriendList;
public ObservableCollection<string> SelectedFriendList
{
    get { return _selectedFriendList; }
    set
    {
        if (value != _selectedFriendList)
        {
            _selectedFriendList = value;
            RaisePropertyChanged("SelectedFriendList");
        }
    }
}    

void TwitterButton_Click(object sender, RoutedEventArgs e) 
{
    SelectedFriendList = _twitterFriendList;
} 

void FacebookButton_Click(object sender, RoutedEventArgs e) 
{
    SelectedFriendList = _facebookFriendList;
} 
```

然后在您的 XAML 中，您可以绑定到该属性：

```
<ListBox ItemsSource="{Binding SelectedFriendList}"/> 
```

# google-apps-script - 电子邮件 Google 表单结果不起作用

> ID：10643119
> 
> 赞同：0
> 
> 时间：2012-05-17T20:36:28.353
> 
> 标签：google-apps-script

每次提交表单时，我都使用脚本将表单结果通过电子邮件发送给我。整个代码发布在 Google Groups 中：

[http://groups.google.com/a/googleproductforums.com/d/topic/apps-script/1rObNfuez6k/discussion](http://groups.google.com/a/googleproductforums.com/d/topic/apps-script/1rObNfuez6k/discussion)

这是当前代码：

```
function contactUsMailer2(e) {

//    var ss = SpreadsheetApp.getActive();
//    SpreadsheetApp.setActiveSpreadsheet(ss);

    var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Data'); //default sheets - change if you
    var setup = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Setup'); //rename the sheets

    var width = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Data').getLastColumn(); //get "width" of sheet, used to enumrate fields
    var myEmailAddress = setup.getRange('B3').getValue(); //get email recipient(s) from "Setup" (default)
    var myEmailSubject = setup.getRange('B4').getValue(); //get a subject line from "Setup" (default)
                                                          //from row 1 of "Data"
    var sheetURL = SpreadsheetApp.getActiveSpreadsheet().getUrl(); //get sheet url to include in email
    var formURL = SpreadsheetApp.getActiveSpreadsheet().getFormUrl(); //get form url to include in email

    var column = 'A';
    var message = ''; 
    var htmlBody = '<html><body><table>'; //generated email will have both an HTML table and a plain-text part
                                          //to be RFC compliant.  beginning of html and table.
    for (var c=1; c<=width; ++c) {
        var data = sheet.getRange(1, c, 1, 1).getValue(); //this gets the "filed" names from the 1st row of "Sheet1"

        try {      
            //retrieve field data and build the HTML and plain-text emails
            var message = message + data + ': ' + e.namedValues[data].toString() + '\r\n'; //plain-text
            var htmlBody = htmlBody + '<tr><td><b>' + data + ': </b></td><td>' + e.namedValues[data].toString() + '</td></tr>'; //HTML
        }
        catch (a) {
            var message = message + data + ': n/a\r\n';
            var htmlBody = htmlBody + '<tr><td><b>' + data + ': </b></td><td>n/a</td></tr>';
        }

        var column = String.fromCharCode(column.charCodeAt() + 1); //increment column letter
    }

    var htmlBody = htmlBody + '</table>'; //close table

    var message = message + '\r\n\r\nData from form located at ' + formURL + '\r\n'; //put form url in text email
    var message = message + 'Data posted to spreadsheet at ' + sheetURL; //put sheet url in text email

    var htmlBody = htmlBody + '<br><br>Data from form located <a href=\"' + formURL + '\">here</a><br>'; //put form url in HTML email
    var htmlBody = htmlBody + 'Data posted to spreadsheet <a href=\"' + sheetURL + '\">here</a><br>'; //put sheet url in HTML email
    var htmlBody = htmlBody + '</body></html>'; //close html

    MailApp.sendEmail(myEmailAddress, myEmailSubject, message, {htmlBody: htmlBody}) ; //send the email
}

function showid() {
    Browser.msgBox("The sheet ID is:\r\n\r\n" + SpreadsheetApp.getActiveSpreadsheet().getId());
} 
```

脚本现在可以很好地与原始电子表格一起使用，但是当我尝试将它与新表单和电子表格一起使用时，它无法发送电子邮件。表格很好地填写了电子表格，我们收到了通常的电子邮件，说明电子表格已更新，但脚本电子邮件没有通过。

有趣的是，当我调试它确实发送电子邮件的脚本时，所有字段中都只有空条目（这是我所期望的）。Debug 不会报告脚本本身的任何错误。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:13:19.067

您是否已授权新表单中的脚本？由于您的脚本需要发送电子邮件，因此需要明确授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:07:07.983

确保触发器设置为“提交时”。我的设置为“打开”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:12:39.203

尝试删除周围的报价 `for (var c=1; c<=width; ++c) { var data = sheet.getRange(column + '1').getValue(); //this gets the "filed" names from the 1st row of "Sheet1"`

我在脚本中做了类似的事情，以下对我有用。

`var rangeval = "B"+(i+1); var nameFld = filesheet.getRange(i+1,1).getValue();`

乔

# json - Grails 中的全日历

> ID：10643127
> 
> 赞同：0
> 
> 时间：2012-05-17T20:36:52.877
> 
> 标签：json, grails, fullcalendar

我需要同样的帮助来填充日历上的 JSON。JSON是这样的：

> {
> “开始”：“”，
> “结束”：“”，
> “标题”：“”，
> “摘要”：“”
> }

我返回这个 JSON；

```
def createJSONEvent = {
    def json="["
        json+="{"
        json+="title:\"fede\","
        json+="start:'2012-05-01T22:00:00',"
        json+="end:'2012-05-01T22:30:00',"
        json+="allDay: false,"
        json+="url:\"${request.contextPath}/calendar/index/1\","
        json+="backgroundColor:'blue',"
        json+="textColor:'black'"
        json+="}"       
    json+="]"
    render json
} 
```

我想用这个 HTML 代码来展示它：

```
<fullcal:calendar id="cal">
 theme: true,
 header: {
 left: 'prev,next today',
 center: 'title',
 right: 'month,agendaWeek,agendaDay',
 },
 columnFormat: { week: 'ddd d/M' },
 timeFormat: 'HH:mm{ - HH:mm}',
 selectable: true,
 selectHelper: true,
 editable: true,
 events:${include(controller:"calendar", action:"createJSONEvent")}
</fullcal:calendar> 
```

什么也没有发生。控制台显示：

> 2012-05-18 12:33:13,319 [http-8080-1] 错误 resource.ResourceMeta - 找不到资源：/plugins/full-calendar-1.5.1.0/css/fullcalendar.css
> 2012-05-18 12:33 ：13,324 [http-8080-1] 错误 resource.ResourceMeta - 找不到资源：/plugins/full-calendar-1.5.1.0/js/fullcalendar.min.js
> 2012-05-18 12:33:14,082 [http-8080 -1] 错误 resource.ResourceMeta - 找不到资源：/plugins/full-calendar-1.5.1.0/css/fullcalendar.print.css

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T01:47:55.450

这个问题（http://stackoverflow.com/questions/6181579/how-to-solve-grails-resource-not-found-error-for-a-plugin）表明“grails clean”可能会有所帮助。你试过这个吗？

# math - 根据项目数和屏幕比例分屏

> ID：10643129
> 
> 赞同：1
> 
> 时间：2012-05-17T20:37:00.657
> 
> 标签：math, language-agnostic, grid, formula, equation

给定动态数量的项目，我必须（尽可能）平均分割屏幕。

所以我需要根据屏幕大小/比例找到列数和行数。

每个项目的大小并不重要，因为我将根据每列和每行的项目以百分比计算它们。

如果我有 5 个项目，那么（取决于屏幕比例）我可能在第一行有 3 列，在第二行有 2 列。没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:42:13.537

首先，您必须确定“平均划分屏幕”的含义。这可能意味着每个项目都有一个首选的 x 与 y 比率。

您可以使用以下算法，该算法有利于接近所需的 x 与 y 比率，而不是减少空白空间的数量。

```
// Set this to the desired x-to-y ratio.
const preferred_ratio = 1.2; 

function calc_cols_rows(In: screen, In: num_items, Out: num_rows, Out: num_cols) {
  desired_aspect = (screen.width / screen.height) / preferred_ratio;

  // Calculate the number of rows that is closest to the desired aspect:
  num_rows = round(sqrt(num_items / desired_aspect));

  // Calculate the required number of columns:
  num_cols = ceil(num_items / num_rows);
} 
```

# firefox - 边界半径应该以 Firefox 方式还是 Webkit 方式工作？

> ID：10643134
> 
> 赞同：0
> 
> 时间：2012-05-17T20:37:10.407
> 
> 标签：firefox, google-chrome, webkit, css

边界半径应该以 Firefox 方式还是 Webkit 方式工作？基本上，在 Firefox 中，如果具有边框半径的元素隐藏了溢出，则内容被半径剪切，在 Webkit 中它会溢出。到目前为止，Firefox 的方式显然是最符合逻辑的。

如果这就是它应该如何工作，那么任何人都知道 Webkit 何时修复它，或者这是否会成为那些糟糕的 IE6 风格浏览器差异之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:50:04.543

据我所知，这是[https://bugs.webkit.org/show_bug.cgi?id=68196](https://bugs.webkit.org/show_bug.cgi?id=68196)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:07:30.297

目前在 Chrome 中的工作方式是一个错误。

我已向 Chrome 开发人员发帖，他们已经确认并相信很快就会修复。在下面的链接上关注进度

[https://groups.google.com/a/chromium.org/group/chromium-bugs/browse_thread/thread/2245dc43377a067d](https://groups.google.com/a/chromium.org/group/chromium-bugs/browse_thread/thread/2245dc43377a067d)

# python - 具有不同编码的csv

> ID：10643139
> 
> 赞同：3
> 
> 时间：2012-05-17T20:37:38.243
> 
> 标签：python, encoding, csv

> **可能重复：**
> [自动以正确的编码打开文件](https://stackoverflow.com/questions/2342284/open-a-file-in-the-proper-encoding-automatically)

我的代码：

```
import csv

def handle_uploaded_file(f):
  dataReader = csv.reader(f, delimiter=';', quotechar='"')

for row in dataReader:
  do_sth 
```

问题是它只有在 csv 是 UTF-8 编码的情况下才能正常工作。我应该改变什么来提供 iso-8859-2 或 windows-1250 编码？（最好的解决方案是自动识别编码，但也可以手动转换）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T13:53:22.367

目前的解决方案：

```
def reencode(file):
    for line in file:
        yield line.decode('windows-1250').encode('utf-8')

csv_reader = csv.reader(reencode(open(filepath)), delimiter=";",quotechar='"') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T20:53:29.230

查看[csv 模块文档的示例部分](http://docs.python.org/library/csv.html#examples)。最后，您将找到可以用于该目的的类，并指定编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:52:59.450

传递使用[codecs.open](http://docs.python.org/library/codecs.html#codecs.open)打开的文件描述符。你不能自动识别编码，或者不是很好。要猜测编码，您可以使用[chardet](http://pypi.python.org/pypi/chardet)。

# c# - DateTime 奇怪的行为

> ID：10643141
> 
> 赞同：6
> 
> 时间：2012-05-17T20:37:45.517
> 
> 标签：c#, .net, winforms, datetime

我创建了一个 C# WinForms 应用程序。

在我的电脑上，以下工作：

```
DateTime.ParseExact("13/05/2012", "dd/mm/yyyy",  null) 
```

但这不是：

```
DateTime.Parse("13/05/2012") 
```

在我客户的计算机上，它是相反的。这有效：

```
DateTime.Parse("13/05/2012") 
```

但这不是：

```
DateTime.ParseExact("13/05/2012", "dd/mm/yyyy",  null) 
```

错误指出：

```
String was not recognized as a valid DateTime. 
```

没有设法在互联网上找到有关此问题的任何信息。该程序使用 .Net Framework 4，是一个 x86 应用程序。我运行 Windows 8 x64，客户端运行 Windows 7 x64。

有人知道为什么会发生这种情况吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T20:39:14.563

您在不同计算机上获得不同行为的原因是因为它们以不同的文化运行。尝试在两台计算机上运行这行代码，看看它是否输出不同的东西：[（ideone）](http://ideone.com/Nkv0c)

```
System.Console.WriteLine(CultureInfo.CurrentCulture); 
```

输出（示例）：

```
zh-CN

```

文化指定了许多东西，其中之一是日期分隔符。如果您希望所有用户的行为一致，请尝试指定一种文化：[（ideone）](http://ideone.com/12XWu)

```
CultureInfo cultureInfo = CultureInfo.InvariantCulture; // or whatever you prefer
DateTime dateTime = DateTime.ParseExact("13/05/2012", "dd/MM/yyyy", cultureInfo); 
```

上面的代码假设你有这些 using 语句：

```
using System;
using System.Globalization; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T20:41:50.893

当心; 在[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4)中，说明`mm`符表示“分钟”，而不是“月”。你需要使用`MM`几个月。

```
DateTime.ParseExact("13/05/2012", "dd/MM/yyyy",  CultureInfo.InvariantCulture) 
```

# eclipse - 如何卸载服务器适配器？

> ID：10643142
> 
> 赞同：4
> 
> 时间：2012-05-17T20:37:45.780
> 
> 标签：eclipse, webserver, adapter

Eclipse EE 靛蓝。我安装了额外的服务器适配器，但我不知道如何卸载它们。

*   它们未显示在已安装软件的列表中
*   卸载整个 Eclipse 并再次安装它并没有帮助
*   给定的服务器适配器对 Eclipse 是可见的，因为它可以报告它的冲突（如果有的话）并且它被排除在可安装的适配器列表之外

我不知道在哪里可以找到能够卸载它们的**已安装服务器适配器的列表。**

那么——如何卸载服务器适配器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:54:34.427

您是否尝试过恢复到较旧的 eclipse 配置版本：

帮助 > 安装新软件 > 安装历史 > 在添加服务器工具之前选择一个配置。

ps：请让我知道这是否有效，以及您是否找到了另一个有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T15:52:15.053

这个与其他软件不同，但要删除一个服务器运行时，请转到首选项 -> 服务器 -> 运行时环境，选择要删除的服务器运行时，然后单击删除。

那应该照顾它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T16:51:14.910

在 Eclipse EE Juno 中，我尝试了 gaspyr 的技巧来恢复到旧的配置版本，即使服务器适配器未列在安装历史记录中的安装内容中，它也能正常工作。

就我而言，这是 Eclipse 的全新安装，安装历史中的配置版本很少，而且我知道何时安装了服务器适配器。我所要做的就是在安装服务器适配器之前选择一个版本。

如果您不确定它是什么版本，您可能需要查看安装历史并逐个还原到每个版本，并每次检查服务器适配器是否存在。之后，您可能必须重新安装在服务器适配器之后安装的每个插件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T22:23:47.977

最简单的事情是从文件系统中的文件夹中手动删除所有相关的 Jar 文件和文件`Eclipse`夹。

# android - 从 ItemizedOverlay 中删除特定的 GeoPoint？

> ID：10643146
> 
> 赞同：0
> 
> 时间：2012-05-17T20:38:08.230
> 
> 标签：android, itemizedoverlay

我有一张地图，上面有很多点添加到 ItemizedOverlay。

```
OverlayItem overlayItem = new OverlayItem(theGeoPoint, title, description);
itemizedOverlay.addOverlay(overlayItem);
mapOverlays.add(itemizedOverlay); 
```

有没有办法从 itemizedOverlay 中删除特定点？

例如，假设我在不同的纬度/经度上添加了很多点，我希望删除之前添加的纬度：32.3121212 和经度：33.1230912 的点。

我怎样才能删除这一点？

我真的需要这个，所以我希望有人能提供帮助。

谢谢。

*完整的故事场景（如果您对如何解决这个问题有不同的想法）：将事件添加到从数据库中捕获的地图。现在，当从数据库中删除事件时，我希望同步地图并仅删除已删除的事件。（请不要建议我重新下载除已删除的点之外的所有点，即使我已经想到了，但这不是我想做的选择。：p）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:45:31.917

使用 GeoPoints Array 创建 MapOverlay 并覆盖 draw 函数：

```
public class MapOverlay extends Overlay 
{

    private ArrayList<GeoPoints>points;
    ...

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) 
    {
            super.draw(canvas, mapView, shadow);      
            int len = points.size();  
            if(len > 0)
            {
                for(int i = 0; i < len; i++)
                {
                   // do with your points whatever you want
                   // you connect them, draw a bitmap over them  and etc.
                   // for example:
                   Bitmap bmp = BitmapFactory.decodeResource(res, R.drawable.pointer);
                   mapView.getProjection().toPixels(points.get(i), screenPts);
                   canvas.drawBitmap(bmp, screenPts.x-bmp.getWidth()/2, screenPts.y - bmp.getHeight()/2, null);  
                } 
            }
    }

    public void addPoint(GeoPoint p)
    {
       // add point to the display array
    }

    public void removePointByIndex(int i)
    {
       points.remove(i);
    }

    public void removePointByCordinate(Double lat, Double lng)
    {
        int index = -1;
        int len = points.size();  
        if(len > 0)
        {
                for(int i = 0; i < len; i++)
                {
                     if((int)(lat*1E6) == points.get(i).getLatitudeE6() && (int)(lng*1E6) == points.get(i).getLongitudeE6())
                     {
                          index = i;
                     }
                } 
            }

            if(index != -1)
            {
                points.remove(index);
            }
        }
    }

    public void removePoint(GeoPoint p)
    {
        int index = -1;
        int len = points.size();  
        if(len > 0)
        {
                for(int i = 0; i < len; i++)
                {
                     if(p == points.get(i))
                     {
                          index = i;
                     }
                } 
            }

            if(index != -1)
            {
                points.remove(index);
            }
        }
    }

} 
```

（我没有测试以上课程）

然后在您的 MapActivity 类中，您可以：

```
MapView mapView = (MapView) findViewById(R.id.mapview);
mapView.setClickable(true);
MapOverlay mapOverlay = new MapOverlay();                       
List<Overlay> listOfOverlays = mapView.getOverlays();
listOfOverlays.add(mapOverlay); 
```

尝试谷歌一些谷歌地图教程，也许你会找到更多的解决方案。

# objective-c - 我可以向 UITableView 中的一个单元格添加一个披露按钮吗？

> ID：10643149
> 
> 赞同：0
> 
> 时间：2012-05-17T20:38:26.117
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个 UITableView，我想向单元格添加一个披露按钮，但只有在选择单元格时。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:44:08.023

在`tableView:didSelectRowAtIndexPath:`将 indexPath 保存到成员变量中。

在`tableview:cellForRowAtIndexPath:`检查中，如果 indexPath 是保存的并设置`cell.accessoryType`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:44:09.283

在里面做

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    //bla bla bla
} 
```

记住要有一个变量来从上一个选定的单元格中删除按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:44:25.293

在表格视图单元格中设置`accessoryType`或`accessoryView property`。您将希望在`-tableView:didSelectRowAtIndexPath:`委托方法中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:09:40.657

在 didSelect 中执行此操作意味着仅在用户释放所选单元格后才会显示公开按钮。如果要在单元格突出显示时出现 ti，则需要继承 UITableViewCell 并覆盖 setSelected: 或 setHighlighted:

但是，disclosureButton 的全部意义在于，可以按下按钮并执行与简单地选择单元格不同的操作。为此，有披露指标。在我看来，仅在突出显示/选择单元格时才显示其中任何一个的整个前提似乎没有任何良好的 UI 设计目的......但也许对于你想要的它确实有意义。

# jaxb - JAXB @XmlSee也被覆盖

> ID：10643154
> 
> 赞同：1
> 
> 时间：2012-05-17T20:38:47.713
> 
> 标签：jaxb

我在 common.xsd 中定义了一些类型 我有多个 XSD，它们的类型从相同的类型扩展而来。当我生成类时，@XmlSeeAlso 属性会不断更新为最新使用的 xsd。

是否可以告诉编译器在生成公共类时有多个类可以从它扩展？

# c# - 进度条绘制方法？

> ID：10643158
> 
> 赞同：2
> 
> 时间：2012-05-17T20:38:54.230
> 
> 标签：c#, progress-bar, visual-c#-express-2010

好的，这是我在进度条上绘制内容的代码：

```
private void timer2_Tick(object sender, EventArgs e)
    {
        int percent = progressBar1.Value;
        progressBar1.CreateGraphics().DrawString(percent.ToString() + "%", new Font("Arial", (float)8.25, FontStyle.Regular), Brushes.Black, new PointF(progressBar1.Width / 2 - 10, progressBar1.Height / 2 - 7));
        progressBar1.Increment(+1);
        if (progressBar1.Value >= 99)
        {
            timer2.Stop();
            this.Close();
        } 
```

好的，所以我在它的中间画了一个标签，它将显示进度条的值。由于某种原因，它一直在闪烁……消失又出现。所以，有人告诉我把那个代码拿出来放在paint方法中......我看不到它。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T20:46:51.687

这是一个应该可以工作的代码（我选择了第 3 个选项，创建了一个子类并覆盖了 WndProc 来处理绘制消息：

```
public class Prog : ProgressBar
{
    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);

        if (m.Msg == 0x000F)
        {
            var flags = TextFormatFlags.VerticalCenter |
                        TextFormatFlags.HorizontalCenter |
                        TextFormatFlags.SingleLine |
                        TextFormatFlags.WordEllipsis;

            TextRenderer.DrawText(CreateGraphics(),
                                  ((float)this.Value/this.Maximum*100) + "%",
                                  Font,
                                  new Rectangle(0, 0, this.Width, this.Height),
                                  Color.Black,
                                  flags);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:55:11.323

您也可以使用[ProgressBarRenderer](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbarrenderer.aspx)自己完成整个绘图。

# postgresql - Grib2 到 PostGIS 栅格 - 有人可以让它工作吗？

> ID：10643161
> 
> 赞同：4
> 
> 时间：2012-05-17T20:39:07.543
> 
> 标签：postgresql, gis, postgis, geoserver, grib

我有一个需要导入美国国家气象局表面分析的应用程序，这些分析以[grib2](http://en.wikipedia.org/wiki/GRIB)文件的形式分发。我想将它们拉入 PostGIS 2.0 栅格，进行一些计算和建模，并在 GeoServer 中显示数据和模型结果。

由于 grib2 是 GDAL 支持的格式，因此提供的 raster2pgsql 实用程序应该能够将 grib2 直接插入到与 PostGIS 兼容的 SQL 中，一旦它存在，GeoServer 应该能够处理它。但是，我遇到了没有明显解决方案的问题——至少对我来说并不明显！Raster2pgsql 运行，显然没有错误，生成 SQL，运行 SQL 创建看起来非常像光栅的东西。但是 GeoServer 无法显示它——特别是边界看起来很奇怪 (0,0 -1,-1) 并且“预览层”只是抛出了 NullPointerException。

有人已经走过这条路了吗？我遇到了一些基本问题，比如不知道数据的 SRID 应该是什么（也许是 4326？）。我不希望任何人为我调试我的问题，但如果有人已经让这个工具链或其中的一部分工作，我可以插入已知好的东西，看看我能发现什么。

TIA,

读写

更新：Per Mike，这是其中一个文件中的坐标系内容；我省略了“gdalinfo”输出中的其他 749 个波段。请注意，文件名不同——我通过在原始文件上运行“gdalinfo”发现它有问题，gdalinfo 无法读取它。新（35MB！）文件[在这里](http://www.soils.wisc.edu/~wayne/ruc2.t00z.bgrb13anl.grib2)。

Gdalinfo 输出：

```
Driver: GRIB/GRIdded Binary (.grb)
Files: ruc2.t00z.bgrb13anl.grib2
Size is 451, 337
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Coordinate System imported from GRIB file",
        DATUM["unknown",
            SPHEROID["Sphere",6371229,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",25],
    PARAMETER["standard_parallel_2",25],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",265],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (-3332155.288903323933482,6830293.833488883450627)
Pixel Size = (13545.000000000000000,-13545.000000000000000)
Corner Coordinates:
Upper Left  (-3332155.289, 6830293.833) (139d51'22.04"W, 54d10'20.71"N)
Lower Left  (-3332155.289, 2265628.833) (126d 6'34.06"W, 16d 9'49.48"N)
Upper Right ( 2776639.711, 6830293.833) ( 57d12'21.76"W, 55d27'10.73"N)
Lower Right ( 2776639.711, 2265628.833) ( 68d56'16.73"W, 17d11'55.33"N)
Center      ( -277757.789, 4547961.333) ( 98d 8'30.73"W, 39d54'5.40"N)
Band 1 Block=451x1 Type=Float64, ColorInterp=Undefined
  Description = 1[-] HYBL="Hybrid level"
  Metadata:
    GRIB_UNIT=[Pa]
    GRIB_COMMENT=Pressure [Pa]
    GRIB_ELEMENT=PRES
[Etc., Etc., for all 750 bands] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:46:48.920

我希望这会有所帮助，至少那些来到这个线程的人。

请记住，GeoServer 虽然能够从 PostGIS 加载栅格数据，但默认的 PostGIS“导入”模块仅适用于矢量数据，这就是为什么你会得到那些奇怪的边界 (-1 -1 0 0)。

您必须将 ImageMosaicJDBC 插件添加到您的地理服务器安装中，请按照此处的步骤操作！

[http://docs.geoserver.org/latest/en/user/tutorials/imagemosaic-jdbc/imagemosaic-jdbc_tutorial.html](http://docs.geoserver.org/latest/en/user/tutorials/imagemosaic-jdbc/imagemosaic-jdbc_tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T22:09:29.830

[在这里](https://gis.stackexchange.com/questions/25603/grib2-to-raster-grib2-raster2pgsql-postgis-2-0-geoserver)我的问题得到了很好的答案。把它作为一个单独的答案。

他建议使用 gdalwarp 将 GRIB2 文件拉入已知的 SRID，因此：

```
gdalwarp -t_srs EPSG:4326 original_file.grib2 4326_file.grib2 
```

然后， raster2pgsql 工作得很好，例如

```
raster2pgsql -M -a 4326_file.grib2 some_sql.sql 
```

# oracle - pl/sql 触发器完整性约束问题

> ID：10643166
> 
> 赞同：1
> 
> 时间：2012-05-17T20:39:16.887
> 
> 标签：oracle, plsql, triggers, oracle11g

当订单表出现时，我的任务是创建触发器以插入日志表

1.  插入
2.  更新

在星期五下午 5 点到星期一上午 9 点之间也将禁用插入/删除/更新。下面的解决方案涵盖了所有这些，但是因为它是一个前触发器，我不得不关闭完整性约束（这对日志表有影响吗？）

有没有人有任何建议我可以如何做到这一点并保持完整性约束（在 logono 列上）？

我正在考虑 11G 计算触发器，但在之前的答案中建议这不合适，加上向后兼容性的问题。

```
 CREATE OR REPLACE TRIGGER log_order
BEFORE INSERT OR UPDATE OR DELETE ON orders
FOR EACH ROW
DECLARE out_of_hours EXCEPTION;
BEGIN
IF INSERTING THEN
IF
 TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) BETWEEN 109 AND 517 THEN 

    insert into order_log values
 (order_log_PK.nextval, 
 (select user from dual), 
 :NEW.ono, 
 (select  SYSDATE from dual), 
 'Order Inserted' ) ;
ELSE
    RAISE out_of_hours;
END IF;
END IF;
IF UPDATING THEN 
IF
 TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) BETWEEN 109 AND 517 THEN 

    insert into order_log values
 (order_log_PK.nextval, 
 (select user from dual), 
 :NEW.ono, 
 (select  SYSDATE from dual), 
 'order updated' ) ;
ELSE
    RAISE out_of_hours;
END IF;
END IF;
IF DELETING THEN
IF 
 TO_NUMBER( TO_CHAR( SYSDATE, 'DHH24' ) ) BETWEEN 109 AND 517
 THEN 
RAISE out_of_hourS;
END IF;
END IF;
EXCEPTION 
    WHEN out_of_hours THEN
    dbms_output.put_line('there is not privelages at this time');
    RAISE_APPLICATION_ERROR(-20001, 'CANNOT UPDATE OUT OF HOURS');
END; 
```

谢谢

**编辑**

完整性问题的出现是因为进入日志表的 :NEW.ono 值尚未插入到订单表中，因为这是一个前触发器，因此违反了 logono 外键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:51:05.363

您可以简化您的触发器，以便只检查周一上午 9 点到周五下午 5 点的条件一次，这样您就只有一个插入日志表的位置，并且无需额外的异常和异常处理程序。

您可以使触发器成为 AFTER INSERT 触发器，以便触发器在数据已经存在之后执行，`ORDERS`这样您就可以在其中创建`ORDER_LOG`引用`ONO`键 in的外键约束`ORDERS`。但是，想要创建这种约束似乎很奇怪。如果您将日志表创建为基表的子表，这意味着您将永远无法从 中删除一行`ORDERS`，因为总会有一个子行，或者您需要从 中删除所有行在执行`ORDER_LOG`删除`ONO`之前。这些通常都不是特别可取的——一般来说，拥有一个日志表的意义在于它将记录所有操作，而不仅仅是对基表中仍然存在的行的操作。

```
CREATE OR REPLACE TRIGGER log_order
  AFTER INSERT OR UPDATE OR DELETE ON orders
  FOR EACH ROW
DECLARE 
  l_operation varchar2(30);
BEGIN
  if to_number( to_char( sysdate, 'ddhh24' ) ) between 109 and 517
  then
    if inserting
    then
      l_operation := 'Order inserted';
    elsif updating
    then
      l_operation := 'Order updated';
    end if;

    -- Note that I'm guessing at the names of the columns in order_log
    insert into order_log( order_log_pk, 
                           modify_user,
                           ono,
                           modify_date,
                           description )
      values( order_log_PK.nextval,
              user,
              :new.ono,
              sysdate,
              l_operation );
  else 
    raise_application_error( -20001, 'Cannot update out of hours' );
  end if;
END; 
```

虽然在`INSERT`不列出要插入的列的情况下对表执行操作在语法上可能是有效的，但这样做很危险。如果您将来添加另一列，即使不需要，您`INSERT`也将开始失败。如果您明确列出列，触发器将继续工作。如果您没有明确列出列，则相对难以发现将数据插入错误列的错误。我猜到了这些列是什么——你必须替换正确的列名。

# php - 如何使用 preg_replace() 去除字符串中的额外星号

> ID：10643167
> 
> 赞同：4
> 
> 时间：2012-05-17T20:39:20.250
> 
> 标签：php, preg-replace, strip

我知道如何使用 preg_replace() 去除多余的空格、破折号和句点，但我需要知道下面哪种格式可以正确去除字符串中的额外星号。

这些代码行用于去除多余的空格、破折号和句点：

```
// Strips out extra spaces
   $string = preg_replace('/\s\s+/', ' ',$string);
// Strips out extra dashes
   $string = preg_replace('/-+/', '-', $string);
// Strips out extra periods
   $string = preg_replace('/\.+/', '.', $string); 
```

以下哪项对于去掉多余的星号是正确的？

```
// Version 1: Strips out extra asterisks
   $string = preg_replace('/\*+/', '*', $string);

// Version 2: Strips out extra asterisks
   $string = preg_replace('/*+/', '*', $string); 
```

先感谢您。

顺便说一句，是否有一个列表显示使用 PHP 时需要用正斜杠转义的所有字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:40:25.373

尝试这个：

```
$string = preg_replace('/\*{2,}/', '*', $string); 
```

这将用一个星号替换相邻的多个星号的任何实例。

或者，如果您只想去掉所有星号：

```
$string = preg_replace('/[\*]+/', '', $string); 
```

值得注意的是，***是正则表达式中的特殊字符；所以，你必须用反斜杠转义它。

此外，这是一个很好的正则表达式参考： [http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

以下是如何将多个字符替换组合到一个正则表达式中：

```
$string = preg_replace('/(\*|\.){2,}/', '$1', $string); 
```

这将替换星号和句点。

# java - Java/Android 中的仅调试方法或接口

> ID：10643174
> 
> 赞同：0
> 
> 时间：2012-05-17T20:40:11.113
> 
> 标签：java, android

我是 Android 和 Java 的新手——在 C/C++/C# 方面有很多经验。

我的界面看起来像这样：

```
class WellNamedClass {
    void greatMethodToCallWhenever() { /*...*/ }

    void debugOnlyMethod() { /*...*/ }
} 
```

在上面提到的语言中，我要么 #ifdef 整个 debugOnlyMethod 方法，要么 #ifdef 实现，所以它什么都不做，但 Java 没有预处理器。

我对在那里有代码并在运行时检查我们是否处于调试版本中感到非常满意，但我什至找不到这样做的方法。

我发现了类似[这样](https://stackoverflow.com/questions/32041/how-to-remove-debug-statements-from-production-code-in-java)的建议，您可以在其中创建一个带有常量的类，该常量指示是否启用了调试（或您想要的任何其他内容）。这可能有效，但是您必须手动更改代码才能获得调试版本和发布版本。

有没有其他人解决过这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:56:54.953

> 这可能有效，但是您必须手动更改代码才能获得调试版本和发布版本。

一种流行的方法是使用`-D`标志将系统属性传递给 VM。然后，您可以直接使用或从该属性`System.getProperty`初始化 a 。`static field`

`System.getenv`也将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:53:04.943

我不知道你为什么需要这个，顺便说一句，你可以放一个静态全局变量，像这样：

```
class WellNamedClass{

public static final boolean DEBUG = true;
...
} 
```

并使用 if 语句检查您的调试方法，例如：

```
if(WellNamedClass.DEBUG){
    debugOnlyMethod();
} 
```

从java开始，你可以玩这个。

当您获得更多经验时，您可以尝试注解、aop 或任何其他高级编程技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T04:05:54.233

我认为我们将要使用的方法是对我们的本机组件进行 JNI 调用，它会告诉我们是否在调试模式下运行。无论如何，我们必须拥有本机组件，并且会在启动时进行一些 JNI 调用，因此这是一个相对简单的解决方案，因为 C++ 有一个预处理器。

# php - 代码到文本（PHP，语言）

> ID：10643176
> 
> 赞同：0
> 
> 时间：2012-05-17T20:40:15.780
> 
> 标签：php, ajax, utf-8

当我使用非英文的 AJAX 提交帖子时，我会得到类似于`%u4F60%u662F%u5982%u4F55%u505A%uFF1F` What can I do to fix this in PHP? 我试过了`utf8_decode`，还是不行。

如果有帮助，我将使用 AJAX 提交文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:59:17.820

这是做你想做的吗？

```
<?php

  function utf8_urldecode ($str) {
    return urldecode(preg_replace_callback('/%u([0-9A-F]{4,6})/i', function($matches) {
      $int = hexdec($matches[1]);
      switch (TRUE) {
        case $int < 0x80:
          return pack('C*', $int & 0x7F);
        case $int < 0x0800:
          return pack('C*', (($int & 0x07C0) >> 6) | 0xC0, ($int & 0x3F) | 0x80);
        case $int < 0x010000:
          return pack('C*', (($int & 0xF000) >> 12) | 0xE0, (($int & 0x0FC0) >> 6) | 0x80, ($int & 0x3F) | 0x80);
        case $int < 0x110000:
          return pack('C*', (($int & 0x1C0000) >> 18) | 0xF0, (($int & 0x03F000) >> 12) | 0x80, (($int & 0x0FC0) >> 6) | 0x80, ($int & 0x3F) | 0x80);
        default:
          return $matches[0];
      }
    }, $str));
  }

  $str = "%u4F60%u662F%u5982%u4F55%u505A%uFF1F";

  echo utf8_urldecode($str); 
```

我以前从未尝试过将十六进制 UTF-8 代码点转换为二进制，结果发现它实际上很容易理解它。当然，它可能仍会在您的浏览器中显示为废话，具体取决于字符实际是什么 - 您可能需要安装语言包才能正确呈现它们。

# sql - 从全名列解析名字和姓氏

> ID：10643177
> 
> 赞同：-1
> 
> 时间：2012-05-17T20:40:19.457
> 
> 标签：sql, parsing

下面是我试图操纵的数据。我正在尝试在第二个逗号之前获取姓氏和名字

![在此处输入图像描述](../Images/b1c318f2101e30df3e44da5cd6a755c4.png)

这是我目前拥有的代码：

```
SELECT     
[SDN_Name],         
CASE WHEN CHARINDEX(', ', [SDN_Name]) > 0 THEN
    LEFT([SDN_Name],(CHARINDEX(', ',[SDN_Name],1)-1))    
ELSE         
     [SDN_Name]    
END as LName,
CASE WHEN CHARINDEX(', ', [SDN_Name]) > 0 THEN  
   SUBSTRING([SDN_Name],CHARINDEX(', ',[SDN_Name])+1, ( LEN([SDN_Name]) - CHARINDEX(', ',[SDN_Name])+1))
ELSE         
    NULL     
END as FName 
```

FROM [Staging].[OFAC].[TP1] 其中（[SDN_Type] = '个人'）

例如，如果全名是 DELOS REYES, Feliciano, Jr。我希望 DELOS REYES 作为 LName，Feliciano Semborio 作为 Fname，但我不想捕获“, Jr.”。

我能够解析姓氏和第一个逗号的所有内容。如何编写一个 CASEstatment 来捕获没有名称后缀的名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:45:33.900

这些是 SDN_Name 字段中的逗号，对吧？只需使用 ', ' 的*CharIndex*而不是 ' '，它应该可以工作。像这样：

```
SELECT [SDN_Name],         
    CASE WHEN CHARINDEX(', ', [SDN_Name]) > 0 THEN
        LEFT([SDN_Name],CHARINDEX(', ',[SDN_Name])-1)     
    ELSE         
        [SDN_Name]    
    END as LName,
    CASE WHEN CHARINDEX(', ', [SDN_Name]) > 0 THEN        
        SUBSTRING([SDN_Name], CHARINDEX(', ',[SDN_Name])+2, 
            CASE WHEN RIGHT([SDN_Name], 1) = '.' THEN LEN([SDN_Name]-2) ELSE LEN([SDN_Name]) END
            - (2+CHARINDEX(', ',[SDN_NAME],1))
        )
    ELSE         
        NULL     
    END as FName 
```

# sql - 如何使用 SELECT 和 CASE 设置多个变量

> ID：10643184
> 
> 赞同：0
> 
> 时间：2012-05-17T20:41:05.827
> 
> 标签：sql, database, sql-server-2005, stored-procedures

当传递的参数是这样的某个值时，我试图在我的存储过程中设置变量：

```
ALTER PROCEDURE [dbo].[Procedure1]
(
    @ID int,
    @WatchType varchar(100)
)
AS
    SET NOCOUNT ON
    DECLARE @stock int
    DECLARE @price float
    DECLARE @details varchar(max)

CASE @WatchType
WHEN 'TIMEX' THEN
    (SELECT @stock= Stock, 
    @price= Price, 
    @details= Details, 
    FROM tblWatches WHERE Uid= @ID)
ELSE
END 
```

当我尝试解析它时，我不断收到错误。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:43:12.577

```
ALTER PROCEDURE [dbo].[Procedure1]
(
    @ID int,
    @WatchType varchar(100)
)
AS
    SET NOCOUNT ON
    DECLARE @stock int
    DECLARE @price float
    DECLARE @details varchar(max)

IF @WatchType = 'TIMEX'
BEGIN
    (SELECT @stock= Stock, 
    @price= Price, 
    @details= Details, 
    FROM tblWatches WHERE Uid = @ID)
END 
```

# windows-8 - 如何禁用 Windows 8 (WinRT) 锁定屏幕

> ID：10643187
> 
> 赞同：6
> 
> 时间：2012-05-17T20:41:12.903
> 
> 标签：windows-8, winrt-xaml, windows-store-apps

这就是您在 Windows Phone 上的操作方式 [http://blog.jerrynixon.com/2011/11/mango-sample-lock-and-run.html](http://blog.jerrynixon.com/2011/11/mango-sample-lock-and-run.html)

这不是你在 Windows 8 上的做法。

有没有办法在 Windows 8 应用程序中也能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T18:15:47.590

查看[Windows.System.Display.DisplayRequest](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)类。requestActive方法允许您[在](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.display.displayrequest.requestactive.aspx#Y0)显示变暗和关闭时保持显示处于活动状态。确保在每次调用 requestActive 时调用[requestRelease](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.display.displayrequest.requestrelease.aspx)一次，这样当您不再需要它保持开启时，显示器可以恢复到其功耗意识行为。

# ruby-on-rails - 如何在 rails 3.0.9 中连接 authlogic 和 facebook？

> ID：10643191
> 
> 赞同：0
> 
> 时间：2012-05-17T20:41:34.157
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, rubygems

在我的应用程序中，我在我的商店中使用 authlogic 进行用户登录、购物车购买等。但是我如何使用我的 authlogic gem 来介绍 facebook 登录和商品评论？我对[https://github.com/kalasjocke/authlogic_facebook_connect](https://github.com/kalasjocke/authlogic_facebook_connect)很感兴趣，但我认为它适用于 rails <3 吗？整合facebook首先评论，然后重新注册和登录有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:29:52.537

我认为将 omniauth gem 与 authlogic 结合使用将帮助您完成您想做的事情。看看这个[示例应用程序](https://github.com/tzumby/Authlogic-Omniauth-Rails3)。这个如何合并它的[演练看起来也很彻底。](http://emumair.wordpress.com/2011/03/17/social-network-authentication-with-omniauth-and-authlogic/)

# asp.net - GridView 日期/时间列条件格式

> ID：10643201
> 
> 赞同：1
> 
> 时间：2012-05-17T20:42:25.303
> 
> 标签：asp.net, gridview, formatting

我有一个带有 DateTime 列的 GridView。我的日期可能没有时间部分。`DataFormatString="{0:MM/dd/yyyy hh:mm tt}"`当没有输入时间时，使用将写入 12:00 AM。有没有办法避免这种情况？也就是说，如果日期设置了时间，则显示它，否则只显示日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:17:09.577

如果没有特殊限制，则可以从服务器端将日期时间转换为字符串并返回所需的数据，在网格端只需告诉网格它是一个字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:30:30.857

您不能将条件与格式字符串一起使用；您必须将事件处理程序添加到 GridView 的 ItemDataBound 事件，并自己格式化：

```
void Grid_ItemDataBound(object sender, GridItemEventArgs e)
{
   var date = e.Item[<index>].Text;
   if (date.EndsWith(" 12:00 AM"))
       e.Item[<index>].Text = date.Replace(" 12:00 AM", "");
} 
```

类似的东西。

# playframework - 如何将 twitter 引导表格式与 playframework crud 模块一起使用？

> ID：10643202
> 
> 赞同：1
> 
> 时间：2012-05-17T20:42:25.523
> 
> 标签：playframework, twitter-bootstrap

Twitter bootstrap`<table class="table">`用于表格格式化。

Playframework CRUD`<table>`用于格式化 CRUD 表。

在我的 CRUD\list.html 文件中，我只看到：

```
<div id="crudListTable">
    #{crud.table /}
</div> 
```

无法将属性添加到 table 标记。

如何将此`class="table"`属性应用于 CRUD 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T08:22:03.280

我已经查看了 crud.table 标记的代码，并且该元素是在没有任何控制类的逻辑的情况下呈现的。因此， crud.table 根本不支持这一点。

在我看来，您有两个选择。

1) 用 javascript 附加类

```
    <div id="crudParent">
        #{crud.table /}
    </div>
    <script type="text/javascript">
        $('#crudParent>.table').addClass('table');
    </脚本>

```

2) 创建自己的 crud.table 标签。复制/粘贴原始标签，并在标签内设置表格的类。

# entity-framework-4 - 从 DBSet.SqlQuery 返回更新的结果

> ID：10643204
> 
> 赞同：1
> 
> 时间：2012-05-17T20:42:29.843
> 
> 标签：entity-framework-4

我想使用以下方法在 Person 表中标记人员，以便对其进行处理。这些人必须被标记为“处理中”，这样其他线程就不会在同一行上操作。

在 SQL Management Studio 中，查询按预期工作。当我在我的应用程序中调用该方法时，我会收到该人的行但具有旧状态。

Status 是 Person 的许多导航属性之一，当此查询返回时，它是唯一作为代理对象返回的属性。

```
// This is how I'm calling it (obvious, I know)
var result = PersonLogic.GetPeopleWaitingInLine(100); 

// And Here is my method.
public IList<Person> GetPeopleWaitingInLine(int count)
{
    const string query =
        @"UPDATE top(@count) PERSON
        SET PERSON_STATUS_ID = @inProcessStatusId
        OUTPUT INSERTED.PERSON_ID,
               INSERTED.STATUS_ID
        FROM PERSON
        WHERE PERSON_STATUS_ID = @queuedStatusId";

    var queuedStatusId = StatusLogic.GetStatus("Queued").Id;
    var inProcessStatusId = StatusLogic.GetStatus("In Process").Id;

    return Context.People.SqlQuery(query,
               new SqlParameter("count", count),
               new SqlParameter("queuedStateId", queuedStateId),
               new SqlParameter("inProcessStateId", inProcessStateId)
}

// update | if I refresh the result set then I get the correct results
// but I'm not sure about this solution since it will require 2 DB calls
Context.ObjectContext().Refresh(RefreshMode.StoreWins, results); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-06T12:02:05.430

我知道这是一个老问题，但这可以帮助某人。

看来您正在为查询使用全局**上下文**，EF 旨在保留缓存信息，如果您总是需要新数据，则必须使用新上下文来检索它。像这样：

```
using (var tmpContext = new Contex())
{
    // your query here
} 
```

这会创建上下文并回收它。这意味着没有存储缓存，下次它从数据库而不是缓存中获取新数据。

# html - 使用 CSS 在 HTML 中插入页脚

> ID：10643205
> 
> 赞同：-3
> 
> 时间：2012-05-17T20:42:33.090
> 
> 标签：html, css

我为页脚编写了 CSS 代码：

```
#footer{
position:fixed;
left:0px;
margin-bottom:0px;
vertical-align:bottom;
bottom:0px;
width:100%;
height:25px;
background-color:#4A6181;
overflow:hidden;
} 
```

我在我的 HTML 中调用了样式表：

```
<link rel="stylesheet" href="http://angrysheep.zxq.net/footer.css" type="text/css" /> 
```

但是，我实际上如何将页脚放入我的网页中？我应该使用什么 HTML 代码将其添加到页面中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:44:23.427

如果您要求标记，

```
<div id='footer'></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:44:37.880

在包装内，但最后，添加你的`<div id="footer"></div>`

# ruby-on-rails-3 - Heroku、S3、Paperclip 一个模型上传正常，另一个没有错误

> ID：10643211
> 
> 赞同：3
> 
> 时间：2012-05-17T20:42:54.870
> 
> 标签：ruby-on-rails-3, file-upload, amazon-s3, paperclip

好的，所以我有 2 个上传模型，一个拍卖和一个用户。

我正在使用 Paperclip、Rails 3.2 和 Ruby 1.9.3。该平台是 Heroku Cedar。

以下是凭证详细信息：

```
S3_BUCKET = ENV['S3_BUCKET'] || "..."
S3_ID = ENV['S3_ID'] || "AKIAJXD4ZBGYF24..."
S3_KEY = ENV['S3_KEY'] || "fJ7eNKQtFGf1s..."
S3_UPLOAD_OPTIONS = {
  storage: :s3,
  bucket: S3_BUCKET,
  s3_credentials: {
    access_key_id: S3_ID,
    secret_access_key: S3_KEY
  }
} 
```

拍卖文件上传工作正常。一切都如预期的那样。

用户上传不起作用，并且有零错误，如下所示：

```
2012-05-17T20:39:16+00:00 app[web.1]: 
2012-05-17T20:39:16+00:00 app[web.1]: DalliError: No server available
2012-05-17T20:39:16+00:00 app[web.1]: 
2012-05-17T20:39:16+00:00 app[web.1]: 
2012-05-17T20:39:16+00:00 app[web.1]: Started PUT "/users" for 208.117.193.99 at 2012-05-17 20:39:16 +0000
2012-05-17T20:39:18+00:00 heroku[router]: POST cfac-staging.herokuapp.com/users dyno=web.1 queue=0 wait=0ms service=2006ms status=302 bytes=113
2012-05-17T20:39:18+00:00 app[web.1]: cache: [POST /users] invalidate, pass
2012-05-17T20:39:18+00:00 app[web.1]: 
2012-05-17T20:39:18+00:00 app[web.1]: DalliError: No server available
2012-05-17T20:39:18+00:00 app[web.1]: 
2012-05-17T20:39:18+00:00 app[web.1]: 
2012-05-17T20:39:18+00:00 app[web.1]: Started GET "/auctions/new" for 208.117.193.99 at 2012-05-17 20:39:18 +0000
2012-05-17T20:39:19+00:00 heroku[router]: GET cfac-staging.herokuapp.com/auctions/new dyno=web.1 queue=0 wait=0ms service=1154ms status=304 bytes=0
2012-05-17T20:39:19+00:00 app[web.1]: cache: [GET /auctions/new] miss
2012-05-17T20:39:19+00:00 app[web.1]: DalliError: No server available
2012-05-17T20:39:19+00:00 app[web.1]: cache: [GET /assets/blank-avatar-9a23306b75ac790741fc7e05300183b6.png] miss
2012-05-17T20:39:19+00:00 heroku[router]: GET cfac-staging.herokuapp.com/assets/blank-avatar-9a23306b75ac790741fc7e05300183b6.png dyno=web.1 queue=0 wait=0ms service=3ms status=200 bytes=2212
2012-05-17T20:39:19+00:00 app[web.1]: DalliError: No server available
2012-05-17T20:39:19+00:00 app[web.1]: cache: [GET /assets/get-started-button-f7e9baac88feb2effa461b697df8bcd9.png] miss
2012-05-17T20:39:19+00:00 heroku[router]: GET cfac-staging.herokuapp.com/assets/get-started-button-f7e9baac88feb2effa461b697df8bcd9.png dyno=web.1 queue=0 wait=0ms service=3ms status=200 bytes=2451 
```

我也不知道为什么会发生 DalliError 位，所以...

以下是用户和拍卖模型：

```
class User < ActiveRecord::Base
  has_attached_file :logo, { styles: { medium: "x125", thumb: "x40" } }.merge!(S3_UPLOAD_OPTIONS)
end

class Auction < ActiveRecord::Base
  has_attached_file :image,  { styles: { medium: "122x122#", thumb: "80x80#" }, default_url: ActionController::Base.helpers.image_path('blank-avatar.png') }.merge!(S3_UPLOAD_OPTIONS)
end 
```

# postgresql - PostgreSQL 查询使用索引扫描运行得更快，但引擎选择散列连接

> ID：10643215
> 
> 赞同：21
> 
> 时间：2012-05-17T20:43:10.140
> 
> 标签：postgresql, indexing, query-optimization, postgresql-performance

查询：

```
SELECT "replays_game".*
FROM "replays_game"
INNER JOIN
 "replays_playeringame" ON "replays_game"."id" = "replays_playeringame"."game_id"
WHERE "replays_playeringame"."player_id" = 50027 
```

如果我设置`SET enable_seqscan = off`，那么它会做的很快，即：

```
QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=0.00..27349.80 rows=3395 width=72) (actual time=28.726..65.056 rows=3398 loops=1)
   ->  Index Scan using replays_playeringame_player_id on replays_playeringame  (cost=0.00..8934.43 rows=3395 width=4) (actual time=0.019..2.412 rows=3398 loops=1)
         Index Cond: (player_id = 50027)
   ->  Index Scan using replays_game_pkey on replays_game  (cost=0.00..5.41 rows=1 width=72) (actual time=0.017..0.017 rows=1 loops=3398)
         Index Cond: (id = replays_playeringame.game_id)
 Total runtime: 65.437 ms 
```

但是如果没有可怕的 enable_seqscan，它会选择做一件更慢的事情：

```
QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Hash Join  (cost=7330.18..18145.24 rows=3395 width=72) (actual time=92.380..535.422 rows=3398 loops=1)
   Hash Cond: (replays_playeringame.game_id = replays_game.id)
   ->  Index Scan using replays_playeringame_player_id on replays_playeringame  (cost=0.00..8934.43 rows=3395 width=4) (actual time=0.020..2.899 rows=3398 loops=1)
         Index Cond: (player_id = 50027)
   ->  Hash  (cost=3668.08..3668.08 rows=151208 width=72) (actual time=90.842..90.842 rows=151208 loops=1)
         Buckets: 1024  Batches: 32 (originally 16)  Memory Usage: 1025kB
         ->  Seq Scan on replays_game  (cost=0.00..3668.08 rows=151208 width=72) (actual time=0.020..29.061 rows=151208 loops=1)
 Total runtime: 535.821 ms 
```

以下是相关指标：

```
Index "public.replays_game_pkey"
 Column |  Type   | Definition
--------+---------+------------
 id     | integer | id
primary key, btree, for table "public.replays_game"

Index "public.replays_playeringame_player_id"
  Column   |  Type   | Definition
-----------+---------+------------
 player_id | integer | player_id
btree, for table "public.replays_playeringame" 
```

所以我的问题是，我做错了什么，Postgres 错误地估计了两种加入方式的相对成本？我在成本估算中看到它*认为*散列连接会更快。它对 index-join 成本的估计降低了 500 倍。

我怎样才能给 Postgres 更多的线索？我确实`VACUUM ANALYZE`在运行上述所有内容之前立即运行了。

有趣的是，如果我对游戏数量较少的玩家运行此查询，Postgres 会选择执行索引扫描 + 嵌套循环。因此，关于大量游戏的某些东西会引起这种不受欢迎的行为，即相对估计成本与实际估计成本不一致。

最后，我应该使用 Postgres 吗？我不希望成为数据库调优方面的专家，因此我正在寻找一种数据库，该数据库能够在尽职尽责的开发人员的关注水平下运行得相当好，而不是专门的 DBA。我担心如果我坚持使用 Postgres，我会遇到源源不断的此类问题，这将迫使我成为 Postgres 专家，也许另一个 DB 会更宽容地采用更随意的方法。

* * *

Postgres 专家 (RhodiumToad) 审查了我的完整数据库设置 ( [http://pastebin.com/77QuiQSp](http://pastebin.com/77QuiQSp) ) 并推荐了`set cpu_tuple_cost = 0.1`. 这给了一个戏剧性的加速： http: [//pastebin.com/nTHvSHVd](http://pastebin.com/nTHvSHVd)

或者，切换到 MySQL 也很好地解决了这个问题。我在我的 OS X 机器上默认安装了 MySQL 和 Postgres，MySQL 的速度提高了 2 倍，通过重复执行查询来比较“预热”的查询。在“冷”查询上，即第一次执行给定查询时，MySQL 的速度要快 5 到 150 倍。冷查询的性能对于我的特定应用程序非常重要。

就我而言，最大的问题仍然悬而未决——Postgres 是否需要更多的摆弄和配置才能比 MySQL 运行得更好？例如，考虑到这里评论者提供的建议都没有奏效。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T22:29:39.137

我的猜测是您使用的是 default `random_page_cost = 4`，它太高了，使得索引扫描成本太高。

我尝试使用此脚本重建 2 个表：

```
CREATE TABLE replays_game (
    id integer NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE replays_playeringame (
    player_id integer NOT NULL,
    game_id integer NOT NULL,
    PRIMARY KEY (player_id, game_id),
    CONSTRAINT replays_playeringame_game_fkey
        FOREIGN KEY (game_id) REFERENCES replays_game (id)
);

CREATE INDEX ix_replays_playeringame_game_id
    ON replays_playeringame (game_id);

-- 150k games
INSERT INTO replays_game
SELECT generate_series(1, 150000);

-- ~150k players, ~2 games each
INSERT INTO replays_playeringame
select trunc(random() * 149999 + 1), generate_series(1, 150000);

INSERT INTO replays_playeringame
SELECT *
FROM
    (
        SELECT
            trunc(random() * 149999 + 1) as player_id,
            generate_series(1, 150000) as game_id
    ) AS t
WHERE
    NOT EXISTS (
        SELECT 1
        FROM replays_playeringame
        WHERE
            t.player_id = replays_playeringame.player_id
            AND t.game_id = replays_playeringame.game_id
    )
;

-- the heavy player with 3000 games
INSERT INTO replays_playeringame
select 999999, generate_series(1, 3000); 
```

默认值为 4：

```
game=# set random_page_cost = 4;
SET
game=# explain analyse SELECT "replays_game".*
FROM "replays_game"
INNER JOIN "replays_playeringame" ON "replays_game"."id" = "replays_playeringame"."game_id"
WHERE "replays_playeringame"."player_id" = 999999;
                                                                     QUERY PLAN                                                                      
-----------------------------------------------------------------------------------------------------------------------------------------------------
 Hash Join  (cost=1483.54..4802.54 rows=3000 width=4) (actual time=3.640..110.212 rows=3000 loops=1)
   Hash Cond: (replays_game.id = replays_playeringame.game_id)
   ->  Seq Scan on replays_game  (cost=0.00..2164.00 rows=150000 width=4) (actual time=0.012..34.261 rows=150000 loops=1)
   ->  Hash  (cost=1446.04..1446.04 rows=3000 width=4) (actual time=3.598..3.598 rows=3000 loops=1)
         Buckets: 1024  Batches: 1  Memory Usage: 106kB
         ->  Bitmap Heap Scan on replays_playeringame  (cost=67.54..1446.04 rows=3000 width=4) (actual time=0.586..2.041 rows=3000 loops=1)
               Recheck Cond: (player_id = 999999)
               ->  Bitmap Index Scan on replays_playeringame_pkey  (cost=0.00..66.79 rows=3000 width=0) (actual time=0.560..0.560 rows=3000 loops=1)
                     Index Cond: (player_id = 999999)
 Total runtime: 110.621 ms 
```

将其降低到 2 后：

```
game=# set random_page_cost = 2;
SET
game=# explain analyse SELECT "replays_game".*
FROM "replays_game"
INNER JOIN "replays_playeringame" ON "replays_game"."id" = "replays_playeringame"."game_id"
WHERE "replays_playeringame"."player_id" = 999999;
                                                                  QUERY PLAN                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=45.52..4444.86 rows=3000 width=4) (actual time=0.418..27.741 rows=3000 loops=1)
   ->  Bitmap Heap Scan on replays_playeringame  (cost=45.52..1424.02 rows=3000 width=4) (actual time=0.406..1.502 rows=3000 loops=1)
         Recheck Cond: (player_id = 999999)
         ->  Bitmap Index Scan on replays_playeringame_pkey  (cost=0.00..44.77 rows=3000 width=0) (actual time=0.388..0.388 rows=3000 loops=1)
               Index Cond: (player_id = 999999)
   ->  Index Scan using replays_game_pkey on replays_game  (cost=0.00..0.99 rows=1 width=4) (actual time=0.006..0.006 rows=1 loops=3000)
         Index Cond: (id = replays_playeringame.game_id)
 Total runtime: 28.542 ms
(8 rows) 
```

如果使用 SSD，我会将其进一步降低到 1.1。

至于你的最后一个问题，我真的认为你应该坚持使用 postgresql。我有使用 postgresql 和 mssql 的经验，我需要在后者上付出三倍的努力才能使其性能达到前者的一半。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-18T18:28:33.273

我运行了 sayap 的测试床代码（谢谢！），并进行了以下修改：

*   代码运行四次，random_page_cost 设置为 8,4,2,1；以该顺序。（cpc=8 旨在启动磁盘缓冲区缓存）
*   重复测试，减少 (1/2,1/4,1/8) 部分的强击手（分别为：3K、1K5,750 和 375 强击手；其余记录保持不变。
*   使用 work_mem 的较低设置（最低 64K）重复这些 4*4 测试。

在这次跑步之后，我做了同样的跑步，但扩大了十倍：1M5 记录（30K 硬击球手）

目前，我正在以一百倍的放大率运行相同的测试，但初始化相当慢......

**结果** 单元格中的条目是以毫秒为单位的总时间加上表示所选查询计划的字符串。（只有少数计划发生）

```
Original 3K / 150K  work_mem=16M

rpc     |       3K      |       1K5     |       750     |       375
--------+---------------+---------------+---------------+------------
8*      | 50.8  H.BBi.HS| 44.3  H.BBi.HS| 38.5  H.BBi.HS| 41.0  H.BBi.HS
4       | 43.6  H.BBi.HS| 48.6  H.BBi.HS| 4.34  NBBi    | 1.33  NBBi
2       | 6.92  NBBi    | 3.51  NBBi    | 4.61  NBBi    | 1.24  NBBi
1       | 6.43  NII     | 3.49  NII     | 4.19  NII     | 1.18  NII

Original 3K / 150K work_mem=64K

rpc     |       3K      |       1K5     |       750     |       375
--------+---------------+---------------+---------------+------------
8*      | 74.2  H.BBi.HS| 69.6  NBBi    | 62.4  H.BBi.HS| 66.9  H.BBi.HS
4       | 6.67  NBBi    | 8.53  NBBi    | 1.91  NBBi    | 2.32  NBBi
2       | 6.66  NBBi    | 3.6   NBBi    | 1.77  NBBi    | 0.93  NBBi
1       | 7.81  NII     | 3.26  NII     | 1.67  NII     | 0.86  NII

Scaled 10*: 30K / 1M5  work_mem=16M

rpc     |       30K     |       15K     |       7k5     |       3k75
--------+---------------+---------------+---------------+------------
8*      | 623   H.BBi.HS| 556   H.BBi.HS| 531   H.BBi.HS| 14.9  NBBi
4       | 56.4  M.I.sBBi| 54.3  NBBi    | 27.1  NBBi    | 19.1  NBBi
2       | 71.0  NBBi    | 18.9  NBBi    | 9.7   NBBi    | 9.7   NBBi
1       | 79.0  NII     | 35.7  NII     | 17.7  NII     | 9.3   NII

Scaled 10*: 30K / 1M5  work_mem=64K

rpc     |       30K     |       15K     |       7k5     |       3k75
--------+---------------+---------------+---------------+------------
8*      | 729   H.BBi.HS| 722   H.BBi.HS| 723   H.BBi.HS| 19.6  NBBi
4       | 55.5  M.I.sBBi| 41.5  NBBi    | 19.3  NBBi    | 13.3  NBBi
2       | 70.5  NBBi    | 41.0  NBBi    | 26.3  NBBi    | 10.7  NBBi
1       | 69.7  NII     | 38.5  NII     | 20.0  NII     | 9.0   NII

Scaled 100*: 300K / 15M  work_mem=16M

rpc     |       300k    |       150K    |       75k     |       37k5
--------+---------------+---------------+---------------+---------------
8*      |7314   H.BBi.HS|9422   H.BBi.HS|6175   H.BBi.HS| 122   N.BBi.I
4       | 569   M.I.sBBi| 199   M.I.sBBi| 142   M.I.sBBi| 105   N.BBi.I
2       | 527   M.I.sBBi| 372   N.BBi.I | 198   N.BBi.I | 110   N.BBi.I
1       | 694   NII     | 362   NII     | 190   NII     | 107   NII

Scaled 100*: 300K / 15M  work_mem=64K

rpc     |       300k    |       150k    |       75k     |       37k5
--------+---------------+---------------+---------------+------------
8*      |22800 H.BBi.HS |21920 H.BBi.HS | 20630 N.BBi.I |19669  H.BBi.HS
4       |22095 H.BBi.HS |  284 M.I.msBBi| 205   B.BBi.I |  116  N.BBi.I
2       |  528 M.I.msBBi|  399  N.BBi.I | 211   N.BBi.I |  110  N.BBi.I
1       |  718 NII      |  364  NII     | 200   NII     |  105  NII

[8*] Note: the RandomPageCost=8 runs were only intended as a prerun to prime the disk buffer cache; the results should be ignored.

Legend for node types:
N := Nested loop
M := Merge join
H := Hash (or Hash join)
B := Bitmap heap scan
Bi := Bitmap index scan
S := Seq scan
s := sort
m := materialise 
```

初步结论：

*   原始查询的“工作集”太小：所有这些都适合核心，导致页面获取成本被严重高估。将 RPC 设置为 2（或 1）“解决”了这个问题，但是一旦查询规模扩大，页面成本就占主导地位，而 RPC=4 变得相当甚至更好。

*   将 work_mem 设置为较低的值是使优化器转向索引扫描（而不是哈希+位图扫描）的另一种方法。我发现的差异比 Sayap 报告的要小。也许我有更有效的缓存大小，或者他忘记了缓存？

*   众所周知，优化器存在“偏斜”分布（和“偏斜”或“峰值”多维分布）的问题。初始 3K/150K 硬击的 1/4 和 1/8 的测试运行表明，一旦“峰值“变平。
*   在 2% 的边界上发生了一些事情：3000/150000 产生了不同的（更糟糕的）计划，与那些 <2% 的强硬者相比。这可能是直方图的粒度吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-10T02:34:22.470

这是一篇旧帖子，但对我刚刚遇到类似问题很有帮助。

这是我到目前为止的发现。给定 151208 行`replays_game`，点击一个项目的平均成本约为`log(151208)=12`. 由于过滤后有`3395`记录`replays_playeringame`，平均成本为`12*3395`，相当高。此外，规划器高估了页面成本：它假设所有行都是随机分布的，而事实并非如此。如果这是真的，seq 扫描会好得多。所以基本上，查询计划试图避免最坏的情况。

@dsjoerg 的问题是`replays_playeringame(game_id)`. 如果有索引，将始终使用索引扫描`replays_playeringame(game_id)`：扫描索引的成本将变为`3395+12`（或接近该值）。

@Neil 建议在 上设置索引`(player_id, game_id)`，这很接近但不准确。正确的索引是`(game_id)`or `(game_id, player_id)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T23:02:51.123

`(player_id, game_id)`使用表上的多列索引可能会获得更好的执行计划`replays_playeringame`。这避免了必须使用随机页面搜索来查找玩家 ID 的游戏 ID。

# c# - 未调用 Windows 服务 OnStop()

> ID：10643217
> 
> 赞同：0
> 
> 时间：2012-05-17T20:43:15.663
> 
> 标签：c#, windows, service

我用 C# 编写了一个作为 Windows 服务运行的程序。应用程序启动并运行良好，但是当我使用管理控制台停止服务时，没有调用 OnStop 函数。

OnStart 方法为主程序启动一个后台线程，该后台线程启动另一个线程和一个 ThreadPool 为其工作。

OnStop 我设置了一个布尔标志，所有其他线程都检查它以查看它们是否应该停止处理。然后线程应该全部结束，程序应该结束。

这是我的 OnStart 的代码

```
protected override void OnStart(string[] args)
    {
        base.OnStart(args);
        mainProgram.IsBackground = true;
        mainProgram.Start();
    } 
```

该代码有效。下面是 OnStop 的代码，据我所知，它从未被调用过。

```
protected override void OnStop()
    {

        Log.LogMessage("Caught shutdown signal from the OS", "debug");
        base.OnStop();
        shutdown = true;
        mainProgram.Join(15000);
        if (mainProgram.IsAlive) mainProgram.Abort();
    } 
```

该日志消息永远不会被写入日志文件。

任何帮助，将不胜感激。我什至不知道从哪里开始寻找。谢谢。

**编辑** 我解决了锁定后台线程的问题。我还注释掉了日志语句，所以我知道日志语句不会导致问题。

除了布尔标志之外，我还添加了一个 ManualResetEvent。OnStop 现在看起来像这样：

```
protected override void OnStop()
    {
        System.Diagnostics.Debugger.Break();
        //Log.LogMessage("Caught shutdown signal from the OS", "debug");
        base.OnStop();
        shutdown = true;
        ShutdownX.Set();  //this is the ManualResetEvent
        mainProgram.Join(15000);
        if (mainProgram.IsAlive) mainProgram.Abort();
    } 
```

这应该停止代码的地方是在 mainProgram.RunAgent() 函数（这是它自己的线程）中 while (!shutdown) {

```
 SqlCommand DbCommand = dbConnection.CreateCommand();
                DbCommand.CommandText = "SELECT id, SourceID, CastingSN, Result FROM db_owner.queue";

                SqlDataReader DbReader = null;
                try
                {
                    DbReader = DbCommand.ExecuteReader();

                    while (DbReader.Read() && !shutdown)
                    {

                        long SourceID = DbReader.GetInt64(1);
                        string CastingSN = DbReader.GetString(2);
                        bool Result = DbReader.GetBoolean(3);

                        WaitCallback callback = new WaitCallback(oComm.RunAgent);
                        CommunicatorState commstate = new CommunicatorState(CastingSN, Result, SourceID);
                        ThreadPool.QueueUserWorkItem(callback, commstate);
                        callback = null;
                        commstate = null;

                    }
                    //Console.WriteLine("Finished Queueing Threads");
                }
                catch (SqlException Ex)
                {
                    Log.LogMessage("There was an error with a query run on the FlexNet Database.", "error");
                    Log.LogMessage(">> " + Ex.Message, "error");
                }
                finally
                {
                    if (DbReader != null) DbReader.Dispose();
                    DbCommand.Dispose();
                }
                ManualResetEvent[] handles = new ManualResetEvent[2] { eventX, ShutdownX };
                WaitHandle.WaitAny(handles);

                //eventX.WaitOne(Timeout.Infinite, true);
            } 
```

我*认为*这应该从数据库中读取，将它找到的所有线程排队，然后等待所有线程完成处理（eventX 重置事件）或 ShutdownX 事件。

一旦触发了 ShutdownX 事件，外部循环不应该继续，因为 shutdown bool 为真，然后线程关闭它的 SQL 连接并应该终止。这一切都不会发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:28:11.210

您正在使用`ThreadPool`. [据报道，在线程池中的所有任务完成之前，](http://www.c-sharpcorner.com/Forums/Thread/46043/thread-pool-with-windows-service.aspx)`OnStop`永远不会调用. 另请参阅[此处](https://stackoverflow.com/questions/10644043/stopping-a-multi-threaded-windows-service)和[此处](http://blogs.msdn.com/b/ankur/archive/2005/09/16/469012.aspx)。但是，我倾向于这不是主要原因或唯一原因，因为有些人[似乎成功地使用了它](http://www.eggheadcafe.com/community/csharp/2/10057143/thread-pool--thread-stop.aspx)。

在我看来，您的问题目前说`OnStop`永远不会被调用，但您已经看到它发出的日志消息。所以我假设`OnStop`确实被调用了，但是一些线程没有注意到这一点。

请使用单个全局对象将所有获取或设置的代码包装`shutdown`在一个语句中。`lock`这不是为了原子性或互斥性。这是为了确保多处理器系统上有适当的内存屏障。

# ios - Foursquare 是否提供收费的高级场所 API？

> ID：10643218
> 
> 赞同：0
> 
> 时间：2012-05-17T20:43:15.677
> 
> 标签：ios, api, foursquare

我正在创建一个 GPS 移动约会应用程序，该应用程序利用 iOS 的免费foursquare places API。我的开发人员告诉我，foursquare 提供收费的企业 API。这是真的？如果是这样，是否有人知道有关购买此 API 的任何信息？非常感谢任何信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:32:59.643

没有特殊的或“企业”API，但我们认为我们的标准 API 非常先进！;) 有大量基于我们的 API 构建的成功应用程序，希望它也能满足您的需求。查看[https://developer.foursquare.com/](https://developer.foursquare.com/)了解所有信息。

因此，我们目前提供的所有 API 都是免费的。如果您愿意，您可以在我们的平台政策中找到更多关于此类事情的信息：[https ://foursquare.com/legal/api/platformpolicy](https://foursquare.com/legal/api/platformpolicy)

# java - 如何通过杰克逊传递原始 JSON？

> ID：10643221
> 
> 赞同：14
> 
> 时间：2012-05-17T20:43:24.510
> 
> 标签：java, json, cxf, jax-rs, jackson

我们有一整套在 Apache CXF 和 Jackson 之上运行的 JAX-RS REST 服务。我们使用 JAXB 注释来处理将 POJO 编组为 JSON，效果很好。

但是，我们有一两个地方想要返回原始 JSON 字符串（我们从 Redis 缓存中获取）。

Jackson 总是将字符串用双引号括起来并转义其中的所有双引号，例如

```
@GET @Produces("application/json")
public Response getData() {

    String json = ...get from Redis...
    return Response.ok(json,"application/json").build() 
} 
```

给我们

```
"{\"test\":1}" 
```

代替

```
{"test":1} 
```

我尝试了多种方法，将 RawSerializer(String.class) 添加到对象映射器中，但没有任何效果。唯一有效的是，如果我将媒体类型设置为纯字符串，这绕过了杰克逊，但不好，因为我返回了错误的内容类型

IE

```
return Response.ok(json,"text/plain").build() 
```

有效，但效果不佳（错误的内容类型，这会破坏调用我们的 .Net WCF 应用程序）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T13:26:42.533

终于找到了解决办法。诀窍是扩展 JacksonJsonProvider（我们在 CXF 中使用它来强制它使用 Jackson 而不是 Jettison）并告诉它在处理原始字符串时完全绕过 Jackson：

```
public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType){
    if (String.class.equals(type)) {
        //pass strings as-is, they are most likely cached JSON responses
        return false;
    } else {
        return true;
    }
} 
```

完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T03:57:12.437

在这种情况下，您最好的选择是使用返回类型 of `String`，因为问题不在于杰克逊——他的工作是从对象中生成 JSON，而不是按原样传递字符串——而是使用不调用的 JAX-RS杰克逊。默认的 Jackson 支持的 JSON 提供程序将`String`完全按原样传递值（同上`byte[]`），无需任何处理。

值得一提的是，实际上还有`JsonGenerator.writeRaw()`一种方法，它允许在 中嵌入文字文本`OutputStream`，但 JAX-RS 实现使用`ObjectMapper`，而不是低级抽象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:55:32.057

对象映射器不工作？应该只是：

```
ObjectMapper mapper = new ObjectMapper()
MyObj obj = MyObj();
...set values...
String jsonRes = mapper.writeValueAsString(obj);
return Response.ok(jsonRes, MediaType.APPLICATION_JSON).build(); 
```

# video - ffmpeg 图像到视频序列在 10 后停止

> ID：10643225
> 
> 赞同：1
> 
> 时间：2012-05-17T20:43:51.667
> 
> 标签：video, ffmpeg, image, image-conversion

可能是一个快速的答案，但我第一次尝试这样做。我有 77 张 jpeg 图片，我已将它们重命名为 000.jpg - 076.jpg。下一步是使用 ffmpeg，这是我的命令语句：

```
ffmpeg -f image2 -r .1 -i %d.jpg -r 25 test.avi 
```

它创建一个包含 10 个图像的 avi，每个图像持续 10 秒，为什么只有 10 个？我在 ffmpeg 命令中尝试了 %d.jpg 的其他迭代，但没有成功。

感谢大家的帮助！

-吉姆

这是包含图像的目录列表：

```
ls -l
total 77472
-rwxr-xr-x 1 jim jim 2329065 May 17 16:31 000.jpg
-rwxr-xr-x 1 jim jim  716563 May 17 16:31 001.jpg
-rwxr-xr-x 1 jim jim  716626 May 17 16:31 002.jpg
-rwxr-xr-x 1 jim jim  726686 May 17 16:31 003.jpg
-rwxr-xr-x 1 jim jim  739312 May 17 16:31 004.jpg
-rwxr-xr-x 1 jim jim  720249 May 17 16:31 005.jpg
-rwxr-xr-x 1 jim jim  666757 May 17 16:31 006.jpg
-rwxr-xr-x 1 jim jim  656259 May 17 16:31 007.jpg
-rwxr-xr-x 1 jim jim  664960 May 17 16:31 008.jpg
-rwxr-xr-x 1 jim jim  740801 May 17 16:31 009.jpg
-rwxr-xr-x 1 jim jim  882502 May 17 16:31 010.jpg
-rwxr-xr-x 1 jim jim  631117 May 17 16:31 011.jpg
-rwxr-xr-x 1 jim jim  730331 May 17 16:31 018.jpg
-rwxr-xr-x 1 jim jim  725132 May 17 16:31 019.jpg
-rwxr-xr-x 1 jim jim  729626 May 17 16:31 020.jpg
-rwxr-xr-x 1 jim jim  731980 May 17 16:31 021.jpg
-rwxr-xr-x 1 jim jim  671597 May 17 16:31 022.jpg
-rwxr-xr-x 1 jim jim  681978 May 17 16:31 023.jpg
-rwxr-xr-x 1 jim jim  686600 May 17 16:31 024.jpg
-rwxr-xr-x 1 jim jim  675316 May 17 16:31 025.jpg
-rwxr-xr-x 1 jim jim  681826 May 17 16:31 026.jpg
-rwxr-xr-x 1 jim jim  740998 May 17 16:31 027.jpg
-rwxr-xr-x 1 jim jim  568480 May 17 16:31 028.jpg
-rwxr-xr-x 1 jim jim  747400 May 17 16:31 029.jpg
-rwxr-xr-x 1 jim jim  630995 May 17 16:31 030.jpg
-rwxr-xr-x 1 jim jim  689926 May 17 16:31 031.jpg
-rwxr-xr-x 1 jim jim  685054 May 17 16:31 032.jpg
-rwxr-xr-x 1 jim jim  710620 May 17 16:31 033.jpg
-rwxr-xr-x 1 jim jim  658365 May 17 16:31 034.jpg
-rwxr-xr-x 1 jim jim  657037 May 17 16:31 035.jpg
-rwxr-xr-x 1 jim jim  772135 May 17 16:31 036.jpg
-rwxr-xr-x 1 jim jim  741759 May 17 16:31 037.jpg
-rwxr-xr-x 1 jim jim  807470 May 17 16:31 038.jpg
-rwxr-xr-x 1 jim jim  748423 May 17 16:31 039.jpg
-rwxr-xr-x 1 jim jim  712377 May 17 16:31 040.jpg
-rwxr-xr-x 1 jim jim  715804 May 17 16:31 041.jpg
-rwxr-xr-x 1 jim jim  701025 May 17 16:31 042.jpg
-rwxr-xr-x 1 jim jim  759446 May 17 16:31 043.jpg
-rwxr-xr-x 1 jim jim  621801 May 17 16:31 044.jpg
-rwxr-xr-x 1 jim jim  720843 May 17 16:31 045.jpg
-rwxr-xr-x 1 jim jim  704002 May 17 16:31 046.jpg
-rwxr-xr-x 1 jim jim  696075 May 17 16:31 047.jpg
-rwxr-xr-x 1 jim jim  723685 May 17 16:31 048.jpg
-rwxr-xr-x 1 jim jim  732332 May 17 16:31 049.jpg
-rwxr-xr-x 1 jim jim  747235 May 17 16:31 050.jpg
-rwxr-xr-x 1 jim jim  883655 May 17 16:31 051.jpg
-rwxr-xr-x 1 jim jim 1750723 May 17 16:31 052.jpg
-rwxr-xr-x 1 jim jim 1002588 May 17 16:31 053.jpg
-rwxr-xr-x 1 jim jim  540666 May 17 16:31 054.jpg
-rwxr-xr-x 1 jim jim 1876002 May 17 16:31 055.jpg
-rwxr-xr-x 1 jim jim 1893761 May 17 16:31 056.jpg
-rwxr-xr-x 1 jim jim 1979442 May 17 16:31 057.jpg
-rwxr-xr-x 1 jim jim 1766249 May 17 16:31 058.jpg
-rwxr-xr-x 1 jim jim 2085989 May 17 16:31 059.jpg
-rwxr-xr-x 1 jim jim  883871 May 17 16:31 060.jpg
-rwxr-xr-x 1 jim jim  755714 May 17 16:31 061.jpg
-rwxr-xr-x 1 jim jim  797146 May 17 16:31 062.jpg
-rwxr-xr-x 1 jim jim 2431531 May 17 16:31 065.jpg
-rwxr-xr-x 1 jim jim 2413333 May 17 16:31 066.jpg
-rwxr-xr-x 1 jim jim 2449278 May 17 16:31 067.jpg
-rwxr-xr-x 1 jim jim 2458183 May 17 16:31 068.jpg
-rwxr-xr-x 1 jim jim 2514419 May 17 16:31 069.jpg
-rwxr-xr-x 1 jim jim 2477737 May 17 16:31 070.jpg
-rwxr-xr-x 1 jim jim 2471347 May 17 16:31 071.jpg
-rwxr-xr-x 1 jim jim 2384936 May 17 16:31 072.jpg
-rwxr-xr-x 1 jim jim 2459983 May 17 16:31 073.jpg
-rwxr-xr-x 1 jim jim 2501286 May 17 16:31 074.jpg
-rwxr-xr-x 1 jim jim 2367710 May 17 16:31 075.jpg
-rwxr-xr-x 1 jim jim 2455564 May 17 16:31 076.jpg 
```

FFMPEG 命令和输出：

```
ffmpeg -v verbose -f image2 -r .1 -i %03d.jpg -r 25 test.avi
ffmpeg version 0.8.1-4:0.8.1-0ubuntu1, Copyright (c) 2000-2011 the Libav developers
  built on Mar 22 2012 05:09:06 with gcc 4.6.3
  configuration: --extra-version='4:0.8.1-0ubuntu1' --arch=amd64 --prefix=/usr --libdir=/usr/lib/x86_64-linux-gnu --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-libfreetype --enable-vaapi --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  avutil      configuration: --extra-version='4:0.8.1ubuntu1+medibuntu1' --arch=amd64 --prefix=/usr --libdir=/usr/lib/x86_64-linux-gnu --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-version3 --enable-libfreetype --enable-vaapi --enable-libopenjpeg --enable-libfaac --enable-nonfree --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdirac --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libopencore-amrnb --enable-version3 --enable-libopencore-amrwb --enable-version3 --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  avcodec     configuration: --extra-version='4:0.8.1ubuntu1+medibuntu1' --arch=amd64 --prefix=/usr --libdir=/usr/lib/x86_64-linux-gnu --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-version3 --enable-libfreetype --enable-vaapi --enable-libopenjpeg --enable-libfaac --enable-nonfree --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdirac --enable-libmp3lame --enable-librtmp --enable-libx264 --enable-libxvid --enable-libopencore-amrnb --enable-version3 --enable-libopencore-amrwb --enable-version3 --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  libavutil    51\. 22\. 1 / 51\. 22\. 1
  libavcodec   53\. 35\. 0 / 53\. 35\. 0
  libavformat  53\. 21\. 0 / 53\. 21\. 0
  libavdevice  53\.  2\. 0 / 53\.  2\. 0
  libavfilter   2\. 15\. 0 /  2\. 15\. 0
  libswscale    2\.  1\. 0 /  2\.  1\. 0
  libpostproc  52\.  0\. 0 / 52\.  0\. 0
This program is not developed anymore and is only provided for compatibility. Use avconv instead (see Changelog for the list of incompatible changes).
[image2 @ 0x1bef9c0] max_analyze_duration reached

Seems stream 0 codec frame rate differs from container frame rate: 0.10 (1/10) -> 0.50 (1/2)
Input #0, image2, from '%03d.jpg':
  Duration: 00:02:00.00, start: 0.000000, bitrate: N/A
    Stream #0.0: Video: mjpeg, yuvj440p, 1920x2560, 0.10 fps, 0.50 tbr, 0.10 tbn, 0.10 tbc
File 'test.avi' already exists. Overwrite ? [y/N] y
Incompatible pixel format 'yuvj440p' for codec 'mpeg4', auto-selecting format 'yuv420p'
[buffer @ 0x1bf0100] w:1920 h:2560 pixfmt:yuvj440p
[avsink @ 0x1bf13c0] auto-inserting filter 'auto-inserted scaler 0' between the filter 'src' and the filter 'out'
[scale @ 0x1bf1ae0] w:1920 h:2560 fmt:yuvj440p -> w:1920 h:2560 fmt:yuv420p flags:0x4
Output #0, avi, to 'test.avi':
  Metadata:
    ISFT            : Lavf53.21.0
    Stream #0.0: Video: mpeg4, yuv420p, 1920x2560, q=2-31, 200 kb/s, 25 tbn, 25 tbc
Stream mapping:
  Stream #0.0 -> #0.0
Press ctrl-c to stop encoding
[buffer @ 0x1bf0100] Changing frame properties on the fly is not supported.
    Last message repeated 10 times
frame=    1 fps=  0 q=5.7 Lsize=      97kB time=0.04 bitrate=19823.2kbits/s    
video:91kB audio:0kB global headers:0kB muxing overhead 6.106282% 
```

现在 test.avi 只有 99Kbs 并且不播放任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:30:31.623

在这种情况下，它应该是 %03d，因为你有三个数字。我不确定它是如何运行的，但我认为这不会导致问题。我唯一能想到的是，在您的图像序列中，图像 #11 出现故障（命名错误）。如果图像不是全部按顺序排列，ffmpeg 会在找不到下一个数字时假定顺序已完成。要么通过检查，要么在控制台中运行 ffmpeg 文档中的脚本变体（如果您在 Windows 上，则为 MinGW）以自动重命名它们。

[图像到视频编码](http://ffmpeg.org/faq.html#How-do-I-encode-single-pictures-into-movies_003f)

如果这仍然不能解决它，请发布整个 ffmpeg 控制台输出（在 ffmpeg 命令中传递“-report”，它将与日志一起保存一个文本文件）。

# php - 在php中获取给定一周的星期一和星期日

> ID：10643226
> 
> 赞同：0
> 
> 时间：2012-05-17T20:44:02.813
> 
> 标签：php, date

给定一年中的一周（例如 20 周）

如何检索本周的星期一和星期日？

我需要显示的是一个包含该周日期范围的字符串，例如

```
 from dayX of monthX of 2012 to dayY of monthXY of 2012 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:39:04.137

只是玩了一下 strtotime() 和 date() ...

```
<?php

 $week_number = 20;
 $year = 2012;
 $monday = strtotime($year."W".str_pad($week_number,2,0,STR_PAD_LEFT)."1");
 $sunday = strtotime($year."W".str_pad($week_number,2,0,STR_PAD_LEFT)."7");

 echo "From " . date("l", $monday) . " " . date("j", $monday) . " of " . date("F", $monday) . " of " . $year . " to " . date("l", $sunday) . " " . date("j", $sunday) . " of " . date("F", $sunday) . " of " . $year;

?> 
```

希望这有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:06:19.730

1 月 4 日总是在第一周，所以一旦你知道它是星期几，你就可以找到第一周的星期一和星期日。然后只需为接下来的每个星期添加 7 天。

# php - PHP 使用 HTTP 身份验证从远程 URL 获取 XML

> ID：10643229
> 
> 赞同：4
> 
> 时间：2012-05-17T20:44:10.810
> 
> 标签：php, xml, curl

我有一个提供 xml 输出的 URL。它需要一个用户名和密码，我可以使用以下格式通过浏览器访问：

> [http://用户名：密码@url.com](http://username:password@url.com)

但是，当我尝试通过 php 文件访问它时，我得到了 403 禁止：

```
$url = "http://username:password@url.com";

$xml = @simplexml_load_file($url);
print_r($http_response_header); 
```

我尝试使用 curl 并将用户代理设置为浏览器，但这仍然没有回显数据。

编辑：

我还尝试使用 pear 的 http 请求 2，它也给出了 403 禁止

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T20:55:04.797

你应该尝试这样的事情：

```
$url = "http://username:password@url.com";
$xml = file_get_contents($url);
$data = new SimpleXMLElement($xml); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-06T19:42:43.873

对于具有基本身份验证 URL 的 XML，请尝试此操作

```
$username = 'admin';
$password = 'mypass';
$server = 'myserver.com';

$context = stream_context_create(array(
        'http' => array(
            'header'  => "Authorization: Basic " . base64_encode("$username:$password")
        )
    )
);
$data = file_get_contents("http://$server/", false, $context);
$xml=simplexml_load_string($data);
if ($xml === false) {
    echo "Failed loading XML: ";
    foreach(libxml_get_errors() as $error) {
        echo "<br>", $error->message;
    }
} else {
    print_r($xml);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:53:30.557

格式[——http://username:password@url.com——](http://username:password@url.com)是浏览器理解的约定；但如果您以编程方式发出 HTTP 请求，则需要为基本身份验证设置 HTTP 标头。我不认为 *simplexml_load_file* 支持 HTTP 标头，但您可以尝试使用例如：

```
fopen("http://$username:$password@url.com"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T20:54:16.647

[http://pear.php.net/package/HTTP_Request2](http://pear.php.net/package/HTTP_Request2)允许你做一个

```
$basicAuthRequest = new HTTP_Request2('http://user:password@url.com'); 
```

[这里](https://stackoverflow.com/a/5192086/705198)还有一个使用 curl 设置`CURL_USERPWD`请求的示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-19T13:28:34.937

但它只加载整数。未在 xml 内容中加载字符串。请参阅以下结果集。

```
 [2] => SimpleXMLElement Object
            (
                [id] => 145894
                [name] => SimpleXMLElement Object
                    (
                    )

                [description] => SimpleXMLElement Object
                    (
                    )

                [start_date] => SimpleXMLElement Object
                    (
                    )

                [end_date] => SimpleXMLElement Object
                    (
                    )

                [allow_deep_link] => 1
                [program_id] => 6981
                [program_name] => SimpleXMLElement Object
                    (
                    )

                [category_name] => SimpleXMLElement Object
                    (
                    )

                [code] => SimpleXMLElement Object
                    (
                    )

                [tracking_url] => SimpleXMLElement Object
                    (
                    )

            ) 
```

# jquery - 班级开火两次

> ID：10643231
> 
> 赞同：0
> 
> 时间：2012-05-17T20:44:13.500
> 
> 标签：jquery

您好：我想知道是否可以一次下拉一张以下图片。目前，当单击第一个时，它们都会同时下降。我试过使用 removeClass 但没有任何结果。

该代码出现两次，因为我要显示两个图像。两者最初都是缩略图，然后如果该人感兴趣，他们会单击并出现更大的图像。完成查看后，他们可以单击并删除图像，然后查看图像 2 并有相同的机会。如果他们想看到比缩略图更大的东西，他们会点击它。问题是当单击第一个（或第二个）缩略图时，两个较大的图像会立即展开，然后又会再次收缩。我希望这很清楚，如果需要，我可以尝试进一步澄清。谢谢

```
<div class="JQuery"><!--Begin JQuery-->
<div class="clickMeA"><img src="images/1.jpg" width="124" height="90" /></div>
<div class="picframeA"><img src="images/1LG.jpg"><p>Here is the text</p></div>
  <script src="jquery-1.7.2.min.js"></script>
  <script>
    $(document) .ready(function(){                  
            $(".clickMeA"). click(function() {                                            
            $("img") .fadeIn(1000);
            $(".picframeA") .slideToggle("slow");
        });
    });
    </script>
<div class="clickMeA"><img src="images/2.jpg" width="124" height="90" /></div>
<div class="picframeA"><img src="images/2LG.jpg"><p>Here is the text</p></div>
  <script src="jquery-1.7.2.min.js"></script>
  <script>
    $(document) .ready(function(){                  
            $(".clickMeA"). click(function() {
            $("img") .fadeIn(1000);
            $(".picframeA") .slideToggle("slow");
        });
    });
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:35:36.030

```
$(".clickMeA") 
```

这将获取class 的*所有*元素`clickMeA`。

```
$("img") 
```

这将获取页面上的*所有* `<img>`标签。

您只需要包含您的脚本和 jQuery*一次*。你应该把你的脚本放在你的`<head>`，你需要在每个 div 之后复制和粘贴整个脚本。

该脚本在 DOM 准备好之前不会执行，因此您只需要它一次，它将影响所有匹配的元素。

```
$(document).ready(function(){ // runs after the DOM is ready
    $(".clickMeA").click(function(){ // gets all elements with that class
        // why are you fading in before sliding the div?
        $(this).next(".picframeA").find("img").fadeIn(1000); // target the correct image
        $(this).next(".picframeA").slideToggle("slow"); // target the correct div
    });
}); 
```

演示：http: [//jsfiddle.net/yngEQ/1/](http://jsfiddle.net/yngEQ/1/)

# magento - Magento SOAP API - 无效的 XML 错误（reindex()）

> ID：10643238
> 
> 赞同：0
> 
> 时间：2012-05-17T20:44:27.133
> 
> 标签：magento

我实现了一个重新索引 API 调用。对于类别索引，它按预期工作。对于产品索引（处理大约需要 3 分钟），会启动一个过程，但大约需要 3 分钟。45 秒后，我收到“无效 XML”响应。看起来，执行时间存在问题。我确实将参数 max_execution_time 更改为 600（秒）。我启用了日志记录，但没有出现异常或错误。在索引管理 GUI 中，我看到重新索引过程开始并在返回响应（无效 XML）后 2 分钟成功完成（重新索引总时间约为 3 分钟）。

API 的代码看起来不错，因为我可以更新所有索引，除了产品价格和产品平面数据。

## 任何的想法？

使用的Wireshark：请求：POST /index.php/api/v2_soap/index/ HTTP / 1.1的User-Agent：Mozilla的/ 4.0（兼容; MSIE 6.0; MS Web服务客户端协议2.0.50727.3053）VsDebuggerCausalityData：uIDPo6o2uSDL0oVKpqKJjDrFPsEAAAAAJt2oK8A51UOeAJsKkziyy / q2t81fNIxMnAvF + VaT7jIACQAA内容-类型：文本/xml；charset=utf-8 SOAPAction：“urn:Mage_Api_Model_Server_V2_HandlerAction”主机：XXXXXXXXXXXX（出于安全原因隐藏内容长度：609 预期：100-继续 HTTP/1.1 100 继续

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
  xmlns:tns="urn:Magento" xmlns:types="urn:Magento/encodedTypes" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<tns:iwCoreIndexingReindexById>
  <sessionId xsi:type="xsd:string">835cfa019572c1a893b3799eecbc6903</sessionId>
  <indexId xsi:type="xsd:int">4</indexId>
</tns:iwCoreIndexingReindexById>
</soap:Body>
</soap:Envelope> 
```

响应（39 秒后！） HTTP/1.1 500 内部服务错误日期：2012 年 5 月 18 日星期五 20:50:22 GMT 服务器：Apache X-Powered-By：PHP/5.2.17 内容长度：269 连接：关闭内容-类型：文本/xml；字符集=utf-8

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Body>
  <SOAP-ENV:Fault>
    <faultcode>Sender</faultcode>
    <faultstring>Invalid XML</faultstring>
  </SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

索引状态正在*处理*。因此调用了一个调用并且一个动作也在*进行*中。Api.php 看起来像（执行此代码并且没有记录异常）：

```
public function indexingReindexById( $indexId ){
$process = Mage::getModel('index/process')->load($indexId);
try{
  $process->reindexAll();
} catch(exception $e){
  Mage::Log($e->getMessage());
  return false;
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:25:59.370

更换供应商起到了作用。所以这是一个*服务器问题*。

# xml - scala.xml.Xml 加载自签名 https

> ID：10643243
> 
> 赞同：1
> 
> 时间：2012-05-17T20:44:48.440
> 
> 标签：xml, scala, https

我想从自签名 https 服务器“加载”一个 xml 源。

```
scala.xml.XML.load("https://....") 
```

返回一些异常（“不受信任的证书”等）

我怎样才能解决这个问题？

更糟糕的是，我需要使用用户名和密码进行身份验证......

（这是一个颠覆服务器......）

TIA，塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:20:34.797

最后，谷歌揭晓答案（如果你只提前知道正确的关键字......）

这显示了如何设置身份验证：

[http://wiki.sdn.sap.com/wiki/display/events/ScnTwitterBlog.scala](http://wiki.sdn.sap.com/wiki/display/events/ScnTwitterBlog.scala)

这讨论了自签名证书：

[告诉 java 接受自签名的 ssl 证书](https://stackoverflow.com/questions/2893819/telling-java-to-accept-self-signed-ssl-certificate)

干杯!

# jquery - Datepicker 在关闭 jquery 模式时不会关闭

> ID：10643247
> 
> 赞同：0
> 
> 时间：2012-05-17T20:45:25.757
> 
> 标签：jquery, jquery-ui, datepicker

我在 jquery 模态窗口上有一个日期选择器。当我关闭模式窗口而不关闭日期选择器时，它会在我的首页上保持可见。我试图集中注意力，但它对我没有帮助，还尝试了 mouseleave，但为了使其工作，我需要将鼠标悬停在日期选择器上并移出以隐藏它。

```
$("#datepicker").append(label);
            fromInput.datepicker( {
                showOn: "both",
                minDate: -30,
                maxDate: 0,
                showAnim: "slide",
                buttonImage: "#",
                buttonImageOnly: true,
                onSelect: function(fromDate, inst){
                  oDTSettings.minDate = fromDate;
                  toInput.datepicker("option", "minDate",  oDTSettings.minDate);                    
                }
            } );

            fromInput.datepicker("setDate", minDate);

$('.ui-datepicker').live('mouseleave', function() {
            $('.ui-datepicker').hide()}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:36:19.410

我相信这是一个问题，日期选择器的 z-index 需要大于对话框的 z-index。

尝试添加类似于以下内容的 css：

```
<style type="text/css">
    .ui-datepicker
    {
        z-index: 1001 !important; /* must be > than popup editor (1000) */
    }
</style> 
```

# adobe-indesign - 我可以为 InDesign DOM 的 Text 对象的 appliedCharacterStyle 属性分配多个值吗？

> ID：10643251
> 
> 赞同：3
> 
> 时间：2012-05-17T20:45:31.733
> 
> 标签：adobe-indesign, extendscript

我正在编写一个 ExtendScript 脚本，我们用它来准备 InDesign 文件以导出到 XHTML。基本上，我们只是在需要的地方应用字符样式（看看这个简化的例子）：

```
app.activeDocument.findGrep()[0].appliedCharacterStyle = "customStyle"; 
```

当我们使用 InDesign 的*Export to XHTML*功能将结果导出到 XHTML 时，我们会得到这样的结果：

```
<span class="customStyle">I</span> 
```

这正是我们想要的。现在出现的问题是，有时我们想对单个字符应用多种不同的样式，所以我们最终会这样做：

```
var t = app.activeDocument.findGrep()[0];
t.appliedCharacterStyle = "customStyle1";
t.appliedCharacterStyle = "customStyle2"; 
```

显然，`customStyle2`overrides `customStyle1`，这违背了目的。有没有办法解决？

**注意：**我尝试`applyCharacterStyle`改用，但该方法不将字符串作为参数，只有[CharacterStyle](http://jongware.mit.edu/idcs5.5js_html/idcs5.5js/pc_CharacterStyle.html)对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:28:39.833

“customStyle”只是一个 CSS 类还是已保存样式的名称？我并没有真正使用 inDesign，所以这是推测，但看起来您可以修改 CharacterStyle 对象的各个属性，例如

```
var myStyle = new CharacterStyle();
myStyle.fillColor = "blue";
myStyle.fontStyle = "verdana";
... 
```

或者你应该能够像这样应用它

```
t.applyCharacterStyle(myStyle); 
```

这只是基于我对扩展脚本和 Photoshop 的经验的一个有根据的猜测，抱歉，如果它偏离了基础。

# paypal - PayPal Advanced（PayFlow Link）一个网关，多个域

> ID：10643257
> 
> 赞同：0
> 
> 时间：2012-05-17T20:45:57.800
> 
> 标签：paypal, payflowlink

与 PayPal 技术人员交谈时，他们坚持认为，如果使用“布局 C”和静默邮寄方法，单个 PayPal 高级网关帐户应该能够接受多个域名的付款。

我已经验证我确实可以处理交易......但是，无声帖子（显然）总是发送到 manager.paypal.com 中指定的网址......当然，这不会起作用。

我所能想到的是，由于我同时运行这两个域，他们认为我应该在硬编码的静默帖子 url 中放置一个“转发”脚本，它基本上会查找原始域参数并将帖子重新发送到辅助域。

如果你这样做了……我很想知道你是怎么做到的。

# facebook-apps - Facebook 应用请求已被接受，但不会消失

> ID：10643259
> 
> 赞同：0
> 
> 时间：2012-05-17T20:46:04.433
> 
> 标签：facebook-apps, facebook-app-requests

我创建了一个 Web 应用程序，它集成了邀请我的 Facebook 朋友的功能。请求发送给朋友，朋友接受请求，但在他的 Facebook 主页右侧边栏中，请求不会消失。他的应用程序和游戏页面上的请求也仍然存在。

有什么我应该作为回调发送以删除接受的请求还是 Facebook 会自动执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:23:27.497

是的，您必须删除请求，请参阅此处的文档：

[https://developers.facebook.com/docs/requests/#deleting](https://developers.facebook.com/docs/requests/#deleting) [https://developers.facebook.com/docs/howtos/requests#delete_requests](https://developers.facebook.com/docs/howtos/requests#delete_requests)

# java - 未捕获 Java 异常

> ID：10643261
> 
> 赞同：5
> 
> 时间：2012-05-17T20:46:05.823
> 
> 标签：java, exception

怎么会这样？看起来像白天一样简单，第三方库的异常正在跳过我的 catch 块。不知道从哪里开始解决这个问题。要么我真的很愚蠢，要么我不了解异常和 Java 的一些微妙之处。

我的控制台：

`Exception: org.apache.james.mime4j.io.MaxLineLimitException: Maximum line length limit exceeded; stack: org.apache.james.mime4j.stream.MimeEntity.readRawField(MimeEntity.java:242); org.apache.james.mime4j.stream.MimeEntity.nextField(MimeEntity.java:258); org.apache.james.mime4j.stream.MimeEntity.advance(MimeEntity.java:296); org.apache.james.mime4j.stream.MimeTokenStream.next(MimeTokenStream.java:360); me.unroll.scanner.Scanner.<init>(Scanner.java:206); me.unroll.scanner.ScannerThread.run(ScannerThread.java:205); java.lang.Thread.run(Thread.java:722)`

问题是我的代码如下所示：

```
try {  
//...
 for(EntityState token = messageStream.getState();
    token != EntityState.T_END_OF_STREAM;
    token = messageStream.next()) {  //this is Scanner.java:206
//...
catch(ScanComplete exc) { }
catch(MaxLineLimitException exc) { //line 282, matches "try" above
    debug("Am I getting caught?"); //no, it's not 
```

我更

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T20:57:01.350

您试图捕获错误的异常类型。

for 的签名`MimeTokenStream.next()`说它可以 throw `MimeException`，你没有抓住它。（顺便说一句，如果您想知道为什么没有捕获到异常，您可以尝试捕获`Exception`并记录异常类型以查看实际抛出的内容。）

现在，如果您查看异常实际来源的源代码（第 242 行）`MimeEntity.readRawField`，您将看到：

```
241        } catch (MaxLineLimitException e) {
242            throw new MimeException(e);
243        } 
```

因此，即使控制台消息显示*，* `MaxLineLimitException`该方法引发的实际异常是`MimeException`. `MimeException`尝试在您的代码中捕获而不是`MaxLineLimitException`，但请注意，除了您遇到的原因之外，它`MimeTokenStream.next()`可能会因其他原因而抛出。`MimeException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:57:44.830

“悲惨的变量”可能是对的。另一种选择是您导入了错误的 MaxLineLimitException 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:53:06.827

一种可能性是异常被记录，随后被捕获并且没有被重新抛出。您可以在异常本身上放置一个断点，然后从那里跳出，直到到达您的方法。

# windows-8 - 如何使用 data-win-bind 设置元素的类

> ID：10643262
> 
> 赞同：12
> 
> 时间：2012-05-17T20:46:11.323
> 
> 标签：windows-8, windows-runtime, winjs

我正在尝试动态设置列表视图项模板的类：

```
<div id="semanticZoomTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
    <h1 class="semanticZoomItem-Text" data-win-bind="innerText:title;class:contains"></h1>
</div> 
```

但是当“类”作为属性名存在时，[data-win-bind无法执行任何操作。](http://msdn.microsoft.com/en-us/library/windows/apps/hh440968.aspx)

如果我确实无法使用 data-win-bind 更改类，是否有正确的方法在列表视图中设置特定项目的样式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T06:56:27.350

您需要设置 JavaScript 的类属性，它不叫“ **class** ”，而是“ **className** ”。

# php - 如何改进我的作文模式代码？

> ID：10643265
> 
> 赞同：0
> 
> 时间：2012-05-17T20:46:40.453
> 
> 标签：php, oop

我正在尝试构建一个简单的组合模式示例。基本上输出将是每个部门员工的总智能。我创建了 3 种类型的员工和 2 个部门。请参阅以下代码：

员工类

```
abstract class Employee {

    function addEmployee(Employee $employee){

    }

    function removeEmployee(){

    }

    abstract function showIntelligent();

} 
```

奴才类

```
class Minion extends Employee {

       function showIntelligent(){
          return '100';
    } 

} 
```

经理班

```
class Manager extends Employee {

    function showIntelligent(){
           return '150';
    } 

} 
```

营业部班

```
class SalesDept extends Employee {

     private $_deptEmployee=array();
    function addEmployee(Employee $employee){

        $this->_deptEmployee[]=$employee;

    }

    function removeEmployee(){
        if(!empty($this->_deptEmployee)){
            array_pop($this->_deptEmployee);
        }else{
            echo 'no employees in Sales Department';
        }
    }

    function showIntelligent() {

        $totalInt=0;
        foreach ($this->_deptEmployee as $employee){

            $totalInt += $employee->showIntelligent();
        }
        echo 'Total Intelligent of the Sales Department Employees is: '.$totalInt;
    }

} 
```

设计系班

```
class DesignDept extends Employee {

     private $_deptEmployee=array();
    function addEmployee(Employee $employee){

        $this->_deptEmployee[]=$employee;

    }

    function removeEmployee(){
        if(!empty($this->_deptEmployee)){
            array_pop($this->_deptEmployee);
        }else{
            echo 'no employees in Design Department';
        }
    }

   function showIntelligent() {

        $totalInt=0;
        foreach ($this->_deptEmployee as $employee){

            $totalInt += $employee->showIntelligent();
        }
        echo 'Total Intelligent of the Design Department Employees is: '.$totalInt;
    }

} 
```

我的索引

```
 $salesDpt=new SalesDept();
    $salesDpt->addEmployee(new Manager());
    $salesDpt->addEmployee(new Minion());
    $salesDpt->addEmployee(new Minion());
    $salesDpt->addEmployee(new GeneralManager());

    $salesDpt->showIntelligent();

    $DesignDpt=new DesignDept();
    $DesignDpt->addEmployee(new Manager());
    $DesignDpt->addEmployee(new Manager());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new Minion());
    $DesignDpt->addEmployee(new GeneralManager());

    $DesignDpt->showIntelligent(); 
```

看来我必须使用大量代码来添加新员工。这是一个好习惯吗？无论如何要改进它？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:55:12.723

您可以更改 addEmployee() 方法以采用整数计数参数。

这可以将 7 行代码减少到以下内容：

```
$DesignDpt->addEmployee(new Minion(), 7); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T01:44:56.070

我有很多意见——其中一些已经被提及。

1) 拥有一个带有 Minion 和 Manager 子类的 Employee 类不是一个好主意。这里的问题是 Minions 可以被提升为经理，这不应该要求你扔掉旧对象并用新对象替换它们。相反，为 Employee 设置一个类，其中包含一个包含 MinionRole 或 ManagerRole 的“角色”实例变量。通过这种设计，您可以替换角色而无需替换整个 Employee 对象。事实上，从您到目前为止所描述的内容来看，您根本不需要角色 - 只是智能的一个实例变量。

2) 部门类不应该从 Employee 继承。部门不是员工，不能用作员工的替代品。创建一个名为 Department 的新类。你真的需要子类吗？如果添加会计部门，是否真的需要修改、重新编译、重新打包和重新部署应用程序？

子类化仅在子类具有不同行为时才有用。在您的情况下，子类具有相同的行为或足够接近一个简单的实例变量可以使其工作。不要对继承过于兴奋。继承并不是所有问题的答案，应该谨慎使用。Alan Kay，Smalltalk 编程语言的创造者和创造“面向对象”一词的人从不喜欢继承的概念，只是不情愿地接受它以实现更好的代码共享。

# android - 例程 ListActivity 中的奇怪异常

> ID：10643268
> 
> 赞同：0
> 
> 时间：2012-05-17T20:46:46.970
> 
> 标签：android, android-layout, android-widget, android-listview

我`NullPointerException`在尝试设置我`ListActivity`的项目视图时遇到了问题。完整的堆栈跟踪在这篇文章的底部，但我不确定它有多大帮助。这是导致问题的行：

```
 convertView = mInflater.inflate(R.layout.more_group_list_item, null); 
```

由于异常提供的信息很少，我不知道为什么这条线会生成一个`NullPointerException`我不知道在哪里寻找解决问题的方法。我唯一的猜测是找不到布局项。

这是上下文：

```
class MoreJumpListAdapter extends ArrayAdapter<MoreItem> {

    public MoreJumpListAdapter(final Context context) {
        super(context, 0);
    }

    @Override
    public View getView(final int position, View convertView, final ViewGroup parent) {
        MoreJumpActivity.ViewHolder viewHolder;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.more_group_list_item, null);
            viewHolder = new MoreJumpActivity.ViewHolder(convertView);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (MoreJumpActivity.ViewHolder) convertView.getTag();
        }

        viewHolder.populateViews(getItem(position));

        return convertView;
    }

} 
```

这是布局 xml 文件的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingRight="?android:attr/scrollbarSize"
    android:background="@color/white">
    <ImageView
        android:id="@+id/imageview_displayimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:padding="5dp" />
    <TextView
        android:id="@+id/tv_displayname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:layout_centerVertical="true"
        android:paddingLeft="15dp"
        android:layout_toRightOf="@+id/imageview_displayimage" />
</RelativeLayout> 
```

如果有人在这个堆栈跟踪中看到任何有用的东西，我很想知道它是什么。

```
05-17 20:34:22.224: W/dalvikvm(997): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-17 20:34:22.264: E/AndroidRuntime(997): FATAL EXCEPTION: main
05-17 20:34:22.264: E/AndroidRuntime(997): java.lang.NullPointerException
05-17 20:34:22.264: E/AndroidRuntime(997):  at com.MyApp.MoreJumpActivity$MoreJumpListAdapter.getView(MoreJumpActivity.java:103)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.ListView.makeAndAddView(ListView.java:1745)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.ListView.fillDown(ListView.java:670)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.ListView.fillFromTop(ListView.java:727)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.ListView.layoutChildren(ListView.java:1598)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.AbsListView.onLayout(AbsListView.java:1260)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.View.layout(View.java:7175)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1140)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.os.Looper.loop(Looper.java:123)
05-17 20:34:22.264: E/AndroidRuntime(997):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-17 20:34:22.264: E/AndroidRuntime(997):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 20:34:22.264: E/AndroidRuntime(997):  at java.lang.reflect.Method.invoke(Method.java:507)
05-17 20:34:22.264: E/AndroidRuntime(997):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-17 20:34:22.264: E/AndroidRuntime(997):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-17 20:34:22.264: E/AndroidRuntime(997):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:35:05.033

如果 flow 没有进入`inflate`方法，那么`mInflater`must be `null`，因此抛出。

# html - IE 中的文件上传按钮和奇怪的文本光标行为

> ID：10643270
> 
> 赞同：8
> 
> 时间：2012-05-17T20:46:53.647
> 
> 标签：html, css, internet-explorer, file-upload

我构建了一个上传按钮，其格式看起来像典型的 html 按钮，而不是浏览器标准文件上传表单。该方法是设置锚元素样式并在顶部覆盖透明文件输入元素。

这种方法适用于除 IE 之外的所有浏览器。在 IE 中，当用户单击上传按钮时，会出现一个文本光标，就好像用户单击了文本输入框一样。用户可以通过双击按钮来触发文件上传对话框。但这不是我们想要或任何人所期望的行为。

我不知道为什么会这样。我在这里设置了一个 jsfiddle 来演示这个问题：http: [//jsfiddle.net/davelee/yfSmc/3/](http://jsfiddle.net/davelee/yfSmc/3/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-04-18T12:24:22.533

在 IE11 上遇到这个错误，用 font-size: 0 修复它；

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T20:01:12.097

我刚刚研究了这个确切的问题。使用 IE，是的，按钮左侧有一个小区域用作文本输入（用于手动输入文件名）。我想出的解决方案是增加输入字段的字体大小。奇怪，我知道，但是通过增加字体大小，您增加了他们输入字段的“浏览...”按钮部分，因此增加了可点击区域并推出了他们上传按钮的文本部分。由于按钮无论如何都是透明的，所以没有人更聪明:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:05:42.187

设置文件输入元素的宽度和高度可以解决 ie8 和 ie9 中的问题。

[http://jsfiddle.net/davelee/yfSmc/4/](http://jsfiddle.net/davelee/yfSmc/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-02T13:57:50.873

将外部 div 应用于该输入文件，将其应用于隐藏的流和宽度，然后对输入文件应用一些 css，例如：font-size，margin-left 为负数。

```
<div class="outerWrap">
   <input type="file" id="fileUpload"/>
</div> 
```

CSS将是：

```
.outerWrap {
  width: 200px;
  height: 50px;
  overflow: hidden;
}
#fileUpload {
  width: 210px;
  height: 50px;
  margin-left: -10px;
  font-size: 70px;
} 
```

根据您的要求调整宽度和左边距。

参考得到这个链接： http: [//jsfiddle.net/TrdJ8/](http://jsfiddle.net/TrdJ8/) 并在 IE-9 上试用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T22:30:18.620

尝试添加css

z-index

到你的绝对元素。

最低元素

```
 z-index:1 
```

最高

```
z-index:2; 
```

并在容器元素上设置 z-index。

# .htaccess - 如何 301 将所有页面重定向到新域上的相同页面

> ID：10643271
> 
> 赞同：10
> 
> 时间：2012-05-17T20:46:53.663
> 
> 标签：.htaccess, redirect, http-status-code-301

我正在将我的站点从 old-domain.com 移动到具有完全相同页面的 new-domain.com，例如，如果 old-domain.com 有 page1.html（即 old-domain.com/page1.html）那么新域有相同的页面，即new-domain.com/page1.html

我在 .htaccess 文件中试过这个：

```
RewriteEngine on
RewriteRule (.*) http://new-domain.com/$1 [R=301,L] 
```

但只有当 old-domain.com 将重定向到 new-domain.com 时，old-domain.com/page1.html**才会**重定向到 new-domain.com/page1.html

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T20:51:18.047

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !newdomain.com$ [NC]
RewriteRule ^(.*)$ http://newdomain.com/$1 [L,R=301] 
```

有关更多解决方案，请参见此处：http: [//enarion.net/web/htaccess/migrate-domains/](http://enarion.net/web/htaccess/migrate-domains/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T12:50:56.510

在你的 htaccess 中试试这个

```
Redirect 301 / http://www.new.com/ 
```

[这会将您的所有页面从http://old.com/page1](http://old.com/page1)重定向（并映射）到[http://new.com/page1](http://new.com/page1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-16T11:42:30.273

尝试这个：

```
RedirectPermanent / http://www.new-domain.com/ 
```

# asp.net - HttpRuntime.Cache 不适合网络农场？

> ID：10643272
> 
> 赞同：2
> 
> 时间：2012-05-17T20:46:58.750
> 
> 标签：asp.net, asp.net-mvc, caching, memcached

我听说这`HttpRuntime.Cache`不适合与网络农场一起使用。这是为什么？这个问题有哪些很好的示例解决方法？我听说过[Memcached](http://memcached.org/)和类似的产品，但我找不到任何显示基本用法的最新示例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T21:06:05.283

服务器场中 HttpRuntime.Cache 的一个问题是缓存中的大部分数据将在服务器之间复制。

例如，假设您有一个电子商务网站，并且您将产品目录存储在缓存中（因为它很少更改），这需要 20M 的内存。如果您有 5 台 Web 服务器，则每台服务器的缓存中都有自己的产品目录副本，总共使用 100M 内存（20M * 5 台服务器）。使用像 memcached 这样的共享缓存通过只存储缓存项目的一份副本而不是 5 个副本（每个服务器一份）来消除这种浪费。

另一个问题是缓存同步。同样，假设您在从数据库中检索产品目录后将其缓存 1 小时。每个服务器都可以在其缓存中拥有一份在不同时间到期的目录副本。当一台服务器上的缓存过期时，它可以获得其他服务器尚未更新的数据。

这可能会导致奇怪的用户体验，他们可能会在一个类别中看到 50 个产品，然后刷新页面，被发送到不同的服务器，然后看到 51，再次刷新并再次看到 50，等等。使用共享缓存，您不需要不必担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:58:36.590

[HttpRuntime.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx)对象是[System.Web.Caching.Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)的一个实例。

根据 Cache 对象的 MSDN 文档：

> 每个应用程序域创建一个此类的实例，只要应用程序域保持活动状态，它就保持有效。

在 webfarm 上，您有多台机器处理站点的负载，因此有时您的请求可能会发送到机器 A，有时可能会发送到机器 B，等等。如果您将某些内容粘贴到机器 A 上的缓存中，然后您的下一个请求发送到机器 B，您将无法将其从缓存中取出。这就像 InProc for [Session management](http://msdn.microsoft.com/en-us/library/ms178586)的限制。为了解决这个问题，您可以研究粘性会话。

# php - PHP 中没有截断函数 - 选项？

> ID：10643273
> 
> 赞同：5
> 
> 时间：2012-05-17T20:46:58.870
> 
> 标签：php, decimal, truncate, floor

我有一个执行以下计算的算法：

1.  ( ( 0.50 * 0 ) + 7 ) / 10 = 0.70
2.  ( ( 0.70 * 10 ) + 9 ) / 20 = 0.80
3.  ( ( 0.80 * 20 ) + 7 ) / 30 = 0.7666666667 -> 我希望这个值截断为**0.76**

这样它就可以作为以下形式输入到其余的计算中：

4a。( ( **0.76** * 30 ) + 8 ) / 40 = 0.77

**当四舍五入为0.77**时，**不要**输入小数点后两位：

 **4b。( ( **0.77** * 30 ) + 8 ) / 40 = 0.77

****以下似乎失败了，而是强制向上取整至 0.77：****

PHP sptrinf() 函数：[PHP 舍去小数而不四舍五入](https://stackoverflow.com/questions/9079158/php-dropping-decimals-without-rounding-up)

PHP number_format() 函数：[PHP：显示数字到小数点后 2 位](https://stackoverflow.com/questions/4483540/php-show-a-number-to-2-decimal-places)

PHP floor() 函数：[使用 PHP 截断浮点数](https://stackoverflow.com/questions/4668628/truncate-float-numbers-with-php)

*   还有其他方法吗？
*   是否有可能用 PHP 实现我想要的（截断到小数点后两位）？

请协助。非常感谢。

**更新 -**已解决 好的，感谢 dkamins 和 zneak，它现在可以工作了。我使用了 floor() 方法（我假设我过去没有做正确的事情）。*但是，现在发生了以下情况：*

例如

(0.86 * 30) + 9) / 40 = 0.87（应该），但在 TRUNC 之后它 = 0.86

它如何将 0.87 截断为 0.86？这没有道理。有没有办法让它仅在小数点后 2 位以上时截断？

*解决了：*

```
$numDecPlace = strlen(substr(strrchr($newRel, "."), 1));
echo '<p>Test: Number of decimal places=' .$numDecPlace. '</p>';
if($numDecPlace > 2) {
    $newRel = floor($newRel * 100) / 100; // Truncate to 2dp.
    echo '<p>Test: New relationship truncated is $newRel=' .$newRel. '</p>';
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-01T19:20:21.893

这里给出的所有答案都围绕数字。这个功能对我有用，我也希望对你有用。

```
function truncate($number, $decimals)
{
  $point_index = strrpos($number, '.'); 
  return substr($number, 0, $point_index + $decimals+ 1);
} 
```

`$number`要截断的数字在哪里，并且`$decimals`是您想要的小数位数。 *示例：* `truncate(-38.59540719940386 , 6);`返回 -38.595407

如果需要，请查看[substr](http://php.net/manual/en/function.substr.php/ "子串")的文档！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T20:49:43.180

您可以使用 PHP 的[floor](http://php.net/floor)函数以及一些小数移位，如下所示：

```
floor(0.7666666667 * 100) / 100; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T21:52:11.920

[回合（）](http://php.net/manual/en/function.round.php)怎么样

```
 <?php
  echo round(3.4);         // 3
  echo round(3.5);         // 4
  echo round(3.6);         // 4
  echo round(3.6, 0);      // 4
  echo round(1.95583, 2);  // 1.96
  echo round(1241757, -3); // 1242000
  echo round(5.045, 2);    // 5.05
  echo round(5.055, 2);    // 5.06
  ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-02T23:22:52.440

要为 +ve***和***-ve 数字准确地执行此操作，您需要使用：
- `floor()`+ve 数字
的 php`ceil()`函数 - -ve 数字的 php 函数

```
function truncate_float($number, $decimals) {
    $power = pow(10, $decimals); 
    if($number > 0){
        return floor($number * $power) / $power; 
    } else {
        return ceil($number * $power) / $power; 
    }
} 
```

这样做的原因是`floor()`总是将数字***向下***舍入，而不是向零舍入。
即`floor()`有效地将 -ve 数字*向更大的绝对值*
四舍五入， 例如`floor(1.5) = 1`，而`floor(-1.5) = 2`

因此，对于使用 truncate 方法`multiply by power, round, then divide by power`：
-`floor()`仅适用于正数
-`ceil()`仅适用于负数

要对此进行测试，请将以下代码复制到[http://phpfiddle.org/lite](http://phpfiddle.org/lite)（或类似）的编辑器中：

```
<div>Php Truncate Function</div>
<br>
<?php
    function truncate_float($number, $places) {
        $power = pow(10, $places); 
        if($number > 0){
            return floor($number * $power) / $power; 
        } else {
            return ceil($number * $power) / $power; 
        }
    }

    // demo
    $lat = 52.4884;
    $lng = -1.88651;
    $lat_tr = truncate_float($lat, 3);
    $lng_tr = truncate_float($lng, 3);
    echo 'lat = ' . $lat . '<br>';
    echo 'lat truncated = ' . $lat_tr . '<br>';
    echo 'lat = ' . $lng . '<br>';
    echo 'lat truncated = ' . $lng_tr . '<br><br>';

    // demo of floor() on negatives
    echo 'floor (1.5) = ' . floor(1.5) . '<br>';
    echo 'floor (-1.5) = ' . floor(-1.5) . '<br>';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-13T03:44:33.800

我曾经使用过 Kartikey 提到的 round() 函数。[您可以在PHP.Net](http://php.net/manual/en/function.round.php)上找到更多信息

```
float round ( float $val [, int $precision = 0 [, int $mode = PHP_ROUND_HALF_UP ]] ) 
```

鱼**

# c# - 正则表达式返回所有字符

> ID：10643275
> 
> 赞同：-2
> 
> 时间：2012-05-17T20:47:15.937
> 
> 标签：c#, regex

我使用 (.) 来匹配所有字符，但它返回太多匹配项。我如何使它只有1匹配？

```
 private MatchCollection RegexMatchingV2(string data, string regex)
    {
        MatchCollection col = null;
        try
        {
            col = Regex.Matches(data, regex, RegexOptions.IgnoreCase);
        }
        catch (Exception ex)
        {
            Response.Write("RegexMatching ERROR:" + ex.Message);
        }
        return col;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
       MatchCollection col= RegexMatchingV2("return all of this data in 1 match", "(.)");
       Response.Write(col.Count);//Too much matches
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T20:48:34.103

要使其成为单场比赛，请使用`(.*)`

single`.`匹配单个字符。附加的`*`意思是“零或更多”。

**编辑**响应关于两个匹配的评论（第一个匹配包含字符串，第二个是空匹配）：[匹配文档](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches)表明它对空匹配进行了特殊处理。该页面上有一个很好的示例来显示该行为。但最终的结果是，比赛结束后，它没有向前移动，所以它拿起了一个空匹配。为防止这种情况，您可以使用行首和行尾锚点： `(^.*$)`或使用`+`强制包含至少一个字符： `(.+)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:49:15.837

由于您要匹配任意数量的任意字符，请将 更改`.`为`.*`匹配零个或多个，或者`.+`匹配一个或多个。

# cakephp - CakePHP 2.1 - 测试一个简单的 admin_add() 控制器动作

> ID：10643277
> 
> 赞同：1
> 
> 时间：2012-05-17T20:47:23.787
> 
> 标签：cakephp, phpunit, cakephp-2.1

单元测试新手...测试文章控制器，但我遇到了失败`$this->assertNotEmpty();`

这不应该显示一个充满验证错误的数组吗？相反，我得到一个空数组。

似乎我的验证规则没有被采纳......因为进一步的检查表明 Article::save() 在应该失败的数据上返回 true......

```
/**
     * Admin Add
     * @see controllers/MastersController::_admin_add()
     * @return void
     */
    public function admin_add(){
        //parent::_admin_add();
            if(!empty($this->request->data){
            $this->Article->save($this->request->data);
            }
    }

/**
     * Test Admin Add
     *
     * @return void
     */
    public function testAdminAdd() {
        #define sample passing data     
        $sampleDataPass = array(
            'Article'=>array(
                'title'=>'Test Article Add Will Pass',
                'body'=>'Test Article Add Body',
                'status_id'=>1,
                'category_id'=>1,
            )
        );

        #test action        
        $this->testAction('admin/articles/add', array('data'=>$sampleDataPass));
        $this->assertEmpty($this->Articles->Article->validationErrors); #####PASSES#####

        #define sample failing data     
        $sampleDataFail = array(
            'Article'=>array(
                'title'=>'Test Article Add Will Fail',
            )
        );

        $this->testAction('admin/articles/add', array('data'=>$sampleDataFail));
        $this->assertNotEmpty($this->Articles->Article->validationErrors); #####FAILS#####  
    }

class Article extends AppModel {

    /*
     * Name
     */
    public $name = 'Article';

    /*
     * Validation Rules
     */
    public $validate = array(
        'title' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'You must supply an article title in order to save.',
            ),
        ),
        'body' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                'message' => 'You must supply an article title in order to save.',
            ),
        ),
        'status_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                'message' => 'You must choose a status.',
                'allowEmpty' => false,
            ),
        ),
        'category_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
                'message' => 'You must choose a category.',
                'allowEmpty' => false,
            ),
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:14:02.700

如果数据中不存在该字段，CakePHP 将忽略验证规则。

通过将选项“必需”设置为 true，将始终检查验证规则。

例如：

```
 'title' => array(
        'notempty' => array(
            'rule' => array('notempty'),
            'message' => 'You must supply an article title in order to save.',
            'required' => true
        ),
    ), 
```

关于 CakePHP 验证的文档可以在这里找到：http: [//book.cakephp.org/2.0/en/models/data-validation.html#one-rule-per-field](http://book.cakephp.org/2.0/en/models/data-validation.html#one-rule-per-field)

# iphone - 带有自动引用计数的 iOS 项目中的 RestKit

> ID：10643282
> 
> 赞同：0
> 
> 时间：2012-05-17T20:48:21.057
> 
> 标签：iphone, ios, reference, restkit, autorelease

我是 iOS 新手，正在尝试使用 RestKit。

在处理使用 autoRelease 的单例实例化期间，我遇到了“sigabrt”异常。

我注意到 RestKit 使用了启用自动引用计数 (ARC) 的 iOS 项目中不允许使用的内存管理关键字，这可能是个问题吗？

有人遇到过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T19:54:06.907

好的 - 发现问题：'-ObjC -all_load' 键似乎消失了，我完全按照 RestKit 的安装说明进行操作，但这似乎以某种方式滑倒了 - jshin 感谢您让我再次查看安装帮助 :)

来自 .NET 世界，我不得不说 XCode/ObjectiveC 相比之下感觉非常过时，只是添加一个库是一个 10 页的手册，更不用说没有任何意义的异常或提供任何有用的信息 - 但话又说回来了来自 iOS 新手 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T20:56:32.723

您可以按照以下步骤轻松地将库添加到使用自动引用计数 (ARC) 的项目中。

1.  将 Rest 工具包文件添加到您的项目中。
2.  转到您的项目设置，选择您的应用程序的目标，然后单击“构建阶段”选项卡。
3.  展开名为“编译源”的部分。
4.  从 RestKit 库中选择所有文件
5.  按 Enter 一次编辑所有文件，并在浮动文本框中添加 -fno-objc-arc 编译器标志。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T20:50:47.093

我很惊讶您能够使用这些关键字编译项目。

对于所有 RestKit 文件，您将需要`-fno-objc-arc`在 Build Settings 的 Compile Sources 部分中使用链接器标志，或者将其作为不使用 ARC 的项目包含在内（一种更好的方法）。

有关此方面的帮助，请参阅 RestKit 安装文档：[https](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x) ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x 。安装为 git 子模块是我的方式。

# eclipse - 无法使用 SubEclipse 将项目签入到 SVN

> ID：10643287
> 
> 赞同：0
> 
> 时间：2012-05-17T20:48:34.503
> 
> 标签：eclipse, svn, plugins

我起诉 Mac 10.7.3、Eclipse Indigo、SubEclipse 1.8、SVN 1.7 和 Java HL 接口。我创建了一个SVN仓库，想签入一个之前没有签入的项目。当我右键单击我的项目时，选择“团队”，“共享项目”，然后按照提示进行操作。我从来没有被要求提供凭据来访问存储库，然后项目创建就终止了......

```
mkdir --parents -m "Initial import." [https://svn.myconewmedia.org/svn/repo/csf/trunk/correlations]
    URL access forbidden for unknown reason
svn: Access to '/svn/repo/!svn/act/19defd24-393a-4997-bc9e-3c624425a1d4' forbidden 
```

虽然我在设置 repo 时输入了用户名和密码，但我认为这些信息没有被缓存。有谁知道我如何使用 Eclipse 签入我的项目？

谢谢， - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:25:25.410

设置存储库（使用`svnadmin create`）和创建工作目录（通过 Subversion 的命令行客户端`svn co`或通过 Ecilpse 内置的 Subversion 客户端执行）之间存在区别。

你说你给了它一个用户*名和密码我在设置 repo 时输入了用户名和密码*。你是什​​么意思？

您可以使用 Subversion 命令行从存储库中签出吗？如果是这样，问题出在 Eclipse 和 Subversion 客户端上。过去我遇到过 Java HL 的问题，因为它需要 Subversion C API。相反，我使用[SVNKit](http://svnkit.com/)，它是一个纯 Java 解决方案，不需要 Subversion C API。如果您使用的是 Mac，这一点尤其有用，因为 Apple 不提供 Subversion API 库。有关详细信息，请参阅[ColabNet JavaHL 页面](http://bit.ly/JOIeIf)。

我还建议您查看[CollabNet 桌面版](http://desktop-eclipse.open.collab.net/)。它拥有您需要的一切，并且具有比标准 Eclipse 合并客户端更好的合并客户端。

* * *

# 回复

> 我可以从命令行很好地结帐，所以是的，我相信问题出在 Eclipse 上。我在 Eclipse 中安装了 SVNKit，但如何在 Eclipse 中“使用”它？当我打开 Preferences -> SVN 对话框时，没有“SVNKit”复选框，只有一个“JavaHL：自动跨多个项目提交”复选框，已选中。

好的，我在我的 Mac 上下载了 Eclipse，然后在*Help->Install New Software...*下安装了 CollabNet 桌面（http://downloads.open.collab.net/eclipse/update-site/e3.5）， Subclipse ( [http://subclipse.tigris.org/update_1.8.x](http://subclipse.tigris.org/update_1.8.x) ) 和 SVNKit (http://eclipse.svnkit.com/1.7.x)。

然后我重新启动 Eclipse，然后转到 Eclipse- *>Preferences...*。从那里，我选择了*Team*，并在*Team*下选择了*SVN*。在屏幕下方，有一个*SVN 接口*条目。在*客户端*字段中，我选择了*SVNKit (Pure Java)*。

然后我右键单击并说*New-> Project*并选择SVN。我创建了一个新的存储库，并且能够从该存储库中签出。

你能遵守这些指示吗？有什么不同吗？您看到*SVN 接口*首选项了吗？您必须将其从 JavaHL 更改为 SVNKit。

# stream - 为什么数据流在 httpwebrequest 上冻结

> ID：10643294
> 
> 赞同：0
> 
> 时间：2012-05-17T20:49:02.603
> 
> 标签：stream, httpwebresponse

我正在从 api 读取连续的数据流，有时程序会在下一行冻结并最终超时。

```
Private BUFFER_SIZE As Integer = 8100
...
Dim bufferread(81000) As Byte
numbytesread = responseStream.Read(bufferread, 0, BUFFER_SIZE) 
```

我可以减少我猜想的缓冲区大小，也可以更频繁地写入我的文件，但我还想确保创建好的文件，其中数据没有被剪断，并且我到达一个指示帖子结束的分隔符。关于为什么会冻结的任何想法。

# php - 通过重定向传递 Onload 事件

> ID：10643295
> 
> 赞同：1
> 
> 时间：2012-05-17T20:49:06.953
> 
> 标签：php

我想知道是否可以通过重定向调用脚本。我有一个使用 PHP 邮件的联系表单，该表单将重定向回主页，如下所示；

```
...
header("Location: ../index.php");
... 
```

是否可以添加一个传递到重定向页面的 onload 事件？因此，当从重定向加载“index.php”时，它会调用弹出窗口谢谢或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:57:58.480

如果您像这样将它们发送到下一页，您可以在 url 末尾附加一些指令，或者您可以将它们存储在会话变量中并在下一页加载时检查 - 甚至两者的组合.

```
session_start();

$_SESSION["redirect_url"] = "options.html";

header("Location: ../index.php?redirected=1"); 
```

并在新的登陆页面上执行某种类型的检查：

```
session_start();

if ( $_GET["redirected"] && $_SESSION["redirect_url"] ) {
  echo "<script>
          window.onload = function(){
            var myWin = window.open( '" . $_SESSION["redirect_url"] . "' );
          };
        </script>";
} 
```

# jquery - 如何重新计算正确的位置

> ID：10643303
> 
> 赞同：-1
> 
> 时间：2012-05-17T20:49:52.023
> 
> 标签：jquery

我想我在这里被误解了，所以我会改写我的问题。
问题：当我**“悬停”在菜单上时，带有****“问题”**类的黑色跨度跟随我的鼠标，但它弄乱了它的位置，因为我不知道正确计算它:(
***尝试将鼠标悬停在我的菜单上以查看问题.*** 已经尝试了两天来解决这个问题，但没有成功......

[在这里提琴](http://jsfiddle.net/w3DrE/)

这是我网站的[链接](http://www.snagomuma.com/newlife/)。

有什么帮助或建议吗？

```
$(document).ready(function(){
    $('.menu ul li').hover(function(){
        var index=$(this).index();
        var width=$(this).outerWidth();        
        $('.problem').stop().animate({'marginLeft':135*index+195,'width':width},1000);     
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:51:51.167

将菜单 div 的 CSS 设置为：

```
width://insert wanted width here
margin:auto; 
```

使用固定宽度和自动边距，CSS 将使您的 div 居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:54:31.917

我将首先更新`.menu`样式：

```
float: none;
width: 715px;
height: 30px;
display: block;
position: relative;
margin: 9px auto; 
```

然后，您需要将活动元素移到它后面，您可以通过应用负数来完成`top-margin`

# json - 从 bandintown API 解析 json

> ID：10643306
> 
> 赞同：1
> 
> 时间：2012-05-17T20:50:14.197
> 
> 标签：json, api, titanium-mobile, appcelerator-mobile

我无法在我的 appcelerator 移动应用程序中解析和显示来自 Bands in Town API 的事件。(iOS) 这是我想在表格中显示的乐队活动。 [http://api.bandsintown.com/artists/Lucy%20Seven/events.json?api_version=2.0&app_id=LucySeven](http://api.bandsintown.com/artists/Lucy%20Seven/events.json?api_version=2.0&app_id=LucySeven) 这是我展示它的代码

```
var win = Ti.UI.currentWindow;

win.hideNavBar();

Ti.UI.backgroundColor = '#050505';

var url = "http://api.bandsintown.com/artists/Lucy%20Seven/events.json?      api_version=2.0&app_id=LucySeven"

var table = Ti.UI.createTableView({

        backgroundColor: '#050505',
        separatorColor:'#110000',
    });
var tableData = [];
var json, artists, name, picture, title, description;

var xhr = Ti.Network.createHTTPClient({
onload: function() {
// Ti.API.debug(this.responseText);

json = JSON.parse(this.responseText);
for (i = 0; i < json.data.length; i++) {
    data = json.data[i];
    row = Ti.UI.createTableViewRow({
        height:'100dp',
        backgroundColor: '#050505',
        separatorColor:'#110000',
    });
  var  name = Ti.UI.createLabel({
        text: title,
        font:{
            fontSize:'17dp',
        fontWeight:'bold'
    },
    height:'auto',
    left:'90dp',
    top:'20dp',
    color:'#eee',
    touchEnabled:true
    });
    row.add(name);

        var  start = Ti.UI.createLabel({
        text:   description,
        font:{
            fontSize:'12dp'
        },
    height:'auto',
    left:'90dp',
    bottom:'20dp',
    color:'#eee',
    touchEnabled:true
    });
    row.add(start);

  // Avatar
            var img = Ti.UI.createImageView({
                image   : thumb_url ,
                width   : 70,
                height  : 70,
                top     : 5,
                bottom  : 5,
                borderRadius: 5,
                borderColor: '#eee',
                left    : 5
            });
            row.add(img);

    tableData.push(row);
    }

table.setData(tableData);
},
onerror: function(e) {
Ti.API.debug("STATUS: " + this.status);
Ti.API.debug("TEXT:   " + this.responseText);
Ti.API.debug("ERROR:  " + e.error);
alert('There was an error retrieving the remote data. Try again.');
},
timeout:5000
});

xhr.open("GET", url);
xhr.send(); 
```

这里有一个 json 的 API 响应： [http](http://www.bandsintown.com/api/responses#events-json) ://www.bandsintown.com/api/responses#events-json 我真的看不出有什么问题......也许我看不到我错过了什么？如果有人能指出我正确的方向，我将不胜感激。我尝试过：data.title data.artists.title 标题艺术家.titel 等等，但我的 tableview 中没有显示任何内容.....谢谢 //R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:07:06.953

after的价值`this.responseText`和价值是什么？在 JSON 响应中，我没有看到属性，所以我不确定应该是什么。同样在你给予但从未被给予价值。`json``JSON.parse``data``json.data``Ti.UI.createLabel``test: title``title`

我怀疑您在`for`循环中真正想要的是：

```
json = JSON.parse( this.responseText ); // `json` will be an array of objects

for (i = 0; i < json.length; i++) {
  data = json[ i ];
  // ...

  var name = Ti.UI.createLabel( {
    text: data.title,
    // ...
  } );
} 
```

调试它的关键与调试许多东西一样——找出你在每一步都有什么数据（我从未使用过 Titanium，但它`console.log`至少必须有类似的东西）并弄清楚它与你的期望有何不同.

# c# - 如何使用 CSharp SQLite 加速 SQL 查询？

> ID：10643309
> 
> 赞同：2
> 
> 时间：2012-05-17T20:50:38.567
> 
> 标签：c#, performance, sqlite

**背景：**
我有一个 SQLite3 数据库，我正在使用[CSharp SQLite](http://code.google.com/p/csharp-sqlite/)来查询数据。我的问题是任何带有 JOIN 或 ORDER BY 调用的查询都非常慢（使用 0.1 秒`CSharp-SQLite`vs 使用 orig. 0.003 秒`SQLite`）。

CSharp SQLite的最新[基准](http://code.google.com/p/csharp-sqlite/wiki/Benchmarks)表明它最多慢 2 倍，这很好，但我得到的时间慢了 30 倍。

现在，我已经为我的数据库中的所有必要字段编制了索引，并拥有了适当的主键和外键。另外，原始 SQLite 可以很好地运行这些查询。

**问题：**
我必须使用 SQLite 的托管代码端口，所以这里有什么我遗漏的东西或者我需要拨打的电话`CSharp SQLite`吗？那里有替代的 SQLite 库端口吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T18:45:35.863

[在Csharp-sqlite 论坛](https://groups.google.com/forum/?hl=en-GB&fromgroups#!topic/csharp-sqlite/f8v7yTLPlMk)中提出了这个精确的问题，成功的解决方案是在编译时删除 SQLITE_ENABLE_OVERSIZE_CELL_CHECK 标志。这是一个 DEBUG 标志，会导致不需要但密集的计算。

# settings - moodle 2.2 更改最大主题数

> ID：10643310
> 
> 赞同：0
> 
> 时间：2012-05-17T20:50:42.147
> 
> 标签：settings, edit, max, moodle

Moodle 中的最大周数/主题数为 52。我尝试实施的课程有 100 个主题，所以我想增加最大数量以便能够在下拉列表中选择“100”（现在它只去了最多 52 个）。

我一直在查看 moodle 文件，发现了一些似乎将数量设置为 52 的语句：

*   在 admin/settings/courses.php 中：

    $temp->add(new admin_setting_configtext('moodlecourse/maxsections', get_string('maxnumberweeks'), get_string('maxnumberweeks_desc'), 52));

*   在 lib/adminlib.php 中：

    ```
    class admin_settings_num_course_sections extends admin_setting_configselect {
    public function __construct($name, $visiblename, $description, $defaultsetting) {
        parent::__construct($name, $visiblename, $description, $defaultsetting, array());
    }

    /** Lazy-load the available choices for the select box */
    public function load_choices() {
        $max = get_config('moodlecourse', 'maxsections');
        if (empty($max)) {
            $max = 52;
        }
        for ($i = 0; $i <= $max; $i++) {
            $this->choices[$i] = "$i";
        }
        return true;
    }
    } 
    ```

我尝试将那些“52”设置为“100”，但没有任何变化，当我进入编辑课程页面时，下拉列表仍然只从 1 变为 52。

我确信必须有一种方法可以做到这一点。我在moodle 1.9中找到了一种方法（编辑edit_form.php文件中的“52”值），但现在moodle 2.2中的文件不同

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-03-29T03:12:46.697

现在您可以更改以下设置：

`path => site administration > course > course default setting`

然后您可以将最大部分数更改为 100 或您想要添加的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:11:29.323

此配置存储在表**mdl_config_plugins**的数据库中。

参数的名称是**maxsections**，您可以使用以下 SQL 获取它：

```
SELECT * FROM `mdl_config_plugins` m WHERE m.`name` like "maxsections"; 
```

您可以使用以下 SQL 语句直接在数据库中更改此值：

```
UPDATE `mdl_config_plugins` SET value="100" WHERE `name` LIKE "maxsections"; 
```

话虽如此，我强烈敦促您重新考虑结构，因为课程内容太多而无法使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:58:10.477

我不是 Moodle 的专家，但是这个设置存储在数据库中。您是否尝试在生成的表中进行搜索？

# outlook - 发送到 Outlook 组的 Lotus Notes 电子邮件

> ID：10643313
> 
> 赞同：0
> 
> 时间：2012-05-17T20:51:06.890
> 
> 标签：outlook, lotus-notes, exchange-server

我正在尝试从 Lotus Notes 应用程序向 Lotus Notes 组发送电子邮件，但电子邮件被发送到同名的 Outlook 组。有没有什么方法可以将邮件发送到 LN 组而不是交换组。

此处 LN 不再用于邮寄。它是由交易所完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:22:37.303

是的，这是可能的。对您的设置进行一些假设，这听起来像是我们的一位客户。Domino 用于应用程序，但用于交换电子邮件，domino 通过交换路由邮件。域类似于 xyz.com，然后向“MyGroup”发送邮件将转到 MyGroup.xyz.com 并通过交换。要仅发送到 domino，您需要使用在“转换”选项卡上的服务器配置中的“消息传递\域”部分下配置的本地主 Internet 域。在我们的例子中，它是 domino.xyz.com，因此向 mygroup@domino.xyz.com 发送邮件将转到 domino 而不会路由到交换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T08:26:10.347

仅将 Notes 组的类型设置为“访问控制列表”，这样它就不会被视为可邮寄的名称。

# html - HTML 表单文件设置值

> ID：10643316
> 
> 赞同：-1
> 
> 时间：2012-05-17T20:51:25.173
> 
> 标签：html, forms, file

如果我执行以下操作，浏览文本框仍然看不到 C:/hello world/test.txt。

```
<input type="file" name="fileName" value="C:/hello world/test.txt" size=80> 
```

有任何想法吗？和解决这个问题的方法？谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:55:09.057

您不能为文件字段设置默认值，我认为这是一项安全功能

# ruby-on-rails - 使用 [1..n] 从 Ruby 字符串中删除第一个字符

> ID：10643324
> 
> 赞同：3
> 
> 时间：2012-05-17T20:51:57.443
> 
> 标签：ruby-on-rails, ruby

我试图基本上试图删除`.`字符串中的`.extension`

所以我正在使用

```
'.extension'[1..10] #gives extension 
```

当然，这适用于 10 个字符，我如何让它适用于任何长度。我不知道要搜索什么，因为我不知道这种数组样式`[x..y]`叫什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T20:53:18.357

您可以使用负索引。这将从最后抵消它们。-1 是最后一个元素，-2 是倒数第二个，依此类推。

```
'.extension'[1..-1] # => extension 
```

# sql - 生成主键而不创建记录

> ID：10643326
> 
> 赞同：1
> 
> 时间：2012-05-17T20:52:08.950
> 
> 标签：sql, ruby-on-rails, ruby, sequel

我希望能够做类似的事情

```
@foo = MyClass.new
5.times do
  @foo.things.build
end 
```

但是我的***@foo***需要有一个主键才能工作，所以在不创建对象的情况下生成主键的最佳方法是什么？

这样做的目的是能够更轻松地使用嵌套表单

```
form_builder.fields_for :things do ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T23:18:35.140

我相信 OP 正在询问如何**初始化**视图操作属性以用于标准 Rails 资源的**新操作。**此时，主父级没有 ID。解决方案很简单：

该模型：

```
class ParentObject < ActiveRecord::Base
    # the child model in this example is called child_objects
    has_many :child_objects, :dependent => :destroy 
    accepts_nested_attributes_for :child_objects 
```

new 的控制器操作：

```
@object = Object.new :example_field => "my field"
@object.child_objects.build :name => "value_1" # pretending that name is a field
@object.child_objects.build :name => "value_2" 
```

然后，在视图中：

```
= form_for(@object) do |f| # top level Object
    = f.label :example_field
    = f.text_field :example_field

    =# the next line loops twice in this example
    = f.fields_for :child_objects do |child| 
        = child.label :name
        = child.text_field :name 
```

还有一个由 Ryan Bates (https://github.com/ryanb/nested_form) 编写的名为nested_form 的很好的 gem，它可以帮助您完成其余的 CRUD 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:20:05.947

您可能想要的是[NestedAttributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

嵌套属性允许您通过父项将属性保存在关联记录上。默认情况下，嵌套属性更新是关闭的，您可以使用`accepts_nested_attributes_for class method`. 当您启用嵌套属性时，会在模型上定义一个属性编写器。

每个 ORM 的实现都不同，这里是**sequel**和**ActiveRecord**

[注意： Nerdgem](http://www.nerdgem.com/tutorials/3-adding-nested-attributes-to-models)也提供完整教程

## 后续执行

想象有一个项目类有很多任务

```
class Project < Sequel::Model
  one_to_many :tasks
end

class Task < Sequel::Model
  many_to_one :project
end 
```

要启用嵌套属性，您需要为 Project 类包含两个插件

*   **Sequel::Plugins::NestedAttributes：** 允许您通过调用当前对象的方法直接创建、更新和删除关联对象。嵌套属性是使用 nested_attributes 类方法定义的：

*   **Sequel::Plugins::InstanceHooks:**是 NestedAttributes 的依赖

[您可以在插件站点](http://sequel.rubyforge.org/rdoc-plugins/classes/Sequel/Plugins.html)上找到非常好的文档

```
Project.plugin :instance_hooks
Project.plugin :nested_attributes 
```

完成后，您可以`nested_attributes`在所需的类上调用该方法

```
Project.nested_attributes :tasks 
```

现在你可以这样做

```
p = Project.new(:title=>'Project')
p.tasks_attributes = [{:title=>'First Task'}, {:title=>'Second Task'}]
puts p.tasks.inspect
# It will output this
# [#<Task @values={:title=>"First Task"}>, #<Task @values={:title=>"Second Task"}>] 
```

保存项目时，它将同时保存项目和任务。

如果您甚至可以同时编辑许多任务。

## 活动记录实现

以下是如何使用它。

想象有一个项目类有很多任务

项目.rb

```
class Project < ActiveRecord::Base
  attr_accessible :title
  has_many :tasks
  accepts_nested_attributes_for :tasks
end 
```

任务.rb

```
class Tasks < ActiveRecord::Base
  attr_accessible :title, :project_id
  belongs_to :project
end 
```

现在你可以这样做了。

```
p =  Project.new
p.tasks_attributes=[{title: "First Task"}]

p.things
# Would output this
#=> [#<Thing id: nil, title: "First Task", created_at: nil, updated_at: nil, bar_id: nil>]
p.save 
```

保存项目时，它将同时保存项目和任务。

如果您想同时编辑多个项目任务，您可以这样做

```
p.tasks_attributes=[{title: "First Task"},{title: "Second Task"}] 
```

注意：还有一个 Railscasts 可以帮助您处理嵌套表单。[原始 Railscast](http://railscasts.com/episodes/196-nested-model-form-part-1) ,[修订 Railscast](http://railscasts.com/episodes/196-nested-model-form-revised)

# jvm - Jasmin如何强制长场为长常数？

> ID：10643328
> 
> 赞同：0
> 
> 时间：2012-05-17T20:52:15.347
> 
> 标签：jvm, long-integer, javap, jasmin

我设法在这个测试用例中隔离了我的问题：

```
.bytecode 50.0
.class public test
.super java/lang/Object

.field public static final foo1 J = 1

.method public <init>()V
    .limit stack 1
    .limit locals 1
    .var 0 is this Ltest; from init_start to init_end

init_start:
    aload_0
    invokespecial java/lang/Object/<init>()V 
init_end:
    return
.end method

.method public static main([Ljava/lang/String;)V
    .limit stack 1
    .limit locals 1
main_start:
    new test
    invokespecial test/<init>()V
main_end:
    return
.end method 
```

当我尝试运行它时，我得到了这个：

```
$ jasmin test.j
$ java test
Exception in thread "main" java.lang.ClassFormatError: Inconsistent constant value type in class file test
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: test. Program will exit. 
```

一些调查（与`javap`）揭示了这一点：

```
public static final long foo1;
  Constant value: int 1 
```

换句话说，long 常量的值作为整数存储在类文件中。有什么方法可以强制 Jasmin 将常量长期存储在池中吗？我试过`1L`了，但它不起作用。将 的值设置为`foo1`大于`INT_MAX`（例如`2147483648`）的数字确实可以修复错误，但我希望有一个不需要我更改常量值的解决方案。

Jasmin 是否提供任何方法来执行此操作，或者这是否需要我更改 jasmin 的源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:02:42.530

我已经发布了一个修改版的 Jasmin，它允许我这样做。它可以在[https://github.com/luiscubal/jasmin上找到](https://github.com/luiscubal/jasmin)

要在此修改版本上使用长常量，请执行以下操作：

```
.field public static foo J = 1l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T13:39:10.133

公共静态最终双常量存在同样的问题：

.field 公共静态 PHASE_1 D = 5.0

似乎也因相同的 Java 运行时错误而崩溃。

我通过删除'final'标志并将初始化移动到构造函数来解决它;-)

# python - 如何在 Python 中创建轮询脚本？

> ID：10643332
> 
> 赞同：2
> 
> 时间：2012-05-17T20:52:46.757
> 
> 标签：python

我试图在 python 中创建一个轮询脚本，该脚本在另一个 python 脚本启动时启动，然后继续向该脚本提供数据。

我显然可以写一个无限循环，但这是正确的方法吗？我可能会失去对函数如何工作以及一个小时内应该调用多少次函数的控制。

编辑：

我想要完成的是轮询 twitter 的 REST API 并获得新的提及和关注我的人。我显然不能继续轮询，因为我每小时会用完 API 请求。因此，问题。此轮询器会将新的提及和关注者 ID/用户发送到将侦听任何此类更新的主脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T21:04:08.987

我强烈建议研究[Twisted](http://twistedmatrix.com/trac/)，它是使用反应器模式的最流行的异步框架之一。

您正在寻找的“无限循环”实际上是 Twisted 实现的一种应用程序模式，用于异步响应事件，而且您自己的滚动几乎没有意义。

Twisted 主要用于网络需求，但它有一个`LoopingCall`接口来设置您需要的那种功能。使用核心 Twisted`deferred`作为您的请求模型，您可以设置一个长轮询服务器，该服务器可以执行您需要的那种条件网络测试。它最初可能有点吓人，但是一旦你了解了需要继承的核心组件（工厂、反应器、协议等），它就会更容易可视化你的问题。

这也可能是一个很好的教程，开始了解“推”模型的基础知识：http: [//carloscarrasco.com/simple-http-pubsub-server-with-twisted.html](http://carloscarrasco.com/simple-http-pubsub-server-with-twisted.html)

# c# - 更新键值对中 Key 的值

> ID：10643338
> 
> 赞同：1
> 
> 时间：2012-05-17T20:53:08.090
> 
> 标签：c#, linq

我有一个返回`<string,string>`键值对列表的 linq 语句。问题是键中的所有值都需要替换。有没有办法在 linq 的选择中进行替换而不必遍历整个列表？

```
var pagesWithControl = from page in sitefinityPageDictionary
                       from control in cmsManager.GetPage(page.Value).Controls
                       where control.TypeName == controlType
                       select page; // replace "~" with "localhost" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T20:55:49.243

您不能更改密钥，但可以使用新密钥返回一个新对象：

```
 var pagesWithControl = from page in sitefinityPageDictionary
                   from control in cmsManager.GetPage(page.Value).Controls
                   where control.TypeName == controlType
                   select new 
                           { 
                             Key = page.Key.Replace("~",localhost"), 
                             page.Value 
                           }; 
```

或者如果它必须是 KeyValuePair：

```
var pagesWithControl =  
   from page in sitefinityPageDictionary
   from control in cmsManager.GetPage(page.Value).Controls
   where control.TypeName == controlType
   select 
   new KeyValuePair<TKey,TValue>(page.Key.Replace("~",localhost"), page.Value); 
```

# perl - Perl/Swig/Python/Postgresql/C++ 脚本只是停止执行，只得到“脚本头的过早结束”

> ID：10643341
> 
> 赞同：1
> 
> 时间：2012-05-17T20:53:18.717
> 
> 标签：perl, version, swig

这很难用几句话来解释。在过去的 5 天里，我一直在试图解决这个问题，所以现在我作为最后的手段在这里问。我正在尝试使用由斯坦福大学计算台球组构建的带有锦标赛服务器的台球物理库，可在[http://www.stanford.edu/group/billiards/获得](http://www.stanford.edu/group/billiards/)

它提供了一个使用 apache2、postgresql 和 perl 的锦标赛服务器。我已经能够启用登录或创建简单匹配等功能，但与 AI 客户端的通信不起作用。客户端是我在终端中运行的 C++ 应用程序，它从服务器获取命令并打印此错误：

```
XMLRPC error: Unable to transport XML to server and get XML response back.  HTTP response code is 500, not 200 
```

apache2 error.log 正在打印：

```
[Thu May 17 21:30:17 2012] [error] [client 127.0.0.1] Premature end of script headers: api.pl 
```

我尝试使用 CGI::Debug 运行它，但没有得到更多输出。我已经能够通过一些调试输出（每行后一个:)）识别它失败的行，并且它在这个函数中，在打印 STDERR 之间的行上：

```
package Pool::Rules::GameState;

sub addToDb {
  my $self=shift;
  my $timeleft=shift || $self->timeLeft();
  my $timeleft_opp=shift || $self->timeLeftOpp();
#print STDERR "uh uh uh".$self." ".$self->timeLeft()." ".$self->timeLeftOpp()." ".$timeleft." ".$timeleft_opp."\n";
  my $playingSolids = ($self->isOpenTable() ? undef : ($self->playingSolids()?1:0));
 # print STDERR "addToDb: X".$self->isOpenTable()."X Y".$self->playingSolids()."Y Z".$playingSolids."Z\n";
  $Pool::dB::dbh->do('INSERT INTO states (turntype,cur_player_started,playing_solids,timeleft,timeleft_opp,gametype) VALUES (?,?,?,?,?,?)',{},
                     $self->getTurnType(),$self->curPlayerStarted()?1:0,$playingSolids,$timeleft,$timeleft_opp,$self->gameType()) or STDERR $DBI::errstr;
  my $stateid=$Pool::dB::dbh->selectrow_array('SELECT lastval()');
  $self->tableState()->addToDb($stateid);
  return $stateid;
} 
```

这只是简单的getter方法。而且，它只是停止执行。getter-methods 的代码由 swig 生成。第一个打印行打印：

```
uh uh uhPool::Rules::GameState=HASH(0x99fa99c) 0 0 00:10:00 00:10:00 
```

这似乎没问题，只是好奇 $self->-getters 只打印 0。由于该库来自斯坦福大学并且已经举行了实际比赛，我很难相信这是代码中的错误. 它似乎有点太旧了（我不得不在其他地方进行一些调整以使其适用于更新版本的库，f.ex。我在另一个与此无关的文件中添加了一个 < cstddef >-include perl 问题）。我首先尝试让它在当前版本上运行，但我失败了。然后我尝试将它安装在经过测试的 readme.txt 版本（Ubuntu 8.10、Perl 5.10 等）上，但在某些时候我的 Ubuntu 8.10 安装总是死机，我不得不重新安装（我试过这个 ~4次，gnome 终端总是分段错误）。所以现在我 我回到 Ubuntu 12 试图让它工作。我对 perl 知之甚少，只有在过去几天试图让它运行时我能学到的一点点。

有谁知道什么会引发这种行为？有人知道可能与此相关的任何兼容性问题吗？如果您需要任何其他信息，请询问，我会提供。

谢谢您的帮助！

# mysql - 如何更新多行

> ID：10643352
> 
> 赞同：0
> 
> 时间：2012-05-17T20:53:59.043
> 
> 标签：mysql, pdo

我正在尝试使用表单来更新数据库。数据库更新的问题是最后一行。所有行都由最后一行更新。问题出在哪里？谢谢

```
<?php if ((isset($_POST["MM_update"])) && ($_POST["MM_update"] == "form1")) {

$material = $_POST['material'];
$cena = $_POST['cena'];
$sql_material  = "UPDATE material_tab SET material=:material, cena=:cena WHERE zapotrzebowanie_id = $id";    
$statement_mat = $pdo->prepare($sql_material);
foreach ($material as $key => $value) {

    $statement_mat -> bindValue(':material', $material[$key], PDO::PARAM_STR);
    $statement_mat -> bindValue(':cena', $cena[$key], PDO::PARAM_STR);
    $statement_mat -> execute();

}

$statement_mat -> closeCursor(); } ?> 
```

形式：

```
<?php foreach ($rows_material as $material) { ?>
   <tr>
    <td><input type="checkbox" name="chk" /></td>
    <td><input type="text" name="material[]" class="big_field required" value="<?php echo $material['material']; ?>" /></td>
    <td><input type="text" name="cena[]" class="small_field" value="<?php echo $material['cena']; ?>" /></td>
   </tr>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:19:33.743

您的 SQL 语句说要更新 ..“WHERE zapotrzebowanie_id = $id”。您的示例代码从不设置 $id 的值，您的表单也不为它提交值。您需要在表单中包含 id 以更新该表单上显示的记录，否则 MySQL 不知道要更新哪条记录，并将继续更新在执行该语句时恰好具有 zapotrzebowanie_id = $id 的记录。

# objective-c - 如何在 iOS 模拟器中显示状态栏？

> ID：10643353
> 
> 赞同：0
> 
> 时间：2012-05-17T20:54:04.660
> 
> 标签：objective-c, ios, xcode

目前，状态栏未显示在我的 iOS 模拟器中。有谁知道我该如何解决这个问题？它出现在我的故事板上，但在我运行模拟器时却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:56:59.950

将此添加到您的代码中：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

并且**不要使用**它，因为它**已被弃用**：

~~`[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO];`~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T20:58:15.503

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:04:01.020

除了西蒙的回答之外，请确保在您的 Info.plist 中，如果您有“状态栏最初隐藏”，如果您没有看到带有此文本的行，则它设置为“否”，这意味着它是默认设置，“不”。`[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO];`我的猜测是它可能只是模拟器，因为错误地将该行添加到您的代码中有点困难。如果这不起作用，请按照 Simon 的回答重置 iOS 模拟器检查尝试检查您的 Info.plist。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:11:49.653

有多种方法可以通过编程和配置来操作状态栏。正如其他答案所述，您可以使用：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO]; 
```

如果您希望应用程序具有一致的配置，则可以修改应用程序的 info.plist。您可能看不到状态栏，因为您的 Info plist 已配置为隐藏它。

You can add an entry in the Info plist for **Status bar is initially hidden** with a Boolean value of YES or NO. Additionally, you can customize the look of the status bar in the Info plist through the **Status bar style** key.

# c# - Silverlight 手机更新绑定到列表框的 Datatemplate 中的按钮

> ID：10643356
> 
> 赞同：0
> 
> 时间：2012-05-17T20:54:23.930
> 
> 标签：c#, silverlight, listbox, windows-phone, datatemplate

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
  <Grid.Resources><DataTemplate x:Key="mDataTemplate">
    <Button BorderBrush="#FF767171" Margin="10,10,0,0" Click="button1_Click" IsEnabled="{Binding Enabled}">
      <Button.Content>
        <Grid x:Name="ButtonGrid" Height="Auto" HorizontalAlignment="Left" erticalAlignment="Top">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />                                 
          </Grid.RowDefinitions>
     <TextBlock Grid.Row="0" Height="Auto" HorizontalAlignment="Left" Text="{Binding TitleText}" VerticalAlignment="Top" Width="Auto"  FontSize="30" />
     <TextBlock Grid.Row="1" Height="Auto" HorizontalAlignment="Left" Text="{Binding DetailText}" VerticalAlignment="Top" Margin="10,0,0,0" Width="Auto"  FontSize="20" />
        </Grid> </Button.Content> </Button> </DataTemplate> </Grid.Resources> 
```

我的代码。

```
public class AboutData
    {        
        public string TitleText { get; set; }
        public string DetailText { get; set; }
        public bool Enabled { get; set; }
    }
} 
```

列表框的加载事件

```
ObservableCollection<AboutData> aCollection = new ObservableCollection<AboutData>();
aCollection.Add(new AboutData { TitleText="Title1", DetailText="Detail1", Enabled= true});
aCollection.Add(new AboutData { TitleText="Title2", DetailText="Detail2", Enabled= true});
aCollection.Add(new AboutData { TitleText="Title3", DetailText="Detail3", Enabled= true});

ContentPanel.DataContext = aCollection; 
```

加载 listBox1 （我的列表框）时，我创建了 AboutData 的 ObservableCollection 并将其分配给 ControlPanel.DataContext

我想在单击某个按钮时禁用我的 lisbox 中的按钮。不知道怎么样。帮助赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T00:27:35.483

您应该能够设置 AboutData 的 Enabled 属性

```
public void button1_Click(object sender, RoutedEvent e)
{
  AboutData dataContext = (sender as Button).DataContext as AboutData;
  dataContext.Enabled = false;
} 
```

此外，您需要在 AboutData 上实现 INotifyPropertyChanged 以便绑定工作（请参阅[this](https://stackoverflow.com/questions/1315621/implementing-inotifypropertychanged-does-a-better-way-exist)）

```
public class AboutData : INotifyPropertyChanged
{
    // boiler-plate
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
    protected bool SetField<T>(ref T field, T value, string propertyName)
    {
        if (EqualityComparer<T>.Default.Equals(field, value)) return false;
        field = value;
        OnPropertyChanged(propertyName);
        return true;
    }

    // props
    private string _Enabled;
    public string Enabled
    {
        get { return Enabled; }
        set { SetField(ref _Enabled, value, "Enabled"); }
    }

    // etc. for TitleText, DetailText
} 
```

# jquery - jQuery重新调整图像大小以适应点击容器

> ID：10643361
> 
> 赞同：2
> 
> 时间：2012-05-17T20:54:50.420
> 
> 标签：jquery, jquery-ui

我在这里开发一个应用程序：

[http://jsfiddle.net/jwuliger/q5yvW/2/](http://jsfiddle.net/jwuliger/q5yvW/2/)

正在发生的事情是，一旦您将图像放入其中一个容器中，它将根据所述容器的大小重新调整图像大小。我为此添加了一个旋转块，这样当用户单击图像时，一旦图像位于容器中，它就会旋转。

我需要帮助的是在发生旋转后再次调整图像大小以适合容器。您可以从上面的链接中看到一个活生生的例子。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:59:59.243

不确定代码，但似乎一旦你有了逻辑，代码应该很容易查看小提琴行为

当您单击框内的图像复选框宽度并根据需要更改图像宽度时，然后检查图像高度是否大于框高度，如果没有则完成。如果图像的高度大于框的高度，则根据高度调整大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:05:18.420

旋转图像时要小心，它的宽度和高度没有切换。[http://jsfiddle.net/q5yvW/14/](http://jsfiddle.net/q5yvW/14/)

如果图像参数在旋转 90 度后切换，则您的算法可以正常工作。

```
200x150 - 0 degrees
150x200 - 90 degrees 
```

# javascript - Pico 找不到 python 模块

> ID：10643362
> 
> 赞同：1
> 
> 时间：2012-05-17T20:54:50.747
> 
> 标签：javascript, python, module

我正在尝试使用 Pico 通过 javascript 调用 python 模块，但我不断收到此错误。谁能提供一些见解？

> "GET /pico/call/?_module=pico.server&_function=load&module_name=%22example%22&_callback=jsonp14922499508 HTTP/1.1" 500 426"

一些 pico 文档：[https ://github.com/fergalwalsh/pico/wiki](https://github.com/fergalwalsh/pico/wiki)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:05:55.830

我有同样的问题。尝试这个：

将`.py`和`index.html`文件复制到pico根目录`/`

尝试从根目录运行应用程序？

```
http://localhost:8800/ 
```

# wordpress - wordpress 创建自定义帖子类型，拉取自定义帖子类型

> ID：10643364
> 
> 赞同：0
> 
> 时间：2012-05-17T20:55:01.353
> 
> 标签：wordpress, custom-post-type

我正在一个新的 WP 站点上自定义管理员，并且我正在创建一个总体自定义帖子类型，这将允许管理员为该站点创建页面。我希望他们能够从其他自定义帖子类型中提取值并将它们设置在这里。不过，我正在努力寻找有关如何执行此操作的良好文档。我可以毫无问题地创建多个自定义帖子类型，只是不确定如何将 post_type_y 的值拉入 post_type_x 的 meta_options 中。
任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:12:09.163

由于我无法对您的问题“发表评论”，因此我会尽我所能回答。

帖子中有一个插件[帖子](http://wordpress.org/extend/plugins/posts-to-posts/)，可让您将帖子 1 与帖子 2 关联起来。这有点笨拙，但可以完成工作。

如果您希望在多个帖子类型之间关联标签、类别或其他内容，我更喜欢使用[自定义分类法](http://codex.wordpress.org/Taxonomies)，因为它们相对容易实现。

示例自定义分类：

```
function languages_init() {
    // create a new taxonomy
    register_taxonomy(
        'languages',
        array('post','clients','positions','projects'), // Set various post-types
        array(
            'label' => __( 'Languages' ),
            'sort' => true,
            'args' => array( 'orderby' => 'term_order' ),
            'rewrite' => array( 'slug' => 'language' )
        )
    );
}
add_action( 'init', 'languages_init' ); 
```

# objective-c - 可以从带有对象的 NSSet 中检索带有变量的 NSSet 吗？

> ID：10643371
> 
> 赞同：2
> 
> 时间：2012-05-17T20:55:20.403
> 
> 标签：objective-c, xcode, nsarray, nsset

如果你有一个带有 car 类型对象的 NSSet。Car 有两个属性： NSString *name, NSInteger speed 你想要一个 NSSet 只包含汽车名称的 NSStrings。

如果不遍历每个对象并将其放入可变集合中，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:13:47.457

您可以使用[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107-SW1)。

```
NSSet *namesOfCars = [setOfCars valueForKeyPath:@"name"]; 
```

# c# - 无法识别的配置节编译

> ID：10643373
> 
> 赞同：2
> 
> 时间：2012-05-17T20:55:25.283
> 
> 标签：c#, configuration

添加时出现无法识别的配置部分编译异常

```
<?xml version="1.0"?>
<configuration>
  <configSections>
.....

  <compilation debug="true" targetFramework="4.0">
    <assemblies>
      <add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </assemblies>
  </compilation> 
```

这是我的 app.config

如何将此添加到与 Windows 服务关联的 app.config 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T20:59:14.657

`<compilation>`必须是元素的子`<system.web>`元素 - 请参阅[http://msdn.microsoft.com/en-us/library/s10awwz0.aspx](http://msdn.microsoft.com/en-us/library/s10awwz0.aspx)中的更多信息。

# codeigniter - 表单提交后获取不完整的 POST 数据

> ID：10643375
> 
> 赞同：1
> 
> 时间：2012-05-17T20:55:39.463
> 
> 标签：codeigniter, special-characters, nicedit

我一直在研究这个问题几个小时。我有一个带有文本区域的表格。我使用 nicEdit 文本编辑器。它替换了 textarea 并显示了一个不错的文本编辑器，因为我希望我的用户为他们的内容添加一些样式。

我使用 codeIgniter (PHP)，并使用 form_helper 创建表单。我也使用 form_validation 进行 ss-validation 和 jquery 验证进行 cs-validation

当我单击提交时，表单提交似乎很好。我这样说是因为我使用 fiddler（一个 http 记录器）并且我看到我的文本带有由文本编辑器包裹的正确 html 标签。

但是当我在视图中获得@_pots 数据时，不知何故，某些标签已被删除。

fiddler 如何跟踪 HTTP 调用和提交的表单数据（似乎正确）

```
Hello SO, <br><br>
<span style="font-weight: bold;">the following line should be bold</span><br><br>
<span style="font-style: italic;">the following line should be italic</span><br><br>
<span style="text-decoration: underline;">the following line should be underlined</span><br> 
```

我的 html 在我的视图和我的@_post 数据的 print_r 结果中的外观

```
Hello SO,<br><br>
<span bold;"="">the following line should be bold</span><br><br>
<span italic;"="">the following line should be italic</span><br><br>
<span underline;"="">the following line should be underlined</span><br> 
```

看起来不知何故，当我取回数据时，它会删除 style="font-weight

$_post 对特殊字符有什么作用吗？！？！有人遇到过类似的问题吗？非常感谢所有答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:42:26.397

您需要从 Codeigniter 扩展 CI_Security 类并注释/删除/修改此行：

```
/*
if(in_array($_SERVER['REQUEST_URI'],$allowed))
        {
            $evil_attributes = array('on\w*', 'xmlns');
        }
        else
        {
            $evil_attributes = array('on\w*', 'style', 'xmlns');
        }
*/ 
```

# performance - 垃圾收集的主要性能提升是什么？

> ID：10643377
> 
> 赞同：2
> 
> 时间：2012-05-17T20:55:52.460
> 
> 标签：performance, garbage-collection

llvm 文档说：

> 然而，在实践中，使用积极的垃圾收集技术的局部性和性能优势主导了任何低级损失。

那么，究竟是什么导致了使用垃圾收集而不是手动管理内存时的性能提升？（除了代码编写时间的明显减少）执行堆压缩的好处仅仅是增加了空间局部性和缓存利用率吗？还是有其他帮助更大的方法，例如一次删除所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:22:19.847

我只能代表 Oracle（前 Sun）和 IBM JVM；它们的效率取决于新创建的对象不太可能存在很长时间的事实。因此，将它们隔离到自己的区域可以使该区域经常被压实，因为幸存者很少，这是一项廉价的操作。频繁的压缩意味着空闲空间可以保持连续，因此对象创建也很便宜，因为没有空闲链可以遍历，也没有内存碎片。

手动内存管理方案很少有这种效率，因为这是一种相对复杂的做事方式，不太可能为每个应用程序重新发明。这些垃圾收集器经过更长时间的发展和优化，并且比单个应用程序所付出的努力更多。如果它们的性能不高，那将是令人惊讶和失望的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T23:11:54.657

在现代处理器上，内存缓存为王。遭受高速缓存未命中可能会使处理器停顿数百个 cpu 周期，等待慢速总线提供数据。

使缓存有效需要参考的局部性。换句话说，如果下一次内存访问接近前一次，那么数据已经在缓存中的可能性很高。

垃圾收集器可以帮助很好地解决这个问题。最大的胜利不是集合，而是它在这样做的同时重建对象图和*重组数据结构的能力。*压实。

想象一下典型的数据结构，一个指向对象的指针数组。例如，从文件中读取一堆字符串并将它们转换为对象的字段值时，它正在慢慢建立起来。分配的对象将分散在地址空间中这样做。由工作对象分隔的数组指向的长寿对象，如字符串。稍后迭代该数组将非常缓慢。

直到垃圾收集器运行并重建数据结构。将所有指向的对象按顺序排列。

现在迭代集合非常快，因为访问元素 N 使得元素 N+1 很可能随时可用。如果不在 L1 缓存中，那么 L2 或 L3 的可能性非常大（如果有的话）。

非常大的胜利，这是使垃圾收集与显式内存管理竞争的一项功能。显式类型存在不支持移动对象的问题，因为它会使指针无效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T22:39:27.690

我怀疑局部性是否有助于性能 - 诚然，小对象倾向于在堆的同一区域同时创建（但这也适用于 C），随着时间的推移，这些剩余的小对象将被压缩成一个紧密的堆的相关区域，据说这给了你优于 C 风格分配的优势。但是，给我看一个只使用这些小对象的程序，我将给你看一个可以做所有事情的程序。给我看一个程序，它传递要在堆栈上使用的所有对象，我会告诉你一个快速尖叫的程序。

内存的解除分配是短期的性能优势，因为它们不需要被解除分配。然而，当垃圾收集器启动时，这种好处就消失了。但是，通常情况下，当系统（理论上）没有发生任何其他事情时，就会发生收集，因此成本实际上是无效的。

堆的压缩也有助于分配，所有分配都可以来自堆的开头，内存管理器不必遍历堆寻找下一个合适大小的空闲空间块。但是，传统系统可以通过使用多个固定块堆来获得相同的速度（这意味着您始终从堆中分配所需大小的块，并且始终分配固定块，因此遍历堆只是为了找到第一个空闲块，这可以使用位图删除）

所以总而言之，除了基准测试之外，根本没有什么好处。根据我的经验，GC 可以而且会在错误的时间介入并显着减慢您的速度，通常是当系统内存被填满时，因为用户已经完成了诸如加载需要大量内存分配的新页面之类的操作...... . 这反过来又需要一个集合。

它也有使用大量内存的趋势——“内存便宜”是 GC 语言的口头禅，因此在编写程序时考虑到这一点，这意味着内存分配更为常见，尤其是对于临时对象和中间对象。只需查看 StringBuilder 类即可找到众所周知的证据。使用它可以“解决”字符串，但许多其他对象仍然被随意分配。任何使用大量内存的程序都会发现自己在 RAM IO 上苦苦挣扎——所有内存都必须放入 CPU 缓存中才能使用，你使用的内存越多，你的 CPU MM 必须做的 IO 就越多，这可以在错误的情况下杀死性能。

此外，当发生 GC 时，您也必须处理 Finalized 对象，这并不像以前那么糟糕，但它仍然可以在运行 finalisers 时停止您的程序。

旧的 Java GC 的性能很差，尽管很多研究已经使它们变得更好，但它们仍然不是完美的。

编辑：关于本地化的另一件事，想象创建一个数组并添加一些项目，然后进行分配负载，然后您想向数组中添加另一个项目 - 使用 GC 系统，添加的数组元素将不会被本地化，甚至压缩后，数组中的每个对象都将作为单独的项目存储在堆上。这就是为什么我认为本地化问题并不像人们想象的那么重要。现在，将其与分配有缓冲区的数组进行比较，并且在缓冲区空间内分配对象。这*可能*需要重新分配和复制才能添加新项目，但读取和修改它非常快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T21:54:03.217

一个尚未提及的因素是，特别是在多线程系统中，有时很难确定地预测哪个对象最终会持有对其他对象的最后一个幸存引用。如果不必担心可能包含循环的对象图，则可以为此目的使用引用计数。在复制对对象的引用之前，增加其引用计数。在销毁对对象的引用之前，请减少其引用计数。它减少引用计数使其达到零，破坏对象以及引用。这种方法适用于只有一个 CPU 内核的计算机；如果在任何给定时间实际上只能运行一个线程，则不必担心如果两个线程尝试调整同一对象会发生什么” s 引用计数同时进行。不幸的是，在具有多个 CPU 内核的系统中，任何想要调整引用计数的 CPU 都必须与所有其他 CPU 协调该操作，以确保两个 CPU 不会同时击中计数器。这种协调对于单个 CPU 来说是“免费的”，但在多核系统中相对昂贵。

当使用批处理模式垃圾收集器时，对象引用通常可以自由分配、复制和销毁，而无需 CPU 间协调。需要定期让所有 CPU 停止并运行垃圾回收周期，但要求所有 CPU 每隔几秒左右相互协调一次比要求它们在每个 CPU 上相互协调便宜得多对象引用赋值。

# sql - 如何在 SQL Server 中查询大于某个日期的所有日期？

> ID：10643379
> 
> 赞同：424
> 
> 时间：2012-05-17T20:56:14.377
> 
> 标签：sql, sql-server, datetime

我正在努力：

```
SELECT * 
FROM dbo.March2010 A
WHERE A.Date >= 2010-04-01; 
```

`A.Date`好像：`2010-03-04 00:00:00.000`

但是，这是行不通的。

任何人都可以提供参考为什么？

* * *

## 回答 #1

> 赞同：579
> 
> 时间：2012-05-17T20:57:20.653

```
select *  
from dbo.March2010 A 
where A.Date >= Convert(datetime, '2010-04-01' ) 
```

在您的查询中，`2010-4-01`被视为数学表达式，因此本质上它是

```
select *  
from dbo.March2010 A 
where A.Date >= 2005; 
```

（`2010 minus 4 minus 1 is 2005` 将其转换为正确的`datetime`，并使用单引号将解决此问题。）

从技术上讲，解析器可能会让你侥幸逃脱

```
select *  
from dbo.March2010 A 
where A.Date >= '2010-04-01' 
```

它会为您进行转换，但在我看来，它的可读性不如`DateTime`为您之后的维护程序员显式转换为 a 。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-05-17T20:56:53.460

尝试将您的日期包含在字符串中。

```
 select * 
 from dbo.March2010 A
 where A.Date >= '2010-04-01'; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-03-23T05:21:04.103

我们也可以像下面这样使用

```
SELECT * 
FROM dbo.March2010 A
WHERE CAST(A.Date AS Date) >= '2017-03-22';

SELECT * 
    FROM dbo.March2010 A
    WHERE CAST(A.Date AS Datetime) >= '2017-03-22 06:49:53.840'; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-07-12T08:48:10.030

综上所述，正确答案是：

```
select * from db where Date >= '20100401'  (Format of date yyyymmdd) 
```

这将避免其他语言系统的任何问题，并将使用索引。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-09T18:54:32.840

```
DateTime start1 = DateTime.Parse(txtDate.Text);

SELECT * 
FROM dbo.March2010 A
WHERE A.Date >= start1; 
```

首先将 TexBox 转换为 Datetime 然后....将该变量用于查询

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-08T17:24:47.227

在您的查询中，您没有在日期周围使用单引号。这就是问题所在。但是，您可以使用以下任何查询来比较日期

```
SELECT * 
FROM dbo.March2010 A
WHERE A.Date >= '2010-04-01';

SELECT * 
FROM dbo.March2010 A
WHERE A.Date >= CAST('2010-04-01' as Date);

SELECT *  
FROM dbo.March2010 A 
WHERE A.Date >= Convert(datetime, '2010-04-01' ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-26T15:13:07.777

日期格式对我没有问题（`Mydate`的数据类型是`datetime`）：
`Where Mydate>'10/25/2021'`或者`Where Mydate>'2021-10-25'`
但如果添加时间，上述答案不起作用。
这是我的工作：
`where cast(Mydate as time)>'22:00:00'`
如果您的查询需要日期，请添加日期，例如：
`where cast(Mydate as time)>'22:00:00' and Mydate='10/25/2021'`

# java - Spring自动装配使用注释和属性文件中定义的类型？

> ID：10643386
> 
> 赞同：7
> 
> 时间：2012-05-17T20:56:45.127
> 
> 标签：java, spring, configuration, dependency-injection, annotations

我的目标是一个框架，其中可以通过属性文件轻松更改具体类型的 bean。我也更喜欢 XML 的注释。理想情况下，我会`@Resource`像这样使用和 SpEL 的组合：

```
@Resource(type="#{myProperties['enabled.subtype']}")
SomeInterface foo; 
```

我已经加载`myProperties`了一个`PropertiesFactoryBean`或`<util:properties>`来自一个文件的地方，其中包括：

```
enabled.type = com.mycompany.SomeClassA; // which implements SomeInterface 
```

这不起作用，因为参数 of`type`必须是文字，即不允许 SpEL。这里的最佳做法是什么？

**更新：**请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:05:30.770

我认为这是不可能的，我倾向于采用的解决方案是使用根据配置属性（在您的示例中为 enabled.type）创建不同对象的工厂。

第二种选择可能是按名称使用注入：

```
@Resource(name="beanName") 
```

最后，如果您使用 Spring 3.1+，您可以尝试使用配置文件，并在不同的配置文件中使用不同的 bean 集，如果这样可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:08:42.207

这正是 Spring Java Configuration 的用例。

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java)

或者您也可以创建一个工厂。

使用：org.springframework.beans.factory.FactoryBean<SomeInterface>

实现 FactoryBean 的 bean 的名称将被视为“SomeInterface”，即使它不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T16:51:31.650

[Spring 的 Java 配置](http://blog.springsource.org/2006/11/28/a-java-configuration-option-for-spring/)和[Bean 定义配置文件](http://blog.springsource.org/2011/02/14/spring-3-1-m1-introducing-profile/)正是我想要的（感谢 @Adam-Gent 和 @Guido-Garcia）。前者似乎对于动态元素是必要的，而后者促进了更好的实践。

这是一个带有 Java 配置和属性的解决方案：

```
@Configuration
public class SomeClassConfig {
    @Value("#{myProperties['enabled.subtype']}")
    public Class enabledClass;

    @Bean SomeInterface someBean() 
              throws InstantiationException, IllegalAccessException {
       return (SomeInterface) enabledClass.newInstance();
    }   
} 
```

这是一个稍微不那么动态的配置文件解决方案。

```
@Configuration
@Profile("dev")
public class DevelopmentConfig {
    @Bean SomeInterface someBean() {
       return new DevSubtype();
    }   
}

@Configuration
@Profile("prod")
public class ProductionConfig {
    @Bean SomeInterface someBean() {
       return new ProdSubtype();
    }   
} 
```

对于配置文件，活动配置文件是使用[多种方法](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)之一声明的，例如通过系统属性、JVM 属性、web.xml 等。例如，使用 JVM 属性：

```
-Dspring.profiles.active="dev" 
```

# google-places-api - Google Maps Places api，如何从标记中获取标准信息窗口内容

> ID：10643388
> 
> 赞同：6
> 
> 时间：2012-05-17T20:56:49.057
> 
> 标签：google-places-api

谷歌地图新手，也不是脚本专家。提前感谢您提供的任何帮助。

我将谷歌地图放在商店位置页面上。我已经设法让地图使用搜索显示我想要的商店位置的标记。现在我希望将 infoWindow 填充为看起来像标准的 google 窗口。但是使用我能够在位置库上找到的代码，结果显示为未格式化且没有换行符，并且如果缺少信息，则显示错误，等等......我已经搜索并没有找到任何有帮助的东西- 所以如果这已经得到回答，请原谅我 - 我已经多次阅读谷歌地方图书馆，所以要么我很密集，要么他们只是没有解决这个具体问题。

用户将单击页面上列出的商店位置，我想向他们展示带有一个标记的地图（通过搜索我想我可以做到这一点）并且我希望商店信息在他们单击时显示在 infoWindow 中在标记上（最好我希望 infoWindow 已经打开，但我也找不到任何东西）。由于我是该站点的新手，因此无法发布 infoWindow 的图像，因此希望不需要它。就像 google 的地图网站一样，我想要一个格式良好的名称、信誉星、一个格式化的地址、电话号码和网站，如果存在的话，还需要一张公司的图片。我在下面使用的示例适用于所有这些信息都存在于谷歌中的企业。包括我目前拥有的地图代码。

请不要简单地回复以引导我回到地方图书馆；如果这就是你所拥有的，那么它没有帮助。我需要一些澄清，最好是一个例子。谢谢。

```
 <script type="text/javascript">
    var map;
    var service;
    var infowindow;

    function initialize() {
    var mvale = new google.maps.LatLng(40.708572,-74.017385);

    map = new google.maps.Map(document.getElementById('map_canvas'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: mvale,
      zoom: 16
    });

    var request = {
      location: mvale,
      radius: '500',
    keyword: "Michelle Vale"
    };

    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
     service.search(request, callback);
    }

    function callback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) {
       for (var i = 0; i < results.length; i++) {
         var place = results[i];
         createMarker(results[i]);
    }
    }
    }
    function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(place.name + place.rating + place.vicinity + 
          place.formatted_address + place.website );
          infowindow.open(map, this);
        });
      }

    function openInfoWindow(id){return true;}

    google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:58:54.950

我终于在另一篇[文章中找到了一些格式化 infoWindow 的代码，他们在其中回答了关于删除](https://stackoverflow.com/questions/8972084/how-to-reduce-the-padding-of-the-google-maps-places-api-v3-infowindow)infoWindow 边框的问题。

这是我的例子：

```
 infowindow.setContent('<span style="padding: 0px; text-align:left" align="left"><h5>' + place.name + '&nbsp; &nbsp; ' + place.rating 
                            + '</h5><p>' + place.formatted_address + '<br />' + place.formatted_phone_number + '<br />' +  
                            '<a  target="_blank" href=' + place.website + '>' + place.website + '</a></p>' ) ; 
```

我还想出了如何使用[Places Library中描述的 getDetails 函数](https://developers.google.com/maps/documentation/javascript/places#place_details)

**我仍然不知道**如何获取评级信息（我正在使用标签，但它给出了错误），如何检索该位置的图像，也不知道如何消除出现的“未定义”错误。

最后一个元素是**在地图加载时打开 infoWindow** ......我看到了一篇关于它的帖子，但无法让它工作。

# php - 使用 PHP 避免文件 XLS 中继服务的请求 URL 过长

> ID：10643395
> 
> 赞同：1
> 
> 时间：2012-05-17T20:57:00.857
> 
> 标签：php, javascript, export, xls

我想要做的是提供一种下载在js客户端生成的Xls文件的方法。所以我在js中的字符串中有xls，需要给用户一种下载它并在excel中打开它的方法。

据我了解，这样做的唯一方法是通过内容类型在服务器上执行此操作，因此我尝试提供一个执行文件中继的 php ... 这是 php

```
<?php
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"my-data.csv\"");
$data=stripcslashes($_REQUEST['csv_text']);
echo $data; 
?> 
```

一个请求最终可能会相当长，所以例如我可能有这个请求......（实际上大大缩短了）。

我不擅长 php，任何人都可以建议一个更好的方法来修改这个中继脚本（或完全更好的方法）来完成这个？

> [http://myserver.com/ExcelRelay.php?csv_text=Id%09City%09Phone%09Address%201%09Address%202%09State%09Type%09Employees%09Revenue%09Leed%09Established%09Comments%09Country%09Postal%20Code%09Territory% 0A3%09格林斯伯勒%096538227668%09%0978%20洛基%20秒%20圣%09新%20泽西%09远程%09%090%091%09太阳%20八月%2009%201964%2000%3A00%3A00%20GMT-0400%20%28 %20Daylight%20Time%29%09%22Et%20quad%20estis%20vobis%20homo%2C%20si%20nomen%20transit.%20%0A%20Sed%20quad%20estis%20vobis%20homo%2C%20si%20quad%20ut% 20novum%20vobis](http://myserver.com/ExcelRelay.php?csv_text=Id%09City%09Phone%09Address%201%09Address%202%09State%09Type%09Employees%09Revenue%09Leed%09Established%09Comments%09Country%09Postal%20Code%09Territory%0A3%09Greensboro%096538227668%09%0978%20Rocky%20Second%20St.%09New%20Jersey%09Remote%09%090%091%09Sun%20Aug%2009%201964%2000%3A00%3A00%20GMT-0400%20%28Eastern%20Daylight%20Time%29%09%22Et%20quad%20estis%20vobis%20homo%2C%20si%20nomen%20transit.%20%0A%20Sed%20quad%20estis%20vobis%20homo%2C%20si%20quad%20ut%20novum%20vobis)

感谢您的回复，最终脚本是

```
<?php header("Content-type: application/octet-stream"); 
     header("Content-Disposition: attachment;filename=\"".$_POST['filename']."\"");    
     echo $_POST['data']; 
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:02:41.153

一个词：[POST](http://en.wikipedia.org/wiki/POST_(HTTP))。

`Request Url Too Long`是客户端错误，并且是（AFAIK）IE 独有的错误，这些天。如果您想将数据发送到服务器并将其作为文件发送回您，则必须在请求正文中发送数据。

请参阅[此处](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)了解更多信息。

# c# - 从 Windows 窗体键中去除修饰符

> ID：10643397
> 
> 赞同：3
> 
> 时间：2012-05-17T20:57:02.073
> 
> 标签：c#, winforms, events, keyboard, hotkeys

我目前正在研究一个处理设置热键以执行操作的项目。我有热键功能，但如果键仅由修饰符组成，我不想允许设置热键。例如，`Ctrl`+`F`是有效的热键，但`Ctrl`+`Alt`不是。

我尝试了几种方法将修饰键从实际的 Keys 枚举对象中剥离，然后对照 Keys.None 检查它以确定它是否仅由修饰键组成。然而，在实践中，这并不是那么好。

我首先尝试了这种方法：

```
private Keys StripModifiers(Keys Key)
{
    return Key & ~Keys.Modifiers;
} 
```

那没有用，因为我的 Ctrl 键似乎正在使用 LButton | 的 KeyData 属性调用 PreviewKeypress 方法。Shift键 | 控制，Keys.Modifiers 位掩码显然没有完全捕捉到。

我尝试编写自己的，更复杂的：

```
private Keys StripModifiers(Keys Key)
{
    return Key &
        ~Keys.Alt &
        ~Keys.CapsLock &
        ~Keys.Control &
        ~Keys.ControlKey &
        ~Keys.LControlKey &
        ~Keys.LMenu &
        ~Keys.LShiftKey &
        ~Keys.LWin &
        ~Keys.MButton &
        ~Keys.Menu &
        ~Keys.NumLock &
        ~Keys.RButton &
        ~Keys.RControlKey &
        ~Keys.RMenu &
        ~Keys.RShiftKey &
        ~Keys.RWin &
        ~Keys.Scroll &
        ~Keys.Shift &
        ~Keys.ShiftKey;
} 
```

但是，这也不起作用，因为按下 A 键，它只是调用了 KeyData 属性为 65 的事件，将其减少为 Keys.None，因此限制性太强。

在这一点上我几乎不知所措，以前有没有人遇到过或解决过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T01:26:45.840

您的原始代码是正确的。你可以让它更清晰一点，`Key & Keys.KeyCode`但这会产生相同的结果。所以你需要在一个选项窗口中使用这个方法：

```
private static IsValidShortcutKey(Keys key) {
    return (key & Keys.KeyCode) != Keys.None;
} 
```

然后，您在谈论 ProcessKeyPreview() 时会有些迷茫。您应该使用 ProcessCmdKey() 而不是顺便说一句。那是*后来*，在用户选择了一个被 IsValidShortcutKey() 认为有效的密钥之后很久。是的，*任何*键都会使该方法运行，无论它是否与您选择的快捷方式匹配。由于 Keys.ToString() 方法在显示真正的击键方面做得很糟糕，这是由具有 [Flags] 属性的 Keys 枚举引起的。转换为 int 以查看实际值。

所以你应该有*两个*非常不同的代码块。选项菜单中的一个块，用于检查请求的击键是否有效。它应该使用 IsValidShortcutKey()。

还有另一个检查键是否被按下的块。这应该类似于这样：

```
 protected override bool ProcessCmdKey(ref Message msg, Keys keyData) {
        if (keyData == keySelectedInConfig) {
            RunOperationSelectedInConfig();
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

# ios - iOS UISplitViewController - 隐藏主视图窗格并平滑过渡

> ID：10643398
> 
> 赞同：1
> 
> 时间：2012-05-17T20:57:09.337
> 
> 标签：ios, ipad, uisplitviewcontroller, transition

我正在使用 UISplitViewController 开发 iPad 应用程序。我设法在详细视图导航栏上添加了一个按钮，以通过隐藏主视图（就像 Dropbox 一样）在横向模式下“最大化”详细信息窗格。我通过将拆分视图控制器委托设置为 nil 然后返回它的委托来强制“shouldHideViewController”触发。这有效，但没有过渡 - 它只是轻弹到全屏。我希望视图在过渡中跨越屏幕（就像 Dropbox 一样）。

任何人都可以提出一种方法来实现这一目标吗？

# jquery - 处理在运行时定义 id 的元素上的事件

> ID：10643400
> 
> 赞同：0
> 
> 时间：2012-05-17T20:57:10.810
> 
> 标签：jquery, events, event-handling

我想通过它处理元素事件，因为 id 是在运行时定义的。

```
 <input type='submit' name='status' value='like' id='like'/>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

  $('#like').live('click',function(){
     alert('like');
      $(this).attr({'id':'unlick','value':'unlike'});
  })​​​​​​​​​​;

   $('input').delegate('#unlike','click',function(){
      alert('unlike');
      $(this).attr({'id':'lick','value':'like'});
  }); 
```

下面是问题的[demo](http://jsfiddle.net/R2X4c/) ​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:59:57.807

一些错别字，您可以`.on`用于喜欢和不喜欢。

这是一个工作示例：

[http://jsfiddle.net/CgKwt/2/](http://jsfiddle.net/CgKwt/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T20:58:43.597

Typo船长再次出击。也替换`unlick`为`unlike`并使用`live()`第二个处理程序：

```
$('#like').live('click',function(){
    alert('like');
    $(this).prop('id', 'unlike').val('unlike');
});

$('#unlike').live('click',function(){
    alert('unlike');
    $(this).prop('id', 'like').val('like');
}); 
```

您还应该使用`.prop()`设置 id 和`.val()`设置值。

哦，考虑不更改 ID，而是将标志（like/unlike）存储在数据属性中，并在事件处理程序中检查它。然后，您不需要实时事件或委托，而可以简单地绑定常规事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:00:57.057

我会做类似下面的事情，而不是编写 2 个处理程序，

**标记：**

```
<input type='submit' name='status' class="like_status" value='like' id='like'/> 
```

**JS**

```
$('.like_status').on('click',function(){
    alert(this.id);

    if (this.id == 'like') {      
       $(this).attr({'id':'unlike','value':'unlike'});
    } else {      
       $(this).attr({'id':'like','value':'like'});
    }
}); 
```

或者您可以简单地使用`this.id`and`this.value`来代替 jQuery 函数。

```
$('.like_status').on('click',function(){
    var btnTxt = (this.id == 'like')?'unlike': 'like';
    this.id = btnTxt;
    this.value = btnTxt;  //Or some other text.
}); 
```

[**演示**](http://jsfiddle.net/skram/R2X4c/2/)

# ruby-on-rails - Rails 嵌套属性 - URL 错误

> ID：10643404
> 
> 赞同：0
> 
> 时间：2012-05-17T20:57:20.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我正在做一个小任务来创建帖子并按类别划分它们。我一切正常，但在我的 index.html 中，我收到以下与我的链接相关的路由错误。

```
No route matches {:action=>"show", :controller=>"posts"}
No route matches {:action=>"edit", :controller=>"posts"}
undefined method `post_path' for #<#<Class:0x007fd3097f0ce0>:0x007fd3097c9370> 
```

在 posts/index.html.haml 我有：

```
 - @category.posts.each do |post|
        %tr
          %td= post.title
          %td= post.description
          %td= post.user_id
          %td= post.category_id
          %td= link_to 'Show', category_post_path //gives first error
          %td= link_to 'Edit', edit_category_post_path //gives second error
          %td= link_to 'Destroy', post, 
          :confirm => 'Are you sure?', :method => :delete //gives third error 
```

在 routes.rb 我有：

```
resources :categories do
    resources :posts
  end 
```

当我运行 rake 路线时，我得到：

```
categories_index  GET    /categories/index(.:format)    categories#index                
category_posts    GET    /categories/:category_id/posts(.:format)     posts#index
                  POST   /categories/:category_id/posts(.:format)          posts#create
new_category_post GET    /categories/:category_id/posts/new(.:format)      posts#new
edit_category_postGET    /categories/:category_id/posts/:id/edit(.:format) posts#edit
category_post     GET    /categories/:category_id/posts/:id(.:format)      posts#show
                  PUT    /categories/:category_id/posts/:id(.:format)      posts#update
                  DELETE /categories/:category_id/posts/:id(.:format)      posts#destroy 
```

我的索引中有问题导致应用程序崩溃，因为我可以毫无问题地访问和查看这些内容：

```
/categories/:category_id/posts/:id (equivalent to show)
/categories/:category_id/posts/:id/edit (equivalent to edit) 
```

有人可以帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:10:59.253

URL 助手需要知道您对哪个类别和帖子感兴趣，因此您必须将特定类别和帖子对象作为参数传递给助手。我认为这些应该有效：

```
 %td= link_to 'Show', category_post_path(@category,post) //gives first error
      %td= link_to 'Edit', edit_category_post_path(@category,post) //gives second error 
```

# ssis - 如何检查 SSIS 自定义转换中的下游组件？

> ID：10643408
> 
> 赞同：1
> 
> 时间：2012-05-17T20:57:49.103
> 
> 标签：ssis

我正在开发一个具有 4 个异步输出的自定义 SSIS 组件。它工作得很好，但现在我有一个用户请求增强，我不知道如何处理它。他们希望在另一个上下文中使用该组件，其中 4 个输出中只有 2 个将被明确定义。我愚蠢地说这对我来说是微不足道的，我打算看看这两个“未定义”的流是否连接，如果没有，那么我会跳过那部分处理。

我的问题是我无法确定在运行时是否连接了输出，我曾希望输出管道或输出缓冲区会丢失。看起来情况并非如此。即使它们没有连接，输出和缓冲区也存在。

有谁知道我应该在哪里查看输出是否有下游消费者？

谢谢！

**编辑**：我永远无法弄清楚如何可靠地做到这一点，所以我最终使这种行为可由用户配置。它不像我希望的那样是自动的，但是我发现 BIDS 环境和 DTExec 环境之间的差异使我得出结论，一个组件可能不应该对其嵌入的组件图做出假设。

# c# - 我怎样才能将私有变量的访问权限授予另一个类而不是程序员？

> ID：10643409
> 
> 赞同：2
> 
> 时间：2012-05-17T20:57:49.700
> 
> 标签：c#

我什至不太确定如何表达我的问题，所以我将举例说明。我想要相当于：

```
public class OuterClass 
{
   public InnerClass DoStuff(InnerClass this_class) 
     {
          this_class.number = 5;
          return this_class;
     }

   public class InnerClass
     {
          private int number = 0;
     }

} 
```

我有一个内部类，程序员可以在其中设置一些变量等，但它也有一些他们不应该接触或需要知道的内部变量。外部类与内部类的实例一起工作，它需要了解这些内部变量。我可以想出一些更复杂的方法来实现我想要的，但我很好奇，有没有办法完成我在 C# 中得到的要点？或者只是不可能。

编辑：作为一个实际的例子，这是我使用的通用通信协议（套接字通信）。有一个套接字包装类（OuterClass），您创建一个消息类（InnerClass），在其中设置一些东西，然后将其交给处理所有内部内容的套接字包装器。Message 类具有套接字包装器设置和使用的一些内部数据，我希望我可以在原始类中拥有这些数据，而不必使用不同的内部类来存储它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T21:02:28.750

我认为您想说“可以访问我的另一个课程，但不能访问我的程序集之外的课程”。

简单的解决方案是将内部类字段声明为`internal`，而不是私有的。您在同一个程序集中的类可以访问它们，但外部的类不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:00:59.370

只需声明`InnerClass`为`private`. 外面的任何人`OuterClass`都无法访问它。

如果要传递实例，请从公共类或接口继承，如下所示：

```
class OuterClass
{
    public abstract class AbstractInnerClass { ... };
    private class InnerClass: AbstractInnerClass { ... };

    public AbstractInnerClass DoStuff(AbstractInnerClass this_class)
    {
        InnerClass real_class = (InnerClass)this_class;
        ... do your stuff ...
    }
} 
```

对外来说，只是`AbstractInnerClass`存在，而且`InnerClass`只是一个实现细节。

# iphone - GSEvent 和多个手指

> ID：10643410
> 
> 赞同：0
> 
> 时间：2012-05-17T20:57:52.927
> 
> 标签：iphone, jailbreak

我通过挂钩 sendEvent 成功地使用 GSEvent 监控原始触摸。当涉及多个手指时，如何提取触摸信息？

更新 1：iOS 5.01

更新 2：我设法通过检查传递的事件中包含的 allTouches 集来做到这一点。它工作正常，但是当手势识别器启动 4 或 5 个手指事件时会陷入困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:03:06.923

你是对的。通过重写 sendEvent: 方法，然后从 UIEvent 中获取 GSEvent，您可以获取您正在寻找的底层系统信息。您可以查看 GSEvent 记录中的“infoSize”字段，它应该告诉您该事件涉及多少次触摸……但是为什么要使用 GSEvent？你可以在你的应用程序中放一个大的 UIView，将它的多点触摸交互属性设置为 YES，覆盖它的 sendEvent 方法，你应该在那里得到每一个触摸，甚至是 4 和 5 手指手势。您可以转发对您不重要的触摸，不要转发不重要的触摸。

希望这可以帮助。

# php - 带参数的正确数组（&$this）语法

> ID：10643411
> 
> 赞同：-1
> 
> 时间：2012-05-17T20:57:55.313
> 
> 标签：php, oop

以下面的代码示例为例：

```
<?php
    class A {

        public function aa() {
            $output = (array(&$this, 'ab'), $post_id);
            return $output;
        }

        public function ab( $post_id ) {
            //do stuff
        }

    }
?> 
```

调用包含附加参数的方法 ab 的正确方法是`$post_id`什么？

我知道这`$output`条线不起作用，但这就是我坚持的线。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:01:31.863

就这样：

```
$output = $this->ab($post_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:06:07.650

尝试这个 。可能这会有所帮助。

```
<?php
class A {

    public function aa() {
        $args = func_get_args();
        $output = call_user_func_array(array($this,'ab'),$args);
        // But this way the "ab" function have to be private
        // Or you can simply do $output = $this->ab($post_id)
        return $output;
    }

    public function ab( $post_id ) { 
        //do stuff
    }

}
$a = new A();
$a->aa(162);

?> 
```

# c++ - 使用 z/OS XL C/C++ 通过更好的内存管理来提高性能

> ID：10643420
> 
> 赞同：0
> 
> 时间：2012-05-17T20:58:39.577
> 
> 标签：c++, performance, memory, memory-management, microsoft-runtime-library

我希望在一个使用大量矩阵的程序中改进内存管理。我想在一个缓存行中使用运行时解析的字节数。z/OS XL C/C++ 中有一个函数`sysconf()`可以做到这一点。

我这个运行时库是第三方库，在商业软件中可以免费使用吗？它适用于 Windows Visual Studio 2010 吗？

你知道很好的参考扩展教程[http://www.akkadia.org/drepper/cpumemory.pdf](http://www.akkadia.org/drepper/cpumemory.pdf)中第 6 部分的内容，关于开发人员应该做些什么来在内存管理中考虑硬件（或提高科学计算的性能考虑到这一点的 C++ 应用程序）？

谢谢并恭祝安康

# javascript - 如何将工具提示添加到 svg 图形？

> ID：10643426
> 
> 赞同：110
> 
> 时间：2012-05-17T20:58:54.453
> 
> 标签：javascript, svg, d3.js, tooltip

我有一系列 svg 矩形（使用 D3.js），我想在鼠标悬停时显示一条消息，该消息应该被一个充当背景的框包围。它们都应该彼此完美对齐，并与矩形（顶部和居中）对齐。做这个的最好方式是什么？

我尝试使用“x”、“y”、“width”和“height”属性添加一个 svg 文本，然后在前面添加一个 svg rect。问题是文本的参考点在中间（因为我希望它居中对齐，所以我使用`text-anchor: middle`了），但是对于矩形，它是左上角坐标，加上我想要在文本周围留一点边距，这使它有点一种痛苦。

另一种选择是使用 html div，这很好，因为我可以直接添加文本和填充，但我不知道如何获取每个矩形的绝对坐标。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-05-17T21:06:16.947

你能简单地使用[SVG`<title>`元素](http://www.w3.org/TR/SVG/struct.html#DescriptionAndTitleElements)和它所传达的默认浏览器渲染吗？（注意：这和你可以在 html 中的 div/img/spans 上**使用**的`title`属性不同，它需要是一个名为的子*元素*`title`）

```
rect {
  width: 100%;
  height: 100%;
  fill: #69c;
  stroke: #069;
  stroke-width: 5px;
  opacity: 0.5
}
```

```
<p>Mouseover the rect to see the tooltip on supporting browsers.</p>

<svg xmlns="http://www.w3.org/2000/svg">
  <rect>
    <title>Hello, World!</title>
  </rect>
</svg>
```

或者，如果你真的想在你的 SVG 中显示 HTML，你可以直接嵌入 HTML：

```
rect {
  width: 100%;
  height: 100%;
  fill: #69c;
  stroke: #069;
  stroke-width: 5px;
  opacity: 0.5
}

foreignObject {
  width: 100%;
}

svg div {
  text-align: center;
  line-height: 150px;
}
```

```
<svg xmlns="http://www.w3.org/2000/svg">
  <rect/>
  <foreignObject>
    <body xmlns="http://www.w3.org/1999/xhtml">
      <div>
        Hello, <b>World</b>!
      </div>
    </body>      
  </foreignObject>
</svg>
```

…但是你需要 JS 来打开和关闭显示。如上所示，使标签出现在正确位置的一种方法是将 rect 和 HTML 包装在同一`<g>`位置，从而将它们放在一起。

要使用 JS 查找 SVG 元素在屏幕上的位置，可以使用`getBoundingClientRect()`，例如[http://phrogz.net/svg/html_location_in_svg_in_html.xhtml](http://phrogz.net/svg/html_location_in_svg_in_html.xhtml)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2018-05-26T14:52:07.937

我发现的唯一好方法是使用 Javascript 来移动工具提示`<div>`。显然，这只有在 HTML 文档中有 SVG 时才有效——不是独立的。它需要Javascript。

```
function showTooltip(evt, text) {
  let tooltip = document.getElementById("tooltip");
  tooltip.innerHTML = text;
  tooltip.style.display = "block";
  tooltip.style.left = evt.pageX + 10 + 'px';
  tooltip.style.top = evt.pageY + 10 + 'px';
}

function hideTooltip() {
  var tooltip = document.getElementById("tooltip");
  tooltip.style.display = "none";
}
```

```
#tooltip {
  background: cornsilk;
  border: 1px solid black;
  border-radius: 5px;
  padding: 5px;
}
```

```
<div id="tooltip" display="none" style="position: absolute; display: none;"></div>

<svg>
  <rect width="100" height="50" style="fill: blue;" onmousemove="showTooltip(evt, 'This is blue');" onmouseout="hideTooltip();" >
  </rect>
</svg>
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-17T21:06:19.923

您可以使用标题元素，如 Phrogz 所示。还有一些不错的工具提示，例如 jQuery 的 Tipsy [http://onehackoranother.com/projects/jquery/tipsy/](http://onehackoranother.com/projects/jquery/tipsy/)（可用于替换所有标题元素）、Bob Monteverde 的 nvd3 甚至 Twitter 的 Bootstrap 的工具提示[http:// twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-11-11T15:30:56.553

在svg上，写标题的正确方法

```
<svg>
  <title id="unique-id">Checkout</title>
</svg> 
```

在此处查看更多详细信息[https://css-tricks.com/svg-title-vs-html-title-attribute/](https://css-tricks.com/svg-title-vs-html-title-attribute/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-17T21:09:25.840

我的设置总是使用通用的 CSS 标题。我只是为我的博客管理页面构建分析。我不需要任何花哨的东西。这是一些代码...

```
let comps = g.selectAll('.myClass')
   .data(data)
   .enter()
   .append('rect')
   ...styling...
   ...transitions...
   ...whatever...

g.selectAll('.myClass')
   .append('svg:title')
   .text((d, i) => d.name + '-' + i); 
```

还有chrome的截图...

[![在此处输入图像描述](../Images/82b588a2eacb496b79ddfdc317da0168.png)](https://i.stack.imgur.com/cuXW8.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-01T07:56:58.687

我想出了一些只使用 HTML + CSS 的东西。希望对你有帮助

```
.mzhrttltp {
  position: relative;
  display: inline-block;
}
.mzhrttltp .hrttltptxt {
  visibility: hidden;
  width: 120px;
  background-color: #040505;
  font-size:13px;color:#fff;font-family:IranYekanWeb;
  text-align: center;
  border-radius: 3px;
  padding: 4px 0;
  position: absolute;
  z-index: 1;
  top: 105%;
  left: 50%;
  margin-left: -60px;
}

.mzhrttltp .hrttltptxt::after {
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #040505 transparent;
}

.mzhrttltp:hover .hrttltptxt {
  visibility: visible;
}
```

```
<div class="mzhrttltp"><svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="#e2062c" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg><div class="hrttltptxt">علاقه&zwnj;مندی&zwnj;ها</div></div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-17T11:46:09.160

我将[heroicons](https://heroicons.com/)用于我正在从事的项目。（这是 JSX 格式）我将使用此代码处理工具提示问题。

```
<svg className="h-6 w-6">
        <title>{reasons.join(" ")}</title>
        <QuestionMarkCircleIcon className={style} />
      </svg> 
```

# asp.net-mvc-3 - 如何获得与 EF 4.x DBSet Context 和 IEqualityComparer 一起使用的 Distinct 列表？

> ID：10643427
> 
> 赞同：1
> 
> 时间：2012-05-17T20:58:54.890
> 
> 标签：asp.net-mvc-3, entity-framework, iequalitycomparer

我已经尝试了几个小时来让 Distinct 为我的代码工作。

我正在使用 EF 4.3、MVC3、Razor 并尝试获取产品 ID 和名称的列表。当我对数据库运行 Sql 查询时，它很好。

Sql 查询是

```
SELECT DISTINCT [ProductId]
      ,[Product_Name]
  FROM [dbo].[PRODUCT] 
```

该表中唯一的另一列是国家代码，这就是标准 distinct() 不起作用的原因。

我已经创建了一个 IEqualityComparer

这是代码：

```
public class DistinctProduct : IEqualityComparer<PRODUCT>
    {
        public bool Equals(PRODUCT x, PRODUCT y)
        {
            return x.ProductId.Equals(y.ProductId);
        }

        public int GetHashCode(PRODUCT obj)
        {
            return obj.ProductId.GetHashCode();
        }
    } 
```

这是我叫它的地方。

```
IEqualityComparer<PRODUCT> customComparer = new DistinctProduct();
IEnumerable<PRODUCT> y = db.PRODUCTs.Distinct(customComparer); 
```

但是当它到达最后一行时，我得到一个错误说明......

```
LINQ to Entities does not recognize the method 'System.Linq.IQueryable`1[MyService.Models.PRODUCT] Distinct[PRODUCT](System.Linq.IQueryable`1[MyService.Models.PRODUCT], System.Collections.Generic.IEqualityComparer`1[MyService.Models.PRODUCT])' method, and this method cannot be translated into a store expression. 
```

谁能告诉我我做错了什么？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:44:30.033

有什么理由你不能使用像下面这样的独特的吗？

```
var distinctProdcts = (from p in db.PRODUCTs
                       select new { 
                           ProductId = p.ProductId, 
                           Product_Name = p.ProductName 
                      }).Distinct(); 
```

这将在您执行 distinct 之前从查询中删除国家/地区代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T23:55:37.380

Entity Framework 正在尝试将您的查询转换为 SQL 查询。显然它不知道如何翻译 IEqualityComparerer。我认为问题是您是否要在数据库中执行 Distinct（在这种情况下，您的客户端只会获得过滤的结果），或者您可以将所有数据带到客户端并在客户端上选择 distinct。如果您希望在数据库端进行过滤（这将使您的应用程序性能更好）并且您希望能够使用不同的策略进行比较，您可以提出在查询之上构建不同标准的代码。如果您可以将数据带到客户端（请注意，它可能是**很多**数据），您应该可以这样做（.ToList() 将触发查询数据库并实现结果）：

```
IEnumerable<PRODUCT> y = db.PRODUCTs.ToList().Distinct(customComparer); 
```

# c# - SQL - OleDbCommand 不更新数据库

> ID：10643429
> 
> 赞同：1
> 
> 时间：2012-05-17T20:59:04.833
> 
> 标签：c#, sql, oledb, ole

我正在使用 OleBdCommand 将记录插入 Db，但更新永远不会持续存在。

这是代码

```
 public void InsertCandidate(XElement element, ref OleDbDataAdapter adapter, OleDbConnection sqlConnStr)
    {
        if (sqlConnStr.State == ConnectionState.Broken || sqlConnStr.State == ConnectionState.Closed)
            sqlConnStr.Open();

        try
        {
            string query = "Insert Into Candidate Values(@priKey, @Name, @LName, @Phone, @Add)";
            OleDbCommand InsertCandidate = new OleDbCommand(query, sqlConnStr);
            InsertCandidate.Parameters.AddWithValue("priKey", element.Attribute("CAND_NUM").Value);
            InsertCandidate.Parameters.AddWithValue("Name", element.Attribute("CAND_FNAME").Value);
            InsertCandidate.Parameters.AddWithValue("LName", element.Attribute("CAND_LNAME").Value);
            InsertCandidate.Parameters.AddWithValue("Phone", element.Attribute("CAND_PHONE").Value);
            InsertCandidate.Parameters.AddWithValue("Add", element.Attribute("CAND_ADDRESS").Value);
            InsertCandidate.ExecuteNonQuery();
        }
        catch (OleDbException ex)
        {
            MessageBox.Show("A Error occured whilst trying to execute the command.\n" + ex.Message);
        }
    } 
```

不会产生异常、错误或异常！

任何建议

米

* * *

我什至试过这个。

```
 //InsertCandidate.ExecuteNonQuery();
            adapter.InsertCommand = InsertCandidate;
            adapter.InsertCommand.ExecuteNonQuery(); 
```

***谢谢每一位 ***

艾登的代码有效，但我应该更好地阅读托尼的帖子，因此我接受了他的回答（他先说了）

亲切的问候

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:05:20.843

您是否在与代码隔离的情况下执行 SQL 语句以确保其正常工作？

由于您没有发布表定义，可能是因为您没有在`insert`语句中指定字段。

我不是 OLEDB 专家，但我可以在网上找到的所有示例都使用问号代替参数。试试这样的 SQL 语句：

```
string query = "Insert Into Candidate Values(?, ?, ?, ?, ?)"; 
```

**更新**

查看 OleDBCommand 的文档，它只会在发生错误时抛出一个`InvalidOperationException`而不是一个。`OleDbException`您应该添加此异常处理程序，看看是否可以为您提供更多信息。

或者更改您的异常处理程序以捕获泛型`Exception`类型，以查看您是否甚至收到异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T22:42:42.680

```
 string query = "Insert Into Candidate Values(?, ?, ?, ?, ?)";
            OleDbCommand InsertCandidate = new OleDbCommand(query, sqlConnStr);
            InsertCandidate.Parameters.AddWithValue("@?", element.Attribute("CAND_NUM").Value);
            InsertCandidate.Parameters.AddWithValue("@?", element.Attribute("CAND_FNAME").Value);
            InsertCandidate.Parameters.AddWithValue("@?", element.Attribute("CAND_LNAME").Value);
            InsertCandidate.Parameters.AddWithValue("@?", element.Attribute("CAND_PHONE").Value);
            InsertCandidate.Parameters.AddWithValue("@?", element.Attribute("CAND_ADDRESS").Value);
            //InsertCandidate.ExecuteNonQuery();
            adapter.InsertCommand = InsertCandidate;
            adapter.InsertCommand.ExecuteNonQuery(); 
```

这会奏效！

# c# - 将字节数组作为新程序执行

> ID：10643430
> 
> 赞同：5
> 
> 时间：2012-05-17T20:59:09.803
> 
> 标签：c#, bytearray

我正在创建一个程序来查看是否可以在 C# 中运行字节数组。

该程序应获取一个字节数组“MyBinaryData”并将其作为新程序加载+运行。将有一个文本框，您可以在其中输入字节以查看结果（这是一个实验；））。我试过这个：

```
 byte[] binaryData = System.IO.File.ReadAllBytes("MyBytes.txt");  // the bytes are in a .txt file for simple tests before becoming a textbox.
 Assembly LoadByte = Assembly.Load(binaryData);
        MethodInfo M = LoadByte.EntryPoint;

        if (M != null)
        {                object o = LoadByte.CreateInstance(M.Name);
            M.Invoke(o, new Object[] { null });  // this gives the error
        } 
        else {  
         ..... fail code here.... 
             } 
```

问题是它给出了这个错误：“System.Reflection.TargetInvocationException:......SetCompatibleTextRenderingDefault 必须在应用程序中创建第一个 IWin32Window 对象之前调用。”

我的第二个测试是：

```
 Assembly assembly = Assembly.Load(binaryData);

 Type bytesExe = assembly.GetType(); // problem: the GetType(); needs to know what class to run.
 Object inst = Activator.CreateInstance(bytesExe); 
```

但这需要知道它需要运行的字节数组中的哪个类。

然后我尝试了：

```
var bytes = Assembly.Load(binaryData);
var entryPoint = bytes.EntryPoint;
var commandArgs = new string[0];
var returnValue = entryPoint.Invoke(null, new object[] { commandArgs }); 
```

但它给了我这个：“System.Reflection.TargetInvocationException：调用目标引发了异常。---> System.InvalidOperationException：必须在应用程序中创建第一个 IWin32Window 对象之前调用 SetCompatibleTextRenderingDefault。”

我的 program.cs 是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Crypter
{
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form2());
    }
} 
```

}

我还有什么其他方法可以打开整个程序？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:06:59.377

你有两种方式

第一种方法是从那个字节数组中制作 .exe 然后启动它

第二次看这个[执行字节数组](https://stackoverflow.com/questions/959087/is-it-possible-to-execute-an-x86-assembly-sequence-from-within-c/959144#959144)

# iphone - 苹果 4 VS。4s wifi数据上传速度差异

> ID：10643431
> 
> 赞同：1
> 
> 时间：2012-05-17T20:59:10.010
> 
> 标签：iphone, ios, upload, wifi

我看到 4 和 4s 之间的上传速度存在显着差异。通过 FTP 上传一个 50MB 的文件时，我看到了大约 125KB 的差异，而且 4s 完成上传的时间要少一分钟。我应该注意到 4 在 iOS 5.0 上，而 4s 在 5.1 上。我在这里读到[http://www.anandtech.com/show/4971/apple-iphone-4s-review-att-verizon/9](http://www.anandtech.com/show/4971/apple-iphone-4s-review-att-verizon/9) 4s 有一些重大的 wifi 升级，但基准仅供下载。有没有人对此有解释，或者仅仅是芯片升级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:10:39.723

我认为它可能是升级处理器。这也可能是手机连接到互联网时操作方式的升级。

# windows - 批处理脚本条件下的 PowerShell 命令

> ID：10643432
> 
> 赞同：1
> 
> 时间：2012-05-17T20:59:13.923
> 
> 标签：windows, powershell, batch-file

我需要一行脚本来做这样的事情：

`if (results from PowerShell command not empty) do something`

PowerShell 命令基本上是

`powershell -command "GetInstalledFoo"`

我试过`if (powershell -command "GetInstalledFoo" != "") echo "yes"`但得到错误`-command was unexpected at this time.`这可能实现吗？该命令最终将作为`cmd /k`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T22:23:16.837

只要至少一行输出不以 FOR /F eol 字符（默认为`;`）开头并且不完全由分隔符字符（默认为空格和制表符）组成，BartekB 的答案就有效。使用适当的 FOR /F 选项，可以使其始终有效。

但这里有一种更简单（我相信更快）的方法来处理应该始终有效的多行输出。

```
for /f %%A in ('powershell -noprofile -command gwmi win32_process ^| find /v /c ""') do if %%A gtr 0 echo yes 
```

另一种选择是使用临时文件。

```
powershell -noprofile -command gwmi win32_process >temp.txt
for %%F in (temp.txt) if %%~zF gtr 0 echo yes
del temp.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T05:44:07.673

第三种方式：从您的 PowerShell 脚本中设置一个环境变量并在您的批处理文件中对其进行测试？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:15:05.513

我想如果不是最好的解决方案。我会`for /f`改用：

```
for /f %R in ('powershell -noprofile -command echo foo') do @echo bar 
```

那应该给你“酒吧”，而这个：

```
for /f %R in ('powershell -noprofile -command $null') do @echo bar 
```

... 不应该。在实际的 .bat/ .cmd 文件中，您必须加倍 % (%%R)

或者更好的是，如果您不想返回很多酒吧...：

```
(for /f %R in ('powershell -noprofile -command gwmi win32_process') do @echo bar) | find "bar" > nul && echo worked 
```

# .htaccess - 使用 htaccess 重写规则进行多域重定向

> ID：10643433
> 
> 赞同：2
> 
> 时间：2012-05-17T20:59:14.180
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在寻找一种将所有旧域重定向到新域的方法，

似乎它们在基本级别被重定向，但是当涉及子类别或永久链接时，根本没有重定向。

```
 Options +FollowSymLinks 
    RewriteEngine on

    RewriteCond %{HTTP_HOST} (www\.)?mydomain1\.com$ [NC]
    RewriteCond %{HTTP_HOST} (www\.)?mydomain2\.com$ [NC]
    RewriteCond %{HTTP_HOST} (www\.)?mydomain3\.com$ [NC]
    RewriteCond %{HTTP_HOST} (www\.)?mydomain4\.com$ [NC]
    RewriteCond %{HTTP_HOST} (www\.)?mydomain5\.com$ [NC]
    RewriteCond %{HTTP_HOST} (www\.)?mydomain6\.com$ [NC]

    RewriteRule ^(.*) http://www.mydomain7.com/$1 [QSA,L,R=301] 
```

基本级别重定向很好：mydomain1.com/graph.php = > mydomain7.com

但即使在这个级别它也不能重定向到同一页面

更重要的是永久链接：

mydomain1.com/users/13/James => 无重定向

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T21:06:59.703

最干净的解决方案是重定向任何不是 www.mydomain7.com 的域

```
RewriteCond %{HTTP_HOST} !^www\.mydomain7\.com$ [NC]
RewriteRule ^(.*) http://www.mydomain7.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:29:57.843

默认情况下，所有 RewriteCond 都被 ANDed 在一起，因此您的规则将不起作用，因为 value`%{HTTP_HOST}`不能同时是所有这些域。

要么按照 Gerben 的建议使用否定，要么像这样重写你的代码：

```
RewriteCond %{HTTP_HOST} ^(www\.)?(mydomain1|mydomain2|mydomain3|mydomain4|mydomain5|mydomain6)\.com$ [NC]
RewriteRule ^ http://www.mydomain7.com%{REQUEST_URI} [L,R=301] 
```

# extjs4.1 - 如何冻结/锁定 ExtJs 网格中的单行？

> ID：10643435
> 
> 赞同：4
> 
> 时间：2012-05-17T20:59:20.333
> 
> 标签：extjs4.1

我希望能够冻结/锁定网格中的最后一行，以便在垂直滚动时始终在底部可见，就像对列可以这样做一样，例如：[http ://docs.sencha.com/ ext-js/4-1/#!/example/grid/locking-grid.html](http://docs.sencha.com/ext-js/4-1/#!/example/grid/locking-grid.html)。有没有办法在 Ext 中这样做？感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-22T13:45:12.657

在网格配置中，您可以在其中指定插件

```
features: [{
    ftype: 'summary',
    dock: 'top'
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T19:05:25.660

我可能会很晚才来到这里，但是在网上找不到任何东西之后，我认为如果我发布我的发现会很好。从 extjs4.2 开始，一个名为“dock”的配置选项可以完成这项工作。所以：`dock: 'bottom'`这将是完美的，同样适用`'top'`！

# c# - 调用restful webservice时出现（500）内部服务器错误

> ID：10643436
> 
> 赞同：0
> 
> 时间：2012-05-17T20:59:47.250
> 
> 标签：c#, httpwebrequest

当我运行下面的代码时，我收到错误，例如 ex = {“远程服务器返回错误：(500) 内部服务器错误。”} 谁能帮我解决这个问题...

```
 HttpWebRequest request = WebRequest.Create("http://project.i-engage.org/tasks/webservices/bugnetservices.asmx/GetCategories?ProjectID=17") as HttpWebRequest;
    request.Credentials = new NetworkCredential("rolland", "409cleaner");
    request.ContentType = "application / json; charset = utf - 8";
    request.Method = "POST";

    using (Stream stm = request.GetRequestStream())
    {
        using (StreamWriter stmw = new StreamWriter(stm))
        {
            stmw.Write(soap);
        }
    }

    // Get response  
    using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
    {
        // Get the response stream  
        StreamReader reader = new StreamReader(response.GetResponseStream());
        // Console application output  
        Console.WriteLine(reader.ReadToEnd());
    } 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-20T20:43:15.197

它与网络服务的问题......他们没有返回身份验证cookie..现在它工作正常。

# xna - XNA Texture2D.FromStream 不保留完全透明像素中的颜色

> ID：10643439
> 
> 赞同：0
> 
> 时间：2012-05-17T21:00:03.530
> 
> 标签：xna

当 alpha 设置为 0 时，我仍在使用纹理中的颜色信息。PNG 文件正确保存并保留了颜色。如果我使用内容管道并将其设置为非预乘，一切正常。Texture2D.FromStream 被记录为非预乘，但它正在消除颜色。在 PIX 中调试并查看纹理时，所有具有 0 alpha 的像素都设置为黑色。

有没有办法可以绕过内容管道并仍然保持透明像素的颜色？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T13:03:49.933

我现在无法提供太多帮助，因为我面前没有代码，但几天前我自己做了这件事，它具有预期的所有正确透明度。也许是你的形象有问题？我使用了使用 Paint.Net 保存的 PNG。

如这张图片[http://imgur.com/Qrqqo](http://imgur.com/Qrqqo)所示，船、树干和梯子都具有透明度，这允许它们位于第二层，并且使用 from stream（用户生成的内容 ftw）加载图块集本身。

因此，如果在我使用代码到达我的计算机之前没有人回答这个问题，那么我会看看我拥有什么并在需要时发布一个示例。

# ruby-on-rails - “table_structor”：找不到表“视图”

> ID：10643442
> 
> 赞同：0
> 
> 时间：2012-05-17T21:00:26.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

我第一次尝试使用 rails_admin 安装过程中出现以下错误：

```
'table_structor': Could not find table 'views' 
```

我从来没有一个名为“views”的模型，所以我什至不确定它为什么要找这个。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:20:18.423

检查您的模型文件夹。你可能有一个你没有使用的胭脂模型。

# java - 传递数组列表 到用 List 声明的方法

> ID：10643443
> 
> 赞同：24
> 
> 时间：2012-05-17T21:00:27.847
> 
> 标签：java, generics

我有一个包含泛型参数的方法。

```
public static void readList(List<ModelObject> list)
{
    // more code
} 
```

我想将一个`ArrayList`of `ModelObjectImplementation`s 传递给这个方法。

```
ArrayList<ModelObjectImplementation> myList;
myList = ...

readList(myList); // gives compilation error 
```

`ModelObject`是一个`ModelObjectImplementation`实现的接口。如何更改方法声明以允许这样做？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-17T21:04:42.330

如果您使用的是 Java 1.5 及更高版本，则可以使用通配符。

```
public static void readList(List<? extends ModelObject> list) 
```

这个解决方案更通用，因为它适用于所有`java.util.List`接口实现和`ModelObject`. 有关更多详细信息，请转到通配符[教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

# node.js - Mongoose：是否总是在嵌入文档的预保存挂钩之前执行父级的预保存挂钩？

> ID：10643444
> 
> 赞同：2
> 
> 时间：2012-05-17T21:00:28.203
> 
> 标签：node.js, mongodb, mongoose

正如标题所说：父文档的pre-save钩子总是在嵌入文档的pre-save钩子之前执行吗？

如果没有，是否有任何黑客来执行它？

用例：在嵌入文档的预保存挂钩中，我将一些计算字段存储到父级。

在父级的预保存挂钩中，我对此做了一些事情:)

**编辑**

我问是因为这些钩子的异步性质（？）测试几个实例可能无法回答我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:04:06.503

经过一些测试：看起来是这样。

# xml - 按名称获取子节点的 XMLList 的抽象方法

> ID：10643446
> 
> 赞同：0
> 
> 时间：2012-05-17T21:00:40.230
> 
> 标签：xml, actionscript-3, xml-parsing, e4x

我正在尝试构建一个抽象方法来按节点名称获取 XML 对象中的所有节点。我不提前知道 XML 的结构。

因此，使用此代码，我想获取所有“item”节点和所有“x”节点的列表：

```
var xml:XML = <root><items><item/><item/><item><x/><item><item><x/></item></items></root>
var nodeName:String;
var list:XMLList;

list = getNodeByName(xml, "item"); // contains no results
list = getNodeByName(xml, "x"); // contains no results

// what am i doing wrong here?
public static function getNodeByName(xml:XML, nodeName:String):XMLList {
     return xml.child(nodeName);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T06:33:47.400

正如方法名称所说，`child`只会返回`XML`与给定参数匹配的对象的子项列表。如果您想获取具有给定名称的对象的所有后代（孩子、孙子、曾孙等），`XML`您应该使用`descendants`方法：

```
public static function getNodeByName(xml:XML, nodeName:String):XMLList {
     return xml.descendants(nodeName);
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:39:35.513

您是否希望将来自不同父级的所有同名节点连接到一个 XML 结构中？在这种情况下，您可以这样做：

```
 public static function getNodesByName(myXML_:XMLList, nodeName_:String) : XMLList {
        var result:XMLList = new XMLList();
        for (var i1:Number = 0; i1 < myXML_.children().length(); i1++ ) {
            if (myXML_.children()[i1].name() == nodeName_) {
                result += myXML_.children()[i1].valueOf();
            } else if (myXML_.children()[i1].children()) { 
                result += getNodesByName(XMLList(myXML_.children()[i1].valueOf()), nodeName_);
            }
        }
        return result;
    } 
```

它将返回具有指定名称的所有节点的 XMLList。像这样使用它：

```
var nodesList:XMLList = getNodesByName(myXML.children(), "myNodeName").valueOf(); 
```

如果您想将该列表转换为 XML，则：

```
var myXMLListTurnedIntoXML:XML = XML("<xml></xml>");
myXMLListTurnedIntoXML.appendChild(getNodesByName(myXML.children(), "myNodeName").valueOf()); 
```

希望这会有所帮助。

# python - Django 应用程序的 Heroku 部署不成功

> ID：10643447
> 
> 赞同：2
> 
> 时间：2012-05-17T21:00:50.153
> 
> 标签：python, django, heroku

我正在尝试将 Django 应用程序部署到 Heroku，但是当我运行以下命令时出现这个奇怪的错误。

知道为什么会这样吗？我用谷歌搜索了它，但没有发现任何有用的东西。

```
root@ubuntu:~/Desktop/djangos/jobs# git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.154' to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

提前感谢您的任何提示/帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T05:56:23.193

I had same problem , Add your ssh key to heroku by `$ heroku keys:add` . check out my blogpost [http://www.codesucksmybrain.blogspot.com/2012/04/deploy-django-app-on-heroku-platform.html](http://www.codesucksmybrain.blogspot.com/2012/04/deploy-django-app-on-heroku-platform.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T21:12:24.737

首先，您应该登录。

```
$ heroku login
Enter your Heroku credentials.
Email: adam@example.com
Password: 
Could not find an existing public key.
Would you like to generate one? [Yn] 
Generating new SSH public key.
Uploading ssh public key /Users/adam/.ssh/id_rsa.pub 
```

此外，如果您登录，您应该尝试“ **git pull heroku master** ”，然后尝试“ **git push heroku master** ”。

[入门](https://devcenter.heroku.com/articles/quickstart)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:10:38.667

验证 SSH-KEY 的名称是否为“id_rsa”，并且密钥是您在此文件中信任的密钥，如果可以安全地重新创建密钥并将其保留为“id_rsa”名称

# java - 如何确定java程序在运行时是否以管理员身份运行

> ID：10643451
> 
> 赞同：2
> 
> 时间：2012-05-17T21:00:59.007
> 
> 标签：java, windows, windows-7, admin, administration

我有一个 java 程序，它将在 windows 上运行，我想以不同的方式运行它，这取决于程序是否以管理权限运行，而不是程序是否以普通用户身份运行。

我需要一个通用的解决方案，它可以适用于不同风格的 java（不仅仅是 oracle/sun 的版本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T14:26:04.467

我使用 reg 查询方法来确定当前程序是否是管理员访问权限。以下应该提供足够的信息，您可以根据需要对其进行修改。

```
 try {
        String command = "reg query \"HKU\\S-1-5-19\"";
        Process p = Runtime.getRuntime().exec(command);
        p.waitFor();                            // Wait for for command to finish
        int exitValue = p.exitValue();          // If exit value 0, then admin user.

        if (0 == exitValue) {
            System.out.println("admin user");
        } else {
            System.out.println("non admin user");
        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# python - 搜索字符串 regex 或 Python 的 find() 哪个更快？

> ID：10643452
> 
> 赞同：1
> 
> 时间：2012-05-17T21:00:59.460
> 
> 标签：python, xml, string-matching

我有一个 XML 字符串

```
<tags>
   <person1>dave jones</person1>
   <person2>ron matthews</person2>
   <person3>sally van heerden</person3>
   <place>tygervalley</place>
   <ocassion>shopping</ocassion>
</tags> 
```

我想使用“Sally Van Heerden”或“Tygervalley”等搜索词来搜索这个 xml 字符串

使用正则表达式查找此字符串中的术语是否更快，或者 Python 的 find() 方法是否足够快？我也可以使用 python 的元素树 XML 解析器进行搜索，然后构建 XML 树然后搜索它，但我担心它会太慢。

以上三个哪个最快？还有其他建议吗？

请记住，可以输入多个搜索词，并且还将搜索多个（数千个）XML 字符串。

更新：如何将 xml 字符串拆分为列表，删除所有特殊字符，然后将列表转换为一组以及一组搜索词。那么得到两组的交集呢？这会很快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:10:08.727

正则表达式要经过一个漫长的编译过程，然后按照一组复杂的规则搜索字符串。该`find`函数一次性遍历字符串。

`find`如果不需要模式，该功能将提供更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T23:15:38.027

老实说，我认为你必须有一些非常极端的速度要求才能成为你的瓶颈，但即使你这样做了，*你可以做出明智决定的唯一方法就是测试*。

这是一个开始，使用`find`/搜索该字符串以`re.findall`获得一个字符串。我怀疑这是否代表您的用例，但您需要确定您将运行哪些查询并测试这些查询。

```
% python -mtimeit "'<tags> <person1>dave jones</person1> <person2>ron matthews</person2> <person3>sally van heerden</person3> <place>tygervalley</place> <ocassion>shopping</ocassion> </tags>'.find('tygervalley')"
1000000 loops, best of 3: 0.279 usec per loop

% python -mtimeit "import re; re.findall('tygervalley', '<tags> <person1>dave jones</person1> <person2>ron matthews</person2> <person3>sally van heerden</person3> <place>tygervalley</place> <ocassion>shopping</ocassion> </tags>')"
100000 loops, best of 3: 2.65 usec per loop 
```

就像我说的那样，很难想象这种差异是您程序中最重要的瓶颈。

# ruby-on-rails - 为什么它告诉我方法内容未定义？

> ID：10643454
> 
> 赞同：0
> 
> 时间：2012-05-17T21:01:01.083
> 
> 标签：ruby-on-rails

我正在尝试向此应用添加消息回复：[https ://github.com/railstutorial/sample_app_2nd_ed](https://github.com/railstutorial/sample_app_2nd_ed)

但是我不断收到错误消息：以下部分的未定义方法“内容”（第 17 行）。

```
<li>
  <span class="content"><%= micropost.content %></span>

  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>

  <span>
  <h>Comments</h>
  <% @micropost.comments.each do |c| %>
    <p>
      <%=h c.content %>
    </p>
  <% end %>
  </span>

  <span>
  <%= form_for(@comment) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, :cols => "20", :rows => "2", placeholder: "Compose new comment..." %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
  <% end %>
  </span>
</li> 
```

这没有任何意义，因为例如第 2 行没有问题，而且我没有在我的 micropost 控制器或其他任何地方明确定义方法内容。我应该在哪里定义内容，我应该怎么做？

这是我的评论模型的代码

```
class Comment < ActiveRecord::Base
  attr_accessible :content
  belongs_to :micropost

  validates :content, presence: true, length: { maximum: 140 }

  validates :micropost_id, presence: true

  default_scope order: 'comments.created_at DESC'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:05:55.417

它试图调用`content`评论，因此评论模型需要有一个`content`实例方法。

第 2 行调用 on 方法`@micropost`，它看起来是不同类的实例。

# asp.net-mvc - MultiSelectList SelectedValues，不适用于mvc3

> ID：10643455
> 
> 赞同：2
> 
> 时间：2012-05-17T21:01:13.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3, listbox, viewbag

调试我得到这个： ![在此处输入图像描述](../Images/1939b3c978ab7dbe25693f991e41abe9.png)

因此，User_SportsList 是一个 MultiSelectList，具有正确的 Items 和正确的 SelectedValues。

我传递给这样的视图：

```
ViewBag.usl = User_SportsList; 
```

在我看来，我有这个：

```
@Html.ListBox("UserSports", ViewBag.usl as MultiSelectList) 
```

并显示包含所有项目的列表，但 SelectedValues 不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:23:23.787

*SelectedValues*属性需要包含一个值数组（其中“值”由*DataValueField*定义），而不是项目本身。因此，在此示例中，您应该将 SelectedValues 设置为：

```
User_SportsList.SelectedValues = new [] { 3, 4 }; 
```

# asp.net - 如何将 ASP.NET Membership Provider 与 Oracle 一起使用？

> ID：10643456
> 
> 赞同：0
> 
> 时间：2012-05-17T21:01:17.673
> 
> 标签：asp.net, oracle, asp.net-membership, oracle11g

我正在.NET 3.5 中开发一个带有 Oracle 11g 后端的 ASP.NET 应用程序。我发现的所有示例都需要 Oracle.Web.dll

什么安装有这个文件，是否有 .NET 3.5 的示例？

谢谢，格雷格

# c# - WCF 绑定与 SOAP HTTPS 和双工

> ID：10643463
> 
> 赞同：2
> 
> 时间：2012-05-17T21:01:37.917
> 
> 标签：c#, wcf, soap, https, duplex

我发现自己需要找到一个使用 HTTPS/SOAP 并且必须是双工的 WCF 绑定。我以前以编程方式使用 NetTcpBinding，但现在绑定必须是 HTTPS/SOAP。我做了一些研究，似乎不创建自己的 CustomBinding 是不可能的。

但是我有点不知所措（对绑定和设置不太熟悉）。我似乎无法获得所需的正确绑定元素：

```
 public class CustomHttpsBinding : CustomBinding
    {
        public CustomHttpsBinding() 
        {
        }

        public override BindingElementCollection CreateBindingElements()
        {
            ReliableSessionBindingElement https = new ReliableSessionBindingElement();

            SecurityBindingElement security = SecurityBindingElement.CreateCertificateOverTransportBindingElement();

            CompositeDuplexBindingElement duplex = new CompositeDuplexBindingElement();

            SslStreamSecurityBindingElement ssl = new SslStreamSecurityBindingElement();

            MessageEncodingBindingElement encoding = new GZipMessageEncodingBindingElement((MessageEncodingBindingElement)  new BinaryMessageEncodingBindingElement());

            HttpsTransportBindingElement transport = new HttpsTransportBindingElement();

            return new BindingElementCollection(new BindingElement[] { https, security, duplex, ssl, encoding, transport });

        } 
```

当检查肥皂超过安全传输要求时，它给了我一个无效的操作异常，说我的合同配置了需要完整性和机密性的身份验证模式。然而，传输不能提供完整性和机密性。

好像我的 HttpsTransportBindingElement 不正确？我不确定。

谢谢

编辑：

我确实设法让 WSDualHttpBinding 在某一时刻工作，但它似乎无法使用 HTTPS（以及互联网上的其他人说它甚至不应该使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T01:07:27.003

HTTP 不是双工协议 - 它的请求/响应 - 这就是 wsDualHttpBinding 使用两个连接的原因 - 每个方向一个。Silverlight 通过在后台轮询来自客户端的消息来实现 HTTP 上的双工

NetTcpBinding 使用 TCP，它可以很高兴地是双工的

如果您可以等到今年晚些时候发布 4.5，这有 NetHttpBinding 使用 WebSocket 协议进行双工

# java - 套接字杀死后维护服务器

> ID：10643469
> 
> 赞同：0
> 
> 时间：2012-05-17T21:02:01.210
> 
> 标签：java

所以我有这个简单的服务器。当我杀死客户端套接字（telnet - >结束进程）时，我想要做的是保持服务器运行并等待另一个客户端。

```
private ServerSocket serv;

public Server() throws IOException {

    try {
        serv = new ServerSocket(port);
        serv.setReuseAddress(true);

        while(true) {
            Socket sock = serv.accept();

            try {
                BufferedReader netIn = new BufferedReader(new InputStreamReader(sock.getInputStream()));
                PrintWriter netOut = new PrintWriter(new BufferedWriter(new OutputStreamWriter(sock.getOutputStream())), true);

                while(true) {

                    //do stuff
                }
            } finally {
                sock.close();
            }
        }
    } catch (SocketException e) {
        recreateSocket();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void recreateSocket() {

    try {
        ServerSocket socket = ServerSocketFactory.getDefault().createServerSocket(port);
        serv = socket;
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

atm抛出bindException，如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:03:16.740

启动一个新线程来处理每个接受的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:11:31.100

在 finally 块之前添加 catch 语句（但不要在`recreateSocket()`那里调用）

更新以澄清，如下所示：

```
 while(true) {
        //do stuff
    }
} catch (SocketException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} finally {
      sock.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T13:18:24.560

原因是您正在再次创建服务器套接字。你不需要这样做（前一个仍在工作，这就是你得到绑定异常的原因）。这就是你想要做的：

```
 private ServerSocket serv;

  public Server(int port) throws IOException
  {

    try {
      serv = new ServerSocket(port);
      serv.setReuseAddress(true);

      while(true) {
        Socket sock = serv.accept();

        try {
          BufferedReader netIn = new BufferedReader(new InputStreamReader(sock.getInputStream()));
          PrintWriter netOut = new PrintWriter(new BufferedWriter(new OutputStreamWriter(sock.getOutputStream())), true);

          // do stuff
        } catch(SocketException e) {
          e.printStackTrace();
        } finally {
          sock.close();
        }
      }
    } catch (IOException e) {
      e.printStackTrace();
    }
  } 
```

# c# - 我们如何通过 EF LINQ 语句分配 Observable 集合

> ID：10643470
> 
> 赞同：0
> 
> 时间：2012-05-17T21:02:01.830
> 
> 标签：c#, linq, entity-framework, linq-to-entities

是否可以使用实体框架将数据库实体中的集合分配给 ObservableCollection？

这是 iv 到目前为止尝试的方法，我尝试使用构造函数将列表转换为 ObsrvableCollection ..但是 LINQ 不允许接受参数的构造函数。

为 Ienumerable 创建一个名为 ToObservable 集合的扩展......但 EF 不承认这一点。

有没有其他优雅的解决方案。下面给出的是我正在使用的代码......并且失败了

```
using (var db = new clientEntities())
{
                var data = from p in db.CLIENTs
                           select new Contracts.Client()
                                      {
                                          ClientID = p.CLIENT_ID,
                                          FirstName = p.FIRST_NAME,                                          
                                          PayInfo = new ObservableCollection<PayInfo>(p.PAY_INFO.Select(n=> new PaymentInfo(){ 
                                              PayID=n.ID                                                    
                                              }))
                                      };
    } 
```

PayInfofield 是一个 Observable 集合。是否可以在不使用临时变量的情况下优雅地分配它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:27:46.690

听起来您将 LINQ to Entities/SQL 与普通的 LINQ 混淆了。请记住，当您使用 EF 时，您编写的任何 LINQ 查询都必须转换为 SQL。因此，您需要对从 SQL 数据库返回的数据进行任何对象转换，都需要 EF 直接支持。这包括 ToList()、ToArray() 等，但不包括您自己的自定义扩展。

我认为您可以在这里做的最好的事情是首先查询数据库（您可以使用 ToList() 以便执行查询），然后在 ObservableCollection 的构造函数中使用该结果列表（或调用您的 ToObservableCollection() 扩展方法。

# ruby-on-rails - 在 Ruby on Rails 3.2.3 中使用 LightBox 2

> ID：10643471
> 
> 赞同：0
> 
> 时间：2012-05-17T21:02:03.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, lightbox, lightbox2

我做了很多网络搜索，看看是否能找到一个脚本，我可以在我的 Rails 应用程序中弹出一个二维码图像。我遇到了 Lightbox 2。我已经安装了脚本并在我的样式表中复制了 CSS 代码。

我尝试使用以下代码。我试图包括图像所在的路径。单击二维码时页面显示正常，但没有图像。

```
<a href="QR-Code-image.jpg" rel="lightbox">QR Code</a> 
```

我想知道是否可以使用上面的代码定义此图像的路径，还是需要使用某种 rails 语句来执行此操作？

我已经搜索了几个小时，并找到了一些建议，包括在 Stack Overflow 上。但是，我还没有看到任何说明它们用于 Rails 应用程序的示例。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:12:05.713

> 在 html.erb 文件中

```
<%= link_to image_tag("small_image", :size => "76x76"),'/assets/large_image.png',:rel => "lightbox"%> 
```

**image_tag**用于显示小缩略图预览，确保实际图像路径是`/assets/image_file`

> 如果你使用普通的 html 标签就可以了

```
<a href="/assets/images_file" rel="lightbox" >My Image</a> 
```

# c++ - 如何通过跳过 = 从 txt 文件中读取整数？

> ID：10643473
> 
> 赞同：0
> 
> 时间：2012-05-17T21:02:22.287
> 
> 标签：c++, file-io, integer, string-parsing

```
1 = 0 0 97 218
2 = 588 0 97 218
3 = 196 438 97 218
4 = 0 657 97 218
5 = 294 438 97 218 
```

我有像上面这样的 txt 文件。如何在没有 = 的情况下从这个文件中只读取整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:22:50.647

另一种可能性是分类`=`为空白的方面：

```
class my_ctype : public std::ctype<char>
{
    mask my_table[table_size];
public:
    my_ctype(size_t refs = 0)  
        : std::ctype<char>(&my_table[0], false, refs)
    {
        std::copy_n(classic_table(), table_size, my_table);
        my_table['='] = (mask)space;
    }
}; 
```

然后用包含此方面的语言环境为您的流灌输，然后读取数字，就好像`=`根本不存在一样：

```
int main() {
    std::istringstream input(
            "1 = 0 0 97 218\n"
            "2 = 588 0 97 218\n"
            "3 = 196 438 97 218\n"
            "4 = 0 657 97 218\n"
            "5 = 294 438 97 218\n"
        );

    std::locale x(std::locale::classic(), new my_ctype);
    input.imbue(x);

    std::vector<int> numbers((std::istream_iterator<int>(input)),
        std::istream_iterator<int>());

    std::cout << "the numbers add up to: " 
              << std::accumulate(numbers.begin(), numbers.end(), 0) 
              << "\n";
    return 0;
} 
```

*诚然，将所有*数字相加可能不是很明智，因为每行的第一个数字似乎是一个行号——这只是一个快速演示，以表明我们确实在读取数字而没有额外的“东西”造成任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:36:00.957

这是基本框架：逐行阅读并解析。

```
for (std::string line; std::getline(std::cin, line); )
{
     std::istringstream iss(line);
     int n;
     char c;

     if (!(iss >> n >> c) || c != '=')
     {
         // parsing error, skipping line
         continue;
     }

     for (int i; iss >> i; )
     {
         std::cout << n << " = " << i << std::endl; // or whatever;
     }
} 
```

要通过 读取文件`std::cin`，请将其通过管道传输到您的程序中，例如`./myprog < thefile.txt`.

# javascript - 将主干模型绑定到 Marionette ItemView - 阻塞 .fetch()？

> ID：10643474
> 
> 赞同：11
> 
> 时间：2012-05-17T21:02:25.663
> 
> 标签：javascript, backbone.js, marionette

这是一个两部分的问题。1）有没有更好的方法将模型异步渲染到视图？我目前正在使用`fetch`模型中的方法发出 ajax 请求（尽管我在初始化时显式调用它），*然后*使用应用程序事件呈现模板化视图，该事件在调用方法`vent`后从模型内部发布`parse`。酷但不稳定？2）阻塞`fetch`方法有用吗，有可能吗？

应用程序将其呈现到页面：

```
layout
navbar
index 
```

然后它获取模型并呈现：

```
layout
navbar
thing
1
something
somethingelse 
```

但是，如果我不使用`vent`触发器，它（预期）会呈现：

```
layout
navbar
thing
1
null
null 
```

html模板：

```
<!-- Region: NavBar -->
<script type="text/template" id="template-navbar">
   <div id="navbar">
      navbar
   </div>
</script>

<!-- View: IndexView -->
<script type="text/template" id="template-index">
   <div id="index">
      index
   </div>
</script>

<!-- View: ThingView -->
<script type="text/template" id="template-thing">
   <div id="thing">
      thing<br/>
      <%= id %><br/>
      <%= valOne %><br/>
      <%= valTwo %><br/>
   </div>
</script>

<!-- Region -->
<div id="default-region">
  <!-- Layout -->
  <script type="text/template" id="template-default">
     layout
     <div id="region-navbar">
     </div>
     <div id="region-content">
     </div>
  </script>
</div> 
```

**应用程序.js**：

```
window.App = { }

# Region
class RegionContainer extends Backbone.Marionette.Region
  el: '#default-region'   
  # Called on the region when the view has been rendered
  onShow: (view) ->
    console.log 'onShow RegionContainer'

App.RegionContainer = RegionContainer

# Layout
class DefaultLayout extends Backbone.Marionette.Layout
  template: '#template-default'  
  regions:
    navbarRegion: '#region-navbar'
    contentRegion: '#region-content'
  onShow: (view) ->
    console.log 'onShow DefaultLayout'

App.DefaultLayout = DefaultLayout

# NavBar (View)
class NavBar extends Backbone.Marionette.ItemView
  template: '#template-navbar'    
  initialize: () ->
    console.log 'init App.NavBar'

App.NavBar = NavBar

# Index View
class IndexView extends Backbone.Marionette.ItemView
  template: '#template-index'  
  initialize: () ->
    console.log 'init App.IndexView'

App.IndexView = IndexView

# Thing View
class ThingView extends Backbone.Marionette.ItemView
  template: '#template-thing'  
  model: null
  initialize: () ->
    console.log 'init App.ThingView'
  events:
    'click .test_button button': 'doSomething'
  doSomething: () ->
    console.log 'ItemView event -> doSomething()'

App.ThingView = ThingView

# Thing Model
class Thing extends Backbone.Model
  defaults:
    id: null
    valOne: null
    valTwo: null
  url: () ->
    '/thing/' + @attributes.id
  initialize: (item) ->
    console.log 'init App.Thing'
    @fetch()
  parse: (resp, xhr) ->
    console.log 'parse response: ' + JSON.stringify resp 
    # resp: {"id":"1","valOne":"something","valTwo":"somethingelse"}
    @attributes.id = resp.id
    @attributes.valOne = resp.valOne
    @attributes.valTwo = resp.valTwo
    console.log 'Thing: ' + JSON.stringify @
    @
    App.MyApp.vent.trigger 'thingisdone' 

App.Thing = Thing

# App
$ ->

  # Create application, allow for global access
  MyApp = new Backbone.Marionette.Application()
  App.MyApp = MyApp

  # RegionContainer
  regionContainer = new App.RegionContainer

  # DefaultLayout
  defaultLayout = new App.DefaultLayout
  regionContainer.show defaultLayout

  # Views
  navBarView = new App.NavBar
  indexView = new App.IndexView

  # Show defaults
  defaultLayout.navbarRegion.show navBarView
  defaultLayout.contentRegion.show indexView

   # Allow for global access
  App.defaultRegion = regionContainer
  App.defaultLayout = defaultLayout

  # Set default data for MyQpp (can't be empty?)
  data = 
    that: 'this'

  # On application init...
  App.MyApp.addInitializer (data) ->
    console.log 'init App.MyApp'

    # Test
    App.modelViewTrigger = ->
      console.log 'trigger ajax request via model, render view'
      App.MyApp.vent.trigger 'show:thing' 

    App.timeoutInit = ->
      console.log 'init timeout'
      setTimeout 'App.modelViewTrigger()', 2000

    App.timeoutInit()

    # Event pub/sub handling
    App.MyApp.vent.on 'show:thing', ->
      console.log 'received message -> show:thing'
      thing = new App.Thing(id: '1')
      App.thingView = new App.ThingView(model: thing)
      # I should be able to do this, but it renders null
      # App.defaultLayout.contentRegion.show App.thingView

    # Testing to see if I could pub from inside model..yes!
    App.MyApp.vent.on 'thingisdone', ->
      console.log 'received message -> thingisdone'
      App.defaultLayout.contentRegion.show App.thingView

  MyApp.start data 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-18T01:43:18.787

从一个非常基本的角度来看，抛开您提供的具体示例，这就是我将如何处理问题和解决方案。

## 一个普遍的问题/解决方案

这是问题的通用版本：

*   您需要通过其 id 获取模型。
*   在获取模型后，您需要一个视图来呈现。

这相当简单。在获取数据之前将模型附加到视图，然后使用模型的“同步”事件来渲染视图：

```
MyView = Backbone.View.extend({
  initialize: function(){
    this.model.on("sync", this.render, this);
  },

  render: function(){ ... }
});

myModel = new MyModel({id: someId});
new MyView({
  model: myModel
});

myModel.fetch(); 
```

注意事项：

在调用模型之前，我正在使用它的 id 设置模型，并使用模型设置视图`fetch`。这是为了防止加载数据和渲染视图之间的竞争条件。

我在这里指定了通用的 Backbone 东西。Marionette 的工作原理通常相同，但会为您进行渲染。

## 您的具体需求

### 阻止获取

坏主意，到处都是。不要尝试。

在数据从服务器返回之前，阻塞获取将使您的应用程序完全无响应。这将表现为一个性能不佳的应用程序，并在用户尝试做任何事情时冻结。

不这样做的关键是利用事件并确保在实际进行异步调用之前配置事件，如我的通用示例所示。

并且不要从模型的初始化程序中调用 fetch。这是自找麻烦，因为在获取发生之前您将无法设置任何视图或事件。我很确定这将解决您在使用异步调用时遇到的大部分问题。

### 视图和模型之间的事件

首先，我会避免使用`MyApp.vent`模型和视图实例之间的通信。视图已经引用了模型，因此它们应该直接相互通信。

换句话说，模型应该直接触发事件，视图应该监听模型上的事件。这与我的简单示例的工作方式相同，但您可以让您的模型随时触发您想要的任何事件。

我也一定会使用`bindTo`Marionette 的视图功能，以在视图关闭时协助清理事件。

```
MyView = Backbone.Marionette.ItemView.extend({
  initialize: function(){
    this.bindTo(this.model, "do:something", this.render, this);
  }
});

MyModel = Backbone.Model.extend({
  doSomething: function(){
    this.trigger('do:something');
  }
});

myModel = new MyModel();
new MyView({
  model: myModel
});

myModel.doSomething(); 
```

### 其他项目

我认为还有一些其他的项目会导致一些问题，或者导致会导致问题的奇怪情况。

例如，您在 DOMReady 事件中发生了太多事情：`$ ->`

并不是你从这个事件中执行了太多的代码，而是你在这个事件中定义了太多的代码。你不应该做更多的事情：

```
$ -> 
  App.MyApp.start(data) 
```

也不要在此事件回调中定义您的 Marionette.Application 对象。这应该自行定义，以便您可以在 DOMReady 回调之外设置初始化程序，然后通过`app.start()`调用触发它们。

查看 BBCloneMail 示例应用程序，了解有关呈现布局并在加载数据和外部模板后填充其区域的示例：

来源：[https ://github.com/derickbailey/bbclonemail](https://github.com/derickbailey/bbclonemail)

直播应用：[http ://bbclonemail.heroku.com/](http://bbclonemail.heroku.com/)

* * *

我认为我不会以您可能想要的方式直接回答您的问题，但我提出的想法应该会引导您找到您需要的答案。我希望它至少有帮助。:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-01T09:05:49.880

请参阅 Derick 解决此常见问题的新建议：[https ://github.com/marionettejs/backbone.marionette/blob/master/upgradeGuide.md#marionetteasync-is-no-longer-supported](https://github.com/marionettejs/backbone.marionette/blob/master/upgradeGuide.md#marionetteasync-is-no-longer-supported)

简而言之，将异步代码从您的视图中移开，这意味着您需要为它们提供已获取数据的模型。来自 Marionette 升级指南中的示例：

```
 Marionette.Controller.extend({
  showById: function(id){
    var model = new MyModel({
      id: id
    });

    var promise = model.fetch();

    $.when(promise).then(_.bind(this.showIt, this));
  },

  showIt: function(model){
    var view = new MyView({
      model: model
    });

    MyApp.myRegion.show(view);
  }
}); 
```

# android - SDCard 内容存在但看不到

> ID：10643476
> 
> 赞同：2
> 
> 时间：2012-05-17T21:02:31.423
> 
> 标签：android, android-sdcard, galaxy

我在使用 Android 4.0.2 的三星 Nexus 时遇到了非常奇怪的问题。我写了一个简单的程序，基本上每次用户按下按钮时都会创建文件。我的程序在 Galaxy Nexus Windows/Mac 上无法在 SD 卡上看到这些文件的其他设备上运行良好，但是当我执行 adb shell 时，我看到了 SD 卡上的所有文件。

我在另一个具有 Android 4.0.4 但结果仍然相同的 Nexus 上重新测试。

可能是什么原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T21:12:10.640

您可能需要通过`MediaScannerConnection`. [从去年的一篇博](http://commonsware.com/blog/2011/08/31/mtp-external-storage.html)文中引用自己的话：

> ... MTP 内容不是基于外部存储的文字内容。相反，MTP 内容基于 MediaScannerConnection 扫描的文件。如果您将文件写入外部存储，除非该文件被 MediaScannerConnection 扫描，否则用户将无法通过 MTP 看到该文件。
> 
> 外部存储会在重新启动时进行扫描，并且可能会定期进行。用户可以通过 SDRescan 等实用程序手动强制扫描。但是，最好的答案是您在关闭文件后使用 MediaScannerConnection 上的 scanFile() 来更新媒体数据库。这将使您的文件立即可供用户使用。

# documentation - 如何使用 phpdocumentor 记录闭包？

> ID：10643478
> 
> 赞同：2
> 
> 时间：2012-05-17T21:02:38.193
> 
> 标签：documentation, comments, phpdoc

所以，我正在使用 Silex 微框架，我很好奇正确的 PHPDoc 方法来记录闭包。

```
require_once __DIR__.'/silex.phar'; 

$app = new Silex\Application(); 

$app->get('/hello/{name}', function($name) use($app) { 
    return 'Hello '.$app->escape($name); 
}); 

$app->run(); 
```

我如何记录 GET 关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:51:27.707

关于关闭，您想对文档的读者说什么？你想强调它的存在，还是创建一个@uses<-->@usedby 文档链接到你的闭包正在使用的 Silex\Application->escape() 方法？

我不知道是否存在任何 PHPDoc 语法来记录闭包（还），但鉴于它实际上不能被消费者在 API 上下文中使用，我不确定是否有记录它的用例.. . 好吧，除了向代码阅读文档阅读器提供详细信息。如果是后者，我可能会使用@internal 标签来写下我希望读者知道的关于闭包的任何注释。此外，鉴于我在该代码片段中没有看到“可记录的元素”，您必须将该 @internal 标记放在文件级文档块中。

# backbone.js - 扩展模型的最佳方式

> ID：10643484
> 
> 赞同：0
> 
> 时间：2012-05-17T21:03:38.493
> 
> 标签：backbone.js, underscore.js, backbone-views

根据 Backbone.js 文档[Model-parse](http://documentcloud.github.com/backbone/#Model-parse)执行以下操作：

> 每当服务器返回模型的数据，获取和保存时，都会调用 parse。

为了增加我已经加载的模型，我使用`Model.parse()`. 我通过使用`fetch`发出额外的数据请求来完成此操作，然后使用该数据将属性添加到现有模型。

*例子：*

fetch 对象`{age: 19}`
在解析器之后`{age: 19, isAdult: true}`

当我执行保存请求时，在 PUT 请求中我还有其他不需要的参数（例如 isAdult）。我想要原始模型（PUT 请求中没有其他参数）。

在 Backbone 中实现我的目标的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:45:49.823

如果我正确理解你的问题......

当骨干网使用保存与服务器对话时，它会发送模型的*完整*表示。正如文档所说：

> 属性散列（如集合）应该包含您想要更改的属性——未提及的键不会被更改——**但是，资源的完整表示将被发送到服务器**。

所以默认行为是发送完整的模型。如果你想实现你自己的逻辑，你将不得不重写该`sync`方法。稍微挖掘一下扩展的主干代码，你会在上面看到这条评论`sync`：

> // 重写此函数以更改 Backbone 将
> 模型持久保存到服务器的方式。您将收到请求的类型和相关模型。

我会使用默认的同步实现作为我的起点。

# websphere - 如何更改 WebSphere Application Server（只读）配置文件的访问级别

> ID：10643485
> 
> 赞同：2
> 
> 时间：2012-05-17T21:03:49.570
> 
> 标签：websphere, ibm-rad

我正在尝试在 Rational Application Developer 上配置 WebSphere Application Server 8.5 beta。在 WebSphere Application Server 设置中，配置文件名称下拉列表变为空，尽管配置文件已在 WebSphere Application Server 中创建。当我单击 WAS 服务器设置上的配置配置文件时，运行时中定义的 WebSphere Application Server 配置文件下的所有配置文件都以“只读”形式出现。这意味着我无权管理服务器的配置文件，因为我是对安装具有只读访问权限的非 root 用户。我正在使用具有管理权限的 Windows 7 (x64)。

我正在关注这个[链接](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tpro_rootpro_nonroot_own.html)

但没有运气。

任何人都可以在这里帮助我，如何更改服务器的访问级别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T22:46:57.290

启动 RAD 时，右键单击图标并选择“以管理员身份运行”。您可以将快捷方式的属性设置为始终以管理员身份运行。

# memory-management - 关于大型本地化属性文件的最佳做法是什么？

> ID：10643486
> 
> 赞同：0
> 
> 时间：2012-05-17T21:03:54.133
> 
> 标签：memory-management, properties-file, response-time

从性能和内存的角度来看，本地化属性文件的最佳实践是什么？

几个大文件还是很多小文件？
使用属性文件或编译的属性类文件？

**示例场景：**
我有一个包含大约 150 个 .jsp 文件的应用程序。
每个 jsp 文件使用 5 到 50 个键。
按键总数为 1500个。
每个按键被翻译成 25 种语言。

我想四个解决方案：

1) 使用一些但很大的属性文件（例如：'Bundle_da.properties' 之类的文件）
有 25 个属性文件，每个文件有 1500 个键。
所有 150 个 .jsp 文件都包含相同的属性文件。
这样，所有 .jsp 文件将包含所有 1500 个键，其中它可能只使用 5 到 50 个键。

2) 使用一些但较大的属性类文件（例如，'public class Bundle_da extends ListResourceBundle...'）
有 25 个类，每个类有 1500 个键。
所有 150 个 .jsp 文件都包含同一个类。
这样，所有 .jsp 文件将包含所有 1500 个键，其中它可能只使用 5 到 50 个键。

3) 使用许多但很小的属性文件
每个 .jsp 文件将只包含该特定文件所需的键。
属性文件的数量将是 150 x 25 = 3750
这样，所有 .jsp 文件将只包含实际使用的密钥。（即 5 到 50 个键）。

4) 使用 .jsp 特定的属性类。
每个 .jsp 特定包类将仅包含该特定 .jsp 文件所需的键。
属性类的数量将是 150 x 25 = 3750
这样，所有 .jsp 文件将只包含实际使用的键。（即 5 到 50 个键）。

两个问题：
从**性能**的角度来看，这 4 种解决方案中的哪一种是首选解决方案？
从**内存**的角度来看，这 4 种解决方案中哪一种在 Web 服务器上分配的内存更少？

提前谢谢你
艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:18:40.173

我们有一个较大的桌面应用程序。任何为最终用户消费而设计的文本消息都包含在代码中的某些标记中。perl 脚本扫描所有 *.C 文件并提取标记的字符串以生成 .po 文件，它还从 rsc 文件中提取字符串。我们最终得到两个 .po 文件，一个用于 .C 字符串，另一个用于 .rsc 字符串。总共有大约 16,000 个字符串，.po 文件被转换为每种语言的 .mo 文件，每个 .mo 文件大约 600K，因此每种语言 1.2Mb。

您的情况可能有所不同，但我们从来没有理由担心文件大小。我关心的是降低本地化子系统的复杂性。例如，在我们的案例中，我宁愿让我们的翻译人员填写两个 .po 文件中的空白，而不是可能包含最终用户文本消息的 100 多个文件。

注意每个 .po 文件大约 400K。

# javascript - javascript jquery animate div 向左移动幻灯片然后再次返回

> ID：10643489
> 
> 赞同：0
> 
> 时间：2012-05-17T21:04:04.867
> 
> 标签：javascript, jquery, jquery-animate, overflow, slide

我有一个可见宽度为内容一半的滚动 div。（实际内容是宽度的两倍。）

我只想要一个使用 jquery 的简单 javascript（serialscroll 插件真的太多了）来触发滚动以滑入查看下半部分内容，然后再次单击将其滑回。（滑动量是静态的#）

到目前为止，我有一个 jsfiddle。最初的向左滑动有效，但向后滑动不起作用，然后它完全停止工作。

[http://jsfiddle.net/w7Uvj/1/](http://jsfiddle.net/w7Uvj/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:08:15.013

单独使用`left`（或`right`单独）而不是`left`和`right` [小提琴](http://jsfiddle.net/mowglisanu/w7Uvj/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:09:32.807

将您的第二个功能更改为：

```
$('.back').click(function() {    
    $('#maincol').animate({                
        'right':'-=400px'},750);
        $(this).fadeOut(500);
        $('.next').delay(600).fadeIn(500);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/w7Uvj/3/)**。

您也可以将正确的属性也设置为 0px（而不是 -=400px）。

# hibernate - Grails 查询 - 无法访问连接表

> ID：10643491
> 
> 赞同：0
> 
> 时间：2012-05-17T21:04:09.700
> 
> 标签：hibernate, grails, groovy

我想列出属于 SAMPLE_TYPE 的所有 SAMPLE_PARAMETERS。我有两个类：一个 Sample_type 和一个 Sample_parameter。还有一个 grails 自动创建的连接表，其中列出了名为 Sample_Type_Sample_Parameters 的类型/参数的所有 id。我正在尝试列出属于某种类型的所有参数，但无法弄清楚如何访问连接表。

我可以使用 withCriteria 吗？如果是这样，人们将如何去做呢？在伪代码中：例如，如果我的样本类型是血液 - 我想要这个

```
def result = SampleParameters.withCriteria{
//all parameters in which the sampleType.id in join table matches the blood's id    
} 
```

我的课程：

```
class SampleType {

    String sampleName

    static constraints = {
         sampleName(blank:false)
    }
    String toString() {
        "${sampleName}"
    }

    static hasMany =[sampleParameters:SampleParameter]//[tags:Tag]
    static mappedBy=[sampleParameters:"sampleTypes"]//[tags:"domainClass2s"]
}

class SampleParameter {

    String name
    String value

    static hasMany = [
    samples:Sample,         //domainClass1s: DomainClass1,
    sampleTypes:SampleType  //domainClass2s: DomainClass2
    ]

    static mappedBy = [samples:"sampleParameters",sampleTypes:"sampleParameters"]//[domainClass1s: "tags", domainClass2s: "tags"]
    static belongsTo =[Sample,SampleType] //[DomainClass1, DomainClass2]

    static constraints = {
      name()
      value(unique:true)
    }

    @Override public String toString() {
        return value
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:32:13.627

你应该能够做到：

```
def props = SampleType.findBySampleName( "Blood" ).sampleProperties 
```

但这取决于您如何定义域类，您在问题中省略了

# sql - SQL -> SELECT 查询与 phpMyAdmin 中的 LIKE 语句问题

> ID：10643492
> 
> 赞同：1
> 
> 时间：2012-05-17T21:04:10.240
> 
> 标签：sql, phpmyadmin

我在 phpMyAdmin 中使用“sql 控制台”来尝试一些查询。以下查询就像一个魅力：

```
Select * from firstTable T1, secondTable T2 Where T2.name = T1.name 
```

我现在想要的是使用 LIKE 语句进行类似的查询。不幸的是，它不起作用。下面是我尝试过的。提前Thks。干杯。马克。

```
Select * from firstTableb T1, secondTable T2 Where T2.name LIKE "%T1.name%" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:08:39.417

在您的示例中，您正在与`t2.name`string进行比较`%T1.name%`，这意味着它实际上需要包含 text `T1.name`。要搜索实际内容，您需要在值中连接：

```
select * from firstTable T1, secondTable T2
 where T2.name like concat('%', T1.name, '%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:07:45.803

将**双**引号替换为**单**引号，并将名称连接到字符串中

```
Select * 
from firstTableb T1 inner join secondTable T2 
on T2.name LIKE concat('%', T1.name, '%') 
```

# javascript - StumbleUpon 和 Pinterest 社交共享图标脚本函数调用与 WordPress 无限滚动

> ID：10643493
> 
> 赞同：0
> 
> 时间：2012-05-17T21:04:10.477
> 
> 标签：javascript, wordpress, infinite-scroll, pinterest, stumbleupon

发现这个：tyty stack， [Social Icons not working with Infinite Scrolling on Wordpress](https://stackoverflow.com/questions/10212686/social-icons-not-working-with-infinite-scrolling-on-wordpress)

我正在做同样的事情，只是多了两个按钮，StumbleUpon 和 Pinterest

我正在寻找 Pinterest 'Pin It' 按钮和 StumbleUpon 徽章/小部件的脚本函数调用

我为 StumbleUpon 找到了一些东西，但这并不理想，

对 Pinterest 毫无头绪，仍在寻找，给他们写了一封愉快的信。

这是我粘贴到无限滚动设置中的代码“获取下一个帖子后要调用的Javascript”TextArea，

```
// jQuery Masonry, 
var newElems = jQuery( newElements ).css({ opacity: 0 });
  newElems.imagesLoaded(function(){
    newElems.animate({ opacity: 1 });
    jQuery('#content').masonry( 'appended', newElems, true );
  });

// ReCall Scripts for Social Sharing Buttons
var el = document.body;

//Google Plus  
if (typeof gapi !== "undefined") { gapi.plusone.go(el); }

//Facebook
if (typeof FB !== "undefined") { FB.XFBML.parse(el); }

//Twitter
if (typeof twttr !== "undefined") { twttr.widgets.load(); }

//Pinterest

//StumbleUpon

     (function() {
         var li = document.createElement('script'); li.type = 'text/javascript'; li.async = true;
         li.src = 'https://platform.stumbleupon.com/1/widgets.js';
         var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(li, s);
     })(); 
```

保持优雅，堆叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:56:20.727

我已经构建了一个[HTML5 有效的 Pinterest 按钮替代品](https://github.com/skibblenybbles/PinterestPlus)并将其发布在 GitHub 上。它提供了`PinterestPlus.pinit()`一种与`gapi.plusone.go()`等类似的方法。

我希望它可以帮助你的项目！

# javascript - 更改 CSS 类定义

> ID：10643495
> 
> 赞同：13
> 
> 时间：2012-05-17T21:04:22.703
> 
> 标签：javascript, jquery, css

假设我有这个类：

```
.MyClass{background:red;} 
```

此类适用于多个 div。我想**通过更改 MyClass 中定义的颜色将背景颜色更改为橙​​色。**

现在，我知道我可以做到`$('.MyDiv').css('background', 'orange');`

但我的问题实际上是这样的：如何更改 CSS 类定义以便 MyClass 元素现在具有`background:orange;`？我希望能够将几个 CSS 颜色属性从一种颜色更改为另一种颜色。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:06:58.600

实际上改变你的样式表是相当具有挑战性的。不过，更容易的是，您可以*将*样式表换成不同的样式表，这可能足以满足您的目的。请参阅[如何使用 jQuery 切换我的 CSS 样式表？](https://stackoverflow.com/questions/7846980/jquery-change-css-stylesheet).

对于实际更改样式表内容，[如何在运行时更改/删除 CSS 类定义？](https://stackoverflow.com/questions/730048/how-to-change-remove-css-classes-definitions-at-runtime)会让你开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T12:53:25.307

很难找到您想要的规则，因为您必须遍历`document.styleSheets[i].cssRules`数组。（并将你的类名与`selectorText`属性进行比较）
所以我对这个问题的解决方案是添加一个新的 CSS 类，从 HTML 元素中删除旧的 CSS 类并添加这个类而不是它。

```
var length = getCssRuleLength();
var newClassName = "css-class-name" + length;

//remove preview css class from html element.
$("#your-html-element").removeClass("css-class-name");
$("#your-html-element").removeClass("css-class-name" + (length-1));

$("#your-html-element").addClass(newClassName);

//insert a css class
insertCssRule("." + newClassName + ' { max-width: 100px; }', length);

function getCssRuleLength() {
	var length = 0;
	if (document.styleSheets[1].cssRules) {
		length = document.styleSheets[1].cssRules.length;
	} else if (document.styleSheets[1].rules) { //ie
		length = document.styleSheets[1].rules.length;
	}
	return length;
}
function insertCssRule(rule, index) {
	if (document.styleSheets[1].cssRules) {
		document.styleSheets[1].insertRule(rule, index);
	} else if (document.styleSheets[1].rules) { //ie
		document.styleSheets[1].addRule(rule, index);
	}
}
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-30T01:54:39.887

这是我的答案，以防有人偶然发现。给你的元素一个不存在的新类名，然后动态添加一个样式段：

```
var companyColor = 'orange' //define/fetch the varying color here
var style = '<style>.company-background {background-color: ' + companyColor + '; color: white;}</style>';
$('html > head').append($(style));

//give any element that needs this background color the class "company-background" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:09:13.910

你有2个选择

1.  添加一个覆盖它的新样式表`.MyClass`
2.  有第二个具有不同属性的类，并更改这些元素上的类名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T21:22:15.830

查看您的问题，我认为更好的方法是使用 JavaScript 将**MyClass**切换为其他内容，而不是动态更改类的属性。

但如果你仍然热衷于你可以使用 jQuery [http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/切换 CSS 样式表](http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-22T17:51:00.593

```
var changeClassProperty = function(sheetName, className, propertyName, newValue, includeDescendents) {
        var ending = '$';
        setValue = '';
        if (includeDescendents === true) {
            ending = '';
        }
        if (typeof(newValue) != 'undefined') {
            setValue = newValue;
        }
        var list = document.styleSheets;
        for (var i = 0, len = list.length; i < len; i++) {
            var element = list[i];
            if (element['href'] && element['href'].match(new RegExp('jquery\.qtip'))) {
                var cssRules = element.cssRules;
                for (j = 0, len2 = cssRules.length; j < len2; j++) {
                    var rule = cssRules[j];
                    if (rule.selectorText.match(new RegExp(className + ending))) {
                        cssRules[j].style.backgroundColor = setValue;
                        console.log(cssRules[j].style.backgroundColor);
                    }
                }
            }
        }
    }
changeClassProperty('jquery.qtip', 'tipsy', 'backgroundColor', 'yellow'); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-17T21:08:12.577

添加和删​​除类而不是尝试更改它们会更好。

例如

```
.red {
    background: red;
}

.orange {
    background: orange;
}

$('#div').click(function(){
    $(this).removeClass('red').addClass('orange');
}); 
```

# actionscript-3 - 第一个视图 - TabbedNavigator Flash Builder

> ID：10643497
> 
> 赞同：1
> 
> 时间：2012-05-17T21:04:31.560
> 
> 标签：actionscript-3, flash, flex4, flash-builder

使用选项卡式视图导航器应用程序，我设置了几个页面。

```
<s:TabbedViewNavigatorApplication splashScreenImage="@Embed(source='images/loading.png')"
                              splashScreenScaleMode="letterbox"
                              backgroundColor="0xFFFFFF"
                              xmlns:fx="http://ns.adobe.com/mxml/2009" 
                              xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="240">
<s:ViewNavigator label="Main Menu" width="100%" height="100%" firstView="views.MainView" icon="@Embed(source='images/home.png')"/>
<s:ViewNavigator label="Flash Cards" width="100%" height="100%" firstView="views.FlashCardsView"  icon="@Embed(source='images/card.png')"/>
<s:ViewNavigator label="Quizzes" width="100%" height="100%" firstView="views.QuizzesView" icon="@Embed(source='images/test.png')"/> 
```

当您导航到测验页面时，您选择了一种测验类型。选择一个测验，打开另一个页面。

现在，如果您离开此页面并转到另一个页面（例如闪存卡） - 再次选择测验选项卡会将您返回到堆栈中的最后一页（也就是您的测验），而不是允许您选择测验类型的页面你想拿。

当您点击标签栏并导航离开时，是否有一种方法可以自动将视图从堆栈中弹出？或者有没有办法在您选择该选项卡时始终显示第一个视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:01:53.907

当您在 TabbedViewNavigatorApplication 中的 ViewNavigator 之间切换时，会触发 FlexEvent.HIDE。一个解决方案可以是当不再显示该视图时，在测验 ViewNavigator 中弹出您的第一个视图：

```
<s:ViewNavigator id="quizzes" label="Quizzes" width="100%" height="100%" firstView="views.QuizzesView" icon="@Embed(source='images/test.png')" hide="{quizzes.popToFirstView()}" /> 
```

我刚刚为您的 ViewNavigator 和 hide 功能添加了一个 ID。似乎工作。

# spring - struts2 中的事务支持

> ID：10643499
> 
> 赞同：0
> 
> 时间：2012-05-17T21:04:32.213
> 
> 标签：spring, transactions, struts2, guice, service-layer

我正在为我的名为**在线考试系统**的项目使用 struts2.0 。

我在数据访问层使用传统的 JDBC 方法。我不能使用 JPA。

我想让整个服务层事务化，但我在 struts2 中搜索了事务支持但没有得到任何东西。

尽管 Spring 为使服务层事务化提供了很好的支持。

请在这个问题上帮助我找出 struts2 中的事务支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:37:44.117

您在这里走错了路。Struts2 仅适用于 MVC 部分，而您在服务层所做的事情与此无关。

如果您想利用事务 API，我建议您使用 Spring AOP，如果我是正确的，Google Guice 也提供了一种 AOP 方式。

无论您在服务层使用什么来处理事务 Struts2 都独立于它并且脱离上下文

# jquery - jquery mobile 从列表视图中获取href

> ID：10643502
> 
> 赞同：0
> 
> 时间：2012-05-17T21:04:52.250
> 
> 标签：jquery, jquery-mobile, phonegap-plugins

我正在开发一个多页 JQM 应用程序。在我的一个页面中，我引入了两个 RSS 提要并使用 jFeed 插件显示它们。

我想做的是在列表视图中捕获单击事件，获取 href 并将其交给 Phonegap/Cordova ChildBrowser 插件，以便它显示在子浏览器中。

我正在努力从点击事件中获取href。我不知道这是上下文或优先级问题，还是我遗漏的非常简单的问题。

在我包含的 app.js 文件中：

```
$("#chooseEvent").live('pageinit', function(event) {
  $.getFeed({
  url: "https://www1.ucsc.edu/news_events/calendar/rss/Today.ashx",
  complete: function(feed) {
  //called when complete
  //alert('complete');
  },
  success: function(feed) {
  //called when successful
  //alert('success' + feed.title);
  $("#content ul").append('<li data-role="divider" data-theme="b">' + feed.title + '</li>');
    for (var i = 0; i < feed.items.length && i < 10; i++) {
    var item = feed.items[i];
    $("#content ul").append('<li><a href="' + item.link + +"rel=external" + '">' + item.title + '</a></li>');
  }
  // run refresh on the listview to get the theme added correctly
  $('#content ul').listview('refresh');
  },
  error: function(feed) {
  //called when there is an error
  //alert('error');
  }
  // get the item clicked and prepare it for Child Browser
  $("#content ul").on('click', function(e) {
  //var url = this.href; // outputs #
  // var url = e.target; // outputs #
  var url = $(this).attr("href"); // result is undefined
  //var url = this.parent; // result in undefined
  alert(url);
  e.preventDefault();
 });
}); 
```

html页面

```
<div data-role="page" data-title="Campus Events" id="chooseEvent" addBackBtn="true">
<div data-role="header" data-add-back-btn="true">
<a href="index.html" rel="external" data-icon="arrow-l"  data-direction="reverse" class="ui-btn-left" data-theme="b">Back</a>
<h3>Today's Events</h3>
<a href="index.html" data-rel="back" data-icon="home" data-iconpos="notext"  data-direction="reverse" class="ui-btn-right" data-theme="b">Home</a>
</div>

<div data-role="content" id="content">
<ul data-role="listview" id="eventList" data-theme="b">

</ul>
</div> <!-- /content -->    
</div> <!-- /page --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:47:26.657

为了获得`href`事件`click`，您不应该绑定到新插入的`<li>`标签，即：

```
 $("#content li").on('click', function(e) {
     ...
     ...  
 }); 
```

或者更确切地说，类似：

```
$('#content ul').delegate('li', 'click', function () {
    ...
    ...
}); 
```

不太确定哪个更好（或差异，真的）。

# javascript - 来自不同文件夹的 Jquery.load URL

> ID：10643503
> 
> 赞同：2
> 
> 时间：2012-05-17T21:05:04.967
> 
> 标签：javascript, jquery, ajax, url

`.load`如果我的文件在不同的文件夹中，我该如何使用？

我努力了：

```
$("#messageWindow").load("http://localhost/MainFolder/Messanging/index.php");   
$("#messageWindow").load("Messanging/index.php");   
$("#messageWindow").load("../Messanging/index.php"); 
```

没有任何效果，我已经阅读了有关`different folders`使用 URL 时的主题，但我似乎无法让他们的答案起作用。

谢谢。

好的，我已经解决了这个问题`The 1st and 2nd URL above WORKS`，但我还有另一个问题。有大量的`index.php`URL。

```
<script type="text/javascript" src="../js/jquery-1.7.2.min.js"></script>
<script src="../plugins/ui/jquery.ui.core.js"></script>
<script src="../plugins/ui/jquery.ui.widget.js"></script>
<script src="../plugins/ui/jquery.ui.datepicker.js"></script>
<script src="../plugins/timezone/jstz.min.js"></script>
<script type="text/javascript" src="file_js/index.js"></script> 
```

但现在这些 URls 不再工作了，我采取的解决方案是添加整个 URL。

```
<script type="text/javascript" src="http://localhost/MainFolder/js/jquery-1.7.2.min.js"></script>
<script src="http://localhost/MainFolder/plugins/ui/jquery.ui.core.js"></script>
<script src="http://localhost/MainFolder/plugins/ui/jquery.ui.widget.js"></script>
<script src="http://localhost/MainFolder/plugins/ui/jquery.ui.datepicker.js"></script>
<script src="http://localhost/MainFolder/plugins/timezone/jstz.min.js"></script>
<script type="text/javascript" src="http://localhost/MainFolder/Messanging/file_js/index.js"></script> 
```

如果我将文件上传到我的虚拟主机，这会很麻烦。我认为使用相对路径可以解决问题，但我不知道它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:16:09.287

对于 jQuery [`load()`](http://api.jquery.com/load/)，您可以包含当前页面的相对路径或绝对路径。如果您在 JS 控制台或 firebug 中运行以下命令，您应该会在浏览器中看到两次相同的问题。

```
$("#header").load("/questions/10643503/jquery-load-url-from-different-folder"); 
```

内容还需要来自与原始页面相同的来源（*您只能从同一域加载内容*）。

# c++ - CreateCompatibleDC() 失败

> ID：10643505
> 
> 赞同：2
> 
> 时间：2012-05-17T21:05:07.047
> 
> 标签：c++, visual-studio-2008, winapi, graphics, gdi+

我正在使用 win32 制作 2D 动画。到目前为止，我的程序加载了从资源创建的 HBITMAP 对象数组。在下面的代码中从“OnUpdate()”调用 CreateCompatibleDC() 时，动画期间会出现问题。在多次调用 OnUpdate 函数后，未创建 HDC 对象（可能未在内存中分配）。当调用 DeleteDC() 删除 HDC 对象时，这会导致意外结果。以下是 main.cpp 中的更新函数代码：

```
 void OnUpdate(
             HWND hwnd)
{
    PAINTSTRUCT ps;
    HDC hdc = BeginPaint(hwnd,&ps);
    if(!hdc)
    {
        MessageBox(NULL, L"Failed to Create Compatible DC - 'hdc' in OnUpdate()", L"ALERT", MB_OK);
        PostMessage(hwnd, WM_DESTROY, NULL, NULL);
    }
    HPALETTE hpalT = SelectPalette(hdc,hpal,FALSE);

    BITMAP bm;
    HDC hdcMem = CreateCompatibleDC(hdc);
    if(!hdcMem)
    {
        MessageBox(NULL, L"Failed to CreateCompatibleDC - 'hdcMem' in OnUpdate()", L"ALERT", MB_OK);
        PostMessage(hwnd, WM_DESTROY, NULL, NULL);
    }
    SelectBitmap(hdcMem, bkgMain);
    GetObject(bkgMain, sizeof(bm), &bm);
    BitBlt(backDC, 0, 0, bm.bmWidth, bm.bmHeight, hdcMem, 0, 0, SRCCOPY);

    // Clean up.
    if(!DeleteDC(hdcMem))
    {
        MessageBox(NULL, L"Failed to DeleteDC - 'hdcMem' in OnUpdate()", L"ALERT", MB_OK);
        PostMessage(hwnd, WM_DESTROY, NULL, NULL);
    }
    SelectPalette(hdc,hpalT,FALSE);
    EndPaint(hwnd,&ps);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:39:42.137

是什么`SelectBitmap()`？如果它是包装器/别名，[`SelectObject()`](http://msdn.microsoft.com/en-us/library/dd162957%28v=vs.85%29.aspx)那么您正在泄漏位图。

```
SelectBitmap(hdcMem, bkgMain); 
```

您应该在删除之前将旧位图选择回 DC：

> 此函数返回先前选择的指定类型的对象。应用程序在使用新对象完成绘制后，应始终将新对象替换为原始默认对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-27T19:54:47.630

我有一个类似的问题，发现它是由从 WM_CREATE 调用 CreateCompatibleDC 引起的（在创建我的主窗口之前）。我发现 GetDC(hwnd) 给了我一个用于主窗口的 HDC，但在 WM_CREATE 完成之前无法使用它。我将我的代码重新定位到 WM_PAINT 并且我的代码运行良好。

# python - Mac OS X 中的 Django 路径

> ID：10643506
> 
> 赞同：0
> 
> 时间：2012-05-17T21:05:07.183
> 
> 标签：python, django

我安装了 django 并想在我的 mac 中指定它的路径，我将路径放入 .profile 并检查 $PATH 以确保已指定。但是，当我进入 python 的环境并输入 import django 时，它找不到。对此一无所知。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:09:41.000

它需要进入`$PYTHONPATH`。如果尚未定义该变量，请创建该变量。

# dojo - 递归销毁 dijit 注册表后如何恢复它？

> ID：10643507
> 
> 赞同：0
> 
> 时间：2012-05-17T21:05:11.097
> 
> 标签：dojo

我正在开发一个应用程序并且正在做这样的事情：

```
dojo.ready(
           function(){ require['dojo/parser','dijit/registry','dojo/on'],function(.....){
           //find a dijit and wrap it in event handling code.}); 
```

我收到一个错误，表明 dojo 正在尝试使用已在使用的 id 注册一个小部件。为了解决这个问题，我输入了这行代码：

```
 //before finding the dijit destroy the existing registry. 
```

但是，从逻辑上讲，这会阻止下一行工作，因为现在不存在可以连接事件的小部件。如何恢复 dijit id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:54:29.610

最好的解决方案是找出为什么您的代码试图注册一个具有已在使用的 id 的小部件，并将其更改为不这样做。

@mschr 的解决方案应该可以工作，但我建议再次使用它，因为它可能会在许多其他地方破坏您的代码，并且您可能会花费数小时调查应用程序的奇怪行为。

无论如何，如果您愿意这样做并自动销毁具有相同 ID 的小部件，请不要覆盖`registry.add()`方法。您*可以*这样做，但这并不意味着您*应该*这样做（尤其是在编程中）。改为`dojo/aspect`调用一个函数，该函数将在调用之前销毁具有相同 ID 的小部件`registry.add()`：

```
require([
    "dojo/aspect",
    "dijit/registry"
], function(
    aspect,
    registry
) {

    aspect.before(registry, "add", function(widget) {           
        if(registry.byId(widget.id)) {
            registry.byId(widget.id).destroy();
            // this warning can save you hours of debugging:
            console.warn("Widget with id==" + widget.id + " was destroyed to register a widget with the same id.");                    
        }
        return [widget];
    });

}); 
```

我自己很好奇如何在没有该覆盖的情况下完成@mschr 解决方案，所以我创建了一个 jsFiddle 进行实验：http: [//jsfiddle.net/phusick/feXVT/](http://jsfiddle.net/phusick/feXVT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:30:18.840

注册 dijit 后会发生以下情况；它由 dijit.registry._hash 引用：

```
function (widget) {
  if (hash[widget.id]) {
    throw new Error("Tried to register widget with id==" + widget.id + " but that id is already registered"); 
  }
  hash[widget.id] = widget;
  this.length++;
} 
```

现在，您时不时会有一个内容窗格，您可以在其中以编程方式放置一个小部件（因此，dojo.parser 以编程方式处理 cpane.unload 并取消引用/销毁解析器实例化的小部件）。

发生这种情况时，您需要挂钩某种形式的“卸载”，例如，当您调用 cpane.set('content' foo) 或 cpane.set('href', bar) 时。需要 Hook 来销毁和注销您保留的小部件实例 - 否则您的程序中会出现内存泄漏。

通常，一旦一个对象在任何地方都没有引用 - 它会从内存中清除，但是对于复杂的对象（例如小部件），“类变量”通常会引用一些 _outside _widget 范围，它将小部件标记为不安全删除到垃圾收集器......一旦你明白了这一点，你就会知道执行正确的生命周期，但在这个概念被完全理解之前。

您*可以*做的是用您自己的处理程序覆盖 dijit.registry 并让任何作为双联体的小部件自动销毁，如下所示：

```
// pull in registry in-sync and with global scoped
// accees (aka dijit.registry instead of dj_reg)

require({

     async:false,
     publishRequireResult:true

  }, [

     "dijit.registry"

  ], function(dj_reg) {

   dijit.registry.add = function(widget) {

      // lets change this bit
      if (this._hash[widget.id]) {
          this._hash[widget.id].destroy(); // optinally destroyRecursively
          this.remove(widget.id)
      }
      this._hash[widget.id] = widget;
      this.length++;

   }
}); 
```

# meteor - 从集合中删除时观察游标时可能出现的错误

> ID：10643509
> 
> 赞同：1
> 
> 时间：2012-05-17T21:05:13.703
> 
> 标签：meteor

我遇到了一个有趣的可能错误，但在这种情况下，这可能是由于我在观察集合时缺少用于删除文档的函数。或者我在滥用`observe`......很可能就是这种情况！

这是将重现我遇到的问题的示例代码。

**在撰写本文时，我正在使用 devel 分支，所以我不确定这是否适用于 0.3.5**

## 观察bug.html

```
<head>
    <title>observebug</title>
</head>

<body>
    {{> main}}
</body>

<template name="main">
    <h1>Example showing possible bug in Meteor wrt observe</h1>
    <div>
        <p>Try to delete a note. You will notice that it doesn't appear to get deleted. However, on the server, the delete did occur. Refresh the page to see that the delete did in fact occur.</p>
        <h2>Notes:</h2>
        <ul>
            {{#each notes}}
                {{> note_row}}
            {{/each}}
        </ul>
    </div>
</template>

<template name="note_row">
    <li>{{title}} <button name="delete">delete</button></li>
</template> 
```

## 观察bug.js

```
// CLIENT

if (Meteor.is_client) {
    Notes = new Meteor.Collection("notes_collection");

    Meteor.autosubscribe(function () {
        Meteor.subscribe("notes_subscription");
    });

    Template.main.notes = function () {
        return Notes.find();
    };

    Template.note_row.events = {
        "click button[name='delete']": function (evt) {
            Meteor.call("deleteNote", this._id, function (error, result) {
                if (!error) {
                    console.log("Note deletion successful.");
                } else {
                    console.log("Error when deleting note.");
                }
            });
        }
    };
}

// SERVER

if (Meteor.is_server) {
    Notes = new Meteor.Collection("notes_collection");

    Meteor.methods({
        "deleteNote": function (note_id) {
            try {
                Notes.remove(note_id);
                return true;
            } catch (e) {
                return false;
            }
        }
    });

    Meteor.publish("notes_subscription", function () {
        var notes = Notes.find({}, {sort: {title: 1}});
        var self = this;

        // What we're doing here is basically making an exact duplicate
        // of the notes collection. A possible use-case for this would be
        // to actually make changes to the copied collection on the fly,
        // such as adding new fields without affecting the original
        // collection.
        var upsertHandler = function (note, idx) {
            note.some_new_field = 100;
            self.set("notes_collection", note._id, note);
            self.flush();
        };

        var handle = notes.observe({
            added: upsertHandler,
            changed: upsertHandler,
            removed: function (note, idx) {
                // As far as I can tell, unset won't remove the document,
                // only attributes of the document. I don't think there's
                // a method to handle actually removing a whole document?
                self.unset("notes_collection", note._id);
                self.flush();
            }
        });

        self.onStop(function () {
            handle.stop();
            self.flush();
        });
    });

    // Add example notes
    Meteor.startup(function () {
        if (Notes.find().count() === 0) {
            Notes.insert({title: "Note #1"});
            Notes.insert({title: "Note #2"});
            Notes.insert({title: "Note #3"});
            Notes.insert({title: "Note #4"});
            Notes.insert({title: "Note #5"});
            Notes.insert({title: "Note #6"});
        }
    });
} 
```

## 你会看到什么

当您启动此应用程序时，您会看到 6 个示例“注释”，每个示例都有一个删除按钮。我建议打开你的控制台，这样你就可以看到`console.log`s. 单击任何笔记上的删除按钮。该注释确实被删除了，但是这不会反映给客户端。

我怀疑问题在于我如何利用`observe`来创建集合的副本（然后我可以在不影响原始集合的情况下对其进行操作）。我觉得我需要一个删除整个文档的函数，而不仅仅是一些属性（`unset`）。

**编辑：请参阅[http://observebug.meteor.com/上的示例](http://observebug.meteor.com/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:41:14.450

所以我想通了。我确实需要使用`observe`，并且没有 Meteor 错误。只是对我试图完成的事情缺乏了解。幸运的是，我在 Meteor 代码本身中找到了一个很好的起点，并编写了 _publishCursor 函数的调整版本，我称之为 publishModifiedCursor。

以下是调整后的项目模板和代码：

## 观察.html

```
<head>
    <title>observe</title>
</head>

<body>
    {{> main}}
</body>

<template name="main">
    <h1>Example in trying to publish a modified copy of a collection</h1>
    <div>
        <h2>Notes:</h2>
        <ul>
            {{#each notes}}
                {{> note_row}}
            {{/each}}
        </ul>
        <p><button name="add">add note</button></p>
    </div>
</template>

<template name="note_row">
    <li>
        <strong>Original title:</strong> <em>{{title}}</em><br />
        <strong>Modified title:</strong> <em>{{__modified_title}}</em><br />
        <button name="delete">delete</button>
    </li>
</template> 
```

## 观察.js

```
// CLIENT

if (Meteor.is_client) {
    ModifiedNotes = new Meteor.Collection("modified_notes_collection");

    Meteor.autosubscribe(function () {
        Meteor.subscribe("modified_notes_subscription");
    });

    Template.main.notes = function () {
        return ModifiedNotes.find();
    };

    Template.main.events = {
        "click button[name='add']": function (evt) {
            Meteor.call("addNote", function (error, result) {
                if (!error) {
                    console.log("Note addition successful.");
                } else {
                    console.log("Error when adding note.");
                }
            });
        }
    };

    Template.note_row.events = {
        "click button[name='delete']": function (evt) {
            Meteor.call("deleteNote", this._id, function (error, result) {
                if (!error) {
                    console.log("Note deletion successful.");
                } else {
                    console.log("Error when deleting note.");
                }
            });
        }
    };
}

// SERVER

if (Meteor.is_server) {
    Notes = new Meteor.Collection("notes_collection");

    Meteor.methods({
        "addNote": function () {
            try {
                Notes.insert({title: "Note #" + (Notes.find().count() + 1)});
                return true;
            } catch (e) {
                return false;
            }
        },
        "deleteNote": function (note_id) {
            try {
                Notes.remove(note_id);
                return true;
            } catch (e) {
                return false;
            }
        }
    });

    Meteor.publish("modified_notes_subscription", function () {
        // Pull up the original notes_collection
        var notes = Notes.find({}, {sort: {title: 1}});

        // Publish a near identical collection, with modifications
        this.publishModifiedCursor(notes, "modified_notes_collection", function (note) {
            note.__modified_title = getTitleModifiedByServer(note.title);
            return note;
        });
    });

    var getTitleModifiedByServer = function (title) {
        return title + "!!!";
    };

    // Add example notes
    Meteor.startup(function () {
        if (Notes.find().count() === 0) {
            Notes.insert({title: "Note #1"});
            Notes.insert({title: "Note #2"});
            Notes.insert({title: "Note #3"});
            Notes.insert({title: "Note #4"});
            Notes.insert({title: "Note #5"});
            Notes.insert({title: "Note #6"});
        }
    });

    _.extend(Meteor._LivedataSubscription.prototype, {
        publishModifiedCursor: function (cursor, name, map_callback) {
            var self = this;
            var collection = name || cursor.collection_name;

            var observe_handle = cursor.observe({
                added: function (obj) {
                    obj = map_callback.call(self, obj);
                    self.set(collection, obj._id, obj);
                    self.flush();
                },
                changed: function (obj, old_idx, old_obj) {
                    var set = {};
                    obj = map_callback.call(self, obj);
                    _.each(obj, function (v, k) {
                        if (!_.isEqual(v, old_obj[k])) {
                            set[k] = v;
                        }
                    });
                    self.set(collection, obj._id, set);
                    var dead_keys = _.difference(_.keys(old_obj), _.keys(obj));
                    self.unset(collection, obj._id, dead_keys);
                    self.flush();
                },
                removed: function (old_obj, old_idx) {
                    old_obj = map_callback.call(self, old_obj);
                    self.unset(collection, old_obj._id, _.keys(old_obj));
                    self.flush();
                }
            });

            self.complete();
            self.flush();

            self.onStop(_.bind(observe_handle.stop, observe_handle));
        }
    });
} 
```

在[http://observebug.meteor.com/](http://observebug.meteor.com/)现场观看。最终效果令人印象深刻，因为它只是一个涉及添加/删除笔记的测试......但是现在它可以工作了！

希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T23:33:03.287

[this.unset](http://docs.meteor.com/#publish_unset)需要三个参数，第一个和第二个正确；但是，它需要第三个参数来告知要取消设置哪些属性。这是您的代码中的错误，而不是 Meteor 中的错误。

但是，请注意，当您的回调被调用时，文档已经从集合中删除，并且您只是在处理对象的副本。确切地说，`Notes.find({}).count()`在回调期间的任何时候显示剩余计数。

```
// I don't think there's  
// a method to handle actually removing a whole document? 
```

*如果您想要两个集合，请创建两个集合。*通过只保留一个并尝试执行各种魔术，您正在调用甚至不打算执行您希望它们执行的操作的函数。如果你只是创建

```
Notes_copy = new Meteor.Collection("notes_collection_copy"); 
```

并使用它来跟踪临时笔记，您将不会遇到现在遇到的任何麻烦。

# xml - 对肥皂的 xpath 有重大问题，请

> ID：10643527
> 
> 赞同：0
> 
> 时间：2012-05-17T21:06:33.113
> 
> 标签：xml, xpath, xmldom

我很难在此肥皂消息中获取某些节点的值。请帮忙。

我需要获取 SubTotal 节点（值=68682）：

**"/child::soap:Envelope/child::soap:Body/child::def:ValuationOut/child::def:MMHValuation/child::def:CalculationResult/child::def:PrimaryStructureStandardizedCost/child::def:SubTotal "**

由于某种原因，上面的 xpath 表达式不起作用。请帮忙。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<soap:Header>
<wsa:Action>http://abcdefg.com/expresslync/rct:ExportValuation-NumResponse</wsa:Action>
<wsa:MessageID>urn:uuid:81566a22-9b8b-41bc-9e6b-66b72e73773f</wsa:MessageID>
<wsa:RelatesTo>urn:uuid:ad4da6ca-690a-466e-aba0-16e94e153b55</wsa:RelatesTo>
<wsa:To>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
<wsse:Security>
<wsu:Timestamp wsu:Id="Timestamp-a3b7efdc-d0a3-40f9-bb14-8dcc1c64109d">
<wsu:Created>2012-05-16T21:40:53Z</wsu:Created>
<wsu:Expires>2012-05-16T21:45:53Z</wsu:Expires>
</wsu:Timestamp>
</wsse:Security>
</soap:Header>
<soap:Body>
<ValuationOut xmlns="http://abcdefg.com/expresslync/rct">
<MMHValuation xmlns="http://abcdefg.com/expresslync/rct/valuation">
<ValuationIdentifier>
<RecordId>1677849</RecordId>
<PolicyNumber>RBPFIKQNCPVUAELLGVKY</PolicyNumber>
<VersionId>7091601</VersionId>
</ValuationIdentifier>
<RecordType>POL</RecordType>
<PolicyStatus>Complete</PolicyStatus>
<DataSource>BW</DataSource>
<PropertyAddress>
<Address1/>
<Address2/>
<City/>
<StateOrProvince>CA</StateOrProvince>
<ZipOrPostalCode>90048</ZipOrPostalCode>
</PropertyAddress>
<OwnerUser>UnknownUser</OwnerUser>
<AssignedByUser>msbsupport</AssignedByUser>
<CreateDate>2012-05-16T14:40:51.393</CreateDate>
<CreateUser>msbsupport</CreateUser>
<UpdateDate>2012-05-16T14:40:51.393</UpdateDate>
<UpdateStatusDate>2012-05-16T14:40:51.393</UpdateStatusDate>
<UpdateUser>msbsupport</UpdateUser>
<PolicyEffectiveDate>2012-05-16T14:41:00</PolicyEffectiveDate>
<PolicyRenewalDate>2013-05-16T14:41:00</PolicyRenewalDate>
<InsuredCustomer>
<MailingAddressSameAsPropertyAddress>false</MailingAddressSameAsPropertyAddress>
<MailingAddress>
<Address1/>
<Address2/>
<City/>
<StateOrProvince/>
<ZipOrPostalCode/>
</MailingAddress>
</InsuredCustomer>
<CurrentCoverageAmount>111111</CurrentCoverageAmount>
<Comment Type="Some Comment"/>
<Comment Type="Some Other Comment"/>
<AttachmentCount>0</AttachmentCount>
<CalculationResult>
<CalcUser>somesupport</CalcUser>
<CalcDate>2012-05-16T14:40:51.377</CalcDate>
<CostDataVersion>
<Id>2012/05</Id>
<Description/>
<Date>2012-05-15</Date>
</CostDataVersion>
<BuildingSystemCost>
<LaborCost>0</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>0</MaterialCost>
<System>Sitework</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>2292</LaborCost>
<EquipmentCost>11</EquipmentCost>
<MaterialCost>1755</MaterialCost>
<System>Foundations</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>0</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>0</MaterialCost>
<System>SlabonGrade</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>4043</LaborCost>
<EquipmentCost>13</EquipmentCost>
<MaterialCost>13964</MaterialCost>
<System>Framing</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>1249</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>2348</MaterialCost>
<System>Roofing</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>4833</LaborCost>
<EquipmentCost>85</EquipmentCost>
<MaterialCost>8831</MaterialCost>
<System>ExteriorWalls</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>2619</LaborCost>
<EquipmentCost>18</EquipmentCost>
<MaterialCost>3040</MaterialCost>
<System>Partitions</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>743</LaborCost>
<EquipmentCost>9</EquipmentCost>
<MaterialCost>859</MaterialCost>
<System>WallFinishes</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>817</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>1744</MaterialCost>
<System>FloorFinishes</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>618</LaborCost>
<EquipmentCost>8</EquipmentCost>
<MaterialCost>329</MaterialCost>
<System>CeilingFinishes</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>1366</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>2742</MaterialCost>
<System>ElectricalSystems</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>0</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>0</MaterialCost>
<System>AttachedStructures</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>0</LaborCost>
<EquipmentCost>0</EquipmentCost>
<MaterialCost>0</MaterialCost>
<System>DetachedStructure</System>
</BuildingSystemCost>
<BuildingSystemCost>
<LaborCost>0</LaborCost>
<EquipmentCost>137</EquipmentCost>
<MaterialCost>0</MaterialCost>
<System>GeneralConditions</System>
</BuildingSystemCost>
<PrimaryStructureStandardizedCost>
<InsurableReplacementCost>72109</InsurableReplacementCost>
<InsuredValue>0</InsuredValue>
<Depreciation>0</Depreciation>
<Subtotal>**68682**</Subtotal>
<Adjustment>0</Adjustment>
<ActualCashValue>50477</ActualCashValue>
<LaborCost>21862</LaborCost>
<EquipmentCost>285</EquipmentCost>
<MaterialCost>46535</MaterialCost>
<SubTotal>68682</SubTotal>
<TotalReplacementCost>72109</TotalReplacementCost>
<PolicyExclusions>0</PolicyExclusions>
<HistoricalDepreciation>21632</HistoricalDepreciation>
<RCLessHistoricalDepreciation>50477</RCLessHistoricalDepreciation>
<CurrentCoveragePercentOfIRC>154.00</CurrentCoveragePercentOfIRC>
<DebrisRemoval>3427</DebrisRemoval>
<SubtotalAfterDebrisRemoval>72109</SubtotalAfterDebrisRemoval>
<FinishedFloorArea>1111</FinishedFloorArea>
</PrimaryStructureStandardizedCost>
<DetachedStructuresStandarddizedCost>
<InsurableReplacementCost>0</InsurableReplacementCost>
<InsuredValue>0</InsuredValue>
<Depreciation>0</Depreciation>
<Subtotal>0</Subtotal>
<Adjustment>0</Adjustment>
<ActualCashValue>0</ActualCashValue>
<PercentOfPrimaryStructureIRC>0.00</PercentOfPrimaryStructureIRC>
<DebrisRemoval>0</DebrisRemoval>
<SubtotalAfterDebrisRemoval>0</SubtotalAfterDebrisRemoval>
</DetachedStructuresStandarddizedCost>
<WholeBuildingCost>
<InsurableReplacementCost>72109</InsurableReplacementCost>
<InsuredValue>72109</InsuredValue>
</WholeBuildingCost>
</CalculationResult>
<Preferences>
<ExcavationFlag>true</ExcavationFlag>
</Preferences>
<Adjustment>
<GeneralPercentage>0.00</GeneralPercentage>
<DepreciationChoice>EnteredPercentage</DepreciationChoice>
<DepreciationPercentage>0.00</DepreciationPercentage>
<DepreciationEffectiveAge>0</DepreciationEffectiveAge>
<WageType>Reconstruction</WageType>
<ApplyHistoricalDepreciation>true</ApplyHistoricalDepreciation>
</Adjustment>
<Building>
<SiteAccess>Flat_Area_Roads</SiteAccess>
<HomeStyle>SingleWide</HomeStyle>
<Component>
<Material>015123</Material>
<Amount>100.00</Amount>
</Component>
<Component>
<Material>015001</Material>
<Amount>100.00</Amount>
</Component>
<Component>
<Material>035503</Material>
<Amount>75.00</Amount>
</Component>
<Component>
<Material>055002</Material>
<Amount>1.00</Amount>
</Component>
<Component>
<Material>055102</Material>
<Amount>2.00</Amount>
</Component>
<Component>
<Material>060021</Material>
<Amount>1.00</Amount>
</Component>
<Section>
<Number>1</Number>
<Name>Main</Name>
<YearBuilt>2000</YearBuilt>
<ContructionType>Standard</ContructionType>
<NoOfStories>1.00</NoOfStories>
<LivingArea>1111</LivingArea>
<PerimeterChoice>Shape</PerimeterChoice>
<LivingAreaEntryMethod>TotalLivingArea</LivingAreaEntryMethod>
<FoundationAndBasement>
<PiersRaisedPct>100</PiersRaisedPct>
<BasementPct>0</BasementPct>
</FoundationAndBasement>
<Framing Type="Wood2x4" Percent="100"/>
<HingedRoof>false</HingedRoof>
</Section>
</Building>
</MMHValuation>
</ValuationOut>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:12:32.717

只是 xpath: //SubTotal 将返回 SubTotal 节点。

# iphone - 当系统在后台清除应用程序时会发生什么？

> ID：10643529
> 
> 赞同：0
> 
> 时间：2012-05-17T21:06:42.323
> 
> 标签：iphone, cocoa-touch

我知道我的应用程序可以在后台被系统杀死。

是否也可以发布其数据结构但应用程序没有被杀死？

*   我用来将用户数据保存在`-(void)applicationWillEnterForeground:`.
*   我总是在`-(BOOL)application:didFinishLaunchingWithOptions:`

我还应该恢复本地数据`-(void)applicationWillEnterForeground:`吗？

如果应用程序被杀死，它会回来，`-(BOOL)application:didFinishLaunchingWithOptions:`所以我的数据将被恢复，但如果它没有被杀死但它的数据结构被释放，它将回来，`- (void)applicationWillEnterForeground:`所以不会恢复任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:42:48.943

如果您的应用程序被杀死然后重新启动，您`-application: didFinishLaunchingWithOptions:`将被调用。

如果您的应用程序在后台运行，然后`-applicationWillEnterForeground:`将被调用恢复。

`-applicationWillEnterForeground:`调用时您不需要恢复数据状态。

# html - 无法从列表中删除 CSS 项目符号

> ID：10643530
> 
> 赞同：12
> 
> 时间：2012-05-17T21:06:47.413
> 
> 标签：html, css

我正在与 CSS 打架，但不知道如何删除子弹。是的，我知道这听起来很简单，但请听我说完。我有另一个来自我们公司办公室的外部 CSS 文件，其中的样式阻碍了我的生活，我无法弄清楚如何覆盖它们。我已经尝试了 !important 令牌，但它也不起作用。我正在使用 chrome，但检查员还没有帮助我弄清楚是什么原因造成的。无论如何，这是我的代码，它可以很好地独立运行，但是一旦我将公司 CSS 文件放在那里，愚蠢的子弹又回来了。啊!

```
 <ul style="list-style-type:none;">
        <li>First</li>
        <li>Second</li>
        <li>Third</li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-17T21:42:19.133

这听起来更像是[CSS 特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)的问题。您不能“覆盖”其他样式，就其本身而言，您只能创建更具体的其他样式。在不知道其他 CSS 长什么样的情况下，通常有三种方法可以做到这一点：

## 内联样式

就像你在你的例子中一样。这些是*最*具体的，因此可以保证它们可以工作，但也可以保证它们在工作时会让人头疼。通常，如果您使用这些，则需要修复某些内容。

## 向无序列表添加一个`id`属性，

然后`id`在你的 CSS 中使用作为选择器。使用 an`id`作为选择器比使用 a`class`或元素类型更具体。它是一个有用的工具，可用于切割您可能从其他地方继承的一堆样式。

```
<ul id="the-one">
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
</ul>

ul#the-one {
  list-style-type: none;
} 
```

## 使用属性集*将*所有HTML包装在 a 中。`div``id`

这是我通常做的。它允许我在我的 CSS 样式中使用`div`它，以*确保*我的样式始终优先。另外，这意味着我只需要选择一个有意义的名称，然后我就可以像往常一样设置 HTML 的其余部分。这是一个例子：`id`*`id`*

 *```
<div id="wrapper">
  <ul>
      <li>First</li>
      <li>Second</li>
      <li>Third</li>
  </ul>
  <p>Some text goes here</p>
</div>

div#wrapper ul {
  list-style-type: none;
}

div#wrapper p {
  text-align: center;
} 
```

使用该技术是确保您将大部分时间用于自己的样式而不是尝试调试其他人的样式的好方法。当然，你必须`div#wrapper`在每个样式的开头加上，但这就是[SASS](http://sass-lang.com/)的用途。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T21:08:41.357

我有同样的问题，我试图改变一个joomla网站的CSS，最后发现li的背景图片是子弹......（模板是JAT3）。这是代码：

```
.column ul li {
  background: url(../images/bullet.gif) no-repeat 20px 7px;
  ...
} 
```

希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T21:20:56.580

确保您尝试覆盖的规则在 UL 上，而不是在 LI 上。我已经看到该规则适用于 LI，并且像上面那样覆盖 UL 将无效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-29T11:05:29.790

我的情况类似于@fankoil 描述的情况：我继承的 css 有

```
main-divname ul li{
  background-image:url('some-image.png');
} 
```

为了摆脱这个特定的 ul，我给了 ul 一个 id

```
<ul id="foo">
... 
```

并在 css 中，关闭此特定 ul 的背景图像

```
ul#foo li {
  background-image: none !important;
} 
```

因此，要对以前的一些答案进行一些澄清：

*   列表样式类型在 ul
*   li 上的背景图像

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-07T20:53:13.580

诀窍很简单：

HTML 得到：

```
<ul id="the-one">
    <li>First</li>
    <li>Second</li>
    <li>Third</li>
</ul> 
```

风格得到：

```
ul#the-one {list-style-type: none;} 
```

但是，接下来的两个选项会让您大吃一惊：

```
li {width: 190px; margin-left: -40px;} // Width here is 190px for the example. 
```

我们限制宽度并强制 li 段落向左移动！

在此处查看一个很棒的示例：http: [//jsfiddle.net/467ovt69/](http://jsfiddle.net/467ovt69/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T21:32:00.180

最好不要使用内联样式，而是使用类来调用它：

```
<ul class="noBullets">

.noBullets {
list-style-type:none !important;
} 
```

如果您找不到覆盖您的样式，您可以使用[!important](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)属性。最好先使用 chrome 或 firefox 的 Inspect 元素（或 firebug）在线检查您的代码。

编辑：

根据您的评论，样式来自 div#wrapper ul。你试过了吗：

```
div#wrapper ul {
list-style-type:none !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-03T16:51:49.053

好问题; 即使使用 list-style:none; 项目符号在 IE 中的显示方式也很奇怪。

这是删除项目符号的代码：

```
/* media query only applies style to IE10 and IE11 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    /* removes bullets in list items for IE11*/ 
    li {
        list-style-position: outside;
        overflow: hidden;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-16T05:48:24.967

检查您的 css 中的以下代码行：

```
.targeted-class-name>ul>li>a:before {
    content: "•";
} 
```

那是我的罪魁祸首

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-04-17T15:06:30.053

我认为您也可以通过使用 span 将文本包装在列表项中来解决您的问题，然后使用以下内容：

```
ul>li:nth-child(odd) > span:before {
    display:none;
}

ul>li:nth-child(even) > span:before {
    display:none;
} 
```

> 奇数和偶数是可用于匹配索引为奇数或偶数的子元素的关键字，并且 display=none 将通过不在 span 元素之前显示元素来解决问题。*

# c# - 读取文件的最快方法

> ID：10643537
> 
> 赞同：1
> 
> 时间：2012-05-17T21:07:16.677
> 
> 标签：c#, .net, xml, file-access

我的应用程序当前实现了一个 FileSystemWatcher 对象来监视目录 (C:\Incoming) 以创建文件 (Input.xml)。

我目前正在使用 Streamreader 对象将文件读入我的应用程序，但是考虑到数据将用于在 SQL Server 数据库中执行操作，我担心性能。

将文件读入内存（或者我已经在使用它）的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:11:58.987

您正在使用标准方法来完成任务。

如果您需要将数据（即大数据）加载到数据库中，瓶颈将在您的代码和数据库之间，除非您使用一种`BULK INSERT`技术，而不是逐行插入。其细节取决于特定的数据库服务器。但是，如果文件相对较小，则无需担心，在这种情况下，负载将分布得更均匀。即便如此，我也不会太在意磁盘访问的速度。

在开始阅读之前，请确保文件已完全写入。例如，尝试先打开它以进行独占阅读。如果您可以通过重命名操作而不是创建操作来访问该文件，这确实会有所帮助，特别是如果您希望有很多文件到达，因为您的服务器端不必忙于等待文件完全完成书面。这基本上意味着该文件应首先使用您不观看的文件名写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:19:23.413

.NET 也有[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类

# php - 无法从 PHP 中取回价值

> ID：10643542
> 
> 赞同：0
> 
> 时间：2012-05-17T21:07:34.633
> 
> 标签：php, jquery, post

JavaScript

```
$.ajax({
    type : 'POST',
    url : 'post.php',           
    data: dataString,
    success:function (data) {
        if (data==null) { alert("darnit!!!!");}    
            //$("#response").append(data);
            alert(dataString);
        }          
    });     
}); 
```

在 PHP 文件中只是一个简单的

```
print_r($_REQUEST); 
```

也试过

```
echo "got iT!"; 
```

但是什么都没有，一直在寻找尝试过不同的东西，但没有运气首先 `//alert (dataString);`起作用，但在`success:function (data)`我没有收到任何警报之后 - 页面内没有响应！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:21:37.720

JQuery 忽略您的数据返回通常意味着它不理解返回的格式，或者不知道会发生什么。将 dataType 设置为可接受的格式，并仔细检查您的 PHP 脚本是否确实将某些内容发送回 Firebug 控制台中的页面。

```
$.ajax({
    type : 'POST',
    url : 'post.php',           
    data: dataString,
    dataType: 'text',
    success:function (data) {
        if (data==null) { alert("darnit!!!!");}    
            //$("#response").append(data);
            alert(dataString);
        }          
    });     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:24:04.473

首先：你错过了 ajax 函数的 dataType 属性，接下来，你需要传递 json 类型的数据，并且你在代码中有语法错误，试试这个：

```
$.ajax({
    type : 'POST',
    url : 'post.php',
    dataType: 'text',           
    data: {
        data_to_pass: dataString
    },
    success:function (data) {
        if (data==null) { 
            alert("darnit!!!!");
        } else {    
            //$("#response").append(data);
            alert(dataString);
        }          
    });     
}); 
```

在 PHP 中：

```
$dataString = $_POST['data_to_pass'];
if($dataString) {
    echo "got IT!";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:33:45.080

您的代码段中有一个 SyntaxError。我不确定这是否也在你的真实代码中。

请务必[`json_encode`](http://php.net/json_encode)在您的 PHP 文件和[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)`dataType: 'json'`中使用。并且始终使用回调。如果出现故障，您不希望您的应用程序无限期冻结。`error`

像这样的东西：

```
$.ajax({
    url: 'api.php',        
    data: {
        action: 'greet',
        foo: 'bar',
        baz: 'quux'
    }, 
    type: 'POST',  
    dataType: 'json',
}).then(function (response) {
    console.log(response); // DEBUG
    if (response.error) {
        alert('Greet Error: ' + response.error);
    } else {
        alert(response.greet);
    }
}).catch(function (jqXHR) {
    console.log('AJAX Error', jqXHR); // DEBUG
    alert('AJAX Error: Request failed');
}); 
```

PHP：

```
<?php
$input = $_POST;
$response = array();

if (!isset($input['action'])) {
    $response['error'] = 'Action parameter required';
} else {
    if ($input['action'] === 'greet') {
        if (!isset($input['foo']) || !isset($input['bar'])) {
            $response['error'] = 'Invalid greet request';
        } else {
            $response['greet'] = 'Welcome home, David!';
        }
    } else {
        $response['error'] = 'Unknown action';
    }
}

header('Content-Type: application/json; charset=utf8');
echo json_encode($response); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T20:39:54.863

我想分享以下内容，我想我已经解决了这个问题。

除了我确实犯了一个错误之外，从表单中检索值有点错误。所以第一个警报给了我`name=[Object name]`，现在那很愚蠢。

就我而言，没有得到结果的问题似乎是 jquery 本身的问题。我不知道这是否是其他人遇到的同样问题。我用 1.4 替换了 jquery 1.7 的包含文件。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

比使用以下代码（仅来自 $.ajax）。

```
var dataString = $("#contactForm").serialize();
$.ajax({
    type: 'POST',
    url: './php/mail.php',
    data: dataString,
    success: function(msg){
        if (msg === 'sent'){
            $('#success').text('Message sent!');
        } else{
            $('#success').text('Mail Error. Please Try Again.!');   
        }
    }
}); 
```

现在我让它工作了——并且会根据我的需要对其进行一些调整！

谢谢大家的帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-17T21:20:37.523

试试这个：

```
$.ajax({
    type : 'POST',
    url : 'post.php',           
    data: dataString,
    success:function (data) {
        if (data===undefined) { alert("darnit!!!!");}    
            //$("#response").append(data);
            alert(data);
        }          
    });     
}); 
```

此外，我会考虑在您的 php 文件中的数组上使用 json_encode 并返回一个 json 对象。

# jquery - IE 7 中的 e.preventDefault 问题

> ID：10643543
> 
> 赞同：0
> 
> 时间：2012-05-17T21:07:35.040
> 
> 标签：jquery, internet-explorer-7

所以我在我的网站顶部有一个链接列表，允许用户点击它们，当这个点击事件发生时，我有一个 javascript 函数，可以滚动页面上一个 div 内的一个非常大的链接列表。问题在于 IE7 以及它在触发时如何处理单击事件。我正在使用 jquery 来阻止默认操作，这在 Chrome、Safari、Firefox 和 IE 8/9 中运行良好，但在 IE7 中，浏览器正试图以默认方式使用锚点。这个锚点的 href 属性只是一个字符串，它可以帮助我识别页面下部的链接。如果我单击 IE7 中的链接，我会得到 404，但如果我点击后退按钮并再次单击链接，则脚本可以正常工作，并且事件会以正确的方式处理。我也试过

```
event.preventDefault ? event.preventDefault() : event.returnValue = false; 
```

而不是 e.preventDefault() 但这对 IE7 在我的场景中处理点击事件的方式没有影响。

有什么建议么？此外，在我的页面上，我有一个选项卡式导航，如果用户当前正在查看另一个选项卡（只有 2 个选项卡），它会隐藏与该选项卡关联的数据。两个选项卡中的内容大致相同，结构完全相同，但是当我在第一个（默认）选项卡中的链接上执行导致上述错误的完全相同的过程时，IE 没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:08:51.947

事实证明，IE7 在将事件绑定到页面上隐藏的元素方面存在一些问题。或者至少这是我可以从正在发生的问题中得出的结论。我没有使用 .click 事件处理程序，而是找到了 jQuery 提供的一个名为 .on() 的方法，它取代了自 1.7 版以来已弃用的 .live() 方法。

> *“.on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供附加事件处理程序所需的所有功能。”*

这似乎可以解决 IE7 中的问题。

# asp.net-mvc-4 - 我应该在我的 ASP.Net MVC 4 包中包含 jQuery 还是使用 CDN？

> ID：10643544
> 
> 赞同：4
> 
> 时间：2012-05-17T21:07:39.563
> 
> 标签：asp.net-mvc-4, cdn

如果我将我的 js 文件捆绑在一起，我还应该从 CDN 获取 jQuery 吗？

# regex - 正则表达式一个点或一个下划线验证器

> ID：10643546
> 
> 赞同：4
> 
> 时间：2012-05-17T21:07:53.473
> 
> 标签：regex, validation, zend-validate

这是我的正则表达式

```
^(([a-z0-9]+)\.([a-z0-9]+)){4,20}$|^(([a-z0-9]+)\_([a-z0-9]+)){4,20}$ 
```

这将是一个带有单个点或单个下划线或没有 uderline 和点的单词。我还希望这个表达式在 4 到 20 个字符之间（它将是 db 中的用户名）

这个正则表达式

```
^(([a-z0-9]+)\.([a-z0-9]+))$ 
```

和这个

```
^(([a-z0-9]+)\_([a-z0-9]+))$ 
```

工作成功，但我不知道如何限制字符串长度

：（ 请帮忙

我将与 zend 框架正则表达式验证器一起使用它...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T21:19:37.333

```
^(?=[^\._]+[\._]?[^\._]+$)[\w\.]{4,20}$ 
```

解释：

```
^            - Start of string
(?=          - Followed by (not part of match)
  [^\._]+    - Anything but . and _
  [\._]?     - Optional . or _
  $          - End of string
)
[\w\.]{4,20} - 4-20 letters, digits, _ and .
$            - End of string 
```

确保字符串`(?=[^\._]+[\._]?[^\._]+$)`包含不超过 1`.`或。`_`其余的匹配字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:24:59.263

您应该使用第二个验证器来验证长度，而不是在正则表达式中，因为这将提高代码的可读性。使用[Regex](http://framework.zend.com/manual/1.11/en/zend.validate.set.html#zend.validate.set.regex)`^[a-z0-9]+[._][a-z0-9]+$`验证器作为您的正则表达式，并使用[StringLength](http://framework.zend.com/manual/1.11/en/zend.validate.set.html#zend.validate.set.stringlength)验证器检查长度。

# ruby-on-rails - ActionView::MissingTemplate：Rails 不寻找 JSON 格式

> ID：10643548
> 
> 赞同：1
> 
> 时间：2012-05-17T21:07:56.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview, jbuilder

我正在使用Backbone.js，因此使用JSON（jbuilder）部分引导数据（使用HAML）：

```
App.users = new App.UserList(#{render('users/index', :formats => [:json], :handlers => [:jbuilder], locals: {users: @users})})}, {silent:true}); 
```

它给了我这个错误：

```
ActionView::Template::Error (Missing partial users/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :jbuilder, :arb, :coffee, :haml]}. Searched in: 
```

请注意，尽管我传入了 'formats: [:json]'，但它只是在寻找 ':html' 格式。我应该做一些不同的事情吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:29:23.533

你用的是什么版本的 Rails？此问题在 3.2.3 中已修复，但在早期版本中存在。

为了快速修复，虽然它会在 Rails 3.2 及更高版本中引起弃用警告，但您可以将格式添加到模板的名称中，即`render('users/index.json' ...`

# c# - 如何压缩文件夹中的所有文件

> ID：10643550
> 
> 赞同：9
> 
> 时间：2012-05-17T21:08:01.137
> 
> 标签：c#, zip

我有一个文件夹`"D:\folder"`，在这个文件夹中我有 10 个文件需要压缩到一个新的存档`"D:\folder.zip"`中。

目前我正在使用**ICSharpCode.SharpZipLib**但这不是强制性要求，因此可以接受其他解决方案。

我面临的问题是，当我尝试执行该方法时，`FileStream fs = File.OpenRead(@"D:\folder")`由于访问指定路径而出现错误。

如何以简单的方式压缩这些文件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T21:11:37.613

[DotNetZip](http://dotnetzip.codeplex.com/)比 SharpZipLib 更容易使用，压缩文件夹中所有文件的示例：

```
 using (ZipFile zip = new ZipFile())
  {
    zip.AddDirectory(@"MyDocuments\ProjectX", "ProjectX");
    zip.Save(zipFileToCreate);
  } 
```

这是此页面的一个示例：

[http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-17T21:20:15.340

我也同意 Antonio Bakula 的建议，即使用 DotNetZip 而不是 SharpZipLib。

.NET 4.5 包括用于操作 .zip 文件的新类[`ZipArchive`](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive%28VS.110%29.aspx)和类。[`ZipFile`](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile%28VS.110%29.aspx)有了这种支持，您尝试通过以下方式完成：

```
ZipFile.CreateFromDirectory(@"D:\Folder", @"Folder.zip"); 
```

* * *

作为旁注，您收到错误的原因是因为您试图打开目录而不是文件。`File.OpenRead`用于打开文件进行读取，因为您提供了一个目录，所以您会收到错误消息。如果要枚举特定文件夹中的文件或目录，可以改用`Directory.EnumerateFiles`或`Directory.EnumerateDirectories`。

# java - 企业和联系人中 JPA OneToMany 的简单示例

> ID：10643552
> 
> 赞同：0
> 
> 时间：2012-05-17T21:08:05.727
> 
> 标签：java, database, jpa, javadb

请我需要一个 JPA 实体的简单示例，表示带有联系人的企业。rc_No(String) 引用了很多联系人的企业；看我的代码，有什么问题

```
@Entity
public class Enterprises implements Serializable {
private static final long serialVersionUID = 1L;
@Id
private String rcNo;

@OneToMany(mappedBy = "enterprises", cascade=CascadeType.PERSIST, fetch=FetchType.EAGER)
private List<Contacts> contacts;

public void addContact(Contacts contact) {
    contacts.add(contact);
}

public String getRcNo() {
    return rcNo;
}

public void setRcNo(String rcNo) {
    this.rcNo = rcNo;
}

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}..... 
```

还要查看联系人实体

```
@Entity
public class Contacts implements Serializable {
@ManyToOne
@JoinColumn(name="rcNo")
private Enterprises enterprises;

public Enterprises getEnterprises() {
    return enterprises;
}

public void setEnterprises(Enterprises enterprises) {
    this.enterprises = enterprises;
}

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
private String fullName;
private String designation;
private String telephoneNo;
private String emailAddress;
..... 
```

# python - Python正则表达式删除花括号内的子字符串

> ID：10643553
> 
> 赞同：5
> 
> 时间：2012-05-17T21:08:11.970
> 
> 标签：python, regex

我有一行有很多单词和字符。我只想删除双花括号中包含的部分

```
{{ }} 
```

我试过`?={{.*}}`了，但我什么也没得到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T21:11:33.953

尝试这个：

```
import re
s = re.sub('{{.*?}}', '', s) 
```

请注意，`{`and`}`通常是正则表达式中的特殊字符，通常应使用反斜杠进行转义以获得其字面意义。但是在这种情况下，它们被解释为文字。

在线查看它：[ideone](http://ideone.com/EzQJJ)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T21:23:16.627

如果您尝试从花括号内提取文本，请尝试以下操作：

```
import re 
s = 'apple {{pear}} orange {banana}'
matches = re.search(r'{{(.*)}}', s)
print matches.group(1) 
```

`group(1)`将包含字符串 'pear'

# sql-server - SQL Server 2008 - 创建连接表

> ID：10643556
> 
> 赞同：0
> 
> 时间：2012-05-17T21:08:25.433
> 
> 标签：sql-server, join, create-table

我在创建一个简单的连接表（关联表等，无论你喜欢什么）时遇到问题。

这些是测试表，所以没有太多内容。

第一个表是

```
CREATE TABLE dbo.CareerField(
CareerFieldID int IDENTITY(1,1) NOT NULL,
CareerFieldName varchar(100) NOT NULL
) 
```

第二张表是

```
CREATE TABLE dbo.Cluster(
ClusterID int IDENTITY(1,1) NOT NULL,
ClusterName varchar(100) NOT NULL
) 
```

创建多对多关系的第三个表（连接表）是

```
CREATE TABLE dbo.CareerField_Cluster(
CareerFieldID int NOT NULL,
ClusterID int NOT NULL
) 
```

我正在尝试使用以下方法在第三个表中设置外键

```
ALTER TABLE dbo.CareerField_Cluster
ADD CONSTRAINT FK_CareerField_Cluster_CareerFieldID
FOREIGN KEY(CareerFieldID) REFERENCES dbo.CareerField(CareerFieldID)

ALTER TABLE dbo.CareerField_Cluster
ADD CONSTRAINT FK_CareerField_Cluster_ClusterID
FOREIGN KEY(ClusterID) REFERENCES dbo.Cluster(ClusterID) 
```

但是，我不断收到错误消息

> 消息 1776，级别 16，状态 0，行 1 引用表 'dbo.CareerField' 中没有与外键 'FK_CareerField_Cluster_CareerFieldID' 中的引用列列表匹配的主键或候选键。消息 1750，级别 16，状态 0，行 1 无法创建约束。请参阅以前的错误。

我尝试将这两个字段设置为主键，但它不允许我在创建键时选择单独的表 - 我不能选择 CareerFieldID 来引用 CareerField 表，然后选择 ClusterID 来引用集群表。

我没有遇到过 MySQL 的这个问题，而且我是 SQL Server 的新手。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:14:40.017

对于您的每个表`CareerField`和`Cluster`，确保您有一个通过`CONSTRAINT`指令指定的 PK。

```
CREATE TABLE [dbo].[CareerField]
(
    [CareerFieldID] [int] IDENTITY(1,1) NOT NULL,
    [CareerFieldName] [varchar](100) NOT NULL,
    CONSTRAINT [PK_Career] PRIMARY KEY CLUSTERED 
    (
        [CareerFieldID] ASC
    )
) 
```

# sed - 从 TNS 条目中提取主机名

> ID：10643560
> 
> 赞同：4
> 
> 时间：2012-05-17T21:08:49.843
> 
> 标签：sed

我正在编写一个脚本，该脚本需要确定本地应用程序正在使用的数据库正在哪个节点上运行。我一直试图以此为契机，强迫自己学习 awk/sed 并拥有一个测试脚本来测试这些语句。它正在处理我已移动到脚本所在的主文件夹的 tnsnames.ora 文件的副本。这是一个有效的 tnsnames.ora 节：

```
(
   DESCRIPTION = (
   ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP) (Host=iplab)(Port=1521))
   ) 
   (CONNECT_DATA=(SID=spurs1)) 
) 
```

在做了一些研究并让 awk 表达式将 tns 条目拉到 $host 之后，我想出了下面的脚本，但它似乎不起作用。

```
#!/bin/ksh
db=spurs

host=$(awk -v db=$db "/${db}/ {for(i=1; i<=5; i++) {getline; print}}" tnsnames.ora)
echo $host
host= $host | sed 's/Host\s=\s\([a-z]+[0-9]?\)/\1/'
echo $host 
```

当我运行 awk 语句时，我得到以下信息：

```
(DESCRIPTION = (ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP) (Host=hostname)(Port=1521))) (CONNECT_DATA=(SID=spurs1)) )
./tns.ksh: line 6: (DESCRIPTION: not found
(DESCRIPTION = (ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP) (Host=hostname)(Port=1521))) (CONNECT_DATA=(SID=spurs1)) ) 
```

从我所看到的阅读教程和论坛中，我认为 sed 设置正确，应该将 $host 设置为一个或多个小写字母，后跟 0 或 1 个数字 Host = 。由于 (DESCRIPTION 是 $host 在 sed 语句之前和之后的开始，我不确定它是如何找不到它的，一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-06T20:58:16.563

这对我有用： `tnsping $db | grep HOST | cut -d\ -f 14 | sed 's/).*//g'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:01:10.200

这可能对您有用：

```
db=spurs
host=$(sed '/^(/,/^)/!d;/^(/{h;d};H;/^)/!d;g;/'"$db"'/!d;s/.*Host=\([^)]*\).*/\1/' tnsnames.ora) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:20:04.793

在我的系统上，只要主机名没有等号（或主机名中的实际文字 HOST），我就可以使用它来获取主机：

回声 $TNS_STRING | sed's/. *主机//g' | sed's/)。*//g' | sed 's/=//g' | sed 's/\s*//g'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T01:37:57.833

您可能最好依靠输出`tnsping`而不是解析文件： tnsping 似乎在一行上发出描述：

```
host=$(
  tnsping $db | while read line; do
    if [[ "$line" == *HOST* ]]; then
      s=${line#*HOST=}; s=${s%%)*}; echo "$s"; break
    fi
  done
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T21:23:24.200

您对 $host 的值可能是多行值，因此您需要在使用它的任何地方引用它，即

```
host=$(awk -v db=$db "/${db}/ {for(i=1; i<=5; i++) {getline; print}}" tnsnames.ora)
echo "$host" 
```

您还需要通过以下方式捕获输出（使用命令替换）`$(...)`

```
host=$(echo "$host" | sed 's/Host\s=\s\([a-z]+[0-9]?\)/\1/')
echo "$host" 
```

（并回显它），所以它可以被处理`sed`

**修订**

```
host=$(echo $host | sed 's/.*Host=//; s/).*$//)
echo "$host" 
```

我已经切换回 just `$host`，没有 dbl 引号，因为您不希望数据中出现换行符。现在它都是一个大字符串，而正则表达式会剥离每个 upto `host=`，然后在第一个剩余`)`字符之后剥离所有内容。

如果您仍然收到错误消息，我无权访问 tnsnames.ora 记录，因此请编辑您的查询以包含有效记录。

我希望这有帮助。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-02-29T06:55:11.733

测试代码：

```
OIFS=$IFS;
IFS="(";
tns=`tnsping TNS_ALIAS`
tns_arr=($tns);
tns_info=(`(for ((i=0; i<${#tns_arr[@]}; ++i)); do  echo "${tns_arr[$i]/)/}"; done)| grep 'HOST\|PORT'|sed 's/)//g'|sed 's/ //g'`)
for ((i=0; i<${#tns_info[@]}; ++i)); do eval "export ${tns_info[$i]}"; done
echo "host:" $HOST
echo "port:" $PORT
IFS=$OIFS; 
```

# macos - 无法将分支推送到 github “使用 git@github.com:Paratron/spacebattles.git”

> ID：10643562
> 
> 赞同：4
> 
> 时间：2012-05-17T21:08:59.157
> 
> 标签：macos, git, github, branch, push

我的 Mac 名称数据库中有一个工作分支，我想将此分支推送到 GitHub，并尝试通过运行：

```
git push -u origin database 
```

并得到以下错误信息：

```
You can't push to git://github.com/Paratron/spacebattles.git
Use git@github.com:Paratron/spacebattles.git 
```

是否存在可能导致此问题的已知问题？是否有任何可能导致此错误的错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T21:13:55.087

就像它说的那样，你不能推送到`git://github.com/Paratron/spacebattles.git`（因为它是一个只读 URL）。试试这个：

```
git remote set-url origin git@github.com:Paratron/spacebattles.git
git push -u origin database 
```

如果您从未以这种方式使用过 git，则需要先将其设置为与 GitHub 一起使用：http: [//help.github.com/mac-set-up-git/](http://help.github.com/mac-set-up-git/)

还有，你是帕拉特恩吗？如果没有，您需要先 fork 他的存储库：http: [//help.github.com/fork-a-repo/](http://help.github.com/fork-a-repo/)。然后，您需要改用您的用户名 ( `git@github.com:YOUR_USERNAME/spacebattles.git`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:13:01.800

您为存储库设置的 URL 是只读 URL。您需要更改远程的 URL，使用[`remote set-url`](http://git-scm.com/docs/git-remote)：

```
git remote set-url origin git@github.com:Paratron/spacebattles.git 
```

# c++ - 如何通过引用或值返回智能指针（shared_ptr）？

> ID：10643563
> 
> 赞同：114
> 
> 时间：2012-05-17T21:09:02.047
> 
> 标签：c++, return, smart-pointers

假设我有一个类，其方法返回一个`shared_ptr`.

按引用或按值返回它可能有哪些好处和缺点？

两个可能的线索：

*   **早期对象破坏。**如果我返回`shared_ptr`by (const) 引用，则引用计数器不会增加，因此当对象超出另一个上下文（例如另一个线程）的范围时，我会承担删除对象的风险。这个对吗？如果环境是单线程的，会不会也出现这种情况呢？
*   **成本。**价值传递当然不是免费的。是否值得尽可能避免它？

谢谢大家。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-17T21:13:08.193

**按值返回智能指针。**

正如您所说，如果您通过引用返回它，您将无法正确增加引用计数，这会带来在不适当的时间删除某些内容的风险。仅此一项就足以成为不通过引用返回的理由。接口应该是健壮的。

由于[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)(RVO)，成本问题现在已经没有实际意义，因此您不会在现代编译器中产生增量 - 增量 - 减量序列或类似的东西。所以返回 a 的最好方法`shared_ptr`是简单地按值返回：

```
shared_ptr<T> Foo()
{
    return shared_ptr<T>(/* acquire something */);
}; 
```

对于现代 C++ 编译器来说，这是一个非常明显的 RVO 机会。我知道即使关闭所有优化，Visual C++ 编译器也会实现 RVO。而使用 C++11 的移动语义，这种担忧就更不重要了。（但唯一可以确定的方法是分析和实验。）

如果您仍然不相信，Dave Abrahams 有[一篇文章](https://web.archive.org/web/20140116234633/http://cpp-next.com:80/archive/2009/08/want-speed-pass-by-value/)提出了按价值返回的论点。我在这里复制了一个片段；我强烈建议您阅读整篇文章：

> 老实说：下面的代码让你感觉如何？
> 
> ```
> std::vector<std::string> get_names();
> ...
> std::vector<std::string> const names = get_names(); 
> ```
> 
> 坦率地说，即使我应该知道得更多，这让我感到紧张。原则上，当`get_names()` 返回时，我们必须复制s`vector`的a `string`。然后，我们需要在初始化时再次复制它 `names`，并且我们需要销毁第一个副本。如果向量中有 N`string`个，则每个副本可能需要多达 N+1 个内存分配和大量缓存不友好的数据访问 > 随着字符串内容的复制。
> 
> 我没有面对这种焦虑，而是经常依靠传递引用来避免不必要的复制：
> 
> ```
> get_names(std::vector<std::string>& out_param );
> ...
> std::vector<std::string> names;
> get_names( names ); 
> ```
> 
> 不幸的是，这种方法远非理想。
> 
> *   代码增长了 150%
> *   我们不得不放弃`const`-ness 因为我们正在改变名称。
> *   正如函数式程序员喜欢提醒我们的那样，变异通过破坏引用透明性和等式推理，使代码的推理变得更加复杂。
> *   我们不再有名称的严格值语义。
> 
> **但是真的有必要这样搞乱我们的代码来提高效率吗？幸运的是，答案是否定的（尤其是在使用 C++0x 时）。**

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-17T21:17:42.997

关于*任何*智能指针（不仅仅是 shared_ptr），我认为返回一个引用是不可接受的，而且我会非常犹豫是否通过引用或原始指针传递它们。为什么？因为你不能确定它以后不会通过引用被浅拷贝。您的第一点定义了为什么这应该是一个问题的原因。即使在单线程环境中也可能发生这种情况。您不需要并发访问数据即可将错误的复制语义放入您的程序中。一旦将指针传递出去，您就无法真正控制用户对指针的操作，因此不要鼓励滥用，给您的 API 用户足够的绳索让自己上吊。

其次，如果可能的话，看看你的智能指针的实现。建造和破坏应该几乎可以忽略不计。如果这个开销是不可接受的，那么不要使用智能指针！但除此之外，您还需要检查您所拥有的并发架构，因为对跟踪指针使用的机制的互斥访问会比仅仅构建 shared_ptr 对象更慢。

编辑，3 年后：随着 C++ 中更现代的特性的出现，我会调整我的答案以更容易接受当你简单地编写一个永远不会存在于调用函数范围之外的 lambda 的情况，而不是复制到别的地方。在这里，如果您想节省复制共享指针的最小开销，那将是公平和安全的。为什么？因为你可以保证引用永远不会被误用。

# maven - 工件权限

> ID：10643571
> 
> 赞同：3
> 
> 时间：2012-05-17T21:09:35.207
> 
> 标签：maven, artifactory

我在使用 Maven + Artifactory 进行配置时遇到问题。

我尝试使用在 Artifactory 中创建的用户下载一个新的外部文件，而我的 Artifactory 没有进行下载，声称“访问被拒绝”，但如果我放置了与远程设置中定义的相同的凭据，我的应用程序可以下载每个外部 jar。

如果我使用与`settings.xml`安装 Artifactory 的远程配置相同的权限设置（用户*admin*），我可以快速下载。

有什么方法可以配置在我的 Artifactory 中创建用户并配置下载新工件的权限？因为我在任何地方都没有找到。

我认为，如果我有可能在我的 Artifactory 中创建一个新用户并授予权限：读取和下载新的人工制品，那么这对我的公司来说更安全，但 Artifactory 中不存在此选项。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T07:14:40.330

因为您已经在 Artifactory 中创建了一个用户实体，所以请确保它至少对您要解析的所有存储库具有[读取权限。](http://wiki.jfrog.org/confluence/display/RTF/Managing+Permissions)

为了更简单的 Maven 配置，您还可以使用 Artifactory为自己[生成适当的 Maven 设置](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution)；这有助于减少拼写错误和参考错误（确保您以您在生成设置时创建的用户实体身份登录）。应用设置文件后，您还可以在项目上运行*mvn help:effective-settings*目标，以确保正确应用所有内容。

最后，如果您需要对正在代理的远程存储库进行身份验证，则需要他在该远程存储库的配置中[指定凭据](http://wiki.jfrog.org/confluence/display/RTF/Advanced+Settings)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-01T14:18:51.817

确保您用于连接到 Artifactory 的用户`Deploy`在 Artifactory 中具有权限。该`Deploy`权限允许用户从存储库下载工件（换句话说，使用远程工件填充缓存）。

[https://www.jfrog.com/confluence/display/RTF/Managing+Permissions](https://www.jfrog.com/confluence/display/RTF/Managing+Permissions)

> **部署**允许部署工件并部署到缓存（即用远程工件填充缓存）

来自 JFrog 论坛的更多信息：

[http://forums.jfrog.org/Maven-using-anonymous-user-even-though-artifactory-server-setup-in-the-settings-xml-td4634521.html](http://forums.jfrog.org/Maven-using-anonymous-user-even-though-artifactory-server-setup-in-the-settings-xml-td4634521.html)

# asp.net - 条形码字体大小应该匹配吗？

> ID：10643582
> 
> 赞同：1
> 
> 时间：2012-05-17T21:09:55.057
> 
> 标签：asp.net, barcode

我正在尝试将字符串转换为 Code39 条形码。为了提高可靠性，我正在尝试将条形码的字体大小从 40 增加到 60。这会导致任何问题，因为与之前版本的字体 40 相比，条的宽度和高度会发生变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:14:11.047

不，扫描仪读取符号宽度之间的比率。只要它们都以相同的方式扩展，就可以了。我怀疑你会看到更高的可靠性。我希望你能发布结果。

# plone - Ploneboard 中的国际化中断？

> ID：10643583
> 
> 赞同：1
> 
> 时间：2012-05-17T21:10:00.907
> 
> 标签：plone

我正在使用克隆 4.1.4。我在构建中添加了 Ploneboard 产品。一切都按预期工作，保存 Ploneboard 的翻译；该产品被困在英语中，即使其他一切都是法语。我确实在 /buildout-cache/eggs/Products.Ploneboard-3.2-py2.6.egg/Products/Ploneboard/i18n/ 目录中看到了所有 .po 文件。

Plone 4.x 中的翻译系统是否发生了变化？我们必须配置其他东西吗？

最好的，

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:48:34.223

您的文件夹权限可能有问题，Plone 可能无法在启动时编译翻译。

您可以在 fg 模式 (./instance fg) 下启动您的 Plone 实例，并查看是否有任何与 ploneboard i18n 文件夹相关的警告消息。

如果这是文件夹权限问题，请尝试停止您的实例并运行以下命令：

```
chown -R plone:root <installation_dir>/buildout-cache/eggs 
```

参考：[修复常见的 Plone 错误](http://howto.biapy.com/en/development/plone-1/configuration/fixing-common-plone-errors)（修复 Zope / Plone 启动时的翻译编译警告）

# php - 如何在PHP中将字符串转换为符号

> ID：10643585
> 
> 赞同：3
> 
> 时间：2012-05-17T21:10:11.937
> 
> 标签：php

如何将密码字符串转换为指定的符号`*`或其他符号。

我目前正在修改密码页面。我想将密码显示到页面，并且我想避免密码被某人忽略，所以我想将密码的字符串转换为`*`具有相同长度的符号。像`<input type="password" />`.

对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T21:16:13.453

```
$output_password = str_repeat ('*', strlen ($input_password)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:17:19.843

如果您正在寻找一种简单的方法来创建等于密码长度的星号字符串：

```
$modified = str_repeat( "*", strlen( "secretpass" ) );

echo $modified; // ********** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:17:34.803

您不会在 HTML 中输出密码，而是创建密码的星号 ( `*`) 表示。这可以通过 str_repeat 函数轻松完成：

```
<?php
$password = "MyPasswordThatIWantToMask";
$maskedPassword = str_repeat("*", strlen($password));
?> 
```

现在您只需将 输出`$maskedPassword`为密码字段的值。

然而，另一个很有趣的事情：你怎么知道用户密码长度？我真诚地希望您对密码进行哈希处理，而不是将它们放在纯文本周围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:12:48.303

像这样做：

```
$passwordstring = "password";
$outputpassword = "";
while(strlen($outputpassword)<strlen($passwordstring))
{
    $outputpassword .= "*";
}

echo $outputpassword 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T21:12:55.337

一种方法是使用密码类型的输入，但将其设置为禁用。

`<input type='password' disabled='disabled' value='somepassword' />`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T21:41:15.673

虽然这里有很多答案展示了 的用户`str_repeat()`，但我有点怀疑这就是你想要的。毕竟，任何白痴都可以用字符填充字符串，而且正如您正确指出的那样，当一个人可以简单地使用时，这样做没有什么意义`<input type="password" />`（是的，您仍然可以从源代码中获取密码，但是那为什么还要费心填充一个混淆的字段呢？或者不只是用静态固定数量的 * 字符填充它？）。

我怀疑你正在寻找更像这样的东西：

```
<?php

  $thePassword = "thisIsMyPassword";

?>

<input type="text" id="input_user_types_in" value="<?php echo str_repeat('*', strlen($thePassword)); ?>" />
<input type="hidden" id="value_to_post_back" name="value_to_post_back" value="<?php echo $thePassword; ?>" />

<script type="text/javascript">

  var textInput = document.getElementById('input_user_types_in');
  var hiddenInput = document.getElementById('value_to_post_back');

  textInput.onfocus = function() {
    this.value = hiddenInput.value;
  };

  textInput.onblur = function() {
    var i;
    hiddenInput.value = this.value;
    this.value = '';
    for (i = 0; i < hiddenInput.value.length; i++) {
      this.value = this.value + '*';
    }
  };

</script> 
```

摆弄[一下](http://jsfiddle.net/EBye5/)它;-)

# nsis - 扩展 NSIS 插件目录

> ID：10643586
> 
> 赞同：4
> 
> 时间：2012-05-17T21:10:18.847
> 
> 标签：nsis

我正在使用 VS 2010 为 NSIS 构建一个插件，我很想设置该项目，以便从一个简单的 NSI 文件自动构建测试设置。

一切似乎都很好，除了我不知道如何让 NSIS 在我的项目的输出文件夹中查找我的插件，而`C:\Program Files (x86)\NSIS\Plugins\*.dll`不仅仅是。

我可以在我的 NSI 脚本中添加任何命令，以使 NSIS 在“标准插件文件夹”之外查找我新构建的插件吗？每次我想测试它时都必须复制我的 DLL 似乎很奇怪。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T21:19:45.307

您可以使用*!addplugindir*指令，参见[nsis compile-time commands](http://nsis.sourceforge.net/Docs/Chapter5.html#5.1.3)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T04:55:44.500

使用带有定义符号的**!addplugindir指令（命令行上的****/D**）。符号是“.dll 文件所在位置的路径”

VS 2010 是使用*Visual & Installer*的最佳选择- 免费的 VS 插件直接在 Visual Studio 中开发 NSIS 安装程序。

在项目属性中设置您的符号：

![VS 2010 中的 NSIS 项目属性](../Images/9915d07007e16d3cc7516eec90ac976a.png) 在此处下载：[www.unsigned-softworks.sk/visual-installer/](http://www.unsigned-softworks.sk/visual-installer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-22T09:48:18.580

正如其他人所提到的，您的 NSI 脚本文件中的**!addplugindir**指令可以解决问题，您可以使用**/D**定义一个变量以在命令行上传递给该指令。

至于要添加到 NSI 文件中的代码，您需要以下内容：

```
!ifdef EXTRANSISPLUGINSFOLDER
  !addplugindir "${EXTRANSISPLUGINSFOLDER}"
!endif 
```

然后在命令行上，你可以像这样调用你的 NSI 脚本：

```
makensis.exe /DEXTRANSISPLUGINSFOLDER=C:\somefolder\moreplugins\ YourInstallerScript.nsi 
```

定义额外文件夹时，您可能会发现文件夹路径中有任何空格会导致问题，并且在路径周围使用引号也无济于事。要解决此问题，请尝试使用`dir /x`Windows 终端中的命令列出名称中带有空格的文件夹的 8.3 DOS 名称。这将帮助您建立一个不包含空格的文件夹路径。`dir /x`（例如 C:\Program Files\ 经常变成 C:\PROGRA~1 当从 C 的根目录开始列出时）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-12T01:43:11.870

可能在这里错过了重点，但您是否可以不使用 XCOPY 构建后事件将输出复制到 NSIS 插件目录？

# javascript - 删除不合格标识符时，严格模式语法错误背后的动机？

> ID：10643587
> 
> 赞同：15
> 
> 时间：2012-05-17T21:10:31.527
> 
> 标签：javascript, ecmascript-5

我无法理解为什么在严格模式下，当`delete`用于非限定标识符时会出现语法错误。

在大多数情况下，这是有道理的......如果您以通常的方式使用`var`关键字声明变量，然后尝试`delete`在它们上使用，在非严格模式下它会静默失败，因此严格模式失败是有意义的在这些情况下会出错。

但是，在某些情况下，您*无法**删除*合格的标识符：

 *```
(function() {

  // "use strict";

  var obj = Object.create({}, { bloop: { configurable: false } });

  delete obj.bloop; // throws TypeError in strict mode, silently fails in non-strict.

  console.log('bloop' in obj); // true

}()); 
```

严格模式必须在这里进行运行时检查，因为遇到这种情况时会抛出 TypeError。还有一些情况*可以*在非严格模式下成功删除不合格的标识符...

```
// "use strict";

window.bar = 6;

console.log(typeof bar); // number

delete bar; // works in non-strict, syntax error in strict!

console.log(typeof bar); // undefined 
```

事实上，据我了解，是否可以删除东西（在非严格模式下）取决于内部`[[Configurable]]`属性，与限定标识符无关。*据我所知，在严格模式下无法删除可*配置的非全局变量（作为本地 VO 的属性）：

```
(function() {

  // "use strict";

  eval('var foo = 5;');

  console.log(typeof foo); // number

  delete foo; // works in non-strict, SyntaxError in strict.

  console.log(typeof foo); // undefined

}()); 
```

所以，我的问题是，`delete`在不合格的标识符上使用时抛出 SyntaxError 有什么意义，如果属性不可配置，TypeError 无论如何都会抛出？这似乎是一个不必要的限制，在某些情况下，除了不使用严格模式（第三个示例）之外似乎没有任何解决方法。谁能解释这个决定背后的动机？

* * *

更新：我刚刚意识到我忽略了直接`eval`调用在严格模式下有自己的范围，而不是调用函数的范围，所以在第三个示例`foo`中不会在严格模式下定义。无论如何，运行时检查仍然会捕捉到这一点，但它提出了一个附带问题：有没有办法在严格模式下拥有可配置的局部变量，就像我们`eval`在非严格模式下使用 'd 变量声明一样？AFAIK 是`eval`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T08:41:32.457

您在谈论[第 11.4.1 节第 5.a 段。](http://es5.github.com/#x11.4.1)规格：

> 5.  否则， ref 是对环境记录绑定的引用，所以
>     a. 如果 IsStrictReference(ref) 为真，则抛出 SyntaxError 异常。
>     湾。让绑定为 GetBase(ref)。
>     C。返回调用绑定的具体方法 DeleteBinding 的结果，提供 GetReferencedName(ref) 作为参数。

您所说的“不合格标识符”正式命名为“环境记录绑定”。

现在，回答你的问题。为什么在 5.c 时抛出 SyntaxError。无论如何都会失败？我想你自己回答了！

> 严格模式必须在这里进行**运行时检查，因为****遇到这种情况时**会抛出 TypeError 。

这是正确的。但快速失败总是更好。因此，当有机会检测到 SyntaxError（在**解析时**）时，应该抓住这个机会。

为什么？如果发生错误，它可以为您节省修复应用程序的麻烦。考虑一下可能会立即向您显示错误的 IDE，而不是数小时的调试。
此外，这样的限制对于优化的 JIT 编译器可能是有利的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T21:12:16.413

如果要在严格模式下删除对象。您必须明确提及属性访问。另请注意，调用函数的方式很重要。If `new`operator is not used `this`is undefined under `use strict`，你不能使用下面的方法。例子：

```
'使用严格'
函数函数（）{
  变种自我=这个；
  self.obj = {};
  self.obj.x = 'y'

  控制台.log(self.obj);
  删除 self.obj // 有效
  // 删除 obj // 不起作用
  控制台.log(self.obj);
}

var f = 新函数（）；

```

要删除函数（闭包）之外的对象，您必须调用

```
// 与上面相同的代码
删除 f.obj

```*

# vba - 为什么不分配此字符串？

> ID：10643589
> 
> 赞同：0
> 
> 时间：2012-05-17T21:10:41.787
> 
> 标签：vba, excel

在 VBA 中，我正在从文本文件中读取（它具有 xml 之类的标签，但它仍然是 txt 文件）。运行以下代码时，我遇到了一些奇怪的事情。

```
Dim FileName, TextLine, strStore As String
....
TextLine = MyFile.ReadLine
If (TextLine Like "<Store>*") Then
    strStore = TextLine
    MsgBox (strString) 'for some reason this is outputting a blank msgbox
    MsgBox (TextLine) 'this is outputting the expected value
End If
.... 
```

如评论中所述，第一个 MsgBox 输出为空白，而另一个输出预期数据。这怎么可能？我跳过的代码是这些变量的 OOS。什么可能导致变量不能像这样分配？
提示这个噪音：[http ://www.youtube.com/watch?v=LehNm4VVqJI](http://www.youtube.com/watch?v=LehNm4VVqJI)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:15:11.407

`MsgBox (strString)`应该`MsgBox (strStore)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:05:01.687

**始终**使用`Option Explicit`（正如 Tony 指出的那样），并小心在单个 Dim 语句中声明变量。

**始终**将要求变量声明的选项设置为 true。（VBA 编辑器：工具 --> 选项 --> 选中“需要变量声明”）这将`Option Explicit`在所有新模块中自动为您添加语句。

我怀疑您打算声明两个变体和一个字符串，因为您使用了变量的`str`前缀。`strStore`无论如何，请注意在单个 dim 语句中声明变量而不显式设置每个变量的类型将创建变体。考虑以下：

```
Option Explicit

    Sub DeclaringVariables()
        Dim int1, int2, int3 As Integer

        ' int1 and int2 are variants, NOT integers!!!

        int1 = "my name"
        int2 = 4.23424
        int3 = 5

        MsgBox "int1: " & int1 & vbCrLf & "int2: " & int2 & vbCrLf & "int1: " & int3
    End Sub 
```

要将 int 声明为整数，您必须为每个变量指定类型，无论您对所有变量使用一个 dim 语句还是单独的 dim 语句。

如果您尝试以下操作，您将得到类型不匹配，如您所料：

```
Sub MoreVariables()
    Dim int1 As Integer, int2 As Integer, int3 As Integer

    int1 = "my name"
    int2 = 4.23424
    int3 = 5

    MsgBox "int1: " & int1 & vbCrLf & "int2: " & int2 & vbCrLf & "int1: " & int3

End Sub 
```

最后一件事：使用 Camel 或 Pascal 大小写设置变量名。每当您在代码中使用变量时，请**以全部小写形式键入它们**。当您移至下一行时，编辑器会将您的小写变量名称替换为您在声明中设置的名称。这是确保您没有输入错误名称的便捷方法，因此您可以立即修复它，而不是在运行代码时等待编译器抱怨。

# asp.net-mvc - 让我的自定义模型绑定到我的 POST 控制器

> ID：10643590
> 
> 赞同：3
> 
> 时间：2012-05-17T21:10:45.520
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model-binding

我正在使用最近发布的 MVC 4 Beta (4.0.20126.16343) 并且正在努力解决反序列化/模型绑定不适用于数组的已知问题（请参阅[此处的堆栈溢出](https://stackoverflow.com/questions/9592838/deserialization-model-binding-in-mvc4-webapi-does-not-work-with-arrays)）

我很难让我的显式自定义绑定连接起来。我已经注册了一个自定义 IModelBinder（或尝试注册），但是当我的 post 操作被调用时，我的自定义活页夹没有被击中，我只是获得了默认的序列化（使用空数组 - 即使 wireshark 向我显示传入的复杂对象包含数组元素）。

我觉得我错过了一些东西，并且非常感谢任何解决方案或见解。

谢谢。

来自 global.asax.cs：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
}

protected void Application_Start()
{
    ModelBinders.Binders.Add(typeof(DocuSignEnvelopeInformation), new DocusignModelBinder());
    AreaRegistration.RegisterAllAreas();

    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);

    BundleTable.Bundles.RegisterTemplateBundles();
} 
```

和我的自定义活页夹：

```
public object BindModel(ControllerContext controllerContext, System.Web.Mvc.ModelBindingContext bindingContext)
{
    var value = bindingContext.ValueProvider.GetValue("envelope");

    var model = new DocuSignEnvelopeInformation();

    //build out the complex type here

    return model;
} 
```

我的控制器只是：

```
public void Post(DocuSignEnvelopeInformation envelope)
{
    Debug.WriteLine(envelope);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T19:33:03.967

通常我们通过 DI 容器注册我们的模型绑定器并且它可以工作。使用 DependencyResolver 使用的 DI 容器注册 IModelBinderProvider 并在 GetBinder 方法中从那里返回您的 ModelBinder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T13:11:45.887

这就是我最终做的事情（感谢 Jimmy Bogard[在 ASP.NET MVC 3 中的模型绑定 XML 中](http://lostechies.com/jimmybogard/2011/06/24/model-binding-xml-in-asp-net-mvc-3/)）

我将我的解决方案重新回到 MVC 3。（再次被发布前的焦虑所困扰）

添加了一个 ModelBinderProvider：

```
public class XmlModelBinderProvider : IModelBinderProvider
{
    public IModelBinder GetBinder(Type modelType)
    {
        var contentType = HttpContext.Current.Request.ContentType;

        if (string.Compare(contentType, @"text/xml",
            StringComparison.OrdinalIgnoreCase) != 0)
        {
            return null;
        }

        return new XmlModelBinder();
    }
} 
```

和一个 ModelBinder

```
public class XmlModelBinder : IModelBinder
{
    public object BindModel(
        ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {
        var modelType = bindingContext.ModelType;
        var serializer = new XmlSerializer(modelType);

        var inputStream = controllerContext.HttpContext.Request.InputStream;

        return serializer.Deserialize(inputStream);
    }
} 
```

并将其添加到 Application_Start()：

```
 ModelBinderProviders.BinderProviders
    .Add(new XmlModelBinderProvider()); 
```

我的控制器与问题中的完全相同。

像一种享受一样工作。当新的“无字符串”方法与 MVC 4 一起正确到达时会很棒，但是这种反序列化的手动绑定方法并不十分繁琐。

# delphi - Delphi、TBlobField 和 UTF8

> ID：10643591
> 
> 赞同：2
> 
> 时间：2012-05-17T21:10:48.550
> 
> 标签：delphi, utf-8, blob, clob

这是我的架构：

Datasnap 客户端 <=> Datasnap 服务器 <=> Oracle 11 XE

我在客户端使用带有 TDSProviderConnection 的远程提供程序来访问我的数据集。

基本上，我使用 TIdHTTP 组件来查询网站并将结果存储在 Oracle CLOB 列中。

将结果保存到文件时，文本、重音符号和其他外来字符会正确显示。使用 sqldeveloper 插入到 clob 中的相同文本也可以正确显示。

但是当我通过数据快照架构执行此操作时，会出现错误的字符（如黑色菱形或“大写”（下划线在顶部）

我的 DB 字符集是 AL32UTF8，它是 Oracle 11 XE 上的默认字符集。

为了更好地了解问题出在哪里，我重写了部分客户端以直接访问我的数据库。我可以说问题不在于 datasnap 客户端和服务器之间的通信。

现在我的架构是：

客户端 <=> 数据库

我通过以下方式访问 Oracle XE：

TClientDataSet <=> TDataSetProvider <=> TSQLDataSet <=> TSQLConnection

来自 TIdHTTP 的响应是 a `TMemoryStream`，存储在 TClientDataset 中，其中：

```
 With ClientDataSet do
    begin
      Edit;
      (Fieldbyname('MYCLOBFIELD') as TBlobField).LoadFromStream(MS);
      ApplyUpdates(-1);
    end; 
```

编辑：5月21日

我确实围绕 TBlobField 进行了测试，这个组件似乎是我的问题的一部分。让我解释 ：

我从这样的扩展字符集中获取了一个包含字符的随机字符串：**'ÐÒÙÜßąĀûÆ'**

使用我的 ClientDataSet，将分配更改为：

```
 FieldByname('MYCLOB').value := 'ÐÒÙÜßąĀûÆ'; // <-- Inserted correctly into Oracle. 
```

将此字符串放入文件“test.txt”并尝试显示包含内容的弹出窗口不起作用：

```
 var
      MyBlobField: TBlobField;
    begin
      MyBlobField.LoadFromFile('test.txt');
      ShowMessage(MyBlobField.AsString); // <-- does not display correctly 
```

但是使用 TMemo 来显示内容就像一个魅力：

```
 var
      MyMemo: TMemo;
    begin
      MyMemo.Lines.LoadFromFile('test.txt'); // <-- Works perfectly !! 
```

我试图将`TBlobField.BlobType`属性设置为`ftOraClob`或`ftBlob`没有运气。

最后，使用`TStringList`（`TMemo.Lines`实际上是）将我的字符串加载到 Oracle 中就可以了。

我猜要么有问题，`TBlobField.LoadFromFile/LoadFromStream`要么我没有正确使用它。

TStringList`LoadFromFile/LoadFromStream`从 TStrings 继承其方法，该方法有效。

任何帮助将不胜感激。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:07:44.340

如果您想将一些数据放入 TBlobField 您可以尝试：

```
procedure SetParamBlob(Param : TParam; sData : String);
var  
 Str       : TStringStream;
begin
 Str := TStringStream.Create(sData);
 try
   Param.LoadFromStream(Str, ftBlob);
 finally
   Str.Free;
 end;
end; 
```

或这个：

```
procedure SetParamBlob(Param : TParam; sData : String);
var List   : TStringList;
   MemStream : TMemoryStream;
begin
  Param.Clear;
  Param.DataType := ftBlob;
  List   := TStringList.Create;
  MemStream := TMemoryStream.Create;
  try
    List.Text := sData;
    List.SaveToStream(MemStream);
    MemStream.Seek(0, soFromBeginning);
    Param.LoadFromStream(MemStream, ftBlob);
   finally
    FreeAndNil(List);
    FreeAndNil(MemStream);
   end;
end; 
```

... ... SetParamBlob(q.ParamByName('FIELD'), MyMemo.Text); ...

您可以通过以下方式从文件中加载数据：

```
 function LoadData(sFileSrc : String) : String;
   var F : TFileStream;
   begin
     F := TFileStream.Create(sFileSrc, fmOpenRead + fmShareDenyNone);
     try
       SetLength(Result, f.Size);
       f.Read(Result[1],f.Size);
      finally
       F.Free;
      end;
    end; 
```

# java - java在哪里查找文件？

> ID：10643593
> 
> 赞同：8
> 
> 时间：2012-05-17T21:11:02.373
> 
> 标签：java, file

我正在尝试用java读取文件：

```
Public class Test{

public static void main (String [] args) throws IOException {

BufferedReader f = new BufferedReader(new FileReader("test.in"));

//...

PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("test.out")));

//...                                 

}

} 
```

1）“test.in”的位置应该在哪里？(src?bin????)

2）“test.out”将位于哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T21:15:52.923

在 System.getProperty("user.dir") 指定的目录中查找相对路径文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T21:16:18.733

答案是工作文件夹，即执行“java ...”命令的文件夹。例如，这是 eclipse 项目中的项目文件夹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T21:13:28.150

通常它是您正在执行的 Java 文件的确切位置。因此，如果您在 C:\ 中使用您的 Java 文件并且您在没有指定路径的情况下查找文件，它将在 C:\ 中查找，并且输出文件也将在 C:\

但是，如果您使用的是 Netbeans 之类的东西，您只需将文件放在特定项目的 netbeans 项目文件夹（根目录文件夹）中。不在项目的源文件夹或 bin 文件夹中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T21:31:20.710

我可能在这个问题上花了太长时间，但是：

```
C:\temp>notepad test_in.txt => 
```

你好Java输入！

在同一目录中，创建“Test.java”：

```
package com.mytest;

import java.io.*;

public class Test {

  public static void main (String [] args) throws IOException {
    System.out.println ("Current directory is " + new File(".").getAbsolutePath());

    System.out.println ("Reading file " + INPUT_FILE + "...");
    BufferedReader fis = 
      new BufferedReader(new FileReader(INPUT_FILE));
    String s = fis.readLine ();
    fis.close ();
    System.out.println ("Contents: " + s + ".");

    System.out.println ("Writing file " + INPUT_FILE + "...");
    PrintWriter fos = 
      new PrintWriter(new BufferedWriter(new FileWriter("test_out.txt")));
    fos.println ("Hello Java output");
    fos.close ();
    System.out.println ("Done.");
  }

  private static final String INPUT_FILE = "test_in.txt";
  private static final String OUTPUT_FILE = "test_out.txt";
} 
```

最后，运行它——指定完整的包名：

```
C:\temp>javac -d . Test.java

C:\temp>dir com\mytest
 Volume in drive C has no label.
 Volume Serial Number is 7096-6FDD

 Directory of C:\temp\com\mytest

05/17/2012  02:23 PM    <DIR>          .
05/17/2012  02:23 PM    <DIR>          ..
05/17/2012  02:29 PM             1,375 Test.class
               1 File(s)          1,375 bytes
               2 Dir(s)  396,478,521,344 bytes free

C:\temp>java com.mytest.Test
Current directory is C:\temp\.
Reading file test_in.txt...
Contents: Hello Java input!.
Writing file test_in.txt...
Done.

C:\temp>dir/od test*.txt
 Volume in drive C has no label.
 Volume Serial Number is 7096-6FDD

 Directory of C:\temp

05/17/2012  02:24 PM                17 test_in.txt
05/17/2012  02:29 PM                19 test_out.txt
               2 File(s)             36 bytes 
```

'希望这有助于解释一些事情，包括：

*   关于编译和运行的“默认目录”

*   “包”如何与“目录”相关联

*   Java会将您的类文件放在包目录中的事实（不一定是您的工作目录）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-12T18:06:26.733

Eclipse 在项目的根文件夹（项目名称文件夹）中查找该文件。所以你可以让 src/test.in 在项目的 src 文件夹中找到文件。

# apache - 将 Go 应用程序与 PHP 应用程序一起部署有哪些选择？

> ID：10643599
> 
> 赞同：3
> 
> 时间：2012-05-17T21:11:23.297
> 
> 标签：apache, nginx, go, fastcgi

我基本上想要完成的是让我的主网站运行一个用 Go 编写的 CMS。这将位于 www.example.com。

我还有用 PHP 编写的应用程序，位于目录中，例如 www.example.com/clients/

如何使用 Apache/PHP 为 example.com/clients 提供服务，同时使用 Go 内置 Web 服务器为 example.com 提供服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T22:27:24.147

Andrew Gerrand 有一篇关于 nginx的很好的[博客文章，但原理与 Apache 相同。](http://nf.id.au/deploying-go-web-services-behind-nginx-under)

您希望将 Apache 设置为 Go 应用程序传入请求的反向代理。对于 Apache，您想查看[mod_proxy](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T10:40:36.983

通过`mod_proxy`在 Apache2 中，您可以将不同的路径代理到 localhost 或您的服务器可访问的其他任何地方的不同目的地，包括在您的本地网络中（如果您的服务器可以访问它）。

为此，您将使用`ProxyPass`（[Apache2 Docs for ProxyPass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)，这是*非常*有用的阅读），如下例所示：

```
<VirtualHost *:80>
  ServerName some.example.host.xyz

  DocumentRoot /var/www/your-document-root

  Alias /clients/ /var/www/clients/
  ProxyPass /clients/ !
  ScriptAlias /something-using-cgi/ /var/www/cgi-stuff/
  ProxyPass /something-using-cgi/ !

  ProxyPreserveHost On
  ProxyPass / http://localhost:9876/
  ProxyPassReverse / http://localhost:9876/
  ProxyPass /elsewhere/ http://elsewhere.example.host.xyz:1234/
  ProxyPassReverse /elsewhere/ http://elsewhere.example.host.xyz:1234/
</VirtualHost> 
```

您需要确保设置代理安全，以使外部用户也不能将您的反向代理用作正向代理。您可以`ProxyRequests`按照官方 Apache2 文档中的说明进行操作。我在服务器上执行此操作的方法是将其放入服务器范围的配置中（您应该自行验证这是否足够安全）：

```
# disables forward proxy
ProxyRequests Off 
```

# winapi - win32 TextOut() 是否异步完成？

> ID：10643606
> 
> 赞同：1
> 
> 时间：2012-05-17T21:11:58.240
> 
> 标签：winapi, graphics, gdi

这应该是一个简单的 google 或 MSDN 答案 - 但我在搜索方面做得很短。我有一个使用 GDI 进行大量绘图的小型 win32 应用程序。我观察到，当我在我的内存设备上下文中放置一个带有 TextOut() 的“标签”时，然后在 TextOut() 调用之后立即使用 BitBlt，文本会间歇性地显示，闪烁进出。BitBlt() 在另一个线程中，但我有一个关键部分来防止复制工作中的图形。当我将 TextOut() 放在流程中较早的位置时，即不靠近 BitBlt()，它总是显示出来。我能想到的是 TextOut() 在完成之前返回.. 谁能指出我的文档或提出另一种理论？

仅供参考 - 我已经签出： http: [//msdn.microsoft.com/en-us/library/dd145133 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd145133(v=vs.85).aspx)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T00:04:09.390

是的，它确实。 [GdiFlush()](http://msdn.microsoft.com/en-us/library/dd144844%28v=VS.85%29.aspx)是强制所有 GDI 更新到视频适配器的调用。

许多其他射击脚的方法。GDI 根本不是线程安全的，所以我猜不要指望奇迹。

# android - 在 Clockworkmod Recovery 命令中指定数据分区上的 zip 文件

> ID：10643610
> 
> 赞同：0
> 
> 时间：2012-05-17T21:12:20.413
> 
> 标签：android

我正在使用命令通过 cwm 从我的应用程序数据文件夹中闪烁一个 zip。但是我不知道如何访问我需要的目录，因为我不熟悉命令任何帮助？（DATA位必须是分区

```
os.writeBytes("echo '--update_package=DATA:/data/carbon.assassin.tweaks/beats.zip' >> /cache/recovery/command\n"); 
```

我需要知道我应该在此处放置什么：DATA:/data/carbon.assassin.tweaks/beats.zip 以访问 /data/data/carbon.assassin.tweaks/beats.zip

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:56:36.707

原来我可以只使用 /data/data/ 而不需要 DATA: bit :)

# java - Eclipse 项目布局类路径问题

> ID：10643611
> 
> 赞同：1
> 
> 时间：2012-05-17T21:12:21.453
> 
> 标签：java, eclipse, jakarta-ee, ear, eclipse-wtp

我目前正在使用 Eclipse 进行一个大型项目。通常，作为一个单人团队，这些问题不会成为问题，但由于我们的团队不是一个人，我们需要能够分解项目的各个部分以由某些团队成员进行工作。

简单来说，假设我有两层要分开： 1\. 每个 DAO 都是一个单独的 Java 项目，需要单独处理 2\. Web 层服务层包含我们所有的服务端点，并且必须能够引用所有的 DAO。该层作为动态 Web 项目在 Tomcat 上运行，并利用 Adob​​e LiveCycle Data Services 作为处理端点创建和管理的部分。

现在，我们遇到的问题是，当我们创建一个 DAO 并单独对其进行单元测试时，它运行良好。但是当我们将它引用到我们的服务项目并尝试运行它时，我们开始遇到与我们有两个不同版本的某些 jar 引用这一事实相关的各种问题，因此我们在运行服务器时开始出现错误。

结果，我们知道我们可以通过拉问题罐并确保将来不再出现问题来解决问题，但正如我之前所说，这是一个多人参与的大型项目，我们不这样做'我们不想花时间在枪下清除依赖问题。

我们正在寻找有关在哪里进行替代解决方案的建议？我们的团队是 JavaEE 的新手，因此对于我们可以使用什么将其中的所有内容捆绑在一起，或者它是否是一个可行的解决方案，我们没有太大的影响。我们是否应该考虑将我们的 DAO 转换为 EJB 并将它们部署在 EAR 库中？如果是这样，我们的服务层在哪里，并且服务层是否能够引用 DAO 类，因为 EJB 维护它自己的类路径（根据我们所读到的内容？）我们是在寻找错误的路径，还是我们完全错了在我们目前对 JavaEE 的理解中？

非常感谢任何帮助。我们仍处于该项目的框架阶段，我们希望确保我们能够长期维护它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:58:46.850

我赞同 Maven 的建议。这可以为您的项目结构添加各种理智。

Maven 甚至可以通过`mvn eclipse:eclipse`

关于 EJB 注释的重要说明。从 ava EE 6 开始，您不再需要将 EJB 与 Servlet 分开，并且可以在 war 文件的同一个 jar 中一起使用它们。

因此，请了解是否使用 EJB 不再像以前那样对打包或类加载器产生任何影响。这些现在是单独的决定。EAR 和类加载器分离现在应该被视为您可能想要使用的功能，如果您*想要*类加载器分离及其带来的复杂性。大多数应用程序根本不需要它，只需要一个包含 servlet、ejbs、jpa 实体、cdi bean、jaxrs 服务和其他任何您需要的东西的 war 文件就可以了。您可以自由决定如何将它们分开，或者您是否想完全分开它们。

由于事务管理，EJB 确实产生了出色的 DAO，这是[您无法从普通 Tomcat 获得的](https://stackoverflow.com/questions/269186/besides-ear-and-ejb-what-do-i-get-from-a-j2ee-app-server-that-i-dont-get-in-a/9199893#9199893)东西，但可以通过[TomEE](http://tomee.apache.org)在 Tomcat 中提供，并且在[Eclipse](http://www.youtube.com/watch?v=Lr8pxEACVRI)中运行良好。您应该出于这个原因考虑 EJB，而不是出于依赖性原因。

旁注，由于您是 Java EE 新手，您可能会发现这很有帮助：

*   [http://openejb.apache.org/examples-trunk/index.html](http://openejb.apache.org/examples-trunk/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T22:11:09.277

为了在 1 人以上的团队中使用 Java EE 时有条理，我可以建议：

*   使用 Maven 管理您的构建过程和库依赖项。

    Maven 有一个小的学习曲线，但是一旦你掌握了它，你会感激不尽。通过使用 Maven，您不再依赖 Eclipse 来管理您的类路径。

    我认为在团队中工作时非常有用的一点是该`install`功能。假设您正在使用 EJB 模块的 1.0 版本，例如 core-ejb-module-1.0，并且您已将其置于稳定状态并希望项目中的每个人从现在开始都可以参考它。

    然后你在它上面运行一个像这样的 maven 命令：`mvn clean package install`

    Maven 将清理此模块、编译它、运行测试、创建 jar，然后将其安装到您定义的存储库中。可以是贵公司的任何计算机。

    现在你可以告诉从事其他项目的人在他们的 .pom 文件上更新这个依赖版本，并在他们运行的下一个构建中，在编译之前，maven 将下载这个库然后使用它。真的很整洁。没有更多的类路径地狱。（如本文所述，还有其他方法可以始终自动引用最新的库[，](https://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency)但有一些警告。无论如何，这只是一个示例。）

*   使用 JPA/EJB 代替 DAO 模式。

    有人说 DAO 意味着任何类型的数据访问，其他人真正的意思是他们使用 DAO 模式来访问对象。如果是这种情况，则在使用 JPA 时不再需要使用它。（至少对于最常见的情况）。

    就我而言，我有一个通用的 EntityService，它能够对任何实体进行 CRUD 操作，并具有集中的查询管理。然后每个应该执行数据库相关操作的 EJB 都可以注入这个人并完成它的工作。

作为建议，使用 Maven，您的项目可以这样组织：

*   核心项目结构
    *   核心（pom 根）
    *   core-ejb-module（包括所有通用 EJB，例如 EntityService。）
    *   core-jpa-module（包括所有 JPA 通用定义，如接口、映射超类等。）
    *   core-jsf-module（包括所有 JSF 泛型定义，例如抽象控制器、泛型转换器和 FacesContext 的包装器等。）

现在您已经有了一个核心通用模块设置，您可以创建：

*   应用结构
    *   应用程序（pom 根）
    *   app-ear-module （包括此应用程序中的所有其他模块。共享 jar 位于 ear /lib 文件夹中，因此所有其他模块都可以引用它们。）
    *   app-ejb-module-a（包括应用程序业务层的 EJB。它使用 core-ejb-module）
    *   app-ejb-module-b （你可能有很多 ejb 模块。你甚至可能有一个只包含 ejb 模块的项目。其他应用程序将通过 Maven 声明它们对它们的依赖。）
    *   app-jpa-module（包含代表您数据库表的 JPA 实体的定义。取决于 core-jpa-module）
    *   app-web-module（保存此应用程序的页面、控制器和转换器。）

我想你明白了。事物往往是松散耦合的，您可以随意组织项目。

这只是一个简单的例子来说明。我没有解释太多关于 Maven 的内容，但如果您有兴趣，我认为它确实会对您有所帮助。

我希望它能给你一些想法，并可能以任何方式帮助你。

[]的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:33:54.170

如果您*可以*使用同一组依赖项运行所有子组件，您可能会发现迁移到 Maven 构建会很有帮助。

使用 Maven，您可以定义一个顶级项目，在一个地方管理所有第 3 方依赖项版本，因此所有模块都针对相同的库版本进行构建、测试和部署。您也可能会发现 Maven 非常适合您采用的多模块方法，因为它可以确保在项目的依赖项之一发生更改时正确重建项目。

您仍然可以像以前一样使用动态 Web 项目；Eclipse 将自动将 DAO 部署为服务项目的一部分（IIRC，您需要将 DAO 描述为实用程序模块）。

如果您确实访问了 EJB 根目录，那么您是正确的，每个 EAR 都将获得自己的类加载器，因此可以使用一组不同的依赖项。但是，在您的位置上，我倾向于首先考虑改进您的依赖管理——它可能会更便宜、更容易。

# ruby-on-rails - 如何在 Ruby 中调用外部类的方法

> ID：10643614
> 
> 赞同：1
> 
> 时间：2012-05-17T21:12:25.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个文件，`/lib`有自己的方法。

```
# lib/file.rb
class File < ApplicationController
  def my_method
    ...
  end
end 
```

但是我无法通过控制台访问该方法

```
ruby-1.9.2-p290 :044 > File.my_method
NoMethodError: undefined method `my_method' for File:Class 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:14:58.097

`my_method`是`File`类的实例方法。这意味着您只能在`File`类的实例上调用它。

```
file = File.new
file.my_method 
```

您可以使用语法声明`my_method`为类方法。`def self.my_method`

```
class File < ApplicationController
  def self.my_method
    ...
  end
end

File.my_method 
```

但是在类方法中你不能使用`File`对象的实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:15:30.997

您尝试将`my_method`其作为类方法调用，但您已将其定义为实例方法。

您应该将其定义为`def self.my_method`，或创建控制器实例以将其作为实例方法调用。

此外，由于几个原因，您会遇到问题 - (1) Rails 期望控制器命名为`FilesController`，并且 (2)`File`是标准库中的一个类。我鼓励您将类名更改为`FilesController`，并将文件本身重命名为`files_controller.rb`以防止这两个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:20:14.287

嗯......这个例子有几件有趣的事情。首先是这个类名`File`是已经在 Ruby 中定义的 call 。

这很可能是为什么当您在控制台中时没有收到未定义的类错误的原因。由于`my_method`没有在 Ruby 的`File`类上定义，这就是您看到未定义方法的原因。

现在回答你的问题。我会尝试先给你的班级命名一些不同的名字，然后再试一次`lib`。我相信它应该在默认情况下再次使用 rails 环境加载。对于一个或两个版本，该功能已被删除，但我想说它又回来了。如果没有，只需进入您的`config/application.rb`文件并查找符合`config.autoload_paths`. 在那里添加`lib`目录，你应该很高兴。

最后，你想要一个控制器有什么原因`lib`吗？

# hadoop - 将数据写入 Cassandra Hadoop Mapper（无减少）

> ID：10643622
> 
> 赞同：0
> 
> 时间：2012-05-17T21:12:57.227
> 
> 标签：hadoop, cassandra

我在尝试直接从地图写入 cassandra 时遇到以下异常，跳过了 reduce 任务。

. . .

```
 ConfigHelper.setOutputColumnFamily(job.getConfiguration(), KEYSPACE, outputPath);

    job.setMapperClass(MapperToCassandra.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);

    LOG.info("Writing output to Cassandra");
    //job.setReducerClass(ReducerToCassandra.class);
    job.setOutputFormatClass(ColumnFamilyOutputFormat.class);

    ConfigHelper.setRpcPort(job.getConfiguration(), "9160");
    //org.apache.cassandra.dht.LocalPartitioner
    ConfigHelper.setInitialAddress(job.getConfiguration(), "localhost");
    ConfigHelper.setPartitioner(job.getConfiguration(), "org.apache.cassandra.dht.RandomPartitioner"); 
```

. . .

谁能帮我确定我错过了什么？

```
12/05/17 16:01:38 INFO mapred.JobClient: Task Id : attempt_201205141442_0042_m_000000_0, Status : FAILED
java.io.IOException: InvalidRequestException(why:unconfigured columnfamily output)
    at org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:307)
Caused by: InvalidRequestException(why:unconfigured columnfamily output)
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:19479)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:1035)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:1009)
    at org.apache.cassandra.hadoop.ColumnFamilyRecordWriter$RangeClient.run(ColumnFamilyRecordWriter.java:299) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:20:23.240

幸运的是，我可以自己解决这个问题。

InvalidRequestException（为什么：未配置的列族输出）

如果未在数据库中创建给定的列族名称，则会遇到此异常。

列族表示关系数据库中的表。有两种方法可以解决这个问题。在 java 代码中，您可以将列族的名称更改为数据库中现有的名称。

# php - 表单提交后刷新页面

> ID：10643626
> 
> 赞同：22
> 
> 时间：2012-05-17T21:13:12.013
> 
> 标签：php, html

我有一个小问题。我想在提交表单后重新加载我的页面。

```
<form method="post" action="">
   <textarea cols="30" rows="4" name="update" id="update" maxlength="200" ></textarea>
   <br />
   <input type="submit"  value=" Update "  id="update_button"  class="update_button"/>
</form> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-11-03T20:33:03.243

只使用

```
 echo "<meta http-equiv='refresh' content='0'>"; 
```

在 } 示例之前插入查询之后

```
if(isset($_POST['submit']))
        {
SQL QUERY----
echo "<meta http-equiv='refresh' content='0'>";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-02T22:59:12.963

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> <!-- notice the updated action -->
<textarea cols="30" rows="4" name="update" id="update" maxlength="200" ></textarea>
<br />
<input name="submit_button" type="submit"  value=" Update "  id="update_button"  class="update_button"/> <!-- notice added name="" -->
</form> 
```

在你的整页上，你可以有这个

```
<?php

// check if the form was submitted
if ($_POST['submit_button']) {
    // this means the submit button was clicked, and the form has refreshed the page
    // to access the content in text area, you would do this
    $a = $_POST['update'];

    // now $a contains the data from the textarea, so you can do whatever with it
    // this will echo the data on the page
    echo $a;
}
else {
    // form not submitted, so show the form

?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>"> <!-- notice the updated action -->
<textarea cols="30" rows="4" name="update" id="update" maxlength="200" ></textarea>
<br />
<input name="submit_button" type="submit"  value=" Update "  id="update_button"  class="update_button"/> <!-- notice added name="" -->
</form>

<?php

} // end "else" loop

?> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T22:08:37.110

如果您希望在同一页面上提交表单，请`action`从表单属性中删除 。

```
<form method="POST" name="myform">
 <!-- Your HTML code Here -->
</form> 
```

但是，如果您想在从另一个文件提交表单后重新加载页面或重定向页面，则调用此函数，`php`它将在 0 秒内重定向页面。此外，您可以根据需要使用`header`，只需确保在使用之前没有任何内容`header`

```
 function page_redirect($location)
 {
   echo '<META HTTP-EQUIV="Refresh" Content="0; URL='.$location.'">';
   exit; 
 }

 // I want the page to go to google.
 // page_redirect("http://www.google.com") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-17T21:18:42.907

您也许可以使用：

```
<form method="post" action=" " onSubmit="window.location.reload()"> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-31T06:49:07.070

大声笑，我只是想知道为什么没有人知道[PHP 标头函数](https://www.php.net/manual/en/function.header.php)：

```
header("Refresh: 0"); // here 0 is in seconds 
```

我使用它，因此如果用户刷新页面，则不会提示他重新提交数据。

有关更多详细信息，请参阅[使用 PHP 刷新页面](https://stackoverflow.com/questions/12383371/refresh-a-page-using-php)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-18T00:36:48.423

```
 <form method="post" action="">
   <table>
   <tr><td><input name="Submit" type="submit" value="refresh"></td></tr>
   </table>
   </form>

<?php
    if(isset($_POST['Submit']))
    {
    header("Location: http://yourpagehere.com");
    }
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-17T21:16:14.247

中的动作属性`<form method="post" action="action=""">`应该只是`action=""`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T21:19:05.340

您想要一个自己提交的表格吗？然后你只需将“action”参数留空。

喜欢：

`<form method="post" action="" />`

如果您想使用此页面处理表单，请确保您在表单或会话数据中有某种机制来测试它是否已正确提交，并确保您不会尝试处理空表单。

您可能需要另一种机制来确定表单是否已填写并提交但无效。我通常使用与会话变量匹配的隐藏输入字段来确定用户是单击提交还是第一次加载页面。通过每次给一个唯一的值并将会话数据设置为相同的值，您还可以避免用户点击两次提交时重复提交。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-14T07:26:32.827

```
 //insert this php code, at the end after your closing html tag. 

  <?php
  //setting connection to database
  $con = mysqli_connect("localhost","your-username","your-
  passowrd","your-dbname");

  if(isset($_POST['submit_button'])){

     $txt_area = $_POST['update']; 

       $Our_query= "INSERT INTO your-table-name (field1name, field2name) 
                  VALUES ('abc','def')"; // values should match data 
                 //  type to field names

        $insert_query = mysqli_query($con, $Our_query);

        if($insert_query){
            echo "<script>window.open('form.php','_self') </script>"; 
             // supposing form.php is where you have created this form

          }

   } //if statement close         
  ?> 
```

希望这可以帮助。

# ipad - iOS 上的背景图片

> ID：10643630
> 
> 赞同：1
> 
> 时间：2012-05-17T21:13:47.053
> 
> 标签：ipad, background-image, master-detail

我在 Xcode 4.x for iPad 上创建了一个 Master Detail 应用程序。我尝试将自定义背景图像添加到它的细节部分，效果很好，问题是背景图像出现像素化。图像大小为 2048 x 1546（适用于我 iPad 上的 Retina 屏幕），如果我在 iPad 上将其作为照片查看，它不会出现像素化，那么当它被用作背景时为什么会这样呢？

我用来设置它的代码是，

UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"leather.png"]]; self.view.backgroundColor = 背景；

我唯一能想到的是因为 Master Detail 应用程序的侧面有滚动条，但我该如何解决呢？或者真正的原因是什么？它看起来像像素化或任何方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:25:21.743

添加文件名为“leather@2x.png”的图像，否则`UIImage`将无法识别它应该是高分辨率图像。或者，您可能想要使用常规`UIImageView`颜色而不是图案颜色。

# python - Python 正则表达式，两个否定的前瞻语句

> ID：10643633
> 
> 赞同：0
> 
> 时间：2012-05-17T21:13:49.713
> 
> 标签：python, regex, negative-lookahead

我有一串语法分析的文本：

```
 s = 'ROOT (S (VP (VP (VB the) (SBAR (S (NP (DT same) (NN lecturer)) (VP (VBZ says)' 
```

我想将“相同”与 s 匹配。'the' 和 'same' 仅在被句法标记（即 (、NP、S 等）分隔时才匹配是关键。因此，'same' 不应该在 s2 中找到匹配项：

```
 s2= 'ROOT (S (VP (VP (VB the) (SBAR (S (NP (DT lecturer) (NN same)) (VP (VBZ says)' 
```

我尝试了双重否定前瞻断言无济于事：

```
 >>>rx = r'the(?![a-z]*)same(?![a-z]*)'
 >>>re.findall(rx,s)
 [] 
```

这个想法是在没有小写字符时匹配'the'，然后在没有小写字符时匹配'same'。

有没有人有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:21:49.393

`the`因此，如果和之间的所有字符都不是小写字母，则您想要匹配`same`，这是您可以在正则表达式中编写的方法：

```
the[^a-z]*same 
```

请注意，您可能还想添加单词边界，因此您不匹配类似`foothe ... samebar`的内容，如下所示：

```
\bthe\b[^a-z]*\bsame\b 
```

# android - AppContext.getResources().openRawResource() 的有效性

> ID：10643643
> 
> 赞同：0
> 
> 时间：2012-05-17T21:14:37.787
> 
> 标签：android, android-activity, android-context, static-class

*我在同一个*应用程序中有 Activity A、Activity B 和一个静态类 。场景如下（这里简化了；在我的软件中更有意义）：

1.  （在活动 A 中）mAppctx = this.getApplicationContext();
2.  （在活动 A 中）StaticClass.appctx = mAppctx;
3.  活动 B 已生成
4.  假设 Activity B 在运行时 Activity A 被系统销毁
5.  活动 B 执行以下操作（伪代码）：..... = StaticClass.appctx.getResources().openRawResource(...);

它是否正确？

由于*应用*上下文属于 Application （即属于进程），而不属于*Activity*，我想它是正确的，并且可以从静态类以这种方式访问​​ APK 资源没有任何问题。（我知道 Activity B 实际上可以自己询问 getApplicationContext() ，但上面的问题是故意不同的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:17:22.140

是的，这是正确的，因为活动和应用程序上下文都访问相同的资源。

# javascript - 鼠标悬停后 JQuery 将某些内容返回到原始位置时遇到问题

> ID：10643649
> 
> 赞同：2
> 
> 时间：2012-05-17T21:14:53.010
> 
> 标签：javascript, jquery, css, jquery-animate, slide

我是新来的。我正在使用一些基本的 JQuery，但遇到了问题。您是否曾经在某个网站上看到其中一个框，您将鼠标悬停在它上面并且框中的箭头形状向左移动了几个像素，当您将鼠标移出时，它又返回了？无论如何，使用 iv 提供的代码，鼠标悬停效果正常，但鼠标移出不会将箭头返回到原始位置。实际上，您悬停的次数越多，箭头越左。

我敢打赌，你们中的许多人已经看到了我想要的效果，但我有一种感觉，我没有以最好的方式设置它。有人可以帮忙吗？我自己做到了这一点。只是有点卡住了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>-</title>
<style type="text/css">

#red {
    height: 80px;
    width: 200px;
    background-color: #df0000;
    float: left;
    position: absolute;
    z-index: 998;
    display: none;
    left: 0px;
    top: 0px;
}
#gray {
    height: 80px;
    width: 200px;
    background-color: #232323;
    float: left;
    position: absolute;
    z-index: 997;
    left: 0px;
    top: 0px;
}
#wording{
    height: 80px;
    width: 200px;
    float: left;
    position: absolute;
    z-index: 999;
    left: 0px;
    top: 0px;
    background-image: url(getit.png);
    background-repeat: no-repeat;
}
#wrap {
    height: 80px;
    width: 200px;
    left: 50%;
    top: 50%;
    position: absolute;
    margin-top: -40px;
    margin-left: -100px;
}

#arrow {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 24px;
    color: #df0000;
    position: absolute;
    top: 50%;
    right: 15px;
}
</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>

<script type="text/javascript">

$(document).ready(function(){

$('#wording').mouseenter(function(){
  $('#red').animate({'width': 'toggle'});
    $('#arrow').css('color','white');
     $('#arrow').delay(100).animate({'left': '-=3px'}, "fast"); 
});

$('#wording').mouseleave(function(){
  $('#red').animate({'width': 'toggle'});
    $('#arrow').css('color','red');
      $('#arrow').delay(100).animate({'right': '+=3px'}, 'fast');
});

});

</script>

</head>

<body>

<div id="wrap">

<div id="wording">
<div id="arrow">></div>
</div>
<div id="red"></div>
<div id="gray"></div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:18:10.563

不是：

```
$('#arrow').delay(100).animate({'left': '-=3px'}, 'fast'); 
```

但：

```
$('#arrow').delay(100).animate({'right': '-=3px'}, 'fast'); 
```

你的脚本也可以是：

```
$(document).ready(function() {
    var $red   = $('#red');
    var $arrow = $('#arrow');
    $('#wording').hover(
      function() {
        $red.animate({'width': 'toggle'});
        $arrow.css('color', 'white').delay(100).animate({'right': '-=3px'}, "fast");
      }, function() {
        $red.animate({'width': 'toggle'});
        $arrow.css('color', 'red').delay(100).animate({'right': '+=3px'}, 'fast');
     });
});​ 
```

演示：http: [//jsfiddle.net/jqrET/1/](http://jsfiddle.net/jqrET/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:20:33.557

我在想这是因为你向左移动 -3 向右移动 +3。您可以尝试向右移动-3。看看它是否有效。

# android - 在 Eclipse 中创建新的密钥库时出错

> ID：10643650
> 
> 赞同：1
> 
> 时间：2012-05-17T21:14:54.300
> 
> 标签：android, eclipse, keystore

我正在尝试使用 android 工具在 Eclipse 中创建一个新的密钥库来签署我的 apk。我通过向导工作，最后我得到了这个错误：

keytool 错误：java.io.FileNotFoundException（访问被拒绝）

我似乎无法弄清楚为什么我一直得到这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:18:25.027

关键是“访问被拒绝”。您很可能无权在您指定的文件夹中创建密钥库。尝试在您的用户目录中创建它。如果我不得不猜测，我会说您可能正在使用 Windows 并保存到`Program Files`or`Program Files (x86)`文件夹，如果没有提升的权限就无法写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:46:06.040

因为密钥库创建文件不在有效位置。请在创建文件之前检查位置并授予对该文件夹的完全权限。如果再次遇到相同的错误，则将所需的库文件复制到密钥库文件夹中。它肯定会起作用。祝一切顺利。

问候文卡特什 KR

# c# - 在 C# 中从主线程以外的线程访问 COM 对象慢

> ID：10643652
> 
> 赞同：4
> 
> 时间：2012-05-17T21:15:01.360
> 
> 标签：c#, multithreading, com

我有一个专有的 COM 库，它返回一个整数数组（当然是它们自己的专有格式）。当我从主 UI 线程访问这个数组时，一切都很好并且运行得很快。当我从另一个线程访问它时，访问速度非常慢。下面有一些示例代码。

```
private void test() {
    ProprietaryLib.Integers ints = ProprietaryLib.GetInts();
    int x;
    for(int i = 0; i < 500; i++)
        for(int j = 0; j < ints.Count; j++)
            x = ints[j];
}

private void button1_Click(object sender, EventArgs e) {
    test();  // Very little time
    new System.Threading.Thread(() => test()).Start(); // Lots of time
} 
```

为什么会这样？我有什么办法可以加快速度吗？如果我使用多处理而不是多线程，那么我是否有希望获得良好的性能？（不过，听起来要复杂得多。）

**更新：**

我对下面的答案很满意，但想在此处添加一些数据以供参考（我自己的和其他人的）。

如上所示，在新线程中创建和访问对象每次访问大约需要 12ns。大概该对象实际上是在主线程上创建的，并且速度慢是由于从那里封送数据。

如果您在主线程上显式创建数据，但在标记为单线程单元的新线程中访问它，则访问时间会更慢，每次访问为 15 ns。我想.NET 必须有一些额外的开销来保持公寓的美观，尽管我担心我不知道开销是什么。虽然只有 2-3 ns 的差异，但它不必太大。

如果您在标记为 STA 的新线程上创建和访问对象，则每次访问的时间都会消失 0.2ns。但是这个新线程真的安全吗？这是我认为的另一个问题的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T00:14:34.533

COM 对象具有线程亲和性，它们可以告诉 COM 它们不是线程安全的。使用注册表中的一个键，即“ThreadingModel”键。绝大多数都这样做，要么指定“公寓”，要么只是省略键。它在 .NET 中不太明确，它使用 MSDN 告诉您类不是线程安全的，并且不会提醒您忘记阅读这篇文章。绝大多数 .NET 类都不是线程安全的，与 COM coclass 没有什么不同。与 .NET 不同，COM 确保以线程安全的方式调用它们。通过自动封送对创建对象的线程的调用。

换句话说，没有并发而且很慢。

取得成功的唯一方法是创建自己的 Thread 并调用其 SetApartmentState() 方法来切换到 STA，这是一个非线程安全的 COM 对象的快乐家园。您还必须在该线程上创建 COM 对象。而且您可能必须抽出一个消息循环以使其保持活动状态，这是 STA 的要求。并且永远不要阻塞线程。这些东西使它成为一个非线程安全的类的幸福之家，如果所有调用都在*一个*线程上进行，那么就不会出错。[您可以在此答案](https://stackoverflow.com/a/21684059/17034)中找到此类线程的示例实现。

或者换句话说，当使用带有非线程安全对象的线程时，没有免费的午餐。.NET 让您通过忘记在需要的地方使用*锁定*来射击您的脚，COM 使其自动化。以这种方式单腿跳跃的程序员要少得多，但效率不高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:20:55.103

这可能取决于线程单元模型。如果您使用单线程单元模型 (STA)，您可能会遇到性能问题（如果数据量足够大）。如果可以（如果您没有使用需要 STA 的另一个 COM 对象），您可以尝试将您的单元模型更改为 MTA（多线程单元模型）。

注意：WinForms与 MTA**不**兼容，它总是检查单元模型是单线程的，因为它使用的一些 COM 对象（例如剪贴板和拖放）需要它。*我从未尝试过，但如果您不使用该功能，它可能会起作用。*

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693421%28v=vs.85%29.aspx)：

> 因为对对象的调用不以任何方式序列化，所以多线程对象并发提供了最高的性能，并充分利用了多处理器硬件进行跨线程、跨进程和跨机器调用。

 **关于 SO 的**其他参考资料：**[您能解释一下 STA 和 MTA 吗？](https://stackoverflow.com/questions/127188/could-you-explain-sta-and-mta)
MSDN：[MTAThreadAttribute](http://msdn.microsoft.com/en-us/library/system.mtathreadattribute.aspx)**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:24:43.757

尝试使用以下命令在 UI 线程上执行 COM 调用`Invoke()`：

```
private void button1_Click(object sender, EventArgs e) {
    ThreadPool.QueueUserWorkItem(delegate {
        this.Invoke((Action)(() => {
            test();
        }));
    });
} 
```

在调用 之前和之后执行其余的长时间运行操作`Invoke()`，以便只有快速 COM 调用在 UI 线程中运行。此外，根据您的操作，您可能可以消除很多括号和其他线路噪音。**

# regex - URL 重写重定向不太有效

> ID：10643660
> 
> 赞同：1
> 
> 时间：2012-05-17T21:15:39.733
> 
> 标签：regex, iis-7, url-rewriting, url-redirection

我在 WEB.CONFIG 中使用 URL 重写规则。我在 IIS 中设置了站点。只是一个非常快速和简单的网站。

这就是我的 Web.config 的样子。

```
<rule name="CTVNews Articles" stopProcessing="true">
      <match url="(.*?)CTVNews(/?)(.*)" />
      <action type="Redirect" url="http://www.ctvnews.ca{R:2}{R:3}" appendQueryString="true" redirectType="Permanent" />
    </rule> 
```

这是我要重定向的 default.aspx 页面中的条目

a href="http://www.ctv.ca/CTVNews/TopStories/20110106/domtar-investment-110106">点击这里重定向

所以，没什么好看的。但是重定向不起作用。而且我认为我在 web.config 中的输入是正确的。

我是否需要为此设置主机文件？

# php - 根据选中的单选输入更改表单操作和文本输入名称

> ID：10643661
> 
> 赞同：0
> 
> 时间：2012-05-17T21:15:39.817
> 
> 标签：php, javascript, jquery

我可以获得以下代码的帮助吗？

```
$(document).ready(function() {

    $('#searchform').submit(function() {

        var action = '';

        if($('.action_url').val() == 'l_catalog') {
            action = 'http://catalog.site.com/uhtbin/cgisirsi.exe/x/0/0/57/5';
            $("#s").attr('name','searchdata1');
        } else if ($('.action_url').val() == 'l_wordpress'){
            action = '<?php get_bloginfo('url') ?>';
            $("#s").attr('name','s');
        }

        $(this).attr('action', action);
        return true; // submit
    });

    $('.action_url').change();

}); 
```

我正在尝试使用此功能将表单的操作设置为图书馆目录搜索页面或 wordpress 搜索页面。目前，单选按钮将选择/取消选择，并且仅搜索目录而不搜索 wordpress。我最初在网上找到了选择表单的代码，但现在必须使用单选按钮。（有一些困难）。用于此的 PHP 是：

```
$search_form .= '<form id="searchform" name="searchform" method="get" action="' . get_bloginfo('url') .'/">';
$search_form .= "\n" . "\t" . "\t";
$search_form .= '<div>';
$search_form .= "\n" . "\t" . "\t". "\t";
$search_form .= '<input type="radio" name="search_where" id="catalog" class="action_url" value="l_catalog" /> <label for="catalog">Library Catalog</label> <input type="radio" name="search_where" id="wordpress" class="action_url" value="l_wordpress" /> <label for="wordpress">Library Website</label>'; // <option value=\"l_catalog\">Library Catalog</option> \n \t \t \t \t <option value=\"l_wordpress\">Library Website</option>";
$search_form .= "\n" . "\t" . "\t". "\t";
if (is_search()) {
        $search_form .= '<input id="s" name="searchdata1" type="text" value="' . esc_html(stripslashes($_GET['s'])) .'" size="' . $search_form_length . '" tabindex="1" />';
} else {
        $value = __('To search, type and hit enter', 'thematic');
        $value = apply_filters('search_field_value',$value);
        $search_form .= '<input id="s" name="searchdata1" type="text" value="' . $value . '" onfocus="if (this.value == \'' . $value . '\') {this.value = \'\';}" onblur="if (this.value == \'\') {this.value = \'' . $value . '\';}" size="'. $search_form_length .'" tabindex="1" />';
}
$search_form .= "\n" . "\t" . "\t". "\t";

$search_form .= '<input name="srchfield1" type="hidden" value="GENERAL^SUBJECT^GENERAL^^words or phrase">';
$search_form .= '<input name="sort_by" type="hidden" value="-PBYR">';
$search_form .= '<input name="user_id" type="hidden" value="WSC">';
$search_form .= '<input name="password" type="hidden" value="">';

$search_form .= "\n" . "\t" . "\t". "\t";

$search_submit = '<input id="searchsubmit" name="searchsubmit" type="submit" value="' . __('Search', 'thematic') . '" tabindex="2" />';

$search_form .= apply_filters('thematic_search_submit', $search_submit);

$search_form .= "\n" . "\t" . "\t";
$search_form .= '</div>';

$search_form .= "\n" . "\t";
$search_form .= '</form>'; 
```

我确定这很混乱，因为我不太了解 PHP 或 Javascript，而且我正在尝试在大联盟中打球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:32:56.530

您的 JS 中的行：

```
action = '<?php get_bloginfo('url') ?>'; 
```

行不通。`<?php ?>`标记执行的服务器端。JS 代码在浏览器中执行。

您需要明确指定表单的操作 url： 类似于：

```
action = 'http://catalog.site.com/uhtbin/cgisirsi.exe/x/0/0/57/5'; 
```

我建议您创建一个隐藏字段：

```
$search_form .= '<input id="blog_url" type="hidden" value="' . get_bloginfo('url'). '">'; 
```

然后你的 JS 可以引用这个浏览器端：

```
action = $('#blog_url').val(); 
```

祝你好运！

# audio - 音乐无法在 Firefox 中播放

> ID：10643662
> 
> 赞同：1
> 
> 时间：2012-05-17T21:15:41.123
> 
> 标签：audio, mp3, ogg

该网站是[http://www.kingcharltonmusic.com/album/wednesday-overproof-riddim-2/](http://www.kingcharltonmusic.com/album/wednesday-overproof-riddim-2/)

我正在使用一个插件，它要求文件的 mp3 和 ogg 版本。出于某种原因，所有其他浏览器都使用 mp3，但 firefox 会查找 ogg，然后我得到某种错误并且无法播放。这是错误：

不支持“text/html”的 HTTP“Content-Type”。加载媒体资源[http://www.kingcharltonmusic.com/wp-content/uploads/2012/04/Wednesday-ogg1.ogg](http://www.kingcharltonmusic.com/wp-content/uploads/2012/04/Wednesday-ogg1.ogg)失败。@ [http://www.kingcharltonmusic.com/album/wednesday-overproof-riddim-2/](http://www.kingcharltonmusic.com/album/wednesday-overproof-riddim-2/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:18:15.213

看起来 Firefox 在使用 OGG mime 类型时遇到了困难，并试图将其读取为 html。当您提供这样的文件时，您应该尝试将内容类型标头强制为 mp3 或 ogg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:19:13.133

我使用[Buzz.js](http://buzz.jaysalvat.com/)播放音乐，您仍然需要提供一个 mp3 文件和一个 ogg 文件，但它可以解决您的问题并且适用于每个浏览器。

# javascript - javascript调用后Rails更新DIV（从模型重新加载）

> ID：10643672
> 
> 赞同：2
> 
> 时间：2012-05-17T21:16:57.070
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, unobtrusive-javascript

好的，我有一个页面显示客户他有多少小部件。这是视图（haml）：

```
#available
  = "Available widgets: #{@customer.widgets.unused.count()}" 
```

（“未使用”是模型中显示可用小部件的范围）。

当客户使用带有“：remote => true”的表单兑换小部件时，一些javascript会在页面上放置一个带有动画的漂亮DIV，并且控制器会更新模型。

这是控制器：

```
 def redeem
    @customer = Customer.find(params[:customer_id])
    number = params[:amount].to_i
    unless @customer.widgets.unused.empty?
      number.times do
        @customer = Customer.find(params[:customer_id])
        widget = @customer.widgets.unused.first # Grab first unused pass
        widget.status = "Redeemed"
        widget.save!
      end
    else
      @pay = "true"
      # customer.widgets.new
    end
    # redirect_to @customer
  end 
```

这是javascript（js.erb）：

```
var number = <%= params[:amount] %>;
<% if @pay.eql? "true" %>
  $("#widget-pay").modal('toggle');
<% else %>
   while (number > 0) {
     var item = $('<div class="widget-show">...</div>');
     $('#allwidgets').isotope('insert', item);
     number --;
   }
<% end %> 
```

我的问题是我现在想用新的小部件计数更新“#available”DIV。我该怎么做呢？

在最坏的情况下，我可以重新加载页面，以便再次从模型中提取数据，充其量只是更新 DIV。我似乎无法从 javascript 中做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:29:55.887

你可以这样做：

```
render :js => "$('#available').append(widget)"
widget.save! 
```

# python - Python：正则表达式：查找是否存在，否则忽略

> ID：10643674
> 
> 赞同：2
> 
> 时间：2012-05-17T21:17:07.090
> 
> 标签：python, regex

我需要关于 re 模块的帮助。我有模式：

```
pattern = re.compile('''first_condition\((.*)\)
extra_condition\((.*)\)
testing\((.*)\)
other\((.*)\)''', re.UNICODE) 
```

如果我对以下文本运行正则表达式，就会发生这种情况：

```
text = '''first_condition(enabled)
extra_condition(disabled)
testing(example)
other(something)'''
result = pattern.findall(text)
print(result)
[('enabled', 'disabled', 'example', 'something')] 
```

但是如果遗漏了一两行，正则表达式会返回空列表。例如我的文字是：

```
text = '''first_condition(enabled)
other(other)''' 
```

我想得到什么：

```
[('enabled', '', '', 'something')] 
```

我可以在几个命令中执行此操作，但我认为它会比在一个正则表达式中执行此操作要慢。原始代码使用sed，所以速度非常快。我可以使用 sed 来做到这一点，但我需要跨平台的方式来做到这一点。有可能吗？坦克！

PS如果字符串序列是免费的，而不是固定的，那也很棒：

```
text = '''other(other)
first_condition(enabled)''' 
```

必须返回完全相同：

```
[('enabled', '', '', 'something')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:27:15.523

我会先将其解析为字典：

```
import re

keys = ['first_condition', 'extra_condition', 'testing', 'other'] 
d = dict(re.findall(r'^(.*)\((.*)\)$', text, re.M))
result = [d.get(key, '') for key in keys] 
```

在线查看它：[ideone](http://ideone.com/uNcvj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:22:36.237

对可选内容使用不匹配的组，并通过在组后放置问号使组成为可选。

例子：

```
pat = re.compile(r'a\(([^)]+)\)(?:b\((?P<bgr>[^)]+)\)?') 
```

抱歉，我现在无法对此进行测试。

上面需要一个字符串`a(foo)`，并将父母中的文本作为第 0 组。

然后它可以选择匹配一个字符串`b(foo)`，如果匹配，它将被保存为具有名称的命名组：`bgr`

请注意，我没有`.*`在括号内使用匹配，而是`[^)]+`. 这肯定会在到达结束括号时停止匹配，并且至少需要一个字符。`[^)]*`如果括号可以为空，则可以使用。

这些模式变得越来越复杂，因此您可能希望使用带有注释的详细模式。

要拥有几个可能以任何顺序出现的可选模式，请将它们全部放在一个不匹配的组中，并用竖线分隔它们。您将需要使用命名匹配组，因为您不知道顺序。在不匹配组之后放置一个星号以允许存在任意数量的替代模式（如果不存在，则包括零）。

# salesforce - 如何为审批流程中的所有步骤设置审批人？

> ID：10643675
> 
> 赞同：4
> 
> 时间：2012-05-17T21:17:13.340
> 
> 标签：salesforce, apex-code

我有一个包含三个步骤的审批流程，所有这些步骤都设置为分配的审批者 = 手动选择。当用户提交记录以供批准时，我想让 Apex 代码确定三个批准者是谁。但是，我看不到一种方法可以连接到批准请求提交。

如果我使用 Apex Using 提交批准`Approval.process()`，我可以使用 设置初始（并且只有初始）批准者`ProcessSubmitRequest.setNextApproverIds()`。此调用使您相信您可以指定多个批准者，因为它需要一个 Id 数组，但该数组只能有 1 个元素，否则运行时会发生错误。

一旦我知道第一个审批者的响应是什么，我就可以使用 Apex 提交她的响应，然后再次通过将`ProcessWorkitemRequest`实例传递给`Approval.process()`. 这里需要注意的是，审批者不得通过标准 UI 进行审批。相反，他们必须执行一些调用 Apex 代码的操作，以便我们可以设置下一个批准人。审查对象上的触发器或自定义按钮 + VF 页面可用于调用 Apex。

我的主要问题是，如何确保用户不使用标准的批准按钮？它们出现在 Approvals 相关列表和 salesforce 主屏幕上。它也可能在其他地方。同样，如果他们使用标准的提交和批准按钮，我没有任何方法可以设置下一个批准者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T17:24:09.653

不久前我们遇到了类似的问题，并通过为某些用户创建自定义查找字段来解决它。例如，如果我们想将批准请求发送给 Director，然后是 VP，我们将 Director__c 和 MarketVP__c 字段添加到对象中。每当提交请求时，这些字段通过爬升角色层次结构填充到代码中。然后，我们的审批流程步骤根据这些字段中的值选择受让人（第一步将分配给相关用户：主管，第二步将分配给相关用户：市场副总裁等）。

为了解决标准批准按钮问题（我们有其他原因隐藏它），我们只是将其从他们的主页布局中隐藏并构建了我们自己的 VF 页面并将其包含在自定义主页组件中。该组件用作收件箱，其中包含指向等待用户批准的任何记录的链接。所有用户与批准对象的交互都是通过其他 VF 页面处理的，这些页面有自己的批准和拒绝按钮。我不知道您提交到审批流程的对象是否甚至使用 VF 页面，因此这对于您的情况可能不可行。

我知道，对不需要的东西进行了很多定制。可能不是您正在寻找的答案，但希望它是一些值得深思的东西。

# android - 无法在 Eclipse 上添加 AdMob

> ID：10643676
> 
> 赞同：1
> 
> 时间：2012-05-17T21:17:18.363
> 
> 标签：android, eclipse, admob

我只是想把admob（4.3.1）放在eclipse上的android应用程序（3.3，api 10）上（版本：3.7.2）

按照[谷歌教程](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)，一开始我有一个错误 `android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>`

然后在添加 com.google.ads.adview... 我只是不知道该怎么做，我尝试了 2 或 3 次，但我不清楚我是否必须`Import`从我的项目中删除并放入或放入低于或高于。我下载了示例，但我似乎在活动中有错误。

所以我只是尝试[创建一个横幅 XML](https://developers.google.com/mobile-ads-sdk/docs/android/banner_xml)并且没有任何问题。我保存为 .apk，放在我的手机上（我给设备 ID 用于测试的设备），它就是无法打开，每次尝试时都会强制关闭。我在市场上有近 10 个免费应用程序，只是在等待广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:34:41.523

您的问题是 api 10 是 version `2.3.3`，而不是`3.3`. AdMob 所需的`screenSize`和`smallestScreenSize`configChanges 直到 Android 3.2 (api 13) 才被引入到 Android 框架中。因此，如果您的 project.properties 低于`android-13`，您的应用程序将无法编译。

至于添加 AdView，我不确定我是否理解您的问题。[示例代码在此处](http://code.google.com/p/google-mobile-dev/source/browse/examples/Fundamentals/src/com/google/example/ads/fundamentals/BannerSample.java?repo=examples-android)开源。也许您可以指出给您带来问题的那条线。

# python - 如何从用户输入中获取两个模型的数据？

> ID：10643682
> 
> 赞同：0
> 
> 时间：2012-05-17T21:17:34.313
> 
> 标签：python, django-models, django-views

问题是我不能去这个模型，他特别相信用户会为模型分配许多输入，而我只将一个输入分配给另一个模型。

想法是从所有条目中获取所有数据，每个条目获取最后一级相关模型，请参见示例：

```
class User
    # a standard django.contrib.auth user model

class UserProfile(models.Model):
    # my AUTH_PROFILE_MODULE for django-profiles
    user = models.ForeignKey(User, unique=True)
    instance = models.ManyToManyField(Instance1)

class Model2(models.Model):
    user = models.ForeignKey(User)
    item0 = models.CharField(max_length=12)
    model2 = models.OneToOneField(Model2)

class Model3(models.Model):
    item1 = models.CharField(max_length=12)

user = request.user 
```

模型 2 - 项目 1

*   项目 0[0]= 1
*   项目 0[1]= 2
*   项目 0[2]= 3

模型 3 - 项目 2

*   项目 1[0]= 4
*   项目 1[1]= 5
*   项目 1[2]= 6

因为我可以从 Model2 和 Model3 中获取所有 item1 和 intem2，使用配置文件并放置在一个变量中以在模板中呈现所有 ManyToManyField -> (OneToOneField -> Items) ？

我正在努力：

```
myuser = request.user
items = UserProfile.objects.get(user=myuser) 
```

去爬查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:38:51.700

我认为您可能会混淆模型和实例。您在此处定义的所有内容都只是一个蓝图或模板——您并没有真正通过它们直接存储或访问数据。但是，您可以使用它们为数据赋予结构，并创建该结构的*实例*。

例如，这里我定义了一个基本模型。在 Django 中，这些通常定义在`models.py`

```
class MyModel(models.Model):
  name = models.CharField(max_length=20)
  element = models.CharField(max_length=12) 
```

现在，我将使用称为构造函数的函数创建模型的*实例*。一般来说，您只使用模型的名称 ( `ModelName(parameter=value,...)`) 来调用它。在 Django 中，这通常作为 中的操作的一部分来完成`views.py`，但您也可以在 Python 控制台中通过导入所需的类 ( `from models import Model`) 来尝试它。

在这里，我填充了 10 个实例`MyModel`：

```
for i in range (0,10):
  m = MyModel(element="letter" + str(i), name="Instance"+ str(i))
  m.save() # this saves m in MyModel.objects 
```

所有这些实例都通过 访问`ModelName.objects.all()`，您可以通过通常的`.`符号访问该字段：

```
models = MyModel.objects.all()
output = ""
for m in models:
  output += m.name + ":" + m.element 
```

将其输出到浏览器需要更多步骤 - 我强烈建议您逐步尝试[官方 Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)，以更好地了解框架的工作原理。

# perl - 计算共现

> ID：10643685
> 
> 赞同：0
> 
> 时间：2012-05-17T21:18:08.100
> 
> 标签：perl, r, perl-data-structures

![截屏](../Images/f780e8c4ee916b43e4394cf9438431ad.png)

我有一个文件，如随附的屏幕截图所示。有 61 个事件（峰），我想找出所有可能组合中每个峰与另一个峰（共现）发生的频率。该文件具有频率（峰值出现在 47 个样本中的次数）和概率（峰值出现的次数除以样本总数）。

然后我想使用公式 p(x,y) / p(x)*p(y) 找到互斥峰，其中 p(x,y) 是 x 和 y 同时出现的概率，p(x)是峰值 (x) 的概率，p(y) 是峰值 y 的概率。

解决此类问题的最佳方法是什么？我需要编写 Perl 脚本还是可以使用一些 R 函数？我是一名试图学习 Perl 和 R 的生物学家，所以我会很感激一些示例代码来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:35:36.247

在下文中，我假设您交替调用的 p(xy) 和 p(x,y) 实际上应该是同时发生的**概率**（而不是**次数**） 。如果这不正确，只需从下面的第 2 行中删除除以。`x``y``nrow(X)`

```
# As an example, create a sub-matrix of your data
X <- cbind(c(0,0,0,0,0,0), c(1,0,0,1,1,1), c(1,1,0,0,0,0))

num <- (t(X) %*% X)/nrow(X)              # The numerator of your expression   
means <- colMeans(X)                     # A vector of means of each column
denom <- outer(colMeans(X), colMeans(X)) # The denominator
out <- num/denom
#      [,1] [,2] [,3]
# [1,]  NaN  NaN  NaN
# [2,]  NaN 1.50 0.75
# [3,]  NaN 0.75 3.00 
```

**注意：**结果中的`NaN`s 是 R 表示这些单元格“不是数字”的方式（因为它们都是 0 除以 0 的结果）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:53:42.840

如果没有适当的例子，你的问题并不完全清楚，但我认为这个结果符合你想要的，即“我想找出每个峰值与另一个峰值发生的频率（共现）”

```
library(igraph)
library(tnet)
library(bipartite)

#if you load your data in as a matrix e.g.

mat<-matrix(c(1,1,0,2,2,2,3,3,3,4,4,0),nrow=4,byrow=TRUE) # e.g.

 #     [,1] [,2] [,3]   #  your top line as columns  e.g.81_05  131_00 and peaks as rows
#[1,]    1    1    0
#[2,]    2    2    2
#[3,]    3    3    3
#[4,]    4    4    0 
```

然后

```
pairs<-web2edges(mat,return=TRUE)
pairs<- as.tnet(pairs,type="weighted two-mode tnet")
peaktopeak<-projecting_tm(pairs, method="sum")
peaktopeak

#peaktopeak
#   i j w
#1  1 2 2 # top row here says peak1 and peak2 occurred together twice
#2  1 3 2
#3  1 4 2
#4  2 1 4
#5  2 3 6
#6  2 4 4
#7  3 1 6
#8  3 2 9
#9  3 4 6
#10 4 1 8
#11 4 2 8
#12 4 3 8  # peak4 occured with peak3 8 times 
```

编辑：如果不发生互斥峰只是那些在与原始数据相同的列中不共享 1 的峰，那么您可以在`peaktopeak`. 例如，如果峰值 1 和 3 从未出现，它们将不会在同一行的 peaktopeak 中找到。

为了更容易查看，您可以：

```
peakmat <- tnet_igraph(peaktopeak,type="weighted one-mode tnet")
peakmat<-get.adjacency(peakmat,attr="weight") 
```

例如：

```
#     [,1] [,2] [,3] [,4]
#[1,]    0    2    2    2
#[2,]    4    0    6    4
#[3,]    6    9    0    6
#[4,]    8    8    8    0 # zeros would represent peaks that never co occur. 

#In this case everything shares at least 2 co-occurrences 
#diagonals are 0 as saying  peak1 occurs with itself is obviously silly. 
```

# email - ISO-8859-1（真/假）

> ID：10643694
> 
> 赞同：4
> 
> 时间：2012-05-17T21:18:49.577
> 
> 标签：email, encoding, encode, iso-8859-1

这是真话还是假话？

Unicode 是 ISO-8859-1 的超集，因此前 256 个 Unicode 字符对应于 ISO-8859-1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:30:10.630

> 规范的编码：ISO-8859-1 仅包含仅 256 编码。意思是，只有 256 个代码。

真的。编码对每个字符仅使用 8 位，因此只有 256 个可能的字符。

> UTF-8 是一个超集，它的前 256 个编码代码与 ISO-8859-1 相同。

不完全正确，但基本正确。

ISO-8859-1 字符集与 Unicode 字符集中的前 256 个字符相同。UTF-8 编码用于对 Unicode 字符进行编码。由于 UTF-8 是一种多字节编码，它使用 0-255 范围内的一些代码作为多字节代码的开始。这意味着您不能安全地将 ISO-8859-1 解码为 UTF-8，反之亦然。

参考：[en.wikipedia.org/wiki/ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:26:06.463

[维基百科第1](http://en.wikipedia.org/wiki/ISO_8859-1)页的第一段回答了这个问题：“[ISO 8859-1] 定义了 Unicode[.] 中的前 256 个代码点分配”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:24:22.883

256 个字符：[http ://htmlhelp.com/reference/charset/](http://htmlhelp.com/reference/charset/)

[http://en.wikipedia.org/wiki/ISO/IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)

我投票**正确**

# math - 快速傅里叶变换伪代码？

> ID：10643697
> 
> 赞同：0
> 
> 时间：2012-05-17T21:19:16.180
> 
> 标签：math, language-agnostic, computer-science

以下代码的目的是将多项式从系数表示转换为值表示，方法是将其划分为奇数和偶数幂，然后在较小的多项式上递归。

```
function FFT(A, w)

Input: Coefficient representation of a polynomials A(x) of degree ≤ n-1, where n 
is a power of 2w, an nth root of unity.

Output: Value representation A(w^0),...,A(w^(n-1))

if w = 1; return A(1)
express A(x) in the form A_e(x^2) and xA_o(x^2) /*where A_e are the even powers and A_o  
the odd.*/
call FFT(A_e,w^2) to evaluate A_e at even of powers of w
call FFT(A_o,w^2) to evaluate A_o at even powers of w
for j = 0 to n-1;
    compute A(w^j) = A_e(w^(2j))+w^j(A_o(w^(2j)))

return A(w^0),...,A(w^(n-1)) 
```

1.  for 循环的用途是什么？

2.  为什么伪代码只添加较小的多项式，不需要也减去它们？（计算 A(-x)）。这不是算法完全基于的吗？添加*和*减去较小的多项式以将点减少一半？*

3.  为什么要评估“w”的幂而不是“x”？

**我不太确定这是否属于这里，因为这个问题非常数学。如果您觉得这个问题是题外话，如果您将它移到一个您认为这个问题更合适的网站，而不是仅仅关闭它，我将不胜感激。**

*Psuedocode由 S. Dasgupta从*Algorithms获得。*第 71 页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:24:56.050

1.  循环用于递归。
2.  负 x 不需要加；FFT 从时间空间变换到频率空间。

# java - 菜单项不显示图标

> ID：10643702
> 
> 赞同：0
> 
> 时间：2012-05-17T21:19:52.357
> 
> 标签：java, android

我正在尝试向菜单项添加图标。这不起作用：

```
 android:icon="@android:drawable/ic_menu_save"
  android:drawableLeft="@android:drawable/ic_menu_save" 
```

我会做错事吗？

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/delete"
          android:icon="@drawable/ic_menu_save"
          android:title="@string/delete" />
</menu> 
```

爪哇：

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T21:26:33.083

尝试这个 ：

android:icon="@drawable/ic_menu_save"

还检查此链接将有所帮助：

[http://www.tanisoft.net/2010/09/android-context-menu-with-icon.html](http://www.tanisoft.net/2010/09/android-context-menu-with-icon.html)

希望这有帮助

# string - mod_rewrite 查询字符串

> ID：10643705
> 
> 赞同：0
> 
> 时间：2012-05-17T21:20:08.877
> 
> 标签：string, mod-rewrite

我有一个查询字符串，例如

```
search.php?id=12&keyword=abc&api=gIUTG6898 
```

我希望 URL 是这样的：

```
search/?id=12&keyword=abc&api=gIUTG6898 
```

现在我找到了很多解决方案，但它们仅限于查询字符串中的一个变量。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:46:12.197

这并不复杂，因为您只想“传输”查询字符串。您可以在 RewriteRule 中忽略它。

```
RewriteRule ^search/?$ search.php [QSA] 
```

这只是将“search/”重写为“search.php”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:53:59.387

由于您想要删除 .php 并用斜杠替换它，因此您需要稍微反转 Floern 的 RewriteRule：

```
RewriteRule ^/search.php$ /search/ [QSA,L] 
```

# php - PHP 中最好的聊天框类型

> ID：10643709
> 
> 赞同：-3
> 
> 时间：2012-05-17T21:20:16.193
> 
> 标签：php, chat

我想创建一个像 gmail 或 facebook 这样的聊天框。构建它的最佳架构是什么。使用套接字或ajax应该好吗？

如果是这样，那么请您描述或提供架构的参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:23:17.213

我建议 XMPP。我用它为我公司的软件设计了一个聊天系统，效果很好。那里有很多 XMPP 库。不过，如果您愿意，也可以使用 Google 的一些服务。并非所有内容都需要从头开始编写：

[https://developers.google.com/talk/open_communications](https://developers.google.com/talk/open_communications)

# linq-to-entities - 如何为 Linq to Entities OrderBy() 实现与自定义 IComparer 的等效功能？

> ID：10643712
> 
> 赞同：0
> 
> 时间：2012-05-17T21:20:25.790
> 
> 标签：linq-to-entities, sql-order-by, icomparer

如何为 Linq to Entities OrderBy() 实现与自定义 IComparer 的等效项？

[正如MSDN 文档所述](http://msdn.microsoft.com/en-us/library/bb738624.aspx)，Linq to Entities 不支持自定义比较器：

> LINQ to Entities 支持大多数 LINQ 排序方法，但接受 的方法除外[`IComparer`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)，因为比较器无法转换为数据源。有关详细信息，请参阅[LINQ to Entities 查询中的标准查询运算符](http://msdn.microsoft.com/en-us/library/bb738551.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:30:15.820

如果你想使用自定义[`IComparer`](http://msdn.microsoft.com/en-us/library/System.Collections.IComparer.aspx)，你需要先问问自己是否可以在数据库中进行排序。如果不是，只需调用[`AsEnumerable`](http://msdn.microsoft.com/en-us/library/bb335435)序列，然后在服务器上对其进行排序。

如果您可以（并且想要）在数据库中对其进行排序，那么您需要考虑需要进行哪些转换才能进行排序。如果你有一个复杂的转换，你可以把它写成一个 SQL 函数，并将它添加到你的数据上下文中：

```
from e in context.Entities
let hours = context.Get32HourValue(e.Time)
orderby hours
select e 
```

# css - 仅在 IE7 和 IE8 中不以链接或悬停状态显示背景图像

> ID：10643717
> 
> 赞同：0
> 
> 时间：2012-05-17T21:21:07.180
> 
> 标签：css, menu, superfish

我正在使用超级鱼菜单来显示购物车图标。将鼠标悬停在购物车图标上时，菜单会下拉。链接状态包含购物车的背景图像。将鼠标悬停在链接上时，背景图像正在切换为较暗的图像，并且周围的空间被白色填充。这似乎在 FF 中运行良好，但我在 IE7 和 IE8 中都遇到了问题。在 IE7 和 IE8 中，问题是背景图像不会显示为链接状态或悬停状态。只有当我在安装了 IE7 和 IE8 的实际机器上检查它时才会发生这种情况。在选择了相应的浏览器模式后，它似乎无法在 IE9 中运行。似乎也没有在虚拟机上复制。**问题是：是什么导致图像在 IE7 和 IE8 中不显示？**代码有点长，无法粘贴到这里。

更新了 JS Fiddle [http://jsfiddle.net/SeasonEnds/nfYDC/2/](http://jsfiddle.net/SeasonEnds/nfYDC/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:59:56.763

根据您的小提琴，您在悬停时将背景设置为图像和“无”。

```
.cart li:hover, .cart li.sfHover,
.cart a:focus, .cart a:hover, .cart a:active {
    background:#fcfcfc;
} 
```

尝试仅设置背景颜色，而不是使用背景的简写，这意味着在未设置任何内容时背景图像为“无”。那里可能存在一些冲突（如果您的小提琴 CSS 具有有效的图像引用，会更容易测试）。

# java - Android Multitouch - 带有多个指针的 ACTION_MOVE

> ID：10643718
> 
> 赞同：1
> 
> 时间：2012-05-17T21:21:21.877
> 
> 标签：java, android, multi-touch

嗨，在我的应用程序中，我有一个我想要上半部分的手指来控制顶部的东西和下半部分的手指同时控制底部的东西。所以我尝试实现多点触控，但我似乎无法让 ACTION_MOVE 正确。当我在屏幕上移动 2 根手指时，它只会移动首先触摸屏幕一侧的对象。我想知道为什么会这样？这是我的代码：

```
 public boolean onTouch(View v, MotionEvent event){
  //needs multitouch
  if(checkInGame()){
      int pointerIndex = 0;
            if(event.getY() < this.getMeasuredHeight() / 2){  
                pointerId1 = event.getPointerId(event.getActionIndex());
                pointerIndex = event.findPointerIndex(pointerId1);
            }else{
                pointerId2 = event.getPointerId(event.getActionIndex());    
                pointerIndex = event.findPointerIndex(pointerId2);
            }

            switch(event.getAction() & MotionEvent.ACTION_MASK){

                case MotionEvent.ACTION_MOVE:{
                    int numPointers = event.getPointerCount();

                    for (int i = 0; i < numPointers; i++){
                        if(event.getY(i) < this.getMeasuredHeight() /2){  
                          Log.d("Touch","Move1");
                          int moveX = 0;
                          int moveY = 0;
                          moveX = (int) event.getX(i) - sX;
                          moveY = (int) event.getY(i) - sY;

                          ship1.setLoc(moveX, moveY);
                          sX = sX + moveX;
                          sY = sY + moveY;
                        }else{
                            Log.d("Touch","Move2");
                              int moveX = 0;
                              int moveY = 0;
                              moveX = (int) event.getX(i) - sX2;
                              moveY = (int) event.getY(i) - sY2;

                              ship2.setLoc(moveX, moveY);
                              sX2 = sX2 + moveX;
                              sY2 = sY2 + moveY;
                        }
                          return true;
                    }

                }
                  case MotionEvent.ACTION_DOWN: {

                        if(event.getY(pointerIndex) < this.getMeasuredHeight() /2){  
                            Log.d("Touch","Top1");
                            sX = (int) event.getX(pointerIndex);
                            sY = (int) event.getY(pointerIndex);
                        }else{
                            Log.d("Touch","Bottom1");
                             sX2 = (int) event.getX(pointerIndex);
                             sY2 = (int) event.getY(pointerIndex);
                        }
                        return true;
                    }

                  case MotionEvent.ACTION_POINTER_DOWN:{
                      if(event.getY(pointerIndex) < this.getMeasuredHeight() /2){  
                            Log.d("Touch","Top2");
                            sX = (int) event.getX(pointerIndex);
                            sY = (int) event.getY(pointerIndex);
                        }else{
                            Log.d("Touch","Bottom2");
                             sX2 = (int) event.getX(pointerIndex);
                             sY2 = (int) event.getY(pointerIndex);
                        }
                        return true;
                  }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T02:27:41.480

您的 return 语句位于 for 循环内，因此它只迭代一次。

# ruby-on-rails - 尝试使用 mongoid 作为 orm 在 rails 连接到 ec2 上的 mongodb 实例

> ID：10643727
> 
> 赞同：2
> 
> 时间：2012-05-17T21:22:32.200
> 
> 标签：ruby-on-rails, mongodb, amazon-ec2, mongoid

基本上我有一个 mongodb 实例在 ec2 上运行和工作。另一方面，我有一个使用 mongoid 作为 orm 在本地工作的 rails 3.2 应用程序。我接下来要做的是尝试使用 mongoid 将我的 rails 应用程序连接到 mongodb 实例。另外，打算稍后在 Dotcloud 上托管我的 rails 应用程序

运行代码`rails g mongoid:config`以使用以下代码生成 mongoid.yml 文件：

```
development:
 host: localhost
 database: mongotest_development

test:
 host: localhost
 database: mongotest_test

set these environment variables on your prod server
production:
 host: <%= ENV['MONGOID_HOST'] %>
 port: <%= ENV['MONGOID_PORT'] %>
 username: <%= ENV['MONGOID_USERNAME'] %>
 password: <%= ENV['MONGOID_PASSWORD'] %>
 database: <%= ENV['MONGOID_DATABASE'] %>
 # slaves:
 #   - host: slave1.local
 #     port: 27018
 #   - host: slave2.local
 #     port: 27019 
```

从这里开始，我认为我对这一切将如何运作没有一个清晰的认识。但我做了一些试验和错误。首先，我想尝试连接到开发中的 mongodb 实例，所以我注释掉了 mongoid.yml 默认值并添加了以下内容：

```
development:
 host: <public dns of the mongodb instance>
 port: 27017
 # username: 
 # password: 
 database: <I ssh into the instance and created a database> 
```

我将用户名和密码注释掉，部分原因是我不确定该放什么，部分原因是当我检查 ec2 上的 mongod.conf 文件时，我看到默认情况下 :auth 为 false，所以我认为不需要身份验证。所以我跑了`rails console`，得到以下错误：

```
Failed to connect to a master node at <public dns of the mongodb instance>:27017 (Mongo::ConnectionFailure)
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongo-1.6.2/lib/mongo/connection.rb:589:in `setup'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongo-1.6.2/lib/mongo/connection.rb:114:in `initialize'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongo-1.6.2/lib/mongo/connection.rb:165:in `new'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongo-1.6.2/lib/mongo/connection.rb:165:in `from_uri'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongoid-2.4.10/lib/mongoid/config/database.rb:86:in `master'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongoid-2.4.10/lib/mongoid/config/database.rb:19:in `configure'
from /Users/Kinglee/.rvm/gems/ruby-1.9.2-p180@rails3tutorial/gems/mongoid-2.4.10/lib/mongoid/config.rb:290:in `configure_databases'
.... 
```

在这一点上，我有点困惑。我一直在问自己，我需要用户名和密码才能连接到 mongodb 吗？我有 80% 确定我需要它们，但我不确定在哪里可以找到它们，或者不确定我连接到什么，mongodb ec2 实例或 mongodb 数据库。我应该怎么做呢？我应该在实例上打开端口 27017 和 28017 吗？我是否需要将配置添加到 database.yml （我非常怀疑我是否需要，因为已经有 mongoid.yml 但只是想确认）

我一直在查看文档和教程列表：

*   [http://mongoid.org/docs/installation/configuration.html](http://mongoid.org/docs/installation/configuration.html)
*   [http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-AbouttheKeyFile](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-AbouttheKeyFile)
*   [生产中的 MongoDB 和 Mongoid](https://stackoverflow.com/questions/7300080/mongodb-and-mongoid-in-production) - 看起来像我正在寻找的东西，但不确定，是否会尝试。
*   [http://craiccomputing.blogspot.com/2011/02/authentication-in-mongo-and-mongoid.html](http://craiccomputing.blogspot.com/2011/02/authentication-in-mongo-and-mongoid.html)

感谢这里任何人的任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T06:19:41.360

好的，终于找到问题了。在 mongodb.conf 文件中，有一个设置叫做

```
bind_ip = 127.0.0.1 
```

我没有注意到这一点，这意味着服务器只能在本地访问而不能从外部访问，因此出现连接失败错误。一个快速的解决方法是将其更改为

```
bind_ip = 0.0.0.0 
```

它有效。不过谢谢各位的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T21:23:55.797

这很可能是防火墙问题。检查您的 ec2 实例的安全组是否打开了默认的 mongodb 端口 27017。

如果您以前没有做过类似的事情，这篇文章将为您提供它是如何工作的要点：

[http://cloud-computing.learningtree.com/2010/09/24/understanding-amazon-ec2-security-groups-and-firewalls/](http://cloud-computing.learningtree.com/2010/09/24/understanding-amazon-ec2-security-groups-and-firewalls/)

# joomla - 鼠标悬停在文章中的段落更改上

> ID：10643731
> 
> 赞同：0
> 
> 时间：2012-05-17T21:22:51.873
> 
> 标签：joomla, joomla-extensions, joomla2.5

我想在我的基于 Jommla 的应用程序中有一个功能，当用户将鼠标移到文章中的特定段落上时，文本的颜色应该会改变。使段落在屏幕上看起来更加突出。

我希望这件事是动态的。只是想知道哪个是最好的地方。在 Joomla 中，文章解析发生在哪里？如果我很幸运，是否有任何插件可以帮助实现这一目标？请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:13:57.193

到目前为止，最简单的做法是在文章中为相关段落添加样式，然后在 css 中添加适当的悬停规则，例如

```
<p class="highlight>some text in here</p> 
```

和

```
p.highlight:hover
{
    color: #ff0000;
} 
```

刚刚在这里尝试过，它在最后一段对我有用：

[http://thelunarscape.com/blog/an-increasingly-active-sun](http://thelunarscape.com/blog/an-increasingly-active-sun)

在这种情况下，比使用插件更好的解决方案，除非你想要更花哨的东西，因为每次加载文章时都会运行内容插件，无论是否需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:33:24.077

您可以对 Trev 的解决方案稍作修改并使其工作，而无需更改任何文章。

```
.contentpaneopen p:hover {color:#ff0000;} 
```

默认情况下，Joomla 将 contentpaneopen 类分配给文章，这将对作为该类子级的所有 P 标签产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:51:45.113

实现此目的的另一种更高级的方法是借助 MooTools。

在您的应用程序中包含 MooTools：

```
jimport( 'joomla.html.html.behavior' );
JHtml::_('behavior.framework'); //MooTools core
JHtml::_('behavior.framework', true); //This is for MooTools more libraries 
```

接下来创建一个脚本，更改 id 为“myid”的段落的 css：

```
 $js = <<<EOD
    window.addEvent('domready', function(){
    $('myid').setStyle( 'border', '1px solid #000000')
    });
    EOD;
$document =& JFactory::getDocument();
$document->addScriptDeclaration($js); 
```

为什么使用 MooTools？MooTools 可以调整突出显示，甚至为突出显示设置动画。它还应该对旧版浏览器有更好的支持。

# c# - 使用基类的类型约束，即使类型参数是子类，也会调用基类的转换运算符

> ID：10643733
> 
> 赞同：1
> 
> 时间：2012-05-17T21:23:05.980
> 
> 标签：c#, generics, operator-overloading

我正在解决我在[此处](http://www.filedropper.com/testcustomtypescast)的解决方案中重新创建的问题。

问题是我正在使用一些可以从字符串隐式转换为自身的自定义类型。其中一种自定义类型继承自另一种。

```
public class CustomType
{
    public string InnerString { get; protected set; }

    public CustomType(string s)
    {
        InnerString = s;
    }

    #region Operator Overloads
    public static implicit operator CustomType(string s)
    {
        if (s == null)
            throw new ArgumentNullException();
        return new CustomType(s);
    }
    public static implicit operator string(CustomType value)
    {
        if (value == null)
            return null;
        return value.InnerString;
    }
    #endregion
}

public class SubCustomType : CustomType
{
    public SubCustomType(string s)
        : base(s)
    {
        // Nada
    }

    #region Operator Overloads
    public static implicit operator SubCustomType(string s)
    {
        if (s == null)
            throw new ArgumentNullException();
        return new SubCustomType(s);
    }
    public static implicit operator string(SubCustomType value)
    {
        if (value == null)
            return null;
        return value.InnerString;
    }
    #endregion
} 
```

在另一个泛型类中，我依赖于基本自定义类型可以从字符串隐式转换为自身的事实。（转换发生在`(T)this.Rtf`. `.Rtf`是一个字符串。）（在我的例子中，泛型类是 RichTextBox 的子类，因为这是我遇到这个问题时使用的。）

```
public class CustomRichTextBox<T> : Forms.RichTextBox
    where T : CustomType
{
    public object GetValue()
    {
        /// This line throws:
        /// InvalidCastException
        /// Unable to cast object of type 'TestCustomTypesCast.CustomType' to type 'TestCustomTypesCast.SubCustomType'.
        return (T)this.Rtf;
    }
}

public class SubCustomRichTextBox : CustomRichTextBox<SubCustomType>
{
} 
```

当我使用`SubCustomRichTextBox`（具有 SUB 自定义类型作为类型参数的泛型类的实例）时，我在转换为`T`in的行处收到 InvalidCastException `GetValue`。我认为正在发生的是，为了让编译器能够接受我`T`用来从字符串转换的事实，它正在查看`CustomType`并看到它的转换重载。但即使我使用 的子类`CustomType`作为实际类型参数，编译器仍然希望`SubCustomType.CustomType(string s)`执行强制转换，而不是使用正确的`SubCustomType.SubCustomType(string s)`方法。

谁能指出我解决这个问题的方向？我想使用泛型类，因为它允许我重用相同的代码。如果我不能使用泛型，那么我需要在`CustomRichTextBox<T>`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:45:54.067

这会很困难，因为运算符重载是静态的，并且您实际上是在尝试获得虚拟行为。

尝试这个：

```
public class CustomRichTextBox<T> : Forms.RichTextBox
    where T : CustomType, new()
{
    public object GetValue()
    {
        T t = new T();
        t.InnerString = this.Rtf;
        return t;
    }
} 
```

注意我已经添加`new()`到类型约束中。我还必须让 InnerString 公开设置。

顺便说一句，您可以将返回类型`GetValue()`设为 be `T`。那可能是一个更好的 API。

# ruby - 码雷日晒

> ID：10643742
> 
> 赞同：3
> 
> 时间：2012-05-17T21:23:25.003
> 
> 标签：ruby, rubygems, coderay

如何将[日晒深色](http://ethanschoonover.com/solarized)添加到[coderay](http://coderay.rubychan.de/)？

我正在考虑调整[alpha.rb](https://github.com/rubychan/coderay/blob/master/lib/coderay/styles/alpha.rb)文件，但不确定哪个 css 类定义可以替换为哪个颜色代码。

有更好的主意吗？也许存在一些开箱即用的解决方案？也发现[了这个](https://github.com/zealot128/Notes-App/blob/master/app/assets/stylesheets/solarize.css.scss)，但不知道如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T01:51:33.417

下面的结果与solarized的外观非常接近，但并不完美。基本上，我将[这个样式表用于 solarize](https://github.com/zealot128/Notes-App/blob/master/app/assets/stylesheets/solarize.css.scss)并逐个选择器进行选择器，并尽我所能将其转换为[Coderay 使用的样式](https://github.com/rubychan/coderay/blob/master/lib/coderay/styles/alpha.rb)。

这是 ruby​​ 的原始曝光示例： ![在此处输入图像描述](../Images/89016c3ccbf11b9185136cb288b45f61.png)

这是我能够使用 coderay 产生的结果： ![在此处输入图像描述](../Images/58580886b4c2eee3f54567fff0516f00.png)

SO：它并不完美，但会让任何想要为 Coderay 使用类似 Solarized 的“主题”的人。

这是您需要做的（对于 Rails 3 应用程序）：

首先，您需要覆盖 coderay gem 中用于生成内联样式的模块。创建一个名为`coderay.rb`内的文件`config/initializers`。

接下来将以下内容粘贴到`config/intializers/coderay.rb`您刚刚创建的文件中：

```
module CodeRay
  module Styles

  # A colorful theme using CSS 3 colors (with alpha channel).
  class Alpha < Style

    register_for :alpha

    code_background = '#073642'
    numbers_background = 'hsl(180,65%,90%)'
    border_color = '#c0c0c0'
    normal_color = '#d5f6f6'

    CSS_MAIN_STYLES = <<-MAIN  # :nodoc:
    .CodeRay {
      background-color:##073642;
      border:1px solid #c0c0c0;
      background: #002B36;
      color:#eee8d5;
    }
    .CodeRay pre {
      margin: 0px;
    }

    span.CodeRay { white-space: pre; border: 0px; padding: 2px; }

    table.CodeRay { border-collapse: collapse; width: 100%; padding: 2px; }
    table.CodeRay td { padding: 2px 4px; vertical-align: top; }

    .CodeRay .line-numbers {
      background-color:#d5f6f6;
      color:#808080;
      text-align:right;
      -webkit-user-select:none;
      -moz-user-select:none;
      user-select:none;
    }
    .CodeRay .line-numbers a {
      background-color:#d5f6f6;
      color:#808080;
      text-decoration:none
    }
    .CodeRay .line-numbers a:target { color:#00f !important; }
    .CodeRay .line-numbers .highlighted { color: red !important; }
    .CodeRay .line-numbers .highlighted a { color: red !important; }
    .CodeRay span.line-numbers { padding: 0px 4px; }
    .CodeRay .line { display: block; float: left; width: 100%; }
    .CodeRay .code { width: 100%; }
    MAIN

    TOKEN_COLORS = <<-'TOKENS'
    .debug{color:#fff;background:#00f}
    .annotation{color:#586E75}
    .attribute-name{color:#93A1A1}
    .attribute-value{color:#93A1A1}
    .binary{color:#509}
    .char .content{color:#d20}
    .char .delimiter{color:#710}
    .char{color:#2AA198}
    .class{color:#268BD2;font-weight:bold}
    .class-variable{color:#268BD2}
    .color{color:#eee8d5}
    .comment{color:#586E75}
    .comment .char{color:#859900}
    .comment .delimiter{color:#859900}
    .complex{color:#a08}
    .constant{color:#B58900;font-weight:bold}
    .decorator{color:#268BD2}
    .definition{color:#099;font-weight:bold}
    .delimiter{color:#000}
    .directive{color:#088;font-weight:bold}
    .doc{color:#93A1A1}
    .doc-string{color:#93A1A1;font-weight:bold}
    .doctype{color:#DC322F}
    .entity{color:#CB4B16;font-weight:bold}
    .error{color:#93A1A1;background-color:#faa}
    .escape{color:#CB4B16}
    .exception{color:#CB4B16;font-weight:bold}
    .float{color:#2AA198}
    .function{color:#268BD2;font-weight:bold}
    .global-variable{color:#268BD2}
    .hex{color:#2AA198}
    .imaginary{color:#f00}
    .include{color:#b44;font-weight:bold}
    .inline{background-color:transparent;color:#93A1A1!important}
    .inline-delimiter{font-weight:bold;color:#DC322F}
    .instance-variable{color:#268BD2}
    .integer{color:#2AA198}
    .key .char{color:#DC322F}
    .key .delimiter{color:#268BD2}
    .key{color:#859900}
    .keyword{color:#859900;font-weight:bold}
    .label{color:#93A1A1;font-weight:bold}
    .local-variable{color:#268BD2}
    .namespace{color:#859900;font-weight:bold}
    .octal{color:#2AA198}
    .operator, .predefined{color:#859900;font-weight:bold}
    .predefined-constant{color:#2AA198}
    .predefined-type{color:#DC322F;font-weight:bold}
    .preprocessor{color:#859900}
    .pseudo-class{color:#859900;font-weight:bold}
    .regexp .content{color:#2AA198}
    .regexp .delimiter{color:#DC322F}
    .regexp .modifier{color:#CB4B16}
    .regexp{background-color:transparent}
    .reserved{color:#268BD2;font-weight:bold}
    .shell .content{color:#2b2}
    .shell .delimiter{color:#161}
    .shell{background-color:transparent}
    .string .char{color:#2AA198}
    .string .content{color:#2AA198}
    .string .delimiter{color:#DC322F}
    .string .modifier{color:#2AA198}
    .string{background-color:transparent}
    .symbol .content{color:#2AA198}
    .symbol .delimiter{color:#2AA198}
    .symbol{color:#2AA198}
    .tag{color: #268BD2}
    .type{color:#DC322F;font-weight:bold}
    .value{color:#268BD2}
    .variable{color:#268BD2}
    .insert{background:transparent}
    .delete{background:transparent}
    .change{color:#CB4B16;background:transparent}
    .head{color:#CB4B16;background:transparent}
    .head .filename{color:#CB4B16}
    .delete .eyecatcher{background-color:rgba(255,0,0,0.2);border:1px solid rgba(230,0,0,0.5);margin:-1px;border-bottom:none;border-top-left-radius:5px;border-top-right-radius:5px}
    .insert .eyecatcher{background-color:rgba(0,255,0,0.2);border:1px solid rgba(0,128,0,0.5);margin:-1px;border-top:none;border-bottom-left-radius:5px;border-bottom-right-radius:5px}
    .insert .insert{color:#CB4B16;background:transparent;font-weight:bold}
    .delete .delete{color:##2AA198;background:transparent;font-weight:bold}
    .change .change{color:#CB4B16}
    .head .head{color:#CB4B16}
    TOKENS

  end

  end
end 
```

您还将向您的应用程序添加以下 CSS（或者，如果您愿意，可以为它创建一个文件`assets/stylesheets`）`coderay.css`：

```
pre {
  background: #002A35!important;
  color: #93A1A1!important;
} 
```

以上会将您的代码背景设置为 solarize 使用的深色背景，并将 codeway 未注释的任何代码设置为 solarize 中使用的后备颜色。

现在只需重新启动您的应用程序。

** 同样，这并不完美，您可能希望`coderay.rb`在某个时候再次打开该文件并改进内容。您可以使用它来帮助：http: [//jsfiddle.net/bradleygriffith/CNTw4/](http://jsfiddle.net/bradleygriffith/CNTw4/) **

# android - getTag() 返回一个假字符串

> ID：10643744
> 
> 赞同：2
> 
> 时间：2012-05-17T21:23:36.837
> 
> 标签：android, string, false-positive

我已将图像视图上的标签设置为“空白”，因此在 xml 文件中看起来像这样

```
android:tag="blank" 
```

现在当我运行这个

```
((String) buttons[button-2].getTag() == "blank" 
```

它返回假。我找不到原因，有什么想法吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T21:25:11.600

利用：

```
((String) buttons[button-2].getTag().equals("blank") 
```

为了`String`比较，您必须使用`equals`,`==`测试参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T02:23:51.483

您也可以`intern`使用字符串。这总是为相同的字符串内容生成相同的对象，因此您可以使用`==`.

# jquery - 2 柱体，流体宽度，100% 高度，固定页眉和页脚

> ID：10643746
> 
> 赞同：0
> 
> 时间：2012-05-17T21:23:42.007
> 
> 标签：jquery, html, css

我正在尝试实现以下设计：

[https://www.dropbox.com/s/2y4qfxhn6noupap/Scr​​een%20shot%202012-05-17%20at%203.18.00%20PM.png](https://www.dropbox.com/s/2y4qfxhn6noupap/Screen%20shot%202012-05-17%20at%203.18.00%20PM.png)

左列和右列将具有百分比宽度，但理想情况下是固定的最小宽度。页眉和页脚分别固定在窗口的顶部和底部。

每列上还有一个背景图像，它被缩放以适应高度或宽度（以较大者为准）。

目前我正在使用 Javascript 来实现我的设计宽度和一些高度：但我的问题是：

这在完全 CSS 中是可能的吗？如果它使用 HTMl5/CSS3 技术，我很高兴。

感谢您提供任何可能的帮助！

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:23:35.330

在我的脑海中，这样的事情应该在 HTML4/CSS2 中工作（未经测试）：

最小尺寸为 200 像素的 20% 列

```
.col {
    width: 20%; 
    min-width: 200px;
    width:expression(document.body.clientWidth < 200? "200": "20%"); /* for IE6 only, as it doesn't support min-width */
} 
```

固定位置页眉和页脚：

```
.header { position: absolute; top: 0px; left: 0px; width: 100%; height: 40px; background: #000000;}
.footer { position: absolute; bottom: 0px; left: 0px; width: 100%; height: 40px; background: #000000;} 
```

有关缩放背景图像，请参阅此问题：[拉伸和缩放 CSS 背景](https://stackoverflow.com/questions/376253/stretch-and-scale-css-background)

# spring - 在 Spring MVC 中管理多个数据源

> ID：10643747
> 
> 赞同：0
> 
> 时间：2012-05-17T21:23:52.413
> 
> 标签：spring, spring-mvc, datasource, config

在我的 spring mvc 应用程序中，我需要根据用户在前端选择的功能在给定时间连接到多个数据库。让我们说 ：

1.我有 3 种不同的环境（PROD、PRE-PROD 和 Staging 等等……）

2.用户想查看给定数据库中的表列表。用户将从选择框中选择项目并提交。根据用户选择，它需要连接到相应的数据库并获取结果。

3.有时某些数据库可能会出现故障，如果我为每个数据库创建 JNDI 数据源并将它们映射到 jdbcTemplate 并且所有这些 jdbcTemplaates 都被定义为我的 DAO 中的属性，例如

```
<bean id="prodDataSource" ref="prodDSPool"/>
<bean id="preProdDataSource" ref="preProdDSPool"/>
<bean id="statgingDataSource" ref="stagingDSPool" />
...
... 
```

我还有另一个 bean，它不过是我的 DAO

```
<bean id="myConnectionsDAO" class="com.example.MyConnectionsDAOImpl">
       <property name="prodDataSource">
             <ref bean="prodDataSource"/>
       </property>
       <property name="preProdDataSource">
             <ref bean="preProdDataSource"/>
       </property>
       <property name="preProdDataSource">
             <ref bean="preProdDataSource"/>
       </property>
</bean> 
```

MyConnectionDAO 是一个具有上述属性的 getter 和 setter 的 pojo。

正如我上面所说，取决于用户选择，我的服务类获取关联的数据源并构建 jdbcTemplate 并查询数据库，如

```
if(env.equalsIgnoreCase(EnvEnum.PROD.toString())
{
  JdbcTemplate prodTemplate = new JdbcTemplate(myConnectionsDAO.getProdDataSource());
prodTemplate.queryForList("select name form sysibm.systables where creator='admin');
//Core business logic to analyze those tables and proceed... 
}else if {//preprod logic} else if{//staging logic} 
```

而且我有很多复杂的功能可以处理来自 DB2 数据库的数据。由于我正在使用spring config将数据源注入到我的dao中；出于任何原因，如果一个数据库/数据源已关闭，我将无法使用我的应用程序并获取空指针，因为一个或多个数据源已关闭。

我该如何处理这些错误？基本上，如果至少有一个 ds 启动，我希望我的应用程序启动并运行。我使用上述配置配置了大约 50 个数据库。

我很困惑，不知道如何解决这个问题。提前谢谢各位...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:34:07.153

基本上，您需要为每个数据库管理自己的 Spring Application Context。

也就是说，您将启动一个应用程序上下文作为给定数据库的根[应用程序上下文的子项。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)然后，您将不得不管理动态数据库/数据源应用程序上下文的生命周期。

另一种选择是编写一个自定义的单一[数据源](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)，在幕后自动执行此路由。根据您的编辑，哪个看起来是最好的选择。

```
public class RoutingDatasource implements DataSource, ApplicationContextAware {

    private volatile DataSource realDataSource;
    private ApplicationContext ac;

    // You must do some thread locking here that will be rather complicated.
    // That is not included in this example
    public void switchDatasource(String name) {
        this.realDataSource = this.ac.getBean(name, DataSource.class);
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        this.ac = applicationContext;
    }

    // delegate to realDataSource

} 
```

您将需要弄清楚如何安全地锁定数据源对象。我会把它留给你（抱歉没时间了）。

# facebook - Facebook 发布操作 - 发布时采用预览对象中的值

> ID：10643748
> 
> 赞同：2
> 
> 时间：2012-05-17T21:24:02.793
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

好的，我正在尝试通过我的手机游戏在 facebook 上发布一个动作。

我已经设置了一个对象（比如“图片”）和一个动作（比如“绘图”）我已经设置了一个外部网页，其元数据描述了对象“图片”

现在我从我的游戏中发送一个带有参数的发布请求

*   access_token = 令牌
*   图片 = 对象的外部链接

动作已发布。但不是我在外部页面的元数据中给出的值。发布的动作具有我给对象“图片”的预览对象的值

**简而言之，发布的动作从“图片”的 PREVIEW OBJECT 而非外部链接的元数据中获取其值（如 og:title、og:image 等）。**

希望这是有道理的。

我很确定解决方案会非常简单，但我无法弄清楚问题所在。请帮忙。

# java - 调整表示为邻接矩阵的图的大小

> ID：10643752
> 
> 赞同：0
> 
> 时间：2012-05-17T21:24:42.147
> 
> 标签：java, algorithm, data-structures, graph, matrix

如果我决定使用“邻接矩阵”表示来表示图形，我怎么知道矩阵的大小应该是多少？

我见过的所有代码示例，都假设给了`Graph`对象大小来初始化矩阵，但我不清楚这个大小是从哪里来的。
我的意思是我假设要构建一个图形，该图形的数据是从文件中加载的，最好的方法是在您读取文件时创建图形（到目前为止是吗？）。
使用列表的替代表示非常容易。
但是在`matrix`实际加载文件之前，我们不知道顶点的数量。我不相信我们首先读取文件（可能包含数百万个顶点）*然后*构建图形。在我看来，这就像双重处理。

那么通常/最好的方法是什么？

**注意：**我知道使用列表的好处，但是由于大多数文档都说在密集图上，使用矩阵是可以接受的（但不适用于稀疏），我试图了解使用`matrix`表示的程序是如何正确实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:37:34.940

the usual/best way is given in the comments: you reallocate and copy. if you scale the size each time (eg double) the amortized (average) cost comes out as O(n), as far as i remember. this is how, for example, python has lists that grow to be any size you need. it's completely standard/common.

[i'm not really posting for points here; just frustrated that the answers in comments are what you need, but that you may not be paying attention to them or understanding them]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:18:36.350

如果输入格式在您的控制之下，您可以很好地估计大小。在下面的示例中，所有值都具有固定长度（6 个字符），左侧填充 0。这意味着每行的大小为 22 个字节。当您将文件大小除以 22 时，您会得到矩阵大小的近似值。如果图是完整的，则文件大小等于`nxn`，其中 n 是顶点数。

例子：

```
000001 000020 000030
000800 000001 000040
      etc... 
```

另一种解决方案是每次超过大小时将矩阵大小加倍。摊销的计算成本会很小。另一方面，内存可能是个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:45:54.937

如果您一开始没有顶点数，我相信您只能使用样板编号初始化矩阵。假设输入文件仅包含表单行，`x y z`这意味着从`x`到到的边`y`具有（可选）成本`z`。请注意，输入文件中的行数是图形的边数，假设文件不包含其他内容。`n(n-1)/2`由于您已经假设它是一个密集图，因此还假设它是一个完整图，其边数等于`n`顶点数。有了这些信息，您就可以得出足够接近的顶点数近似值。例如，如果输入文件中的边数正在`1000000`求解 `n*(n-1)/2 = 1000000`我们得到的方程`n`约等于`1415`。将矩阵初始化为`1415*1415`数组应该很好地覆盖你。

当然，所有这些都是基于这样一个事实，即您有足够快的方法来读取输入文件中的行数。

# java - 将浮点数转换为位

> ID：10643754
> 
> 赞同：8
> 
> 时间：2012-05-17T21:24:49.823
> 
> 标签：java, floating-point, double

如何获得 a`double`或 a的单个位（或整个变量） `float`？

例如，如果我有 float a = 0.5;

我希望`String`等于：
`"00111111000000000000000000000000"`

或十六进制：
`"F000000"`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T21:31:37.107

```
long bits = Double.doubleToLongBits(myDouble);
System.out.println(Long.toBinaryString(bits)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T21:30:35.803

看 `Float.floatToIntBits() or Float.floatToRawIntBits()`。这会让你得到一个 int 的位。如果您需要它作为字符串，`Integer.toBinaryString()`.

请注意，如果 HSB 打开，则可能会出现问题 - 您可能需要转换为 long 以避免“溢出”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T14:23:10.233

```
public void printFloatBits(float f) {
    int bits = Float.floatToIntBits(f);
    // Extract each bit from 'bits' and compare it by '0'
    for (int i=31; i>=0; --i) {
        // int mask = 1 << i;
        // int oneBit = bits & mask;
        // oneBit == 0 or 1?
        System.out.print((bits & (1 << i)) == 0 ? "0" : "1");
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-17T21:27:30.203

[`Double.byteValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#byteValue())可能会帮助你。

还有一个等效的 32 位[`Float.byteValue()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#byteValue()).

# c# - 在 C# 中实现 Equals 但不是 GetHashCode

> ID：10643758
> 
> 赞同：2
> 
> 时间：2012-05-17T21:24:59.803
> 
> 标签：c#

> **可能重复：**
> [为什么在 C# 中重写 Equals 方法时重写 GetHashCode 很重要？](https://stackoverflow.com/questions/371328/why-is-it-important-to-override-gethashcode-when-equals-method-is-overriden-in-c)

我没有实现 Object 类的 GetHashCode 方法。所以我收到了一些警告。

有没有办法检查相等性，我只检查 Equals 方法中的哈希码，所以实现 Equals 和 GetHashCode 而不会得到“Object.GetHashCode 未实现警告？”。

如果我只实现 Equals 而没有实现 GetHashCode 会发生什么？myclass 的实例在我的应用程序中是可更新的。

```
public class MyClass{

private string x;
private string y;

public override bool Equals(object obj)
        {

            try
            {

                 return    Object.Equals(this.x, obj.x)
                        && Object.Equals(this.y, obj.y);

            }
            catch(Exception Ex)
            {
                log.Debug(Ex.StackTrace);
                throw; 
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:29:53.003

如果您实现`Equals`但未实现`GetHashCode`，那么如果您的类用于任何使用散列（ 、 等）的数据结构，`HashSet<T>`它`Dictionary<K,V>`的行为将不正确。即使您没有显式使用这些数据结构，它们也可能被某些代码使用（即，一些 Linq 操作使用 HashSet），因此直接覆盖`GetHashCode`也更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:29:39.850

`GetHashCode`用于存储和检索has表中的对象，即判断对象相等性的另一种方法。

如果您覆盖一个 ( `Equals`) 而不是另一个 ( `GetHashCode`)，那么在使用`GetHashCode`（即，将对象放入作为哈希表实现的集合中）与`Equals()`.

您可能会喜欢阅读[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)关于该主题的这篇文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:30:16.937

如果您不实现`GetHashCode`，则当您的类用作字典或哈希集等结构中的键时，您的类将表现异常。如果你想使用这些类型的结构，没有办法绕过它。从技术上讲，如果您远离这些，您的应用程序将会工作，但这是一种糟糕的形式，任何使用您的类的人都会大吃一惊。

# iphone - MapView 高于 iOS 应用程序中的所有对象

> ID：10643768
> 
> 赞同：1
> 
> 时间：2012-05-17T21:25:48.003
> 
> 标签：iphone, objective-c, ios, mapkit

我在 nib 文件的视图中有一个 mapView，委托设置为文件的所有者，出口设置为 IBOutlet MKMapView* mapView;

我遇到的问题是地图高于所有其他对象。如果我添加 UIView，您将看不到它，因为它位于地图下方。

知道为什么会发生这种情况吗？我以前没有遇到过这个问题

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:31:12.457

为什么要添加标签或任何对 mkmapview 的控制，您可以改为使用它的委托来添加覆盖或注释。此外，如果您的问题是地图视图遍布整个屏幕，请设置其框架。

如果有其他情况，请更清楚地解释您的问题。

根据我们的讨论，您可以使用以下功能：-

```
[self.view bringSubViewToFront:yourView]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T00:06:23.213

答案很简单，您需要将创建的对象作为子视图添加到 MapView。

例如，下面是您将 UILabel 添加到 MapView 的方法。只需在 init 中执行此操作

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create the label
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 320)];
    label.backgroundColor = [UIColor whiteColor];
    label.text = @"I'm on top of the Map!";

    // Add the label to the mapView
    [self.mapView addSubview:label];

    // Release the label if you are not using ARC
    [label release];
} 
```

编辑：请记住，此概念适用于其他对象，例如 UISegmentedControl。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T00:20:59.090

最简单的方法是在界面生成器中更改“Z”顺序。选择视图或其他 UI 元素，然后在编辑器菜单下查找排列。在那里你会发现

发送到前面

发回

转发

向后发送

# c - 如何使用 C 中的嵌套 for 循环获得以下输出？

> ID：10643769
> 
> 赞同：-4
> 
> 时间：2012-05-17T21:25:52.197
> 
> 标签：c, for-loop, nested, scanf

如何在 C 编程中使用嵌套循环？

编写一个程序，要求用户输入一个数字，然后显示从 0 到他们输入的数字的所有数字的乘法表。这应该通过嵌套的 for 循环来完成。例如，如果用户输入 3，他们应该会看到：

0 0 0 0
0 1 2 3
0 2 4 6
0 3 6 9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:35:06.810

由于这是家庭作业，我将描述导致解决方案的思维方式，而不是解决方案本身。首先看一下想要的输出：

```
0 0 0 0
0 1 2 3
0 2 4 6
0 3 6 9 
```

你会意识到这个输出等于：

```
0*0 0*0 0*0 0*0
1*0 1*1 1*2 1*3
2*0 2*1 2*2 2*3
3*0 3*1 3*2 3*3 
```

然后你会意识到每个数字等于**行索引**乘以**列索引，**换行符打印在每行的末尾。之后，您应该能够轻松地自己编写它:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:30:42.837

伪代码

```
for x = 0 to num
  for y = 0 to num
    print x * y
  print newline 
```

# c++ - 计算 Windows 服务器上的线程数；计数器路径

> ID：10643775
> 
> 赞同：0
> 
> 时间：2012-05-17T21:26:14.923
> 
> 标签：c++, windows, pdh

这里有一个类似的线程[，](https://stackoverflow.com/questions/4156474/how-can-i-programmatically-get-thread-counts-for-a-windows-process)我尝试自己实现它。即尝试使用 c++ 库获取服务器中运行的线程数。

我可以确切地知道 COUNTER_PATH 是什么吗？[（例如，给定链接](https://stackoverflow.com/questions/4156474/how-can-i-programmatically-get-thread-counts-for-a-windows-process)中的“\Process(*_)\Thread Count” ）？用那个和 pid 号创建一个字符串是什么意思？

以下是我到目前为止所写的内容，但没有真正理解任何内容：

```
#include <windows.h>
#include <pdh.h> //and suppose there're other libraries as necessary...

CONST PWSTR COUNTER_PATH = L"\Process(*)\Thread Count";

int returnNumThreads()
{
    HQUERY hQuery = NULL;
    HCOUNTER hCounter;
    DWORD counterType;
    PDH_FMT_COUNTERVALUE counterValue;
    PWSTR Paths = NULL;
    PDH_STATUS pdhStatus = PdhOpenQuery(NULL, 0, &hQuery);

    pdhStatus = PdhAddCounter(hQuery, COUNTER_PATH, 0, &hCounter);
    pdhStatus = PdhCollectQueryData(hQuery);
    pdhStatus = PdhGetFormattedCounterValue(hCounter,
                    PDH_FMT_LONG,
                    &counterType,
                    &counterValue);
    return counterValue.longValue;
}

// **Here, I removed all the error checking codes such as 
// "if (pdhStatus != ERROR_SUCCESS){...}" for better readability 
```

**另外，上面链接中给出的解决方案是扩展通配符路径，但是当我检查[PdhAddCounter 页面](http://technet.microsoft.com/en-us/library/aa372204%28v=vs.85%29.aspx)时，它说：“如果计数器路径包含通配符，所有匹配通配符的计数器名称都添加到查询”，所以我不确定是否真的需要扩展。

我一直在查看[各种](http://www.dre.vanderbilt.edu/~mxiong/tmp/backup/RTI_Vanderbilt/throughput_internal/PerfMon.cxx) [示例](http://technet.microsoft.com/en-us/library/aa371886%28v=vs.85%29.aspx)，但我仍然不确定我是否正确地创建了查询或者仍然是 COUNTER_PATH 是什么。谁能给我一个解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:10:03.367

`PdhAddCounter`将命名计数器添加到打开的查询中。`L"\Process(*)\Thread Count"`是这样的名字。它被认为是“路径”名称，因为它的语法是分层的（部分由 分隔`\`），类似于文件路径。

通配符意味着您要为 、 等添加线程计数器`Process(Foo)`以`Process(Bar)`获取所有进程的线程总数。（如果您正在运行 foo.exe 的两个副本，则第二个是`\Process(Foo#1)`

# coffeescript - 在 Sublime Text 2 中编译和运行 Coffeescript

> ID：10643779
> 
> 赞同：6
> 
> 时间：2012-05-17T21:26:42.490
> 
> 标签：coffeescript, sublimetext, sublimetext2

有没有人在 Sublime Text 2 中使用 TextMate 包编译和运行 CoffeeScript 文件有任何运气[https://github.com/jashkenas/coffee-script-tmbundle](https://github.com/jashkenas/coffee-script-tmbundle)

**CoffeeScript.sublime-build**

```
{
"path": "/usr/local/bin",
"cmd": ["coffee","$file"],
"file_regex": "^(...*?):([0-9]*):?([0-9]*)",
"selector": "source.coffee"
} 
```

无论如何要在 Sublime Text 2 中启用编译**和**编译选定的文本命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T03:25:45.883

在 2197 [http://www.sublimetext.com/forum/viewtopic.php?f=2&t=7180中添加了多个构建](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=7180)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T01:34:17.103

如果通过“多个构建命令”您的意思是向 CoffeeScript 传递不同的编译选项，您可以查看此博客文章以了解我是如何做到的：

[http://hectorcorrea.com/Blog/Compiling-CoffeeScript-from-Sublime-Text-2](http://hectorcorrea.com/Blog/Compiling-CoffeeScript-from-Sublime-Text-2)

基本上，我使用与您相同的方法（通过“构建”菜单）来实现，其余的我必须使用插件来实现。

@atomi 的回答表明这将很快得到本地支持，这将非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T15:59:44.833

这里的设置看起来很有希望。显然，您可以将组合键绑定到命令，在这种情况下，只需在文件上运行咖啡。

[http://soenkerohde.com/2011/11/coffeescript-with-sublime-text/](http://soenkerohde.com/2011/11/coffeescript-with-sublime-text/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T12:44:46.690

我发现在 OSX 上使用 Node 我需要对[@Hector's answer](https://stackoverflow.com/a/10730053/1450420)进行修改。

我创建了一个新`CoffeeScriptRun.sublime-build`文件（工具 > 构建系统 > 新构建系统），如下所示：

```
{
  "cmd": ["coffee", "$file"],
  "selector" : "source.coffee",
  "path" : "/Users/derekhill/.nvm/v0.10.35/bin"
} 
```

该路径是来自的目录`which node`（即末尾没有“节点”）

然后[Wes Bos 的博客文章](http://wesbos.com/sublime-text-build-scripts/)对每个部分的含义进行了有用的解释：

*   `cmd`是将要运行的命令数组。
*   `selector`是将构建脚本范围限定为特定文件类型的可选方法
*   `path`是要执行命令的地方。因为 Sublime 在 python 控制台中执行它，所以我们需要指定我们想要使用的编译器在我们系统的哪个位置。

所以基本上这相当于去节点目录运行`coffee my_file.coffee`

# android - SQLiteException：表联系人没有列年龄 - Android

> ID：10643782
> 
> 赞同：0
> 
> 时间：2012-05-17T21:26:54.910
> 
> 标签：android, database, sqlite

我正在尝试在 Android 的 SQLite 数据库中创建一个表。我设置了所有内容，但它一直告诉我我没有“年龄”列，而我显然这样做了！任何人都可以帮忙吗？

```
// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "contactsManager";

// Contacts table name
private static final String TABLE_CONTACTS = "contacts";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";
private static final String KEY_AGE = "age";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT," + KEY_AGE + "TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS titles");
    onCreate(db);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T21:30:27.293

`String`在声明列的位置放置一个空格`age`：

```
...+ KEY_PH_NO + " TEXT," + KEY_AGE + " TEXT" + ")"; 
```

此外，执行此操作后，您需要卸载该应用程序，然后重新安装它以进行此修改（因此`onCreate`将再次调用该方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:30:46.577

您需要`TEXT`在下面的代码中添加一个空格字符：

```
KEY_AGE + "TEXT" 
```

# objective-c - 滑块上的值绑定未正确更新

> ID：10643785
> 
> 赞同：2
> 
> 时间：2012-05-17T21:27:16.957
> 
> 标签：objective-c, cocoa, cocoa-bindings, key-value-observing, key-value-coding

我目前正在使用的应用程序正在使用普通的 NSSlider 控制 QuickTime 电影中的位置。就像那里的每个媒体播放器一样。

我想将滑块的值绑定到电影位置（在 0 到 1 范围内）以避免粘/胶水代码。

当我在 UI 中拖动滑块时，会调用正确的设置器，但由于某种原因，当我以编程方式更改值时滑块不会更新。我会说我了解绑定的原理以及 KVC 的工作原理。而且我也知道，当您以编程方式更改值时，您必须使用 getter 或 setter，或者您必须使用 [self willChangeValueForKey:@"theKey"] 和 [self didChangeValueForKey:@"theKey"] 通知观察者。

由于某种原因，这仍然不起作用。我在 getter 中也有一些日志语句。它甚至没有被调用一次！

我无法真正解释自己这种行为的原因可能是什么。唯一的一点是，这与在网上找到的简单示例（以及在 Aaron Hillegass 的书中）有点不同的是，我使用的是密钥路径而不是简单的密钥。

从 IB 到 App Delegate，它有一个 activeMovie 属性。activeMovie 是类 VS_Movie 的一个实例，它有一个 moviePosition 属性。所以我的关键路径是：self.activeMovie.movi​​ePosition Xcode 似乎也能找到。

我将不胜感激提供的任何提示和帮助！提前致谢

这是我正在使用的一些代码：

## 一、财产申报

```
// ivar
NSNumber* _moviePosition;

// Property
@property (retain) NSNumber* moviePosition; 
```

## 2.getter和setter实现

```
- (NSNumber*) moviePosition
{
    NSLog(@"MoviePosition returned : %lf", [_moviePosition doubleValue]);
    return _moviePosition;
}

- (void) setMoviePosition:(NSNumber*)newPos
{
    NSLog(@"New MoviePosition : %lf", [newPos doubleValue]);

    if ( _moviePosition && [newPos isEqualToNumber:_moviePosition] )
        return;

    if ( _moviePosition ) 
       [_moviePosition release];

    _moviePosition = [newPos retain];

    if ( _positioningReady )
    {
        _positioningReady = NO;

        TimeValue newMovieTime = (TimeValue)([_moviePosition doubleValue] * 
                                             (double)_clipDurationTimeValue);
        SetMovieTimeValue(_qtMovie, newMovieTime);
        [_movieView displayCurrentFrameOfMovie:self];

        // Post a notification to inform the observing 
        // classes so they can do the neccessary handling.
        NSNotificationCenter* nc = [NSNotificationCenter defaultCenter];
        [nc postNotificationName:VS_MoviePositionChangedNotification 
                      object:self];
    }
} 
```

## 3.调用函数

```
- (void) setTimeValue:(TimeValue) value withTimeScale:(TimeScale) scale
{
    SetMovieTimeValue(_qtMovie, value);
    SetMovieTimeScale(_qtMovie, scale);

    double newMoviePosition = (double)GetMovieTime(_qtMovie, NULL) / (double)_clipDurationTimeValue;
    [self setMoviePosition:[NSNumber numberWithDouble:newMoviePosition]];

    [_movieView displayCurrentFrameOfMovie:self];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:51:46.123

假设属性被调用`moviePosition`，getter 应该被调用`-moviePosition`（没有下划线）并且 setter 应该被调用`-setMoviePosition:`（没有下划线并且属性名的第一个字母大写）。

你没有出示`@property`声明。虽然允许指定 setter 和 getter 的名称，但 KVC 和 KVO 都没有注意这一点。对于他们来说，它需要遵循命名约定。请参阅[键值编码编程指南：简单属性的访问器搜索模式](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/SearchImplementation.html#//apple_ref/doc/uid/20000955-CJBBBFFA)。

您确定您声称的调用了正确的二传手吗？因为您错误地命名了您的访问器方法，所以编译器无法识别它们。因此，`@synthesize`正在生成正确命名的。那些被 KVC 调用（并被 KVO 钩住）。

这也是为什么不使用与您的方法不匹配的`-setTimeValue:withTimeScale:`调用而逃脱的原因。但是，您应该会收到警告（并且在运行时会出现崩溃），因为您将 a 传递给期望.`[self setMoviePosition:newMoviePosition]``-set_moviePosition:``double``NSNumber*`

# eclipse - 我可以获得 gradle 来更新我现有的 Eclipse 项目吗？

> ID：10643786
> 
> 赞同：3
> 
> 时间：2012-05-17T21:27:17.470
> 
> 标签：eclipse, gradle, logback

我是 Gradle 的新手，所以如果这个问题看起来幼稚或简单，请原谅。

我的 Eclipse 项目存在并且运行良好，我想为我的日志记录添加 Logback。在 build.gradle 中设置依赖关系很容易......

```
dependencies {
    groovy group: 'org.codehaus.groovy', name: 'groovy', version: '1.8.3'

    // Logback dependencies    
    compile 'org.slf4j:slf4j-api:1.6.4'
    compile 'ch.qos.logback:logback-core:1.0.3'
    compile 'ch.qos.logback:logback-classic:1.0.3'
} 
```

...这使我的构建成功，但我怎样才能让它更新我的 Eclipse 项目的“引用库”部分？换句话说，我可以让 gradle 更新 eclipse 的 .classpath 为通过 gradle 依赖项引入的任何新库添加适当的条目吗？

就目前而言，我必须找出 ~/.gradle 中的依赖项变成 JAR 文件的位置，然后我手动创建参考库来指向它们。玉。必须有一种方法可以自动执行此操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T00:51:00.793

我认为您正在寻找的是[Gradle Eclipse Plugin](http://gradle.org/docs/current/userguide/eclipse_plugin.html)。

只需`apply plugin: 'eclipse'`在您的开头添加，`build.gradle`然后尝试运行`gradle eclipse`. 这将根据您的 gradle 设置生成所有 eclipse 设置文件。

如果您只需要生成`.classpath`，可以通过运行`gradle eclipseClasspath`.

# sql - SQLServer 数据库之间的访问限制

> ID：10643787
> 
> 赞同：1
> 
> 时间：2012-05-17T21:27:25.283
> 
> 标签：sql, sql-server

我在 DB1 中创建了一个视图来从 DB2 的表中选择数据。说“将视图 DB1.A 创建为从 DB2.B 中选择 *”。

仅有权访问 DB1 的用户“usr1”现在无法从此视图中选择数据。收到以下错误：服务器主体“usr1”无法在当前安全上下文下访问数据库“DB2”。

我知道这种情况可以通过在 Teradata 中使用“With Grant”选项授予 DB1 对 DB2 的只读访问权限来处理。SQL Server 中是否有类似的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:57:49.330

据我记得，默认情况下唯一有效的情况是如果您满足两个条件...
1\. 视图的所有者*也是*基础表的所有者
2\. 您有“跨数据库所有权链接” "激活

如果您不符合上述任一条件，则需要配置查询视图的用户/登录名的安全设置，而不仅仅是视图的所有者。

视图和内联表值函数都不允许使用`EXECUTE AS OWNER`或类似选项。

*   [所有权链](http://msdn.microsoft.com/en-us/library/ms188676%28v=sql.90%29.aspx)
*   [执行为](http://msdn.microsoft.com/en-us/library/ms188354.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:48:45.910

1) 使用以下链接将您的用户名映射到 DB2 数据库[here](http://msdn.microsoft.com/en-us/library/aa259605%28SQL.80%29.aspx)或[this](https://stackoverflow.com/questions/2775234/tsql-to-map-user-to-database)

# cuda - 纹理记忆——tex2D基础

> ID：10643790
> 
> 赞同：10
> 
> 时间：2012-05-17T21:27:43.780
> 
> 标签：cuda, texture2d

在使用纹理内存时，我遇到了以下代码：-

```
uint f = (blockIdx.x * blockDim.x) + threadIdx.x;
uint c = (blockIdx.y * blockDim.y) + threadIdx.y;

uint read = tex2D( refTex, c+0.5f, f+0.5f); 
```

我的问题是为什么我们`0.5f`要同时添加`c`and `f`？这让我很困惑..谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T17:34:32.157

在图形中，纹理是一组描述表面视觉外观的样本。一个样本就是一个点。也就是说，它没有大小（与具有物理大小的像素相反）。当使用样本来确定像素的颜色时，每个样本都位于其对应像素的确切中心。当使用整数坐标寻址像素时，给定像素的精确中心变为其整数坐标加上 0.5 的偏移量（在每个维度中）。

换句话说，将 0.5 添加到纹理坐标可确保从这些坐标读取时，返回该像素的准确样本值。

然而，只有当`filterMode`纹理被设置为时`cudaFilterModeLinear`，从纹理中读取的值才会在一个像素内变化。在该模式下，从不在像素精确中心的坐标读取返回值，这些值在给定像素的样本和相邻像素的样本之间进行插值。因此，将 0.5 添加到整数坐标可以有效地否定`cudaFilterModeLinear`模式。但是，由于向纹理坐标添加 0.5 会占用内核中的周期，因此最好通过设置为 来简单地关闭`filterMode`插值`cudaFilterModePoint`。然后，从像素内的任何坐标读取会返回该像素的确切纹理样本值，因此，可以使用整数直接读取纹理样本。

使用 时`cudaFilterModePoint`，如果在计算纹理坐标时涉及任何浮点数学运算，则必须注意确保浮点不准确不会导致纹理坐标超出预期目标像素的范围。

此外，正如评论所提到的，您的代码中可能存在问题。将 0.5f 添加到纹理坐标意味着`cudaFilterModeLinear`正在使用该模式，但该模式返回一个浮点数，而不是一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:56:49.250

根据纹理属性，返回的值`tex2D`可能是线性插值的。在那种情况下，“索引”`f`不`c`应该是整数，而是每个维度的界限之间的连续值。

在这个例子中有点奇怪的是返回值是一个整数，无论​​如何这将使任何线性插值分段常数。

有关更多详细信息，请参阅 CUDA 编程指南的第 3.2.10 节。

# objective-c - UIImageView 处理拖拽系统

> ID：10643793
> 
> 赞同：0
> 
> 时间：2012-05-17T21:28:15.487
> 
> 标签：objective-c, xcode, cocoa-touch, uiimageview, draggable

我有一个图像，通过拖动，取决于我是触摸左侧还是右侧，它会扩展。比如编辑软件视频/音频的句柄。我的问题是，奇怪的是，它适用于左侧（使用位置/尺寸系统），但不适用于右侧。在右侧，当我拖动图像时，图像会呈指数增长。

这是我使用的代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];
    if ([touch view] == handlesImg) {

        UITouch *touch = [[event allTouches] anyObject];
        locationOne = [touch locationInView:touch.view];
       //Left
       if (locationOne.x < 12) {

            dragTimeLineInt = 1;

        }
       //Right
       else if (locationOne.x >  handlesImg.frame.size.width -12) {

        dragTimeLineInt = 2;

       }
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesMoved:touches withEvent:event];

    CGPoint pt = [[touches anyObject] locationInView:handlesImg];
    CGRect frame = [handlesImg frame];

    float xSize = frame.size.width;
    float xPos = frame.origin.x;

    switch (dragTimeLineInt) {
        case 1: //Left

        xSize -= pt.x -locationOne.x;
        xPos += pt.x - locationOne.x;
        [handlesImg setFrame:CGRectMake(xPos, 0, xSize, 40)];

        break;

    case 2: //Right
        xSize += pt.x -locationOne.x;
        [handlesImg setFrame:CGRectMake(xPos, 0, xSize, 40)];

        break;

    default:
        break;
    }
} 
```

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:21:11.780

不确定这是否有帮助...但是查看`-touchesMoved:withEvent:`方法中的第二个 case 语句，我注意到`xPos`您没有像在第一个 case 语句中那样更新。这是故意的吗？

# ios - 等到多个网络请求都执行完毕——包括它们的完成块

> ID：10643797
> 
> 赞同：39
> 
> 时间：2012-05-17T21:28:40.540
> 
> 标签：ios, objective-c, cocoa-touch, asynchronous, httprequest

我有多个操作（它们是 AFNetworking 请求），完成块需要一些时间才能执行，还有一个核心数据对象需要在所有请求结束时保存。

```
MyCoreDataObject *coreDataObject;

AFHTTPRequestOperation *operation1 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation1 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute1 = responseObject;
    sleep(5);
}];
[operation1 start];

AFHTTPRequestOperation *operation2 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation2 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute2 = responseObject;
    sleep(10);
}];
[operation1 operation2];

[context save:nil]; 
```

当然，这并不像我想要的那样工作，因为请求是异步的。我尝试像这样添加一个 NSOperationQueue：

```
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];
[operationQueue setMaxConcurrentOperationCount:2];

AFHTTPRequestOperation *operation1 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation1 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute1 = responseObject;
    sleep(5);
}];
[operationQueue addOperation:operation1];

AFHTTPRequestOperation *operation2 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation2 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute2 = responseObject;
    sleep(10);
}];
[operationQueue addOperation:operation2];

[imageQueue waitUntilAllOperationsAreFinished];
[context save:nil]; 
```

这看起来好一点。使用`waitUntilAllOperationsAreFinished`，我的队列会阻塞当前线程，直到我的请求完成，但直到我的成功块完成，这才是我真正需要的。

关于如何以一种好的方式实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-17T22:20:07.440

使用调度组。

```
dispatch_group_t group = dispatch_group_create();

MyCoreDataObject *coreDataObject;

dispatch_group_enter(group);
AFHTTPRequestOperation *operation1 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation1 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute1 = responseObject;
    sleep(5);
    dispatch_group_leave(group);
}];
[operation1 start];

dispatch_group_enter(group);
AFHTTPRequestOperation *operation2 = [[AFHTTPRequestOperation alloc] initWithRequest:request1];
[operation2 setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    coreDataObject.attribute2 = responseObject;
    sleep(10);
    dispatch_group_leave(group);
}];
[operation2 start];

dispatch_group_wait(group, DISPATCH_TIME_FOREVER);
dispatch_release(group);

[context save:nil]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-09T14:44:34.867

AFNetworking 为这种操作设计了方法，它从 GCD 中抽象出来：

`-enqueueBatchOfHTTPRequestOperationsWithRequests:progressBlock:completionBlock:`

`-enqueueBatchOfHTTPRequestOperations:progressBlock:completionBlock:`

看看[常见问题](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-20T10:47:48.950

我相信这样的事情：

```
NSMutableArray *mutableOperations = [NSMutableArray array];
for (NSURL *fileURL in filesToUpload) {
    NSURLRequest *request = [[AFHTTPRequestSerializer serializer] multipartFormRequestWithMethod:@"POST" URLString:@"http://example.com/upload" parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
        [formData appendPartWithFileURL:fileURL name:@"images[]" error:nil];
    }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [mutableOperations addObject:operation];
}

NSArray *operations = [AFURLConnectionOperation batchOfRequestOperations:@[...] progressBlock:^(NSUInteger numberOfFinishedOperations, NSUInteger totalNumberOfOperations) {
    NSLog(@"%lu of %lu complete", numberOfFinishedOperations, totalNumberOfOperations);
} completionBlock:^(NSArray *operations) {
    NSLog(@"All operations in batch complete");
}];
[[NSOperationQueue mainQueue] addOperations:operations waitUntilFinished:NO]; 
```

参考文档：[http ://cocoadocs.org/docsets/AFNetworking/2.5.0/](http://cocoadocs.org/docsets/AFNetworking/2.5.0/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-23T13:28:11.383

我的要求是来自字符串（URL）数组的许多请求

```
func updateSourceData(element: Int) {

    if element > availableUrls.count - 1 {
        return
    }

    let service = SourceDataServiceDao()
    let currentUrl = availableUrls[element]
    service.fooCall(url: currentUrl, completion: { (response, error) -> Void in
        self.updateSourceData(element + 1)
    })

} 
```

显然，这种方式调用是级联的，而不是N个异步调用。

# r - 计算向量中的连续数字

> ID：10643798
> 
> 赞同：9
> 
> 时间：2012-05-17T21:28:41.060
> 
> 标签：r, vector

如果我有一个像

```
"a": 0 0 0 1 1 1 0 0 0 0 1 1 0 0 0 
```

我想知道有多少`1`人在一起`a`，在这种情况下，答案是 3 和 2。

有没有可以做到这一点的脚本？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T21:31:22.487

见`?rle`。

```
## create example vector
a <- c(rep(0, 3), rep(1, 3), rep(0, 4), rep(1, 2), rep(0, 3))

## count continuous values
r <- rle(a)

## fetch continuous length for value 1
r$lengths[r$values == 1]
# [1] 3 2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T21:32:33.457

这个怎么样？

```
test <- c(0,0,0,1,1,1,0,0,0,0,1,1,0,0,0)
rle(test)$lengths[rle(test)$values==1]
#[1] 3 2 
```

对于海量数据，您可以使用一些复杂的选择来加快速度：

```
diff(unique(cumsum(test == 1)[test != 1]))
#[1] 3 2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T22:38:29.350

其他人已经回答了这个问题。我只想补充两点意见：

数据输入技巧：使用扫描（默认为“数字”类，不需要代表或逗号），如果添加“字符”作为参数，它也适用于由空格分隔的字符。

```
a <- scan()
1: 0 0 0 1 1 1 0 0 0 0 1 1 0 0 0
16: 
Read 15 items 
```

`rle`真的是反函数`rep`

```
 arle <- rle(a)
 rep(arle$values, arle$lengths)
 [1] 0 0 0 1 1 1 0 0 0 0 1 1 0 0 0 
```

# python - 使用 pyev 的 epool 或从 Python 中的 stdlib 中选择？

> ID：10643801
> 
> 赞同：2
> 
> 时间：2012-05-17T21:29:02.103
> 
> 标签：python, gevent, libevent, libev

`select`有人在 Python 中通过Python stdlib测量 pyev 相对于标准绑定的速度和有用性吗？

使用 pyev over 有什么好处`select`？

pyev 是由 C 扩展构建的，因此它不是可移植的解决方案。我尝试使用 PyPy 构建它，但开箱即用并没有成功。
所以我只是想知道是否值得使用它。

我知道**gevent**在它的 1.0 版本中使用 libev（在他们使用 libevent 之前）。他们真的需要吗？我不关心非事件循环功能（比如来自 libevent 的 dns）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:17:47.917

Python 的 select 模块只是 select()、poll() 和 epoll() 系统调用的包装，而 libev 和 libevent 实现了一个事件循环。事件循环管理观察者和计时器，将待处理的事件排队，调用你的回调等。

如果您想将 libev/libevent 与 Python 对应项进行比较，则需要将它们与 twisted 的 reactor 和 tornado 的 IOLoop 进行比较。

来自[libev 文档](http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod)：

> 以下是 ev_run 所做的血淋淋的细节（这是为了您的理解，不保证在未来的版本中事情会完全像这样工作）：
> 
> ```
>  - Increment loop depth.
>    - Reset the ev_break status.
>    - Before the first iteration, call any pending watchers.
>    LOOP:
>    - If EVFLAG_FORKCHECK was used, check for a fork.
>    - If a fork was detected (by any means), queue and call all fork watchers.
>    - Queue and call all prepare watchers.
>    - If ev_break was called, goto FINISH.
>    - If we have been forked, detach and recreate the kernel state
>      as to not disturb the other process.
>    - Update the kernel state with all outstanding changes.
>    - Update the "event loop time" (ev_now ()).
>    - Calculate for how long to sleep or block, if at all
>      (active idle watchers, EVRUN_NOWAIT or not having
>      any active watchers at all will result in not sleeping).
>    - Sleep if the I/O and timer collect interval say so.
>    - Increment loop iteration counter.
>    - Block the process, waiting for any events.
>    - Queue all outstanding I/O (fd) events.
>    - Update the "event loop time" (ev_now ()), and do time jump adjustments.
>    - Queue all expired timers.
>    - Queue all expired periodics.
>    - Queue all idle watchers with priority higher than that of pending events.
>    - Queue all check watchers.
>    - Call all queued watchers in reverse order (i.e. check watchers first).
>      Signals and child watchers are implemented as I/O watchers, and will
>      be handled here by queueing them when their watcher gets executed.
>    - If ev_break has been called, or EVRUN_ONCE or EVRUN_NOWAIT
>      were used, or there are no active watchers, goto FINISH, otherwise
>      continue with step LOOP.
>    FINISH:
>    - Reset the ev_break status iff it was EVBREAK_ONE.
>    - Decrement the loop depth.
>    - Return. 
> ```

# c# - Winform在Designer中的位置

> ID：10643805
> 
> 赞同：2
> 
> 时间：2012-05-17T21:29:17.590
> 
> 标签：c#, winforms, visual-studio-2008

我有一个奇怪的问题。当我在 Visual Studio (WinForm) 中创建一个新窗体时，在设计器中总是出现在位置 0,0。不知何故（我不知道如何），我的表单位于设计器的中间（例如，左上角现在位于位置 120、150）。有没有办法把它放回0,0？试图拖动它但不起作用。提前致谢。费尔南多

![在此处输入图像描述](../Images/e52f908dd731e0c3d7a9f47e32e13e41.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:22:22.730

找到了！我继承了表单，并像这样覆盖 OnShown：

```
 private void gp_InicialN_Shown(object sender, EventArgs e)
  {
     Rectangle oRect = Screen.GetBounds(this);
     this.Top = (oRect.Height / 2) - (this.Height / 2);
     this.Left = (oRect.Width / 2) - (this.Width / 2);
  } 
```

我没有做的是检查 DesignMode 变量。现在，一旦改变，工作正常。

```
 private void gp_InicialN_Shown(object sender, EventArgs e)
  {
     if (!DesignMode)
     {
        Rectangle oRect = Screen.GetBounds(this);
        this.Top = (oRect.Height / 2) - (this.Height / 2);
        this.Left = (oRect.Width / 2) - (this.Width / 2);
     }
  } 
```

# asp.net - 通过表单身份验证在受保护文件夹中的 Web 服务

> ID：10643807
> 
> 赞同：0
> 
> 时间：2012-05-17T21:29:24.220
> 
> 标签：asp.net, web-services, forms-authentication

如果我将我的 Web 服务 [将由特定角色使用] 放在一个文件夹中，该文件夹通过表单身份验证限制访问该角色，是否需要采取更多措施来防止未经授权的用户访问该 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:49:15.503

Web 服务不是为通过浏览器访问而设计的。表单身份验证旨在通过网站浏览器进行身份验证。因此，除非访问 Web 服务的客户端能够在访问 Web 服务时通过表单提交、接收、存储和传输生成的会话信息进行身份验证，否则表单身份验证将无法正常工作。

最好使用不同的身份验证提供程序，例如 ActiveDirectory 或 oAuth

有很多选择：

[http://www.asp.net/web-forms/videos/authentication/simple-web-service-authentication](http://www.asp.net/web-forms/videos/authentication/simple-web-service-authentication)

# ios - iOS模拟器不更新

> ID：10643808
> 
> 赞同：5
> 
> 时间：2012-05-17T21:29:31.930
> 
> 标签：ios, xcode4.2

我正在开发我的第一个 iOS 应用程序，每当我在 Xcode 中更改某些内容然后构建并运行时，这些更改都不会反映在模拟器中。这不仅仅是代码，我还添加了图像。

我已经保存并重新启动了 Xcode，并且在某种程度上，这些更改已反映在模拟器中。但是现在，无论我做什么，它都只是显示旧的东西。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T21:34:00.943

我建议您尝试 Product>Clean，然后 Product>Run in Xcode。

但是，我觉得这不是真正的问题，您可能对代码做错了。请使用一些代码示例更新您的答案，以显示您正在更改的内容以及更改方式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:33:53.347

我曾经遇到过类似的问题，我所做的是完全重置了 iOS 模拟器。在顶部的菜单栏中，只需进入 iOS 模拟器 > 重置内容和设置...

这将强制进行干净的构建并消除与 iOS 模拟器的所有可能冲突。如果您仍然有问题，请确保您的代码是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T04:18:55.117

也尝试查看其他设备 iPhone/iPad 的模拟器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-22T23:46:09.087

好的，我必须亲自体验这个问题才能找到解决方案。检查您的目标会员资格。如果您更改了其中任何一个，可能就是这样！我正在构建一个手表应用程序，必须对其进行更改以使其再次工作。

# android - 无法在 Android JUnit 项目上进行 ant 运行测试

> ID：10643810
> 
> 赞同：2
> 
> 时间：2012-05-17T21:29:39.430
> 
> 标签：android, ant, junit

我正在尝试构建一个 AutoTest 脚本，该脚本从 git 获取我的项目，然后在测试项目中运行测试，而无需使用任何模拟器或真实设备。

我已经下载了这两个项目，将它们放在同一个目录中并运行这些命令：

```
$ android update project -p Labyrinth -n Labyrinth
Updated local.properties
Added file Labyrinth/build.xml
Updated file Labyrinth/proguard-project.txt

$ android update test-project -m ../Labyrinth -p LabyrinthTest/
Resolved location of main project to: /home/me/labyrinth-temp/Labyrinth
Updated project.properties
Updated local.properties
Added file LabyrinthTest/build.xml
Updated file LabyrinthTest/proguard-project.txt
Updated ant.properties
Buildfile: /home/me/labyrinth-temp/LabyrinthTest/build.xml 
```

然后当我进入文件夹 LabyrinthTest 并尝试运行测试时，我得到了这个：

```
$ ant run-tests

BUILD FAILED
Target "run-tests" does not exist in the project "LabyrinthTest". 

Total time: 0 seconds 
```

在过去的 3-4 小时内，我用谷歌搜索并尝试了所有我能找到的东西，但没有任何进展。但是，使用模拟器运行“ant test”可以！但我想在没有它的情况下运行它。

```
$ ant test
Buildfile: /home/me/labyrinth-temp/LabyrinthTest/build.xml

-test-project-check:

test:
 [echo] Running tests ...
 [exec] 
 [exec] com.app.labyrinth.test.BallTest:...
 [exec] Test results for InstrumentationTestRunner=...
 [exec] Time: 0.034
 [exec] 
 [exec] OK (3 tests)
 [exec] 
 [exec] 
```

BUILD SUCCESSFUL 总时间：1 秒

如果需要信息：

```
Android API version used: 7 (2.1 Eclair)
Android SDK Tools version: 18
Apache Ant(TM) version 1.8.3 compiled on May 17 2012 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:57:56.883

**当模拟器**没有运行时，你没有告诉什么是不工作的，所以我猜问题是（假设`adb devices`你的设备显示为在线）你没有在你的 ant 命令行中指定*序列号*，如下所示：

```
$ ant -Dadb.device.arg="-s 0123456789" test 
```

# iphone - 对多个 Facebook request_id 执行操作

> ID：10643813
> 
> 赞同：1
> 
> 时间：2012-05-17T21:29:50.007
> 
> 标签：iphone, ios, facebook, facebook-graph-api

有没有办法在一个 Facebook Graph API 调用中检索或删除多个 Facebook request_id？

例如，如果用户收到来自不同人对同一应用程序的多个请求，它们将被分组为一个通知，并且当用户接受通知时，所有 request_id 将作为逗号分隔列表传递给应用程序。有什么方法可以避免遍历每一个并单独检索/删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T23:11:02.630

如果我理解正确，您可以使用[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)在一次调用中执行多项操作。

例如：

```
NSString *req01 = @"{ \"method\": \"GET\", \"relative_url\": \"me\" }";
NSString *req02 = @"{ \"method\": \"GET\", \"relative_url\": \"me/friends?limit=50\" }";
NSString *allRequests = [NSString stringWithFormat:@"[ %@, %@ ]", req01, req02];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:allRequests forKey:@"batch"];
[facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

这仍然意味着您必须遍历通知，但您可以使用一/两个请求来执行所有操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T23:35:03.990

Binyamin 是正确的，批处理请求可能会起作用。但是，我发现要通过 request_ids 获取请求数据，您可以简单地将它们作为逗号分隔的列表传递，并避免执行批处理请求。

```
NSString *requestIds = @"123456789,987654321";
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:requestIds forKey:@"ids"];
[facebook requestWithGraphPath:@"" andParams:params andDelegate:self]; 
```

您的最终图表 URL 应如下所示：

```
https://graph.facebook.com/?ids=REQUEST_ID1,REQUEST_ID2,REQUEST_ID3&access_token=ACCESS_TOKEN 
```

对于删除操作，相信还是需要批量操作的。当您从上述调用中从 FB 获取 request_id 数据时，它将是一个 NSDictionary，其中每个 result_id 作为键。您可以查看每个键并创建一个批处理操作以将它们全部删除。

```
NSDictionary *requests = DATA_RETURNED_FROM_FACEBOOK;
NSArray *requestIds = [requests allKeys];
NSMutableArray *requestJsonArray = [[[NSMutableArray alloc] init] autorelease];
for (NSString *requestId in requestIds) {
    NSString *request = [NSString stringWithFormat:@"{ \"method\": \"DELETE\", \"relative_url\": \"%@\" }", requestId];
    [requestJsonArray addObject:request];
}
NSString *requestJson = [NSString stringWithFormat:@"[ %@ ]", [requestJsonArray componentsJoinedByString:@", "]];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:requestJson forKey:@"batch"];
[facebook requestWithGraphPath:@"" andParams:params andHttpMethod:@"POST" andDelegate:nil]; 
```

[请注意，根据https://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)，批处理请求的当前限制为 50 。因此，为了完全安全，您应该检查 request_ids 的计数，如果它大于 50，您将不得不执行多个批处理请求。

# c# - NumericUpDown 值设置为浮点数时变为 0

> ID：10643837
> 
> 赞同：0
> 
> 时间：2012-05-17T21:31:28.090
> 
> 标签：c#, floating-point, int, numeric

因此 resizeWidth 和 resizeHeight 是以下代码中的 numericUpDown 控件。此外， tempBitmapW 和 tempBitmapH 都是浮点数。

```
float rW = (float)resizeWidth.Value;
float rH = (float)resizeHeight.Value;
rH = (float)Math.Truncate(tempBitmapH * ((float)rW / tempBitmapW));
int rsW = (int)rW;
int rsH = (int)rH;
resizeWidth.Value = rsW;
resizeHeight.Value = rsH; 
```

现在，当我调试它时，rsW 和 rsH 以及 rW 和 rH 不读为 0，它们都没有。但由于某种原因，numericUpDown 控件会抛出错误，因为值 0 超出了最小值/最大值范围（最小值设置为 1），所以基本上它会将其读取为 0。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:51:13.887

您只是没有正确理解演员表的工作原理。由于您将浮点数转换为 int 的方式，您将得到 0。浮点值可能是 0.42，但它会以整数形式转换为 0。

您应该详细检查演员表的工作方式，这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:56:21.497

为了扩展 squelos 的答案-听起来可能是您查看调试器中的值的那一刻和抛出异常的那一刻是两个不同的时间。如果您收到异常说该值为零 - 这可能是因为该值为零。

它可能变为零的**原因**是因为从 float 到 int 的转换总是向下舍入到最接近的整数。

# r - 使用循环的 DF 中变量的简单条形图

> ID：10643841
> 
> 赞同：2
> 
> 时间：2012-05-17T21:31:58.747
> 
> 标签：r, loops, boxplot

在编写循环方面没有太多经验，我希望自动化（使用循环）我经常对所有新数据集执行的操作：创建每个变量的箱线图和直方图，以及计算描述性统计数据，对于后者，我倾向于同时使用描述（Hmisc）和/或统计（归档）。

理想情况下，我想让循环为每个适当的变量生成一个箱线图。我下面的循环只产生一个箱线图并返回错误：

错误：没有要返回的函数，跳转到顶层

我怎么了？另外，如果有人能指出我的参考/网站可以纠正我不足的循环编写方式，我会很乐意提供帮助。

谢谢！克里斯

```
y <- LETTERS[as.integer(rnorm(100, mean=5, sd=1))]
z <- LETTERS[as.integer(rnorm(100, mean=10, sd=1))]
x <- round(rnorm(100, mean=5, sd=2.5),2)
data <- as.data.frame(cbind(x,y,z))

A<- do.call("cbind", lapply(data, class))
B<- as.vector( A[1,])
C <- grep("character|factor", B)

for (i in 1:length(C)) {
  x <- C[i]
  counti <- table(data[,x])
  y <- barplot(counti, main=paste("Barplot for var", x))
  return(y)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:40:37.793

你不能在循环中使用“return”，它在函数中使用。此外，您可能希望在绘图之间暂停：

```
par(ask=T)
for (i in 1:length(C)) {
  x <- C[i]
  counti <- table(data[,x])
  y <- barplot(counti, main=paste("Barplot for var", x))
  y
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T22:24:08.733

你应该忘记的第一件事是`as.data.frame(cbind())`错误。它强制所有列属于同一类，从而破坏了数据框结构的任何好处。

```
sapply(data, class)
       x        y        z 
"factor" "factor" "factor" 
```

`A<- sapply(data, class)`像上面那样使用并获得一个向量而不是那种折磨人的 pass through也会更简单`cbind`。正如其他人提到的那样，它`return`适用于常规函数，但不适用于 for 循环。如果您打算使用 for 循环来执行此操作，则需要有一个结构来收集 barplot 调用的结果，而列表是自然的，因为您不能确定它们的长度都相同。这可能是一条替代路线：

```
y <- LETTERS[as.integer(rnorm(100, mean=5, sd=1))]
z <- LETTERS[as.integer(rnorm(100, mean=10, sd=1))]
x <- round(rnorm(100, mean=5, sd=2.5),2)
data <- data.frame(x=x,y=y,z=z)
CC <- grep("character|factor", sapply(data, class))
y <- list()
 for (i in seq_along(CC) ) {
   x <- CC[i]
   counti <- table(data[,x]) 
   y <- c(y, list(barplot( counti, main=paste("Barplot for var", x))))
   }
 y
#------------    
[[1]]
     [,1]
[1,]  0.7
[2,]  1.9
[3,]  3.1
[4,]  4.3
[5,]  5.5
[6,]  6.7

[[2]]
     [,1]
[1,]  0.7
[2,]  1.9
[3,]  3.1
[4,]  4.3
[5,]  5.5
[6,]  6.7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:44:52.763

我认为 lapply 的东西可能会更好：

```
C <- grep("character|factor", B)

FUN <- function(vec, num){
  if (dev.interactive()) dev.new()
  counti <- table(vec)
  y <- barplot(counti, main=paste("Barplot for var", num))
  return(y)
}

lapply(C, function(i) FUN(data[, i], i)) 
```

# java - 为什么 Java 在构造函数重载的情况下无法识别我的 ArrayList

> ID：10643846
> 
> 赞同：3
> 
> 时间：2012-05-17T21:32:42.393
> 
> 标签：java, collections, constructor

我有两个这样的构造函数设置：

```
public XMessage(Information info, List<Object> results) {
    this.information = info;
    this.results = results;
}

public XMessage(Information info, Object result) {
    this(info, Collections.singletonList(result));
} 
```

我通过传入一个 Information 对象和一个 ArrayList 对象来创建 XMessage 对象。当我检查结果时，它是一个包含 ArrayList 项的单例列表。为什么 Java 不使用更合适的构造函数，我有什么选择来强制它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T21:37:45.330

调用第一个构造函数：

```
new XMessage(information, new ArrayList<Object>()); 
```

调用第二个构造函数：

```
new XMessage(information, new ArrayList<String>()); 
```

`ArrayList<String>()`不被视为`List<Object>`while `ArrayList<Object>`is。考虑使用以下构造函数：

```
public XMessage(Information info, List<? extends Object> results) 
```

正如*@LuiggiMendoza*在下面建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:47:48.047

`List<String>`不是子类（或以其他方式替代） a的原因`List<Object>`是被调用者很可能希望将任何对象添加到列表中，并且`List<String>`应该是类型安全的。

如果您不能简单地使用相同的类型，您可以[在此处](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29#Java)阅读有关您的选项的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T14:38:17.533

我尝试了上面的答案，并认为它们对我有用，但结果却是误报。我选择了这个构造函数，它为我工作：

```
public XMessage(Information info, Object result) {
    this(info, result instanceof List ? (List<Object>) result : Collections.singletonList(result));
} 
```

# ruby-on-rails - Omniauth：使用 OmniAuth.config.full_host 时 env['omniauth.origin'] 不可用

> ID：10643847
> 
> 赞同：2
> 
> 时间：2012-05-17T21:32:46.457
> 
> 标签：ruby-on-rails, devise, omniauth

我有一种情况，我的生产 rails 3.2 应用程序在多个域上运行。我正在设置omniauth 身份验证（版本1.1.0，如果重要，也使用设计2.1.0）以跨这些域工作。不幸的是，许多 oauth 提供商（例如 Facebook）一次只允许与一个域集成，或者要求您指定要使用的每个回调 URL。这对于这个用例是不切实际的，因为域名不断被添加。

我的解决方案是有一个单一的身份验证 URL，这样当用户尝试使用omniauth 登录任何附属网站时，回调 URL 是一个单一的标准 URL（即 auth.example.com）。

我能够让omniauth 集成正常工作，并且我可以允许用户对auth.example.com 域进行身份验证。下一步是将它们连同某种身份验证密钥一起送回它们的来源地。我`env['omniauth.origin']`用来确定用户的原始位置，但由于某种原因，每当我使用`OmniAuth.config.full_host`选项集重新启动 rails 服务器时，此变量都会变为空白。

长话短说：`env['omniauth.origin']`只要我不在`OmniAuth.config.full_host`初始化程序中使用，我就可以在我的回调控制器中正常访问。但是，我不知道如何在没有它的情况下进行跨域身份验证。

编辑：我创建了一个小示例应用程序来演示该问题。您必须在 config/initializers/omniauth.rb 中填写您自己的 Facebook 应用程序凭据。您会注意到，当您使用 facebook 进行身份验证时，参数和来源已正确传递。但是，如果您取消注释 config/initializers.omniauth.rb 中的 full_host 配置选项并重新启动应用程序，您会注意到在通过 Facebook 进行身份验证后，您将被重定向到正确的 URL，但不再传递参数和原始数据通过。

[https://github.com/dangerp/omniauth_origin_example](https://github.com/dangerp/omniauth_origin_example)

# android - 2d 点到 2.5d 点

> ID：10643849
> 
> 赞同：1
> 
> 时间：2012-05-17T21:33:02.443
> 
> 标签：android, math, 2d, matrix-multiplication, 2.5d

我制作了一款游戏，可以让玩家在 2d 空间中四处走动。当前视图是从上方，直接向下看玩家。我想补充的是能够将视图从上方转换为 2.5d 透视图。基本上我想把俯视图变成地平线。可以把它想象成从 Frogger 中的视图转到更具 FPS 风格的视图。

那么如何获取 X 和 Y 坐标并将它们转换为伪 3d 点呢？我已经看过一些关于如何将 2d 点转换为 3d 点的示例，但我不知道如何将其应用于完全 2d 的东西。

有人有任何示例或代码可以帮助我完成此任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:37:11.117

您可以按对象设置项目的高度。诸如“地板的高度为 0；角色的高度为 1”之类的东西。

这是你能得到的最简单的；对于更复杂的高度映射，我认为您别无选择，只能为屏幕上的每个项目提供一个 3D 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:45:13.923

对于 2.5d 投影（也称为[正交投影](http://en.wikipedia.org/wiki/Orthographic_projection)），最简单的方法是为第三维选择 2d 向量，并将其用作权重，将深度添加到宽度和高度：

```
if third-dimension weighting parameters are:  vec2d( a, b ),
then:  vec3d( x, y, z )  -->  vec2d( x + a*z, y + b*z ) 
```

的确切选择`( a, b )`取决于您，但您可能希望从`( 0.5, 0.5 )`. `a`在任何情况下，任何一个或的绝对值都`b`大于是没有意义的`1.0`。

* * *

反过来说，从 2d 到 3d，必然是模棱两可的，具体取决于`z`坐标：

```
a given 2d point:  vec2d( x, y )
can correspond to any 3d point of the form:  vec3d( x - a*z, y - b*z, z ) 
```

如果您的用户单击屏幕上的特定`( x, y )`位置，这可能对应于几个不同对象（在不同`z`深度）上的位置。出于这样的目的，您可能希望在屏幕空间中为任何可以通过这种方式单击的对象维护一个边界框......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:10:53.903

您正在寻找的是从 R^2 到 R^3 的翻译。您应该对空间中的每个点应用一个变换，将其视为一个向量

[矩阵乘法](http://en.wikipedia.org/wiki/Matrix_multiplication)

（我建议将其设为界面）

现在我假设你游戏中的每个对象都有某种 (x,y) 坐标对。您在 R^2 中工作，因此整个空间的基本向量是 e1(0,1) 和 e2 (1,0) 现在您想将其转换为 3d，记住这是线性的，您可以将其缩放为任何缩放器（数字）。

所以这是由

现在为了生成“z”，您必须进行矩阵乘法。

在 r^3 中，e1 将是 (0,1,0) e2 将是 (1,0,0) 而 e3 将是 (0,0,1)

这会将您的视点设置为类似于我上面的答案的地面。

现在检查这个 wolfram 我设置了完全任意的值

[http://www.wolframalpha.com/input/?i=matrix&a= *C.matrix-_Calculator.dflt-* &a=FSelect_**MatricesOperations-.MatrixOperations-&a=*FP.MatricesOperations.matricesop- *matrixmult&f4=%7B% 7B79%2C4%7D%2C%7B8%2C8%7D%7D&f=矩阵*操作.theMatrix1 %7B%7B79%2C4%7D%2C%7B8%2C8%7D%7D&f5=%7B%7B1%2C0%2C5%7D%2C %7B0%2C1%2C5%7D%7D&f=矩阵操作.theMatrix2_%7B%7B1%2C0%2C5%7D%2C%7B0%2C1%2C5%7D%7D](http://www.wolframalpha.com/input/?i=matrix&a=*C.matrix-_*Calculator.dflt-&a=FSelect_**MatricesOperations-.MatrixOperations-&a=*FP.MatricesOperations.matricesop-_matrixmult&f4=%7B%7B79,4%7D,%7B8,8%7D%7D&f=MatricesOperations.theMatrix1_%7B%7B79,4%7D,%7B8,8%7D%7D&f5=%7B%7B1,0,5%7D,%7B0,1,5%7D%7D&f=MatricesOperations.theMatrix2_%7B%7B1,0,5%7D,%7B0,1,5%7D%7D)

矩阵乘法是一种简单的算法（在原始意义上），您可以在网上找到它。

然后可以绘制从该函数作为 3d 矢量返回的一个。

来自维基百科的公式

![抄送维基](../Images/eb53679c14d75208a893e2316fd67558.png)

你做同样的事情，忽略蓝色部分。

对于 x'(100,0)*(1,0,0) y'(0,100) *v(0,1,0)

在谷歌上很容易找到

[谷歌](http://www.mathsisfun.com/algebra/matrix-multiplying.html)

# javascript - 如何使用 jQuery 创建颜色变量？

> ID：10643850
> 
> 赞同：3
> 
> 时间：2012-05-17T21:33:09.197
> 
> 标签：javascript, jquery, css

我不确定这是否可能。但这个概念类似于 SASS 变量，但使用的是 jQuery。所以假设我想为 jQuery 提供可重用的 CSS 属性。例如...

**我想创建一个变量，我可以将它重用于黑色**

```
var black = .css('color','#000');
var white = .css('color','#FFF'); 
```

这显然是行不通的，因为语法是错误的......但是你得到了我希望的图片......所以稍后我可以这样做......

```
$('#myelement').css(black); 
```

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T21:34:41.473

[`css()`](http://api.jquery.com/css/#css2)可以获取表示 CSS 属性的键值对映射。因此，您可以存储和使用具有所需 CSS 属性的键值对。

```
var black = {'color': '#000'};
var white = {'color': '#FFF'};

$('#myelement').css(black); 
```

这些可以包含任意数量的属性。例如：

```
var headingStyle = {'background-color': '#C00', 'color': '#FFF'};
$('h1#heading').css(headingStyle); 
```

您甚至可以基于某种样式创建新样式并为其添加属性：

```
var mainHeadingStyle = $.extend({'font-size': '50px'}, headingStyle);
$('h1#main').css(mainHeadingStyle); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:36:47.310

您可以将对象传递给您的 css() 调用。做这个：

```
var white = {'color' : '#fff'};
var black = {'color' : '#000'};
$('#myElement').css(white); 
$('#otherElement').css(black); 
```

# html - IE 边框/框架出现在链接图像上

> ID：10643852
> 
> 赞同：1
> 
> 时间：2012-05-17T21:33:18.837
> 
> 标签：html, css, internet-explorer, hyperlink, border

我正在寻找这个小问题。我发现除了边界：0；这根本没有做任何事情......

我正在使用 css reset 并且在除 IE 之外的每个浏览器中一切正常。我没有任何较旧的 IE，所以这个问题出现在 IE 9 中...

当我有一个链接到某个地方的图像时......

例子：

```
<a id="deviantart" href="http://deviantart.com" target="_blank"></a>

    #deviantart {
    background: url("../img/socials-sprite.png") 0 21px;
    width: 21px;
    height: 21px;
    position: absolute;
    } 
```

当我点击它时，会出现一种边框......预览：[http ://snpr.cm/uJl3Q4.png](http://snpr.cm/uJl3Q4.png)

不知道为什么会出现那个东西，有什么解决方案可以解决吗？当我看到其他浏览器中的某些内容无法正常工作时，我感到很紧张......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:36:05.543

尝试将`outline`属性设置为`none`.

```
#deviantart {
  outline: none;
} 
```

# joomla1.5 - 在组件中嵌入 Joomla 模块

> ID：10643859
> 
> 赞同：0
> 
> 时间：2012-05-17T21:34:02.040
> 
> 标签：joomla1.5, joomla-component, joomla-module

我在我的网站上创建了一个“面包屑”模块的实例，设置为显示在“自定义位置”。有一个组件有一系列用 HTML 编写的网页。如何在这些网页中指定 customposition 的位置，以便 joomla 在我的组件中显示模块？

问候， 阿比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T15:18:41.623

找到了！JModuleHelper 来救援 :)

[http://www.minitek.gr/tutorials/joomla-16-tutorials/joomla-api-tutorials/item/203-how-to-insert-a-module-position-inside-a-joomla-component.html](http://www.minitek.gr/tutorials/joomla-16-tutorials/joomla-api-tutorials/item/203-how-to-insert-a-module-position-inside-a-joomla-component.html)

这是链接中的代码：

```
$modules =& JModuleHelper::getModules('position_name');
foreach ($modules as $module){
echo JModuleHelper::renderModule($module);
} 
```

# android - 如果我使用短标签，为什么 Unmarshalling Instance State Parcel 会失败？

> ID：10643863
> 
> 赞同：0
> 
> 时间：2012-05-17T21:34:15.187
> 
> 标签：android, android-activity, state, android-lifecycle

我在拆包包裹时遇到了一次奇怪的崩溃，`onCreate`并且对我修复它的方式更加困惑。

我的应用程序保存这样的`TrackEntity`对象：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putParcelable(STATE_TRACK, mTrack);
} 
```

并相应地加载它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null) {
        mTrack = savedInstanceState.getParcelable(STATE_TRACK);
    }
} 
```

`STATE_TRACK`定义为`TRACK`。

虽然此代码适用于屏幕旋转更改，但当活动在后台被销毁时它会崩溃（我使用 Android 开发工具强制执行此操作）并稍后重新启动。错误如下所示：

```
05-17 21:17:08.366: E/AndroidRuntime(3852): Caused by: java.lang.RuntimeException: Parcel android.os.Parcel@4129f0d0: Unmarshalling unknown type code 7012471 at offset 3964
05-17 21:17:08.366: E/AndroidRuntime(3852):     at android.os.Parcel.readValue(Parcel.java:1921)
05-17 21:17:08.366: E/AndroidRuntime(3852):     at android.os.Parcel.readMapInternal(Parcel.java:2093)
05-17 21:17:08.366: E/AndroidRuntime(3852):     at android.os.Bundle.unparcel(Bundle.java:223)
05-17 21:17:08.366: E/AndroidRuntime(3852):     at android.os.Bundle.getParcelable(Bundle.java:1158)
05-17 21:17:08.366: E/AndroidRuntime(3852):     at android.app.Activity.onCreate(Activity.java:860)
05-17 21:17:08.366: E/AndroidRuntime(3852):     at myapp.ui.Activity.onCreate(Activity.java:xx) 
```

我似乎修复它的方式是将`STATE_TRACK`from的值更改`TRACK`为`appname:TRACK`。

我在官方文档中找不到关于实例状态包标签命名的任何注释。有人可以向我解释那里发生了什么吗？

# c++ - 实用的 r 值参考

> ID：10643864
> 
> 赞同：1
> 
> 时间：2012-05-17T21:34:34.157
> 
> 标签：c++, c++11, rvalue-reference, move-semantics

我想我可以试试移动语义。[因此，我捕捉到了 Scott Meyers 谈论移动语义](http://skillsmatter.com/podcast/home/move-semanticsperfect-forwarding-and-rvalue-references)的非常粗糙/低分辨率的视频，尽管所述视频中的代码不可读。

所以我写了一个包装字符串向量的丢弃类。

```
class ShoppingList
{
private:
    vector<string> m_vsList;
public:
    ...
}; 
```

我想知道是否可以使用移动语义将字符串的临时向量移动到成员变量 m_vsList 中？

为此，我可能会编写一个移动函数，例如：

```
void MoveList( vector<string> && r )
{
    m_vsList = std::move(r);
} 
```

我应该声明我正在 VS2011 beta 编译器上尝试这个。

**问题**

这是正确的/可能的吗？如果是这样，我该如何指定一个临时的`vector<string>`？

例如`MoveList( {string("c"), string("b"), string("a")} )`无效。

我应该限制移动语义来移动构造函数和/或移动赋值重载吗？

如果我 std::move 进入 m_vsList 并且 m_vsList 已经包含数据，那么该数据会发生什么，它会泄漏吗？那么我应该在移动之前明确清除该向量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:43:17.083

是的，这是正确和可能的。请参阅启用右值的版本`std::map::operator[] (Key&& key)`。

如果你想创建一个临时的测试，一旦你的编译器完全支持初始化列表，上面列出的应该可以工作。现在，您可以创建一个返回 a 的函数`std::vector<std::string>`或简单地创建一个非临时向量并使用`std::move`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:46:12.503

如果您的编译器不支持初始化列表，您可以使用以下命令创建空右值向量：

```
MoveList(vector<string>()); 
```

或非空右值：

```
vector<string>  lv_vec; 
lv_vec = ...
MoveList(vector<string>(lv_vec)); 
```

# asp.net-mvc - Telerik MVC 插入命令未触发控制器

> ID：10643869
> 
> 赞同：0
> 
> 时间：2012-05-17T21:35:19.900
> 
> 标签：asp.net-mvc, gridview, insert, telerik

我希望有人能够帮助我找出问题所在。我无法让我的插入命令触发控制器，也无法弄清楚为什么它不会。这是我的代码：

```
 @(Html.Telerik().Splitter().Name("AnswerOptionSplitter")
        .Orientation(SplitterOrientation.Horizontal)
        .Panes(panes =>
        {
            panes.Add()
                .Size("28px")
                .Resizable(false)
                .Content(@<text>
                <div class="entity-tools-vertical">
                    <button id="editAnswerOption" title="Edit" class="entity-action"><img alt="Edit" height="24" src="@Url.Content("~/Content/Common/Images/Icons/edit-disabled.png")" width="24" /></button>
                    <button id="moveUpAnswerOption" title="Move Up" class="entity-action"><img alt="Move Up" height="24" src="@Url.Content("~/Content/Common/Images/Icons/up-disabled.png")" width="24" /></button>
                    <button id="moveDownAnswerOption" title="Move Down" class="entity-action"><img alt="Move Down" height="24" src="@Url.Content("~/Content/Common/Images/Icons/down-disabled.png")" width="24" /></button>
                    <button id="toggleEnableAnswerOption" title="Enabled" class="entity-action"><img alt="Enabled" height="24" src="@Url.Content("~/Content/Common/Images/Icons/accept-disabled.png")" width="24" /></button>
                    <button id="deleteAnswerOption" title="Delete" class="entity-action"><img alt="Delete" height="24" src="@Url.Content("~/Content/Common/Images/Icons/recycle-disabled.png")" width="24" /></button>
                </div>
                </text>);
            panes.Add()
                .Resizable(false)
                .Content(
                    @Html.Telerik().Grid<AnswerOptionViewModel>()
                        .Name("AnswerOptions")
                        .DataKeys(k => k.Add(o => o.ID))
                        .ToolBar(commands => commands.Insert().ButtonType(GridButtonType.ImageAndText))
                        .DataBinding(dataBinding => dataBinding.Ajax()
                            .OperationMode(GridOperationMode.Client)
                            .Select("_AnswerOptionsAjax", "Attribute", new { id = Model.ID })
                            .Update("_AnswerOptionsUpdateAjax", "Attribute", new { attributeId = Model.ID })
                            .Delete("_AnswerOptionsDeleteAjax", "Attribute", new { id = Model.ID })  
                            .Insert("_AnswerOptionsCreateAjax", "Attribute", new { id = Model.ID })    
                        )
                        .Columns(columns =>
                        {
                            columns.Bound(m => m.AnswerAbbr).Title("");
                            columns.Bound(m => m.AnswerText).Title("");
                            columns.Bound(m => m.AnswerValue).Title("").Width(32);
                            columns.Bound(m => m.RelatedImageId).Title("")
                                .ClientTemplate("<img alt='<#= AnswerText #>' class='answer-option-icon' src='"
                                    + Url.Action("AttributeAnswerOption", "ImageGenerator", new { id = Model.ID, index = 0 })
                                    + "' />").Width(32);
                            columns.Bound(m => m.RelatedImage).Hidden(); 
                            columns.Bound(m => m.Ordinal).Hidden().HtmlAttributes(new { style = "display: none;" });
                        })
                        .ClientEvents(c => c
                            .OnRowSelect("AnswerOptions_onRowSelect")
                            .OnDataBound("AnswerOptions_onDataBound")
                            .OnComplete("AnswerOptions_onComplete")
                        )
                        .HtmlAttributes(new { @class = "t-widget t-grid grid-no-header grid-no-footer" })
                        .Selectable()
                        .Editable(e => e.Mode(GridEditMode.PopUp))
                        .ToHtmlString()
                );
        })
    )

    [Key]
    [ReadOnly(true)]
    [ScaffoldColumn(false)]
    [DisplayName("Id")]
    public int ID { get; set; }

    [DisplayName("Code")]
    [StringLength(10)]
    public string AnswerAbbr { get; set; }

    [Required(AllowEmptyStrings = false)]
    [DisplayName("Value")]
    [StringLength(200)]
    public string AnswerText { get; set; }

    public int? AnswerValue { get; set; }

    [DisplayName("ImageType")]
    public LookupViewModel ImageType { get; set; }
    public string ImageTypeValue
    {
        get { return (ImageType == null) ? "" : ImageType.ColumnValue; }
        set
        {
            if (String.IsNullOrEmpty(value) == false)
            {
                var lookup = LookupViewModel.GetLookup("AnswerOption", "ImageType", value) ??
                             LookupViewModel.GetLookup("AnswerOption", "ImageType", "image/bmp");

                ImageType = lookup;
            }
            else
                ImageType = null;
        }
    }

    //[ScriptIgnore]
    public byte[] RelatedImage { get; set; }

    [DisplayName("Image")]
    public string RelatedImageId
    {
        get { return ID.ToString(); }
    }

    [Required]
    public Int16 Ordinal { get; set; }

    [Required]
    public bool Enabled { get; set; }

    public void ToggleEnabled()
    {
        Enabled = !Enabled;
    }

    //[Required]
    //public AttributeViewModel Attribute { get; private set; }

    public static AnswerOptionViewModel CreateAttributeValue()
    {
        var answerOption = new AnswerOptionViewModel();

    [GridAction]
    public ActionResult _AnswerOptionsCreateAjax(AnswerOptionViewModel model)
    {
        var answerOption = AnswerOptionViewModel.CreateAttributeValue();
        var newId = (Attribute.AnswerOptions.Count > 0) ? Attribute.AnswerOptions.Min(ao => ao.ID) - 1 : -1;
        if (newId > 0)
            newId = -1;

        answerOption.ID = newId;
        answerOption.AnswerText = "[blank]";

        if(TryUpdateModel(answerOption))
        Attribute.AnswerOptions.Add(answerOption);

        return View(new GridModel(Attribute.AnswerOptions));

    } 
```

请帮我弄清楚发生了什么，我是 MVC 的新手。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T04:45:50.023

您无法通过插入、更新、删除传递参数。您只能通过选择。

如果你想通过插入、更新、删除来传递参数，那么你必须编写网格 onsubmitchanges 事件，如下所示：

```
function onSubmit(e) {
        e.values.myVal = "Rahul";
    } 
```

在上面的代码中，myVal 是我想要在控制器中的变量。有了这个，您将能够获取控制器中的值。

# iphone - iphone：如何将音频从一部 iPhone 流式传输到另一部

> ID：10643873
> 
> 赞同：0
> 
> 时间：2012-05-17T21:35:37.620
> 
> 标签：iphone, ios, xcode

我正在寻找从 iphone 流式传输音频，并让它在另一个 iphone 上播放。是否有任何好的库可以轻松地促进这个过程？我正在研究音频文件流服务，但我不确定这是否是最好的方法并且找不到任何示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:57:55.767

这尚不可用，但看起来像您正在寻找的东西。 [http://audiob.us/](http://audiob.us/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T22:53:16.847

您尝试做的事情并不容易，而且您不会找到任何可以使其成为简单任务的库。

基本上，要连接到另一台设备，您需要使用[GameKit](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008304-CH1-SW1)。查看[点对点连接](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/GameKitConcepts/GameKitConcepts.html#//apple_ref/doc/uid/TP40008304-CH100-SW1)部分。要了解会话 b/w 连接的设备，您应该参考[使用会话](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/WorkingwithSessions/WorkingwithSessions.html#//apple_ref/doc/uid/TP40008304-CH101-SW1)部分。

# c# - 一般比较对象的属性，需要一点递归来启动

> ID：10643878
> 
> 赞同：3
> 
> 时间：2012-05-17T21:36:00.823
> 
> 标签：c#, generics, reflection, recursion

我有几个复杂的对象，我想比较它们的属性。下面的代码做得很好，直到你得到一个集合。我想用集合的每个成员递归调用该函数。有人可以看一下并帮助我确定集合中对象的类型，以便我可以再次调用 HasPropertyChanged 吗？

这个伪代码显示了我的意图

```
 if (p.GetType() == typeof(System.Collections.Generic.List<>))
       {
            foreach (var blah in //the list)
            {
                HasPropertyChanged<//TheType>(Type obj1, Type obj2, null);
            }
        } 
```

此外，这部分代码也让我感到困惑。如果我不调用 tostring 方法，我会得到一些奇怪的结果，比如 id 63633 not equaling 63633

```
 object val1 = Original.GetType().GetProperty(p.Name).GetValue(Original, null);
        object val2 = Modified.GetType().GetProperty(p.Name).GetValue(Modified, null);
        if (!IgnoreProperties.Contains(p.Name) && 
            val1 != null && val2 != null && 
            val1.ToString() != val2.ToString())
        {
            return true;
        } 
```

这里是它的全部。

```
private bool HasPropertyChanged<T>(T Original, T Modified, string[] IgnoreProperties)
    {
        if (Original == null || Modified == null)
            return false;
        if (IgnoreProperties == null)
            IgnoreProperties = new string[] { };

        IEnumerable<PropertyInfo> properties = typeof(T).GetProperties();

        foreach (var p in properties)
        {
            if (p.GetType() == typeof(System.Collections.Generic.List<>))
            {
                foreach (var blah in //the list)
                {
                    HasPropertyChanged<//TheType>(Type obj1, Type obj2, null);
                }
            }
            object val1 = Original.GetType().GetProperty(p.Name).GetValue(Original, null);
            object val2 = Modified.GetType().GetProperty(p.Name).GetValue(Modified, null);
            if (!IgnoreProperties.Contains(p.Name) && 
                val1 != null && val2 != null && 
                val1.ToString() != val2.ToString())
            {
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:49:18.157

由于您在运行时处理类型，因此您应该有一个带有`Type`参数的函数的非泛型版本：

```
private bool HasPropertyChanged<T>(T Original, T Modified, string[] IgnoreProperties)
{
    return HasPropertyChanged(typeof(T), Original, Modified, IgnoreProperties);
}

private bool HasPropertyChanged(Type T, object Original, object Modified, string[] IgnoreProperties)
{
    // ...
} 
```

这样，您可以调用列表元素的方法：

```
if (p.PropertyType.IsGenericType && p.PropertyType.GetGenericTypeDefinition() == typeof(System.Collections.Generic.List<>))
{
    object val1 = p.GetValue(Original, null);
    object val2 = p.GetValue(Modified, null);

    // First check count...
    PropertyInfo countProperty = p.PropertyType.GetProperty("Count");
    int count1 = countProperty.GetValue(val1, null);
    int count2 = countProperty.GetValue(val2, null);
    if (count1 != count2) return true;

    // Now iterate:
    var enumerator1 = (val1 as System.Collections.IEnumerable).GetEnumerator();
    var enumerator2 = (val2 as System.Collections.IEnumerable).GetEnumerator();
    while (enumerator1.MoveNext())
    {
        enumerator2.MoveNext();
        // check for null, skipping here...
        object elem1 = enumerator1.Current;
        object elem2 = enumerator2.Current;
        if (HasPropertyChanged(elem1.GetType(), elem1, elem2, IgnoreProperties)) return true;
    }
}
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:55:38.350

首先，您需要小心使用 == 而不是 Equals()。您正在将所有属性值提取为对象；

```
object val1 = Original.GetType().GetProperty(p.Name).GetValue(Original, null);
object val2 = Modified.GetType().GetProperty(p.Name).GetValue(Modified, null); 
```

然后使用相等运算符来比较它们。对于引用类型，此运算符仅在它们是同一个实例时才返回 true，在这种情况下，它们永远不会是 - 因为 val1 和 val2 是 2 个不同的对象。您可以删除 .ToString() 调用并替换为；

```
if (val1.Equals(val2) { ... } 
```

对于您正在尝试做的事情（我假设），这是一种更正确的方法。

现在是收藏问题——为什么不试试呢？

```
if (p is IEnumerable)
{
    foreach (object o in p)
    {
        if (!o.HasPropertyChanged(...))
            return false;
    }
} 
```

我认为您不需要使用泛型来实现这一点。我能看到的泛型类型的唯一目的是确保传入的类型是相同的。因此，只需删除它，将 T 更改为 'Type' 或 'object' 并在函数的第一行对 type 进行比较；

```
if (Original.GetType() != Modified.GetType())
    return false; 
```

# php - 谷歌地图商店定位器

> ID：10643880
> 
> 赞同：2
> 
> 时间：2012-05-17T21:36:08.273
> 
> 标签：php, mysql, google-maps

嗨，我正在通过谷歌上的创建商店定位器教程，可以在这里找到。

[https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)

我的代码是

```
 // Select all the rows in the markers table
$query = sprintf("SELECT address, name, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
  mysql_real_escape_string("37.414832"),
  mysql_real_escape_string("-122.024857"),
  mysql_real_escape_string("37.414832"),
  mysql_real_escape_string("10"));

$result = mysql_query($sql);

if (!$result) 
{
  die('Invalid query: ' . mysql_error());
}
else
{
    echo 'success';
}

// Start XML file, echo parent node
echo "<markers>\n";
// Iterate through the rows, printing XML nodes for each
while ($row = @mysql_fetch_assoc($result)){
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);
  $newnode->setAttribute("name", $row['name']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("distance", $row['distance']);
}

// End XML file
echo "</markers>\n";
echo $dom->saveXML(); 
```

但是，当我运行脚本时，我收到错误消息

> 此页面包含以下错误：
> 第 1 行第 1 列的错误：文档为空
> 下面是页面的呈现直到第一个错误。

有人能看出我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:58:38.317

您尝试为其创建元素的`$dom`对象在“while”循环之前不存在。首先创建该 DOMDocument 对象并将根节点包含`<markers>`在该对象中。

# apache - 如何在安装了 webroot 的 apache 中更改上传文件的默认权限？

> ID：10643882
> 
> 赞同：0
> 
> 时间：2012-05-17T21:36:18.947
> 
> 标签：apache, file-permissions

我有一个带有 apache 2.2.20、php 5.3.6 和 Joomla cms 安装的 ubuntu 服务器 11.10。我使用了一个额外的硬盘作为我的网络服务器存储并将它安装到 /data/www/ （我希望这不是我的问题！）。

我已将 Web 根目录中所有文件和文件夹的权限设置为 755，并将它们的用户组设置为 [默认 ubuntu 用户（在我的情况下为收音机）]：www-data。

在过去的几天里，我遇到了严重的问题，joomla 没有显示新上传的图像和其他文件，而且我也无法安装任何扩展。经过数小时的搜索，我发现上传的文件没有适当的权限（它们是 -rw-------），并且 Joomla 应用程序在上传后无法读取、复制或移动它们。

我想知道如何设置默认权限，以便我上传的所有文件都使用它？

***PS：**我已经测试过 umask 但它什么也没做。我认为这与我的问题无关。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T02:41:31.560

我实际上有同样的问题。我正在使用 plesk 共享主机。我已经进行了大约 20 个小时的研究，并提出了一些关于需要做什么的答案。首先，由 apache 处理的任何内容都会自动提供给 apache 用户组。这很好......问题是apache将php作为一个模块处理，因此一旦使用php通过apache执行操作就无法更改。最适合我的修复是更改 php 和 apache 以使用快速 cgi 执行，然后在上传后更改 apache 分配的默认权限。

您可以采取的第二条路线是 chown 一切，然后使用 ftp 进行安装。我在使用这种方法时遇到的主要问题是，因为 joomla 在通过 php 执行命令时使用 apache ......是使用 ftp 作为安装程序添加的任何新文件都会通过它有效地授予权限，不允许 apahe/php 进行任何更改除非文件被授予 777 权限，这是一个安全问题。

它有点像这样......作为一个例子。您通过 ftp 安装组件。因为 ftp 用户名现在被指定为所有者。Apache 不被视为用户组或所有者的一部分。因此，如果您想使用 joomla 进行更改...必须为其分配 777 权限。我发现了这一点，因为我想我会把所有的东西都放到我的 ftp 上，当我回到 joomla 并进入系统信息时......它说现在一切都不可写了。

希望这对您有所帮助……您只需环顾四周，看看什么最有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T10:20:31.673

感谢您的回答。
经过数小时的研究和尝试，我设法通过禁用 FTP（我使用过 vsftpd）并将 umask 添加到 apache 配置而不是 php 文件来解决我的问题。现在一切正常，所有 chmod 都正常（755）。

*顺便说一句：我不知道为什么它以最低访问权限上传文件。*

# css - 为什么我的打印样式没有在 IE 7 和 IE 8 中呈现？

> ID：10643883
> 
> 赞同：8
> 
> 时间：2012-05-17T21:36:37.853
> 
> 标签：css, internet-explorer, internet-explorer-8, print-style

我有一个包含 2 个样式表的网页：

```
<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="all" />
<link rel="stylesheet" href="/assets/css/print.css" type="text/css" media="print" /> 
```

打印样式适用于 chrome、safari、firefox 和 IE9，但在 IE7 和 IE8 中完全中断。某些应该隐藏的图像不是，其他应该可见的图像不是。它看起来像一团糟，尽管如果我在 IE7 和 IE8 中为屏幕加载两个样式表，一切看起来都完全符合我的预期。

不幸的是，我无法链接到该页面，因为它是一个正在进行中的客户站点，但如果有人有任何想法，我会在这里抓住稻草。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-21T15:30:49.580

事实证明，问题在于 HTML5 元素在打印时没有正确呈现，并且 HTML5 shiv 默认不支持打印。

对我（和你）来说幸运的是，这里有一个由 Alexander Farkas 制作的 IE 打印保护插件：[https ://github.com/aFarkas/html5shiv](https://github.com/aFarkas/html5shiv)

编辑：

如果您使用 Modernizr 来满足您所有的 shiv-ing（完全是一个词）需求，看起来 Modernizr 现在有一个打印 shiv 选项：http: [//modernizr.com/download/](http://modernizr.com/download/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:40:04.533

我认为您需要将打印样式表示为备用...

```
<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="all" />
<link rel="alternate stylesheet" href="/assets/css/print.css" type="text/css" media="print" /> 
```

实际上，我认为这是错误的，但我要离开它。

您可以尝试将打印样式的媒体属性更改为全部，然后在打印媒体查询中将所有内容包装在样式表中：

```
@media print { … } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T22:27:48.233

这真的是在没有看到你的 CSS 和标记的情况下在黑暗中拍摄，或者至少是其中的一部分！

[与此 msdn 文章](http://msdn.microsoft.com/en-us/library/ms533005%28v=vs.85%29)`position:absolute`的评论中所述或`fixed`所指出的打印元素存在问题；暗示您应该手动重排它们（设置或可能完全隐藏元素）。处理它的一个核心方法是添加`position:static`

```
* {position:static !important;} 
```

给你的`print.css`；但它的适当性取决于页面的复杂性以及您希望它如何打印（即仅文本、标题和徽标或适当设计的体验）。

如果您还没有决定要产生的打印体验，请考虑阅读另[一篇关于 alistpart 的精彩文章，](http://www.alistapart.com/articles/goingtoprint/)重点关注这一点！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T02:45:11.863

仅供参考，我在 IE9 和“替代”中遇到了这个问题，即

```
<link rel="alternate stylesheet" href="......." type="text/css" media="print" /> 
```

在 IE9 中为我工作！

# c++ - c++ boost MPI & threading - 序列化错误：地址未映射

> ID：10643886
> 
> 赞同：1
> 
> 时间：2012-05-17T21:36:50.677
> 
> 标签：c++, serialization, boost, mpi, boost-mpi

我难住了。 `all_gather`适用于原语（例如`int`），但即使对于简单的 STL 容器也失败了。valgrind 声称容器未分配/初始化，但这似乎不对。

总之：

*   我用openMP做一些多线程，然后重新加入线程。
*   在串行中，我尝试`all_gather`简单地`std::map`使用`boost::mpi::all_gather。MPI 等级*不是*线程。（有 2 个 MPI rank，每个 MPI rank 有 4 个线程）。
*   然后我打算做更多（孤立的）多线程。

看起来很简单......这里可能发生了什么？

主文件

```
#include <openmpi/mpi.h>
#include <omp.h>
#include <boost/mpi.hpp>    
#include "globals.h"

int main(int argc, char* argv[])
{        

    int provided_MPI;
    MPI_Init_thread(&argc, &argv, MPI_THREAD_MULTIPLE, &provided_MPI );

    boost::mpi::environment my_boost_mpi_env(argc, argv);
    boost::mpi::communicator world_MPI_boost;        
    world_MPI_boost_ptr = &world_MPI_boost;
        // ^^^ global variable of type   boost::mpi::communicator *

    perform_complete_variable_elimination_schedule();
    //...

} 
```

Conn_Comp.cpp

```
#include <boost/mpi.hpp>    
#include <boost/mpi/collectives.hpp>
#include <boost/serialization/serialization.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/serialization/map.hpp>

#include "globals.h"

...

void perform_complete_variable_elimination_schedule()
{

    // isolated work in parallel using OpenMP
    #pragma omp parallel
    { 
    //work
    }    

    // SERIAL REGION (with respect to threading).

    std::map<uint,uint> my_map;
    std::vector< std::map<uint,uint> >   vec_of_my_maps;

    boost::mpi::all_gather<    std::map<uint,uint>    >
                     (*world_MPI_boost_ptr,
                      my_map,
                      vec_of_my_maps);  //  <--- line 293 (referenced by valgrind)

    // more isolated work in parallel using OpenMP
    #pragma omp parallel
    { 
    //work
    }

} 
```

valgrind 抱怨`vector`of`map` 导致读取无效。但是这`vector`是在调用之前立即创建的`all_gather`- 所以它显然是在范围内而不是在并行线程区域中。选定的 valgrind 错误输出：

```
==12665== Use of uninitialised value of size 4
==12665==    at 0x41C8D7A: boost::archive::detail::basic_iarchive::get_library_version() const (basic_iarchive.cpp:575)
==12665==    by 0x41C92C6: boost::archive::detail::basic_iarchive::load_object(void*, boost::archive::detail::basic_iserializer const&) (basic_iarchive.cpp:399)
==12665==    by 0x80F5696: void boost::mpi::all_gather<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > >(boost::mpi::communicator const&, std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > const&, std::vector<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > >, std::allocator<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > >&) (iserializer.hpp:387)
==12665==    by 0x80DEC83: Conn_Comp::perform_complete_variable_elimination_schedule() (Conn_Comp.cpp:**293**)
==12665==    by 0x80C840A: main (main.cpp:695)
==12665== 
==12665== Invalid read of size 2
==12665==    at 0x41C8D7A: boost::archive::detail::basic_iarchive::get_library_version() const (basic_iarchive.cpp:575)
==12665==    by 0x41C92C6: boost::archive::detail::basic_iarchive::load_object(void*, boost::archive::detail::basic_iserializer const&) (basic_iarchive.cpp:399)
==12665==    by 0x80F5696: void boost::mpi::all_gather<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > >(boost::mpi::communicator const&, std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > const&, std::vector<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > >, std::allocator<std::map<unsigned int, unsigned int, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, unsigned int> > > > >&) (iserializer.hpp:387)
==12665==    by 0x80DEC83: Conn_Comp::perform_complete_variable_elimination_schedule() (main.cpp:**293**)
==12665==    by 0x80C840A: main (main.cpp:695)
==12665==  Address 0x3580bece is not stack'd, malloc'd or (recently) free'd
==12665== 
[drosphila:12665] *** Process received signal ***
[drosphila:12665] Signal: Segmentation fault (11)
[drosphila:12665] Signal code: Address not mapped (1)
[drosphila:12665] Failing at address: 0x3580bece
[drosphila:12665] [ 0] /lib/i686/cmov/libpthread.so.0(+0xe500) [0x44f8500]
[drosphila:12665] [ 1] /usr/lib/libboost_serialization.so.1.42.0(_ZN5boost7archive6detail14basic_iarchive11load_objectEPvRKNS1_17basic_iserializerE+0x1b7) [0x41c92c7]
[drosphila:12665] [ 2] ./detect_NAHR(_ZN5boost3mpi10all_gatherISt3mapIjjSt4lessIjESaISt4pairIKjjEEEEEvRKNS0_12communicatorERKT_RSt6vectorISD_SaISD_EE+0x587) [0x80f5697]
[drosphila:12665] [ 3] ./detect_NAHR(_ZN9Conn_Comp46perform_complete_variable_elimination_scheduleEv+0x534) [0x80dec84]
[drosphila:12665] [ 4] ./detect_NAHR(main+0xf5b) [0x80c840b]
[drosphila:12665] [ 5] /lib/i686/cmov/libc.so.6(__libc_start_main+0xe6) [0x4519ca6]
[drosphila:12665] [ 6] ./detect_NAHR() [0x80c73e1]
[drosphila:12665] *** End of error message *** 
```

我根据*boost* [help page](http://lists.boost.org/boost-users/2010/12/64752.php)的推荐使用 MPI_Init_thread 。

正如我在顶部所说，如果我使用原始（即只是`uint`）而不是地图，那么`all_gather`工作正常。为什么地图会失败？ `boost serialize`已经有序列化 STL 容器的方法，所以这不是问题......

另请注意，将保存所有值的向量会自动调整大小`all_gather`（我检查了实现`all_gather`）以容纳所有内容。无论如何，即使我自己初始化它，它仍然失败。

最后，即使我使用一个普通的旧数组（正确分配），例如`std::map<uint,uint> *`，我也会遇到同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:54:20.000

嗯，这很尴尬。如果其他人有同样的奇怪错误，我会留下这个问题。

我的代码的问题实际上出在 makefile 中。我忘了链接到 MPI 的 boost 库。

不正确的生成文件标志：

```
-I$(BOOST_INCLUDE)     -lboost_serialization   -lboost_mpi 
```

显然，该行包含的信息足以让程序编译和运行，但会导致运行时错误。

正确的 makefile 标志：

```
-L$(BOOST_LIB) -ldl -Wl,-rpath,$(BOOST_LIB) -lboost_serialization -lboost_mpi 
```

（注意添加了库链接标志）。

# java - 安卓日期转换

> ID：10643888
> 
> 赞同：1
> 
> 时间：2012-05-17T21:36:58.460
> 
> 标签：java, android, date, time

我收到了一些日期格式，一个 ISO-something，并且想知道将它解析为时间戳的适当方法。

我的最终目标将是一个标准开关，以创建“X 分钟/小时/天前。”，所以如果有一个工具已经可以做到这一点，那将是最佳的。

我试过joda-time，但它卡住了。

以下是时间字符串的示例：

`2012-05-03 @ 15.55.05.433Z`

此外，如果确实是它不是 ISO 格式的情况，那么我在处理它时没有问题，比如说，`@`它的输出等等。

**编辑：**尝试1：

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd HH:mm:ss.SSSZ" );

try
{
  Date myDate = dateFormat.parse( o.getCreationDate().replace( "@", "" ) );

  long minutes = myDate.getTime() / 1000 / 60;

  holder.timeText.setText( minutes + " minutes ago" );
}
catch( ParseException e )
{
  e.printStackTrace();
} 
```

结果：

`05-17 16:58:05.003: W/System.err(2915): java.text.ParseException: Unparseable date: "2012-05-09 19:49:47.987Z" (at offset 24)`

**编辑 2：**剥离 Z，并修正毫秒到分钟的转换：

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd HH:mm:ss.SSS" );

try
{
  Date myDate = dateFormat.parse( o.getCreationDate().replace( "@ ", "" ).replace( "Z", "" ) );

  Date now = new Date();

  long minutes = ( now.getTime() - myDate.getTime() ) / 1000 / 60;

  holder.timeText.setText( minutes + " minutes ago" );
}
catch( ParseException e )
{
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:41:35.950

使用简单日期格式。看看[这里](http://www.roseindia.net/java/java-conversion/StringToDate.shtml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T21:45:52.370

首先删除`@`字符，然后创建一个实例，`SimpleDateFormat`该实例将解析您的字符串并返回一个`Date`对象，该对象将使您能够获得所需的时间戳。

```
String myStringDate = "2012-05-03 @ 15.55.05.433Z";
       myStringDate = myStringDate.replace("@ ","");   //Also removes extra whitespace  

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSZ");
Date myDate = dateFormat.parse("your date string");
     myDate.getTime(); //Your timestamp in milliseconds 
```

**请注意**，您需要使用 try 和 catch 包围，因为它会引发异常。

# django - 动态上传字段参数

> ID：10643889
> 
> 赞同：0
> 
> 时间：2012-05-17T21:36:59.070
> 
> 标签：django, django-models

如果我有跟踪客户艺术的基本模型：

```
class ArtEntry(models.Model):
    client = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    job_number = models.CharField(max_length=30, unique=False, blank=False, null=False)
    filename = models.CharField(max_length=64, unique=False, blank=False, null=False)
    descriptor = models.CharField(max_length=64, unique=False, blank=True, null=True)
    date = models.DateField(("Date"), default=datetime.date.today)
    post_type = models.CharField(max_length=64, choices=POST_CHOICES) 
```

该模型的最后一个字段是文件上传字段：

```
 upload = models.FileField(upload_to='documents/*/**/***') 
```

是否可以动态填充“upload_to”参数，以便 * = 输入“客户端”数据和 ** = 输入“作业编号”和*** = 'post_type' 选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:44:07.210

当然。只需检查文档[`upload_to`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)：

> 这也可能是一个可调用的，例如一个函数，将被调用以获取上传路径，包括文件名。

检查[此答案](https://stackoverflow.com/a/1190866/630877)以查看您可以轻松适应您的问题的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:46:57.873

一个例子；

```
def image_path(self, uploaded_file_name):
    prefix = 'documents/'
    extension = os.path.splitext(uploaded_file_name)[-1]
    if self.pk != None:
        return prefix + str(self.pk) + extension
    else:
        tmp_name = str(uuid.uuid4())
        self.temp_image = prefix + tmp_name + extension
        return self.temp_image

image_upload = models.ImageField(upload_to=image_path, null=True, blank=True) 
```

您应该使用 python 函数。

# javascript - 如果我不使用 Facebook JavaScript SDK 的功能，我应该包含它吗？

> ID：10643890
> 
> 赞同：2
> 
> 时间：2012-05-17T21:37:01.813
> 
> 标签：javascript, facebook-javascript-sdk, facebook-page

我已经构建了几个非常基本的应用程序，用作我的 Facebook 页面上的自定义选项卡。这些选项卡包含的所有内容都是一些超链接图像。

如果我实际上没有使用 Facebook JavaScript SDK 的任何功能，我是否有任何理由加载它？

最初我打算这样做只是为了将应用程序的 ID 与网页相关联，但我发现如果我省略了我粘贴在下面的标准代码片段，一切似乎都可以正常工作。

如果被告知，我应该有什么理由将其排除在外？

亚当

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'XXXXXXXXXX', // App ID
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true,  // parse XFBML
      oauth      : true,
    });

    // Additional initialization code here
    // FB.Canvas.setSize();
  };

  // Load the SDK Asynchronously
  (function(d){
      var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
      js = d.createElement('script'); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/en_US/all.js";
      d.getElementsByTagName('head')[0].appendChild(js);
  }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:03:25.467

不，如果您不使用它，则不需要加载它。JavaScript SDK 允许对 Facebook API 进行客户端调用，并且如果您的应用程序嵌入其中（作为 Canvas 应用程序或 AppTab），则使您能够与实际的 facebook 站点进行通信。它不是必需的，但提供了额外的功能。

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:17:14.683

无论您使用哪种语言，最好不要包含无用的代码。养成这样做的坏习惯，最坏的情况可能会导致性能问题和维护问题，当您开始处理甚至未使用的类似代码时。

# javascript - 实时表单验证

> ID：10643891
> 
> 赞同：0
> 
> 时间：2012-05-17T21:37:06.980
> 
> 标签：javascript, jquery, ajax, forms, validation

我对实时表单验证有疑问。我使用这个脚本[http://position-relative.net/creation/formValidator](http://position-relative.net/creation/formValidator)来验证一些表单，但我需要一些更改，但我不知道如何制作它们。我可以在表单的轮廓中显示错误消息（所有消息一个框）吗？假设在页面角落的一个框中（不是像现在这样的每个输入上方）？如果是，有人知道怎么做吗？另外，我需要一个规则来检查输入是否唯一（用户不能在不同的字段上插入相同的值）。也许有人知道另一个带有此选项的脚本。谁能帮我？我是 JS 的新手，我必须完成这项工作。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:45:00.637

您可能想要使用[jQuery Validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。它可以满足您的要求。

您可以创建自己的验证规则，这样您就可以完成每个输入框要求的唯一值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:46:31.203

您可以挂钩一个事件`jqv.form.result`，将消息推送到特定 div 并执行一些额外的验证，您可以将自己的错误消息推送回`errorFound`对象。

```
 jQuery("#formID").validationEngine();

    $("#formID").bind("jqv.form.validating", function(event){
          $("#hookError").html("");
    });

    $("#formID").bind("jqv.form.result", function(event , errorFound){
           if(errorFound) $("#hookError").append("There is some problems with your form");
    });

    <form id="formID" class="formular" method="post" action="">  
    <div id="hookError" style="color:red; font-weight:bold;height:20px;"></div> 
```

我已经查看了该库的源代码，最好的办法是检查`errorFound`传递给`jqv.form.result`事件处理程序的对象，如果运气好的话，您将能够运行一组错误消息并将它们写入分区`hookError`。

# jsf - ICEFaces 1.8.2 和 IBM WebSphere Application Server 8？

> ID：10643895
> 
> 赞同：1
> 
> 时间：2012-05-17T21:37:26.077
> 
> 标签：jsf, websphere, icefaces

我已将我的 WebSphere Application Server 从版本 6.1 升级到 8.0，但我的应用程序不再工作并出现以下错误。它使用 ICEFaces 1.8.2 和 JSF 1.1。它似乎缺少类 BridgeFacesContext2，但之前在 WAS 6.1 中从未遇到过问题。

```
[5/17/12 16:43:20:552 EDT] 00000026 MainServlet   I com.icesoft.faces.webapp.http.servlet.MainServlet setUpCoreMessageService Blocking Request Handler: "auto-detect"
[5/17/12 16:43:20:802 EDT] 00000026 EnvironmentAd I com.icesoft.faces.webapp.http.servlet.EnvironmentAdaptingServlet <init> Adapting to Thread Blocking environment
[5/17/12 16:43:23:334 EDT] 00000026 MainServlet   W com.icesoft.faces.webapp.http.servlet.MainServlet setUpCoreMessageService Push Server not found - the Push Server must be deployed to support multiple asynchronous applications.
[5/17/12 16:43:23:334 EDT] 00000026 MainServlet   I com.icesoft.faces.webapp.http.servlet.MainServlet setUpCoreMessageService Adapting to Push environment.
[5/17/12 16:43:23:459 EDT] 00000026 AssociatedPag I com.icesoft.faces.webapp.http.portlet.page.AssociatedPageViewsImpl getImplementation using com.icesoft.faces.webapp.http.portlet.page.NoOpAssociatedPageViews
[5/17/12 16:43:23:678 EDT] 00000026 View          E com.icesoft.faces.context.View servePage Problem encountered during View.servePage 
                             java.lang.ClassNotFoundException: org.icefaces.x.context.BridgeFacesContext2
at java.lang.Class.forNameImpl(Native Method)
at java.lang.Class.forName(Class.java:132)
at com.icesoft.faces.context.View$2.serve(View.java:68)
at com.icesoft.faces.context.View.servePage(View.java:149)
at com.icesoft.faces.webapp.http.core.MultiViewServer.service(MultiViewServer.java:67)
at com.icesoft.faces.webapp.http.common.ServerProxy.service(ServerProxy.java:11)
at com.icesoft.faces.webapp.http.servlet.MainSessionBoundServlet$4.service(MainSessionBoundServlet.java:149)
at com.icesoft.faces.webapp.http.common.standard.PathDispatcherServer.service(PathDispatcherServer.java:24)
at com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:16)
at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
at com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:53)
at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:23)
at com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:131)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1147)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:722)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:449)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.dispatch(WebAppRequestDispatcher.java:1382)
at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:191)
at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:648)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3639)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:950)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1659)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1648) 
```

我正在查看 icefaces.jar 并注意到 icefaces.jar\com\icesoft\faces\context 中有一个 BridgeFacesContext.class。不确定这是否是它找不到的同一类。

我尝试了不同版本的 WebSphere 内置 JSF jars（在看到[这个](http://jforum.icesoft.org/JForum/posts/list/20359.page)之后），但没有运气。有谁知道如何配置 ICEFaces 1.8.2 以使用 WAS 8？

我需要升级到 ICEFaces 3 吗？如果是，开源版本是否与 WAS 8 兼容？（WAS 8 似乎只列在[此处](http://www.icesoft.org/projects/ICEfaces/supported-platforms.jsf)的 EE 版本下）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:22:24.677

我们对 WebSphere 的官方支持如下：

我们在 JSF 1.2 上运行的 ICEfaces 1.8 EE 产品支持 WebSphere 6、7 和 8。
我们在 JSF 2.1 上运行的 ICEfaces 3.0 EE 产品支持 WebSphere 7 和 8

最近在最新的 1.8 EE 版本中添加了对 WebSphere 8 的支持：

[http://res.icesoft.org/releasenotes/icefacesEE-1.8.2.GA_P04-RN.html#Supported_Platforms](http://res.icesoft.org/releasenotes/icefacesEE-1.8.2.GA_P04-RN.html#Supported_Platforms)

因此，在您的情况下，升级到 ICEfaces EE 1.8 或 ICEfaces EE 3.0（推荐）将是必需的操作过程。

# ruby-on-rails-3 - OpenSSL + 乘客 + RVM

> ID：10643896
> 
> 赞同：0
> 
> 时间：2012-05-17T21:37:36.217
> 
> 标签：ruby-on-rails-3, ssl, rvm

我相信我在大多数情况下都正确设置了此设置，但我无法让我的网站获取我使用 OpenSSL 创建的 ssl 证书。

我已经使用带有 openssl 选项的 rvm 安装了我的 ruby​​ 版本来设置 openssl 路径：

`rvm install 1.9.3 --with-openssl-dir=$HOME/.rvm/usr`

然后我按照以下说明操作：[http ://www.akadia.com/services/ssh_test_certificate.html](http://www.akadia.com/services/ssh_test_certificate.html)

第 5 步不同，因为我将密钥和证书文件复制到`.rvm`目录中的 openssl 域。

然后我`config.force_ssl`在`true`我的`production.rb`文件中设置。

我也将主机设置为启用 ssl。

最后我重新启动了服务器。我可以访问[https://mysite.com](https://mysite.com)，但我警告我该网站的内容不安全。

不知道从这里做什么。任何帮助或方向都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T00:40:54.057

您的 CDN 通常可以为您指出正确的解决方案，但通常需要使用 https 而不是 http 调用您的资源。如果您的 CDN 的主机名设置在 rails 选项中的某处，您通常可以在前面`https://`添加以使其正常工作

# php - PHP 社交网络分析库

> ID：10643900
> 
> 赞同：2
> 
> 时间：2012-05-17T21:38:09.337
> 
> 标签：php, social-networking, analytics

有人知道任何 PHP 社交网络分析库吗？我找到了适用于 Python 的 NetworkX，但没有找到适用于 PHP 的。同样，不是用于绘图的东西，而是对已绘制网络的实际数学分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-18T06:09:22.940

我建议你用Java来做分析。

1.  用于分析社交网络的 Java。（例如[荣格](http://jung.sourceforge.net/)）
2.  将结果导出到 PHP，就像使用 PHP 从 Java 中读取结果一样。

既然我看到了你已经建好网络的评论，为什么不使用 Java/Python 来阅读你的网络呢。根据 Python 的分析（即将结果写入磁盘/内存），您仍然可以在 PHP 上重用结果，对吧？

目前，我没有看到任何使用 PHP 进行社交网络分析的库。你知道，使用 PHP 来做这样的数学事情会更加计算密集。大多数人在后端执行此操作，例如 PHP “调用/执行”一些 Java 程序来运行结果。

然后 PHP 将读取结果并显示给用户的浏览器。

# haskell - 在模板haskell范围之外编译时间代码重写？

> ID：10643901
> 
> 赞同：4
> 
> 时间：2012-05-17T21:38:23.473
> 
> 标签：haskell, template-haskell

是否可以创建一个在编译时从模板haskell引号之外重写haskell代码的函数？

例如：

```
differentiate :: Floating a => (a -> a) -> a -> (a,a)
differentiate = -- what goes here?

f :: Num a => a -> a
f = sin

g :: Num a => a -> (a,a)
g = differentiate f 
```

并在编译时将 g 转换为：

```
g x = (sin x, cos x) 
```

我希望我的“区分”函数被传递给“f”的 AST，并让我在编译之前重写它。据我所知，您不能在模板 haskell 中执行此操作，除非将函数的完整语法传递给它，即“g =区分罪”。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T21:56:34.160

您正在谈论方案中的宏。答案是不。Haskell 函数必须是“引用透明的”，这意味着如果给它两个*指称*相等的参数，则结果必须在指称上相等。即，*每个* `f`人都必须拥有

```
f (1 + 1) = f 2 
```

如果`f`是宏，则不一定如此。然而，这个属性对于语言的“纯粹性”是必不可少的——是什么让 Haskell 能够很好地推理和重构。

然而，在 Haskell 中有大量关于[自动微分](http://www.haskell.org/haskellwiki/Automatic_Differentiation)的工作，其中没有一个需要宏系统——抽象建模（以及使它看起来更漂亮的类型类）就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:09:16.173

如果您愿意使用自己的一组数学函数和数字，理论上是可以做到的。您需要做的是创建一个类型系统来跟踪每个函数的计算方式。这将反映在表达式的类型中。使用模板 haskell 和 reify 函数，或者使用类型类代码，您可以在编译时生成正确的代码。

这是一个使用类型类的 hacky 示例实现。它适用于 sin、cos、常数和加法。实施全套操作将是很多工作。此外，代码中有相当多的重复，如果您打算使用这种方法，您应该尝试解决该问题：

```
{-# LANGUAGE ScopedTypeVariables, UndecidableInstances, FlexibleInstances, MultiParamTypeClasses, FunctionalDependencies #-}
module TrackedComputation where
import Prelude hiding (sin, cos, Num(..))
import Data.Function (on)
import qualified Prelude as P    

-- A tracked computation (TC for short).
-- It stores how a value is computed in the computation phantom variable
newtype TC newComp val = TC { getVal :: val }
    deriving (Eq)

instance (Show val) => Show (TC comp val) where
    show = show . getVal

data SinT comp = SinT
data CosT comp = CosT

data AddT comp1 comp2 = AddT

data ConstantT = ConstantT

data VariableT = VariableT

sin :: (P.Floating a) => TC comp1 a -> TC (SinT comp1) a
sin = TC . P.sin . getVal
cos :: (P.Floating a) => TC comp1 a -> TC (CosT comp1) a
cos = TC . P.cos . getVal

(+) :: (P.Num a) => TC comp1 a -> TC comp2 a -> TC (AddT comp1 comp2) a
(TC a) + (TC b) = TC $ (P.+) a b

toNum :: a -> TC ConstantT a
toNum = TC

class Differentiate comp compRIn compROut | comp compRIn -> compROut where
    differentiate :: P.Floating a => (TC VariableT a -> TC comp a) -> (TC compRIn a -> TC compROut a)

instance Differentiate ConstantT compIn ConstantT where
    differentiate _ = const $ toNum 0

instance Differentiate (SinT VariableT) compIn (CosT compIn) where
    differentiate _ = cos
instance Differentiate VariableT compIn (ConstantT) where
    differentiate _ = const $ toNum 1

instance (Differentiate add1 compIn add1Out, Differentiate add2 compIn add2Out) =>
    Differentiate (AddT add1 add2) compIn (AddT add1Out add2Out) where
    differentiate _ (val :: TC compROut a) = result where
        first = differentiate (undefined :: TC VariableT a -> TC add1 a) val :: TC add1Out a
        second = differentiate (undefined :: TC VariableT a -> TC add2 a) val :: TC add2Out a
        result = first + second

instance P.Num val => P.Num (TC ConstantT val) where
    (+) = (TC .) . ((P.+) `on` getVal)
    (*) = (TC .) . ((P.*) `on` getVal)
    abs = (TC) . ((P.abs) . getVal)
    signum = (TC) . ((P.signum) . getVal)
    fromInteger = TC . P.fromInteger

f x = sin x

g = differentiate f

h x = sin x + x + toNum 42 + x

test1 = f . toNum
test2 = g . toNum
test3 = differentiate h . toNum 
```

# php - 在 codeigniter 2.1 中分析缓存使用情况

> ID：10643903
> 
> 赞同：0
> 
> 时间：2012-05-17T21:38:37.867
> 
> 标签：php, profiling, memcached, codeigniter-2

我正在使用标准代码点火器分析功能来查看页面的性能细分。我还使用 memcache 来存储一些数据库查询的结果。我希望缓存查找出现在分析摘要中（所以我知道我没有在页面上获取所有数据库查询，并且我知道查找的性能）。是否有使用 CodeIgniter 执行此操作的标准方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:40:43.910

找不到任何东西，所以在github上添加：

[https://github.com/EllisLab/CodeIgniter/pull/1369](https://github.com/EllisLab/CodeIgniter/pull/1369)

# asp.net - MSDeploy跳过删除不起作用

> ID：10643904
> 
> 赞同：0
> 
> 时间：2012-05-17T21:38:46.080
> 
> 标签：asp.net, msdeploy

我想跳过删除在 IIS 虚拟路径上运行的 Web 应用程序的 \log 文件夹中的文件：'website\v2\service'

我尝试了命令行：

```
"msdeploy.exe" -source:package='Package.zip' -dest:auto,computerName='https://host   /MsDeploy.axd',userName='####',password='####',authtype='Basic',includeAcls='False' -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -skip:skipaction='Delete',objectname='dirPath',absolutepath='\\log' -setParamFile:"SetParameters.xml"   -allowUntrusted 
```

但是 website\v2\service\log 文件夹中的文件仍然被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T17:00:49.107

检查操作设置中指定的参数文件`-setParamFile:"SetParameters.xml"`——该文件中的设置可能会覆盖`-skip`示例命令中的设置。

# javascript - 单击 IEAutomation 中的按钮时如何执行 Javascript？

> ID：10643906
> 
> 赞同：2
> 
> 时间：2012-05-17T21:38:57.210
> 
> 标签：javascript, perl, internet-explorer, button

我`Win32::IEAutomation`在 perl 中使用来填写表格和搜索，但是当我使用时`getButton()->Click`出现错误`"Can't call method "Click" on an undefined value"`。我可以单击图像（执行 javascript），但不能单击按钮。我在文档中注意到它在“ ”和“ ”`Win32::IEAutomation`下都有以下内容，但在“ ”下没有： `getImage``getLink``getButton`

“由于它使用 DOM 的 click 方法，它支持点击其中包含 javascript 的链接。”

谁能告诉我如何单击按钮并触发 javascript？

这是我的代码的骨架。最后一行是给我带来麻烦的：

```
use Win32::IEAutomation;
my $ie = Win32::IEAutomation->new( visible => 1);
$ie->gotoURL('https://www.mywebpage.com/index.html',1);

$ie->getTextBox('id:', "mytextbox")->SetValue("relevant text");
$ie->getButton('id:', "mybutton")->Click; 
```

这是html的相关部分：

```
<input type="text" id="mytextbox" />
<button id="mybutton" title="Go" class="ControlButton" value="Go" onclick="researchLookupObj.GoClick(CallServer);return false;">Search</button> 
```

我能够让文本框填写（并且能够单击此处未显示的代码中较早的图像），但是使用按钮得到错误。我怎样才能告诉它执行名为“ `researchLookupObj.GoClick()`”的javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:17:02.503

我建议您使用[WWW::Scripter](http://search.cpan.org/~sprout/WWW-Scripter-0.029/lib/WWW/Scripter.pod)来完成这项任务。可能你更适合。

# java - 休眠检查集合中所有相等的元素

> ID：10643909
> 
> 赞同：8
> 
> 时间：2012-05-17T21:39:24.233
> 
> 标签：java, hibernate

我有两个实体，即人员和活动。Activity 具有属性状态，Person 实体包含活动的集合。我想获取所有活动状态为“完成”的人员列表。

```
 Criteria crit = s.createCriteria(Person.class);
   crit.createAlias("activities", "act").add(Restrictions.eq("act.status","Done")); 
```

但这会返回所有对象，其中至少有一个状态为已完成的活动。我想检索所有活动状态设置为完成的人员列表。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-18T13:47:38.983

以下是使用**Criteria**执行此操作的方法：

```
Criteria crit = s.createCriteria(Person.class);

DetachedCriteria sub = DetachedCriteria.forClass(Person.class);
sub.createAlias("activities","act");
sub.add(Restrictions.ne("act.status","Done"));
sub.setProjection(Projections.property("id");

crit.add(Property.forName("id").notIn(sub); 
```

有点晚了，但我希望我能帮助那些仍然像我一样挣扎的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:50:33.993

想否定它。检索那些有活动但没有处于不同状态的人`Done`。然后您可以简单地添加`maxResults()`或`list.get(0)`（请记住，可能不包含任何人）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T04:01:59.090

```
// open hibernate session
Query query = session.createQuery("Select p from Persons p inner join p.activities a where a.status = :code");
query.setParameter("code", "Done");
List results = query.list();

// close session

for (int i = 0; i < results.size(); ){
  Person person = results.get(i);
  List<Activity> activities = person.getActivities();
  for (int j = 0; j < activities.size(); j++){
    if (!activities.code.equals("Done")){
      results.remove(i);
      break;
    } // end if
  } // end for j
  i++;
} // end for i 
```

这应该可以解决问题。请注意，如果您有延迟加载，您可能需要在 Hibernate 查询中添加“fetch”关键字。这是一个有用的连接链接： http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)

# select - 如何用选择下拉mootools替换多排序列表？

> ID：10643910
> 
> 赞同：0
> 
> 时间：2012-05-17T21:39:34.623
> 
> 标签：select, replace, mootools

我有以下 html 标记，比这里的演示多一点，混合了 li/ul 下拉列表和 sub ul 的不同类名

```
<ul class="nav">
  <li><a href="linik">Title</a></li>
  <li><a href="linik">Title</a></li>
  <li><a href="linik">Title</a></li>
  <li><a href="linik">Title</a>
    <ul class="subnav">
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
    </ul>
  </li>
  <li><a href="linik">Title</a></li>
  <li><a href="linik">Title</a></li>
  <li><a href="linik">Title</a></li>
   <li><a href="linik">Title</a>
    <ul class="subnav">
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
      <li><a href="linik">Title</a></li>
    </ul>
  </li>
</ul> 
```

为了适应移动浏览器，我想将 ul 列表转换为选择列表，例如

```
<select class="nav" onchange="location.href=this.value">
<option  value="link">Title</option>
<option  value="link">Title</option>
<option  value="link">Title</option>
<option  value="link">Title</option>
<option  value="link">Title</option>
<option  value="link">Title</option>

</select> 
```

我试过了

```
window.addEvent('domready', function () {

      $$('ul.nav li').each(function(el) {

            var option = new Element('option',{html:el.get('html')});
            option.replaces(el);
        });
      $$('ul.nav').each(function(el) {

            var select= new Element('select',{html:el.get('html')});
            select.replaces(el);
        });
}); 
```

但正如您在这里看到的[http://jsfiddle.net/xVrZe/](http://jsfiddle.net/xVrZe/)我得到所有没有 href 属性的 li 值，而我的 sub ul li 在 1 个选择选项中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:28:46.487

试试这个：

```
window.addEvent('domready', function () {     
  $$('ul.nav').each(function(el) {
    var options = el.getElements('li > a').map(function(el) {
        return new Element('option',{html:el.get('html'), value:el:get('href')});
    });

    var select= new Element('select');
    select.adopt(options);
    select.replaces(el);
  });
}); 
```

问题是：

1）您需要从每个导航开始，只关注其内容（如果页面上有多个导航）

2）你需要得到'a'标签，而不是'li'标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:11:15.543

```
(function() {
    var Options = new Elements(),
        ul = document.getElement('ul.nav');

    ul.getElements('li a').each(function(el) {
        Options.include(new Element('option', {
            text: el.get('html'),
            value: el.get('href')
        }));
    });

    new Element('select', {
        events: {
            change: function() {
                window.location.href = this.get('value');
            }
        }
    }).adopt(Options).replaces(ul);
}()); 
```

这也将转换并删除原始 ul - 附加更改事件。[http://jsfiddle.net/dimitar/xVrZe/2/](http://jsfiddle.net/dimitar/xVrZe/2/)

# facebook - 如果用户未登录到 facebook，则在 FB.init 期间不会触发 auth.statusChange

> ID：10643918
> 
> 赞同：16
> 
> 时间：2012-05-17T21:40:32.770
> 
> 标签：facebook, facebook-authentication

我想知道是否有人找到了解决我正在经历的行为的方法。

以下面的代码为例：

```
<script>
window.fbAsyncInit = function() {
        FB.init({
          appId      : '[----removed-------]', // App ID
          channelUrl : 'http://localhost/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies
          xfbml      : true  // parse XFBML
        });     
        // Additional initialization code here

        FB.Event.subscribe('auth.statusChange',fbLoginStatus);

        console.log("getloginstatus");

        FB.getLoginStatus(fbLoginStatus);
</script> 
```

使用状态设置为 true 的 FB.init，本质上是`getLoginStatus()`根据[facebook 文档](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)调用。但是，这[显然是预期的行为](http://developers.facebook.com/bugs/132607090206257)，这*不会*触发事件`auth.statusChange`，因为默认值是“未知”，**而**“未登录”的值也是“未知”（即使它可以知道！！）

因此，如果我还想响应未登录 facebook 的用户，我必须`FB.getLoginStatus()`明确调用并将状态设置*为true。*

问题是，如果用户不是“注销”，这会导致函数被调用两次。

有没有一种巧妙的方法来阻止这种情况的发生？我认为我唯一的选择可能是调用不同的函数来处理身份验证更改事件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T23:02:44.693

我对此的最佳解决方案是在 fb.init 选项中将状态设置为“假”，然后单独显式调用 getloginstatus。

*如果*get loginstatus 返回未知（即注销），我订阅了状态更改事件，并按照通常的方式显示登录按钮。然后当用户登录时，状态更改按预期触发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T22:15:32.403

理论上应该为您节省往返行程的更好解决方案如下（coffeescript，但很容易翻译成javascript）：

```
FB.init
  appId: appId
  channelUrl: channelUrl
  status: true     # Check Facebook Login status on init
  cookies: true
  xfbml: false

FB.getLoginStatus (response) =>
  @parseResponse(response)
  FB.Event.subscribe 'auth.statusChange', @parseResponse
  FB.Event.subscribe 'auth.authResponseChange', @parseResponse 
```

当用户未知时，我们仍然使用手动 getLoginStatus 来触发，但是这次我们仍然使用 'status: true' 以便在调用 getLoginStatus 时已经缓存了登录状态。通过仅在触发 getLoginStatus 后订阅相关事件，我们确保处理方法 parseResponse 仅在加载时调用一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T05:40:55.450

您可以检查在传递 true 参数后返回的响应`getLoginStatus`：

```
window.fbAsyncInit = function() {
    FB.init({
        appId  : '',
        status : true,
        cookie : true,
        xfbml  : true,
    });

    FB.getLoginStatus( function(response) {
        //console.log(response);
        if (response.status === 'connected') {
            var accessToken = response.authResponse.accessToken;
            alert(accessToken);
        } else if (response.status === 'not_authorized') {
            //login function
        } else {
            //login function
        }
    }, true);

    FB.Event.subscribe('auth.authResponseChange', function(response) {
        //console.log('The status of the session changed to: '+response.status);
        window.location.reload();
    });
}; 
```

如果您将 设置`status`为`true`，则`FB.getLoginStatus`响应对象将被 SDK 缓存，后续调用`FB.getLoginStatus`将从此缓存的响应中返回数据。

为了解决这个问题，您必须调用`FB.getLoginStatus`第二个参数集以`true`强制往返 Facebook - 有效地刷新响应对象的缓存。

FB 文档：[https ://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

# jsf-2 - 多字段验证器没有从其他 div 获取绑定值

> ID：10643921
> 
> 赞同：1
> 
> 时间：2012-05-17T21:40:39.563
> 
> 标签：jsf-2

我们有一个跨两个 DIV 的字段的多字段验证器，如果我们尝试跨字段绑定值并将其作为属性传递给其中一个验证器，它不会获得提交的值....字段 phone 3 有一个验证器，但是当它进入验证器时，提交的值是空的。

我有三个 div "phone1" 、 "phone2" 、 "phone3" ，我想在这三个字段中的 "phone3" 字段中进行验证。验证器没有获取左侧和中间字段的提交值。我在 div“phone3”中添加了额外的输入字段“确认”，验证器获取了“确认”字段的值

```
<div class="home_phone">

        <div id="phone1" >
        <div class="left"></div>
        <div class="middle">
            <h:inputText id="phonePrefix"
                maxlength="4" value="#{phoneNumberTO.phonePrefix}"
                immediate="true"
                binding="#{phonePrefix}">
            </h:inputText>
        </div>
        <div class="right"></div>

</div>
        <div id="phone2" >

        <div class="left"></div>
        <div class="middle">
            <h:inputText  id="phoneAreaCode"
                maxlength="4" 
                immediate="true"
                binding="#{phoneAreaCode}">
            </h:inputText>
        </div>
        <div class="right"></div>
</div>
        <span class="sep_field">-</span>
        <div id="phone3" >

        <div class="left"></div>
        <div class="middle">
            <h:inputText  id="input3"
                maxlength="4" value="#{phoneNumberTO.phoneSuffix}"
                >
                <f:validator validatorId="phoneValidator"  />
                <f:attribute name="phonePrefix" value="#{phonePrefix}"   /> 
             <f:attribute name="phoneAreaCode" value="#{phoneAreaCode}"   />
                             <f:attribute name="confirm" value="#{confirm}"   />
            </h:inputText>
             <h:inputSecret id="confirm" binding="#{confirm}" required="true" />
        </div>
        <div class="right"></div>

</div>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:58:27.953

> *我`immediate=true`在前两个组件上使用过。否则它将被验证并且提交的值变为 NULL*

不，这不是`immediate="true"`目的。去掉它。

在 JSF 中，组件按照它们出现在 JSF 组件树中的顺序进行处理和转换/验证。*在验证阶段*，每个输入组件都将逐步转换和验证，如下所示：

*   获取组件提交的值`UIInput#getSubmittedValue()`
*   将组件的提交值转换为临时值。
*   验证温度值。
    *   如果验证成功，将 temp 值存储为组件的值 by`UIInput#setValue()` **并将**组件的提交值设置为`null`by `UIInput#setSubmittedValue()`。
    *   如果验证失败，则丢弃 temp 值并通过传递`false`给将组件设置为无效`UIInput#isValid()`。请注意，提交的值保留在组件上！

按照您认为的顺序，在*最后一个*组件上使用验证器，您应该通过`UIInput#getValue()`而不是收集其他输入的值，否则当验证成功时`UIInput#getSubmittedValue()`，您确实会继续获得s 。`null`

```
UIInput phonePrefix = (UIInput) component.getAttributes().get("phonePrefix");
Object value = phonePrefix.getValue(); // Don't use getSubmittedValue(). 
```

到目前为止，我无法解释为什么将它们放在 div 之外时它会起作用。我认为您实际上意外地重新排列了组件的顺序。

* * *

至于属性的正确使用，`immediate="true"`如果您了解它的确切作用，它应该会有所帮助。[以下是调试 JSF 生命周期文章](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html#WhenShouldIUseTheImmediateAttribute)的相关摘录：

> ## 好的，我什么时候应该使用 immediate 属性？
> 
> 如果还不完全清楚，这里有一个总结，其中包含可能有益的真实世界使用示例：
> 
> *   如果`UIInput`仅在 (s) 中设置，则流程验证阶段将改为在应用请求值阶段进行。使用它来优先验证有`UIInput`问题的组件。当其中任何一个的验证/转换失败时，非即时组件将不会被验证/转换。
>     
>     
> *   如果`UICommand`仅设置，则任何组件都将跳过应用请求值阶段直到更新模型值阶段`UIInput`。使用它跳过表单的整个处理过程。例如“取消”或“返回”按钮。
>     
>     
> *   如果在两个组件中都设置了`UIInput`，那么对于没有设置此属性`UICommand`的任何组件，将跳过应用请求值阶段直到更新模型值阶段。`UIInput`使用它来跳过对某些字段的整个表单的处理（立即）。例如，登录表单中的“忘记密码”按钮带有必填但非即时的密码字段。

# objective-c - 在Objective-C中绘制具有开始和结束角度的椭圆

> ID：10643928
> 
> 赞同：8
> 
> 时间：2012-05-17T21:41:30.850
> 
> 标签：objective-c, ios, ellipse, uibezierpath, geometric-arc

我正在编写一个 iPad 应用程序，我在其中将表示形状的 XML 对象呈现为屏幕上的图形。我试图渲染的对象之一是弧。本质上，这些弧线为我提供了一个边界矩形以及一个开始和结束角度。

给定属性：

*   X
*   是的
*   宽度
*   高度
*   起始角
*   结束角

使用这些值，我需要绘制圆弧（本质上是椭圆的一部分）。我不能使用以下内容：

```
 UIBezierPath *arc = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(x, y, width, height)];
    [UIColor blackColor] setStroke];
    [arc stroke]; 
```

因为它画了一个完整的椭圆。基本上我需要上面的，但它需要考虑开始和结束角度，所以只显示椭圆的一部分。我认为这将涉及绘制三次贝塞尔曲线或二次贝塞尔曲线。问题是我不知道如何使用给定的信息计算起点、终点或控制点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T22:05:38.170

您可以通过围绕椭圆的绘图设置剪辑路径来实现您想要的。

```
CGContextSaveGState(theCGContext);
CGPoint center = CGPointMake(x + width / 2.0, y + height / 2.0);
UIBezierPath* clip = [UIBezierPath bezierPathWithArcCenter:center
                                                    radius:max(width, height)
                                                startAngle:startAngle
                                                  endAngle:endAngle
                                                 clockwise:YES];
[clip addLineToPoint:center];
[clip closePath];
[clip addClip];

UIBezierPath *arc = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(x, y, width, height)];
[[UIColor blackColor] setStroke];
[arc stroke];

CGContextRestoreGState(theCGContext); 
```

剪裁的确切半径并不重要。它需要足够大，以便它只在末端剪辑椭圆，而不是通过所需的弧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-13T20:06:54.683

这个类别会有所帮助。

```
#import <Foundation/Foundation.h>

@interface UIBezierPath (OvalSegment)

+ (UIBezierPath *)bezierPathWithOvalInRect:(CGRect)rect startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle;
+ (UIBezierPath *)bezierPathWithOvalInRect:(CGRect)rect startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle angleStep:(CGFloat)angleStep;

@end

#import "UIBezierPath+OvalSegment.h"

@implementation UIBezierPath (OvalSegment)

+ (UIBezierPath *)bezierPathWithOvalInRect:(CGRect)rect startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle angleStep:(CGFloat)angleStep {
    CGPoint center = CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect));
    CGFloat xRadius = CGRectGetWidth(rect)/2.0f;
    CGFloat yRadius = CGRectGetHeight(rect)/2.0f;

    UIBezierPath *ellipseSegment = [UIBezierPath new];

    CGPoint firstEllipsePoint = [self ellipsePointForAngle:startAngle withCenter:center xRadius:xRadius yRadius:yRadius];
    [ellipseSegment moveToPoint:firstEllipsePoint];

    for (CGFloat angle = startAngle + angleStep; angle < endAngle; angle += angleStep) {
        CGPoint ellipsePoint = [self ellipsePointForAngle:angle withCenter:center xRadius:xRadius yRadius:yRadius];
        [ellipseSegment addLineToPoint:ellipsePoint];
    }

    CGPoint lastEllipsePoint = [self ellipsePointForAngle:endAngle withCenter:center xRadius:xRadius yRadius:yRadius];
    [ellipseSegment addLineToPoint:lastEllipsePoint];

    return ellipseSegment;
}

+ (UIBezierPath *)bezierPathWithOvalInRect:(CGRect)rect startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle {
    return [UIBezierPath bezierPathWithOvalInRect:rect startAngle:startAngle endAngle:endAngle angleStep:M_PI/20.0f];
}

+ (CGPoint)ellipsePointForAngle:(CGFloat)angle withCenter:(CGPoint)center xRadius:(CGFloat)xRadius yRadius:(CGFloat)yRadius {
    CGFloat x = center.x + xRadius * cosf(angle);
    CGFloat y = center.y - yRadius * sinf(angle);
    return CGPointMake(x, y);
}

@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T21:57:46.517

您将不得不使用`addQuadCurveToPoint:controlPoint:`而不是`bezierPathWithOvalInRect.`

方法定义如下：-

```
- (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint 
```

也就是说 CGPoint 是两个参数的参数（输入）。

`moveToPoint:`您还必须在调用之前设置起点`addQuadCurveToPoint`，这将作为当前点（您可以在方法中看到他们的没有起点作为参数）。

在您的情况下，您将拥有

1>x,y 作为你的起点

2>x+width 和 y+height 作为端点

您在这里不需要角度，或者您可以实现您的逻辑来使用角度。我正在上传图像以使事情变得清晰。

![这是描述起点、终点和控制点的图像](../Images/2c8efea33a2ccf93fb38ab973555e6b4.png)

# jquery - 重命名 Javascript 数组中的重复项

> ID：10643933
> 
> 赞同：2
> 
> 时间：2012-05-17T21:42:24.310
> 
> 标签：jquery, arrays, duplicates

如果变量已经存在于字符串中，我正在寻找最有效的方法来重命名（append-1、-2 等）变量。

所以我保留了一个数组”

```
dupeCheck = []; 
```

一旦我看到一个变量：

```
var UID; 
```

已经在我的 dupeCheck 数组中，我想立即将 UID 的值附加为 -1，

另外，我需要防止第三个重复成为 string-1-1，而是 string-2..

我看到了这个：之前[将计数附加到javascript字符串数组中的重复项](https://stackoverflow.com/questions/8794169/appending-the-count-to-duplicates-in-a-javascript-string-array) ，但这正是我想要的......

有什么聪明的主意吗？我更喜欢 jQuery..

/编辑：

例如：

```
var dupeUIDCheck = [];  

$.each(data[IDS].UIDs[keys], function(keys, val)
     {
     var currString = val;
     switch (key)
 {
      case "UID":

       UID = unquote(currString);

   //TODO:
   //Detect if multiple UIDs are loaded from a single source, and
   //rename them:

   dupeUIDCheck.push(UID); //Push current ID onto existing array

       //Check if ID exists
       ?
       //If exists rename value of currString, save it in currString
       newName = currSting;
      break;

      case "otherstuff":
           //Other vars to parse
      break;
     } 
```

所以当我们摆脱“UID”的情况时，我想确保它具有唯一的价值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T22:04:30.883

您可以将功能包装在一个函数中以便能够重用它。下面的函数接受一个字符串列表并返回以`-1`等`-2`为后缀的字符串列表。

```
function suffixDuplicates( list )
{
    // Containers

    var count = { };
    var firstOccurences = { };

    // Loop through the list

    var item, itemCount;
    for( var i = 0, c = list.length; i < c; i ++ )
    {
        item = list[ i ];
        itemCount = count[ item ];
        itemCount = count[ item ] = ( itemCount == null ? 1 : itemCount + 1 );

        if( itemCount == 2 )
            list[ firstOccurences[ item ] ] = list[ firstOccurences[ item ] ] + "-1";
        if( count[ item ] > 1 )
            list[ i ] = list[ i ] + "-" + count[ item ]
        else
            firstOccurences[ item ] = i;       
    }

    // Return
    return list;
} 
```

例如，输入

```
[ "Barry", "Henk", "Jaap", "Peter", "Jaap", "Jaap", "Peter", "Henk", "Adam" ] 
```

返回的输出

```
[ "Barry", "Henk-1", "Jaap-1", "Peter-1", "Jaap-2", "Jaap-3", "Peter-2", "Henk-2", "Adam" ] 
```

要查看它的实际效果，[这里](http://jsfiddle.net/QJrCt/1/ "jsFiddle")是 jsFiddle 示例的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:59:02.227

理解您的问题有点困难，但请让我知道这是否是您所指的。假设我们有一串单词，其中一些单词重复。我们想用一个新的后缀来修改那些重复的单词，比如`-1`or `-2`，这取决于它是哪个实例。

```
// Start by creating our string, word array, and result array
var string = "one two one one two one three three one three",
    values = string.split(" "), result = [];

// For every word in the values array
for ( var i = 0; i < values.length; i++ ) {

  // Set a word variable, and an integer suffix
  var word = values[i], int = 1;

  // While our current word (with/without suffix) exists in results
  while ( strArr(word, result) >= 0 ) 
    // Increment the suffix on our word
    word = values[i] + "-" + int++;

  // Push word into result array
  result.push(word);
}

// Function for determining if a string is in an array
function strArr(s,a){
  for ( var j = 0; j < a.length; j++ )
    if ( a[ j ] == s ) return j;
  return -1;
}

// Compare the before and after
console.log( string );
console.log( result.join(" ") ); 
```

我们的结果是

```
one two one one two one three three one three
one two one-1 one-2 two-1 one-3 three three-1 one-4 three-2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:58:10.417

保存您正在检查的重复项的列表的最佳方法是将它们放在一个对象中，而不是一个数组中，这样您就可以快速查找它们，然后生成一个每次都没有使用的唯一后缀。此函数允许您将 id 传递给函数并让函数返回该 id 的唯一版本，该版本尚未使用。如果传入的内容没有被使用，它只会返回它。如果传入的内容正在使用中，它会删除任何后缀并生成一个尚未使用的新后缀并返回新生成的 id。然后将新生成的 id 存储在数据结构中，因此将来也不会重复。

```
var idList = {};

makeIdUnique(id) {
    if (id in idList) {
        // remove any existing suffix
        var base = id.replace(/-\d+$/, "");
        // generate a new suffix
        var cnt = idList[base] || 1;
        // while new suffix is in the list, keep making a different suffix
        do {
            id = base + "-" + cnt++;
        } while (id in idList);
        // save cnt for more efficient generation next time
        idList[base] = cnt;
    }
    // put the final id in the list so it won't get used again in the future
    idList[id] = true;
    // return the newly generated unique id
    return(id);
} 
```

# java - 似乎无法让 Lombok 在单元测试中工作

> ID：10643936
> 
> 赞同：15
> 
> 时间：2012-05-17T21:42:37.523
> 
> 标签：java, unit-testing, junit, intellij-idea, lombok

我们一直在整理一些（非常简单的）代码，以便测试并将 Lombok 注释引入我们的项目，以使我们的代码更好一点。不幸的是，似乎在通过 Maven 和通过 IntelliJ 运行测试时都中断了测试。

我们的域类看起来像：

```
package foo.bar;

import lombok.Data;

@Data
public class Noddy {

    private int id;
    private String name;

} 
```

通过相应的测试：

```
package foo.bar;

import org.junit.Test;
import static org.junit.Assert.assertEquals;

public class NoddyTest {

    @Test
    public void testLombokAnnotations(){
        Noddy noddy = new Noddy();
        noddy.setId(1);
        noddy.setName("some name");
        assertEquals(noddy.getName(), "some name");
    }
} 
```

我们在 Maven 中有 aspectjrt 依赖项（以及 IntelliJ 中的相关插件）和 aspectj-maven-plugin。

我们使用 Maven 2 风格的 POM、JSDK 1.6.0_31、Lombok 0.11.0 运行：

```
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>0.11.0</version>
</dependency> 
```

我们是在做一些愚蠢的事情还是遗漏了一些明显的事情？

如果我们能实现这个功能那就太好了，因为我已经关注在生产中使用 Lombok 已经有一段时间了。

非常感谢，

P。

（FWIW，IntelliJ 11.1.2 有 Lombok 插件 0.4 并且似乎在这个项目中使用 ACJ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:54:10.533

~~问题似乎是 lombok 生成的代码被 ajc 覆盖，并且根据我发现的 Fabrizio Giudici 的博客条目，由于 Maven AspectJ 插件中的错误阻止您通过ajc 的必要论据。~~

~~他在这里提出了一个解决方法：[http ://weblogs.java.net/blog/fabriziogiudici/archive/2011/07/19/making-lombok-aspectj-and-maven-co-exist](http://weblogs.java.net/blog/fabriziogiudici/archive/2011/07/19/making-lombok-aspectj-and-maven-co-exist)~~

实际上，[这](http://palesz.wordpress.com/2011/12/03/howto-maven-lombok-and-aspectj-together/)对我有用，并且可以说是一种更清洁的解决方案。您可能必须使用额外的 weave 目录为测试类添加执行阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:36:27.837

不幸的是，我测试了第二个解决方案[——mhvelplund 提到的](http://palesz.wordpress.com/2011/12/03/howto-maven-lombok-and-aspectj-together/)——但它对我没有用。解决方案是从 pom.xml 中完全删除 AspectJ maven 插件！

# c# - 在 Selenium 中测试滑块，只有一个元素，比如音量控制

> ID：10643937
> 
> 赞同：2
> 
> 时间：2012-05-17T21:42:38.113
> 
> 标签：c#, automated-tests, webdriver, selenium-webdriver

我需要在 selenium (c#) 中测试一个只有一个元素的滑块。诸如音量或亮度控制之类的东西。我在网上搜索过，我能找到的只有两个元素（源和目标）。我尝试了许多功能，但都没有工作。

```
Actions move = new Actions(driver);
move.DragAndDropToOffset(driver.FindElement(By.Id("someid")), 39, -9).Perform(); 
```

谁能帮我解决这个问题？我对 Selenium 和 c# 完全陌生。如果我需要提供更多详细信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:05:59.453

你确定只有一个元素吗？如果您的滑块可以沿着像这个滑块这样的轨道拖动

![在此处输入图像描述](../Images/64568a926c8c1380269376aadaa4a2e4.png)

用一个“滑块手柄”（一个 <a/> 标签作为值为“5ft 5”的框）沿着一个“滑块轨道”（一个 <div> 标签作为长黑条），那么移动的距离偏移量可以进行计算。以下代码将在 C# 中用于将滑块句柄沿滑块轨道移动一个百分比，并使用 CSS 值计算距离。

```
public void SetSliderPercentage(string sliderHandleXpath, string sliderTrackXpath, int percentage)
{
    var sliderHandle = driver.FindElement(By.XPath(sliderHandleXpath));
    var sliderTrack = driver.FindElement(By.XPath(sliderTrackXpath));
    var width = int.Parse(sliderTrack.GetCssValue("width").Replace("px", ""));
    var dx = (int)(percentage / 100.0 * width);
    new Actions(driver)
                .DragAndDropToOffset(sliderHandle, dx, 0)
                .Build()
                .Perform();
} 
```

# knockout.js - 在 viewModel 范围之外的 javascript 函数中访问 viewModel

> ID：10643940
> 
> 赞同：34
> 
> 时间：2012-05-17T21:43:01.477
> 
> 标签：knockout.js, data-binding, scope

我想知道是否可以从 viewModel 本身范围之外的方法访问 knockout.js 主 viewModel。举个例子：

```
function Employee(data) {
  var self = this;
  ko.mapping.fromJS(data, {}, this);
}

function EmployeeViewModel() {
  var self = this;
  this.employees = ko.observableArray([]);

  this.loadEmployees = function() {
    var mappedEmployees= $.map(JSON.parse(data.value), function(item) { return new Employee(item) });
    self.employees (mappedEmployees);
  }
}

// here's the part I'm curious about
$(document).ready(function() {
  ko.applyBindings(new EmployeeViewModel());  

  $("#myLink").click(function() {
     // is there some way to get back into the ko context here?
     // like with ko.dataFor or ko.contextFor?
  });
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-17T22:07:05.447

您始终可以通过将视图模型存储在可以访问的变量中来访问它，[模块和显示模块模式](https://weblogs.asp.net/dwahlin/techniques-strategies-and-patterns-for-structuring-javascript-code-revealing-module-pattern)很好，但是您可以将其存储在不会与其他名称冲突的对象中（此处为“我的”）：

```
my = { viewModel: new EmployeeViewModel() };
ko.applyBindings(my.viewModel); 
```

您的想法是正确的，您只需将元素作为 click 函数的参数并将目标属性传递给 ko.dataFor 或 ko.contextFor ( [jsfiddle](http://jsfiddle.net/gEG3k/65/) )：

```
$(document).ready(function() {
    my.vm = new EmployeeViewModel();
    ko.applyBindings(my.vm);
    $('button').on('click', function(e) {
        alert('you clicked on employee ' + ko.contextFor(e.target).$data.name() +
             ' also known as ' + ko.dataFor(e.target).name());
    });
});​ 
```

除了使用 jQuery 来绑定点击事件，您始终可以使用[Knockout 点击绑定](http://knockoutjs.com/documentation/click-binding.html)，它将当前模型数据作为第一个参数，将事件作为第二个参数（[jsfiddle](http://jsfiddle.net/VUtAd/14/)）传递：

```
function EmployeeViewModel() {
  var self = this;

  // skipped some of your code

  this.clickedOnEmployee = function(model, event) {
    // assuming your Employee has a name observable
    alert('You clicked on employee ' + model.name());
  };
} 
```

在您的 html 中（ $root 是您的基本视图模型，如果您的 clickedOnEmployee 函数在您的 Employee 对象上，则不需要它）：

```
<ul data-bind="foreach: employees">
    <li>
        <span data-bind="text: name"></span>
        <button data-bind="click: $root.clickedOnEmployee">show</button>
    </li>
</ul> 
```

# ios - 在照片应用程序中模拟 Apple 的自定义地图注释标注

> ID：10643941
> 
> 赞同：3
> 
> 时间：2012-05-17T21:43:13.260
> 
> 标签：ios, ipad, mkmapview, mapkit, callout

在 iPad 上 Apple 的内置照片应用程序中，如果您选择“地点”选项卡，您将看到带有图钉（注释）的地图，显示您拍摄照片的位置。

如果您选择一个图钉，而不是标准的文本标注气泡，您将获得在该位置拍摄的照片的精美缩略图。

我已经用谷歌搜索死了，但找不到允许我们创建这样的自定义标注的解决方案。有没有人有任何想法？

![iPad Phtos 应用程序](../Images/52ea993ae6205106815a2e6abba7cf3b.png)

# coldfusion - 日期/时间转换 ColdFusion

> ID：10643947
> 
> 赞同：4
> 
> 时间：2012-05-17T21:43:52.517
> 
> 标签：coldfusion, datetime-format, iso8601

我正在使用一个以 ISO 8601 格式显示日期和时间的脚本，如下所示`2012-05-17T17:35:44.000Z`：

但我希望它在使用`#Now()#`符号时以正常的 ColdFusion 时间戳格式显示......所以以这种格式：`{ts '2012-05-17 17:35:44'}`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-16T20:36:26.470

[从 CF 10 开始， parseDateTime](https://helpx.adobe.com/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/parsedatetime.html)直接支持 ISO-8601 。

```
<cfset string = "1997-07-16T19:20:30+01:00">
<cfset date = parseDateTime(string, "yyyy-MM-dd'T'HH:mm:ssX")> 
```

[TryCF.com 上的可运​​行示例](http://trycf.com/gist/6dadca18c464c804c679cccc5003a0f1/acf?theme=monokai)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T16:20:50.337

很确定只是一个解析然后输出会以你想要的格式给你：

```
#parseDateTime(REReplace("2012-05-17T17:35:44.000Z", "(\d{4})-?(\d{2})-?(\d{2})T([\d:]+).*", "\1-\2-\3 \4"))# 
```

编辑：已修复并经过测试。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T10:20:54.997

我认为这是一个更完整的解决方案和优雅的解决方案：

```
 <cffunction name="ConvertISOToDateTime" access="private" returntype="date">
    <cfargument name="ISODateString" required="yes" type="string" hint="Properly formed ISO-8601 dateTime String">
    <cfscript>
        // time formats have 2 ways of showing themselves: 1994-11-05T13:15:30Z UTC format OR 1994-11-05T08:15:30-05:00
        local.initial_date = parseDateTime(REReplace(ISODateString, "(\d{4})-?(\d{2})-?(\d{2})T([\d:]+).*", "\1-\2-\3 \4"));
        // If not in UTC format then we need to
        if (right(arguments.ISODateString, 1) neq "Z") {
            local.timeModifier = "";
            //Now we determine if we are adding or deleting the the time modifier.
            if (ISODateString contains '+' and listlen(listrest(ISODateString,"+"),":") eq 2){
                local.timeModifier = listrest(ISODateString,"+");
                local.multiplier = 1; // Add
            } else if (listlen(listlast(ISODateString,"-"),":") eq 2) {
                local.timeModifier = listlast(ISODateString,"-");
                local.multiplier = -1; // Delete
            }
            if (len(local.timeModifier)){
                local.initial_date = dateAdd("h", val(listfirst(local.timeModifier,":"))*local.multiplier,local.initial_date);
                local.initial_date =  dateAdd("m", val(listlast(local.timeModifier,":"))*local.multiplier,local.initial_date);
            }
        }
        return local.initial_date;
    </cfscript>
</cffunction> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-23T17:17:33.713

从 CF2016 开始，Tim Sylvester 的回答变成：

```
<cfset string = "1997-07-16T19:20:30+01:00">
<cfset date = parseDateTime(string, "yyyy-MM-dd'T'HH:nn:ssX")> 
```

该`mm`掩码已被弃用并替换`nn`为 CF10 和 CF11 不可用。

**警告**：`mm`掩码行为也随着 CF2016（+ 2018 和 2021）而改变，前面的示例将输出`{ts '1998-08-16 18:00:30'}`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T22:38:41.180

[该日期字符串采用 ISO 格式，这里](http://www.bennadel.com/blog/811-Converting-ISO-Date-Time-To-ColdFusion-Date-Time.htm)有一个很好的示例说明如何将其转换为 CF 日期对象：

```
...
<cfreturn ARGUMENTS.Date.ReplaceFirst(
    "^.*?(\d{4})-?(\d{2})-?(\d{2})T([\d:]+).*$",
    "$1-$2-$3 $4"
    ) /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T15:24:44.243

使用`createOdbcDate`功能。最好在查询中进行比较。

```
<cfquery name="GetVisits" >
    SELECT v.ExecutiveID, eu.firstname, eu.lastname from Visits where
v.visitDate between #CreateODBCDate(DateFrom)#
        AND  #CreateODBCDate(DateTo)#
</cfquery> 
```

# visual-studio - devenv.exe 选项卡式文档

> ID：10643951
> 
> 赞同：2
> 
> 时间：2012-05-17T21:44:07.630
> 
> 标签：visual-studio, visual-studio-2010, devenv, winscp

我想知道是否有任何方法可以在 Microsoft Visual Studio 2010 编辑器中以选项卡的方式打开两个文档。我目前正在使用以下命令行选项。

```
devenv.exe "filename1.txt"
devenv.exe "filename2.txt" 
```

但它会打开两个单独的编辑器实例。我希望第二个文件在已打开的编辑器中以选项卡的形式打开。我使用了`/mditabs`开关，但它似乎没有完成这项工作。

```
devenv.exe /mditabs "filename1.txt"
devenv.exe /mditabs "filename2.txt" 
```

PS 我在 WinSCP 中使用 Visual Studio 编辑器作为外部编辑器。另外，我不能在一个命令行中同时传递两个文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T23:52:27.283

使用`/Edit`开关在 VS2010 的运行实例中打开文件。如果没有实例正在运行，则会启动一个新实例并将文件加载到其中。例如：

> `devenv.exe /Edit "filename1.txt"`

在 WinSCP 中一次选择一个文件，然后对该文件使用编辑命令；如果您在 WinSCP 中选择多个文件并使用 WinSCP 编辑命令，则每个文件都会在单独的 VS 2010 实例中打开。

*功能*：要查看 VS2010 的命令行用法和开关，请打开命令行窗口并输入

```
devenv.exe /? 
```

# forms - 范围和颜色的 HTML5 输入类型不能为空。如果他们镜像的数据库列为空怎么办？

> ID：10643954
> 
> 赞同：8
> 
> 时间：2012-05-17T21:44:34.063
> 
> 标签：forms, html, input, colors, range

在相对较新的 HTML 表单控件中，有 'type=range' 和 'type=color' 控件。该规范指出，当提交包含此类控件的表单时，将始终为这些控件提交一个值。他们永远不会是空的。

这与 type=text 控件和其他类似控件不同，它们的值确实可以是空字符串。

似乎不可能使用范围和颜色控件来反映数据库中可为空列的状态。

有什么解决方法吗？

编辑：此链接在此处指定行为：[HTML5 Specification](http://www.w3.org/TR/2012/WD-html5-20120329/states-of-the-type-attribute.html#range-state-type-range)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-13T05:41:14.940

对于范围，您可以将范围的值设置为超出范围的数字（当然，如果您希望用户不要弄乱它）：

```
var range = document.getElementById('rangeInput');
 //let's say your range is 0-10

 rangeInput.style.display = 'none';

 range.min = -1;

 range.value = -1;
 //-1 would be your "null" value

 //now, if you wanted the user to be able to edit the null range...

 range.style.display = '';

 range.addEventListener('change',function(){
     if(this.value < 0) this.value = 0;
     //this should keep people from setting it to "null"
 }); 
```

我仍然不确定您将如何为颜色输入执行此操作，因为它没有“越界”。

# android - 使用按钮定位自己的应用程序

> ID：10643956
> 
> 赞同：0
> 
> 时间：2012-05-17T21:44:51.193
> 
> 标签：android, gps, android-maps

我正在尝试开发一个具有按钮的应用程序，单击该按钮应将我带到地图中的当前位置。我的主要困惑是 OnClick 侦听器和地图事件。我哪里可能出错？

这是我的代码：-

```
package geopoint.ns;

import java.io.IOException;
import java.util.List;
import java.util.Locale;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Point;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class GeoPointActivity extends MapActivity {

MapView mapView; 
MapController mc;
GeoPoint p;
TextView tvlat,tvlong;

protected LocationManager locationManager;
private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds
Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);
    //mapView.displayZoomControls(true);
    mapView.setStreetView(false);
    mapView.setSatellite(false);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

    tvlat = (TextView) findViewById(R.layout.main);
    tvlong = (TextView) findViewById(R.layout.main);
    mc = mapView.getController();
    addListenerOnButton();

}

public void addListenerOnButton() {
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            getLoc();
        }
    });
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

class MapOverlay extends com.google.android.maps.Overlay implements OnClickListener
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   
         //---when user lifts his finger---
        if (event.getAction() == 1) {                
            GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());

            Geocoder geoCoder = new Geocoder(
                    getBaseContext(), Locale.getDefault());

            try 
            {
                List<Address> addresses = geoCoder.getFromLocation(
                    p.getLatitudeE6()/1E6, 
                    p.getLongitudeE6()/1E6, 1);

                String add = "";
                if (addresses.size() > 0) 
                {
                    for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                         i++)
                       add += addresses.get(0).getAddressLine(i) + "\n";
                }

                Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
            }
            catch (IOException e) {                
                e.printStackTrace();
            }
            return true;
            //Toast.makeText(getBaseContext(), p.getLatitudeE6() / 1E6 + "," +p.getLongitudeE6() /1E6 ,Toast.LENGTH_SHORT).show();
        }
        else
            return false;
    }

    @Override
    public void onClick(View arg0) {
            getLoc();
        }
}

protected void getLoc () {
    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    double lat = location.getLatitude();
    double lng = location.getLongitude();

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6)); 
    mc.animateTo(p);
    mc.setZoom(17); 
}

 public class MyLocationListener implements LocationListener
 {
     @Override
     public void onLocationChanged(Location loc)
     {
     loc.getLatitude();
     loc.getLongitude();
     String Text = "My current location is: " +
     "Latitud = " + loc.getLatitude() +
     "Longitud = " + loc.getLongitude();
     Toast.makeText( getApplicationContext(),
     Text,
     Toast.LENGTH_SHORT).show();

     tvlat.setText(""+loc.getLatitude());
     tvlong.setText(""+loc.getLongitude());

     this.gpsCurrentLocation();
     }

     public void gpsCurrentLocation()
     {
     String coordinates[] = {""+tvlat.getText(), ""+tvlong.getText()};

     double lat = Double.parseDouble(coordinates[0]);
     double lng = Double.parseDouble(coordinates[1]);

     GeoPoint p = new GeoPoint(
     (int) (lat * 1E6),
     (int) (lng * 1E6));

     mc.animateTo(p);
     mc.setZoom(7);

     mapView.invalidate();

     }

     @Override
     public void onProviderDisabled(String provider)
     {
         Toast.makeText( getApplicationContext(),
         "Gps Disabled",
         Toast.LENGTH_SHORT ).show();
     }

     @Override
     public void onProviderEnabled(String provider)
     {
         Toast.makeText( getApplicationContext(),
         "Gps Enabled",
         Toast.LENGTH_SHORT).show();
     }

     @Override
     public void onStatusChanged(String provider, int status, Bundle extras)
     {

     }

 } 
```

}

在清单文件中，我拥有 GPS（ACCESS_FINE_LOCATION、ACCESS_MOCK_LOCATION 和 ACCESS_COARSE_LOCATION）和 Internet 所需的所有权限。

我的堆栈跟踪：-

```
 05-18 16:26:50.946: W/dalvikvm(381): Unable to resolve superclass of Lgeopoint/ns/GeoPointActivity; (22)
    05-18 16:26:51.026: W/dalvikvm(381): Link of class 'Lgeopoint/ns/GeoPointActivity;' failed
    05-18 16:26:51.066: D/AndroidRuntime(381): Shutting down VM
    05-18 16:26:51.066: W/dalvikvm(381): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    05-18 16:26:51.206: E/AndroidRuntime(381): FATAL EXCEPTION: main
    05-18 16:26:51.206: E/AndroidRuntime(381): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{geopoint.ns/geopoint.ns.GeoPointActivity}: java.lang.ClassNotFoundException: geopoint.ns.GeoPointActivity in loader dalvik.system.PathClassLoader[/data/app/geopoint.ns-2.apk]
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.os.Handler.dispatchMessage(Handler.java:99)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.os.Looper.loop(Looper.java:130)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at java.lang.reflect.Method.invokeNative(Native Method)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at java.lang.reflect.Method.invoke(Method.java:507)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at dalvik.system.NativeStart.main(Native Method)
    05-18 16:26:51.206: E/AndroidRuntime(381): Caused by: java.lang.ClassNotFoundException: geopoint.ns.GeoPointActivity in loader dalvik.system.PathClassLoader[/data/app/geopoint.ns-2.apk]
    05-18 16:26:51.206: E/AndroidRuntime(381):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    05-18 16:26:51.206: E/AndroidRuntime(381):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
    05-18 16:26:51.206: E/AndroidRuntime(381):  ... 11 more
    05-18 16:26:53.815: I/Process(381): Sending signal. PID: 381 SIG: 9 
```

是我在做任何逻辑错误吗？

更新（AndroidManifest.xml）：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="geopoint.ns"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="10" />
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <activity
                android:name=".GeoPointActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

布局xml文件： http: [//pastebin.com/q176i5d2](http://pastebin.com/q176i5d2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:31:51.447

您没有将 Google 地图库添加到清单中的项目中，

**在应用程序标签下**添加此代码

 **```
<uses-library android:required="true" android:name="com.google.android.maps" /> 
```

并确保您的项目目标 SDK 是 Google API，而不是普通的 SDK。

祝你好运..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:53:20.027

您是否在 Android 清单文件中添加了活动？**

# python - python中的多个条件语法

> ID：10643960
> 
> 赞同：0
> 
> 时间：2012-05-17T21:45:05.363
> 
> 标签：python, syntax, logic

我有以下代码条件

```
 if len(content_tags) >= 1 or tags_irrelevant == 'yes'\
   and lengthproblem == 0\
   and guess_language.guessLanguage(testlanguage) == 'en'\
   and len(sentences) >= 3: 
```

问题在于逻辑和语法。我希望这被评估为 false 不管是否`if len(sentences)`不是`>= 3`。但这并没有发生。我想我可能在某处需要一些括号或其他东西。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:51:52.427

[`and`具有比 更高`or`](http://docs.python.org/reference/expressions.html#summary)的优先级，因此`and`首先评估 s，然后评估`or`，这意味着您在文本中描述的逻辑不是您在代码中描述的逻辑。

如果您希望将第`or`一个案例视为单个案例，请在其周围使用括号。

```
if (len(content_tags) >= 1 or tags_irrelevant == 'yes')\
   and lengthproblem == 0\
   and guess_language.guessLanguage(testlanguage) == 'en'\
   and len(sentences) >= 3: 
```

也就是说，您还没有向我们详细解释您*想要*从中获得的逻辑行为，所以我建议您坐下来好好地解决这个问题。

如果你需要测试你的逻辑，那么使用一个简单的测试函数打印出来，这样你就知道什么时候被评估了。

```
>>> def test(bool):
...    print(bool)
...    return bool
... 
>>> if test(1) or test(2) and test(3) and test(4) and test(False):
...    print("Success")
... 
1
Success
>>> if (test(1) or test(2)) and test(3) and test(4) and test(False):
...     print("Success")
... 
1
3
4
False 
```

你可以清楚地看到第一个被评估的是第一个`and`，然后它会尝试评估左边的 the`and`等等`or`。它尝试对此进行评估，获取`True`第一个值，然后短路，返回`True`到`and`，它也短路，返回`True`（嗯，实际上是 1，但`True`出于本示例的目的）。当括号在那里时，它会以您想要的方式进行评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:52:17.087

该`or`部分导致您的问题。只需封装它：

```
if (len(content_tags) >= 1 or tags_irrelevant == 'yes')\
   and lengthproblem == 0\
   and guess_language.guessLanguage(testlanguage) == 'en'\
   and len(sentences) >= 3: 
```

* * *

在这种情况下，我过去倾向于使用中间布尔值将最终的逻辑语句抽象到更高的层次，例如：

```
multi_tags = len(content_tags) >= 1
ignore_tags = tags_irrelevant == 'yes'
tags_ok = multi_tags or ignore_tags 

length_ok = lengthproblem == 0
is_english = guess_language.guessLanguage(testlanguage) == 'en'
enough_sentences = len(sentences) >= 3

# Notice how much easier the following is to read!
if tags_ok and length_ok and is_english and enough_sentences:
    pass 
```

[这不是从博客中学到的，而是从调试可怕的、几十年前的遗留代码的痛苦中学到的，这些代码在 if 语句和 while 循环终止条件中散布着大量的条件子句。哦，反斜杠也消失了。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T22:01:43.863

根据[python 运算符优先级规则](http://docs.python.org/reference/expressions.html#summary)，**and**运算符优先于**or**运算符。也就是说，如果您希望*len(sentences) >= 3*部分主导答案，则应将其余部分隔离在括号中：

```
if (len(content_tags) >= 1 or tags_irrelevant == 'yes' and lengthproblem ==0 and guess_language.guessLanguage(testlanguage) =='en') and len(sentences) >= 3 
```

# http - node.js 的 ECONNREFUSED 错误在其他客户端中不会发生

> ID：10643965
> 
> 赞同：27
> 
> 时间：2012-05-17T21:45:24.100
> 
> 标签：http, node.js

我正在向客户`http`提出请求，但出现错误。当我使用浏览器或发出看似相同的请求时，它工作得很好`node.js``ECONNREFUSED``curl(1)`

这是节点请求：

```
var options = {
  host: 'localhost',
  port: 8080,
  path: '/explorers/1.0/agegroup',
  method: 'GET'
};

var req = http.request(options, function(res) {
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log(e);
});

req.end(); 
```

它给了我错误：

```
{ [Error: connect ECONNREFUSED]
  code: 'ECONNREFUSED',
  errno: 'ECONNREFUSED',
  syscall: 'connect' } 
```

但是当我向不同的客户提出相同的请求时（`curl`在这种情况下）：

```
$ curl http://localhost:8080/explorers/1.0/agegroup
{... response JSON ...} 
```

其他注意事项：

*   我尝试将主机更改为 www.google.com 并将端口更改为 80，并且节点成功连接

*   我已经尝试更改服务器的端口，我仍然可以向所有客户端发出请求，但 node.js （仍然会得到`ECONNREFUSED`）

*   我要连接的服务器是[CherryPy WSGI Server](https://github.com/od-eon/cherrypy-wsgiserver/blob/master/wsgiserver/__init__.py)。当我尝试连接到`node`localhost:8080 上的服务器时，它工作正常，这让我认为这是服务器的问题，除了其他客户端使用 CherryPy 服务器。

*   我尝试使用与浏览器相同的标头，但这不起作用，而且问题似乎出在 TCP 级别，因此 HTTP 标头应该不是问题。

我的`node`请求有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-27T07:39:56.307

我不同意索曼的不同意见。

我一直在努力解决这个问题，但是，当被调用时，nodejs v0.10.24 和 v0.10.25 确实拒绝连接到 PHP 5.4 开发服务器（PHP 的命令行服务器）：

```
php -S localhost:8088 
```

浏览器，curl，其他一切都连接得很好。然而，果然，将绑定地址更改为：

```
php -S 127.0.0.1:8088 
```

并且使用 xmlrpc 的 nodejs 连接得很好。这发生在 Mac OS X 10.9.1 上。很奇怪。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-18T03:10:22.283

我想有时你只需要远离问题......

我找到了一个解决方案，但它似乎没有回答这个问题，我也不是很喜欢它。

我将 CherryPy 服务器配置更改为 service at`127.0.0.1`而不是`localhost`，并且`node`客户端开始工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-28T18:41:07.353

我刚刚遇到了同样的问题。

请注意，默认情况下，Windows 7 不包括 localhost 条目`C:\Windows\System32\drivers\etc\hosts`（[维基百科参考](https://en.wikipedia.org/wiki/Hosts_%28file%29#File%20content)）

为 localhost 添加条目对 Node.js (0.10.25) 没有影响，因为它显然完全跳过了 hosts 文件。

改为使用 127.0.0.1 作为本地地址，这将适用于您的主机文件中的任何内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-30T06:46:09.170

我有同样的问题。我可以通过将 localhost 或 127.0.0.1 替换为系统的 IP 地址来解决它（使用 ifconfig 作为 IP 地址）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T11:08:05.367

我在访问第三方网址时遇到了同样的问题。我尝试同时使用 dns (subdomain.domain.com) 和 ip (XXX.XXX.XXX.XXX) 但它不起作用。

经过一番挣扎，后来我意识到这是服务器（subdomain.domain.com）端的问题，它没有响应并出现故障。

我不同意这是 localhost / 127.0.0.1 （或域名与 IP 地址）的问题。（在上述情况下，肯定是主机映射不正确的情况）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-07T09:38:53.210

$ ifconfig

docker0 链接封装：以太网 HWaddr ....
inet 地址：**172.17.0.1** Bcast：172.17.255.255 掩码：255.255.0.0 .....

var dbSettings = {
主机：' **172.17.0.1** '，
用户：'root'，
密码：'.......'，
数据库：'.......'，
端口：'3306'
};

码头IP - >主机

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-13T13:09:46.170

最适合我的是使用与我的 xampp 相同的端口。

# jquery - 在点击 w/jQuery 时选择与 TD 对应的 div

> ID：10643966
> 
> 赞同：1
> 
> 时间：2012-05-17T21:45:24.547
> 
> 标签：jquery

我有一张桌子。当我点击（在）一个 TD 时，我需要显示一个隐藏的 div，其中包含更多的 div。该隐藏容器内的每个 div 都有一个文本值。我需要选择与点击的 TD 对应的值。

**JS**

```
$(".clickme").click(function(){
    $("#hiddenDiv").hide().fadeIn(200);

    if ($(this).text() == $("#hiddenDiv div").text()) {
         //  HOW DO I SELECT THAT DIV? 
         // matched div .css("color", "red");  
    }

}); 
```

**HTML**

```
<table id="myTbl">
<tr>
  <td></td>
  <td class="clickme">Left</td>  
</tr>
</table>

<div id="hiddenDiv" style="display:none">
  <div>Straight</div>
  <div>Left</div>
  <div>Right</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:48:11.137

使用*:contains*选择正确的一个：

```
$("#hiddenDiv div:contains(" + $(this).text() + ")") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:55:23.133

**[演示 jsBIn](http://jsbin.com/uvukaz/2/edit#javascript,html,live)**

```
$(".clickme").click(function(){

    var thisText = $(this).text();
    var $targetEl =  $('#hiddenDiv > div:contains('+thisText+')');

    if( $targetEl.length > 0 ){  // if exists
          $("#hiddenDiv").hide().fadeIn(200);
         $targetEl.css({color:'red'});
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:48:42.637

```
$(".clickme").click(function() {
    $("#hiddenDiv").hide().fadeIn(200);
    var $this = $(this);
    $("#hiddenDiv div").filter(function() {
        return $(this).text() == $this.text();
    }).css("color", "red").show();
});​ 
```

# z3 - sort Seq的定义

> ID：10643969
> 
> 赞同：1
> 
> 时间：2012-05-17T21:45:33.260
> 
> 标签：z3

我想知道sort Seq的定义是什么。我在 Z3 SMT 2.0 指南中找不到它的定义。我意识到 Seq 已经定义了，因为我试图定义一个名为 Seq 的排序。是否有一些与 Seq 相关的断言？

谢谢！！

马克西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:14:35.180

是的`Seq`，，`RegEx`（正则表达式）和`FP`（浮点数）在 Z3 4.0 中是“保留的”。它们尚未实施，但将在未来的版本中提供。例如，Z3 将具有内置函数，例如：、`seq-last`和许多其他函数。在 Z3 4.0 中，这些排序和函数只是“存根”，其行为类似于未解释的排序和函数。这就是为什么我们没有他们的任何文件。`seq-concat``seq-length`

# android - java.lang.RuntimeException：无法实例化活动

> ID：10643970
> 
> 赞同：3
> 
> 时间：2012-05-17T21:45:42.170
> 
> 标签：android, manifest, crash

我已经尝试了所有可能的解决方案来解决这个问题，但似乎没有任何效果......当我将我的 SDK 工具版本从 r16 更新到 r19 并将 SDK 平台工具版本更新到 r11 时，问题就出现了。我将所有类都包含在清单中，并且在此更新之前一切正常。你知道如何解决这个问题吗？（我从这个网站和其他网站尝试了很多解决方案......）

这是我的错误日志：

```
05-17 23:29:10.888: E/AndroidRuntime(20945): FATAL EXCEPTION: main
05-17 23:29:10.888: E/AndroidRuntime(20945): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.bugfullabs.depress/com.bugfullabs.depress.Splash}: java.lang.ClassNotFoundException: com.bugfullabs.depress.Splash
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.os.Looper.loop(Looper.java:154)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread.main(ActivityThread.java:4944)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at java.lang.reflect.Method.invoke(Method.java:511)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at dalvik.system.NativeStart.main(Native Method)
05-17 23:29:10.888: E/AndroidRuntime(20945): Caused by: java.lang.ClassNotFoundException: com.bugfullabs.depress.Splash
05-17 23:29:10.888: E/AndroidRuntime(20945):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.Instrumentation.newActivity(Instrumentation.java:1039)
05-17 23:29:10.888: E/AndroidRuntime(20945):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2101)
05-17 23:29:10.888: E/AndroidRuntime(20945):    ... 11 more 
```

这是我的 AndroidManifest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bugfullabs.depress"
    android:versionCode="2"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DEpressActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".SettingsMenu"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".Credits"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".game.LevelSelect"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".game.GameActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".game.FinishScreen"
            android:label="@string/app_name" >
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T22:33:21.850

它找不到类：`com.bugfullabs.depress.Splash.`首先要确保包名中没有拼写错误。（似乎应该是bugfullaps）

接下来，Splash 类是否包含在库中？如果是这样，请检查您的 Java 构建路径配置，并确保在 Order and Export 选项卡下检查了您的库文件，以便将其与应用程序一起导出。

编辑：刚刚记住，如果您有一个`lib`目录，请将其重命名为`libs.`That's one of things that changed from the version you are using。祝你好运！

# jsf-2 - 删除richFaces数据表上的链接

> ID：10643978
> 
> 赞同：0
> 
> 时间：2012-05-17T21:45:57.273
> 
> 标签：jsf-2, datatable, richfaces

我希望能够从我的数据库中删除一个用户。该接口具有类似于以下代码的内容，但该`action`方法永远不会被调用。我错过了什么？

```
 <h:form id="formAdministracionUsuarios">
            <br/>
            <rich:panel style="width: 800px">
                <f:facet name="header">
                    <h:outputText value="Administración de usuarios"/>
                </f:facet>

                <rich:dataScroller for="usersTable" fastControls="hide"
                                   boundaryControls="hide" />
                <h:panelGroup/>
                <rich:dataTable id="usersTable" rows="10" var="user"
                                value="#{administrationBean.tablaUsuarios}">
                    <f:facet name="header">
                        <rich:columnGroup>
                            <rich:column>
                                <h:outputText value="Nombre"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Usuario"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Dependencia"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Email"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Tipo usuario"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Tipo dependencia"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Fecha límite"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Eliminar"/>
                            </rich:column>
                        </rich:columnGroup>
                    </f:facet>
                    <rich:column>
                        <h:outputText value="#{user.nombre}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.usuario}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.dependencia}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.correo}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.tipoUsuario}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.tipoDependencia}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.fechaLimiteCarga}"/>
                    </rich:column>
                    <rich:column>
                        <a4j:commandLink value="Eliminar" execute="@form"
                                         action="#{administrationBean.doEliminarUsuario(user.usuario)}"/>
                    </rich:column>
                </rich:dataTable>
                <a4j:outputPanel>
                    <br/><br/>
                    <fieldset>                                
                        <legend>Datos del usuario</legend>
                        <h:panelGrid id="camposUsuario" columns="2">
                            <h:outputLabel value="Nombre" for="queryNombre"/>
                            <h:outputLabel value="Usuario" for="queryUsuario"/>
                            <h:inputText id="queryNombre" required="true"
                                         requiredMessage="Introduzca el nombre." immediate="true"
                                         value="#{administrationBean.queryNombre}">
                                <f:ajax event="keypress" 
                                        listener="#{administrationBean.doClearMessages}"
                                        render="datosUsuario"/>
                            </h:inputText>
                            <h:inputText id="queryUsuario" required="true"
                                         requiredMessage="Introduzca el nombre de usuario."
                                         value="#{administrationBean.queryUsuario}">
                            </h:inputText>                                
                            <rich:message ajaxRendered="true" for="queryNombre"/>
                            <rich:message ajaxRendered="true" for="queryUsuario"/>

                            <h:outputLabel value="Contraseña:" for="queryContrasena"/>
                            <h:outputLabel value="Dependencia:" for="queryDependencia"/>
                            <h:inputSecret id="queryContrasena" required="true"
                                           requiredMessage="Introduzca la contraseña."
                                           value="#{administrationBean.queryContrasena}"/>
                            <rich:select id="queryDependencia" required="true"
                                         requiredMessage="Seleccione la dependencia."
                                         defaultLabel="Dependencia..."
                                         value="#{administrationBean.queryDependencia}">
                                <f:selectItems value="#{administrationBean.selectDependencia}"/>
                            </rich:select>
                            <rich:message ajaxRendered="true" for="queryContrasena"/>
                            <rich:message ajaxRendered="true" for="queryDependencia"/>                                

                            <h:outputLabel value="Correo" for="queryCorreo"/>
                            <h:outputLabel value="Fecha límite:" for="queryFechaLimite"/>
                            <h:inputText id="queryCorreo" required="true"
                                         requiredMessage="Introduzca el correo."
                                         value="#{administrationBean.queryCorreo}"/>
                            <rich:calendar id="queryFechaLimite" datePattern="dd/MM/yyyy"
                                           value="#{administrationBean.queryFechaLimite}"/>
                            <rich:message ajaxRendered="true" for="queryCorreo"/>

                        </h:panelGrid>
                        <h:panelGrid columns="3">
                            <a4j:commandButton value="Agregar" execute="@form"
                                               render="datosUsuario usersTable camposUsuario"
                                               action="#{administrationBean.doRegistrarUsuario}"/>
                        </h:panelGrid>
                        <a4j:outputPanel id="datosUsuario" style="font-size: 14px; color: #D17100">
                            <h:outputText rendered="#{administrationBean.alreadyRegistered}"
                                          value="Usuario ya existe !"/>
                            <h:outputText rendered="#{administrationBean.registrationComplete}"
                                          value="Usuario registrado !"/>
                        </a4j:outputPanel>
                    </fieldset>
                </a4j:outputPanel>
            </rich:panel>

            <br/>
        </h:form> 
```

**更新** 发布完整表格的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:05:31.383

我找到了。整个表格包括`dataTable`材料和新用户材料的注册，即`inputFields`.

发生的事情是，当 . 中的方法`h:commandLink`被调用时，由于`required`在`inputFields`.

我所做的是将我的东西分成两种形式，第一种形式`dataTable`相关的东西和第二种形式的`InputFields`东西

这样我就避免了 inputFields 中的必需属性，因此现在正在调用该`action`方法。`commandLink`

这是它现在的样子：

```
 <h:form id="formUsuariosRegistrados">
                <rich:dataScroller for="usersTable" fastControls="hide"
                                   boundaryControls="hide" />
                <rich:dataTable id="usersTable" rows="10" var="user"
                                value="#{administrationBean.tablaUsuarios}">
                    <f:facet name="header">
                        <rich:columnGroup>
                            <rich:column>
                                <h:outputText value="Nombre"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Usuario"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Dependencia"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Email"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Tipo usuario"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Tipo dependencia"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value="Fecha límite"/>
                            </rich:column>
                            <rich:column>
                                <h:outputText value=""/>
                            </rich:column>
                        </rich:columnGroup>
                    </f:facet>
                    <rich:column>
                        <h:outputText value="#{user.nombre}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.usuario}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.dependencia}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.correo}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.tipoUsuario}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.tipoDependencia}"/>
                    </rich:column>
                    <rich:column>
                        <h:outputText value="#{user.fechaLimiteCarga}"/>
                    </rich:column>
                    <rich:column>
                        <a4j:commandLink value="Eliminar"
                                         render="@form :formFechaLimite :formModificarContrasena"
                                         actionListener="#{administrationBean.doEliminarUsuario(user.usuario)}"/>
                    </rich:column>
                </rich:dataTable>
            </h:form>

            <br/>

                <h:form id="formRegistroUsuarios">
                    <a4j:outputPanel>
                        <br/><br/>
                        <fieldset style="width: 350px" >
                            <legend>Datos del usuario</legend>
                            <h:panelGrid id="camposUsuario" columns="2">
                                <h:outputLabel value="Nombre" for="queryNombre"/>
                                <h:outputLabel value="Usuario" for="queryUsuario"/>
                                <h:inputText id="queryNombre" required="true"
                                             requiredMessage="Introduzca el nombre." immediate="true"
                                             value="#{administrationBean.queryNombre}">
                                    <f:ajax event="focus" 
                                            listener="#{administrationBean.doClearMessages}"
                                            render="registroCompletado"/>
                                </h:inputText>
                                <h:inputText id="queryUsuario" required="true"
                                             requiredMessage="Introduzca el nombre de usuario."
                                             value="#{administrationBean.queryUsuario}">
                                </h:inputText>                                
                                <rich:message ajaxRendered="true" for="queryNombre"/>
                                <rich:message ajaxRendered="true" for="queryUsuario"/>

                                <h:outputLabel value="Contraseña:" for="queryContrasena"/>
                                <h:outputLabel value="Dependencia:" for="queryDependencia"/>
                                <h:inputSecret id="queryContrasena" required="true"
                                               requiredMessage="Introduzca la contraseña."
                                               value="#{administrationBean.queryContrasena}"/>
                                <rich:select id="queryDependencia" required="true"
                                             requiredMessage="Seleccione la dependencia."
                                             defaultLabel="Dependencia..."
                                             value="#{administrationBean.queryDependencia}">
                                    <f:selectItems value="#{administrationBean.selectDependencia}"/>
                                </rich:select>
                                <rich:message ajaxRendered="true" for="queryContrasena"/>
                                <rich:message ajaxRendered="true" for="queryDependencia"/>                                

                                <h:outputLabel value="Correo" for="queryCorreo"/>
                                <h:outputLabel value="Fecha límite:" for="queryFechaLimite"/>
                                <h:inputText id="queryCorreo" required="true"
                                             requiredMessage="Introduzca el correo."
                                             value="#{administrationBean.queryCorreo}"/>
                                <rich:calendar id="queryFechaLimite" datePattern="dd/MM/yyyy"
                                               value="#{administrationBean.queryFechaLimite}"/>
                                <rich:message ajaxRendered="true" for="queryCorreo"/>

                            </h:panelGrid>
                            <h:panelGrid columns="3">
                                <a4j:commandButton value="Agregar" execute="@form"
                                                   render="registroCompletado :formUsuariosRegistrados camposUsuario :formFechaLimite :formModificarContrasena"
                                                   action="#{administrationBean.doRegistrarUsuario}"/>
                            </h:panelGrid>
                            <a4j:outputPanel id="registroCompletado" style="font-size: 14px; color: #D17100">
                                <h:outputText rendered="#{administrationBean.alreadyRegistered}"
                                              value="Usuario ya existe !"/>
                                <h:outputText rendered="#{administrationBean.registrationComplete}"
                                              value="Usuario registrado !"/>
                            </a4j:outputPanel>
                        </fieldset>
                    </a4j:outputPanel>
                </h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:44:35.667

如果您只想从显示的表格中删除一个用户，那么您必须使用`selection`.
然后在这种情况下 -
将你的`selection`属性设置为 -

```
selection = "#{bean.selectionTableState}" 
```

并在 bean 中声明为

```
//import for Selection
private Selection selectionTableState; 
```

然后在`action`方法中使用这个选择来获取当前用户。

```
//suppose ClassA is an object class for representing all users in the table, 
//and make sure your **tablaUsuarios** is of that ClassA type.
//so that u can catch one by selection
ClassA classA = this.tablaUsuarios.get(Integer.parseInt(this.selectionTableState.getKeys().next().toString())); 
```

这个**classA**现在有选定的用户。您只需使用 sql 查询将
用户的主要值之一发送`userID`给您即可删除用户。 我相信它会帮助你......`DAO`

# node.js - 如何从 Express 中的 http 请求中获取未解析的查询字符串

> ID：10643981
> 
> 赞同：34
> 
> 时间：2012-05-17T21:46:37.477
> 
> 标签：node.js, express

我可以使用下面的来获取查询字符串。

```
 var query_string = request.query; 
```

我需要的是未解析的原始查询字符串。我怎么得到它？对于下面的 url，查询字符串是`{ tt: 'gg' }`，我需要`tt=gg&hh=jj`等....

```
http://127.0.0.1:8065?tt=gg

Server running at http://127.0.0.1:8065
{ tt: 'gg' } 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-17T22:34:23.363

您可以按照[此](http://nodejs.org/api/http.html#http_message_url)示例使用`node`'s [URL模块：](http://nodejs.org/api/url.html#url_url_parse_urlstr_parsequerystring_slashesdenotehost)

```
require('url').parse(request.url).query 
```

例如

```
node> require('url').parse('?tt=gg').query
'tt=gg' 
```

或者直接转到网址并`substr`在`?`

```
var i = request.url.indexOf('?');
var query = request.url.substr(i+1); 
```

（这就是`require('url').parse()`引擎盖下的作用）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-24T20:53:50.773

您可以[`req.originalUrl`](https://expressjs.com/en/4x/api.html#req.originalUrl)在 express 3.x+ 中使用。（旧版本可以[`req.url`](https://nodejs.org/api/http.html#http_message_url)从节点的 http 模块使用。）这应该产生原始字符串，不包括`?`：

```
var query_index = req.originalUrl.indexOf('?');
var query_string = (query_index>=0)?req.originalUrl.slice(query_index+1):'';
// 'tt=gg&hh=jj' or '' 
```

请注意，如果您有[a`#`来表示查询的结尾](https://stackoverflow.com/questions/2924160/is-it-valid-to-have-more-than-one-question-mark-in-a-url/2924187#2924187)，它将不会被识别。

如果要将字符串传递给新 URL，则应包括`?`：

```
var query_index = req.originalUrl.indexOf('?');
var query_string = (query_index>=0)?req.originalUrl.slice(query_index):'';
// '&tt=gg&hh=jj' or ''
res.redirect('/new-route'+query_string);
// redirects to '/newroute?tt=gg&hh=jj' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-07T20:56:57.270

Express 使用[`parseurl`](https://github.com/pillarjs/parseurl)哪些存储[`_parsedUrl`](https://github.com/pillarjs/parseurl/blob/master/index.js#L54)在`request`对象中。原始[字符串查询](https://github.com/pillarjs/parseurl/blob/master/index.js#L112)可以通过[`request._parsedUrl.query`](https://github.com/pillarjs/parseurl/blob/master/index.js#L134).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-11T12:13:59.230

```
var queryString = Object.keys(request.query).map(key => key + '=' + request.query[key]).join('&'); 
```

或者

```
var queryString = require('querystring').stringify(request.query); 
```

# python - python e**(-x) OverflowError: (34, '结果太大')

> ID：10643982
> 
> 赞同：1
> 
> 时间：2012-05-17T21:46:45.867
> 
> 标签：python

python中有没有办法将小数部分截断为5位或7位？

如果没有，我怎样才能避免像 e**(-x) 数字这样的浮点数变得太大？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T22:07:37.840

要么抓住`OverflowError`或使用`decimal`模块。Python 不会假设你对溢出没问题。

```
>>> 0.0000000000000000000000000000000000000000000000000000000000000001**-30
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: (34, 'Result too large')
>>> d = decimal.Decimal(0.0000000000000000000000000000000000000000000000000000000000000001)
>>> d**-30
Decimal('1.000000000000001040827834994E+1920') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T22:28:52.273

“结果太大”并不是指数字的十进制表示中的字符数，这意味着由指数函数产生的数字足够大，足以溢出python内部用于存储浮点值的任何类型。

您需要使用不同的类型来处理浮点计算，或者重新编写代码以使 e**(-x) 不会上溢或下溢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T14:13:26.017

这似乎有效

```
from decimal import *
getcontext().prec = 7
math.exp(- Decimal(x)) 
```

# iphone - 如何将 NSdata 从一部 iPhone 传输到另一部

> ID：10643985
> 
> 赞同：1
> 
> 时间：2012-05-17T21:47:28.933
> 
> 标签：iphone, ios, xcode

如何将 NSData 对象从 1 部 iPhone 转移到另一部？（这是我希望从 iphone #2 播放的音频）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:57:14.463

当然，有多种方法可以实现这一点。

我的建议是查看 Apple 的[GameKit](http://developer.apple.com/library/ios/ipad/#documentation/GameKit/Reference/GameKit_Collection/_index.html)库。这使得建立与另一台 iOS 设备的连接变得微不足道。您可以通过蓝牙或 Wifi 进行连接（如果您需要做的只是“触发”两个设备上的应用程序包中已经存在的声音，蓝牙可以正常工作 - 如果您确实需要传输声音文件，您可能想要使用 Wifi 连接）。无论哪种情况，您都必须自己实现实际的传输机制/协议。

另一种选择是使用 Bonjour 并通过 TCP/IP 传递您的数据。

您可能会发现本教程很有帮助： [iPhone 上的网络和 Bonjour](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:57:37.110

你可以使用[GameKit](http://developer.apple.com/library/ios/ipad/#documentation/GameKit/Reference/GameKit_Collection/_index.html)框架，你可以使用蓝牙在 iOS 设备之间发送数据。查看[Game Kit 编程指南](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T01:07:11.020

选项： 1\. Gamekit Framework 2\. 看开源应用“Bump”

# ios - 如何在 iOS 4.x 中实现 Twitter SSO？

> ID：10643991
> 
> 赞同：1
> 
> 时间：2012-05-17T21:47:51.867
> 
> 标签：ios, ios4, twitter

在 iOS 5 中，我们提供了一种访问 Twitter 帐户的好方法，因此实现了单点登录机制。

参考：http: [//developer.apple.com/library/ios/#samplecode/Tweeting/Listings/Tweeting_TweetingViewController_m.html](http://developer.apple.com/library/ios/#samplecode/Tweeting/Listings/Tweeting_TweetingViewController_m.html)

但是，如果您想分发可以在 iOS 4.x 设备上运行的应用程序会发生什么？

是否有图书馆可以这样做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:53:38.960

这是我在 iOS 4+ 应用程序中用于 Twitter 的内容：[https ://github.com/bengottlieb/Twitter-OAuth-iPhone](https://github.com/bengottlieb/Twitter-OAuth-iPhone)

您不会像在 iOS 5 中那样直接从操作系统获取 Twitter 凭据，但是一旦用户输入它们，它将针对 twitter 进行身份验证。因此，如果您将用户的 Twitter 帐户与您的应用程序中的帐户相关联，这将允许您对其进行身份验证。

然后只为你的 iOS 4 用户使用这个库，为 iOS 5 用户使用 iOS Twitter 框架。

# fonts - 从这个网站识别字体？

> ID：10643992
> 
> 赞同：-3
> 
> 时间：2012-05-17T21:47:55.533
> 
> 标签：fonts

我希望有人能认出网站[http://www.dineinkelowna.com](http://www.dineinkelowna.com)上的字体——“Dine In”后面的“Kelowna”是我要找的字体。我前一阵子做了这个设计，但不知道它是什么字体（源文件不见了）。任何帮助是极大的赞赏。

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:08:55.313

徽章。

[http://www.linotype.com/45702/InsigniaStdRoman-product.html](http://www.linotype.com/45702/InsigniaStdRoman-product.html)

在“示例文本”框中键入 Kelowna。这是现场。

对这样的文本使用 Identifont。[http://www.identifont.com/](http://www.identifont.com/)

# jquery - Jquery如何在单击导航时停止刷新

> ID：10643994
> 
> 赞同：1
> 
> 时间：2012-05-17T21:48:13.887
> 
> 标签：jquery, html, refresh

对不起，我的英语不好...当我点击按钮时，我在 jquery 中遇到问题是刷新导航...请有人帮助我:)

演示：

[http://jsfiddle.net/4H942/2/](http://jsfiddle.net/4H942/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T21:50:48.333

如果您在锚标记上使用点击事件，则需要使用`preventDefault`. 例如：

```
$('.3').click(function(e){
    e.preventDefault();
    $('body').animate({
        scrollTop: $(".middle").offset().top
    }, 2000);                   
}); 
```

有关如何工作的更多信息`preventDefault`：[jQuery - event.preventDefault()](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T21:53:44.233

如果不确切知道问题出在哪里，很难知道，但您可能需要 e.preventDefault() 或 e.stopPropagation() 例如

```
$('.button').on('click',function(e) {
     //do something
     e.preventDefault();     // stops default button action, e.g. submitting a form
     e.stopPropagation();    // stops event bubbling back to parent element
   }  
   return false;         /// stops default link action
}); 
```

其中 .button 是触发事件的元素的类。请注意，这些是您可能遇到的问题的示例，但在不知道您遇到的问题的情况下，我不能说哪个（如果有的话）会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T21:51:58.563

您可以通过添加`return false;` 到 jQuery 中的 click 函数来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T14:08:01.290

当您在表单中单击提交按钮时，经常会发生这种情况，以防止浏览器刷新页面，只需在 HTML 中执行此操作：

```
<form onsubmit="return false;">
...
</form> 
```

如果您有一个刷新页面的按钮链接，请执行以下操作：

```
$('.myLinkOrButton').click(function(e) {
    e.preventDefault();
    ...
}); 
```

# objective-c - Xcode“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”错误

> ID：10643995
> 
> 赞同：1
> 
> 时间：2012-05-17T21:48:25.393
> 
> 标签：objective-c, compiler-errors

我对此很陌生，我正在制作我的第一个应用程序。当我尝试运行它时，xcode 说它成功了，但是模拟器只是给了我一个黑屏，我收到了这个消息。这是我的 main.m 代码：

```
 @implementation ViewController

    @synthesize button;

    @synthesize text;

    - (IBAction)pushButton:(id)sender 
    {
        CGRect webRect=CGRectMake(10, 10, 2048, 1536);
        UIWebView *myWebview = [[UIWebView alloc] initWithFrame:webRect];
        myWebview.scalesPageToFit = YES;
        NSURL *url = [NSURL URLWithString:@"http://www.coronetjck/schedule"];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [myWebview loadRequest:request];
         [self.view addSubview:myWebview];
     }
    //web view after pushing button

     -(void)loadView {
         NSString *moviePath = [[[NSBundle mainBundle] resourcePath]
    stringByAppendingPathComponent:@"the_people_vs._george_lucas_teaser_hd_teaser_2_640x360.mp4"];

        MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc]      initWithContentURL:[NSURL fileURLWithPath:moviePath]];

        moviePlayer.movieControlMode = MPMovieControlModeDefault;

        [[NSNotificationCenter defaultCenter] addObserver:self    selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer]; 

        [moviePlayer play];
     }
     //video

     - (void)viewDidLoad
     {
         [super viewDidLoad];
         // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)viewDidUnload
     {
         [self setButton:nil];
         [self setText:nil];
         [super viewDidUnload];
            // Release any retained subviews of the main view.
    }

     - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
          return YES;
    }

     @end 
```

我不确定我做错了什么，有人可以帮助我吗？我将不胜感激。

# ruby-on-rails - 状态机、模型验证和 RSpec

> ID：10643997
> 
> 赞同：5
> 
> 时间：2012-05-17T21:48:41.810
> 
> 标签：ruby-on-rails, ruby, rspec, state

这是我当前的类定义和规范：

```
class Event < ActiveRecord::Base

  # ...

  state_machine :initial => :not_started do

    event :game_started do
      transition :not_started => :in_progress
    end

    event :game_ended do
      transition :in_progress => :final
    end

    event :game_postponed do
      transition [:not_started, :in_progress] => :postponed
    end

    state :not_started, :in_progress, :postponed do
      validate :end_time_before_final
    end
  end

  def end_time_before_final
    return if end_time.blank?
    errors.add :end_time, "must be nil until event is final" if end_time.present?
  end

end

describe Event do
  context 'not started, in progress or postponed' do
    describe '.end_time_before_final' do
      ['not_started', 'in_progress', 'postponed'].each do |state|
        it 'should not allow end_time to be present' do
          event = Event.new(state: state, end_time: Time.now.utc)
          event.valid?
          event.errors[:end_time].size.should == 1
          event.errors[:end_time].should == ['must be nil until event is final']
        end
      end
    end
  end
end 
```

当我运行规范时，我得到了两次失败和一次成功。我不知道为什么。对于其中两种状态，方法中的`return if end_time.blank?`语句在`end_time_before_final`每次都应该为假时评估为真。“推迟”是唯一似乎通过的状态。关于这里可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T09:16:22.317

看起来您遇到了[文档](http://rdoc.info/github/pluginaweek/state_machine/master/StateMachine/Integrations/ActiveModel)中提到的警告：

> 这里的一个*重要*警告是，由于 ActiveModel 验证框架中的限制，自定义验证器在定义为在多个状态下运行时将无法按预期工作。例如：
> 
> ```
>  class Vehicle
>    include ActiveModel::Validations
> 
>    state_machine do
>      ...
>      state :first_gear, :second_gear do
>        validate :speed_is_legal
>      end
>    end
>  end 
> ```
> 
> 在这种情况下，:speed_is_legal 验证只会在 :second_gear 状态下运行。为避免这种情况，您可以像这样定义自定义验证：
> 
> ```
>  class Vehicle
>    include ActiveModel::Validations
> 
>    state_machine do
>      ...
>      state :first_gear, :second_gear do
>        validate {|vehicle| vehicle.speed_is_legal}
>      end
>    end
>  end 
> ```