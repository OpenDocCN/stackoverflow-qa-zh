# StackOverflow 问答 11380000-11380999

# javascript - 将键收集到数组 JavaScript 的最佳方法？

> ID：11380001
> 
> 赞同：2
> 
> 时间：2012-07-08T01:26:40.290
> 
> 标签：javascript, arrays, optimization

在数组中获取唯一字符串的最佳方法是什么？有时用多种方法中的一种来做是有意义的，这里有 3 种：

1.  创建一个数组，对于您推送的每个新项目，首先检查是否`_.indexOf(array, newItem) == -1`
2.  创建一个哈希，所有值都为`true`，例如`{key1: true, key2: true}`，然后`_.keys(hash)`
3.  推送数组中的所有项目，然后运行`keys = _.uniq(keys)`

上面的代码使用[了 underscore.js](http://underscorejs.org/)助手。

了解 JavaScript 构造/虚拟机的内部知识，以及一些正式的算法知识，可能会让这变得不费吹灰之力，但我还没有。我确信它因浏览器（和节点）而异，但也许有一种首选方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T01:31:45.887

第一个解决方案必须针对数组的每个元素循环遍历数组的每个元素。这使得复杂度为`O(n²)`.

第二个可能是最好的，因为它只循环遍历数组，然后循环遍历键。基本上`O(2n)`就是这样`O(n)`。

第三个取决于效率如何`uniq()`。例如，它很可能只是方法 2 的实现。

# erlang - Erlang中的case语句匹配不止一个？

> ID：11380003
> 
> 赞同：13
> 
> 时间：2012-07-08T01:27:00.523
> 
> 标签：erlang, case

我有这样一段代码：

```
case sth of
    {a, 1} -> doA();
    {a, 2} -> doA();
    {a, 3} -> doB()
end. 
```

有没有办法不重复“doA（）”部分？我认为这应该很容易，但我在谷歌中找不到答案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-08T07:19:24.990

您可以在 case 语句中使用 when 守卫，例如：

```
case sth of
    {a, Var} when Var < 3-> doA();
    {a, 3} -> doB()
end. 
```

此外，您的表达式（`sth`）在这里是一个原子，这意味着它永远无法匹配任何这些情况。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-08T10:53:21.523

除了以@Bunnit 建议的方式使用守卫之外，没有办法避免重复子句主体。没有办法在一个子句中使用替代模式。在您的情况下，没有太多重复，但如果重复的主体更复杂，那么最好的方法是将它放在一个单独的函数中并调用它。

添加此功能虽然可能，但会导致对变量进行一些“有趣”的处理。

# asp.net - ASP.NET 显示未在 web.config 中配置 AntiXssSanitizerProvider 但我添加了 3 个引用

> ID：11380004
> 
> 赞同：0
> 
> 时间：2012-07-08T01:27:04.407
> 
> 标签：asp.net, ajax

ASP.NET 显示未在 web.config 中配置 AntiXssSanitizerProvider，但我添加了 3 个引用并将这些代码添加到 web.config 但仍然收到错误，即未在 web.config 中配置 AntiXssSanitizerProvider。请帮忙。

```
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
            <section name="sanitizer" type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, AjaxControlToolkit" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <applicationSettings>
        <sanitizer defaultProvider="AntiXssSanitizerProvider">
            <providers>
                <add name="AntiXssSanitizerProvider"     type="AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider"></add>
            </providers>
        </sanitizer>
    </applicationSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:27:41.060

尝试@Bertzzie 在[无法加载类型“AjaxControlToolkit.Sanitizer.AntiXssSanitizerProvider”中提供的解决方案。](https://stackoverflow.com/questions/12022493/could-not-load-type-ajaxcontroltoolkit-sanitizer-antixsssanitizerprovider). 这个对我有用。

`<sanitizer defaultProvider="HtmlAgilityPackSanitizerProvider"> <providers> <add name="HtmlAgilityPackSanitizerProvider" type="AjaxControlToolkit.Sanitizer.HtmlAgilityPackSanitizerProvider"></add> </providers> </sanitizer>`

# objective-c - 为 iOS 应用创建随机数字序列

> ID：11380008
> 
> 赞同：-4
> 
> 时间：2012-07-08T01:29:26.930
> 
> 标签：objective-c, ios, random

我需要得到均匀分布的随机数。问题是我每次应用程序开始检查某个 MAX 数字时都需要，然后在从 0 到 MAX 的所有数字上随机进行，而不在同一数字上传递两次（直到向上取整）。

现在我正在使用： arc4random()%maxNumber

但这确实有问题，因为我连续 3 次在同一号码上获得很多回报。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:35:03.153

1) 获取随机数

2) While (number is in used set) number = (number + 1) % MAX

3) 将数字添加到已使用的集合中

这是获取唯一随机数的标准算法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T09:56:18.313

这就是我最终所做的：

```
-(NSInteger)getNextRandomNumber :(NSInteger)maxNumber{

if (indexSet == nil){
    indexSet = [[NSMutableIndexSet alloc] init];
}
if ([indexSet count] >= maxNumber){
    [indexSet init];
}

NSInteger randomGen = arc4random_uniform(maxNumber);
BOOL foundNumber = FALSE;

while (!foundNumber) {
    if ([indexSet containsIndex:randomGen]){
        randomGen = arc4random_uniform(maxNumber);

    }else{
        [indexSet addIndex:randomGen];
        foundNumber = TRUE;
    }
}

return randomGen;
} 
```

如果您使用它，请注意释放对象，另外，我想我可能会错过一个数字（不确定）在我的情况下没关系，所以......

# android - BroadcastReceiver 未从内部服务接收 Intent

> ID：11380018
> 
> 赞同：2
> 
> 时间：2012-07-08T01:32:38.253
> 
> 标签：android, service, android-intent, broadcastreceiver

我的应用程序中有一个 Activity 和一个 Service ，并且我正在向他们每个人发送广播。当我的活动接收从我的服务发送的广播时，我的服务不会接收从我的活动发送的广播。

这是我的一些代码：

活动

```
 @Override
public void onResume()
{
    Log.i(TAG, "in onResume");

    IntentFilter messageFilter = new IntentFilter(Constants.MESSAGE);
    messageReceiver receiver = new messageReceiver();
    registerReceiver(receiver, messageFilter);

    startService(new Intent(this, Server.class));

    super.onResume();
}

public class messageReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive (Context context, Intent intent)
    {
        Log.i(TAG, "in messageReceiver");
        serverStatus.setText(intent.getStringExtra(Constants.MESSAGE));
    }
}

@SuppressLint("ParserError")
public OnClickListener btnSendClicked = new OnClickListener() {

    public void onClick(View v) {
        Log.i(TAG, "btnSend clicked");

// This broadcast is NOT picked up by my Service
        Intent sendClicked = new Intent(Constants.SEND_CLICKED);
        sendBroadcast(sendClicked);
    }
}; 
```

服务

```
 @SuppressLint({ "ParserError", "ParserError", "ParserError" })
public class btnSendClickedReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context arg0, Intent arg1) {

        // Do some stuff
    }
};

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    Log.i(TAG, "in onStartCommand");

    SERVERIP = getLocalIpAddress();

    IntentFilter sendClickedFilter = new IntentFilter(Constants.SEND_CLICKED);
    btnSendClickedReceiver receiver = new btnSendClickedReceiver();
    registerReceiver(receiver, sendClickedFilter);

    runServer();

    return START_STICKY;
}

@SuppressLint("ParserError")
public void runServer()
{
    try
    {
        if (SERVERIP != null)
        {
            Log.i(TAG, "inside runServer");

// This broadcast is picked up by my activity:
            Intent intent = new Intent(Constants.MESSAGE);
            intent.putExtra(Constants.MESSAGE, "Listening on IP: " + SERVERIP);
            sendBroadcast(intent);
            serverSocket = new ServerSocket(SERVERPORT);
            while (true)
            {
                client = serverSocket.accept();
                Log.i(TAG, "connected");

                Intent connectedIntent = new Intent(Constants.MESSAGE);
                connectedIntent.putExtra(Constants.MESSAGE, "Connected");
                sendBroadcast(connectedIntent);

            }
        }
        else
        {
            // no internet connection
        }
    } catch (Exception e)
    {
        //Error
        e.printStackTrace();
    }
} 
```

显现

```
 <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />

            <action android:name="message"/>
            <action android:name="SendClicked"/>
        </intent-filter>
    </activity>

    <service android:name=".Server" android:process=":remote">
    </service> 
```

几天来我一直在尝试调试它，但我不确定问题是什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:13:12.980

androidManifest.xml 文件中未创建广播接收器条目 请添加上述条目并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T19:24:35.113

我遇到过同样的问题。我取出 :remote 说明符然后它起作用了。我不知道为什么会有所不同。而且我也从未在清单中指定接收者。

# java - 如何扩展此代码？查找辅音、单词、空格和特殊字符的数量

> ID：11380020
> 
> 赞同：-2
> 
> 时间：2012-07-08T01:33:14.477
> 
> 标签：java

如何扩展此代码。我已经可以找到所有的元音了。

我需要添加它以打印辅音、单词、空格和特殊字符的数量。

```
import java.lang.String;
import java.io.*;
import java.util.*;

 public class CountVowels
 {

public static void main(String args[])throws IOException
{
       BufferedReader bf = new BufferedReader(new InputStreamReader(System.in)           );
       System.out.println("Enter the String:"                                            );
       String text = bf.readLine(                                                        );
       int count = 0;
       for (int i = 0; i < text.length(); i++) {
       char c = text.charAt(i);
       if (c=='a' || c=='e' || c=='i' || c=='o' || c=='u')
      {
       count++;
      }
      }
       System.out.println("There are" + " " + count + " " + "vowels"                      );
}
} 
```

这是我到目前为止的代码。

编辑：当我指的是特殊字符时，我指的是 Shift + 1-0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:35:47.797

你犯了一个典型的菜鸟错误：你在 main 方法中加入了太多东西。

创建一个接收字符串并计算元音的方法，另一个用于辅音，另一个用于空格、特殊字符、单词等。

这是一种方法。接口是可选的；将其视为一种学习经历。

```
public interface TextCounter {
    int countVowels(String s);
    // etc. - you get the idea.
} 
```

现在你的实现：

```
public class TextCounterImpl implements TextCounter {
    public int countVowels(String s) {
        int numVowels = 0;
        if ((s != null) && (s.trim().length() > 0) {
            s = s.toLowerCase();
            for (int i = 0; i < s.length(); ++i) {
                char c = s.charAt(i);
                // What about the "sometimes 'y'" rule?
                if ((c == 'a') || (c == 'e') || (c == 'i') || (c == 'o') || (c == 'u')) {
                    ++numVowels;
                }
            }
        }
        return numVowels;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:45:53.423

您可以编写一个名为 LineParser 的类，它将解析字符串。使用 get 和 set 方法访问变量始终是一个好习惯。

```
class LineParser {

    public int numberOfVowels;
    public int numberOfConsonents;
    public int numberOfSpaces;
    public int numberOfSpecialChars;
    public int numberOfWords;
    public int numberOfDigits;

    public LineParser(String str)   {
       ProcessStr(str);
    }

    //Parses a string to count number of vowels, consonents, spaces, 
    //special characters and words,
    //Treates non letter chars as word terminators.
    //So London2Paris contains 2 words. 
    private void ProcessStr(String str) {

        boolean wordend = false;
        char[] word = new char[str.length()];
        int wordIndex = 0;

        for (char c : str.toCharArray()){           
            if (Character.isLetterOrDigit(c)){
                if (Character.isLetter(c)) {
                        word[wordIndex++] = c;
                        c = Character.toLowerCase(c);
                        if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u'){
                           numberOfVowels ++;
                        }
                        else {
                           numberOfConsonents ++;
                        }
                 }
                 else {
                    numberOfDigits++;
                    wordend = true;
                 }
            } 
            else if (Character.isWhitespace(c)) {
                numberOfSpaces ++;
                wordend = true;
             } 
             else {             
                 numberOfSpecialChars ++;
                         wordend = true;
             }

             if (wordend == true && wordIndex > 0){
                 numberOfWords ++;
                 wordIndex = 0;
                 wordend = false;
             }
        }       
        wordend = true; 
        if (wordend == true && wordIndex > 0){
            numberOfWords ++;
        }
    }
} 
```

此类可以像这样从您的主要功能中使用

```
public static void main(String args[])throws IOException
{
    BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter the String:");
    String text = bf.readLine();
    LineParser parser = new LineParser(text);

    System.out.println("There are" + " " + parser.numberOfVowels + " " + "vowels");
    System.out.println("There are" + " " + parser.numberOfConsonents + " " + "Consonents");
    System.out.println("There are" + " " + parser.numberOfSpaces + " " + "Spaces");
    System.out.println("There are" + " " + parser.numberOfSpecialChars + " " + "SpecialChars");
    System.out.println("There are" + " " + parser.numberOfWords + " " + "Words");
} 
```

# objective-c - NSScanner 搜索词找到部分词

> ID：11380022
> 
> 赞同：3
> 
> 时间：2012-07-08T01:33:28.740
> 
> 标签：objective-c, ios, xcode

我正在使用 NSScanner 在大型 NSString 中查找单词数组，然后使用 html 标签突出显示它们。基本上我扫描到第一个单词并在该点插入一个标签。问题是 NSScanner 也在寻找单词的一部分。例如：

如果我扫描@“test”，@“high”，@“try”，它将匹配许多单词的部分。

测试 测试 更高的尝试

有没有设置 NSScanner 只匹配整个单词的好方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:34:52.067

首先感谢 Wevah 提供的 enumerateSubstrings 解决方案，它肯定是一个正确的解决方案。但是，它的性能不如我的解决方案所需的那样。我目前对这个问题的解决方案是根据 borrrden 的建议使用正则表达式（好的建议，谢谢）。我在时间分析器工具中分析了所有三个解决方案。

这是我目前的实现。

```
-(NSString *)getHighlightedString: (NSString *)unhighlightedString: (NSArray *)termsToHighlight
{

  NSMutableString *newString = [[NSMutableString alloc] initWithString:unhighlightedString];
  NSString *startTag = @"<b><i>";
  NSString *endTag = @"</i></b>";

  NSMutableString *expression = [[NSMutableString alloc] init];
  for (int i =0; i < [termsToHighlight count]; i++) 
  {
       [expression appendString:@"\\b"];
       [expression appendString:[termsToHighlight objectAtIndex:i]];
       [expression appendString:@"\\b"];

       if ([termsToHighlight count] != i + 1)
       {
           [expression appendString:@"|"];
       }

   }
   NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression options:NSRegularExpressionCaseInsensitive error:nil];
   NSArray* results = [regex matchesInString:unhighlightedString options:0 range:NSMakeRange(0, [unhighlightedString length])];
   for (NSTextCheckingResult* result in [results reverseObjectEnumerator]) {

       [newString insertString:endTag atIndex:result.range.location+result.range.length];
       [newString insertString:startTag atIndex:result.range.location];
   }

   return newString;
} 
```

以下是三种不同测试中每种测试的性能：

1.  我原来的 NSScanner 解决方案
    *   测试一 = 14ms
    *   测试二 = 14ms
    *   测试三 = 22ms
2.  Wevah的解决方案
    *   测试一 = 249ms
    *   测试二 = 189ms
    *   测试三 = 295ms
3.  我上面的正则表达式解决方案
    *   测试一 = 69ms
    *   测试二 = 34ms
    *   测试三 = 26ms

所以你可以看到 nsscanner 很快，只是在这种情况下不够准确。我愿意放弃正则表达式对性能的小幅影响以获得准确性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:15:28.687

如果您的目标是 iOS 4 或更高版本，请查看`-enumerateSubstringsInRange:options:usingBlock:`：

```
NSMutableString *string = [NSMutableString stringWithString:@"test this out testers! higher than high. try, trying, tryst."];
NSString *startTag = @"<b>";
NSString *endTag = @"</b>";
NSSet *wordsToMatch = [NSSet setWithObjects:@"test", @"high", @"try", nil];
[string enumerateSubstringsInRange:(NSRange){ .location = 0, .length = [string length] } options:NSStringEnumerationByWords usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    if ([wordsToMatch containsObject:substring]) {
        [string insertString:startTag atIndex:substringRange.location];
        [string insertString:endTag atIndex:substringRange.location + substringRange.length + startTag.length];
    }
}]; 
```

# linux - 这是否可以覆盖 linux 之类的复制系统？

> ID：11380023
> 
> 赞同：-1
> 
> 时间：2012-07-08T01:33:43.677
> 
> 标签：linux, copy

我想写一个小工具来记录用户`copy`在他们的系统中执行的操作。这可以覆盖系统复制功能吗？我想记录他们的文件名，并执行时间戳，以及操作是否成功。

这可以为类 linux 系统做这些黑客攻击吗？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:43:41.627

您可以为命令创建一个包装器`cp`（假设您的意思是 with `copy`）。

重命名cp：

`mv /usr/bin/cp /usr/bin/real.cp`

然后创建一个名为的新文件`/usr/bin/cp`并添加以下内容：

```
#!/bin/sh

USER=`whoami`
DATE=`date`

echo "$DATE - $USER: $@" >> /var/log/yourlog

real.cp $@

exit 
```

确保`/var/log/yourlog`所有用户都可写。 `$@`包含所有命令行参数。因此，如果您将它们传递给 cp，它将再次将它们传递给 real.cp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T03:36:41.597

如果您正在谈论窗口管理器的复制/粘贴行为，我认为这是不可能的，除非您准备好修改源代码然后重新编译它。

但是，如果您在终端中谈论 cp 命令，那么您可以在 /home/your_user/.bashrc 中创建一个“别名”，这样每次调用“cp”时，都会调用一个更高级的命令，即调用date +%s 获取时间戳，并执行您想做的任何其他事情，例如在实际调用真正的 cp 之前将其记录到 /var/log/my_cp_log 中。

# list - SOQL - APEX - 列表

> ID：11380025
> 
> 赞同：0
> 
> 时间：2012-07-08T01:34:40.067
> 
> 标签：list, apex-code, custom-fields, soql

*大家好，*
*我有一个包含查询值的列表。该列表有多个字段，我如何访问该列表中的特定字段？*

**问题：**

```
List <Account> listS = [Select 
                         (Select S__c from AS__r 
                         where S__r.Abc__c = 'Confirmed'), 
                         (Select PQR__c from AHS__r) 
                       from Account where Id in: TravellerIds];

List <AS__c> listAS = new list <AS__c>();
for (Account t: listS){
    listAS.add(t.AS__r);
} 
```

**伪代码中的问题**：
对于（listS 中的每个帐户）{
ListAS.add(S__c field from the listS); }

我已经尝试了我在问题部分中提到的内容，但我无法访问它。请帮我。

**我得到的错误是**：列表有超过 1 行分配给 SObject。

非常感谢您的帮助。

**注意：我不想*为每个 AS _c 访问 for 循环内的 S_c 字段*。我想为每个帐户访问它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:38:16.033

当您查询父子关系`t.AS__r`时，Account 对象上的字段实际上是满足子查询条件的对象列表。因此，您需要做的就是更改`listAS.add(t.AS__r);`为`listAS.addAll(t.AS__r);`，这将使您的示例代码工作 - 将子查询中返回的所有项目添加到您的新列表中。

通过扩展，如果您想添加所有 S_c*字段，正如您在伪代码中所说，那么您需要做的就是循环遍历每个帐户的子查询列表并将*S_c 字段添加到列表中，如下所示：

```
List<string> listOfS = new List<string>();
for(Account acc : listAS){
  for(A__c a: acc.AS__r){
     listOfS.add(a.S__c);
  }
} 
```

这假定您的关系名称引用的自定义对象`AS__r`具有 API 名称，`A__c`并且该字段`S__c`的类型为字符串 - 但希望您明白这一点。

这有帮助吗？

# sqlite - Sqlite3更大的等于运算符日期错误

> ID：11380030
> 
> 赞同：0
> 
> 时间：2012-07-08T01:36:24.210
> 
> 标签：sqlite

我正在尝试比较日期，但 <= 运算符有问题 我的开始日期是“2012-07-07”，如果我这样做，我想比较的日期是“2012-07-07”选择

```
SELECT "eventos".* FROM "eventos" WHERE (start <= '2012-07-07' ) 
```

它不起作用，但如果我这样做

```
SELECT "eventos".* FROM "eventos" WHERE (start >= '2012-07-07' ) 
```

它有效，问题是返回的行的起始值为“2012-07-07”

如果我只是这样做

```
SELECT "eventos".* FROM "eventos" WHERE (start > '2012-07-07' ) 
```

它返回起始值为“2012-07-07”的同一行

有人知道为什么 sqlite3 认为 2012-07-07 大于 2012-07-07 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T01:39:57.577

解决了，

刚刚重新创建了数据库，可能是因为我将类型从日期时间更改为日期，现在我使用日期重新创建并重新创建了记录。

谢谢

# actionscript-3 - 外部接口 firefox 错误

> ID：11380034
> 
> 赞同：1
> 
> 时间：2012-07-08T01:37:23.183
> 
> 标签：actionscript-3, firefox, flex4, externalinterface

我无法让任何基于 Web 的 ExternalInferface 示例在 Firefox 中工作。我的播放器或 Firebug 有问题吗？请记住，我说过在我的 Windows7 机器或我的笔记本电脑（相同的浏览器规格）上，没有示例在 FireFox 13.0.1 和 FlashPlayer 11.3 中工作。

1.  Adobe ExternalInterface 示例不起作用。
2.  swfobject google.code 示例不起作用： http: [//www.bobbyvandersluis.com/swfobject/testsuite_2_2/test_com.html](http://www.bobbyvandersluis.com/swfobject/testsuite_2_2/test_com.html)。
3.  外部接口 | Flex 示例不起作用：[http ://blog.flexexamples.com/2008/04/11/getting-javascript-variables-into-your-flex-applications-using-the-externalinterface-api/](http://blog.flexexamples.com/2008/04/11/getting-javascript-variables-into-your-flex-applications-using-the-externalinterface-api/)

WTF 正在与 Firefox 一起进行吗？如果所有网络示例都不起作用，那么它一定是我的浏览器正确还是这是一个真正的 Firefox 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:34:37.690

您是通过 localhost 或实际的 Web 服务器运行示例，还是尝试在本地加载 html 文件（没有 localhost）？ExternalInterface 需要启用 AllowScriptAccess 的网络服务器和 javascript。我怀疑您的问题很可能与这两者之一有关。

以下是有关 ExternalInterface的[其他安全信息。](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_6.html)

# php - PHP - 我可以创建一个只能通过另一个类实例化的类吗？

> ID：11380037
> 
> 赞同：0
> 
> 时间：2012-07-08T01:39:07.187
> 
> 标签：php, class, exception, exception-handling, instantiation

我试图从 Exception 类中创建一个子类来处理错误并在给定错误代码的情况下发出正确的错误消息。我更改了原始代码并使其更简单，只是为了说明我的问题。

也许这是不可能的，但我不希望 InvalidEmailException 类被脚本实例化。如果有必要，我只希望订阅类使用它（发现错误）。我为什么要这样做呢？没关系，我只是想了解课程的运作方式。

```
/* Child class from the parent Exception class to handle errors 
 * pertinent to users being subscribed
 */
class InvalidEmailException extends Exception{
   private $error_code;
   private $email;
   function __construct($error_code, $email){
      $this->error_code = $error_code;
      $this->email = $email;
      $this->notifyUser();
   }
   function notifyUser(){
        if($this->error_code == 2):
         echo "<p>Invalid email: <em>{$this->email}</em></p>";
      endif;
   }
}

// Initial class to subscribe a user with the try catch checks
class Subscribe{
   private $email;
   private $error_code = 0;
   function __construct($email){
      $this->email = $email;
      $this->validateEmail();
   }

   private function validateEmail(){
      try{
         if($this->email == ''):
            throw new Exception('<p>Error: empty email address.</p>');
         else:
            if($this->email == 'invalid test'){
                    $this->error_code = 2;
               throw new InvalidEmailException($this->error_code, $this->email);
            }elseif($this->error_code == 0){
               // Go to method to subscribe a user if the error code remains zero
               $this->subscribeUser();
            }
         endif;
      }catch(Exception $e){
         echo $e->getMessage();
      }
   }

   private function subscribeUser(){
      echo $this->email.' added to the database!';
   }
}

/* 
 * Script to use the Subscribe class, which would call 
 * the InvalidEmailException class if needed
 */
$email = 'invalid test'; // This could later on be used through the $_POST array to take an email from a form
$subscribe = new Subscribe($email); // Works well.
$test = new InvalidEmailException('2', 'a@b.c'); // Also works.  I want this to throw an error. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:42:17.523

不，除了 PHP 中的“对所有事物都可见”之外，您实际上不能拥有任何类型的类可见性。您可以使用人们告诉您的各种技巧来部分近似它，但它们是毫无意义的浪费时间，因为它们无法强制执行可见性约束（如果程序员想要违反您的伪约束，所有这些都会受到微不足道的解决方法） ，如果没有强制执行，您也可以在程序员级别实现它（即，如果您认为不应该这样做，请不要这样做）。

如果您担心使用非常有限的异常类污染全局类名称空间（这将是我为您鼓掌的一个有效问题），这就是[名称空间](http://php.net/manual/en/language.namespaces.php)的用途；一个典型的专业 PHP 5.3 架构会将您的类作为`YourApp\Email\Subscribe`和`YourApp\Email\InvalidAddressException`. （顺便说一句，这允许内部代码在不需要语句或完整命名空间规范的情况下`Subscribe`抛出 a 。）`new InvalidAddressException``use`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:30:26.923

我认为你最好的选择是使用依赖注入[http://en.wikipedia.org/wiki/Dependency_injection](http://en.wikipedia.org/wiki/Dependency_injection)。它有点先进，但我认为从长远来看它会有所帮助..

本质上，您可以使用获取所需数据的方法创建一个通用接口，并使异常类的构造函数具有接口类型的参数。然后让订阅类实现接口，这将允许将其传递给异常的构造函数。

您也可以直接将订阅对象作为参数传递给异常类的构造函数，并绕过接口使用。但是，该接口允许您让多个类都使用该接口和那些常用方法，如果您使用该模式，它们都可以构造您的异常类。而且您还将知道如何与这些类进行交互，因为它们使用相同的通用设计。

这并不能完全阻止您从类外部和脚本中构造异常，但是您将需要首先构造实现接口的类（或仅构造类本身，取决于您采用的方式），这是限制行为的好方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T02:33:05.983

这是一个想法。

使用define 设置一个“全球化”变量。

因此，在您的订阅类 __construct 函数中设置一个变量`define( 'IN_USE', 1 );`，然后如果/当调用 InvalidEmailException 时只需检查：

```
if( !IN_USE ) { exit; } 
```

# eclipse - Grails/Eclipse：本机库 jline_.dll 已加载到另一个类加载器中

> ID：11380038
> 
> 赞同：2
> 
> 时间：2012-07-08T01:39:22.607
> 
> 标签：eclipse, grails, groovy, sts-springsourcetoolsuite

尝试从 String STS IDE (Eclipse) 运行各种 grails 任务（如生成控制器）时，我看到以下错误。这似乎是我安装 EGit 后开始的，但我不确定。

以前有人见过这样的事情吗？

错误：

```
An internal error occurred during: "Building workspace".
Native Library C:\Users\mtyson\AppData\Local\Temp\jline_.dll already loaded in another classloader 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:42:36.020

[将您的 sts/ggts 版本升级](http://www.springsource.org/downloads/sts-ggts)到 3.2.0.M1 或更高版本。该错误已修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:15:26.713

显然这是一个 STS Spring 问题。

当运行应用程序正在进行时，我从 IDE 运行 grails 'clean'，它不知何故失去了对运行应用程序进程的跟踪。控制台不认为应用程序正在运行，但它正在后台运行（ctrl-alt-del 在任务人中显示它）。之后，出现提到的 .dll 错误。解决方案是杀死流氓进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T04:00:30.327

似乎是STS的错误，[试试这个解决方案](http://forum.springsource.org/showthread.php?132974-Native-Library-jline_-dll-already-loaded-in-another-classloader)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T10:34:44.497

如果您有旧设置并且不想升级，则从临时位置删除 dll 并重新启动 eclipse。这个对我有用。

# bash - 在 awk 中模仿 `grep --only-matching`

> ID：11380039
> 
> 赞同：1
> 
> 时间：2012-07-08T01:39:51.400
> 
> 标签：bash, awk, grep

我有一个`bash`脚本可以处理大量输入，然后打印出格式精美的输出。目前它是非常模块化的——它产生了大量的子shell，并大量使用`echo`, `grep`, `sort`, `wc`, & `sed`，但我正在努力用更大的`awk`块替换多个块的功能，以提高效率。

一场斗争：我一直在试图弄清楚如何搜索特定字符串的输入，只打印我正在搜索的确切内容。我一直在玩 awk 的`match`功能，但还没有成功。这是我试图弄清楚如何集成到更大的 awk 脚本中的一件事的示例：

```
$ egrep -o "pae|lm|vmx|svm|ht" /proc/cpuinfo | sort -u
ht
lm
pae
vmx 
```

如果我要使用 awk 来做同样的事情，我希望得到一个数组或变量，其中包含我搜索到的每个字符串。我看到的主要问题是我正在搜索的每个字符串在输入中可能存在不止一次。也许我只需要买一本 awk 书......欢迎任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:32:16.897

在`awk`中，也许这就是您要查找的内容，或者至少可能包含一些有用的代码：

```
awk '{ for (i = 1; i <= NR; i++) if ($i ~ /^(pae|lm|vmx|svm|ht)$/) array[$i]++ } END { for (j in array) print j }' /proc/cpuinfo 
```

我的系统上的输出：

```
vmx
pae
lm
ht 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:36:40.653

我认为这会做你的工作：

`awk -v RS="pae|lm|vmx|svm|ht" 'RT != "" {print RT}' /proc/cpuinfo`

或者，如果您还需要在 awk 中进行排序：

`gawk -v RS="pae|lm|vmx|svm|ht" 'RT != "" {m[RT]} END{n=asorti(m, m_sorted); for(i=1;i<=n;++i){print m_sorted[i]}}' /proc/cpuinfo`

**解释**：我们将记录分隔符设置`RS`为必要的正则表达式，并且 awk 将正`RS`则表达式的完全匹配存储在`RT`变量中。`RT`最后一条记录是空的，所以我们需要检查非空。

排序版本使用`asorti`扩展`gawk`功能。

对于更一般的方法，请查看`match`功能。例如，如果您可以设置这样的记录分隔符，以便每条记录只发生一次匹配，那么解决方案并不复杂： `gawk -v RS="your_separator" 'match($0, /pae|lm|vmx|svm|ht, m)" {print m[0]}`

# paypal - 是否有任何免费的 GUI 工具可以为 PayPal 加密网站支付生成证书？

> ID：11380044
> 
> 赞同：3
> 
> 时间：2012-07-08T01:40:51.283
> 
> 标签：paypal, openssl

我正在寻找一个免费的 GUI 工具，用于为 PayPal 加密网站支付按钮生成证书。我一点也不习惯使用像 OpenSSL 这样的命令行工具，相反，如果一个工具可以封装 OpenSSL 并给我一个漂亮的 GUI，我会喜欢的。有这样的吗？

我需要寡妇 7 (x64)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:03:22.130

希望 SpiceLogic '用于加密网站支付的 PayPal 证书生成器'是您正在寻找的。

[https://www.spicelogic.com/Products/PayPal-Certificate-Generator-for-Encrypted-Website-Payments-9](https://www.spicelogic.com/Products/PayPal-Certificate-Generator-for-Encrypted-Website-Payments-9)

它是一个利用 OpenSSL 的工具，但为您提供了一个简单的图形用户界面来生成证书。它也是免费的。

# jquery - 使用表单字段重复 div

> ID：11380045
> 
> 赞同：4
> 
> 时间：2012-07-08T01:41:09.637
> 
> 标签：jquery, repeat

我有一个表单，我希望能够根据需要多次复制一组字段。而且我还想让这些新字段组的 field `id`、`name`和 label 的`for`属性增加 1。到目前为止，我已经用 jQuery 尝试过这个，并让它至少复制了这组字段，但是 remove 不起作用. 而且我不确定如何为这三个属性中的每一个做 +1。我很感激我能得到的任何帮助。

这是它的一个jsfiddle， [http://jsfiddle.net/Unfxn/](http://jsfiddle.net/Unfxn/)

HTML

```
<form method="post" action="#" class="inlineForm" enctype="multipart/form-data">
    <div class="repeatingSection">
        <a href="#" class="buttonGray buttonRight deleteFight">Delete</a>
        <input type="hidden" name="fighter_a_id_1" id="fighter_a_id_1" value="" />
        <input type="hidden" name="fighter_b_id_1" id="fighter_b_id_1" value="" />
        <input type="hidden" name="winner_id_1" id="winner_id_1" value="" />
        <div class="formRow">
            <label for="fighter_a_1">Fighters</label>
            <input type="text" name="fighter_a_1" id="fighter_a_1" value="" /> <span class="formTextExtraCenter">vs</span> <input type="text" name="fighter_b_1" id="fighter_b_1" value="" />
        </div>
        <div class="formRow">
            <label for="fighter_a_pay_1">Fighter Pay $</label>
            <input type="text" name="fighter_a_pay_1" id="fighter_a_pay_1" value="" /> <span class="formTextExtraCenter">vs</span> <input type="text" name="fighter_b_pay_1" id="fighter_b_pay_1" value="" />
        </div>
        <div class="formRow">
            <label for="winner_1">Winner</label>
            <input type="text" name="winner_1" id="winner_1" value="" />
        </div>
        <div class="formRow">
            <label for="method_1">Method</label>
            <input type="text" name="method_1" id="method_1" value="" />
        </div>
        <div class="formRow">
            <label for="method_type_1">Method Type</label>
            <input type="text" name="method_type_1" id="method_type_1" value="" />
        </div>
        <div class="formRow">
            <label for="round_1">Round</label>
            <input type="text" name="round_1" id="round_1" class="fieldSmall" value="" />
        </div>
        <div class="formRow">
            <label for="time_1">Time</label>
            <input type="text" name="time_1" id="time_1" class="fieldSmall" value="" />
        </div>
        <div class="formRow">
            <label for="fight_number_1">Fight #</label>
            <input type="text" name="fight_number_1" id="fight_number_1" class="fieldSmall" value="" />
        </div>
    </div>
    <div class="formRowRepeatingSection">
            <a href="#" class="buttonGray buttonRight addFight">Add Fight</a>
        </div>
    <div class="formRow">
        <input type="submit" class="submitButton" value="Save Fights" />
    </div>
</form> 
```

JS

```
// Add a new repeating section
$('.addFight').click(function(){
    var lastRepeatingGroup = $('.repeatingSection').last();
    lastRepeatingGroup.clone().insertAfter(lastRepeatingGroup);
    return false;
});
// Delete a repeating section
$('.deleteFight').click(function(){
    $(this).parent('div').remove();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T02:18:23.197

这应该根据所有三个元素自动重命名：

```
// Add a new repeating section
$('.addFight').click(function(){
    var currentCount =  $('.repeatingSection').length;
    var newCount = currentCount+1;
    var lastRepeatingGroup = $('.repeatingSection').last();
    var newSection = lastRepeatingGroup.clone();
    newSection.insertAfter(lastRepeatingGroup);
    newSection.find("input").each(function (index, input) {
        input.id = input.id.replace("_" + currentCount, "_" + newCount);
        input.name = input.name.replace("_" + currentCount, "_" + newCount);
    });
    newSection.find("label").each(function (index, label) {
        var l = $(label);
        l.attr('for', l.attr('for').replace("_" + currentCount, "_" + newCount));
    });
    return false;
});

// Delete a repeating section
$('.deleteFight').live('click',function(){
    $(this).parent('div').remove();
    return false;
});​ 
```

我更改了删除处理程序，改为使用[.live()](http://api.jquery.com/live/)，以便处理程序也将附加到该按钮的新创建副本。现在，如果你使用 jquery > 1.7 你应该使用[.on()](http://api.jquery.com/on/)

on() 版本将是：

```
// Delete a repeating section
$(document).on('click','.deleteFight',function(){
    $(this).parent('div').remove();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:09:37.390

克隆对象后使用它

摆弄:) [http://jsfiddle.net/fedmich/MZjKR/1/](http://jsfiddle.net/fedmich/MZjKR/1/)

我给你留一些 TODO，把 3 改成当前的 id 数

```
<script type="text/javascript">
$.fn.id_changer = function(new_id) {
  return this.each(function(){
    $(this).find('input').each(function(){
        var ob = $(this);
        ob.attr('id',   this.id.replace(/_\d$/, '_' + new_id));
        ob.attr('name', this.name.replace(/_\d$/, '_' + new_id));           
    });
  });
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T02:36:20.730

这是我的版本。

[http://jsfiddle.net/Unfxn/27/](http://jsfiddle.net/Unfxn/27/)

它严重依赖于重复区域的索引。所以不要在它上面添加任何兄弟姐妹。如果确实需要，则将所有重复区域包装在另一个 div 中。

该死！为时已晚:) 无论如何......这是代码。

```
// Add a new repeating section
var attrs = ['for', 'id', 'name'];
function resetAttributeNames(section) { 
    var tags = section.find('input, label'), idx = section.index();
    tags.each(function() {
      var $this = $(this);
      $.each(attrs, function(i, attr) {
        var attr_val = $this.attr(attr);
        if (attr_val) {
            $this.attr(attr, attr_val.replace(/_\d+$/, '_'+(idx + 1)))
        }
      })
    })
}

$('.addFight').click(function(e){
        e.preventDefault();
        var lastRepeatingGroup = $('.repeatingSection').last();
        var cloned = lastRepeatingGroup.clone(true)  
        cloned.insertAfter(lastRepeatingGroup);
        resetAttributeNames(cloned)
    });

// Delete a repeating section
$('.deleteFight').click(function(e){
        e.preventDefault();
        var current_fight = $(this).parent('div');
        var other_fights = current_fight.siblings('.repeatingSection');
        if (other_fights.length === 0) {
            alert("You should atleast have one fight");
            return;
        }
        current_fight.slideUp('slow', function() {
            current_fight.remove();

            // reset fight indexes
            other_fights.each(function() {
               resetAttributeNames($(this)); 
            })            
        })   
    });

​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-09T17:57:38.743

如果您使用`name=method[]`etc 作为您的字段，您将在 POST 变量中获得数组，因此您不需要显式索引。

# django - Django如何从组中删除用户

> ID：11380048
> 
> 赞同：21
> 
> 时间：2012-07-08T01:42:23.810
> 
> 标签：django, usergroups

这是我将用户添加到组的代码

```
g = Group.objects.get(name='groupname') 
g.user_set.add(your_user) 
```

当我删除一个用户时，我如何从组中删除这个用户？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-08T04:56:47.110

请参阅文档[https://docs.djangoproject.com/en/stable/topics/auth/#methods](https://docs.djangoproject.com/en/stable/topics/auth/#methods)

```
g.user_set.remove(your_user) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-11-06T11:18:00.600

从用户对象中清除所有用户组的最简单方法是

```
user_obj.groups.clear() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-08-01T11:49:19.780

要删除特定组：

```
group = Group.objects.get(name='groupname') 
user.groups.remove(group) 
```

# java - 再现螺纹干涉

> ID：11380049
> 
> 赞同：1
> 
> 时间：2012-07-08T01:42:29.853
> 
> 标签：java, multithreading

我正在尝试重现线程干扰场景.. 但有些不对劲。请帮我理解什么

## 主要的

```
public static void main(String args[]) throws InterruptedException {

    Counter c = new Counter();

    for (int i = 0; i < 1000000; i++) {
        new T1(c).start();
        new T2(c).start();
    }

    System.out.println(c.value()); // <-- Expect this to sometimes not be 0
} 
```

## 柜台

```
class Counter {
    private int c   = 0;

    public void increment() { // <-- intentionally not synchronized 
        c++;
    }

    public void decrement() { // <-- intentionally not synchronized 
        c--;
    }

    public int value() {
        return c;
    }
} 
```

## 线程 1

```
public class T1 extends Thread {

    Counter c;

    T1(Counter c) {
        this.c = c;
    }

    public void start() {
        c.decrement(); // <-- Decrement
    }
} 
```

## 线程 2

```
public class T2 extends Thread {

    Counter c;

    T2(Counter c) {
        this.c = c;
    }

    public void start() {
        c.increment();  // <-- Increment
    }
} 
```

当我开始 1000000 个线程时，每个线程都在代码的非同步部分上运行，我希望一些操作会重叠。

> 当两个在不同线程中运行但作用于相同数据的操作交错时，就会发生干扰。这意味着这两个操作由多个步骤组成，并且步骤的顺序重叠。
> 
> Counter 实例上的操作似乎不可能交错，因为 c 上的两个操作都是单个简单的语句。但是，即使是简单的语句也可以由虚拟机转换为多个步骤。我们不会检查虚拟机采取的具体步骤——知道单个表达式 c++ 可以分解为三个步骤就足够了：
> 
> 检索 c 的当前值。将检索到的值增加 1。将增加的值存储回 c。

**请问我错过了什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T01:53:21.063

就目前而言，您的程序实际上并没有同时做任何事情，一切都在主线程中完成。由于您覆盖了 start 方法并且从不调用超类版本，因此您将无法获得使新线程运行的功能。

但是仅仅调用 super.start() 并不能解决问题。考虑 start 是由当前线程运行的，所以即使你设法启动了线程，增量/减量也将由调用 start() 的线程执行，并且不会进行并发访问和修改。

我会将增量/减量的东西移出 start 方法（删除它的覆盖版本）并覆盖 run 方法，而不是把它放在那里。当然，下次考虑用 Runnable 代替 Thread，用 Runnable 就更难出这种错误了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T03:04:51.543

你的程序有很多问题，首先是你没有启动任何线程。对于线程，线程的主体必须在 run() 方法中。Thread 类中的 start() 方法不能被覆盖。

那么你创建的线程数量就会有很大的问题：2000000。这意味着运行它们需要 2000000 个堆栈。默认堆栈大小（除非您使用 -Xss 选项指定它）在 512Kb 和 2Mb 之间。即使您使用 128Kb 的低堆栈大小，您也需要 256GB 的内存来创建这 2000000 个线程。好吧，如果您的线程不是那么短暂，您将需要那么多内存。他们只做一个工作指令然后停止，所以很可能，他们中的大多数会在你启动太多之前终止。否则您的进程将因内存不足或资源异常而崩溃。最后，大部分时间将在初始化和终止线程。我估计只有不到 1% 的线程使用的实际 CPU 用于执行计数器的实际递增或递减。

我认为如果你真的想看到重叠，你想创建更少的线程（IMO 16 或更少。无论如何，只有这么多可以同时运行，即你机器上的处理器核心数量），但这些线程应该做增量/ 循环递减。

所以有两种类型的线程，一种在计数器上增加 200000，另一种减少 200000。启动每种类型的 8 个线程。使用 Thread.join() 等待所有 16 个线程结束，然后写入计数器的结果。

# android - 没有标题/片段的单页 PreferenceActivity？

> ID：11380051
> 
> 赞同：61
> 
> 时间：2012-07-08T01:43:12.847
> 
> 标签：android, android-fragments, android-preferences

我正在尝试完成一些我认为很容易的事情，但是我对如何使用 PreferenceActivity 类和 xml 首选项标头标记来完成它感到困惑。

当用户点击应用程序设置图标时，我希望他们看到一小部分复选框和列表。我只有一个偏好片段。到目前为止，我可以设置 PreferenceActivity xml 文件（preferences.xml 和首选项片段 xmls）来显示首选项片段的单个标头。当用户选择该标题时，首选项屏幕正是我想要的，但是，我无法找到跳过显示第一个标题屏幕的方法。

必须点击设置/首选项图标，显示单个标题，然后点击以获取实际设置/首选项，这似乎是一种浪费。

我知道如果您想对自己的偏好进行分类，这会非常有帮助，但是对于一些简单的事情，这会增加开销并且看起来相当笨重。

我希望我是清楚的。简而言之，这是我的问题：

使用 PreferenceActivity 类和首选项标题标签来简单地显示没有标题的单个选项屏幕的新首选方法是什么？

在环顾四周之后，看起来我正试图以一种直接的方式做旧方法所做的事情。我试图在不使用任何已弃用的功能的情况下做到这一点。

在此先感谢，B。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-09T19:16:32.087

新的首选方式是显示单个`PreferenceFragment`作为任何活动的主要内容。它不需要是`PreferenceActivity`。请参阅 API 演示示例

```
public class FragmentPreferences extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction().replace(android.R.id.content,
                new PrefsFragment()).commit();
    }

    public static class PrefsFragment extends PreferenceFragment {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Load the preferences from an XML resource
            addPreferencesFromResource(R.xml.preferences);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-14T22:59:11.417

我正在寻找与这个问题相匹配的答案。最终，我从其他几个来源解决了这个问题。对于那些可能仍然希望回答的人，这对我有用。（注意 - 在这个项目中，最小和目标 SDK 都设置为 15。）

1.  转储 PreferenceHeaders，您将不需要它们。
2.  使用单页设置创建首选项屏幕。
3.  创建一个偏好活动类（SettingsActivity 下面）。
4.  创建一个扩展 PreferenceFragment 的内联类（下面的 LocationFragment）。
5.  在 Manifest 中定义类。
6.  开始任务 - 请参阅下面的菜单代码。

显示单个设置屏幕的首选项类。

```
public class SettingsActivity extends PreferenceActivity {

    private final static String TAG = "SettingsAcitivity";

    public SettingsActivity() {}

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MyLog.d(TAG, "onCreate");
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new LocationFragment()).commit();
    }

    public class LocationFragment extends PreferenceFragment {

        private final static String TAG = "LocationFragment";

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            MyLog.d(TAG, "onCreate");
            addPreferencesFromResource(R.xml.locationsettings);
        }
    }
} 
```

显示设置的代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    MyLog.d(TAG, "onOptionsItemSelected");
    switch (item.getItemId()) {
    case R.id.menu_main_help:
        break;
    case R.id.menu_main_about:
        break;
    case R.id.menu_main_settings:
        MyLog.d(TAG, "Settings");
        Intent settingsIntent = new Intent(this, SettingsActivity.class);
        startActivity(settingsIntent);
        break;
    }
    return true;
} 
```

Back 键终止 SettingsActivity。内置的首选项例程保存任何更改。我拥有的 onResume 函数执行 getSettings() 更新调用活动（在本例中为 MainActivity）使用的任何更改设置。

而已。

# android - 在安卓模拟器和真机上获取不同行为测试网页

> ID：11380056
> 
> 赞同：0
> 
> 时间：2012-07-08T01:45:23.277
> 
> 标签：android, virtualbox

我正在开发一个可以在三星 Galaxy Note 上看到的网站。我主要使用 asp.net 和 iscroll。

我没有银河笔记，但我在远处工作的一个伙伴有一个，他向我描述了银河笔记的结果。

我在我的virtualbox上安装了android 2.3，它应该与我的伙伴正在使用的galaxy notes相同的版本，所以我可以自己看到结果，奇怪的是我从已发布的网站上看到了不同的显示结果我的伙伴在真正的 Galaxy Notes 设备中看到的。更具体地说，我的伴侣有某些我没有的视觉故障，这意味着我无法解决我在场的令人讨厌的故障。

这是在虚拟设备上测试的预期缺点，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:21:30.270

在网络上进行快速搜索告诉我，Galaxy Note 的浏览器与普通的 Android 浏览器略有不同。

这意味着三星一定已经触及它，并且（虽然可能具有可比性）这应该被视为不同的浏览器。不保证您会看到相同的结果。

比较屏幕截图，我发现 Galaxy Note 和 Galaxy Tab（较旧的）上的浏览器可能来自同一个稳定版，因此您可以尝试使用 Android 2.2 SDK 中的可选 Galaxy Tab 包来重现故障。

# alias - zsh中的两个词别名

> ID：11380058
> 
> 赞同：22
> 
> 时间：2012-07-08T01:45:34.467
> 
> 标签：alias, zsh

在 ZSH 中做一个单词别名很容易。

```
alias ll='ls -lah' 
```

有没有办法用 Zsh 做两个词的别名，以便两个词都被解析为同一个别名的一部分？我主要想用它来修复错字。

```
alias 'gits t'='git st' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T02:37:25.997

试试这个：

```
alias func='gits t'
func() {
    'gits t'='git st'
} 
```

**有关Zsh**别名函数的更多信息：

*   [http://zsh.sourceforge.net/Doc/Release/Shell-Grammar.html#Aliasing](http://zsh.sourceforge.net/Doc/Release/Shell-Grammar.html#Aliasing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-03-24T22:53:29.390

与普通 bash 相同：

```
$ cd
$ vim .zshrc 
```

```
...
tg() {
    if [ -z "$1" ]; then
        echo "Use correct second argument: apply/destroy/plan/etc"
    else
        if [ "$1" = "0all" ]; then
            terragrunt destroy -auto-approve && terragrunt apply -auto-approve
        elif [ "$1" = "0apply" ]; then
            terragrunt apply -auto-approve
        elif [ "$1" = "0destroy" ]; then
            terragrunt destroy -auto-approve
        else
            terragrunt "$@"
        fi
    fi
}
... 
```

不要忘记重新读取文件：

```
$ source .zshrc 
```

使用后，例如：

```
$ tg 0apply 
```

# java - Java 中 value 和 0xff 有什么作用？

> ID：11380062
> 
> 赞同：113
> 
> 时间：2012-07-08T01:47:38.693
> 
> 标签：java, integer, byte, bitwise-and

我有以下 Java 代码：

```
byte value = 0xfe; // corresponds to -2 (signed) and 254 (unsigned)
int result = value & 0xff; 
```

打印时的结果是 254，但我不知道这段代码是如何工作的。如果`&`运算符只是按位的，那么为什么它不会产生一个字节而是一个整数呢？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-07-08T01:50:03.120

它设置`result`为（无符号）值，将 的 8 位`value`放在 的最低 8 位中`result`。

之所以需要这样的东西是因为它`byte`是 Java 中的签名类型。如果你刚刚写了：

```
int result = value; 
```

那么`result`最终会得到 value`ff ff ff fe`而不是`00 00 00 fe`. 另一个微妙之处在于`&`被定义为仅对`int`值¹进行操作，所以会发生什么：

1.  `value`被提升为`int`( `ff ff ff fe`)。
2.  `0xff`是`int`文字 ( `00 00 00 ff`)。
3.  `&`用于产生 的所需值`result`。

（关键是转换为`int`发生*在*运算符`&`应用之前。）

1[嗯，不完全是。如果任一操作数是 a ，则该`&`运算符也适用于值。但不上。请参阅 Java 语言规范，第[15.22.1](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.22.1)和[5.6.2](http://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.6.2)节。`long``long``byte`]

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-05-22T08:32:50.923

来自[http://www.coderanch.com/t/236675/java-programmer-SCJP/certification/xff](http://www.coderanch.com/t/236675/java-programmer-SCJP/certification/xff)

十六进制文字 0xFF 是一个相等的 int(255)。Java 将 int 表示为 32 位。二进制看起来像这样：

```
00000000 00000000 00000000 11111111 
```

当您对任何数字使用此值（255）进行一点与操作时，它将屏蔽（使零）除数字的最低 8 位之外的所有位（将保持原样）。

```
... 01100100 00000101 & ...00000000 11111111 = 00000000 00000101 
```

& 类似于 % 但不是[真的](https://stackoverflow.com/questions/3072665/bitwise-and-in-place-of-modulus-operator)。

**为什么是0xff？**这在 ((2 的幂) - 1) 中。所有 ((2 的幂) - 1) (例如 7, 255...) 的行为类似于 % 运算符。

然后
在二进制中，0 是，全为零，255 看起来像这样：

```
00000000 00000000 00000000 11111111 
```

-1 看起来像这样

```
11111111 11111111 11111111 11111111 
```

当您对 0xFF 和 0 到 255 之间的任何值进行按位与运算时，结果与该值完全相同。如果任何值高于 255，结果仍将在 0-255 之间。

但是，如果您这样做：

```
-1 & 0xFF 
```

你得到

`00000000 00000000 00000000 11111111`，它不等于 -1 的原始值（`11111111`十进制为 255）。

> 更多位操作：（与问题无关）

```
X >> 1 = X/2
X << 1 = 2X 
```

**检查任何特定位是否设置（1）或不设置（0）然后**

```
 int thirdBitTobeChecked =   1 << 2   (...0000100)
 int onWhichThisHasTobeTested = 5     (.......101)

 int isBitSet = onWhichThisHasTobeTested  & thirdBitTobeChecked;
 if(isBitSet > 0) {
  //Third Bit is set to 1 
 } 
```

**设置（1）一个特定的位**

```
 int thirdBitTobeSet =   1 << 2    (...0000100)
 int onWhichThisHasTobeSet = 2     (.......010)
 onWhichThisHasTobeSet |= thirdBitTobeSet; 
```

**重置（0）特定位**

```
int thirdBitTobeReSet =   ~(1 << 2)  ; //(...1111011)
int onWhichThisHasTobeReSet = 6      ;//(.....000110)
onWhichThisHasTobeReSet &= thirdBitTobeReSet; 
```

**异或**

请注意，如果您执行两次异或运算，将得到相同的值。

```
byte toBeEncrypted = 0010 0110
byte salt          = 0100 1011

byte encryptedVal  =  toBeEncrypted ^ salt == 0110 1101
byte decryptedVal  =  encryptedVal  ^ salt == 0010 0110 == toBeEncrypted :) 
```

异或的另一种逻辑是

```
if     A (XOR) B == C (salt)
then   C (XOR) B == A
       C (XOR) A == B 
```

以上对于在没有 temp 的情况下交换两个变量很有用，如下所示

```
a = a ^ b; b = a ^ b; a = a ^ b; 
```

或者

```
a ^= b ^= a ^= b; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-17T14:53:31.617

它有助于减少大量代码。它偶尔用于由 8 位组成的 RGB 值。

其中 0xff 表示 **24(0's ) 和 8(1's) 之**类的`00000000 00000000 00000000 11111111`

> 它有效地掩盖了变量，因此它只留下最后 8 位中的值，并忽略所有其余位

在尝试将颜色值从特殊格式转换为标准 RGB 值（8 位长）等情况下最常见。

[**很好的解释看这里**](http://blog.oscarliang.net/what-s-the-use-of-and-0xff-in-programming-c-plus-p/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-03T17:59:03.833

在 32 位格式系统中，十六进制值表示`0xff`十进制。并且按位 & 运算符屏蔽与第一个操作数相同的 8 个最右边的位。`00000000000000000000000011111111``255(15*16^1+15*16^0)`

# javascript - 使用 jQuery 用复选框突出显示表格行

> ID：11380064
> 
> 赞同：0
> 
> 时间：2012-07-08T01:47:57.570
> 
> 标签：javascript, jquery, html

我有以下 HTML 表格。每行包含一个复选框，后跟一些文本。

```
<table>
    <tr>
        <td><input type="checkbox" /></td>
        <td>Name</td>
    </tr>
    <tr>
        <td><input type="checkbox" /></td>
        <td>Name2</td>
    </tr>
</table> 
```

我需要一些帮助来编写一个脚本，该脚本将突出显示（添加一个类）已选中的行，取消选中将删除该类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:57:45.470

```
$("#yourTableId input:checkbox").change(function() {
        var $this = $(this);
        if ($this.is(":checked")) {
            $this.closest("tr").addClass("highlight");
        } else {
            $this.closest("tr").removeClass("highlight");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:04:08.463

[http://codebins.com/codes/home/4ldqpb8](http://codebins.com/codes/home/4ldqpb8)

```
 $(":checkbox").change(function() {
        $(this).closest("tr").toggleClass("highlight", this.checked)
    }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T01:51:28.300

```
$('[type="checkbox"]').change(function(){
  $(this).parents('tr').toggleClass('highlight')
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T01:51:58.973

**演示** [http://jsfiddle.net/328QV/](http://jsfiddle.net/328QV/)

**代码**

```
$(document).ready(function() {
    $("#Table input").click(function() {
        if ($(this).is(":checked")) {
            $(this).parent().parent().addClass("highlight");
        } else {
            $(this).parent().parent().removeClass("highlight");
        }
    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T09:16:01.050

看看这个[小提琴](http://jsfiddle.net/u1esuvhz/)

**JS**

```
$(document).ready(function () {
    $("input:checkbox").change(function () {
        alert();
        if ($(this).prop("checked") == true) {
            $(this).closest('tr').addClass("checked");
        } else $(this).closest('tr').removeClass("checked");
    });
}); 
```

**CSS**

```
.checked {
    background-color:red;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-03T09:27:45.937

为我工作

```
 $(document).on('click','tr',function(){
    if ($(this).css('background-color')=="rgb(143, 162, 225)") {

        $(this).find('input[type="checkbox"]').prop('checked',false);

        $(this).css('background','#ffffff'); 
    } else{
        $(this).find('input[type="checkbox"]').prop('checked',true);

        $(this).css('background','#8FA2E1'); `enter code here`
    }
}); 
```

# java - 在我的 GUI 中控制鼠标事件

> ID：11380067
> 
> 赞同：0
> 
> 时间：2012-07-08T01:48:30.950
> 
> 标签：java, user-interface, 3d, actionlistener, jmonkeyengine

我用 JMonkeyengine 开发了一个游戏 GUI ![在此处输入图像描述](../Images/eb13cbe07ee16fb2d8339351e502524b.png)

```
package adventure;

import java.applet.Applet;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.JFrame;
import javax.swing.JPanel;

import com.jme3.app.SimpleApplication;
import com.jme3.asset.plugins.ZipLocator;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.CollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.AmbientLight;
import com.jme3.light.DirectionalLight;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector3f;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;

/**
 * Example 9 - How to make walls and floors solid. This collision code uses
 * Physics and a custom Action Listener.
 * 
 * @author normen, with edits by Zathras
 */
public class TownView extends SimpleApplication implements ActionListener,
        Playable {

    private Spatial sceneModel;
    private BulletAppState bulletAppState;
    private RigidBodyControl landscape;
    private CharacterControl player;
    private Vector3f walkDirection = new Vector3f();
    private boolean left = false, right = false, up = false, down = false;

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                TownView canvasApplication = new TownView();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Swing Application");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                World world = new DungeonWorld(canvasApplication);
                Person me = new Person(world, "You", null);
                PlaceView placeview = new PlaceView(me);
                Commands commands = new Commands(me);
                TextArea textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a dungeon. The horrible shrieks of the undead chill your bones.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    public void simpleInitApp() {
        /** Set up Physics */
        bulletAppState = new BulletAppState();
        stateManager.attach(bulletAppState);
        // bulletAppState.getPhysicsSpace().enableDebug(assetManager);

        // We re-use the flyby camera for rotation, while positioning is handled
        // by physics
        viewPort.setBackgroundColor(new ColorRGBA(0.7f, 0.8f, 1f, 1f));
        flyCam.setMoveSpeed(100);
        setUpKeys();
        setUpLight();

        // We load the scene from the zip file and adjust its size.
        assetManager.registerLocator("town.zip", ZipLocator.class);
        sceneModel = assetManager.loadModel("main.scene");
        sceneModel.setLocalScale(2f);

        // We set up collision detection for the scene by creating a
        // compound collision shape and a static RigidBodyControl with mass
        // zero.
        CollisionShape sceneShape = CollisionShapeFactory
                .createMeshShape((Node) sceneModel);
        landscape = new RigidBodyControl(sceneShape, 0);
        sceneModel.addControl(landscape);

        // We set up collision detection for the player by creating
        // a capsule collision shape and a CharacterControl.
        // The CharacterControl offers extra settings for
        // size, stepheight, jumping, falling, and gravity.
        // We also put the player in its starting position.
        CapsuleCollisionShape capsuleShape = new CapsuleCollisionShape(1.5f,
                6f, 1);
        player = new CharacterControl(capsuleShape, 0.05f);
        player.setJumpSpeed(20);
        player.setFallSpeed(30);
        player.setGravity(30);
        player.setPhysicsLocation(new Vector3f(0, 10, 0));

        // We attach the scene and the player to the rootNode and the physics
        // space,
        // to make them appear in the game world.
        rootNode.attachChild(sceneModel);
        bulletAppState.getPhysicsSpace().add(landscape);
        bulletAppState.getPhysicsSpace().add(player);
    }

    private void setUpLight() {
        // We add light so we see the scene
        AmbientLight al = new AmbientLight();
        al.setColor(ColorRGBA.White.mult(1.3f));
        rootNode.addLight(al);

        DirectionalLight dl = new DirectionalLight();
        dl.setColor(ColorRGBA.White);
        dl.setDirection(new Vector3f(2.8f, -2.8f, -2.8f).normalizeLocal());
        rootNode.addLight(dl);
    }

    /**
     * We over-write some navigational key mappings here, so we can add
     * physics-controlled walking and jumping:
     */
    private void setUpKeys() {
        inputManager.addMapping("Left", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("Right", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("Up", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("Down", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("Jump", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "Left");
        inputManager.addListener(this, "Right");
        inputManager.addListener(this, "Up");
        inputManager.addListener(this, "Down");
        inputManager.addListener(this, "Jump");
    }

    /**
     * These are our custom actions triggered by key presses. We do not walk
     * yet, we just keep track of the direction the user pressed.
     */
    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("Left")) {
            left = value;
        } else if (binding.equals("Right")) {
            right = value;
        } else if (binding.equals("Up")) {
            up = value;
        } else if (binding.equals("Down")) {
            down = value;
        } else if (binding.equals("Jump")) {
            player.jump();
        }
    }

    /**
     * This is the main event loop--walking happens here. We check in which
     * direction the player is walking by interpreting the camera direction
     * forward (camDir) and to the side (camLeft). The setWalkDirection()
     * command is what lets a physics-controlled player walk. We also make sure
     * here that the camera moves with player.
     */
    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.6f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.4f);
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        player.setWalkDirection(walkDirection);
        cam.setLocation(player.getPhysicsLocation());
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        Image im = null;

        // Load the image from the net
        try {
            URL imageSource = new URL(
                    "http://www.student.nada.kth.se/~d99-nro/" + imageName);

        } catch (MalformedURLException e) {
        }

        return im;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }

} 
```

现在我只希望鼠标和单击在画布上方的光标上注册画布，这样我就可以使用北、西、东和列表面板的按钮。你能帮我如何实现这一目标吗？现在的方式是即使光标在画布之外，鼠标和键盘事件也会在画布中注册，这使得使用 Alt+F4 关闭窗口是关闭窗口的唯一方法，我无法使用我的方向按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:24:31.450

```
public void simpleInitApp() {
    flyCam.setDragToRotate(true);
    ... 
```

只需在手册中阅读它就可以了。

# c# - Sybase 的查询分析器

> ID：11380072
> 
> 赞同：1
> 
> 时间：2012-07-08T01:48:57.220
> 
> 标签：c#, sql, sybase, analyzer

我正在从 C# 代码查询 Sybase 数据库。是否有任何好的查询分析器来理解生成的确切查询，例如 Sql Server 的查询分析器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:47:37.967

您可以设置一些 Sybase 变量来查看查询计划，如下所示：

```
set showplan  on
set statistics io on
set statistics time on
exec my_proc (my_arg1, my_arg2, ...)
go 
```

我已将其放入 shell 脚本中以传递命令行参数。在这种情况下，这些 SQL 行前面带有以下内容：

```
isql  -Uxxx   -Pyyy   <<-_EOF_ 
```

exec 行变为：

```
exec $* 
```

脚本以：

```
go
_EOF_ 
```

好 SQL，晚安。

凯利805

# css - 为什么我的 div 出来的高度比身体大？

> ID：11380074
> 
> 赞同：0
> 
> 时间：2012-07-08T01:49:13.537
> 
> 标签：css, layout, html, css-float

这是我`style.css`的基于 Blankslate 的 Wordpress 主题（我没有更改任何 PHP。我刚刚启动了 CSS）。

我已经突出显示了元素的边框以使它们可见......并且所有内容都溢出了`body`边框。这是整个 CSS：

```
/* = CSS Reset 
-------------------------------------------------- */

html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{font-size:100%;font:inherit;padding:0;border:0;margin:0;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}.sticky{}.bypostauthor{}.wp-caption{}.wp-caption-text{}.gallery-caption{}.alignright{}.alignleft{}.aligncenter{}

/* =Highlight
highlight the basic structural elements of the site
-------------------------------------------------- */

body {border: thin solid red;}

#sidebar {border: thin solid blue;}
#content {border: thin solid green;}

/* =Structure
-------------------------------------------------- */

body {
    width: 1000px;
    float: center;
    margin: auto;
}

#sidebar {
    width: 300px;
    float: right;
}
#content {
    width: 500px;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T01:57:48.510

在你的花车周围添加一个容器`overflow:hidden`（出于某种原因，这似乎`body`不像我认为的那样直接起作用）。见[**演示**](http://jsfiddle.net/PgLEa/)。

并且 remove `float:center`，没有这样的浮点值。要`body`水平居中（或任何其他具有宽度的块），你`margin: auto`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:56:56.833

尝试：

```
body {
  clear: both;
} 
```

或在正文末尾附加一个 div 并带有 clear:both css

就像是

```
<body>
  <div id='sidebar'></div>
  <div id='content'></div>
  <div class='clear'></div>
</body> 
```

和CSS

```
.clear {
  clear: both;
} 
```

问题是你浮动了body标签的所有内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T16:06:48.813

我通过将正文和 html 都设置为溢出隐藏并在正文中添加一些底部填充来使我的工作正常：

```
html {
overflow: hidden;
}

body {
overflow: hidden;
padding-bottom: 2%;
} 
```

# c++ - 对象的 std::vector 和排序导致分段错误

> ID：11380080
> 
> 赞同：0
> 
> 时间：2012-07-08T01:51:08.613
> 
> 标签：c++, sorting, segmentation-fault, stdvector

我已经安静地坐在这个问题上几个小时了，找不到解决方案。我试图摆脱一些自定义数组类，并希望将它们更改为 std::vector。

我有一个这样声明的类成员：

```
std::vector<BaseCluster *> baseClusters; 
```

在类构造函数中，我没有将向量初始化为特定大小。我保持原样，未初始化。之前，我尝试将 if 初始化为某个大小（以获得一些性能并防止许多重新分配），但这给我在循环中访问元素带来了问题（例如，将它们打印出来）。我猜这是由于使用默认构造函数（BaseCluster 类型）作为 NULL-Objects 初始化对象？

但是，在一个循环中，我用这样的对象填充向量

```
baseClusters.push_back(new BaseCluster(current, score)); 
```

循环完成后，我对不感兴​​趣的对象进行了一些清理：

```
for (unsigned int i = 0; i < baseClusters.size(); i++) {
    // --- testing   
    if (baseClusters.at(i) == NULL) {
       wcout << i << ". object is NULL" << endl;
    }
    if (
      ((BaseCluster *) baseClusters.at(i))->getNode()->getSuffixedDocumentsCount() < minimalGroupSize
    ) {
        baseClusters.erase(baseClusters.begin() + i);
    }

    if (i >= noMoreBaseClustersThan) {
        baseClusters.erase(baseClusters.begin() + i);
    }
} 
```

现在我对向量进行排序（应该按分数降序排序），这里有一个问题：

1.) 使用排序为

```
sort(baseClusters.begin(), baseClusters.end()); 
```

根本不排序，我在 BaseCluster 类中实现的“operators<”或“operator>”也完全没有被触及。运营商是公开的，看起来像这样。

```
bool operator< (const BaseCluster * rhs) const {
    return m_score < rhs->m_score;
}

bool operator> (const BaseCluster * rhs) const {
    return m_score > rhs->m_score;
} 
```

2.) 使用谓词/函子

```
class BaseClusterComparator {
public:
    bool operator() (const BaseCluster * a, const BaseCluster * b) const {
        wcout << "BaseClusterComparator" << endl;
        wcout << a->getScore() << " <> " << b->getScore() << endl;
        if (a->getScore() > b->getScore()) {
            return -1;
        } else if (a->getScore() < b->getScore()) {
            return 1;
        } else {
            return 0;
        }
    }
}; 
```

类成员 getScore 看起来像这样

```
float
BaseCluster::getScore() const {
    return m_score;
} 
```

并执行排序

```
sort(baseClusters.begin(), baseClusters.end()), BaseClusterComparator()); 
```

在对大约 60 - 70 个对象进行排序后尝试访问 getScore() 方法时将导致分段错误。

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004773ec in BaseCluster::getScore (this=0x2ef1) at algorithm/BaseCluster.cpp:44
44      return m_score; 
```

我有一种感觉，由于向量的保留/调整大小，存在 NULL 对象（使用 BaseClass 的默认构造函数构造？！）。

现在我被困在如何解决这个问题上。我在这里做错了什么？在问here之前，我一直在阅读许多其他相关的stackoverflow问题，然后在这里和那里进行更改，但没有办法摆脱困境。故障。据我所知，我没有插入任何空对象（在循环中测试过），所以我的代码中肯定存在另一个缺陷。认为更改为指针向量是一项安静的简单任务，但现在似乎更复杂了......

拜托，有人帮我解决这个问题。提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:00:40.997

您的比较器是错误的：

`std::sort`不像比较器中的 qsort 。您只需返回与小于运算符相同的值。例如

```
class BaseClusterComparator {
public:
    bool operator() (const BaseCluster * a, const BaseCluster * b) const {
        return a->getScore() < b->getScore();
    }
}; 
```

# jquery - jQuery：为什么我不能让这个动画重复？

> ID：11380081
> 
> 赞同：0
> 
> 时间：2012-07-08T01:51:17.967
> 
> 标签：jquery, jquery-animate, repeat

html:

```
<div id="slider">
    <img src="images/02.jpg" alt="" class="two">
    <img src="images/01.jpg" alt="" class="one">    
    <img src="images/03.jpg" alt="" class="tri">
    <img src="images/04.jpg" alt="" class="four">
    <img src="images/05.jpg" alt="" class="five">
</div> 
```

CSS：

```
.one, .two, .tri, .four, .five {position: absolute;}  
.two {bottom: 0;}
.tri {left: -348px;}
.four {left: 348px; top: 19.8em;}
.five {right: -257px;} 
```

这是动画：

```
var one = $('.one');
var two = $('.two');
var tri = $('.tri');
var four = $('.four');
var five = $('.five');

$(two, tri, four, five).hide();

//first image
$(one).animate({
        'top' : '-17.5em'
    }, 8000, function() {
        $(two).show();
        $(one).delay(6000).fadeOut(1500);
    });

    //second image
    $(two).delay(13700).animate({
        'bottom' : '-30.7em'
    }, 11000, function() {
        $(tri, four, five).show();
        $(two).delay(6000).fadeOut(1000);
    });

    //third/fourth/fifth image
    $(tri).delay(31500).animate({
        'left' : '0'
    }, 600, function() {
        $(tri).delay(6000).fadeOut(1000);
    });

    $(four).delay(31500).animate({
        'top' : '0'
    }, 600, function() {
        $(four).delay(6000).fadeOut(1000);
    });

    $(five).delay(31500).animate({
        'right' : '0'
    }, 600, function() {
        $(one).delay(5000).css({'top' : '0'}).fadeIn();
        $(five).delay(6000).fadeOut(1000);
    }); 
```

（我尝试将它放入回调函数中，但无法使其工作，所以我使用了延迟。我知道这是一个不同的问题，但如果有人知道为什么回调不起作用，请告诉）

无论如何，我试图让这个动画无限期地重复。我试过 setInterval，我试过把它放到一个函数中，然后从内部再次调用它，通常我可以在网上找到任何潜在的解决方案，但似乎没有任何效果。您能给我的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:21:48.250

试试这个

```
var ctr = 0;
function animate_me(){
++ctr;
//your code;
console.log('animating... #'+ ctr);

//setTimeout(animate_me, 6000);
setTimeout(animate_me, 1500);
}

$(function() {
    animate_me();
}); 
```

# php - 试图让类别显示

> ID：11380087
> 
> 赞同：0
> 
> 时间：2012-07-08T01:53:07.280
> 
> 标签：php, mysql

我正在尝试从 mysql 数据库中获取我的类别以显示，并通过 php 包含将其添加到我的索引页面，这是类别页面虽然这是我收到错误的地方，但不知道为什么？

```
<?php //which category are we showing?
$category_id = $_GET['catid']; ?>

<h2>All Categories</h2>

<?php
//get 2 latest published posts
$query_latest = "SELECT title, body, date, category_id, post_id
                    FROM posts 
                    WHERE is_published = 1
                    AND category_id = $category_id
                    ORDER BY date DESC";

//run the query code on the DB
$result_latest = mysql_query( $query_latest );

//loop it, work with one post at a time
while( $row_latest = mysql_fetch_array( $result_latest ) ){  ERROR ROW 19
 ?>
<div class="post">
    <h2><?php echo $row_latest['title'] ?></h2>
    <h3>Posted on <?php echo $row_latest['date']; ?> in the category of something</h3>
    <p><?php echo $row_latest['body'] ?></p>
</div>
<?php } //end while loop ?> 
```

* * *

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given 
in C:\xampp\htdocs\schellshockdesign.com\term5final\finalproject\category.php 
on line 19 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:34:01.167

您没有连接到数据库。

此外，您应该使用 mysql_fetch_assoc() 而不是 mysql_fetch_array()。

此外，您应该在查询中使用的变量上使用 mysql_real_escape_string。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:37:18.443

请尝试以下步骤。可能您可以使用以下方法对其进行调试。

1.  回显查询并尝试在 phpadmin 执行。如果它在那里运行，则问题出在数据库连接上。

2.  如果查询没有运行，那么它清楚地表明问题出在查询 ..like 字段不正确、错误的表名、错误的数据输入等等。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:09:40.843

这应该适合你

```
<h2>All Categories</h2>

<?php

$category_id = htmlspecialchars($_REQUEST["catid"]);
$category_id = preg_replace("/[^0-9]/","", $category_id);

//get 2 latest published posts

$SQL = "SELECT * FROM posts WHERE is_published = '1' AND category_id = '$category_id' ORDER BY date DESC LIMIT 2";
$result = mysql_query( $SQL );
while( $row = mysql_fetch_array( $result ) ) {
$category_id = $row["category_id"]; 
$post_id = $row["post_id"]; 
$title = $row["title"];
$body = $row["body"];   
$date = $row["date"];   

    echo '<div class="post">
    <h2>'.$title.'</h2>
    <h3>Posted on '.$date.' in the category of something</h3>
    <p>'.$body.'</p>
    </div>';
    }
    ?> 
```

# php - 防止目录遍历时webroot和文档根的区别

> ID：11380088
> 
> 赞同：3
> 
> 时间：2012-07-08T01:53:08.280
> 
> 标签：php, directory-traversal

有人告诉我，尽可能多地将我的 PHP 文件保留在 public_html 之外是一种很好的做法。

有人建议我使用定义魔法常量来引用 public_html 之外的文件，这很好，我可以通过这样做从 public_html 上移一个目录。

我现在的问题是：

1.  webroot和文档根有什么区别？

2.  为了防止诸如目录遍历之类的事情，只引用public_html之外的一个目录是否可以？还是我需要更进一步，许多目录以确保无法访问这些文件？

我还不仅希望避免/防止目录遍历，而且还希望隐藏重要文件，例如每次建立连接时包含我的 MySQL 用户名和登录详细信息的连接文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T01:58:22.753

Webroot 和文档根只是两个不同的术语，在 Web 开发的情况下，它们的含义相同。

只有 webroot 中的文件（在您的情况下`public_html`）可以通过网络访问。它之外的任何东西都只能由服务器本身访问。`public_html`因此，您可以在您不希望 Web 访问的所有与 Web 相关的文件旁边创建一个文件夹。

但是，请记住，用户永远不会看到 PHP 源代码，因为它会在文件发送给用户之前执行。这意味着即使用户尝试访问您的“连接到数据库”文件，他们将得到的只是一个空白页面，并且没有您的登录凭据的痕迹。

# vb.net - 声明用作 lambda 转换异常的委托

> ID：11380089
> 
> 赞同：0
> 
> 时间：2012-07-08T01:53:17.690
> 
> 标签：vb.net, delegates

使用 lambda 表达式会导致内存泄漏吗？

我试图在 sub 中声明一个委托并将其用作“仅一次”事件处理程序，然后在它被触发后将其设置为空。像这样的东西：

```
Private Sub MySub()
    Dim o As SomeObject
    Dim d as System.Delegate = Sub()
                  'Do some stuff
                   d = Nothing
                End Sub
    AddHandler o.SomeEvent, d
End Sub 
```

但我在 addhandler 上得到一个无效的强制转换异常。但是这样的事情可能/需要吗？

抱歉没有代码 hilite 我在 stack mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:23:14.247

下面的例子是一个windows窗体；该表单包含一个按钮，其 Click 事件连接到子例程：Button1_Click。

单击该按钮会导致创建 SomeClass (o)，添加事件处理程序并开始工作。StartWork 将调用创建线程的匿名方法，使用另一个模拟工作的匿名方法，然后释放 (o) 引用。

```
Public Class Form1
    Private Class SomeClass
        Public Event DoWork()

        Sub StartWork()
            RaiseEvent DoWork()
        End Sub
    End Class

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Debug.WriteLine("Button1_Click Started.")
        ' create class
        Dim o As New SomeClass()
        ' add handlers
        AddHandler o.DoWork, Sub()
                                 Debug.WriteLine("o.DoWork Event Handler Started.")
                                 ' threading
                                 Dim t As New Threading.Thread(Sub()
                                                                   Debug.WriteLine("Worker Thread Started.")
                                                                   ' simulate work (5 seconds)
                                                                   Threading.Thread.Sleep(5000)
                                                                   ' release reference
                                                                   o = Nothing
                                                                   Debug.WriteLine("Worker Thread Stopped.")
                                                               End Sub)
                                 t.Start()
                                 Debug.WriteLine("o.DoWork Event Handler Stopped.")
                             End Sub
        ' start the work
        o.StartWork()
        Debug.WriteLine("Button1_Click Stopped.")
    End Sub
End Class 
```

# iphone - iPhone 按钮操作

> ID：11380096
> 
> 赞同：0
> 
> 时间：2012-07-08T01:56:21.980
> 
> 标签：iphone, xcode, button, storyboard

我遇到的问题是，当我在我的 iPhone 应用程序的主故事板中并且我控制单击并将我的按钮拖动到我想要与之关联的 .h 文件时，.h 文件中没有任何反应，它真的让我困惑。我在同一个故事板中有其他页面，这种方法可以很好地使用。我不确定为什么会这样。

不确定这是否重要，但我最后一次尝试点击拖动是在我发布这个应用程序之前，现在我正在为它进行更新。

其他人有这个问题吗？我找到了一种可能对某人有用的解决方案（清除 PRAM），但这对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:41:50.623

您必须验证情节提要中 ViewController 的名称类与您的 .h 文件相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:49:53.180

![在此处输入图像描述](../Images/1b92433781bb60c42fe14f95ee1e588a.png)按`Ctrl button + drag`你的按钮查看控制器.h 然后“ `Insert Outlet and Outlet Collection`”将出现。之后，您将手指移开鼠标，您将获得有关连接的插座框。它具有连接、名称、类型属性。我想这会对你有所帮助。

# ocaml - 安装 findlib 错误？

> ID：11380098
> 
> 赞同：1
> 
> 时间：2012-07-08T01:57:09.767
> 
> 标签：ocaml, ocamlfind

[我从http://download.camlcity.org/download/findlib-1.3.2.tar.gz](http://download.camlcity.org/download/findlib-1.3.2.tar.gz)下载了 findlib 。`configure`成功后，`make all`报告：

```
for p in findlib; do ( cd src/$p; make all ); done
"Makefile", line 141: Could not find depend
make: fatal errors encountered -- cannot continue
*** Error code 1enter code here 
```

我正在使用 FreeBSD 9.0。之后`pkg_add -r ocaml`，没有findlib。

真挚地！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T06:22:24.767

[显然](http://lists.freebsd.org/pipermail/freebsd-ports-bugs/2012-May/233273.html)有一个最新的 ocaml-findlib 端口。你试过了吗？

# achartengine - achartengine - 采取积分？

> ID：11380101
> 
> 赞同：0
> 
> 时间：2012-07-08T01:57:37.720
> 
> 标签：achartengine, integral

我正在使用 achartengine 来显示实时数据。有谁知道是否可以通过使用一些不错的 achartengine 方法对显示的图形进行积分？还是我必须求助于矩形的近似值？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:15:14.210

不，achartengine 没有办法计算积分。要获得积分的数值，您需要自己进行近似，或者如果您有明确定义的函数，请使用某种数学库。

根据您拥有的数据类型，有几种方法可以进行近似，如果您有一个具有合理分辨率的等距数据集，只需将它们相加即可得到一个简单的近似值。

# ssh - 通过 SSH 在远程 LINux 上设置延迟关闭时间然后退出

> ID：11380105
> 
> 赞同：1
> 
> 时间：2012-07-08T01:58:09.123
> 
> 标签：ssh, exit, shutdown, flush

我已经查看了 SOF 上的所有答案，但没有看到什么可行。

## 我的目标：

让 EC2 QA 服务器在上次使用后 55 分钟自行停止

## 我的策略：

每次使用远程机器时，首先检查它是否正在运行。如果是，请执行以下操作：

1.  ssh 进入机器
2.  run 'sudo shutdown -c' #clears last pending shutdown
3.  运行 'sudo shutdown -h +55' #restarts timer for 55 分钟关机
4.  出口

去做我剧本的事

## 什么有效：

所有命令都在 1 和 2 本地工作。数字 3 和 4 是部分的，如下所述。

## 什么不起作用：

调用新的关闭停止的行，它等待 ssh 连接关闭，对于末尾没有“&”的命令版本永远不会这样做。

## 我试过的：

echo "nohup sudo shutdown -h +55; 退出" | ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress

echo "nohup sudo shutdown -h +55& 退出" | ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress

echo "sudo 关机 -h +55& 退出" | ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress

ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress nohup sudo shutdown -h +55

ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress nohup sudo shutdown -h +55; 出口

## 什么样的作品：

ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress nohup sudo shutdown -h +55&

ssh -i $HOME/.ec2/cert_name root_user_name@ipad.dress sudo shutdown -h +55&

## 什么是“排序”：

部分成功的命令设置关闭，退出 ssh 就好了。但是他们用远程屏幕上的最后一个命令结果填充本地屏幕缓冲区。这与脚本中下一个命令的结果一起出现。

我想我可以连续两次发出“回显“刷新缓冲区”并清除它。

那里有更完整和更清洁的东西吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:05:06.547

好的，4 天后，我有一些效果很好的东西。我在谷歌或堆栈溢出搜索中没有看到类似的东西。

本质上，便宜的服务器用作更昂贵的服务器的保持活动（120 分钟）或重新启动（如果已经超时）控制器。对于比（1 台便宜的服务器）->（1 台昂贵的服务器）更复杂的设置，有一些提示。否则称为“读者练习”:-)

[https://github.com/kwince/costlyServerShutDown](https://github.com/kwince/costlyServerShutDown)

保持活动或重新启动的触发器是在廉价服务器的 apache 服务器根目录上执行“wget”文件。同样，快速而肮脏，但非常有效。

# php - PHP MYSQL 无法连接 (HY000/2002)

> ID：11380106
> 
> 赞同：3
> 
> 时间：2012-07-08T01:58:16.737
> 
> 标签：php, mysql

我在本地服务器（WAMP）上的网站上工作，php 和数据库运行良好。但是当我将网站上传到托管服务器时。并尝试登录，数据库连接不起作用。当我使用 DB 函数时，它会给我警告`mysqli::mysqli()`。

整个错误如下：

```
Warning: mysqli::mysqli() [mysqli.mysqli]: (HY000/2002): No connection could be made
because the target machine actively refused it. 
in D:\Hosting\XXXXX\html\raw\database\connect.php on line 9 
```

继续

```
Warning: mysqli::mysqli() [mysqli.mysqli]: [2002] No connection could be made because
the target machine actively (trying to connect via tcp://localhost:3306) in     
D:\Hosting\XXXXX\html\raw\database\connect.php on line 9

Warning: mysqli::query() [mysqli.query]: Couldn't fetch mysqli in    
D:\Hosting\XXXXX\html\raw\functions\users.php on line 10 
```

connect.php 的 php 代码是：

```
<?php

    require_once 'Internal/Var.php';
    //mysql_connect(D_SERVER, D_USER, D_PASSWORD);
    //mysql_select_db(D_NAME);

    function create_connection()
    {
        $conn = new mysqli(D_SERVER, D_USER, D_PASSWORD, D_NAME);
        return $conn;
    }

    function close_connection(mysqli $con)
    {
        $con->close();
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:00:40.583

您需要为您的连接指定`username`and 。`password``MySQLi`

```
require_once 'Internal/Var.php';
// Remove the two procedural connection lines here

function create_connection()
{
    // Make sure D_SERVER, D_USER, D_PASSWORD, D_NAME have the correct values
    // These values are probably created in Internal/Var.php
    $conn = new mysqli(D_SERVER, D_USER, D_PASSWORD, D_NAME);

    return $conn;
}

function close_connection(mysqli $con)
{
    $con->close();
} 
```

# javascript - 无法单击带有另一个 div 后面的链接的 div 绝对位置将不起作用

> ID：11380117
> 
> 赞同：11
> 
> 时间：2012-07-08T02:01:13.503
> 
> 标签：javascript, jquery, html, css

我在另一个带有 html 链接的 div 后面有一个 div。问题是这个 div 在 jquery 制作的内容滑块中。正因为如此，我无法单击下面的 div 上的链接。有没有办法让它可以点击。我试过`position:absolute`了，但没有用。也许有一个 jquery hack 之类的？

阻止我的导航 div 的 div 称为“maincontent”，导航 div 称为“nav”，问题是 maincontent div 位于“nav”div 上方，因为我使用它是因为`margin-top: -60px;`我需要对其进行编码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T03:06:05.553

添加`position:relative`到导航栏。没做吗？这是因为 maincontent 上有一个`z-index`集合。在导航块中也添加一个，并确保它高于 maincontent 上的设置。我猜就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:31:59.197

如果您确定make`nav`出现`maincontent`不会导致任何视觉问题（例如导航阻碍 maincontent 的某些内容）-那么您可以尝试`z-index`在这两个 DIV 上使用 CSS 属性，并将 of 设置`z-index`为`nav`高于（例如 100）`z-index`（`maincontent`可能是 50 - 数字完全是任意的，只需检查布局中是否有任何其他元素具有`z-index`设置，并且不要与这些元素冲突）。

当然，当心可怕的 IE，它在相对（或者那是绝对的？）定位和 z-index 方面存在一些奇怪的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-02T00:34:49.493

我遇到过同样的问题。

我的问题是，如果我将 z-index 更改为 >0，那么就会出现破坏设计的问题。

由于我的页面有静态元素，我使按钮适合它们的位置，但没有它们与其他元素一起在容器中。

我有：

```
.container#body-container

    #menu-buttons
        .menu-item#One
        .menu-item#Two
        .menu-item#Three
        .menu-item#Four
        .menu-item#Five 
```

当事情开始破裂时，所以我将其更改为

```
#nav-menu-container
    #One
    #Two
    #Three
    #Four
    #Five

.container#body-container

    #menu-buttons
        .menu-item
        .menu-item
        .menu-item
        .menu-item
        .menu-item 
```

我知道这有点老套，但这是迄今为止我得到的最好的。

# objective-c - Facebook-iOS-sdk 错误 操作无法完成。（facebookErrDomain 错误 10000。）

> ID：11380119
> 
> 赞同：0
> 
> 时间：2012-07-08T02:02:14.877
> 
> 标签：objective-c, ios, facebook-ios-sdk, rubymotion

好的，我一直在尝试让我的 ios 应用程序与 facebook-ios-sdk 一起使用。登录非常顺利，直到我尝试发出 /me 或 /me/friends 等 fb 请求。我收到一个非常莫名其妙的错误：

操作无法完成。（facebookErrDomain 错误 10000。）

我目前正在实现 4 个主要的回调方法：

```
 def request(request, didReceiveResponse:response)
    puts "Got it now: #{response.URL.absoluteString}"
  end

  def request(request, didLoad:result)
    puts "Another one: #{result.inspect}"
  end

  def request(request, didFailWithError:error)
    puts "Error: #{error.localizedDescription}"
  end

  def request(request, didLoadRawResponse:data)
    puts "Got raw: #{data}"
  end 
```

第二个永远不会被调用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:35:45.017

您收到错误是因为您发送的请求有问题。也许您需要将您的请求相关代码发布给其他人，以查看可能出现的问题。

第二种方法仅在请求成功完成时触发，您的情况并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:20:30.220

好的，事实证明 facebook sdk 或任何其他愚蠢的代码不会给你正确的错误信息。当我需要实际定义所需的参数时，我发送的参数值为 nil：

self.app_delegate.facebook.requestWithGraphPath("me/friends", andParams:{:fields => "name, picture, location"}, andDelegate:self)

# asp.net-mvc - 更新 MongoDb 类属性名称

> ID：11380121
> 
> 赞同：1
> 
> 时间：2012-07-08T02:02:57.347
> 
> 标签：asp.net-mvc, mongodb-.net-driver

我们的网站正在生产中（第一阶段），我们使用 MongoDB 和 Asp.Net MVC。但是对于第 2 阶段，我们需要对我们的模式类进行一些更改，例如更改属性名称和更改一些数据类型。

如果有人能指出正确的方向来编写迁移脚本以将所有属性名称更新为新名称并将数据类型更新为新类型，那就太好了！

是否可以编写一个小型 C# 应用程序来从数据库中获取所有集合并将属性名称更新为新名称并更改数据类型？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T00:16:45.777

作为 alexjamesbrown，首先重命名您的类中的属性。

然后，您可以为您的 Mongo 数据库创建一个简单的基本版本控制结构。存储最新版本，然后在应用程序启动时检查版本，并使用反射查找版本晚于版本的文件。然后，您可以简单地在源代码树中保留如下格式的文件：

```
public class Version3 : MongoMigration
{
    public Version3 (MongoDatabase database) : base(database) { }

    public override double Version
    {
        get { return 3; }
    }

    protected override void PerformUpgrade()
    {
        var collectionToUpdate = Database.GetCollection("MyCollection");
        var allDocuments = collectionToUpdate .FindAll();

        foreach (var document in allDocuments )
        {
            var oldFieldValue = document ["OldFieldName"];
            if (!document.Contains("NewFieldName"))
                document.Add("NewFieldName", oldFieldValue);
            document.Remove("OldFieldName");

            collectionToUpdate.Save(document);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:03:06.027

我最近正是这样做的。

首先，重命名代码中的所有类。
然后使用带有[renameCollection](http://www.mongodb.org/display/DOCS/renameCollection+Command)
的 mongo shell 如果这是一次性操作，则无需编写脚本。

话虽如此，您当然可以编写一个包含所有重命名的 .js 文件，以便在需要时可以轻松地在另一台服务器上再次执行它

# java - gson 未终止的字符串错误

> ID：11380124
> 
> 赞同：1
> 
> 时间：2012-07-08T02:03:40.930
> 
> 标签：java, android, json, gson

我一直在使用 Gson 将 json 对象从 appengine 传输到我的 android 客户端，没有问题。我正在使用下面的代码。

服务器：

```
Query<WaterSupply> q = ofy.query(WaterSupply.class).filter("FdID", fdID)
        .filter("timeUpdated >", lastUpdate);
Gson gson=new Gson();

resp.getWriter().print(gson.toJson(q.list())); 
```

客户：

```
List<WaterSupply> list=new ArrayList<WaterSupply>();
    String json1 =wsResult.wsResponse;

    JsonElement json = new JsonParser().parse(json1);

    JsonArray array= json.getAsJsonArray();

    Iterator<JsonElement> iterator = array.iterator();

    while(iterator.hasNext()){
        JsonElement json2 = (JsonElement)iterator.next();
        Gson gson = new Gson();
        WaterSupply ws= gson.fromJson(json2, WaterSupply.class);
        //can set some values in contact, if required 
        list.add(ws);
    }//Unable to invoke no-args constructor for interface com.jackson.FirefighterLog.shared.WaterSupplyProxy.
    //Register an InstanceCreator with Gson for this type may fix this problem.

    Gson gson = new Gson();
    Type listType = new TypeToken<List<WaterSupply>>(){}.getType();
    List<WaterSupply> wsList = (List<WaterSupply>) gson.fromJson(wsResult.wsResponse, listType); 
```

我已经开始使用更大的对象并且不得不切换到流解析实现，因为我遇到了内存不足的错误。我现在正在使用以下代码：

服务器：同上

客户：

```
 public static List<WaterSupply> readJsonStream(InputStream in) throws IOException {
        JsonReader reader = new JsonReader(new InputStreamReader(in, "UTF-8"));
        Gson gson=new Gson();
        List<WaterSupply> messages = new ArrayList<WaterSupply>();
        reader.beginArray();
    while (reader.hasNext()) {
        WaterSupply message = gson.fromJson(reader, WaterSupply.class);
        messages.add(message);
    }
    reader.endArray();
    reader.close();
    return messages;
} 
```

我假设这与换行符（/ n）有关，但我现在不确定，也不知道如何解决这个问题......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:36:07.860

我没有使用 GSon 的经验，但未终止的错误通常表示截断或解析器错误（如上所述）。我发现其他人也有同样的问题，并鼓励您纠正其他可能的“特殊字符”。在这篇文章[org.json.JSONException: Unterminated string at 737 [character 738 line 1]](https://stackoverflow.com/questions/4853917/org-json-jsonexception-unterminated-string-at-737-character-738-line-1)中，问题是 & 字符。

此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:57:00.170

看起来您的服务器发送的响应被截断了。更改您的服务器代码以执行此操作可能会有所帮助：

```
Writer writer = resp.getWriter();
gson.toJson(q.list(), writer);
writer.close(); 
```

# javascript - Javascript toString() 方法

> ID：11380126
> 
> 赞同：1
> 
> 时间：2012-07-08T02:04:40.147
> 
> 标签：javascript, methods, tostring

说`hol`是一个`Date()`对象。

为什么`hol.toString()`有用或有帮助？与仅写入/输出不一样`hol`吗？

还有其他相关的方法，例如

```
toDateString()
toTimeString() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:15:58.440

做类似`alert("The time is now: " + hol);`的事情实际上是在隐式调用`alert("The time is now: " + hol.toString());`

此外，来自 Mozilla 开发者网络 [ [1](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toDateString) ] [ [2](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toTimeString) ]：

```
var d = new Date(1993, 6, 28, 14, 39, 7);
println(d.toString()); // prints Wed Jul 28 1993 14:39:07 GMT-0600 (PDT)
println(d.toDateString()); // prints Wed Jul 28 1993
println(d.toTimeString()); // prints 14:39:07 GMT-0600 (PDT) 
```

因此，其他方法提供了不同的预定义格式。

还要注意`toDateString`和`toTimeString`方法的记录：

> toDateString/toTimeString 方法特别有用，因为实现 ECMA-262 的兼容引擎可能在从 toString 获得的 Date 对象的字符串中有所不同，因为格式取决于实现，简单的字符串切片方法可能无法在多个引擎之间产生一致的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:21:15.997

[W3Schools](http://www.w3schools.com/jsref/jsref_tostring_date.asp)上的快速浏览显示，`toString()`只要`Date()`对象需要显示为字符串，就会调用它，因此您不需要自己调用它。

另外，如果你想显示一个`Date()`对象，你应该使用你提到的方法（`toDateString()`, `toTimeString()`），但是当我编写一个显示日期的脚本时，我没有使用这些方法中的任何一个。我使用了对象的`getWhatever()`方法。`Date()`这使您可以更好地控制要显示的内容。

除非你不想自己编程 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T02:23:16.137

实际上 document.write （猜这就是你的意思`writing`）调用“toString”将任何对象转换为字符串。这是我们可以定义对象的字符串表示方式的函数。如果未定义该函数，则不会打印与该对象等效的字符串。

例如：http: [//jsfiddle.net/8bP37/](http://jsfiddle.net/8bP37/)

也试试这个

```
Date.prototype.toString = null;
document.write(new Date()); 
```

您可以看到显示的时间值。

# web2py - 在 web2py 中使用 @auth 装饰器

> ID：11380130
> 
> 赞同：0
> 
> 时间：2012-07-08T02:05:15.173
> 
> 标签：web2py

对于我的应用程序的许多功能，它需要使用

```
@auth.requires_login() 
```

这是否意味着必须运行与模型中定义的对象相关的所有代码**才能**`Auth`将请求提供给需要装饰器的操作？如果不是，我应该如何重构代码以尽量减少不必要的代码部分执行？**`Auth`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:30:21.133

仅仅检查用户是否登录并不一定需要运行所有的 Auth 代码。您必须实例化 Auth 对象，但不必运行`auth.define_tables()`（它定义了所有 Auth 表）。请注意，如果您不定义 Auth 表，则`auth.navbar()`辅助函数将无法按原样工作，因为它会尝试引用 auth_user 表的属性。作为一种解决方法，您可以创建一个自定义导航栏功能（无论如何您都可能想要这样做），或者至少定义一个表。**

# php - MySQL 查询排序/分组性能

> ID：11380131
> 
> 赞同：2
> 
> 时间：2012-07-08T02:05:17.477
> 
> 标签：php, mysql, performance, sorting, group-by

我有一个包含以下字段的表“内容”：

```
id (an unique, increasing identifier)
user_id
content1
content2
content3
... 
```

该表可以包含来自相同或不同的数据`user_id`。我正在尝试选择按其中一个`content`字段排序的数据。但是，我只想从不同的“user_id”中选择数据，并始终采用用户的最新条目（因此是最高`id`值）。我不能仅仅`group by user_id`因为分组发生在排序之前。

这就是我目前正在做的事情：

```
SELECT *
FROM `content`
WHERE `content`.`id` = (
    SELECT `id`
    FROM `content` as `alt`
    WHERE `alt`.`user_id` = `content`.`id`
    ORDER BY `id` DESC
    LIMIT 1 )
ORDER BY content1 DESC 
```

它可以工作，但是一旦表变大，性能就会变得太慢。有人可以给我一个建议如何改进这个查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:10:00.000

数据越多越慢的原因是因为您的子查询正在为表中的***每一行***`content`执行。

此解决方案应该更快，因为子选择只会执行一次，然后该子选择的结果将*连接*到同一个表 - 使用索引：

```
SELECT b.*
FROM
(
    SELECT MAX(id) AS maxid
    FROM content
    GROUP BY user_id
) a
INNER JOIN content b ON a.maxid = b.id
ORDER BY b.content1 DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:08:35.400

您需要 2 步方法而不是 1 个完整的 SQL 来提高性能。

1.  创建临时表

    创建临时表 id_Temp as SELECT `id` FROM `content`as `alt` WHERE `alt`。`user_id`= `content`。`id`

2.  从临时表中选择数据

    选择 * 从`content` 哪里`content`。`id`= ( 从 id_temp 中选择 id ORDER BY `id`DESC 限制 1) ORDER BY content1 DESC

以我的经验，这种两步方法使响应时间恒定。使用这种方法，250 万页/天的网站与廉价的 2 Liunx BOX 配合得很好。

# javascript - MVC 动作方法和 Javascript

> ID：11380135
> 
> 赞同：0
> 
> 时间：2012-07-08T02:06:10.713
> 
> 标签：javascript, jquery, asp.net-mvc-3, api

我有一个简单的脚本视图，如下所示：

```
 <script type="txt/javascript">
   function DoSomething(param)
   {
     alert(param);
   }
 </script> 
```

无论如何我可以用控制器操作方法返回结果中的值调用该函数吗？

**编辑：**

我真的希望使用实体框架值创建/注册 JavaScript 类。如果无法完成，我如何使用 EntityFramework 值创建/注册 Javascript 类？

好的，事情是这样的：我已经有一个类似这样的 JS 函数：

```
RegisterClasses(param1, param2)
   {
     ......
   } 
```

我已经通过 Fiddler 在其他地方看到过它，但不知道他们是如何做到的。

如何将值传递给该 JS 函数以从 EF 中的值创建类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:27:49.990

您可以 JSON 将您的模型序列化为视图：

```
@model MyViewModel

<script type="text/javascript">
    var model = @Html.Raw(Json.Encode(Model));

    // now the model variable is a JSON representation of your
    // server side model that was passed by the controller action
    // to this view and you could manipulate it as a standard js variable

    // So assuming your model contains 2 properties Param1 and Param2 you
    // could pass them to your javascript method
    RegisterClasses(model.Param1, model.Param2);

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:10:54.150

您可以做的是将其添加到视图中：

```
<script type="text/javascript">DoSomething(@Model.Param)</script> 
```

将`Param`属性添加到该操作视图模型。

要使用 EF 类，您可以这样做：

```
<script type="text/javascript">
    var jsModel = { 
                     name: "@Model.Name",
                     age: @Model.Age
                  };
</script> 
```

此外，你可以按照这个答案将任何对象转换为 json：[Convert .Net object to JSON object in the view](https://stackoverflow.com/questions/8502146/convert-net-object-to-json-object-in-the-view)

希望能帮助到你。

# cocoa - 如何让 GDataXML 忽略注释？

> ID：11380137
> 
> 赞同：3
> 
> 时间：2012-07-08T02:07:35.493
> 
> 标签：cocoa, xml-parsing, xml-comments, gdataxml

当 GDataXML 解析这一行时

```
<choices array="YES" > <!-- for now, the first answer is the right one --> 
```

它给了我`for now, the first answer is the right one`作为子元素的评论。这是 XMLParser 的预期行为吗？如何告诉 GDataXML 忽略注释？

谢谢，

z。

# javascript - 用 html 链接关闭我的 js 手风琴

> ID：11380139
> 
> 赞同：0
> 
> 时间：2012-07-08T02:08:09.563
> 
> 标签：javascript

我在顶部标题中有打开手风琴链接的 html 链接，但现在我希望其中一个将它们全部关闭。我需要在js中添加什么？

[http://imip.rvadv.com/index2.html](http://imip.rvadv.com/index2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:16:57.720

假设您想在单击具有 id 主页的主页时隐藏所有内容。您需要添加以下代码

```
$("#home").click(function(){
  $(".st-open a").click();
  $(window).scrollTop(0); // Added for scrolling top
}) 
```

# iphone - 无法将图像视图定位到中心

> ID：11380140
> 
> 赞同：0
> 
> 时间：2012-07-08T02:08:14.207
> 
> 标签：iphone, objective-c, ios, imageview, zooming

```
- (void)centerScrollViewContents {
    CGSize boundsSize = self.scrollView.bounds.size;
    CGRect contentsFrame = self.imageView.frame;

    if (contentsFrame.size.width < boundsSize.width) {
        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
    } else {
        contentsFrame.origin.x = 0.0f;
    }

    if (contentsFrame.size.height < boundsSize.height) {
        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
    } else {
        contentsFrame.origin.y = 0.0f;
    }

    self.imageView.frame = contentsFrame;
} 
```

我调用了中的`conterScrollViewContents`方法`viewWillAppear`，但是imageView不会定位到scrollView的中心。

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:39:23.360

你的代码对我来说似乎是正确的。您是否尝试调试这些值？或者您可能没有在 Interface Builder 中链接 imageView 变量？

# iphone - 具有许多不同列表的 UIPickerView

> ID：11380142
> 
> 赞同：0
> 
> 时间：2012-07-08T02:08:25.203
> 
> 标签：iphone, objective-c, ios, uipickerview

我正在编写一个使用 UIPickerView 并根据用户先前的选择填充其列表项的应用程序。我正在阅读这篇[文章](http://www.leesilver.net/1/post/2011/07/uipickerview-how-to-populate.html)，偶然发现他提到了“标签”，但无法弄清楚它是如何使用的。有人可以给我一个关于完成此任务的最佳方法的建议，如果是这个“标签”功能，请解释它是如何使用的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:20:27.727

标签只是一个与对象相关联的数字，以便您可以将该对象与其他对象区分开来。因此，假设您有多个选择器视图。对于第一个选择器视图，您可以设置一个`1`. 对于第二个，设置一个标签`2`，依此类推。

在您正在创建的应用程序中，由于您有多个选择器视图，因此您使用标签来区分每个选择器视图 -`if (pickerView.tag == 1) { //first picker view code here }`为选择器视图设置正确数量的单元格，并使用正确的列表填充其单元格。

# objective-c - 如何保持状态栏始终与根视图相同的方向

> ID：11380143
> 
> 赞同：0
> 
> 时间：2012-07-08T02:08:34.020
> 
> 标签：objective-c, ios, orientation

我通过以下方式获取当前设备方向：

```
[UIApplication sharedApplication].statusBarOrientation 
```

当我的应用程序启动时，将完成一些初始工作，这导致我的根视图在短时间内无法旋转。但是，在此期间，状态栏可以旋转。因此，如果根视图和状态栏的方向不同，我得到的方向不是我的根视图的方向。如何确保两者始终处于相同的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:33:29.070

当您在启动画面下工作时，您可以在隐藏状态栏的情况下启动应用程序，然后在您准备好从视图控制器中显示状态栏时。

请参阅[此问题](https://stackoverflow.com/questions/8531989/how-to-show-status-bar-initially-hidden-from-plist-iphone)以获取一些代码。

# c - 如何连接两个 Lua luaL_Buffer 对象？

> ID：11380144
> 
> 赞同：1
> 
> 时间：2012-07-08T02:09:12.933
> 
> 标签：c, api, lua, buffer, concatenation

使用 Lua C-API 有没有一种连接两个`LuaL_Buffer`s 的有效方法？我宁愿不做任何不必要的 memcopys 并希望结果被`luaL_pushresult()`. 缓冲区包含嵌入的零，因此我无法将它们转换为 char 数组并使用`luaL_addstring()`. 修改任一缓冲区都是可以接受的。

```
luaL_Buffer buf1;
luaL_Buffer buf2;
luaL_buffinit(L, &buf1);
luaL_buffinit(L, &buf2);  
luaL_addchar(&buf1, "a");
luaL_addchar(&buf2, "b");
luaL_addchar(&buf1, "\0");
luaL_addchar(&buf2, "\0");
luaL_pushresult(L, Want_this(&buf1, &buf2) ); // "a\0b\0" is now the Lua string 
                                              //  at the top of the stack 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T02:27:13.943

而是在 C 级别创建整个字符串并使用`luaL_addlstring`，这样可以安全地将空字符添加到缓冲区中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:28:43.307

您可以`buf2`先压入堆栈，将其添加到`buf1`（弹出），然后压入`buf1`堆栈。

```
luaL_pushresult(L, &buf2); // push "b\0" onto the stack
luaL_addvalue(&buf1); // pop that string and add it to buf1
luaL_pushresult(L, &buf1); // push "a\0b\0" onto the stack 
```

# c++ - 为什么不在我的 C++ 代码中出现双重免费错误？

> ID：11380152
> 
> 赞同：1
> 
> 时间：2012-07-08T02:10:15.943
> 
> 标签：c++, double-free

g++ 版本是`g++ (GCC) 4.1.2 20080704 (Red Hat 4.1.2-50)`

我的测试代码如下

```
 #include <iostream>
    using namespace std;

    class Handle{
    public:
            Handle(int *p, int u):_p(p),use(u){}
            ~Handle(){cout << "delete" << endl; delete _p;}
            void display(){cout << "value : " << *_p << ", use : " << use << endl;}
    private:
            int *_p;
            int use;
    };

    int main()
    {
        //Test case one
        {
        int *i = new int(10);

        Handle *h = new Handle(i, 2);
        Handle *h1 = new Handle(i, 100);

        h->display();
        h1->display();

        delete h;
        delete h1;
        //call ~Handle() two times, means free double times, why don't runtime error??
        }

        //Test case two
        {
            int *a = new int(11);
            Handle h2(a, 23);
            Handle h3(a, 33);

            h2.display();
            h3.display();

            //in this case, will double free error
        }
        cout << "ok" << endl;
        return 0;
    } 
```

只要有测试用例一，程序运行没有错误，但如果我添加测试二，这个程序会有双重免费错误。不知道这个错误是怎么发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:21:23.087

您只在额外测试中遇到问题的可能原因是它有一个新的内存分配。

许多 malloc/free new/delete 库会在双重释放期间破坏它们的数据结构。在下一次分配或释放操作之前，可能不会注意到这种损坏。这将是你的测试二。

一些库甚至可以正常运行。我相信某些版本的 Windows 实现了一个相当慢但健壮的内存堆处理程序作为兼容性选项，以免使有错误但幸运的旧软件崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:13:59.937

Handle 的析构函数被调用了两次。它在_p 上调用delete。在这两种情况下，_p 都指向 a 的单个实例。双免了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T02:13:46.303

我不知道为什么你的一个测试会导致问题，而另一个不会。两者都是错误的。 `Handle`如果它没有分配指针，则不应释放指针。那只是自找麻烦。

# c# - 存储类委托并调用特定函数

> ID：11380159
> 
> 赞同：0
> 
> 时间：2012-07-08T02:12:54.070
> 
> 标签：c#, delegates

我想编写一段代码来存储类引用并能够在其中调用特定的函数。这意味着我可以换掉这个类来实现不同的功能。例如，我可以拥有一个类实例

```
 classDelegate cl = new ofSomeClass();
     cl.executeFunction("functionName"); 
```

换句话说，我可以初始化一个计算 1+1 的类，然后初始化另一个计算 2+2 的类。这样我就可以动态地交换计算，只需传递一个不同的类来初始化 cl 。

这很难解释……希望我能说得通……这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:28:14.337

您发布的问题有些模糊，但听起来您需要定义一个接口，然后让每个不同的类实现该接口。在您的示例中，您引用了“计算”方法，您只需定义一个这样的接口：

```
public interface ICalculator
{
    int NumberOne
    {
        get;
        set;
    }

    int NumberTwo
    {
        get;
        set;
    }

    int Calculate ( );
} 
```

然后，当您创建不同的类时，它们将实现如下接口：

```
public class TwoPlusTwoCalculator : ICalculator
{
    private int _numberOne;

    private int _numberTwo;

    public int NumberOne
    {
        get
        {
            return this._numberOne;
        }
        set
        {
            this._numberOne = value;
        }
    }

    public int NumberTwo
    {
        get
        {
            return this._numberTwo;
        }
        set
        {
            this._numberTwo = value;
        }
    }

    public TwoPlusTwoCalculator ( )
    { }

    public TwoPlusTwoCalculator ( int numOne, int numTwo )
    {
        this.NumberOne = numOne;
        this.NumberTwo = numTwo;
    }

    public int Calculate ( )
    {
        return this.NumberOne + this.NumberTwo;
    }
} 
```

然后在您的代码中，当您想要调用 Calculate 方法时，您可以强制转换 TwoPlusTwoCalculator 或 OnePlusOneCalculator 或任何其他将接口实现为该接口的类的实例：

public void GetValue ( int numOne, int numTwo ) { TwoPlusTwoCalculator 计算器 = new TwoPlusTwoCalculator ( numOne, numTwo ); PerformCalculation ( 计算器为 ICalculator ); }

```
 public int PerformCalculation ( ICalculator calculator )
    {
        return calculator.Calculate ( );
    } 
```

这就是你想要完成的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:22:11.700

可能......也不清楚你想要做什么：

如果您尝试按名称调用方法 - 使用反射 -[`GetMethod(string)`](http://msdn.microsoft.com/en-us/library/system.type.getmethod%28v=vs.100%29.aspx)和[`Invoke`](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)

你也可以有多个类来实现一个接口：

```
 interface MyFunctions{
     void ExecuteFunction(string name);
  } 
```

或者使用具有公共基类的派生类（类似于接口）：

```
public abstract class MyFunctionBase {
   abstract void ExecuteFunction(string name);
} 
```

或者简单地使用`Action`类：

```
 Action myFunc = ()=> 1+1;
 myFunc(); 
```

# c# - EF CodeFirst 引用 DbContext 类

> ID：11380167
> 
> 赞同：2
> 
> 时间：2012-07-08T02:15:23.133
> 
> 标签：c#, entity-framework, dbcontext

我在 Visual Studio 中创建了一个空的 C# 项目，并添加了一个类。然后我添加了对 System.Data.Entity dll 的引用。我在我的项目中添加了一个类，然后继续为我编写一个 DbContext 对象，如下所示。但是，我收到以下错误消息。为了使用它，我需要引用哪些其他 dll？

> **错误 1 ​​命名空间“System.Data.Entity”中不存在类型或命名空间名称“DbContext”（您是否缺少程序集引用？）**

```
using System; 
using System.Linq; 
using System.Threading.Tasks;
using System.Data.Entity; 

namespace Budget.Data
{
    public class BudgetContext : System.Data.Entity.DbContext
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T02:20:23.063

DbContext 存在于较新版本的 EntityFramework 中，因此需要下载较新版本（或使用 nu-get 获取）。该 dll 称为 EntityFramework.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T21:24:44.480

[按照此页面](https://msdn.microsoft.com/en-us/data/upgradeef6.aspx "升级到 EF6")的说明进行操作。如果是新项目，第 1 步就足够了。但是，如果您有现有的项目，您将来会尝试更新。

# testing - jpa2与maven3中的spring3集成在测试中找不到实体

> ID：11380169
> 
> 赞同：1
> 
> 时间：2012-07-08T02:15:29.403
> 
> 标签：testing, jpa-2.0

我的 pom.xml 是：

```
<modelVersion>4.0.0</modelVersion>
<groupId>org.aio</groupId>
<artifactId>aio-core</artifactId>
<version>1.0.0</version>
<packaging>war</packaging>
<name>aio</name>

<properties>
    <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
    <org.springframework.security.version>3.0.2.RELEASE</org.springframework.security.version>
    <aspectj.version>1.6.9.M2</aspectj.version>
    <org.slf4j.version>1.6.1</org.slf4j.version>
    <hibernate.version>4.1.4.FINAL</hibernate.version>
    <hibernate.jpa.version>1.0.1.Final</hibernate.jpa.version>
    <commons-dbcp.version>1.4</commons-dbcp.version>
    <jackson.mapper.version>1.8.2</jackson.mapper.version>
    <freemarker.version>2.3.18</freemarker.version> 
</properties>
<build>
    <plugins>
        <!-- Configuration which allows JUnit tests to be placed in the same folder 
            as java files -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <testClassesDirectory>${project.build.directory}/test-classes/</testClassesDirectory>
            </configuration>
        </plugin>
    </plugins>
    <!-- <filters> -->
    <!-- filter files DONT end up in WAR file. -->
    <!-- <filter>src/main/recources/jdbc.properties</filter> -->
    <!-- </filters> -->
    <!-- Configuration which allows configuration files (such as xml files) 
        to be placed in the same folder as java files -->
    <resources>
        <resource>
            <directory>${basedir}/src/main/resources/</directory>
        </resource>
    </resources>
</build>

<dependencies>
    <!-- ********************************************************************** 
        ** SPRING DEPENDENCIES ** ********************************************************************** -->
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>

    <!-- Security -->
    <!--  
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springframework.security.version}</version>
    </dependency>
    -->

    <!-- URL Rewrite -->
    <dependency>
        <groupId>org.tuckey</groupId>
        <artifactId>urlrewritefilter</artifactId>
        <version>3.1.0</version>
        <scope>runtime</scope>
    </dependency>

    <!-- HIBERNATE DEPENDENCIES -->

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.jboss.spec.javax.transaction</groupId>
                <artifactId>jboss-transaction-api_1.1_spec</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>${hibernate.jpa.version}</version>
    </dependency> 
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- ********************************************************************** 
        ** OTHER DEPENDENCIES ** ********************************************************************** -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jcl</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j.version}</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${aspectj.version}</version>
        <type>jar</type>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.14</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <type>jar</type>
        <scope>provided</scope>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <type>jar</type>
        <scope>provided</scope>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
        <type>jar</type>
        <scope>provided</scope>
        <optional>false</optional>
    </dependency>

    <!-- File upload -->
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>${commons-dbcp.version}</version>
    </dependency>

    <!-- ********************************************************************** 
        ** TEST DEPENDENCIES ** ********************************************************************** -->

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

    <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.10</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.oracle</groupId>
        <artifactId>ojdbc14</artifactId>
        <version>10.2.0.4.0</version>
        <optional>false</optional>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.17</version>
        <optional>false</optional>
    </dependency>
    <!-- Jackson JSON Mapper -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>${jackson.mapper.version}</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>${jackson.mapper.version}</version>
    </dependency>
    <!-- Jackson JSON Mapper end -->

    <dependency>
        <groupId>org.freemarker</groupId>
        <artifactId>freemarker</artifactId>
        <version>${freemarker.version}</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
        <scope>runtime</scope>
    </dependency>
</dependencies>

<repositories>
    <repository>
        <id>repository.springframework.milestone</id>
        <name>Spring Framework Maven Milestone Repository</name>
        <url>http://maven.springframework.org/milestone</url>
    </repository>
    <repository>
        <id>spring-releases</id>
        <name>Spring Maven RELEASE Repository</name>
        <url>http://maven.springframework.org/release</url>
    </repository>
    <repository>
        <id>repository.jboss.org-public</id>
        <name>JBoss.org Maven repository</name>
        <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>
    <repository>
        <id>EclipseLink Repo</id>
        <url>http://www.eclipse.org/downloads/download.php?r=1&amp;nf=1&amp;file=/rt/eclipselink/maven.repo</url>
    </repository>
</repositories> 
```

和spring配置文件app-context.xml：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
        </list>
    </property>
</bean>

<context:annotation-config/>

<aop:aspectj-autoproxy />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="defaultAutoCommit" value="false" />
</bean>

 <!-- JPA EntityManagerFactoryBean for EntityManager-->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceXmlLocation" value="classpath:persistence.xml" />
    <property name="persistenceUnitName" value="persistenceUnit" />
    <property name="jpaPropertyMap">
        <props>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        </props>
    </property>
</bean>

<!-- Transaction manager for JPA -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory">
        <ref bean="entityManagerFactory" />
    </property>
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />

<context:component-scan base-package="org.aio.*">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

当我的应用程序在 Web 服务器中运行时，它可以正常工作，但是当我运行 junit 测试时，它会发生：

```
Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Article is not mapped [select count(*) from Article] 
```

但是当我复制Article.class来测试类路径'target/test-classes/org/aio/modules/'时，它可以再次工作，所以我很好奇hibernate如何自动扫描类路径中的注释实体，请帮助我。

源代码： [https ://code.google.com/p/jpa2-spring3-aio/source/checkout](https://code.google.com/p/jpa2-spring3-aio/source/checkout)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:50:46.343

啊，经过一系列测试，我发现如果我将persistence.xml放入文件夹'META-INF/'，它会找到带注释的类，但是如果我通过spring加载它

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    ...
    <property name="persistenceXmlLocation" value="classpath:persistence.xml" />
    ....</bean> 
```

所以，JPA在junit测试中的spring和标准方式之间扫描实体路径配置肯定有很大的不同。

# django - Django：直接从 Heroku 提供静态媒体文件

> ID：11380173
> 
> 赞同：4
> 
> 时间：2012-07-08T02:16:01.067
> 
> 标签：django, heroku, amazon-s3

我最近将我的第一个 Django 应用程序部署到 Heroku。这是我的硕士项目，所以可扩展性不是一个大问题。我已经阅读了直接从 Heroku 提供静态和媒体文件可能会出现的问题，并且 Amazon S3 是最好的解决方案。到目前为止，静态文件——CSS、JS——都可以从 Heroku 正确地提供。

不过，媒体文件有点问题。

用户可以上传的唯一媒体是照片。同样，由于这是一个小项目，所以数量会很低。目前，这些照片正在正常投放。但是当更新推送到 Heroku 时，现有上传照片的链接在页面上断开，必须重新上传才能再次出现，这显然是不可接受的。

我试图辨别这是否是服务媒体的问题，可以由外部主机（如 Amazon S3）或正在发生的其他事情解决。我不急于为托管付费，但如果它能解决这个问题，那么它很可能是选择的解决方案。

欢迎任何见解或经验。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-08T02:22:22.983

这是预期的行为，因为对 Heroku web dyno 文件系统的写入不会添加到源代码控制中，并且不会被视为“应用程序的一部分”。基本上，除了临时文件之外，您根本不应该允许对文件系统进行任何写入。

这不仅是向应用程序推送更新导致文件消失的问题；此外，如果您有多个网络测功机（Heroku 应用程序中最典型的用例），您的文件只会显示给碰巧点击他们上传到的网络测功机的用户。

解决方案是让您的用户直接上传到另一台服务器或 S3 并将链接传递给您的应用程序，或者让您自己的服务器自动将上传的文件发送到另一个目的地，例如 S3 本身。事实上，像 CSS 这样的静态资产也可以从 S3 中得到更好的服务，但这有时是实用的，有时不是。

# javascript - 使用getJSON时，如何获取响应数据？

> ID：11380175
> 
> 赞同：4
> 
> 时间：2012-07-08T02:16:14.977
> 
> 标签：javascript, jquery, json, getjson

发生了一些奇怪的事情......我有他以下功能：

```
getInviteLink : function() {
    var me = this,
        invite_url;

    $.getJSON('get_invite_code.json', function(data) {
        console.log(data.invite_url);
        invite_url = data.invite_url;
    });

    console.log(invite_url)

    return invite_url;
}, 
```

当它运行时，第一个控制台日志返回正确的值。但是，在第二个控制台日志上什么都没有。为什么不能从 getJSON 函数内部设置邀请 URL？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:22:08.830

因为 getJSON 方法是异步的。发生了什么...

```
getInviteLink : function() {  // this function is called...
    var me = this,   
    invite_url;               // happens right away

    $.getJSON('get_invite_code.json', function(data) {
        // Step 2, these statements don't happen until later 
        // -- when the response is received
        console.log(data.invite_url);  // this
        invite_url = data.invite_url;
    });  //  Step 1\. the getJSON is called right away

    console.log(invite_url) // this happens right after the
                            // the getJSON is called, but before
                            // it gets a response. Thus no data when the log
                            // statement is invoked

    return invite_url;      // also no data (yet) when this return statement
                            // is executed
}, 
```

**添加**`invite_url`要修复您的软件，您需要意识到在从服务器接收到 JSON 响应之前，您无法对 执行任何操作。-- 如果您的客户端最终出现网络问题或服务器问题，它可能永远不会收到。

您可以将一个函数传递给您的 getJSON 调用。该函数将使用邀请 URL。与此同时，您可以为您的客户做其他事情。

如果在您收到响应之前您的软件无事可做，则设置一个忙碌指示符（旋转圆圈或其他东西），然后启动 json 请求并让函数在您收到响应时取消忙碌指示符。

有关此的更多信息，请参阅 jQuery json 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:27:05.570

您无法在 about 代码中使用 getJSON 作为返回值。如果要使用邀请 URL，则需要使用回调函数进行重构。

在这种情况下，如果您看到控制台的顺序。它会先执行invite_url，然后执行data.invite_url。getJSON 的原因是异步调用。要使其正常工作，您需要使用 async 调用 get JSON：false with 是不可能的，您需要将 $.ajax 与 datatyoe json 一起使用。以下示例将符合您的需要。

```
getInviteLink: function() {
    var me = this,
        invite_url;

    $.ajax({
        url: 'get_invite_code.json',
        dataType: 'json',
        async: false,
        success: function(data) {
            console.log(data.invite_url);
            invite_url = data.invite_url;
        }
    });

    console.log(invite_url)

    return invite_url;
}, 
```

如果 return 在这里不是强制性的，我建议重构代码并使用回调函数而不是 async false。所以你可以使用 getJSON

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T02:20:14.210

它确实设置了它，但是是异步的。只有在服务器响应到达时才会调用回调函数。但是，该`$.getJSON`函数将在请求发送后立即返回，因此“第二个”console.log 实际上将首先发生，在调用回调函数之前。

您不能编写这样的函数来同步返回异步服务器请求的结果。

# android - ADT：当包和类太多时构建失败

> ID：11380179
> 
> 赞同：2
> 
> 时间：2012-07-08T02:17:03.167
> 
> 标签：android, eclipse, adt

我有一个大项目，其中包含许多库项目以及源代码中的许多包和类。

在 Eclipse (v4.2) 中使用 ADT (r20) 构建，我收到此错误：

> [2012-07-08 09:05:33 - AndroidUIPatterns] Dx 写入输出时遇到问题：字段太多：69379；最大值为 65536。按包装：
> 
> ```
> 19 android.app
> 14 android.content.pm
>  5 android.content.res
>  2 android.gesture
> 39 android.graphics
>  8 android.graphics.drawable
> 13 android.os
>  3 android.provider 
> ```
> 
> ...
> ...
> [2012-07-08 09:05:33 - AndroidUIPatterns] 转换为 Dalvik 格式失败，错误 2

有关完整的错误日志，您可以在此处查看：http: [//pastie.org/4218297](http://pastie.org/4218297)

Android项目中的包/类数量似乎有最大限制？

如果有人能告诉我如何解决此错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:44:19.267

这是 dx 编译器的一个限制，目前每个 dex 限制为 65536 (2^16) 个字段/方法引用。自 2010 年以来，它一直在“被修复”。

现在唯一的解决方案是将应用程序拆分为多个 dex 文件，因此没有单个 dex 文件超过 64k 的限制。

# javascript - Ruby => Javascript 翻译

> ID：11380181
> 
> 赞同：6
> 
> 时间：2012-07-08T02:17:49.400
> 
> 标签：javascript, ruby, deep-copy

很好奇……你会如何用 JS 编写这个 Ruby？

```
Array.new(3, Array.new(3, 0)) 
```

返回

```
[[0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

我尝试了各种各样的东西，但它们看起来都很乱。我想有些东西不能像 Ruby 那样干净，但是你会怎么处理呢？

也许我会学习一两个 JS 技巧；）

**编辑** 据透露，这段 Ruby 代码实际上并没有创建 3 个数组。它创建 1 个数组，其他人引用。这不是本意。我正在寻找一种方法来轻松映射二维数组，其中包含 X 数量的元素和 Y 数量的 JS 中的嵌套元素。

另外......这是一个人为的例子。意图是能够用任何数字代替 3。这只是使用 3 的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T02:29:19.940

您可以像这样定义它：

```
var arr = [[0, 0, 0], [0, 0, 0], [0, 0, 0]]; 
```

本质上，您是在明确定义它。但是，此数组包含对三个*不同*数组的引用（总共 4 个）。为了让它表现得像 ruby​​，你需要创建一个模仿这种行为的函数：

```
function arr(size, element) {
   var ret = [];

   for(var i = 0; i < size; i++) {
       ret.push(element);
   }

   return ret;      
} 
```

然后你可以这样做：

```
var myArray = arr(3, arr(3, 0)); //myArray contains [[0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

这更符合您在 ruby​​ 中看到的行为，因为数组中的每个元素都是对*同一*数组的引用（总共只有*两个*数组）。您可以通过执行`myArray[0][1] = 2;`然后检查来验证这一点`myArray`。您应该看到设置为 2 的每个数组中的第二个元素`myArray`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:26:35.587

如果您只想要一个空数组容器，只是为了跟踪长度或稍后分配值，您可以这样做，有点hacky但应该可以：

```
var a = [[,,],[,,],[,,]]

a[1][1] = 'foo'
alert(a[1][1]) //foo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T02:28:17.460

以下是有效的 Javascript 语法，假设您要创建 4 个数组：

```
[[0, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

**编辑：**

实际上你的 ruby​​ 代码只创建了两个数组。一个数组是`[0,0,0]`，另一个数组包含对该数组的三个引用。如果你改变`array[0][2]`你也​​会改变`array[1][2]`。你确定这是你想要的吗？等效的 javascript 代码将是：

```
var b = [0, 0, 0];
var a = [b, b, b]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T15:17:16.877

在Ruby中，您可以像这样获得所需的效果

```
a = Array.new(3) { Array.new(3, 0) }
p a #[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
a[0][0] = 1
p a #[[1, 0, 0], [0, 0, 0], [0, 0, 0]] 
```

在这样的 JS 中

```
var multi_dim = function(a, b, value) {
  var myObj = [];
  for (i=0;i<a;i++) {
    myObj[i] = [];
    for (j=0;j<b;j++) {
      myObj[i][j] = value;
    }
  }
  return myObj;
};

var c = multi_dim(3,3,0);
WScript.echo(c); //0,0,0,0,0,0,0,0,0
c[0][0]=1
WScript.echo(c); //1,0,0,0,0,0,0,0,0 
```

如果不在 Windows 和/或浏览器中，则用 document.write 替换 WScript.echo

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T02:32:36.660

我想你可以这样做：http: [//jsfiddle.net/PZBUr/](http://jsfiddle.net/PZBUr/)

```
var i = "[0, 0, 0]";
var myArray = new Array(i, new Array(i, new Array(i)));
document.write(myArray);
​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T02:34:58.337

另一种方法是：

```
var arr = new Array(
    new Array(0, 0, 0),
    new Array(0, 0, 0),
    new Array(0, 0, 0)
); 
```

或者干脆

```
var arr = [
    [0, 0, 0],
    [0, 0, 0],
    [0, 0, 0]
] 
```

# asp.net - 在不同机器上的 IIS 中的不同网站上创建应用程序

> ID：11380187
> 
> 赞同：0
> 
> 时间：2012-07-08T02:19:00.187
> 
> 标签：asp.net, iis, concurrency, cluster-computing, load-balancing

我们正在构建一个 asp.net 系统，用于发布基于 .net 的 Web 服务。

它有一个简单的逻辑：我们在 App_Data 文件夹下有多种 Web 服务模板。

例如，我们的应用程序 url 是：`http://localhost/serviceManager`

这是我们应用程序的文件夹：

```
App_Data
   ws1.zip
   ws2.zip
Bin
modules
service
web.config 
```

> 注意：当第一次访问这个系统时，我们会检查“服务”目录是否是iis中的“应用程序”。如果没有，我们会成功的。

通过我们的系统，用户可以逐步填写一些需要的信息（尤其是服务名称，例如“test”），我们将它们收集起来以备后用。

`test`然后我们在该目录下创建一个名为的文件夹`service`，然后我们找到相应的Web服务模板（例如ws1.zip），将内容提取到该`test`文件夹​​中，然后我们根据我们得到的信息修改web.config文件。

最后我们在 IIS 中设置`test`为 a 。`application`

现在我们的应用程序的文件夹将改变如下：

```
App_Data
   ws1.zip
   ws2.zip
Bin
modules
service
  test
    App_Data
    service.asmx
    web.config(filled with gathered information)
web.config 
```

并且部署了一个新的 Web 服务，我们可以使用它来访问它：

```
http://localhost/serviceManager/service/test/service.asmx (note,the service.asmx exist in every template) 
```

这是我们目前所能做的。

然而，客户现在有进一步的要求：

**1\. 将管理器系统与创建的服务分开。**

由于客户希望将创建的服务映射到 Internet 并将我们的管理器系统仅保留在 Intranet 上，这是为了安全起见。

如您所见，创建的服务放在我们的管理器应用程序下。我们需要将它们部署在不同的端口（在 iis 中，不同的端口意味着不同的网站，不是吗？）。

例如，我们的应用程序 url 不会改变：`http://localhost/serviceManager`

但是创建的服务会变成这样：`http://localhost:8888/service/test/service.asmx`

**2.实现集群（尤其是创建的服务）**

由于创建的服务是面向大众的，所以出于性能考虑，客户端需要集群。

但是，我们没有找到类似`weblogic`IIS 集群的任何东西。因此，我们认为唯一的方法是在创建服务后复制服务并将其放在具有相同端口和虚拟上下文名称的另一台服务器（集群节点）中。

如果是这样，我们需要在不同机器的 iis 中创建“应用程序”作为我的帖子主题。

我们现在不知道，任何人都可以给我们一些建议吗？

顺便说一句，我们必须支持 iis6 - iis7.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T01:54:16.790

我是这个问题的提问者。

我们现在还没有找到完美的解决方案。但是我们已经做了一些工作。

我们的 asp.net 应用程序已打包为窗口安装程序。安装应用程序后，将完成一些必要的工作：

1 在不同的端口创建两个网站，例如 8000（用于服务管理器）和 8001（用于创建的服务。

2 将8001网站的根目录设为windows共享文件夹。

3 部署一个名为`IISManager`. 此应用程序是一个 Web 服务，它将在网站根目录下创建一个文件夹作为 IIS 应用程序。

现在当用户访问：

`http://ip:8000/servicemanager`，并根据模板创建服务。

我们将做以下事情：

1 通过window共享文件夹将提取并配置好的文件夹复制到不同的集群节点。

2 一个一个调用`IISManager`服务，将step1的文件夹做成IIS应用。

现在如果步骤成功，我们可以访问新创建的服务：

```
http://ip:8001/servicename/service.asmx 
```

这就是我们现在所做的。

但是我们仍然有很多问题：

1`IISManager`每次都不起作用，iis应用程序创建有时会失败。

2 在不同节点创建的服务是完全独立的应用程序，很难做一些会话共享工作。

我希望有人有更好的解决方案，

# php - PHP strip_tags 仅在字符串末尾

> ID：11380191
> 
> 赞同：0
> 
> 时间：2012-07-08T02:19:45.063
> 
> 标签：php, string, strip-tags

好的，我只想`strip_tags`在字符串的最后使用函数来摆脱任何`<br />`标签。

这就是我现在所拥有的，但这并不好，因为它会从字符串中的任何地方剥离这些标签，这不是我想要的。如果它在字符串的末尾，我只需要将它们剥离...

```
$string = strip_tags($string, strtr($string, array('<br />' => '&#10;'))); 
```

我怎么能做同样的事情，除了只在字符串的末尾？

多谢你们！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:21:52.313

您可以使用以下[代码](https://stackoverflow.com/questions/3835636/php-replace-last-occurence-of-a-string-in-a-string)：

```
$string = str_lreplace("<br />", "", $string); 
```

您也可以替换标准的 HTML 中断：

```
$string = str_lreplace("<br />", "", $string);
$string = str_lreplace("<br>", "", $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T02:57:54.387

好的，这是我正在使用的方法，它完全按照我想要的方式工作......

```
$search = strrpos($string, '<br />');
if($search !== false && $search == strlen($string) - 6)
    $string = substr_replace($string, '', $search, 6); 
```

我通过查看 Connor Pete 发布的链接获得了这个答案，因此该链接上的代码帮助我实现了位于此处的最终结果。

老实说，我什至不是真的在寻找`<br />`标签。我只是为了争论而发布了它。我面临的主要问题是我有一个未关闭的粗体标签`<b`，它在不应该存在的字符串末尾吐出，因为当写入文档时，它会导致页面的其余部分以粗体显示！所以，老实说，这被改为：

```
$replace = strrpos($string, '<b');
if($replace !== false && $replace == strlen($string) - 2)
    $string = substr_replace($string, '', $replace, 2); 
```

感谢您在这件事上的所有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T02:48:38.093

获取最后一次出现的索引`<br/>`并将其删除：

```
$index = strrpos($string, '<br/>');
if($index == strlen($string)-5){
    $string= substr($string,0,$index);
} 
```

# javascript - 如何使用 JavaScript 更改 CSS 参数？

> ID：11380194
> 
> 赞同：1
> 
> 时间：2012-07-08T02:20:16.503
> 
> 标签：javascript

*我知道这不是修改 CSS 类的常用方法......但无论如何>>我有以下函数可以用 JavaScript 更改 CSS 参数：*

```
function changeCSSParameter(classId, param, value)
{
  var CSSRules;
  if (document.all)
  {
    CSSRules = 'rules';
  }
  else if (document.getElementById)
  {
    CSSRules = 'cssRules';
  }
  for (var i = 0; i < document.styleSheets[0][CSSRules].length; i++)
  {
    var classes = document.styleSheets[0][CSSRules][i].selectorText.split(/\s*,\s*/);
    for (var j = 0; j < classes.length; j++)
    {
      if (classes[j] == classId)
      {
        document.styleSheets[0][CSSRules][i].style.setProperty(param, value, '');
      }
    }
  } 
} 
```

*但是，如果样式类是按组定义的，则此功能将无法正常工作，例如*

```
.first, .second
{
  color: red;
} 
```

*...因为任何更改都将适用于这两个类。我该如何解决这个问题？请指教。*

*请不要使用 jQuery，只需使用老式的 JavaScript。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:29:11.950

我的第一个问题是你对这样的推断有多大`document.all`把握？因为这对我来说似乎很粗略？它的依据是什么？`rules``cssRules`

但是假设这是一个合理的推论，为什么你要`CSSRules`在每次调用你的函数时进行计算呢？在启动时计算一次并存储它，在包含该值的闭包中返回您的函数。

也就是说，关于你的主要问题......

只有当单个选择器（在逗号分隔的选择器组内）是单个类选择器（例如`.myClass`. 任何更复杂的东西，比如`div.myClass`不起作用，对吗？如果这就是你想要做的所有事情，我想我有一个（相当讨厌，但可行的）解决方案：遇到一个以逗号分隔的解决方案，其中一个是匹配的，为每个选择器编写新规则，克隆现有规则。然后对于与您的班级名称匹配的那个，更改相关属性。最后，删除原来的规则。

这不好玩，而且它做了几个假设，在一般情况下显然没有保证，但看起来它们可能与您在代码中尝试执行的操作相匹配。

嘿，我确实说过这很讨厌！:-)

# ajax - AJAX 长轮询会立即释放传入的数据吗？

> ID：11380205
> 
> 赞同：0
> 
> 时间：2012-07-08T02:22:03.557
> 
> 标签：ajax, comet, long-polling

对于我们应用程序的新界面，我认为有必要放弃 websockets 并选择 comet 以获得更广泛的支持。我意识到有几种技术，我需要确保选择正确的一种。

**问题：** AJAX 轮询方法是在收到分块数据后立即释放还是等到请求关闭？

如果没有，有没有办法使用 iFrame 技术并消除浏览器死机？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:28:13.323

Comet 通过 ajax（ajax 长轮询）只在请求完成后才使数据对应用程序的前端可用。当您有需要不定期发送的离散数据包时，它很有用。如果你想对数据进行分块，那么只需在第一个块之后完成请求，然后让客户端立即请求另一个块。如果还有另一块准备好，请立即提供；如果没有，那就让客户等到有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:35:39.430

值得注意的是，HTTP Long-Polling 和[HTTP Streaming](http://www.quora.com/HTTP-Streaming)都属于 Comet 的范畴。长轮询需要关闭连接才能发送数据。流不会也可以在不关闭现有连接的情况下通过现有连接发送数据。

我不相信有解决“死亡旋转器”问题的简单方法。几年前我写了一篇[关于这个](http://www.leggetter.co.uk/2010/06/04/chromesafari-webkit-real-time-push-always-loading-indicator.html)的帖子，但我仍然不知道一个万无一失的解决方案。

就个人而言，我建议您使用 WebSockets 而不是[hacky Comet 解决方案](http://www.leggetter.co.uk/2012/04/22/websockets-realise-comet-theyre-not-an-alternative.html#comment-518850026)。

> 彗星是关于过去的。让未来成为现实。

*——亚历克斯·罗素，彗星的发明者*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:56:01.530

数据的释放......无论是否分块，都可以刷新到流中并从客户端访问（IE可能会有不同的行为）

如果您从管道（服务器）的另一端控制流的大小，我认为这里没有任何风险。也许您需要从当前的解决方案之一中受益。如果您出于企业原因需要解决方案，请尝试[PokeIn](http://pokein.com)，或者如果只是闲逛，[SignalR](https://github.com/SignalR/SignalR/)是免费的

# css - 如何使用 CSS3 制作内边框？

> ID：11380212
> 
> 赞同：12
> 
> 时间：2012-07-08T02:23:45.310
> 
> 标签：css

如何使用 CSS3 制作内边框？

也就是说，边框不是从元素的活动/填充区域向外延伸，而是向内延伸，重叠其内容？

如果可能的话，如果可以用最少的 CSS 规则来完成，我将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-08T02:44:23.450

尝试使用 box-shadow（和供应商特定的子集）。
例如：

```
-moz-box-shadow: inset #B3B3B3 0 -1px 0 0;
-webkit-box-shadow: inset #B3B3B3 0 -1px 0 0;
box-shadow: inset #B3B3B3 0 -1px 0 0; 
```

# python - 新手变量传递

> ID：11380213
> 
> 赞同：3
> 
> 时间：2012-07-08T02:24:06.363
> 
> 标签：python, python-2.7

如果您能帮我快速解决我遇到的这个小问题，我将不胜感激。到目前为止，在编程方面，我已经完成了一些 C，但我对如何通过 Python 中的函数传递变量感到困惑。

我确信这个问题已经被问过很多次了，但我不知道要搜索什么。

我的代码是：

```
x=0
def getinput(x):
    x = input('Enter x: ')
def addtwo(x):
    x = x + 2
def printans(x):
    print 'x is', + x

getinput(x)
addtwo(x)
printans(x) 
```

`printans`总是以打印结束`0`。我确定这是因为函数内部的变量是本地的，但我不知道如何在 python 中修复它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T02:27:21.260

问题是*您没有返回*您在函数中获取/计算的值。

我不会给你*所有*的代码，但是如果你理解了这个例子，你将能够根据需要对自己的其余代码进行必要的调整，作为学习使用 Python 编程的一部分。

```
def addtwo(x):
    x = x + 2 # compute your result
    return x  # return the result to caller

result = addtwo(5) # save the returned value
print result       # print it out 
```

产量

```
7 
```

你也想做一些类似于`getinput()`function 的事情，因为它得到了你想在你的程序中使用的值。相比之下`printans()`，它只需要打印信息，但不计算需要返回给您的任何内容。

请注意，当您对此更加熟悉时，可以缩短代码/表达式，因此对于上面的示例，您的整个函数可能包括

```
 def addtwo(x):
    return x + 2 
```

但在那之前，明确地一步一步地做事并没有错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T02:28:00.390

这是一个关于全局和局部范围的问题。虽然您的函数可以`x`作为全局范围值访问，但是当您重新分配变量时，您正在隐藏全局，但是您不会返回该值：

```
# return local 
def getinput(x):
    x = input('Enter x: ')
    return x

# affect global 
def getinput(x):
    global x
    x = input('Enter x: ') 
```

使用局部变量并返回一个值通常比修改全局变量更可取，除非您有完全合理的情况。

*关于可变和不可变类型的说明*

这种情况还有第二种情况，那就是你正在影响的对象的类型。`int`和`string`，例如，是不可变的。如果不创建新对象，则无法更改它们的值。A `list`or`dict`是可变类型的示例。您可以添加和删除它们，更改它们的值。

考虑一个可变类型`list`

```
aList = []
def func():
    aList.append(1)

print aList # prints []
func()
print aList # prints [1] 
```

这将很好地附加到全局列表，甚至无需指定全局关键字，因为列表本身仍然是相同的列表对象。但是如果你用一个新列表覆盖该列表，没有全局，它将不会全局生效：

```
aList = []
def func():
    aList = [1] 
```

简而言之，如果您只是要修改对象的内容，而不是分配新对象，则可变类型不需要 global 关键字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T02:27:26.287

正如您所说，函数中的变量是本地的。修复它的方法是从你的函数返回值：

```
def getinput():
    return input('Enter x: ')

def addtwo(x):
    return x + 2

def printans(x):
    print 'x is', + x

x = getinput()
x = addtwo(x)
printans(x) 
```

用 C 语言来说，在处理数字时，它的工作方式与一切都是按值传递一样。

# python - 为什么 Apache 不使用 Django 和 mod_wsgi 显示 404 错误？

> ID：11380214
> 
> 赞同：1
> 
> 时间：2012-07-08T02:24:22.507
> 
> 标签：python, django, apache2

使用我当前的 Apache 和 Django 设置，当我转到一个不存在的页面时，会显示该网站的根页面而不是 404 错误。这是我的 httpd.conf 文件：

```
Alias /robots.txt /var/www/sov/static/robots.txt
Alias /favicon.ico /var/www/sov/static/favicon.ico

Alias /static /var/www/sov/static/

<Directory /var/www/sov/static>
Options -Indexes FollowSymLinks MultiViews
#Order deny,allow
#AllowOverride all
</Directory>

WSGIScriptAlias / /var/www/sov/scripts/django.wsgi

<Directory /var/www/sov/scripts/mcsite>
Order allow,deny
Allow from all
</Directory> 
```

为什么会这样？如果可能，我想将 WSGIScriptAlias 保留在根目录中。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:43:27.303

当你使用`mod_wsgi`Django 时负责显示 404 页面（不是 Apache）。

这会失败，因为您的主 urls.py 文件中有错误。您可能有以下代码：

```
url('', my_home_view), 
```

但你应该有：

```
url('^$' my_home_view), 
```

如果我的猜测不正确，请显示您的 urls 文件。

# ios - 使用 UIPanGestureRecognizer 移动 UIImageView

> ID：11380215
> 
> 赞同：0
> 
> 时间：2012-07-08T02:24:54.760
> 
> 标签：ios, cocoa-touch, ios5, uipangesturerecognizer

我正在尝试为 UIImageView 实现 UIPanGestureRecognizer。目前，我能够拖动 UIImageView 并限制我将其移动到的位置并且可以工作。但是，它正在移动似乎是 UIImageView 的副本，并且原始 UIImageView 保留在原地。为什么会出现这种情况？

创建 UIImageView 并将其添加到主视图后，我将添加手势识别器：

```
UIPanGestureRecognizer* pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(tileDragged:)];
pan.maximumNumberOfTouches = 1;
pan.minimumNumberOfTouches = 1;
[tileImageView addGestureRecognizer:pan]; 
```

然后在我的 tileDragged 方法中：

```
case UIGestureRecognizerStateChanged:
{  
    PuzzleTileView *tileView = (PuzzleTileView *)[self.allTiles objectAtIndex:panGesture.view.tag]; 

    CGFloat x = 0.0;
    CGFloat y = 0.0;

    // x and y are calculated.
    [tileView setTransform:CGAffineTransformMakeTranslation(x, y)];

    break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:26:48.757

如果您有多个图像，这一定是一个简单的问题。我们很多人都毫无意外地拖着 UIImageView。您的代码中没有什么明显的（尽管我对不同的变量/类名感到困惑），所以您可能需要给我们一个更全面的代码示例。您可能会尝试添加一些调试消息（例如，`viewDidLoad`在方法中再次记录您的视图的子视图计数`tileDragged`）。

我从您的评论中得知您终于解决了问题。恭喜！

# javascript - 在 AngularJS 视图中使用 jQuery 插件

> ID：11380216
> 
> 赞同：5
> 
> 时间：2012-07-08T02:25:32.373
> 
> 标签：javascript, angularjs

我正在做我的第一个 AngularJS 项目。到目前为止我很喜欢它，但我现在挂了。

我的项目是结构化的，因此我的 index.html 中有一个 ng-view，它根据当前路由填充了一个单独的 HTML 模板/部分。

在其中一个部分中，我想使用[jQuery DateFormat 插件](https://github.com/phstc/jquery-dateFormat)来格式化 SQLite 日期时间字符串，该字符串使用角度表达式解析为模板/部分：

```
{{ find.addDate }} 
```

我已经在 index.html 中包含了带有脚本标记的插件，我认为从那里它就像在我的模板/部分中做这样的事情一样简单：

```
{{ $.format.date(find.addDate, "dd/MM/yyyy") }} 
```

或许：

```
{{ angular.element.format.date(find.addDate, "dd/MM/yyyy") }} 
```

那是行不通的（我相信你们中的一些人很清楚为什么），但是控制台中没有错误，我很困惑如何处理它。我已经用“angular中的第三方脚本”或“jquery plugin angularjs”等术语进行了一些谷歌搜索，但找不到有关如何以正确方式完成此任务的最新代码示例。

我确实找到了一些使用 angular.widget 的旧代码，但它似乎在 1.0+ 版本中已被弃用。我想我需要使用一个指令，但我无法完全弄清楚。

我真的希望得到一个解释或简单的例子。非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T02:44:29.427

问题是当您在模板中执行 {{expression}} 时，它会在当前范围内评估它。

例如，如果你有这个控制器：

```
function MyCtrl($scope) {
    $scope.find = {
        addDate: 2030
    };
} 
```

`{{find.addDate}}`实际上会寻找`$scope.find.addDate`并评估它（在这种情况下返回 2030 年）。

因此，当您尝试这样做时`{{ $.format.date(find.addDate, "dd/MM/yyyy") }}`，角度会寻找 `$scope.$.format.date(find.addDate, "dd/MM/yyyy")`不存在的 。

尝试这样的事情，在你的控制器中使用一个函数：

```
 function MyCtrl($scope) {
        $scope.find = {
            addDate: 2030
        };
        $scope.formatDate = function(input, format) {
            return $.format.date(input, format);
        }
    } 
```

然后你可以在你的 html 中做你可以做的事情：`{{formatDate(find.addDate, "dd/MM/yyyy")}}`.

您还可以将其评估为标记中的过滤器，因为它只需要输入并更改它：`{{find.addDate | formatDate:"dd/MM/yyyy"}}`

# objective-c - 如何用微调器替换圆形矩形按钮中的文本？

> ID：11380218
> 
> 赞同：4
> 
> 时间：2012-07-08T02:26:33.387
> 
> 标签：objective-c, xcode4, uibutton

我有一个带有通用圆形矩形按钮的视图，该按钮可以连接到另一个视图。当用户按下圆角矩形时，它会开始获取。在处理提取时，我想让一个旋转的轮子替换圆角矩形按钮内的文本（“下一步”）。

我创建了微调器：

```
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
[spinner startAnimating]; 
```

但我不知道如何让它替换圆角矩形按钮中的文本。

有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T07:34:22.450

像往常一样创建（或获取对）按钮的引用，然后在处理按钮单击时，创建微调器并将其设置为按钮的子视图。禁用按钮以停止多次点击可能也值得。

以下几行应该可以解决问题：

```
 ...
  UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
  button.frame = CGRectMake(10, 10, 70, 40);
  [button setTitle:@"Next" forState:UIControlStateNormal];
  [button addTarget:self action:@selector(click:) forControlEvents:UIControlEventTouchUpInside];
  [self.view addSubview:button];
  ...

- (void)click:(UIButton *)button {
  [button setTitle:@"" forState:UIControlStateNormal];
  UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
  [spinner startAnimating];
  spinner.frame = button.bounds;
  [button addSubview:spinner];
  button.enabled = NO;

  // do your actual work...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T19:24:10.647

我写了一个利用关联对象的类别

UIButton+ActivityIndi​​cator.h

```
// Created by reynaldo on 1/16/14.

#import <Foundation/Foundation.h>

@interface UIButton (ActivityIndicator)
- (void)startActivityIndicator;
- (void)stopActivityIndicator;
@end 
```

UIButton+ActivityIndi​​cator.m

```
// Created by reynaldo on 1/16/14.

#import <objc/runtime.h>
#import "UIButton+ActivityIndicator.h"

static char TITLE_KEY;
static char ACTIVITY_INDICATOR_KEY;

@implementation UIButton (ActivityIndicator)

- (void)startActivityIndicator {
    objc_setAssociatedObject(self, &TITLE_KEY, self.currentTitle, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

    [self setTitle:@"" forState:UIControlStateNormal];
    UIActivityIndicatorView *activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    [self addSubview:activityIndicatorView];
    activityIndicatorView.frame = CGRectMake(self.frame.size.width / 2, self.frame.size.height / 2\. - 2, 7, 7);
    [activityIndicatorView startAnimating];

    objc_setAssociatedObject(self, &ACTIVITY_INDICATOR_KEY, activityIndicatorView, OBJC_ASSOCIATION_RETAIN_NONATOMIC);

}

- (void)stopActivityIndicator {
    NSString *title = objc_getAssociatedObject(self, &TITLE_KEY);
    UIActivityIndicatorView *activityIndicatorView = objc_getAssociatedObject(self, &ACTIVITY_INDICATOR_KEY);

    if(activityIndicatorView) {
        [activityIndicatorView removeFromSuperview];
    }

    if(title.length) {
        [self setTitle:title forState:UIControlStateNormal];
    }
}

@end 
```

# iphone - UIViewController 包含方向更改

> ID：11380220
> 
> 赞同：2
> 
> 时间：2012-07-08T02:26:46.397
> 
> 标签：iphone, objective-c, ios, ipad

我有一个 UIViewController 可以说它叫做 A。在 A 内部，我添加了另一个名为 B 的 UIViewController。我还在 A 上添加了另一个 UIViewController，我们称之为 C。我遇到的问题是，当 C 不存在时（即：未添加到 A 的视图控制器）然后旋转给了我正确的大小，但是当 C 添加到 A 时。然后 UIViewContoroller 的 B 没有收到正确的帧调整。为什么会这样，我该如何解决？

基本上，当我在 B 的 willAnimateToInterfaceRotation 中旋转时，无论方向如何，框架都保持不变。所以说B是纵向的，尺寸是768 x 1004。然后我有一个在A中添加C的按钮（C在B前面）。当我旋转它时，它打印出框架的大小是 768x1004。但是，如果我关闭 C（即：从父视图控制器中删除它，在本例中为 A）。当我旋转框架宽度时会相应地改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:51:04.627

**更新：**

我意识到我可能误解了最初的问题。但要正确回答这个问题，我需要澄清你在说什么。所以，你说：

> 我有一个 UIViewController，可以说它叫做 A。在 A 中，我添加了另一个 UIViewController，称为 B。我还在 A 上添加了另一个 UIViewController，我们称之为 C。

所以，本质上，你做了以下事情？

```
[A addChildViewController:B];
[B didMoveToParentViewController:A];
[A addChildViewController:C];
[C didMoveToParentViewController:A]; 
```

我做对了吗？无论如何，你继续说：

> 我遇到的问题是，当 C 不存在（即：未添加到 A 的视图控制器）时，旋转给了我正确的大小，

所以，你是说你从来没有`addChildViewController:C`说过一切都好？你继续：

> ...但是当 C 被添加到 A 时。然后 UIViewController 的 B 没有收到正确的帧调整。

所以，你是说如果你调用`addChildViewController:C`了，并且有`transitionFromViewController:B toViewController:C`？但如果是这样的话，B 根本不会得到任何轮换事件。参考您何时从 B 过渡到 C 对我来说没有意义`B.view.frame.size`。无论如何，这是我最初回答的基础，假设您一定在谈论以下场景：

*   B & C 通过`addChildViewController`,
*   B 最初在纵向时处于活动状态，
*   你`transitionFromViewController:B toViewController:C`，
*   您将设备旋转到横向，C 获得旋转事件，但 B 没有，
*   你`transitionFromViewController`回到 B，现在视图控制器 B 接收外观相关的方法，例如`viewWillAppear`，但在 C 处于活动状态时将错过任何旋转事件

因此，如果您需要 B 在这种情况下检查基于旋转的逻辑，则必须在 B 之类的方法期间执行此操作`viewWillAppear`（除非父视图控制器 A 在执行后显式调用其他内容`transitionFromViewController:C toViewController:B`）。但我现在意识到你可能并不关心旋转事件的存在与否，而只是当你检查框架时，你会得到奇怪的结果。但是我不太明白你描述的场景，所以让我们继续你的问题的其余部分。

所以，你继续说：

> 基本上，当我在 B 的 willAnimateToInterfaceRotation 中旋转时，无论方向如何，框架都保持不变。所以说B是纵向的，尺寸是768 x 1004。

好的，我认为我们在那里很好。你继续：

> 然后我有一个在 A 中添加 C 的按钮（C 在 B 前面）。

你是说你做到了`transitionFromViewController:B toViewController:C`？在视图控制器包含的上下文中，术语“在 B 之前”对我来说没有意义。C不会走在B前面。你从B过渡到C。

> 当我旋转它时，它打印出框架的大小是 768x1004。

这很奇怪。但是，更重要的是，“768x1004”是什么意思？`C.view.frame.size`? 如果您从 B 过渡到 C，我认为引用`B.view.frame.size`. 我不清楚你在说什么是报告“768x1004”。

无论如何，你继续：

> 但是，如果我关闭 C（即：从父视图控制器中删除它，在本例中为 A）。当我旋转框架宽度时会相应地改变。

当你说“从父视图控制器中删除它”时，我假设你的意思是你有：

*   调用`transitionFromViewController:C toViewController:B`
*   警告 C 它将消失`[C willMoveToParentViewController:nil]`
*   然后用`[C removeFromParentViewController];`

如果你能澄清你关于我上面解释（或误解）的原始问题，那么我们确切地知道你在做什么？我肯定在容器中看到了一些关于框架尺寸的奇怪东西，但我想确保我首先理解你的问题。

**原来的：**

见[`automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers)。说真的，谁想出了这个方法名称？！？

但这不会将方法发送到非活动视图控制器。看起来你必须对子控制器的方向进行一些检查`viewWillAppear`。

请注意，如果不是预先加载所有控制器，而是及时执行（有点像选项卡视图控制器），这个问题就会消失。

# javascript - 禁用提交按钮并启用本机表单验证

> ID：11380223
> 
> 赞同：0
> 
> 时间：2012-07-08T02:27:10.737
> 
> 标签：javascript, html, validation

浏览器有一个很好的工具提示，当具有该`required`属性的字段尚未填写时会出现。

```
<!DOCTYPE html>
<form action="" method="post" accept-charset="utf-8">
<input type="text" name="name" placeholder="Your full name" required>
<input type="submit" onclick="this.disabled=true;this.value="Submitted...";this.form.submit()">
</form> 
```

![奥拉阿米戈](../Images/9a8093cada5d8ec21c6ebfe4eabbaa90.png)

问题是当用户提交表单时我禁用了这个提交按钮，因此它不会被多次提交，并且在提交后（即使必填字段为空）表单仍然提交。是否有解决方案，以便浏览器在提交之前检查必填字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T02:40:13.967

您需要确保在禁用提交按钮之前实际填写了必填字段。

```
<!DOCTYPE html>
<form action="" method="post" accept-charset="utf-8">
<input type="text" name="name" placeholder="Your full name" required>
<input type="submit" onclick="if (document.getElementsByName('name')[0].value != null) {
                                this.disabled=true;
                                this.value='Submitted...';
                                this.form.submit();
                              }">
</form> 
```

或者您可以使用`document.querySelectorAll()`多个必需的：

```
<!DOCTYPE html>
<form action="" method="post" accept-charset="utf-8">
<input type="text" name="name" placeholder="Full name" required>
<input type="text" name="name" placeholder="Email address" required>
<input type="text" name="name" placeholder="Phone number">
<input type="submit" onclick="for (x in document.querySelectorAll('input[type=text][required]')) {
                                if (document.querySelectorAll('input[type=text][required]').value != null) {
                                  this.disabled=true;
                                  this.value='Submitted...';
                                  this.form.submit();
                                }
                              }">
</form> 
```

# php - 显示奇怪的“？>”

> ID：11380231
> 
> 赞同：0
> 
> 时间：2012-07-08T02:28:21.637
> 
> 标签：php

我有以下导航栏脚本：

```
<?php session_start();
require('includepath.inc.php');
require($include_path.'loginsysfunc.inc.php');
$current_page = $_SERVER['REQUEST_URI'];
?>

<div class="navbar">
<img class="navlogo" src="logo.png">
<div class="navbutton"><a href="index.php">Home</a></div>
<div class="navbutton"><a href="about.php">About</a></div>
<div class="navbutton"><a href="donate.php">Donate</a></div>
<?php
if (loggedIn()){
    ?>
<div class="navusername"><a href="profile.php?user=<?php echo $_SESSION['username'];?>"><?php echo $_SESSION['username']; ?></a></div>
<div class="navtoolsettings"><a href="settings.php">Settings</a></div>
<div class="navtoollogout"><a href="logout.php">Log out</a>
<?php
} elseif ($current_page == '/login.php') {
    ?>
<div class="navregister"><a href="register.php">Register</a></div>
<?php
} else {
    ?>
<div class="navusername"><a href="login.php">Log in</a></div>
<?php
}
?>
</div> 
```

[出于某种原因，正在显示](http://i.imgur.com/njpg8.jpg)一个奇怪的“？>” 。我很困惑，所以请帮忙。

这是includepath.inc.php（我唯一的原因是因为我在共享主机上，我不想每次都输入'/home/bigdumbhash/public_html/include'。但是，这里是：

```
 <?php
 $include_path = '/home/a6595899/public_html/include/';
 ?> 
```

这是 loginsysfunc.inc.php。这些是我的登录系统附带的功能以节省时间：

```
<?php
function valUser() {
session_regenerate_id();
$_SESSION['valid'] = true;
$_SESSION['username'] = $userid;

echo '<meta http-equiv="refresh" content="0;URL=\'index.php\'">';
}

function loggedIn()
{
if($_SESSION['valid'] == true) {
    return true;
} else {
    return false;
}
}

function createSalt() {
$string = $string = md5(uniqid(rand(), true));
return substr($string, 0, 3);
}

function logout()
{
$_SESSION = array();
session_destroy();
echo '<meta http-equiv="refresh" content="0;URL=\'index.php\'">';
}

?> 
```

这是页面的实际 HTML：

```
<!DOCTYPE html>
<html>
<head>
<link href="style.css" rel="stylesheet" type="text/css">
<title>
Log in
</title>
</head>
<body>

<div class="navbar">
<img class="navlogo" src="logo.png">
<div class="navbutton"><a href="index.php">Home</a></div>
<div class="navbutton"><a href="about.php">About</a></div>
<div class="navbutton"><a href="donate.php">Donate</a></div>
    <div class="navregister"><a href="register.php">Register</a></div>
</div>    ?>
    <div class="loginbox">
    <h1>Log in</h1>
    <form action="logingo.php" method="POST">
   <input class="userpass" type="text" name="username" value="Username" onFocus="this.value='';">
    <br>
    <input class="userpass" type="password" name="password" value="Password" onFocus="this.value='';">
        <br>
    <input class="loginbutton" type="submit" value="Log in!">
        </form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T02:32:17.347

```
<?php session_start();
require('includepath.inc.php');
require($include_path.'loginsysfunc.inc.php');
$current_page = $_SERVER['REQUEST_URI'];
?>

<div class="navbar">
<img class="navlogo" src="logo.png">
<div class="navbutton"><a href="index.php">Home</a></div>
<div class="navbutton"><a href="about.php">About</a></div>
<div class="navbutton"><a href="donate.php">Donate</a></div>
<?php
if(loggedIn()){
?>
<div class="navusername"><a href="profile.php?user=<?php echo $_SESSION['username'];?>"><?php echo $_SESSION['username']; ?></a></div>
<div class="navtoolsettings"><a href="settings.php">Settings</a></div>
<div class="navtoollogout"><a href="logout.php">Log out</a>
<?
}else if($current_page == '/login.php'){
?>
<div class="navregister"><a href="register.php">Register</a></div>
<?
}else{
?>
<div class="navusername"><a href="login.php">Log in</a></div>
<?php
}
?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T03:11:31.803

根据您发布的 HTML 输出，问题似乎出在显示的文件中`<div class="loginbox">`（在此之前）。
查看该文件的内容。

# c++ - linux 中的 sys/ioctl.h 问题

> ID：11380232
> 
> 赞同：1
> 
> 时间：2012-07-08T02:28:23.150
> 
> 标签：c++, linux, macos, sockets, ioctl

所以我在 Windows 和 MacOSX 上有这个代码的**已知工作版本：**

```
int CSocket::setsync(int mode)
{
    if(sockid < 0)return -1;
    u_long i = mode;
    return ioctlsocket(sockid, FIONBIO, &i);
} 
```

我只想知道以下 Linux 版本在功能上是否等效：

```
int CSocket::setsync(int mode)
{
    if(sockid < 0)return -1;
    u_long i = mode;
    return ioctl(sockid, FIONBIO, &i);
} 
```

仅供参考，我 #included sys/ioctl.h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T17:29:55.537

所以我回答了我自己的问题。据我所知，他们是。至少，代码似乎可以正常工作。如果您想查看实际代码，请在[https://github.com/nterry/39DLL-4-Linux上克隆代码](https://github.com/nterry/39DLL-4-Linux)

# mongodb - mongodb：如何写下面的查询字符串

> ID：11380239
> 
> 赞同：0
> 
> 时间：2012-07-08T02:29:24.100
> 
> 标签：mongodb

我想选择所有符合以下条件的记录：

```
if "used1" not in record or record["used1"] != True 
```

这个怎么写？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:23:49.130

您将使用[`$exists`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)第一个：

```
db.collection.find({ used1: { $exists: false } }) 
```

[`$ne`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne)第二个：

```
db.collection.find({ used1: { $ne: true } }) 
```

要组合它们，请使用[`$or`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)：

```
db.collection.find({
    $or: [
        { used1: { $exists: false } },
        { used1: { $ne:     true  } }
    ]
 }) 
```

# android - 在framelayout中添加两个webview

> ID：11380253
> 
> 赞同：2
> 
> 时间：2012-07-08T02:34:14.470
> 
> 标签：android, webview, android-framelayout

我想在布局中添加两个 webview..我使用 frameLayout

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webview1"
        android:layout_width="350dip"
        android:layout_height="350dip" />

    <WebView
        android:layout_height="250dip"
        android:layout_width="250dip"
        android:id="@+id/webview2"    
    />

    </FrameLayout> 
```

在主要活动中：

```
 web1=(WebView)findViewById(R.id.webview1);
    web2=(WebView)findViewById(R.id.webview2);

    web1.loadUrl("http://www.google.com");
    web2.loadUrl("http://www.youtube.com");

    web2.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Animation anim=AnimationUtils.loadAnimation(FrameWebViewActivity.this, android.R.anim.slide_in_left);
            web2.setAnimation(anim);
        }
    }); 
```

但是当运行项目时，它只显示 webview youtube 全屏..我想同时显示两个 webview ..我必须做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:58:27.230

使用 Framelayout 时需要记住的一件事是**“向 FrameLayout 添加多个视图时，每个视图都将堆叠在前一个视图之上”。**所以最好使用任何其他父布局，如线性布局或相对布局，其中使用两个框架布局..

代码：

```
 </RelativeLayout>

      <?xml version=”1.0” encoding=”utf-8”?>
        <RelativeLayout
           android:id=”@+id/RLayout”
           android:layout_width=”fill_parent”
           android:layout_height=”fill_parent”
           xmlns:android=”http://schemas.android.com/apk/res/android”&gt;

         <FrameLayout>
            <WebView
              android:id="@+id/webview1"
              android:layout_width="350dip"
              android:layout_height="350dip" />
         </FrameLayout> 

         <FrameLayout>
            <WebView
               android:layout_height="250dip"
               android:layout_width="250dip"
               android:id="@+id/webview2" />
        </FrameLayout> 
      </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T03:12:30.553

使用另一种布局，a[`FrameLayout`](http://developer.android.com/reference/android/widget/FrameLayout.html)用于仅显示单个子元素。

我建议使用线性布局并指定权重以将视图划分为所需的比例。

# compiler-errors - 用 SDL 和 g++ 编译找不到 -lSDLmain 等

> ID：11380254
> 
> 赞同：1
> 
> 时间：2012-07-08T02:34:17.093
> 
> 标签：compiler-errors, g++, mingw, sdl, sublimetext2

我一直在尝试使用 g++ 来编译带有 SDL 的程序。

该程序只是一个 main.cpp 文件，其中包含两个 SDL 测试行，如下所示：

```
#include "SDL/SDL.h"

using namespace std;

int main(void) {
    SDL_Init(SDL_INIT_EVERYTHING);

    SDL_Quit();

    return 0;
} 
```

但我的问题是我收到与 SDL 库有关的错误。

首先我安装了 MinGW32 以便我可以了解 C++11，所以当我问 GCC 是什么版本时，它说它是`version 4.7.0`.

然后我`SDL-devel-1.2.15-mingw32.tar.gz`从 SDL 网站下载了文件并将文件夹解压缩到桌面。

之后，我将所有头文件从复制`/SDL-1.2.15/include/SDL`到`C:/MinGW/include/SDL`

然后我将文件`/SDL-1.2.15/lib`夹中的 3 个文件复制到`C:/MinGW/lib folder`

他们是：

```
libSDL.dll.a
libSDL.la
libSDLmain.a 
```

最后，我将`SDL.dll`文件从 bin 目录复制到将编译 .exe 文件的同一目录。

我想我已经正确设置了所有内容，但是根据我尝试编译它的方式，我得到了两条不同的消息。

首先，我尝试使用 Sublime Text 2 编辑器中的构建系统功能对其进行编译。

这是我告诉 Sublime Text 2 运行的命令：

```
"cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}", "-lmingw32 -lSDLmain -lSDL -mwindows"] 
```

当我运行它时，我收到错误消息：

```
c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../../mingw32/bin/ld.exe: cannot find lmingw32 -lSDLmain -lSDL -mwindows
collect2.exe: error: ld returned 1 exit status
[Finished in 0.3s with exit code 1] 
```

所以我然后尝试直接从命令提示符编译。

我将目录更改为与 main.cpp 相同的目录并运行以下命令：

```
g++ main.cpp -o main.exe -lmingw32 -lSDLmain -lSDL -mwindows 
```

并收到以下错误消息：

```
c:/mingw/bin/../lib/gcc/mingw32/4.7.0/../../../libSDLmain.a(SDL_win32_main.o): In function `console_main':
/Users/slouken/release/SDL/SDL-1.2.15/./src/main/win32/SDL_win32_main.c:315: undefined reference to `_SDL_main'
collect2.exe: error: ld returned 1 exit status 
```

谁能看到我做错了什么？

为什么我会收到两条不同的消息，具体取决于我从哪里运行命令，我该如何解决这个问题？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T02:57:57.777

我似乎已经解决了我自己的问题。

我在 Windows 命令提示符中遇到的错误是因为 SDL 似乎需要`main()`函数的正确签名，所以我更改了：

```
int main(void) { 
```

到：

```
int main(int argc, char *argv[]) { 
```

这使我可以从命令提示符编译而没有任何问题。

然后，Sublime Text 2 错误原来是我编写构建系统文件的方式有问题。

我只需要将`-l`标志拆分为单独的值。

以前我的标志是这样写的：

```
"-lmingw32 -lSDLmain -lSDL -mwindows" 
```

但我需要将其更改为：

```
"-lmingw32", "-lSDLmain", "-lSDL", "-mwindows" 
```

现在我可以通过按 F7 从 Sublime Text 2 构建。

# javascript - 通过在 Spotify 应用程序中拖放来接受部分播放列表

> ID：11380255
> 
> 赞同：0
> 
> 时间：2012-07-08T02:34:34.563
> 
> 标签：javascript, html, drag-and-drop, spotify

我正在开发一个 Spotify 应用程序，并在我的应用程序中构建了一个 dropzone，以便用户可以将音乐拖到它上面。它适用于歌曲、专辑和播放列表。每当他们拖动此内容时，他们的光标会显示一个绿色加号，一切正常。

**但是，当用户从现有播放列表**中仅选择几首歌曲时，dropzone 拒绝接受它们。没有显示绿色加号。没有任何东西被转移到dropzone。

有什么想法吗？

```
var dropzone = document.querySelector('#dropzone');
dropzone.addEventListener('dragover', handleDragOver, false);
dropzone.addEventListener('drop', handleDrop, false);

function handleDragOver(e) {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
    return false;
}

function handleDrop(e) {
    var droppedURI = e.dataTransfer.getData('Text');
    // rest of code here.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:22:53.980

根据我的尝试和研究（谷歌搜索），似乎根本不可能将一个以上的链接放入一个放置区。我不明白这一点，所以我猜这是错误。但是，*可以*将多个链接放到应用程序的图标上，至少在我的情况下这已经足够好了。

我是怎么做到的：

```
models.application.observe(models.EVENT.LINKSCHANGED, function(){
    models.application.links.forEach(function(link){
        // Use your already existing logic and do whatever your want to do with the links
        // For example (assuming you already have a playlist object):
        if( (link.split('/')[3] || link.split(':')[1]) === 'track' ){
            playlist.add(link);
        }
    });
}); 
```

希望这可以帮助！

# asp.net - 使用 asp.net 从 Windows 服务器连接到 Red hat linux 上的 oracle 11g

> ID：11380264
> 
> 赞同：1
> 
> 时间：2012-07-08T02:37:34.597
> 
> 标签：asp.net, windows, linux, oracle, sql-server-2008-r2

我们在 Windows 服务器上使用 ASP.NET 使用 sql server 2008r2 开发和测试了我们的应用程序。现在我们需要将数据库从 windows 移动到 red hat linux 上的 oracle。

我们还没有设置基础设施来测试它。同时我想知道是否有人成功地完成了这种事情。指向任何资源的指针将是一个很大的优势。

更改连接字符串是唯一需要做的事情，还是 Linux 中有任何特定配置允许这样做？

一旦我准备好环境，我将验证这一点，但如果有人有任何类似的经验，请分享一下。

提前致谢。

PS：为了将表结构、存储过程等迁移到 oracle，我们将使用 Sql Developer 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:37:28.020

我想回答我的问题，因为迁移到 oracle 并不是那么简单，但是有一些技巧可以帮助任何人在 Windows 或 linux 上迁移到 oracle 而不那么头痛。

Sql 开发人员工具首先将 sqlserver 模式和数据迁移到 oracle，包括存储过程、约束、触发器等。

它还可以很好地进行数据类型映射，并在需要时提供重新映射数据类型的选项。

一些注意事项和注意事项。

1.  Oracle 对存储过程名称的长度有大约 30 个字符的限制。这是您需要进行一些手动重命名的区域，因为迁移 SP 或名称大于 30 个字符的标识符可能会被截断。

2.  您可能面临的另一个常见问题是日期插入和格式设置。您可以使用以下代码段来避免头痛。常见错误是“不是有效月份”。

OracleConnection conn = new OracleConnection(oradb); // C# conn.Open(); OracleGlobalization session = conn.GetSessionInfo(); session.DateFormat = "DD.MM.RR"; // 这里根据需要改变格式 conn.SetSessionInfo(session);

3.  插入或更新数据或相关错误时，最烦人的错误是字符到数字的转换。

这里的问题是，当您将参数添加到 sql 提供程序的命令对象时，绑定按名称发生，但对于 Oracle.DataAccess，默认绑定是按位置。这是让我头疼的帖子。 [uint 数据类型的 ODP .NET 参数问题](https://stackoverflow.com/questions/4098668/odp-net-parameter-problem-with-uint-datatype)

你可以做的是设置 command.BindByName = true;

4.  当迁移返回数据的 SP 时，oracle 会创建一个 out 参数引用游标。在构造命令参数时需要注意这一点。

例如 OracleParameter refp = new Oracle.DataAccess.Client.OracleParameter("cv_1", OracleDbType.RefCursor, ParameterDirection.InputOutput);

command.Parameters.Add(refp);

5.  此外，sqlserver 要求 SP 的参数以“@”为前缀，而 oracle 则不需要。这可以在您的数据层中轻松处理。

6.  此外，由于 Oracle 中没有位数据类型，因此 number(1) 可以正常工作。如果需要，您可能需要将布尔值转换为数字。

希望这可以帮助某人避免迁移头痛。如果我遇到，我会发布更多问题。

# c# - 如何在 C# 中获得 1000 个十进制数字？

> ID：11380265
> 
> 赞同：0
> 
> 时间：2012-07-08T02:38:36.237
> 
> 标签：c#, pi, decimal-point

是否可以在 C# 中获得多达 1000 个十进制数字？

我的程序需要至少 1000 个小数点的 pi 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:59:52.483

那么您可以使用数组来模拟一个数字，例如，如果您需要计算 a（有 100000 位）加上 b（有 99999 位）：

```
 a:     a[100000]     a[99999]      a[99998]   ... a[1]           a[0]
+b:                   b[9999]       b[99998]   ... b[1]           b[0]
----------------------------------------------------------------------------
                                     ...   a[1]+b[1]+Carry      a[0]+b[0] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T02:44:04.067

是的，但不使用内置数据类型。 [十进制](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)是你能做的最好的，只有 28 到 29 位有效数字。

您将需要一个任意精度的库，或者您需要重新审视您的设计并确定您是否*真的*需要 1000 个十进制数字。

如果您只是想将 Pi 计算到 1000 位，则可以使用一些[函数](http://en.wikipedia.org/wiki/Pi#Spigot_algorithms)来计算 Pi 的第 n 位。此时，您可以简单地将结果存储在一个数组中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T02:54:24.280

如果您仍在寻找其他答案的替代方法，请查看[Bailey Borwein Plouffe](http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula)公式来计算 Pi 的第 n 位数字。您可以使用它来计算前 1000 位数字。

![在此处输入图像描述](../Images/fd20f0c25179e2ecb489cde6e74971ae.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T02:40:23.203

您需要使用任意精度算术。我不确定本地 C# 库，但 GMP 说它有一个 C# 包装器。

您还可以使用 J# 的 BigDecimal。

[这是一个类似的问题。](https://stackoverflow.com/questions/4523741/arbitrary-precision-decimals-in-c-sharp)

# ruby-on-rails - 多步向导中的验证

> ID：11380266
> 
> 赞同：1
> 
> 时间：2012-07-08T02:38:43.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我试图在多步向导上设置验证（使用 wicked gem 和这个[GUIDE](https://github.com/schneems/wicked/wiki/Partial-Validation-of-Active-Record-Objects)）。第一步我正在输入一些用户信息（使用设计 + 注册），但是当我提交时，我收到以下错误：

```
NoMethodError in RegistrationsController#create

undefined method `include?' for nil:NilClass
Rails.root: /Users/nelsonkeating/Desktop/remindeal1

Application Trace | Framework Trace | Full Trace
app/models/user.rb:54:in `active_or_address?'

Class User
  validates_presence_of :address, :presence => true, :if => :active_or_address?

  def active_or_address?
    status.include?('address') || active?
  end

 def active?
   status == 'active'
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:22:34.293

您需要将“状态”添加到用户模型，并从向导控制器将其设置为 step 的值。

该指南指导您在“解决方案”部分的开头执行迁移：

```
class ProductStatus < ActiveRecord::Migration

  def up
    add_column :products, :status, :string
  end

  def down
    remove_column :product, :status
  end

end 
```

# javascript - jQuery中的Javascript'this'指针

> ID：11380270
> 
> 赞同：3
> 
> 时间：2012-07-08T02:40:22.813
> 
> 标签：javascript, pointers, this

我创建了一个对象`obj`：

```
function a(id, ...){
   this.id = id;
   ......
} 
```

`var obj = new a("#somediv", ...);`

我有这个功能：

```
a.prototype.b = function(){
    $(this.id+" span").mouseover(function(){
        $(this.id).addClass("c");
    });

}; 
```

显然，`this`鼠标悬停函数中的指向`span`而不是`obj`...

我知道我可以通过创建一个变量并获取`this.id`but的属性来解决这个问题

**有没有办法让`this`鼠标悬停功能指向`obj`呢？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T02:41:54.957

在较新的浏览器中使用纯 JavaScript，您可以绑定函数：

```
a.prototype.b = function(){
    $(this.id+" span").mouseover(function(){
        $(this.id).addClass("c");
    }.bind(this));
}; 
```

使用 jQuery，您可以获得更好的浏览器支持：

```
a.prototype.b = function(){
    $(this.id+" span").mouseover($.proxy(function(){
        $(this.id).addClass("c");
    }, this));
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:44:06.727

替代使用`$.proxy`：

```
a.prototype.b = function(){
    $(this.id+" span").mouseover($.proxy(function(){
        $(this.id).addClass("c");
    }, this));
}; 
```

# spring - 单击jsp页面上的链接时出现错误404

> ID：11380275
> 
> 赞同：0
> 
> 时间：2012-07-08T02:41:30.707
> 
> 标签：spring

我在我的 spring-app 的 servlet.xml 中声明了这 2 个 bean：

```
<bean name="/apple.htm" class="controller.AppleController"/>

<bean name="/secure/banana.htm" class="controller.BananaController"/> 
```

这是香蕉控制器：

```
public class BananaController implements Controller {

    protected final Log logger = LogFactory.getLog(getClass());

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        logger.info("returning contact view");
        return new ModelAndView("/banana");
    }

} 
```

这是 AppleController

```
public class AppleController implements Controller {

    protected final Log logger = LogFactory.getLog(getClass());

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        logger.info("returning contact view");
        return new ModelAndView("/apple");
    }

} 
```

这是 Apple.jsp（Banana.jsp 类似）：

```
<%@ include file="/WEB-INF/pages/include.jsp" %>
<html>
<body>
    <h1>Test</h1>
    <%@ include file="/WEB-INF/pages/menu.jsp" %>
    <h2>Apple</h2>
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ac mauris ante. 
    </p>

</body>
</html> 
```

这是 menu.jsp：

```
<a href="<c:url value="apple.htm" />" > Apple</a>
<a href="<c:url value="secure/banana.htm" />" > Banana</a>
<a href="<c:url value="/j_spring_security_logout" />" > Logout</a> 
```

问题是，一旦我登录，我就可以访问banana.htm，但是，如果我回到“apple”页面，它会尝试访问secure/apple.htm页面，因为我已经找到了在 /secure 文件夹中。

我知道../apple.htm 会正确重定向，但没有什么告诉我该链接只能从banana.htm 中单击。我确定我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:08:06.997

怎么样

```
<a href="<c:url value="/apple.htm" />" > Apple</a> 
```

# javascript - 如何在不出现引用错误的情况下将不存在的 JavaScript 对象与未定义的对象进行比较？

> ID：11380283
> 
> 赞同：41
> 
> 时间：2012-07-08T02:43:08.177
> 
> 标签：javascript, referenceerror

我想从这个表达式中出来布尔值

```
(task === undefined); 
```

where`task`是任意的，根本不会出现在代码中。

但是，当我在 rhino 中运行它时，我得到一个参考错误。我想要真实的

为什么我不说真话？

我想检查是否已定义特定变量。如果这不起作用，我该怎么做？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-08T02:44:31.103

用这个：

```
(typeof task === "undefined") 
```

使用时`(task === undefined)`，Javascript需要查找的值，`task`看是否与 相同`undefined`，但是因为不存在而无法查找名称，给你引用错误。 `typeof`特殊之处在于它可以安全地返回不存在的名称类型。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T09:34:32.597

**已接受答案的附录**，以了解为什么它不适用于您可以在 javascript 控制台中尝试的一些示例。

仅当变量存在时，直接与未定义类型进行比较才有效。以下是您将从 Google Chrome 浏览器获得的输出：

```
> task === undefined
  ReferenceError: task is not defined 
```

但是，如果**变量存在**，它将起作用：

```
// continued from above
> var task
  undefined
> task === undefined
  true 
```

这就是为什么您应该使用`typeof`解决方案的原因，因为它在**所有**情况下都可以正常工作而不会引发错误（并破坏 javascript 代码的执行）。

```
// continued from above
> typeof notavariable === 'undefined'
  true
> typeof task === 'undefined'
  true 
```

请注意，在某些情况下您不需要`typeof`检查，例如对象文字中的属性：

```
// continued from above
> var obj = {}
  undefined
> obj.test === undefined
  true
> obj.test = 1
  1
> obj.test === undefined
  false 
```

这是因为对象中的属性表现得更像关联数组中的值：

```
// continued from above
> obj["test"]
  1
> obj["test"] === undefined
  false 
```

但是，您不能总是确定这是您无法控制参数输入的函数中的一种情况：

```
// continued from above
> function TestFunc(arg1) { console.log(arg1) }
  undefined
> TestFunc(notavariable)
  ReferenceError: notavariable is not defined
> TestFunc(task)
  undefined
  undefined
> TestFunc(obj["lol"])
  undefined
  undefined 
```

希望这个练习可以帮助你理解这种比较的原因。

# ruby-on-rails - Lion 上 RSpec 的 ~/.bashrc 路径

> ID：11380286
> 
> 赞同：0
> 
> 时间：2012-07-08T02:44:11.140
> 
> 标签：ruby-on-rails, ruby, bash, rspec

我使用 sudo gem install rspec 在 Lion (10.7.4) 上安装了 RSpec，但是当我尝试“spec”时，我不断收到“-bash: spec: command not found”。

我认为这是因为路径，所以我想我需要更新 ~/.bashrc ，但我不知道如何。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:35:33.840

命令行脚本的名称是`rspec`，不是`spec`。

# jar - 如何使用来自终端的参数执行 jar 文件？

> ID：11380290
> 
> 赞同：1
> 
> 时间：2012-07-08T02:44:57.960
> 
> 标签：jar, terminal, arguments, execute

我想出了以下代码来计算给定数字的阶乘：

```
import java.lang.*;

import java.math.*;

import java.io.*;

import java.util.*;

@SuppressWarnings("unused")
class factorial_1{

public static void main(String args[]) throws IOException

{

System.out.println("enter a number: ");

String strPhone = "";  
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

strPhone = br.readLine();

BigInteger number = new BigInteger (strPhone);

BigInteger fact = new BigInteger("1");

BigInteger i = new BigInteger("1");

BigInteger step = new BigInteger("1");

final long start = System.currentTimeMillis();

final long durationInMilliseconds = System.currentTimeMillis()-start;

for ( ; i.compareTo(number) <= 0; i=i.add(step)){

    fact = fact.multiply(i);

}

System.out.println("execute Long-Running Task took " + durationInMilliseconds + "ms.");

System.out.println("the factorial of "+ number +" is "+ fact);

}

} 
```

如果您执行代码，它会从键盘读取一个数字，然后打印出它的阶乘

我将代码导出为 .jar 文件，并尝试从终端输入数字 (10) 作为输入

我按照这篇文章所说的那样做了[如何使用命令行参数执行 jar，](https://stackoverflow.com/questions/6777124/how-to-execute-jar-with-command-line-arguments)但是直到我再次输入数字之前什么都没有发生

> - - - - - -终端 - - - - - -
> 
> roditis@NiSLab-pc2:~/Desktop$ java -jar import_number.jar 10
> 
> 输入一个数字：
> 
> 10
> 
> 执行长时间运行的任务耗时 0 毫秒。
> 
> 10 的阶乘是 3628800
> 
> - - - - - -终端 - - - - - -

我是 linux / 编程新手，我非常期待您的帮助

提前致谢

罗德蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:54:39.073

您应该尝试将值放在引号中，例如`roditis@NiSLab-pc2:~/Desktop$ java -jar import_number.jar "10"`

请记住，您的 main 函数需要一个 String 对象数组，如下所示`public static void main(String[] args)`。

**编辑**

抱歉，我看到您根本没有读取`args[]`参数。如果您将`"10"`作为参数提供给程序，`args[0]`则将包含该值。请`if(args.length >= 1)`在访问之前检查您的情况`args`。

# matlab - 基于矩阵的matlab中的3d图

> ID：11380291
> 
> 赞同：1
> 
> 时间：2012-07-08T02:45:01.197
> 
> 标签：matlab, 3d, plot

> **可能重复：**
> [Matlab 3D 矩阵图](https://stackoverflow.com/questions/9396096/matlab-3d-matrix-plot)

我在 matlab 中有一个矩阵，我想将其绘制为 3D 图形。假设矩阵如下所示：

> A=[4 7 8; 2 3 9]

这实际上意味着 x,y,z 平面中的以下数据点

> (1,1,4) (1,2,7) (1,3,8) (2,1,2) (2,2,3) (2,3,9)

我想在 3D 图表上绘制这些值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:06:18.170

要使用的功能是[`surf(A)`](http://www.mathworks.com/help/techdoc/ref/surf.html) 这将从 x = 1:2 和 y = 1:3 绘制您的点

# java - ChunkInputStream 读取块 id 标签时遇到问题

> ID：11380296
> 
> 赞同：1
> 
> 时间：2012-07-08T02:46:16.477
> 
> 标签：java, io, inputstream

我一直在研究用于 Java 的音频/视频容器（如 AVI），并且在从文件中读取块 id 标签时遇到了错误。以下是我遇到的错误；

```
java.io.UTFDataFormatException: malformed input around byte 10
at java.io.DataInputStream.readUTF(Unknown Source)
at java.io.DataInputStream.readUTF(Unknown Source)
at com.hachisoftware.ism.ChunkInputStream.readChunk(ChunkInputStream.java:27)
at Main.run(Main.java:72)
at java.lang.Thread.run(Unknown Source)
at Main.main(Main.java:26) 
```

错误发生在这`String id = in.readUTF();`行代码中；

```
public Chunk readChunk(Chunk type) throws IOException {

    String id = in.readUTF();

    if(!type.chuckID.equalsIgnoreCase(id.toString()))
        throw new IOException("Can't cast Chunk '" + type.chuckID + "' to '" + id + "'");

    type.readChunk(in);

    return type;
} 
```

所有源代码都可以在以下位置找到：[GitHub](https://github.com/William2405/ISM-API/tree/master/src "GitHub")

# ios - NSString floatValue 似乎没有正确运行

> ID：11380297
> 
> 赞同：0
> 
> 时间：2012-07-08T02:46:33.603
> 
> 标签：ios

我在 xib 文件中有一个文本字段。在 .m 文件中的一个方法中，我可以打印文本字段的内容，但我无法将这些内容转换为浮点数。文本字段用逗号格式化，如 123,456,789。下面是代码片段，其中 datacellR2C2 是文本字段。

```
float originalValue2 = originalValue2 = [datacellR2C2.text  floatValue];
NSLog(@"datacellR2C2 as text --> %@ <---\n",datacellR2C2.text);  // this correctly shows the value in datacellR2C2
NSLog(@"originalValue2 = %f  <--\n", originalValue2);  // this incorrectly returns the value 1.0 
```

我将不胜感激任何关于修复或我应该寻找问题的方向的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:20:59.063

在`-floatValue`评论声明中显示：

> /* 以下便捷方法都跳过初始空格字符（whitespaceSet）并忽略尾随字符。NSScanner 可用于更“精确”的数字解析。*/

因此，逗号会导致截断，因为它们是尾随字符。甚至您提供的字符串 (123,456,789) 也只打印 123.000，因为这都是可见的`-floatValue`。

```
//test
NSString *string = @"123,456,789";
float originalValue2 = [string  floatValue];
NSLog(@"datacellR2C2 as text --> %@ <---\n",string);  // this correctly shows the value in datacellR2C2
NSLog(@"originalValue2 = %f  <--\n", originalValue2);

//log
2012-07-07 22:16:15.913 [5709:19d03] datacellR2C2 as text --> 123,456,789 <---
2012-07-07 22:16:15.916 [5709:19d03] originalValue2 = 123.000000  <-- 
```

只需用一个简单的 删除它们`+stringByReplacingOccurrencesOfString:withString:`，并删除那些尾随逗号：

```
//test
NSString *string = @"123,456,789";
NSString *cleanString = [string stringByReplacingOccurrencesOfString:@"," withString:@""];
float originalValue2 = [cleanString  floatValue];
NSLog(@"datacellR2C2 as text --> %@ <---\n",cleanString);  // this correctly shows the value in datacellR2C2
NSLog(@"originalValue2 = %f  <--\n", originalValue2);

//log
2012-07-07 22:20:20.737 [5887:19d03] datacellR2C2 as text --> 123456789 <---
2012-07-07 22:20:20.739 [5887:19d03] originalValue2 = 123456792.000000  <-- 
```

顺便说一句，浮点数将该字符串四舍五入为偶数，请改用双精度。

# c++ - 编译 DirectX9 时出错，程序说找不到 d3dx.lib

> ID：11380300
> 
> 赞同：0
> 
> 时间：2012-07-08T02:48:10.270
> 
> 标签：c++, directx

我已经将 d3d.lib 和 d3dx.lib 放在其他依赖项中，并添加了 VC++ 目录的路径 include 和 lib 目录，但我仍然收到此错误。

我什至已经将 SDK 中的 Include 和 lib 苍蝇移动到 VS 2010 的 include 和 lib 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T22:56:02.647

对于 D3D9，您希望链接到 d3d9.lib 和 d3dx9.lib，而不是 d3d.lib 和 d3dx.lib。还有对应其他D3D版本的d3d10.lib、d3d10_1.lib、d3d11.lib、d3dx10.lib和d3dx11.lib。

# geometry - 查找 3D 基础相对于另一个协调基础的旋转

> ID：11380303
> 
> 赞同：0
> 
> 时间：2012-07-08T02:49:31.480
> 
> 标签：geometry, rotation, linear-algebra, coordinate-systems

考虑我们有一个坐标系统 (i,j,k)，它的原点位于 (0,0,0) 现在我在原始空间内创建另一个坐标系统，其中包含来自原始空间的三个向量 (t,u,v)。这个新基础相对于原始空间的旋转（偏航，俯仰，滚动）是多少？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:22:50.197

如果在新的基础上原点不变，那么就是线性变换，否则就是仿射变换矩阵，结合了旋转和平移。在这两种情况下，您都可以确定变换矩阵，从而可以轻松确定旋转（偏航、俯仰、滚动）。请参阅[此处](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/geometry/geo-tran.html)了解更多信息。此外，只是一个友好的提醒，math.stackexchange.com 是提出此类问题的更好地方。

# php - 从 php 访问 python 脚本中的函数

> ID：11380304
> 
> 赞同：1
> 
> 时间：2012-07-08T02:50:02.523
> 
> 标签：php, python, soap

我有一个用 PHP 编写的 Web 应用程序。在一些地方，我通过 exec() 调用 python 脚本。我想知道是否有更好的方法来做到这一点。我正在考虑创建允许我访问脚本中的 python 函数的肥皂服务。这样做有意义吗？是否有任何其他技术可以让您构建类似肥皂的服务，但本地而不是 http？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:01:23.557

当然，这是有道理的。HTTP 只是许多可能适用的应用程序级协议之一。另一种方法可能是让您的 python 可用于[celery](http://celeryproject.org/)。（虽然 celery 可以从 python 本地调用，[但它不限于 python](http://www.toforge.com/2011/01/run-celery-tasks-from-php/)。）

# iphone - 是否有一种有效的方法来确定特定核心数据记录的索引

> ID：11380310
> 
> 赞同：0
> 
> 时间：2012-07-08T02:51:16.833
> 
> 标签：iphone, ios, core-data

我正在尝试使用以下代码查找核心数据记录的索引，其中 [self numItems] 返回记录数。代码平均执行大约需要 0.2 秒。我有兴趣加快速度。提前致谢。

```
- (NSInteger) indexWithTaskID:(NSInteger)eventID
{
    for (NSInteger i=0;i<[self numItems];i++) {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0];
        NSManagedObject *managedObject = [self.fetchedResultsController
                                      objectAtIndexPath:indexPath];
        NSInteger myEventID = [(NSNumber *)[managedObject valueForKey:@"eventID"] intValue];

        if (myEventID == eventID) {
            return i;
        }
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:44:22.270

这有点落后于设置的目的，如果你有很多数据，我会尽量避免需要找到这个索引，但如果你真的需要知道索引，那么你可能会被困在这个搜索中。如果谓词已排序，则可以比线性搜索做得更好，也许[简单的二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)可以带来足够的改进。

# javascript - 提交 javascript 变量的值以及表单提交

> ID：11380311
> 
> 赞同：-1
> 
> 时间：2012-07-08T02:51:34.717
> 
> 标签：javascript, jquery, html

如何提交 javascript 变量的值以及表单提交？这是我到目前为止所拥有的：

```
var data = "abc";

$('form').submit(function(){
//add new hidden input field with value = data
}); 
```

注意：html 页面只有一个表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T02:54:36.027

为什么不简单

```
$('form').submit(function(){
    $('<input type="hidden" name="data" />').attr('value', data).appendTo(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T02:56:03.380

```
$('form').submit(function(){
    $(this).append($('<input />').attr('name', 'data').attr('value', data));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T02:53:53.357

```
var data = "abc";

$('form').submit(function(){
    $("form").append('<input type="hidden" name="data" value="' + data + '"');
}); 
```

# .htaccess - CodeIgniter 不会在子目录中运行

> ID：11380313
> 
> 赞同：0
> 
> 时间：2012-07-08T02:52:02.853
> 
> 标签：.htaccess, codeigniter, routes

我有一个 CodeIgniter 安装在我们的根 Web 目录中运行，我将它复制到一个名为 /dev 的子目录中...我编辑了 config/config.php 文件以反映更改，所以它现在是这样的：

```
$config['base_url']  = 'http://mysite.com/dev';
$config['sbase_url']     = 'https://mysite.com/dev';
$config['default_email'] = 'noreply@mysite.com';
$config['site_url']  = 'http://mysite.com/dev'; 
```

这是我的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

当我将鼠标悬停在网站上的任何链接上时，它们都是正确的，例如，联系我们页面链接显示为 www.mysite.com/dev/contact，但是当我单击任何链接时，我会收到 404 错误...

我有什么共同之处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T02:58:47.550

在 RewriteRule 中启用并在 index.php 前面`FollowSymlinks`添加一个：`./`

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  # block hidden directories
  RewriteRule "(^|/)\." - [F]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ ./index.php/$1 [L,QSA]
</IfModule> 
```

另外，我会留空`$config['base_url'] = '';`并在构建链接时使用`base_url()`url 帮助程序，这使得移动环境更容易（*例如 subdir'd dev & root-level production*）。

...当然，确保在您的 Apache 配置中启用了 ModRewrite。

# jlabel - JLabel ImageIcon 位置

> ID：11380318
> 
> 赞同：2
> 
> 时间：2012-07-08T02:54:15.797
> 
> 标签：jlabel, imageicon

我有一个`JLabel`with `ImageIcon`，我通过使用 in 中的`setIcon()`函数来放置它`JLabel`。然后`ImageIcon`出现，坐在我的文本的左侧`JLabel`。是否有可能`ImageIcon`在文本的右侧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:09:10.913

假设标签称为“标签” - 然后使用：

```
label.setHorizontalTextPosition(JLabel.LEFT); 
```

那应该行得通。

# android-activity - 从主应用程序获取主活动

> ID：11380322
> 
> 赞同：1
> 
> 时间：2012-07-08T02:54:50.897
> 
> 标签：android-activity, android, android-context

我有以下清单。

```
<application
    android:name=".MyMainApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyMainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我还有以下全局静态函数。

`MyMainApplication application = MyMainApplication.instance();`正如在[到处使用应用程序上下文中描述的技术？](https://stackoverflow.com/questions/987072/using-application-context-everywhere)

我想知道，从`application`变量中，我有可能得到`MyMainActivity`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:14:13.200

无法`Activity`使用`Application`实例检索应用程序的 main。

Usually there is no reason to do this... perhaps there is a better solution than manipulating the main `Activity` directly as you apparently are doing. Maybe you should update your post explaining specifically what you are attempting to do.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-08T03:22:42.903

您可以从*MyMainApplication*类启动活动，尽管它不扩展 Activity 在主应用程序类中创建新的 Intent 并将意图标志设置为`Intent.FLAG_ACTIVITY_NEW_TASK`。Activity 被实例化。我已经测试并验证了。

代码片段供参考：

```
Intent intent = new Intent(this,MyMainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# php - while 语句无限重复

> ID：11380324
> 
> 赞同：-2
> 
> 时间：2012-07-08T02:55:09.590
> 
> 标签：php, html, if-statement, while-loop

我有一个网站，我需要使用 while 语句，但是当我使用它时，它会无限重复回声。虽然看起来我可以在没有 while 的情况下让它工作，但事实并非如此，这是最终产品的简化版本，需要 while。

```
<?php 
$passlevel = '0';
while ($passlevel == '0')
{
    if(isset($_GET['box_1_color']))
    {
        $color=$_GET['box_1_color'];
        if($color == "#800080")
        {
            echo "you have passed step one.";
            $passlevel == '1';      
        }
        else 
        {
            echo "you didn't select purple.";
        }   
    }
    else echo "contact webmaster";
}
?> 
```

为什么它与联系网站管理员或您没有无限次选择紫色相呼应？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T02:58:38.013

首先，您可能需要更改：

```
$passlevel == '1'; 
```

到

```
$passlevel = '1'; 
```

第一个是比较等于，而不是赋值等于。

其次，如果`$color`is not `#800080`，则循环不会终止，因此会永远重复，因为循环中没有任何内容会导致值发生变化。

I'm not entirely sure of the point of this loop in the first place. It should work perfectly fine without the loop, however you've stated that your code is a simplified version of something more complicated that indeed needs a loop. Perhaps you can elaborate.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-08T03:01:34.417

You're not providing any way out of the loop. If `$_GET['box_1_color']` isn't purple the first time through the loop, it can't possibly become anything else the second time through the loop, so it'll keep being the wrong color each and every time.

I'm not certain what you intended for this loop to accomplish. If you're trying to have the user enter a new value each time, you won't be able to do that with a loop in PHP. You'll have to regenerate the entire page (with an error message, presumably) and ask the visitor to submit the form again.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T02:59:11.830

In the case of "contact webmaster", you need to `break` out of the loop, either with the `break` expression or by setting your $passlevel to anything other than zero. A more serious real problem is revealed in @Mike Christensen's answer, though

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T02:59:34.200

If `$_GET['box_1_color']` is not set, the variable `$passlevel` will never be changed.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-08T03:03:10.203

```
<?php 
$passlevel = 0;
while ($passlevel == 0 || $passlevel == 2)
{
    if(isset($_GET['box_1_color']))
    {
        $color=$_GET['box_1_color'];
        if($color == "#800080")
        {
            echo "you have passed step one.";
            $passlevel = 1;      
        }
        else 
        {
            echo "you didn't select purple.".'try again.';
        }   
    }
    else
    {
        echo "contact webmaster";
        $passlevel = 2;
    }
}
?> 
```

You need to define another passlevel for failure, to stop the while loop. Also, don't put any quotes around integers.

# python - 为什么 python 的 imp.reload() 不删除旧的类和函数？

> ID：11380328
> 
> 赞同：2
> 
> 时间：2012-07-08T02:57:26.357
> 
> 标签：python, object, python-3.x, module, reload

我刚刚认识到，`imp.reload()`如果从模块的源文件中删除了旧的类和函数，则不会删除它们。

一个例子：

```
:~$ python3
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> print(open("test.py").read())
# empty file
>>> import test
>>> dir(test)
['__builtins__', '__cached__', '__doc__', '__file__', '__name__',
'__package__']
>>> print(open("test.py").read())                             
# new class A and B added
class A:                                                      
        pass                                                  

class B:                                                      
        pass

>>> import imp
>>> dir(imp.reload(test))
['A', 'B', '__builtins__', '__cached__', '__doc__', '__file__', '__name__',
'__package__']
>>> print(open("test.py").read())
# class A deleted
class B:
        pass

>>> dir(imp.reload(test))
['A', 'B', '__builtins__', '__cached__', '__doc__', '__file__', '__name__',
'__package__']
>>> import sys
>>> dir(sys.modules['test'])
['A', 'B', '__builtins__', '__cached__', '__doc__', '__file__', '__name__',
'__package__']
>>> sys.modules['test'].A
<class 'test.A'> 
```

在最后几行中，您可以看到有一个类对象`A`，尽管它已从模块源代码中删除。为什么会这样？有没有办法识别模块的这些元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T03:04:38.340

根据[文档](http://docs.python.org/py3k/library/imp.html#imp.reload)：

> 如果模块的新版本没有定义旧版本定义的名称，则旧定义仍然存在。如果模块维护一个全局表或对象缓存，则此功能可以用于模块的优势 - 使用 try 语句可以测试表的存在并在需要时跳过其初始化：
> 
> ```
> try:
>     cache
> except NameError:
>     cache = {} 
> ```

所以这就是为什么。如果您不想要那些旧对象，您可以在重新加载之前清空模块的字典。例如，在这里我将 import `hashlib`，清空它的字典，然后重新加载它。

```
import hashlib

for attr in dir(hashlib):
    if attr not in ('__name__', '__file__'):
        delattr(hashlib, attr)

hashlib = imp.reload(hashlib) 
```

[可怜`hashlib`。]

# sql - 查找字符串中字符和数字的计数

> ID：11380329
> 
> 赞同：6
> 
> 时间：2012-07-08T02:57:45.347
> 
> 标签：sql, oracle

嗨，我有一个表格测试如下

```
NAME
---------
abc1234
XYZ12789
a12X8b78Y9c5Z 
```

我尝试找出字符串中数字和字符的数量

```
select name,length(replace(translate(lower(name),'abcdefghijklmnopqrstuvwxyz',' '),'      ','')) as num_count,
length(replace(translate(name,'1234567890',' '),' ','')) as char_count
from test6; 
```

它的执行很好，给出了输出

```
NAME    NUM_COUNT   CHAR_COUNT
abc1234         4       3
XYZ12789        5       3
a12X8b78Y9c5Z   7       6 
```

但我的问题是不手动给出`abcdefghijklmnopqrstuvwxyz` and有什么选择`1234567890`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-08T12:00:04.070

@alfasin 答案很好，但是如果您使用的是 11g，那么它会变得更简单：

```
select name,
REGEXP_count(name,'\d') as num_count,
REGEXP_count(name,'[a-zA-Z]') as char_count,
from test6; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T04:52:44.947

如果我理解正确，您使用的是 Oracle PLSQL，据我所知，没有任何“内置”方法（在 PLSQL 中）可以计算字符串中的数字/字符数。

但是，您可以执行以下操作来计算字符数：
`select LENGTH(REGEXP_REPLACE('abcd12345','[0-9]')) from dual`

和数字：
`select LENGTH(REGEXP_REPLACE('abcd12345','[a-zA-Z]')) from dual`

或者，在您的情况下：

```
select name,
LENGTH(REGEXP_REPLACE(name,'[a-zA-Z]','')) as num_count,
LENGTH(REGEXP_REPLACE(name,'[0-9]','')) as char_count,
from test6; 
```

**对于 Bill the Lizard：**
我的答案在 Oracle 11g 上进行了测试，效果很好！
如果您决定再次删除我的答案，请善意添加评论以解释原因。我也在聊天室里找你...

# php - 获取 SimpleXML 错误

> ID：11380342
> 
> 赞同：0
> 
> 时间：2012-07-08T02:59:49.440
> 
> 标签：php, simplexml

我正在尝试回显位于引号之间的文本`<head_1 data="Superhero"/>`

XML 文件如下所示：

```
<?xml version="1.0"?>
<nowplaying version="1.1">
    <playing_now>
        <rbds_text data="SUPERHERO by Family Force 5"/>
        <result>
            <type data="song"/>
            <head_1 data="Superhero"/>
            <head_2 data="Family Force 5"/>
            <head_url data="song/Family_Force_5/Superhero.html"/>
            <foot_1 data="III.V - EP"/>
            <foot_2 data="Family Force 5"/>
            <foot_url data="album/Family_Force_5/III.V_-_EP.html"/>
            <image_50 data="/images/music/thumbs/familyforce5-iiivep.jpg"/>
            <image_200 data="/images/music/familyforce5-iiivep.jpg"/>
        </result>
    </playing_now>
</nowplaying> 
```

我当前的 PHP 文件如下所示，但出现错误：

```
<?php
include 'playing-now/api.html';

$nowplaying = new SimpleXMLElement($xmlstr);

echo $nowplaying->playing_now->result->head_1;"
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T03:07:18.530

```
echo $nowplaying->playing_now->result->head_1['data']; 
```

如果您遇到任何错误，则可能在名称上。您应该能够像这样逃脱它们：

```
echo $nowplaying->{'playing_now'}->result->{'head_1'}['data']; 
```

# scala - 在 Scala 中使用类型成员来减少类型冗长是否可行？

> ID：11380344
> 
> 赞同：13
> 
> 时间：2012-07-08T03:00:08.933
> 
> 标签：scala, polymorphism, type-inference

所以，这听起来像是一个关于语言设计的普遍问题，但我认为这里有一些具体的东西。具体来说，我感兴趣的是哪些技术挑战会阻止随后的笨拙代码普遍有用。

我们都知道“Scala 的类型推断不如 Haskell 的好”，并且它不能那么好有很多原因，并且仍然可以做 Scala 所做的所有事情。但是，在对 Scala 进行足够长的编程之后，很明显的一点是，糟糕的类型推断并没有那么糟糕，就像指定一些常见类型所需的冗长一样。因此，例如，在多态`tail`函数中，

```
def tail[A](ls: List[A]) =
    ls match {
        case Nil     => sys.error("Empty list")
        case x :: xs => xs
    } 
```

为了使方法有用，需要显式命名类型参数；没有办法解决它。`tail(ls: List[Any])`将不起作用，因为 Scala 无法确定结果类型与输入类型相同，即使对人类来说这是“显而易见的”。

因此，受这个困难的启发，并且知道 Scala 有时使用类型*成员*比使用类型参数更聪明，我编写了一个`List`使用类型成员的版本：

```
sealed trait TMList {
    self =>
    type Of
    def :::(x: Of) = new TMCons {
        type Of = self.Of
        val head = x
        val tail = (self: TMList { type Of = self.Of })
    }
}
abstract class TMNil extends TMList
def ATMNil[A] = new TMNil { type Of = A }
abstract class TMCons extends TMList {
    self =>
    val head: Of
    val tail: TMList { type Of = self.Of }
} 
```

好的，这个定义看起来*很糟糕*，但它至少简单明了，它允许我们编写`tail`如下方法：

```
def tail4(ls: TMList) =
    ls match {
        case _: TMNil => sys.error("Empty list")
        case c: TMCons with ls.type => c.tail
    } 
```

美妙的是，这*行得通*，所以我们可以写（`head`定义如你所料）

```
val ls = 1 ::: 2 ::: ATMNil
val a = tail4(ls)
println(head4(a) * head4(a)) 
```

Scala*知道*输出类型成员仍然是`Int`. 我们不得不用 写一些有趣的东西`TMCons with ls.type`，而 Scala 抱怨匹配并不详尽，但那段代码可能只是由 Scala 为我们插入的，因为当然当你匹配`ls`任何情况时都必须是 of `ls.type`，并且当然比赛是详尽的。

所以我的问题是：有什么问题？为什么我们不以这种方式处理所有的多态类型，而只是修改语言以使语法看起来不那么糟糕？我们会遇到什么技术问题？

显然存在一个问题，即类的类型成员不能是协变的。但我对此不感兴趣；我认为这是一个单独的问题。暂时假设我们不关心方差。还有什么问题？

我怀疑这可能会为类型推断引入新问题（例如我必须如何定义`ATMNil`示例才能正常工作），但我对 Scala 的类型推断了解得不够透彻，无法知道它们会是什么。

**编辑以回应 0__：**我想你可能已经找到了。带有类型参数的版本有效，

```
def move2[A](a: TMList { type Of = A }, b: TMList { type Of = A }) = b match {
    case c: TMCons with b.type => c.head ::: a
    case _                     => a
} 
```

但有趣的是，如果没有明确的返回类型，咖喱依赖类型的版本不会：

```
def move3(a: TMList)(b: TMList { type Of = a.Of }) = b match {
    case c: TMCons with b.type => c.head ::: a
    case _                     => a
} 
```

Scala 推断返回类型为`TMList`; 这*是*两种情况的上限，`TMList { type Of = a.Of }`并且`a.type`。当然，`TMList { type Of = a.Of }`也将是一个上限（也是我想要的，这就是为什么添加显式返回类型有效的原因），而且我认为，一个更具体的上限。我想知道为什么 Scala 不推断更具体的上限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T05:10:09.527

你会想要阅读[类型细化做所有事情](http://scala-programming-language.1934581.n4.nabble.com/Type-refinements-do-everything-td1989876.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T11:11:44.953

尝试使用以下内容重写以下内容`TMList`：

```
def move[A](a: List[A], b: List[A]): List[A] = b match {
   case head :: _ => head :: a
   case _ => a
}

move(List(1,2,3),List(4,5,6)) 
```

# php - Symfony 2 自定义身份验证未使用正确的提供程序

> ID：11380345
> 
> 赞同：0
> 
> 时间：2012-07-08T03:00:28.223
> 
> 标签：php, symfony

我正在使用 FOSRestBundle 创建一个 REST API。对于身份验证，我使用了一个标头，该标头随每个请求一起发送。[它与这个食谱条目](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)非常相似。

监听器工作正常。一旦它调用以下行，我就看不到任何调试或错误日志条目，它只会引发 AuthenticationError 异常：`$returnValue = $this->authenticationManager->authenticate($token);`

我怀疑被调用的提供者是`main`而不是我添加的那个 named `api`。

*security.yml*是唯一与说明书条目有很大偏差的配置文件：

```
security:
    encoders:
        Keobi\ModelBundle\Entity\User:
            algorithm: sha512
            iterations: 5000
            encode_as_base64: true

    role_hierarchy:
        ROLE_ADMIN:       [ROLE_USER, ROLE_ALLOWED_TO_SWITCH]
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        main:
            entity: { class: KeobiModelBundle:User, property: email }
        api:
            entity: { class: KeobiModelBundle:Api, property: key }

    factories:
        - "%kernel.root_dir%/../src/Keobi/SecurityBundle/Resources/config/secrity_factories.yml"

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/security/login$
            security: false

        api: # <- this is the firewall for my custom auth
            pattern: ^/api/
            #security: false
            api: true
            provider: api

        secured_area:
            pattern:    ^/(keobi|customer|security)/.*$
            form_login:
                check_path: /security/login_check
                login_path: /security/login
                success_handler: keobi_security.handler.authentication
                failure_handler: keobi_security.handler.authentication
                default_target_path: /
                target_path_parameter: _target_path
            logout:
                path:   /security/logout
                target: /security/login
                handlers: [keobi_security.handler.authentication]
            switch_user: { role: ROLE_ADMIN }

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, roles: ROLE_ADMIN } 
```

这是我的*ApiListener.php*文件：

```
<?php
namespace Keobi\SecurityBundle\Listener;

use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Security\Http\Firewall\ListenerInterface;
use Symfony\Component\Security\Core\Exception\AuthenticationException;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Component\Security\Core\Authentication\AuthenticationManagerInterface;
use Symfony\Component\Security\Core\Authentication\Token\TokenInterface;
use Keobi\SecurityBundle\Token\ApiToken;
use Symfony\Bridge\Monolog\Logger;

class ApiListener implements ListenerInterface
{
  protected $securityContext;
  protected $authenticationManager;
  protected $logger;
  protected $kernel;

  const AUTH_HEADER = 'x-keobi-authenticate';
  const AUTH_PATTERN = '/^Key="(?P<key>\w{40})", Hash="(?P<hash>\w+)", Created="(?P<created>\d+)"$/';
  const SIGN_HEADER = 'x-keobi-signature';

  public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager, Logger $logger, \AppKernel $kernel)
  {
    $this->securityContext = $securityContext;
    $this->authenticationManager = $authenticationManager;
    $this->logger = $logger;
    $this->kernel = $kernel;
  }

  public function handle(GetResponseEvent $event)
  {
    $request = $event->getRequest();
    $kernel = $event->getKernel();

    if ($this->kernel->isDebug() && $request->query->has('_apikey') && $request->query->has('_apisecret') && $request->query->has('_ipaddress'))
    {
      $this->logger->debug('Debug key and secret used.');
      $token = new ApiToken();

      $created = time();
      $hash = hash('sha256', $request->query->get('_apikey') . $request->query->get('_apisecret') . strval($created));

      $token->key = $request->query->get('_apikey');
      $token->created = $created;
      $token->hash = $hash;
      $token->ipaddress = $request->query->get('_ipaddress');
    }
    elseif ($request->headers->has(self::AUTH_HEADER))
    {
      if (preg_match(self::AUTH_PATTERN, $request->headers->get(self::AUTH_HEADER), $matches))
      {
        $token = new ApiToken();

        $token->key = $matches['key'];
        $token->created = $matches['created'];
        $token->hash = $matches['hash'];
        $token->ipaddress = $request->getClientIp();
      }
    }

    if (isset($token))
    {
      $this->logger->debug($request->headers->get(self::AUTH_HEADER));

      try
      {
        $this->logger->debug(get_class($this->authenticationManager));
        $returnValue = $this->authenticationManager->authenticate($token);

        if ($returnValue instanceof TokenInterface)
          return $this->securityContext->setToken($returnValue);
        elseif ($returnValue instanceof Response)
          return $event->setResponse($returnValue);
      }
      catch (AuthenticationException $e)
      {
        $this->logger->err('Server failed to authenticate');
      }
    }

    # could not authenticate
    $response = new Response();
    $response->setStatusCode(403);
    $response->setContent('Could not be authenticated.');
    $event->setResponse($response);
  }
} 
```

由于我发布了侦听器，而侦听器是生成日志条目的原因，因此这些是尝试身份验证时发生的日志条目：

```
2012-07-07 21:47:17 [2fiespfh-4b5a19dd] app.DEBUG: Key="0123456789012345678901234567890123456789", Hash="05707425769f01a82e2eee0b85018feeb6b96579f376f4632782b6b61c83b1fe", Created="1341655731"
2012-07-07 21:47:17 [2fiespfh-4b5a19dd] app.DEBUG: Symfony\Component\Security\Core\Authentication\AuthenticationProviderManager
2012-07-07 21:47:17 [2fiespfh-4b5a19dd] app.ERROR: Server failed to authenticate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T12:55:23.167

看起来这完全是*我*的错。它抛出的原因`ProviderNotFoundException`是因为我的`supports`方法`ApiProvider`正在检查错误的类。

# python - Python掷硬币

> ID：11380350
> 
> 赞同：2
> 
> 时间：2012-07-08T03:01:28.593
> 
> 标签：python, random

我是 Python 新手，对此我无法理解。我定义了以下函数：

```
def FlipCoins(num_flips):
    heads_rounds_won = 0
    for i in range(10000):
        heads = 0
        tails = 0
        for j in range(num_flips):
            dice = random.randint(0,1)
            if dice==1: heads += 1
            else: tails += 1
        if heads > tails: heads_rounds_won += 1
    return heads_rounds_won 
```

这是它应该做的（但显然不是）：掷硬币`num_flip`次数，计算正面和反面，看看正面是否多于反面。如果是，则增加`head_rounds_won`1。重复 10000 次。

我假设这`head_rounds_won`将接近 5000 (50%)。它对奇数作为输入执行此操作。例如，3、5 或 7 将产生大约 50%。然而，偶数会产生低得多的结果，更像是 34%。尤其是小数字，对于更高的偶数，例如 800，与 50% 的差异要小得多。

为什么会这样？任何输入都不应该产生大约 50% 的正面/反面吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T03:15:07.537

您刚刚获得了很多并列的回合

```
def FlipCoins(num_flips):
    heads_rounds_won = 0
    tails_rounds_won = 0
    tied_rounds = 0
    for i in range(10000):
        heads = 0
        tails = 0
        for j in range(num_flips):
            dice = random.randint(0,1)
            if dice==1: heads += 1
            else: tails += 1
        if heads > tails: heads_rounds_won += 1
        elif heads < tails: tails_rounds_won+= 1
        else: tied_rounds += 1
    return heads_rounds_won, tails_rounds_won, tied_rounds 
```

会返回类似的东西

```
>>> FlipCoins(2)
(2506, 2503, 4991) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:19:05.750

这很有趣，并且（最终）证明了 randint(0,1) 有 50/50 的概率选择 0 或 1。社区 wiki 因为它提供了丰富的信息，但不是对问题的直接回答。

```
s = [0, 0]
while True:
    an_int = randint(0, 1)
    s[an_int] += 1
    l = sum(s)
    print 'size: %d - %f%% zeros, %f%% ones' % (l, (100 * s[0]) / float(l), (100 * s[1]) / float(l)) 
```

# c# - Box API v2 创建名称中带有西里尔字母的文件夹

> ID：11380353
> 
> 赞同：0
> 
> 时间：2012-07-08T03:02:32.077
> 
> 标签：c#, box-api

我正在尝试使用新 API 创建文件夹。

如果文件夹名称包含西里尔字母，我会收到 HTTP 400 Bad Request。但是它适用于拉丁字母。

是已知问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T18:22:59.830

我在这里找到了正确的答案：[Detecting the character encoding of an HTTP POST request](https://stackoverflow.com/questions/708915/detecting-the-character-encoding-of-an-http-post-request)

> HTTP POST 的默认编码是 ISO-8859-1。

我唯一需要的是手动设置请求的编码。顺便说一句，这是工作代码：

```
public static Task<string> Post(string url, string data, string authToken) {
    var client = new WebClient { Encoding = Encoding.UTF8 };
    client.Headers.Add("Content-Type:application/x-www-form-urlencoded");
    client.Headers.Add(AuthHeader(authToken));
    return client.UploadStringTaskAsync(new Uri(url), "POST", data);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-08T17:27:56.727

通常，Box API 调用中涉及国际字符的复杂情况只需要对请求的编码进行细微调整。我猜您只需要使用 urlencode 对目标文件夹名称进行编码。

如果这不起作用，如果您发送示例请求或代码片段，我们可能会提供更多帮助。如果这样做，请将 api 密钥和身份验证令牌留给自己。

# c++ - 程序错误：用“%20”替换空格

> ID：11380355
> 
> 赞同：1
> 
> 时间：2012-07-08T03:02:51.333
> 
> 标签：c++

下面是我为用“%20”替换空格而编译的程序，但是当我运行它时，输出窗口显示空白并显示一条消息“arrays5.exe 发生了问题”

```
#include <iostream>
#include<cstring>

using namespace std;

void method(char str[], int len)               //replaces spaces with "%20"
{

    int spaces, newlen,i;

    for (i=0;i<len;i++)
        if(str[i]==' ') spaces++;
    newlen=len+spaces*2;
    str[newlen]=0;
    for (i=len-1;i>=0;i--)
    {
        if(str[i]==' ')
        {
            str[newlen-1]='0';
            str[newlen-2]='2';
            str[newlen-3]='%';
            newlen=newlen-3;
        }
        else
        {
            str[newlen-1]=str[i];
            newlen=newlen-1;
        }
    }
}
int main()
{
    char str[20]="sa h ";
    method(str,5);
    cout <<str<<endl;
    return 0;
} 
```

请帮我找出错误。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T03:08:12.833

`spaces`在您增加它之前未初始化。

你应该给它一个初始的默认值。

未初始化的变量将具有规范未定义的值。如果幸运的话，这个值可能是 0，但这个值很可能是数据类型可能代表的值范围内的任何值。

`spaces`正确初始化后，您的程序将编译并运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T03:13:28.250

我不是在解决您的问题，而是提供更好的解决方案。如果您使用的是 C++，那么**您应该**使用 STL。你有很多类和方法可以为你完成所有工作。

您可以将 25 行长的方法重写为 4 行长的方法（包括示例）：

```
#include <iostream>
#include <string>

using namespace std;

std::string method(std::string str)
{
    size_t index;
    while((index = str.find(' ')) != std::string::npos)
        str = str.replace(index, 1, "%20");
    return str;
}
int main()
{
    std::string str("sa h ");
    str = method(str);
    cout <<str<<endl; // outputs sa%20h%20
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T03:09:56.390

我建议您使用 std::string，并使用 .replace 方法。您的代码不起作用的原因是因为您以一种奇怪的方式*覆盖*了输入字符串，所以我不知道您的预期输出是否正确，但是，您遇到的实际错误是您可能正在重写索引位置 -3、-2 和 -1。考虑第一个空间位于索引零的情况。

在 C++ 中，通常最好避免使用 char*，除非您有明确的理由这样做。作为一个好的风格问题（这有点主观），我建议你不要直接修改你的输入参数，而是返回结果。

即，您的方法原型应该是：

```
std::string method(std::string str) 
```

不再需要传递字符串的长度，因为 std::string 会处理这个问题。

# android - 处理Activity和Thread之间关系的常见做法是什么

> ID：11380357
> 
> 赞同：2
> 
> 时间：2012-07-08T03:03:11.217
> 
> 标签：android, multithreading, android-asynctask, orientation-changes, android-configchanges

我有以下情况

1.  我`Thread`从`Activity`.
2.  我按下软后退按钮。就这样，`Activity`被毁了。
3.  我再次启动相同的`Activity`。注意，之前启动`Thread`的仍在运行。

为了防止在前一个仍在运行时`Activity`启动另一个相同的，这就是我正在做的`Thread``Thread`

*   启动后`Thread`，我会将其存储到静态变量中。因此，下次当我尝试启动同一个线程时，我将通过静态变量检查前一个线程的活跃度。**这是一个好习惯吗？克服这个问题的最佳做法是什么？**

注意，用户线程持有对`Activity`启动它的引用。但是，`Activity`当用户按下软后退按钮时，可能会破坏。因此，当我再次启动新 Activity 时，`thread`并没有意识到这一点，它仍然指的是 old `Activity`。因此，当用户线程尝试访问 old 的任何成员时`Activity`，将发生崩溃，因为`Activity`已经被销毁。**克服这个问题的最佳做法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:19:42.730

克服这个问题的最好方法是使用 an `AsyncTask`。如果在`Activity`任务执行时 被销毁，则`AsyncTask`（及其`Thread`执行操作的底层）将继续执行直到`doInBackground()`完成。如果s`Activity`被调用，您将不会`null`因为这篇**[博](http://commonsware.com/blog/2010/09/10/asynctask-screen-rotation.html)**文中所述的原因`onPostExecute`而遇到任何s 。`NullPointerException`

如果您想在用户“退出”时立即取消任务，`Activity`您可以调用`mTask.cancel()`您`AsyncTask`的方法。`Activity``onDestroy`

如果您*不想*在用户“退出” 时立即取消任务`Activity`，那么您的长期操作听起来不像是特定于任何`Activity`实例的。在这种情况下，通常建议使用 a`Service`代替。

# jsf - 如何在开发 jsf 应用程序时设置默认主页

> ID：11380358
> 
> 赞同：0
> 
> 时间：2012-07-08T03:03:20.813
> 
> 标签：jsf

我正在开发一个 jsf 应用程序，并且我的应用程序已经在生产环境中。但是我想知道一些事情：如果我的域名是：“mydomain.com”并且在我的应用程序中主页是：“home.jsf”，我希望我的应用程序在我访问时直接显示主页： www.mydomain.com

但是现在发生的是让我的主页显示，我必须写： www.mydomain.com/home.jsf 。这在我看来非常乏味。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:54:26.880

只需在 web.xml 中提及欢迎文件，如下所示：

```
<welcome-file-list>
    <welcome-file>home.jsf</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:03:51.600

就 JSF 而言，添加一个简单的欢迎文件不会产生好的结果。除了 home.xhtml 文件，创建一个空的 home.jsf 文件。服务器不会运行空文件（home.jsf），它将继续运行 home.xhtml。然后在 web.xml 中声明欢迎文件。有关更多信息，请查看此答案[https://stackoverflow.com/a/4618142/839393](https://stackoverflow.com/a/4618142/839393)

# java - 有没有办法用java代码对你的电脑进行基准测试？

> ID：11380360
> 
> 赞同：3
> 
> 时间：2012-07-08T03:03:57.263
> 
> 标签：java, maven, jvm, benchmarking

我是 Java 开发人员，我的目标是了解哪台计算机最适合进行一些统计评估。我有 3 个不同操作系统的不同桌面（Windows 7、MacOS、Ubuntu）。基于 JVM 的程序似乎最适合这个基准测试。是否有一些 maven besed 包我可以依赖并在所有这些桌面上运行以获得 HDD/CPU/Memory 基准？

> 问题是关于提供 CPU/IO/内存基准的 java 库...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T03:21:59.837

没有任何意义，AFAIK。您提出“一些统计评估”的目的过于广泛，无法进行有意义的基准测试。

事实上，唯一有意义的方法是：

1.  选择您要使用的统计应用程序。
2.  选择一堆有**代表性**的问题；即通常是你将要做什么的问题......在质量和“大小”方面。
3.  使用您选择的应用程序对解决方案进行编码。
4.  运行解决方案，并测量所用时间。
5.  调整解决方案/应用程序并重复上一步，直到您对从应用程序中获得最佳性能感到满意为止。
6.  在候选机器上运行应用程序。
7.  比较所有机器上所有问题的时间。

* * *

我认为，除非您尝试在动力不足的机器上运行非常大的分析，否则您使用的操作系统不会有太大的不同。关键问题可能是使用足够快的机器和足够的内存（如果分析需要大量内存）、选择正确的应用程序、正确编码解决方案以及调整应用程序。操作系统的选择可能无关紧要……除非您将内存信封推得太紧。

* * *

> 我会不同意。如果您所说的是正确的，则没有像 SUperPI、3DMark 等这样的想法。唯一的问题是它是特定于操作系统的，所以我只能比较 2 个 Windows 笔记本电脑。性能可以通过写入/读取磁盘/内存等元素操作轻松衡量。算术运算。那是可能的计算机操作的实际宇宙。

很好。

如果你认为你可以找到一个有意义的基准来比较不同操作系统的应用程序级性能......去找一个。

如果您认为这样的基准测试将为您提供适用于运行 Java 统计分析工具的数字，请随意使用它。（提示：特定于操作系统的基准测试，如 SUperPI、3DMark 等，并不能很好地预测运行应用程序的性能。）

如果您认为 Java 应用程序性能仅与磁盘读/写、内存读/写和基本算术指令的速度有关……请继续相信这一点。

不幸的是，现实情况大不相同。

* * *

但我的猜测是，只要硬件由它决定，你选择什么操作系统并没有太大区别。

# c# - 如何以编程方式将pdf文件转换为文本文件？

> ID：11380363
> 
> 赞同：1
> 
> 时间：2012-07-08T03:04:25.500
> 
> 标签：c#, wpf, parsing, pdf

我需要加载一个 pdf 文件，然后以编程方式将其转换为文本文件，以便对其进行解析。

另一种可能性是执行文件（执行 Adob​​e Reader，以 pdf 文件作为参数），然后向其“发送密钥”以将文件另存为文本。

但是，我不希望那样做（打开文件），但如果这是唯一的解决方案。但是：甚至可以在 C#/WPF 中执行“发送密钥”之类的功能吗？

注意：我不想购买任何自定义组件，此外，我在这个“家庭”项目中使用 Visual Studio 2012 RC，所以我不知道第 3 方组件是否兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:21:21.123

如果您希望将此应用程序部署给其他用户，我倾向于使用众多可用的 PDF 库之一并通过代码处理 PDF，而不是尝试使用 Adob​​e Reader。如果您的用户没有安装 Adob​​e Reader，它将消除问题。

尝试从下面的链接开始，了解一些图书馆的想法。

[https://stackoverflow.com/questions/373926/lightweight-open-source-pdf-library-in-c](https://stackoverflow.com/questions/373926/lightweight-open-source-pdf-library-in-c)

[C# PDF 控件和库](https://stackoverflow.com/questions/2516262/c-sharp-pdf-control-library)

# ember.js - 为什么 Ember 路由器只允许导航到叶路由？

> ID：11380369
> 
> 赞同：6
> 
> 时间：2012-07-08T03:05:07.203
> 
> 标签：ember.js, ember-old-router

我最近使用 Ember 路由器注意到的一点是它只允许导航到叶路由——没有子路由的路由。

现在，除非我做错了事情，否则这似乎是设计中的错误/错误。

让我们以这样的例子为例：

我有一个项目集合，每个项目都有很多合作者，我想构建一个具有 3 列布局的 UI（类似于您的标准桌面电子邮件客户端），在左侧我有一个项目列表，单击时project 中间的列显示了一个协作者列表，单击协作者会将其详细信息加载到右侧列中。

现在有了我想要`/projects/1`在单击项目时导航到的路由，以及在`/projects/1/collaborators/23`单击协作者时要导航到的路由。

这是一个路由器，说明了嵌套路由的第一部分：

```
App.reopen(
  Router: Ember.Router.extend(
    enableLogging: true
    location: 'hash'

    root: Ember.Route.extend(
      index: Ember.Route.extend(
        route: '/'

        redirectsTo: 'projects'
      )

      projects: Ember.Route.extend(
        # This route is not routable because it is not a leaf route.
        route: '/projects'

        connectOutlets: (router) ->
          # List projects in left column
          router.get('applicationController').connectOutlet('projects', App.projects)

        show: Ember.Route.extend(
          # This route is routable because it is a leaf route.
          route: '/:project_id'

          connectOutlets: (router, project) ->
            # Render the project into the second column, which actually renders
            # a list of collaborators.
            router.get('projectsController').connectOutlet('project', project)
        )
      )
    )
  )
) 
```

正如您将看到的那样，Ember 不会调用 updateRoute（设置 URL），直到`root.projects.show`由于这条线[https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/routeable .js#L81](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/routable.js#L81)

有没有其他人做过这样的事情？有没有更好的方法来设计这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T06:57:29.217

我发现做到这一点的最好方法是拥有一个`root.projects.index`带有“/”路由的状态，仅此而已。这样每个页面都有它自己的特定状态。

```
projects: Ember.Route.extend(
  # This route is not routable because it is not a leaf route.
  route: '/projects'

  connectOutlets: (router) ->
    # List projects in left column
    router.get('applicationController').connectOutlet('projects', App.projects)

  index: Ember.Route.extend(
    route: "/"
  )

  show: Ember.Route.extend(
    # This route is routable because it is a leaf route.
    route: '/:project_id'

    connectOutlets: (router, project) ->
      # Render the project into the second column, which actually renders
      # a list of collaborators.
      router.get('projectsController').connectOutlet('project', project)
  )
) 
```

NB 话虽如此，我正在使用 3 列布局做类似的事情，并且将中间列和右列与上面的路线相匹配，并将共享布局中的左列添加到每个可能的中间视图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T09:04:12.507

I think this issue is resolved. I am using ember routes without an index and do not face any leaf state issues. I was browsing why we need an index at all and I landed up here. Is there any other reason for using the index state too?

# css - 导航栏列表宽度

> ID：11380370
> 
> 赞同：0
> 
> 时间：2012-07-08T03:05:31.507
> 
> 标签：css, drop-down-menu, navigation

我现在正在创建一个导航栏，我希望导航上主要元素的宽度是自动的，但子元素都是固定宽度。列表的制作方式是这样的：

```
 <li>Main Element
        <ul>
        <li> Sub Element </li>
        <li> Sub Element </li>
        <li> Sub Element </li>
        </ul>
    </li> 
```

这对每个主菜单项及其子菜单项重复。

我遇到的问题是我想让子元素的宽度为 100px，但主要元素等于文本大小加上左右两侧的 10px 填充。看来我不能在不改变两者的情况下改变一个，即使在尝试将它们分开之后也是如此。我还尝试在我的外部样式表中进行编辑`ul li`和样​​式。`li ul`预先感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:07:56.177

`ul li`影响`li`a 下任何级别的all `ul`。`ul > li`只影响作为`li`a 的直接子级的`ul`。它被称为子组合器：[http ://www.w3.org/TR/css3-selectors/#child-combinators](http://www.w3.org/TR/css3-selectors/#child-combinators)

如果要在不使用类的情况下实现它，则必须使用它（使用类实际上是 imo 更好的方法 - [http://www.jsfiddle.net/joplomacedo/xeWA4](http://www.jsfiddle.net/joplomacedo/xeWA4)）

诀窍是应用您想要应用在主菜单项下的样式`ul > li`，然后在`ul ul > li`. 这是一个小提琴 - [http://jsfiddle.net/joplomacedo/xeWA4/3/](http://jsfiddle.net/joplomacedo/xeWA4/3/)

**编辑：**
您实际上根本不需要使用子组合器。当我第一次阅读您的问题时，我想到了儿童组合器，我从未质疑过它们的用途。因此，`ul li`被覆盖`ul ul li`也可以完美地工作-并使其更简单。

# c++ - 如何在 C++ 中使用 FANN

> ID：11380371
> 
> 赞同：0
> 
> 时间：2012-07-08T03:05:47.653
> 
> 标签：c++, linux, makefile, fann

在这里，我阅读了有关 C/C++ 中人工神经网络的 FANN 的良好参考资料。实际上我正在使用 C++（在带有 g++ v4.6.1 的 Ubuntu 上）。用 C 编写的库具有 C++ 的包装器。但我不让它工作。甚至包含 xor_sample.cpp 的示例也有效。

我有一个 Makefile 有这样一行：

```
xor_sample:
    g++ -I $(FANNINCLUDE) xor_sample.cpp -o xor_sample 
```

作为`FANNINCLUDE`FANN/src/include 的路径，其中的标头是 (`floatfan.h`和`fann_cpp.h`)。

有人真的为 C++ 编译过它吗？我做错了什么？我的意图是使用头文件（不安装库和链接 - `lfann`）。这可能吗？

编辑：我得到这个错误

```
/tmp/ccIpH6p4.o: In function `FANN::training_data::destroy_train()':
xor_sample.cpp:(.text._ZN4FANN13training_data13destroy_trainEv[FANN::training_data::destroy_train()]+0x18): undefined reference to `fann_destroy_train'
/tmp/ccIpH6p4.o: In function `FANN::training_data::read_train_from_file(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
xor_sample.cpp:(.text._ZN4FANN13training_data20read_train_from_fileERKSs[FANN::training_data::read_train_from_file(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x20): undefined reference to `fann_read_train_from_file'
/tmp/ccIpH6p4.o: In function `FANN::training_data::save_train_to_fixed(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned int)':
xor_sample.cpp:(.text._ZN4FANN13training_data19save_train_to_fixedERKSsj[FANN::training_data::save_train_to_fixed(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, unsigned int)]+0x37): undefined reference to `fann_save_train_to_fixed'
/tmp/ccIpH6p4.o: In function `FANN::training_data::length_train_data()':
xor_sample.cpp:(.text._ZN4FANN13training_data17length_train_dataEv[FANN::training_data::length_train_data()]+0x1f): undefined reference to `fann_length_train_data'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::destroy()':
xor_sample.cpp:(.text._ZN4FANN10neural_net7destroyEv[FANN::neural_net::destroy()]+0x18): undefined reference to `fann_get_user_data'
xor_sample.cpp:(.text._ZN4FANN10neural_net7destroyEv[FANN::neural_net::destroy()]+0x39): undefined reference to `fann_destroy'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::create_standard_array(unsigned int, unsigned int const*)':
xor_sample.cpp:(.text._ZN4FANN10neural_net21create_standard_arrayEjPKj[FANN::neural_net::create_standard_array(unsigned int, unsigned int const*)]+0x1f): undefined reference to `fann_create_standard_array'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::run(float*)':
xor_sample.cpp:(.text._ZN4FANN10neural_net3runEPf[FANN::neural_net::run(float*)]+0x26): undefined reference to `fann_run'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::init_weights(FANN::training_data const&)':
xor_sample.cpp:(.text._ZN4FANN10neural_net12init_weightsERKNS_13training_dataE[FANN::neural_net::init_weights(FANN::training_data const&)]+0x2a): undefined reference to `fann_init_weights'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::save(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
xor_sample.cpp:(.text._ZN4FANN10neural_net4saveERKSs[FANN::neural_net::save(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x30): undefined reference to `fann_save'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::save_to_fixed(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
xor_sample.cpp:(.text._ZN4FANN10neural_net13save_to_fixedERKSs[FANN::neural_net::save_to_fixed(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)]+0x30): undefined reference to `fann_save_to_fixed'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::train_on_data(FANN::training_data const&, unsigned int, unsigned int, float)':
xor_sample.cpp:(.text._ZN4FANN10neural_net13train_on_dataERKNS_13training_dataEjjf[FANN::neural_net::train_on_data(FANN::training_data const&, unsigned int, unsigned int, float)]+0x3f): undefined reference to `fann_train_on_data'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::get_MSE()':
xor_sample.cpp:(.text._ZN4FANN10neural_net7get_MSEEv[FANN::neural_net::get_MSE()]+0x20): undefined reference to `fann_get_MSE'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_callback(int (*)(FANN::neural_net&, FANN::training_data&, unsigned int, unsigned int, float, unsigned int, void*), void*)':
xor_sample.cpp:(.text._ZN4FANN10neural_net12set_callbackEPFiRS0_RNS_13training_dataEjjfjPvES4_[FANN::neural_net::set_callback(int (*)(FANN::neural_net&, FANN::training_data&, unsigned int, unsigned int, float, unsigned int, void*), void*)]+0x1c): undefined reference to `fann_get_user_data'
xor_sample.cpp:(.text._ZN4FANN10neural_net12set_callbackEPFiRS0_RNS_13training_dataEjjfjPvES4_[FANN::neural_net::set_callback(int (*)(FANN::neural_net&, FANN::training_data&, unsigned int, unsigned int, float, unsigned int, void*), void*)]+0x81): undefined reference to `fann_set_user_data'
xor_sample.cpp:(.text._ZN4FANN10neural_net12set_callbackEPFiRS0_RNS_13training_dataEjjfjPvES4_[FANN::neural_net::set_callback(int (*)(FANN::neural_net&, FANN::training_data&, unsigned int, unsigned int, float, unsigned int, void*), void*)]+0x9c): undefined reference to `fann_set_callback'
xor_sample.cpp:(.text._ZN4FANN10neural_net12set_callbackEPFiRS0_RNS_13training_dataEjjfjPvES4_[FANN::neural_net::set_callback(int (*)(FANN::neural_net&, FANN::training_data&, unsigned int, unsigned int, float, unsigned int, void*), void*)]+0xb3): undefined reference to `fann_set_callback'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::print_parameters()':
xor_sample.cpp:(.text._ZN4FANN10neural_net16print_parametersEv[FANN::neural_net::print_parameters()]+0x18): undefined reference to `fann_print_parameters'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_learning_rate(float)':
xor_sample.cpp:(.text._ZN4FANN10neural_net17set_learning_rateEf[FANN::neural_net::set_learning_rate(float)]+0x1f): undefined reference to `fann_set_learning_rate'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_activation_function_hidden(FANN::activation_function_enum)':
xor_sample.cpp:(.text._ZN4FANN10neural_net30set_activation_function_hiddenENS_24activation_function_enumE[FANN::neural_net::set_activation_function_hidden(FANN::activation_function_enum)]+0x1f): undefined reference to `fann_set_activation_function_hidden'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_activation_function_output(FANN::activation_function_enum)':
xor_sample.cpp:(.text._ZN4FANN10neural_net30set_activation_function_outputENS_24activation_function_enumE[FANN::neural_net::set_activation_function_output(FANN::activation_function_enum)]+0x1f): undefined reference to `fann_set_activation_function_output'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_activation_steepness_hidden(float)':
xor_sample.cpp:(.text._ZN4FANN10neural_net31set_activation_steepness_hiddenEf[FANN::neural_net::set_activation_steepness_hidden(float)]+0x1f): undefined reference to `fann_set_activation_steepness_hidden'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::set_activation_steepness_output(float)':
xor_sample.cpp:(.text._ZN4FANN10neural_net31set_activation_steepness_outputEf[FANN::neural_net::set_activation_steepness_output(float)]+0x1f): undefined reference to `fann_set_activation_steepness_output'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::get_network_type()':
xor_sample.cpp:(.text._ZN4FANN10neural_net16get_network_typeEv[FANN::neural_net::get_network_type()]+0x1f): undefined reference to `fann_get_network_type'
/tmp/ccIpH6p4.o: In function `FANN::neural_net::internal_callback(fann*, fann_train_data*, unsigned int, unsigned int, float, unsigned int)':
xor_sample.cpp:(.text._ZN4FANN10neural_net17internal_callbackEP4fannP15fann_train_datajjfj[FANN::neural_net::internal_callback(fann*, fann_train_data*, unsigned int, unsigned int, float, unsigned int)]+0xe): undefined reference to `fann_get_user_data'
collect2: ld returned 1 exit status
make: *** [xor_sample] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T11:53:29.743

如果您只需要安装它们，它们已经在 ubuntu 存储库中

```
sudo apt-get install libfann1 libfann1-dev 
```

如果您仍想从源代码安装它，他们的页面上有一个指南 [http://leenissen.dk/fann/wp/help/installing-fann/](http://leenissen.dk/fann/wp/help/installing-fann/) 如果这不能让您更进一步，请尝试使用以下方法安装到其他位置： cmake -D CMAKE_INSTALL_PREFIX:PATH=/usr 。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-01T22:14:40.787

通过更正您的 makefile，您应该仍然能够在不安装 FANN 的情况下编译它

```
g++ -I $(FANNINCLUDE) xor_sample.cpp -o xor_sample -L $(FANNLIBS) -lfann 
```

当然你仍然需要编译LibFANN，并且“FANNLIBS”必须是libfann编译库的目录。

# vb.net - ADO.Net 同步服务过滤器

> ID：11380372
> 
> 赞同：1
> 
> 时间：2012-07-08T03:05:47.753
> 
> 标签：vb.net, ado.net, synchronization, sql-server-ce

我在 Visual Studio 2010 中有一个 VB.Net windows 应用程序，我想使用 ADO.Net 同步服务并且只同步每个表中的数据子集。包含所有数据的主数据库位于 SQL Server 2008 R2 中，LocalDataCache 使用 Compact SQL。我发现了几个示例，例如：http: [//msdn.microsoft.com/en-us/library/bb726003](http://msdn.microsoft.com/en-us/library/bb726003(v=sql.100).aspx#Y1947) (v=sql.100).aspx#Y1947 ，但它们非常令人困惑。

如果我在 SQL Server 中有一个表，其中包含多个用户的数据行，但我只想查看 1 个用户的数据，我只想同步这个用户的数据。表的主键是 GUID，我想将过滤条件设置为：UserID = 'A34D81B5-EF3F-4B57-B795-F7F2D3B9DBA0'

我已经看过这个并且无法让它为我工作： [同步框架：我可以只同步我的表的一个子集吗？](https://stackoverflow.com/questions/385796/sync-framework-can-i-sync-only-a-subset-of-my-tables)

我发现的所有示例似乎都使这种方式变得比看起来应该的更加困难。有没有人有一个简单的例子来说明如何使用这样的过滤器双向保持 SQL CE 同步？

我已经添加了这个项目：本地数据库缓存，如果我想将整个数据库同步到 Compact SQL，它会很好用，但我不想要所有的数据行。我想要所有的列，但想要过滤它保持同步的行。

我发现的所有代码片段都没有端到端的工作......它们都非常模糊，这对我来说是全新的。我以前从未使用过 Compact SQL。

谢谢！

# lua - 从字符串创建 Lua 函数

> ID：11380379
> 
> 赞同：4
> 
> 时间：2012-07-08T03:08:27.983
> 
> 标签：lua

我正在从 Lua 中的字符串创建函数（x）。我正在使用的代码是

```
function fcreate(fs)
 return assert(loadstring("return function (x) return " .. fs.." end"))()
end 
```

这适用于全局变量，例如

```
u=fcreate("math.sin(x)") 
```

做正确的事。

但是，它似乎不喜欢局部变量。所以

```
local c=1
u=fcreate("math.sin(x)+c") 
```

将不起作用，因为 c 是本地的。

这是可以修复的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-08T04:31:04.090

["loadstring does not compile with lexical scoping"](http://www.lua.org/pil/8.html)，所以不，它看不到`loadstring`调用之外的本地人。

* * *

> 这是可以修复的吗？

那要看。你为什么首先使用 loadstring ？Lua 支持闭包作为第一类值，所以我无法从你的例子中看出为什么你*需要*loadstring。

你的例子：

```
u = fcreate("math.sin(x)+c") 
```

无需`loadstring`或您的`fcreate`功能即可重写：

```
u = function(x) return math.sin(x)+c end 
```

这当然与以下内容相同：

```
function u(x) return math.sin(x) + c end 
```

我可以看到一个案例，`loadstring`如果您有想要编译成其他函数的用户可配置表达式，但您在本地`c`的案例表明情况并非如此。您是否正在尝试制作某种自制的 lamda 语法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:55:12.550

不能以任何合理的方式进行。有关*原因*的示例，请查看以下内容：

```
function makefunction(name)
    local a = 1
    local b = 2
    local c = 3
    -- ...
    return assert(loadstring("return " .. name))
end

local a = 4
local func = makefunction("a")
print(func()) 
```

如果这有效，打印什么？`1`还是`4`？它是否从加载函数的位置捕获变量，即使该函数不再存在？还是从它被调用的地方查找它？

第一个意味着该函数在其创建的任何地方都是词法范围的。在函数退出后能够访问变量意味着需要将变量动态提升为上值，这不是 Lua 目前可以做的事情。就像现在一样，Lua 可以在编译期间看到对局部变量的每次访问，因此它知道哪些变量要变成上值（在性能下降时）以及哪些要保留为局部变量。

第二个意味着`loadstring`'d 函数内部的变量访问与 Lua 中的所有其他访问完全不同：Lua 使用词法作用域，而不是动态作用域。这将是 Lua 中一个巨大的实现变化，而且是一个极其不一致的变化。

因此，两者都不支持。您*可以*控制动态加载函数的环境，`setfenv`在 Lua 5.1 中使用或在 Lua 5.2 中使用`env`参数`load(...)`，但这些都不允许您自动访问局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:09:08.213

如果您不需要改变局部变量，您可以做的是将这些值作为参数传递给生成的函数。您仍然需要手动指定要关闭的变量，但总比没有好。

例如，你可以建立你的闭包看起来像

```
return (function(a,b,c)
   return function(x) return print(a, x) end
end)(...) 
```

我们可以通过改变你的功能来做到这一点

```
function fcreate(variables, fs)

  local varnames = {}
  local varvalues = {}
  local nvars = 0
  for n,v in pairs(variables) do
    nvars = nvars + 1
    table.insert(varnames, n)
    table.insert(varvalues, v)
  end

  local chunk_str = (
     'return (function(' .. table.concat(varnames, ',') .. ') ' ..
         'return function(x) return ' .. fs .. ' end ' ..
      'end)(...)'
  )

  return assert( loadstring(chunk_str) )( unpack(varvalues, 1, nvars) )

end

local a = 1;
local f = fcreate({a=a}, 'x+a')
print(f(1), f(2)) 
```

# python - App Engine：模板中的子文件夹

> ID：11380380
> 
> 赞同：2
> 
> 时间：2012-07-08T03:08:55.437
> 
> 标签：python, google-app-engine, templates

我`template`用来分隔 HTML 和 Python 代码。我创建模板文件夹。在这个文件夹中，我创建了 index.html。这是我的代码：

```
template_dir = os.path.join(os.path.dirname(__file__),'templates')
jinja_environment = jinja2.Environment(autoescape=True, loader=jinja2.FileSystemLoader(template_dir))

def render(self, template, **params):
        t = jinja_environment.get_template(template)
        return t.render(params) 
```

并使用 render('index.html') ：成功，没问题。

但是当我创建子文件夹：模板/博客并在这个文件夹中，我创建了 blog.html。我将上面的模板从 更改`templates`为`templates/blog`。这是我的代码：

```
template_dir = os.path.join(os.path.dirname(__file__),'templates/blog')
jinja_environment = jinja2.Environment(autoescape=True, loader=jinja2.FileSystemLoader(template_dir)) 
```

但是，当我使用 render('blog.html') 时，我收到了错误：`TemplateNotFound: blog.html`。

请帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:42:40.723

您可以在 jinja2 环境中添加更多文件夹：

```
jinja_environment = jinja2.Environment(
  loader=jinja2.FileSystemLoader(['templates', 'templates\blog'])
) 
```

# php - 使用 Jquery 提交表单的多克隆选择菜单？

> ID：11380381
> 
> 赞同：0
> 
> 时间：2012-07-08T03:08:56.407
> 
> 标签：php, javascript, jquery

我试图制作一个简单的表单，它有一个带有克隆和删除按钮的选择菜单，一旦这些选择菜单中的任何一个发生更改，它就必须使用 .Ajax 调用发布表单。它的工作，但有一些问题 HTML

```
<form action="action.php" method="post" id="LangForm" >
<div id="fileds">
<select name="lang[]" id="lang" class="lang">
<option value="">Select</option>
<option value="arabic">Arabic</option>
<option value="english">english</option>
</select>
</div>
</form>
<button class="clone">Clone</button> 
<button class="remove">Remove</button>
<div id="content"></div> 
```

JS

```
$(function(){
     var counter = 1;
    $(".clone").click(function(){
        $('#lang').clone().appendTo('#fileds');
        counter++ ;
    });
    $(".remove").click(function(){
        if (counter > 1) {
        $('#lang:last').remove();
        counter-- ;
        }       
    });
    $('.lang').change(function(){ 
    $.ajax({type:'POST', 
        url: 'action.php', 
        data:$('#LangForm').serialize(), 
        success: function(response) {
        $('#content').html(response);
    }
    });
    });
}); 
```

当我单击删除按钮时，它首先有 2 个问题，它首先删除原始选择菜单，然后删除克隆的菜单并保留最后一个克隆的菜单我需要先删除克隆的菜单并保留原始菜单

仅当原始菜单更改时才发布第二个提交表单我需要的是在任何菜单更改原始或克隆时提交表单。下面是来自操作 PHP 页面的 PHP 代码，它只是为了显示结果 PHP

```
<?php
print_r ($_POST['lang']);
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:33:12.520

HTML：

```
<form action="action.php" method="post" id="LangForm" >
<div id="fileds">
    <select name="lang[]" class="lang">
        <option value="">Select</option>
        <option value="arabic">Arabic</option>
        <option value="english">english</option>
    </select>
</div>
</form>
<button class="clone">Clone</button> 
<button class="remove">Remove</button>
<div id="content"></div>​ 
```

注意：该字段的 ID 已被删除。

JS：

```
$(function(){

    $(".clone").click(function(){
        // clone(true) will clone the element with event handlers intact. 
        $('.lang').last().clone(true).appendTo('#fileds');
    });

    $(".remove").click(function(){
        var selects = $('.lang');
        if (selects.length > 1) {
            selects.last().remove()
        }
    });
    $('.lang').change(function(e){
        // console.log(e)
        $.ajax({type:'POST', 
                url: 'action.php', 
                data:$('#LangForm').serialize(), 
                success: function(response) {
                $('#content').html(response);
            }
        });
    });
});​ 
```

演示：

[http://jsfiddle.net/kFB5j/1/](http://jsfiddle.net/kFB5j/1/)

# ruby-on-rails - 如何获得可标记工作的行为

> ID：11380384
> 
> 赞同：0
> 
> 时间：2012-07-08T03:10:08.217
> 
> 标签：ruby-on-rails, acts-as-taggable-on

我是 ruby​​ on rails（和编程）的新手，这可能是一个非常愚蠢的问题。我正在使用 Rails 3.2 并尝试使用acts_as_taggable_on 在文章上生成标签，并将这些标签显示在文章索引上并将页面显示为可点击的链接。

我在文章显示和索引页面上都有可点击的标签，但链接只是返回到索引页面并且不根据标签名称进行排序。我已经在互联网上搜索并从各种来源拼凑了下面的代码，但我显然遗漏了一些东西。

非常感谢任何帮助，因为我已经用尽了我看似有限的知识！谢谢。

这是我所拥有的：

```
class ArticlesController < ApplicationController
    def tagged
        @articles = Article.all(:order => 'created_at DESC')
        @tags = Article.tag_counts_on(:tags)
        @tagged_articles = Article.tagged_with(params[:tags])  
        respond_to do |format|
          format.html # index.html.erb
          format.json { render :json => @articles }
        end 
      end

     def index
        @articles = Article.paginate :page => params[:page], :per_page => 3    
        @tags = Article.tag_counts_on(:tags)
        respond_to do |format|
          format.html # index.html.erb
          format.json { render json: @articles }
        end
      end

module ArticlesHelper
  include ActsAsTaggableOn::TagsHelper
end

class Article < ActiveRecord::Base
  acts_as_ordered_taggable
  acts_as_ordered_taggable_on :tags, :location, :about 
  attr_accessible :tag_list
  scope :by_join_date, order("created_at DESC")
end

article/index.html.erb
<% tag_cloud(@tags, %w(tag1 tag2 tag3 tag4)) do |tag| %>
<%= link_to tag.name, articles_path(:id => tag.name) %>
<% end %>

article/show.html.erb
<%= raw @article.tags.map { |tag| link_to tag.name, articles_path(:tag_id => tag) }.join(" | ") %> 
```

routes.rb 文件片段

```
 authenticated :user do
    root :to => 'home#index'
  end

  devise_for :users
    resources :users, :only => [:show, :index]

  resources :images
  resources :articles 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:14:55.253

您可以从终端运行“rake routes”以查看所有路径。在这里，您的标签指向articles_path，您将在articles 控制器中看到指向index 操作的路由（“articles#index”）

您可以在您的 routes.rb 文件中创建另一条路线，例如：

```
match 'articles/tags' => 'articles#tagged', :as => :tagged 
```

如果您希望它优先，请将其放在路由文件中的其他文件之上，并记住您始终可以在终端中运行“rake routes”以查看路由的解释方式。

请参阅[http://guides.rubyonrails.org/routing.html#naming-routes](http://guides.rubyonrails.org/routing.html#naming-routes)了解更多信息（也许阅读全文）

另一个（可能更好）选项是使用参数将您想要的功能组合到索引操作中，例如.../articles?tagged=true。然后，您可以使用逻辑在基于 params[:tagged] 的索引控制器中定义 @articles 变量。一个简单的例子可能是

```
 def index
    if params[:tagged]
      @articles = Article.all(:order => 'created_at DESC')
    else
      Article.paginate :page => params[:page], :per_page => 3
    end

    @tags = Article.tag_counts_on(:tags)
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @articles }
    end
  end 
```

这被称为 DRYing up your code (for Don't Repeat Yourself)；它将节省您在文章#tagged 操作中重复代码的需要，这将使您更容易理解和维护您的代码库。

希望有帮助。

# objective-c - 在 OS X 的停靠栏上下文菜单中显示图标？

> ID：11380387
> 
> 赞同：6
> 
> 时间：2012-07-08T03:11:32.457
> 
> 标签：objective-c, macos, cocoa

我的问题很简单：

`- (NSMenu*) applicationDockMenu: (id) sender;`要为 Dock 上的应用程序图标使用自定义菜单，`NSApplicationDelegate`必须返回 Dock 将显示的菜单。

使用`setImage`on a `NSMenuItem`，您通常可以将图标添加到菜单中。它们显示在普通菜单上，但不在应用程序停靠图标的上下文菜单中。

那么 Apple 如何管理 QuickTime、XCode、Preview 以在其停靠上下文菜单中可访问的最近打开文件列表中显示图标？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:14:00.280

最近的文件列表实际上是标准 Dock 图标菜单的一部分。要在您的应用程序中使用它，您应该构建一个`NSDocument`基于 - 的应用程序。通过使用`NSDocument`，您将免费获得最近的文件菜单/行为。

如果您的应用程序不能基于`NSDocument`，您可以指示 Cocoa 维护基于 URL 的最近文档列表：

```
NSDocumentController *docController = [NSDocumentController sharedDocumentController];
[docController noteNewRecentDocumentURL:locationOfMyRecentFile1];
[docController noteNewRecentDocumentURL:locationOfMyRecentFile2];
[docController noteNewRecentDocumentURL:locationOfMyRecentFile3]; 
```

请注意，目前，`-noteNewRecentDocumentURL:`仅支持`file://`URL（您可以从带有 . 的路径创建`+[NSURL fileURLWithPath:]`。）将来，它的行为可能会更改为允许使用其他方案的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:12:38.957

这是我的理解，部分是推测性的，与实现细节有关：

Dock 在单独的进程中运行，您不能将任意`NSImage`琐碎的东西从您的应用程序跨进程边界传递到 Dock。只有两种图像可以正确传递：标准系统图标和资源包中的图标。但我认为`NSImage`这两种方法都没有必要的咒语。

[所以你将不得不使用碳。](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/tasks/docktasks.html#//apple_ref/doc/uid/TP30000986-CH5-TPXREF103)具体来说，您需要使用`SetMenuItemIconHandle`with `kMenuSystemIconSelectorType`（涵盖 Carbon `IconRef`s，通过 获得`GetIconRef`）或`kMenuIconResourceType`( `CFString`s 引用`.icns`应用程序包的 Resources 文件夹中的文件）。

相关标题是`<HIToolbox/MacApplication.h>`(for `GetApplicationDockTileMenu`)、`<HIToolbox/Menus.h>`(for `SetMenuItemIconHandle`) 和`<HIServices/Icons.h>`, (for `GetIconRef`，如果您使用系统图标)。

未经测试，但它应该看起来像这样：

```
#include <Carbon/Carbon.h>

SetMenuItemIconHandle(
    GetApplicationDockTileMenu(),
    [dockMenu indexOfItem:dockMenuItem],
    kMenuIconResourceType,
    (Handle) CFSTR("icon.icns")
); 
```

可能没有这么简单；其中一些可能只是 32 位的。

# java - 如何在 perl 中编写一个 cgi 脚本，该脚本接受来自 Java 小程序中的 urlconnection 的输出（图像文件）并将其写入服务器？

> ID：11380388
> 
> 赞同：2
> 
> 时间：2012-07-08T03:11:36.343
> 
> 标签：java, image, perl, cgi

我为创建图像文件的网页创建了一个 Java 小程序。我希望用户能够运行小程序并创建独特的图像，单击一个按钮，并将他们创建的图像保存到 Web 服务器。

我想在我的系统而不是网页上运行小程序并将文件保存到本地磁盘然后更改一个很少有东西可以写入 URLConnection 而不是本地磁盘（尽管我们也会看到它是如何工作的）。

我现在正在尝试在 perl 中编写一个 cgi 脚本，该脚本从 URLConnection 获取图像输出并将图像写入我的 Web 服务器上的文件（注意：我是 perl 的新手）。我发现了很多例子，说明如何使用来自小程序的简单文本然后将其写入文本文件，但我想知道如何将相同的概念应用于图像。特别是，我如何阅读图像？我已经看到使用 read(STDIN, $some_variable) 读取文本输入——同样的事情对图像有用吗？同样，如何编写图像文件？我使用什么功能？

谢谢你的帮助。我知道我对这一切都很天真。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T09:00:33.577

[如果您使用CGI 模块](http://search.cpan.org/~markstos/CGI.pm-3.59/lib/CGI.pm)（请参阅“处理文件上传字段”部分），服务器端没有问题，它可以帮助您。并且调整您的小程序以发送文件很重要，就好像您使用带有输入类型文件的 HTML 表单一样（因此您需要在 HTTP 协议中使用 POST 动词，并正确编码请求）。[此链接](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)可能会有所帮助。

# android - 如何在应用程序中存储来自 Android Camera onPictureTaken 方法的字节 [] 以供以后使用

> ID：11380389
> 
> 赞同：0
> 
> 时间：2012-07-08T03:11:59.497
> 
> 标签：android, image, camera

我正在编写一个更大的 Android 应用程序，并在应用程序中使用相机。我想要用相机做的就是让用户拍照，然后启动一个新的活动来显示该图像并允许用户决定是否要保留该图像。我很难弄清楚如何简单地存储 onPictureTaken 方法中的 byte[] 数据，以便我可以在下一个活动中将其显示给用户。我尝试了许多不同的路线，但都没有奏效。我尝试的最后一件事是创建一个扩展 Application 类的 globalsettings 类并在其中创建一个 byte[] 字段以存储来自相机的 byte[] 以便我可以在另一个活动中使用它，但我的全局变量仍然不是设置。我的 CameraActivity 代码如下所示：

```
public class CameraActivity extends Activity
{
    CameraPreview Preview;
    Intent intent;
    byte[] image;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cameralayout);
        Preview = new CameraPreview(this);
        ((FrameLayout)findViewById(R.id.uxfmlayPreview)).addView(Preview);
        intent = new Intent(this, PostCaptureActivity.class);
    }

    public void uxbtnCaptureSnap_Click(View v)
    {
        Preview.DeviceCamera.setPreviewCallback(null);
        Preview.DeviceCamera.takePicture(shutterCallback, rawCallback,   jpegCallback);
        startActivity(intent);
        finish();
    }

    public void uxbtnCaptureExit_Click(View v)
    {
        Intent i = new Intent(this, ExploreMenuActivity.class);
        setResult(RESULT_OK);
        startActivity(i);
        finish();
    }

    ShutterCallback shutterCallback = new ShutterCallback()
    {
    public void onShutter() {}
    };

    PictureCallback rawCallback = new PictureCallback() 
    {
    public void onPictureTaken(byte[] data, Camera camera) {}
    };

    PictureCallback jpegCallback = new PictureCallback() 
    {
        public void onPictureTaken(byte[] data, Camera camera)
        {
            ((GlobalSettings)getApplication()).setGlobalImage(data);
            camera.release();
            camera = null;

        }
    };
} 
```

这是我的 PostCaptureActivity onCreate() 方法中的代码，我尝试将图像转换并设置为图像视图的源：

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.postcapturelayout);
    SnapShot = ((ImageView)findViewById(R.id.uximgSnapshot));
    if(((GlobalSettings)this.getApplication()).getGlobalImage() != null)
    {
        Bitmap b = BitmapFactory.decodeByteArray(((GlobalSettings)this.getApplication()).getGlobalImage(), 0, ((GlobalSettings)this.getApplication()).getGlobalImage().length);
        SnapShot.setImageBitmap(b);
    }
    else
    {
        Toast.makeText(this, "Oops! Picture cannot be saved", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:58:04.637

使用 Intent 怎么样：

```
intent = new Intent(this, PostCaptureActivity.class);
intent.putExtra("image", data);
startActivity(intent);
finish(); 
```

把它放在`onPictureTaken`方法里面。

# javascript - jQuery中的focus方法不起作用

> ID：11380392
> 
> 赞同：6
> 
> 时间：2012-07-08T03:12:59.123
> 
> 标签：javascript, jquery

以下代码旨在检查是否在模糊字段中输入了 4 个数字。如果不是，则删除字段值，并聚焦该字段。删除工作正常，但对 focus() 的调用不起作用。

```
$('input.dateValue').live('blur',function(event){
  if (!(/(\d){4}$/.test($(this).attr('value')))) $(this).attr('value','').focus();
}); 
```

为什么对 focus() 的调用不聚焦该字段？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-08T03:31:14.957

由于`blur`事件在实际失去焦点之前触发，因此您不能`.focus()`立即使用。您必须将其向下推入堆栈，以便在`input`失去焦点后执行。把你`.focus()`的计时器（不需要延迟）：

```
$('input.dateValue').on('blur', function(event)
{
    if ( ! /(\d){4}$/.test(this.value) )
    {
        var $this = $(this).val('');

        setTimeout(function (){
            $this.focus();
        }, 0);
    };
});​ 
```

这是小提琴：http: [//jsfiddle.net/TdfFs/](http://jsfiddle.net/TdfFs/)

* * *

**更新：**为了证明这在 Chrome*中确实有效*，我做了另一个小提琴：http: [//jsfiddle.net/TdfFs/1/](http://jsfiddle.net/TdfFs/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T03:17:58.357

**演示** [http://jsfiddle.net/dsaSX/3/](http://jsfiddle.net/dsaSX/3/)

尝试使用`this.value`而不是`$(this).attr(...)`

休息希望这有助于事业，`:)`

哦，`.on`如果您使用的是 Jquery 1.7 及更高版本，我已经使用了事件。

阅读本文：[jQuery .val() 和 .attr('value') 有什么区别？](https://stackoverflow.com/questions/4837133/whats-the-difference-bewteen-jquery-val-and-attrvalue)

**在这里阅读** [http://forum.jquery.com/topic/jquery-focus-after-blur](http://forum.jquery.com/topic/jquery-focus-after-blur)

另一个**带有 SetTimeOut的***已知论坛解决方案* [http://forum.jquery.com/topic/focus-inside-a-blur-handler](http://forum.jquery.com/topic/focus-inside-a-blur-handler)见下面的帖子

 ****代码**

```
$('input.dateValue').on('blur', function(event) {

    if (!(/(\d){4}$/.test(this.value))) {

        $(this).val('').focus();
    };
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T03:29:33.543

而不是模糊使用focusout

[http://jsfiddle.net/fedmich/aKY9f/](http://jsfiddle.net/fedmich/aKY9f/)

* * *

**尖端：**

缩进你的代码

而不是 attr，值使用 $.val('')

在使用 IF() 时，请使用括号{}

写得更干净，尽可能简单，这样你以后就不会感到困惑。

**快乐编码:)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T12:02:50.347

小细节，

大多数时候我读到这样的问题。这通常是因为事件不正确。在要求系统将焦点设置在某事上之前，请确保您的页面已得到处理。

这是一个例子，其中***事件 pageshow 比 pagebeforeshow 更好***

**不像这样工作**

```
/**
 *** a hook to handle list drawing. DOES NOT WORK**
 */
$(document).delegate('#dropdownPopupWindow', "pagebeforeshow", function() {
    console.log(UIPopup.TAG+"pagebeforeshow on popup dropdownPopupWindow is setting focus on field field_dropdown_label");
    $('#field_dropdown_label').focus();
}); 
```

**像这样工作**

```
/**
 *** a hook to handle list drawing.**
 */
$(document).delegate('#dropdownPopupWindow', "pageshow", function() {
    console.log(UIPopup.TAG+"pageshow on popup dropdownPopupWindow is setting focus on field field_dropdown_label");
    $('#field_dropdown_label').focus();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-31T14:48:03.827

如果您使用的是 Bootstrap 模态，这不起作用：

```
$('#modalID').modal('show');
$('#modalID #fieldID').focus(); 
```

因为它需要一些时间来绘制模态并且可以用于聚焦......我发现400ms的超时足够快，用户不会受到影响并且足够慢，它总是专注于元素。

```
$('#modalID').modal('show');
setTimeout(function(){  $('#modalID #fieldID').focus(); }, 400); 
```

实际上，使用可执行注释并没有什么坏处：

```
function wait_for_modal_to_be_drawn_then( fn )
{
  setTimeout( fn, 400 );
}

$('#modalID').modal('show');
wait_for_modal_to_draw_then( 
     function(){  $('#modalID #fieldID').focus(); } 
); 
```**

# javascript - 用 JavaScript 缩小 JavaScript？

> ID：11380394
> 
> 赞同：0
> 
> 时间：2012-07-08T03:15:06.337
> 
> 标签：javascript, optimization, local, minify

既然我听到人们抱怨 PHP 无法处理它，那么用 JavaScript 本身来缩小 JavaScript 怎么样？我想要一些我可以立即复制和粘贴并使用的东西——我的 JS 文件大约 17KB，我知道我可以轻松地将它减少到大约 15KB。

而且我希望能够在服务器上正确执行此操作。我不想每次更改脚本时都必须访问 jscompress.com 之类的网站。

同样，我想要这样的东西：

```
<script type="text/javascript" src="scripts.php?file_to_minify=scripts_template.js"></script> 
```

然后我会让 JS 在 PHP 文件上缩小它。

现在，我确实有第二个想法……这还能行吗？？？

感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:47:50.223

就个人而言，我希望有一个本地版本的站点，所有源/配置文件都受版本控制。然后，您可以有一个发布脚本来准备您的文件以供上传，包括使用命令行工具缩小您的 javascript。

这可确保您在犯错时不会丢失任何东西，也可以使您的网站的构建可重复。这应该是生产站点的要求，并且对于个人/爱好站点很有用（没有人喜欢丢失更改/破坏东西而无法回头）。

# html - 反正有没有在 HTML5、CSS3 和 Jquery 上执行这个动画？

> ID：11380400
> 
> 赞同：1
> 
> 时间：2012-07-08T03:16:08.777
> 
> 标签：html, css, slider, jquery-animate, fadeout

所以基本上我想要实现的是，

*   当人们点击第一张图片时，其余的会滑动和淡出，然后内容加载，
*   当人们关闭时，它将恢复为 4 个图像，
*   当人们点击第二张图片时；图像 1、3 和 4 将滑动并淡出，内容显示等等。

我尝试使用 Jquery，但结果仍然为零。

这是链接： [http ://homethai.com.au/testing/test.swf](http://homethai.com.au/testing/test.swf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T08:17:26.203

是的当然。

设置是：

1.  绝对将每个元素放置在正确的位置。
2.  创建一个名为的类`.leftOffscreen`，将 left 设置为 -100px，并将`.rightOffscreen`其设置为您想要的任何最大值。（一旦它开始工作，尽可能使用转换而不是左/右，因为它将在某些浏览器上进行硬件加速，因此性能更高）
3.  为每个图像添加 CSS 过渡。

算法：

1.  单击时，使用[.index()](http://api.jquery.com/index/)查找您的图像。
2.  使用[.each()](http://api.jquery.com/each/)遍历图像。如果它们的索引小于点击的索引，则添加类`leftOffscreen`，如果它们大于，则添加`rightOffscreen`。
3.  单击 x 时，从所有图像中删除这些类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T09:44:43.567

这（经过一些试验和错误）实际上主要通过 CSS 实现，纯 JavaScript 仅用于切换类名（当单击一个块和单击关闭链接时）。

如果`.block.active`在 CSS 中替换为，`.block:hover`以便每个块在悬停时展开，并且关闭链接（和样式）被删除，那么根本不需要 JS。

*   [演示](http://shaquin.tk/experiments/anim1.html)
*   [小提琴](http://jsfiddle.net/MyqFR/1/)
*   [不显示代码的小提琴，更不拥挤](http://jsfiddle.net/MyqFR/1/show/)

**HTML：**

```
<div class="block">
    <div class="closelink">X</div>
</div>
<div class="block">
    <div class="closelink">X</div>
</div>
<div class="block">
    <div class="closelink">X</div>
</div>
<div class="block">
    <div class="closelink">X</div>
</div> 
```

**CSS：**

```
body {
    text-align: center
}
.block {
    display: inline-block;
    position: relative;
    width: 60px;
    height: 60px;
    background: #08f;
    margin: 50px;
    cursor: pointer;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    transition: margin 1s;
    -moz-transition: margin 1s;
    -webkit-transition: margin 1s;
    -o-transition: margin 1s;
    -ms-transition: margin 1s;
    user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none
}
.block .closelink {
    position: absolute;
    width: 20px;
    height: 20px;
    right: -20px;
    top: -20px;
    visibility: hidden;
    font-size: 14px;
    font-family: Segoe UI, Tahoma, Arial, Verdana, sans-serif;
    background: #ccc;
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px
}
.block.active {
    margin-left: 200px;
    margin-right: 200px
}
.block.active .closelink {
    visibility: visible
} 
```

**JavaScript：**

```
window.addEventListener('load', init, false);
function init() {
    var blocks = document.getElementsByClassName('block');
    var closeLinks = document.getElementsByClassName('closelink');
    for(i = 0; i < blocks.length; i++) {
        blocks[i].addEventListener('click', blockClicked, false);
    }
    for(i = 0; i < closeLinks.length; i++) {
        closeLinks[i].addEventListener('click', closeLinkClicked, false);
    }
}
function blockClicked(e) {
    var blocks = document.getElementsByClassName('block');
    for(i = 0; i < blocks.length; i++) {
        blocks[i].className = 'block';
    }
    e.target.className = 'block active';
}
function closeLinkClicked(e) {
    e.stopPropagation();
    e.target.parentElement.className = 'block';
} 
```

# c# - 创建新的父类属性后出现 NullReferenceException

> ID：11380401
> 
> 赞同：0
> 
> 时间：2012-07-08T03:16:45.773
> 
> 标签：c#

我想这是 C# 中一个相当基本的问题。不过，我的头有点晕，我不确定正确的排序方法。

我有一个带有 get/set 属性的父类和一个子类。当使用**new**创建类的实例时，可以访问父类的属性，但不能访问子类。我记得在 C 编程中，您必须为此创建内存空间，但我不确定在 C# 中执行此操作的正确方法。

**家长班**

```
class Parent_class
{
    private int number;
    public int Number
    {
        get { return number; }
        set { number = value; }
    }
    private Child_class childclass;// = new Child_class();
    public Child_class Childclass
    {
        get { return childclass; }
        set { childclass = value; }
    }
} 
```

**儿童班**

```
class Child_class
{
    private int number;
    public int Number
    {
        get { return number; }
        set { number = value; }
    }
} 
```

**主要的**

```
 static void Main(string[] args)
    {
        Parent_class test = new Parent_class();
        test.Number = 3;            //<--Ok
        test.Childclass.Number = 4; //<--NullReferenceException
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:24:55.623

如果你没有做任何特别的事情，你不需要使用字段支持的 getter / setter——编译器可以为你创建。

要获取类的实例，您需要使用`new`. 由于看起来您希望`Parent_class`自动拥有子类的实例，因此您可以在`constructor`.

哦 - Number 工作正常的原因是它是一个`primitive`类型，而不是一个类。基元（int、float、bool、double、DateTime、TimeSpan 等等）不需要通过`new`.

**家长班**

```
public class Parent_class
{
    public Parent_class()
    {
      Childclass = new Child_class();
    }
    public int Number { get; set; }
    public Child_class Childclass { get; set; }
} 
```

**儿童班**

```
public class Child_class
{
    public int Number { get; set; }
} 
```

**主要的**

```
static void Main(string[] args)
{
    Parent_class test = new Parent_class();
    test.Number = 3;            //<--Ok
    test.Childclass.Number = 4;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:45:09.580

您还没有创建子类的实例。

您可以执行以下任一操作

1.  使用前初始化

    ```
    static void Main(string[] args)
    {
        Parent_class test = new Parent_class();
        test.Number = 3;            //<--Ok
        test.ChildClass = new Child_class(); 
        test.Childclass.Number = 4; //<--NullReferenceException
    } 
    ```

    2\. 在父ctor中初始化

    ```
     public Parent_class()
        {
        Childclass = new Child_class();
        } 
    ```

3\. 在声明时初始化 inline

```
 private Child_class childclass = new Child_class(); 
```

# iphone - iTunes Connect 询问我 SARN

> ID：11380402
> 
> 赞同：-1
> 
> 时间：2012-07-08T03:17:43.800
> 
> 标签：iphone, ios, itunes, app-store-connect, itunes-store

我要求 iAds 合同，然后 iTunes Connect 要求我选择国家：沙特阿拉伯，然后 iTunes Connect 要求我选择 SARN，那么 SARN 是什么？

![在此处输入图像描述](../Images/53500d87cf747036243a33f8fc7873e9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:21:09.557

查看您更新的屏幕截图，SARN 显然是某种银行信息。单击它为您提供的链接-首先尝试“查找您的银行”。如果这不起作用，请单击“联系我们”。他们试图做的是获取有关您在哪里汇款的信息:) 或者，您可以尝试输入您的帐户路由号码（RN 几乎可以肯定代表银行上下文中的路由号码！）。只需按照它给您的说明进行操作；如果输入您的路由号码不起作用，Apple 将能够为您提供客户支持 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:12:56.967

这是答案，它适用于我：

沙特国家商业银行 "البنك الاهلي" 的 SARN = 10

# javascript - HTML/JS - 检测 Android 软件版本（并切换 css 文件）

> ID：11380403
> 
> 赞同：3
> 
> 时间：2012-07-08T03:17:53.223
> 
> 标签：javascript, android, html, css

我正在使用 Phonegap 构建一个应用程序。android 2.3 及以下不支持css float，android 3.0 及以上支持。

我需要为每个不同的 CSS 文件。

有没有办法检测 Android SOFTWARE VERSION 并据此更改 css 文件？

我可以使用 JavaScript 或 HTML 来做到这一点吗？

我知道您可以使用 检测 IE `<!--[if IE]>`，但是否可以检测 android 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T08:24:58.297

您的技术没问题，但它是静态的，将来在提及操作系统类型和系统类型时可能会导致更多问题。最好检查一下标签是否被普遍支持。最好的方法是使用 JavaScript，如下所示：

```
if('float' in document.body.style) {
    // jQuery?
    $('#myAwesomeDiv').css('float', 'left')
} 
```

您还可以为其创建一个简短的函数来 TRUE/FALSE 它：

```
function propertyExist(property) {
    if(property in document.body.style) {
        return true;
    }
    else {
        return false;
    }
}

if (propertyExists('float')) {
        // Do nothing?
}
    else {
        // Change the style (use jQuery, jquery.com)
        $("link").attr("href","non_float.css");
        $("head").append("<link>");
    } 
```

# java - 如何使用 VK_UP 或 VK_DOWN 移动到上一个或下一个文本字段？

> ID：11380406
> 
> 赞同：0
> 
> 时间：2012-07-08T03:18:26.890
> 
> 标签：java, keyevent

我想使用 VK_UP 或 VK_DOWN 来移动焦点，这样它就可以转到上一个或下一个文本字段。

我怎样才能做到这一点 ？

我尝试使用它，但它没有用。

```
 private void passwordTFKeyTyped(java.awt.event.KeyEvent evt) {      
 char c = evt.getKeyChar();

    if (c == KeyEvent.VK_UP) {
        usernameTF.grabFocus();
    }
 } 
```

所以我尝试添加'System.out.println（c）'
并且给出的结果是空的（空并不意味着像“”或null这样的空字符串），它更像是UP Key不起作用。

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T08:14:19.703

# 解决方案思路

## 建议挥杆图

取决于您使用的小部件库。如果您使用的是 Swing，则从文本字段中获取[InputMap ，并为其添加合适的绑定。](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputMap.html)最初我希望您可以复制 Tab 和 Shift-Tab 的绑定，但正如我在实验中发现的那样，它们不是`InputMap`各个组件的一部分。因此，您必须定义新键，并使用 将`ActionMap`它们映射到新操作。

## 粘贴代码有问题

您引用的代码不起作用，因为您应该使用[getKeyCode](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyCode%28%29)而不是[getKeyChar](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyChar%28%29)。前者对应于那些`VK_`常量，而后者将导致“正常”（即打印）键的字符，并且仅在`KEY_TYPED`事件期间。对于非打印键，该`KEY_TYPED`事件将永远不会生成，并且在所有其他事件期间，键字符将改为[CHAR_UNDEFINED](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#CHAR_UNDEFINED)。

# 例子

*这些示例是在以后的编辑中添加的。*

我对以下代码进行双重许可：您可以根据 CC-Wiki 的条款或 GPL 版本 3 或更高版本的条款使用它。

## 示例 1：Swing 输入和动作映射

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
class SO11380406a {
    static final Object focusNextKey = new Object();
    static final Object focusPrevKey = new Object();
    static final Action focusNextAction = new AbstractAction("focusNext") {
            public void actionPerformed(ActionEvent e) {
                ((Component)e.getSource()).transferFocus();
            }
        };
    static final Action focusPrevAction = new AbstractAction("focusPrev") {
            public void actionPerformed(ActionEvent e) {
                ((Component)e.getSource()).transferFocusBackward();
            }
        };
    static final KeyStroke down = KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0);
    static final KeyStroke up = KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0);
    private static void remap(JComponent c) {
        ActionMap am = new ActionMap();
        am.put(focusNextKey, focusNextAction);
        am.put(focusPrevKey, focusPrevAction);
        am.setParent(c.getActionMap());
        c.setActionMap(am);
        InputMap im = new InputMap();
        im.put(down, focusNextKey);
        im.put(up, focusPrevKey);
        im.setParent(c.getInputMap(JComponent.WHEN_FOCUSED));
        c.setInputMap(JComponent.WHEN_FOCUSED, im);
    }
    public static void main(String[] args) {
        JFrame frm = new JFrame("SO Question 11380406 Demo A");
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frm.getContentPane().setLayout(new GridLayout(2, 1));
        JTextField a = new JTextField(80), b = new JTextField(80);
        frm.getContentPane().add(a);
        frm.getContentPane().add(b);
        frm.pack();
        remap(a);
        remap(b);
        frm.setLocationByPlatform(true);
        frm.setVisible(true);
    }
} 
```

## 示例 2：AWT KeyListener

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
class SO11380406b {
    static final KeyListener arrowFocusListener = new KeyAdapter() {
            public void keyPressed(KeyEvent e) {
                if (e.getModifiers() == 0) {
                    if (e.getKeyCode() == KeyEvent.VK_DOWN)
                        e.getComponent().transferFocus();
                    if (e.getKeyCode() == KeyEvent.VK_UP)
                        e.getComponent().transferFocusBackward();
                }
            }
        };
    private static void remap(Component c) {
        c.addKeyListener(arrowFocusListener);
    }
    public static void main(String[] args) {
        JFrame frm = new JFrame("SO Question 11380406 Demo B");
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frm.getContentPane().setLayout(new GridLayout(2, 1));
        JTextField a = new JTextField(80), b = new JTextField(80);
        frm.getContentPane().add(a);
        frm.getContentPane().add(b);
        frm.pack();
        remap(a);
        remap(b);
        frm.setLocationByPlatform(true);
        frm.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:08:18.097

我不是专家，但我认为当用户专注于文本字段时，Java 不会那样听。也许像[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)这样的东西会满足您的需求？

# python - 如何使用python在匹配中匹配具有相同模式的多个实例

> ID：11380407
> 
> 赞同：1
> 
> 时间：2012-07-08T03:18:27.990
> 
> 标签：python, regex

以以下字符串为例，

```
str = '(Obsoletes RFC0011) (Updated by RFC0036, RFC0047) (Status: UNKNOWN)' 
```

我想提取这样的键值对：

matchobj['Obsoletes'] = 'RFC0011'

matchobj['更新者'] = ['RFC0036', 'RFC0047']

matchobj['状态'] = '未知'

我该怎么做？注意：不是所有的括号都是强制的，比如不能出现'(Obsoletes RFC0011)'

我的考虑是：首先，用括号对拆分整个字符串，然后从每个括号对中提取。为此，我必须使用 for 或 while 语句匹配括号，但我想知道 Python 中是否有一种方法可以在匹配中匹配具有相同模式的多个实例，它是，我可以从作为列表或数组

也许有更好的方法来实现这一点，我主要是 python 和正则表达式，如果有人给我一些建议？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:43:07.573

您可以获取`(...)`零件并通过大写单词将它们拆分以解决`Updated by`问题。

```
>>> s = '(Obsoletes RFC0011) (Updated by RFC0036, RFC0047) (Status: UNKNOWN)'
>>> data = [re.split(',?:?\s(?=[A-Z])',i) for i in re.findall(r'\((.*?)\)',s)]
>>> dic = {d[0]:d[1:] for d in data}
>>> dic
{'Status': ['UNKNOWN'],
 'Obsoletes': ['RFC0011'],
 'Updated by': ['RFC0036', 'RFC0047']} 
```

如果需要，您可以仅使用一个元素优化参数。

如果您的 Python 版本早于 2.7，请使用：

```
dict((d[0],d[1:]) for d in data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:52:14.923

```
from re import split

splitted = split(r'\)\s\(', "(Obsoletes RFC0011) (Updated by RFC0036, RFC0047) (Status: UNKNOWN)")

obsoletes, updatedby, unknown = [[j for j in split(r'[\s,]', i) if "RFC" in j] for i in splitted]

matchobj = {"Obsoletes" : obsoletes, "UpdatedBy" : updatedby, "Unknown" : unknown}

print matchobj 
```

# objective-c - 执行没有后退按钮的segue？

> ID：11380410
> 
> 赞同：3
> 
> 时间：2012-07-08T03:19:21.407
> 
> 标签：objective-c, ios, xcode, ios5

有没有办法从一个隐藏在导航控制器深处的视图控制器执行转场，而不是在调用转场时阻止“后退”按钮出现？这样做的理由是，在深入了解产品之后，我们宁愿用户不能回去把事情搞砸。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-08T03:24:14.547

在应该隐藏后退按钮的视图上，您​​所要做的就是在`viewDidLoad`.

```
self.navigationItem.hidesBackButton = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T03:24:27.720

在你的`-(void)viewWillAppear:(BOOL)animated`你可以打电话`[self.navigationItem setHidesBackButton:YES animated:NO];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-13T10:01:01.423

我个人更喜欢在源 UIViewController 而不是目标 UIViewController 中设置隐藏后退按钮。这允许您延迟每个 segue 以启用或禁用后退导航。在中`viewDidLoad`您将无法看到用于实例化 UIViewController 的 segue。

因此使用prepare for segue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([segue.identifier isEqualToString:@"segueToHideBackButtonIdentifier"]){
    [segue.destinationViewController.navigationItem setHidesBackButton:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-13T09:04:08.507

您必须将 segue 执行为“显示详细信息”而不仅仅是“显示”，新视图将替换当前视图

![在此处输入图像描述](../Images/7033d082fd9d6c80ed5533af88619ec6.png)

# python - Python unittest 传递参数

> ID：11380413
> 
> 赞同：92
> 
> 时间：2012-07-08T03:20:34.393
> 
> 标签：python, unit-testing

在 Python 中，如何将参数从命令行传递给 unittest 函数？

这是到目前为止的代码……我知道这是错误的。

```
class TestingClass(unittest.TestCase):

    def testEmails(self):
        assertEqual(email_from_argument, "my_email@example.com")

if __name__ == "__main__":
    unittest.main(argv=[sys.argv[1]])
    email_from_argument = sys.argv[1] 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-12-20T11:47:58.530

所以这里的医生说“你说那很痛？那就不要那样做！” 可能是对的。但是，如果您真的想要，这是将参数传递给单元测试测试的一种方法：

```
import sys
import unittest

class MyTest(unittest.TestCase):
    USERNAME = "jemima"
    PASSWORD = "password"

    def test_logins_or_something(self):
        print('username:', self.USERNAME)
        print('password:', self.PASSWORD)

if __name__ == "__main__":
    if len(sys.argv) > 1:
        MyTest.USERNAME = sys.argv.pop()
        MyTest.PASSWORD = sys.argv.pop()
    unittest.main() 
```

这将让你运行：

```
python mytests.py myusername mypassword 
```

您需要`argv.pop`s，因此您的命令行参数不会与 unittest 自己的参数混淆...

您可能想要研究的另一件事是使用环境变量：

```
import os
import unittest

class MyTest(unittest.TestCase):
    USERNAME = "jemima"
    PASSWORD = "password"

    def test_logins_or_something(self):
        print('username:', self.USERNAME)
        print('password:', self.PASSWORD)

if __name__ == "__main__":
    MyTest.USERNAME = os.environ.get('TEST_USERNAME', MyTest.USERNAME)
    MyTest.PASSWORD = os.environ.get('TEST_PASSWORD', MyTest.PASSWORD)
    unittest.main() 
```

这将让你运行：

```
TEST_USERNAME=ausername TEST_PASSWORD=apassword python mytests.py 
```

它的优点是你不会弄乱 unittest 自己的参数解析。缺点是它不会像在 Windows 上那样工作......

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-28T21:43:40.480

对于那些真正想要这样做的人的另一种方法，尽管你不应该有正确的评论：

```
import unittest

class MyTest(unittest.TestCase):

    def __init__(self, testName, extraArg):
        super(MyTest, self).__init__(testName)  # calling the super class init varies for different python versions.  This works for 2.7
        self.myExtraArg = extraArg

    def test_something(self):
        print(self.myExtraArg)

# call your test
suite = unittest.TestSuite()
suite.addTest(MyTest('test_something', extraArg))
unittest.TextTestRunner(verbosity=2).run(suite) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-10-13T14:26:22.560

即使测试大师说我们不应该这样做：我愿意。在某些情况下，使用参数来推动测试朝着正确的方向发展是很有意义的，例如：

*   我现在应该使用十几个相同的 USB 卡中的哪一个来进行这个测试？
*   我现在应该使用哪个服务器进行此测试？
*   我应该使用哪个 XXX？

对我来说，环境变量的使用对于这个目的来说已经足够好了，因为你不必编写专门的代码来传递你的参数；它由 Python 支持。它干净简单。

当然，我并不是提倡完全可参数化的测试。但我们必须务实，正如我所说，在某些情况下，您需要一两个参数。我们不应该滥用它:)

```
import os
import unittest

class MyTest(unittest.TestCase):
    def setUp(self):
        self.var1 = os.environ["VAR1"]
        self.var2 = os.environ["VAR2"]

    def test_01(self):
        print("var1: {}, var2: {}".format(self.var1, self.var2)) 
```

然后从命令行（在Linux上测试）

```
$ export VAR1=1
$ export VAR2=2
$ python -m unittest MyTest
var1: 1, var2: 2
.
----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-20T07:22:26.280

如果您想使用[steffens21 的方法](https://stackoverflow.com/a/23351698/5703449)，`unittest.TestLoader`您可以修改原始测试加载器（请参阅`unittest.py`）：

```
import unittest
from unittest import suite

class TestLoaderWithKwargs(unittest.TestLoader):
    """A test loader which allows to parse keyword arguments to the
       test case class."""
    def loadTestsFromTestCase(self, testCaseClass, **kwargs):
        """Return a suite of all tests cases contained in 
           testCaseClass."""
        if issubclass(testCaseClass, suite.TestSuite):
            raise TypeError("Test cases should not be derived from "\
                            "TestSuite. Maybe you meant to derive from"\ 
                            " TestCase?")
        testCaseNames = self.getTestCaseNames(testCaseClass)
        if not testCaseNames and hasattr(testCaseClass, 'runTest'):
            testCaseNames = ['runTest']

        # Modification here: parse keyword arguments to testCaseClass.
        test_cases = []
        for test_case_name in testCaseNames:
            test_cases.append(testCaseClass(test_case_name, **kwargs))
        loaded_suite = self.suiteClass(test_cases)

        return loaded_suite 

# call your test
loader = TestLoaderWithKwargs()
suite = loader.loadTestsFromTestCase(MyTest, extraArg=extraArg)
unittest.TextTestRunner(verbosity=2).run(suite) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T09:55:02.967

我也有同样的问题。我的解决方案是在您使用 argparse 或其他方式处理解析参数后，从 sys.argv 中删除参数：

```
sys.argv = sys.argv[:1] 
```

如果需要，可以从 main.parseArgs() 过滤单元测试参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-11T18:43:17.063

这是我的解决方案：

```
# your test class
class TestingClass(unittest.TestCase):

    # This will only run once for all the tests within this class
    @classmethod
    def setUpClass(cls) -> None:
       if len(sys.argv) > 1:
          cls.email = sys.argv[1]

    def testEmails(self):
        assertEqual(self.email, "my_email@example.com")

if __name__ == "__main__":
    unittest.main() 
```

你可以有一个这样的`runner.py`文件：

```
# your runner.py
loader = unittest.TestLoader()
tests = loader.discover('.') # note that this will find all your tests, you can also provide the name of the package e.g. `loader.discover('tests')
runner = unittest.TextTestRunner(verbose=3)
result = runner.run(tests 
```

使用上面的代码，您应该使用`runner.py my_email@example.com`.

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-07-08T08:51:28.460

[单元测试](http://en.wikipedia.org/wiki/Unit_testing)旨在测试非常基本的功能（应用程序的最低级别功能），以确保您的*应用程序构建块*正常工作。对于这究竟意味着什么，可能没有正式的定义，但是您应该考虑对*更大的功能*进行其他类型的测试——请参阅[集成测试](http://en.wikipedia.org/wiki/Integration_testing)。单元测试框架可能不适合此目的。

# python - Urllib 和 urllib2 返回“IOError: [Errno socket error] [Errno -2] Name or service not known” 但 Firefox 下载文件没有问题

> ID：11380416
> 
> 赞同：2
> 
> 时间：2012-07-08T03:21:40.763
> 
> 标签：python, download, urllib

我正在尝试从国家气象局下载 GRIB 数据（二进制天气预报数据）。我已经编写了 Python 代码来格式化 HTTP 字符串以获取今天的数据，提前 12 小时。

Python 代码返回 HTTP 字符串，然后尝试使用 urllib.urlopen 下载数据。现在，如果我将 HTTP 字符串粘贴到 Firefox 中，则会下载 GRIB 文件。如果我尝试使用 urllib.urlopen，我会得到以下信息：

```
Traceback (most recent call last):
File "/home/dantayaga/bovine_aerospace/dev/grib_get.py", line 67, in <module>
webf=urllib.urlopen(griburl)
File "/usr/lib/python2.7/urllib.py", line 86, in urlopen
return opener.open(url)
File "/usr/lib/python2.7/urllib.py", line 207, in open
return getattr(self, name)(url)
File "/usr/lib/python2.7/urllib.py", line 344, in open_http
h.endheaders(data)
File "/usr/lib/python2.7/httplib.py", line 954, in endheaders
self._send_output(message_body)
File "/usr/lib/python2.7/httplib.py", line 814, in _send_output
self.send(msg)
File "/usr/lib/python2.7/httplib.py", line 776, in send
self.connect()
File "/usr/lib/python2.7/httplib.py", line 757, in connect
self.timeout, self.source_address)
File "/usr/lib/python2.7/socket.py", line 553, in create_connection
for res in getaddrinfo(host, port, 0, SOCK_STREAM):
IOError: [Errno socket error] [Errno -2] Name or service not known 
```

这是我正在使用的 HTTP 字符串：

[http://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_hd.pl?file=gfs.t06z.mastergrb2f12&lev_1000_mb=on&lev_975_mb=on&lev_950_mb=on&lev_925_mb=on&lev_900_mb=on&lev_850_mb=on&lev_800_mb=on&lev_750_mb=on&lev_700_mb=on&lev_650_mb=on&lev_600_mb=on&lev_550_mb=上＆lev_500_mb = ON＆lev_450_mb = ON＆lev_400_mb = ON＆lev_350_mb = ON＆lev_300_mb = ON＆lev_250_mb = ON＆lev_200_mb = ON＆lev_150_mb = ON＆lev_100_mb = ON＆lev_70_mb = ON＆lev_30_mb = ON＆lev_20_mb = ON＆lev_10_mb = ON＆var_HGT = ON＆var_RH = ON＆var_TMP = ON＆var_UGRD = ON＆var_VGRD = ON＆var_VVEL = onleftlon = -90rightlon = 90toplat = 90bottomlat-90＆DIR =％ 2Fgfs.2012070706%2Fmaster](http://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_hd.pl?file=gfs.t06z.mastergrb2f12&lev_1000_mb=on&lev_975_mb=on&lev_950_mb=on&lev_925_mb=on&lev_900_mb=on&lev_850_mb=on&lev_800_mb=on&lev_750_mb=on&lev_700_mb=on&lev_650_mb=on&lev_600_mb=on&lev_550_mb=on&lev_500_mb=on&lev_450_mb=on&lev_400_mb=on&lev_350_mb=on&lev_300_mb=on&lev_250_mb=on&lev_200_mb=on&lev_150_mb=on&lev_100_mb=on&lev_70_mb=on&lev_30_mb=on&lev_20_mb=on&lev_10_mb=on&var_HGT=on&var_RH=on&var_TMP=on&var_UGRD=on&var_VGRD=on&var_VVEL=onleftlon=-90rightlon=90toplat=90bottomlat-90&dir=%2Fgfs.2012070706%2Fmaster)

如果您在 Firefox 中测试此字符串但它不起作用，请将“20120707”更改为今天的日期，将“06”更改为“00”，它应该可以工作。

我的问题很简单（我认为）：为什么这适用于 Firefox 而不是 urllib？

这是我用来生成 http 字符串然后尝试下载结果的代码：

```
#Get GRIB files

import urllib

forecast_time='06' #What time the forecast is (00, 06, 12, 18)
forecast_hours='12' #How many hours ahead to forecast (2 or 3 digits)
forecast_date='20120707' #What date the forecast is for yyyymmdd

top_lat=90 #Top of bounding box (North)
bottom_lat=-90 #Bottom of bounding box (South)
left_lon=-90 #Left of bounding box (West)
right_lon=90 #Right of bounding box (East)

griburl='http://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_hd.pl?'
griburl=griburl+'file=gfs.t'+str(forecast_time)+'z.mastergrb2f'
griburl=griburl+forecast_hours

#Select atmospheric levels

griburl=griburl+'&lev_1000_mb=on'  #1000 mb level
griburl=griburl+'&lev_975_mb=on'   #975 mb level
griburl=griburl+'&lev_950_mb=on'   #950 mb level
griburl=griburl+'&lev_925_mb=on'   #925 mb level
griburl=griburl+'&lev_900_mb=on'   #900 mb level
griburl=griburl+'&lev_850_mb=on'   #850 mb level
griburl=griburl+'&lev_800_mb=on'   #800 mb level
griburl=griburl+'&lev_750_mb=on'   #750 mb level
griburl=griburl+'&lev_700_mb=on'   #700 mb level
griburl=griburl+'&lev_650_mb=on'   #650 mb level
griburl=griburl+'&lev_600_mb=on'   #600 mb level
griburl=griburl+'&lev_550_mb=on'   #550 mb level
griburl=griburl+'&lev_500_mb=on'   #500 mb level
griburl=griburl+'&lev_450_mb=on'   #450 mb level
griburl=griburl+'&lev_400_mb=on'   #400 mb level
griburl=griburl+'&lev_350_mb=on'   #350 mb level
griburl=griburl+'&lev_300_mb=on'   #300 mb level
griburl=griburl+'&lev_250_mb=on'   #250 mb level
griburl=griburl+'&lev_200_mb=on'   #200 mb level
griburl=griburl+'&lev_150_mb=on'   #150 mb level
griburl=griburl+'&lev_100_mb=on'   #100 mb level
griburl=griburl+'&lev_70_mb=on'    #70 mb level
griburl=griburl+'&lev_30_mb=on'    #30 mb level
griburl=griburl+'&lev_20_mb=on'    #20 mb level
griburl=griburl+'&lev_10_mb=on'    #10 mb level

#Select variables

griburl=griburl+'&var_HGT=on'  #Height (geopotential m)
griburl=griburl+'&var_RH=on'  #Relative humidity (%)
griburl=griburl+'&var_TMP=on' #Temperature (K)
griburl=griburl+'&var_UGRD=on' #East-West component of wind (m/s)
griburl=griburl+'&var_VGRD=on' #North-South component of wind (m/s)
griburl=griburl+'&var_VVEL=on' #Vertical Windspeed (Pa/s)

#Select bounding box

griburl=griburl+'leftlon='+str(left_lon)
griburl=griburl+'rightlon='+str(right_lon)
griburl=griburl+'toplat='+str(top_lat)
griburl=griburl+'bottomlat'+str(bottom_lat)

#Select date and time

griburl=griburl+'&dir=%2Fgfs.'+forecast_date+forecast_time+'%2Fmaster'
print(griburl)
print('Downloading GRIB file for date '+forecast_date+' time ' +forecast_time + ',    forecasting '+forecast_hours+' hours ahead...')
webf=urllib.urlopen(griburl)
local_filename=forecast_date+'_'+forecast_time+'_'+forecast_hours+'.grib'
localf=open('//home//dantayaga//bovine_aerospace//grib//data//'+local_filename, 'wb')
localf.write(webf.read())
print('Requested grib data written to file '+local_filename) 
```

非常感谢任何帮助。是否存在 Firefox 捕获的格式错误或其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T06:28:43.580

试试这个：

```
import urllib2
import urllib

url = 'http://nomads.ncep.noaa.gov/cgi-bin/filter_gfs_hd.pl'

forecast_time = '06' #What time the forecast is (00, 06, 12, 18)
forecast_hours = '09' #How many hours ahead to forecast (2 or 3 digits)
forecast_date = '20120705' #What date the forecast is for yyyymmdd

get_parameters = {
    'subregion':'',
    'toplat':90, #Top of bounding box (North)
    'bottomlat':-90, #Bottom of bounding box (South)
    'leftlon':-90, #Left of bounding box (West)
    'rightlon':90, #Right of bounding box (East)
}

get_parameters['file'] = 'gfs.t' + forecast_time + 'z.mastergrb2f' + forecast_hours

on_variables = [
    'lev_1000_mb',
    'lev_975_mb',
    'lev_950_mb',
    'lev_925_mb',
    'lev_900_mb',
    'lev_850_mb',
    'lev_800_mb',
    'lev_750_mb',
    'lev_700_mb',
    'lev_650_mb',
    'lev_600_mb',
    'lev_550_mb',
    'lev_500_mb',
    'lev_450_mb',
    'lev_400_mb',
    'lev_350_mb',
    'lev_300_mb',
    'lev_250_mb',
    'lev_200_mb',
    'lev_150_mb',
    'lev_100_mb',
    'lev_70_mb',
    'lev_30_mb',
    'lev_20_mb',
    'lev_10_mb',

    'var_HGT',  #Height (geopotential m)
    'var_RH',  #Relative humidity (%)
    'var_TMP', #Temperature (K)
    'var_UGRD', #East-West component of wind (m/s)
    'var_VGRD', #North-South component of wind (m/s)
    'var_VVEL' #Vertical Windspeed (Pa/s)
]

get_parameters.update(dict((param, 'on') for param in on_variables))

#Select date and time
get_parameters['dir'] = '/gfs.' + forecast_date + forecast_time + '/master'

print('Downloading GRIB file for date '+forecast_date+' time ' +forecast_time + ',    forecasting '+forecast_hours+' hours ahead...')

req = urllib2.urlopen(url + '?' + urllib.urlencode(get_parameters), timeout = 300) # Theres bug in apache for non-used GET varaibles so we have to manually add them to the url ...
local_filename = forecast_date + '_' + forecast_time + '_' + forecast_hours + '.grib'
local_file = open('/home/dantayaga/bovine_aerospace/grib/data/' + local_filename, 'wb')

local_file.write(req.read())
local_file.close()

print('Requested grib data written to file ' + local_filename) 
```

我已经用另一个文件对其进行了测试，因为您在原始代码中拥有的文件不存在我得到：

> 数据文件不存在：/pub/data/nccf/com/gfs/prod/gfs.2012070706/master27/gfs.t06z.mastergrb2f12

尝试使用字典、列表、元组或其他复杂的数据结构来存储您的参数，这样您将能够更快地检测到细微的错误，并减少重复代码。

`urllib2.urlopen`有一个名为`data`thats 的可选参数用于传递参数，但不幸的是，在 apache 或 python 中都有一个错误，因为我不断得到`raise IncompleteRead(value)`

[httplib：不完整阅读](https://stackoverflow.com/questions/3670257/httplib-incomplete-read)
[http://bugs.python.org/issue14044](http://bugs.python.org/issue14044)

# java - 从restful java客户端获取JSON

> ID：11380421
> 
> 赞同：3
> 
> 时间：2012-07-08T03:23:52.167
> 
> 标签：java, json, rest, soa, webservice-client

我正在使用 REST (Jersey 1.8) 开发 Web 服务。目前我正在使用 XML 在 Java 客户端和服务器之间进行通信。

我需要将其更改为 JSON：我该怎么做？我有一堆从 NetBeans 自动生成的代码，不知道该做什么以及如何做。在测试服务时，它会显示 JSON 数据。我无法做的是用我的`main`方法处理它。 ![在此处输入图像描述](../Images/6eaf9e60b3f52e55f54211055f5b5d72.png)

这些是我遵循的教程

*   [http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices/RESTfulWebservices.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices/RESTfulWebservices.htm)
*   [http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices_Part2/RESTfulWebservicesPart2.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices_Part2/RESTfulWebservicesPart2.htm)
*   [http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices_Part3/RESTfulWebservicesPart3.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/RESTfulWebServices_Part3/RESTfulWebservicesPart3.htm)

我的 Java 客户端`main`方法：

```
public class SOATestClient {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        PersonJerseyClient client = new PersonJerseyClient();
        ClientResponse response = client.findAll_XML(ClientResponse.class);

        GenericType<List<Person>> genericType = new GenericType<List<Person>>() {
        };
// Returns an ArrayList of Players from the web service
        List<Person> data = new ArrayList<Person>();
        data = (response.getEntity(genericType));
        System.out.println("Retreiving and Displaying Players Details");
        for (Person person : data) {
            System.out.println("FirstName: " + person.getName());
            System.out.println("ID : " + person.getId());
            System.out.println(" Age : " + person.getAge());
        }
        client.close();
    }
} 
```

人新泽西州

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jerseyclients;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.UniformInterfaceException;
import com.sun.jersey.api.client.WebResource;

/**
 * Jersey REST client generated for REST resource:PersonFacadeREST
 * [entity.person]<br>
 *  USAGE:
 * <pre>
 *        PersonJerseyClient client = new PersonJerseyClient();
 *        Object response = client.XXX(...);
 *        // do whatever with response
 *        client.close();
 * </pre>
 *
 * @author rj45
 */
public class PersonJerseyClient {
    private WebResource webResource;
    private Client client;
    private static final String BASE_URI = "http://localhost:8080/SOATestService/resources";

    public PersonJerseyClient() {
        com.sun.jersey.api.client.config.ClientConfig config = new com.sun.jersey.api.client.config.DefaultClientConfig();
        client = Client.create(config);
        webResource = client.resource(BASE_URI).path("entity.person");
    }

    public void remove(String id) throws UniformInterfaceException {
        webResource.path(java.text.MessageFormat.format("{0}", new Object[]{id})).delete();
    }

    public String countREST() throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path("count");
        return resource.accept(javax.ws.rs.core.MediaType.TEXT_PLAIN).get(String.class);
    }

    public <T> T findAll_XML(Class<T> responseType) throws UniformInterfaceException {
        WebResource resource = webResource;
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_XML).get(responseType);
    }

    public <T> T findAll_JSON(Class<T> responseType) throws UniformInterfaceException {
        WebResource resource = webResource;
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get(responseType);
    }

    public void edit_XML(Object requestEntity) throws UniformInterfaceException {
        webResource.type(javax.ws.rs.core.MediaType.APPLICATION_XML).put(requestEntity);
    }

    public void edit_JSON(Object requestEntity) throws UniformInterfaceException {
        webResource.type(javax.ws.rs.core.MediaType.APPLICATION_JSON).put(requestEntity);
    }

    public void create_XML(Object requestEntity) throws UniformInterfaceException {
        webResource.type(javax.ws.rs.core.MediaType.APPLICATION_XML).post(requestEntity);
    }

    public void create_JSON(Object requestEntity) throws UniformInterfaceException {
        webResource.type(javax.ws.rs.core.MediaType.APPLICATION_JSON).post(requestEntity);
    }

    public <T> T findRange_XML(Class<T> responseType, String from, String to) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}/{1}", new Object[]{from, to}));
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_XML).get(responseType);
    }

    public <T> T findRange_JSON(Class<T> responseType, String from, String to) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}/{1}", new Object[]{from, to}));
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get(responseType);
    }

    public <T> T find_XML(Class<T> responseType, String id) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}", new Object[]{id}));
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_XML).get(responseType);
    }

    public <T> T find_JSON(Class<T> responseType, String id) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}", new Object[]{id}));
        return resource.accept(javax.ws.rs.core.MediaType.APPLICATION_JSON).get(responseType);
    }

    public void close() {
        client.destroy();
    }

} 
```

我尝试使用以下内容访问它，并以与 XML 相同的方式处理它，

```
ClientResponse response = client.findAll_JSON(ClientResponse.class); 
```

但它给了我

```
Exception in thread "main" javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException
 - with linked exception:
[com.sun.istack.internal.SAXParseException2; lineNumber: 0; columnNumber: 0; unexpected element (uri:"", local:"id"). Expected elements are <{}person>]
    at com.sun.jersey.core.provider.jaxb.AbstractListElementProvider.readFrom(AbstractListElementProvider.java:251)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:553)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:523)
    at soatestclient.SOATestClient.main(SOATestClient.java:33)
Caused by: javax.xml.bind.UnmarshalException 
```

如果您能在这件事上帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T06:45:59.100

我解决了同样的问题。如果您的例外是：意外元素（uri：“”，本地：“id”）............

不要忘记添加以下代码：

```
 DefaultClientConfig clientConfig = new DefaultClientConfig();
    clientConfig.getFeatures().put(JSONConfiguration.FEATURE_POJO_MAPPING, Boolean.TRUE);
    Client client = Client.create(clientConfig); 
```

然后是代码：

```
return resource.type(MediaType.APPLICATION_JSON_TYPE).get(new GenericType<List<MyClass>>(){}); 
```

会好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T03:37:52.957

1) 生成此错误的人显然在期待 XML 输入。不是 JSON。您需要尽快更改：

```
 javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException
 com.sun.istack.internal.SAXParseException2;
 <= javax.xml.bind and SAXParse are both XML-only: JSON not invited 
```

2) 屏幕截图中的内容（大概是泽西岛？）绝对没问题。

3）我没有遵循整个教程，你没有提供足够的信息来告诉你误入歧途。

建议：

只需回顾您在教程中的步骤，并*确保*您在每一步都选择“JSON”（*不是*XML，*也不是 SOAP）。*

=========== 附录 ===========

好的 - 感谢更新。这是我们所处的位置：

1）这是问题：

```
Exception in thread "main" javax.ws.rs.WebApplicationException: javax.xml.bind.UnmarshalException
 - with linked exception:
[com.sun.istack.internal.SAXParseException2; lineNumber: 0; columnNumber: 0; unexpected element (uri:"", local:"id"). Expected elements are <{}person>]
    at com.sun.jersey.core.provider.jaxb.AbstractListElementProvider.readFrom(AbstractListElementProvider.java:251)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:553)
    at com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:523)
    at soatestclient.SOATestClient.main(SOATestClient.java:33)
Caused by: javax.xml.bind.UnmarshalException 
```

2）你说这个堆栈回溯来自客户端。

所以你的服务器是 100% OK 的——你*唯一*需要做的就是修复你的客户端。凉爽的 ：）

3) 回溯显示客户端期待 XML ......但获取的是 JSON。

因此，您需要解决的*唯一问题就是告诉您的客户“嘿：读取 JSON，而不是 XML”。*再次 - 酷:)

4）你是怎么做到的？

好吧，对于初学者来说，你需要摆脱这条线（如果你还没有的话）：

```
// Bad, bad bad.  Don't do this!|
ClientResponse response = client.findAll_XML(ClientResponse.class); 
```

5）您可能想更改客户端代码的其他部分 - 我不知道。

您可能还想更改客户端的配置 - 我也不知道。

6）建议：看看this other tutorial - 它可能会为您指明正确的方向：

*   [http://www.vogella.com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

笔记：

*无论*您需要做什么 - 都应该非常*简单*！请查看链接，查看您的代码和您的测试客户端配置……然后发回您找到的内容！

先感谢您...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T23:06:36.940

[http://smoothexample.com/webservices/apache_cxf_rest_web_services_client.html](http://smoothexample.com/webservices/apache_cxf_rest_web_services_client.html)

上面的示例给出了使用 apache cxf 的示例客户端应用程序，这里客户端可以通过提供“Accept”标头来使用 xml 和 json。

这里还提供了一个 cxf REST Web 服务的简单示例，它甚至根据“Accept”标头返回 xml 和 json。

# php - 使用 php 解释来自并行端口的消息

> ID：11380423
> 
> 赞同：0
> 
> 时间：2012-07-08T03:24:20.513
> 
> 标签：php, apache

现在我正在开发一个 php 程序，它将通过并行端口从另一台计算机接收错误消息并基本上显示该消息。我以前从未弄乱过并行端口访问，并且不确定我到底需要做什么。我想知道这项任务的可能性和容易程度，以及我应该转向哪个方向。

我对细节并不完全清楚（当我完全发现时我会更新），但据我了解，计算机会像打印文件一样行事，而 php 代码会抓取消息并显示它在常规网页上。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:53:24.733

1.  没有内置PHP函数可以通过LPT、Serial Port、USB或其他外围通信接口进行通信。

2.  但是，您可以执行某些通过**exec**、**system**或**passthru调用它们的可执行文件**

3.  可执行文件可以是与外部设备通信的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:00:06.860

最简单的方法是使用外部程序（例如 Delphi 或 VisualBasic）从并行端口读取并写入/附加到位于 Web 服务器文件夹中的文件。

然后，PHP 脚本可以轻松访问和读取该消息文件。

# php - 加载 php 脚本时显示加载图像

> ID：11380425
> 
> 赞同：1
> 
> 时间：2012-07-08T03:24:41.460
> 
> 标签：php, image, loading

小（或大）问题再次出现

我正在使用一个简单的 html 表单，在提交操作时调用一个 php（邮件）脚本。现在这个脚本需要一点时间才能完成，因为在发送另一封邮件之前有一些时间限制。我希望它加载一个空白页面，或者至少在循环之前显示所有内容..但它没有，而是在表单卡住时有点“挂起”（尽管您可以看到脚本的 url 正在浏览器栏中加载）并且一旦脚本是完成它加载页面上的所有输出.. 所以我开始研究如何制作这个加载图像的一些方法.. 或者至少让用户知道正在发生一些事情，并且脚本正在工作。

我在stackover flow上看到了一些东西并包含了这个，它应该显示提交按钮所在的加载图像，但我认为它不起作用，因为它不再使用表单加载页面......但是正在运行php循环，虽然我会让你看到它，希望......

```
$('#loading_image').show(); // show loading image, as request is about to start
$.ajax({
url: '..',
type: '..',
complete: function() {
    // request is complete, regardless of error or success, so hide image
    $('#loading_image').hide();
}
});
$('#myform').submit(function() {
$('#loading_image').show(); // show animation
return true; // allow regular form submission
}); 
```

和我的表格

```
<form method="post" action="sendeveryone.php" id="myform" onReset="return confirm('Do you really want to reset the form?')">
                    <fieldset>
                    Please note:  All e-mails start with "Dear {MEMBER_NAME}, " If you would like to mention their username in the body of your email, all you have to do is type '{MEMBER_NAME}' and it will replace it to their username.<br><br>
                    <br>
                        <label class="control-label" for="subject">Subject</label>

                            <input id="subject" name="subject" class="span5" type="text">

                 <label class="control-label" for="body">Body</label>

<div class="row-fluid">
    <div class="utopia-widget-content-nopadding">
        <div class="span12 text-editor">
            <textarea id="input" name="input"></textarea>
        </div>
    </div>
 </div>

<br><img src="myloadingimage.gif" style="display: none;" id="loading_image">

                    <button class="btn btn-large btn-primary span5" type="submit">Send</button>
                    <button class="btn btn-large span5" type="reset">Cancel</button>

                    </fieldset>
                    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:45:33.757

您可以在jQuery中使用[`.ajaxStart()`](http://api.jquery.com/ajaxStart/)and方法[`.ajaxStop()`](http://api.jquery.com/ajaxStop/)

```
$('.log').ajaxStart(function() {
    $(this).text('Triggered ajaxStart handler.');
}); 
```

# mongodb - mongodb：如何过滤掉今天创建的记录？

> ID：11380428
> 
> 赞同：3
> 
> 时间：2012-07-08T03:25:29.900
> 
> 标签：mongodb

我有一个类型为 datetime.now() 的时间戳字段的集合：

```
"chashi_ts" : ISODate("2012-06-12T16:08:22.645Z") 
```

只有 mongodb 命令行，如何找到字段的 datetime 指向今天的记录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T04:15:25.227

假设您可以获得当前日期....

```
// the start of the day (midnight)
begin_date_range = ISODate("2012-06-12T00:00:00Z");

// the start of the next day (at midnight)
// this can also be done with 11:59:59PM of the current date using $lte
end_date_range = ISODate("2012-06-13T00:00:00Z");

results = db.collection_name.where({"chashi_ts":{
              "$gte":begin_date_range,
              "$lt":end_date_range}
          ); 
```

# jquery - jQuery 1.7.2 \IE9 ajax 调用不清除丢弃的元素

> ID：11380431
> 
> 赞同：1
> 
> 时间：2012-07-08T03:26:37.640
> 
> 标签：jquery, internet-explorer-9

在一天的大部分时间里，我一直在努力解决以下问题，并且取得的进展绝对为零，所以我想我会伸出手来看看是否有人有一些想法（帮助！！！）。我目前正在将 jQuery 1.7.2 与 IE9 结合使用，并且正在调用一个简单的 $.ajax 调用，它只是检索一些 HTML。随后将 HTML 插入到 div 中，如下所示：

`$("#viewContent").html(content);`

完整的相关 jQuery 代码如下所示：

```
var request = $.ajax({
    url: loadUrl, 
    type: "GET", 
    cache: false, 
    data: {command: "loadView", recordid: contextId}, 
    dataType: "html", 
    error: function (xhr, ajaxOptions, thrownError) {
        getViewManager().setMode("ERROR");
        handleError(xhr.status, thrownError);
        $("#viewContent").parent().removeClass("ajaxLoading");  
    }           
});
request.done(onLoadViewSuccess);

var onLoadViewSuccess = function(content) {
    $("#viewContent").parent().removeClass("ajaxLoading");
    for(var i=0;i<100;i++) {
        $("#viewContent").html(content);    
    }               
    content = null;      
} 
```

现在关于这个问题，你会注意到我已经插入了 100 次内容，for 循环只是为了夸大爬升的内存（通过 IE 的 Drip memory profiler 观察到）爬升（以及 DOM 节点的总数由 IE 保留）。内容不是问题，因为我用静态空字符串替换了它，它在 onLoadViewSuccess 函数中做同样的事情：

```
var onLoadViewSuccess = function(content) {
    $("#viewContent").parent().removeClass("ajaxLoading");
    for(var i=0;i<100;i++) {
        $("#viewContent").html("<div/>");   
    }               
    content = null;      
} 
```

即 Drip 会在每次 ajax 调用后显示 100 个新的 DOM 节点并稳步攀升内存。现在，如果我在初始页面加载时调用相同的方法，为什么这似乎与 ajax 调用有关：

`$(document).ready(function() {onLoadViewSuccess("<div/>")});`

我没有看到相同的行为（即在 for 循环中调用 html("<div/>") 每次迭代都正确清除了 IE9 中被替换的 DOM 节点，而不是创建 100 个新节点并将它们全部保存在内存中。 .我已经查看了几个报告的 IE 和 jQuery 的 ajax 功能问题，但唯一接近的主题似乎与旧 IE 版本有关，这些问题已在以前版本的 jQuery 中得到解决......

我怀疑我错过了一些基本的东西，因为这似乎是一个微不足道的用例，通常当我无法通过谷歌找到任何类似的主题时，10 次中有 9 次是由于我的愚蠢行为......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:32:31.383

所以我相信我已经找到了问题的根源......经过痛苦的消除过程，事实证明 IE 没有清理与我定义的特定 CSS 类相关的元素：

```
.shadow {
border-collapse: separate; 
-moz-box-shadow:    2px 2px 6px 3px #777;
-webkit-box-shadow: 2px 2px 6px 3px #777;   
box-shadow: #666 0px 2px 4px;   
**behavior: url(/btms/resources/css/PIE.htc);**
position: relative;
} 
```

行为值是问题所在（不再使用，但在我最初开发支持 IE 8 的应用程序时无意中留下了 - 具有讽刺意味的是，PIE 旨在为 IE 8 添加 CSS3 支持，但在这种情况下，以某种方式将 IE 9 认可的引用与任何即使在通过 jQuery 删除后，与该类关联的元素也会阻止 IE 释放这些元素资源）。希望这篇文章能拯救其他人同样的痛苦\沮丧......

# iphone - 维护分组的 UITableViewCell 宽度

> ID：11380433
> 
> 赞同：2
> 
> 时间：2012-07-08T03:27:06.890
> 
> 标签：iphone, uitableview, width, cell

我有一个分组的 UITableView。当用户选择一行时，我希望该单元格变窄。我通过以下方式成功实现了这一目标：

```
//DidSelectRowAtIndexPath

UITableViewCell *cell = [myTable cellForRowAtIndexPath:indexPath];

If (selected == YES) {
    selected = NO;
    cell.frame = CGRectMake(cell.frame.origin.x, cell.frame.origin.y, 320, 35);
   } else { 
    selected = YES;
    cell.frame = CGRectMake(cell.frame.origin.x,     cell.frame.origin.y, 275, 35);
}

//end DidSelectRowAtIndexPath 
```

现在这就像一个梦，但是当单元格被滚动出屏幕并再次返回时，它是全宽（320，顺便说一句，我并不是说视觉部分是 320 宽。我说的是实际的单元格框架）所以我在我的“CellForRowAtIndexPaths”方法中添加了“cell.frame = blahblahblah”行，它没有任何区别。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:53:54.867

那是因为每次您将单元格滚动出屏幕并再次返回时，它都会重新创建。您需要添加检查或标记所选单元格（使用实例变量），然后调整单元格的宽度，`tableView:cellForRowAtIndexPath:`例如：

```
-(void)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    ...

    if (selectedCellIndex == indexPath.row)
         cell.frame = CGRectMake(cell.frame.origin.x, cell.frame.origin.y, 320, 35);
    else
         cell.frame = CGRectMake(cell.frame.origin.x, cell.frame.origin.y, 275, 35);

} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:10:12.297

事实证明 UITableView 在幕后有更高级的东西，这使我无法实现我想要的。所以我正在尝试使用 UISwitch 进行类似的操作。

# c# - 安排要运行的任务

> ID：11380434
> 
> 赞同：-1
> 
> 时间：2012-07-08T03:27:09.820
> 
> 标签：c#, vbscript

我有 5 个控制台应用程序，我想在 5 个不同的白天运行。我可以将它们全部添加到任务调度程序中，但我希望用脚本来安排它们。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:27:04.750

您可以创建 Windows 服务并使用 Quartz.NET 来安排作业。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:01:12.353

另一种选择是开发一个带有计时器对象的 Windows 服务，以在指定的时间间隔调用您的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T03:50:47.667

谷歌搜索...并在 2 分钟内找到。关键字：“计划任务 C#”

--来自[http://geekswithblogs.net/rgupta/archive/2008/11/18/schedule-a-task-using-c-code.aspx](http://geekswithblogs.net/rgupta/archive/2008/11/18/schedule-a-task-using-c-code.aspx)

```
`DateTime taskTime = DateTime.Now;
timer = new Timer(new TimerCallback(Update), null, TimeSpan.FromMinutes(21 * 60 (taskTime.Hour * 60 + taskTime.Minute)), 
TimeSpan.FromMilliseconds(-1));` 
```

`一个高级的：http: [//www.codeproject.com/Articles/2478/C-Scheduler](http://www.codeproject.com/Articles/2478/C-Scheduler)`

# three.js - ThreeJS 和转向行为

> ID：11380435
> 
> 赞同：0
> 
> 时间：2012-07-08T03:27:25.917
> 
> 标签：three.js

我正在做一个[小项目](https://github.com/heiskr/mkui)，并且很难让转向算法在具有 Object3D 定位的 ThreeJS 中正常工作。我目前似乎遇到的主要问题是角速度相当不受控制，一切都旋转得太快了。我希望能够限制这一点。我提供了代码的简化示例。我想我快到了，我看了一些四元数和 Matrix4，但无法弄清楚。以前有人遇到过这个问题吗？谢谢！

```
class Movement extends THREE.Object3D
    constructor: ->
        super
        @velocity = new THREE.Vector3()
        @speed = 4
        @ease = 7
        @hault = 2

    steer: (mode, target) ->
        if @speed is 0
            @velocity.set 0, 0, 0
            return true

        # velocity vector
        switch mode
            when 'arrive'
                fromPosition = @position
                toPosition = target
            when 'flee'
                fromPosition = target
                toPosition = @position
        @velocity.sub toPosition, fromPosition

        # calculate magnitude
        magnitude = @velocity.length()

        # hault
        if magnitude < @hault
            return true

        # limit angle of rotation
        # angle = Math.acos fromPosition.dot(toPosition) / fromPosition.length() / toPosition.length()
        # axis = new THREE.Vector3().cross fromPosition, toPosition .normalize()

        # speed limit
        if magnitude > @speed
            @velocity.divideScalar magnitude / @speed

        # easing
        if magnitude < @ease and mode is 'arrive'
            @velocity.multiplyScalar magnitude / (@ease + @hault / 2)

        # adjust for time
        @velocity.multiplyScalar GLOBAL.clock.getDelta()

        # update position and rotation
        @position.addSelf @velocity
        @rotation.y = Math.atan2 -@velocity.z, @velocity.x
        @rotation.z = Math.asin @velocity.y / @velocity.length() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:00:39.557

尝试修改这个：

```
var qstart = new THREE.Quaternion();
    var qend = new THREE.Quaternion();
    var m  = new THREE.Matrix4();

    qstart.setFromRotationMatrix( MOVING_OBJECT.matrixWorld );
    qend.setFromRotationMatrix( m.lookAt( TARGET.position, MOVING_OBJECT.position, new THREE.Vector3( 0, 1, 0 ) ) );  

    MOVING_OBJECT.rotation.setEulerFromQuaternion( qstart.slerpSelf(qend, 0.015 ) ); 
```

# ruby - 无法使用 Ruby 连接到 Heroku 上的 PostgreSQL 数据库 - 无法翻译主机名

> ID：11380438
> 
> 赞同：6
> 
> 时间：2012-07-08T03:28:54.003
> 
> 标签：ruby, postgresql, heroku, pg

我正在使用 Ruby（不是 Rails）并连接 PostgreSQL 数据库。我一直在尝试在 Heroku 上进行设置，但在启动应用程序时遇到了问题。在本地运行应用程序工作正常。

我的本地 .env 看起来像：

```
postgres://DATABASE_URL=localhost 
```

连接数据库的 Ruby connect 如下所示：

```
@@db = PGconn.open(:hostaddr => ENV['DATABASE_URL'], :dbname => '(dbname)', :password => '(password)') 
```

当我推送到 Heroku 时，应用程序在该行崩溃，并将此错误写入日志：

```
could not translate host name "postgres://(my heroku db address)" to address: Name or service not known (PG::Error) 
```

那里的数据库地址与`DATABASE_URL`我的`heroku:config`. 我正在使用共享数据库。

我尝试使用`:host => ENV['DATABASE_URL']`（而不是`:hostaddr`），但结果相同。我猜我缺少一些简单的东西，但我没有任何好主意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T04:05:04.667

您需要解析出`DATABASE_URL`. 请参阅[https://devcenter.heroku.com/articles/rack#database_access](https://devcenter.heroku.com/articles/rack#database_access)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-23T11:20:43.027

Heroku 的 Devcenter 似乎不再包含这个，所以这里是手动进行拆分的方法：

```
 db_parts = ENV['DATABASE_URL'].split(/\/|:|@/)
  username = db_parts[3]
  password = db_parts[4]
  host = db_parts[5]
  db = db_parts[7]
  conn = PGconn.open(:host =>  host, :dbname => db, :user=> username, :password=> password) 
```

礼貌[格里奥](http://blog.grio.com/2013/06/how-to-create-a-rake-cron-job-in-heroku.html)。

# python - App Engine 中的 OAuth 教程 (Python)

> ID：11380440
> 
> 赞同：1
> 
> 时间：2012-07-08T03:29:19.130
> 
> 标签：python, google-app-engine, web-applications, oauth

我知道 App Engine 和 Python 的基础知识。我现在正在尝试编写一个 Web 应用程序来要求用户使用 OAuth 登录，然后显示他们的电子邮件地址。您是否知道任何为完整的 OAuth 新手教授 OAuth 的教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T04:32:05.947

我推荐[oauth2client](http://code.google.com/p/google-api-python-client/wiki/OAuth2)文档。特别是，有一些很好的[示例代码](http://code.google.com/p/google-api-python-client/wiki/OAuth2#OAuth2Decorator)可以方便地从 App Engine 中使用。

# c# - 通过 VPN 连接发送/接收广播消息

> ID：11380442
> 
> 赞同：-3
> 
> 时间：2012-07-08T03:29:40.210
> 
> 标签：c#, vpn, broadcast

我正在构建一个可以在一个有点大的网络上运行的应用程序，所以我将有多个子网.. 网络将通过 VPN 运行，所以我正在考虑让它作为集线器和-发言（我知道这是一个糟糕的设计，但我有一些想法来克服消极的一面）

现在，最重要的事情......我需要让应用程序在某些事件（应用程序关闭，应用程序崩溃......）中向每个子网发送广播消息，这是为了允许远程应用程序使用我将使用的备用计划也在实施。

注意：我处于网络/应用程序设计阶段，所以我还没有准备好任何代码。如果您提供一个工作代码示例（exe 文件也可以很好地测试），那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:57:12.427

如果问题是“如何让应用程序在某些事件中向每个子网发送广播消息”，您可以在此处阅读使用 C# 进行 UDP 广播的示例：[http ://blog.eviac.com/2010/12/网络广播与 c.html](http://blog.eviac.com/2010/12/network-broadcasting-with-c.html)

# gcc - 在 Code::Blocks 中应用 --enable-shared 或 -fPIC on

> ID：11380445
> 
> 赞同：2
> 
> 时间：2012-07-08T03:30:37.553
> 
> 标签：gcc, linker, flags, fpic

正如问题所述，我需要应用这些编译器/链接器设置中的任何一个。我正在使用 Code::Blocks 10.05。我浏览了所有构建设置屏幕。我找不到在哪里应用这些设置。我得到以下输出：

```
-------------- Build: Release in 39dll-4-Linux ---------------

Linking dynamic library: ./39DLL.so
/usr/bin/ld: obj/Release/buffer.o: relocation R_X86_64_32 against `CBuffer::retval' can not be used when making a shared object; recompile with -fPIC
obj/Release/buffer.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 0 seconds)
0 errors, 0 warnings 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:55:35.620

转到：项目->构建选项->编译器设置->其他选项。

在左侧，您将看到带有构建目标的树。它看起来像这样：ProjectName Debug Release

单击树的每个节点`-fPIC`并在文本框中输入每个节点，然后按 OK 保存。这样，将为所有目标添加标志。

# javascript - 如何使用 JavaScript 关闭 iframe 滚动？

> ID：11380448
> 
> 赞同：1
> 
> 时间：2012-07-08T03:31:31.953
> 
> 标签：javascript, css

我正在动态创建一个 iframe：

```
 function iFrame(parentElement)
  {
    var iframe = document.createElement("iframe");
    if (parentElement == null)
    {
      parentElement = document.body;
    }
    parentElement.appendChild(iframe);
    iframe.doc = null;
    if (iframe.contentDocument)
    {
      iframe.doc = iframe.contentDocument;          // Opera, Firefox
    }
    else if(iframe.contentWindow)
    {
      iframe.doc = iframe.contentWindow.document;   // Internet Explorer
    }
    else if(iframe.document)
    {
      iframe.doc = iframe.document;
    }
    if(iframe.doc == null)
    {
      throw "Application failed to dynamically create an iframe content";   
    }
    iframe.doc.open();
    iframe.doc.close();
    return iframe;
  } 
```

...与 document.onload：

```
 function onPageLoad()
  {
    var iframeDiv = document.getElementById("iframeDiv");
    var iframe = new iFrame(iframeDiv);
  } 
```

如何将此 iframe 拉伸到其父 div 并使用 JavaScript 关闭滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T04:09:58.553

您可以通过设置关闭 iframe 中的滚动：

```
iframe.style.overflow = "hidden" 
```

如果父 div 具有定义的高度和宽度，那么您可以将 iframe 设置为具有 100% 的高度和宽度：

```
iframe.style.width = iframe.style.height = "100%"; 
```

[上一个 SO question/answer](https://stackoverflow.com/questions/5867985/iframe-100-height)中的更多信息。

# php - 使用 MariaDB 的 SphinxSE 基本语法问题

> ID：11380450
> 
> 赞同：0
> 
> 时间：2012-07-08T03:31:43.293
> 
> 标签：php, mysql, full-text-search, sphinx, mariadb

我正在考虑使用 SphinxSE 将当前的 MySQL 数据库转换为 MariaDB 5.5。我还没有找到任何关于使用 MariaDB 附带的 SphinxSE 的真正基本的“是的，你是个白痴”教程。

我从 AskMonty 了解本[教程](http://kb.askmonty.org/en/about-sphinxse/)的第一部分关于如何安装插件的内容，但随后它开始进入基本用法，这就是我的大脑开始进入大脑放屁模式的地方。我理解创建特殊表的必要性，但最后给我留下了一些问题。在示例中，它说 id、weight 和 query 是必需的，并且它们需要特定的设置。但是，您可以在该表中拥有的以下附加字段不一定有意义。当 MySQL 对 Sphinx 的 searchd 进行查询并将结果返回到该表时，这个特殊的表是动态构建的，还是该表包含由 searchd 填充的大量关键字？

根据[这个](http://sphinxsearch.com/docs/2.0.4/)关于 Sphinx 的文档（以及我发现的一些[有用的](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)[文章](http://sphinxsearch.com/info/articles/)），我不太确定 SphinxSE “照顾”了什么以及我仍然需要设置什么。我假设我仍然需要在 sphinx.conf 文件中设置索引？或者它们是否以某种方式设置在通过查询传递的属性所需的特殊表中？

所以现在你知道我有多么困惑，这基本上是我想要一些帮助的地方。假设我刚刚成功安装了 MariaDB，并且安装了包含的 SphinxSE 插件。在我想象的数据库中，我有 3 个表，我想使用 Sphinx 的全文搜索功能。

```
--
-- Table structure for table `page_articles`
--

CREATE TABLE IF NOT EXISTS `page_articles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `page_id` int(11) NOT NULL,
  `body` longtext NOT NULL,
  PRIMARY KEY (`id`),
  KEY `page_id` (`page_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Table structure for table `page_comments`
--

CREATE TABLE IF NOT EXISTS `page_comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `comment` text NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Table structure for table `page_content`
--

CREATE TABLE IF NOT EXISTS `page_content` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(100) NOT NULL,
  `content` longtext NOT NULL,
  `meta_keywords` text NOT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `content` (`content`,`meta_keywords`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

从这一点开始我该怎么做才能正确设置我需要的索引？就像我说的，我阅读了几篇文章，并不清楚如何选择字段进行索引，或者您是否只选择 MySQL 全文索引并且该索引为您选择字段？在我正确设置了一些索引之后，我将如何从一些可以用来从这些表中提取数据的搜索查询开始？我了解普通 MySQL 全文搜索的语法（SELECT ... FROM table MATCH(blah_index) AGAINST (keywords)），但我不知道它如何或是否仍在 SphinxSE 版本中使用。任何额外的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T04:53:49.847

SphinxSE 只是一个接口，可让您使用 mysql 查询 sphinx 服务器。您仍然需要单独设置 sphinx。

本文展示了如何使用该界面：[使用 SphinxSE](http://sphinxsearch.com/docs/current.html#sphinxse-using)

但是请注意表定义的这一部分：`CONNECTION="sphinx://localhost:9312/test";`

这就是你告诉它连接到你现有的狮身人面像服务器的地方。有很多文档解释了如何设置 sphinx。事实上，在 sphinx 网站上什至有一篇文章链接，它会引导您完成所有设置以使用 MySQL：[Sphinx & MySQL](http://astellar.com/2011/12/replacing-mysql-full-text-search-with-sphinx/)

# asp.net - .net MVC3 对应 PHP 脚本标签

> ID：11380454
> 
> 赞同：0
> 
> 时间：2012-07-08T03:32:36.070
> 
> 标签：asp.net, asp.net-mvc-3

**我有来自 PHP 页面的以下脚本标记：**

```
 <script src='/get_items.php'></script> 
```

**.Net MVC3 视图中理想的对应物是什么（比如我想调用一个动作方法）？**

PS：php script 标签返回函数调用（通过 Fiddler 观察到），即：

RegisterThis('123', ["Title",{"1111":["Title Text","","</h2>","1","5","0",[]]}]) ;

RegisterThis('234', ["Title",{"2222":["Title Text","","</h2>","1","0","6",[]]}]) ;

RegisterThis('345', ["Title",{"3333":["Title Text","","</h2>","1","8","0",[]]}]) ;

**（我不是在问创建一个 JSon 脚本，只是在 php 页面中如何让视图中的 script 标签对应。）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:15:57.890

你可以使用`Url.Action`助手。例如在 Razor 视图中：

```
<script type="text/javascript" src="@Url.Action("GetItems", "Home")"></script> 
```

然后当然你会调用它的`GetItems`动作，它必须返回有效的javascript：`HomeController`

```
public ActionResult GetItems()
{
    return JavaScript("the script you want to return");
} 
```

并且由于您显示的脚本示例类似于 JSONP（它不完全是 JSONP，因为您将 2 个参数传递给回调并且您正在多次调用回调），您可以编写一个自定义`JsonpResult`：

```
public class JsonpResult : JsonResult
{
    public JsonpResult(object data)
    {
        Data = data;
        JsonRequestBehavior = JsonRequestBehavior.AllowGet;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.Write("RegisterThis(");
        base.ExecuteResult(context);
        response.Write(")");
    }
} 
```

然后让您的控制器操作返回此自定义`JsonpResult`类的实例并将其传递给视图模型以序列化为 JSON 并作为参数传递给回调 javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:44:54.983

要仅将 C#/VB 代码添加到页面，您可以在 .aspx 中使用 <% %> 标记。如果它是一个返回值的单个函数调用，您可以使用 <%: %> ，它甚至可以对结果进行 HTML 编码。查看此页面以获取更多信息：[http](http://www.asp.net/mvc/tutorials/older-versions/views/asp-net-mvc-views-overview-cs) ://www.asp.net/mvc/tutorials/older-versions/views/asp-net-mvc-views-overview-cs 。

要专门加载动作，请使用 HTML Helper 方法 @Html.Action。查看此页面了解更多信息：[http](http://buildstarted.com/2010/09/29/htmlhelper-guide-for-mvc-3-part-2/) ://buildstarted.com/2010/09/29/htmlhelper-guide-for-mvc-3-part-2/ 。

# android - 如何通过套接字将android连接到本地PC

> ID：11380458
> 
> 赞同：0
> 
> 时间：2012-07-08T03:33:52.467
> 
> 标签：android

这是一个普遍的问题，现在不需要编码。我在 android 中使用 shareGps 应用程序，我正在将其数据传输到我的电脑，通过 adb bridge hack 进行了 USB 网络共享。它转发一个 tcp 端口来接收数据。我现在使用 shareGps 应用程序将端口转发到 50000`adb forward tcp:50000 tcp:50000` 也连接到套接字 127.0.0.1:50000

问题是当我使用 50000 以外的任何其他端口时。当我尝试使用 50000 以外的其他端口时，它不包含 gps 数据。为什么？？？如果可以的话，还可以帮助我解决它

编辑：

我还想知道 android 应用程序“ShareGps”正在监听哪个端口，并且我想更改它正在使用的端口。如果可能的话，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:00:47.237

你必须知道端口的范围：[List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

**动态、私有或临时端口。** 范围 49152–65535 - 在已注册端口之上 - 包含无法向 IANA 注册的动态或私有端口。此范围用于自定义或临时目的以及临时端口的自动分配。

正如您在应用程序的用户指南中看到的那样：[sharedroid.jillybunch.com/user.html](http://sharedroid.jillybunch.com/user.html)，您可以将 500000 用于 shareGps tcp 端口

# java - java的复杂递归

> ID：11380459
> 
> 赞同：0
> 
> 时间：2012-07-08T03:33:57.217
> 
> 标签：java

我正在用 Java 编写一个程序来查找一轮中的最大和最小成本。但我需要分析每一轮，然后我把孩子还给我。 **如果`M[i][j]`and`M[k][l]`为真，我可以进行递归。**现在递归不起作用，但模拟是的。

我不知道该怎么做，我的代码是：

```
import IIC1103Package.*;

public class jjj {
    public static void main(String[] args) {
        int[][] a = archivoAMatriz("Hola");
        imprimirMatriz(a);
        estimacion(3, 3, "Hola");
        int[] asa = {3,5,6,1,6,1};
        System.out.println(hallarminimo(asa));
    }
static int[][] archivoAMatriz(String input){
    ArchivoDeLectura a = new ArchivoDeLectura();
    String aux = "";
    String [] aux2;
    int filas = 0;
    int columnas = 0;

    if (a.abrir(input)) {

        aux = a.leer();
        aux2 = aux.split(",");

            filas = Integer.parseInt(aux2[0]);

            columnas = Integer.parseInt(aux2[1]);
        }
    else{
        Usuario.mensaje("Ese archivo no existe");
    }
    int[][] matriz = new int[filas][columnas];

    while (!a.EOF()) {
        for (int i = 0; i < matriz.length; i++) {
            aux = a.leer();
            aux2 = aux.split(",");
            for (int j = 0; j < matriz.length; j++) {
                matriz[i][j] = Integer.parseInt(aux2[j]); 
            }
        }
    }
    a.cerrar();
    return matriz;
    }

 static void imprimirMatriz(int[][] a){
        for (int i = 0; i < a.length; i++) {
            for (int j = 0; j < a[0].length; j++){
                System.out.print(a[i][j] + " ");
            }
            System.out.println();
        }
    }

    static int hallarminimo(int[] a){
        int ret = 0;
        for (int i = 0; i < a.length; i++) {
            ret = a[i];
            if (i>0) {
                if (a[i]<=a[i-1]) {
                    ret = a[i];
                }
            }
        }
        return ret;
    }

    static void estimacion(int simulaciones, int n, String output){
        int[][] a = archivoAMatriz(output);
        int aux = 0;
        int cont = 0;
        int minimo = 0;

        int[] aux2 = new int[n+1];
        for (int i = 0; i <= simulaciones; i++) {
            minimo = hallarminimo(aux2);
            if (cont>=1) {
                if (hallarminimo(aux2)<minimo) {
                    minimo=hallarminimo(aux2);
                }
            }
            for (int j = 0; j <= n; j++) {
                int k = Aleatorio.entero(0,a.length-1);
                int j2 = Aleatorio.entero(0, a.length-1);
                if (a[k][j2]>0) {
                    aux+=a[k][j2];
                    aux2[j] = a[k][j2];
                    if (j==0) {
                        cont = 1;
                    }
                }

            }
        }
        System.out.println("El costo promedio de los viajes es: " + aux/(n*simulaciones));
        System.out.println("El costo mÃ¬nimo de los viajes es: " + minimo);
    }
} 
```

# c++ - 将局部变量存储在类安全的 STL 容器中吗？

> ID：11380460
> 
> 赞同：2
> 
> 时间：2012-07-08T03:34:33.830
> 
> 标签：c++, variables, stl, map, containers

```
class MyMap : std::map<char, pro::image>
{
public:
     void MyMethod(char x);
     /** code **/
}

void MyMap::MyMethod(char x)
{
     pro::image my_img; // note that my_img is a local variable
     my_img.LoadFromFile("my_image.png");

     this->insert(std::pair<char, pro::image>(x, my_img)); // stored in the class
} 
```

现在，这段代码安全吗？基本上，它是否`MyMap`存储了我的*副本*，或者它是否存储了*参考*？`my_img``insert`

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T03:36:37.760

它将存储一个副本。

但是，你真的需要继承吗？你应该成为`std::map`一个班级成员。

```
class MyMap
{
    std::map<car, pro::image> map_;
public:
     void MyMethod(char x);
     /** code **/
};

void MyMap::MyMethod(char x)
{
     pro::image my_img; // note that my_img is a local variable
     my_img.LoadFromFile("my_image.png");

     map_.insert(std::pair<char, pro::image>(x, my_img)); // stored in the class
} 
```*

# visual-c++ - 如何修复这个随机生成器？C++

> ID：11380464
> 
> 赞同：1
> 
> 时间：2012-07-08T03:35:40.190
> 
> 标签：visual-c++

我是一名新程序员，我正在为 C++ 做一个学校项目。到目前为止，在我的程序中，这是我唯一遇到的问题。有人可以告诉我我做错了什么吗？现在因为我是新来的，而且它是针对编程课的，所以我只在基本 c++ 下学期是中级 c++，所以请保持简单的术语。谢谢！！:)

```
#include <iostream> 
#include <fstream> 
#include <string> 
#include <time.h> 
#include <ctime> 
#include <cmath> 
#include <iomanip>  
using namespace std;  

int srand (time(0)); 
static int question = rand % 3; 
```

我的 'rand' 有一个红色的 sqiuggley，上面写着'表达式必须具有整数或枚举类型'

这是我编译程序时出现的错误： 1>o:\cs101 and cs106\movie game\movie game\movie title.h(10): error C2365: 'srand' : redefinition; 以前的定义是“功能”

我想要完成的目标是在我的每个函数中选择一个随机问题（有五个函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:49:09.150

`rand`这是一个功能。

你可以这样称呼它`rand()`（所以你的整体喜欢是`static int question = rand() % 3;`.

有关如何使用此功能的更多示例，请参见[cplusplus.com](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)上的此页面。（顺便说一下，那个网站是标准库的一个很好的参考，把它收藏起来！）

# android - 将字符串从子选项卡活动传递到父选项卡

> ID：11380465
> 
> 赞同：1
> 
> 时间：2012-07-08T03:35:41.420
> 
> 标签：android, android-intent, tabs, bundle, parent-child

我有一个活动名称“标签”。它启动 4 个不同的选项卡，每个选项卡都有自己的活动。它用 ：

```
th = (TabHost) findViewById(R.id.tabhost);
    th.setup(this.getLocalActivityManager());
    TabSpec specs = th.newTabSpec("Tag1");
    Intent tabSelection = new Intent (this, ProfileSettings.class);

    tabSelection.putExtras(gotSettings);
    specs.setContent(tabSelection);
    specs.setIndicator("Settings",
            getResources().getDrawable(R.drawable.ic_menu_friendslist));
    th.addTab(specs);

    specs = th.newTabSpec("Tag2");
    tabSelection = new Intent (this,InternationalRoamingService.class);
    specs.setContent(tabSelection);
    specs.setIndicator("IRS", getResources().getDrawable(R.drawable.ic_menu_mapmode));
    th.addTab(specs);

    specs = th.newTabSpec("Tag3");
    tabSelection = new Intent (this,Call.class);
    specs.setContent(tabSelection);
    specs.setIndicator("Call", getResources().getDrawable(R.drawable.call));
    th.addTab(specs);

    specs = th.newTabSpec("Tag4");
    tabSelection = new Intent (this,WebSMS.class);
    specs.setContent(tabSelection);
    specs.setIndicator("SMS", getResources().getDrawable(R.drawable.ic_menu_start_conversation));
    th.addTab(specs); 
```

我将包“gotSettings”从父级传递给子级没有问题。但是如何从子活动更新捆绑包的值或将值从子活动传递给父？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:51:48.180

有两种方法适合您：

*   您可以使用[StartActivityForResult](http://developer.android.com/reference/android/app/Activity.html)，这是一个例子：[http ://www.vogella.com/articles/AndroidIntent/article.html#usingintents_sub](http://www.vogella.com/articles/AndroidIntent/article.html#usingintents_sub)

*   另一种方法是使用静态参数，您在子活动中更改它，然后在父活动中使用它。例如：将此行添加到您的子活动中，使用“ChildActivity”类名`public static int myValue;`，然后为其设置一个参数`myValue=25;`并在您的父活动中使用它：`myChildValue=ChildActivity.myValue;`

# javascript - Javascript未经许可触发声音？

> ID：11380466
> 
> 赞同：0
> 
> 时间：2012-07-08T03:35:56.843
> 
> 标签：javascript, facebook, audio, notifications, chat

当聊天消息到达时，我需要让网页播放由 javascript 触发的声音，但是当声音播放时，chrome 要求我给予快速时间权限

Facebook 是我正在寻找的一个完美的例子，他们是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:39:28.010

QuickTime 是一个在 Chrome 中默认运行之前需要权限的插件。如果您选择一种浏览器原生支持的音频格式，甚至是内置 Adob​​e Flash 支持的音频格式，那么浏览器将不会认为它需要 Quicktime 并且不会请求许可。

您还可以配置您的特定浏览器以允许 QuickTime 无需请求许可即可运行，但这只是针对您的特定浏览器的修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T14:16:34.153

这就是我要找的东西：[http ://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T11:24:56.937

您可以尝试使用 HTML5 Audio 元素（当然，仅适用于现代浏览器）。

例如，请参阅[http://css-tricks.com/play-sound-on-hover/](http://css-tricks.com/play-sound-on-hover/)

# java - 使用机器学习简化文本

> ID：11380468
> 
> 赞同：2
> 
> 时间：2012-07-08T03:36:06.063
> 
> 标签：java, parsing, machine-learning, nlp, stanford-nlp

我正在完成一个关于文本简化的项目，有几个开源提供文本解析器，例如斯坦福解析器。想知道是否有任何解析器能够使用机器学习解析文本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:22:48.670

[OpenNLP](http://opennlp.apache.org/)是一个非常好的开源库。您可以使用许多特定的机器学习算法（例如 MaxEnt）来训练此库以生成特定于您需求的模型。你也可以看到这个[讨论](http://sourceforge.net/projects/opennlp/forums/forum/9944/topic/3803343)。

虽然 OpenNLP 具有 Apache 许可证，但还有另一个名为[LingPipe](http://alias-i.com/lingpipe/)的工具也提供类似的功能但不同的许可证。

[Mahout](http://www.ibm.com/developerworks/java/library/j-mahout/)也是一个很好的机器学习库，但是，您需要使用其他解析器或您自己的实现从文本中提取特征。Mahout 需要学习功能。

教程：1\. [OpenNLP 教程](http://sourceforge.net/apps/mediawiki/opennlp/index.php?title=Main_Page#OpenNLP_Tutorials) 2\. [LingPipe 教程](http://alias-i.com/lingpipe/demos/tutorial/read-me.html)

# jquery - 如何对表运行一些 jQuery 以根据列值更改填充？

> ID：11380469
> 
> 赞同：0
> 
> 时间：2012-07-08T03:36:29.037
> 
> 标签：jquery

我有以下代码，我需要制作它，以便表格第二列中的填充取决于第一列中的数字。

```
<tr>
   <td id="refKey_1" style="text-align:center;" class=" sorting_1">1.0.0</td>
   <td id="Title_1">
      <input type="text" value="x" size="100" name="item.Title" id="item_Title_1">
   </td>
</tr>
<tr>
   <td id="refKey_2" style="text-align:center;" class=" sorting_1">1.2.0</td>
  <td id="Title_2">
      <input type="text" value="xx" size="100" name="item.Title" id="item_Title_2">
   </td>
</tr>
<tr>
   <td id="refKey_3" style="text-align:center;" class=" sorting_1">1.3.4</td>
   <td id="Title_3">
      <input type="text" value="xxx" size="100" name="item.Title" id="item_Title_3">
   </td>
</tr> 
```

我需要的是第二列的左填充为 0、10px 或 20px，具体取决于第一列 id 是否以 0.0、.0 或非零结尾。

有没有办法用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T03:46:51.473

我假设`id`您的意思是单元格的文本，对吗？只是一些正则表达式匹配来做到这一点。

```
$('tr').each(function() {
    var tds = $(this).find('td'),
        text = tds.filter('[id^="refKey_"]').text(),
        tdToPad = tds.filter('[id^="Title_"]'),
        pad;
    if (/0\.0$/.test(text))
        pad=0;
    else if (/\.0$/.test(text))
        pad=10;
    else
        pad=20;
    tdToPad.css('paddingLeft', pad);
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/cynSk/4/)

**编辑：**您也可以使用通用类而不是这些 ID 选择器，这将是一种更标准的方法。此外，您可以将表格的 ID 添加到第一个选择器：`$('#tableID tr')`以防您的页面中有多个表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:47:04.020

```
$('#tableThatICareAbout').find('tr > td').eq(1)
.css('padding-left',

$('#tableThatICareAbout').find('tr > td').eq(0)[0].id.split('_')[1]

); 
```

我希望这能奏效，但无论核心问题是什么，这都是处理这个问题的一种可怕、可怕的方式。

# haskell - 使用 Data.Cereal 或 Data.Binary 序列化字符串

> ID：11380470
> 
> 赞同：5
> 
> 时间：2012-07-08T03:36:33.877
> 
> 标签：haskell

我正在实现一个协议，该协议规定表示密码的字符串应序列化为固定长度的 10 字节字段。我正在使用 Data.Cereal 来执行此任务。这是我最近的尝试：

```
padText :: Int -> Text -> Text
padText fieldLen = T.justifyLeft fieldLen '\NUL'

putPassword :: Putter Password
putPassword = put . TE.encodeUtf8 . padText 10 
```

put on ByteStrings 将一个额外的 8 字节块添加到它正在编码的内容的前面：

```
 runPut $ putPassword "Friend" 
```

导致 ：

```
"\NUL\NUL\NUL\NUL\NUL\NUL\NUL\nFriend\NUL\NUL\NUL\NUL" 
```

我不想要额外的块。为什么put会有这种行为？

有谁知道如何只序列化 10 个原始字节？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T03:46:37.213

我假设“额外的块”是指`"\NUL\NUL\NUL\NUL\NUL\NUL\NUL\n`. 这是一个 64 位长度的字段（注意它的值是`10`），它是`ByteString`. 由于您在调用后已经有一个字节串`TE.encodeUtf8`，我建议您只使用`putByteString`以避免长度字段（或者`putLazyByteString`如果您正在导入惰性文本编码模块）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T08:14:16.483

正如托马斯`put`在 ByteStrings 上所说的那样，预先考虑了编码的长度。下图为实际实例：

```
instance Serialize B.ByteString where
    put bs = do put (B.length bs :: Int)
                putByteString bs
   ... 
```

`putByteString`单独没有。解决方案是使用`putByteString`：

```
putPassword :: Putter Password
putPassword = putByteString . TE.encodeUtf8 . padText 10 
```

# web-services - 从 JAX-WS CXF 框架使用 JAX-RPC 服务的问题

> ID：11380473
> 
> 赞同：1
> 
> 时间：2012-07-08T03:36:48.183
> 
> 标签：web-services, jax-ws, cxf, jax-rpc

您能否建议我是否可以在 JAX-RPC 中使用**带有 DII**概念的 WSDL，并在 CXF2.6（不支持 JAX-RPC）框架中编写一个方法来使用 JAX-RPC 服务？您是否看到与这种方法的任何类加载问题或 jar 冲突？

CXF 管道是否支持这样的调用？

原因是我们的供应商仍然使用 JAX-RPC，并且我们在 JAX-WS 框架上运行。我们无法控制托管供应商的实施。

萨卢多斯·卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:22:11.397

你可以试试这个从 CXF 中改编而来的 DynamicClientFactory。这将允许您调用 RPC/编码的 Web 服务。

代码：

拨打电话：

```
DynamicClientFactory dcf = DynamicClientFactory.newInstance();
org.apache.cxf.endpoint.Client client = dcf.createClient(url); //URL of WSDL
Object[] response = client.invoke(...); 
```

DynamicClientFactory.java

```
package ar.com.nextel.nxsgst.daemon.core;

import java.io.IOException;
import java.net.URL;
import java.util.Collection;
import java.util.Collections;
import java.util.Iterator;
import java.util.Map;
import java.util.StringTokenizer;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.namespace.QName;

import org.apache.cxf.Bus;
import org.apache.cxf.bus.CXFBusFactory;
import org.apache.cxf.common.i18n.Message;
import org.apache.cxf.common.logging.LogUtils;
import org.apache.cxf.common.util.StringUtils;
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.endpoint.ClientImpl;
import org.apache.cxf.endpoint.EndpointImplFactory;
import org.apache.cxf.endpoint.SimpleEndpointImplFactory;
import org.apache.cxf.endpoint.dynamic.TypeClassInitializer;
import org.apache.cxf.jaxb.JAXBDataBinding;
import org.apache.cxf.resource.URIResolver;
import org.apache.cxf.service.Service;
import org.apache.cxf.service.factory.ServiceConstructionException;
import org.apache.cxf.service.model.SchemaInfo;
import org.apache.cxf.service.model.ServiceInfo;
import org.w3c.dom.Element;
import org.xml.sax.InputSource;
import org.xml.sax.SAXParseException;

import com.sun.codemodel.JCodeModel;
import com.sun.codemodel.JDefinedClass;
import com.sun.codemodel.JPackage;
import com.sun.tools.xjc.Options;
import com.sun.tools.xjc.api.ErrorListener;
import com.sun.tools.xjc.api.S2JJAXBModel;
import com.sun.tools.xjc.api.SchemaCompiler;
import com.sun.tools.xjc.api.XJC;

public class DynamicClientFactory {

    private static final Logger LOG = LogUtils.getL7dLogger(DynamicClientFactory.class);

    private Bus bus;

    private boolean simpleBindingEnabled = true;

    private Map<String, Object> jaxbContextProperties;

    protected DynamicClientFactory(Bus bus) {
        this.bus = bus;
    }

    protected EndpointImplFactory getEndpointImplFactory() {
        return SimpleEndpointImplFactory.getSingleton();
    }

    /**
     * Create a new instance using a specific <tt>Bus</tt>.
     * 
     * @param b the <tt>Bus</tt> to use in subsequent operations with the
     *            instance
     * @return the new instance
     */
    public static DynamicClientFactory newInstance(Bus b) {
        return new DynamicClientFactory(b);
    }

    /**
     * Create a new instance using a default <tt>Bus</tt>.
     * 
     * @return the new instance
     * @see CXFBusFactory#getDefaultBus()
     */
    public static DynamicClientFactory newInstance() {
        Bus bus = CXFBusFactory.getThreadDefaultBus();
        return new DynamicClientFactory(bus);
    }

    /**
     * Create a new <code>Client</code> instance using the WSDL to be loaded
     * from the specified URL and using the current classloading context.
     * 
     * @param wsdlURL the URL to load
     * @return
     */
    public Client createClient(String wsdlUrl) {
        return createClient(wsdlUrl, (QName)null, (QName)null);
    }

    /**
     * Create a new <code>Client</code> instance using the WSDL to be loaded
     * from the specified URL and with the specified <code>ClassLoader</code>
     * as parent.
     * 
     * @param wsdlUrl
     * @param classLoader
     * @return
     */
    public Client createClient(String wsdlUrl, ClassLoader classLoader) {
        return createClient(wsdlUrl, null, classLoader, null);
    }

    public Client createClient(String wsdlUrl, QName service) {
        return createClient(wsdlUrl, service, null);
    }

    public Client createClient(String wsdlUrl, QName service, QName port) {
        return createClient(wsdlUrl, service, null, port);
    }

    public Client createClient(String wsdlUrl, QName service, ClassLoader classLoader, QName port) {
        if (classLoader == null) {
            classLoader = Thread.currentThread().getContextClassLoader();
        }
        URL u = composeUrl(wsdlUrl);
        LOG.log(Level.FINE, "Creating client from URL " + u.toString());
        ClientImpl client = new ClientImpl(bus, u, service, port,
                                           getEndpointImplFactory());

        Service svc = client.getEndpoint().getService();
        //all SI's should have the same schemas
        Collection<SchemaInfo> schemas = svc.getServiceInfos().get(0).getSchemas();

        SchemaCompiler compiler = XJC.createSchemaCompiler();
        ErrorListener elForRun = new InnerErrorListener(wsdlUrl);
        compiler.setErrorListener(elForRun);

        addSchemas(wsdlUrl, schemas, compiler);

        S2JJAXBModel intermediateModel = compiler.bind();
        JCodeModel codeModel = intermediateModel.generateCode(null, elForRun);
        StringBuilder sb = new StringBuilder();
        boolean firstnt = false;

        for (Iterator<JPackage> packages = codeModel.packages(); packages.hasNext();) {
            JPackage jpackage = packages.next();
            if (!isValidPackage(jpackage)) {
                continue;
            }
            if (firstnt) {
                sb.append(':');
            } else {
                firstnt = true;
            }
            sb.append(jpackage.name());
        }
        outputDebug(codeModel);

        String packageList = sb.toString();

        JAXBContext context = null;
        Map<String, Object> contextProperties = jaxbContextProperties;

        if (contextProperties == null) {
            contextProperties = Collections.emptyMap();
        }

        try {
            if (StringUtils.isEmpty(packageList)) {
                context = JAXBContext.newInstance(new Class[0], contextProperties);
            } 
        } catch (JAXBException jbe) {
            throw new IllegalStateException("Unable to create JAXBContext for generated packages: "
                                            + jbe.getMessage(), jbe);
        }

        JAXBDataBinding databinding = new JAXBDataBinding();
        databinding.setContext(context);
        svc.setDataBinding(databinding);

        ServiceInfo svcfo = client.getEndpoint().getEndpointInfo().getService();

        TypeClassInitializer visitor = new TypeClassInitializer(svcfo, intermediateModel);
        visitor.walk();

        return client;
    }

    private boolean isValidPackage(JPackage jpackage) {
        if (jpackage == null) {
            return false;
        }
        String name = jpackage.name();
        if ("org.w3._2001.xmlschema".equals(name)
            || "java.lang".equals(name)
            || "java.io".equals(name)
            || "generated".equals(name)) {
            return false;
        }
        Iterator<JDefinedClass> i = jpackage.classes();
        while (i.hasNext()) {
            JDefinedClass current = i.next();
            if ("ObjectFactory".equals(current.name())) { 
                return true;
            }
        }
        return false;
    }

    private void outputDebug(JCodeModel codeModel) {
        if (!LOG.isLoggable(Level.INFO)) {
            return;
        }

        StringBuffer sb = new StringBuffer();
        boolean first = true;
        for (Iterator<JPackage> itr = codeModel.packages(); itr.hasNext();) {
            JPackage package1 = itr.next();

            for (Iterator<JDefinedClass> citr = package1.classes(); citr.hasNext();) {
                if (!first) {
                    sb.append(", ");
                } else {
                    first = false;
                }
                sb.append(citr.next().fullName());
            }
        }

//        LOG.log(Level.INFO, "Created classes: " + sb.toString());

    }

    private void addSchemas(String wsdlUrl, Collection<SchemaInfo> schemas, SchemaCompiler compiler) {
        int num = 1;
        for (SchemaInfo schema : schemas) {
            Element el = schema.getElement();

            compiler.parseSchema(wsdlUrl + "#types" + num, el);
            num++;
        }

        if (simpleBindingEnabled && isJaxb21()) {
            String id = "/org/apache/cxf/endpoint/dynamic/simple-binding.xjb";
            LOG.info("Loading the JAXB 2.1 simple binding for client.");
            InputSource source = new InputSource(getClass().getResourceAsStream(id));
            source.setSystemId(id);
            compiler.parseSchema(source);
        }
    }

    private boolean isJaxb21() {
        String id = Options.getBuildID();
        StringTokenizer st = new StringTokenizer(id, ".");
        String minor = null;

        // major version
        if (st.hasMoreTokens()) {
            st.nextToken();
        }

        if (st.hasMoreTokens()) {
            minor = st.nextToken();
        }

        try {
            int i = Integer.valueOf(minor);
            if (i >= 1) {
                return true;
            }
        } catch (NumberFormatException e) {
            // do nothing;
        }

        return false;
    }

    public boolean isSimpleBindingEnabled() {
        return simpleBindingEnabled;
    }

    public void setSimpleBindingEnabled(boolean simpleBindingEnabled) {
        this.simpleBindingEnabled = simpleBindingEnabled;
    }

    private URL composeUrl(String s) {
        try {
            URIResolver resolver = new URIResolver(null, s, getClass());

            if (!resolver.isResolved()) 
                throw new ServiceConstructionException(new Message("COULD_NOT_RESOLVE_URL", LOG, s));

            return resolver.getURI().toURL();            
        } catch (IOException e) {
            throw new ServiceConstructionException(new Message("COULD_NOT_RESOLVE_URL", LOG, s), e);
        }
    }

    private class InnerErrorListener implements ErrorListener {

        private String url;

        InnerErrorListener(String url) {
            this.url = url;
        }

        public void error(SAXParseException arg0) {
            throw new RuntimeException("Error compiling schema from WSDL at {" + url + "}: "
                                       + arg0.getMessage(), arg0);
        }

        public void fatalError(SAXParseException arg0) {
            throw new RuntimeException("Fatal error compiling schema from WSDL at {" + url + "}: "
                                       + arg0.getMessage(), arg0);
        }

        public void info(SAXParseException arg0) {
            // ignore
        }

        public void warning(SAXParseException arg0) {
            // ignore
        }
    }

    /**
     * Return the map of JAXB context properties used at the time that we create new contexts.
     * @return the map
     */
    public Map<String, Object> getJaxbContextProperties() {
        return jaxbContextProperties;
    }

    /**
     * Set the map of JAXB context properties used at the time that we create new contexts.
     * @param jaxbContextProperties
     */
    public void setJaxbContextProperties(Map<String, Object> jaxbContextProperties) {
        this.jaxbContextProperties = jaxbContextProperties;
    }
} 
```

# regex - ProFTPd 的正则表达式

> ID：11380481
> 
> 赞同：2
> 
> 时间：2012-07-08T03:38:24.563
> 
> 标签：regex, ftp, regular-language

如果有人可以帮助我使用 ProFTPd 的 PathAllowFilter 的正则表达式，我将不胜感激。

这是我到目前为止的正则表达式： (.mp3|.aac|.m4a)$

它只允许 mp3、aac 和 m4a 文件类型。但我想包括以下内容，文件名可能包含 AZ、az、0-9、-、_ 并且文件结尾应该如上所述 mp3、aac 和 m4a，但也应该允许它不'不包含任何扩展名。

所以现在我的想法是，我怎样才能将这些结合到一个正则表达式中？也许你们有一些好主意:)

先谢谢了。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:44:08.120

试试这个正则表达式：

```
[A-Za-z0-9_-]+\.(mp3|aac|m4a)?$ 
```

这要求文件名仅包含您列出的符号（注意：`-`符号位于末尾，因此它不能用作元符号），并且`?`扩展部分是可选的。

# c++ - 带有模板类和派生类的 Swig shared_ptr 宏

> ID：11380483
> 
> 赞同：5
> 
> 时间：2012-07-08T03:38:49.787
> 
> 标签：c++, python, swig

这个问题在某些方面是此处发布的问题的扩展： [带有模板类的 SWIG_SHARED_PTR 宏](https://stackoverflow.com/questions/5559147/swig-shared-ptr-macro-with-templated-class/11380432#11380432) 虽然这个问题可能完全不相关。

基本设置是这样的：我试图让 SWIG 将模板类包装为 shared_ptr。所以接口文件应该是这样的

```
%shared_ptr(template_instance)
%include template_class.cpp
%template(vector_instance) template_class<int>; 
```

现在的问题是`template_class`有很多派生类，这会在 swig 中导致很多警告，然后构建错误。这些类不需要作为`shared_ptr`'s 处理，所以我宁愿忽略上面代码生成的警告。该错误的解决方案似乎是：

```
%shared_ptr(template_derived1)
%shared_ptr(template_derived2)
.
.
.
%shared_ptr(template_derivedn)
%shared_ptr(template_instance)
%include template_class.cpp
%template(vector_instance) template_class<int>; 
```

这可行，但是很混乱，我认为将所有内容都表示为 shared_ptr 一定有一些缺点（它是什么？）。这附近有人吗？

编辑：更新具体示例

测试.h

```
class Base
{
  int base_member;
};

class Derived : public Base
{
  int derived_member;
}; 
```

测试.i

```
%module test
%{
#include "test.h"
#include <boost/shared_ptr.hpp>
  %}

%include <boost_shared_ptr.i>
%shared_ptr(Base)
%include test.h 
```

命令：

```
swig -python -c++ test.i 
g++ -fPIC -I /usr/include/python2.7 -c test_wrap.cxx 
```

在这个精简的例子中，swig 调用给出警告，而 g++ 调用给出错误。请注意，我已经删除了模板，因为它似乎不是问题的一个因素。

错误通过注释掉解决

```
%shared_ptr(Base) 
```

swig 生成的警告是：

```
test.h:10: Warning 520: Derived class 'Derived' of 'Base' is not similarly marked as a smart pointer 
```

来自 g++ 的错误是：

```
test_wrap.cxx: In function ‘PyObject* _wrap_delete_Derived(PyObject*, PyObject*)’:
test_wrap.cxx:3155:22: error: ‘smartarg1’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T06:34:24.397

这里的警告是因为您需要告诉 SWIG 整个类层次结构，而不仅仅是基类，以便能够有效地使用智能指针。它需要能够在智能指针之间进行转换，以便任何需要智能指针的东西`Base`也可以接受一个到`Derived`. 所以你的接口文件需要是：

```
%module test
%{
#include "test.h"
#include <boost/shared_ptr.hpp>
%}

%include <boost_shared_ptr.i>
%shared_ptr(Base)
%shared_ptr(Derived)
%include "test.h" 
```

它解决了被警告的问题并生成了在我的机器上编译良好的代码。

如果您不想告诉 SWIG 所有派生类型，最简单的方法是对 SWIG 完全隐藏该类型 - 只`Base`从您想要包装的内容中公开该类型。您可以通过几种方式做到这一点，最不打扰的是将接口文件更改为：

```
%module test
%{
#include "test.h"
#include <boost/shared_ptr.hpp>
%}

%include <boost_shared_ptr.i>
%ignore Derived;
%shared_ptr(Base)
%include "test.h" 
```

这只会导致`Base`被包装，因此无法编译的代码不再生成。

或者，由于这仍然需要`%ignore`每个类型，您可以修改头文件以`Derived`完全隐藏 SWIG 的声明/定义：

```
class Base
{
  int base_member;
};
#ifndef SWIG
class Derived : public Base
{
  int derived_member;
};
#endif 
```

如果您的项目被组织成每种类型（大致）有一个头文件，您可以通过简单地不使用`%include`除基本文件以外的文件来以更简单的方式执行此操作。

如果你仍然想包装它们，但不是作为一个 smart_ptr 我认为你将不得不接受会有很多`%smart_ptr`- 你可以自动生成它们吗？您也许可以使用[modules](http://www.swig.org/Doc2.0/Modules.html#Modules_nn1)玩游戏，但我认为这并不容易或值得付出努力。

# provisioning - 厨师：为什么跳过“include_recipe”步骤中的资源？

> ID：11380485
> 
> 赞同：28
> 
> 时间：2012-07-08T03:39:17.943
> 
> 标签：provisioning, chef-infra, vagrant

Chef 似乎以奇怪的顺序处理资源，导致我的构建失败。我的主要食谱（`mytardis-chef/site-cookbooks/recipes/default.rb`）是这样开始的：

```
include_recipe "build-essential"
include_recipe "mytardis::deps"
include_recipe "mytardis::nginx"
include_recipe "mytardis::postgresql" 
```

`mytardis-chef/cookbooks/build-essential/recipes/default.rb`看起来像这样：

```
case node['platform']
when "ubuntu","debian"
  %w{build-essential binutils-doc}.each do |pkg|
    package pkg do
      action :install
    end
  end
when "centos","redhat","fedora","scientific"
  %w{gcc gcc-c++ kernel-devel make}.each do |pkg|
    package pkg do
      action :install
    end
  end
end 
```

...（这是 的旧版本`https://github.com/opscode-cookbooks/build-essential/blob/master/recipes/default.rb`）

在运行时，由于我不明白的原因，这个构建基本配方被加载但没有执行：

```
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Mounting shared folders...
[default] -- v-root: /vagrant
[default] -- v-csr-3: /tmp/vagrant-chef-1/chef-solo-3/roles
[default] -- v-csc-2: /tmp/vagrant-chef-1/chef-solo-2/cookbooks
[default] -- v-csc-1: /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] -- v-csdb-4: /tmp/vagrant-chef-1/chef-solo-4/data_bags
[default] Running provisioner: Vagrant::Provisioners::ChefSolo...
[default] Generating chef JSON and uploading...
[default] Running chef-solo...
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: *** Chef 10.12.0 ***
[Sun, 08 Jul 2012 05:14:32 +0200] DEBUG: Building node object for lucid32
[Sun, 08 Jul 2012 05:14:32 +0200] DEBUG: Extracting run list from JSON attributes provided on command line
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Setting the run_list to ["recipe[mytardis]"] from JSON
[Sun, 08 Jul 2012 05:14:32 +0200] DEBUG: Applying attributes from json file
[Sun, 08 Jul 2012 05:14:32 +0200] DEBUG: Platform is ubuntu version 10.04
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Run List is [recipe[mytardis]]
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Run List expands to [mytardis]
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Starting Chef Run for lucid32
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Running start handlers
[Sun, 08 Jul 2012 05:14:32 +0200] INFO: Start handlers complete.
...
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe mytardis via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe default in cookbook mytardis
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe build-essential via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe default in cookbook build-essential
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe mytardis::deps via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe deps in cookbook mytardis
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe mytardis::nginx via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe nginx in cookbook mytardis
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe iptables via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe default in cookbook iptables
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe mytardis::postgresql via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe postgresql in cookbook mytardis
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe postgresql::server via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe server in cookbook postgresql
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Loading Recipe postgresql::client via include_recipe
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: Found recipe client in cookbook postgresql
[Sun, 08 Jul 2012 05:14:33 +0200] INFO: Processing package[postgresql-client] action install (postgresql::client line 37)
[Sun, 08 Jul 2012 05:14:33 +0200] DEBUG: package[postgresql-client] checking package status for postgresql-client
....
[Sun, 08 Jul 2012 05:14:45 +0200] ERROR: gem_package[pg] (postgresql::client line 42) has had an error
.
make
sh: make: not found 
```

也就是说，构建基本配方是“找到”和“加载”的，但首先“处理”的是 postgres 配方。而且由于没有运行 build-essential （安装 C 编译器），后者失败了。

我的 Vagrantfile 的相关部分如下所示：

```
 config.vm.provision :chef_solo do |chef|
     chef.log_level = :debug
     chef.cookbooks_path = ["mytardis-chef/site-cookbooks", "mytardis-chef/cookbooks"]
     chef.roles_path = "mytardis-chef/roles"
     chef.data_bags_path = "mytardis-chef/data_bags"
     chef.add_recipe "mytardis"    
  end 
```

我之前使用的是稍早版本的 Chef（可能是 10.10.0？）在那个版本中，build-essential 也没有运行，但 mytardis::deps 运行了。现在使用 Chef 10.12.0。物理机是 OSX，VM 是 Ubuntu Lucid。

所以，有几个问题：

1.  为什么 build-essential 没有被“处理”？
2.  这样做的正确方法是什么？（我没有写这些食谱，我知道他们为他们的作者工作或曾经为他们工作过。）
3.  站点食谱和食谱的“阴影”功能是否仍然有效？据说它已被弃用：[http](http://tickets.opscode.com/browse/CHEF-2308) : //tickets.opscode.com/browse/CHEF-2308（我尝试在 site-cookbooks/mytardis/recipes/build-essential 下创建一个符号链接，但没有乐趣）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-30T23:17:56.397

事实证明，这是 Chef 工作方式的一个非常正常（但记录不足）的部分：它编译所有内容，*然后*开始运行。除了一些配方（如 Postgres）在编译时跳入队列以实际安装，使用如下代码：

```
 action :nothing
end.run_action(:run) 
```

解决方案是任何需要在 Postgres 之前运行的东西也需要这样做。幸运的是，较新版本的[Build-essentials](http://community.opscode.com/cookbooks/build-essential)允许这样做。您在角色上设置属性，如下所示：

```
name "myapp"
run_list(
  "recipe[build-essential]",
  "recipe[myapp]"
)
default_attributes(
  "build_essential" => {
    "compiletime" => true
  }
) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-03T20:44:22.470

如果编写食谱，请将属性添加到您的属性文件中：

```
node.default['build_essential']['compiletime'] = true 
```

感谢上面的科林。

# ios - 使用 imageWithData 制作 UIImage 时如何缓存图像

> ID：11380490
> 
> 赞同：0
> 
> 时间：2012-07-08T03:41:38.343
> 
> 标签：ios, ios5, image-caching, imagenamed

我正在从网络下载一些图像并将其保存到我的应用程序的私有存储中，以显示在 tableview 单元格中。我有它的工作，但不幸的是，除非我正在使用：

```
[UIImage imageNamed: @"filename"]; 
```

我没有内置缓存，性能很慢。`imageWithData`使用or时如何实现自己的图像缓存`imageWithContentsOfFile`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T03:56:16.257

多年来，我在网上看到了更多关于这个问题的讨论，其中包含各种解决方案和理由。可以说最简单的解决方案在[这里](http://www.alexcurylo.com/blog/2009/01/13/imagenamed-is-evil/)。

简而言之，对于大量图像，`UIImage imageNamed`内存很粗糙，它建议使用简单的字典`imageWithContentsOfFile`来存储缓存的图像，您可以轻松地更好地控制内存使用。

# python - 如何创建总和为x的随机整数向量列表

> ID：11380491
> 
> 赞同：8
> 
> 时间：2012-07-08T03:41:56.863
> 
> 标签：python, list, random

创建一个总和为 X（例如 X=1000）的随机向量非常简单：

```
import random
def RunFloat():
    Scalar = 1000
    VectorSize = 30
    RandomVector = [random.random() for i in range(VectorSize)]
    RandomVectorSum = sum(RandomVector)
    RandomVector = [Scalar*i/RandomVectorSum for i in RandomVector]
    return RandomVector
RunFloat() 
```

上面的代码创建了一个向量，其值为浮点数，总和为 1000。

我很难创建一个简单的函数来创建一个向量，其值为整数且总和为 X（例如 X=1000*30）

```
import random
def RunInt():
    LowerBound = 600
    UpperBound = 1200
    VectorSize = 30
    RandomVector = [random.randint(LowerBound,UpperBound) for i in range(VectorSize)]
    RandomVectorSum = 1000*30
    #Sanity check that our RandomVectorSum is sensible/feasible
    if LowerBound*VectorSize <= RandomVectorSum and RandomVectorSum <= UpperBound*VectorSum:
        if sum(RandomVector) == RandomVectorSum:
            return RandomVector
        else:
            RunInt() 
```

有没有人有任何改进这个想法的建议？我的代码可能永远不会完成或遇到递归深度问题。

# 编辑（2012 年 7 月 9 日）

感谢 Oliver、mgilson 和 Dougal 的投入。我的解决方案如下所示。

1.  Oliver 对多项分布的想法很有创意
2.  简而言之，（1）很可能比其他解决方案更能输出某些解决方案。Dougal 通过大数定律的简单测试/反例证明了多项解空间分布不均匀或不正态。Dougal 还建议使用 numpy 的多项式函数，它为我省去了很多麻烦、痛苦和头痛。
3.  为了克服 (2) 的输出问题，我使用 RunFloat() 来给出更均匀的分布（我没有对此进行测试，所以它只是一个表面的外观）。与（1）相比，这有多大不同？我真的不知道副手。不过对我来说已经够用了。
4.  再次感谢 mgilson 提供不使用 numpy 的替代方法。

这是我为此编辑所做的代码：

## 编辑#2（2012 年 7 月 11 日）

我意识到正态分布没有正确实现，我已将其修改为以下内容：

```
import random
def RandFloats(Size):
    Scalar = 1.0
    VectorSize = Size
    RandomVector = [random.random() for i in range(VectorSize)]
    RandomVectorSum = sum(RandomVector)
    RandomVector = [Scalar*i/RandomVectorSum for i in RandomVector]
    return RandomVector

from numpy.random import multinomial
import math
def RandIntVec(ListSize, ListSumValue, Distribution='Normal'):
    """
    Inputs:
    ListSize = the size of the list to return
    ListSumValue = The sum of list values
    Distribution = can be 'uniform' for uniform distribution, 'normal' for a normal distribution ~ N(0,1) with +/- 5 sigma  (default), or a list of size 'ListSize' or 'ListSize - 1' for an empirical (arbitrary) distribution. Probabilities of each of the p different outcomes. These should sum to 1 (however, the last element is always assumed to account for the remaining probability, as long as sum(pvals[:-1]) <= 1).  
    Output:
    A list of random integers of length 'ListSize' whose sum is 'ListSumValue'.
    """
    if type(Distribution) == list:
        DistributionSize = len(Distribution)
        if ListSize == DistributionSize or (ListSize-1) == DistributionSize:
            Values = multinomial(ListSumValue,Distribution,size=1)
            OutputValue = Values[0]
    elif Distribution.lower() == 'uniform': #I do not recommend this!!!! I see that it is not as random (at least on my computer) as I had hoped
        UniformDistro = [1/ListSize for i in range(ListSize)]
        Values = multinomial(ListSumValue,UniformDistro,size=1)
        OutputValue = Values[0]
    elif Distribution.lower() == 'normal':
        """
        Normal Distribution Construction....It's very flexible and hideous
        Assume a +-3 sigma range.  Warning, this may or may not be a suitable range for your implementation!
        If one wishes to explore a different range, then changes the LowSigma and HighSigma values
        """
        LowSigma    = -3#-3 sigma
        HighSigma   = 3#+3 sigma
        StepSize    = 1/(float(ListSize) - 1)
        ZValues     = [(LowSigma * (1-i*StepSize) +(i*StepSize)*HighSigma) for i in range(int(ListSize))]
        #Construction parameters for N(Mean,Variance) - Default is N(0,1)
        Mean        = 0
        Var         = 1
        #NormalDistro= [self.NormalDistributionFunction(Mean, Var, x) for x in ZValues]
        NormalDistro= list()
        for i in range(len(ZValues)):
            if i==0:
                ERFCVAL = 0.5 * math.erfc(-ZValues[i]/math.sqrt(2))
                NormalDistro.append(ERFCVAL)
            elif i ==  len(ZValues) - 1:
                ERFCVAL = NormalDistro[0]
                NormalDistro.append(ERFCVAL)
            else:
                ERFCVAL1 = 0.5 * math.erfc(-ZValues[i]/math.sqrt(2))
                ERFCVAL2 = 0.5 * math.erfc(-ZValues[i-1]/math.sqrt(2))
                ERFCVAL = ERFCVAL1 - ERFCVAL2
                NormalDistro.append(ERFCVAL)  
            #print "Normal Distribution sum = %f"%sum(NormalDistro)
            Values = multinomial(ListSumValue,NormalDistro,size=1)
            OutputValue = Values[0]
        else:
            raise ValueError ('Cannot create desired vector')
        return OutputValue
    else:
        raise ValueError ('Cannot create desired vector')
    return OutputValue
#Some Examples        
ListSize = 4
ListSumValue = 12
for i in range(100):
    print RandIntVec(ListSize, ListSumValue,Distribution=RandFloats(ListSize)) 
```

上面的代码可以在[github](https://github.com/afbase/Pyllumina2.1/blob/master/DistributionMaker.py)上找到。这是我为学校建造的课程的一部分。user1149913，也发布了一个很好的问题解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T04:00:34.113

我建议不要递归地这样做：

当您递归采样时，第一个索引中的值具有更大的可能范围，而后续索引中的值将受第一个值的约束。这将产生类似于[指数分布](http://en.wikipedia.org/wiki/Exponential_distribution)的东西。

相反，我建议从[多项分布](http://en.wikipedia.org/wiki/Multinomial_distribution)中抽样。这将平等对待每个索引，约束总和，强制所有值为整数，并从遵循这些规则的所有可能配置中统一采样（注意：可能以多种方式发生的配置将通过它们可能发生的方式数加权）。

为了帮助您将问题与多项式符号合并，总和为 n（整数），因此每个 k 值（每个索引一个，也是整数）必须介于 0 和 n 之间。然后按照[这里](http://en.wikipedia.org/wiki/Multinomial_distribution#Sampling_from_a_multinomial_distribution)的食谱。

（或者使用[numpy.random.multinomial](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.multinomial.html)作为@Dougal 有用的建议）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T06:27:07.493

我刚刚将@Oliver[的多项式方法](https://stackoverflow.com/a/11380564/344821)和[@mgilson 的代码](https://stackoverflow.com/a/11380550/344821)分别运行了一百万次，长度为3 的向量总和为10，并查看了每个可能结果出现的次数。两者都非常不均匀：

![](../Images/40b8bea1c2f9b1a34f3114828f27ac3d.png)

（我将展示索引方法。）

这有关系吗？取决于您是否想要“具有此属性的任意向量，通常每次都不同”与每个有效向量的可能性相同。

在多项式方法中，当然比（事实证明的可能性高 4200 倍）`3 3 4`要大得多。`0 0 10`mgilson 的偏见对我来说不太明显，但`0 0 10`它的排列是迄今为止最不可能的（每百万次只有约 750 次）；最常见的是`1 4 5`及其排列；不知道为什么，但它们肯定是最常见的，其次是`1 3 6`. 它通常会从这个配置中过高的总和开始（预期 15），但我不确定为什么会这样减少......

在可能的向量上获得统一输出的一种方法是拒绝方案。`K`要使用 sum获得长度向量`N`，您需要：

1.  在 和 之间均匀且`K`独立地对具有整数元素的长度向量进行采样。`0``N`
2.  重复直到向量的和为`N`。

显然，对于非小型`K`和`N`.

另一种方法是为所有可能的向量分配一个编号；有`(N + K - 1) choose (K - 1)`这样的向量，所以只需在该范围内选择一个随机整数来决定你想要哪个。对它们进行编号的一种合理方法是字典顺序：`(0, 0, 10), (0, 1, 9), (0, 2, 8), (0, 3, 7), ...`.

请注意，`K`向量的最后一个 (th) 元素由第一个元素的和唯一确定`K-1`。

我敢肯定有一个很好的方法可以立即跳转到此列表中的任何索引，但我现在想不出来......列举可能的结果并遍历它们会起作用，但可能会比必要的慢. 这是一些代码（尽管我们实际上在这里使用了反向词典排序......）。

```
from itertools import islice, combinations_with_replacement
from functools import reduce
from math import factorial
from operator import mul
import random

def _enum_cands(total, length):
    # get all possible ways of choosing 10 of our indices
    # for example, the first one might be  0000000000
    # meaning we picked index 0 ten times, for [10, 0, 0]
    for t in combinations_with_replacement(range(length), 10):
        cand = [0] * length
        for i in t:
            cand[i] += 1
        yield tuple(cand)

def int_vec_with_sum(total, length):
    num_outcomes = reduce(mul, range(total + 1, total + length)) // factorial(length - 1)
    # that's integer division, even though SO thinks it's a comment :)
    idx = random.choice(range(num_outcomes))
    return next(islice(_enum_cands(total, length), idx, None)) 
```

如上面的直方图所示，这实际上对可能的结果是一致的。它也很容易适应任何单个元素的上限/下限；只需将条件添加到`_enum_cands`.

这比其他任何一个答案都慢：对于 sum 10 length 3，我得到

*   14.7 我们使用`np.random.multinomial`,
*   33.9 我们使用 mgilson 的，
*   88.1 我们采用这种方法

我预计随着可能结果数量的增加，差异会变得更糟。

如果有人想出一个漂亮的公式来以某种方式索引这些向量，那就更好了......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T03:56:50.110

这是一个非常简单的实现。

```
import random
import math

def randvec(vecsum, N, maxval, minval):
    if N*minval > vecsum or N*maxval < vecsum:
        raise ValueError ('Cannot create desired vector')

    indices = list(range(N))
    vec = [random.randint(minval,maxval) for i in indices]
    diff = sum(vec) - vecsum # we were off by this amount.

    #Iterate through, incrementing/decrementing a random index 
    #by 1 for each value we were off.
    while diff != 0:  
        addthis = 1 if diff > 0 else -1 # +/- 1 depending on if we were above or below target.
        diff -= addthis

        ### IMPLEMENTATION 1 ###
        idx = random.choice(indices) # Pick a random index to modify, check if it's OK to modify
        while not (minval < (vec[idx] - addthis) < maxval):  #operator chaining.  If you don't know it, look it up.  It's pretty cool.
            idx = random.choice(indices) #Not OK to modify.  Pick another.

        vec[idx] -= addthis #Update that index.

        ### IMPLEMENTATION 2 ###
        # random.shuffle(indices)
        # for idx in indices:
        #    if minval < (vec[idx] - addthis) < maxval:
        #        vec[idx]-=addthis
        #        break
        #
        # in situations where (based on choices of N, minval, maxval and vecsum)
        # many of the values in vec MUST BE minval or maxval, Implementation 2
        # may be superior.

    return vec

a = randvec(1000,20,100,1)
print sum(a) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T15:27:22.590

从 N 个元素的分区集中均匀采样到 K 个 bin 中的最有效方法是使用动态规划算法，即 O(KN)。有多种选择 (http://mathworld.wolfram.com/Multichoose.html) 的可能性，因此枚举每一个会​​非常慢。拒绝抽样和其他蒙特卡罗方法也可能非常缓慢。

人们提出的其他方法，例如从多项式中抽样，不会从均匀分布中抽取样本。

令 T(n,k) 为将 n 个元素划分为 k 个 bin 的数量，然后我们可以计算递归

```
T(n,1)=1 \forall n>=0
T(n,k)=\sum_{m<=n} T(n-m,k-1) 
```

要对总和为 N 的 K 个元素进行采样，请从 K 多项式分布中采样，在递归中“向后”进行： **编辑：**在抽取每个样本之前，应将下面多项式中的 T 归一化为总和为 1。

```
n1 = multinomial([T(N,K-1),T(N-1,K-1),...,T(0,K-1)])
n2 = multinomial([T(N-n1,K-1),T(N-n1-1,K-1),...,T(0,K-1)])
...
nK = multinomial([T(N-sum([n1,...,n{k-1}]),1),T(N-sum([n1,...,n{k-1}])-1,1),...,T(0,1)]) 
```

注意：我允许对 0 进行采样。

此过程类似于从分段半马尔可夫模型（http://www.gatsby.ucl.ac.uk/%7Echuwei/paper/icml103.pdf）中采样一组隐藏状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T11:50:18.870

只是为了给你另一种方法，实现 a`partition_function(X)`并随机选择一个介于 0 和长度之间的数字，`partition_function(1000)`然后你就有了。现在您只需要找到一种有效的方法来计算配分函数。这些链接可能会有所帮助：

[http://code.activestate.com/recipes/218332-generator-for-integer-partitions/](http://code.activestate.com/recipes/218332-generator-for-integer-partitions/)

[http://oeis.org/A000041](http://oeis.org/A000041)

**编辑：** *这是一个简单的代码：*

```
import itertools
import random
all_partitions = {0:set([(0,)]),1:set([(1,)])}

def partition_merge(a,b):
    c = set()
    for t in itertools.product(a,b):
        c.add(tuple(sorted(list(t[0]+t[1]))))
    return c

def my_partition(n):
    if all_partitions.has_key(n):
        return all_partitions[n]
    a = set([(n,)])
    for i in xrange(1,n/2+1):
        a = partition_merge(my_partition(i),my_partition(n-i)).union(a)
    all_partitions[n] = a
    return a

if __name__ == '__main__':
    n = 30
    # if you have a few years to wait uncomment the next line
    # n = 1000
    a = my_partition(n)
    i = random.randint(0,len(a)-1)
    print(list(a)[i]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T09:34:29.890

这个版本将给出一个统一的分布：

```
from random import randint

def RunInt(VectorSize, Sum):
   x = [randint(0, Sum) for _ in range(1, VectorSize)]
   x.extend([0, Sum])
   x.sort()
   return [x[i+1] - x[i] for i in range(VectorSize)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-02T13:56:27.977

用什么：

```
import numpy as np
def RunInt(VectorSize, Sum):
    a = np.array([np.random.rand(VectorSize)])
    b = np.floor(a/np.sum(a)*Sum) 
    for i in range(int(Sum-np.sum(b))):
        b[0][np.random.randint(len(b[0]))] += 1
    return b[0] 
```

# jquery - jQuery 动画 div 以显示完整图像、重叠内容并且不向下移动内容

> ID：11380494
> 
> 赞同：0
> 
> 时间：2012-07-08T03:42:37.393
> 
> 标签：jquery, html, jquery-animate, sliding

基本上我所拥有的是 4 个 div，每个都从一个设定的高度开始，当您将鼠标悬停在它们上时，它们会进行动画处理以使 div 更高，从而完整地显示背景图像，而不仅仅是最初显示的图像的潜伏高峰。你可以看看我在这里得到了什么：

[http://jsfiddle.net/u2DK7/](http://jsfiddle.net/u2DK7/)

基本上我想要它做的是当您将鼠标悬停在其中一个框上时，它会扩展内容而不是向下推。我曾短暂地尝试过绝对定位，但这似乎不是我所需要的。

我想知道的另一件事是是否有任何方法可以使动画指令工作一次。虽然来回徘徊，然后观看您排队的动画的手风琴风格效果非常酷，但这并不是我真正想要的工作方式！

顺便说一句，我需要保留在 html 代码中的样式标签，这样我就可以在不设置 4 个单独的 div 的情况下更改背景图像！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:01:15.417

我选择绝对定位元素，并根据之前的兄弟元素计算它们与左侧的距离。

[在这里工作 jsFiddle](http://jsfiddle.net/u2DK7/1/)

**jQuery**

```
$.each($('.fourboxes'), function(i,v){
  if(i == 0){
   $(v).css('left', '10px');
  }else{
    var prevDiv = $(this).prev('.fourboxes');
    var pWidth = prevDiv.width();
    var pleft = prevDiv.position().left;
    $(v).css({'left' : pWidth + pleft + 10 +"px"});
  }        
}); 
```

**CSS**

```
.fourboxes {
    position:absolute;
        left:10px;
    height: 200px;
    width: 139px;
    border:1px solid red;
    background-color:blue !important; 
```

}

# php - 将内联 CSS 样式添加到 Magento 导航列表项

> ID：11380496
> 
> 赞同：0
> 
> 时间：2012-07-08T03:42:47.307
> 
> 标签：php, css, magento, navigation, block

我想在我的 Magento 导航 LI 中添加一些内联 CSS 样式（例如填充）。`renderCategoriesMenuHtml()`对in的调用`top.phtml`导致了我，`Navigation.php`但我似乎无法在不引发错误的情况下添加另一个参数。

对此的任何帮助都将非常棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:46:02.687

我不得不同意所有说内联 CSS 是个坏主意的人。如果您想添加一些自己的额外 CSS，只需将其放在与标准样式表不同的样式表中，然后将其作为附加样式表链接到标准样式表之后。请记住，每个页面可以有多个样式表，并且任何冲突都将通过最后加载的那个来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T00:20:25.010

尝试使用本地 Navigation.php 覆盖 Navigation.php 并修改该函数 renderCategoriesMenuHtml()

如果不起作用，jQuery 是您的朋友 :-) 获取菜单项并使用 jQuery 添加新的 css 类并将该类添加到您的 css 文件中。你为什么要使用内联？不过，如果您通过 javascript 使用内联 css 也没关系。

# linux - 代码段寄存器在系统调用中的作用

> ID：11380498
> 
> 赞同：0
> 
> 时间：2012-07-08T03:43:04.187
> 
> 标签：linux

进行系统调用时，是否使用代码段寄存器或控制寄存器检查特权级别？

intel cpus 中的代码段寄存器用于分段目的。我不清楚 linux 中如何处理分页和 intel x86 机制。

如果有人解释了在进行系统调用以更改级别时cpu中发生的情况，那将是非常有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:28:14.303

Linux 从未使用 286 样式分段来分隔进程，或者以其他方式使虚拟内存有趣地分段，而是从一开始就使用 386 样式分页。转移到内核态（syscall）曾经是一条简单的`int`指令，根据中断表转移执行，使CPU进入内核态（保护级别0）。然而，CPU 仍然必须重新加载段描述符以“了解”新的保护级别以及新段的位置（尽管它始终是 CPU 只是“不知道”的同一个虚拟内核模式段。）。

AMD 和 Intel 提出了[优化指令](http://www.codeguru.com/cpp/misc/misc/system/article.php/c8223/System-Call-Optimization-with-the-SYSENTER-Instruction.htm)，以使这个过程更快，这就是这个平台上所有操作系统在现实中使用的。

然后内核代码必须做更多的工作来将寄存器保存在堆栈上并将它们初始化为新值，而这并没有改变。但这通常不被理解为系统调用过程的一部分。

> 进行系统调用时，是否使用代码段寄存器或控制寄存器检查特权级别？

特权级别是从通过中断表引用的*新代码段**获得*的，而不是检查的，或者在优化的情况下，是预加载到 MSR（非内核代码无法访问的 CPU 寄存器）中的。

 *另一种说法是，切换到级别 0 会在 CPU 级别自动发生，但是段描述符和/或 MSR 需要由内核预先安排，从而真正导致内核执行陷阱处理程序，而不仅仅是一个一般性保护错误。*

# ios - iphone如何高效运行10多个并发线程？

> ID：11380502
> 
> 赞同：1
> 
> 时间：2012-07-08T03:44:14.863
> 
> 标签：ios, multithreading

我想解析一个 EPUB 文件，将文件读入内存后，我需要解析内容。这本书可能有10多个章节；我为每一章创建了 NSOperation 实例，并运行并发，全部基于 CPU 计算。

我应该有 2 个线程，每个线程有 5 个要处理的章节，还是每个线程有 10 个线程？哪个更有效率？不同的设备会有不同的策略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T03:47:14.390

> 我应该有 2 个线程，每个线程有 5 个要处理的章节，还是每个线程有 10 个线程？哪个更有效率？

您应该做的是创建一个可能有 2 或 3 个线程的工作池、一个队列，并让每个线程一次从队列中拉出一个任务并执行它。工作线程的数量应与设备上的内核数量成正比。（实际的最佳数量将取决于处理任务是否需要进行可能导致线程阻塞一段时间的 I/O ...）

为每一章创建一个线程会消耗资源（线程堆栈）而不会加速。只有当你有足够的物理内核，线程实际上可以在不同的内核上并行执行时，你才能获得加速。

将章节预分配给线程并不是一个好主意，因为您可能会为一个线程分配比另一个线程少得多的工作负载。

* * *

实际上，如果可以廉价地估算出处理每一章的工作量，那么在跨线程调度工作负载方面可能会比简单的队列做得更好。但是否值得付出努力是值得商榷的。

# php - 在 PHP 中包含一个已经打开的文件？

> ID：11380513
> 
> 赞同：1
> 
> 时间：2012-07-08T03:47:14.643
> 
> 标签：php, stream, include

我想要`include`一个已经打开的文件。由于 include 想要一个文件名，这似乎并不重要。

[我可以在http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)上找到的唯一内容是以某种方式`fopen`将文件描述符从`php://fd/$fd`. 我不能再进一步了。

编辑：显然不清楚，我想重用文件描述符而不是重新打开文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:01:45.863

这可能对你有用。根据流的打开方式，它可能会返回完整路径名或仅返回基本名，因此您可能需要进行一些检查以检查并确保提供了正确的路径。（或者脚本从正确的目录运行。）

```
<?php

    $fh = fopen('include_source.php', 'r');
    $md = stream_get_meta_data($fh);
    include $md['uri'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T03:59:50.630

您可以使用临时文件：

```
$return_to_position = ftell($fp);
$temp_path = tempnam('/tmp', 'INC');
$temp_fp = fopen($temp_path, 'w');
rewind($fp);
while(!feof($fp)) {
   fwrite($temp_fp, fread($fp, 1024));
}
fclose($temp_fp);
fseek($fp, $return_to_position);
include $temp_path; 
```

**编辑**作为内存中的替代品

类似于我之前的答案，但完全在记忆中......并使用*可怕*的eval()... （**不要讨厌 eval**：就安全性而言，这相当于以前的答案）（我的意思是，一般让我感到不安......但尝试解决它很酷;-)

**注意**eval 不喜欢 php 标签，如果文件有它们，这可能不起作用......

```
$return_to_position = ftell($fp);
rewind($fp);
$fp_php_code = "";
while(!feof($fp)) {
  $fp_php_code .= fread($fp, 1024);
}
fseek($return_to_position);
eval($fp_php_code); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T04:29:58.090

我不确定你在追求什么，但如果它类似于动态添加类（而不是过程代码），你可以探索*实验性* [PECL 扩展 bcompiler_read](http://us2.php.net/manual/en/function.bcompiler-read.php)

显然你可以给它一个文件描述符，它会读取它并创建类......看起来很酷。

还有[runkit](http://us2.php.net/manual/en/book.runkit.php)，它允许对多个方面进行运行时操作，包括类层次结构。也是实验性的。

# python - 使用 Python 在 Facebook 粉丝页面上发布

> ID：11380520
> 
> 赞同：1
> 
> 时间：2012-07-08T03:50:38.713
> 
> 标签：python, facebook, facebook-graph-api

我尝试了一些关于如何在 Facebook 墙上发布的代码。但我想做一些不同的事情。我想知道在我的 Facebook 粉丝页面上发布。以下代码仅发布在我的个人资料中。谁能给我一个在粉丝页面发布的线索？

```
#!/usr/bin/python

import facebook
import urllib 
import urlparse

FACEBOOK_APP_ID = 'X'
FACEBOOK_APP_SECRET = 'Y'
FACEBOOK_PROFILE_ID = 'MyProfileId (**not page id, right?**)'

oauth_args = dict(client_id     = FACEBOOK_APP_ID,
                  client_secret = FACEBOOK_APP_SECRET,
                  grant_type    = 'client_credentials')

oauth_response = urllib.urlopen('https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(oauth_args)).read()                                  
page_token='PAGE TOKEN GOT INhttps://graph.facebook.com/SITE' 
fields=access_token
attach = {
  "name": 'Hello world',
  "link": 'http://www.example.com',
  "caption": 'test post',
  "description": 'some test',
  "picture" : 'http://www.example.com/picture.jpg',
  "page_token" : page_token
}
try:
    oauth_access_token = urlparse.parse_qs(str(oauth_response))['access_token'][0]
except KeyError:
    raise
print oauth_access_token
facebook_graph = facebook.GraphAPI(oauth_access_token)
try:
    response = facebook_graph.put_wall_post('', attachment=attach,profile_id = FACEBOOK_PROFILE_ID)
except facebook.GraphAPIError as e:
    print e 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:04:23.830

我更正了代码，这是解决方案：

```
#!/usr/bin/python
# coding: utf-8

import facebook
import urllib 
import urlparse

access_token_page='X'
FACEBOOK_APP_ID = 'Y'
FACEBOOK_APP_SECRET = 'Z'
FACEBOOK_PROFILE_ID = 'W'

oauth_args = dict(client_id     = FACEBOOK_APP_ID,
                  client_secret = FACEBOOK_APP_SECRET,
                  grant_type    = 'client_credentials')

oauth_response = urllib.urlopen('https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(oauth_args)).read()                                  

attach = {
  "name": 'Hello world',
  "link": 'http://www.example.com',
  "caption": 'test post',
  "description": 'some test',
  "picture" : 'http://www.example.com/picture.jpg',
}

facebook_graph = facebook.GraphAPI(access_token_page)
try:
    response = facebook_graph.put_wall_post('', attachment=attach)
except facebook.GraphAPIError as e:
    print e 
```

有关身份验证的信息可以在：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

# c++ - C++ 带比较功能

> ID：11380521
> 
> 赞同：1
> 
> 时间：2012-07-08T03:50:39.443
> 
> 标签：c++, templates, search, comparison

我正在尝试实现自定义二进制搜索来运行日期向量。

我的二进制搜索功能如下：

```
template <typename RandomAccessIterator, typename Value, typename Comparer>
inline int binary_search(RandomAccessIterator const  first, RandomAccessIterator const  last, Value const& value, Comparer comparer)
{
    RandomAccessIterator it(std::lower_bound(first, last, value, comparer));
    if (it == last || comparer(*it, value) || comparer(value, *it))
      return distance(first,last);

    return distance(first,it);
} 
```

我使用的比较器定义为：

```
template <class T>
inline bool cmp(T lhs,T rhs)
{
  return lhs<rhs;
} 
```

这两个编译没有问题，但是，当我尝试使用以下代码调用 binary_search 函数时出现编译错误：

```
binary_search(date_list.begin(),date_list.end(),date2,cmp) 
```

其中 date_list 是一个包含日期的向量，date2 是一个 int。

确切的错误信息是：

```
error: no matching function for call to ?binary_search(__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, __gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, int&, <unresolved overloaded function type>)? 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T03:56:58.613

您`cmp`在 C++ 需要值的上下文中传递模板 ( ) 的名称。除了你不能这样做之外，这是一个先有鸡还是先有蛋的问题：什么类型是`cmp`？一个函数的类型取决于它的参数，这个函数可以接受任何类型的参数。那么编译器为模板参数推断出什么类型`Comparer`呢？它必须查看函数的主体才能确定您所期望`int`的，但这并不总是可能的——编译器并不总是可以访问模板的源代码。

您需要专门选择要传递的函数模板的类型。例如：

```
binary_search(date_list.begin(), date_list.end(), date2, cmp<int>); 
```

# javascript - javascript 从复杂的 JSON 中获取数据

> ID：11380523
> 
> 赞同：0
> 
> 时间：2012-07-08T03:50:57.590
> 
> 标签：javascript

有一个json（#json）如下，在学生部分，前两个是一个组，最后两个是一个组。（按一组编号分组。如1号和2号是一组） .
问题是我需要从学生部分获取数据并制作 2 个表（取决于有多少组编号，在本例中为 2 个）。如何以编程方式修改 json 数据结构，以便我可以获取数据以执行上述操作？

表（#table1）看起来像：
不。名字
1 汤姆
2 杰基

不。名字
1 汤姆
2 杰基

#json

```
{
"people": {
    "student": [{
        "name": "tom"
        "no.": "1"
        "other": "a"
    },{
        "name": "tom"
        "no.": "1"
        "other": "e"
    },{
        "name": "jack"
        "no.": "2"
        "other": "d"
    },{
        "name": "tom"
        "no.": "1"
        "other": "c"
    },{
        "name": "tom"
        "no.": "1"
        "other": "d"
    },{
        "name": "jack"
        "no.": "2"
        "other": "g"
    }]      
}} 
```

* * *

这是我的 jsRender 模板：

```
 <table>      
    <thead>
        <tr><td>Table 1</td></tr> 
        <tr><td>no.</td><td>name</td></tr> 
    </thead> 
    <tbody>
    {{for student}}
        <td>{{>no.}}</td>
        <td>{{>name}}</td>
    {{/for}}
    </tbody>
</table> 
```

它将输出：

```
no. name
1 tom
2 jacky
1 tom
2 jacky 
```

如何修改我的模板以使输出类似于#table1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:19:36.677

你需要这样的东西：

```
var yourJSON; // All JSON data
var studentData = yourJSON.people.student; // Student array
var tableIndex = 1; // Index for table name

// Loop to print student data
for (var i = 0, length = studentData.length; i < length; i++) {
    if (studentData[i]['no.'] == '1') {
        if (tableIndex > 1) {
            print('</tbody></table>');
        }
        print('<table>' +
            '<thead>' +
                '<tr>' +
                    '<td>Table ' + tableIndex + '</td>' +
                '</tr>' + 
                '<tr>' +
                    '<td>no.</td>' +
                    '<td>name</td>' +
                '</tr>' + 
            '</thead>' +
            '<tbody>');
        tableIndex++;
    }
    print('<tr><td>' + studentData[i]['no.'] + '</td>');
    print('<td>' + studentData[i]['name'] + '</td></tr>');
}

print('</tbody></table>'); // Closing the last table 
```

我不知道您的模板引擎是如何工作的，所以我使用打印功能来显示需要在模板中添加的内容。

# java - Ubuntu 12.04 和 Netbeans 上的 RXTX

> ID：11380526
> 
> 赞同：2
> 
> 时间：2012-07-08T03:51:27.810
> 
> 标签：java, ubuntu, netbeans

希望从[http://rxtx.qbang.org/](http://rxtx.qbang.org/)添加 RXTXcomm.jar（javax.comm 替换） 我可以毫无问题地将 RXTXcomm.jar 添加到项目库中，但出现错误：

> java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path throw while loading gnu.io.RXTXCommDriver

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T04:24:45.017

您是否尝试过安装 librxtx-java 包？

```
$ aptitude search rxtx
v   lib-rxtx-java                              -                                                     
v   lib-rxtx-java:i386                         -                                                     
p   librxtx-java                               - Full Java CommAPI implementation                    
p   librxtx-java:i386                          - Full Java CommAPI implementation                    
p   librxtx-java-dbg                           - Full Java CommAPI implementation, Debugging Symbols 
p   librxtx-java-dbg:i386                      - Full Java CommAPI implementation, Debugging Symbols 
```

可能你需要这个 .so 文件：

```
$ apt-file list librxtx-java | grep jni
librxtx-java: /usr/lib/jni/librxtxI2C-2.2pre1.so
librxtx-java: /usr/lib/jni/librxtxI2C.so
librxtx-java: /usr/lib/jni/librxtxParallel-2.2pre1.so
librxtx-java: /usr/lib/jni/librxtxParallel.so
librxtx-java: /usr/lib/jni/librxtxRS485-2.2pre1.so
librxtx-java: /usr/lib/jni/librxtxRS485.so
librxtx-java: /usr/lib/jni/librxtxRaw-2.2pre1.so
librxtx-java: /usr/lib/jni/librxtxRaw.so
librxtx-java: /usr/lib/jni/librxtxSerial-2.2pre1.so
librxtx-java: /usr/lib/jni/librxtxSerial.so
librxtx-java-dbg: /usr/lib/debug/usr/lib/jni/librxtxI2C-2.2pre1.so
librxtx-java-dbg: /usr/lib/debug/usr/lib/jni/librxtxParallel-2.2pre1.so
librxtx-java-dbg: /usr/lib/debug/usr/lib/jni/librxtxRS485-2.2pre1.so
librxtx-java-dbg: /usr/lib/debug/usr/lib/jni/librxtxRaw-2.2pre1.so
librxtx-java-dbg: /usr/lib/debug/usr/lib/jni/librxtxSerial-2.2pre1.so 
```

您可以使用以下方式安装它：

> $ sudo apt-get 安装 librxtx-java

之后，您可能必须将 /usr/share/java/RXTXcomm.jar 添加到您的类路径中。

```
$ apt-file list librxtx-java | grep jar
librxtx-java: /usr/share/java/RXTXcomm-2.2pre2.jar
librxtx-java: /usr/share/java/RXTXcomm.jar 
```

在这里你可以找到 gnu.io.CommPort 类

```
$ jar tvf /usr/share/java/RXTXcomm.jar | grep CommPort
  1453 Fri Nov 11 10:39:50 CET 2011 gnu/io/CommPort.class
   818 Fri Nov 11 10:39:50 CET 2011 gnu/io/CommPortEnumerator.class
  5753 Fri Nov 11 10:39:50 CET 2011 gnu/io/CommPortIdentifier.class
   340 Fri Nov 11 10:39:50 CET 2011 gnu/io/CommPortOwnershipListener.class 
```

您可以按照[Netbeans 文档](http://netbeans.org/kb/docs/java/project-setup.html#projects-configuring)将 jar 添加到类路径。

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:01:16.993

在 12.04 上使用 Netbeans 7.2 我所做的就是像这样安装包：`sudo apt-get install librxtx-java`

然后，在 Netbeans 项目中剩下要做的就是添加实际的 jar 文件，`/usr/share/java/rxtxcomm.jar`通过打开项目属性、导航到**库**并使用**Add JAR/Folder**按钮添加文件，该文件位于类路径中。

可以了，好了。

# java - Struts 应用程序无法检测到动作类

> ID：11380530
> 
> 赞同：0
> 
> 时间：2012-07-08T03:51:57.683
> 
> 标签：java, struts2

我的 Struts 应用程序无法检测到动作类。

我的代码如下：

**struts.xml**

```
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.enable.DynamicMethodInvocation"
        value="false" />
    <constant name="struts.devMode" value="false" />

    <package name="default" extends="struts-default" namespace="/">

        <action name="add"
            class="net.viralpatel.contact.view.ContactAction" method="add">
            <result name="success" type="chain">index</result>
            <result name="input" type="chain">index</result>
        </action>

        <action name="delete"
            class="net.viralpatel.contact.view.ContactAction" method="delete">
            <result name="success" type="chain">index</result>
        </action>

        <action name="index"
            class="net.viralpatel.contact.view.ContactAction">
            <result name="success">index.jsp</result>
        </action>
    </package>
</struts> 
```

**索引.jsp**

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<html>
<head>
    <title>Contact Manager - Struts2 Hibernate Example</title>
</head>
<body>

<h1>Contact Manager</h1>
<s:actionerror/>

<s:form action="add" method="post">
    <s:textfield name="contact.firstName" label="Firstname"/>
    <s:textfield name="contact.lastName" label="Lastname"/>
    <s:textfield name="contact.emailId" label="Email"/>
    <s:textfield name="contact.cellNo" label="Cell No."/>
    <s:textfield name="contact.website" label="Homepage"/>
    <s:textfield name="contact.birthDate" label="Birthdate"/>
    <s:submit value="Add Contact" align="center"/>
</s:form>

<h2>Contacts</h2>
<table>
<tr>
    <th>Name</th>
    <th>Email</th>
    <th>Cell No.</th>
    <th>Birthdate</th>
    <th>Homepage</th>
    <th>Delete</th>
</tr>
<s:iterator value="contactList" var="contact">
    <tr>
        <td><s:property value="lastName"/>, <s:property value="firstName"/> </td>
        <td><s:property value="emailId"/></td>
        <td><s:property value="cellNo"/></td>
        <td><s:property value="birthDate"/></td>
        <td><a href="<s:property value="website"/>">link</a></td>
        <td><a href="delete?id=<s:property value="id"/>">delete</a></td>
    </tr> 
</s:iterator>
</table>
</body>
</html> 
```

**动作类**

```
package net.viralpatel.contact.view;
import java.util.List;

import net.viralpatel.contact.controller.ContactManager;
import net.viralpatel.contact.model.Contact;

import com.opensymphony.xwork2.ActionSupport;
public class ContactAction extends ActionSupport {
    private static final long serialVersionUID = 9149826260758390091L;
    private Contact contact;
    private List<Contact> contactList;
    private Long id;

    private ContactManager contactManager;

    public ContactAction() {
        contactManager = new ContactManager();
    }

    public String execute() {
        this.contactList = contactManager.list();
        System.out.println("execute called");
        return SUCCESS;
    }

    public String add() {
        System.out.println(getContact());
        try {
            contactManager.add(getContact());
        } catch (Exception e) {
            e.printStackTrace();
        }
        this.contactList = contactManager.list();
        return SUCCESS;
    }

    public String delete() {
        contactManager.delete(getId());
        return SUCCESS;
    }

    public Contact getContact() {
        return contact;
    }

    public List<Contact> getContactList() {
        return contactList;
    }

    public void setContact(Contact contact) {
        this.contact = contact;
    }

    public void setContactList(List<Contact> contactsList) {
        this.contactList = contactsList;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

} 
```

提交表单时，我收到一条错误消息：

> HTTP 状态 404 - /StrutsStartup/add

# objective-c - 我如何知道我的程序是否启用了 ARC？

> ID：11380533
> 
> 赞同：19
> 
> 时间：2012-07-08T03:52:40.057
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting

我使用 Xcode 项目向导创建了一个支持 ARC 的项目。与没有 ARC 支持的程序相比，我没有注意到任何差异。是否有任何提示可以告诉我我的程序是否支持 ARC？

我正在使用 XCode 4.2.1 Build 4D502

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-08T03:56:07.580

您可以使用`__has_feature`，也许记录项目是否在控制台中有 ARC，如下所示：

```
#if __has_feature(objc_arc)
    // ARC is On
    NSLog(@"ARC on");

#else
    // ARC is Off
    NSLog(@"ARC off");

#endif 
```

或者，不要只记录 ARC 是否打开，如果 ARC 开启（或关闭），请尝试让编译器引发错误，如下所示：

```
#if  ! __has_feature(objc_arc)
    #error This file must be compiled with ARC. Use -fobjc-arc flag (or convert project to ARC).
#endif 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-08T05:05:07.320

如果您只是想知道您的项目是否有 ARC，我建议您使用 jpalten 的答案。如果您希望您的代码仅使用 ARC 构建，我建议使用 qegal。

但是，如果您想知道该设置在 Xcode 中的位置：

1.  在导航器中选择您的项目。这将打开项目编辑器。
2.  在项目编辑器中，选择您的目标。
3.  在项目编辑器中，单击构建设置（如果尚未选择）。
4.  在项目编辑器中，单击搜索框并输入`OBJC_ARC`。

这将在构建设置中留下一行显示，**Objective-C Automatic Reference Counting**或**CLANG_ENABLE_OBJC_ARC**（取决于您是显示设置描述还是名称）。如果它设置为 YES，则您已打开 ARC。

这是您的目标选择是否使用 ARC。请注意，每个**文件**都可以使用不同的设置进行编译。这**不是**你问的，但既然我们已经有了三个答案，我想我会阻止可能的第四个。:)

要查看哪些文件会覆盖 ARC 设置：

1.  在导航器中选择您的项目。这将打开项目编辑器。
2.  在项目编辑器中，选择您的目标。
3.  在项目编辑器中，单击**Build Phases**（不是 Build Settings）。
4.  展开**编译源**构建阶段。

在这里，您可以看到每个文件的编译器标志。具有该设置是否使用 ARC 的文件将包括**-fno-objc-arc**或**-fobjc-arc**，用于分别指定 MRR 或 ARC。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-08T04:50:33.170

或者只测试一次，在你的代码中添加这个：

```
NSString* dummy = [[[NSString alloc] init] autorelease]; 
```

如果您使用 ARC，这应该会引发错误。如果是这样，则启用了 ARC，一切都很好，您可以再次将其删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-23T13:17:07.527

在构建阶段为所有 .m 文件添加“-fno-objc-arc”编译器标志

# c# - 如何使用正则表达式在引号中查找字符串？

> ID：11380540
> 
> 赞同：0
> 
> 时间：2012-07-08T03:55:29.993
> 
> 标签：c#, regex

我有一个文本，其中包括：

```
 "id": "100001470360923", 
  "name": "Đặng Minh Khiêm", 
  "first_name": "Đặng Minh", 
  "last_name": "Khiêm", 
  "link": "https://www.facebook.com/mrkhiem97", 
  "username": "mrkhiem97", 
  "birthday": "10/09/1992", 
  "location": {
          "id": "108458769184495", 
          "name": "Ho Chi Minh City, Vietnam"
      }, 
```

我正在尝试在 C# 中使用正则表达式来获取 2 个字符串：“id”：“100001470360923”“name”：“Đặng Minh Khiêm”

```
 String patternID = "\"id\":\"\\d+\"";
        String patternName = "\"name\":\"[\\w]+\"";
        Match matchID = Regex.Match(data, patternID);
        Match matchName = Regex.Match(data, patternName); 
```

但它不适用于 patternName

我不知道如何使用模式。有人可以给我这个模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:53:01.140

您的正则表达式不起作用，因为您的名字中有非单词字符（如空格）。你可以匹配任何不是引号的东西，使用`[^\"]+`. 这是一个完整的例子：

```
String data = "\"id\": \"100001470360923\", \"name\": \"Ð?ng Minh Khiêm\", \"first_name\": \"Ð?ng Minh\", \"last_name\": \"Khiêm\", \"link\": \"https://www.facebook.com/mrkhiem97\", \"username\": \"mrkhiem97\", \"birthday\": \"10/09/1992\", \"location\": { \"id\": \"108458769184495\", \"name\": \"Ho Chi Minh City, Vietnam\" },";
String patternID = "\"id\": \"[^\\\"]+\"";
String patternName = "\"name\": \"[^\\\"]+\"";
Match matchID = Regex.Match(data, patternID);
Match matchName = Regex.Match(data, patternName);

Console.WriteLine(matchID.Value);
Console.WriteLine(matchName.Value); 
```

这输出：

```
"id": "100001470360923"
"name": "Ð?ng Minh Khiêm" 
```

当然，如果这是其他格式（它看起来与 JSON 非常相似），那么使用旨在解析该格式的库会更容易。看看[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)或类似的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:09:54.633

试试这个：

```
var pattern = "\"id\":\\s*\"(?<id>[^\"]*)\"\\s*,\\s*\"name\"\\s*:\\s*\"(?<name>[^\"]*)\"";
var match = Regex.Match(strInput, pattern);
var id = match.Groups["id"].Value;
var name = match.Groups["name"].Value; 
```

# java - 提取名称，然后用逗号分隔

> ID：11380541
> 
> 赞同：0
> 
> 时间：2012-07-08T03:55:37.523
> 
> 标签：java, web-scraping, jsoup

```
<td>
<span class="movie_info_actors">
<a href="/?actor_name=Billy Connolly">Billy Connolly</a>
<a href="/?actor_name=Craig Ferguson">Craig Ferguson</a>
<a href="/?actor_name=Emma Thompson">Emma Thompson</a>
<a href="/?actor_name=John Ratzenberger">John Ratzenberger</a>
<a href="/?actor_name=Julie Walters">Julie Walters</a>
<a href="/?actor_name=Kelly Macdonald">Kelly Macdonald</a>
<a href="/?actor_name=Kevin McKidd">Kevin McKidd</a>
<a href="/?actor_name=Patrick Doyle">Patrick Doyle</a>
<a href="/?actor_name=Robbie Coltrane">Robbie Coltrane</a>
<a href="/?actor_name=Sally Kinghorn">Sally Kinghorn</a>
</span>
</td> 
```

我正在尝试提取演员名称，然后使用 JSoup 用逗号分隔名称。例如：比利·康诺利、克雷格·弗格森、艾玛·汤普森

这是我的代码：

```
String Actor = E.select("span.movie_info_actors").text();
System.out.println(Actor + ", " ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:18:00.560

我认为应该是

```
Elements actors = E.select("span.movie_info_actors > a");
StringBuffer sb = new StringBuffer();
for (Element actor : actors) {
    sb.append(actor.text());
}
System.out.println(sb.toString()); 
```

# c - 如何在给定的句子中分别找到辅音和元音的数量

> ID：11380546
> 
> 赞同：-1
> 
> 时间：2012-07-08T03:56:31.717
> 
> 标签：c

如何添加到下面的现有程序中？我需要能够找到辅音、单词、空格和特殊字符的数量。我已经有元音了？

```
import java.lang.String;
import java.io.*;
import java.util.*;

public class CountVowels
{
    public static void main(String args[])throws IOException
    {
        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter the String:");
        String text = bf.readLine();
        int count = 0;
        for (int i = 0; i < text.length(); i++) {
            char c = text.charAt(i);
            if (c=='a' || c=='e' || c=='i' || c=='o' || c=='u') {
                count++;
            }
        }
        System.out.println("The number of vowels in the given sentence are " + count);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:14:49.987

由于这是家庭作业，我不会为您编写代码，而是提供一些想法。

1.  **辅音。**您已经计算了元音的数量。根据定义，所有不是元音的都是辅音。（当然，不包括空格和标点符号。）或者，当然，您可以像计算元音一样计算它们，方法是准确列出要匹配的字母。

2.  **单词和空格**。如果你知道空格的数量，你就知道单词的数量。每两个单词之间有一个空格，所以单词数是空格数加一。

3.  **特殊字符**。如果一个字母不是辅音、元音或空格，它就是别的东西——在这种情况下，我假设一个“特殊字符”。因此，如果您将所有元音、辅音和空格相加，然后从输入的总长度中减去该数字，您将得到特殊字符的数量。

此外，在上面发布的代码中，您只检查小写元音。这很好，但首先您需要将输入字符串转换为小写，如下所示`text.toLowerCase()`：

您可能需要考虑编写一系列方法，如下所示：

```
private boolean isConsonant(char x) { ... }
private boolean isVowel(char x) { ... }
private boolean isWhitespace(char x) { ... } 
```

然后，当您遍历输入字符串的字符时，您可以简化您的 is-this-a-[something]? 检查。

最后，您需要为不同的“类型”保留单独的计数器。`int count`因此，您可能需要`int vowelCount`,`int consonantCount`和 ，而不是仅仅`int spaceCount`。

# safari - 我可以将我的 Safari 扩展程序设置为在单击而不是下载时安装吗？

> ID：11380552
> 
> 赞同：5
> 
> 时间：2012-07-08T03:57:58.003
> 
> 标签：safari, safari-extension, browser-addons

我已经编写、签名并构建了一个 safari 扩展（.safariextz 文件）。我尝试向 apache 添加两个 mime 类型处理程序：

```
AddType application/x-safari-extension .safariextz 
```

我也试过

```
AddType application/octet-stream .safariextz 
```

当我单击它下载的扩展程序的链接时，它没有“安装”

我是否可以在我的网络服务器上托管扩展程序，并在单击时提示安装扩展程序，类似于 chrome 或 firefox 扩展程序提示您安装它们的方式 - 或者这可能仅来自苹果扩展程序站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-08T17:30:44.923

我们也在研究这个问题。到目前为止，您似乎只能通过 Apple Extension Site 进行一键安装。这里的答案似乎明确指出：[一键安装 Safari 扩展](https://stackoverflow.com/questions/11375154/one-click-install-for-safari-extensions)

# c# - 如何测试 com 对象注册？

> ID：11380553
> 
> 赞同：0
> 
> 时间：2012-07-08T03:58:22.120
> 
> 标签：c#, com, .net-assembly

我已经创建了一个 C# 类库并成功注册为 com 对象。我试图通过创建一个控制台应用程序来检查它并尝试从 com 选项卡添加引用，但我无法从那里获取注册的 com 对象。任何人都可以检查我如何测试 com 对象是否注册成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:02:30.850

当您使用 regsvr32 注册 COM dll 时，会将一条记录添加到注册表中。您需要检查该条目是否存在。

# javascript - 复选框选中所有选项

> ID：11380555
> 
> 赞同：2
> 
> 时间：2012-07-08T03:58:27.323
> 
> 标签：javascript, jquery

我的复选框设置为 Category Subcategorywise ...

```
Company
    Microsoft
    Apple

 Country
     USA
     UK 
```

和附加到每个项目的复选框。因此，如果我单击 Company 旁边的复选框，那么它应该自动标记 Microsoft 和 Apple 旁边的复选框已选中，同样如果我选择 Country，它应该检查选项 USA 和 UK。并且还应该有一个全选选项，应该选择所有选项。

是否可以使用 javascript 或 jquery 添加复选框检查属性？

```
<input type="checkbox" class="entityCheckboxHeader1" id="entityCheckboxHeader" name="Company">Company
 <input id="modalEntity" class="entity1" type="checkbox" name="CompanySub">Microsoft
 <input id="modalEntity" class="entity2" type="checkbox" name="CompanySub">Apple
 <input type="checkbox" class="entityCheckboxHeader2" id="entityCheckboxHeader" name="Country">Country
 <input id="modalEntity" class="entity3" type="checkbox" name="CountrySub">USA
 <input id="modalEntity" class="entity4" type="checkbox" name="CountrySub">UK 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T04:14:12.930

**在此处查看简单演示：http:** [//jsfiddle.net/Pfmuq/2/](http://jsfiddle.net/Pfmuq/2/) **或**更简单：http: [//jsfiddle.net/Pfmuq/3/](http://jsfiddle.net/Pfmuq/3/)

请注意`id`，在任何时候都应该是唯一的，当你阅读代码时休息一下，我注意到你`parent`和`Sub`命名中的模式，因此我考虑到了这一点。

请注意，我还冒昧地切换了您的 id 和 class anyhoo 代码如下`:)`

休息希望这会有所帮助，`:)`

**代码**

```
$('input[name="Company"],input[name="Country"]').click(function(){
    if ($(this).is(':checked')){
          $(this).nextAll('input[name="'+this.name+'Sub"]').prop('checked',true);

    } else {
          $(this).nextAll('input[name="'+this.name+'Sub"]').prop('checked',false);   
    }
});
​ 
```

**来自第二个演示的代码**

```
$('input[name="Company"],input[name="Country"]').click(function(){
          $(this).nextAll('input[name="'+this.name+'Sub"]').prop('checked',this.checked);
});
​ 
```

**HTML**

```
<input type="checkbox" class="entityCheckboxHeader1" id="entityCheckboxHeader" name="Company">Company
 <input class="modalEntityCompany" id="entity1" type="checkbox" name="CompanySub">Microsoft
 <input class="modalEntity" id="entity2" type="checkbox" name="CompanySub">Apple
<br /> 
<input type="checkbox" class="entityCheckboxHeader2" id="entityCheckboxHeader" name="Country">Country
 <input class="modalEntity" id="entity3" type="checkbox" name="CountrySub">USA
 <input class="modalEntity" id="entity4" type="checkbox" name="CountrySub">UK​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:19:10.873

如果您可以稍微修改您的 HTML，您可以提出一个通用的解决方案，该解决方案可以与您喜欢的任意数量的组一起使用（而不仅仅是国家和公司）。

**HTML：**

```
<input type="checkbox" class="entityCheckboxHeader" name="Company">Company
<input type="checkbox" name="CompanySub">Microsoft
<input type="checkbox" name="CompanySub">Apple
<input type="checkbox" class="entityCheckboxHeader" name="Country">Country
<input type="checkbox" name="CountrySub">USA
<input type="checkbox" name="CountrySub">UK 
```

​<strong>JavaScript：

```
$(function(){
    $('.entityCheckboxHeader').click(function() {
        $('[name="'+this.name+'Sub"]').prop('checked', this.checked);
    });
});​ 
```

如果您无法修改 HTML，那么 Tats_innit 的答案是一个不错、简洁的解决方案。

这里有这个解决方案的 JSFiddle：http: [//jsfiddle.net/L5qqb/](http://jsfiddle.net/L5qqb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T04:19:17.550

首先，您应该将复选框包装起来，`<label>`以便在单击标签时也会切换复选框（用户友好）。

然后我建议使用列表对复选框进行分组。（你可以用任何你想要的css来设计它们）。

像这样的东西：

```
<ul>
    <li class="entityCheckboxHeader1" >
        <label><input type="checkbox" id="entityCheckboxHeader1">Company</label>
        <ul>
            <li><label><input id="modalEntity11" class="entity1" type="checkbox" name="company[]">Microsoft</label></li>
            <li><label><input id="modalEntity12" class="entity2" type="checkbox" name="company[]">Apple</label></li>
        </ul>
    </li>
    <li class="entityCheckboxHeader2">
        <label><input type="checkbox" id="entityCheckboxHeader2">Country</label>
        <ul>
            <li><label><input id="modalEntity21" class="entity3" type="checkbox" name="country[]">USA</label></li>
            <li><label><input id="modalEntity22" class="entity4" type="checkbox" name="country[]">UK​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;/label></li>
        </ul>
    </li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

现在您可以使用这个非常简单的 jquery 来完成您的任务：

```
$("li :checkbox").change(function(){
    $(this).closest("li").find("ul :checkbox").prop("checked", $(this).is(":checked"));
});​ 
```

[​http://jsfiddle.net/eKTAk/3/](http://jsfiddle.net/eKTAk/3/)

请注意，我已经更改了字段的名称，以便您可以在 php 脚本（发布表单）中像这样读取它们：

```
$companies = $_POST['companies']; //Gets the array of values for the checked companies

$countries = $_POST['countries']; //Gets the array of values for the checked companies 
```

# c - Pthreads 无法解释的分段错误

> ID：11380556
> 
> 赞同：1
> 
> 时间：2012-07-08T03:58:53.807
> 
> 标签：c, multithreading, segmentation-fault, pthreads, mergesort

我从 Cormen 的著名文本中实现了一个并行合并排序算法。我使用 pthreads 用 C 语言编写它，并在 Win7 x64 上使用 MinGW 编译（后来也在 Ubuntu 中使用 GCC 进行了测试，结果相同）。我在并行化方面的第一种方法是幼稚的……我在每个递归级别都生成了一个新线程（这实际上是 Cormen 的伪代码所暗示的）。然而，这通常会导致耗时过长或由于分段错误而崩溃（我可以假设系统可以处理多少线程有一些硬性限制）。这似乎是递归并行化的常见新手错误，实际上我发现了一个类似的[DISCUSSION](https://stackoverflow.com/questions/6113331/parallel-merge-sort-with-threads-much-slower-than-seq-merge-sort-help)在这个网站上。所以我改为在该线程中使用建议，即为问题大小设置阈值，如果为生成新线程的函数提供了一个小于阈值的集合（比如 10,000 个元素），那么它只是直接对元素进行操作，而不是为这么小的一组创建一个新线程。

现在一切似乎都运行良好。我在下面列出了我的一些结果。N 是问题大小（一组整数 [1, 2, 3, ..., N] 彻底打乱），阈值是我的并行排序和并行合并函数拒绝生成新线程的值。第一个表以毫秒为单位显示排序时间，第二个表显示在每种情况下产生了多少排序/合并工作线程。查看底部表格中的 N=1E6 和 N=1E7 行，您可以看到每当我降低阈值以允许超过 ~8000 个合并工作人员时，我都会遇到分段错误。同样，我认为这是由于系统对线程的某些限制，我很乐意听到更多关于这一点的信息，但这不是我的主要问题。

主要问题是，为什么在尝试使用相当高的阈值时最后一行会出现段错误，这会产生预期的 15/33 个工作线程（遵循前一行的模式）。当然，这不是我的系统要处理的太多线程。完成的一个实例（表中右下角的单元格）使用了大约 1.2GB RAM（我的系统有 6GB），与每行右侧有 0 个线程的版本相比，线程版本似乎从未占用更多 RAM。

*   我认为我没有达到任何类型的堆限制......大量可用的 RAM，即使允许它产生 15/33 线程，它也应该只需要 ~1GB。
*   我也不认为这是一个堆栈问题。我将程序设计为使用最小堆栈，并且我认为每个线程的占用空间根本与问题大小 N 无关，仅与堆有关。我对此非常缺乏经验......但是我在gdb中做了一个核心转储堆栈回溯，并且从堆栈顶部到底部的地址似乎足够接近以排除那里的溢出。
*   我尝试读取 pthread_create 的返回值...在 Windows 中我在崩溃前几次得到了 11 的值（但它似乎没有触发崩溃，因为有几个 11，然后是几个 0，即没有错误，然后是另一个 11）。该错误代码是EAGAIN，资源不可用......但我不确定它在这里的真正含义。此外，在 Ubuntu 中，错误代码每次都是 0，甚至直到崩溃。
*   我尝试了 Valgrind 并收到了很多关于内存泄漏的消息，但我不确定这些是否合法，因为我知道 Valgrind 需要额外的资源，而且我能够在没有 Valgrind 的情况下正常工作的其他问题集大小上得到这些类型的错误。

很明显，它与问题大小和系统资源有关……我希望我缺少一些常识，可以使答案非常清楚。

有任何想法吗？对不起，长长的文字墙……谢谢你读到这里！如果看起来相关，我可以发布来源。

![在此处输入图像描述](../Images/e37dbc7b998c156bbb482dc4cdb79d57.png)

编辑：添加源以供参考：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <pthread.h>

const int               N = 100000000;
const int  SORT_THRESHOLD = 10000000;
const int MERGE_THRESHOLD = 10000000;

int  sort_thread_count = 0;
int merge_thread_count = 0;

typedef struct s_pmergesort_args {
    int *vals_in, p, r, *vals_out, s;
} pmergesort_args;

typedef struct s_pmerge_args {
    int *temp, p1, r1, p2, r2, *vals_out, p3;
} pmerge_args;

void *p_merge_sort(void *v_pmsa);
void *p_merge(void *v_pma);
int binary_search(int val, int *temp, int p, int r);

int main() {
    int *values, i, rand1, rand2, temp, *sorted;
    long long rand1a, rand1b, rand2a, rand2b;
    struct timeval start, end;

    /* allocate values on heap and initialize */
    values = malloc(N * sizeof(int));
    sorted = malloc(N * sizeof(int));
    for (i = 0; i < N; i++) {
        values[i] = i + 1;
        sorted[i] = 0;
    }

    /* scramble
     *  - complicated logic to maximize swapping
     *  - lots of testing (not shown) was done to verify optimal swapping */
    srand(time(NULL));
    for (i = 0; i < N/10; i++) {
        rand1a = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand1b = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand1 = (int)((rand1a * rand1b + rand()) % N);
        rand2a = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand2b = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand2 = (int)((rand2a * rand2b + rand()) % N);
        temp = values[rand1];
        values[rand1] = values[rand2];
        values[rand2] = temp;
    }

    /* set up args for p_merge_sort */
    pmergesort_args pmsa;
    pmsa.vals_in = values;
    pmsa.p = 0;
    pmsa.r = N-1;
    pmsa.vals_out = sorted;
    pmsa.s = 0;

    /* sort */
    gettimeofday(&start, NULL);
    p_merge_sort(&pmsa);
    gettimeofday(&end, NULL);

    /* verify sorting */
    for (i = 1; i < N; i++) {
        if (sorted[i] < sorted[i-1]) {
            fprintf(stderr, "Error: array is not sorted.\n");
            exit(0);
        }
    }
    printf("Success: array is sorted.\n");
    printf("Sorting took %dms.\n", (int)(((end.tv_sec * 1000000 + end.tv_usec) - (start.tv_sec * 1000000 + start.tv_usec))/1000));

    free(values);
    free(sorted);

    printf("(  sort threads created: %d )\n", sort_thread_count);
    printf("( merge threads created: %d )\n", merge_thread_count);

    return 0;
}

void *p_merge_sort(void *v_pmsa) {
    pmergesort_args pmsa = *((pmergesort_args *) v_pmsa);
    int *vals_in = pmsa.vals_in;
    int p = pmsa.p;
    int r = pmsa.r;
    int *vals_out = pmsa.vals_out;
    int s = pmsa.s;

    int n = r - p + 1;
    pthread_t worker;

    if (n > SORT_THRESHOLD) {
        sort_thread_count++;
    }

    if (n == 1) {
        vals_out[s] = vals_in[p];
    } else {
        int *temp = malloc(n * sizeof(int));
        int q = (p + r) / 2;
        int q_ = q - p + 1;

        pmergesort_args pmsa_l;
        pmsa_l.vals_in = vals_in;
        pmsa_l.p = p;
        pmsa_l.r = q;
        pmsa_l.vals_out = temp;
        pmsa_l.s = 0;

        pmergesort_args pmsa_r;
        pmsa_r.vals_in = vals_in;
        pmsa_r.p = q+1;
        pmsa_r.r = r;
        pmsa_r.vals_out = temp;
        pmsa_r.s = q_;

        if (n > SORT_THRESHOLD) {
            pthread_create(&worker, NULL, p_merge_sort, &pmsa_l);
        } else {
            p_merge_sort(&pmsa_l);
        }
        p_merge_sort(&pmsa_r);

        if (n > SORT_THRESHOLD) {
            pthread_join(worker, NULL);
        }

        pmerge_args pma;
        pma.temp = temp;
        pma.p1 = 0;
        pma.r1 = q_ - 1;
        pma.p2 = q_;
        pma.r2 = n - 1;
        pma.vals_out = vals_out;
        pma.p3 = s;
        p_merge(&pma);
        free(temp);
    }
}

void *p_merge(void *v_pma) {
    pmerge_args pma = *((pmerge_args *) v_pma);
    int *temp = pma.temp;
    int p1 = pma.p1;
    int r1 = pma.r1;
    int p2 = pma.p2;
    int r2 = pma.r2;
    int *vals_out = pma.vals_out;
    int p3 = pma.p3;

    int n1 = r1 - p1 + 1;
    int n2 = r2 - p2 + 1;
    int q1, q2, q3, t;
    pthread_t worker;

    if (n1 < n2) {
        t = p1; p1 = p2; p2 = t;
        t = r1; r1 = r2; r2 = t;
        t = n1; n1 = n2; n2 = t;
    }
    if (n1 > MERGE_THRESHOLD) {
        merge_thread_count++;
    }

    if (n1 == 0) {
        return;
    } else {

        q1 = (p1 + r1) / 2;
        q2 = binary_search(temp[q1], temp, p2, r2);
        q3 = p3 + (q1 - p1) + (q2 - p2);
        vals_out[q3] = temp[q1];

        pmerge_args pma_l;
        pma_l.temp = temp;
        pma_l.p1 = p1;
        pma_l.r1 = q1-1;
        pma_l.p2 = p2;
        pma_l.r2 = q2-1;
        pma_l.vals_out = vals_out;
        pma_l.p3 = p3;

        if (n1 > MERGE_THRESHOLD) {
            pthread_create(&worker, NULL, p_merge, &pma_l);
        } else {        
            p_merge(&pma_l);
        }        

        pmerge_args pma_r;
        pma_r.temp = temp;
        pma_r.p1 = q1+1;
        pma_r.r1 = r1;
        pma_r.p2 = q2;
        pma_r.r2 = r2;
        pma_r.vals_out = vals_out;
        pma_r.p3 = q3+1;

        p_merge(&pma_r);

        if (n1 > MERGE_THRESHOLD) {
            pthread_join(worker, NULL);
        }
    }
}

int binary_search(int val, int *temp, int p, int r) {
    int low = p;
    int mid;
    int high = (p > r+1)? p : r+1;

    while (low < high) {
        mid = (low + high) / 2;
        if (val <= temp[mid]) {
            high = mid;
        } else {
            low = mid + 1;
        }
    }
    return high;
} 
```

编辑 2：在下面添加了新图像，显示了每个版本使用的“最大”和“总”RAM（最大表示最高同时分配/使用，总表示整个程序生命周期中所有分配请求的总和）。这些表明在 N=1E8 和 threshold=1E7 的情况下，我应该获得 3.2GB 的最大使用量（我的系统应该能够支持）。但同样......我猜它与 pthread 库中的其他一些限制有关......不是我实际的系统资源。

![在此处输入图像描述](../Images/1fe021912110be52e1fa63c55f85c6d6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:07:31.243

看起来它的内存不足了。在您的示例中，如果代码按顺序运行，则它一次分配的最大内存为 1.6GB。使用线程时，它使用超过 3GB。我在 malloc/free 函数周围放置了一些包装器，得到了以下结果：

```
Allocation of 12500000 bytes failed with 3074995884 bytes already allocated. 
```

很容易看出，线程化时内存使用量会更多。在这种情况下，它将同时对整个数组的左侧和右侧进行排序，并分配两个大的临时缓冲区来执行此操作。当顺序运行时，左半部分的临时缓冲区将在对右半部分排序之前被释放。

这是我使用的包装器：

```
static size_t total_allocated = 0;
static size_t max_allocated = 0;
static pthread_mutex_t total_allocated_mutex;

static void *allocate(int n)
{
  void *result = 0;
  pthread_mutex_lock(&total_allocated_mutex);
  result = malloc(n);
  if (!result) {
    fprintf(stderr,"Allocation of %d bytes failed with %u bytes already allocated\n",n,total_allocated);
  }
  assert(result);
  total_allocated += n;
  if (total_allocated>max_allocated) {
    max_allocated = total_allocated;
  }
  pthread_mutex_unlock(&total_allocated_mutex);
  return result;
}

static void *deallocate(void *p,int n)
{
  pthread_mutex_lock(&total_allocated_mutex);
  total_allocated -= n;
  free(p);
  pthread_mutex_unlock(&total_allocated_mutex);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T04:28:11.203

我运行它并得到：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 7120.0x14dc]
0x004017df in p_merge (v_pma=0x7882c120) at t.c:177
177             vals_out[q3] = temp[q1];
(gdb) p q3
$1 = 58
(gdb) p vals_out
$2 = (int *) 0x0
(gdb) 
```

这是一个 NULL 指针取消引用。我会在您分配后断言`temp`以确保分配成功。

```
 int *temp = malloc(n * sizeof(int));
    assert(temp); 
```

稍微分析一下您的算法，似乎您在递归下降时预先分配了进行合并所需的内存。您可能需要考虑更改算法以在实际执行合并时进行分配。

但是，如果我没记错的话，合并排序会在任何合并发生之前在算法的最顶部分配第二个数组，然后随着递归调用展开，随着合并运行时间的延长，它们会在两个数组之间来回翻转。这样，`malloc`整个算法中只有一个调用。除了使用更少的内存之外，它的性能也会更好。

我在修改代码以使用分配在算法顶部的单个分配的临时数组时的 SWAG 如下所示。

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <pthread.h>

const int               N = 100000000;
const int  SORT_THRESHOLD = 10000000;
const int MERGE_THRESHOLD = 10000000;

int  sort_thread_count = 0;
int merge_thread_count = 0;

typedef struct s_pmergesort_args {
    int *vals_in, p, r, *vals_out, s, *temp;
} pmergesort_args;

typedef struct s_pmerge_args {
    int *temp, p1, r1, p2, r2, *vals_out, p3;
} pmerge_args;

void *p_merge_sort(void *v_pmsa);
void *p_merge(void *v_pma);
int binary_search(int val, int *temp, int p, int r);

int main() {
    int *values, i, rand1, rand2, temp, *sorted, *scratch;
    long long rand1a, rand1b, rand2a, rand2b;
    struct timeval start, end;

    /* allocate values on heap and initialize */
    values = malloc(N * sizeof(int));
    sorted = malloc(N * sizeof(int));
    scratch = malloc(N * sizeof(int));
    for (i = 0; i < N; i++) {
        values[i] = i + 1;
        sorted[i] = 0;
    }

    /* scramble
     *  - complicated logic to maximize swapping
     *  - lots of testing (not shown) was done to verify optimal swapping */
    srand(time(NULL));
    for (i = 0; i < N/10; i++) {
        rand1a = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand1b = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand1 = (int)((rand1a * rand1b + rand()) % N);
        rand2a = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand2b = (long long)(N*((double)rand()/(1+(double)RAND_MAX)));
        rand2 = (int)((rand2a * rand2b + rand()) % N);
        temp = values[rand1];
        values[rand1] = values[rand2];
        values[rand2] = temp;
    }

    /* set up args for p_merge_sort */
    pmergesort_args pmsa;
    pmsa.vals_in = values;
    pmsa.p = 0;
    pmsa.r = N-1;
    pmsa.vals_out = sorted;
    pmsa.s = 0;
    pmsa.temp = scratch;

    /* sort */
    gettimeofday(&start, NULL);
    p_merge_sort(&pmsa);
    gettimeofday(&end, NULL);

    /* verify sorting */
    for (i = 1; i < N; i++) {
        if (sorted[i] < sorted[i-1]) {
            fprintf(stderr, "Error: array is not sorted.\n");
            exit(0);
        }
    }
    printf("Success: array is sorted.\n");
    printf("Sorting took %dms.\n", (int)(((end.tv_sec * 1000000 + end.tv_usec) - (start.tv_sec * 1000000 + start.tv_usec))/1000));

    free(values);
    free(sorted);
    free(scratch);

    printf("(  sort threads created: %d )\n", sort_thread_count);
    printf("( merge threads created: %d )\n", merge_thread_count);

    return 0;
}

void *p_merge_sort(void *v_pmsa) {
    pmergesort_args pmsa = *((pmergesort_args *) v_pmsa);
    int *vals_in = pmsa.vals_in;
    int p = pmsa.p;
    int r = pmsa.r;
    int *vals_out = pmsa.vals_out;
    int s = pmsa.s;
    int *scratch = pmsa.temp;

    int n = r - p + 1;
    pthread_t worker;

    if (n > SORT_THRESHOLD) {
        sort_thread_count++;
    }

    if (n == 1) {
        vals_out[s] = vals_in[p];
    } else {
        int q = (p + r) / 2;
        int q_ = q - p + 1;

        pmergesort_args pmsa_l;
        pmsa_l.vals_in = vals_in;
        pmsa_l.p = p;
        pmsa_l.r = q;
        pmsa_l.vals_out = scratch;
        pmsa_l.s = p;
        pmsa_l.temp = vals_out;

        pmergesort_args pmsa_r;
        pmsa_r.vals_in = vals_in;
        pmsa_r.p = q+1;
        pmsa_r.r = r;
        pmsa_r.vals_out = scratch;
        pmsa_r.s = q+1;
        pmsa_r.temp = vals_out;

        if (n > SORT_THRESHOLD) {
            pthread_create(&worker, NULL, p_merge_sort, &pmsa_l);
        } else {
            p_merge_sort(&pmsa_l);
        }
        p_merge_sort(&pmsa_r);

        if (n > SORT_THRESHOLD) {
            pthread_join(worker, NULL);
        }

        pmerge_args pma;
        pma.temp = scratch + p;
        pma.p1 = 0;
        pma.r1 = q_ - 1;
        pma.p2 = q_;
        pma.r2 = n - 1;
        pma.vals_out = vals_out + p;
        pma.p3 = s - p;
        p_merge(&pma);
    }
}

void *p_merge(void *v_pma) {
    pmerge_args pma = *((pmerge_args *) v_pma);
    int *temp = pma.temp;
    int p1 = pma.p1;
    int r1 = pma.r1;
    int p2 = pma.p2;
    int r2 = pma.r2;
    int *vals_out = pma.vals_out;
    int p3 = pma.p3;

    int n1 = r1 - p1 + 1;
    int n2 = r2 - p2 + 1;
    int q1, q2, q3, t;
    pthread_t worker;

    if (n1 < n2) {
        t = p1; p1 = p2; p2 = t;
        t = r1; r1 = r2; r2 = t;
        t = n1; n1 = n2; n2 = t;
    }
    if (n1 > MERGE_THRESHOLD) {
        merge_thread_count++;
    }

    if (n1 == 0) {
        return;
    } else {

        q1 = (p1 + r1) / 2;
        q2 = binary_search(temp[q1], temp, p2, r2);
        q3 = p3 + (q1 - p1) + (q2 - p2);
        vals_out[q3] = temp[q1];

        pmerge_args pma_l;
        pma_l.temp = temp;
        pma_l.p1 = p1;
        pma_l.r1 = q1-1;
        pma_l.p2 = p2;
        pma_l.r2 = q2-1;
        pma_l.vals_out = vals_out;
        pma_l.p3 = p3;

        if (n1 > MERGE_THRESHOLD) {
            pthread_create(&worker, NULL, p_merge, &pma_l);
        } else {
            p_merge(&pma_l);
        }

        pmerge_args pma_r;
        pma_r.temp = temp;
        pma_r.p1 = q1+1;
        pma_r.r1 = r1;
        pma_r.p2 = q2;
        pma_r.r2 = r2;
        pma_r.vals_out = vals_out;
        pma_r.p3 = q3+1;

        p_merge(&pma_r);

        if (n1 > MERGE_THRESHOLD) {
            pthread_join(worker, NULL);
        }
    }
}

int binary_search(int val, int *temp, int p, int r) {
    int low = p;
    int mid;
    int high = (p > r+1)? p : r+1;

    while (low < high) {
        mid = (low + high) / 2;
        if (val <= temp[mid]) {
            high = mid;
        } else {
            low = mid + 1;
        }
    }
    return high;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T07:05:15.913

您对系统的压力太大了，因为加速实现的并行化没有多大意义。并行化会产生成本，当你用这样的线程淹没系统时，你的系统作为一个整体必须做很多工作，线程不是免费的。

特别是对于如果您要求太多线程时程序崩溃的“问题”，这完全是您的错：阅读`pthread_create`. 它声明该函数返回一个值，并且这样做是有原因的。

为了获得加速（我想这是您正在寻找的），您不能期望获得比系统中的物理内核更多的东西。有时线程比内核多一点（比如两倍）是件好事，但很快线程创建的开销就会远远超过您所能获得的。

然后，归并排序是一种算法，通常受对 RAM 的访问限制，而不是比较。RAM 访问（即使像在合并排序中那样进行流式处理）也比 CPU 慢几个数量级。此外，您的内存总线不是并行设备，您在内存访问中唯一的并行性是缓存（如果它们是的话）。将内存占用量扩大两倍，可能会扼杀所有性能提升。在您的代码中，您甚至可以通过在各个线程调用的下方分配内存来使情况变得更糟，因为分配内存本身是有成本的，因此系统必须协调这些分配。

为了让它重新开始，首先编写一个具有良好内存处理和访问模式的递归归并排序算法。只在递归的顶部节点分配一些大缓冲区，并将部分缓冲区交给递归调用。

创建一个单独的合并例程，将两个已排序的缓冲区合并为第三个。对其进行基准测试，计算算法花费的每个排序项的微秒。根据你的 CPU 的速度计算你每个排序项目浪费的周期数。阅读编译器为合并生成的汇编程序，如果您发现它看起来太复杂，请尝试找出如何改进它。

之后，开始为您的递归函数添加并行性。

# java - 为什么Spring依赖注入有init-method？

> ID：11380558
> 
> 赞同：4
> 
> 时间：2012-07-08T03:59:02.153
> 
> 标签：java, spring, dependency-injection

我来自 .NET 背景，使用过 Unity、Ninject、Castle Windsor 等依赖注入容器。最近开始学习使用 Spring 的 Java 依赖注入功能。

在学习 Spring 时，我发现可以在 bean XML 配置中指定“init-method”和“destroy-method”的概念。

指定“init-method”的目的似乎是在创建 bean 时进行您可能想要做的任何设置。这就是我感到困惑的地方。为什么你需要一个单独的方法来执行设置，而不是仅仅**使用构造函数**来执行对象所需的任何设置，就像正常/良好的面向对象设计所要求的那样？

换句话说，如果一个类需要一个依赖项，它不应该被注入到构造函数中，你*知道*它已经被调用了，而对象可以在没有调用它的状态下存在'init-method'？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T08:42:10.627

在少数情况下`init()`需要单独的方法：

*   您别无选择的遗留 API

*   初始化有一些副作用，例如启动 a `Thread`，连接到 som 外部资源

    这实际上具有更深层次的含义：当使用基于类的代理（通过[cglib](/questions/tagged/cglib "显示标记为“cglib”的问题")）时，基类的构造函数被调用两次（第二次为从您的类继承的代理） -`init()`方法仅在最终对象上调用一次。

*   你不应该在构造函数中执行虚拟调用（这实际上应该被编译器禁止......）

*   有时您必须使用 setter/field 注入（尽管我喜欢构造函数注入），例如，当使用上述基于类的代理时

> **使用构造函数**执行对象所需的任何设置，例如正常/良好的面向对象设计会指示？

这实际上不是将所有初始化代码放在构造函数中的最佳实践。构造函数中的副作用使测试和模拟变得更加困难。而是专注于创建*稳定*且*已知*状态的对象。通过这种方式，您可以例如解耦创建一个管理连接池的对象并物理连接到该池。

BTW`destroy()`是一种没有析构函数的语言的福音，因为它允许您感激地关闭外部资源、中断线程等。经常使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T04:16:04.870

你为什么需要它？

在设置了 bean 的所有属性后调用 init 方法。如果 bean 需要对属性进行一些初始化或验证，而这些属性只能在设置完所有属性后完成，则通常需要这样做。（如果您尝试在没有“init”回调的情况下执行此操作，您会发现每个属性设置器都必须检查其他设置器是否已被调用，依此类推。如果只能在所有属性之后进行初始化，那么即使该策略也会失败在一个循环的 bean 中已设置。）

如果 bean 持有需要显式释放的资源，则需要使用 destroy 方法；例如文件句柄、网络套接字、数据库连接。

> ...像正常/良好的面向对象设计会决定吗？

任何规定 init 和 destroy 事件/方法是“错误”或“禁止”的设计方法都是不现实的，应该被忽略。事实上，面向对象的设计方法通常不会规定这一点。他们最多会说这种东西通常不需要。

此外，DI 实际上在一定程度上改变了设计方法的规则……至少在初始化方面。特别是，通过将实例的“连接”外部化，它以经典 OO 设计方法没有预料到的方式从代码中提取出很多逻辑。如果有的话，这就是说需要根据依赖注入重新审视经典的 OO 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T02:50:45.510

如果您使用的是 setter 注入，那么肯定需要 init 方法/InitializingBean/@PostConstruct 以便在所有属性都已设置/自动装配后进行初始化。否则你有一个构造但不是依赖注入的对象。如果您使用构造函数注入，则很少需要它，在 Tomasz 和 Stephen 指出的情况下。

# c++ - 如何在 C++ 中解析 XML 网页

> ID：11380559
> 
> 赞同：0
> 
> 时间：2012-07-08T03:59:46.863
> 
> 标签：c++, xml, visual-studio-2010, xml-parsing

我在网上搜索了一个小时左右，我投降了，我该怎么办？

我只想获取一个带有简单 xml 输出的网页，其中包含天气或股票信息等简单信息，并让它吐出一些内容，“温度为 90f”或“google is up”。例如，[http://www.google.com/ig/api?](http://www.google.com/ig/api?weather=New+York) weather=New+York 会说“它是 70f”或类似的东西。

我对 C++ 非常陌生，对此我知之甚少，如果你要引导我去一个库，你能否也**给我看一个关于安装新库的教程？我正在使用 Visual C++ 2010，我似乎无法找到如何安装新库。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:24:32.157

你需要两个 c++ 库

用于调用 http 资源 [http://curl.haxx.se/libcurl/](http://curl.haxx.se/libcurl/)

用于解析 XML 输出 [http://www.grinninglizard.com/tinyxml2/index.html](http://www.grinninglizard.com/tinyxml2/index.html)

查看文档以获取有关其使用的信息

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T09:42:26.423

使用**[Microsoft Xmlite](http://msdn.microsoft.com/en-us/library/windows/desktop/ms752838%28v=vs.85%29.aspx)**。[用于原生 C++ 的小型快速 XML 解析器](http://msdn.microsoft.com/en-us/magazine/cc163436.aspx)。其他*Microsoft*解决方案包括：

*   MSXML (SAX2)（本机）
*   System.XML.XmlReader（托管）

# photo-management - 带有密码保护目录的服务器图片管理系统？

> ID：11380561
> 
> 赞同：0
> 
> 时间：2012-07-08T03:59:58.413
> 
> 标签：photo-management

简而言之，这就是我正在做的事情。

1.  一家企业将拍摄 100 张高分辨率照片以在活动中出售。

2.  这些照片出售给每个人购买他们的照片集。

3.  我想将这些图像上传到服务器（可能通过 FTP？），并将它们排列到目录中（通过为事件提供的用户号）。

4.  然后，给用户一个唯一的用户名/密码来访问他们的照片集。

我的问题是，做这种事情的**最好、最快和最简单的方法**是什么？也许有我可以在服务器上安装的软件，或者其他的做事方式。

所以我正在寻找简单的上传和某种密码保护（因此用户不共享访问权限），以及让客户轻松访问以登录服务器并下载或热链接他们的照片。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:40:18.930

我的感觉是，最好和最简单的方法是不必重新发明轮子。我不是外包的忠实拥护者，但在这种情况下，这是有道理的。像 PBase (www.pbase.com) 或 SmugMug 这样的网站已经提供了这些功能。恕我直言 PBase 可能是您描述的任务的最佳选择。每个客户都可以拥有一个画廊，您可以为每个画廊应用密码，以便每个人只能访问自己的画廊。您可以拥有更多的子画廊，这些子画廊可以与每个客户的不同拍摄相关，并且根密码可以应用于子画廊。

2 或 3 年前，我可能不推荐 PBase，因为它存在一些可靠性问题，但所有者似乎已经以一种巨大的方式将他们的行为结合在一起，并且对于这种商业活动来说足够可行。最大的缺点是，与 SmugMug 不同，您不能像使用 SmugMug 那样将自己的域名指向 PBase 画廊，但是没有什么可以阻止您从自己的站点链接到您为PBase 上的客户。PBase 显示可通过 CSS 自定义，因此您可以重新格式化它以适应您自己网站的风格。每月的成本仅为 23 美元 / 1000 兆（存储），这对于您获得的东西来说是相当合理的；它为您节省了必须在自己的网站内设计托管和安全性的问题。

PBase 和 SmugMug 并不是仅有的两个选择（尽管我确实建议远离 Flickr；Flickr 的主要兴趣是将其粉红色和蓝色品牌应用于您的照片，PBase 和 SmugMug 由设计网站以炫耀您的照片发挥最大优势），您当然可以搜索其他可能适合您的网站；我提到的两个是我个人了解的。

您要求的是最好和最快的，而不是最便宜的……最好和最快的是使用已经为您完成此操作的人的服务。

# javascript - Twitter Bootstrap 粘性子导航在它应该在较短的页面上之前变得固定

> ID：11380562
> 
> 赞同：6
> 
> 时间：2012-07-08T04:00:02.557
> 
> 标签：javascript, jquery, css, ruby-on-rails, twitter-bootstrap

我已经实现了一个自动浮动子导航栏，直接取自 Bootstrap[文档 CSS](https://github.com/twitter/bootstrap/blob/master/docs/assets/css/docs.css) [和 JS](https://github.com/twitter/bootstrap/blob/master/docs/assets/js/application.js)，在我正在处理的站点中。它只出现在一个视图上，但这是一个 Rails 视图，因此它是根据加载的对象动态生成的。

我发现，当出现在子导航栏下方的内容足够长时，子导航栏的行为会按预期工作 - 在子导航栏滚动出视图的那一刻添加 subnav-fixed 类.

但是，如果页面比这短，则子导航栏将在实际看不见之前固定，这会产生非常不和谐的跳跃，更不用说您可以看到栏曾经所在的空间，这是您不应该看到的能够看到。

我应该补充一点，我正在使用固定（主）导航栏，并考虑了适当的主体填充。

似乎问题出`$('.subnav').offset.top`在返回的值上。

谁能更好地使用 jQuery / JS 可以帮助诊断这个问题，并想出一种方法来使 subnav 栏只有在它被滚动出视图时才变得固定？

Javascript：

```
var $win = $(window)
  , $nav = $('.subnav')
  , navTop = $('.subnav').length && $('.subnav').offset().top
  , isFixed = 0
    , $hiddenName = $('.subnav .hide')

processScroll()

$nav.on('click', function () {
  if (!isFixed) setTimeout(function () {  $win.scrollTop($win.scrollTop() - 47) }, 10)
})

$win.on('scroll', processScroll)

function processScroll() {
  var i, scrollTop = $win.scrollTop()
  if (scrollTop >= navTop && !isFixed) {
    isFixed = 1
    $nav.addClass('subnav-fixed')
        $hiddenName.removeClass('hide')
        if (!$('.subnav li').hasClass('active')) {
            $('.subnav li:eq(1)').addClass('active')
        }
  } else if (scrollTop <= navTop && isFixed) {
    isFixed = 0
    $nav.removeClass('subnav-fixed')
        $hiddenName.addClass('hide')
        $('.subnav li').removeClass('active')
  }
} 
```

[Replicating Bootstraps main nav and subnav](https://stackoverflow.com/questions/9179708/replicating-bootstraps-main-nav-and-subnav) - 我见过这个问题，但我认为它不能避免这个问题，因为它仍然使用`.offset()`

**更新：**

仍然没有运气。`navTop`随着页面长度变短，似乎仍然变短，这没有任何意义，因为它使用`offset().top`. 有什么我没有得到的关于该方法如何工作的东西吗？

**更新 2**

看起来这可能会在 Bootstrap 2.1.0 中得到解决，因为它实际上将包含一个子导航栏作为一个真正的组件，以及一个用于处理粘性行为的 jQuery 插件。不过，我想了解为什么 offset() 函数如此不可靠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:38:23.183

我也采用了相同的 JS 代码，并将其改编为我的网站（仍在建设中）。这是一些代码（工作）

## HTML

```
<div class="fix_on_top">
    <div class="container">
        <ul class="breadcrumb">
            <li><a href="#">Home</a> <span class="divider">/</span></li>
            <li><a href="#">Packages</a> <span class="divider">/</span></li>
            <li class="active">Professional courses - I am a breadcrumb; I'll fix myself below the top navbar when you scroll the page</li>
        </ul>
    </div>
</div> 
```

## 少（CSS）

```
.fixed_on_top {
    left: 0;
    right: 0;
    z-index: 1020;
    position: fixed;
    top:$navbarHeight;
} 
```

## JavaScript

```
var $window     = $(window),
    $fix_on_top = $('.fix_on_top'),
    fixed_Top   = $('.fix_on_top').length && $('.fix_on_top').offset().top - 40,
    isFixed     = 0;

process_scroll();

// hack sad times - holdover until rewrite for 2.1
$fix_on_top.on('click', function () {
    if (!isFixed) setTimeout(function () {
        $window.scrollTop($window.scrollTop() - 47)
    }, 10);
});

$window.on('scroll', process_scroll);

function process_scroll()
{
    var i, scrollTop    = $window.scrollTop();

    if (scrollTop >= fixed_Top && !isFixed) {
        isFixed         = 1;
        $fix_on_top.addClass('fixed_on_top');
    }
    else if (scrollTop <= fixed_Top && isFixed)
    {
        isFixed         = 0;
        $fix_on_top.removeClass('fixed_on_top');
    }
} 
```

我还改编了适用于 THEAD 的原始代码（用于另一个网站）（表格 - 我每个网页都有一个表格，id =“tablesortable”）

```
// Automatically add the class "fix_on_scroll" on #tablesortable's thead
if ($('#tablesortable thead').length)
{
    var thead_cells = new Array();
    $('#tablesortable thead').addClass('fix_on_scroll');
    // Get the width of each cells in thead
    $('#tablesortable thead').find('td, th').each(function(i, v) {
        thead_cells.push($(this).width());
    });
    // Keep same with in tbody and tfoot
    $('#tablesortable tbody tr:first').children('td, th').each(function(i, v) {
        $(this).width(thead_cells[i]);
    });
    $('#tablesortable tfoot tr:first').children('td, th').each(function(i, v) {
        $(this).width(thead_cells[i]);
    });
}

// Fix all elements (with class .fix_on_scroll) just below the top menu on scroll
// (Modified version from homepage of Twitter's Bootstrap - js/application.js)
var $window     = $(window),
$fix_on_scroll  = $('.fix_on_scroll'),
fixed_elem_top  = $('.fix_on_scroll').length && $('.fix_on_scroll').offset().top - 26,
isFixed     = 0;

process_scroll();

// hack sad times - holdover until rewrite for 2.1
$fix_on_scroll.on('click', function () {
    if (!isFixed) setTimeout(function () {$window.scrollTop($window.scrollTop() - 40)}, 10)
});

$window.on('scroll', process_scroll);

function process_scroll()
{
    var i, scrollTop = $window.scrollTop();
    if (scrollTop >= fixed_elem_top && !isFixed)
    {
        isFixed = 1;
        $fix_on_scroll.addClass('fixed_on_scroll');

        // Keep original width of td/th
        if ($fix_on_scroll.is('thead'))
        {
            $fix_on_scroll.find('td, th').each(function(i, v) {
                $(this).width(thead_cells[i]);
            });
        }
    }
    else if (scrollTop <= fixed_elem_top && isFixed)
    {
        isFixed = 0
        $fix_on_scroll.removeClass('fixed_on_scroll')
    }
} 
```

我的（改编的）代码正在工作。你可以使用它们。

# ios4 - iPhone通话状态栏大小？

> ID：11380568
> 
> 赞同：0
> 
> 时间：2012-07-08T04:01:28.220
> 
> 标签：ios4, statusbar, ios5, iphone-sdk-3.2

有人知道通话状态栏的大小吗？我正在开发一个应用程序，主要在手机通话时使用，并希望制作 UI，以便在通话状态栏打开时可以使用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:13:40.160

最好的办法是注册 UIApplicationWillChangeStatusBarFrameNotification 的通知。您收到的通知会告诉您状态栏的大小，以便您现在拥有正确的东西，当您旋转到横向时正确的东西，当苹果改变状态栏的大小时正确的东西等等。

# java - 图像显示不正确

> ID：11380573
> 
> 赞同：4
> 
> 时间：2012-07-08T04:03:34.683
> 
> 标签：java, android

我正在制作一个使用惰性列表显示图像和文本的 android 应用程序。

我`json`从服务器获取数据。当我将一些数据和图像路径手动输入到 mysql 数据库中时，这些图像会在应用程序中正确显示。

但是当我从移动相机拍摄图像并上传该图像时，它会在 mysql 数据库中正确插入路径，但它没有显示在我的应用程序中。

有人能告诉我为什么我会遇到这个问题吗？我的 logcat 中没有错误。

其他人有这个问题吗？如果是，那么您是如何解决的？请帮我。

* * *

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home_list);

    inboxList = new ArrayList<HashMap<String, String>>();

    List<String> profile_photo = new ArrayList<String>();
    List<String> userName = new ArrayList<String>();
    List<String> place = new ArrayList<String>();

    list=(ListView)findViewById(R.id.list);
    //adapter=new LazyAdapter(this, tS, mTitles);
    list.setAdapter(adapter);

    /********************************/

    JSONObject json = userFunctions.homeData();

    Log.e("Data", json.toString());

    // Check your log cat for JSON reponse
    // Log.d("Inbox JSON: ", json.toString());

    try {
        data = json.getJSONArray("data");
        Log.d("inbox array: ", data.toString());
        // looping through All messages
        for (int i = 0; i < data.length(); i++) {
            JSONObject c = data.getJSONObject(i);

            // Storing each json item in variable
            String uid = c.getString("uid");
            String name = c.getString("name");
            String success = c.getString("success");
            String profile_img = c.getString("profile_photo");
            //String date = c.getString(TAG_DATE);

            JSONObject places = c.getJSONObject(TAG_PLACES);
            String place_photo = places.getString(TAG_PLACE_IMG);

            Log.e("place_photo", place_photo);
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put("uid", uid);
            map.put("name", name);
            map.put("success", success);
            map.put("profile_image", profile_img);

            profile_photo.add(profile_img);
            userName.add(name);
            place.add(place_photo);
            // adding HashList to ArrayList
            inboxList.add(map);
        }

        profile_image = new String[profile_photo.size()];
        user_name = new String[userName.size()];
        place_image = new String[(place.size())];

        profile_photo.toArray(profile_image);
        userName.toArray(user_name);
        place.toArray(place_image);
        adapter = new LazyAdapter(this, profile_image, user_name, place_image);
        list.setAdapter(adapter);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /*******************************/
} 
```

* * *

**这是惰性适配器类**

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private String[] data;
private String[] name;
private String[] place_photo;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, String[] d, String[] username, String[] place_image) {
    activity = a;
    data = d;
    name = username;
    place_photo = place_image;
    //Log.e("path", d.toString());
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.home_list_item, null);

    //TextView text=(TextView)vi.findViewById(R.id.text);
    TextView title = (TextView)vi.findViewById(R.id.username);
    ImageView image=(ImageView)vi.findViewById(R.id.image);
    ImageView place=(ImageView)vi.findViewById(R.id.place);
    //text.setText("item "+position);
    title.setText(name[position]);
    imageLoader.DisplayImage(data[position], image);
    imageLoader.DisplayImage(place_photo[position], place);
    return vi;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:43:13.030

> 但是当我从移动相机拍摄图像并上传该图像时，它确实在 mysql 数据库中正确插入了所有路径，但它仍然没有显示在我的应用程序中

新图片和旧图片的网址是一样的吗？

如果是这样，那么可能是图像缓存的情况。ImageLoader 以 URL 为 key 缓存图片。... 清除 App 数据后重试。

# delphi - 如何在delphi中编写mongodb代码

> ID：11380576
> 
> 赞同：4
> 
> 时间：2012-07-08T04:04:34.410
> 
> 标签：delphi, mongodb

这是我尝试过的原始代码：

```
obj = {
    sentence:  "this is a sentece", 
    tags: [ "some", "indexing", "words"]     
} 
```

和

```
findOne({tags: "words"}).name); 
```

我使用**TMongWire**作为 MongoDB for Delphi 的包装器，我写了这个：

```
//var
//  d:IBSONDocument;
d:=BSON([
    'id',mongoObjectID,
    'sentence', 'this is a sentece',
    'tags','["some", "indexing", "words"]'
]);
FMongoWire.Insert(theCollection,d); 
```

似乎上面的代码可以完成工作

* * *

但是当我用“标签”查询时，它似乎对我不起作用

```
//var 
//q:TMongoWireQuery;
//qb:IBSONDocument 
qb:=BSON(['tags', '"words"']); //***
q:=TMongoWireQuery.Create(FMongoWire);
q.Query(mwx2Collection, qb); //*** 
```

如何用***星号写两行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T14:43:12.327

错误不在查询中，在字段创建中。

在您编写它时，您将 tags 字段创建为字符串属性，而不是字符串数组。

```
d:=BSON([
    'id',mongoObjectID,
    'sentence', 'this is a sentece',
    'tags',VarArrayOf(['some', 'indexing', 'words'])
]);
FMongoWire.Insert(theCollection,d); 
```

您必须调用`VarArrayOf()`以创建字符串数组。

*编辑：介绍`VarArrayOf()`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T06:02:05.957

TMongoWire 尝试充分利用 OleVariant，因此您将数组作为变体数组传递，例如使用[VarArrayOf](http://docwiki.embarcadero.com/Libraries/en/System.Variants.VarArrayOf)：

```
FMongoWire.Insert(theCollection,BSON([
    'id',mongoObjectID,
    'sentence', 'this is a sentece',
    'tags',VarArrayOf(['some', 'indexing', 'words'])
]); 
```

并且没有字符串的javascript符号解析，所以写：

```
q.Query(mwx2Collection, BSON(['tags','words'])); 
```

# java - 使用 3.0 及更高版本的 HTTP Post Android SDK

> ID：11380580
> 
> 赞同：0
> 
> 时间：2012-07-08T04:07:05.373
> 
> 标签：java, android, android-asynctask, android-4.0-ice-cream-sandwich, httpurlconnection

我一直在尝试学习使用 Android SDK，并且遇到了尝试将信息发送到数据库的第一个问题。我的第一个想法是在 Android 中使用 POST 并将其发送到 PHP 脚本。但是，我发现的每个教程或示例都使用低于 3.0 的 Android 版本，这意味着他们在扩展类时不使用 AsyncTask 并使用 Activity。我不确定如何使用 ASyncTask 编写此代码，并且想要一些关于如何这样做的建议或示例，使其能够在 Android 3.0 及更高版本中工作。基本上我希望能够使用 Android Emulator 将变量发送到我网站上的 php 文件。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:16:42.860

只需将您的代码复制并粘贴`HttpPost`到`AsyncTask`'`doInBackground`方法中即可。您可以使用 通知 UI 进行进度更新`onProgressUpdate`，并且可以在任务完成时通知 UI `onPostExecute`。

有关如何实现请求的更多信息，请参阅此[**帖子**](http://www.vogella.com/articles/AndroidPerformance/article.html)`HttpGet`（帖子中的代码执行请求，因此将代码转换为使用`HttpPost`请求应该很简单）。

顺便说一句，您仍然应该使用 an`AsyncTask`在预 HoneyComb 设备上执行这些类型的请求。很多在线教程都错误地这样做了……请记住，您应该*始终*对单独`Thread`的 .

# objective-c - 从具有多种实体类型的 NSManagedObject 访问子属性

> ID：11380583
> 
> 赞同：0
> 
> 时间：2012-07-08T04:08:05.377
> 
> 标签：objective-c, ios, xcode

我有一种情况，我创建了一个 NSManagedObjects 的 NSArray，这些 NSManagedObjects 都派生自 CoreData 实体。问题是这个数组中有多个实体，但是数组中的每个实体都有一个我想检索的“名称”属性。

我来自 C++ 背景，如果遇到这个问题，我会创建另一个具有我想使用的属性的类，并让所有子对象都继承自 NSManagedObject 和具有我喜欢的属性的类。不幸的是，我看不到使用 Objective C 的方法，因为它不支持多重继承，而且我无法弄清楚处理像这样的小 OOP 问题的范式。:(

- -背景 - -

我正在处理的用例场景是，我想用来自各种对象类型的各种字符的单元格填充 UITableView。所有的角色都有一个名字，但它们都是唯一的对象类型。现在我可以像这样做一种类型：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CharNameCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    CharacterWizard *wizards = (CharacterWizard*)[self.characters objectAtIndex:indexPath.row];
    cell.textLabel.text = wizards.name;

    return cell;
} 
```

但是，正如你所看到的，当我有不同的类型时，这就会崩溃。我确信有一个更优雅的解决方案来处理这个问题，但是以前使用其他语言的经验阻碍了我（我认为）。希望这不是一个太长的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:19:58.600

一种方法是定义一个`Character`类，`CharacterWizard`并将其他类似的类变成以下的子类`Character`：

```
@interface Character : NSManagedObject
@property (nonatomic, strong) NSString *name;
@end

@interface CharacterWizard : Character
@property (nonatomic, strong) NSMutableArray *spells;
@end

@interface CharacterFighter : Character
// ...
@end 
```

另一种方法是使用[协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)，并让所有 NSManagedObjects 实现协议。例如，您的协议可能是：

```
@protocol HasName
@property (nonatomic, strong) NSString *name;
@end 
```

...然后你的`CharacterWizard`类将声明它实现（并将继续实现）`HasName`：

```
@interface CharacterWizard : NSManagedObject <HasName> 
```

...然后您的代码可以在`HasName`不知道对象的实际类的情况下引用实现协议的通用对象（并且可以调用协议的方法）：

```
id <HasName> jenkins = [self.characters objectAtIndex:indexPath.row];
cell.textLabel.text = jenkins.name; 
```

`Character`如果您的其他课程是`CharacterFighter`,等，我可能会推荐该选项`CharacterRogue`。如果`name`属性是你的类*唯一*的共同点，那么协议会更有意义。

# r - R中的非规范化矩阵

> ID：11380585
> 
> 赞同：2
> 
> 时间：2012-07-08T04:08:22.730
> 
> 标签：r, matrix, vectorization, denormalized

我在 R 中有一个 N x K 矩阵，其中每一行是一个观察值，每一列是一个具有固定下限和上限的变量。

我的矩阵最初设置为 0 到 1 之间的值。反规范化此矩阵的最佳方法是什么？我正在使用以下功能：

```
denormalizeMult = function(m, lb, ub)
{
 nobs = nrow(m)
 nvars = ncol(m)
 lbDiag = diag(lb, ncol = nvars)
 rangeM = diag(ub - lb, ncol = nvars) 

 m%*%rangeM + matrix(rep(lb, nobs), nrow = nobs, byrow = TRUE)
}

 # Example:
 # 3 variables, 9 observations
 x = matrix(runif(3*9), ncol = 3)

 # to denormalize a variable xi, just do lb[i] + (ub[i] - lb[i])*xi
 # ranges for each variable
 lb = c(-1,-2,-3)
 ub = c(1,2,3) 
```

第一个变量的范围是 -1 到 1，第二个变量的范围是 -2 到 2，依此类推……另一个解决方案是：

```
 denormalize2 = function(population)
   {
     r = nrow(population)
     c = ncol(population)
     decm = matrix(rep(0, r*c), r, c)

     for(i in 1:r)
           decm[i,] = lb + (ub - lb) * population[i,]       
     decm
 } 
```

有没有一种简单（更快）的方法来实现这一点？谢谢！

编辑：来自以下答案的结果：

![以下答案的结果：](../Images/abe75725b78ce8fedb37717e2dbef004.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:22:52.150

这是使用的解决方案`sweep()`：

```
## Example data
x <- matrix(c(0,0.5,1), nrow=3, ncol=3)  # A better example for testing 
lb = c(-1,-2,-3)
ub = c(1,2,3)

sweep(sweep(x, 2, ub-lb, FUN="*"), 2, lb, FUN="+")
#      [,1] [,2] [,3]
# [1,]   -1   -2   -3
# [2,]    0    0    0
# [3,]    1    2    3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:28:23.880

您可以使用双重转置：

```
t(lb + t(x) * (ub - lb)) 
```

# c# - 在 SdlDotNet 中使用 Video.Screen 而不是 Surface 对象

> ID：11380586
> 
> 赞同：0
> 
> 时间：2012-07-08T04:08:23.270
> 
> 标签：c#, sdl, sdl.net

我见过的每个 SDL 或 SdlDotNet 教程都使用定义的 Surface 作为主屏幕。例如

```
private static Surface videoscreen;
videoscreen = SetVideoMode(800, 600, 16, false, false, false, true);
videoscreen.Fill(Color.Black);
videoscreen.Blit(sprite);
videoscreen.Update(); 
```

然而，在尝试使用 SdlDotNet 构建游戏时，我注意到我可以简单地使用 Video.Screen 来执行我通常会在 Surface 屏幕上执行的任何操作。例如：

```
Video.SetVideoMode(800, 600, 16, false, false, false, true);
Video.Screen.Fill(Color.Black);
Video.Screen.Blit(sprite);
Video.Screen.Update(); 
```

每个人仍然使用已定义的 Surface 是否有原因？我假设在我的小游戏范围内我没有遇到过某种性能或稳定性问题，但我想知道以防我以后遇到麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:16:53.843

我知道帖子很旧，但是！如果您仍然感兴趣，这是我对这个主题的看法：

方法和属性`Surface`返回的对象不相等，但它们都使用相同的句柄，即指向图形数据的指针。我想说这主要是风格问题，两者都是在主显示表面上工作的有效方式。`Video.SetVideoMode()``Video.Screen`

*   `Video.SetVideoMode()`在 Video.cs 中导致以下内容：

    ```
    public static Surface SetVideoMode(int width, int height, int bitsPerPixel, bool resizable, bool openGL, bool fullScreen, bool hardwareSurface, bool frame)
    {
        /* ... */
        return new Surface(Sdl.SDL_SetVideoMode(width, height, bitsPerPixel, (int)flags), true);
    } 
    ```

    ...在 Surface.cs 中调用以下内部构造函数：

    ```
    internal Surface(IntPtr handle, bool isVideoMode)
    {
        this.Handle = handle;
        this.isVideoMode = isVideoMode;
    } 
    ```

*   或者，这是`Video.Screen`Video.cs 中的属性定义：

    ```
    /// <summary>
    /// Gets the surface for the window or screen,
    /// must be preceded by a call to SetVideoMode
    /// </summary>
    /// <returns>The main screen surface</returns>
    public static Surface Screen
    {
        get
        {
            return Surface.FromScreenPtr(Sdl.SDL_GetVideoSurface());
        }
    } 
    ```

    ...在 Surface.cs 中调用以下内部工厂方法：

    ```
    internal static Surface FromScreenPtr(IntPtr surfacePtr)
    {
        return new Surface(surfacePtr);
    } 
    ```

    ...依次调用 Surface.cs 中的以下内部构造函数：

    ```
    internal Surface(IntPtr handle)
    {
        this.Handle = handle;
    } 
    ```

如果您比较and`Surface`返回的对象的句柄，您将看到它们是相等的，这是您需要知道的所有内容，以确保您实际使用的是相同的数据。`Video.SetVideoMode()``Video.Screen`

希望这可以帮助！

资料来源：

[https://www.assembla.com/code/lightcs/subversion/nodes/trunk/sdldotnet-6.1.0/source/src/Graphics/Video.cs?rev=4](https://www.assembla.com/code/lightcs/subversion/nodes/trunk/sdldotnet-6.1.0/source/src/Graphics/Video.cs?rev=4)

[https://www.assembla.com/code/lightcs/subversion/nodes/trunk/sdldotnet-6.1.0/source/src/Graphics/Sur​​face.cs?rev=4](https://www.assembla.com/code/lightcs/subversion/nodes/trunk/sdldotnet-6.1.0/source/src/Graphics/Surface.cs?rev=4)

# java - Android 绘制位图画布耗时太长

> ID：11380591
> 
> 赞同：0
> 
> 时间：2012-07-08T04:10:30.130
> 
> 标签：java, android, android-canvas

我正在尝试使用画布制作一个 android 游戏，我知道这很糟糕，因为 opengl 更好，但我当时并没有真正考虑过，现在我几乎完成了它，我只想完成它并转换稍后将其用于opengl。

因此，在我的 onDraw 开始时，我使用以下代码绘制了一个位图：

```
Log.d("Start Time", System.nanoTime()/1000000 + "");
        canvas.drawBitmap(bitmaps.Background(), null, bg, paint);
        Log.d("After drawColor", System.nanoTime()/1000000 + ""); 
```

因此，如您所见，我根据矩形绘制位图，因此它被拉伸和绘制。使用日志查看执行此操作需要多长时间，我发现仅绘制一张位图就需要大约 15 到 20 毫秒！

有谁知道为什么会这样？此外，如果有人知道从画布切换到 opengl 的简单方法，那就太棒了：p

威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:30:28.210

是`bg`一个`Rect`？如果是这样，位图可能必须在绘制之前进行缩放，这会耗费时间。看看你是否可以预先缩放位图。

其次，你真的需要`paint`在`drawBitmap`通话中吗？`null`如果您不进行转换，则可以改为通过。

另外，为什么不使用`System.currentTimeMillis()`而不是划分纳秒来获得毫秒？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:14:50.723

我注意到 bitmaps.Background() 是一种方法；是否有机会反复从资源文件中解压缩位图？如果您每帧都绘制一个位图，您应该将位图对象保存在内存中。（仅仅在屏幕上绘制一个预先存在的位图对象不会花费那么长时间。）

# javascript - 将滚动位置调整到最近的容器

> ID：11380594
> 
> 赞同：0
> 
> 时间：2012-07-08T04:11:22.080
> 
> 标签：javascript, jquery, scroll, positioning

我目前正在寻找一个 JavaScript（例如 Jquery lib）解决方案来将滚动的位置调整为特定的 css 类。目标是将滚动条重新定位在最近的容器上。

作为本网站：[http ://www.takumitaniguchi.com/tokyoblue/](http://www.takumitaniguchi.com/tokyoblue/)

感谢 JUJU

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:39:05.987

如果您使用 JQuery，如果我正确理解您的问题，则相对容易实现。大致如下我会怎么做：

```
function scrollTo(a){
    //Get current scroll position
    var current = (document.all ? document.scrollTop : window.pageYOffset);
    //Define variables for data collection
    var target = undefined;
    var targetpos = undefined;
    var dif = 0;
    //check each selected element to see witch is closest
    $(a).each(function(){
        //Save the position of the element to avoid repeated property lookup
        var t = $(this).position().top;
        //check if there is an element to check against
        if (target != undefined){
            //save the difference between the current element's position and the current scroll position to avoid repeated calculations
            var tdif = Math.abs(current - t);
            //check if its closer than the selected element
            if(tdif < dif){
                //set the current element to be selected
                target = this;
                targetpos = t;
                dif = tdif;
            }
        } else {
            //set the current element to be selected
            target = this;
            targetpos = t;
            dif = Math.abs(current - t);
        }
    });
    //check if an element has been selected
    if (target != undefined){
        //animate scroll to the elements position
        $('html,body').animate({scrollTop: targetpos}, 2000);
    }
} 
```

这可能不是最好的方法，但它应该有效。只需调用该函数并将 JQuery 选择作为第一个参数传递。

# javascript - 如何在 Chrome Developer 中查看 DOM 对象的属性？

> ID：11380602
> 
> 赞同：10
> 
> 时间：2012-07-08T04:14:50.703
> 
> 标签：javascript, google-chrome-devtools

我想在 Google Chrome Web Developer Tools 中检查一个 DOM 对象的属性，所以我调用`console.debug();`了一个 DOM 元素作为参数：

HTML：

```
<audio controls="controls">
  <source src="http://upload.wikimedia.org/wikipedia/commons/6/65/Star_Spangled_Banner_instrumental.ogg" type="audio/ogg" />
  Your browser does not support the audio tag.
</audio> 
```

Javascript：

```
console.debug(document.getElementsByTagName('source')[0]);​ 
```

[JS小提琴](http://jsfiddle.net/PkGj4/)

但是，Chrome 控制台仅在调用时显示元素的 HTML，`console.debug();`而不显示 DOM 节点对象的任何 javascript 属性。

如何在 Chrome Developer 中查看 DOM 对象的属性？我正在使用 Mac。​</p>

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-08-13T19:37:52.780

在 Chrome 中，您应该使用以下`dir`方法：

```
console.dir(document.getElementsByTagName('source')[0]);​ 
```

或者对于当前检查/突出显示的元素：

```
console.dir($0);​ 
```

这将为您提供如下结果：

[![在此处输入图像描述](../Images/980748c0ccb14d1b39c2893e0f6b5d56.png)](https://i.stack.imgur.com/LCugo.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T04:59:43.260

您要做的是在末尾添加属性标签。这将返回一个属性数组。您可能需要 JavaScript 工具包才能真正做到这一点，但是无论有多少属性，您都可以只使用一个循环来遍历属性。

```
sourceAttributes = document.getElementsByTagName('source')[0].attributes
for(int i=0; i<sourceAttributes.length; i++) {
    console.debug(sourceAttributes[i]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-29T08:11:17.490

`console.dir(document.getElementsByTagName('source')[0])`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-23T17:12:56.110

**[HTML 元素](https://developer.mozilla.org/en-US/docs/Web/API/Element)属性**（类似`scrollTop`or的东西`clientHeight`，远远超出 CSS 属性）位于元素选项卡下。

（此选项卡可以在选项卡顺序中非常靠右，因此隐藏在`»`“更多”选项卡中。您可以通过向左拖动它们来更改 DevTools 选项卡顺序。）

[![在此处输入图像描述](../Images/5d2fb1e6a8493b523d3b11cce29bcc41.png)](https://i.stack.imgur.com/ZFkhj.png)

遗憾的是，右键单击“添加要观看的属性路径”的选项（然后显示在常规源选项卡中）不起作用，因为只有属性名称被复制到那里，没有办法选择 HTML 元素[（不像宣传的那样)](https://developers.google.com/web/updates/2018/05/devtools#watch) .

**因此，您需要手动输入选择机制和属性，例如：**

```
document.getElementById('123').scrollTop
document.getElementsByTagName('scrollbox')[0]
etc… 
```

[![](../Images/3e1e6739ab60850b892de701ff490271.png)](https://i.stack.imgur.com/D6qtX.png)

# java - 规范说“REST API 实现”是什么意思？

> ID：11380603
> 
> 赞同：0
> 
> 时间：2012-07-08T04:15:08.960
> 
> 标签：java, rest, jakarta-ee

例如，客户端使用 Java EE 制作具有“REST API 实现”的软件。

我认为默认情况下 Web 应用程序正在实现 REST？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:32:16.040

好吧，作为替代方案，可以使用[SOAP API 实现。](http://en.wikipedia.org/wiki/SOAP)

# asp.net - Asp.Net Webforms 与 Asp.Net WebSite(Razor) 与 Asp.Net MVC

> ID：11380607
> 
> 赞同：28
> 
> 时间：2012-07-08T04:16:15.090
> 
> 标签：asp.net, .net, asp.net-mvc, razor

我认为微软必须有理由使用 RAZOR 语法来增强 ASP.Net。

在 Visual Studio 的*Create New Website Project*对话框中，还有另一个用于创建 ASP.Net (Razor) 的选项。我第一次遇到*Razor*这个词是在我读一本关于 Asp.Net MVC 的书时，我不知道它存在于 ASP.Net

![在此处输入图像描述](../Images/0665ab4051174f47a9a55858b3fe1ef2.png)

我知道 MVC 3 中引入的 Razor 语法的用途。在问这个问题之前，我决定为 ASP.Net (Razor) 创建一个测试项目，看看它与普通的 ASP.Net webforms 和 ASP.Net 有何不同MVC。我发现没有像 MVC 中那样的 Model/View/Controllers 文件夹。

我发现母版页的指定方式不同，母版页更干净，没有更多`<asp:ContentPlaceHolder />`

但我的问题是：

*   我注意到它使用了`.cshtml`，没有更多的代码隐藏了吗？
*   ASP.Net (Razor) 和 ASP.Net MVC 的异同
*   它可以扩展为像 ASP.Net MVC 那样的功能，例如添加控制器？视图/模型，我猜自定义路由？
*   当我们有 ASP.Net MVC 时，为什么会存在这种情况？这不会鼓励人们不愿意转向 ASP.Net MVC 吗？
*   **为什么你会选择 ASP.Net+Razor 而不是 ASP.Net MVC？**

> **更新：** [特别是 ASP.NET 网页旨在](http://www.asp.net/web-pages/overview/getting-started/aspnet-web-pages-%28razor%29-faq)使已经了解 HTML 的人可以轻松地将服务器处理添加到他们的页面。对于学生、业余爱好者和一般不熟悉编程的人来说，这是一个不错的选择。对于具有非 ASP.NET Web 技术经验的开发人员来说，它也是一个不错的选择
> 
> **更新** [ASP.NET 网页](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/create-the-project)ASP.NET 网页的目标用户是想要一个简单的 Web 开发故事的开发人员，类似于 PHP。在 Web Pages 模型中，您创建 HTML 页面，然后将基于服务器的代码添加到页面，以便动态控制该标记的呈现方式。Web Pages 专门设计为一个轻量级框架，对于了解 HTML 但可能没有广泛编程经验的人（例如，学生或业余爱好者）来说，它是最简单的 ASP.NET 入口点。对于了解 PHP 或类似框架的 Web 开发人员来说，这也是开始使用 ASP.NET 的好方法。
> 
> [Asp.Net 网页](http://www.asp.net/web-pages)

拜托，我需要你的技术意见。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-08T04:51:55.273

这是一个很好的问题。首先，让我们来描述 Razor。

Razor 是一个解析服务器端代码并​​发出 Html 的引擎，就像 ASP.NET Web 表单一样，只是具有不同的并且可以说更精简和简洁的语法。

Razor v. Web 窗体边栏：在 ASP.NET Web 窗体中，您必须确定何时要使用“<%”开始编写服务器代码，然后当您完成编写服务器代码时，您需要使用“%>”来标识它。我喜欢 ASP.NET Web 窗体，但这很笨重。使用 Razor，您可以确定何时要使用 '@' 开始编写服务器代码，然后在下次开始编写服务器标记（以 '<' 开头）时，它会“确定”您已经完成了服务器代码。这是一种更简洁的方式来编写与一些服务器代码混合的 html。

ASP.NET Web Pages 是一个用于创建简单 Web 应用程序的框架。ASP.NET MVC 是一个使用模型-视图-控制器 (MVC) 模式使用 Web 窗体或 Razor 引擎创建 Web 应用程序的框架。ASP.NET Web 窗体是一个使用 Web 窗体呈现引擎创建 Web 应用程序的框架。

最终目标是根据正在构建的应用程序的复杂性提供选择。了解每一项有助于您为您的应用做出正确的选择。

附加链接：

*   [ScottGu 的博客 - 介绍 Razor](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)
*   [ScottGu 的博客 - 介绍 WebMatrix](http://weblogs.asp.net/scottgu/archive/2010/07/06/introducing-webmatrix.aspx)
*   [带有 Razor 语法的 ASP.NET 网页 (MSDN)](http://msdn.microsoft.com/en-us/library/gg549172%28v=vs.99%29.aspx)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-15T14:25:34.767

在MVC模式中，M是Model，C是Controller，V是View。因此，很自然地，在 ASP.NET MVC 模型中，存在*View Engine*的概念。Razor 只是提供的视图引擎之一。开箱即用的另一种是“旧的”WebForms（顺便说一句，您也可以编写自己的视图引擎）。所以 Razor 没有代码隐藏的概念，代码隐藏在 WebForms 视图引擎边界内。

所以这有点说明了一切。Razor 处理 MVC 的 View 部分（如果您选择使用它而不是 WebForms 之一）。它与 M 或 C 无关。

就个人而言，如果您选择 ASP.NET MVC 模式，或者使用没有 MVC 的普通 WebForms，我肯定会选择 Razor View Engine，因为 Razor 的设计比 Webforms 更简洁，更易于使用。它也是最近的，所以它试图......只是更好:-)

附带说明一下，Razor Parser 也可以在ASP.NET MVC*之外使用。*它是在一个完全不依赖 MVC 或 Web 程序集的程序集中实现的。有关更多信息，请参见此处：[http ://www.west-wind.com/weblog/posts/2010/Dec/27/Hosting-the-Razor-Engine-for-Templating-in-NonWeb-Applications](http://www.west-wind.com/weblog/posts/2010/Dec/27/Hosting-the-Razor-Engine-for-Templating-in-NonWeb-Applications)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-08T04:23:11.383

默认情况下没有代码隐藏，但您可以轻松地使您的 razor 文件继承自您的自定义类：

```
@inherits Index 
```

进而

```
public class Index : WebViewPage { } 
```

（更多信息在这里： http: [//www.compiledthoughts.com/2011/01/aspnet-mvc3-creating-razor-view-engine.html](http://www.compiledthoughts.com/2011/01/aspnet-mvc3-creating-razor-view-engine.html)）

这更像是一种老式的 web 方式，更像 asp3。与 mvc 的不同之处在于，mvc 提供了一个庞大的框架来支持现实世界的应用程序（使用路由、控制器和操作，而不仅仅是“标记中的代码”）。

我认为它的存在是为了制作非常简单的东西，但我实际上并不知道......

最后，我总是选择 asp.net mvc with razor。

希望能帮助到你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-14T09:37:08.347

好吧，你有两个选择：

1.  使用 WebForms：开箱即用，准备使用服务器端控件（混合标记和业务代码）并使用母版页和皮肤，但面临这些便利所涉及的一些复杂性！:)

2.  使用 MVC：或使用分离的设计模型，为您提供更有条理的代码库。你可以先做一个设计原型，或者先做一个业务代码，然后再构建另一个方面，相当容易。甚至你可以让设计师对他的工作有更多的控制权，让他/她有能力做他/她想做的一切。-> 这个是我的首选，因为它让我可以更好地控制我的代码，让我的代码更加简洁和干净。

如果您选择了 MVC 模式，那么您将面临另一种选择... 查看引擎

1.  旧的 MVC 视图引擎：还不错，但有点冗长
2.  Razor Engine：它和#1 做的一样，为什么你不想使用它？！它没有取代任何 MVC 模式。它也更加简洁和容易，您既拥有 MVC 的强大功能，又拥有 Razor 引擎的简单性。Razor 是一种更智能的标记内语法，它可以帮助您专注于您的业务，而不是编写 "<%"s ！通过使用 razor 语法，您将获得一个好处，MVC 的全部功能触手可及！

您还可以仅使用 razor（C# 或 VB）语法编写简单的 asp.net 网页。（就像 php 一样）

*   我个人的选择是 MVC+Razor，最佳组合！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T04:23:53.770

1.  MVC 中没有“代码隐藏”，期间。你所拥有的是控制器，它同时存在于 Razor 和非 Razor 中。
2.  它们只是两种不同类型的标记。（见下一个答案）
3.  它没有取代 MVC，它只是另一种选择。传统的标记非常冗长。Razor 语法简洁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-21T05:45:19.593

为了摆脱 webform、MVC、Razor、WebPages 和更多来自微软的混淆，我更喜欢 html-->javascript-->webapi。

# mysql - django全文搜索mysql

> ID：11380610
> 
> 赞同：0
> 
> 时间：2012-07-08T04:17:10.360
> 
> 标签：mysql, django

我`User`在 django 中有默认模型，如下所示：

```
delimiter $$

CREATE TABLE `auth_user` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `username` varchar(30) NOT NULL,
    `first_name` varchar(30) NOT NULL,
    `last_name` varchar(30) NOT NULL,
    `email` varchar(75) NOT NULL,
    `password` varchar(128) NOT NULL,
    `is_staff` tinyint(1) NOT NULL,
    `is_active` tinyint(1) NOT NULL,
    `is_superuser` tinyint(1) NOT NULL,
    `last_login` datetime NOT NULL,
    `date_joined` datetime NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE KEY `username` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=latin1$$ 
```

我试图通过添加全文搜索`alter table 'auth_user' add fulltext(first_name), last_name, email)`，但我不断收到错误`Error Code: 1214\. The used table type doesn't support FULLTEXT indexes`。这有什么不支持全文搜索的原因吗？我在想可能是因为我扩展了模型并添加了自己的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:24:26.227

全文索引仅适用于 MyISAM 表，而您的是 InnoDB。[资源](http://dev.mysql.com/doc/refman/5.1/en/fulltext-search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:42:52.917

您可能想使用 Django-Sphinx 进行全文搜索或查看它们的实现。[https://github.com/dcramer/django-sphinx](https://github.com/dcramer/django-sphinx)

# iphone - 控制器标签栏的相机视图

> ID：11380611
> 
> 赞同：0
> 
> 时间：2012-07-08T04:17:14.910
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在标题中声明了这一点：

```
#import <UIKit/UIKit.h>

@interface NFNoteCamera : UIImagePickerController

@end 
```

并接收 27 个语义问题，例如

> 属性“cameraCaptureMode”需要定义方法“cameraCaptureMode” - 使用@synthesize、@dynamic 或在此类实现中提供方法实现

包括“allowsImageEditing”、“allowsEditing”和其他相机特色问题。如果我不得不猜测这是我还没有导入的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:29:13.067

正如[医生](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)所说

> **重要**UIImagePickerController 类仅支持纵向模式。此类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改，但有一个例外。在 iOS 3.1 及更高版本中，您可以将自定义视图分配给 cameraOverlayView 属性，并使用该视图来呈现附加信息或管理相机界面和代码之间的交互

你为什么不直接实现它的委托？

```
@interface NFNoteCamera : ParentClass <UIImagePickerControllerDelegate>
{
   UIImagePickerController *yourPicker;  
}
@end

@implementation NFNoteCamera
-(void)anyMethod{
yourPicker = [[UIImagePickerController alloc] init];
yourPicker.delegate = self;
[yourPicker setAllowsEditing:BOOL];
              //or photo library(UIImagePickerControllerSourceTypePhotoLibrary)
yourPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
[self presentModalViewController:yourPicker animated:YES];
}
//delegate methods
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
       UIImage *producedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
}
@end 
```

# php - 使用 PHP 删除只有 3 个字符或更少的单词

> ID：11380612
> 
> 赞同：0
> 
> 时间：2012-07-08T04:17:23.453
> 
> 标签：php

我使用 php 类从文章中制作标签云，但我想删除只有 3 个字符或更少的单词，也删除数字单词。

示例标签： 1111 猴 鹿 猫 猪 水牛

我想要结果：猴鹿水牛

该类的 PHP 代码（[此处](http://code.google.com/p/web-information-systems/source/browse/trunk/SentimentAnalysisProject/Sukalp/cloud.php?r=36)为完整代码）

```
 function keywords_extract($text)
{
    $text = strtolower($text);
    $text = strip_tags($text);

    /* 
     * Handle common words first because they have punctuation and we need to remove them
     * before removing punctuation.
     */
    $commonWords = "'tis,'twas,a,able,about,across,after,ain't,all,almost,also,am,among,an,and,any,are,aren't," .
        "as,at,be,because,been,but,by,can,can't,cannot,could,could've,couldn't,dear,did,didn't,do,does,doesn't," .
        "don't,either,else,ever,every,for,from,get,got,had,has,hasn't,have,he,he'd,he'll,he's,her,hers,him,his," .
        "how,how'd,how'll,how's,however,i,i'd,i'll,i'm,i've,if,in,into,is,isn't,it,it's,its,just,least,let,like," .
        "likely,may,me,might,might've,mightn't,most,must,must've,mustn't,my,neither,no,nor,not,o'clock,of,off," .
        "often,on,only,or,other,our,own,rather,said,say,says,shan't,she,she'd,she'll,she's,should,should've," .
        "shouldn't,since,so,some,than,that,that'll,that's,the,their,them,then,there,there's,these,they,they'd," .
        "they'll,they're,they've,this,tis,to,too,twas,us,wants,was,wasn't,we,we'd,we'll,we're,were,weren't,what," .
        "what'd,what's,when,when,when'd,when'll,when's,where,where'd,where'll,where's,which,while,who,who'd," .
        "who'll,who's,whom,why,why'd,why'll,why's,will,with,won't,would,would've,wouldn't,yet,you,you'd,you'll," .

    $commonWords = strtolower($commonWords);
    $commonWords = explode(",", $commonWords);
    foreach($commonWords as $commonWord) 
    {
        $text = $this->str_replace_word($commonWord, "", $text);  
    }

    /* remove punctuation and newlines */
    /*
     * Changed to handle international characters
     */
    if ($this->m_bUTF8)
        $text = preg_replace('/[^\p{L}0-9\s]|\n|\r/u',' ',$text);
    else
        $text = preg_replace('/[^a-zA-Z0-9\s]|\n|\r/',' ',$text);

    /* remove extra spaces created */
    $text = preg_replace('/ +/',' ',$text);
    $text = trim($text);
    $words = explode(" ", $text);
    foreach ($words as $value) 
    {
        $temp = trim($value);
        if (is_numeric($temp))
            continue;
        $keywords[] = trim($temp);
    }
    return $keywords;
} 
```

我尝试了各种方法，例如 use `if (strlen($words)<3 && is_numeric($words)==true)`，但没​​有奏效。

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:37:09.020

您应该将`&&`to `||`:
from:更改
`if (strlen($words)<3 && is_numeric($words)==true)`
为：
`if (strlen($words)<3 || is_numeric($words)==true)`

如果你想删除**有**3 个字符或更少的单词，
那么你应该使用`<=`而不是`<`：
`if (strlen($words) <= 3 || is_numeric($words)==true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:54:07.803

你可以用正则表达式来做

改变：

```
/* remove extra spaces created */
$text = preg_replace('/ +/',' ',$text);
$text = trim($text);
$words = explode(" ", $text); 
```

至：

```
/* remove extra spaces created */
$words = preg_replace('/\b\w{1,3}\s|[0-9]/gi','',$text);
return $words; 
```

并删除以下 foreach 部分，包括返回；

以下是正则表达式模式的解释：

```
\b = Match a word boundary position (whitespace or the beginning/end of the string).
\w = Match any word character (alphanumeric & underscore).
{1,3} = Matches 1 to 3 of the preceeding token.
\s = Match any whitespace character (spaces, tabs, line breaks).
| = or.
[0-9] = Match any numeric character. 
```

以下是对这种模式的人类可以理解的解释：“找到一个词——从起始位置到 1 或 3 个字符的长度和后面的空格具有任何单词字符——或——任何数字字符——并替换它带有一个空字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T05:17:01.743

我将稍微修改您的流程以使其运行得更快（我相信它应该）。

**第1步：**我不会将每个常用词替换为空字符串`$text`（替换过程很昂贵），而是将每个常用词存储到哈希表中以供以后过滤。

```
$commonWords = explode(",", $commonWords);
foreach($commonWords as $commonWord)
    $hashWord[$commonWord] = $commonWord; 
```

**第二步：**过滤常用词、数字和同时包含少于4位数字的词。

```
$words = preg_split("/[\s\n\r]/", $text);
foreach ($words as $value) 
{
    // Skip it is common word
    if (isset($hashWord[$value])) continue;
    // Skip if it is numeric
    if (is_numeric($value)) continue;
    // Skip if word contains less than 4 digits
    if (strlen($value) < 4) continue;

    $keywords[] = preg_replace('/[^a-zA-Z0-9\s].+/', '', $value);
} 
```

* * *

下面是这个函数的完整源代码（如果你想复制和粘贴）

```
function keywords_extract($text) {
    $text = strtolower($text);
    $text = strip_tags($text);

    $commonWords = "'tis,'twas,a,able,about,across,after,ain't,all,almost,also,am,among,an,and,any,are,aren't," .
        "as,at,be,because,been,but,by,can,can't,cannot,could,could've,couldn't,dear,did,didn't,do,does,doesn't," .
        "don't,either,else,ever,every,for,from,get,got,had,has,hasn't,have,he,he'd,he'll,he's,her,hers,him,his," .
        "how,how'd,how'll,how's,however,i,i'd,i'll,i'm,i've,if,in,into,is,isn't,it,it's,its,just,least,let,like," .
        "likely,may,me,might,might've,mightn't,most,must,must've,mustn't,my,neither,no,nor,not,o'clock,of,off," .
        "often,on,only,or,other,our,own,rather,said,say,says,shan't,she,she'd,she'll,she's,should,should've," .
        "shouldn't,since,so,some,than,that,that'll,that's,the,their,them,then,there,there's,these,they,they'd," .
        "they'll,they're,they've,this,tis,to,too,twas,us,wants,was,wasn't,we,we'd,we'll,we're,were,weren't,what," .
        "what'd,what's,when,when,when'd,when'll,when's,where,where'd,where'll,where's,which,while,who,who'd," .
        "who'll,who's,whom,why,why'd,why'll,why's,will,with,won't,would,would've,wouldn't,yet,you,you'd,you'll,";

    $commonWords = explode(",", $commonWords);
    foreach($commonWords as $commonWord)
        $hashWord[$commonWord] = $commonWord;

    $words = preg_split("/[\s\n\r]/", $text);
    foreach ($words as $value) 
    {
        // Skip it is common word
        if (isset($hashWord[$value])) continue;
        // Skip if it is numeric
        if (is_numeric($value)) continue;
        // Skip if word contains less than 4 digits
        if (strlen($value) < 4) continue;

        $keywords[] = preg_replace('/[^a-zA-Z0-9\s].+/', '', $value);
    }
    return $keywords;
} 
```

* * *

**演示**：ideone.com/obG6n

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:15:41.063

现在我添加`$text = preg_replace('!\\b\\w{1,3}\\b!', ' ', $text);`

前

```
 $text = preg_replace('/ +/',' ',$text);
    $text = trim($text);
    $words = explode(" ", $text); 
```

没有错误:)

[资源](http://forums.devshed.com/php-development-5/help-with-preg-replace-34726.html)

如果你想使用这个 php 类，你可以[在这里获取代码](http://code.google.com/p/web-information-systems/source/browse/trunk/SentimentAnalysisProject/Sukalp/cloud.php?r=36)

感谢你所做的一切 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T04:22:25.847

```
If((strlen($word) <=  3) && is_numeric($words)){
     //Don't add in the list
} 
```

# javascript - 如何使用javascript在文本字段中逐字阅读

> ID：11380615
> 
> 赞同：0
> 
> 时间：2012-07-08T04:17:49.643
> 
> 标签：javascript, checksum, verify

我想使用 javascript 验证新加坡身份证，公式是

1) 以我想测试 NRIC 号码 S1234567 为例。第一个数字乘以 2，第二个数字乘以 7，第三个数字乘以 6，第四个数字乘以 5，第五个数字乘以 4，第六个数字乘以 3，第七个数字乘以 2。然后将总数相加。所以，1×2+2×7+3×6+4×5+5×4+6×3+7×2=106。

2) 如果身份证的第一个字母以 T 或 G 开头，则总数加 4。

3) 然后你把这个数除以 11 得到余数。106/11=9r7

4) 您可以使用以下代码根据 IC 类型（IC 中的第一个字母）获取字母表： 如果 IC 以 S 或 T 开头：0=J，1=Z，2=I，3=H， 4=G, 5=F, 6=E, 7=D, 8=C, 9=B, 10=A 如果IC以F或G开头：0=X, 1=W, 2=U, 3= T, 4=R, 5=Q, 6=P, 7=N, 8=M, 9=L, 10=K

我如何阅读每个数字来计算公式？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:31:53.163

```
string.charAt(charpos) 
```

应该做的伎俩。

或者，

```
string.substr(charpos,1) 
```

你也可以做

```
string[charpos] 
```

但建议使用上述前两个。如果字符串为空，这将返回`undefined`，而其他选项都将返回空字符串。

另一个想法是

```
string.split("")[charpos] 
```

最后，有

```
string.slice(charpos,1) 
```

由于您一次只需要一个字符，我建议您使用`charAt`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:47:37.337

字符串是数组，因此您可以将变量分配给字母，假设您知道字符串具有固定长度，并且看起来如此，然后创建一个函数来评估字符并执行正确的操作：

```
var nric = 'S1234567'
var chars = {
  letter: nric[0],
  one: nric[1],
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T08:31:30.697

详细说明@elclanrs 答案：

```
var nric = 'S1234567'
var numVal = 0;     for(var i = 1, bound = nric.length; i < bound; i++){
      numVal +=  parseInt(nric[i]);
    }
if(nric[0] === 'S' && numVal === 28){
    alert('ok');
}else{
    alert('wrong');
} 
```

应该或多或少地做到这一点。我相信，你可以自己做乘法:-)

# javascript - 获取 HTML 父窗口不起作用。建议？

> ID：11380618
> 
> 赞同：0
> 
> 时间：2012-07-08T04:18:46.130
> 
> 标签：javascript

我有以下两个 HTML 文档：

## 主.html

```
<html lang="eng">
<head>
  <title>JavaScript Example</title>
  <script type="text/javascript">

    var ExamId = "001A";

    function open_exam()
    {
      window.open("exam.html")
    }
  </script>
</head>
  <body>
    <input type=button value="Open Exam" onclick="open_exam()">
  </body>
</html> 
```

## 考试.html

```
<html lang="eng">
<head>
  <title>JavaScript Example</title>
  <script type="text/javascript">
    function setParentInfo()
    {
        window.parent.document.ExamID = '001B';
    }
  </script>
</head>
  <body>
    <p>Welcome to the Exam!</p>
    <input type=button value="Set Parent Info" onclick="setParentInfo()">
  </body>
</html> 
```

* * *

Main.html 通过输入按钮调出 Exam.html。从 Exam.html 内部我想更改父文档上的变量 ExamID（即：Main.html）。我正在尝试通过 JavaScript 函数执行此操作：setParentInfo()。

上面的代码不起作用。有人可以帮我想出正确的代码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T04:46:46.137

变量是在`window`对象上分配的，而不是在`document`对象上。

由于该值已设置，您可以改为读取现有值来验证它：

```
alert(window.parent.ExamId); // == "001A" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:53:54.410

变量在父窗口中声明和分配，因此您可以从子窗口中获得引用。

您可以使用`alert`语句进行测试：

```
alert(window.parent.document.ExamId);

//output::001B 
```

# iphone - 在 iOS / iPhone 上向 Fragment Shader OpenGL ES 2.0 发送 BOOL 值

> ID：11380619
> 
> 赞同：3
> 
> 时间：2012-07-08T04:18:46.570
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0, fragment-shader

我是 OpenGL ES 2.0 的新手，所以请多多包涵……我想将一个 BOOL 标志传递到我的片段着色器中，以便在我的应用程序中发生某个触摸事件后，它会以不同的方式呈现 gl_FragColor。我尝试为此使用 vec2 属性，只是将 .x 值“伪造”为我的“BOOL”，但看起来 OpenGL 在着色器获取它之前将值从 0.0 标准化为 1.0。因此，即使在我的应用程序中我已将其设置为 0.0，当着色器执行其操作时，该值最终也会达到 1.0。任何建议将不胜感激。

**顶点属性代码：**

```
// set up context, shaders, use program etc.

[filterProgram addAttribute:@"inputBrushMode"];
inputBrushModeAttribute = [filterProgram attributeIndex:@"inputBrushMode"];

bMode[0] = 0.0;
bMode[1] = 0.0;

glVertexAttribPointer(inputBrushModeAttribute, 2, GL_FLOAT, 0, 0, bMode); 
```

**当前顶点着色器代码：**

```
...
attribute vec2 inputBrushMode;
varying highp float brushMode;

void main()
{
    gl_Position = position;
    ...
    brushMode = inputBrushMode.x;
} 
```

**当前片段着色器代码：**

```
...
varying highp float brushMode;

void main()
{
    if(brushMode < 0.5) {
        // render the texture
        gl_FragColor = texture2D(inputImageTexture, textureCoordinate);
    } else {
        // cover things in yellow funk
        gl_FragColor = vec4(1,1,0,1);
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T05:42:25.773

而是将布尔值创建为`glUniform`（1.0 或 0.0）。用 设置它的值`glUniform1f(GLint location, GLfloat v0)`。在着色器中，像这样检查它的值：

```
if (my_uniform < 0.5) {
    // FALSE
} else {
    // TRUE
} 
```

# iphone - 无法在 xcode4.2 中禁用 ARC

> ID：11380624
> 
> 赞同：2
> 
> 时间：2012-07-08T04:20:03.530
> 
> 标签：iphone, ios, xcode, automatic-ref-counting

我正在研究 ARC 环境，我通过`-fno-objc-arc`. 我也想为我自己的类禁用它，我做了与 Facebook API 类相同的方法，但我无法禁用 ARC。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:27:21.043

要消除此错误，您需要禁用 ARC，要从项目中禁用 ARC，请执行以下步骤。

选择您的项目文件。您应该在“构建设置”选项卡中。
选择“级别”选项（默认为“组合”） “组合”
右侧有一个搜索字段。输入“Automatic” 第二组应该是“Apple LLVM Compiler 3.0 – Language”。
控制ARC下的第二行。单击该行，然后在中间列（其中显示“是”），单击并选择“否”。
现在错误应该消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:46:48.057

只是为了确保您在正确的位置执行此操作：

*   在项目导航器中，点击最上面的项目，项目名称
*   在显示项目和目标的窗格中，选择包含非弧文件的正确目标
*   转到构建阶段，打开编译源
*   选择需要非arc的文件，双击，输入-fno-objc-arc
*   建造。

因此，请仔细检查您是否这样做，尤其是选择正确的目标。

# mysql - 如何抓取表格中最受欢迎的行？

> ID：11380626
> 
> 赞同：0
> 
> 时间：2012-07-08T04:20:25.420
> 
> 标签：mysql

我有一张包含近 200 万行评论的表格。我们每天收到大约 500 条新评论。每个评论都分配给一个特定的 ID。我想根据特定的ID抓取最流行的“讨论”。

我在 ID 列上有一个索引。

什么是最佳实践？我是否只是按此 ID 分组，然后按评论最多的 ID 排序？对于这种大小的桌子，这是最有效的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T04:37:48.223

> > 我是否只是按此 ID 分组，然后按评论最多的 ID 排序？

这很简单，我会怎么做。让我们假设您要检索前 50 名：

```
SELECT id
FROM comments
GROUP BY id
ORDER BY COUNT(1) DESC 
LIMIT 50 
```

如果您的用户在您的应用程序中非常频繁地执行此查询，并且您发现它的运行速度不如您希望的那么快，那么您可以优化它的一种方法是将上述查询的结果存储在一个单独的表中（`topdiscussions`)，并且可能有一个脚本或 cron 每五分钟左右间歇运行一次，它会更新该表。

然后在您的应用程序中，让您的用户从`topdiscussions`表中进行选择，这样他们只需要从**50**行而不是**200 万**行中进行选择。

当然，这样做的缺点是选择将不再是实时的，而是最多不同步五分钟，或者您想要更新表格的频率。您实际需要的实时性取决于系统的要求。

**编辑**：根据您对此答案的评论，我对您的架构和要求了解更多。以下查询检索过去一天内最活跃的讨论：

```
SELECT a.id, etc...
FROM discussions a
INNER JOIN comments b ON 
    a.id = b.discussion_id AND 
    b.date_posted > NOW() - INTERVAL 1 DAY
GROUP BY a.id
ORDER BY COUNT(1) DESC
LIMIT 50 
```

我不知道您的字段名称，但这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:32:46.220

如果我理解您的问题，ID 表示附有评论的讨论。所以，首先你需要一些最流行的概念。
1) 通过按 ID 计算评论并将名为 'delta' 的列设置为 0 来初始化“评论总数”表。

2) 定期

2.1）按ID统计评论

2.2）从新计数中减去旧计数并将值存储到增量列中。

2.3) 用新的评论数替换评论数。

3) 通过从评论总数中按增量降序选择 10 行来选择 10 个“最热门”讨论。

现在其余的都是微不足道的。这只是讨论 ID 与您在第 3 步中找到的评论相匹配的评论。

# jsf-2 - jsf2/glassfish3 安全性

> ID：11380627
> 
> 赞同：0
> 
> 时间：2012-07-08T04:21:17.687
> 
> 标签：jsf-2, security, glassfish-3

真是大问题。又是家庭作业。我已经几乎放弃了尝试让它工作，没有足够的时间了。我尝试通读 docs.oracle 上有关安全性的所有内容，NetBeans 上有关安全性的所有内容，课程提供的所有内容（教科书没有涵盖任何内容，因此这次不能将其归咎于一本过时的书）和一个一堆通过谷歌的教程和很多问题在这里。我无法让它工作。

我不是在寻找家庭作业的答案，更多的是我需要看的东西和需要仔细检查的东西，我可能会忽略......

该应用程序应允许两个不同组中的用户登录。管理员用户可以访问所有内容，而用户用户只能访问 /user/*。我们不限于严格的程序安全性，也不限于特定的声明性安全性。我们必须创建一个 servlet 来控制页面流（正如我向讲师提到的那样，JSF 带有一个控制器，并且可以通过框架控制页面流已经不影响他的决定。）如果有人当前没有登录在尝试访问受保护区域之一时，应根据我们的安全实施提示他们登录/重定向到登录页面/登录需要发生的任何事情。如果登录的用户用户尝试访问管理区域，他们应该提示他们不是管理员，没有关于是否应该将它们返回到原来的位置、注销或提示以管理员身份登录的详细信息。唯一的要求是我们不能使用数据库来存储用户名和密码。

所以我在文件领域设置了两个用户，一个是用户，一个是管理员。我尝试将其设置为基本身份验证，当用户运行页面时它不会提示登录。我尝试创建自定义登录/登录错误页面和表单身份验证，当用户运行页面时它不会显示我的登录表单。到目前为止，我唯一能做的就是将登录页面作为欢迎文件并在表单提交时调用 servlet，它使用 request.login(username, password) 并在找到用户时登录用户境界与一切相配。然后，我可以检查角色并在用户的 bean 中设置内容，并根据分配的角色将它们转发到正确的起始页面。但是，如果我运行它并导航到另一个页面而不将数据输入表单并将其提交以登录，则页面将显示。如果我以用户角色登录并导航到管理区域页面之一，它让我。我已经为 url 设置了安全约束，我使用了我在这里看到的示例中的过滤器来处理不同的 url，并且它们不会被调用。

我可能缺少一些简单的东西，进入这个类不知道 html 和 java 以外的东西可能是最大的问题，老实说，我不知道我在这个类中是如何成为边界线 A
....这个项目比这更重要，但其余的不是我认为自己有问题的东西，但我已经在这个星期的大部分时间里挂断了这个安全部分，甚至还没有开始。

web.xml

```
 <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Controller</servlet-name>
        <servlet-class>Project2.Controller</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Controller</servlet-name>
        <url-pattern>/Controller</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <display-name>AdminConstraint</display-name>
        <web-resource-collection>
            <web-resource-name>admin</web-resource-name>
            <description/>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>Admin</role-name>
        </auth-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>UserConstraint</display-name>
        <web-resource-collection>
            <web-resource-name>user</web-resource-name>
            <description/>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>User</role-name>
        </auth-constraint>
    </security-constraint>
    <security-role>
        <description/>
        <role-name>User</role-name>
    </security-role>
    <security-role>
        <description/>
        <role-name>Admin</role-name>
    </security-role>
    </web-app> 
```

登录.xhtml

```
 <f:view>
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
                <title>JSP Page</title>
            </head>
            <body>
                <h1><h:outputText value="Welcome!  Choose an action below."/></h1>

                <form method="Post" action="Controller">
                    <h:inputText id="userName" value=""/>
                    <h:inputSecret id="password" value=""/>
                    <h:commandButton value="Login" type="submit"/>
                </form>
            </body>
        </html>
    </f:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T09:55:06.827

因此，根据您的目标，您的目标似乎是实现基于容器的身份验证和授权。因此，除了您拥有的内容之外，您还需要将登录配置添加到您的部署描述符中，如下所示：

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>yourRealmName</realm-name>
    <form-login-config>
      <form-login-page>/login.xhtml</form-login-page>
      <form-error-page>/error.xhtml</form-error-page>
    </form-login-config>
</login-config> 
```

上面的配置指定了用户输入用户名和密码的登录页面，以及认证失败时重定向到的错误页面。

在您的 login.xhtml 中，您需要指定将表单发布到 j_security_check，如下所示：

```
<form action="j_security_check" method="POST">
  <input type="text" name="j_username" />
  <input type="secret" name="j_password" />
  ...
</form> 
```

除了基于容器的身份验证之外，您还可以在提交表单时进行编程身份验证。检查用户角色并返回所需的操作结果。我认为你不再需要那个控制器了。

有关这方面的更多详细信息，请参阅[此处的 Java EE 6 文档](http://docs.oracle.com/javaee/6/tutorial/doc/glxce.html)

# virtualization - 虚拟化感知交换机

> ID：11380631
> 
> 赞同：0
> 
> 时间：2012-07-08T04:23:00.020
> 
> 标签：virtualization

根据[http://www.cisco.com/en/US/solutions/collat​​eral/ns340/ns517/ns224/ns892/ns894/white_paper_c11-525307.html](http://www.cisco.com/en/US/solutions/collateral/ns340/ns517/ns224/ns892/ns894/white_paper_c11-525307.html)

每个虚拟机都有一个专用的网络接口卡。我的问题是，包含大约 10 个虚拟机的服务器如何支持 10 个 NIC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:04:31.030

这些网卡可能是虚拟的。来自它们的数据包被路由到物理 NIC，反之亦然。这与现代 WiFi 路由器中的情况几乎相同：在家中，您只有一个来自 Internet 服务提供商的以太网端口，它位于调制解调器中。您将路由器连接到它，但您的路由器可能有 2 个以上的以太网端口，您可以将多台 PC 连接到这些端口。

它们也可以是物理的，可以直接被 VM 访问，也可以间接访问。

# android - Android textview 不支持换行

> ID：11380633
> 
> 赞同：22
> 
> 时间：2012-07-08T04:23:34.143
> 
> 标签：android, textview, android-xml

我正在以编程方式创建一个自定义视图，该视图显示从 XML 文件解析的文本。文本很长，并且包含强制换行符的“/n”字符。出于某种原因，文本视图显示 /n 并且没有任何换行符。这是我的代码：

```
 // get the first section body
                    Object body1 = tempDict.get("FIRE");
                    String fireText = body1.toString();

                    // create the section body
                    TextView fireBody = new TextView(getActivity());
                    fireBody.setTextColor(getResources().getColor(R.color.black));
                    fireBody.setText(fireText);
                    fireBody.setTextSize(14);
                    fireBody.setSingleLine(false);
                    fireBody.setMaxLines(20);
                    fireBody.setBackgroundColor(getResources().getColor(R.color.white));

                    // set the margins and add to view
                    layoutParams.setMargins(10, 0, 10, 0);
                    childView.addView(fireBody,layoutParams); 
```

XML 文件中的文本如下所示：

```
Now is the time /n for all good men to /n come to the aid of their /n party 
```

它应该这样显示；

```
Now is the time
for all good men to
come to the aid of their
party 
```

是否有我缺少的设置？

***更新***

\r\n 如果我将它硬编码到我的视图中，它就可以工作。IE：

```
String fireText = "Now is the time \r\n for all good men \r\n to come to the aid"; 
```

实际上 \n 如果我硬编码它也可以工作：

```
String fireText = "Line one\nLine two\nLine three"; 
```

***供参考***

```
System.getProperty("line.separator"); 
```

这将返回一个字符串“/n”，因此无需转换为“/r/n”。

不幸的是，我的数据源自一个 XML 文件，该文件被解析并存储在哈希图中。我尝试了以下方法：

```
String fireText = body1.toString().replaceAll("\n", "\r\n"); 
```

\n 没有被替换为 \r\n。可能是因为我正在从一个对象转换为字符串吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-14T10:47:30.803

*在完全相同*的情况下，我一直遇到*完全相同的*问题。解决方案相当简单。

 *当您考虑它时，由于 textview 小部件正在显示带有文字“\n”值的文本，因此给出的字符串必须存储每个“\n”，如“\\n”。因此，当您的 XML 字符串被读取和存储时，所有出现的“\n”都会被转义以将该文本保留为文字文本。

无论如何，您需要做的就是：

```
fireBody.setText(fireText.replace("\\n", "\n")); 
```

为我工作！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-29T20:12:51.433

尝试了以上所有方法，我自己进行了一些研究，得出了以下用于渲染换行符转义字符的解决方案：

```
string = string.replace("\\\n", System.getProperty("line.separator")); 
```

1）使用你需要过滤**转义**换行符的替换方法（例如'\\n'）

2) 只有这样每个换行符 '\n' 转义字符的实例才会被渲染到实际的换行符中

对于此示例，我使用了带有 JSON 格式数据的 Google Apps Scripting noSQL 数据库 (ScriptDb)。

干杯：D

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-08T04:46:31.387

对于换行符，您可以通过这种方式在 xml 布局中使用设置文本视图。

> 现在是`\r\n`所有好人伸出援手的时候`\r\n`了`\r\n`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-27T07:27:15.310

我也遇到了这个问题，如果从 XML 资源中设置文本，我发现了一个非常简单的解决方案（我知道这与 OP 不同，但值得了解）

无需手动添加换行符，只需添加已**引用**的文本即可。

```
<string name="test_string">"1\. First
2\. Second Line
3\. Third Line"</string> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-08T05:27:48.440

试试这个

```
fireBody.setText(Html.fromHtml("testing<br>line<\br>") 
```

您的服务器需要发送`FirstLine<br>lineAfterLineBreak<\br>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T05:55:41.737

要强制通过 textview 的 XML 换行，您需要使用**\r\n**而不仅仅是**\n**。

因此，现在您在 XML 中的代码变为

```
android:text="Now is the time \r\n for all good men to \r\n come to the aid of their \r\n party" 
```

或者，如果您想以编程方式执行此操作，则在您的 java 代码中：

```
fireBody.setText("Now is the time \r\n for all good men to \r\n come to the aid of their \r\n party"); 
```

您还可以将文本声明为字符串资源值，如下所示：

```
<string name="sample_string">"some test line 1 \n some test line 2"</string> 
```

另一种简单的方法是更改​​ xml 文件中 TextView 的默认属性。

```
<TextView
    android:id="@+id/tvContent"

    android:layout_width="fill_parent"

    android:layout_height="wrap_content"

    android:singleLine="false"

/> 
```

然后使用，`textView.setText("First line \nSecond line \nThird line");`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-10-20T13:35:15.537

我只是使用它，现在它对我来说很好

```
 message =message.replace("\n","\r\\n"); 
```*

# jquery - 使用 jquery 事件 keydown 模拟在 textarea 上输入不起作用

> ID：11380634
> 
> 赞同：3
> 
> 时间：2012-07-08T04:23:48.730
> 
> 标签：jquery, facebook, events, triggers, userscripts

我正在尝试制作 facebook autoreply msg 脚本，这是我的代码

```
$(window).load(function(){
var a=setInterval(function(){
var e = $('.titlebarText').html();
if(!e)
{
}
else
{
$('textarea.uiTextareaAutogrow.input').focus().val('Test!');
var c = jQuery.Event("keydown");
c.which = 13; 
$('textarea.uiTextareaAutogrow.input').trigger(c);
}
}
,5000);
});

$(window).load(function(){
var q=setInterval(function(){
$('.close').click()}
,6000);
}); 
```

一切正常，但在专注于 textarea 并插入值后模拟输入..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:14:14.927

Your selector looks strange. `textarea.uiTextareaAutogrow.input` says "the textarea with class `uiTextareaAutogrow` and class `input`"--do you really have a `textarea` tag with the class `input`?

You could try this, provided your selector is correct:

```
var e = $.Event('keydown', { keyCode: 13 });
$('textarea.uiTextareaAutogrow.input').trigger(e); 
```

# php - 在 PHP 中处理大于 10mb 的文件上传

> ID：11380640
> 
> 赞同：1
> 
> 时间：2012-07-08T04:24:51.857
> 
> 标签：php, file-upload, web, xampp

我有这个表格

```
<table class="table">
        <div class="error"><?php if(!empty($errors))echo output_errors($errors);?></div>
        <form action = "upload_music.php" method = "POST" enctype = "multipart/form-data">
        <tr>
            <td>Artist:</td>
            <td><input type="text" name="artist" value=""></td>
        </tr>
        <tr>
            <td>Track Name:</td>
            <td><input type="text" name="track_name" value=""></td>
        </tr><?php print_r($_FILES);?>
        <tr>
            <td>Genre:</td>
            <td>
            <?php  
                $genres = Genre:: getAllGenre();
            ?>
                <select name = "genre">
                    <?php 
                        for($i = 0  ; $i<count($genres);$i++){
                        ?>
                        <option value = "<?php echo "{$i}"?>"><?php echo "{$genres[$i]['genre']}";?> </option>
                    <?php   }

                    ?>
                </select>
            </td>
        </tr>
        </tr>
            <td>Track:</td>
            <td><input type='file' name='file_path'></td>
        </tr>

        <tr>
            <td>Track Description:</td>
            <td><textarea name="track_desc" rows ="5"></textarea></td>
        </tr>
        <tr>
            <td><input class="btn btn-success" type="submit" name = "submit" value="Upload"></td>
        </tr>
        <form>
    </table> 
```

用户必须上传曲目的位置。每次我上传大于 7mb 的文件时，都会`print_r($_FILES);`打印一个空数组。但是当我上传一个小于 8mb 的文件或一个 mp3 时，会`print_r($_FILES);`打印一个带有值的数组。

我猜某些文件没有被 $_FILES 读取，因为它们的大小大于 8mb？如果是这种情况我将如何上传大于 8mb 的文件？我关于 POST 和 FILE 上传的 php.ini 设置也看起来像这样

```
post_max_size = 128M
upload_max_filesize = 128M 
```

如果你们需要额外的信息，我正在使用 XAMPP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T04:42:41.450

看起来您正在查看错误的 php.ini，因为默认的**post_max_size**通常为 8M。

重新启动 Web 服务器并查看**phpInfo()**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:58:56.670

您可以使用此代码轻松覆盖 PHP 中的 ini。

```
ini_set('memory_limit', '32M');
ini_set('post_max_size', '16M');
ini_set('upload_max_filesize', '16M'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T06:35:39.647

我想不出比[这更好的答案](http://www.sitepoint.com/upload-large-files-in-php/)

我建议使用 per-script ini_set，因为您不一定要提高站点范围内的执行时间。

# php - 资源 ID #14

> ID：11380643
> 
> 赞同：-3
> 
> 时间：2012-07-08T04:26:28.163
> 
> 标签：php, mysql

我想显示多行的信息。在不更改我的大部分代码的情况下，如何在我的网页上回显具有`user_id_offerer`= '$offerer' 的多行。我确实回显了 mysql 查询，并得到了 Resource Id #14 的结果，并且我理解 while 循环是必要的，但似乎 mysql 存在问题。我该如何解决？

澄清：当我用 while 循环运行代码时，我收到了第一行的无限循环。我没有收到具有`user_id_offerer`= 'offer' 的每一行。如何在无需对代码进行重大重写的情况下解决此问题。

```
function ergo_data ($offerer) {

  $data = array();
  $offerer = (int)$offerer;

  $func_num_args = func_num_args(); 
  $func_get_args = func_get_args();

  if ($func_num_args > 1) {
          unset($func_get_args[0]);
      $fields ='`' .  implode ('`, `', $func_get_args) . '`';
      $data = mysql_fetch_assoc (mysql_query("SELECT $fields FROM `ergo` WHERE `user_id_offerer` = '$offerer'"));
      return $data;
  }
}

if (logged_in() === true) { 
  $session_user_id = $_SESSION['user_id'];
  $ergo_data = ergo_data($session_user_id, 'primary_key', 'user_id_offerer', 'user_id_seeker', 'ergo', 'ergo_time_submitted');
}

echo $ergo_data['ergo'] . '<br>'; 
echo username_from_user_id($ergo_data['user_id_offerer']) . '<br>'; 
echo username_from_user_id($ergo_data['user_id_seeker']) . '<br>'; 
echo $ergo_data['ergo_time_submitted'];` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:43:25.253

我认为您需要从 ergo_data() 函数返回 mysql_query 的结果（而不是 mysql_fetch_assoc 的结果），然后在循环中调用 mysql_fetch_assoc：

```
// inside ergo_data(), change
// $data = mysql_fetch_assoc (mysql_query("SE ...
// to: 
function ergo_data ($offerer) {
  ...
  return mysql_query("SELECT $fields FROM `ergo`....");
}
...
if (logged_in() === true) { 
    $session_user_id = $_SESSION['user_id'];
    $query_result = ergo_data($session_user_id, 'primary_key', 'user_id_offerer', 'user_id_seeker', 'ergo', 'ergo_time_submitted');
    while($ergo_data = mysql_fetch_assoc($query_result)) {
        echo $ergo_data['ergo'] . '<br>'; 
        echo username_from_user_id($ergo_data['user_id_offerer']) . '<br>'; 
        echo username_from_user_id($ergo_data['user_id_seeker']) . '<br>'; 
        echo $ergo_data['ergo_time_submitted'];
    }
} 
```

# ruby-on-rails - Rails Devise 保存关联模型

> ID：11380646
> 
> 赞同：1
> 
> 时间：2012-07-08T04:27:53.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我有一个我正在使用的用户模型。每个用户都属于一个组。我正在尝试找到一种在注册时设置用户组的简单方法 - 无需创建自定义控制器来覆盖设计？

我的模型如下所示：

```
class User < ActiveRecord::Base
  belongs_to :group
end

class Group < ActiveRecord::Base
  has_many :users
end 
```

这是表格：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
<%= devise_error_messages! %>

<%= f.label :email %><br />
<%= f.email_field :email %>

<%= f.label :password %><br />
<%= f.password_field :password %>

<%= f.label :password_confirmation %><br />
<%= f.password_field :password_confirmation %>

<%= label_tag :group_name %>
<%= text_field_tag :group_name %>

<%= f.submit "Sign up" %> 
```

因为我只是想保存这个附加属性（group_name），所以我想避免创建一个全新的自定义设计控制器。有没有办法在模型级别保存用户组 - 也许有回调？或者有没有更好的方法来保存注册组？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:13:12.743

如果您已经使用了如上所示的自定义表单（也就是说，您没有使用 Devise 为您提供的表单），那么您应该没有理由需要覆盖 Devise 控制器。该组将与其他可批量分配的属性一起批量分配。

（就个人而言，就用户体验而言，将组选择设置为下拉列表或其他内容可能会很好，以便它可用，但这只是一个偏好问题。自动填充也可能很好。）

# reporting-services - 如何在 SSRS 中通过鼠标拖动更改时间刻度

> ID：11380647
> 
> 赞同：0
> 
> 时间：2012-07-08T04:27:58.290
> 
> 标签：reporting-services, charts, ssrs-2008, zooming, scale

在 SSRS2008 中：我在 x 轴上绘制了一个有时间的图表。我需要我的图表具有以下能力：当我单击图表的一部分或通过将图表缩放拖放到选定的时间部分来选择图表的 x 轴部分时。默认情况下，放大 ssrs 充当图片缩放。但我需要缩放到指定的时间部分。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T21:42:25.693

开箱即用的 SSRS 不允许您选择图表的一部分并放大到更多细节。您的选择是向报告中添加一个参数，允许用户更改在 x 轴上显示的时间段，或者添加一个操作，允许用户单击图表中的数据点并跳转到另一个更详细地报告。这种跳转到报告的操作甚至可以跳转到同一个报告，但无论它是相同的还是不同的，您都可以将用户单击的内容作为参数值传递，以驱动新报告中的详细程度。有关向报告添加钻取的更多信息，请参阅此内容：http: [//msdn.microsoft.com/en-us/library/ms159847](http://msdn.microsoft.com/en-us/library/ms159847(v=sql.100).aspx) (v=sql.100).aspx 。

# mysql - iOS - 处理与 MySql 的同步

> ID：11380650
> 
> 赞同：0
> 
> 时间：2012-07-08T04:28:11.867
> 
> 标签：mysql, objective-c, ios, synchronization

我想了解如何将我的 iPhone 应用程序中的数据与我的 MySql 数据库同步。

我还没有做太多的阅读，因为很难找到关于它的具体信息。

探索这个的最佳途径是什么？我要走这条路吗？[ASIHTTPRequest 设置说明](http://allseeing-i.com/ASIHTTPRequest/Setup-instructions)

我的问题真的是，我到哪里去了解这个。我很欣赏这是一个很大的话题，我真的不想走错路，认为这是正确的。

任何提示和技巧表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:40:30.413

我会为将托管 MySQL 数据库的服务器使用 REST 接口，并在 iOS 上使用带有 CoreData 支持（托管对象加载器）的 RestKit。

但这确实是一个非常广泛的问题，答案取决于很多因素（技能和工具的可用性、对服务器的访问、品味、理念、项目规模、同步的准确性和及时性）。

# github - App Harbor“无法选择单个解决方案文件”构建错误

> ID：11380652
> 
> 赞同：1
> 
> 时间：2012-07-08T04:28:29.103
> 
> 标签：github, appharbor

我有一个 GitHub 存储库，其中包含多个解决方案（一个用于 AppHarbor，另一个用于 Windows Azure，独立但相互依赖的应用程序。）

我如何推送到 AppHarbor 并确定哪个 SLN 相对于 AppHarbor 是“主要的”或“选定的”。

我想推送到 apphb 并让它使用正确的 SLN 而忽略另一个。

这可以做到吗？

更新：

AppHb 中的构建错误是：

**构建失败：无法选择要构建的单个解决方案文件。找到：\GlennApp\GlennApp.sln 和 \GlennAppAzure\GlennAppAzure.sln**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T13:32:47.450

在在线支持区域中找到了此答案。

[http://support.appharbor.com/discussions/problems/662-build-failed-couldnt-pick-a-single-solution-file-to-build](http://support.appharbor.com/discussions/problems/662-build-failed-couldnt-pick-a-single-solution-file-to-build)

# winbugs14 - 解释 WinBUGS 陷阱以及如何使程序自动化？

> ID：11380656
> 
> 赞同：3
> 
> 时间：2012-07-08T04:29:23.180
> 
> 标签：winbugs14, winbugs

首先，有人知道 WinBUGS 的*开发人员*指南吗？该网站充满了 Doodles 的详细示例和模型语言的文档，但我还没有找到任何关于如何解释陷阱窗口的信息。

其次，有没有人找到任何方法来简化检查/加载/编译/初始化/监控/更新周期？我的意思是，似乎没有任何方式可以说“不要费心重新检查模型或将任何设置恢复为默认值（！！！），只需继续从这些文件加载​​数据，从这些文件，并为每个文件生成一个新的尾声”。甚至标准的 Windows 快捷方式在这里也被取消了，迫使用户不断地点击并用相同的值一遍又一遍地填充相同的字段。这似乎是一个小问题，但是当您一个接一个地进行许多类似的分析时，它很快就会变老。

我正准备使用 TRON.EXE 向程序发送虚假的鼠标点击，但在走到那个极端之前，我希望有一些本机和更优雅的方式来自动执行重复的 WinBUGS 任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:16:11.520

嗯...这是正常的 WinBUGS :-) 不友好，显示的陷阱会吓到有经验的内核黑客.. :-) 我认为不存在一些陷阱指南。我的意思是，如果 WinBUGS 的创建者想要努力使用户更加友好，他们可能会首先让陷阱更易于理解，这样就不需要指南了。

我试图做类似的事情——即自定义 WinBUGS 行为。首先，您可以使用 R2WinBUGS 从 R 调用 WinBUGS。这样你就可以做很多自动化，但不是全部。例如，我想在 WinBUGS 中有类似进度信息的东西。问题是 WinBUGS UI 在更新周期中卡住了。R2WinBUGS 创建`script.txt`命令脚本并且有 command `update (<big number of cycles>)`。我在这里想要的是自定义这个 script.txt 以包含很多较小的`update(..)`命令而不是一个大命令。但是，问题是 R2WinBUGS 自己生成这个脚本，你不能改变它。

因此，自定义 WinBUGS 的方法可能是您创建自己的包装器来创建 script.txt 和其他文件。我相信您可以通过这种方式对 WinBUGS 进行更多自定义。

但是，我不确定 WinBUGS 是否值得。它的发展已经停止，虽然受到许多人的喜爱，但它仍然僵化。您可以尝试 JAGS 或 CppBugs，它们似乎更有希望的未来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T15:00:51.620

有关 R2WinBUGS 的包装器，它添加了许多功能以简化严重的 WinBUGS 使用，请参阅我的包 rube ( [http://www.stat.cmu.edu/~hseltman/rube/](http://www.stat.cmu.edu/~hseltman/rube/) )，它还没有在 CRAN 上。

除其他外，它提供简单的英文错误消息，而不是在确定陷阱错误时将您的模型/数据/inits 传递给 WinBUGS。它还为您的模型/数据/初始化提供了非常有用的摘要，用于查找无法自动检测到的问题。当然，它不会捕获所有陷阱错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:49:47.903

原来我在问题的第二部分没有足够的 RTFM。事实证明，WinBUGS 1.4 手册中题为“批处理模式：脚本”的部分列出了所有批处理命令。所有重要的 UI 功能都有一个批处理模式命令。在获得正确的论点方面只有一点点试错（例如`over.relax('true')`）。真正花了我一段时间才弄清楚的是，WinBUGS 似乎在某些 Windows 路径上有问题，但只要一切都在安装 WinBUGS 的目录的子目录中，它运行正常。

必须继续加载所有这些小文件仍然有点麻烦，但我编写了一个 R 脚本，它使用 BRugs 包中的函数来创建所有文件，以一致的模式命名它们，然后生成一个脚本，然后初始化模型并一次又一次地加载它们。

不过，我会暂时搁置这个问题，看看是否有人对我可以在哪里学习更好地使用陷阱有任何建议。

# c++ - 从已安装的 Windows 光栅（位图）字体中直接获取 BITMAP

> ID：11380660
> 
> 赞同：2
> 
> 时间：2012-07-08T04:30:38.113
> 
> 标签：c++, winapi, fonts, bitmap

我知道这似乎是一个奇怪的问题，它是！但是利用已经安装的窗口固定宽度字体（例如：Fixedsys）我会节省很多大小（因为我想让最终的 EXE 尽可能小）

从 Windows 上现有的（已安装的）光栅/位图字体获取 BITMAP（或位数组）的最佳方法是什么？或者**没有办法**做到这一点，我必须制作一个包含所有字母的 bmp 文件并作为资源加载？

是的，我正在尝试将小型可执行文件制作为 16kbs，大小非常重要！感谢您的关注，我希望我解释正确:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T06:12:54.607

有可能：创建一个 DC，附加您的位图和字体，将字体渲染到位图中，分离并销毁 DC。剩下一个位图，其中包含您用字体绘制的字母。

我假设您熟悉 GDI 来完成上述任务。如果没有，请找到有关 GDI 的好教程。

# safari-extension - 除非我引用不存在的变量，否则 Safari 扩展 SQL 事务将失败

> ID：11380661
> 
> 赞同：0
> 
> 时间：2012-07-08T04:30:47.117
> 
> 标签：safari-extension

我正在“尝试”创建一个 Safari 扩展程序，将链接添加到本地 sqlite 数据库。

在 global.html 文件中，我可以创建数据库，但我无法创建表，除非我引用一个不存在的变量，这使得脚本的其余部分失败。

```
// Global Variable to hold my database
var my_DB;

// Make A Database
init_DB();

// Make A Table
createTable(my_DB);

// Rest of the code
alert("Database and Table have been created!");

// Initialise the Database
function init_DB() {    
    try {
        // Check for Database Support
        if (!window.openDatabase) {
            alert("Database functionality is NOT Supported!");
        } else {
            // Setup the database
            var shortName = "imp_DB";
            var version = '1.0';
            var displayName = "My Important Database";
            var maxSize = 65536; // in bytes
            var theDB = openDatabase(shortName, version, displayName, maxSize);
        }
    } catch(e) {
        // Error Handling
        if (e == "INVALID_STATE_ERR") {
            // We have a version number mismatch
            alert("Invalid database version");
        } else {
            // Unknown error
            alert("Unknown error: " + e);
        }
        return;
    }
    // Assign the database to the global variable
    my_DB = theDB;
}

// Create The Table
function createTable(thisDB) {
    thisDB.transaction(function(txn) {
        txn.executeSql('CREATE TABLE IF NOT EXISTS people (id unique, name, age)');
    });
    // The following line is the problem
    someVar = txn;
} 
```

调用 init_DB() 工作正常，并创建数据库。但是，调用 createTable(my_DB) 只是默默地失败（没有错误或警告），其余代码完成，除非我以某种方式引用“txn”。

所以添加“SomeVar = txn;” 行允许创建表，但不幸的是，它导致“ReferenceError：找不到变量：txn”出现在控制台中，并停止运行其余代码。

有没有人有任何想法？一个多星期以来，我一直试图让它工作，但我已经无能为力了。

在此先感谢您的任何建议 ;-）

注意在尝试创建表之前声明“txn”也会导致静默失败。

# java - 来自 PHP 的问题 - 使用 @RequestParameter 参数的 Spring 3 REST PUT/POST 方法

> ID：11380663
> 
> 赞同：0
> 
> 时间：2012-07-08T04:31:04.170
> 
> 标签：java, php, web-services, spring, rest

我使用 Spring Framework 为 REST 服务创建了一个非常简单的控制器。我将 @PathVariable 与 GET 结合使用没有问题，但是当我尝试创建 POST 或 PUT 时，我无法卷曲该函数并试图找出我哪里出错了。

```
@Controller
public class TestController {

    @RequestMapping(value = "/test", method = RequestMethod.POST)
    @ResponseBody
    public String putName(@RequestParam("name") String name, @RequestParam("value") String value) {

        System.out.println("Name - " + name);
        System.out.println("Value - " + value);

        return "You entered " + name + " with value of " + value;
    }
} 
```

稍微编辑一下以包含一些 PHP，因为这最终是我想要调用它的地方。

如果我执行以下操作，它将按预期工作：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://localhost:8080/RestService/test');
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
    curl_setopt($ch, CURLOPT_TIMEOUT, 120);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 'name=some random name&value=just a value');
    $result = curl_exec($ch); 
```

但是如果我尝试将参数作为数组传递，我会收到 HTTP 状态 400 - 客户端发送的请求在语法上不正确。

```
 $data = array
    (
        'name' => 'some random name',
        'value' => 'just a value'
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'http://localhost:8080/RestService/test');
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 120);
    curl_setopt($ch, CURLOPT_TIMEOUT, 120);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    $result2 = curl_exec($ch); 
```

如果我可以帮助它，我不想构建字符串，担心从我想要传递的数据中转义 & 等。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:12:11.997

使用**http_build_query**

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($data)); 
```

# java - 如何将工具提示的外观更改为系统的？

> ID：11380664
> 
> 赞同：2
> 
> 时间：2012-07-08T04:31:23.140
> 
> 标签：java, swing, windows-7, tooltip, look-and-feel

我已经添加了这条线来设置系统的外观和感觉。由于滚动条已更改，因此发现此方法有效。

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

但是，当我为 JTabbedPane 的选项卡设置工具提示时，它不会显示系统的工具提示外观。为什么是这样？截图如下。

系统外观：

![在此处输入图像描述](../Images/0e97d0ec1d6c86c45c9b8f49650b5ef2.png)

Java 的外观和感觉（？）：

![在此处输入图像描述](../Images/571c28857541992cfb7a1013782f5144.png)

我想将我的工具提示设置为看起来像第一个屏幕截图中的系统。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T09:25:32.120

许多工作没有完整的效果：

*   要获得背景，您需要自定义实现 ToolTipUI：基本上扩展 BasicToolTipUI 并接管绘画
*   向 UIManager 注册自定义 ui 委托，以便使用它而不是默认的
*   理论上，您可以通过使用形状窗口（jdk7 中的公共 api，可用于 jdk6 的半官方解决方法）来实现窗口的圆角（包含工具提示的那个），您需要一个形状窗口。实际上，没有办法（极端黑客除外）使 ToolTipManager 使用该窗口

# java - 无论使用什么驱动程序，Java 都不会连接到数据库

> ID：11380668
> 
> 赞同：0
> 
> 时间：2012-07-08T04:33:13.217
> 
> 标签：java, mysql

```
import java.sql.*;

public class Connect
{
   public static void main (String[] args)
   {
       Connection conn = null;

       try
       {
           String userName = "root";
           String password = "password123!";
           String url = "jdbc:oracle:thin:@localhost:3306:procomport";
           //Class.forName ("oracle.jdbc.driver.OracleDriver");
           conn = DriverManager.getConnection(url, userName, password);
                //Connection connection = DriverManager.getConnection(url , userName, password);
           System.out.println ("Database connection established");
       }
       catch (Exception e)
       {
           System.err.println ("Cannot connect to database server");
       }
       finally
       {
           if (conn != null)
           {
               try
               {
                   conn.close ();
                   System.out.println ("Database connection terminated");
               }
               catch (Exception e) { /* ignore close errors */ }
           }
       }
   }
} 
```

这是我的代码我有多个不同的数据库，但它不会连接到其中的任何一个，这有什么问题？我不断收到无法连接到数据库的错误。虽然我可以使用其他管理工具连接到它，但这是驱动程序问题吗？我怎样才能知道我是否有必要的驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T08:10:49.033

您提供的用于连接数据库的代码不会连接到 MySQL 或 Oracle，因为它是连接两者的混合尝试。

对于 Oracle，代码应类似于：

```
 String userName = "root";
       String password = "password123!";
       String url = "jdbc:oracle:thin:@localhost:1521:procomport";
       Class.forName("oracle.jdbc.driver.OracleDriver");
       conn = DriverManager.getConnection(url, userName, password); 
```

（假设您有一个调用`root`Oracle 的用户，并且 Oracle SID 是`procomport`）。特别注意端口号的变化：MySQL 通常使用`3306`，Oracle 使用`1521`.

对于 MySQL，连接代码应如下所示：

```
 String userName = "root";
       String password = "password123!";
       String url = "jdbc:mysql://localhost:3306/procomport";
       Class.forName("com.mysql.jdbc.Driver");
       conn = DriverManager.getConnection(url, userName, password); 
```

（假设您的 MySQL 数据库被调用`procomport`）。请注意不同样式的连接 URL 和驱动程序类名称。

Oracle 驱动程序通常位于一个名为 的 JAR 文件`ojdbc6.jar`中，而 MySQL 位于一个名为`mysql-connector-java-5.1.18-bin.jar`.

最后，当你写类似

```
 catch (Exception e)
   {
       System.err.println ("Cannot connect to database server");
   } 
```

你真的没有帮助自己。该异常`e`几乎肯定会包含您的数据库连接代码无法正常工作的原因，但是故意忽略它会使您自己更难找出问题所在。

老实说，我很想声明`main`方法`throws Exception`（通过将其添加到`public static void main...`行尾），然后您可以删除无用的`catch`块。如果抛出异常但未在 内处理`main`，JVM 将在退出之前为您打印堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:38:24.400

在你之后：

```
System.err.println(); 
```

放置一个：

```
e.printStacktrace(); 
```

然后你会看到真正的错误信息。驱动程序类可能不在类路径中。

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T04:51:51.417

1.  取消注释该行`Class.forName("oracle.jdbc.driver.OracleDriver");`
2.  `oracle.jdbc.driver.OracleDriver`确保在类路径中有 Oracle 驱动程序“ ”

# g++ - 无法使用 g++ 编译可共享的 .o 文件

> ID：11380669
> 
> 赞同：0
> 
> 时间：2012-07-08T04:33:48.137
> 
> 标签：g++, main, shared-libraries, build-error, fpic

当我使用以下命令编译时：

> g++ -fPIC -o obj/buffer.o buffer.cpp

我收到以下错误：

> /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crt1.o：在函数`_start': (.text+0x20): undefined reference to`中'

我认为使用 -fPIC 标志，我不需要主要功能。所有 cpp 文件都出现此错误。我确实有一个 main.cpp，其中包含共享库函数。您可以在以下位置获取源代码：

> git 克隆[https://github.com/nterry/39DLL-4-Linux.git](https://github.com/nterry/39DLL-4-Linux.git)

有任何想法吗？我知道我可以使用 ld 二进制文件将所有 o 文件放入 an 中，因此一旦完成，我只需要帮助将它们全部构建成可共享的 .o 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:59:19.503

我想我回答了我的问题。我在命令中添加了一个 -c ，它似乎有效。这是我使用的命令：

```
g++ -fPIC -c -o obj/list.o list.cpp 
```

那是几个 cpp 文件之一，而且似乎一切正常。

# c++ - 我可以在这种情况下使用全局变量吗？

> ID：11380670
> 
> 赞同：1
> 
> 时间：2012-07-08T04:33:52.283
> 
> 标签：c++, global-variables

在阅读了关于这个主题的一些 SO 主题之后：我想出了这些为什么全局变量/单例不好的原因。

1.  理解全局状态的函数变得越来越困难，随着代码的增长，越来越多的函数将修改该全局状态。
2.  它使单元测试更难。
3.  它隐藏了依赖关系。
4.  如果有一天你的全局变量实际上不是一个单一的对象/变量，你将不得不重写代码。

我想用 C++ 制作一个游戏，会有一个“高度图对象”将我的游戏中的世界景观表示为高度图。这个高度图**可以**改变。我想为它使用一个全局对象。（我不希望遇到静态初始化顺序问题，因为不会有任何其他静态变量引用此高度图对象）。

现在，由于上述原因，我知道全局状态很糟糕，而全局可变状态更糟。但是这样做似乎真的非常麻烦：在`main()`范围内创建一个高度图对象，并将该高度图对象传递给每个想要使用它的函数。

如果我 100% 确定我的应用程序中只有一个高度图怎么办？此外，由于这是一个小型的单独项目，我相信我将能够理解每个函数对全局状态的作用？而且我看不出在这种情况下使用全局变量会如何损害单元测试。如果我想使用模拟高度图，我不能`globalHeightmap = generateMockHeightmap();`在调用我想测试的函数之前做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:03:26.120

尽管您现在对项目的特征很确定，但我几乎可以向您保证，在将来的某个时候，您将需要修改依赖于这个全局变量的代码。到那时，全局变量可能会回来，使您更难找出所需的更改，因为状态没有隐藏（例如，如果您不小心更改了状态而不是从中读取，那么整个程序都会受到影响在未来的某个随机时间点）。我不能夸大它对于程序维护和调试的重要性，以最小化状态突变点和全局变量几乎是该目标的对立面。

只是为您的单元测试覆盖全局状态图似乎很脆弱。如果您需要恢复旧状态，或者在测试中的状态之间发生变异怎么办？然后你会得到一堆保存/设置/恢复代码。

如果您想在应用程序中添加线程模型怎么办？使用全局状态将使转换变得更加复杂。

如果一年后其他人帮助您完成该项目怎么办？他们能理解代码吗？一年后你能理解它吗（我知道我总是尝试编写明显的代码并在不明确的地方添加注释，因为我可能是一年后回来的人，不再记得有关机制的*事情*）。

最后，如果非全局变量方法看起来工作量太大或太复杂，这可能意味着您的替代方法太复杂或需要另一个想法/返工。没有理由不能将高度图存储到在适当的高级游戏对象中创建并根据需要传递/存储在较低级别对象中的对象中。

# php - 加入、联合、合并？

> ID：11380672
> 
> 赞同：1
> 
> 时间：2012-07-08T04:35:26.633
> 
> 标签：php, mysql

我正在为 Magic the Gathering Cards 创建库存系统，需要使用主卡信息更新价格。

我有两张桌子，卡片和价格

卡片具有以下列：ID、名称、Ed、价格

价格具有以下列：名称、Ed、价格

我需要将 Cards.Price 替换为 Price.Price 中的值。

下面是完成这项工作的两种不同尝试的代码（我知道我可能使这比它需要的更难......）

尝试#1

```
 $query = "SELECT * FROM Cards";

    $result = mysql_query($query) or die(mysql_error());
    $row = mysql_fetch_array($result) or die(mysql_error());

    while($row = mysql_fetch_array($result))
    {
    $name=$row['Name'];
    $ed=$row['Ed'];

    $queryb = "SELECT Price FROM Prices WHERE Name='".$name."' AND Ed='".$ed."'";
    $resultb = mysql_query($queryb) or die(mysql_error());
    $rowb = mysql_fetch_array($resultb) or die(mysql_error());
    $newPrice = $rowb['Price'];
    mysql_query("UPDATE Cards SET Price='".$newPrice."'");
    } 
```

尝试#2

```
 $queryCards = "SELECT * FROM Cards";
    $queryPrices = "SELECT * FROM Prices";
    $dblink = mysql_connect($dbhost, $dbuser, $dbpass);
    mysql_select_db($dbname, $dblink);

    $resultCards = mysql_query($queryCards) or die(mysql_error());
    $resultPrices = mysql_query($queryPrices) or die(mysql_error());
    $rowCards = mysql_fetch_array($resultCards) or die(mysql_error());
    $rowPrices = mysql_fetch_array($resultPrices) or die(mysql_error());

    if ($rowCards['Name']==$rowPrices['Name'] && $rowCards['Ed']==$rowPrices['Ed'])
    {
    $newPrice = $rowPrices['Price'];
    mysql_query("UPDATE Cards SET Price='".$newPrice."' WHERE
    Name='".$rowCards['Name']."' AND Ed='".$rowCards['Ed']."'"); 
    }
    while($rowPrices = mysql_fetch_array($resultPrices))
       {
       if ($rowCards['Name']==$rowPrices['Name'] && 
                    $rowCards['Ed']==$rowPrices['Ed'])
          {
          $newPrice = $rowPrices['Price'];
          mysql_query("UPDATE Cards SET Price='".$newPrice."' WHERE 
                       Name='".$rowCards['Name']."' AND Ed='".$rowCards['Ed']."'");
          }  
       }       

   $rowPrices = mysql_fetch_array($resultPrices) or die(mysql_error());

   while($rowCards = mysql_fetch_array($resultCards))
   {
   while($rowPrices = mysql_fetch_array($resultPrices))
       {
       if ($rowCards['Name']==$rowPrices['Name'] &&
                $rowCards['Ed']==$rowPrices['Ed'])
            {
            $newPrice = $rowPrices['Price'];
                mysql_query("UPDATE Cards SET Price='".$newPrice."' WHERE 
                     Name='".$rowCards['Name']."' AND Ed='".$rowCards['Ed']."'");
                }  
                }      
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:47:43.570

```
UPDATE Cards 
   JOIN Prices ON Cards.Name = Prices.Name AND Cards.Ed = Prices.Ed 
SET Cards.Price = Prices.Price 
```

# actionscript-3 - Actionscript 3 - 使用数组生成多个自定义段落

> ID：11380673
> 
> 赞同：0
> 
> 时间：2012-07-08T04:35:42.297
> 
> 标签：actionscript-3, flash

我正在尝试创建一个简单的 AS3 脚本，它可以生成多个段落，其中一个单词是不断变化的。在代码中，您可以在数组中填写尽可能多的值（让我们以水果为例），它会为每个数组打印出一个自定义段落。

期望的结果（如果我们在数组中有 3 个水果）将是：

我爱水果！我最喜欢的是苹果！苹果非常好吃！这就是我最喜欢苹果的原因！

我爱水果！我最喜欢的是橙子！橙子非常好吃！这就是我最喜欢橙子的原因！

我爱水果！我最喜欢的是香蕉！香蕉非常好吃！这就是为什么我最喜欢香蕉！

如果还保留了正确的格式，那就太好了，但这不是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:27:33.023

扩展杰森的答案，你可以使用`mx.utils.StringUtil.substitute`

```
import mx.utils.StringUtil

public function sentences(words:Array):String
{
    var paragraphs:String = "";

    for each (var word:String in words)
    {
        paragraphs += StringUtil.substitute("I love fruits! My favourite are {0}! {0} are very tasty! That is why I love {0} the most!\n\n", word);
    }

    return paragraphs;
} 
```

这对您的应用程序性能没有任何影响，但字符串看起来更干净，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:37:13.580

您可以这样做的另一种方法是

```
public function createParas(words:Array, txtBefore:String, txtAfter:String):String {
    var para:String=txtBefore;
    var joinStr:String=txtAfter + txtBefore;
    para += words.join(joinStr);
    para += txtAfter;
    return para;
} 
```

这使用了 ActionSctipt 的内部`Array.join`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T04:43:54.007

接受单词数组的函数：

```
public function sentences(words:Array):String
{
    var paragraphs:String = "";

    for each (var word:String in words)
    {
        paragraphs += "I love fruits! My favourite are " + word + "! " + word + " are very tasty! That is why I love " + word + " the most!\n\n";
    }

    return paragraphs;
} 
```

称为：

```
sentences([ "Apples", "Oranges", "Bananas" ]); 
```

# jdbc - JDBC -- java.lang.NoClassDefFoundError: 无法初始化类 com.mysql.jdbc.Connection

> ID：11380681
> 
> 赞同：0
> 
> 时间：2012-07-08T04:38:47.257
> 
> 标签：jdbc, noclassdeffounderror

我有以下代码试图建立与远程数据库的连接。它抛出异常，我不知道为什么。

```
 import java.util.List;
    import java.util.ArrayList;
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.Statement;
    import java.sql.ResultSet;

    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpSession;

    import com.model.Bulletin;

    Connection connection = getConnection();
    Statement statement = connection.createStatement();

    private Connection getConnection() {
        Connection conn = null;
        String url = "jdbc:mysql://address/cpc";
        String userName = "user";
        String password = "password"; // Don't worry, that's not the real password.
        try {
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection(url, userName, password);
        } catch (Exception e) {
            return null;
        }

        return conn;
    } 
```

谁能向我解释为什么我会得到这个例外？

```
Uncaught exception from servlet
java.lang.reflect.InvocationTargetException
    at com.google.appengine.runtime.Request.process-6673c09727e16cea(Request.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ExceptionInInitializerError
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:283)
    at java.sql.DriverManager.getConnection(DriverManager.java:620)
    at java.sql.DriverManager.getConnection(DriverManager.java:200)
    at com.dao.BulletinDAO.getConnection(BulletinDAO.java:231)
    at com.dao.BulletinDAO.getApprovedBulletins(BulletinDAO.java:134)
    at com.action.GetApprovedBulletins.execute(GetApprovedBulletins.java:45)
    ... 74 more
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:355)
    at java.security.AccessController.checkPermission(AccessController.java:567)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:315)
    at java.lang.Thread.init(Thread.java:353)
    at java.lang.Thread.<init>(Thread.java:437)
    at java.util.TimerThread.<init>(Timer.java:478)
    at java.util.Timer.<init>(Timer.java:100)
    at java.util.Timer.<init>(Timer.java:146)...(length 8258) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:51:27.467

这几乎可以肯定是因为您缺少 MySql 的 jdbc 驱动程序 jar。你可以在[这里](http://dev.mysql.com/downloads/connector/j/)找到它。解压缩并将 jar 添加到您的类路径中。

更新：您不能将 MySQL 与 GAE 一起使用，因为不允许使用套接字。这永远不会为你工作。除了 MySQL，它们还有其他的持久性机制。请参阅：[我可以将 MySQL 数据库与 App Engine 应用程序一起使用吗](https://stackoverflow.com/questions/1651629/can-i-use-a-mysql-database-with-an-app-engine-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:56:03.643

试试这个：

```
try
{   // Load driver class
    Class.forName("com.mysql.jdbc.Driver");
}
catch (java.lang.ClassNotFoundException e) {
    System.err.println("ClassNotFoundException: " +e);
} 
```

代替：

```
 try {
    // Exception thrown in next line.
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url, userName, password);
    } catch (Exception e) {
        return null;
    } 
```

# ruby-on-rails - 为什么我不能正确接收参数？

> ID：11380684
> 
> 赞同：2
> 
> 时间：2012-07-08T04:39:47.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, controller, parameter-passing

为什么我点击提交时会说这个错误？有没有什么办法解决这一问题？？这些对我来说似乎是正确的......

> 找不到没有身份证的女孩

我对传递参数的看法

```
<%=form_for :girls, url: url_for( :controller => :girls, :action => :comment ) do |f| %>

    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_field :body %>
    </div> 

    <%= f.hidden_field :id, :value => @girl.id %>

  <div class="actions">
    <%= f.submit %>

<% end %> 
```

控制器中的评论动作

```
 def comment
   @girl = Girl.find(params[:girls][:id] )
   @user_who_commented = current_user
   @comment = Comment.build_from( @girl, @user_who_commented.id, params[:girls][:body] )
   redirect_to :controller => 'girls', :action => 'show', :id => params[:girls][:id]
   flash[:notice] = "comment added!"
  end 
```

我的路线

```
Example::Application.routes.draw do

 root :to => "top#index" 
 devise_for :users, :controllers => { :registrations => "registrations" }

 get 'girls', :to => 'girls#index', :as => :user_root
 match '/girls/comment' => 'girls#comment', :via => :post
 get "girls/show"
 resources :girls
 resources :home

 devise_for :users do get 'logout' => 'devise/sessions#destroy' end

 resources :girls do 
   collection do
     get 'tag'
   end
 end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:52:05.923

像这样更改您的代码

```
@comment = Comment.build_from( @girl, @user_who_commented.id, params[:girls][:body] )
@comment.save
redirect_to :controller => 'girls', :action => 'show', :id => params[:girls][:id] 
```

# geometry - Ray Sphere Intersection：处理极端情况

> ID：11380693
> 
> 赞同：0
> 
> 时间：2012-07-08T04:42:52.417
> 
> 标签：geometry, intersection, raytracing

我正在努力在 2d 中实现一个强大的光线球相交例程。我一起破解了一个相当大的功能，因为它在 GPU 上运行，所以我无法正确调试。我的灵感来自： [圆线段碰撞检测算法？](https://stackoverflow.com/questions/1073336/circle-line-collision-detection) 和[http://paulbourke.net/geometry/sphereline/](http://paulbourke.net/geometry/sphereline/)。我不知道我应该在哪里寻找错误。我错过了一些明显的东西吗？因为我对实际的圆段碰撞感兴趣，所以我检查圆是否包围线的情况作为交叉点返回。

这是相关的代码片段：

```
bool CircleSegmentIntersection2d(float2 x0, float2 x1, float2 center, float r) {

float2 d = x1-x0;
float2 f = x0-center;

float a = dot2d(d,d);
float b = 2*dot2d(f,d);
float c = dot2d(f,f)-r*r;

float discriminant = b*b-4*a*c;

if( discriminant < 0 ) {
      // no intersection
      return false;
} else {
    discriminant = sqrt(discriminant);
    // either solution may be on or off the ray so need to test both
    float sol1 = (-b + discriminant)/(2*a);
    float sol2 = (-b - discriminant)/(2*a);

    float t0 = min(sol1, sol2);
    float t1 = max(sol1, sol2);

    if (t1 < 0)
        return false;

    // Line segment doesn't intersect and on outside of sphere, in which case both values of t will either be less than 0 or greater than 1.
    if (0 < t0 && 0 < t1 || t0 > 1 && t1 > 1)
        return false;

    // Line segment doesn't intersect and is inside sphere, in which case one value of t will be negative and the other greater than 1.
    if (t0 < 0 && t1 > 1) {
        return true;
    }

    // Line segment intersects at one point, in which case one value of t will be between 0 and 1 and the other not.
    if (t0 < 0 && 0 <= t1 && t1 <= 1) {
        return true;
    }

    // Line segment intersects at two points, in which case both values of t will be between 0 and 1.
    if (0 <= t1 && t1 <= 1 && 0 <= t0 && t0 <= 1) {
        return true;
    }

    // Line segment is tangential to the sphere, in which case both values of t will be the same and between 0 and 1.
    if (length(t0-t1) < 0.005f) {
        return true;
    }
}

return false;

} 
```

其中 dot2d 定义为：

```
float dot2d(float2 a, float2 b) {
return a.x*b.x+a.y*b.y;
} 
```

谢谢你的时间！

# xcode - Xcode 4.2 applescript - 仍然坏了吗？

> ID：11380696
> 
> 赞同：3
> 
> 时间：2012-07-08T04:43:28.317
> 
> 标签：xcode, applescript

我想使用 AppleScript 来自动化我的一些常见构建任务。但它出现在 Xcode 4.2 下，脚本被严重破坏以致于无用。我什至无法运行如下的最小脚本（运行 Xcode 并加载我的项目）：

```
tell application "Xcode"
   build project of active project document
end tell 
```

这给了我错误“缺失值”。提供的脚本字典至少可以说是不透明的。我在开发者网站上没有找到任何帮助，并且在其他地方搜索答案表明我不是唯一一个沮丧的人。Apple 不希望我们将 AppleScript 与 Xcode 4 一起使用吗？我正在使用 4.2，因为我还不想从 Snow Leopard 升级到 Lion。

更新：具体问题是 1）我如何使用 Xcode 4 执行简单的 AppleScripting 和 2）这在哪里记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:09:48.007

这是我用来在附加的 iPhone 上构建和运行的内容。即使应用程序不支持脚本，您也可以始终只使用菜单命令。这不是您想要的生产环境，但这应该只是您的一个小助手应用程序，对吧？

```
(* compile and let it run on iPhone *)
enabledGUIScripting(true)
activate application "Xcode"
tell application "System Events"
    tell process "Xcode"
        click menu item "Run" of menu 1 of menu bar item "Product" of menu bar 1
    end tell
end tell

on enabledGUIScripting(switch)
    tell application "System Events"
        activate -- brings System Events authentication dialog to front
        set UI elements enabled to switch
        return UI elements enabled
    end tell
end enabledGUIScripting 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:03:19.477

为了回答第 2 部分，Xcode 脚本记录在其脚本字典中。在 AppleScript Editor 中，从 File 菜单中选择“Open Dictionary...”，然后选择 Xcode。

# ruby-on-rails - 非常奇怪：部分视图中的布尔值计算

> ID：11380697
> 
> 赞同：0
> 
> 时间：2012-07-08T04:43:36.710
> 
> 标签：ruby-on-rails, partial-views

部分文件：_link_topic_type.html.erb：

```
// debug info to check the passed in variables
<p>current_topic_type: <%= current_topic_type %></p>
<p>topic_type: <%= topic_type %></p>
<p>active: <%= current_topic_type == topic_type %></p>

<% if current_topic_type == topic_type %>
<li class="active">
<% else %>
<li>  
<% end %>

<%= link_to user.student? ? Topic::TOPIC_TYPES[topic_type] : '我的公告', 
            topics_path(user_id: user, course_id: course, topic_type: topic_type),
            class: 'topic-type-action' %>
</li> 
```

这个文件在动作视图模板中被调用了 4 次：

```
<% (1..4).each do |tt| %>
  <%= render partial: 'link_topic_type', 
                      locals: { user: user, course: course, current_topic_type: topic_type, topic_type: tt } %>
<% end %> 
```

从输出来看，'current_topic_type' 和 'topic_type' 值都是正确的，但 'active' 值始终为 false：

```
current_topic_type: 1
topic_type: 1
active: false

current_topic_type: 1
topic_type: 2
active: false

current_topic_type: 1
topic_type: 3
active: false

current_topic_type: 1
topic_type: 4
active: false 
```

这很奇怪。我花了 2 个小时在上面，找不到任何提示。谁能给点提示？

# android - 如何使 android:background="?android:attr/selectableItemBackground 在 API 级别 8 中工作

> ID：11380699
> 
> 赞同：12
> 
> 时间：2012-07-08T04:44:29.087
> 
> 标签：android

我有一个按钮代码，我不想为这个按钮设置边框，所以我设置了属性`"android:background="?android:attr/selectableItemBackground"`，但它在 API 版本 8 中不起作用，即在 Froyo 模拟器中。请为我提供替代方案。

```
<Button
    android:id="@+id/serviceContactNumber"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/icon"
    android:layout_alignLeft="@+id/serviceName"
    android:gravity="center_vertical"
    android:singleLine="true"
    android:ellipsize="marquee" 
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true" 
    android:freezesText="true"
    android:textSize="30dip" 
    android:background="?android:attr/selectableItemBackground"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T22:39:45.717

无边框按钮是 Holo 主题的一部分，默认情况下早期 API 版本不可用。但是，您可以使用[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)使主题可用。目前它实际上也不支持无边框按钮，但您可以通过将按钮背景设置为`android:background="@drawable/list_selector_holo_light"`

如果那太重的解决方案要么从 holoeverywhere 或从 \android-sdk\platforms\android-16\data\res\drawable 提取适当的资产并将它们放入您自己的项目中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:47:27.687

检查我在此问题中找到的答案是否适用于您：[My app force closes on setcontentview when using the holoeverywhere library](https://stackoverflow.com/questions/14046232/my-app-force-closes-on-setcontentview-when-using-the-holoeverywhere-library)

```
style="?borderlessButtonStyle" 
```

# grails - Grails Scaffolding - 为域类的这个属性定义可能的值

> ID：11380704
> 
> 赞同：6
> 
> 时间：2012-07-08T04:46:19.663
> 
> 标签：grails, grails-domain-class, grails-constraints

我是 Grails 的新手。我有一个 Person 域类：

```
class Person {
    String firstName
    String lastName
    String gender
    Date dateOfBirth
} 
```

并且想知道我是否可以为属性定义可能的值 - 说性别为 {M, F, U} 以便在为 Person 控制器使用动态脚手架时这三个值将列在组合框中。

这里我只是想知道Grails框架中是否有这样的功能？如果存在这样的功能，那么我该如何使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T05:40:30.973

从文档[http://grails.org/doc/latest/guide/scaffolding.html](http://grails.org/doc/latest/guide/scaffolding.html)，您应该能够使用 inList 约束：

```
class Person {
    String firstName
    String lastName
    String gender
    Date dateOfBirth

    def constraints = {
        gender( inList: ["M", "F", "U"])
    }
} 
```

根据您使用的 Grails 版本，这应该为性别字段提供一个选择列表。2.0+ 绝对可以做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T01:37:38.197

这是一个替代解决方案

```
class Person {
    String firstName
    String lastName
    enum Gender {
        M(1),
        F(2),
        U(3)
        private Gender(int val) { this.id = val }
        final int id
    }
    Gender gender = Gender.U
    Date dateOfBirth

    def constraints = {
        gender()
    }
} 
```

这会将性别作为整数 (1,2,3) 存储在数据库中，并将性别默认为 U。这里的好处是您可以重命名 F、M 和 U 的含义，而无需处理数据迁移。

# javascript - 在wordpress中排队javascript时，wp_enqueue_scripts vs wp_footer

> ID：11380706
> 
> 赞同：0
> 
> 时间：2012-07-08T04:46:45.717
> 
> 标签：javascript, jquery, wordpress

在 wordpress 主题中排队 javascript 文件时，使用 wp_footer 作为钩子有什么缺点吗？我有大约 5 个文件要排入页脚，但是将页脚的 wp_enqueue_script 属性设置为 true 并没有做任何事情。

我的页脚文件中有 wp_footer() ，当我将操作更改为：

```
add_action('wp_footer', 'extra_scripts'); 
```

脚本在页脚中加载良好。这仅用于演示，而不仅仅是前端显示。以这种方式在页脚中加载脚本有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T09:41:15.320

你应该在页脚中加入你可以做的事情。要强制使用：

```
// force all JS to the footer
remove_action('wp_head', 'wp_print_scripts');
remove_action('wp_head', 'wp_print_head_scripts', 9);
remove_action('wp_head', 'wp_enqueue_scripts', 1);
add_action('wp_footer', 'wp_print_scripts', 5);
add_action('wp_footer', 'wp_enqueue_scripts', 5);
add_action('wp_footer', 'wp_print_head_scripts', 5); 
```

这样你就可以使用默认的了`wp_enqueue_scripts`
请记住，有些脚本需要`<head>`像二十一/二十一的[HTML5 脚本一样](http://remysharp.com/2009/01/07/html5-enabling-script/)

# c - C 中整数或任何其他数据类型的大小是否取决于底层架构？

> ID：11380709
> 
> 赞同：0
> 
> 时间：2012-07-08T04:46:56.223
> 
> 标签：c, architecture, types, integer, size

```
#include<stdio.h>

int main()
{
  int c; 
  return 0;
} // on Intel architecture

#include <stdio.h>

int main()
{
  int c; 
  return 0;
}// on AMD architecture 
```

/* 这里我在两台不同的机器上有一个代码，我想知道'数据类型的大小是否取决于机器' */

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:56:37.280

请参见此处： [C 和 C++ 中整数/算术类型的大小保证](https://stackoverflow.com/questions/4091826/size-guarantee-for-integral-arithmetic-types-in-c-and-c)

基本的 C 类型大小取决于实现（编译器）和体系结构，但是它们有一些保证的边界。因此，永远不应该对类型大小进行硬编码，而是使用 sizeof(TYPENAME) 来获取它们的字节长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:56:45.207

快速回答：是的，大多数情况下，但是......

C 中类型的大小取决于编译器编写者的决定，并符合标准的要求。

编译器编写者的决定往往受到 CPU 架构的强烈影响。例如，C 标准说：

> “普通” **int**对象具有执行环境架构所建议的自然大小。

尽管这留下了很大的判断空间。

此类决定还可能受到其他考虑因素的影响，例如与来自同一供应商的其他架构的编译器的兼容性以及为每种支持的大小提供类型的便利性。例如，在 64 位系统上，明显的“自然大小”`int`是 64 位，但许多编译器仍然具有 32 位`int`。（对于 8-bit`char`和 64-bit `int`，`short`可能是 16 位或 32 位，并且您不能拥有涵盖这两种大小的基本整数类型。）

（C99 引入了“扩展整数类型”，它可以解决覆盖所有支持大小的问题，但我不知道有任何编译器实现了它们。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:38:55.873

出于性能原因，它通常会这样做。`char`C 标准定义了所有类型（如、`short`、`int`、`long`）`long long`及其无符号对应物的最小值范围。

但是，英特尔和 AMD 的 x86 CPU 与大多数 x86 编译器的硬件基本相同。至少，它们向程序员公开了相同的寄存器和指令，并且它们中的大多数操作相同（如果我们考虑官方定义和记录的内容）。

无论如何，编译器或其开发人员可以使用任何其他大小，不一定要匹配目标硬件上的自然操作数大小，只要该大小符合 C 标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T19:45:35.493

是的。基本数据类型的大小取决于底层 CPU 架构。ISO C（和 C++）只保证数据类型的*最小*尺寸。

但是对于同一 CPU，编译器供应商之间的情况并不一致。考虑到有用于 Intel x386 CPU 的具有 32 位长整数的编译器，以及为您提供 64 位长整数的其他编译器。

并且不要忘记 MS 程序员在 Intel 286 机器时代不得不处理的十年左右的痛苦，编译器强加给我们的所有不同的“内存模型”。16 位指针与 32 位分段指针。我很高兴那些日子一去不复返了。

# c# - X509 自定义扩展 - 你如何设置它们？

> ID：11380710
> 
> 赞同：3
> 
> 时间：2012-07-08T04:47:29.817
> 
> 标签：c#, x509, x509certificate2

尽管进行了广泛的搜索，但我找不到任何`CustomExtensions`在 X509 (v3) 证书上设置自定义扩展（属性）的示例。

如果我想生成一个新证书（基于机器上已经安装的现有 CA 证书），我该如何添加自定义扩展？我希望在证书中携带一些额外的自定义信息以供以后检查。这可以通过编程方式或使用 makecert 来完成吗？还是只能通过编写生成证书时调用的[自定义策略模块来设置这些扩展？](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387704%28v=vs.85%29.aspx)这甚至可以通过使用.Net 框架中的常规`X509Certificate`或类来实现吗？`X509Certificate2`

我找到了检查自定义扩展的代码，但没有设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:32:42.637

无论您拥有什么现有证书，它都通过签名“密封”。更改其内容会使签名无效，从而使证书无效。这就是为什么您找不到任何有关您想要做什么的信息的原因。

当您通过 MMC 中的证书管理管理单元查看证书或在 Internet Explolrer 中浏览证书时，您可能会感到困惑的是证书的自定义属性。此类属性不存储在证书中 - 它们由 CryptoAPI 单独保存，而不是“嵌入”到证书中。

对于您拥有私钥的自签名证书，您可以重新创建证书并为其添加自定义扩展，但这种情况很少见。我不确定 .NET Framework 是否允许您使用自定义扩展，但我们的 SecureBlackbox 可以。

# wordpress - WordPress网站白标？

> ID：11380714
> 
> 赞同：2
> 
> 时间：2012-07-08T04:48:08.830
> 
> 标签：wordpress

我们有许多（数百个）客户需要基本的、以内容为导向的网站。我们目前正在为这些客户端使用简单的 WordPress 部署，但想让事情变得更简单。

有没有一种工具可以让我们给一个基本的 WordPress 网站贴上白标签或“重复使用”，然后简单地向其中注入一些文本和图像来创建一个全新的网站？

这个过程看起来像：

```
1\. Have new client that needs website
2\. Gather some client info (phone number, images, biography, etc.)
3\. Inject this info into a previously created WordPress "template" site
    (we would use the same template for all clients)
4\. Pick a WordPress theme
5\. And done. We now have a rebranded WordPress site for this client with minimal work        
     done. 
```

第**3**步是我们需要帮助的地方？是否有已经存在的东西可以做到这一点？如果不是，那么做这种“注射”的好方法是什么？我们正在考虑创建一个小应用程序，该应用程序将通过模板 WordPress 站点进行查找和替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:55:55.040

也许最好简单地编写一个插件，它可以让您在设置面板中准确收集您需要的信息，然后从那里将信息注入您正在使用的任何主题中。

因此，当您创建新站点来安装插件、使用它来添加信息等时，这将是一个相对简单的步骤。（也许如果大部分是客户端信息，它会将信息与管理员用户信息一起存储）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T04:54:02.013

好吧，如果您希望能够重复使用您的品牌，您可以在主题的 function.php 中进行，所以它是一种“便携”

例如，当我重新命名一个 wp 网站并自定义他们的 wp-login 时。更改徽标和东西。诸如隐藏主题编辑器、插件编辑器等菜单

一切都在一起，我把代码放在**functions.php中**

# android - Android Edittext with Button 如何对按钮进行操作

> ID：11380716
> 
> 赞同：-1
> 
> 时间：2012-07-08T04:49:29.080
> 
> 标签：android, search, button, android-edittext

我刚刚读到这篇[如何在 EditText 上添加图像](https://stackoverflow.com/questions/3703283/how-can-i-add-an-image-on-edittext)并想知道是否可以在单击时在图标上添加操作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:34:40.677

是的，可以`CustomEediTtext`从创建扩展`EditText`。检查这个解决方案

创建自定义的EditText类CustomEditText.java：

```
public class CustomEditText extends EditText {
   private Drawable dRight;
   private Rect rBounds;

   public CustomEditText(Context context, AttributeSet attrs, int defStyle) {
      super(context, attrs, defStyle);
   }
   public CustomEditText(Context context, AttributeSet attrs) {
      super(context, attrs);
   }
   public CustomEditText(Context context) {
      super(context);
   }

   @Override
   public void setCompoundDrawables(Drawable left, Drawable top,
      Drawable right, Drawable bottom)  {
      if(right !=null)
      {
        dRight = right;
      }
      super.setCompoundDrawables(left, top, right, bottom);
   }

   @Override
   public boolean onTouchEvent(MotionEvent event) {

     if(event.getAction() == MotionEvent.ACTION_UP && dRight!=null) {
       rBounds = dRight.getBounds();
       final int x = (int)event.getX();
       final int y = (int)event.getY();

       if(x>=(this.getRight()-rBounds.width()) && x<=(this.getRight()- 
       this.getPaddingRight()) && y>=this.getPaddingTop() && y<=(this.getHeight()-
       this.getPaddingBottom())) {
         //System.out.println("touch");
         this.setText("");
         event.setAction(MotionEvent.ACTION_CANCEL);//use this to prevent the keyboard 
       }
    }
    return super.onTouchEvent(event);
  }

  @Override
  protected void finalize() throws Throwable {
     dRight = null;
     rBounds = null;
     super.finalize();
  }
} 
```

# ruby-on-rails - 如何使用 Minitest 测试 Rails 路由？

> ID：11380717
> 
> 赞同：5
> 
> 时间：2012-07-08T04:49:37.913
> 
> 标签：ruby-on-rails, routing, minitest

我正在尝试将 Minitest 用于现有的 Rails 应用程序（3.2），但运行路由测试没有任何运气。我试过 rspec 语法（应该 route_to）和 TestUnit 语法（assert_routing），但没有运气。

关于让它工作的任何建议？我需要包含的特定模块等？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-27T17:00:12.577

如果您使用的是[minitest-rails](https://github.com/blowmage/minitest-rails)，您可以通过将以下内容放入来创建路由测试`test/routes/homepage_test.rb`：

```
require "minitest_helper"

class HomepageRouteTest < ActionDispatch::IntegrationTest
  def test_homepage
    assert_routing "/", :controller => "home", :action => "index"
  end
end 
```

或者，您可以使用 Minitest Spec DSL：

```
require "minitest_helper"

describe "Homepage Route Acceptance Test" do
  it "resolves the homepage" do
    assert_routing "/", :controller => "home", :action => "index"
  end
end 
```

您可以使用以下 rake 任务运行这些测试：

```
rake minitest:routes 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T04:13:10.417

@blowmage 的回答帮助了我，但看起来语法发生了一些变化。

使用 Rails 4：

```
require "test_helper"

class HomepageRouteTest < ActionDispatch::IntegrationTest
  def test_messages
    assert_generates '/messages', :controller => "messages", :action => "index"
  end
end 
```

# java - 为什么java服务器套接字接受失败？

> ID：11380719
> 
> 赞同：2
> 
> 时间：2012-07-08T04:50:03.040
> 
> 标签：java, sockets

在从 socket.accept() 捕获 IOException 并关闭执行接受的线程时不转储卡住的跟踪是很愚蠢的......解决了这个问题后，我仍然想了解如何处理这个调用时的情况巴夫斯。

我的应用程序是一个经典的套接字服务器，可以接受数百个客户端，有时甚至是数千个。接受线程始终处于启动状态并在 accept() 调用中被阻止。一旦被接受，就会启动单独的线程来做这些事情等等。没什么特别的。

问题是，accept() 失败时应该怎么办？这是否应该立即被视为永久性故障？我是否应该重新尝试进入 accept() 一段时间并尝试通过？最佳做法是什么？通常抛出 IOException 的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:50:54.380

我能想到的在调用中抛出 IOException 的唯一原因`accept()`是端口正在使用或主机的网络配置错误。

您可能会稍等片刻，然后重试，假设系统管理员会注意到问题并修复它。但是，如果在启动期间发生这种情况，最好让应用程序使用“致命”错误消息来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:55:15.640

1.  客户端有责任重试连接失败。服务器应该只记录异常并继续执行“接受”。通常，服务器从不启动与客户端的连接。
2.  抛出 IOException 的原因有很多，从防火墙问题到文件句柄耗尽问题。IOException 的消息应该揭示原因。

# cocoa - NSSearchField 不断失去焦点

> ID：11380720
> 
> 赞同：0
> 
> 时间：2012-07-08T04:50:18.030
> 
> 标签：cocoa, nsarraycontroller, first-responder, nssearchfield

我有一个`NSSearchField`其值绑定到`NSArrayController`子类的`query`字符串属性。数组控制器观察查询的变化并根据查询更新其过滤谓词。因此，每次用户输入内容时，结果都是即时搜索。问题是，只要数组控制器的`filterPredicate`or`fetchPredicate`被设置（或被`fetch:`调用），搜索字段就会自动失去焦点，并且窗口会使其成为第一响应者。在失去对搜索字段的关注之前，用户只能输入一个字符。谁能想到为什么获取数组控制器会导致第一响应者发生变化？

# c# - asp.net 页面的隐藏 __viewstate 上出现 500 内部服务器错误

> ID：11380723
> 
> 赞同：0
> 
> 时间：2012-07-08T04:51:51.810
> 
> 标签：c#, .net, client-server, cross-domain

我正在尝试将数据发布到跨域。如果表单没有使用 runat="server" 并且当表单使用 runat="server" 时它在发布时给出 500 内部错误，则它工作正常。

调试后，我发现问题出在页面上自动生成的 __viewstate 代码上。请找到以下代码。

## 客户端 HTML 实现：

```
<%@ Page Language="C#" CodeFile="Sample.aspx.cs" Inherits="Sample" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<meta charset="utf-8">
    <title>Untitled Page</title>
    <link href="FileUpload.css" rel="stylesheet" type="text/css" />

   <script id="template-upload" type="text/x-tmpl">
    </script>
    <script id="template-download" type="text/x-tmpl">
    </script>

    <script src="../../test/FileUpload/jQueryv1.6.2.js"></script>
    <script src="fileupload-js/jquery.ui.widget.js"></script>
    <script src="fileupload-js/tmpl.min.js"></script>
    <script src="fileupload-js/jquery.fileupload.js"></script>
    <script src="fileupload-js/jquery.fileupload-ui.js"></script>
    <script src="fileupload-js/locale.js"></script>
    <script src="fileupload-js/main.js"></script>    
</head>
<body>
<form id="fileupload" method="POST" runat="server">
    <CCAB.Web:FileUpload runat="server"/>
</form>
</body>
</html> 
```

## 服务器端代码：

```
public partial class SaveFile : System.Web.UI.Page
{
    private void Page_Load(object sender, System.EventArgs e)
    {
        Response.AddHeader("Access-Control-Allow-Origin", "*")

        if (Request.HttpMethod == "GET" || Request.HttpMethod == "HEAD")
        {

            Response.Write("GET Success");
        }
        else
        {
            for (int i = 0; i < Request.Files.Count; i++)
            {
                string filename = Request.Files[i].FileName;
                Request.Files[i].SaveAs(@"\\dev2\\share$\\Anna\\test\\" + filename);
                Response.Write(filename);
            Response.Write("Success");
            }

        }
    }
} 
```

您能否帮助我了解如何忽略来自客户端的隐藏视图状态代码或忽略服务器端的响应视图状态。

非常感谢安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:09:20.873

尝试通过向卸载处理程序添加一行代码来禁用视图状态：

```
Page.EnableViewState = false; 
```

看到[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableviewstate.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:03:55.933

我已经找到了解决这个问题的方法。如下请见

```
public class BasePage : Page

{

  private static string[] aspNetFormElements = new string[] 

  { 

    "__EVENTTARGET",

    "__EVENTARGUMENT",

    "__VIEWSTATE",

    "__EVENTVALIDATION",

    "__VIEWSTATEENCRYPTED",

  };

  protected override void Render(HtmlTextWriter writer)

  {

    StringWriter stringWriter = new StringWriter();

    HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

    base.Render(htmlWriter);

    string html = stringWriter.ToString();

    int formStart = html.IndexOf("<form");

    int endForm = -1;

    if (formStart >= 0)

      endForm = html.IndexOf(">", formStart);

    if (endForm >= 0)

    {

      StringBuilder viewStateBuilder = new StringBuilder();

      foreach (string element in aspNetFormElements)

      {

        int startPoint = html.IndexOf("<input type=\"hidden\" name=\"" + element + "\"");

        if (startPoint >= 0 && startPoint > endForm)

        {

          int endPoint = html.IndexOf("/>", startPoint);

          if (endPoint >= 0)

          {

            endPoint += 2;

            string viewStateInput = html.Substring(startPoint, endPoint - startPoint);

            html = html.Remove(startPoint, endPoint - startPoint);

            viewStateBuilder.Append(viewStateInput).Append("\r\n");

          }

        }

      }

      if (viewStateBuilder.Length > 0)

      {

        viewStateBuilder.Insert(0, "\r\n");

        html = html.Insert(endForm + 1, viewStateBuilder.ToString());

      }

    }

    writer.Write(html);

  }

} 
```

请在此页面上找到更多信息：http: [//blogs.msdn.com/b/tom/archive/2008/03/14/validation-of-viewstate-mac-failed-error.aspx](http://blogs.msdn.com/b/tom/archive/2008/03/14/validation-of-viewstate-mac-failed-error.aspx)

非常感谢安娜

# java - 如何从 <%%> 标签内的 jsp 页面调用 java 函数？

> ID：11380725
> 
> 赞同：0
> 
> 时间：2012-07-08T04:52:06.850
> 
> 标签：java, jsp

我做了一个函数调用（代码如下所示），但我仍然有一个编译错误。我在 NetBeans 环境中使用它。

```
<textarea name="txt" rows="10" cols="85" disabled>
<% 
String str=request.getParameter("rep"); 
blog bg=new blog();
bg.add(str);  
%>
</textarea> 
```

编译错误指向我创建类博客实例的行。错误是**“找不到类符号”**。（虽然我已经创建了我的类博客）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:54:51.600

代码应该是

```
<textarea name="txt" rows="10" cols="85" disabled></textarea>
<% 
String str=request.getParameter("rep"); 
blog bg=new blog();
bg.add(str);  
%> 
```

# makefile - 如何为makefile分配变量

> ID：11380728
> 
> 赞同：0
> 
> 时间：2012-07-08T04:53:06.350
> 
> 标签：makefile

我正在尝试将变量与 makefile 一起使用，但似乎无法始终如一地使用它们。

以下代码（在文件 silly2.mak 中）：

```
SUBS = src
SSUBS=/src2
SHELL=/bin/sh

silly5:
    echo '<<<' $$SUBS '--' $$SSUBS '--' $$SHELL '>>>' 
```

运行时：

```
me@ubuntu:/usr/local/hsfsys$ make -f silly2.mak silly5 
```

给出以下输出：

```
echo '<<<' $SUBS '--' $SSUBS '--' $SHELL '>>>'
<<< -- -- /bin/bash >>> 
```

为什么“SHELL”似乎比我的其他变量更有效？它是某种保留字吗？我已经尝试移动变量的顺序并查看在线文档，但仍然不明白为什么 echo 会选择 SHELL 的值，而不是 SUBS 或 SSUBS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:05:48.337

尝试这个

```
SUBS = src
SSUBS=/src2
SHELL=/bin/sh

all:
    echo '<<<' $(SUBS) '--' $(SSUBS) '--' $(SHELL) '>>>' 
```

# php - 从 symfony2 到 symfony 1 有多难？

> ID：11380729
> 
> 赞同：1
> 
> 时间：2012-07-08T04:53:20.640
> 
> 标签：php, symfony1, symfony, symfony-1.4

我知道 symfony2 并且从未使用过 symfony1.4。我要去新公司，但不知道他们使用的是 symfony2 还是 symfony1.4。

我想知道，如果他们确实使用了 symfony1.4 ，那么进行转换有多难？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T07:33:38.940

Symfony2 和 symfony 在代码库上完全不同，但从架构的角度来看，尤其是核心类的“布线”。

由于 Symfony2 有它的依赖注入容器 (DIC) 来处理服务类及其依赖关系，symfony 1.4 有一个 sfContext 单例来处理不同的类，这些类在某种程度上可以在 factory.yml 配置文件中进行配置，但一点也不像在Symfony2。

另一方面，MVC 概念在两个版本之间仍然相当普遍。您有一个将 URL 映射到控制器的路由组件（语法略有不同）。在控制器中，您处理请求并准备视图中所需的数据。symfony 1.4 中的模板是普通的 php 文件（没有 twig）。1.4 中支持的 ORM 是学说 1.2 和推进（我相信 1.6）。此外，两个版本的表单处理和安全组件也不同。

但这或多或少都是“细节”。最重要的问题是你要用它做什么。如果应用程序本身是直截了当的东西，你应该能够很快进入 1.4，如果你必须进入内部，你会发现更多的概念和限制差异。

要了解一下，您可以查看 1.4 的 jobeet 教程：[http ://www.symfony-project.org/jobeet/1_4/Doctrine/en/](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/)

在 v2 的官方文档中找到更多关于差异的信息：http: [//symfony.com/doc/current/cookbook/symfony1.html](http://symfony.com/doc/current/cookbook/symfony1.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T07:23:24.383

symfony1.4 与 Symfony2 完全不同。

它们基本上是 2 个单独的框架，仅共享名称。

此外，在比较 symfony 版本时，您必须记住它使用的大多数组件也已更新。例如，Doctrine 也被重写，它们使用完全不同的设计模式（1.x 中的 Active Record 与 2.x 中的 Data Mapper）。

话虽如此，1.4 更容易学习（在我的主观意见中），所以如果你真的了解 symfony2 的方法，学习 1.4 应该不会太难或太长。

如果他们真的使用旧版本，你也可以考虑说服新公司的人切换到新版本，因为 symfony 1.4 很快甚至不会被支持。

# garbage-collection - 垃圾收集器与 ARC。哪一个更好？

> ID：11380738
> 
> 赞同：-1
> 
> 时间：2012-07-08T04:54:55.990
> 
> 标签：garbage-collection, automatic-ref-counting

> **可能重复：**
> [Objective-C 自动引用计数和垃圾回收有什么区别？](https://stackoverflow.com/questions/7874342/what-is-the-difference-between-objective-c-automatic-reference-counting-and-garb)

iOS 使用 ARC。但真的更好吗？对移动平台更好还是总体上更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:11:45.133

一般情况下比较好。当编译器可以生成不会留下垃圾的代码时，你为什么要忍受垃圾收集器的运行时开销？ARC 在没有垃圾收集器的情况下为您提供垃圾收集的内存管理便利。

# facebook-opengraph - 将开放图用于电子书的最佳方式

> ID：11380739
> 
> 赞同：2
> 
> 时间：2012-07-08T04:55:12.257
> 
> 标签：facebook-opengraph, isbn

我正在自行出版电子书

我阅读了开放图形协议的类型[http://ogp.me/#types](http://ogp.me/#types)

在开放图形协议中，对于书籍命名空间[http://ogp.me/ns/book](http://ogp.me/ns/book)

有以下属性。

book - 命名空间 URI： http: [//ogp.me/ns/book#](http://ogp.me/ns/book#)

*   book:author - 个人资料数组 - 谁写了这本书。
*   book:isbn - 字符串 - ISBN
*   book:release_date - datetime - 图书的发行日期。
*   book:tag - 字符串数组 - 与这本书相关的标签词。

我显然可以填写除 isbn 之外的所有内容。

我不打算为自己出版的电子书获得 ISBN。

那么，对于没有 ISBN 编号的电子书，我应该如何优化 OPG 的使用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:23:00.053

book 命名空间似乎允许没有 ISBN 的书籍对象，但较新的 books.book 命名空间[http://graph.facebook.com/schema/og/books#](http://graph.facebook.com/schema/og/books#)需要它。

关于没有 ISBN 的电子书存在一个已知问题： [https ://developers.facebook.com/bugs/238075889669083](https://developers.facebook.com/bugs/238075889669083)

# java - Web 应用的 JSP/Servlet 设计模式建议

> ID：11380743
> 
> 赞同：0
> 
> 时间：2012-07-08T04:56:02.717
> 
> 标签：java, jsp, design-patterns, web-frameworks

我在基于原生脚本 (JSP) 的 RESTful Web 框架中工作。该框架有一个路由机制，可以自动设置一些请求属性，然后在 JSP 中可用（其中一个属性是请求资源的“模型”；它基本上只是一个 HashMap）。

问题在于 90% 的时间，需要向 JSP 添加一些逻辑，无论是更复杂的域逻辑、检索其他资源数据（其他模型）还是清理数据以进行输出。

我正在研究各种建立 Web 应用程序设计模式，用于从 JSP 中提取域逻辑，并使 JSP 尽可能地无逻辑。

需要注意的几点：

1.  在我正在工作的系统中，提供了模型（从数据库中提取的数据），但提供了框架（前面提到的 HashMap）；我可以围绕这些数据创建自己的模型包装器，但这可能是不必要的。
2.  JSP/脚本是请求的终点 - 如果我使用的模式使用 Presenter/Controller 类型的对象，该对象返回包含视图将使用的所有数据的 View bean（ViewModel？），我将需要一行在调用 Presenter/Controller 并实例化 View bean 的 JSP 中。

目前我已经为每个模块（脚本）创建了一个 Presenter POJO，它可以访问模型（同样，框架将其设置为请求属性），并简单地在 JSP 的顶部实例化它，并使用它更多或不像豆子。

如果我理解正确，我相信我已经实现了演示模型设计模式。[1]

前任。

JSP 看起来像：

```
<% DemoPresenter demo = new DemoPresenter(request) %>
<%= demo.getTitle() %>
- or add it to pageContext to use w JSTL/EL -
<c:set var="demo" value="new DemoPresenter(request)"/>
${demo.title} 
```

“演示者/控制器”看起来像：

```
public class DemoPresenter extends BasePresenter { 

   private String title; 

   public DemoPresenter(HttpServletRequest request) { 
       FrameworkModel model = request.getAttribute("frameworkProvidedResourceModel");
       this.title = model.get("title").toUpperCase() + "!!!";
   } 

   public getTitle() { return this.title; } 
} 
```

关于直接在 JSP/Script 中使用 Presenter obj 与让它返回 Presenter 使用数据填充的“无逻辑”ViewModel bean 的任何想法？这样做的好处是我可以让一个 Presenter 管理同一资源的各种“视图”（例如 Show-view、Edit-view、Summary-view 等） - 下面是我如何获得各种视图的示例楷模。

/blog/posts/1/show -> 执行 JSP，它得到它的 ViewModel，如下所示：

```
<% DemoDefaultViewModel default = new DemoPresenter(request).getViewModel(DemoDefaultViewModel.class); %> 
```

/blog/posts/1/edit -> 执行一个 JSP，它得到它的 ViewModel，如下所示：

```
<% DemoEditViewModel edit = new DemoPresenter(request).getViewModel(DemoEditViewModel.class); %> 
```

我想保留一个没有太多无关部分的简单解决方案。当我在一个严格的预定义框架中工作时，我也不能太花哨——我只是想找到一种好方法，将我的所有域逻辑从 JSP 中移出到更可重用、可测试的 Java 类中。

[1] [http://martinfowler.com/eaaDev/PresentationModel.html](http://martinfowler.com/eaaDev/PresentationModel.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:44:04.090

检查支柱。
我必须承认只使用过旧版本，但“前端控制器”servlet 的想法似乎是你所追求的。它是一个运行公共代码和路由请求的特殊 servlet。
它还具有可以在 Web 容器之外进行测试的操作。

我从纯 JSP 转向 struts 的那一天是我 Web 开发生涯中最美好的日子之一！该项目开始感觉井井有条，并且更易于管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T10:08:47.810

有很多 MVC 框架。例如，Struts 使用前端控制器 servlet 根据所使用的资源将请求分派到类（控制器）。该类处理请求并将结果发送到视图（通常是 jsp）。模型是代表您的数据的任何类。仅供参考，地图不是框架。仅将您的数据表示为 MAP 会起作用，但是很难看且难以维护。

在不了解您的严格框架的情况下，普遍接受的良好做法是保持您的业务逻辑集中并独立于任何框架。仅将您的框架用于管道。让您的控制器在您的演示和业务逻辑之间进行调解，这只是管道。将您的显示数据放在正确的范围内（几乎总是请求范围），这样您就不必像示例中那样拥有 scriptlet。

# c - 我在我的 C 程序中使用了 pow() 函数，但没有链接到 -lm 它仍然有效。为什么？

> ID：11380744
> 
> 赞同：3
> 
> 时间：2012-07-08T04:56:09.260
> 
> 标签：c, gcc, compiler-construction

我正在读一本关于 GCC 的书。它说默认情况下，任何 C 程序都只链接标准库。由于`pow()`不在标准库中，我将不得不使用`-lm`标志链接到它。但是，当我编译时，我只是使用了：

```
gcc hello.c -o hello 
```

它仍然有效..

还有一个类似的问题，书上还说，如果你`printf("%f\n", 4);`的C程序中有，如果你编译WITHOUT`-Wall`选项，不会发出警告。但是，我尝试在没有`-Wall`选项的情况下编译它，但仍然收到警告：

> hello.c:6:2：警告：格式“%f”需要“double”类型的参数，但参数 2 的类型为“int”[-Wformat]

为什么是这样？这本书说我必须提供`-lm`并且`-Wall`为了使我的程序编译并得到警告，但我没有使用它们中的任何一个，但我仍然编译了我的程序并得到了警告？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T06:11:52.873

基于一些实验的更多信息。

考虑这个程序：

```
#include <stdio.h>
#include <math.h>
int main(void) {
#ifdef CONSTANT
    double x = pow(2.0, 10.0);
#else
    double expon = 10.0;
    double x = pow(2.0, expon);
#endif
    printf("x = %f\n", x);
    return 0;
} 
```

在 Ubuntu 上，当我用

```
$ gcc c.c -o c 
```

它抱怨未定义的引用`pow`；添加`-lm`纠正它。

但是这个：

```
$ gcc -DCONSTANT c.c -o c 
```

编译和链接没有错误，用`pow()`常量替换调用`1024.0`。但是这个：

```
$ gcc -fno-builtin -DCONSTANT c.c -o c 
```

再次抱怨对`pow`.

`pow`结论：gcc只有在编译时就可以确定结果时才使用内置实现。否则，它会生成对`pow()`函数的显式调用，这需要与`-lm`.

另请注意，这取决于 C 库的组织方式（该库是单独提供的；它不是 gcc 的一部分）。在 Cygwin 上，它使用[newlib](http://en.wikipedia.org/wiki/Newlib)而不是Ubuntu 上使用的[glibc](http://en.wikipedia.org/wiki/Glibc)`-lm` ，不需要该选项；显然，数学例程是标准库的一个组成部分，而不是单独提供。（Cygwin 上的 gcc 仍然接受该`-lm`选项。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T04:59:19.747

GCC 提供了几个标准库函数作为[内置](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)函数：

> GCC 提供了大量除上述之外的内置函数。其中一些是在处理异常或可变长度参数列表时内部使用的，并且不会在此处记录，因为它们可能会不时更改；我们不建议一般使用这些功能。
> 
> 其余函数用于优化目的。

如果您查看内置插件列表，您会发现它`pow`就是其中之一。

如果您添加[`-fno-builtin`](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-fno_002dbuiltin-107)到您的编译器选项，您应该得到您所期望的链接器错误。

# c++ - C++ 数组编译时错误

> ID：11380745
> 
> 赞同：1
> 
> 时间：2012-07-08T04:56:13.847
> 
> 标签：c++, arrays

我正在做一个 C++ 项目。在使用 Java 之后，我正在自学 C++。代码：

```
#include <iostream>
#include <string>

using namespace std;
class dayType
{
private:
    string day;
    string week[] = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"};

public:
    dayType()
    {
        day = "Monday";
        dayID = 0;
    }
}; 
```

还有更多的公共函数，但我把它们省略了，因为它们在这里并不重要。数组存在编译时错误。它说它是“无法解析标识符：周”、“意外令牌：{”和“意外令牌：}”。有人可以解释为什么会这样吗？如果我将其声明为“字符串周 [7]；” 然后在函数中定义实际值，它工作正常，但这很痛苦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:00:46.217

据我所知，这在 C++ 中是不可能的。你到底想做什么？在 C++ 中，OOP 不会像在 Java 或 C# 中那样强加给您。

另请注意，您的函数名称与您的类名称不同。这意味着省略返回类型将导致编译器错误[感谢 Aditya Kumar 指出它不会导致 void 返回类型]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:20:43.237

您正在寻找的 C++ 功能是“静态类成员”。这是语法：

```
#include <iostream>
#include <string>

using namespace std;
class dayType
{
private:
    string day;
    static string week[];

public:
    void Project113()
    {
        day = "Monday";
        dayID = 0;
    }
};

// Note that if the class definition is in a .H file, the following line should
// appear in exactly one .CPP file.
string dayType::week[] = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"}; 
```

# c++ - STL算法无法访问私有成员

> ID：11380748
> 
> 赞同：-8
> 
> 时间：2012-07-08T04:56:56.867
> 
> 标签：c++

提前为代码量道歉，但我找不到构建错误的来源。此示例在 VC++ 6.0 上正确构建，但在更新的编译器上失败，包括 g++ 和 VC++ 2010。错误消息显示错误 C2248: 'std::basic_ios<_Elem,_Traits>::basic_ios' : cannot access private member declaration in class 'std::basic_ios<_Elem,_Traits>' 请帮忙。

```
 #pragma warning( disable : 4786 )  
  #pragma warning( disable : 4996 )  

  #include <iostream>
  #include <fstream>
  #include <algorithm>
  #include <vector>
  #include <list>
  #include <numeric>
  #include <iterator>

  template<class T>
  class Criteria {
  public:
    Criteria(T match) : m_match(match) {

    }

    bool operator()(T match) {
        return (m_match == match);
    }
  private:
    T m_match;
  };

  template<class T>
  class BinaryCriteria {
  public:
    bool operator()(T item1, T item2) {
        return (item1*item1 > item2+item2);
    }
  };

  std::ostream& operator<<(std::ostream& o, std::string rhs) {
    return (o << rhs.c_str());
  }

  void print( int x ) {
    std::cout << x << " ";
  }

  template<class T>
  class Print {
  public:
    Print(const char* sep) : m_sep(sep) {
    }
    void operator()(T item) {
        std::cout << item << m_sep.c_str();
    }
  private:
    std::string m_sep;
  };

  template<class T>
  class Equal {
  public:

    bool operator()(T item1, T item2) {
        return (item1 * 2 == item2);
    }
  };

  template<class T>
  class File {
  public:
    File(const char* file) {
        m_in.open(file);
    }
    ~File() {
        if (m_in)
            m_in.close();
    }
    T operator()() {
        m_in.getline(m_buf, sizeof(m_buf));
        T line = m_buf;
        return line;
    }
  private:
    std::ifstream m_in;
    char m_buf[80];
  };

  template<class T>
  class Odd {
  public:
    bool operator()(T item) {
        if (item % 2 != 0)
            return false;
        else
            return true;
    }
  };

  template<class T>
  class Upper {
  public:
    T operator()(T item) {
        std::transform(item.begin(),item.end(),item.begin(),::toupper);
        return item;
    }
  };

  template<class T>
  class Concat {
  public:
    Concat(const char* sep) : m_sep(sep) {

    }
    T operator()(T item1, T item2) {
        T out;
        out = item1;
        out += m_sep;
        out += item2;
        return out;
    }
  private:
    std::string m_sep;
  };

  template<class T>
  class TheSame {
  public:
    bool operator()(T item1, T item2) {
        if (item1 * 10 == item2)
            return true;
        else
            return false;
    }
  };

  template<class T>
  class Rand {
  public:
    T operator()() {
        return static_cast<T>(::rand());
    }
  };

  struct Employee {
    Employee(std::string name, std::string dept, std::string id) :
          m_name(name), m_dept(dept), m_id(id) {
    }
    std::string m_name;
    std::string m_dept;
    std::string m_id;
  };

  class SortByName {
  public:
    bool operator()(const Employee* lhs, const Employee* rhs) {
        int res = ::strcmp(lhs->m_name.c_str(),rhs->m_name.c_str());
        if (res == -1)
            return true;
        else
            return false;
    }
  };

  class SortByDept {
  public:
    bool operator()(const Employee* lhs, const Employee* rhs) {
        int res = ::strcmp(lhs->m_dept.c_str(),rhs->m_dept.c_str());
        if (res == -1)
            return true;
        else
            return false;
    }
  };

  class SortById {
  public:
    bool operator()(const Employee* lhs, const Employee* rhs) {
        int res = ::strcmp(lhs->m_id.c_str(),rhs->m_id.c_str());
        if (res == -1)
            return true;
        else
            return false;
    }
  };

  std::ostream& operator<<(std::ostream& o, const Employee* rhs) {
    o << rhs->m_name << "," << rhs->m_dept << "," << rhs->m_id;
    return o;
  }

  int main(int argc, char* argv[]) {

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);

            std::vector<int>::iterator ifind = std::find(v.begin(), v.end(), -4);
            if (ifind != v.end())
                std::cout << "Item found " << *ifind << std::endl;
            else 
                std::cout << "Item was not found" << std::endl;

            ifind = std::find_if(v.begin(), v.end(), Criteria<int>(4));
            if (ifind != v.end())
                std::cout << "Item found " << *ifind << std::endl;
            else 
                std::cout << "Item was not found" << std::endl;
    }

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);
            v[4] = 5; // create an adjacent pair

            std::vector<int>::iterator ifind = std::adjacent_find(v.begin(), v.end());
            if (ifind != v.end())
                std::cout << "Items found " << *ifind << " " << *(ifind+1) << std::endl;
            else 
                std::cout << "Items were not found" << std::endl;

            v[4] = 4; // create an adjacent pair
            ifind = std::adjacent_find(v.begin(), v.end(), BinaryCriteria<int>());
            if (ifind != v.end())
                std::cout << "Items found " << *ifind << " " << *(ifind+1) << std::endl;
            else 
                std::cout << "Items were not found" << std::endl;
    }

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);
            v[3] = 3;
            v[7] = 3; // some duplicates

            std::cout << "The item " << 2 << " appears " 
                      << std::count( v.begin(), v.end(), 2) 
                      << " times" << std::endl;

            std::cout << "The item " << 3 << " appears " 
                      << std::count_if( v.begin(), v.end(), Criteria<int>(3)) 
                      << " times" << std::endl;

    }

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);

            std::for_each(v.begin(), v.end(), Print<int>(" "));
            std::cout << std::endl;
            std::for_each(v.begin(), v.end(), print);
            std::cout << std::endl;
    }   

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);
            int tab[3] = { 0, 1, 2 };

            bool res = std::equal(tab, tab+3, v.begin());
            if (res)
                std::cout << "Ranges are equal" << std::endl;
            else
                std::cout << "Ranges are not equal" << std::endl;

            v[0] = 2 * tab[0];
            v[1] = 2 * tab[1];
            v[2] = 2 * tab[2];
            res = std::equal(tab, tab+3, v.begin(), Equal<int>());
            if (res)
                std::cout << "Ranges are equal" << std::endl;
            else
                std::cout << "Ranges are not equal" << std::endl;

            res = std::equal(tab, tab+3, v.begin());
            if (res)
                std::cout << "Ranges are equal" << std::endl;
            else
                std::cout << "Ranges are not equal" << std::endl;

            res = std::equal(tab, tab+3, &v[5], Equal<int>());
            if (res)
                std::cout << "Ranges are equal" << std::endl;
            else
                std::cout << "Ranges are not equal" << std::endl;

    }   

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);
            int tab[6] = { 0, 1, 2, 4, 5, 6 };

            std::pair<int*, std::vector<int>::iterator> res =
                std::mismatch(tab, tab+6, v.begin() );
            if (res.first != (tab+6)) {
                std::cout << "mismatch located " 
                    << "item in first range " << *res.first <<
                       " item in second range " << *res.second << std::endl;
            } else
                std::cout << "No mismatch found within the range" << std::endl;

            v[0] = 2 * tab[0];
            v[1] = 2 * tab[1];
            v[2] = 2 * tab[2];
            tab[3] = -99;
            res = std::mismatch(tab, tab+6, v.begin(), Equal<int>() );
            if (res.first != (tab+6)) {
                std::cout << "mismatch located " 
                    << "item in first range " << *res.first <<
                       " item in second range " << *res.second << std::endl;
            } else
                std::cout << "No mismatch found within the range" << std::endl;

    }   

  if (false)    {

            std::vector<int> v;
            for (int i=0; i<10; i++)
                v.push_back(i);
            int tab[3] = { 4, 5, 6 };

            std::vector<int>::iterator res = std::search(v.begin(), v.end(), tab, tab+3);
            if (res != v.end())
                std::cout << "Subsequence located - first item = " << *res << std::endl;
            else
                std::cout << "Subsequence not located" << std::endl;

            tab[0] = 2 * v[5];
            tab[1] = 2 * v[6];
            tab[2] = 2 * v[7];
            // predicate function version
            res = std::search(v.begin(), v.end(), tab, tab+3, Equal<int>());
            if (res != v.end())
                std::cout << "Subsequence located - first item = " << *res << std::endl;
            else
                std::cout << "Subsequence not located" << std::endl;

    }

  if (false)    {

            std::vector<int> v(10);
            int tab[10] = { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 };
            std::copy(tab,tab+10,v.begin());
            std::for_each(v.begin(),v.end(),Print<int>(" "));
            std::cout << std::endl;

            std::copy_backward(tab,tab+10,v.end());
            std::for_each(v.begin(),v.end(),Print<int>(" "));
            std::cout << std::endl;

            std::vector<char> v2;
            const char* str = "ABCDEFGHIJ";
            std::copy(str,str+10,std::back_inserter(v2));

            std::cout << "Before shift left" << std::endl;
            std::for_each(v2.begin(),v2.end(),Print<char>(""));
            std::cout << std::endl;

            std::copy(v2.begin()+1, v2.end(), v2.begin());

            std::cout << "After shift left" << std::endl;
            std::for_each(v2.begin(),v2.end(),Print<char>(""));
            std::cout << std::endl;

            std::copy(str,str+10,v2.begin());

            std::cout << "Before shift right" << std::endl;
            std::for_each(v2.begin(),v2.end(),Print<char>(""));
            std::cout << std::endl;

            std::copy_backward(v2.begin(), v2.end()-1, v2.end());

            std::cout << "After shift right" << std::endl;
            std::for_each(v2.begin(),v2.end(),Print<char>(""));
            std::cout << std::endl;

    }

  if (false)    {

            std::vector<int> v(10);
            std::fill(v.begin(),v.end(),-5);
            std::for_each(v.begin(),v.end(),Print<int>(" "));
            std::cout << std::endl;

            std::fill_n(v.begin(),10,-5);
            std::for_each(v.begin(),v.end(),Print<int>(" "));
            std::cout << std::endl;

    }

  if (false)    {

            std::vector<std::string> v(10);

            std::generate(v.begin(),v.end(),File<std::string>("c:/temp/items.txt"));
            std::for_each(v.begin(),v.end(),Print<std::string>("\n"));
            std::cout << std::endl;

    }

  if (false)    {
            std::vector<int> v;
            for(int i=0; i<10; i++)
                v.push_back(i);
            std::vector<int>::iterator res =
                std::partition(v.begin(),v.end(),Odd<int>());

            // display each range
            std::cout << "first range ";
            std::for_each(v.begin(),res,Print<int>(" "));
            std::cout << std::endl;

            std::cout << "second range ";
            std::for_each(res,v.end(),Print<int>(" "));
            std::cout << std::endl;

            // repeat for stable_partition
            for(int i=0; i<10; i++)
                v[i]=i;
            res = std::stable_partition(v.begin(),v.end(),Odd<int>());

            // display each range
            std::cout << "first range ";
            std::for_each(v.begin(),res,Print<int>(" "));
            std::cout << std::endl;

            std::cout << "second range ";
            std::for_each(res,v.end(),Print<int>(" "));
            std::cout << std::endl;

            // repeat using STL components
            for(int i=0; i<10; i++)
                v[i]=i;
            res = std::partition(v.begin(),v.end(),
                std::bind2nd(  std::greater<int>(),  2));

            // display each range
            std::cout << "first range ";
            std::for_each(v.begin(),res,Print<int>(" "));
            std::cout << std::endl;

            std::cout << "second range ";
            std::for_each(res,v.end(),Print<int>(" "));
            std::cout << std::endl;

            // repeat using STL components
            for(int i=0; i<10; i++)
                v[i]=i;
            res = std::partition(v.begin(),v.end(),
                std::bind1st(  std::greater<int>(),  2));

            // display each range
            std::cout << "first range ";
            std::for_each(v.begin(),res,Print<int>(" "));
            std::cout << std::endl;

            std::cout << "second range ";
            std::for_each(res,v.end(),Print<int>(" "));
            std::cout << std::endl;

    }

  if (false)    {
            // random_shuffle randomly rearranges the items in a range.
            std::vector<int> v;
            for(int i=0; i<100; i++)
                v.push_back(i);
            std::random_shuffle(v.begin(),v.end());
            std::copy(v.begin(),v.end(),
                std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

    }

  if (false)    {
            int buf[10] = { 2, 5, 3, 5, 4, 5, 6, 6, 5, 5 };

            int* res = std::remove(buf, buf+10, 5);

            std::cout << "items to keep ";
            std::copy(buf, res, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

            std::cout << "items to remove ";
            std::copy(res, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

            // test with vector
            std::vector<int> v;
            for(int i=0; i<10; i++)
                v.push_back(i);

            std::cout << "size of v before call to remove " << v.size() << std::endl;
            std::vector<int>::iterator p = std::remove(v.begin(), v.end(), 5);
            std::cout << "size of v after call to remove " << v.size() << std::endl;

            v.erase(p);
            std::cout << "size of v after erase " << v.size() << std::endl;
            std::copy(v.begin(), v.end(), std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

    }

  if (false)    {
            int buf[10] = { 2, 5, 3, 5, 4, 5, 6, 6, 5, 5 };
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;
            std::replace(buf, buf+10, 5, 0);
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

    }

  if (false)    {
            // The reverse algorithm reverses the order of the items in a given range.
            int buf[10] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };

            std::cout << "Before reverse ";
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

            std::reverse(buf, buf+10);

            std::cout << "After reverse ";
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

    }

  if (false)    {
            int buf[10] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };

            std::cout << "Before rotate ";
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

            std::rotate(buf, buf+4, buf+10);

            std::cout << "After rotate ";
            std::copy(buf, buf+10, std::ostream_iterator<int>(std::cout," "));
            std::cout << std::endl;

    }

  if (false)    {
            // The swap function swaps to values
            std::string first="Hello";
            std::string second="World";
            std::cout << first << " " << second << std::endl;
            std::swap(first,second);
            std::cout << first << " " << second << std::endl;

            // The swap_ranges function swaps ranges.
            std::list<std::string> ll;
            ll.push_front("Homer");
            ll.push_front("Marge");
            ll.push_front("Bart");

            std::vector<std::string> vec;
            vec.push_back("Moe");
            vec.push_back("Wiggum");
            vec.push_back("Burns");

            std::swap_ranges(ll.begin(),ll.end(),vec.begin());

            std::cout << "List values ";
            std::for_each(ll.begin(),ll.end(),Print<std::string>(" "));
            std::cout << std::endl;

            std::cout << "Vector values ";
            std::for_each(vec.begin(),vec.end(),Print<std::string>(" "));
            std::cout << std::endl;

    }

  if (false)    {
            std::vector<std::string> v(3);
            std::list<std::string> ll;
            ll.push_front("Homer");
            ll.push_front("Marge");
            ll.push_front("Bart");
            std::transform(ll.begin(),ll.end(),v.begin(),Upper<std::string>());
            std::cout << "Uppercase names ";
            std::for_each(v.begin(),v.end(),Print<std::string>(" "));
            std::cout << std::endl;

            std::list<std::string> ll2;
            ll2.push_front("Simpson");
            ll2.push_front("Simpson");
            ll2.push_front("Simpson");
            std::transform(ll.begin(),ll.end(),ll2.begin(),v.begin(),Concat<std::string>(" "));
            std::cout << "Concat'ed names ";
            std::for_each(v.begin(),v.end(),Print<std::string>("\n"));
            std::cout << std::endl;

            int a[10] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
            int b[10] = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
            int c[10];
            std::transform(a,a+10,b,c,std::plus<int>());
            std::for_each(c,c+10,Print<int>(" "));
            std::cout << std::endl;

            std::transform(a,a+10,c,std::bind2nd(std::plus<int>(),10));
            std::for_each(c,c+10,Print<int>(" "));
            std::cout << std::endl;

    }

  if (false)    {
            int tab[10] = { 1, 2, 2, 3, 4, 4, 5, 6, 6, 7 };
            int* res = std::unique(tab, tab+10);

            std::cout << "Unique items ";
            std::for_each(tab,res,Print<int>(" "));
            std::cout << std::endl;

            // Binary predicate function version.
            int tab2[10] = { 1, 2, 20, 3, 4, 40, 5, 6, 60, 7 };
            res = std::unique(tab2, tab2+10, TheSame<int>());

            std::cout << "Unique items ";
            std::for_each(tab2,res,Print<int>(" "));
            std::cout << std::endl;

            int tab3[10] = { 1, 2, 20, 3, 4, 40, 5, 6, 60, 7 };
            res = std::unique(tab3, tab3+10);

            std::cout << "Unique items ";
            std::for_each(tab3,res,Print<int>(" "));
            std::cout << std::endl;

    }

  if (false)    {

            int tab[10];

            // initialize
            std::generate(tab,tab+10,Rand<int>());

            std::cout << "Unsorted sequence ";
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            std::sort(tab,tab+10,std::less<int>());

            std::cout << "Sorted ascending order sequence ";
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            // initialize
            std::generate(tab,tab+10,Rand<int>());

            std::cout << "Unsorted sequence ";
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            std::sort(tab,tab+10,std::greater<int>());

            std::cout << "Sorted descending order sequence ";
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            // customize the sort criteria
            std::vector<Employee*> v;
            v.push_back( new Employee("EEE", "Dept AAA", "Id100") );
            v.push_back( new Employee("CCC", "Dept BBB", "Id500") );
            v.push_back( new Employee("BBB", "Dept DDD", "Id300") );
            v.push_back( new Employee("FFF", "Dept CCC", "Id600") );
            v.push_back( new Employee("AAA", "Dept CCC", "Id200") );
            v.push_back( new Employee("DDD", "Dept AAA", "Id000") );

            std::cout << "Unsorted employees " << std::endl;
            std::for_each(v.begin(),v.end(),Print<Employee*>("\n"));
            std::cout << std::endl;

            // sort by name
            std::sort(v.begin(),v.end(),SortByName());

            std::cout << "Sorted employees by name " << std::endl;
            std::for_each(v.begin(),v.end(),Print<Employee*>("\n"));
            std::cout << std::endl;

            // sort by id
            std::sort(v.begin(),v.end(),SortById());

            std::cout << "Sorted employees by id " << std::endl;
            std::for_each(v.begin(),v.end(),Print<Employee*>("\n"));
            std::cout << std::endl;

            // sort by dept
            std::sort(v.begin(),v.end(),SortByDept());

            std::cout << "Sorted employees by dept " << std::endl;
            std::for_each(v.begin(),v.end(),Print<Employee*>("\n"));
            std::cout << std::endl;

            // sort by name, the by dept
            std::sort(v.begin(),v.end(),SortByName());
            std::stable_sort(v.begin(),v.end(),SortByDept());
            std::cout << "Sorted employees by name then stable sorted by dept " << std::endl;
            std::for_each(v.begin(),v.end(),Print<Employee*>("\n"));
            std::cout << std::endl;

            // initialize
            std::generate(tab,tab+10,Rand<int>());

            std::cout << "Unsorted sequence " << std::endl;
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            std::partial_sort(tab,tab+3,tab+10,std::greater<int>());

            std::cout << "Partially sorted (top 3) in descending order sequence " << std::endl;
            std::for_each(tab,tab+10,Print<int>(" "));
            std::cout << std::endl;

            double salaries[10] = { 22000.0, 28500.00, 17500.00, 22000.0, 54000.00,
                77500.00, 18400.00, 100000.00, 23000.0, 50000.0 };
            std::nth_element(salaries, salaries+2, salaries+10, std::less<double>());
            std::cout << "The 3rd top salary is " << salaries[2] << std::endl;
            std::cout << std::endl;

            }

  if (false)    {

            std::vector<int> keys;
            for (int i=0; i<100; i++)
                keys.push_back(i);
            std::sort(keys.begin(), keys.end(), std::less<int>());

            // is item 55 in the sequence?
            bool isThere = std::binary_search(keys.begin(), keys.end(), int(55));
            if (isThere)
                std::cout << "The key 55 is in the sequence" << std::endl;
            else
                std::cout << "The key 55 is not in the sequence" << std::endl;

            // is item 555 in the sequence?
            isThere = std::binary_search(keys.begin(), keys.end(), int(555));
            if (isThere)
                std::cout << "The key 555 is in the sequence" << std::endl;
            else
                std::cout << "The key 555 is not in the sequence" << std::endl;

            }

  if (false)    {

            std::list<float> ll;
            ll.push_front(70.0f);
            ll.push_front(60.0f);
            ll.push_front(50.0f);
            ll.push_front(30.0f);
            ll.push_front(20.0f);
            ll.push_front(10.0f);
            std::list<float>::iterator iter = 
                std::lower_bound(ll.begin(), ll.end(), 40.0f);
            ll.insert(iter, 40.0f);
            std::for_each(ll.begin(), ll.end(), Print<float>(" "));
            std::cout << std::endl;

            std::list<float> ll2;
            ll2.push_front(70.0f);
            ll2.push_front(60.0f);
            ll2.push_front(50.0f);
            ll2.push_front(30.0f);
            ll2.push_front(20.0f);
            ll2.push_front(10.0f);
            std::list<float>::iterator iter2 = 
                std::upper_bound(ll2.begin(), ll2.end(), 40.0f);
            ll2.insert(iter2, 40.0f);
            std::for_each(ll2.begin(), ll2.end(), Print<float>(" "));
            std::cout << std::endl;

            std::list<float> ll3;
            ll3.push_front(70.0f);
            ll3.push_front(60.0f);
            ll3.push_front(50.0f);
            ll3.push_front(30.0f);
            ll3.push_front(20.0f);
            ll3.push_front(10.0f);
            std::pair< std::list<float>::iterator, std::list<float>::iterator > res =
                std::equal_range(ll3.begin(), ll3.end(), 40.0f);
            std::cout << *res.first << " " << *res.second << std::endl;
            std::cout << std::endl;

            }

  if (false)    {
        int tab1[5] = { 10, 20, 30, 40, 50 };
        int tab2[5] = { 5, 15, 25, 35, 45 };
        int tab3[10];
        std::merge(tab1,tab1+5,tab2,tab2+5,tab3);
        std::cout << "The merged list ";
        std::for_each(tab3,tab3+10,Print<int>(" "));
        std::cout << std::endl;

        int tab4[10] = { 10, 20, 30, 40, 50, 5, 15, 25, 35, 45 };
        std::inplace_merge(tab4,tab4+5,tab4+10);
        std::cout << "The in-place merged list ";
        std::for_each(tab4,tab4+10,Print<int>(" "));
        std::cout << std::endl;

    }

  if (false)    {
        // The set algorithms allows set operations on sorted sequences.
        int tab1[5] = { 10, 20, 30, 40, 50 };
        int tab2[5] = { 10, 25, 30, 45, 50 };
        int tab3[10];

        // union
        int* p = std::set_union(tab1,tab1+5,tab2,tab2+5,tab3);
        std::cout << "Union ";
        std::for_each(tab3,p,Print<int>(" "));
        std::cout << std::endl;

        // intersection
        p = std::set_intersection(tab1,tab1+5,tab2,tab2+5,tab3);
        std::cout << "Intersection ";
        std::for_each(tab3,p,Print<int>(" "));
        std::cout << std::endl;

        // difference
        p = std::set_difference(tab1,tab1+5,tab2,tab2+5,tab3);
        std::cout << "Difference ";
        std::for_each(tab3,p,Print<int>(" "));
        std::cout << std::endl;

        // symmetric difference
        p = std::set_symmetric_difference(tab1,tab1+5,tab2,tab2+5,tab3);
        std::cout << "Symmetric difference ";
        std::for_each(tab3,p,Print<int>(" "));
        std::cout << std::endl;

        int tab4[3] = { 20, 30, 40 };
        bool res = std::includes(tab1,tab1+5,tab4,tab4+3);
        if (res)
            std::cout << "Located the sequence in tab4 within tab1" << std::endl;
        else
            std::cout << "The sequence in tab4 is not located within tab1" << std::endl;

    }

  if (true) {

        int tab[10] = { 2, 4, 6, 1, 3, 5, 8, 7, 9, 100 };
        int* p = std::min_element(tab,tab+10);
        std::cout << "Min value = " << *p << std::endl;

        p = std::max_element(tab,tab+10);
        std::cout << "Max value = " << *p << std::endl;

    }

    return 0;
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T05:07:30.113

您的帖子不包含问题。我假设您会问“此错误消息是什么意思？”

*该*问题的答案是：`std::ifstream`不可复制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-08T05:28:57.100

您的问题是您正在创建 File 对象的实例并将其传递给`std::generate`（大约第 405 行）。A`File`包含 的实例`std::ifstream`，函子按值传递`std::generate`，这意味着它接收原始对象的副本——但由于此对象包含`std::ifstream`无法复制的 a ，因此无法正常工作。

至于如何找到它：首先使用 an`#if 0`禁用所有`if (false)`部分，您会发现它编译并运行得很好。

从那里开始，使用二等分：通过`#if 0`向下移动到（围绕）那个巨大块的中间（并且就在其中一条`if (false)`线之前）来启用其中的一半。看看它是否仍然编译。如果是这样，将`#if 0`向下移动到该部分的大约 3/4^处。如果不是，则将其向上移动到该块的大约 1/4^处（并且每次，确保它就在 a 之前`if (false)`）。通过几次迭代，您可以将其缩小为一个``if (false)`块（在这种情况下，它只有 5 行长）。当它这么小时，只看问题代码可能是最容易的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T05:42:50.273

错误来自第 407 行。

```
std::generate(v.begin(),v.end(),File<std::string>("c:/temp/items.txt")); 
```

这源于创建 File 对象（在程序前面定义）。现在，如果我理解这一行的正确操作，那么您正在用罚款的每一行填充向量（因为 () 运算符不断地通过 getline() 函数从打开的文件中返回一行）。如果替换以下 if 块

```
if (false)    {

        std::vector<std::string> v(10);

        std::generate(v.begin(),v.end(),File<std::string>("c:/temp/items.txt"));
        std::for_each(v.begin(),v.end(),Print<std::string>("\n"));
        std::cout << std::endl;

} 
```

有了这个块

```
if (false)    {
        std::vector<std::string> v;
        std::ifstream fi("c:/temp/items.txt");
        std::string line;

        while (!fi.eof ()) {
            getline (fi, line);
            v.push_back (line);
        }
        fi.close();

        std::for_each(v.begin(),v.end(),Print<std::string>("\n"));
        std::cout << std::endl;
} 
```

当您将 if (false) 转换为 if (true) 时，您的程序应该按预期运行。

此外，您可能希望包含 cstring，因为您引用了 strcmp，它（至少对于 g++）需要 cstring 头文件。

# opengl - OpenGL VBO 存储和模板

> ID：11380750
> 
> 赞同：1
> 
> 时间：2012-07-08T04:57:46.787
> 
> 标签：opengl, vbo

我有一个关于 VBO 的问题。举个例子，我正在尝试构建一个体素风格的引擎，它甚至可以制作一个 16x16x16 的块。

我是否将地图信息存储在 VBO 中？如何获得立方体的顶点？我的想法是，VBO 需要 24 个 vector3 变量（每个位置的每个立方体的向量）。这似乎很多。

有没有办法拥有一个“立方体”VBO模板，然后以某种方式更改我要绘制的每个立方体的坐标，调用模板（我希望这是有道理的）并使用bufferdata为每个位置更新该模板，是吗？必须为 16x16x16 中的每个位置实际存储这 24 个向量，还是我只存储地图坐标，然后通过着色器绘制立方体和多边形？

我希望这是有道理的。加载每个位置存储 24 个向量的东西似乎很昂贵的内存，而且对我来说似乎是资源密集型的，每帧调用 bufferdata 16x16x16 次......所以使用顶点着色器的最后一个选项似乎是最可行的，但我是新手着色器所以这样的事情可能吗？

最常用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:31:03.587

实际上，几何着色器可以为单个输入图元发出多个图元。因此，从单个输入点绘制立方体的所有 6 个面当然是可能的。尽管对于“体素”引擎，点精灵可能会更好地为您服务，因为立方体的方向通常没有用。点精灵从输入点绘制单个屏幕对齐的四边形。除此之外，您还需要更具体地了解您在做什么。

# forms - 针对数组 Symfony2 验证选择字段

> ID：11380751
> 
> 赞同：2
> 
> 时间：2012-07-08T04:57:47.177
> 
> 标签：forms, symfony, validation

我正在 Symfony2 中构建一个表单类。在我的课堂上，我有一个选择领域。我构建了一个函数来返回我的选择数组：

```
public function getCardTypes()  {
    return array('visa' => 'Visa', 'mc' => 'MasterCard', 'amex' => 'American Express');
} 
```

后来，我用这个数组在我的表单中添加了一个选择字段：

```
$builder->add('PaymentCCType', 'choice', array('choices' => $this->getCardTypes())); 
```

然后在 getDefaultOptions 函数中，我对该字段有一个选择约束：

```
'PaymentCCType' => new Choice(array('choices' => $this->getCardTypes())), 
```

我似乎对这个验证器有问题。当我提交此表单时，我的选择框下方出现以下错误：“您选择的值不是有效的选择”。当然，我正在使用数组中的一种选择。

我究竟做错了什么？

/* 编辑 */

我注意到在我喜欢的 4 个字段中，我只得到其中 3 个的错误。选择月份的那个（简单的 1-12），验证有效。

/* 编辑 2 */

当数组键与值不匹配时，似乎会出现此问题。我将我的阵列切换到`array('Visa' => 'Visa', 'MasterCard' => 'MasterCard', 'American Express' => 'American Express')`现在它可以工作了。有没有办法解决？我觉得我不能是唯一一个有这个问题的人。即使您有一个常规（非关联）数组，它也会发生`array('Visa', 'MasterCard', 'American Express')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T13:14:12.137

恕我直言，您应该以不同的方式进行操作，使用带有方法的 ChoiceListInterface 创建类：

```
public function getChoices() 
{   
    return self::$choices;  
}

public static function getTypeChoicesKeys() 
{
    return array_keys(self::$choices);
} 
```

在表单类中：

```
$builder->add('type', 'choice', 
        array(
            'expanded' => true, 
            'multiple' => false,
            'choice_list' => new TypeChoices(),
            'required' => true,
        )
      ) 
```

在验证.yml

```
 type:
        - NotNull: ~
        - Choice: { callback: [TypeChoices, getTypeChoicesKeys] } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T17:46:42.727

*编辑* 针对我的问题，Symfony 团队指出选择验证器接受一个可能值的数组（不是像选择字段这样的可能选择）。最简单的方法是使用 array_keys 函数：

`'PaymentCCType' => new Choice(array('choices' => array_keys($this->getCardTypes()))),`

# security - Smalltalk 存在哪些安全包？

> ID：11380752
> 
> 赞同：3
> 
> 时间：2012-07-08T04:58:02.963
> 
> 标签：security, acl, smalltalk

我正在寻找任何 Smalltalk 方言的包，它可以让我为我的系统提供多种安全功能。例如：管理失败的登录、暴力攻击、用户/密码组织、ACL、检查点等。它可以基于角色或功能。如果您可以与图书馆分享您的经验，那么获得一些额外的见解会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T06:24:00.987

[Aida](http://www.aidaweb.si) Web 框架具有内置的安全框架，包括用户/组管理、访问权限、加密/非加密视图、加密密码、登录/失败登录管理、XSS 攻击等[。Scribo](http://www.aidaweb.si/scribo) CMS 然后在上面实现了 ACL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T07:33:05.540

我不知道这样的图书馆。

[Pier](http://www.piercms.com/)内容管理系统具有复杂的安全系统，对用户、组和权限进行建模。这在大多数 Pier 站点中用于对站点的某些部分进行细粒度的访问控制（例如，仅查看公共部分的访问者，可以编辑公共部分并查看一些内部内容的编辑，有权访问所有内容的管理员） .

Pier 也曾经有一个基于 ACL 的可插拔安全系统。它不再维护，但您可以利用那里的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-26T04:09:58.423

[Pharo](http://pharo.org/)中的[应用程序安全包](http://www.smalltalkhub.com/#!/~hernan/ApplicationSecurity)实现了[CheckPoint 安全模式](http://80738163270632.blogspot.com.ar/2014/10/application-security-2-checkpoint.html)，使用[Nacl 密码库（通过](http://nacl.cr.yp.to/)[libsodium 绑定](http://www.eighty-twenty.org/index.cgi/tech/smalltalk/nacl-for-squeak-and-pharo-20130601.html)的 SHA-512 ）、支持组和候选者的[用户模型](http://80738163270632.blogspot.com.ar/2014/03/application-security-presentation.html)、网络安全实用程序（如基于网络类的过滤）以及由推荐的[密码规则](http://80738163270632.blogspot.com.ar/2015/02/application-security-3-setting-your.html)FIPS。

SUnit 测试和链接的博客文章中提供了示例代码。

# c++ - 使用 QWebView 上的边框

> ID：11380754
> 
> 赞同：3
> 
> 时间：2012-07-08T04:58:46.933
> 
> 标签：c++, qt, border, qwebview

我正在尝试像使用`QWebView`一样更改边框，为此`QLineEdit`设置样式表：`QWebView`

```
QWebView
{
    border: 20px;
    border-radius: 5px;
} 
```

只是忽略了边界。我试过改变它的背景，它工作正常。

难道我做错了什么？或者有没有办法做到这一点？

它在那里。引用的代码和打印`QWebView`。

```
materialViewer = new QWebView(Study);
materialViewer->setObjectName(QString::fromUtf8("materialViewer"));
materialViewer->setGeometry(QRect(190, 10, 591, 531));
materialViewer->setContextMenuPolicy(Qt::NoContextMenu);
materialViewer->setUrl(QUrl("about:blank"));
materialViewer->setRenderHints( QPainter::Antialiasing |
                                QPainter::HighQualityAntialiasing | 
                                QPainter::NonCosmeticDefaultPen |
                                QPainter::SmoothPixmapTransform |
                                QPainter::TextAntialiasing ); 
```

链接：http: [//imageshack.us/f/684/semttulomym.png/](http://imageshack.us/f/684/semttulomym.png/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:09:25.727

它在那里。引用 QWebView 的代码和打印。

```
 materialViewer = new QWebView(Study);
    materialViewer->setObjectName(QString::fromUtf8("materialViewer"));
    materialViewer->setGeometry(QRect(190, 10, 591, 531));
    materialViewer->setContextMenuPolicy(Qt::NoContextMenu);
    materialViewer->setUrl(QUrl("about:blank"));
    materialViewer->setRenderHints(QPainter::Antialiasing|QPainter::HighQualityAntialiasing|QPainter::NonCosmeticDefaultPen|QPainter::SmoothPixmapTransform|QPainter::TextAntialiasing); 
```

链接：http: [//imageshack.us/f/684/semttulomym.png/](http://imageshack.us/f/684/semttulomym.png/)

# sql - SQL 服务器计数和求和查询？

> ID：11380758
> 
> 赞同：0
> 
> 时间：2012-07-08T04:59:59.503
> 
> 标签：sql, count, sum, common-table-expression

我有一个包含字段（QuestionID，QuestionMarks）的问题表，并且数据字段看起来像 -

```
 QuestionID   QuestionMarks
   1              1
   2              4
   5              1
   9              1
   12             2 
```

这意味着目前问题表有 5 个问题，共 9 个分数，现在我的问题是我想知道 4 个问题与 8 个分数的组合是可能的并取出该组合（通常是“x”问题的组合“y”标记是可能的）？

我正在考虑使用 CTE，但担心如果我有数万个问题会花费大量时间来执行查询。

请提出一些想法如何获取数据。我正在使用 SQL Server 2008 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:27:45.463

这是一个*开始*。它的性能会很差：

```
declare @Qs table (QuestionID int not null, QuestionMarks int not null)
insert into @Qs (QuestionID,QuestionMarks) values
(1,1), (2,4), (5,1), (9,1), (12,2)

declare @TargetMarks int = 8
declare @TargetCount int = 4

;with Build as (
    select QuestionID as MinID,QuestionID as MaxID,QuestionMarks as Total,1 as Cnt
        ,'/' + CONVERT(varchar(max),QuestionID) + '/' as QPath
    from @Qs
    union all
    select MinID,q.QuestionID,Total+q.QuestionMarks,Cnt+1,QPath + CONVERT(varchar(max),q.QuestionID) + '/'
    from
        Build b
            inner join
        @Qs q
            on
                b.MaxID < q.QuestionID and
                b.Total + q.QuestionMarks <= @TargetMarks and
                b.Cnt < @TargetCount
)
select * from Build where Cnt = @TargetCount and Total = @TargetMarks 
```

结果集：

```
MinID       MaxID      Total       Cnt         QPath
--------------------------------------------------------------------------------
2           12          8           4           /2/5/9/12/
1           12          8           4           /1/2/9/12/
1           12          8           4           /1/2/5/12/ 
```

棘手的部分是 QPath 值并不是存储 ID 值的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T07:40:47.063

我认为你是对的，数以万计的问题会减慢执行速度，所以我首先限制被查询的潜在行。您已经确定即使有数百万行，您也永远不需要超过四个具有相同问号的行，您可以进一步减少这一点，例如（抱歉不知道 SQL Server 是否接受此语法）

```
WITH LimitPotentialRows AS 
(SELECT m1.QuestionID, m1.QuestionMarks, 
 (SELECT SUM(m2.QuestionMarks)
  FROM MyTable m2
  WHERE m1.QuestionMarks = m2.QuestionMarks
    AND m1.PrimaryKeyID <= m2.PrimaryKeyID) CurrentMarks,
 (SELECT COUNT(*)
  FROM MyTable m3
  WHERE m1.QuestionMarks = m3.QuestionMarks
    AND m1.PrimaryKeyID <= m3.PrimaryKeyID) TotalQuestions
 FROM MyTable m1
 WHERE m1.QuestionMarks <= :DesiredTotalQuestionMarks - :TotalNoOfQuestions + 1
 HAVING CurrentMarks <= :DesiredTotalQuestionMarks
    AND TotalQuestions <= :TotalNoOfQuestions) 
```

求4题，总分8分，本次CTE成绩只剩下

```
QuestionMarks NumberOfQuestions
       1              4
       2              4
       3              2
       4              1
       5              1 
```

将行数从数万限制到最多 12 行，您在进一步计算中不太可能遇到性能问题。

# c# - 如何将字符串转换为 Unicode？

> ID：11380759
> 
> 赞同：0
> 
> 时间：2012-07-08T05:00:00.347
> 
> 标签：c#, encoding, character-encoding

> **可能重复：**
> [如何将 unicode 转义序列转换为 .NET 字符串中的 unicode 字符](https://stackoverflow.com/questions/183907/how-do-convert-unicode-escape-sequences-to-unicode-characters-in-a-net-string)

我有一个字符串

```
\u0110\u1eb7ng Minh Khi\u00eam 
```

它应该是Unicode：

```
Đặng Minh Khiêm 
```

如何在 C# 中将此字符串转换为 Unicode？这意味着转换

```
\u0110\u1eb7ng Minh Khi\u00eam =====> Đặng Minh Khiêm 
```

# haskell - Haskell 数据类型别名命名

> ID：11380761
> 
> 赞同：9
> 
> 时间：2012-07-08T05:00:08.207
> 
> 标签：haskell, types, naming-conventions, algebraic-data-types, type-alias

`Vector`我在 Haskell 中编写了一个数学模块。

所以我开始了：

```
data Vector a = Vector !a !a !a deriving (Eq, Show) 
```

很好——这让我可以使用任何我想要的数字数据类型。问题是我不想到处写作`Double`，`Vector Double`原因很简单，我不应该这样做。所以我补充说：

```
type Scalar = Double
type Vector = Vector Scalar 
```

但是当然第二行是错误的，因为现在有两个`Vector`. 那我应该把它改成什么？我对自己想，不，我将在我的代码中编写这个，所以我想将类型别名简单地保留为`Vector`. 这意味着我必须更改数据类型名称。但是如果我改变它，那么我觉得我也应该改变构造函数，这会让一切变得更加混乱。但是，如果以这种方式使构造函数与类型别名具有相同的名称，感觉很尴尬。

现在我有这个：

```
type Scalar = Double
type Vector = VectorT Scalar

data VectorT a = Vector !a !a !a deriving (Eq, Show) 
```

我`T`是任意选择的（我猜它代表“类型”），但我对此不太确定。通常，当我记录函数时，我会说`-- Calculate the magnitude of a Vector`，但`VectorT`我觉得我真的应该使用*那个*类型名称。所以我只把它们称为`vectors`（不大写）——除非我觉得我必须将此约定应用于每种数据类型的每个注释。

有没有人遇到过类似的情况？在这种情况下，谁能想到更优雅的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T09:56:37.217

解决您的特定问题的一种方法是将数据类型与类型同义词放在不同的模块中。也就是说，有一个`Math.Vector`包含数据声明和一些通用函数（即适用于所有数字类型的函数）的模块。然后，当您实际`Vector Double`在代码中大量使用时，只需使用合格的导入创建类型同义词：

```
import qualified Math.Vector as MV

type Scalar = Double
type Vector = MV.Vector Scalar 
```

我认为从代码组织的角度来看这是有道理的。特别是，如果您已将`Vector`类型定义为适用于所有数字类型，我希望该模块中的函数也适用于所有数字类型。`Vector Double`您在代码的其他部分使用了很多的事实不应该影响`Vector`实际定义的模块。毕竟，想象`Vector Int`在程序的另一部分使用很多是完全合理的。

顺便说一句，我不确定称之为`Vector`最好的主意。向量不一定必须具有三个维度，因此我将您的数据类型称为`Vector3D`. 这实际上是其他一些 API（如 Java 3D API）中使用的名称，因此它可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:09:18.420

有什么特别的理由不只是做

```
data Vector = Vector !Double !Double !Double deriving (Eq, Show) 
```

这对我来说似乎是最简单的想法......

# c# - 如何将表示 1...n 部分的元素序列转换为对/元组序列？

> ID：11380764
> 
> 赞同：-1
> 
> 时间：2012-07-08T05:00:34.460
> 
> 标签：c#, .net, linq

我有一些 LINQ 代码可以从符合特定命名约定的 PDF 中提取书签（使用 Aspose.Pdf）：

```
IOrderedEnumerable<Bookmark> magicBookmarks = (
    from    bookmark in allBookmarks.AsEnumerable()
    where   bookmark.Title.StartsWith(MAGIC_PHRASE) 
    // ...  other criteria
    orderby bookmark.PageNumber ascending
    select  bookmark
); 
```

该类`Bookmark`有一个名为的属性`PageNumber`，用于获取书签开始的页码。在我的情况下，书签可以代表 1...n 页的一部分。

我想做的是将此序列转换为另一个序列`Tuple<int, int>`（或一些可比较的“对”结构），其中每对的 Item1 等于`PageNumber`源序列中相应元素的值，Item2 等于源序列中的*下一个*元素减 1（为了本练习，假设源序列中的所有书签在从中提取它们的文档中连续出现）。

简而言之，我希望最终结果是一系列对，代表每个带书签的 PDF 部分的开始页和结束页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:31:19.513

您可以`Enumerable.Zip`通过压缩枚举来使用它，只需跳过第一个元素：

```
var results = magicBookmarks.Zip(magicBookmarks.Skip(1), 
                                 (a, b) => new 
                                           { 
                                             PageNumber = a.PageNumber, 
                                             PageNumberNext = b.PageNumber - 1 
                                           });

foreach (var item in results)
{
    Console.WriteLine("Page: {0}, Next: {1}", item.PageNumber, item.PageNumberNext);
} 
```

# objective-c - 在 iOS 中从文本文件创建对象的最有效方法

> ID：11380767
> 
> 赞同：0
> 
> 时间：2012-07-08T05:00:53.533
> 
> 标签：objective-c, ios, xml, core-data, spreadsheet

什么是存储文本文件的便捷方式，以便在 iOS 中轻松地从它们创建对象？

例如：

*   电子表格 -> XML -> NSObject 子类（这个问题是 Google Docs Spreadsheets 只能导出到 OpenDocument Spreadsheets XML 文件，解析起来很不方便）
*   csv -> NSObject 子类（csv 太容易出错）

要存储的样本数据：

*   姓名 - 号码 - 电子邮件
*   爱丽丝 - 012345 - Alice@Alice.com
*   鲍勃 - 78910 - Bob@Bob.com

要创建的示例类：

```
@interface Person : NSObject
{
    NSString *name;
    NSString *number;
    NSString *email;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:23:29.223

在 iOS 中执行此操作的首选（且简单）方法是属性列表 (plist) 文件。这是[Apple 的 plist 入门文档](https://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048i)

它们本质上是 iOS 的 JSON，实际上你可以通过 NSJSONSerialization 类方法轻松地在两者之间进行转换。

这种技术与 Apple 做事的方式是一致的（这在 Apple 开发社区中是一个胜利），并且不需要外部库。此外，如果您决定在未来扩展应用程序，则在所有地方都内置了用于将 plist 写回的支持。

但是，应该提到的是，要从文件中获取实际的自定义对象（即自定义类的实例），您需要探索稍微复杂一点的[对象归档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)世界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:22:57.000

假设您只有纯文本数据，我会这样做：

1.  将电子表格导出为 CSV。
2.  使用 CSV 模块在 python 中读取 CSV。
3.  使用 minidom 模块转换为您喜欢的 XML。
4.  阅读 Obj C 中的 XML。我为此使用了 SMXML (https://github.com/nfarina/xmldocument/)。不是很快但很方便。

这个过程也可以使用 AppleScript 自动化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:50:16.817

如果你想要一个非常优雅的解决方案并且你可以使用你想要的任何类型的文件，使用 plist 并使用 NSCoding 协议中的 initWithCoder: 和 encodeWithCoder: 方法将你的类/实例转换为属性列表对象成为可能。

# windows - 从 google chrome userdir (>=20) 恢复会话 cookie

> ID：11380768
> 
> 赞同：3
> 
> 时间：2012-07-08T05:00:58.190
> 
> 标签：windows, google-chrome, cookies, session-cookies

Chrome 20（或 chrome 19）中有一个功能（或错误 - 请参阅[Chrome 不删除会话 cookie](https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies)问题 - 可能是[问题 128513](http://code.google.com/p/chromium/issues/detail?id=128513)）。有一个选项“当我关闭浏览器时清除 cookie 和其他网站和插件数据” - 禁用；和“继续我离开的地方” - 启用。使用此类设置，即使在关闭浏览器后，Chrome 也会保存会话 cookie（在浏览器关闭时标记为删除）。甚至 https（安全）cookie 也会被保存。

（我仔细检查了 Chrome 是否已关闭，并且这里没有任何正在运行的 Chrome）

所以，问题：

Chrome 如何在 UserDir 中保存此类仅限会话的 cookie（在所有用户设置的目录中，就像 firefox 的配置文件一样）？假设 chrome 已关闭，我们可以完全访问 UserDir 和注册表。

cookie 存储在哪里？它们是 SQLite 还是其他磁盘格式？它们是否加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T03:35:40.527

嗯，Chrome的UserDir中似乎有“Cookies”文件：

`Documents and Settings\USERNAME\Local Settings\Application Data\Google\Chrome\User Data\Default`

`Users\USERNAME\AppData\Local\Google\Chrome\User Data\Default`

该文件位于 SQLite 数据库中（可以通过许多工具打开，例如 sqlitebrowser.org/）。有表“cookies”（2015 年 4 月，M42 稳定版）：

```
INTEGER creation_utc
TEXT host_key
TEXT name
TEXT value
TEXT path
INTEGER expires_utc
INTEGER secure
INTEGER httponly
INTEGER last_access_utc
INTEGER has_expires
INTEGER persistent
INTEGER priority
BLOB encrypted_value 
```

许多最近 cookie 的“值”文本字段为空；cookie 值存储在`encrypted_value`BLOB 中（我认为，前段时间曾切换到 cookie 的加密存储 -[于 2014 年 2 月](https://codereview.chromium.org/24734007)提交，[问题 313323](https://code.google.com/p/chromium/issues/detail?id=313323) - 较旧的 cookie 存储未加密，甚至是安全的）。会话 cookie 也在文件中。

为 (MAC) OS X 和 Windows 启用了加密：

> 在选定的操作系统上加密所有存储的 cookie。
> 
> 作为保护私人用户信息目标的一部分，这会使用特定于用户的加密 API 对操作系统上的 cookie 值进行加密，并且不会以其他方式保护这些数据。
> 
> 性能测试表明，在 Mac 上每个 cookie 的损失约为 1 毫秒（无论大小），在 Windows 下为 0.1 毫秒到 0.7 毫秒（取决于大小）。这在旧硬件上会更高，但仍然微不足道。
> 
> 加密数据是二进制的（在 Windows 上具有 128 字节的开销）并且二进制数据必须存储在 BLOB 中，因此只有两个字段（“value”或“encrypted_value”）中的一个具有数据，而另一个为空。但是，在访问 cookie 时需要读取和写入这两个值，因为它们被标记为“非空”）。

溢出时有几种解密工具： * 对于 Windows：[Chrome 中的加密 cookie](https://stackoverflow.com/questions/22532870/encrypted-cookies-in-chrome) * 对于 Linux 和 OS X：[在 Python 中解密 Chrome Linux BLOB 加密的 cookie](https://stackoverflow.com/questions/22973049/decrypt-chrome-linux-blob-encrypted-cookies-in-python)；[解密 Chromium cookie](https://stackoverflow.com/questions/23153159/decrypting-chrome-iums-cookies)

还有一个“当前会话”文件，当 Chrome 使用 0x534e5353 0x01 (SNSS\0x01) 魔法运行时受到保护。有关格式的一些信息在这里：[https](https://github.com/JRBANCEL/Chromagnon/wiki/Reverse-Engineering-SNSS-Format) ://github.com/JRBANCEL/Chromagnon/wiki/Reverse-Engineering-SNSS-Format （来源 - chrome/browser/sessions/session_command.h）

# matlab - 将 WEKA 模型导入 MATLAB

> ID：11380769
> 
> 赞同：5
> 
> 时间：2012-07-08T05:01:04.327
> 
> 标签：matlab, model, weka, bayesian-networks

有谁知道如何在 MATLAB 中重用 WEKA 模型？我最近在 WEKA 中创建了贝叶斯网络模型，我想在 MATLAB 中导入该模型，以便可以在 MATLAB 中重新创建贝叶斯网络。

请有人帮忙！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T12:10:48.827

您可以通过导入 weka.jar 在 MATLAB 中使用 Weka。这是一个小的 .m 文件脚本，展示了如何在 MATLAB 中使用 Weka 的 BayesNet，由[Muhammad Shoaib Sehgal](http://www.mathworks.com/matlabcentral/fileexchange/19260-using-weka-in-matlab/content/WekaInMatlab.m)编写。

```
% Note: You can either set WEKA_HOME as an environment variable or pass
% absolute path of weka.jar to javaaddpath. For example,
% javaaddpath('c:\weka\bin\weka.jar');

javaaddpath('WEKA_HOME/weka.jar');

clear all
clc

import weka.classifiers.Classifier
import weka.classifiers.bayes.BayesNet
import weka.classifiers.Evaluation;

% calling classifier from matlab
v1 = java.lang.String('-t');
%v2 = java.lang.String('D:\Shoaib\BioMANTA\bioManta code\classification\loc_nlboost\bn\loc_trDt.csv');
v2 = java.lang.String('WEKA_HOME\trainData.arff');

v3 = java.lang.String('-T');
v4 = java.lang.String('WEKA_HOME\testDATA.arff');

prm = cat(1,v1,v2,v3,v4);

Evaluation.evaluateModel(javaObject('weka.classifiers.bayes.BayesNet'),prm); 
```

# windows-services - NLog Logger.Trace 永远挂起

> ID：11380770
> 
> 赞同：3
> 
> 时间：2012-07-08T05:01:20.030
> 
> 标签：windows-services, nlog

我有一个在我的用户名下运行的 Windows 服务应用程序（通过 installutil 安装）。

这是我的开始/停止事件重载：

```
protected override void OnStart(string[] args)
{
    try
    {
        Debugger.Launch();
    }
    catch (Exception ex)
    {
        logger.Fatal("...");
        throw;
    }
}

protected override void OnStop()
{
    logger.Trace("service stopped.");
} 
```

`logger`是一个 NLog Logger 实例，获取方式如下：

```
private static Logger logger = LogManager.GetCurrentClassLogger(); 
```

这是我的`NLog.config`：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true">

    <!-- 
  See http://nlog-project.org/wiki/Configuration_file 
  for information on customizing logging rules and outputs.
   -->
    <targets>
        <target xsi:type="Debugger" name="debugger_target" />
        <target xsi:type="Chainsaw" name="chainsaw_target" address="udp4://localhost:4141"/>
        <!--
        <target xsi:type="File" name="f" fileName="${basedir}/logs/${shortdate}.log"
            layout="${longdate} ${uppercase:${level}} ${message}" />
        -->
    </targets>

    <rules>
        <logger name="*" minlevel="Trace" writeTo="chainsaw_target"/>
    </rules>
</nlog> 
```

服务启动得很好，调试器按预期连接，如果我从那里继续，服务完成启动。

如果我然后停止服务，`OnStop`命中断点，但是当我尝试继续 logger.Trace 调用时，它会无限期挂起并且对服务容器没有响应。

到底是怎么回事？有时日志记录有效，有时无效，现在似乎日志记录导致整个服务无法正常运行。有人有想法么？

# c# - 什么算法可以将文本分解为其组成词？

> ID：11380771
> 
> 赞同：0
> 
> 时间：2012-07-08T05:02:02.403
> 
> 标签：c#, wpf, algorithm, pdf, text-parsing

我惊喜地发现使用 iTextSharp 从 pdf 文件中提取文本是多么容易。通过阅读[这篇文章](http://www.codeproject.com/Articles/14170/Extract-Text-from-PDF-in-C-100-NET)，我可以使用以下简单代码将 pdf 文件转换为文本：

```
string pdfFilename = dlg.FileName;
// Show just the file name, without the path
string pdfFileNameOnly = System.IO.Path.GetFileName(pdfFilename);
lblFunnyMammalsFile.Content = pdfFileNameOnly;
string textFilename = String.Format(@"C:\Scrooge\McDuckbilledPlatypus\{0}.txt", pdfFileNameOnly);

PDFParser pdfParser = new PDFParser();
if (!pdfParser.ExtractText(pdfFilename, textFilename))
{
    MessageBox.Show("there was a boo-boo");
} 
```

问题是生成的文本文件包含这样的文本（即它没有空格）：

```
IwaspleasantlysurprisedtofindhoweasyitistouseiTextSharptoextractthetextfromatextfile. 
```

是否有一种“外面”的算法可以采用这样的文本并对单词中断（AKA“空格”）应该去哪里做出最好的猜测？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T07:33:03.757

虽然我同意 Gavin 的观点，在这种情况下有一种简单的方法可以解决这个问题，但问题本身是一个有趣的问题。

这将需要一个启发式算法来解决。我将稍微解释一下我为什么这么认为。但首先，我将解释我的算法。

将所有字典单词存储在[Trie](http://en.wikipedia.org/wiki/Trie)中。现在取一个句子，然后在 trie 中查找一个单词。trie 跟踪单词的结尾。一旦你找到一个单词，在你的句子中添加一个空格。这将适用于您的句子。但是考虑这两个例子：

*   *他给了我这本书*
*   *他给我讲了一个比喻*

对于第一个示例，上述算法运行良好，但对于第二个示例，算法输出：

*他告诉我一个**标准***

为了避免这种情况，我们需要考虑最长匹配，但如果我们这样做，那么第一个示例的输出将变为：

*他给遇见了他的书*。

所以我们被卡住了，因此在算法中添加了启发式算法，以便能够从语法上判断*他给了他的书*没有意义。

# html - 用图像替换按钮

> ID：11380776
> 
> 赞同：4
> 
> 时间：2012-07-08T05:03:34.040
> 
> 标签：html, css

我已经成功地用图像替换了按钮。但似乎图像被放置在按钮的顶部。我不希望将我的 CSS 放入我的 CSS 中，因为有其他样式与它重叠，并且我不希望有任何重定向页面。

```
<button type="reset"><img src="images/cancel.png" width="15"></button> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T05:12:58.817

在 CSS 中执行此操作！

```
button {
  background-image: url(images/cancel.png);
  background-repeat: no-repeat;
  background-position: 50% 50%;
  /* put the height and width of your image here */
  height: 50px;
  width: 200px;
  border: none;
}

button span {
  display: none;
} 
```

那么你的按钮是：

```
<button type="reset" title="In some browsers, this appears as a tooltip"> 
    <span>Cancel</span></button> 
```

您还可以添加说明符来覆盖默认按钮行为 - 例如`-webkit-appearance: none;`，但我相信这足以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-04T11:55:34.633

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script>
        function change(thi) {
            debugger;
            thi.setAttribute("src", "guitar.jpg");
            thi.innerHTML = "";
            thi.outerHTML = thi.outerHTML.replace(/button/g, "img");
        }
    </script>
</head>
<body>
    <button onclick="change(this)">OUR BUTTON</button>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T05:16:32.850

为什么需要按钮？

您可以尝试删除按钮标签并尝试以下任一方法：

```
<img src="images/cancel.png" width="15" onClick="document.form1.reset();"> 
```

或者

```
<a href="#" onClick="document.form1.reset();"><img src="images/cancel.png" width="15"></a> 
```

只需将“form1”替换为您的表单名称即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T05:37:48.307

```
<button type="reset" width="15" style="background-image: url('images/cancel.png');"/> 
```

# python - 如何在 Flask 中为每个请求创建 pymongo 连接

> ID：11380777
> 
> 赞同：9
> 
> 时间：2012-07-08T05:03:38.383
> 
> 标签：python, connection, flask, pymongo

在我的 Flask 应用程序中，我希望直接使用 pymongo。但我不确定为每个请求创建 pymongo 连接以及如何回收连接资源的最佳方法是什么。

我知道 pymongo 中的 Connection 是线程安全的并且具有内置池。我想我需要创建一个全局 Connection 实例，并使用 before_request 将其放入烧瓶 g。

在 app.py 中：

```
from pymongo import Connection
from admin.views import admin
connection = Connection()
db = connection['test']

@app.before_request
def before_request():
    g.db = db

@app.teardown_request
def teardown_request(exception):
    if hasattr(g, 'db'):
        # FIX
        pass 
```

在 admin/views.py 中：

```
from flask import g
@admin.route('/')
def index():
    # do something with g.db 
```

它确实有效。所以问题是：

1.  这是在烧瓶中使用 Connection 的最佳方式吗？

2.  我是否需要在 teardown_request 中明确回收资源以及如何做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T19:22:11.880

我仍然认为这是一个有趣的问题，但为什么没有回应......所以这是我的更新。

对于第一个问题，我认为在 Flask 中使用 current_app 更清晰。

在 app.py 中

```
app = Flask(__name__)
connection = Connection()
db = connection['test']
app.db = db 
```

在视图.py

```
from Flask import current_app
db = current_app.db
# do anything with db 
```

通过使用 current_app，您可以使用应用程序工厂创建多个应用程序，如[http://flask.pocoo.org/docs/patterns/appfactories/](http://flask.pocoo.org/docs/patterns/appfactories/)

对于第二个问题，我还在想办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-21T07:15:00.950

这是使用 flask-pymnongo 扩展的示例：

例子：

app.config 中的 mongodb uri（直到数据库名称），如下所示

```
app.config['MONGO_URI'] = 'mongodb://192.168.1.1:27017/your_db_name'
mongo = PyMongo(app, config_prefix='MONGO') 
```

然后在您需要 db 的 api 方法下执行以下操作：

```
db = mongo.db 
```

现在您可以处理此数据库连接并获取数据：

```
users_count = db.users.count() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T02:42:50.743

I think what you present is ok. Flask is almost too flexible in how you can organize things, not always presenting one obvious and right way. You might make use of the [flask-pymongo extension](http://flask-pymongo.readthedocs.org/en/latest/index.html) which adds a couple of small conveniences. To my knowledge, you don't have to do anything with the connection on request teardown.

# asp.net-mvc - TD中表格的良好格式

> ID：11380778
> 
> 赞同：0
> 
> 时间：2012-07-08T05:04:11.543
> 
> 标签：asp.net-mvc, asp.net-mvc-3, css, razor

我有一个表格，每一行都需要 Ajax 表单，所以这是新的实现：

```
<tbody id="AllPhones">
@foreach(var item in Model.Phones) {
<tr class="gradeA odd" id="TR@(item.Id)">
    @{Html.RenderPartial("_PhoneRow", item);}
</tr>
} 
```

`_PhoneRow`局部视图：

```
@model MyModel
<td class="TableIncluded" colspan="4">
@using(Ajax.BeginForm("EditPhone","Phone", new { id = Model.Id }, new AjaxOptions {
UpdateTargetId = "TR" + Model.Id, 
OnComplete = "CompleteEditPhone"
})) {
<table class="Internal">
    <thead></thead>
    <tbody>
        <tr>
            <td>@Html.DisplayFor(modelItem => Model.PhoneNumber)</td>
            <td>@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
            <td>@if(Model.IsDefault) {<span class="BoolRadio True">Default</span>} else { <span></span>}</td>
            <td><input type="submit" value="Edit" class="CallEditPhone" id = "Edit@(Model.Id)" /></td>
        </tr>
    </tbody>
</table>
}
</td> 
```

如您所见，我必须将表单放入其中，`<td>`实际上第一个实现是：

```
 <td>@Html.DisplayFor(modelItem => Model.PhoneNumber)</td>
            <td>@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
            <td>@if(Model.IsDefault) {<span class="BoolRadio True">Default</span>} else { <span></span>}</td>
            <td><input type="submit" value="Edit" class="CallEditPhone" id = "Edit@(Model.Id)" /></td> 
```

但是现在所有这些都`<td>`包含在新表中，`<td>`因此表中的新实现元素有些混乱，我尝试用一​​些 css 修复它：

```
td.TableIncluded, td.TableIncluded table, td.TableIncluded form {
font-size: inherit;
margin: inherit;
height: inherit;
padding: inherit;
}
td.TableIncluded {
width: 100%;
} 
```

但是还是有一些横向障碍，这是第一次实现没有表里面`<td>`：

![在此处输入图像描述](../Images/4735c5105a1d3bbe2f93aefda02f4f79.png)

这是第二个里面有桌子`<td>`

![在此处输入图像描述](../Images/b671e467852cb85f4d1f4759340d108c.png)

那么你有什么建议像第一个一样修复第二个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:16:13.120

最简单的修复方法是给四个元素中的三个`<td>`元素一个固定的宽度。由于表格是 100% 宽，第四个单元格将占据剩余的可用宽度。

```
<table class="Internal">
    <thead></thead>
    <tbody>
        <tr>
            <td>@Html.DisplayFor(modelItem => Model.PhoneNumber)</td>
            <td class="phonekind">@Html.DisplayFor(modelItem => Model.PhoneKind)</td>
            <td class="phonedefault">@if(Model.IsDefault) {<span class="BoolRadio True">Default</span>} else { <span></span>}</td>
            <td class="phoneedit"><input type="submit" value="Edit" class="CallEditPhone" id = "Edit@(Model.Id)" /></td>
        </tr>
    </tbody>
</table>

table.Internal { width: 100%; }
table.Internal td.phonekind { width: 90px; }
table.Internal td.phonedefault{ width: 90px; }
table.Internal td.phoneedit{ width: 90px; } 
```

如果这不能正常工作，您可以将四个`<td>`元素与外部表格的标题单元格相同。

# wordpress - 在 wordpress 中提交未注册用户的帖子

> ID：11380779
> 
> 赞同：0
> 
> 时间：2012-07-08T05:04:20.957
> 
> 标签：wordpress

我是wordpress的新手。是否可以允许未注册用户提交帖子并将其放入队列中以得到站点管理员的确认以及何时显示在站点上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:10:37.397

重力形式有这个能力。喜欢这个插件，而且效果很好..

重力表格可在此处获得：http: [//www.gravityforms.com/](http://www.gravityforms.com/)

我相信您可以使用个人许可证做您想做的事；但是，开发者许可证有最好的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T11:05:48.260

插件“用户提交的帖子”是一种廉价而愉快的方式来做到这一点：

[http://wordpress.org/plugins/user-submitted-posts/](http://wordpress.org/plugins/user-submitted-posts/)

我使用了这个插件的修改版本，它工作得很好。

# ruby-on-rails - 使用方括号访问 Json

> ID：11380782
> 
> 赞同：1
> 
> 时间：2012-07-08T05:05:13.780
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, json

在 Rails 中，我如何访问这个 json 的各个元素？我使用 ruby​​ 的 .to_json 方法对其进行了解析。`json = CSV.parse(csv).to_json`. 这是返回的内容：

```
[
[
    "id", 
    "subject"
], 
[
    "1", 
    "Economics"
], 
[
    "2", 
    "General Paper"
], 
[
    "3", 
    "History"
], 
[
    "4", 
    "Geography"
], 
[
    "5", 
    "Mathematics"
], 
[
    "6", 
    "Chemistry"
], 
[
    "7", 
    "Biology"
], 
[
    "8", 
    "Physics"
] 
```

]

试图访问`json[0][1]`或`json[0]`返回`"["`

我觉得它与方括号有关，但我确信有一种方法可以访问它（对我来说，它看起来像数组中的数组，这种访问方式应该可以工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:34:53.767

当您将数据转换为 JSON 时，它会变成 JSON 字符串。如果您将其作为数组访问，您只会获得引用的字符项。

如果您只想访问数据，请删除 to_json 位。CSV 解析应该为您返回数组数组，您可以按照自己的方式访问它。

# database - 一个开源的杂货数据库

> ID：11380786
> 
> 赞同：3
> 
> 时间：2012-07-08T05:07:22.183
> 
> 标签：database, mobile, open-source

我正在为零售商开发产品，并且正在寻找一个现成的杂货 SKU 数据库以用于测试目的。这可以在任何地方使用吗？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:34:24.033

这有点长镜头，但如果你去[http://publicdata.eu/](http://publicdata.eu/)并选择“农业”组，你可以通过数据格式限制结果（在“资源格式”下的右侧）我知道这并不理想，但他们通常有 XLS 和类似的电子表格类型格式，其中包含有关欧洲农业的数据。我不确定这是否包括 SKU，但这可能是一个不错的起点？

# c# - 嵌入应用程序资源

> ID：11380791
> 
> 赞同：0
> 
> 时间：2012-07-08T05:07:46.677
> 
> 标签：c#, winforms, installation, embed, move

我有一个 C# Forms 应用程序，

如果我想在嵌入资源文件的其他计算机上使用 bin 中的 (debug).exe 而不必制作安装程序，我该怎么做？（我如何嵌入资源文件）

另外我如何在.exe中添加嵌入资源文件的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:25:51.050

在解决方案资源管理器中选择文件，然后在属性窗口中，将构建操作更改为嵌入式资源。您更改代码以使用如下代码获取嵌入式资源：

```
 try
     {
         _assembly = Assembly.GetExecutingAssembly();
         _imageStream = _assembly.GetManifestResourceStream("MyNamespace.MyImage.bmp");
         _textStreamReader = new StreamReader(_assembly.GetManifestResourceStream("MyNamespace.MyTextFile.txt"));
     }
     catch
     {
         MessageBox.Show("Error accessing resources!");
     } 
```

这段代码来自[这里](http://support.microsoft.com/kb/319292)

# jquery - jQuery OpenID：.submit 不是函数

> ID：11380793
> 
> 赞同：0
> 
> 时间：2012-07-08T05:08:47.973
> 
> 标签：jquery

我正在为我的网站使用 Open-Id 选择器 jQuery 插件。虽然，我已经正确设置了图像，但它似乎不起作用。我单击图像，我得到`$("#openid_form").submit`的不是功能。

我做了`console.log($("#openid_form"))+Firebug`并且`.submit`不是列表中的函数，[它的 submit.php](http://i.imgur.com/Vtmpl.png)。我检查了很多次，但 submit.php 没有写在任何地方。我似乎无法追踪此错误的原因。

**更新**：表单的“视图选择源”显示以下生成的 HTML：

```
<form action="/kohana/signup" method="post" id="openid_form" accept-charset="utf-8">        ....
     <div id="openid_btns"><div id="openid_highlight">
     <a title="Log in with Google" href="javascript:openid.signin('google');" style="background: url(&quot;/kohana/media/images/openid-providers-en.png&quot;) repeat scroll 0px 0px rgb(255, 255, 255);" class="google openid_large_btn"></a></div>.......</a>
     </div>
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:50:45.643

问题的根源在于 jQuery 的过时版本。`1.2.6`我使用的是与插件捆绑在一起的过时版本。

# java - 用数组搜索字符串数组

> ID：11380795
> 
> 赞同：0
> 
> 时间：2012-07-08T05:09:04.823
> 
> 标签：java, arrays, loops, counter

我正在尝试使用嵌套循环使用另一个用户输入的搜索词数组来搜索用户输入的文本数组，然后输出搜索词以及它们在文本中出现的次数以及总文本的百分比。我*认为*我走在正确的轨道上，我的问题是每次 if 语句为真时计数器都不会重置。我对编程很陌生——所以我可能完全错了。下面是整个程序。如果有人可以看看并帮我弄清楚我的问题是什么，我将永远感激不尽。

```
public class termFrequency {
    public static void main(String[] args) {

        String searchTextPeriod, searchTextComma, searchTextApostrophe, searchTextColon, searchTextExclamation, 
        searchTextQuestion, searchText, searchTerm;
        int counter=0, total, searchIndex=0, termIndex=0;
        double percentage=0.0;
        String [] searchArray, termArray;

        searchText = JOptionPane.showInputDialog("Enter a sentence that is at least 20 words long");

        //removes some common punctuation from the searchable text
        searchTextPeriod = searchText.replace(".", "");
        searchTextComma = searchTextPeriod.replace(",", "");
        searchTextApostrophe = searchTextComma.replace("'", " ");
        searchTextColon = searchTextApostrophe.replace(":", " ");
        searchTextExclamation = searchTextColon.replace("!", "");
        searchTextQuestion = searchTextExclamation.replace("?", "");

        searchArray = searchTextQuestion.split(" "); //splits the sentence and and puts it into an array

        total=searchArray.length;
        System.out.println("There are " +total +" words in your sentence");

        searchTerm = JOptionPane.showInputDialog("Enter your search terms here seperated by a space");
        termArray = searchTerm.split(" ");
        DecimalFormat two = new DecimalFormat("#0.00");

        boolean found = false;
        for (termIndex=0; termIndex<termArray.length; termIndex++) 
        {
            for (searchIndex=0; searchIndex<searchArray.length; searchIndex++) 

                if (termArray[termIndex].equalsIgnoreCase(searchArray[searchIndex]))
                {
                    counter++; 
                    found = true;

                    percentage= ((double) counter/(double)total) * 100;
                }
                if (found) 
                    System.out.println("Search word " + "\'" + termArray[termIndex] + "\' is found " +counter +" times. That is "+ two.format(percentage)+"% of the statement." );
                else  
                    System.out.println("Search word " + "\'" + termArray[termIndex] + "\' is not found in the statement.");

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:16:45.380

在第一个循环内移动 found = false。这样，每次迭代都会将其重置为 false。现在，如果它曾经被更改为 true，那么它在整个过程的其余部分都保持真实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T09:47:58.170

您必须将“found”上的 if/else 从内部循环移动到第一个循环的末尾。您还需要在第一个循环中重置布尔值和计数器，就像您使用初始值开始分析 termArray 中的每个新单词一样。

```
 for (termIndex=0; termIndex<termArray.length; termIndex++) 
    {
        counter=0; //Reset the counter for each word in termArray
        found=false; //Reset the "found" flag for each word in termArray
        for (searchIndex=0; searchIndex<searchArray.length; searchIndex++) 

            if (termArray[termIndex].equalsIgnoreCase(searchArray[searchIndex]))
            {
                counter++;
                percentage= ((double) counter/(double)total) * 100;

                found=true
                System.out.println("Search word " + "\'" + termArray[termIndex] + "\' is found " +counter +" times. That is "+ two.format(percentage)+"% of the statement." );
            }
        }
        if (found) 
                System.out.println("Search word " + "\'" + termArray[termIndex] + "\' is found " +counter +" times. That is "+ two.format(percentage)+"% of the statement." );
        else  
                System.out.println("Search word " + "\'" + termArray[termIndex] + "\' is not found in the statement.");

    } 
```

顺便说一句，您现在并不需要“找到”变量，如果`counter == 0`您知道该词尚未在`searchArray`.

# jquery - JQuery 绑定上下文

> ID：11380796
> 
> 赞同：0
> 
> 时间：2012-07-08T05:09:35.160
> 
> 标签：jquery, binding

我有这样的代码：

```
 for (var i = 0; i < interactions.length; i++) {
            action = interactions[i].split(':');

            if (events.indexOf(action[0]) >= 0) {
                $(this).bind(action[0], function (e) {
                    if (action.length == 2) {
                        model[action[1]]();
                    }
                    else if (action.length == 3) {
                        var args = action[2].split('|');
                        model[action[1]].apply(null, args);
                    }
                });
            }
        } 
```

变量“events”只是一个带有事件名称的字符串，如“click，dblclick”等......问题是当我进入事件时，“action”变量正在失去上下文。这似乎是一个类似于闭包的构造，其中“动作”应该保留在上下文中，但事实并非如此。在此示例中，我有两个交互，如下所示：

1）点击：保存

2）禁用：SomeCustomFunction

所以，当我执行一个点击事件时，我希望 action[1] 是“保存”，但它实际上是“禁用”的。所以，就像上次设置的一样，这就是我得到的。

任何想法如何保持上下文？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:22:46.743

到事件处理程序运行时（单击或实际发生的任何事情）`action`将等于`for`循环的最后一次迭代中的任何事情。如果`action`是在每次迭代时调用的函数中的局部变量，*那么*您将获得所需的闭包构造。

由于您已经在使用 jQuery，因此最简单的更改是使用`$.each()`而不是普通`for`循环，因此将每次迭代的处理放入其自己的闭包中`action`：

```
 $.each(interactions, function(i, item) {
        var action = item.split(':');

        if (events.indexOf(action[0]) >= 0) {
            $(this).bind(action[0], function (e) {
                if (action.length == 2) {
                    model[action[1]]();
                }
                else if (action.length == 3) {
                    var args = action[2].split('|');
                    model[action[1]].apply(null, args);
                }
            });
        }
    }); 
```

# php - 3个php数组按日期合并显示

> ID：11380802
> 
> 赞同：0
> 
> 时间：2012-07-08T05:10:12.497
> 
> 标签：php, arrays, date, merge

如果我有多个从不同来源（如 Facebook 提要、推特提要和博客提要）提取的数据数组/对象，我将如何合并它们以便将它们显示为按日期排序的混合集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:15:27.127

我会遍历每个数组并将各种时间格式转换为通用格式，可能是这样的 unix 时间戳

```
strtotime($time); 
```

然后将其用作数组的键：

```
foreach ($fb_arrays as $fb_array) {
  $key = strtotime($fb_array['time']);
  $fb_array_by_time[$key] = $fb_array;
} 
```

然后我会

```
array_merge($array_one_by_time, $array_two_by_time, $array_three_by_time); 
```

然后我会

`asort()`或`rasort()`根据您要排序的方向

**编辑：**

为避免碰撞，您可以这样做

```
foreach ($events as $event) {
  $key = strtotime($event['time']);
  $key .= $network;
  $n = 0;
  while (isset($event_by_time[$key . $n])) { $n++; }
  $event_by_time[$key . $n] = $event;
} 
```

那么键应该是这样的：

```
123134223facebook0
123134223twitter0
123134225facebook0
123134225facebook1 
```

排序后`asort()`

# perl - 在perl中将原始十六进制转换为可读的十六进制？

> ID：11380805
> 
> 赞同：2
> 
> 时间：2012-07-08T05:11:11.797
> 
> 标签：perl, serial-port, hex

我写了一个小 perl 应用程序来读取串行端口。当我运行我的小脚本时，我收到了数据，但它是用不可读的符号写的。它显示为 *I??。但是，如果我这样做

```
perl test.pl | hexdump 
```

我得到所需的数据。十六进制数据对我来说很有意义。有谁知道我如何在不使用 hexdump 的情况下使用 perl 获得此输出？现在我使用 print ($data) 来打印我的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:58:54.950

“原始十六进制”没有任何意义。你得到的是你想要转换为文本表示的一串字节。为此，您可以使用[unpack](http://perldoc.perl.org/functions/unpack.html)。例如，

```
my $bytes = read_from_serial_port();
my $hex = unpack 'h*', $bytes; 
```

如果您想要相反的字节序，请使用`H`而不是。`h`（我总是忘记哪个是哪个。）

# .net - Twitter OAuth 对 url 进行不同的编码

> ID：11380808
> 
> 赞同：0
> 
> 时间：2012-07-08T05:12:04.663
> 
> 标签：.net, twitter

我正在从 .NET 调用状态更新，当我发布一条没有空格或特殊字符的推文时，它可以发布，但是当有其他特殊字符时，我得到一个不同的 OAuth 签名基本字符串，Twitter Oauth 工具显示这个*状态 = Hello world*：

```
status%3DHello%2520world 
```

虽然 .NET Uri.EscapeDataString(post_body) 显示：

```
status%3DHello%20world 
```

这会导致 401 未经授权，因为 OAuth 签名不同。

我该如何解决这个问题？（实际上，Twitter 对空间的编码似乎没有任何标准）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-19T04:21:49.423

Twitter 遵循规范.. 取决于编码端点的位置。

1.  URL 对键和值进行编码。你和推特都做对了。你会看到的：
2.  按键比值排序。通过“=”连接每个键和值，并通过“&”将其连接到其他键和值。因为没有'&'，所以这什么都不做。我猜这里是因为我没有使用过这个推特工具。
3.  对整个字符串进行编码。

    “状态=hello%20world”->“状态%3Dhello%2520world”

# c# - 当我在 C# 中创建一个类时，我可以在构造函数中创建一个对象吗

> ID：11380810
> 
> 赞同：2
> 
> 时间：2012-07-08T05:12:29.897
> 
> 标签：c#

我有这堂课：

```
public class ContentViewModel
{
    public Content Content { get; set; }
    public bool UseRowKey { 
        get {
            return Content.PartitionKey.Substring(2, 2) == "05" ||
               Content.PartitionKey.Substring(2, 2) == "06";
        }
    }
    public string TempRowKey { get; set; }

} 
```

我现在正在这样做：

```
 var vm = new ContentViewModel();
        vm.Content = new Content(pk);
        vm.Content.PartitionKey = pk;
        vm.Content.Created = DateTime.Now; 
```

有什么方法可以改变我的 ContentViewModel 以便我不需要执行最后三个语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:19:12.067

为什么不将参数传递给您的构造函数？

```
public class ContentViewModel
{
    public ContentViewModel(SomeType pk)
    {
        Content = new Content(pk); //use pk in the Content constructor to set other params
    }  
    public Content Content { get; set; }
    public bool UseRowKey { 
        get {
            return Content.PartitionKey.Substring(2, 2) == "05" ||
               Content.PartitionKey.Substring(2, 2) == "06";
        }
    }
    public string TempRowKey { get; set; }
} 
```

一般来说，请考虑 OOP 和得[墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)：如果不需要，不要访问嵌套属性，并告诉对象做*什么*而不是*如何*做（让对象自己决定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:22:56.853

可能`object initializer`有用：

```
var vm = new ContentViewModel {Content = new Content {PartitionKey = pk, Created = DateTime.Now}}; 
```

都在一条线上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T05:18:44.227

是的，像这样：

```
public class ContentViewModel 
{ 
    public ContentViewModel(Content c) 
    {
        if (c == null) throw new ArgumentNullException("Cannot create Content VM with null content.");
        this.Content = c;
    }
    public ContentViewModel(object pk) : this(Guid.NewGuid()) {}
    public ContentViewModel(object pk)
    {
        this.Content = new Content(pk); 
        this.Content.PartitionKey = pk; 
        this.Content.Created = DateTime.Now; 
    }

    public Content Content { get; set; } 
    public bool UseRowKey {  
        get { 
            return Content.PartitionKey.Substring(2, 2) == "05" || 
               Content.PartitionKey.Substring(2, 2) == "06"; 
        } 
    } 
    public string TempRowKey { get; set; } 

} 
```

# ios - iPhone 的第二个 iOS 应用程序

> ID：11380811
> 
> 赞同：0
> 
> 时间：2012-07-08T05:12:45.833
> 
> 标签：ios, xcode

我按照 iOS 开发人员库中的“您的第二个 iOS 应用程序”教程中的步骤进行了编译并在 iPhone 模拟器中运行。该应用程序允许我添加新的鸟类，但不允许我从鸟类观测场景导航到鸟类观测详细信息屏幕。关于需要做什么的任何想法。我查看了这些步骤，但无法快速识别问题。感谢您的帮助和调试步骤。（顺便说一句，我正在学习在 Xcode IDE 中调试）。教程的链接是 [http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/GettingStarted/GettingStarted.html#//apple_ref/doc/uid/TP40011318-CH2-SW3](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/GettingStarted/GettingStarted.html#//apple_ref/doc/uid/TP40011318-CH2-SW3)

谢谢

```
//  BirdsAppDelegate.h  
#import <UIKit/UIKit.h>
@interface BirdsAppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@end

//  BirdsAppDelegate.m
#import "BirdsAppDelegate.h"
#import "BirdSightingDataController.h"
#import "BirdsMasterViewController.h"

@implementation BirdsAppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    BirdsMasterViewController *firstViewController = (BirdsMasterViewController *)[[navigationController viewControllers] objectAtIndex:0];

    BirdSightingDataController *aDataController = [[BirdSightingDataController alloc] init];
    firstViewController.dataController = aDataController;
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end

//  BirdsMasterViewController.h
#import <UIKit/UIKit.h>
@class BirdSightingDataController;
@interface BirdsMasterViewController : UITableViewController
@property (strong, nonatomic) BirdSightingDataController *dataController;

@end

//  BirdsMasterViewController.m
#import "BirdsMasterViewController.h"
#import "BirdSightingDataController.h"
#import "BirdSighting.h"
#import "BirdsDetailViewController.h"
#import "AddSightingViewController.h"
@interface BirdsMasterViewController () <AddSightingViewControllerDelegate>
@end

@implementation BirdsMasterViewController
@synthesize dataController = _dataController;

- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)addSightingViewControllerDidCancel:(AddSightingViewController *)controller {
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)addSightingViewControllerDidFinish:(AddSightingViewController *)controller name:(NSString *)name location:(NSString *)location {
    if ([name length] || [location length]) {
        [self.dataController addBirdSightingWithName:name location:location];
        [[self tableView] reloadData];
    }
    [self dismissModalViewControllerAnimated:YES];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.dataController countOfList];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"BirdSightingCell";

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:sightingAtIndex.name];
    [[cell detailTextLabel] setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"ShowSightingDetails"]) {
        BirdsDetailViewController *detailViewController = [segue destinationViewController];

        detailViewController.sighting = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];
    }else if ([[segue identifier] isEqualToString:@"ShowAddSightingView"]) {
        AddSightingViewController *addController = (AddSightingViewController *)[[[segue destinationViewController] viewControllers] objectAtIndex:0];
        addController.delegate = self;
    }
}
@end

//  BirdsDetailViewController.h
#import <UIKit/UIKit.h>
@class BirdSighting;

@interface BirdsDetailViewController : UITableViewController

@property (strong, nonatomic) BirdSighting *sighting;
@property (weak, nonatomic) IBOutlet UILabel *birdNameLabel;
@property (weak, nonatomic) IBOutlet UILabel *locationLabel;
@property (weak, nonatomic) IBOutlet UILabel *dateLabel;

@end

//  BirdsDetailViewController.m
#import "BirdsDetailViewController.h"
#import "BirdSighting.h"

@interface BirdsDetailViewController ()
- (void)configureView;
@end

@implementation BirdsDetailViewController

@synthesize sighting = _sighting, birdNameLabel = _birdNameLabel, locationLabel = _locationLabel, dateLabel = _dateLabel;

#pragma mark - Managing the detail item
- (void)setSighting:(BirdSighting *) newSighting
{
    if (_sighting != newSighting) {
        _sighting = newSighting;

        // Update the view.
        [self configureView];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.
    // Update the user interface for the detail item.
    BirdSighting *theSighting = self.sighting;

    static NSDateFormatter *formatter = nil;
    if (formatter == nil) {
        formatter = [[NSDateFormatter alloc] init];
        [formatter setDateStyle:NSDateFormatterMediumStyle];
    }
    if (theSighting) {
        self.birdNameLabel.text = theSighting.name;
        self.locationLabel.text = theSighting.location;
        self.dateLabel.text = [formatter stringFromDate:(NSDate *)theSighting.date];
    }   
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
}

- (void)viewDidUnload
{
    self.sighting = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:54:29.427

我也遇到了同样的问题，我找到的解决方案如下：

1.  确保您将 ( `control+drag`) 从`TableViewCell`(NOT `MasterViewController`) 生成到`BirdsDetailViewController`.
    *参考：教程：[Design the Detail Scene](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CustomizingDetailView/CustomizingDetailView.html)中的“从主场景中的表格单元格控制拖动到细节场景” 。*
2.  确保您的`master view`课程设置为`BirdsMasterViewController`, NOT default `UITableViewController`，并且`detail view`课程设置为`BirdsDetailViewController`, NOT default `UITableViewController`。
    *您可以在选择主/详细视图后在身份检查器中检查它们。*
3.  确保您的`Table View Cell`标识符与`BirdSightingCell`.

有关更多详细信息，请参阅[此链接](http://www.crifan.com/can_not_go_into_birdsdetailviewcontroller_detail_view_after_click_table_view_cell)。

# java - Java 是否有类似于 Cocoa 的 NSUserDefaults 的东西？

> ID：11380812
> 
> 赞同：4
> 
> 时间：2012-07-08T05:12:47.237
> 
> 标签：java, persistence

Mac OS X 和 iOS 有一个不错的小类，叫做`NSUserDefaults`. 它是一个单例，可让您存储字符串、数组和原语，并且您始终可以实现一些方法来向其中添加自定义对象。当您需要存储快速设置而不处理文件操作（例如，存储最后选择的字体名称）时，它非常有用。

Java有这样简单的东西吗？我希望能够存储用户的最后设置以在程序重新加载时重新加载类似的状态，但我不确定在 Java 中最好的方法是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T02:34:16.730

是的，您可以使用[java.util.prefs](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/prefs/package-summary.html) [API](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)。[如何在 Java 中保存首选项用户设置？](https://stackoverflow.com/questions/4017137/how-do-i-save-preference-user-settings-in-java)在 java 应用程序中[保存用户设置的最佳方法是什么？](https://stackoverflow.com/questions/3784657/what-is-the-best-way-to-save-user-settings-in-java-application)有一些有用的信息。为了让你开始：

```
[[NSUserDefaults standardUserDefaults] setString:@"some string" forKey:@"some_key"]; 
```

变成

```
Preferences prefs = Preferences.userNodeForPackage(this);
prefs.put("some_key", "some string"); 
```

和

```
[[NSUserDefaults standardUserDefaults] stringForKey:@"some_key"]; 
```

变成

```
Preferences prefs = Preferences.userNodeForPackage(this);
prefs.get("some_key"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-08T06:14:25.483

不，最接近的是属性文件系统。您可以拥有一个属性文件（这是一个键值文件）。通常，它们需要位于您正在运行的 java 程序的类路径中。您还可以在文件系统中的任何位置（如已知的好地方）创建属性文件（或 xml 文件）。NSUserDefaults 使用存储在主目录库中某处的 p-list 之类的东西，使用标准命名目录路径。您必须在 Java 中提出自己的标准。

# php - HTML 表单按钮值未在 Safari 和 Chrome 中发布

> ID：11380816
> 
> 赞同：16
> 
> 时间：2012-07-08T05:13:11.617
> 
> 标签：php, jquery, html, forms, post

单击按钮时，我正在使用 jQuery 提交表单。然后我想测试按钮的值，但是，这不会在 Safari 和 Chrome 中提交。为什么？有解决办法吗？

在 IE/FF 中测试下面的代码看它是否有效，然后在 Safari/Chrome 中测试它是否无效：

**ButtonPostTest.php：**

```
<?php
    if(isset($_POST['testBtn'])) {
        echo $_POST['testBtn'];
    }
?>
<html>
    <head>
    <title></title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#btn').click(function() {
                    $('form').submit();  // submit the form
                });
            });
        </script>
    </head>
    <body>
        <form action="" method="post">          
            <button id="btn" class="page-btn" type="submit" name="testBtn" value="Yes Button value is posted!">POST IT!</button>
        </form>
    </body>
</html> 
```

**更新：**

同样的事情发生在`input`：

```
<input id="btn" class="page-btn" type="submit" name="testBtn" value="Post this"></input> 
```

此外，这只是使用 jQuery 提交时的一个问题`.submit()`- 没有这个，它可以通过按钮或输入很好地提交。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-31T16:01:29.163

给它一个名字。

```
<button type='submit' id='trash' name='trash' value="trash" class='red'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T06:15:14.463

我想你已经发现了一个 webkit 错误。

我在 Chrome 中进行了同样的测试，您的表单：

```
<form action="" method="post">          
   <button id="btn" class="page-btn" type="submit" name="testBtn" value="Yes Button value is posted!">POST IT!</button>
</form> 
```

这不发送任何数据。但是，如果我添加另一个元素，特别是输入：

```
<form action="" method="post">          
   <input type="hidden" name="shim" value="" />
   <button id="testBtn" class="page-btn" type="submit" name="testBtn" value="Yes Button value is posted!">POST IT!</button>
</form> 
```

这会发送两个值。这没有 JavaScript。一旦你添加了 shim 隐藏表单元素，它看起来就变得有意义了。

此解决方案需要更多测试，但它可能会满足您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T03:06:28.747

正如罗伯特上面所说，在使用`<button>`标签时，您需要两者`name=""`和`value=""`，例如

```
<button name="Search" value="Simple" type="submit">Search</button> 
```

VS

```
<button name="Search" value="Advanced" type="submit">Search</button> 
```

在此示例中，您的 POST 数据将具有以下***键值****对*：

***搜索**简单*

或者

***高级**搜索*****

 **然后基于该 POST 值，您可以编写代码以采取适当的措施。:)

**即您不需要使用输入，只需使用带有名称/值的按钮就可以了。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-21T14:08:35.213

这可能是非常明显的，现在我自己修复了它，我意识到这是一个愚蠢的错误。但对我来说，我错误地离开了`type="submit"`。表单始终有效，但只是从这些按钮中发布了一个值。

**未传递值（错误）：**

```
<button name="step" id="btn1" value="my_value">btn_text</button> 
```

**价值通过（好）：**

```
<button type="submit" name="step" id="btn1" value="my_value">btn_text</button> 
```

无论如何，我希望这对刚开始的新人有所帮助，或者坚持一些看起来如此明显的事情。

干杯!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-04T01:52:56.260

所以，我有一件非常相似的事情发生在我身上。一切正常，除了 Chrome [版本 78.0.3904.108 (Official Build) (64-bit)]。

当我取出 <button> 中的 id= 时，它起作用了！但这不是问题所在。问题原来是我在 <button> 标签中的 onclick= 处禁用了 [Submit] 按钮（使用按钮 id=）。执行此操作时，Chrome 似乎不会发布任何内容。哪个有点无意义？而且很奇怪？我不知道为什么？

所以我花了很多时间挖掘，发现你可以在 <form> 中的 onsubmit= 处禁用 [Submit] 按钮。事实上，onsubmit= 与 onclick= 几乎相同，所以在未来我认为我需要改变一些东西，以便我始终使用 onsubmit=，然后所有大型浏览器都将继续为我工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-08T05:32:08.503

同意 Vins，我可能会使用`<input>`.

`<button>`您使用而不是有特殊原因`<input>`吗？我通常更喜欢`<button>`（允许我添加图标和图像），但我相信浏览器之间在如何解释值方面存在差异......

根据~~[w3schools](http://www.w3schools.com/tags/att_button_value.asp)~~ [Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/HTML/Element/button#Notes)的说法，一些浏览器会提交 value 属性，而其他浏览器如 IE7 会错误地提交标签之间的文本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-05T02:32:26.267

尝试像这样通过捕获隐藏的输入来发送按钮作为提交。

PHP：

```
<?php
    if(isset($_POST['btname']))
        echo $_POST['btname'];
    }
 ?> 
```

和html：

```
<form method="POST" action="" id="formname" name="formname">
<input name="btname" id="btname" type="hidden" />
<button onclick="document.formname.submit()" value="Submit">Send</button>
</form> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-08T05:20:10.610

`<button>`并且`<input>`是两个不同的标签。如果要提交按钮值，请使用`<input>`标签。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-27T17:33:24.973

How many values are you POSTing?

I'm not sure it sounds like your problem was solved. One thing that has not been mentioned is that **you may have overshot your php max_input_vars limit.**

Php is silent when you overshoot this limit, so you'll have to check the warning log, or check it this way:

1. Count the POST array values. Scripting in `var_dump($_POST);` (in a safe production sandbox environment) will do this best, as you can look at the final value output to see where the POST array "cuts off".

2. Next, run a script to output the php information using the function: `phpinfo()`. Check the value of "max_input_vars".

3. If the POST array count == the "max_input_vars" value, then you have overshot the limit.

In your case, it may be the case that the submit input would have been included later in the POST.

To edit the value (to 5000 in this example) in php.ini, add or edit this line: `max_input_vars = 5000`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-05T16:49:20.897

### 提交/单击事件期间禁用的按钮不会提交其值

根据 Alan Stewart 的说法，当我编写一个小实用程序来防止双击一个表单提交按钮时，我遇到了这个问题，该按钮监听了“提交”并禁用了该按钮。

我更改了我的代码，因此它确定表单是否已经提交，如果是，则禁用按钮并阻止表单通过`event.preventDefault()`.

它不像以前那么好立即禁用提供即时视觉反馈的按钮（因为 Bootstrap 具有禁用按钮的样式）。**

# php - PHP Mongo: 注意: Mongo::__construct(): 解析服务器

> ID：11380822
> 
> 赞同：6
> 
> 时间：2012-07-08T05:15:42.647
> 
> 标签：php, doctrine, mongodb-php, doctrine-odm

我想知道为什么我会收到以下 php 通知：

```
( ! ) Notice: Mongo::__construct(): parsing servers in C:\htdocs\multishop\library\Lupi\Resource\Odm.php on line 38
Call Stack
#   Time    Memory  Function    Location
1   0.0004  138504  {main}( )   ..\index.php:0
2   0.0130  667392  Zend_Application->bootstrap( )  ..\index.php:25
3   0.0130  667488  Zend_Application_Bootstrap_BootstrapAbstract->bootstrap( )  ..\Application.php:355
4   0.0130  667504  Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap( ) ..\BootstrapAbstract.php:586
5   0.0442  2068704 Zend_Application_Bootstrap_BootstrapAbstract->_executeResource( )   ..\BootstrapAbstract.php:626
6   0.0442  2068832 Lupi_Resource_Odm->init( )  ..\BootstrapAbstract.php:683
7   0.0596  2778880 Mongo->__construct( )   ..\Odm.php:38 
```

第 38 行：

```
 $dm = DocumentManager::create(new \Doctrine\MongoDB\Connection(new \Mongo), $config); 
```

该通知有时会出现，而不是一直出现。我正在使用学说 mongo ODM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T04:14:00.273

驱动程序正在发出此消息（请参阅：[parse.c](https://github.com/mongodb/mongo-php-driver/blob/v1.2/util/parse.c#L127)或[log-1.phpt](https://github.com/mongodb/mongo-php-driver/blob/v1.2/tests/standalone/log-1.phpt)单元测试）。此行为仅由`MongoLog`类控制（没有[ini 选项](http://php.net/manual/en/mongo.configuration.php)），默认情况下禁用日志记录，因此您肯定会知道您是否正在激活它。我的猜测是，一些与 CodeIgniter 相关的库是罪魁祸首（这是我能找出的唯一常见线程）。

您可以查看[MongoLog 文档](http://www.php.net/manual/en/class.mongolog.php)以获取更多信息，但以下内容应完全禁用所有级别和模块的日志记录：

```
\MongoLog::setLevel(\MongoLog::NONE)
\MongoLog::setModule(\MongoLog::NONE) 
```

# compilation - How to let make only compile but not link

> ID：11380830
> 
> 赞同：1
> 
> 时间：2012-07-08T05:16:49.667
> 
> 标签：compilation, linker, makefile

I'm using clang, llvm to compile MySQL and do some analysis. But the link stage is very time consuming(+5min) and I actually do not need the final executable. Only interested in several object files, which are successfully generated before the linking.

What I tried is to export LD AR to /bin/true but it then cannot compile saying no rule to make target xx.a. In general, is there a way to modify the makefile(from automake) only *compile* but not link?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T09:08:22.637

Put my workaround here in case someone is having similar need.

What I did is to export LD to /bin/true so that the last link stage can quickly pass which essentially do nothing but return successfully.

Sometimes, the build system may not honor this ENV variable. In that case, temporarily change `which ld' to a script calling /bin/true(make sure keep the original ld and change it back afterwards!) or use alias ld=/bin/true (haven't tried this method though).

# ocaml - OCaml 中的尾调用转换

> ID：11380832
> 
> 赞同：6
> 
> 时间：2012-07-08T05:17:54.773
> 
> 标签：ocaml, tail-recursion, tail-call-optimization

我在课堂上被告知，以下函数不是尾递归，因为布尔运算符在递归调用之后被评估：

```
let rec exists p = function
    [] -> false
  | a::l -> p a || exists p l 
```

但这并没有把堆栈炸到千万大小的列表上，更重要的是，它是标准库中的实现。如果它不是尾递归，就没有理由使用这种形式来代替看似等效且明显的尾递归

```
let rec exists p = function
    [] -> false
  | a::l -> if p a then true else exists p l 
```

所以看起来 OCaml 编译器能够在像这样的简单情况下优化布尔运算以利用尾递归。但我注意到，如果我像这样切换操作数的顺序

```
let rec exists p = function
    [] -> false
  | a::l -> exists p l || p a 
```

那么堆栈确实在 10m 个元素上被炸毁。所以看起来 OCaml 只有在递归调用出现在右侧时才能利用这一点，这让我怀疑编译器所做的只是用等效`if`表达式替换布尔运算。有人可以证实或反驳这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T07:07:59.093

告诉你这件事的人是错误的。

实际上，`||`并不是马上翻译成 if/then/else，而是通过编译器的中间语言保留了一点，以便轻松实现两种不同的转换：

1.  正如你所说，`a || b`在表达位置被翻译成`if a then true else b`
2.  但是`a || b`在测试位置，也就是说，`if a || b then c else d`被不同地翻译成类似的东西`if a then goto c else if b then goto c else d`，当`goto c`是跳转到计算的时候`c`（只是翻译成`if a then c else if b then c`会重复的代码`c`）。这种优化更加神秘，用户无需了解它即可推断其程序的性能。

您可以在编译器的源代码中亲自查看。原`||`语表示为`Psequor`，感兴趣的文件是[asmcomp/cmmgen.ml](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/asmcomp/cmmgen.ml?revision=12498&view=markup)用于原生编译（[(1)](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/asmcomp/cmmgen.ml?revision=12498&view=markup#l1191)，[(2)](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/asmcomp/cmmgen.ml?revision=12498&view=markup#l1032) ]），以及[bytecomp/bytegen.ml](http://caml.inria.fr/cgi-bin/viewvc.cgi/ocaml/trunk/bytecomp/bytegen.ml?revision=12498&view=markup#l552)用于字节码编译（两个方面同时处理，通过生成使用结果的字节码的指令）。

一个小点：您似乎说 OCaml 能够优化尾部调用“在右侧”，因为这种情况“足够简单”，但不能“在左侧”，因为编译器不够聪明。如果调用出现在左边，就*不是*尾调用，所以一定不要优化。这不是一个“简单”的尾随呼叫与否的问题。

最后，如果您想检查尾部是否是尾调用，您可以使用 OCaml 工具：使用该`-annot`选项编译将生成一个注释文件`foo.annot`（如果您的源是`foo.ml`），其中包含有关程序表达式类型的信息和，对于函数调用，关于它们是否是尾调用。`caml-mode`例如，在 Emacs 中，指向 之后的命令将`M-x caml-types-show-call`确认`exists`我`||`这是一个“尾调用”，而当调用`p x`它时返回“堆栈调用”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-08T06:33:08.063

如果有人写道：

```
let rec add_result p = function
  [] -> 0
| a::l -> p a + add_result p l 
```

这不会是尾递归，因为在递归调用之后，函数必须添加两个结果。

But`||`不是普通运算符，`A || B`严格等价于`if A then true else B`，所以当你写

```
let rec exists p = function
  [] -> false
| a::l -> p a || exists p l 
```

它与

```
let rec exists p = function
  [] -> false
| a::l -> if p a then true else exists p l 
```

并且函数是尾递归的。

```
let rec exists p = function
  [] -> false
| a::l -> exists p l || p a 
```

相当于

```
let rec exists p = function
  [] -> false
| a::l -> if exist p l then true else p a 
```

这不是尾递归。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-08T07:17:46.693

雷米的回答是完全正确的。请注意，某些类型系统与 OCaml 不同的语言会自动将某些非布尔值强制转换为布尔值。这些语言可以选择使用 (||) 之类的运算符：要么不尝试将 rhs 的结果强制转换为布尔值，而是返回给定的任何内容，或者进行强制转换，但在 rhs 之后你还有一些工作要做被评估，所以你放弃了 (||) 的尾递归。你不能两者兼得。也许您的线人是按照这些思路思考的，这就是为什么他们错误地说他们对 OCaml 做了什么。鉴于 OCaml 对类型的严格处理，您不能`true || succ 5`一开始就这么说。

# sql - 在 SQL Server 中计算日期和今天之间的天数？

> ID：11380836
> 
> 赞同：2
> 
> 时间：2012-07-08T05:18:13.817
> 
> 标签：sql, sql-server, datetime, count, days

我想计算一个日期的天数。

例如，我们有`@date='03/16/2012'`. 我想知道到目前为止的天数。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T05:21:27.307

```
datediff(day, @date, getdate()) 
```

[日期差异](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

# opencv - 分割和合并分割

> ID：11380838
> 
> 赞同：2
> 
> 时间：2012-07-08T05:19:11.370
> 
> 标签：opencv, computer-vision, image-segmentation

除了以下包（难以定制）之外，有谁知道拆分和合并分段的任何实现？ [http://userpages.uni-koblenz.de/~lb/lb_downloads/](http://userpages.uni-koblenz.de/~lb/lb_downloads/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:40:26.490

找出我[之前的答案](https://stackoverflow.com/a/14730467/433685)！我用opencv在c++中做了一个简单的实现。它不是超级优化的，但它似乎有效。我遵循[冈萨雷斯的数字图像处理](https://rads.stackoverflow.com/amzn/click/com/0201180758)书中描述的程序。

# javascript - Extjs：销毁并重新打开模态窗口

> ID：11380842
> 
> 赞同：1
> 
> 时间：2012-07-08T05:19:51.787
> 
> 标签：javascript, extjs, window, modal-dialog

我的页面标题上有一个首选项链接，它打开一个模式窗口（它用于修改用户首选项，如名称或密码）。

在取消按钮上，我关闭了这个窗口，但是当我试图重新打开它时，我遇到了这个 JS 错误：

```
el.addCls.apply(el, arguments); 
```

我是使用关闭此窗口的好方法还是问题出在其他地方？

这是我的代码：

```
// My window definition
Ext.define('jnotes.window.UserPreferences', {
    extend: 'Ext.window.Window',
    layout: 'fit',
    modal: true,
    renderTo: Ext.getBody(),
    title: "<s:text name='user.preferences' />",
    items: new Ext.form.Panel({
        bodyPadding: 5,
        waitMsgTarget: true,
        method: 'POST',

        fieldDefaults: {
            labelAlign: 'right',
            labelWidth: 85,
            msgTarget: 'side'
        },
        defaultType: 'textfield',
        items: [{
            ... // my fields
        }],
        buttons: [{
            text: "<s:text name='action.save'/>",
            handler: function() {
                this.up('form').fireEvent('validate');
            },
        }, {
            text: "<s:text name='action.cancel'/>",
            handler: function() {
                this.up('form').fireEvent('cancel');
            }
        }]
    })
});

var preferencesWindow = null;

// Open my window
function displayPreferences() {
    preferencesWindow = Ext.create('jnotes.window.UserPreferences');
    var form = preferencesWindow.down('form');
    form.addListener('validate', this.saveUser, this);
    form.addListener('cancel', function() {
        preferencesWindow.close();
        preferencesWindow = null;
    }, this);
    form.load({
        ... // Loading data
    });
    preferencesWindow.show();
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T10:40:03.057

您定义类的方式是创建表单并在类的所有实例之间共享。当您第一次销毁窗口时，表单也会随之销毁，这就是它的结束。

相反，您应该： a) 指定表单配置对象：

```
items: {
    xtype: 'form',
    // ....
} 
```

b) 在 initComponent 方法中指定表单，使其绑定到该实例：

```
Ext.define('MyFoo', {
    initComponent: function(){
        this.items = new Ext.form.Panel(...);
        this.callParent();
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-18T10:06:07.150

另一个可能解决您的问题的解决方案是在窗口配置中指定 closeAction：

```
closeAction: 'hide' 
```

更多来自 Extjs Docs 关于 closeAction 的内容：

> 单击关闭标题工具时要执行的操作：

可能的值：

> ```
> 'destroy' : remove the window from the DOM and destroy it and all descendant Components. The window will not be available to be redisplayed via the show method. 
> ```

```
'hide' : hide the window by setting visibility to hidden and applying negative offsets. The window will be available to be redisplayed via the show method. 
```

默认情况下，关闭操作值为销毁。

# iphone - HTTPS 基本身份验证

> ID：11380843
> 
> 赞同：0
> 
> 时间：2012-07-08T05:20:05.457
> 
> 标签：iphone, objective-c, basic-authentication

我尝试使用用户名和密码对用户进行身份验证但在该方法中，即使我输入了错误的用户名或密码`didReceiveAuthenticationChallenge`，它也不会进入。`else`这是我的代码：

```
- (IBAction)clickOK:(id)sender {

if ([[usernameField text] length] < 1 || [[passwordField text] length] < 1) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Login" message:@"Neither the username nor password may be empty!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    return;
}
NSURL *myURL = [NSURL URLWithString:@"https://www.freelancer.com/users/login.php"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL
                                                            cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                            timeoutInterval:10];    
NSLog(@"ispost");
[request setHTTPMethod:@"POST"];
NSString* str = [NSString stringWithFormat:@"%@:%@", usernameField.text, passwordField.text];
[request setHTTPBody:[str dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (!theConnection) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Network Error" message:@"Could not login!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    [alert release];
    return;
}

-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace{ 

return YES; 
}
- (void) connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{

if ([challenge previousFailureCount] == 0) {
    NSLog(@"received authentication challenge");
    NSURLCredential *newCredential;
    newCredential = [NSURLCredential credentialWithUser:usernameField.text
                                               password:passwordField.text
                                            persistence:NSURLCredentialPersistenceNone];
    NSLog(@"credential created");
    [[challenge sender] useCredential:newCredential
           forAuthenticationChallenge:challenge];
     NSLog(@"responded to authentication challenge"); 
} else {
    [[challenge sender] cancelAuthenticationChallenge:challenge];
    NSLog(@"Invalid Username or Password");

    UIAlertView *userNameAlert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Invalid credentials. Please check your login details  !" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK",nil];
    [userNameAlert show];

}
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
NSLog(@"Got response: %@", response);

responseData = [[NSMutableData alloc] init];
 }

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[responseData appendData:data];

return;
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[responseData release];
[connection release];
// Show error message
NSLog(@"Connection failed! Error - %@ %@",
      [error localizedDescription],
      [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
// Use responseData
NSLog(@"Succeeded! Received %d bytes of data",[responseData length]);
[responseData release];
[connection release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T14:22:07.083

像这样更新 didReceiveAuthenticationChallenge 方法：

```
- (void) connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge{

if ([challenge previousFailureCount] == 0) {
    NSLog(@"received authentication challenge");
        NSURLCredential *newCredential;
    newCredential = [NSURLCredential credentialWithUser:usernameField.text
                                               password:passwordField.text
                                            persistence:NSURLCredentialPersistenceNone];
    NSLog(@"credential created");
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
    NSLog(@"responded to authentication challenge");    
} else {
    NSLog(@"previous authentication failure");
    UIAlertView *userNameAlert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Invalid credentials. Please check your login details  !" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK",nil];
    [userNameAlert show];

} 
```

和 clickOk 方法：

```
- (IBAction)clickOK:(id)sender {

        if ([[usernameField text] length] < 1 || [[passwordField text] length] < 1) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Login" message:@"Neither the username nor password may be empty!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
            return;
        }
        NSURL *myURL = [NSURL URLWithString:@"http://test.webdav.org/auth-basic/"];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:myURL
                                                               cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                                                    timeoutInterval:10];    
        NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        [theConnection start];
    }
 } 
```

# nginx - 彗星代理的Nginx设置？

> ID：11380846
> 
> 赞同：2
> 
> 时间：2012-07-08T05:20:39.873
> 
> 标签：nginx, comet

NGINX 目前作为我们应用程序的代理运行，但最近我实现了 comet 和`transfer-encoding: chunked`. 我意识到 NGINX 通过不正确地发回内容而是缓冲 Comet 而弄乱了响应。

进行这项工作的适当设置是什么？它是否需要特定于 URI 才能不干扰其他请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:34:38.797

我能够使用以下设置修复它：

```
proxy_buffering      off;
proxy_connect_timeout       6000;
proxy_send_timeout          6000;
proxy_read_timeout          6000; 
```

# iphone - 触发 performSegueWithIdentifier 后自定义 segue 的执行方法出现问题

> ID：11380848
> 
> 赞同：0
> 
> 时间：2012-07-08T05:20:53.897
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个有 2 个场景的故事板。每个场景都有一个 segue ctrl+从 ViewController 图标拖到另一个场景。从第一个视图到第二个视图的 Segue 具有标识符“left”，从第二个到第一个 - “right”，两个 Segue 都指向从 UIStoryboardSegue 继承的同一个自定义类。每个 ViewController 在 Attribute Inspector 中都有一个标题，并且还没有为它们分配任何自定义类。

在 AppDelegate 中，我为所有 4 个方向设置了 UISwipeGestureRecognizer，如果当前视图控制器具有标识符为“left”、“right”、“up”或“down”的 segue，它会触发 performSegueWithIdentifier：

```
- (void) handleSwipe:(UISwipeGestureRecognizer *) recognizer {
NSString *direction;
    switch ([recognizer direction]) {
        case UISwipeGestureRecognizerDirectionLeft:
            direction = @"left";
            break;
        case UISwipeGestureRecognizerDirectionUp:
            direction = @"up";
            break;
        case UISwipeGestureRecognizerDirectionDown:
            direction = @"down";
            break;
        default:
            direction = @"right";
            break;
    }
    @try {
        UIViewController *rootVC = self.window.rootViewController;
        [rootVC performSegueWithIdentifier:direction sender:rootVC];
    } @catch (NSException *e) {
        NSLog(@"Segue with identifier <%@> does not exist", direction);
    }
} 
```

在我的自定义 Segue 类中，我重写了“执行”方法，如下所示（没什么特别的，因为它会按原样中断，但我自然会重写它以便以后能够为 segues 自定义动画）：

```
-(void) perform {
    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    NSLog(@"source: %@, destination: %@", src.title, dst.title);

    [src presentModalViewController:dst animated:NO];
} 
```

但是，它只在第一次向左滑动时有效，之后什么也没有发生。我可以通过“执行”方法中的 NSLog 看到 segue 的源视图控制器和目标视图控制器在第一次转换后由于某种原因没有改变，并且保持不变。看起来我错过了一些简单的东西，但我无法弄清楚。

*不要对我太苛刻 ;) ，我是 iOS 开发的新手。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T07:52:13.963

我认为这是因为您总是在 rootViewController 上执行 segue，而 segue 只是在调用`presentModalViewController`. 一个控制器一次只能有 1 个模态；如果你想继续呈现模态，你需要从堆栈顶部的视图控制器呈现它们。我不知道这是否是您的意思.. 除非您希望能够通过控制器堆栈向后弹出，否则继续显示模式并没有任何意义。

如果您实际上并不想要模态框，则可以将 segue 中的 rootViewController 替换为目的地：

```
-(void) perform {
    UIViewController *dst = (UIViewController *) self.destinationViewController;
    // do some animation first
    [[[UIApplication sharedApplication] delegate].window.rootViewController = dst;
} 
```

还应该注意的是，像您在问题中提到的那样，在应用程序委托上有一个手势识别器是非常奇怪的。实现自己的 UIViewController 子类来执行滑动处理并调用自身会更有意义`performSegueWithIdentifier:`。

# mschart - MS 图表控件：隐藏默认图例

> ID：11380852
> 
> 赞同：4
> 
> 时间：2012-07-08T05:21:57.493
> 
> 标签：mschart

我需要自定义我的 MS 图表控件的图例。为此，我正在填充 Legend 的 CustomItems 集合。这很好用。但是，当显示图例时，CustomItems 信息会附加到图例的默认内容中。

如何隐藏图例的默认内容？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T05:33:40.993

Chart1.Legends["Default"].Enabled = false;

# javascript - 如果断言失败，则继续执行脚本

> ID：11380854
> 
> 赞同：2
> 
> 时间：2012-07-08T05:22:17.063
> 
> 标签：javascript, node.js

我对 node.js 相当陌生，并且不了解 assert 模块。这样做的目的是什么？我正在尝试检查某个值是否等于我定义的值，但是当它为假时应用程序崩溃（它说它会崩溃）。使用断言的原因是什么？用 if 语句检查是不是同样的事情，还是不合适？

基本上我使用zombie.js 来获取输入表单的值。

```
assert.equal(browser.field('name').value, 'Mike'); 
```

对比

```
 if(browser.field('name').value == 'Mike'){
     //continue 
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:30:11.573

断言用于测试和显示错误。这是同一件事。

基本上，根据您编写的逻辑，您放入断言中的条件是您（作为程序员）绝对肯定地认为必须为真的东西。除此之外的任何事情都应该是不可能的。

如果触发了断言，则表明发生了某种事情，使程序员认为不可能处于某种状态。因此，正确的做法是停止执行。

所以断言通常不应该用于正常的程序流程（包括错误检查）。它们只能用于“哇，嘿，这应该是不可能的”事情。

在您的情况下，您肯定需要`if`一个断言而不是断言，因为该语句可能`false`是绝对是您希望不时发生的事情。

有关断言的更多信息：[http](http://en.wikipedia.org/wiki/Assertion_(computing) ://en.wikipedia.org/wiki/Assertion_(computing )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:25:31.523

Assert 语句用于测试，就像在单元测试中一样。测试引擎在 assert 语句失败时捕获特定类型的错误，并为您提供有关失败的信息。编写好的、简单的测试是好的编程的关键。

# string - 而将两行作为一个字符串变量读取

> ID：11380862
> 
> 赞同：1
> 
> 时间：2012-07-08T05:23:45.760
> 
> 标签：string, bash, shell, awk, while-loop

这是我正在尝试做的事情：我有一个以下命令：

```
result=`awk /^#.*/{print;getline;print} file1.txt
echo "$result" 
```

输出是：

```
#first comment
first line
#second comment
second line
#third comment
third line. 
```

如果我必须将 $result 放入 while 循环并将两行捕获为一个字符串变量并打印它，我该怎么做？

例子：

```
echo "$result" | while read m
do
echo "Value of m is: $m"
done 
```

输出是：

```
Value of m is:#first comment
Value of m is:first line
Value of m is:#second comment
Value of m is:second line
Value of m is:#third comment
Value of m is:third line. 
```

但预期的输出是：

```
Value of m is:
#first comment
first line
Value of m is:
#second comment
second line
Value of m is:
#third comment
third line. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T06:41:18.970

```
while read -r first; read -r second
do
    printf '%s\n' 'Value of m is:' "$first" "$second"
done 
```

或者，如果您需要变量中的行：

```
while read -r first; read -r second
do
    m="$first"$'\n'"$second"
    echo 'Value of m is:'
    echo "$m"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T09:45:14.883

一种使用方式`awk`。在每个奇数行中读取下一行并将它们连接在换行符之间。

```
awk '
    FNR % 2 != 0 { 
        getline line; 
        result = $0 "\n" line; 
        print "Value:\n" result; 
    }
' infile 
```

假设内容`infile`为：

```
#first comment
first line
#second comment
second line
#third comment
third line. 
```

运行先前的`awk`命令输出将是：

价值：

```
Value:
#first comment
first line
Value:
#second comment
second line
Value:
#third comment
third line. 
```

# haskell - 从名称创建数据类型？

> ID：11380864
> 
> 赞同：5
> 
> 时间：2012-07-08T05:23:54.053
> 
> 标签：haskell, template-haskell

> **可能重复：**
> [模板 Haskell 声明中的局部变量](https://stackoverflow.com/questions/5722523/local-variables-in-template-haskell-declarations)

我正在尝试构建一个简单的 Template Haskell 函数，给定一个像“Foo”这样的字符串，它将为`data Foo = Foo`.

现在，我正在尝试做类似`mkDecl name = [d|data $(conT name) = Foo|]`的事情，但这给了我错误：“类型或类声明的格式错误：$（conT name）”。知道发生了什么吗？

我可以使用 dataD 等将它写出来，但我更喜欢这种方式，因为它会更清楚发生了什么。

# angularjs - AngularJS如何强制输入在模糊时重新渲染

> ID：11380866
> 
> 赞同：25
> 
> 时间：2012-07-08T05:24:13.780
> 
> 标签：angularjs

我有一些自定义验证代码，其中包括一个 $formatter。（为了正确起见，我以便士存储货币，但以磅.便士显示。）

如果用户在输入中键入“10”（这是一个有效值），则在他们移动到下一个字段后输入仍然显示“10”。

我希望它显示 10.00 以保持一致性。

如果模型将值更改为 1000，那么格式化程序将使字段显示为“10.00”。

我希望格式化程序在 field.blur() 上运行（只要输入有效）。

我的问题是，如果我将模型值从 10 更改为 10，则没有任何变化是可以理解的，因此不会重新渲染该字段。

代码：

```
var CURRENCY_REGEXP = /^\-?\d+(\.?\d?\d?)?$/;
app.directive('currency', function() {
  return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) {
      ctrl.$parsers.unshift(function(viewValue) {
        if (CURRENCY_REGEXP.test(viewValue)) {
          // it is valid
          ctrl.$setValidity('currency', true);
          console.log("valid");
          return viewValue * 100;
        } else if (viewValue === '') {
          return 0;
        } else {
          // it is invalid, return undefined (no model update)
          ctrl.$setValidity('currency', false);
          console.log("invalid");
          return undefined;
        }
      });
      ctrl.$formatters.push(function(modelValue) {
         if (modelValue === 0) { // we're using integer pence, so this is safe
             return '';
         }
         return (modelValue / 100).toFixed(2); 
      });
    }
  };
}); 
```

PS 这与 Angular 的内置“货币”无关。

* * *

更新：根据安迪的回答，我添加了一个“renderOnBlur”指令。它被调用，但调用渲染方法不会重新渲染输入。即“10”保持为“10”，而不是根据需要更改为“10.00”。

（当这些字段中的模型值发生变化时，它们会以 2 位小数正确呈现。）

Andy 提到的页面[http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController](http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController)说你必须`$render`自己实现。这看起来很奇怪，因为当模型值更改时，输入已经正确呈现。

```
app.directive('renderOnBlur', function() {
    return {
        require: 'ngModel',
        restrict: 'A',
        link: function(scope, elm, attrs, ctrl) {
            elm.bind('blur', function() {
                console.log('rendering ctrl', ctrl);
                ctrl.$render();
            });
        }
    };  
}); 
```

PS我不知道是什么`restrict: 'A',`- 这是最糟糕的真正的货物崇拜节目。似乎有`require: 'ngModel',`必要填充`ctrl`参数。

* * *

受@Dan Doyen 的回答启发，我将其改写为：

```
app.directive('renderOnBlur', function() {
    return {
        require: 'ngModel',
        restrict: 'A',
        link: function(scope, elm, attrs, ctrl) {
            elm.bind('blur', function() {
                var viewValue = ctrl.$modelValue;
                for (var i in ctrl.$formatters) {
                    viewValue = ctrl.$formatters[i](viewValue);
                }
                ctrl.$viewValue = viewValue;
                ctrl.$render();
            });
        }
    };  
}); 
```

这样做的好处是对于任何 $formatter 都是通用的，而不是像 Dan 的回答那样重复格式化程序代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T17:47:19.940

但是，您的控制器的 $modelValue 正在正确更新，但是由于模糊事件发生在角度之外，因此您的 $viewValue 似乎不是。这个怎么样？

```
 elm.bind('blur', function() {
       ctrl.$viewValue = (ctrl.$modelValue / 100).toFixed(2);
       ctrl.$render();
 }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-24T08:41:35.830

一点改进：如果值无效，请不要重新格式化（在我的情况下，无效文本刚刚被模糊清除，我认为这对可用性不利）。

此外，就像 Dark Falcon 所说：格式化程序应该向后迭代。

最后，不要使用 for-in 遍历数组，至少不要在没有检查 hasOwnProperty() 的情况下进行（对我来说，代码崩溃了，因为它将 Array.find() 视为格式化程序）。

```
// Reformat text on blur
elements.bind('blur', function() {
    if(!ngModel.$valid) {
        return;
    }
    var viewValue = ngModel.$modelValue;
    var formatters = ngModel.$formatters;
    for (var i = formatters.length - 1; i >= 0; --i) {
        viewValue = formatters[i](viewValue);
    }
    ngModel.$viewValue = viewValue;
    ngModel.$render();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-19T00:40:06.413

另一种实现是触发 Angular 的格式化程序。Angular 1.5 实现监视 $modelValue 的变化，然后触发 $formatters。要手动执行此操作，可以执行此操作

```
function triggerFormattersAndRender(ngModel, scope) {
  /* Triggers angulars formatters, which watches for $modelValue changes */
  var originalModelValue = ngModel.$modelValue;
  if (originalModelValue === null) return;

  ngModel.$modelValue = null;
  scope.$digest();
  ngModel.$modelValue = originalModelValue;
  scope.$digest();
} 
```

然后在指令中

```
function link(scope, elem, attrs, ngModel) {

    elem.bind('blur', function() {
        triggerFormattersAndRender(ngModel, scope);
    });

    // when we get focus, display full precision
    elem.bind('focus', function() {
      if (ngModel.$modelValue) {
        ngModel.$setViewValue(ngModel.$modelValue.toString());
        ngModel.$render();
      }
    })

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T15:19:34.113

尝试在模糊上使用 ctrl.$render。

`elm.bind('blur', function() { ctrl.$render() });`

[在http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)中查看。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-08T17:33:30.077

`10.00 === 10`真的

`a=10.00`

`console.log(a)`10

.00 在 javascript 上没有任何意义，因此您的 10.00 正在变为 10

我建议将值设为字符串，以便您可以创建所需的格式

# css - 960 个网格元素没有像我认为的那样显示

> ID：11380868
> 
> 赞同：0
> 
> 时间：2012-07-08T05:24:24.560
> 
> 标签：css, sass

我正在使用 960 网格系统来布局网站。我无法让 nivo-slider 和 h1 标签并排显示，中间有一个排水沟。有问题的两个元素都包含在一个 div 中，滑块有一个类

```
grid_7 
```

h1 有一类`grid_5`

对于我正在使用的 12 列网格，这些加起来为 12。我不明白为什么它们重叠![在此处输入图像描述](../Images/cdccfcec66d25cb8340d5b30c5da02a0.png)

这是我的scss

```
@import "compass/reset";

body {
  background: url(../img/background.png);
}

#header {
  background: green;
  margin-bottom: 25px;
}

.slider-wrapper {
  margin-bottom: 10px;
}

#navigation {
  clear: both;
  ul {
    li{
      list-style: none;
      float: left;
      margin: 2px;
      a {
       text-decoration: none;
     }
    }
  }
}

#content-wrapper {
  clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T10:28:13.233

您是否将它们都包裹在 container_12 中？

```
<div class="container_12">
  <div class="grid_5"></div>
  <div class="grid_7"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:18:15.647

我解决了我遇到的问题。这两个元素不应该在一个包含 div 的元素中。

# c# - 寻找最近的区块范围

> ID：11380870
> 
> 赞同：0
> 
> 时间：2012-07-08T05:25:11.610
> 
> 标签：c#, math, hex

我正在为存储嵌入文件的文件格式编写一个库。

1 个文件的结尾和另一个文件的开头之间的空间不是固定大小。它是最接近的上 0x1000。例如，如果 File1 在 0xAC4654 结束，File2 将从 0xAC5000 开始。

我想不出一种方法来计算这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:39:53.360

假设您只想四舍五入到最接近的 0x1000，那么以下代码就足够了：

```
Math.Ceiling((float)value / 0x1000) * 0x1000; 
```

# c# - 如何在后面的代码中将 TextWrapping 设置为 Wrap

> ID：11380875
> 
> 赞同：0
> 
> 时间：2012-07-08T05:26:53.233
> 
> 标签：c#, windows-phone-7, xaml

> **可能重复：**
> [Word wrap aa string in multiple lines](https://stackoverflow.com/questions/3961278/word-wrap-a-a-string-in-multiple-lines)

我知道在 XAML 中可以通过设置在对象上设置文本换行，`TextWrapping="Wrap"`但是有没有办法在后面的代码中做到这一点？我正在根据其他项目的状态在我的代码中用文本填充一些列表框和其他对象，但我无法从后面的代码中设置文本换行。这可能吗？如果可以，如何执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:57:45.937

这是你想要的？

```
yourTextBox.TextWrapping = TextWrapping.Wrap; 
```

# java - 如何存储上下文？

> ID：11380880
> 
> 赞同：4
> 
> 时间：2012-07-08T05:28:09.673
> 
> 标签：java, android, android-context

如何将上下文存储在 Android 应用程序中？经常需要在常规类中使用它，在 Activity 之外（例如数据库适配器）。

我尝试将 Context 保存在静态字段中，但它会调用内存泄漏。

也许，如果我在常规类中扩展上下文并在里面调用会更好`getApplicationContext()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:35:37.837

这样做的好方法是`Context`在构造函数中传递。您可以在每个示例代码中看到 Context 作为参数传递给自定义类以供将来使用。

即在[fedorvlasov 的 LazyListAdapter 中](https://github.com/thest1/LazyList)（这是从网络延迟加载图像的非常好的做法），您可以看到构造函数如下所示`public LazyAdapter(Activity a, String[] data)`：

这样，每次您在 Activity 之外并需要使用它时，您已经将它存储为一个字段。

另一种方法（不推荐）是使用作为应用程序上下文的静态字段。

```
public static final Context = getApplicationContext(); 
```

你把它放在启动活动中，你就可以在应用程序的整个生命周期内访问应用程序上下文。

# java - War文件的扩展机制

> ID：11380884
> 
> 赞同：0
> 
> 时间：2012-07-08T05:28:54.313
> 
> 标签：java, jakarta-ee, jar, manifest, war

我正在研究 Web 应用程序的扩展机制。具体情况是我想在我的系统上的某个位置（我的战争之外）引用 jar 文件，并且我不想通过仅在我的战争/lib 中复制它们来复制它们。为了进一步解释这一点，我的应用程序将通过安装程序安装所有具有类似结构的模块和库，

*   应用程序
    *   库
    *   模块1
    *   模块2

现在这里的 module1 是一个桌面应用程序，包含它自己的一组特定的 jar，而常用的 jar 来自“libs”目录。同样，module2 是一个 webapplication(.war)，它将在 war 本身中捆绑特定的 jar，但是对于常见的 jar，它需要引用“libs”文件夹。

我一直在阅读有关打包机制和“已安装的包”（即通过扩展列表）似乎是实现这一目标的方式。

首先，我想了解这是否是唯一可用的选项，或者是否有任何其他方法可以帮助我实现这种行为。其次，对于已安装的软件包，引用的 jar 只需要存在于 jre/lib/ext 位置。这意味着我必须将这些常见的 jar 复制到 jre 文件夹中。我不太热衷于那个选项，除非那是唯一的出路。

谢谢，
维姬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:58:01.883

将东西安装到 JRE 目录树中通常是个坏主意。它会污染其他应用程序的 JRE 安装，如果用户/管理员决定升级 JRE，则会给他/她带来问题。

剩下的，不清楚**为什么**你认为你需要在 webapp（或 web 容器）之外安装东西。没有这个，就很难为您提供最佳的继续操作方式。

# android - 坚持3个或更多独特的活动

> ID：11380886
> 
> 赞同：1
> 
> 时间：2012-07-08T05:29:07.420
> 
> 标签：android, android-intent, android-activity

我有一堆我不想重新加载的活动，因为它们消耗互联网资源。每个活动都有所有其他活动的参考按钮。此外，这些活动必须保持状态，而且我似乎需要使用 singleInstance 标志 - 有什么预防措施吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:01:54.870

尝试，当去另一个活动时，停止这个并保存她的状态，我想如果我理解你的问题，这可能是解决的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:48:37.513

我的建议是不要试图强迫 a`Activity`在内存中保持持久性。这是安卓系统的工作，不是你的。一旦处于暂停/停止状态，您不应该依赖任何`Activity`活着的东西，因为如果设备缺乏内存资源，它可能随时被系统破坏。如果您想在多个`Activity`s 之间保持 Internet 连接，您很可能希望使用 a`Service`来代替。

`Activity`每个都相互连接听起来也很奇怪`Activity`……您确定这是允许用户浏览您的应用程序的最佳方式吗？

# java - 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示

> ID：11380888
> 
> 赞同：0
> 
> 时间：2012-07-08T05:29:13.203
> 
> 标签：java, html, spring, spring-mvc

我正在使用 SPRING MVC。从客户端到控制器，我使用以下 xml 进行了 PUT。

```
<http-request method="PUT" url="/serviceproviders/{sp_id}/accessNumbers/{new_an_id}/languages" mime="application/xml">
        <content>
        <![CDATA[
         <additionalLanguages xmlns="http://www.XXX.com/pcs/model/schemas">
         <additionalLangIds>1003</additionalLangIds>
         </additionalLanguages>
        ]]>
        </content> 
```

AdditionalLanguages 是 java 类，声明如下

```
 @XmlRootElement(name = "additionalLanguages")
 @XmlAccessorType(XmlAccessType.NONE)
 public  class AdditionalLanguages implements Serializable{
     @XmlElement(name="additionalLangIds")
     private String sLanguageIDs = ""; 
     //getter & setter for sLanguageIDs 
 } 
```

控制器正在返回“org.springframework.web.servlet.view.RedirectView”的视图。这个视图本质上是为相同的 url "/serviceproviders/{sp_id}/accessNumbers/{new_an_id}/languages" 调用 GET，它返回 AdditionalLanguages 类的实例。

最后，我希望在浏览器“1003”中收到响应，这不过是

```
<HTML>
<BODY>
<additionalLanguages xmlns="http://www.XXX.com/pcs/model/schemas">
<additionalLangIds>1003</additionalLangIds>
</additionalLanguages>
</BODY>
</HTML> 
```

但我得到的是浏览器中的以下“警告和 XML 内容”而不是“1003”值

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
<additionalLanguages xmlns="http://www.radisys.com/pcs/model/schemas">
<additionalLangIds>1003</additionalLangIds>
</additionalLanguages> 
```

此输出未与客户期望映射，这导致客户端出现以下错误消息。

```
Execute action [repitition=0]: PUT -http://{SERVER}/PcsRESTApi/serviceproviders/1/accessNumbers/2020/languages
---HTTP RESPONSE---
HTTP Status: 500 - Internal Server Error
Response Headers:
  Date=Sat, 07 Jul 2012 23:19:45 GMT
  Server=Apache/2.2.16 (Unix) mod_jk/1.2.28
  errorCode=unknown
  errorMessage=Could not find acceptable representation
  Accept-Charset=big5, big5-hkscs, compound_text, euc-jp, euc-kr, gb18030, gb2312, gbk, ibm-thai, ibm00858, ibm01140, ibm01141, ibm01142, ibm01143, ibm01144, ibm01145, ibm01146, ibm01147, ibm01148, ibm01149, ibm037, ibm1026, ibm1047, ibm273, ibm277, ibm278, ibm280, ibm284, ibm285, ibm297, ibm420, ibm424, ibm437, ibm500, ibm775, ibm850, ibm852, ibm855, ibm857, ibm860, ibm861, ibm862, ibm863, ibm864, ibm865, ibm866, ibm868, ibm869, ibm870, ibm871, ibm918, iso-2022-cn, iso-2022-jp, iso-2022-jp-2, iso-2022-kr, iso-8859-1, iso-8859-13, iso-8859-15, iso-8859-2, iso-8859-3, iso-8859-4, iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9, jis_x0201, jis_x0212-1990, koi8-r, koi8-u, shift_jis, tis-620, us-ascii, utf-16, utf-16be, utf-16le, utf-32, utf-32be, utf-32le, utf-8, windows-1250, windows-1251, windows-1252, windows-1253, windows-1254, windows-1255, windows-1256, windows-1257, windows-1258, windows-31j, x-big5-solaris, x-euc-jp-linux, x-euc-tw, x-eucjp-open, x-ibm1006, x-ibm1025, x-ibm1046, x-ibm1097, x-ibm1098, x-ibm1112, x-ibm1122, x-ibm1123, x-ibm1124, x-ibm1381, x-ibm1383, x-ibm33722, x-ibm737, x-ibm834, x-ibm856, x-ibm874, x-ibm875, x-ibm921, x-ibm922, x-ibm930, x-ibm933, x-ibm935, x-ibm937, x-ibm939, x-ibm942, x-ibm942c, x-ibm943, x-ibm943c, x-ibm948, x-ibm949, x-ibm949c, x-ibm950, x-ibm964, x-ibm970, x-iscii91, x-iso-2022-cn-cns, x-iso-2022-cn-gb, x-iso-8859-11, x-jis0208, x-jisautodetect, x-johab, x-macarabic, x-maccentraleurope, x-maccroatian, x-maccyrillic, x-macdingbat, x-macgreek, x-machebrew, x-maciceland, x-macroman, x-macromania, x-macsymbol, x-macthai, x-macturkish, x-macukraine, x-ms950-hkscs, x-mswin-936, x-pck, x-utf-16le-bom, x-utf-32be-bom, x-utf-32le-bom, x-windows-50220, x-windows-50221, x-windows-874, x-windows-949, x-windows-950, x-windows-iso2022jp
  Content-Length=5243
  Connection=close
  Content-Type=application/xml
Response Body:
unknown: Could not find acceptable representation
org.springframework.web.HttpMediaTypeNotAcceptableException Could not find acceptable representation
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.writeWithMessageConverters(AnnotationMethodHandlerAdapter.java:954)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.handleResponseBody(AnnotationMethodHandlerAdapter.java:898)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.getModelAndView(AnnotationMethodHandlerAdapter.java:847)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:423)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:409)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:774)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644) 
```

我的问题是为什么输出不是一个值？为什么它是 XML？我在这里缺少什么。

请帮助我。我挣扎了很久。你是我唯一的希望。

* * *

**解决**
方法 仅当您直接从控制器返回值（对象）时才添加 @ResponseBody。如果您正在执行重定向网址；不要添加此注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T11:33:06.093

控制器的输出看起来完全有效 - 从您的描述来看，您的“PUT”请求看起来很干净，返回了 RedirectView，并且在重定向的方法中，它返回了“AdditionalLanguages”，我假设您已经使用 @ResponseBody 进行了注释，它这就是 Spring 使用 MessageConverter（在本例中为 Jaxb）将您的 AdditonalLanguages 响应转换为 XML 的原因。

简而言之，输出是一个值，因为您可能已将重定向视图的响应映射到 @ResponseBody。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-09-26T19:41:28.587

```
rfc include='reference.I-D.ietf-anima-grasp'?> 
<?rfc include='reference.I-D.greevenbosch-appsawg-cbor-cddl'?> 
<?rfc include='reference.I-D.ietf-anima-bootstrapping-keyinfra'?> 
<?rfc include='reference.I-D.ietf-anima-autonomic-control-plane'?> 
<?rfc include='reference.RFC.3633'?> 
</references> <references title="Informative References"> 
<?rfc include='reference.RFC.2629'?> 
<?rfc include='reference.RFC.7575'?> 
<?rfc include='reference.RFC.7576'?> 
<?rfc include='reference.I-D.ietf-anima-reference-model'?> 
</references> 
</back> 
</rfc 
```

# java-me - 如何在 J2ME 中检查系统日期/时间是 12 小时还是 24 小时格式

> ID：11380894
> 
> 赞同：2
> 
> 时间：2012-07-08T05:30:51.060
> 
> 标签：java-me, time-format

我正在尝试确定手机的当前区域设置是否设置为 12 小时或 24 小时格式。仅当设备时间为 12 小时格式时，我才想在我的应用程序中以 AM/PM 显示时间。在 android 中，可以使用“DateFormat.is24HourFormat()”获取，但在**J2ME**中是否可以检索此类信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:37:42.127

您可以获取系统时间，但无法获取时间格式。也许时间格式有一个系统属性，但我对此表示怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T01:20:17.420

如果目标设备是诺基亚，您可以使用它，请参阅[http://www.developer.nokia.com/Community/Wiki/Getting_System_properties_in_MIDP](http://www.developer.nokia.com/Community/Wiki/Getting_System_properties_in_MIDP)`System.getProperty("com.nokia.mid.timeformat")`上的此属性和其他属性

# data-structures - 确定树的深度

> ID：11380896
> 
> 赞同：0
> 
> 时间：2012-07-08T05:31:06.513
> 
> 标签：data-structures, tree

是否有设计用于快速查找树（不是二叉树）深度的数据结构？

D森林好吗？我需要有关数据结构的更多详细信息。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:04:12.030

您可以在树的每个节点中存储一个数字，即该节点下方树的深度。在插入或删除时，您必须重新计算从根到受影响节点的所有节点的值。这对你有用吗？

# filter - 如何在 Thrift 的 C++ 中使用方法“scannerOpenWithScan()”和过滤字符串来访问 HBase

> ID：11380897
> 
> 赞同：1
> 
> 时间：2012-07-08T05:31:18.897
> 
> 标签：filter, hbase, thrift

^_^ 大家好：

如何在 Thrift 的 C++ 中使用方法“scannerOpenWithScan()”和 filterString。hbase 版本是 hbase-0.92.1。

我想根据列的值选择行，所以我将scannerOpenWithScan()添加到“examples/thrift/DemoClient.cpp”中：

```
/**
* open a scanner with scan (filter string)
*/
320     TScan tscan;
321     std::string filterStr;
322     filterStr = "SingleColumnValueFilter (<=, '25', 'entry', 'num', true, false)";
323     tscan.__set_filterString(filterStr);       
324         
325     std::cout << "Starting scanner with scan..." << std::endl;
326     scanner = client.scannerOpenWithScan(t, tscan); 
327     std::cout << "The scanner id is " << scanner << std::endl;
328     try { ...... } 
```

但是没有返回扫描仪ID，错误是：

```
Starting scanner with scan...
ERROR: No more data to read. 
```

thrift.log 错误是：

```
796 java.lang.IllegalArgumentException: Incorrect filter string SingleColumnValueFilter(<=, '25', 'entry', 'num', true, false)
797         at org.apache.hadoop.hbase.filter.ParseFilter.parseSimpleFilterExpression(ParseFilter.java:250)
798         at org.apache.hadoop.hbase.filter.ParseFilter.parseFilterString(ParseFilter.java:168)
799         at org.apache.hadoop.hbase.thrift.ThriftServer$HBaseHandler.scannerOpenWithScan(ThriftServer.java:766) 
```

thrift.out 是：

```
java.lang.reflect.InvocationTargetException
  6         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  7         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  8         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  9         at java.lang.reflect.Method.invoke(Method.java:616)
 10         at org.apache.hadoop.hbase.filter.ParseFilter.parseSimpleFilterExpression(ParseFilter.java:240)
 11         at org.apache.hadoop.hbase.filter.ParseFilter.parseFilterString(ParseFilter.java:168)
 12         at org.apache.hadoop.hbase.thrift.ThriftServer$HBaseHandler.scannerOpenWithScan(ThriftServer.java:766)
 13         at org.apache.hadoop.hbase.thrift.generated.Hbase$Processor$scannerOpenWithScan.getResult(Hbase.java:3821) 
```

我对此一无所知。有谁知道如何使用具有过滤功能的 C++ 来访问 HBase？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T01:46:15.407

现在我知道答案了：过滤字符串不正确，正确的是：

```
filterStr = "SingleColumnValueFilter('entry', 'num', =, 'substring:25', true, false)"; 
```

正确的语法是：

```
SingleColumnValueFilter('<family>', '<qualifier>', <compare operator>, '<comparator>', <filterIfColumnMissing_boolean>, <latest_version_boolean>) 
```

[https://issues.apache.org/jira/browse/HBASE-5946](https://issues.apache.org/jira/browse/HBASE-5946)上的详细信息

# android - 位置跟踪：本机或 Web 应用程序

> ID：11380899
> 
> 赞同：0
> 
> 时间：2012-07-08T05:31:25.467
> 
> 标签：android, geolocation

我想构建一个 Android 应用程序，它将检测位置坐标并将其记录到数据库中。我想根据以下标准比较本机和 Web 应用程序的结果

1) 定位精度 2) 应用性能 3) 应用维护 4) 开发时间

我是一名 Web 开发人员，熟悉 HTML 和 PhoneGap 框架。请建议我是否应该使用本机或 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:01:46.427

好吧，我想你比我更了解网络应用程序；对于本机应用程序：

我实际上正在做一个类似的项目。[这](https://github.com/yyl/Tracking-map-on-android)是我在 android 上进行位置跟踪的代码；看看这个。它定期跟踪用户的位置，在室内使用网络位置，并在可以修复时使用 GPS。它应该给你一个快速的开始。

[此外，google 有一个名为My Tracks](http://www.google.com/mobile/mytracks/)的开源项目，它的性能更好，但代码更复杂。你也调查一下。

# c# - 使用 c# 将图形图像与其他图形图像匹配？

> ID：11380902
> 
> 赞同：1
> 
> 时间：2012-07-08T05:32:24.010
> 
> 标签：c#, .net, image-processing

我想将图形图像（白色背景中的黑线）与其他图形集进行比较，并确定与该模式最相似的图形。在 C# 中做到这一点的最佳方法是什么？我们需要神经网络吗？我认为我们不能应用像素数或图像大小来匹配这个......想要匹配图形模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:29:48.577

请按照以下步骤操作：

1：获取两个图像中的[线边界](https://stackoverflow.com/questions/3460995/c-sharp-finding-the-boundaries-of-an-image-not-the-size)。

2：计算他们所选区域的[直方图](https://stackoverflow.com/questions/926067/simple-histogram-generation-of-integer-data-in-c-sharp)。

3：使用[Bhattacharyya系数](http://en.wikipedia.org/wiki/Bhattacharyya_distance)比较直方图。

# wpf - WPF 中事件的 EventToCommand 或附加行为？

> ID：11380903
> 
> 赞同：0
> 
> 时间：2012-07-08T05:32:26.967
> 
> 标签：wpf, mvvm, command, mvvm-light, attachedbehaviors

我想知道我应该在 MVVM、EventToCommand 或 Attached Behavior 中使用什么事件？哪个性能更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:55:17.607

这取决于，如果您使用正确的工具，命令事件将提供路由命令能力，这意味着命令可以同时为 vm 和子 vms 执行。并且将比您正在实施的附加行为的简单命令慢。

因此，如果您不需要这种复杂的逻辑，或者没有使用适当的工具来绑定事件和命令，这并不重要。

在这两种情况下，您都订阅了一次事件，真正的问题是您需要多少个处理程序？当它只是数据范围内的一个时，它真的没关系。

# javascript - 单击导航栏中的列表会调用多次函数

> ID：11380907
> 
> 赞同：1
> 
> 时间：2012-07-08T05:33:06.767
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

嗨，我在导航栏中列出了：

```
<div data-role="navbar">
            <ul id="mylist">
                <li onclick=getData() id="first"><a href="#">First</a></li>
                <li onclick=getData() id="second"><a href="#">Second</a></li>
                <li onclick=getData() id="third"><a href="#">Third</a></li>
                <li onclick=getData() id="four"><a href="#">Four</a></li>

            </ul>
        </div> 
```

我有 getData 功能：

```
<script type="text/javascript">
function getData()
{
    console.log ("first line in getData>>>>");
    $("#first").live("click",function()
        {
            console.log("click on first>>>");
            chkTitle=$(this).text();                
             responseData();

        });

        $("#second").live("click",function()
        {
            console.log ("click on second>>>");
            chkTitle=$(this).text();                
             responseData();

        });

        $("#third").live("click",function()
        {
            console.log("click on third>>>");
            chkTitle=$(this).text();
            responseData();

        });

        $("#four").live("click",function()
        {
            console.log("click on four>>>");
            chkTitle=$(this).text();
            responseData();

        });

    }

</script> 
```

现在，当我第一次点击时，一切都很好。但是当我点击第二次假设时，它会打印一次：“getData>>>>中的第一行”但打印两次：“点击第二次>>>”第三次打印三次，依此类推..

每次 getData>>>> 中的第一行只打印一次，但 live("click",function() 数据每次打印越来越多，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:37:41.820

因为您正在定义多个点击处理程序，请尝试以下操作：

```
 <li id="first"><a href="#">First</a></li>
 <li id="second"><a href="#">Second</a></li>
 ... 
```

```
$('#mylist li').click(function(){
    var id = $(this).attr('id');
    console.log("click on " + id);
    chkTitle = $(this).text();   
    responseData();     
}) 
```

[演示](http://jsfiddle.net/vVDR7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:50:39.213

我不确定紧密绑定到单独的 ID 是不是最好的方法。理想情况下，该函数将是可重用的，并对存在的一些其他信息（除了 ID）采取行动，例如`data-`属性或其他使函数解耦的东西。

还值得一提的是，该`.live()`功能已被弃用，甚至在它被弃用之前通常被搁置以支持`.delegate()`. 当前使用的“首选”语法`.on()`仍然`.delegate()`是`.on()`.

如其他答案和评论中所述：您不需要`onclick`函数调用。将以下（或未定义的）代码包装在文档就绪函数中，然后就可以设置了。

所以，这两件事不碍事，即使与 ID 紧密耦合，我也会`ul`像这样将侦听器绑定到元素：

```
$('#mylist').on('click', 'li', function() {
  console.log('My ID is: ' + $(this).attr('id'));
}); 
```

或者进一步充实它，您可以使用 switch （或者如果您更喜欢这种语法，可以使用一系列 if/else if 语句......没有区别）：

```
$('#mylist').on('click', 'li', function() {
  var thisID = $(this).attr('id');
  switch (thisID) {
    case "first" :
      /* do stuff */
      break;
    case "second" : 
      /* do other stuff */
      break;
    case "third" : 
      /* do other stuff */
      break;
    case "four" : 
      /* do other stuff */
      break;
    default :
      console.log("Umm... I wasn't expecting that... when did I add more elements?");
  }
}); 
```

# c - C中的二维char数组

> ID：11380914
> 
> 赞同：0
> 
> 时间：2012-07-08T05:34:45.393
> 
> 标签：c

在下面的代码中，

```
char strArr[5][20];
int i;

for(i=0; i<5; i++)  
{  
   printf("string %d: ", i+1);  
   gets(strArr[i]);  
}

strArr[0]=strArr[1]; //have an compile error on this line. Why cannot assign? 
```

正如上面代码块的最后一行所评论的，为什么会出现编译错误（不兼容类型）？左右操作数都是 char* 类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:39:13.720

左右操作数都是类型`char[20]`，不是`char*`。变量实际上为它们保留了存储空间，它们不仅仅是指向字符串的指针。因此，如果它是合法的，那么这个赋值就是将 20 个字符从一个数组复制到另一个数组。

C 不允许您使用赋值运算符复制数组。使用`strcpy`,`strncpy`或`memcpy`代替。

（我怀疑错误的具体措辞是因为数组在某些地方衰减为指针，我希望赋值的左侧*不是*这些地方之一，而在赋值的右侧使用是。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T06:05:48.317

`char Array[n][m]`: 在几乎所有语言中，它的意思是：array of array。所以，`Array[0]` `Array[1]`.... 是一个数组。实际上，它是一个指向连续内存的每个元素的指针。

这个数组的类型是 : `char[m]`。而且，当您编写 : 时`arrayX = arrayY`，您希望将 arrayY 中的所有值复制到 arrayX，但 C 不允许这样做。您必须手动复制：

```
for(int i=0; i<=sizeof(arrayX)/sizeof(char); i++)
      arrayX[i] = arrayY[i]; 
```

我经常使用 `memcpy`，但背景是基于上面的代码。

```
 memcpy (strArray[1],strArray[0],sizeof(strArr[0])); 
```

但是，如果您这样声明，则不会出现编译错误：

`char * strArray[5][10]`;

因为，它只是复制指针的值：意味着复制此指针指向的位置。但是，当然，它会极大地改变您的代码。我只是在这里画得更清楚。

希望这有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T07:54:55.190

您试图将字符数组 strArray[0] 的基地址更改为 strArray[1] 的基地址，这是不允许的。因此你得到了错误。

# opencl - 在 OpenCL 中从 GPU 内核创建由主机 ptr 指向的缓冲区的副本

> ID：11380916
> 
> 赞同：0
> 
> 时间：2012-07-08T05:34:56.153
> 
> 标签：opencl, gpu

我试图了解 CL_MEM_USE_HOST_PTR 和 CL_MEM_COPY_HOST_PTR 的工作原理。基本上当使用 CL_MEM_USE_HOST_PTR 时，比如说在创建 2D 图像时，这不会将任何内容复制到设备，而是 GPU 将参考主机上的映射内存（clEnqueueMapBuffer 映射它），进行处理，我们可以将结果写入其他位置.

另一方面，如果我使用 CL_MEM_COPY_HOST_PTR，它将创建设备上主机 ptr 指向的数据的副本（我猜它会创建一个单独的副本，而不仅仅是缓存）。现在将对复制到设备的数据进行处理，然后将结果再次复制到主机。我希望我理解正确。

所以我的问题是......只是出于我的好奇心，我想这样做。我将使用 CL_MEM_USE_HOST_PTR 现在即使设备可以访问主机内存，我希望 GPU 内核在设备本身上创建一个单独的副本（不使用 COPY_HOST_PTR，因为这再次在主机本身中完成）然后执行处理这些数据。如何才能做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T16:10:02.110

使用 CL_MEM_READ_WRITE 创建要复制到的缓冲区，但不要在主机上对其进行初始化。我最近不得不为连续整数初始化一个新缓冲区

```
cl_mem _offsetBuffer;
_offsetBuffer = clCreateBuffer(_context, CL_MEM_READ_WRITE, (size_t)(count * sizeof(cl_int)), NULL, &errorCode); 
```

上面的 clCreateBuffer 除了为您提供内存对象的句柄外，不会对主机的内存做任何事情。然后我使用内核来分配顺序值，因为事实证明显卡上的内存速度比在 cpu 上分配值要快得多。

```
__kernel void initOffsetBuffer(__global int* offsetBuffer, const int offsetBufferLength, const int startValue){
    int gid = get_global_id(0);
    int gs = get_global_size(0);
    int i;
    for(i=gid;i<offsetBufferLength;i+=gs){
        offsetBuffer[i] = i+startValue;
    }
} 
```

此时主机内存中仍然没有缓冲区的副本。我需要使用 clEnqueueReadBuffer 将其复制到主机。

您可以轻松地将此代码修改为复制内核，而不仅仅是直接赋值。

```
__kernel void copyBuffer(__global const int* srcBuffer, __global int* dstBuffer, const int bufferLength){
    int gid = get_global_id(0);
    int gs = get_global_size(0);
    int i;
    for(i=gid;i<bufferLength;i+=gs){
        dstBuffer[i] = srcBuffer[i];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T18:18:39.837

OpenCL 缓冲区通常在主机内存中具有其“位”的副本（这是在 OpenCL 规范中调用缓冲区内容的方式）。这是必要的，因为设备内存是有限的，并且这些位通常仅在内核使用时才传输到设备。

当您使用 USE_HOST_PTR 创建缓冲区时，您允许 OpenCL 运行时将 host_ptr 位置用于此主机内存副本。当内核将使用缓冲区时，这些位将被复制到设备中。执行后，您需要确保这些位同步回您的主机内存。这是通过调用 来完成的`clEnqueueMapBuffer`，该函数返回的指针将在您的主机内存区域内。

当您使用 COPY_HOST_PTR 创建缓冲区时，运行时会分配缓冲区的新主机内存副本，并将您的位复制到其中。通常，此时不会向设备发送任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T13:45:24.297

**CL_MEM_HOST_PTR** - 实际上 cl_mem 对象将在设备上分配内存并复制主机指针指定的数据。对设备端缓冲区对象的任何修改对主机端都是不可见的。

**CL_MEM_USE_HOST_PTR** - cl_mem 对象使用host_ptr 提供的内存，因此设备可以直接修改分配在主机上的数据，这样我们不涉及任何数据传输。

# php - 在 PHP 中显示验证码时出错

> ID：11380917
> 
> 赞同：0
> 
> 时间：2012-07-08T05:35:02.913
> 
> 标签：php, captcha

我有以下用于在网页中显示验证码的 php 脚本，验证码在我的本地 apache 服务器中正确显示，但是当我上传到虚拟主机服务器时，我收到如下所述的错误，请帮助

```
<?php
session_start();

$str = "";
$length = 0;
for ($i = 0; $i < 6; $i++) {
    // these numbers represent ASCII table (small letters)
    $str .= chr(rand(97, 122));
}

//md5 letters and saving them to session
$letters = md5($str);
$_SESSION['letters'] = $letters;

//determine width and height for our image and create it
$imgW = 150;
$imgH = 50;
$image = imagecreatetruecolor($imgW, $imgH);

//setup background color and border color
$backgr_col = imagecolorallocate($image, 238,239,239);
$border_col = imagecolorallocate($image, 208,208,208);

//let's choose color in range of purple color
$text_col = imagecolorallocate($image, rand(70,90),rand(50,70),rand(120,140));

//now fill rectangle and draw border
imagefilledrectangle($image, 0, 0, $imgW, $imgH, $backgr_col);
imagerectangle($image, 0, 0, $imgW-1, $imgH-1, $border_col);

//save fonts in same folder where you PHP captcha script is
//name these fonts by numbers from 1 to 3
//we shall choose different font each time
$fn = rand(1,3);
$font = $fn . ".ttf";

//setup captcha letter size and angle of captcha letters
$font_size = $imgH / 2.0;
$angle = rand(-15,15);
$box = imagettfbbox($font_size, $angle, $font, $str);
$x = (int)($imgW - $box[4]) / 2;
$y = (int)($imgH - $box[5]) / 2;
imagettftext($image, $font_size, $angle, $x, $y, $text_col, $font, $str);

//now we should output captcha image
header("Content-type: image/png");
imagepng($image);
imagedestroy ($image);
?> 
```

错误是

```
Error: Image corrupt or truncated: http://url/captcha.php
Source File: http://url/captcha.php 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T13:03:51.387

我遇到了一个问题，即使用 CAPTCHA（使用 imagepng()）在一台机器上工作，但在远程服务器上却不行。我在十六进制编辑器中检查了 PNG 文件，发现前 4 个字节中有一个额外的 0D0A。我在 imagepng() 之前调用了 ob_clean()，问题解决了。

# emacs - 在 Emacs minibuffer 中执行命令的干净方式

> ID：11380918
> 
> 赞同：3
> 
> 时间：2012-07-08T05:35:05.193
> 
> 标签：emacs, elisp

考虑以下示例：我想使用 ido 从 minibuffer 中读取文件，但要合并到我经常使用的所有目录中。我不能只是执行

```
(ido-find-file)
(ido-merge-work-directories) 
```

因为第二个 sexp 只会在用户完成选择文件后执行。那么问题是：在迷你缓冲区的命令循环中执行命令的最佳/最干净的方法是什么？

我知道这样做的唯一方法是将我想要的命令绑定到一个键序列，并将该序列添加到 unread-command-events 以便在我们进入 minibuffer 命令循环后该键运行：

```
(setq unread-command-events (append (listify-key-sequence (kbd "M-s")) unread-command-events)) ; std key-binding for ido-merge-work-directories
(ido-find-file) 
```

但这很hacky，我想知道是否有更好的解决方案。

谢谢！

**编辑：**澄清一下，这个问题与 ido 无关。让我解释。当您调用诸如 find-file、switch-to-buffer 或任何需要 minibuffer 交互的函数时，会创建“递归编辑”——即命令循环内的命令循环。

所以，代码：

```
(message "A")
(recursive-edit) 
(message "B") 
```

打印 A，然后暂停函数的执行并重新进入命令循环。您可以四处移动、打开文件等，直到您离开递归编辑，然后打印“B”。

所以，让我重新表述我的问题：如果您创建一个递归编辑，那么您如何在创建的新命令循环中执行一个命令（在同一函数中）？如果我必须输入额外的键，这不算数。对于 ido 示例，要合并目录，必须运行 ido：在调用 ido 之前执行合并目录不在 ido 的命令循环内。如果你之后执行它，那么 ido 会破坏它的命令循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T20:55:22.380

所以我认为你的问题有三个答案：

*   您可以在 minibuffer 映射中绑定键，就像其他任何键一样。有几个可能相关的[键映射。](http://www.gnu.org/software/emacs/manual/html_node/emacs/Minibuffer-Maps.html)

*   `ido`有许多钩子可用于更改各种函数的行为，特别是`ido-make-*-hook`变量似乎相关。（如果你从未使用过它，`M-x describe-variable`又名`\C-h v`，是你的朋友。）

*   如果你想普遍改变一个函数的行为并且没有可用的钩子，你应该考虑`defadvice`. 在你的情况下，我认为你会很好（未经测试！）：

    ```
    (defadvice ido-find-file (before)
       (ido-merge-work-directories))
    (ad-activate ido-find-file) 
    ```

    您可以将这些行添加到您的`.emacs`：

    ```
    (when (require 'ido)
      (defadvice ido-find-file (before)
         (ido-merge-work-directories))
      (ad-activate ido-find-file)) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:30:22.887

引用手册：

> 一般来说，我们会尽量减少 GNU Emacs 中递归编辑级别的使用。这是因为它们限制你以特定的顺序“返回”——从最内层到顶层。如果可能，我们会在单独的缓冲区中呈现不同的活动，以便您可以随意在它们之间切换。一些命令切换到新的主要模式，该模式提供了切换回来的命令。这些方法使您可以更灵活地按照您选择的顺序返回未完成的任务。

那么您能描述一下您实际需要执行此操作的场景吗？Ido 在这种情况下的工作方式非常奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T03:14:45.587

我不清楚你在问什么，但这听起来有点像你在问如何以交互方式调用一个命令，当你不在顶层时，该命令从迷你缓冲区中读取。

如果这是问题，那么答案很简单：绑定`enable-recursive-minibuffers`到非`nil`围绕命令调用。

# c# - 如何在 C# 中将大数减少为保持相对大小差异的最小值

> ID：11380920
> 
> 赞同：1
> 
> 时间：2012-07-08T05:35:15.920
> 
> 标签：c#, math, reducing

这是我的问题。我有潜在的大量数字，从一百到一亿甚至更多。我想将这些数字提供给图表绘图仪（如果您好奇，请访问[http://benpickles.github.com/peity/ ）。](http://benpickles.github.com/peity/)问题是，当您有非常大的数字时，折线图最终看起来像一条平坦的线，因为数字太大，差异不会出现在如此小的图表上。但是，如果您绘制像 2、5、8、10、15 这样的数字。您可以很容易地看到图表线急剧上升并向右移动。

因此，为了以一种真正有意义的方式绘制我的迷你图表，我需要将这些大数字减少为尽可能小的数字，但要保持足够大的数字之间的相对差异，以便它们可以很好地绘制在图表上，就像小图表。我真的不需要一个完美的公式（不确定是否存在）。如果我的“大”数字在增长，我只需要与大数字以相同的相对速度增长的个位数数字。如果它们是平坦的，我希望图表看起来平坦，等等。

我没有很强的数学背景，所以我不知道是否有一个实际的数学术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:46:09.560

根据我对您问题的理解，您的问题是您绘制的数字具有非常不同的比例。如果是这种情况，您可以考虑以对数/对数比例绘制它们： http: [//en.m.wikipedia.org/wiki/Logarithmic_scale](http://en.m.wikipedia.org/wiki/Logarithmic_scale)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:55:09.277

查看函数 Math.Log(...)。我想你知道但万一[http://en.wikipedia.org/wiki/Logarithm](http://en.wikipedia.org/wiki/Logarithm)。对数基本上会使您的图表更加平坦。

在绘图之前对每个点执行此操作。您可以通过实验（如果它足够可见）选择对数底。根据您的描述，我想您应该使用一些大数字，例如 10。

```
newPlotValue = Math.Log(plotValue, 10); // or Math.Log10(plotValue); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:43:21.523

你只需要决定你的情节规模在哪里。

你可以把最小的作为你的规模的开始。

接下来是确定一个公因数，并在你的单位中显示出来。

就像数字大于 1000 一样，将它们全部除以 1000，然后在标签中将比例显示为（以 1000 为单位）。同样可以用于数百万或数十亿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T06:36:59.300

假设您有以下气压：

```
double[] p = { 101325.0, 101380.0, 101510.0, 101580.0, 101470.0, 101295.0, 100985.0, }; 
```

（以[帕斯卡](http://en.wikipedia.org/wiki/Pascal_%28unit%29)为单位的数字）。如果您绘制它们，该图可能看起来非常笔直和水平，因为这些数字的大小几乎相同。

为了更好地查看变化，只需从每个术语中减去一些固定数字。例如

```
double offset = 100000.0;
var pOffset = p.Select(x => x - offset).ToArray(); 
```

`pOffset`然后改为绘图。

在上面的例子中，我只是`100000.0`“神奇地”选择了偏移量。但是您可以使用所有值中的最小值作为偏移量，即

```
double offset = p.Min(); 
```

我的代码示例需要`using System.Linq;`.

# uitableview - UITableView 很慢

> ID：11380921
> 
> 赞同：2
> 
> 时间：2012-07-08T05:35:18.903
> 
> 标签：uitableview

我有一个`view`，我在其中拖了一个`UITableView`，还有 2 个`UIImageView`（第一个显示背景图像，第二个只是在视图顶部显示一个非常小的标题和图像）。它们都设置为`weak`属性。tableView 有 495 行，每个单元格中加载一个图像。这是配置单元格的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }    

    int cellNumber = indexPath.row + 1;
    NSString *cellImage1 = [NSString stringWithFormat:@"c%i.png", cellNumber];
    UIImage *theImage = [UIImage imageNamed:cellImage1];

    [cell.imageView setImage:theImage];

    UIView *bgColorView = [[UIView alloc] init];
    [bgColorView setBackgroundColor:[UIColor brownColor]];
    [cell setSelectedBackgroundView:bgColorView];

    return cell;
} 
```

我使用`segue`s，所以我不需要委托方法。（这也与这个问题无关）。问题是，滚动很流畅；但是，如果我滚动得*太快*，它就会变慢并可能导致应用程序崩溃。加载到单元格中的 png 图像尺寸不大，每个大约 5KB。似乎出队工作没有有效地完成；因为它变慢，显示内存警告消息，然后发生崩溃。我能做些什么吗？（视图中没有其他内容）

更新：我也试过删除这部分代码：

```
UIView *bgColorView = [[UIView alloc] init];
[bgColorView setBackgroundColor:[UIColor brownColor]];
[cell setSelectedBackgroundView:bgColorView]; 
```

没用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:41:51.020

`UIImage imageNamed`缓存您的图像并且永远不会释放内存，这可能是您的内存警告和崩溃的原因。在处理大量图像时，通常最好以其他方式加载图像，例如`imageWithContentsOfFile`或`imageWithData`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T05:44:39.813

`setImage`尝试在命令后释放图像。这有帮助吗？

# c - 这段代码如何在 C 中工作

> ID：11380924
> 
> 赞同：0
> 
> 时间：2012-07-08T05:37:04.127
> 
> 标签：c, string, char, scanf

```
void main()
{
 char c;
 clrscr();
 printf("Enter your name:\n");
 scanf("%s", c);
 printf("You entered your name as : \n")
 printf("%s",c);
 getch();
}

output//
Enter Your name:
sandeep
You entered your name as : 
sandeep 
```

当它不是一个字符数组时，我没有得到这个单个字符变量'c'如何存储一个字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T05:43:23.317

它没有，真的。

您将`c`（不是 的地址`c`）传递给`scanf`，因此将其提升为`int`，然后将值用作指针（因为 "%s" 期望通过指向某些内存的指针进行写入）。这给出了未定义的行为。显然，您碰巧在 中拥有的值`c`，当提升到时`int`碰巧出现在您可以写入而不会立即引起明显问题的地址。

当你将它传递给它时，几乎发生了同样的事情`printf`，并且由于地址匹配，你的输出与输入匹配——但如果你再次运行相同的可执行文件，或者如果你编译，不能保证它会继续这样做使用不同的编译器，在不同的系统上运行等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T05:45:23.163

这是错误的。如果它起作用，它会偶然起作用，随机值恰好在“c”和接下来的 4 或 7 个字节（取决于您的地址大小）中，指向一个相对无害的内存区域。也许如果你运行得足够多，当 c 和 c 周围的垃圾指向不太良性的内存区域时，你会产生内存错误。

它应该是 char* c，用缓冲区或字符数组初始化。C 是一种非常非常简单的语言。它应该在编译期间发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T06:11:11.077

您没有编译时错误，因为 scanf 的原型将“...”作为第二个参数。这意味着没有类型检查。是否出现运行时错误取决于您的运气。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T05:41:40.087

即使它看起来有效，scanf 也会将字符串写入未分配的内存位置。你应该使用一个数组，否则你的程序有一天可能会崩溃。

# java - Java OCR：读取草书手写体

> ID：11380926
> 
> 赞同：0
> 
> 时间：2012-07-08T05:37:10.217
> 
> 标签：java, ocr

我正在尝试开发和算法来阅读草书笔迹（准确地说是医生的笔迹）。我不需要匹配每个字母，只需匹配可识别的字母（我使用的是字典方法）。

现在，我在`BufferedImage`课堂上有二值化图像。接下来我需要做的是隔离每个字符。

你能给我一个关于如何实现这一目标的伪代码吗？我希望尽可能少地使用其他库。我想通过学习如何实现每个过程来做到这一点。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T06:01:34.807

您将需要了解诸如[图像时刻](http://en.wikipedia.org/wiki/Image_moment)之类的东西， 即使它们已被旋转或缩放，也可用于比较图像

您需要丰富的数学背景才能理解如何做到这一点，您可以从阅读此[http://www.ias.ac.in/sadhana/Pdf2007Oct/521](http://www.ias.ac.in/sadhana/Pdf2007Oct/521)开始，它是关于如何对特定类型的字符进行 OCR（ Kannada）已实施，相同的一般原则应适用于您正在尝试做的事情

除非你愿意花几个月（或几年）的时间在这个追求上，否则我建议你使用已经可用的东西，比如[ocropus](http://code.google.com/p/ocropus/)或[javaocr](http://www.roncemer.com/software-development/java-ocr)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T01:20:32.367

或者，您可以从 Vision Objects 购买 HWR SDK，这将大大减少您的开发工作量。

# sql - 合并两个卸载文件

> ID：11380928
> 
> 赞同：-4
> 
> 时间：2012-07-08T05:37:19.890
> 
> 标签：sql, perl, unix, informix

我有两个卸载文件，例如`header.unl`和`store.unl`. `header.unl`仅包含表的列名，而`store.unl`包含表的输出信息。

例如：

```
header.unl --> store_nbr country_code state_code

store.unl  --> 100 US 15 
```

现在我想合并这两个文件，所以我的输出应该如下所示：

```
store_nbr country_code state_code

100       US           15
...       ....         ....
....      ....         .... 
```

我也想通过电子邮件收到这个。

任何想法和帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T20:20:08.930

问题中有许多未指定的细节。例如，卸载文件中的列是否由空格、制表符或管道（Informix UNLOAD 格式默认分隔符）或其他东西分隔？电子邮件是否需要包含对齐的数据？标题和数据之间的空行是故意的吗？您的数据是否会包含分隔符（因为处理转义的分隔符会使重新格式化数据变得非常复杂）。

基本答案是使用`cat`：

```
{
cat header.unl
echo
cat store.unl
} | mailx -s "Stores Data" whoever@example.com 
```

如果不需要空行，则简化为：

```
cat header.unl store.unl | mailx -s "Stores Data" whoever@example.com 
```

如果您需要格式化数据以使其在以固定宽度字体显示时看起来很正常，那么您可能需要通过`awk`.

接收数据的人将如何处理这些数据？您最好将复合文件格式化为附件而不是内联文本（这是他们从上面的命令收到的）？如果您需要这样做，您可能需要查看 Perl 电子邮件模块（有很多可供选择）来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T06:48:57.207

很难说这个问题是关于什么的，你还需要什么`cat`。我假设您想要的是用制表符替换空格，但我可能会感到困惑（实际上我更新了这篇文章，因为我的第一个答案完全偏离目标，基于对您格式错误的问题的错误解释）。

```
#!/usr/bin/perl

use strict;
use warnings;

while( <>) { s{ }{\t}g; print ; } 
```

你称之为`merge.pl header.unl store.unl`

作为一个班轮：

```
perl -p -e's{ }{\t}g' header.unl store.unl 
```

请注意，这完全未经测试，因为我不想在这方面付出比您更多的努力来冒犯您。

我更不确定您所说的*“我想在电子邮件中收到这个......”*是什么意思，所以我将把这部分省略掉。

# mysql - 将用户历史记录保存在数据库中

> ID：11380932
> 
> 赞同：1
> 
> 时间：2012-07-08T05:38:46.760
> 
> 标签：mysql, sql, database

我需要保留服务器上所有用户活动的历史记录。活动涉及用户提交数据或一个过程。该应用程序需要为大约 50k 并发用户设计。

最好的方法是什么。如果我创建一个新的历史表，考虑到最坏的情况，它不会填充大量行吗？

最好的方法是什么？

只是打个比方；考虑一个有 50k 并发用户的图书馆，我必须保留每个用户的图书签入签出历史。考虑到用户数量，它不会失控吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T05:44:41.530

我认为有一些细节缺失，你打算如何处理这些数据？你能在没有索引的情况下持有它吗？或者你可以存档旧数据（旧的可以是一个小时前）。

SQLDB 写入速度非常快，但是您设计了 50K 并发用户活动，我建议您对用户活动执行一些内存分桶，并在 X 活动时将其刷新到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:21:18.317

最佳性能和最安全的方法是在源表上实现带有**触发器的历史表。**这是在一个封装对象（表）中实现安全性和实际业务规则的最佳方式。但是，如果您目前没有对服务器端例程进行编码的实践，或者您没有可以为您生成代码的数据字典系统，那么针对单个功能进入服务器端可能不切实际。

在代码中实现历史表通常有利于保持您最熟悉的语言和习惯，但这意味着您不能允许访问您的数据库，除非通过您的应用程序。我当然不能在这里做出一般规则，这个决定最好由设计团队根据手头的情况和预期的未来需求做出。

# c - 示例：scanf 和 char 错误

> ID：11380933
> 
> 赞同：2
> 
> 时间：2012-07-08T05:38:48.807
> 
> 标签：c, char, scanf

我正在阅读 C for Dummies 并在书中做一个示例。它告诉我一行一行地写出来。然后它继续阅读本书，即使代码有错误。这里是：

```
#include <stdio.h>

int main()
{

char me[20];
printf("What is your name?");
scanf("%s",&me);
printf("Darn glad to meet you. %s!\n".me);

return(0);

} 
```

根据 gcc：

> WHORU.C：在函数“int main()”中：WHORU.C:8:19：警告：格式“%s”需要“char*”类型的参数，但参数 2 的类型为“char (*)[20] ' [-Wformat] WHORU.C:9:43: 错误：在 '"该死的很高兴认识你。%s!\012"' 中请求成员 'me'，它属于非类类型 'const char [28 ]'</p>

因为我是 C 新手，所以我真的无法指出我做错了什么。我知道这段代码在执行时需要输入。这有点像java中的扫描仪。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:50:34.033

```
scanf("%s",&me); 
```

应该：

```
scanf("%s",me); 
```

`scanf()`接收指向您传递的变量的指针。但是在 C 中，数组在传递时会衰减为指针，因此不需要`&`.

另一个错误是，您`.`在 printf 中有 a 应该是 a `,`。

```
printf("Darn glad to meet you. %s!\n".me); 
```

应该：

```
printf("Darn glad to meet you. %s!\n",me); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:42:27.513

您只需使用`scanf("%s",me);`它应该可以解决您的问题。在 C`me[]`中相当于`*me`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:44:18.287

我会冒险猜测`scanf("%s",&me);`应该是`scanf("%s",&me[0])`或者`scanf("%s",me)`因为`&me`是指向字符数组的指针，而是`&me[0]`指向字符数组开头的单个字符的指针。我个人更喜欢第一种方法，因为它对我来说似乎更合乎逻辑，如“获取数组中第一个字符的地址我”

此外，`printf("Darn glad to meet you. %s!\n".me);`字符串和“me”之间可能应该有一个逗号，而不是一个句点，因为 me 是 printf 函数的参数。当您使用句点时，它会在字符串“Darn 很高兴见到你。%s！\n”中寻找一个名为“me”的成员，该成员不存在。你会在java中遇到同样的问题，所以我猜这只是一个错字。

# objective-c - Restkit 从 NSNumber 序列化布尔值

> ID：11380943
> 
> 赞同：0
> 
> 时间：2012-07-08T05:40:58.770
> 
> 标签：objective-c, serialization, restkit, nsnumber

其中一个托管对象具有一个由 NSNumber 类型表示的属性“isMember”。当通过 RestKit 序列化到 Json 帖子正文时，它总是给出 0/1 而不是 YES/NO 或 true/false。当从 json 结果映射到对象时，RestKit 能够成功地将 YES/NO 转换为 NSNumber。强制将布尔属性序列化为 YES/NO 或 true/false 的方法是什么？

```
Serialize: 0 -> 0, 1 -> 1

Deserialize : YES/true -> 1, NO/false -> 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T07:10:25.343

在NSNumber表示中，0相当于NO，1相当于YES；此外 BOOL 是整数兼容类型，通常是无符号字符。这里没有矛盾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T23:19:44.290

您可以使用委托方法之一手动更改值：

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didSerializeSourceObject:(id)sourceObject toSerialization:(inout id<RKRequestSerializable> *)serialization
{
    NSMutableDictionary *params = ((NSDictionary*)*serialization).mutableCopy;
    NSNumber *value = [params objectForKey:@"myBoolean"];
    [params setObject:value.boolValue ? @"true" : @"false" forKey:@"myBoolean"];
    *serialization = params;
} 
```

**更新**

我发现这仅在您将正文作为普通文本/html 参数发送时才有效。当将 RKObjectManager 的serializationMIMEType 设置为*RKMIMETypeJSON**时*，*序列*化对象将是 json 作为 NSData。在这种情况下，您仍然可以操作序列化对象，但您必须解析 json，更改它，然后再次对其进行序列化。

# sparql - 如何查询 TDB 中的特定模型？

> ID：11380944
> 
> 赞同：3
> 
> 时间：2012-07-08T05:41:06.017
> 
> 标签：sparql, jena

我用许多命名模型构建了一个TDB数据集，所有这些模型都包含大量数据。我知道我可以从TDB数据集中获取特定模型，然后对这个模型进行查询，但是这样，大内存是需要。

有了这个：select ?s ?p ?o where {graph ?g {?s ?p ?o}.}，我可以查询出所有命名模型的数据。有没有办法查询具体的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:12:52.717

是的，只需替换`?g`为命名模型的 URI，例如

```
SELECT * WHERE
{
  GRAPH <http://example.org/graph>
  { ?s ?p ?o }
} 
```

另一种选择是保留`?g`原位，而是`FROM NAMED`在查询中添加一些子句，这些子句限制子句考虑的命名图，`GRAPH`例如

```
SELECT
FROM NAMED <http://graph/1>
FROM NAMED <http://graph/2>
WHERE
{
  GRAPH ?g { ?s ?p ?o }
} 
```

# python - 从另一个线程关闭挂起的 zmq 套接字

> ID：11380947
> 
> 赞同：1
> 
> 时间：2012-07-08T05:41:40.707
> 
> 标签：python, sockets, zeromq, pyzmq

是否有某种方法可以从 Python 中的另一个线程关闭特定的挂起的 recv zmq 套接字，而不会破坏可能正在使用的其他套接字？以下代码似乎没有退出；替换`sock.close()`with`ctx.destroy()`会导致它退出，但这显然会破坏上下文中的所有套接字：

```
import zmq
import time
import threading as th
ctx = zmq.Context()
sock = ctx.socket(zmq.ROUTER)
sock.bind('tcp://*:6000')
def shutdown():
    time.sleep(5)
    print 'closing'
    sock.close()
t = th.Thread(target=shutdown)
t.start()
try:
    sock.recv()
except zmq.ZMQError:
print 'closed' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T02:03:52.957

一种可能性是在上下文管理器中执行套接字操作，该管理器使用信号处理程序关闭套接字，该信号处理程序在检测到信号时引发异常：

```
import zmq
import signal, time
import threading as th
from contextlib import contextmanager
@contextmanager
def ZMQErrorOnAlarm():
    def handler(signum, frame):
        raise Exception('ALARM detected')
    signal.signal(signal.SIGALRM, handler)
    yield
ctx = zmq.Context()
sock = ctx.socket(zmq.ROUTER)
sock.bind('tcp://*:6000')
def shutdown():
    signal.alarm(5)
    print 'closing'
t = th.Thread(target=shutdown)
t.start()
with ZMQErrorOnAlarm():
    try:
        sock.send('x')
        sock.recv()
    except:
        print 'closed' 
```

# webserver - 如何在特定时间将文件上传到服务器？

> ID：11380949
> 
> 赞同：0
> 
> 时间：2012-07-08T05:41:58.723
> 
> 标签：webserver, dreamweaver, cpanel, whm

很长一段时间以来，我都有一个零售网站，其中包含需要在午夜上传的某些页面。例如，经常有在午夜开始或结束的销售。如何让服务器自动发布 HTML 页面的更新版本，而无需等待午夜手动将文件上传到服务器？

我在想应该有一种方法可以将文件放在服务器上，但服务器在特定时间之前不会用新版本替换文件的当前版本。如果那不可能，或者如果有更好的方法来完成我想做的事情，请告诉我。

以防万一您需要知道：我通常使用 Dreamweaver CS5.5，但在需要时也使用过 FileZila。就服务器而言，它是一个运行 WHM 和 cPanel 的 VPS。我愿意使用不同的程序或安装任何可以帮助我解决此问题的特殊软件。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T06:48:45.803

您上传到暂存目录并编写一个 cron 作业以在午夜运行以将文件从暂存目录复制到目标目录。crontab -e 将打开一个编辑器来编辑 cron 文件，我想你想要：

0 0 * * * cp /*.html

# jquery - 在 background_page 中引用 jQuery.js 会导致 jQuery 无法正常工作

> ID：11380951
> 
> 赞同：0
> 
> 时间：2012-07-08T05:42:07.557
> 
> 标签：jquery, google-chrome-extension

我在 content_scripts 下的 manifest.json 中定义了 jQuery.js

```
"background_page": "html/bg.html",
"content_scripts": [
    {
        "matches": ["\u003Call_urls\u003E"],
        "js": ["js/jquery.js"/]
    }
] 
```

在 bg.html 中，我添加了一个单击事件处理程序来查找 <p>...</p> 节点

```
<script>

    chrome.browserAction.onClicked.addListener(function(tab) {  
        chrome.tabs.executeScript(null, {code: "alert($('p').text());"});
    });

</script> 
```

如果只是这样做，它工作正常。但是如果我在 bg.htm 中添加一个 js 引用，那么 jQuery 就不再工作了，甚至 src=""

```
<script type="text/javascript" src="../js/jquery.js">

    chrome.browserAction.onClicked.addListener(function(tab) {  
        chrome.tabs.executeScript(null, {code: "alert($('p').text());"});
    });

</script> 
```

background_page 和 content_script 应该在不同的范围内，仍然找不到这里发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T05:46:24.220

如果您的脚本标签具有`src`属性，则不会解析内容。

见这里：http: [//jsfiddle.net/cnK7s/](http://jsfiddle.net/cnK7s/)

* * *

相反，使用 2 个单独的`script`标签：

```
<script type="text/javascript" src="../js/jquery.js"></script>

<script type="text/javascript">

    chrome.browserAction.onClicked.addListener(function(tab) {  
        chrome.tabs.executeScript(null, {code: "alert($('p').text());"});
    });

</script> 
```

# php - 在我的 php 代码中出现 sql 语法错误

> ID：11380952
> 
> 赞同：-5
> 
> 时间：2012-07-08T05:42:21.377
> 
> 标签：php, mysql, syntax-error

我收到错误消息：“您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以便在第 2 行的 'rs)' 附近使用正确的语法”

这是我的代码：

```
<div id="main" >
<form name="form1" method="POST" >
<div id="input" align="center">
<table width="700" border="1">
<tr>
<td>Seat Preference</td>
<td>Zone</td>
<td>Meal Preference</td>
<td>Medical Considerations</td>
<td>Dietary Considerations</td>
</tr>
<tr>
 <td>&nbsp;<select name="seat">
<option>Window Seat</option>
<option>Aisle Seat</option>
</select></td>
<td>&nbsp;<select name="zone">
<option>Smoking</option>
<option>Non-Smoking</option>
</select></td>
<td>&nbsp;<select name="meal">
<option>Vegetarian</option>
<option>Non-Vegetarian</option>
</select></td>
<td>&nbsp;<input type="text" name="medical"/></td>
<td>&nbsp;<input type="text" name="dietary"/></td>
</tr>
</table>
</div>
<div id="button" align="center" >
<input type="submit" value="Take Fare and Proceed" name="submit"/>
</div>
</form>
<?php
mysql_connect("127.0.0.1","root","");
mysql_select_db("cmc");

     if (isset($_POST["submit"]))
{

$r=mysql_query("select * from reservation where transid=".$_REQUEST["id"].""); $d=mysql_fetch_assoc($r);
then query is::

mysql_query("INSERT INTO                         
      manifest(`day`,`month`,`year`,`class`,`sector`,`seat`,`zone`,`meal`,`medical`,`dietary`,`fare`)
VALUES(".$d["day"].",'".$d["month"]."','".$d["year"]."','".$d["class"]."','".$d["sector"]."         ','".$_POST["seat"]."','".$_POST["zone"]."','".$_POST["meal"]."','".$_POST["medical"]."','"    .$_POST["dietary"]."',".$d["fare"].")
    ") or die(mysql_error()); 
```

进一步的代码是：

```
 header("Location: print.php");

$dnew=$d["availibilty"]-1;
mysql_query("update reservation set availibility=".$dnew."");
header("Location: print.php");
 }
?>
</div> 
```

我找不到错误。这是航空公司在线预订的 php 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:07:16.100

您的错误在这一行：

```
mysql_query("INSERT INTO                         
      manifest(`day`,`month`,`year`,`class`,`sector`,`seat`,`zone`,`meal`,`medical`,`dietary`,`fare`)
VALUES(".$d["day"].",'".$d["month"]."','".$d["year"]."','".$d["class"]."','".$d["sector"]."         ','".$_POST["seat"]."','".$_POST["zone"]."','".$_POST["meal"]."','".$_POST["medical"]."','"    .$_POST["dietary"]."',".$d["fare"].")
    ") 
```

注意它的最后一点看起来像这样：

```
"',".$d["fare"].") ") 
```

但是值周围没有引号。因此，您需要将其更改为：

```
"','".$d["fare"]."') ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T06:25:30.187

如果适合您，请尝试以下操作。

```
$r=mysql_query("select * from reservation where transid='".$_REQUEST['id']."'"); $d=mysql_fetch_assoc($r); 
```

**编辑：**

```
mysql_query("INSERT INTO                         
      manifest(`day`,`month`,`year`,`class`,`sector`,`seat`,`zone`,`meal`,`medical`,`dietary`,`fare`)
VALUES('".$d['day']."','".$d['month']."','".$d['year']."','".$d['class']."','".$d['sector']."         ','".$_POST['seat']."','".$_POST['zone']."','".$_POST['meal']."','".$_POST['medical']."','"    .$_POST['dietary']."','".$d['fare']."')") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-08T05:48:38.043

这将**有助于**：（最佳实践）
将 Query String 放入一个变量并**回**显 Query 以检查是否将正确的 Query 传递给`mysql_query()`.

在phpmyadmin（或您的 mysql 编辑器）中`Query`打印后。`run it`它会告诉你什么是深度错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-08T05:49:52.773

您似乎没有指向包含错误的正确代码，因为我在您的 SQL 中找不到“rs)”。

确保您向我们提供了正确的 SQL 请求。

# model-view-controller - Doctrine2（实体与存储库）

> ID：11380954
> 
> 赞同：2
> 
> 时间：2012-07-08T05:42:30.940
> 
> 标签：model-view-controller, model, doctrine, doctrine-orm

我是使用 Doctrine2 的新手，在实体或存储库中编写自定义函数的最佳位置在哪里？假设我有一个用户实体，我想知道他的年龄。

如果我将函数 getAge 放在我的实体中是非常简单的。但是如果我将函数 getAge 放在我的存储库中，我必须通过 userId 来获取该用户的年龄。我错了吗？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-08T05:50:44.257

通常在处理实体时，您会希望将实体上的所有数据和操作保留在实体本身中，而存储库仅用于*获取以 . 开头的正确实体*。

例如，对单个实体中的数据进行返回/操作，因此它们应该进入实体本身，而定位特定年龄的所有用户的理论`getAge()`将进入存储库。`setAge()``getUsersByAge()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:34:29.977

希望它会有所帮助

```
$em = Zend_Registry::getInstance ()->entitymanager;
$user = $em->getRepository('Model_User')->findOneBy(array( 'user_id' => $userID,
        ));
$user->getAge(); 
```

# chmod - Chmod 未被识别为内部或外部命令

> ID：11380955
> 
> 赞同：4
> 
> 时间：2012-07-08T05:42:42.687
> 
> 标签：chmod, pycrypto

试图在 Windows 中安装 pycrypto。在命令提示符下，我键入 python setup.py build。事情一开始还不错，但是当它进入“运行 build_configure”时，我收到了这个错误消息，事情就停止了：

> chmod 未被识别为内部或外部命令

我尝试下载和安装 chmod，但这并没有改变任何东西。

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-08T06:38:28.147

我从 Windows cmd 提示符运行它。我从 MinGW 运行它，它通过了这部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-10T16:23:58.070

我通过安装“Git for Windows”并将“C:\Program Files\Git\usr\bin”路径添加到系统 %PATH% 环境变量中找到了解决问题的[答案。](https://developercommunity.visualstudio.com/content/problem/345794/chmod-is-not-recognized-as-an-internal-or-external.html)

这对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-26T17:43:05.413

需要在MinGW下安装msys包

![在此处输入图像描述](../Images/4194d972bf30d45a2300ccb404c0e96d.png)

并在您的 PATH 环境变量中添加以下条目。

*   `C:\MinGW\bin`
*   `C:\MinGW\msys\1.0\bin`[这是你可以找到 chmod 可执行文件的地方]

然后从普通的 Windows 命令提示符运行您的命令。

# c++ - C++中指向数组对象的指针

> ID：11380976
> 
> 赞同：0
> 
> 时间：2012-07-08T05:47:29.937
> 
> 标签：c++, arrays

我是 C++ 的新手（来自 Java），我想在一个类中声明一个数组对象，但它的模板参数中需要一个整数值。我想我必须创建一个指向数组类的指针，但它不起作用..

我想做类似的东西：

```
class foo{
    private:
        array *myArray;
    public:
        foo(int size){
            //This line may be terribly wrong, but you see what I mean
            myArray = new array<int,5>(); 
        }
        ~foo(){
            free(myArray);
        }
} 
```

但是，数组对象的正确初始化是：

```
array<int,5> 
```

但是这种方式不允许我在运行时选择长度。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-08T05:52:02.367

我强烈建议您选择[一本好的 C++ 入门书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)，而忘掉 Java。说真的，在学习 C++ 时，用 Java 思考会适得其反。它们可能具有相似的语法，但它们具有非常非常不同的语义。

您遇到的问题与语言的基本概念有关。在继续之前，您必须从一本好的 C++ 入门书籍中学习基础知识。

* * *

`std::array`（如果那是您正在使用的）不是用于此特定应用程序的正确类，因为您想在运行时选择长度。的大小`std::array`在编译时是固定的。

您应该改用`std::vector`它，它允许您在运行时指定（和更改）大小。

`std::vector`为您管理内存等标准容器；您不需要`new`或`delete`标准容器。存在标准容器是*因为*您不必自己手动处理内存。

```
#include <vector>

class foo
{ 
private: 
    std::vector<int> myArray; 
public: 
    foo(int size) : myArray(size) // Sets the size of the array
    {
    } 

    ~foo()
    { 
        // You don't need to delete anything; the vector takes care of itself.
    } 
}; 
```

请注意，我在这里没有使用指针、、、、`new`或任何地方。[在 C++ 的很多很多情况下，您通常不需要指针](http://tinyurl.com/dont-use-pointers)。与流行的看法相反，在使用现代 C++ 技术时，您实际上需要做的手动内存管理很少。事实上，如果你正在使用或在你的 C++ 代码中，你可能做错了。`delete``malloc()``free()``delete``free()`

我想再次强调[一本好的 C++ 入门书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)在帮助您学习该语言方面的重要性。任何优秀的 C++ 入门书籍都将涵盖`std::vector`以及如何利用它来发挥自己的优势。其他资源[（例如`std::vector`参考资料](http://en.cppreference.com/w/cpp/container/vector)）也可以提供帮助。熟悉他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:54:18.420

我相信你正在寻找的是一个`vector`类。它是一个连续的类似数组的存储结构（很好的[stackoverflow 问题](https://stackoverflow.com/questions/849168/are-stdvector-elements-guaranteed-to-be-contiguous/849190#849190)），也是 C 数组的 C++ 替代方案。

你可以用一个指针来做，但由于`vector`它的大小是动态增长的，它并不那么重要。

这是您的示例中的一个示例：

```
#include <vector>

class foo{
    private:
        std::vector<int> *vecPointer;
    public:
        foo(int size){
            vecPointer = new std::vector<int>(size, 0);
                // 0 as default value, can be omitted
        }
        ~foo(){
            delete vecPointer;
        }
} 
```

另一种方法是，如果您只想保留内存，但在类初始化时实际上没有元素，则只**保留**`int`内存而不是用具体值填充它。在这种情况下，构造函数看起来像：

```
foo::foo(int size){
     vecPointer = new std::vector<int>();
     vecPointer->reserve(size);
} 
```

析构函数不会改变，并且在 内部`class foo`，您可以使用 将对象添加到保留大小，并且您可以*以完全相同的方式*`vecPointer->push_back(5)`添加更多对象（只有在此之后向量大小和它所占用的内存才会增长）。

 *另外，你真的想使用指针吗？你不必，你可以有一个法线向量：

```
#include <vector>

class foo{
    private:
        std::vector<int> vec;
    public:
        foo(int size){
            vec.resize(size, 0); // it's initialized as empty here
            // alternative, with reserve:
            // vec.reserve(size);
        }
        ~foo(){
            // no deletion needed like this
        }
} 
```

这样，一切都得到了照顾，您不必记得删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T05:54:34.643

```
foo(int size) {
    myArray = new int[size];  // Allocate n ints and save ptr in a.
    for (int i=0; i<size; i++) {
        myArray[i] = 0;    // Initialize all elements to zero. 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T06:27:18.437

其他答案很好地回答了这个问题（您不需要管理内存），但假设您想自己管理内存（使用 new 运算符） -

然后使用唯一指针（[智能指针](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)）指向数组。

```
#include <memory>

class foo{
    private:
        std::unique_ptr<int> myArray;
    public:
        foo(int size){
            myArray.reset(new int[5]); 
        }
        ~foo(){
        }
} 
```

您不需要在这里释放内存（就像向量一样）。

但请记住，最好的解决方案是使用向量（如所指出的那样），但由于问题标题为“指向数组的指针”，我添加了一种巧妙地指向数组的方法。*

# android - 如何将样式应用于Android中的所有ImageButtons？

> ID：11380978
> 
> 赞同：3
> 
> 时间：2012-07-08T05:47:57.640
> 
> 标签：android, android-imageview, android-button

我的应用程序中有以下样式。

```
 <style name="BtnPressed">
      <item name="android:background">@drawable/btn_default</item>
  </style> 
```

现在我想将它应用于`ImageButtons`我的应用程序中的所有内容。我尝试使用[这个问题](https://stackoverflow.com/questions/2410836/how-do-i-apply-a-style-to-all-buttons-of-an-android-application)中提到的解决方案，但没有奏效。我正在使用 API-7。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T07:11:03.620

将您的 BtnPressed 样式更改为：

```
<style name="BtnPressedStyle" parent="Widget.ImageButton">
  <item name="android:background">@drawable/btn_default</item>
</style> 
```

定义应用程序范围的主题/样式：

```
<style name="MyTheme" parent="android:Theme">
   <item name="android:imageButtonStyle">@style/BtnPressedStyle</item>
</style> 
```

然后将其应用于清单的应用程序标签：

```
<application theme="@style/MyTheme" ... /> 
```

让我知道这是否可行，我从覆盖应用程序范围按钮样式的代码中对其进行了修改，但 ImageButton 应该也可以正常工作。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-08T06:03:24.543

您还可以在 IDE 中花费大约 5 分钟（notepad++ 会这样做）并搜索和替换 xmls 上的 ImageView ，以及代码中生成的图像视图的小片段。我不认为这是错误的，并且会帮助您维护应用程序。

# javascript - 无法在 javascript 中正确地将行添加到表中

> ID：11380982
> 
> 赞同：0
> 
> 时间：2012-07-08T05:49:01.700
> 
> 标签：javascript

行将添加到表格中，但样式和其他设置不起作用。我不得不求助于使用适用于某些项目的 innerXml ......但由于某种原因，这确实适用于隐藏列或行样式。

注意表最初是使用 Razor 创建的。一个按钮启动 AddRow。

我很感激任何帮助？

```
 function AddRow() {
    var ctl = document.getElementById("Table101");

    if (ctl != null) {
        var rowCount = ctl.rows.length;
        var i = 0;
        var row = document.createElement("tr");

        row.id = "Row".concat((rowCount).toString());
        row.style = 'border: 1px solid #C0C0C0;';
        row.innerHTML = '<tr row="Row'.concat((rowCount).toString()).concat('" style="border: 1px solid #C0C0C0;">');

        // Id  hide me...Id for new items is always 0000
        var e0 = document.createElement("input");
        e0.id = "Id".concat((rowCount).toString());
        e0.type = "text";
        e0.value = "0000";
        e0.style = "display: none;";
        e0.innerHTML = '<td id="Id'.concat((rowCount).toString()).concat('" sytle="display: none;" value="0000"><input type="text">0000</td>');
        var c0 = row.insertCell(i++);
        c0.style = "display: none;";
        c0.value = "0000";
        c0.appendChild(e0);

        // checkbox
        var e1 = document.createElement("input");
        e1.id = "Checkbox".concat((rowCount).toString());
        e1.type = "checkbox";
        e1.class = "chkBox";
        e1.style = "float:left; border: 1px solid #C0C0C0;";
        e1.innerHTML = '<td style="border: 1px solid #C0C0C0; width: 15px; height: 15px; max-width: 15px;"><input type="checkbox" style="float: left;" id="Checkbox'.concat((rowCount).toString()).concat('" class="chkBox"></td>');
        var c1 = row.insertCell(i++);            
        c1.style = "border: 1px solid #C0C0C0; width: 25px; height: 15px; max-width: 15px;";
        c1.appendChild(e1);

        // region
        var e2 = document.createElement("input");
        e2.type = "select-one";
        e2.style = "border: 1px solid #C0C0C0; width: 100px; height: 15px; max-width: 15px; ";
        e2.innerHTML = '<td style="border: 1px solid #C0C0C0; width: 100px; height: 15px; max-width: 15px;"><input type="select-one"></td>';
        var c2 = row.insertCell(i++);            
        c2.style = "border: 1px solid #C0C0C0; width: 100px; height: 15px; max-width: 15px;";
        c2.appendChild(e2);

        ctl.appendChild(row);
    }
 } 
```

根据 Michael 的建议进行了更新（如下所示）……但是使用列的样式属性和 innerHTML 格式都不能很好地工作。一个，另一个，两者都不起作用。

```
function AddRow() {
    var ctl = document.getElementById("Table1");

    if (ctl != null) {
        var rowCount = ctl.rows.length;          
        var row = document.all("Table1").insertRow();

        row.id = "Row" + rowCount.toString();
        row.style = 'border: 1px double #C0C0C0;';

        // Id -- hidden
        c0 = row.insertCell();
        c0.style = "display: none;";
        c0.value = "0000";
        c0.innerHTML = '<input type="text" style="display: none;" value=0000>';

        // checkbox
        c1 = row.insertCell();
        c1.style = "border: 1px double #C0C0C0; width: 25px; height: 15px; max-width: 15px;";
        c1.innerHTML = '<input type="checkbox" style="position: relative; left: 0px;"  id="Checkbox' + rowCount.toString() + '" class="chkBox">';

        c2 = row.insertCell();
        c2.style = "border: 1px double #C0C0C0; width: 100%; height: 15px; max-width: 15px;";
        c2.innerHTML = '<input type="text"  style="border: 1px double #C0C0C0; width: 100%; height: 15px; max-width: 15px;">';

        c3 = row.insertCell();
        c3.style = "border: 1px double #C0C0C0; width: 100%; height: 15px; max-width: 15px; background-color: #FFFFFF;";
        c3.innerHTML = '<input type="text" style="border: 1px double #C0C0C0; width: 100px; height: 15px; max-width: 15px;">';

        c4 = row.insertCell();
        c4.style = "border: 1px double #C0C0C0; width: 100%; height: 15px; max-width: 15px;";
        c4.innerHTML = '<input type="text" style="border: 1px double #C0C0C0; width: 100%; height: 15px; max-width: 15px;">';

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T05:54:34.037

表格有自己的方法 - 您使用 InsertRow 创建一个新行并在该行上使用 insertCell 创建一个新单元格。一个例子可以在[这里](http://www.codeproject.com/Articles/14995/Dynamically-add-and-remove-rows-in-a-HTML-table)找到。

此外，您不会通过`style`. 相反，您可以单独设置属性，例如：

```
c1.style.border = '1px solid #C0C0C0'; 
```

或通过 cssText 属性，如：

```
row.style.cssText = 'border: 1px solid #C0C0C0;'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T06:09:38.773

*   由于您使用 DOM 操作对象，因此您不必使用*innerHTML*！*innerHTML设置标签**内*的 HTML 内容，而不是标签本身。这样，您将嵌套标签两次！

*   *字符串*之间的连接是什么？使用*加号*：

    row.id = "Row".concat((rowCount).toString()); // 不！

    row.id = "行" + rowCount;

# c# - 我可以缩短或简化 C# 中的许多构造函数吗？

> ID：11380992
> 
> 赞同：1
> 
> 时间：2012-07-08T05:51:09.620
> 
> 标签：c#

我得到了一些关于构造函数的建议，但现在我有很多。我可以用函数或其他方式简化这些吗？这是我的课吗？

```
public class ContentViewModel
    {
        public ContentViewModel() { }
        public ContentViewModel(Content content)
        {
            this.Content = content;
        }
        public ContentViewModel(string pk)
        {
            this.Content = new Content();
            this.Content.PartitionKey = pk;
            this.Content.Created = DateTime.Now;
        }
        public ContentViewModel(string pk, string rk)
        {
            this.Content = new Content();
            this.Content.PartitionKey = pk;
            this.Content.RowKey = rk;
            this.Content.Created = DateTime.Now;
        }
        public ContentViewModel(string pk, string rk, string user)
        {
            this.Content = new Content();
            this.Content.PartitionKey = pk;
            this.Content.RowKey = rk;
            this.Content.Created = DateTime.Now;
            this.Content.CreatedBy = user;
        }
        public Content Content { get; set; }
        public bool UseRowKey { 
            get {
                return this.Content.PartitionKey.Substring(2, 2) == "05" ||
                       this.Content.PartitionKey.Substring(2, 2) == "06";
            }
        }
        public string TempRowKey { get; set; }

    } 
```

我正在使用 c# 4。有人说过命名参数和可选参数。这会帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T05:58:15.297

试试这个：

```
 public ContentViewModel() { }
    public ContentViewModel(Content content)
    {
        this.Content = content;
    }
    public ContentViewModel(string pk): this(new Content)
    {
        this.Content.PartitionKey = pk;
        this.Content.Created = DateTime.Now;
    }
    public ContentViewModel(string pk, string rk): this(pk)
    {
        this.Content.RowKey = rk;
    }
    public ContentViewModel(string pk, string rk, string user): this(pk, rk)
    {
        this.Content.CreatedBy = user;
    } 
```

或者你可以尝试：

```
 public ContentViewModel(Content content = null, string pk = null, 
                            string rk = null, string user = null)
    {
        this.Content = content ?? new Content();
        if (pk != null) this.Content.PartitionKey = pk;
        if (rk != null) this.Content.RowKey = pk;
        if (user != null) this.Content.CreatedBy = user;
        this.Content.Created = DateTime.Now;
    } 
```

有了这个，您可以调用您的构造函数设置或丢失任何参数，从左到右提供它们或使用@Robert Harvey 建议的命名参数。
例子：

```
var c = new ContentViewModel();
var c = new ContentViewModel(pk: 'ppp', user: 'marco');
var c = new ContentViewModel(null, 'pk', null, 'marco'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:58:06.853

编写一个包含所有参数的构造函数：

```
 public ContentViewModel(string pk, string rk, string user)
    {
        this.Content = new Content();
        this.Content.PartitionKey = pk;
        this.Content.RowKey = rk;
        this.Content.Created = DateTime.Now;
        this.Content.CreatedBy = user;
    } 
```

然后从其他构造函数调用该构造函数，为缺少的参数传递默认值：

```
 public ContentViewModel(string pk) : this(pk, "","") { } 
```

或者，您可以使用C# 4.0 中的[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-08T05:58:46.140

是的，例如你的构造函数

```
public ContentViewModel(string pk)
{
 this.Content = new Content();
 this.Content.PartitionKey = pk;
 this.Content.Created = DateTime.Now;
} 
```

可以打电话

```
public ContentViewModel(string pk, string rk) 
```

使用以下语法为 rk 设置默认值：

```
public ContentViewModel(string pk) : this(pk, "defaultRkValue"){} 
```

您可以用一些有意义的数据代替“defaultRkValue”

如果您真的想发疯，那么您的两个参数构造函数可以调用您的三个参数构造函数，依此类推

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T06:03:54.890

在您的情况下，您只能拥有一次构造函数：

```
public ContentViewModel(string pk, string rk = null, string user = null)
{
    this.Content = new Content();
    this.Content.PartitionKey = pk;
    this.Content.RowKey = rk;
    this.Content.Created = DateTime.Now;
    this.Content.CreatedBy = user;
} 
```

你甚至可以这样称呼它：

```
var content = new ContentViewModel("pk"); 
```

或者

```
var content = new ContentViewModel("pk", "rk"); 
```

或者

```
var content = new ContentViewModel("pk", "rk", "user"); 
```

甚至

```
var content = new ContentViewModel("pk", user: "user"); //without rk field 
```

# hadoop - Hadoop/MapReduce 的替代模型

> ID：11380993
> 
> 赞同：3
> 
> 时间：2012-07-08T05:51:14.427
> 
> 标签：hadoop, mapreduce

最近在 GigaOm 上发表了[一篇关于 Hadoop 时代的文章，以及许多不同的替代方案，如](http://gigaom.com/cloud/why-the-days-are-numbered-for-hadoop-as-we-know-it/#comment-861667)[Percolator](http://research.google.com/pubs/pub36726.html)、[Dremel](http://research.google.com/pubs/pub36632.html)和[Pregel](http://dl.acm.org/citation.cfm?id=1807184)。

[Apache Hama](http://hama.apache.org/)、[Apache Giraph](http://giraph.apache.org/)、[GoldenOrb](http://goldenorbos.org/)和[GraphLab](http://graphlab.org/)是 Pregel 的一些实现。我想知道 Percolator 和 Dremel 是否有任何开源/闭源实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T09:49:19.090

有构建 dremel 兼容数据库的开源项目（免责声明 - 我是团队的一员）。我建议从这里开始阅读： [http ://bigdatacraft.com/archives/327](http://bigdatacraft.com/archives/327)

# android - 从 Mac 切换到 PC 时出现 Eclipse '@Override' 问题

> ID：11380994
> 
> 赞同：3
> 
> 时间：2012-07-08T05:51:14.583
> 
> 标签：android, eclipse, interface, overriding

好的，所以我远非专家级开发人员，你很快就会发现，但我在将代码克隆到我的电脑时遇到了这个奇怪的问题。我正在开发一个 Android 应用程序，我在 bitbucket 上使用了一个 git 存储库......我的问题是我的一个类实现了一个接口，其中包含几个使用 @Override 注释的必需方法。现在我也在使用 mac 和 pc，每当我必须重新克隆到我的 pc 工作区时（这比你想象的更频繁），我会收到一个错误，指出覆盖方法“必须覆盖超类方法”和建议我删除它们。据我了解，它们是压倒一切的方法，并且在我的 macbook 上做得很好，但是当我切换到我的电脑时，每次都必须删除 @Override 注释，以使 eclipse 没有 hissyfit。

有谁知道为什么会这样？

如果有帮助，我正在实现的接口是 TextWatcher，受影响的方法是“afterTextChanged”、“beforeTextChanged”和“onTextChanged”。不确定这是否有帮助，但提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T05:54:49.243

我在工作中偶尔会遇到这个问题。转到项目的属性，然后转到 Java Compiler 并将编译器合规级别更改为 1.6。这就是我设置的。

我认为该设置必须是特定于工作区的，因为我也无法将其保存在源代码管理中。

编辑：此外，项目的 Android 上下文菜单具有“修复项目属性”，这也可能有所帮助。我不确定它是否能解决我上面提到的问题，我不经常使用这个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T05:55:44.703

在 Java 5 和 Java 6 之间，@Override 的规范已经发生了变化。在 Java 6 中，可以将 @Override 注释添加到实现 Java 5 中不允许的接口方法的方法。

因此，请检查项目的编译器设置，因为您在一台机器上使用 Java 1.5 进行编译，而在另一台机器上使用 Java 6 进行编译。