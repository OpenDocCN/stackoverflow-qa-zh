# StackOverflow 问答 12219000-12219999

# bash - 独立的shell脚本与shell函数？

> ID：12219001
> 
> 赞同：6
> 
> 时间：2012-08-31T16:08:55.367
> 
> 标签：bash, function, shell

例如，我想编写一个 bash shell 脚本来使用`rsync`. 我应该把它作为一个独立的脚本文件（`backup.sh`）还是将它包装在一个函数中（`backup`）？作为一个脚本文件，我可以运行它`bash backup.sh`。作为一个功能，我可以将它放在一个文件中，`foo.sh`并在我登录时获取它，然后我可以简单地`backup`作为命令运行来备份我的文件。问题是，这两种策略的优缺点是什么？

或者更一般地说，我想知道，在什么情况下，我应该将功能实现为独立的 Shell 脚本文件还是作为 shell 函数？

我的一些想法：我知道一些图形会话（例如 KDE、Gnome 等）在登录时会使用不同的文件。如果想在图形启动的应用程序中使用 shell 功能（例如单击图标打开 emacs），可能会引起一些混乱。但我更喜欢将它们实现为 shell 函数并将它们组合到文件中，我认为这些文件整洁且组织良好。

还有其他想法或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:15:20.927

将函数用于您将经常使用的事物。它们占用内存并需要在 shell 启动时进行解析——如果你从不使用该函数，解析就会被浪费掉。

将脚本用于需要很长时间的事情，而您很少这样做。每次调用的解析时间可以忽略不计，并且将脚本分开带来的清晰度是有益的。

因此，对于备份脚本，我强烈推荐使用脚本而不是函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:25:05.787

类似python的解决方案：

```
#!/bin/bash

caller_shlvl=$1
shift

backup () {
    ...
}

if (( $caller_shlvl < $SHLVL )); then
    backup "$@"
fi 
```

您可以执行以下两项操作之一：

```
bash script.sh $SHLVL other args 
```

在调用脚本时运行备份，或者

```
source script.sh $SHLVL
# Time passes
backup firstarg secondarg etc 
```

它将在当前 shell 中定义函数但不执行它。

（必须将 $SHLVL 作为显式的第一个参数传递是我最接近模拟 Python 的

```
if __name__=="__main__": 
```

它不漂亮，并且可能使这个答案不太有用。）

# vb.net - vb.net 用规则分割字符串

> ID：12219004
> 
> 赞同：1
> 
> 时间：2012-08-31T16:09:06.427
> 
> 标签：vb.net, string, split

我有 2 个字符串，我想`String.Split()`对它们使用方法，如果字符串包含“爱你”，我想做的是忽略空格并将其作为一个元素保存在数组中但是如果它只包含“爱”正常保存

```
str1 = "I Love Her"
str2 = "I Love You Not"

'no problem with splitting the first string
Dim strsplit1() As String = str1.Split(New String() {" "}, StringSplitOptions.None) 
```

对于第二个字符串..我怎样才能忽略空格分隔符并将“爱你”保存为一个元素？

注意这只是一个例子，我的想法告诉我检查 indexofLove+1 但我怎样才能得到 Love 的索引？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:22:18.520

你可以在这里使用简单的技巧。在拆分字符串之前将“Love You”替换为“Love_You”，拆分完成后，扫描接收到的数组并将“Love_You”替换回“Love you”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:38:21.290

这对我有用

```
 Dim strsplit2() As String = str2.Split(New String() {" "}, StringSplitOptions.None)
    Dim loveindex = Array.IndexOf(strsplit2, "Love")
    If strsplit2(loveindex + 1) = "You" Then
        strsplit2(loveindex) = "Love You"
    End If 
```

我不关心其余的，因为我只想检查 strsplit2(loveindex) 是否存在于预定义的 ArrayList 中

所以

```
 For Each x As String In strsplit2
        If myarraylist.Contains(x) Then
            MsgBox(x)
            Exit For
        End If
    Next 
```

很抱歉没有提到它，但是您的解决方案对关心阵列其余部分的任何人都有好处。

我的问题是有两组，一组称为“Holmegaard”，一组称为“Holmegaard Lamps”，它们包含在产品名称中，我只需要解析它们以向每个组显示正确的图像

# sql - 需要加入4张桌子

> ID：12219013
> 
> 赞同：-1
> 
> 时间：2012-08-31T16:09:47.580
> 
> 标签：sql, oracle

我有 4 个表需要加入查询。我想要表 1 中的所有结果，然后想要加入表 1、2、3 中的任何结果。我不确定如何编写此查询。

这是我最好的猜测：

```
SELECT
 *
FROM
 t1
INNER JOIN
(
 t2 on t2.id = t1.id
 FULL OUTER JOIN t3 on t3.id = t1.id
 FULL OUTER JOIN t4 on t4.id = t1.id
) 
```

我确实找到了解释不同类型连接的[这篇文章。](https://stackoverflow.com/questions/38549/difference-between-inner-and-outer-join)由此，我相信我想要 table1 的左连接或右连接，但是我对嵌套语句感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:19:06.070

您的问题的关键是您想要表 1 中的所有结果。这意味着左外连接：

```
 select *
    from t1 left outer join
         t2
         on t1.id = t2.id left outer join
         t3
         on t1.id = t3.id left outer join
         t4
         on t1.id = t4.id 
```

左外连接保留“first”或“before”表中的所有记录，但不保留第二个表中的记录。因为您从 t1 开始，所以所有这些记录将只保留与 t2 匹配的记录，依此类推。

# r - 在包含 R 中特定行名的列表中查找数据框

> ID：12219019
> 
> 赞同：1
> 
> 时间：2012-08-31T16:10:11.137
> 
> 标签：r, list, row, dataframe

我有一个数据框列表。有没有办法找到包含特定行名的数据框的索引？

例如，说我有

```
mylist<-list(
          data.frame(c(1,1),c(1,1),row.names = c('row1','row2')),
          data.frame(c(1,1),c(1,1),row.names = c('row3','row4'))
             ) 
```

我想找到在哪里`row3`，查询将返回 2，因为它在我列表中的第二个数据框中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:13:18.343

单程：

```
sapply(mylist, function(x)"row3" %in% rownames(x))
[1] FALSE  TRUE 
```

或同一主题的变体，`NA`如果找不到行名，则返回，如果可以，则返回行号：

```
sapply(mylist, function(x)match("row3", rownames(x)))
[1] NA  1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:13:35.870

尝试

```
> lapply(lapply(mylist,rownames),function(x){any(grepl('row3',x))})
[[1]]
[1] FALSE

[[2]]
[1] TRUE

#> seq_along(mylist)[sapply(lapply(mylist,rownames),function(x){any(grepl('row3',x))})]
#[1] 2
#> 
```

# spring - SpringTest 和 afterPropertiesSet

> ID：12219023
> 
> 赞同：2
> 
> 时间：2012-08-31T16:10:28.627
> 
> 标签：spring, easymock, spring-test

我使用 SpringTest 和 EasyMock 对我的 Spring bean 进行单元测试。

我的测试bean是这样的：

```
 @ContextConfiguration(locations = "classpath:/test/applicationContext-test.xml")
    public class ControllerTest {

        @Autowired
        private Controller controller;

        @Autowired
        private IService service;

        @Test
        public void test() {
        }
} 
```

这是我的控制器：

```
@Controller
@Scope("request")
public class Controller implements InitializingBean {

    @Autowired
    private IService service;

    void afterPropertiesSet() throws Exception {
        service.doSomething();
    }

} 
```

在初始化 bean 时，Spring 会自动调用 afterPropertiesSet 方法。我想用 EasyMock 模拟对 doSomething 方法的调用。

我想在我的测试方法中执行此操作，但 afterPropertiesSet 在进入我的测试方法之前执行，因为 Spring 在初始化 bean 时调用它。

如何使用 SpringTest 或 EasyMock 在 afterPropertiesSet 方法中模拟我的服务？

谢谢

**编辑：**

我指定 Spring 将模拟服务正确加载到我的 Controller 中。我的问题不是如何创建模拟（已经可以了），而是如何模拟该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:48:23.037

你没有提供足够的细节，所以我会给你一个 Mockito 的例子。将此`IService`模拟配置添加到文件的*开头*`applicationContext-test.xml`：

```
<bean 
      id="iServiceMock"
      class="org.mockito.Mockito" 
      factory-method="mock"
      primary="true">
  <constructor-arg value="com.example.IService"/>
</bean> 
```

注意到`primary="true"`属性了吗？Spring 现在将找到两个实现`IService`接口的类。但其中一个是*主要*的，它将被选择用于自动装配。而已！

想要记录或验证某些行为？只需将此模拟注入您的测试：

```
@ContextConfiguration(locations = "classpath:/test/applicationContext-test.xml")
public class ControllerTest {

  @Autowired
  private IService iServiceMock; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:46:21.600

不要`@Autowire`你的控制器，而是在你的测试中以编程方式实例化它，手动设置模拟服务。

```
@Test
public void test() {
    Controller controller = new Controller();
    controller.setMyService(mockService);
} 
```

或者：

```
@Test
public void test() {
    Controller controller = new Controller();
    controller.afterPropertiesSet();
} 
```

# ruby-on-rails - 使用 Web 服务写入图像

> ID：12219031
> 
> 赞同：0
> 
> 时间：2012-08-31T16:11:23.477
> 
> 标签：ruby-on-rails, web-services, image-upload

我正在研究其他网络服务（rails），移动团队发送请求并且我需要创建图像，Somebudy 帮助我如何使用二进制数据编写图像，因为我的参数中有二进制数据。我尝试了很多东西，但没有得到任何运气。

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:46:30.353

您可以尝试图像魔术，我不确定它是否会进行转换。

但你不应该发送二进制图像......使用多部分

# c# - 如何使用 LINQ 查询找到两列之间的差异？

> ID：12219046
> 
> 赞同：1
> 
> 时间：2012-08-31T16:11:52.787
> 
> 标签：c#, linq

我有两个数据表，想加入这两个表以找出两列之间的差异，但是它不断返回 null 并在 CopyToDataTable 方法中出错，因为您无法将 null 传递给它。我在这段代码之前检查过 TestOutput 和 ExpectedOutput 表中的数据完全相同。这是我的代码：

```
IEnumerable<DataRow> diff =
  (from datarows1 in TestOutput.AsEnumerable()
   join datarows2 in ExpectedOutput.AsEnumerable() 
   on datarows1.Field<String>("external_id") equals datarows2.Field<String>("external_id")

   select new
   {
      KeyId = datarows1.Field<String>("external_id"),
      Difference = datarows1.Field<Decimal>("quantity") - datarows2.Field<Decimal>("quantity")
    }) as IEnumerable<DataRow>;

DataTable difference = diff.CopyToDataTable<DataRow>(); 
```

错误消息@最后一行：

> ArgumentNullException 未处理 - 值不能为空。参数名称：来源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:19:17.093

问题在于`as IEnumerable<DataRow>`演员阵容。如果您删除该行，您将看到您的查询正在选择具有属性`KeyID`和的匿名类型`Difference`，而**不是**IEnumerable。`as`运算符尝试进行转换，如果不可能进行这种转换，则`IEnumerable<DataRow>`返回 a 。`null`这就是您的空引用异常的来源。

要解决此问题，您需要找到一种不同的技术来从您的`IEnumerable<a'>`（`a'`匿名类型在哪里）填充 DataTable

```
DataTable difference = new DataTable();
difference.Columns.Add("KeyID", typeof(string));
difference.Columns.Add("Difference", typeof(decimal));

foreach (var result in diff)
   difference.Rows.Add(result.KeyID, result.Difference); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:19:38.563

问题是当你这样做时：

`select new {...}`

您正在创建一个匿名类，而不是 DataRow。因此，当你施放它时，`as IEnumerable<DataRow>`它变成`null`

如果您使用隐式类型变量：

```
 var diff = 
  (from datarows1 in TestOutput.AsEnumerable() 
   join datarows2 in ExpectedOutput.AsEnumerable()  
   on datarows1.Field<String>("external_id") equals datarows2.Field<String>("external_id") 

   select new 
   { 
      KeyId = datarows1.Field<String>("external_id"), 
      Difference = datarows1.Field<Decimal>("quantity") - datarows2.Field<Decimal>("quantity") 
    }); 
```

这将创建正确类型的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:20:16.867

你在你的而不是这个中使用了匿名类型，`select new`你应该使用一些继承自`DataRow`当前表类型的类型：

```
.....
select new MyDataType
{
   external_id= datarows1.Field<String>("external_id"),
   quantity = datarows1.Field<Decimal>("quantity") 
              - datarows2.Field<Decimal>("quantity")
}) .ToList();

DataTable difference = diff.CopyToDataTable<DataRow>(); 
```

实际上您的演员表无效，它将被转换为null。

# objective-c - 附加图像时Restkit将子对象数组序列化为字符串

> ID：12219049
> 
> 赞同：1
> 
> 时间：2012-08-31T16:12:07.610
> 
> 标签：objective-c, ios, serialization, restkit

使用 Restkit 将对象发送回服务器时，仅当我附加图像时，我才遇到子对象嵌套数组的问题。

这是我用于所有请求的映射摘要：

```
// mapping for post tag details
tagMapping = [RKObjectMapping mappingForClass:[TagObject class]];
[tagMapping mapKeyPath:@"id" toAttribute:@"tagId"];
[tagMapping mapKeyPath:@"name" toAttribute:@"tagName"];
[[RKObjectManager sharedManager].mappingProvider setMapping:tagMapping forKeyPath:@"tags"];
[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[tagMapping inverseMapping] forClass:[TagObject class]];

// mapping for posts
poastMapping = [[RKObjectMapping alloc] init];
poastMapping = [RKObjectMapping mappingForClass:[PoastObject class]];
[poastMapping mapKeyPath:@"id" toAttribute:@"poastId"];
[poastMapping mapKeyPath:@"user_id" toAttribute:@"userId"];
[poastMapping mapKeyPath:@"blurb" toAttribute:@"blurb"];
[poastMapping mapKeyPath:@"photo" toAttribute:@"photo"];
[poastMapping mapKeyPath:@"avatar" toAttribute:@"avatar"];
[poastMapping mapKeyPath:@"date_created" toAttribute:@"dateCreated"];
[poastMapping mapKeyPath:@"firstname" toAttribute:@"firstName"];
[poastMapping mapKeyPath:@"lastname" toAttribute:@"lastName"];
[poastMapping mapKeyPath:@"session" toAttribute:@"session"];
[poastMapping mapKeyPath:@"device" toAttribute:@"device"];
[poastMapping mapKeyPath:@"comments" toAttribute:@"iComments"];
[poastMapping mapKeyPath:@"commentcount" toAttribute:@"commentCount"];
[poastMapping mapKeyPath:@"pointcount" toAttribute:@"pointCount"];
[poastMapping mapKeyPath:@"heartcount" toAttribute:@"heartCount"];
[poastMapping mapKeyPath:@"postcount" toAttribute:@"postCount"];
[poastMapping mapKeyPath:@"hearted" toAttribute:@"hearted"];
[poastMapping mapKeyPath:@"total" toAttribute:@"total"];
[poastMapping mapKeyPath:@"tags" toRelationship:@"tags" withMapping:tagMapping];

[[RKObjectManager sharedManager].mappingProvider addObjectMapping:poastMapping];
[[RKObjectManager sharedManager].mappingProvider setMapping:poastMapping forKeyPath:@"posts"];
[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:[poastMapping inverseMapping] forClass:[PoastObject class]]; 
```

这是发送请求的块（请注意，某些更改仅在附加图像时发生）

```
[[RKObjectManager sharedManager] sendObject:obj toResourcePath:@"/posts/submit" usingBlock:^(RKObjectLoader *loader) {
        loader.targetObject = nil;
        loader.delegate = self;
        loader.method = RKRequestMethodPOST;

        if([obj image]){
            RKObjectMapping* serializationMapping = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[PoastObject class]];
            NSError* error = nil;
            NSDictionary* dictionary = [[RKObjectSerializer serializerWithObject:obj mapping:serializationMapping] serializedObject:&error];
            RKParams* params = [RKParams paramsWithDictionary:dictionary];
            NSData* imageData =  UIImagePNGRepresentation([obj image]);
            [params setData:imageData MIMEType:@"image/png" forParam:@"image"];
            loader.params = params;
        }
    }]; 
```

当发送没有图像的请求时，'tags' 数组按预期以 'array' 类型到达 PHP。但是，当发送带有图像的请求时，标签数组以“字符串”类型出现，如下所示：

> （{ id = 2；name = Science；}，{ id = 4；name = Academics；}）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:04:30.727

我能找到的唯一方法是简单地将嵌套数组再次添加为该参数的 JSON 编码字符串，然后在服务器端添加 json_decode。仍然不确定为什么会发生此错误。

更新代码：

```
[[RKObjectManager sharedManager] sendObject:obj toResourcePath:@"/posts/submit" usingBlock:^(RKObjectLoader *loader) {

    loader.targetObject = nil;
    loader.delegate = self;
    loader.method = RKRequestMethodPOST;

    RKObjectMapping* serializationMapping = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[PoastObject class]];
    NSError* error = nil;
    NSDictionary* dictionary = [[RKObjectSerializer serializerWithObject:obj mapping:serializationMapping] serializedObject:&error];

    // grab the tag array
    NSArray *tags = [dictionary objectForKey:@"tags"];
    NSString *tagData = [tags JSONString];

    RKParams* params = [RKParams paramsWithDictionary:dictionary];

    // assign tags as a value in the parameters manually
    [params setValue:tagData forParam:@"tags"];

    // add image if it exists
    if([obj imageV]){
        NSData* imageData =  UIImageJPEGRepresentation([obj imageV], 0.75);
        [params setData:imageData MIMEType:@"image/jpg" forParam:@"image"];
    }

    loader.params = params;

}]; 
```

# ruby-on-rails - 在 Rails 中验证用户输入

> ID：12219051
> 
> 赞同：0
> 
> 时间：2012-08-31T16:12:11.213
> 
> 标签：ruby-on-rails, validation, input

我正在开发我的第一个 Rails 应用程序，并且遇到了检查用户输入的必要性。例如，有时当用户创建帐户时，他或她输入了几乎不能称为适当的数据。我找到了检查电子邮件和出生日期正确性的宝石，我想知道是否有类似的宝石用于用户名和其他字段。特别是，我需要一个可以检查使用肮脏语言的人。我已经有点厌倦了我网站上的“AnalAvenger666”。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:34:10.897

你可以试试 Intridea 的脏话过滤器

[https://github.com/intridea/profanity_filter](https://github.com/intridea/profanity_filter)

自己排除某些单词和单词模式并不难，但它是一个开始。

# c# - 使用 COM 对象的后台工作人员仍会锁定 UI

> ID：12219057
> 
> 赞同：2
> 
> 时间：2012-08-31T16:12:23.047
> 
> 标签：c#, multithreading, backgroundworker, threadpool, alm

所以我不知道如何问这个问题，这可能是我在任何地方都找不到答案的原因之一。

所以我的设置是我有一堂课

```
public class Connection
{
    public static event EventHandler LogggedIn;
    public static TDConnection TDC {get;set;}
    public string Authenticate(){...}
    public static void Login()
    {
        if (Connection.TDC.Connected)
        {
            _bw = new BackgroundWorker
            {
                WorkerReportsProgress = true,
                WorkerSupportsCancellation = true
            };
            _bw.DoWork += ConnectToProject_DoWork;
            _bw.RunWorkerCompleted += ConnectToProject_RunWorkerCompleted;

            _bw.RunWorkerAsync(Connection.TDC);
        }
    }

    private static void ConnectToProject_DoWork(object o, DoWorkEventArgs e)
    {
        Connection.TDC.ConnectProjectEx(Connection.Domain, Connection.Project, Connection.UserName, Utilities.Encryption.AESEncryption.Decrypt(Connection.Password, "fsd*#(dfs(((>>>???fdjs"));
    }

    private static void ConnectToProject_RunWorkerCompleted(object o, RunWorkerCompletedEventArgs e)
    {
        LogggedIn(null, new EventArgs());
    }
} 
```

在我的主类中，我实例化了一个新的 Connection 并调用 Login，这会在 TDConnection 中打开一个到 ALM 的新连接。在我的线程中，我想在我的线程内使用这个已经打开的连接。根据我的阅读，如果我这样做，我的 UI 将阻塞，因为我在 UI 线程上使用成员的方法，即使我在后台工作人员内部。

我发现一种解决方案可以做到这一点：

```
private static void ConnectToProject_DoWork(object o, DoWorkEventArgs e)
    {
        TDConnection conn = new TDConnection();
        conn.InitConnectionEx(QCURL);

        conn.Login();

        conn.ConnectProject();

        e.Result = conn;
    } 
```

我不希望这样做，因为我已经登录并且需要额外的时间来执行此操作。

我尝试使用 _bw.RunorkerAsync(Connection.TDC) 传递 Connection.TDC ，但这显然也不起作用。

有什么方法可以使用已经建立的连接并且在连接时不阻塞 UI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:54:25.937

这在 COM 对象中很常见。就像 .NET 类一样，许多 COM coclass 也不是线程安全的。在 .NET 中，如果您以线程不安全的方式使用 .NET 类，您将自食其果。不是在 COM 中，它*保证*以线程安全的方式使用标榜自己不是线程安全的 coclass。

它通过自动将工作线程的方法调用编组到创建对象的线程来实现。您可以看到它的去向，您在主线程上创建了 TDC 对象。所以当你从BackgroundWorker调用它时，它*仍然*会在主线程上执行调用。

解决此问题的唯一方法是在使用它的同一线程上创建对象。这通常也意味着您不能使用 BackgroundWorker，您可能需要创建一个 Thread 并调用其 SetApartmentState() 方法将其切换到 STA。

# google-chrome - 如何调试崩溃的 Chrome 浏览器扩展？

> ID：12219058
> 
> 赞同：28
> 
> 时间：2012-08-31T16:12:29.637
> 
> 标签：google-chrome, google-chrome-extension

我开发了一个 Chrome 浏览器扩展程序，但在极少数情况下它会崩溃（例如，右上角出现一个气泡，说明“_____ 已崩溃！单击此处重新加载它。”）

问题是，当它这样做时，background.html 立即消失（死亡），我找不到任何信息来帮助我调试出了什么问题。我打开了 chrome://crashes 并看到那里有可能与我的问题相对应的条目，但崩溃日志只给了我一个链接来提交错误报告（无法下载或查看日志）。

根据[这个关于查找崩溃日志的 Goole 条目，](http://support.google.com/chrome/bin/answer.py?hl=en&answer=107788)我发现了一些 .dmp 文件，但它们本质上是不可读的（.dmp 文件似乎是某种未符号化的堆栈跟踪，或类似性质的东西）。

有人有调试 Chrome 扩展程序崩溃的好方法吗？

* * *

编辑：经过进一步调查，我确定 chrome://crashes 与我的扩展崩溃无关。我刚刚发生了崩溃，但 chrome://crashes 中的最新时间戳是几个小时前的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-02T06:50:58.047

[我曾经遇到过类似的问题](http://geek.michaelgrace.org/2012/08/advanced-google-chrome-logging/)，并且能够通过启用详细日志记录启动 chrome 来找出问题的根源。要在 Mac 上使用详细日志记录启动 Google Chrome，您需要打开终端并运行类似于以下内容的内容：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --enable-logging --v=1& 
```

然后通过拖尾日志文件来观察调试日志文件。

```
tail -f ~/Library/Application\ Support/Google/Chrome/chrome_debug.log 
```

在 Ubuntu 上尝试：

```
tail -f ~/.config/google-chrome/chrome_debug.log 
```

它非常健谈，但可能足以帮助您解决问题。

![在此处输入图像描述](../Images/a12bd395733e34ca17cf929215e388eb.png)

# c++ - DLL 注入：DrawText 和 TextOut 不返回所有文本

> ID：12219061
> 
> 赞同：0
> 
> 时间：2012-08-31T16:12:43.390
> 
> 标签：c++, dll-injection, drawtext, textout

我成功地将我的 DLL 注入到程序中。但是我想从 ListBox 中获取信息。WM_GETTEXT 不起作用，所以我不得不进行 dll 注入。我收到大量文本，但从所需的控制中我什么也没有。

这是我的代码：

```
#include <Windows.h>
#include "detours.h"
#include <tchar.h>
#include <stdio.h>
// Function pointer to the original (un-detoured) DrawText API
int (WINAPI * Real_DrawText)(HDC a0, LPCWSTR a1, int a2, LPRECT a3, UINT a4) = DrawTextW;
int (WINAPI * Real_TextOut)(HDC hdc, int nXStart, int nYStart, LPCTSTR lpString, int cchString) = TextOutW;

void writeToFile(LPCWSTR text)
{
    FILE *out;

    if (!(out = fopen("C:\\OUTPUT\\out.txt", "a+"))) {
        MessageBox (0,  TEXT("ERROR FILE"),  TEXT("ERROR FILE"), MB_ICONINFORMATION);
        return;
    }
    fwprintf(out, text);
    fclose(out);
}
// Our custom version of DrawText
int WINAPI Mine_DrawText(HDC hdc, LPCWSTR text,  int nCount, LPRECT lpRect, UINT uOptions)
{

    int rv = Real_DrawText(hdc, text, nCount, lpRect, uOptions);

    WideCharToMultiByte(CP_ACP, WC_DEFAULTCHAR, text, -1, txt, 0, NULL, NULL);
    writeToFile(text);
    return rv;
}

int WINAPI Mine_TextOut(HDC hdc, int nXStart, int nYStart, LPCTSTR lpString, int cchString) {

    int rv = Real_TextOut(hdc, nXStart, nYStart, lpString, cchString);

    writeToFile(lpString);

    return rv;
}

// Install the DrawText detour whenever this DLL is loaded into any process...
BOOL APIENTRY DllMain( HANDLE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved  )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        MessageBox (0,  TEXT("From DLL\n"),  TEXT("Process Attach"), MB_ICONINFORMATION);
        DetourTransactionBegin(); 
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)Real_DrawText, Mine_DrawText); // <- magic
        DetourAttach(&(PVOID&)Real_TextOut, Mine_TextOut);
        DetourTransactionCommit();
        break;

    case DLL_PROCESS_DETACH:
        MessageBox (0,  TEXT("From DLL\n"),  TEXT("Process Detach"), MB_ICONINFORMATION);
        DetourTransactionBegin(); 
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)Real_DrawText, Mine_DrawText);
        DetourTransactionCommit();
        break;
    }

    return TRUE;
} 
```

我的问题是：有什么我想念的吗？我的意思是还有其他方法可以从应用程序中获取文本吗？因为当我做我的研究时，这应该给我程序中的所有文本。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:24:58.357

你真正想做的是什么？您似乎想抓取在另一个程序中运行的列表框的内容。您是否尝试过简单地将[LB_GETTEXT](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761313%28v=vs.85%29.aspx)消息发送到列表框？

# kinect - 在 Visual Studio UI 中按下停止按钮时停止 Kinect？

> ID：12219065
> 
> 赞同：2
> 
> 时间：2012-08-31T16:13:03.753
> 
> 标签：kinect, shutdown

我在 WPF 应用程序中使用 Kinect，Dan Fernández 在他的快速入门视频系列中教我们如何在调用事件“Window_Closing”（这是 C# 中的新功能，我猜它是委托或事件处理程序）时停止传感器。问题是，如果我按下 Visual Studio UI 中的停止按钮停止运行，我的 Kinect 不会停止，然后我必须再次运行应用程序并单击 X 按钮将其关闭。

有没有更通用的方法来通过我的代码中的应用程序关闭事件来停止 Kinect？

谢谢你。

```
 void StopKinect(KinectSensor sensor) {
        if (sensor != null) {
            sensor.Stop();

            if (sensor.AudioSource != null)
            {
                sensor.AudioSource.Stop();
            }
        }
    }

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        StopKinect(kinectSensorChooser1.Kinect); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:20:42.360

当您单击 VS 上的停止按钮时，您会中断该过程。所以永远不会调用 Windows_Closing 事件。Kinect 不会停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:17:54.170

您如何定义 Kinect 传感器是否已停止？

我建议在您用来停止 Kinect 的方法周围添加异常处理。

```
try
{
   StopKinect(kinectSensorChooser1.Kinect); 
}
catch(Exception ex)
{
   //Log Exception
} 
```

如果应用程序在尝试停止 Kinect 传感器时抛出未处理的异常，这将为您提供一种识别它的方法。

您能否确认`Window_Closing`事件是否触发？在函数中添加一个断点，如果没有命中，那么你就会知道问题所在。另一种方法可能是使用 @Bob 建议的不同事件清理 Kinect 传感器。当 VS 停止调试时，进程可能会被终止，因此您包含清理代码的事件可能不会被调用。

# javascript - Flowplayer 视频在后台隐藏跨度中持续播放

> ID：12219068
> 
> 赞同：0
> 
> 时间：2012-08-31T16:13:13.943
> 
> 标签：javascript, php, flowplayer, video-player

这是索引文件（javascript）

```
$(document).ready(function(){
    player("video-1.mov","player1");
    player("video-2.mov","player2");
    player("video-3.mov","player3");
});

function player(video,id) {
    flowplayer(id, "http://releases.flowplayer.org/swf/flowplayer-3.2.14.swf", {
        playlist: [video],
        clip:  {
              autoPlay: true,
              autoBuffering: true
        }
    });
}

function goto_next(current,page)
{
    $('#'+current).hide();
    $('#'+page).show();
    flowplayer.unload();
} 
```

这是索引文件

```
<span id="1" class="step">
    <div class="player formplayer" id="player1"></div>
</span>
<span id="2" class="step" style="display:none;">
    <div class="player formplayer" id="player2"></div>
</span>
<span id="3" class="step" style="display:none;">
    <div class="player formplayer" id="player3"></div>
</span> 
```

当我单击下一个按钮时，它将调用 goto_next 并使用两个不同的 id 来显示/隐藏。但是，上一个跨度的视频在后台继续播放。 **如何停止所有其他视频并仅播放当前视频？**

PS：它在 Windows 上运行良好：chrome、firefox。

但是mac上的firefox有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:45:49.760

[尝试使用 javascript api ( http://flowplayer.org/documentation/api/index.html](http://flowplayer.org/documentation/api/index.html) )的 stop() 函数停止播放器

```
function goto_next(current,page)
{
    flowplayer(0).stop();
    flowplayer(1).stop();
    flowplayer(2).stop();
    $('#'+current).hide();
    $('#'+page).show();
    flowplayer.unload();
} 
```

# php - 带有 htaccess 的漂亮 URL

> ID：12219074
> 
> 赞同：1
> 
> 时间：2012-08-31T16:13:32.507
> 
> 标签：php, .htaccess, url

> **可能重复：**
> [htaccess rewrite 破坏了相对路径](https://stackoverflow.com/questions/3899991/htaccess-rewrite-breaks-relative-paths)

我希望有人能帮助我。我正在尝试将我的网站设置为使用漂亮的 URL。

我目前有一些 htaccess 命令可以隐藏包含我所有 php 文件的子域文件夹以及将我的协议从 http 更改为 https 的命令，反之亦然。漂亮的网址被证明是困难的。我只想通过 htaccess 而不是 php 来完成。我设法编写了一个有效的命令，但在那之后我的 css 或 javascript 都不起作用。

```
# Redirect from website.com to www.website.com
RewriteCond %{HTTP_HOST} ^website.com [NC]
RewriteCond %{HTTP_HOST} !^www [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# redirect url to www
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /defaultfolder/([^\ ]+)\ HTTP/
RewriteRule ^(.*)$ defaultfolder/error.php [L]

#this section hides the defaultfolder, tried to modify this code here to make friendly urls.
RewriteCond %{HTTP_HOST} www.website.com
RewriteCond %{REQUEST_URI} !defaultfolder/
RewriteCond %{REQUEST_URI} !images/
RewriteRule ^(.*)\/$ defaultfolder/$1\.php [L]

#https redirect
RewriteCond %{SERVER_PORT} 80
RewriteCond %{REQUEST_URI} (/defaultfolder/)(login|securepages|pages)\.php
RewriteRule ^defaultfolder/(.*)$ https://www.website.com/$1 [R,L]

#http redirect
RewriteCond %{SERVER_PORT} 443
RewriteCond %{REQUEST_URI} (/defaultfolder/)(index|nonsecure pages)\.php
RewriteRule  ^defaultfolder/(.*)$ http://www.website.com/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:19:43.273

> 在那之后，我的 css 或 javascript 都没有工作。

这可能是一个相对/绝对路径问题。当您更改 URL 的路径时，相对链接将会中断，因为基础已更改。您可以添加一些规则来将 css/js 请求指向正确的位置，或者尝试使用`<base>`页面标题中的标签添加正确的基础。就像是：

```
<base href="/"> 
```

否则你可能不得不重写 css 和 js 的解析方式。例如，你有你所有的样式`/css/`和你的所有脚本`/js/`：

```
RewriteCond %{REQUEST_URI} !^/css/
RewriteRule ^(.*\.css)$ /css/$1 [L]

RewriteCond %{REQUEST_URI} !^/js/
RewriteRule ^(.*\.js)$ /js/$1 [L] 
```

* * *

```
<head><link rel="stylesheet" type="text/css" href="css/main.css" media="all"/> 
```

> 这是在主子文件夹中

所以这意味着你需要这样的规则：

```
RewriteCond %{REQUEST_URI} !/defaultfolder/
RewriteRule ^(css|js)/(.*)\.(css|js)$ defaultfolder/%1/%2.%3 [L] 
```

# c++ - 如何以编程方式在 WinRT C++ Direct3D 应用程序中创建文本框？

> ID：12219076
> 
> 赞同：1
> 
> 时间：2012-08-31T16:13:41.353
> 
> 标签：c++, windows-runtime, direct3d11

我在 Windows 8 上的 VS2012 中创建了一个新项目：**Visual C++ | Windows Metro 风格 | Direct3D 应用程序**。

默认情况下，这会创建一个工作 D3D 应用程序，其主应用程序类`Direct3DApp1`派生自`Windows::ApplicationModel::Core::IFrameworkView`.

我需要以编程方式创建一个`Windows::UI::Xaml::Controls::TextBox`并以某种方式将其插入到这个视图中。这在定义 XAML 的其他项目类型中似乎很容易做到，但这种 Direct3D App 项目类型没有 XAML。

**如何在允许用户弹出键盘并输入文本的 Direct3D 图形上覆盖 TextBox？**

扩展默认项目的完整工作 VS2012 解决方案`Direct3D App`会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:11:58.533

这在 Marble Maze 示例中得到了证明（可能还有其他 DirectX 示例，因为它在 DirectXApp 类中）

[http://code.msdn.microsoft.com/windowsapps/DirectX-Marble-Maze-Game-e4806345](http://code.msdn.microsoft.com/windowsapps/DirectX-Marble-Maze-Game-e4806345)

[http://msdn.microsoft.com/en-us/library/windows/apps/br230257(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230257(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T22:48:40.497

当然，为时已晚，但以防万一，您需要先初始化 XAML 应用程序，然后再使用 XAML 控件：

```
 (void)args; // Unused parameter
::Windows::UI::Xaml::Application::Start(ref new ::Windows::UI::Xaml::ApplicationInitializationCallback(
    [](::Windows::UI::Xaml::ApplicationInitializationCallbackParams^ p) {
        (void)p; // Unused parameter
        auto app = ref new ::MyApp::App();
    })); 
```

并设置 Windows::UI::Xaml::Window::Current->Content

有关更多信息，请参阅[http://developernote.com/2015/12/initialization-of-uwp-c-xaml-application/](http://developernote.com/2015/12/initialization-of-uwp-c-xaml-application/)。

我不确定 Windows::ApplicationModel::Core::IFrameworkView 是否可以与此初始化场景共存，因此您可能需要稍微重构代码。

# .net - IIS 6 - 保护静态文件（www 和不带 www）

> ID：12219079
> 
> 赞同：0
> 
> 时间：2012-08-31T16:13:52.437
> 
> 标签：.net, web-config

我们在 IIS 6 上有 ASP.Net 应用程序。它托管在我无法访问的某些服务器上。我们希望帮助文件夹中的静态文件（*.html、*.htm）受到保护（它们需要进行身份验证，因此我们需要将 html 和 htm 文件视为 aspx 文件）。

我在这里找到了一篇文章 - [http://forums.asp.net/t/1184547.aspx](http://forums.asp.net/t/1184547.aspx)（表单身份验证和 HTML 页面的 IIS 问题）。然后我写信给托管公司，他们为 IIS 6 创建了 html 和 htm 文件映射。其次，我配置了我的 web.config 文件，正如上面文章中所写的那样。结果像[https://www.mypage.com/help/static.html](https://www.mypage.com/help/static.html)这样的链接受到保护（用户被重定向到登录页面）。

但是，像[https://mypage.com/help/static.html](https://mypage.com/help/static.html)这样的链接不受保护（用户不会被重定向到登录页面）。我在网上没有发现任何类似的问题。

1）我想知道，什么会导致这个问题？是 IIS 6 配置不正确还是我应该更改我的 web.config？

2）我写信给托管服务，他们建议我阅读有关 URLRewriting 的内容。我不觉得这是关于 UrlRewriting 的事情，或者是吗？我现在不使用任何 url 重写，应该吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:21:39.963

主机可能会通过主机标头解析您的站点，并显式查找较长的 URL，即使 mypage.com URL 已解析。后者没有作为受保护的引用被捕获，因此它绕过了他们的检查。但是，您可以做的是编写一段代码来检查所请求的入站 URL，如果您看到“短”版本，请将 URL 重定向到应该得到正确身份验证/路由的全名想要。您甚至可以在 web.config 文件中配置基本的重写。

[在这个位置](http://msdn.microsoft.com/en-us/library/ms972974.aspx)有一个相当不错的主题摘要。您可能会发现 web.config 示例是在您的情况下尝试的最佳首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:22:27.207

IIS6 与 IIS7 的工作方式不同；在 IIS6 下，该`web.config`文件仅控制 ASP.NET 的工作方式，而不是 IIS，而在 IIS7 中，您可以`<system.webServer>`配置 IIS 的配置方式。

其次，IIS7（默认情况下）调用“托管管道”，它有效地允许 ASP.NET 修改任何传入 HTTP 请求的各个方面，这就是 ASP.NET URL Routing 的工作原理（因为 Routing HTTP 模块检查每个传入的 HTTP 请求，如果它与现有资源不匹配，则您的 ASP.NET 应用程序会处理它）。

关于您的实际问题，我们需要更多细节。听起来您的主机创建了两个虚拟网站（一个处理“www.mysite.com”，另一个处理“mysite.com”，并且保护仅适用于“www”站点）。另一种解释是仅当主机头是“www.mysite.com”而不是也接受“mysite.com”（或任何其他主机头）时保护文件检查的规则。

URL 重写在这里对您没有帮助。如果您的主机建议那么它告诉我他们可能不知道他们在做什么（此外，IIS6 不支持没有第三方扩展的 URL 重写）。

# java - 首次使用 netbeans 设置 maven

> ID：12219080
> 
> 赞同：1
> 
> 时间：2012-08-31T16:13:54.647
> 
> 标签：java, maven

所以我有一个现有的（参见：已完成的）项目，我正试图将它变成基于 Netbeans 7.2 的基于 Maven 的项目（我认为它与 Maven 3 捆绑在一起），我似乎无法找到关于该主题的有用指南。

Maven 需要在某处的服务器上运行还是仅在客户端运行？我是否必须更改我的颠覆中的任何内容以指向其他地方？我需要更改属性/等中的任何内容吗？

对此的任何帮助将不胜感激，因为似乎大多数 Maven 指南并非针对 Windows 用户/不熟悉 Maven 的人。

谢谢！

# ruby-on-rails - 如何将此标头添加到 Rails 3 ActionMailer？

> ID：12219084
> 
> 赞同：0
> 
> 时间：2012-08-31T16:14:02.163
> 
> 标签：ruby-on-rails, email, actionmailer

我正在尝试为我的应用程序设置 SendGrid，我想做的一件事是让 SendGrid 对电子邮件进行分类。

为此，他们说将此标头添加到外发电子邮件中：`X-SMTPAPI: {"category": "Category Name"}`

那么，我如何将该标头添加到 ActionMailer 方法中（因为每个类别都是唯一的，所以它会添加到每个方法中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:36:56.840

您应该能够将其直接添加到邮件对象的标头哈希中

标头：{'X-SMTPAPI'：{“类别”：“类别名称”}}

我可能已经引用了一个报价，但重点是您可以完全访问邮件消息的标题 - 哎呀，这就是：和主题：是 - 电子邮件标题

# ruby-on-rails - 我可以使用 RSpec 来测试部署的站点吗？

> ID：12219085
> 
> 赞同：3
> 
> 时间：2012-08-31T16:14:04.033
> 
> 标签：ruby-on-rails, testing, rspec

首先我应该说，我不太擅长测试我的代码，而且直到最近我才开始这样做。

所以我有这个 Rails 应用程序。它基本上是一个 API 端点。它接受请求并吐出 JSON。有很好的（我希望）测试覆盖率可以测试大部分功能。

现在我们正在部署一个暂存环境，并希望让负载测试人员（独立部门）“玩”它。我想非常确定我们是否正确部署了它。

我可以针对这个暂存部署运行 RSpec 的请求规范吗？人们会做这种测试吗？什么是最佳实践？我应该读什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T16:44:05.017

是的，您可以使用 Rspec 和 Capybara 测试部署的站点。您需要像这样更改配置：

1.  将驱动程序更改为或`:webkit`，因为默认驱动程序 ( ) 不支持针对远程服务器运行。`:selenium``:poltergeist``:rack_test`

    ```
    Capybara.javascript_driver = :selenium 
    ```

2.  设置 app_host。

    ```
    Capybara.app_host = 'http://example.com' 
    ```

3.  关闭本地服务器。

    ```
    Capybara.run_server = false 
    ```

之后，您可以使用 Capybara DSL 为已部署的服务器创建测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-17T13:03:01.397

您可以在没有 Rails 的情况下运行 rspec，并使用 rest-client 和 json gem 来测试远程 REST 端点。

（我已经使用此方法为带有 REST api 的 Java 应用程序生成可读测试。）

# python - 无法在我的扭曲网络资源中测试 reactor.callInThread

> ID：12219087
> 
> 赞同：2
> 
> 时间：2012-08-31T16:14:04.673
> 
> 标签：python, twisted, pytest, twisted.web

我有一个扭曲的 Web 资源，它处理传入的请求并发送要在队列中处理的 celery 任务，这个 celery 调用是使用 reactor.callInThread 处理的

问题是我想对这段代码进行单元测试，但是像下面这样的简单 TestCase 失败了，因为 reactor.callInThread 中的代码从未执行过

```
from twisted.internet.defer import succeed
from twisted.web import server
from twisted.web.resource import Resource
from twisted.web.test.test_web import DummyRequest
from twisted.internet.defer import inlineCallbacks
from twisted.trial.unittest import TestCase
from twisted.internet import reactor

import pytest

class BadBeConnectedResultType(Exception):
    pass

class SmartDummyRequest(DummyRequest):
    def __init__(self, method, url, args=None, headers=None):
        DummyRequest.__init__(self, url.split('/'))
        self.method = method
        self.headers.update(headers or {})

        # set args
        args = args or {}
        for k, v in args.items():
            self.addArg(k, v)

    def value(self):
        return "".join(self.written)

class DummySite(server.Site):
    def get(self, url, args=None, headers=None):
        return self._request("GET", url, args, headers)

    def post(self, url, args=None, headers=None):
        return self._request("POST", url, args, headers)

    def _request(self, method, url, args, headers):
        request = SmartDummyRequest(method, url, args, headers)
        resource = self.getResourceFor(request)
        result = resource.render(request)
        return self._resolveResult(request, result)

    def _resolveResult(self, request, result):
        if isinstance(result, str):
            request.write(result)
            request.finish()
            return succeed(request)
        elif result is server.NOT_DONE_YET:
            if request.finished:
                return succeed(request)
            else:
                return request.notifyFinish().addCallback(lambda _: request)
        else:
            raise ValueError("Unexpected return value: %r" % (result,))

class TwistedBCTestCase(TestCase):
    def setUp(self):
        self.web = DummySite(RootResource())

    @inlineCallbacks
    def test_bc_resource(self):
        with pytest.raises(BadBeConnectedResultType):
            response = yield self.web.post("CLARO", args={
                'ResultType':2,
                'ResultData':1,
                'idDeliver': 1
            })

class RootResource(Resource):

    def render_GET(self, request):
        return ''

    def getChild(self, operator_id, request):
        if operator_id:
            return BCResource(operator_id)

        return self

class BCResource(Resource):

    def __init__(self, operator_id):
        Resource.__init__(self)
        self.operator_id = operator_id

    def send_to_queue(self, request):
        #This is never executed in my test
        try:
            result_type = cgi.escape(request.args['ResultType'][0])
            if result_type != '1':
                raise BadBeConnectedResultType(result_type)

            raw_result_data = cgi.escape(request.args['ResultData'][0])
            unique_id = cgi.escape(request.args['IdDeliver'][0])

            task = ProcessBCNotificationTask.delay(unique_id, raw_result_data)

        except BadBeConnectedResultType as e:
            logger.exception(e)

    def render_POST(self, request):
        reactor.callInThread(self.send_to_queue, request)
        return '' 
```

作为记录，我使用[http://findingscience.com/python/twisted/2012/02/20/testing-twisted-web-resources.html](http://findingscience.com/python/twisted/2012/02/20/testing-twisted-web-resources.html)中描述的方法来测试网络资源

```
$ py.test twisted_test.py --tb=short
====================================================================================== test session starts ======================================================================================
platform linux2 -- Python 2.7.3 -- pytest-2.2.4
collected 1 items 

twisted_test.py F

=========================================================================================== FAILURES ============================================================================================
______________________________________________________________________________ TwistedBCTestCase.test_bc_resource _______________________________________________________________________________
env/lib/python2.7/site-packages/twisted/internet/defer.py:1045: in _inlineCallbacks
>                   result = g.send(result)
twisted_test.py:69: in test_bc_resource
>               'idDeliver': 1
E   Failed: DID NOT RAISE
=================================================================================== 1 failed in 0.30 seconds ==================================================================================== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:04:28.043

`reactor`在测试期间未运行，因此没有线程池。您可以先拨打[虚拟](https://github.com/powdahound/twisted/blob/203d269964607fbabb232f26cff03000eece9439/twisted/test/test_threads.py#L33)[电话](https://github.com/powdahound/twisted/blob/203d269964607fbabb232f26cff03000eece9439/twisted/test/test_threads.py#L33)`reactor.callInThread`进行测试。[`threads.deferToThread`](https://github.com/powdahound/twisted/blob/203d269964607fbabb232f26cff03000eece9439/twisted/test/test_threads.py#L33)

# vb.net - sqlbulkcopy - 不允许 DBNull.Value.?

> ID：12219091
> 
> 赞同：8
> 
> 时间：2012-08-31T16:14:17.227
> 
> 标签：vb.net, sqlbulkcopy

我在下面尝试这 2 个调用，但它们都返回一个异常 Customer_ID 不允许 DBNull.Value。但是当我调试时，我看到我的所有记录都分配了 Customer_ID。它是唯一一个在我的数据库表上定义的不可为空的。是什么导致了这个错误？

```
 bulkCopy.WriteToServer(myBookingDataTable)

   bulkCopy.WriteToServer(myBookingss.ToArray()) 
```

这是我的整个代码。

```
 Using myConnection As SqlConnection = _
                New SqlConnection(connectionString)
                myConnection.Open()

                Using bulkCopy As SqlBulkCopy = _
                  New SqlBulkCopy(My.Settings.ConnectionString(), SqlBulkCopyOptions.Default)

                    bulkCopy.DestinationTableName = "dbo.Booking"

                    Try
                        ' Write from the source to the destination.
                         bulkCopy.WriteToServer(myBookingDataTable)

                        'bulkCopy.WriteToServer(myBookingss.ToArray())

                    Catch ex As Exception
                        Console.WriteLine(ex.Message)

                    Finally

                        bulkCopy.Close()
                    End Try
                End Using 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T14:48:00.907

确保源和目标中字段的顺序相同。

# php - php soap maxoccurs=无界

> ID：12219096
> 
> 赞同：6
> 
> 时间：2012-08-31T16:14:46.967
> 
> 标签：php, soap, wsdl

我有 WSDL，

```
<xs:complexType name="merchantDetails"><xs:sequence>
<xs:element maxOccurs="unbounded" minOccurs="0" name="did" nillable="true" type="xs:string"/>
<xs:element maxOccurs="unbounded" minOccurs="0" name="flowid" nillable="true" type="xs:string"/> 
```

我正在尝试按如下方式发送数组（var_dump）。

```
object(merchantDetails)#3 
  ["did"]=>
  array(1) {
    [0]=>
    string(8) "81985801"
  }
  ["flowid"]=>
  array(1) {
    [0]=>
    string(16) "MerchantMOTOMID1"
  } 
```

但是`__getLastRequest`输出没有显示 did 或 的任何标签`flowID`。

如果如何发送未绑定的数据，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T19:20:41.693

如果我正确阅读了 WSDL 指令，以下应该可以解决问题。发布所需的 SOAP 请求将非常有帮助......

```
$param = array(
  'did'=>'81985801',
  'flowid'=>'MerchantMOTOMID1'
)

$soap_instance->merchantDetails($param); 
```

或者

```
$param = new stdObject();
$param->did = '81985801';
$param->flowid = 'MerchantMOTOMID1';

$soap_instance->merchantDetails($param); 
```

其中任何一个都没有经过测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:17:45.760

将 maxOccurs 设置为有界

确切地说，请发布您的完整源代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T13:23:53.730

```
//You should try to send like this

$arOperationFilter = array(
    'did' => array('81985801','81985802','...')
);

$client = new SoapClient($your_url, $arSoapOptions);

$result = $client->yourSoapOperation($arOperationFilter); 
```

# php - PHP 等待 WSDL (Salesforce) 进程完成

> ID：12219097
> 
> 赞同：0
> 
> 时间：2012-08-31T16:14:50.153
> 
> 标签：php, concurrency, wsdl, salesforce

我将 Php 与 Salesforce WSDL API 一起使用。

我要做的是一个 PHP 页面做几件事。

1.  通过 WSDL 创建通知到 Salesforce 并让它返回一个 ID。
2.  使用创建的 Id 分配给变量，以便它可以通过 WSDL 将记录更新到 Salesforce

    function createRecord($Object, $FieldData){ //通过连接到 Salesforce 来变魔术，返回 $Id; }

    $newRecord = 创建记录（）；

    $record->contact__c = $newRecord; $sfConn->update(array($record), 'Campaign');

因此，假设 $newRecord 从函数 createRecord 获取赋值，有时会发生 createRecord 处理速度不够快，因此 $newRecord 获取 NULL 赋值。

我可以做些什么来确保 createRecord 在调用“$record->contact__c”之前完成执行？

* * *

在 createRecord($Object, $FieldData) 中是这段代码

```
$sfConn2 = new SforceEnterpriseClient();
$sfClient = $sfConn2->createConnection(WSDL_FILE);
$sfLogin = $sfConn2->login(SF_UN, SF_PW);

        $newRec = new stdclass();           
        foreach ($FieldData as $key => $value){
            $newRec->$key = $value;
        }

            $createResponse = $sfConn2->create(array($newRec), $Object);

            if($createResponse->success == 1){
               return $createResponse->id;  
            }else{
               return FALSE;
            } 
```

那么最可能的罪魁祸首是createRecord中存在异常，例如drop connection？

如果是这样，在将 createRecord 分配给 $newRecord 变量期间，我应该在 createRecord 函数内还是在它之外处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:25:21.433

您应该尽可能使用salesforce api 的[异常](http://php.net/manual/en/language.exceptions.php)，因为我注意到有时会发生 HTTP 错误并且连接可能会随机断开。这样，您可以测试返回的 SOAP 调用并确保它们没有失败并具有正确的值。

您应该使用[SalesForce 的 PHP 工具包](https://github.com/developerforce/Force.com-Toolkit-for-PHP)来减少已知问题，而不必自己编写代码：[https ://github.com/developerforce/Force.com-Toolkit-for-PHP](https://github.com/developerforce/Force.com-Toolkit-for-PHP)

例如，如果您尝试插入/创建联系人/潜在客户对象，并且您在函数[`create`](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_create.htm)内部使用 sales force 命令，`createRecord()`那么使用 SalesForce 命令会更好/更安全[`upsert`](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_upsert.htm)。

如果您需要更多帮助，那么您需要显示一些代码。

# java - 正则表达式检查数字和字母

> ID：12219099
> 
> 赞同：2
> 
> 时间：2012-08-31T16:15:00.353
> 
> 标签：java, regex

我正在尝试匹配仅包含带有逗号的数字和带有连字符的数字的字符串，例如，

应该匹配，

```
 22-10,3,34-2,16
   22,10,3,34,2,16
   22-10-3-34-2-16
   23-10,6 
```

不应该匹配，

```
 4ABS-NTts
   ABS,NT
   2 
```

任何帮助都会非常有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:16:47.967

尝试这个：

```
^(?:[0-9]+[,-])+[0-9]+$ 
```

**解释：**

```
^         # Start of string
(?:       # Try to match:
 [0-9]+   #  one or more digits
 [,-]     #  one separator (- or ,)
)+        # once or more.
[0-9]+    # Match one or more digits
$         # End of string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:36:25.720

尝试这个：

```
^(?:\d+[,-]?)+\d+$ 
```

它也匹配裸数字`23`。
您可以在[此站点](http://www.regular-expressions.info/javascriptexample.html)中对其进行测试。

# javascript - CORS DELETE 失败并出现 403 状态码

> ID：12219103
> 
> 赞同：1
> 
> 时间：2012-08-31T16:15:13.020
> 
> 标签：javascript, ajax, sinatra, rack, cors

我开发了一个 CORS REST 服务器和一些页面，其中包含一些调用其 url 的 JS 代码。

我决定重构 JS 页面，我对服务器的 DELETE ajax 请求现在不再起作用了。部分重构涉及从`http://localhost/dev`to传递的 URL `http://dev.local`。我在允许的请求来源中添加了新的 url，实际上我的`GET`路由仍然可以正常工作。

`DELETE`相反，现在不允许（预检时为 403），我不明白我的错误在哪里。

从开发人员的角度来看，这里是`OPTIONS`和`DELETE`转储：

```
Request URL:http://localhost:9292/users/101
Request Method:OPTIONS
Status Code:200 OK
Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, accept
Access-Control-Request-Method:DELETE
Cache-Control:no-cache
Connection:keep-alive
Host:localhost:9292
Origin:http://dev.local
Pragma:no-cache
Referer:http://dev.local/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Response Headers
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:origin, accept
Access-Control-Allow-Methods:PUT, OPTIONS, DELETE, GET, POST
Access-Control-Allow-Origin:http://dev.local
Access-Control-Expose-Headers:Content-Type
Access-Control-Max-Age:1728000
Connection:close
Content-Type:text/plain
Server:thin 1.3.1 codename Triple Espresso 
```

以包含“禁止”的有效负载响应。这里的要求`DELETE`：

```
Request URL:http://localhost:9292/users/101
Request Method:DELETE
Status Code:403 Forbidden
Request Headers
DELETE /users/101 HTTP/1.1
Host: localhost:9292
Connection: keep-alive
Cache-Control: no-cache
Origin: http://dev.local
Pragma: no-cache
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://dev.local/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: fbsr_348362375211512=r2WOBYNXrmyP6lKJ7JVAnlU9gfLjela8jRSarGHvQ-M.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImNvZGUiOiJBUURSRDhOckJ2YnI0MlFLTk5vblhiOGNVcjVXTFpHTDNMcVBjYl9PXzFqd3hKS0tlWFZ1cFVVMi03OXNxOU1BcjFGV2RxTzVtV0RSTllXbkxKcndUQmtZOFpMS3VmeWt0b05xU3ctVzdqNk4zVHBFQVZOM3ZlRzFKeW5lRWpiRkxSdXlPNHpGMDNVd255RFZqZ0xOdHQwMTJCUWVvb0NSR1ZSTVUtQkVhS1ZtaGtKZGdKck5RSDUwWHhQVW5wT1MyY0EiLCJpc3N1ZWRfYXQiOjEzNDY0MjUyMzgsInVzZXJfaWQiOiIxMDI5MDk2MTIzIn0; oauth2-token=; rack.session=BAh7CUkiD3Nlc3Npb25faWQGOgZFRiJFNTc3ZTMxZGZjNWUxYWNhZDU3NWUw%0ANjJkMDBkMDRiNmMxOWI0ODE5Yjk5YjMwMWI3YTMyOTM1ZjVmZWMyMGY1ZEki%0ADXRyYWNraW5nBjsARnsISSIUSFRUUF9VU0VSX0FHRU5UBjsARiItZGY1ZDgz%0AMzMyYTg4ZjBkNGY1ZGU0MGNjNzljMDhkNTUzZDJkMjkxNUkiGUhUVFBfQUND%0ARVBUX0VOQ09ESU5HBjsARiItZWQyYjNjYTkwYTRlNzIzNDAyMzY3YTFkMTdj%0AOGIyODM5Mjg0MjM5OEkiGUhUVFBfQUNDRVBUX0xBTkdVQUdFBjsARiItY2M5%0AZjZmZWM2NTJhNDI1OGJjNmQyOTI4NzA1MjE3OWFiMWUwZDE0N0kiB2lkBjsA%0ARmlqSSIObG9nZ2VkX2luBjsARlQ%3D%0A--c1a452275c10bd0ebe0e21fe7925d1fe7349c46f
Response Headers
HTTP/1.1 403 Forbidden
X-Frame-Options: sameorigin
Content-Type: text/plain
Set-Cookie: rack.session=BAh7CkkiD3Nlc3Npb25faWQGOgZFRiJFNTc3ZTMxZGZjNWUxYWNhZDU3NWUw%0ANjJkMDBkMDRiNmMxOWI0ODE5Yjk5YjMwMWI3YTMyOTM1ZjVmZWMyMGY1ZEki%0ADXRyYWNraW5nBjsARnsISSIUSFRUUF9VU0VSX0FHRU5UBjsARiItZGY1ZDgz%0AMzMyYTg4ZjBkNGY1ZGU0MGNjNzljMDhkNTUzZDJkMjkxNUkiGUhUVFBfQUND%0ARVBUX0VOQ09ESU5HBjsARiItZWQyYjNjYTkwYTRlNzIzNDAyMzY3YTFkMTdj%0AOGIyODM5Mjg0MjM5OEkiGUhUVFBfQUNDRVBUX0xBTkdVQUdFBjsARiItY2M5%0AZjZmZWM2NTJhNDI1OGJjNmQyOTI4NzA1MjE3OWFiMWUwZDE0N0kiB2lkBjsA%0ARmlqSSIObG9nZ2VkX2luBjsARlRJIgljc3JmBjsARiJFNWRjMjdjZThkNTM0%0ANWFhMTU3OGQ2ZDk3NGJjYjZjZGMzMzEwOTFiNTg5OTk1YTMyYTYxOTMzMTgy%0AMTU0N2E2ZA%3D%3D%0A--578809491df1629d183c98a530ccbcf925000b6e; path=/; HttpOnly
Access-Control-Allow-Origin: http://dev.local
Access-Control-Allow-Methods: PUT, OPTIONS, DELETE, GET, POST
Access-Control-Expose-Headers: Content-Type
Access-Control-Max-Age: 1728000
Access-Control-Allow-Credentials: true
Vary: Origin
Connection: close
Server: thin 1.3.1 codename Triple Espresso 
```

有什么想法或建议来确定问题吗？

谢谢，达里奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:16:00.743

在搜索和 monsur 的建议后（他帮助我意识到客户端一切都是正确的），我将机架日志级别提升到调试级别，并且我发现了*“Rack::Protection::RemoteToken 阻止的攻击”*通知问题是`rack-protection`Sinatra 使用的错误配置。

默认情况下，由于引用者不同，我的应用程序在 CSRF 保护中遇到了问题；禁用：

```
set :protection, :except => [:remote_token, :frame_options] 
```

有用。

# java - Eclipse 与 JNLP 中相同的 Java 字体略有不同

> ID：12219104
> 
> 赞同：2
> 
> 时间：2012-08-31T16:15:16.423
> 
> 标签：java, eclipse, fonts, jnlp

首先，我真的没有任何代码，因为这是我看到的一个普遍问题，我只是想知道是否有其他人遇到过它。

据我所知，eclipse 和 JNLP UI 属性是相同的......所以，我看到的是，当分配完全相同的组件时 - 任何组件 - 完全相同的字体（我使用 Arial、Bold、12一切），JNLP 和 Eclipse 中的结果略有不同，即使在完全相同的计算机上运行也是如此。

这是一个屏幕截图（Eclipse 结果在顶部，JNLP 结果在底部）：

![在此处输入图像描述](../Images/fa842509feb8d421810cc53fdb14833d.png)

Anyhoo，如果有人见过这个或有任何建议，那将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:19:53.093

它很可能是 JRE 用于文本抗锯齿的属性。访问[此代码](https://stackoverflow.com/a/5998015/418556)进行实验。

![](../Images/e658c26b8bb48ea528719c8ba4037b4f.png)

# rake - rake 管道 sourceMap 过滤器

> ID：12219109
> 
> 赞同：4
> 
> 时间：2012-08-31T16:15:42.863
> 
> 标签：rake, ember.js

我正在使用 rake 管道来了解构建 emberjs 应用程序。

让它工作起来相当简单，这里有一个例子：[https ://github.com/emberjs/todos](https://github.com/emberjs/todos)

但我正在努力寻找有关如何让 sourceMap 作为管道的一部分工作的资源，以便我可以在 Web 检查器中单独查看我的 js 文件。[参考](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)

有没有人能够做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:59:36.353

所以，我想通了这个问题。minispade 过滤器支持“字符串”选项。将此选项设置为 true 时，minispade 过滤器会在每个模块的末尾附加一个“sourceUrl”注释。这稍后会被 Firebug 或 Web-Inspector 拾取，以单独显示您的文件，而不是单个文件。

来自：[Github 上的 Minispade 过滤器](https://github.com/wycats/rake-pipeline-web-filters/blob/master/lib/rake-pipeline-web-filters/minispade_filter.rb)

> ```
> #   @option options [Boolean] :string If true, compiles the output as
> #   a String instead of a closure. This means that @sourceURL can be
> #   appended for good stack traces and debugging. 
> ```

[问题是Ember Todos](https://github.com/emberjs/todos)示例中展示使用 rake-pipeline的 Assetfile没有将此设置为 true。一旦修改了 Assetfile 的副本，您就可以很好地进行调试了。

repo 的另一个未解决问题是它使用的极其古老的 minispade 副本。因此，如果您正在查看该 repo，请确保您也更新了 minispade.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T03:11:08.950

我编译了一个可破解的[小型 rake-pipeline 堆栈](https://github.com/ahx/ember-pipeline)，它使用 minispade 字符串功能以及可选的咖啡脚本编译、车把预编译、在生产中运行时的压缩等。

# linux - x86 汇编 - 打印给定 ascii 代码的字符

> ID：12219113
> 
> 赞同：2
> 
> 时间：2012-08-31T16:16:25.523
> 
> 标签：linux, assembly, x86

我是汇编编程的新手，无法在屏幕上打印字符。每次我执行我的程序时，我都会遇到分段错误，我不知道为什么。

```
.section .data
  A:
    .long  65  # ascii code for 'A'

.section .text
.globl _start

_start:
 movl $1, %edx # length of character to print, 1
 movl  A, %ecx # what I want printed
 movl $1, %ebx # file descriptor for STDOUT
 movl $4, %eax # syscall number for sys_write

 int $0x80     # calls kernel

 movl $0, %ebx # return status
 movl $1, %eax # syscall number for sys_exit

 int $0x80     # calls kernel 
```

**这些是我用来构建的命令** （我的文件名为 write.s）

```
as write.s -o write.o
ld write.o -o write 
```

这不是打印字符的正确方法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:20:38.900

```
movl A, %ecx 
```

意思是：将标签 A 的地址处的值复制到`%ecx`. 正确的指令是：

```
movl $A, %ecx 
```

或者

```
leal A, %ecx 
```

在这些情况下，您可以使用 GDB 进行调试（请注意，您必须使用`-g`标志进行汇编才能获取调试信息）：

```
$ as -g write.s -o write.o
$ ld write.o -o write
$ gdb write
GNU gdb (GDB) 7.5
   [.. snip ..]
(gdb) b test.s:13
Breakpoint 1 at 0x4000c6: file test.s, line 13.
(gdb) run
Starting program: /home/niklas/tmp/asm/write 

Breakpoint 1, _start () at test.s:13
13   int $0x80     # calls kernel
(gdb) info registers ecx
ecx            0x41 65 
```

如您所见，`%ecx`具有整数值`65`，这不是您想要的。

* * *

如果你运行`strace ./write`，它将解码系统调用参数并为你返回值。当你传递一个错误的指针时，你会看到它`write()`只是返回`-EFAULT`而不做任何其他事情。

# c# - 通过另一个依赖属性将变量绑定到一个依赖属性

> ID：12219115
> 
> 赞同：1
> 
> 时间：2012-08-31T16:16:31.150
> 
> 标签：c#, .net, wpf, data-binding, dependency-properties

我有以下控件嵌入（不是继承，只是放置）： ![在此处输入图像描述](../Images/3096bd1fa3b57748472a4425302d2cbc.png)

Native TextBlock 放在 MyMiddleControl 中，MyMiddleControl 放在 MyGlobalControl 中。MyMiddleControl 有一个 DependencyPropery“GroupName”，它绑定到 TextBox.Text。MyGlobalControl 有一个公共属性“MyText，它绑定到 MyMiddleControl.GroupName。

XAML：

```
<UserControl x:Class="MyMiddleControl"
         ...
         DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
    <TextBlock Text="{Binding Path=GroupName}"/>
</UserControl> 
```

和

```
public static readonly DependencyProperty GroupNameProperty =
    DependencyProperty.Register("GroupName", typeof(string), 
    typeof(MyMiddleControl), 
    new PropertyMetadata("default"));

public string GroupName
{
    get { return (string)GetValue(GroupNameProperty); }
    set { SetValue(GroupNameProperty, value); }
} 
```

和

```
<UserControl x:Class="MyGlobalControl"
         ...
         DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
    <MyMiddleControl GroupName="{Binding MyText}"... />
</UserControl> 
```

和

```
public string _myText = "myDef";
public string MyText
{
    get { return _myText ; }
    set { _myText = value; }
} 
```

问题 #1。当我运行程序时，我在文本块中看到“默认”而不是“myDef”。

问题 #2。我有一个按钮：

```
private void TestButton_Click(object sender, RoutedEventArgs e)
{
    MyText = "TestClick";
} 
```

结果是一样的：“默认”。

为什么？:(

**更新：**

我忘了说。如果我做

```
<UserControl x:Class="MyGlobalControl"
         ...
         DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
    <MyMiddleControl GroupName="FixedTest"... />
</UserControl> 
```

它工作正常。

**PS。**与第一个答案不同的示例项目：[TestBind.zip](http://svetiksch.spb.ru/tmp/TestBind.zip)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:26:01.693

您必须实现 INotifyPropertyChanged 以通知绑定属性的更改

```
public class SampleData : INotifyPropertyChanged
{
  public SampleData ()
  {
     this.MyText = "myDef";
  }

  public string _myText;
  public string MyText
  {
    get { return _myText ; }
    set {
      _myText = value;
      this.RaisePropChanged("MyText");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  public void RaisePropChanged(string name) {
    var eh = this.PropertyChanged;
    if (eh != null) {
      eh(this, new PropertyChangedEventArgs(name));
    }
  }
} 
```

希望有帮助

**编辑** 尝试以下解决方案，在后面的代码中设置 x:Name 和 DataContext

```
public partial class MyMiddleControl : UserControl
{
  public MyMiddleControl() {
    this.DataContext = this;
    this.InitializeComponent();
  }

  public static readonly DependencyProperty GroupNameProperty =
    DependencyProperty.Register("GroupName", typeof(string),
                                typeof(MyMiddleControl),
                                new PropertyMetadata("default"));

  public string GroupName {
    get { return (string)this.GetValue(GroupNameProperty); }
    set { this.SetValue(GroupNameProperty, value); }
  }
}

<UserControl x:Class="TestBind.MyMiddleControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="middleControl">
    <Grid>
        <TextBlock Height="40" HorizontalAlignment="Left" Margin="45,23,0,0" 
                   Name="textBlock1" Text="{Binding ElementName=middleControl, Path=GroupName}" 
                   VerticalAlignment="Top" Width="203" />
    </Grid>
</UserControl>

public partial class MyGlobalControl : UserControl, INotifyPropertyChanged
{
  public MyGlobalControl() {
    this.DataContext = this;
    this.InitializeComponent();
    this.MyText = "myDef";
  }

  public string _myText;
  public string MyText {
    get { return this._myText; }
    set {
      this._myText = value;
      this.OnPropertyChanged("MyText");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  protected virtual void OnPropertyChanged(string propertyName) {
    PropertyChangedEventHandler handler = this.PropertyChanged;
    if (handler != null) {
      handler(this, new PropertyChangedEventArgs(propertyName));
    }
  }

  private void button1_Click(object sender, RoutedEventArgs e) {
    this.MyText = "btnClick";
  }
}

<UserControl x:Class="TestBind.MyGlobalControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:my="clr-namespace:TestBind"
             x:Name="globalControl">
  <Grid>
    <my:MyMiddleControl HorizontalAlignment="Left"
                        Margin="24,82,0,0"
                        x:Name="myFloatTest"
                        GroupName="{Binding ElementName=globalControl, Path=MyText}"
                        VerticalAlignment="Top" />
    <Button Content="Button"
            Height="23"
            HorizontalAlignment="Left"
            Margin="296,65,0,0"
            Name="button1"
            VerticalAlignment="Top"
            Width="75"
            Click="button1_Click" />
  </Grid>
</UserControl> 
```

# ruby - 在 ruby 中实现 iota

> ID：12219120
> 
> 赞同：2
> 
> 时间：2012-08-31T16:17:00.590
> 
> 标签：ruby, programming-languages, functional-programming, scheme, combinators

我提前道歉再次提出这个问题。我之前就在[这里](https://stackoverflow.com/q/11960809/1177119)的 Haskell 实现问过这个问题，但我仍然很难理解它是如何工作的。此外，我发现极简编程语言的概念绝对令人着迷并且无法摆脱它......无论如何，这不是怀念函数式编程之美的地方。

所以！我找到了一个关于深奥编程语言的网站并发现了 Iota。Iota 可以说是最小的函数式语言。您可以在此处阅读更多相关信息：[“Iota 和 Jot：最简单的语言？”](http://semarch.linguistics.fas.nyu.edu/barker/Iota/) 这是Iota在Scheme中的参考实现：

```
(let iota ()
   (if (eq? #\* (read-char)) ((iota)(iota))
       (lambda (c) ((c (lambda (x) (lambda (y) (lambda (z) ((x z)(y z))))))
                    (lambda (x) (lambda (y) x)))))) 
```

但是，当我尝试与 Ruby 中的 Scheme 实现相当的优雅时，它最终会吐出一个“坏 proc”。谁能帮我理解为什么 Ruby 会这样，以及如何更好地实现它。在尝试使其正常工作时，我保留`S`,`K`和`BASIS`分开只是为了便于阅读。

我在底部包括了两个测试。第一个应该返回`I`( `BASIS[BASIS]`)，但它返回的结果与`I`. 第二个测试应该返回`K`，但它返回一个错误。

```
S = lambda {|f| lambda {|g| lambda {|x| f[x][g[x]] }}}
K = lambda {|x| lambda {|y| x }}
BASIS = lambda {|c| c[S][K] }

iota = lambda{|s|
   s = s.chars
   i = lambda {
      if s.next == '*'
         i[i]
      else
         BASIS
      end
   }
}

p BASIS[BASIS][1]         # => 1
p iota["*ii"][1]          # => #<Proc:0x000000010016b290>

p K[1][2]                 # => 1
p iota["*i*i*ii"][1][2]   # => line 3:in `[]': can't convert Proc into Integer (TypeError) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:37:08.133

在第 9 行，您正在调用`i[i]`，但`i`不接受任何参数 - 只有返回的 lambda 才接受`i`。所以你应该`i`不带参数调用，然后调用调用的结果`i`作为`i`它的参数，即`i[][i]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:15:29.843

感谢 sepp2k，我想我明白了，这是任何有兴趣的人的答案：

```
S = lambda {|f| lambda {|g| lambda {|x| f[x][g[x]] }}}
K = lambda {|x| lambda {|y| x }}
BASIS = lambda {|c| c[S][K] }

iota = lambda{|s|
   s = s.chars
   i = lambda {
      if s.next == '*'
         i[][i[]]
      else
         BASIS
      end
   }
   i[]
}

p BASIS[BASIS][1]          # => 1
p iota["*ii"][1]           # => 1

p K[1][2]                  # => 1
p iota["*i*i*ii"][1][2]    # => 1 
```

# perl - 向/从另一个类传递/访问对象属性

> ID：12219122
> 
> 赞同：1
> 
> 时间：2012-08-31T16:17:10.713
> 
> 标签：perl

**问题：**无法访问父对象属性

## Verification.pm：（父类）

```
package Verification;
use Verification::Proid;

sub Proid
{
    my $self = shift;
    print Dumper($self);
    my $result = Verification::Proid->validate($self);

    return $result; 
} 
```

**自卸车结果**

```
$VAR1 = bless( {
    'event_name' => 'validate',
    'Verification_Type' => 'Proid',
    'Verification_Value' => 'ecmetric',
    'xml_request' => bless( do{\(my $o = 148410616)}, 'XML::LibXML::Document' ),
    'Verification_Options' => [
                                {
                                '2' => 'UNIX'
                                }
                              ],
    'Verification_ID' => '3'
    }, 'Verification' ); 
```

* * *

## Proid.pm: (儿童班)

```
package Verification::Proid;
our @ISA = qw(Verification);

sub validate 
{
    my $self = shift;
    print Dumper($self);
    my $result;

    foreach my $validation_type ( @$self->{Verification_Options} )
    {
        do stuff...
    }
} 
```

**自卸车结果**

```
$VAR1 = 'Verification::Proid'; 
```

子类没有正确获取传递给它的对象的所有属性，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:22:30.300

1.  你的*调用语法*是错误的。`Verification::Proid->validate($self)`正在调用*类*上的方法，而不是`$self`。

2.  这个*概念*是错误的。父类不应该通过名称来调用子类中的东西；它完全违背了上课的目的。

3.  您的对象不*属于*假定的子类；它被祝福了`Verification`，不是`Verification::Proid`。如果它实际上是您的一个实例，即使在父类中`Verification::Proid`也可以调用它。`$self->validate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:36:03.870

感谢您指出缺陷@hobbs，很明显我需要阅读更多关于 OO Perl 的内容......直到我更好地处理它，我通过在 Verification.pm 中使用 Class::Singleton 找到了一个功能解决方法

**验证.pm**

```
package Verification;
use Verification::Proid;
use Class::Singleton;

#Instantiate the object as a singleton

sub Proid
{
    return Verification::Proid->validate();
} 
```

**Proid.pm**

```
package Verification::Proid;
our @ISA = qw(Verification);

sub validate 
{
    my $self = Verification->instance;
    print Dumper($self);

    foreach my $validation_type ( @{$self->{Verification_Options}} )
    {
        do stuff...
    }
} 
```

**自卸车结果是我需要的**

```
$VAR1 = bless( {
    'event_name' => 'validate',
    'Verification_Type' => 'Proid',
    'Verification_Value' => 'ecmetric',
    'xml_request' => bless( do{\(my $o = 148410616)}, 'XML::LibXML::Document' ),
    'Verification_Options' => [
                                {
                                '2' => 'UNIX'
                                }
                              ],
    'Verification_ID' => '3'
    }, 'Verification' ); 
```

# android - 使用来自 2 个不同表的 2 个游标来使用 SimpleCursorTreeAdapter 填充 ExpandableListView

> ID：12219123
> 
> 赞同：0
> 
> 时间：2012-08-31T16:17:17.430
> 
> 标签：android, sqlite

假设我有两张桌子：一张是“盒子大小”，另一张是“水果”。每个水果都有一个包装盒尺寸。我只想要 3 类盒子尺寸，其中我可能有 4-5 个水果。所以我的小组来自“盒子大小的桌子”，孩子们来自“水果”桌子。

我曾尝试覆盖 getChildrenCursor 无济于事。它说“fruits”中的列不存在，因为我假设它使用一个光标。

我将如何解决这个问题？

```
cU=dB.fetchTypes(cId);
        SimpleCursorTreeAdapter mAdapter = new     SimpleCursorTreeAdapter(this,
                cU, android.R.layout.simple_expandable_list_item_1, android.R.layout.simple_expandable_list_item_1,
                new String[] { SQLAdapter.KEY_BOXNAME }, new int[] {R.id.exp_group_text1},
                R.layout.exprow_group, R.layout.exprow_child, new String[] { SQLAdapter.KEY_FRUITNAME},
                new int[] { R.id.exp_child_text1 }) {

            //we return a new cursor representing fruit for each box selected
            @Override
            protected Cursor getChildrenCursor(Cursor groupCursor) {
                secondCu = dB.fetchFruitesOfBox(new Long(groupCursor.getString(groupCursor.getColumnIndex(SQLAdapter.KEY_BOXID))));
                secondCu.moveToFirst();
                return secondCu;
            }
        };
        expView.setAdapter(mAdapter); 
```

# regex - 正则表达式替换Notepad++ 中的href 和alt

> ID：12219124
> 
> 赞同：0
> 
> 时间：2012-08-31T16:17:20.830
> 
> 标签：regex, notepad++, replace

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:50:13.600

代替：

```
a href="http://www\..+\.com\ +target 
```

和

```
a href="http://www.NEWVALUE.com target 
```

代替：

```
img alt="[^"]+"\ +src= 
```

和

```
img alt="NEWVALUE" src= 
```

# django - Django在部分中独立加载数据

> ID：12219131
> 
> 赞同：0
> 
> 时间：2012-08-31T16:18:15.193
> 
> 标签：django, models, partials

我有一些部分模板，我将它们加载到各个页面上，有时这些部分的包含是动态的，它们有自己的相关模型。

目前我通过视图将模型传递到主页，但是没有办法为这些独立于父页面和视图的部分加载数据吗？

好像我在不正确的视图中复制代码！

我可以不创建自定义标签或允许我将数据加载到部分中的东西，而不管父页面及其视图中传递的数据如何？

一个很好的例子是“最新帖子”的部分，它存在于侧边栏部分并加载到许多不同的父模板上

干杯凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:10:14.903

自定义模板标签可以为您做到这一点。您可以编写一个[包含标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)，它将直接输出渲染的模板：

```
# yourapp/templatetags/appname_tags.py

def latest_posts(num_posts):
    posts = Post.objects.all()[:num_posts]
    return {'posts': posts}
register.inclusion_tag('yourapp/partials/latest_posts.html')(latest_posts) 
```

# ios - 如何获取 UDID 以进行配置？

> ID：12219133
> 
> 赞同：0
> 
> 时间：2012-08-31T16:18:31.937
> 
> 标签：ios, uuid, uniqueidentifier, udid

听起来这个话题已经被打死了；但是，当您设置用于部署以测试设备的配置文件时，任意生成的 UUID 是不够的，您需要将实际的 UDID 包含在配置文件中。当然，您可以向用户提供一组说明以获取 ID，然后通过电子邮件将其发送给您 - 但它对客户更加友好，并且避免了自己在代码中获取的愚蠢错误 - 以前通过`uniqueIdentifier`方法。

因此，除了创建一个临时 UUID 之外，有没有人想出一个可以在 iOS6 中工作的好替代品，或者 Apple 是否提供了一些这样做的方法？我无法在文档中找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:22:23.757

如果您尝试做的是为配置文件收集 UUIDS：

我使用[TestFlight](http://testflightapp.com)来收集我的测试人员 UUID。用户需要做的就是使用他们的移动设备注册。然后我可以看到他们的 UUID 并更新配置文件。一旦他们有权访问构建，他们将收到一封电子邮件，告诉他们在哪里下载它。

# jquery - jQuery click 事件在 Internet Explorer 中未触发

> ID：12219135
> 
> 赞同：0
> 
> 时间：2012-08-31T16:18:45.040
> 
> 标签：jquery, internet-explorer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:25:28.530

确保按钮有`type="submit"`. 你必须在 IE 中提到这一点；在 Chrome 和 Firefox 中，这似乎是默认类型。

我正在使用它，它在任何地方都可以正常工作。尝试表单提交处理程序而不是单击：

```
<form id="1234">
    <input type="text" />
    <button type="submit" id="asdasd" >Button </button>
</form>

<script>
   $("#1234").submit(function(){
      alert("Hello World");
   })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:24:49.470

我最近偶然发现了这个！我简直不敢相信它正在发生 - 因为帖子数据被正确传递了！

对此没有合乎逻辑的解释，现在我必须说这只是 Internet Explorer 未被注意到的错误！

## 解决方案 1

Internet Explorer 似乎在加载时扫描页面并确定哪些提交按钮是可见的，然后将输入提交功能附加到这些表单。

要解决此问题，您可以使用以下 jQuery 代码：

```
$(document).ready(function() {
   $('input').keydown(function(e){
     if (e.keyCode == 13) {
        $(this).parents('form').submit();
        return false;
     }
   });
}); 
```

return false 在 Internet Explorer 中相当重要，因为它可以防止您在点击 return 时听到的哔哔声。哔声是说“你不能在这里输入！”，但返回 false 会取消按键，因此浏览器不会发出警告。

阅读有关此内容和人们所说的更多信息：[在 IE 中使用 Enter 提交表单](http://www.thefutureoftheweb.com/blog/submit-a-form-in-ie-with-enter)

## 解决方案 2

另一个解决方案可能是，但在我的情况下它不起作用是添加额外的隐藏输入字段：

```
<!-- Fix for Internet Explorer bug (One text input and submit, disables submit on pressing "Enter") -->
  <div style="display:none">
    <input type="text" name="hiddenText"/>
  </div> 
```

## 解决方案 3

另一种解决方案是检测用户的浏览器，如果是 Internet Explorer，则取消输入键并强制用户单击提交按钮以正确提交。

```
function browserIE(){
   if($.browser.msie && parseInt($.browser.version) <= 8){   // Let's detect if it's Internet Explorer 8 or lower
     return true;
 }
  return false; 
```

}

```
$(document).keypress(function(event) { // Bind keyboard events
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13' && browserIE()){ // When user hits 'enter key' (keyCode 13) and only when the browser is Internet Explorer version 8 or lower
            event.preventDefault();
            event.stopPropagation();
        }
}); 
```

这是强制 Internet Explorer 用户单击提交按钮以执行正确提交的唯一方法，因为正如我在按 Enter 之前提到的那样，在该字段上不会进行正确提交，只会以简单的页面重新加载而告终！

[jsFiddle 工作示例](http://jsfiddle.net/htALk/)

另推荐阅读：[Internet Explorer 及更高版本中的按钮与 Input[type="submit"]](http://ajaxian.com/archives/button-versus-inputtypesubmit-in-ie-and-beyond)

# mercurial - 如何找出 mercurial 存储库的大小？

> ID：12219136
> 
> 赞同：8
> 
> 时间：2012-08-31T16:18:52.063
> 
> 标签：mercurial, command

因此，例如，如果有一个 mercurial 存储库[https://code.google.com/p/potentiallyLarge](https://code.google.com/p/potentiallyLarge)是否有一个命令可以让我在克隆它之前找出它的大小？就像是

```
hg size https://code.google.com/p/potentiallyLarge 
```

此外，是否有用于颠覆存储库的命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T09:36:13.883

磁盘上使用的大小与用于克隆的带宽不同。一些托管站点（例如 Bitbucket）会在磁盘上显示大小，以便您在克隆之前预先知道系统需要多少空间。但我可以看到谷歌代码没有，所以它不会在这里帮助你。

Mercurial[有线协议](http://mercurial.selenic.com/wiki/WireProtocol)不公开任何可以告诉您存储库有多大的命令。当您进行正常克隆时，客户端不知道它将接收多少数据，它只是接收数据流。收到变更日志后，客户端知道*需要多少*清单和文件日志，但不知道它们的*大小*。

事实上，服务器很难计算克隆将使用多少数据：使用的网络带宽小于磁盘空间，因为使用的压缩方式不同（bzip2 与 gzip）。但是，如果您使用`--uncompressed`您的克隆（Google 代码不支持），那么有一个技巧，见下文。

了解克隆使用多少带宽的唯一方法是制作一个。如果您已经有一个克隆，您可以使用它`hg bundle`来模拟一个克隆：

```
$ hg bundle --all my-bundle.hg 
```

捆绑包的大小将告诉您存储库中有多少数据。

**一个技巧：**如果 Google Code 支持`hg clone --uncompressed`，那么您可以使用它来了解远程存储库的大小！当您使用`--uncompressed`时，客户端会要求服务器按原样发送`.hg/`目录的内容 — 无需使用 bzip2 重新压缩它。方便的是，服务器通过告诉客户端**存储库的大小来**启动流。因此，您可以启动这样的克隆，然后在您的客户端打印告诉您存储库大小的行时（使用 Control-C）中止它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T00:31:47.210

**更新：**我在下面的回答是错误的，但我把它留在这里，因为 MG 提供了一些很好的信息作为回应。看起来正确的答案是“不”。

不是一个好方法，而是一种解决方法。A`hg clone URL`真的很简单`hg init ; hg pull URL` 并且该命令`hg incoming`会告诉您如果进行拉动会得到什么，因此您可以这样做：

```
hg init theproject
cd theproject
hg incoming --stat URL_TO_THE_PROJECT 
```

如果你跟进，你会得到一个相当不错的猜测你会提取多少数据：

```
hg pull URL_TO_THE_PROJECT 
```

我不确定网络效率，`hg incoming`但我认为它不会从所有变更集中下载所有内容，尽管我可能错了。它提供了一个`--bundle`选项，可以将任何传入的下拉内容保存到一个文件中，您以后可以从中拉取以避免重复下载。

# java - 什么更有效：replaceFirst() 或 replaceAll() 与锚定的正则表达式？

> ID：12219140
> 
> 赞同：5
> 
> 时间：2012-08-31T16:19:13.647
> 
> 标签：java, regex, performance

我们有一个字符串`String s = "first.second.third...n-1.n";`

两种正则表达式方法中哪一种在 Java 中更有效？

```
s = s.replaceFirst(".*?\\.", ""); 
```

或者

```
s = s.replaceAll('^[^.]+[.]', ''); 
```

他们做同样的事情，但我想知道哪个更快？

区别在于：

1.  使用锚定正则表达式与`replaceFirst()`仅匹配第一个实例

2.  使用非贪婪`*?`与非点字符类`[^.]`

3.  使用`\\.`文字与`[.]`字符类。

我更喜欢一个可以分别对它们的性能影响进行基准测试或解释的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:21:57.110

第二个正则表达式更有效，因为它不会回溯。

这是一篇解释详细信息的好文章的[链接。](http://blog.stevenlevithan.com/archives/greedy-lazy-performance)文章解释了如何表达

```
<.*?> 
```

需要 25 步，而表达式

```
<[^>]*> 
```

只需 5 次即可在`<0123456789>`字符串中找到匹配项，说明正则表达式引擎需要执行的每个步骤才能生成匹配项。

`\\.`和之间应该没有区别`[.]`- 好的正则表达式引擎会将两个子表达式转换为相同的编译表达式。

锚定版本与`replaceAll`非锚定不同，因为当点是字符串中的第一个字符`replaceFirst`时，锚定版本将找不到匹配项。`.`您可以通过替换`+`为`*`.

消除这种差异后，`replaceAll`将花费更多时间检查是否没有其他匹配项（并且不会有，因为您的表达式是锚定的），但这对于初始运行时间长且不包含任何匹配项的字符串并不重要点。

# google-apps-script - UiApp缓存垂直面板

> ID：12219143
> 
> 赞同：0
> 
> 时间：2012-08-31T16:19:24.137
> 
> 标签：google-apps-script

开发小型应用程序来记录一组 6 个读数，用于在 31 个房间进行监控。应用程序将有两个主要视图，一个视图显示将读取读数的每个房间的按钮列表，第二个视图将输入特定房间的值，然后发布到电子表格。

这里记住的过程是单击特定房间的按钮，输入数据，返回按钮视图以选择另一个房间以输入该房间的数据，然后返回按钮视图屏幕。

由于按钮视图很少更改，因此我是否有任何缓存此视图的选项，这样我就不必每次都运行函数来重建它。我有这个功能

```
function createTGSRoomListButtons(sh, aData){} 
```

这需要房间列表并构建一个用于选择不同房间的按钮面板。

我的问题是上述函数可以运行一次以拼凑 UI、缓存，然后简单地“调用”吗？

为此，将输入数据的视图可以部分缓存，以便每次渲染时都可以引用特定房间。

Google Apps 脚本的新手，因此不太确定如何正确确定我的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:06:29.963

您可以在 UI 中拥有多个面板并使用可见性来显示一个或另一个...无需缓存任何内容，因为它们在此过程中保持不变。如果我很好地理解了您的用例，具有特定房间信息的面板将根据电子表格数据进行修改，因此在这种情况下您不需要缓存值，因为它们每次都会“重建”。显示/隐藏面板的技巧已在[这篇文章](https://stackoverflow.com/questions/11661146/replicate-tab-panel-in-gui-builder-google-apps)中展示，客户端处理程序和多个面板位于一个独特的垂直面板中，以确保可见面板始终位于正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:07:24.393

一种非常简单的方法是首次构建 UI，然后每次使用面板的 setVisible() 方法隐藏/取消隐藏按钮面板

# c# - 在 ASP.NET WebAPI 中使用 HttpContext.Current

> ID：12219144
> 
> 赞同：5
> 
> 时间：2012-08-31T16:19:23.443
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我想处理 WebAPI 操作方法中的异常，方法是捕获它们设置状态代码，并将消息写入响应。通常在普通的 MVC 中`Controller`，我会这样做，使用`Controller`'s`Response`属性：

```
Response.StatusCode = 404;
Response.Write("Whatever"); 
```

但是它似乎`ApiController`没有任何`Response`属性。是否有一个原因？`HttpContext.Current.Response`像这样使用可以吗：？

```
HttpContext.Current.Response.StatusCode = 404;
HttpContext.Current.Response.Write("Whatever"); 
```

或者是否有一种特定的方式来写入来自 WebAPI 控制器的响应？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T16:22:59.823

action 方法应该创建响应对象。要么只做新的 HttpResponseMessage 要么调用 this.CreateResponse。

如果您想要返回自定义 CLR 对象而不是返回 HttpResponseMessage，那么您将需要抛出 HTTPResponseException 以返回 404。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T22:59:29.563

# asp.net-mvc - 显示动态列

> ID：12219145
> 
> 赞同：0
> 
> 时间：2012-08-31T16:19:34.527
> 
> 标签：asp.net-mvc, telerik-grid

我已将数据绑定到 Telerik MVC Grid。以下是 cshtml 中给出的代码：

```
@( Html.Telerik().Grid(Model.UserInfo)
.Name("User")
.Columns
(
    columns =>
    {
        columns.Bound(col => col).Title("Name");
        columns.Bound(col => col.Email);
        columns.Bound(col => col.EYLoginID).Title("Windows User Name");
        columns.Bound(col => col.Title);
        columns.Bound(col => col.Phone);
        columns.Bound(Model.CompanyDefinitionName).Title("Location");
        columns.Bound(col => col.IsExternalContact).Title("External");
    }
 )
 .DataBinding(dataBinding => dataBinding.Server())
 .Sortable() 
```

)

这`Model.CompanyDefinitionName`是我需要与其他列一起显示的字符串。但我收到一个错误，因为`Model.CompanyDefinitionName`它不是实体的一部分。我将如何将其显示为列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:50:54.017

使用模板列：

```
columns.Template(@<text>
   @Model.CompanyDefinitionName
</text>).Title("Location"); 
```

# javascript - 忽略页面中的 javascript 语法错误并继续执行脚本

> ID：12219154
> 
> 赞同：52
> 
> 时间：2012-08-31T16:20:12.730
> 
> 标签：javascript, jquery, html, wordpress, plugins

我为 WordPress 开发插件。它在用户端（主题）使用一些 jquery 作为 jquery 插件。问题是，当其他汽车制造商制作的其他插件出现 javascript 错误时，我的插件的 javascript 无法执行。

最糟糕的是，人们认为我的插件存在严重错误，即使它在错误处理条件语句中 100% 正常工作。但这实际上是由于其他一些 WP 插件/主题作者的一些其他 javascript 语法错误。

有没有办法继续执行我的插件 JS 忽略其他 JS 错误。或者我可以有解决这个问题的建议吗？

![在此处输入图像描述](../Images/a61e2a919d43cc9292f4180a25cb987a.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T14:07:01.730

尝试 ：

```
window.onerror = function(){
   return true;
} 
```

也就是说，如果您可以在执行错误脚本之前包含它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T16:28:12.730

您应该更正旧的 JavaScript 错误，因为它可能会产生很多问题，不是现在而是下一次。

将您的 JavaScript 文件/代码放在顶部（在 JS 出错之前），并在其他 JavaScript 代码影响的 JavaScript 之前调用它。

如果您需要在运行时处理 JavaScript 异常，最好的选择是

```
try { /* run js code */ } 
    catch (error){ /* resolve the issue or bug */ } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T07:10:30.347

我遇到了同样的问题：即使你是一个好公民，也有很多插件会做出太多假设并导致页面上出现 JavaScript 错误；这些错误与您的插件无关。

尝试处理其他插件中的错误是没有意义的——IMO 最好是独立的，但对它们的错误有弹性。

就我而言，错误正在停止 jquery DOM 就绪事件，并且我的 JavaScript 初始化代码没有被执行。不过，错误的确切形式并不重要——解决方案就是触发多个事件。

对我来说，解决方案是除了依赖 jQuery DOM 就绪事件之外还有后备：

1.  我将任何我想在 DOM 就绪事件上触发的代码包装到它们自己的函数中——例如 my_hardened_init_action();
2.  我添加了一个函数 my_hardened_init()，它只运行一次。它在第一次调用时调用 my_hardened_init_action() ，并且在后续调用中不执行任何操作。
3.  我在 WordPress 页脚中添加了各种方法来调用 my_hardened_init()。就我而言，我只需要两个。首先，尝试通常的 jQuery DOM 初始化，但回退到一个简单的 setTimeout()。因此，如果 jQuery DOM 初始化由于 JavaScript 损坏而从未触发，则超时将在页面完成加载后不久触发。

您可以添加多个其他后备 - 如果需要，甚至可以将代码添加到标题中。由于 my_hardened_init() 只运行一次，您可以尝试多次触发它。

这已经在带有一系列其他损坏插件的客户端站点上起作用。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-31T16:52:02.090

您应该能够使用该`error`事件吞下任何错误：

```
$(window).error(function(e){
    e.preventDefault();
}); 
```

我从来没有尝试过这个，但它应该在理论上有效。

应该注意的是，这可能不是解决您问题的好方法。可能是您的插件干扰了其他插件。当然，错误可能不是您自己的错，但一般来说（对于公开发布的插件）并非如此。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T01:52:56.633

怎么样`window.onerror`？

[https://developer.mozilla.org/en-US/docs/DOM/window.onerror](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-11T12:53:02.807

```
<script>
var _z = console;
Object.defineProperty(window, 'console', {
    get: function(){
        if (_z._commandLineAPI) {
         return true;   
        }
        return _z;
    },
    set: function(val) {
        _z = val;
    }
});
</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-28T16:28:01.433

如果您的页面正在运行。利用：

```
$(window).error(function(e){
        e.preventDefault();
});  // IGNORE ALL ERROR JQUERY! 
```

或使用：

```
window.onerror = function(){
   return true;
}  // IGNORE ALL ERROR JAVASCRIPT! 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-11T00:40:44.247

常规的 try catch 语句不适用于这些类型的错误。

可能的解决方法：

使用 inline-css 将栏浮动到左侧而不是 jQuery（我不确定您的插件的完整功能是什么，但如果它只是将栏浮动到左侧，为什么不使用 css？）

有一个不可见的 iframe，它试图在父页面上运行一些代码。如果它失败而不是提醒用户（在这个 iframe 中）这不是你的错 :)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-18T20:38:44.817

也许您可以尝试将您的 js 放在一个 html 对象中，以便在单独的页面中执行它。如果主页上的 js 不会运行以与对象交互，那可能不会有太大帮助。只是可以玩的东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-22T04:22:10.560

将您对插件的调用放入

```
try{
  ......
}
catch(e){

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-20T10:09:24.220

这对我有用：

```
try{
    //your code
}
catch(error)
{
    return true;
} 
```

# html - 通过 AJAX 强制下载

> ID：12219157
> 
> 赞同：1
> 
> 时间：2012-08-31T16:20:20.353
> 
> 标签：html, ajax, forms, post, download

我正在寻找一种将`POST`数据传输到后端脚本的方法，使用它动态生成临时文件（临时文件是动态生成的，而不是保存到服务器上的磁盘），然后将其作为客户端提供给客户端下载。

我的后端脚本运行良好。问题是我还没有找到通过 AJAX 调用获取下载提示的方法。

如果我没有`POST`数据，我会使用类似的东西：

```
window.location.href = 'path/to/my/script.php'; 
```

我所追求的甚至可能吗？是否可以在不诉诸“黑客”的情况下完成，例如将表单动态注入 DOM 并提交，或打开另一个浏览器窗口等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:24:44.990

1.  发出 POST 请求；
2.  创建资源；
3.  用资源路径回答；
4.  `window.location.href = resourcePath`.
5.  [可选] 想要从第三方下载中保护此类资源？附加一个 CSRF 令牌，并且仅当 CSRF 检查通过时才使资源可用 - 否则恭喜，您刚刚赢得了 403 小狗！

如果资源有正确的标题，浏览器会要求你用特定的应用程序保存/打开它。/ 这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:22:13.683

如果没有经典的表单提交，您将无法做到这一点，除非您可以通过 GET 以某种方式使下载可用。

但是，这样做无论如何都是一个好主意，因为下载管理器等通常不能很好地与 POST 一起使用 - 所以只需让您的脚本生成一个临时 URL，然后使用您已经在问题中发布的 JavaScript 重定向到该 URL。

# node.js - 会话管理、Node+Express 和 Mongoose 模式对象

> ID：12219163
> 
> 赞同：1
> 
> 时间：2012-08-31T16:21:12.417
> 
> 标签：node.js, session, express, mongoose

我正在使用 Node.js + Express + Mongoose，并且有一个用于存储“会话”数据的 Mongoose 模式。同时，我使用“connect-mongodb”进行会话管理（本机驱动程序）。

直到今天我才意识到我有多余的功能。

所以，我尝试将我的 Schema 对象添加到“req.session”。它似乎有效，但我在下一个请求中失去了我的 Schema 对象的 Moongose 功能。

我考虑的一种选择是将对象的 id 存储在“req.session”中，然后使用 Mongoose 检索它。

我考虑的另一个选择是用 Mongoose 会话管理器替换“connect-mongoose”。

你能帮我做决定吗，并推荐一种方法。更具体地说，如果我使用 Mongoose 解决方案，它会解决我的 Schema 对象失去 Mongoose 功能的问题吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:08:45.840

我的建议是让 Mongoose 完全脱离你的会话管理，并且只在`req.session`. 这样，您可以像现在一样使用 connect-mongodb，或者如果您想隔离数据库，可以非常轻松地切换到其他会话存储，例如[connect-redis 。](https://github.com/visionmedia/connect-redis)如果您需要频繁访问感觉像是会话一部分的 Mongoose 对象，请将这些对象的 objectIds 保存为会话中的字符串，以便可以根据需要快速轻松地查找它们。

# javascript - 如何将附加的 HTML 附加到控制台日志？

> ID：12219166
> 
> 赞同：1
> 
> 时间：2012-08-31T16:21:13.340
> 
> 标签：javascript, jquery-mobile, append

这可能是个愚蠢的问题，但是...... 问题：如何将附加的 HTML 获取到控制台的日志中？我 100% 确定我附加的 HTML 已损坏，为了将来的目的，我想知道如何将结果记录下来？我正在尝试使用 Jquery Mobile 和 Phonegap 为 Android 实现小型软件。

当然你也可以检查我的函数，因为此时追加不正确。

编辑：问题 2：

你能找到我看不到文字 PÖÖ/POO 的原因吗？所以第二个 TR 完全丢失了，但是为什么呢？

```
function populateTable(){
        console.log("###########populateTable()#############");
        $("#table").find('tbody')
        .append($('<tr>')
            .append($('<td>')
                .append($('<img>')
                    .attr('src', 'images/cart_1.jpg')
                    .text('Image cell')
                )
                .append($('</td>')))
         .append($('</tr>'))

            .append($('<tr>')
                    .append($('<td>')
                        .append($('PÖÖ'))
                     .append($('</td>'))
            .append($('</tr>'))
            )));

        var strinki = JSON.stringify($("#table"));

        console.log("2....*******************>>>>>>>>>>>>>>>" +strinki);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:25:00.360

您想要的是`console.log($('#table')[0])`获得 DOM 元素。

如果您更喜欢 HTML 字符串，因为您使用的是带有劣质调试工具的浏览器（在 Firebug 中我可以轻松查看 DOM 子树）：`console.log($('#table').html())`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:00:20.687

就是这样 :) 这很简单，我应该自己知道 :)

```
var strinki = $("#table").html(); 
```

# internet-explorer-9 - Nav div 在 IE9 中未正确对齐，在 Chrome 和 FF 中正常

> ID：12219176
> 
> 赞同：0
> 
> 时间：2012-08-31T16:22:13.090
> 
> 标签：internet-explorer-9

我想我在这里可能有点愚蠢，但我无法弄清楚为什么我的导航在 IE9 的右侧有一个丑陋的差距

[http://i46.tinypic.com/10nu5w5.jpg](http://i46.tinypic.com/10nu5w5.jpg)

它在 FF 和 Chrome 中看起来不错，正如我想要的那样，边距与左侧徽标之前的边距相同。

[http://tinypic.com/r/2v8mmty/6](http://tinypic.com/r/2v8mmty/6)和 jsfiddle 是[jsfiddle.net/KNuEp/1](http://jsfiddle.net/KNuEp/1)

这显然是 IE 的事情。基本上在 HEADER DIV（在 960px 包装 div 中）中，我有一个 SITETITLE div，其中包含向左浮动的徽标和一个 NAV div，其中包含向右浮动的导航 ul。如果有帮助，我可以粘贴一些代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:27:46.710

解决您的问题

**换成这个**

```
<div id="header" class="clearfix">
        <div id="sitetitle" class="clearfix">
            <a href="index.html"><img src="images/bathroom-logo.png"></a>
        </div> 
```

# java - 请求的资源不可用 - 404 - Eclipse 中的 RESTful Web 服务

> ID：12219178
> 
> 赞同：2
> 
> 时间：2012-08-31T16:22:13.387
> 
> 标签：java, eclipse, apache, rest, tomcat

我一直在使用以下指南来开发 hello world REST Web 服务。
该指南可在以下位置找到：[http](http://wiki.eclipse.org/Creating_a_JAX-RS_Web_Service)
://wiki.eclipse.org/Creating_a_JAX-RS_Web_Service 我正在尝试打开路径：“ [http://localhost:8080/BeezerServer/jaxrs/addresses](http://localhost:8080/BeezerServer/jaxrs/addresses) ”

但它一直说“请求的资源（/BeezerServer/jaxrs/addresses）不可用。”

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-    app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee     http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>BeezerServer</display-name>
  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.test.AddressBookApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/jaxrs/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

该项目如下所示（以防它可能对某人有所帮助）： ![在此处输入图像描述](../Images/be7566797756584acf344ec62b3d410b.png)

Tomcat日志：

```
Aug 31, 2012 7:48:58 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program...
Aug 31, 2012 7:48:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Aug 31, 2012 7:48:59 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Aug 31, 2012 7:48:59 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1536 ms
Aug 31, 2012 7:48:59 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Aug 31, 2012 7:48:59 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
Aug 31, 2012 7:48:59 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Aug 31, 2012 7:48:59 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Aug 31, 2012 7:48:59 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 737 ms 
```

地址簿应用程序.java：

```
package com.test;

import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.core.Application;

public class AddressBookApplication extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new HashSet<Class<?>>();
        classes.add(AddressBook.class);
        return classes;
    }

} 
```

地址簿.java：

```
 package com.test;

import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;

/**
 * A sample resource that provides access to 
 * server configuration properties
 */
@Path(value="/addresses")
public class AddressBook {
    public AddressBook() {
        System.out.println();
    }
    private static String[] list = new String[] {
        "Eric- 932 Deloraine Av.",
        "Yen - 687 Markham Rd.",
        "Keith - 4301 McCowan Rd.",
        "Ron - 465 Melrose St.",
        "Jane - 35 Cranbrooke Av.",
        "Sam - 146 Brooke Av."

};

@GET
@Produces(value="text/plain")
public String getList() {
    StringBuffer buffer = new StringBuffer();
    buffer.append("{");
    for (int i = 0; i < list.length; ++i) {
        if (i != 0) 
            buffer.append(", ");
        buffer.append(list[i]);
    }
    buffer.append("}");

    return buffer.toString();
}

@GET
@Produces(value="text/plain")
@Path(value="{id}")
public String getPropety(@PathParam("id") int id) {
    if (id > -1 && id < list.length -1) {
        return list[id];
    }
    else {
        return "Name Not Found";
    }
}

@GET
@Produces(value="text/html")
@Path(value="html")
public String getHTMLList()
{
    return "<html><body><p><b>Hello</b></body></html>";
}

@POST
@Produces(value="text/html")
@Path(value="form")
public String handlePost(@PathParam("name") String name,@PathParam("age") int age)
{
    return "<html><body><p>name: " + name + "<p>age: " + age;
}

} 
```

# asp.net - 从 IE8 中的 OBJECT 标记调用 .Net 程序集

> ID：12219180
> 
> 赞同：6
> 
> 时间：2012-08-31T16:22:20.907
> 
> 标签：asp.net, .net, internet-explorer, internet-explorer-8

我有一个调用 .Net 程序集的网页。在 Windows XP 和 IE7 中一切正常。相关部分：

```
<html>
<head>
    <script language="javascript" type="text/javascript">
    function doScript() {
        myControl1.Go("value1","value2");
    }
    </script>
</head>
<body onload="javascript:doScript();">
    <object id="myControl1" name="myControl1" 
            codebase="../cabs/myassembly.dll" 
            classid="../cabs/myassembly.dll#MyNs.MyClass" 
            width="1" height="1"></object>
</body>
</html> 
```

我无法让它在带有 IE8 的 Windows 7 中工作。一些注意事项：

*   程序集是强命名的。
*   我现在正在主持这个`localhost`。
    *   在正在运行的机器（VirtualBox 托管的 WinXP、IE7）上，它使用我本地机器的 IP 地址（`http://1.2.3.4/...`）并且该 IP 在 IE 的“受信任的站点”中。
    *   在不工作的机器（Windows 7、IE8）上，它正在使用`http://localhost/...`并`localhost`位于 IE 的“受信任的站点”中。
*   大会由`http://localhost/cabs/myassembly.dll`.
*   错误消息是 javascript 错误，“对象不支持此属性或方法”
*   当请求文件时，Fiddler 会显示 200 OK 响应，但是，似乎 dll 并未将其移至临时 Internet 文件位置。
*   该站点以“IE 7 兼容性”模式运行。
*   我已将所有 IE 权限降至最不安全的位置，它将让您在所有区域中使用，并且行为完全相同。

**有没有人有任何想法试图让它工作或解决问题所在？**

*免责声明：是的，我知道现在是 2012 年，世界已经超越了 IE7、IE8、ActiveX 等。我们只是说我们在技术上有点落后。这是我必须解决的问题；升级到现代解决方案不会成为一种选择。*

**更新：**我确实让它在运行 IE8 的 Windows XP VirtualBox 中工作。所以看来这个问题是 Windows 7 特有的。它在我的本地机器和运行 Windows 7、IE8 的 VirtualBox 上都失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-09T15:48:21.380

这可以通过添加在[“使用 .NET 4.0 在 IE 中加载 .NET UserControls”](https://stackoverflow.com/questions/3334664/loading-net-usercontrols-in-ie-with-net-4-0)上回答的注册表项来解决（即使这是一个 2.0 控件）

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework]
"EnableIEHosting"=dword:00000001 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:14:05.307

我不确定这会有所帮助，但我遇到了类似的问题，这通常已经解决了。在不工作的机器上尝试这些步骤。

1.  **将dll**所在的url的域分配给`Trusted sites`zone。
2.  打开`Security`选项卡`Internet Options`并单击`Trusted sites`
3.  单击`Default level`并确保它选择了`Medium`。如果没有，请手动将其设置为`Medium`.
4.  申请

为了更好地衡量，关闭所有 IE 窗口，然后重新启动并测试它是否有效。

关键问题是**rene**在他的第二条评论中链接到的页面中讨论的问题。`Custom level`从 IE8 起，有一个安全设置在选项列表中没有它自己的 UI 。影响它的唯一方法是设置`Level`-`Medium`或更低将其设置为，`Enable`而`Medium-high`将其设置为更高`Disable`。

现在这很可能不是您的问题，因为通常默认级别`Trusted sites`是中等，这将启用该设置。但至少值得一试（也许您有一些组策略或更改了受信任站点默认级别的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:57:14.260

不要使用 .dll 文件。请改用 .cab。

# uitextfield - 将多个 uitextfields 附加到电子邮件

> ID：12219185
> 
> 赞同：1
> 
> 时间：2012-08-31T16:22:34.973
> 
> 标签：uitextfield, xcode4.3, email-attachments

我有多个 UITextFields，我想将它们附加到应用程序电子邮件中。我可以让其中一个出现，但不能让其余的出现。这是我正在使用的。

```
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];

[composer setMailComposeDelegate:self];
[composer setSubject:@"My Subject"];
[composer setMessageBody:AddNotesTextField.text isHTML:YES];

[self presentModalViewController:composer animated:YES];

[composer release]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:01:23.363

你已经对身体使用了：

```
[composer setMessageBody:AddNotesTextField.text isHTML:YES]; 
```

因此，只需对其他字段重复该过程，如下所示：

```
[composer setSubject:mySubjectTextField.text]; 
```

或者，如果您询问如何将多个文本字段的输入用于电子邮件正文，您只需使用`NSString`'s `stringWithFormat`：

```
[composer setMessageBody:[NSString stringWithFormat:@"you can place static %@ text in between %@ these variables",AddNotesTextField.text,someOtherField.text] isHTML:YES]; 
```

在带格式的字符串中，您可以转义默认字符串以使用“%@”为要插入其他字符串的每个实例添加一个字符串。然后在原始字符串结束后输入以逗号分隔的输入字符串的名称。`[NSString stringWithFormat:@"%@%@",x,y]`

# jquery - 如何使用 jquery 向页面添加 CSS 类？

> ID：12219188
> 
> 赞同：0
> 
> 时间：2012-08-31T16:22:51.430
> 
> 标签：jquery, css, styles

我想使用 jquery 将新的 CSS 类附加到文档的头部脚本以更改该页面上的元素。

使用这样的东西应该很简单：

```
var myhex = #e6399b;
$("<style type='text/css'> #someid { color:myhex; } </style>").appendTo("head"); 
```

我创建了一个[FIDDLE](http://jsfiddle.net/NbbhT/)来测试，但我无法让它工作。我认为在 HTML 代码中间有一个 JS 变量的语法非常简单——我试过了`'+myhex+'`，`+myhex+`但老实说我在这一点上猜测。

**笔记：**

1.  我需要通过变量来完成，因为变量的内容经常变化。
2.  我意识到直接的答案是“使用 .css()”，但在这种情况下我不能使用它，因为我正在向 jquery 对话框中的元素添加样式。这样做的唯一方法是通过 jquery 的`dialogClass`命令（即您必须通过“类”设置样式，而不是通过`.css()`.

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:23:49.017

您需要引用字符串，并使用浓度 (+ 符号) 将变量添加到字符串：

```
var myhex = '#e6399b';
$("<style type='text/css'> #someid { color:"+myhex+"; } </style>").appendTo("head"); 
```

[**小提琴**](http://jsfiddle.net/NbbhT/1/)

# android - 如何使用openGl es有效地绘制2d？

> ID：12219191
> 
> 赞同：1
> 
> 时间：2012-08-31T16:23:05.383
> 
> 标签：android, opengl-es, textures, frame-rate, game-loop

最初我在 2d 实时动作类型游戏中使用画布绘制位图，但由于某种原因，我的帧速率很糟糕。我怀疑它是画布，所以我切换到opengl。通过网上冲浪，我学会了从 2 个三角形创建一个矩形并在其上设置纹理。我使用 glOrthof 设置它的 2d 透视图并使用 gltranslatef 方法移动我的纹理。我知道问题不在于物理或任何东西，因为我测试了以恒定速度移动单个纹理（x 值以每 33 毫秒约 7 个单位移动）。它仍然波涛汹涌。我将 fps 设置为 30。这是我的游戏循环：

```
public void onDrawFrame(GL10 gl) {

    startTime = System.nanoTime();

    gl.glClearColor(0f, .0f, .8f, 0.5f);

    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    g.updatePhysics();
    onDraw(gl);

    sleepTime = (int) (TICKS_INTERVAL - (System.nanoTime() - startTime)/1000000);

    if(sleepTime > 0){
        try{
            Thread.sleep(sleepTime);
        }catch(Exception e){}
    }
} 
```

这就是它们的绘制方式：

```
public void onDraw(GL10 gl){

    gl.glLoadIdentity();

    if(g.state == g.STATE_GAME){

        gl.glTranslatef(x, y, z);
        rectangle.draw(gl);

        gl.glLoadIdentity();
        gl.glTranslatef(x, y, z);
        rectangle2.draw()gl;
    }
} 
```

这是矩形内的绘制方法：

```
public void draw(GL10 gl){
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    gl.glFrontFace(GL10.GL_CW); 

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);

    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertBuff);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuff);

    gl.glDrawElements(GL10.GL_TRIANGLES, pIndex.length, GL10.GL_UNSIGNED_SHORT, pBuff);// Draw the vertices as triangle strip
    //gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
} 
```

即使当我将帧速率设置为 60 时，仍然会有一些卡顿，这令人沮丧，因为在过去的一个月里，我一直在努力让帧速率平滑。我正在 Galaxy s2 上进行测试，所以我知道它不是硬件。如果所有这些代码都是正确的，您认为它可能是活动中的其他内容吗？我的 GLSurfaceView 实际上是一个自定义视图。即使让单个纹理以恒定速度平滑移动也会很好。

# datagrid - 以编程方式在 Dojo Datagrid 中自定义列排序

> ID：12219192
> 
> 赞同：4
> 
> 时间：2012-08-31T16:23:07.530
> 
> 标签：datagrid, dojo

我以`dojox.grid.datagrid`编程方式创建了一个，我需要对列进行自定义排序。为此，我尝试使用`ItemFileWriteStore.comparatorMap['field'] = comparatorFunc`. 但是我的比较器函数永远不会被调用。

知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T08:14:52.110

我已经对数据网格进行了自定义排序。(Dojo-1.4) 示例代码在这里：

```
function(response, ioArgs){                                                             
                    queryGrid.queryOptions={ignoreCase:true};
                    queryGrid.setStore(new dojo.data.ItemFileReadStore(response[responseResult]));  
                    setCustomSort(queryGrid.store);

..

}

function setCustomSort(store){
            if(!store.comparatorMap){
                store.comparatorMap = {};
            }

            store.comparatorMap["unresolvedHrs"] = sortNum;
            store.comparatorMap["tat"] = sortNum;
        }

function sortNum(a, b){
            var _a = convertTimeToNum(a);
            var _b = convertTimeToNum(b);
            var ret = 0;
            if (_a > _b) {
                ret = 1;
            }
            if (_a < _b) {
                ret = -1;
            }
            return ret;
        } 
```

这里的 convertTimeToNum 是将时间格式值转换为以分钟为单位的数字。

# macos - 在带有 Darwin 12.1.0 的 Mac 上安装 gcc-4.0.1 时出现“ld: unknown/unsupported architecture name for: -arch i686”错误

> ID：12219194
> 
> 赞同：2
> 
> 时间：2012-08-31T16:23:22.023
> 
> 标签：macos, gcc, linker, gcc4

我正在尝试在带有 Darwin 12.1.0 的 Mac 上安装 gcc-4.0.1 。我用`./configure --prefix=/usr/local/gcc-4.0.1 --enable-languages=c,c++`. 当我运行 make 时，它​​给了我以下错误消息。

```
...
ln -s libgcc_s.1.0.dylib ./libgcc_s.dylib
ld: unknown/unsupported architecture name for: -arch i686
/usr/bin/libtool: internal link edit command failed
make[2]: *** [libgcc_s.dylib] Error 1
make[1]: *** [libgcc.a] Error 2
make: *** [all-gcc] Error 2 
```

我在网上搜索了很长时间，但我找不到有效的解决方案。如果您之前遇到过类似情况或有任何建议，请在下方留言。提前致谢！

# types - 如何确定 opa 中变量的类型？

> ID：12219199
> 
> 赞同：0
> 
> 时间：2012-08-31T16:23:57.910
> 
> 标签：types, functional-programming, opa

我正在学习 Opa ( [opalang.org](http://www.opalang.org) )。我试图找出如何确定变量的类型。这可以是例如一个函数

```
typeof a // in javascript, this returns the type of a 
```

API 文档包含对 OpaValue.typeof(a) 的[描述](http://doc.opalang.org/value/stdlib.core/OpaValue/typeof)，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:44:12.517

这是一个简短的例子：

```
int hello = 42
hello_type = OpaValue.typeof(hello)
Log.info("Hello type:", "{hello_type}") 
```

但是我很惊讶你想操纵 Opa 类型。你的用途是什么？

# sql - OleDB 目标在错误时执行完全回滚，批量插入任务不会

> ID：12219200
> 
> 赞同：2
> 
> 时间：2012-08-31T16:23:59.153
> 
> 标签：sql, sql-server, sql-server-2005, ssis

我正在使用 SSIS 和 BIDS 处理包含大量（数百万）记录的文本文件。我决定使用批量插入任务，它工作得很好，但是目标表需要一个附加列，插入操作的默认值和批量插入任务停止工作。之后，我决定使用具有默认值的派生列和 OleDB 目标来插入批量数据。它解决了我的最后一个问题，但又产生了一个新问题：如果在 OleDB 目标中插入数据时出错，则它会执行完整回滚，并且我的表上没有添加任何行，但是当我使用批量插入任务时，那里是基于 BatchSize 配置的行。让我用一个示例来解释它：

*   我使用一个 5000 行的文本文件。该文件在第 3000 行和第 4000 行之间包含重复的 ID（故意）。
*   在启动 DTS 之前，目标表是完全空的。
*   使用批量插入任务，在引发错误（并且 DTS 停止）后，目标表有 3000 行。我将*BatchSize*属性设置为 1000。
*   使用 OleDB Destination，出现错误后，目标表有 0 行！我将*Rows per batch*属性设置为 1000，*Maximum insert commit size*设置为其最大值：2147483647。我尝试将最后一个更改为 0，但没有效果。

这是 OleDB Destination 的正常行为吗？有人可以为我提供有关处理这些任务的指南吗？我应该忘记使用这些任务并使用T-SQL中的[批量插入吗？](http://msdn.microsoft.com/es-es/library/ms188365%28v=sql.90%29.aspx)

作为旁注，我还尝试按照`KEEPNULLS`在[批量导入期间保留 Nulls 或 UseDefault 值（SQL Server）](http://msdn.microsoft.com/en-us/library/ms187887.aspx)中的说明不使用 OleDB 目标任务，但它不起作用（可能只是我）。

* * *

编辑：有关该问题的附加信息。

表结构（示例）

药片

```
id int, name varchar(50), processed int default 0 
```

CSV 文件（示例）

```
1, hello
2, world 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:29:30.433

批量插入没有回滚，这就是它们速度快的原因。

* * *

看看使用格式文件：http: [//msdn.microsoft.com/en-us/library/ms179250.aspx](http://msdn.microsoft.com/en-us/library/ms179250.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:01:39.963

您可以将其放置在 SSIS中的[事务中（](http://msdn.microsoft.com/en-us/library/ms137690(v=sql.90))[您需要运行 MSDTC ），或者您可以使用](http://bisherryli.wordpress.com/2011/01/22/transactions-in-sql-server-integration-services-ssis/)[try-catch](https://stackoverflow.com/questions/41869/is-sql-server-bulk-insert-transactional)创建 T-SQL 脚本来处理批量插入的任何异常（可能只是回滚或提交）。

# android - armeabi 和 armeabi-v7a 的区别

> ID：12219202
> 
> 赞同：26
> 
> 时间：2012-08-31T16:24:01.250
> 
> 标签：android, android-ndk, cpu-architecture, freepascal, abi

据我从文档中可以看出，Android NDK 中两种支持的 ARM 架构风格之间的区别仅在于支持的 CPU 指令集。真的是这样吗？调用约定、系统调用顺序或其他方面没有区别吗？

我想知道如果我将模块编译为 ARM 目标文件（使用 NDK 以外的编译器 - 特别是 Free Pascal），将 ARMv6 指定为架构，然后将其链接到 armeabi 和 armeabi-v7a 共享库，会发生什么。FPC 位不应该既不执行系统调用也不执行 Java 调用，除非通过我自己的基于 C 的接口。

编辑：一个 hello world 库，使用 FPC for ARM 编译，链接并在 ARMv7a 模拟器下运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T09:32:23.147

您绝对可以在 v7 上运行 armeabi 共享库，并且可以从另一个模块调用它的导出函数。所以，为了安全起见，我会`.so`从你的 Pascal 代码中创建一个单独的文件，坚持使用 armeabi（可能使用一些 C/C++ 包装器），并将这个共享库与你的 armeabi 和 armeabi-v7a 库一起使用。以正确顺序加载所有内容的最简单方法是使用

```
System.loadLibrary("pascal"); // armeabi
System.loadLibrary("c++"); // the platform will choose armeabi or armeabi-v7a 
```

# .net - netTCPBinding、wsHttpBinding 幕后

> ID：12219203
> 
> 赞同：1
> 
> 时间：2012-08-31T16:24:10.230
> 
> 标签：.net, wcf, networking

我是网络世界的新手，因此对幕后的工作方式有些困惑。这对我决定为我的服务选择哪个绑定很重要。我的印象是网络上的通信主要通过 TCP/IP 协议进行。我通过了 TCP/IP 协议，根据我的理解，HTTP 是一个应用层协议。在幕后，应用层与传输层通信，传输层使用 TCP 或 UDP 协议在网络上传递信息。如果是这种情况，那么 HTTP 协议的用途是什么？我确定拼图中缺少某些东西，但我无法找出它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:02:36.817

WCF 支持 4 种传输协议 - HTTP、TCP、MSMQ 和命名管道。

建议阅读[此](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx)MSDN 杂志文章和此[MSDN](http://msdn.microsoft.com/en-us/library/ms731092.aspx)帖子以进一步了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T15:27:45.207

首先，W3C 回答[了为什么要使用新协议？](http://www.w3.org/Protocols/WhyHTTP.html)早在 1991 年。虽然他们基本上说它不是邮件、文件传输、新闻或搜索。

不过，我有一种感觉，您的问题是为什么要使用 wsHttpBinding，因为无论如何，它下面都是 TCP。Microsoft 的 netTCPBinding 是 Microsoft 专有协议。它旨在在 C# 位于管道的两端时使用，此外，它主要针对两端的开发将由单个实体管理时，无论是单个开发人员、团队还是企业集团。因为获得正确的数据类型可能很棘手。在[NetTcpBinding 类的](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx)**备注**中我们发现：

> 此绑定是适当的 Windows Communication Foundation (WCF) 系统为通过 Intranet 进行通信提供的选择。
> 
> NetTcpBinding 的默认配置比 WSHttpBinding 提供的配置更快，但它仅适用于 WCF 到 WCF 通信。

相比之下，wsHttpBinding 的设计考虑了互操作性。它至少在某种程度上符合现有的 Web 服务标准。从[WSHttpBinding 类的](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpbinding.aspx)**备注**中：

> WSHttpBinding 与 BasicHttpBinding 类似，但提供了更多的 Web 服务功能。它使用 HTTP 传输并提供消息安全性，就像 BasicHttpBinding 一样，但它还提供事务、可靠消息传递和 WS-Addressing，默认情况下启用或通过单个控件设置可用。

列出的大多数附加功能都是现代[SOAP](http://en.wikipedia.org/wiki/SOAP)堆栈的一部分。

最后，对于那些想发明他们的协议的人，这篇文章回答了[为什么[你应该使用] HTTP？](http://timothyfitz.com/2009/02/12/why-http/)反而。

# c# - 测试客户端和服务器套接字应用程序时如何指定有效端口？

> ID：12219205
> 
> 赞同：0
> 
> 时间：2012-08-31T16:24:21.507
> 
> 标签：c#, sockets, tcpclient

我正在尝试使用本地计算机上的套接字将客户端连接到 C# 中的服务器测试程序。但是，对于我尝试的每个端口号，我都会收到“服务器主动拒绝连接”错误。

如何选择一个有效的端口号来测试示例客户端和服务器之间的套接字？是否有有效的端口号。我可以用于这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:53:57.183

您可能无法绑定到所选服务器上所需端口的最可能原因：

*   您的系统配置了防火墙以阻止相关端口上的出站连接。
*   您的网络通过防火墙或代理/网关施加了这样的限制。

*   服务器的网络不允许相关端口上的入站连接，无论是通过防火墙还是代理/网关。

*   服务器本身有防火墙，不允许有问题的端口上的入站连接。

*最后，服务器上的相关守护程序*始终可能没有运行。

检查您的端口：

*   **0–1023 (0x000–0x03FF)**
    是为“知名端口”保留的，通常有一定的限制，至少对于服务器端而言。要求客户端使用知名端口的特殊权限没有多大意义。

*   **1024–65535 (0x0400–0xFFFF)**
    假定开放供任何人使用。

    但是...每个系统都有一系列端口指定为通常不应使用的[*临时端口。*](http://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html)Berkeley 套接字使用 1024–4999 作为临时范围，但该范围因系统而异，并且 [通常] 是可配置的。

# javascript - 用 ' 和 " 替换我的 ' 和 " javascript 代码中的字符是什么？

> ID：12219206
> 
> 赞同：1
> 
> 时间：2012-08-31T16:24:30.727
> 
> 标签：javascript, character-encoding, escaping

来源（.Net 3.5）

```
 output.AddAttribute(HtmlTextWriterAttribute.Onclick, "alert(\"In order to prevent loss of your work, you may only use the progress grids within the same section.\");return false"); 
```

在浏览器中渲染：

```
<a onclick="alert(&quot;In order to prevent loss of your work, you may only use the progress grids within the same section.&quot;);return false" href="myPage.aspx#1"> 
```

这意味着 JavaScript 不会执行。

同样，如果我用单引号替换内部引号，它会转义为 '

在 IIS 版本 7 上运行

它似乎与浏览器无关（IE 8,9 FF 15、Safari 7、Chrome）

导致这种情况发生的要么是 IIS，要么是 .Net 配置。

当然，有趣的是它昨晚运行良好，现在坏了。

有没有办法抑制这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:26:53.510

> 这意味着 JavaScript 不会执行。

不，它没有。它防止`"`数据中的字符终止 HTML 属性值。

HTML 解析器会将 HTML 解码为文本（转化`&quot;`为`"`等）并将其传递给 JavaScript 解析器。

> 有没有办法抑制这种行为？

将第三个参数 ( `fEncode`) 设置[`AddAttribute`](http://msdn.microsoft.com/en-us/library/ms153285.aspx)为 false。这将**破坏**您的 HTML（以及您的脚本）。

# poco - 具有 POCO 实体的 EF 4.5 .tt 文件

> ID：12219209
> 
> 赞同：1
> 
> 时间：2012-08-31T16:24:51.497
> 
> 标签：poco, t4, edmx, entity-framework-5

我想在 EF 4.5 edmx .tt 文件中放置两个 using 指令，但遇到了麻烦。4.0 的语法不同并且更容易操作。

任何帮助将不胜感激.... EF 4.0 语法：

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.ServiceModel; 
```

4.5 语法

```
public string UsingDirectives(bool inHeader, bool includeCollections = true)
    {
        return inHeader == string.IsNullOrEmpty(_code.VsNamespaceSuggestion())
            ? string.Format(
                CultureInfo.InvariantCulture,
                "{0}using System;{1}" +
                "{2}",
                inHeader ? Environment.NewLine : "",
                includeCollections ? (Environment.NewLine + "using System.Collections.Generic;") : "",
                inHeader ? "" : Environment.NewLine)
            : "";
    } 
```

我需要在 .tt 文件中添加以下属性：

EF 4.0 语法

```
[Serializable]
[DataContract(IsReference = true)]
<#=Accessibility.ForType(entity)#> <#=code.SpaceAfter(code.AbstractOption(entity))#>partial class <#=code.Escape(entity)#><#=code.StringBefore(" : ", code.Escape(entity.BaseType))#>
{
<# 
```

4.5 语法

```
public string EntityClassOpening(EntityType entity)
    {
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} {1}partial class {2}{3}",
            Accessibility.ForType(entity),
            _code.SpaceAfter(_code.AbstractOption(entity)),
            _code.Escape(entity),
            _code.StringBefore(" : ", _typeMapper.GetTypeName(entity.BaseType)));
    } 
```

4.0 语法

```
void WriteProperty(string accessibility, string type, string name, string getterAccessibility, string setterAccessibility)
{
#> [DataMember]
    <#=accessibility#> <#=type#> <#=name#> { <#=getterAccessibility#>get; <#=setterAccessibility#>set; }
<#+
} 
```

4.5 语法我找不到任何类似的语法**

基本上，我希望从 edmx 文件重新生成类时的输出如下所示：

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization; using System.ServiceModel; 
namespace YeagerTechModel
{
   [Serializable] 
   [DataContract(IsReference = true)]    
   public partial class Priority 
    {
        public Priority()
        {
            this.Projects = new HashSet<Project>();
        }

     [DataMember]         
     public short PriorityID { get; set; }
    [DataMember]         
     public string Description { get; set; }
     [DataMember]         
     public virtual ICollection<Project> Projects { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:36:43.523

看不懂代码不知道怎么改，你是认真的吗？它只是一个字符串格式……即使您不了解格式，您仍然可以像在以前的版本中那样直接更新模板，因此您甚至不了解文本模板的工作原理。你真的应该花一些时间在基础教程上。

这里有一些例子

用途：

```
public string UsingDirectives(bool inHeader, bool includeCollections = true)
{
    var usings = new List<string>() {
        "using System;",
        "using System.Runtime.Serialization;",
        "using System.ServiceModel;"
    };

    if (includeCollections) {
        usings.Add("using System.Collections.Generic;");
    }

    return inHeader == string.IsNullOrEmpty(_code.VsNamespaceSuggestion())
        ? string.Format(
            CultureInfo.InvariantCulture,
            "{0}{1}{2}",
            inHeader ? Environment.NewLine : "",
            String.Join(Environment.NewLine, usings),
            inHeader ? "" : Environment.NewLine)
        : "";
} 
```

班级：

```
public string EntityClassOpening(EntityType entity)
{
    const string attributes = "[Serializable,  DataContract(IsReference = true)]";

    return string.Format(
        CultureInfo.InvariantCulture,
        "{0}{1}{2} {3}partial class {4}{5}",
        attributes,
        Environment.NewLine,
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", _typeMapper.GetTypeName(entity.BaseType)));
} 
```

特性：

```
public string Property(EdmProperty edmProperty)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "[DataMember] {0} {1} {2} {{ {3}get; {4}set; }}",
        Accessibility.ForProperty(edmProperty),
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty),
        _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(edmProperty)));
}

public string NavigationProperty(NavigationProperty navigationProperty)
{
    var endType = _typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType());
    return string.Format(
        CultureInfo.InvariantCulture,
        "[DataMember] {0} {1} {2} {{ {3}get; {4}set; }}",
        AccessibilityAndVirtual(Accessibility.ForProperty(navigationProperty)),
        navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType,
        _code.Escape(navigationProperty),
        _code.SpaceAfter(Accessibility.ForGetter(navigationProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(navigationProperty)));
} 
```

# c++ - winapi - 如何以编程方式将多个菜单栏添加到 MFC 中的框架

> ID：12219217
> 
> 赞同：0
> 
> 时间：2012-08-31T16:25:12.183
> 
> 标签：c++, windows, winapi

我知道如何为 CFrameWnd,(CFrameWnd::SetMenu) 操作顶级 CMenu，但我想知道如何将多个菜单栏添加到框架？这可能需要使用工具栏吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T01:10:29.440

是的，一个窗口只能有一个真正的菜单栏，如果你想要多个，那么你需要使用工具栏来代替。

# c++ - 复制/插入矢量

> ID：12219218
> 
> 赞同：3
> 
> 时间：2012-08-31T16:25:16.850
> 
> 标签：c++, vector, insert, copy

我正在阅读 Accelerated C++，对于下面发布的问题，我需要一些建议。

1.  这段代码有什么作用？

    ```
    vector<int>u(10,100)    
    vector<int>v;    
    copy(u.begin(), u.end(), v.end()); 
    ```

2.  提供 2 种可能的方法来纠正程序，并列出其优缺点。

第一部分非常简单，但我在第二部分需要帮助。我提供了 3 种方法，我想知道是否还有其他可能的解决方案。

另外，我不确定我的方法的优缺点。我做了一个尝试，所以请给我你的意见。

* * *

# `copy()`

```
std::vector<int> u(10, 100);
std::vector<int> v;
std::vector<int> w ;
std::vector<int> x ;
std::copy(u.begin(), u.end(), back_inserter(v)); // 1st way of doing 
```

### 好处

*   `std::copy()`不会改变迭代器的值
*   由于 的参数`std::copy()`不依赖于具体的容器，所以代码可以和不同的容器复用

### 缺点

*   `std::back_inserter()`仅适用于顺序容器，因此不能与地图一起使用
*   将错误的迭代器值分配给第三个参数`std::copy()`不会导致编译器错误，但程序的行为可能会有所不同

* * *

# `insert()`

```
w.insert(w.end(), u.begin(), u.end() ); 
```

### 好处

*   `insert()`可与大多数容器一起使用

### 缺点

一个都想不出来

* * *

# `push_back()`

```
for ( std::vector<int>::const_iterator it = w.begin(); it != w.end(); ++it )
{
    x.push_back( *it );
} 
```

### 好处

一个都想不出来

### 缺点

*   慢于`std::copy()`或`vector::insert()`。

* * *

我的方法正确吗？还有哪些其他可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:51:15.593

您的标题表明您对复制向量感兴趣，但您的代码表明您对插入向量感兴趣（请记住，尽管它的名称`std::copy`在这里用于插入）。

如果要复制：

```
// This requires the vector types to match exactly
std::vector<int> v = u;

// In case the vector differ in their value_type
// This requires that the value_type of the source be
// convertible to the value_type of the destination
std::vector<int> v(u.begin(), u.end()); 
```

如果要插入，那么您描述的两种方法（使用`std::copy`加上迭代器适配器或调用`insert`成员）都是合适的。您应该根据您是在特定代码位置使用容器还是使用迭代器来选择一个。（使用迭代器时，使用迭代器适配器的负担由传递迭代器的客户端承担，因此无需担心`push_back`。）如果您只有迭代器，那么调用 eg`insert`根本不是一种选择。如果您确实有容器并且其中一名成员可以完成这项工作，那么请随意使用它。不过，我不会认为使用算法是错误的。

尝试将显式循环作为最后的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T01:19:53.930

It seems to me, the authors mean std::copy() still should be used. So the first solution would be (as you suggested):

```
std::copy(u.begin(), u.end(), back_inserter(v)); 
```

Another one could be:

```
v.resize(u.size());
std::copy( u.begin(), u.end(), v.begin() ); 
```

# c# - 从 .Net 调用 Matlab 对象的（目录）方法

> ID：12219219
> 
> 赞同：7
> 
> 时间：2012-08-31T16:25:49.983
> 
> 标签：c#, matlab

我定义了一个类，其中包含存储在方法目录中的一堆方法。我可以实例化该类并在 matlab 中调用它的方法。但是，如果我尝试从 .NET/COM 执行相同操作，我会收到以下错误消息：

```
"??? Reference to non-existent field 'test'.\n\n" 
```

这里的**测试**是方法。

我的类是从句柄派生的，我尝试了两种可能性：类文件中定义的方法和目录方法。都不行！

任何反馈将不胜感激。非常感谢。

PS：

C#代码：

```
MLApp.MLApp matlab = new MLApp.MLApp();

matlab.Execute("clear;");
matlab.Execute("Object = Class1();");
string test = matlab.Execute("Object.test()"); 
```

工作matlab代码：

```
clear;
Object = Class1();
Object.test() 
```

PP:

只需仔细检查从 C# 代码调用时工作的 Matlab 脚本是否不工作：

Matlab类定义：

```
classdef Test < handle
    methods         
        function [c, obj] = add(obj, a, b) 
            c = a + b;  
        end
    end % methods
end %classdef 
```

Matlab脚本：

```
clear;
Test = Test();
result = Test.add(1, 3); 
```

C#代码：

```
MLApp.MLApp matlab = new MLApp.MLApp();

object result;

matlab.Execute("clear;");
matlab.Execute("Test = Test();");
matlab.Execute("result = Test.add(1, 3);");
matlab.GetWorkspaceData("result", "base", out result); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:21:57.940

事实证明，您不能使用与类名相同的“对象实例名”。所以：

```
MLApp.MLApp matlab = new MLApp.MLApp();

object result;

matlab.Execute("clear;");
matlab.Execute("X = Test();");
matlab.Execute("result = X.add(1, 3);");
matlab.GetWorkspaceData("result", "base", out result); 
```

作品！Mathworks 提出了这个错误（他们可能会在未来的版本中解决这个问题）。

基督教

# android - 在 XML 中包含 SQL

> ID：12219220
> 
> 赞同：3
> 
> 时间：2012-08-31T16:25:53.537
> 
> 标签：android, sql, xml

是否可以将 XML 中的 SQL 查询包含到`raw/`目录中？例如：

```
<query name ="mainQuery">SELECT e.*, et.name as name FROM employee e, employee_type et where e.type = et._id and et._id < et._id</query> 
```

或者

```
<query name ="mainQuery" value="SELECT e.*, et.name as name FROM employee e, employee_type et where e.type = et._id and et._id < et._id" /> 
```

这两个都给出了 XML 结构的错误。一种解决方法是使用`&lt;`和朋友，但这对于 SQL 语法来说确实没有意义。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:31:25.610

您是否考虑过将查询放在评论中，然后从您的活动中阅读评论？

见这里： http: [//www.codeproject.com/Articles/11178/Writing-SQL-queries-in-XML-A-support-intensive-app](http://www.codeproject.com/Articles/11178/Writing-SQL-queries-in-XML-A-support-intensive-app)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:58:42.713

您可以使用[CDATA](http://en.wikipedia.org/wiki/CDATA)。例子：

```
<query name ="mainQuery"><![CDATA[SELECT e.*, et.name as name FROM employee e, employee_type et where e.type = et._id and et._id < et._id]]></query> 
```

# math - 用外行的话来说，8 位补码中 6 位八进制的“计算”？

> ID：12219224
> 
> 赞同：0
> 
> 时间：2012-08-31T16:26:29.133
> 
> 标签：math, octal

如何在 8 的补码中找到 6 位八进制的正/负范围？据我了解，它只是一半 - 1：

`000001 - 377777 positives, 400000 - 77777 negatives`

377777 是最大的正数，而 777777 是最大的负数吗？

如果这是正确的，在我看来 377777 和 777777 是相互补充的。但是，根据我的阅读，要找到补码，请从基数中减去数字。这样做，377777 将等于：

`7 - 3 = 4`

`7 - 7 = 0`

`7 - 7 = 0`

`7 - 7 = 0`

`7 - 7 = 0`

`7 - 7 = 0`

`= 400000`

这表明 400000 是 37777 的补码（在我看来是相反的）。

# python - 如何在pdb中的进程之间切换

> ID：12219231
> 
> 赞同：2
> 
> 时间：2012-08-31T16:26:58.627
> 
> 标签：python, pdb

我正在调试一个 Python 应用程序，它在某些时候使用 os.fork() 。在评估函数后，PDB 仍保留在父进程中（从函数返回的值中可以看出）。

如何在 PDB 中的子进程和父进程之间切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:01:16.360

似乎它会在某个时候自动切换（可能是 I/O）。如果你想强制它，你应该调用 time.sleep()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:53:01.563

没有办法用 pdb 做到这一点。您最好的选择是在 fork 之后的子进程内启动您的 pdb 会话（使用 pdb.set_trace()）。

# c# - xml签名DS前缀？

> ID：12219232
> 
> 赞同：9
> 
> 时间：2012-08-31T16:27:00.960
> 
> 标签：c#, xml, frameworks, digital-signature, prefix

有没有办法用 RSA 对 XML 文件进行签名并使用命名空间前缀“ds:Signature”而不是“Signature”？我花了很多时间试图解决这个问题，据我所知，没有解决方案。

似乎它在 System.Security.Cryptography.Xml.Signature 类中是硬编码的。

```
XmlElement element = document.CreateElement("Signature", "http://www.w3.org/2000/09/xmldsig#"); 
```

如果有人知道解决方案，我需要像这样签名它，因为导入它的软件会使用“ds：signature”验证它，因此使用“ds”前缀的软件会像这样验证它：

```
 public static bool VerifySignature(XmlDocument doc, RSA key, string prefix)
    {
        SignedXml xml = new SignedXml(doc);
        string str = "Signature";
        if (!string.IsNullOrEmpty(prefix))
        {
            str = string.Format("{0}:{1}", prefix, str);
        }
        XmlNodeList elementsByTagName = doc.GetElementsByTagName(str);
        xml.LoadXml((XmlElement)elementsByTagName[0]);
        return xml.CheckSignature(key);
    }

  VerifySignature(xmlDoc, rsa, "ds"); 
```

通常它的标志是这样的：

```
<kk>blabla<Signature xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" /><Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" /><DigestValue>rVL2nKjPTBhL9IDHYpu69OiE8gI=</DigestValue></Reference></SignedInfo><SignatureValue>CfXW9D/ErmHjzxIjy0/54/V3nst6j/XXcu7keR17LApfOZEpxjEvAlG3VnBZIi3jxQzU6t9RkmfDyngcRZccJByuuA6YDwFTQxZNRgu2GRoZxMKWnkm+MtQ0jH0Fo78GivCxV+iIewZvsrUQLzG01cXuZSH/k2eeMUaEooJaLQiYpO2aNVn5xbosTPtGlsACzFWz34E69/ZeeLZbXLc3jpDO+opxdYJ5e+Tnk/UM2Klt+N+m7Gh/sUNTPgkDiwP3q3y3O9tvCT0G2XmQaWBP4rw9TIoYHQtucm2b8R2JeggbeRKOetbRYV218RT8CK2Yuy0FIUlQXdabKyp9F96Yc55g8eNe10FGtgietH2iqquIVFLCA8fu3SZNLDPMoyHnVNKdBvI35+S8hrAaybEkMvo7iYnUSY5KrlGSfGGtfQXdaISutAzcnGPDFXgZXPNzNy7eL0u+Lt3yWWkj7wh6Zeh4fH2+nXDWYCWbLpegAEX4ZWSI5Ts6D1TplMJTGH1F0GyflehH4u+W4Lc3TvkB4dWjEuiKgnpl3hcvoj2CWFaeAxXMd/64tU/YMm8+1gSBjkVH6oV+QlI/m0z6M8FPVEVC2as0wLG2woVwmzVLcaQKyPi7NN4eO9ea7QNfaRHaofU4LQO/Y3FNJOP+uMfYlGJKWSr3qv29+BQjeNldNJY=</SignatureValue></Signature></kk> 
```

我需要它这样做：

```
<kk>blabla<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /><ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" /><ds:Reference URI=""><ds:Transforms><ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /></ds:Transforms><ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" /><ds:DigestValue>rVL2nKjPTBhL9IDHYpu69OiE8gI=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>CfXW9D/ErmHjzxIjy0/54/V3nst6j/XXcu7keR17LApfOZEpxjEvAlG3VnBZIi3jxQzU6t9RkmfDyngcRZccJByuuA6YDwFTQxZNRgu2GRoZxMKWnkm+MtQ0jH0Fo78GivCxV+iIewZvsrUQLzG01cXuZSH/k2eeMUaEooJaLQiYpO2aNVn5xbosTPtGlsACzFWz34E69/ZeeLZbXLc3jpDO+opxdYJ5e+Tnk/UM2Klt+N+m7Gh/sUNTPgkDiwP3q3y3O9tvCT0G2XmQaWBP4rw9TIoYHQtucm2b8R2JeggbeRKOetbRYV218RT8CK2Yuy0FIUlQXdabKyp9F96Yc55g8eNe10FGtgietH2iqquIVFLCA8fu3SZNLDPMoyHnVNKdBvI35+S8hrAaybEkMvo7iYnUSY5KrlGSfGGtfQXdaISutAzcnGPDFXgZXPNzNy7eL0u+Lt3yWWkj7wh6Zeh4fH2+nXDWYCWbLpegAEX4ZWSI5Ts6D1TplMJTGH1F0GyflehH4u+W4Lc3TvkB4dWjEuiKgnpl3hcvoj2CWFaeAxXMd/64tU/YMm8+1gSBjkVH6oV+QlI/m0z6M8FPVEVC2as0wLG2woVwmzVLcaQKyPi7NN4eO9ea7QNfaRHaofU4LQO/Y3FNJOP+uMfYlGJKWSr3qv29+BQjeNldNJY=</ds:SignatureValue></ds:Signature></kk> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T16:40:16.747

> 如果有人知道解决方案，我需要这样签名，因为导入它的软件会使用 "ds:signature" 验证它，所以使用 "ds" 前缀

前缀*应该*不重要——重要的是元素所在的*命名*空间。命名空间的表达方式无关紧要。如果是这样，那表明验证代码存在缺陷，我会说。

但是，如果您*真的*想这样做，是否有任何理由不想将元素替换为具有相同内容的元素，而是使用您想要的前缀？在 LINQ to XML 中做到这一点应该不难。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-09T21:46:31.503

我在[这里找到了解决方案](http://social.msdn.microsoft.com/Forums/pl-PL/xmlandnetfx/thread/e57fcba9-3b42-4a63-acb9-aedf06e29cd8)

```
using System;
using System.Reflection;
using System.Security.Cryptography.Xml;
using System.Security.Cryptography;
using System.Collections.Generic;
using System.Text;
using System.Xml;

namespace mysign
{
public class PrefixedSignedXML : SignedXml
{
    public PrefixedSignedXML(XmlDocument document)
        : base(document)
    { }

    public PrefixedSignedXML(XmlElement element)
        : base(element)
    { }

    public PrefixedSignedXML()
        : base()
    { }

    public void ComputeSignature(string prefix)
    {
        this.BuildDigestedReferences();
        AsymmetricAlgorithm signingKey = this.SigningKey;
        if (signingKey == null)
        {
            throw new CryptographicException("Cryptography_Xml_LoadKeyFailed");
        }
        if (this.SignedInfo.SignatureMethod == null)
        {
            if (!(signingKey is DSA))
            {
                if (!(signingKey is RSA))
                {
                    throw new CryptographicException("Cryptography_Xml_CreatedKeyFailed");
                }
                if (this.SignedInfo.SignatureMethod == null)
                {
                    this.SignedInfo.SignatureMethod = "http://www.w3.org/2000/09/xmldsig#rsa-sha1";
                }
            }
            else
            {
                this.SignedInfo.SignatureMethod = "http://www.w3.org/2000/09/xmldsig#dsa-sha1";
            }
        }
        SignatureDescription description = CryptoConfig.CreateFromName(this.SignedInfo.SignatureMethod) as SignatureDescription;
        if (description == null)
        {
            throw new CryptographicException("Cryptography_Xml_SignatureDescriptionNotCreated");
        }
        HashAlgorithm hash = description.CreateDigest();
        if (hash == null)
        {
            throw new CryptographicException("Cryptography_Xml_CreateHashAlgorithmFailed");
        }
        this.GetC14NDigest(hash, prefix);
        this.m_signature.SignatureValue = description.CreateFormatter(signingKey).CreateSignature(hash);
    }

    public XmlElement GetXml(string prefix)
    {
        XmlElement e = this.GetXml();
        SetPrefix(prefix, e);
        return e;
    }

    //Invocar por reflexión al método privado SignedXml.BuildDigestedReferences
    private void BuildDigestedReferences()
    {
        Type t = typeof(SignedXml);
        MethodInfo m = t.GetMethod("BuildDigestedReferences", BindingFlags.NonPublic | BindingFlags.Instance);
        m.Invoke(this, new object[] { });
    }

    private byte[] GetC14NDigest(HashAlgorithm hash, string prefix)
    {
        //string securityUrl = (this.m_containingDocument == null) ? null : this.m_containingDocument.BaseURI;
        //XmlResolver xmlResolver = new XmlSecureResolver(new XmlUrlResolver(), securityUrl);
        XmlDocument document = new XmlDocument();
        document.PreserveWhitespace = true;
        XmlElement e = this.SignedInfo.GetXml();
        document.AppendChild(document.ImportNode(e, true));
        //CanonicalXmlNodeList namespaces = (this.m_context == null) ? null : Utils.GetPropagatedAttributes(this.m_context);
        //Utils.AddNamespaces(document.DocumentElement, namespaces);

        Transform canonicalizationMethodObject = this.SignedInfo.CanonicalizationMethodObject;
        //canonicalizationMethodObject.Resolver = xmlResolver;
        //canonicalizationMethodObject.BaseURI = securityUrl;
        SetPrefix(prefix, document.DocumentElement); //establecemos el prefijo antes de se que calcule el hash (o de lo contrario la firma no será válida)
        canonicalizationMethodObject.LoadInput(document);
        return canonicalizationMethodObject.GetDigestedOutput(hash);
    }

    private void SetPrefix(string prefix, XmlNode node)
    {
        foreach (XmlNode n in node.ChildNodes)
            SetPrefix(prefix, n);
        node.Prefix = prefix;
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-14T11:23:16.170

我尝试了这些解决方案，但没有奏效。但是，通过查看 .NET 源代码 ( [http://referencesource.microsoft.com/](http://referencesource.microsoft.com/) )，我们可以看到，通过向 SignedXml 提供派生的 XmlDocument 类（可以在其中添加命名空间），可以轻松实现这一点。但是，在“SignedInfo”和后代中具有“ds”前缀将导致签名失败。在不破坏签名的情况下，这是我能做的最好的事情：

* * *

XmlDsigDocument.cs

```
using System;
using System.Collections.Generic;
using System.Security.Cryptography.Xml;
using System.Text;
using System.Xml;

namespace CustomSecurity
{
class XmlDsigDocument : XmlDocument
{
    // Constants
    public const string XmlDsigNamespacePrefix = "ds";

    /// <summary>
    /// Override CreateElement function as it is extensively used by SignedXml
    /// </summary>
    /// <param name="prefix"></param>
    /// <param name="localName"></param>
    /// <param name="namespaceURI"></param>
    /// <returns></returns>
    public override XmlElement CreateElement(string prefix, string localName, string namespaceURI)
    {
        // CAntonio. If this is a Digital signature security element, add the prefix. 
        if (string.IsNullOrEmpty(prefix))
        {
            // !!! Note: If you comment this line, you'll get a valid signed file! (but without ds prefix)
            // !!! Note: If you uncomment this line, you'll get an invalid signed file! (with ds prefix within 'Signature' object)
            //prefix = GetPrefix(namespaceURI);

            // The only way to get a valid signed file is to prevent 'Prefix' on 'SignedInfo' and descendants.
            List<string> SignedInfoAndDescendants = new List<string>();
            SignedInfoAndDescendants.Add("SignedInfo");
            SignedInfoAndDescendants.Add("CanonicalizationMethod");
            SignedInfoAndDescendants.Add("InclusiveNamespaces");
            SignedInfoAndDescendants.Add("SignatureMethod");
            SignedInfoAndDescendants.Add("Reference");
            SignedInfoAndDescendants.Add("Transforms");
            SignedInfoAndDescendants.Add("Transform");
            SignedInfoAndDescendants.Add("InclusiveNamespaces");
            SignedInfoAndDescendants.Add("DigestMethod");
            SignedInfoAndDescendants.Add("DigestValue");
            if (!SignedInfoAndDescendants.Contains(localName))
            {
                prefix = GetPrefix(namespaceURI);
            }
        }

        return base.CreateElement(prefix, localName, namespaceURI);
    }

    /// <summary>
    /// Select the standar prefix for the namespaceURI provided
    /// </summary>
    /// <param name="namespaceURI"></param>
    /// <returns></returns>
    public static string GetPrefix(string namespaceURI)
    {
        if (namespaceURI == "http://www.w3.org/2001/10/xml-exc-c14n#")
            return "ec";
        else if (namespaceURI == SignedXml.XmlDsigNamespaceUrl)
            return "ds";

        return string.Empty;
    }
}
} 
```

这用于 SignedXml 创建：

```
 // Create a new XML document.
    XmlDsigDocument doc = new XmlDsigDocument();

    // Load the passed XML file using its name.
    doc.Load(new XmlTextReader(FileName));

    // Create a SignedXml object.
    SignedXml signedXml = new SignedXml(doc); 
```

您可以在以下位置查看完整的源文件：

[https://social.msdn.microsoft.com/Forums/en-US/cd595379-f66a-49c8-8ca2-62acdc58b252/add-prefixds-signedxml?forum=xmlandnetfx](https://social.msdn.microsoft.com/Forums/en-US/cd595379-f66a-49c8-8ca2-62acdc58b252/add-prefixds-signedxml?forum=xmlandnetfx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T12:20:39.073

可能正确的 SetPrefix 代码如下所示：

```
 private void SetPrefix(String prefix, XmlNode node) {
        foreach (XmlNode n in node.ChildNodes)
        {
            SetPrefix(prefix, n);
            n.Prefix = prefix;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-08T16:51:41.893

George Dima 提供的代码有效。

我将解释它是如何工作的。

当您调用 ComputeSignature 方法时，这将通过消化 SignedInfo 节点的值来生成签名值。

George Dima 提供的代码在获取摘要值之前将前缀添加到 SignedInfo 节点及其子节点。这不会将前缀添加到整个 xml 结构中

这是生成签名信息节点摘要值的方法

```
private byte[] GetC14NDigest(HashAlgorithm hash, string prefix)
{        
    XmlDocument document = new XmlDocument();
    document.PreserveWhitespace = true;
    XmlElement e = this.SignedInfo.GetXml();
    document.AppendChild(document.ImportNode(e, true));        
    Transform canonicalizationMethodObject = this.SignedInfo.CanonicalizationMethodObject;

    SetPrefix(prefix, document.DocumentElement); //HERE'S WHERE THE PREFIX IS ADDED TO GET THE DIGEST VALUE
    canonicalizationMethodObject.LoadInput(document);
    return canonicalizationMethodObject.GetDigestedOutput(hash);
} 
```

所以你现在有了带前缀的 SignedInfo 节点的摘要值，这个值将用于获取签名值，但你仍然没有带前缀的 xml，所以如果你这样做

```
signedXml.GetXml(); 
```

您将获得不带前缀的 xml，当然因为签名值是考虑到 ds 前缀来计算的，所以您将有一个无效的签名，所以您要做的就是调用 GetXml，将前缀的值传递给它，在这种情况下为“ds “ 像这样

```
signedXml.GetXml("ds"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T21:51:40.687

我同意前缀不应该很重要，但是......

如果使用 XPath，XML 在 C# 中会变*得更容易：*

```
var s = signedXml.GetXml();
XmlNodeList nodes = s.SelectNodes("descendant-or-self::*");
foreach (XmlNode childNode in nodes)
{
    childNode.Prefix = "dsig";
} 
```

# c++ - 访问冲突读取位置 - opencv/VC++

> ID：12219233
> 
> 赞同：0
> 
> 时间：2012-08-31T16:27:08.137
> 
> 标签：c++, opencv

我正在使用带有 VC++ 的 OpenCV。该函数正在做它应该做的事情，但抛出一个异常，这会在读取位置并引用 ntdll.dll 时导致访问冲突。当代码正在做它应该做的事情时，我会因为无法处理异常而错过什么？

```
void cl::first()
{
  Mat a=imread("C:\\1.jpg");
  Mat b;
  cvtColor(a,b,CV_RGB2BGR);
  imwrite("C:\\2.jpg",b);
  return ;
} 
```

例外

```
First-chance exception at 0x77551e86 (ntdll.dll) in app.exe: 0xC0000005: 
Access violation reading location 0x43819ccc. Unhandled exception at 0x77551e86 (ntdll.dll) 
in app.exe: 0xC0000005: Access violation reading location 0x43819ccc. 
The program '[4500] app.exe: Native' has exited with code -1073741819 (0xc0000005). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-21T02:08:28.037

I had the same error, check your environment variables in

> control panel->system-> advanced system settings->environment variables->path

to ensure opencv bin path is added to the environment 'path', then **restart your computer**.

That should work

# wpf - Bing Maps WPF API - 限制缩放？

> ID：12219235
> 
> 赞同：0
> 
> 时间：2012-08-31T16:27:11.447
> 
> 标签：wpf, bing-maps

我重新问这个问题，因为我之前的问题被错误地关闭了。

是否可以限制 Bing Maps WPF 控件的缩放？我的目标是防止用户放大得太远而看到并排平铺的多个“世界”。

这*不是*与 AJAX API 相关的类似问题的重复。AJAX API 和 WPF API 并不相同，在许多方面的功能也大不相同。Zoom 似乎是其中之一，因为尝试实施 AJAX 解决方案（在我问这个问题之前）没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:47:50.917

可能是这样的吗？

```
 private void map_ViewChangeOnFrame(object sender, MapEventArgs e)
    {
        if (this.bingMap.ZoomLevel < ViewLogic.MinimumZoomLevel)
        {
            this.bingMap.SetView(this.previousFrameCenter, ViewLogic.MinimumZoomLevel);

            e.Handled = true; // Do we need it???
        }
        else
        {
            this.previousFrameCenter = this.bingMap.Center;
        }

        if (this.DoUpdate())
        {
            // Avoiding "jerking" effect and updating only for certain zoom/pan deltas
            this.UpdateModelViewPort();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:59:23.720

似乎 WPF 控件还没有 AJAX 或 SilverLight 强大。很多事情必须手动完成...

您可以通过处理 Map.MouseWheel 事件并在满足阈值时限制缩放增加/减少来尝试蛮力方法

我正在尝试限制整个地图视图 - 处理它很痛苦:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T08:22:23.487

好吧，这对我来说效果很好，没有任何图形副作用......

```
 private void myMap_ViewChangeOnFrame(object sender, MapEventArgs e)
    {
        double z = myMap.ZoomLevel;

        //Maximum Zoom 19.5
        if (z > 19.5)
        {
            myMap.ZoomLevel = 19.5;
        }

        //Minimum Zoom 2.5
        if (z < 2.5)
        {
            myMap.ZoomLevel = 2.5;
        }
    } 
```

# lua - WoW lua API 的主要来源？

> ID：12219237
> 
> 赞同：7
> 
> 时间：2012-08-31T16:27:38.043
> 
> 标签：lua, add-on, world-of-warcraft, lua-api

我一直在寻找有关魔兽世界插件 API 的第一手资料。有几个很好的 wiki，但它们的参考链接只指向内部。当然，暴雪发布了一些关于该主题的信息。

他们的所有信息真的可以从逆向工程和论坛中收集到吗？这让我很难相信。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:04:51.273

它不一定都是从检查或反复试验中收集的。有些是随机提供的，来自“来源”论坛中的“提醒”帖子，例如暴雪员工。他们通常对此非常好，尽管几乎总是以“只是为您节省一些痛苦的必需品”的方式提供。

这是一个例子： [http ://blue.mmo-champion.com/topic/233590-mop-changes/](http://blue.mmo-champion.com/topic/233590-mop-changes/)

关注“蓝色”帖子有很长的路要走，而且这种方式已经持续了很长时间。如果你看到这样的东西（旧的 3.1.0 最终用户补丁说明）[http://us.battle.net/wow/en/game/patch-notes/3-1-0](http://us.battle.net/wow/en/game/patch-notes/3-1-0)，然后扫描到底部附近将有一个关于 API 更改的注释和链接，因此很容易收集他们对此的意图，并且他们打算在那里提供一些关于 API 更改的“非官方”支持，而不会给实际的产品自述文件带来负担。

* * *

总的来说，我会说由于材料的非常开放的性质，UI 的来源，很少被隐藏，大部分都是不言而喻的，所以它几乎没有资格作为逆向工程。一旦你了解了 Lua 与 WoW UI 和支持 API 的一般设计的关系，就会容易得多。

至于关于“为什么”的隐含问题，“难以置信”的部分。据我估计，他们正在做的是他们认为在没有“官方”支持的情况下完全支持和不浪费周期试图记录大量不断变化的可用设施之间的最佳平衡。我认为他们相信它可以制造出更好的产品，具有定制的能力，因此它符合他们的利益，但是从多个角度都充满了问题甚至法律问题，以明确“官方”或试图保持连贯的文档。

## ----

对于下面的问题“git hub”，这里是上下文中的“蓝色”帖子，可以通过单击之前提供的 mmo-champion 链接上的“blizz”链接图标找到：http: [//us.battle.net/ wow/en/forum/topic/6413172918#1](http://us.battle.net/wow/en/forum/topic/6413172918#1)我试图举一个有细节的蓝色帖子的例子，但我不小心给了一个用于 Web API 而不是游戏 API 的帖子。然而原理是相同的，并且为社区提供了更多的暴雪开发支持。

所以基本上那个特定的帖子是指 Web API 的变化，而 Git 的评论与游戏 UI 自定义和宏的事情无关。游戏 UI 自定义和宏没有隐藏或官方的文档源。主要是因为它对任何人都不存在。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:43:12.373

有多种方法可以发现导出到 Lua 环境中的可调用 C 函数的名称。

但是，是的。一个非常简单的方法是枚举源中写入的所有全局变量，然后枚举在 WoW 运行时暴露的全局变量 - 并获取差异，也许将结果限制为“函数”类型的全局变量

暴雪曾经有一段时间非正式地记录其 API，但它一直“不受支持”

还有其他发现 API 的方法——但它们涉及做可能违反 TOS 的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:02:16.873

是的，所有信息都是从源头收集的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:10:45.040

暴雪目前不发布 API 信息，AFAIK。

[http://www.wowpedia.org/Portal:Interface_customization](http://www.wowpedia.org/Portal:Interface_customization)可能是您最好的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-17T01:50:29.287

现在有一个[网站](http://wowprogramming.com/docs/api_categories)包含 wow 插件的 API。这对我帮助很大。

# javascript - 在 Knockout 中扩展动态和映射数据

> ID：12219238
> 
> 赞同：1
> 
> 时间：2012-08-31T16:27:39.170
> 
> 标签：javascript, inheritance, knockout.js, knockout-mapping-plugin

使用 Knockout.JS，我试图确定如何最好地扩展视图模型中的对象，当它们将通过映射插件加载并动态添加时。在此示例中，我将方法 addChild 添加到 Person 对象。

在映射期间扩展：

```
 var myPersonModel = function (data) {
        ko.mapping.fromJS(data, {}, this);

        this.addChild = function () {
            this.children.push(new Child());
        } .bind(this);
    }

    var mapping = {
        'people': {
            create: function (options) {
                return new myPersonModel(options.data);
            },
        }
    }

    var viewModel = ko.mapping.fromJS(data, mapping); 
```

在动态创建期间扩展：

```
 function Person(id, name, children) {
        this.id = ko.observable(id);
        this.name = ko.observable(name);
        this.children = ko.observable(children);
        this.addChild = function () {
            this.Forms.push(new Child());
        } .bind(this);
    } 
```

但在我看来，必须有一种更简单的方法来做到这一点，这样我就不需要重复自己，并且映射对象和新对象都可以获得该`addChild`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:17:32.800

看看[这个答案](https://stackoverflow.com/a/7535397/109941)，尤其是[JSFiddle 上的实时示例](http://jsfiddle.net/HkQkc/)。

看起来你的代码接近它需要的。

我认为你只需要折叠`mapping`并`ko.mapping.fromJS`进入你的`Person`构造函数。

# javascript - 当我将孩子从一个父母移动/复制到另一个父母时，如何重新计算显示？

> ID：12219243
> 
> 赞同：0
> 
> 时间：2012-08-31T16:28:00.073
> 
> 标签：javascript, html, dom

我正在尝试将图像从具有几个孩子的父 A 拖放到最初为空的父 B。我可以指定 element.parent = document.getElementById('foo')，但是文档不会像我最初将元素放在 foo 下一样自然流动。

我目前正在通过让 JavaScript 样式来解决这种行为，让父级表现得好像它包含子级，而子级则表现得好像它包含在父级中一样，但我想知道是否有更好的方法来拥有文档更新为看起来好像孩子被放置在目标父母而不是原始父母之下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:35:07.427

您没有正确移动 DOM 中的项目 - 当您正确移动它时，显示将自动更新。

你不能只设置`.parent`属性。首先，`.parent`它甚至不是 DOM 元素上的属性（它是`.parentNode`）。其次，它不是您可以直接设置的属性（根据[DOM 规范](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1060184317)，它是只读属性）。相反，您需要这样做：

```
document.getElementById('foo').appendChild(element); 
```

这会将其从当前所在的 DOM 位置中移除，并将其附加为新父节点的最后一个子节点。如果要将其放置为相对于现有子节点的特定子节点（例如，作为第三个子节点或第一个子节点），您可以使用`.insertBefore()`代替`.appendChild()`.

如果想要将节点复制到新位置而不是移动现有节点，则首先必须制作节点的副本（从头开始制作或使用`.cloneNode()`然后以相同的方式将副本插入 DOM。

# javascript - 默认情况下，如何将主干视图设置为单例？

> ID：12219244
> 
> 赞同：2
> 
> 时间：2012-08-31T16:28:04.843
> 
> 标签：javascript, backbone.js, singleton, amd

我所有的 Backbone.Views 仅在其最终状态下使用一次。（项目视图除外）。

目前我以这种方式将 Backbone.Views 处理为 Singleton：

```
var Singletonizer = function(Singleton) {
    if (Singleton._instance) return Singleton._instance;

    Singleton._instance = new Singleton();

    Singletonizer(Singleton);
}; 
```

不幸的是，将这个小函数作为依赖项添加到我的存储库中的每个 amd 模块并不是很好。

还有另一种方法来处理这个吗？也许覆盖基本视图类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-17T13:01:18.810

只需让您的模块在视图构造函数之外返回一个函数，该函数返回它的单个实例，与以下内容不同。这样，当您加载模块时，无论您喜欢与否，都不会自动获取实例。相反，在加载我们的“FailedXhrView”模块后，我们通过调用获得我们的单例`FailedXhrView()`

```
'use strict';

define(['jquery', 
        'underscore', 
        'backbone', 
        'text!templates/failedXhr.html'], 

function($, _, Backbone, failedXhrTemplate) {
    var FailedXhrView = Backbone.View.extend({
        el : $('#failedxhr-modal-container'),
        template : _.template(failedXhrTemplate),

        render : function() {
            this.$el.html(this.template({}));
            this.$el.find('failedxhr-modal-containee').modal();
            return this;
        }
    });

    var instance;

    return function() {
        if (!instance) {
            instance = new FailedXhrView();
        }
        return instance;
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T19:18:59.057

来自非常推荐的书[Recipes with Backbone](http://recipeswithbackbone.com/)：

从这里：

```
// definition
MyApplication.Views.List = Backbone.View.extend();

// instantiation
$(function() {
  MyApplication.ListView = new MyApplication.Views.List({
    el: $('#list')
  }); 
}) 
```

到这里：

```
$(function() {
  MyApplication.ListView = new (Backbone.View.extend({
    initialize: function() {
      // ...
    }
  }))({el: $('#list')})
}); 
```

> 我们将匿名类的实例分配给`MyApplication.ListView`. 在这种方法中，我们正在使用自定义属性和方法对顶级 Backbone 类进行典型扩展。然而，不同之处在于我们*没有*像之前那样将结果分配给类名。相反，我们立即创建这个匿名类的*新*实例。最后，`MyApplication.ListView`分配给结果对象。

我不得不说我从来没有使用过这样的技术。它看起来对我来说很乱，我更喜欢易读性而不是建筑。

# c# - 提交，显示结果，延迟 3 秒并重定向

> ID：12219246
> 
> 赞同：4
> 
> 时间：2012-08-31T16:28:10.930
> 
> 标签：c#, asp.net, .net, webforms

我有一个表单，用户可以在其中输入数据，我正在寻找的行为是在提交之后，后面的代码写入数据库并向页面返回成功响应。我目前正在使用此代码。我希望发生的下一个项目是在成功消息之后重定向，但我想延迟 2 或 3 秒，让用户在重定向之前看到成功消息。

行为：提交 -> 显示成功消息 -> 延迟 3 秒 -> 重定向

我目前正在用 VB 开发它；但是我对 VB 或 C# 中的示例都很好。这是一种传统的网络形式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:58:41.017

我喜欢这种方法，尽管已经提出的一些方法非常好：

```
protected void Button1_Click(object sender, EventArgs e)
{
    ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "success", "alert('Submitted Successfully.'); setInterval(function(){location.href='http://www.google.com';},3000);", true);
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:33:46.070

您可以使用 Thread.Sleep() 方法。只需在 Response.Redirect 之前添加它，即

```
System.Threading.Thread.Sleep(3000);
Response.Redirect("MyURL"); 
```

或者，您可以像这样在响应标头中添加延迟

```
Response.AddHeader "REFRESH","3;URL=MyURL" 
```

上面的数字表示以秒为单位的延迟值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T16:33:59.917

您可以使用 html[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)标签

只需将以下代码放在包含成功消息的页面的 head 部分中。

```
<meta http-equiv="refresh" content="3;URL='http://nextpageurlaftersuccess.com/'"> 
```

# android - 后台服务在android中被杀死

> ID：12219249
> 
> 赞同：38
> 
> 时间：2012-08-31T16:28:15.597
> 
> 标签：android, android-service

我们开发了一个 Android 应用程序，其中涉及后台服务。为了实现这个后台服务，我们使用了`IntentService`. 我们希望应用程序每隔`60 seconds`. 因此，在 中`IntentService`，服务器在 while 循环中进行轮询。在我们使用的 while 循环结束时`Thread.sleep(60000)`，下一次迭代仅在 60 秒后开始。
但是在 中`Logcat`，我看到有时应用程序需要超过 5 分钟才能唤醒（从睡眠中出来并开始下一次迭代）。它永远不会`1 minute`像我们想要的那样。

这是什么原因？后台服务应该以不同的方式实现吗？

**问题2**

一段时间后，Android 会终止此后台进程（意图服务）。不能确切地说是什么时候。但有时在后台服务被杀死之前的几个小时甚至几天。如果您能告诉我这样做的原因，我将不胜感激。因为服务不应该被杀死。只要我们愿意，它们就可以在后台运行。

**代码 ：**

```
@Override
 protected void onHandleIntent(Intent intent) {
  boolean temp=true;
  while(temp==true) {
    try {
      //connect to the server 
      //get the data and store it in the sqlite data base
    }
    catch(Exception e) {
      Log.v("Exception", "in while loop : "+e.toString());
    }
    //Sleep for 60 seconds
    Log.v("Sleeping", "Sleeping");
    Thread.sleep(60000);
    Log.v("Woke up", "Woke up");

    //After this a value is extracted from a table
    final Cursor cur=db.query("run_in_bg", null, null, null, null, null, null);
    cur.moveToLast();
    String present_value=cur.getString(0);
    if(present_value==null) {
       //Do nothing, let the while loop continue  
    }
    else if( present_value.equals("false") || present_value.equals("False") ) {
       //break out of the while loop
       db.close();
       temp=false;
       Log.v("run_in_bg", "false");
       Log.v("run_in_bg", "exiting while loop");
       break;
    }
  }

} 
```

但是每当服务被杀死时，它都会在进程处于睡眠状态时发生。最后一条日志显示 - `Sleeping : Sleeping`。为什么服务会被杀死？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-02T19:02:06.960

主要问题是我们不能说

> 服务不应该被杀死。只要我们愿意，它们就可以在后台运行。

基本上，事实并非如此。系统仍然可以在内存不足和可能的其他情况下终止服务。有两种方法可以克服这个问题：

1.  如果您正在实施服务，请覆盖`onStartCommand()`并 `START_STICKY`作为结果返回。它会告诉系统，即使由于内存不足而想终止您的服务，它也应该在内存恢复正常后立即重新创建它。
2.  如果您不确定第一种方法是否有效 - 您必须使用 AlarmManager [http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)。那是一个系统服务，它会在您告知时执行操作，例如定期执行。这将确保如果您的服务将被终止，甚至整个进程都会终止（例如强制关闭） - 它将由 AlarmManager 100% 重新启动。

祝你好运

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T16:59:28.083

您可以使用专门为此目的设计的[ScheduledExecutorService 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)

不要使用计时器，正如[“Java 并发实践”中](https://rads.stackoverflow.com/amzn/click/com/0321349601)所展示的那样，它们可能非常不准确。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T17:18:21.467

`IntentService`不打算继续`while`循环运行。这个想法是对一个做出反应`Intent`，做一些处理并在完成后停止服务。

这并不意味着它不起作用，我无法告诉您为什么会看到如此长的延迟，但更简洁的解决方案是使用一些外部资源来定期戳服务。除了 vanilla Java 方法之外，您还可以查看文档中提到的the[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)或 a 。`Handler``AlarmManager`

`Handler`方式会像这样工作

```
public class TriggerActivity extends Activity implements Handler.Callback {
    // repeat task every 60 seconds
    private static final long REPEAT_TIME = 60 * 1000;
    // define a message id
    private static final int MSG_REPEAT = 42;

    private Handler mHandler;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mHandler = new Handler(this);
    }

    @Override
    protected void onStart() {
        super.onStart();
        // start cycle immediately
        mHandler.sendEmptyMessage(MSG_REPEAT);
    }

    @Override
    protected void onStop() {
        super.onStop();
        // stop cycle
        mHandler.removeMessages(MSG_REPEAT);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mHandler = null;
    }

    @Override
    public boolean handleMessage(Message msg) {
        // enqueue next cycle
        mHandler.sendEmptyMessageDelayed(MSG_REPEAT, REPEAT_TIME);
        // then trigger something
        triggerAction();
        return true;
    }

    private void triggerAction() {
        // trigger the service
        Intent serviceIntent = new Intent(this, MyService.class);
        serviceIntent.setAction("com.test.intent.OPTIONAL_ACTION");
        startService(serviceIntent);
    }
} 
```

一个简单的`Activity`（可以扩展为在您的所有活动中具有该功能）在`Message`运行时始终发送自身 a （在`onStart`and之间`onStop`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-06T00:13:10.353

更好的解决方案是每 60 秒触发一次 AlarmManager。然后此 AlarmManager 启动轮询服务器的服务，然后该服务启动一个新的 AlarmManager，它是一个运行良好的递归解决方案。

此解决方案将更加可靠，因为您不会面临 Android 操作系统会扼杀您的服务、迫在眉睫的威胁。根据 API：警报管理器适用于您希望在特定时间运行应用程序代码的情况，即使您的应用程序当前未运行。

在您的 UI/主要活动等中，设置此计时器，使其在 60 秒内关闭：

```
long ct = System.currentTimeMillis(); //get current time
AlarmManager mgr=(AlarmManager)getApplicationContext().getSystemService(Context.ALARM_SERVICE);
Intent i= new Intent(getApplicationContext(), yourservice.class);
PendingIntent pi=PendingIntent.getService(getApplicationContext(), 0, i, 0);

   mgr.set(AlarmManager.RTC_WAKEUP, ct + 60000 , pi); //60 seconds is 60000 milliseconds 
```

如果`yourservice.class`你有这个，它会检查连接状态，如果它很好，它会设置计时器在另外 60 秒内关闭：

```
 public class yourservice extends IntentService {

                    public yourservice() { //needs this constructor
                        super("server checker");
                    }

                    @Override
                    protected void onHandleIntent(Intent intent) {
                        WifiManager wificheck = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);

                        if(check for a certain condition your app needs etc){
            //could check connection state here and stop if needed etc
                              stopSelf(); //stop service
                        }
                           else{ //poll the server again in 60 seconds
            long ct = System.currentTimeMillis();
            AlarmManager mgr=(AlarmManager)getApplicationContext().getSystemService(Context.ALARM_SERVICE);
            Intent i= new Intent(getApplicationContext(), yourservice.class);
            PendingIntent pi=PendingIntent.getService(getApplicationContext(), 0, i, 0);

           mgr.set(AlarmManager.RTC_WAKEUP, ct + 60000 , pi); 
           stopSelf(); //stop service since its no longer needed and new alarm is set
                               }
                }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-07T12:27:11.200

服务被杀死。就像应用程序被杀死一样。随时可能被杀死是 Android 的哲学。

正如其他人所写的那样，您不应该假设您的后台服务永远运行。

但是您可以使用前台[服务](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)来大大减少被杀死/重新启动的机会。请注意，这会强制发出始终可见的通知。例如，音乐播放器、vpn 应用程序和 sportstracker 使用此 API。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-07T18:59:47.437

对于问题1，来自vanilla Java，`Thread.Sleep()`保证在定时器到期后唤醒线程，但不是完全在它到期后，它可能会更晚，主要取决于其他线程的状态，优先级等；所以如果你让你的线程休眠一秒钟，那么它至少会休眠一秒钟，但它可能是 10 取决于很多因素，我不是很精通 Android 开发，但我很确定这是同样的情况.

对于问题 2，服务可以在内存不足或由用户手动终止时终止，因此正如其他人所指出的那样，可能使用 AlarmManager 在一段时间后重新启动您的服务将帮助您让它一直运行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T22:46:37.453

Android 非常擅长终止长时间运行的服务。我发现 CommonsWare 的 WakefulIntentService 在我的应用程序中很有用：[https ://github.com/commonsguy/cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)

它允许您指定一个时间间隔，就像您尝试通过睡眠一样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T17:17:36.690

听起来你应该使用 a`Service`而不是 an`IntentService`但如果你想使用 an`IntentService`并让它每 60 秒运行一次，你应该使用 the`AlarmManager`而不是只是告诉`Thread`睡眠.. `IntentService`s 想要停止，让它在`AlarmManager`什么时候唤醒它它应该再次运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-07T05:36:05.640

```
It could be probably for two reasons.. 
```

1.  while循环正在创建一个问题，它使处理程序工作直到`temp==true`
2.  添加到它的是线程，它正在创建`long delays`upto `6 seconds`。如果系统正在为大型数据库工作，则`long delays`在每个查询之间创建会增加系统内存。当应用程序的内存使用量变得如此巨大以至于`system memory gets low`系统必须`terminate the process`..

    问题的解决方案..

3.  `Alarm Manager`您可以使用警报管理器在特定时间间隔后将上述替换为撤销系统服务。

4.  此外，为了在系统从终止中恢复应用程序后恢复意图，您应该使用`START_REDELIVER_INTENT`. 这是在应用程序终止后恢复您的最后一个工作意图。对于它的使用，研究[https://developer.android.com/reference/android/app/Service.html#START_REDELIVER_INTENT](https://developer.android.com/reference/android/app/Service.html#START_REDELIVER_INTENT)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-07T09:42:16.850

您可以尝试在后台运行 JobService 的 Jobscheduler 实现，这是在 Android O 之上推荐的。

# html - CSS - 包含可变宽度

> ID：12219250
> 
> 赞同：1
> 
> 时间：2012-08-31T16:28:23.837
> 
> 标签：html, css, list

是否可以`<li>`根据同一内容中的内容调整其宽度`<ul>`？

似乎每一个`<li>`都是天生就拉伸了匹配的最大宽度。我怎样才能避免这种情况？

这`<ul>`是一个垂直列表，内容在图片和文本之间变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:38:31.350

inline-block 很好，但大概您仍然希望列表项堆叠而不必重新设置它们的样式。在这种情况下，您可以将内容放在 span 或 div 中，并将其设置为内联样式。

```
<html>
<body>
    <ul>
        <li><span>test</span></li>
        <li><span>long test</span></li>
        <li><span>longest test</span></li>
    </ul>
</body>
</html>​ 
```

有了这个 CSS

```
li span
{

    background-color:blue;
    display:inline-block;

}​ 
```

[http://jsfiddle.net/WHSpW/](http://jsfiddle.net/WHSpW/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:35:26.810

如果您将“显示”样式设置`<li>`为 inline-block 它应该可以按您的意愿工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:42:01.473

如果您浮动它们，它们将采用它们包含的内容的宽度。

```
li {float: left;} 
```

您需要浮动包含`ul`或应用[clearfix](http://www.webtoolkit.info/css-clearfix.html)以防止其崩溃。在 IE6 下，您可以使用 zoom:1 来触发`ul`.

# actionscript-3 - 阶段中 removeChild() 时发生 AS3 错误 #1004

> ID：12219254
> 
> 赞同：0
> 
> 时间：2012-08-31T16:28:48.967
> 
> 标签：actionscript-3, flash, flash-cs5

```
//Main Class
package{
  public class Main extends MovieClip{
    private var bombCarrier:BombCarrier;
    private var building:Building;
    private var bomb:Bomb;
    public var buildingArray:Array;

    public function Main(){
      bombCarrier = new Carrier();
      addChild(bombCarrier);
      for(var i:int=0;i<5;i++){
        var xPosition:Number = i*105;
        building = new Building(xPosition, stage.stageHeight);
    addChild(building);
    buildingArray.push(building);
  }
      stage.addEventListener(Event.KeyboardEvent, keyDownFunction);
    }
    public function keyDownFunction(event:KeyboardEvent){
      if(event.keyCode == 70){
        bomb = new Bomb(bombCarrier.x, bombCarrier.y, 0.5);
        addChild(bomb);
      }
    }
  }
}

//Bomb Class
package{
  public class Bomb extends MovieClip{
    private var speed:Number;
    public function Bomb(x, y, speed){
      this.x = x;
      this.y = y;
      this.speed = speed;
      addEventListener(Event.ENTER_FRAME, loop);
    }
    public function loop(event:Event){
      this.y += speed;
      for(var i:int=0;i<Main(parent).buildingArray.length;i++){
        if(hitTestObject(Main(parent).buildingArray[i])){
          this.removeEventListener(Event.ENTER_FRAME, loop);
          Main(parent).buildingArray.splice(i, 1);
          parent.removeChild(this); //This line got Error
        }
      }
    }
  }
} 
```

我尝试了很多方法，但我仍然得到相同的错误，即 TypeError：错误 #1009：无法访问空对象引用的属性或方法。在炸弹/循环（）。我已经尝试使用命令行逐行调试，似乎只是这行代码“parent.removeChild(this);” 显示问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:38:07.200

看起来您试图多次移除炸弹（在 for 循环中）。所以在第一次之后，它不再是父母的孩子。

此外，您在将炸弹添加到舞台之前启动输入帧处理程序，因此在此之前 parent 将为空。

`break;`一旦你第一次移除了炸弹，你就会想要离开你的循环。

```
//Bomb Class
package{
  public class Bomb extends MovieClip{
    private var speed:Number;
    private var buildingArray:Array;

    public function Bomb(x, y, speed){
      this.x = x;
      this.y = y;
      this.speed = speed;
      addEventListener(Event.ADDED_TO_STAGE,addedToStage,false,0,true);
    }

    private function addedToStage(e:Event):void {
        buildingArray = Main(parent).buildingArray;  //it would be better to just pass it in the constructor
        addEventListener(Event.ENTER_FRAME, loop);
    }

    public function loop(event:Event){
      this.y += speed;
      for(var i:int=0;i<buildingArray.length;i++){
        if(hitTestObject(buildingArray[i])){
          this.removeEventListener(Event.ENTER_FRAME, loop);
          buildingArray.splice(i, 1);
          parent.removeChild(this);
          break; //get out of the loop
        }
      }
    }
  }
} 
```

在效率方面，如果您在炸弹类中引用 buildingArray 会更快，因此您不必执行 Main(parent)。每次你需要访问它。

# mysql - SQL从同一个表中选择列

> ID：12219258
> 
> 赞同：0
> 
> 时间：2012-08-31T16:29:30.870
> 
> 标签：mysql, sql

我会直接潜入我的表格，很快我的问题就很明显了

表格1：

```
Owner    ownerID    Name    Address    userID
______________________________________________
Name        1       Tim    "top road"    1 
```

表 2：

```
User      userID    userName    password    secretQA1    secretQA2
___________________________________________________________________
            1        BigTim       pwhat         7           8 
```

表3：

```
secretQA  id    question       answer
_______________________________________
          7     "Mums name"     "Tony"
          8     "Fav sport"     "dressing up" 
```

无论如何，我想做的是我知道 ownerID 是 1，我想给所有者他的所有信息！所以我一直在做的是这样的：

```
SELECT secretQA.question AS Question1, secretQA.answer AS Answer1,
secretQA.question AS Question2, secretQA.answer AS Answer2,
User.password AS Password
FROM secretQA, owner, User
WHERE owner.id = 1
AND SecretQA.id = owner.secretQA1
AND SecretQA.id = owner.secretQA2
AND user.id = owner.userID; 
```

但无济于事！

这是我想要获得的：

```
Question1    Answer1    Question2    Answer2        Password
____________________________________________________________
"Mums name"   "Tony"    "Fav sport"  "dressing up"  pwhat 
```

为所有未来的帮助干杯

编辑：密码在这里只是一个例子，在我的真实版本中不会是纯文本这只是我在做什么的一个简化问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:39:27.007

要获得您想要的内容，您必须两次加入 SecretQA 表。这是一个为什么最好使用显式连接语法的示例。

这应该工作

```
 SELECT q1.question AS Question1, 
            q1.answer AS Answer1,
            q2.question AS Question2,
            q2.answer AS Answer2,
            u.password AS Password
       FROM User u
       JOIN owner o ON u.id = o.userID
  LEFT JOIN secretQA q1 on o.secretQA1 = q1.id
  LEFT JOIN secretQA q2 on o.secretQA2 = q2.id
      WHERE owner.id = 1 
```

请注意，您的`secretQA`表必须参与两次连接。我给它起了别名`q1`并`q2`使它工作。

哦，就像其他人所说的那样，如果您将密码存储为纯文本，请注意。intertubz 将 pwn 你，srsly。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:38:50.643

在表 2 中，删除 'secret1' 和 'secret2' 列。在表 3 中，添加一个新列 'userID'。

在那之后，你应该能够做类似的事情

```
select u.username, u.password, s.question, s.answer
from table1 as o join table2 as u on o.userid = u.userid
join table3 as s on s.userid = o.userid
where o.ownerid = 1 
```

此外，正如其他人所指出的，将密码存储为纯文本并不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:39:45.220

尝试这个

```
 SELECT q1.question, q1.answer, q2.question, q2.answer, u.password
   FROM user u
   JOIN secretqa q1 ON u.secretQA1 = q1.id
   JOIN secretqa q2 ON u.secretQA2 = q2.id
  WHERE u.id = ? 
```

# c++ - 在 C++ 中添加长双打给出了错误的答案

> ID：12219259
> 
> 赞同：2
> 
> 时间：2012-08-31T16:29:35.813
> 
> 标签：c++, long-double

我有一段代码如下：

```
std::cerr << val1 << " " << val2 << std::endl;
val1 = val1 + val2;
std::cerr << val1 << std::endl; 
```

val1 和 val2 都是 long double。

问题来自这样一个事实，即结果是：

```
-5.000000000000722771452063564190e-01 2.710505431213761085018632002175e-20
-5.000000000000722771452063564190e-01 
```

这没有任何意义。看来 val2 没有被添加到 val1，但是，显然有足够的信息可以添加到它的小数`val1`部分`val2`。

我被难住了，有人有什么想法吗？

我相信我正在使用 GCC 4.2。G++ 是否使用 IEEE 四精度格式？或者其他的东西（比如 80 位扩展精度，它可以解释这个问题（尽管为什么会出现超过 18 个小数位呢？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:37:37.157

如果您的 val1 和 val2 打印正确，则输出正确：-

```
-5.000000000000722771452063564190e-01 = -5.000000000000722771452063564190 X e^(-1)  //or 10^(-1) 
```

在哪里`^ denotes to the power of`

```
2.710505431213761085018632002175e-20 =  -5.000000000000722771452063564190 X e^(-20)  //or 10^(-20) 
```

..

```
Since val1 >> val2 
=> lim (val2/val1 -> 0) (lim is mathematical limit) .... eq (A)

Consider y=val1+val2
=> y= ((val1+val2)/val1)*val1  (rationalizing)
=> y= {(val1/val1)+(val2/val1)} * val1
=> y= {1+val2/val1}*val1
=> y= {1+0}*val1 .........................................From eq (A)
=> y= val1 
```

这就是为什么输出是`-5.000000000000722771452063564190e-01`（因为加法产生的差异超出了二进制长双精度格式的表示范围）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:33:59.353

好吧，我应该猜到了……看起来`long double`G++ 以四倍精度格式存储，但使用 80 位扩展精度格式计算。所以，它会给出很多数字，但只计算其中的一些。

# iphone - 为什么 iCloud 有时会停止工作？

> ID：12219262
> 
> 赞同：12
> 
> 时间：2012-08-31T16:29:51.043
> 
> 标签：iphone, ios, icloud, uidocument

我有时在打开存储在 iCloud 上的 UIDocuments 时遇到问题。在检查 iCloud 是否可用并获得 NSMetaDataQuery 的结果后，我在我的应用程序的最开始调用以下代码。这适用于所有情况的 98%。只是有时（例如，有时在重新安装应用程序后）完成处理程序永远不会被调用：

```
FRNBDocument *doc = [[FRNBDocument alloc] initWithFileURL:fileURL];
[doc openWithCompletionHandler:^(BOOL success) {

    NSLog(@"... doc: openedWithCompletionHandler"); 
```

正如您从代码中看到的那样，我正在初始化一个新的 UIDocument 实例 (FRNBDocument)，因此不可能是旧的 UIDocument 仍处于打开状态，因此无法打开。

让应用程序再次运行的唯一方法是杀死它，然后转到 settings.app > iCloud > Documents & Data 并关闭它，然后再次打开它。当我返回应用程序时，将毫无问题地加载 UIDocs。

我注意到其他应用程序（例如 xTrail by sophiestication）也有同样的问题，我只能在完成上述技巧后让它们再次运行。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T09:52:45.503

好的，这似乎是一个 iCloud 错误。我一直在与 Apple 联系，他们建议提交错误报告。所以我做到了（id 12260670）。

我现在要做的是简单地实现一个计时器。如果 UIDocs 在 20 秒后没有加载，我将显示一个 AlertView，告诉用户转到 settings.app > iCloud > Documents & Data 并将其关闭，然后再次打开。

这太令人沮丧了。难以置信的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:04:07.833

我有个类似的问题。NSMetadataQuery 返回一个结果，但 openWithCompletionHandler: 偶尔不会完成，因此应用程序的数据不会加载。有一段时间，我通过在尝试加载文档之前检查 NSMetadataUbiquitousItemIsDownloadedKey 来解决问题。如果没有下载，我调用了 evictUbiquitousItemAtURL 然后 startDownloadingUbiquitousItemAtURL。然后我不得不继续使用 NSMetadataQuery 轮询 NSMetadataUbiquitousItemIsDownloadedKey 是否为真，此时我可以成功调用 openWithCompletionHandler。这似乎解决了问题。然而令人沮丧的是，这似乎不再适用于 iOS 6，或者不再适用。如果您找到更好的解决方法或从 Apple 获取有关该错误的更新，请随时通知我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T12:38:21.150

iCloud访问需要返回函数调用

```
- (NSURL *)URLForUbiquityContainerIdentifier:(NSString *)containerID 
```

返回

> 指向指定 ubiquity 容器的 URL，如果无法找到容器或当前用户或设备无法使用 iCloud 存储，则返回**nil 。**

[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/URLForUbiquityContainerIdentifier%3a)

由于 iCloud 没有那么灵敏，我检查我是否获得了**URL**，然后只继续进一步同步数据。

```
NSURL *ubiq = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
if (ubiq) 
{
    NSLog(@"iCloud access at %@", ubiq);
    [self loadDocument];
} 
else 
{
    NSLog(@"No iCloud access");
} 
```

# scala - 如何在 Lift Framework 中使用 LDAP

> ID：12219263
> 
> 赞同：2
> 
> 时间：2012-08-31T16:29:51.760
> 
> 标签：scala, lift, scala-maven-plugin

有没有人有一个很好的例子来展示如何将 LDAP 合并到 Lift Scala 项目中？在我的 pom.xml 文件中添加依赖项时遇到问题

```
<dependency>
      <groupId>net.liftweb</groupId>
      <artifactId>lift-ldap</artifactId>
      <version>2.0</version>
</dependency> 
```

在项目标签中抛出一个错误，说它无法在 [1.4.5-rc1,1.4.5] 中找到匹配范围 [1.4,1.4.3) javax.mail:mail:jar:null 的版本

有任何想法吗？？感谢你

# jquery - jQuery：滚动过去某个点时，fadeIn 固定导航

> ID：12219266
> 
> 赞同：2
> 
> 时间：2012-08-31T16:29:55.723
> 
> 标签：jquery, fadein, css-position, sticky

一旦我的内容区域距离窗口顶部 50 像素，我正试图让我的固定导航淡入。我已经让它工作了，但是我在动画中得到了一个奇怪的“反弹”。菜单完全出现，然后再次消失并淡入。有什么想法吗？这是我的代码：

```
$(window).bind('scroll',function() {
    var vPos = $(window).scrollTop(); //The current scroll bar position
    var totalH = $('.content').offset().top; // Distance content from top
    var finalSize = totalH - vPos; // Get the difference of the distances

    console.log(finalSize);

    if( finalSize <= 50 ) {
        $('.sticky').fadeIn(300);       
    } else {
        $('.sticky').fadeOut(300);  
    }
}); 
```

可以在这里看到：http: [//portfolio.stvartak.net/redesign](http://portfolio.stvartak.net/redesign)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:33:49.503

看起来你需要一个标志来避免多次执行褪色的东西：

```
var flag=true;

$(window).on('scroll',function() {
    var vPos = $(window).scrollTop(),
        totalH = $('.content').offset().top,
        finalSize = totalH - vPos;

    if( finalSize <= 50)
        if (flag) $('.sticky').fadeIn(300);
        flag=false;
    } else {
        if (!flag) $('.sticky').fadeOut(300);  
        flag=true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:33:53.590

尝试这个：

```
$(window).bind('scroll',function() {
    var vPos = $(this).scrollTop(); 
    var totalH = $('.content').offset().top;     
    if( totalH <= vPos ) {
        $('.sticky').stop().fadeIn(300);       
    } else {
        $('.sticky').stop().fadeOut(300);  
    }
}); 
```

# iphone - UIWebView 中的 Office 文档，日期之间存在时间差

> ID：12219267
> 
> 赞同：0
> 
> 时间：2012-08-31T16:30:08.810
> 
> 标签：iphone, ios, xcode, ipad, uiwebview

我一直在使用 UIWebView 来渲染办公室文档，但最近我注意到当在文件中添加日期时，假设一个 Excel 文件在其中一个单元格中具有日期值，日期（显然）是由 web 视图修改。

奇怪的是我做了一个基于两个项目的测试。第一个是我已经工作了大约一年的项目，第二个是我为测试目的而创建的新项目。

日期在新项目中正确显示，但在旧项目中显示错误，所以我开始认为与项目设置有关。我还将新项目中的类复制到旧项目中，看看是否有区别，但即使使用新类，我的旧项目也会显示同一个 excel 文件的错误（*）日期......所以这很奇怪。

有任何想法吗？

提前致谢

**更新1：** （*）不正确的日期，我的意思是测试项目中显示的日期与旧项目中显示的相同文件之间存在时间差。

我将问题的标题从“...无效日期”更改为“...之间的时差”...因为“无效”一词可能会导致误解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:41:58.717

我无法理解问题所在，但目前的解决方案是将可视化组件从 UIWebView 更改为 QuickLook 框架。

我知道这不是问题的正确答案，但至少是一种正确显示文档的方法。

# apache - Zend Framework 设置 htaccess 文件

> ID：12219274
> 
> 赞同：1
> 
> 时间：2012-08-31T16:30:45.247
> 
> 标签：apache, .htaccess, zend-framework

我已经使用 Zend 框架多年，但已经意识到我们现在正在修复的错误处理的一些关键问题。（我在这里发布了一个不同的问题：[为什么我的网站总是使用 ErrorController 来处理所有类型的错误，而不管 HTTP 状态代码如何？](https://stackoverflow.com/questions/12197946/why-my-site-is-always-using-the-errorcontroller-for-all-types-of-errors-irrespec)在那里解释这个故事）。

我的问题是一个快速的问题。Zend Framework 的常见 .htaccess 文件是什么样的？

根据[最新的 ZF 文档](http://framework.zend.com/manual/en/zend.application.quick-start.html)，

```
SetEnv APPLICATION_ENV development

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

但是，以上内容对我来说是新的 - 有人可以解释它究竟做了什么吗？我当前的 .htaccess 文件有很多 301 重定向代码，但为了这篇文章的目的，我只会在此处粘贴相关信息：

```
ErrorDocument 404 http://www.mydomain.com/pagenotfound/
ErrorDocument 503 http://www.mydomain.com/service-unavailable/

RewriteCond %{REQUEST_URI} !^/liveagent
RewriteCond %{REQUEST_URI} !^/blog
RewriteRule !\.(js|ico|gif|GIF|jpg|JPG|jpeg|png|PNG|pdf|css|html|xml|swf|php|mp3|mp4|webm|ogv|f4v|flv|txt|wsdl|css3|ttf|eot|svg|woff)$ index.php 
```

以上对我们来说工作正常，基本上不允许“liveagent”和“blog”（Wordpress）目录与 Zend 一起运行，但我意识到我现在需要进行以下更改：

必须从代码中删除 ErrorDocument 404，因为 Zend 框架应该处理所有错误。但是，当我删除它时，转到像 www.mydomain.com/this-does-not-exist.php 这样的 URL 会导致 404 错误标准 Apache 页面 - 它不会加载 ZF 或 ErrorController。这是因为上述 RewriteRule 中的“php”排除。我不只是想删除它，因为我们有时希望能够访问根目录上的 php 文件，例如我们用于将站点置于维护模式的单独的“holding.php”文件。

标准做法是什么？我应该删除 php 扩展名吗？但是，这不会解决其他 404 问题，例如 www.mydomain.com/this-does-not-exist.css，这也是上述 RewriteRule 中的排除项（即 CSS）。

因此，我是否应该将上述内容完全更改为 Zend 的 .htaccess 新代码，如上所述？

如果是这样，我是 htaccess 的初学者——如何修改 .htaccess 代码以允许 CSS、JS、视频文件等以及博客和 liveagent 目录从 Zend 框架中排除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:59:29.783

我会切换到标准的 ZF 重写规则，而不是使用长正则表达式重定向到 index.php 的规则。

以下是对标准`.htaccess`规则的作用的解释：

```
RewriteCond %{REQUEST_FILENAME} -s [OR] # The request is a regular file with size > 0
RewriteCond %{REQUEST_FILENAME} -l [OR] # The request is to a file that is a symlink
RewriteCond %{REQUEST_FILENAME} -d [OR] # The request is to a directory that exists

# if any of the above conditions are true, then simply handle the request as-is
RewriteRule ^.*$ - [NC,L]

# if none of the above match, then rewrite to index.php
RewriteRule ^.*$ index.php [NC,L] 
```

这些默认 ZF 规则不会阻止您访问现有`php`文件或可从文档根目录访问的任何其他文件。 *如果请求的文件存在*，则对该文件的请求按原样提供。 *如果请求的文件不存在*，则请求被转发到 index.php

一旦请求被转发到 ZF，如果没有匹配的路由，则调用 ZF ErrorHandler 并提供 404 页面（来自 ZF）。

使用现有的 ZF 规则不会阻止您在应用程序和服务器设置中获得所需的行为，并且应该比您当前拥有的正则表达式更有效。唯一真正改变的是，现在对不存在文件的请求将由 ZF 的错误处理程序处理，而不再由 Apache 处理。

希望这回答了你的问题，如果不能随意评论澄清。

# jquery - 使用 jquery 显示项目列表的内容

> ID：12219281
> 
> 赞同：2
> 
> 时间：2012-08-31T16:31:14.427
> 
> 标签：jquery

我是 JQuery 的新手，希望在某个问题上得到一些帮助。我有一个 div，其中包含一些内容，当您单击某个链接时，我想扩展和收缩这些内容。它类似于：

```
<div class="container">
<div class="cont-top">
<a class="morelink" href="#">More</a>
</div>
<div class="cont-btm">
<p>This is the content to be displayed</p>  
</div>
</div> 
```

问题是这个容器 div 是由 php 循环动态生成的。如何编写 jquery 以仅打开此 div 的单个实例？这就是我所拥有的，它有效，但显然它打开了所有的 div，而不仅仅是点击的那个。

```
$('.cont-btm').hide();
$('.morelink').click(function(e) {
e.preventDefault();
$('.cont-btm').toggle('fast');
}); 
```

我知道这是一个简单的问题，但我是编程新手谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:36:40.533

您可以使用[下一个](http://api.jquery.com/next/)方法：

```
$('.cont-btm').hide();
$('.morelink').click(function(e) {
    e.preventDefault();
    // get the parent of the link and then get the next .cont-btm after the parent.
    $(this).parent().next('.cont-btm').toggle('fast');
});​ 
```

小提琴样本：http: [//jsfiddle.net/johnkoer/EGzCE/6/](http://jsfiddle.net/johnkoer/EGzCE/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:37:53.913

您可以对 div 使用相对遍历，如下所示：

```
$('.moreinfo').click(function(e) {
    e.preventDefault();
    $(this).parent().next('.cont-btm').toggle('fast');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:41:37.850

像这样更改代码：

```
 $('.cont-btm').hide();
    $('.morelink').click(function(e) 
    {
        e.preventDefault();
        $(this).parent().next().toggle('fast');
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T16:42:25.733

如果你不能给这个div添加一个类名（或id），你能在页面中找到它是哪个数字元素吗？也就是第一个、第二个、第三个等div？如果是这样，您可以使用 jQuery 的伪选择器来获取 div。例如 :nth-child 是一个很好的。如果找不到数字，那么由于没有唯一标识符，因此如果不通过非常周到的方式就无法做到这一点，例如比较 divs 内容中的 html 字符串，然后在匹配时执行事件处理程序. 关键是以某种方式使该元素独一无二。

# asp.net-mvc-3 - 在 IIS 服务器上部署 MVC3 - 错误 401

> ID：12219282
> 
> 赞同：0
> 
> 时间：2012-08-31T16:31:16.687
> 
> 标签：asp.net-mvc-3, razor, iis-7.5

所以我今天早上使用 Visual Studio 中的“构建部署包”将我的网站部署到我的测试服务器。

在 IIS 中，我们导入网站并将其部署为新网站，那里一切正常。

但是当我们启动浏览器时，我们遇到了一个错误：

```
HTTP Error 401.0 - Unauthorized
You do not have permission to view this directory or page.

Most likely causes: 
The authenticated user does not have access to a resource needed to process the request. 
```

我们尝试为用户提供文件夹的所有访问权限，并且还尝试从匿名登录到形成身份验证，但均未成功。

帮助将不胜感激！也许我错过了某个地方的许可..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:14:33.543

我发现了我的问题：由于某种原因，Visual Studio 没有在包中编译我的资源和 Dll。我必须在 Embedded in properties 中设置项目中的所有资源，然后在服务器上手动复制我的 dll

# jquery - jquery validate 防止提交在帖子中传递

> ID：12219285
> 
> 赞同：4
> 
> 时间：2012-08-31T16:31:38.560
> 
> 标签：jquery, jquery-validate

我正在使用 jquery validate 检查数据库中现有的电话号码。我为此使用 jquery validate remote 属性。

```
remote: {
    url: "ajax-checkmobile.php",
    type: "post",
    data: {
      cust_id: function() {
        return $("#cust_id").val();
      }
    }
  } 
```

但是，这会阻止提交值通过 POST 传递给表单提交。

```
<input name="Submitcustdata" type="submit" class="chromeButton" id="Submitcustdata" value="Edit Customer" /></td> 
```

删除上述代码后，提交值正确传递。知道什么可能会阻止价值被传递

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:39:53.037

我开发了以下代码，在使用 AJAX 提交表单的上下文中使用它。这不完全是您的情况，但相同的代码将使您的`<input type="submit">`值被提交：

```
function submit_click() {
    var $input = $(this);
    var name = $input.attr('name');
    if (typeof name == 'undefined') return;
    var value  = $input.attr('value');
    var $form  = $input.closest('form');
    var $hidden = $('<input type="hidden" />').attr('name', name).attr('value', value);
    $form.find('input[type=hidden][name="' + name + '"]').remove();
    $form.append($hidden);
};

$(document).on('click', 'form.ajax input[type=submit]', submit_click); 
```

我使用`class="ajax"`表单元素中的 来激活此代码。您可以根据自己的需要进行更改。

它能做什么？它创建一个隐藏的表单输入，与单击的提交输入具有相同的名称和值。因此，当帖子稍后以编程方式发生时，该值已正确提交。

啊，你问`what could be preventing value from being passed`...验证插件捕获表单提交，并执行它的东西。验证后，触发表单提交。发生这种情况时，**不再**`<input>`是触发表单提交的元素单击。它是插件的 JavaScript 代码。因此，“ `<input>`”点击事件丢失了。这就是它没有提交的原因。（有道理吗？如果这个解释写得不好，请告诉我。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:34:15.533

validate 阻止帖子发生以进行验证。这是设计使然。

所以，如果它没有提交，那么它认为该字段是无效的，我猜。

# highcharts - Highcharts 甜甜圈图定制

> ID：12219286
> 
> 赞同：15
> 
> 时间：2012-08-31T16:31:39.213
> 
> 标签：highcharts, javascript, donut-chart

我有 highcharts 的许可证，我想创建一个像下面这样的字符：

![在此处输入图像描述](../Images/3efcf2be8071824c0730344b90bfc6e0.png)

highcharts 上最相似的组件如下：

![在此处输入图像描述](../Images/884f2b81f56bc21afa3d87f7bf8a7963.png)

有人知道可以仅以百分之一的价格替换内部的 PIE 吗？或其他一些好的客户端javascript库来做到这一点？

您可以在以下链接中找到演示和 API。

演示[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-donut/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-donut/)

API [http://api.highcharts.com/highcharts#chart](http://api.highcharts.com/highcharts#chart)

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-31T17:21:31.327

检查一下`innerSize`。

`"The size of the inner diameter for the pie. A size greater than 0 renders a donut chart. Can be a percentage or pixel value. Percentages are relative to the size of the plot area. Pixel values are given as integers. Defaults to 0."` [参考](http://api.highcharts.com/highcharts#plotOptions.pie.innerSize)

你可以看看这个[例子](http://jsfiddle.net/e2qpa/3/)，它展示了如何把`text`圆环图放在里面。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T07:26:13.190

您可以尝试使用**标题**作为替代且相当简单的方法。

```
 title: {
                text: 'Budget',
                align: 'center',
                verticalAlign: 'middle',
                style: {
                    fontSize: '9.5px'
                } 
            }, 
```

JsFiddle：http: [//jsfiddle.net/amigoo/zwod86e1/](http://jsfiddle.net/amigoo/zwod86e1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T13:01:14.400

```
 function(chart4) {
chart4.renderer.text('<span style="word-wrap: break-word !important;">Reduced by <br/>10 Years</span>', (chart4.chartWidth/2)-38, (chart4.chartHeight/2)-5)
             .css({

                color: '#4b4b4b',
                fontWeight: 'bold',
                fontSize: '12px'

            })
            .add();
} 
```

# iphone - 从 Facebook 的 iPhone 应用重定向到 Safari

> ID：12219288
> 
> 赞同：1
> 
> 时间：2012-08-31T16:31:45.860
> 
> 标签：iphone, facebook, cookies

在**Facebook 的 iPhone 应用程序**中单击外部链接时，您将停留在应用程序本身而不是**Safari**中。我希望访问我网站的人改为在 Safari（或任何浏览器）中打开我的网站。有什么我可以做的吗？

问题是我使用 ASP.NET**的基于 Cookie 的身份验证**在 Facebook 的浏览器中由于某种原因无法正常工作。这只是从 Facebook 的 Native iPhone 应用程序中单击我的站点链接时出现的问题，它可以在 Facebook 的 webb 应用程序中正常工作或直接从 Safari 中打开。

# struts2 - 无法排除struts2拦截器中的方法

> ID：12219289
> 
> 赞同：1
> 
> 时间：2012-08-31T16:31:49.703
> 
> 标签：struts2, interceptor, struts-config, interceptorstack

我在这个问题中遇到了这个家伙的相反问题： [Struts 2: 从 defaultStack 拦截器中排除验证方法](https://stackoverflow.com/questions/8116076/struts-2-excluding-method-from-validation-from-just-the-defaultstack-intercepto)

上述问题涉及排除所有方法，我的问题是没有排除任何方法！

我试图让我的 authenticationInterceptor 忽略我的 LoginAction 的 showLogin 方法：

```
<interceptors>
    <interceptor name="authorizationInterceptor" class="org.companyname.struts.interceptor.AuthorizationInterceptor"/>
    <interceptor-stack name="appDefault">
        <interceptor-ref name="authorizationInterceptor"/>
        <interceptor-ref name="defaultStack">
            <param name="exception.logEnabled">true</param>
            <param name="exception.logLevel">ERROR</param>
        </interceptor-ref>              
    </interceptor-stack>
</interceptors>
<default-interceptor-ref name="appDefault" />

<action name="loginInitial" class="org.companyname.struts.action.LoginAction" method="showLogin">
    <interceptor-ref name="appDefault">
        <param name="authorizationInterceptor.excludeMethods">showLogin</param>             
    </interceptor-ref>
    <result name="success">/login.jsp</result>                      
</action> 
```

但是，每次我转发到 loginInitial 时，拦截器都会抓住它，即使我的 showLogin 方法被排除在外。

我检查了命名问题，并尝试在操作中的拦截器引用中放置几个​​不同的值，但似乎没有任何效果。

当我转发到 loginIntial 时跳过授权拦截器的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:55:37.457

我相信我的问题是我正在使用的拦截器类型，即 AbstractInterceptor。所以，我只是对我不想被拦截的动作使用不同的拦截器堆栈：

```
<interceptor-stack name="appDefaultWithAuth">               
    <interceptor-ref name="defaultStack">
        <param name="exception.logEnabled">true</param>
        <param name="exception.logLevel">ERROR</param>
    </interceptor-ref>              
    <interceptor-ref name="authorizationInterceptor"/>
</interceptor-stack>            

<interceptor-stack name="appDefaultNoAuth">             
    <interceptor-ref name="defaultStack">
        <param name="exception.logEnabled">true</param>
        <param name="exception.logLevel">ERROR</param>
    </interceptor-ref>                  
</interceptor-stack>

<default-interceptor-ref name="appDefaultWithAuth" />

<action name="loginInitial" class="org.company.struts.action.LoginAction" method="showLogin">
    <interceptor-ref name="appDefaultNoAuth"/>              
    <result name="success">/login.jsp</result>                      
</action> 
```

# mysql - 获取组中的条目列表。MySQL

> ID：12219290
> 
> 赞同：0
> 
> 时间：2012-08-31T16:31:53.710
> 
> 标签：mysql, sql, stored-procedures

我有一个只生成项目 ID 的表。`project_table`，其中有 the`project_id`和其他列。

我有另一个表`project_members`，它有 2 列`project_id`，即`FOREIGN KEY`to`project_table`和一`user_id`列。

我想知道一组用户（作为逗号分隔值传递）是否属于同一个`project_id`.

例如 - 该`project_members`表具有以下条目

```
project_id user_id
         1       1
         1       2
         2       3
         2       4
         2       1 
```

当我通过时`id's` `1,2`，我想知道`project_id`这些用户进来了。条件是只`ids 1 and 2`应该在那个项目中。

所以上述数据的输入和输出应该是——

```
input output
1,2        1
1,2,3   NONE
1,3,4      2
1,2,4   NONE. 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:38:09.700

```
SELECT   project_id
FROM     project_members
WHERE    user_id IN (1,3,4)
GROUP BY project_id
HAVING   COUNT(*) = 3 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/e27e1/1/0)上查看。

请注意，这假设`(project_id, user_id)`. `project_members`如果有重复，您将需要使用更昂贵[`COUNT(DISTINCT user_id)`](http://dev.mysql.com/doc/en/group-by-functions.html#function_count-distinct)的而不是[`COUNT(*)`](http://dev.mysql.com/doc/en/group-by-functions.html#function_count).

* * *

如果您必须在存储过程中执行此操作，您可以使用 MySQL 的[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)函数代替`IN`运算符，并从总数[`CHAR_LENGTH()`](http://dev.mysql.com/doc/en/string-functions.html#function_char-length)减去输入字符串的长度（删除所有逗号）计算计数：

```
CREATE PROCEDURE get_projects(IN members TEXT)
SELECT   project_id
FROM     project_members
WHERE    FIND_IN_SET(user_id, members)
GROUP BY project_id
HAVING   COUNT(*) = 1 + CHAR_LENGTH(members)-CHAR_LENGTH(REPLACE(members,',','')); 
```

请注意，这假定`members`包含用逗号分隔的*不同值，并且没有其他填充或多余内容。* `user_id`

* * *

要查找包含指定确切成员的项目，可以改为：

```
SELECT   project_id
FROM     project_members
GROUP BY project_id
HAVING   COUNT(*) = 3
     AND NOT SUM(user_id NOT IN (1,3,4)) 
```

程序版本将是：

```
CREATE PROCEDURE get_projects(IN members TEXT)
SELECT   project_id
FROM     project_members
GROUP BY project_id
HAVING   COUNT(*) = 1 + CHAR_LENGTH(members)-CHAR_LENGTH(REPLACE(members,',',''))
     AND NOT SUM(FIND_IN_SET(user_id, members)=0); 
```

# asp.net-mvc-3 - _Layout.cshtml 中的 MVC 4 变量

> ID：12219292
> 
> 赞同：0
> 
> 时间：2012-08-31T16:32:15.297
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

在 MVC 3 中，我可以输入：

```
@{
    string rootPath = HttpContext.Current.Request.ApplicationPath;
    if (rootPath == "/")
    {
        rootPath = rootPath.Replace("/", "");
    }
} 
```

在我的 _Layout.cshtml 文件中，然后在我的任何其他视图中使用 rootPath 来获取站点根目录。我在 MVC 4 应用程序中尝试了同样的事情，除非我将上面的代码放在我试图使用 rootPath 的同一个视图文件中，否则它不起作用。还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:42:04.123

根据您在做什么，您可以将该逻辑放在一个 html 帮助程序中，然后可以从任何地方调用该帮助程序。

# wcf - 使用 WCF 客户端生成正确的肥皂消息 - WS-Security 标准

> ID：12219296
> 
> 赞同：0
> 
> 时间：2012-08-31T16:32:34.050
> 
> 标签：wcf, soap, https, ws-security

基本上我的问题是与使用 WS-Security 标准的 Web 服务进行通信。我正在处理的客户端是 .net 4.0 C# (WCF) 并且服务不是 .net （我不知道背后是什么样的技术）基本上我必须发送给服务的消息，必须有没有密码的签名 UsernameToken 和使用证书通过 HTTPS 加密的正文。虽然我写了很多 wcf 服务，但我不是签名、密码学和软件安全方面的专家，所以我不知道如何解决这个问题。

我附上了一个由一家公司提供给我的消息示例，该公司已经完成了这样的客户端，但在另一种技术中（我想是在 java 或 PHP 中），表示服务的 WSDL 文件 + (xsd)。

我已经失去了一周的谷歌搜索并尝试了一些方法但没有成功。

[我必须生成WSDL 文件](http://live.farhouse.si/dwn/pgad.wsdl)[的消息示例](http://live.farhouse.si/dwn/seccond.xml)

# matlab - 还有什么比ismember更快的类似逻辑？

> ID：12219298
> 
> 赞同：2
> 
> 时间：2012-08-31T16:32:56.053
> 
> 标签：matlab, random

继续我的研究，

我需要另一个类似的逻辑，`ismember`它的执行时间更快。我的这部分代码和矩阵。

```
StartPost =

    14    50    30     1    72    44    76    68    63    80    25    41;
    14    50    30     1    61    72    42    46    67    77    81    27;
    35    23     8    54    19    70    48    75    66    79     2    84;
    35    23     8    54    82    72    78    68    19     2    48    66;
    69    24    36    52    63    47     5    18    11    82     1    15;
    69    24    36    52    48    18     1    12    80    63     6    84;
    73    38    50     7     1    33    24    68    29    20    62    84;
    73    38    50     7    26    61    65    32    22    18     2    69]

for h=2:2:8,
    ...
       done=all(ismember(StartPost(h,1:4),StartPost(h-1,1:4)));
    ...
end 
```

我使用 Profile viewer 检查了该代码。我在这部分得到了这一点，这使得我的代码执行缓慢。

有谁有这个逻辑的经验，请分享。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T17:36:26.070

MATLAB 有几个[未记录的内置函数](http://undocumentedmatlab.com/)，它们可以帮助您实现与其他函数相同的结果，但速度更快。

在您的情况下，您可以使用[`ismembc`](http://undocumentedmatlab.com/blog/ismembc-undocumented-helper-function/)：

```
done = all(ismembc(StartPost(h, 1:4), sort(StartPost(h-1, 1:4))))); 
```

请注意，`ismembc(A, B)`需要对矩阵`B`进行排序并且不包含任何 NaN 值。

这是您的示例的执行时间差异：

```
tic
for h = 2:2:8
   done = all(ismember(StartPost(h, 1:4), StartPost(h-1, 1:4)));
end
toc

Elapsed time is 0.029888 seconds.

tic
for h = 2:2:8
   done = all(ismembc(StartPost(h, 1:4), sort(StartPost(h-1, 1:4))));
end
toc

Elapsed time is 0.006820 seconds. 
```

这大约快 50 倍。

# android - Android：资源字符串自动生成

> ID：12219299
> 
> 赞同：4
> 
> 时间：2012-08-31T16:32:58.370
> 
> 标签：android, eclipse, android-layout, eclipse-plugin

我是安卓新手。当我在图形布局中添加按钮/视图时，它会以这种方式添加标签文本 - android:text="Button" 。为什么不添加“android:text="@string/my_label" 并在string.xml文件中添加一个字符串资源。不能在eclipse中自动完成吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T17:19:01.160

我进行了很多搜索，但没有任何自动方式将字符串添加到资源文件中，但是恕我直言，这将为您节省很多时间。

**选择一个字符串，点击 Refactor --> Android --> Extract Android String。**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-29T22:58:13.077

感谢[布伦特·赫罗尼克](https://stackoverflow.com/users/1456948/brent-hronik)。Windows 上的 CTRL-1 可以正常工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-31T16:45:09.173

因为您不必使用 @string 资源。@strings 资源的目的是使更改代码元素变得更加容易。例如，如果您在多个地方使用您的应用程序标题，假设在每个对话框中，那么如果您更改标题，则必须在显示应用程序标题的所有实例中更改它。因此在这种情况下，@string/App_Title 可以设置为“我的程序”，并且所有对话框都可以引用它。如果您将标题更改为“Hello World”，那么所有这些都会更改。@strings 资源，虽然 eclipse 尝试，但不必用于每个字符串。不使用它相当于对值进行硬编码。有很多理由支持和反对使用@string 来处理所有事情。

我不确定eclipse中是否有设置会在添加控件时自动将字符串添加到资源文件中。

（编辑：基于其他用户 CTRL+1 是执行此操作的捷径。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-17T19:52:23.290

您可以通过同时单击命令和 1（在 Mac 上，假设它是 Windows 或 Linux 机器上的控件 1）将字符串添加到 strings.xml。这会将资源添加到 strings.xml，然后在编辑器中打开它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-22T10:09:35.280

感谢西迪克·阿布·巴卡尔！我没想到它会在那里。

在 Eclipse（和 Windows）上，快捷方式是：

**Alt+Shift+A** *（全部释放然后按下）* **S**

当您第一次使用 Eclipse 时，很难理解如何使用这些“复杂”的快捷方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-24T12:20:21.547

我不能投票，也不能评论答案（因为我是新用户，所以声誉不佳）

但我确认：

```
1) hard type the string in your code like
   mydlg.setTitle("hello guys");
2) select your string (e.g : "hello guys")
3) press Alt + Shift + A then press S 
```

将出现一个对话框，让您将新字符串添加到资源中。一切都应该已经填写到该对话框中。

# asp.net-mvc - ASP.NET MVC 是否允许私有 ViewModel 构造函数？

> ID：12219305
> 
> 赞同：7
> 
> 时间：2012-08-31T16:33:43.467
> 
> 标签：asp.net-mvc, architecture

问题是，如标题所示，MVC 模型绑定器是否允许视图模型对象的私有构造函数。显然它没有，`MissingMethodException: No parameterless constructor defined for this object.`即使有一个私有的无参数构造函数。如果不允许私有构造函数，是否有架构解决方法？

这样的构造函数可能有助于确保只有模型绑定器可以创建 ViewModel 对象，其字段可能不会被一致地填充 - 在代码的其他部分中不会有一些字段被忘记完成。

在类似的情况下，实体框架可以使用私有构造函数和私有属性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T16:35:37.357

不，不是的。

如果要阻止实际代码调用该构造函数，可以添加`[Obsolete("For model binding only", true)]`到公共构造函数。如果显式调用构造函数，这将导致编译器错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:37:38.693

您始终可以编写一个支持私有/受保护 ctor 的自定义模型绑定器。

# php - 仅从 Joomla Pagination UL by PHP 获取下一页链接

> ID：12219312
> 
> 赞同：0
> 
> 时间：2012-08-31T16:34:00.120
> 
> 标签：php, html-lists, joomla2.5

我有以下由 Joomla 生成的用于页面导航的动态输出。

```
<ul>
    <li class="pagination-start">
        <span class="pagenav">Start</span>
    </li>
    <li class="pagination-prev">
        <span class="pagenav">Prev</span>
    </li>
    <li>
        <span class="pagenav">1</span>
    </li>
    <li>
        <a title="2" href="link-to-page-2" class="pagenav">2</a>
    </li>
    <li class="pagination-next">
        <a title="Next" href="link-to-next-page" class="pagenav">Next</a>
    </li>
    <li class="pagination-end">
        <a title="End" href="link-to-last-page" class="pagenav">End</a>
    </li>
</ul> 
```

我只需要下一页的链接数据，即**链接到下一页**，它由`<li class="pagination-next"></li>`

我需要在 PHP 中执行此操作，以便我可以为我的无限滚动插件使用相同的功能。

我可以通过 jQuery 做到这一点，但它不会达到目的。我正在寻找一个 PHP 解决方案来获得这个。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T18:21:14.953

在您的 jquery 代码中使用以下内容：

```
navSelector  : '.pagenav',    // selector for the paged navigation
nextSelector : '.pagenav a[title="Next"]',  // selector for the NEXT link (to page 2) 
```

我没有调试过上面的代码，只是从 Joomla 1.5 改编而来（见[这里](http://forum.techbubble.net/viewtopic.php?f=4&t=2486)）

# git - 无法切换分支 - “错误：未跟踪的工作树文件......”我应该做 git add 吗？

> ID：12219318
> 
> 赞同：6
> 
> 时间：2012-08-31T16:34:24.877
> 
> 标签：git

我的**.gitignore**文件中有这个：

```
/nbproject/
/app/runtime/
/app/runtime/application.log*
/app/runtime/error.log*
/app/config/localdev.php*
.DS_Store 
```

1）我已经结帐到**master 分支**，然后再次结帐，回到**dev 分支**。

2) 一旦我回到**dev 分支**，我丢失了所有 /nbproject/ 文件和所有 /app/config/localdev.php ！！！也许还有其他的，但由于它们是由 php 框架在运行时自动生成的，所以我真的说不出来！

3）然后我切换回**主分支**，我在那里得到了这些文件。

4）我已经将这些文件复制到其他地方，并且再次切换到**dev 分支**。

5) 我已将那些丢失的文件放回 /nbproject/ 文件夹中。

现在，如果我尝试切换到 Master 分支，我会得到：

```
Error: The following untracked working tree files would be overwritten by checkout:     
    nbproject/private/config.properties      
    nbproject/private/private.properties     
    nbproject/private/private.xml    
    nbproject/project.properties     
    nbproject/project.xml 

    Please move or remove them before you can switch branches.  

    Aborting 
```

我知道我可能应该做一个`git add .`移动存储库中的这些文件，我不明白的是：

如果在发出这些 git checkout 命令之前我已经忽略了 nbproject/ ，为什么 git 会抛出此消息？

问题：

关键是忽略这些文件。在 master 和 dev 上。我的问题是：我该如何解决这个问题，以便：

a) 首先： **将这些文件（gitignore 上的文件）返回给 dev ？**

b) 第二： **采取措施再次避免这种冲突。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:24:42.353

您可以在另一个分支中跟踪它们。或者，您可以添加`--force`到 checkout 命令以使用 master 拥有的文件来删除文件。或者，您可以`git clean -xdf`在签出 master 之前从工作目录中删除文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T11:53:23.993

为解决问题而采取的步骤。致谢：**jszakmeister**

**1）**我已将项目克隆到其他地方。

**2）**我在那个克隆上结帐大师。

**3)**将 gitignore 放入 master 中，因为它应该从一开始就在那里： git show dev:.gitignore > .gitignore

**4）**我已经通过执行 git rm "all files that where on gitignore one one" 从树中删除了文件

**5)**我已将 .gitignore 文件添加到存储库中。

**6）**提交

**7）**切换回原来的回购并做了：

**8)** git fetch /path/to/fix-project master:master

**9)** git checkout master，我得到： 切换到分支'master' 你的分支领先于'hub/master' 1 次提交。这是我的远程主分支。

**10)**推送到远程主机。

**11）**再次结帐开发

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T11:21:14.923

**如果您遇到如下情况**：

您已将子分支合并到主分支中。然后您尝试在 master 分支中提取更改。现在，当您尝试将分支从子分支切换到主分支时，您会遇到上述问题，即“**请先移动或删除它们，然后才能切换分支。** ”

第 1 步：备份所有列出的文件（以防您的操作系统无法恢复）。

第 2 步：删除导致错误的文件。

STEP 3：切换分支（现在不会抛出错误）

第 4 步：恢复已删除的文件。

快乐编码 ;)

# php - 在 foreach 循环中从 Mysql 查询创建数组

> ID：12219319
> 
> 赞同：1
> 
> 时间：2012-08-31T16:34:30.117
> 
> 标签：php, mysql, arrays

我正在尝试填充显示统计信息的表格。我使用以下查询将广告系列 ID 列表放入数组中：

```
$query = "SELECT `id` FROM `c_templates` ORDER BY `id`";
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){
    $id[] = $row['id'];
} 
```

一旦我拥有了所有的 id，我将使用 foreach 循环对每个 id 进行 5 次查询，收集所有表数据。

```
foreach($id as $i){
    // sent
    $query = "SELECT `template`, COUNT(*) as count FROM `s_log` WHERE `template` = '".$i."' AND `time_sent` BETWEEN '".$start."' AND '".$stop."'";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $template[] = $row['template'];
        $count[] = $row['count'];
    }

    // opens
    $query = "SELECT COUNT(*) as count FROM `t_opens` WHERE `campaign_id` = '".$i."' AND `timestamp` BETWEEN '".$start."' AND '".$stop."'";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $opens[] = $row['count'];
    }

    // clicks   
    $query = "SELECT `campaign_id`, COUNT(*) as count FROM `t_analytics` WHERE `campaign_id` = '".$i."' AND `timestamp` BETWEEN '".$start."' AND '".$stop."'";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $click_count[] = $row['count'];
    }

    // conversions
    $query = "SELECT `conversion_value`, COUNT(*) as count FROM `t_analytics` WHERE `campaign_id` = '".$i."' AND `timestamp` BETWEEN '".$start."' AND '".$stop."' AND `conversion_value` > 0";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $conversion_value[] = $row['conversion_value'];
        $conversion_count[] = $row['count'];
    }

    // bounce rate
    $query = "SELECT COUNT(*) AS `ck` FROM `s_log` WHERE `time_sent` BETWEEN '".$start."' AND '".$stop."' AND `status` = 'hardbounce' OR `status` = 'softbounce' AND `template` = '".$i."'";
    $result = mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_array($result)){
        $bounce_count[] = $row['ck'];
    }
} 
```

问题是这个过程需要 4-5 秒来执行超过 40-50`id`条记录。我在每个查询之后放置了一些计时器，以确认查询是否正确执行。我运行了 OPTIMIZE 并仔细检查以确保所有内容都已正确编入索引。据我所知，问题不在mysql中。

我唯一能找到的是每个循环周期后都有 0.1-0.5 秒的延迟。当尝试运行 40-50 行时，这肯定会开始增加。

我的问题：有没有更好更快的方法来获取这些数据？还有什么我应该检查的东西来加快这个过程吗？

我能想到的唯一解决方案是为每个统计信息（总共 5 个查询）运行一个查询，获取所有数据`id`并将它们放在一个数组中以供以后显示。我不确定如何做到这一点，或者是否有可能。在我看来，我必须为每个单独的查询运行一个单独的查询`id`，但我希望我错了。

任何帮助将不胜感激！！

# android - 通过异步任务更新 TextView

> ID：12219322
> 
> 赞同：1
> 
> 时间：2012-08-31T16:34:52.700
> 
> 标签：android, dialog, textview, android-asynctask

我试图关闭 AsyncTask 的 onPostExecute() 中的对话框，并在 textview 中设置文本，但 textview 没有改变，我得到“窗口已经聚焦，忽略...的焦点增益”。

这是代码：

```
 protected void onPreExecute() {
    dialog = ProgressDialog.show(mContext, "","Loading...", true);

}

protected void onPostExecute(Object result) {
    dialog.dismiss();
    tv.setText("some text");

} 
```

显示进度对话框，当我的后台工作完成后，它被关闭，但 textview 没有变化。如果没有进度对话框，则会更新文本视图。

任何想法，解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:58:16.257

调用***后***尝试此代码段**`dialog.dismiss()`**。

```
 if (!dialog.isShowing()) 
            {
                TextView tv = (TextView) findViewById(R.id.textView);
                tv.setText("some text");
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T09:41:24.907

```
public class MyActivity extends Activity 
     {
/**
 * Called when the activity is first created.
 */
ProgressBar progressBar;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    progressBar = (ProgressBar) findViewById(R.id.pb);
    TextView view=(TextView) findViewById(R.id.myt);
    new Task(view).execute();

} 
```

通过在构造函数中传递 TextView 实例，我们可以在进度条中使用

```
private class Task extends AsyncTask<Void, Integer, Void> {
    TextView view;
    private Task(TextView textView) {
        this.view= textView;
    }

    int myProgress;

    @Override
    protected void onPreExecute() {
        myProgress = 0;
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void aVoid) {
        Toast.makeText(MyActivity.this,
                "onPostExecute", Toast.LENGTH_LONG).show();

        super.onPostExecute(aVoid);
    }

    @Override
    protected void onProgressUpdate(Integer... values) {

        progressBar.setProgress(values[0]);
        view.setText("Value"+myProgress);
        super.onProgressUpdate(values);
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();    //To change body of overridden methods use File | Settings | File Templates.
    }

    @Override
    protected Void doInBackground(Void... voids) {
        while (myProgress < 100) {
            myProgress++;

            publishProgress(myProgress);
            SystemClock.sleep(100);
        }
        return null;
    }
}

  } 
```

# ssh - MPI 进程中未设置本地环境

> ID：12219323
> 
> 赞同：5
> 
> 时间：2012-08-31T16:34:53.613
> 
> 标签：ssh, environment-variables, mpi, .bash-profile

当我`mpiexec`在几台计算机上运行时，它们中的一些不会自动加载它们的本地环境——它们似乎没有运行它们的`bashrc`或`bash_profile`文件。当我`ssh`进入这些麻烦的计算机时，一切都很好（环境就在那里）。还能缺少什么？

如果我跑

```
mpiexec -np 1 --host remotehost printenv 
```

我得到一个非常小的结果。但是，如果我执行以下操作

```
ssh remotehost
printenv 
```

我得到了一个更大、更全面的结果。这两者有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-10T05:41:30.697

MPI 作业在不加载的非交互式 shell 中运行`.bashrc`。`.bashrc`通常最好在对 mpiexec 的调用中设置环境变量，而不是让每个作业加载自己的。默认情况下，MPICH 将传递启动过程中的所有环境变量，但对于 OpenMPI，您需要使用该`--envall`选项。

# c# - 如何检查sql表上是否存在值？

> ID：12219324
> 
> 赞同：0
> 
> 时间：2012-08-31T16:34:59.103
> 
> 标签：c#, sql

您好，现在我正在使用 C# 进行编程并正在为他们的帐户注册用户。我已经完成了向 sql 插入值，现在我想检查该值是否存在？表详细信息：

```
Username              Password
Peter                 abc  
Hannah                abd 
John                  bdf 
```

我推荐一种简单的方法将用户名设置为主键并使用 try catch 错误来检测它。但我想找到找到我的用户名存在的具体方法。Tks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:37:28.623

如果要在尝试插入之前检查值是否存在，可以编写如下 SQL 语句：

```
if not exists (select 1 from table where username=@username)
begin
     insert into ...
end
else
begin
    RAISERROR ('User already exists. Pick another one.', -- Message text.
           16, -- Severity.
           1 -- State.
           );
end 
```

如果插入不成功，因为用户名已经存在，你可以简单地`Exception`在客户端输出消息。

```
try
{
    //do the insert
}
catch(Exception ex)
{ 
   //Output ex.Message, it will say: User already exists. Pick another one.
} 
```

更好的方法 IMO 是在用户名上创建唯一索引，并使其因违反唯一约束而失败。您可以简单地捕获异常并显示用户友好的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:37:50.697

您不想将用户名设为主键。但是，您*应该*将其设为唯一索引。

无论如何，这很简单：

```
SELECT COUNT(*) from UserTable where Username = 'Peter' 
```

... 如果用户名存在则返回 1（或更多），如果不存在则返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:36:37.813

```
SELECT TOP 1 Username FROM mytable WHERE Username='Peter' 
```

然后您可以使用代码来确定是否有任何行返回。

您可以使用此方法进行登录。但是对于注册新用户，不能保证在您检查和插入新记录之间没有人会使用用户名。所以无论如何，try ... catch 是不可避免的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T16:40:35.143

您可以使用

```
 `IF Exists(Select Top 1 * from Users where username = @userNameYouWantToCheck)
  Begin
... Do what you want to do if it exists...   
  END

 ELSE      
 BEGIN     
   ...catch error here...     
 END 
```

`

# java - 基本GUI程序布局定位

> ID：12219326
> 
> 赞同：2
> 
> 时间：2012-08-31T16:35:09.937
> 
> 标签：java, swing, awt, layout-manager

很长一段时间以来，我一直在试图弄清楚如何正确布局我的程序。我基本上有 5 个 JLabel、5 个 JTextField 和 6 个 JButton，我需要将其对齐，如下所示。

我尝试使用 GridLayout，但它使 JTextFields 非常厚，我尝试了不同的流布局组合，结果不一。我想知道是否有人可以指导我如何获得以下结果？

提前致谢。

这是我现在的代码：

```
 public class MyClass extends JFrame{
        private JTextField item1;
        private JTextField item2;
        private JTextField item3;
        private JTextField item4;
        private JTextField item5;
        JLabel label1 = new JLabel("Enter number of items in this order:");
        JLabel label2 = new JLabel("Enter CD ID for Item #1:");
        JLabel label3 = new JLabel("Enter quantity for Item #1:");
        JLabel label4 = new JLabel("Item #1 info:");
        JLabel label5 = new JLabel("Order subtotal for 0 item(s):");
        private JButton button1 = new JButton("Process Item #1");
        private JButton button2 = new JButton("Confirm Item #1");
        private JButton button3 = new JButton("View Order");
        private JButton button4 = new JButton("Finish Order");
        private JButton button5 = new JButton("New Order");
        private JButton button6 = new JButton("Exit");
        private Scanner x;
        private int exitFlag = 0;
        public String[] idArray = new String[10];
        public String[] recordArray = new String[10];
        public String[] priceArray = new String[10];
        public int myNum=1;
        private JPanel jp = new JPanel();

        public void openFile(){
            try{
                x = new Scanner(new File("inventory.txt"));
                x.useDelimiter(",|" + System.getProperty("line.separator")); 
            }
            catch(Exception e){
                System.out.println("Could not find file");
            }
        }
        public void readFile(){
            int i=0;
            while(x.hasNext()){
                idArray[i] = x.next();
                recordArray[i] = x.next();
                priceArray[i] = x.next();
                i++;
            }
        }
        public int itemNum(int num){
            return num+1;
        }
        public MyClass(){
            super("Matt's World of Music");
            jp.setLayout(new FlowLayout(FlowLayout.RIGHT));

            Box vertBox = Box.createVerticalBox();
            Box vertBox2 = Box.createVerticalBox();
            Box itemBox2 = Box.createHorizontalBox();

            item1 = new JTextField(40);
            item2 = new JTextField(40);
            item3 = new JTextField(40);
            item4 = new JTextField(40);
            item5 = new JTextField(40);

            vertBox.add(label1);
            vertBox.add(label2);
            vertBox.add(label3);
            vertBox.add(label4);
            vertBox.add(label5);
            jp.add(vertBox);
            vertBox2.add(item1);
            vertBox2.add(item2);
            vertBox2.add(item3);
            vertBox2.add(item4);
            vertBox2.add(item5);
            jp.add(vertBox2);

            itemBox2.add(button1);
            itemBox2.add(button2);
            itemBox2.add(button3);
            itemBox2.add(button4);
            itemBox2.add(button5);
            itemBox2.add(button6);
            jp.add(itemBox2);
            add(jp);

            button2.setEnabled(false);
            button3.setEnabled(false);
            button4.setEnabled(false);
            item4.setEditable(false);
            item5.setEditable(false);

            //Process Item
            button1.addActionListener(new ActionListener(){
               public void actionPerformed(ActionEvent e){
                  MyClass obj = new MyClass();

                  button1.setEnabled(false);
                  button2.setEnabled(true);
                  item1.setEditable(false);

                  obj.openFile();
                  obj.readFile();

                  //start loop
                  for(int i=0; i < idArray.length; i++){
                      if(item2.getText().equals(obj.idArray[i])==true){
                          //set item4 text field to price id and other details
                          item4.setText(obj.idArray[i] + " " + obj.recordArray[i] + " $" + obj.priceArray[i].replaceAll("\\s",""));
                      }
                   }                  
                }
            });
            //Confirm Item
            button2.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    if(myNum==Integer.parseInt(item1.getText())){
                        JOptionPane.showMessageDialog(null, "Item #" + (myNum) + " accepted");
                        button2.setEnabled(false);
                        button1.setText("Process Item");
                        button2.setText("Confirm Item");
                        button1.setEnabled(false);
                        button3.setEnabled(true);
                        button4.setEnabled(true);
                        item2.setText("");
                        item3.setText("");
                        label2.setText("");
                        label3.setText("");
                        item2.setEditable(false);
                        item3.setEditable(false);
                    }else{
                        //Execute when button is pressed
                        button1.setEnabled(true);
                        button2.setEnabled(false);
                        JOptionPane.showMessageDialog(null, "Item #" + (myNum) + " accepted");
                        item2.setText("");
                        item3.setText("");
                        label2.setText("Enter CD ID for Item #" + (myNum+1) + ":");
                        label3.setText("Enter quantity for Item #" + (myNum+1) + ":");
                        label4.setText("Item #" + (myNum+1) + " info:");
                        myNum++;
                        button1.setText("Process item #" + (myNum));
                        button2.setText("Confirm item #" + (myNum));
                    }
                }
            });
            //View Order
            button3.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    //Execute when button is pressed
                    System.out.println("View Order");
                }
            });
            //Finish Order
            button4.addActionListener(new ActionListener(){
                public void actionPerformed(ActionEvent e){
                    //Execute when button is pressed
                    System.out.println("Finish Order");
                }
            });
            //New Order
            button5.addActionListener(new ActionListener(){
               public void actionPerformed(ActionEvent e){
                   //Execute when button is pressed
                   System.out.println("New Order");
               }
            });
            //Quit
            button6.addActionListener(new ActionListener(){
               public void actionPerformed(ActionEvent e){

                   //exit program

               }
            }); 
        }      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:42:36.070

我会这样设计：

*   主面板将有一个`BorderLayout`作为布局管理器并包含 2 个面板：一个在中心，一个在南部
*   中心的面板可以有一个`GridBagLayout`并包含标签和文本字段
*   南面的面板可能有 a`FlowLayout`或 a`BoxLayout`并包括按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:47:43.507

作为单一布局，您可能希望使用`GroupLayout`or `GridBagLayout`。我可能会将其作为嵌套布局。

*   A`BorderLayout`为外容器。
*   中的一个`GridLayout`文本字段`LINE_END`。
*   中的一个`GridLayout`标签`CENTER`。
*   A`FlowLayout`处的按钮`PAGE_END`。

如果任何文本字段比需要的大，请将它们包裹在一个`new JPanel(new FlowLayout())` - 面板将填充父位置，同时允许文本文件缩小到它需要的任何大小。

* * *

当然，这忽略了过多的优秀 3rd 方布局，例如`FormLayout`，`MigLayout`..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T16:59:22.693

使用一个简单的`GridBagLayout`使它看起来像你的截图：

```
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Scanner;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class MyClass extends JFrame {
    private final JTextField item1;
    private final JTextField item2;
    private final JTextField item3;
    private final JTextField item4;
    private final JTextField item5;
    JLabel label1 = new JLabel("Enter number of items in this order:");
    JLabel label2 = new JLabel("Enter CD ID for Item #1:");
    JLabel label3 = new JLabel("Enter quantity for Item #1:");
    JLabel label4 = new JLabel("Item #1 info:");
    JLabel label5 = new JLabel("Order subtotal for 0 item(s):");
    private final JButton button1 = new JButton("Process Item #1");
    private final JButton button2 = new JButton("Confirm Item #1");
    private final JButton button3 = new JButton("View Order");
    private final JButton button4 = new JButton("Finish Order");
    private final JButton button5 = new JButton("New Order");
    private final JButton button6 = new JButton("Exit");
    private Scanner x;
    private final int exitFlag = 0;
    public String[] idArray = new String[10];
    public String[] recordArray = new String[10];
    public String[] priceArray = new String[10];
    public int myNum = 1;
    private final JPanel jp;

    public void openFile() {
        try {
            x = new Scanner(new File("inventory.txt"));
            x.useDelimiter(",|" + System.getProperty("line.separator"));
        } catch (Exception e) {
            System.out.println("Could not find file");
        }
    }

    public void readFile() {
        int i = 0;
        while (x.hasNext()) {
            idArray[i] = x.next();
            recordArray[i] = x.next();
            priceArray[i] = x.next();
            i++;
        }
    }

    public int itemNum(int num) {
        return num + 1;
    }

    public MyClass() {
        super("Matt's World of Music");

        jp = new JPanel();
        jp.setLayout(new GridBagLayout());

        GridBagConstraints c = new GridBagConstraints();

        c.anchor = GridBagConstraints.BASELINE_TRAILING;

        // Box vertBox = Box.createVerticalBox();
        // Box vertBox2 = Box.createVerticalBox();
        // Box itemBox2 = Box.createHorizontalBox();

        item1 = new JTextField(40);
        item2 = new JTextField(40);
        item3 = new JTextField(40);
        item4 = new JTextField(40);
        item5 = new JTextField(40);

        c.gridx = 0;
        c.gridy = 0;
        jp.add(label1, c);

        c.gridy++;
        jp.add(label2, c);

        c.gridy++;
        jp.add(label3, c);

        c.gridy++;
        jp.add(label4, c);

        c.gridy++;
        jp.add(label5, c);

        c.gridx = 1;
        c.gridy = 0;
        jp.add(item1, c);

        c.gridy++;
        jp.add(item2, c);

        c.gridy++;
        jp.add(item3, c);

        c.gridy++;
        jp.add(item4, c);

        c.gridy++;
        jp.add(item5, c);

        JPanel btnPan = new JPanel(new FlowLayout(FlowLayout.CENTER));
        btnPan.setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));

        btnPan.add(button1);
        btnPan.add(button2);
        btnPan.add(button3);
        btnPan.add(button4);
        btnPan.add(button5);
        btnPan.add(button6);

        c.gridwidth = 2;
        c.gridx = 0;
        c.gridy++;
        jp.add(btnPan, c);
        add(jp);

        button2.setEnabled(false);
        button3.setEnabled(false);
        button4.setEnabled(false);
        item4.setEditable(false);
        item5.setEditable(false);

        // Process Item
        button1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                MyClass obj = new MyClass();

                button1.setEnabled(false);
                button2.setEnabled(true);
                item1.setEditable(false);

                obj.openFile();
                obj.readFile();

                // start loop
                for (int i = 0; i < idArray.length; i++) {
                    if (item2.getText().equals(obj.idArray[i]) == true) {
                        // set item4 text field to price id and other details
                        item4.setText(obj.idArray[i] + " " + obj.recordArray[i] + " $"
                                + obj.priceArray[i].replaceAll("\\s", ""));
                    }
                }
            }
        });
        // Confirm Item
        button2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (myNum == Integer.parseInt(item1.getText())) {
                    JOptionPane.showMessageDialog(null, "Item #" + (myNum) + " accepted");
                    button2.setEnabled(false);
                    button1.setText("Process Item");
                    button2.setText("Confirm Item");
                    button1.setEnabled(false);
                    button3.setEnabled(true);
                    button4.setEnabled(true);
                    item2.setText("");
                    item3.setText("");
                    label2.setText("");
                    label3.setText("");
                    item2.setEditable(false);
                    item3.setEditable(false);
                } else {
                    // Execute when button is pressed
                    button1.setEnabled(true);
                    button2.setEnabled(false);
                    JOptionPane.showMessageDialog(null, "Item #" + (myNum) + " accepted");
                    item2.setText("");
                    item3.setText("");
                    label2.setText("Enter CD ID for Item #" + (myNum + 1) + ":");
                    label3.setText("Enter quantity for Item #" + (myNum + 1) + ":");
                    label4.setText("Item #" + (myNum + 1) + " info:");
                    myNum++;
                    button1.setText("Process item #" + (myNum));
                    button2.setText("Confirm item #" + (myNum));
                }
            }
        });
        // View Order
        button3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Execute when button is pressed
                System.out.println("View Order");
            }
        });
        // Finish Order
        button4.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Execute when button is pressed
                System.out.println("Finish Order");
            }
        });
        // New Order
        button5.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // Execute when button is pressed
                System.out.println("New Order");
            }
        });
        // Quit
        button6.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                // exit program

            }
        });
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyClass c = new MyClass();
                c.pack();
                c.setVisible(true);

            }
        });
    }
} 
```

![在此处输入图像描述](../Images/163138bad068eaf4f864cb1aa4d6995b.png)

# ajax - 如何发布 ajax 单选值？

> ID：12219327
> 
> 赞同：1
> 
> 时间：2012-08-31T16:35:10.260
> 
> 标签：ajax, post

我正在努力从一个 ajax 创建的单选按钮中获取数据，以便在单击提交按钮时正确发布数据，我很沮丧试图找出我哪里出错了。

我是否认为一旦在我的 HTML 驱动的网站中从此处显示的 ajax 后端正确创建了 ajax 单选按钮，我是否错了

```
while(odbc_fetch_row($rs)) {
    $rowCarDeets = odbc_result($rs, 'CarDescript');
    $response = $response . "<input type='radio' name='CarDescription' value='" . $rowCarDeets . "'>". $rowCarDeets . "</input></br>";
} 
```

我需要做的就是用 $_POST['CarDescription'] 抓住它？我在这方面的工作经验很少，所以如果我需要添加一些应该非常明显的东西，请不要犹豫，提出建议，以防我忘记了。

就像一个注释一样，这些单选按钮所在的表单中的所有其他内容（不是通过 ajax 提供，只是接受用户输入）都可以完美发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:38:48.043

在 中`$_POST`，您应该能够通过使用元素的 name 属性来获取选中的值。

所以：`$_POST['CarDescription']`

# flyway - 我可以在描述中使用数字来强制 SQL 文件的加载顺序吗？

> ID：12219332
> 
> 赞同：0
> 
> 时间：2012-08-31T16:35:34.210
> 
> 标签：flyway

玩弄 Flyway，我有一个问题，对于初始版本（对于一个全新的空白数据库），我可以将 SQL 文件模块化为：

```
V0_1_0__01Initial_Version.sql
V0_1_0__02Setup_Countries.sql
V0_1_0__03Create_Default_Organisation.sql 
```

等等，以便我强制 SQL 文件的精确加载顺序？

文档中没有任何内容表明我*不能*这样做，但是再一次，文档中没有任何内容表明我*可以*这样做:-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:28:06.567

不，排序是通过版本号来实现的。您必须将您的订购号移动到版本号本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:30:49.933

亚历克斯所暗示的以及非常有效的方法就是这样做：

```
V0_1_0_001__Initial_Version.sql
V0_1_0_002__Setup_Countries.sql
V0_1_0_003__Create_Default_Organisation.sql 
```

如您所见，001、002 和 003 现在是版本的一部分——有点像一个非常小的补丁级别。

# php - 将 App.net 对话线程化到树中

> ID：12219340
> 
> 赞同：3
> 
> 时间：2012-08-31T16:36:22.587
> 
> 标签：php, json, algorithm, tree

我想从一个平面结构创建一个 JSON 树——在本例中是一个 App.net 线程。

我想要这样的 JSON

```
"id": "12345",
"name": "Ringo",
    "data": 
    {
        "avatar": "",
        "text": "We All Live",
    },
    "children": [{
        "id": "34567",
        "name": "John",    
        "data": 
        {
            "avatar": "",
            "text": "In a pink submarine?",
        },
        "children": [{
            "id": "35555",
            "name": "George",    
            "data": 
            {
                "avatar": "",
                "text": "Don't be daft",
            },
            "children": []
        }]
    },{
        "id": "98765",
        "name": "Paul",    
        "data": 
        {
            "avatar": "",
            "text": "In a yellow submarine?",
        },
        "children": []
    }] 
```

因此，每个帖子可以有多个孩子。每个孩子都可以有孩子。

从 App.net 返回的 JSON**没有**线程化。

```
{
    "id": "98765",
    "parent": "12345"
    "details": {
    ...}
},
{
    "id": "34567",
    "parent": "12345"
    "details": {
    ...}
}, 
```

我已经使用 json_decode() 将 JSON 响应放入一个数组中。我可以使用 foreach 进行迭代。

如何将每个帖子放在多维数组的正确部分？

```
Parent
|_
  |-child
  |-child
  |  |-child
  |-child 
```

ETC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:46:03.550

我会使用引用，这是 PHP 经常被遗忘的硬链接。像这样的东西：

我假设您有一个`$posts`从 App.net API 调用中返回的数组。

（未经测试，可能无法编译/运行/可能有错误/可能是更有效的方法）

```
// first throw everything into an associative array for easy access
$references = array();
foreach ($posts as $post) {
    $id = $post['id'];
    $post['children'] = array();
    $references[$id] = $post;
}

// now create the tree
$tree = array();
foreach ($references as &$post) {
    $id = $post['id'];
    $parentId = $post['parent'];
    // if it's a top level object, add it to the tree
    if (!$parentId) {
        $tree[] =& $references[$id];
    }
    // else add it to the parent
    else {
        $references[$parentId]['children'][] =& $post;
    }
    // avoid bad things by clearing the reference
    unset($post);
}

// encode it
print json_encode($tree); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:26:41.890

只是在这里勾勒出一个答案：假设您可以将所有条目保存在 RAM 中，否则您将不得不做出一些排序假设并在完成一个完整单元时清除我们的数组。

创建一个`posts`由 id 保存结构索引的数组，其中包含详细信息和一个子数组。然后遍历您的输入数组和每个元素：

*   `posts[id]`如果尚未创建则创建
*   填写详细信息`post[id]`
*   如果有父级，则查找（如果需要则创建它——不知道排序如何）`posts[parent_id]`并将这个结构添加到那里的子级中。

最后，您可以遍历所有帖子，那些没有父母的帖子是他们的孩子正确填写的根。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:15:04.763

我写了一个[类和示例脚本](https://gist.github.com/3556745)来完成我认为你想要的。

它将平面结构转换为分层结构，并且还考虑了孤立更新（没有可用父更新的更新）。

**更新.php**

```
<?php

/**
 * An App.net update.
 */
class Update extends ArrayObject
{
    /**
     * The update's children.
     *
     * @var array
     */
    private $children = array();

    /**
     * The parent update.
     *
     * @var Update
     */
    private $parent;

    /**
     * Adds a child to this update.
     *
     * @param Update The child update.
     */
    public function addChild(self $child)
    {
        $child->setParent($this);

        $this->children[] = $child;
    }

    /**
     * Sets the parent update.
     *
     * @param Update The parent update.
     */
    public function setParent(self $parent = null)
    {
        $this->parent = $parent;
    }

    /**
     * Converts the update and its children to JSON.
     *
     * @param boolean $encode Automatically encode?
     *
     * @return string The JSON-encoded update.
     */
    public function toJson($encode = true)
    {
        $data = $this->getArrayCopy();

        if ($this->children) {
            $data['children'] = array();

            foreach ($this->children as $child) {
                $data['children'][] = $child->toJSON(false);
            }
        }

        if ($encode) {
            return json_encode($data);
        }

        return $data;
    }
} 
```

**构建.php**

```
<?php

require 'Update.php';

$updates = <<<UPDATES
[
    {
        "id": "12345",
        "name": "Ringo",
        "data": {
            "avatar": "",
            "text": "We All Live"
        }
    },
    {
        "id": "34567",
        "parent": "12345",
        "name": "John",
        "data": {
            "avatar": "",
            "text": "In a pink submarine?"
        }
    },
    {
        "id": "98765",
        "parent": "12345",
        "name": "Paul",
        "data": {
            "avatar": "",
            "text": "In a yellow submarine?"
        }
    }
]

UPDATES;

$original = json_decode($updates, true);
$parents = array();
$children = array();

foreach ($original as $update) {
    if (empty($update['parent'])) {
        $parents[$update['id']] = $parent = new Update($update); 

        if (isset($children[$update['id']])) {
            foreach ($children[$update['id']] as $child) {
                $parent->addChild($child);
            }

            unset($children[$update['id']]);
        }
    } else {
        $child = new Update($update);

        if (isset($parents[$update['parent']])) {
            $parents[$update['parent']]->addChild($child);
        } else {
            if (false === isset($children[$update['parent']])) {
                $children[$update['parent']] = array();
            }

            $children[$update['parent']][] = $child;
        }
    }
}

// Anything in children at this point are orphans

echo "Parents:\n";

foreach ($parents as $parent) {
    echo $parent->toJson();
}

echo "\n\nOrphans:\n";

foreach ($children as $parent => $orphans) {
    foreach ($orphans as $orphan) {
        echo $orphan->toJson();
    }
} 
```

# java - 如何从我的 EAR 文件中的类加载文本文件？

> ID：12219347
> 
> 赞同：3
> 
> 时间：2012-08-31T16:36:41.100
> 
> 标签：java, jsf, jakarta-ee, war, ear

我在 WebSphere 7 上运行的 Eclipse（实际上是 IBM RAD 7）中有一个 Java EE 5 项目。

工作区项目的布局如下：

```
webapp <-- produces a WAR file
webappEAR <-- produces the EAR file
webappEJB <-- holds the Service and DAO classes
webappJPA <-- holds the domain/entity classes
webappTests <-- holds the JUnit tests 
```

在我的一个服务类中（在 webappEJB 项目中），我需要加载一个文本文件作为资源。

我将文本文件放在文件夹中：

```
webappEAR/emailTemplates/myEmailTemplate.txt 
```

所以它出现在 EAR 文件中：

```
webappEAR.EAR
/emailTemplates/myEmailTemplate.txt 
```

在我的服务类中，这是我加载它的方式：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
InputStream input = classLoader.getResourceAsStream("emailTemplates/myEmailTemplate.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(input));
/* and so on */ 
```

问题`input`总是空的——它找不到资源。

我尝试了一个前导斜杠（`"/emailTemplates/myEmailTemplate.txt"`），但这也不起作用。

任何想法我做错了什么？或者更好的方法来做到这一点？

谢谢！

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:43:10.530

EAR 文件层次结构/内容不在您的类路径中；根据配置，打包在 EAR 文件中的 Jar 文件可能位于模块的类路径中。

因此，将资源打包到包含“服务类”的模块的类路径上的任何 JAR 文件中。

为资源创建一个新的 JAR 并不是不合理的，尤其是当您要独立更新它们时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:33:21.607

该代码似乎还可以，在 JBoss 中可以作为一种魅力。Thread 类的类加载器可能具有与 ear 文件不同的类路径。您是否尝试使用您正在编码的同一类来加载资源？尝试这样的事情：

```
ClassInsideEar.class.getResourceAsStream("/emailTemplates/myEmailTemplate.txt"); 
```

您也可以尝试将文件夹放在 war 或 jar (EJB) 中以缩小问题范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T06:56:44.627

我使用此代码从 ear 加载资源。路径是文件夹/文件。文件的位置是资源/文件夹/文件。

```
private InputStream loadContent(String path) {

    final String resourceName = path;
    final ClassLoader classLoader = getClass().getClassLoader();
    InputStream stream = null;
    try {
        stream = AccessController.doPrivileged(
                new PrivilegedExceptionAction<InputStream>() {
                    public InputStream run() throws IOException {
                        InputStream is = null;
                        URL url = classLoader.getResource(resourceName);
                        if (url != null) {
                            URLConnection connection = url.openConnection();
                            if (connection != null) {
                                connection.setUseCaches(false);
                                is = connection.getInputStream();
                            }
                        }
                        return is;
                    }
                });
    } catch (PrivilegedActionException e) {
        e.printStackTrace();
    }
    return stream;
} 
```

# .net - 如何对字典进行排序 > 使用 LINQ 操作？

> ID：12219350
> 
> 赞同：1
> 
> 时间：2012-08-31T16:36:57.483
> 
> 标签：.net, linq, sorting, dictionary

我认为这可以在单个 LINQ 中完成，但无法弄清楚。下面的表现还可以（大List上2秒）。主要是我想摆脱创建一个列表只是为了排序的内存问题。需要返回按第二个 int 然后第一个 int 排序的 dlWord21。

```
List<DocFTSinX> docFTSinXs = new List<DocFTSinX>();
foreach (KeyValuePair<int, Dictionary<int, byte>> kvpm in dlWord21)
{
    foreach (KeyValuePair<int, byte> kvps in kvpm.Value)
    {
        docFTSinXs.Add(new DocFTSinX(kvps.Key, kvpm.Key, kvps.Value));
        //                           Word1     Word2
    }
}
dlWord21.Clear();
return docFTSinXs.OrderBy(x => x.Word1).ThenBy(x => x.Word2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:58:27.887

你想使用[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534631)：

```
return dlWord21.SelectMany(o => o.Value, (x, y) => new DocFTSinX(y.Key, x.Key, y.Value))
               .OrderBy(x => x.Word1)
               .ThenBy(x => x.Word2); 
```

# php - 为什么@运算符不会在 CodeIgniter 中抑制 E_NOTICE？

> ID：12219351
> 
> 赞同：2
> 
> 时间：2012-08-31T16:37:00.457
> 
> 标签：php, codeigniter, error-handling, deserialization, codeigniter-2

我知道最好不要忽略错误，我保证。运行 XML-Sitemaps 生成器会在没有有效会话信息的情况下命中 URL，以取悦 CodeIgniter。结果是每个抓取的页面都有一个 E_NOTICE 和一个让我发疯的日志（和电子邮件通知）。没有任何东西损坏，也没有人或机器人受到伤害——只有我的理智受到影响。

几个人已经为 CodeIgniter unserialize() 失败设计了修复：

*   加密问题：[http ://codeigniter.com/forums/viewthread/91456/#758252](http://codeigniter.com/forums/viewthread/91456/#758252)
*   递归序列化问题：[codeigniter 中的奇怪会话行为](https://stackoverflow.com/questions/7103608/weird-session-behaviour-in-codeigniter)

我已经在每个前提下运行，仍然收到数百个以下通知：

```
NOTICE: unserialize() [<a href='function.unserialize'>function.unserialize</a>]: Error at offset 98 of 128 bytes 
```

这让我回到一个非常简单的问题。这是 CI 的 Session.php 有问题的第 724 行：

```
$data = @unserialize(strip_slashes($data)); 
```

我没有添加抑制性的“@”——它已经存在了。这是否意味着如果抛出它会专门抑制 E_NOTICE 消息？如果不是，那条线怎么可能产生所有这些让我想把头发都扯掉的通知？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:42:22.130

设置自定义错误处理程序绕过 PHP 的错误处理 - 显然是 PHP 的错误抑制：

> 重要的是要记住，对于由 error_types 指定的错误类型，标准的 PHP 错误处理程序完全被绕过，除非回调函数返回 FALSE。error_reporting() 设置将不起作用，并且无论如何都会调用您的错误处理程序 - 但是您仍然能够读取 error_reporting 的当前值并采取适当的行动。特别要注意的是，如果导致错误的语句由 @error-control 运算符添加，则该值将为 0。

```
<?php
set_error_handler(function ($errno, $errstr) {
    echo $errstr;
}, E_ALL);
@unserialize("foo"); // Still shows $errstr! 
```

这将接管 PHP，并且可能会忽略您的错误抑制设置。CodeIgniter 很有可能正在使用它自己的错误处理程序（我相信它有）并且不管错误抑制级别如何都会吐出错误。

但是，PHP 似乎暗示检查错误报告级别并查看它是否等于 0 会告诉您错误是否应该被抑制。因此，理论上，您可以编辑 CodeIgniter 错误处理程序并添加一个`if (error_reporting()) { /* show error */ }`.

# jquery-ui - jquery se 可调整大小的句柄分隔

> ID：12219354
> 
> 赞同：0
> 
> 时间：2012-08-31T16:37:09.037
> 
> 标签：jquery-ui

我想以类似于 FF 和 Chrome 中内置调整大小的方式在 IE 中调整文本区域的大小。因此，我使用 se 句柄将可调整大小的 jquery ui 应用于 textarea。扩展文本区域时一切都很好。但是当以某种方式减小文本区域的大小时，手柄会与文本区域的角分开。像这样：-

![在此处输入图像描述](../Images/6126cfcd8e6eb70973c108fb09bf095b.png)

我在想也许延迟和距离的某种组合可以解决这个问题。但是基本的演示似乎没有使用这些选项，它们的句柄也没有分开。所以我开始怀疑我是否在正确的路线上。到目前为止，我对选项的修补还没有成功。

任何想法都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:32:42.140

这可能不是正确的答案，但它有效，所以我现在很好。

通过将扩展限制在垂直平面上，我停止了这种行为。

```
$("document").ready(function() {

    if ($.browser.msie){
        $("textarea").resizable({
            handles: "se", maxWidth: 465, minWidth: 465, maxHeight: 350, minHeight: 22
        });
    }
}); 
```

显然，可以向演示中给出的任何方向扩展。再有一点时间，我可能会再次审查这个。

# database - 从 ms-access-2010 中的组合框中选择值时，如何使用特殊格式的自动编号自动填充文本框？

> ID：12219361
> 
> 赞同：0
> 
> 时间：2012-08-31T16:37:36.347
> 
> 标签：database, forms, ms-access-2010

我有一个包含一个组合框和一个文本框的表单。组合框从只有三个值（JED、RUH 和 DMM）的表中获取数据。我想要的是当用户在组合框中选择三个值中的任何一个时，文本框将自动填充特殊格式的自动编号。例如，如果用户选择 JED，则格式将为 j0000a（“j”：是静态的，它是 JED 的快照，“0000”：是按顺序增加的常规数字，“a”：是永远不会改变的字母除非 0000 达到它的极限女巫是 9999）。请注意，comboBox 中的每个值都有其特殊的自动编号格式，并且是唯一的。
我该怎么做 ？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:46:28.073

如果您将值存储在表中，则下拉列表的 afterupdate() 事件中的一些 VBA 代码会执行此操作。

我会在这里冒昧，因为我不知道你的确切结构。

```
Table_ABRV
ID | ABRV
1  | JED
2  | RUH
3  | DMM 
```

还有一张桌子。

```
Table_Auto
ID | CustomID | ABRVID
1  | j0000a   | 1 
```

使这项工作的代码是

```
Private Sub cmbABRV_AfterUpdate()
Dim seed, autoVal, autoRemainder, autoAlpha
'[ABRV][####][a]
seed = DCount("ID", "Table_Auto", "ABRVID = " & DLookup("ID", "Table_ABRV", "ABRV = '"  & cmbABRV.Text & "'"))
autoVal = Round(seed / 10000, 0) + 1 'this will be used for the alpha character
autoRemainder = seed Mod 10000 'this will be used for numeric value
autoRemainder = Format(autoRemainder, "000#") 'Add preceeding 0's
autoAlpha = ConvertToLetter(autoVal) 'convert the autoVal to Alpha
txtAuto.Value = Left(cmbABRV.Text, 1) & autoRemainder & autoAlpha 'Create string
End Sub

Function ConvertToLetter(Val) As String
'Convert a letter to a numeric equivalent
Dim iAlpha As Integer
Dim iRemainder As Integer
iAlpha = Int(Val / 27)
iRemainder = Val - (iAlpha * 26)
If iAlpha > 0 Then
  ConvertToLetter = Chr(iAlpha + 64)
End If
If iRemainder > 0 Then
  ConvertToLetter = ConvertToLetter & Chr(iRemainder + 64)
End If
End Function 
```

从下拉列表中选择一个值后，表单文本框将显示自动编号。

# php - PHP/MySQL 添加评论系统，查询发送两次？

> ID：12219369
> 
> 赞同：-1
> 
> 时间：2012-08-31T16:38:18.357
> 
> 标签：php, mysql, duplicates

我为我的评论系统编写了一个 addcomment.php 文件，因此我网站的用户可以向网站上的新闻帖子添加评论。

但是，当用户添加评论时，请求会发送两次，因此会将重复的评论添加到数据库中（2 而不是 1），对于为什么会发生这种情况有任何帮助吗？

这是我的脚本查询部分（如果需要完整的脚本，请告诉我）：

```
 $qry = "INSERT INTO comments(pid, username, body) VALUES('$pid', '$uname', '$body')";
            mysql_query($qry);
            $result = @mysql_query($qry);

if($result) {
    header("location: updates.php?postid=$pid");
    exit();
}else {
    die("There was an error adding your comment, please try again.");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:39:37.017

您要发送两次查询：

```
 mysql_query($qry);
        $result = @mysql_query($qry); 
```

您只需调用`mysql_query`一次。

（而且我相信很快就会有人指出你根本不应该打电话`mysql_query`，因为它已被弃用以支持`mysqli_*`或 PDO）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:41:22.757

消除`mysql_query($qry);`

```
$qry = "INSERT INTO comments(pid, username, body) VALUES('$pid', '$uname', '$body')";
        $result = @mysql_query($qry); 
```

您还需要[停止使用](http://www.deprecatedphp.com/mysql) `mysql_`函数。

# java - 可重入同步

> ID：12219376
> 
> 赞同：9
> 
> 时间：2012-08-31T16:38:41.693
> 
> 标签：java

您能告诉我以下调用是否可重入吗？

```
public class Foo {

  public synchronized void doSomething() {}

  public synchronized void doAnotherSomething() {}
}

public class Too {

  private Foo foo;

  public synchronized void doToo() {
    foo.doSomething();
    //...other thread interfere here....
    foo.doAnotherSomething();
  }

} 
```

方法`doToo()`可重入中的 2 次连续调用？我不确定这种情况，因为`foo.doSomething()`方法获取和释放内在锁，两次调用之间没有嵌套同步。是否存在其他线程可能会在 2 次调用之间干扰的情况？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-31T16:42:16.687

首先，关于Java中的可重入锁：

> Java 中的同步块是可重入的。这意味着，如果一个 Java 线程进入一个同步的代码块，从而在该块同步的监视器对象上获得锁，则该线程可以进入在同一个监视器对象上同步的其他 Java 代码块。

取自[这里](http://tutorials.jenkov.com/java-concurrency/locks.html#reentrance)。

除非另一个对象具有对私有的引用，否则您描述的两个连续调用 (in `doToo`) 不会受到干扰，因为要访问，需要锁定。但是，调用不会调用重入，因为每次调用都会获取和释放锁。如果被调用，它们将是可重入的，反之亦然。`Too``Foo``foo``Too``doSomething``doAnotherSomething`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T16:47:25.590

这完全取决于其他线程正在访问什么。另一个线程可以在这些函数之间接管 CPU 吗？是的。会有比赛条件吗？取决于许多因素。

根据您发布的内容，foo.doSomething 将被锁定在 foo 上，然后被释放，然后在进入 doAnotherSomething 时再次锁定。因此，如果另一个未锁定在同一个 Too 对象上的线程尝试操作 foo，他们将能够在 doSomething 和 doAnotherSomething 之间进行操作。如果每个人在操作底层 foo 对象之前都在同一个 Too 对象上同步，那么 foo 的这两个方法将不会在调用之间进行状态操作，因为 Too 对象方法将阻塞其他线程直到完成。因此，您是否有问题取决于您的其他访问者。

There is no reentrance here from what you posted, but java is ok with reentrant synchronization as Amir posted.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T16:46:05.513

首先，锁适用于对象，因此需要创建对象然后应用锁。

`are 2 continuous invocations in method doToo() reentrant? I`

在您的情况下，它们不是 re-entrant 。如果代码如下所示，那么它们将是可重入的。

```
 public class Foo {

 public synchronized void doSomething() {
        doAnotherSomething();
}

 public synchronized void doAnotherSomething() {}
} 
```

一旦在一个对象上获得了锁，那么在同一个对象上它就可以像上述情况一样遍历。

# jquery - 带有 -webkit-overflow-scrolling CSS 的粘性标题

> ID：12219382
> 
> 赞同：2
> 
> 时间：2012-08-31T16:38:59.387
> 
> 标签：jquery, webkit, scroll, css-position

使用修改后的 jQuery 插件，我们开发了一个粘性标题滚动框，以在本机应用程序中模仿 iOS 上的本机功能，并提供适用于所有计算机的跨浏览器解决方案。

这是小提琴：http: [//jsfiddle.net/f3y9s/1/](http://jsfiddle.net/f3y9s/1/)

一切正常，包括在 iOS 上。

更进一步，我想使用 -webkit-overflow-scrolling:touch 来实现 iOS 的原生平滑。

问题是这会导致标题在滚动完成后重新定位，而不是在滚动发生时重新定位。有没有什么办法解决这一问题。这是小提琴：http: [//jsfiddle.net/f3y9s/](http://jsfiddle.net/f3y9s/)

jQuery

```
$(document).ready(function($){
    $.fn.stickySectionHeaders = function(options) {
    var settings = $.extend({ stickyClass : 'sticky', headlineSelector: 'strong'}, options);

    return $(this).each(function() {
      var $this = $(this);
      $(this).find('ul:first').bind('scroll.sticky', function(e) {
        $(this).find('> li').each(function() {
          var $this      = $(this),
              top        = $this.position().top,
              height     = $this.outerHeight(),
              $head      = $this.find(settings.headlineSelector),
              headHeight = $head.outerHeight();

          if (top < 0) {
            $this.addClass(settings.stickyClass).css('paddingTop', headHeight);
            $head.css({
              'top'  : (height + top < headHeight) ? (headHeight - (top + height)) * -1 : '',
              'width': $this.outerWidth() - $head.cssSum('paddingLeft', 'paddingRight')
            });
          } else {
            $this.removeClass(settings.stickyClass).css('paddingTop', '');
          }
        });
      });
    });
  };
  $.fn.cssSum = function() {
    var $self = $(this), sum = 0;
    $(arguments).each(function(i, e) {
      sum += parseInt($self.css(e) || 0, 10);
    });
    return sum;
  };
});

$(function(){
    $('.list').stickySectionHeaders();
}); 
```

# git - 使用默认设置 (*:refs/heads/*) 的 Git 扩展推送会弄乱所有分支

> ID：12219384
> 
> 赞同：0
> 
> 时间：2012-08-31T16:39:12.687
> 
> 标签：git, git-branch, git-push, git-extensions, git-gc

## 问题

这听起来像是一个 GitExtensions 错误，[我找不到特定的信息](https://github.com/gitextensions/gitextensions/issues/search?q=push)。我相信当您拥有一个包含 1 个以上分支的裸存储库时，就会出现问题。如果你再推，你会得到一个警告，如果你选择忽略你会发现混乱的分支。或者取决于你如何推动它，甚至没有出现警告，而且到处都是厄运！

假设我们有 2 个名为`master`and的本地分支`another`。并且默认`origin`设置为推送。在定期推送之后，我们还会找到`origin/master`and `origin/another`，仅此而已。

但是在注定的推动之后，我们会发现重复`origin/master`和加`origin/another`号`origin/refs/heads/master`，这也是重复的。对于每一个额外的分支。这[不像我们要推送所有分支](https://stackoverflow.com/questions/10537095/push-all-local-git-branches-best-practice)或其他东西，也不是我们使用[Multiple Branches 功能](https://github.com/gitextensions/gitextensions/pull/320)。

事实上，发生这种情况后，我们甚至不能简单地`push`没有错误！（是的，当然使用 Windows）

> ```
> Pushing to \\\server\git\repo
> error: dst refspec refs/heads/another matches more than one.
> error: failed to push some refs to '\\\server\git\repo' 
> ```

当列出带有`git branch -r`.

## 要解决这个问题

我们需要做这样的事情：

1.  手动删除. *_* 有时它只[使用](https://stackoverflow.com/a/2003515/274502)，其他时候我们需要更健壮并直接进入文件夹。这是困难的一步，**主要问题**发生在那些不起作用时......**`refs/heads`** *`origin` `git push origin :<branchName>`*
****   [`git fetch -p`](https://stackoverflow.com/a/8255687/274502)，用于将原点更改带到本地。*   最终通过所有客户端并使用`git remote update`. 如果需要，可以一个一个或通过任何方式删除相同的分支，例如再次健壮地直接进入文件夹。这个步骤中还有另一个问题，有时我还无法诊断。***

 ***## 频率

对我们来说，这是一个既定事实。尽管我没有做很多实验来看看究竟是什么原因造成的，但它确实发生在使用这个 repo 的 5 台机器中的任何一台上，除了`bare`.

每次发生这种情况时，我都必须运行并找出如何解决它。这次我决定把它记录下来，因为我在网上找不到足够具体的东西。

## 为什么

这里的问题是：**为什么会发生这种情况，以及如何预防？**它甚至[只是 GitExtensions 错误](https://github.com/gitextensions/gitextensions/issues/1209)吗？在我们这边，这肯定会发生，只有在 GitExtensions 中这个特定的场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:47:41.037

在与另一个更简单的*代表*打交道时，意外（也是巧合最后）发现了罪魁祸首！

下面`.git/config`我们有这两条线`[remote "origin"]`：

```
push = refs/heads/*:refs/heads/*
push = refs/tags/*:refs/tags/* 
```

只需**将此添加到顶部**，即可解决所有问题：

```
push = *:* # hack for git extensions 
```

最初使用 2 行的原因是“将所有内容推送到服务器”，包括标签和头部。

我相信，不知何故，GitExtensions 会以错误的方式读取这些内容并更改其自己的默认行为（为什么它会恰好位于第一个设置的右侧？），因此在每次推送时都有效地执行此操作：

```
> git push origin *:refs/heads/* 
```

男孩，我要告诉你，收拾烂摊子可不是一件简单的事！

解决了。***

# python - 在 IPython 中使用交互式 Shell 之外的魔法命令

> ID：12219387
> 
> 赞同：6
> 
> 时间：2012-08-31T16:39:27.293
> 
> 标签：python, ipython, ipython-magic

有没有办法从外部文件中使用来自 IPython 的“魔术命令”？例如，如果我有一个文件，“rcode.py”的代码：

```
%load_ext rmagic
%R a=c(1,2,3);b=c(2,3,4);print(summary(lm(a~b))) 
```

当我在命令行中`SyntaxError`运行它时，这给了我第一行。`ipython rcode.py`但是，当我使用 ipython 将这些行直接输入交互式 shell 时，它运行良好。这是因为你只在交互式 shell 中做魔法吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T16:56:47.447

如果您使用`.ipy`扩展名命名文件，ipython 将正确解析它。如果需要，您可以简单地创建一个符号链接：

```
$ ln -s rcode.py rcode.ipy
$ ipython rcode.ipy 
```

# .net - 使用 .NET 4.0 在 Windows XP 上更新 GitExtensions 时出现错误“...4.0 必须安装...”

> ID：12219391
> 
> 赞同：2
> 
> 时间：2012-08-31T16:39:42.613
> 
> 标签：.net, windows, git, windows-xp, git-extensions

我正在尝试更新和/或安装 GitExtensions240SetupComplete.msi，但出现错误

```
.NET Framework 4.0 must be installed prior to installation of Git Extensions 
```

我碰巧有所有更新，我最近的 .NET 是 v4.0.30319。我可以毫无问题地安装 GitExtensions233SetupComplete.msi，因此可以坚持使用此版本。我只是想确保我无法获取最新版本以及是否值得更新。

# sql-server - Sql Server 的 ISNULL() 函数是否延迟/短路？

> ID：12219397
> 
> 赞同：8
> 
> 时间：2012-08-31T16:40:10.503
> 
> 标签：sql-server, lazy-evaluation, short-circuiting, isnull

TI`ISNULL()`是惰性函数吗？

也就是说，如果我编写如下代码：

`SELECT ISNULL(MYFIELD, getMyFunction()) FROM MYTABLE`

它会始终评估`getMyFunction()`还是仅在`MYFIELD`实际为空的情况下评估它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:07:59.887

这工作正常

```
declare @X int
set @X = 1
select isnull(@X, 1/0) 
```

但是引入聚合会使其失败，并证明有时可以在第一个参数之前评估第二个参数。

```
declare @X int
set @X = 1
select isnull(@X, min(1/0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T16:46:53.570

从不同的行为来看

```
SELECT ISNULL(1, 1/0)

SELECT ISNULL(NULL, 1/0) 
```

第一个 SELECT 返回 1，第二个引发`Msg 8134, Level 16, State 1, Line 4 Divide by zero error encountered.`错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T17:05:45.037

您所指的这种“惰性”功能实际上称为“短路”
并且它并不总是有效，特别是如果您在 ISNULL 表达式中有一个 udf 。
查看这篇测试来证明它的文章：
[短路（主要在 VB.Net 和 SQL Server 中）](http://www.emoreau.com/Entries/Articles/2008/04/Short-circuiting-mainly-in-VBNet-and-SQL-Server.aspx)

T-SQL 是一种声明性语言，因此它无法控制用于获取结果的算法。它只是声明它需要什么结果。由查询引擎/优化器来确定具有成本效益的计划。在 SQL Server 中，优化器使用“矛盾检测”，它永远不会保证从左到右的评估，就像您在过程语言中假设的那样。

* * *

对于您的示例，进行了快速测试：
创建了标量值 UDF 以调用除以零错误：

```
CREATE FUNCTION getMyFunction
( @MyValue INT )
RETURNS INT
AS
BEGIN
    RETURN (1/0)
END
GO 
```

运行以下查询并没有给我一个`Divide by zero error encountered`错误。

```
DECLARE @test INT
SET @test = 1
SET @test = ISNULL(@test, (dbo.getMyFunction(1)))
SELECT @test 
```

更改`SET`为以下语句确实给了我`Divide by zero error encountered.`错误。（引入了`SELECT`一个`ISNULL`）

```
SET @test = ISNULL(@test, (SELECT dbo.getMyFunction(1))) 
```

但是使用值而不是变量，它从来没有给我错误。

```
SELECT ISNULL(1, (dbo.getMyFunction(1)))
SELECT ISNULL(1, (SELECT dbo.getMyFunction(1))) 
```

因此，除非您真正弄清楚优化器如何针对所有排列评估这些表达式，否则不依赖 T-SQL 的短路功能是安全的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T17:06:53.507

这是它认为最有效的方法。

现在它在功能上是惰性的，这很重要。例如，如果`col1`是一个，当它为空时，`varchar`它总是包含一个数字，那么`col2`

```
isnull(col2, cast(col1 as int)) 
```

将工作。

但是，没有指定它是否会在 null-check 之前或同时尝试强制转换，如果`col2`不为 null 则吃掉错误，或者如果为 null 则只尝试`col2`强制转换。

至少，我们希望它`col1`在任何情况下都能获得，因为获得 2 个值的表的单次扫描将比每次获得一个值的两次扫描要快。

相同的 SQL 命令可以以非常不同的方式执行，因为我们给出的指令会根据对表的索引和统计信息的知识转换为较低级别的操作。

出于这个原因，就性能而言，答案是“当它看起来是一个好主意时，它是一个好主意，否则它不是”。

就观察到的行为而言，它是懒惰的。

编辑：Mikael Eriksson 的回答表明，由于不懒惰，有些情况可能确实会出错。就性能影响而言，我将在这里坚持我的答案，但至少在某些情况下，他的正确性影响至关重要。

# iphone - 将参数传递给块？

> ID：12219403
> 
> 赞同：1
> 
> 时间：2012-08-31T16:40:47.793
> 
> 标签：iphone, objective-c, ios, cocoa-touch, objective-c-blocks

我有一个用于解析 XML 然后缓存它的单例。解析/缓存是用一个块完成的。有什么方法可以让我从另一个类将参数传递给这个块，以便我可以从单例外部更改 URL？

这是我现在拥有的代码：

```
// The singleton
+ (FeedStore *)sharedStore
{
    static FeedStore *feedStore = nil;
    if(!feedStore)
        feedStore = [[FeedStore alloc] init];

    return feedStore;
}

- (RSSChannel *)fetchRSSFeedWithCompletion:(void (^)(RSSChannel *obj, NSError *err))block
{
    NSURL *url = [NSURL URLWithString:@"http://www.test.com/test.xml"];

    ...

    return cachedChannel;
} 
```

这是我需要修改 NSURL 的类：

```
- (void)fetchEntries
{
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    // Initiate the request...

    channel = [[BNRFeedStore sharedStore] fetchRSSFeedWithCompletion:
           ^(RSSChannel *obj, NSError *err) {
        ...
    }
} 
```

如何从`fetchEntries`to传递参数`fetchRSSFeedWithCompletion`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:58:06.827

您可能想在方法中添加一个参数，而不是在块中。

此外，当使用完成块时，确实没有理由在方法中返回任何内容。

我会把它改成这样：

```
-(void)fetchRSSFeed:(NSURL *)rssURL completion:(void (^)(RSSChannel *obj, NSError *error))block{
    RSSChannel *cachedChannel = nil;
    NSError *error = nil;

    // Do the xml work that either gets you a RSSChannel or an error

    // run the completion block at the end rather than returning anything
    completion(cachedChannel, error);
} 
```

# c# - 如何编写一个 Linq 表达式以在一组实体上调用 OrderBy？

> ID：12219404
> 
> 赞同：3
> 
> 时间：2012-08-31T16:40:52.780
> 
> 标签：c#, linq, linq-to-objects

有人可以解释构建一个表达式的语法，它将 OrderBy 实体上的用户指定属性吗？

这篇 MSDN 文章大有帮助，但它处理的是一个简单的字符串列表，我的数据集包含我自己的自定义对象。

[http://msdn.microsoft.com/en-us/library/bb882637.aspx](http://msdn.microsoft.com/en-us/library/bb882637.aspx)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T16:40:52.780

先写代码，后解释。

```
IQueryable<T> data = this.Database.ObjectsOfType<T>();

var eachItem = Expression.Parameter(typeof(T), "item");
var propertyToOrderByExpression = Expression.Property(eachItem, propertyName);

var runMe = Expression.Call(
    typeof(Queryable),
    "OrderBy",
    new Type[] { data.ElementType, typeof(IComparable) },
    data.Expression,
    Expression.Lambda<Func<T,IComparable>>(propertyToOrderByExpression, new ParameterExpression[] { eachItem })); 
```

因此，首先我们将数据保存为 Queryable 对象。这有一种“根”表达式属性，我们需要它。

eachItem 事物是一个表达式，它表示 Lambda 中的参数占位符，如果您愿意，可以使用 go to 中的符号。

然后我们创建一个表达式，对用户在 propertyName 中指定的属性名称执行读取操作。

我们最终构建了一个表达式，它调用 Queryable 数据的 OrderBy 方法。我们说（按论证顺序）：

```
Expression.Call(
 [what's the type on which we want to call a method?],
 [what's the name of the method we're calling?],
 [if this method is generic, what are the types it deals with?],
 {
  [expression representing the data],
  [expression for the lambda using the reader exp + each item exp]
 }) 
```

最后两个在 { } 中，因为它实际上是一个参数数组。我使用 IComparable 是因为该属性可以是任何类型，但显然需要可比较才能订购。

卢克

# java - 仅当作为 jar 运行时才加载捆绑在 jar 中的文件

> ID：12219407
> 
> 赞同：0
> 
> 时间：2012-08-31T16:41:21.103
> 
> 标签：java, configuration-files

我有一个属性文件，已包含在我将分发的 jar 中。在我决定将文件包含在 jar 中之前，我正在加载它

```
properties.load(new FileInputStream(configFileName)); 
```

但是，一旦将文件放入 jar 中，这就会停止工作，所以我将代码更改为

```
properties.load(MyClass.class.getResourceAsStream(configFileName)); 
```

唯一的问题是我有使用我的属性的单元测试（它们是静态加载的，所以我不能模拟它）。单元测试在制作 jar 之前运行，因此它们现在都失败了。只有当程序作为 jar 运行时，是否有一种优雅的方法来处理将在 jar 中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:59:58.970

一种方法是调用`getResourceAsStream()`，如果它返回 null，则调用`new FileInputStream()`。

但更好的问题是：为什么运行单元测试时类路径中没有属性？如果您使用的是像 Maven 这样的构建工具，那么这应该是自动的。这会让你更好地理解你实际上是在构建你认为的自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:07:12.953

如果您乐于将属性文件与源代码一起使用，请尝试：

```
properties.load(getClass().getResourceAsStream("my.properties")); 
```

在这种情况下，该`my.properties`文件必须与该文件位于同一包中`.java`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:44:38.997

问题可能是你的类加载器看不到这个文件..

我会用这个

```
Classloader cl = getClass().getClassloader();
properties.load(cl.getResourceAsStream(configFileName)) 
```

如果此应用程序是 Web 应用程序，请注意您的类加载。在这种情况下，您将有许多类加载器。您的资源必须对这个类加载器可见。在像 tomcat 这样的 servlet 容器中，它们以这种方式工作

```
 Bootstrap
      |
   System
      |
   Common
    /     \
Webapp1   Webapp2 ... 
```

你可以在这里阅读更多 [http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)

# java - 如何在 IDEA 的设置中修改整个默认的“try-catch”模板？

> ID：12219410
> 
> 赞同：22
> 
> 时间：2012-08-31T16:41:23.887
> 
> 标签：java, templates, intellij-idea

我在 IDEA 的设置中找不到“try-catch”模板的位置？

我想修改**整个**模板，而不仅仅是`Catch Statement Body`模板中的内容。

例如，将对异常的引用从 重命名`e`为`ex`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T17:59:58.130

在我的 IntelliJ 11.1.3 中，我在`File Templates`. 转到`Code`选项卡，然后您拥有`Catch Statement Body`.

如果它不存在，那么您的 EAP 有问题（我还没有测试过）。

![在此处输入图像描述](../Images/a0188a9b3ae25e41fbf6823064c50a47.png)

* * *

**编辑**

我猜 IntelliJ 没有附带用于 try/catch 的实时模板。[这里](http://arhipov.blogspot.se/2011/07/whats-cool-in-intellijidea-part-ii-live.html)描述了如何做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-22T11:59:37.327

对于更高版本的 try/catch 模板可以自定义

```
File -> Other Settings -> Default Settings -> Editor -> File and Code Template -> Code -> Catch Statement Body 
```

执行此操作后，这将在`File -> Settings`您的项目设置上启用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:44:12.467

默认情况下，try-catch 在“环绕”实时模板中（如果我们可以这样称呼它的话），在选择时使用`Ctrl`+ `Alt`+访问`T`。但是，为此目的创建您自己的正常实时模板并不是一门火箭科学。

# javascript - ExtJS 4.1 - 检索嵌套 JSON 的 hasOne 信息

> ID：12219415
> 
> 赞同：1
> 
> 时间：2012-08-31T16:41:47.787
> 
> 标签：javascript, extjs4.1

我正在尝试检索模型和包含 hasOne 关联的关联模型的信息。我引用了以下 Sencha 文档页面（[http://docs.sencha.com/ext-js/4-1/#!/guide/data](http://docs.sencha.com/ext-js/4-1/#!/guide/data)）。我目前有以下示例代码工作：

```
var Mtd = Ext.ModelMgr.getModel('Mtd');
 Mtd.load(4, {
     success: function(mtd){
         console.log("Loaded! " + mtd.get('id'));
         mtd.getTreatmentdesign(function(treatment,operation){
             console.log(treatment.get('id'));
         }, this);
     }
 }); 
```

现在，当我调用 mtd.getTreatmentdesign() 时，我注意到发出了两个请求来检索信息。第一个是检索我期望的 Mtd 信息，但随后它也请求检索 Treatmentdesign 信息。Mtd 的响应包含 Mtd 信息以及 Treatmentdesign 信息。所以我想通过一个请求来处理 Mtd 和 Treatmentdesign 信息。令我感到困惑的是，文档中说明了以下内容：

> 您可能想知道为什么我们将成功函数传递给 User.load 调用，但在访问用户的帖子和评论时不必这样做。这是因为上面的示例假设当我们发出获取用户的请求时，服务器会返回用户数据以及所有嵌套的帖子和评论。通过像我们上面所做的那样设置关联，框架可以在单个请求中自动解析出嵌套数据。

那么如何在不发出另一个请求的情况下检索相关信息呢？我只是想使用单个请求中的所有 json，而不是必须发出多个请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:51:31.753

请务必将关联上的[associationKey](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.association.HasOne-cfg-associationKey)配置设置`HasOne`为包含关联模型数据的属性。默认情况下，这是所有小写字母的关联模型类的名称。

例如，如果`Mtd`记录的数据由服务器以表单形式返回

```
{
    ...
    treatmentDesign: {
       ...
    }
} 
```

设置`associationKey`为`'treatmentDesign'`。

这是一个实际示例：http: [//jsfiddle.net/HP6fq/3/](http://jsfiddle.net/HP6fq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:43:43.917

是的，associationKey 有效

```
Ext.define('User', {
    extend:'Ext.data.Model',
    fields: ['id', 'name', 'status'],
    associations: [{ type: 'hasOne', model: 'Status', associationKey: 'status'  }]
});

Ext.define('Status', {
    extend:'Ext.data.Model',
    fields: ['id', 'title'],
}); 
```

[演示在这里](http://ext4all.com/post/extjs-4-1-read-complex-json-with-hasone-association)

# android-activity - Android：两个任务 - 两个启动器图标

> ID：12219418
> 
> 赞同：0
> 
> 时间：2012-08-31T16:41:58.913
> 
> 标签：android-activity, icons, launcher

我有一个活动 A（我希望在后台工作），它用代码启动活动 B

```
moveTaskToBack(false);
Intent intent = new Intent(context.getActivity(), BActivity.class); 
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK );  
startActivity(intent); 
```

在清单中我有

```
<activity android:name="ru.nekit.BActivity"                 
 android:label="B"              
 android:taskAffinity="ru.nekit"/> 
```

当开始活动 B 并按主页按钮时，我看到有两个启动器图标 问题我怎么能做到这一点，只有一个启动图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:50:10.020

根据清单文件和 XML 属性，您的应用可能在启动器中找到多个活动：

```
<intent-filter>
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

对于您列出的每个包含此属性的活动，您将在启动器中找到该活动的另一个图标。确保您只为要在启动器中显示的活动设置了此属性。

如果您在开发过程中最终更改了应用程序名称，您可能还安装了多个版本的应用程序。请务必卸载所有以前的版本。

# linq - LinqToExcel - 需要从特定行开始

> ID：12219419
> 
> 赞同：7
> 
> 时间：2012-08-31T16:41:59.540
> 
> 标签：linq, linq-to-excel

我正在使用[LinqToExcel 库](http://code.google.com/p/linqtoexcel/wiki/UsingLinqToExcel)。到目前为止工作得很好，除了我需要在特定行*开始查询。*这是因为客户端的 excel 电子表格在数据实际开始之前在 excel 文件的顶部使用了一些图像和“标题”信息。

数据本身很容易阅读并且相当通用，我只需要知道如何告诉从`ExcelQueryFactory`特定行开始。

我知道该`WorksheetRange<Company>("B3", "G10")`选项，但我不想指定结束行，只是从哪里*开始*读取文件。

使用最新版本的 LinqToExcel 和 C#

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T17:01:16.150

我想你已经解决了这个问题，但也许对其他人来说 - 看起来你可以使用

```
var excel = new ExcelQueryFactory(path);
var allRows = excel.WorksheetNoHeader();

//start from 3rd row (zero-based indexing), length = allRows.Count() or computed range of rows you want
for (int i = 2; i < length; i++)
{
    RowNoHeader row = allRows.ElementAtOrDefault(i);
    //process the row - access columns as you want - also zero-based indexing
} 
```

不是指定一些 Range("B3", ...) 这么简单，还要指定方式。希望这至少对某人有所帮助；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T01:28:54.420

我刚刚尝试了这段代码，它似乎工作得很好：

```
var book = new LinqToExcel.ExcelQueryFactory(@"E:\Temporary\Book1.xlsx");

var query =
    from row in book.WorksheetRange("A4", "B16384")
    select new
    {
        Name = row["Name"].Cast<string>(),
        Age = row["Age"].Cast<int>(),
    }; 
```

我只取回了带有数据的行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-19T10:45:10.953

我试过这个，适用于我的场景。

```
//get the sheets info
        var faceWrksheet = excel.Worksheet(facemechSheetName);
      // get the total rows count.
        int _faceMechRows = faceWrksheet.Count();

      // append with End Range.
  var faceMechResult = excel.WorksheetRange<ExcelFaceMech>("A5", "AS" + _faceMechRows.ToString(), SheetName).
                        Where(i => i.WorkOrder != null).Select(x => x).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:22:19.887

你有没有尝试过`WorksheetRange<Company>("B3", "G")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T14:10:17.387

不幸的是，目前在 LinqToExcel 框架的迭代中，似乎没有任何方法可以做到这一点。

为了解决这个问题，我们要求客户将数据上传到 Excel 文档中自己的“表格”中。第一行的标题行及其下的数据。如果他们想要任何“元数据”，他们需要将其包含在另一张表中。以下是[LinqToExcel 文档](http://code.google.com/p/linqtoexcel/wiki/UsingLinqToExcel)中有关如何查询特定工作表的示例。

```
var excel = new ExcelQueryFactory("excelFileName");
var oldCompanies = from c in repo.Worksheet<Company>("US Companies") //worksheet name = 'US Companies'
                   where c.LaunchDate < new DateTime(1900, 0, 0)
                   select c; 
```

# linux - Linux 的 OOM 杀手中的默认 oom_adj 值

> ID：12219423
> 
> 赞同：4
> 
> 时间：2012-08-31T16:42:09.183
> 
> 标签：linux, out-of-memory

我试图了解 oom_adj 用于 Linux 系统（准确地说是 Fedora 15/16）进程的默认值。我看到的是一堆进程设置为-17，即不杀，而其他进程有不同的值（通常为0，有时为-13）。有点违反直觉，看起来用户进程使用 -17 比系统进程多。任何人都可以阐明这一点吗？我在某处缺少配置文件吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T03:59:46.500

除非您特别设置它，否则它将默认为其派生出的进程的值。某些进程，例如[openssh](http://hg.mindrot.org/openssh/file/4b2f6ea7f2b1/openbsd-compat/port-linux.c)，会显式更改其可执行文件中的值。openssh 的理由是，当您处于内存不足的情况时，您希望能够通过 ssh 进入计算机并杀死一些进程。对于其他可执行文件设置不同值的原因，您必须询问他们的个人开发人员。

因为进程从它们的父进程继承了 oom 设置，所以如果你从 ssh 会话启动某些东西，它将默认为 -17。这就是为什么某些流程可能看起来非常重要的原因。但是，请记住，计算机的存在是为了为其用户运行进程。如果我正在写一篇重要的论文并且内存开始变少，那么那台机器上最重要的进程就是运行我的文字处理器的那个。oom 设置存在的全部原因是能够将这种重要性传达给操作系统。

# java - 当前的 HotSpot JVM 是否默认并行运行？

> ID：12219424
> 
> 赞同：1
> 
> 时间：2012-08-31T16:42:14.267
> 
> 标签：java, jvm, openjdk, jvm-hotspot

我正在使用这个 Java 版本：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (suse-9.1-x86_64)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

当我启动一个java程序时，例如

```
java TestApp 
```

默认情况下，JVM 会并行运行吗？

如果是这样，哪些部分并行运行？

我对此很感兴趣，因为我发现如果我使用`taskset -c 0 java TestApp`绑定`TestApp`运行在 上`processor 0`，第一次运行时间比`java TestApp`. 这是否意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:32:47.070

有许多单线程任务都有自己的线程。

*   运行你程序的主线程
*   本机编译器的后台字节码
*   终结器线程（在对象上调用 finalize()）
*   GC线程池

您的代码将只使用您创建的线程数（加上为您创建的“main”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:45:51.670

JVM 有本机线程，没有全局锁，如果这就是你要问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:48:24.233

第一次运行时间可能主要是将字节码 JITing 为机器码。我强烈怀疑该过程针对并行场景进行了优化。

# xml - 将通过 AJAX 获取的 PDF 文件写入浏览器窗口

> ID：12219426
> 
> 赞同：0
> 
> 时间：2012-08-31T16:42:16.973
> 
> 标签：xml, pdf, post, httprequest

我正在编写一个轻量级的基于 JS 的客户端 UI，它通过 REST API 在服务器上生成 PDF 文档。用户填写表单，客户端将内容编译成 XML 字符串，然后通过 AJAX 将整个内容发布到服务器，并返回 PDF。问题是如何将 PDF 提供给用户（内联、下载等）？

我不能使用表单（我认为），因为 API 不采用键值对，而是需要 XML 帖子。

用 JS 打开一个新窗口似乎不起作用，因为在我编写 PDF 字符串之前已发送标题。

我已经看到了这个： http: [//mozilla.github.com/pdf.js/](http://mozilla.github.com/pdf.js/)但这似乎有点过头了——我想要的只是用户可以访问 pdf。

有人有想法么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T14:56:49.870

您可以使用[pdfObject](http://pdfobject.com/)，它是一个不错的 javascript 库，用于将 PDF 动态嵌入 HTML 文档。

# c - 是否可以在 C 中声明一个变量，其名称由用户在运行时给出？

> ID：12219433
> 
> 赞同：8
> 
> 时间：2012-08-31T16:42:52.490
> 
> 标签：c, variables

是否可以在 C 中声明一个变量，其名称由用户在运行时给出？如果是，那么如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T16:44:04.797

不，这是不可能的：变量名在编译步骤中不存在，成为“烘焙”到已编译二进制代码中的地址和偏移量。

`-D`但是，可以通过使用C 编译器的一个或类似选项来声明一个变量，其名称由开发人员在编译时给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:34:56.800

由于 dasblinkenlight 已正确回答，否。

您可以做并且可能实现您的实现目标的是在运行时创建和维护您自己的字符串字典和相关值。

# powershell - 来自 XML 的字符串比较失败

> ID：12219434
> 
> 赞同：1
> 
> 时间：2012-08-31T16:43:00.613
> 
> 标签：powershell, powershell-2.0

我目前正在 PowerShell 中开发一个项目。该项目下载 NVD 数据库 XML，通过单独的 CSV 循环获取来自 Nexpose 的扫描结果，并为每个用 CVE 编号标识的漏洞提取 CVSS 分数。

似乎将工作表中的 CVE 编号（字符串）与 XML 中的 CVE 编号（也是一个字符串）匹配完全失败了。我正在使用的代码如下：

```
clear
[xml]$nvdxml = (New-Object system.Net.WebClient).DownloadString("http://static.nvd.nist.gov/feeds/xml/cve/nvdcve-2.0-recent.xml")
$nsmgr = New-Object System.XML.XmlNamespaceManager($nvdxml.NameTable)        
$nsmgr.AddNamespace('xsi','http://www.w3.org/2001/XMLSchema-instance')
$nsmgr.AddNamespace('vuln','http://scap.nist.gov/schema/vulnerability/0.4')
$nsmgr.AddNamespace('cvss','http://static.nvd.nist.gov/feeds/xml/cve/nvdcve-2.0-recent.xml')
$nsmgr.AddNamespace('df','http://scap.nist.gov/schema/feed/vulnerability/2.0')
$nvdxml.SelectNodes('//vuln:product',$nsmgr) | out-null 
$nvdxml.SelectNodes('//vuln:vulnerable-configuration',$nsmgr) | out-null
$nvdxml.SelectNodes('//vuln:vulnerable-software-list',$nsmgr) | out-null
$nvdxml.SelectNodes('//default:nvd',$nsmgr) | out-null
$nvdxml.SelectNodes('//default:entry',$nsmgr) | out-null
$x = import-csv "test-report.csv" 
$items = @()

$x | where {$_."Vulnerability Test Result Code" -like "v*"} | %{
    $item = @{}
    $vid = $_."Vulnerability CVE IDs"
    $entry = ""
    $item["Vname"] = $_."Vulnerability Title"
    $item["VNode"] = $_."Asset IP Address"
    $item['VID'] = $vid
    $entry = $nvdxml.nvd.entry | where { $_."cve-id" -eq $vid } 
    $item['Score'] = $entry.cvss.base_metrics.score 
    $items += $item
    }
    $items 
```

$items 数组包含一个具有 CVE ID 的漏洞，但字符串比较完全失败。当我查询对象的类型时，我得到

```
You cannot call a method on a null-valued expression.
At line:25 char:19
+     $entry.GetType <<<< ()
    + CategoryInfo          : InvalidOperation: (GetType:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

当我将 CVE ID 分配给字符串并尝试从 XML 中获取该字符串的相关漏洞时，比较没有返回结果；然而，当我用相同 ID 的引号字符串替换变量时，查询返回正确的结果。所以，这会失败

```
$cveID = "CVE-2003-1567"
$nvdxml.nvd.entry | where { $_."cve-id" -eq $cveID } 
```

但是，这很好用

```
$nvdxml.nvd.entry | where { $_."cve-id" -eq "CVE-2003-1567" } 
```

有任何想法吗？我尝试将 $_."cve-id" 和 $cveID 显式转换为 String ，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:50:00.470

我会将所有条目放在哈希表中，然后通过 CVE ID 查找：

```
$entriesByID = @{ }
$nvdxml.nvd.entry | 
    ForEach-Object { $entriesByID[$_.id] = $_ } 
```

请注意，`cve-id`我没有使用元素，而是使用元素`id`上的属性`event`。

然后，您可以查看哈希表中的每个条目：

```
$entry = $entriesByID[$vid] 
```

如果您采用原来的方法，您可能会遇到命名空间问题。我会尝试使用`SelectNodes`而不是 PowerShell 的虚拟 XML 对象属性：

```
$entry = $nvdxml.SelectSingleNode('/nvd/entry[vuln:cve-id = "$vid"]')
# or
$entry = $nvdxml.SelectSingleNode('/nvd/entry[@id = "$vid"]') 
```

# ruby-on-rails - 通过路由将参数传递给控制器 动作

> ID：12219436
> 
> 赞同：11
> 
> 时间：2012-08-31T16:43:07.020
> 
> 标签：ruby-on-rails, routes

> **可能重复：**
> [Rails：如何将自定义参数传递给控制器​​方法？](https://stackoverflow.com/questions/12150254/rails-how-do-i-pass-custom-params-to-a-controller-method)

我想知道是否可以通过路由将参数传递给控制器​​动作。我有一个通用的操作方法，我想为各种路线调用它。不，我不能在我的路线中使用通配符。

```
match '/about' => 'pages#show'
match '/terms' => 'pages#show'
match '/privacy' => 'pages#show' 
```

我正在寻找类似的东西：

```
match '/about' => 'pages#show', :path => "about"
match '/terms' => 'pages#show', :path => "terms"
match '/privacy' => 'pages#show', :path => "privacy" 
```

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T17:05:56.533

尝试

```
match '/about' => 'pages#show', :defaults => { :id => 'about' }
match '/terms' => 'pages#show', :defaults => { :id => 'terms' }
match '/privacy' => 'pages#show', :defaults => { :id => 'privacy' } 
```

*如果*由于某种原因你不能遵循标准约定

```
match '/:id' => 'pages#show' 
```

# c# - 如何遍历所有文本框并使它们从动作字典中运行相应的动作？

> ID：12219437
> 
> 赞同：0
> 
> 时间：2012-08-31T16:43:22.767
> 
> 标签：c#, winforms, textbox, iteration

我有大约 60 个文本框，当每个文本框都有自己的代码部分时，它会变得一团糟。对于某些事件，动作是相同的，而对于其他事件，可以有一个带有动作的字典。问题是我不知道如何遍历文本框、获取当前文本框引用并运行一些方法来更改当前文本框的文本。

**UPD：**我要做的是让所有文本框运行`AllTextboxesEnter`方法，该方法将根据文本框的名称更改其文本，运行`AllTextboxesLeave`方法将根据文本框的名称从动作字典中执行一些操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:45:41.877

您可以尝试使用此代码

```
foreach( var control in this.Controls.OfType<TextBox>() )
{
   control.Text = "";

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T16:45:33.013

你的问题还很不清楚，但我怀疑你想要这样的东西：

```
foreach (var textBox in Controls.OfType<TextBox>())
{
    textBox.Text = /* insert action here */
} 
```

目前尚不清楚动作字典的来源......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T16:59:30.170

假设我正确理解了这个问题，这是我对问题解释的回答

```
private void Form1_Load(object sender, EventArgs e)
{
    foreach (TextBox tb in this.Controls.OfType<TextBox>())
    {
        tb.Enter += new EventHandler(textBoxAll_Enter);
        tb.Leave += new EventHandler(textBoxAll_Leave);
    }
}

private void textBoxAll_Enter(object sender, EventArgs e)
{
    ((TextBox)sender).Text = "textbox gained focus";
}

private void textBoxAll_Leave(object sender, EventArgs e)
{
    ((TextBox)sender).Text = "textbox lost focus";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T17:20:01.300

我想我理解被问到的内容：

**更新**

此版本更好，因为它与通过设计器（模拟 InitializeControls）创建的文本框一起使用，并且它使用字典来定位在字典中找到的文本框。如果 TextBoxes 包含在子容器中，Controls.Find 很有用。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;

class Form1 : Form
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }

    private static readonly Dictionary<string, string> TextBoxEnterText = new Dictionary<string, string>
    {
        { "T1", "Enter T1" },
        { "T2", "Enter T2" },
        { "T3", "Enter T3" },
        { "T4", "Enter T4" },
        { "T5", "Enter T5" },
    };

    private static readonly Dictionary<string, string> TextBoxLeaveText = new Dictionary<string, string>
    {
        { "T1", "Leave T1" },
        { "T2", "Leave T2" },
        { "T3", "Leave T3" },
        { "T4", "Leave T4" },
        { "T5", "Leave T5" },
    };

    private void InitializeControls()
    {
        Controls.Add(new TextBox { Name = "T1", Location = new Point(10, 10) });
        Controls.Add(new TextBox { Name = "T2", Location = new Point(10, 40) });
        Controls.Add(new TextBox { Name = "T3", Location = new Point(10, 70) });
        Controls.Add(new TextBox { Name = "T4", Location = new Point(10, 100) });
        Controls.Add(new TextBox { Name = "T5", Location = new Point(10, 130) });
    }

    public Form1()
    {
        InitializeControls();

        foreach (string name in TextBoxEnterText.Keys)
            Controls.Find(name, true).First().Enter += textBox_Enter;
        foreach (string name in TextBoxLeaveText.Keys)
            Controls.Find(name, true).First().Leave += textBox_Leave;
    }

    static void textBox_Leave(object sender, EventArgs e)
    {
        TextBox textBox = (TextBox)sender;
        textBox.Text = TextBoxLeaveText[textBox.Name];
    }

    static void textBox_Enter(object sender, EventArgs e)
    {
        TextBox textBox = (TextBox)sender;
        textBox.Text = TextBoxEnterText[textBox.Name];
    }
} 
```

# android - 安卓。仅垂直重复背景

> ID：12219452
> 
> 赞同：0
> 
> 时间：2012-08-31T16:45:30.773
> 
> 标签：android

我尝试使用`setTileModeXY(Shader.TileMode.REPEAT, Shader.TileMode.REPEAT)`在背景中重复一个小图像。但我只想垂直重复它，而不是水平重复。我如何设置第一个或第二个参数使其不会重复？想不通，我敢肯定这是初级的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:08:14.730

你试过`null`吗？还考虑到该方法有单个 X 和 Y 版本。

# css - 是否可以显示内容 css 属性中的元素总数？

> ID：12219463
> 
> 赞同：6
> 
> 时间：2012-08-31T16:46:14.320
> 
> 标签：css

我正在使用以下 css 来显示计步器：

```
:before {
  content: "step " counter(fieldsets);
  counter-increment: fieldsets;
  /* Some more css */
} 
```

但我想知道是否也可以显示元素的总数，如下所示：

```
:before {
  content: "step " counter(fieldsets) " of " total_number_of_fieldsets;
  counter-increment: fieldsets
  /* Some more css */
} 
```

我希望它是一个纯 CSS 解决方案，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:19:14.070

除非您有其他东西可以计算 CSS 中的 total_number_of_fieldsets 计数，否则这是不可能的。

看到这个小提琴：http: [//jsfiddle.net/EawLA/](http://jsfiddle.net/EawLA/)

您可以显示总数 :after

请注意，这在 IE<9 中不起作用，因为不支持伪元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:08:38.560

CSS 无法检查 DOM 或使用变量，因此它无法提取此信息。

# java - 将 ScrollView 和 Horizo ntalScrollView 添加到 TableLayout

> ID：12219464
> 
> 赞同：0
> 
> 时间：2012-08-31T16:46:18.803
> 
> 标签：java, android, scroll

我的问题就像放置一个 ScrollView Horizo​​ntalScrollView 和一个包含 TextView 数组的表。

这是我的 main.java：

```
public class tabla extends Activity {

    SitesList sitesList = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tabla);

        TableLayout layout =(TableLayout)findViewById(R.id.tabla);

        TableRow tr[] = new TableRow[80];

        TextView variacion[];
        TextView nemotecnico[];
        TextView precio[];

        try {

            /** Handling XML */
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();

            /** Send URL to parse XML Tags */
            URL sourceUrl = new URL("http://www.bovalpo.com/cgi-local/xml_bcv.pl?URL=75");

            /** Create handler to handle XML Tags ( extends DefaultHandler ) */
            MyXMLHandler myXMLHandler = new MyXMLHandler();
            xr.setContentHandler(myXMLHandler);
            xr.parse(new InputSource(sourceUrl.openStream()));

        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        /** Get result from MyXMLHandler SitlesList Object */
        sitesList = MyXMLHandler.sitesList;

        /** Assign textview array lenght by arraylist size */

        nemotecnico = new TextView[sitesList.getNemotecnico().size()];
        variacion = new TextView[sitesList.getVariacion().size()];
        precio = new TextView[sitesList.getPrecio().size()];

        /** Set the result text in textview and add it to layout */
        for (int i = 0; i < sitesList.getRegistro().size(); i++) {

            variacion[i] = new TextView(this);
            variacion[i].setText("   " +sitesList.getVariacion().get(i));

            nemotecnico[i] = new TextView(this);
            nemotecnico[i].setText("   " +sitesList.getNemotecnico().get(i));

            precio[i]  = new TextView(this);
            precio[i].setText("   " + sitesList.getPrecio().get(i));

            Pattern pattern = Pattern.compile("^([a-z: ]*)?+(\\+?[0-9]+([,\\.][0-9]*)?)$");
            Matcher matcher = pattern.matcher(sitesList.getVariacion().get(i));
            if (!matcher.matches())

                variacion[i].setTextColor(Color.parseColor("#ff0000"));
            else
                variacion[i].setTextColor(Color.parseColor("#008000")); 

        }   
        for (int i = 0; i < 80; i++) {
            tr[i] = new TableRow(this);

            tr[i].addView(nemotecnico[i], new TableRow.LayoutParams(1));
            tr[i].addView(precio[i], new TableRow.LayoutParams(2));
            tr[i].addView(variacion[i], new TableRow.LayoutParams(3));

            layout.addView(tr[i], new TableLayout.LayoutParams());

        }
        /** Set the layout view to display */
        setContentView(layout);

    }    
} 
```

正如您在我的代码中看到的：

```
TableLayout layout =(TableLayout)findViewById(R.id.tabla);  

TableRow tr[] = new TableRow[80];

TextView variacion[];
TextView nemotecnico[];
TextView precio[]; 
```

并在 TableRow 中显示 TextView

```
for (int i = 0; i < 80; i++) {
    tr[i] = new TableRow(this);

    tr[i].addView(nemotecnico[i], new TableRow.LayoutParams(1));
    tr[i].addView(precio[i], new TableRow.LayoutParams(2));
    tr[i].addView(variacion[i], new TableRow.LayoutParams(3));

    layout.addView(tr[i], new TableLayout.LayoutParams());

}
/** Set the layout view to display */
setContentView(layout); 
```

但是我不能放 Horizo​​ntalScrollView 和 ScrollView 因为我的 Xml 如下图所示。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tabla"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/fondo" >

</TableLayout> 
```

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:55:50.467

我不明白为什么你不能在垂直和水平滚动视图中包装整个表格或包装单个单元格（无论你喜欢哪个）。第一个选项如下所示：

```
<ScrollView ...>
    <HorizontalScrollView ...>
        <TableLayout ...>
    </HorizontalScrollView>
</ScrollView> 
```

**然而**，这只允许用户为每个手势水平*或垂直滚动​​，而不是**对角*滚动。但是这个问题涵盖了在 android 中创建二维 ScrollView: [Scrollview vertical and Horizo​​ntal](https://stackoverflow.com/q/2044775/1267661)。

# python - 是否有与 Haskell 'let' 等效的 Python

> ID：12219465
> 
> 赞同：32
> 
> 时间：2012-08-31T16:46:20.803
> 
> 标签：python, haskell, functional-programming, let

是否有一个与 Haskell 'let' 表达式等效的 Python 表达式，可以让我编写如下内容：

```
list2 = [let (name,size)=lookup(productId) in (barcode(productId),metric(size)) 
            for productId in list] 
```

如果不是，那么**最易读**的选择是什么？

添加以澄清 let 语法：

```
x = let (name,size)=lookup(productId) in (barcode(productId),metric(size)) 
```

相当于

```
(name,size) = lookup(productId)
x = (barcode(productId),metric(size)) 
```

但是，第二个版本在列表推导中效果不佳。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-31T16:52:46.437

您可以使用临时列表理解

```
[(barcode(productId), metric(size)) for name, size in [lookup(productId)]][0] 
```

或者，等效地，生成器表达式

```
next((barcode(productId), metric(size)) for name, size in [lookup(productId)]) 
```

但这两者都非常可怕。

另一种（可怕的）方法是通过一个临时的 lambda，您可以立即调用它

```
(lambda (name, size): (barcode(productId), metric(size)))(lookup(productId)) 
```

* * *

我认为推荐的“Pythonic”方式只是定义一个函数，比如

```
def barcode_metric(productId):
   name, size = lookup(productId)
   return barcode(productId), metric(size)
list2 = [barcode_metric(productId) for productId in list] 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-06T08:49:43.293

最近的 python 版本允许在生成器表达式中使用多个 for 子句，因此您现在可以执行以下操作：

```
list2 = [ barcode(productID), metric(size)
          for productID in list
          for (name,size) in (lookup(productID),) ] 
```

这也类似于 Haskell 提供的：

```
list2 = [ (barcode productID, metric size)
        | productID <- list
        , let (name,size) = lookup productID ] 
```

并且在外延上等价于

```
list2 = [ (barcode productID, metric size) 
        | productID <- list
        , (name,size) <- [lookup productID] ] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-31T16:51:05.103

哪有这回事。你*可以*`let`用与 lambda 演算 ( `let x = foo in bar`<=> )相同的方式来模拟它`(\x -> bar) (foo)`。

最易读的替代方案取决于具体情况。对于您的具体示例，我会选择类似的东西`[barcode(productId), metric(size) for productId, (_, size) in zip(productIds, map(lookup, productIds))]`（再想一想真的很难看，如果您也不需要它会更容易`productId`，那么您可以使用`map`）或显式`for`循环（在生成器中）：

```
def barcodes_and_metrics(productIds):
    for productId in productIds:
        _, size = lookup(productId)
        yield barcode(productId), metric(size) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-24T15:10:36.527

b0fh 的答案中的多个 for 子句是我个人使用了一段时间的样式，因为我相信它提供了更多的清晰度，并且不会用临时函数使命名空间混乱。但是，如果速度是一个问题，重要的是要记住临时构建一个元素列表比构建一个元组花费的时间要长得多。

比较这个线程中各种解决方案的速度，我发现丑陋的 lambda hack 最慢，其次是嵌套生成器，然后是 b0fh 的解决方案。然而，这些都被一元组获胜者超越：

```
list2 = [ barcode(productID), metric(size)
          for productID in list
          for (_, size) in (lookup(productID),) ] 
```

这可能与 OP 的问题不太相关，但是在其他情况下，通过使用单元组而不是虚拟迭代器的列表，可以大大提高清晰度并提高速度。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-31T16:56:14.520

只猜测 Haskell 做了什么，这是另一种选择。它使用 Python 中所谓的“列表理解”。

```
[barcode(productId), metric(size)
    for (productId, (name, size)) in [
        (productId, lookup(productId)) for productId in list_]
] 
```

`lambda:`正如其他人所建议的那样，您可以包括使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-05T16:55:58.427

由于您要求最好的可读性，您可以考虑使用 lambda 选项，但需要稍作改动：初始化参数。以下是我自己使用的各种选项，从我尝试过的第一个开始，到我现在最常用的一个结束。

假设我们有一个`data_structure`作为参数获取的函数（未显示），并且您需要`x`反复从中获取。

第一次尝试（根据 2012 年 huon 的回答）：

```
(lambda x:
    x * x + 42 * x)
  (data_structure['a']['b']) 
```

使用多个符号，这变得不那么可读，所以接下来我尝试了：

```
(lambda x, y:
    x * x + 42 * x + y)
  (x = data_structure['a']['b'],
   y = 16) 
```

这仍然不是很可读，因为它重复了符号名称。所以我尝试了：

```
(lambda x = data_structure['a']['b'],
        y = 16:
  x * x + 42 * x + y)() 
```

这几乎读作“让”表达。作业的定位和格式当然是你的。

这个成语很容易通过开头的“（”和结尾的“（）”来识别。

在函数式表达式中（也在 Python 中），许多括号往往会在末尾堆积。奇怪的“（”很容易被发现。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-04-22T21:16:28.790

```
class let:
    def __init__(self, var):
        self.x = var

    def __enter__(self):
        return self.x

    def __exit__(self, type, value, traceback):
        pass

with let(os.path) as p:
    print(p) 
```

但这实际上与' 范围不限于 with 块`p = os.path`相同。`p`为此，您需要

```
class let:
    def __init__(self, var):
        self.value = var
    def __enter__(self):
        return self
    def __exit__(self, type, value, traceback):
        del var.value
        var.value = None

with let(os.path) as var:
    print(var.value)  # same as print(os.path)
print(var.value)  # same as print(None) 
```

这里`var.value`将`None`在 with 块之外，但`os.path`在其中。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-02-05T15:28:20.707

在 Python 3.8 中，添加了使用运算符的赋值表达式`:=`：[PEP 572](https://www.python.org/dev/peps/pep-0572/)。

这有点像`let`在 Haskell 中使用，尽管不支持可迭代解包。

```
list2 = [
    (lookup_result := lookup(productId), # store tuple since iterable unpacking isn't supported
     name := lookup_result[0], # manually unpack tuple
     size := lookup_result[1],
     (barcode(productId), metric(size)))[-1] # put result as the last item in the tuple, then extract on the result using the (...)[-1]
    for productId in list1
] 
```

请注意，它的作用域类似于普通的 Python 赋值。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-08-31T17:14:49.497

要获得模糊可比的东西，您要么需要做两个推导或映射，要么定义一个新函数。一种尚未被建议的方法是像这样将其分成两行。我相信这有点可读；虽然可能定义自己的函数是正确的方法：

```
pids_names_sizes = (pid, lookup(pid) for pid in list1)
list2 = [(barcode(pid), metric(size)) for pid, (name, size) in pids_names_sizes] 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-06-24T13:57:27.033

尽管您可以简单地将其写为：

```
list2 = [(barcode(pid), metric(lookup(pid)[1]))
         for pid in list] 
```

您可以定义`LET`自己以获得：

```
list2 = [LET(('size', lookup(pid)[1]),
             lambda o: (barcode(pid), metric(o.size)))
         for pid in list] 
```

甚至：

```
list2 = map(lambda pid: LET(('name_size', lookup(pid),
                             'size', lambda o: o.name_size[1]),
                            lambda o: (barcode(pid), metric(o.size))),
            list) 
```

如下：

```
import types

def _obj():
  return lambda: None

def LET(bindings, body, env=None):
  '''Introduce local bindings.
  ex: LET(('a', 1,
           'b', 2),
          lambda o: [o.a, o.b])
  gives: [1, 2]

  Bindings down the chain can depend on
  the ones above them through a lambda.
  ex: LET(('a', 1,
           'b', lambda o: o.a + 1),
          lambda o: o.b)
  gives: 2
  '''
  if len(bindings) == 0:
    return body(env)

  env = env or _obj()
  k, v = bindings[:2]
  if isinstance(v, types.FunctionType):
    v = v(env)

  setattr(env, k, v)
  return LET(bindings[2:], body, env) 
```

# google-maps - 带有 jquery.mobile 的 Google 地图：如何正确调整地图画布的大小？

> ID：12219472
> 
> 赞同：0
> 
> 时间：2012-08-31T16:46:46.630
> 
> 标签：google-maps, jquery-mobile

我正在编写一个需要地图的 jquery 移动应用程序。

对于地图，我计划使用谷歌地图服务。

为了解释方向的变化，我尝试使用类似的东西：

```
<script>
$('#page-map').live('pagecreate', function(event) {
    var map = $('#map_canvas').gmap({
        ...
    });
    ...
    $(window).resize(function() {
       $('#map_canvas').width($(window).width());
       $('#map_canvas').height($(window).height());
    });
)};
</script> 
```

问题：当设备旋转时，此代码正确调整地图画布的大小，但看起来 jquery mobile resize() 被跳过（例如，url 栏可见......）。

甚至没有在“resize(function() {”代码中添加这样的代码：

```
google.maps.event.trigger(map, 'resize'); 
```

有任何帮助。

*更新：* 这个问题只发生在我正在测试我的页面的唯一移动设备上——三星 Galaxy Mini (GT-S5570)、Android 2.3.4 (Gingerbread)。在桌面 PC 上调整窗口大小时不会发生*这种*情况（即：在桌面浏览器上，当浏览器的窗口放大时，map_canvas 会正确填充，即使没有 resize() 绑定，仅由于 map_canvas 上的宽度/高度为 100%... )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:58:10.637

我在 jquery mobile 中通过 css 为我的地图分配一个大小 我
在 div 中添加 map_canvas ，在这种情况下需要 100%

CSS

```
#map_content {
padding: 0px;
width: 100%;
height: 100%;
overflow: hidden;}

#map_canvas {
width: 100%;
height: 100%;
padding: 0;
text-shadow: none;} 
```

HTML

```
 <div data-role="content" id="map_content" data-theme="a">
            <div id="map_content">
                <div id="map_canvas"></div>
            </div>
        </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T13:52:45.033

我已经尝试了上述答案（以及许多其他答案），但对我没有任何帮助。实际上，上面的代码对我有用，但直到我开始使用 jQuery Mobile。不知何故，当我加载 jQuery Mobile（有趣的是，我注意到它是 JS，而不是 CSS）时，map_canvas 没有高度（检查元素高度的技巧是为其添加边框`border: 1px solid red;`）。

最终，我设法通过使用以下代码/css 解决了方向更改时的自动调整大小问题：

```
<div data-role="page" id="pageID">
   <div role="main" class="ui-content">
      <div id="map_canvas">
      </div>
   </div>
</div> 
```

在CSS中：

```
html,
body,
#pageID {
  height: 100%;
  margin: 0;
  padding: 0;
}
.ui-content {
  padding: 0;
}
.ui-content,
.ui-content #map_canvas {
  height: inherit; /* the trick */
} 
```

所以，基本上：`height: inherit;`为我解决了这个问题。

学分：[https ://jqmtricks.wordpress.com/2014/12/01/content-div-height-css-solution/comment-page-1/#comment-250](https://jqmtricks.wordpress.com/2014/12/01/content-div-height-css-solution/comment-page-1/#comment-250)

我希望它有帮助！

# sql - 分区求和

> ID：12219476
> 
> 赞同：0
> 
> 时间：2012-08-31T16:47:08.867
> 
> 标签：sql

以下查询为 totalqty 带来了正确的值。但是它会留下或错过计算某些物品的数量，为什么？

```
 SELECT
         PRODID, ITEMDES, QTY,  SUM(QTY) over (partition by prodId)  as totalqty, StockCode,shipName, shipCompany, shipAddress1, shipAddress2, shipAddress3,shipPostCode,shipcity,shipCountry,shipCounty,customerMessage
         FROM orderedItems oi
        left join orders o on oi.order_id = o.order_id
        WHERE prodId = prodId
        AND o.status = 'transaction authorised'
        AND o.delTime = '#FORM.delDateselect#'

            Group by PRODID,ITEMDES,QTY, StockCode,shipName, shipCompany, shipAddress1, shipAddress2, shipAddress3,shipPostCode,shipcity,shipCountry,shipCounty,customerMessage

            ORDER BY PRODID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:49:25.950

您的`where`子句使`left outer join`行为像`inner join`. 像这样改变它：

```
WHERE
    prodId = prodId and
    (
        o.order_id is null or 
        (
            o.status = 'transaction authorised' AND
            o.delTime = '#FORM.delDateselect#'
        )
    ) 
```

原因是如果在`orders` `o.status`will be中没有匹配的顺序`NULL`，因此不等于`'transaction authorised'`。

此外，您不需要 group by。您已经拥有为您执行此操作的分析功能`SUM`。

# matlab - 我想从网络摄像头录制视频

> ID：12219479
> 
> 赞同：0
> 
> 时间：2012-08-31T16:47:23.100
> 
> 标签：matlab, webcam, video-recording

我正在为此使用 Matlab 代码。

但是当我运行它时，它显示错误。

**代码 ：**

```
fig=figure;
set(fig,'DoubleBuffer','on');
set(gca,'xlim',[-80 80],'ylim',[-80 80],'NextPlot','replace','Visible','off');
mov = avifile('movie.avi','compression','cinepak');
mov.quality=90;
i=imread('white.jpg');
for k=1:1000
imshow(i);
F = getframe(gca);
mov = addframe(mov,F);
end
mov = close(mov); 
```

**错误：**

```
??? Error using ==> capturescreen
Figure destroyed during getframe

Error in ==> getframe at 35
x=capturescreen(varargin{:});

Error in ==> a at 9
F = getframe(gca); 
```

请帮我解决一下这个。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:29:40.600

在这里可以正常工作，尽管我不得不将压缩更改为“无”，因为 RLE 和 MSVC 不适用于我正在使用的真彩色图像，并且 indeo/cinepak 不适用于 x64。（奇怪的是，不是任何一个版本的 indeo）

我的猜测是，您需要`drawnow`在`imshow`命令之后清除缓冲区，以便复制图像。我第一次运行它时产生了一个不同的错误，这似乎证实了这一点，但我无法重现那个错误。它绝对适用于drawow；在。

**更新：**对于运行 win7 x64 的任何人，您应该能够使用“i420”作为您的编解码器。使用上面的代码对我来说无论是否`drawnow`在 imshow 之后都可以正常工作。

# jquery - 使用 JQuery 获取特定 div 中的所有 div

> ID：12219480
> 
> 赞同：4
> 
> 时间：2012-08-31T16:47:22.893
> 
> 标签：jquery

我有这个文档结构

```
<div id="log">
<div>ABC</div>
<br/>
<div>DEF</div>
<br/>
...
</div> 
```

其中`...`表示任意数量的 div、br 对。

现在我需要编写一个名为 exists 的 JQuery 函数，它接受一个 id（在本例中为“log”）和一个字符串（例如“DEF”），并检查“log” div 中是否有任何 div 的文本与“DEF”匹配”。我的 JQuery 很弱，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:49:30.240

```
if ( $('#log div:contains("DEF")').length ) {
   // exists
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T16:55:32.377

```
$("#log").children("div").each(function(){
   if( $(this).text() == "DEF")
     //do something  
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T16:51:33.567

[`:contains`您可以使用选择](http://api.jquery.com/contains-selector/)器从 id 制作选择器字符串：

```
function exists(id, content) {
  return $('#' + id + ' div:contains("' + content + '")').length > 0;
} 
```

然而，这并不完全匹配。如果您想要一个完全包含 EAR 的 div，并且有一个包含 BEARS 的 div，您会得到一个误报。要进行完全匹配，您可以使用以下[`filter`方法](http://api.jquery.com/filter/)过滤元素：

```
function exists(id, content) {
  return $('#' + id).filter(function(){
    return $(this).text() == content;
  }).length > 0;
} 
```

### 编辑：

要获取所有 div 的内容，请使用以下`map`方法：

```
var arr = $('#' + id + ' div').map(function(){
  return $(this).text();
}).get(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:52:22.613

```
$('#log').find('div:contains("DEF")'); 
```

应该管用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T16:53:00.470

```
$searchThis = $('.log').html();
if($searchThis.indexOf('search string') != -1){
    actions upon success (you found the string)
} 
```

# iphone - 在 Xcode 中拨打电话号码

> ID：12219484
> 
> 赞同：0
> 
> 时间：2012-08-31T16:47:39.087
> 
> 标签：iphone, ios4, xcode4.3

您好，我希望用户单击一个按钮，该按钮将打开实际的 iPhone 手机应用程序。

关于如何做到这一点的任何想法或教程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T16:49:06.477

您可以使用以下线路轻松拨打电话：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:12125551212"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T09:44:19.060

只需添加（而不只是再次复制和粘贴相同的答案！）如果您的电话号码包含任何空格，那么这行代码将默默地失败。

因此，即使**电话**应用程序*说它*正在拨打 +41 44 123 4567，如果您尝试在代码中使用以下行，也不会发生任何事情。它不会将此识别为电话号码。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:+41 44 123 4567"]]; 
```

因此，您需要去掉所有空格，然后让**电话**应用程序拨打号码，此时它会在显示电话号码时将自己的空格添加回电话号码！

这是我使用的代码（电话号码当前显示在`UILabel`被调用的 lblPhone 中）：

```
 NSString* phoneNumber = [self.lblPhone.text stringByReplacingOccurrencesOfString:@" " withString:@""];

 NSString* actionStr = [NSString stringWithFormat:@"telprompt:%@", phoneNumber];

 UIDevice *device = [UIDevice currentDevice];
 if ([[device model] isEqualToString:@"iPhone"] ) {
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:actionStr]];
 } 
```

此代码还会检查您是否在 iPad 上运行该应用程序。如果您是，那么我们不想尝试拨打该号码。

[此外，正如该](https://stackoverflow.com/questions/6101286/making-a-button-call-a-phone-number-in-ios)线程上的答案所暗示的那样，您会看到我使用过 `telprompt:`而不是`tel:` 它有两个优点：

首先，它会出现一个小对话框，以检查用户是否*真的想*拨打该电话号码：

![好的](../Images/2ce376e7e19493a4565db4d020bb6bd3.png)

其次，当用户完成呼叫此号码（并挂断）时，它会将您返回到您的应用程序。奇怪的是，使用`tel:`不会这样做。

（使用 XCode 5 和 iOS 7.1 测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:33:55.840

您不能只打开电话应用程序来手动输入号码。正如之前建议的那样，您可以从您的应用程序拨打电话，这将打开默认的电话呼叫屏幕，一旦您完成该呼叫，它将重定向回您的应用程序。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-31T17:43:14.577

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:<You button title as phone number>"]]; 
```

# css - 更改 Twitter Bootstrap 的正文背景会改变一切 - Rails

> ID：12219487
> 
> 赞同：2
> 
> 时间：2012-08-31T16:47:56.137
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

新手问题。我正在尝试为使用 Bootstrap 构建的网站使用背景图片。

我在我的资产管道中的一个单独的 css 文件中添加了额外的 body CSS，并添加了一个背景图像：

```
body {
    font-size: 16px;
    padding-top: 10px;
    background-image: url("../assets/back14.gif");
} 
```

这可以很好地改变背景，但也可以将其应用于其他元素，如导航单元等，我想保留默认颜色。

我可以修复此行为或以更好的方式应用背景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:47:42.367

很抱歉，但我认为您是正确的：默认情况下，这些背景是透明的。正如您从[自定义页面](http://twitter.github.com/bootstrap/customize.html#variables)中看到的那样，虽然在导航栏部分中**活动**链接和**悬停**链接的背景存在变量，但普通旧的常规导航栏链接的背景没有变量。：/

否则，重写并不难：

```
.nav-stacked > li > a {
  background-color:#ffffff;
} 
```

但似乎仍然应该作为一种选择。

### [JSFiddle](http://jsfiddle.net/mmfansler/frGLZ/)

# php - 动态添加元素到多维关联数组

> ID：12219488
> 
> 赞同：-2
> 
> 时间：2012-08-31T16:48:06.900
> 
> 标签：php, arrays, dynamic, add, associative

我正在尝试将新元素插入到多维关联数组中，例如

```
$arr=array('ID' => 123,
           'name' => 'rock',
           'accountID' => 'u0777f7f-77f7-4d2e-9h7c-ea775d052785',
           'admin' => array  (
                       'main' => array (
                                   'stats' =>'', 
                                   'emails' =>'', 
                                   'calls' => ''
                                )
                         )
            );

 $list='';
 $list .="['admin']['main']['hello']";

 $arr{$list}='world';
 print_r($arr); 
```

但是新元素没有被添加到 ['admin']['main'] 中，而是创建了新的数组元素，例如

```
Array
(
    [ID] => 123
    [name] => rock
    [accountID] => u0777f7f-77f7-4d2e-9h7c-ea775d052785
    [admin] => Array
        (
            [main] => Array
                (
                    [stats] => 
                    [emails] => 
                    [calls] => 
                )

        )
   [['admin']['main']['hello']] => world
) 
```

请帮我解决它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:03:16.100

这是你应该做的：

```
$arr['admin']['main']['hello'] = > 'world'; 
```

或者

```
$main = $arr['admin']['main'];
$main['hello'] = 'world'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:16:22.560

```
[['admin']['main']['hello']] => world 
```

这是因为**STRING考虑了 $list**

**尝试更改此行**

```
$list='';
$list .="['admin']['main']['hello']"; 
$arr{$list}='world';
print_r($arr); 
```

**和**

```
$list = array();
$list['main']['hello'] = "world";
$arr['admin'] = $list;
print_r($arr); 
```

魔法将被揭示。哈哈

* * *

如果你想要 $arr 像：

```
Array ( 
     [ID] => 123 
     [name] => rock 
     [accountID] => u0777f7f-77f7-4d2e-9h7c-ea775d052785 
     [admin] => Array ( 
                    [main] => Array ( 
                         [stats] => 
                         [emails] => 
                         [calls] => 
                                    ) 
                       ) 
     [hello] => world 
      ) 
```

**你可以有逻辑地写**

```
$arr = array();

$arr['ID'] = 123;
$arr['name'] = "rock";
$arr['accountID'] = "u0777f7f-77f7-4d2e-9h7c-ea775d052785";

$arr['admin']['main']['stats'] = "complete";
$arr['admin']['main']['emails'] = "example@email.com";
$arr['admin']['main']['calls'] = "yourfunction";
$arr['hello'] = "world"; 
```

# bash - Easy Bash Cut 分隔符

> ID：12219493
> 
> 赞同：2
> 
> 时间：2012-08-31T16:48:24.313
> 
> 标签：bash

我有这个..

```
$input = "echo     a       b                c   d"
echo -e "$input" | cut -d " " -f 2- 
```

但我只想要一个简单的剪辑，可以消除回声和打印

```
a b c d #(single space) only 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T16:52:47.403

```
echo -e "$input" | tr -s ' ' | cut -d " " -f2- 
```

也摆脱了“回声”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T16:53:14.767

除了 bash 提供的内置工具之外，您不需要任何工具。

```
[ghoti@pc ~]$ input="echo     a       b                c   d"
[ghoti@pc ~]$ output=${input//  / }
[ghoti@pc ~]$ echo $output
echo a b c d
[ghoti@pc ~]$ echo ${output#* }
a b c d
[ghoti@pc ~]$ 
```

好处：您避免了管道的额外开销。

不利的一面：您需要分配一个额外的变量，因为您不能在复杂的模式扩展中进行复杂的模式扩展（即`echo ${${input//  / }#* }`不起作用）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T16:53:08.837

有点迂回，但很有趣：

```
( set -- $input; shift; echo $@ ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T16:53:31.007

使用 sed：

```
sed -e 's/[ ]*[^ ]*[ ]*\(.*\)/\1/' -e 's/[ ]*/ /g' -e 's/^ *//' input_file 
```

# php - 为什么一个被称为“字符串”的数组对数组不可见？

> ID：12219495
> 
> 赞同：0
> 
> 时间：2012-08-31T16:48:40.410
> 
> 标签：php, regex, arrays, string, invisible

下面的文件可以使用 PhotoShop 中具有 XMP 数据的任何 JPG 文件进行设置。在 'pattern' 中，将 'eat:' 替换为 'dc:' 或从 '$string' 返回的任何命名空间。

使用以下数组设置调用 $string (1) 它会生成一个 print_r 数组，如下所示： (2)

如果取消注释上面的行 (1a)，它将打印到浏览器，复制并粘贴到下面的行 (1a)。这应该产生一个看起来像这样的数组：(3)

为什么 print_r 读数不同，当它是相同的字符串时？

我如何让它表现得像（3）；...更好的是我如何让它像（4）一样结束？

```
<?php
header("Content-Type: text/html; charset=utf-8");
$filename = "2012-04-24_WestCoast_2.jpg";
echo '<img src="'. $filename . '" alt="'. $filename . '" title="' .     $filename . '" width="350" /><p />';
$source = file_get_contents($filename);
$xmpdata_start = strpos($source,'<x:xmpmeta');
$xmpdata_end = strpos($source,"</rdf:Description>");
$xmplenght = $xmpdata_end-$xmpdata_start;
$xmpdata = substr($source,$xmpdata_start,$xmplenght+18);
$string = htmlentities($xmpdata); //(1)

//if (is_string($string)) {
//    echo "is a string\n"; //TRUE
//} else {
//    echo "is not a string\n";
//}

//$string = print_r("'".$string."';");
// (1a)=====================================
//$string = '<x:xmpmeta xmlns: === Truncated for simplicity ===x="adobe:ns:meta/" x:xmptk="Adobe XMP Core    5.3-c011 66.145661, 2012/02/06-14:56:27 "> <rdf:RDF    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"></rdf:Description>';

$pattern = '/eat:(.*?)="(.*?)"/is';
preg_match_all($pattern, $string, $matches);
$group = array($matches[1], $matches[2]);
//    foreach($group as &$match);
echo '<pre>';
// print_r ($match);
print_r ($group);
echo '</pre>';
?> 
```

(2)======================================
//如果我只是调用'$string '，这就是我得到的：

```
Array
(
    [0] => Array
        (
        )

    [1] => Array
        (
        )

) 
```

(3)=======================================
// 如果我取消注释 (1)，则我粘贴在文件中的'$string'，我得到了这个：

```
Array
(
    [0] => Array
        (
            [0] => Biography
            [1] => Title
            [2] => object_description
            [3] => Medium
            [4] => in_height
            [5] => in_width
            [6] => in_depth
            [7] => Dated
            [8] => Photograph
        )

    [1] => Array
        (
            [0] => American B1942 Castine, Maine
            [1] => Reunion Dinner Party at the Slanted Door
            [2] => Nancy Freeman, Tim Patterson The Slanted Door San Francisco Calf.
            [3] => photography
            [4] => 2736
            [5] => 3648
            [6] => @ 240 dpi
            [7] => April 24, 2012
            [8] => PrimaryImage
        )

) 
```

(4)======================================
//这就是我想要的得到太：

```
Biography: American B1942 Castine, Maine
Title: Reunion Dinner Party at the Slanted Door
object_description: Reunion Dinner Party at the Slanted Door
Nancy Freeman, Tim Patterson The Slanted Door San Francisco Calf.
Medium: photography
in_height: 2736
in_width: 3648
in_depth: @ 240 dpi
Dated: April 24, 2012
Photograph: PrimaryImage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:42:15.357

好吧，看起来我可以回答我自己的问题“为什么它是一个数组不可见的所谓的'字符串'？”。答案是：在调用“htmlentities()”之前。

现在我不确定它为什么会发生，但它确实发生了，当我回去检查我所有的假设时......'htmlentities（）'会清理原始字符串。注释掉 'htmlentities()' 使一切正常。

这是一个错误吗？我个人不知道，而且我没有必要的使用 PHP 的经验来冒险猜测。我所知道的是它把我逼上了一个星期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:08:38.990

我不清楚在文件内部或外部设置字符串的问题是什么。目前尚不清楚您要解释什么。

array(3) 的输出是由正则表达式中的括号引起的。我不知道确切的原因，但要获得您想要的结果（4），您可以使用循环将两个数组连接到一个新数组中。

注意：您使用 $group 所做的是制作一个数组数组。您没有将两个数组合并为一个。要合并数组，您需要遍历两个数组并将每个元素合并为新数组的新元素。

例子：

```
for($i=0; $i<match[0].length; $i++){
    $result[i] = $match[0][i]. ": " .$match[1][i];
} 
```

我对我的 php 感到生疏，但这是合并数组的想法。

- 编辑 -

现在我了解您要做什么，我看到两个可能出现问题的地方。首先是：您是否 100% 确定您使用的图像在您想要的字段中包含任何元数据？我不确定元数据的确切性质，但我知道计算机会设置所需的数据（你用起点和终点过滤掉的数据）和自定义数据。如果为空，它甚至可能不包括在内。

第二个可能的问题是您如何分块元数据。也许尝试写入正则表达式以从字符串中删除开头和结尾。用“”替换一组字符前面的所有内容，并为后面做类似的表达。

此外，您为 $group 设置的变量与 $match 完全相同。您将包含在数组 %match 中的两个数组分配给一个名为 $group 的数组。仅供参考。使用我之前发布的 sudo 代码来设计实际上将两个数组合并为一个的循环。

祝你好运。也许当我在测试计算机上设置 php 时，我会使用代码来看看到底发生了什么。

# javascript - 从 Javascript 更新数据库属性

> ID：12219497
> 
> 赞同：0
> 
> 时间：2012-08-31T16:48:54.870
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

在我的 ruby​​ on rails 应用程序中，我试图允许用户更改屏幕上的字段并因此更新数据库。

使用以下屏幕提升用户：

```
<td id="sb_user-<%=server.id%>" ondblclick="changeUser(<%= server.id %>);"><%= server.sb_user %></td> 
```

![在此处输入图像描述](../Images/e98f959b3ddc887c9025ca56c41de9aa.png)

当他们双击 sb_user 字段时，将调用一个 javascript 函数并将该字段更改为带有简单 go 按钮的文本框：

```
 <script type="text/javascript">
        function changeUser(id) {
            //Stop the auto refresh until user hits enter
            clearInterval(refreshInterval);
            $("#sb_user-"+id).html("<form name='user'><div class='input-append'><input name='user_input' class='span1' id='appendedInputButton' size='16' type='text'/><button class='btn' type='button'>Go!</button></form></div>"); 
        }
    </script> 
```

![在此处输入图像描述](../Images/4f2ffc7d5c19262b9728860b29f52d73.png)

当用户在文本框中输入文本并单击 go 时，我需要它以便数据库字段 server.sb_user 更新为用户在该字段中输入的任何内容。

有人对如何做到这一点有建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:55:13.493

您正在搜索的是就地编辑。有一个railscast：

[http://railscasts.com/episodes/302-in-place-editing](http://railscasts.com/episodes/302-in-place-editing)

# node.js - nodejs加密解密有什么问题？

> ID：12219499
> 
> 赞同：16
> 
> 时间：2012-08-31T16:49:00.973
> 
> 标签：node.js, cryptography, openssl, aes

我有以下加密数据：

`U2FsdGVkX1+21O5RB08bavFTq7Yq/gChmXrO3f00tvJaT55A5pPvqw0zFVnHSW1o`

解密它的通行证是：`password`

（这是[gibberish-aes](https://github.com/mdp/gibberish-aes)的例子）

在使用 openssl 的命令行中：

`echo "U2FsdGVkX1+21O5RB08bavFTq7Yq/gChmXrO3f00tvJaT55A5pPvqw0zFVnHSW1o" | openssl enc -d -aes-256-cbc -a -k password`

输出是：

`Made with Gibberish\n`

使用我的 NodeJS 应用程序：

```
 var decipher = crypto.createDecipher('aes-256-cbc', "password");
  var dec = decipher.update("U2FsdGVkX1+21O5RB08bavFTq7Yq/gChmXrO3f00tvJaT55A5pPvqw0zFVnHSW1o",
     'base64', 'utf8');
  dec += decipher.final('utf8'); 
```

`TypeError: DecipherFinal fail`我在该`decipher.final`行有以下错误。

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T22:10:54.750

加密数据以一个 8 字节的“魔术”开头，表示存在盐（的 ASCII 编码`"Salted__"`）。然后接下来的 8 个字节是盐。现在坏消息：Node.js 似乎没有为 EVP_BytesToKey 方法使用盐：

```
int key_len = EVP_BytesToKey(cipher, EVP_md5(), NULL,
  (unsigned char*) key_buf, key_buf_len, 1, key, iv); 
```

那`NULL`就是盐。

这已使用 Java 测试应用程序（使用正确的 salt）进行了验证 - 返回了结果字符串。

请使用 OpenSSL`-nosalt`开关忽略盐，然后重试。

[例子]

OpenSSL 命令行：

```
openssl enc -aes-256-cbc -nosalt -a -k password
owlstead
Mh5yxIyZH+fSMTkSgkLa5w== 
```

NodeJS 加密：

```
var crypto=require('crypto')
var cipher=crypto.createDecipher('aes-256-cbc', "password")
var enc = cipher.update("Mh5yxIyZH+fSMTkSgkLa5w==", 'base64', 'utf8')
enc += cipher.final('utf8') 
```

* * *

[后期编辑] 请注意，使用带有盐和大工作因子的密钥派生可能对安全性至关重要。您最好使用一个非常独特的高熵密码，否则您的加密数据可能会面临风险。

* * *

[真正晚编辑] [OpenSSL 1.1.0c 更改了](https://stackoverflow.com/q/39637388/608639)一些内部组件中使用的摘要算法。以前使用MD5，1.1.0改用SHA256。请注意，更改不会影响您`EVP_BytesToKey`和`openssl enc`.

# javascript - 使用 jQuery 插入表格行

> ID：12219500
> 
> 赞同：-6
> 
> 时间：2012-08-31T16:49:01.870
> 
> 标签：javascript, jquery

这是我的文凭项目，我想在开始时插入一行选择设备选择，但我不知道如何使用 jQuery。

```
<form>
    <table border="1">
        <tr>
            <td>Kod Peralatan</td>
            <td>Nama Peralatan</td>
        </tr>
        <tr>
            <td>
                <select>
                    <option>Choose Equipment</option>
                </select>
            </td>
            <td>&nbsp;</td>
        </tr>
    </table>
    <table>
        <tr>
            <td align="right">
                <button type="button">Add Row</button>
            </td>
        </tr>
    </table>
    </center>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:57:54.110

```
$("button").click(function() {
    $("select").append(new Option('Foo', 'foo', true, true));
});​ 
```

[这是一个演示](http://jsfiddle.net/bmVp8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:22:33.897

我认为这可能是您正在寻找的。这将在您的设备表中动态添加一个新行，并创建一个新的下拉列表，该下拉列表已被填充。

```
<!DOCTYPE html>
<html>
<head>
    <title>Equipment</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        var rows = 0;
        function addMoreEquipment() {
            rows++;
            var options = [{ name: "Item 1", value: "1" }, { name: "Item 2", value: "2" }, { name: "Item 3", value: "3" }];
            var row = $("<tr id='row"+ rows +"'><td><select id='equipment" + rows + "'></select></td><td><a href='#' onclick='removeRow(\"row" + rows + "\")'>Remove</a></td></tr>")
            $("#equipment").append(row);
            for (var i = 0; i < options.length; i++)
                $("#equipment" + rows).append(new Option(options[i].name, options[i].value));
        }
        function removeRow(id) {
             $("#" + id).remove();
        }
        $(document).ready(function() {
            addMoreEquipment();
        });
    </script>
</head>
<body>
    <form>
        <table border="1" id="equipment">
            <tr>
                <td>Kod Peralatan</td>
                <td>Nama Peralatan</td>
            </tr>
        </table>
        <div style="text-align: right">
            <input type="button" onclick="addMoreEquipment()" value="Add Row">
        </div>    
    </form>
</body>
</html> 
```

你可以在这里查看更新的 JS Fiddle：http: [//jsfiddle.net/b3gYk/1/](http://jsfiddle.net/b3gYk/1/)

# erlang - 如何获取 erlang 节点的 IP 地址？

> ID：12219504
> 
> 赞同：7
> 
> 时间：2012-08-31T16:49:20.697
> 
> 标签：erlang

有没有一种简单的方法来获取连接的 erlang 节点的 IP 地址？我想启动与几个节点的 SCTP 连接，由于系统的设计方式，我对它们的了解只是它们的 node() 原子。

更准确地说，我想知道是否有一些由 Erlang 提供的 API（或一些派生技术）允许在给定标识符 atom() 的情况下获取节点的 IP 地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:41:06.847

您可以使用 rpc 模块在外部节点上调用该函数

例子：

```
rpc:call(Node,inet,getif,[]) 
```

注意：这仅适用于已经通过 erlang 分发连接的节点

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T17:09:45.223

我通过在节点上启动一个进程并让该进程发送一条包含其 IP 地址的消息来解决了这个问题。如果有人知道更优雅的解决方案，我想听听。

在节点上的进程启动后，我用来获取地址的命令是：`inet:getif()`. 请记住，该命令的结果包括环回地址。

需要考虑的是每个节点可能有多个 IP 地址，并且 SCTP 服务器可能不会监听所有这些地址。

我想尝试的另一个想法是将 node() 返回的原子转换为字符串，解析字符串以获取主机名，然后执行 DNS 查找。它可能有效，但我从未尝试过。DNS 查找的结果应该被缓存，因此可能没有网络往返。另外，我真的很讨厌假设任何关于从 node() 返回的原子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-02T10:21:50.210

看起来`net_kernel:nodes_info()`- 对于所有节点 - 和`net_kernel:node_info(Node)`单个节点 - 都有这些信息，还有更多，尽管它看起来不像在手册页中发布。在某些方面，这似乎是一个更好的解决方案，因为它也适用于您无法向其发送函数的 Java 和 C 节点之类的东西。

# ios - AS3 将 SWF 保存到 iOS 设备，然后将其加载回 MovieClip

> ID：12219513
> 
> 赞同：1
> 
> 时间：2012-08-31T16:50:07.810
> 
> 标签：ios, actionscript-3, file-io, flash

我有一个使用 AS3 和 AIR 的 iOS 应用程序。我有从服务器下载的外部 swfs 并正常播放——所有这些都很好。

不过，我不希望用户每次启动应用程序时都必须下载这些 swf，所以在第一次下载 swf 后，我想将其保存到磁盘。这样我以后需要时可以从本地副本中加载它，而不是再次下载它。我在网上找到了这个在 AS3 中保存文件的例子：

```
var file:File = File.applicationStorageDirectory.resolvePath("Swfs/" + "mySwfName" + ".swf");
var wr:File = new File(file.nativePath);
var stream:FileStream = new FileStream();
stream.open(wr, FileMode.WRITE);
stream.writeBytes(SWF_FILE_GOES_HERE, 0, SWF_FILE_DATA_LENGTH_GOES_HERE);
stream.close(); 
```

问题出在`writeBytes`一线。我找到的示例是用于将图像保存到磁盘，该行如下所示：

```
stream.writeBytes(imageData, 0, imageData.length); 
```

但我需要为 swf 而不是图像执行此操作，而且我不确定如何从我的 swf 文件中获取必要的数据。我在网上搜索了保存 swf 文件、从 swf 文件中获取数据等...但我没有找到任何东西。我需要获取 swf 的数据和数据长度（我假设这是字节数？）。以前有没有人解决过这个问题，或者有资源可以为我指明方向？

* * *

更新：根据@LondonDrugs_MediaServices 的评论，我想出了这`writeBytes`条线：

```
stream.writeBytes(mySwf.loaderInfo.bytes, 0, mySwf.loaderInfo.bytesTotal); 
```

这似乎有效，因为它编译和运行没有错误。但是当我尝试抓取文件并将其放回影片剪辑时，我收到此错误：

```
Error #2044: Unhandled IOErrorEvent:. text=Error #2035: URL Not Found. 
```

这意味着该文件实际上并未正确保存。但是，当我打印文件位置时，它们似乎是正确的！当我将文件保存到 applicationStorageDirectory 时：

```
/Users/MyName/Library/Preferences/com.appdir/Local Store/Swfs/mySwName.swf 
```

当我尝试将其从存储中加载到影片剪辑中时的文件名：

```
/Users/MyName/Library/Preferences/com.appdir/Local Store/Swfs/mySwName.swf 
```

这是我用来尝试将其加载回影片剪辑的代码：

```
var videoFileName:String = "Swfs/" + ENVAR.currentVideoSelected + ".swf";
var videoFilePath:File = File.applicationStorageDirectory.resolvePath(videoFileName);   
var inFileStream:FileStream = new FileStream(); 
trace("[Loading] filepath: ", videoFilePath.nativePath);
inFileStream.open(videoFilePath, FileMode.READ); 
var fileContents:String = inFileStream.readUTFBytes(inFileStream.bytesAvailable);   
inFileStream.close(); 

var req:URLRequest = new URLRequest(videoFilePath.nativePath);
var mLoader:Loader = new Loader();
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onVideoLoadComplete);
mLoader.load(req); 
```

我的`onVideoLoadComplete`函数包含以下几行：

```
var myMC:MovieClip = e.target.content as MovieClip;
addChild(myMC); 
```

但是我收到了错误 2044，它认为该文件不存在。谁能发现问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:10:12.170

您可以使用它的 `loaderInfo.bytes`参数获取加载的 swf 文件的原始字节。因此，对于您的示例，您可以这样做：

```
var file:File = File.applicationStorageDirectory.resolvePath("Swfs/" + key + ".swf"); 
var wr:File = new File(file.nativePath); 
var stream:FileStream = new FileStream(); 
stream.open(wr, FileMode.WRITE); 
stream.writeBytes(mySwf.loaderInfo.bytes, 0, mySwf.loaderInfo.bytesTotal); 
stream.close(); 
```

然后将其拉回 MovieClip：

```
var videoFileName:String = "Swfs/" + ENVAR.currentVideoSelected + ".swf";
var videoFilePath:File = File.applicationStorageDirectory.resolvePath(videoFileName); 
var inFileStream:FileStream = new FileStream(); 
inFileStream.open(videoFilePath, FileMode.READ); 
var swfBytes:ByteArray = new ByteArray();
inFileStream.readBytes(swfBytes);
inFileStream.close(); 

var mLoader:Loader = new Loader();
var loaderContext:LoaderContext = new LoaderContext(false, ApplicationDomain.currentDomain);
loaderContext.allowCodeImport = true;
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onVideoLoadComplete);
mLoader.loadBytes(swfBytes, loaderContext); 
```

# ajax - 由于 Ajax 请求，JWPlayer 视频断断续续

> ID：12219519
> 
> 赞同：0
> 
> 时间：2012-08-31T16:50:24.627
> 
> 标签：ajax, jwplayer

我在通过 jwplayer 播放视频时遇到问题。起初我认为问题可能是我正在使用的流媒体服务器，但是当我将流 URL 复制到 chrome 或 VLC 时它工作正常。然后我没有想到并说我有很多 ajax 请求（setTimeouts）正在运行，并想看看这是否是导致视频播放断断续续的原因。我禁用了所有 ajax 请求，并且在没有运行 ajax 请求时视频播放正常。

我可以做的一件事是减少 ajax 请求，但我想知道是否有其他人有类似的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:32:24.450

弄清楚了。问题是那些 ajax 请求是同步的，但应该是异步的。

# c# - 带有证书身份验证的 WCF 服务参考

> ID：12219522
> 
> 赞同：2
> 
> 时间：2012-08-31T16:50:47.193
> 
> 标签：c#, .net, wcf, x509certificate

我已经获得了一个 wcf 服务 url、私有和公共证书来使用它。

```
My url is https:/xxxx.com/xxxx/xxxx.svc
my private certificate is xxx.pfx
my public certificate is xxxx.cer 
```

当我尝试从我的客户端应用程序添加服务引用时，它会引发以下错误。

```
There was an error downloading 
'https://xxxx.com/xxxx/xxxx.svc'.
The underlying connection was closed: 
An unexpected error occurred on a receive.
Unable to read data from the transport connection: 
An existing connection was forcibly closed by the remote host.
An existing connection was forcibly closed by the remote host
Metadata contains a reference that cannot be resolved: 
'https://xxxx.com/xxxx/xxxx.svc'.
An error occurred while receiving the HTTP response to   
https://xxxx.com/xxxx/xxxx.svc. 
This could be due to the service endpoint binding not using the HTTP protocol. 
This could also be due to an HTTP request context being aborted by the server 
(possibly due to the service shutting down).   
See server logs for more details.
The underlying connection was closed: An unexpected error occurred on a receive.
Unable to read data from the transport connection:
An existing connection was forcibly closed by the remote host.
An existing connection was forcibly closed by the remote host
If the service is defined in the current solution, 
try building the solution and adding  the service reference again. 
```

我将证书安装在个人、受信任的人、受信任的发布者文件夹下。我无权访问服务器来检查服务器配置。但有人告诉我，这适用于不同的客户。我确定我弄乱了证书的安装。如果有人能指出我正确的方向，那就太好了。

谢谢，

埃森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:12:21.773

您必须启用跟踪才能查看服务器上发生了什么。您发布的错误消息更通用。

[http://msdn.microsoft.com/en-us/library/ff648360.aspx](http://msdn.microsoft.com/en-us/library/ff648360.aspx) http://msdn.microsoft.com/en-us/library/ms733025.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:20:21.650

首先尝试从项目中删除服务引用，从 web.config 中删除 system.ServiceModel 部分并再次添加服务引用。这将强制 VS 完全重建 system.ServiceModel 部分。如果这没有帮助，则需要额外的 wcf 客户端配置。这是如何正确配置 wcf 客户端以使用证书的绝佳示例：

[http://www.codeproject.com/Articles/28248/Securing-WCF-Services-with-Certificates](http://www.codeproject.com/Articles/28248/Securing-WCF-Services-with-Certificates)

如果在此之后您仍然遇到问题，您可能会丢失一些自定义端点行为。在这种情况下，您应该联系 wcf 服务提供商。

# c# - 自定义授权属性仅适用于 localhost

> ID：12219524
> 
> 赞同：2
> 
> 时间：2012-08-31T16:50:57.927
> 
> 标签：c#, ajax, asp.net-mvc, json, authentication

我有一个用于 Ajax 请求的自定义授权属性：

```
public class AjaxAuthorize : AuthorizeAttribute {
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) {
        UrlHelper urlHelper;

        if (filterContext.HttpContext.Request.IsAjaxRequest()) {
            urlHelper = new UrlHelper(filterContext.RequestContext);

            filterContext.HttpContext.Response.StatusCode = 401;
            //Return JSON which tells the client where the login page exists if the user wants to authenticate.
            filterContext.HttpContext.Response.Write(new JavaScriptSerializer().Serialize(
                new {
                    LoginUrl = string.Format("{0}?ReturnURL={1}", FormsAuthentication.LoginUrl, urlHelper.Encode(filterContext.HttpContext.Request.Url.PathAndQuery))
                }
            ));
            filterContext.HttpContext.Response.End();
        } else {
            base.HandleUnauthorizedRequest(filterContext);
        }
    }
} 
```

当我在本地运行应用程序时，我会从 Ajax 请求中返回 JSON 结果。但是，当我将代码放在我的 beta 服务器上时，我最终得到了 IIS 401 HTML 响应。

有没有人看到我的代码有问题，只能在本地主机上工作？此外，如果有人对返回 JSON 结果有更好的想法，我也对此持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T16:59:07.550

StackOverflow 有一些奇怪的力量，导致 OP 在发布后以不同的方式思考问题。我会在这里留下我的答案，希望它可能对其他人有所帮助。

我突然想到 IIS7 妨碍了我。我通过添加一行代码解决了这个问题：

```
filterContext.HttpContext.Response.TrySkipIisCustomErrors = true; 
```

# line - 如何找到点的坐标？

> ID：12219525
> 
> 赞同：0
> 
> 时间：2012-08-31T16:50:57.997
> 
> 标签：line, point

我在简单的二维欧几里得空间中有一组有限的点（我知道这些点的坐标）。

假设我在二维欧几里得空间中选择点 A(x1,y1) 和 B(x2,y2)。所以我有一条线AB。我需要找到这样的点 C 的坐标（实际上我需要找到点 C 是否在我的点集中），AB = AC 的长度和线 AB 和 AC 形成直角。（实际上两点应该满足这些条件：在线AB的一侧和另一侧）

这应该在恒定时间内完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:58:50.903

您基本上只想将 B 点围绕 A 点旋转 90 度，对吗？如果是这样，那么首先将 A 平移到原点，然后旋转，然后平移回来。

```
C = [-(y2-y1)+x1,x2-x1+y1]; // rotate +90 deg
C = [y2-y1+x1,-(x2-x1)+y1]; // rotate -90 deg 
```

# for-loop - 使用详细语法在 F# 嵌套 for 循环中编译错误

> ID：12219530
> 
> 赞同：2
> 
> 时间：2012-08-31T16:51:37.707
> 
> 标签：for-loop, f#, functional-programming, nested, visual-studio-2012

我是 F# 的新手，但是当我使用详细语法将 for 循环放入另一个循环时，它不会编译：

```
#light "off"

let Multiple9x9 () = 
  for i in 1 .. 9 do
    printf "\n";
    for j in 1 .. 9 do
      let k = i * j;
      printf "%d x %d = %2d " i j k ;
    done;;
  done;;
Multiple9x9 ();;
printf "\n" ;; 
```

我知道它可以与#light“on”一起使用：

```
let Multiple9x9 () = 
  for i in 1 .. 9 do
    printf "\n"
    for j in 1 .. 9 do
      let k = i * j
      printf "%d x %d = %2d " i j k
Multiple9x9 ()
printf "\n" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T16:54:44.460

如果您要`in`在每次`let`绑定后使用所需的详细语法。此外，内循环中不需要`;;`after `done`：它使外循环不完整（切断外循环`done`）。

这是更正后的代码：

```
let Multiple9x9 () = 
  for i in 1 .. 9 do
    printf "\n";
    for j in 1 .. 9 do
      let k = i * j in
      printf "%d x %d = %2d " i j k;
    done;
  done;;
Multiple9x9 ();;
printf "\n" ;; 
```

# sql - 以一对多关系返回父行和子聚合的最有效方法

> ID：12219532
> 
> 赞同：1
> 
> 时间：2012-08-31T16:51:44.807
> 
> 标签：sql, sql-server-2008

假设我有两个具有一对多关系的表。我想创建一个视图/查询来显示父行中的所有列并汇总子行中的总计。这是我经常遇到的一种情况，我不禁觉得我错过了一个更好、更明显的解决方案。我使用的一个是针对子表的多个连接，例如：

```
SELECT vt.*, COALESCE(count(mvAyes.*), 0) as Ayes, COALESCE(count(mvNoes.*), 0) as Noes  FROM VoteTable vt 
LEFT JOIN MemberVote mvAyes on mvAyes.VoteId = vt.Id AND mvAyes.Vote = 'Aye'
LEFT JOIN MemberVote mvNoes on mvNoes.VoteId = vt.Id AND mvNoes.Vote = 'No'
GROUP BY vt.Col1, vt.Col2 ... (all columns in Vote table) 
```

另一种解决方案是使用相关子查询，据我所知，它的效率很低，尽管我认为上面的多重连接解决方​​案也很低效。

那么，有没有我不知道的更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:00:19.593

是的，有一个更简单的解决方案：

```
SELECT vt.*,
       sum(case when mv.Vote = 'Aye' then 1 else 0 end) as Ayes,
       sum(case when mv.Vote = 'No' then 1 else 0 end) as Nos
FROM VoteTable vt left outer join
     MemberVote mv
     on mv.VoteId = vt.Id 
GROUP BY vt.Col1, vt.Col2 ... (all columns in Vote table) 
```

您可以通过在子查询中执行 group by 来进一步简化此操作：

```
select vt.*, mv.ayes, mv.noes
from vt left outer join
     (select VoteId, sum(case when mv.Vote = 'Aye' then 1 else 0 end) as Ayes,
             sum(case when mv.Vote = 'No' then 1 else 0 end) as Nos
      from MemberVote mv
      group by VoteId
     ) mv
     on vt.id = mv.VoteId 
```

# asp.net-mvc - EF、MVC、模型绑定和导航属性

> ID：12219533
> 
> 赞同：0
> 
> 时间：2012-08-31T16:51:47.647
> 
> 标签：asp.net-mvc, entity-framework, model-binding

我正在使用 EF5 Code First：

```
public class Scenario
{
    public int Id { get; set; }
    public  IList<Client> Clients { get; set; }
}
public class Client
{
    public int Id { get; set; }
    public string Name {get;set;}
    public int VisibilityNumber{ get; set; }
} 
```

我直接将场景对象发送到视图（MVC4，不使用视图模型类 - 可能是一个错误？，但管道代码少了很多）。在我看来，我对 Scenario.Id 使用 HiddenFor，并使用 for 循环为每个客户端 VisibilityNumber 显示一个 EditFor。

这是控制器：

```
[HttpPost]
public ActionResult Edit(int id, FormCollection formValues)
{     
if (ModelState.IsValid)
    {
        Scenario scen=GetScenarioFromDB(id);
        TryUpdateModel(scen,formValues);
        if (ModelState.IsValid)
           SaveToDb(scen);
    }
} 
```

在 TryUpdateModel 之后，对于每个 Clients 对象（从 DB 中正确加载）：

*   VisibilityNumber 设置正确
*   id设置为0，当然是坏事
*   名称设置为空

查看 MVC 源代码（DefaultModelBinder/UpdateCollection）后，我可以看到在绑定到集合时，总是会创建新项目。如果我不能解决这个问题，我想我将使用 viewModel 和 AutoMapper。我假设 MVC 团队想强迫我们使用 viewModel，而不是直接发送 EF 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:55:24.147

您不应该`scenario`在更新中从数据库中获取。相反，您应该获取绑定模型，将其附加（如果已编辑）或将其添加（如果新）到上下文中，然后保存更改。这是一种称为“断开连接的实体”的常见场景（实际上，您确实有，因为您的模型在发送到客户端时断开连接，然后返回也断开连接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:33:09.853

1.  我“修复”了 DefaultModelBinder/UpdateCollection 以便它可以与我的用例一起使用：当绑定在导航属性中向下钻取时，它使用当前对象作为模型（这很容易，因为我只进行修改，没有插入或delete) ：我可以获取 DefaultModel 源代码，将我的修复程序放入其中，并将其用作自定义模型绑定器。这很有趣，但有点脏而且过头了。
2.  但我相信最好的方法是使用特定的 ViewModel，仅使用可编辑的属性，并使用 AutoMap 将其映射到我的 EF 层次结构。但是：它具有创建子对象集合的相同问题。
3.  最后，我只是在我的视图模型和我的 EF 层次结构之间进行了一些手动映射：我几乎可以肯定我可以做一些自动的事情，它可以检测一个子项目是否被修改、插入或删除（因为每个项目都有一个 [key] 属性，但我没有时间预算来实施它。

# asp.net - 将多个文本框值保存到数据库

> ID：12219535
> 
> 赞同：1
> 
> 时间：2012-08-31T16:51:54.603
> 
> 标签：asp.net

我正在尝试将多个文本框值保存到数据库中的多行中。我的表格如下

textbox1 texbox 2 ---- 数据库中的第 1 行

textbox3 文本框 4 ------数据库中的第 2 行

编辑：我应该澄清文本框 1 和 texbox 3 在同一列中并使用相同的 param1

我一直在使用之前保存单个值

```
 cnn.Open();
    SqlTransaction tran = cnn.BeginTransaction();
    cmd.Connection = cnn;
    cmd.Transaction = tran;
    cmd.CommandText = "stored procedure";
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Connection = cnn;
    SqlParameter p1 = new SqlParameter("@param1", SqlDbType.Int);
    SqlParameter p2 = new SqlParameter("@param2", SqlDbType.Int);
    cmd.Parameters.Add(p1);
    cmd.Parameters.Add(p2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:04:15.983

如果我理解正确，请尝试

```
SqlTransaction tran = cnn.BeginTransaction();
cmd.Connection = cnn;
cmd.Transaction = tran;
cmd.CommandText = "stored procedure";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Connection = cnn;
for( int i = 0; i < 2; i++ )
{
    SqlParameter p1 = new SqlParameter("@param1", SqlDbType.Int);
    SqlParameter p2 = new SqlParameter("@param2", SqlDbType.Int);
    if( i == 0 )
    {
       p1.Value = Convert.ToInt32(textBox1.Text.Trim());     // row 1 in database
       p2.Value = Convert.ToInt32(textBox2.Text.Trim());    // row 1 in database
    }
    else
    {
       p1.Value = Convert.ToInt32(textBox3.Text.Trim());     // row 2 in database
       p2.Value = Convert.ToInt32(textBox4.Text.Trim());   // row 2 in database
    }
    cmd.Parameters.Add(p1);
    cmd.Parameters.Add(p2);

    cmd.ExecuteNonQuery(); // Execute the query
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:55:21.203

您可以尝试使用此代码

```
SqlParameter p1 = new SqlParameter("@param1", SqlDbType.Int);
 p1.Value = Convert.ToInt32(textBox1.Text.Trim());
 SqlParameter p2 = new SqlParameter("@param2", SqlDbType.Int);
 p2.Value = Convert.ToInt32(textBox2.Text.Trim()); 
```

# ajax - 使用 hashchange 加载不使用辅助导航的动态页面

> ID：12219536
> 
> 赞同：0
> 
> 时间：2012-08-31T16:51:55.120
> 
> 标签：ajax, jquery, dynamic, hashchange

关于为什么这不起作用的任何想法。我正在使用 CSS-Tricks 中的教程使用 AJAX 动态加载页面。直到我在某些页面上引入了导致页面正常加载的辅助导航之前，这都可以正常工作。

这是我正在使用的代码。我正在使用类来设置不同导航区域的样式。

```
$(function() {

var newHash      = "",
    $mainContent = $("#main-content"),
    $pageWrap    = $("#page-wrap"),
    baseHeight   = 0,
    $el;

$pageWrap.height($pageWrap.height());
baseHeight = $pageWrap.height() - $mainContent.height();

$("nav").delegate("a", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
});

$(window).bind('hashchange', function(){

    newHash = window.location.hash.substring(1);

    if (newHash) {
        $mainContent
            .find("#guts")
            .fadeOut(200, function() {
                $mainContent.hide().load(newHash + " #guts", function() {
                    $mainContent.fadeIn(200, function() {
                        $pageWrap.animate({
                            height: baseHeight + $mainContent.height() + "px"
                        });
                    });
                    $("nav a").removeClass("current");
                    $("nav a[href="+newHash+"]").addClass("current");
                });
            });
    };

});

$(window).trigger('hashchange'); 
```

});

网站：[http ://darynjohnson.com/Medical%20Futures/about.php](http://darynjohnson.com/Medical%20Futures/about.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:09:10.197

这些新创建的链接没有绑定任何事件，因为您在未更改的对象上设置了 delagate 函数。具有相同标签（此处为“nav”）的新添加对象不会延迟。

利用：

```
$('#page').delegate("nav a", "click", function() {
  window.location.hash = $(this).attr("href");
  return false;
}); 
```

另外我建议您将 jQuery 升级到最新版本并将 delegate() 替换为 on()

# java - 级联 MenuItem 加速器的 SWT 问题

> ID：12219537
> 
> 赞同：0
> 
> 时间：2012-08-31T16:51:59.010
> 
> 标签：java, menu, swt

按下加速键组合时，具有**SWT.CASCADE**样式（如“文件”）的 MenuItem 对象不会下拉。

在下面的示例中，按 Alt-F 会触发选择事件（我在控制台中看到“文件”），但菜单本身不会下拉。我也找不到以编程方式使菜单下拉的方法。任何想法？

（我使用的包是 org.eclipse.swt.win32.win32.x86_64_3.100.0.v4233d.jar 与当前版本的 Eclipse Juno 一起提供。）

```
public class MenuTest {
    public static void main(String[] args) {
        Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());

        Menu menu = new Menu(shell, SWT.BAR);

        MenuItem item = new MenuItem(menu, SWT.CASCADE);
        item.setText("File");
        item.setAccelerator(SWT.ALT | 'F');
        Menu dropMenu = new Menu(shell, SWT.DROP_DOWN);

        item.setMenu(dropMenu);
        item.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent event) {
                System.out.println("File");
            }
        });

        item = new MenuItem(dropMenu, SWT.NULL);
        item.setText("Close");
        item.setAccelerator(SWT.ALT | SWT.F4);
        item.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent event) {
                System.out.println("Close");
                shell.dispose();
            }
        });

        shell.setMenuBar(menu);

        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:18:18.143

有***`nothing wrong`***你的代码，它按预期工作。默认情况下，在 Windows 操作系统上，当用户按下 Alt 键并且使用 Esc 键失去输入焦点时，菜单栏会接收输入焦点（请参阅[键盘辅助功能部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511500.aspx)）。

现在，加速器就像一个热键/组合，可以让人们的生活更轻松。在您的场景中，当您按下在菜单上设置焦点的`ALT + F`默认行为时`ALT`，将被覆盖。而且，这就是触发菜单侦听器但未显示下拉菜单的原因。

### 可能的解决方案

1.  而不是`item.setAccelerator(SWT.ALT | 'F');`做这样的事情`item.setAccelerator(SWT.MOD1 | 'F');`。**其中** `MOD1`，`MOD2` **..** `MOD4`是键盘和/或鼠标事件掩码，指示在生成事件时在键盘上按下了 MOD1 键。
2.  在 Windows 操作系统***`you need not`***上为最顶层菜单设置加速器。而是使用`mnemonic`. 例如，`item.setText("&File");`。有关更多详细信息，请参见 javadoc `setText()`。
3.  或者，更彻底地[如何禁用 Alt 键的正常行为？](https://stackoverflow.com/questions/9627379/how-to-disable-normal-behaviour-of-alt-key)（它是一个 C++ 解决方案）

### 助记符的结果

见下划线`F`。`File`

![在此处输入图像描述](../Images/45c09d476a41fd13ab695b934bbaf38c.png)

# django - 登录会导致 Django 中的 /accounts/profile/

> ID：12219539
> 
> 赞同：18
> 
> 时间：2012-08-31T16:52:10.150
> 
> 标签：django

我为用户创建了用户配置文件并已添加

```
AUTH_PROFILE_MODULE = 'app.ModelName' 
```

但是当用户成功登录时，他/她默认被重定向到/accounts/profile/。

如何改变这个？我希望他们去 /profile/ 并为他们创建了一个视图。

```
def Profile(request):
    '''
    profile view
    '''
    return render(request,'profile.html') 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-31T16:56:36.450

在您的 settings.py 中更改[LOGIN_REDIRECT_URL](https://docs.djangoproject.com/en/dev/ref/settings/#login-redirect-url)的值。

# javascript - Javascript：长度不适用于对象内部的数组？

> ID：12219541
> 
> 赞同：0
> 
> 时间：2012-08-31T16:52:12.123
> 
> 标签：javascript, arrays, json

我想创建一个对象，它`object.a`是一个数组，而`object.b`它的长度是它的长度，这就是我所拥有的：

```
var object = {
   a:[1,2,3,2],
   b: this.a.length
}
alert(b); 
```

但这不会提醒 4\. 有问题`b: this.a.length`：

```
Uncaught TypeError: Cannot read property 'length' of undefined 
```

* * *

如果有人可以向我解释为什么会发生这种情况，我会很高兴。

如果我这样写，它实际上会警告 4：

```
 var object = {
       a:[1,2,3,2]
 }
    alert(object.a.length); 
```

* * *

[更新] 即使以这种方式创建对象，它也不起作用：

```
var object = {
   a:[1,2,3,2],
   b：object.a.length
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T16:54:56.817

主要问题是，在像您的第一个示例这样的 javascript 数据声明中，`this`未将值设置为正在定义的对象。因此，由于`this`不是您的对象，因此`this.a`在对象声明中不会引用`a`您的对象的属性。

它是您的数据声明之前的上下文中的任何内容。如果那是全局上下文，那么`this`将是`window`对象并且`this.a`可能不存在。如果它不存在（例如它是`undefined`），那么当您尝试引用 时`this.a.length`，您正在尝试`.length`从某物不是对象中读取属性，这是一个 javscript 错误。

* * *

至于解决这个问题，将数组的长度复制到另一个属性通常是一个坏主意。这只是给你一个机会，它是错误的，并且与数组的实际长度不同步。如果你想要数组的长度，你应该根据需要检索它：

```
object.a.length 
```

如果您真的希望它成为一个属性（具有固定值并且在更改时不会`a`更改），您可以在创建对象后设置它：

```
var object = {
   a:[1,2,3,2],
};
object.b = object.a.length;
alert(object.b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:57:27.310

一个对象的所有属性都是一次实例化的，所以`this`在创建属性时指的是窗口对象`b`。您需要推迟对`b`' 值的解释，一种方法是改用函数：

```
var object = {
    a:[1,2,3,2],
    b: function () {
        return this.a.length;
    }
} 
```

另一种方法是`b`在声明对象字面量后添加属性：

```
var object = {
    a:[1,2,3,2]
}
object.b = object.a.length; 
```

最后，在较新的浏览器上，您可以利用 getter：

```
var object = {
    a:[1,2,3,2],
    get b() {
        return this.a.length;            
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T16:58:09.217

`b`创建对象后添加：

```
var object = {
    a:[1,2,3,2]
}

object.b = object.a.length 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T16:56:03.657

在第一个示例中，“b”未定义，因为它正在寻找名为“b”的变量，而不是对象“object”内的属性“b”。您应该改用 object.b。

# opengl - glDrawArrays 仅在原点绘制一个点（在 ubuntu 上带有 glut 的 OpenGL）

> ID：12219543
> 
> 赞同：1
> 
> 时间：2012-08-31T16:52:13.603
> 
> 标签：opengl, freeglut

我正在尝试使用 OpenGL 显示一个简单的三角形（我在 Ubuntu 12.04 上使用 freeglut3-dev 和 libglew1.6 并在 NetBeans 7.2 中进行编码）。代码编译和链接没有问题，但仅显示一个空白屏幕（具有初始化颜色），但在原点仅显示一个白点（而不是每个三角形顶点的 3 个点）。我的代码如下：

```
#include <stdio.h>
#include <GL/glew.h>
#include <GL/freeglut.h>
#include "math_3d.h"

GLuint VBO;

static void RenderSceneCB()
{
    glClear(GL_COLOR_BUFFER_BIT);

    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableVertexAttribArray(0);

    glutSwapBuffers();
}

static void InitializeGlutCallbacks()
{
    glutDisplayFunc(RenderSceneCB);
}

static void CreateVertexBuffer()
{
    Vector3f Vertices[3];
    Vertices[0] = Vector3f(-1.0f, -1.0f, 0.0f);
    Vertices[1] = Vector3f(1.0f, -1.0f, 0.0f);
    Vertices[2] = Vector3f(0.0f, 1.0f, 0.0f);

    glGenBuffers(1, &VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGBA);
    glutInitWindowSize(1024, 768);
    glutInitWindowPosition(100, 100);
    glutCreateWindow("Tutorial 03");

    InitializeGlutCallbacks();

    // Must be done after glut is initialized!
    GLenum res = glewInit();
    if (res != GLEW_OK) {
      fprintf(stderr, "Error: '%s'\n", glewGetErrorString(res));
      return 1;
    }

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);

    CreateVertexBuffer();

    glutMainLoop();

    return 0;
} 
```

这是我看到的截图： ![](../Images/3264ad4a79a5eb68c3ef7a578ffe4ebd.png)

这是它应该是什么样子的图片： ![](../Images/7018404a7573e06eece78f71088d0d2f.png)

我正在关注[本教程](http://ogldev.atspace.co.uk/www/tutorial03/tutorial03.html)。Vector3f 只是一个具有三个数据成员的结构：`x`, `y`, `z`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:55:32.950

阅读教程的下一章，它解释了一切。

顶点只是一组属性，它们由它们的编号（在您的情况下为 0）引用。然而，这个数字并没有告诉 GL 数据是什么，以及如何使用它们。使用旧 API，每个属性都有特定的顶点规范函数；`glVertexPointer()`用于提供位置属性、`glTexCoordPointer()`纹理坐标等。今天，您可以通过着色器以您想要的方式使用属性，这将在您的教程的下一章中进行解释。

# iphone - 将文本/数据以及特殊字符作为参数添加到 iphone 中的 api(url)

> ID：12219547
> 
> 赞同：2
> 
> 时间：2012-08-31T16:52:20.850
> 
> 标签：iphone, ios

我是 Obj-c 的新手。我正在向 url 添加像文本这样的参数（文本也可能有特殊字符）。但是 url 显示为零，它没有从字符串中获取值。

例如：

```
NSString*strUrl=[NSString stringWithFormat:@"hi how@!#$%^^&*()_=+   r u <>,./ where r u"];

NSString *strMainUrl=[NSString stringWithFormat:@"http://google.com/API/index.php action=listIt&data=%@",strUrl];

NSString *encodeStr = [string stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL *url=[NSURL URLWithString:encodeStr];

NSLog(@" url is =%@",url); 
```

但 url 显示 nil 值。它没有采用“encodeStr”值。我该如何解决这个问题。请帮助我。

我试过了..

```
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:str] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:30.0]; 
```

并且

`strEncode=[strEncode stringByReplacingPercentEscapesUsingEncoding:NSASCIIStringEncoding];`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:03:24.083

[从这里](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)修改的例子：

```
#import <Foundation/Foundation.h>

// In case you're unfamiliar, this is a category, which allows us to add methods
// to an existing class, even if we didn't create it. It's a nice alternative
// to subclassing.
//
// In this case, we're extending NSString
@interface NSString (URLEncoding)
-(NSString *)urlEncodeUsingEncoding:(NSStringEncoding)encoding;
@end

@implementation NSString (URLEncoding)
-(NSString *)urlEncodeUsingEncoding:(NSStringEncoding)encoding {
    return (NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
               (CFStringRef)self,
               NULL,
               (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
               CFStringConvertNSStringEncodingToEncoding(encoding));
}
@end

int main(int argc, char *argv[]) {
    @autoreleasepool 
    {
        NSString *raw = @"hi how@!#$%^^&*()_=+   r u <>,./ where r u";

            // note also, that your string omits the '?' in the URL
        NSString *url = [NSString stringWithFormat:@"http://google.com/API/index.php?action=listIt&data=%@",
                    [raw urlEncodeUsingEncoding:NSUTF8StringEncoding]];

        NSURL *finalUrl = [NSURL URLWithString:url];

        NSLog(@"%@", finalUrl);
    }
} 
```

输出：

```
http://google.com/API/index.php?action=listIt&data=hi%20how%40%21%23%24%25%5E%5E%26%2A%28%29_%3D%2B%20%20%20r%20u%20%3C%3E%2C.%2F%20where%20r%20u 
```

# javascript - jqplot 在 IE7 中不能正常工作

> ID：12219554
> 
> 赞同：0
> 
> 时间：2012-08-31T16:52:51.367
> 
> 标签：javascript, jquery, html, internet-explorer-7, jqplot

得到了一系列有关在 IE7 中运行 JavaScript 的兼容性问题的问题。我正在使用 jqplot 生成图形，在 Chrome 和 IE8 中运行良好，但在 IE7 中不起作用。

为了诊断，我只运行了最简单的代码`$.jqplot('chart1', s1)`，它可以在 IE7 中运行。所以我认为问题在于所有选项（传说除外）。谁能给我一些建议？IE7 是否只接受某些类型的语法？

代码和[演示](http://jsfiddle.net/godhong/Htp2A/)：

```
<div id="chart1" style="margin-top:20px; margin-left:20px; width:650px; height:400px;"></div>
<!--[if lt IE 9]>
<script src="http://www.prioritymarketers.com/jqplot/src/excanvas.min.js"></script>
<![endif]-->​

<script>
$.jqplot.config.enablePlugins = true;

var ms= 2
var s1 =[[5.0, 23.0, 131.0, 779.0, 4667.0, 27995.0, 167963.0, 1007771.0, 6046619.0, 36279707.0], [13.0, 85.0, 517.0, 3109.0, 18661.0, 111973.0, 671845.0, 4031077.0, 24186469.0, 145118821.0]]

L = [{label: 'Stage 1'}];

var i = 2
while (i <= ms) {
    L.push({label: 'Stage' + i});
    i++;
}

$.jqplot('chart1', s1, {

    seriesDefaults: {
        showMarker: false,
        pointLabels: {
            show: false
        },
    },

    series: L,
    axes: {
        xaxis: {
            label: 'Time units',
            pad: 0,
        },
        yaxis: {
            label: 'Number of individuals',
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
            pad: 0
        }
    },
    legend: {
        show: true,
        location: 'nw',
        placement: 'inside',
        fontSize: '11px'
    }
})
</script>
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:26:58.473

我注意到，当一组选项中的最后一个元素后面有逗号时，IE 并不是一个大粉丝。

**例子：**

这：

```
 seriesDefaults: {
        showMarker: false,
        pointLabels: {
            show: false
        },
    }, 
```

会成为：

```
seriesDefaults: {
    showMarker: false,
    pointLabels: {
        show: false
    }}, 
```

细微的差别，但它可能会或可能不会解决您的问题。

尝试将您的绘图功能更改为：

```
$.jqplot('chart1', s1, {

    seriesDefaults: {
        showMarker: false,
        pointLabels: {
            show: false
        }
    },

    series: L,
    axes: {
        xaxis: {
            label: 'Time units',
            pad: 0
        },
        yaxis: {
            label: 'Number of individuals',
            labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
            pad: 0
        }
    },
    legend: {
        show: true,
        location: 'nw',
        placement: 'inside',
        fontSize: '11px'
    }
}) 
```

**另外**，上次我使用 excanvas 时，我不得不确保它是最新版本。

链接：[http ://code.google.com/p/explorercanvas/downloads/list](http://code.google.com/p/explorercanvas/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:20:41.887

从[文档](http://piwik.org/blog/2011/06/piwik-innovative-with-javascript-canvas-chart-and-contributing-by-jqplot-creator/)

> canvas 标签和 jqPlot 在大多数浏览器上都能正常工作。jqPlot 使用的所有画布功能都支持 Firefox 3.5+、Safari 4+、Chrome 8.0+、Opera 10+ 和 IE 9+。Google 的 excanvas.js 库支持 IE 6 - 8。

你说`excanvas.js`图书馆吗？如果您这样做，更多功能可能会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:27:14.527

它适用于您的其他版本的 IE 吗？我有类似的问题，但在我的情况下它不适用于 IE7 和 IE8 。我不记得我是如何修复它的。

如果你检查 jquery.jqplot.js 有一行确保低于 IE9 的版本使用 excanvas.js

确保有如下一行

```
 * > <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="excanvas.js"></script><![endif]--> 
```

否则尝试在此序列中包含文件

```
<link rel="stylesheet" type="text/css" href="../libs/jqplot/jquery.jqplot.css" />

<!--[if lt IE 9]><script language="javascript" type="text/javascript" src="../libs/jqplot/excanvas.js"></script><![endif]-->

  <!-- BEGIN: load jqplot -->
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jquery.jqplot.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.barRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.pieRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.highlighter.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.pointLabels.js"></script>

  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.canvasTextRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.categoryAxisRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="../libs/jqplot/jqplot.canvasAxisLabelRenderer.js"></script>

  <!-- END: load jqplot --> 
```

# java - 与给定数至少有一个公共数字的数的除数数

> ID：12219555
> 
> 赞同：-9
> 
> 时间：2012-08-31T16:52:57.027
> 
> 标签：java, algorithm, math, numbers

正如问题所说。我需要计算给定数字的除数数量，比如 x。但限制是除数必须至少有一位与给定数字 x 相同的数字。

说 10 答案将是 2。（1,10,2,5 是除数，但只有 1,10 与 10 共享相同的数字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:02:32.183

我认为这应该有效：

```
private static boolean containCommonDigit(int n1, int n2) {
    for (char c : ("" + n1).toCharArray())
        if (("" + n2).contains("" + c))
            return true;
    return false;
}

public static int countSpecialDivisors(int n) {
    int count = 0;
    for (int i = 1 ; i <= n / 2 ; i++)
        if (n % i == 0 && containCommonDigit(n, i))
            count++;
    return count + 1;  // since we are looping to n/2
} 
```

请注意，我们只是循环到，`n/2`因为我们知道`n`除了自身之外，它不会有大于自身一半的除数，这解释了为什么我们在末尾添加 1（显然，`n`与自身共享至少一个公共数字）。

有关进一步优化的想法，请参阅评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:02:12.277

1）您需要找到数字的所有除数，这可能很棘手 - 请参阅[http://en.wikipedia.org/wiki/Divisor_function](http://en.wikipedia.org/wiki/Divisor_function)

2）接下来，由数字和它的除数给出 - 你需要提取所有数字，这很简单 - 只需将除以 10 的余数并继续小数部分。将数字放入 Set

3）在集合上使用 removeAll ，如果集合改变 - 那么有共同的数字

用你找到的下一个除数重复步骤 2/3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:41:51.073

有一种非常简单的方法可以做到这一点。

```
 public String (int numberToBeFactored){
      String result = "1, ";

      for(int i = 2; i < numberToBeFactored){
           if (numberToBeFactored % i == 0){
               result = result + Integer.toString(i) + ", ";
           }
       }
       result.trim();
       return result; 

   } 
```

# c++ - MVC 模式，更新多个视图

> ID：12219562
> 
> 赞同：0
> 
> 时间：2012-08-31T16:53:47.770
> 
> 标签：c++, model-view-controller, design-patterns

我的模型-视图-控制器模式中有多个视图（带有选定项目的标签和列表框）列表框 onSelect 事件调用控制器**setModel(new_model_val)**，它更新视图并突出显示列表框，因此存在循环调用。

据我了解，我必须通过 sender 来定义要更新的视图（所以我得到类似**setModel(new_model_val, sender)**的东西？这是个好主意吗？使用什么类型的发送者（枚举、原始指针等）？

# java - 如何在模式中正确声明扩展？

> ID：12219569
> 
> 赞同：0
> 
> 时间：2012-08-31T16:54:16.607
> 
> 标签：java, xml, inheritance, schema

在下面的模式文件中，我有一个`Stat`扩展`Entity`. 据我所知，[我遵循 w3 的示例](http://www.w3schools.com/schema/el_extension.asp)，但是当我通过 java 解析架构（以及使用架构的 xml）时`DocumentBuilderFactory`，`SchemaFactory`我得到了这个异常：

```
org.xml.sax.SAXParseException; systemId: file:/schema/characterschema.xsd; 
    src-resolve.4.2: Error resolving component 'cg:Entity'. It was detected that
    'cg:Entity' is in namespace 'http://www.schemas.theliraeffect.com/chargen/entity',
    but components from this namespace are not referenceable from schema document
    'file:/home/andrew/QuasiWorkspace/CharacterGenerator/./schema/characterschema.xsd'.
    If this is the incorrect namespace, perhaps the prefix of 'cg:Entity' needs
    to be changed. If this is the correct namespace, then an appropriate 'import'
    tag should be added to '/schema/characterschema.xsd'. 
```

因此，似乎我在架构中看不到我的命名空间。我是否需要将我的架构导入到自身中，还是我完全误读了这个异常？难道是我错误地声明了我的架构？

这是我的参考架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:cg="http://www.schemas.theliraeffect.com/chargen/entity"
    elementFormDefault="qualified">

    <xs:element name="Entity">
        <xs:complexType>
            <xs:attribute name="id" type="xs:string" use="required"/>                    
            <xs:attribute name="name" type="xs:string"/>
            <xs:attribute name="description" type="xs:string"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="Stat">
        <xs:complexType>
            <xs:complexContent>
                <xs:extension base="cg:Entity">
                    <xs:sequence>
                        <xs:element name="table" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>                        
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:28:01.290

您的架构有两个问题。首先，您没有声明 a `targetNamespace`，因此您定义的`Entity`and`Stat`元素不在命名空间中。其次，一个类型不能扩展一个元素，只能扩展另一个类型。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:cg="http://www.schemas.theliraeffect.com/chargen/entity"
    targetNamespace="http://www.schemas.theliraeffect.com/chargen/entity"
    elementFormDefault="qualified">

    <xs:complexType name="EntityType">
        <xs:attribute name="id" type="xs:string" use="required"/>                    
        <xs:attribute name="name" type="xs:string"/>
        <xs:attribute name="description" type="xs:string"/>
    </xs:complexType>

    <xs:element name="Entity" type="cg:EntityType" />

    <xs:complexType name="StatType">
        <xs:complexContent>
            <xs:extension base="cg:EntityType">
                <xs:sequence>
                    <xs:element name="table" type="xs:string" minOccurs="0"
                           maxOccurs="unbounded"/>                        
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>

    <xs:element name="Stat" type="cg:StatType" />
</xs:schema> 
```

在这里，我定义了两种*类型*，其中一种扩展了另一种，以及各自类型的两个顶级元素。所有顶级类型和元素都定义`targetNamespace`在模式中，并且内部的嵌套`table`元素`StatType`也在此命名空间中，因为`elementFormDefault="qualified"`- 没有 this`Entity`和`Stat`元素将在`http://www.schemas.theliraeffect.com/chargen/entity`命名空间中，但`table`元素将不在命名空间中。

# javascript - RequireJs：错误的模块顺序

> ID：12219570
> 
> 赞同：1
> 
> 时间：2012-08-31T16:54:24.263
> 
> 标签：javascript, backbone.js, routes, requirejs, amd

我得到了以下 router.js：

```
define(['jquery', 'underscore', 'backbone', 'views/settings/index'], function($, _, Backbone, SettingsView) {

    var Router = Backbone.Router.extend({

        container: $('div.main'),

        routes: {
                "settings": "settings"
                , "settings/:query": "settings"
        },

        settings: function(query) {
            this.container.html(SettingsView.render().el);
        }

    });

    if (Router._instance) return Router._instance;

    Router._instance = new Router();

    return Router._instance;

}); 
```

路由器在 main.js 文件中被调用，该文件在 requirejs 配置中被标记为第一个依赖项：

```
define(['jquery', 'underscore', 'backbone', 'router'], function($, _, Backbone, router) {

    // ajax settings (sent cors cookies)
    $.ajaxSetup({ xhrFields: { withCredentials: true } });

    // register master router
    window.router = router;

    // start backbone history
    Backbone.history.start({ root: "/" });          

}); 
```

在某些方面，我现在想做：

```
define(['jquery', 'underscore', 'backbone', 'router'], function($, _, Backbone, router) {

    var View = Backbone.View.extend({

        initialize: function() {
            router.on('route:settings', this.change, this);
        },

        change: function(query) {
            // load some new content for example
        }

    });

    return View;

}); 
```

比我收到此错误消息：

```
Uncaught TypeError: Cannot call method 'on' of undefined 
```

**更新：** 我为每个模块添加了一个 console.log。所以我知道模块的执行顺序。我提到 requirejs 有错误的顺序：

```
view.js -> main.js -> router.js 
```

代替：

```
router.js -> main.js -> view.js 
```

让我们看看我如何解决这个问题

**UPDATE2：** 我现在将路由器事件绑定部分包装到一个 setTimeout 循环中：

```
 setTimeout(function() {
            window.router.on('route:settings', this.select, this);        
        }.bind(this), 20); 
```

看看它的工作原理！

这确实只是一个修复，但仍然是一个修复:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:03:55.650

你为什么要在你的路由器上创建一个单例实例？

据我所知，Requirejs 只解析每个模块一次，并且就我对任何体面的模块加载器的期望而言。

```
#router.js
define(['jquery', 'underscore', 'backbone', 'views/settings/index'], 
  function($, _, Backbone, SettingsView) {
  //your code omitted ...

  //no need to do this
  //if (Router._instance) return Router._instance;
  //Router._instance = new Router();
  //return Router._instance;

  //this should work as well and give you a "singleton" instance
  return new Router(); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:11:30.867

1.  请检查您提供给 requirejs.config() 的名称/路径是否正确。我已经撞了几次墙，因为我有一个轻微的错字。requirejs 在这种情况下不会返回任何错误，但遗憾的是只是未定义。
2.  如果您确定没有错字，我会尝试将 main.js 包含为对视图定义的显式依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:09:13.530

`Router`我认为您需要在 first 的末尾返回对对象的引用`define`。

```
define(['jquery', 'underscore', 'backbone', 'views/settings/index'], function($, _, Backbone, SettingsView) {

    var Router = Backbone.Router.extend({

        container: $('div.main'),

        routes: {
            "settings": "settings"
            , "settings/:query": "settings"
        },

        settings: function(query) {
            this.container.html(SettingsView.render().el);
        }

    });

    var Singletonizer = function(Singleton) {
        if (Singleton._instance) return Singleton._instance;

        Singleton._instance = new Singleton();

        Singletonizer(Singleton);
    };

    return Singletonizer(Router);
}); 
```

# javascript - 如何使用浏览器滚动条驱动 div 的位置（如 Paranorman 网站所示）

> ID：12219574
> 
> 赞同：0
> 
> 时间：2012-08-31T16:54:50.147
> 
> 标签：javascript, jquery, html, scroll

我试图弄清楚这是如何完成的：

[http://www.paranorman.com/](http://www.paranorman.com/)

在这个站点中，浏览器窗口的滚动条驱动 DIV 的滚动位置。但是，即使该窗口完全适合您的浏览器窗口，它也有一个滚动条。

我需要创建一个包含将由滚动条驱动的容器元素的站点，即使站点容器的大小适合大多数桌面浏览器窗口而无需滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:05:02.337

这是通过诡计完成的，其中主体（或其他一些元素）具有较大的尺寸以便获得滚动条，并且另一个元素放置在位置固定且高度/宽度为 100% 的滚动元素前面并占据整个屏幕，所以滚动的元素不可见。然后就是根据滚动条的移动量获取 scrollTop/Left 值并在前固定元素内移动元素，使其看起来像正在滚动，当您真正使用基于 scrollTop/Left 的 javascript 移动内容时值，我们称之为视差。这一切听起来比实际上更难。

# latex - 使用 doxygen 的 LaTeX 中的单个函数文档

> ID：12219578
> 
> 赞同：3
> 
> 时间：2012-08-31T16:55:19.540
> 
> 标签：latex, doxygen

我正在用 LaTeX 为某些软件编写各种手册。我被限制使用*文章*类。我必须在手册中包含各个 c++ 类的文档。我正在为此寻找 doxygen，但我从未使用过 doxygen（如果有更好的方法，请告诉我）。

我可以让 doxygen 为我的整个项目生成一个不错的 LaTeX (--> pdf) 文件。但我想做的是以某种方式提取每个类的 LaTeX 源并将其放入我的 LaTeX 手册源中的适当位置。

我已经尝试将 refman.tex（由 doxygen 生成）中的所有序言内容放在*我的*序言中，然后在文档中使用`\input`包含单个类的 tex 文件。在清理了一些冲突之后，我找到了一个我不知道如何克服的冲突。doxygen 生成的 doxygen.sty 文件引用了`\chaptermark`，但我相信这是在*book*类中定义的宏。

所以 1.) 我是不是走错了路？2.）是否可以强制 Doxygen 在*文章*类中生成代码？3.) 还有什么吗？

-加里普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:52:42.273

您可以通过在 doxygen 配置文件中设置为来使 doxygen 生成使用*文章*文档类的文档。`COMPACT_LATEX``YES`

# javascript - 多个 Ember.Select 绑定到单个控制器，选择在 Firefox 中一开始不同步

> ID：12219587
> 
> 赞同：0
> 
> 时间：2012-08-31T16:56:04.637
> 
> 标签：javascript, firefox, ember.js

在此示例中：http: [//jsfiddle.net/5WrcD/2/](http://jsfiddle.net/5WrcD/2/)我有两个绑定到单个控制器`Ember.Select`的 s 。`selection`使用 Firefox（我正在运行版本 15.0 Mac），当我更改第一个的值时`select`，第二个`select`不会改变。如果我然后继续更改第二个的值`select`以匹配第一个，则对任何一个的所有后续更改都`select`将传播到另一个。使用 Chrome/Safari，`select`s 从一开始就保持同步。

这可能是 Ember 或 Firefox 中的错误吗？`select`期望s 保持同步我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:30:45.027

这可能不是 Ember 的错误，但我猜是 Firefox 的问题。

如果您检查 Firefox 中的 DOM 检查器（Firebug），您会看到选择了正确的选项，两个选择菜单同步更改。只是在我们更改几次之前它不会显示在显示中。

所以`Ember`无论如何设置`selected="selected"`正确`option`，Firefox在ui中显示正确项目时遇到问题。

我在这里为这个问题创建了另一张票：

[HTML 选择，在 DOM 中选择了正确的选项，但在 Firefox 中显示了错误的项目](https://stackoverflow.com/questions/12224000/html-select-correct-option-selected-in-dom-but-wrong-item-shown-in-firefox)

# 更新

在讨论了另一个问题后，发现设置`content:''`将解决Firefox中的问题。因此，如果您不想要任何默认选择，则最好不要使用它。

例如：http: [//jsfiddle.net/5WrcD/3/show/](http://jsfiddle.net/5WrcD/3/show/)

学分：[vol7ron](https://stackoverflow.com/users/183181/vol7ron)

# android - Android：如何判断相机何时激活

> ID：12219595
> 
> 赞同：3
> 
> 时间：2012-08-31T16:56:40.337
> 
> 标签：android, camera

我正在编写一个Android应用程序，用户可以在后台运行以检测相机何时打开（由用户或其他应用程序）。即使在其他应用程序（如 facebook、instagram）不使用默认 android 相机应用程序的情况下，这也应该检测到。

我一直在搜索，但没有看到在激活相机时发送的任何广播。到目前为止，我已经看到如果相机已被另一个应用程序使用，Camera.open() 会引发 RuntimeException。所以一种方法是继续轮询Camera.open()，但这确实很昂贵。有更好的选择吗？

谢谢

编辑：对不起，我没有清楚地提到它，但我想做的是创建某种相机使用日志：打开/关闭的时间，持续时间等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:01:33.553

内部发生的是 Camera API 与 CameraService 对话，CameraService 有 mBusy 变量来跟踪相机是否忙。并且没有 API 可以让这个 mBusy 标志停止服务（无需调用 open()）

我可能是错的，因为我只是看了一眼。

您可以下载 Android 源代码 (http://source.android.com/) 并自己仔细查看。

您可能感兴趣的文件是：

\frameworks\base\services\camera\libcameraservice\CameraService.cpp

\frameworks\base\libs\camera\Camera.cpp

\frameworks\base\core\java\android\hardware\Camera.java

\frameworks\base\core\jni\android_hardware_Camera.cpp

另一个想法。尝试查看日志。在这种情况下，如果没有关闭摄像头服务/API 的日志，您可以解析日志以检查摄像头何时打开或关闭。但是，它可能无法在 OS 4.1 中运行，因为 Google 限制了系统日志的读取。

# sql-server - SQL查询序列化到经典ASP中的json文件

> ID：12219597
> 
> 赞同：2
> 
> 时间：2012-08-31T16:56:58.393
> 
> 标签：sql-server, json, asp-classic

我正在尝试将 ASP 中的 SQL 查询序列化为这样的 json 对象：

[["name1","phone1","email1","address1"],["name2","phone2","email2","address2"]]

我做了两个循环来遍历数据库的列和行，这就是我到目前为止的方式；

```
<!--#include file="JSON_2.0.4.asp"-->

SQL = "SELECT name, phone, email, address FROM clients"
Set Connection = Server.CreateObject("ADODB.Connection")
Set Recordset = Server.CreateObject("ADODB.Recordset")
Connection.Open "Provider=sqloledb;SERVER=localhost;DATABASE=mydatabase;UID=;PWD=1234;"  
Recordset.Open SQL,Connection

rsArray = Recordset.getRows()       

ReDim arrObj(UBound(rsArray, 2) - 1)

Dim i, j

For i = 1 To UBound(rsArray, 2)

    ReDim arrProp(UBound(rsArray, 1))

    For j = 0 To UBound(rsArray, 1)
        arrProp(j) = rsArray(j, i)
    Next 

Next

Response.Write toJSON(arrProp) 
```

我在这里做错了什么，我试图改变每一个可能的值。结果只给了我表格的最后一行（如下所示），当然我想从表格中检索每一行。提前感谢您提供任何可能的答案。

[“La Musical Fashion”，“214478457”，“musical@fashion.pt”，“Av. Quinta Grande，8 R/C Esq.”]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T18:11:25.347

需要建立一个`Array of Arrays`like`Array(Array(col1,col2,col3), Array(col1,col2,col3))`才能通过获得想要的结果`toJSON`。
你可以用下面的方法来做到这一点。

```
rsArray = Recordset.getRows()

ReDim Rows(UBound(rsArray, 2))
ReDim Row(UBound(rsArray, 1))
For i = 0 To UBound(Rows)
    For j = 0 To UBound(Row)
        Row(j) = rsArray(j, i)
    Next 
    Rows(i) = Row
Next
Response.Write toJSON(Rows) 
```

# c# - 不使用 ShowDialog 打印会产生空白页

> ID：12219599
> 
> 赞同：8
> 
> 时间：2012-08-31T16:57:26.577
> 
> 标签：c#, wpf, printing

我在从 WPF 项目打印时遇到了一个奇怪的问题。我正在打印应用程序的屏幕截图以用于报告目的，并且一切正常。当前用户按下打印，打印对话框出现，他们打印出捕获的图像。

但是，我希望能够直接打印到默认打印机而不显示对话框。这应该很容易通过注释掉`ShowDialog()`语句并让其余的发生。打印机仍在打印，但页面始终为空白。谁能解释这种行为？

```
private void PrintCurrentScreen()
{
    PrintDialog PD = new PrintDialog();
    PD.PrintTicket.OutputColor = OutputColor.Grayscale;
    PD.PrintTicket.OutputQuality = OutputQuality.Draft;

    PrintTicket PT = new PrintTicket();
    PT.PageOrientation = PageOrientation.Landscape;
    PT.CopyCount = 1;
    PT.PageBorderless = System.Printing.PageBorderless.Borderless;

    //---Blank pages print when commented out---//
    //if (PD.ShowDialog() == true)
    //{
    PD.PrintTicket = PT;

    DrawingVisual DV = new DrawingVisual();
    DV.Offset = new Vector(20, 20);
    DrawingContext DC = DV.RenderOpen();
    DC.DrawImage(previewimage.Source, new Rect(new Size(PD.PrintableAreaWidth - 40, PD.PrintableAreaHeight - 40)));
    DC.Close();

    PD.PrintVisual(DV, "TEST");
    //}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:59:45.950

尝试在 printvisual 之前执行 Measure、Arrange 和 UpdateLayout，如下所示：

```
DV.Measure(new System.Windows.Size(PD.PrintableAreaWidth,
              PD.PrintableAreaHeight));
DV.Arrange(new System.Windows.Rect(new System.Windows.Point(0, 0),
              DV.DesiredSize));

DV.UpdateLayout();
PD.PrintVisual(DV, "TEST"); 
```

# java - 将 GridPane 格式化为在一行中具有不同的背景颜色

> ID：12219601
> 
> 赞同：6
> 
> 时间：2012-08-31T16:57:31.423
> 
> 标签：java, javafx-2

```
gridPane.setStyle("-fx-background-color: #C0C0C0;"); 
```

工作并设置整个网格窗格的背景颜色，但我如何为某一行设置它，例如。第 5 行？

我需要为此使用样式表吗？我更喜欢用Java来做。

**编辑：**每一行都包含一个标签，但标签不会覆盖窗格中的整行。如果我可以将标签设置为覆盖整行，然后设置标签的背景颜色，这将是一种解决方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T15:25:45.467

您可以向每个网格单元添加新的 Pane() 对象并为其设置背景。

# mysql - 从外国 id 获取 Max Count

> ID：12219603
> 
> 赞同：2
> 
> 时间：2012-08-31T16:57:34.027
> 
> 标签：mysql

我有两张桌子

**活动**

编号 | 区域标识 | 方法 |

和**地区**

编号 | 姓名 |

活动存储了几个不同的方法字符串，我最感兴趣的是“注销”

我需要的是找到注销最多的区域。我目前有这个：

```
SELECT MAX(regionId) FROM activity GROUP BY regionId WHERE method='logout' 
```

我猜我需要在某处进行计数，但这个查询超出了我的想象。另外，我希望它返回 region.name 而不是 activity.regionId

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:03:37.140

尝试这个：

```
SELECT regionId, COUNT(method) AS count FROM activity WHERE method = 'logout' ORDER BY count DESC LIMIT 1; 
```

如果您需要名称而不是区域 ID，您可以这样做：

```
SELECT region.name, COUNT(activity.method) AS count FROM region, activity WHERE region.regionId = activity.regionId AND activity.method = 'logout' ORDER BY count DESC LIMIT 1; 
```

# git - 列出 git 标签名称、日期和消息

> ID：12219604
> 
> 赞同：33
> 
> 时间：2012-08-31T16:57:46.073
> 
> 标签：git, git-log, git-tag

如何列出所有标签的标签名称、标签日期和标签消息？

似乎 git 将提交通过`git log`和标签通过的显示逻辑分离，`git tag`使得很难列出标签名称、标签的日期和标签消息。

我可以使用显示标签日期、名称和*提交消息*`git log --tags --show-notes --simplify-by-decoration --pretty="format:%ai %d %s"`

我检查了[http://opensource.apple.com/source/Git/Git-26/src/git-htmldocs/pretty-formats.txt](http://opensource.apple.com/source/Git/Git-26/src/git-htmldocs/pretty-formats.txt)但没有看到任何显示标签消息的选项。

我可以使用显示标签名称和 5 行*标签消息*`git tag -n5`。

但是要获得所有这三个信息似乎需要超出我能力范围的粗糙脚本。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-10-25T14:21:16.480

您想使用该`for-each-ref`命令。不幸的是，它的用户友好性仅略低于`filter-branch`

请注意，标签日期和标注器等信息仅适用于带注释的标签。

下面是一个基本的原型。请注意， format= 可以是它自己的整个 shell 脚本，并且可能应该取决于您想要输出的复杂程度。他们[在 for-each-ref 文档中有几个专门针对标签的示例](https://www.kernel.org/pub/software/scm/git/docs/git-for-each-ref.html)

```
git for-each-ref --format="%(refname:short) %(taggerdate) %(subject) %(body)" refs/tags 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T01:15:47.707

`git show --tags`至少会输出有关您的标签的所有相关信息。您也许可以`--pretty=format:`从那里找到合适的序列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-17T05:48:33.900

更好的彩色格式怎么样？

```
# ~/.gitconfig
[alias]
tags="for-each-ref --sort=taggerdate --format='%(color:green)%(subject)%(color:reset), tagged: %(refname:short)\n%(taggerdate)\n%(taggername) %(taggeremail)\n\n%(contents:body)\n' refs/tags" 
```

* * *

```
$ git tags 

Release 1.0.1, tagged: 1.0.1
Wed Jul 4 20:16:05 2018 +0430
Sepehr Lajevardi <sepehr.lajevardi@...>

Changelog
- Implement Contentful webhooks to purge internal and CF caches.
- Implement CloudFlareService.
- Fix Contentful's mapping concern usage/namespace. #73
- Temporarily enforce https in og:url property. #103
- Fix entry callback issue with Contentful client. #99
- Fix issue with PPM docker build. #96

Release 1.1.2, tagged: 1.1.2
Thu Jul 12 21:26:29 2018 +0430
Sepehr Lajevardi <sepehr.lajevardi@...>

Changelog
- Fix GA share event issue with AddThis. #132
- Optimize OpenGraph protocol tags for articles. #130
- Optimize Twitter card tags. #131
- Fix HTML validation errors as much as possible. #127

Release 1.1.3, tagged: 1.1.3
Mon Jul 16 22:49:05 2018 +0430
Sepehr Lajevardi <sepehr.lajevardi@...>

Changelog
- Implement cross-device/browser fav/home icons. #137, #138
- Minify HTML output of all pages. #139
- Check for lighthouse score in build pipeline. #30
- Drop AddThis in favor of in-house ShareBar. #116
- Minor article OG tag adjustments. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-07T10:55:01.683

`git tag --format="%(refname:short) %(authordate) %(authorname) %(subject)"`

示例输出

> 0.4.0 2016 年 11 月 2 日星期三 11:17:50 -0400 船长明显发布：0.4.0

格式字段与 for 相同`git-for-each-ref`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-25T13:45:12.950

不知道有没有办法

> *仅**使用 git 语法*列出所有标签的标签名称、标签日期和标签消息 。

但是一个简单的 grep 就可以完成这项工作：

`git show --tags |grep "^tag " -A4`

请注意，我在匹配后指定了 4 行尾随上下文，因为标准输出在单独的行中显示了标签名称、标签日期和标签消息。

如果您需要处理多行标记消息，我更喜欢使用管道连接到 awk，这会稍微麻烦一些：

`git show --tags |awk "/^tag /,/-----BEGIN PGP SIGNATURE-----|commit /" |egrep -v "^$" |sed -E "s/^-----BEGIN PGP SIGNATURE-----.*|^commit.*/-/"`

只要标签消息后面跟着 PGP 签名或提交消息，这将起作用，这都是可能的情况。但是，您可以轻松地调整最后一个 grep 以涵盖其他情况（如果有的话）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-10T13:19:23.870

如果您想获取最新的标签详细信息，请使用`--sort`标志，请记住，如果您按日期排序，请在日期前使用“-”以首先列出最新的。

例如，我想要最新的标签描述（因为它恰好是最新的发布名称），我使用 --format 来拉取标签的主题并按照标签日期对其进行排序（最新的优先）。这是执行此操作的命令。

`git for-each-ref --sort=-taggerdate --format '%(subject)' refs/tags --count=1`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-20T02:20:19.000

在您的存储库中使用此终端命令

```
git show --tags --no-patch 
```

您可以`--format=`使用与`git log`.

```
git show --tags --no-patch --format=short 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-12-10T07:11:54.337

[这是安德鲁](https://stackoverflow.com/users/4021077/andrew-c)回答的后续问题，略有不同但相关的主题。

`git for-each-ref --format="%(refname:short) %(taggerdate) %(subject) %(body)" refs/tags`

这在直接命令行上效果很好。当我在 ~/.gitconfig 中设置一个 git 别名时，它似乎没有喷出相同的输出。

当直接在命令行上调用时，我明白了。

package-release-14.7.2 Wed Dec 3 14:24:38 2014 -0800 14.7.2: 复制标签 package-release-14.7.2
package-release-14.7.3 Thu Dec 4 14:14:55 2014 -0800 14.7.3：复制标签 package-release-14.7.3
package-release-14.7.4 Fri Dec 5 16:16:40 2014 -0800 14.7.4：复制标签 package-release-14.7.4

当我调用 git alias(taghist = for-each-ref --format="%(refname:short) %(taggerdate) %(subject) %(body)" refs/tags) 时，我得到

包发布-14.7.2
包
发布-14.7.3 包发布-14.7.4

-桑

# forms - symfony2 嵌入式集合编辑表单

> ID：12219606
> 
> 赞同：4
> 
> 时间：2012-08-31T16:58:01.077
> 
> 标签：forms, symfony, doctrine-orm

我在表单中创建了另一个实体的嵌入式集合，其想法是当您编辑或删除“需求”时也会编辑属于它的“产品”，我的创建表单还可以，但它给出的编辑错误 ：

> 可捕获的致命错误：传递给 MaisAlimentos\DemandaBundle\Entity\Demanda::setProdutosDemanda() 的参数 1 必须是 Doctrine\Common\Collections\ArrayCollection 的实例，给定的 Doctrine\ORM\PersistentCollection 实例，在 /var/www/maa 中调用/vendor/symfony/src/Symfony/Component/Form/Util/PropertyPath.php 在第 347 行并在 /var/www/maa/src/MaisAlimentos/DemandaBundle/Entity/Demanda.php 第 130 行定义

我在一些论坛上阅读，解决方案是删除 setter 的类型，我得到了其他错误：

> 可捕获的致命错误：无法将类 Doctrine\ORM\PersistentCollection 的对象转换为 /var/www/maa/src/MaisAlimentos/DemandaBundle/Entity/Demanda.php 第 136 行中的字符串

我的代码

[http://pastebin.com/WeGcHyYL](http://pastebin.com/WeGcHyYL)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:32:21.140

好的，所以您已经找到了原始问题的解决方案。

第二个来自拼写错误/复制粘贴错误。

在您的 pastebin 代码的第 162 行：

```
$this->$produtosDemanda = $produtosDemanda; 
```

应该

```
$this->produtosDemanda = $produtosDemanda; 
```

所以`$`之后没有任何迹象`$this->`。

# android - 在 Nexus 7 上 setTextSize 之后的 TextView 奇怪的基线

> ID：12219615
> 
> 赞同：1
> 
> 时间：2012-08-31T16:58:37.863
> 
> 标签：android, android-layout, android-ui

刚拿到 N7 进行测试，在我的一个应用程序中有一个奇怪的问题 - 调整大小后 TextView 的基线错误（移动到底部） - 所以空间没有完全使用，字符的底部被剪掉 - 我是执行以下操作来设置我的 textview 的大小：

```
val_tv.setTextSize(3 * size / 4);
val_tv.setLayoutParams(new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, size)); 
```

这是它在 N7 上的样子： ![](../Images/ff9f8bf4f2c90559234339099a439e6d.png)

非常感谢有关如何解决此问题的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:26:22.743

我通过设置 textview 属性解决了这个烦人的问题

```
android:bufferType="spannable" 
```

[从这个答案](https://stackoverflow.com/a/10756965/218473)复制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T23:24:37.520

我发现的唯一解决方案是不在 LayoutParams 中将像素指定为高度 - 使用 WRAP_CONTENT 时没有问题（不过对我来说还有其他缺点）

# search - 在 Lucene 中按大小搜索

> ID：12219620
> 
> 赞同：0
> 
> 时间：2012-08-31T16:59:06.217
> 
> 标签：search, lucene, size

我的搜索有问题。

我想搜索各种尺寸，但它不起作用。

大小：[0 TO 1000]，我显示大小在 0 到 1000 之间的文件。

是否可以在 Lucene 中进行这种类型的搜索？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:21:19.183

在搜索具有数字范围的字段时，您必须首先确保在索引文档和添加大小字段时该字段是数字类型。搜索时（如果语法有问题），您可以创建一个`RangeQuery`，并将多个范围与`BooleanQuery`.

# php - 简单的 HTML DOM 解析器和一个 for each 循环

> ID：12219622
> 
> 赞同：0
> 
> 时间：2012-08-31T16:59:14.237
> 
> 标签：php, html, simple-html-dom

我正在使用 PHPCRAWL 和 SIMPLEHTMLDOMPARSER 从公共网站获取一些数据。我花了很长时间才弄清楚这一点，但现在我有另一个问题我迷路了。
使用下面的代码，我可以获得每个页面的 $first 项目，但这里有多个 $first （可能是 2 或 3）。我试图将给定页面的所有 $firsts 捕获为一个变量，比如说 $allfirst 。非常感谢任何指导，建议。

```
 $html=file_get_html("$DocInfo->url");
    foreach ($html->find('div[id=sidebar] h4') as $e) {
      $first = $e->next_sibling();
     echo $first;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:07:31.843

您需要使 $first 成为一个数组。

```
$html=file_get_html("$DocInfo->url");
$first=array();
foreach ($html->find('div[id=sidebar] h4') as $e) {
  $first[] = $e->next_sibling();

}
 print_r ($first); 
```

编辑 =====

print_r($first) 应该在循环之外。

# wordpress - 如何添加自定义标题 wordpress 网站

> ID：12219629
> 
> 赞同：0
> 
> 时间：2012-08-31T16:59:55.083
> 
> 标签：wordpress, themes, title

我正在尝试在我的页面[http://www.delpapafamily.com/new/#!/del-papa-family-farm/](http://www.delpapafamily.com/new/#!/del-papa-family-farm/)中添加一些自定义标题。

我可以使用代码在 page.php 中打印页面标题

```
<?php echo "Name=".$post->post_name; ?> 
```

但是当我将相同的代码放在标题中时，我无法获得页面标题。

请查看[http://www.delpapafamily.com/new/#!/del-papa-family-farm/](http://www.delpapafamily.com/new/#!/del-papa-family-farm/)。现在这个页面打印了 header.php 和 page.php 代码中的图块。但它不显示 header.php 代码中的页面标题。

真的很紧急。

真挚地，

苏尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:58:33.357

循环可能尚未在您的标头中初始化。尝试`wp_title()`改用。法典参考在[这里](http://codex.wordpress.org/Function_Reference/wp_title)。

# php - 另一个表单 HTML 中的表单

> ID：12219632
> 
> 赞同：0
> 
> 时间：2012-08-31T17:00:00.500
> 
> 标签：php, html, forms

我有下面的代码，需要以某种方式使其工作。我知道您不允许在另一个表单中提交一个表单，所以我想知道是否有办法解决这个问题。

```
 <form method="post" action="somepage.php"> 
<input name="textbox_question" type="text">

<!--and there is a lot more code for this form here --> 

       <form id="fileupload" action="upload_form/server/php/" method="POST" enctype="multipart/form-data">
                       <div>
                    <div class="span7"><strong>
                       <span class="btn btn-success fileinput-button">  Add files...
                      <input type="file" name="files[]" multiple>
                          </span>

                      </button>
                    <br></br>
                    </strong></div>
                  </div>
                  <!-- The loading indicator is shown during file processing -->
                  <div class="fileupload-loading"></div>
                  <br>
                  <!-- The table listing the files available for upload/download --> 
                  <table role="presentation" class="table table-striped">
                    <tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery">
                    </tbody>
                  </table>
                </form>

  <!--and there is a lot more code for this form here --> 
  </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:26:33.210

将内部表单放入单独的文档中，并使用`iframe`.

# cakephp - 更新 HABTM 关系中的数据

> ID：12219633
> 
> 赞同：0
> 
> 时间：2012-08-31T17:00:08.237
> 
> 标签：cakephp, cakephp-2.0

我有两个模型*Firma*和*Znacka*在 HABTM 关系中形成*FirmaZnacka*。我有一个带有 javascript 自动完成功能的表单，如下所示：

```
echo $this->Form->input("Znacka.1.id");
echo $this->Form->input("Znacka.1.name");
echo $this->Form->input("Znacka.2.id");
echo $this->Form->input("Znacka.2.name"); 
```

当用户提交表单时，我需要保存/更新/创建数据来归档：

*   如果用户输入的*Znacka*名称不存在，则创建它（如果存在，不要创建新的！）
*   处理关系表记录

提交的数据如下所示`$this->request->data`：

```
array(
    'Znacka' => array(
        0 => array(
          'id' => string '',
          'nazov' => string 'First'),
        1 => array(
          'id' => string '',
          'nazov' => string 'Second')
     )
) 
```

*Firma*的 id是已知的、静态的并由设置`$this->Firma->id = $id;`。代码在 FirmyController 中运行，该控制器默认导入了 Firma 模型。我不仅使用表单来创建新数据，而且还更新现有数据。

我试图从 The Cookbook 中找出这一点，但没有结果。我尝试使用保存它`$this->Firma->saveAssociated($this->request->data)`，还尝试了其他一些保存功能。

通过查看每个 Znacka 的名称等，我知道有一个蛮力解决方案，但我正在寻找一些没有几十行代码的不错的 CakePHP 解决方案。

我正在使用 CakePHP 2.0。谢谢你的帮助。

# node.js - 是否可以在 NodeJS 中动态返回 SSL 证书？

> ID：12219639
> 
> 赞同：40
> 
> 时间：2012-08-31T17:00:30.343
> 
> 标签：node.js, ssl-certificate

我想在我的 NodeJS 应用程序中动态返回一个 ssl 证书信息。我有两个域名链接到同一个节点应用程序。我只看到创建服务器时可以指定ssl设置。是否可以根据请求的 url 动态返回 ssl 证书？

否则，如果我必须在另一个端口上创建第二个服务器实例，我是否能够透明地将每个请求通过管道传输到原始端口？我可以让它看起来好像它没有在第二个端口上运行吗？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-11-29T12:33:13.877

是的，可以使用一台服务器来完成。但需要注意的是，它适用于支持[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication)（大多数现代浏览器）的客户端。

这就是你的做法：

```
//function to pick out the key + certs dynamically based on the domain name
function getSecureContext (domain) {
    return crypto.createCredentials({
        key:  fs.readFileSync('/path/to/domain.key'),
        cert: fs.readFileSync('/path/to/domain.crt'),
        ca: [fs.readFileSync('/path/to/CA_cert_1.crt'), fs.readFileSync('/path/to/CA_cert_2.crt'), <include all CA certs that you have to> ... ]
      }).context;
}

//read them into memory
var secureContext = {
    'domain1': getSecureContext('domain1'),
    'domain2': getSecureContext('domain2'),
    .
    .
}

//provide a SNICallback when you create the options for the https server
var options = {
    SNICallback: function (domain) {
        return secureContext[domain];
    }, //SNICallback is passed the domain name, see NodeJS docs on TLS
    cert: fs.readFileSync('/path/to/server.crt'),
    key: fs.readFileSync('/path/to/server.key'),                
    }
}

//create your https server
var server = require('https').createServer(options, [requestListener]);
//using Express
var server = require('https').createServer(options, require('express')());
server.listen(<someport>); 
```

这是可行的，因为[https 的选项](http://nodejs.org/api/https.html#https_https_createserver_options_requestlistener)类似于 tls.createServer()。确保在 crypto.createCredentials 调用中包含所有必需的 CA 中间证书和根证书。此外，如果您有 CA 捆绑包，请在使用它们之前将它们拆分为多个单个 crt 文件，因为“ca”接受证书数组。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-08-10T00:58:56.023

`crypto.createCredentials()`已弃用，因此请`tls.createSecureContext()`改用。

[tls.createServer()](https://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener)必须在选项中有`key`and `cert`，因为它们在手册中是必需的。如果不支持，也许`tls.createServer()`使用这些参数作为默认值。`SNICallback`

```
var secureContext = {
    'mydomain.com': tls.createSecureContext({
        key: fs.readFileSync('../path_to_key1.pem', 'utf8'),
        cert: fs.readFileSync('../path_to_cert1.crt', 'utf8'),
        ca: fs.readFileSync('../path_to_certificate_authority_bundle.ca-bundle1', 'utf8'), // this ca property is optional
    }),
    'myotherdomain.com': tls.createSecureContext({
        key: fs.readFileSync('../path_to_key2.pem', 'utf8'),
        cert: fs.readFileSync('../path_to_cert2.crt', 'utf8'),
        ca: fs.readFileSync('../path_to_certificate_authority_bundle.ca-bundle2', 'utf8'), // this ca property is optional
    }),
}
try {
    var options = {
        SNICallback: function (domain, cb) {
            if (secureContext[domain]) {
                if (cb) {
                    cb(null, secureContext[domain]);
                } else {
                    // compatibility for older versions of node
                    return secureContext[domain]; 
                }
            } else {
                throw new Error('No keys/certificates for domain requested');
            }
        },
       // must list a default key and cert because required by tls.createServer()
        key: fs.readFileSync('../path_to_key.pem'), 
        cert: fs.readFileSync('../path_to_cert.crt'), 
    }
    https.createServer(options, function (req, res) {
        res.end('Your dynamic SSL server worked!')
        // Here you can put proxy server routing here to send the request 
        // to the application of your choosing, running on another port.
        // node-http-proxy is a great npm package for this
    }).listen(443);
} catch (err){
    console.error(err.message);
    console.error(err.stack);
} 
```

在服务器内部，您可以使用 nodejs 包[http-proxy](https://www.npmjs.com/package/http-proxy)将您的 https 请求路由到您的各种应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-23T05:19:38.540

有人在[greenlock-express.js](https://git.coolaj86.com/coolaj86/greenlock-express.js)中提出了一个问题并引用了这篇文章，所以我将在此处包含使用*Greenlock 进行此操作的方法，以便让我们加密*：

# 将 Greenlock.js 用于动态 SSL 证书

Greenlock 完全满足您的需求，但同时兼顾安全性和便利性。

*   使用结构化目录路径动态加载 tls 证书
*   通过 Let's Encrypt v2 自动颁发和更新 SSL 证书
*   防止 SNI 和主机攻击以及域前置。

### 安装

```
npm install --save greenlock-express 
```

### 通过 Greenlock 使用 Let's Encrypt

```
require("greenlock-express")
    .init(function getConfig() {
        return { package: require("./package.json") };
    })
    .serve(httpsWorker);

function httpsWorker(server) {
    // Works with any Node app (Express, etc)
    var app = require("./my-express-app.js");

    // See, all normal stuff here
    app.get("/hello", function(req, res) {
        res.end("Hello, Encrypted World!");
    });

    // Serves on 80 and 443
    // Get's SSL certificates magically!
    server.serveApp(app);
} 
```

### 文档

*   HTTP / Express 文档：[https](https://git.coolaj86.com/coolaj86/greenlock-express.js) ://git.coolaj86.com/coolaj86/greenlock-express.js 。
*   API 集成/TCP 文档：[https](https://git.coolaj86.com/coolaj86/greenlock.js) ://git.coolaj86.com/coolaj86/greenlock.js 。
*   截屏系列：[Node.js 的 Greenlock：快速入门、配置和安全性](https://www.youtube.com/watch?v=e8vaR4CEZ5s&list=PLZaEVINf2Bq_lrS-OOzTUJB4q3HxarlXk)

专门与动态域加载配置有关的视频部分：2: [26 Greenlock for node.js 第 2 部分：配置](https://www.youtube.com/watch?v=bTEn93gxY50&index=2&list=PLZaEVINf2Bq_lrS-OOzTUJB4q3HxarlXk&t=146)

# 重要说明：安全注意事项

Greenlock 已经缓解了这些安全问题，但如果您是手动实施，您应该知道一些事情来保证安全：

特别是，当您使用您自己编写的代码动态加载 ssl 证书时，您可能[会使自己容易受到SQL 注入和/或定时攻击，这一点](https://github.com/nodejs/node/issues/22389)*非常重要。*

尽管您希望像`example.com`通过节点`tls.SNICallback(sni, cb)`和一样的有效字节`req.socket.servername`，但您实际上可以从`Robert'); DROP TABLE Students;`（或我们喜欢称呼他的小[Bobby Tables ）获得访问。](https://xkcd.com/327/)

如果您有兴趣了解该漏洞利用如何发挥作用，我已在[Greenlock for node.js 第 3 部分：安全问题](https://www.youtube.com/watch?v=aZgVqPzoZTY&list=PLZaEVINf2Bq_lrS-OOzTUJB4q3HxarlXk)和[https://github.com/nodejs/node/issues/22389中记录了它](https://github.com/nodejs/node/issues/22389)

您也可能容易受到[Domain Fronting](https://en.wikipedia.org/wiki/Domain_fronting)的攻击，这是一种风险相当低的攻击/侧通道，但了解和理解很重要。

# watir-webdriver - 在 Watir-Webdriver 中按内容查找文本区域

> ID：12219641
> 
> 赞同：1
> 
> 时间：2012-08-31T17:00:34.953
> 
> 标签：watir-webdriver

我无法断言存在某些内容的文本区域。这是我希望做的一个例子：

```
require 'watir-webdriver'

b = Watir::Browser.new :ff

b.goto 'http://www.velnetsupport.co.uk/parrots/FormMail/example_form.html'

b.text_field(:name => 'realname').set 'Tom Jones'
puts b.text_field(:value => /om\ Jon/x).exists? # Expect true get true

b.text_field(:name => 'message').set 'John Jones'
puts b.text_field(:value => /ohn Jon/).exists? # Expect true get false

b.close 
```

这应该工作吗？还有其他方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:42:17.760

您在上面犯的一个错误，用 textarea 替换文本字段

```
puts b.textarea(:value => /ohn Jon/).exists? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:24:09.530

您可以考虑这样做，而不是：

```
b.text_field(:name => 'message').set 'John Jones'

# The next line assumes you're using Rspec...
b.text_field(:name => 'message').text.should=='John Jones'

# Alternatively, if you're using TestUnit...
assert_equal(b.text_field(:name => 'message').text, 'John Jones')

# Or, do your own verification:
puts "Exists!" if b.text_field(:name => 'message').text=='John Jones' 
```

# ruby-on-rails - 不同的视图取决于模型的子类

> ID：12219644
> 
> 赞同：1
> 
> 时间：2012-08-31T17:00:52.213
> 
> 标签：ruby-on-rails, design-patterns, sti

在我的 Rails 3.2 应用程序中，我有一个具有两个子类的模型，并遵循 STI 方法：

```
class Building < ActiveRecord::Base
end

class House < Building
end

class Apartment < Building
end 
```

我拥有的唯一控制器是主模型 ( `Building`) 的控制器，并希望它保持这种状态。在视图中，如果其表示不同，您将如何呈现不同子类的实例？我考虑过检查模型的类型并根据它渲染模板，但是如果我想添加新的子类，这并不是真正可扩展的。

# php - 展开函数返回错误

> ID：12219646
> 
> 赞同：0
> 
> 时间：2012-08-31T17:01:05.840
> 
> 标签：php, error-handling

我有一个由于多种原因返回 false 的函数。是否也可以让它抛出可捕获的错误而不破坏其他依赖于它是真还是假的代码？

或者我是否必须返回数组或返回错误原因，并且只有在成功时才为真？

最好的方法是什么？

基于丹尼尔方法的一些想法：

__FUNCTION__ 应该返回函数名

```
$errors = array();
function someFunction(){
    if(ErrorTWOhappened()){
        global $errors[__FUNCTION__] = "ERRORtwo";
        return false;
    }
    if(someOtherError()){
        global $errors[__FUNCTION__] = "someOtherError";
        return false;
    }
    return true;
}
if(!someFunction())echo $errors['someFunction']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:05:49.450

为了不破坏向后兼容性但提供更多信息，您可以创建第二个函数来记录错误消息。在程序方法中，这可能如下所示：

```
$myFunctionErrors = array();
function myFunctionSetError($error) {
    global $myFunctionErrors;
    $myFunctionsErrors[] = $error;
}

function myFunctionGetErrors() {
    global $myFunctionErrors;
    return $myFunctionErrors;
} 
```

只需`myFunctionSetError('whatever');`在您现有的函数中调用。*注意*：`myFunction`只是一个前缀，以您的实际功能命名。

*另请注意*：您显然可以直接使用数组。但是，为了更好的可维护性，我建议您使用以后可以修改的函数来轻松更改其背后的逻辑。

`$myFunctionErrors`如果您更喜欢面向对象的方法，您还可以为此设置一个类并防止可能对全局变量产生副作用。

```
class MyFunctionErrorLogger
{
    protected static $errors = array();

    public function setError($error)
    {
        self::$errors[] = $error;
    }

    public static function getErrors()
    {
        return self::$errors;
    }
} 
```

或者，如果您更喜欢“黑客”方式，请稍微扩展该功能。通过添加另一个具有`false`默认值的函数参数。旧的函数调用不会受此影响，但您可以在以后的调用中提供这个额外的参数。

```
function myFunction($myParam, ..., $errorsAsException = false)
{
    // ...
    // Ooops, error case
    if ($errorAsException)
        throw new WhatEverException('errormsg');
    else
        return false;
    // ...
} 
```

# firefox-addon - 有没有像firebug这样的工具可以在firebug中编辑时保存css文件

> ID：12219647
> 
> 赞同：0
> 
> 时间：2012-08-31T17:01:08.127
> 
> 标签：firefox-addon, firebug

我想知道当我们在firebug中更改css时，是否有任何工具可以自动将get保存到css文件中

我已经搜索了很多......并发现了一些附加组件，但没有找到我想要的究竟是什么

如果有人可以给我一个该插件的链接，那将非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:23:07.010

您应该能够使用 google chrome 的开发人员工具来持久化更改。有关说明，请参阅本文： [https ://developers.google.com/chrome-developer-tools/docs/elements-styles#persist](https://developers.google.com/chrome-developer-tools/docs/elements-styles#persist)

# sql - 计算一列中的特定项目

> ID：12219649
> 
> 赞同：0
> 
> 时间：2012-08-31T17:01:16.790
> 
> 标签：sql

我有一个名为 的表`ratings`和一个名为 的列`item_id`。我只是想将每个单独的项目组合在一起并计算它们。

例如：

如果有 1000 行，其中`item_id`51 已被评分 20 次，`item_id`14 已被评分 7 次，`item_id`33 已被评分 2 次，我只是希望将其分组为`DESC`：

item_id 51 item_id 7 item_id 33

我试图关注类似[这个问题](https://stackoverflow.com/questions/7307808/get-count-of-items-and-their-values-in-one-column)的内容，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:06:55.393

```
SELECT item_id, COUNT(*) AS count
FROM ratings 
GROUP BY item_id
ORDER BY count DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:04:31.200

```
SELECT count(*) AS counter, item_id
FROM ratings
GROUP BY item_id 
ORDER BY counter DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:05:34.277

```
SELECT * 
FROM (
    SELECT item_id, COUNT(rating) AS rating
    FROM ratings GROUP BY item_id
) a
GROUP BY a.rating DESC 
```

# php - Newsfeed Div 在第 2 页关闭

> ID：12219650
> 
> 赞同：0
> 
> 时间：2012-08-31T17:01:24.597
> 
> 标签：php, mysql, css, pagination

我的新闻源 div 正在关闭我的第二页。我不知道为什么它会在第一页上工作而在第二页上关闭。您可以在[www.robhorlacher.ca/RobNews.php](http://www.robhorlacher.ca/RobNews.php)查看该问题。第一页是对的，第二页有问题。

这是脚本：

```
 <div id="newsfeed">

    <?php

    $hostname = '####';
    $username = '####';
    $password = '####';

    $connection = mysql_connect($hostname, $username, $password) 
    or die ('Connection error!!!');

    $database = '####';
    mysql_select_db($database);

    $execute_statement9 = "SELECT COUNT(*) FROM NewsFeed";

    $results9 = mysql_query($execute_statement9) or die ('Error executing SQL statement9!!!');

    $entries =  mysql_fetch_row($results9);

    $rownumber = $entries[0];

    $totalperpage = 8;

    $totalpages = ceil($rownumber / $totalperpage);

    if (isset($_GET['currentpage']) && is_numeric($_GET['currentpage'])) {

        $currentpage = (int) $_GET['currentpage'];

    } else {

        $currentpage = 1;
    }

    if ($currentpage > $totalpages) {

        $currentpage = $totalpages;
    }

    if ($currentpage < 1) {

        $currentpage = 1;

    }

    $offset = ($currentpage - 1) * $totalperpage;

        $execute_statement = "SELECT * FROM NewsFeed ORDER BY ID DESC LIMIT $offset, $totalperpage";

        $results = mysql_query($execute_statement) or die ('Error executing SQL statement12!!!');

            while ($row = mysql_fetch_array($results)) {

            $ID = $row["ID"];
            $datetime = $row["DateTime"];
            $indicator = $row["TID"];
            $tabletype = $row["Table"];

        if ($tabletype == "Web") {

    $execute_statement2 = "SELECT * FROM Websites WHERE WID = $indicator";

                $results2 = mysql_query($execute_statement2) or die ('Error executing SQL statement2!!!');

                while ($row2 = mysql_fetch_array($results2)) {

                $wid = $row2["WID"];
                $wname = $row2["Title"];
                $wdescription = $row2["Description"];
                $wextension = $row2["URL"];
                $wimage = $row2["Image"];
        print "<div id=\"subjectbar\">";
        print " <div id=\"topsubject\"></div>";

        print "<div id=\"subject\">";
        print $wname;
        print "</div>";

        print "<div id=\"belowsubject\"></div>";
        print "</div>";

        print "<div id=\"newscontent\">";
        print "<div id=\"wimage\">";
        print "<br>";

        print "<img src = \"uploads/$wimage\" width=\"auto\" height=\"350\">";
        print "</a>";
        print "</div>";
        print "<div id=\"dscimage\">";
        print $wdescription;
        print "<br>";
        print "<br>";
        print "<div id=\"wlink\">";
        print "<a href=\"$wextension\">";
        print " Go to Website";
        print "</a>";
        print "</div>";
        print "<br>";
        print "<br>";
        print "</div>";

        print "</div>";

                }
        }

        else if ($tabletype == "Video") {
            $execute_statement3 = "SELECT * FROM Video WHERE ID = $indicator";

            $results3 = mysql_query($execute_statement3) or die ('Error executing SQL statement3!!!');

                    while ($row3 = mysql_fetch_array($results3)) {

                    $vid = $row3["ID"];
                    $vname = $row3["Name"];
                    $vdescription = $row3["Description"];
                    $vextension = $row3["Extensions"];
                    $vimage = $row3["Image"];

        print "<div id=\"subjectbar\">";
        print " <div id=\"topsubject\"></div>";

        print "<div id=\"subject\">";
        print $vname;
        print "</div>";

        print "<div id=\"belowsubject\"></div>";
        print "</div>";

        print "<div id=\"newscontent\">";
        print "<div id=\"vimage\">";
        print "<br>";
        print "<img src = \"uploads/$vimage\" width=\"auto\" height=\"350\">";
        print "</a>";
        print "</div>";
        print "<div id=\"vdescription\">";
        print $vdescription;
        print "<br>";
        print "<br>";
        print "<div id=\"vlink\">";
        print "<a href=\"http://www.youtube.com/v/";
        print $vextension;
        print "&hl=en&fs=1&rel=0&autoplay=1\" rel=\"shadowbox;width=524;height=344;player=swf\">";
        print " PLAY";
        print "</a>";
        print "<br>";
        print "<br>";
        print "</div>";
        print "</div>";
        print "</div>";
                    }
        }

        else if ($tabletype == "Pictures") {

        $execute_statement4 = "SELECT * FROM ImageAlbums WHERE AlbumID = $indicator";

                $results4 = mysql_query($execute_statement4) or die ('Error executing SQL statement4!!!');

                    while ($row4 = mysql_fetch_array($results4)) {

                    $aid = $row4["AlbumID"];
                    $album = $row4["Album"];    

        print "<div id=\"subjectbar\">";
        print " <div id=\"topsubject\"></div>";

        print "<div id=\"subject\">";
        print $album;
        print "</div>";

        print "<div id=\"belowsubject\"></div>";
        print "</div>";

        print "<div id=\"newscontent\">";
        print "<br>";
        print "<div id=\"albmimg\">";
        $execute_statement5 = "Select * FROM Images WHERE AlbumID = $aid LIMIT 3";

        $results5 = mysql_query($execute_statement5) or die ('Error executing SQL statement5!!!');

                            while ($row5 = mysql_fetch_array($results5)) {

                            $imgDscrptn = $row5["Description"];
                            $extns = $row5["Extensions"];

                            print "<div id=\"indvdlimg\">";
                            print "<a href= \"uploads/$extns\" rel=\"shadowbox\">";
                            print "<img src = \"uploads/$extns\" width=\"auto\" height=\"161\">";
                            print "</a>";
                            print "</a>";
                            print "</div>";
                            }
                            print "<div id=\"footerimg\"></div>";
                            print "</div>";
                            print "<div id=\"picviewall\">";
                            print "<a href=\"viewallpictures.php?link=$aid\">";
                            print "- View All";
                            print "</a>";
                            print "<br>";
                            print "<br>";
                            print "</div>";             

                    }
            print "</div>";

                }
        }
    print "<div id=\"pagination\">";
    $range = 3;
    print "<br>";
    print "<br>";
    if ($currentpage > 1) {

        print "<a href='{$_SERVER['PHP_SELF']}?currentpage=1'><< </a>";

        }

        for ($x = ($currentpage - $range); $x < (($currentpage + $range) + 1); $x++) {

            if (($x > 0) && ($x <= $totalpages)) {

                if ($x == $currentpage) {

                    print "[<b>$x</b>]";

                } else {

                    print "<a href='{$_SERVER['PHP_SELF']}?currentpage=$x'> $x </a>";

                }

            }

        }

    if ($currentpage != $totalpages) {

        $nextpage = $currentpage + 1;

        print "<a href='{$_SERVER['PHP_SELF']}?currentpage=$nextpage'> > </a>";

        print "<a href='{$_SERVER['PHP_SELF']}?currentpage=$totalpages'> >> </a>";

    }
    print "</div>";
    ?>
    <br>
    <br>
    <br>
    </div>
    <div id="contentfooter"></div>

    </div> 
```

这是CSS

```
#content #newsfeed {
    width: 822px;
    float: right;
}

#content #newsfeed #subjectbar {

}

#content #newsfeed #subjectbar #topsubject {
    width: 793px;
    height: 7px;
    background-image: url(../images/topSubjectBar.jpg);
}

#content #newsfeed #subjectbar #subject {
    width: 793px;
    background-image: url(../images/subjectBackground.jpg);
    background-repeat: repeat-y;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 30px;
    color: #FFF;
    padding-top: 30px;
}

#content #newsfeed #subjectbar #belowsubject {
    width: 793px;
    height: 7px;
    background-image: url(../images/bottomSubjectBar.jpg);
}

#content #newsfeed #newscontent {
    width: 793px;   
}

#content #newsfeed #newscontent #wimage {
    width: 793px;
    height: 390px;
    text-align: center;
}

#content #newsfeed #newscontent #dscimage {
    width: 793px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    margin-left: 30px;
    margin-right: 30px;
}

#content #newsfeed #newscontent #dscimage #wlink {
    width: 793px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    margin-left: 50px;
}

#content #newsfeed #newscontent #vimage {
    width: 793px;   
    height: 390px;
    text-align: center; 
}

#content #newsfeed #newscontent #vdescription {
    width: 733px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
}

#content #newsfeed #newscontent #vdescription #vlink {
    width: 793px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    margin-left: 50px;
}

#content #newsfeed #newscontent #albmimg {
    width: 793px;
    height: auto;
    padding-right: 20px;
    padding-left: 20px;
}

#content #newsfeed #newscontent #albmimg #indvdlimg {
    width: 254px;
    height: 190px;
    margin: auto;
    float: left;
    text-align: center;
}

#content #newsfeed #newscontent #albmimg #footerimg {
    width: 793px;
    clear: both;
}

#content #newsfeed #newscontent #picviewall {
    width: 793px;
    height: 40px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    margin-left: 50px;
}

#content #newsfeed #pagination {
    width: 793px;
    height: 75px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    margin-left: 50px;
} 
```

我会感谢任何帮助，因为我已经为此苦苦挣扎了一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:15:00.003

乍一看，您正在一个页面上（在 while 循环内）生成非唯一的元素 ID。这会导致无效的 html。请参阅此主题，这是第一个答案以获取更多详细信息[css div id 每页仅使用一次](https://stackoverflow.com/questions/753165/css-div-id-used-only-once-per-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:14:12.940

在您的第二页中，您的新闻提要 div 在打开后立即关闭，这会将您的主题栏和新闻内容 div 留在其中，因此您的样式不会应用于它们。我的建议是学习使用浏览器的调试工具（即使 Internet Explorer 也有很好的工具），您可以按 F12 访问它们。

# python - 在python中读取多个依赖文件

> ID：12219651
> 
> 赞同：0
> 
> 时间：2012-08-31T17:01:31.633
> 
> 标签：python, file, for-loop

我正在用python编写一个程序并且遇到了一些麻烦。我的程序应该做的是从文件中读取一行，解析它，然后将该行的一部分写入字符串。然后它应该在另一个文件中搜索该字符串，并在找到时打印该行。然后它应该向下移动到第一个文件的下一行并重复该过程，直到第一个文件中的所有行都被读取。

我的代码如下：

```
def readermain():
    """called if constant file exists"""

    for line in portslist: #reads printer port list and parses name and port address 
        marker = line.split()
        printername=marker[0]
        address=marker[1]

        for lines in constantfile:
            if address in lines: #if the desired address is in the line
                lineholder=lines.split()
                print (lineholder)
                oldonline=lineholder[4]
                oldutc=lineholder[5]
                status=lineholder[2]
                address=lineholder[1] 
```

问题是，第一个`for line in portslist`似乎没有移动到下一行。它一遍又一遍地打印出同一行。和`portslist`和`constantfile`列表在程序中使用`constantfile=open("constantfile.dat").readlines()`等声明的其他位置。我是 python 新手，似乎无法弄清楚这里发生了什么。任何帮助或建议都非常受欢迎。

程序本身很长，我累了总结问题区域，但我会在下面发布。这是一项正在进行的工作，所以我知道还有其他错误，是的，这不是可读性的最佳示例，sry。建议还是很棒的。

```
"""Program to pull down list of printers and ping each to see if it is online. 
Will track printers over time, if printer has been offline for over a year it will be listed in a delete file.
This program is designed to run on windows and requires python to be installed. """

import win32com.client, os, time, datetime
from datetime import datetime

computername="(name goes here)"
currentdate=datetime.now()
currentdateutc= (time.mktime(currentdate.timetuple()))

def getPorts(computername):
    """Gets printer name and port name"""

    portslist= open("printerports.txt","w")

    objWMIService = win32com.client.Dispatch("WbemScripting.SWbemLocator") 
    objSWbemServices = objWMIService.ConnectServer(computername,"root\cimv2") 
    colItems = objSWbemServices.ExecQuery("Select * from Win32_Printer") 
    for objItem in colItems:
        list= objItem.Name + " " + objItem.PortName+"\n"
        portslist.write(list)

    portslist.close()

def pingone(address):
    """Pings address and returns 0 if it is online"""
    pingreturn=os.system("ping -n 1 " + address)
    return (pingreturn)

def pingfive(address):
    """Pings as address five times"""
    pingreturn=os.system("ping -n 5 " + address)
    return (pingreturn)

def online(printername, address, currentdate):
    return str((printername +" at port "+ address+" is online on "+ str(currentdate)+"\n"))

def offline(printername, address, currentdate):
    return str((printername +" at port "+address+" is offline on "+ str(currentdate)+"\n"))

def constantonline(printername, address, currentdate, currentdateutc):
    return str((printername+" "+address+" "+str(0)+" "+str(currentdate)+" "+str(currentdate)+" "+str(currentdateutc)+"\n"))

def constantoffline(printername, address, currentdate, oldonline, oldutc):
    return str((printername+" "+address+" "+str(1)+" "+str(currentdate)+" "+str(oldonline)+" "+str(oldutc)+"\n"))

def removal(printername, address, oldonline):
    return str((printername+" with queue "+address+" has been offline since "+str(oldonline)+"\n"))

def constantfilecheck():
    """Checks for constant file"""
    if os.path.isfile("constantfile.dat")==True:  #checks if a constant file exists. if not one is made
        return True

    else:
        return False

def readermain(portslist, constantfile, counter, oncounter, offcounter):
    """called if constant file exists"""

    for line in portslist: #reads printer port list and parses name and port address 
        print(line)
        marker = line.split()
        printername=marker[0]
        address=marker[1]

        for lines in constantfile:
            print(lines)
            if address in lines: #if the desired address is in the line
                lineholder=lines.split()
                print (lineholder)
                oldonline=lineholder[4]
                oldutc=lineholder[5]
                status=lineholder[2]
                address=lineholder[1]
                #--------------------------------------------------------------------------------------------------------------------------------------------
                print ("Address found in constant file")

                if pingone(address)==0:
                    newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
                    onlinefile.write(online(printername, address, currentdate))
                    oncounter += 1
                    counter += 1

                else:
                    if pingfive(address)==0:
                        newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
                        onlinefile.write(online(printername, address, currentdate))
                        oncounter += 1
                        counter += 1

                    else:
                        newconstantfile.write(constantoffline(printername, address, currentdate, oldonline, oldutc))
                        offlinefile.write(offline(printername, address, currentdate))
                        offcounter += 1
                        counter += 1
                        if status == 0 and (currentdateutc-oldutc)>=31556926:
                            #-----------------------------------------------------------------------------------------------------------------------------------
                            print("printer older than year")
                            deletefile=open("removefile.txt", "a")
                            deletefile.write(removal(printername, address, oldonline))
                            deletefile.close()
            else:
                #not in constant file
                #------------------------------------------------------------------------------------------------------------------------------------------------
                print("not in constant file")
                if pingone(address)==0:
                    newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
                    onlinefile.write(online(printername, address, currentdate))
                    oncounter += 1
                    counter += 1

                else:
                    if pingfive(address)==0:
                        newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
                        onlinefile.write(online(printername, address, currrentdate))
                        oncounter += 1
                        counter += 1

                    else:
                        newconstantfile.write(printername+" "+address+" "+str(1)+" "+str(currentdate)+" "+str(oldonline)+" "+str(currentdateutc)+"\n")
                        offlinefile.write(offline(printername, address, currentdate))
                        offcounter += 1
                        counter += 1

def readersecondary(oncounter, offcounter, counter):
    """called if no constant file exists already"""

    for line in portslist: #reads printer port list and parses name and port address 

        marker = line.split()
        printername=marker[0]
        address=marker[1]

        if pingone(address)==0:
            newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
            onlinefile.write(online(printername, address, currentdate))
            oncounter += 1
            counter += 1

        else:
            if pingfive(address)==0:
                newconstantfile.write(constantonline(printername, address, currentdate, currentdateutc))
                onlinefile.write(online(printername, address, currrentdate))
                oncounter += 1
                counter += 1

            else:
                newconstantfile.write(printername+" "+address+" "+str(1)+" "+str(currentdate)+" "+str(currentdate)+" "+str(currentdateutc)+"\n")
                offlinefile.write(offline(printername, address, currentdate))
                offcounter += 1
                counter += 1
    return counter, oncounter, offcounter
def rename():
    """Deleates old constant file and renames newconstantfile to constantfile"""
    if constantfilecheck() is True:
        os.system("del constantfile.dat")

    os.system("ren newconstantfile.dat constantfile.dat")
    os.system("del printerports.txt")

#_______________________________________________________________________________________________________________
#END OF FUNCTIONS
#_______________________________________________________________________________________________________________

oncounter=0
offcounter=0
counter=0

print ("Getting ports from server\n")   
getPorts(computername)

portslist=open("printerports.txt", "r").readlines()
newconstantfile=open("newconstantfile.dat", "w")
onlinefile=open("onlinefile.txt", "w")
offlinefile=open("offlinefile.txt", "w")

print ("checking for constant file")
if constantfilecheck() == True:
    constantfile=open("constantfile.dat").readlines()
    print("calling reader main")
    readermain(portslist, constantfile, counter, oncounter, offcounter)
    constantfile.close()
elif constantfilecheck() == False:
    print("calling reader secondary")
    readersecondary(oncounter, offcounter, counter)

offlinefile.write("\nTotal Printers Scanned: "+str(counter))
offlinefile.write("\nPrinters online: "+str(oncounter))
offlinefile.write("\nPrinters offline: "+str(offcounter))
onlinefile.write("\nTotal Printers Scanned: "+str(counter))
onlinefile.write("\nPrinters online: "+str(oncounter))
onlinefile.write("\nPrinters offline: "+str(offcounter))

portslist.close()
newconstantfile.close()
onlinefile.close()
offlinefile.close()

rename() #calls rename function 
```

我知道我不应该使用 os.system，但这应该是一个快速而肮脏的小项目。该程序旨在在很长一段时间（数年）内跟踪大量打印机（数以千计）的在线状态。它通过 ping 从打印服务器中提取的打印机列表并在常量文件中记录日期、在线状态和端口名称来实现这一点。

下面是 portslist 文件中的一行： `artp002 10.40.80.18`formatted "name port"

这是常量文件的示例：`artp002 10.40.80.18 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0' 格式为“名称端口日期_上次检查的最后在线日期时间_in_utc

这是程序运行时的输出：

```
Getting ports from server

checking for constant file
calling reader main
artp002 10.40.80.18

artp002 10.40.80.18 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0

['artp002', '10.40.80.18', '0', '2012-08-30', '13:32:34.787000', '2012-08-30', '13:32:34.787000', '1346347954.0']
Address found in constant file

Pinging 10.40.80.18 with 32 bytes of data:
Reply from 10.40.80.18: bytes=32 time=6ms TTL=61

Ping statistics for 10.40.80.18:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 6ms, Maximum = 6ms, Average = 6ms
artp002 10.40.80.18 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0

['artp002', '10.40.80.18', '0', '2012-08-30', '13:32:34.787000', '2012-08-30', '13:32:34.787000', '1346347954.0']
Address found in constant file

Pinging 10.40.80.18 with 32 bytes of data:
Reply from 10.40.80.18: bytes=32 time=6ms TTL=61

Ping statistics for 10.40.80.18:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 6ms, Maximum = 6ms, Average = 6ms
artp002 10.40.80.18 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0

['artp002', '10.40.80.18', '0', '2012-08-30', '13:32:34.787000', '2012-08-30', '13:32:34.787000', '1346347954.0']
Address found in constant file

Pinging 10.40.80.18 with 32 bytes of data:
Reply from 10.40.80.18: bytes=32 time=6ms TTL=61 
```

这是`print (line)`后面的一些输出`for line in portslist:`

```
Getting ports from server

checking for constant file
calling reader main
artp002 10.40.80.18

artp002 10.40.80.18 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0

['artp002', '10.40.80.18', '0', '2012-08-30', '13:32:34.787000', '2012-08-30', '13:32:34.787000', '1346347954.0']
Address found in constant file

Pinging 10.40.80.18 with 32 bytes of data:
Reply from 10.40.80.18: bytes=32 time=8ms TTL=61

Ping statistics for 10.40.80.18:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 8ms, Maximum = 8ms, Average = 8ms
artp011 artp011.printers.xxxxxx.edu 0 2012-08-30 13:32:34.787000 2012-08-30 13:32:34.787000 1346347954.0

not in constant file

Pinging 10.40.80.18 with 32 bytes of data:
Reply from 10.40.80.18: bytes=32 time=8ms TTL=61 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:22:09.203

让你的代码更容易阅读和测试，然后你会更容易发现问题。具体来说：

*   为它们所持有的变量命名：
    *   `for port_info in portlines:`
    *   `for printer_details in consntantfile:`
*   用下划线分隔变量名中的单词：
    *   `printer_name`，不是`printername`。
    *   `old_utc`，不是`old_utc`。
*   不要依赖像`portlines`and这样的全局变量`constantfile`，而是将它们作为参数传递给这个函数。然后，您将能够使用一小组数据调用此函数，并手动调试问题。
*   向我们提供了两个文件的内容，以及您的程序的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:04:51.927

当您读取文件的所有行时，您必须使用 . 将光标回退到开头`file_object.seek(0)`。否则，进一步尝试读取行返回`None`。我在下面更正了您的代码，请参见最后一行：

```
def readermain():
    """called if constant file exists"""

    for line in portslist: #reads printer port list and parses name and port address 
        marker = line.split()
        printername=marker[0]
        address=marker[1]

        for lines in constantfile:
            if address in lines: #if the desired address is in the line
                lineholder=lines.split()
                print (lineholder)
                oldonline=lineholder[4]
                oldutc=lineholder[5]
                status=lineholder[2]
                address=lineholder[1]

        constantfile.seek(0) # rewinds the file 
```

# sql - 匹配表格以正确分组

> ID：12219655
> 
> 赞同：1
> 
> 时间：2012-08-31T17:01:42.120
> 
> 标签：sql, tsql, sql-server-2005

我在计算我们数据库中每个县、每个州的供应商数量时遇到了很多麻烦。希望有人可以帮助我。

我有一张名为供应商的表，其中列出了供应商 ID（键）及其当前分配。

下一个表称为邮政编码，我需要的列是邮政编码、FIPS（这是美国县的代码）和州。这只是可能的州、邮政编码和 fips 的列表

我的第三个表是 vendoraddresses，它列出了每个供应商的地址，但没有县或 fips 列，否则这将非常容易。这通过 vendorid 键链接到供应商表

最终表格是counties，其中每个fips 代码的县名排成一行（即：12345 = 县名）

我无法将所有这些表格一起使用以准确计算每个州每个县的供应商。我觉得这真的不应该那么难，但我猜我遇到了心理障碍。以下是我到目前为止所拥有的，但它不是我需要的。我想知道联合或类似的东西是否是将所有这些表放在一起的更好选择。

```
SELECT

va.state
,pc.fips
,count(v.vendorid) as vendors

FROM 
Vendors v
join vendoraddresses va on va.vendorid = v.vendorid
join postalcodes pc on pc.postalcode = va.postalcode
group by va.state, fips
order by va.state, fips 
```

所以在一些帮助下，我试图取得一些进展：

```
SELECT 
State1
,County
,COUNT(Vendor) as Vendors
FROM
(
SELECT
c.name as County, pc.State as State1, v.VendorID as Vendor
FROM 
Vendors v
join vendorserviceareas vsa on vsa.vendorid = v.vendorid
join vendorserviceareaentries vsae on vsae.vendorserviceareaid =     vsa.vendorserviceareaid 
join counties c on c.fips = vsae.fips
join postalcodes pc on pc.fips = c.fips

union 

select c.name as county, s.name as state1, vsa.Vendorid as Vendor from states s
join counties c on c.fips = s.fips
join vendorserviceareaentries vsae on vsae.fips = c.fips
join vendorserviceareas vsa on vsae.vendorserviceareaid = vsa.vendorserviceareaid 

)a
GROUP BY State1, County
Order BY State1, County 
```

我添加的其他表具有以下列（使用查询的缩写）vsa 列 1 = serviceareaid（数字 ID），列 2 = vendorid（数字 ID）列 3 = 描述（描述服务区域的文本）（varchar（50 ))

另一个表 vsae 有以下列，第 1 列 = serviceareaid - 与上表相同，fips = 县代码 (FK char (5)) 和邮政编码 (char (5))

对于更多信息，每个服务都可以称为“加利福尼亚”或类似的名称，然后系统会列出每个州，然后是县，然后是每个县内为服务区域列出的邮政编码，这就是我的大部分问题所在因为我可以得到每个县的任意数量的邮政编码，所以我对我试图做的事情进行了错误的计数。

我的最终目标是在不考虑一个县的邮政编码的情况下找出每个县有多少供应商。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:11:10.077

我相信您遇到的问题是邮政编码可以在多个县。您可以通过运行查询来检查：

```
select pc.fips, pc.postalcode, count(*)
from postalcodes pc
group by pc.fips, pc.postalcode
having count(*) > 1
order by 3 desc 
```

这将为您提供重复项列表。甚至还有跨州的邮政编码。

您需要为县分配邮政编码。如果您有其他信息，例如邮政编码和县相交的人口，您可以尝试以下操作：

```
from (select pc.*
      from (select pc.*, row_number() over (partition by postal_code order by pop desc) as seqnum
            from postalcodes pc
           ) pc
      where seqnum = 1
     ) pc 
```

这会将邮政编码分配给人口较多的县。

# java - 在 Seam2/Tomcat7 环境中使用 JPA/Hibernate 了解连接池/事务

> ID：12219656
> 
> 赞同：2
> 
> 时间：2012-08-31T17:01:52.913
> 
> 标签：java, hibernate, transactions, connection-pooling, seam2

看到这 3 个文件，我得出的结论是：
1）这个应用程序使用 JPA 和 Hibernate 作为提供程序？！
2）连接池由tomcat(context.xml)控制？！
3) 交易情况如何？Seamframework 容器在这里控制事务吗？还是没有事务控制器！？
4）如果2）是真的，如果我想把那个连接池换成hibernate的C3PO，这个改变会有多大的影响？

((( components.xml )))

```
<persistence:entity-manager-factory name="entityManagerFactory" persistence-unit-name="sampleDatabase" />
<persistence:managed-persistence-context entity-manager-factory="#{entityManagerFactory}" name="entityManager" />
<factory auto-create="true" name="hibernateSession" value="#{entityManager.delegate}" />
<transaction:entity-transaction entity-manager="#{entityManager}" /> 
```

(((persistence.xml)))

```
<persistence-unit name="sampleDatabase">
    <non-jta-data-source>java:comp/env/sampleDatasource</non-jta-data-source>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.jdbc.batch_size" value="20"/>
        <property name="hibernate.connection.provider_class" value="com.sample.util.RoleProvider" />
    </properties>
</persistence-unit> 
```

（（（上下文.xml）））

```
<Resource auth="Container"
          name="sampleDatasource"
          type="javax.sql.DataSource"
          driverClassName="oracle.jdbc.driver.OracleDriver"
          maxActive="2"
          maxIdle="1"
          username="sample"
          password="sample"
          url="jdbc:oracle:thin:@myserver:1521:DESENV" /> 
```

# python - Enthought Canopy 发行版中包含 scikit-learn 的升级版本

> ID：12219657
> 
> 赞同：8
> 
> 时间：2012-08-31T17:01:55.303
> 
> 标签：python, scikit-learn, enthought, canopy, pythonpath

我安装了 EPD 7.3.1（现在称为 Enthought Canopy），它随 scikit-learn v 0.11 一起提供。我正在运行 Ubuntu 12.04。我需要安装 scikit-learn 的 v 0.12。

scikit-learn[文档说](http://scikit-learn.org/dev/developers/index.html#git-repo)克隆存储库，将 scikit-learn 目录添加到您的 PYTHONPATH，并就地构建扩展：`python setup.py build_ext --inplace`

问题是 EPD 是它自己的封闭世界（有多个 scikit 目录）：
`./lib/python2.7/site-packages/scikits/`
`./lib/python2.7/site-packages/sklearn`

然后是：
`./EGG-INFO/scikit_learn/`

我真的不想尝试，因为它需要很长时间才能调整到这一点。在这种情况下，我应该遵循 scikit-learn 的指示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T17:28:20.087

scikit-learn 网站上描述的操作与 EPD 中的 scikit-learn 版本无关。Python 将自动使用`PYTHONPATH` [环境变量](http://en.wikipedia.org/wiki/Environment_variable)中设置的 scikit-learn 版本，您应该将其设置为 scikit-learn 的 Git 版本的目录路径。

如果您在类 Unix 系统上使用 Bash，您应该执行以下操作：

*   执行操作以[安装 scikit-learn 的最新代码](http://scikit-learn.org/dev/developers/index.html#retrieving-the-latest-code)（在此示例中，我将其克隆到`/home/yourname/bin/scikit-learn`）
*   编辑`.bashrc`并添加以下行：`export PYTHONPATH="/home/yourname/bin/scikit-learn";`
*   打开一个新终端并通过键入以交互模式启动 Python`python`
    *   类型：`import sklearn`
    *   类型：`sklearn.__verion__`这现在应该显示`'0.12-git'`而不是`0.11`

为什么这行得通？Python 在内部使用变量`sys.path`（`list`路径的 a）来跟踪它应该在其中查找模块和包的所有目录。一旦请求了模块或包，Python 将依次遍历此列表，直到找到匹配项。因此，例如，一个模块可以在 中多次列出`sys.path`，但只会使用列表中最先出现的版本。

每个 Python 安装都有自己的默认路径集，列在`sys.path`. 一种扩展方法`sys.path`是在`PYTHONPATH`. 一旦 Python 启动，它将读取此环境变量并将其添加到`sys.path`列表的开头。因此，如果您将另一个版本的 scikit-learn 的路径添加到您`PYTHONPATH`当时的（EPD）中，Python 将首先找到该版本的 scikit-learn 并使用它而不是`sys.path`.

要查看`sys.path`，干脆`import sys`再接再厉`print sys.path`。此外，例如，如果您只想在一个 Python 程序中使用 scikit-learn 的 0.12 版本，而在所有其他 Python 程序中默认使用 0.11 版本，那么您可以`PYTHONPATH`留空并仅手动插入 scikit-learn 0.12 的路径在代码的顶部：

```
import sys
sys.path.insert(0, '/home/yourname/bin/scikit-learn')
import sklearn 
```

# android - 从 mySQL 服务器获取数据时让 ListView 工作

> ID：12219661
> 
> 赞同：1
> 
> 时间：2012-08-31T17:02:13.353
> 
> 标签：android, mysql, database, json, listview

正如标题所说，我有一个包含数据的 mySQL 数据库。我希望我的 android 应用程序检索该数据并将其插入 ListView。我认为我做的不对，因为我当前的代码；虽然没有产生任何错误，但不起作用。这是我的代码：

[http://pastebin.com/sZy5dAzS](http://pastebin.com/sZy5dAzS)

我只想指出，当我将该数据插入 TextView 时，它会很好地显示在我的应用程序中。所以一定是我的 ListView 做错了什么。我只是不知道是什么。

只是为了更容易阅读这些是我的 ListView 的部分：

在我的代码顶部

```
List<String> nameData = new ArrayList<String>(); 
```

我的 JSON 解析的 for 循环：

```
 try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                currentList = (ListView) findViewById(R.id.list);

                for (int i = 0; i < jArray.length(); i++) {

                    json_data = jArray.getJSONObject(i);
                    nameData.add(drivername = json_data.getString("Driver_full_name"));
                    nameData.add(drivesfor = json_data.getString("Drives_for"));

                } 
```

正如您在 pastebin 链接中看到的那样，我确实有一个问题，只是还没有发布。

和 onPostExecute

```
protected void onPostExecute(String output){

        currentList.setAdapter(new ArrayAdapter<String>    (CurrentSeasonDrivers.this, android.R.layout.simple_list_item_2, nameData));
        Toast.makeText(CurrentSeasonDrivers, "DONE!",     Toast.LENGTH_LONG).show();

    } 
```

只是重申一下；提取数据时 TextView 工作正常，因此其余代码是正确的。

非常感谢提供的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:39:22.287

我不确定您的代码中的确切问题是什么，但我感觉它与您的适配器有关。我有一个建议，它应该可以工作，并且更好，更灵活，基本上是创建你自己的适配器。

首先制作一个小的 Driver 类，用作数据源

```
public class DriverItem {

    private String name;
    private String driversFor;

    public DriverItem(String n, String d) {
        super();
        this.name = n;
        this.driversFor = d;
    }

    // Getter and setter methods for all the fields.
    public String getName() {
        return name;
    }

    public String getDriversFor() {
        return driversFor;
    } 
```

}

**现在创建将用于创建视图的适配器**

```
public class DriverListItemAdapter extends BaseAdapter {
    private List<DriverItem> listDriverItem;
    private Context context;

    public DriverListItemAdapter(Context ctx, List<DriverItem> list)
    {
        context = ctx;
        listDriverItem = list;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        listDriverItem.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return listDriverItem.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup viewGroup) {
        // TODO Auto-generated method stub
        DriverItem driver = listDriverItem.get(position);

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        convertView = inflater.inflate(R.layout.list, null);
        TextView name = (TextView)convertView.findViewById(R.id.txtName);
        name.setText(driver.getName());

        return convertView
    }
} 
```

**现在您需要用于显示每个列表视图行的视图**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

    <TextView
        android:id="@+id/txtName"
        android:layout_height="wrap_parent"
        android:layout_width="fill_parent" 
        />
</LinearLayout> 
```

**现在在您的代码中，您只需创建驱动程序的arraylist，从中创建一个适配器，然后将该适配器设置在您的列表视图上。**

```
DriverListItemAdapter adapter;
ListView currentList = (ListView) findViewById(R.id.list);
ArrayList<DriverItem> listOfDriverListItem;

for(int i = 0; i < jArray.length(); i++){
            jObj = jArray.getJSONObject(i);        
            listOfDriverListItem.add(newDriverItem(jObj.getString("Driver_full_name"),jObj.getString("Drives_for")));
        }

adapter = new DriverListItemAdapter(this, listOfDriverListItem);
currentList.setAdapter(adapter); 
```

您应该能够将所有这些内容复制粘贴到他们自己的类中，它应该可以工作..并用我在底部给出的代码替换您的列表视图代码..这应该可以，如果您有任何问题，请告诉我

# arduino - Arduino LCD 时钟不工作

> ID：12219662
> 
> 赞同：0
> 
> 时间：2012-08-31T17:02:15.273
> 
> 标签：arduino

我有这段代码应该在 LCD 屏幕的第一行显示时钟，在第二行显示文本“Hello World”：

```
#include <LiquidCrystal.h>
int x=0;
int a=0;
int y=0;
int z=0;
int initialHours = 14;//set this to whatever
int initialMins = 37;
int initialSecs = 45 + 11;

int secspassed()
{
    x = initialHours*3600;
    x = x+(initialMins*60);
    x = x+initialSecs;
    x = x+(millis()/1000);
    return x;
}

int hours()
{
    y = secspassed();
    y = y/3600;
    y = y%24;
    return y;
}

int mins()
{
    z = secspassed();
    z = z/60;
    z = z%60;
    return z;
}

int secs()
{
    a = secspassed();
    a = a%60;
    return a;
}

LiquidCrystal lcd(8, 9, 4, 5, 6, 7);

void setup(){
    lcd.print("load...");
    delay(1000);
    lcd.begin(16, 2);
    lcd.setCursor(0, 1);
    lcd.print("Hello world");
}

void loop(){
    digitalClockDisplay();
}

void printDigits(byte digits){
    if(digits < 10)
        lcd.print('0');
    lcd.print(digits);
}

char sep()
{
    x = millis()/1000;
    if(x%2==0)
    {
        lcd.print(":");
    }
    else {
        lcd.print(" ");
    }
}

void digitalClockDisplay(){
    lcd.setCursor(0,0);
    printDigits(
    hours());
    sep();
    printDigits(mins());
    sep();
    printDigits(secs());
} 
```

而不是打印以下内容

```
12:35:15
Hello World 
```

它改为打印：

```
253:255:243
Hello World 
```

为什么？

我不想使用时间库，顺便说一句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:41:35.937

代码在这里溢出了[int](http://arduino.cc/en/Reference/Int) [对于 arduino，该值为 +/- 32767] 的容量：

```
int secspassed()
{
  x = initialHours*3600;
  x = x+(initialMins*60); 
```

此时 x 应该是：

> ```
> 14 * 3600 * 60 = 3024000 
> ```

这比一个 int 可以容纳的 +32767 值大得多，并且溢出被丢弃，留下代表一些无关紧要的位。

还应该清理使用 int 调用打印例程并将其转换为字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:45:40.433

我刚刚弄清楚了为什么这是一个坏主意，有[翻转](http://arduino.cc/en/Reference/Int "翻车")和其他东西。这是感兴趣的人的更新代码：

```
#include <LiquidCrystal.h>

int second=0, minute=0, hour=0;
int x=0;

LiquidCrystal lcd(8, 9, 4, 5, 6, 7);

void setup(){
    lcd.print("load...");
    delay(1000);
    lcd.begin(16, 2);
    lcd.setCursor(0, 1);
    lcd.print("Hello, world ");
}

void loop(){
    static unsigned long lastTick = 0;
    if (millis() - lastTick >= 1000) {
        lastTick = millis();
        second++;
    }

    // Move forward one minute every 60 seconds
    if (second >= 60) {
        minute++;
        second = 0; // Reset seconds to zero
    }

    // Move forward one hour every 60 minutes
    if (minute >=60) {
        hour++;
        minute = 0; // Reset minutes to zero
    }

    if (hour >=24) {
        hour=0;
        minute = 0; // Reset minutes to zero
    }
    digitalClockDisplay();
}

void printDigits(byte digits){
    if(digits < 10)
        lcd.print('0');
    lcd.print(digits);
}

char sep()
{
    x = millis()/500;
    if(x%2==0)
    {
        lcd.print(":");
    }
    else{
        lcd.print(" ");
    }
}

void digitalClockDisplay(){
    lcd.setCursor(0,0);
    printDigits(hour);
    sep();
    printDigits(minute);
    sep();
    printDigits(second);
} 
```

玩得开心！

PS：更新的代码，去[我的博客](http://antygravity.blogspot.com)。

# ios - NSURL:URLByAppendingPathComponent: 转换？进入 %3F，但随后 UIWebView 撤消了该转换，导致加载失败

> ID：12219666
> 
> 赞同：4
> 
> 时间：2012-08-31T17:02:34.130
> 
> 标签：ios, uiwebview

我正在加载一个本地 html 页面，并在 shouldStartLoadWithRequest: 中使用以下 url：

```
... /Library/Application%20Support/CDS/%3Fpid=27ce1ef8-c75e-403b-aea1-db1ae31e05cc/... 
```

在该页面中，如果用户单击链接以转到外部网站，则他们单击后退按钮，我的代码将处理它：

```
if ([self.webView canGoBack])
    [self.webView goBack]; 
```

但是，当由于调用 [self.webView goBack] 而再次调用 shouldStartLoadWithRequest: 时，传递给 shouldStartLoadWithRequest: 的 URL 已更改为：

```
`... /Library/Application%20Support/CDS/?pid=27ce1ef8-c75e-403b-aea1-db1ae31e05cc/..`. 
```

即操作系统已将 URL 中的“%3F”更改为“？”。

我从 shouldStartLoadWithRequest 中返回 YES：但由于“%3f”变成“？” 结果是 didFailLoadWithError: 被 WebKitErrorDomain 102 调用并且页面无法加载。

该文件实际上有 ? 在其名称中，但在构建传递给 UIWebView:loadRequest: 的 NSURL 对象的过程中，是 iOS 系统调用将其转换为 %3F：如下

```
NSURL *fullURL = [[NSFileManager defaultManager] URLForDirectory:NSApplicationSupportDirectory                                                                                 inDomain:NSUserDomainMask
                                                                          appropriateForURL:nil 
                                                                                           create: YES
                                                                                               error:&err];

fullURL = [fullURL URLByAppendingPathComponent:folderLocation isDirectory:YES];
fullRUL = [fullURL URLByAppendingPathComponent: pageToLoad isDirectory:NO];
NSURLRequest *requestObj = [NSURLRequest requestWithURL: fullURL];      
[self.webView loadRequest:requestObj]; 
```

folderLocation 是一个包含 ? 的 NSString，对 URLByAppendingPathComponent 的调用会自动将其转换为 %3F，如果没有该转换，页面加载将失败。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-11T20:22:56.573

查询参数必须使用 relativeToURL 方法添加。尝试以下代码；

```
NSURL *baseUrl = [self.baseURL URLByAppendingPathComponent:[NSString stringWithFormat:@"/api_url"]];

NSString *urlString = [[NSString stringWithFormat:@"?param1=%@&param2=%@", param1, param2] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL *url = [NSURL URLWithString:urlString relativeToURL:baseUrl];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T02:39:54.780

我没有使用文件网址，但我遇到了同样的问题。看来这是最好的处理方式。

```
NSString *newURLString = [[origurl absoluteString] stringByAppendingPathComponent:appendedString];
NSURL *url = [NSURL URLWithString:newURLString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T16:04:51.063

我以这种方式解决了同样的问题：

`let baseRequest = "yourURLString"`

`let URLRequest = NSMutableURLRequest(URL: NSURL(string: baseRequest)!)`

最重要的是将 URLRequest 作为由 String 创建的 URL 传递。

# jquery - 为什么我的点击事件处理程序没有为动态添加的链接触发？

> ID：12219672
> 
> 赞同：2
> 
> 时间：2012-08-31T17:02:59.980
> 
> 标签：jquery, jquery-1.4

我正在努力在页面上的一系列跨度标签之后动态添加带有点击事件处理程序的链接。该链接正在添加到页面中，但单击时事件处理程序未触发。Web 控制台中没有记录错误。我确信我在下面的代码中遗漏了一些*明显的东西：*

```
function changeClicked (e) {
    e.preventDefault();
    console.log('should work');
}

function initChangeOwner() {
    var changeLink = $('<a />', {
        href: '#',
        text: 'change',
        'class': 'changeLink',
        click: changeClicked
    });

    var licenseFor = $('[id*="LicenseFor"]').after(changeLink);
}

$(document).ready(function () {
    initChangeOwner();
    // other inits
}); 
```

为什么我的点击事件处理程序没有触发？对于那些喜欢摆弄的人，我[在 jsFiddle 上设置了一个示例](http://jsfiddle.net/ahsteele/xUjTd/1/)。

[* 这是一个使用 jQuery 1.4.1 的旧应用程序。不幸的是，现在不是将引用更新到新版本的时候。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:19:14.557

在您的特定情况下，无需花哨的动态绑定。看到您在添加元素时处于控制之中，并且您当时想要绑定事件，您可以在附加元素后单独绑定单击事件。

```
function initChangeOwner() {
    var changeLink = $('<a />', {
        href: '#',
        text: 'change',
        'class': 'changeLink'
    });

    var licenseFor = $('[id*="LicenseFor"]').after(changeLink);

    // Now the elements exist and you can bind the click event using the 'changeLink' class as a selector.
    $(".changeLink").click(function(event){changeClicked(event);});

} 
```

### [DEMO](http://jsfiddle.net/xUjTd/40/) - 创建元素后绑定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:22:36.283

重组你的代码，如：

```
function initChangeOwner() {
    $('[id*="LicenseFor"]').each(function(){
        var changeLink = $('<a />', {
            href: '#',
            text: 'change',
            'class': 'changeLink',
            click: changeClicked
        });
       $(this) .after(changeLink);
    });
} 
```

[http://jsfiddle.net/xUjTd/48/](http://jsfiddle.net/xUjTd/48/)这工作正常

我认为问题在于首先将一个事件附加到 changeLink，然后将其多次插入 DOM。[http://jsfiddle.net/xUjTd/60/](http://jsfiddle.net/xUjTd/60/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T17:15:06.047

通常我会说使用`.on()`，但看起来你正在使用 jQuery 1.4.4。

像这样为点击添加一个`.live()`事件：这一切都有效：

```
$('.changeLink').live('click', function (e) {
   changeClicked(e); 
}); 
```

看起来在 1.4.4 中存在某种错误，因为您无法将这些 click / onclick 属性添加到元素中。（*附带说明：：*无论如何，您**都不想在元素上使用click/onclick/onmouseover/etc**，每个单独（每个元素）在IE中创建一个脚本文件（降低性能）。它看起来也像你原来的代码在更高版本的 jQuery 中工作，只是在 1.8 中尝试过它工作正常。

此外，`return false;`在您的 changeClicked() 函数中使用（它对您都有作用`stopPropagation & preventDefault`，之后的任何内容都不会运行，以及`href="#"`锚点的属性。

```
function changeClicked(e) {
    console.log('here we are');

    return false; // stops link - preventDefault & stopPropagation
    console.log('it WONT get here');
} 
```

[**jsFiddle 演示**](http://jsfiddle.net/KfFv3/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T17:22:28.863

函数应该是这样的：

```
function initChangeOwner() {
  $('[id*="LicenseFor"]').each(function(index){
    var changeLink = $('<a />', {
    href: '#',
    text: 'change',
    'class': 'changeLink',
     click: changeClicked
   });

    $(this).after(changeLink);
  });
} 
```

[工作演示](http://jsfiddle.net/xUjTd/47/)

# deployment - 选择特定的 java 版本

> ID：12219679
> 
> 赞同：3
> 
> 时间：2012-08-31T17:03:31.340
> 
> 标签：deployment, java

如果我的机器安装了多个版本的 jre，比如 jre 5、jre 6 和 jre 7。是否可以强制我的应用程序在运行时使用特定的 jre（比如 jre 5）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:09:12.240

启动应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。它为[运行时版本控制](http://pscode.org/jws/version.html)提供了许多选项。

![JNLP 运行时设置](../Images/1233fc34e9b7c3be6ec5dae23219098a.png)

所有勾选的 JRE 都可供 JWS 启动的应用程序使用。

以下是在启动文件中选择任何 1.5 变体的方法。

```
<j2se version="1.5" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:15:09.150

我的电脑上有 3 个 JDK。每个 JDK 都有自己的环境变量

```
%JAVA_HOME_1_5%  
%JAVA_HOME_1_6%  
%JAVA_HOME_1_7% 
```

当我想使用特定的 JDK 时，我设置`%JAVA_HOME%`了这个变量。
我还使用脚本来使用不同的 JDK。例如，如果我想使用**JDK 6**启动 Jboss ，我运行下一个脚本

```
set JAVA_HOME=%JAVA_HOME_1_6%; 
%JBOSS_HOME%/run.bat 
```

如果我想执行 runnable jar (使用**JDK 5** ) 我运行下一个脚本

```
%JAVA_HOME_1_5%/bin java MyJar.jar 
```

**如果我想用JDK 7**运行 maven ，我正在使用下一个脚本

```
set JAVA_HOME=%JAVA_HOME_1_7%  
mvn clean install -Dmaven.test.skip=true 
```

等等

因此，您可以使用任何使用 env 的 JDK。变量和简单脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:10:27.620

在对应路径下运行java：

usr/local/jdk1.5/bin/java HelloWorld

usr/local/jdk1.6/bin/java HelloWorld

usr/local/jdk1.7/bin/java HelloWorld

ETC...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T17:12:12.497

在您正在运行的应用程序中使用

```
String javaVersion = System.getProperty("java.specification.version"); 
```

检查正在使用哪个版本的 Java 来运行您的应用程序。如果它与您想要的不匹配，您可以抛出异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T14:02:18.593

我找到了办法。[我们可以允许应用程序通过LINK](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/java.html)`javaw -version:"version String"`中给出的方式选择 jre

例如：javaw -version:"1.6.*"

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T17:07:13.490

您可以通过使用磁盘上到特定 Java 版本的绝对路径启动应用程序来强制应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T17:07:46.267

您通常必须在启动 java 之前执行此操作。在脚本中，您可以查找特定版本的 java 的可执行文件，如果该 jre 不存在/不在已知位置，则会失败。然后在找到那个版本的 java 之后用那个 jre 运行你的 java 程序。如何显式执行此操作取决于您的操作系统。

一旦进入 java 程序 java 你不能改变版本。因此，Java 版本检查（在 Java 程序内部）仅用于在完全执行之前退出而不是更改为有效版本。

# javascript - Onclick 事件失败但显示错误

> ID：12219684
> 
> 赞同：0
> 
> 时间：2012-08-31T17:04:15.330
> 
> 标签：javascript, javascript-events, onclick

我有一个 JavaScript 函数，它应该`<div>`动态生成并使用`<li></li>`. 标签上有一个调用函数的`onclick`事件，`<li></li>`但单击时，该函数不显示。请帮我。我浏览器上的控制台显示以下错误`Uncaught SyntaxError: Unexpected token }`。我的代码示例如下。

```
function showItem(categoryName) {
    cleanDiv();
    var alphabet = "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z";
    var alphabetArray = [];
    alphabetArray = alphabet.split(",");
    var stringData = '<div id="alphabet-menu"><h1>' + categoryName + '</h1><ul>';
    var letter;
    for (var i = 0; i < 26; i++) {
        letter = alphabetArray[i];
        stringData = stringData + '<li onclick="getData("' + categoryName + '","' + letter + '");">' + letter + '</li>';

    }
    stringData = stringData + '</ul></div><div id="list-menu"><input type="button" onclick="animateRight();"  value="Back"></input>' + '<div id="home-button" onclick="animateRight();"><img src="img/home.png"></div></div>';
    document.getElementById("content").innerHTML = '' + stringData + '';
}

function getData(category, letter) {
    alert(category + letter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:16:11.173

如下更改您的代码

```
letter = alphabetArray[i];
stringData = stringData+'<li onclick="getData(\''+categoryName+'\',\''+letter+'\');">'+letter+'</li>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:17:22.773

声明中有语法错误`getData`。这是一个工作小提琴：http: [//jsfiddle.net/CfRBc/](http://jsfiddle.net/CfRBc/)

# .net - 尝试从 MVC3 升级到 MVC4 时“操作可能会破坏运行时”

> ID：12219689
> 
> 赞同：6
> 
> 时间：2012-08-31T17:04:27.640
> 
> 标签：.net, asp.net-mvc-3, razor, exception-handling, asp.net-mvc-4

```
Server Error in '/' Application. 
```

有什么好的方法可以解决这个问题？我让调试逐步检查 global.asax 中的所有内容，并且那里没有错误。

```
Operation could destabilize the runtime.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Security.VerificationException: Operation could destabilize the runtime.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[VerificationException: Operation could destabilize the runtime.]
   System.Web.Mvc.Razor.MvcWebPageRazorHost.GetRidOfNamespace(String ns) +32
   System.Web.Mvc.Razor.MvcWebPageRazorHost..ctor(String virtualPath, String physicalPath) +199
   System.Web.Mvc.MvcWebRazorHostFactory.CreateHost(String virtualPath, String physicalPath) +113
   System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfigCore(RazorWebSectionGroup config, String virtualPath, String physicalPath) +422
   System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath, String physicalPath) +228
   System.Web.WebPages.Razor.WebRazorHostFactory.CreateHostFromConfig(String virtualPath) +38
   System.Web.WebPages.Razor.RazorBuildProvider.CreateHost() +51
   System.Web.WebPages.Razor.RazorBuildProvider.get_Host() +56
   System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode() +92
   System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType() +54
   System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider) +59
   System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders() +209
   System.Web.Compilation.BuildProvidersCompiler.PerformBuild() +15
   System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath) +9929933
   System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +299
   System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate) +103
   System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound) +165
   System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound) +33
   System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath) +40 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T01:50:42.990

尽管我的项目是.Net 4.5，但我遇到了完全相同的问题。[我按照将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4 的](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)步骤 7 解决了这个问题

复制到这里如下：

7.如果项目引用了任何使用以前版本的 ASP.NET MVC 编译的第三方库，打开根 Web.config 文件并在配置部分下添加以下三个 bindingRedirect 元素：

```
 <configuration>
  <!--... elements deleted for clarity ...-->

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" 
             publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" 
             publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="4.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" 
             publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T17:15:46.473

这是一件非常奇怪的事情 - 提供的信息不足以复制它......所以只是一些可能导致你看到的东西：

*   Intellitrace（关闭它，看看它是否有帮助）
*   使用任何“旧控件”（尤其是 V 1.1），将它们注释掉，看看它是否有帮助
*   信任级别，更改为`[assembly: SecurityRules(SecurityRuleSet.Level1)]`AssemblyInfo.cs 并查看是否有帮助

**它也可能是[.NET 4.5 运行时中的一个错误，](http://elegantcode.com/2012/08/23/net-4-5-operation-could-destabilize-the-runtime-yikes/)它在安装时充当 .NET 4 运行时的直接替代品，即使您的代码仅针对 .NET 4 也可以使用！**

从链接的文章中，Microsoft 已将 .Net 4.5/4.0 运行时的修复程序作为修补程序创建：http: [//support.microsoft.com/kb/2748645](http://support.microsoft.com/kb/2748645)

# r - 使用两个 for 循环在 R 中定义数据集和变量

> ID：12219692
> 
> 赞同：0
> 
> 时间：2012-08-31T17:04:32.180
> 
> 标签：r, for-loop, dataset

我需要在一个简单的循环中访问来自两个不同数据集的变量（如下）。（我意识到这要求负向量和正向量的长度相同......幸运的是，情况总是如此。）

```
Groups<-c("bdiControl","bdi")
Positive<-c("PA","Sad_PA","Amuse_PA","Happy_PA","Disgust_PA")
Negative<-c("NA","Sad_NA","Amuse_NA","Happy_NA","Disgust_NA")

for (g in Groups) {
    for (i in Positive) { 

if (sd(Groups[[g]]$Positive[[i]])<sdthresh | sd(Groups[[g]]$Negative[[i]]])<sdthresh){
cat('Standard deviation too low to run\ ',Positive[[i]],Negative[[i]],'\ comparison')
}
else{
corr<-cor(Groups[[g]]$Positive[[i]],Groups[[g]]$Negative[[i]],use="complete.obs") 
print("The correlation between " Positive[[i]] " and " Negative[[i]] " was " corr "for " Groups[[g]])
}
}
} 
```

我尝试过的其他参考资料包括 g$i、Groups[g]$Positive[i]、g$Positive[[i]] 和类似的排列。我想我在解决问题的过程中旋转我的轮子。帮助？！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:48:41.550

这段代码有很多问题。虽然并不完全清楚代码试图做什么（你应该更清楚地问你的问题），但我相信这会满足你的要求：

```
for (group.name in Groups) {
    g <- get(group.name)  # retrieve the actual data
    for (i in 1:length(Positive)) { 
        if (sd(g[[Positive[i]]]) < sdthresh | sd(g[[Negative[i]]]) < sdthresh) {
               cat('Standard deviation too low to run\ ',
                    Positive[[i]], Negative[[i]], '\ comparison')
        }
        else{
            corr<-cor(g[[Positive[i]]], g[[Negative[i]]],use="complete.obs")
            print(paste("The correlation between", Positive[[i]],
                    "and", Negative[[i]], "was", corr, "in", group.name))
        }
    }
} 
```

例如，当我创建随机数据集（始终提供可重现的示例！）时：

```
set.seed(1)
bdicontrol = as.data.frame(matrix(rnorm(100), nrow=10))
bdi = as.data.frame(matrix(rnorm(100), nrow=10))
colnames(bdicontrol) <- c(Positive, Negative)
colnames(bdi) <- c(Positive, Negative) 
```

输出是：

```
[1] "The correlation between PA and NA was -0.613362711250911 in bdicontrol"
[1] "The correlation between Sad_PA and Sad_NA was 0.321335485805636 in bdicontrol"
[1] "The correlation between Amuse_PA and Amuse_NA was 0.0824438791207575 in bdicontrol"
[1] "The correlation between Happy_PA and Happy_NA was -0.192023690189678 in bdicontrol"
[1] "The correlation between Disgust_PA and Disgust_NA was -0.326390681138363 in bdicontrol"
[1] "The correlation between PA and NA was 0.279863504447769 in bdi"
[1] "The correlation between Sad_PA and Sad_NA was 0.115897422274498 in bdi"
[1] "The correlation between Amuse_PA and Amuse_NA was -0.465274556165398 in bdi"
[1] "The correlation between Happy_PA and Happy_NA was 0.268076939911701 in bdi"
[1] "The correlation between Disgust_PA and Disgust_NA was 0.573745174454954 in bdi" 
```

# windows - 使用soap访问SSRS报告的特定部分？

> ID：12219701
> 
> 赞同：0
> 
> 时间：2012-08-31T17:04:55.917
> 
> 标签：windows, wcf, reporting-services

我们有一个连接到我们的应用程序的测试 WCF 客户端，它从报告中解析 xml 并将其显示在自定义表中。我们有一些单元格，我们希望能够折叠这些单元格，以获得最初在桌子上可行的唯一 ID 列表。问题是他们的数据太多，我想知道是否有一种方法可以首先从报告中加载 ID，然后在单击 ID 时动态调用额外信息。这样，我们将在应用程序启动时加载更少的数据。

我以为我可以通过报告的肥皂请求来做到这一点，但我真的不明白我应该如何弄清楚他们的 API。这是由过去的其他人为我们的 WCF 应用程序完成的。我想也许添加到这个可以让我只得到桌子的某个部分？也许我在处理这个问题的方式上完全错了。

```
public string Invoke(string reportPath, FilterViewModel reportParameter, NetworkCredential networkCredential)
{
    if (NetworkInterface.GetIsNetworkAvailable())
    {
        m_NetworkCredential = networkCredential;
        m_reportParameter = reportParameter;

        Dictionary<string, string> headers = new Dictionary<string, tring>();
        headers.Add("charset", "utf-8");
        headers.Add("useUnsafeHeaderParsing", "true");
        headers.Add("SOAPAction", "http://schemas.microsoft.com/sqlserver/2005/06/30/reporting/reportingservices/LoadReport");

        StringBuilder reqSOAPEnv = new StringBuilder();

        reqSOAPEnv.Append("<s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'>");

        reqSOAPEnv.Append("<s:Body xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' ");
        reqSOAPEnv.Append("xmlns:xsd='http://www.w3.org/2001/XMLSchema'>");

        reqSOAPEnv.Append("<LoadReport xmlns='http://schemas.microsoft.com/sqlserver/2005/06/30/reporting/reportingservices'>");
        reqSOAPEnv.Append("<Report>");
        reqSOAPEnv.Append(reportPath);
        reqSOAPEnv.Append("</Report>");
        reqSOAPEnv.Append("</LoadReport>");

        reqSOAPEnv.Append("</s:Body>");
        reqSOAPEnv.Append("</s:Envelope>");

        SSRS_ServiceRequestController serviceRequest = new SSRS_ServiceRequestController();
        result = serviceRequest.MakeWebRequest(ServiceURL, m_ContentType, m_Method, headers, networkCredential, reqSOAPEnv.ToString());
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:53:19.637

您看过[SSRS Web 服务文档](http://msdn.microsoft.com/en-US/library/ms154052%28v=sql.105%29)了吗？据我所知[，SOAP API](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010_methods%28v=sql.105%29)中没有任何方法可以获取报告的*一部分*。

一种解决方法可能是将报表呈现为 XML，并处理该 XML 以仅检索您需要的数据。另一种可能是为您要导出的表使用子报告，并且仅针对您的情况使用子报告本身。

顺便说一句，我知道您已经继承了您发布的代码，但看起来有点不对劲。为什么将 SOAP 请求构造为字符串？如果您为 SSRS Web 服务生成代理，并且只使用常规方法调用，这可能会容易得多 - 让框架为您处理 SOAP 内容。

# objective-c - 可可 setFrameSize 在 didFinishLoadForFrame

> ID：12219702
> 
> 赞同：0
> 
> 时间：2012-08-31T17:04:58.780
> 
> 标签：objective-c, xcode, cocoa, nsview

我在调整视图大小时遇到​​问题。

如果 mainView 是 NSView 对象的实例变量，我放置以下命令：

```
[self.mainView setFrameSize:NSMakeSize(1000, 1000)]; 
```

在我的一个实例函数中调用它，框架可以很好地调整大小。但是，如果我把它放在这里：

```
//called when the frame finishes loading
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)webFrame
{

    [self.mainView setFrameSize:NSMakeSize(1000, 1000)];

} 
```

它抛出以下错误：

```
2012-08-31 18:01:30.410 myApp[37822:303] -[__NSCFType mainView]: unrecognized selector sent to instance 0x10014bac0
2012-08-31 18:01:30.410 myApp[37822:303] *** WebKit discarded an uncaught exception in the webView:didFinishLoadForFrame: delegate: <NSInvalidArgumentException> -[__NSCFType mainView]: unrecognized selector sent to instance 0x10014bac0 
```

我应该补充一点，当 WebView 完全加载时，didFinishLoadForFrame 确实会运行，我可以从中 NSLog 一个 Hello World 就好了。只是不调整视图大小。

有人知道发生了什么吗？我对此很陌生。

EDIT mainView 是这样声明的：

```
@interface ContentViewController : NSViewController {
    IBOutlet NSView *mainView;
}
@property IBOutlet NSView *mainView; 
```

在 .xib 中合成和链接

# git - 整个 git repo 的 Code Collaborator 文件订阅

> ID：12219707
> 
> 赞同：0
> 
> 时间：2012-08-31T17:05:31.570
> 
> 标签：git, code-collaborator, github-codereviews

我试图弄清楚在特定 git 存储库上订阅任何 Code Collaborator 评论的正确文件模式是什么。

因此，假设我正在使用以下 git repo：

> ssh://username@host:port/path/to/repo/example.git

我必须添加到我的 Code Collaborator 首选项的文件模式是什么？

我想订阅任何其他用户提交的 repo 中的任何代码审查。我尝试了各种模式，但似乎没有什么对我有用。

可以在[此处](http://support.smartbear.com/viewarticle/25414/#file-subscriptions)的 Code Collaborator 手册中找到更多关于文件模式的信息（坦率地说，那里没有太多信息，但这就是我真正找到的全部内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:16:08.103

不幸的是，目前没有办法订阅特定 Git 存储库的代码审查。

虽然 Code Collaborator 确实存储了有关从中上传更改的存储库的信息，但该信息与文件路径是分开的，因此文件模式将无法匹配该信息。

我在我们的用户反馈论坛中添加了一个功能请求：http: [//feedback.codecollab.com/forums/4652-code-collaborator-features/suggestions/3138057-support-subscribing-to-reviews-from-特殊单片机](http://feedback.codecollab.com/forums/4652-code-collaborator-features/suggestions/3138057-support-subscribing-to-reviews-from-particular-scm)

同时，如果您只使用单个 git 存储库，那么您可以订阅具有“**”（不带引号）模式的*所有文件，这将产生等效的行为。*

或者，如果您正在处理不同存储库中的不同项目，您可以尝试搜索托管在 Git 存储库中的项目唯一的文件路径。例如：

src/java/main/com/example/yourproject/**

# r - 如何将对象传递给 R mtext()？

> ID：12219710
> 
> 赞同：2
> 
> 时间：2012-08-31T17:05:40.680
> 
> 标签：r, graphics

我打了几个电话来`mtext()`使用相同的`args`：

```
mtext(expression(bold("Exome SNP QQ Plots")), col="black", outer=TRUE, cex=1.3) 
```

我想创建一个包含这些的对象`args`，我可以将其传递给`mtext()`，而不是每次都重新创建它。我试图将`args`以上内容作为列表放入变量中：

```
PageTitle <- list(expression(bold("Exome SNP QQ Plots")), col="black", outer=TRUE, cex=1.3) 
```

然后将变量传递给`mtext()`：

```
mtext(PageTitle) 
```

这`mtext()`与使用一组完整的参数调用不同。我怀疑`mtext()`不是在寻找列表，而是在寻找不同类型的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:19:27.487

功能`do.call`是您正在寻找的：

```
do.call(mtext, PageTitle) 
```

我们有语法`do.call(what, args, quote = FALSE, envir = parent.frame())`，这里`what`是一个函数，`args`是函数调用的参数**列表**——你已经有了这个列表，这很好。`do.call`是一个非常有用的功能，在其他情况下也可能对您有所帮助。

# arrays - 用未知数的字符串填充动态数组

> ID：12219711
> 
> 赞同：1
> 
> 时间：2012-08-31T17:05:44.600
> 
> 标签：arrays, excel, vba, dynamic-arrays

如果已经回答了这个问题，我们深表歉意，但我无法在这里找到答案，也无法在谷歌上找到答案。我正在使用 Excel，所以我将引用列/行。

我需要创建一个具有几个条件的成本分析表，例如：

1.  什么是类别？（完整列表：水果、蔬菜、肉类）
2.  商品是从哪个供应商处购买的？（即Sobey's、Walmart等）

所以我有：

```
Dim catFruits() as string, catVegies() as string, catMeats() as string 
```

为每个类别声明数组。我让它在每一行的“类别”列下，并检查类别以选择正确的数组。我接下来要做的是逐行向下“供应商”列并将单元格的内容添加到选定的数组中，但如果供应商已经在数组中，则不会。我一直无法找到一种方法来做到这一点。到目前为止我所拥有的：

```
For x = 1 To lastRow
    If Sheet1.Cells(x, catCol).Text = "Fruits" Then
        catFruits() = Array(Sheet1.Cells(x, supCol).Text)
        '|----------what I want to do----------|
        catFruits() = Array(catFruits(), Sheet1.Cells(x,SupCol).Text)
        'so it's like "x = x + 1"
        '|-----but in a way that will work-----|
        '|----------and without dupes----------|
    ElseIf Sheet1.Cells(x, catCol).Text = "Vegetables" Then
        catVegies() = Array(Sheet1.Cells(x, supCol).Text)
    ElseIf Sheet1.Cells(x, catCol).Text = "Meats" Then
        catMeats() = Array(Sheet1.Cells(x, supCol).Text)
    End If
Next x 
```

我可以自己找出重复的部分，只是另一个循环，如果可以解决这个问题。

请放心，我使用的所有变量都已正确声明（可能数组除外，我不熟悉使用它们），并且正在使用 Option Explicit。

如果您需要任何其他信息，请尽管询问，我会尽我所能提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:58:04.573

除非有理由不使用字典，否则您可以使用`Dictionary`对象来执行此操作。它更易于使用，内置了这些功能，并且总体上更简洁一些。

有了这个，您应该最终得到一个对象，其中包含每个类别的唯一项目列表。

**编辑：**我将键设为项目，将值设为该项目的出现次数。

**再次编辑：**根据 Tim Williams 的建议，我把它做成了一本字典。这意味着您只需管理唯一性逻辑一次。

```
'AllCategories dictionary will be used to hold the text string unique to a cetegory
'(eg. "Fruits") as the key and the value will be a dictionary used to hold all the
'unique values and their count within that category
Dim AllCategories As Dictionary
Set AllCategories = New Dictionary
'category dictionaries
Dim catFruits As Dictionary, catVegies As Dictionary, catMeats As Dictionary
Set catFruits = New Dictionary 'if the Microsoft Scripting Runtime Reference is checked
Set catVegies = CreateObject("Scripting.Dictionary")  'if the MSR reference is NOT checked
Set catMeats = New Dictionary
'link all the category dictionaries to the AllCategories dictionary 
AllCategories.Add "Fruits", catFruits
AllCategories.Add "Vegetables", catVegies
AllCategories.Add "Meats", catMeats
'add more categories to the AllCategories dictionary here as needed

Dim categoryText As String, supColValue As String
For X = 1 To lastRow
    categoryText = Sheet1.Cells(X, catCol).text
    If AllCategories.Exists(categoryText) Then
        AllCategories (categoryText)
        supColValue = Sheet1.Cells(X, supCol).text
        If Not AllCategories(categoryText).Exists(supColValue) Then
            catFruits.Add supColValue, 1    'establish first entry of this supColValue and set count to 1
        Else
            catFruits(supColValue) = catFruits(supColValue) + 1 'increment the count of this supColValue by one
        End If
    Else
        'the value in Sheet1.Cells(X, catCol).text did not correspond to an established category
    End If
Next X 
```

您需要确保您有对 Microsoft Scripting Runtime 的引用`(Tools>References>Microsoft Scripting Runtime> check the box> OK)`。您可以按照 martin 在评论中描述的方式使用引用的对象，例如字典。这样做有好处。不过，我喜欢添加参考，以便您在对象上获得 Intellisense 文本。这样你就不需要记住所有的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:48:54.563

您可以使用`ReDim Preserve`为新元素腾出空间。然而，没有内置函数来验证一个项目是否已经在数组中，您必须自己编写一个，例如：

```
Function ItemPresent(myArray() As string, item As string) As Boolean

Dim v As Variant
For Each v In myArray
    If v = item Then
        ItemPresent = True
        Exit Function
    End If
Next
ItemPresent = False

End Function 
```

然后在您的 main 函数中，您将编写如下代码：

```
Option Base 0 'this is very important, it tells VBA the arrays are 0 indexed

...

Dim nCatFruits As Integer, nCatVegies As Integer, nCatMeats As Integer
nCatFruits = 0
nCatVegies = 0
nCatMeats = 0

...

ReDim Preserve catFruits(0 To nCatFruits)
nCatFruits = nCatFruits + 1
catFruits(nCatFruits - 1) = s 's contains the text you want to add to array 
```

# algorithm - 将“平稳性”添加到长系列十进制值的算法

> ID：12219723
> 
> 赞同：0
> 
> 时间：2012-08-31T17:06:39.193
> 
> 标签：algorithm, algorithmic-trading, hft

假设您想“保留”您的限价单以始终比当前报价便宜 0.10 美元购买“MSFT”。

因此，如果要约移动，您也应该移动您的订单。

例如，如果报价从 30.10 移至 30.11，您必须将订单从 30.00 移至 30.01

问题是，如果由于某种原因，报价在 30.10 和 30.11 之间频繁移动，您也会频繁移动您的订单。这太糟糕了，因为证券交易所对额外交易“收费”，所以我们应该尽可能少地保持交易数量。

所以我想让我的系列更“静止”。即我想将此类系列“30.00 30.01 30.00 30.01 30.00 30.01 30.02”替换为可能的系列“30.00 30.00 30.00 30.00 30.00 30.01 30.02”

我不知道“报价”将如何变化，但我需要“限制”我的订单的移动次数。

所以我建议使用这样简单的解决方案1：如果订单从Price1 移动到Price2，那么在下一个时间段（1 秒左右）内禁止将此订单移动到Price1。这将涵盖所有情况。例如：

1.  Price1 -> Price2 - 允许
2.  Price2 -> Price3 - 允许
3.  Price3 -> Price1 - 如果没有足够的时间，则下降

我也可以建议解决方案2：

而不是“当前报价”使用“最后一段时间的最低报价”。例如“最后一秒的最低报价”不会经常改变。

在“解决方案1”中，我立即对向上/向下变化做出反应，但过滤掉“重复”变化。但是，我仍然会“每期移动一次”。

在“解决方案2”中，我对向上变化做出“延迟”反应，并立即对向下变化做出反应，但有时我根本不会移动，因为每次最低报价重复时，我的“秒表”都会“重置”并“再次打勾”第二”。因此，如果“最低报价”每秒重复一次或更多，我将只停留在某个点而没有任何动作。

你觉得你能提出什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:41:39.947

不知道为什么你想要一个固定的偏移量（在这种情况下是 0.10）。我会选择 (0.10-x, 0.10+x) 范围。x 的选择将取决于交易费用。我会让你担心交易费用、x 和你的预期利润之间的关系。

# python - 在 PyQt 中拖动/移动 QPushButton

> ID：12219727
> 
> 赞同：9
> 
> 时间：2012-08-31T17:07:05.377
> 
> 标签：python, pyqt, pyqt4

我真的很难找到一种方法来做到这一点。假设我在小部件窗口中非常简单地实现了一个按钮：

```
self.button = QPushButton("Drag Me", self) 
```

我可以使用 将其初始化点移动到父小部件的区域周围，并且可以通过和`self.button.move(x,y)`获取鼠标事件，以便按钮移动到我单击的任何位置，但我似乎无法将所有这些放在一起拖放框架中。`mousePressEvent(self, e)``e.x()``e.y()`

澄清：在阅读了拖放的“真正”含义之后，这不是我需要的。我只想能够用鼠标移动小部件，这与在冰箱上移动磁铁的方式非常相似。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T19:19:18.157

这是一个仍然正确支持正常点击信号的可移动按钮的示例：

```
from PyQt4 import QtCore, QtGui

class DragButton(QtGui.QPushButton):

    def mousePressEvent(self, event):
        self.__mousePressPos = None
        self.__mouseMovePos = None
        if event.button() == QtCore.Qt.LeftButton:
            self.__mousePressPos = event.globalPos()
            self.__mouseMovePos = event.globalPos()

        super(DragButton, self).mousePressEvent(event)

    def mouseMoveEvent(self, event):
        if event.buttons() == QtCore.Qt.LeftButton:
            # adjust offset from clicked point to origin of widget
            currPos = self.mapToGlobal(self.pos())
            globalPos = event.globalPos()
            diff = globalPos - self.__mouseMovePos
            newPos = self.mapFromGlobal(currPos + diff)
            self.move(newPos)

            self.__mouseMovePos = globalPos

        super(DragButton, self).mouseMoveEvent(event)

    def mouseReleaseEvent(self, event):
        if self.__mousePressPos is not None:
            moved = event.globalPos() - self.__mousePressPos 
            if moved.manhattanLength() > 3:
                event.ignore()
                return

        super(DragButton, self).mouseReleaseEvent(event)

def clicked():
    print "click as normal!"

if __name__ == "__main__":
    app = QtGui.QApplication([])
    w = QtGui.QWidget()
    w.resize(800,600)

    button = DragButton("Drag", w)
    button.clicked.connect(clicked)

    w.show()
    app.exec_() 
```

在`mousePressEvent`I 中，记录了初始起始位置和将在整个拖动过程中更新的位置。

在 中`mouseMoveEvent`，我得到了小部件从单击位置到实际原点位置的适当偏移量，以便移动准确。

在 中`mouseReleaseEvent`，我检查整体移动是否大于至少一个很小的量。如果是，那么它就是一个拖拽，我们忽略正常事件以不产生“点击”信号。否则，我们允许正常的事件处理程序产生点击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:37:08.110

这取决于你想要做什么。如果您尝试进行实际的“拖放”，那您就错了。您所做的只是在其父项内的 X、Y 坐标空间中移动按钮。它从未真正调用任何拖放事件，这些是完全不同的。

您应该阅读此处的拖放文档：

[http://doc.qt.nokia.com/4.7-snapshot/dnd.html](http://doc.qt.nokia.com/4.7-snapshot/dnd.html)
[http://qt-project.org/doc/qt-5.0/qdrag.html](http://qt-project.org/doc/qt-5.0/qdrag.html)

您需要创建一个新的 QDrag 对象并执行它，而不是在 mousePressEvent 中移动按钮。您可以通过使用 QPixmap::grabWidget 方法拍摄按钮的快照并使用 QDrag::setPixmap 方法将其分配给 QDrag 实例，使其看起来像您的按钮。

如果您要做的只是在父空间中移动小部件，我建议您使用此框架并只接受按钮的放置事件。然后你就不会触发一堆不必要的重绘。

# git - 错误：目标文件为空 .git/objects/../.. 为空 - 致命：松散的对象...已损坏

> ID：12219731
> 
> 赞同：6
> 
> 时间：2012-08-31T17:07:17.180
> 
> 标签：git, corrupt

所以这是过去三周内第五次发生这种情况，我真的很难理解为什么这种情况会一直发生。这是我在执行“git status”时得到的确切信息

```
error: object file .git/objects/48/088f00d90b0d27de65336bb9ed9a75b0cfed33 is empty
fatal: loose object 48088f00d90b0d27de65336bb9ed9a75b0cfed33 (stored in .git/objects/48/088f00d90b0d27de65336bb9ed9a75b0cfed33) is corrupt 
```

我已经尝试过删除损坏的对象等建议，但同样的错误出现在另一个松散的对象上。每次我这样做时，最终都会有大约 30 个我必须删除的松散对象，然后在所有损坏的对象都消失后它仍然给我一个错误。

这是第五次发生这种情况，git 或与之相关的东西一定有问题。我已经尝试重新安装 git，但我仍然得到了损坏的对象。我正在使用运行 Ubuntu 的虚拟机，如果这会导致这样的事情，我不知道。我也尝试过切换到 Linux mint，我也解决了这个问题。

最后，我总是将更改保存到文本文件，删除我的存储库，从 git hub 拉新存储库，然后将更改重新编辑。这可行，但它很耗时，而且远非理想。我不一定要寻找解决此问题的方法，而是要寻找导致它的原因以及如何防止它再次发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-05-22T17:40:18.763

## 外行方式（用 GITHUB 测试）：

1.  转到您的项目目录
2.  显示隐藏文件
3.  删除`.git`文件夹
4.  将您的（远程）存储库克隆到不同的目录
5.  显示隐藏文件
6.  复制`.git`文件夹
7.  将其粘贴到您的旧项目目录中
8.  继续正常操作：`git add`, `git commit`,`git push`

奖励：
9.安然入睡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T19:00:24.993

这通常不会发生，因为 git 首先将文件内容写入临时文件，然后将文件重命名为最终位置。在实践中，由于文件系统损坏，我确实看到了空的 Git 对象文件（VirtualBox 的 vboxsf，用于文件夹共享，每当我看到人们抱怨这样的空文件时，似乎都是有罪的）。

设置`core.fsyncobjectfiles`为`true`可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-17T11:45:13.733

在我的情况下，我发现这个错误是由于我的本地存储库在 NFS 挂载的文件系统上引起的。如果存储库位于本地驱动器上，则它可以正常工作。我仍在寻找 NFS 问题是否有解决方法 - 也许 .gitignore 用于 .nfs* 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T09:55:05.303

运行 git prune 对我有用！您可能会丢失原点没有的旧本地/非活动分支

```
git prune origin 
```

# sql - 使用 SQL 从 Oracle 数据库中插入和检索 BLOB 数据的方法有哪些？

> ID：12219734
> 
> 赞同：6
> 
> 时间：2012-08-31T17:07:24.223
> 
> 标签：sql, database, oracle, oracle10g, oracle11g

我尝试使用 SQL 开发人员插入 BLOB 数据。但我找不到实际用于插入 BLOB 数据的插入语句。

除此之外，数据库速度真的很慢。对于小文件，它执行得很好。但是当我尝试将 50 mb avi 文件导入 BLOB 时，花了 3-4 分钟，但仍然没有完成。当我尝试将 BLOB 数据导出到文件时，导出过程也很慢。我使用的是 Oracle 10g Express Edition。如果数据库速度甚至比文件系统速度还慢，那么为什么要使用数据库来存储 BLOB 数据呢？有没有其他方法可以优化性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:19:13.587

首先，您应该**期望**将 BLOB 存储在数据库中（有时会慢一些，通常会显着）慢，但肯定不会比将它们存储在文件系统中快。将它们存储在数据库中的原因不在于性能，而在于例如：

*   在集群或负载平衡场景中（共享）文件系统不可用
*   易于备份：单个进程，使用文件和数据库时 2 个进程
*   交易安全：一个 BLOB 要么存在，要么不完整，但不处于半生不熟的阶段
*   其他我现在想不到的。

一般的经验法则是，如果您不关心这些，您应该将文件存储为 ... 文件。将元数据和路径名存储在数据库中是恕我直言的好习惯和常见做法。

关于 Oracle 调优：有相关书籍。我怀疑以死树平装书格式将它们加起来远远超过一吨。您可能首先查看 Oracle 进程的内存消耗 - 经验法则：如果它小于一个 gig 并且您使用 BLOB，那么您就有麻烦了。阅读不同的内存池以及如何增加它们。速成版可能有一些限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:40:54.283

这不是您可以与 sql-developer 一起使用的代码，它是使用 StringBuffer 来插入 blob 的 Java 代码。希望它会有用：

```
private void addBlob(oracle.jdbc.OracleConnection oracleConn, StringBuffer content) throws Exception
{    
      PreparedStatement st = null;
      try {                
            oracle.sql.BLOB blob = oracle.sql.BLOB.createTemporary(oracleConn, true, oracle.sql.BLOB.DURATION_SESSION);

            blob.setBytes(1, content.toString().getBytes("UTF-8"));

            st = oracleConn.prepareStatement("INSERT INTO MYTABLE (id, content) VALUES (MYTABLE_S.NEXTVAL, ?)");
            st.setBlob(1, blob);
            st.execute();
            st.close();
        }
        catch (Exception e) {
            utils.writeLog("Blob insertion Failed", e, utils.ERR);
            throw e;
        }        
        finally{
            st.close();
        }
  } 
```

# objective-c - 使用 UINavigationController 视图进行内存管理

> ID：12219738
> 
> 赞同：0
> 
> 时间：2012-08-31T17:07:51.010
> 
> 标签：objective-c, ios, memory-leaks, uinavigationcontroller

我的应用程序一开始是基于视图的，但后来我不得不更改为基于导航。我这样做的方法是在我的 UINavigationController 中创建一个成员`AppDelegate`并调用`pushViewController`该`didFinishLaunchingWithOptions`方法：

```
@property (nonatomic, retain) IBOutlet UINavigationController *navigator;

// didFinishLaunchingWithOptions implementation
MainController *mainView = [[MainController alloc] initWithNibName:@"MainController" bundle:nil];
navigator = [[UINavigationController alloc]init];
[navigator pushViewController:newSongView animated:YES];
[mainView release]; 
```

在我的`MainController view`我有一个按钮调用此方法并将用户发送到下一个视图：

```
- (IBAction)newViewLoader:(id)sender {
    SecondViewController *secVC = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self.navigationController pushViewController:secVC animated:YES];
} 
```

这工作正常，但按下此按钮的那一刻，模拟器开始使用 5MB 以上的内存。当我按下`back`导航栏上的按钮而不是按下调用该`newViewLoader`方法的按钮时，模拟器会多占用 5MB。以此类推，每次加载第二个视图时。所以加载这个视图是相当昂贵的。

*按下后退按钮时是否有某种方法可以卸载视图，这样每次打开视图时内存就不会一直增加？*这是每次加载视图时发生的[屏幕截图。](http://i.stack.imgur.com/ZMYX7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:07:54.217

如果您没有使用 ARC，那么您的 IBAction 中至少有一次内存泄漏。它应该是：

```
- (IBAction)newViewLoader:(id)sender {
    SecondViewController *secVC = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [self.navigationController pushViewController:secVC animated:YES];
    [secVC release];
} 
```

或者我更喜欢什么：

```
- (IBAction)newViewLoader:(id)sender {
    SecondViewController *secVC = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
    [self.navigationController pushViewController:secVC animated:YES];
} 
```

否则你的 secVC 永远不会被释放。您可以尝试添加版本，看看会发生什么。

但是，您确实应该使用 ARC，即自动引用计数。这会为您处理发布。在此处阅读：http: [//developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# ruby-on-rails - 将 Rails 应用程序集成到用 wordpress 制作的网站中

> ID：12219740
> 
> 赞同：9
> 
> 时间：2012-08-31T17:08:03.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wordpress

我目前正在 Rails 3.2 中构建一个应用程序（一个分析器工具）。我刚刚在开发阶段完成了它。我让我们的设计师开始设计我们的新网站，这个应用程序将在其中集成。

不过我有一个想法，很想得到一个反馈。

如果网站是建立在 WordPress 上的，但是那个分析器工具（它内置在 rails 中），它有自己的后端/报告系统，并且网站的那个元素占了自定义编码，该怎么办？所以它是 Wordpress 和这个分析工具的混合体？这可能吗？如果可能的话，您是否预见到任何挑战？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:15:37.553

您可能想查看此插件的 wordpress：

[http://wordpress.org/extend/plugins/rails-integration-api/](http://wordpress.org/extend/plugins/rails-integration-api/)

它基本上将任何 3rd 方应用程序（例如 Wordpress）复制到 Rails 应用程序的子目录中。

真正的挑战在于细节.... WP 站点和 Rails 应用程序中的管理员之间的身份验证、授权等。您应该问自己的一个问题是网站（wp）和 Rails 应用程序需要交谈多少彼此，如果有的话？

但是，如果 WP 站点主要用作信息站点或博客，则可以将 WP 站点放在 rails 应用程序的 /public 目录中，调整配置文件（如果您正在运行 Apache/Passenger 等） ，然后从那里去。

# html - 如何使用 POST 方法从文本区域获取 servlet 中的特殊字符？

> ID：12219741
> 
> 赞同：0
> 
> 时间：2012-08-31T17:08:20.213
> 
> 标签：html, jsp, servlets, encoding

所以这是我的html代码：

```
<!doctype html>
<html lang="fr">
  ...
  <form action="servlet" method="post">
    <textarea name="content" rows="30" cols="80" spellcheck="false"></textarea>
    <input type="submit" value="SEND" />
  </form>
  ...
</html> 
```

然后是servlet部分

```
String content = request.getParameter("content");
System.out.println(content); 
```

问题是，如果我在 textarea 中键入“é”，结果将打印为“？”。我可能是一个编码问题，但我不能让它工作。我尝试在我的 jsp 页面中将字符编码更改为 UTF-8，然后将以下行添加到我的 servlet

```
request.setCharacterEncoding("UTF-8"); 
```

但这并没有改变任何东西。我该怎么办 ？同样，我是 JSP/Java EE 的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:13:16.363

这是一系列 4 个步骤

首先，您必须配置您的 Web 服务器。

然后，您必须强制您的 Web 应用程序对所有请求/响应使用 UTF-8 编码。

第三，你必须使用 JSP 页面编码（你已经这样做了）

最后你必须使用 HMTL-meta 标签

这是适合您的完美文章[如何让 UTF-8 在 Java webapps 中工作？](https://stackoverflow.com/questions/138948/how-to-get-utf-8-working-in-java-webapps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:00:12.970

好的，我终于让它工作了。我尝试了一切，但仍然得到？而不是 é ，我想这可能是我的服务器故障，因为我不使用 Tomcat 或除了嵌入式 Jetty 之外的其他任何东西，哪个配置不是那么清楚。

所以我使用 JavaScript 发送正确编码的字符串：

```
send( encodeURIComponent(txtarea.value) ); 
```

在服务器端，我使用这个小功能对其进行解码：

```
java.net.URLDecoder.decode(request.getParameter("content"), "utf-8"); 
```

# ruby-on-rails - 我可以在 Rails 应用程序中使用多个日志记录库吗？

> ID：12219747
> 
> 赞同：1
> 
> 时间：2012-08-31T17:08:58.733
> 
> 标签：ruby-on-rails, logging

我想将内置 Logger 用于某些操作，将 log4r 用于其他一些操作... [指南解释说](http://guides.rubyonrails.org/debugging_rails_applications.html)记录器是在应用程序级配置文件中设置的，例如：

```
Rails.logger = Logger.new(STDOUT)
Rails.logger = Log4r::Logger.new("Application Log") 
```

有没有办法在控制器或模型级别设置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:26:00.810

您始终可以编写[自定义记录器](http://dennisreimann.de/blog/silencing-the-rails-log-on-a-per-action-basis/)：

*   将所有内容发送到`Logger`某些操作；
*   将所有内容发送到`Log4r`其他操作；
*   并为其他所有内容静音记录；

# jsp - jsp中的动态表单

> ID：12219757
> 
> 赞同：2
> 
> 时间：2012-08-31T17:09:53.033
> 
> 标签：jsp

我使用 JavaScript 在 JSP 中构建了一个动态表。在那种情况下，当我单击“添加更多”链接时，它会将行添加到表中。但是我无法使用 java 捕获这些值并将其传递给数据库。我怎样才能使用 javaScript 做到这一点？

这里我附上了我用来添加行的javascript

```
function addRow(tableID) {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var cell0 = row.insertCell(0);
    cell0.innerHTML=rowCount ;
        var cell1= row.insertCell(1);
        var element1 = document.createElement("input");
        cell1.appendChild(element1);
           element1.name="description"+rowCount;
           element1.align = "center";
           element1.size=30;

        var cell2= row.insertCell(2);
        var element2 = document.createElement("input");
        cell2.appendChild(element2);
           element2.name="required"+rowCount;
           element2.align= "center";
           element2.size=5;

        var cell3= row.insertCell(3);
        var element3 = document.createElement("input");
        cell3.appendChild(element3);
           element3.name="floor"+rowCount;
           element3.align= "center";
           element3.size=20; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:33:04.347

您将需要某种类型的提交操作，以重新调用 servlet/控制器上的 doPost 方法。您必须以这种方式通过控制器将数据向下传递给实体 bean。

添加提交按钮，在 servlet 中从字段中读取数据，然后将其向下发送到堆栈到数据库

# php - 使用 .htaccess 隐藏带有 url 重写的 .php 扩展名

> ID：12219759
> 
> 赞同：0
> 
> 时间：2012-08-31T17:10:14.067
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我有以下网址`http://www.example.com/teams.php?team_id=12` 我希望这个网址是`http://www.example.com/teams-pavilion-boys-varsity-soccer`

我试过下面的代码

```
Options +FollowSymlinks    
RewriteEngine on    
RewriteRule ^teams-([0-9a-zA-Z]+)\.html$ teams.php?team_id=$1 
```

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:29:09.540

看一下这个：

[http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

我建议传递`team_name`而不是或者你可以从id`team_id`中找出。`team_name`我什至会传递你需要的所有东西，比如“城镇”“性别”“等级”“运动”

```
RewriteEngine on
RewriteRule ^teams-([a-zA-Z0-9_-]+)$ teams.php?team_name=$1 
```

或者

```
RewriteEngine on
RewriteRule ^teams-([a-zA-Z0-9_-]+)-([a-zA-Z0-9_-]+)-([a-zA-Z0-9_-]+)-([a-zA-Z0-9_-]+)$ teams.php?team_town=$1&team_gender=$2&team_rank=$3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T17:25:21.453

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -f [OR]

RewriteCond %{REQUEST_FILENAME} -d

RewriteRule .* - [L]

RewriteRule ^(.*)$ [URLHERE] [NC] 
```

[看这个](http://www.youtube.com/watch?v=VZw4XJuRw3U)

# css - 如何在引导程序中禁用“响应式”网格？

> ID：12219760
> 
> 赞同：4
> 
> 时间：2012-08-31T17:10:18.390
> 
> 标签：css, twitter-bootstrap

因此，引导程序的响应式网格对我的网站来说看起来很糟糕。当您缩小窗口时，所有内容都会被混合在一起，并且导航栏会折叠成三行（我禁用了响应式折叠导航栏）。

我尝试删除 bootstrap-responsive.css ，但它仍然会发生“流动的实时网格崩溃”的事情。这让我疯狂。

如何设置导航栏和整个页面的最小宽度？这样就不会将所有内容推到一起，您必须使用水平滚动条来导航页面。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T17:46:20.133

删除**bootstrap-responsive.css**应该为您提供您想要的行为。只要您正在使用而不是在父容器中，所有**span*类在常规 Bootstrap 中都是显式宽度。**该类不提供任何宽度约束，并且两者都没有。但是，该类在标准**bootstrap.css**中确实具有 940px 的显式宽度。`row``row-fluid``row``<body>``container`

# c# - 从一个盒子建立多个 TCP 连接以进行压力测试

> ID：12219763
> 
> 赞同：1
> 
> 时间：2012-08-31T17:10:43.213
> 
> 标签：c#, tcp, stress-testing

我正在编写一个 C# NUnit 测试，它与服务器建立 100 个并发 TCP 连接。测试的目的是给服务器施加压力。

为此，测试创建了 100 个新线程，循环它们并调用`thread.Start()`，然后再次循环它们并调用`thread.Join()`。

每个线程将执行一个建立 TCP 连接的方法，请求一些数据，检查接收到的数据是否为空，然后打印完成所需的时间。

我注意到，对于 100 个连接，每个线程完成其任务所需的时间从 2 秒上升到 50 秒，对于稍后写入控制台的线程。但是，当我在每次调用之间引入 2 秒延迟`thread.Start()`时，每个线程所需的时间是 2 秒。

在无延迟情况下，我想知道所需时间的增加是否可能是由于运行单元测试的机器（即我的开发箱）出现问题。例如，也许 .NET/Windows 7 由于资源原因，不允许一个接一个地创建 100 个 TCP 连接。

**请有TCP编程知识的人发表评论吗？我可以使用哪些工具来确定我的开发盒是否是瓶颈？**

**目标是了解结果是否实际上是服务器的有效压力测试结果。**

```
public void ServerStressTest()
{
    const int NUMBER_OF_REQUESTS = 10;
    const int DELAY_BETWEEN_REQUESTS = 0;
    var threads = new System.Collections.Generic.List<Thread>();
    var urls = new StaticDataUrls();

    Console.WriteLine(string.Format("Requesting static data from the server {0} times with {1} seconds delay between subsequent requests...", NUMBER_OF_REQUESTS, DELAY_BETWEEN_REQUESTS));

    for (int i = 0; i < NUMBER_OF_REQUESTS; i++)
    {
        var callNumber = i; // prevent access to modified closure
        threads.Add(new Thread(() => FetchStaticData(urls, callNumber)));
    }

    threads.Apply(t =>
                      {
                          Thread.Sleep(DELAY_BETWEEN_REQUESTS * 1000); 
                          t.Start();
                      });

    threads.Apply(t => t.Join());
}

private void FetchStaticData(StaticDataUrls urls, int callNumber)
{
    var restAdapter = new RestAdapter(true, new Log4NetLogger(GetType()));

    var stopwatch = Stopwatch.StartNew();
    var underlyingResults = restAdapter.Get(urls.UnderlyingUrl);
    var clientResults = restAdapter.Get(urls.ClientUrl);
    stopwatch.Stop();

    var missingData = new System.Collections.Generic.List<string>();
    if(string.IsNullOrEmpty(clientResults.ResponseData)) missingData.Add("client");
    if(string.IsNullOrEmpty(underlyingResults.ResponseData)) missingData.Add("underlying");

    Console.WriteLine(missingData.Count > 0
                          ? string.Format("Call {0}: No {1} data received in {2} seconds", callNumber, string.Join(", ", missingData.ToArray()), stopwatch.Elapsed.Seconds)
                          : string.Format("Call {0}: Completed with all data in {1} seconds", callNumber, stopwatch.Elapsed.Seconds));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:18:24.617

可能发生的情况是，当您在启动新线程之间没有延迟时，您的 CPU/网络负载会上升，并且每个线程需要更长的时间，因为每个线程都与其他线程共享 CPU 时间。

但是，当您以 2 秒的间隔启动每个线程时，您实际上是在允许每个线程在新线程开始之前完成。

如果您尝试打开太多 TCP 连接，如果 .NET 运行时没有给出某种类型的异常，我会感到惊讶。

无延迟方法是一个不错的压力测试。

# c# - 如何在 SELECT 中使用 NULL

> ID：12219767
> 
> 赞同：0
> 
> 时间：2012-08-31T17:11:47.203
> 
> 标签：c#, sql, linq

我想在我的选择语句中使用 NULL，如下所示：

```
select NULL,
       name,
       NULL
from   names 
```

如何在 LINQ 中编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:16:44.187

基于 Candie 的回答，如果您使用匿名类型，则需要指定`null`属性值：

```
class Name
{
    public string FirstName { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        var names = new List<Name>() { new Name() { FirstName = "Albert"}, 
                                        new Name() { FirstName = "Bob"}};

        var values = from n in names
                     select new
                     {
                         FirstVal = null as object,
                         SecondVal = n.FirstName,
                         ThirdVal = null as object
                     };
   }
} 
```

您不能分配`null`给匿名类型的属性，因此您必须将其强制转换为`object`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:29:11.990

谢谢你，我想我找到了另一种方法，但没有经过测试：

```
select new
{
    firstVal = String.Empty,
    SecondVal = n.FirstName
} 
```

# python - 在 pandas 中聚合数据

> ID：12219771
> 
> 赞同：0
> 
> 时间：2012-08-31T17:11:59.813
> 
> 标签：python, numpy, pandas

我正在尝试探索 Pandas 库，并通过一个我经常遇到的例子停下来，我认为 pandas 有解决方案。给定以下代码：

```
In [63]: d1 = np.random.rand(3,3)
In [63]: d2 = np.random.rand(3,3)

In [64]:s1 = pandas.Series(d1,index = [['a1']*d1.shape[0],
                             [4]*d1.shape[0],
                             range(d1.shape[0])])

Out[64]:a1  4  0    [ 0.00881133  0.71344668  0.03611378]
               1    [ 0.37328776  0.63195947  0.23000941]
               2    [ 0.68466443  0.85891677  0.31740809]

In [65]: s2 = pandas.Series(d2,index = [['a2']*d2.shape[0],
                             [5]*d2.shape[0],
                             range(d2.shape[0])])
Out[65]:a2  5  0    [ 0.00881133  0.71344668  0.03611378]
               1    [ 0.37328776  0.63195947  0.23000941]
               2    [ 0.68466443  0.85891677  0.31740809]

s = s1.append(s2)

a1  4  0    [ 0.00881133  0.71344668  0.03611378]
       1    [ 0.37328776  0.63195947  0.23000941]
       2    [ 0.68466443  0.85891677  0.31740809]
    5  0    [ 0.00881133  0.71344668  0.03611378]
       1    [ 0.37328776  0.63195947  0.23000941]
       2    [ 0.68466443  0.85891677  0.31740809] 
```

如何在没有标签的情况下单独获取所有数据矩阵的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:07:29.207

`s.values` will do the trick.

From the [documentation](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.values.html?highlight=values#pandas.DataFrame.values): `DataFrame.values` Convert the frame to its Numpy-array matrix representation."

I think you mean `pandas.DataFrame` above (not `Series`). `Series.values` exists as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:26:00.290

我在运行您的代码时遇到错误。但是，要将 pandas Series 转换为 numpy 数组，请使用该[`pandas.Series.values`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.values.html#pandas.Series.values) 方法。Wes 的[文档](http://pandas.pydata.org/pandas-docs/stable/index.html)做得非常好。花点时间复习...

# iphone - NSNotificationCenter 两次删除观察者

> ID：12219774
> 
> 赞同：1
> 
> 时间：2012-08-31T17:12:12.010
> 
> 标签：iphone, objective-c, xcode, nsnotificationcenter

在我的代码中，有一个罕见的例子，观察者将被第二次移除。这会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:15:58.443

是的。如果您不是观察者并且您尝试移除自己，您的应用程序将会崩溃。没有办法检查您是否已注册，因此您必须创建一个 ivar 来标记您是否被添加为观察者（或者，也许更好的是，计算您被添加为观察者的次数）并在实际删除自己之前检查 ivar。

**编辑：**原来你可以在添加之前删除自己，所以我想，虽然这不是一个很好的设计，但如果你删除自己两次也没关系。

# php - 添加 substr() 到

> ID：12219776
> 
> 赞同：0
> 
> 时间：2012-08-31T17:12:42.347
> 
> 标签：php, wordpress

我发现了一些关于将 substr() 添加到变量而不是函数的教程。到目前为止，html 中的输出是：

```
<div class="symbol"><?php the_title();?></h3> 
```

`the_title()`当我将鼠标悬停在它上面时，它会在 Eclipse 中显示以下功能：

```
function = the_title($before = '', $after = '', $echo = true){
    $title = get_the_title();

    if (strlen($title) == 0 )
        return
    $title = $before . $title . $after

    if ($echo)
        echo $title;

    else
        ... 
```

我只是不确定是否需要在后端页面中添加该功能，或者我可以在前端对其进行编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:15:36.560

您可以使用`get_the_title()`wordpress 中的函数来获取以字符串形式返回的当前标题：

```
$title = get_the_title();
$title_substr = substr($title, -1); 
```

您不必将标题存储在变量中，您可以直接转到：

```
$substr = substr(get_the_title(), -1); 
```

# javascript - 如何一次验证所有输入字段？

> ID：12219779
> 
> 赞同：0
> 
> 时间：2012-08-31T17:12:59.020
> 
> 标签：javascript, validation

我在一个页面上有 11 个输入，一些是文本输入，一些是下拉菜单。我想验证每一个，以确保在单击底部的提交按钮时它不是空白的，并且有一个适当的消息显示特定于每一个，上面写着“此字段为空白”，“此字段”是每个字段的名称，具体取决于它是否为空白。我只是想知道是否有一种简单的方法可以做到这一点，而无需为 11 个字段中的每个字段创建表单并使用 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:23:04.417

```
$("#myForm input").each(function(){
   if($(this).val() == "")
   {
     //DO SOMETHING
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:15:28.227

我建议您不要重新创建轮子，而只需使用一个 javascript 验证插件即可完成您想要的。

目前最流行的 jQuery 验证插件是这个：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:17:05.203

如果您只是检查它们是否都不是空的，最简单的方法是使用某种遍历每个输入的循环。如果它找到一个空的，激活它旁边的某种错误消息，以便所有字段立即显示错误。

# weblogic12c - 如何在 weblogic server 12c 中关闭 SIP 支持

> ID：12219782
> 
> 赞同：1
> 
> 时间：2012-08-31T17:13:18.433
> 
> 标签：weblogic12c

如何在 weblogic 12c 中关闭 SIP 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T19:48:23.883

您可以通过从域的 config/config.xml 文件中删除对 SIP 的引用来禁用域中的 SIP 支持。

关闭 WLS。请务必在进行任何更改之前备份您的 config.xml 文件然后删除以下内容：

```
<network-access-point>
  <name>sip</name>
  <protocol>sip</protocol>
  <listen-port>5060</listen-port>
  <public-port>5060</public-port>
  <http-enabled-for-this-protocol>false</http-enabled-for-this-protocol>
  <outbound-enabled>true</outbound-enabled>
</network-access-point>
<network-access-point>
  <name>sips</name>
  <protocol>sips</protocol>
  <listen-port>5061</listen-port>
  <public-port>5061</public-port>
  <http-enabled-for-this-protocol>false</http-enabled-for-this-protocol>
  <outbound-enabled>true</outbound-enabled>
</network-access-point> 
```

最后删除这个：

```
<custom-resource>
    <name>sipserver</name>
    <target>AdminServer</target>
    <descriptor-file-name>custom/sipserver.xml</descriptor-file-name>
    <resource-class>com.bea.wcp.sip.management.descriptor.resource.SipServerResource</resource-class>
    <descriptor-bean-class>com.bea.wcp.sip.management.descriptor.beans.SipServerBean</descriptor-bean-class>
  </custom-resource> 
```

启动 WLS 时，不会启动 SIP。这对我的 WLS 12c 域非常有效。

# php - 使用复选框从数据库中删除多个数据

> ID：12219783
> 
> 赞同：0
> 
> 时间：2012-08-31T17:13:26.520
> 
> 标签：php, database, sql-delete

如何使用复选框从表中删除多个数据？我有这个代码：

```
<form id="prefForm" action="coments-del.php" method="post">

<?

$result = mysql_query("SELECT * FROM comments");      
$myrow = mysql_fetch_array($result);

do
{
    $res = mysql_query("SELECT title FROM data WHERE id=$myrow[post]");
    $row = mysql_fetch_array($res);
    printf ("
         <tr>
           <td>
                <input type='checkbox' name='id' value='%s'  />
                </td>        
                <td>%s</td>
           <td>%s</td>
                <td>%s</td>
         ",$myrow["id"],$myrow["id"],$myrow["author"],$myrow["text"]);
}
while ($myrow = mysql_fetch_array($result));
?>

<input name="submit-button" type="submit" value="Delete" />
</form> 
```

这是您在上面的脚本中提交表单后得到的comments-del.php。

头上是：

```
if (isset($_POST['id'])) { $id = $_POST['id']; } 
```

正文是处理删除的代码。

```
<?php 
if (isset($id)) {
    $result = mysql_query ("DELETE FROM comments WHERE id='$id'");

    if ($result == 'true') {echo "Comment Deleted!";}
    else {echo "Error: Nothing was deleted!";}

} else {
    echo "Unknown Error! Contact Administrator.";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:27:14.643

第一步是使您的复选框名称成为一个数组。

```
<input type='checkbox' name='id[]' value='%s'  /> 
```

当您的脚本收到帖子时，将该数组解析为适当的 sql 子句。

```
$clause="";
if (isset($_POST['id'])) { 
   foreach ($_POST['id'] as $p)
   $clause.="id='$p' OR"; 
}
$clause=substr($clause,0,-2); 
```

最后将该子句放入where子句中的查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:22:39.503

我不确定我是否理解你，但我通常将 PK 保存到一个数组中，然后执行以下操作：

```
<?php
//... process your ids (eg. filter out not numerical values) and save into an array

if(count($ids_array)>0){
   mysql_query('DELETE FROM comments WHERE id IN ('.implode(',', $ids_array).')');
}
?> 
```

# asp.net-mvc-4 - 是否可以使用 NuGet 包升级到 MVC4？

> ID：12219786
> 
> 赞同：2
> 
> 时间：2012-08-31T17:13:46.660
> 
> 标签：asp.net-mvc-4, nuget

我已经阅读了将站点升级到 MVC4 的列表[http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)然后开始寻找可以做到这一点的包（你知道，我我懒）

我发现里面有一些带有 DLL 的 MS 包，但没有一个只更改 web.config、引用等。

这让我想知道 NuGet 是否能够进行所有转换。

**你知道是否可以使用 NuGet 包升级到 MVC4？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:20:28.743

不幸的是，不，涉及一些手动步骤：

[将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

要将现有的 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4，需要注意以下几点：

1.  在所有 web.config 中，包括根文件夹和 Views 文件夹中的一个，将程序集版本更改`3.0.0.0`为`4.0.0.0`for`System.Web.Mvc`和for , , .`1.0.0.0``2.0.0.0``System.Web.WebPages``System.Web.Helpers``System.Web.WebPages.Razor`
2.  `appSettings`将键的值更改`"webPages:Version"`为`"2.0.0.0"`。除此之外，还添加`appSettings`名为“PreserveLoginUrl”的新键，并将“true”作为值。
3.  现在删除所有对 MVC 3.0 程序集和 Webpages 1.0 程序集的引用。并添加对 MVC 4.0 程序集和 Webpages 2.0 程序集的引用。
4.  如果您正在使用任何使用以前版本的 MVC 构建的第三方程序集，请不要忘记在根 web.config 中配置 bindingredirect，如此处所述。
5.  最后一步是将项目类型从 MVC 3 更改为 MVC 4。对于该卸载项目，通过右键单击解决方案资源管理器并选择编辑 ProjectName.csproj 文件。现在找到 ProjectTypeGuids 元素并替换`{E53F8FEA-EAE0-44A6-8774-FFD645390401}`为`{E3E379DF-F4C6-4180-9B81-6769533ABE47}`. 现在保存更改并重新加载项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:05:33.237

只是尝试自己制作包，问题是您无法删除/替换条目`web.config`或项目文件中的条目，您只能添加。

去制作一个exe...

**编辑**制作了这个命令行 exe，它在和[https://gist.github.com/3560580中进行](https://gist.github.com/3560580)~~转换~~替换`web.config`， 享受吧！`project.csproj``views\web.config`

# java - 在 GlassFish Server Open Source Edition 3.1.2 中管理共享库

> ID：12219788
> 
> 赞同：2
> 
> 时间：2012-08-31T17:13:52.207
> 
> 标签：java, tomcat, glassfish, shared-libraries, glassfish-3

我的问题是 Glassfish 中部署的所有战争文件都使用相同的代码库但数据库名称不同，因此所有战争文件中使用的库都是相同的。

1）Glassfish是否可以共享类似于tomcat的lib文件夹，如果是需要步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:17:41.370

Glassfish 也共享了库，只需将您的库复制到以下目录之一并重新启动 Glassfish。

*   glassfish-3.1.2\glassfish\domains\domain1\lib ：它将在部署到 domain1 的所有应用程序之间共享库
*   glassfish-3.1.2\glassfish\lib ：它将在部署到所有域的所有应用程序之间共享库。

# jquery - jQuery - 无法删除类

> ID：12219790
> 
> 赞同：3
> 
> 时间：2012-08-31T17:14:00.507
> 
> 标签：jquery, css

我似乎无法删除“foo”类，我不明白为什么。当用户点击 .foo 时，jQuery 会删除 .foo。乍一看，它似乎可以工作，因为文本不再是红色的。但是，多次单击 .foo 会导致出现警告框，这意味着 .foo 尚未完全删除。我不明白为什么会这样。

jQuery：

```
$(document).ready(function() {
    $('.foo').click(function() {
        $(this).removeClass('foo');
        alert('Class .foo should have been removed. Why is this alert still appearing?');
    });             
});​ 
```

html:

```
<p class="foo">foo</p>​ 
```

CSS：

```
.foo { color: red; }​ 
```

[http://jsfiddle.net/Nvrp8/](http://jsfiddle.net/Nvrp8/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:16:18.500

您需要取消绑定点击侦听器。

[http://jsfiddle.net/Nvrp8/2/](http://jsfiddle.net/Nvrp8/2/)

```
$(document).ready(function() {
    $('.foo').click(function() {
        $(this).removeClass('foo');
        alert( 'Class .foo should have been removed. Why is this alert still appearing?' );     
        $(this).unbind('click');        
    });             
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T17:18:55.647

如果您使用 on() 它实际上会评估每次单击的选择器，因为事件绑定到正文，而不是“.foo”

```
$(document).ready(function() {
    $("body").on("click", ".foo",function() {
        $(this).removeClass('foo');
        alert( 'Class .foo should have been removed. Why is this alert still appearing?' );       
    });             
});​ 
```

[http://jsfiddle.net/Nvrp8/8/](http://jsfiddle.net/Nvrp8/8/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T17:18:49.340

当您运行时，您会得到一组*当时*`$('.foo')`具有的静态元素。因此，即使您稍后从这些元素中提取，您仍然将侦听器绑定到该原始元素集。`class="foo"` *`removeClass('foo')`*

 *如果您想改变这种行为，请考虑查看`.on`or `.delegate`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T17:17:58.070

它工作得很好，听众仍然受到约束。[http://jsfiddle.net/Nvrp8/5/](http://jsfiddle.net/Nvrp8/5/)*

# android - 使用 Phonegap-AJAX 登录移动应用程序

> ID：12219792
> 
> 赞同：0
> 
> 时间：2012-08-31T17:14:00.763
> 
> 标签：android, ajax, cordova, login

我正在android上制作一个移动应用程序，我使用phonegap、移动jquery ajax codeigniter和mysql。我的登录过程有问题。我的 AJAX 请求一直失败。我在我的注册过程中使用了同样的东西并且它有效。很奇怪.. 这是我在 phonegap 上 login.html 上的代码：

```
 <!DOCTYPE html> 
<html> 
    <head> 
    <title>Login</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <meta http-equiv=”Content-Type” content=”text/html; charset=utf-8>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript">

    $(document).ready(function(){

$("input[type=text]").val('');

document.addEventListener("deviceready", init, false);

function init() {

$('a[id^="submitButton"]').on('click',function(){
$("#submitButton",this).attr("disabled","disabled");
//$("#loginForm").on("submit",function() {

  u = $("#username").val();
  p = $("#password").val();

 if(u!='' && p!='') {

                 $.ajax({

                     url:'http://****.dyndns-home.com/health/index.php/health_login?username='+u+'&password='+p,

                     dataType:'json',
                     success:function(data, textStatus, jqXHR) 
                        {
                        $.mobile.changePage("menu1.html");

                         if(data.status==1) {
                         localStorage.setItem("username", u);
                         localStorage.setItem("password", p);

                         $.mobile.changePage("menu1.html");
                         $("input[type=text]").val('');

                         }
                          if(data.status==0){
                          alert("Wrong username or password!");
                          $("input[type=text]").val('');
                          }

                         },

                         error: function(jqXHR, textStatus, errorThrown){
                        alert('AJAX request failed');
                        }

                         });
}
else{
alert("You must enter a username and password");
}
 return false;

});
}
});
    </script>

</head> 

<body> 
<div data-role="page"> 

    <div data-role="header" >

    <h2>Login</h2></div> 
    <div data-role="content">
    <form id="loginForm">
    Username: <input type="text" id="username" value=""  name="username"/>
    Password:<input type="text" id="password" value=""   name="password"/>
    <a href="forget.html" > Ξέχασες τον κωδικό ή το όνομα χρήστη;</a><br>
    <a href="index.html" data-role="button" data-transition="turn" data-inline="true" data-icon="back" >Back</a>
    <a href="" id="submitButton" name="submitButton" data-role="button" data-inline="true" data-theme="b" data-icon="forward">Είσοδος</a>

    </form>
    </div> 
    <div data-role="footer" data-position="fixed"><h2></h2></div> 

</div> 
</body>
</html> 
```

此外，当我在 chrome 和 mozzila 上将 login.html 作为 Web 应用程序运行时，我没有遇到任何问题，ajax 请求成功！我在 Eclipse 上使用 api 级别 15（android 4.0.3）运行此应用程序。

告诉我你是否需要我的 register.html 代码。

你怎么看？我现在正在寻找解决这个问题 2 天，但我无能为力。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:28:02.117

打开模拟器的浏览器并键入 Internet 地址以验证模拟器是否能够连接到 Internet。否则页面中的 JS 和 CSS 将无法加载。

如果模拟器能够连接到 Internet，您可以尝试以下代码。我对您的代码进行了一些改进。例如，jQuery 框架在同一个页面中被多次加载。以下代码已在 Android 中进行了测试。

此外请注意，您用于保存凭据的 localStorage 存储的数据没有过期日期。您应该考虑使用 sessionStorage 而不是本地存储。sessionStorage 存储一个会话的数据。

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Login</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <meta http-equiv=”Content-Type” content=”text/html; charset=utf-8>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript">

            /**
             * Clears all the inputs in the page.
             */
            function clearPageInputs() {
                $("input[type=text]").val('');
            }

            /**
             * Trim function
             */
            String.prototype.trim = function() {
                a = this.replace(/^\s+/, '');
                return a.replace(/\s+$/, '');
            };

            /**
             * Submits the login form
             */
            function sumbitLoginForm(user, pass) {
                if (user.trim() == '' || pass.trim() == '')
                {   
                    // fill username and password in Greek language
                    alert("\u03a3\u03c5\u03bc\u03c0\u03bb\u03ae\u03c1\u03c9\u03c3\u03b5 \u03c4\u03bf Username \u03ba\u03b1\u03b9 \u03c4\u03bf Password!");
                }
                else
                {
                    $.ajax({
                        type: 'post',
                        url: 'http://.../.../...',
                        data: { username: user, password: pass },
                        dataType: 'json',
                        success: function(data) {
                            if(data && data.status == 1) {
                                // save in local storage
                                localStorage.setItem("username", user);
                                localStorage.setItem("password", pass);
                                // perform page transition 
                                $.mobile.changePage("menu1.html");
                            }
                            else {
                                clearPageInputs()
                                // wrong username / password in Greek language
                                alert("\u0388\u03c7\u03b5\u03b9\u03c2 \u03ba\u03ac\u03bd\u03b5\u03b9 \u03ba\u03ac\u03c0\u03bf\u03b9\u03bf \u03bb\u03ac\u03b8\u03bf\u03c2 \u03c3\u03c4\u03bf Username \u03ae/\u03ba\u03b1\u03b9 \u03c3\u03c4\u03bf Password.");
                            }   
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            alert("Error: " + xhr.status + "\n" +
                                   "Message: " + xhr.statusText + "\n" +
                                   "Response: " + xhr.responseText + "\n" + thrownError);
                        }
                    });
                }

                return false;
            }

            $(document).ready( function() {
                clearPageInputs();

                $("#submitButton").click(function(){
                    sumbitLoginForm($("#username").val(), $("#password").val());
                });
            });
        </script>
    </head>
    <body> 
        <div data-role="page"> 
            <div data-role="header" >
            <h2>Login</h2></div> 
            <div data-role="content">
                <form id="loginForm">
                    <label for="username">Username:</label>
                    <input type="text" id="username" value=""  name="username"/>
                    <label for="password">Password:</label>
                    <input type="text" id="password" value=""   name="password"/>
                    <a href="forget.html">Ξέχασες τον κωδικό ή το όνομα χρήστη;</a><br>
                    <a href="index.html" data-role="button" data-transition="turn" data-inline="true" data-icon="back" >Back</a>
                    <a href="#" id="submitButton" data-role="button" data-inline="true" data-theme="b" data-icon="forward">Είσοδος</a>
                </form>
            </div> 
            <div data-role="footer" data-position="fixed"><h2></h2></div> 
        </div> 
    </body>
</html> 
```

# mysql - 在关系表中使用主要

> ID：12219793
> 
> 赞同：0
> 
> 时间：2012-08-31T17:14:05.230
> 
> 标签：mysql, sql

最好用一个例子来解释我的问题。这是示例表（InnoDB）：

-- 帖子

*   ID
*   标题
*   title_slug
*   内容

-- 标签

*   ID
*   姓名
*   name_slug

-- post_tag_relation

*   邮政编号
*   标签ID

假设我正在创建带有标签的简单帖子系统，并且我将哪些帖子具有哪些标签插入到 post_tag_relation 中。postID 和 tagID 是从它们的表中引用的。这是我的问题，我应该在 post_tag_relation 中指定 id （主键）还是有更好的方法来创建它？你建议创建 post_tag_relation 表是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:16:12.207

您无需为 post_tag_relation 表指定单独的 ID 字段。postID 和 tagID 的组合应该是唯一的，并且可以组成一个[复合键](http://en.wikipedia.org/wiki/Compound_key)。帖子和标签表形成多对多关系，并使用联结表（如您的 post_tag_relation 表）将它们关联起来。如果您不想存储有关标签和帖子之间关系的其他信息（例如，指示标签何时与帖子相关联的时间戳），那么您需要在 post_tag_relation 表中的唯一字段是来自帖子的外键和标签表（即 postID 和 tagID）。

# c# - 更正缺失的字段值

> ID：12219794
> 
> 赞同：1
> 
> 时间：2012-08-31T17:14:09.977
> 
> 标签：c#, .net, serialization

我有一个类，应该支持版本容错序列化

```
[Serializable]
class A {
    [OptionalField]
    int a;

    [OptionalField]
    MyClass b;

    [OptionalField]
    MyClass c;
} 
```

*   反序列化后如何更正缺失的字段？我想，我必须使用标有`[OnDeserializing]`. 但是我怎样才能得到哪些字段被忽略了？
*   我可以配置自动反序列化以通过默认构造函数初始化字段以防它们丢失吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:26:30.390

此外，您可以使用 OnSerializingAttribute 和 OnSerializedAttribute 来设置字段。如示例所示，已设置的字段将保留其值。但是请注意，只有在 OnSerializing 事件期间设置了该字段时才会出现这种情况。OnSerialized 事件期间设置的字段将覆盖序列化值。

编辑：在这种情况下，如果字段等于 null 并在必要时实例化，您可以检查您的方法（用 OnSerialized 装饰）。如果有可能永远不会使用此字段并且可以推迟创建它，请考虑将有问题的字段隐藏在属性后面并延迟实例化它。

模型.cs：

```
using System;
using System.Runtime.Serialization;

namespace SerializationExample
{
    [Serializable]
    public class Model
    {
        public Model(){
            A = new SomeClass();
        }

        [OptionalField]
        public int value;

        [OptionalField]
        public SomeClass A;

        [OptionalField]
        public AnotherClass B;            

        [OnDeserializing]
        void OnDeserializing(StreamingContext context)
        {
            B = new AnotherClass("Set during deserializing");
        }

        [OnDeserialized]
        void OnDeserialized(StreamingContext context)
        {
            // Do sth. here after the object has been deserialized
        }

        public override string ToString()
        {
            return String.Format("A: {0}\nB: {1}", A, B);
        }

    }

    [Serializable]
    public class SomeClass
    {
        public string Value { get; set; }

        public SomeClass()
        {
            Value = "Default";
        }

        public override string ToString()
        {
            return Value;
        }
    }

    [Serializable]
    public class AnotherClass
    {
        public string Value { get; private set; }

        public AnotherClass(string v)
        {
            Value = v;
        }

        public override string ToString()
        {
            return Value;
        }
    }
} 
```

程序.cs：

```
using System;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;

namespace SerializationExample
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] FileNames = new string[] {
                @"model1.bin",
                @"model2.bin"
            };

            Stream[] files = new Stream[] {
                File.Create(FileNames[0]),
                File.Create(FileNames[1])
            };

            BinaryFormatter bf = new BinaryFormatter();

            Model m1 = new Model();
            m1.B = new AnotherClass("Set in app");
            m1.A.Value = "Set in app";

            Model m2 = new Model();

            Console.WriteLine("M1:\n{0}\n", m1);
            Console.WriteLine("M2:\n{0}\n\n", m2);

            bf.Serialize(files[0], m1);
            bf.Serialize(files[1], m2);

            foreach (var f in files)
                f.Seek(0, SeekOrigin.Begin);

            m1 = null;
            m2 = null;

            m1 = (Model)bf.Deserialize(files[0]);
            m2 = (Model)bf.Deserialize(files[1]);

            Console.WriteLine("M1:\n{0}\n", m1);
            Console.WriteLine("M2:\n{0}\n\n", m2);

            foreach (var f in files)
                f.Close();           
        }
    }
} 
```

输出：

```
M1:
A: Set in app
B: Set in app

M2:
A: Default
B:

M1:
A: Set in app
B: Set in app

M2:
A: Default
B: Set during deserializing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:55:53.513

如果您只想将这些值初始化为默认值，那么您只需要一个默认的无参数构造函数来初始化它们。这将在反序列化期间被调用，并且任何丢失的字段都将保留您在构造函数中初始化它们的任何值。

如果你想要更多的控制，你可以`ISerializable`在你的类上实现接口和适当的构造函数（你通常应该同时做这两个，尽管通常不需要一个或另一个。）

如果 C# 找到带有签名的构造函数：

```
protected A ( SerializationInfo info, StreamingContext context )
{
} 
```

它将调用该构造函数，并传递一个包含所有序列化信息的弱类型字典。（您可以使用`ISerializable::GetObjectData`将自定义字段写入对象并在构造函数中检索它们）。您可以使用这些`info.GetXXX`方法来提取这些值。

需要注意的一点：如果你实现了这个构造函数，你必须完成*所有*的工作，包括通常会自动反序列化的字段。对于任何缺少的字段，只需适当地设置它们。同样，如果您实现`GetObjectData`，则必须序列化该方法中的*所有内容。*这很简单，但是如果你改变你的类，你需要适当地编辑你的自定义方法/构造函数。

# c# - 使用位图作为缓冲区绘制到面板

> ID：12219797
> 
> 赞同：2
> 
> 时间：2012-08-31T17:14:17.167
> 
> 标签：c#, winforms, bitmap, panel, system.drawing

我一直在学习如何使用位图绘制面板。我想我会运行一个试用程序来简单地将白色面板变成黑色。（可能看起来很复杂，但这只是为了测试基础知识）我的程序如下：

```
public partial class Form1 : Form
{
    private Bitmap buffer = new Bitmap(100,100);

    public Form1()
    {
        InitializeComponent();
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
       e.Graphics.DrawImageUnscaled(buffer, Point.Empty);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 100; i++)
        {
            for (int j = 0; j < 100; j++)
            {
                buffer.SetPixel(i, j, Color.Black);
            }
        }
    }
} 
```

当我运行它并按下按钮时，面板似乎没有改变。任何想法我哪里出错了。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:32:04.887

除了使面板的客户区无效之外，如果您希望它在单击按钮时进行绘制，您需要在按钮的单击事件中连接绘制事件。试一试：

```
public partial class Form1 : Form
{
    private bool _paintWired;

    public Form1()
    {
        InitializeComponent();
    }

    private void PanelPaint(object sender, PaintEventArgs e)
    {
        using (Graphics g = this.panel1.CreateGraphics())
        {
            g.FillRectangle(Brushes.Black, this.panel1.Bounds);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if(!_paintWired)
        {
            this.panel1.Paint += new PaintEventHandler(PanelPaint);
            _paintWired = true;
        }

        this.panel1.Invalidate();
    }
} 
```

更新：对不起，我错过了使用位图的要点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T17:24:19.173

您必须[使](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invalidate.aspx)面板的客户区无效，以便 Windows 强制重新绘制。但还有一些其他问题：

1.  [正如@Tony 建议的那样， FillRectangle](http://msdn.microsoft.com/en-us/library/yysstebh.aspx)将比在循环中绘制每个像素更有效。
2.  如果面板在`buffer`准备好显示之前失效，您可能会遇到并发问题。确保位图生成与其表示是隔离的。

这些建议总结（但未经测试）如下：

```
private void button1_Click(object sender, EventArgs e)
{
    Bitmap tempBuffer = new Bitmap(100, 100);

    using (Graphics g = Graphics.FromImage(tempBuffer))
    using (SolidBrush blackBrush = new SolidBrush(Color.Black))
    {
        g.FillRectangle(blackBrush, new Rectangle(0, 0, tempBuffer.Width-1, tempBuffer.Height-1);
    }

    buffer = tempBuffer;
    panel1.Invalidate();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:33:44.293

试试这个例子，我用它来做你想做的事情并且它有效。我希望能帮助你

[示例_1](https://stackoverflow.com/questions/2611569/how-can-i-draw-over-a-panel-in-c)

# javafx-2 - 3000 TextFields JavaFX 应用程序中的性能问题

> ID：12219798
> 
> 赞同：1
> 
> 时间：2012-08-31T17:14:23.100
> 
> 标签：javafx-2

我有一个独立的 javafx 应用程序，其中包含大约 3000 个文本字段（用于用户输入），分为 10 个使用 FXML 创建的页面。

页面之间的导航是通过 Tabs 或 ToggleButtons 完成的。

问题是页面之间的切换时间：

如果我将所有控制器加载到内存中，我会得到：
1.6Ghz 的 Intel Celeron 约 2 秒
i5 < 1 秒
如果我在切换时加载相应的控制器，则在每种情况下加起来约 1 秒。

切换我使用的页面时：borderPane.setCenter(controller.getNode())，所以我不会重新加载所有内容，只是将文本字段网格更改为另一个。

在切换时不进行其他计算。

1.  我可以以某种方式改善切换时间吗？
2.  如果我正在考虑添加加载指示器，我如何知道页面何时准备就绪并且可以关闭指示器？（相当于 webbrowsers 中的 onDomReady() ）
3.  其他想法？

# android - 将 ABS ViewPager 与自定义 ActionBar 视图一起使用

> ID：12219799
> 
> 赞同：2
> 
> 时间：2012-08-31T17:14:27.740
> 
> 标签：android, actionbarsherlock

我有一个使用 ActionBarSherlock 为选项卡导航提供 ViewPager 控件以及标准 ActionBar 的应用程序。一切正常，除了当我使用自定义 ActionBar 视图时，操作栏将其位置移动到选项卡控件下方。

当使用标准的 ActionBar（即没有自定义视图）时，一切都按预期工作：

![在此处输入图像描述](../Images/518e2873e0ae999ad66b1dece45e3c53.png)

但是，当我切换 ActionBar 以使用自定义视图（*没有任何其他代码更改*）时，操作栏切换到选项卡控件下方：

![在此处输入图像描述](../Images/aaee402e57db60007a9252c0860fe4ca.png)

这有什么特别的原因吗？我可以做些什么来使用自定义操作栏视图，但仍然在选项卡上方放置操作栏？本示例中使用的所有 XML 布局都非常简单，如下面的代码所示。

我正在使用 ActionBarSherlock 4.1.0（在撰写本文时，最新的稳定版本）。此行为发生在 Android 2.2（我支持的最早版本）和 Android 4.1 上。

我的 ABS 初始化代码：

```
setContentView( R.layout.main ); // XML layout that currently contains only the ViewPager
mViewPager = (ViewPager) findViewById( R.id.viewPager );

// Set up action bar
ActionBar ab = getSupportActionBar();
Drawable gd = getResources().getDrawable( R.drawable.actionbar_bg ); // Background gradient
ab.setBackgroundDrawable( gd );
ab.setCustomView( R.layout.actionbar_custom ); // For this example, contains just a TextView
ab.setDisplayOptions( ActionBar.DISPLAY_SHOW_CUSTOM );

// Set up tabs
ab.setNavigationMode( ActionBar.NAVIGATION_MODE_TABS );
mTabsAdapter = new TabsAdapter( this, mViewPager );
mTabsAdapter.addTab( ab.newTab().setText( "Tab 1" ), Tab1Fragment.class, null );
mTabsAdapter.addTab( ab.newTab().setText( "Tab 2" ), Tab2Fragment.class, null );
mTabsAdapter.addTab( ab.newTab().setText( "Tab 3" ), Tab3Fragment.class, null ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:31:12.287

墨菲定律在您将自己的问题发布到 Stack Overflow 后立即发现问题的答案再次发生。

添加`ActionBar.DISPLAY_SHOW_HOME`到`ab.setDisplayOptions()`将导致 ActionBar 返回到屏幕顶部。

对于这个特定项目来说，这是一个可以接受的解决方案（因为无论如何我可能都希望有 Home 图标），但我仍然很想知道是否有任何其他方法可以为那些出于某种原因会不喜欢显示主页图标。

# c# - 实体框架创建的自定义一对一关系

> ID：12219801
> 
> 赞同：1
> 
> 时间：2012-08-31T17:14:47.387
> 
> 标签：c#, .net, entity-framework

我试图让实体框架以某种方式为特殊的一对一关系创建表。

假设我有这组类：

```
public class Parent
{
    public int ID { get; set; }
    public string Title { get; set; }
    public Child XYZ { get; set; }
}

public class Child
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
} 
```

类的`XYZ`属性`Parent`可以设置为 的实例`Child`。我希望 EF 为这两个类中的每一个创建一个表，并且`Child`对象表应该简单地具有一个外键列，最好命名为“ParentID”，以保持与`Parent`对象的关系。

我不想在 Parent 表中出现“ChildID”列，也不想在`Child`类中添加 ID 或 ParentID 属性。

目前，`Child`对象的属性被创建为父表中的列，如果 XYZ 属性未设置为`Child`类的实例，我会得到一个异常，即它不能为空。

我正在尝试使用 DbModelBuilder 和 OnModelCreating 事件来做到这一点。IsOptional[方法](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.primitivepropertyconfiguration.isoptional%28v=vs.103%29)仅适用于简单类型。

有什么建议么？EF甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:00:50.527

> 目前，子对象的属性被创建为父表中的列，如果 XYZ 属性未设置为子类的实例，我会得到一个异常，即它不能为空。

是的，它不能为空，因为目前您`Child`是一个复杂类型（值对象），并且必须始终设置它（它是实体的一部分，没有这部分实体就不存在）。如果复杂类型的内容是可选的，则必须对 Child 的属性而不是对`Child`自身强制执行此操作。

> 我不想将 ID 或 ParentID 属性添加到 Child 类。

如果你想`Child`映射到单独的表，它必须有`ID`，因为每个实体都必须有主键。该 ID 也将用作外键以`Parent`实现一对一关系：

```
public class Child
{
    public int Id { get; set; }
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
} 
```

和关系映射：

```
modelBuilder.Entity<Parent>()
            .HasOptional(p => p.XYZ)
            .WithRequired(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:08:11.920

Entity Framework 需要 1-1 关系来共享相同的主键，这意味着您的孩子必须有一个外键到父级，并且该字段也必须是孩子的主键。

您可能不喜欢这样，但 EF 不会以任何其他方式工作。所以要么你接受它，继续前进，要么你找到一个不同的框架。

# javascript - 返回两个圆之间的 x,y 交点的 JavaScript 函数？

> ID：12219802
> 
> 赞同：20
> 
> 时间：2012-08-31T17:14:48.073
> 
> 标签：javascript, geometry

![在此处输入图像描述](../Images/1d7c9413f210f93dd9e8fa1c357613c6.png)

我得到了两个圆的（x，y）中心位置及其半径，但我需要使用 JavaScript 找到它们的交点（用红色标记）。

我认为就数学而言，最好的解释是在[这里](http://paulbourke.net/geometry/circlesphere/)找到（两个圆圈的交集），但我并不真正理解数学，所以我无法实现它。

例如 d = ||P1 - P0|| , 做什么 || 代表？这是否意味着结果数字始终为正数？

还有 P2 = P0 + a ( P1 - P0 ) / d ，这里的 P 不是 (10, 50) 吗？但是在 JavaScript 中执行 (10,50)+13 会得到 63，所以它只是忽略了第一个数字，那么会发生什么？结果应该是（23,63）还是？还有 P1-P0 部分或 (40,30)-(10,60)，你如何在 JavaScript 中表达？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-31T19:22:08.197

将网站上的 C 函数翻译成 JavaScript：

```
function intersection(x0, y0, r0, x1, y1, r1) {
        var a, dx, dy, d, h, rx, ry;
        var x2, y2;

        /* dx and dy are the vertical and horizontal distances between
         * the circle centers.
         */
        dx = x1 - x0;
        dy = y1 - y0;

        /* Determine the straight-line distance between the centers. */
        d = Math.sqrt((dy*dy) + (dx*dx));

        /* Check for solvability. */
        if (d > (r0 + r1)) {
            /* no solution. circles do not intersect. */
            return false;
        }
        if (d < Math.abs(r0 - r1)) {
            /* no solution. one circle is contained in the other */
            return false;
        }

        /* 'point 2' is the point where the line through the circle
         * intersection points crosses the line between the circle
         * centers.  
         */

        /* Determine the distance from point 0 to point 2\. */
        a = ((r0*r0) - (r1*r1) + (d*d)) / (2.0 * d) ;

        /* Determine the coordinates of point 2\. */
        x2 = x0 + (dx * a/d);
        y2 = y0 + (dy * a/d);

        /* Determine the distance from point 2 to either of the
         * intersection points.
         */
        h = Math.sqrt((r0*r0) - (a*a));

        /* Now determine the offsets of the intersection points from
         * point 2.
         */
        rx = -dy * (h/d);
        ry = dx * (h/d);

        /* Determine the absolute intersection points. */
        var xi = x2 + rx;
        var xi_prime = x2 - rx;
        var yi = y2 + ry;
        var yi_prime = y2 - ry;

        return [xi, xi_prime, yi, yi_prime];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-23T00:54:37.243

根据 AutoMonkey 的回答，我做了一些调整，以便在响应中提供更多信息，并在圆圈相同时进行处理。

```
/**
 * @description Get information about the intersection points of a circle.
 * Adapted from: https://stackoverflow.com/a/12221389/5553768.
 * @param {Object} c1 An object describing the first circle.
 * @param {float} c1.x The x coordinate of the circle.
 * @param {float} c1.y The y coordinate of the circle.
 * @param {float} c1.r The radius of the circle.
 * @param {Object} c2 An object describing the second circle.
 * @param {float} c2.x The x coordinate of the circle.
 * @param {float} c2.y The y coordinate of the circle.
 * @param {float} c2.r The radius of the circle.
 * @returns {Object} Data about the intersections of the circles.
 */
function intersection(c1, c2) {
    // Start constructing the response object.
    const result = {
        intersect_count: 0,
        intersect_occurs: true,
        one_is_in_other: false,
        are_equal: false,
        point_1: { x: null, y: null },
        point_2: { x: null, y: null },
    };

    // Get vertical and horizontal distances between circles.
    const dx = c2.x - c1.x;
    const dy = c2.y - c1.y;

    // Calculate the distance between the circle centers as a straight line.
    const dist = Math.hypot(dy, dx);

    // Check if circles intersect.
    if (dist > c1.r + c2.r) {
        result.intersect_occurs = false;
    }

    // Check one circle isn't inside the other.
    if (dist < Math.abs(c1.r - c2.r)) {
        result.intersect_occurs = false;
        result.one_is_in_other = true;
    }

    // Check if circles are the same.
    if (c1.x === c2.x && c1.y === c2.y && c1.r === c2.r) {
        result.are_equal = true;
        result.are_equal = true;
    }

    // Find the intersection points
    if (result.intersect_occurs) {
        // Centroid is the pt where two lines cross. A line between the circle centers
        // and a line between the intersection points.
        const centroid = (c1.r * c1.r - c2.r * c2.r + dist * dist) / (2.0 * dist);

        // Get the coordinates of centroid.
        const x2 = c1.x + (dx * centroid) / dist;
        const y2 = c1.y + (dy * centroid) / dist;

        // Get the distance from centroid to the intersection points.
        const h = Math.sqrt(c1.r * c1.r - centroid * centroid);

        // Get the x and y dist of the intersection points from centroid.
        const rx = -dy * (h / dist);
        const ry = dx * (h / dist);

        // Get the intersection points.
        result.point_1.x = Number((x2 + rx).toFixed(15));
        result.point_1.y = Number((y2 + ry).toFixed(15));

        result.point_2.x = Number((x2 - rx).toFixed(15));
        result.point_2.y = Number((y2 - ry).toFixed(15));

        // Add intersection count to results
        if (result.are_equal) {
            result.intersect_count = null;
        } else if (result.point_1.x === result.point_2.x && result.point_1.y === result.point_2.y) {
            result.intersect_count = 1;
        } else {
            result.intersect_count = 2;
        }
    }
    return result;
} 
```

用法：

```
intersection(
    {x: 1, y: 1, r: 2},
    {x: 0, y: -1, r: 1}
)

// Result
result = {
    intersect_count: 2,
    intersect_occurs: true,
    one_is_in_other: false,
    are_equal: false,
    point_1: { x: 1, y: -1 },
    point_2: { x: -0.6, y: -0.2 },
} 
```

确认：

[https://www.desmos.com/calculator/cj12hc9jsk](https://www.desmos.com/calculator/cj12hc9jsk)

[![绘制](../Images/78f47af56a49d54d25b08d3c99c798a5.png)](https://i.stack.imgur.com/Sy8Bn.png)

# java - SQLiteDatabase 错误：表没有列名

> ID：12219805
> 
> 赞同：2
> 
> 时间：2012-08-31T17:14:53.033
> 
> 标签：java, android, eclipse, sqlite

我刚开始开发一个 android 应用程序，我遇到了这个错误，我不知道我在哪里做错了。我想插入用户的登录详细信息，以便在用户成功登录时获取详细信息。

这是我的日志：

```
09-01 01:08:13.874: E/JSON(294): {"tag":"login","success":1,"error":0,"uid":"5040ef44839a09.93014710","user":{"name":"a","cname":"a","email":"a@gmail.com","created_at":"2012-09-01 01:07:16","updated_at":null}}
09-01 01:08:14.034: E/Database(294): Error inserting uid=5040ef44839a09.93014710 created_at=2012-    09-01 01:07:16 email=a@gmail.com cname=a name=a
09-01 01:08:14.034: E/Database(294): android.database.sqlite.SQLiteException: table login has no column named cname: , while compiling: INSERT INTO login(uid, created_at, email, cname, name) VALUES(?, ?, ?, ?, ?);
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
09-01 01:08:14.034: E/Database(294):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
09-01 01:08:14.034: E/Database(294):    at com.stts.sparetimetradingsystem.library.DatabaseHandlerEmployer.addUser(DatabaseHandlerEmployer.java:83)
09-01 01:08:14.034: E/Database(294):    at com.stts.sparetimetradingsystem.employer.LoginEmployerActivity$LoginEmployer$1.run(LoginEmployerActivity.java:134)
09-01 01:08:14.034: E/Database(294):    at android.os.Handler.handleCallback(Handler.java:587)
09-01 01:08:14.034: E/Database(294):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-01 01:08:14.034: E/Database(294):    at android.os.Looper.loop(Looper.java:123)
09-01 01:08:14.034: E/Database(294):    at android.app.ActivityThread.main(ActivityThread.java:4627)
09-01 01:08:14.034: E/Database(294):    at java.lang.reflect.Method.invokeNative(Native Method)
09-01 01:08:14.034: E/Database(294):    at java.lang.reflect.Method.invoke(Method.java:521)
09-01 01:08:14.034: E/Database(294):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-01 01:08:14.034: E/Database(294):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-01 01:08:14.034: E/Database(294):    at dalvik.system.NativeStart.main(Native Method)
09-01 01:08:15.174: E/AndroidRuntime(294): FATAL EXCEPTION: main
09-01 01:08:15.174: E/AndroidRuntime(294): java.lang.RuntimeException: Unable to destroy activity {com.stts.sparetimetradingsystem/com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity}: java.lang.NullPointerException
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3655)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread.access$2900(ActivityThread.java:125)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.os.Looper.loop(Looper.java:123)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-01 01:08:15.174: E/AndroidRuntime(294):  at java.lang.reflect.Method.invokeNative(Native Method)
09-01 01:08:15.174: E/AndroidRuntime(294):  at java.lang.reflect.Method.invoke(Method.java:521)
09-01 01:08:15.174: E/AndroidRuntime(294):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-01 01:08:15.174: E/AndroidRuntime(294):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-01 01:08:15.174: E/AndroidRuntime(294):  at dalvik.system.NativeStart.main(Native Method)
09-01 01:08:15.174: E/AndroidRuntime(294): Caused by: java.lang.NullPointerException
09-01 01:08:15.174: E/AndroidRuntime(294):  at com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity.onDestroy(HomepageEmployerActivity.java:340)
09-01 01:08:15.174: E/AndroidRuntime(294):  at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
09-01 01:08:15.174: E/AndroidRuntime(294):  ... 11 more 
```

这是我的 SQLiteDatabase 代码包 com.stts.sparetimetradingsystem.library；

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandlerEmployer extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "stts";

// Login table name
private static final String TABLE_LOGIN = "login";

// Login Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_CNAME = "cname";
private static final String KEY_EMAIL = "email";
private static final String KEY_UID = "uid";
private static final String KEY_CREATED_AT = "created_at";

public DatabaseHandlerEmployer(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase dbe) {
    // ORIGINAL 
    /*String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
            + KEY_ID + " INTEGER PRIMARY KEY," 
            + KEY_NAME + " TEXT,"
            + KEY_CNAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE,"
            + KEY_UID + " TEXT,"
            + KEY_CREATED_AT + " TEXT" + ")";

    dbe.execSQL(CREATE_LOGIN_TABLE);*/

    // TESTING HERE
    dbe.execSQL("CREATE TABLE " + TABLE_LOGIN + "(" 
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," 
            + KEY_NAME + " TEXT NOT NULL,"
            + KEY_CNAME + " TEXT,"
            + KEY_EMAIL + " TEXT UNIQUE NOT NULL,"
            + KEY_UID + " TEXT NOT NULL,"
            + KEY_CREATED_AT + " TEXT NOT NULL);"
            );      
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase dbe, int oldVersion, int newVersion) {
    // Drop older table if existed
    dbe.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

    // Create tables again
    onCreate(dbe);
}

/**
 * Storing user details in database
 * */
//public void addUser(String name, String email, String uid, String created_at) {
public void addUser(String name, String cname, String email, String uid, String created_at) {
    SQLiteDatabase dbe = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_CNAME, cname); // CName
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // UID
    values.put(KEY_CREATED_AT, created_at); // Created At

    // Inserting Row
    dbe.insert(TABLE_LOGIN, null, values);
    dbe.close(); // Closing database connection
}

/**
 * Getting user data from database
 * */
/*public HashMap<String, String> getUserDetails(){
    HashMap<String,String> user = new HashMap<String,String>();
    String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

    SQLiteDatabase dbe = this.getReadableDatabase();
    Cursor cursor = dbe.rawQuery(selectQuery, null);
    // Move to first row
    cursor.moveToFirst();
    if(cursor.getCount() > 0){
        user.put("name", cursor.getString(1));
        user.put("cname", cursor.getString(2));
        user.put("email", cursor.getString(3));
        user.put("uid", cursor.getString(4));
        user.put("created_at", cursor.getString(5));
    }
    cursor.close();
    dbe.close();
    // return user
    return user;
}*/
public String getCName()
{
    String[] col = new String[] {KEY_NAME};
    SQLiteDatabase dbe = this.getReadableDatabase();
    Cursor c = dbe.query(TABLE_LOGIN, col, null, null, null, null, null);
    String res = "";
    int iCname = c.getColumnIndex(KEY_NAME);
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        res = res + c.getString(iCname);
    }
    c.close();
    dbe.close();
    return res;
}

public String getEmail()
{
    String[] col = new String[] {KEY_EMAIL};
    SQLiteDatabase dbe = this.getReadableDatabase();
    Cursor c = dbe.query(TABLE_LOGIN, col, null, null, null, null, null);
    String res = "";
    int iEmail = c.getColumnIndex(KEY_EMAIL);
    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        res = res + c.getString(iEmail);
    }
    c.close();
    dbe.close();
    return res;
}

/**
 * Getting user login status
 * return true if rows are there in table
 * */
public int getRowCount() {
    String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
    SQLiteDatabase dbe = this.getReadableDatabase();
    Cursor cursor = dbe.rawQuery(countQuery, null);
    int rowCount = cursor.getCount();
    dbe.close();
    cursor.close();

    // return row count
    return rowCount;
}

/**
 * Re crate database
 * Delete all tables and create them again
 * */
public void resetTables(){
    SQLiteDatabase dbe = this.getWritableDatabase();
    // Delete All Rows
    dbe.delete(TABLE_LOGIN, null, null);
    dbe.close();
}
} 
```

我想知道导致错误的问题在哪里。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:21:22.570

当您更改架构时，例如添加`NOT NULL`约束或可能添加 column `KEY_CNAME`，您需要通知您的 OpenHelper 这些更改。它**不会**自动找到它们。最简单的方法是升级数据库：

```
private static final int DATABASE_VERSION = 2; 
```

* * *

您正试图插入`"5040ef44839a09.93014710"`一`INTEGER PRIMARY KEY`列。通常 SQLite 只使用数据类型亲和性，但 SQLite 对主键使用严格的数据类型匹配。

这将引发异常消息：`"Error: datatype mismatch"`

# .net - AppDomains 和 GC 堆

> ID：12219815
> 
> 赞同：6
> 
> 时间：2012-08-31T17:15:20.020
> 
> 标签：.net, appdomain

是否有单个 GC Heap 进程以每个应用程序域都可以访问特定分区的方式进行广泛分区？还是每个应用程序域都有单独的 GC 堆？我确定其他堆，例如 HF 堆、LF 堆、存根堆、句柄表等等......，所有这些堆都是为每个应用程序域单独分配的吗？GC Heap 是否也被单独分配？

这可能是真的，因为对象不能在 AppDomain 之间传递，除非对象是可序列化的或实现为 MarshalByRef。我在想是否存在与每个对象相关联的名为 AppDomainID 的东西，并且对象标头（同步块）存储有关 AppDomainID 的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:19:14.590

您有一个进程的堆，并且应用程序域共享这个堆。

一个应用程序域保持轻量级进程，在进程中充当隔离单元。

# ios - ios - Xcode Terminate 调用抛出异常

> ID：12219816
> 
> 赞同：-4
> 
> 时间：2012-08-31T17:15:27.000
> 
> 标签：ios, xcode, ios5

```
'NSUnknownKeyException',
reason: '[<UIApplication 0xde7b110> setValue:forUndefinedKey:]:
this class is not key value coding-compliant for the key guessText.' 
```

**我的应用程序总是崩溃，为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:28:45.560

虽然发生这种情况的原因有很多，但当您在 ​​Interface Builder 中设计的某些视图引用了不存在`IBOutlet`的 . 在您的情况下称为`guessText`. 也许您有一个后来重命名或从 .h 中删除的文件？在 Interface Builder 中打开您的 NIB/故事板，查看插座，看看您是否可以找到引用`guessText`并相应地修复它（删除插座或`IBOutlet`在您的代码中创建插座）。

# css - 定位 div 使其看起来像一个选项卡

> ID：12219823
> 
> 赞同：2
> 
> 时间：2012-08-31T17:15:44.633
> 
> 标签：css, html, positioning

我在一个 div 中有一个 div。我想要一个延伸到外壳 div 之外，所以它类似于一个选项卡。我认为仅使用具有负值的绝对定位会将其推出父 div。这似乎行不通。有 CSS 解决方法吗？

示例 [http://jsfiddle.net/W3CyT/](http://jsfiddle.net/W3CyT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:20:06.603

你做得对，但是，你需要重新考虑你的价值观`bottom`和`right`。

如果您希望红框从右侧的黑框突出，请考虑移除`right:0`并`left:100%`改为应用。这种做法保证了无论黑框和红框有多宽，红框始终在外侧向右；它们与宽度大小无关。这可能是理想的，因为您可能希望动态或将来更改任一框的大小（它不会将您锁定在硬设置值中）。

[这是我正在谈论的内容。](http://jsfiddle.net/W3CyT/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:21:55.603

[http://jsfiddle.net/iambriansreed/W3CyT/4/](http://jsfiddle.net/iambriansreed/W3CyT/4/)

CSS

```
#sideWall {
    height:100px;
    width:100px;
    position:absolute;
    top: 10;
    left: 10;
    background: black;
    margin-top: 60px; /* give room for tab */
}

.showSideWall {
    height: 60px;
    width: 30px;
    position: absolute;
    top: -60px; /* move tab above container */
    right: 0;
    background: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:20:15.713

您可以使用 Z-Index 并将一个放在另一个之上。使用 Twitter 引导代码有更好的方法。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

他们为您提供各种酷功能的模板

# sql - 代表多个表的单个表

> ID：12219829
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:16:03.970
> 
> 标签：sql, database, database-design, tree

我在寻找将多个表哈希表表示为单个表的方法时遇到问题。

假设我有 3 个表格，格式如下：

```
Table1(Table1_PK1,Table1_PK2,Table1_PK3,Table1_Hash)
Table2(Table2_PK1,Table2_PK2,Table2_Hash)
Table3(Table3_Pk1,Table3_PK2,Table3_PK3,Table3_PK4,Table3_PK5,Table3_Hash) 
```

`Table1_PK1`, `Table1_PK2`, `Table1_PK3`... 是列，它们可能具有不同的数据类型（`VARCHAR`,`INT`或`DATETIME`...）。我的问题是是否有一种方法可以创建一个可以代表所有这 3 个表的单个表（固定数量的列）（可能更实际）。

我正在尝试为我的数据库工具执行此操作。每个表实际上是一个包含主键和与之关联的哈希数据的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:37:57.707

由于您显然是在构建数据库工具，而不是数据库，因此在应用程序代码中而不是在数据库表中执行此操作可能更有意义。

在另一个答案中，您评论了

> 我仍在寻找一种动态的方法来做到这一点，而不知道一个表可以有多少个主键。

一张表只能有一个主键。但是，该主键可以包含多个列。（您已经知道这一点；您只是使用了错误的词，这可能会使其他人感到困惑。）

一个表也可以有任意数量的其他键，它们要么被声明（as `NOT NULL UNIQUE`）要么“未声明”（通过创建一个索引来保证一组列的唯一性）。

您可以在运行时以两种方式中的一种或两种方式查看*所有这些内容。*（链接到 PostgreSQL 的文档。）

*   [系统表](http://www.postgresql.org/docs/9.1/static/catalogs.html)，有时称为系统目录
*   [information_schema 视图](http://www.postgresql.org/docs/9.1/static/information-schema.html)

据我所知，所有现代 SQL 平台都至少实现了其中一个接口。information_schema 视图包含在 SQL 标准中，但似乎还有一些解释空间。它们在所有平台上看起来并不完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T12:45:44.937

为了对一堆表建模，您需要 3 个表。包含您希望以这种方式设置的表的表名的实体表称为因子表或实体表。一个 Factor_detail 表，其中包含表的所有列及其关联属性。一个表 factor_detail_value，用于存储查找表的查找值等内容。我自己也在尝试更多地了解这一点，因为我们也在工作中使用这种技术。为任何如此编码的表动态生成 sql，并将数据存储在与数据本身相关的存储库中。这样，如果表更改并且您需要添加列或更改数据类型，您可以向因子详细信息表添加一行，而不会影响数据库在生产中关闭。在大多数企业中，为了更改 sql 数据表而关闭四个小时可能会花费数千美元。例如，如果您正在处理保险，那么您销售保险的每个其他州都有不同的要求，以便能够看到它，这将导致表格更改。通过这种方式，我们将表数从 700 多个表中减少了很多，而且我们可以在不关闭数据库的情况下进行更改，从而避免收入损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:51:09.603

为什么要将 3 个表合二为一？数据库设计真的很糟糕。但这里有一种方法：

一张表将为您想要在最终表中的 3 个表列中的每一个列。我假设`TableX_Hash`是同一类型，所以它仍然是一个唯一的列：

```
Table_All_in_One (
    Table1_PK1,
    Table1_PK2,
    Table1_PK3,
                    # space just for clarity of grouping
    Table2_PK1,
    Table2_PK2,

    Table3_PK1,
    Table3_PK2,
    Table3_PK3,
    Table3_PK4,
    Table3_PK5,

    TableX_Hash     # Assuming all the _Hash'es are the same type+length,
                    # otherwise, add Table1_Hash, Table2_Hash, Table3_Hash
                    # This can be your new primary key
) 
```

主键 ( `PKx`) 必须`NULL`不仅在它们自己的表中。对于此表，它们必须允许空值。**这个想法是这个新表的每一行将只保存其中一个表的数据。该行的其他列将为空。**如果要将一个表的行与另一个表关联，可以将其添加到同一行或添加`FK_Table1_Hash`，`FK_Table2_Hash`以及`FK_Table3_Hash`将引用`TableX_Hash`记录值的列。

PS：我想知道您是否真正在寻找一张`View`而不是这张非常糟糕的一体式桌子。

* * *

编辑：将它们组合成一个“不知道一个表可以有多少个主键”。根据您的评论：

将所有 _PK 连接到一列中：

```
Table_All_in_One (
    New_PK,
    TableX_Hash,

    Table1_PKx,     # Concatenated PKs of Table1
    Table2_PKx,     # Concatenated PKs of Table2, etc.
    ...,
                    # OR just one
    TableX_PKs,     # concatenate all the PK's into one VARCHAR field
                    # Add a pipe `|` between them optionally.
    Table_Num       # If using just one, then you'll need to store the table number 
```

) 您将无法根据*部分*复合主键方便地选择记录。它总是必须的`TableX_PKs = CONCAT_WS('|', Table1_PK1, Table1_PK2, ...)`。因此，您唯一的依赖是原始列中的 PK 数。

# python - Django 中有没有办法直接从模型中获取当前经过身份验证的用户？

> ID：12219830
> 
> 赞同：1
> 
> 时间：2012-08-31T17:16:03.937
> 
> 标签：python, django, authentication, model

就像我有一个像这样的消息模型

```
class Message(models.Model):
    from = models.ForeignKey(User)
    to = models.ManyToManyField(User)

    def get_authenticated_user_inbox_messages(self):
        return Message.objects.filter(to=authenticated_user).all() 
```

**authenticated_user**是获取当前经过身份验证的用户的一种方式。

在视图中，我可以通过*request.user获取经过身份验证的用户*

但是，如果我不想或不能通过设计将其作为参数传递，有没有办法直接从模型内部获取它？

有任何想法吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:22:15.853

不，这是不可能的。模型对象独立于 Web 请求而存在。例如，您可以从没有请求的命令行定义使用模型对象的管理命令。

我认为一个好的做法是在您的模型对象上定义一个静态方法，该方法将用户对象作为输入，如下所示：

```
class Message(models.Model):
    from = models.ForeignKey(User)
    to = models.ManyToManyField(User)

    @staticmethod
    def get_messages_to(user):
        return Message.objects.filter(to=user)

    @staticmethod
    def get_messages_from(user):
        return Message.objects.filter(from=user) 
```

您还可以为模型定义一个自定义管理器，并在那里定义这些便利方法。

**编辑：**好的，从技术上讲这是可能的，但我不建议这样做。有关方法，请参阅[Global Django Requests](http://nedbatchelder.com/blog/201008/global_django_requests.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:25:14.317

当您将设置的外键从 Messages 连接到 Users 时，django 会自动在 User 模型实例上创建相关字段。（见[https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)）

所以，如果你有一个用户对象，你应该能够访问`user_object.messages.all()`. 这感觉像是一种更适合 django 的方式来执行您的`get_authenticated_user_inbox_messages()`方法正在执行的操作。

# java - Struts2 SessionAware & ServletRequestAware

> ID：12219833
> 
> 赞同：0
> 
> 时间：2012-08-31T17:16:17.180
> 
> 标签：java, jsp, session, jakarta-ee, struts2

我是 Java 编程新手，我正在尝试使用 Struts2、JSP 和 jQuery 开发一个 Web 应用程序，并使用 JNDI 实现方法手动 JDBC 连接到 PLSQL。

我试图了解如何在 Struts 2 中实现会话管理。我看到了一些示例，其中操作类实现了像[这样](http://www.java4s.com/struts-tutorials/example-on-struts-2-sessionaware-interface/)的 SessionAware 拦截器，以及另一个实现 ServletRequestAware 拦截器的[示例。](http://www.java4s.com/struts-tutorials/struts2-insertupdatedeleteoperations-through-jdbc-real-time-application/)

有人可以向我解释使用哪种方法。两者有什么区别，你会使用哪个，为什么？我的要求很简单。我有一个完全基于登录的网络应用程序。因为只有登录页面是公开的，其余的都在用户身份验证之下。有 2 个用户角色 - 管理员和一般。根据登录角色，它们要么被定向到仅限管理员的页面 1,2，要么被定向到仅限常规的页面 3,4。如何使用 Struts2 中的会话管理概念来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:21:57.400

`SessionAware`给你一个会话属性映射。

`ServletRequestAware`给你一个`HttpServletRequest`.

有点像他们的名字所暗示的。通过阅读他们的文档了解差异。

有多种方法可以实现登录/等。在 S2 中，您可以通过在登录过程中将用户对象放入会话中并在注销期间将其删除来扮演自己的角色，并拥有一个拦截器来检查会话中是否存在有效的用户对象。

您可以使用 Spring Security 并节省一些有关角色等的工作，但老实说，如果您不使用 Spring，编写一些非常简单的注释并让拦截器处理这些几乎同样容易。

# algorithm - 什么更快：对 n 个元素进行排序，或将 n 个元素一一插入正确的位置？

> ID：12219835
> 
> 赞同：1
> 
> 时间：2012-08-31T17:16:35.187
> 
> 标签：algorithm, sorting

一般来说，什么更好：在某个集合中插入N个元素然后对其进行排序，或者在插入之前找出元素的正确位置并将其准确插入该位置（重复N次）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:21:42.337

**它非常依赖**于使用的数据结构和应用程序。

请注意，在*数组*中插入一个元素需要将所有以下元素向右移动，这会导致`O(n)`插入。
然而，二[叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)允许插入`O(logn)`，但[缓存](http://en.wikipedia.org/wiki/CPU_cache)效率低于数组 - 因此速度较慢。

另一方面，插入然后排序会在插入最后一个元素后导致高**[延迟](http://en.wikipedia.org/wiki/Latency_%28engineering%29)**`O(nlogn)`[排序]。
此外 - 如果您要经常查询 - 但很少添加元素 - 您希望避免过于频繁地排序 - 保持元素有序是实现此目的的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:19:18.320

在不对输入做任何假设的情况下，排序需要 nlog(n) 时间。插入一个元素需要 O(n) 时间（链表）。因此，在所有插入后排序更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:35:14.583

这个更好

> “在某个集合中插入 N 个元素，然后对其进行排序”

因为可以使用`O(nlogn)`算法进行排序。像这样在哪里

> “在插入之前找出元素的正确位置并将其准确插入该位置（重复N次）？”

是插入排序，以最坏的情况而闻名`O(n^2)`。

也就是说，插入排序是在线算法。即你不需要提前知道整个数据来开始排序。考虑由其他并行运行的程序生成的数据。这里插入排序是有意义的。而另一种方法需要整个数据到位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:21:31.340

取决于你的数据结构。请注意，要在插入之前找出正确的位置，您必须以某种方式对元素进行排序，这要求它们已经存储在数据结构中。您能否提供有关您要实现的目标的更多信息？

# ajax - 浏览器后退按钮不适用于 Ajax Updatepanel 点击

> ID：12219840
> 
> 赞同：1
> 
> 时间：2012-08-31T17:17:10.440
> 
> 标签：ajax, updatepanel

我在本地主机*与*生产服务器中面临一个疯狂的问题。

基本上问题是：浏览器后退按钮不支持在分页中遍历，这在 localhost 中工作得很好。我正在使用 Ajax 更新面板在网格视图中进行分页。

更有趣的事情是：当我点击浏览器后退按钮时，它会附加一个 404 URL，而我的服务器上什至没有 404 页面。

网址如下所示：

```
http://www.example.com/404.aspx?404;http://www.example.com:80/domain-abcd/ 
```

我可以浏览 localhost 中的所有页面，并且浏览器后退按钮正确响应，使我回到 gridview 中的上一页。

我正在使用 IIS 6.0 并用于重写 URL Intelligencia UrlRewriter。

为此，我在页面加载时使用下面的代码

```
form1.Action = Request.RawUrl 
```

关于如何处理和解决这些问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:22:15.213

请查看以下链接..

[http://rchern.wordpress.com/2008/05/11/updatepanel-backforward-browser-navigation/](http://rchern.wordpress.com/2008/05/11/updatepanel-backforward-browser-navigation/)

[如何通过单击浏览器的后退按钮获得相同的页面](https://stackoverflow.com/questions/973739/how-can-i-get-the-same-page-with-the-click-of-back-button-of-browser/973753#973753)

希望这会帮助你。

# android - Android应用程序崩溃，我不知道为什么

> ID：12219850
> 
> 赞同：0
> 
> 时间：2012-08-31T17:18:02.947
> 
> 标签：android

我有一个非常奇怪的错误。它只发生在模拟器中。我在多部 Android 手机和 Acer 平板电脑上对其进行了测试，它在那里运行良好。

我的程序有一个循环，将位图加载到`Bitmap[] bitCards`. 数组由 14 个元素设置`bitCards = new Bitmap[14]`。

现在它循环 12 次以将 Bitmap 放入 Array 中，如下所示：

```
bitCards[i] = BitmapFactory.decodeStream(inputStream); 
```

当 i = 8 时，它会在此语句处崩溃。

如果我将其替换为

```
bitCards[0] = BitmapFactory.decodeStream(inputStream); 
```

它不会崩溃，我想也许阵列不够大所以我做了以下

```
bitCards[8]=BitmapFactory.decodeStream(inputStream); // Still did not crash. 
```

唯一有意义的是，当我有

```
bitCards[i] = BitmapFactory.decodeStream(inputStream); 
```

它正在释放旧内存并放入一个新对象，因此只创建了一个对象的内存，但是....异常没有消失，我不应该得到某种错误吗？

这是我的完整代码：

```
void Shuffle()
{
    Random generator;
    generator = new Random();
    int[] iCardsUsed;
    iCardsUsed = new int[55];
    for(int i=0;i<55;i++)
    iCardsUsed[i]=0;

    try {   

        bitCards = new Bitmap[14];
        iCards = new int[14];
        iTurnOver = new int[14];

        for (int i = 0; i < 12; i++)
        {
            iTurnOver[i]=0;

            int cardId;

            do {
                cardId = generator.nextInt(50);
            } while( iCardsUsed[cardId] ==1);

            iCardsUsed[cardId] =1;
            iCards[i]=cardId;

            iCards[i]=i;    
            String fName=new String("card");
            fName+=Integer.toString(iCards[i]+1);
            fName+=".jpg";

            AssetManager assetManager= ctx.getAssets();
            InputStream inputStream;
            inputStream = assetManager.open(fName);

            // this is where it crashes
            bitCards[i]=BitmapFactory.decodeStream(inputStream);

            inputStream.close();    
        }

    } catch( IOException e)
    {
        gi++;
    }
    // update screen
    invalidate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:26:24.757

Since you have provided no error message, I am taking a shot in the dark and assuming it is going OOM.

You say that it stops after running for a few times ( when i = 8) , I believe that you are not freeing the resources. Bitmaps can sometime take up a lot of space and if you are persisting them in the memory, I would not be surprised if the device goes OutOfMemory. Different devices have different specs for memory and after a few runs it is filling up the memory.

So, my suggestion would be to clear the Bitmaps, using **`mBitmap.recycle()`**, and the other storage that you are using for temporary purposes.

Also, have a look at [this question](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)!

# php - ui-widget-overlay 覆盖在对话框窗口上

> ID：12219851
> 
> 赞同：1
> 
> 时间：2012-08-31T17:18:11.427
> 
> 标签：php, jquery, jquery-ui, yii, overlay

如何在对话框窗口中显示 ui-widget-overlay 或类似内容。我想在 ajax 调用期间禁用对话框窗口（而不是隐藏）。

在禁用对话框窗口的中心显示加载图像也很不错。

它如何通过 jquery 实现？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:21:18.593

使用[blockUI 插件](http://jquery.malsup.com/block/)。

并使用喜欢`$.blockUI()`和`$.unblockUI()`。

如果仍然有任何东西出现在覆盖层上，请确保`z-index`在初始化插件的默认值时为属性指定足够高的设置。

# python - Python中的平方根函数 - 它有什么问题？

> ID：12219852
> 
> 赞同：4
> 
> 时间：2012-08-31T17:18:13.863
> 
> 标签：python, function, debugging, square-root

我这周刚开始学习 Python。（我将在一个月内成为一名计算机科学专业的新生！）

这是我编写的用于计算 x 平方根的函数。

```
#square root function

def sqrt(x):
    """Returns the square root of x if x is a perfect square.
Prints an error message and returns none if otherwise."""

ans = 0
if x>=0:
    while ans*ans <x:
        ans = ans + 1
        if ans*ans == x:
            print(x, 'is a perfect square.')
            return ans
        else:
            print(x, 'is not a perfect square.')
            return None    
else: print(x, 'is a negative number.') 
```

但是当我保存它并在 Python shell 中键入 sqrt(16) 时，我收到一条错误消息。

```
NameError: name 'sqrt' is not defined 
```

我正在使用 Python 3.1.1。我的代码有问题吗？任何帮助，将不胜感激。谢谢

***更新*** 好的，感谢你们，我意识到我没有导入该功能。当我尝试导入它时，我收到了一个错误，因为我将它保存在一个通用的 My Documents 文件而不是 C:\Python31 中。因此，在将脚本保存为 C:\Python31\squareroot.py 后，我在 shell 中键入（重新启动它）：

> > > 导入平方根

并得到一个新的错误！

```
>>> import squareroot
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import squareroot
  File "C:\Python31\squareroot.py", line 13
    return ans
SyntaxError: 'return' outside function 
```

这意味着我的原始代码中有一个错误！我现在要看看下面的一些建议的更正。如果您发现了其他任何东西，请说。谢谢 ：）

***更新 2 - 它工作!!!!!!!!!!***

这就是我所做的。首先，我使用了 IamChuckB 友好发布的代码的清理版本。我在其中制作了一个新脚本（将函数名称从 sqrt 更改为 sqrta 以区分）：

```
def sqrta(x):
    """Returns the square root of x if x is a perfect square.
Prints an error message and returns none if otherwise."""
    ans = 0
    if x>=0:
        while ans*ans <x:
            ans = ans + 1
        if ans*ans == x:
            print(x, 'is a perfect square.')
            return ans
        else:
            print(x, 'is not a perfect square.')
            return None    
    else: 
            print(x, 'is a negative number.') 
```

而且，重要的是，将其保存为 C:\Python31\squareroota.py （同样，在末尾添加了一个“a”以区分另一个失败的文件。）

然后我重新打开 Python shell 并这样做：

```
>>> import squareroota 
```

什么都没发生，没有错误，太好了！然后我这样做了：

```
>>> squareroota.sqrta(16) 
```

得到了这个！

```
16 is a perfect square.
4 
```

哇。我知道这看起来像是在学校里玩 ABC 积木，但它真的让我大吃一惊。非常感谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:23:40.147

是的，我相信你必须将你的函数实际导入到 shell 中。

`from yourfile import sqrt`

当心。我认为，如果您在 shell 中并进行了更改，则必须重新导入函数才能显示这些更改。正如delnan在下面提到的那样，您可以[`reload`](http://docs.python.org/py3k/library/imp.html#imp.reload) 在更改文件后使用它..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:27:21.337

首先，您的循环将始终在其第一次迭代时结束，因为您基本上拥有`if (...) return else return`. 试试这个：

```
def sqrt(x):
    """Returns the square root of x if x is a perfect square.
       Prints an error message and returns none if otherwise."""
    ans = 0
    if x >= 0:
        while ans * ans <= x:
            if ans * ans == x:
                print(x, 'is a perfect square.')
                return ans
            ans = ans + 1
        print(x, 'is not a perfect square.')
        return None  
    else: print(x, 'is a negative number.') 
```

但请注意，Python 提供了一个内置的幂运算符：

```
def sqrt(x):
    return x ** 0.5 
```

要具体回答您的问题，您必须导入您的功能。如果写入此文件的文件是*sqrt.py*，则要在另一个文件中使用此函数，您将需要`from sqrt import sqrt`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:27:21.040

这`NameError`意味着您的 python shell 无法识别该函数。您可能忘记导入脚本。

假设您将文件保存为`myscript.py`（*在与启动 python shell 的目录相同的目录中*），您必须使用：

```
import myscript 
```

使内部定义的功能可用。请注意，您必须调用`myscript.sqrt`才能运行您的函数`sqrt`：它仅在`myscript`命名空间中可用。

另一种方法是键入`from myscript import sqrt`: 在这种情况下，您`myscript.sqrt`可以在命名空间中使用`sqrt`. 注意不要用这个覆盖内置函数`from ... import ...`......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:35:02.493

这是您的原始代码，刚刚清理，以便运行。最初格式化的问题在于缩进。

while 块应该缩进一层（4 个空格），以表示它位于函数 sqrt 的 def 块中。

在 while 语句中包含 if/else 块意味着每次通过循环都会进行检查；因此，第一次当 ans 仅等于 1 时，将完成该测试，打印您的输出并返回一个值。我们需要改变这一点。其他几个答案提供了更直接的方式来在 python 中表达这一点，但是，为了尽可能接近您编写的代码，您实际上需要做的就是将 if 块和 else 块移出而块。代码如下所示：

```
def sqrt(x):
    """Returns the square root of x if x is a perfect square.
Prints an error message and returns none if otherwise."""
    ans = 0
    if x>=0:
        while ans*ans <x:
            ans = ans + 1
        if ans*ans == x:
            print(x, 'is a perfect square.')
            return ans
        else:
            print(x, 'is not a perfect square.')
            return None    
    else: 
            print(x, 'is a negative number.') 
```

示例输入和输出如下所示： 在：

```
sqrt(9) 
```

出去：

```
9 is a perfect square. 
```

在：

```
sqrt(8) 
```

出去：

```
8 is not a perfect square. 
```

编辑：在我看来，Python 是一种很棒的第一语言。当我第一次开始使用它时，我发现[MIT OpenCourseWare](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/)课程非常有用。**一个非常重要的注意事项：该课程是使用 Python 2.x 而不是 3.x 教授的，因此某些给定的代码不适合您。**即使你不看所有的视频讲座，[他们给出的作业也](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/assignments/)有合理的难度，[阅读作业](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-00-introduction-to-computer-science-and-programming-fall-2008/readings/)参考了一些优秀的 Python 学习资料。

Udacity CS101 课程还提供了一个很好的、直接的 Python 编程介绍（**也使用 Python 2.x**），但我在那里只完成了大约一半的作业。但是，我仍然建议您看一下。

# ios - iOS 中的自定义电子邮件附件

> ID：12219853
> 
> 赞同：1
> 
> 时间：2012-08-31T17:18:14.010
> 
> 标签：ios, ipad, email-attachments, uidocument

我正在开发具有以下元素的 ipad 应用程序：

*   相册*   图像（所有图像都在相册中，一个相册中显然可以有很多图像）*   音频（音频与特定图像关联，一个图像可以关联多个音频文件）

    我试图找出创建支持两件事的“文档结构”的最佳方法：1）通过电子邮件发送图像，同时保留附加的音频，以便收件人可以在自己的 ipad 上的应用程序中打开附件， 2) 从应用程序内下载整个专辑，以使图像及其相关音频完好无损。

    我正在研究使用 UIDocument，但我会喜欢任何输入/建议/指向教程的指针，以确保我走在正确的道路上..

    谢谢！

# mongodb - mongodb不使用索引

> ID：12219858
> 
> 赞同：7
> 
> 时间：2012-08-31T17:18:40.713
> 
> 标签：mongodb, nosql

我有一个包含这些索引的集合：

```
db.colaboradores.getIndexKeys()
[ { "_id" : 1 }, { "nome" : 1 }, { "sobrenome" : 1 } ] 
```

和一个像这样的查询

```
db.colaboradores.find({_id: ObjectId("5040e298914224dca3000006")}).explain(); 
```

与索引配合得很好

```
{
    "cursor" : "BtreeCursor _id_",
    "nscanned" : 0,
    "nscannedObjects" : 0,
    "n" : 0,
    "millis" : 0,
} 
```

但是运行时：

```
db.colaboradores.find({nome: /^Administrador/}).explain() 
```

mongodb 不再使用索引：

```
{
    "cursor" : "BtreeCursor nome_1",
    "nscanned" : 10000,
    "nscannedObjects" : 10000,
    "n" : 10000,
    "millis" : 25,
} 
```

任何解决方案？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T17:55:37.350

您看到的行为是 MongoDB 预期的。这对于使用复合索引的任何查询通常都是正确的——一个具有多个字段的查询。

经验法则是：

如果您在 {a:1, b:1, c:1} 上有一个索引，那么以下查询将能够有效地使用该索引：

```
find(a)
find(a,b)
find(a,b,c)
find(a).sort(a)
find(a).sort(b)
find(a,b).sort(b)
find(a,b).sort(c) 
```

但是，以下查询将无法充分利用索引：

```
find(b)
find(c)
find(b,c)
find(b,c).sort(a) 
```

原因是 MongoDB 创建复合索引的方式。索引是 btree，节点按排序顺序出现在 btree 中，最左边的字段是主要排序，下一个字段是次要排序，依此类推。

如果你跳过索引的前导成员，那么索引遍历将不得不跳过很多块。如果该性能很慢，那么查询优化器将选择使用全集合扫描而不是使用索引。

有关 MongoDB 索引的更多信息，请在此处查看这篇出色的文章：

*   [http://kylebanker.com/blog/2010/09/21/the-joy-of-mongodb-indexes/](http://kylebanker.com/blog/2010/09/21/the-joy-of-mongodb-indexes/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T17:25:34.783

它确实使用了索引——你可以知道，因为光标是 BtreeCursor。您的集合中有很多 (10000) 个文档，其中“nome”等于“Administrador”。

输出说明：

"cursor" : "Btree_Cursor nome_1" 表示数据库在 "nome" 上使用升序索引来满足查询。如果没有使用索引，光标​​将是“BasicCursor”。

“nscanned”：数据库必须检查的文档数量（“nscannedObjects”对于这个查询基本上是一样的）

“n”：返回的文档数。这与“nscanned”相同的事实意味着索引是有效的——它不必检查任何与查询不匹配的文档。

# android - 将值传递给 onActivityResult

> ID：12219860
> 
> 赞同：1
> 
> 时间：2012-08-31T17:18:53.880
> 
> 标签：android

我在将值传递给 onActivityResult() 方法时遇到问题。这是我的代码：

```
public class UserUploadActivity extends Activity{

    String userID;
    Uri currImageURI;
    String path;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_upload);
        Bundle gotBundle = getIntent().getExtras();
        userID = gotBundle.getString("key");

        Intent selectImageIntent = new Intent();
        selectImageIntent.setType("image/*");
        selectImageIntent.setAction(Intent.ACTION_GET_CONTENT);

       startActivityForResult(Intent.createChooser(selectImageIntent, "Select Picture"), 1);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        if (resultCode == RESULT_OK)
        {
            if (requestCode == 1) {
            // currImageURI is the global variable I’m using to hold the content:
                currImageURI = data.getData();
                path = getRealPathFromURI(currImageURI);
                //covert to base64 image
                Bitmap bitmapOrg = BitmapFactory.decodeFile(path);
                ByteArrayOutputStream bao = new ByteArrayOutputStream();
                bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);
                byte [] ba = bao.toByteArray();
            //pass the base64 code to string and send it to php file
                String ba1=Base64.encodeBytes(ba);

                ArrayList<NameValuePair> nameValuePairs = new

                        ArrayList<NameValuePair>();

                        nameValuePairs.add(new BasicNameValuePair("image",ba1));
                        nameValuePairs.add(new BasicNameValuePair("id",userID));

                        try{

                        HttpClient httpclient = new DefaultHttpClient();

                        HttpPost httppost = new

                        HttpPost("website link");

                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                        HttpResponse response = httpclient.execute(httppost);

                        }catch(Exception e){

                            Toast.makeText(getBaseContext(), "Hindi Gumana", Toast.LENGTH_LONG).show();

                            }

            }
        }
    }// end method onActivityResult

    public String getRealPathFromURI(Uri contentUri)
    {
        String [] proj={MediaStore.Images.Media.DATA};
        android.database.Cursor cursor = managedQuery( contentUri,
        proj,     // Which columns to return
        null,     // WHERE clause; which rows to return (all rows)
        null,     // WHERE clause selection arguments (none)
        null);     // Order-by clause (ascending by name)
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }//end method getRealPathFromURI

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_user_upload, menu);
        return true;
    }

    } 
```

但我唯一的问题是如何将 userID 的值传递给 onActivityResult。已经发布了我的整个代码。我的问题是关于意图。

我已经在 onCreate 方法中使用了 toast 来查看它的价值和工作正常。但是每当我尝试将其传递给 onActivityResult 时，它总是返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:21:40.597

如果您将 userID 设置为类范围的变量，则 onActivityResult 如果您覆盖它，则应该可以访问它。

```
public class Blah extends Activity {
    String userID;
    @Override
    public void onCreate(Bundle savedInstanceState) { 
        // blah blah
        userID = "whatever value";
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) 
    {
        // use userID
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:18:59.777

我认为您是从另一个活动中调用此活动。而且您收到的捆绑包不包含我怀疑的“userId”令牌。

userID = gotBundle.getString("key");

这是您使用用户 ID 的唯一地方。如果您收到“密钥”，您应该能够访问该值。在上述行之后不久放一个 sysout 或 toast。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T14:23:40.547

非常老的问题，我意识到，但我认为这里的问题是传递给的 Intent`onActivityResult()`不一定与传递给的相同`startActivityForResult`。至少相机活动就是这种情况。（它为结果创建了一个新的 Intent。）

我找到的文档对此还很不清楚，但在我看来，您可以*通过*Activity 调用（并返回）的*唯一*信息是 integer 。如果您无法以整数捕获数据，也许您可​​以将其用作调用类保存的 Map 的键。*`onActivityResult``requestCode`*

 *或者做我怀疑大多数人会做的事情：将 放在`userId`Activity 的实例变量中，然后在`onActivityResult`. （如果调用者是一个Activity，你也应该按照[Hidayat Ullah的评论](https://stackoverflow.com/a/53216856/686385)建议，将字段值保存在Activity保存的实例状态中。）

更新：[另一个说同样的话的答案](https://stackoverflow.com/a/45247229/686385)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-08T22:05:38.743

由于在您的意图开始获取内容时您的流程可能会终止，因此您需要在已保存的实例状态 Bundle 中保留该信息，以便在重新创建活动时将其取回。

首先在 onSaveInstanceState 中保存 userID....

```
public void onSaveInstanceState(Bundle savedInstanceState) {
    // Save the userID.
    savedInstanceState.putString("myKey", userID);
    super.onSaveInstanceState(savedInstanceState);
} 
```

然后在 onCreate 方法中获取 userID 如下

```
if(savedInstanceState != null) {
       urerID = savedInstanceState.getString("myKey");
} 
```

完成此操作后，您将能够在 onActivityResult 中获取用户 ID。当我尝试这个时，我遇到了和你一样的问题，它对我有用。*

# c - 当线程同步不重要时，互斥锁的成本是多少？

> ID：12219864
> 
> 赞同：1
> 
> 时间：2012-08-31T17:19:01.527
> 
> 标签：c, locking, pthreads, mutex

我有一个跨线程访问的对象（一种队列）。队列对象在被任一线程使用之前可以被互斥锁。

一个更简单的管理方法是将锁引入队列对象本身 - 因此每个 API 都会锁定队列并在工作完成时释放。这样，线程不必与每个队列一起管理额外的互斥变量。

现在我的问题是，有时只有一个线程正在访问队列（比如说它是一个局部变量）。但既然现在队列本质上会先锁定其内部数据结构并在离开之前解锁，这会是一件代价高昂的事情吗？

当没有特别需要线程同步时，冗余 mutex_lock 和 mutex_unlock 操作的成本是多少？

PS：我的问题与这个问题略有相关：[锁定未锁定的互斥锁的效率如何？互斥锁的成本是多少？](https://stackoverflow.com/questions/3652056/how-efficient-is-locking-an-unlocked-mutex-how-much-does-a-mutex-costs)

但我正在寻找我的设计和理解原因的具体答案。

我正在使用 C 和 pthread 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:37:13.173

处理此问题的一种方法是让您的队列初始化采用一个参数，该参数指示在队列操作期间是否应获取锁。如果一个队列正在被单个线程使用，它会被初始化，这样它就不会获取/释放锁（或使用获取/释放操作为 nops 的锁对象）。

有关 boost::pool 如何按照这些方式执行某些操作的示例，请参见此答案（尽管在 C++ 中并作为编译时配置）：[https ://stackoverflow.com/a/10188784/12711](https://stackoverflow.com/a/10188784/12711)

类似的概念也可以在运行时应用于 C 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:27:57.810

首先：C 库和 pthreads 都没有实现互斥锁——它们调用内核来使用 OS 原语。这意味着，互斥体的性能将随基本操作系统的不同而有很大差异。

如果您可以将可移植性范围减少到支持原子比较交换或原子增加和读取的硬件（例如本世纪的任何 x86），您可以使用原子增加和读取来创建不需要锁定的线程安全队列。

对于 .Net 平台，我在[http://sourceforge.net/projects/dotnetlockless](http://sourceforge.net/projects/dotnetlockless)有这样的野兽- 将它移植到 C 应该很容易。

# python - python和matplotlib以及更改标记颜色

> ID：12219873
> 
> 赞同：3
> 
> 时间：2012-08-31T17:19:25.520
> 
> 标签：python, plot, matplotlib, wxpython, matplotlib-basemap

我正在使用 matplotlib 和 Basemap（在 wxpython gui 中）绘制东西。目前，我的情节代码看起来像这样：

```
self.map = Basemap(llcrnrlon=lon_L, llcrnrlat=lat_D, urcrnrlon=lon_R,
                               urcrnrlat=lat_U, projection='lcc', lat_0=map_lat1, lon_0=map_lon1, 
                               resolution='i', area_thresh=10000,ax=self.axes, fix_aspect=False) 

 m = Basemap(llcrnrlon=lon_L, llcrnrlat=lat_D, urcrnrlon=lon_R,
                        urcrnrlat=lat_U, projection='lcc', lat_0=map_lat1, lon_0=map_lon1, 
                        resolution='i', area_thresh=10000,ax=self.axes)

x,y=m(some_x_data,some_y_data)
plot_handle, = self.map.plot(x,y,'bo')
plot_handle.set_xdata(x)
plot_handle.set_ydata(y)

self.figure.canvas.draw() 
```

这情节很好。现在我想做的是取一个点（我的数据中的单个 x 和单个 y）并将其着色为不同的颜色。我仍然想使用 plot_handle 因为我不断更新地图/绘图——所以我不想只是重置我的数据。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T04:52:56.590

如果您使用`scatter`( [doc](http://matplotlib.sourceforge.net/api/axes_api.html#matplotlib.axes.Axes.scatter) )，您可以设置和更新每个点的颜色。

```
import matplotlib.pylab as plt
x,y = m(some_x,some_y)
c = iterator_of_colors
plt_handle, = self.map.scatter(x,y,c=c)
# some code
c[j] = new_color   # update you color list 
plt_handle.set_array(c) # update the colors in the graph
plt.draw() 
```

使用起来看起来有点奇怪，`set_array`但这就是在`matplotlib`内部处理散点图的方式（看起来它们使用用于显示图像的相同类，只是标记中的颜色而不是网格中的正方形）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:22:39.880

使用不同的标记为特定绘图执行新的 plot_handle：

```
plot_handle1, = self.map.plot([x[i]], [y[i]], 'ro') 
```

然后，每次要更改该点的位置时，都必须更新它。不可能只使用一个 plot_handle 并用不同的标记显示点。

# unicode - 如何让vim显示文件数据的逐字节表示

> ID：12219875
> 
> 赞同：14
> 
> 时间：2012-08-31T17:19:31.980
> 
> 标签：unicode, utf-8, vim, hex-editors

我不希望 vim 以任何编码特定的方式解释我的数据。换句话说，当我在 vim 中时，我希望光标所在的字符对应于实际的*byte*，而不是那个字节的 utf* （等）表示。

我需要使用 vim 来分析由其他人（使用其他软件）造成的 Unicode 转换错误引起的问题，所以重要的是我看到了实际存在的内容。

例如，在 Cygwin 的 vim 中，我已经能够将 UTF-8 BOM 视为

> ï»¿ [开始文件数据]

太棒了。我认为这是一个 UTF-8 BOM，如果我想知道每个字符的十六进制是什么，我可以将光标放在字符上并使用“ga”。

我最近有一台合适的 Linux 机器（Fedora）。在 /etc/vimrc 中，存在这一行

> 设置文件编码=ucs-bom,utf-8,latin1

当我查看这台机器上的 UTF-8 BOM 时，BOM 完全隐藏。

当我将以下行添加到 ~/.vimrc

> 设置文件编码=latin1

我懂了

> Ã¯Â»Â¿

前 3 个字符是 BOM（当对它们使用 ga 时）。我不知道最后三个字符是什么。

有一次，我什至看到 UTF-8 BOM 表示为“feff”——UTF-16 BOM。

无论如何，你看到了我的问题。我需要准确查看文件中的内容，而无需 vim 为我解释字节。我知道我可以使用 xxd、od 等，但 vim 作为分析工具一直非常方便。另外，我希望能够编辑文件并保存它们而不会出现任何转换问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T17:48:27.317

使用`'binary'`方式：

```
:edit ++bin file 
```

或者

```
vim -b file 
```

来自`:help 'binary'`：

> 'fileencoding' 和 'fileencodings' 选项将不被使用，文件被读取而不进行转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-13T16:34:36.800

加载文件后，我得到了一些好处`:e ++enc=latin1`（VIm 对编码的初步猜测在这个阶段并不重要）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-01T00:59:40.500

该序列`Ã¯Â»Â¿`实际上是 U+FEFF (BOM) 编码的 UTF-8、解码的 latin1、编码的 UTF-8 和再次解码的 latin1。 `ï»¿`是编码为 UTF-8 并解码为 latin1 的 U+FEFF (BOM)。你无法摆脱编码。这些不是*实际的 bytes*，它们是从不正确的解码中显示的 latin1 字符。如果需要字节，请使用十六进制编辑器；否则，请使用正确的解码。

# .net - ADPlus PostCommand 未运行

> ID：12219881
> 
> 赞同：2
> 
> 时间：2012-08-31T17:20:11.157
> 
> 标签：.net, debugging, windbg, adplus

我试图让 ADPlus 运行 PostCommand，但调用失败。

我首先使用的是在旧版本的 ADPlus 中调用 PreCommand 的配置文件。配置文件如下所示：

```
...
<PostCommands>
    <ShellSync>
        <Application> C:\path\to\foo\foobar.exe </Application>
        <Arguments> C:\foobar </Arguments>
    </ShellSync>
</PostCommands>
... 
```

当我使用此配置文件运行 ADPlus 时，我收到以下错误并且没有生成故障转储：

```
!!! ERROR !!!
Invalid key word: [C:\path\to\foo\foobar.exe]
at ADPlus.AdplusEngine.KeyWord2Command(String KeyWord, String Context, Boolean UseEscapedFlnm)
at ADPlus.AdplusEngine.ParseKeywords(String KeyWords, String Context, Boolean UseEscapedFlnm)
at ADPlus.AdplusEngine.CreateCDBScript(String FileName, AdplusApl CallingApl)
at ADPlus.AdplusApl.TryRun()
!!!ERROR - ADPlus failed to run 
```

看到它认为 C:\path\to\foo\foobar.exe 应该是一个关键字，我试着把它变成一个关键字，将我的配置文件更改为：

```
...
<KeyWords>
   <KeyWord Name="FooBar"> C:\path\to\foo\foobar.exe </KeyWord>
</KeyWords>
...
<ShellSync>
        <Application> FooBar </Application>
        <Arguments> C:\foobar </Arguments>
</ShellSync>
... 
```

使用新的配置文件，会生成转储，但之后我的 PostCommand 没有运行。我在 ADPlus 日志中收到以下错误：

```
...
0:004> * Post-commands
0:004> C:\path\to\foo\foobar.exe
Address expression missing from ':\path\to\foo\foobar.exe'
0:004> g
... 
```

请注意，驱动器名称 C 在地址表达式缺失行中被删除。

有谁知道为什么我的 PostCommand 没有运行？ADPlus 的文档很少，但我遵循 adplus.doc 中给出的配置文件格式，它是 Microsoft 调试器包的一部分。我在 PostCommand 周围尝试了各种引号和反斜杠组合，但仍有可能我没有正确引用或转义某些内容。adplus.doc 中的示例没有任何引号或转义字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:58:53.780

我可以通过将配置文件更改为：

```
... 
<KeyWords> 
   <KeyWord Name="FooBar"> .shell -i- C:\path\to\foo\foobar.exe C:\foobar</KeyWord> 
</KeyWords> 
... 
<ShellSync> 
        <Application> FooBar </Application> 
</ShellSync> 
... 
```

C:\foobar 是传递给 foobar.exe 的参数。当我尝试在标签中包含参数时它不起作用。或者，您可以在 -i 指定的文件中提供参数。-i- 没有指定输入文件，所以我提供了内联参数。

# php - 使用公共数组值连接两个多维数组

> ID：12219883
> 
> 赞同：2
> 
> 时间：2012-08-31T17:20:15.553
> 
> 标签：php, arrays, join

我有两个要合并为一个的数组。两个数组都有一个共同的 key=>value，我想将一个数组的值插入另一个数组，以便创建一个数组。

阵列 1

```
大批
(
    [0] => 数组
        (
            [ID] => 123456
            [键] => 1000
            [价值] => 123.45
        )

    [1] => 数组
        (
            [ID] => 789012
            [键] => 1001
            [价值] => 56748.17
        )

)

```

阵列 2

```
大批
(
    [0] => 数组
        (
            [键] => 1000
            [描述] => desc1
        )

    [1] => 数组
        (
            [键] => 1001
            [描述] => desc2
        )

```

我想将 Array 2 与 Array 1 连接起来，以便生成的 Array 如下所示：

```
大批
(
    [0] => 数组
        (
            [ID] => 123456
            [键] => 1000
            [价值] => 123.45
            [描述] => desc1
        )

    [1] => 数组
        (
            [ID] => 789012
            [键] => 1001
            [价值] => 56748.17
            [描述] => desc2
        )

)
```

因此，数组已使用 [Key] 值作为键进行连接。我查看了 array_merge 和其他函数，但我似乎无法让这两个数组正确“合并”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:46:20.740

你将不得不做类似的事情

```
$result = array();    

foreach ($a1 as $v1)
{
    foreach ($a2 as $k2 => $v2)
    {
        if ($v1['Key'] === $v2['Key'])
        {
            $result[] = array_merge($v1, $v2);
            unset($a2[$k2]);
            break;
        }
    }
} 
```

带有 for 循环的版本

```
$result = array();

$c_a1 = count($a1);
$c_a2 = count($a2);

for ($i = 0; $i < $c_a1; $i++)
{
    for ($j = 0; $j < $c_a2; $j++)
    {
        if ($a1[$i]['Key'] === $a2[$j]['Key'])
        {
            $result[] = array_merge($a1[$i], $a2[$j]);
            unset($a2[$j]);
            $c_a2--;
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:59:02.510

这是我的方法：

```
$temp_ array = array_fill_keys (array_map(create_function('$a', 'return $a["Key"];'), $array_1) , $array_1);
$result = array();
foreach ($array_2 as $item) {
    if (isset($temp_array[$item['Key']])) {
        $result[] = array_merge($item, $temp_array[$item['Key']]);
    }
} 
```

我在上面的代码中做了更多的阐述，并达到了这个改进的版本：

```
function array_merge_items_by_common_key_value($key, $array_1, $array_2)
{
    $result = array();
    $temp_ array = array_fill_keys(array_map(create_function('$a', 'return $a["' . $key . '"];'), $array_1) , $array_1);
    foreach ($array_2 as $item)
    {
        $result[$item[$key]] = isset($temp_array[$item[$key]]) ? array_merge($item, $temp_array[$item[$key]]) : $item;
    }
    return array_values(array_merge($result, array_diff_key($array_1, $result)));
}

$merged_arrays = array_merge_items_by_common_key_value('Key', $temp_array, $array_2); 
```

首先，创建一个临时数组：它等于 $array_1，但它的键是要匹配的值。

然后， $array_2 被循环。当找到匹配时，合并完成。如果没有匹配，则 $array_2 值保持不变。

最后，$array_1 中那些不匹配的值也被附加到结果数组中。

因此，$array_1 或 $array_2 中的任何项目都不会丢失，而匹配的项目会被合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:47:30.133

试试这个，它的线性

```
$keyval = array();

foreach($array1 as $item)$keyval[$item['Key']] = $item['value'];
foreach($array2 as $key=>$item)$array2[$key]['description'] = isset($keyval[$item['Key']]) ? $keyval[$item['Key']] : ''; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:51:46.467

如果您始终可以保证`$array1[$i]`对应于.@radashk 的解决方案将起作用`$array2[$i]`。从我对问题的阅读来看，这并不能保证，但是您想确保`$array1[$i]['Key'] == $array2[$j]['Key']`, 并组合这些键匹配的元素。

可能有一个更优雅的解决方案，但我会这样做：

```
 // builds up new $tmpArray, using the Key as the index
$tmpArray = array();
foreach($array1 as $innerArray1){
            $tmpArray[$innerArray1['Key']] = $innerArray1;
}

    //Merges the values from $array2 into $tmpArray
foreach($array2 as $innerArray2) {
            if (isset($tmpArray[$innerArray2['Key']])) {
                $tmpArray[$innerArray2['Key']] = array_merge($tmpArray[$innerArray2['Key']], $innerArray2);
            }else{
                $tmpArray[$innerArray2['Key']] = $innerArray2;
            }

} 
```

# google-bigquery - Google BigQuery 日期数据类型？

> ID：12219885
> 
> 赞同：5
> 
> 时间：2012-08-31T17:20:26.880
> 
> 标签：google-bigquery

Google BigQuery 中是否有日期或日期时间数据类型？我查看了在线文档，但提到的数据类型不包括任何日期类型

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-19T17:52:53.893

2013 年更新：

BigQuery 现在具有 Timestamp 类型。

查看：[BigQuery 数据类型](https://stackoverflow.com/questions/11722274/bigquery-datatypes/15754131#15754131)

2018：时间戳、时间、日期、日期时间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-17T17:01:50.137

2016 年更新：

BigQuery 现在在标准 SQL 中也有真实的 DATE 类型（除了 TIMESTAMP 类型）：

[https://cloud.google.com/bigquery/sql-reference/data-types#date-type](https://cloud.google.com/bigquery/sql-reference/data-types#date-type) [https://cloud.google.com/bigquery/sql-reference/functions-and-operators#date](https://cloud.google.com/bigquery/sql-reference/functions-and-operators#date)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T17:31:25.717

编辑添加：有一个日期时间类型，有关更多信息，请参阅 Fh 的答案。

没有可用的日期数据类型，但如果您使用 ISO 格式的日期时间 (YYYY-MM-DD HH:MM:SS[.uuuuuu]) 或时间戳（自 1970 年以来可转换为微秒），则有许多日期函数您可以使用。请参阅[此](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)页面了解更多信息。

# jquery - jquery switchClass 转换 - 背景图像

> ID：12219889
> 
> 赞同：1
> 
> 时间：2012-08-31T17:20:41.043
> 
> 标签：jquery, background, jquery-animate, css-transitions, toggleclass

我在使用 switchClass 方法时遇到了一些问题。`newsHover`当鼠标悬停在`newsArea`带有一些过渡的类时，我想添加/删除一个 css 类（ ）。

我有以下代码

```
$('.newsArea').mouseover(function(){
        $(this).switchClass('','newsHover',500, 'linear');
 }).mouseleave(function(){
        $(this).switchClass('newsHover','',500);
}); 
```

我认为这些方法是正确的，如您所见： [http](http://docs.jquery.com/UI/Effects/ClassTransitions) ://docs.jquery.com/UI/Effects/ClassTransitions和 [http://jqueryui.com/docs/switchClass/](http://jqueryui.com/docs/switchClass/)

newsHover 类有一个背景图像：

```
.newsHover{        
        background-image: url("../../images/newsArea-hover.png"); 
        background-repeat: no-repeat; 
        background-position:left top;
        width: 200px; height: 52px;            
      } 
```

图像出现但没有任何过渡。它在 500 毫秒后出现。

我可以接受任何带有 css3 跨浏览器的解决方案。

这里有什么提示吗？？

谢谢

**编辑**

我忘了告诉我我使用的是 1.7.2 jquery 版本；jquery.easing.1.3 和 jquery-ui-1.8.23.custom.min（选择了所有组件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:22:42.107

仅供参考，您描述的行为完全符合预期。该`switchClass` 函数只是更改在“过渡”结束时无法动画化的属性。`switchClass`不支持动画背景图像。

> 并非所有样式都可以设置动画。例如，没有办法为背景图像设置动画。任何无法动画的样式都将在动画结束时更改。

来自 [http://api.jqueryui.com/switchClass/][1]

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T17:28:50.850

有一个初始类可以切换 -

```
$('.newsArea').mouseover(function(){
        $(this).switchClass('oldClass','newsHover', 500);
 }).mouseleave(function(){
        $(this).switchClass('newsHover','oldClass',500);
}); 
```

**也许**图像在应用后需要时间来加载？

所以你可以试试..

```
.oldClass{
  background-image: url("../../images/newsArea-hover.png"); 
  background-size:0px;
}
.newsHover{        
   background-size: auto;     
} 
```

# io - 托管 VM 中的 I/O 虚拟化

> ID：12219893
> 
> 赞同：0
> 
> 时间：2012-08-31T17:20:51.437
> 
> 标签：io, virtualization, hosted

我听说托管虚拟机使 I/O 虚拟化更容易。因为虚拟机不需要设备驱动程序，它可以使用主机操作系统设备驱动程序来驱动设备。我的问题是，如果客户操作系统上安装了设备驱动程序，为什么我们需要使用主机操作系统的设备驱动程序？提前致谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:31:33.323

根据您的虚拟化解决方案，虚拟机的某些设备是虚拟的（例如，硬盘），而其他不是（例如处理器），对于虚拟化设备，它们是通用的，因此它们可能不需要驱动程序（但 VM 工具包含使它们性能更好的驱动程序），但最终虚拟机运行在主机操作系统之上，因此该操作系统需要为所有真实硬件提供驱动程序，以便能够为虚拟机提供该硬件.

# jquery - 动态添加时间jquery ui datepicker？

> ID：12219897
> 
> 赞同：1
> 
> 时间：2012-08-31T17:21:12.267
> 
> 标签：jquery, html, jquery-ui

嗨，我的动态表“时间表”真的需要一点帮助。我想将 datepicker 添加到动态提交的日期文本中吗？谁能帮帮我？当用户单击添加新行时，此代码将向表中添加新行？

```
 $(document).ready(function ($) {
    // trigger event when button is clicked
    $("button").click(function () {
        // add new row to table using addTableRow function
        addTableRow($("table"));

        // prevent button redirecting to new page
        return false;
    });

    // function to add a new row to a table by cloning the last row and
    // incrementing the name and id values by 1 to make them unique
    function addTableRow(table) {
        // clone the last row in the table
        var $tr = $(table).find("tbody tr:last").clone();

        // get the name attribute for the input and select fields
        $tr.find("input,select").attr("name", function () {
            // break the field name and it's number into two parts
            var parts = this.id.match(/(\D+)(\d+)$/);

            // create a unique name for the new field by incrementing
            // the number for the previous field by 1
            return parts[1] + ++parts[2];
            // repeat for id attributes
        }).attr("id", function () {
            var parts = this.id.match(/(\D+)(\d+)$/);
            return parts[1] + ++parts[2];
        });

        // append the new row to the table
        $(table).find("tbody tr:last").after($tr);
    };

});

  <table>
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Start Time</th>
        <th scope="col">End Time</th>
        <th scope="col">Hour Type</th>

      </tr>
    </thead>

    <tbody>
      <tr>
        <td><input name="date1" id="date1"></td>
        <td><input name="startTime1" id="startTime1"></td>
         <td><input name="endTime1" id="EndTime1"></td>
        <td>
          <select name="hourType1" id="hourType1">
            <option value="">Please select</option>
            <option value="1">Regular</option>
            <option value="2">Overtime</option>
          </select>
        </td>
      </tr>
    </tbody>   
</table>   
<button>Add Row</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:26:01.040

```
addTableRow($("table")); 
```

在你完成之后。

```
$("table tr").last().find('input.date-field').datepicker({...});
//{} = datepicker settings. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:30:56.573

而不是`id`使用 a `class`：

**HTML**

```
<td><input name="date1" class="date"></td> 
```

**jQuery**

```
$(".date").datepicker(); 
```

# java - 轴对齐边界框和三角形的分离轴测试会产生不正确的结果 (3D)

> ID：12219904
> 
> 赞同：3
> 
> 时间：2012-08-31T17:21:35.067
> 
> 标签：java, collision-detection

我正在做三角形到 AABB 相交测试，我正在从Christer Ericson的*Real-Time Collision Detection中获取这个示例代码。*作者在给出示例之前在书中所说的内容与示例不同，所以我不确定如何测试剩余的轴.. a01-a22。

**测试：**由两者的边组合的叉积给出九个轴。

```
// Test axes a00..a22 ( category 3 )
// Test axis a00
originDistance0 = triangle.point0.z * triangle.point1.y 
        - triangle.point0.y * triangle.point1.z;
originDistance2 = triangle.point1.z *( triangle.point1.y - triangle.point0.y ) 
        - triangle.point1.z * ( triangle.point1.z - triangle.point0.z );
projectionRadius = extent1 * Math.abs( edge0.z ) + extent2 * Math.abs( edge0.y );
if ( Math.max( -Math.max( originDistance0, originDistance2 ), Math.min( originDistance0, originDistance2 ) ) > projectionRadius ) {
    return false; // Axis is a separating axis
}

// Repeat similar tests for remaining axes a01..a22 
```

所以这是对第一个轴的测试。根据这本书，这些是轴：

a00 = u0 × f0 = (1, 0, 0) × f0 = (0, -f0z, f0y)

a01 = u0 × f1 = (1, 0, 0) × f1 = (0, -f1z, f1y)

a02 = u0 × f2 = (1, 0, 0) × f2 = (0, -f2z, f2y)

a10 = u1 × f0 = (0, 1, 0) × f0 = (f0z, 0, -f0x)

a11 = u1 × f1 = (0, 1, 0) × f1 = (f1z, 0, -f1x)

a12 = u1 × f2 = (0, 1, 0) × f2 = (f2z, 0, -f2x)

a20 = u2 × f0 = (0, 0, 1) × f0 = (-f0y, f0x, 0)

a21 = u2 × f1 = (0, 0, 1) × f1 = (-f1y, f1x, 0)

a22 = u2 × f2 = (0, 0, 1) × f2 = (-f2y, f2x, 0)

=============

p0 = V0 · a00

p1 = V1 · a00 = V1 = p0

p2 = V2 · a00 = V2

**图例**：u = 中心向量，f = 三角形边缘向量。p = 从原点到三角形顶点投影到法线的距离。V = 三角点。

如何计算后续的轴测试？也许如果有人可以做一个，我可以更好地了解其余部分，但只有一个例子，我被困住了......谢谢！

**编辑：**我尝试了以下.. 对于 a00-a22 没有运气，测试仍然通过。首先我添加了这段代码，并替换了 a00，并添加了 a01-a22。

```
// Test axes a00..a22 ( category 3 )
Vector3d a00 = new Vector3d();
Vector3d a01 = new Vector3d();
Vector3d a02 = new Vector3d();
Vector3d a10 = new Vector3d();
Vector3d a11 = new Vector3d();
Vector3d a12 = new Vector3d();
Vector3d a20 = new Vector3d();
Vector3d a21 = new Vector3d();
Vector3d a22 = new Vector3d();
a00.cross( u0, edge0 );
a01.cross( u0, edge1 );
a02.cross( u0, edge2 );
a10.cross( u1, edge0 );
a11.cross( u1, edge1 );
a12.cross( u1, edge2 );
a20.cross( u2, edge0 );
a21.cross( u2, edge1 );
a22.cross( u2, edge2 );

// Test axes a00-a22
originDistance0 = triangle.point0.dot( a00 );
originDistance2 = triangle.point2.dot( a00 );
projectionRadius = extent1 * Math.abs( edge0.z ) + extent2 * Math.abs( edge0.y );
if ( Math.max( -Math.max( originDistance0, originDistance2 ), Math.min( originDistance0, originDistance2 ) ) > projectionRadius ) {
    return false; // Axis is a separating axis
}
... 
```

**编辑2：**我还尝试了以下方法，这让我更接近，但仍然没有得到所有的交叉点并且得到了不应该有的交叉点。[https://gist.github.com/3558420](https://gist.github.com/3558420)

**更新：**仍然无法获得正确的交叉点结果。查看了 Eli 的代码，但它似乎是针对 2d 数据的，而且术语不同，所以我没有找到我的代码和他的代码之间的联系。

**更新 2：**其他尝试一直在尝试[此](http://fileadmin.cs.lth.se/cs/Personal/Tomas_Akenine-Moller/code/tribox3.txt)代码，这就像事实上的标准。我得到一个交叉点，当应该有 4 个交叉点时，其中 2 个包含三角形的点，3 个包含边，1 个只是平面。

被捕获的交点有一个点和两个边（加上平面）。还有另一个对象具有相同的特征，但位置不同，这不算作相交。这是我正在使用的数据，突出显示的“体素”是作为与三角形相交返回的数据。

![交叉点数据图像](../Images/1254ebe2bf9eb9a88d9fa5da32da211c.png)

以下测试类别返回的交集结果：

Voxel1：无，全部通过，默认返回“true”。
Voxel2：第 2
类 Voxel3：第 3
类 Voxel4：第 3 类
Voxel5：第 3 类

**更新 3：另一种实现，更好的结果**

好的，所以在阅读了 codezealot.org 上 William Bittle 的[文章](http://www.codezealot.org/archives/55#sat-proj)后，我实现了以下内容：

```
public static boolean testTriangleAABB( Triangle triangle, BoundingBox boundingBox, double size ) {
    Vector3d[] triangleAxes = getAxes( triangle.getPoints() );
    Vector3d[] aabbVertices = getVertices( boundingBox, size );
    Vector3d[] aabbAxes = getAxes( aabbVertices );

    // loop over the triangleAxes
    for( int i = 0; i < triangleAxes.length; i++ ) {
      Vector3d axis = triangleAxes[ i ];
      // project both shapes onto the axis
      Projection p1 = project( triangle.getPoints(), axis );
      Projection p2 = project( aabbVertices, axis );
      // do the projections overlap?
      if ( !p1.overlap( p2 ) ) {
        // then we can guarantee that the shapes do not overlap
        return false;
      }
    }

    // loop over the aabbAxes
    for( int i = 0; i < aabbAxes.length; i++ ) {
      Vector3d axis = aabbAxes[ i ];
      axis.normalize();
      // project both shapes onto the axis
      Projection p1 = project( triangle.getPoints(), axis );
      Projection p2 = project( aabbVertices, axis );
      // do the projections overlap?
      if ( !p1.overlap( p2 ) ) {
        // then we can guarantee that the shapes do not overlap
        return false;
      }
    }
    // if we get here then we know that every axis had overlap on it
    // so we can guarantee an intersection
    return true;
} 
```

坐标轴代码：

```
public static Vector3d[] getAxes( Vector3d[] vertices ) {
    Vector3d[] axes = new Vector3d[ vertices.length ];
    // loop over the vertices
    for ( int i = 0; i < vertices.length; i++ ) {
        // get the current vertex
        Vector3d p1 = vertices[ i ];
        // get the next vertex
        Vector3d p2 = vertices[ i + 1 == vertices.length ? 0 : i + 1 ];
        // subtract the two to get the edge vector
        // edge vector can be skipped since we can get the normal by cross product.
        // get either perpendicular vector
        Vector3d normal = new Vector3d();
        normal.cross( p1, p2 );
        axes[ i ] = normal;
    }
    return axes;
} 
```

投影类的重叠方法如下：

```
public boolean overlap( Projection projection ) {
    double test1;
    double test2;

    // and test if they are touching 
    test1 = min - projection.max;   // test min1 and max2 
    test2 = projection.min - max;   // test min2 and max1

    if( ( ( test1 > 0 ) || ( test2 > 0 ) ) ) {      // if they are greater than 0, there is a gap 
        return false;                               // just quit } 
    }
    return true;
} 
```

现在我正在使用另一个数据集来全面测试交叉点，因为我从上一个数据集中得到了一些误报。

三角形 0：真
三角形 1：真
三角形 2：真 <-- 应为假
三角形 3：假
三角形 4：假
三角形 5：真

（真=相交..）

这是我的数据集，根据结果进行标记。

![新的 aabb/三角形数据集](../Images/1807037d419b935e306c9f1baf3687ba.png)

所以我的想法是我没有得到正确的数据，因为我正在测试错误的轴/法线。所以我为 AABB 尝试了以下内容，并为三角形尝试了一个稍微改变的版本：

```
public static Vector3d[] getAABBAxes( Vector3d[] vertices ) {
    Vector3d[] axes = new Vector3d[ 6 ];
    // loop over the vertices
    for ( int i = 0; i < 6; i++ ) {
        // get the current vertex
        Vector3d p1 = vertices[ i ];
        // get the next vertex
        Vector3d p2 = vertices[ i + 1 == vertices.length ? 0 : i + 1 ];
        Vector3d p4 = vertices[ i + 3 == vertices.length ? 0 : i + 3 ];
        Vector3d edge1 = new Vector3d();
        Vector3d edge2 = new Vector3d();
        edge1.sub( p2, p1 );
        edge2.sub( p4, p1 );
        // subtract the two to get the edge vector
        // edge vector can be skipped since we can get the normal by cross product.
        // get either perpendicular vector
        Vector3d normal = new Vector3d();
        normal.cross( edge2, edge1 );
        normal.normalize();
        axes[ i ] = normal;
    }
    return axes;
} 
```

我明白了：

三角形 0：真
三角形 1：真
三角形 2：假
三角形 3：真 <-- 应该是假
三角形 4：真 <-- 应该是假
三角形 5：真

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:25:07.930

您可以在我不久前制作的游戏中检查我的 c#（在这种情况下几乎与 java 相同......）植入。 [http://code.google.com/p/gotcha/source/browse/trunk/Gotcha/trunk/Gotcha/Gotcha/GameEnteties/GameEntity.cs#171](http://code.google.com/p/gotcha/source/browse/trunk/Gotcha/trunk/Gotcha/Gotcha/GameEnteties/GameEntity.cs#171)

寻找方法：IsSATCollision

为简单起见，将其接受的参数视为具有顶点的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T01:14:40.477

我的测试得到误报的原因与三角形测试有关。

要测试一个三角形，它是 3D 空间中的一个平面，您必须针对 4 个轴（又名法线）进行测试。

1.  表面法线

    *   三角形两条边之间的叉积。
2.  边缘法线 1

    *   曲面法线和边 1 之间的叉积。
3.  边缘法线 2

    *   曲面法线和边 2 之间的叉积。
4.  边缘法线 3

    *   曲面法线和边 3 之间的叉积。

所以最后，要在立方体和三角形之间进行正确的（至少到目前为止它工作正常）碰撞测试，您必须执行 7 轴测试。

每个测试都包括检查三角形和盒子顶点对轴（法线）。这可以分解为三角形和盒子测试，如果一个有分离轴，那么你不必做另一个。

注意：此测试只会为您提供真/假结果。没有提供其他数据。

```
public static boolean testTriangleAABB( Triangle triangle, 
        Vector3d origin, double size ) {
    setTriangleNormal( triangle.getNormal( true ) );
    Vector3d[] aabbVertices = calculateAABBVertices( origin, size );

    // Triangle Normal axis test, false = No Collision.
    if( !testTriangleNormal( triangle, aabbVertices ) ) {
        return false;
    }

    // Triangle Edge Normals axis test, false = No Collision.
    if( !testTriangleEdgeNormals( triangle, aabbVertices ) ) {
        return false;
    }

    // Axis-Aligned Bounding Box X, Y, Z axis test, false = No Collision.
    if( !testAABBAxis( triangle, aabbVertices ) ) {
        return false;
    }     

    // if we get here then we know that every axis had overlap on it
    // so we can guarantee an intersection
    return true;
}

...

private static boolean testTriangleEdgeNormals( Triangle triangle, Vector3d[] aabbVertices ) {
    Vector3d edge = new Vector3d();
    Vector3d edgeNormal = new Vector3d();

    // loop over the triangle edge normals
    Vector3d[] points = triangle.getPoints();
    for( int i = 0; i < points.length; i++ ) {
        int iOverflow = i + 1 == points.length ? 0 : i + 1;
        edge.sub( points[ i ], points[ iOverflow ] );
        edge.normalize();
        edgeNormal.cross( getTriangleNormal(), edge );

        // project both shapes onto the axis
        projectionAABB = project2D1D( aabbVertices, edgeNormal );
        projectionTriangle = project2D1D( triangle.getPoints(), edgeNormal );
        // do the projections overlap?
        if ( !projectionAABB.hasOverlap( projectionTriangle ) ) {
            // then we can guarantee that the shapes do not overlap
            return false;
        }
    }
    return true;
} 
```

此外，无需计算 Axis-Aligned Bounding Box 轴。因为它们是轴对齐的，所以轴将如下所示：

```
private static final Vector3d[] AABB_AXES = { 
    new Vector3d( -1.0, 0.0, 0.0 ), 
    new Vector3d( 0.0, -1.0, 0.0 ),
    new Vector3d( 0.0, 0.0, -1.0 ) }; 
```

# go - strconv.Itoa64(1234) 在 golang 中给出 undefined

> ID：12219911
> 
> 赞同：21
> 
> 时间：2012-08-31T17:21:58.207
> 
> 标签：go, int64, uint64

**这是我的代码：**

```
package main
import (
    "strconv"
    "fmt"
)
func main() {
    t := strconv.Itoa64(1234)
    fmt.Println(t)
} 
```

**问题：**

为什么会导致以下错误信息？

> 命令行参数 .\test.go:7: undefined: strconv.Itoa64 [在 0.2 秒内完成，退出代码为 2]

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-31T17:31:19.327

这是因为 Itoa64 不是 strconv 包中函数的名称。看起来你真的很想要。

```
t := strconv.FormatInt(1234, 10) 
```

见[http://golang.org/pkg/strconv/#FormatInt](http://golang.org/pkg/strconv/#FormatInt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-20T11:31:37.677

您可以像这样简单地转换

```
func main() {
    t := int64(1234)
    fmt.Println(t)
} 
```

# c++ - &* 用于原始指针、迭代器和 ... std::nullptr_t

> ID：12219915
> 
> 赞同：0
> 
> 时间：2012-08-31T17:22:19.170
> 
> 标签：c++, pointers, reference, nullptr

我有一个启用的模板函数（通过 std::enable_if），它的参数是原始指针，或者具有 std::iterator 类别，或者是 std::nullptr_t。在该函数中，原始指针（数据成员）设置为等于参数，如下所示：

```
template<class T> void myFunction(T it) 
{
    _ptr = &*it;
} 
```

&* 适用于指针和迭代器...但对于 std::nullptr_t 则失败。是否有任何解决方案可以避免编写 2 个不同的函数？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:25:40.423

最简单的方法是将函数更改为具有两个重载，一个用于原始指针/`nullptr_t`仅存储值，另一个由 SFINAE 选择用于当前实现的迭代器，尽管您应该注意这在某些情况下会失败（特别是如果`iterator::value_type`重载一元`operator&`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:25:31.937

和往常一样，我们可以用*trait*解决这个问题。这一次，我们不要写一个完整的类，因为一个简单的函数重载就足够了。

```
#include <cstddef>
#include <memory>

template <typename T>
T get_addr(T t) { return std::addressof(*t); } // #1

std::nullptr_t get_addr(std::nullptr_t np) { return np; } 
```

用法：

```
T _ptr = get_addr(it); 
```

`T`（如果重载指向的类型，这个特性也有效`operator&`。）

邀请您使用与主模板中`#1`相同的`enable_if`条件来保护过载。

# php - php header 内容配置

> ID：12219916
> 
> 赞同：0
> 
> 时间：2012-08-31T17:22:20.547
> 
> 标签：php

我有一个非常基本的问题，下面的代码片段说明了这一点。这是一个更大的程序的相关部分，我希望在其中下载一个 zip 文件。如图所示，带有注释的代码会产生预期的浏览器输出“立即下载文件”。

当我取消注释代码时，zip 文件已正确下载到我的浏览器！

但是，不会生成浏览器输出。如何重新获得控制权？我希望用户有其他选择。（顺便说一句，取消注释单个“内容处置”行足以导致失去控制。）

我试过包括代码，把它放在一个函数中，ob_start，ob_end flush等的许多可能组合，都无济于事。我确信我忽略了一些非常基本的东西，并希望得到一些建议。

谢谢。

```
<?php
$sZipFN = 'file.zip';
// header("Content-type: application/zip");
// header("Content-disposition: attachment; filename=$sZipFN");
// readfile($sZipFN);
$sMsg = "Download the file now.";        
?>
<html>
  <body>
    <p> <?php echo $sMsg; ?> </p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:58:37.857

您不能 - 您必须重定向到选项页面，然后通过 javascript 重定向 ( `document.location = 'http://download.url/';`) 开始下载

这将开始下载并将用户留在您想要的选项页面上。

不要忘记在页面顶部附近的某处添加“如果下载无法开始，请单击此处”链接（以防 javascript 被禁用）

# javascript - Javascript 代码在 Firefox 或 Chrome 中无法正常运行

> ID：12219919
> 
> 赞同：0
> 
> 时间：2012-08-31T17:22:32.617
> 
> 标签：javascript, getelementbyid

我已经为此奋斗了几天。我不明白为什么这在 Chrome 中不起作用，但在 IE 中起作用。

我想要出现的所需下拉框没有，它也不会写入控制台屏幕。任何帮助都会很棒。

谢谢

```
 function showYear() {
        var typeReq = document.getElementById("Formtype");
        var aYear = document.getElementById("year");
        if (typeReq.value == "Upload") {
            console.log('upload selected');
            aYear.style.visibility ="visible";
        } else {
            console.log('View selected');
            loadUpload()
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:42:14.110

如果与函数的参数匹配，Internet Explorer 的实现`getElementById`将返回具有该属性的元素。`name`确保在 HTML 中使用该`id`属性：

```
<!-- wrong -->
<input name="Formtype" />

<!-- right -->
<input id="FormType" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:30:15.653

如果我正确理解了您的问题，那么您必须`showYear();`在 DOM 准备好之前调用该函数。

DOM 准备好后尝试调用该函数。

# file-upload - 错误未显示

> ID：12219924
> 
> 赞同：0
> 
> 时间：2012-08-31T17:22:42.467
> 
> 标签：file-upload, php

我的 php 照片上传脚本有问题。当我上传超过 2mb 的文件时，当我点击上传时它不会显示该错误..但它在我的脚本中..知道这是为什么吗？例如。我上传了一个 .wma 文件，它是 2.38MB ..超出了限制..但它只是说“文件类型不允许”为什么它也没有显示超过 2mb 的错误？

这是我的脚本：

```
<?php
include 'init.php';

if(!logged_in()){
header('Location: index.php');
exit();
}

include 'template/header.php';
?>

<h3>Upload Image</h3>

<?php

if(isset($_FILES['image'], $_POST['album_id'])){
$image_name = $_FILES['image']['name'];
$image_size = $_FILES['image']['size'];
$image_temp = $_FILES['image']['tmp_name'];

$allowed_ext = array('jpg', 'jpeg', 'png', 'gif');
$image_ext = strtolower(end(explode('.', $image_name)));

$album_id = $_POST['album_id'];

$errors = array();

if (empty($image_name) || empty($album_id)){
    $errors[] = 'Something is missing';
} else {

    if(in_array($image_ext, $allowed_ext) === false){
        $errors[] = 'File type not allowed';
    }

    if($image_size > 2097152){
        $errors[] = 'Maximum file size is 2MB'; 
    }

    if(album_check($album_id) === false){
        $errors[] = 'Couldn\'t upload to that album';
    }

}

if(!empty($errors)){
    foreach ($errors as $error){
        echo $error, '<br />';
    }
} else {
    // upload image
}
}

$albums = get_albums();

if(empty($albums)){
echo '<p>You don\'t have any albums. <a href="create_album.php">Create an album</a></p>';
} else {
?>

<form action="" method="post" enctype="multipart/form-data">
<p>Choose a file:<br /><input type="file" name="image" /></p>
<p>
Choose an album:<br />
<select name="album_id">
    <?php 
    foreach ($albums as $album){
        echo '<option value="', $album['id'], '">', $album['name'], '</option>';
    }
    ?>
</select>
</p>
<p><input type="submit" value="Upload" /></p>
</form>

<?php
}

include 'template/footer.php';
?> 
```

再次感谢您对我可能很容易的帖子的所有耐心，因为那里有很多更有经验的程序员！-TechGuy24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:43:29.620

根据代码，如果上传的文件大小> 2mb，它应该。但是，计算机永远不会出错，但人会出错，因此调试很重要。

只需替换代码

```
if($image_size > 2097152){
    $errors[] = 'Maximum file size is 2MB'; 
} 
```

带有调试语句

```
if($image_size > 2097152){
    echo "in if, image size=".$image_size;
    $errors[] = 'Maximum file size is 2MB'; 
} else {
    echo "in else, image size=".$image_size;
} 
```

这只是调试的第一步。它可能会也可能不会解决真正的原因。让我们知道输出。

**评论后编辑：**

将该代码放在文件的开头。

```
echo "files<pre>";
print_r($_FILES);
echo "</pre>imgsz=".$_FILES['image']['size']; 
```

输出是什么。我想它可能包括

```
[error] => 1 
```

如果显示 error=1，请检查[http://php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

这意味着您在 php.ini 中的 upload_max_filesize 设置为 2MB 或更少。一旦有人上传比这更大的文件，它就永远不会到达您的代码，因为 PHP 默认拒绝该文件。

要解决此问题，请打开 php.ini 并增加 upload_max_filesize 的限制。

**评论后编辑3**

改变

```
if($image_size > 2097152){ 
```

到

```
if($_FILES['image']['error']==1){ 
```

这将解决问题。

# javascript - 由于资产：转储进程超时，如何调试失败的 Capifony 部署？

> ID：12219926
> 
> 赞同：2
> 
> 时间：2012-08-31T17:22:44.920
> 
> 标签：javascript, deployment, symfony, yui, capifony

```
$ cap deploy 
```

失败了，这是失败输出的片段

> ```
>  * executing "cd /var/www/site/prod/releases/20120831164520 && php app/console assetic:dump web --env=prod --no-debug"
>  servers: ["site.me"]
>  [site.me] executing command  
>  ** [out :: site.me] Dumping all prod assets.  
>  ** [out :: site.me] Debug mode is off.
> ......
>  ** [out :: site.me] [file+] web/js/compiled/c9751db.js
> *** [err :: site.me] [RuntimeException]
> *** [err :: site.me] The process timed out. 
> ```

我在`php app/console assetic:dump web --env=prod`本地运行命令，没有问题。

我还检查了 JSLint 上相关的预编译 JS 文件，没有错误。

这是我如何将问题 JS 文件嵌入到我的模板中

```
{% javascripts 
    '@SoopDesignBundle/Resources/public/js/*.js'
    filter='yui_js'
    output='js/compiled/*.js' 
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

我不确定如何找出问题所在。过去有一个缺失`;`或一些会导致 yui_js 动摇的东西，但我想不出还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T15:56:47.143

capifony 带有一个调试选项

```
cap -d deploy 
```

这个协议的每一步，可能会帮助你找到这个错误的确切来源。

# c++ - 将 short 打包/解包为 int

> ID：12219928
> 
> 赞同：3
> 
> 时间：2012-08-31T17:23:04.223
> 
> 标签：c++, c, cuda, bit-manipulation, c++-amp

我想将两个带符号的 16 位整数打包/解包成一个 32 位整数。但是，我并没有让它完全正常工作。

关于我可能做错了什么的任何想法？

```
template <typename T>
int read_s16(T& arr, int idx) restrict(amp)
{
    return static_cast<int>((arr[idx/2] >> ((idx % 2) * 16)) << 16) >> 16;
}

template<typename T>
void write_s16(T& arr, int idx, int val) restrict(amp)
{
    // NOTE: arr is zero initialized
    concurrency::atomic_fetch_or(&arr[idx/2], (static_cast<unsigned int>(val) & 0xFFFF) << ((idx % 2) * 16));
} 
```

函数返回/参数必须是我定义的。`lo`and是从不同的线程写入的`hi`（因此是 atomic_or），并且读取必须返回单个 32 位值。

目标平台不支持 16 位整数运算。

例子：

```
array<int> ar(1); // Container

write_s16(ar, 0, -16);
write_s16(ar, 1, 5);

assert(read_s16(ar, 0) == -16);
assert(read_s16(ar, 1) == 5); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:38:19.903

看起来太复杂了，里面还有奇怪的操作。

通常，您只需这样做：

```
int32_t Pack(int16_t a, int16_t b)
{
   return (int32_t)((((uint32_t)a)<<16)+(uint32_t)b);
}

int16_t UnpackA(int32_t x)
{
   return (int16_t)(((uint32_t)x)>>16);
}

int16_t UnpackB(int32_t x)
{
   return (int16_t)(((uint32_t)x)&0xffff);
} 
```

请注意，我使用具有显式位大小的类型来说明发生了什么。我还冒昧地假设您想要一个“整数”，而不是“无符号整数”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:32:31.387

下面的代码在 MSVC 中对我来说很好用。如您所见，它原则上与您的代码相同。

问题可能是您忘记将数组的内容初始化为零吗？您的平台如何处理负数并转换为 unsigned int？

```
template <typename T>
int read_s16(T& arr, int idx)
{
    return static_cast<int>((arr[idx/2] >> ((idx % 2) * 16)) << 16) >> 16;
}

template<typename T>
void write_s16(T& arr, int idx, int val)
{
    // NOTE: arr is zero initialized
    arr[idx/2] |= (static_cast<unsigned int>(val) & 0xFFFF) << ((idx % 2) * 16);
}

int main()
{
    int ar[2] = { 0,0 }; // container

    write_s16<int [2]>(ar, 0, -16);
    write_s16<int [2]>(ar, 1, 5);

    assert(read_s16<int [2]>(ar, 0) == -16);
    assert(read_s16<int [2]>(ar, 1) == 5);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T18:14:46.307

C++ AMP 中的这些原子操作也有以下限制：

*   您不应该混合原子和正常（非原子）读取和写入。正常读取可能看不到原子写入同一内​​存位置的结果。正常写入不应与对同一内存位置的原子写入混合。如果您的程序不符合这些标准，那么这将导致未定义的结果。
*   原子操作并不意味着任何形式的内存栅栏。原子操作可以重新排序。这与 C++ 中互锁操作的行为不同。

您似乎违反了其中的第一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-29T13:25:58.233

试试这个包装：

```
int_32 = (int16_1 & 0x0000FFFF) | (int16_2 & 0xFFFF0000); 
```

拆包：

```
int16_MSB = (int_32 >> 16) & 0xFFFF;
int16_LSB = int_32 & 0xFFFF; 
```

# android - AsyncTask 超过几秒钟？

> ID：12219930
> 
> 赞同：3
> 
> 时间：2012-08-31T17:23:04.590
> 
> 标签：android, android-asynctask

API 参考声明，

> 理想情况下，AsyncTasks 应该用于短操作（最多几秒钟。）

doInBackground 是否存在问题，例如，线程池可能会在 30 秒内耗尽线程？如果这就是原因，如果我确保我的应用程序永远不会同时执行超过一个这样长时间运行的 doInBackground ，它会不再是一个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T21:21:59.337

@Walter Mundt 给出的答案是正确的。不过，我想补充一些信息，并提供一个指向可用于长时间运行 AsyncTask 的库的指针。

AsyncTasks 是为在后台做事而设计的。而且，是的，如果您的 AsyncTask 持续两个很长时间，那么您将面临 2 个不同的问题，这是正确的：

1.  活动与活动生命周期的联系很差，如果活动终止，您将无法获得 AsyncTask 的结果。确实，是的，你可以，但这将是一种粗略的方式。
2.  AsyncTask 没有很好的文档记录。asynctask 的简单但直观的实现和使用会很快导致内存泄漏。

[RoboSpice](https://github.com/octo-online/robospice)是我想介绍的库，由@Walter Mundt 提出，它使用后台服务来执行此类请求。它是为网络请求而设计的（本质上可能长时间运行），但它可以很容易地适应执行与网络无关的长时间运行的任务。我很乐意为其添加补丁。

这就是为什么 AsyncTasks 不适合长时间运行的任务的原因。以下推理改编自 RoboSpice[动机](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)的摘录：解释为什么使用 RoboSpice 的应用程序满足了 Android 平台上的需求。

### AsyncTask 和 Activity 生命周期

AsyncTasks 不遵循 Activity 实例的生命周期。如果您在 Activity 中启动 AsyncTask 并旋转设备，则 Activity 将被销毁并创建一个新实例。但是 AsyncTask 不会死。它将继续存在，直到完成。

当它完成时，AsyncTask 不会更新新 Activity 的 UI。实际上，它会更新不再显示的活动的前一个实例。这可能会导致 java.lang.IllegalArgumentException: View not attach to window manager 类型的异常，例如，如果您使用 findViewById 来检索 Activity 中的视图。

### 内存泄漏问题

将 AsyncTasks 创建为活动的内部类非常方便。由于 AsyncTask 需要在任务完成或正在进行时操作 Activity 的视图，因此使用 Activity 的内部类似乎很方便：内部类可以直接访问外部类的任何字段。

*然而，这意味着内部类将在其外部类实例上持有一个不可见的引用：Activity。*

从长远来看，这会产生内存泄漏：如果 AsyncTask 持续很长时间，它会保持活动“活动”，而 Android 想要摆脱它，因为它不再显示。Activity 不能被垃圾收集，这是 Android 在设备上保留资源的中心机制。

### 您的任务进度将丢失

您可以使用一些变通方法来创建一个长时间运行的异步任务，并根据活动的生命周期管理其生命周期。您可以[在活动的 onStop 方法中取消 AsyncTask ，](https://github.com/square/otto/blob/master/sample/src/main/java/com/squareup/otto/sample/LocationMapFragment.java)也可以让您的异步任务完成，并且不会丢失其进度并将其[重新链接到您的下一个活动实例](https://github.com/octo-online/robospice/blob/master/robospice-motivations/src/com/octo/android/robospice/motivations/asynctask/AsyncTaskWithWeakReferenceDemoActivity.java)。

这是可能的，我们展示了 RobopSpice 的动机，但它变得复杂并且代码不是真正通用的。此外，如果用户离开活动并返回，您仍然会丢失任务的进度。Loaders 也会出现同样的问题，尽管它更简单地等同于 AsyncTask 以及上面提到的重新链接解决方法。

### 使用 Android 服务

最好的选择是使用服务来执行您长时间运行的后台任务。而这正是 RoboSpice 提出的解决方案。同样，它是为网络设计的，但可以扩展到非网络相关的东西。这个库有[大量的特性](https://github.com/octo-online/robospice/blob/master/README.md)。

[借助信息图表](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png)，您甚至可以在 30 秒内了解它。

* * *

将 AsyncTasks 用于长时间运行的操作确实是一个非常非常糟糕的主意。不过，它们适用于短暂的生命周期，例如在 1 或 2 秒后更新视图。

我鼓励您下载[RoboSpice Motivations 应用程序](https://play.google.com/store/apps/details?id=com.octo.android.robospice.motivations)，它确实深入地解释了这一点，并提供了执行某些后台操作的不同方法的示例和演示。

* * *

如果您正在为非网络相关任务（例如没有缓存）寻找 RoboSpice 的替代品，您还可以查看[Tape](http://square.github.com/tape/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T17:35:48.100

我相信 AyncTasks 通常仍然与产生它们的前台活动堆栈相关联，因此，例如，如果 Activity 产生 AsyncTask，用户离开应用程序，然后操作系统内存不足，它将终止 Activity 的进程（包括仍在运行的 AsyncTask），并且只希望您恢复状态并在用户恢复/返回您的应用程序时重新开始。

对于运行时间较长的任务，尤其是只有一个或几个的任务，您可能需要一个服务，因为即使您的应用程序的 UI 被关闭以节省内存，这些任务也可以持续存在。

免责声明：我有一段时间没有进行 Android 编码了，所以这个答案可能已经过时或者基于对事物如何工作的错误理解。如果有较新经验的人可以发表评论以确认，我将删除此警告；如果高级代表知道这是正确的，欢迎直接编辑这一段。

# android - 在 ViewPager/FrameLayout 下触摸缩放

> ID：12219934
> 
> 赞同：3
> 
> 时间：2012-08-31T17:23:37.570
> 
> 标签：android, imageview, android-imageview, android-framelayout, pinchzoom

我现在使用[Mike Ortiz 的 TouchImageView](https://github.com/MikeOrtiz/TouchImageView%20TouchImageView)和自定义 TouchViewPager 的几个应用程序版本的捏到缩放工作得很好，这样它就可以在视图寻呼机中工作。这工作得很好 - TouchViewPager 覆盖的唯一方法是[onInterceptTouchEvent](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)：

```
public boolean onInterceptTouchEvent(MotionEvent ev) {
    TouchImageView view = getTouchView();
    if( null != view ){
        if( !view.isAtLimit() && view.getCurrentScale() > 1){
            return false;
        } else {
            Log.v(TAG, "View limit = " + view.isAtLimit());
            Log.v(TAG, "View scale = " + view.getCurrentScale());
        }
    }

    return super.onInterceptTouchEvent(ev);
} 
```

最近，我们创建了一个扩展[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)并管理从 Internet 下载位图的新视图。在位图下载过程中，此布局显示一个 ProgressBar，然后在准备好后添加 TouchImageView。从视觉上看，这似乎可行——我们看到一个 ProgressBar，然后加载了 TouchImageView——但触摸变得一团糟，而且通常不能始终如一地工作。

我尝试将 onTouchEvent 从进度图像视图委托给触摸图像视图 - 不走运。我还尝试在进度图像视图中覆盖 onInterceptTouchEvent 以始终​​返回 false，但这也不起作用。

任何人都可以提供一些关于在哪里继续调试此问题的想法吗？我已经为此工作了大约一个星期，但收效甚微。

这是我看到的行为：

1.  活动加载，图像在 ViewPager -> FrameLayout -> TouchImageView 中可见。

2.  ViewPager 可以滑动和更改图像，但捏缩放不适用于第一张或第二张图像。最终你会到达一个可以使用捏缩放的位置。我无法弄清楚有什么不同。

3.  如果您确实尝试在滑动之前捏缩放，那么 ViewPager 滑动将不起作用，并且需要多次滑动才能使 ViewPager 进入页面。

4.  一旦您处于“工作位置”，滑动到页面就可以正常工作，以及捏缩放和平移缩放的图像。在此之后，所有职位都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:37:36.513

奇怪的是，通过在 TouchImageView 类中实现一个重置方法，我能够得到这个工作：

```
public void resetZoom() {
    Matrix imageMatrix = getImageMatrix();
    RectF drawableRect = new RectF(0, 0, bmWidth, bmHeight);
    RectF viewRect = new RectF(0, 0, getWidth(), getHeight());

    imageMatrix.setRectToRect(drawableRect, viewRect, Matrix.ScaleToFit.CENTER);

    matrix = imageMatrix;
    setImageMatrix(matrix);

    fitAndCenterView();

    invalidate();
} 
```

此方法在调用时重置图像的缩放 - 当我们在 framelayout 中设置图像时，调用它会设置所有内容。奇怪的是，当图像不在 FrameLayout 中时，这不是必需的。

我当然会感谢任何代码清理以及我们可以做的事情。

# java - MotionEvent.ACTION_MOVE 在 Android 中不起作用

> ID：12219938
> 
> 赞同：0
> 
> 时间：2012-08-31T17:23:49.980
> 
> 标签：java, android, android-layout, android-imageview, crop

在我的 android 应用程序中，我有一个裁剪图像。所以，我编写了一个`CropBox`扩展的`ImageView`. 我想移动裁剪框并调整其大小。我使用`OnTouchListener`，但 MotionEvent.ACTION_MOVE 不起作用。我用谷歌搜索，但我什么也没抓到。

属性类：

```
public class Attr {

    public static final float CROP_BOX_START_X = 5;
    public static final float CROP_BOX_START_Y = 5;
    public static final float CROP_BOX_END_X = 305;
    public static final float CROP_BOX_END_Y = 105;

} 
```

裁剪框类：

```
public class CropBox extends ImageView {

    private Paint paint = new Paint();

    public CropBox(Context context) {
        super(context);
    }

    public CropBox(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
    }

    @Override
    public void onDraw(Canvas canvas) {
        float[][] circleXY = {
            {Attr.CROP_BOX_START_X, Attr.CROP_BOX_START_Y},
            {(Attr.CROP_BOX_START_X + Attr.CROP_BOX_END_X) / 2, Attr.CROP_BOX_START_Y},
            {Attr.CROP_BOX_END_X, Attr.CROP_BOX_START_Y},
            {Attr.CROP_BOX_START_X, Attr.CROP_BOX_END_Y},
            {(Attr.CROP_BOX_START_X + Attr.CROP_BOX_END_X) / 2, Attr.CROP_BOX_END_Y},
            {Attr.CROP_BOX_END_X, Attr.CROP_BOX_END_Y},
            {Attr.CROP_BOX_START_X, (Attr.CROP_BOX_START_Y + Attr.CROP_BOX_END_Y) / 2},
            {Attr.CROP_BOX_END_X, (Attr.CROP_BOX_START_Y + Attr.CROP_BOX_END_Y) / 2}
        };
        float[][] lineXY = {
            {Attr.CROP_BOX_START_X, Attr.CROP_BOX_START_Y, Attr.CROP_BOX_END_X, Attr.CROP_BOX_START_Y},
            {Attr.CROP_BOX_START_X, Attr.CROP_BOX_END_Y, Attr.CROP_BOX_END_X, Attr.CROP_BOX_END_Y},
            {Attr.CROP_BOX_START_X, Attr.CROP_BOX_START_Y, Attr.CROP_BOX_START_X, Attr.CROP_BOX_END_Y},
            {Attr.CROP_BOX_END_X, Attr.CROP_BOX_START_Y, Attr.CROP_BOX_END_X, Attr.CROP_BOX_END_Y}
        };

        paint.setColor(Color.CYAN);
        paint.setStrokeWidth(1);

        for(int i = 0 ; i < circleXY.length ; i++)
            canvas.drawCircle(circleXY[i][0], circleXY[i][1], 5, paint);

        paint.setStrokeWidth(2);

        for(int i = 0 ; i < lineXY.length ; i++)
            canvas.drawLine(lineXY[i][0], lineXY[i][1], lineXY[i][2], lineXY[i][3], paint);
    }

} 
```

CropTestActivity 类：

```
public class CropTestActivity extends Activity {

    private ImageView imageView;
    private CropBox cropBorder;
    private RelativeLayout relativeLayout;
    private RelativeLayout.LayoutParams layoutParams;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.crop_test_layout);
        imageView = (ImageView)findViewById(R.id.android_image);
        cropBorder = new CropBox(this);
        relativeLayout = (RelativeLayout)findViewById(R.id.crop_test_layout);
        layoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
        ViewTreeObserver viewTreeObserver = imageView.getViewTreeObserver();
        if(viewTreeObserver.isAlive()) {
            viewTreeObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                public void onGlobalLayout() {
                    layoutParams.leftMargin = imageView.getWidth() / 2 - (int)((Attr.CROP_BOX_START_X + Attr.CROP_BOX_END_X) / 2) + imageView.getLeft();
                    layoutParams.topMargin = imageView.getHeight() / 2 - (int)((Attr.CROP_BOX_START_Y + Attr.CROP_BOX_END_Y) / 2) + imageView.getTop();
                }
            });
        }
        relativeLayout.addView(cropBorder, layoutParams);
        cropBorder.setOnTouchListener(new Crop());
    }

} 
```

作物类别：

```
public class Crop implements OnTouchListener {

    private static final int NONE = 0;
    private static final int BOX_DRAG = 1;
    private static final int BORDER_DRAG = 2;

    private Matrix matrix = new Matrix();
    private Matrix savedMatrix = new Matrix();

    private PointF start = new PointF();

    private int mode = NONE;

    private float cropBoxStartX = Attr.CROP_BOX_START_X;
    private float cropBoxStartY = Attr.CROP_BOX_START_Y;
    private float cropBoxEndX = Attr.CROP_BOX_END_X;
    private float cropBoxEndY = Attr.CROP_BOX_END_Y;

    public boolean onTouch(View view, MotionEvent event) {
        CropBox cropBox = (CropBox)view;

        switch(event.getAction() & MotionEvent.ACTION_MASK) {

            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                if(event.getX() > cropBoxStartX && event.getX() < cropBoxEndX && event.getY() > cropBoxStartY && event.getY() < cropBoxEndY)
                    mode = BOX_DRAG;
                else if(event.getX() == cropBoxStartX || event.getX() == cropBoxEndX || event.getY() == cropBoxStartY || event.getY() == cropBoxEndY)
                    mode = BORDER_DRAG;
                else
                    mode = NONE;
                break;

            case MotionEvent.ACTION_UP:
                mode = NONE;
                break;

            case MotionEvent.ACTION_MOVE:
                if(mode == BOX_DRAG) {
                    matrix.set(savedMatrix);
                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);
                }
                else if(mode == BORDER_DRAG) {  
                }
                break;
        }
        cropBox.setImageMatrix(matrix);
        return true;
    }

} 
```

布局 XML：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/crop_test_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/android_image"
        android:src="@drawable/android"
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:layout_marginTop="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="10dp"
        android:layout_gravity="center"
        android:scaleType="fitXY"
        android:contentDescription="@string/android_image_description" >
    </ImageView>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/3176bc8986c1ffe3ebbd7bec2fdc6a6c.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:10:10.893

我相信您的实现是正确的，我唯一没有看到的是您将 CropBox 的比例类型设置为 MATRIX 以便能够使用 setImageMatrix。

# cpu - 现代 FPGA 的性能相对于 CPU 和绝对值（GFlops/GIops）有多少？

> ID：12219939
> 
> 赞同：2
> 
> 时间：2012-08-31T17:23:56.940
> 
> 标签：cpu, fpga, flops

现代 FPGA 相对于 CPU 的性能是多少，绝对以 (GFlops/GIops) 为单位，FPGA 上每秒 10 亿个整数运算的成本是多少？现在哪些任务有利于使用 FPGA？我只找到它： http: [//www.hpcwire.com/hpcwire/2010-11-22/the_expanding_floating-point_performance_gap_between_fpgas_and_microprocessors.html](http://www.hpcwire.com/hpcwire/2010-11-22/the_expanding_floating-point_performance_gap_between_fpgas_and_microprocessors.html)

还有一篇旧文章： [http ://www.mouldy.org/fpgas-in-cryptanalysis.pdf](http://www.mouldy.org/fpgas-in-cryptanalysis.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:41:03.247

免责声明：我在 SRC Computers 工作，这是一家异构 CPU/FPGA 系统制造商。

“视情况而定”当然是答案。

微处理器是一组固定的功能单元。这些在广泛的应用程序中表现相当不错。

FPGA 由设计人员使用一组专门设计用于执行特定应用的特定功能单元进行编程。因此，它（通常）对于给定的应用程序表现得非常好。

“现代FPGA的性能相对于CPU有多少，绝对在（GFlops / GIops）”成为一个毫无意义的问题。它可以由微处理器来回答，因为它有一组固定的浮点单元。但是，对于 FPGA，问题演变为 1）如果 FPGA 有多大，2）我可以在其中打包多少浮点单元并且仍然可以做有用的工作，围绕 FPGA 的内存/支持架构是什么以及 4）什么FPGA、其内存和系统其余部分之间的持续系统带宽是多少？

前一段类似地解决了“在 FPGA 上每秒进行 10 亿次整数运算的成本是多少”的答案。

关于性能需要记住的一件有趣的事情是，在 FPGA 中，峰值性能等于持续性能，因为 FPGA 专用于执行给定的应用程序。当然，只要其他系统参数不干扰。

您的问题“现在哪些任务有利于使用 FPGA？” 是一个非常广泛的问题，并且随着每个大型 FPGA 器件的发布而增长。在非常广泛的非排他性术语中，并行和流应用程序会受益，尽管应用程序性能在很大程度上取决于系统架构。

# c# - 根据共享基类中代码的执行情况创建几个派生类之一的实例？

> ID：12219940
> 
> 赞同：0
> 
> 时间：2012-08-31T17:24:00.247
> 
> 标签：c#, inheritance, polymorphism, multiple-inheritance

我想执行一些通用代码并初始化许多类共有的变量。在基类中完成所有这些工作是有意义的。然后，根据创建的数据，我想执行一些特定于特定功能的代码。我觉得这些函数应该在从基类派生的类中。但是，我也希望能够访问在基类中初始化的数据。

像这样的东西：

```
class Animal
{
    public Animal()
    {
        public int _earCount = 2;
        // determine if the planet is all water or all land
    }
}

class Dog : Animal
{
    public WagEars()
    {
    // for each ear, execute code to wag it
    }
}

class Whale : Animal
{
    public FlipTail()
    {
    // code to flip
    }
}

public main()
{
    Animal fred = new Animal;
    // what code goes here to invoke WagEars if the planet is all land?
} 
```

本质上，我要做的是为所有对象执行通用的页眉/页脚类型代码，中间有一些特定于派生类的代码。

创建 fred 时，直到执行公共代码后，我才知道它是狗还是鲸鱼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:29:55.243

您可能想要的是以下内容：

```
public main()
{
    Dog fred = new Dog();
    fred.WagEars();
} 
```

为了调用子类的方法，您需要将变量的类型声明为该类。

或者，您可以执行以下操作：

```
public main()
{
    Animal fred = new Dog();
    ((Dog)fred).WagEars();
} 
```

如果您将对象向下转换为正确的子类，您将可以访问子类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:54:11.890

这行得通吗？

```
if(fred is Dog)
{
  ((Dog)fred).WagEars();
}

if(fred is Whale)
{
  ((Whale)fred).FlipTail();
} 
```

# algorithm - 单例的变体仅返回 3 个实例

> ID：12219941
> 
> 赞同：0
> 
> 时间：2012-08-31T17:24:13.887
> 
> 标签：algorithm, class, singleton, instances, variation

我需要创建一个只返回 3 个实例的类。对此类实例的第四个请求应该接收第一个实例，第五个请求接收第二个实例，依此类推。一些代码示例会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:32:07.180

你可以试试这个：

```
class Singelton{
    private static ArrayList<Singelton> singeltonList = new ArrayList<Singelton>();
    private static count = 0;
    public static Singelton getInstance(){
      if(singeltonList.size()<3)
        singeltonList.add(new Singelton());
      count = (count)%3;
      return singeltonList.get(count++);
    }
    private Singelton() {}
} 
```

此解决方案适用于 java 语言。

# objective-c - [super init] 和 [[ParentClass alloc] init] 有什么区别？

> ID：12219942
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:24:16.110
> 
> 标签：objective-c, ios, oop, inheritance

考虑以下接口：

```
@interface Bar : NSObject

@end

@interface Foo : Bar

@end 
```

有什么区别...

```
@implementation Foo

- (id)init
{
    return [super init];
}

@end 
```

... 和...

```
@implementation Foo

- (id)init
{
    return [[Bar alloc] init];
}

@end 
```

...？

**编辑：**为澄清起见，我正在添加更多代码......

```
/* =============
 * GenericCell.h
 * =============
 */

// imports, etc.

typedef enum {
   GenericCellStyleFoo,
   GenericCellStyleBar
} GenericCellStyle;

@interface GenericCell : UITableViewCell

- (id)initWithStyle:(GenericCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier;

@end

/* =============
 * GenericCell.m
 * =============
 */

// imports, etc.

@interface FooCell : GenericCell

- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier;

@end

@interface BarCell : GenericCell

- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier;

@end

@implementation FooCell

- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier
{
    // *************************************************************************
    // This will actually call GenericCell's 'initWithStyle:reuseIdentifier:',
    // hence the "loop"!
    // *************************************************************************
    self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    if (self) {
        // various subviews or whatever to make this cell so special...
    }
    return self;
}

@end

@implementation BarCell

- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier
{
    // *************************************************************************
    // This will actually call GenericCell's 'initWithStyle:reuseIdentifier:',
    // hence the "loop"!
    // *************************************************************************
    self = [super initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    if (self) {
        // various subviews or whatever to make this cell so special...
    }
    return self;
}

@end

@implementation GenericCell

// some useful code...

- (id)initWithStyle:(GenericCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    if (style == GenericCellStyleFoo) {
        return [[FooCell alloc] initWithReuseIdentifier:reuseIdentifier];
    }
    else if (style == GenericCellStyleBar) {
        return [[BarCell alloc] initWithReuseIdentifier:reuseIdentifier];
    }

    return nil; // doesn't really matter for sake of this example
}

// some useful code...

@end

/* =================================
 * SomeTableViewControllerInstance.m
 * =================================
 */

// imports, etc.

@implementation SomeTableViewControllerInstance

// some useful code...

- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    GenericCellStyle style = [self styleDoesntMatterHowForRowAtIndexPath:indexPath];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell;

    // dequeue and all that...

    if (cell == nil) {
        cell = [[GenericCell alloc] initWithStyle:style reuseIdentifier:CellIdentifier];
    }

    // set labels, or whatever...

    return cell;
}

// some useful code...

@end

// End of file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:44:00.350

当您使用 时`super`，您指的不是父类。在某种程度上，您实际上指的是您正在创建的对象。看到这个问题：

[Objective-C 中的 super 到底是什么？](https://stackoverflow.com/questions/3095360/what-exactly-is-super-in-objective-c)

答案中有很多链接和信息可以真正详细地解释它。

# javascript - 使用 JSON 将二进制数据的 VBArray 提交到 MVC 3

> ID：12219944
> 
> 赞同：1
> 
> 时间：2012-08-31T17:24:20.330
> 
> 标签：javascript, jquery, json, asp.net-mvc-3, bytearray

我正在使用 activex 控件从硬件设备（正面和背面）获取图像。这些图像被创建为 VBArray。

```
data = {
    FrontImageData: scanResult.MemoryScanResult.FrontImageTiff.toArray(),
    BackImageData: scanResult.MemoryScanResult.BackImageTiff.toArray(),
}; 
```

这会将 VBArray 放入我的 json 对象中的数组中。

这是您的标准二进制/整数数组。我正在向我的服务器发送 ajax 帖子，效果很好。问题出在后端。

```
 [Authorize]
    [HttpPost]
    public JsonResult SubmitItem(SubmitItemRequest request)
    {
        return Json(null);
    } 
```

还有我的模特。我通过我的 ajax 帖子传递了其他数据，但这并不重要。

```
public class SubmitCheckRequest
{
    public byte[] FrontImageData { get; set; }
    public byte[] BackImageData { get; set; }
} 
```

我的问题是我的正面和背面图像作为空值进入服务器。当我评估请求时，数据就在那里，但是 MVC 没有将数据正确地转换到我的模型中。

也许问题是如何将“VBArray”转换为数组？任何想法如何将二进制数据发送到服务器，以便我可以将图像与元数据一起保存？

# php - 用于修复 URL 的 PHP 正则表达式

> ID：12219946
> 
> 赞同：0
> 
> 时间：2012-08-31T17:24:30.687
> 
> 标签：php, regex, url

我需要使用正则表达式来搜索字符串并修复某些 url。我需要从这样的链接中删除开头/：

/admin.somedomain.com 或 /somedomain.com

还有很多其他绝对网址，所以我不能只去掉任何前导 / 字符。任何帮助将不胜感激。

这是处理用户输入的文本，通常是来自 TinyMCE 的 html，但有时来自带有和不带有其他 HTML 的纯文本框（或者我会以不同的方式处理它并直接处理链接，而不必先搜索它们的字符串）。不幸的是，有时为 href 或 img src 等输入了错误的 URL。

我确实想要“/image.jpg”“/webapp/getfile?id=3354”之类的链接

但不是像“/somedomain.com”“/admin.somedomain.com”这样的链接

这是我可能需要清理的文本示例

```
<p><a href="/webapp/GetFile?id={2C59BC2D}"><img src="/wahelper/GetImage?id=308" alt="" width="100" height="100" /></a></p> <p><a href="/admin.somedomain.com">test</a></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:16:34.293

天哪，很难得到一个简单的正则表达式。尝试这个：

```
$str = preg_replace( "/^\/((?:admin\.)?[^.]+.(?:com|net|other_TLD_you_want))/i", "http://$1", $str); 
```

请注意，我实际上已替换`/`为，`http://`因为如果您希望链接正常工作，那确实是您想要的。如果您只是剥离，`/`那么链接最终将成为当前目录中名为本地文件的链接`admin.somedomain.com`- 这可能不是您想要的。

`com`另请注意，您可能需要更多的顶级域名，而不仅仅是`net`- 根据需要添加它们。

另请注意，这不适用于其他国家的顶级域名，如`co.uk`

# ruby - Selenium 的 StaleElementReferenceError 已加载内容

> ID：12219948
> 
> 赞同：10
> 
> 时间：2012-08-31T17:24:45.957
> 
> 标签：ruby, selenium, capybara

我使用 Selenium 驱动程序将 Capybara 与 Ruby 1.9.3 一起使用，以便从网站上获取信息。单击几页后，我访问了我想要的页面，然后输入：

```
 all(:css, 'td').each { |td| a_info << td }
 a_info.each {|t| puts t.text } 
```

然后我在等待大约 10 秒后得到错误：

```
[remote server] resource://fxdriver/modules/web_element_cache.js:5628:in `unknown': Element not found in the cache - perhaps the page has changed since it was looked up (Selenium::WebDriver::Error::StaleElementReferenceError) 
```

跟踪了更多远程服务器错误。我已经给页面 10-30 秒的睡眠时间，但它仍然没有加载，当我打印 page.html 时，我看到一个 javascript 脚本，然后是我试图从中获取信息的所有 td。我知道该错误意味着找到的元素不是当前元素，但似乎所有元素都已加载，所以我不确定它们为什么不再存在。我已经在互联网上搜索了几个小时来寻找这个，并且希望从可能的解决方案中获得任何帮助，以尝试解决问题以及尝试解决问题的后续步骤。我可以提供任何需要的额外信息，请告诉我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-15T22:23:05.907

例如，当您创建范围并更改页面时会发生这种情况，但会在其中不断进行断言，如下所示：

```
within 'selector' do
  expect(page).to have_link 'Link'

  visit 'page'

  expect(page).to have_link 'I do not know this whitin, I am stale.'

  find('I do not know this within, I am stale.').click
end 
```

只需再次重新打开您的范围以继续处理旧的范围。

```
within 'selector' do
  expect(page).to have_link 'Link'
end

visit 'page'

within 'selector' do
  expect(page).to have_link 'Now i am fresh'

  find('#now-i-am-fresh').click
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T04:13:46.300

这是我最不喜欢的错误。我将向您推荐这个关于堆栈溢出的确切问题，大约一年前[随机“元素不再附加到 DOM”StaleElementReferenceException](https://stackoverflow.com/questions/5709204/random-element-is-no-longer-attached-to-the-dom-staleelementreferenceexception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T17:01:06.240

在呈现的代码中，您正在控制台上打印文本，但也许在您的真实代码中，您单击`each`循环内的这些链接是错误的。

**解决方案**

首先尝试提取 href 属性，然后循环遍历它们。代码：

```
a_href = a_node.collect {|a| a[:href] }
a_href.each { |a| visit(a) } 
```

我不确定它是否适合您的情况，请在评论中提供更多信息。

# node.js - Mongoose 从其他字段创建自定义 _id

> ID：12219950
> 
> 赞同：4
> 
> 时间：2012-08-31T17:24:49.587
> 
> 标签：node.js, mongodb, mongoose

我知道，如果没有给出 ObjectID，Mongoose 会自动使用 ObjectID 填充 _id 字段，并且您可以在构建模型和实例时覆盖 _id。

我想要的是：以透明的方式从其他字段创建 _id。我想在创建模型实例时省略 _id 字段，然后调用一个函数来填充它。该函数应该在 Schema 级别上声明，并且使用该模型的任何人都不知道 _id 是由函数而不是 Mongoose 填充的。

我错过了 Schema 构造函数的钩子或参数吗？

猫鼬 3.0.x

**让我们更具体一点。**想象一下`BlogPost`，我想通过 slugging 标题来创建漂亮的 URL。为了将 slug 映射到 Mongo 对象，我对 slug 进行哈希处理并将其转换为 a`ObjectID`以利用它的好处。现在我正在寻找的是一个透明的方法，它允许我`BlogPost`只通过传入来创建一个实例`title`并自动生成`slug`and属性。`_id`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:59:41.057

使用一个设置器，`title`它会为你提供 slugifies 和 idifies：[https ://gist.github.com/3658511](https://gist.github.com/3658511)

如果您想确保您的代码仅在创建对象后执行，请检查`this.isNew`setter 内部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:33:05.213

这是你想要的？

您可以在保存模型之前定义一个函数来创建 _id，如： http: [//mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

如果在 Mongoose 默认创建 _id 之后调用此中间件（我猜不是），您可以使用 _id 选项告诉 Mongoose 不要创建 _id。 [http://mongoosejs.com/docs/guide.html#options](http://mongoosejs.com/docs/guide.html#options)

# ruby-on-rails - 模型遥控器

> ID：12219951
> 
> 赞同：1
> 
> 时间：2012-08-31T17:25:00.310
> 
> 标签：ruby-on-rails, ruby, model-view-controller, sinatra

我有一个在我的专用网络中运行的应用程序。我想公开一个 app_controller 但不是整个应用程序。我仍然想在不使用任何其他控制器的情况下从 app_controller 访问我的模型。

作为一种解决方法，我设置了一个代理 sinatra 服务，它只是将请求重定向到 app_controller 并返回它从 app_controller 接收到的响应。

有没有办法定义一个遥控器，这样我就可以访问我的模型，就好像它在同一个 rails 应用程序中一样。即，不同 Rails 应用程序中的控制器和模型。还是我以错误的方式接近它？

# objective-c - 自动斜线

> ID：12219955
> 
> 赞同：0
> 
> 时间：2012-08-31T17:25:19.133
> 
> 标签：objective-c, nsdictionary, stripslashes

所以我有一个用键和值填充的​​字典，唯一的问题是，当您尝试输入具有此一般大纲“blah\stuff”的字符串并尝试记录它时，该键的值显示“废话\\的东西。” 我希望它像用户输入它一样“blah\stuff”。有人知道怎么修这个东西吗？

```
 SMTPPort = "";
"Use SSL" = false;
"User Name_in" = "tia\\voizapp";
"User Name_out" = tia;
isOn = no; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:46:57.553

似乎是一个逃避问题。如果你想在 NSString 中加入一个反斜杠，你可以使用双反斜杠：

```
NSString* someString = @"blah\\stuff"; 
```

您的代码是否有可能在幕后保留双反斜杠？

# android - 如何防止屏幕阅读器在更新时读出状态栏通知

> ID：12219962
> 
> 赞同：2
> 
> 时间：2012-08-31T17:25:36.437
> 
> 标签：android, notifications, android-notifications, screen-readers

我的应用程序每秒都会在 Android 状态栏上更新一个*正在进行的*通知，以指示它一直在运行的操作的持续时间。

使用屏幕阅读器软件（针对视障用户）的用户报告了该问题，通知内容总是每秒回读一次。

我们有什么方法可以指示屏幕阅读器不阅读状态栏通知更新？

# android-ndk - Android ndk + libgdx

> ID：12219966
> 
> 赞同：1
> 
> 时间：2012-08-31T17:26:05.300
> 
> 标签：android-ndk, libgdx

我在 libgdx 中有一个项目。我想添加原生支持。连接 libgdx 文件夹时，libs 是 files
**\armeabi\libgdx.so
\armeabi\libandroidgl20.so
\armeabi-v7a\libgdx.so
\armeabi-v7a\libandroidgl20.so**

当我构建库**My.cpp**时，文件夹**armeabi**和**armeabi-v7a**覆盖 **armeabi**文件夹仅包含**My.so**，文件夹**armeabi-v7a**变为空。发生错误。

我的文件*Android.mk*

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := My
### Add all source file names to be included in lib separated by a whitespace
LOCAL_SRC_FILES := My.cpp
include $(BUILD_SHARED_LIBRARY) 
```

我知道修改 Android.mk，但我所有的尝试都失败了。请告诉我如何解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T17:36:26.003

在 Eclipse Android 工具在已经启动的项目中“添加本机支持”之后对我有用的方式（这搞砸了事情并在每次重建后删除了 libgdx 的 so 文件）。

1.- 在“jni”文件夹中创建一个子目录结构来放置 libgdx 的共享库

*   杰尼
    *   共享
        *   libgdx
            *   阿米亚比
                *   libandroidgl20.so
                *   ligdx.so
            *   armeabi-v7a
                *   libandroidgl20.so
                *   libgdx.so
    *   安卓.mk
    *   应用程序.mk
    *   我的应用程序.cpp

2.- 在“LOCAL_PATH := $(call my-dir)”之后将以下行添加到 Android.mk

```
include $(CLEAR_VARS)
LOCAL_MODULE := gdx
LOCAL_SRC_FILES := shared/libgdx/$(TARGET_ARCH_ABI)/libgdx.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := androidgl20
LOCAL_SRC_FILES := shared/libgdx/$(TARGET_ARCH_ABI)/libandroidgl20.so
include $(PREBUILT_SHARED_LIBRARY) 
```

3.- 将以下行添加到 Application.mk（如果此文件不存在，请在与 Android.mk 相同的文件夹中创建一个）

```
APP_ABI := armeabi armeabi-v7a
APP_MODULES := my_app gdx androidgl20 
```

就是这样，伙计们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:35:59.220

首先，您需要明确启用这两种架构。`Application.mk`使用以下行创建一个文件：

```
APP_ABI := armeabi armeabi-v7a 
```

您还需要参考链接库。将以下内容添加到 Android.mk：

```
LOCAL_SHARED_LIBRARIES += libgdx libandroidgl20 
```

其次，您需要使第三方库可用于构建。指南在这里：[Android NDK 构建 - 包括 LOCAL_SHARED_LIBRARIES？](https://stackoverflow.com/questions/10987767/android-ndk-building-include-local-shared-libraries)

# python - How to mock a base class with python mock library

> ID：12219967
> 
> 赞同：24
> 
> 时间：2012-08-31T17:26:09.217
> 
> 标签：python, mocking

I try to use `mock` to write some unit-tests in python.

For example I have the following class:

```
class TCPHandler(socketserver.BaseRequestHandler):
    def handle(self):
        self.data = self.request.recv(1024).strip() 
```

And I only want to test the `handle` method. Without having to assume anything about `socketserver.BaseRequestHandler`. I for example want to assert that `handle` calls `recv` with the argument `1024`. Is it possible to do such thing with mock? I.e. replacing the base class `socketserver.BaseRequestHandler` with a mock? Or am I off track with that idea?

* * *

With the answer of ecatmur (thank you!) I first tried the following:

```
patcher = patch.object(TCPHandler, '__bases__', (Mock,))
with patcher:
    patcher.is_local = True
    handler = TCPHandler()
    handler.handle() 
```

But now `handle` is not called anylonger and `dir(handler)` gives:

```
['assert_any_call', 'assert_called_once_with', 'assert_called_with', 'assert_has_calls', 'attach_mock', 'call_args', 'call_args_list', 'call_count', 'called', 'configure_mock', 'method_calls', 'mock_add_spec', 'mock_calls', 'reset_mock', 'return_value', 'side_effect'] 
```

`type(handler)` gives `<class 'mock.TCPHandler'>`

Which I interpret that patching the base class also turns my derived class into a mock.

* * *

I now gave another idea a try:

```
mock = MagicMock()
TCPHandler.handle(mock)
#assertions 
```

However the mock seems not to be called.

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-31T18:45:36.810

You can do this by patching the derived class's `__bases__`:

```
def test_derived():
    patcher = mock.patch.object(Derived, '__bases__', (mock.Mock,))
    with patcher:
        patcher.is_local = True
        d = Derived()
        print d.foo() 
```

The `is_local` hack is necessary to stop `mock.patch` from trying to call `delattr` when reversing the patch.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T06:11:08.923

I think the problem is really that you are trying to mock the actual code you want to test. Rather than the objects that are being called by that code. If you are interested in seeing whether the handle method calls the recv method on self.request then mock out the recv method.

```
def test_tcp_handler_method(self):

    handler = TCPHandler()
    handler.request = Mock()

    handler.handle()

    self.assertTrue(handler.request.recv.called)
    self.assertEqual(handler.request.recv.call_args[0], 1024) 
```

You might have to do some extra setup in order to get handler to instantiate but the basic idea should be clear.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-04T15:25:52.687

I don't know if it is the best solution but I managed redefining the previous class with a different parent using [type()](https://docs.python.org/2/library/functions.html#type). I built a function called `patch_parent()`, that returns the class with a parent mock:

```
from contextlib import contextmanager

@contextmanager
def patch_parent(class_):
    """
    Mock the bases
    """
    yield type(class_.__name__, (Mock,), dict(class_.__dict__)) 
```

After this, you can use the `patch_parent` like this:

```
class Bar():
   def method(self, param1, param2...):
       ...

class Foo(Bar):
   pass

>>> with patch_parent(Foo) as MockFoo:
...     f = MockFoo()
...     print f
...     print f.method()
... 
<Foo id='15488016'>
<Foo name='mock.method()' id='15541520'>
>>> s = Foo()
>>> s.method()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: method() takes exactly 3 arguments (1 given) 
```

The `MockFoo` class still has the methods of the `Foo` class and it doesn't have the methods defined in the parent because the parent is now a `Mock` class.

# mysql - 即使表确实存在，字段列表中的未知表

> ID：12219969
> 
> 赞同：3
> 
> 时间：2012-08-31T17:26:20.033
> 
> 标签：mysql

我正在尝试将 3 个表连接在一起，但我在字段列表中不断收到“未知表”调用。我知道表'调用'存在

这有效...

```
$sql = "SELECT * FROM calls WHERE id = '$diary_id'"; 
```

但这并不...

```
$sql = "SELECT * FROM (SELECT calls.id AS calls_id, calls.assigned_user_id AS assigned_user) calls
RIGHT JOIN accounts on accounts.parent_id = accounts.id
LEFT JOIN users on assigned_user = user.id
WHERE calls_id = '$diary_id'"; 
```

我正在尝试使用别名，因为我尝试加入的表具有相同的字段名称（我必须使用继承的数据库）。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T17:31:25.983

您的子查询：

```
SELECT calls.id AS calls_id, calls.assigned_user_id AS assigned_user 
```

正在选择`calls.id`，`calls.assigned_user`但没有定义表/别名的`FROM`子句。`calls`添加`FROM calls`到子查询（尽管为什么要在这里使用子查询？）。

您还在`user.id`连接标准中提到，但该表称为`users`.

并且您的帐户表的连接标准`accounts.parent_id = accounts.id`看起来非常可疑：您似乎正在尝试遍历使用邻接列表模型存储的分层数据，但是此连接无法实现；事实上，MySQL 不支持递归函数——所以它根本不适合这个模型。您可能会考虑重组数据以使用嵌套集或闭包表。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/192462/623041)。

反而：

```
SELECT *
FROM   calls
  RIGHT JOIN accounts ON accounts.parent_id  = accounts.id -- is this right?
   LEFT JOIN users    ON calls.assigned_user = user.id
WHERE calls.id = '$diary_id' 
```

# c# - 为类中的私有方法创建面向公众的方法有什么意义吗？

> ID：12219970
> 
> 赞同：0
> 
> 时间：2012-08-31T17:26:22.333
> 
> 标签：c#

对不起，如果这个问题听起来令人困惑。我的意思是，如果我有一个类，它有一个方法可以进行大量计算然后返回一个值，我可以将该方法设为公共（这使我的其他类可以访问），或者我可以将其设为私有并使其公共获取方法。

像这样的东西：

```
public publicmethod{
    return privatemethod();
}
private privatemethod{
    //do stuff
    return value;
} 
```

这是徒劳的练习还是提供了额外的程序安全性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:36:44.317

好吧，这里没有额外的安全措施。但是，这种用法有时是有意义的。

例如，私有方法和公共方法可能具有不同的语义。

```
// base class
public virtual BuyFood()
{
    BuyPizza();
    BuyCoke();
}
private void BuyPizza()
{
    // ...
}

// derived class
public override void BuyFood()
{
    BuyChopSuey();
}
private void BuyChopSuey()
{
    // ...
} 
```

所以你的实现只是调用一个私有方法——但重要的是，你暴露了语义：你的`BuyFood`操作只是`BuyChopSuey()`. 您的代码以明确的方式说：“在这堂课中，购买食物只是购买杂碎”。您可以随时添加，`BuyTsingtaoBeer()`而`BuyFood()`无需更改这两种方法的语义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T17:32:34.123

这是完全多余的。除了同一事物的另一个名称和读者遵循的另一个间接方式之外，它没有提供任何东西。只需制作一个实现，并将其公开。同样，`getX() { return x; } setX(T newX) { x = newX; }`不封装任何东西，充其量是面向未来的。

您最终可能会在一行中实现接口所需的特定功能，主要委托给（可能是私有的）方法，这些方法出于其他充分的理由而存在。这是不同的，而且更合理（但同样，如果*只是* `return someMethod();`你应该废除私有实现并采用通用名称）。一个特殊情况，如果您需要两个实现两个做同样事情的方法（例如，来自不同的接口）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:32:07.923

我认为任何一种方式都很好，假设该方法不会改变类的状态，这更多的是风格问题。如果你的类有很多属性和很少的方法，那么定义另一个属性可能更有意义。如果你的类中有很多方法但属性很少，那么一个方法更符合你的整体类设计。

如果该方法更改了一堆其他类变量，那么我会将其公开为公共方法而不是属性。

我不认为任何一种方式，财产或方法，一定更安全。这取决于您所做的检查 - 是否允许调用者执行计算？计算中使用的所有变量是否都在可接受的范围内？等等。无论您使用的是属性还是方法，都可以执行所有这些检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:35:05.150

嗯，其实问题是`What code do I want to be able to call this method?`

*   一般的任何代码，甚至来自其他程序集？制作方法`public`。
*   来自同一个程序集的任何代码？让它`internal`。
*   只有这个类的代码？让它`private`。

将私有方法直接别名为公共方法只会使私有方法可以从外部调用，这与其`private`状态相矛盾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T17:36:33.213

如果该方法只进行一些计算并且不使用或更改对象中的任何内容，请将其设为公共静态方法：

```
public static CalculationMethod(int input) {
  //do stuff
  return value;
} 
```

这样任何代码都可以使用该方法而无需创建类的实例：

```
int result = ClassName.CalculationMethod(42); 
```

而不是`public`考虑`internal`，这将只允许访问同一程序集中的代码。

# sql-server - 如何在 SQL2008R2 中将行整理到分隔字符串

> ID：12219972
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:26:24.447
> 
> 标签：sql-server, tsql

我们目前正在升级我们用 C# 编写的当前数据导入过程。

作为升级过程的一部分，我们需要根据旧系统的结果检查重写的导入过程的结果。

我们所做的更改之一是将逗号分隔的列表拆分为另一个表中的行。这将使我们能够使用简单的连接过滤结果。

这是旧模式：

```
FormNumber      MainCategories
1               blue,green,red
2               yellow,red,blue
3               white 
```

我们将其标准化为：

```
FormNumber      AttributeId      Value
1               1                blue
1               1                green
1               1                red
2               1                yellow
2               1                red
2               1                blue
3               1                white 
```

现在，我们的下一步是确认这两个过程的结果是否相同。其中一项检查是将旧流程的 MainCategories 字段与规范化表的结果进行比较。

最后，这将我们引向一个问题：如何创建新模式的逗号分隔列表以与旧模式的值进行比较。

我们在这里尝试了@Ritesh 提出的 XMLPath 解决方案：[Concatenate many rows into a single text string?](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

这是改编的sql语句：

```
Select distinct ST2.FormNumber, 
           (Select ST1.Value + ',' AS [text()]
            From cache.ArtifactAttribute ST1
            Where ST1.FormNumber= ST2.FormNumber
            ORDER BY ST1.FormNumber
            For XML PATH ('')) [Values]
     From cache.ArtifactAttribute ST2 
```

问题是结果不正确。尽管 FormNumber 1 在表中只有三个条目，但 Values 列（动态构建的分隔字符串）显示不正确的结果。显然我们没有正确实现 sql 代码。

我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:33:33.007

这对我来说似乎很好用：

```
DECLARE @s TABLE(FormNumber int, AttributeId int, Value varchar(32));

INSERT @s VALUES
(1,1,'blue'),
(1,1,'green'),
(1,1,'red'),
(2,1,'yellow'),
(2,1,'red'),
(2,1,'blue'),
(3,1,'white');

SELECT ST2.FormNumber, [Values] = STUFF(
      (SELECT ',' + ST1.Value AS [text()]
         FROM @s ST1
         WHERE ST1.FormNumber = ST2.FormNumber
         ORDER BY ST1.FormNumber
         FOR XML PATH (''),
         TYPE).value(N'./text()[1]', N'varchar(max)'), 1, 1, '')         
FROM @s ST2 GROUP BY ST2.FormNumber; 
```

结果：

| 表格编号 | 价值观 |
| --- | --- |
| 1 | 蓝色，绿色，红色 |
| 2 | 黄色，红色，蓝色 |
| 3 | 白色的 |

*   示例[db<>fiddle](https://dbfiddle.uk/?rdbms=sqlserver_2019&fiddle=235d72af9e23132938b4fa91428fc3a5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:35:10.993

您可以尝试以下方法：

```
SELECT DISTINCT A.FormNumber, MainCategories
FROM YourTable A
CROSS APPLY (SELECT STUFF((SELECT ',' + Value 
                           FROM YourTable
                           WHERE FormNumber = A.FormNumber FOR XML PATH('')),1,1,'') MainCategories) B 
```

尽管存在一个问题，即您不能真正确定连接的项目的顺序是否与您所拥有的相同，因为没有一列明确给出该顺序。这是此示例的有效[SQL Fiddle](http://sqlfiddle.com/#!3/ec0a4/1)。

# php - php返回全局变量

> ID：12219975
> 
> 赞同：2
> 
> 时间：2012-08-31T17:26:34.853
> 
> 标签：php, global-variables

我有可以设置并包含一些字符串的变量，如果没有，我需要以另一种方式找到这个字符串。我决定将三元运算符与匿名函数一起使用，第一个函数在设置变量值时使用，第二个在没有设置时使用。

问题是，第一个函数没有返回任何值，为什么不呢？

```
// This line is just for testing purposes so the first anonymous function is run
$variable = "value test";

$variable = isset($variable) ?
function() { global $variable; return $variable; } :
function() {
  $tmp = JFactory::GetDocument()->base;
  $tmp = explode('/', JFactory::GetDocument()->base);
  $tmp = explode('-', $tmp[count($tmp)-1]);
  unset($tmp[0]);

  return implode(' ', $tmp);  
};

print_r($variable); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:45:59.273

该函数可能不会返回任何内容，因为`$variable`它不是全局的，它位于调用者的范围内。您需要将其作为参数传递，或者在调用者中也将其声明为全局。

但是为什么要使用*两个*匿名函数呢？你不能使用：

```
$variable = isset($variable) ? $variable : function(){...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:38:49.417

发送`$variable`到匿名函数：

```
function($variable) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-23T07:02:52.857

这里的问题是我正在覆盖变量。我试图将`variable`但分配函数的值返回给相同的`variable`，所以实际值丢失了。所以解决这个问题的一种方法是重命名变量，或者将值传递给匿名函数。

```
//
// Rename variable
//
$variable1 = "value test";

$variable = isset($variable) ?
function() { GLOBAL $variable1; return $variable1; } :
function() { return false; };

var_dump($variable());

//
// Pass variable to anonymous function
//
$variable = "value test";

$variable = isset($variable) ?
function() use($variable) { return $variable; } :
function() {
    // ...
    return false;
};

var_dump($variable()); 
```

# php - 未定义变量 PHP 错误

> ID：12219977
> 
> 赞同：-4
> 
> 时间：2012-08-31T17:26:45.533
> 
> 标签：php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php
$backlinks=array($_POST['backlinks']);
$data=0; //If removed results in error
$data=implode($data,$backlinks[0]);
echo $data;

?>
</body>
</html> 
```

我在 $data 上遇到了这个未定义的变量 php 错误。我已经通过初始化 $data=0 来修复它，但这不是我的问题。我在 php 中读取变量初始化不是必需的。那么为什么会这样？我已经阅读了大部分关于此的条目，但没有任何解释背后的原因。我只需要专家建议。请不要发布一些链接只是为了投票。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:28:58.173

分配不需要它，但您正在调用 implode 并将其作为参数传递。由于它是未定义的，PHP 会告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:31:17.323

当你引用它而不声明它时，它肯定会抛出一个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:38:24.473

你可以写这行 $ data = implode($data="",$backlinks[0]); 并在 $data 传递给 implode 时对其进行实例化。

# javascript - 正则表达式加在中间

> ID：12219978
> 
> 赞同：2
> 
> 时间：2012-08-31T17:26:50.470
> 
> 标签：javascript, regex, replace

在 JavaScript 中假设我有一个字符串：**“test test hello test test”**

我知道如何用“再见”替换“你好”：

```
replace("hello","byebye"); 
```

但是在“hello”之后添加“byebye”的最佳方法是什么，所以我的字符串将变为：**“test test hello byebye test test”**，使用正则表达式？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:31:03.020

最好的方法是使用捕获组。像这样：

```
replace(/(hello)/, "$1 byebye"); 
```

[MDN 上的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

[演示](http://jsfiddle.net/amaan/xBvj9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:28:51.153

这行得通吗？

```
replace("hello","hello byebye"); 
```

至于在保留原始内容的同时进行替换，RegEx 当然可以获取正确的位置，但我认为 Replace() 是限制你的地方。

# c# - 域对象的 WCF Xml/Json 序列化，究竟是什么被序列化？

> ID：12219981
> 
> 赞同：0
> 
> 时间：2012-08-31T17:27:11.407
> 
> 标签：c#, .net, wcf, serialization

我有一个域类用户，它至少有 20 个属性，它来自另一个库，所以它没有任何合同装饰。当我通过 WCF 服务将其作为 xml 或 json 返回时，它只会带回 3 个属性。我想也许它遗漏了集合和诸如此类的东西，但即使是像名称和电子邮件这样的简单字段也根本没有被返回。

所以我想我的问题是，有人可以解释到底是什么被序列化并通过服务返回吗？所有属性都没有用 [DataMember] 之类的东西装饰，但有些属性被序列化并返回，而另一些则没有。据我了解，它应该自动序列化所有公共属性。另一方面，如果有人能指出如何将这些声明添加到现有库以协助序列化的正确方向，我将不胜感激。

更新：我正在查看 wsdl 并找到对 xsd 文件的引用（假设由序列化程序生成）。我注意到我只列出了这 3 个 [映射] 字段。不知道这是什么，或者我是否可以弄乱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:46:09.057

事实证明，这些属性没有序列化的原因是因为它们不是完全公开的，因为它们是只读的。我实际上将属性设置为：

```
public string MyProperty { get; internal set; } 
```

我这样做是因为我确实在我的内部系统类（控制器类型的东西）中使用了对象初始化器，并且不希望允许消费者设置这些属性。我读到你可以将它们设置为受保护的，它会允许它序列化，但这对我的实现不起作用。

这些是 POCO 类，所以我的解决方案（尽管不完全是问题的*答案*）是创建 DTO 类。由于 DTO 中的所有属性都是完全公开的，所以我所做的就是使用来自 POCO 的数据填充这些属性并返回 dto。一切都得到正确序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:49:18.313

看看你的域类，看看它是否继承自另一个类。如果是，则 User 类可能只有您看到的三个属性。

我发现效果很好的是创建一个特殊的服务模型（或视图模型）作为公共数据接口，而不是域模型的直接接口。作为一个好处，您可以更好地控制可能暴露的数据 - 您可以限制意外数据泄漏的风险，并优化通过网络发送的数据。

祝你好运！

# java - Spring服务方法线程安全

> ID：12219986
> 
> 赞同：3
> 
> 时间：2012-08-31T17:27:24.627
> 
> 标签：java, service, concurrency

我有一个 Spring 3 服务方法，我想从中返回一个 PrivateKey/PublicKey keyPair - 将 KeyPairGenerator 作为服务中的实例级变量以避免调用 KeyPairGenerator.getInstance(algo) 并在其中初始化它是否是线程安全的方法调用还是应该将 KeyPairGenerator 保留在服务方法的本地，并为每个方法调用调用 .getInstance(algo) 和 .initialize(...) ，即：

```
public KeyPair getKeyPair() throws ... {
    KeyPairGenerator keyGenerator = KeyPairGenerator.getInstance(algo);
    keyGenerator.initialize(1024);
    return (keyGenerator.genKeyPair());
} 
```

或者

```
public KeyPair getKeyPair() throws ... {
    // use instance level keyGenerator that has been previously initialized
    return (keyGenerator.genKeyPair());
} 
```

第二种方法是否存在并发问题？第一种方法的性能损失是否显着？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:46:44.907

这个问题实际上与 Spring 无关。我相信你在谈论[`KeyPairGenerator`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyPairGenerator.html)。JavaDoc 没有说任何关于线程安全的内容，但[源代码中](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/security/KeyPairGenerator.java#520)有一条注释：

```
//  * although not specified, KeyPairGenerators could be thread safe,
//    so we make sure we do not interfere with that 
```

好吧，“*可能是线程安全*的”对我来说绝对没有任何意义，尤其是在查看[*对 keypairgenerator 的访问可能不是线程安全*](https://bugs.launchpad.net/eucalyptus/+bug/431931)问题之后：

> 密钥对生成器的并发属性是特定于 spi 的，可能不是线程安全的。这可能会导致挂起前端的故障。

所以我的建议是在每次调用时创建新实例，或者[将它们汇集起来](http://commons.apache.org/pool/)。

# object - Ext JS 4：基于条件的自定义对象属性值

> ID：12219991
> 
> 赞同：2
> 
> 时间：2012-08-31T17:27:57.380
> 
> 标签：object, extjs, properties, conditional-statements

我正在尝试为我的 Ext 对象创建自定义属性值（基于函数的条件），而不是仅指定一个值。

**示例 1：**

***旧代码（工作）***

```
 this.buttons = [
            {
                text: 'Save', 
```

![在此处输入图像描述](../Images/fd2cb4ab1da8143521b73d185fea447e.png)

***新代码（不工作）***

```
 this.buttons = [
            {
                text: function() {
                    return 'Save X';
                }, 
```

![在此处输入图像描述](../Images/adade77cf94715581f55c00cc30a58ea.png)

**示例 2：**

***旧代码（工作）***

```
 }, {
                        width: 270,
                        labelAlign: 'right',
                        xtype: 'textfield',
                        name: 'user_id', 
                        fieldLabel: 'User ID',
                        hidden: true
                    }] 
```

***新代码（不工作）***

```
 }, {
                        width: 270,
                        labelAlign: 'right',
                        xtype: 'textfield',
                        name: 'user_id', 
                        fieldLabel: 'User ID',
                        hidden: function() { return true; }
                    }] 
```

**示例 3：**

完全基于条件忽略整个*文本字段对象（惰性实例）：*

```
 }, {
                        width: 270,
                        labelAlign: 'right',
                        xtype: 'textfield',
                        name: 'employee_number', 
                        fieldLabel: 'Employee Number'
                    }] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:00:38.803

你根本不能这样做。无法用函数替换类型。在您的情况下，您将函数引用分配给预期为布尔值的变量，与字符串相同。

**解决方案 A。**

您应该考虑为自己编写一个现场工厂。在该工厂中，您可以在分配配置之前执行任何功能。（与 B 类似，但可用于减少函数调用）

**解决方案 B。**

使用函数引用本身。然后这个应该被执行。（免除类扩展的要求，并且超过了可重用）

```
 // The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    data : [
        {"abbr":"AL", "name":"Alabama"},
        {"abbr":"AK", "name":"Alaska"},
        {"abbr":"AZ", "name":"Arizona"}
        //...
    ]
});
Ext.namespace('my.util.helper');
my.util.helper.decideHide = function() { return true; }

// Create the combo box, attached to the states data store
Ext.create('Ext.container.Container', {
    renderTo: Ext.getBody(),
    items: [{
       xtype: 'combo',
       fieldLabel: 'Choose State',
       store: states,
       queryMode: 'local',
       displayField: 'name',
       valueField: 'abbr',
       test: my.util.helper.decideHide(),
       listeners: {
           afterrender: function(n) {
               alert(n.test);
           }
        }
    }]
}); 
```

**解决方案 C。**

我在这种情况下使用最多的解决方案是简化 if else 语句

```
// ... // more code
{
    text: myCondition ? 'Text A' : 'Text B',
    // more code
}
// ... // more code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:32:44.933

是的，这是行不通的，一些 Ext 配置采用了一个将被评估的函数，但大多数都没有。而不是创建匿名函数而不是调用它们，我会做这样的事情：

```
Ext.define('UserPanel', {
    extend : 'Ext.panel.Panel',
    initComponent : function() {

        this.items = [{
            xtype : 'button',
            text : this._getSaveButtonText()
        }, {
            width : 270,
            labelAlign : 'right',
            xtype : 'textfield',
            name : 'user_id',
            fieldLabel : 'User ID',
            hidden : this._isUserIdHidden()
        }]
        this.callParent();
    },

    _getSaveButtonText : function() {
        return 'Save';
    },

    _isUserIdHidden : function() {
        return true;
    }
}); 
```

# ruby-on-rails - createuser：无法连接到 Rails 应用程序中的数据库 postgres？

> ID：12219995
> 
> 赞同：1
> 
> 时间：2012-08-31T17:28:07.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我是使用 Postgres 的新手，我目前正在尝试创建一个新用户。但是，当它要求输入密码时，我输入了我的系统密码，并且身份验证不断失败。

```
Alex$ createuser user1
Shall the new role be a superuser? (y/n) n
Shall the new role be allowed to create databases? (y/n) n
Shall the new role be allowed to create more new roles? (y/n) n
WARNING: password file "/Users/Alex/.pgpass" has group or world access; permissions should be u=rw (0600) or less
Password:
createuser: could not connect to database postgres: FATAL:  password authentication failed for user "Alex" 
```

我知道我输入的系统密码正确。我应该使用另一个密码，还是这与世界访问错误有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:35:26.007

首先将 .pgpass 的权限修复为 600 并重试（请参阅此处[http://www.postgresql.org/docs/9.1/static/libpq-pgpass.html](http://www.postgresql.org/docs/9.1/static/libpq-pgpass.html)）您是否应该将用户 Alex 连接到数据库？

# cuda - 是否可以从全局或设备函数调用 CUDA CUBLAS 函数

> ID：12219997
> 
> 赞同：2
> 
> 时间：2012-08-31T17:28:26.250
> 
> 标签：cuda, cublas

我正在尝试并行化现有应用程序，我将大部分应用程序并行化并在 GPU 上运行，我在将一个功能迁移到 GPU 时遇到问题

该函数使用了一个函数 dtrsv，它是 blas 库的一部分，见下文。

```
void dtrsv_call_N(double* B, double* A, int* n, int* lda, int* incx) {
  F77_CALL(dtrsv)("L","T","N", n, B, lda, A, incx);
} 
```

我已经能够按照下面调用等效的 cuda/cublas 函数，并且产生的结果等效于 fortran dtrsv 子例程。

```
status = cublasDtrsv(handle,CUBLAS_FILL_MODE_LOWER,CUBLAS_OP_T,CUBLAS_DIAG_NON_UNIT, x, dev_m1, x, dev_m2, c);

if (status != CUBLAS_STATUS_SUCCESS) {
        printf ( "!!!! kernel execution error.\n");
        return EXIT_FAILURE;
    } 
```

我的问题是我需要能够从设备或全局函数调用 cublasDtrsv，如下所示，

```
__global__ void Dtrsv__cm2(cublasHandle_t handle,cublasFillMode_t uplo,cublasOperation_t trans, cublasDiagType_t diag,int n, const double *A, int lda, double *x, int incx){
    cublasDtrsv(handle,uplo,trans,diag, n, A, lda, x, incx);
} 
```

在 cuda 4.0 中，如果我尝试编译以下内容，则会出现以下错误，有谁知道是否有一种方法可以从 a `__device__`or函数调用 cublas`__global__`函数？

> 错误：不允许`function("cublasDtrsv_v2")`从`__device__`/调用主机`__global__` `function("Dtrsv__dev")`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:06:48.770

CUDA Toolkit 5.0 introduced a device linker that can link device object files compiled separately. I believe, CUBLAS functions from CUDA Toolkit 5.0 can now be called from device functions (but I only reviewed the headers, I have no experience using CUBLAS).

# ios - iOS VOIP 应用程序在后台不接受新的套接字连接

> ID：12219998
> 
> 赞同：3
> 
> 时间：2012-08-31T17:28:29.293
> 
> 标签：ios, voip

我正在尝试实现一个 iOS VOIP 应用程序。

我正在使用 GCDAsyncSocket 在端口上侦听连接。我确实在 info.plist 中添加了所需的后台模式，并将 readstream 和 writestream 注册到 kcfNetworkServiceTypeVOIP。

我还添加了 KeepAliveTimeOutHandler 来唤醒应用程序。处理程序块只是将唤醒时间打印到标准输出。

只要应用程序在前台，新连接就会被接受，但当应用程序在后台时，应用程序不会被唤醒，并且当应用程序再次移动到前台时，所有尝试的连接都会发送到套接字。

我搜索了许多解决方案，但无法使其正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T08:00:12.017

我不确定它是否仍然与您相关，但以防其他人阅读此问题。[正如在这个](https://stackoverflow.com/a/9698212/1264176)关于stackoverflow的其他类似问题中所讨论的那样，例如，您只能拥有一个处于 NetworkServiceTypeVOIP 模式的套接字。否则它们都将不起作用，您的应用程序将不会唤醒并且不会接受新连接。

# linq - 当字段需要首先解析时，如何在 linq 查询中进行过滤？

> ID：12219999
> 
> 赞同：2
> 
> 时间：2012-08-31T17:28:31.703
> 
> 标签：linq, parsing, linq-to-sql

我有一个包含多列和一列的数据表，其中存储了一些复杂的文本模式 - 我需要解析该字段以确定特定子字符串是否存在于较大字符串模式中的特定位置，然后是否应将记录过滤为结果。

除了通过使用 String.Split 方法调用、foreach 等编写 C# 解析函数之外，我看不到执行解析的方法。但是如果我尝试像这样解析：

```
var myFilteredTable = _db.MyTable.Where(t => t.Column1 == 'Filter1' 
                                        && ParseIsMyItemInColumn2(t) ); 
```

我收到“没有支持的 SQL 翻译”错误。

我想到的另一个选择是在没有 Parse 的情况下构建初始结果：

```
var myFilteredTable = _db.MyTable.Where(t => t.Column1 == 'Filter1' ); 
```

并遍历 IQueryable 结果集，使用 parse 函数测试每一行，以过滤掉不需要的行，但 IQueryable 没有删除不需要的行的删除函数，也没有添加函数来允许我建立一个新的结果集。

那么当我还需要编写 Parse 函数时，如何在 linq 中进行过滤呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:30:41.953

那么“数据库中的初始过滤器然后在本地完成其余的”很容易：

```
var filtered = _db.MyTable.Where(t => t.Column1 == "Filter1")
                          .AsEnumerable() // Do the rest locally
                          .Where(t => ParseIsMyItemInColumn2(t)); 
```

[`AsEnumerable`](http://msdn.microsoft.com/en-us/library/bb335435.aspx)是一个简单的传递方法，但由于结果类型为`IEnumerable<T>`而不是`IQueryable<T>`，因此后续 LINQ 操作使用 LINQ to Objects 方法`Enumerable`而不是`Queryable`.

显然，如果*很多*项目与第一个过滤器匹配但第二个过滤器失败，那将不会非常有效......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:30:58.283

不幸的是，如果“解析函数”不能转换为 SQL，您将需要提取结果并使用 LINQ to Objects：

```
var myFilteredTable = _db.MyTable.Where(t => t.Column1 == 'Filter1')
                         .AsEnumerable().Where(ParseIsMyItemInColumn2); 
```

请注意，这会将所有结果流式传输到内存中，然后执行您的解析。