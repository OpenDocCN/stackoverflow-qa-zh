# StackOverflow 问答 11187000-11187999

# c++ - 为什么在 wchar_t 上使用 Cstring

> ID：11187002
> 
> 赞同：2
> 
> 时间：2012-06-25T09:51:31.697
> 
> 标签：c++, visual-c++

我有一个代码，其中同时使用了 Cstring 和 wchar_t。我想我可以用 wchar_t 而不是 Cstring 做同样的工作，那么为什么要使用 Cstring。

在 m_szChargeType 和 m_szConfirmedChargeType 中我有 A。起初我的代码是

```
wchar_t m_szChargeType[LEN_CHARGE_TYPE];
wchar_t m_szConfirmedChargeType[LEN_CHARGE_TYPE];
LoadString(GetResourceInstance(),IDS_MS_CI_TYPEA,m_szChargeType,LEN_CHARGE_TYPE);//      fills value A in m_szChargeType
LoadString(GetResourceInstance(),IDS_MS_CI_TYPEA,m_szConfirmedChargeType,LEN_CHARGE_TYPE);        // fills value A in m_szConfirmedChargeType   
CString strSpace(IDS_MS_SPACE); //IDS_MS_SPACE has a space in rc file and IDS_MS_TYPE   have rate in ini file
CString strType(IDS_MS_TYPE);
strSpace += strType;
wsprintf(m_szChargeType, _T("%s%s"), m_szChargeType, strSpace);
wsprintf(m_szConfirmedChargeType, _T("%s%s"), m_szConfirmedChargeType, strSpace); 
```

m_szChargeType 和 m_szConfirmedChargeType 的结果为 A0，但预期为 A Rate

然后我做了

```
wchar_t strSpace[LEN_CHARGE_TYPE];
wchar_t strType[LEN_CHARGE_TYPE];
LoadString(GetResourceInstance(),IDS_MS_SPACE,strSpace,LEN_CHARGE_TYPE);
LoadString(GetResourceInstance(),IDS_MS_TYPE,strType,LEN_CHARGE_TYPE);
wsprintf(m_szChargeType, _T("%s%s%s"), m_szChargeType, strSpace, strType);
wsprintf(m_szConfirmedChargeType, _T("%s%s%s"), m_szConfirmedChargeType, strSpace, strType); 
```

它工作得很好。并且输出与预期的 A RATE 相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:53:20.587

`CString`是一个类，因此它提供了功能。`wchar_t`只是一个基本类型，它代表一个*单一*的宽字符。我假设你在谈论`wchar_t*`.

这*就像*问你为什么要使用`std::string`over `char*`。

# c - 条件编译：如果宏至少存在一次，则编译一次

> ID：11187005
> 
> 赞同：0
> 
> 时间：2012-06-25T09:51:35.800
> 
> 标签：c, macros, c-preprocessor, conditional-compilation

我正在编写一个**C**程序并想编写一个函数，以便如果某个宏*至少使用一次*，则该函数在目标文件中只编译*一次*。

我在想这些方面的东西：

```
#define CERTAIN_MACRO \
    ...some code here... \
    #include "myfunction.h" 
```

（在 myfunction.h 中添加我的功能代码，并使用合适的包含防护以防止多重包含），或

```
#define CERTAIN_MACRO \
    ...some code here... \
    #define USE_MY_FUNCTION

#ifdef USE_MY_FUNCTION
    my function code
#endif 
```

但两者都不起作用，因为宏扩展代码`#define`中`#include`不允许使用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-03T02:16:18.760

让链接器完成它应该做的工作。

将函数放入其自己的源文件中，然后将其构建到库中，例如`liboptional.a`.

当需要创建可执行文件时，请使用该库，例如：

```
gcc -o execfile file1.o file2.o -loptional 
```

在链接器看到 时`-l optional`，它将使用该库中的对象来满足未定义的引用。因此，如果您使用`file1.o`or中的函数`file2.o`，它将被包含在内。

# inno-setup - Inno Script - 如何在默认情况下选中 EULA 页面上的“我接受协议”单选按钮

> ID：11187022
> 
> 赞同：9
> 
> 时间：2012-06-25T09:52:49.933
> 
> 标签：inno-setup

在 Inno Setup 中，我拥有“我接受该协议”和“我不接受该协议”的最终用户许可协议页面。

如何使“我接受”单选按钮默认选中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T16:20:03.323

您可以`LicenseAcceptedRadio`从脚本代码中检查控件：

```
[Code]
procedure InitializeWizard;
begin
  WizardForm.LicenseAcceptedRadio.Checked := True;
end; 
```

# iphone - 有没有可能将pickerview重置为起始位置？

> ID：11187023
> 
> 赞同：0
> 
> 时间：2012-06-25T09:52:51.743
> 
> 标签：iphone, ios5, xcode4.3

我已经把我的pickerview放在`reloadAllComponents`里面`didSelectRow`，但它不能将我的pickerview位置重置为开始位置。用户选择数据后是否有可能将我的pickerview重置为起始位置，因为我使用1个pickerview作为许多按钮的输入。我应该写什么代码以及在哪里写？

我希望你能理解我的英语。谢谢你。

我已经输入了代码，但它仍然无法将我的 pickerView 状态置于起始位置。

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    year = [picker selectedRowInComponent:0];
    month = [picker selectedRowInComponent:1];
    day = [picker selectedRowInComponent:2];
    date = @"";
    if(viewPicker.tag == 1) {
        labelTime.text = [date stringByAppendingFormat:@"%d:%d:%d", year , month, day];
    else {
       ...
    }
    [picker selectRow:0 inComponent:0 animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:58:26.900

`reloadAllComponents`方法只是查询您的数据源，以便与选择器同步数据。如果通过“重置”表示您希望选择器将其当前选择移动到第一行，您可以执行以下操作：

```
// Here we select the first row, in the first component with animation
// Customize it accordingly
[myPicker selectRow:0 inComponent:0 animated:YES]; 
```

虽然要小心。如果您在其中调用此方法，`didSelectRow`则每次用户选择一行时，选择器将自动转到第一行...

# websphere-6.1 - websphere url 上下文错误 (JSPG0036E)

> ID：11187029
> 
> 赞同：0
> 
> 时间：2012-06-25T09:53:21.340
> 
> 标签：websphere-6.1, j-security-check

Websphere 6.1 上的问题 我希望我遗漏了一些明显的东西：我们有一个应用程序可以部署到已配置的 Websphere 环境中。我们试图在不同的平台（Linux 与 Solaris）上模拟这种 WebSphere 配置，但也许我们缺少一些明显的设置。应用程序部署并启动没有错误，但在 url 上登录后`localhost:port/app/index.jsp` （通过 j_spring_security_check）Websphere 重定向到`localhost:port/index.jsp`. 这会产生一个 JSP 处理错误 (HTTPError 404)，代码为 JSPG0036E。

Web 应用程序被包裹在耳朵里，因为这些是这里的标准。这只耳朵在我们的 solaris WAS 6.1 环境中运行良好，但在 linux WAS 上却不行。此外，在开发过程中，我们在 Tomcat 上运行的打包战争没有问题。

我想我在某处错过了上下文根，但在 Websphere 的控制台中找不到它，如果它是 Websphere (6.1.0.33) 错误，我不会感到惊讶，希望我错了或者有解决方法吗？

# jms - HornetQ 中 JMS 主题的确切示例

> ID：11187030
> 
> 赞同：1
> 
> 时间：2012-06-25T09:53:26.487
> 
> 标签：jms, publish-subscribe, hornetq

我阅读了 hornetQ 文档，很困惑。有人可以给出一个在 hornetQ 中创建 JMS 主题的确切示例吗？我的意思是`hornetq-jms.xml`和中的 xml 配置`hornetq-configuration.xml`。假设我们有一个名为的主题和 2 个名为： ,的`top`订阅者。我得到的是我们应该定义两个队列（每个订阅者一个）并将它们绑定到一个实际上是主题名称的地址，但是订阅者如何知道他们应该连接到哪个？（他们只知道主题名称）`sub1``sub2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T16:26:09.300

我认为您对 HornetQ 内部处理主题的方式与 JMS 规范描述主题的方式感到困惑。

让我们从 JMS 规范开始。在这里，您有一个主题，其中 n 个订阅者可以收听消息，这些消息将由客户端发布。在 JMS 中，我们只讨论单数的目的地，例如。*我们将分别**向*主题或队列发送消息。

 *HornetQ 是一个 JMS Provider - 一个实现 JMS 规范的服务器，因此 Java 客户端可以连接到它，并使用 JMS-API。JMS 提供者可能会改变，但在使用另一个 JMS 提供者时代码应该仍然可以工作。

然而，HornetQ 并没有在内部区分目的地（主题或队列），因为它试图成为一个通用的消息中间件。在 HornetQ 中，所有主题或队列都被实现为“地址”和“队列”。当您使用 HornetQ API (CoreAPI) 而不是 JMS-API 时，您必须处理这些事情。您应该阅读[HornetQ 文档](http://docs.jboss.org/hornetq/2.2.2.Final/user-manual/en/html_single/index.html#d0e1478)中的地址部分：

> 在核心中，没有主题的概念，主题是 JMS 唯一的术语。相反，在核心中，我们只处理地址和队列。
> 
> 例如，一个 JMS 主题将由多个队列绑定到的单个地址实现。每个队列代表一个主题的订阅。JMS 队列将被实现为一个队列绑定到的单个地址 - 该队列代表 JMS 队列。

对于如何通过 HornetQ 使用 JMS 主题的示例，我强烈推荐 HornetQ 自带的示例。下载并解压 hornetq 存档后，只需转到`examples/jms/topic`目录并查看 readme.html 即可简要了解如何实现以及如何执行示例 ( `mvn verify`)。*

# plugins - 单个 DLL MEF 中的多个插件

> ID：11187033
> 
> 赞同：0
> 
> 时间：2012-06-25T09:53:39.200
> 
> 标签：plugins, dll, mef

MEF 是否允许在单个 DLL 中托管多个插件，这样我就不必为每个新插件创建一个新的类库？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:36:34.550

您可以在程序集中拥有任意数量的类型，但这些插件是否会发生冲突取决于您如何命名它们和命名它们，以及它们是如何导出的。

# xcode - mpmovieplayercontroller 一启动就消失

> ID：11187035
> 
> 赞同：0
> 
> 时间：2012-06-25T09:53:43.893
> 
> 标签：xcode, mpmovieplayercontroller

当我单击“播放电影”时，mpmovieplayer 会显示半秒钟，我看到它正在加载电影并且控件在那里，但随后它返回主屏幕而不播放视频。

我该如何解决？

编辑：我已经更改了代码，现在播放器保持运行但卡在加载中，它不播放电影。

问题是：不准备播放电影吗？或者不在后台停止电影然后重新启动它？

```
 #import "ViewController.h"

@implementation ViewController
@synthesize moviePlayer;

-(IBAction)grabVid:(id)sender;
{
    [self presentModalViewController:imagePicker animated:YES];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [imagePicker setDelegate:self];

    imagePicker = [[UIImagePickerController alloc] init]; 

    imagePicker.mediaTypes =
    [UIImagePickerController availableMediaTypesForSourceType:
     imagePicker.sourceType];
    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    [self presentModalViewController:imagePicker animated:YES];

    {
        [imagePicker dismissModalViewControllerAnimated:YES];
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    //[imagePicker dismissModalViewControllerAnimated:YES];
}

-(IBAction)playMovie:(id)sender  
{  
    NSURL *url = [info objectForKey:UIImagePickerControllerMediaURL];
    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc] initWithContentURL:url];

    [self.view addSubview:playercontroller.moviePlayer.view];
    [playercontroller.moviePlayer setFullscreen:YES animated:YES];
    playercontroller.moviePlayer.shouldAutoplay = NO;
    [self presentMoviePlayerViewControllerAnimated:playercontroller];
    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [playercontroller.moviePlayer play];  

    [[NSNotificationCenter defaultCenter] addObserver:self  
                                             selector:@selector(moviePlaybackComplete:)  
                                                 name:MPMoviePlayerPlaybackDidFinishNotification  
                                               object:playercontroller.moviePlayer];  

    }  

- (void)moviePlaybackComplete:(NSNotification *)notification  
{  
    MPMoviePlayerController *moviePlayerController = [notification object];  
    [[NSNotificationCenter defaultCenter] removeObserver:self  
                                                    name:MPMoviePlayerPlaybackDidFinishNotification  
                                                  object:moviePlayerController];  

    [moviePlayerController.view removeFromSuperview];  
    //[playercontroller.moviePlayer release];  
}  

- (void)dealloc {  
    //[super dealloc];  
}  

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:58:03.737

```
-(IBAction) playVideo

{
    NSURL *url = [info objectForKey:UIImagePickerControllerMediaURL];
    MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    moviePlayer.initialPlaybackTime = 0;

    [self presentMoviePlayerViewControllerAnimated:playercontroller];
    playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
    [playercontroller.moviePlayer play];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    moviePlayer.controlStyle = MPMovieControlStyleDefault;
    moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer setFullscreen:YES animated:YES];

  // playercontroller = nil;

} 
```

# android - AChartEngine - 在 USB 通信期间刷新图表

> ID：11187036
> 
> 赞同：0
> 
> 时间：2012-06-25T09:53:49.167
> 
> 标签：android, achartengine

我在计时器中刷新图表。当函数刷新图表时，只有一切正常，但是当我将代码添加到 USB 通信时，图表仅在函数完成时更新（一次）。

```
timer.scheduleAtFixedRate(new TimerTask() {
public void run() {
    for (int i = 0; i < data[0].length; i++) {
        data[0][i] = getRandom(0, 20);
        data[1][i] = (i + 1);
    }

    lineGraph.refreshChart(data[0], data[1]);
    if (complete[0]) {
        timer.cancel();
        timer.purge();
        return;
    }

    }
}, 100, 100);

// without the following two lines works fine
usbPacketTransfer.send();
recivedData = usbPacketTransfer.recive(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:42:19.867

您需要将所有网络操作移出主 UI 线程。我建议使用`AsyncTask`or`Thread`来执行此操作。您的网络命令正在阻止其他一切运行，这就是为什么它只在最后更新。

# matlab - 在 MATLAB 中将 xlabel 位置居中

> ID：11187037
> 
> 赞同：1
> 
> 时间：2012-06-25T09:53:53.907
> 
> 标签：matlab, figure

如何将 xlabel 的位置居中，使其位于图形的中间？使用 LaTeX 时，我希望 xlabel 的中心与标题的中心对齐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:10:12.937

该`xlabel`函数创建一个`string`图形对象并将其设置为`XLabel`当前坐标区对象的属性。`string`您可以在调用时为此对象定义属性`xlabel`。`Position`您可以通过调整默认设置为 [0 0]的属性来调整字符串对象的中心位置。

首先你得到现在的位置（在绘制和使用之后`xlabel`）：

```
vec_pos = get(get(gca, 'XLabel'), 'Position'); 
```

然后更新位置（例如用 -0.5 调整 x）：

```
set(get(gca, 'XLabel'), 'Position', vec_pos + [-0.5 0 0]); 
```

就文档而言，默认情况下，这是在 x 轴的数据单元中完成的。在我看来，标签“时间（秒）”位于 0.13 秒（根据您的图）。让我们将它向左调整 0.008 秒到 0.122 秒（“猜测”）。

强制它为“数据”单位并调整为 0.008：

```
str_defaultUnits = get(get(gca, 'XLabel'), 'Units'); % copy this
set(get(gca, 'XLabel'), 'Units', 'data'); % change it
set(get(gca, 'XLabel'), 'Position', vec_pos + [-0.008 0 0]); % adjust position
set(get(gca, 'XLabel'), 'Units', str_defaultUnits); % set it back as it was 
```

**另一方面**：您试图实现的目标有些错误我会说:) 轴的标签不应强制与整个图形标题对齐。为什么要这样做？图形标题以整个图形为中心，而不仅仅是绘图区域。我担心它最终会看起来很奇怪。当然是你的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:51:06.303

您要执行的操作的细节取决于您的 matlab 打印设置和乳胶选项（例如标题 raggedright 或居中），但这至少应该将您的 xlabel 放在图形的中心，而不是轴的中心.

```
fh=figure;
ah=axes;
plot(ah,[2.0:10],[2:10])
xlh=xlabel(ah,'my xlabel');
drawnow;
xlh_pos=get(xlh,'position');
ah_pos=get(ah,'position');
x_lim=xlim;

xlh_pos_fig=0.5;%put it in the middle
xlh_pos(1)=(xlh_pos_fig - ah_pos(1))*(x_lim(2)-x_lim(1))/ah_pos(3)+x_lim(1);
set(xlh,'position',xlh_pos); 
```

# android - SOAP 身份验证 Android

> ID：11187038
> 
> 赞同：2
> 
> 时间：2012-06-25T09:53:58.300
> 
> 标签：android, soap

我正在尝试使用此服务，但这给了我 html 响应请在我错的地方帮助我任何帮助真的很有帮助

```
HttpURLConnection connection;
    java.net.URL u;
    u = new java.net.URL("http://sdservices.iyogi.net/iyogi/webservicesnonrestv5/toolbarwebservices.asmx");

   URLConnection uc = u.openConnection();
   connection = (HttpURLConnection) uc;

   connection.setDoOutput(true);
   connection.setDoInput(true);
   connection.setRequestProperty("SOAPAction", "http://sdservices.iyogi.net/SD/ToolbarService.svc/GetProductSettings?SubscriptionCode=W101982488");
   connection.setRequestMethod("GET");
   connection.setRequestProperty("Content-type", "text/xml; charset=utf-8"); 
```

InputStream is = connection.getInputStream(); inputStreamToString(is);

给出 HTML 作为响应:(

# eclipse - 如何在不重启 Tomcat 的情况下持续部署 JSF 项目中的更改？

> ID：11187040
> 
> 赞同：1
> 
> 时间：2012-06-25T09:53:59.433
> 
> 标签：eclipse, tomcat, jsf, deployment, facelets

我在 Eclipse 中有一个 JSF 项目。现在每次更改`.xhtml`文件时，我都必须停止 Tomcat 服务器，然后再次启动 Tomcat 服务器。有没有其他方法可以让我在每次进行更改时无需重新启动服务器就可以持续构建和测试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:46:35.197

当您需要开发 JSF 项目时，您至少需要进行两项更改：

1.  告诉 Eclipse 通过更改 Tomcat 设置自动发布更改，如下所示（双击*服务器*视图中的 Tomcat 服务器条目以获取此屏幕）：

    ![在此处输入图像描述](../Images/8161206da2940e7e141d5315f3e98cda.png)

    它即默认为“从不自动发布”。

    * * *

2.  通过添加以下内容来告诉 JSF webapp 当前处于开发模式`web.xml`：

    ```
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param> 
    ```

    这将改变一些内部工作以使开发人员更容易，例如禁用 Facelet 缓存和重新加载资源。在构建生产版本时不要忘记删除它，因为这会影响性能。此设置也可以由 JNDI 设置。

    * * *

另一种方法是从准系统 Tomcat 服务器迁移到普通 JEE 服务器，例如 WildFly、Payara、Liberty 等。对于它们，上述 Eclipse 设置不再需要，您甚至可以实时编辑 bean 方法（在 Tomcat 上，您' 仍然需要为他们重新启动整个服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:39:11.537

**facelets.REFRESH_PERIOD：** –
间隔编译器检查页面更改 – 较低的值在开发过程中有用

```
<context-param>  
<param-name>facelets.REFRESH_PERIOD</param-name>  
<param-value>2</param-value>  
</context-param>

      (or)

<context-param>  
<param-name>facelets.REFRESH_PERIOD</param-name>  
<param-value>1</param-value>  
</context-param> 
```

*   您可以设置以上任何一项。
    在某一方面的变化`web.xml`
*   `-1`如果您不想影响所做的更改，请设置为。（默认值）
*   检查[这个链接](http://hirenscafe.blogspot.in/2010/03/facelet-performance-webapp-performance.html)。

**编辑：**正如*@BalusC*所说，以上内容适用于、`jsf 1.x`更改`jsf 2.X`发布设置和`javax.faces.PROJECT_STAGE`.`web.xml`

# eclipse - 运行 GWT 项目后的 ProcessReply('result','0') 消息

> ID：11187042
> 
> 赞同：0
> 
> 时间：2012-06-25T09:54:04.487
> 
> 标签：eclipse, gwt

我是 Google Web Toolkit 技术的新手。我下载了eclipse插件并创建了第一个项目。在 Eclipse 中运行项目后，我得到应该在浏览器中复制的 URL，但是当我这样做时，我在空白 html 页面上收到“processReply（'result'，'0'）”消息。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:16:00.277

您可以尝试通过运行配置将“-bindAddress 0.0.0.0”添加到您的项目参数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:44:42.730

只需将默认端口 8888 更改为 8889 即可为我解决此问题。调试配置 > 参数 > 程序参数

# .net - 为什么在尝试使用 Marshal.PtrToStructure 将字节数组转换为类实例时出现访问冲突？

> ID：11187044
> 
> 赞同：4
> 
> 时间：2012-06-25T09:54:09.320
> 
> 标签：.net, byte, structure, marshalling

在 C++ 中，我有这个：

```
struct BasePacketProto
{
    unsigned short PACKET_OPCODE;
    unsigned short PACKET_MAGIC_NUMBER;
    unsigned short PACKET_REMAIN_DATA_LENGTH;
};

struct CM_Request_AcceptAccount : BasePacketProto
{
    unsigned char ACCOUNT_LOGIN[16];
    unsigned char ACCOUNT_PASSWORD[16];
};

static void SendPacket()
{
    CM_Request_AcceptAccount packet;
    packet.PACKET_OPCODE = opCM_Request_AcceptAccount;
    packet.PACKET_MAGIC_NUMBER = 123;
    packet.PACKET_REMAIN_DATA_LENGTH = sizeof(CM_Request_AcceptAccount) -
                                       sizeof(BasePacketProto);
    memcpy(packet.ACCOUNT_LOGIN, "asd", sizeof("asd") * sizeof(char));
    memcpy(packet.ACCOUNT_PASSWORD, "asd_pass", sizeof("asd_pass") * sizeof(char));

    //Send the packet to the server.
    int lLength = send(lhSocket, (const char*)&packet, sizeof(CM_Request_AcceptAccount), 0);
} 
```

在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)中，这是：

```
[StructLayout(LayoutKind.Sequential)]
class BasePacketProto
{
    public System.UInt16 PACKET_OPCODE;
    public System.UInt16 PACKET_MAGIC_NUMBER;
    public System.UInt16 PACKET_REMAIN_DATA_LENGTH;
}

[StructLayout(LayoutKind.Sequential)]
class CM_Request_AcceptAccount : BasePacketProto
{
    public byte[] ACCOUNT_LOGIN = new byte[16];
    public byte[] ACCOUNT_PASSWORD = new byte[16];
} 
```

拆分数据包的类：

```
public class PacketProcessor
{
    static List<byte> raw_packet = new List<byte>();
    static int PACKET_HEADER_SIZE = Marshal.SizeOf(typeof(BasePacketProto));

    static public void ProcessPacketBytes(byte[] bytes, int size)
    {
        for (int i = 0; i < size; i++)
            raw_packet.Add(bytes[i]); //Adding bytes to own storage

        if (raw_packet.Count < PACKET_HEADER_SIZE) //If we don't have enough bytes
                                                   //to build base packet, we will
                                                   //return and wait for more.
            return;

        //This packet building works fine!
        BasePacketProto bpp =
            ConvertBytesTo<BasePacketProto>(raw_packet.GetRange(
                0, PACKET_HEADER_SIZE).ToArray());

        if (raw_packet.Count >= (PACKET_HEADER_SIZE +
                                 bpp.PACKET_REMAIN_DATA_LENGTH)) //If we have enough
                                           bytes in storage to restore child packet.
        {
            switch ((ClientPacketOpcodes)bpp.PACKET_OPCODE)
            {
                case ClientPacketOpcodes.opCM_Request_AcceptAccount:
                    //But this one fails
                    bpp = ConvertBytesTo<CM_Request_AcceptAccount>(raw_packet.GetRange(
                        0, PACKET_HEADER_SIZE + bpp.PACKET_REMAIN_DATA_LENGTH).ToArray());

                    PacketHandler.Handle_opCM_Request_AcceptAccount((CM_Request_AcceptAccount)bpp);
                    break;

                default:
                    break;
            }

            raw_packet.RemoveRange(0, PACKET_HEADER_SIZE + bpp.PACKET_REMAIN_DATA_LENGTH);
        }
    }

    static T ConvertBytesTo<T>(byte[] data)
    {
        unsafe
        {
            fixed(byte *ptr = data)
            {
                //I am getting an access violation here when trying to
                //build child packet :(
                return (T)Marshal.PtrToStructure(new IntPtr(ptr), typeof(T));
            }
        }
    }
} 
```

在接收线程的某处：

```
while (clientStream.CanRead)
{
    byte[] temp_buff = new byte[1024];
    int received = 0;

    while ((received = clientStream.Read(temp_buff, 0, 1024)) > 0) //Here we receive 38 bytes
    {
        //Passing it to the packet splitter.
        PacketProcessor.ProcessPacketBytes(temp_buff, received);
    }
} 
```

客户端向服务器发送数据包时的结果：

> 未处理 System.AccessViolationException
> 尝试读取或写入受保护的内存。很可能它指出其他内存已损坏。

为什么无法将 38 字节转换为 CM_Request_AcceptAccount？我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:43:12.027

当您声明一个结构时

```
struct CM_Request_AcceptAccount : BasePacketProto
{
    unsigned char ACCOUNT_LOGIN[16];
    unsigned char ACCOUNT_PASSWORD[16];
}; 
```

在 C++ 中，该数组是“内联”且具有“固定”长度的，或者换句话说，每个为结构的“大小”贡献 16 个字节。

但是在 C# 中，您将重新声明相同的结构：

```
[StructLayout(LayoutKind.Sequential)]
class CM_Request_AcceptAccount : BasePacketProto
{
    public byte[] ACCOUNT_LOGIN = new byte[16];
    public byte[] ACCOUNT_PASSWORD = new byte[16];
} 
```

在这里，您没有提供前 16 个字节属于`ACCOUNT_LOGIN`数组和接下来的 16个字节的信息`ACCOUNT_PASSWORD`。

行 byte[] ACCOUNT_LOGIN = new byte[16]

没有告诉编组者任何事情。当在代码中创建实例时，它只会导致[CLR](http://en.wikipedia.org/wiki/Common_Language_Runtime)在堆上分配一个 16 字节数组。`CM_Request_AcceptAccount`

为了正确编组结构，请将 C# 声明更改为：

```
[StructLayout(LayoutKind.Sequential)]
class CM_Request_AcceptAccount : BasePacketProto
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=16)]
    public byte[] ACCOUNT_LOGIN;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=16)]
    public byte[] ACCOUNT_PASSWORD;
} 
```

附加信息：由于您的 char 数组旨在保存 C 风格的字符串，您也可以使用

```
[MarshalAs(UnmanagedType.ByValTStr, SizeConst=16)]
public string ACCOUNT_LOGIN; 
```

这里要记住的一点是，编组器将期望在您在 C++ 代码中设置的 16 个字符中出现空终止字符。

# c# - ICommand 方法执行参数值

> ID：11187052
> 
> 赞同：1
> 
> 时间：2012-06-25T09:54:34.580
> 
> 标签：c#, parameters, execute, icommand

我尝试从 wpf 中理解 ICommand。

在我的 Event 类中，我实现了 ICommand 及其方法。

一种方法是执行：

```
public void Execute(object parameter)
{
    //Do something
} 
```

现在是我的问题：什么值包含参数`parameter`from `Execute`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:02:23.110

该值取决于您*传递*给命令的值。

像一个片段：

```
Command="{Binding CalculateCommand}" CommandParameter="LCM"/> 
```

看这里：[带有参数传递的命令绑定以](http://zamjad.wordpress.com/2010/01/19/command-binding-with-parameter-passing/)获取更多详细信息。

# c++ - 多线程与单线程快速排序花费相同的时间

> ID：11187056
> 
> 赞同：0
> 
> 时间：2012-06-25T09:54:52.050
> 
> 标签：c++, multithreading, performance, pthreads

我正在使用 linux，但多线程和单线程都需要 340 毫秒。有人可以告诉我我在做什么有什么问题吗？

这是我的代码

```
#include<time.h>
#include<fstream>
#define SIZE_OF_ARRAY 1000000
using namespace std;

struct parameter
{
        int *data;
        int left;
        int right;
};
void readData(int *data)
{
        fstream iFile("Data.txt");
        for(int i = 0; i < SIZE_OF_ARRAY; i++)
                iFile>>data[i];
}

int threadCount = 4;

int Partition(int *data, int left, int right)
{
        int i = left, j = right, temp;
        int pivot = data[(left + right) / 2];
        while(i <= j)
        {
                while(data[i] < pivot)
                        i++;
                while(data[j] > pivot)
                        j--;
                if(i <= j)
                {
                        temp = data[i];
                        data[i] = data[j];
                        data[j] = temp;
                        i++;
                        j--;
                }
        }
        return i;
}

void QuickSort(int *data, int left, int right)
{
        int index = Partition(data, left, right);
        if(left < index - 1)
                QuickSort(data, left, index - 1);
        if(index < right)
                QuickSort(data, index + 1, right);
}

//Multi threading code starts from here
void *Sort(void *param)
{
        parameter *param1 = (parameter *)param;
        QuickSort(param1->data, param1->left, param1->right);
        pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
        clock_t start, diff;
        int *data = new int[SIZE_OF_ARRAY];
        pthread_t threadID, threadID1;
        pthread_attr_t attr;
        pthread_attr_init(&attr);
        pthread_attr_setdetachstate(&attr, PTHREAD_CREATE_JOINABLE);
        pthread_attr_setscope(&attr, PTHREAD_SCOPE_SYSTEM);
        parameter param, param1;
        readData(data);
        start = clock();
        int index = Partition(data, 0, SIZE_OF_ARRAY - 1);
        if(0 < index - 1)
        {
                param.data = data;
                param.left = 0;
                param.right = index - 1;
                pthread_create(&threadID, NULL, Sort, (void *)&param);
        }
        if(index < SIZE_OF_ARRAY - 1)
        {
                param1.data = data;
                param1.left = index + 1;
                param1.right = SIZE_OF_ARRAY;
                pthread_create(&threadID1, NULL, Sort, (void *)&param1);
        }
        pthread_attr_destroy(&attr);
        pthread_join(threadID, NULL);
        pthread_join(threadID1, NULL);
        diff = clock() - start;
        cout<<"Sorting Time = "<<diff * 1000 / CLOCKS_PER_SEC<<"\n";
        delete []data;
        return 0;
}
//Multithreading Ends here

Single thread main function
int main(int argc, char *argv[])
{
        clock_t start, diff;
        int *data = new int[SIZE_OF_ARRAY];
        readData(data);
        start = clock();
        QuickSort(data, 0, SIZE_OF_ARRAY - 1);
        diff = clock() - start;
        cout<<"Sorting Time = "<<diff * 1000 / CLOCKS_PER_SEC<<"\n";
        delete []data;
        return 0;
}
//Single thread code ends here
some of functions single thread and multi thread use same 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:36:41.097

`clock`返回总 CPU 时间，而不是 wall 时间。

如果您有 2 个 CPU 和 2 个线程，那么在两个线程同时运行一秒钟后，`clock`将返回 2 秒的 CPU 时间（每个线程的 CPU 时间的总和）。

所以结果完全在意料之中。不管你有多少 CPU，所有 CPU 的总运行时间都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:23:04.503

请注意，您从主线程调用一次 Partition ...

该代码在同一个内存块上工作，当另一个 CPU 访问同一个内存块时，它会阻止 CPU 工作。除非您的数据真的很大，否则您可能会遇到很多此类点击。

最后，如果您的算法在使用一个线程运行时以内存速度运行，那么添加更多线程也无济于事。不久前我用图像数据进行了此类测试，并且拥有多个线程会降低总速度，因为该进程非常占用内存，以至于两个线程都在争夺内存……结果比根本没有线程还要糟糕。

今天真正快速的计算机真正快速运行的原因是每台计算机运行一个非常密集的进程，而不是在一台计算机上运行大量线程（或进程）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T12:56:21.047

构建一个带有 24 个线程的生产者-消费者队列的线程池。将您的数据分成两部分并向池发出合并排序任务对象，合并排序对象应向队列发出进一步的合并排序对并等待它们完成的信号，依此类推，直到合并排序对象发现它具有 [L1 缓存-大小数据]。然后该对象对其数据进行快速排序并向其父任务发出完成信号。

如果这在 24 核上不是很快，我将停止发布有关线程的帖子。

..它将并行处理多种排序。

..并且池可用于其他任务。

..并且没有破坏性能、产生死锁的join()、同步()（如果你除了PC队列，它只锁定足够长的时间来推送对象引用），没有线程创建开销和没有狡猾的线程停止/终止/销毁代码。就像理发师一样，没有等待——只要一个线程完成了一项任务，它就可以获得另一个任务。

没有线程微管理，没有调优，（你现在可以创建 64 个线程，为下一代盒子做好准备）。您可以使线程数可调 - 只需在运行时添加更多线程，或者通过排队毒丸来删除一些线程。

您根本不需要对线程的引用 - 只需将它们设置为关闭，（将队列作为参数传递）。

# javascript - 初始化 jQuery.load 的元素

> ID：11187057
> 
> 赞同：3
> 
> 时间：2012-06-25T09:54:53.303
> 
> 标签：javascript, jquery

我正在使用 AJAX 加载我的网页的一部分，特别是`jQuery.load()`. 有了这个通常的 jQuery 模式

```
$('.classname').click(...) // Handler
// or, working with bootstrap
$("a[rel=tooltip]").tooltip() // Function 
```

或类似的东西显然不再起作用，因为它们仅在页面加载时才被调用。我意识到第一个示例有 jQuery.on，但是我将如何实现第二个示例？

是否有一种简单的（内置）方法也可以将这些应用于`jQuery.load`ed 的东西，还是我必须自己解决它？似乎是很多人应该遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:57:36.240

你必须自己解决它；但是您可以通过调用`$("a[rel=tooltip]").tooltip()`以下回调轻松地做到这一点`load()`：

```
 $('#blah').load('/somewhere.html', function () {
     $('#blah').find('a[rel="tooltip"]').tooltip();
 }); 
```

请务必将`tooltip()`调用限制为仅新加载的元素，否则您最终会为每个元素多次初始化工具提示（这*可能会*导致奇怪的行为）。

* * *

为避免重复代码，您只需要定义一个辅助函数；

```
function initTooltip(root) {
    return $(root || document).find('a[rel="tooltip"]').tooltip();
} 
```

这允许您初始化`tooltip`. 该参数是可选的，并且允许您将初始化限制为仅提供的元素的后代，例如：

```
jQuery(document).ready(function ($) {
    initTooltip(); // equivilant to initTooltip(document);

    $('#blah').load('/somewhere.html', function () {
        initTooltip('#blah');
    });
}); 
```

# php - 带有 3 个下拉菜单的表单

> ID：11187061
> 
> 赞同：0
> 
> 时间：2012-06-25T09:55:25.207
> 
> 标签：php, javascript, html, opencart

我有一个包含三个不同下拉菜单的表单，它看起来像这样：

```
 <FORM METHOD="LINK" ACTION="/search.php" method="get">
  <select style="width:55px;" name="filter_name">
  <option> </option>
  <option>R13</option>
  <option>R14</option>
  <option>R15</option>
  <option>R16</option>
  <option>R17</option>
</select></td></tr>
  <tr><td width="40%">Plotis:</td><td colspan="2"><select style="width:55px;" name="">
  <option> </option>
  <option>165</option>
  <option>175</option>
  <option>185</option>
  <option>195</option>
  <option>205</option>
  <option>215</option>
  <option>225</option>
</select></td></tr>
  <tr><td width="40%">Auk&#353;tis:</td><td colspan="2"><select style="width:55px;" name="">
  <option> </option>
  <option>75</option>
  <option>70</option>
  <option>65</option>
  <option>60</option>
  <option>55</option>
  <option>50</option>
  <option>45</option>
</select></td></tr>
  <tr><td colspan="2" align="center">
<INPUT style="width:80px; height:25px; font-size:14px; font-weight:600; cursor:pointer;" TYPE="Submit" VALUE="Ie&#353;koti">
</FORM> 
```

基本上，我需要将所有 3 个选项发送到下一页但加入一个变量。例如：如果我选择

```
<option>165</option>+<option>70</option>+<option>R13</option> 
```

它应该像这样发送到 index.php：`filter_name=165/70/R13`

还有，如何将所有这些发送到 index.php，而不是只发送到

```
index.php?route=product/search&FILTER_NAME 
```

更改`ACTION="/index.php"`为`ACTION="/index.php?route=product/search"`不起作用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:02:01.213

你可以试试这样的。但是，您的 HTML 中有几个错误需要检查。您的表单中有一个嵌套表。

```
<?php
if (!isset($_POST['send'])) {
?>
<form method="post" action="">
    <select style="width:55px;" name="select_one">
        <option> </option>
        <option value="R13">R13</option>
        <option value="R14">R14</option>
        <option value="R15">R15</option>
        <option value="R16">R16</option>
        <option value="R17">R17</option>
    </select>

    <select style="width:55px;" name="select_two">
        <option></option>
        <option value="165">165</option>
        <option value="175">175</option>
        <option value="185">185</option>
        <option value="195">195</option>
        <option value="205">205</option>
        <option value="215">215</option>
        <option value="225">225</option>
    </select>

    <select style="width:55px;" name="select_three">
        <option></option>
        <option value="75">75</option>
        <option value="70">70</option>
        <option value="65">65</option>
        <option value="60">60</option>
        <option value="55">55</option>
        <option value="50">50</option>
        <option value="45">45</option>
    </select>

    <input style="width:80px; height:25px; font-size:14px; font-weight:600; cursor:pointer;" type="submit" value="send" value="Ie&#353;koti" />
</form>
<?php
}
else {
    header('Location: index.php?route=product/search&filter_name='.$_POST['select_two'].'/'.$_POST['select_three'].'/'.$_POST['select_one']);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:05:59.077

问题可能出在无效标记中。您正在使用表格布局，并且表格在单元格之间拆分。这是无效的，因此浏览器可能会以意想不到的方式呈现您的布局。

你可以期待这个：

```
<table>
<tr>
<td>
    <form>
        <input>
</td>
<td>
        <input>
    </form>
</td>
</tr>
<table> 
```

但是浏览器可以将您的标记呈现为这样（2 种形式）：

```
<table>
<tr>
<td>
    <form>
        <input>
    </form>
</td>
<td>
    <form>
        <input>
    </form>
</td>
</tr>
<table> 
```

因此，当您提交表单时，并非所有数据都已发送，因为仅提交了第一个表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:06:41.763

将 php 中的 3 个过滤器选项加入到一个变量中。

```
$options = $_POST['f1'] . '/' . $_POST['f2'] . '/' . $_POST['f3']; 
```

IMO 将不会那么混乱。

# javascript - 黑莓 onChange 事件触发问题

> ID：11187064
> 
> 赞同：1
> 
> 时间：2012-06-25T09:55:36.340
> 
> 标签：javascript, forms, dom-events, blackberry, blackberry-webworks

```
<label for="frmAllegation-TimeReported">Reported Time</label>
<input type="time" name="Reported Time" id="frmAllegation-TimeReported"     onchange="changeSave(this);" /><br>

<label for="frmAllegation-IncinOccDate">Date Started</label>
<input type="date" name="Reporting Date" id="frmAllegation-IncinOccDate"  onchange="changeSave(this);" /><br>

<label for="frmAllegation-IncinOccText">Date Text</label> 
<input type="text" name="Reporting Text" id="frmAllegation-IncinOccText" onchange="changeSave(this);" /><br>

function changeSave(frmInput)
{
alert("Changed");
} 
```

当使用**时间；日期；选择；** 不调用**onchange 。**这很奇怪，因为如果你输入它，它就会被调用，但是当黑莓本机日期、时间或选项列表弹出时，它会将其打印到表单中，但不会调用`onChange`......

所以基本上`onChange`是在其文本时调用，而不是时间、日期、选择...解决方法或解决方案有人吗？

这在 Chrome 上也可以正常工作，所以我认为这不是代码问题......

我能想到的唯一其他工作就是这样做，`onFocusOut`但这不是我的首选......

更多信息在这里：

[导航焦点问题](https://github.com/blackberry/WebWorks/issues/120)

[^^ 官方开发者错误问题](https://www.blackberry.com/jira/browse/TABLET-633)

[关于更改错误问题](https://github.com/blackberry/WebWorks/issues/122)

[关于变更问题的论坛帖子](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/HTML5-Javascript-onChange-not-being-called/td-p/1783521)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:24:14.607

您可以尝试突变观察者[http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)

# java - 使用 XSLT 和 XSL-FO/FOP 将 XML 文件转换为 PDF

> ID：11187068
> 
> 赞同：0
> 
> 时间：2012-06-25T09:55:52.567
> 
> 标签：java, xml, xsl-fo

我正在尝试使用 XSL-FO 将 XML 文件转换为 PDF 文件，我在此示例中找到了代码：

[http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/examples/embedding/java/embedding/ExampleXML2PDF.java?view=markup](http://svn.apache.org/viewvc/xmlgraphics/fop/trunk/examples/embedding/java/embedding/ExampleXML2PDF.java?view=markup)

但我收到此异常：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xmlgraphics/image/loader/impl/ImageRawPNG
at org.apache.fop.render.pdf.PDFImageHandlerRawPNG.getSupportedImageClass(PDFImageHandlerRawPNG.java:51)
at org.apache.fop.render.ImageHandlerRegistry.addHandler(ImageHandlerRegistry.java:97)
at org.apache.fop.render.ImageHandlerRegistry.discoverHandlers(ImageHandlerRegistry.java:169)
at org.apache.fop.render.ImageHandlerRegistry.<init>(ImageHandlerRegistry.java:64)
at org.apache.fop.apps.FopFactory.<init>(FopFactory.java:168)
at org.apache.fop.apps.FopFactory.newInstance(FopFactory.java:177)
at searchManagement.export.PdfExporter.main(PdfExporter.java:77)
Caused by: java.lang.ClassNotFoundException: org.apache.xmlgraphics.image.loader.impl.ImageRawPNG
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 7 more 
```

你有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:05:02.483

此错误意味着您正在使用的类之一正在尝试使用类 org/apache/xmlgraphics/image/loader/impl/ImageRawPNG 但找不到它。

您需要做的是找到包含该类的 jar 并将其添加到类路径中。

# c# - 如何从 Jquery 模式重新定向弹出到父框架中的不同页面

> ID：11187071
> 
> 赞同：0
> 
> 时间：2012-06-25T09:56:01.257
> 
> 标签：c#, jquery, asp.net

我有一个包含登录链接的页面的问题。选择后，我将打开一个包含登录页面的 Jquery 模式弹出窗口（颜色框）。

在登录页面中放置了一个登录控件，成功登录后它应该重定向到主页。但是目前，当我成功登录应用程序时，新页面会在模式弹出窗口中打开。

是否有任何解决方案可以在模式弹出的父窗口的同一窗口中打开页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:05:51.703

您必须将顶部窗口设置为：

```
$(location, window.top.document).attr('href', url); 
```

url 是您赢得重定向的地址。

# python - Openerp：在表单视图中显示 many2one 字段

> ID：11187073
> 
> 赞同：0
> 
> 时间：2012-06-25T09:56:12.180
> 
> 标签：python, xml, openerp

有一个字段many2one。当我试图打开该字段的树视图时，它显示为空！

这是我的领域：

```
 'classb_id': fields.many2one('class.a', 'Reception', required=True, select=True), 
```

在我的表单视图中：

```
 <field name="classb_id"/> 
```

我已经为 class.a 创建了一些记录，但是树视图没有显示任何数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:19:45.437

您好，您已经通过创建关系和在关系表中创建记录完成了 70% 的工作，`class.a`但现在在您创建关系字段的位置`classb_id`打开表单视图，该字段`classb_id`从模型中选择一些记录并`class.a`保存它，然后您将能够看到关系记录值。在这里，您做了什么，您创建了所有设置，但最后一步丢失了，即在您的关系字段上选择字段关系记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:02:40.633

```
As there is a relation with class "class.a" , 
there must be data for that object.
then and then it will show you datas in the tree view of that m2o filed. 
```

注意：您可以使用视图中的新按钮为“class.a”类创建新记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:38:14.557

检查您是否添加了两个或多个“classb_id”字段。在 openerp v6.0 中，当您添加两次相同的字段时，只有一个字段会显示模型中的数据，其他字段将显示为空。

如果这不能解决您的问题，请显示模型 class.a，它的名称字段，如果没有添加名称字段，那么它的 _rec_name 字段等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:17:27.833

在 class.a 对象中，您是否有“活动”字段。

如果是，则默认设置为 True。否则它不会显示在列表视图中。

# python - 我认为它已经有需要论证的 Osascript。Python/终端

> ID：11187074
> 
> 赞同：1
> 
> 时间：2012-06-25T09:56:13.480
> 
> 标签：python, unix, heredoc

使用 python 我正在试验“””字符串和 osascript。所以我拥有的是这个

```
os.system("""arch -i386 osascript -e
                      ' tell application "Finder"
                        activate
                        display dialog "Hi"
                        end tell'""") 
```

这是从 Python 运行的，但它一直告诉我

```
osascript: option requires an argument -- e
usage: osascript [-l language] [-e script] [-s {ehso}] [programfile] [argument ...] 
```

我不了解你，但我在我的陈述中看到了 -e。不乏这一点。这是怎么回事？？我是否需要在其中指定一个 HEREDOC（我认为是 Python Heredoc），以便终端读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:59:30.200

问题是 Python heredoc / 双引号字符串语法在字符串中保留了换行符和其他空格。显然，这以某种方式中断了`system()`通话。摆脱有问题的换行符并使脚本字符串在`-e`应该工作之后立即开始。

# python - 使用 python 将 openerp 数据导出到 csv 文件的最佳方法

> ID：11187086
> 
> 赞同：0
> 
> 时间：2012-06-25T09:57:31.513
> 
> 标签：python, export-to-excel, openerp, export-to-csv

使用 python 将 openerp 数据导出到 csv/xls 文件以便我可以在 openerp 中安排它（我不能使用客户端导出）的最佳方法是哪种？

*   使用 csv python 包
*   使用 xlwt python 包
*   或任何其他包？

以及如何动态提供路径和名称来保存这个新创建的 csv 文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:24:17.887

嗯，他们是某些方式，比如

*   使用 csv python 包
    *   在这种情况下，您可以利用[export_data](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/4557/openerp/osv/orm.py#L1199)服务，它会自动为您生成 csv，您可以与 Scheduler(cron job) 一起使用，甚至可以为它编写脚本。
*   使用 xlwt python 包
    *   这将是您读取所有数据然后处理然后生成 csv 而第一个选项已经完成您工作的 90% 的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:16:05.113

为什么不自己使用`Open ERP`客户端。

`xlwt`如果你真的需要编写一个`python`程序来生成它，你可以去。

# java - 获取错误租赁任务

> ID：11187090
> 
> 赞同：0
> 
> 时间：2012-06-25T09:57:40.877
> 
> 标签：java, google-app-engine, stack-trace, task-queue

当我尝试从应用程序中的拉取队列中租用任务时，出现以下错误。我的代码以前没有发生这种情况，所以发生了一些变化。我怀疑这是一个线程问题——这些调用是在一个单独的线程中进行的（使用创建的`ThreadManager.createThreadForCurrentRequest`）——最近被禁止了吗？

```
uk.org.jaggard.myapp.BlahBlahBlahRunnable run: Exception leasing tasks. Already tried 0 times.
com.google.apphosting.api.ApiProxy$CancelledException: The API call taskqueue.QueryAndOwnTasks() was explicitly cancelled.
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:218)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:68)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:182)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:68)
    at com.google.appengine.tools.appstats.Recorder.makeSyncCall(Recorder.java:323)
    at com.googlecode.objectify.cache.TriggerFutureHook.makeSyncCall(TriggerFutureHook.java:154)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:105)
    at com.google.appengine.api.taskqueue.QueueApiHelper.makeSyncCall(QueueApiHelper.java:44)
    at com.google.appengine.api.taskqueue.QueueImpl.leaseTasksInternal(QueueImpl.java:709)
    at com.google.appengine.api.taskqueue.QueueImpl.leaseTasks(QueueImpl.java:731)
    at uk.org.jaggard.myapp.BlahBlahBlahRunnable.run(BlahBlahBlahRunnable.java:53)
    at com.google.apphosting.runtime.ApiProxyImpl$CurrentRequestThreadFactory$1$1.run(ApiProxyImpl.java:997)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl$CurrentRequestThreadFactory$1.run(ApiProxyImpl.java:994)
    at java.lang.Thread.run(Thread.java:679)
    at com.google.apphosting.runtime.ApiProxyImpl$CurrentRequestThreadFactory$2$1.run(ApiProxyImpl.java:1031) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:57:46.730

我怀疑您的应用程序日志中的警告将包含“线程被中断，抛出 CancelledException”。Java 的 InterruptedException 在 [http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html) 和“Java Concurrency in Practice”一书中进行了讨论。

# android - 使用编码在android中创建多行编辑视图

> ID：11187092
> 
> 赞同：3
> 
> 时间：2012-06-25T09:57:45.310
> 
> 标签：android, android-edittext, helper, street-address

我已经`EditText`动态创建了一个对象，但我无法创建一个 multi-line `EditText`。我试过这个：

```
EditText et1 = new EditText(this);
et1.setHint("Enter Your Address");
et1.setSingleLine(false);
et1.setHorizontalScrollBarEnabled(false);
et1.setInputType(android.text.InputType.TYPE_TEXT_VARIATION_POSTAL_ADDRESS);
et1.setLines(7); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:26:00.700

将其包含在您的代码中：

```
 et1.setMaxLines(maxlines); 
```

或者您可以设置编辑文本的特定高度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T22:42:39.800

如果您希望文本换行到下一行，请将 TYPE_CLASS_TEXT 添加到 MULTI_LINE 标志：

```
textArea.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_FLAG_MULTI_LINE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T17:33:40.767

这是行：

```
et1.setInputType(android.text.InputType.TYPE_TEXT_VARIATION_POSTAL_ADDRESS); 
```

那就是问题所在。把它拿出来。

除非您想设置最大行数，否则 setMaxLines 并不重要。您还应该避免将高度设置为特定的值。 `WRAP_CONTENT`效果很好。

甚至将其更改为：

```
et1.setInputType(android.text.InputType.TYPE_TEXT_FLAG_MULTI_LINE); 
```

强制它进行单行编辑，这看起来很奇怪。
这也不起作用：

```
et1.setInputType(android.text.InputType.TYPE_TEXT_FLAG_CAP_SENTENCES); 
```

这真的很烦人。好像是安卓的bug。。。

您可能还想设置垂直滚动和重力，以便它可以上下滚动并从左上角开始。

```
et1.setGravity(Gravity.TOP|Gravity.LEFT);
et1.setVerticalScrollBarEnabled(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T02:03:24.213

对我有用的是：

```
et1.setSingleLine(false);
et1.setHorizontalScrollBarEnabled(false);
et1.setVerticalScrollBarEnabled(true);
et1.setMinLines(minLines); 
```

# android - Android：从 Android Market 获取应用内列表

> ID：11187094
> 
> 赞同：1
> 
> 时间：2012-06-25T09:57:46.827
> 
> 标签：android, google-play

我正在为我的应用实施应用内计费。我已经下载了 Google Code 提供的示例应用程序，我已经针对我的应用程序对其进行了调整，并且它运行良好。

现在，我想从 Android Market 中检索为我的应用发布的应用内应用列表，并将它们列在我的活动中。

我需要这个，因为我不会一次发布所有应用内应用，但我想现在发布其中的一些，下个月发布一些等等。我想避免在 Google Market 上发布新的 apk 版本，因为下载第一个版本的人如果不更新他们的应用程序，就不会找到新的可用应用程序内。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:22:58.310

开发者控制台中的应用内管理器确实有导出到 csv 的功能，因此理论上可以以编程方式下载列表。它可能需要您编写代码以“登录”到开发人员控制台，存储访问令牌，然后下载文件。（我认为这不会是微不足道的）

另一种方法可能是将列表存储在更易于访问的公共服务器上。

无论哪种情况，您都必须找到检查产品更新的最佳时间间隔。即，您是否在每次启动应用程序时让用户等待，或者您是否在应用程序中有手动操作，用户可以在其中检查更新。

就个人而言，除非您的产品变化非常频繁，否则我会坚持使用 apk 文件中的静态列表。您可能会推出错误修复，因此在那些时候更新产品列表不会成为问题。至于通知用户，他们将通过更新管理器收到您的应用程序存在新版本的通知。如果发行说明足够有趣，用户就会更新。

# haskell - 如何避免多个列表遍历中的空间泄漏？

> ID：11187095
> 
> 赞同：3
> 
> 时间：2012-06-25T09:57:46.760
> 
> 标签：haskell

GHC 是否足够智能以在“半并行”的列表上运行多个操作？

考虑这个（简化的）代码：

```
findElements bigList = do
  let special = head . filter isSpecial $ bigList
  let others  = filter isSpecialOrNormal $ bigList

  return (special, others) 
```

（*由于原始代码的Monad*）

我猜 GHC 将运行第一个列表操作并将所有元素保留在内存中，以便第二个操作能够处理它们。

我的问题是我在处理较大的文件时遇到了空间泄漏。但我相信它应该能够在恒定空间中运行。有没有办法做到这一点？

## 更新 1

像这样写下来，解决这个问题的方法当然是改变两行的顺序。

但我的问题仍然存在：GHC 是否足够智能，可以在未在 monad 中完成时找出这种半并行处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:43:02.823

我不认为 GHC 足够聪明来合并这两个遍历，或者，通常情况下，GHC 可能足够聪明，但是在某些情况下你不想要这种行为，所以 GHC 不会这样做。

这是我将如何使用幺半群和`foldMap`.

```
import Data.Monoid
import Data.Foldable 
```

首先，这是使用幺半群编写`special`with的方法。`foldMap``First`

```
specialF :: a -> First a
specialF a = First $ if isSpecial a then Just a else Nothing

special :: [a] -> a
special as = let (First (Just s)) = foldMap specialF as in s 
```

与 specialOrNormal 类似，使用列表 monoid。

```
specialOrNormalF :: a -> [a]
specialOrNormalF a = if isSpecialOrNormal a then [a] else []

specialOrNormal :: [a] -> [a]
specialOrNormal = foldMap specialOrNormalF 
```

关于幺半群的一个巧妙之处在于，一个幺半群元组也是一个幺半群，这使得合并这些折叠变得容易：

```
findElements :: [a] -> (a, [a])
findElements bigList =
  let (First (Just s), son) = 
    foldMap (\a -> (specialF a, specialOrNormalF a)) bigList
  in (s, son) 
```

如果你喜欢无点代码，你可以这样写：

```
findElements :: [a] -> (a, [a])
findElements = 
  first (fromJust . getFirst) . 
  foldMap 
    (   First . mfilter isSpecial . return 
    &&& mfilter isSpecialOrNormal . return
    ) 
```

# iphone - 知道用户是否更改了 TWTweetComposeViewController 中的内容

> ID：11187096
> 
> 赞同：0
> 
> 时间：2012-06-25T09:57:47.357
> 
> 标签：iphone, objective-c, ios5

有没有办法知道用户是否更改了推文的初始文本？我试图阻止用户更改预定义的推文，这可能在 iOS 5 中使用 TWTweetComposeViewController 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:12:06.763

没有必要这样做，在 Apple 的 Twitter 示例代码中，他们展示了如何在没有用户确认的情况下简单地发送推文......没有 TTWeetComposer，没有机会更改您的预定义文本。

[Apple 的 Twitter 示例代码](http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html)

# html - 如何检查数组是否存在？

> ID：11187101
> 
> 赞同：1
> 
> 时间：2012-06-25T09:57:58.803
> 
> 标签：html, arrays, jsp

我是java新手，我正在开发一个应用程序，我发现了一些困难。谁能告诉我如何检查数组是否设置，意味着数组是否存在。

实际上，当我运行包含带有 HTML 表单的数据列表的 jsp 页面时，我遇到了错误。当我提交表单并获得结果时，它工作正常，但是第一次打开页面时，它没有得到结果数组并给出错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:14:53.613

您应该检查数组是否为空，如下所示：

```
<c:if test="${!empty array}">
  //list the array
</c:if> 
```

`empty`是一个`EL`运算符，如果数组为 null 或为空，则返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:00:05.487

您可以通过检查 if == null 来检查变量是否已初始化。

# sql - 使用一张表中的不同记录将其与另一张表的不同条目结合起来

> ID：11187106
> 
> 赞同：2
> 
> 时间：2012-06-25T09:58:18.007
> 
> 标签：sql, sql-server, join

我有两张桌子。员工和资格。

**员工**

```
Emp_id   Name   Qualification1   Qualification2    Qualification3
10001   xxxxxx         1              3                5
10002   yyyyyy         3              2                       
.......
......
..... 
```

**资格**

```
Qual_ID   Qual_name
    1      B.Tech
    2      MCA
    3      M.Tech 
```

我如何使用连接查询来获得以下输出

```
Emp_ID   Name    Qual1   Qual2   Qual3
10001   xxxxxxx  B.Tech   MCA     pppp
10002   yyyyyyy  B.Tech   
......
.....
..... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:06:37.070

尝试这个

```
Select E.Emp_ID,E.Name,Q1.Qual_Name,Q2.Qual_Name, Q3.Qual_Name
From 
    Employees AS E
    INNER JOIN Qualifications As Q1 ON E.Qualification1=Q1.Qual_ID
    INNER JOIN Qualifications As Q2 ON E.Qualification2=Q2.Qual_ID
    INNER JOIN Qualifications As Q3 ON E.Qualification3=Q3.Qual_ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:06:57.803

```
SELECT e.emp_id, 
       e.name, 
       q1.qual_name, 
       q2.qual_name, 
       q3.qual_name, 
FROM   employee e 
       INNER JOIN qualifications q1 
               ON e.qualification1 = q1.qual_id 
       INNER JOIN qualifications q2 
               ON e.qualification2 = q2.qual_id 
       INNER JOIN qualifications q3 
               ON e.qualification3 = q2.qual_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:04:17.563

尝试这个：

[Sql 小提琴](http://www.sqlfiddle.com/#!3/8431d/15/0)

```
Select
    Emp_id, Name, 
    (Select Qual_name from Qualifications where Qualifications.Qual_ID = Employee.Qualification1) as Qual1,
    (Select Qual_name from Qualifications where Qualifications.Qual_ID = Employee.Qualification2) as Qual2,
    (Select Qual_name from Qualifications where Qualifications.Qual_ID = Employee.Qualification3) as Qual3
From Employee 
```

# android - 未找到使用 android SQLite 表“android.database.sqlite.SQLiteException：没有这样的表：”

> ID：11187110
> 
> 赞同：0
> 
> 时间：2012-06-25T09:58:40.677
> 
> 标签：android, sqlite

我有一个关于在 android 项目中使用 SQLite 数据库的问题。我在资产文件夹中添加了我的数据库。我尝试访问数据库上的任何表，但应用程序在我的 HTC Desire S 设备“android.database.sqlite.SQLiteException：没有这样的表：”时出现错误。你能给我任何建议吗？

我的代码：

```
public static final String TABLE_NAME = "Airports";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_CODE = "Code";
public static final String COLUMN_NAME = "Name";
public static final String COLUMN_NAMEFORSEARCH = "NameForSearch";
public static final String COLUMN_SEQUENCE = "OrderIndex";
private static String DB_PATH = "/data/data/com.pordiva.cepyol.activities/databases/";
private static String DB_NAME = "cepyol.db";

private SQLiteDatabase myDataBase;

private final Context myContext;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 * 
 * @param context
 */
private static final String DATABASE_NAME = "cepyol";
private static final int DATABASE_VERSION = 2;

public FlightSQLiteHelper(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */
public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();
    myDataBase = null;

    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method and empty database will be created into
        // the default system path

        myDataBase = this.getReadableDatabase(); 
        myDataBase.close();
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);

    } catch (SQLiteException e) {

        // database does't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);

}

@Override
public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase myDataBase) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public static String getDatabaseName() {
    return DATABASE_NAME;
}

public static int getDatabaseVersion() {
    return DATABASE_VERSION;
} 
```

在那里打电话：

```
private int[] checkDB() {
    FlightSQLiteHelper myDbHelper = new FlightSQLiteHelper(this);

    int[] value = null;

    try {

        myDbHelper.createDataBase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();
        SQLiteDatabase db = myDbHelper.getWritableDatabase();

        Cursor c = db.query("Airports", new String[] { "_id" }, null, null,
                null, null, null);
        startManagingCursor(c);

        if (c != null) {
            c.moveToFirst();
            int index = 0;
            while (c.moveToNext()) {
                value[index] = c.getInt(index);
                index++;
            }

        }

        myDbHelper.close();

    } catch (SQLException sqle) {

        throw sqle;

    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:03:43.360

您应该在 public void onCreate(..

```
// Database creation sql statement
    private static final String DATABASE_CREATE = "create table "
            + TABLE_NAME + " (" + COLUMN_ID
            + " integer primary key autoincrement, " + COLUMN_COMMENT
            + " text not null);";//<-- change it as per you need

@Override
public void onCreate(SQLiteDatabase myDataBase) {
 database.execSQL(DATABASE_CREATE);
} 
```

# c# - 使用 Rhino Mock 在 c# 中模拟静态方法

> ID：11187114
> 
> 赞同：0
> 
> 时间：2012-06-25T09:58:59.057
> 
> 标签：c#, .net, rhino-mocks

在 c# 中模拟静态类的最佳方法是什么。例如：

```
String appPath = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath; 
```

我想模拟它，但需要将它包装在一个带有接口的类中，最好的方法是什么，这种方法是否适用于所有静态方法？

这种方法不会产生很多毫无意义的接口和类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:04:21.830

> 在 c# 中模拟静态类的最佳方法是什么

最好的方法是将那些静态调用隐藏在抽象后面。那些是可以伪造的。例如：

```
public interface IApplicationPhysicalPathProvider
{
    string ApplicationPhysicalPath { get; }
}

public class AspNetApplicationPhysicalPathProvider : IApplicationPhysicalPathProvider
{
    public string ApplicationPhysicalPath 
    {
        get { return HostingEnvironment.ApplicationPhysicalPath; }
    }
} 
```

该建议适用于任何模拟框架，即使您根本不使用模拟框架。

# django - Django runserver 自定义数据库

> ID：11187123
> 
> 赞同：15
> 
> 时间：2012-06-25T09:59:40.900
> 
> 标签：django

我正在使用 Django 1.4

我需要启动开发服务器，并且我想（在命令中）指定它必须使用的数据库。例如，如果我的设置包含：

```
DATABASES = {
    'default': {
        'NAME': 'db.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
    'tests': {
        'NAME': 'tests.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
} 
```

我想使用类似的东西：

```
django-admin.py runserver --database=tests 
```

有类似的吗？我还尝试使用第二个设置文件，但 --settings 选项不起作用：（--settings 选项似乎已被弃用，在[DOCS](https://docs.djangoproject.com/en/dev/ref/django-admin/#runserver-port-or-address-port)中根本没有提及）

```
django-admin.py runserver --settings=settings_tests 
```

或者

```
django-admin.py runserver --settings settings_tests 
```

引发错误：

> ImportError：无法导入设置“settings_tests”（它在 sys.path 上吗？）：没有名为 settings_tests 的模块

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-25T12:27:19.780

与创建多个配置文件相比，切换配置的一种更简洁、更具可扩展性的方法是使用环境变量（参见Heroku 和其他人使用[的十二因素应用程序方法中的 #3 ）。](http://www.12factor.net/config)例如：

```
from os import environ

DATABASES = {
    'main': {
        'NAME': 'db.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
    'tests': {
        'NAME': 'tests.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
}

default_database = environ.get('DJANGO_DATABASE', 'main')
DATABASES['default'] = DATABASES[default_database] 
```

然后，您可以通过设置`DJANGO_DATABASE`环境变量来更改默认数据库。

```
export DJANGO_DATABASE='tests'
./manage.py runserver 
```

...或者...

```
DJANGO_DATABASE='tests' ./manage.py runserver 
```

您还可以使用 Python 代码设置环境变量。

* * *

编辑：为了简化这个过程，Kenneth Reitz 编写了一个不错的小应用程序，名为[dj-database-url](https://github.com/kennethreitz/dj-database-url)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-25T13:37:03.643

我发现在 Django 1.4 中调用的正确命令是：

```
django-admin.py runserver --settings=myproject.settings_tests 
```

Django DOCS 中的这些信息在哪里？

感谢您的所有回复

狮鹫

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T10:12:49.903

使用以下内容创建`settings_tests.py`：

```
from settings import *

DATABASES = {
    'default': {
        'NAME': 'tests.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },

} 
```

执行`django-admin.py runserver --settings=settings_tests`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-11T10:55:00.110

@Danilo Barges 提出了一种解决问题的简单方法。我只添加了一些更改来处理运行测试。那是因为`DATABASES['default'] = DATABASES[default_database]`会在`DATABASES`字典中添加一个条目。因此，如果您运行测试，测试运行器将`'default'`针对`DATABASES`. 改用两个字典：

```
DATABASES_AVAILABLE = {
    'default': {
        'NAME': 'db.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
    'tests': {
        'NAME': 'tests.db',
        'ENGINE': 'django.db.backends.sqlite3'
    },
}

database = os.environ.get('DJANGO_DATABASE', 'main')
DATABASES = {
    'default': DATABASES_AVAILABLE[database]
} 
```

# javascript - Javascript 方法调用和打印

> ID：11187125
> 
> 赞同：1
> 
> 时间：2012-06-25T09:59:49.753
> 
> 标签：javascript, function, variables, methods

我正在学习 JavaScript，但我在调用函数时遇到了一些问题......

这是我的两个功能：第一个：

```
function geisson() {
    var iabile = new XMLHttpRequest();
    iabile.onreadystatechange = function () {
        if (iabile.readyState == 4) {
            var objectjson = {};
            var arrayCards = []; //creazione dell'array che conterrà le cards
            objectson = JSON.parse(iabile.responseText);
            arrayCards = objectson.cards;
            var Ettore = []; //Vèttore di cards

            //the results
            for (i = 0; i < arrayCards.length; i++)
                document.getElementById('image').src = "http://www.mysite.com/png/public/card/" + arrayCards[i].__guid__ + "?width=292";
        }
    }
    iabile.open("GET", "gnekcard.json", true);
    iabile.send(null);
} 
```

第二个功能：

```
function Entity() {
    var iabile = new XMLHttpRequest();
    iabile.onreadystatechange = function () {
        if (iabile.readyState == 4) {
            var objectjson = {};
            var arrayCards = []; //creazione dell'array che conterrà le cards
            objectson = JSON.parse(iabile.responseText);
            arrayCards = objectson.cards;
            //the results
            for (i = 0; i < arrayCards.length; i++)
                document.getElementById('informazioni').innerHTML += "\r\n" + "Nome : " + arrayCards[i].__title__ + "\r\n" + "Vanity url: " + arrayCards[i].vanity_urls[0] + "\r\n";
        }
    }
    iabile.open("GET", "gnek.json", true);
    iabile.send(null);
} 
```

我想要第三个函数来打印其他两个函数的结果。我宁愿只在第三个函数中使用“for”并回忆其他方法的向量，但它们不是全局的。我不想拥有全局变量（如果可能的话），那我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:31:15.640

当您使用 Ajax 调用时，请执行您应该始终执行的操作：使用回调。

例如：

```
function geisson(callback) {
    var iabile = new XMLHttpRequest();
    iabile.onreadystatechange = function () {
        if (iabile.readyState == 4) {
            // ...
            callback(objectson.cards);
        }
    }
    iabile.open("GET", "gnekcard.json", true);
    iabile.send(null);
} 
```

在您的第三个功能中：

```
function someName() {
    geisson(function(data) {
        for (var i = 0; i < data.length; i++) {
            //... do something with data ...
        }
    });
    // call Entity the same way here...
} 
```

* * *

顺便说一句，在您的第一个函数中，您总是会覆盖*同一*元素 ( )的`src`属性。在这里迭代整个数组是没有意义的，正弦最终将具有与最后一个元素相关的值。要么将值分配给多个元素，要么只获取数组中的最后一个元素。*`document.getElementById('image')``src`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:05:13.450

在`geisson`函数中，您可以这样做：

```
geisson.arrayCards = arrayCards; 
```

你可以在`Entity`函数中做同样的事情

```
Entity.arrayCards = arrayCards; 
```

然后你可以创建第三个函数来访问`arrayCards`每个函数。

```
function displayArrayCards {
  var geissonCards = geisson.arrayCards;
  var EntityCards = Entity.arrayCards;
  var i;
  for(i = 0; i < geissonCards.length; i++) {
    document.getElementById('image').src = "http://www.mysite.com/png/public/card/" + geissonCards[i].__guid__ + "?width=292";
  }
  for(i = 0; i < EntityCards.length; i++) {
    document.getElementById('informazioni').innerHTML += "\r\n" + "Nome : " + EntityCards[i].__title__ + "\r\n" + "Vanity url: " + EntityCards [i].vanity_urls[0] + "\r\n";
  }
} 
```*

# iphone - iPhone：如何知道 UISlider 是否在滑动？

> ID：11187129
> 
> 赞同：2
> 
> 时间：2012-06-25T10:00:00.653
> 
> 标签：iphone, ios, events, uislider

我正在使用以下代码来了解滑块是否正在滑动。
但是有没有更容易知道的属性或方法？

```
[slider addTarget:self action:@selector(touchUp) forControlEvents:UIControlEventTouchUpInside];
[slider addTarget:self action:@selector(touchUp) forControlEvents:UIControlEventTouchUpOutside];
[slider addTarget:self action:@selector(touchUp) forControlEvents:UIControlEventTouchCancel];            
[slider addTarget:self action:@selector(touchDown) forControlEvents:UIControlEventTouchDown];

- (void)touchDown {
    self.sliding = YES;
}

-(void)touchUp {
    self.sliding = NO;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:40:18.193

有一个属性可以使用。

```
slider.highlighted 
```

当您按住它时，此属性的值为 YES。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:02:37.070

```
- (void)touchDown { self.sliding = YES; }
- (void)touchUp   { self.sliding = NO;  } 
```

使用布尔值确实是在滑块上跟踪用户交互的常用方法。

> 但是有没有更容易知道的属性或方法？

不，据我所知没有。

# mysql - mysql - 添加日期时间列并插入另一个表上引用的值

> ID：11187130
> 
> 赞同：0
> 
> 时间：2012-06-25T10:00:01.193
> 
> 标签：mysql, sql, database, join

我有一个“结果”表，其中有一个日期时间列“created_time”。此表引用另一个表“results_values”（results.id 引用 results_values.results_id）。这里有表格描述：

```
mysql> describe webforms_results;
+------------------+------------+------+-----+---------+----------------+
| Field            | Type       | Null | Key | Default | Extra          |
+------------------+------------+------+-----+---------+----------------+
| id               | int(11)    | NO   | PRI | NULL    | auto_increment |
| webform_id       | int(11)    | NO   |     | NULL    |                |
| store_id         | int(11)    | NO   |     | NULL    |                |
| customer_id      | int(11)    | NO   |     | NULL    |                |
| customer_ip      | bigint(20) | NO   |     | NULL    |                |
| created_time     | datetime   | NO   |     | NULL    |                |
| update_time      | datetime   | NO   |     | NULL    |                |
| approved         | tinyint(1) | NO   |     | NULL    |                |
| view_on_frontend | tinyint(1) | NO   |     | 0       |                |
+------------------+------------+------+-----+---------+----------------+

mysql> describe webforms_results_values;
+--------------+----------+------+-----+---------+----------------+
| Field        | Type     | Null | Key | Default | Extra          |
+--------------+----------+------+-----+---------+----------------+
| id           | int(11)  | NO   | PRI | NULL    | auto_increment |
| result_id    | int(11)  | NO   | MUL | NULL    |                |
| field_id     | int(11)  | NO   |     | NULL    |                |
| value        | text     | NO   |     | NULL    |                |
| rating       | int(11)  | YES  |     | NULL    |                |
| created_time | datetime | YES  |     | NULL    |                |
+--------------+----------+------+-----+---------+----------------+ 
```

现在我在'results_values'上添加了一个日期时间列'created_time'，我想在第二个表上插入日期时间，从相应id的第一个表中复制它们。有什么快速的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:07:20.987

是的触发器是解决方案。如果你想更新已经插入的数据，你可以这样做：

```
UPDATE webforms_results_values wrv INNER JOIN webforms_results wr
ON wrv.result_id = wr.id
SET wrv.created_time = wr.created_time 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:06:07.210

创建“触发器”来更新这些表的每一次更新。

请参考以下网址： [触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

# sql - 两个 IP 地址匹配

> ID：11187133
> 
> 赞同：1
> 
> 时间：2012-06-25T10:00:08.817
> 
> 标签：sql, regex, ip-address

我需要将两个 ipaddress 与**正则表达式**匹配：如 20.20.20.20

```
should match with      20.20.20.20
should match with      [http://20.20.20.20/abcd]
should not match with  20.20.20.200
should not match with  [http://20.20.20.200/abcd]
should not match with  [http://120.20.20.20/abcd] 
```

目前我正在使用类似这样的正则表达式：`".*[^(\d)]20.20.20.20[^(\d)].*"` 但它不适用于第一种和第三种情况。请帮助我使用这个正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:22:19.020

您忽略了该行以 20.20.20.20 开头的情况：

```
"(.*[^(\d)]|^)20.20.20.20([^(\d)].*|$)" 
```

似乎对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:02:47.303

你可以这样做：

```
select * from tablename
where ip = '20.20.20.20' or ip like 'http://20.20.20.20/%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:04:41.300

`[^(\d)]`没有量词意味着您期望恰好 1 个不是数字的字符使用`[^(\d)]*`将有所帮助

# php - Codeigniter 站点范围的视图

> ID：11187138
> 
> 赞同：1
> 
> 时间：2012-06-25T10:00:33.180
> 
> 标签：php, codeigniter

我需要在我的 codeigniter 站点的侧边栏中实现广告。

广告是动态的并从数据库中检索。我当前的设置是我有主模板文件，我将主视图文件的名称作为变量传递给，如下所示：

```
$data['main_content'] = 'some_view_file';
$this->load->view('template_file', $data); 
```

我想到了以下步骤：

1.  `get_ads()`在 my 中创建一个函数`MY_Controller`并检索所有广告并返回它
2.  在我的每个控制器的方法中，我访问上面创建的函数并将其传递给模板

 *```
$data['ads'] = $this->get_ads();
$data['main_content'] = 'some_view_file';
$this->load->view('template_file', $data); 
```

但是上述方法的问题是，我需要`$data['ads'] = $this->get_ads();`在加载视图之前在我的所有方法中设置。

处理上述问题的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:10:37.117

创建一个名为 Ads.php 的 CodeIgniter 库

```
class Ads
{

    private $CI;

    public function __construct()
    {
        $this->CI = & get_instance();
    }

    public function my_ads()
    {
        // get the ads from database //
        return $this->CI->db->select('field1, field2, field3')->from('ads_table')->get()->result();
    }

} 
```

自动加载库（因为您需要所有视图中的广告）。转到**./application/config/autoload.php**

```
/*
  | -------------------------------------------------------------------
  |  Auto-load Libraries
  | -------------------------------------------------------------------
  | These are the classes located in the system/libraries folder
  | or in your application/libraries folder.
  |
  | Prototype:
  |
  | $autoload['libraries'] = array('database', 'session', 'xmlrpc');
 */

$autoload['libraries'] = array('ads'); 
```

现在您可以使用 CI 系统检索整个数据

```
$ads = $this->ads->my_ads(); 
```

希望这对您有所帮助。谢谢！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:08:12.077

在`MY_Controller`添加一个变量：

```
class MY_Controller extends CI_Controller {

      public $data;

      public function __construct() {
          $this->data['ads'] = $this->get_ads();      
          //etc.
      }
    //etc.
} 
```

在每个控制器中更新`$data`变量并像这样调用视图：

```
$this->data['main_content'] = 'some_view_file';
$this->load->view('template_file', $this->data); 
```*

# file - 如何在 Corona 中找到能够读写的文件或将文件放在哪里？

> ID：11187139
> 
> 赞同：0
> 
> 时间：2012-06-25T10:00:40.213
> 
> 标签：file, lua, coronasdk

这是读取和写入文件的 Peach Ellen 的 ego.lua 文件。但是，我不确定将我的 txt 文件放在哪里以便对其进行读写。我将文件放入项目的文件中，并将其拖到项目所在的电晕中。但是，它不会对更改做出反应。

```
 module (..., package.seeall)

  --Save function
  function saveFile( fileName, fileData )
         --Path for file
         local path = system.pathForFile( fileName, system.DocumentsDirectory )
         --Open the file
         local file = io.open( path, "w+" )

    --Save specified value to the file
        if file then
          file:write( fileData )
          io.close( file )
       end
   end

  --Load function
  function loadFile( fileName )
  --Path for file
  local path = system.pathForFile( fileName, system.DocumentsDirectory )
  --Open the file
  local file = io.open( path, "r" )

    --If the file exists return the data
    if file then
       local fileData = file:read( "*a" )
       io.close( file )
       return fileData
    --If the file doesn't exist create it and write it with "empty"
    else
       file = io.open( path, "w" )
       file:write( "empty" )
       io.close( file )
       return "empty"
    end
 end 
```

这就是使用 ego.lua 并尝试保持最高分记录的 main.lua 文件：

```
 --Hide the status bar
 display.setStatusBar(display.HiddenStatusBar)

 --Saving/Loading Stuff
 local ego = require "ego"
 local saveFile = ego.saveFile
 local loadFile = ego.loadFile
  --------------------------------------------------------------------
  --------------------------------------------------------------------

 --Create the background and make it blue
 local bg = display.newRect( 0, 0, 320, 480 )
 bg:setFillColor( 150, 180, 200 )

 --Start the score at 0
 local score = 0

 --Create score text and make it dark gray
 local scoreText = display.newText(score, 200, 20, native.systemFont, 24)
 scoreText:setTextColor( 80, 80, 80 )

 --Function to add to score and update scoreText
  local function addToScore()
  score = score + 1
  scoreText.text = score
end
 bg:addEventListener("tap", addToScore)

  --------------------------------------------------------------------
  --------------------------------------------------------------------

  --Load highscore value from file. (It will initally be a string.)
   highscore = loadFile ("gameScores.txt")

  --If the file is empty (this means it is the first time you've run the app) save it as 0
   local function checkForFile ()
   if highscore == "empty" then
   highscore = 0
   saveFile("gameScores.txt", highscore)
     end
  end
  checkForFile()

  --Print the current highscore
  print ("Highscore is", highscore)

   --------------------------------------------------------------------
   --------------------------------------------------------------------

  --When the app is quit (or simulator refreshed) save the new highscore
  --(If score > highscore the data will not be changed)

  local function onSystemEvent ()
  if score > tonumber(highscore) then --We use tonumber as highscore is a string when loaded
  saveFile("gameScores.txt", score) 
   end
 end

 Runtime:addEventListener( "system", onSystemEvent ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:15:21.400

您可以看到 Ego 类将其所有文件存储在`system.DocumentsDirectory`目录中。

该目录可以通过 File --> Show Project Sandbox --> Documents 访问

如果需要，您可以将目录更改为其他目录。可用的目录是

[系统资源目录](http://docs.coronalabs.com/api/library/system/ResourceDirectory.html)

[system.Documents 目录](http://docs.coronalabs.com/api/library/system/DocumentsDirectory.html)

[system.TemporaryDirectory](http://docs.coronalabs.com/api/library/system/TemporaryDirectory.html)

[system.Caches目录](http://docs.coronalabs.com/api/library/system/CachesDirectory.html)

# xhtml - 是否可以使用单个“a”标签超链接多个元素？

> ID：11187141
> 
> 赞同：0
> 
> 时间：2012-06-25T10:00:44.560
> 
> 标签：xhtml, hyperlink

如果 Doctype 声明 XHTML 1.0 Transitional 那么这是否可以接受？

```
<a href="" target="_self">
  <img src="" width="160" height="160" alt="" />
  <img src="" width="160" height="160" alt="" />
  <img src="" width="160" height="160" alt="" />
  <h1>Images</h1>
</a> 
```

我似乎记得读过，如果 XHTML 则`<a></a>`不能包含块元素，但我无法再次找到此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:07:01.890

是的，没关系。锚标签不应包含 div，但图像和文本都可以。

使用[http://validator.w3.org/check](http://validator.w3.org/check)验证您的代码，它会检测 Doc 类型并通知您任何问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:07:36.983

这很好，但我建议不要这样做。从 SEO 的角度来看，最好有清晰的超链接和清晰的描述。现在您有 4 个元素（3 个图像和 1 个标题），其中的图像在您的示例中没有描述。此外，对于您的 CSS，您可能会遇到最终/用户不希望出现的行为，因为您将链接应用到不同的元素。我的意思是你可能必须为上面的例子设计不同的样式。如果你尝试你的代码，你会发现它基本上在所有浏览器中都能达到预期的效果，但是为什么要让自己变得困难呢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:00:32.627

你有两个不同的问题：

> 是否可以使用单个“a”标签超链接多个元素？

是的，如果多个元素组合形成超链接指向的资源的描述。

> 在 XHTML 1.0 Transitional 中的超链接内可以有效地包含块级元素吗？

不可以。但是，如果元素的父`<a>`元素允许其中包含块级元素，则它在 HTML5 中是有效的。

# extjs - Extjs 加载排序

> ID：11187145
> 
> 赞同：1
> 
> 时间：2012-06-25T10:01:03.040
> 
> 标签：extjs, grid, visualforce, extjs3

伙计们，

我正在开发一个带有 ExtJS Grid 的 Visualforce 页面。

有什么方法可以将特定的网格列排序为 ASC 或 DESC？

我正在使用 ExtJS 3.2。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:12:42.650

为了对网格进行排序，它将在列标题中具有允许用户排序​​的选项。如果您想以编程方式执行此操作，我相信您需要对`'store'`网格绑定的对象进行排序。

然后，您可以在商店中指定排序配置（如果您希望在初始加载时进行默认排序），例如

```
sortInfo: {
    field: 'fieldName',
    direction: 'ASC' // or 'DESC' (case sensitive for local sorting)
} 
```

除了商店上的排序信息配置，您可以通过字段名和方向显式调用商店上的“排序”方法，例如

```
theStore.sort({
   field    : 'salary',
   direction: 'DESC'
}); 
```

# java - 奇怪的最终行为？

> ID：11187148
> 
> 赞同：16
> 
> 时间：2012-06-25T10:01:21.143
> 
> 标签：java, finally

```
public class Test2 {

    public static void main(String[] args) {
        Test2 obj=new Test2();
        String a=obj.go();

        System.out.print(a);
    }

    public String go() {
        String q="hii";
        try {
            return q;
        }
        finally {
            q="hello";
            System.out.println("finally value of q is "+q);
        }
    } 
```

为什么`hii`从函数返回后打印出来`go()`，finally块中的值变成了“hello”？

程序的输出是

```
finally value of q is hello
hii 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-25T10:07:11.890

那是因为您返回了一个在更改finally 块中`q`的值之前评估的值。`q`你返回`q`了，它评估了它的价值；然后您`q`在`finally`块中进行了更改，这不会影响加载的值；然后返回完成，使用评估值。

不要写这样棘手的代码。如果它让编写它的人感到困惑，想象一下它将给下一个人带来的问题，几年后你在其他地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T10:21:31.647

`return`返回*值*不可变。当在变量的部分中`return q;`执行时，变量的值被缓存为方法结果。就像方法记住的*当前*值一样，但在它返回之前，它还让我们*完成*了一些事情。`catch``q`*`q`*

 **因此，即使在`finally`块中，您将为其分配新值`q`也不会更改已通过方法缓存的值。

如果要更新返回值，则必须使用另一个`return`in`finally`块，例如

```
} finally {
    q = "hello";
    System.out.println("finally value of q is " + q);

    return q; // <--- this will set new value which should be returned
} 
```

影响返回“值”的其他方式是改变它的*状态*。

例如，如果`q`是 a `List`，您可以在 finally 块中添加新元素

```
} finally {
    q.add(new Element); //this will place new element (update) in List 
    //object stored by return because it is same object from q reference
    System.out.println("finally value of q is " + q);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:22:58.603

finally 在 return 之后但在方法实际返回给调用者之前执行。这类似于投掷。它发生在 throw 之后和退出块之前。返回值已经通过读取变量 q 设置在某个寄存器中。如果 q 是可变的，你可以在 finally 中改变它，你会在调用者中看到这种变化。为什么它会这样工作？一方面，它可能是实现起来最简单的。第二，它为您提供最大的灵活性。您可以使用显式返回覆盖 finally 中的返回值。默认情况下保留它可以让您选择任一行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:18:26.213

[**在EJP发表评论后编辑，我的第一个回复没有回答问题，也是错误的。**]
现在我的答案应该是正确的，因为 try 块和 finally 块正常完成，q 被返回。EJPs 回答中解释了返回值“hii”的原因。我仍在寻找 JLS 中的解释。

看看[JLS 14.20.2 执行 try-catch-finally](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.20.2)

> 通过首先执行 try 块来执行带有 finally 块的 try 语句。然后有一个选择：
> 
> 如果 try 块的执行正常完成，则执行 finally 块，然后有一个选择：
> 如果 finally 块正常完成，则 try 语句正常完成。
> [...]

和[JLS 14.17 返回声明](http://docs.oracle.com/javase/specs/jls/se5.0/html/statements.html#14.17)

> 带有 Expression 的 return 语句试图将控制权转移给包含它的方法的调用者；表达式的值成为方法调用的值。更准确地说，执行这样的 return 语句首先评估 Expression。如果 Expression 的评估由于某种原因突然完成，那么 return 语句会因为这个原因而突然完成。如果表达式的计算正常完成，产生一个值 V，那么 return 语句突然完成，原因是一个返回值 V

和：

> 前面的描述说“尝试转移控制”而不仅仅是“转移控制”，因为如果方法或构造函数中有任何 try 语句（第 14.20 节），其 try 块包含 return 语句，那么这些 try 语句的任何 finally 子句将在将控制权转移到方法或构造函数的调用者之前，按从内到外的顺序执行。finally 子句的突然完成可能会中断由 return 语句启动的控制转移。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T11:15:28.907

尝试使用 StringBuffer 而不是 String ，您会看到变化......似乎 return 语句阻塞了要返回的对象而不是引用。您还可以尝试通过打印以下的哈希码来验证这一点：

*   从 go() 返回的对象
*   最终对象
*   从 main() 打印的对象

    公共静态无效主要（字符串[]参数）{

    ```
     Test obj=new Test();
            StringBuffer a=obj.go();
            System.out.print(a);
        }
      public StringBuffer go() {
            StringBuffer q=new StringBuffer("hii");
            try {
                return q;
            }
            finally {
                q=q.append("hello");
                System.out.println("finally value of q is "+q);
            }
        } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T19:51:33.193

什么是最终块？

-[根据 Java 的定义，](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html) “finally 块总是在 try 块退出时执行。这确保了 finally 块即使发生意外异常也会被执行。”

因此，一旦存在 try 块并转到 System.out.print(a); 行，它就会打印“q 的最终值是 hello”。并打印 go() 方法返回的值。

如果您有像 netbeans 或 eclipse 这样的调试器，可以通过保持断点并唤醒代码来分析它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-26T06:42:04.423

嗯，我发现如下，

**`String a=obj.go();`Return 实际上返回一个值，并且在执行到 finally 之前将其复制到** 。

让我们通过以下实验来验证它。

```
public class Test2 {

   public static void main(String[] args) {
     Test2 obj=new Test2();
     String a=obj.go();

     System.out.print(a);
   } 

   public String go() {
     String q="hii";
     try {
        return q;
     }
     finally {
        q="hello";
        System.out.println("finally value of q is "+q);
     }
} 
```

**程序的输出是**

**最后 q 的值是 hello**

**你好**

如果我们采用 StringBuffer 而不是 String 如下，

```
public class Test2 {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Test2 obj=new Test2();
        StringBuffer a=obj.go();

        System.out.print(a);
    }

    public  StringBuffer go(){
        StringBuffer q=new StringBuffer("hii");
        try{

            return q;
        }
        finally{

            q.replace(0, q.length(), "hello");
            System.out.println("finally value of q is "+q);
            /*return q1;*/

        }

    }
} 
```

**输出结果是，**

**最后 q 的值是 hello**

**你好**

最后，如果我们采用 int 而不是 String 如下，

```
public class Test2 {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Test2 obj=new Test2();
        int a=obj.go();

        System.out.print(a);
    }

    public  int go(){
        int q=1;
        try{

            return q;
        }
        finally{

            q=2;
            System.out.println("finally value of q is "+q);
            /*return q1;*/

        }

    }
} 
```

**输出是**

**q 的最终值为 2**

**1**

```
 **Ananlysis** 
```

1.在第一种情况下，在变量**a**中返回 String 的复制地址，然后执行到最后更改 String 的地方。但是由于在字符串的情况下，我们无法操作任何字符串，因此会构造一个新的字符串。因此，在变量中保存了原始字符串**的**地址，并打印出来。

**2.在第二种情况下，在变量a**中返回 StringBuffer 的复制地址，最后操作这个 StringBuffer 对象，而不是创建一个新对象。所以存储在变量**a**中的值也会被操纵，这在 print 语句中可以看到。

3.在第三种情况下， int 的值在执行到 finally 之前被复制到变量**a中。**因此**a**的值为 1\. 然后最后我们改变了**q**的值，这无论如何都不会改变**a 的**值。**

# gcc - GCC，奇怪的整数提升方案

> ID：11187150
> 
> 赞同：2
> 
> 时间：2012-06-25T10:01:38.177
> 
> 标签：gcc, integer-promotion

我正在使用 GCC v4.4.5，并且我发现了一个我没想到的默认整数提升方案。

为了激活足够的警告以防止隐式错误，我激活了选项 -Wconversion，从那时起，我注意到当我执行下面的代码时，出现警告*“从 'int' 转换为 'short int' 可能会改变其值”*。

```
signed short sA, sB=1, sC=2;
sA = sB + sC; 
```

这意味着*"sB + sC"*被提升为*int*，然后分配给*sA*，它是有*符号的 short*。要修复这个警告，我必须像这样投射它。

```
signed short sA, sB=1, sC=2;
sA = ( signed short )( sB + sC ); 
```

此警告也出现在下面的代码中。

```
signed short sA=2;
sA += 5; 
```

并且可以通过删除运算符*+=*来修复...

```
sA = ( signed short )( sA + 1 ); 
```

这有点烦人，因为我不能使用运算符*+=*，*-=*。

我希望 GCC 根据操作数选择正确的整数提升。我的意思是，*sA=sB+sC*和*sA+=5*不应该被提升为*int*因为它们都被*签署了 short*。

我知道默认情况下提升为*int*可以防止溢出错误，但这有点烦人，因为我必须转换大部分代码或将变量更改为*int*。

我可以使用 GCC 选项来展示这个整数提升方案吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:15:38.620

这不是 gcc，这是标准 C 语义。

Per 6.3.1.1:2, *an object or expression with an integer type whose integer conversion rank is less than or equal to the rank of int and unsigned int* is converted to `int` or `unsigned int` depending on the signedness of the type, prior to participating in arithmetic expressions.

The reason C behaves this way is to allow for platforms where ALU operations on sub-`int` types are less efficient than those on full `int` types. You should perform all your arithmetic on `int` values, and convert back to `short` only for storage.

# eclipse - PyDev-Eclipse 和 WingIDE 的学习曲线——哪个更陡峭？

> ID：11187152
> 
> 赞同：0
> 
> 时间：2012-06-25T10:01:47.913
> 
> 标签：eclipse, pydev, wing-ide

多年来我一直在使用 WingIDE 进行 python 程序开发，总的来说我对它感到满意（尤其是他们的技术支持）。WingIDE 的学习曲线相当陡峭（至少对我而言）。我现在正在考虑一些我需要使用 PyDev-Eclipse 的项目。

PyDev 可能会有什么样的学习曲线（陡峭 -> 容易，或不陡峭 -> 不容易）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T02:52:12.490

IDE 的选择与选择键盘一样个性化。但对于这两种情况，其他人的经历有时有助于做出选择。

就我而言，Wing 让我的 Python 技能相对快速地提升，而几个月因不理解基本概念而陷入困境。我真的发现 Wing 提供的通过现有代码的功能有助于更快地理解 Python 和现有代码。

使用 Pydev，我陷入了 Eclipse 的复杂性。有了 Wing，我觉得我站在了那些深入了解 Python 的人的肩膀上。注意“感觉”这个词，这是一个非常主观的东西，你绝对应该花一些时间来尝试什么对你有用。

关于 Wing 的一些事情让我相信它帮助我比其他方式更快地学习 Python：Auto-Enter Invocation Args 设置显示了 PEP-8 调用您正在调用的标准函数的参数的方式。以及我多次使用的 go-to-definition 和 find-points-of-use 函数来试图弄清楚现有代码是如何工作的。这可能在其他地方都可以使用，但它只是在 Wing 中以一种非常连贯的方式立即起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:24:48.697

我不认为这里有正确的答案......经验差异很大（我建议按照入门教程[http://pydev.org/manual_101_root.html](http://pydev.org/manual_101_root.html)然后自己判断......我认为基础知识应该很容易掌握，但与其他任何事情一样，真正掌握它需要更多时间，尤其是习惯捷径并发现它的能力）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:28:49.207

我同意法比奥的观点，没有简单的答案。对于 Wing，从帮助菜单中的教程开始。这将带您了解使用 Wing 和使用调试器所需了解的基础知识，并且随着时间的推移，您可以更慢地学习其他工具和功能。

# jakarta-ee - 在战争中正确运送数据库驱动程序

> ID：11187154
> 
> 赞同：1
> 
> 时间：2012-06-25T10:01:58.383
> 
> 标签：jakarta-ee, tomcat, tomcat7

Tomcat7[添加](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#DriverManager,_the_service_provider_mechanism_and_memory_leaks)了防止内存泄漏的功能，现在建议将数据库驱动程序放在 $CATALINA_BASE/lib 中。

如果不将其放入共享文件夹中，我将如何加载它？是否可以在上下文侦听器中手动注册数据库驱动程序并在关机时将其卸载，如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:15:36.063

您可以将 DB JAR 放在 myapp/WEB-INF/lib 中。正如您所说，您可以使用 ServletContextListener 实现在应用程序卸载时调用 java.sql.DriverManager.deregisterDriver(Driver driver) 。

# silverlight - 导航到枢轴控件时的 Silverlight 工具包动画

> ID：11187155
> 
> 赞同：1
> 
> 时间：2012-06-25T10:02:00.020
> 
> 标签：silverlight, windows-phone-7, animation, silverlight-toolkit, windows-phone

我在所有页面中都使用了 silverlight 工具包动画。它在经典页面、全景页面和关闭枢轴时工作正常。

但是当我导航到枢轴控件时，我经常发现动画根本无法启动，尤其是在普通设备上（如 HTC Trophy）。在好手机（如 Lumia 800）上效果更好，但动画并非每次都触发。

枢轴控制是否存在延迟初始化并导致动画被取消的已知错误？我无法理解为什么动画如此不稳定，以及为什么它会时不时地起作用。例如，在“人脉”应用程序中，当您单击联系人时，枢轴始终会显示动画。我希望能够重现这种行为。

仅供参考，我将此代码放在 xaml 文件中：

```
<toolkit:TransitionService.NavigationInTransition>
  <toolkit:NavigationInTransition>
    <toolkit:NavigationInTransition.Backward>
      <toolkit:TurnstileTransition
        Mode="BackwardIn" />
    </toolkit:NavigationInTransition.Backward>
    <toolkit:NavigationInTransition.Forward>
      <toolkit:TurnstileTransition
        Mode="ForwardIn" />
    </toolkit:NavigationInTransition.Forward>
  </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
  <toolkit:NavigationOutTransition>
    <toolkit:NavigationOutTransition.Backward>
      <toolkit:TurnstileTransition
        Mode="BackwardOut" />
    </toolkit:NavigationOutTransition.Backward>
    <toolkit:NavigationOutTransition.Forward>
      <toolkit:TurnstileTransition
        Mode="ForwardOut" />
    </toolkit:NavigationOutTransition.Forward>
  </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

任何线索都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:02:01.577

可能页面的加载太慢了，我会从 profiling 开始，看看执行和检查内存使用情况是什么时间最长。

当动画不显示时我使用的一些技巧：

*   从 OnNavigatedTo 事件和页面构造函数中删除尽可能多的代码（Ashen 在评论中也提到过）
*   减少布局组件的数量。一种方法是尝试用图像代替尽可能多的布局。您也可以尝试在页面加载后从代码创建组件。（例如，对于目前不可见的枢轴项目）
*   如果页面上有 Bing 地图控件，请将其从 XAML 中删除并从代码中加载，因为该控件通常会阻止动画出现。（由于加载缓慢）
*   尽可能确保您使用的所有图像都设置为内容而不是资源。（这应该会减少应用程序的初始加载时间）
*   删除 XAML 代码中具有默认值的所有属性，例如，如果您不需要 Margin 属性，因为 0 已经是默认值。删除 Margin 属性会稍微提高速度（因为需要解析的 XAML 更少）。如果您在很多控件上执行此操作，您可能会在速度上获得一些明显的改进。

最后在 App.xaml.cs 中将过渡帧的背景设置为透明（也降低了填充率）：

```
RootFrame = new TransitionFrame() { Background = new SolidColorBrush(Colors.Transparent) }; 
```

# visual-studio-2010 - CMake说c编译器坏了

> ID：11187157
> 
> 赞同：2
> 
> 时间：2012-06-25T10:02:16.197
> 
> 标签：visual-studio-2010, cmake, firebreath

我刚刚尝试使用 Firebreath 并按照他们的 Windows 视频教程进行操作，并遇到以下错误：

> 使用 Visual Studio 10 检查工作的 C 编译器——损坏

然后说：

> 它失败并显示以下输出：更改目录：

然后列出驱动器。运行 prep2010.cmd 时会发生这种情况。我找到了一个帖子，但是论坛不让我登录，也没有答案。它在这里：http: [//forum.firebreath.org/topic/274/?page=](http://forum.firebreath.org/topic/274/?page=1#post-1117) 1#post-1117并且是完全相同的错误，我相信。上一篇文章讨论了从 vs2010 命令 shell 内部运行 prep2010。这意味着什么？

有没有其他人有这个错误或知道它是如何引起的？我不知道如何处理它。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T12:29:13.880

我知道这真的很旧.. 但如果其他人有这个问题，我的解决方案是为 Visual Studio 2010 安装服务包 1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T14:00:25.573

正如我在上面的评论中所说，这不是说你的编译器坏了的“FireBreath”；prep 命令使用 CMake 生成项目文件，错误来自 cmake。

在 Visual Studio 2010 所在的开始菜单中，应该有一个“工具”或“实用程序”子文件夹，并且在某处有一个“Visual Studio 2010 命令提示符”链接。这将启动一个带有环境变量和路径设置的命令提示符，以便 vs2010 命令都可用。您看到的错误表明无论出于何种原因，CMake 都无法找到 Visual Studio 2010。

我不知道使用 vs2010 命令提示符是否有帮助；在我的任何盒子上找到 vs2010 都没有任何问题。我可以假设，如果您以非标准方式将其安装到非标准位置，或者您的注册表被搞砸了，这些事情中的任何一个都可能导致您看到的问题。另外如果你没有安装 vs2010 肯定会导致这个问题=]

我建议先尝试 vs2010 命令提示符；如果这不起作用，您可能必须尝试卸载并重新安装 vs2010。如果这不起作用，我没有想法，也许对cmake有更多了解的人会有一个建议:-(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-23T17:19:38.357

I also had MSCV 2010 x64 on windows 7 and installing service pack one also helped. Also make sure that all your external dependancies are (x64) versions:

MSVC version: [http://visual-studio-2010.en.malavida.com/](http://visual-studio-2010.en.malavida.com/)

Gl&HF

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-23T17:25:14.873

服务包 1： [http ://www.microsoft.com/en-us/download/details.aspx?id=23691](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

使用生成器配置 cmake：MSVC2010 x64

# regex - 使用 sed 替换变量数据时保留尾随字符

> ID：11187160
> 
> 赞同：0
> 
> 时间：2012-06-25T10:02:23.670
> 
> 标签：regex, bash, sed

如果我有一个像这样的字符串：

```
p1 and p11 are going to visit p111\. p1 is the father of p111 
```

我怎么能使用 sed （或任何东西，真的）用不同的值替换 p{n} 的每个实例？所以结果会是这样的：

```
Bob and Jane are going to visit Paul. Bob is the father of Paul 
```

基本上，我正在寻找一种方法来告诉 sed，“准确地找到 p{n} 后跟除数字以外的任何内容，并将其替换为 $var，但不要替换 {n} 后面的内容。”

如果我做一些简单的事情

```
text="p1 and p11 are going to visit p111\. p1 is the father of p111"
text=`echo "$text" | sed s/p1/Bob/g` 
```

我最终将每次出现的“p1”替换为“Bob”，并且不会发生后续替换：

Bob 和 Bob1 将访问 Bob11。Bob 是 Bob11 的父亲

我最接近的是

```
text=`echo "$text" | sed 's/p1[^0-9]/bob/g'` 
```

这有两个问题：它使用尾随字符（空格、标点符号），并且它不匹配行尾的 p{n}。遍历所有需要替换的内容后：

Boband Janeare 去拜访 p111 的父亲 Paul Bobis

任何人都知道如何找到我需要替换的内容，而不是插入其他变量，并且不使用尾随的非数字字符？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:21:48.403

当然。诀窍是使用匹配组保留您不想丢失的任何内容，由转义括号分隔，并使用反向引用`\1`, `\2`, ...,将其带入替换字符串`\9`：

```
s/p1\([^0-9]\)/Bob\1/g 
```

还有一种替代方法，[lookaheads](http://www.regular-expressions.info/lookaround.html)，它可能在您的版本中可用，也可能不可用`sed`，如果可用，则需要启用其正则表达式语法的“perl 模式”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:27:13.560

您可以构建一个包含所需替换的简单文件，将其命名为`data`：

```
1 Bob
11 Jane
111 Paul 
```

然后使用 awk 阅读：

```
awk 'BEGIN{ while( getline d < "data" ) { split(d,a); r[a[1]]=a[2]}}
  { for( i in r ) gsub( "p"i, r[i])}1' input 
```

请注意，这可能会也可能不会按原样工作，具体取决于数组的构建方式。在我的实现中，r 的迭代有效，因为返回的顺序恰好是“111”、“11”、“1”，但这肯定不是明确定义的行为。您可以通过每次读取数据文件而不是将其读入数组来强制替换所需的顺序：

```
awk '{
  while( getline d < "data" ) { 
    split( d,a ); 
    gsub( "p"a[1],a[2])
  }
  close("data")}1' input 
```

这要求您在构建查找文件时要小心，并且在这种情况下要求数据行与上面给出的相反。如果您更喜欢添加单词分隔符，使用 perl 可能更容易：

```
use autodie;
open my $f, "<", "data";
while(<$f>) {@a = split; $n{$a[0]} = $a[1]}
while(<>) {
  foreach $i (keys %n ) { s/p$i(\W)/$n{$i}$1/g }
  print
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T18:46:15.283

这对我有用：

```
sed s/p1\\b/Bob/g 
```

\b 是代表单词边界的零宽度断言。

# c# - 水平移动控件

> ID：11187165
> 
> 赞同：0
> 
> 时间：2012-06-25T10:02:45.690
> 
> 标签：c#, wpf, animation, controls, storyboard

我有一个包含在堆栈面板内的按钮列表，该堆栈面板将它们水平堆叠。我想知道 C# 背后的代码来应用动画，这样如果我的鼠标靠近 MainWindow 的左端，按钮就会慢慢向右移动。而如果我的鼠标靠近 MainWindow 的右侧，则按钮会缓慢地向左移动。

按钮是在运行时添加和设置样式的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:13:05.953

如果您可以使用 a`canvas`而不是 the`stackpanel`您可以使用此代码立即实现我为您编写的动画：

在你的类中声明一个字段，如下所示：`private bool _running = true;`

在此之后，您可以使用它来为您的按钮设置动画。

```
new Thread(() =>
            {
                while (_running)
                {
                    Thread.Sleep(20);

                    canvas.Dispatcher.BeginInvoke(DispatcherPriority.Input, new Action(() =>
                    {
                        var position = Mouse.GetPosition(canvas).X;
                        var canvasWidth = canvas.ActualWidth;

                        if (position >=0 && position < 10.0d)
                            btn.SetValue(Canvas.LeftProperty, (double)btn.GetValue(Canvas.LeftProperty) + 1);

                        if (position <= canvasWidth && position > canvasWidth - 10.0d)
                            btn.SetValue(Canvas.LeftProperty, (double)btn.GetValue(Canvas.LeftProperty) - 1);
                    }));
                }
            }).Start(); 
```

不要忘记在您的课程中添加以下用法：

```
using System.Threading;
using System.Windows.Threading; 
```

如果您希望代码使用多个按钮，只需使用一个列表，然后稍微重写代码。也可以`Thread.Sleep(20)`根据您的需要进行调整。

祝你好运。

# c++ - 内部定义类的运算符

> ID：11187171
> 
> 赞同：2
> 
> 时间：2012-06-25T10:03:07.773
> 
> 标签：c++

```
template <class T>
class A {

    struct B {
         T a,b;
    }

    B& operator+ (B & x, B & y) {
        return B(x.a + y.a, x.b + y.b);
    }    

    int funcA (B & x, B & y){
        return (x + y).a;
    }
}; 
```

正如您可能猜到的那样，在编译期间我得到“运算符+必须采用零或一个参数”。正确的。因为在 operator+ 中，“this”作为第一个参数传递。因此，解决方案是将运算符定位在 A 类定义之外。但是 A 的函数 funcA 使用 operator+。所以它必须在A之前定义。但是operator+本身使用A中定义的类B，它本身是一个模板，B是依赖类。

解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:11:06.797

有一种方法可以在类的主体内定义一个自由函数：

```
struct B {
    T a,b;
    // the change from B& to B is nothing to do with defining
    // the function here, it's to avoid returning a dangling reference.
    friend B operator+ (B & x, B & y) {
        return B(x.a + y.a, x.b + y.b);
    }
}; 
```

在我看来，这是处理这种情况的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:30:03.370

除了@SteveJessop 的答案——这是最好的答案——如果操作员要成为成员，它必须是 的成员`B`，而不是 的成员`A`：

```
template <typename T>
class A {
public:
    struct B {
       T a,b;
       B(const T& x, const T& y) : a(x), b(y) {}
       B operator+(const B& rhs) const { return B(a + rhs.a, b + rhs.b); }
    };

    T funcA (B & x, B & y){
        return (x + y).a;
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T16:09:16.543

您可以将声明转发`operator+`到外部`A`，但`funcA`必须显式调用它。对于这种情况，您可能不想在`operator+`之外定义`A`，但既然您已经问过

> 因此，解决方案是将运算符定位在 A 类定义之外。... 怎样成为？

这个答案说明了它的可能。

像 molbdnilo 一样，我也同意 Steve Jessop 的答案是最好的，并且是您应该针对这个问题采用的答案。

```
template <class T> class A;
template <class T>
typename A<T>::B operator + (typename A<T>::B &x, typename A<T>::B &y);

template <class T>
class A {
    template <class U>
    friend typename A<U>::B operator + (typename A<U>::B &x,
                                        typename A<U>::B &y);
    struct B {
         T a,b;
         B(T x, T y) : a(x), b(y) {}
    };
    static T funcA (B & x, B & y) {
        return ::operator+<T>(x, y).a;    
    }
public:
    A () {
        B a(0, 1);
        B b(1, 0);
        funcA(a, b);
    }
};

template <class T>
typename A<T>::B operator + (typename A<T>::B &x,
                             typename A<T>::B &y) {
    return typename A<T>::B(x.a + y.a, x.b + y.b);
} 
```

# java - 在 Grid 上运行时如何关闭 ChromeDriver？

> ID：11187172
> 
> 赞同：5
> 
> 时间：2012-06-25T10:03:10.567
> 
> 标签：java, webdriver, testng, selenium-grid, selenium-chromedriver

我目前正在通过 TestNG 套件使用带有 Selenium Grid 2 的 RemoteWebDriver 运行我的测试。这适用于 Firefox 和 IE。现在我添加了 Chrome 并且测试运行良好，但是在对套件进行所有测试后调用 driver.quit() 时总是得到一个异常（适用于 FF 和 IE）。

异常如下所示：

```
Error communicating with the remote browser. It may have died.
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) 
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)    
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:476)
at org.openqa.selenium.remote.RemoteWebDriver.quit(RemoteWebDriver.java:346)
at setups.StandardChromeSetup.tearDown(StandardChromeSetup.java:42)
19 lines not shown

Caused by Error communicating with the remote browser. It may have died. 
org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:467)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:476)
at org.openqa.selenium.remote.RemoteWebDriver.quit(RemoteWebDriver.java:346)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(EventFiringWebDriver.java:101)
at $Proxy1.quit(Unknown Source)
at  org.openqa.selenium.support.events.EventFiringWebDriver.quit(EventFiringWebDriver.java:194)
at org.openqa.selenium.remote.server.handler.DeleteSession.call(DeleteSession.java:42)
at org.openqa.selenium.remote.server.handler.DeleteSession.call(DeleteSession.java:1)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession.java:150)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我正在使用 Selenium 版本 2.24.1 和 chromedriver.exe 21.0.1180.4

**编辑**

拆解代码：

```
@AfterSuite
public void tearDown(){
  driver.quit();
} 
```

无论有无 RemoteDriver，都适用于 FF 和 IE。但不适用于铬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:41:13.060

面临同样的问题。[这](http://code.google.com/p/chromium/issues/detail?id=104341)是我解决它的方法。这似乎是新版 Chrome 驱动程序的错误。使用以前版本的驱动程序 (20.0.1133.0) 为我解决了这个问题。

检查[驱动程序下载页面](http://chromedriver.storage.googleapis.com/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:37:38.017

我看到这可能是您在退出之前没有关闭活动的浏览器`Driver`。尝试关闭窗口，这可能是一些异常的原因，使用以下代码：

```
Driver.Close();
Driver.Quit(); 
```

这应该可以解决您的问题。

# android - Android-将清单中的条目保存为文件以供稍后查看

> ID：11187174
> 
> 赞同：0
> 
> 时间：2012-06-25T10:03:15.463
> 
> 标签：android, list, checkbox, save, scrollview

我创建了一个包含多个活动的应用程序，每个活动都包含一个复选框列表，每个复选框在检查时都包含一个特定的复选框。该应用程序通过单击按钮获取布局视图，并添加复选框的值并显示一个值。我想知道是否有一种方法可以在单击按钮后将清单的状态保存为文件，以便以后查看。该文件应显示清单并显示已选中或未选中的框。我已经尝试将其保存为图像，但由于列表包含在 ScrollView 中并且我的手机屏幕非常小，因此仅捕获了屏幕上可见的列表部分。我希望最终能够在计算机上打开文件并将其转换为 excel 电子表格，但这不必在代码中。

这是我的活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.CheckBox;
import android.widget.Toast;

public class InputsActivity extends Activity {
     public void onCreate(Bundle savedInstanceState {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.inputs);
     }

     public void DisplayScore(View view){
          float score= (float) Math.round(CalculateScore(view)*10)/10;  
          Toast.makeText(InputsActivity.this,"Input score is " +score+"%.",Toast.LENGTH_SHORT).show();
     }

     private double CalculateScore(View view) {
          double percent=  (AddChecks(view) + 2)*100/12;
          return percent;
     }

     private double AddChecks(View view) {
          double sum=0;
          for(int i=1; i<=10; i++) {
               String checkId="value" + i;
               int resID= getResources().getIdentifier(checkId,"id","com.example.ARTHChekclist");
               CheckBox check= (CheckBox) findViewById(resID);
               if (check.isChecked()) {
                     sum++;
               }
          }
          return sum;
     }
} 
```

这是我的 xml 布局

```
?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         android:orientation="vertical" >

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox11"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox12"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox13"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox14"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox15"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox16"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox18"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox19"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox22"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox26"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox27"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox28"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox29"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox30"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox31"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox34"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
          <CheckBox
            android:id="@+id/checkBox35"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
          <CheckBox
            android:id="@+id/value8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />

         <CheckBox
            android:id="@+id/checkBox36"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox37"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox38"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/value10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />
         <CheckBox
            android:id="@+id/checkBox40"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="checkbox1" />

         <Button
             android:id="@+id/button1"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="Submit"
             android:onClick="DisplayScore" />

    </LinearLayout>
</ScrollView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:07:16.290

您可以使用 SharedPreferences 将数据保存到文件。 [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

该文件本身是一个 XML，您可以在以后轻松查看它，甚至可以转换为您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T12:36:58.980

正如乌迪尼克建议的那样，我肯定会使用共享首选项。像这样的东西应该工作......

```
SharedPreferences storedPrefs = PreferenceManager
                .getDefaultSharedPreferences(getActivity().getApplicationContext());

        SharedPreferences.Editor editor = storedPrefs.edit();

        editor.putBoolean("YOUR_TAG", true);

        editor.commit(); 
```

# mysql - 首先复制然后更改mysql中重复数据的ID

> ID：11187178
> 
> 赞同：0
> 
> 时间：2012-06-25T10:03:38.040
> 
> 标签：mysql, sql

我在表中有记录，我需要为某些 ID 复制并为该行添加不同的 ID。是否可以通过一个查询完成，或者我需要先选择保存该行数组，然后进行更新和插入？

一行表的插入查询是：

```
insert into anag_competenze_medico (id_global_key, id_competenze_medico, id_anagrafica, valore_fisso, valore_percentuale, valore_fisso1, valore_percentuale1, valore_fisso2, valore_percentuale2, id_prestazione, id_user_invalidation, date_invalidation, id_user_changes, date_changes) values (-1, -1, -1, 0.00, 35.00, 0.00, 0.00, 0.00, 0.00, -1, -1, null, 1, '2011-07-19 00:00:00'); 
```

从它你可以看到表的结构。

一般来说，我有医生和他们的能力。当另一位医生在同一职位上工作时，我只想运行查询并复制另一位医生的所有能力。所以一般来说，我需要复制那一行，但要使用新医生的 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:40:09.837

你可以试试：

```
 INSERT INTO anag_competenze_medico (id_global_key, ...)
    (SELECT 'newID',....
    FROM anag_competenze_medico 
    WHERE id_global_key= 'oldID') 
```

这会将具有 oldID 的医生的能力复制到新的医生 (newID)

# android - Android - 如何创建不同状态的图像按钮，默认，按下和聚焦

> ID：11187179
> 
> 赞同：1
> 
> 时间：2012-06-25T10:03:38.583
> 
> 标签：android, android-layout

在我的 android 应用程序中，我想为按下、默认和聚焦的每个状态创建单个图像的三个不同图像。有什么工具可以帮助我创建这些图像。

我想你误解了我的问题，我知道如何为三种不同的状态使用三种不同的图像。我只想知道两个如何创建这三个图像。

在这里[http://code.google.com/p/iosched/source/browse/android/#android%2Fres%2Fdrawable-hdpi](http://code.google.com/p/iosched/source/browse/android/#android%2Fres%2Fdrawable-hdpi) 你可以看到三个不同的状态有三个不同的图像

1.  home_btn_announcements_default.png
2.  home_btn_announcements_pressed.png
3.  home_btn_announcements_selected.png

我想知道有没有什么工具可以创建以上三个图像。我想现在我的问题对每个人都很清楚。

我的问题是如何为默认图像添加白色边框，为焦点图像添加灰色边框。我知道如何根据不同的状态改变图像。我想问你有什么工具可以在我的图像周围放置白色或灰色边框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:13:35.570

使用选择器将此文件保存在 drawable/click.xml

```
 <?xml version="1.0" encoding="utf-8"?>
       <selector xmlns:android="http://schemas.android.com/apk/res/android" >
     <item android:state_pressed="false" android:drawable="@drawable/notPressedImage ></item>
     <item android:state_pressed="true" android:drawable="@drawable/PressedImage" ></item>

     </selector> 
```

使用 click.xml (click) 作为按钮源...

# delphi - E_ADS_SCHEMA_VIOLATION

> ID：11187184
> 
> 赞同：1
> 
> 时间：2012-06-25T10:03:45.753
> 
> 标签：delphi, active-directory

域 2008 R2，DC。行政人员。DelphiXe2.

我使用 ADOConnection1.SQL 获取用户信息：

从 'LDAP://dc=ru/dc=mydomain/OU= 中选择 extensionAttribute1、extensionAttribute2、cn、sn、givenname、displayName、sAMAccountName、userPrincipalName、mail、标题、电话号码、公司、部门、描述、objectSid、physicalDeliveryOfficeName、userAccountControl User' where objectCategory = 'person' and objectClass='user' and userAccountControl<>514 and userAccountControl<>546 按名称排序

一切正常。我把新用户：

```
Uses ActiveDs_TLB, ActiveX, ComObj;

..
var  Usr: IADsUser;  Comp: IADsContainer;
begin
try
CoInitialize(nil);
Comp:=GetObject('WinNT://localhost') as IADsContainer;
Usr:=comp.Create('user','Koko') as IADsUser;
usr.SetPassword('Fa123456789');
// usr.FirstName:='Pups';
Usr.SetInfo;
except ..
end;
end; 
```

问题：

1.  当我添加新用户时，上面的代码正常工作。但是，如果我尝试添加什么或属性，例如 FirstName (unRem usr.FirstName)，我会收到错误 E_ADS_SCHEMA_VIOLATION。如何治疗？
2.  提示，如通过属性 Usr:IADsUser；更改扩展属性，例如“extensionAttribute1”？
3.  是否可以通过查询ADOConnection1.SQL 的方式添加新用户或更改指定用户的属性？

**或者如何正确地在活动目录中添加具有所有属性的用户？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:39:10.363

创建用户后首先调用 SetInfo，然后再设置密码。

# css - 关于字体加载问题

> ID：11187187
> 
> 赞同：-2
> 
> 时间：2012-06-25T10:03:57.297
> 
> 标签：css

我的网站有一个问题，即字体没有首先加载我不知道为什么字体加载速度很慢我使用@fontface 字体查看[http://www.yellowandred.in/newTest/jobs.php](http://www.yellowandred.in/newTest/jobs.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:37:33.370

检查我认为它没有正确链接的字体的路径......

字体路径：-

[http://www.yellowandred.in/newTest/fonts/Avenir%20LT%20input65%20Medium.ttf](http://www.yellowandred.in/newTest/fonts/Avenir%20LT%20input65%20Medium.ttf)

[http://www.yellowandred.in/newTest/fonts/Neutura%20Light_0.otf](http://www.yellowandred.in/newTest/fonts/Neutura%20Light_0.otf)

我推荐使用字体生成器：-**[字体生成器](http://www.fontsquirrel.com/fontface/generator)**

或使用**[谷歌网络字体](http://www.google.com/webfonts)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:19:32.100

谢谢**SaurabhLP**字体面部生成器工作代码：-

* * *

```
@font-face {
font-family: 'UniversLTStd47CnLtBold';
src: url('../fonts/universltstd-boldcn_0-webfont.eot');
src: url('../fonts/universltstd-boldcn_0-webfont.eot?#iefix') format('embedded-opentype'),
     url('../fonts/universltstd-boldcn_0-webfont.woff') format('woff'),
     url('../fonts/universltstd-boldcn_0-webfont.ttf') format('truetype'),
     url('../fonts/universltstd-boldcn_0-webfont.svg#UniversLTStd47CnLtBold') format('svg');
font-weight: normal;
font-style: normal; 
```

}

# java - 带有子查询的 JPA 条件查询

> ID：11187188
> 
> 赞同：1
> 
> 时间：2012-06-25T10:04:06.303
> 
> 标签：java, jpa-2.0

我想知道是否可以使用 jpa 2.0 标准 api 来表达以下查询。

```
simple_table:
user_name(varchar),
bytes_total(bigint),
time_total(bigint)

>select
   user_name, 
   sum(bytes_total),
   sum(bytes_total) * 100 / (select sum(bytes_total) from simple_table),
   sum(time_total),
   sum(time_total) * 100 / (select sum(time_total) from simple_table)
from simple_table
group by user_name 
```

除了两个子查询外，我一切正常。我想知道这是否可能。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:52:49.740

那是做不到的。子查询不能在 SELECT 子句中使用。JPQL 查询也有同样的限制。在 JPA 2.0 规范中，这表示如下：

> 子查询可以用在 WHERE 和 HAVING 子句中。

# reporting-services - Symfony2 - 对外部内容列表的访问权限

> ID：11187193
> 
> 赞同：0
> 
> 时间：2012-06-25T10:04:24.873
> 
> 标签：reporting-services, symfony, acl

symfony 新手。

我正在设计一个报告门户。报告从外部来源 (SSRS) 获取。

我从这个来源得到一个文件夹和报告树（这个树可以改变）。

我需要让用户能够分配角色访问此动态树的某些节点。

*   我可以为此目的使用 ACL 吗？
*   我已经在我的项目中使用 Sonata，也许我可以用它来存储安全性。
*   我能否指出实现这个动态外部树访问权限管理接口的正确方向？

（如果不存在，不要求完整的解决方案，但我应该在这里使用的 SF2 组件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T13:22:37.100

我最终将每个节点的访问权限存储到了配置文件中：

```
#app/config/config.yml
parameters:
    tree_access: 
        '/path/to/ssrs/node1': ['ROLE1']
        '/path/to/ssrs/node2': ['ROLE2', 'ROLE4']
        '/path/to/ssrs/node3': ['ROLE3'] 
```

并创建了一个服务，该服务根据 security_context 返回具有已解析权限的报告树。

不确定这是不是好方法，但因为这里的社区似乎很活跃......

# javascript - 改变多个元素的样式

> ID：11187195
> 
> 赞同：6
> 
> 时间：2012-06-25T10:04:32.483
> 
> 标签：javascript, jquery

我正在尝试创建一个循环（或使用`.each`）来更改`style:display`许多 DOM 元素的属性。我最初的想法是用来`getElementsByName`选择我命名的所有元素`ptext1`：

```
<p id="ptext0"name="ptext">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext1"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext2"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext3"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext4"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext5"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
<p id="ptext6"name="ptext1">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> 
```

使用

```
 var TextElements = document.getElementsByName("ptext1"); 
```

使用名称创建所有元素的对象/数组`ptext1`

但我无法让该方法正常工作，所以我转到`.each`.

两个都

```
$.each(TextElements, function (index) {
    this.style.display="none";
}); 
```

和

```
$('td[name=ptext1]').each(function (index) {
    this.style.display="block";
}); 
```

似乎无法正常工作（我一直在测试它是否使用警报运行）。

现在，如果有人能看到我的错误在哪里或提出更好的方法，我会全神贯注。这应该是一个简单的操作，但由于某种原因，我每次尝试都会失败。

编辑： `$('p[name=ptext1]').hide()`并且`$('p[name=ptext1]').show()` 正在工作，除了 .hide() 还隐藏了我想隐藏的行上方，

```
<p id="ptext0"name="ptext">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        </p> 
```

每行都有一个不同的 id 标签，但我试图使用名称标签来跟踪我想隐藏哪些，但应该保留的行 (name="ptext") 也会隐藏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T10:06:27.197

你为什么不简单地使用：

```
$('p[name="ptext1"]').css( 'display', 'none');// you can use block... 
```

如果要保留显示的行，请使用以下命令排除该行`.not()`：

```
$('p[name="ptext1"]').not('#ptext3').css( 'display', 'none');// you can use block... 
```

[http://jsfiddle.net/4JCvt/](http://jsfiddle.net/4JCvt/)

如果你只想使用 vanilla JavaScript，你可以这样做：

```
var TextElements = document.getElementsByName("ptext1");

for (var i = 0, max = TextElements.length; i < max; i++) {
    TextElements[i].style.display = "none";
} 
```

[http://jsfiddle.net/4JCvt/2/](http://jsfiddle.net/4JCvt/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-04T10:24:51.703

将此与 JQuery 一起使用：

```
$("[name='ptext1']").css("display", "value");
//change value to the display value you want
//$("[name='ptext1']").css("display", "block"); 
```

纯 JavaScript：

```
var elements = document.getElementsByName("ptext1");
for (var i = 0; i < elements.length; i++) {
 elements[i].style.display = "value";
}
//also change value to display value wanted. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:08:21.360

这将起作用

```
jQuery("*[name$='ptext1']").css( 'display', 'block'); 
```

或者

```
jQuery("*[name$='ptext1']").css( 'display', 'none'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-17T00:19:25.140

这很简单，并且适用于 IE8。只需将所有`<p>`元素都`<div>`命名为“myDiv”

```
function myFunction() {
    var x = document.getElementById("myDIV");
    var y = x.getElementsByTagName("P");
    var i;
    for (i = 0; i < y.length; i++) {
        y[i].style.display="none";    }
} 
```

*   如果要更改 中的所有 ("*") 元素，请`<div>`使用：

    ```
    var y = x.getElementsByTagName("*"); 
    ```

*   如果要更改 中的第二个`<P>`元素，请`<div>`使用：

    ```
    x.getElementsByTagName("p")[1].style.backgroundColor = "red"; 
    ```

它类似于数组。

# jquery - 淡入淡出在页面上同时发生

> ID：11187198
> 
> 赞同：0
> 
> 时间：2012-06-25T10:04:44.123
> 
> 标签：jquery

我有一个 jquery animate 函数，可以在鼠标悬停/退出时淡入淡出两个 div。

但是，我需要同时执行淡入和淡出——目前第一个 div 淡入，然后第二个 div 淡出——我需要这两个同时发生。当前代码如下：

```
var showElements = function(){
    $('#hover-advanced').animate({opacity: "1.0"}, 300),$('#hover-standard').animate({opacity: "0.3"}, 300);

} 
```

有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:09:07.383

animate() 函数有一个队列选项...使动画看起来好像它们同时完成一样为假-

```
var showElements = function(){
    $('#hover-advanced').animate({opacity: "1.0"}, {duration: 300, queue: false}),$('#hover-standard').animate({opacity: "0.3"}, {duration: 300, queue: false});
} 
```

jQuery 动画（）文档 - [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:23:19.463

您的动画*确实*同时运行。它们似乎只是一个接一个地发生，因为我们对不透明度的感知与不透明度的值不是线性的。当另一个元素已经开始褪色时，我们根本看不到使可见的元素不是完全不透明的。

如果您使用更长的动画时间，您会看到它们实际上是同时运行的。

您可以尝试使用`linear`缓动而不是默认`swing`缓动，看看它是否看起来更好：

```
$('#hover-advanced').animate({opacity: "1.0"}, 300, "linear");
$('#hover-standard').animate({opacity: "0"}, 300, "linear"); 
```

另一种选择是使动画*不*同时运行。如果您为可见的动画添加延迟，它们*似乎*会同时运行：

```
$('#hover-advanced').delay(100).animate({opacity: "1.0"}, 300);
$('#hover-standard').animate({opacity: "0"}, 300); 
```

# iphone - 自我的目标C ARC等效？

> ID：11187200
> 
> 赞同：0
> 
> 时间：2012-06-25T10:04:51.423
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, xcode4.3

我可以在启用 ARC 的项目中代替 self 的等效关键字是什么？例如：-`[self mymethod];` 此方法调用的 ARC 等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:08:13.240

我不太明白？为什么 ARC 应该有不同的方法调用语法？它是一种自动内存管理，在大多数情况下您不需要使用保留/释放，仅此而已。所以它看起来像这样：

```
[self mymethod]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:09:49.800

在 ARC(Automatic Reference Counting) 中，你不需要释放或保留。它与调用方法无关！

ARC - Automatic Reference Counting 实现了 Objective-C 对象和块的自动内存管理，将程序员从显式插入保留和释放的需要中解放出来。由于这是在编译时处理的，因此不需要收集器进程不断清除内存并删除未引用的对象。

为了调用一个方法，你仍然这样做：`[self mymethod];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:14:25.187

还是一样

```
[self myMethod]; 
```

但是在 ARC 环境 IIRC 中，您需要这样做：（我不知道这是否是您问题的来源，但是当我第一次迁移到 ARC 时，如果我不这样做，我会收到编译错误这）。

```
@interface myController()
- (void)myMethod; // you need to declare the method here, if you haven't declared it on the .h
@end

@implementation

- (void)viewDidLoad
{
  [super viewDidLoad];
  [self myMethod];
}

- (void)myMethod
{
  NSLog(@"!");
}

@end 
```

希望这有帮助

# javascript - 将图像切成小块 Python 或 JavaScript

> ID：11187214
> 
> 赞同：0
> 
> 时间：2012-06-25T10:05:55.050
> 
> 标签：javascript, python, image-processing

有没有办法使用 JavaScript 将图像切割成更小的部分？比如，如果用户点击一个按钮，图像（例如初始尺寸为 100x100）将被切割成 10 个 10x10 的块，如果他们点击更多，这些小块也会被切割成越来越小的块. 所以它是以递归方式调用的相同操作。是否有任何 JavaScript 图像处理库或任何东西？或者是否可以使用 Python 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:38:51.870

您可能想查看[ImageMagick](http://www.imagemagick.org/script/command-line-options.php#crop)（不，它不是 JavaScript）或[Python Imaging Library中的](http://effbot.org/imagingbook/image.htm)**裁剪**函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:14:48.090

正如克劳斯所提到的，ImageMagick 用于 python 和 javascript，请尝试查看画布； [https://developer.mozilla.org/en/Canvas_tutorial/Using_images](https://developer.mozilla.org/en/Canvas_tutorial/Using_images)有一个关于切片图像的部分

# java - 无法在 SQL Server 中插入查询

> ID：11187216
> 
> 赞同：0
> 
> 时间：2012-06-25T10:06:06.460
> 
> 标签：java, sql, sql-server

我在 MS SQL 服务器中遇到了一些奇怪的事情。我的数据库中有两个表：“LogAnalyzer”

1> 日志数据

2> 测试日志数据

LogData 包含大约 9200192 行和 testLogdata 大约 1000 行。

当我尝试在 LogData 中插入一行时，它花了大约 10 分钟但仍然没有插入它.. 它只是显示正在执行查询

当我尝试在 testLogData 中插入一行时，它立即完成了。

即使当我通过 Java 代码连接数据库时，它的行为也是一样的，并且我已经正确关闭了连接（我认为）......

重新启动 SQL 服务器后一切正常。我不知道为什么会这样。因为到目前为止一切正常。

请任何人提出造成这种情况的原因。我不认为它是表的大小，因为它在重新启动后工作正常。（立即插入查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:57:00.313

> > 请任何人提出造成这种情况的原因。

一个可能的原因是您的连接被另一个连接阻止，该连接在被阻止的连接试图访问的表上打开了事务。

现在 SQL Server 已重新启动，您无法执行任何诊断来查找原因，但如果再次发生，您可以运行 sp_who2 以查看连接列表并检查 BlkBy 列以查看您的连接是否被阻止。如果您的连接被阻塞，那么您可以获取阻塞进程的 SPID 并使用 kill 终止阻塞进程。

# c# - 检测鼠标点击在dataGridView中选择一行

> ID：11187227
> 
> 赞同：0
> 
> 时间：2012-06-25T10:06:38.233
> 
> 标签：c#, winforms, events, datagridview, mouseclick-event

我无法让我的应用程序正常工作。我正在尝试用鼠标在 datagridview 中选择一行。我需要保存该行的索引以允许我在选定的行中导航。

我一直在查看 DataGridView.CellMouseClick 事件（[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellmouseclick.aspx)）但我无法确保事件处理程序与 CellMouseClick 事件相关联。

到目前为止，我的代码很简单，我只是想看看它是否检测到鼠标点击：

```
 public event DataGridViewCellMouseEventHandler CellMouseClick;

    private void DataGridView1_CellMouseClick(Object sender, DataGridViewCellMouseEventArgs e)
    {
        MessageBox.Show("Mouse clicked in the datagridview!");
    } 
```

谁能指出我可能出错的地方。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:11:55.177

您需要“[连接”](http://sharpertutorials.com/basics-of-windows-forms-applications/) [事件](http://www.c-sharpcorner.com/UploadFile/dsandor/EventsLesson111102005000618AM/EventsLesson1.aspx)。

如果您的 DataGridView 称为 DataGridView1，那么您需要在表单的构造函数、设计器（如果您通过设计器添加事件处理程序）或 Load 事件中使用以下代码行：

```
DataGridView1.CellMouseClick += DataGridView1_CellMouseClick; 
```

这会将代码中的事件处理程序附加到事件。

您当前的示例如下所示：

```
 public event DataGridViewCellMouseEventHandler CellMouseClick;

    private void DataGridView1_CellMouseClick(Object sender, DataGridViewCellMouseEventArgs e)
    {
        MessageBox.Show("Mouse clicked in the datagridview!");
    } 
```

没有必要重新声明事件 ( `public event DataGridViewCellMouseEventHandler CellMouseClick;`)，除非您正在构建自己的用户控件来承载 DataGridView 并且您实际上想要[“包装”或“重新广播”该](https://stackoverflow.com/questions/943171/expose-and-raise-event-of-a-child-control-in-a-usercontrol-in-c-sharp)事件。

# android - leptonica 用于在 android 中增强 tesseract ocr

> ID：11187236
> 
> 赞同：6
> 
> 时间：2012-06-25T10:07:10.900
> 
> 标签：android, ocr, tesseract

我正在开发一个 android OCR 项目并决定使用 tesseract 但我的结果很差。我发现 leptonica 具有相当好的功能，可以帮助提高结果，但我找不到任何关于如何在 android 中使用它的示例或文档，只有 cpp api 的文档，谁能帮我找到任何资源可以帮忙，提前谢谢。

# php - 使用socket io是否意味着放弃PHP和apache？

> ID：11187238
> 
> 赞同：-4
> 
> 时间：2012-06-25T10:07:17.677
> 
> 标签：php, javascript, apache, socket.io

所以我开始使用 Node JS 和 socket io 来构建快速稳定的实时 Web 应用程序（我对这些应用程序非常陌生）。问题是到目前为止我一直在使用 LAMP，我认为我还没有准备好放弃 apache 和 php 来完全使用 node js 开发一个网站。

谁能告诉我将socket io与apache集成的标准结构是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:10:19.197

对于任何 Socket.IO Web 应用程序，您仍然需要：

1.  HTTP 服务器
2.  一个 Socket.IO 服务器

Node.js 可以做到这两点，但*不能*提供 PHP 内容。

Apache*只能*做 HTTP/PHP 部分。

混合搭配是完全可能的，但是否合适由您决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:14:10.413

您可以使用不同端口在同一服务器上使用多种技术，而无需进一步配置。

但是，如果您想在同一个端口（可能是 80）上拥有 PHP**和**node.js 应用程序，则需要一个代理。

在端口 80 上使用 node.s 和 node-http-proxy 模块也可以像 websockets 一样使用。

我最近正在寻找这种设置的解决方案，最后得到了我在这里写下的内容：http: [//nerdpress.org/2012/04/20/hosting-multiple-express-node-js-apps-on-port -80/](http://nerdpress.org/2012/04/20/hosting-multiple-express-node-js-apps-on-port-80/)

# sas - 从 Access MDB 导入时 PC 文件服务器的可变性能

> ID：11187240
> 
> 赞同：0
> 
> 时间：2012-06-25T10:07:21.810
> 
> 标签：sas

我有一些在企业指南中运行的代码（SAS Enterprise 构建，本地 Windows，Unix 服务器），它通过本地安装的 PC 文件服务器导入一个大表。它对我来说运行良好，但对系统测试人员来说速度很慢。

当我在我的 Windows PC 上使用他的 SAS 身份时，代码有效；但是当我在他的机器上使用我的 SAS 身份时，它没有，所以这似乎是本地机器的问题。我们有相同版本的 EG（安装相同的修补程序）连接到相同的服务器（具有相同的角色）在同一个项目中运行相同的代码，连接到同一个 Access 数据库。

即使是关于接下来要测试什么的建议也将不胜感激！

```
libname ACCESS_DB pcfiles path="&db_path"
    server=&_CLIENTMACHINE
    port=9621;

data permanent.&output_table (keep=[lots of vars]);
    format [lots of vars];
    length [lots of vars];
    set ACCESS_DB.&source_table (rename=([some awkward vars])); 
    if [var]=[value];
    [build some new vars, nothing scary];
;
run; 
```

*附录*PC 文件服务器在这两种情况下都运行在运行 EG 项目的同一台机器上——我们都安装了相同的版本。&db_path 是 Access 数据库的位置 - 在两个用户都可以访问的网络文件存储上（事实上，两个用户都可以在合理的时间内检索其他较小的表）。该服务器由 IT 管理，而不是我们作为企业可以安装软件的服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:13:31.287

解决您的问题需要更多详细信息，最好通过与 SAS 技术支持对话解决。“在线票”表格在[这里，](http://support.sas.com/ctx/supportform//createForm)或者您可以通过电话给他们打电话。

例如，PCFILES 服务器是否在您的机器和测试人员的机器上本地运行？如果是，那么 &db_path 是否在网络文件服务器上引用了该文件，并且您的测试人员是否具有类似的访问权限（意味着你们俩都可以通过相同的方式访问它）？您是否考虑过在文件服务器上而不是在本地 PC 上安装 PCFILE 服务器？我认为，对于这样的论坛来说，问题太多了。但我可能是错的（以前发生过）；也许其他人会有一个很好的答案。

# android - 共享意图不适用于图像？

> ID：11187242
> 
> 赞同：0
> 
> 时间：2012-06-25T10:07:27.263
> 
> 标签：android, android-intent, share

```
private void createShareIntent() {
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    String file = "/mnt/sdcard/9gag_4155804.jpg";
    File f = new File(file);
    if (!f.exists()) {
        Toast.makeText(getApplicationContext(), "File doesnt exists", Toast.LENGTH_SHORT).show();
        return;
    } else {
        Toast.makeText(getApplicationContext(), "We can go on!!!", Toast.LENGTH_SHORT).show();
    }
    Uri uri = Uri.fromFile(f);
    shareIntent.setType("image/jpeg");
    shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
    shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    startActivity(Intent.createChooser(shareIntent, "How do you want to share?"));
} 
```

该文件存在，我没有收到 Toast。调用此方法时，许多意图都是列表。（Google Drive、Mail、Plus 等）我点击 Google Plus，它告诉我“并非所有媒体文件都可以附加到帖子中”。使用 Google Drive 或任何其他服务时也会发生同样的情况。我只是无法分享任何图像...

有任何想法吗？

// 编辑我得到 Toast "We can go on!!!"

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-25T10:17:33.907

您是否在清单中定义了意图过滤器。如果不添加这个：

```
 <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType-"image/*"/>
 </intent-filter> 
```

您需要通知 android 系统这是一个隐式意图。

# svn - 在 Jenkins 中配置 Subversion 插件以使用 1.6 工作副本

> ID：11187243
> 
> 赞同：8
> 
> 时间：2012-06-25T10:07:28.730
> 
> 标签：svn, jenkins, svnkit

我使用 Jenkins Subversion 插件在 Jenkins 中签出工作副本。一个单独的 SVN 客户端用于从该工作副本中提取一些信息（使用了哪个分支，哪个修订版等）。

Subversion 插件创建一个 1.7 工作副本，其他客户端无法处理（它是 1.6）。**有没有办法配置 Subversion 插件来签出 1.6 工作副本？**

这个问题列出了一种配置 Subversion 插件的方法：[Hudson does not checkout using symlinks when using SVN (Subversion)](https://stackoverflow.com/questions/3417869/hudson-doesnt-checkout-using-symlinks-when-using-svn-subversion) 所以我开始寻找所有配置选项，并最终在这个页面上：[http ://svnkit.com/kb/ user-guide-config-settings.html](http://svnkit.com/kb/user-guide-config-settings.html)，但它确实不完整。

我还发现了这个：[http](http://wiki.svnkit.com/SVNKit_FAQ#Q:_Can_the_current_SVNKit_version_be_forced_to_create_pre-1.5_format_working_copies.3F) ://wiki.svnkit.com/SVNKit_FAQ#Q:_Can_the_current_SVNKit_version_be_forced_to_create_pre-1.5_format_working_copies.3F ，除了新目录忽略该属性。

我不能使用 Jenkins 变量来提取分支和修订信息，因为相同的脚本也必须能够在 Jenkins 之外运行。更新单独的客户端也是不可能的，因为我们正在构建系统上使用“冻结”软件。如果一切都失败了，我可以降级 Jenkins，但这不是首选。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T10:55:06.653

在主 Jenkins 配置页面 ( `http:/<jenkins_server>/configure`) 上搜索*Subversion Workspace Version*并将其设置为适当的值 (1.6)。

# localhost - Wamp 在 http://localhost 上没有显示任何东西

> ID：11187247
> 
> 赞同：1
> 
> 时间：2012-06-25T10:07:46.053
> 
> 标签：localhost, wampserver

我已经在 Windows 7 上安装了 wamp 服务器。它说当我输入**http://localhost/phpmyadmin时****您没有访问该页面的权限，但是当我输入****127.0.0.1/phpmyadmin**时做得很好。

 ****我很好，但只是想知道这是一些窗口限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:12:49.793

您需要停止 IIS 服务

如果您希望两者都运行 - [http://www.programmerfish.com/how-to-run-wamp-server-parallel-with-iis-7-on-windows/](http://www.programmerfish.com/how-to-run-wamp-server-parallel-with-iis-7-on-windows/)****

# macos - Unix命令在所有文件中搜索文本字符串

> ID：11187248
> 
> 赞同：8
> 
> 时间：2012-06-25T10:07:51.337
> 
> 标签：macos, bash, unix, find, grep

如何让 unix 在所有文件中搜索字符串“hello”？

我尝试了以下方法，但它不起作用：

```
sudo grep "hello" | find / -name "*" 2>/dev/null 
```

有没有人有任何其他想法？

谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-25T10:09:00.077

也许这个？

```
sudo cd / && grep -rn "hello" * 
```

编辑：当然不需要'n'选项-它只是显示行号，我觉得很好。'r' 选项告诉 grep 在目录中执行递归搜索。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T11:10:56.917

采用

```
grep -r 'pattern' / 
```

如果您`grep`支持`-r`，（GNU支持`grep`）；如果不使用

```
find / -type f -exec grep 'pattern' {} + 
```

如果您`find`支持`-exec`，`+`否则使用

```
find / -type f -printf '%p\0' | xargs -0 grep 'pattern' 
```

如果您的`find`支持`-printf`和您的`xargs`支持`-0`，或

```
find / -type f -print0 | xargs -0 grep 'pattern' 
```

如果你的`find`支持只是`-print0`和你的`xargs`支持`-0`。在所有其他情况下

```
find / -type f | xargs grep 'pattern' 
```

这是最大程度的兼容，但需要注意的是某些不寻常的文件名将无法被 grep 和精心制作的文件名可能会带来安全风险。

请注意，您必须是 root 才能确保搜索所有文件，并且搜索将区分大小写，除非您添加`-i`到`grep`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:15:59.560

这？

```
find . -exec grep -H "hello" {} \; 
```

# vb.net - VB.NET 中是否有任何 IEnumerable 的 Count 方法？

> ID：11187249
> 
> 赞同：1
> 
> 时间：2012-06-25T10:07:51.920
> 
> 标签：vb.net, count, ienumerable

在 C# 中，如果我有以下对象：

```
IEnumerable<Product> products; 
```

如果我想得到它包含多少元素，我使用：

```
int productCount = products.Count(); 
```

但看起来VB.NET中没有这样的方法。有人知道如何在 VB.NET 中实现相同的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:11:02.103

`Count`在 VB.NET 中可用：

```
 Dim x As New List(Of String)
   Dim count As Integer

   x.Add("Item 1")
   x.Add("Item 2")

   count = x.Count 
```

[http://msdn.microsoft.com/en-us/library/bb535181.aspx#Y0](http://msdn.microsoft.com/en-us/library/bb535181.aspx#Y0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:41:39.473

在更高版本的 .net 中，有一个名为`Count()`associated with的扩展方法，如果底层枚举器支持其中任何一个`IEnumerable<T>`，它将使用`IList<T>.Count()`或`ICollection.Count()`，如果不支持则迭代地计算项目。

一个重要的警告并不总是考虑到这一点：虽然 an`IEnumerable<DerivedType>`通常可以替代 an `IEnumerable<BaseType>`，但实现`IList<DerivedType>`但未实现的类型`ICollection`在用作 an 时可能会被有效计数`IEnumerable<DerivedType>`，但在强制转换为时不会被有效计数`IEnumerable<BaseType>`（即使该类将支持一个`IList<DerivedType>.Count()`方法将返回正确的结果，系统不会寻找它——它会寻找，`IList<BaseType>`而不是实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T14:56:50.927

一般来说，IEnumerable 不会有 Count，除非底层集合支持（例如 List）。

想一想通用 IEnumerable 实现 Count 方法需要发生什么。由于 IEnumerable 仅在请求数据时执行，因此为了执行计数，它需要遍历直到结束，以跟踪它找到了多少元素。

通常，此迭代将结束，但您可以设置一个永远循环的查询。使用 IEnumerable 计数要么在时间上非常昂贵，要么很危险。

# c# - asp.net 中的 64 位与 32 位机器

> ID：11187252
> 
> 赞同：0
> 
> 时间：2012-06-25T10:08:10.467
> 
> 标签：c#, asp.net, 64-bit, 32bit-64bit, 32-bit

我们在 VS2008 中在 64 位机器上开发了一个应用程序。我们需要托管到 32 位服务器中。它是否会在该服务器中工作？以前我们遇到一个问题，32位开发不能在64位服务器上运行，它不支持一些程序集，所以我们在64位机器上构建并托管在服务器上。这背后有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:11:07.190

在您的应用程序池设置中，您需要启用 32 位应用程序，然后您的应用程序才能运行

这篇[博客文章](http://blogs.msdn.com/b/rakkimk/archive/2007/11/03/iis7-running-32-bit-and-64-bit-asp-net-versions-at-the-same-time-on-different-worker-processes.aspx)更详细地解释了如何做到这一点

# python - 在python中，将child追加到root.children(list)，child.children(list)改变了吗？

> ID：11187255
> 
> 赞同：2
> 
> 时间：2012-06-25T10:08:14.790
> 
> 标签：python

代码：

```
class Node:
    def __init__(self, key, children=[]):
        self.key = key
        self.children = children

    def __repr__(self):
        return self.key 
```

执行：

```
root = Node("root")
child = Node("child")
root.children.append(child)
print child.children
print root.children[0].children 
```

结果：

```
[child]
[child] 
```

这真的很奇怪，为什么？

Python 的版本是 2.7.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:17:06.570

您不应该使用可变对象作为参数的默认值（除非您确切知道自己在做什么）。请参阅[这篇文章](http://eli.thegreenplace.net/2009/01/16/python-insight-beware-of-mutable-default-values-for-arguments/)以获得解释。

而是使用：

```
class Node:
    def __init__(self, key, children=None):
        self.key = key
        self.children = children if children is not None or [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:19:19.840

```
class Node:
    def __init__(self, key,children): # don't use children =[] here, it has some side effects, see the example below
        self.key = key
        self.children =children

    def __repr__(self):
        return self.key

root = Node("root",[])
child = Node("child",[])
root.children.append(child)
print root.children
print root.children[0].key 
```

**输出：**

```
[child]
child 
```

**例子：**

```
def example(lis=[]):
    lis.append(1) #lis persists value
    print(lis)
example()
example()
example() 
```

输出 ：

```
[1]
[1, 1]
[1, 1, 1] 
```

# c# - 在 c#(wpf) 中不工作网格(视图)

> ID：11187256
> 
> 赞同：0
> 
> 时间：2012-06-25T10:08:17.820
> 
> 标签：c#, wpf

表已创建，但行是空的，为什么？

```
MySqlConnection conn = new MySqlConnection("...");
conn.Open();
MySqlCommand cmd = new MySqlCommand("select id,id_user,status,id_delivery_method,delivery_method,id_payment_method,payment_method,payment_info,user_name,user_phone from `request`", conn);
DataTable dt = new DataTable();
dt.Load(cmd.ExecuteReader());
dataGrid1.ItemsSource = dt.DefaultView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:57:33.103

尝试自己设置`AutoGenerateColums = false`和定义列：

在 XAML 中：

```
<DataGrid ... AutoGenerateColums="false">
    <DataGrid.Columns><!-- Your columns --></DataGrid.Columns>
</DataGrid> 
```

在代码隐藏中：

```
yourDatagrid.AutoGenerateColumns = false; 
```

# visual-studio-2010 - TFS 分支和合并

> ID：11187261
> 
> 赞同：0
> 
> 时间：2012-06-25T10:08:52.320
> 
> 标签：visual-studio-2010, tfs

我正在做一个项目，我正在使用 TFS 作为源代码控制，我正在考虑使用 TFS 分支，

现在我达到了目前的情况：

1.  我已经发布了该项目的测试版。
2.  我希望有一个团队对设计和代码进行重构。
3.  我想要一个不同的团队来添加修复和解决小问题，并可能在 beta 版本中添加一些小功能。

我认为重构将对项目进行大量更改，可能会添加新的类项目，并对代码进行重大更改，所以我有点认为合并将是一个大问题。

我不知道我应该使用哪种方案，我[在这里](http://vsarbranchingguide.codeplex.com/)阅读了一些关于分支的信息，但我有点犹豫要不要使用它，你们怎么看？你会在这种情况下使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:05:21.763

我认为合并不会有任何问题。[你可以在这里](http://intovsts.files.wordpress.com/2010/06/techdays2010_branchingandmergingwithtfs2010.pdf)找到一些分支示例

# javascript - 在javascript中处理样式

> ID：11187265
> 
> 赞同：-3
> 
> 时间：2012-06-25T10:09:03.230
> 
> 标签：javascript

我有 json，它以如下所示的格式返回

```
<p>jellp</p> 
```

如何使用 javascript 应用样式？现在我正在使用

```
cell.appendChild(document.createTextNode(data['data']['timeline'][i]['content'][j]['title'] )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:13:26.017

`.style.{property}`在任何 DOM 节点上使用。例如，这会将段落中的文本着色为红色：

```
var p = document.createTextNode(data['data']['timeline'][i]['content'][j]['title']);
p.style.color = "red";
cell.appendChild(p); 
```

# android - android中的OpenCV错误

> ID：11187272
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:09:23.383
> 
> 标签：android, opencv, android-ndk, java-native-interface

我已经成功编译了opencv测试示例（videoemulation），但是在模拟器上运行它给了我一个奇怪的错误：

```
 06-25 15:36:34.526: D/dalvikvm(621): Trying to load lib /data/data/org.siprop.opencv  /lib/libopencv.so 0x405139b0
 06-25 15:36:34.566: D/dalvikvm(621): Added shared lib /data/data/org.siprop.opencv/lib/libopencv.so 0x405139b0
 06-25 15:36:34.566: D/dalvikvm(621): No JNI_OnLoad found in /data/data/org.siprop.opencv/lib/libopencv.so 0x405139b0, skipping init
 06-25 15:36:34.619: D/VideoEmulation(621): mOpenCVAction = TRACK_SINGLE_FACE
 06-25 15:36:34.627: D/VideoEmulation(621): onResume
 06-25 15:36:34.627: D/VideoEmulation(621): initFaceDetect
 06-25 15:36:34.637: E/CVJNI(621): Error loading cascade.
 06-25 15:36:34.637: D/VideoEmulation(621): Failed to initialize face detection! 
```

是不是我没有加载功能。请指导我。

这是 OpenCV Java 文件：

```
 public class OpenCV {
       static {
       System.loadLibrary("opencv");
  }

public native byte[] findContours(int[] data, int w, int h);
public native boolean createSocketCapture(String address, String port, int width, int height);
public native void releaseSocketCapture();
public native boolean grabSourceImageFromCapture();
public native byte[] getSourceImage();
public native boolean setSourceImage(int[] data, int w, int h);
public native boolean initFaceDetection(String cascadePath);
public native void releaseFaceDetection();
public native boolean highlightFaces();
public native Rect[] findAllFaces();
public native Rect findSingleFace();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:20:09.043

确保所有本机 (c++) 函数都在块中：

```
extern "C" {
...
} 
```

# iphone - 在 UIWebview 中检测滑动手势

> ID：11187274
> 
> 赞同：3
> 
> 时间：2012-06-25T10:09:27.737
> 
> 标签：iphone, ipad, uiwebview, uigesturerecognizer, touchesmoved

我是`iPhone`开发人员的新手，

我制作了 epub 阅读器并在我的`webview`

我想要的是，当用户`right swipe gesture`第二次做然后我想导航到新页面时，我不想在用户`right swipe gesture`第一次做任何事情时做任何事情。

`UISwipeGestureRecognizer *swipeRight`

有没有类似的方法，

```
if(swipeRight.touch.count > 2)
{
  // do this
} 
```

***任何帮助都会得到帮助。***

**提前致谢 ！**

**编辑**

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{
    float scrollViewHeight = scrollView.frame.size.height;
    float scrollContentSizeHeight = scrollView.contentSize.height;
    float scrollOffset = scrollView.contentOffset.y;

    if (scrollOffset == 0)
    {
        swipeUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self  action:@selector(swipeLeftAction:)];
        swipeUp.direction = UISwipeGestureRecognizerDirectionUp;
        swipeUp.numberOfTouchesRequired=2;
        swipeUp.delegate = (id<UIGestureRecognizerDelegate>)self;
        swipeUp.cancelsTouchesInView=YES;
        [_webview addGestureRecognizer:swipeUp];  
    }
    else if (scrollOffset + scrollViewHeight == scrollContentSizeHeight)
    {
        swipeDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self  action:@selector(swipeRightAction:)];
        swipeDown.direction = UISwipeGestureRecognizerDirectionDown;
        swipeDown.numberOfTouchesRequired=2;
        swipeDown.delegate = (id<UIGestureRecognizerDelegate>)self;
        swipeDown.cancelsTouchesInView=YES;
        [_webview addGestureRecognizer:swipeDown];

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T18:02:52.083

你可以告诉 UIWebView 的 UIScrollView 它的 UIPanGestureRecognizer 应该只在你自己的 UISwipeGestureRecognizer 失败时触发。

这就是你的做法：

```
UISwipeGestureRecognizer *rightSwipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
UISwipeGestureRecognizer *leftSwipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeGesture:)];
rightSwipeGesture.direction = UISwipeGestureRecognizerDirectionRight;
leftSwipeGesture.direction = UISwipeGestureRecognizerDirectionLeft;
[self.view addGestureRecognizer:rightSwipeGesture];
[self.view addGestureRecognizer:leftSwipeGesture];

[_webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:rightSwipeGesture];
[_webView.scrollView.panGestureRecognizer requireGestureRecognizerToFail:leftSwipeGesture]; 
```

那应该对你有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T10:48:25.157

只需将 UIGestureRecognizer 子类附加到该视图并等待调用...

```
UISwipeGestureRecognizer* rightSwipeRecognizer = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(someAction)];
rightSwipeRecognizer.numberOfTouchesRequired = 2;
rightSwipeRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
rightSwipeRecognizer.cancelsTouchesInView = YES;
[self.webView addGestureRecognizer:rightSwipeRecognizer]; // add in your webviewrightSwipeRecognizer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:18:57.560

```
Try like below it will help you
UISwipeGestureRecognizer *rightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipeHandle:)];
    rightRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
    rightRecognizer.numberOfTouchesRequired = 2;
    [self.view addGestureRecognizer:rightRecognizer];
    [rightRecognizer release]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:44:52.650

我不认为滑动手势为您所针对的行为类型提供支持，但您可以通过执行以下操作轻松完成它：

1.  在第一次滑动时，设置一个标志并启动一个计时器；其余的什么都不做；

2.  在第二次滑动时，

    一种。如果计时器已触发（触发时，计时器重置标志），请按照第 1 点执行。

    湾。是计时器没有触发（标志仍然设置），那么你采取行动并取消计时器。

您可能会想到定义 UISwipeGestureRecognizer 的子类来封装所有这些行为。

# c# - Visual Studio 2012 中缺少 SHA1（和整个 Cryptography 命名空间）

> ID：11187275
> 
> 赞同：7
> 
> 时间：2012-06-25T10:09:30.140
> 
> 标签：c#, visual-studio-2012

我从 MSDN 复制粘贴了这段代码：

```
using System.Security.Cryptography;

byte[] buffer = enc.GetBytes(text);
SHA1CryptoServiceProvider cryptoTransformSHA1 =
            new SHA1CryptoServiceProvider();
string hash = BitConverter.ToString(
            cryptoTransformSHA1.ComputeHash(buffer)).Replace("-", "");

return hash; 
```

但是 VS 说没有这样的`Cryptography`命名空间，因此没有`SHA1CryptoServiceProvider`类。

我究竟做错了什么？

我在 Windows 8 Release Preview 上使用带有 Dreamspark 许可证的 Visual Studio Professional 2012 RC。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:24:23.630

我认为您正在尝试创建 Metro 应用程序？Metro 风格的应用程序不支持`System.Security.Cryptography`命名空间。可在[此处](http://msdn.microsoft.com/en-us/library/windows/apps/br230232%28v=vs.110%29.aspx)找到 Metro 应用程序支持的 .NET API 名称空间的完整列表。

**更新 6 月 29 日**

正如 Guillermo 所指出的，有一个[Windows.Security.Cryptograhy.Core](http://msdn.microsoft.com/en-us/library/windows.security.cryptography.core.aspx)命名空间，其中包含一个[HashAlgorithmProvider](http://msdn.microsoft.com/en-us/library/windows.security.cryptography.core.hashalgorithmprovider.aspx)类，例如可以应用 SHA1 算法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T21:48:46.177

答案是，就像 Anders Gustafsson 指出的那样，在 Metro`System.Security.Cryptography`中不受支持。但是你有`Windows.Security.Cryptography`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:06:09.547

尝试添加`System.Security`到项目的引用中。

您的错误似乎是由缺少参考引起的。

[http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:16:18.447

您的代码需要一个类。看到这个：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha1%28v=vs.110%29](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha1%28v=vs.110%29)

# mongodb - mongoDB distinct 返回多个属性

> ID：11187279
> 
> 赞同：1
> 
> 时间：2012-06-25T10:09:43.810
> 
> 标签：mongodb

有没有办法将 distinct 与另一个命令结合起来，不仅可以打印不同的属性，还可以打印链接到不同属性的属性？

例如，仅打印下表中的 0,foo 和 1,bar。

```
-----------------
|  id  |  name  |
|  0   |  foo   |
|  1   |  bar   |
|  1   |  bar   | 
```

我目前正在使用

```
>db.foo.distinct('id') 
```

返回数据库上的 id 以及使用它来打印数学名称的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T08:28:52.183

你可以试试这个：

```
db.foo.group({key:{'id':1}, initial: {sum:0}, reduce:function(doc,prev){prev.sum += 1}}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T00:48:00.860

您可以使用 MapReduce 完成此操作，如下所示：

```
map = function(){
  emit(this.id+","+this.name, {id: this.id, name: this.name})
}
reduce = function(key, values){
  return {"id": values[0].id, "name": values[0].name};
}
db.mycollection.mapReduce(map, reduce, {out: "myresult_collection"})
db.myresult_collection.find({}, {value: true, _id: false}) 
```

# c++ - UTF-8 解码库

> ID：11187283
> 
> 赞同：3
> 
> 时间：2012-06-25T10:10:09.293
> 
> 标签：c++, string, utf-8, unicode-string

我必须在 Windows MSVC 10 中使用 Unicode UTF-8 的应用程序中进行编码。我知道 UTF-8 编码的字符串每个字符将使用 1 个或 2 个字节。所以，我的问题是：std::string 适合这个吗？如果是，我如何解码字符串？据我了解 std::string 只是一个字节数组，它不提供任何解码逻辑。我怎么知道字符串的逻辑长度？如何从字符串中提取逻辑字符？是否有任何库可以帮助我从字符串中提取逻辑字符？

例如：如果我在 std::string 中有字符串“olé”，我需要知道长度是 3，而不是 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:16:04.627

一个常用的库是 [ICU - International Components for Unicode](http://site.icu-project.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:17:52.323

是的，`std::string`是适当的，但正如您所注意到的，它只对字节起作用，而不是 Unicode 代码点。其中，`std::string`是不透明类型；这不一定是坏事（事实上，它确实有一些优势，请参阅下面的链接以获取信息），但是如果您需要有关字符的信息，则有必要对字符串进行解码。

对于 UTF-8 的实际处理（如有必要），您可以使用[Boost.NoWide](http://cppcms.com/files/nowide/html/)库来解码 UTF-8。

此外，我建议阅读[UTF-8 无处不在的宣言](http://utf8everywhere.org/)，以获取有关使用 UTF-8 与其他 Unicode 转换的一些信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T10:14:35.220

首先，您可能需要调用 mbstowcs() 函数将 UTF-8 字符转换为宽字符。然后，如果您希望结果为 8 位，则如果您有“Unicode”字符（ISO-8859-1 平面之外的字符，也称为拉丁 1），则会丢失数据。

请注意，“Windows”编码与 ISO-8859-1 不是 1 对 1 等价的，但在大多数情况下，ISO-8859-1 是当今人们使用的。

参考：[http ://www.cplusplus.com/reference/clibrary/cstdlib/mbstowcs/](http://www.cplusplus.com/reference/clibrary/cstdlib/mbstowcs/)

好的，如果您只想要字符长度，请使用 mblen() 函数：

```
len = mblen(str.c_str(), str.length()); 
```

附加说明：实现 mblen() 的一种简单方法是计算不在 0x80 和 0xBF 之间的字节数，因为它们是多字节序列的一部分。如果您通过不稳定的串行连接接收 UTF-8 字节序列，这将特别有用。

# javascript - 从远程站点获取数据 - html 表

> ID：11187285
> 
> 赞同：0
> 
> 时间：2012-06-25T10:10:14.647
> 
> 标签：javascript, jquery, html

我想创建一个从网站表（不是数据库表-html 表）获取数据的 html 页面

代码看起来像这样：http: [//jsfiddle.net/wpVtc/](http://jsfiddle.net/wpVtc/)

我尝试使用 jQuery ".find" 但我无法让它工作。

它没有任何类别的 id 。然后，当我得到我只想显示的数据时。

感谢你！

〜斯蒂芬

编辑：数据总是在同一个地方，并且总是以“GB”或“MB”结尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:21:36.267

如果数据总是在同一个位置，你可以使用`.eq(n)`.

因此，如果您的示例是：

```
<table>
<tr>
    <tr> <--- i assume this is wrong
        <td>
            <table>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>...</tr>
                <tr>DATA I WANT</tr> 
```

选择器将是：

```
"table tr td table tr:eq(6)" 
```

见：[http ://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

* * *

另一种解决方案：

```
"table tr td table tr:contains(DATA I WANT)" 
```

请参阅：[http ://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

# c# - 保持字典的 Where() 一致

> ID：11187286
> 
> 赞同：1
> 
> 时间：2012-06-25T10:10:14.950
> 
> 标签：c#, dictionary

> **可能重复：**
> [从 IEnumerable 重新创建字典](https://stackoverflow.com/questions/2636603/recreating-a-dictionary-from-an-ienumerable)

当在类型字典上使用 Where 方法时，`Dictionary<TKey, TValue>`您最终会得到 a `IEnumerable<KeyValuePair<TKey, TSource>>`，这破坏了我在开始时选择的数据类型。我想返回一本字典。

也许我没有使用正确的过滤功能。那么你通常如何从字典中过滤元素呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:05:44.767

[`IDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)实际上延伸`IEnumerable<KeyValuePair<TKey, TValue>>`。这就是为什么您首先可以在 an 上使用 LINQ 运算符的原因`IDictionary<TKey, TValue>`。

但是，LINQ 运算符返回[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)旨在提供[*延迟*执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)，这意味着在您开始迭代`IEnumerable<T>`.

提供的`IEnumerable<T>`实现是通过`IDictionary<TKey, TValue>`接口[`ICollection<T>`（](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://msdn.microsoft.com/en-us/library/92t2ye13.aspx&ei=oKXpT-KLB8aJ6AGI-vmFDQ&usg=AFQjCNH9Rx-AertMm5Z70BoXDKVKjEf7zg&sig2=Y6IFSyLWz1pN1IuQZlZ_cw)其中`T`是 a [`KeyValuePair<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/5tbh8a42.aspx)）来实现的，这意味着如果 LINQ 要返回`IDictionary<TKey, TValue>`而不是`IEnumerable<KeyValuePair<TKey, TValue>>`then 它必须实现列表，从而违反它的原则（因此`IEnumerable<KeyValuePair<TKey, TValue>>`返回值）。

当然，绕过它的方法是调用上的`ToDictionary`扩展方法`Enumerable class`（正如其他人提到的那样），但一点背景故事永远不会受到伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:13:41.227

最后怎么`.ToDictionary()`办？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:13:45.897

您可以使用[Where()](http://msdn.microsoft.com/en-us/library/bb534803.aspx)，然后使用[ToDictionary()](http://msdn.microsoft.com/en-us/library/bb548657.aspx)：

```
var newDict = yourDict.Where(pair => SomePredicateFrom(pair))
                      .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:14:45.753

[`.ToDictionary();`](http://msdn.microsoft.com/en-gb/library/system.linq.enumerable.todictionary.aspx)在您的 LINQ 表达式中使用。

# android - 如何监控 android 客户端上的套接字服务器活动？

> ID：11187290
> 
> 赞同：0
> 
> 时间：2012-06-25T10:10:24.053
> 
> 标签：android, sockets, client

我有 c++ 套接字服务器和 android 客户端。服务器在一段时间后不断地向客户端发送数据。问题是如何在android客户端上实现这个获取数据

```
socket = new Socket("xxx.xxx.xxx.x", xxxx); // I connect
.... socket.getInputStream();               // Get first input stream 
```

如何让它连续接收数据？我试过这样的东西 while(true) { ..socket.getInputStream(); 线程.sleep(...); 没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:46:15.973

请注意，您只需打开一次输入流。然后，如果您`read()`对输入流执行操作，它将阻塞（当然，如果您使用阻塞读取（[阻塞与非阻塞读取](http://www.scottklement.com/rpg/socktut/nonblocking.html)））。

您可以在此处找到有关 java 套接字编程的信息：[链接](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)

您可以在此处找到丢失的 Android 平台上的套接字编程示例：[链接](http://www.google.ro/search?q=socket+example+java&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a#hl=ro&client=firefox-a&hs=SJn&rls=org.mozilla:en-US%3Aofficial&sclient=psy-ab&q=socket+example+android&oq=socket+example+android&aq=f&aqi=g1g-mK3&aql=&gs_l=serp.3..0j0i5i30l3.43615.47561.2.47863.2.2.0.0.0.0.194.368.0j2.2.0...0.0.r5xvdtPy674&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=c33db3914ba08fc&biw=1366&bih=664)

例如：

```
BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
String line = "";
while (true) {
    line = br.readLine(); // at this line, execution will stop until data is received
    System.out.println("The read line is: " + line);
}
br.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:18:19.303

您可以使用此[Webstart 应用程序](http://sockettest.sourceforge.net/)并通过提供您的 IP 地址和端口来创建本地服务器，并且可以在下面的代码中使用相同的 IP 地址和端口作为客户端......！您可以发送和接收消息。是的，在 AndroidManifest 中提供 INTERNET 权限。

**MainActivity.java**

```
 import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Base64;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity {
    Button btnStart, btnSend, disconnect;
    TextView textStatus;
    EditText message, ipAddress, port;
    ImageView image;
    NetworkTask networktask;
    String ip, prt;
    Socket nsocket;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnStart = (Button)findViewById(R.id.btnStart);
        disconnect = (Button)findViewById(R.id.bDisconnect);
        btnSend = (Button)findViewById(R.id.btnSend);
        textStatus = (TextView)findViewById(R.id.textStatus);
        image = (ImageView)findViewById(R.id.ivBit);
        message = (EditText) findViewById(R.id.message);
        ipAddress = (EditText)findViewById(R.id.ipAddress);
        port = (EditText)findViewById(R.id.port);
        btnStart.setOnClickListener(btnStartListener);
        btnSend.setOnClickListener(btnSendListener);
        disconnect.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    nsocket.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

//        networktask = new NetworkTask(ip, prt); //Create initial instance so SendDataToNetwork doesn't throw an error.
    }

    private OnClickListener btnStartListener = new OnClickListener() {
        public void onClick(View v){
            disconnect.setVisibility(View.VISIBLE);
            btnStart.setVisibility(View.GONE);
            ipAddress.setEnabled(false);
            port.setEnabled(false);
            ip = ipAddress.getText().toString();
            prt = port.getText().toString();
            System.out.println("IPADDRESS :::::::" + ip);
            System.out.println("PORT :::::::" + prt);
            networktask = new NetworkTask(ip, prt); //New instance of NetworkTask
            networktask.execute();
        }
    };
    private OnClickListener btnSendListener = new OnClickListener() {
        public void onClick(View v){
            textStatus.setText("Sending Message to AsyncTask.");
            networktask.SendDataToNetwork(message.getText().toString() + "\n");

        }
    };

    public class NetworkTask extends AsyncTask<Void, byte[], Boolean> {
         //Network Socket
        InputStream nis; //Network Input Stream
        OutputStream nos; //Network Output Stream
        String data = ""; //Data Received
        String ip, prt;

        public NetworkTask(String ip, String prt) {
            // TODO Auto-generated constructor stub
            this.ip = ip;
            this.prt = prt;
        }

        @Override
        protected void onPreExecute() {
            Log.i("AsyncTask", "onPreExecute");
        }

        @Override
        protected Boolean doInBackground(Void... params) { //This runs on a different thread
            boolean result = false;
            try {
                Log.i("AsyncTask", "doInBackground: Creating socket");
                SocketAddress sockaddr = new InetSocketAddress(ip, Integer.parseInt(prt)); //192.168.2.102 118.139.161.101
                nsocket = new Socket();
                nsocket.connect(sockaddr, 500); //10 second connection timeout
                if (nsocket.isConnected()) { 

                    nis = nsocket.getInputStream();
                    nos = nsocket.getOutputStream();
                    Log.i("AsyncTask", "doInBackground: Socket created, streams assigned");
                    Log.i("AsyncTask", "doInBackground: Waiting for inital data...");
                    byte[] buffer = new byte[4096];
                    int read = nis.read(buffer, 0, 4096); //This is blocking
                    while(read != -1){
                        byte[] tempdata = new byte[read];
                        System.arraycopy(buffer, 0, tempdata, 0, read);
                        publishProgress(tempdata);
                        Log.i("AsyncTask", "doInBackground: Got some data");
                        read = nis.read(buffer, 0, 4096); //This is blocking
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
                Log.i("AsyncTask", "doInBackground: IOException");
                result = true;
            } catch (Exception e) {
                e.printStackTrace();
                Log.i("AsyncTask", "doInBackground: Exception");
                result = true;
            } finally {
                try {
                    nis.close();
                    nos.close();
                    nsocket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                Log.i("AsyncTask", "doInBackground: Finished");
            }
            return result;
        }

        public void SendDataToNetwork(String cmd) { //You run this from the main thread.
            try {
                if (nsocket.isConnected()) {
                    Log.i("AsyncTask", "SendDataToNetwork: Writing received message to socket");
                    nos.write(cmd.getBytes());
                } else {
                    Log.i("AsyncTask", "SendDataToNetwork: Cannot send message. Socket is closed");
                }
            } catch (Exception e) {
                Log.i("AsyncTask", "SendDataToNetwork: Message send failed. Caught an exception");
            }
        }

        @Override
        protected void onProgressUpdate(byte[]... values) {
            if (values.length > 0) {
                Log.i("AsyncTask", "onProgressUpdate: " + values[0].length + " bytes received.");

                data += new String(values[0]);
                textStatus.setText(data);
                System.out.println("DATA RECEIVED..........." + (data));
            }
        }
        @Override
        protected void onCancelled() {
            Log.i("AsyncTask", "Cancelled.");
            disconnect.setVisibility(View.VISIBLE);
            btnStart.setVisibility(View.GONE);
            ipAddress.setEnabled(true);
            port.setEnabled(true);
        }
        @Override
        protected void onPostExecute(Boolean result) {
            if (result) {
                Log.i("AsyncTask", "onPostExecute: Completed with an Error.");
                textStatus.setText("There was a connection error.");
            } else {
                Log.i("AsyncTask", "onPostExecute: Completed.");
            }
            disconnect.setVisibility(View.GONE);
            btnStart.setVisibility(View.VISIBLE);
            ipAddress.setEnabled(true);
            port.setEnabled(true);
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        networktask.cancel(true); //In case the task is currently running
    }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/ipAddress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:digits="0123456789."
        android:inputType="number" />

    <EditText
        android:id="@+id/port"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:digits="0123456789."
        android:inputType="number" />

    <Button
        android:id="@+id/bDisconnect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="gone"
        android:text="Disconnect" />

    <Button
        android:id="@+id/btnStart"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Start AsyncTask" >
    </Button>

    <EditText
        android:id="@+id/message"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textMultiLine" >

    </EditText>

    <Button
        android:id="@+id/btnSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send Message" >
    </Button>

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/textStatus"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Status Goes Here"
                android:textSize="24sp" />

            <ImageView
                android:id="@+id/ivBit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

# sql-server - DB2 和 SQL Server 可以安装在同一台机器上吗？

> ID：11187291
> 
> 赞同：1
> 
> 时间：2012-06-25T10:10:35.183
> 
> 标签：sql-server, db2

我怀疑应该没有问题，因为它们是独立的软件，但理想情况下，我希望得到一些“官方”确认或拒绝，因为它将是生产环境。

我的目标是两个数据库的最新版本。

我无法在官方渠道找到任何信息，但可能是我找错地方了。

关于个人成功失败的信息也将是有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:18:07.647

这两种产品可以和平共存，因为：

1.  2个产品的默认安装路径没有重叠；

2.  它们不需要相同的 TCP 端口号来服务请求 - DB2 侦听端口 50000，而 SQL Server 侦听端口 1433。

您真正担心的应该是生产*期间*的服务器负载。在不知道您当前的使用情况的情况下，安装另一个数据库服务器至少会影响资源争用和利用率（CPU、内存、HDD 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:11:45.380

当然。

如果您找不到任何反对意见，那可能就是您的答案。

# php - 添加两个事件

> ID：11187292
> 
> 赞同：0
> 
> 时间：2012-06-25T10:10:36.063
> 
> 标签：php, javascript, jquery

我有一个表单，它将一些数据发送到一个 php 文件，然后返回一些结果作为示例：

```
<form action"<?php $_SERVER['PHP_SELF']?>" method="post" id="data">
  <input type"text" name="first_name"/>
  <input type="text" name="last_name"/>
</form> 
```

然后在 javascript 中，我想在提交表单中捕获 clcik 事件，例如：

```
$("#data").submit(function(){
some code .....
}); 
```

这将阻止将输入表单提交到 php 文件的默认操作，问题是我可以为 php 文件发送表单数据并同时为同一表单捕获事件吗？

> 注意从 php 文件返回的数据将被另一个 php 函数需要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:25:26.117

为了防止表单提交的默认行为（即页面重新加载），您需要[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)像这样使用

```
$("#data").submit(function(event){
    event.preventDefault();
    //some code .....
}); 
```

并且要在不刷新页面的情况下将表单数据发布到`php`您需要使用任何 jQuery 的可用`ajax`方法，例如[`.post()`](http://api.jquery.com/jQuery.post/)（这将使用方法发送表单值`HTTP POST`），例如

```
$("#data").submit(function(event){
    event.preventDefault();// prevent page reload
    // Now post the form using Ajax
    // $(this).serialize() will return an array of all form fields as
    //                                                 name value pair 
    $.post('some_script.php',$(this).serialize(),function(data){
        // Just to check if everything is working well
        console.log('Form Submitted Successfully.');
        // do whatever you want with the data
   });
}); 
```

如果您的 php 脚本以`json`格式返回数据，您可以使用 php 设置标头或强制 jQuery 通过在第 4 个参数中指定as`content-Type`来处理返回数据，例如`JSON``dataType``JSON`

```
 $.post('some_script.php',$(this).serialize(),function(data){
        // Just to check if everything is working well
        console.log('Form Submitted Successfully.');
        // do whatever you want with the data
   },'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:13:32.803

```
$("#data").submit(function(e){
e.preventDefault();
$.post("<?php echo $_SERVER['PHP_SELF'] ?>",$(this).serialize(),function(r){ //Do Some Action });
}); 
```

# vb.net - 以编程方式单击 HTML 按钮

> ID：11187294
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:10:41.563
> 
> 标签：vb.net

有一个网站有 4 个网页。第一页有一个按钮，第二页也有一些按钮，第三页也有一个按钮，第四页也有一个按钮。问题是我的代码以编程方式单击第一页第二页和第三页的按钮。但不是以编程方式单击第 4 页上的按钮。我怎样才能让我的代码做到这一点？请为此提出一个可靠的解决方案.. 按钮的 HTML 代码如下所示

```
<FORM NAME='form1' METHOD='post' action='/dflogin.php'><INPUT TYPE='hidden' NAME='txtId' value='E712050-15'><INPUT TYPE='hidden' NAME='txtassId' value='1'><INPUT TYPE='hidden' NAME='txtPsw' value='HH29'><INPUT TYPE='hidden' NAME='txtLog' value='0'><h6 align='right'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Next' style='background-color:#009900; color:#fff;'></h6></FORM> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:38:40.970

此代码以编程方式单击一个按钮，您应该能够根据您的需要调整它，并希望它对您有用。

```
 For Each webpageelement As HtmlElement In allButtons 
      If webpageelement.GetAttribute("value").Equals("Next") Then 
        webpageelement.InvokeMember("click") 
        Exit For 
      End If 
  Next 
```

# android - listview onitemclick 无法引用

> ID：11187297
> 
> 赞同：0
> 
> 时间：2012-06-25T10:10:55.397
> 
> 标签：android, listview, android-intent, onitemclicklistener

因此，我计划制作一个列表视图，如果单击其中一个项目，它将转到其他活动。很明显，我想使用带有附加功能的意图。

但在我的代码中，额外内容并没有引用。我试图用精确的值来引用额外的东西，它起作用了，但是如果我把额外的东西用来引用我的对象/变量，它就不起作用了。

到目前为止，我的代码是这样的

```
public class bulan extends ListActivity {
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.tagihan_list);

        Intent i = getIntent();
        final String no_pel = i.getStringExtra("no_pel");

        List<NameValuePair> pairs = new ArrayList<NameValuePair>();
        pairs.add(new BasicNameValuePair("nopel", no_pel));

        ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();

        JSON json = new JSON();
        JSONObject jobj = json.getJSON("http://10.0.2.2/KP/tagihan.php", pairs);

        try {
            int length = jobj.getInt("panjang");

            for(int n = 1; n <= length; n++){

                String m = Integer.toString(n);
                JSONObject row = jobj.getJSONObject(m);

                String id_tagihan = "No. tagihan : " + row.getString("id");
                String bulan = row.getString("bulan");
                String tahun = row.getString("tahun");
                String tagihan = "Rp. " + row.getString("tagihan");
                String status = row.getString("status");

                HashMap<String, String> map = new HashMap<String, String>();

                map.put("id_tagihan", id_tagihan);
                map.put("bulan", bulan);
                map.put("tahun", tahun);
                map.put("tagihan", tagihan);
                map.put("status", status);

                list.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        ListAdapter adapter = new SimpleAdapter(this, list, R.layout.list, 
                new String[] {"id_tagihan","bulan","tahun","tagihan","status"}, new int[] { 
                R.id.id_tagihan, R.id.bulan, R.id.tahun, R.id.tagihan, R.id.status});

        setListAdapter(adapter);

        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener(){

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

                // TODO Auto-generated method stub
                String sid = ((TextView) view.findViewById(R.id.id_tagihan)).getText().toString();
                String snopel = no_pel;

                Intent i = new Intent(bulan.this, rincian.class);
                i.putExtra("id", sid);
                i.putExtra("no_pel", snopel);
                startActivity(i);

            }

        });
    }
} 
```

就像我之前解释的，就是这部分

```
Intent i = new Intent(bulan.this, rincian.class);
                    i.putExtra("id", sid);
                    i.putExtra("no_pel", snopel);
                    startActivity(i); 
```

如果我这样写它们会改变我的代码工作

```
Intent i = new Intent(bulan.this, rincian.class);
                    i.putExtra("id", "00001");
                    i.putExtra("no_pel", "0620120001");
                    startActivity(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:31:26.147

尝试

```
Intent i = new Intent(bulan.this, rincian.class);
Bundle b=new Bundle();
b.putString("id",sid);
b.putString("no_pel",snopel);
i.putExtras(b);
startActivity(i); 
```

在您的 rincian 类中获取如下值。

```
b=getIntent().getExtras();
String fri_id=b.getString("id");
String nopel=b.getString("no_pel"); 
```

# c - C 服务器 http 响应。正文未解析

> ID：11187300
> 
> 赞同：0
> 
> 时间：2012-06-25T10:11:06.103
> 
> 标签：c, http

我在编写 C HTTP 服务器时遇到了另一个问题。当我用 http 响应回答客户时，似乎我在某处有一个错误，但我无法弄清楚到底在哪里。

我的响应标头如下所示：

```
"HTTP1/1 200 OK\r\nContent-Type: application/json\r\nConnection: keep-alive\r\nContent-Length: 74\r\n\r\n{\"success\":true,\"user_info\":[{\"id\":\"64\"},{\"udid\":\"0\"},{\"profile_id\":\"0\"}]}\n" 
```

对我来说似乎没问题，但不知何故 Firefox 没有解析 JSON 内容并将其打印出来。它在 Chrome 和 Safari 上运行良好。此外，当我对我的服务器执行 XMLHTTPResponse 时，主体不会从标头中提取。

这就是我写回复的方式：

```
void
mx_respond_json(struct connection_s* connection, struct event_handler_s* handler, const char* data)
{
  struct write_buffer_s* wb = malloc(sizeof(struct write_buffer_s));
  eh_write_buffer_init(wb, 512 + strlen(data) + 1, handler, &connection);

 char len_buf[10];
 memset(len_buf, 0, sizeof(len_buf));
 sprintf(len_buf, "%d", strlen(data));

 strcpy(wp->buffer, "HTTP1/1 200 OK\r\n"
                               "Content-Type: application/json; charset=utf-8\r\n"
                               "Connection: close\r\n"
                               "Content-Length: ");
 strcat(wb->buffer, len_buf);
 strcat(wb->buffer, "\r\n\r\n");
 strcat(wb->buffer, data);
 strcat(wb->buffer, "\n");

 eh_write(wb, strlen(wb->buffer), &eh_close);
 } 
```

eh_close 是在写入完成并关闭与客户端的连接时调用的回调。

我还发现当我不关闭连接时，客户端将永远不会收到数据。也许这就是出现问题的原因？

问候。马库斯

# php - 当使用 php exec() 运行 shell 脚本时，一个脚本可以工作（它只是执行 git status）而一个脚本不工作（它执行 git checkout）。怎么会？

> ID：11187303
> 
> 赞同：3
> 
> 时间：2012-06-25T10:11:08.167
> 
> 标签：php, linux, git, shell, exec

我正在尝试设置一个基于 Web 的门户，通过该门户我们可以通过简单地单击后端面板来签出 Git 存储库的不同分支。

所以目前，我有 /var/www/devportal 其中包含**index.php**、**status.sh**和**checkout.sh**

在**index.php**中，我执行以下操作：

```
$repo = $_GET['repo'];
$command = 'sh status.sh ' . $repo;
$output = exec($command);
echo "<pre>$output</pre>"; 
```

**status.sh**的内容是：

```
#!/bin/bash -e
if [ $# -ne 1 ]
then
    echo "Usage: `basename $0` <repo name>"
    exit 1
fi
cd /var/www/$1
git status 
```

这很好用。在 PHP 中回显的输出显示了 /var/www/proj 中当前分支的状态。

现在，当我尝试使用 checkout.sh 做同样的事情（这次传递 2 个参数，第二个是要结帐的分支的名称）时**，**其内容是：

```
#!/bin/bash -e
if [ $# -ne 2 ]
then
    echo "Usage: `basename $0` <repo name> <branch name>"
    exit 1
fi
cd /var/www/$1
git checkout $2 
```

它不起作用。它不仅不起作用，而且我不会因为错误消息而傻傻地蹲下。没有输出。我知道 checkout.sh 脚本工作正常，因为当我回显通过 PHP 的 exec 命令发送的命令时，复制该确切内容并通过以 root 身份登录的终端运行它，它工作得很好，执行结帐并返回新激活的分支的名称。

对此的任何提示将不胜感激。我的盒子非常标准，Ubuntu 10.04 并运行 Apache2。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:26:07.800

exec 用您的命令标准输出填充 $output，以显示错误（如果有）在命令末尾添加“2>&1”。

exec 也可以告诉你返回值，试试：

```
$output = exec($command, $array_output, $ret_val);
var_dump($ret_val);
echo "<pre>$output</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:30:35.057

```
$repo = $_GET['repo'];
$command = 'sh status.sh ' . $repo;
$output = exec($command); 
```

哦，天哪。不要这样做。[escapeshellarg](http://php.net/manual/en/function.escapeshellarg.php)存在是有原因的

# iis - 如何使用 PowerShell 设置 IIS 应用程序池“私有内存限制”值

> ID：11187304
> 
> 赞同：3
> 
> 时间：2012-06-25T10:11:08.403
> 
> 标签：iis, powershell, web-administration

我正在使用 PowerShell 自动部署网站，最近发现 AppPool 设置无法使用 PS 进行设置。或者至少我没有设法找出如何去做。

```
$appPool = $serverManager.ApplicationPools.Add($sitename)... 
```

我需要将“私有内存限制”设置为某个值，但看起来**ApplicationPool**或**ApplicationPoolRecycling**对象中没有这样的属性。

有人知道这个问题的解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T10:27:08.683

此脚本使用[Get-Webconfiguration](http://technet.microsoft.com/en-us/library/ee790561.aspx)和[Set-WebConfiguration](http://technet.microsoft.com/en-us/library/ee807820.aspx)来获取所有应用程序池的私有内存值。您可以单独设置每个或设置应用程序池默认值以使其继承。我已经注释掉了实际执行该集合的行。

```
import-module webadministration

$applicationPoolsPath = "/system.applicationHost/applicationPools"
$applicationPools = Get-WebConfiguration $applicationPoolsPath

foreach ($appPool in $applicationPools.Collection)
{
    $appPoolPath = "$applicationPoolsPath/add[@name='$($appPool.Name)']"
    Get-WebConfiguration "$appPoolPath/recycling/periodicRestart/@privateMemory" 
    # Set-WebConfiguration "$appPoolPath/recycling/periodicRestart/@privateMemory" -Value 1000
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-15T17:45:17.997

我正在添加一个答案，因为我无法使用现有的。

```
import-module webadministration
$applicationPools = Get-ChildItem IIS:\AppPools

foreach ($appPool in $applicationPools){
Set-ItemProperty IIS:\AppPools\$appPool.name `
-Name recycling.periodicrestart.privateMemory -Value 7000000
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T16:13:36.777

您的回复帮助我找到了解决我在 WSUS 服务器上遇到的问题的方法。我知道这`WsusPool`是给我带来问题的应用程序池大小，所以我制作了以下 PS 脚本并将其应用于`OU`我的`WSUS`服务器的根目录（我有 3 个）我收到连接错误并且我的选项`Reset Server Node`没有帮助。事件查看器的事件 ID 为 12002、12012、12032、12022、12042、12052 和 12072。

```
Set-WebConfiguration "/system.applicationHost/applicationPools/add[@name='WsusPool']/recycling/periodicRestart/@privateMemory" -Value 0 
```

# r - 导入的matlab表上的R热图

> ID：11187306
> 
> 赞同：0
> 
> 时间：2012-06-25T10:11:34.883
> 
> 标签：r, matrix, dataframe

我想在从 MATLAB 导入的表上绘制热图。该表已明确显示行名和列名，我已将其加载到 R 中`read.table`，我可以运行`summary(i)`并获取每列的数字摘要：

```
i = read.table("file.txt",header=TRUE) 
```

但是当我尝试运行时`heatmap`，它抱怨转换后的矩阵不是数字，无论有无`rownames.force=TRUE`：

```
is.matrix(as.matrix(i,rownames.force=TRUE))
[1] TRUE

heatmap(as.matrix(i,rownames.force=TRUE))
 Error in heatmap(as.matrix(i, rownames.force = TRUE)) : 
   'x' must be a numeric matrix 
```

我认为问题在于`as.matrix`尝试转换非数字行名（或列名，我不确定了:-()：

```
as.matrix(i)[1]
[1] "cluster-594-walk-0161" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:21:14.667

如果没有可重现的示例，我们只能猜测出了什么问题，但错误表明矩阵不包含数字，而是（可能）字符。这是否有效：

```
i = as.numeric(i)
heatmap(as.matrix(i,rownames.force=TRUE)) 
```

什么是输出：

```
is.numeric(as.matrix(i)[1]) 
```

（可能`FALSE`）。

* * *

编辑：您的编辑显示矩阵包含字符，而不是数字。可能是在文本文件中，行名作为附加列包含在内，可能是第一列。在这种情况下：

```
i = read.table("file.txt", header = TRUE, row.names = 1) 
```

将第一列读取为行名。所以问题很可能出在 中`read.table`，而不是在转换为矩阵中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T06:53:40.997

解决方案是**先定义行名称**，然后**将数据框转换为矩阵**，然后**再次插入原始名称**。它应该可以完美运行

```
rnames <- data[,1]    # assign labels in column 1 to "rnames"

mat_data <- data.matrix(data[,2:ncol(data)])  # transform column 2-5 into a matrix

rownames(mat_data) <- rnames                  # assign row names

heatmap.2(mat_data, col=redblue(256), scale="row", key=T, keysize=1.5, trace="none",cexCol=0.9,srtCol=45)   # your heatmap 
```

# ssrs-2008 - 在公司域外访问 SSRS 报告

> ID：11187308
> 
> 赞同：3
> 
> 时间：2012-06-25T10:11:37.080
> 
> 标签：ssrs-2008

从报表管理器我们可以分配新的角色，但这些用户需要在同一个网络中。那么如何访问网络外的SSRS报告呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:07:39.740

我假设在您的组织内部，您正在使用 SSRS 服务器的 URL 直接访问？有两种方法可以访问报告

*   不太好，但它有效，要求用户使用他们的 VPN 连接拨入，然后他们可以继续以相同的方式，就好像他们在同一个网络中一样
*   构建一个 ASP.net 应用程序，他们可以使用其凭据登录该应用程序，然后使用 Report Viewer 显示请求的报告。

# jquery-mobile - JQM - 如何检测项目是否显示在屏幕上

> ID：11187311
> 
> 赞同：0
> 
> 时间：2012-06-25T10:11:54.363
> 
> 标签：jquery-mobile

我正在使用 JQuery mobile，我想在滚动列表视图并在屏幕上显示特定项目时引发一个事件。

这个有活动吗？！我有什么选择？！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:03:45.010

AFAIK jQM 中没有事件可以执行此操作，但您可以结合 StackOverflow 上其他一些解决方案的想法来执行此操作。

[这个问题](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)提供了一些代码来确定一个项目是否可见，即：

```
function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
      && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
} 
```

您可以将其与`scrollstop`事件结合起来。假设您正在监视`<li>`定义为的项目

```
 <li id="myiditem">
      <a href="bmw.html">I'm being watched!!</a>
 </li> 
```

然后在`$(document).ready`你可以做

```
var watchitem;
$(document).ready(function(){
    watchitem = document.getElementById ('myiditem');  
    /* Bind to scroll event */
    $(window).bind('scrollstop', function () {
        if (isScrolledIntoView( watchitem )) {
            alert('monitored li item was scrolled into view');
        }
    });
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/sZzv5/)示例。

# google-app-engine - 在云端备份和恢复数据 - appengine

> ID：11187313
> 
> 赞同：1
> 
> 时间：2012-06-25T10:11:57.750
> 
> 标签：google-app-engine, restore, google-cloud-datastore, database-backups

我想知道人们如何处理云中数据的备份和恢复。我计划将 AppEngine 用于商业用途，据我所知，AppEngine 中没有内置经典的备份和恢复功能。这是合理的，因为那里的数据库结构有很大不同。

那么问题是如何处理高复制 AppEngine 应用程序中的备份和恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:19:28.450

[Google App Engine 上的备份/恢复、复制和删除](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)仍处于试验阶段，但已经存在。我建议您构建一个原型并尝试备份/恢复几次，然后再决定构建整个事物。数据非常安全，但是如果您想保护数据存储免受一些滥用/攻击，那么有必要解决这个问题。如果您害怕丢失数据，那么实际发生这种情况的可能性非常低，但是，您永远不知道！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:29:50.917

同意前面的帖子。内置的数据存储备份/恢复足够可靠。

但是，如果您的数据按命名空间分区，Google 不提供按命名空间备份/恢复的可能性，这是一个很大的限制。这意味着如果您有一个多租户应用程序，您将无法备份/恢复一个命名空间的数据。

您真的需要按命名空间进行备份/恢复吗，您必须从开源的 Google 扩展备份/恢复（请参阅[http://code.google.com/p/googleappengine/source/browse/trunk/python/google /appengine/ext/datastore_admin/backup_handler.py](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/datastore_admin/backup_handler.py)）。

我目前正在对 Google 的开源进行此修改，但还没有时间去做。

希望这可以帮助 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:48:42.020

GAE 备份对我们来说效果很好：几天前，我备份了大约 800MB 大小的实体。那里没有问题。它还可以恢复 - 只需将数据保存到 blobstore 或 Cloud Store 中的文件，您就可以随时恢复它。有一个限制：没有自动/可编程备份 - 都是手动的。

# java - 背景中的主页按钮侦听器

> ID：11187314
> 
> 赞同：0
> 
> 时间：2012-06-25T10:11:59.467
> 
> 标签：java, android, service, android-activity, clicklistener

我想创建服务（？），它将一直在后台运行并在系统启动时启动。另外，我希望它检测到两次按下主页按钮，然后启动指定的活动。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:15:15.873

**1.**当系统启动时，你可以这样做：

```
public class PhoneStateReceiver extends BroadcastReceiver{

    @Override
    public void onReceive(final Context context, Intent intent) {

        if(intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)){
            Intent launch = new Intent(context, ServiceToLaunch.class);
            launch.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startService(launch);
        }
    }
} 
```

在您的清单中添加以下内容：

```
<receiver android:name=".receiver.PhoneStateReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

**添加权限：**

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

**2.**没有可用的 Home 键事件。

# html5-video - 使用 HTML5 视频时，我需要 WebM 和 ogv 格式吗？

> ID：11187316
> 
> 赞同：33
> 
> 时间：2012-06-25T10:12:01.797
> 
> 标签：html5-video, ogg, webm

从[videojs.com 的文档](http://videojs.com/docs/setup/)中，我的印象是我需要同时包含 ogv 和 webm 文件格式（除了 mp4）。

然后我阅读了[http://www.htmlgoodies.com/html5/client/how-to-embed-video-using-html5.html#fbid=erNepglDbZl](http://www.htmlgoodies.com/html5/client/how-to-embed-video-using-html5.html#fbid=erNepglDbZl)，从中看来我只需要 mp4 和（ogv 或 webm）。

什么是正确的？我需要这三个吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2017-01-09T13:02:05.043

对于那些提出这个老问题的人：现在只需要 mp4！

[http://caniuse.com/#feat=mpeg4](http://caniuse.com/#feat=mpeg4)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-25T11:00:39.880

根据[Dive Into HTML5](http://diveintohtml5.info/video.html#what-works)：

*   Firefox 3.5+、Opera 10.5+ 和 Chrome 3+ 支持 ogv
*   Firefox 4+、Opera 10.6+ 和 Chrome 6+ 支持 WebM（和 ogv，假设它们将来不会放弃支持）

所以 ogv 需要用于：

*   火狐 3.5 和 3.6
*   歌剧 10.5
*   铬 3、4 和 5

如果您对那些通过 Flash 获取视频的版本感到满意（我认为这就是 VideoJS 在没有 Ogg 版本的情况下会为他们做的事情），或者如果他们没有安装 Flash，则根本没有视频，那么您不需要需要Ogg版本。

就个人而言，我很想跳过 Ogg，因为将视频转换为三种格式而不是两种格式会（大概）花费 50% 的时间。虽然我对视频没有太多经验，所以我不知道每种格式的优缺点是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:52:30.943

[在这里检查](http://www.w3schools.com/html/html5_video.asp) 并非所有浏览器都支持所有原生格式（无需额外插件）

IE9 只播放 MP4、firefox 4 WebM 和 OGV，Chrome 播放所有（但有传言说他们不支持新版本的 MP4，如果我是对的），Safari 播放 MP4、Opera WebM 和 OGG

因此，如果您检查编解码器，您应该选择 MP4 和 WebM 或 MP4 和 OGG 以匹配所有当前浏览器。

# ruby-on-rails - 使用 Gmaps4rails，我如何显示当前在地图视图中可见的位置列表？

> ID：11187317
> 
> 赞同：1
> 
> 时间：2012-06-25T10:12:08.687
> 
> 标签：ruby-on-rails, gmaps4rails

我正在使用 gmaps4rails。我正在尝试实现以下目标：地图显示带有标记的位置，用户可以根据需要缩放/移动他的视窗。我想要的是，当他这样做时，地图旁边的列表应该动态更新所有当前可见的位置。我尝试使用回调机制和 getBounds 来过滤可见的数据结构，但没有成功。我该怎么办？

非常感谢！朱利安

在我的控制器中：类 LocationsController < ApplicationController

```
 def index
    if (params[:sw_y] && params[:sw_x] && params[:ne_y] && params[:ne_x])
        bounds = [ [params[:sw_x].to_f, params[:sw_y].to_f], 
                 [params[:ne_x].to_f, params[:ne_y].to_f] ]
        @locations_within_bounds = Location.within_bounds(bounds)
    else
        @locations_within_bounds = Location.all
    end   
  @locations = Location.all
  @json = Location.all.to_gmaps4rails 
```

在我看来：

```
<%= gmaps("markers" => {"data" => @json, "options" => {"list_container" => "markers_list", "do_clustering" => true } }   ) %>

<table>
  <tr>
    <th>Name</th>
    <th>Address</th>
    <th>Longitude</th>
    <th>Latitude</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @locations_within_bounds.each do |location| %>
  <tr>
    <td><%= location.name %></td>
    <td><%= location.address %></td>
    <td><%= location.longitude %></td>
    <td><%= location.latitude %></td>
 </tr>
<% end %>
</table> 
```

# html - 重定向到同一页面后，如何在 struts 1.x 中使用重置清除字段？

> ID：11187319
> 
> 赞同：0
> 
> 时间：2012-06-25T10:12:14.347
> 
> 标签：html, struts, reset

我正在使用struts1.3.8。我正在使用 struts 提供的元素，例如，。
重置一直有效，直到我不点击登录页面，即在表单提交之前。一旦我按下登录并登录失败，重定向到同一页面。此时重置不起作用。所以如何在重定向到同一页面后清空字段当我点击重置按钮时？
谢谢拉克斯曼乔
达里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:40:54.017

重置功能不会清理字段。重置功能恢复原始值。如果输入加载了一个值并且您更改了该值然后单击“重置”，将显示原始值，而不是空值。

如果您想要在单击按钮时清理字段，您应该实现一个功能来执行此操作，遍历所有表单输入并设置空值。

# asp.net-mvc - 如何从 MVC3 中的区域控制器中出来？

> ID：11187321
> 
> 赞同：3
> 
> 时间：2012-06-25T10:12:18.233
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我的 url 路由在“区域”文件夹中正常工作，这意味着我可以转到任何控制器或从一个到另一个查看，我如何从这个区域控制器出来到父控制器？

例如：在我的控制器中，如果我给出这条线，它将从区域控制器中出来并正常工作

```
//Homecontroller.cs inside Controllers folder
return RedirectToAction("../../Home"); 
```

编码出来并连接到父控制器的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T10:21:06.780

您需要明确指定区域。区域是一个路由参数，就像控制器和动作一样。如果您在生成 URL 时（即调用 RedirectToAction 时）未明确指定它，则假定为当前值。这是当前控制器的区域。

例如：

```
return RedirectToAction( "Index", "Home", new {Area = "Test"} ); 
```

要返回顶级控制器，请像这样清除该区域：

```
return RedirectToAction( "Index", "Home", new {Area = ""} ); 
```

# vhdl - VHDL 错误无法推断寄存器，因为它的行为与任何支持的寄存器模型都不匹配

> ID：11187325
> 
> 赞同：0
> 
> 时间：2012-06-25T10:12:31.537
> 
> 标签：vhdl

我是 VHDL 的新手，正在尝试为可编程 FPGA 制作延迟/门应用程序，延迟和门输出长度可调。一旦接收到输入信号，这个东西应该忽略任何其他输入，直到门信号的生成完成。

我想稍后将此组件用于 8 个不同的输入和 8 个不同的输出，并通过写入寄存器的方式为每个单独设置所需的延迟/门参数。

当试图在 Quartus II v 11.0 中编译时，我收到了这个错误：

错误 (10821)：clkgen.vhd(46) 处的 HDL 错误：无法推断“control_clkgen”的寄存器，因为它的行为与任何支持的寄存器模型都不匹配

还有

错误 (10822)：clkgen.vhd(37) 处的 HDL 错误：无法在此时钟沿实现分配寄存器

不知道出了什么问题，这是组件的代码：

```
library ieee;
use IEEE.Std_Logic_1164.all;
use IEEE.Std_Logic_arith.all;
use IEEE.Std_Logic_unsigned.all;

ENTITY clkgen is
port(
 lclk                         : in  std_logic;
start_clkgen           : in  std_logic;
gate_clkgen            : in std_logic_vector(31 downto 0);
 delay_clkgen           : in std_logic_vector(31 downto 0);
 output_clkgen          : out std_logic

 );
END clkgen ;

ARCHITECTURE RTL of clkgen is

 signal  gate_cycles_clkgen    : std_logic_vector(32 downto 0);
 signal  delay_cycles_clkgen    : std_logic_vector(32 downto 0);
 signal  total_cycles_clkgen    : std_logic_vector(32 downto 0);
 signal  counter_clkgen         : std_logic_vector(32 downto 0);
 signal  control_clkgen         : std_logic;

begin
 gate_cycles_clkgen    <= '0' & gate_clkgen;
 delay_cycles_clkgen    <= '0' & delay_clkgen;
 total_cycles_clkgen    <= gate_cycles_clkgen + delay_cycles_clkgen;

 start_proc: process(lclk, start_clkgen)
  begin
   if (start_clkgen'event and start_clkgen = '1') then
    if control_clkgen = '0' then
     control_clkgen   <= '1';
    end if;
   end if;  

   if (lclk'event and lclk = '1') then
    if control_clkgen  = '1' then
     counter_clkgen <= counter_clkgen + 1;
    if (counter_clkgen > delay_cycles_clkgen - 1 AND counter_clkgen < total_cycles_clkgen + 1) then
     output_clkgen <= '1';
    elsif (counter_clkgen = total_cycles_clkgen) then
     counter_clkgen   <= (others => '0');
     output_clkgen    <= '0';
     control_clkgen   <= '0';
    end if;
   end if;
 end if;
 end process start_proc;

END RTL; 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:55:02.163

问题在于您描述元素的方式- 它对两个不同的信号（和）`control_clkgen`是边缘敏感的。这些工具告诉你的是“嘿，当我试图让你的有效 VHDL 设计适合一个真正的硬件时，我发现*没有任何硬件可以实现你想要的。*基本上，有没有可以对两个信号（只有一个，通常是时钟）边缘敏感的触发器。`lclk``start_clkgen`

 *可能的解决方案：你真的需要`control_clkgen`对边缘敏感`start_clkgen`吗？它是否足够好，或者你能找到另一个`start_proc`只对敏感的解决方案，`lclk`你只需检查是否`start_clkgen`很高？

```
start_proc: process(lclk)
   begin
      if (rising_edge(lclk)) then
          start_clkgen_d <= start_clkgen;
          if (start_clkgen='1' and start_clkgen_d='0') then
             if control_clkgen = '0' then
                control_clkgen   <= '1';
             end if;
          end if;
      end if;
      ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:52:54.827

您正在描述一个`control_clkgen`具有两个时钟`start_clkgen`和`lclk`. 我猜你的综合工具不支持这个。您必须以另一种方式描述此行为。可以`start_clkgen`用作异步或同步预设信号，或者将这两个信号组合成一个时钟信号，或者使用多个触发器来实现该功能。*

# iphone - iPhone：切换 UITextField 的 rightView 图标图像

> ID：11187327
> 
> 赞同：0
> 
> 时间：2012-06-25T10:12:36.733
> 
> 标签：iphone, uitextfield

在我的项目中，我们正在自定义 UITextField 以获取 textField 右侧的图标图像（如浏览器中的书签图标）。

功能是，1) textField 不应该是可编辑的

2）最初是黑色的右侧图标。

3）如果用户开始点击，图标图像将变为橙色。

4）如果用户释放，图标图像会变成原来的状态（黑色）

前 2 点已落实。第三点覆盖了**UIControl::beginTrackingWithTouch** 方法并将图标颜色更改为橙​​色。

请求您帮助实施最后一点。我无法获得发布事件以更改黑色图像。尝试使用**touchesEnded**但这仅在用户离开控件时释放完成时调用。

任何人都可以帮助我如何识别用户点击何时结束。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:24:21.530

IIRC，用户单击并按住书签图标？如果是的话，也许你可以使用 UIButton ：

```
UIImage *normalImage = [UIImage imageNamed:@"normal_image.png"];
UIImage *touchedImage = [UIImage imageNamed:@"touched_image.png"];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 50, 50); // put your frame here

[button setImage:normalImage forState:UIControlStateNormal]; // Normal state image
[button setImage:touchedImage forState:UIControlStateHighlighted]; // Touched state image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:26:56.067

覆盖以下方法：

*   (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event;
*   (void)cancelTrackingWithEvent:(UIEvent *)事件；

# android - 如何使用 zxing 创建一个独立的条码阅读器？

> ID：11187328
> 
> 赞同：0
> 
> 时间：2012-06-25T10:12:41.710
> 
> 标签：android, barcode, zxing

我想使用[ZXing](http://code.google.com/p/zxing/)制作一个 Android 应用程序。谁能告诉我如何使用核心库，或者任何人知道如何使用核心库来构建条形码扫描仪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:24:09.310

您需要在 Activity 中调用 Zxing Intent 并放松。

首先添加代码来调用 Intent：

```
IntentIntegrator integrator = new IntentIntegrator(yourActivity);
integrator.initiateScan(); 
```

其次，将此添加到您的 Activity 以处理结果：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
  IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
  if (scanResult != null) {
    // handle scan result
  }
  // else continue with any other code you need in the method
  ...
} 
```

花点时间浏览 Zxing 的 wiki 页面。他们已经很好地解释了。

[http://code.google.com/p/zxing/w/list](http://code.google.com/p/zxing/w/list)

[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

这是演示如何调用 Zxing 意图的示例应用程序。

[http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java](http://code.google.com/p/zxing/source/browse/trunk/androidtest/src/com/google/zxing/client/androidtest/ZXingTestActivity.java)

最后测试项目+库位于

[http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%253Fstate%253Dclose](http://code.google.com/p/zxing/source/browse/trunk#trunk/android-integration%253Fstate%253Dclosed)

# sql - 使用排名函数查找重复出现

> ID：11187330
> 
> 赞同：6
> 
> 时间：2012-06-25T10:12:48.410
> 
> 标签：sql, sql-server, sql-server-2008, tsql, ranking-functions

请帮助我生成以下我一直在努力解决的查询。假设我有一个简单的表，其中包含月份编号和该特定月份是否有任何失败事件的信息

下面是生成示例数据的脚本：

```
WITH DATA(Month, Success) AS
(
    SELECT  1, 0 UNION ALL
    SELECT  2, 0 UNION ALL
    SELECT  3, 0 UNION ALL
    SELECT  4, 1 UNION ALL
    SELECT  5, 1 UNION ALL
    SELECT  6, 0 UNION ALL
    SELECT  7, 0 UNION ALL
    SELECT  8, 1 UNION ALL
    SELECT  9, 0 UNION ALL
    SELECT 10, 1 UNION ALL
    SELECT 11, 0 UNION ALL
    SELECT 12, 1 UNION ALL
    SELECT 13, 0 UNION ALL
    SELECT 14, 1 UNION ALL
    SELECT 15, 0 UNION ALL
    SELECT 16, 1 UNION ALL
    SELECT 17, 0 UNION ALL
    SELECT 18, 0
) 
```

鉴于“重复失败”的定义：

如果在任何 6 个月期间至少 4 个月内发生事件失败，那么最后一个月出现此类失败是“重复失败”，我的查询应返回以下输出

```
Month   Success RepeatedFailure
1       0   
2       0   
3       0   
4       1   
5       1   
6       0       R1
7       0       R2
8       1   
9       0   
10      1   
11      0       R3
12      1   
13      0   
14      1   
15      0   
16      1   
17      0
18      0       R1 
```

在哪里：

*   R1 在第 6 个月中 -1 次重复失败（过去 6 个月中出现 4 次失败）。
*   R2 -第 7 个月的第 2 次重复失败（过去 6 个月中的 4 次失败）。
*   R3 第 11 个月 -3 次重复失败（过去 6 个月内失败 4 次）。

R1 - 在第 18 个月再次出现第 1 次重复故障，因为在过去 6 个报告期中第一次发生新的重复故障时，重复故障应从头开始重新编号

重复失败是连续计算的，因为我必须根据它的数量应用适当的乘数：

*   第一次重复失败 - X2
*   第二次重复失败 - X4
*   第三次和更多重复失败-X5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:27:32.350

我确信这可以改进，但它有效。我们基本上做了两次通过——第一次确定重复失败，第二次确定每个重复失败的*类型*。请注意，`Intermediate2`绝对可以取消，我只是为了清楚起见将其分开。所有代码都是一个语句，我的解释是交错的：

```
;WITH DATA(Month, Success) AS
-- assuming your data  as defined (with my edit)
,Intermediate AS 
(
SELECT
    Month,
    Success,
    -- next column for illustration only
    (SELECT SUM(Success) 
     FROM DATA hist 
     WHERE curr.Month - hist.Month BETWEEN 0 AND 5) 
        AS SuccessesInLastSixMonths,
    -- next column for illustration only
    6 - (SELECT SUM(Success) 
     FROM DATA hist 
     WHERE curr.Month - hist.Month BETWEEN 0 AND 5) 
        AS FailuresInLastSixMonths,
    CASE WHEN 
            (6 - (SELECT SUM(Success) 
                    FROM DATA hist 
                    WHERE curr.Month - hist.Month BETWEEN 0 AND 5)) 
            >= 4 
            THEN 1
            ELSE 0 
    END AS IsRepeatedFailure
FROM DATA curr 
-- No real data until month 6
WHERE curr.Month > 5
) 
```

在这一点上，我们已经确定了每个月是否是重复失败，通过计算六个月内的失败并包括它。

```
,Intermediate2 AS
(
SELECT 
    Month,
    Success,
    IsRepeatedFailure,
    (SELECT SUM(IsRepeatedFailure) 
        FROM Intermediate hist 
        WHERE curr.Month - hist.Month BETWEEN 0 AND 5) 
        AS RepeatedFailuresInLastSixMonths
FROM Intermediate curr
) 
```

现在我们统计了到现在为止的六个月内**重复失败的次数**

```
SELECT
    Month,
    Success,
    CASE IsRepeatedFailure 
        WHEN 1 THEN 'R' + CONVERT(varchar, RepeatedFailuresInLastSixMonths) 
        ELSE '' END
    AS RepeatedFailureText
FROM Intermediate2 
```

所以我们可以说，如果这个月是反复失败，那么反复失败的基数是多少。

结果：

```
Month       Success     RepeatedFailureText
----------- ----------- -------------------------------
6           0           R1
7           0           R2
8           1           
9           0           
10          1           
11          0           R3
12          1           
13          0           
14          1           
15          0           
16          1           
17          0           
18          0           R1

(13 row(s) affected) 
```

性能考虑将取决于您实际拥有的数据量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:17:43.567

```
;WITH DATA(Month, Success) AS
(
    SELECT  1, 0 UNION ALL
    SELECT  2, 0 UNION ALL
    SELECT  3, 0 UNION ALL
    SELECT  4, 1 UNION ALL
    SELECT  5, 1 UNION ALL
    SELECT  6, 0 UNION ALL
    SELECT  7, 0 UNION ALL
    SELECT  8, 1 UNION ALL
    SELECT  9, 0 UNION ALL
    SELECT 10, 1 UNION ALL
    SELECT 11, 0 UNION ALL
    SELECT 12, 1 UNION ALL
    SELECT 13, 0 UNION ALL
    SELECT 14, 1 UNION ALL
    SELECT 15, 0 UNION ALL
    SELECT 16, 1 UNION ALL
    SELECT 17, 0 UNION ALL
    SELECT 18, 0
)

SELECT DATA.Month,DATA.Success,Isnull(convert(Varchar(10),b.result),'') +         
Isnull(CONVERT(varchar(10),b.num),'') RepeatedFailure
FROM (
SELECT *, ROW_NUMBER() over (order by Month) num FROM 
( Select * ,(case  when (select sum(Success) 
from DATA where MONTH>(o.MONTH-6) and MONTH<=(o.MONTH)  ) <= 2 
and o.MONTH>=6 then 'R' else  '' end) result
from DATA o
) a where result='R'
) b 
right join DATA on DATA.Month = b.Month
order by DATA.Month 
```

# redirect - 在 Zend Framework 中确认后如何在引导程序中重定向用户？

> ID：11187334
> 
> 赞同：0
> 
> 时间：2012-06-25T10:12:51.303
> 
> 标签：redirect, zend-framework, bootstrapping

我只是 Zend 框架的新手。目前我正在尝试做的是，当用户访问我的网站时，他们首先会看到一个选择框，其中有两种语言可供选择，例如英语和德语。

只有当他们做出选择时，浏览器才会将他们重定向到该特定语言页面的索引控制器。

所以我的问题是如何在引导文件中创建一个选择框或任何可能的方法来做到这一点，以及之后如何重定向用户？任何解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:27:11.937

您可以制作一个使用 preDispatch 事件的插件来查看是否选择了语言（例如存储在 cookie 或会话中），如果没有，则重定向到登录页面。

看这里[zend 框架插件 - predispatch()](https://stackoverflow.com/questions/3627156/zend-framework-plug-in-predispatch) 和 ZF 的动作插件文档。

这就是我在我的应用程序中强制登录的方法。

现在，在您的位置上，我真正要做的是检测用户的语言，并在导航栏中的某个位置使用回退到英语和切换小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:33:43.423

永远不要使用引导文件（我说的是`Bootstrap.php`and `index.php`）进行这种操作。首先，它不会按照您的要求工作；其次，你会弄乱你的应用程序的结构。

相反，您可以使用以下方法之一：

1) 添加一些 predispatch 钩子，通过检查用户的 cookie 来检查是否已经做出了选择。如果是，像往常一样继续请求（可能设置一些 Zend_Registry`lang`变量以供以后使用），如果不是，重定向到语言选择页面；后者应将所做的选择存储在 cookie 中。

2）在你的Router/mod_rewrite中实现一个简单的规则：当请求的URL包含“语言部分”（`http://example.com/lang/xx/...`或只是`http://example.com/xx/...`）时，它会自动使用这部分，所以设置`lang`参数。如果没有，请求会自动重定向到语言选择页面。后者反过来将用户引导到特定语言的页面，其中所有链接都是特定于语言的。

在我看来，后一种方法较差，因为用户必须一直使用经过语言调整的网关。但您不必将此信息存储在 cookie 中。

# node.js - http 动词上的 Mongoose/Express 授权

> ID：11187342
> 
> 赞同：4
> 
> 时间：2012-06-25T10:13:38.903
> 
> 标签：node.js, express

我有一个在 mongoose 和 express 上运行的 node.js REST 服务。我也在使用 merse 来设置我的路由。

我现在想要实现的是以下类型的场景：

```
Scenario I: e.g. blogpost
- GET -> no authentication required
- POST/PUT/DELETE -> authentication required

Scenario II: e.g. user
- GET -> authentication required
- POST/PUT/DELETE -> authentication required plus username of logged in user has to match 
```

我已经看过everyauth 和mongoose-auth，但找不到任何可以让我进行这种控制的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T10:28:29.667

忘记一切。这个图书馆是一个矫枉过正，恕我直言。实现身份验证实际上非常简单，遵循架构：

1.  用户通过`username`并`password`到服务器；
2.  服务器获取`username`并`password`检查数据库中是否有用户`password`。如果没有用户，则返回错误；
3.  我们有一个用户，现在使用 Express 的内置会话机制。调用`req.session.regenerate`并在回调中做`req.session.userID = user.id`. Express 会自动将 cookie 发送给用户；
4.  创建一个中间件（必须在任何其他请求处理程序**之前**触发），它基本上在数据库中搜索`req.session.userID`. 如果找到，则将其存储在 中`req`，即`req.user = user`；
5.  在视图中，您只需检查是否`req.user`设置了变量。如果是，那么我们就通过了身份验证。你完成了！

ad 1+2) 为了确保身份验证安全，您应该使用一些密码学（和/或 HTTPS）。例如，密码应分两部分保存在 DB 中：`salt`和`hash`. `salt`是随机生成的（在注册时）`hash = hash_it(pwd, salt)`，其中`hash_it`是一些散列算法（例如：MD5 或 SHA256）。

现在可以通过几个步骤进行客户端身份验证（仅当您可以使用 JavaScript 时）：

1.  服务器随机发送`new_salt`到登录页面（或者用JavaScript生成一个，不需要隐藏生成算法）；
2.  用户发送 AJAX 请求`give me salt for user X`，服务器以`salt`存储在 DB 中的数据进行响应（这`salt`是公开的）；
3.  在响应散列`pwd`，`salt`然后再次散列结果`new_salt`，将其存储在变量中`hpwd`；
4.  客户端将`username`,`hpwd`和发送`new_salt`到服务器；
5.  服务器`pwd`从 DB 中获取，与结果进行`username`散列并将结果与​​（注意：您不存储）进行比较。`pwd``new_salt``hpwd``new_salt`

这种方法很好，因为每次登录时都会随机（从外部角度）数据流过网络，即使 the`username`和 the`password`是相同的。

这很重要，因为`password`泄漏是一件很严重的事情。不是因为有人可以破坏您的应用程序的帐户（这是轻微的损害，除非您是银行 - 但是您不会问这样的问题 :D ）。主要是因为人们倾向于对多个网站使用相同的密码，包括银行账户。

# java - RDP 永久杀死 TerminalFactory

> ID：11187345
> 
> 赞同：1
> 
> 时间：2012-06-25T10:13:52.543
> 
> 标签：java, smartcard

作为一种安全措施，Windows 将本地智能卡读卡器转发到远程机器。问题是

1.  您已经拥有句柄的阅读器变得无法使用
2.  不可能获得新读者

如果您尝试使用终端或 CardTerminals 对象，则会收到 PCSCException：SCARD_E_SERVICE_STOPPED。

我有代码来演示这个问题：

```
import javax.smartcardio.*;

public class ScRdp {
public static void main( final String[] args ) throws Exception
{
    TerminalFactory factory = TerminalFactory.getDefault();
    System.out.println( "Factory: " + factory.hashCode() );
    final CardTerminals terminals = factory.terminals();
    List<CardTerminal> termNames = terminals.list();

    BufferedReader in = new BufferedReader( new InputStreamReader( System.in ) );
    in.readLine();
    main( args );
}
} 
```

在机器 A 上启动代码，使用机器 B 中的 RDP，然后按 Enter。您甚至可以 RDP 进入，立即断开连接并在机器 A 上按 Enter。

在 C 语言中，我会使用 SCardReleaseContext 和 SCardEstablishContext ( [ref](http://archives.neohapsis.com/archives/microsoft/various/smartcard/2003-q4/0166.html) )。有没有办法通过 Java API 做到这一点？

**跟进**

AFAICT这是不可能的。但是请参阅[链接](http://www.boyce.us/gp/gpcontent.asp?ID=279)，[链接](http://technet.microsoft.com/en-us/library/cc784094%28v=ws.10%29.aspx)。应该可以在服务器上禁用智能卡重定向，从而规避问题。

在 Win7 Pro 上，我在 gpedit.msc 中找到了设置：“计算机配置/管理模板/Windows 组件/远程桌面服务/远程桌面会话主机/设备和资源重定向/不允许智能卡设备重定向”。那就是说我还没有这个工作。即使在连接之前取消选中 RDP 客户端中的“转发智能卡”复选框也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:09:04.920

如果您以与使用阅读器的用户相同的用户身份加入 RDP，这只是一个问题。我们通过使用 ObjectWeb 中的 JavaService.exe 运行服务器以作为“本地系统”用户运行来规避它。

# java - 的值不使用 HtmlUnit 返回

> ID：11187346
> 
> 赞同：0
> 
> 时间：2012-06-25T10:13:56.267
> 
> 标签：java, javascript, jquery, html-parsing, htmlunit

我在网页中有一个表格结构，如下所示

在此，我试图使用 HtmlUnit 代码获取 tr 中的所有值，如下所示。

```
<tr  class="odd" id="rawmeta-123">
       <td class="rowid">1</td>
       <td>Arun</td>
       <td class="date">2006-04-13</td>
       <td></td>
       <td class="date"></td>
       <td></td>
       <td></td>
     </tr> 
```

List byXPath = page2.getByXPath("//tr[@class='odd']/td/text()");

它返回前三个和第五个 td 值。但是不返回另一个的值。（

```
<td></td>). How to get this value as null using HtmlUnit? 
```

我非常感谢您的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:22:40.633

您是否正在寻找这样的东西：？

```
HtmlTableRow tr = (HtmlTableRow) page.getByXPath("//tr[@class='odd']/");
for (HtmlTableCell td: tr.getCells() ) {
    if (td.getTextContent().isEmpty()) {
    // this is null
    }
} 
```

# c# - 是否可以通过属性做同样的事情？

> ID：11187348
> 
> 赞同：0
> 
> 时间：2012-06-25T10:14:04.947
> 
> 标签：c#, asp.net-mvc-3

我有一个问题，我在这个地方描述了[如何创建UIHit YesNoNull？](https://stackoverflow.com/questions/11177740/how-create-uihit-yesnonull)

我通过创建一个助手解决了这个问题：

```
public static MvcHtmlString YesNoNull(this HtmlHelper helper, string name)
{
    return YesNoNull(helper, name, false);
}

public static MvcHtmlString YesNoNull(this HtmlHelper helper, string name, bool selected)
{
    var builder = new StringBuilder(500);
    builder.Append(string.Format("<input id='checkbox_{0}' type='checkbox' />Есть", name));
    builder.Append("<script type=\"text/javascript\">$(function () {");
    builder.Append(string.Format("$('#checkbox_{0}').click(function () {{", name));
    builder.Append(@"var checked = $(this).attr('checked');if (checked != undefined) {");
    builder.Append(string.Format("$('#{0}').show();}}", name));
    builder.Append(string.Format("else {{$('#{0}').hide();}}  }});", name));
    builder.Append(string.Format("$('#checkbox_{0}').attr('checked', {1});", name, selected.ToString().ToLower())); 
    builder.Append(string.Format("var checked = $('#checkbox_{0}').attr('checked');if (checked != undefined){{ $('#{0}').show(); }}else{{$('#{0}').hide();}}", name));
    builder.Append("})</script>");

    return new MvcHtmlString(builder.ToString());
} 
```

我这样使用它：

```
@Html.YesNoNull("VenueUrl", false)
@Html.EditorFor(model => model.VenueUrl) 
```

是否可以做同样的事情但不使用助手和唯一的设计：

```
@Html.EditorFor(model => model.VenueUrl) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:42:27.130

我相信您可以在`~/Views/Shared/EditorTemplates/`调用中创建一个模板`YesNoNull.cshtml`并在那里添加标记。

每当您调用`@Html.EditorFor`视图时，它都会查找`~/Views/Shared/EditorTemplates`或查找`~/Views/Shared/DisplayTemplates/`与模型类型匹配的模板。

因此，对于字符串，它将采用 String.cshtml，对于 DateTime，它将采用 DateTime.cshtml，依此类推。如果你定义一个 UIHint 属性，它应该把你称之为 UIHint 的任何东西作为模板

# hibernate - Hibernate Batch 插入/更新约束违反异常

> ID：11187359
> 
> 赞同：4
> 
> 时间：2012-06-25T10:15:13.977
> 
> 标签：hibernate, batch-processing

我正在编写一个程序来对数十万个相关类型的实体运行批处理。我最初是通过每个持久化的单个事务来执行此操作的。[这看起来很慢，所以我尝试按照http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/batch.html)中描述的方式进行一些幼稚的批量更新，交易时间更长，偶尔刷新+清除。我的某些实体类型遇到了 ConstraintViolationException，因为我有唯一的字段约束。但是，我不确定如何检查现有实例；我目前有一个列出冲突的标准，但它似乎没有返回我在同一事务中保存或更新的实体。

一个虚构的例子可能会有所帮助：
实体 Family、Person、Name
Family 有很多 Person（一对多） Person
有很多名字，不同的 Person 可以有相同的 Name。（多对多）

我的更新包括保留一个家庭及其人员和名称，但我不确定如何对名称进行重复数据删除（可能与数据库中的现有名称或同一更新批次中的另一个名称冲突）。我可以在休眠之外跟踪新实体的唯一约束字段，但我认为这可能没有必要。是否有任何内置方法可以检查数据库中的重复项和未提交的更改？我看到[Hibernate 使用 constraintviolationexception 进行批量更新](https://stackoverflow.com/questions/8138559/hibernate-batch-updates-with-constraintviolationexception)，但我不喜欢在正常代码路径中使用异常。谢谢，我很感激任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:29:28.693

简短的回答：没有。对于批处理操作，Hibernate 不会跟踪生成的 id，因此，您必须为 each 访问数据库`Name`，因为您将根据名称而不是 ID 进行查询，除非您正在使用一些查询缓存（我想这对你的情况来说很棘手）。

我的建议是分两步（三个？）过程：首先，批量插入所有`Name`对象。然后，使用 Hibernate 本身加载它们，将它们存储在`Map`. 然后，只保留其他数据，将 链接`Name`到 non-persisted `Person`。当然，你需要和你的名字一样多的内存:-) 但是你为什么要`Name`作为一个单独的实体保留呢？

# facebook - 同一窗口而不是新窗口上的 Fb.ui 提要方法

> ID：11187361
> 
> 赞同：0
> 
> 时间：2012-06-25T10:15:32.040
> 
> 标签：facebook, fbjs, facebook-javascript-sdk

该`Fb.ui` `feed`方法打开一个新的小窗口以发布新的提要。我希望它在同一窗口中打开发布请求，并在将重定向发布到相同（上一个）窗口之后。

任何人？？

**编辑：** FB.init({appId: "1234567890", status: true, cookie: true});

```
 function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      display: 'touch',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  } 
```

@Nitzan Tomer

是的，这会打开对话框，但这个东西在 iPhone/iPad 中不起作用。如果有效，那么我不想为它打开一个新窗口/标签，但希望整个过程（身份验证和发布）在用户所在的同一窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:58:12.157

您可以使用[Facebook 开发者网站上](https://developers.facebook.com/docs/reference/dialogs/feed/)给出的重定向 url 方法。

```
https://www.facebook.com/dialog/feed?
  app_id=123050457758183&
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=http://www.example.com/response 
```

# .net - 未定义符号 := vb.net 中的运算符

> ID：11187362
> 
> 赞同：0
> 
> 时间：2012-06-25T10:15:36.653
> 
> 标签：.net, vb.net

有什么方法可以增强和获取有关`:=`运营商的信息？

我如何使用这个运算符，有什么好处？我试图搜索引擎，但一无所获。

看一看：

```
xlssheat = Nothing
xlsfile.Close(SaveChanges := True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:17:31.040

msdn 网站上有很多

[http://msdn.microsoft.com/en-us/library/51wfzyw0.aspx](http://msdn.microsoft.com/en-us/library/51wfzyw0.aspx)

简而言之，运算符用于根据参数的名称而不是参数在参数列表中的位置为参数提供值。

# asp.net - SharePoint/ASP.NET 生命周期和数据绑定

> ID：11187365
> 
> 赞同：0
> 
> 时间：2012-06-25T10:15:40.150
> 
> 标签：asp.net, sharepoint, data-binding

我在将数据绑定到网格以及在什么事件中执行此操作时遇到问题。我使用的是 DevExpress ASPxGridView，但我尝试过的其他一些网格也会发生这种情况。

我们依靠 Web 部件属性来确定要检索哪些数据，因此我们必须在 OnPreRender 事件中进行网格数据绑定。如果我们进行任何分组，则网格的展开/折叠不起作用。如果将数据绑定移至 OnLoad 事件，则一切正常。有没有合适的方法来做到这一点，还是只是不支持？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:35:52.423

这是关于何时将哪些事件用于共享点 Web 部件的一个很好的解释。[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/ca47c7a9-226d-412d-8390-041edc154636/](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/ca47c7a9-226d-412d-8390-041edc154636/)

话虽如此，我通常坚持 createchildcontrols 事件。

# javascript - 在javascript中将浮点数四舍五入到下一个整数

> ID：11187367
> 
> 赞同：70
> 
> 时间：2012-06-25T10:15:51.803
> 
> 标签：javascript, floating-point, rounding

我需要将浮点数四舍五入到最接近的整数，即使该点后面的数字小于 0.5。

例如，

*   4.3 应该是 5（不是 4）
*   4.8 应该是 5

如何在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-06-25T10:16:40.180

使用[`Math.ceil`^([MDN])](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/ceil)功能

```
var n = 4.3;
alert(Math.ceil(n)); //alerts 5 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-25T10:17:02.670

采用`ceil`

```
var n = 4.3;
n = Math.ceil(n);// n is 5 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-20T07:50:50.157

向上舍入到第二个 (0.00) 小数点：

```
 var n = 35.85001;
 Math.ceil(n * 100) / 100;  // 35.86 
```

到第一个（0.0）：

```
 var n = 35.800001;
 Math.ceil(n * 10) / 10;    // 35.9 
```

为整数：

```
 var n = 35.00001;
 Math.ceil(n);              // 36 
```

[`jsbin.com`](http://jsbin.com/kolejusizi/edit?html,js,console)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-25T10:18:25.373

采用

```
Math.ceil( floatvalue ); 
```

它将根据需要舍入该值。

# asp.net-mvc - 路由约束重定向

> ID：11187368
> 
> 赞同：3
> 
> 时间：2012-06-25T10:15:52.913
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

如果路由约束失败，我希望能够重定向，而不仅仅是返回 404。这是场景：

*   用户点击页面 www.test.com/preview/home/
*   路由约束检查是否可以预览页面
*   如果没有，请重定向到 www.foo.com/home/

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:43:33.753

这是可能的，但没有路线限制。路由约束不打算以这种方式使用。如果不满足路由约束，则路由不匹配。如果您想执行一些授权并在此授权失败时重定向，您最好编写自定义 Authorize 属性并用它装饰您的控制器操作。

有2种可能：

1.  您想要将自定义授权逻辑添加到现有属性。在这种情况下，如果此逻辑失败，您从 AuthorizeAttribute 派生并覆盖`AuthorizeCore`和`HandleUnauthorizedRequest`执行自定义授权和重定向（而不是导航到登录页面）的方法。

2.  您不需要任何基本功能。在这种情况下，您从 FilterAttribute 派生并实现`IAuthorizationFilter`接口并将您的授权和重定向逻辑放入`OnAuthorization`方法中。

这是一个使用您在任何地方都可以访问的 filterContext 如果授权逻辑失败时如何重定向的示例：

```
var values = new RouteValueDictionary(new
{
    controller = "home",
    action = "index"
});
filterContext.Result = new RedirectToRouteResult(values); 
```

# android - 在android中的触摸区域放置图像

> ID：11187372
> 
> 赞同：0
> 
> 时间：2012-06-25T10:16:03.450
> 
> 标签：android, touch-event

我需要在用户触摸屏幕的任何位置创建图像。如果用户触摸更多的地方，图像应该显示在所有的地方。我使用了以下代码。

```
package com.tag.image;

import android.app.Activity;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.MotionEvent;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.Toast;

public class TagsOverImage extends Activity {
    /** Called when the activity is first created. */
    Canvas canvas ;
    LinearLayout ll;
    ImageView myImageView;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ll=(LinearLayout)findViewById(R.id.lay_lin);
         myImageView= new ImageView(this);
    }
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        //ll.removeView(myImageView);

         int x = (int)event.getX();
        int  y = (int)event.getY();
        switch (event.getAction()) {            
            case MotionEvent.ACTION_DOWN:           
            myImageView.setImageResource(R.drawable.sample);
             String text = "You click at x = " + event.getX() + " and y = " + event.getY();
             Toast.makeText(this, text, Toast.LENGTH_LONG).show();
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(50, 50);
            params.setMargins(x,y, 0, 0);
            myImageView.setLayoutParams(params);
            ll.addView(myImageView);

        }            
        return super.onTouchEvent(event);         
    }
} 
```

我收到以下错误。

```
06-25 15:43:44.180: E/AndroidRuntime(2586): Uncaught handler: thread main exiting due to uncaught exception
06-25 15:43:44.190: E/AndroidRuntime(2586): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.view.ViewGroup.addViewInner(ViewGroup.java:1946)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.view.ViewGroup.addView(ViewGroup.java:1841)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.view.ViewGroup.addView(ViewGroup.java:1798)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.view.ViewGroup.addView(ViewGroup.java:1778)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at com.tag.image.TagsOverImage.onTouchEvent(TagsOverImage.java:41)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.app.Activity.dispatchTouchEvent(Activity.java:2067)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.os.Looper.loop(Looper.java:123)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at android.app.ActivityThread.main(ActivityThread.java:4370)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at java.lang.reflect.Method.invokeNative(Native Method)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at java.lang.reflect.Method.invoke(Method.java:521)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-25 15:43:44.190: E/AndroidRuntime(2586):     at dalvik.system.NativeStart.main(Native Method)
06-25 15:43:44.200: E/SemcCheckin(2586): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump 
```

更新：

在案例 MotionEvent.ACTION_DOWN 中使用了此代码：

```
myImageView.setImageResource(R.drawable.sample);
WindowManager windowsManager = (WindowManager) TagsOverImage.this.getSystemService(Context.WINDOW_SERVICE);
WindowManager.LayoutParams windowParams = new WindowManager.LayoutParams();
windowParams.x = (int) event.getX();
windowParams.y =  (int) event.getY();
windowParams.height = myImageView.getHeight();
windowParams.width = myImageView.getWidth();
windowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                    | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                    | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                    | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
windowParams.format = PixelFormat.TRANSLUCENT;
windowParams.windowAnimations = 0;
windowsManager.updateViewLayout(myImageView, windowParams); //error at this line 
```

在最后一行得到以下异常

```
06-25 17:10:05.320: E/AndroidRuntime(3511): Uncaught handler: thread main exiting due to uncaught exception
06-25 17:10:05.330: E/AndroidRuntime(3511): java.lang.IllegalArgumentException: View not attached to window manager
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:355)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.view.WindowManagerImpl.updateViewLayout(WindowManagerImpl.java:191)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.view.Window$LocalWindowManager.updateViewLayout(Window.java:428)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at com.tag.image.TagsOverImage.onTouchEvent(TagsOverImage.java:63)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.app.Activity.dispatchTouchEvent(Activity.java:2067)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.os.Looper.loop(Looper.java:123)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at android.app.ActivityThread.main(ActivityThread.java:4370)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at java.lang.reflect.Method.invoke(Method.java:521)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-25 17:10:05.330: E/AndroidRuntime(3511):     at dalvik.system.NativeStart.main(Native Method)
06-25 17:10:05.340: E/SemcCheckin(3511): Get crash dump level : java.io.FileNotFoundException: /data/semc-checkin/crashdump 
```

* * *

我试过这个链接，它对我有用。[http://eleanordarephdjournal.blogspot.in/2011/03/simplest-possible-android-graphic.html](http://eleanordarephdjournal.blogspot.in/2011/03/simplest-possible-android-graphic.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:14:22.417

您需要更新视图的位置，而不是再次添加它。

这是如何做到的：

```
WindowManager windowsManager = (WindowManager) mContext.getSystemService(Context.WINDOW_SERVICE)

WindowManager.LayoutParams windowParams = new WindowManager.LayoutParams();
windowParams.x = <new X coord>;
windowParams.y = <new Y coord>
windowParams.height = myImageView.getHeight();
windowParams.width = myImageView.getWidth();
windowParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
                    | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE
                    | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
                    | WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                    | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS;
windowParams.format = PixelFormat.TRANSLUCENT;
            windowParams.windowAnimations = 0;

windowManager.updateViewLayout(myImageView, windowParams); 
```

# oracle - 如何声明弱类型 SYS_REFCURSOR 变量的 %ROWTYPE？

> ID：11187376
> 
> 赞同：8
> 
> 时间：2012-06-25T10:16:22.333
> 
> 标签：oracle, stored-procedures, plsql, sys-refcursor, rowtype

下面的 Wrt 代码我不能将 fetch-into-variable 的类型声明为基础表的 %ROWTYPE，因为 SYS_REFCURSOR 位于连接两个表的选择上，并且还选择了一些在基础两个表的属性上调用的函数；即我不能声明为 L_RECORD T%ROWTYPE

```
---
DECLARE
  P_RS SYS_REFCURSOR;
  L_RECORD P_RS%ROWTYPE;
BEGIN
  CAPITALEXTRACT(
    P_RS => P_RS
  );
    OPEN P_RS;
    LOOP
      BEGIN
        FETCH P_RS INTO L_RECORD;
        EXIT WHEN P_RS%NOTFOUND;
        ...
      EXCEPTION
        WHEN OTHERS THEN
        ...
      END;
    END LOOP;
    CLOSE P_RS;
END;
--------
CREATE or REPLACE PROCEDURE CAPITALEXTRACT
(
    p_rs OUT SYS_REFCURSOR
) AS
BEGIN
  OPEN p_rs for 
     select t.*,tminusone.*, f(t.cash), g(t.cash) FROM T t, TMINUSONE tminusone
    where t.ticket=tminusone.ticket;
END CAPITALEXTRACT; 
```

当然，我不想用 SYS_REFCURSOR 中返回的列定义静态表 R，然后声明为 L_RECORD R%ROWTYPE。

因此问题是：如何声明弱类型 SYS_REFCURSOR 变量的 %ROWTYPE ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T19:54:37.170

简短的回答是，你不能。您需要为将要返回的每一列定义一个变量。

```
DECLARE
    P_RS SYS_REFCURSOR;
    L_T_COL1 T.COL1%TYPE;
    L_T_COL1 T.COL2%TYPE;
    ... 
```

然后获取列列表：

```
FETCH P_RS INTO L_T_COL1, L_T_COL2, ... ; 
```

只要您知道您在 ref 光标中的期望，这很痛苦但可以管理。但是，在您的过程中使用`T.*`会使这变得脆弱，因为向表中添加列会破坏认为它知道有哪些列以及它们的顺序的代码。（如果表不是，您也可以在环境之间破坏它始终如一地构建 - 我见过在不同环境中列排序不同的地方）。您可能希望确保只选择您真正关心的列，以避免为您永远不会阅读的内容定义变量。

从 11g 开始，您可以使用该[`DBMS_SQL`](http://docs.oracle.com/cd/E11882_01/appdev.112/e23448/d_sql.htm)包将您的光标转换`sys_refcursor`为`DBMS_SQL`光标，然后您可以查询它以确定列。作为您可以执行的操作的示例，这将打印出每一行中每一列的值，并带有列名：

```
DECLARE
    P_RS SYS_REFCURSOR;
    L_COLS NUMBER;
    L_DESC DBMS_SQL.DESC_TAB;
    L_CURS INTEGER;
    L_VARCHAR VARCHAR2(4000);
BEGIN
    CAPITALEXTRACT(P_RS => P_RS);
    L_CURS := DBMS_SQL.TO_CURSOR_NUMBER(P_RS);
    DBMS_SQL.DESCRIBE_COLUMNS(C => L_CURS, COL_CNT => L_COLS,
        DESC_T => L_DESC);

    FOR i IN 1..L_COLS LOOP
        DBMS_SQL.DEFINE_COLUMN(L_CURS, i, L_VARCHAR, 4000);
    END LOOP;

    WHILE DBMS_SQL.FETCH_ROWS(L_CURS) > 0 LOOP
        FOR i IN 1..L_COLS LOOP
            DBMS_SQL.COLUMN_VALUE(L_CURS, i, L_VARCHAR);
            DBMS_OUTPUT.PUT_LINE('Row ' || DBMS_SQL.LAST_ROW_COUNT
                || ': ' || l_desc(i).col_name
                || ' = ' || L_VARCHAR);
        END LOOP;
    END LOOP;

    DBMS_SQL.CLOSE_CURSOR(L_CURS);
END;
/ 
```

这并没有太大的实际用途，为了简洁起见，我将每个值都视为一个字符串，因为无论如何我只想打印它。查看文档并搜索更多实际应用的示例。

如果您只想要参考光标中的几列，我想，您可以循环`l_desc`并记录`column_name`您感兴趣的位置，作为数字变量；然后，您可以稍后通过该变量引用该列，您通常会在游标循环中使用该名称。取决于您对数据的处理方式。

但是，除非您*期望*不知道要返回的列顺序，否则这不太可能，因为您似乎控制了该过程-假设您摆脱了`.*`s-您最好将返回的列减少到您需要的最低限度，只需单独声明它们。

# android - 在 startActivityResult() 上传递的意图始终为空

> ID：11187377
> 
> 赞同：0
> 
> 时间：2012-06-25T10:16:24.407
> 
> 标签：android, android-intent, android-camera

在我的应用程序中，我必须从本机相机应用程序捕获照片，然后将其存储在我想要的文件夹中，然后在新的 Activity 中显示捕获的图像。到目前为止我的代码

启动本机相机

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

我的其他方法

```
private static Uri getOutputMediaFileUri(int type){
    return Uri.fromFile(getOutputMediaFile(type));
}

/**Create a file for saving an image*/
private static File getOutputMediaFile(int type){

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "KidzPuzzle");

    //Create a storage directory if it does not exist
    if(! mediaStorageDir.exists()){
        if(! mediaStorageDir.mkdirs()){
            Log.d("KidzPuzzle", "Failed to create directory");
            return null;
        }
    }

    //Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile = null;
    if(type == MEDIA_TYPE_IMAGE){
        mediaFile = new File(mediaStorageDir.getPath()+File.separator+"IMG_"+timeStamp+".jpg" );
        return mediaFile;
    }else{
        return null;
    }
}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if(requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE){
        if(resultCode == RESULT_OK){
            //Image created and saved successfully to the specified fileUri
            //Toast.makeText(this, "Image saved to : \n"+data.getDataString(), Toast.LENGTH_LONG).show();
            String filePath = ((Uri) data.getExtras().get(MediaStore.EXTRA_OUTPUT)).toString();
            Bitmap bitmap = BitmapFactory.decodeFile(filePath);
            startActivity(new Intent(this, SplitImageActivity.class).putExtra("image", bitmap));
        }else if(resultCode == RESULT_CANCELED){
            //user canceled the captured image
        }else{
            //Image capture failed
        }
    }
} 
```

onActivityResult 中的意图变量**数据**始终为空。请帮助我哪里出错了。

注意：当我调试它时，控件总是满足 RESULT_OK 条件并显示**NullPointerException**，因为**data**的值。

还有一件事，如果我不使用

```
fileUri = getOutputMediaFileUri(MEDIA_TYPE_IMAGE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); 
```

此代码在启动本机相机之前，则**数据**不为空。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:24:11.233

```
Chandra Sekhar, 
```

正如您在最后提到的那样，当您`don't specify location`获取图像时`data is not null`，`AFAIK`它清楚地表明当您传递位置时，它将返回 null 并且您将在您的位置收到您的图像。因此，您需要`location separately and use that to access image`在获得`RESULT_OK`.

# c# - 获取 ListView 可见项

> ID：11187382
> 
> 赞同：16
> 
> 时间：2012-06-25T10:16:48.747
> 
> 标签：c#, .net, wpf, vb.net, listview

我有一个`ListView`可能包含很多物品的物品，所以它是`virtualized`和回收物品。它不使用排序。我需要刷新一些值显示，但是当项目太多时，更新所有内容太慢，所以我想只刷新可见项目。

如何获得所有当前显示项目的列表？我试图查看`ListView`or `ScrollViewer`，但我仍然不知道如何实现这一点。解决方案不能遍历所有项目来测试它们是否可以看到，因为这太慢了。

我不确定代码或 xaml 是否有用，它只是一个/`Virtualized`绑定到一个.`Recycling ListView``ItemSource``Array`

**编辑：** 回答：
感谢akjoshi，我找到了方法：

*   获得`ScrollViewer`of the `ListView` （使用一种`FindDescendant`方法，您可以自己使用`VisualTreeHelper`）。

*   阅读它`ScrollViewer.VerticalOffset`：它是显示的第一个项目的编号

*   阅读它`ScrollViewer.ViewportHeight`：它是显示的项目数。
    Rq ：`CanContentScroll`必须为真。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T10:48:13.953

在 MSDN 上查看这个问题，展示一种找出可见`ListView`项目的技术 -

[如何在 ListView 中找到实际可见的行（ListViewItem(s)）？](http://social.msdn.microsoft.com/Forums/en/wpf/thread/8543eaa7-bd43-41ad-aee8-874d9b30799c)

这是该帖子中的相关代码-

```
listView.ItemsSource = from i in Enumerable.Range(0, 100) select "Item" + i.ToString();
listView.Loaded += (sender, e) =>
{
    ScrollViewer scrollViewer = listView.GetVisualChild<ScrollViewer>(); //Extension method
    if (scrollViewer != null)
    {
        ScrollBar scrollBar = scrollViewer.Template.FindName("PART_VerticalScrollBar", scrollViewer) as ScrollBar;
        if (scrollBar != null)
        {
            scrollBar.ValueChanged += delegate
            {
                //VerticalOffset and ViweportHeight is actually what you want if UI virtualization is turned on.
                Console.WriteLine("Visible Item Start Index:{0}", scrollViewer.VerticalOffset);
                Console.WriteLine("Visible Item Count:{0}", scrollViewer.ViewportHeight);
            };
        }
    }
}; 
```

您应该做的另一件事是使用[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)as your`ItemSource`而不是`Array`; 那肯定会[提高性能](http://msdn.microsoft.com/en-us/library/aa970683%28v=vs.85%29.aspx#data_binding)。

**更新：**

是的，这可能是真的（`array`vs. `ObservableCollection`），但我想看看一些与此相关的统计数据；

真正的好处`ObservableCollection`是，如果您需要`ListView`在运行时从您的项目中添加/删除项目，那么`Array`您将不得不重新分配`ItemSource`of`ListView`并且第`ListView`一个丢弃其先前的项目并重新生成其整个列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-28T14:28:28.660

在试图找出类似的东西之后，我想我会在这里分享我的结果（因为它似乎比其他回复更容易）：

我从[这里](https://stackoverflow.com/questions/1517743/in-wpf-how-can-i-determine-whether-a-control-is-visible-to-the-user)得到的简单能见度测试。

```
private static bool IsUserVisible(FrameworkElement element, FrameworkElement container)
{
    if (!element.IsVisible)
        return false;

    Rect bounds =
        element.TransformToAncestor(container).TransformBounds(new Rect(0.0, 0.0, element.ActualWidth, element.ActualHeight));
    var rect = new Rect(0.0, 0.0, container.ActualWidth, container.ActualHeight);
    return rect.Contains(bounds.TopLeft) || rect.Contains(bounds.BottomRight);
} 
```

之后，您可以遍历 listboxitems 并使用该测试来确定哪些是可见的。由于列表框项的顺序始终相同，因此此列表中的第一个可见项将是用户的第一个可见项。

```
private List<object> GetVisibleItemsFromListbox(ListBox listBox, FrameworkElement parentToTestVisibility)
{
    var items = new List<object>();

    foreach (var item in PhotosListBox.Items)
    {
        if (IsUserVisible((ListBoxItem)listBox.ItemContainerGenerator.ContainerFromItem(item), parentToTestVisibility))
        {
            items.Add(item);
        }
        else if (items.Any())
        {
            break;
        }
    }

    return items;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:24:20.950

我如何看待事物：

*   一方面，你有你的数据。它们必须是最新的，因为这是您的信息在内存中的位置。迭代你的数据列表应该很快，最重要的是，可以在后台的另一个线程上完成

*   在另一边，你有显示器。由于它是虚拟化的，因此您`ListView`已经使用了仅刷新显示数据的技巧！你不需要更多的技巧，它已经到位了！

在最后一项工作中，对 an 使用绑定`ObservableCollection`是一个很好的建议。如果您打算`ObservableCollection`从另一个线程修改，我会推荐这个：[http ://blog.quantumbitdesigns.com/2008/07/22/wpf-cross-thread-collection-binding-part-1/](http://blog.quantumbitdesigns.com/2008/07/22/wpf-cross-thread-collection-binding-part-1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-05T05:39:33.583

如果您启用了虚拟化**ListView**，那么您可以获得所有 Current Visible 项目，如下所示：

1.  获取 VirtualizingStackPanel
2.  获取 VirtualizingStackPanel 中的所有 ListViewItem

代码如下所示。

```
VirtualizingStackPanel virtualizingStackPanel = FindVisualChild<VirtualizingStackPanel>(requiredListView);
List<ListViewItem> items = GetVisualChildren<ListViewItem>(virtualizingStackPanel); 
```

功能如下所示。

```
private childItem FindVisualChild<childItem>(DependencyObject obj) where childItem : DependencyObject
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        if (child != null && child is childItem)
            return (childItem)child;
        else
        {
            childItem childOfChild = FindVisualChild<childItem>(child);
            if (childOfChild != null)
                return childOfChild;
        }
    }
    return null;
}

private List<childItem> GetVisualChildren<childItem>(DependencyObject obj) where childItem : DependencyObject
{
    List<childItem> childList = new List<childItem>();
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        if (child != null && child is childItem)
            childList.Add(child as childItem);
    }

    if (childList.Count > 0)
        return childList;

    return null;
} 
```

这将返回为显示加载的当前**ListViewItem列表。**希望能帮助到你 ：）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-01T10:19:08.490

我花了很多时间为此寻找更好的解决方案，在我的情况下，我有一个滚动查看器，里面装满了可以设置为可见/不可见的自定义高度的项目，我想出了这个。它的作用与上述解决方案相同，但只占用了 CPU 的一小部分。我希望它对某人有所帮助。listview / scrollpanel 的第一项是 TopVisibleItem

```
 public int TopVisibleItem { get; private set; }

    private double CurrentDistance;

    private void TouchScroller_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        if (myItemControl.Items.Count > 0)
        {
            MoveDirection direction = (MoveDirection)Math.Sign(e.VerticalChange);
            if (direction == MoveDirection.Positive)
                while (CurrentDistance < e.VerticalOffset && TopVisibleItem < myItemControl.Items.Count)
                {
                    CurrentDistance += ((FrameworkElement)myItemControl.Items[TopVisibleItem]).ActualHeight;
                    TopVisibleItem += 1;
                }
            else
                while (CurrentDistance >= e.VerticalOffset && TopVisibleItem > 0)
                {
                    CurrentDistance -= ((FrameworkElement)myItemControl.Items[TopVisibleItem]).ActualHeight;
                    TopVisibleItem -= 1;
                }
        }
    }

    public enum MoveDirection
    {
        Negative = -1,
        Positive = 1,
    } 
```

# android - 如何删除自定义标题栏中的空格

> ID：11187389
> 
> 赞同：0
> 
> 时间：2012-06-25T10:17:16.900
> 
> 标签：android, android-titlebar

描述：我正在创建自定义标题栏。自定义代码如下：

样式.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">50dp</item>
     </style>
</resources> 
```

标题.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/customtitlecolor" >

    <Button
        android:id="@+id/about_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="9px"
        android:layout_marginTop="6px"
        android:background="@drawable/custombuttoncolor"
        android:paddingBottom="8px"
        android:paddingLeft="8px"
        android:paddingRight="8px"
        android:paddingTop="8px"
        android:text="Back"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/about_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout>

and finally 

customizedtitlecolor.xml

    <?xml version="1.0" encoding="UTF-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
     <gradient android:startColor="#000000" android:endColor="#777777" android:angle="90"/>
     <corners android:radius="7dp"/>
    </shape> 
```

我的主要活动中的代码

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title); 
```

问题：我的自定义标题没有采用填充父宽度。左右两侧有灰色空间。如何删除这些空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:39:36.853

这样做会解决：

你的风格 XML：

```
<resources> 
 <style name="CustomWindowTitleBackground" /> 
 <style name="CustomTheme" parent="android:Theme"> 
 <item name="android:windowTitleSize">50dp</item>
 <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground
 </item>
 </style> </resources>> 
```

然后在清单中将其称为：

```
 android:theme="@style/CustomTheme"> 
```

希望这有帮助。

# sockets - 如何测试我在 AWS beanstalk 上部署的后台服务器应用程序是否通过带有 android 移动客户端的套接字流获取消息？

> ID：11187391
> 
> 赞同：1
> 
> 时间：2012-06-25T10:17:19.663
> 
> 标签：sockets, amazon-web-services, chat, amazon-elastic-beanstalk

整个主题实际上就像一个**聊天应用程序**向 aws 服务器发送一个简单的字符串消息，它使用该消息在服务器端进行计算并将一个简单的字符串消息作为解决方案发送回客户端。

**服务器：**我编写了一个服务器类，并通过 eclipse 将其部署到 aws beanstalk。*（见代码服务器）*

**客户端：**我的 android 设备创建了一个套接字，建立了与我的 aws beanstalk ip 和 8080 端口的成功连接，同时在监听来自服务器的传入消息的线程中迭代了一个无休止的 while 循环。*（见代码 Client 和 ClientThread）*

**问题：**我的问题是我不知道如何检查服务器是否收到了来自客户端的连接请求和消息。我如何确保 aws beanstalk 上的代码实际上在后台运行，持续监听传入的连接？我已经部署了代码，aws beanstalk会自动启动Server Class的main方法并无限运行吗？

这是服务器代码：

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {
public static void main(String args[]) {
    ServerSocket server = null;
    System.out.println("Trying to open serversocket!");
    try {
        server = new ServerSocket(8080);
    } catch (IOException e) {
        System.out.println("Error on port: 8080 " + ", " + e);
        System.exit(1);
    }

    System.out
            .println("Server setup and waiting for client connection ...");

    Socket client = null;
    try {
        client = server.accept();
    } catch (IOException e) {
        System.out.println("Did not accept connection: " + e);
        System.exit(1);
    }

    System.out
            .println("Client connection accepted. Moving to local port ...");

    try {
        DataInputStream streamIn = new DataInputStream(
                new BufferedInputStream(client.getInputStream()));
        DataOutputStream streamOut = new DataOutputStream(
                new BufferedOutputStream(client.getOutputStream()));

        boolean done = false;
        String line;
        int i = 4;
        while (!done) {

            line = streamIn.readUTF();
            if (line.equalsIgnoreCase(".bye"))
                done = true;
            else
                System.out.println("Client says: " + line);
            if (i == 4) {
                streamOut
                        .writeUTF("Actually connected to Server with round "
                                + i);
                streamOut.flush();
                i++;
            }

        }

        streamIn.close();
        streamOut.close();
        client.close();
        server.close();
    } catch (IOException e) {
        System.out.println("IO Error in streams " + e);
    }
}
} 
```

这是客户端代码：

```
package com.amazon.aws.singlesensor;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import android.util.Log;

class Client implements Runnable {
    private Socket socket = null;
private InputStream streamIn = null;
private OutputStream streamOut = null;

public InputStream getStreamIn() {
    return streamIn;
}

public Client(String serverName, int serverPort) {
    System.out.println("Establishing connection. Please wait ...");
    try {
        socket = new Socket(serverName, serverPort);
        Log.d("DEBUG", "Connected: " + socket);
        start();
    } catch (UnknownHostException uhe) {
        Log.d("DEBUG", "Host unknown: " + uhe.getMessage());
    } catch (IOException ioe) {
        Log.d("DEBUG", "Unexpected exception: " + ioe.getMessage());
    }

}

public void start() throws IOException {
    streamIn = socket.getInputStream();
    streamOut = socket.getOutputStream();

}

public void run() {

    try {
        streamOut.write(streamIn.read());
        streamOut.flush();
    } catch (IOException ioe) {
        System.out.println("Sending error: " + ioe.getMessage());
        stop();
    }

}

public void handle(String msg) {
    if (msg.equals(".bye")) {
        System.out.println("Good bye. Press RETURN to exit ...");
        stop();
    } else
        System.out.println(msg);
}

public void stop() {

    try {
        if (streamIn != null)
            streamIn.close();
        if (streamOut != null)
            streamOut.close();
        if (socket != null)
            socket.close();
    } catch (IOException ioe) {
        System.out.println("Error closing ...");
    }

}

public void send(String msg) {
    PrintWriter printwriter = new PrintWriter(streamOut);
    printwriter.write(msg);
    printwriter.flush();
}

} 
```

这是客户端线程代码

```
 package com.amazon.aws.singlesensor;

 import java.io.IOException;
 import java.io.InputStream;

 import android.os.Handler;

 public class ClientThread extends Thread {

private Client client;
private InputStream input;
private String output;
private Handler handler;
private Runnable runner;

public ClientThread() {

}

public ClientThread(Client client, Handler handler, Runnable runner) {

    this.setClient(client);
    this.input = client.getStreamIn();
    this.handler = handler;
    this.runner = runner;
    this.output = "";

}

public void run() {

    int status = 0;
    while (status != -1) {

        try {
            status = input.read();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        while (status != '~'){
            try {
                status = input.read();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            output = output + String.valueOf((char) status);

            handler.post(runner);
        }
        output = output + "\n";

    }

}

public String giveString(){
    return output;
}

public void setClient(Client client) {
    this.client = client;
}

public Client getClient() {
    return client;
}

 } 
```

**感谢您的时间！**

# android - 无法使用自定义布局取消选择按钮

> ID：11187394
> 
> 赞同：0
> 
> 时间：2012-06-25T10:17:37.983
> 
> 标签：android, layout, custom-controls

我正在实现一个带有 3 个按钮的容器，动态添加。当我选择一个时，我希望取消选择其他的（更改可绘制对象）。这在我将按钮直接添加到我在 XML 中声明的 LinearLayout 时有效。但是当我创建一个扩展 LinearLayout 的自定义布局并将我的按钮放在那里时，它不再起作用（尽管代码几乎相同）。我选择一个按钮并执行取消选择其他按钮的代码，但它们仍然显示选定状态的可绘制对象。

编辑：在这两种情况下，我总是可以选择按钮。选择工作。在自定义视图情况下不起作用的是**取消**选择视图，或者至少在取消选择视图时不会更改可绘制对象。

我将代码减少到查看问题所需的最低限度。

活动：

```
public class TestActivity extends Activity {

private View[] views;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test);

/////////////////////////////////////////////////////////////////
//uncomment this block to see the working code (without custom layout)
//      views = new View[3];
//      LinearLayout root = (LinearLayout) findViewById(R.id.container);
//      findViewById(R.id.myCustomLayout).setVisibility(View.GONE);
//      addButton(root, 0);
//      addButton(root, 1);
//      addButton(root, 2);
//////////////////////////////////////////////////////////////////
}

private void addButton(final ViewGroup root, final int position) {
    View v = new View(this);
    LinearLayout.LayoutParams viewLayoutPars = new LinearLayout.LayoutParams(150, 200);
    v.setLayoutParams(viewLayoutPars);

    v.setBackgroundResource(R.drawable.mybg);

    if (position == 0) {
        v.setSelected(true);
    }

    root.addView(v);

    views[position] = v;

    v.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            for (View view : views) {
                view.setSelected(false);
            }
            v.setSelected(true);
            root.invalidate();
        }
    });
} 
```

}

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
>

    <com.test.MyCustomLayout
        android:id="@+id/myCustomLayout"
        xmlns:dg="http://schemas.android.com/apk/res/com.test"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

我的自定义布局：

```
public class MyCustomLayout extends LinearLayout {
private Context context;

private View[] views;

public MyCustomLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;

    views = new View[3];
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);

    addButton(0);
    addButton(1);
    addButton(2);
}

private void addButton(final int position) {
    View v = new View(context);
    LinearLayout.LayoutParams viewLayoutPars = new LinearLayout.LayoutParams(150, 200);
    v.setLayoutParams(viewLayoutPars);

    v.setBackgroundResource(R.drawable.mybg);

    if (position == 0) {
        v.setSelected(true);
    }

    addView(v);

    views[position] = v;

    v.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            for (View view : views) {
                view.setSelected(false);
            }
            v.setSelected(true);
            invalidate();
        }
    });
}
} 
```

可绘制对象（mybg）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@drawable/selected" />
    <item android:drawable="@drawable/not_selected" />
</selector> 
```

图像是 2 个无害的正方形 selected.png 和 not_selected.png，颜色不同。

提前致谢。

# installation - 在 WiX 中执行 EXE 文件

> ID：11187398
> 
> 赞同：3
> 
> 时间：2012-06-25T10:17:48.593
> 
> 标签：installation, wix, windows-installer

我尝试从 WiX 中的 MSI 文件执行 EXE 文件，但在执行 InitializeSetup 时出现 1603 错误。

```
Action ended 12:09:54: InstallValidate. Return value 1.
Action start 12:09:54: InstallInitialize.
Action ended 12:09:54: InstallInitialize. Return value 3.
Action ended 12:09:54: INSTALL. Return value 3. 
```

这个 WiX 脚本有什么问题？

```
 <Product Name='something' Id='11934d63-12d1-4792-829e-046de3bb987e'
  UpgradeCode='{a101616a-365c-44a7-bfcb-fafb356c2ea1}'
  Language='1033' Version='8.3.4' Manufacturer='something2'>

    <Package Id='*' InstallerVersion='200' Compressed='yes' />

    <Binary Id="Instalator.exe" SourceFile="d:\Instalator.exe"/>
    <CustomAction Id="LaunchFile" BinaryKey="Instalator.exe" ExeCommand="" Execute='deferred' Return='asyncNoWait' Impersonate='no'/>
    <InstallExecuteSequence>
        <Custom Action='LaunchFile' Before='InstallFinalize'/>
    </InstallExecuteSequence>
 </Product> 
```

我不知道为什么，但是当我添加时：

```
<Directory Id='TARGETDIR' Name='SourceDir'>
        <Component Id='MainExecutable' Guid='1193cd63-12d1-4792-829e-046de3bb987e'>
        </Component>
</Directory>

<Feature Id='Complete' Level='1'>
  <ComponentRef Id='MainExecutable' />
</Feature> 
```

在包节点之后 - >然后它工作正常。我需要弄清楚为什么...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T15:41:16.990

我对您在这里所做的事情还有其他一些顾虑，但是如果您确实需要退出进程到 EXE 来完成安装，那么我建议您使用[Quiet Execution Custom Action](http://wix.sourceforge.net/manual-wix3/qtexec.htm)。

尽管出于多种原因，您应该知道这不是一个好的做法。1）它不是声明性的，2）它不支持回滚。还有其他的，但那些是最大的 IMO。

顺便说一句，WiX 不是“脚本”。明白这一点，你就会明白为什么不调用 EXE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:38:34.397

因为您将 exe 作为延迟操作运行，所以它在 SYSTEM 帐户的上下文中运行。此错误是由于系统帐户对文件系统[http://support.microsoft.com/kb/834484](http://support.microsoft.com/kb/834484)没有所需的权限。

可以使用 PowerShell 来解决这个问题，使用 -RunAs 开关执行 exe，但这有点讨厌。这实际上完全取决于您在 exe 中所做的最佳行动方案。我和Painter先生在一起，使用EXE应该是最后的手段。

另一种选择是移动 exe 设置代码，以便它在用户第一次运行应用程序时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T10:59:27.657

**WIX**的重要说明，在完成所有应用程序安装后，.sql 文件或数据库文件将通过`wix`或`wpf`或`winform`应用程序运行。

# c# - ItextSharp 不显示日文字体

> ID：11187400
> 
> 赞同：3
> 
> 时间：2012-06-25T10:17:51.717
> 
> 标签：c#, itextsharp

iTextSharp 不显示日文字体。我找到了一个[解决方案](http://blog.rubypdf.com/2007/08/01/freely-fill-pdf-form-with-the-help-of-itext-or-itextsharp)，但是当我编译时，我收到一条错误消息：

> 无法识别带有“UniGB-UCS2-H”的字体“STSong-Light”。

这是我的源代码：

```
BaseFont.AddToResourceSearch(serverPath + "\\lib\\iTextAsian.dll");
BaseFont.AddToResourceSearch(serverPath + "\\lib\\iTextAsianCmaps.dll");
BaseFont font = BaseFont.CreateFont("STSong-Light", "UniGB-UCS2-H", BaseFont.EMBEDDED);    

using (Document document = new Document())
{
    using (PdfSmartCopy copy = new PdfSmartCopy(
        document, new FileStream(directoryOutPdf + nameOutPdf, FileMode.Create))
    )
    {
        document.Open();

        // generate one page per statement        
        for (int i = 0; i < countBlank.Count; i++)
        {                        
            // replace this with your PDF form template          
            PdfReader reader = new PdfReader(pdfTemplatePath + @"\EmptyTemplateBankBlank_2012.pdf");
            using (var ms = new MemoryStream())
            {
                using (PdfStamper stamper = new PdfStamper(reader, ms))
                {
                    AcroFields form = stamper.AcroFields;
                    form.SetFieldProperty("Info", "textfont", font, null);
                    form.SetField("Info", "_源泉徴収票");                                                                
                    stamper.FormFlattening = true;
                }
                reader = new PdfReader(ms.ToArray());

                copy.AddPage(copy.GetImportedPage(reader, 1));
            }
        }
    }
} 
```

我认为这是因为我没有安装`STSong-Light`字体。不幸的是我找不到`STSong-Light`，因此不得不设置`Stsong`字体，但它仍然不起作用。

```
String fontPath = Path.Combine(serverPath + "\\Fonts", "STSONG.ttf");

BaseFont baseFont = BaseFont.CreateFont(fontPath, "UniGB-UCS2-H", BaseFont.NOT_EMBEDDED);
Font font = new Font(baseFont, 12, Font.NORMAL); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:55:49.927

创建 PdfStamper 后设置 SubstitutionFont：

```
stamper.AcroFields.AddSubstitutionFont(myFont.BaseFont); 
```

# java - 将 xml 转换为网格格式

> ID：11187402
> 
> 赞同：0
> 
> 时间：2012-06-25T10:17:52.767
> 
> 标签：java, javascript, xml

我从 xml 数据中的 RSAQ_REMOTE_QUERY_CALL 获得了数据。我需要在网格视图中格式化该数据。在那个标签中给出了列值，标签分别给出了Feild描述下面我提到了我的xml数据。

```
?xml version="1.0" encoding="UTF-8" ?> 
TABLES>

FPAIRS>

item>

  INDEX_A>0007</INDEX_A> 

  INDEX_U>0008 /INDEX_U> 

  TYPE>E/TYPE> 

  /item>

  /FPAIRS>

LDATA>

item>

  LINE>002:OR,004:0001,002:01,007:SCEM_02,000:, 002:PC;/</LINE> 

  /item>

  /LDATA>

LISTDESC>

item>

  FADD /> 

  FDESC>Sales Organization</FDESC> 

  FNAME>VBAK-VKORG</FNAME> 

  FCOL>SOrg.</FCOL> 

  FNAMENEW>VBAK-VKORG</FNAMENEW> 

  FNAMEINT>VKORG</FNAMEINT> 

  FKEY /> 

  FGTYP /> 

  FNZERO /> 

  FSUM /> 

  FSONLY /> 

  FSORT>00</FSORT> 

FSODS /> 
FSUBT /> 

  FLPOS>0002</FLPOS> 

  FNUMB>98</FNUMB> 

  FNUMBT /> 

  FNOSUM /> 

  FSONP /> 

  /item>

item> 
  FADD /> 

  FDESC>Distribution Channel</FDESC> 

  FNAME>VBAK-VTWEG</FNAME> 

  FCOL>DChl</FCOL> 

  FNAMENEW>VBAK-VTWEG</FNAMENEW> 

  FNAMEINT>VTWEG</FNAMEINT> 

  FKEY /> 

  FGTYP /> 

  FNZERO /> 

  FSUM /> 

  FSONLY /> 

  FSORT>00</FSORT> 

  FSODS /> 

  FSUBT /> 

  FLPOS>0003</FLPOS> 

  FNUMB>98</FNUMB> 

  FNUMBT /> 

  FNOSUM /> 

  FSONP /> 

  /item>

item>

  FADD /> 

  FDESC>Division</FDESC> 

  FNAME>VBAK-SPART</FNAME> 

  FCOL>Dv</FCOL> 

  FNAMENEW>VBAK-SPART</FNAMENEW> 

  FNAMEINT>SPART</FNAMEINT> 

  FKEY /> 

  FGTYP /> 

  FNZERO /> 

  FSUM /> 

  FSONLY /> 
  FSORT>00</FSORT> 

  FSODS /> 

  FSUBT /> 

  FLPOS>0004</FLPOS> 

  FNUMB>98/FNUMB> 

  FNUMBT /> 

FNOSUM /> 

FSONP /> 

  /item>

item>

  FADD /> 

 FDESC>Sold-to party/FDESC> 

  FNAME>VBAK-KUNNR/FNAME> 

  FCOL>Sold-to pt/FCOL> 

  FNAMENEW>VBAK-KUNNR/FNAMENEW> 

  FNAMEINT>KUNNR/FNAMEINT> 

  FKEY /> 

  FGTYP /> 

  FNZERO /> 

  FSUM /> 

  FSONLY /> 

  FSORT>00</FSORT> 

  FSODS /> 

  FSUBT /> 

  FLPOS>0005</FLPOS> 

  FNUMB>98</FNUMB> 

  FNUMBT /> 

  FNOSUM /> 

  FSONP /> 

  /item>

item> 
  FADD /> 

  FDESC>Material Number Used by Customer/FDESC> 

  FNAME>VBAP-KDMAT/FNAME> 

  FCOL>Customer Material Number/FCOL> 

  FNAMENEW>VBAP-KDMAT/FNAMENEW> 

  FNAMEINT>KDMAT/FNAMEINT> 

  FKEY /> 

  FGTYP /> 

 FNZERO /> 

  FSUM /> 

 FSONLY /> 

  FSORT>00</FSORT> 

  FSODS /> 

  FSUBT /> 

  FLPOS>0006</FLPOS> 

  FNUMB>98</FNUMB> 

  FNUMBT /> 

  FNOSUM /> 

  FSONP /> 

  /item>

item>

  FADD /> 

  FDESC>Net Weight of the Item/FDESC> 

 FNAME>VBAP-NTGEW/FNAME> 

  FCOL>Net weight/FCOL> 

  FNAMENEW>VBAP-NTGEW/FNAMENEW> 

  FNAMEINT>NTGEW/FNAMEINT> 

  FKEY /> 

  FGTYP /> 

  FNZERO /> 

  FSUM /> 

 FSONLY /> 

  FSORT>00</FSORT> 

  FSODS /> 

  FSUBT /> 

  FLPOS>0007</FLPOS> 

  FNUMB>98</FNUMB> 

  FNUMBT /> 

  FNOSUM /> 

  FSONP /> 

  /item>

  /LISTDESC>

  SELECTION_TABLE /> 

  /TABLES> 
```

我需要得到如下格式的输出。

输出：

销售组织 分销渠道 划分 售达方 物料编号 客户使用 物料净重

或 0001 01 SCEM_02 空 PC

请建议我如何从我的 xml 数据中获取这种网格格式。请尽可能尽快回复。

提前致谢：）

问候，

喜悦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:46:50.980

你没有提到任何语言，所以我不能给你一个具体的例子，但基本上每一种现代语言都有一个 XML 解析器，所以只需使用解析器从 xml 获取数据，然后你可以将这些数据以 wahtever 格式放置像，包括网格格式。

**更新：**

你需要在这里做几件事：

1.  如果 xml 具有统一的格式（它们都具有相同的结构），您可以获得 XSD 或编写一个（[XSD 教程](http://www.w3schools.com/schema/default.asp)），然后您可以使用[XmlBeans 之](http://xmlbeans.apache.org/)类的框架从模式生成 java 对象并使用它们。那将是最简单的方法。
2.  另一种选择是使用[java DOM API](http://java.sun.com/webservices/reference/tutorials/jaxp/html/dom.html)。API 有点难看，但是一旦你习惯了它就不会那么难了。问题是您需要手动处理每个 xml 结构。

    无论您选择哪种方法，一旦您解析了 XML，您就可以访问数据并使用它做任何您喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:30:32.713

搜索 XML 解析器，您应该可以完成剩下的工作。DOM 应该能够解决上述格式的问题

# android - 使用插入方法时出现空指针异常

> ID：11187404
> 
> 赞同：0
> 
> 时间：2012-06-25T10:17:54.583
> 
> 标签：android, sqlite, nullpointerexception

我在使用我的数据库时遇到问题，我得到空指针异常，我无法解决它任何帮助？？这是我的代码，我不知道为什么会出现此错误，但我确信这是从添加朋友方法引发的

**数据库.java**

```
 public class frienddatabase extends SQLiteOpenHelper {
        public static String databasename="frienddatabase";
        public static int databaseVersion =6;
        public String tablename="friends";
        public String id="_id";
        public String name="name";
        public String email="email";
        public String phone="phone";
        public String pic="pic";
        public String age="age";
        public String edu="edu"; 
```

**构造函数：**

```
 public frienddatabase(Context context) {
            super(context,databasename,null,databaseVersion);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            String create = "CREATE TABLE "+tablename+"("+id+" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,"+name+" Text unique Not null,"+
            email+" TEXT NOT NULL,"+phone+" TEXT NOT NULL,"+pic+" TEXT,"+age+" TEXT NOT NULL,"+edu+" TEXT NOT NULL"+")";
            db.execSQL(create);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS "+tablename);
            onCreate(db);
        } 
```

这是我尝试使用和获取的功能`NullPointer Exception`

```
 public boolean addFriend(String Fname,String Femail,String Fphone,String Fage,String Fedu)
        {
            SQLiteDatabase db=this.getWritableDatabase();
            ContentValues cv = new ContentValues();
            cv.put(name, Fname);
            cv.put(email, Femail);
            cv.put(phone, Fphone);
            cv.put(age, Fage);
            cv.put(edu, Fedu);
            db.insert(tablename, pic, cv);
            db.close();
            return true;
        } 
```

当我尝试使用 addfriend 方法时出现错误：这里 addfriend 类我在其中调用 addfriend 方法

```
 public class addfriend extends Activity {
        EditText name,email,mobile,age,edu;
            Button save,cancel,addimage;
            frienddatabase helper;
            String namex;
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);
                setContentView(R.layout.add);
                name=(EditText)findViewById(R.id.name);
                email=(EditText)findViewById(R.id.email);
                mobile=(EditText)findViewById(R.id.mobile);
                age=(EditText)findViewById(R.id.age);
                edu=(EditText)findViewById(R.id.edu);
                save=(Button)findViewById(R.id.save);
                cancel=(Button)findViewById(R.id.cancel);
                addimage=(Button)findViewById(R.id.addimage);
                helper=new frienddatabase(getApplicationContext());
                        save.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        namex=name.getText().toString();
                        Toast.makeText(getApplicationContext(),namex, Toast.LENGTH_LONG).show();
                        Boolean check = helper.addFriend(name.getText().toString(), email.getText().toString(), mobile.getText().toString(), age.getText().toString(), edu.getText().toString());
                        if(check==null)
                        {
                            Toast.makeText(getApplicationContext(), "null boolean",Toast.LENGTH_LONG).show();
                        }
                        if(check)
                        {
                            Toast.makeText(getApplicationContext(), "new friend added successfull!!", Toast.LENGTH_LONG).show();
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "data not saved ", Toast.LENGTH_LONG).show();
                        }
                    }
                });
}
} 
```

这里也记录猫

```
06-25 12:53:25.041: W/dalvikvm(1290): threadid=1: thread exiting with uncaught exception (group=0x409951f8)
06-25 12:53:25.061: E/AndroidRuntime(1290): FATAL EXCEPTION: main
06-25 12:53:25.061: E/AndroidRuntime(1290): java.lang.NullPointerException
06-25 12:53:25.061: E/AndroidRuntime(1290):     at com.apk.addfriend$1.onClick(addfriend.java:38)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.view.View.performClick(View.java:3460)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.view.View$PerformClick.run(View.java:13955)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.os.Handler.handleCallback(Handler.java:605)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.os.Looper.loop(Looper.java:137)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at android.app.ActivityThread.main(ActivityThread.java:4340)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at java.lang.reflect.Method.invokeNative(Native Method)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at java.lang.reflect.Method.invoke(Method.java:511)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-25 12:53:25.061: E/AndroidRuntime(1290):     at dalvik.system.NativeStart.main(Native Method) 
```

请问有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:32:45.543

您没有在 addFriend() 方法中插入 ID，而是在主键字段中声明 ID，请在您的代码中检查此内容....

# vb.net - 具有两种不同类型控件的基本页面处理事件

> ID：11187407
> 
> 赞同：0
> 
> 时间：2012-06-25T10:18:15.143
> 
> 标签：vb.net, variables, controls

我的问题是……

我有 4 个页面，它们基本上都做同样的事情，即根据输入的信息对特定车辆进行估值，每个页面背后的代码都超过 3.5k 行。

这些页面需要保持独立，以允许访问每个页面的方式之间存在一些细微差别，并允许将来进行更改，但是它们都使用相同的 ID 进行控件，所以我看不出为什么我不能移动事件处理程序到基本页面以及主要功能，这将允许通过引用基本页面并设置我需要的任何页面覆盖来快速添加未来的页面。

所以实际的问题是我在基本页面中将控件定义为公共，例如“Public WithEvents lstCAPManufacturers As FLHighComboBox”现在这在其中的 2 个页面中很好，因为它们使用我们自己的用户控件 FLHighComboBox，当从其他 2 个使用标准 .Net 下拉列表和公共声明的页面消失了。同样的事情发生在一页中的图像按钮是其他页面中的标准按钮，而一页中的 .Net 文本框是其他页面中的 (Telerik) RadTextBoxes。

我确实考虑将这种类型的所有控件声明为对象，然后将它们转换为在页面加载时调用的函数中的适当控件，但这只会导致大量编译错误，我无法访问它们的属性和方法，因为它们是已经定义为对象类型。

所以我真的在寻求如何让这种事情发挥作用的建议，或者如果不是如何让这种事情发挥作用，我应该做什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:42:01.000

Added custom handlers on page load for the controls that needed them and cast the others to their type on page load for those that didn't need handlers.

# c# - c#生产者/消费者队列释放

> ID：11187408
> 
> 赞同：0
> 
> 时间：2012-06-25T10:18:18.293
> 
> 标签：c#, producer-consumer

我读了 producer/consumer queue implementation [Producer/Consumer Queue](http://www.albahari.com/threading/part4.aspx#_Wait_Pulse_Producer_Consumer_Queue)。它工作得很好，但我担心如果客户忘记调用 Shutdown()。我应该如何实现工作线程的释放？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:05:17.900

如果要关闭程序时调用 Shutdown()，则可以在创建线程时将它们标记为后台线程。这意味着它们将在程序关闭时停止，但并不总是理想的，因为线程可以强制终止。

```
Thread t = new Thread()
t.IsBackground = true; 
```

# java - PrepareStatement 挂在 executeUpdate 函数上

> ID：11187413
> 
> 赞同：2
> 
> 时间：2012-06-25T10:18:34.827
> 
> 标签：java, mysql, jdbc, prepared-statement

我的数据库添加功能出现问题。以下代码挂在 ExecuteUpdate 语句上，它不会抛出异常，所以我不知道出了什么问题。

```
public static boolean addUser(User userToAdd) throws Exception {
    boolean isAdded = false;

    if (checkConnection()) {
        try {
            if (isUnique(userToAdd.getIdCardNumber())) {
                PreparedStatement pstmt = connection.prepareStatement("INSERT INTO users SET "
                        + "idCardNr = ?,nationality = ?,name = ?,"
                        + "address = ?,photo = ?,status = ?,gender = ?,"
                        + "nationalNr = ?,birthDate = ?,birthPlace = ?,"
                        + "created = ?, country = ?");

                pstmt.setString(1, userToAdd.getIdCardNumber());
                pstmt.setString(2, userToAdd.getNationality());
                pstmt.setString(3, userToAdd.getFullName());
                pstmt.setString(4, userToAdd.getAddress());
                pstmt.setString(5, userToAdd.getPhotoPath());
                pstmt.setString(6, userToAdd.getStatus());
                pstmt.setString(7, userToAdd.getGender());
                pstmt.setString(8, userToAdd.getRegisterNumber());
                pstmt.setString(9, userToAdd.getBirthday());
                pstmt.setString(10, userToAdd.getBirthPlace());
                java.sql.Timestamp current = new java.sql.Timestamp(System.currentTimeMillis());
                userToAdd.setCreated(current);
                pstmt.setTimestamp(11, userToAdd.getCreated());
                pstmt.setString(12, userToAdd.getCountry());

                int rowsAffected;
                try {
                   rowsAffected = pstmt.executeUpdate();
                } catch (SQLException e) {
                    throw new Exception("Exception while executing update: " + e.getMessage());
                }

                if (rowsAffected != 0) {
                    isAdded = true;
                    pstmt.close();
                }

            } else {
                System.out.println("User already in database");
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    return isAdded;
} 
```

有人可以帮我如何调试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:23:45.330

您的 SQL 格式错误，您正在尝试使用 UPDATE 的语法进行 INSERT。

这就是标准 INSERT 的外观

```
INSERT INTO users (idCardNr,nationality,name,address,photo,status,gender,nationalNr,birthDate,birthPlace,created,country) VALUES (?,?,?,?,?,?,?,?,?,?,?,?) 
```

在将 SQL 放入代码之前手动测试它总是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T20:08:02.680

快速回答：

*   有同样的问题。
*   更新/插入在没有明显原因的情况下挂起 96% 的时间。
*   设置：旧 Java 虚拟机：Windows 上的 JRockit 1.5 + Weblogic 10.0
*   挂在preparedStatement.execute() 上，甚至两次崩溃了整个JVM！

# 原因（JVM 供应商不那么重要）

*   JVM 时区数据已过时，当出现日期参数时弄乱了日期序列化。
*   tzdata 是从 2006 年回来的！我们现在是 2013 年！

# 解决方案

*   使用 JDK 或支持页面中的**TimeZone Updater Tool**。[这里](http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html)是 JRockit JDK 或[这里](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/tzupdate.html)是 Oracle JDK。
*   重新启动您的应用程序。

# facebook - Facebook 通过 PHP 请求

> ID：11187416
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:18:43.337
> 
> 标签：facebook, facebook-requests

我正在尝试从我的 Facebook 应用程序中生成用户到用户请求。

问题是，我只找到使用 JavaScript 的教程。但我想从我的 PHP 环境中向朋友发送请求。

我是否必须以某种方式使用 te Api Call？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:28:25.920

没有可用于向用户发送请求的 PHP 调用，您只能为此使用 Requests JavaScript API 调用。这是为了防止滥用请求 - 通过防止在未经用户同意的情况下在后台自动发送请求。

# c# - .aspx.cs（代码隐藏）或 BLL 或两者中的验证代码？

> ID：11187417
> 
> 赞同：1
> 
> 时间：2012-06-25T10:18:51.433
> 
> 标签：c#, asp.net, validation, business-logic

我正试图打破我编写糟糕代码的一些旧习惯。其中之一是放置验证代码的位置。我认为验证不应该在表示层中。或者那里可能有一些验证？

这是我以前做的一个例子

```
protected void SaveBtn_Click(object sender, EventArgs e)
{

  Item itm = new Item();
  itm.Name = txtName.Text;

  if(String.IsNullOrEmpty(itm.Name))
  {
     //reject
  }
  else
  {
     ItemBLL.Save(itm); //no more validation here
  }
} 
```

或者

```
public class ItemBLL
{

   public static int Save(Item itm)
   {
      //no more validation in .aspx.vb
      if(String.IsNullOrEmpty(itm.Name))
      {
        //reject
      }
      else
      {
       //Save item
      }
   }
} 
```

我一直在使用第一种方法，我正在考虑改用第二种方法，但我无法预料问题会是什么，也无法预料其中一种方法的优势。请提出建议，即使是更好的方法

**更新：** 我同意为了用户的简单验证（例如常见错误）应该在演示文稿（.aspx）中完成（使用javascript，jQuery）。

一些业务逻辑验证也应该驻留在 BLL 中以实现可移植性和可重用性。

这是否意味着我们可以跳过代码隐藏（.aspx.vb 或 .aspx.cs）中的验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:30:46.360

两者都是最好的，但 BLL 是必须的。今天，您的业务类仅由一个界面使用 - 浏览器，但明天您可能希望 Web 服务也使用该类。然后，您将需要所有业务规则都在课堂上，而不是网页中。但是您需要在 Javascript 中测试客户端以提供响应式界面的许多规则。您给出的名称不能为空的示例是 Javascript 测试的经典示例，并且在名称具有值之前不允许启用“保存”按钮。但是，假设 Name 字段必须是唯一的 - 这可能不是您想要在客户端验证的内容，并且愿意等到它到达服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:30:44.410

取决于您所说的“验证”的含义-在表示层中进行简单的数据验证是完全合法的（并且更可取的是，IMO），特别是如果它可以节省往返回发到服务器的等待时间。这就是 jQuery 中 Unobtrusive Validation 库的全部要点，例如 - 防止用户提交我们知道无效的数据（空的必填字段、只有数字有效的字母等）。

我还要说，对验证有一种“检查点”的心态并不是一个坏主意：一旦你跨越了层之间的边界（特别是如果你在任何时候映射到不同的数据类），让确保数据对于该层打算用它做什么是洁净的。

以某种方式验证每一层的一个优点是，如果您在某处再次重用该层，验证逻辑就会随之而来，而不需要在新项目中再次重新实现。

当然，这只是我的意见（根据我的经验）。我想听听更有经验的开发者怎么说...

# c# - 异步protobuf序列化

> ID：11187421
> 
> 赞同：8
> 
> 时间：2012-06-25T10:18:59.520
> 
> 标签：c#, .net, protobuf-net

protobuf-net 实现的一个限制是它同步调用底层流。由于不提供异步 API，例如 BeginSerialize/EndSerialize 或 TPL 等价物，我们被迫占用等待同步流 I/O 的线程。

有没有计划在 protobuf-net 中提供异步方法，或者有什么创造性的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T10:29:20.667

不，这目前不受支持，而且工作量**很大**。

我的建议是：使用异步 API 自己缓冲数据，然后*当*你有数据时，使用类似 a 的东西`MemoryStream`来反序列化......

在我的辩护中，我不知道这里有任何*其他*提供异步 API 的序列化程序。特别是，在谈论慢速/异步流时，这*通常*意味着“网络”：您通常会在那里考虑“框架”问题；protobuf-net 不会知道您的框架要求...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T16:35:51.970

我在网络上使用 protobuff。虽然以下解决方案不能保证它不会阻塞，但它确实让生活变得更好：

```
byte[] emptyByteArray = new Byte[0];
await stream.ReadAsync(emptyByteArray, 0, 0);
TaskData d = Serializer.DeserializeWithLengthPrefix<TaskData>(stream, PrefixStyle.Base128); 
```

因为我们在开始反序列化之前确保流上有实际数据，所以只有在流包含部分消息时才会阻塞。

编辑：我们可以使用类似的技巧进行序列化：

```
MemoryStream mstm = new MemoryStream();
Serializer.SerializeWithLengthPrefix(mstm, data, PrefixStyle.Base128);
await stream.WriteAsync(mstm.GetBuffer(), 0, (int)mstm.Position); 
```

作为奖励，这个确实保证永远不会阻塞。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-20T20:20:33.813

您可以等待`Task.Run`将在线程池中运行同步代码。这不是最有效的解决方案，但比阻塞要好。您甚至可以将自己的提交`CancellationToken`给`Task.Run`：

```
await Task.Run(() => Serializer.SerializeWithLengthPrefix(
    stream, data, PrefixStyle.Base128), cancellationToken); 
```

或者，您可以使用从我作为[异步功能请求的一部分提交给 protobuf-net的](https://code.google.com/p/protobuf-net/issues/detail?id=444)[JuiceStream 库](https://bitbucket.org/robertvazan/juicestream/src/tip/JuiceStream/ProtobufEx.cs)中提取的相当简单的辅助方法：

```
await ProtobufEx.SerializeWithLengthPrefixAsync(
    stream, data, PrefixStyle.Base128, cancellationToken);
await ProtobufEx.DeserializeWithLengthPrefixAsync<MyType>(
    stream, PrefixStyle.Base128, cancellationToken); 
```

# javascript - 谷歌图表：AreaChart vAxis Gridlines 未绘制

> ID：11187422
> 
> 赞同：1
> 
> 时间：2012-06-25T10:19:03.360
> 
> 标签：javascript, charts, google-visualization

根据上面的标题，有人知道为什么吗？我的代码如下，顺便说一句，我正在使用 Google Chart Playground 对其进行测试，[http://code.google.com/apis/ajax/playground/](http://code.google.com/apis/ajax/playground/?type=visualization#area_chart) ?type=visualization#area_chart 。请指教，谢谢！

```
<html>
   <head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Hour', 'Sales', 'Expenses'],
      ['0:00',  1000, 500],
      ['1:00',  1170, 604],
      ['2:00',  660, 302],
      ['3:00',  1030, 827],
      ['4:00', 1222, 86]
    ]);

    var options = {
      areaOpacity: 0.7,
      backgroundColor:{
        color: 'none',
        fill: 'none',
      },
      animation:{
        easing: 'inAndOut',
      },
      hAxis: {gridlines: {color: '#000000', count: 3}},
      vAxis: {gridlines: {color: '#DCDCDC', count: 5}},
      tooltipTextStyle: {color: '#444444', fontName: 'Tahoma', fontSize: 12},
      focusTarget: 'category',         
      series: {
        0:{color: '#207795', lineWidth: 4, pointSize: 10},
        1:{color: '#464A54', lineWidth: 4, pointSize: 10},
      },
      legend: 'none',
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T12:42:40.513

要获得垂直网格线，您必须设置 hAxis 网格线（完成）并将 x 轴数据类型更改为连续数据类型。请参阅[自定义轴/术语](https://google-developers.appspot.com/chart/interactive/docs/customizing_axes#Terminology)和面积图：配置选项：hAxis.gridlines 描述。

代替

```
var data = google.visualization.arrayToDataTable([
  ['Hour', 'Sales', 'Expenses'],
  ['0:00',  1000, 500],
  ['1:00',  1170, 604],
  ['2:00',  660, 302],
  ['3:00',  1030, 827],
  ['4:00', 1222, 86]
]); 
```

您必须提供例如：

```
var data = google.visualization.arrayToDataTable([
  ['Hour', 'Sales', 'Expenses'],
  [0,  1000, 500],
  [1,  1170, 604],
  [2,  660, 302],
  [3,  1030, 827],
  [4,  1222, 86]
]); 
```

注意小时数据不再是字符串。如果您将 `count`值更改`hAxis`为 5，您将获得每小时的垂直线：

![在此处输入图像描述](../Images/05add344ec9b2f493a1537e36884cdd8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:26:11.477

代码没有任何错误，你错过`chart_div`了你的标记..

```
 <div id="chart_div"></div> 
```

**看演示**

[http://jsfiddle.net/rathoreahsan/LE7V3/](http://jsfiddle.net/rathoreahsan/LE7V3/)

# vb.net - 检测 USB - 插入/移除 - Windows CE 6.0 上的 VB.NET

> ID：11187423
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:03.547
> 
> 标签：vb.net, compact-framework, usb-drive

我正在疯狂地试图弄清楚如何解决这个任务。我的目标很简单，每次插入 U 盘时复制一个文件，然后松开 U 盘，关闭 LED。解决它的最佳方法是什么？

1）我找到了这篇文章

[http://geekswithblogs.net/BruceEitman/archive/2008/06/13/windows-ce-monitoring-for-disk-insertion-to-add-support-for.aspx](http://geekswithblogs.net/BruceEitman/archive/2008/06/13/windows-ce-monitoring-for-disk-insertion-to-add-support-for.aspx)

或者

[http://geekswithblogs.net/BruceEitman/archive/2008/06/13/windows-ce-monitoring-for-disk-insertion-to-add-support-for.aspx](http://geekswithblogs.net/BruceEitman/archive/2008/06/13/windows-ce-monitoring-for-disk-insertion-to-add-support-for.aspx)

但我无法在 VB.NET 项目上翻译它。

2）然后我读到足以将**RequestDeviceNotifications**用于块设备。但是如何在 VB.NET 中做到这一点？

如果可能，我想避免使用 OpenNetCF。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:26:41.447

由于您不想“使用 OpenNETCF”，我假设您不想使用任何未内置于 CF 的库或功能。我们将跳过那种愚蠢的论点和“你的时间价值”的讨论，并将其作为一项要求。

你需要做的是：

1.  使用 P/Invoke 调用[CreateMsgQueue](http://msdn.microsoft.com/en-us/library/ms885180.aspx)。这会给你一个句柄。为了完整性，您可能还想做 CloseMsgQueue
2.  P/Invoke [RequestDeviceNotifications](http://msdn.microsoft.com/en-us/library/ms919831.aspx)并将上面 #1 返回的句柄与您想要的设备通知的[DEVCLASS GUID 值一起传递给它 - 可能是 STORE_MOUNT_GUID。](http://msdn.microsoft.com/en-us/library/aa447465.aspx)同样，为完整性添加 StopDeviceNotifications 是一个好主意。
3.  那时，每当插入或删除发生时，您都会在队列中收到一条消息。然后调用[ReadMsgQueue](http://msdn.microsoft.com/en-us/library/ms886793)以获取消息中的[DEVDETAIL](http://msdn.microsoft.com/en-us/library/ms898286.aspx)数据。
4.  解析 DEVDETAIL 并查看`fAttached`成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:07:15.037

我要花点时间给你写，所以你需要自己做。

开始编写项目，找到所需调用的 P/Invoke 例程（如`FindFirstFile`和`CreateProcess`）。在 SO 上，请查看 Windows mobile 中的[存储卡问题](https://stackoverflow.com/questions/1464510)以及[如何在 windows mobile 中注册 WM_DEVICECHANGE 消息的表单](https://stackoverflow.com/questions/1436979)。

如果您找不到您无法拨打的特定电话，您只会死在水中。

在您完成项目时，发布（或搜索）您遇到的实际问题。

否则，听起来您是在要求某人编写项目并将其交给您。

# android - android sardine + httpclientandroidlib -> 新包名

> ID：11187424
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:03.880
> 
> 标签：android, http, webdav, sardine

我遵循了[https://stackoverflow.com/a/7853412/497102](https://stackoverflow.com/a/7853412/497102)的建议，结果发现沙丁鱼没有找到任何 http 类。以及[http://code.google.com/p/httpclientandroidlib/](http://code.google.com/p/httpclientandroidlib/)正确地说所有包名称都从

`org.apache.http`

至

`ch.boye.httpclientandroidlib`

因此沙丁鱼找不到任何课程。

上面的stackoverflow线程被阻塞了，我需要一个答案，我如何在Android中使用Sardine

应用等级：8，Android 2.2

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:54:26.743

看起来 Sardine-Android 不是基于新的 Sardine 版本并且存在一些问题。例如，无法获取文件的大小，也无法使用包含空格的文件名。仍然没有找到解决这个问题的方法，也许是使用不同的 webdav 软件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:02:42.337

你试过[https://github.com/yeonsh/Sardine-Android](https://github.com/yeonsh/Sardine-Android)吗？

# sql-server - 如何在sql server中同步不同的表列名和对它们进行操作的存储过程？

> ID：11187425
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:19:12.360
> 
> 标签：sql-server, sql-server-2008, tsql

假设我有五个表 a、b、c、d、e 和十个存储过程对它们进行操作。所以，现在我想编写一个存储过程或其他东西来检查所有这些表的列名和存储过程列名（在这个表中进行操作）都是同步的，如果不同步将引发错误并停止进一步执行任何操作，直到它修复了。我可以从信息架构中获取列名并检查表是否同步。但是对于存储过程我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:29:25.493

为了比较表结构，您可以使用

> information_schema.columns

对于进行 SP 比较，您可以通过散列来进行（源/目标的散列必须相同）：

```
declare @spname sysname 
declare @spdefinition varchar(max) 
declare @hashedVal varbinary(4000) 

set @spname = '<Your sp name here>' 

set @spdefinition = (SELECT OBJECT_DEFINITION (OBJECT_ID(@spname )))     
set @hashedVal = (select HashBytes('SHA1', @spdefinition)) 

select @hashedVal 
```

# sql - 在 SQL 查询中排序

> ID：11187430
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:29.690
> 
> 标签：sql, oracle

我的表中有一个列，最多可存储 2 个字符。例如。**B、AK、SE**等

假设我在该表中有两行，一行具有**“K”**，另一行具有**“BA”**作为值。

我的项目中的要求是，我必须根据编号从表中获取最大值。字符的长度以防长度不同。在这种情况下，最大值将是**'BA'**而不是**'K'**。

但是当我在查询中使用' **order by column desc** '和**rownum = 1**时，**'K'**作为rownum第0个值返回。

如果我有值**'D','BA','AK','C'**那么输出应该是**'BA','AK','C','D'** 只是想知道是否有任何方法可以实现我的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:22:59.207

最简单的方法可能是：

```
ORDER BY length(<col_name>) desc 
```

更新 - 如果您还需要按值订购，您可以执行以下操作：

```
ORDER BY length(<col_name>) desc, <col_name> desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:41:55.347

尝试 ：

```
select * from (
  select row_number() over(order by length(col_name) desc, col_name desc) rn, col_name
  from tab_name
) where rn = 1 
```

# iphone - 在我的 iPhone 应用程序中播放视频 (MPMoviePlayer)

> ID：11187431
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:40.313
> 
> 标签：iphone, objective-c

我正在使用下面的代码尝试在我的 iPhone 应用中播放视频。但是，我不明白为什么它不起作用。

```
NSURL *url = [NSURL fileURLWithPath:filePath];
MPMoviePlayerController* moviePlayer =  [[[MPMoviePlayerController alloc] initWithContentURL:url] autorelease];

moviePlayer.controlStyle = MPMovieControlStyleDefault;
moviePlayer.shouldAutoplay = YES;
[self.view addSubview:moviePlayer.view];
[moviePlayer setFullscreen:YES animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:28:58.303

你的游戏声明在哪里？

`[moviePlayer play];`

# java - eclipse启动时端口占用错误

> ID：11187432
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:19:43.437
> 
> 标签：java, windows, eclipse, eclipse-plugin, sysadmin

启动 Eclipse 时出现此错误。我在 Windows 7 上使用 Eclipse
**“有一个进程已经在使用管理端口 4848——它可能是 GlassFish 服务器的另一个实例。
命令启动域失败。”** 我搜索并发现如果我将 mny 主机名放在 127.0.0.1 上，那么这个问题可以解决，但我的问题是由于我们组织的内部网络安全，我无法将我的主机名放在我的主机文件中，我什至不能编辑这个文件。所以我希望这个 glassfish 服务器停止分配 4848 端口并开始在另一个端口上工作。
请帮忙，因为我陷入了这个问题。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:45:50.450

Eclipse 插件贡献了它自己的 Glassfish 实例，该实例仅在 Eclipse 运行时运行。卸载您的独立副本可能是您的一个很好的解决方案。如果不是，请重新配置独立副本以使用不同的管理端口。

一个简单的谷歌搜索将为您涵盖。[这](https://blogs.oracle.com/openroad/entry/changing_default_glassfish_port_numbers)是我发现的热门歌曲。

# javascript - 动态图像放置帮助 - CSS / javascript / jquery？

> ID：11187433
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:47.907
> 
> 标签：javascript, jquery, css

嗨，我对 Web 开发相当陌生，并且被困在我自己设定的第一个项目中。

我正在尝试创建一个团队选择页面，可以在其中选择不同的团队阵型，并且图像将根据所选阵型动态排序。

我不知道这是否可以仅使用 CSS 来实现，或者我是否必须将它与 javascript 或 jquery 结合使用（我正在尝试学习所有 3 个，所以这是一个陡峭的学习曲线）。

我想我可以在 html ul li 中创建一个列表，然后根据所选的格式动态更改每个 li 的类。

例如，对于足球，阵型 442 将具有：

GK
DEF DEF DEF DEF
MID MID MID MID
STR STR

但如果编队更改为 541，则图像将更改为显示

GK
DEF DEF DEF DEF DEF
MID MID MID MID
STR

任何人都可以向我提供有关此问题的可能解决方案的提示，我将进一步阅读以尝试理解。
例如，我是否需要为每种形成类型创建一个 javascript 函数，为每个 li 元素提供一个 id，并根据所选形成为每个元素设置 CSS
例如，我是否需要使用 jquery 根据所选形成为每个 li 元素添加 CSS 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:13:06.867

这是一段代码，可以帮助您满足您的需求。

```
<div>
    <ul id="ulGoalkeepers"><li>GK</li></ul>
    <hr />
    <ul id="ulDefenders"></ul>
    <hr />
    <ul id="ulMidfielders"></ul>
    <hr />
    <ul id="ulStrikers"></ul>
</div>
<select id="ddlFormation">
    <option></option>
    <option value="4-4-2">4-4-2</option>
    <option value="4-5-1">4-5-1</option>
</select>
<script type="text/javascript" language="javascript">
    function formationChanged(){
        var formation = $("#ddlFormation").val();
        if (formation != undefined && formation != '') {
            $("#ulDefenders").empty();
            $("#ulMidfielders").empty();
            $("#ulStrikers").empty();

            var parts = formation.split('-');
            var defenders = parts[0];
            var midfielders = parts[1];
            var strikers = parts[2];

            for (var i = 0; i < defenders; i++) {
                $("#ulDefenders").append('<li>DEF</li>');
            }
            for (var i = 0; i < midfielders; i++) {
                $("#ulMidfielders").append('<li>MID</li>');
            }
            for (var i = 0; i < strikers; i++) {
                $("#ulStrikers").append('<li>STR</li>');
            }
        }
    }

    $(document).ready(function () {
        $("#ddlFormation").bind("change", formationChanged);
    });
</script> 
```

**编辑：** 我不喜欢 CSS 的想法，因为你失去了 html 元素的结构。后卫、中场都将在同一个名单中，这不是很好。另一方面，可能会有一些想法如何实现它，并且很大程度上取决于您真正需要什么。例如：

CSS：

```
 .team div
    {
        float: left;
        width: 50px;
    }
    .team div.first
    {
        clear: both;    
    } 
```

HTML：

```
 <div class="team">
        <div class="goalkeeper">GK</div>
        <div class="defender first">DEF</div>
        <div class="defender">DEF</div>
        <div class="defender">DEF</div>
        <div class="defender">DEF</div>
        <div class="midfielder first">MID</div>
        <div class="midfielder">MID</div>
        <div class="midfielder">MID</div>
        <div class="midfielder">MID</div>
        <div class="striker first">STR</div>
        <div class="striker">STR</div>
    </div> 
```

**但这在 IE7 中不起作用。**您可以尝试对此进行更多调查。另一个想法是使用css绝对定位。例如，您通过 jquery 添加适当的类，因此一个项目将具有例如 class="midfielder second" 并且您在 css 中将其解释为“midfielder”类的“top”css 样式和“second”类的“left”css 样式.

# c++ - 建议任何好的散列函数

> ID：11187434
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:49.650
> 
> 标签：c++, c, algorithm, hash

> **可能重复：**
> [什么是英语单词的好散列函数？](https://stackoverflow.com/questions/7700400/whats-a-good-hash-function-for-english-words)

我想计算文本文件中任何单词的频率。我使用 BST 解决了这个问题。我想使用哈希表来解决这个问题。你能告诉我哈希函数吗？这样所有相同的单词都存储在一个键中。谢谢。

# scorm - 客观标准化测量

> ID：11187435
> 
> 赞同：1
> 
> 时间：2012-06-25T10:19:50.363
> 
> 标签：scorm, scorm2004

我对清单中的 readNormalizedMeasure 属性有疑问。请参阅以下 SCORM 2004 第 3 版清单。Activity 3 从哪里读取其标准化度量？请为我解释。非常感谢。

```
<organization identifier = "OB-03c">
    <title>Content Package 1</title>
    <item identifier = "activity_1" identifierref = "SEQ01">
        <title>Activity 1</title>
        <imsss:sequencing>
            <imsss:sequencingRules>
                <imsss:preConditionRule>
                    <imsss:ruleConditions>
                        <imsss:ruleCondition operator="not" condition="objectiveStatusKnown"/>
                    </imsss:ruleConditions>
                    <imsss:ruleAction action = "skip"/>
                </imsss:preConditionRule>
            </imsss:sequencingRules>
            <imsss:objectives>
                <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                    <imsss:mapInfo targetObjectiveID="gObj-OB03-3" />
                </imsss:primaryObjective>
            </imsss:objectives>
        </imsss:sequencing>
    </item>
    <item identifier = "activity_2">
        <title>Activity 2</title>
        <item identifier = "activity_3">
            <title>Activity 3</title>
            <item identifier = "activity_4" identifierref = "SEQ01">
                <title>Activity 4</title>
            </item>
            <item identifier = "activity_5" identifierref = "SEQ01">
                <title>Activity 5</title>
                <imsss:sequencing>
                    <imsss:sequencingRules>
                        <imsss:preConditionRule>
                            <imsss:ruleConditions>
                                <imsss:ruleCondition condition = "satisfied"/>
                            </imsss:ruleConditions>
                            <imsss:ruleAction action = "skip"/>
                        </imsss:preConditionRule>
                    </imsss:sequencingRules>
                    <imsss:objectives>
                        <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                            <imsss:mapInfo targetObjectiveID="gObj-OB03-1" />
                        </imsss:primaryObjective>
                    </imsss:objectives>
                </imsss:sequencing>
            </item>
            <item identifier = "activity_6" identifierref = "SEQ01">
                <title>Activity 6</title>
            </item>
            <imsss:sequencing>
                <imsss:controlMode choice = "false" flow = "true"/>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCondition condition = "satisfied"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ" satisfiedByMeasure = "true">
                        <imsss:minNormalizedMeasure>0.6</imsss:minNormalizedMeasure>
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-3" readSatisfiedStatus = "false" writeSatisfiedStatus = "true" />
                    </imsss:primaryObjective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <item identifier = "activity_7" identifierref = "SEQ01">
            <title>Activity 7</title>
            <imsss:sequencing>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCondition operator = "not" condition = "satisfied"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-2" />
                    </imsss:primaryObjective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <item identifier = "activity_8" identifierref = "SEQ01">
            <title>Activity 8</title>
            <imsss:sequencing>
                <imsss:sequencingRules>
                    <imsss:preConditionRule>
                        <imsss:ruleConditions>
                            <imsss:ruleCndition operator = "not" condition = "satisfied"/>
                            <imsss:ruleCondition operator = "not" condition = "objectiveStatusKnown" referencedObjective = "obj1"/>
                        </imsss:ruleConditions>
                        <imsss:ruleAction action = "skip"/>
                    </imsss:preConditionRule>
                </imsss:sequencingRules>
                <imsss:objectives>
                    <imsss:primaryObjective objectiveID = "PRIMARYOBJ">
                        <imsss:mapInfo targetObjectiveID="gObj-OB03-2" />
                    </imsss:primaryObjective>
                    <imsss:objective objectiveID = "obj1" >
                        <imsss:mapInfo targetObjectiveID = "gObj-OB03-3" />
                    </imsss:objective>
                </imsss:objectives>
            </imsss:sequencing>
        </item>
        <imsss:sequencing>
            <imsss:controlMode choice = "false" flow = "true"/>
        </imsss:sequencing>
    </item>
    <item identifier = "activity_9" identifierref = "SEQ01">
        <title>Activity 9</title>
    </item>
    <imsss:sequencing>
        <imsss:controlMode choice = "false" flow = "true"/>
    </imsss:sequencing>
</organization> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:35:42.410

活动 3 根本不读取任何跟踪数据。读取跟踪数据的唯一活动是活动 1 和活动 8，它们从活动 3 的主要目标读取objectiveSatisfiedStatus。要测试您的清单并了解更多信息，请从[http://www.naseelco.com](http://www.naseelco.com)下载 LMS2004 。它有一个测试模式，您可以在其中了解很多关于 SCORM 清单的信息。这是加载到 LMS2004 的清单的快照，您可以在其中查看哪些活动读取/写入跟踪数据。

![LMS2004](../Images/efa44cc43aed6d8f7fcd4eb146625898.png)

# javascript - Jquery 脚本与按钮 div 冲突

> ID：11187437
> 
> 赞同：3
> 
> 时间：2012-06-25T10:19:56.753
> 
> 标签：javascript, jquery, html, css

我正在学习 JQuery 并尝试通过图像创建循环文本，但按钮 div（containermain）有问题。一个例子在这里：http: [//jsfiddle.net/zAZst/7/](http://jsfiddle.net/zAZst/7/)最后三张图片是按钮，不应该对上面的图片（前三张）有任何影响。如果您将鼠标悬停在图像（前三个）上，它可以完美运行，但如果悬停在按钮（最后三个图像）上，脚本会损坏并停止工作。您能否帮我修复脚本，以便如果将鼠标悬停在按钮（最后三个图像）上，则对循环文本没有影响。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:31:40.227

我看到你有这些行：

```
$('img').on('mouseover', function() {
    clearInterval(intervalId);
    displayTitle($(this).parents('div').attr('id').substring(5));
}).on('mouseout', function() {
    currentImg = $(this).parents('div').attr('id').substring(5);
    startLoop();
}) 
```

这使得鼠标悬停在文档中的“任何”img 上以停止循环。您可以在循环中为图像添加一个类，例如

```
class="img_cycle" 
```

然后更改插入选择器的 javascript on() 函数的第一行，如下所示：

```
$('img.img_cycle').on('mouseover', function() {
    clearInterval(intervalId);
    displayTitle($(this).parents('div').attr('id').substring(5));
}).on('mouseout', function() {
    currentImg = $(this).parents('div').attr('id').substring(5);
    startLoop();
}) 
```

希望这可以帮助 ：）

编辑：我在功能上做了一些错字。这是一个 JSFIddle 工作版本：http: [//jsfiddle.net/zAZst/8/](http://jsfiddle.net/zAZst/8/) :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:28:58.690

问题在于 mouseover 和 mouseout 事件的选择器适用于按钮图像以及顶部的图像。当您将鼠标悬停在顶部的图像上时，它会在直接父级中查找 div 并提取 id 属性，该属性存在并且可以调用“子字符串”。但是，按钮图像在直接父 div 中没有 id。实际的错误是`Uncaught TypeError: Cannot call method 'substring' of undefined`，因为它不能在不存在的 div id 上调用子字符串。

# c# - 如何在 Solr.Net 中使用 Suggester 组件

> ID：11187438
> 
> 赞同：0
> 
> 时间：2012-06-25T10:19:57.407
> 
> 标签：c#, .net, solr, solrnet

我可以使用 Solr 配置[Suggester](http://wiki.apache.org/solr/Suggester)组件，但如何使用 Solr.Net 查询它？是否支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:41:16.087

SolrNet 中当前未实现建议器组件。它被列为 SolrNet 项目中的一个未解决问题 -[问题 141 - Suggester 组件支持](http://code.google.com/p/solrnet/issues/detail?id=141)

# coldfusion - Coldfusion：QueryNew 和自动增量？

> ID：11187439
> 
> 赞同：1
> 
> 时间：2012-06-25T10:19:57.563
> 
> 标签：coldfusion, auto-increment

是否有可能将“auto_increment”属性添加到 Coldfusion 中的 QueryNew()？我想模拟一个数据库，所以我需要一个主键，我指的是它。我的目标是使用 nav_id 和 nav_pid（父 id）轻松导航。

如果没有简单的解决方案，我将使用循环来完成，或者按如下方式添加：

```
<cfset querySetCell(nav, "nav_id", 1) /> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:55:10.803

对不起，没有可以为新创建的查询对象中的查询列设置的自动增量属性：[https ://helpx.adobe.com/de/coldfusion/cfml-reference/coldfusion-functions/functions-mr /querynew.html](https://helpx.adobe.com/de/coldfusion/cfml-reference/coldfusion-functions/functions-m-r/querynew.html)

因此，您必须使用循环并创建查询：

```
 <CFLOOP from="1" to="5" index="i">
    <cfset querySetCell(nav, "nav_id", i) />
 </CFLOOP> 
```

# mysql - 从星期三开始按周分组的 SQL

> ID：11187441
> 
> 赞同：3
> 
> 时间：2012-06-25T10:19:59.393
> 
> 标签：mysql, sql, group-by, report

我有一份我想生成的报告，其中显示了每年每周的工作数量，日期可以追溯到 90 年代初。我遇到了一个我似乎无法解决的问题，因为我的 SQL 知识不是那么好。

我了解 mysql 将您限制为星期天或星期一开始星期日期。我想从周三到周二对它们进行分组，所以当我这样做时，`GROUP BY YEAR(JOBID), WEEK(JOBID)`它只会显示它们从周日开始按周分组。

我在这里找到了这个

```
SELECT
    count(jobs) as count,
    CASE WHEN (weekday(datetime)<=3) THEN date(datetime + INTERVAL (3-weekday(datetime)) DAY)
        ELSE date(datetime + INTERVAL (3+7-weekday(datetime)) DAY)
    END as dt
FROM values 
```

但它给了我相同的结果集

```
SELECT 
    COUNT(jobs), 
    Week(datetime) as Week, 
    Year(datetime) as Year 
FROM jobs 
GROUP BY Year(datetime), Week(datetime) 
```

有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:27:35.930

最简单的解决方案是使用日历表。您可以轻松地自定义使用星期三作为开始日期的星期，而 10 年的数据只有大约 3650 行。

[http://weblogs.sqlteam.com/dang/archive/2010/07/19/calendar-table-and-datetime-functions.aspx](http://weblogs.sqlteam.com/dang/archive/2010/07/19/calendar-table-and-datetime-functions.aspx)

[http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)

应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:30:16.917

您的第一个查询不完整，并且不包含“GROUP BY”子句。请务必“GROUP BY”定义“dt”列的相同“CASE”表达式。

只要您的“GROUP BY”子句编写正确，您的 CASE 语句的公式就正确，并且应该返回您正在寻找的不同结果集。

我已将您的查询重新表述为 SQL Server 查询，并根据我自己的数据确认它们确实返回了不同的结果集。

这是您所需查询的有效 SQL Server 版本：

```
SELECT
COUNT([jobs]) AS Count,
CASE
WHEN (DATEPART(dw, [datetime])<=3) THEN Convert(date, DATEADD(day, 3-DATEPART(dw, [datetime]), [datetime]))
ELSE Convert(date, DATEADD(day, 3+7-DATEPART(dw, [datetime]), [datetime]))
END AS WeekLabel
FROM JobsTable
GROUP BY
CASE
WHEN (DATEPART(dw, [datetime])<=3) THEN Convert(date, DATEADD(day, 3-DATEPART(dw, [datetime]), [datetime]))
ELSE Convert(date, DATEADD(day, 3+7-DATEPART(dw, [datetime]), [datetime]))
END
ORDER BY
CASE
WHEN (DATEPART(dw, [datetime])<=3) THEN Convert(date, DATEADD(day, 3-DATEPART(dw, [datetime]), [datetime]))
ELSE Convert(date, DATEADD(day, 3+7-DATEPART(dw, [datetime]), [datetime]))
END DESC 
```

以及其他比较查询的 SQL Server 版本：

```
SELECT COUNT([jobs]),
DATEPART(week, [datetime]) AS WeekLabel,
DATEPART(year, [datetime]) AS YearLabel
FROM JobsTable
GROUP BY DATEPART(week, [datetime]), DATEPART(year, [datetime])
ORDER BY DATEPART(year, [datetime]) DESC, DATEPART(week, [datetime]) DESC 
```

# bash - bash - 如何声明一个本地整数？

> ID：11187443
> 
> 赞同：14
> 
> 时间：2012-06-25T10:20:14.317
> 
> 标签：bash

在 Bash 中，我如何声明一个局部整数变量，例如：

```
func() {
  local ((number = 0)) # I know this does not work
  local declare -i number=0 # this doesn't work either

  # other statements, possibly modifying number
} 
```

我看到在某个地方`local -i number=0`被使用，但这看起来不太便携。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-25T11:15:51.283

`declare`在函数内部自动使变量成为局部变量。所以这有效：

```
func() {
    declare -i number=0

    number=20
    echo "In ${FUNCNAME[0]}, \$number has the value $number"
}

number=10
echo "Before the function, \$number has the value $number"
func
echo "After the function, \$number has the value $number" 
```

输出是：

```
Before the function, $number has the value 10
In func, $number has the value 20
After the function, $number has the value 10 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-25T10:34:27.923

根据[http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Builtins)，

> ```
> local [option] name[=value] ... 
> ```
> 
> 对于每个参数，都会创建一个名为 name 的局部变量，并为其赋值。该选项可以是 declare 接受的任何选项。

所以`local -i`是有效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-12T23:54:25.257

如果您最终在这里使用 Android shell 脚本，您可能想知道 Android 使用的是 MKSH 而不是完整的 Bash，它有一些影响。看一下这个：

```
#!/system/bin/sh
echo "KSH_VERSION:  $KSH_VERSION"

local -i aa=1
typeset -i bb=1
declare -i cc=1

aa=aa+1;
bb=bb+1;
cc=cc+1;

echo "No fun:"
echo "  local   aa=$aa"
echo "  typset  bb=$bb"
echo "  declare cc=$cc"

myfun() {
    local -i aaf=1
    typeset -i bbf=1
    declare -i ccf=1

    aaf=aaf+1;
    bbf=bbf+1;
    ccf=ccf+1;

    echo "With fun:"  
    echo "  local   aaf=$aaf"
    echo "  typset  bbf=$bbf"
    echo "  declare ccf=$ccf"
}
myfun; 
```

运行这个，我们得到：

```
# woot.sh
KSH_VERSION:  @(#)MIRBSD KSH R50 2015/04/19
/system/xbin/woot.sh[6]: declare: not found
No fun:
  local   aa=2
  typset  bb=2
  declare cc=cc+1
/system/xbin/woot.sh[31]: declare: not found
With fun:
  local   aaf=2
  typset  bbf=2
  declare ccf=ccf+1 
```

因此在**Android** `declare`中不存在。但是读起来，其他的应该是等价的。

# javascript - 通过 css/js/html 强制设备方向为横向？

> ID：11187445
> 
> 赞同：5
> 
> 时间：2012-06-25T10:20:16.160
> 
> 标签：javascript, css, ios, html

> **可能重复：**
> [移动网站 - 仅强制横向/无自动旋转](https://stackoverflow.com/questions/10975387/mobile-site-force-landscape-only-no-auto-rotate)

我看过一些关于此的[帖子](https://stackoverflow.com/questions/10975387/mobile-site-force-landscape-only-no-auto-rotate)，但并没有真正找到明确的答案，而是一些建议的解决方法。

是否可以通过网页强制设备方向？即：我可以将我的网站“堵塞”为景观吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:09:09.483

您可以使用 JavaScript。首先检查是否支持：

```
if (window.DeviceOrientationEvent) {
    console.log("DeviceOrientation is supported");
} 
```

然后添加 eventListener 如果你想在轮换上做点什么：

```
window.addEventListener('deviceorientation', function(eventData) {}); 
```

我想你应该在它转向时触发你的一面做出反应。您无法触发方向，因为设备会这样做。因此，当您的网站以横向模式加载时，您应该检测它并以横向模式呈现网站（加载自定义 css？），然后当访问者转动手机或平板电脑时，听众可以使用新的 CSS 重新渲染您的网站通过 JavaScript 文件（在这些情况下建议使用 jQuery）。

您还可以做什么，该网站没有太多动态，您可以使用 GET 方法调用重新加载页面以更改方向，但当然这可能是一个较慢的选择。经常在移动设备上使用 JavaScript 重新渲染整个网站，甚至可以让手机升温，因为我之前在 iPhone 上测试过。JavaScript 引擎速度快，需要大量 CPU 才能流畅地渲染所有内容，但也会在短时间内消耗大量资源，这使得移动设备很难持续保持渲染。最好的例子是使用 JavaScript 调用制作 HTML5 游戏。iPhone 最终会像在实际应用中玩游戏一样升温：P。

# c - 如何从数组中找到最大 int 值

> ID：11187451
> 
> 赞同：3
> 
> 时间：2012-06-25T10:20:45.180
> 
> 标签：c

1.  用户输入正整数值 ( `number`)；
2.  用户打印`number`int 值；
3.  需要找到最大值并打印出来。

我的代码是

```
#include <stdio.h>

int main() {
    int number;
    int max;
    int temp;

    scanf("%d", &number);
    scanf("%d", &max);

    for ( int i = 1; i < number; i++ ) {
        scanf("%d", &temp);
        if ( temp > max ) {
            max = temp;
        }
    }

    printf("%d\n", max);
    return 0;
} 
```

这可行，但在线测试工具说我需要优化代码，因为它使用了太多的操作。数组是被禁止的。只能使用stdio。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:04:57.017

通过使用[Duff 的设备](https://stackoverflow.com/q/514118/)，您可以在 for 循环中保存一些比较。这是一个不好的做法，但也许这就是你应该做的。

```
#include <stdio.h>

int main (void) {
    unsigned max = 0;
    unsigned length;
    scanf("%u", &length);

    unsigned temp = 0;
    unsigned iterations = (length+8-1) / 8;
    switch (length % 8) {
        case 0: do { scanf("%u", &temp); if (temp > max) max = temp;
        case 7:      scanf("%u", &temp); if (temp > max) max = temp;
        case 6:      scanf("%u", &temp); if (temp > max) max = temp;
        case 5:      scanf("%u", &temp); if (temp > max) max = temp;
        case 4:      scanf("%u", &temp); if (temp > max) max = temp;
        case 3:      scanf("%u", &temp); if (temp > max) max = temp;
        case 2:      scanf("%u", &temp); if (temp > max) max = temp;
        case 1:      scanf("%u", &temp); if (temp > max) max = temp;
                } while (--iterations > 0);
    }

    printf("%u\n", max);
    return 0;
} 
```

我使用`unsigned`整数，因为你说你只有正数。代码假定序列至少有一个元素。

### 更新1：

使用手动[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)的示例。这比达夫的设备还要糟糕。也许你得到的测试工具会喜欢它，但你永远不应该使用这个代码来打动潜在的雇主！

```
#include <stdio.h>

int main (void) {
    signed max = -0x80000000;
    unsigned length;
    scanf("%u", &length);

    signed temp;
    for (; length >= 8; length -= 8) {
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
    }
    if (length > 4) {
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        scanf("%d", &temp); if (temp > max) max = temp;
        length -= 4;
    }
    for (; length > 0; --length) {
        scanf("%d", &temp); if (temp > max) max = temp;
    }

    printf("%d\n", max);
    return 0;
} 
```

### 更新 2：

您说如果 scanf 不常被调用，您的评估工具会喜欢它，所以：

```
#include <stdio.h>
int main (void) {
    signed max = -0x80000000;
    unsigned length;
    scanf("%u", &length);

    signed t1, t2, t3, t4, t5, t6, t7, t8;
    for (; length >= 8; length -= 8) {
        scanf("%d%d%d%d%d%d%d%d", &t1, &t2, &t3, &t4, &t5, &t6, &t7, &t8);
        if (t1 > max) max = t1;
        if (t2 > max) max = t2;
        if (t3 > max) max = t3;
        if (t4 > max) max = t4;
        if (t5 > max) max = t5;
        if (t6 > max) max = t6;
        if (t7 > max) max = t7;
        if (t8 > max) max = t8;
    }
    if (length > 4) {
        scanf("%d%d%d%d", &t1, &t2, &t3, &t4);
        if (t1 > max) max = t1;
        if (t2 > max) max = t2;
        if (t3 > max) max = t3;
        if (t4 > max) max = t4;
        length -= 4;
    }
    for (; length > 0; --length) {
        scanf("%d", &t1); if (t1 > max) max = t1;
    }

    printf("%d\n", max);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:43:29.143

您的“测试工具”可能已损坏，或者希望您在使代码难以阅读的同时进行无意义的微优化，编译器*无论如何*都会这样做。

1.  您需要询问用户`number`of numbers => **1`scanf`**。*你这样做了。*
2.  接下来，您需要向用户询问`number`numbers => **`scanf`, `number`times**。*你这样做了。*
3.  接下来，您需要找到最大的 =>**循环`number`时间，并比较**. *您已经在与前一个相同的循环中实现了这一点。你做得很好，因为你做了尽可能少的`number - 1`比较*。
4.  接下来，您需要打印结果 => **1`printf`**。*你也这样做了。*

这是您可能获得的*最快速度*^([1])。没有“优化”*的*余地。

^([1] 如果您有 2 个内核，并且正在编写一个多线程程序，您可以通过流水线更快地执行第 2 步和第 3 步（请参阅 unkulunkulu 的评论，了解为什么这是您可以获得的最快速度）。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:42:27.520

我想知道什么测试工具说你有太多的操作不是一些代码高尔夫比赛。此外，可接受的操作数量是多少以及它们如何定义“操作”。

```
#include <stdio.h>

int main() {
    int numbersLeft,
        number,
        max = 0;

    scanf("%d", &numbersLeft);

    while ( numbersLeft-- ) {
        scanf("%d", &number);
        max = number > max? number: max;
    }

    printf("%d\n", max);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-25T12:08:38.870

应该使用 1 个 scanf() 而不是两个：

```
#include <stdio.h>

int main() {
    int number;
    int max;
    int temp;

    scanf("%d %d", &number, &max);
    for ( int i = 1; i < number; i++ ) {
        scanf("%d", &temp);
        if ( temp > max ) {
            max = temp;
        }
    }
    printf("%d\n", max);
    return 0;
} 
```

对不起，谢谢大家！拥抱与亲吻！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T11:20:39.163

你真的不需要这个`i`变量：你可以使用`number`它自己。

您也可能想滥用该`for`声明:)

```
#include <stdio.h>

int main(void) {
    int number;
    int max;
    int temp;

    for (scanf("%d", &number), scanf("%d", &max)
       ; --number && scanf("%d", &temp)
       ; )
    {
        if (temp > max) max = temp;
    }

    printf("%d\n", max);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-25T14:11:28.890

```
#include <stdio.h>

int main() {
    int number;
    int max;
    int temp,i;

    scanf("%d", &number);

    for ( i = 0; i < number; i++ ) {
        scanf("%d", &temp);
        if(i==0)
            max=temp;
        if ( temp > max ) {
            max = temp;
        }
    }

printf("max=%d\n", max);
return 0; 
```

}

# jquery - 动态列表元素和页面/对话

> ID：11187453
> 
> 赞同：0
> 
> 时间：2012-06-25T10:20:55.927
> 
> 标签：jquery, jquery-mobile

我有一个关于 jQuery Mobile 的问题。问题是我使用了一个很长的动态元素加载列表！当用户滚动到列表末尾时，他点击“加载更多项目”，然后另外 30 个元素被加载并附加到现有列表中。当他点击一个元素时，会显示一个包含信息等的对话框！当用户关闭对话框时，列表会刷新并加载前 30 个项目。这很烦人，因为它是一个很长的列表（约 1300 个元素）。

我怎样才能防止这种情况发生？有没有办法将参数从对话框关闭按钮解析到上一页？或者有什么建议？

PS：我可以提供你想要的任何代码行！我现在没有放任何代码，因为我不确定要发布哪个部分:)！

# c++ - 使用混合 C/C++ 源文件构建 NodeJS 插件

> ID：11187457
> 
> 赞同：1
> 
> 时间：2012-06-25T10:21:04.667
> 
> 标签：c++, c, node.js, add-on

我正在尝试从混合 C/C++ 源代码构建 NodeJS 插件。我想避免将 C 代码构建为单独的共享库，尽管这是一个部分解决方案。

我得到错误：

```
Cannot guess how to process src:///home/chris/Dropbox/cbackend/data.c 
(got mappings ['.C', '.cc', '.cpp', '.c++', '.cxx'] 
in <class 'cxx.cxx_taskgen'>) -> try conf.check_tool(..)? 
```

当我尝试构建它时。如果我将 .c 文件重命名为 .cc 并适当地更改 wscript 一切正常。

我尝试在 wscript 中添加一个“compiler_c”，但它似乎不可用。

这是脚本：

```
import os
import Options

srcdir = '.'
blddir = 'build'
VERSION = '0.3.0'

def set_options(opt):
  opt.tool_options('compiler_cxx')

def configure(conf):
  conf.check_tool('compiler_cxx')
  conf.check_tool('node_addon')

  conf.env.append_value('CCFLAGS', ['-O3'])
  conf.env.append_value('CXXFLAGS', ['-O3'])
  if Options.platform == 'darwin': conf.env.append_value('LINKFLAGS', ['-undefined', 'dynamic_lookup'])

def build(bld):
  obj = bld.new_task_gen('cxx', 'shlib', 'node_addon')
  obj.target = 'cbackend'
  obj.source = 'cbackend.cc data.c'
  obj.uselib = ['NODE'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:55:58.493

我在邮件列表中获得了解决方案。

普通的 C 编译器在 NodeJS 中称为“compiler_cc”，而不是 WAF 文档中的“compiler_c”。

# java - 将 System.out 和 System.err 重定向到 slf4j

> ID：11187461
> 
> 赞同：35
> 
> 时间：2012-06-25T10:21:22.800
> 
> 标签：java, logging, log4j, slf4j

我需要将 System.out/err.println 输出重定向到 slf4j。

**我知道这不是正确进行日志记录的方法，**但是有一个外部库可以记录到 System.out

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-20T13:06:56.517

您可以使用[sysout-over-slf4j](http://projects.lidalia.org.uk/sysout-over-slf4j/index.html)。

> sysout-over-slf4j 模块允许用户将所有对 System.out 和 System.err 的调用重定向到 SLF4J 定义的记录器，该记录器具有在其中进行 System.out.println（或类似）调用的完全限定类的名称，在可配置的水平。

如果您**不**使用 Maven，请[下载](http://github.com/Mahoney/sysout-over-slf4j/downloads)该 jar 并将其添加到您的类路径中。

或者，将其添加为 Maven 依赖项：

```
<dependency>
    <groupId>uk.org.lidalia</groupId>
    <artifactId>sysout-over-slf4j</artifactId>
    <version>1.0.2</version>
</dependency> 
```

然后在应用程序启动时，[调用](http://projects.lidalia.org.uk/sysout-over-slf4j/quickstart.html)：

```
SysOutOverSLF4J.sendSystemOutAndErrToSLF4J(); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-25T10:21:23.533

[我通过使用 log4j 的LoggingOutputStream](https://svn.apache.org/viewvc/logging/log4j/trunk/contribs/JimMoore/LoggingOutputStream.java?view=co)解决了这个问题，并对 slf4j 进行了一些修改。

```
import java.io.IOException;
import java.io.PrintStream;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class SysStreamsLogger {
private static Logger sysOutLogger = LoggerFactory.getLogger("SYSOUT");
private static Logger sysErrLogger = LoggerFactory.getLogger("SYSERR");

public static final PrintStream sysout = System.out;
public static final PrintStream syserr = System.err;

protected static final String LINE_SEPERATOR = System.getProperty("line.separator");

public static void bindSystemStreams() {
    // Enable autoflush
    System.setOut(new PrintStream(new LoggingOutputStream(sysOutLogger, false), true));
    System.setErr(new PrintStream(new LoggingOutputStream(sysErrLogger, true), true));
}

public static void unbindSystemStreams() {
    System.setOut(sysout);
    System.setErr(syserr);
}

private static class LoggingOutputStream extends java.io.OutputStream {

    protected Logger log;
    protected boolean isError;

    /**
     * Used to maintain the contract of {@link #close()}.
     */
    protected boolean hasBeenClosed = false;

    /**
     * The internal buffer where data is stored.
     */
    protected byte[] buf;

    /**
     * The number of valid bytes in the buffer. This value is always in the
     * range <tt>0</tt> through <tt>buf.length</tt>; elements
     * <tt>buf[0]</tt> through <tt>buf[count-1]</tt> contain valid byte
     * data.
     */
    protected int count;

    /**
     * Remembers the size of the buffer for speed.
     */
    private int bufLength;

    /**
     * The default number of bytes in the buffer. =2048
     */
    public static final int DEFAULT_BUFFER_LENGTH = 2048;

    private LoggingOutputStream() {
        // illegal
    }

    /**
     * Creates the LoggingOutputStream to flush to the given Category.
     * 
     * @param log
     *            the Logger to write to
     * 
     * @param isError
     *            the if true write to error, else info
     * 
     * @exception IllegalArgumentException
     *                if cat == null or priority == null
     */
    public LoggingOutputStream(Logger log, boolean isError) throws IllegalArgumentException {
        if (log == null) {
            throw new IllegalArgumentException("log == null");
        }

        this.isError = isError;
        this.log = log;
        bufLength = DEFAULT_BUFFER_LENGTH;
        buf = new byte[DEFAULT_BUFFER_LENGTH];
        count = 0;
    }

    /**
     * Closes this output stream and releases any system resources
     * associated with this stream. The general contract of
     * <code>close</code> is that it closes the output stream. A closed
     * stream cannot perform output operations and cannot be reopened.
     */
    @Override
    public void close() {
        flush();
        hasBeenClosed = true;
    }

    /**
     * Writes the specified byte to this output stream. The general contract
     * for <code>write</code> is that one byte is written to the output
     * stream. The byte to be written is the eight low-order bits of the
     * argument <code>b</code>. The 24 high-order bits of <code>b</code> are
     * ignored.
     * 
     * @param b
     *            the <code>byte</code> to write
     */
    @Override
    public void write(final int b) throws IOException {
        if (hasBeenClosed) {
            throw new IOException("The stream has been closed.");
        }

        // don't log nulls
        if (b == 0) {
            return;
        }

        // would this be writing past the buffer?
        if (count == bufLength) {
            // grow the buffer
            final int newBufLength = bufLength + DEFAULT_BUFFER_LENGTH;
            final byte[] newBuf = new byte[newBufLength];

            System.arraycopy(buf, 0, newBuf, 0, bufLength);

            buf = newBuf;
            bufLength = newBufLength;
        }

        buf[count] = (byte) b;
        count++;
    }

    /**
     * Flushes this output stream and forces any buffered output bytes to be
     * written out. The general contract of <code>flush</code> is that
     * calling it is an indication that, if any bytes previously written
     * have been buffered by the implementation of the output stream, such
     * bytes should immediately be written to their intended destination.
     */
    @Override
    public void flush() {

        if (count == 0) {
            return;
        }

        // don't print out blank lines; flushing from PrintStream puts out
        // these
        if (count == LINE_SEPERATOR.length()) {
            if (((char) buf[0]) == LINE_SEPERATOR.charAt(0) && ((count == 1) || // <-
                                                                                // Unix
                                                                                // &
                                                                                // Mac,
                                                                                // ->
                                                                                // Windows
                    ((count == 2) && ((char) buf[1]) == LINE_SEPERATOR.charAt(1)))) {
                reset();
                return;
            }
        }

        final byte[] theBytes = new byte[count];

        System.arraycopy(buf, 0, theBytes, 0, count);

        if (isError) {
            log.error(new String(theBytes));
        } else {
            log.info(new String(theBytes));
        }

        reset();
    }

    private void reset() {
        // not resetting the buffer -- assuming that if it grew that it
        // will likely grow similarly again
        count = 0;
    }
}
} 
```

现在可以通过`SysStreamsLogger.bindSystemStreams()`在应用程序开始时调用来重定向 Sytem.out/err。

日志输出看起来像这样（来自 OpenEJB 启动）

```
2012-06-27 13:44:12,792  INFO [main:] SYSOUT:181 - Apache OpenEJB 3.1.4    build: 20101112-03:32
2012-06-27 13:44:12,793  INFO [main:] SYSOUT:181 - http://openejb.apache.org/ 
```

# php - Prestashop 解决方案中的 SQL 查询优化

> ID：11187465
> 
> 赞同：2
> 
> 时间：2012-06-25T10:21:39.207
> 
> 标签：php, sql, optimization, prestashop

我正在使用 Prestashop 解决方案开发分层导航模块，我正在尝试优化一个 Sql 查询，该查询创建一个 tmp 表来执行它，并通过这种方式在 mysql 中创建一个瓶颈。

这是查询：

```
SELECT p.*, p.id_category_default, pl.available_later, pl.description_short, pl.link_rewrite, pl.name, i.id_image, il.legend, m.name manufacturer_name, DATEDIFF(p.`date_add`, DATE_SUB(NOW(), INTERVAL 30 DAY)) > 0 AS new 
FROM `ps_category_product` cp 
LEFT JOIN ps_category c ON (c.id_category = cp.id_category) 
LEFT JOIN `ps_product` p ON p.`id_product` = cp.`id_product` 
LEFT JOIN ps_product_lang pl ON (pl.id_product = p.id_product) 
LEFT JOIN ps_image i ON (i.id_product = p.id_product AND i.cover = 1) 
LEFT JOIN ps_image_lang il ON (i.id_image = il.id_image AND il.id_lang = 2) 
LEFT JOIN ps_manufacturer m ON (m.id_manufacturer = p.id_manufacturer) 
WHERE p.`active` = 1 AND c.nleft >= 2 AND c.nright <= 29 AND c.active = 1 AND pl.id_lang = 2 
AND p.id_product IN (74,78,130,146,168,169,178,195,...,297,302,1986,1987,1988,1993,1999,2000,2001) 
GROUP BY p.id_product ORDER BY p.date_upd desc LIMIT 0,48 
```

我知道 tmp 表是因为 GROUP BY 而创建的，但我不知道如何删除它。如果可以使用 PHP 而不是 SQL 完成相同的过程，那么它可能是一个解决方案。

提前致谢。

# maven - Gradle - 从 maven 加载 jar 并用作构建的一部分

> ID：11187468
> 
> 赞同：2
> 
> 时间：2012-06-25T10:21:50.487
> 
> 标签：maven, gradle

从我的 gradle 构建中，我想使用 html 压缩器将我的 html 缩小为构建过程的一部分，它作为 maven 工件存在：[http ://code.google.com/p/htmlcompressor/#Maven_Artifact](http://code.google.com/p/htmlcompressor/#Maven_Artifact)

jar 应该从 maven Central 加载，并且新版本应该在发布时自动使用。

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:01:39.300

目前，没有 Gradle 插件可以简化我所知道的这项任务。我认为如果您能写一个并将其贡献给社区，那就太好了。现在您可能可以使用htmlcompressor 提供的[Ant 任务。](http://code.google.com/p/htmlcompressor/#Setting_up_Ant_task_to_compress_files)在运行任务之前确保输入和输出目录确实存在。依赖项定义中的版本限定符允许您通过使用加号来拉取较新的版本，例如`1.+`. 我不建议这样做，因为如果 Ant 任务定义随新版本发生变化，它可能会破坏您的构建。

```
configurations {
    htmlcompressor
}

repositories {
    mavenCentral()
}

dependencies {
    htmlcompressor 'com.googlecode.htmlcompressor:htmlcompressor:1.4'
}

task compressHtml << {
    ant.apply(executable: "java", parallel: false) {
        fileset(dir: "test", includes: "*.html") {
            exclude(name: "**/leave/**")
        }

        arg(value: "-jar")
        arg(path: configurations.htmlcompressor.asPath)
        arg(line: "--type html")
        arg(value: "--preserve-comments")
        srcfile()
        arg(value: "-o")
        mapper(type: "glob", from: "*", to: "compressed/*")
        targetfile()
    }
} 
```

**编辑：**您实际上不需要将依赖项添加到脚本的类路径中。为它使用配置要干净得多。我更改了脚本以反映这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:03:00.630

> jar 应该从 maven Central 加载，并且新版本应该在发布时自动使用。

可以使用以下依赖项完成：

```
dependencies {
    htmlcompressor 'com.googlecode.htmlcompressor:htmlcompressor:latest.integration'
} 
```

# asp.net - 浏览器如何在不进行回发的情况下访问服务器？

> ID：11187469
> 
> 赞同：0
> 
> 时间：2012-06-25T10:22:02.280
> 
> 标签：asp.net, .net

我被问到这个问题，我不知道答案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:24:56.540

*回*发是 ASP.NET 中经常使用的一个术语，当 WebForm 将单个表单发布回服务器并在后面的代码中调用某些事件（例如单击按钮）时。您仍然可以使用普通的 GET 请求来重定向到给定的网页。例如，您可以使用锚点：

```
<a href="/page2.aspx?param=somevalue">Go to page 2</a> 
```

当用户单击锚点时，不会发生回发，而是对目标网页的 GET 请求。

另一种可能性是用户在其浏览器地址栏中直接键入网页地址。

另一种可能性是使用 javascript 执行 AJAX 请求，该请求允许调用网页而不重定向到当前页面。您可以将任何 HTTP 动词与 AJAX 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:34:37.113

如果您喜欢对服务器的调用进行分类，您可以说有两种类型。

`GET`和_`POST`

这`POST`是回发，是您使用发送的参数`form`

那`GET`是您可以从 url 发送的参数。

更多关于：
[http ://www.cs.tut.fi/~jkorpela/forms/methods.html](http://www.cs.tut.fi/~jkorpela/forms/methods.html)
[http://thinkvitamin.com/code/the-definitive-guide-to-get-vs-post/](http://thinkvitamin.com/code/the-definitive-guide-to-get-vs-post/)
[http:// /catcode.com/formguide/getpost.html](http://catcode.com/formguide/getpost.html)

但我认为面试问题是关于 Ajax 调用的，如果你知道，这可能是他们试图了解的，如何使用 Ajax 通过 javascript 访问服务器而不进行回发。但是您需要知道 Ajax 可以使 POST 回传，但这是在不离开页面的情况下完成的，而无需进行整页回传。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:50:02.347

我们可以使用 javascript 代码来做一些没有回发的功能。这将节省请求和响应服务器的时间。但是这个客户端。如果不回发，您将无法访问服务器。但我的意思是您可以通过不回发页面的 javascript 来执行功能。

希望它可能会有所帮助。

# ireport - 两页不同的背景图片 ireport 3.0.0

> ID：11187470
> 
> 赞同：0
> 
> 时间：2012-06-25T10:22:03.677
> 
> 标签：ireport

我想生成具有不同背景图像的两页报告（图像是静态的顺便说一句）。

第一个将用于细节，第二个将只是一个普通图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:54:41.920

你想让一张图片在第一页，另一张在第二页吗？如果是这样，在图像的属性菜单中，找到`Print When Expression`元素并使用`$V{PAGE_NUMBER}.equals()`表达式。

# regex - Java中的多种模式

> ID：11187471
> 
> 赞同：1
> 
> 时间：2012-06-25T10:22:11.477
> 
> 标签：regex

我有以下一段从 CSV 文件中读取字符串的 Java 代码。然后，拆分字符串以检查它们并提取模式中出现的“anyaddress”部分：“ [http://www.anyaddress.anything/](http://www.anyaddress.anything/) ”

```
//Split the file strings since it is CSV file
    while((Line=in.readLine())!=null) 
       strings = Line.split(",");

    for(int i=0; i<strings.length; i++)
    {
        Pattern regex = Pattern.compile(
        "(?<=http://www.)" + "[^/]*", Pattern.COMMENTS);
        Matcher regexMatcher = regex.matcher(strings[i]); 
        if (regexMatcher.find()) 
        { 
           //Returns the input subsequence matched by the previous match.
           ResultString = regexMatcher.group();                
           out.write(ResultString);
           out.newLine();
        }  //end if

    } //end for loop

    in.close();
    out.close(); 
```

现在，我发现我的文本文件可能包含以下不同格式的字符串：' [http://www.anyaddress.anything/](http://www.anyaddress.anything/) '或' [http://anyaddress.anything/](http://anyaddress.anything/) '或' [https://www.anyaddress。任何/](https://www.anyaddress.anything/) '或' [https://anyaddress.anything/](https://anyaddress.anything/) '

我只需要提取“anyaddress”部分。我在以前的帖子中搜索过[我们可以在java中使用正则表达式检查多个模式吗？](https://stackoverflow.com/questions/2457185/can-we-check-multiple-patterns-using-regex-in-java)发现我只需要加“|”。但例如，当我编辑我的正则表达式以通过添加包含第二个模式时：

```
Pattern regex = Pattern.compile(
        "(?<=http://www.) | (?<=http://)" + "[^/]*", Pattern.COMMENTS); 
```

我的程序将地址提取为：www.anyaddress.anything，而我只需要“anyaddress.anything/”部分，此外程序正确提取了没有“www”的地址。以前无法提取。

谁能向我澄清我的错误在哪里？并举例说明如何包含多个模式以使我的程序正确提取上述 4 种格式中的任何一种格式的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:05:13.187

我会避免回溯，因为它不经常使用并且在这里没有必要。另外，我不知道它如何与交替结合。由于您正在解析 URL，我建议您使用 URL 或 URI 类，提取域名，然后删除任何前导的“www”。如果您仍想使用正则表达式，请尝试

```
Pattern.compile("https?//:(?:www[.])?([^/]*)") 
```

那读

> http，加上一个可选的 's' 斜杠 斜杠冒号和可选的 'www.' 以及直到（但不包括）下一个斜线的所有内容的捕获组

您使用 group(1) 读取结果，因为它是第一个捕获组，而不是整个匹配。

# jquery - 用于格式化货币的简单脚本

> ID：11187472
> 
> 赞同：0
> 
> 时间：2012-06-25T10:22:15.173
> 
> 标签：jquery, formatting, currency

我需要一个简单地将值（例如 4567643）格式化为（4,567,643）的脚本。不需要货币符号或小数。我找到了几个脚本，包括这个：

[http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx](http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx)

但它对于我需要的东西来说非常重，我想一些非常轻的东西可以满足我的需要（并且希望不需要单独的插件。）

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:35:33.520

这是我为其他可能觉得有用的人最终得到的代码：

```
$.fn.digits = function(){ 
    return this.each(function(){ 
        $(this).text( $(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") ); 
    })
}

$(".currency").digits(); 
```

具有“货币”类的 div 包含您要格式化的数字。

# wordpress - wordpress 显示页面

> ID：11187474
> 
> 赞同：0
> 
> 时间：2012-06-25T10:22:15.807
> 
> 标签：wordpress

我使用插件[wp-type](http://wp-types.com/)

**wp-type 插件**用于制作自定义页面。例如，您可以添加一个“文件”类型的新字段，并使用以下代码在页面中显示文件链接：

```
<?php
echo(types_render_field("file", array("title"=>"Download", "link"=>"true")));
?> 
```

我的问题是当我尝试显示文件时：在主页上一切正常，但是当我尝试使用 index.php 显示帖子列表时它不起作用。

此问题仅出现在我使用的帖子页面中：

```
<?php while (have_posts()) : the_post();
echo(types_render_field("file", array("title"=>"Download", "link"=>"true")));
endwhile;?> 
```

它运作良好。

请帮助我显示 index.php 中的所有页面以及我尝试的每个页面文件：

```
<?php while (wp_list_pages( ));
echo(types_render_field("file", array("title"=>"Download", "link"=>"true")));
endwhile;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T12:03:16.010

> **替换您的代码以显示页面列表：**

```
 while (wp_list_pages( )); to while (wp_list_pages( )): 
```

# c# - DateTime 空变量格式

> ID：11187478
> 
> 赞同：0
> 
> 时间：2012-06-25T10:22:21.943
> 
> 标签：c#, .net

我有一个接收 DATETIME 类型的变量，有时来自 DB NULL 变量所以我有这个代码。

```
DateTime? d;
DateTime dtq; 
don.Date_appeal_donor= d = DateTime.TryParse(dr["Date_"].ToString(), out dtq) ? dtq : (DateTime?)null; 
```

而且我无法将格式更改为“dd / MM / yyyy”有人有解决方案吗？

你是对的，现在我意识到只有当涉及到 DATAGRIDVIEW 时它才会改变显示 这是在 wpf 中。所以我填充数据网格

```
 dataGrid1.ItemsSource= DAL.LoadCollectionData(); 
```

在这里我被困住了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:32:44.960

你可以`DateTime.TryParseExact`这样使用：

```
DateTime dtq;
DateTime? d;

don.Date_appeal_donor = d = DateTime.TryParseExact(dr["Date_"].ToString(), "dd/MM/yyyy", null, DateTimeStyles.None, out date) ? dtq : (DateTime?)null; 
```

# flash - 是否可以在 Microsoft Surface（现为 PixelSense）表上构建具有多点触控和标签识别能力的 flash 应用程序？

> ID：11187480
> 
> 赞同：2
> 
> 时间：2012-06-25T10:22:35.610
> 
> 标签：flash, pixelsense

我们需要在很短的时间内在桌面上进行演示。我们很快就会购买像素感表。

我们想知道，是否可以在 Microsoft Surface（现为 PixelSense）桌面上构建具有多点触控和标签识别能力的 flash 应用程序？

从这篇文章看来，我们可以在桌子上运行一个 Flash 应用程序，利用 microsoft table 的多点触控功能？ [http://www.adobe.com/devnet/flash/articles/multitouch_gestures.html](http://www.adobe.com/devnet/flash/articles/multitouch_gestures.html)

但是标签识别能力呢？我需要一些关于这是否可以在 Flash 中实现的指南！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:38:48.810

我们刚收到我们的 PixelSense 表，我尝试的第一件事是构建一个多点触控的 AS3 Flash 应用程序，它运行良好。

但我很确定你不能直接在 Flash 中使用标签识别，也许你可以构建一个在后台运行的识别应用程序并将其数据传递给 Flash 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:25:21.530

从我在 MDN 上阅读的所有内容来看，听起来 PixelSense 不支持浏览器中的触摸事件。 [http://social.msdn.microsoft.com/Forums/en/surfaceappdevelopment/thread/22da3ecf-de5e-48f6-adc8-cf3e20af044f](http://social.msdn.microsoft.com/Forums/en/surfaceappdevelopment/thread/22da3ecf-de5e-48f6-adc8-cf3e20af044f)

您可以使用嵌入无头浏览器的应用程序，将 SWF 加载到其中。但这不会为您提供触摸 API，基于此讨论： [http ://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/77201345-2150-4935-953a-3554dabfc05b](http://social.msdn.microsoft.com/Forums/en-US/surfaceappdevelopment/thread/77201345-2150-4935-953a-3554dabfc05b)

根据 Adob​​e 论坛中的讨论，Adobe AIR 似乎也不支持触摸 API 集成： [http ://forums.adobe.com/message/4526917](http://forums.adobe.com/message/4526917)

我没有测试过自己，因为我无法使用 Microsoft Surface/Pixel Sense 设备。

# java - Struts 2 HTML问题使用时

> ID：11187486
> 
> 赞同：0
> 
> 时间：2012-06-25T10:23:00.743
> 
> 标签：java, html, jsp, struts2

我`<s:doubleselect>`在我的jsp中使用。问题都出现在不同的行，而我想要在同一行。这是代码

```
 <s:doubleselect theme="css_xhtml"  labelposition="top" 
     requiredposition="left" name="index" cssClass="dropdown_menu" list="#request.constants.keySet()" 
   doubleList="#request.constants[top]" doubleName="oldValue"
 doubleCssClass="dropdown_menu" ></s:doubleselect> 
```

怎么可能把它们放在同一条线上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:28:37.180

这种行为是旧 UI 标记的不幸保留。

最*简单*的解决方案是使用 CSS 更改类`<br/>`内部的样式`.wwctrl`（更改所有控件，这可能是您想要的）：

```
.wwctrl br {
  display: none;
} 
```

一个不太实用但可能更简洁的解决方案是扩展主题并调整控件的模板。有许多控件的 HTML 有问题，但几乎没有人使用专门的控件，因此我们从不修复它们。

# javascript - 如何遍历第三个单元格具有 rowspan 属性的每一行

> ID：11187487
> 
> 赞同：1
> 
> 时间：2012-06-25T10:23:03.863
> 
> 标签：javascript, jquery

```
for (var i = 0; row = tableAppointment.rows[i]; i++) {
  for (var j = 0; col = row.cells[j]; j++) {
    //iterate through columns
    //columns would be accessed using the "col" variable assigned in the for loop.
  }
} 
```

如何遍历第三个单元格具有`rowspan`属性的每一行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T10:26:05.820

这将为您提供所有`<tr>`包含此类元素的内容：

```
$('td:nth-child(3)[rowspan]').parent() 
```

演示在[http://jsfiddle.net/52aR2/1/](http://jsfiddle.net/52aR2/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:30:35.933

```
$("tr").filter( function() {
    return this.cells[2].hasAttribute("rowspan");
}); 
```

[http://jsfiddle.net/52aR2/2/](http://jsfiddle.net/52aR2/2/)

或者

```
for (var i = 0; row = tableAppointment.rows[i]; i++) {
    if( row.cells[2].hasAttribute("rowspan") {
        //This is a row that matches
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:27:14.290

像这样的东西应该工作

```
$('tr').filter( function() {
    return $('td:eq(2)',this).attr( 'rowspan' ) !== undefined;
} ).css( 'border', '1px solid red')​​​​​​​​​​​​​​​​​​​​;​ 
```

[http://jsfiddle.net/9gMRk/](http://jsfiddle.net/9gMRk/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:28:40.503

你可以这样做：

```
if (cell[2].hasAttribute('rowspan')) {
   // do something here
} 
```

用途[`element.hasAttribute()`](https://developer.mozilla.org/en/DOM/element.hasAttribute)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T10:37:00.710

```
Array.prototype.slice.call(tableAppointment.rows).
    filter(function(row) { return row.cells[2].rowSpan > 1; }).
    forEach(function(row) {
        // do something with row
    }); 
```

哇哦，看妈妈，没有 jQuery！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T02:38:35.393

这实际上是正确的答案。

```
$('td:nth-child(3)[rowspan]').parent() 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-25T11:04:29.540

```
$('td:nth-child(3)[rowspan]').parent() 
```

# jsf-2 - icefaces 3 - 无法从 WEB-INF 内的页面访问支持 bean

> ID：11187491
> 
> 赞同：1
> 
> 时间：2012-06-25T10:23:24.817
> 
> 标签：jsf-2, navigation, icefaces, web-inf, icefaces-3

我将 icefaces 版本从 1.8 升级到 3，我面临以下问题：每次我在 WEB-INF 内的支持 bean 表单页面中调用一个方法时，都会出现错误“网络连接中断”，并且在 Firefox 中我看到当我悬停按钮 POST mypage.jsf ， STATUS 404 Not Found。有人可以帮我吗？如果我将页面移到 WEB-INF 之外它可以工作，但我不会改变我项目的所有结构......非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:17:04.270

我建议您将页面移到 WEB-INF 之外。该目录在 Web 应用程序部署中具有特定的含义。它保存 servlet 使用的配置和（例如）类。Web 容器不应该提供该目录的内容，如果在 1.8 中发生这种情况，可能是已修复的错误。

# mysql - 在mysql中使用空值更新concat文本

> ID：11187496
> 
> 赞同：5
> 
> 时间：2012-06-25T10:23:47.310
> 
> 标签：mysql

交易表描述字段有一些价值，它工作得很好。描述字段默认值为NULL，它不起作用..

```
update transaction set domain='hiox.com',description=CONACT(description,',domain swapped from hioxindia.com to hiox.com') where id=23602 
```

帮我..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T10:25:38.857

使用`ifnull()`：

```
update `transaction` 
   set domain='hiox.com',
   description=CONCAT(ifnull(description, ''), ',domain swapped from hioxindia.com to hiox.com') 
where id=23602 
```

[文档](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)

# java - 连接错误 JTextfield（已添加代码）

> ID：11187497
> 
> 赞同：0
> 
> 时间：2012-06-25T10:23:52.850
> 
> 标签：java, sql-server, static, jtextfield

我有以下方法：建立连接

```
 try {
                kc = ArchiveConnectionHandler.makeMSSQLConnection(
                        MSSQLDriver, 
                        MSSQLconnString, 
                        guiValues.get(1),
                        guiValues.get(2), 
                        guiValues.get(3), 
                        guiValues.get(4));

                JOptionPane.showMessageDialog(new JFrame("succes");

                kc.close();

            } catch (ClassNotFoundException e1) {
                e1.printStackTrace();
            } catch (SQLException e1) {
                e1.printStackTrace();
                JOptionPane.showMessageDialog(new JFrame("error"), 
                        "Error");
            } 
```

连接方式

```
public static java.sql.Connection makeMSSQLArchConnection(String driver, String connectionString, String user, String pass, String ipaddress, String port)  
        throws ClassNotFoundException, SQLException
{
    if(MSArchiveConnection == null)
    {
        Class.forName(driver);
        MSArchiveConnection = DriverManager.getConnection(connectionString + "://" + ipaddress + ":" + port, user, pass);
        if(MSArchiveConnection != null)
        {
            System.out.println("MSArchiveConnection!");
        }
    }
    return MSArchiveConnection;
} 
```

发送 GUI 值的方法

```
public List<String> getGuiValues(){

    List<String> values = new ArrayList<String>();
    values.add(btngrp.getSelection().getActionCommand());
    values.add(kanaUsernameTf.getText());
    values.add(kanaPasswordTf.getText());
    values.add(kanaIpAdressTf.getText());
    values.add(KanaPortTf.getText());
    values.add(archiveUsernameTf.getText());
    values.add(archivePasswordTf.getText());
    values.add(archiveIpAdressTf.getText());
    values.add(archivePortTf.getText());
    values.add(archiveDbNameTf.getText());
    values.add(btngrp2.getSelection().getActionCommand());
    values.add(archiveDateTf.getText());
    values.add(sessionAmountTf.getText());
    values.add(xmlLocation.getText());
    values.add(oldAttachtmentLoc.getText());
    values.add(newAttachmentLoc.getText());

    return values;  
} 
```

我在 GUI 类中有一个方法，可以将用户输入放在列表中。此列表用于与 MSSQL 数据库建立连接。此连接是使用静态方法进行的。

这是我的问题，当我单击按钮时，连接没有重新建立。所以当我清空所有字段并想重新测试连接时，测试仍然成功。谁可以给我解释一下这个。

**编辑**

```
package com.kahuna.jkram.userinterface;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

import com.kahuna.jkram.utils.ArchiveConnectionHandler;

public class ButtonHandler implements ActionListener {

    private ArchiveUserInterface ui;

    public ButtonHandler(ArchiveUserInterface ui){

        this.ui = ui;

        for(JButton button : ui.getButtons())
        {
            button.addActionListener(this);
        }
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        String MSSQLDriver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
        List<String> guiValues = ui.getGuiValues();
        String MSSQLconnString = "jdbc:sqlserver";
        String action = e.getActionCommand();

        Connection kc = null;

        if(action.equals("kanaTest"))
        {
            if(guiValues.get(0).equals("MSSQL"))
            {

                try {
                    kc = ArchiveConnectionHandler.makeMSSQLConnection(
                            MSSQLDriver, 
                            MSSQLconnString, 
                            guiValues.get(1),
                            guiValues.get(2), 
                            guiValues.get(3), 
                            guiValues.get(4));

                        JOptionPane.showMessageDialog(new JFrame("Database connectie test."), 
                            "De databaseverbinding is succesvol getest.");

                    kc.close();

                } catch (ClassNotFoundException e1) {
                    e1.printStackTrace();
                } catch (SQLException e1) {
                    e1.printStackTrace();
                    JOptionPane.showMessageDialog(new JFrame("SQL Fout"), 
                            "Er is een databasefout opgetreden, controleer de verbinding");
                }
            }
        }
        else if(action.equals("archiveTest"))
        {
            try {
                Connection ac = ArchiveConnectionHandler.makeMSSQLArchConnection(
                        MSSQLDriver, 
                        MSSQLconnString, 
                        guiValues.get(5), 
                        guiValues.get(6), 
                        guiValues.get(7), 
                        guiValues.get(8));

                JOptionPane.showMessageDialog(new JFrame("Database connectie test."), 
                        "De databaseverbinding is succesvol getest.");
                ac.close();
                System.out.println(ac.isClosed());

            } catch (ClassNotFoundException e1) {
                e1.printStackTrace();
            } catch (SQLException e1) {
                e1.printStackTrace();
                JOptionPane.showMessageDialog(new JFrame("SQL Fout"), 
                        "Er is een databasefout opgetreden, controleer de verbinding");
            }
        }
        else if(action.equals("saveSettings"))
        {
            System.out.println("Save Settings");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:47:51.407

我解决了这个问题，感谢您指出我正确的方向。我将方法从静态更改为非静态。

# java - Spring Security 登录有一个转折：用户必须在登录前激活他们的帐户

> ID：11187500
> 
> 赞同：5
> 
> 时间：2012-06-25T10:24:04.043
> 
> 标签：java, spring, security, authentication

我已经实施了 spring security 来保护我们网站的某些部分。我正在使用数据库（MongoDB）来存储用户名/密码。我实现了 org.springframework.security.core.userdetails.UserDetailsS​​ervice 从数据库中查找帐户详细信息。

我还需要添加另一个功能：帐户激活。注册后，我们会向用户发送一封激活电子邮件，如果他点击它，我们会在数据库中将该帐户标记为已激活。尚未激活其帐户的用户不应被允许登录，并应被重定向到一个页面。

关于如何实施的任何想法？我需要以某种方式进入登录过程。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T13:09:30.197

**不需要自定义 AuthenticationManager**。此功能已在 Spring Security 中可用。看一下[文档](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetails.html)，您可以看到该`enabled`属性。创建用户时，如果将该属性设置为 false 并且用户尝试登录，Spring 将自动显示一条消息，通知用户帐户未激活。

**更新**

为了显示 Spring 错误消息，您应该在登录页面中使用它：

```
<c:out value="${SPRING_SECURITY_LAST_EXCEPTION.message}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:29:53.967

您可以创建自定义身份验证管理器，您可以在其中检查用户是否已激活

```
<bean id="authenticationFilter"     class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
        p:authenticationManager-ref="customAuthenticationManager"
        p:authenticationFailureHandler-ref="customAuthenticationFailureHandler"
        p:authenticationSuccessHandler-ref="customAuthenticationSuccessHandler" /> 
```

和自定义 authenticationManager

```
<bean id="customAuthenticationManager"
        class="com.mycompany.security.CustomAuthenticationManager" /> 
```

**CustomAuthenticationManager.java**

```
public class CustomAuthenticationManager implements import org.springframework.security.authentication.AuthenticationManager{
        @Override
    public Authentication authenticate(Authentication auth)
            throws AuthenticationException {

        User user = null;
        if (auth.getName() == null) {
            throw new BadCredentialsException("User does not exists!");
        }
        user = userService.getUserByUsername(auth.getName());
        if (user == null) {
            throw new BadCredentialsException("User does not exists!");
        }
        if (passwordEncoder.isPasswordValid(user.getPassword(), (String) auth.getCredentials(), null)) {
            //check if user is activated if not throw appropriate excetion
        } else {
            throw new BadCredentialsException("User does not exists!");
        }

    } 
```

它会将用户重定向回登录页面（如果配置正确）

现在在 login.jsp 中，通过

```
${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message} 
```

并向用户显示适当的消息}

# ios - IOS GLKit：图灵 GLKViewDrawableMultisample4X 停止对象拾取

> ID：11187504
> 
> 赞同：0
> 
> 时间：2012-06-25T10:24:13.800
> 
> 标签：ios, opengl-es, glkit, picking

我正在使用像素颜色拾取来计算我单击了哪个 OpenGL 对象，并且效果非常好

在视图中打开 GLKViewDrawableMultisample4X 后，拾取停止工作？

我尝试在触摸屏幕时打开和关闭它，但只能工作一次。

拣货代码：

```
 GLKView *glkView = (GLKView*)[self view];
  UIImage *snapshot = [glkView snapshot];
  GLKVector4 colour = [snapshot pickPixelAtX:xPos Y:yPos];

@implementation UIImage (NDBExtensions)

- (GLKVector4)pickPixelAtX:(NSUInteger)x Y:(NSUInteger)y {

    CGImageRef cgImage = [self CGImage];
    size_t width = CGImageGetWidth(cgImage);
    size_t height = CGImageGetHeight(cgImage);

    if ((x < width) && (y < height))
    {
        CGDataProviderRef provider = CGImageGetDataProvider(cgImage);
        CFDataRef bitmapData = CGDataProviderCopyData(provider);
        const UInt8* data = CFDataGetBytePtr(bitmapData);
        size_t offset = ((width * y) + x) * 4;

        UInt8 b = data[offset+0];
        UInt8 g = data[offset+1];
        UInt8 r = data[offset+2];
        UInt8 a = data[offset+3];

        CFRelease(bitmapData);

        return GLKVector4Make(r, g, b, a );

    }
    return GLKVector4Make(0,0,0,0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:06:44.677

我设法使用此代码解决了这个问题

[iOS 上的 OpenGL ES 2.0 对象拾取](https://stackoverflow.com/questions/6774197/opengl-es-2-0-object-picking-on-ios)

很好的答案，基本上 GLKViewDrawableMultisample4X 不适用于拾取，因此您需要制作另一个渲染缓冲区

# android - android中AutoCompleteTextView的页眉和页脚

> ID：11187509
> 
> 赞同：0
> 
> 时间：2012-06-25T10:24:23.510
> 
> 标签：android, listview

我将 AutoCompleteTextView 附加到我的视图中，并使用 ArrayAdapter 填充项目列表。但我不知道如何为 AutocompleteTextView 下拉项目添加页眉和页脚视图。

我知道我们可以在列表视图中添加页眉和页脚。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:44:13.433

在 AutoCompleteTextView 上，您无法直接访问 DropDownListView，这就是为什么您不能在此处添加页眉和页脚视图的原因。

解决您的问题的方法是在列表中使用 2 种类型的视图，并将第一行/最后一行设置为具有页眉/页脚的布局。这可以在您自己创建的适配器上完成。

以下是有关如何为列表视图中的不同行提供不同布局的一些信息： [Android ListView with different layouts for each row](https://stackoverflow.com/questions/4777272/android-listview-with-different-layout-for-each-row)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:11:59.227

Android 提供了 addHeaderView(View v) 和 addFooterView(View v) 等方法来定义 ListView 的页眉和页脚。

要找到您问题的答案，我可以向您[推荐 Android：将静态标题添加到 ListActivity 的顶部](https://stackoverflow.com/questions/2620177/android-adding-static-header-to-the-top-of-a-listactivity)。

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T10:07:11.363

```
private class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.
                    resultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }};
        return filter;
    }
} 
```

其中自动完成函数应返回字符串的数组列表

# regex - 检查字符串中某个字符是否多次出现

> ID：11187517
> 
> 赞同：3
> 
> 时间：2012-06-25T10:25:02.030
> 
> 标签：regex

我正在努力解决应该有点简单的事情。我需要制作一个正则表达式来检查字符串是否有效。标准之一是字符串仅包含 1 个句点 ('.')。

所以，我在进行匹配时遇到问题，如果它多次找到一个时期，它就会消失。`\.{2,}`在我的字符串中的多个位置，不是彼此相邻的句点 ( )，而是单个句点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:27:28.130

如果此表达式`\..*\.`匹配，则字符串包含超过 1 个句点...

# qt - 必须按 QPushbutton 两次

> ID：11187522
> 
> 赞同：1
> 
> 时间：2012-06-25T10:25:25.010
> 
> 标签：qt, signals, connect, slot

我想在 QT 中列出工具按钮。工具按钮应出现在 scollarea 中。单击按钮时应显示此列表。我已经编写了代码并且它可以工作，除了我必须按下按钮两次才能让列表出现。这是我的代码：

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
  ui->setupUi(this);

  find_btn.setParent(ui->centralWidget);
  find_btn.setGeometry(480,250,130,132);

  viewport.setLayout(&scrollLayout);   

  scrollArea.setParent(ui->centralWidget);
  scrollArea.setGeometry(0,116,339,404);
  scrollArea.setWidget(&viewport);

  connect(&find_btn,SIGNAL(clicked()),this,SLOT(import()));
}

void MainWindow::import()
{
  button.setCheckable(true);
  button.setMinimumSize(317,60);

  button2.setCheckable(true);
  button2.setMinimumSize(317,60);

  scrollLayout.addWidget(&button);
  scrollLayout.addWidget(&button2);

  viewport.adjustSize();
} 
```

所以当我按下“find_btn”时，应该会出现里面有按钮的滚动区域。目前出现带有按钮的滚动区域，但只有在我单击“find_btn”两次之后。

我想我必须更新滚动区域或类似的东西。也许连接导致问题？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:06:31.987

您可以尝试以下几种选择：

```
viewport.update(); 
```

或者

```
scrollArea.viewport()->update(); 
```

或者

```
QApplication::processEvents( QEventLoop::ExcludeUserInputEvents ); 
```

或它们的任何组合。

在再次按下按钮强制重绘之前，可能不会重绘 GUI。

# objective-c - Objective-C 支持类变量吗？

> ID：11187530
> 
> 赞同：15
> 
> 时间：2012-06-25T10:26:03.330
> 
> 标签：objective-c, class-variables

我知道它支持自动变量，但是类变量呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-25T10:29:10.750

该语言不支持类变量。`static`您可以在实现的编译单元中使用全局变量来实现特定于类的状态。

在标头（.h 文件）中：

```
@interface MyClass : NSObject
+(int)val;
@end 
```

在实现中（.m 文件）：

```
static int val = 123;

@implementation MyClass
+(int)val {return val;}
@end 
```

用法：

```
if ([MyClass val] > 100) ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T10:45:22.147

ObjC 类变量是普通的旧静态变量。

`Foo.m`：

```
static int foo = 0; 
```

或者，如果您使用 ObjC++，则可以使用 C++ 匿名命名空间：

`Foo.mm`：

```
namespace {
    int foo = 0;
} 
```

但是，如果您想从属性的优势中受益，还有另一种模式：

`Foo.h`：

```
@interface FooShared

@property ( atomic, readwrite, strong ) Foo* foo;

@end

@interface Foo

+ (FooShared*) shared;

@end 
```

`Foo.m`：

```
@implementation FooShared
@end

static fooShared* = nil;

@implementation Foo

+ (FooShared*) shared
{
    if ( fooShared == nil ) fooShared = [FooShared new];

    return fooShared;
}

@end 
```

`somewhere.m`：

```
Foo* foo …;
foo.shared.foo = …; 
```

它可能看起来有点矫枉过正，但这是一个有趣的解决方案。您对实例属性和“类”属性使用相同的结构和语言特性。按需原子性、需要时的访问器、调试、断点……甚至是继承。

我想，创造性思维可以找到其他方法来完成这一切。:) 但是您几乎涵盖了这些选项。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-10T19:04:00.333

```
@property (class, nonatomic, copy) NSString *someStringProperty; 
```

但是你必须提供getter和setter

来自 Xcode 8 发行说明：Objective-C 现在支持类属性，它与 Swift 类型属性互操作。它们被声明为：@property (class) NSString *someStringProperty;。它们永远不会被合成。(23891898)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-04T06:11:56.993

Xcode 8.x 中重新添加了类属性。这与您编写自己的 setter 和 getter 作为类方法并使用静态来存储一样多。事实上，这就是它的全部内容，除了编译器消息，见下文。

> Objective-C 现在支持与 Swift 类型属性互操作的类属性。它们被声明为@property (class) NSString *someStringProperty;，并且永远不会被合成。(23891898)

[https://developer.apple.com/library/archive/releasenotes/DeveloperTools/RN-Xcode/Chapters/Introduction.html](https://developer.apple.com/library/archive/releasenotes/DeveloperTools/RN-Xcode/Chapters/Introduction.html)

```
@interface MyClass

@property (class) NSObject *someClassProperty;
@property (class, readonly) NSString *aReadClassProperty;

@end 
```

如果您不添加所需的 getter/setter，您将看到以下错误：

> 类属性 'aReadClassProperty' 需要定义方法 'aReadClassProperty' - 使用 @dynamic 或在此类实现中提供方法实现
> 
> 类属性 'someClassProperty' 需要定义方法 'setSomeClassProperty:' - 使用 @dynamic 或在此类实现中提供方法实现
> 
> 类属性 'someClassProperty' 需要定义方法 'someClassProperty' - 使用 @dynamic 或在此类实现中提供方法实现

在您的实施中，您需要：

```
@implementation MyClass

static NSObject *object;

+ (void)setSomeClassProperty:(NSObject *)someClassProperty {
    object = someClassProperty;
}

+ (NSObject *)someClassProperty {
    return object;
}

static NSString *string = @"My class string";

+ (NSString *)aReadClassProperty {
    return string;
} 
```

# php - 突出显示带有匹配文本的 HTML 代码

> ID：11187532
> 
> 赞同：2
> 
> 时间：2012-06-25T10:26:06.230
> 
> 标签：php, html, string

我需要在 html 中查找文本并突出显示该 html 而不会损坏我突出显示的 html 本身。

要替换的文本：

> 这是文本 2。这是文本 3。

HTML：

```
This is text 1\. <p>
This is <span>Text 2</span>. This <div>is</div> text 3.
</p> This is Text 4. 
```

期望的输出：

```
This is text 1.<p>
<strong class="highlight">This is <span>Text 2</span>. This <div>is</div> text 3\. </strong>
</p> This is Text 4. 
```

**编辑**：对不起，如果我无法正确解释。

如果我正在搜索的字符串与 HTML 中的文本匹配，我需要突出显示 html 文档的一部分（在 php 或 javascript 中）。

但请记住，我正在搜索的字符串与搜索字符串不同，它可能包含一些额外的 HTML。

例如，如果我正在搜索这个字符串“ *This is text.* ”，它应该与“This is text.”、“<anyhtmltag>This</anyhtmltag> is text.”、“This <anyhtmltag>is</ "anyhtmltag> text.", "This<anyhtmltag> is text</anyhtmltag>." 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:10:45.227

如果您想通过服务器端（例如使用 PHP 并向浏览器返回已经包含突出显示的输出的 HTML 代码）或客户端（例如使用 jQuery 来查找和突出显示某些内容）来实现这一点，您需要更具体在服务器返回的 HTML 中）？

在我看来，你只是问了一个问题，没有做任何事情（比如搜索网络），因为为 jQuery（客户端）找到合适的解决方案花了我大约 10 秒！三个最重要的搜索结果是 StackExchange 和 jQuery 文档本身。

[使用 jQuery 查找文本？](https://stackoverflow.com/questions/8785053/find-text-using-jquery)

[使用jQuery查找文本字符串？](https://stackoverflow.com/questions/926580/find-text-string-using-jquery)

[jQuery .wrap() 函数说明](http://api.jquery.com/wrap/)

这是一个非常简短的示例：

```
<script>
     $('div:contains("This is <span>Text 2</span>. This <div>is</div> text 3")')wrap("<strong class="highlight"></strong>");
</script> 
```

它通常会找到您想要查找的内容，并使用您想要包裹的内容进行包裹。

这有效，当您要查找的文本在某个 div 内时，这就是为什么我使用`$('div:contains`. 如果要搜索整个页面，可以使用`$('*:contains`。

这是 jQuery 和客户端突出显示的示例。对于 PHP（服务器端）版本，在 Google 或 StackOverflow 上进行一些搜索，您肯定会找到很多示例。

**编辑**：*至于您更新的问题。如果您使用任何文本框将您想要搜索的内容放在那里，您当然可以使用以下内容：*

```
<script>
    $("#mysearchbox").change(
    {
        $('div:contains($("#mysearchbox")').wrap("<strong class="highlight"></strong>");
    });
</script> 
```

*并在其他地方定义您的搜索框，例如：*

```
<input id="mysearchbox"></input> 
```

*这样，您将一个`onChange`事件附加到您的搜索框，该事件将在您输入任何内容时触发，并且应该找到（并突出显示）您输入的任何内容。请注意，此示例来自手头（来自记忆）。我无法从我正在编写的地方访问 jQuery，所以如果没有任何错误，我无法检查我刚刚写的内容。你需要自己测试一下。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T12:20:15.687

通过使用 JQuery，您可以向这样的元素添加类...

的HTML：

```
<p id='myParagraph'>I need highlighting!</p> 
```

jQuery：

```
$(document).ready(function(){
    $('#myParagraph').addClass('highlight');
}); 
```

I would have a look at where you can put certain HTML elements, as it is not advisable to be putting things like div tags in p tags.

I hope this helps!

**UPDATED**

Okay, well you can use JQuery to [wrap](http://api.jquery.com/wrap/) tags around your code.

If you need to remove the tags you can use PHP's [strip tags](http://php.net/manual/en/function.strip-tags.php) function - this might help with comparing the text string without the HTML formatting - obviously will be done before the page has loaded in the browser. Not sure on a Javascript equivalent.

The wrap will allow you to get from your HTML to your Desired Output - That said, I would seriously consider the structure of your HTML to make sure it is the best it can be... might make life easier.

# android - 取消正在执行的任务

> ID：11187536
> 
> 赞同：0
> 
> 时间：2012-06-25T10:26:14.197
> 
> 标签：android, android-asynctask

当我登录到我的应用程序时，一个异步任务开始执行，当该任务正在执行并且我注销应用程序时，该任务仍在运行并在一段时间后给我结果（尽管我已经注销）。我想问一下，有没有办法取消那个任务，这样它就不会给我结果？

```
 class AsyncClass extends AsyncTask<>{

    @Override
     protected String doInBackground(Void... params)
      {
             if(isCancelled())
               {
                Log.d("isCancelled", iscancelled());
               }
          //call the webservice

      }
    } 
```

现在我要打电话的还有其他课程

```
if(asyncTaskObject!=null){
    asyncTaskObject.cancel(true);
        asyncTaskObject=null;
} 
```

但是里面的 Log 语句`iscancelled()`永远不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:31:05.207

是的，您可以使用取消 AsyncTask [`cancel(boolean)`](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)。您可以创建 AsyncTask 类的实例并调用，

```
if(task != null && task.equals(AsyncTask.Status.RUNNING))
task.cancel(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:29:36.810

是的，有可能。

```
YourAsyncTask mTask;
 if(mTask!=null) mTask.cancel(); 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:31:47.307

根据此[链接](https://stackoverflow.com/questions/6039158/android-cancel-async-task) 使用 Task.cancel(true);and isCancelled()

```
private class UpdateLibrary extends AsyncTask<Void, Integer, Boolean>{
    private ProgressDialog dialog = new ProgressDialog(Library.this);
    private int total = Library.instance.appState.getAvailableText().length;
    private int count = 0;

    //Used as handler to cancel task if back button is pressed
    private AsyncTask<Void, Integer, Boolean> updateTask = null;

    @Override
    protected void onPreExecute(){
        updateTask = this;
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setOnDismissListener(new OnDismissListener() {               
            @Override
            public void onDismiss(DialogInterface dialog) {
                updateTask.cancel(true);
            }
        });
        dialog.setMessage("Updating Library...");
        dialog.setMax(total);
        dialog.show();
    }

    @Override
    protected Boolean doInBackground(Void... arg0) {
            for (int i = 0; i < appState.getAvailableText().length;i++){
                if(isCancelled()){
                    break;
                }
                //Do your updating stuff here
            }
        }

    @Override
    protected void onProgressUpdate(Integer... progress){
        count += progress[0];
        dialog.setProgress(count);
    }

    @Override
    protected void onPostExecute(Boolean finished){
        dialog.dismiss();
        if (finished)
            DialogHelper.showMessage(Str.TEXT_UPDATELIBRARY, Str.TEXT_UPDATECOMPLETED, Library.instance);
        else {
                //Do nothing......
             }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:36:15.903

就在一天前我遇到了同样的问题:)

对我有用的其他 3 个答案的混合。

首先在一个字段上声明您的 asyncTask：

```
private MyTaskClass miTask; 
```

如果有活动，则在 onCreate/onResume 上：

```
miTask = new MyTaskClass(); 
```

然后你可以用任何方法执行它。

```
miTask.execute(); 
```

在 onPause/onStop 中：

```
miTask.cancel(true); 
```

这仅在您的 doInBackground 中检查 isCancelled() 时才有效，这是我为在片段被解除时已经关闭的光标访问所做的示例：

```
@Override
    protected Void doInBackground(Void... params) {
        cached = true;
        int idIndex = currentCursor.getColumnIndex(Contacts._ID);
        int displayNameIndex = currentCursor
                .getColumnIndex(Contacts.DISPLAY_NAME);

        while (currentCursor.moveToNext()) {
            if (isCancelled()) {
                break;
            } 
```

希望有帮助，问候。亚历克斯

# c# - 使用 Linq 和继承绑定到对象的通用方法

> ID：11187537
> 
> 赞同：2
> 
> 时间：2012-06-25T10:26:16.153
> 
> 标签：c#, linq, c#-4.0

我正在努力弄清楚如何执行以下操作：

我有几种方法可以返回不同的强类型 IEnumerable 对象。这些强类型类共享一个公共基类，该基类公开了我想在 Linq 选择器中访问的属性。

但是我似乎无法让这个工作。如果我只是在方法中传递基类型，那么在绑定 IEnumerable 时会出现错误，因为派生类中可用的属性不可用。

如果我尝试传递类型，那么因为 Linq 表达式不知道类型，所以我无法访问我在 Linq 表达式中需要的属性。

我需要以某种方式告诉 Linq 表达式，我的 IEnumerable 类型是从我的基类派生的。下面是我正在尝试做的一个例子：

```
private IEnumerable<MyStronglyTypedResultSet> GetReportDetails()
{
  // this returns the IEnumerable of the derived type
}

public class MyBaseClass
{
    public Guid UserId {get; set;}
    public string OfficeName {get; set;}
}

public class MyStronglyTypedResultSet : MyBaseClass
{
   public string FullName {get; set;}
   public int Age {get; set;}
}

public void MyProblemMethod<T>(IEnumerable<T> allData, string officeToFind)
{
    // How do I tell Linq that my <T> type is derived from 'MyBaseClass' so I can access the 'OfficeName' property?

    IEnumerable<T> myData = allData.Where(c => c.OfficeName .ToLower().Equals(officeToFind.ToLower()));
    MyUsefulObject.DataSource= myData; // This needs to have access to the properties in 'MyStronglyTypedResultSet' 
    MyUsefulObject.DataaBind();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:31:51.047

您可以使用[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)扩展方法。

```
public void MyProblemMethod<T>(IEnumerable<T> allData, string officeToFind)
{
    // How do I tell Linq that my <T> type is derived from 'MyBaseClass' so I can access the 'OfficeName' property?

    IEnumerable<T> myData = allData.OfType<MyBaseClass>.Where(c => c.OfficeName .ToLower().Equals(officeToFind.ToLower()));
    MyUsefulObject.DataSource= myData;
    MyUsefulObject.DataaBind();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:29:06.770

改变你的方法如下

```
public void MyProblemMethod<T>(IEnumerable<T> allData, string officeToFind) where T : MyBaseClass
{
    // How do I tell Linq that my <T> type is derived from 'MyBaseClass' so I can access the 'OfficeName' property?

    IEnumerable<T> myData = allData.Where(c => c.OfficeName .ToLower().Equals(officeToFind.ToLower()));
    MyUsefulObject.DataSource= myData; // This needs to have access to the properties in 'MyStronglyTypedResultSet' 
    MyUsefulObject.DataaBind();
} 
```

# c++ - 使用 Boost 的 shared_ptr 和 weak_ptr 构造树

> ID：11187538
> 
> 赞同：0
> 
> 时间：2012-06-25T10:26:19.570
> 
> 标签：c++, boost, shared-ptr

这是正确的方式，`boost::shared_ptr`用于节点左右和`boost::weak_ptr`根。我知道共享是一种矫枉过正。我以后需要这个。

类节点，2个儿子共享ptr

```
class Node
{
public:
boost::shared_ptr<Node> left;
boost::shared_ptr<Node> rigth;
int nVal;
Node();
Node(int);
~Node();
Node getVal(void);
void setVal(int);

};

Node::Node()
{
cout << "creating node empty" << endl;
nVal = 0;
left.reset();
rigth.reset();

}

Node::~Node()
{
cout << "entering destructor" << endl;
 }

Node::Node(int n)
{
cout << "creating node with value" << endl;
nVal = n;
left.reset();
rigth.reset();
}

Node Node::getVal(void)
{
cout << "returning value" << endl;
return this;
}

void Node::setVal(int n)
{
cout << "setting value" << endl;
nVal = n;
} 
```

类树，弱指针

```
class Tree 
{
public:
boost::weak_ptr<Node> root;
Tree();
~Tree();
void findParent(int n, int &found, Node &parent);
void add(int n);
void post(boost::weak_ptr<Node> q);
void del(int n);

};

Tree::Tree()
{
root = NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:07:50.327

您不应该像这样对节点使用弱指针。弱指针意味着即使该对象仍有可用的弱指针，如果不存在指向该对象的其他弱指针，该对象也可能被删除。

因此，在您的情况下，您有一个指向根的弱指针，而没有共享指针。在这种情况下，根将被删除，因为没有共享指针使其保持活动状态，并且所有树都将消失。

一般规则是，应将共享指针用于所有权关系。树绝对拥有自己的根。另一方面，弱指针应该用于指向直接或间接父母的反向指针，以打破循环。所以如果你有节点指向根，这将是一个使用弱指针的地方。

确保最好的方法是首先尝试使用共享指针，并注意不要在依赖项中建立任何圈子。仅当您必须打破循环时，才根据所有权/反向指针差异将共享指针更改为弱指针。

# html - 如何从文本摘录中获取 xpath 路由

> ID：11187543
> 
> 赞同：2
> 
> 时间：2012-06-25T10:26:29.080
> 
> 标签：html, perl, xpath, scrapy

给定如下 HTML：

```
...more html above...
<div class="any_name">
  <p>Element A goes here</p>
  <p>Element B goes here</p>
</div>
...more html below... 
```

我需要获取包含（例如）“A go”文本的任何元素的 xpath 路径，并获得如下信息：

```
/html/body/div[4]/div[2]/div/article/div/p 
```

请注意，每种情况下的结构可能不同，我每次都需要搜索整个文档以查找文本...

实际上，我成功地获取了 Web 内容，但是在 Web::Scraper 中应用这样的***//element[text()="A goes"]***似乎不起作用。

如何使用内容获取此 xpath 路由？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:56:57.853

您可以使用[XML::Twig](http://search.cpan.org/~mirod/XML-Twig/Twig.pm)来获得它。我稍微更改了您提供的 xpath 并使其更加模块化。

```
use strict; use warnings;
use feature 'say';
use XML::Twig;
my $twig = XML::Twig->new();
$twig->parse(<<_HTML_
<html><body>
<div class="any_name">
  <p>Element A goes here</p>
  <p>Element B goes here</p>
</div>
</body></html>
_HTML_
);

for my $letter (qw(A B C)) {
  foreach my $t ($twig->get_xpath("//p[string()=~/$letter goes/]")) {
    say $t->xpath;
  }
} 
```

You can use a regular expression in your xpath to find the elements that match your letter. The one with `text()=` didn't work in this case, because `XML::Twig` matches the complete text if you use `=` instead of `=~ //`. Also, the correct syntax is `string()`, not `text()`.

The `get_xpath` method returns a list of elements. I use the `xpath` method on each of them, which returns the full xpath to the element. In my case that is:

```
/html/body/div/p[1]
/html/body/div/p[2] 
```

There is no match for `C` because I did not put it in the HTML code.

# qt - boost和qt信号一起使用

> ID：11187544
> 
> 赞同：0
> 
> 时间：2012-06-25T10:26:32.870
> 
> 标签：qt, boost, signals-slots

我在 qt creator 中同时使用 boost 和 qt 信号和插槽。我已按照上述[说明](http://www.boost.org/doc/libs/1_44_0/doc/html/signals/s04.html#id2546691)进行操作。这是我的 .pro 文件

```
QT       += core gui

TARGET = adaptortest
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    adaptor.cpp \
    gstreamer.cpp

HEADERS  += mainwindow.h \
    adaptor.h \
    gstreamer.h

FORMS    += mainwindow.ui
LIBS        += -L. -L/usr/lib -lcurl -ltag -fopenmp -lboost_filesystem -lboost_system
CONFIG      += no_keywords # so Qt won't #define any non-all-caps `keywords'
INCLUDEPATH += . /usr/include/boost/

unix:!macx:!symbian: LIBS += -lboost_signals 
```

现在我应该使用大写的 QT 宏，但是对于发射信号，“发射信号名”和“Q_EMIT 信号名”都不起作用。在这种情况下我应该如何发出信号？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T10:58:09.773

不需要使用宏 emit 或 Q_EMIT 发射信号。Qt 中的信号只是类的方法，因此您只需像其他方法一样调用它们。emit 和 Q_EMIT 仅用于视觉指示此特定方法是 Qt 信号

# hosting - AppHarbor 中的并发环境

> ID：11187545
> 
> 赞同：2
> 
> 时间：2012-06-25T10:26:35.773
> 
> 标签：hosting, appharbor

如何在 AppHarbor 上托管单个应用程序的并发环境？

我们目前正在开发中，所以一个单一的 DEBUG 环境就足够了，构建从开发分支触发。

很快我们将需要一个 PROD 环境，由 master 分支的更改触发（或者手动）。

我如何配置 AppHarbor以使单个应用程序在任何给定时间都可以访问 DEBUG 和 PROD 环境**？**

使用主机名，例如：

*   [http://debug-myapp.apphb.com](http://debug-myapp.apphb.com)
*   [http://prod-myapp.apphb.com](http://prod-myapp.apphb.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:05:16.510

现在您必须创建两个应用程序，一个用于调试环境，一个用于生产环境。您还可以为每个应用程序设置跟踪分支。这是我们描述如何管理环境的[链接。](http://support.appharbor.com/kb/getting-started/managing-environments)

# java - 是否可以在 RMI 中通过引用传递？

> ID：11187548
> 
> 赞同：10
> 
> 时间：2012-06-25T10:26:40.250
> 
> 标签：java, rmi

我已经阅读了有关使用 RMI 传递变量的各种文章。

他们中的一些人说在 RMI 中不可能通过引用传递变量。例如：[这个](https://stackoverflow.com/questions/3591162/pass-by-reference-problem-in-rmi)和[这个](https://stackoverflow.com/questions/9486419/why-java-rmi-cant-get-return-value-by-reference)

而其他人则说这是可能的。例如： [这个](https://stackoverflow.com/questions/7368879/passing-object-reference-using-rmi)，[这个](https://stackoverflow.com/questions/3087756/rmi-pass-by-value-or-by-reference)和[这个](https://stackoverflow.com/questions/85085/pass-by-reference-not-returning-in-rmi-for-arraylist)

任何人都可以解决这个问题吗？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:28:54.023

**重要提示：**如果*通过引用传递*意味着修改方法内部的参数值并更改调用者中的原始变量，则不能。如果您想要做的是传递对对象的引用的*副本*，以允许该方法与您的某个对象交互......是的，您可以。答案探讨了第二种选择。

**是的。但它必须是一个 RMI 对象。**在这种情况下，RMI 存根将通过副本传递。

RMI 以两种方式传递参数和返回值：

1.  复制整个对象
2.  发送一个*远程*引用（如果它是一个引用，它必须是远程的！）。

**样本**

猜猜我们有一个服务。它是一个 RMI 对象，通过 RMI 注册表发布，因此客户端可以访问它。客户端可以调用它的方法（创建一些东西）并且服务想要返回对那个新创建的对象的引用。不是序列化副本，而是对服务器内存空间中创建的对象的引用。

```
import java.rmi.Remote;
import java.rmi.RemoteException;

// normally published object
public interface MyService extends Remote
{
    // creates something and return a "handle" to it
    public MyHandle createX(SomeSerializableObj param1) throws RemoteException;
}

// interface for object that the service will return a reference to...
public interface MyHandle extends Remote
{
    void doOne();
    void doTwo();
} 
```

在此示例中，您可以：

*创建 MyService 的实现并发布它*

```
Registry registry = LocateRegistry.createRegistry(port);
MyService stub = (MyService) UnicastRemoteObject.exportObject(server, 0);
registry.bind("myService", stub);` 
```

*然后，一些 RMI 客户端可以获得对它的引用*

```
Registry registry = LocateRegistry.getRegistry(server, port);
MyService serv1 = (MyService) registry.lookup("myService"); 
```

*并且通过对服务对象的引用可以获得对其他 RMI 对象的引用。*

```
MyHandle handle1 = serv1.createX(...);
handle1.doOne() 
```

在这个例子中，方法参数是序列化的（它应该是一个 Serializable 类），而返回的对象是对在服务器中创建的对象的 RMI 引用。

createX(...) 的实现可能是：

```
public MyHandle createX(...) {
   MyHandle handle = new MyHandleImpl(); // create an implementation
   createdHandlers.add(handle); // add it to some structure (just a sample)
   return handle; // return the implementation. RMI will send to client a RMI reference to this very instance
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T23:12:22.650

您的参考资料：

(1) 表示 RMI 不支持通过引用传递。我同意。

(2) 表示 RMI 不支持 in-out 参数。我同意。

(3) 只是展示了按引用传递和按值传递引用之间的常见混淆。RMI 是后者，就像 Java 的其余部分一样。

(4) 错误。

(5) 完全不连贯。RMI 中没有传递引用。

RMI 的远程“按值引用”在语义上与 Java 的本地“按值引用”本质上没有什么不同，除了其他可能的故障模式。

您阅读的意思是，对于非远程引用，RMI 对象参数和结果是通过对象序列化按*值*传递的，而不是通过 Java 的按值引用的参数传递方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T01:18:11.207

真正意义上的不，你不能。

当您通过“引用”传递某些内容时，您真正在做的是将指针传递给内存中的某个位置。当调用者和被调用者是同一个进程时，这非常有效，它们可以访问完全相同的堆。但是将内存引用从计算机 A 传递给计算机 B 是没有意义的，A 无法访问 B 的内存*。

然而，RMI 允许您获得对远程对象的“引用”，但这并不完全相同，并且必须提前请求，将您的对象之一传递给服务器将导致副本。

直接从马嘴里（http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138781.html#3）

> RMI 使用标准的 Java 对象序列化机制来传递对象。引用远程对象的参数作为远程引用传递。如果方法的参数是原始类型或本地（非远程）对象，则将深层副本传递给服务器。返回值的处理方式相同，但方向相反。RMI 允许您传递和返回本地对象和对远程对象的引用的完整对象图。

您可以通过引用传递远程对象，但不能将本地对象作为引用传递回服务器。

*从技术上讲，您可以在一些大型分布式共享内存系统中，但我怀疑这就是 OP 所说的。

# osgi - OSGi 捆绑包和战争

> ID：11187551
> 
> 赞同：3
> 
> 时间：2012-06-25T10:26:54.223
> 
> 标签：osgi, war, wab

是否有可能有标准的战争部署，它可以部署在 tomcat 上，也可以构建为 OSGi 包并与 OSGi 容器 tomcat 中的其他包一起部署（我认为是 virgo）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:54:58.203

是的，WAR 和 WAB 之间有很多互操作性。[Apache Aries](http://aries.apache.org/)和[WebSphere Application Server](http://www.ibm.com/developerworks/websphere/techjournal/1007_robinson/1007_robinson.html)将在部署时将 WAR 转换为 WAB。这是启动和运行的好方法，但[最好使用适当的 WAB](http://www.ibm.com/developerworks/websphere/techjournal/1007_charters/1007_charters.html#sec10)，您自己在其中构建 OSGi 元数据。[额外的 OSGi 标头](http://www.javabeat.net/articles/print.php?article_id=378)不会干扰在普通 Tomcat 容器中的部署，因此 WAB 具有最大的灵活性。

对于您的构建，您有多种选择。例如，可以将 maven 捆绑插件[配置为构建 WAB](http://coding.alasdair.info/2011/01/creating-web-application-bundle-using.html)，或者您可以使用 Eclipse PDE 对 OSGi 元数据的工具支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:31:49.060

[Pax-Url-War](http://team.ops4j.org/wiki/display/paxurl/War+Protocol)为 Apache Karaf 等容器提供了此功能。简而言之，这允许您导入类似 war:file:///path/to/myapp.war 的 URL，Pax 会将其包装为 OSGi 包，可选择动态更改 URL 根和其他参数。

# php - 如何定义检索到的 html 页面的编码（xpath）

> ID：11187553
> 
> 赞同：0
> 
> 时间：2012-06-25T10:27:02.150
> 
> 标签：php, html, xpath, character-encoding, domdocument

检索网页时（不是我自己的）。XPath 返回奇怪的字符。使用时

```
iconv("UTF-8","ISO-8859-1",$xpath_results->item(0)->nodeValue) 
```

都很好。但是，每次都必须这样做并不是很整洁。返回的 html 如下所示：

> 第 26 周 Huiswerkklas hele 周 aanvang 13.30 uur Dinsdag 26 六月 Vergadering feetcommissie 10.00 uur Lok.9

如何在加载网页时设置正确的编码，而不是每次导出时都这样做。

在寻找类似问题时，我尝试了以下方法：

```
$uitval_document->loadHTML('<?xml encoding="UTF-8">'.file_get_contents(BASE_URL_uitval68.$value->getAttribute('href'))); 
```

这当然不起作用，因为它是 HTML 而不是我正在检索的 XML。在 HTML 中，编码将放在 head 标签中。因此可以加载 HTML 并将其添加到 headtag，并使用正确的编码重新加载它。但这不是很有效而且很老套。你们知道更好的解决方案吗？

# java - 将 ArrayList 转换为 Object 数组

> ID：11187556
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:27:08.700
> 
> 标签：java, data-structures

我有一个 TicketBooking 类型的列表，我将其设置为 responseObject。当我尝试获取列表并转换回 TicketBooking 类型时，它正在抛出`ClassCastException`。这是我的代码

```
 List<TicketBooking> bookingDetailList = new ArrayList<TicketBooking>();
    bookingDetailList.add(booking);
    if(Utils.isNotNull(oldBooking)) 
        bookingDetailList.add(oldBooking);
    respObj.setObject(bookingDetailList); 
```

从这个方法我返回respObj。

在调用方法中

```
 List bookingList = new ArrayList();
    bookingList.add(Arrays.asList(respObj.getObject()));
    booking = (TicketBooking) bookingList.get(0); 
```

投掷`ClassCastException`

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:34:58.713

```
Arrays.asList(respObj.getObject()) 
```

这个表达式是返回一个List对象，当然会抛出ClassCasException

你应该

```
List list =  Arrays.asList(respObj.getObject());
for(Object obj in list){
      bookingList.add(obj);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:35:06.227

替换[`add()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28E%29)为[`addAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#addAll%28java.util.Collection%29)

```
List bookingList = new ArrayList();
bookingList.addAll(Arrays.asList(respObj.getObject())); 
```

如果您使用 add 它会将其视为实例（属于 type `List`），因此第一个元素将属于`List` 您然后尝试转换为的类型`TicketBooking`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:35:08.223

```
List bookingList = new ArrayList();
bookingList.add(Arrays.asList(respObj.getObject()));//error is here
booking = (TicketBooking) bookingList.get(0); 
```

我认为在 bookingList 你添加了一个完整的 List 而不是一个 TicketBooking 对象。你期待一个 TicketBooking 对象。

**您应该按如下方式修改您的代码。**

```
ArrayList<TicketBooking> bookingList= new ArrayList<TicketBooking>();
bookingList.addAll((ArrayList<TicketBooking>)respObj.getObject()); //Add all to add whole list
booking =  bookingList.get(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:30:27.460

您需要在调用方法时创建一个 TicketBooking 列表。

你的代码

```
 List bookingList = new ArrayList();
 bookingList.add(Arrays.asList(respObj.getObject()));
 booking = (TicketBooking) bookingList.get(0); 
```

应该替换为

```
 List<TicketBooking> bookingList= new ArrayList<TicketBooking>();
 List list =  Arrays.asList(respObj.getObject());
 for(Object obj in list ){
    bookingList.add(obj);
    booking = bookingList.get(0);
 } 
```

或以下将做同样的事情

```
 List bookingList = new ArrayList();
bookingList.addAll(Arrays.asList(respObj.getObject()));
booking = (TicketBooking) bookingList.get(0); 
```

# android - Galaxy Nexus Capture 图像而不开始预览？

> ID：11187562
> 
> 赞同：1
> 
> 时间：2012-06-25T10:27:27.977
> 
> 标签：android, camera, preview

我没有 Galaxy Nexus，也无法购买。因此，我想知道是否有人知道专门针对 Galaxy Nexus 的这个问题的答案。

```
SurfaceView sf = new SurfaceView(this);
camera.setPreviewDisplay(sf.getHolder);
camera.startPreview() 
```

使用此代码，我可以在不显示相机预览的情况下拍照。但是，此代码不适用于 Galaxy Nexus。即使我`SurfaceView`改成`SurfaceTexture`.

知道如何在 Galaxy Nexus 上做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T10:52:09.717

您不能为此设备使用虚拟 SurfaceView。在文档中，它指定在开始预览之前应提供 SurfaceView（有效的表面视图），我也尝试过，它几乎可以在除 Galaxy Nexus 之外的所有设备上运行

# silverlight - 将 UserControl 保存为 JPG - 结果被“压扁”

> ID：11187565
> 
> 赞同：0
> 
> 时间：2012-06-25T10:27:39.090
> 
> 标签：silverlight, windows-phone-7

我在将 UserControl 保存为 JPG 时遇到了一个奇怪的问题。基本上我想做的是创建一个动态磁贴，我可以使用后台代理（以及从应用程序本身内部）更新它。

我已经按照[这篇博](http://blogs.microsoft.co.il/blogs/pavely/archive/2011/09/30/dynamic-live-tiles-in-windows-phone-7.aspx)文中的步骤进行了操作，这些步骤在我创建磁贴时非常有用；我有一个自定义的用户控件，上面有一些文本块，它作为 JPG 保存到独立存储中，正如帖子所说。

创建图块没有问题 - UserControl 被很好地呈现，因为它应该是。但是，当我尝试更新磁贴时（使用完全相同的方法 - 将新控件保存为 JPG，然后使用该 JPG 作为 BackgroundImage），事情就崩溃了。

放置在图块上（并保存在独立存储中）的结果图像如下所示：[压扁图块](http://i.imgur.com/RSxsA.jpg)（使用独立存储资源管理器工具从独立存储中拉出）

背景是黑色的，所有文字都沿着图像的一侧向下延伸（并相互重叠）——预期的结果是背景是手机的强调色，而文字在顶部附近水平显示。

用于生成和保存图像的代码在两个实例中完全相同——我已将其抽象为一个静态方法，该方法返回`StandardTileData`. 唯一的区别是从哪里调用它：在创建磁贴的工作情况下，它是从主应用程序中的页面调用的；在非工作情况下（更新磁贴），它是从只能通过磁贴本身的深层链接访问的页面调用的。

有什么想法吗？我猜想将控件渲染为 JPG 时出了点问题，因为实际图像是以这种方式出现的。

生成图像的代码片段在这里：

```
StandardTileData tileData = new StandardTileData();

// Create the Control that we'll render into an image.
TileImage image = new TileImage(textA, textB);
image.Measure(new Size(173, 173));
image.Arrange(new Rect(0, 0, 173, 173));

// Render and save it as a JPG.
WriteableBitmap bitmap = new WriteableBitmap(173, 173);
bitmap.Render(image, null);
bitmap.Invalidate();

IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication();
String imageFileName = "/Shared/ShellContent/tile" + locName + ".jpg";

using (IsolatedStorageFileStream stream = storage.CreateFile(imageFileName))
{
    bitmap.SaveJpeg(stream, 173, 173, 0, 100);
}

tileData.BackgroundImage = new Uri("isostore:" + imageFileName, UriKind.Absolute);

return tileData; 
```

我要转换的控件的 XAML 在这里：

```
<UserControl x:Class="Fourcast.TileImage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="173" d:DesignWidth="173" FontStretch="Normal" Height="173" Width="173">

    <Border Background="{StaticResource PhoneAccentBrush}">
        <StackPanel>
            <TextBlock  HorizontalAlignment="Stretch"
              TextWrapping="Wrap" VerticalAlignment="Stretch" Style="{StaticResource PhoneTextLargeStyle}" x:Name="Temperature"></TextBlock>
            <TextBlock x:Name="Condition" HorizontalAlignment="Stretch"
              TextWrapping="Wrap" VerticalAlignment="Stretch" Style="{StaticResource PhoneTextNormalStyle}">
            </TextBlock>
        </StackPanel>
    </Border>
</UserControl> 
```

**更新**：在使用调试器进行一些调查之后，当从更新磁贴的类调用该方法时，似乎调用`Measure`并且`Arrange`似乎没有做任何事情。但是，在创建磁贴时，这些调用按预期运行（控件的 ActualWidth 和 ActualHeight 更改为 173）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:03:27.393

不确定这里到底发生了什么，但这是我最终为解决该问题所做的工作。

我从尝试渲染控件切换到`StackPanel`在代码中定义一个，向其中添加元素，然后将其渲染为图像。然而，奇怪的是，`Arrange`and`Measure`方法*不会做任何事情，除非另一个元素已将它们应用于它*并被`UpdateLayout`调用。

完整的结果代码（减去`TextBlock`s 的内容并写入图像）如下。

```
StandardTileData tileData = new 

// None of this actually does anything, but for some reason the StackPanel
// won't render properly without it.
Border image = new Border();
image.Measure(new Size(173, 173));
image.Arrange(new Rect(0, 0, 173, 173));
image.UpdateLayout();
// End of function-less code.

StackPanel stpContent = new StackPanel();      

TextBlock txbTemperature = new TextBlock();
txbTemperature.Text = temperature;
txbTemperature.Style = (Style)Application.Current.Resources["PhoneTextLargeStyle"];
stpContent.Children.Add(txbTemperature);

TextBlock txbCondition = new TextBlock();
txbCondition.Text = condition;
txbCondition.Style = (Style)Application.Current.Resources["PhoneTextNormalStyle"];
stpContent.Children.Add(txbCondition);

stpContent.Measure(new Size(173, 173));
stpContent.Arrange(new Rect(0, 0, 173, 173)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:39:08.043

让图像背景使用手机的强调色的方法是使其透明。这将要求您保存 PNG 而不是 JPG。

输出图像看起来像所有东西都比它需要的更多。您可能需要调整控件中包含的元素的宽度。如果没有 XAML，很难更具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T12:43:14.030

我也得到了这种奇怪的行为 - 压扁的瓷砖（使用 Ree7 Tile 工具包），

尝试在 Dispatcher 中调用 update tile：

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    CustomTile tile = GetTile(card);
    StandardTileData tileData = tile.GetShellTileData();
    shellTile.Update(tileData);
}); 
```

为我工作

# javascript - 我可以使用 document.querySelectorAll() 而不是 document.getElementsByClassName() 在 IE8 中正常工作吗？

> ID：11187567
> 
> 赞同：0
> 
> 时间：2012-06-25T10:27:43.917
> 
> 标签：javascript

```
<html>
<head></head>
<body>
<div class="abcd"></div>
<script>
var y = document.getElementsByClassName('abcd');
var x = document.querySelectorAll("abcd");
alert(y[0].hasChildNodes());
alert(x[0].hasChildNodes());
</script>
</body>
</html> 
```

在上面的代码中，第一个警报给出错误，但在警报二中没有。我如何获得与 document.querySelectorAll 相同的结果？基本上我希望它在 IE8 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:29:23.553

是的，如果您使用正确的[css 选择器（v2.1）](http://www.w3.org/TR/CSS2/selector.html)：`var x = document.querySelectorAll(".abcd");`

另请参阅[此页面](http://kimblim.dk/css-tests/selectors/)以了解 css 选择器的浏览器支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:29:23.293

`document.querySelectorAll()`使用与 CSS 相同的选择器来寻址元素。`"abcd"`因此，您应该去那里`".abcd"`（注意添加的），而不是使用as 参数`.`。

```
<script>
var y = document.getElementsByClassName('abcd');
var x = document.querySelectorAll(".abcd");
alert(y[0].hasChildNodes());
alert(x[0].hasChildNodes());
</script> 
```

# windows - 使用 PyDev-Eclipse 和 CDT-Eclipse 创建 Windows 可执行文件 (*.exe) --- 如何？

> ID：11187568
> 
> 赞同：2
> 
> 时间：2012-06-25T10:27:44.827
> 
> 标签：windows, eclipse, pydev, eclipse-cdt

是否可以在 Eclipse 工作台中为 Python 和 C/C++ 代码创建 Windows 可执行文件？如果是，那么如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:34:03.160

这就是我在 Windows 中从 Eclipse 创建 .exe 文件的方式。不在 Eclipse 工作台内，但它可能会对您有所帮助。为避免出现问题，即使您使用 64 位计算机，我也建议您下载 32 位的所有内容。

安装[python 2.6](http://www.python.org/download/releases/2.6/)

安装[Eclipse](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1)

安装[py2exe](http://www.py2exe.org/)

在 Eclipse 中，转到帮助 > 安装新软件并从[http://pydev.org/updates/安装 pydev 插件](http://pydev.org/updates/)

在 Windows 首选项中，将 python 解释器指向计算机中 python.exe 的位置 (C:/Python26)

您可能需要将 py2exe 添加到库中

创建一个名为 setup.py 的 python 模块，其代码与此类似：

```
from distutils.core import setup
import py2exe

setup(windows=['H:/yourworkspace/YourPythonProject/src/yourprogram.py']) 
```

打开 Windows 控制台并输入 python H:/yourworkspace/YourPythonProject/src/setup.py py2exe

这将创建一个位于 C:/Python26/dist 文件夹中的 .exe。如果你双击它应该可以工作，但是你不能把它带到没有 python 或你使用过的任何库的计算机上。为此，您可以使用[Inno Setup](http://www.jrsoftware.org/isdl.php)。

它非常易于使用，基本上它会询问您要添加的 .exe、dll 和文件夹的位置（我不知道，所以我在 C:/Python26/dist 中添加了大部分内容它有效）。Inno setup 将创建一个脚本并生成一个可以安装在任何计算机上的 .exe。您可能需要[编辑脚本的 [Icons] 部分](https://stackoverflow.com/questions/7485355/custom-desktop-icon-with-inno-setup)，在向应用程序添加图标之前我遇到了问题。

这应该有希望工作，

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:59:00.030

除了法比奥的回答：

就 C/C++ 而言，如果你在 Windows 上编译它，eclipse 会自动创建 yourprog.exe 文件以便执行（如果你的 main 函数是用 C/C++ 编写的）。在项目的 bin 文件夹中查找可执行文件。

在编译器方面：我使用 Cygwin。它模拟Linux环境。它包含（虽然不是默认情况下）g++ 编译器，由于 cygwin，该编译器将其编译为可以在 Windows 中启动的二进制文件（即 .exe 文件）。我不确定 Linux 二进制文件是随后转换为 Windows 二进制文件还是直接为 Windows 编译，但我知道如果你运行这个 .exe 文件，它就可以单独工作。

如果您在安装 Cygwin 时需要帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:29:22.393

当您在问题中混合 Python/C++ 时，不确定我是否理解您的要求...

如果您想在某个库中嵌入 Python，请使用 Google 搜索“在 C++ 中嵌入 Python”

如果你只是想打包 Python 来运行带有扩展模块的 Python 代码，搜索 py2exe 或 cx-Freeze（我个人更喜欢 cx-Freeze）。

我不认为这与 PyDev/Eclipse 相关（这应该与 IDE 无关）。

# jquery - Validate.unobtrusive 和验证 jQuery 库

> ID：11187571
> 
> 赞同：4
> 
> 时间：2012-06-25T10:28:05.797
> 
> 标签：jquery, asp.net-mvc-3

我正在构建一个 MVC 3 应用程序，它使用标准模型验证属性进行基本客户端和服务器验证。然而，我也有一个位于标题中的表单，并使用 jQuery 验证插件来执行客户端验证。

当我将不显眼的库添加到项目中时，使用验证插件的标题表单无法运行并继续发布。当不包含不显眼的库时，标头验证正常，但模型验证停止。

知道我做错了什么吗？

**编辑**

基本上我在标题中有一个登录表单。我还有一个登录页面，也允许登录。登录页面与模型相关联，但标题中的表单不是，它只是 html。两种形式都通过 jQuery .ajax 调用相同的控制器/动作。

我失去了使用 .ajax 方法的能力，因为我包含了不显眼的库，所以它似乎没有被调用。

我得到了您包含的代码来工作，但是在验证完成后我仍然无法发布或执行操作。

我的标题形式是：

```
<form id="frmHeaderLogin" action="">
<table id="LoginBox" title="Login">
    <tr>
        <td>UserName</td>
        <td><input type="text" id="Username" name="Username" /></td>
    </tr>
    <tr>
        <td>Password</td>
        <td><input type="password" id="Password" name="Password" /></td>
    </tr>
    <tr>
    <td colspan="2"><input type="submit" value="Login" id="btnHeaderLogin" name="btnHeaderLogin" /></td>
    </tr>
</table>
</form> 
```

我有一个提交按钮的单击事件，它将验证客户端输入，然后在创建 JSON 对象作为数据参数后将其提交给服务器。服务器的响应也是一个 JSON 对象。此表单位于布局文件中，因为它将出现在每一页上。

主登录页面/视图有一个简单的表单，如下所示：

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post, new { id = "MainLoginForm" }))
{
<div>
    <fieldset>
       <p style="color:Red;font-size:medium">@ViewData["Message"]</p>
        <legend>Login</legend>
        <div class="editor-label">
        @Html.LabelFor(m => m.UserName, "EmailId")
        </div>
        <div class="editor-field">
        @Html.TextBoxFor(m => m.UserName)
        @Html.ValidationMessageFor(m => m.UserName)
        </div>
        <div class="editor-label">
        @Html.LabelFor(m => m.Password, "Password")  
        </div>
        <div class="editor-field">         
        @Html.PasswordFor(m => m.Password)
        @Html.ValidationMessageFor(m => m.Password)
        </div>
        <p>
        <input type="submit" id="btnMainLogin" value="Login" />
        </p>
     </fieldset>
</div>
} 
```

这也有一个 jQuery click 事件，它触发 .ajax 方法并将 JSON 对象发布到服务器，如上所述。两个实例都返回一个 JSON 对象。

我想此时的问题可能是，我可以对布局文件中的标题登录使用相同的模型，从而允许我使用客户端和服务器验证吗？

以下是我在验证通过后使用的 submitHandler 的示例（使用 jquery.validate）

```
 $("#formname").validate( {
     // .....
         // .....
         submitHandler: function () {
            var JSONData = new Object();
            $(':text, :password', $("table[id$='LoginBox']")).each(function () {
                JSONData[$(this).attr("id")] = $(this).val();
            });

            $.ajax({
                type: "POST",
                url: "/Controller/Action",
                data: "{'Login': '" + JSON.stringify(JSONData) + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    var response = $.parseJSON(result);
                    alert("Header Login Success!");
                },
                error: function (xhr, status, error) {
                    alert(xhr.statusText + " - ReadyState:" + xhr.readyState + "\n" + "Status: " + xhr.status);
                }
            });
         }
    )}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:38:31.913

如果您想将 Microsoft 不显眼的验证脚本与您在同一页面中编写的自定义 jquery 验证规则混合使用，则需要将 jquery 验证规则添加到现有的表单元素。举个例子：

```
public class MyViewModel
{
    [Required]
    public string Foo { get; set; }

    public string Bar { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

看法：

```
@model MyViewModel

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $('#Bar').rules('add', {
            required: true,
            messages: {
                required: 'Bar is required'
            }
        });
    });
</script>

@using (Html.BeginForm())
{
    <div>
        @Html.EditorFor(x => x.Foo)
        @Html.ValidationMessageFor(x => x.Foo)
    </div>

    <div>
        @Html.EditorFor(x => x.Bar)
        @Html.ValidationMessageFor(x => x.Bar)
    </div>

    <button type="submit">OK</button>
} 
```

请注意 Foo 字段上的 Required 属性如何使它成为必需的，我们已经为 Bar 字段定义了一个自定义的 jquery 验证规则。

这是提交表单并且 2 个字段留空时的结果：

![在此处输入图像描述](../Images/b31a9d89f266df42c8de3837f17781e3.png)

您当然可以在任何字段上定义任意数量的自定义规则。

# ios - iOS 上的 Http 请求

> ID：11187574
> 
> 赞同：0
> 
> 时间：2012-06-25T10:28:28.313
> 
> 标签：ios, http, request

所以我正在尝试使用 ASIHTTPRequest 类发出一个 http 请求，将一个 json 文件发送到我的服务器。我得到了一个功能强大的 android 代码，并被要求将其转换为 iOS 代码。我不明白如何在我的请求中添加标头。android 代码如下所示：

```
private static final String CONTENT_TYPE = "Content-Type";
private static final String JSON_CONTENT_TYPE = "application/json; charset=utf-8"; 
```

进而 ：

```
request.addHeader(CONTENT_TYPE, JSON_CONTENT_TYPE); 
```

在 iOS 上，我发现代码是这样的：

```
[request addRequestHeader:@"Content-Type" value:@"Content-Type"];
[request addRequestHeader:@"Json-Content-Type" value:@"application/json; charset=utf-8"]; 
```

但是我有点困惑，因为在 android 上请求似乎是配对的，而在 iOS 上 requestHeaders 是单独声明的。这是一个问题吗？他们是否也应该在 iOS 上配对。我在这里错过了什么吗？感谢您阅读我的帖子 :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:31:36.897

你想要的是

```
[request addRequestHeader:@"Content-Type" value:@"application/json; charset=utf-8"]; 
```

在 android 示例中，他们只是为标头值声明了两个变量，他们可以简单地执行类似的操作

```
request.addHeader("Content-Type", "application/json; charset=utf-8"); 
```

这会产生相同的效果，所以你只需要我上面提到的一行。

另外：`ASIHTTPREQUEST`不再开发[（请参阅此处的标题）](http://allseeing-i.com/ASIHTTPRequest/)，因此请考虑使用另一个库来进行类似的操作，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)

# objective-c - 如何在 MPMoviePlayerController 中打开 Youtube 视频并播放

> ID：11187577
> 
> 赞同：3
> 
> 时间：2012-06-25T10:28:32.993
> 
> 标签：objective-c, ios4, mpmovieplayercontroller

我在 1 次之前使用过这种方法。但现在我无法从该 URL 获取直接在 MPMoviePlayerController 中播放 YouTube 视频的视频。

网址 = [http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded](http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded)

```
- (void)viewDidLoad
{

   player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.youtube.com/watch?v=JPUWNcGDyvM&feature=player_embedded"]]];

[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

//---play movie---
[player prepareToPlay];
[player pause];

player.view.frame = CGRectMake(0, 0, 320, 367);

[self.view addSubview:player.view];   

[super viewDidLoad]; 
```

}

和我`movieFinishedCallback`的一样在...

```
- (void) movieFinishedCallback:(NSNotification*) aNotification 
{ 
 player = [aNotification object];
[[NSNotificationCenter defaultCenter]
 removeObserver:self
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:31:21.417

创建自定义 uiwebview：请按照说明进行操作

**1）创建一个名为“YouTubeView.h”的界面.h文件**

```
#import <UIKit/UIKit.h>

@interface YouTubeView : UIWebView 
{
}

- (YouTubeView *)initWithStringAsURL:(NSString *)urlString frame:(CGRect)frame  mimeSubType:(NSString *)mimeType;

@end 
```

**2）在.m文件中**

```
 #import "YouTubeView.h"

@implementation YouTubeView

- (YouTubeView *)initWithStringAsURL:(NSString *)urlString frame:(CGRect)frame mimeSubType:(NSString *)mimeType
    {
    NSString *strMimeType;

    if([mimeType length]>0)
    {
        strMimeType = mimeType;
    }

    else
    {
        strMimeType =@"x-shockwave-flash"; //@"x-shockwave-mp4";
    }

    if (self = [super init]) 
    {
    // Create webview with requested frame size
        self = [[UIWebView alloc] initWithFrame:frame];

    // HTML to embed YouTube video

        NSString *youTubeVideoHTML = @"<html><head>\
        <body style=\"margin:0\">\
        <embed id=\"yt\" src=\"%@\" type=\"application/%@\" \
        width=\"%0.0f\" height=\"%0.0f\"></embed>\
        </body></html>";

        // Populate HTML with the URL and requested frame size
        NSString *html = [NSString stringWithFormat:youTubeVideoHTML, urlString,strMimeType, frame.size.width, frame.size.height];

        // Load the html into the webview
        [self loadHTMLString:html baseURL:nil];
    }

    return self;  

    }

   - (void)dealloc 
    {
    [super dealloc];
    }

    @end 
```

**3) 将 youtubeview 文件导入到要播放管视频的控制器中，并像下面的代码一样创建 uiview**

```
YouTubeView *videoVw = [[YouTubeView alloc] initWithStringAsURL:[NSString 

stringWithFormat:@"%@",strNormalVdoURL] frame:CGRectMake(0,0,320,480) mimeSubType:@"x-shockwave-

flash"];

  [self.view addSubview:videoVw];
    [videoVw release];
      videoVw = nil; 
```

注意：视频将仅在设备中播放，因此请签入设备

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:43:20.763

如果可能的话，打开你的`URL`进入`UIWebview`然后在你的课堂上点击一个按钮并将其重定向到 `WebsiteViewController`课堂上可能对你有帮助

WebsiteViewController.h ///----

```
 @interface WebsiteViewController : UIViewController <UIWebViewDelegate>
 {
  IBOutlet UIWebView *webView;
 }

 @property(nonatomic,retain) IBOutlet UIWebView *webView; 
```

WebsiteViewController.m ///---

```
-(void)viewDidLoad {
 NSURLRequest *request = [[NSURLRequest alloc] initWithURL:@"url"];
 [self.webView setScalesPageToFit:YES];
 [self.webView loadRequest:request];
 [request release]; 
} 
```

# antlr - 基于yacc/bison/ANTLR语法生成随机但仍然有效的表达式

> ID：11187581
> 
> 赞同：6
> 
> 时间：2012-06-25T10:28:45.783
> 
> 标签：antlr, bison, yacc

是否可以？有什么可用的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:13:19.997

您可以使用任何可以访问基本语法的系统来执行此操作。ANTLR 和 YACC 将您的语法编译掉，因此您不再拥有它们。在 ANTLR 的例子中，语法已经变成了代码；你不会把它拿回来的。在 YACC 的例子中，你最终得到了包含语法本质的解析器表；如果您对它们的理解足够好，可以执行我在下面描述的操作，那么您可以遍历这些解析表。

遍历一组明确表示的语法规则并随机选择扩展/派生很容易。根据定义，这将为您提供有效的语法。

它不会为您提供有效的*代码*。这里的问题是大多数语言确实具有上下文相关的语法。除非以符合其声明和范围规则的方式使用声明的标识符，否则大多数程序都是无效的。后者需要完整的语义检查。

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)用于解析任意语言的代码 [使用语法]，构建 AST，让您分析和转换这些树，最后漂亮地打印有效（句法）文本。DMS 提供对语法规则的直接访问和树构建工具，因此生成随机语法树（和漂亮打印）非常容易。使用 DMS 也很难确保它们在语义上有效。但是，许多 DMS 的前端可以采用（随机）树并进行语义检查，因此至少您会知道该树在语义上是否有效。

如果它说“不”，你该怎么做仍然是一个问题。也许您可以生成标识符名称，以保证至少不会不一致的使用，但我怀疑这将取决于语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:07:30.567

yacc 和 bison 将你的语法变成一个有限状态机。您应该能够随机遍历状态机以找到有效输入。

基本上，在每个状态下，您都可以将一个新令牌转移到堆栈上并移动到一个新状态，或者根据一组有效的减少来减少堆栈中的顶部令牌。（有关其工作原理的详细信息，请参阅[Bison 手册](http://www.gnu.org/software/bison/manual/bison.html#Understanding)）。

您的随机生成器将遍历状态机，在每个状态下进行随机但有效的移位或减少。一旦你到达终端状态，你就有一个有效的输入。

对于状态的人类可读描述，您可以使用`-v`or`--report=state`选项来野牛。

恐怕我无法为您指出任何可以做到这一点的现有工具。

# javascript - Javascript沙盒模式示例实现

> ID：11187582
> 
> 赞同：16
> 
> 时间：2012-06-25T10:28:46.767
> 
> 标签：javascript, design-patterns, sandbox

在 Stoyan Stefanov 的巨著“JavaScript 模式”的第 101 页上，他解释了沙盒模式。我非常喜欢他的书，但我真的在这里错过了一些现实生活中的例子，以便更好地理解他所说的内容。 [就像沙盒模式！](http://books.google.de/books?id=WTZqecc9olUC&lpg=PP1&hl=de&pg=PA101#v=onepage&q&f=false)

我正在寻找一个现实生活中的工作实现，比如复制和粘贴起点，只是一个简单的例子，可以完全理解它。

有没有？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T20:35:34.027

我已经简化了 Stoyan 的示例，以便更容易理解正在发生的事情。我也对它进行了更彻底的评论。

```
/*First define the modules of the sandbox.  These will be defined 
as properties on the constructor function because this is a 
convenient place to keep them.*/

Sandbox.modules = {};

Sandbox.modules.returnNumbers = function(MYAPP) {
    MYAPP.return100 = function() {return 100;};
};

Sandbox.modules.returnLetters = function(MYAPP) {
    MYAPP.returnABC = function() {return "ABC";};
};

function Sandbox() {

    /* Because Sandbox is a constructor, an new object is automatically 
    created.  Because we're in the constructor, we refer to this new object 
    as 'this'. 

    A constructor would typically be used as part of an assignment, e.g. 
    myObject = new Sandbox().  

    However, it's also legitimate javascript to use a constructor without 
    the assignment by just writing new Sandbox() with no assignment.  The 
    constructor does return an object, it's just that it doesn't get 
    assigned to anything so  is discarded.

    We're going to add functionality (methods) to the 'this' object, but 
    rather than returning it, we will pass it to the callback function, so 
    the methods can be used immediately.
    */

    var args = Array.prototype.slice.call(arguments);  //Put the arguments 
    //of the call to the Sandbox constructor in an array called args.

    var callback = args.pop(); //The last argument is the callback
    var requiredmodules = args;  //The remaining arguments are the require
    // modules

    //For each of the modules in 'requiredmodules', add the module's 
    //methods to 'this'
    for (i=0; i< requiredmodules.length; i++) {
        Sandbox.modules[requiredmodules[i]](this);
    }

    //'this' now has methods returnNumbers and returnLetters

    //Call the callback.  In the example below, 'this' will be called 
    //MYAPP, which within the callback will have all the methods from 
    //the required modules.

    callback(this);

}

//Finally here is an example of usage

new Sandbox('returnNumbers', 'returnLetters', function (MYAPP) {

    console.log(MYAPP.return100());
    console.log(MYAPP.returnABC());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T18:37:57.803

Stoyan Stefanov 在同一章中提到[YUI 版本 3 实现了沙盒模式](http://yuilibrary.com/yui/docs/yui/)。[YUI add 方法](http://yuilibrary.com/yui/docs/yui/#yuiadd) [（API）](http://yuilibrary.com/yui/docs/api/classes/YUI.html#method_add)注册模块，[use 方法](http://yuilibrary.com/yui/docs/yui/#loading-modules) [（API）](http://yuilibrary.com/yui/docs/api/classes/YUI.html#method_add)加载沙箱实例中指定的模块。API 文档中有指向源 js 文件的链接。几乎所有的 YUI 代码[示例](http://yuilibrary.com/yui/docs/examples/)都使用这种模式来处理 YUI 库。很少需要定义模块 - YUI 有许多核心模块，并且有一个社区添加的自定义模块[页面](http://yuilibrary.com/gallery/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T16:04:20.100

所以我尝试并提出了这个解决方案：

```
function Sandbox() {
    // turning arguments into an array
    var args = Array.prototype.slice.call(arguments),
            // the last argument is the callback
            callback = args.pop(),
            // modules can be passed as an array or as individual parameters
            modules = (args[0] && "string" === typeof args[0]) ? args : args[0],
            i;

    // make sure the function is called
    // as a constructor
    if (!(this instanceof Sandbox)) {
        return new Sandbox(modules, callback);
    }

    // add properties to 'this' as needed:
    this.a = 1;
    this.b = 2;

    // now add modules to the core 'this' object
    // no modules or "*" both mean "use all modules"
    if (!modules || '*' === modules) {
        modules = [];
        for (i in Sandbox.modules) {
            if (Sandbox.modules.hasOwnProperty(i)) {
                modules.push(i);
            }
        }
    }

    // initialize the required modules
    for (i = 0; i < modules.length; i += 1) {
        Sandbox.modules[modules[i]](this);
    }

    // call the callback
    callback(this);

    // any prototype properties as needed
    Sandbox.prototype = {
        name: "Sandbox",
        version: "1.0",
        getName: function() {
            return this.name;
        }
    }
};

Sandbox.modules = {};

Sandbox.modules.color = function (box) {
    // private
    var initialColor = $('#main').css('color');    

    // set a red color
    box.setMainRed = function() {
        $('#main').css('color','red');
        return false;
    },

    // get the current color
    box.getInitialColor = function () {
        return initialColor;
    };
}

// another module
Sandbox.modules.style = function (box) {
    // set a red color
    box.setStyle = function() {
        $('#main').css('font-style','italic');
        return false;
    };
}

// page ready
$.ready(
    Sandbox(['color', 'style'], function (box) {
        console.log(box);
        box.setMainRed();
        box.setStyle();
        console.log('try access initialColor: ', box.initialColor);
        console.log('get initial color: ', box.getInitialColor());
    })
); 
```

但我真的不确定这是否是我应该做的。特别是添加“模块”有点令人困惑。同样在本书的前面，他使用命名空间模式来完成这项任务，但不是在这里。为什么？你也不能在这里做吗？但我未能将这两种模式结合起来。

受本书启发的命名空间模式示例：

```
var APP = APP || {};

// namespace function
APP.namespace = function (nsString) {
    var parts = nsString.split('.'),
            parent = APP,
            i;

    // strip redundant leading global
    if ("APP" === parts[0]) {
        parts = parts.slice(1);
    }

    for (i = 0; i < parts.length; i += 1) {
        // create a property if it doesn't exist
        if ("undefined" === typeof parent[parts[i]]) {
            parent[parts[i]] = {};
        }
        parent = parent[parts[i]];
    }
    return parent;
}

// constructors
APP.namespace('modules.Color');

// immediate function
APP.modules.Color = (function () {
    var currentColor = $('#main').css('color'),    
    // set a red color
    setMainRed = function() {
        $('#main').css('color','red');
        return false;
    },
    // get the current color
    getCurrentColor = function () {
        return currentColor;
    };

    // revealing module pattern
    return {
        setMainRed: setMainRed,
        getCurrentColor: getCurrentColor
    };
}());

var doSomething = function () {
    var color = APP.modules.Color;

    color.setMainRed();
    console.log(color.currentColor);
    console.log(color.getCurrentColor());

    return false;
}

// page ready
$.ready(
    doSomething()
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-28T18:59:23.063

这是带有详细注释的示例：

```
 (function(){ 

/* function constructor */
function Sandbox(){
    //Change arguments to array, as you know 'arguments' are not a true JS array
    //Array.prototype.slice will provide shallow copy of 'arguments'
    var args = Array.prototype.slice.call(arguments),
        //remove last element from array and return it to caller
        //our last argument is callback
        callback = args.pop(), 
        //We can pass modules as strings or as array
        //if first element is a string, take all arguemnts
        //otherwise take one element (array)
        modules = (args[0] && typeof args[0] === "string") ? args : args[0],
        modulesLength = modules.length,
        i;

    //handle calling function constructor without 'new' keyword
    if(!(this instanceof Sandbox)){
        //Invoke me again!
        return new Sandbox(modules, callback);
    }

    //we can add properties to 'this'
    this.someProp = "Initialized property";

    //Initialize all required modules
    for(i = 0; i < modulesLength ; i++){
        //pass reference to 'this' for each required module and invoke it
        //'this' is poiting to new object which was created 
        //after calling new Sandbox()
        Sandbox.modules[modules[i]](this);
    }

    //Invoke callback and pass 'this'
    //now 'this' cotains all methods and properties
    //attached in modules functions
    callback(this);
};

//We can optionally create Sandbox methods
Sandbox.prototype = {
    version: "1.0.1",
    createdAt: new Date()
};

/* function as a first class object - saving all modules*/
Sandbox.modules = {}; 

/*Create $http,$scope and $ajax modules */
/*We need box object to add new functionality*/
/*We are creating new methods by attatching them to box obect*/
/*box is a reference to 'this' called as initializator from function constructor*/
Sandbox.modules.$http = function(box){

    box.get = function(){
        console.log("$http.get");
    };

    box.post = function(){
        console.log("$http.post");
    };

    box.prop = "I'm $http property";
};

Sandbox.modules.$scope = function(box){

    box.inject = function(param1, param2){
        console.log("$scope.inject: " + param1 + " " + param2);
    };

    box.destroy = function(o){
        console.log("$scope.destroy: " + o + " has been destroyed!");
    };

};

Sandbox.modules.$ajax = function(box){ 
    box.call = function(){
        console.log("$ajax.call");
    };     
};

//Sandbox without calling 'new' was handled in function constructor
//We are requesting for 2 modules: $scope and $http
//callback function is our new playground
//box object has $scope and $http methods and properties inside, we are ready to go!
Sandbox(["$scope", '$http'], function(box){ 
    console.log(box); //contains methods from $scope and $http
    console.log(box.inject("John", "Doe"));
    console.log(box.post());

    //we can event nest our playgrounds
    Sandbox(["$ajax"], function(box){
        console.log(box); //contains only $ajax methods and properties
        console.log(box.call());

        //we can't invoke $scope or $http functions here
    });

    //we can't invoke $ajax functions here
});
})(); 
```

链接到 JSFiddle：http: [//jsfiddle.net/Lodse4hj/](http://jsfiddle.net/Lodse4hj/)

# php - 数字格式化函数值（货币）

> ID：11187588
> 
> 赞同：1
> 
> 时间：2012-06-25T10:29:06.173
> 
> 标签：php, wordpress, formatting, currency

我正在使用高级自定义字段 wordpress 插件，并且正在输出以下字段之一的值： `the_field('Price');`它给出了一个数字。

我想将此数字格式化为带逗号的英镑。

我在输出它时遇到了一些问题。这似乎与首先输出的函数值或数字格式函数有关。

```
$money = the_field('Price');
echo  '&pound;' . number_format($money,0, '.', ''); 
```

这不起作用并输出例如`300000£0`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:40:40.540

看起来`the_field()`没有返回任何东西，而是回声。

您可以编写自己的自定义函数：

```
function my_the_field($field, $post_id = false) {
    $value = get_field($field_name, $post_id);
    if (is_array($value)) {
        $value = @implode(', ', $value);
    }
    return $value;
} 
```

并用它代替`the_field()`

`ob_start()`或使用and捕获输出`ob_get_clean()`并将其传递给`number_format()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:57:18.973

感谢您的出色回答：

第二个选项有效：

ob_start();

```
 the_field('Price');

        $out = ob_get_clean();
        $out = strtolower($out);

       echo '&pound;' .  number_format($out);

       // var_dump($out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T11:52:17.453

@Andrew Welch 您的解决方案有效，但该功能已存在于 ACF（高级自定义字段）中

```
if (get_field('Price')){
 the_field('Price');
} 
```

# php - 在一定时间后获取动态时间和超时

> ID：11187598
> 
> 赞同：0
> 
> 时间：2012-06-25T10:29:26.747
> 
> 标签：php, javascript, mysql, html

我正在实施一个在线考试门户，以便用户可以开始模拟测试（考试）并为每个问题选择答案并继续下一个问题。考试规则是在 75 分钟内完成 100 道题。所以我需要我的后端代码来检查每一位时间并跟踪 current_time 是否不超过 Exam_Start_time 的 75 分钟

这怎么可能。

我暂时这样做了 $Start_time $Current_time 然后检查每个页面刷新的差异并在超过 75 分钟限制时重定向

但我认为这不是更好的方法，如果我们可以动态跟踪它并在 75 分钟标记到达过程时重定向考试结果，那就太好了。

任何人都可以在这种情况下帮助我吗，如果 PHP、HTML 无法使用 Javascript 来实现这一点，有没有办法

希望收到您的来信......谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:33:56.027

在您的数据库中存储时间和每个用户的一些唯一 ID。当用户进行测试时，以一定的时间间隔（即每分钟）向具有用户唯一 ID 的服务器发送 ajax 请求，如果没有将他重定向到另一个页面或使用 javascript 阻止旧页面，则检查是否一切正常。但是考虑到安全性，一些用户可以猜测并发送另一个人的 id :)

如果用户禁用 javascript，还有另一种情况。服务器关闭一段时间未更新的测试。还有关于本地时间和javascript，您不必将用户时间发送到服务器，因为您在数据库中有开始时间。

@trejder 和 @Wiz 如果你认为最好不要使用 javascript，因为它可以被关闭并且请求变量可以被用户伪造。

# android - 如何在 Android 和 Windows 之间本地同步文件夹

> ID：11187603
> 
> 赞同：0
> 
> 时间：2012-06-25T10:29:52.560
> 
> 标签：android, windows, synchronization, directory, share

我的问题很简单，但我没有找到详细的答案。我正在开发一个需要从 Windows 目录中获取文件的应用程序。我尝试了我在互联网上找到的所有东西，但这似乎是不可能的。我不想通过网络服务，因为我需要的是：

*   打开我的应用程序（检查）
*   单击按钮打开 ListView（检查）
*   使用从我的电脑获取的信息填充此视图（非检查）
*   从列表中下载一个文件（非勾选）
*   打开文件（检查我何时将其保存在我的 SD 卡上）

问题是，用户在 Windows 上没有访问权限，因此他无法发送这些文件（PC 上正在运行一个软件，禁用 Windows 上的用户访问权限，并且该软件将数据保存在一个目录中，即需要得到），但我，开发人员，我可以在操作系统上安装东西。

如果有人找到任何简单的方法来使用 Windows 目录中的文件刷新 Android 目录，那将非常有用。此外，我不是唯一一个寻找这个的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:42:44.890

PC：FTP服务器

android：一个FTP客户端

当您在应用程序上打开文件时。应用程序应通过 FTP 从 PC 下载文件或上传...

# javascript - 如何以这种形式获取日期？

> ID：11187608
> 
> 赞同：2
> 
> 时间：2012-06-25T10:30:06.687
> 
> 标签：javascript

我需要以这种形式获取日期：

```
"12/31/2020 5:00 AM" 
```

我写了这段代码：

```
var ExpireI = new Date ();
ExpireI.setTime(ExpireI.getTime() + (24 * 3600 * 1000));
alert(ExpireI.toGMTString()); 
```

但它显示如下：

```
Tue, 26 Jun 2012 10:26:35 GMT 
```

那么，我怎样才能以这种形式获得日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:46:02.980

这应该工作，

```
var d = new Date ();
var date = d.getDate();
var month = d.getMonth() + 1;  // because january is 0 in javascript
var year = d.getFullYear();
var hour = d.getHours();
var min = d.getMinutes();
var m;
if(hour > 12 ){
  hour-=12;  
  m = 'PM';
}
else{
 m = 'AM';
}

console.log(month + '/' + date + '/' + year + ' ' + hour + ':' + min + ' ' + m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:31:49.697

## 尝试这个

而不是这样做：

```
getDate()     // Returns the date
getMonth()    // Returns the month
getFullYear() // Returns the year 
```

对于您的情况，您可以使用这种方式：

```
alert(ExpireI.getFullYear() + "-" + ExpireI.getMonth() + "-" + ExpireI.getDate()); 
```

[在这里摆弄](http://jsfiddle.net/EHQrf/20/)... :)

# iis-7.5 - 404 不为非 aspx 页面附加 aspxerrorpath

> ID：11187609
> 
> 赞同：1
> 
> 时间：2012-06-25T10:30:09.743
> 
> 标签：iis-7.5, http-status-code-404, elmah

我正在使用 ELMAH 记录错误，它适用于带有 aspx 的页面，即 eroordfs.aspx

但是当它具有非 aspx 扩展名或没有扩展名时，我的错误页面加载时 url 中没有 aspxerrorpath，我认为这就是 elmah 没有记录错误的原因。

我正在使用 iis7.5

我的 web.config 详细信息如下：

```
<httpErrors errorMode="Custom">
            <remove statusCode="500" subStatusCode="-1" />
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" subStatusCode="-1" prefixLanguageFilePath="" path="/404.aspx" responseMode="ExecuteURL" />
            <error statusCode="500" subStatusCode="-1" prefixLanguageFilePath="" path="/500.aspx" responseMode="ExecuteURL" />
        </httpErrors> 
```

和

```
<customErrors mode="On">
      <error statusCode="404" redirect="~/404.aspx" />
      <error statusCode="500" redirect="~/500.aspx" />
    </customErrors> 
```

提前感谢您提供的任何建议

# java - 如何使用休眠注释验证负值？

> ID：11187610
> 
> 赞同：0
> 
> 时间：2012-06-25T10:30:14.597
> 
> 标签：java, oracle, hibernate

我有一张包含库存的表格。它是遗留数据库，库存保存在列中。数据库对列有一个约束，说明它们不能是负值。但是我只在事务提交后才得到约束违规。

```
15:21:31,154  WARN JDBCExceptionReporter:77 - SQL Error: 2290, SQLState: 23000
15:21:31,154 ERROR JDBCExceptionReporter:78 - ORA-02290: check constraint (ERPDSS13.STKMAST_CON_QTY13) violated
ORA-06512: at "ERPDSS13.INLTRAN_UPD_STKMAST", line 25
ORA-04088: error during execution of trigger 'ERPDSS13.INLTRAN_UPD_STKMAST' 
```

有没有一种方法可以使用注释来指定一列不能为负数。下面是列映射？

```
@Column(name = "STKSOHQTY01", precision = 12)
public BigDecimal getStksohqty01() {
    return this.stksohqty01;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:34:06.937

```
@Check(constraints = "STKSOHQTY01 >= 0")  
public class Coupon implements  Serializable {

} 
```

它应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:46:13.800

从 3.5 版开始，Hibernate 支持标准[bean 验证（JSR303）](http://www.hibernate.org/subprojects/validator.html)。您可以并且应该使用它们来验证您的实体，因为 API 快速、集成良好，更重要的是*标准化*：

```
@Min(value = 0)
@Column(name = "STKSOHQTY01", precision = 12)
public BigDecimal getStksohqty01() {
    return this.stksohqty01;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:33:43.777

尝试`@Check`

```
@Check(constraints = "STKSOHQTY01t >= 0")

public class YourEntity implements  Serializable {...} 
```

# asp.net - 在开始下载之前更新页面？

> ID：11187611
> 
> 赞同：0
> 
> 时间：2012-06-25T10:30:19.107
> 
> 标签：asp.net

我有一个页面，允许用户输入搜索条件，然后显示匹配的记录。它还有一个下载按钮，使用户能够下载匹配的记录。

我如何对其进行编码，以便在下载数据之前单击“下载”将首先刷新记录显示？

这是我用于下载的代码：

```
Response.ClearContent();
Response.ClearHeaders();

using (MemoryStream outputStream = new MemoryStream())
{
    // some details elided...
    outputStream.Write(documentData, 0, documentData.Count());

    string fileName = GenerateFileName();

    Response.AppendHeader("content-disposition", String.Format("attachment; filename={0}", fileName));
    outputStream.Flush();
    outputStream.WriteTo(Response.OutputStream);
}
Response.Flush();
Response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:44:34.850

您只能将一个响应发送回浏览器，然后更新数据，然后发送新标头以开始下载。

要使它们都成为可能，您可能需要使用一些 javascript 和/或 ajax 调用来更改您的步骤。

HTTP 协议的工作原理：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:50:23.470

构造一个 javascript 方法，首先通过 AJAX 更新页面，然后继续发出非 AJAX 请求以下载文件。正如 Aristos 所说，这不能在一个请求中完成。一种不同的解决方案可能是先下载文件（非 ajax），然后在没有 ajax 的情况下刷新页面。通常，在发出新的非 ajax 请求后，javascript 代码无法正确执行，但如果它只下载文件，我认为代码可能会继续执行以发布下一个请求。

# c# - 有没有办法找到 ac# 程序集引用了哪些类型？

> ID：11187615
> 
> 赞同：2
> 
> 时间：2012-06-25T10:30:44.127
> 
> 标签：c#, .net-assembly, system.reflection

Assembly 类有一个返回引用程序集的 GetReferencedAssemblies 方法。有没有办法找到引用了哪些类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:41:26.303

CLR 无法在运行时告诉您。您必须对源文件进行一些严肃的静态分析 - 类似于 resharper 或 Visual Studio 所做的静态分析。

静态分析是一项相当重要的工作。您基本上需要 ac# 解析器、符号表和大量时间来处理抽象语法树中出现的所有情况。

为什么 CLR 不能在运行时告诉你？它是及时编译的，这意味着 CLR 字节码在执行之前被转换为机器码。反射只告诉你在运行时静态知道的关于你的类型的东西，CLR 只会知道在代码运行时是否引用了一个类型。CLR 只知道在执行时加载类型的时间 - 在即时编译时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:34:19.033

使用[System.Reflection.Assembly.GetTypes()](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:35:58.853

类型不与程序集分开引用。如果一个程序集引用另一个程序集，它也会自动引用（至少在技术上下文中）该程序集内的所有类型。为了获取程序集中*定义*（未引用）的所有类型，可以使用[Assembly.GetTypes](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)方法。

可能有可能，但听起来像是一项相当艰巨的任务，扫描程序集它引用的实际类型（即它实际调用或以其他方式提及的类型）。这可能涉及使用 IL。最好避免这样的事情。

**编辑：** *实际上，当我想到它时，这根本不可能。任何。在相当基本的层面上。问题是，类型可以随意实例化和引用。这种情况甚至并不少见。更不用说后期绑定了。所有这一切都意味着尝试分析它引用的所有类型的程序集就像预测未来一样。*

**编辑 2：评论**

虽然如前所述，由于各种动态引用，这个问题*是不可能的，但使用**[差异编码](http://en.wikipedia.org/wiki/Delta_encoding#References)*可以大大缩小各种二进制文件。这基本上允许您获取包含两个二进制文件之间差异的文件，在可执行文件/库的情况下，它往往比任何一个实际文件都要小得多。以下是一些执行此操作的应用程序。请注意，bsdiff 不在 Windows 上运行，但那里有一个端口链接，您可以在 Google 的帮助下找到更多端口（包括到 .NET）。

*   [XDelta](http://xdelta.org/)
*   [bsdiff](http://www.daemonology.net/bsdiff/)

如果你仔细看，你会发现更多这样的应用程序。最好的部分之一是，它们是完全独立的，您需要做的工作很少。

# php - 用于将 csv 导入 db 表的工具/脚本

> ID：11187618
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:01.553
> 
> 标签：php, csv

在尝试使用 phpMyAdmin 将 csv 导入到表中时，我遇到了权限错误，所以我正在寻找我可以使用的任何可用的 php 脚本。

有哪些脚本可用？可以指向任何免费的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:49:38.417

```
fgetcsv is the php function you should use. 
```

有关详细信息[，请参见此处](http://php.net/manual/en/function.fgetcsv.php)。

示例代码在这里..

```
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
    echo "<p> $num fields in line $row: <br /></p>\n";
    $row++;
    for ($c=0; $c < $num; $c++) {
        // write insert query here
        echo $data[$c] . "<br />\n";
    }
  }
  fclose($handle);
 } 
```

谢谢。

# kernel - 如何：从微过滤驱动程序调用 exe？

> ID：11187620
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:07.687
> 
> 标签：kernel, driver, minifilter

我想从内核模式驱动程序调用一个带有 2 个参数的 exe，并在驱动程序中取回布尔值（0 或 1）结果。

怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:49:35.353

kernel mode - user mode communication are maintained in another way. Basically in minifilters you must use this framework for communication - FltCreateCommunicationPort/FltSendMessage/etc read this materials [http://download.microsoft.com/download/e/b/a/eba1050f-a31d-436b-9281-92cdfeae4b45/filterdriverdeveloperguide.doc](http://download.microsoft.com/download/e/b/a/eba1050f-a31d-436b-9281-92cdfeae4b45/filterdriverdeveloperguide.doc) (chapter about communication)

and

[http://download.microsoft.com/download/f/0/5/f05a42ce-575b-4c60-82d6-208d3754b2d6/messagesupport.ppt](http://download.microsoft.com/download/f/0/5/f05a42ce-575b-4c60-82d6-208d3754b2d6/messagesupport.ppt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:51:15.830

您不能真正从微过滤器或任何其他内核驱动程序启动用户模式进程。您可能需要重新考虑您的设计。

这个线程可以帮助你：[如何创建一个将在 Windows 内核级别运行的进程？](https://stackoverflow.com/questions/4921753/how-to-create-a-process-which-will-run-in-kernel-level-in-windows)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:02:51.030

据我所知，只有用户模式进程通常会启动进程。我只能想到 Windows 内核在没有用户态进程帮助的情况下真正完全从内核态启动一个进程的时候，那就是它在早期启动时启动 SMSS，但是 SMSS 在这方面必须被认为是特殊的上下文，因为它不在任何特定子系统的上下文中运行。一旦 CSRSS 运行，所有进程都在用户模式进程的协作下启动。从内核模式启动一个进程会绕过用户模式下的 win32 和 CSRSS，这使得该进程不太可能做任何有用的事情。即使可以做到，因为它不是内核自己做的事情不止一次，它似乎不太容易做到或记录在案。

# php - PHP 上的假 IMAP

> ID：11187621
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:12.070
> 
> 标签：php, imap

我用 PHP 开发了一个通信系统。如果用户可以通过 IMAP 使用邮件软件访问系统，那就太棒了。有没有机会实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:34:29.883

IMAP 是一种基于文本的开放协议。只需实现[这些](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/package-summary.html) [方法](https://developers.google.com/google-apps/gmail/imap_extensions)。

# android - 如何在 Android 中获取当前运行上下文？

> ID：11187622
> 
> 赞同：7
> 
> 时间：2012-06-25T10:31:14.310
> 
> 标签：android

我正在尝试在 android 中获取当前运行上下文，我尝试使用：

```
<application android:name="com.xyz.MyApplication">

</application>

public class MyApplication extends Application
{
    private static Context context;

    public void onCreate()
    {
        super.onCreate();
        MyApplication.context = getApplicationContext();
    }

    public static Context getAppContext() 
    {
        return MyApplication.context;
    }
} 
```

当我尝试使用`MyApplication.getAppContext()`时，它给了我错误

> AndroidRuntime(14421): android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T10:42:04.947

这对我有用：

```
public class MyApplication extends Application {

private static Context mContext;

@Override
public void onCreate() {
    super.onCreate();
    mContext = getApplicationContext();
}
public static Context getContext() {
    return mContext;
}
} 
```

您只需要调用`MyApplication.getContext()`应用程序的任何部分。

我假设应用程序 XML 标记位于 manifest.xml

```
<application
    android:name=".MyApplication"
    android:icon="@drawable/icon"
    android:label="@string/app_name" > 
```

您不需要创建 Application 类的任何实例，它将在您启动应用程序时创建，然后再创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:42:18.037

如果你想获取 Application 类的实例，你可以使用它，

```
MyApplication Obj = ((MyApplication )getApplicationContext()); 
```

如果上下文那么`getApplicationContext()`本身就足够了。

# windows-phone-7 - 同时播放两个音频流

> ID：11187624
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:20.140
> 
> 标签：windows-phone-7, audio-streaming, windows-phone

我将编写一个应用程序，它将同时从 HTTP 流服务器播放两个音频流。在开始之前，我想确定 Windows Phone 设备和 API 是否支持这一点。

我想我将不得不使用两个 MediaElement 实例。有什么想法或建议吗？

编辑：我使用以下代码进行了尝试，当我在第一个播放时开始第二个时，第一个停止并播放第二个：

```
 private void StopMedia1(object sender, RoutedEventArgs e) 
    { 
        media1.Stop(); 
    } 

    private void PauseMedia1(object sender, RoutedEventArgs e) 
    { 
        media1.Pause(); 
    } 

    private void PlayMedia1(object sender, RoutedEventArgs e) 
    { 
        media1.Play(); 
    } 

    private void StopMedia2(object sender, RoutedEventArgs e) 
    { 
        media2.Stop(); 
    } 

    private void PauseMedia2(object sender, RoutedEventArgs e) 
    { 
        media2.Pause(); 
    } 

    private void PlayMedia2(object sender, RoutedEventArgs e) 
    { 
        media2.Play(); 
    } 

<Grid> 
    <Grid.ColumnDefinitions> 
        <ColumnDefinition Width="*" /> 
        <ColumnDefinition Width="*" /> 
        <ColumnDefinition Width="*"/> 
    </Grid.ColumnDefinitions> 
    <Grid.RowDefinitions> 
        <RowDefinition Height="*" /> 
        <RowDefinition Height="Auto" /> 
    </Grid.RowDefinitions> 
    <MediaElement x:Name="media1" Source="1.mp3" Margin="0,151,0,359" /> 
    <MediaElement x:Name="media2" Source="2.mp3" Margin="0,154,3,359" Grid.Column="2" /> 
    <!-- Stops media playback.--> 
    <Button Click="StopMedia1" Content="Stop" Margin="6,449,24,244" /> 
    <!-- Pauses media playback. --> 
    <Button Click="PauseMedia1" Content="Pause" Margin="0,538,24,143" /> 
    <!-- Begins media playback. --> 
    <Button Click="PlayMedia1" Content="Play" Margin="0,649,0,47" /> 
    <Button Click="PauseMedia2" Content="Pause" Grid.ColumnSpan="2" Margin="154,524,6,169" Grid.Column="1" /> 
    <Button Click="PlayMedia2" Content="Play" Grid.Column="2" Margin="0,612,12,59" /> 
    <Button Click="StopMedia2" Content="Stop" Margin="18,429,12,264" Grid.Column="2" /> 
</Grid> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:41:45.003

不，在 Windows Phone 7/7.5 中不能同时播放两个 MediaElement。为此，您需要使用 XNA 的[SoundEffect](http://msdn.microsoft.com/en-us/library/dd282429)类，尽管我认为它不支持流式传输。

# django - ajax响应数据量大，响应不一致

> ID：11187625
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:20.660
> 
> 标签：django, jquery

我有一个 ajax 调用`$(document).ready function`来获取大量数据并显示在页面上。它返回大约 160KB 的数据，大约需要 6 秒。大多数情况下它运行良好，但有时错误函数返回错误号`403`，`200`或者`404`它不返回数据。我真的不知道有什么问题。这是我的ajax代码：

```
jQuery(document).ready(function(){
        URL='{% url CompanyHub.views.getServices %}';
        jQuery.ajax({
            url:URL,
            type:'POST',
            context: this,
            beforeSend:function(xmlHttpRequest){
                jQuery('#container').append('<img src="/static/loading.gif" id="loading" />');
            },
            complete:function(){
                jQuery('#loading').remove();
            },
            success:function(data){
                jQuery('#loading').remove();
                jQuery('#carousel').html(data);
            },
            error:function(jqXHR, textStatus, errorThrown){
                alert(jqXHR.status);
            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:46:16.970

您应该首先确保服务器端一切正常，即 404（未找到）和 403（禁止）表明您发布到错误的 url。如果您使用 django 开发服务器，您可以在终端中看到响应代码。如果您在那里看到 403 和 404，请调试您的服务器端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:44:30.553

我没有表单元素，在将 csrf_token 作为数据发送到 post 选项后，问题就解决了：

```
data:{csrfmiddlewaretoken: '{{ csrf_token }}'} 
```

# python - 如何刷新 Pyramid 中 Beaker 缓存中的所有区域？

> ID：11187626
> 
> 赞同：10
> 
> 时间：2012-06-25T10:31:26.017
> 
> 标签：python, pyramid, beaker

我正在尝试在使用 Pyramid 构建的 Web 服务器上设置缓存。我正在使用[pyramid_beaker](http://docs.pylonsproject.org/projects/pyramid_beaker/en/latest/index.html)，它创建了一个后端以使用[Beaker](http://beaker.readthedocs.org/en/latest/index.html)进行缓存。

我一直在使用缓存区域装饰器来实现缓存。

示例缓存区域如下所示：

```
def getThis(request):
    def invalidate_data(getData,'long_term',search_term):
         region_invalidate(getData,'long_term',search_term)
    @cached_region('long_term')
    def getData(search_term):
         return response
    try:
         request.matchdict['refresh']
    except:
         pass
    search_term = request.matchdict['searchterm']
    return getData(search_term) 
```

现在缓存工作正常并且我可以在每个区域上触发缓存刷新，我想知道如何刷新所有区域？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:56:42.537

Beaker 有一个包含所有 CacheManager 的 dict 对象，可用于迭代以清除每个对象：

```
from beaker.cache import cache_managers
for _cache in cache_managers.values():
    _cache.clear() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:17:24.853

如果您要保存到文件，您可能只是删除包含所有缓存的文件夹。这可能不是最好的解决方案，但它应该非常快速和有效。

# java - Java jsr310：日期和时间之间的差异

> ID：11187639
> 
> 赞同：2
> 
> 时间：2012-06-25T10:31:50.663
> 
> 标签：java, datetime, date, jsr310

有大量的 SO 问题涉及在 Java 中计算两个日期或两次之间的差异。许多答案指出了核心Java Date 类的问题，并建议使用Jodatime，但是AFAIK，没有人建议如何使用jsr310 来做到这一点。

那么，jsr310中是否有计算两个日期或两次时间差的方法呢？

* * *

作为参考，以下问题处理此问题：

在核心 Java 中：

*   [两个日期时间之间的毫秒数](https://stackoverflow.com/questions/1970239/in-java-how-do-i-get-the-difference-in-seconds-between-2-dates)

在Jodatime：

*   [两个日期之间的天数](https://stackoverflow.com/questions/3299972/difference-in-days-between-two-dates-in-java)
*   [两个日期时间之间的间隔](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T14:35:49.677

回答 wrt 到最终的 JDK1.8 版本。

有两个数量类 -`Duration`和`Period`。Duration 是基于时间的（纳米），Period 是基于日期的（年/月/日）。

两个相同类型的时间对象之间的时间量可以通过以下两种方式之一轻松计算（我更喜欢第一种）：

```
long days = ChronoUnit.DAYS.between(start, end);
long days = start.until(end, ChronoUnit.DAYS); 
```

相同类型的`Duration`两个时间对象之间的计算如下：

```
Duration d = Duration.between(start, end); 
```

`Period`两个对象之间的距离`LocalDate`可以计算如下：

```
Period p = Period.between(start, end); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:31:51.910

如何做到这一点取决于正在使用的日期或日期时间类。

如果您是实时操作（即使用时区等，因此可以将日期时间精确定位到`Instant`时间线上的确切位置），您可以使用`Duration`类（[javadoc](http://threeten.sourceforge.net/apidocs/javax/time/Duration.html)） - 例如

```
Duration diff = Duration.between(InstantProvider startInc, InstantProvider endInc); 
```

InstantProvider 能够在哪里

或者，如果您在假设的时间（即没有时区等）操作，您可以使用`Period`类（[javadoc](http://threeten.sourceforge.net/apidocs/javax/time/calendar/Period.html)）来获取两个实例之间的差异`LocalDate`- 例如

```
// diff in days, months and years:
Period diff = Period.between(LocalDate start, LocalDate end);

// diff in days:
Period diff = Period.daysBetween(LocalDate start, LocalDate end); 
```

但是，我不知道有任何方便的方法可以获取两个 LocalDateTimes 或 LocalTimes 之间的差异。但是...这可以使用 Period 来完成，如下所示：

```
// diff between LocalDateTimes:
public static Period between(LocalDateTime start, LocalDateTime end){
  return Period.of(
    end.getYear()-start.getYear(), 
    end.getMonthOfYear().getValue()-start.getMonthOfYear().getValue(), 
    end.getDayOfMonth()-start.getDayOfMonth(),
    end.getHourOfDay()-start.getHourOfDay(),
    end.getMinuteOfHour()-start.getMinuteOfHour(),
    end.getSecondOfMinute()-start.getSecondOfMinute(),
    end.getNanoOfSecond()-start.getNanoOfSecond()
  );
}

// diff between LocalTimes:
public static Period between(LocalTime start, LocalTime end){
  return Period.of(0, 0, 0,
    end.getHourOfDay()-start.getHourOfDay(),
    end.getMinuteOfHour()-start.getMinuteOfHour(),
    end.getSecondOfMinute()-start.getSecondOfMinute(),
    end.getNanoOfSecond()-start.getNanoOfSecond()
  );
} 
```

# c# - 使用 Open XML Office SDK 从从 WordDocument 检索的字符串中删除样式

> ID：11187642
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:53.073
> 
> 标签：c#, regex, string, search, ms-word

我正在使用 Open XML Office SDK 2.0 在 word 文档中搜索字符串并列出这些字符串。

```
 MatchCollection Matches;
    using (WordprocessingDocument wordDoc = WordprocessingDocument.Open(txtLocation.Text, true))
    {
        string docText = null;
        using (StreamReader sr = new StreamReader(wordDoc.MainDocumentPart.GetStream()))
        {
            docText = sr.ReadToEnd();
        }
        Regex regex = new   Regex(@"\(.*?\)");
        Matches = regex.Matches(docText);
    }
    int i = 0;
    while (i < Matches.Count)
    {    Label lb = new Label();
         lb.Text = Matches[i].ToString();
         lb.Location = new System.Drawing.Point(24, (28 + i * 24));
         this.panel1.Controls.Add(lb);
         i++;
     } 
```

问题是有时它返回正确的字符串，例如： (HelloWorld) 但有时它与标签完全不同，例如： < w:rFonts w:ascii="Arial" w:hAnsi="Arial" w:cs="Arial "/ >

我该如何摆脱这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:06:41.993

据推测，所有格式标记都是 XML 样式（在尖括号之间）。`String.StartsWith`在这种情况下，您可以使用and`String.EndsWith`方法判断字符串是否为 XML 标记：

```
// ...
while (i < Matches.Count)
{
     String str = Matches[i].ToString();
     if (!(str.StartsWith("<") && str.EndsWith(">"))) {
         // ...
     }
     i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:00:20.163

找出我必须做的，将字符串运行到​​另一个 Regex.Replace。这个替换了所有 <> 标签（所以 XML/HTML）

```
String str = Matches[i].ToString();
str = Regex.Replace(str, @"<(.|\n)*?>", "");
lb.Text  = str; 
```

# android - Android中使用JQuery的PageTurn效果

> ID：11187643
> 
> 赞同：0
> 
> 时间：2012-06-25T10:31:59.230
> 
> 标签：android, jquery, animation, page-flipping

在这里，我在 Android 中使用图像开发了一个故事书应用程序，在这里我的问题是我想在 Android 中的 ImageView 上使用 jQuery 翻页效果。

或使用任何看起来像原始页面翻转或翻转的动画。

请给出一些想法和建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:45:11.697

下载这个项目并参考代码，这是一个很好的例子：-

[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:58:34.120

好的，所以有一个名为[Turnjs](http://turnjs.com/)的插件，它为开发人员花钱，但似乎更成熟，还有一个名为[FlipPage](http://marcbuils.blogspot.co.il/2011/09/flippage-tournez-les-pages-sur-votre.html)的插件，它是 LGPL v3（但该网站不是英文的）。翻页网站上的演示看起来很不错，所以我会说这是一个很好的起点。

# php - SoapClient 不发送证书

> ID：11187646
> 
> 赞同：3
> 
> 时间：2012-06-25T10:32:12.277
> 
> 标签：php, soap, ssl, curl

我一直在阅读我能找到的所有问题/答案，但没有一个能解决我的问题..

这是使用 cURL 和证书（$pem = .pem 文件的绝对路径）到相同 url 的连接

```
 $ch = curl_init($wsdl); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 1);
    curl_setopt($ch, CURLOPT_SSLCERT, $pem);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    $response = curl_exec($ch); 
```

下面是我尝试通过 SOAP 连接到 wsdl 的代码

```
$client  = new SoapClient($wsdl, array('local_cert' => $pem)); 
```

甚至尝试在“local_cert”中加载证书的内容

```
$client  = new SoapClient($wsdl, array('local_cert' => file_get_contents($pem))); 
```

在这两行肥皂代码中，我从服务器收到一个错误，说我没有被授权......

在发送证书之前我需要启用某些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T09:49:18.733

您可能需要传递一些用户名和密码，试试这个：

```
curl –k –u user:password –d @myRequestFile.xml uri 
```

# components - 如何在一行中按宽度均匀分布组件？

> ID：11187649
> 
> 赞同：2
> 
> 时间：2012-06-25T10:32:31.060
> 
> 标签：components, titanium, tableview, appcelerator, distribute

我正在使用 Appcelerator Titanium 并想制作一个 Android 应用程序。我创建了一个有 4 行的 TableView。我想在每行中放置 3 个标签，并且我希望我的标签均匀分布。（第一个标签必须在左边，第二个在中间，第三个在右边。）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:18:41.570

对于左、中、右，您可以使用相对定位和文本对齐来非常简单地制作行。无论当前屏幕有多宽（即，这适用于平板电脑、手机、电视等），这种方法都能很好地工作。

```
var win = Ti.UI.createWindow({
    backgroundColor: '#fff'
});

var rows = [];

for (var i = 0; i < 10; i++) {
    var row = Ti.UI.createTableViewRow();
    row.add(Ti.UI.createLabel({
        text: 'Left ' + i, textAlign: 'left',
        color: '#000',
        left: 10
    }));
    row.add(Ti.UI.createLabel({
        text: 'Center ' + i, textAlign: 'center',
        color: '#000'
    }));
    row.add(Ti.UI.createLabel({
        text: 'Right ' + i, textAlign: 'right',
        color: '#000',
        right: 10
    }));
    rows.push(row);
}

win.add(Ti.UI.createTableView({
    data: rows
}));

win.open(); 
```

另一种选择是使用百分比宽度，例如`left: '0%', width: '33%'`, then`left: '33%', width: '33%'`等。

或者你可以说第一个标签是 from `left: 0, width: 200`。第二个是`left: 200, width: 50`，第三个是从`left: 250, right: 0`。这将为您提供第三个弹性标签，因此它可以占用所有空间。

另一种选择（我不建议您采用）是`Ti.Platform.displayCaps.platformWidth`基于此使用和定位行元素。但这对于方向变化来说是非常脆弱的。

这完全取决于您的内容。有了这些，您应该能够处理您的特定用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:33:58.447

这是我最近解决这个问题的方法。每行内有 3 个单独的视图和标签。这对我来说效果很好！所有这些都基于百分比，因此它应该适用于所有分辨率。祝你好运！

```
for (var i = 0; i < 4; i++) {
var row = Ti.UI.createTableViewRow({
  height: 'auto',
});
  var view1 = Ti.UI.createView({
  left : 0,
  width : "33.33%",
  backgroundColor:'red',
  height:40
  });
var label1 = Ti.UI.createLabel({
  text: 'here',
  color:"#fff",
  textAlign: Ti.UI.TEXT_ALIGNMENT_LEFT    

});

view1.add(label1);
  var view2 = Ti.UI.createView({
  left : "33.33%",
  width : "33.33%",
  backgroundColor : "white",
  height:40 
  });
var label2 = Ti.UI.createLabel({
  text: 'there',
  color:"#fff"    
});
view2.add(label2);

var view3 = Ti.UI.createView({
  left : "66.66%",
  width : "33.33%",
  backgroundColor: "blue",
  height:40          
  });
var label3 = Ti.UI.createLabel({
  text: 'Everywhere',
  color:"#fff"        
});
view3.add(label3);

row.add(view1);
row.add(view2);
row.add(view3); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T13:18:42.980

试试这个代码。

```
var win = Ti.UI.createWindow({

});

var table = Ti.UI.createTableView({
    backgroundColor:'blue',
    top:50,
    height : 160
});

win.add(table);

var data = [];

for (var i = 0; i < 4; i++) {

    var row = Ti.UI.createTableViewRow({
        height : 40
    });

    var label1 = Ti.UI.createLabel({
        text : 'label1',
        top : 5,
        left : 10,
        width : 80,
        height : 30
    });

    row.add(label1);

    var label2 = Ti.UI.createLabel({
        text : 'label2',
        top : 5,
        left : 130,
        width : 80,
        height : 30
    });

    row.add(label2);

    var label3 = Ti.UI.createLabel({
        text : 'label3',
        top : 0,
        left : 240,
        width : 80,
        height : 30
    });

    row.add(label3);

    data.push(row);
}

table.data = data;

win.open(); 
```

好运..

# ios - UIScrollView 与 OpenGL GLKit 对齐

> ID：11187656
> 
> 赞同：0
> 
> 时间：2012-06-25T10:32:49.027
> 
> 标签：ios, opengl-es, uiscrollview, glkit

这是一个有点有趣的事情。

所以我有一个顶部有滚动视图的 OpenGL 屏幕。我滚动时使用 CADisplay 链接更新渲染（下面的代码），效果非常好。

但是，我无法让它捕捉到一个点（动画）。我相信 CADisplay 链接的释放会停止滚动视图的动画（参见 snapToItem）。

我尝试在 2 秒后释放 CADisplay，但这会导致其他问题。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    moveFactor = 0 - (((self.scrollView.contentSize.height - self.scrollView.frame.size.height) - self.scrollView.contentOffset.y) / itemScrollViewMoveFactor);
    [self updateLabelPositionScale];
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    [self startDisplayLinkIfNeeded];
}

- (void)snapToItem
{
    NSLog(@"%d", self.selectItem);
    [self.scrollView setContentOffset:CGPointMake(0, (self.scrollView.contentSize.height - self.scrollView.frame.size.height) - (itemScrollViewHeight * self.selectItem)) animated:YES];
    //[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(stopDisplayLink)  userInfo:nil repeats:NO];
    [self stopDisplayLink];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate) 
    {
        [self snapToItem];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self snapToItem];
}

#pragma mark Display Link

- (void)startDisplayLinkIfNeeded
{
    if (!self.displayLink) 
    {
        self.displayLink = [CADisplayLink displayLinkWithTarget:self.view selector:@selector(display)];
        [self.displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:UITrackingRunLoopMode];
    }
}

- (void)stopDisplayLink
{
    if (self.displayLink)
    {
        [self.displayLink invalidate];
        self.displayLink = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:34:23.380

您是否尝试将显示链接添加到 NSRunLoopCommonModes？

# java - Java算法压缩小数字

> ID：11187659
> 
> 赞同：0
> 
> 时间：2012-06-25T10:33:16.120
> 
> 标签：java, algorithm

我需要将**20-40**字符大小的数字压缩为**6**字符大小的数字。到目前为止，我已经尝试了**Huffman**和一些**Zip**算法，但没有得到想要的结果。

有人可以为 Java 中的这项工作提供任何其他算法/API 建议吗？

例子：

```
Input: 98765432101234567890
Desired Output: 123456 
```

请注意：我并不是说给定输入的输出必须为 12345。我的意思是，如果我指定 20 字节的数字，它应该被压缩为 6 字节的数字。

**用法：**压缩后的数字将被提供给设备（最多只能占用 6 个数字字符）。设备会将号码解码回原始号码。

**假设/限制：**

1.  如果需要，客户端和设备（服务器）都可以共享编码/解码数字所需的一些通用属性。

2.  只能向设备发出一个请求，即所有数据都应在一个请求中提供，没有小数据包块

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T10:40:20.657

假设任何数字组合都是合法输入，这将是您可以获得的最佳结果：

```
final String s = "98765432101234567890";
for (byte b : new BigInteger('0'+s).toByteArray()) 
  System.out.format("%02x ", b & 0xff); 
```

印刷

```
05 5a a5 4d 36 e2 0c 6a d2 
```

以二进制形式存储一个数字在理论上是最有效的方式，因为每个位组合都是一个不同的合法值。

只有当您的输入中有更多冗余时，您才可能有其他选择，即对合法数字组合有一些限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:58:06.783

按照您指定的方式，这是不可能的。20 位数字比 6 位数字多，所以如果将 20 位数字映射到只有 6 位数字，则必须将一些 20 位数字映射到相同的 6 位数字。如果您知道并非所有数字都有效甚至具有相同的可能性，则可以将其用于压缩，否则这是不可能的。

尽管从 20 位数字到 6 位数字的可逆（双射）映射是不可能的，但仍然可以将长数字映射到较短的输出。这通过减少输出需要是数字的要求来起作用。唯一重要的考虑是输出序列需要与输入具有相同数量的可能性。这是一个例子：

*   有 10^20 个可能的 20 位数字
*   如果您使用长度为 x 的完整 8 位 ASCII（256 个字符）序列，您将有 256^x 个可能的输出。如果你为 x 解决这个问题，你会注意到 256^9 > 10^20 所以 9 个 ASCII 字符足以编码 20^10 个可能的数字输入。

Marko 对同一问题的回答将告诉您如何将数字转换为可用作输入的字节表示。但请注意，此输入不会是数字，并且可能包含许多奇怪的符号。

# php - PHP mySQL查询删除双数组

> ID：11187662
> 
> 赞同：0
> 
> 时间：2012-06-25T10:33:28.063
> 
> 标签：php, mysql, arrays

在下面的示例中，我采用了一个 ID 数组，只是为了将其转换为一段时间，然后再返回为一个数组，只是为了在页面上的逗号上将其分解。当然，必须有一种更简单的方法来做到这一点。

我在 $row['ID']s 的数组之后

```
function get_other_elector_phone($telephone,$current,$criteria){
    $the_others = mysql_query("SELECT * FROM electors WHERE telephone = '$telephone' $criteria"); $results = '';
    while($row = mysql_fetch_array($the_others))  { 
    $results .= $row['ID'].','; } return $results;
}

$others = get_other_elector_phone(g('electors',$elector,'telephone'),$elector,$criteria); 
                    if($others){ $others = explode(',',$others); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:51:03.307

正如@daverandom 所说，只需重建一个数组，这是语法：

```
function get_other_elector_phone($telephone,$current,$criteria){
  $the_others=mysql_query("SELECT * FROM electors WHERE telephone = '$telephone' $criteria"); 
  $results = array();
  $i=0;
  while($row = mysql_fetch_array($the_others))  { 
    $results [$i]= $row['ID'];
    $i++; 
  } 
  //results returned outside loop
  return $results;
}

$others = get_other_elector_phone(g('electors',$elector,'telephone'),$elector,$criteria); 
```

$others 将返回一个数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T10:41:23.700

代替

```
function get_other_elector_phone($telephone,$current,$criteria){
  $the_others = mysql_query("SELECT * FROM electors WHERE telephone = '$telephone' $criteria"); $results = '';
  while($row = mysql_fetch_array($the_others))  { 
    $results .= $row['ID'].','; } return $results;
  }
} 
```

只返回结果`mysql_fetch_array()`

```
function get_other_elector_phone($telephone,$current,$criteria){
  $the_others = mysql_query("SELECT * FROM electors WHERE telephone = '$telephone' $criteria"); $results = '';
  return mysql_fetch_array($the_others);
} 
```

那么就不需要分解函数的输出了。

# ruby-on-rails - Rails：通过 Carrierwave 将图像上传到 Amazon S3 仅适用于“编辑”

> ID：11187665
> 
> 赞同：4
> 
> 时间：2012-06-25T10:33:37.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, amazon-s3, carrierwave

（一张图片属于一篇文章）

图片上传器有效，但仅当我在 Post Edit 上上传图片时。我希望在创建帖子时上传图像。

图片上传 ("<%= f.file_field :image %>") 在 New Post Form 中，所以我猜 Carrierwave 正在尝试在创建 Post 之前将图片上传到指定路径，导致它没有知道在哪里上传。

这是 ImageUploader 文件：

```
class TrackImageUploader < CarrierWave::Uploader::Base
  def cache_dir
   "#{Rails.root}/tmp/uploads"
  end

 include CarrierWave::RMagick

 #storage :file
 #storage :fog

 def store_dir
  "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
 end

 version :featured do
   process :resize_to_fill => [210, 145]
 end

 def extension_white_list
   %w(jpg jpeg gif png)
 end
end 
```

我猜上面代码中的 store_dir 负责将图像保存在 Amazon S3 上的相应路径中。

我将如何制作它以便在发布后上传图像，以便它可以获取 Post.id ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T22:53:42.573

我遇到了完全相同的问题，但我找到了解决方案。

我的 ImageUploader.rb 看起来像这样：[https](https://gist.github.com/egbertp/7572501) ://gist.github.com/egbertp/7572501 。在该文件的第 9 行，您将看到`include CarrierWaveDirect::Uploader`. 通过使用直接上传技术，您的站点用户将他/她的文件直接上传到 Rackspace 云。但是，在上传时，图像模型尚未在您的数据库中创建，从而导致错误（正如您猜对的那样）。

通过禁用直接上传技术，站点用户将图像发送到您的网络服务器，然后创建图像模型并将其保存在数据库中。在我的 ImageUploader 类中，这也是必要的，因为我希望我的网络服务器处理图像，以便创建缩略图版本。

我希望这会对您或将来的其他人有所帮助。

最好的问候， 埃格伯特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:07:37.240

我也做过同样的事情，但我使用 cloudinary gem 来维护我的图像。你能告诉我你的控制器你在哪里写了编辑动作吗？我正在向你展示我的代码，你可以用 urs 来计算它

在编辑动作的控制器中

```
def create
 @img = Image.new(params[:img])
  if @img.save
    redirect_to(:action => 'show')
  else
    render('c_view')
  end
end 
```

在拍摄图像的视图中

```
<%= form_for :img, :url => {:action => "create"} do |f| %>
 <%= f.label "Upload an image"%>
    <%= f.hidden_field(:image_cache)%>
    <%= f.file_field :image %>      

 <%= f.submit "Submit", class: "btn btn-success"%>
    <% end %> 
```

为了在某​​些视图页面中显示图像，我使用了这个

```
<% @img.each_with_index do |i|%>    
     <%= image_tag (i.image.url) %>
<%end%> 
```

# wpf - 当我单击 WPF 弹出窗口时，如何防止在 Winform 上触发事件？

> ID：11187668
> 
> 赞同：0
> 
> 时间：2012-06-25T10:33:45.617
> 
> 标签：wpf, events, popup, wpf-controls

我有一个 wandows 表单，其中也包含一个 WPF 控件。当我单击控件时，它会弹出一个带有列表框的 WPF 弹出控件。目标是，当我在列表框中选择一个项目时，将相应地重新填充窗口窗体，并且应该关闭弹出窗口。当前在列表框上使用 SelectionChanged 的​​实现工作正常。

这是问题所在。弹出窗口很大，涵盖了包含一些链接的 winform 的某些部分。现在，当我在列表框中选择一个项目时，弹出窗口会在执行必要的操作后关闭，但如果光标下方的弹出窗口（在 winform 上）下方有一个链接（当您选择列表框中的项目时），该链接也发生了点击事件。

当我点击弹出窗口时，有什么方法可以防止点击链接？我必须关闭弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:59:06.097

我想我想通了。

当我们按下鼠标键并在我们抬起它之前执行 SelectionChanged。（鼠标键向上）。在我们抬起鼠标键之前，弹出窗口在 SelectionChanged 中关闭。因此，当我们离开鼠标键时，实际上为 Winform 上的链接触发了 keyUp 事件，因为此时弹出窗口已经关闭。

我将逻辑从 SelectionChanged 移动到 PreviewMouseUp 并且弹出窗口一直存在，直到我离开鼠标键，因此 Winform 上的链接不会收到事件。当然，我检查选择是否已更改。

# xml - 如何在 xslt 中使用递归函数调用创建动态 xml 元素？

> ID：11187669
> 
> 赞同：0
> 
> 时间：2012-06-25T10:34:03.013
> 
> 标签：xml, xslt, xpath

我想使用 xslt 将一种 xml 格式转换为另一种指定的格式。这是我的 Xml 文件。我必须通过在 xslt 中使用某种类型的递归调用来创建一些动态 xml 元素。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
<w:body>
    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text1-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
            <w:pStyle w:val="Heading1" /> 
        </w:pPr>
        <w:r>
            <w:t>Text2-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text3-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text4-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
            <w:pStyle w:val="Heading2" /> 
        </w:pPr>
        <w:r>
            <w:t>Text5-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text6-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
            <w:pStyle w:val="Heading3" /> 
        </w:pPr>
        <w:r>
            <w:t>Text7-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text8-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
            <w:pStyle w:val="Heading1" /> 
        </w:pPr>
        <w:r>
            <w:t>Text9-</w:t>
        </w:r>  
    </w:p>

    <w:p>
        <w:pPr>
        </w:pPr>
        <w:r>
            <w:t>Text10-</w:t>
        </w:r>  
    </w:p>

</w:body>
</w:document> 
```

**我需要的输出 xml 是：**

```
<Document>
      <Paragraph>Text1-</Paragraph> 
      <Heading1>
         <Title>Text2-</Title>
         <Paragraph>Text3-</Paragraph> 
         <Paragraph>Text4-</Paragraph> 
         <Heading2>
            <Title>Text5-</Title>
            <Paragraph>Text6-</Paragraph> 
            <Heading3>
                <Title>Text7-</Title>
                <Paragraph>Text8-</Paragraph>  
            </Heading3>         
         </Heading2>
      <Heading1>
      <Heading1>
         <Title>Text9-</Title>
         <Paragraph>Text10-</Paragraph> 
       <Heading1>      
</Document> 
```

请指导我摆脱这个问题的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:33:17.927

这是一个示例样式表：

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xpath-default-namespace="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs w mf">

<xsl:output indent="yes"/>

<xsl:function name="mf:group" as="element()*">
  <xsl:param name="paragraphs" as="element()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$paragraphs" group-starting-with="p[pPr/pStyle/@w:val = concat('Heading', $level)]">
    <xsl:choose>
      <xsl:when test="self::p[pPr/pStyle/@w:val = concat('Heading', $level)]">
        <xsl:element name="Heading{$level}">
          <Title><xsl:value-of select="r/t"/></Title>
          <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
        </xsl:element>
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates select="current-group()"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="document">
  <Document>
    <xsl:sequence select="mf:group(body/p, 1)"/>
  </Document>
</xsl:template>

<xsl:template match="p">
  <Paragraph>
    <xsl:value-of select="r/t"/>
  </Paragraph>
</xsl:template>

</xsl:stylesheet> 
```

在您的示例输入文档上应用 Saxon 9.4 时，我得到以下结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
   <Paragraph>Text1-</Paragraph>
   <Heading1>
      <Title>Text2-</Title>
      <Paragraph>Text3-</Paragraph>
      <Paragraph>Text4-</Paragraph>
      <Heading2>
         <Title>Text5-</Title>
         <Paragraph>Text6-</Paragraph>
         <Heading3>
            <Title>Text7-</Title>
            <Paragraph>Text8-</Paragraph>
         </Heading3>
      </Heading2>
   </Heading1>
   <Heading1>
      <Title>Text9-</Title>
      <Paragraph>Text10-</Paragraph>
   </Heading1>
</Document> 
```

# html - 红色源代码——Doctype标签

> ID：11187673
> 
> 赞同：0
> 
> 时间：2012-06-25T10:34:24.190
> 
> 标签：html, tags, doctype

在 Firefox 上检查网站的源代码时，我把它变成了红色

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我的理解是红色源有时意味着错误关闭的标签或某种类型的错误。

有人可以解释为什么“过渡”标签显示为红色，而“严格”标签显示正常吗？

我在哪里可以找到规则来检查我需要在我的网站上拥有哪个“DOCTYPE”标签？

有一个相关吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:50:12.637

这里红色不表示错误，而是警告，或者只是信息。如果您将鼠标悬停在红色文本上，Firefox 会显示一个工具提示，告诉您该文档以“<a href="https://developer.mozilla.org/en/Gecko%27s_Almost_Standards_Mode" rel="nofollow">almost标准模式”，与由严格 DTD 触发的“标准模式”相反。

很可能这无关紧要。如果是这样并且您更喜欢“标准模式”，请使用严格的 DTD。在验证中，如果您的标记是过渡的，您可以通过从下拉列表中选择过渡 DTD 来手动覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:43:31.137

最重要的第一点：是的，有一个 doctype 标签是相关的。

如果没有 doctype 标签，您的页面将以 quirks 模式呈现。这基本上意味着浏览器会尝试与它知道的最旧的 HTML 版本兼容，通常是 HTML 3.2 之类的东西，以及它知道的最旧的 Javascript 版本。在 Internet Explorer 中，这也意味着它使用[了非标准的盒子模型](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)，这会完全打乱你的布局。

[您可以在W3C 推荐的 Doctype 声明列表中](http://www.w3.org/QA/2002/04/valid-dtd-list.html)找到有效的 doctype 标签。

# html - 如何结合文本溢出控制html表格列宽

> ID：11187681
> 
> 赞同：0
> 
> 时间：2012-06-25T10:34:39.260
> 
> 标签：html, html-table, ellipsis, col

给定以下 html 表，我想通过设置“col”元素的宽度而不是在 div 元素上设置它来控制第一列的宽度，而不会丢失省略号。仅使用 html 和 CSS 有可能吗？

```
<html>
<head>
<style>
.hideextra { white-space: nowrap; overflow: hidden; text-overflow:ellipsis; }
</style>
</head>
<body>
<table style="width: 300px">
<col /><!-- ** set width here ** -->
<tr>
    <td>Column 1</td><td>Column 2</td>
</tr>
<tr>
   <td>
    <div class="hideextra" style="width:200px">
                this is the text in column one which wraps</div></td>
   <td>
        <div class="hideextra" style="width:100px">
                this is the column two test</div></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:17:39.470

可以这样做：

```
<table border="1" width="100%" style="table-layout: fixed; ">
<col width="60px">
<tr>
    <td style="overflow: hidden;text-overflow: ellipsis;">500.000.000.000.000</td>
    <td>10.000</td>
</tr>
<tr>
    <td>1.500.000</td>
    <td>2.000</td>
</tr>
</table> 
```

# java - 相同的输入不同的输出..时间计算

> ID：11187689
> 
> 赞同：2
> 
> 时间：2012-06-25T10:35:09.927
> 
> 标签：java

我有一个棘手的问题要解决。我在方法调用之前和之后立即使用 System.currentTimeMillis()，因为我必须测量这两个语句之间经过的时间。

```
waitingTime = System.currentTimeMillis(); //starts calculating time
bridge.getIn(direction); // tries to enter the bridge   
waitingTime = System.currentTimeMillis() - waitingTime ;// time elapsed 
```

我担心的是每次运行程序都会得到不同的结果。

我明白了（这是完美的）：

```
Generated cars going north: 0 
Generated cars going south: 2

Waiting time for every single car:
==============================================================
A0/South:109ms
A1/South:0ms
==============================================================
Mean waiting time southbound cars : 54ms 
```

然后几秒钟后我再次运行程序，我得到（这是错误的）：

```
Generated cars going north: 0 
Generated cars going south: 2

Waiting time for every single car:
==============================================================
A0/South:0ms
A1/South:94ms
==============================================================
Mean waiting time southbound cars : 47ms 
```

我说这个输出是错误的，因为每辆车的等待时间不应该少于 100 毫秒。

什么实际影响基于 currentTimeMillis 函数的时间计算？

为什么我会得到不同的结果？

有人可能会想：每次输入都一样吗？我会说是的..输入参数

总是相同的（两个例子）但是程序使用 Random 类来生成一个

给定的线程数。

那是罪魁祸首吗？

关于程序的一些细节：

一堆从北向南行驶的汽车（反之亦然）沿着一条两条车道行驶。过了一会儿，他们到了一座桥。这座桥只有一种方式，容量有限。一辆汽车需要 100 毫秒才能通过这座桥。不允许发生交通碰撞。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:53:17.263

输出/结果没有错。操作系统会暂时中断当前正在执行的程序并运行一个高优先级的程序，还涉及其他因素。因此时间滞后。如果您想检查程序执行所需的准确时间，请尝试`System.nanoTime()`以纳秒为单位返回时间并运行 N 次并取平均次数（即使这样我也不能向您保证执行时间将保持不变）

我的意思是尝试如下所示的一些事情。

```
 long totalTime=0;
    for(i=0;i<n;i++){ //where n is some value say 3,4,5
         waitingTime = System.nanoTime(); //starts calculating time
         bridge.getIn(direction); // tries to enter the bridge   
         waitingTime = System.nanoTime() - waitingTime ;// time elapsed
         totalTime+=waitingTime;
    }
    long totalTimeInMillis = totalTime/(n*1000); 
```

注意：确保每次执行的环境都应保持不变。

# conditional - Gnuplot：带线的条件绘图（$2 == 15 ? $2: '1/0'）

> ID：11187691
> 
> 赞同：27
> 
> 时间：2012-06-25T10:35:23.953
> 
> 标签：conditional, gnuplot

我的数据如下所示：

```
10:15:8:6.06000000:
10:15:2:19.03400000:
10:20:8:63.50600000:
10:20:2:24.71800000:
10:25:8:33.26200000:
10:30:8:508.23400000:
20:15:8:60.06300000:
20:15:2:278.63100000:
20:20:8:561.18000000:
20:20:2:215.46600000:
20:25:8:793.36000000:
20:25:2:2347.52900000:
20:30:8:5124.98700000:
20:30:2:447.41000000:
(...)

```

我想在 x 轴上绘制一个带有 $1 的“线点”图，以及代表 ($2,$3) 的每个组合的 8 条不同的线，例如：(15,8)、(15,2)、...

为了进行这种条件绘图，人们提出以下建议：

```
plot 'mydata.dat'  using 1:($2==15 && $3==8 ? $4 : 1/0) with  linespoints 'v=15, l=8' 
```

但是，gnuplot 无法通过这些点画一条线，因为“​​1/0”是无效的，并且插入以替换 ($2==15 && $3==8) 不成立的每个数据点。

此外，“再次绘制最后一个数据点”而不是使用“1/0”的建议不起作用，因为我对两个变量使用条件。

真的没有办法告诉 gnuplot 忽略文件中的条目，而不是绘制无效的“1/0”数据点吗？请注意，将其替换为“NaN”会产生相同的结果。

现在，我正在使用 bash 和 awk 预处理我的所有数据文件（通过将它们分成单独的文件，然后可以在同一个图中绘制），但这并不理想......

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T16:07:16.893

+1 提出了一个很好的问题。我（错误地）会认为你所拥有的会起作用，但看看`help datafile using examples`表明我实际上是错的。您看到的行为已记录在案。感谢您今天教我一些关于 gnuplot 的新知识 :)

“预处理”是（显然）这里需要的，但临时文件不是（只要您的 gnuplot 版本支持管道）。像上面的示例一样简单的事情都可以在 gnuplot 脚本中完成（尽管 gnuplot 仍需要将“预处理”外包给另一个实用程序）。

这是一个简单的例子，可以避免临时文件的生成，但`awk`用来做“繁重的工作”。

```
set datafile sep ':'  #split lines on ':'
plot "<awk -F: '{if($2 == 15 && $3 == 8){print $0}}' mydata.dat" u 1:4 w lp title 'v=15, l=8' 
```

注意“< awk ...”。Gnuplot 打开一个 shell，运行命令，然后从管道中读回结果。不需要临时文件。当然，在这个例子中，我们可以有`{print $1,$4}`（而不是`{print $0}`）并把 using 规范放在一起，例如：

```
plot "<awk -F: '{if($2 == 15 && $3 == 8){print $1,$4}}' mydata.dat" w lp title 'v=15, l=8' 
```

也将工作。系统上写入标准输出的任何命令都可以使用。

```
plot "<echo 1 2" w p  #plot the point (1,2) 
```

你甚至可以使用管道：

```
plot "<echo 1 2 | awk '{print $1,$2+4}'" w p #Plots the point (1,6) 
```

与任何编程语言一样，请记住不要运行不受信任的脚本：

```
HOMELESS="< rm -rf ~"
plot HOMELESS  #Uh-oh (Please don't test this!!!!!) 
```

gnuplot 不好玩吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-01T08:28:44.113

...只是偶然发现了这个老问题...好吧，当您想要绘制连接的过滤数据`with lines`或`with linespoints`. 有一个 gnuplot-native 解决方案。解决方法的“技巧”是将多个数据点绘制在彼此之上，并且仅在找到新点时才更改坐标。代码很简单：

```
### conditional plot with connected lines or linespoints
reset session

# added two datapoints for testing purposes
$Data <<EOD
10:15:8:6.06000000:
10:15:2:19.03400000:
10:20:8:63.50600000:
10:20:2:24.71800000:
10:25:8:33.26200000:
10:30:8:508.23400000:
13:20:8:8.88888888:
15:15:8:9.99999999:
20:15:8:60.06300000:
20:15:2:278.63100000:
20:20:8:561.18000000:
20:20:2:215.46600000:
20:25:8:793.36000000:
20:25:2:2347.52900000:
20:30:8:5124.98700000:
20:30:2:447.41000000:
EOD

set datafile separator ":"
x0 = y0 = NaN
plot $Data u ($2==15 && $3==8 ? (y0=$4,x0=$1) : x0):(y0) w lp pt 7

### end of code 
```

结果： [![在此处输入图像描述](../Images/e6d70217c2bd8c8a15306118ace610f5.png)](https://i.stack.imgur.com/F97OW.png)

**添加：**

只是为了完整性。实际上，`set datafile missing "NaN"`正在解决 gnuplot5.x 中的问题，但由于这个问题来自 gnuplot4.6 次......而且有些人似乎仍在使用 4.x 版本进行绘图

`SO_Filter.dat`

```
# added two datapoints for testing purposes
10:15:8:6.06000000:
10:15:2:19.03400000:
10:20:8:63.50600000:
10:20:2:24.71800000:
10:25:8:33.26200000:
10:30:8:508.23400000:
13:20:8:8.88888888:
15:15:8:9.99999999:
20:15:8:60.06300000:
20:15:2:278.63100000:
20:20:8:561.18000000:
20:20:2:215.46600000:
20:25:8:793.36000000:
20:25:2:2347.52900000:
20:30:8:5124.98700000:
20:30:2:447.41000000: 
```

编码：

```
### conditional plot with connected lines or linespoints
reset
FILE = "SO_Filter.dat"
set datafile separator ":"

set multiplot layout 2,1  title "generated with gnuplot 4.6"

# this works with gnuplot 4.x and 5.x
x0 = y0 = NaN
plot FILE u ($2==15 && $3==8 ? (y0=$4,x0=$1) : x0):(y0) w lp pt 7 ti "works with gnuplot >4.x and 5.x"

# this works with gnuplot >5.x
set datafile missing "NaN"
plot FILE u ($2==15 && $3==8 ? $1 : NaN ):4 w lp pt 7 ti "works only with gnuplot >5.x"

unset multiplot
### end of code 
```

在 gnuplot 4.6 中的结果：

[![在此处输入图像描述](../Images/770a27e37458e1e225d4cf8e057aa5d8.png)](https://i.stack.imgur.com/lzEyI.png)

# php - 匹配初始化的整数值

> ID：11187693
> 
> 赞同：2
> 
> 时间：2012-06-25T10:35:34.667
> 
> 标签：php, regex, perl

假设我有这个字符串：

`var a=23434,bc=3434,erd=5656,ddfeto='dsf3df34dff3',eof='sdfwerwer34',wer=4554;`

我应该如何匹配分配为整数的所有初始化？这是我目前的尝试，但我不明白为什么它匹配所有内容。

```
$pattern = '/var (.*=\d)/';
preg_match_all($pattern,$page,$matches); 
```

编辑：我正在尝试匹配每个初始化：

```
1 => a=23434
2 => bc=3434 
```

等等...

编辑：这是我尝试的更新：

```
$pattern = '/[^v^a^r] (.*=\d+),/';
preg_match_all($pattern,$page,$matches);

0 => 'var a=23434,bc=3434,erd=5656,'
1 => 'a=23434,bc=3434,erd=5656' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:40:00.680

该函数使用“贪婪”匹配。你不想要那个。在 PHP 中，您可以在通配符后面加上 a`?`来指定非贪婪匹配，如下所示：

```
$pattern = '/var (.*?=\d)/'; 
```

或使用[此处记录](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)`U`的标志，如：

```
$pattern = '/var (.*=\d)/U'; 
```

这将使所有通配符使用非贪婪匹配。

编辑：另外，由于您包含“var”，您可能需要将其更改为

```
$pattern = '/var (.*?=\d)*/'; 
```

或者

```
$pattern = '/var (.*=\d)*/U'; 
```

匹配任意数量的`(.*=\d)`模式。

* * *

***编辑：***每次讨论更新：

**PHP**

```
$page = "var a=23434,bc=3434,erd=5656,ddfeto='dsf3df34dff3',eof='sdfwerwer34',wer=4554;";
$pattern = '/([a-zA-Z]+=\d+)/';

preg_match_all($pattern,$page,$matches);

print_r($matches[1]); 
```

**生产**

```
Array
(
    [0] => a=23434
    [1] => bc=3434
    [2] => erd=5656
    [3] => wer=4554
) 
```

注意：这会过滤*掉*RHS 用单引号括起来的条目。如果你不想这样，请告诉我们。

* * *

***编辑#2***：我对你问题的回答超出了评论框的大小，所以我编辑了我的答案。

该`[a-zA-z]`表达式仅匹配任一大小写的字母字符。请注意，更新后的代码还删除了“不贪婪”修饰符，所以我们现在实际上*希望*它是贪婪的。而且由于我们希望它贪婪，所以它`.`会“吃”得太多。来吧，玩弄代码，看看当你改变它时会发生什么，`.*`这是一个更好地熟悉正则表达式的好机会。

由于`.`“吃”太多，我们需要限制它匹配所有字符以匹配我们想要的字符。我们可以使用类似的东西

```
$pattern = '/([^\s,]*=\d+)/'; 
```

其中`[^\s,]*`将匹配任意数量的非空白、非逗号字符。这也适用于您的测试用例。

但是在这种情况下，我们可以自信地说出我们想要包含的字符是什么，所以我们不会将字符“列入黑名单”，而是将它们“列入白名单”。在这种情况下，我们指定我们要匹配任何一种情况下的任何字母字符。

与许多事情一样，特别是在编程中，有很多方法可以给猫剥皮。有许多替代正则表达式模式也适用于您的测试用例。由您来了解每个限制，它们将如何在边缘情况下执行，以及它们的可维护性，并做出决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:41:22.030

您不必使用正则表达式：

```
$string = substr($string, 4); // remove the first 4 characters, 'var '
$pairs = explode(',', $string); // split using the comma
foreach ($pairs as $pair) {
    list($key, $value) = explode('=', $pair);
    if (is_int($value)) {
        // this is an integer
    } else {
        // not an integer
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:48:25.847

试试这个正则表达式

```
$pattern = '/([a-zA-Z]+=\d+)/'; 
```

# debugging - 如何使用 WML 在移动设备中显示视频？

> ID：11187694
> 
> 赞同：1
> 
> 时间：2012-06-25T10:35:41.983
> 
> 标签：debugging, video, mobile-website, file-format, wap

使用 WML 进行 WAP 项目，因为我必须显示要在 WML 中播放的视频。我使用 了`<embed>`,`<object>`标签，但它不适用于移动设备。任何人都可以帮助我并解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T02:48:10.413

使用动画 gif 或 SMIL 在 WML 中显示视频：

*   [从视频生成 gif 动画](http://wiki.alessandro.delgallo.net/wiki/index.php/Encoding_from_command_line#Generate_gif89a_.28-gif_animation.29_mplayer_from_a_video)

*   [使用 ffmpeg 将 avi 转换为 3gp](https://stackoverflow.com/questions/12598108/convert-avi-to-3gp-using-ffmpeg)

*   [SMIL 2.1 移动配置文件](http://www.w3.org/TR/2005/WD-SMIL2-20050201/smil21-mobile-profile.html)

# javascript - 在客户端Java脚本（CSJS）中获取显示类型“数字”的输入文本框值

> ID：11187695
> 
> 赞同：0
> 
> 时间：2012-06-25T10:35:50.593
> 
> 标签：javascript, lotus-domino

我一直在尝试从客户端获取输入文本框的值，如下所示：

```
var CKQtyToDate = XSP.getElementById("#{id:CKQtyToDate}");
var CKQtyToDate = XSP.getElementById("#{id:CKQtyToDate}");
var SLQtyToDate = XSP.getElementById("#{id:SLQtyToDate}");
var FinishingQtyToDate = XSP.getElementById("#{id:FinishingQtyToDate}");
var PackingQtyToDate = XSP.getElementById("#{id:PackingQtyToDate}"); 

if ((parseInt(CKQtyToDate.value)+parseInt(SLQtyToDate.value)+parseInt(FinishingQtyToDate.value)+parseInt(PackingQtyToDate.value))>parseInt(hContractQty.value))
{
    alert("Total qty more than contract qty! =" + parseInt(CKQtyToDate.value)+parseInt(SLQtyToDate.value)+parseInt(FinishingQtyToDate.value)+parseInt(PackingQtyToDate.value));
    return false;
} 
```

但是我仍然得到只有字符串连接的结果，我怎么能通过这个东西？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:15:09.577

首先，在 Javascript 中，parseInt 在解析空字符串时返回 NaN。因此，请确保在进行计算之前测试空字符串。您可以测试字符串是否可以使用`!isNaN(string)`.

我相信您的问题是您在警报框中连接字符串。我建议您将计算移至一个单独的变量，然后在警报框中将消息字符串与此变量连接起来：

```
var result = parseInt(CKQtyToDate.value)+parseInt(SLQtyToDate.value)+parseInt(FinishingQtyToDate.value)+parseInt(PackingQtyToDate.value);

if (result>parseInt(hContractQty.value))
{
   alert("Total qty more than contract qty! =" + result);
   return false;
} 
```

# .net - 如何使用带参数的命令提示符触发 exe

> ID：11187707
> 
> 赞同：0
> 
> 时间：2012-06-25T10:37:16.167
> 
> 标签：.net, command

我需要使用命令提示符触发一个可执行文件（使用 .net 构建）。例如 c:> myfile.exe

但是我拥有的可执行文件需要身份验证。是否可以使用用户名和密码作为参数触发 exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:20:36.693

计划任务允许您设置“运行方式”属性。您可以在此处设置 windows 用户帐户和密码。

如果您唯一关心的是在特定帐户下运行它，则可以在创建计划任务本身时进行配置。

如果您的 exe 本身需要用户名和密码，则需要传递命令行参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:20:53.063

看一下 Shell 命令 **runAs**

# ios - iOS中的SQLite多个INSERT

> ID：11187709
> 
> 赞同：0
> 
> 时间：2012-06-25T10:37:23.890
> 
> 标签：ios, sqlite, batch-file, bulkinsert

我想在表中插入数千条记录，现在我正在使用

```
INSERT INTO myTable ("id", "values") VALUES ("1", "test")
INSERT INTO myTable ("id", "values") VALUES ("2", "test")
INSERT INTO myTable ("id", "values") VALUES ("3", "test") 
```

一条一条查询插入记录，但执行时间长，

现在我想从一个查询中插入所有记录...

```
INSERT INTO myTable ("id", "values") VALUES
 ("1", "test"),
 ("2", "test"),
 ("3", "test"),
 .....
 .....
 ("n", "test") 
```

但是这个查询不适用于 Sqllite，你能给我一些指导来解决这个问题吗

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:46:44.770

[请在此处参考我的回答](https://stackoverflow.com/a/9497342/1357774)。

sqlite 中没有可以支持您的结构的查询，这是我用来在数据库中插入 1000 条记录的方法。性能很好。你可以试一试。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:35:18.323

插入 table_name (col1,col2) SELECT 'R1.value1', 'R1.value2' UNION SELECT 'R2.value1', 'R2.value2' UNION SELECT 'R3.value1', 'R3.value2' UNION SELECT 'R4 .value1'，'R4.value2'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:26:36.687

您可以在 SO 上点击此[链接以获取更多信息。](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)但要小心你想要插入的数量，因为这种用法有限制（[见这里](https://stackoverflow.com/questions/9527851/sqlite-error-too-many-terms-in-compound-select)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T11:09:37.293

```
INSERT INTO 'tablename'
  SELECT 'data1' AS 'column1', 'data2' AS 'column2'
  UNION SELECT 'data3', 'data4'
  UNION SELECT 'data5', 'data6'
  UNION SELECT 'data7', 'data8'

As a further note, sqlite only seems to support upto 500 such union selects per query so if you are trying to throw in more data than that you will need to break it up into 500 element blocks 
```

# iphone - 日文键盘高度

> ID：11187712
> 
> 赞同：1
> 
> 时间：2012-06-25T10:37:34.233
> 
> 标签：iphone, keyboard, height

我想向上滚动我的表单以让 UITextField 下的键盘。它适用于英文键盘，但是当我更改为日文键盘时，我的表格只能向上滚动一点。我调试并发现两种情况下的键盘高度不同。

我做如下

```
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
            selector:@selector(keyboardWasShown:)
            name:UIKeyboardDidShowNotification object:nil];

   [[NSNotificationCenter defaultCenter] addObserver:self
             selector:@selector(keyboardWillBeHidden:)
             name:UIKeyboardWillHideNotification object:nil];
}

- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];

    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    NSLog(@"kbSize.height=%0.1f", kbSize.height);

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, activeField.frame.origin) )
    {
        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
        [scrollView setContentOffset:scrollPoint animated:YES];
    }
}

- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    activeField = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    activeField = nil;
} 
```

这是信息的结果：

1.  对于英文键盘：kbSize.height=216.0

2.  对于日文键盘：kbSize.height=252.0

这个案子有人接吗？有人可以帮我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:52:33.077

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardModeChange:) name:UITextInputCurrentInputModeDidChangeNotification object:nil]; 
```

# xaml - 如何使用 xaml 创建类似计算器的界面？

> ID：11187714
> 
> 赞同：0
> 
> 时间：2012-06-25T10:37:39.237
> 
> 标签：xaml, virtualizingstackpanel

我希望使用 XAML 创建一个类似界面的计算器。它应该包含最多 1000 个按钮。我已经阅读了有关虚拟化堆栈面板的信息，但我不确定如何将它与列表框一起使用并与该列表进行数据绑定以获取内容. 你能帮我虚拟化堆栈面板的概念吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:28:02.843

`ListBox`默认情况下包含一个虚拟化`StackPanel`，所以你不需要担心它，或者如何实现它。`StackPanel`仅供参考，当它们进入视图时，虚拟化仅创建 UI 元素（在您的情况下为按钮）。另一个改进是打开容器回收：

```
<ListBox VirtualizingStackPanel.IsVirtualizing="true" VirtualizingStackPanel.VirtualizationMode="Recycling" /> 
```

# java - 如何使用OTA方法在BB设备上部署alx文件？

> ID：11187715
> 
> 赞同：0
> 
> 时间：2012-06-25T10:37:48.893
> 
> 标签：java, blackberry, blackberry-eclipse-plugin

我有我的项目 alx 文件，其中列出了所有必需的 cod 文件名。我想使用 OTA 方法将此项目部署/安装到 BB 设备上。我该怎么做呢 ？

而且我还有一个列出所有库 cod 文件名的 alx 文件。在我使用 OTA 方法部署我的 proj alx 之前，我也想部署它。

请告诉我，怎么做？

谢谢， 斯瓦普纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:03:50.293

alx 文件仅适用于 BES / Desktop Manager 安装。要部署 Over The Air，您需要同级 cod 文件和 jad 文件。

在 Eclipse 插件中，您可以在文件夹中找到 jad 文件和兄弟代码`deliverables\Web`。确保您已先签署。然后，将文件上传到网络。在 BlackBerry 浏览器中键入已发布的 jad 文件 URL 时启动 OTA 安装。

# iphone - 在 Xcode 中以编程方式创建文件夹 - Objective C

> ID：11187716
> 
> 赞同：11
> 
> 时间：2012-06-25T10:37:48.793
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用以下代码行将我的 yoyo.txt 文件保存在 Documents 文件夹中::

```
NSString *docDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSLog(@"docDir is yoyo :: %@", docDir);
NSString *FilePath = [docDir stringByAppendingPathComponent:@"yoyo.txt"]; 
```

但是，我希望将我的文件保存在 yoyo 的文件夹中，即 Documents 文件夹中，即我想创建另一个名为“yoyo”的文件夹，然后将我的 yoyo.txt 文件保存到其中。我怎样才能做到这一点 ？？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-25T10:41:53.730

这是一个示例代码（假设`manager`是`[NSFileManager defaultManager]`）：

```
BOOL isDirectory;
NSString *yoyoDir = [docDir stringByAppendingPathComponent:@"yoyo"];
if (![manager fileExistsAtPath:yoyoDir isDirectory:&isDirectory] || !isDirectory) {
        NSError *error = nil;
        NSDictionary *attr = [NSDictionary dictionaryWithObject:NSFileProtectionComplete
                                                         forKey:NSFileProtectionKey];
        [manager createDirectoryAtPath:yoyoDir
           withIntermediateDirectories:YES
                            attributes:attr
                                 error:&error];
        if (error)
            NSLog(@"Error creating directory path: %@", [error localizedDescription]);
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T10:45:18.127

```
+(void)createDirForImage :(NSString *)dirName
{
    NSString *path;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    path = [[paths objectAtIndex:0] stringByAppendingPathComponent:dirName];
    NSError *error;
    if (![[NSFileManager defaultManager] fileExistsAtPath:path])    //Does directory already exist?
    {
        if (![[NSFileManager defaultManager] createDirectoryAtPath:path
                                       withIntermediateDirectories:NO
                                                        attributes:nil
                                                             error:&error])
        {
            NSLog(@"Create directory error: %@", error);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T05:35:21.787

这里 dataPath 将是保存文件的最终路径

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
        NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
        NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"/yoyo"];

        if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]){
            [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder
    }
    dataPath = [dataPath stringByAppendingPathComponent:@"/yoyo.txt"]; 
```

# android-intent - 从图像相机Android获取纬度和经度

> ID：11187717
> 
> 赞同：0
> 
> 时间：2012-06-25T10:37:49.270
> 
> 标签：android-intent, latitude-longitude, android-camera-intent

我需要获取相机拍摄的图像的经度和纬度。

```
@Override
        public void onClick(View v) {

            Intent i= new Intent("android.media.action.IMAGE_CAPTURE");
            startActivityForResult(i,TAKE_PHOTO);
        }

@Override

protected  void onActivityResult(int requestCode, int resultCode,Intent data){
 super.onActivityResult(requestCode,resultCode,data);

 switch(requestCode){
case TAKE_PHOTO:

    Bitmap imagen =(Bitmap) data.getExtras().get("data");
    Uri seleccion = (Uri) data.getExtras().get("uri");
    TextView jjj = (TextView) findViewById(R.id.comentarios);
    String [] fotoProyeccion ={MediaStore.Images.ImageColumns.LATITUDE,MediaStore.Images.ImageColumns.LONGITUDE};

     fotoDatos =Media.query(getBaseContext().getContentResolver(), seleccion, fotoProyeccion);

    int latt = fotoDatos.getColumnIndex (MediaStore.Images.ImageColumns.LATITUDE);
    int longi= fotoDatos.getColumnIndex(MediaStore.Images.ImageColumns.LONGITUDE);
    String resultado = String.valueOf(latt)+"---"+String.valueOf(longi);

    jjj.setText(resultado);
}
} 
```

此代码不起作用。我也找不到我正在寻找的示例。有没有可能我正在尝试？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:07:31.280

您的代码正在获取列索引，而不是返回的实际值。这就是为什么你总是得到 0 和 1。此外，坐标不是 int。

正确的代码如下所示：

```
// Query MediaStore
fotoDatos =Media.query(getBaseContext().getContentResolver(), seleccion, fotoProyeccion);

// Get the columns
int latcol = fotoDatos.getColumnIndex (MediaStore.Images.ImageColumns.LATITUDE);
int loncol = fotoDatos.getColumnIndex(MediaStore.Images.ImageColumns.LONGITUDE);

// Fetch first row
fotoDatos.moveToFirst();

// Get the actual values returned
double latval = fotoDatos.getDouble(latcol);
double lonval = fotoDatos.getDouble(loncol);

String resultado = String.valueOf(latval)+"---"+String.valueOf(lonval); 
```

# java - 通过 java 编码的 SFTP 抛出异常并说 Invalid absolute URI

> ID：11187718
> 
> 赞同：1
> 
> 时间：2012-06-25T10:37:49.407
> 
> 标签：java, sftp

[遵循此代码](http://www.memorylack.com/2011/06/apache-commons-vfs-for-sftp.html)

我收到此错误，我在程序中所做的唯一更改是将参数硬编码为

```
String  hostName = "122.183.217.133" ; 
String username  = "root";
String password = "something";
String  localFilePath = "C://Sample.jpg";
String  remoteFilePath = "/var/www/html/intranetupload/uploads/Sample.jpg";

Jun 25, 2012 2:52:18 PM org.apache.commons.vfs2.VfsLog info
INFO: Using "C:\DOCUME~1\MEENAK~1.DCK\LOCALS~1\Temp\vfs_cache" as temporary files store.
Exception in thread "main" java.lang.RuntimeException: org.apache.commons.vfs2.FileSystemException: Invalid absolute URI "sftp://root:***@122.183.217.133:22/var/www/html/intranetupload/uploads/Sample1.jpg".
    at sftp.sample.Main.delete(Main.java:120)
    at sftp.sample.Main.main(Main.java:36)
Caused by: org.apache.commons.vfs2.FileSystemException: Invalid absolute URI "sftp://root:***@122.183.217.133:22/var/www/html/intranetupload/uploads/Sample1.jpg".
    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:61)
    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:693)
    at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:621)
    at sftp.sample.Main.delete(Main.java:111)
    ... 1 more
Caused by: org.apache.commons.vfs2.FileSystemException: Expecting / to follow the hostname in URI "sftp://root:***@122.183.217.133:22/var/www/html/intranetupload/uploads/Sample1.jpg".
    at org.apache.commons.vfs2.provider.HostFileNameParser.extractToPath(HostFileNameParser.java:155)
    at org.apache.commons.vfs2.provider.URLFileNameParser.parseUri(URLFileNameParser.java:50)
    at org.apache.commons.vfs2.provider.AbstractFileProvider.parseUri(AbstractFileProvider.java:188)
    at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:57)
    ... 4 more 
```

我没有服务器的域名。我所拥有的只是一台已知 IP / 用户名和密码的 ubuntu 机器。我的工作需要删除远程 Ubuntu 机器上的文件。

你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-14T08:23:28.943

解决方法是在调用resolveFile()之前对用户名和密码进行Url编码；

因此，如果您需要调用以下内容：

```
manager.resolveFile("sftp://sftpuser@Location:Test!@#$%^&*()[]:;@US456564/home57556"); 
```

其中用户名是“sftpuser@Location”，密码是“Test!@#$%^&*[]:;:

您只对用户名和密码进行编码，然后将其称为：

```
manager.resolveFile("sftp://sftpuser%40Location:Test!%40%23%24%25%5E%26*%5B%5D%3A%3B@US456564/home57556"); 
```

它可能看起来像 Sting 有点乱，但在调用代码中没有太大问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-02T03:13:23.347

通过在您的 pom 文件中添加**jsch**，错误将得到解决。

```
<dependency>
    <groupId>com.jcraft</groupId>
    <artifactId>jsch</artifactId>
    <version>0.1.50</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-25T13:03:54.847

[您可能正在使用您提供的链接](https://www.memorylack.com/apache-commons-vfs-for-sftp)中的以下代码：

```
public static String createConnectionString(String hostName,
        String username, String password, String remoteFilePath) {
    // result: "sftp://user:123456@domainname.com/resume.pdf
    return "sftp://" + username + ":" + password + "@" + hostName + "/" + remoteFilePath;
} 
```

```
FileObject remoteFile = manager.resolveFile(
        createConnectionString(
            "122.183.217.133", "root", "something", "/path/to/file")
        , createDefaultOptions()); 
```

问题是，您没有指定端口。让我们假设它`22`适合您：

```
createConnectionString("122.183.217.133:22", "root", "something", "/path/to/file") 
```

**不过还有另一个问题。**

如果您的用户名或密码包含一些不寻常的字符，例如`!@#$%^&*():`或其他，您需要对其进行 URLEncode。
请改用此方法`createConnectionString`：

```
import java.net.URLEncoder;

public static String createConnectionString(String hostName, String username, 
                                            String password, String remoteFilePath) {
   try {
        return "sftp://" + URLEncoder.encode(username, "UTF-8") + ":" + URLEncoder.encode(password, "UTF-8") 
                         + "@" + hostName + "/" + remoteFilePath;
    } catch (UnsupportedEncodingException e) {
        return "sftp://" + username + ":" + password + "@" + hostName + "/" + remoteFilePath;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:53:58.647

您缺少对 pom 的依赖项。应该足够了，包括：sshtools、jsch 和 commons-net。

对不起，我不能确定，但​​这是一个依赖问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-13T14:17:15.877

只`jsch-0.1.46.jar`在 lib 文件中添加。

# sql - 使用 LIKE 查询，结果集越小越慢

> ID：11187721
> 
> 赞同：1
> 
> 时间：2012-06-25T10:38:10.440
> 
> 标签：sql, performance, sql-server-2008-r2, sql-like

假设我有一个包含 200000 条记录的 Person 表，它的 GUID 主键上有一个聚集索引。此 GUID 是使用 SQL Server (2008 R2) 提供的 NEWSEQUENTIALID() 构造生成的。此外，LastName (varchar(256)) 列上有一个常规索引。

对于每条记录，我生成了一个唯一的名称（Lastname_1 到 Lastname_200000），现在我正在处理一些查询，并且发现我的条件越严格，SQL Server 返回实际结果的速度就越慢。而且这种性能影响是相当严重的。

例如：

```
SELECT * FROM Person WHERE Lastname LIKE '%Lastname_123456%' 
```

比慢得多

```
SELECT * FROM Person WHERE Lastname LIKE '%Lastname_123%' 
```

响应时间是通过设置以下统计信息来衡量的：

```
SET STATISTICS TIME ON 
```

我可以想象这是造成的

1）由于 LIKE 子句本身，由于它以 % 开头，因此无法在该特定列上使用 inde，

2) SQL 不得不更多地考虑我的“更大的问题”。

这有什么道理吗？有什么办法可以避免这种情况吗？

编辑：要为这个问题添加一些上下文，这是“免费搜索”用例的一部分。当用户输入完整的姓氏时，我非常希望系统能够快速运行。

我应该如何使这些案例执行？我应该避免 '%xxx%' 构造而去 'xxx%' 之类的构造吗？这确实增加了很多速度，但代价是用户的一些灵活性......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:43:40.483

你是正确的数字 2，因为第二个 LIKE 必须匹配字符串中的更多字符，当 SQL 找到一个不匹配的字符时停止搜索，因此它需要更少的字符串匹配迭代来找到一个更小的搜索字符串 - 即使你获得更多结果。

至于＃1 - 如果可能，SQL 将使用索引进行 LIKE，但可能会进行索引扫描（可能是聚集索引），因为使用通配符无法进行查找。它还取决于索引中包含的内容 - 由于您正在选择所有列，因此很可能正在发生表扫描，因为您“可以”使用的索引没有覆盖您的查询（除非它使用聚集索引）

检查你的执行计划——你可能会看到一个表扫描

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:17:25.943

通常，SQL Server 不使用 LIKE 上的索引。

[这篇](http://myitforum.com/cs2/blogs/jnelson/archive/2007/11/16/108354.aspx)文章可以帮助指导你

# html - 定位特定的 li 项目

> ID：11187726
> 
> 赞同：0
> 
> 时间：2012-06-25T10:38:33.223
> 
> 标签：html, css, styling

在我的代码中，我有这样的列表项；

```
<div id="content">
<ul class="kwicks">
<li id="home"><span class="header"></span> 
```

在 CSS 中，我有这样的样式；

```
 .kwicks li{
   display: block;
   overflow: hidden;
   padding: 0;
   cursor: auto;
   } 
```

但是，我想为每个列表项使用不同的背景图像，并且我无法专门针对每个列表项。这段代码不起作用。

```
.kwicks li #home{
   background: url(../images/slider_bg2.png) no-repeat left
   } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:39:54.340

像这样删除空格`li #home`.write ：

```
.kwicks li#home{
   background: url(../images/slider_bg2.png) no-repeat left
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:41:49.697

选择器

```
.kwicks li #home {} 
```

假定以下标记结构：

```
<ul class="kwicks">
    <li>
        <span id="home" class="header"></span>
    </li>
</ul> 
```

您可能想要的是：（在 li 和#home 之间没有空格）

```
.kwicks li#home {} 
```

甚至更好（从性能的角度来看）：

```
#home {} 
```

ID 是唯一的，因此您无需使用它指定类或元素。

# actionscript-3 - Flex：如何在导航到任何其他页面之前提示警报

> ID：11187729
> 
> 赞同：0
> 
> 时间：2012-06-25T10:38:34.527
> 
> 标签：actionscript-3, apache-flex, flex3, flex4.5

如何在突出显示/导航到另一个面板/页面之前询问用户确认？

我的屏幕上有几个面板。每个面板都有许多控件。我想用确定和取消按钮提示一个消息框（或警报），并在用户单击另一个面板时进行确认。

如果用户单击“确定”按钮，则导航到另一个面板/页面。如果用户单击“取消”按钮，则删除警报并将焦点移至同一面板。

目前我已经使用面板​​的 focus_out 事件（focusOutHandler(event:FocusEvent)) 实现了这一点。我单击另一个面板中的按钮，现在我收到警报，但是当我单击警报中的“确定”时，什么也没有发生（按钮单击是事件未触发）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:34:22.470

从它的声音中，您想根据单击警报上的哪个按钮做出反应？

[如果是这种情况，请使用Alert 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Alert.html)中的内置关闭处理程序。

Alert 类有一个静态方法 show，具有以下签名：

```
public static function show(text:String = "", title:String = "", flags:uint = 0x4, parent:Sprite = null, closeHandler:Function = null, iconClass:Class = null, defaultButtonFlag:uint = 0x4, moduleFactory:IFlexModuleFactory = null):Alert 
```

`flags`通过在参数中使用管道运算符添加两个标志

`Alert.OK || Alert.CANCEL`然后在`closeHandler`参数中添加关闭处理程序，您可以检查单击了哪个按钮并做出相应反应。

像这样的东西：

警报： `Alert.show("Alert Title","Would you like to proceed?",Alert.OK || Alert.CANCEL,this,onClose)`

关闭功能：

```
private function onClose(event:CloseEvent)
{
    if (eventObj.detail==Alert.OK) 
    {
      //proceed
    }
    else
    {
      //cancel operation
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:46:14.580

根据您在此处对 James 帖子的评论，我正在发布示例，不确定您是否正在寻找相同的示例：-希望下面的代码可以给您一些想法。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.events.CloseEvent;

            private var storeNextFocusID:String = "first";
            private var storePreviousFocusID:String = "first";

            private function firstFocus():void
            {
                first.setFocus();   
                storePreviousFocusID = first.name;
            }

            private function showFirstTimeAlert(event:MouseEvent):void
            {
                if(event.currentTarget.name != storePreviousFocusID)
                {
                    Alert.show("Do you want to change Tab?","Alert",Alert.OK|Alert.CANCEL,null,closeHandler)
                    storeNextFocusID = event.currentTarget.name;
                }
            }

            private function closeHandler(event:CloseEvent):void
            {
                if(event.detail == Alert.OK)
                {
                    var focusCont:HGroup = mainContainer.getChildByName(storeNextFocusID) as HGroup;
                    focusCont.setFocus();
                    storePreviousFocusID = storeNextFocusID;
                } else
                {

                } 
            }
        ]]>
    </fx:Script>
    <s:VGroup id="mainContainer" x="50" y="50" width="400" height="300" creationComplete="firstFocus()">
        <s:HGroup  id="first" name="first" width="100%" height="100%" click="showFirstTimeAlert(event)">
            <mx:TabNavigator  width="100%" height="100%">
                <mx:VBox label="left">
                    <mx:Label text="labelPlacement = 'left'" />
                </mx:VBox>
                <mx:VBox label="right">
                    <mx:Label text="labelPlacement = 'right'" />
                </mx:VBox>
            </mx:TabNavigator>
            <s:Panel  width="100%" height="100%">
            </s:Panel>
        </s:HGroup>

        <s:HGroup  id="second" name="second" width="100%" height="100%"  click="showFirstTimeAlert(event)">
            <mx:TabNavigator width="100%" height="100%">
                <mx:VBox label="top">
                    <mx:Label text="labelPlacement = 'top'" />
                </mx:VBox>
                <mx:VBox label="bottom">
                    <mx:Label text="labelPlacement = 'bottom'" />
                </mx:VBox>
            </mx:TabNavigator>
            <s:Panel  width="100%" height="100%">
            </s:Panel>
        </s:HGroup>

    </s:VGroup>

</s:Application> 
```

# macos - SetContentView 不显示 R.layout.main 仅 glSurfaceView

> ID：11187731
> 
> 赞同：0
> 
> 时间：2012-06-25T10:38:38.670
> 
> 标签：macos, opengl, surfaceview

我有一个实现 OpenGL 的程序，glSurfaceView 位于根布局（相对布局）中。当我调用 public void onCreate(Bundle savedInstanceState) 函数时，我只从 OpenGL 中获取绘图，而没有得到我拥有的其他布局。为什么会这样？这是我的代码：

包 com.reea.red;

```
import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.View;

  public class AvatarCreator extends Activity {
/** Called when the activity is first created. */
private static int tab=3;
private GLSurfaceView glSurfaceView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    glSurfaceView = new GLSurfaceView(this);
    // set our renderer to be the main renderer with
    // the current activity context
    glSurfaceView.setRenderer(new GlRenderer(this));
    setContentView(R.layout.main);
    setContentView(glSurfaceView);
   // findViewById(R.id.linearLayout1).setVisibility(View.VISIBLE);

    //setContentView(R.layout.main);
}

public static int getTab() {
    return tab;
}

public static void setTab(int tab) {
    AvatarCreator.tab = tab;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:06:08.133

我设法使它与这段代码一起工作：

```
super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    final GridView gridview = (GridView) findViewById(R.id.gridView1);
    final ImageAdapter adapter=new ImageAdapter(this);

    mGLView = (GLSurfaceView)findViewById(R.id.glSurface); 

    mGLView.setEGLConfigChooser(8,8,8,8,16,0);

    mGLView.setRenderer(new HelloOpenGLES10Renderer(this));
    mGLView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
    mGLView.setZOrderOnTop(true);

    this.mGLView = (GLSurfaceView) this.findViewById(R.id.glSurface); 
```

# c# - MembershipService 未初始化

> ID：11187732
> 
> 赞同：1
> 
> 时间：2012-06-25T10:38:43.917
> 
> 标签：c#, membership-provider

按照微软的一些例子，我在我的 MVC 应用程序中创建了我的自定义 MembershipProvider

```
if (MembershipService == null) { MembershipService = new AccountMembershipService(new FcMembershipProvider()); } 
```

并且 web.config 配置为

```
<membership defaultProvider="FcMembershipProvider" userIsOnlineTimeWindow="15">
  <providers>
    <clear />

    <add
      name="FcMembershipProvider"
      type="Fc.Web.WebAppMVC.Models.FcMembershipProvider"
      connectionStringName="ApplicationServices"
      enablePasswordRetrieval="true"
      enablePasswordReset="true"
      applicationName="FcWebMVC"
      requiresQuestionAndAnswer="true"
      writeExceptionsToEventLog="false" />

  </providers>
</membership> 
```

问题是 Initialize 方法不会自动调用。任何提示？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:44:16.467

我认为你需要像这样使用静态来掌握你的会员提供者`Membership.Provider`：

```
if (MembershipService == null) { MembershipService = new AccountMembershipService((FcMembershipProvider)Membership.Provider); } 
```

（我在那里放了一个你可能不需要的演员表，这取决于你`AccoundMembershipService`的期望。）这样 ASP .NET 的会员系统应该为你初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:47:28.530

实现“MembershipProvider”类的类是什么？因为在您的配置文件中它是“FcMembershipProvider”，而在代码中它是 AccountMembershipService。

我创建了一个自定义会员提供程序，我只实现了“MembershipProvider”类，并像你一样添加了配置，我认为你不必添加代码。

# google-chrome-extension - Chrome 扩展事件监听器触发多次

> ID：11187733
> 
> 赞同：5
> 
> 时间：2012-06-25T10:38:46.177
> 
> 标签：google-chrome-extension

**介绍**

我的 Chrome 扩展程序有问题。它应该显示一个小的覆盖弹出窗口（在 jQuery 中创建），其中包含基于您的文本选择的 Google 搜索结果。基本上，您应该能够突出显示任何页面上的文本，右键单击它（上下文菜单），单击“搜索'选定的关键字'”，然后在同一选项卡中弹出一个小窗口作为覆盖所有搜索结果来自谷歌。

**问题**

它按描述工作，但仅是第一次。当我将突出显示另一个关键字并搜索它时，扩展仍然会记住以前的关键字并同时抛出 2 个窗口。如果我要搜索另一个关键字，它会给我 3 个窗口，其中包含 2 个以前的搜索和一个新的搜索......

我试图在后台脚本执行后删除侦听器，但没有奏效。看起来老听众在那里，他们正在回复来自内容脚本的请求。我可以以某种方式删除它们吗？

我试着说：

```
chrome.extension.onConnect.removeListener(listener); 
```

在 getClickHandler() 函数的末尾，但不起作用。

我也在想，也许后台脚本中的这段代码正在这样做，但不确定

```
return function(info, tab) { 
```

请问，您有什么建议吗？

提前谢谢了！

PS。此弹出窗口目前无法关闭，我知道这一点。但是您始终可以刷新页面以获得干净的窗口。问题是第二次我会同时打开 2 个弹出窗口……依此类推，如上所述。

清单文件：

```
{
  "name": "Easy search Accelerator",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Easily search for anything...",
  "icons": {
    "16": "icon.png",
    "48": "icon.png",
    "128": "icon.png"
  },
  "background": {
    "scripts": ["sample.js"]
  },
  "permissions": [
    "contextMenus",
    "tabs",
    "http://*/*",
    "https://*/*"
  ],
  "manifest_version": 2
} 
```

背景页面/脚本（sample.js）：

```
chrome.contextMenus.create({
    "title": 'Search for "%s"',
    "contexts":['selection'],
    "onclick": getClickHandler()
});
function getClickHandler() {
    return function(info, tab) {

    var url = "https://www.google.co.uk/search?q=" + info.selectionText;

    chrome.extension.onConnect.addListener(function listener(port) {
    console.assert(port.name == "searchQuery");
    port.onMessage.addListener(function(msg) {
        if (msg.keywordRequest == "Yes")
        port.postMessage({keyword: url});
    });
});

    chrome.tabs.executeScript(null, { file: "jquery-1.7.2.min.js" }, function() {
    chrome.tabs.executeScript(null, { file: "frame.js" });

    });
  };
}; 
```

内容脚本 (frame.js)

```
var port = chrome.extension.connect({name: "searchQuery"});
port.postMessage({keywordRequest: "Yes"});
port.onMessage.addListener(function listen(msg) {

  var test = msg.keyword;
  $("body").append("<div style=\"position: fixed;top: 20px;right: 20px;z-index: 9999;\"><iframe style=\"border:1px solid #868686;-webkit-box-shadow: 2px 2px 20px 1px rgba(0, 0, 0, 0.5);\" src=\""+ test +"\" width=328 HEIGHT=240></iframe></div>");
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T10:54:38.713

端口应该用于长期的“连接”。

[`chrome.extension.sendRequest`](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)(content script) 和[`chrome.extension.onRequest`](http://code.google.com/chrome/extensions/extension.html#method-onRequest)(background) 应在您的情况下使用（**[`sendMessage`/`onMessage`而不是`*Request`Chrome 20+](https://stackoverflow.com/questions/11811554/chrome-extension-port-error-could-not-establish-connection-receiving-end-does/11811936#11811936)**）。

这些方法可以按如下方式使用：

*   扩展初始化时：`onRequest`在后台绑定事件
*   内容脚本：火`sendRequest(request_obj, response_func)`
*   背景：收到上一个对象。做点什么，然后调用`response_func`.

* * *

PS。你真的包括jQuery，*只是*为了附加一个字符串？如果是，我强烈建议放弃 jQuery 并使用 vanilla JavaScript：

```
var div = document.createElement('div');
div.style.cssText = "position: fixed;top: 20px;right: 20px;z-index: 9999;";
div.innerHTML = "<iframe style=\"border:1px solid #868686;-webkit-box-shadow: 2px 2px 20px 1px rgba(0, 0, 0, 0.5);\" src=\""+ test +"\" width=328 HEIGHT=240></iframe>";
document.body.appendChild(div); 
```

# gridview - 直接在 GridView 上方动态添加控件

> ID：11187735
> 
> 赞同：0
> 
> 时间：2012-06-25T10:38:56.670
> 
> 标签：gridview, webforms, add

我正在接受并扩展 GridView 控件：

```
public class MightyGridView : GridView
{
    // ...
} 
```

我想在 GridView 正上方添加一些按钮：

```
 protected override void OnRowCreated(GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.Header)
        {
            Parent.Controls.AddAt(Parent.Controls.IndexOf(this) - 1, new LiteralControl("<div>"));
            Parent.Controls.AddAt(Parent.Controls.IndexOf(this) - 1, new ImageButton() { ImageUrl = _images[_imageTypes.ShowAllColumns], Width = 16 });
            Parent.Controls.AddAt(Parent.Controls.IndexOf(this) - 1, new LiteralControl("</div>")); 
```

这适用于一个微小的问题：如果我在 GridView 之前有一些 [br /]'s

```
 <asp:Button ID="Button3" runat="server" Text="Button" />
    <br /> <!-- This one! -->
    <asp:mightygridview
        ID="mightyGridView"
        runat="server"
        AllowSorting="true"
        AllowHiding="true"
        autogenerateeditbutton="true"
        OnRowEditing="mightyGridView_RowEditing"
        OnRowCancelingEdit="mightyGridView_RowCancelingEdit"
        OnRowUpdating="mightyGridView_RowUpdating">
    </asp:mightygridview> 
```

然后在按钮之后添加控件，并且
（或任何其他标记）拆分我的控件和 GridView。

一种解决方案是将我的控件插入到其中呈现 GridView 表的位置。所以 GridView 的标签被包裹在一个 . 但我认为我无法访问生成的这个，因为它没有服务器端控制（没有 runat="server"）。如果我能做到这一点，我的控件和相应的 GridView 就无法分离。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:20:25.433

还没有找到解决办法。

# html - 使用 CSS 将复选框文本与复选框对齐

> ID：11187739
> 
> 赞同：1
> 
> 时间：2012-06-25T10:39:17.150
> 
> 标签：html, css, class, checkbox, fieldset

我有一个字段集，其中有一些输入字段和一个复选框。我有一个问题，我想在复选框旁边直接有一个图例。我让它在这个链接上可见：

[http://jsfiddle.net/uUtmU/](http://jsfiddle.net/uUtmU/)

我工作并尝试使用`padding-bottom`and `margin-bottom`，但没有任何成功。

如果有人可以帮助我，我真的很感激。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:44:58.503

嘿，现在像这样**输入** `vertical-align: top;`

```
#split input[type="checkbox"] {
    vertical-align: top;
    width: 10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:07:59.847

你可以绝对定位术语文本并设置一个边距顶部以将其向下推一点，我通过添加发现

```
.tandc {
    position:absolute;
    margin-top:2px;
} 
```

希望能帮助到你

# javascript - jQuery 淡入新图像 - 然后继续循环浏览图像列表？

> ID：11187741
> 
> 赞同：4
> 
> 时间：2012-06-25T10:39:24.653
> 
> 标签：javascript, jquery, image, transition

因此，我有一个标题图像，单击该图像后，它会随着传输进行动画处理，然后淡出，然后以新图像淡入。然后我可以点击新图像，它也会动画并淡出到空白区域。如何在一系列有序图像中连续设置动画/淡入淡出 - 每次点击一个新图像，无限次？

这是我到目前为止所得到的......

```
$(document).ready(function(){
    $("#headuh").click(function(){
        $("#headimg").transition({ skewY: '30deg' },1000);
        $("#headimg").fadeOut(function() {      
        $(this).transition({ skewY: '00deg' }) .load(function() { $(this).fadeIn(); }); 
        $(this).attr("src", "/imgurl.jpg"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:45:02.137

您可以使用名为**setInterval() 的 javascript 函数；**像这样：

```
setInterval(function(){
   //this code will keep on executing on every 2 seconds.
},2000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:59:41.687

下面的代码片段并不能完全解决您的问题，但它可能会让您走上正确的轨道，因为它会随机循环播放一组 28 张带有淡入和淡出的图像。[你可以在http://moodle.hsbkob.de](http://moodle.hsbkob.de)上看到它：

```
<script src="jquery-1.4.2.min.js" type="text/javascript"></script> 
<script type="text/javascript">
//<![CDATA[
var g_first_call = true;
var g_pic_old;

$(document).ready(function() {      
    pickPic();
    setInterval("pickPic()", 7500);
});

function randomPic() {
    do {
        var pic = parseInt(28*Math.random()+1);
    } while (pic == g_pic_old);  // Don't want same pic twice 

    g_pic_old = pic;

    document.getElementById("_image_").src = "./picfolder/picno" + pic + ".jpg";
}

function pickPic() {
    if (g_first_call) {
        randomPic();
        g_first_call = false;
    }

    $("#_fadee_").fadeIn(750, function() {
        $("#_fadee_").delay(6000).fadeOut(750, randomPic);
    }); 
}
//]]>
</script>
<div id="_fadee_"><img id="_image_" alt="Image" /></div> 
```

# sql - 计算利用率的更好方法

> ID：11187743
> 
> 赞同：0
> 
> 时间：2012-06-25T10:39:27.693
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一种相当复杂（而且效率非常低）的方法来从大量时期（下面的代码）中获取利用率。

目前我运行了 8 周，返回数据需要 30 到 40 秒。

我需要定期运行 6 个月、1 年和 2 年，这显然需要大量时间。

有没有更聪明的方法来运行这个查询来减少表扫描的数量？我尝试了几种加入数据的方法，似乎都返回垃圾数据。

我试图尽可能多地评论代码，但如果有任何不清楚的地方请告诉我。

桌子尺寸：

```
[Stock]        ~12,000 records
[Contitems]    ~90,000 records 
```

为清楚起见，伪代码：

```
For each week between Start and End:
    Get list of unique items active between dates (~12,000 rows)
        For each unique item
            Loop through ContItems table (~90,000 rows)
            Return matches
        Group
    Group
Return results 
```

**编码**

```
DECLARE @WEEKSTART DATETIME; -- Used to pass start of period to search
DECLARE @WEEKEND DATETIME; -- Used to pass end of period to search
DECLARE @DC DATETIME; -- Used to increment dates
DECLARE @INT INT; -- days to increment for each iteration (7 = weeks)
DECLARE @TBL TABLE(DT DATETIME, SG VARCHAR(20), SN VARCHAR(50), TT INT, US INT); -- Return table

SET @WEEKSTART = '2012-05-01'; -- Set start of period
SET @WEEKEND = '2012-06-25'; -- Set end of period
SET @DC = @WEEKSTART; -- Start counter at first date
SET @INT = 7; -- Set increment to weeks

WHILE (@DC < @WEEKEND) -- Loop through dates every [@INT] days (weeks)
BEGIN
    SET @DC = DATEADD(D,@INT,@DC); -- Add 7 days to the counter

        INSERT INTO @TBL (DT, SG, SN, TT, US) -- Insert results from subquery into return table
        SELECT @DC, SUB.GRPCODE, SubGrp.NAME, SUM(SUB.TOTSTK), SUM(USED)

        FROM
        (
        SELECT STK.GRPCODE, 1 AS TOTSTK, CASE (SELECT COUNT(*) 
                                                           FROM ContItems -- Contains list of hires with  a start and end date
                                                           WHERE STK.ITEMNO = ContItems.ITEMNO -- unique item reference
                                                           AND ContItems.DELDATE <= DATEADD(MS,-2,DATEADD(D,@INT,@DC)) -- Hires starting before end of week searching
                                                           AND (ContItems.DOCDATE#5 >= @DC -- Hires ending after start of week searching
                                                                OR ContItems.DOCDATE#5 = '1899-12-30 00:00:00.000')) -- Or hire is still active
                                                     WHEN 0 THEN 0 -- None found return zero
                                                     WHEN NULL THEN 0 -- NULL return zero
                                                     ELSE 1 END AS USED -- Otherwise return 1

        FROM Stock STK - List of unique items

        WHERE [UNIQUE] = 1 AND [TYPE] != 4 -- Business rules
        AND DATEPURCH < @DC AND (DATESOLD = '1899-12-30 00:00:00.000' OR DATESOLD > DATEADD(MS,-2,DATEADD(D,@INT,@DC))) -- Stock is valid between selected week
        ) SUB
        INNER JOIN SubGrp -- Used to get 'pretty' names
        ON SUB.GRPCODE = SubGrp.CODE
        GROUP BY SUB.GRPCODE, SubGrp.NAME

END

-- Next section gets data from temp table
SELECT SG, SN, SUM(TT) AS TOT, SUM(US) AS USED, CAST(SUM(US) AS FLOAT) / CAST(SUM(TT) AS FLOAT) AS UTIL
FROM @TBL
GROUP BY SG, SN
ORDER BY TOT DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:25:51.153

我有两个建议。

首先，重写查询以将“select”语句从 case 语句移动到 from 子句：

```
SELECT @DC, SUB.GRPCODE, SubGrp.NAME, SUM(SUB.TOTSTK), SUM(USED)
FROM (SELECT STK.GRPCODE, 1 AS TOTSTK,
              (CASE MAX(Contgrp.cnt) -- Or hire is still active
                     WHEN 0 THEN 0 -- None found return zero
                     WHEN NULL THEN 0 -- NULL return zero
                     ELSE 1
                END) AS USED -- Otherwise return 1
        FROM Stock STK left outer join -- List of unique items
             (SELECT itemno, COUNT(*) as cnt
              FROM ContItems -- Contains list of hires with  a start and end date
              WHERE ContItems.DELDATE <= DATEADD(MS,-2,DATEADD(D,@INT,@DC)) AND -- Hires starting before end of week searching
                     (ContItems.DOCDATE#5 >= @DC OR -- Hires ending after start of week searching
                      ContItems.DOCDATE#5 = '1899-12-30 00:00:00.000'
                     )
              group by ITEMNO
             ) ContGrp
             on STK.ITEMNO = ContItems.ITEMNO
        WHERE [UNIQUE] = 1 AND [TYPE] != 4 AND -- Business rules
              DATEPURCH < @DC AND (DATESOLD = '1899-12-30 00:00:00.000' OR DATESOLD > DATEADD(MS,-2,DATEADD(D,@INT,@DC))) -- Stock is valid between selected week
       ) SUB INNER JOIN SubGrp -- Used to get 'pretty' names
       ON SUB.GRPCODE = SubGrp.CODE
 GROUP BY SUB.GRPCODE, SubGrp.NAME 
```

在这样做的过程中，我发现了一个可疑的地方。case语句在“ItemNo”级别操作，但分组是按“GrpCode”。因此，“Count(*)”实际上是在组级别返回总和。这是你的意图吗？

第二个是省去 WHILE 循环，如果你有多个星期的话。为此，您只需将 DatePurch 转换为适当的一周。但是，如果代码通常只运行一到两周，那么这种努力可能不会有太大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:56:29.537

好吧，首先替换 WHERE 子句中的 DATEADD 函数。

你已经有了

```
SET @DC = DATEADD(D,@INT,@DC); 
```

为什么不为删除日期声明另一个局部变量：

```
WHILE (@DC < @WEEKEND) -- Loop through dates every [@INT] days (weeks)
BEGIN
    SET @DC = DATEADD(D,@INT,@DC); 

    DECLARE @DeletionDate DATETIME =  DATEADD(MS,-2,DATEADD(D,@INT,@DC)); 
```

并在 case 语句中使用它：

```
CASE (SELECT COUNT(*) .... AND ContItems.DELDATE <= @DeletionDate .... 
```

而且在外部where子句中......

然后你需要确保你已经正确地索引了你的表。

# vim - 将 xargs vim 与 gnu 屏幕一起使用

> ID：11187744
> 
> 赞同：2
> 
> 时间：2012-06-25T10:39:33.730
> 
> 标签：vim, gnu-screen, xargs

我有一个奇怪的问题，如果我在 gnu 屏幕窗口中做这样的事情，该窗口开始以奇怪的方式响应

```
ls *.cpp | xargs vim 
```

从 vim 退出后，屏幕窗口不回显任何命令。它甚至不回显 CR。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T18:41:00.060

管道更改 vim 的标准输入并导致问题。试试这个（对于 bash、zsh 等）：

```
vim $(find . -name "*.cpp") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:53:37.337

怎么样`vim *.cpp`？

也许`for file in *.cpp; do vim "$file"; done`也可以工作。编辑每个文件并退出。

或者使用以下命令启动`vim`并添加所有文件：`cpp``:argadd *.cpp`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T11:42:36.220

在这样的管道中使用 Vim 时，您可能会注意到以下警告：

```
Vim: Warning: Input is not from a terminal 
```

那是 Vim 告诉你它不能像它应该的那样运行（即在交互模式下；你仍然可以通过输入 Ex 命令来处理它，在“批处理模式”下使用它）。这就解释了你在 Vim 退出后所经历的怪事。

# java - 使用扫描仪超出时间限制 - Java

> ID：11187747
> 
> 赞同：2
> 
> 时间：2012-06-25T10:39:39.613
> 
> 标签：java, java.util.scanner, time-limiting

我正在用 Java 测试这段代码，遇到了[来自编程法官的问题](https://www.jutge.org/problems/P72986_en)，我得到了一个“时间限制”错误。我猜*scanner.hasNextDouble()*东西不能以某种方式工作。

它适用于链接中显示的公共输入，但它会与私人一起引发此时间限制错误。

有什么想法可以解决这个问题吗？

```
import java.util.Scanner;
import java.text.NumberFormat;
import java.util.Locale;

class Main /*AvalPoli2*/ {
    public static void main(String[] args) {
        NumberFormat nf = NumberFormat.getNumberInstance(Locale.US); // dot sep.
        nf.setGroupingUsed(false); // don't group in groups of 3 
        nf.setMaximumFractionDigits(4); 
        nf.setMinimumFractionDigits(4);
        Scanner scanner = new Scanner(System.in);
        scanner.useLocale(Locale.US); // read doubles with dot separator
        double sum = 0.0000;
        double x = 0;
        if (scanner.hasNextDouble()) x = scanner.nextDouble();
        while (scanner.hasNextDouble()) {
            sum *= x;
            sum += scanner.nextDouble();
        }
        System.out.println(nf.format(sum));
    }
} 
```

非常感谢！^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T19:05:58.543

你必须把你的 System.in 包装起来，比如

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
in = new Scanner(br); 
```

反而，

```
in = new Scanner(System.in); 
```

# ios - 为屏幕的特定部分设置动画

> ID：11187748
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:39:48.537
> 
> 标签：ios, uiimageview

我正在创建一个基于视图的应用程序。我在这个应用程序中有一个图像，我必须剪切图像的特定部分并上下动画它。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:42:25.370

设置 imageview 框架并写入这两行 [imageview commitanimation] [imageview setanimationduration:1]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:48:44.583

您应该复制您的图像并对其进行裁剪（看看[这篇文章](http://mobiledevelopertips.com/graphics/how-to-crop-an-image.html)），然后将生成的图像放入 UIImageView 或 CALayer 并根据需要对其进行动画处理。

# python - django 中的“post_save”信号何时激活/调用？

> ID：11187753
> 
> 赞同：3
> 
> 时间：2012-06-25T10:40:05.213
> 
> 标签：python, django

保存特定模型后，我必须更新一些数据库表。我已经`@receiver(post_save`为此使用了装饰器。但是在这个装饰器函数中，值仍然没有保存在数据库中。我有一对多的关系，但是当我得到正在使用保存的当前实例时`kwargs['instance']`，它没有子对象。但是当我从外壳检查时保存后，它确实有子对象。以下是我正在使用的代码：

```
@receiver(post_save, sender=Test)
def do_something(sender, **kwargs):
    test = kwargs['instance']
    users = User.objects.filter(tags__in=test.tags.values_list('id',flat=True))
    for user in users:
        other_model = OtherModel(user=user, test=test, is_new=True)
        other_model.save() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:00:57.100

post_save 在 Model.save_base() 的末尾发送，它本身由 Model.save(() 调用。这意味着如果您覆盖模型的 save() 方法，则在调用 super(YourModel, self 时发送 post_save ).save(*args, **kw)。

如果 Tag 在 Test 上有一个 ForeignKey 并且刚刚创建了 Test 实例，那么在这个阶段您不能期望有任何与您的 Test 实例相关的 Tag 实例，因为 Tag 实例显然需要首先知道 Test 实例的 pk 以便他们可以也得救了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:54:25.950

保存父实例时调用父实例的 post_save。如果在此之后添加子级，则在调用父级 post_save 时它们将不存在。

# php - 使用 simplehtmldom 从网页获取指定的 url

> ID：11187758
> 
> 赞同：-1
> 
> 时间：2012-06-25T10:40:22.917
> 
> 标签：php

**我正在尝试构建简单的 php 爬虫**

以此目的

我正在使用 [http://simplehtmldom.sourceforge.net/获取网页常量](http://simplehtmldom.sourceforge.net/)

获取页面数据后，我得到如下页面

```
include('simplehtmldom/simple_html_dom.php');
$html = file_get_html('http://www.mypage.com');
foreach($html->find('a') as $e) 
echo $e->href . '<br>'; 
```

这完美地工作，并打印该页面上的所有链接。

我只想得到一些像

```
/view.php?view=open&id= 
```

我为此目的编写了函数

```
function starts_text_with($s, $prefix){
    return strpos($s, $prefix) === 0;
} 
```

并将此功能用作

```
include('simplehtmldom/simple_html_dom.php');
$html = file_get_html('http://www.mypage.com');
foreach($html->find('a') as $e) {
    if (starts_text_with($e->href, "/view.php?view=open&id=")))
    echo $e->href . '<br>';
} 
```

但没有任何回报。

我希望你明白我需要什么。

```
i need to print only url which match that criteria. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:52:46.660

```
include('simplehtmldom/simple_html_dom.php');
$html = file_get_html('http://www.mypage.com');
foreach($html->find('a') as $e) {
    if (preg_match($e->href, "view.php?view=open&id="))
         echo $e->href . '<br>';
} 
```

试试这个。

参考[preg_match](http://php.net/manual/en/function.preg-match.php)

# eclipse - 使用 TreeViewer 进行 JFace 数据绑定

> ID：11187759
> 
> 赞同：3
> 
> 时间：2012-06-25T10:40:40.250
> 
> 标签：eclipse, eclipse-rcp, jface

我正在尝试在我的 RCP 应用程序中构建一个视图，该视图只包含一个`TreeViewer`.

树可以包含文件夹或叶子，文件夹可以包含文件夹和叶子。当我将文件夹添加到根文件夹的后端数据模型时，UI 会自动更新，但如果我将文件夹添加到任何分支文件夹，则 UI 不会自动更新。请告诉我我的代码有什么问题。

模型类：

```
public class TreeNode extends BindableObject {

    private Folder parent;

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        super.firePropertyChange("name", this.name, this.name = name);
    }

    public Folder getParent() {
        return parent;
    }

    public void setParent(Folder parent) {
        this.parent = parent;
    }

}
public class Folder extends TreeNode {

    private List<TreeNode> children = new ArrayList<TreeNode>();

    public List<TreeNode> getChildren() {
        return children;
    }

    public void setChildren(List<TreeNode> children) {
        this.children = children;
    }

    public void add(TreeNode node){
        children.add(node);
    }

} 
```

风景 ：

```
public class ExplorerView extends ViewPart {

    private WritableList data;
    private TreeViewer treeViewer;

    public WritableList getData() {
        return data;
    }

    public TreeViewer getViewer(){
        return treeViewer;
    }

    public ExplorerView() {
        // TODO Auto-generated constructor stub
    }

    @Override
    public void createPartControl(Composite parent) {
        parent.setLayout(new FillLayout(SWT.HORIZONTAL));
        treeViewer = new TreeViewer(parent, SWT.BORDER);
        treeViewer.setContentProvider(new ObservableListTreeContentProvider(new ExplorerObservableFactory(), new ExploerTreeStructureAdvisor()));
        treeViewer.setLabelProvider(new ExplorerTreeLabelProvider());
        ArrayList<TreeNode> list = new ArrayList<TreeNode>();
        list.add(new ExplorerDataModel().getElements()[0]);
        data = new WritableList(list, TreeNode.class);
        treeViewer.setInput(data);
    }

    @Override
    public void setFocus() {

    }

} 
```

可观察工厂：

```
public class ExplorerObservableFactory implements IObservableFactory {

    @Override
    public IObservable createObservable(Object target) {
        System.out.println(target.getClass().getName());
        if(target instanceof WritableList){
            return (WritableList)target;
        }
        else if(target instanceof Folder){
            List<TreeNode> children = ((Folder)target).getChildren();
            return new WritableList(children, TreeNode.class);
        }
        return null;
    }

} 
```

树结构顾问：

```
public class ExploerTreeStructureAdvisor extends TreeStructureAdvisor {

    @Override
    public Object getParent(Object element) {
        return ((TreeNode)element).getParent();
    }

    @Override
    public Boolean hasChildren(Object element) {
        if(element instanceof Folder){
            return true;
        }else{
            return false;
        }
    }

} 
```

数据 ：

```
public class ExplorerDataModel {
    public TreeNode[] getElements() {
        Folder f1 = new Folder();
        f1.setName("Database Connections");
        Folder f11 = new Folder();
        f11.setName("Credit Test");
        TreeNode t1 = new TreeNode();
        t1.setName("bank@localhost");
        f11.add(t1);
        t1.setParent(f11);
        TreeNode t2 = new TreeNode();
        t2.setName("credit@localhost");
        f11.add(t2);
        t2.setParent(f11);
        Folder f12 = new Folder();
        f12.setName("Credit Product");
        TreeNode t3 = new TreeNode();
        t3.setName("nbcbcredit@localhost");
        f12.add(t3);
        t3.setParent(f12);
        TreeNode t4 = new TreeNode();
        t4.setName("nbcbcredit_bak@localhost");
        f12.add(t4);
        t4.setParent(f12);
        f1.add(f11);
        f11.setParent(f1);
        f1.add(f12);
        f12.setParent(f1);
        return new TreeNode[] { f1 };
    }
} 
```

测试命令处理程序：

```
public Object execute(ExecutionEvent event) throws ExecutionException {
    ExplorerView v =(ExplorerView) HandlerUtil.getActiveWorkbenchWindow(event).getActivePage().findView("com.amarsoft.dmp.explorer.explorerView");
        Folder f = new Folder();
        f.setName("ODA Flat Files");
        v.getData().add(f);

        Folder f1 = (Folder) v.getData().get(0);
        f1.setName("Database Connections (3)");

        Folder f2 = new Folder();
        f2.setName("Report Test");
        f1.add(f2);

        return null;
    } 
```

如果我执行上面的命令，添加的文件夹“ODA Flat Files”将立即出现在树中，但添加的文件夹“Report Test”将不存在，如果调用`TreeViewer#refresh()` 一切正常，但我想知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T15:23:40.380

修改您的模型不会通知您的树。刷新是告诉树数据已更改并且需要更新的一种方式。如果您在 Eclipse 中浏览 jface 查看器的 java 文档，您会发现以下引用

> 要处理结构更改，请改用刷新方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:35:44.153

看来您错误配置了数据绑定...

看看官方的片段：

*   [使用列表工厂](http://git.eclipse.org/c/e4/org.eclipse.e4.databinding.git/tree/examples/org.eclipse.jface.examples.databinding/src/org/eclipse/jface/examples/databinding/snippets/Snippet019TreeViewerWithListFactory.java)
*   [有一套工厂](http://git.eclipse.org/c/e4/org.eclipse.e4.databinding.git/tree/examples/org.eclipse.jface.examples.databinding/src/org/eclipse/jface/examples/databinding/snippets/Snippet020TreeViewerWithSetFactory.java)
*   [不仅仅是一个列表作为工厂](http://git.eclipse.org/c/e4/org.eclipse.e4.databinding.git/tree/examples/org.eclipse.jface.examples.databinding/src/org/eclipse/jface/examples/databinding/snippets/Snippet029TreeViewerMultiListProperty.java)

玩得开心！（没有任何刷新;-)）

附言。对于 EMF，只需看看这个：[http ://tomsondev.bestsolution.at/2009/06/08/galileo-emf-databinding-%E2%80%93-part-3/](http://tomsondev.bestsolution.at/2009/06/08/galileo-emf-databinding-%E2%80%93-part-3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T18:32:22.353

在你的`ExplorerObservableFactory`替换

```
... else if(target instanceof Folder){
            List<TreeNode> children = ((Folder)target).getChildren();
            return new WritableList(children, TreeNode.class);
     } 
```

依照指示

```
 else if(target instanceof Folder){                
            return BeansObservables.observeList(target, "children");
     } 
```

如果返回`WritableList`这里，contentProvider 的监听器就注册在上面（它应该注册在 Folder bean 上）

# android - java.lang.NoClassDefFoundError: com.millennialmedia.android.MMAdView

> ID：11187765
> 
> 赞同：0
> 
> 时间：2012-06-25T10:40:59.630
> 
> 标签：android, millennial-media

我在我的应用程序中使用 Millenial 媒体。我有几个使用以下代码运行的应用程序，但是现在当我尝试为新应用程序复制粘贴运行代码时，它会显示错误 `java.lang.NoClassDefFoundError: com.millennialmedia.android.MMAdView`

这就是我创建`MMAdView`对象并将其插入到我的`Linear Layout`.

```
LinearLayout myLayout = (LinearLayout) findViewById(R.id.layoutadd);
adview = new MMAdView(MyClass.this, MYAPID,"MMBannerAdBottom", 30);
myLayout.addView(adview, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
MMAdListener listener = new MyAdListener();
adview.setListener(listener);
adview.callForAd(); 
```

这是 xml 声明

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxx.xxx"
    android:versionCode="1"
    android:versionName="1.0" 
    android:installLocation="auto">

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyClass"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden|orientation"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.millennialmedia.android.MMAdViewOverlayActivity">
        </activity>
        <activity android:name="com.millennialmedia.android.VideoPlayer" 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:configChanges="keyboardHidden|orientation|keyboard" >
        </activity>
    </application>
    <uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
</manifest> 
```

我也进口了图书馆...

这件事在我的其他应用程序中有效，只是几天后它不适用于新应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:31:20.777

这通常发生在 JAR 文件未复制到设备上时。在[Millennial Media 的 wiki 页面上](http://wiki.millennialmedia.com/index.php/Android#Add_the_Millennial_Media_Library)，他们向您展示了如何将 JAR 添加到您的项目中。选择库后（第 9 个要点），但在点击“确定”之前，转到“订购和导出”选项卡并确保选中 MMadView.jar 旁边的复选框。默认情况下，它不是。按 OK 并尝试运行您的程序。

# pdf - 在 ISO 19005 下转换为 pdf/a-1

> ID：11187766
> 
> 赞同：3
> 
> 时间：2012-06-25T10:41:01.197
> 
> 标签：pdf, pdf-generation

我正在寻找一种 API，它可以让我将`.doc`文件转换`.pdf`为 PDF/A-1。我希望这使我的文件符合 ISO 19005 规范。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:35:21.440

我不知道有一个（像啤酒一样免费，或者像 Liberty 一样免费）**API**可以让您以可靠、易于使用和经过验证的方式做到这一点。

Ghostscript 作为命令行工具或多或少会起作用。请参阅以下答案：

*   "[**如何使用 Ghostscript DLL 将 PDF 转换为 PDF/A**](https://stackoverflow.com/a/2982233/359307) "
*   “[**如何使用 Ghostscript 将 PDF 转换为 PDF/A 或 PDF/X？**](https://stackoverflow.com/a/3483801/359307) ”
*   “[**以编程方式创建可打印的 PDF/X（带有出血框、修剪框、媒体框等）？**](https://stackoverflow.com/a/3491668/359307) ”

生成的 PDF 将声称是 PDF/A-1***b***（并且 Adob​​e Reader 将显示有关此的提示）。但是，您仍然无法 100% 地验证 PDF 是否真正符合标准规范。

***如果您的业务依赖于一丝不苟的匹配，那么您至少应该使用商业专业的 PDF/A 验证工具完成一些测试，然后再在生产中切换到此方法。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:29:55.583

对于 PDF 文件，我建议您尝试[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)。它能够将 PDF 文档转换为 PDF/A-1b 文档。

这是该任务的示例：

```
public static void convertToPdfA(string input, string output)
{
    using (PdfDocument pdf = new PdfDocument(input))
    {
        pdf.SaveOptions.ProducePdfA = true;
        pdf.Save(output);
    }
} 
```

免责声明：我为图书馆的供应商工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:32:08.483

如果你的目标是 Windows 操作系统并且可以考虑商业库，那么你可以试试[Amyuni PDF Converter](http://www.amyuni.com/en/developer/pdfconverter/features.html)。

Amyuni PDF Converter 是一个虚拟打印机驱动程序，您可以使用 COM/ActiveX 接口或 .Net 程序集从您的应用程序以编程方式控制它；您可以将其配置为 PDF/A 输出。

*通常的免责声明适用*

# php - Perl 的 encrypt_hex 的 PHP 等价物

> ID：11187768
> 
> 赞同：0
> 
> 时间：2012-06-25T10:41:14.090
> 
> 标签：php, perl, cryptography

使用 PHP，我正在尝试模拟以下 Perl 功能：

```
#!/usr/bin/perl
use DBI;
use Crypt::ECB qw(encrypt decrypt encrypt_hex decrypt_hex);
$code = encrypt_hex($key, "Blowfish", $secret); 
```

我的结果没有产生任何接近的结果，例如：

```
$code = crypt($key, '$2a$07$'."$secret$"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T16:04:20.260

半个答案：

```
Crypt::ECB::encrypt_hex('Some_key', 'Blowfish', '12345678') 
```

应该相当于

```
unpack('H*', mcrypt_ecb('BLOWFISH', 'Some_key', '12345678', MCRYPT_ENCRYPT)) 
```

不过，我无法让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:06:51.620

我花了一些时间才弄清楚。@daxim 对 mcrypt 的使用让我走上了尝试 mcrypt 库的道路。

```
$td = mcrypt_module_open('blowfish', '', 'ecb', '');
$iv = mcrypt_create_iv(mcrypt_enc_get_iv_size($td), MCRYPT_RAND);
mcrypt_generic_init($td, $key, $iv);
$encrypted_data = mcrypt_generic($td, $secret);
mcrypt_generic_deinit($td);
mcrypt_module_close($td);

$unpacked = unpack("H*", $encrypted_data);
$hexed = implode($unpacked); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T10:45:42.003

我不知道那个 PERL 函数，但也许[PHP 哈希函数](http://php.net/function.hash.php)可以满足您的要求：

```
string hash ( string $algo , string $data [, bool $raw_output = false ] ) 
```

# c# - 网格视图中的 asp.NET 下拉列表 - 获取所选值

> ID：11187780
> 
> 赞同：0
> 
> 时间：2012-06-25T10:42:07.673
> 
> 标签：c#, asp.net

我有一个在网格视图中使用的状态下拉列表，用户可以在编辑网格视图中的行时选择他们想要的列表项。问题是当前实现没有检索选定的值，而只是检索默认/加载的值。

这是网格视图的定义：

```
 <asp:GridView ID="applicationGrid" runat="server"  Width="95%"
        AutoGenerateEditButton="True" 
        AutoGenerateColumns="False" 
        ShowFooter="True"
        CellSpacing="10" 
        HeaderStyle-HorizontalAlign="Left" 
        ItemStyle-HorizontalAlign="Left"
        OnRowUpdating="applicationGrid_RowUpdating" 
        OnRowEditing="applicationGrid_RowEditing" 
        OnRowCancelingEdit="applicationGrid_RowCancelingEdit"
        AutoPostBack="true" > 
```

这是下拉列表将在编辑时出现的列的定义：

```
 <asp:TemplateField HeaderText="Status">
                <ItemTemplate>   
                    <asp:Label ID="StatusDescription" runat="server" Text='<%# Eval("STATUS_DESCRIPTION") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="StatusDescriptionList" runat="server" DataTextField="status_description"
                            DataValueField="application_status_code" OnLoad="DropDownLoadEdit">
                       <asp:ListItem Text="Status:" Value="default"></asp:ListItem>
                    </asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField> 
```

这是处理更新场景的代码：

```
 protected void applicationGrid_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = applicationGrid.Rows[e.RowIndex];
        applicationGrid.EditIndex = -1;

        Label applicationCodeLabel = row.FindControl("AppID") as Label;
        TextBox applicationNameTextBox = row.FindControl("AppNameEdit") as TextBox;
        TextBox applicationURLTextBox = row.FindControl("AppURLEdit") as TextBox;
        DropDownList applicationStatusDropDownList = row.FindControl("StatusDescriptionList") as DropDownList;

        int applicationCode = Convert.ToInt32(applicationCodeLabel.Text);
        string applicationName = applicationNameTextBox.Text;
        string applicationURL = applicationURLTextBox.Text;
        int applicationStatus = Convert.ToInt32(applicationStatusDropDownList.SelectedValue.ToString());
        //string applicationStatus2 = applicationStatusDropDownList.SelectedItem.Value;
        //string applicationStatus3 = applicationStatusDropDownList.SelectedItem.Text;

        application.UpdateApplication(applicationCode, applicationName, applicationURL);
        PopulateApplications();
    } 
```

一切正常，但所选值不是加载的值，也不是用户选择的值。因此问题是从列表中获取选定的值。什么需要改变，为什么？

```
 protected void applicationGrid_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        GridViewRow row = applicationGrid.Rows[e.RowIndex];
        applicationGrid.EditIndex = -1;

        Label applicationCodeLabel = row.FindControl("AppID") as Label;
        TextBox applicationNameTextBox = row.FindControl("AppNameEdit") as TextBox;
        TextBox applicationURLTextBox = row.FindControl("AppURLEdit") as TextBox;
        DropDownList applicationStatusDropDownList = row.FindControl("StatusDescriptionList") as DropDownList;

        int applicationCode = Convert.ToInt32(applicationCodeLabel.Text);
        string applicationName = applicationNameTextBox.Text;
        string applicationURL = applicationURLTextBox.Text;
        int applicationStatus = Convert.ToInt32(applicationStatusDropDownList.SelectedValue.ToString());
        //string applicationStatus2 = applicationStatusDropDownList.SelectedItem.Value;
        //string applicationStatus3 = applicationStatusDropDownList.SelectedItem.Text;

        application.UpdateApplication(applicationCode, applicationName, applicationURL);
        PopulateApplications();
    } 
```

编辑：添加我的填充方法：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            try
            {
                PopulateApplications();
            }
            catch (Exception exception)
            {
                throw exception;
            }
        }
    }

    private void PopulateApplications()
    {
        DataTable reader = application.GetApplicationList();
        applicationGrid.DataSource = reader;
        applicationGrid.DataBind();
        applicationGrid.AllowSorting = true;
    }

    protected void DropDownLoadEdit(object sender, EventArgs e)
    {        
            DataTable statusTable = application.GetStatusList();

            DropDownList dropdown = sender as DropDownList;
            dropdown.DataSource = statusTable;
            dropdown.DataTextField = "status_description";
            dropdown.DataValueField = "application_status_code";
            dropdown.DataBind()
    } 
```

更新#2：我试图在类中填充一个用于所选索引的静态变量。这将在按下更新时使用。但是，这仍然是获取下拉列表的原始值，而不是选定的值。

这是方法：

```
 protected void StatusDescriptionList_SelectedIndexChanged(object sender, System.EventArgs e)
    {
        DropDownList ddl = (DropDownList)sender;
        selectedValue = Convert.ToInt32(ddl.SelectedValue.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:07:39.383

问题可能是回邮。

从下拉菜单中选择项目后，页面将回发您选择的值消失。

来解决这个问题。绑定页面内的下拉列表是回发或使用 Ajax 更新面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:57:49.930

`DropDownLoadEdit`无论转换是否是回发，您是否都在重新填充列表？如果是这样，列表将在读取其值之前重新填充，并在您的方法有机会读取该值之前设置为默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T06:12:55.287

@Ryan，你有没有做过这个' AutopostBack="True"

```
<asp:DropDownList ID="StatusDescriptionList" runat="server" AutopostBack="True" DataTextField="status_description"
                            DataValueField="application_status_code" OnLoad="DropDownLoadEdit">
                       <asp:ListItem Text="Status:" Value="default"></asp:ListItem>
                    </asp:DropDownList> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T06:37:36.553

```
<asp:DropDownList ID="StatusDescriptionList" runat="server" DataTextField="status_description"
                        DataValueField="application_status_code" SelectedValue="application_status_code" AutopostBack="True" OnLoad="DropDownLoadEdit">
                   <asp:ListItem Text="Status:" Value="default"></asp:ListItem>
                </asp:DropDownList> 
```

# sencha-touch - 链接到 Tab.Panel 视图中的第二个 tabItem

> ID：11187782
> 
> 赞同：0
> 
> 时间：2012-06-25T10:42:18.083
> 
> 标签：sencha-touch, extjs, sencha-touch-2

是否可以链接到 tab.Panel 视图并选择第二个或第三个（不是第一个）tabItem？

目前我有一个链接到 tab.Panel 的视图，如下所示：

```
Ext.define("app.view.MyView", {
    extend: 'Ext.tab.Panel',
    xtype: 'myview',
    alias: 'widget.myview',
    requires: [
        'Ext.TitleBar',
        'dev.view.1',
        'dev.view.2',
        'dev.view.3',
        'dev.view.4',
        'dev.view.5',
    ],
    config: {
        tabBarPosition: 'bottom',
        title: 'My Title',
        ui: 'neutral',

        items: [
            {
                xtype: 'xtype-of-view-1'
            },
            {
                xtype: 'xtype-of-view-2'
            },
            {
                xtype: 'xtype-of-view-3'
            },
            {
                xtype: 'xtype-of-view-4'
            },
            {
                xtype: 'xtype-of-view-5'
            }
        ]
    }
}); 
```

截至目前，当我在视图中加载时，“xtype-of-view-1”被设置为活动选项卡。但是是否可以在 tab.Panel 视图中加载但同时激活并按下其他选项卡之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:04:11.503

```
Ext.define("app.view.MyView", {
    extend: 'Ext.tab.Panel',
    xtype: 'myview',
    alias: 'widget.myview',
    requires: [
        'Ext.TitleBar',
        'dev.view.1',
        'dev.view.2',
        'dev.view.3',
        'dev.view.4',
        'dev.view.5',
    ],

    config: {
        tabBarPosition: 'bottom',
        title: 'My Title',
        ui: 'neutral',

        items: [
            {
                xtype: 'xtype-of-view-1'
            },
            {
                xtype: 'xtype-of-view-2'
            },
            {
                xtype: 'xtype-of-view-3'
            },
            {
                xtype: 'xtype-of-view-4'
            },
            {
                xtype: 'xtype-of-view-5'
            }
        ]
    },
    initialize: function() {
         var items = this.getItems(),
             itemIdx,
             Ext.each(items, function(item, idx) {
                 if (item.xtype == 'xtype-of-view-2') {
                     itemIdx = idx;
                     return false;
                 }
             });
             this.setActiveItem(itemIdx);
    }
}); 
```

您还可以观看精彩的视频指南[http://docs.sencha.com/touch/2-0/#!/video/tabs-toolbars](http://docs.sencha.com/touch/2-0/#!/video/tabs-toolbars)

您必须向您的应用程序添加一个控制器。在控制器中添加参考

```
refs: {
    myview: 'myview',
    list: 'anotherview list'
},
control : {
    list: {
        itemtap: 'onListItemTap'
    }
},
onListItemTap: function (ct) {
    var myview = this.getMyview();
    myview.setActiveItem(1)
} 
```

如果您不了解 sencha touch 中的 MVC，请阅读 sencha 教程。例如。[http://docs.sencha.com/touch/2-0/#!/guide/controllers](http://docs.sencha.com/touch/2-0/#!/guide/controllers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:19:21.183

你可以将bello配置添加到`tab.panel`

```
activeItem :2 
```

对于第一个激活的第三个项目

# c# - 如何在 C# 桌面应用程序中删除线程中止错误的异常

> ID：11187786
> 
> 赞同：1
> 
> 时间：2012-06-25T10:42:46.787
> 
> 标签：c#, multithreading, desktop

我想在我的 C# 桌面应用程序中删除或阻止异常。当我的项目加载其启动画面时发生此问题..

启动画面调用的代码是

```
private void SplashForm()
        {
            Splash newSplashForm = new Splash();
            newSplashForm.ShowDialog();
            newSplashForm.Dispose();
        } 
```

和

```
 public MainForm(string filearg) {
             Thread t1 = new Thread(new ThreadStart(SplashForm));
             t1.Start();
             Thread.Sleep(TimeSpan.FromSeconds(5)); // The amount of time we want our splash form visible
             t1.Abort();
             Thread.Sleep(7000);
} 
```

我怎样才能删除这个异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:45:36.733

> 我怎样才能删除这个异常
> 
> ```
>  t1.Abort(); 
> ```

不要调用产生该异常的东西。使用更好的线程间通信事件协同关闭工作线程。

在这种情况下，调用`Control.BeginInvoke`实例`Splash`以调用其`Close`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:45:02.240

```
 private void SplashForm()
    {
        try
        {
            Splash newSplashForm = new Splash();
            newSplashForm.ShowDialog();
            newSplashForm.Dispose();
        }
        catch (System.Threading.ThreadAbortException)
       {
            System.Threading.Thread.ResetAbort();
       }
    } 
```

如果您只想忽略线程中的异常，则只需使用空的 catch 块

```
 private void SplashForm()
    {
        try
        {
            Splash newSplashForm = new Splash();
            newSplashForm.ShowDialog();
            newSplashForm.Dispose();
        }
        catch { }
    } 
```

# css - 如何覆盖现有的 CSS 让孩子 1 有固定的宽度和孩子 有父母的剩余宽度吗？

> ID：11187787
> 
> 赞同：6
> 
> 时间：2012-06-25T10:42:53.230
> 
> 标签：css

我正在尝试为我们的 StackExchange 网站编写 Firefox 时尚的 CSS（**全屏宽度样式）。**

在标记的问题列表页面（例如：[https](https://stackoverflow.com/questions/tagged/java) ://stackoverflow.com/questions/tagged/java ）中，HTML 如下所示

```
<div class='question-summary'>
    <div class='statscontainer'>
        <div>n votes</div>
        <div>n answers</div>
        <div>n views</div>
    </div>
    <div class='summary'>
        <h3>Question title</h3>
        <div>question excerpt ...</div>
        <div>tag1 tag2 tagN </div>
    </div>
</div> 
```

原始 CSS 在父/子 1/子 2 上使用固定宽度

```
<style>
    .question-summary
    {
        float: left;
        width: 730px;
        background-color: silver;
    }
    .statscontainer
    {
        float: left;
        width: 86px;
        margin-right: 8px;
        background-color: gray;
    }
    .summary
    {
        float: left;
        width: 635px;
        background-color: lightgray;
    }
</style> 
```

现在我尝试覆盖 CSS 以使其**适合全屏宽度**

```
 .question-summary
    {
        float: left;
        width: 100% !important;    /* parent: full screen width */
        background-color: silver;
    }
    .statscontainer
    {
        float: left;
        width: 86px;    /* child 1: fixed width */
        margin-right: 8px;
        background-color: gray;
    }
    .summary
    {
        float: left;
        /*
        width: 80% !important;   <--- how to let child 2 has remaining width ?
        left: 95px;
        right: 0px;
        */
        background-color: lightgray;
    } 
```

问题是，如何让孩子 2 有剩余的宽度？我知道在使用`<table>`控制布局时，这很容易。

```
<table style='width:100%'>
    <tr>
        <td bgcolor='gray' style='width:80px'>fixed width</td>
        <td bgcolor='lightgray'>automatically has remaining width</td>
    <tr>
</table> 
```

**编辑**

根据@sandeep 和@MrLister 的回答，它应该覆盖3 个CSS 属性来完成这项工作

```
.question-summary .summary {
    width: auto !important;      /* original = width: 735px; */

    float: none !important;      /* original = float: left; set to 'none' to get the 'overflow' property work */
    overflow: hidden !important; /* original = not set, default is visible */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T10:45:37.003

您应该将宽度重置为其初始值，即`auto`.

编辑：
正如您所指出的，为了`width:auto`工作，您还应该重置`float`属性，否则宽度不会占用剩余的可用空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T10:45:16.663

像这样写：

```
.question-summary
    {
        background-color: silver;
        overflow:hidden;
    }
    .statscontainer
    {
        float: left;
        width: 86px;    /* child 1: fixed width */
        margin-right: 8px;
        background-color: gray;
    }
    .summary
    {
        overflow:hidden;
        background-color: lightgray;
    } 
```

检查这个[http://jsfiddle.net/pGu42/](http://jsfiddle.net/pGu42/)

# git - 在 git repo 上运行 post-receive 挂钩后在服务器上运行 Perl 脚本

> ID：11187791
> 
> 赞同：0
> 
> 时间：2012-06-25T10:43:14.633
> 
> 标签：git

我有三台机器：“devel”、“repo”和“server”。`git push`在更改存储库之前，我需要在开发机器上做一些整理工作。我称之为“预检”。然后，我去服务器，`git pull`然后我需要做更多的家务来准备一切以更新和重新启动 Web 应用程序。我将服务器上的这种管理称为“postflight”。

我可以通过运行 Perl 脚本来进行预检，该脚本实际上进行预检内务处理，然后执行 git add、commit、push 舞蹈。

我想自动化另一端的过程。也就是说，当 repo 收到更新时，我想运行更新服务器。在本地 repo 上，这是一个也有 repo 的“服务器”，我可以通过下面的`post-receive`钩子来做到这一点

```
GIT_WORK_TREE=/path/to/directory git checkout -f 
```

我的问题：

1.  如何运行`post-receive`挂钩（或其他方式）来自动更新服务器上恰好是另一台机器的目录？和

2.  服务器更新后如何运行 postflight Perl 脚本？

    更新：我`post-checkout`在“测试”上创建了一个钩子。钩子是我想要在“test”从“repo”接收到代码的更新副本后执行的 Perl 脚本。但是，Perl 脚本永远不会运行。我也尝试过将钩子重命名为，`post-merge`但也没有任何乐趣。如何确保客户端上的钩子在更新时运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:08:13.787

**假设你的下一跳是 github；这是触发器应该看起来像**

**发布接收挂钩代码**

```
    #!/bin/bash -x

    GIT_DIR=$(目录名 $(目录名 $(readlink -f $0)) )
    git push --mirror /home/mvaidya/mirroring_test/backup.git
    #above URL 这应该是 github

```

# url-routing - asp.net 4.0 应用程序中需要 ASP.NET URL 路由帮助

> ID：11187794
> 
> 赞同：1
> 
> 时间：2012-06-25T10:43:22.147
> 
> 标签：url-routing, asp.net-4.0

我将在我的 asp.net4.0 应用程序中实现路由功能，并遵循给定的链接：

[**URL-路由**](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

如果应用程序的编号有限，这很好。页面，但我的应用程序有很多页面。所以我必须编写代码 [ routes.MapPageRoute("","",""); ] 很多次。我们可以通过循环任何集合类或任何其他方法来映射所有页面吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:52:54.870

如果您的 url 和文件结构有标准模式，您也可以在映射的 url 中使用占位符

例如。如果您可以将每个**“{controller}/{action}/{id}”**映射到**“/Pages/{controler}/{action}.aspx”**

例如，我构建了一个具有此文件夹结构的站点

![项目文件夹结构](../Images/f304ec37311a4e688835df8b10406f33.png)

在根文件夹下有我所有页面所在的 Views 文件夹。在 Views 文件夹下，每个“控制器”都有一个子文件夹（webforms 中没有控制器，但我在这里遵循 MVC 约定） 在控制器子文件夹下，有代表不同操作的 aspx 页面

每个控制器的 aspx 页面名称都相同（“Index.aspx”、“Add.aspx”、“Edit.aspx”等）

所以我可以有一个通用的映射规则

```
routes.MapPageRoute("GeneralAction", "{controler}/{action}/{id}", "~/Views/{controler}/{action}.aspx"); 
```

只要文件夹结构遵循这种模式，我就不需要为不同的页面设置不同的规则

现在

```
"/Patient/Add" will map to "~/Views/Patient/Add.aspx"
"/Incident/Add" will map to "~/Views/Incident/Add.aspx"
"/Patient/Edit/31" will map to "~/Views/Patient/Edit.aspx" (with id=31) 
```

等等，都符合上述这一规则。

当然，如果您想覆盖此规则，您可以在定义此规则之前定义更具体的路线。

# performance - CCSpriteBatchNode ：动画是否有性能提升

> ID：11187800
> 
> 赞同：0
> 
> 时间：2012-06-25T10:44:03.870
> 
> 标签：performance, cocos2d-iphone

当纹理包含单个动画的帧时，通过 CCSpriteBatchNode 创建动画是否有任何性能提升？我猜你永远不会同时绘制两个精灵，并且不涉及真正的“批处理”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:22:44.940

CCSpriteBatchNode 允许您绘制更多更快的大量精灵。因此，如果只是带有帧动画的单个精灵，则应该没有区别。

# php - Symfony 1.4 和 Nginx 与 sfDoctrineGuardPlugin 配置问题

> ID：11187801
> 
> 赞同：1
> 
> 时间：2012-06-25T10:44:04.260
> 
> 标签：php, symfony1, nginx, symfony-1.4

尝试在 Ubutnu Server + Nginx + php-fpm 上安装 Symfony 1.4.11 应用程序

Nginx 配置是从这里应用的：[http](http://wiki.nginx.org/Symfony) ://wiki.nginx.org/Symfony 请参阅部分：“从生产系统推广并经过测试的安全 Symfony 1.4 配置”

应用程序的公共部分运行良好，但在登录时 - 我收到一条错误消息：

“ **糟糕！找不到页面服务器返回了 404 响应。** ”

在 nginx 错误日志中，我可以看到：

"**解析 URL 后的空模块和/或操作 "/backend_dev.php/login" (/)** "

“ **sfDoctrineGuardPlugin** ” 用于身份验证，可以查看配置下的所有路由：

```
$ php symfony app:routes backend
...
sf_guard_signout               ANY    /logout
sf_guard_signin                ANY    /login
... 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:56:40.473

以下配置对我有用：

```
location ~ \.php($|/) {
    set  $script     $uri;
    set  $path_info  "";

    if ($uri ~ "^(.+\.php)(/.*)") {
        set  $script     $1;
        set  $path_info  $2;
    }

    include /etc/nginx/fastcgi_params;

    fastcgi_pass   127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME $document_root$script;
    fastcgi_param SCRIPT_NAME $script;
} 
```

# delphi - Delphi 组件安装实用程序控制台应用程序

> ID：11187802
> 
> 赞同：1
> 
> 时间：2012-06-25T10:44:14.133
> 
> 标签：delphi, registry, components, installation, delphi-7

好吧，我很难过。我正在为 Smart Install Maker 编写一个安装支持插件，它将为我安装一些组件-AlphaControls :)

附加组件是一个控制台应用程序。但是由于某种原因 [在代码中] 将包添加到“已知包”注册表位置，它想要添加一个额外的注册表项，即使数组大小仅设置为 3。它正在尝试添加一个 .DPK 文件，即使该数组是为 .BPL 设置的。苏……什么鬼？？？？它可以正常工作，除了它试图添加的最后一个唠叨位。编译大小约为97/98k，优化压缩后缩小到48k左右

所以我想我的问题是，谁能发现我似乎忽略的错误？是的，我知道 - INNO SETUP，但是...我已经把钱花在了 Smart Install Maker 上，所以我必须使用它。
没有编译错误，只是向注册表添加了一个额外的非 .bpl 文件

代码如下...

```
{Smart Install Maker installation support for components}
{for Delphi 7.0 environment only}
program pakghlp;

{$APPTYPE CONSOLE}

uses
  Windows,
  SysUtils,
  Classes,
  Registry;

var  SPath,
   BPLPath,
   IDERoot,
   DPKName: string;

const
 BaseName = 'AlphaControls';

 PackageRoot = 'AlphaControls\';

 DPKFiles: array[1..5]
  of string = ('acntD7_R.dpk',
               'acntD7.dpk',
               'aceD7_R.dpk',
               'aceD7.dpk',
               'AlphaDB7.dpk');

 DPKArraySize = 5;

 BPLFiles: array[1..3]
 of string = ('aceD7.bpl',
              'acntD7.bpl',
              'AlphaDB7.bpl');

 BPLDetails: array[1..3]
 of string = ('AlphaControls extra',
              'AlphaControls',
              'AlphaControls DB-aware pack');

 BPLFileQty = 3;

  LookFor: array[1..2] of string = ('*.dcp','*.bpl');
  LookForQty = 2;

  RegPath = ';$(DELPHI)\Components\AlphaControls';

procedure InitVariables;
var
    RegKey: TRegistry;
 TargetKey: string;
   LibPath: string;
begin
 RegKey:= TRegistry.Create;
   try
     RegKey.RootKey := HKEY_CURRENT_USER;
     TargetKey:= 'Software\Borland\Delphi\7.0';
     if RegKey.OpenKeyReadOnly(TargetKey) then
       begin
        IDERoot:= RegKey.ReadString('RootDir');
        RegKey.CloseKey;

        TargetKey:= 'Software\Borland\Delphi\7.0\Library';
        RegKey.OpenKeyReadOnly(TargetKey);
        SPath:= RegKey.ReadString('Search Path');
        LibPath:= RegKey.ReadString('Package DPL Output');
        RegKey.CloseKey;

        LibPath:= StringReplace(LibPath,'$(DELPHI)','',[rfIgnoreCase]);
        BPLPath:= IDERoot + LibPath + '\';
       end;
    finally
     RegKey.Free;
    end;
end;

procedure GetListing(const SearchFor: String; ImportList:TStringList);
var SrchResult : TSearchRec;
begin
if FindFirst(SearchFor, faAnyFile, SrchResult) = 0 then
  begin
    repeat
     ImportList.Add(SrchResult.name);
    until FindNext(SrchResult) <> 0;
    FindClose(SrchResult);
  end;
end;

procedure GetBaseNames(Listing: TStringList);
var TempList: TStringList;
           i: integer;
    BaseName: string;
begin
  TempList:= TStringList.Create;
  TempList.Delimiter:= ';';
  TempList.DelimitedText:= SPath;
  Listing.Clear;
  for i:= 0 to TempList.Count - 1 do
    begin
    BaseName:= TempList[i];
    StringReplace(BaseName,'$(DELPHI)','X:\Dummy\Folder',[rfIgnoreCase]);
    Listing.Add(ExtractFileName(BaseName));
    end;
  TempList.Free;
end;

function AlreadyExists: boolean;
var CheckList: TStringList;
            i: integer;
    Installed: boolean;
begin
  CheckList:= TStringList.Create;
  GetBaseNames(CheckList);

  for i:= 0 to CheckList.Count -1 do
   begin
     if CheckList[i] = BaseName
      then Installed:= true;
       if Installed = true then break;
     Installed:= false;
   end;
CheckList.Free;
Result:= Installed;
end;

procedure ProcessIDE(InstallType: integer);
var RegKey: TRegistry;
  TempList: TStringList;
       i,j: integer;
  NewSPath,
  RegName,
  RegValue,
  DelEntry: string;
begin
RegKey:= TRegistry.Create;
  case InstallType of

    0:  begin {-uninstall}
         TempList:= TStringList.Create;
         TempList.Delimiter:= ';';
         TempList.DelimitedText:= SPath;
         DelEntry:= copy(RegPath,2,Length(RegPath));
         for i:= 0 to TempList.Count - 1 do
          begin
            if TempList[i] = DelEntry
            then
             begin
              Templist.BeginUpdate;
              Templist.Delete(i);
              TempList.EndUpdate;
             end;
          end;
          NewSPath:= TempList.DelimitedText;
          try
            RegKey.RootKey:= HKEY_CURRENT_USER;
            RegKey.OpenKey('Software\Borland\Delphi\7.0\Library',false);
            RegKey.WriteString('Search Path',NewSPath);
            RegKey.CloseKey;

            RegKey.OpenKey('Software\Borland\Delphi\7.0\Known Packages',false);
            for i:= 0 to BPLFileQty do
              begin
                RegName:= BPLPath + BPLFiles[i];
                RegKey.DeleteValue(RegName);
              end;
          finally
            RegKey.CloseKey;
          end;
         TempList.Free;
        end;

    1:  begin {-install}
          SPath:= SPath + RegPath;
          try
            RegKey.RootKey:= HKEY_CURRENT_USER;
            RegKey.OpenKey('Software\Borland\Delphi\7.0\Library',false);
            RegKey.WriteString('Search Path',SPath);
            RegKey.CloseKey;

            RegKey.OpenKey('Software\Borland\Delphi\7.0\Known Packages',false);
            for j:= 0 to BPLFileQty do
              begin
                RegName:= BPLPath + BPLFiles[j];
                RegValue:= BPLDetails[j];
                RegKey.WriteString(RegName,RegValue);
              end;
          finally
          RegKey.CloseKey;
          end;
        end;
  end;
RegKey.Free;
end;

procedure CompilePackage(PackageName: String; Wait: Boolean);
var
  StartInfo : TStartupInfo;
  ProcInfo : TProcessInformation;
  CreateOK : Boolean;
begin
  FillChar(StartInfo,SizeOf(TStartupInfo),#0);
  FillChar(ProcInfo,SizeOf(TProcessInformation),#0);
  StartInfo.cb := SizeOf(TStartupInfo);
  CreateOK := CreateProcess(nil, PChar(PackageName), nil, nil,False,
              CREATE_NEW_PROCESS_GROUP+NORMAL_PRIORITY_CLASS,
              nil, nil, StartInfo, ProcInfo);
  if CreateOK then
    begin
      if Wait then
        WaitForSingleObject(ProcInfo.hProcess, INFINITE);
    end
  else
    begin
      WriteLN('Unable to compile: ' + DPKName);
     end;
  CloseHandle(ProcInfo.hProcess);
  CloseHandle(ProcInfo.hThread);
end;

procedure ProcessPackages;
var Package: string;
          i: integer;
const DCC32 = 'DCC32 ';
begin
  for i:= 1 to DPKArraySize do
  begin
    DPKName:= ExpandFileName(GetCurrentDir + '\..')
            + '\' + PackageRoot + DPKFiles[i];
    Package:= DCC32 + '"' + DPKName + '"';
    CompilePackage(Package,true);
    Sleep(500);
  end;
end;

procedure ProcessFiles(InstallType: integer);
var TempList: TStringList;
    MoveList: TextFile;
         i,j: integer;
    FileFrom,
      FileTo,
   ParentDir,
  SearchType: string;
begin
  case InstallType of

    0:  begin {-uninstall}
          AssignFile(MoveList,'pakghlp.dat');
          Reset(MoveList);
            while not eof(MoveList) do
              begin
                readLn(MoveList,FileFrom);
                if FileExists(FileFrom)
                then DeleteFile(PChar(FileFrom));
              end;
          CloseFile(MoveList);
          DeleteFile(PChar('pakghlp.dat'));
        end;

    1:  begin {-install}
        ProcessPackages;
          if FileExists('pakghlp.dat') then DeleteFile(PChar('pakghlp.dat'));
           AssignFile(MoveList,'pakghlp.dat');
           Rewrite(MoveList);
           ParentDir:= ExpandFileName(GetCurrentDir + '\..') + '\';
           TempList:= TStringList.Create;
          for i:= 1 to LookForQty do // file extension types
            begin
              SearchType:= ParentDir + PackageRoot + LookFor[i];
              GetListing(SearchType,TempList);
              for j:= 0 to Templist.Count - 1 do
                begin
                  FileFrom:= ParentDir + PackageRoot + TempList[j];
                  FileTo:= BPLPath + TempList[j];
                  CopyFile(PChar(FileFrom),PChar(FileTo),False);
                  DeleteFile(PChar(FileFrom));
                  WriteLn(MoveList,FileTo);
                end;
            end;
          CloseFile(MoveList);
        end;
  end;
TempList.Free;
end;

procedure InstallComponents;
begin
  InitVariables;
  if AlreadyExists then ProcessFiles(1) // refresh corrupt .dcu's.
  else
    begin // didn't previously exist
      ProcessFiles(1);
      ProcessIDE(1);
    end;
end;

procedure RemoveComponents;
begin
  InitVariables;
  ProcessFiles(0);
  ProcessIDE(0);
end;

{ ----- Console Application Begins Here ------- }
begin
  if ParamCount =  0 then exit;

  if ParamStr(1) = '-install'
    then InstallComponents;

  if ParamStr(1) = '-uninstall'
    then RemoveComponents

  else exit; // garbage trap
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:25:42.260

您发出的问题似乎与用于迭代 BPLFiles 数组的索引有关。这是基于 1 的索引，而您使用的是基于 0 的索引。

```
const
     BPLFiles: array[1..3]
     of string = ('aceD7.bpl',
                  'acntD7.bpl',
                  'AlphaDB7.bpl'); 
```

更改此代码

```
for i:= 0 to BPLFileQty do
    begin
      RegName:= BPLPath + BPLFiles[i];
      RegKey.DeleteValue(RegName);
    end; 
```

到

```
for i:= 1 to BPLFileQty do
    begin
      RegName:= BPLPath + BPLFiles[i];
      RegKey.DeleteValue(RegName);
    end; 
```

而这段代码

```
 for j:= 0 to BPLFileQty do
          begin
            RegName:= BPLPath + BPLFiles[j];
            RegValue:= BPLDetails[j];
            RegKey.WriteString(RegName,RegValue);
          end; 
```

到

```
 for j:= 1 to BPLFileQty do
          begin
            RegName:= BPLPath + BPLFiles[j];
            RegValue:= BPLDetails[j];
            RegKey.WriteString(RegName,RegValue);
          end; 
```

# class - Coffeescript 类和变量

> ID：11187804
> 
> 赞同：2
> 
> 时间：2012-06-25T10:44:23.270
> 
> 标签：class, coffeescript

假设我有一个这样的 Coffeescript 类：

```
class Foo
    aVar = 'foo'

    someFunction = ->
        anotherVar = 'bar' 
```

有没有一种方法可以设置`anotherVar`为类变量而不必将其声明为 null，如下所示：

```
class Foo
    aVar = 'foo'
    anotherVar = null

    someFunction = ->
        anotherVar = 'bar' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:53:30.350

不，你不能。让我们看一个简单的类：

```
class C
    cv = null
    m: -> cv 
```

即转换为此 JavaScript：

```
var C = (function() {
  var cv;
  function C() {}
  cv = null;
  C.prototype.m = function() {
    return cv;
  };
  return C;
})(); 
```

您会注意到“私有类变量”`cv`只是构建的自执行函数内部的一个局部变量`C`。因此，如果我们想向 中添加一个新的“私有类变量” `C`，我们必须再次打开该匿名函数的作用域并添加新变量。但是没有办法回到过去并改变已经执行的函数的范围，所以你不走运。

当你定义它时，你不必定义你的`anotherVar`as `null`，但你必须将它初始化为一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:54:16.377

你听说过`this`关键字吗？:) CoffeeScript 映射`@`到`this`：

```
class Foo
    aVar = 'foo'

    someFunction: ->
        @anotherVar = 'bar' 
```

# android - 特定日期的日历事件

> ID：11187806
> 
> 赞同：0
> 
> 时间：2012-06-25T10:44:34.767
> 
> 标签：android

如何以编程方式将日历事件设为 2012 年 10 月 29 日 18:00 的日期？我使用它，但我不太清楚如何将正确的值传递给这个日期。谢谢

```
 Calendar cal = Calendar.getInstance();              
      Intent intent = new Intent(Intent.ACTION_EDIT);
      intent.setType("vnd.android.cursor.item/event");
      intent.putExtra("beginTime", cal.getTimeInMillis());
      intent.putExtra("allDay", true);
      intent.putExtra("rrule", "FREQ=YEARLY");
      intent.putExtra("endTime", cal.getTimeInMillis()+60*60*1000);
      intent.putExtra("title", "Giranice");
      intent.putExtra("description", "Concierto Pop-Rock: Giranice (Gipuzkoa)");
      intent.putExtra("eventLocation", "Bilborock");
      startActivity(intent);
` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:49:03.210

> *我使用它，但我不太清楚如何将正确的值传递给这个日期*

用这个 ：

```
 Calendar cal = Calendar.getInstance();

        cal.set(Calendar.MONTH, month - 1);
        cal.set(Calendar.YEAR, year);
        cal.set(Calendar.DAY_OF_MONTH, day);
        cal.set(Calendar.HOUR_OF_DAY, hourOfTheDay);
        cal.set(Calendar.MINUTE, minute); 
```

希望你能理解所有参数:)

# sql-server-2005 - 在 SQL 中将值从一个表复制到另一个表

> ID：11187811
> 
> 赞同：0
> 
> 时间：2012-06-25T10:44:55.610
> 
> 标签：sql-server-2005

我有 2 张桌子。我需要使用表 2 中特定列中的值更新表 1 的所有行。它们具有相同的结构。

```
UPDATE @TempTable       
SET [MyColumn] =
    (
    SELECT [MyColumn]
    FROM 
        [udf_AggregateIDs] (@YearId) AS [af]
        INNER JOIN [MyForm] ON
        (
            [af].[FormID] = [MyForm].[FormID] AND
            [af].[FormID] = @MyFormId
        )
    WHERE [Description] = [MyForm].[Description]
    ) 
```

我收到一条错误消息，说子查询返回了超过 1 个值。我只添加了 where 子句，因为我认为 sql 正在努力匹配行，但是两个表都有相同的行。它应该返回多个值，因为我正在尝试将 MyColumn 的所有行从一个表复制到另一个表。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:00:42.223

您不需要子查询..只需加入表格..[此处](https://stackoverflow.com/questions/1293330/how-can-i-do-an-update-statement-with-join-in-sql)已回答了相同类型的问题。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:53:32.860

描述是独一无二的吗？

```
select [Description], count(*) from [MyForm] group by [Description] having count(*)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T14:03:47.947

必须在这里猜测，因为您的查询不是自记录的。MyColumn 是否来自函数？@TempTable 是否有描述列？谁知道，因为您没有在它们前面加上别名？尝试这个。您可能需要调整，因为您知道您的架构，而我们不知道。

```
UPDATE t 
  SET [MyColumn] = func.MyColumn -- have to guess here
  FROM dbo.[udf_AggregateIDs] (@YearId) AS func
  INNER JOIN dbo.MyForm AS f
  ON func.FormID = f.FormID
  INNER JOIN @TempTable AS t
  ON t.Description = f.Description -- guessing here also
WHERE f.FormID = @MyFormID; 
```

# graph - GEF：如何将选择传递给命令

> ID：11187812
> 
> 赞同：0
> 
> 时间：2012-06-25T10:44:56.920
> 
> 标签：graph, command, selection, eclipse-gef

我有一个带有命令的 GEF 编辑器来创建一个新节点。我想将编辑器中当前选择的节点传递给这个命令，以便让命令创建一个新节点**并**创建从新节点到编辑器中选定节点的连接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:32:56.307

在编辑策略中您可以调用`getHost().getViewer().getSelectedEditParts()`以获取选定的编辑部件，然后将它们的模型传递给`Command`用于创建新节点的模型。

IMO，而不是单个命令来执行此操作，您应该使用不同的命令来创建节点和创建链接，并在您的编辑策略中创建一个复合命令，该命令首先创建节点然后创建链接。这为您提供了更好的模块化。

# c# - 使用 DateTime 获取前几个月的名称

> ID：11187819
> 
> 赞同：1
> 
> 时间：2012-06-25T10:45:13.340
> 
> 标签：c#, asp.net, datetime

在 HTML 表格中，我需要显示日期（月/年）和前 6 个月和下个月。

此代码显示实际的月份和年份

```
 <th>
        <%= 
        String.Format("{0:MMMM}", DateTime.Now).ToString() + "/" + DateTime.Now.Year%>
    </th> 
```

我找不到如何获取上/下个月以及如何更新年份以防年份发生变化。在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T10:47:21.210

`DateTime.Now.AddMonths(1)`和`DateTime.Now.AddMonths(-1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:56:19.110

正如已经回答的那样，您可以使用以下方法找到上个月或下个月：

`DateTime.Now.AddMonths(1)`或`DateTime.Now.AddMonths(-1)`。

但是，您也可以使用以下 DateTime 格式字符串大大简化您的代码：

```
var theDate = DateTime.Now.AddMonths(-1);  //previous month
theDate.ToString("MMMM/yyyy"); 
```

所以在你的情况下：

```
 <th>
        <%= String.Format("{0:MMMM/yyyy}", DateTime.Now) %>
    </th> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:48:52.503

您可以尝试以下方法：

```
 DateTime.Now.AddMonths(1) 
```

这将在下个月得到，如果你将 1 换成 -1，它将返回上个月。

# jms - hornetQ 中的最大大小字节和分页

> ID：11187823
> 
> 赞同：0
> 
> 时间：2012-06-25T10:45:19.807
> 
> 标签：jms, hornetq

默认情况下，队列在 hornetQ 中是持久的。那么我们为什么要配置 max-size-bytes 并使用地址进行分页呢？所有消息都应存储在磁盘上。hornetQ[文档](http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/paging.html)中有一个示例：

```
<address-settings>
   <address-setting match="jms.someaddress">
      <max-size-bytes>104857600</max-size-bytes>
      <page-size-bytes>10485760</page-size-bytes>
      <address-full-policy>PAGE</address-full-policy>
   </address-setting>
</address-settings> 
```

这适用于非持久队列吗？或非持久性消息。（文档中没有提到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:10:48.513

据我所知， max-size-bytes 是内存中队列的最大大小，而 page-size-bytes 是磁盘中每个分页文件的大小。

您可能想要定义 max-size-bytes 否则您可能会耗尽堆内存。一旦你这样做了，你应该定义达到队列最大大小时系统的行为；您可以阻止生产者、丢弃即将到来的消息或分页到磁盘。然后你可能想定义 hornetq 在需要时创建的分页文件的大小。

# javascript - 骨干路由器导航到 .../#/ 不触发路由器事件。如何？

> ID：11187829
> 
> 赞同：2
> 
> 时间：2012-06-25T10:45:38.643
> 
> 标签：javascript, backbone.js

不知道如何强制主干正确导航到这样的路由：

> 页/#/频道/名称

代替

> 页面#频道/名称

或者

> 页面#/频道/名称

我的路由器使用一个主要模型并观察其状态，因此在这种情况下，路由器应该能够在不触发其事件的情况下更改 URL。

我试着这样做：

```
router.navigate("#/channel/" + encodeURIComponent(appState.data.channelName), { trigger: false }); 
```

但在这种情况下，“触发器：假”不起作用，所以我收到了不受欢迎的路由器事件调用。

Backbone.history 根设置为“/”，我目前没有使用 pushState。

请参见下面的代码示例：

```
var Router = Backbone.Router.extend({
    routes: {
        "": "index",            
        "index": "index",
        "channel/:channelName": "changeChannel"
    },

    initialize: function (options) {
        var router = this;

        if (options.model) {
            router.model = options.model;
        } else {
            //TODO: throw error
            return;
        }

        //update url in cases of model channelSelection changes
        router.model.on("stateChangeAccepted", function (appState) {
            switch (appState.mode) {
                case "channel":
                    router.navigate("/channel/" 
                        + encodeURIComponent(appState.data.channelName), { trigger: false });
                    break;                    
            }
        });
    },

    index: function () {
        var router = this;

        router.model.trigger("stateChangeRequest", {
            mode: "channel",
            data: {
                channelIndex: 0
            }
        });

    },

    changeChannel: function (channelName) {
        var router = this;

        router.model.trigger("stateChangeRequest", {
            mode: "channel",
            data: {
                channelName: decodeURIComponent(channelName)
            }
        });

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:07:59.417

您的`router.navigate`呼叫与您定义的路线不匹配：

```
routes: {
  "": "index",            
  "index": "index",
  "channel/:channelName": "changeChannel"
}, 
```

这意味着频道的 URL 应该是`http://host.com/#channel/someChannel`. 但是，您的 router.navigate 调用是`router.navigate('#/channel...)`或`router.navigate('/channel...)`。它应该是：

```
router.navigate("channel/" + encodeURIComponent(appState.data.channelName), { trigger: false }); 
```

但是，如果您想使用类似 的路线`http://host.com/#/channel/someChannel`，那么您的路线应该是：

```
routes: {
  "": "index",            
  "index": "index",
  "/channel/:channelName": "changeChannel"
}, 
```

你的导航电话应该是：

```
router.navigate("/channel/" + encodeURIComponent(appState.data.channelName), { trigger: false }); 
```

# php - CodeIgniter Active Record 'like' 忽略 'where'

> ID：11187831
> 
> 赞同：1
> 
> 时间：2012-06-25T10:45:44.213
> 
> 标签：php, codeigniter, activerecord

使用 like 进行非常简单的搜索，并且可以选择省略选项，但是我发现 like 语句使查询忽略 where 语句

```
$this->db->like('LOWER(location) OR LOWER(name)', strtolower($term));
$this->db->where('stage', 1);
$this->db->order_by("name", "asc"); 
$query = $this->db->get($this->user_table);
return $query->result(); 
```

上面使用 $term = "dublin"; 产生的示例

```
SELECT * FROM (`users`) WHERE `stage` = 1 AND LOWER(location) OR LOWER(name) LIKE '%dublin%' ORDER BY `name` asc" 
```

它仍然返回 'stage' 不等于 1 的行。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T10:58:06.847

```
$term = strtolower($term);
$this->db->where("(LOWER(location) LIKE '%{$term}%' OR LOWER(name) LIKE '%{$term}%')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T16:09:58.290

```
$query = $this->db->query("SELECT id_alimento, nombre, unidad, energia_kcal FROM catalogo_alimentos WHERE LOWER(nombre) LIKE '%".$this->db->escape_like_str($search)."%'");
if($query != false){
  if ($query->num_rows() > 0) {
    return $query->result();
  }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-30T05:46:02.380

用这个代替查询

```
$term = strtolower($term);
$this->db->where("stage= 1 AND (LOWER(location) LIKE '%{$term}%' OR LOWER(name) LIKE '%{$term}%')"); 
```

# java - 在 Apache Camel 中访问存储过程的多个结果集

> ID：11187834
> 
> 赞同：1
> 
> 时间：2012-06-25T10:45:57.240
> 
> 标签：java, stored-procedures, jdbc, apache-camel

我正在构建使用 Apache Camel 的概念证明。我正在尝试构建一个路由，该路由将使用 JDBC 组件调用 Sybase DB 上的存储过程，然后处理其多个结果集。

到目前为止，我使用 Spring 进行了以下配置：

```
<camelContext id="context">
    <route>
        <from uri="direct:start"/>
        <bean ref="sqlStatementCreator"/>
        <to uri="jdbc:dataSource?resetAutoCommit=false"/>
        <bean ref="sqlResultsProcessor"/>
    </route>
</camelContext> 
```

*sqlStatementCreator*是一个简单的类，只有一个方法返回包含执行存储过程的 sql 语句的字符串：

```
{call sp_name ('some arg')} 
```

存储过程返回 2 个（或更多）结果集以及我需要的数据。

**问题是如何访问*sqlResultsProcessor*中的那些结果集？**

JDBC 组件的[文档](http://camel.apache.org/jdbc.html)声明“结果在 OUT 主体中作为 ArrayList> 返回”。如果存储过程只返回一个结果集，那将非常有效。但是，当我在*sqlResultsProcessor*中检查 Exchange 的主体时，如果有多个结果集，我有*null*。

*   也许骆驼不能在带有 JDBC 组件的 OUT 正文中返回多个结果集？
*   也许最好编写一个自定义 bean 来访问将处理结果并将它们放入 OUT 主体的数据库？
*   或者，也许我完全错过了什么？

Apache Camel 版本是 2.9.2。

我必须在 jdbc 组件中添加*resetAutoCommit=false*选项，否则 Sybase 会抛出异常：

```
com.sybase.jdbc3.jdbc.SybSQLException: Stored procedure 'sp_name' may be run only in unchained transaction mode. 
```

而且我无法更改存储过程。它就是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T10:40:32.137

正如我自己发现的那样，**Apache Camel (v.2.9.0) 目前不支持使用[JDBCProducer](https://camel.apache.org/maven/current/camel-jdbc/apidocs/org/apache/camel/component/jdbc/JdbcProducer.html)**处理多个结果集。正如您在*处理*Sql *方法中的JDBCProducer的[源代码中看到的：](https://svn.apache.org/repos/asf/camel/tags/camel-2.9.0/components/camel-jdbc/src/main/java/org/apache/camel/component/jdbc/JdbcProducer.java)

 *```
if (stmt.execute(sql)) {
    rs = stmt.getResultSet();
    setResultSet(exchange, rs);
} 
```

执行 SQL 语句后，生产者获取第一个 ResultSet 并将其设置为 Exchange。

因此，如果您需要处理多个 ResultSet，最好编写自己的 bean 来执行 SQL 并处理其结果。*

# c# - BIDS 和 VS 中的 SSIS 自定义控制任务调试 UI

> ID：11187835
> 
> 赞同：3
> 
> 时间：2012-06-25T10:45:59.407
> 
> 标签：c#, visual-studio-2010, ssis, custom-component, bids

我在 C# 中创建了一个 SSIS 自定义任务，我目前正在开发 UI。我想知道是否有更好的方法来调试 UI 而不是编译项目，将 DLL 复制到适当的 DTS 文件夹中，然后在 BIDS 中打开测试包，然后将进程附加到 Visual Studio。这部分我并不在意，但是一旦您测试了 UI 并在 Visual Studio 中对 UI 进行了更改。我必须重新编译 DLL，然后重复整个过程。我必须关闭 BIDS 和 VS，因为在我必须重新开始整个过程​​之前它们不会释放 DLL。有没有人有任何提示来加快这个过程。每次都这样做真是令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T18:15:12.090

抱歉，这是微软设计的唯一方法。如果您一遍又一遍地重复此过程，我建议为所有操作创建一个批处理文件，这样您就不必一遍又一遍地执行 5 个步骤，而只需触发批处理文件并完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:16:30.840

我想我会添加这个。我发现调试 SSIS 组件的最佳方法是：

在构建下的项目属性中，将输出路径设置为正确的 SQL Server DTS 子文件夹，然后在构建后的构建事件下放置：

"C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil" -u "C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Tasks\$ (TargetFileName)" "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\gacutil" /if "$(TargetPath)"

使用 gac 卸载程序集，然后重新安装。我卸载它的原因是因为我在 BIDS 没有引用新插入的 DLL 时遇到了很多麻烦。即使重新启动我的计算机，它也会一直引用旧的 DLL。我猜是它已经缓存了它。我也使用它来为 BIDS 2012 开发组件。我知道您不必为 BIDS 2012 向 gac 签名或注册组件，但 BIDS 在引用新创建的 dll 时遇到问题。通过这样做，我不必每次都关闭 BIDS 或删除并将组件读取到设计屏幕。

你会认为有一个更简单的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T21:13:30.233

[您可能想在此处](http://bi-polar23.blogspot.com/2008/05/deploying-and-testing-custom-ssis.html)阅读 Matthew Roche 的博文。它提供了很多信息，并为您提供了更好的做事方式。

# android - 在 ListView 中保存滚动位置

> ID：11187837
> 
> 赞同：0
> 
> 时间：2012-06-25T10:46:10.217
> 
> 标签：android, android-listview

> **可能重复：**
> [返回 ListView 时保持/保存/恢复滚动位置](https://stackoverflow.com/questions/3014089/maintain-save-restore-scroll-position-when-returning-to-a-listview)

如何在 ListView 中保存滚动位置？我应该将元素添加到 ListView 的头部并添加到任意位置，但不应滚动视觉部分。

例如，我有 123 个元素，我看到索引为 66 的元素的 1/2 部分（元素具有不同的高度）。我在列表中添加了一个元素，我应该看到索引为 67 的元素的 1/2 部分（以前的索引为 66）。

您可以看到示例 - Windows Phone 7.5 的默认“SMS”应用程序。此应用程序使用延迟加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:50:59.547

你可以使用 `getSelection()`和`setSelection()`方法

使用获取当前选择`getSelection()`，当您再次返回该 ListView 时，调用 `setSelection()`

# android - Android 交互图

> ID：11187842
> 
> 赞同：0
> 
> 时间：2012-06-25T10:46:23.183
> 
> 标签：android, graph

我正在寻找 android google 13 API 版本中的条形图和折线图请建议我在活动类中绘制条形图和折线图的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:56:14.713

aChartEngine - [http://www.achartengine.org/](http://www.achartengine.org/)

# c# - 在 this.Dispose() 之后使用 form.ShowDialog();

> ID：11187843
> 
> 赞同：2
> 
> 时间：2012-06-25T10:46:26.833
> 
> 标签：c#, .net, winforms

我正在从另一个表单启动一个表单。我希望在显示子表单之前处理父表单，所以我使用：

```
 this.Dispose();
 form.ShowDialog(); 
```

显示表单，这是正确的方法吗？表单 from 是通过调用`ShowDialog()`from 主表单启动的。我希望在主表单可编辑之前关闭这些表单。

```
EDIT: 
```

这是基本流程

**Mainform>(Showdialog)>form1>(dispose+showDialog)>form2(dispose)>Mainform**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:06:08.287

如果您想确保在显示子项之前父项不可见，并且您希望父项关闭：

```
var f = new ChildForm();
this.Hide();
f.Show();
this.Close(); 
```

`ShowDialog()`意思是“显示此表单并在关闭后*返回给我”。*这不是你所描述的你想要发生的事情。

根据您的评论，从您的主表单创建和显示 form2 可能更有意义。

在主窗体中：

```
 DialogResult form1Result;
     using (var f = new Form1())
     {
        form1Result = f.ShowDialog();
     }
     if (form1Result == DialogResult.OK)
     {
        using (var f2 = new Form2())
        {
           f2.ShowDialog();
        }
     } 
```

在您最初生成 Form2 的 Form1 事件中

```
this.DialogResult = DialogResult.OK;
this.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:48:56.560

调用`Dispose`任何对象（包括称为 的当前对象`this`）表示您已经完成了该对象，它最终完成了。

最好是`Close`第一个对话，然后显示第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T14:37:57.027

如果您以模态方式显示子对话框（在这种情况下就是这样），那么您可以隐藏父对话框您可以做的是隐藏父窗体，显示子窗体，然后关闭父窗体。

```
var form = new SomeForm();
this.Hide();
form.ShowDialog(); // the code will be blocked at this point until the child form closes
this.Close();
this.Dispose(); // i'm not sure if this is necessary anymore. check MSDN 
```

如果您正在显示一个表单（不是模态），您可以隐藏父表单，并监听子表单的关闭事件，然后在处理程序中关闭父表单

```
void childFormClosed(Event e) 
{
    this.Close();
}

var form = new SomeForm();
form.Closed += new EventHandler... // I usually rely on intellisense with this
this.Hide();
form.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:51:56.343

抱歉，我认为您不能这样做，因为当您调用 ShowDialog 方法时，子窗体将依赖于其父窗体。因此 dispose 的调用将被暂停，直到您完成子表单。

我认为你必须调用“显示”方法，然后你可以调用 dispose 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T13:12:20.397

子窗体的生命周期取决于其父窗体的生命周期，这意味着，一旦您调用父窗体的 parent.close，它将释放该实例创建的所有对象。

您必须独立于父级创建子级。

# jquery - 带有循环的Jquery淡化文本

> ID：11187847
> 
> 赞同：1
> 
> 时间：2012-06-25T10:46:51.200
> 
> 标签：jquery, loops, fade

我正在尝试使包含文本的 div 淡出另一个 div 淡入然后原来的回来然后重复或循环它所以它不断重复 2 条消息这是我的代码：

```
<div id="specialoffer">
  <div id="specialoffertext">Reduced rates over the <br />
    next few months</div>
  <div id="specialoffertext2" style="display:none;">Contact us today to <br />
    find out more</div></div>​

    var $body = $(document.body),
    cycle;

(cycle = function() {
        $('#specialoffertext')..delay(2000)fadeOut('slow');
        $('#specialoffertext2').delay(3000).fadeIn('slow');
        $('#specialoffertext2').delay(3500).fadeOut('slow');
        $('#specialoffertext').delay(5000).fadeIn('slow', cycle);

})();​ 
```

在 jsfiddle 上玩它时效果很好，然后我上传它后它就不起作用了？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:48:05.833

您的代码不会在 jsfiddle 中运行，因为您在这里有一个额外的点并且您缺少另一个

```
 $('#specialoffertext')..delay(2000)fadeOut('slow'); 
```

取下并放在正确的位置

```
 $('#specialoffertext').delay(2000).fadeOut('slow'); 
```

一切都应该工作

[http://jsfiddle.net/kEGgC/1/](http://jsfiddle.net/kEGgC/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:49:09.860

用这个：

```
(function foo() {
    $('#specialoffertext').toggle('slow', function() {
        $('#specialoffertext2').toggle('slow', foo);
    });
})();​ 
```

[**现场演示**](http://jsfiddle.net/uvL3g/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:50:12.003

jsFiddle 为您处理加载 jQuery。您是否可能忘记包含 jQuery 库？

你也有（看起来像）标签之外的 JavaScript 代码`<script>`。

你应该把你的代码放在一些`<script>`标签中，并利用 jQuery 的`document.ready`回调。

```
$(function(){
  // your code goes here
}); 
```

你也有这行的语法问题 -

```
$('#specialoffertext')..delay(2000)fadeOut('slow'); 
```

之前有一个错误的双句号，`delay`而您之前缺少一个句号`fadeOut`。

# encryption - 开发数据包嗅探器以判断流量是否已加密

> ID：11187848
> 
> 赞同：0
> 
> 时间：2012-06-25T10:46:59.623
> 
> 标签：encryption, packet-sniffers

如果我的问题看起来有点不专业，我提前道歉......毕竟我不是一个开发人员。

作为我大学项目的一部分，我需要开发一个程序来监听网络并判断流量是否加密？重要的是只知道到达网络端的流量是否被加密，知道加密的类型和算法并不重要。

我真的不知道从哪里开始。如果有人能给我一些关于寻找什么的线索，我将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:04:15.270

虽然 GregS 的答案当然是正确的，但区分加密文本的最佳方法是查看应用程序使用的协议。例如，如果浏览器加密任何东西，它可能是通过使用 SSL 来完成的。远程终端使用 SSH。

尽管密文大部分看起来是随机字节，但您可能可以区分*加密协议*。这是否足够取决于您的用例。作为第一步，许多协议默认使用特定的服务器端口；这可以用作启发式方法，因此您可以首先检查该端口的最常见协议。

# java - 在java中深度克隆一个对象

> ID：11187849
> 
> 赞同：1
> 
> 时间：2012-06-25T10:47:11.677
> 
> 标签：java

> **可能重复：**
> [Java：推荐的深度克隆/复制实例的解决方案](https://stackoverflow.com/questions/2156120/java-recommended-solution-for-deep-cloning-copying-an-instance)

我有一个必须克隆的对象。但是，在克隆时，它还应该克隆其中的对象。这怎么可能 ？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T10:50:30.977

您必须意识到，这不是一个明确定义的问题，深度复制无法以机械化、全自动的方式正确完成。这些是一些选项：

*   Java 有该`clone`协议，但现在大多数情况下它被认为已弃用；
*   您可以使用序列化在内存中序列化反序列化；
*   您可以编写所谓的复制构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:51:23.820

> Java 深度克隆库 克隆库是一个小型的开源 Java 库，用于深度克隆对象。对象不必实现 Cloneable 接口。实际上，这个库可以克隆任何 java 对象。

```
Cloner cloner = new Cloner();
MyClass clone = cloner.deepClone(o); 
```

所以这里是示例[克隆](http://code.google.com/p/cloning/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T10:49:52.163

您需要`clone()` 像这样覆盖方法

```
public class Person implements Cloneable{
 private Long id;
 private Address address

  @Override
  protected Object clone() throws CloneNotSupportedException {
  //do deep cloning
  }

 } 
```

**另见**

*   [使用复制构造函数而不是 Object.clone 进行深度复制的正确方法](https://stackoverflow.com/questions/4199429/proper-way-to-deep-copy-with-copy-constructor-instead-of-object-clone)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T10:53:19.327

另一种克隆方式是提供一个**复制构造**函数，根据提供的实例的数据构造一个新的实例：

```
public MyClass(MyClass instanceToCopy)
{
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T10:50:49.343

实现深拷贝的最简单方法是序列化然后反序列化对象。向上看`ObjectInputStream`和`ObjectOutputStream`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T10:51:13.953

最简单的深度克隆方法是使用`Java serialization`, 您`serialize`和`deserialize`对象并返回反序列化版本。

# spring - Spring @Cacheable 正在破坏 @RequestMapping

> ID：11187853
> 
> 赞同：2
> 
> 时间：2012-06-25T10:47:21.403
> 
> 标签：spring, caching, ehcache

我已将我的应用程序升级到 Spring 3.1，并且所有 jar 都已充分更新。但是，当我尝试将 @Cacheable 用于我的一个控制器中的方法时，该控制器的所有方法的 URL 映射都会中断。在检查日志文件时，我发现从未检测到该控制器的所有方法的 URL 映射。我很确定我的缓存配置很好。谁能给我一些线索，因为我可能做错了什么。

ehcache.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache>
<defaultCache
eternal="false"
maxElementsInMemory="2" 
overflowToDisk="false" 
diskPersistent="false" 
timeToLiveSeconds="300"
memoryStoreEvictionPolicy="LRU" />

<cache name="Backlog"  
eternal="false"
maxElementsInMemory="2" 
overflowToDisk="false" 
diskPersistent="false" 
timeToLiveSeconds="300"
memoryStoreEvictionPolicy="LRU" />
</ehcache> 
```

配置：

```
<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager">
    <property name="cacheManager">
        <ref bean="ehcache" />
    </property>
</bean>
<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" p:configLocation="/WEB-INF/spring-configuration/ehcache.xml" /> 
```

代码片段：

```
@RequestMapping("/*/backlog")
@Cacheable(value = "Backlog")
public ModelAndView getBackLog(){ 
    //sth here
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T12:36:39.217

虽然@mana 已经解释了如何解决这个问题，但这就是为什么添加`@Cacheable`会破坏你的代码。最近的[一篇博客文章](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)更详细地解释了这一点，值得一读。

默认情况下，Spring 创建 JDK 动态代理来实现缓存行为，这要求被代理的类实现一个接口，该接口声明您希望在`@Cacheable`类上公开的所有方法。值得注意的是，如果将 Spring 配置为使用基于 CGLIB 的代理，则不必实现任何接口。

您没有提供任何特定错误，但在这种情况下，您经常会遇到方法未找到异常。Spring 尝试调用`getBackLog()`代理上的方法，但没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T11:27:05.750

您不应该缓存控制器方法本身，而是将调用以创建积压的资源消耗方法。看看[这个类似的问题](https://stackoverflow.com/questions/10404365/spring-ehcache-can-cacheable-be-used-to-cache-the-output-of-a-jsp-view)。所做的是为您`@Cachable`的函数参数和相关的返回值创建一个键值映射。在您的情况下，这将是一个`ModelAndView`对象。

如果你真的需要服务器端网页缓存，可以使用[这个 Apache Cache Module](http://httpd.apache.org/docs/2.2/caching.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:40:05.490

您应该将服务类注入控制器并缓存服务类上的方法

# javascript - jQuery - Raphael - SVG - 基于自定义数据的选择器

> ID：11187856
> 
> 赞同：3
> 
> 时间：2012-06-25T10:47:22.493
> 
> 标签：javascript, jquery, html, raphael

我已将自定义数据属性分配给添加到 Raphael 画布的一些圆圈，如下所示`each()`：

```
marker.data('transaction', transaction); 
```

如何在画布上找到具有相同交易数据值的元素？

目前我有代码：

```
var found = document.querySelectorAll("[transaction='" + current_transaction +"']"); 
```

它*应该*返回一个带有元素的 NodeList，但它不起作用。要将数据检索到变量中，就像 一样简单`var foo = marker.data('transaction')`，但显然，如果我想检索元素的 NodeList，这不起作用。

因此，我希望我的选择器如下所示，但我无法找出正确的语法：

```
var found = document.querySelectorAll("data('transaction' = 1)"); 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:32:01.877

由于 Raphael 必须支持 VML，因此它不会像 html5 应用程序那样将数据保存在 DOM 中。如果要将数据存储在 dom 中，则必须访问 html 节点并在那里设置属性...

```
marker.node.setAttribute('data-transaction', transaction); 
```

然后您可以使用 查询元素`querySelectorAll`。请记住，这将在 < IE8 上失败。

如果您想保留旧的 IE 支持，我建议您编写一个函数来迭代您的标记并返回 Raphael 对象`mark.data("transaction") == transaction`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T11:08:38.063

我认为问题在于 jQuery 无法访问 SVG 节点。你必须尝试普通的 Javascript。如果您使用`querySelectorAll`.

看这里：[http](http://dean.edwards.name/jsb/behavior/querySelectorAll.html) ://dean.edwards.name/jsb/behavior/querySelectorAll.html 和这里：[http ://www.w3.org/TR/selectors-api/#queryselectorall](http://www.w3.org/TR/selectors-api/#queryselectorall)

可能的解决方案：查看 Raphael-Doc：[http ://raphaeljs.com/reference.html#Element.data](http://raphaeljs.com/reference.html#Element.data)

# actionscript-3 - 关于 as3 Sound.extract() 格式的详细信息？

> ID：11187860
> 
> 赞同：0
> 
> 时间：2012-06-25T10:47:41.340
> 
> 标签：actionscript-3, audio, media

使用声音对象 .extract() 方法，可以将未压缩的声音数据作为 ByteArray 检索。提取的声音数据的格式是什么？自定义内部格式，还是既定格式？字节序类型？

我希望能够将声音数据直接加载到 byteArray 中并从该数据中播放声音（绕过下面的步骤 1）。

到目前为止，这是我的实验：

步骤 1\. 这里我加载一个声音，提取数据内容并将其保存到光盘：

```
private var sound:Sound;
private var byteArray:ByteArray;

// loading a sound...
private function init():void {
    sound = new Sound();            
    sound.addEventListener(Event.COMPLETE, onComplete);
    sound.load(new URLRequest('short.mp3'));
}

// saving it to disc...
private function onComplete(e:Event):void {
    byteArray = new ByteArray();
    sound.extract(byteArray, 100000000);            
    byteArray.position = 0;
    var file:FileReference = new FileReference();
    file.save(byteArray, 'short.data');             
} 
```

第 2 步。在这里，我从光盘加载数据，并使用此数据提供新声音对象的播放：

```
private var sound:Sound;
private var byteArray:ByteArray;

// loading a sound...
private function init():void {

    file = new FileReference();
    file.addEventListener(Event.COMPLETE, onLoaded);
    file.addEventListener(Event.SELECT, onSelected);
    file.browse();

}

private function onSelected(e:Event):void {
    file.load();
}

private function onLoaded(e:Event):void {
    trace('loaded');
    trace(file.data.length);
    byteArray = file.data;

    sound2 = new Sound();
    sound2.addEventListener(SampleDataEvent.SAMPLE_DATA, onSampleData);     
    sound2.play();      
}   

private function onSampleData(e:SampleDataEvent):void {
    trace(e.position);
    for (var i:int = 0; i < 2048; i++) {
        var left:Number = byteArray.readFloat();
        var right:Number = byteArray.readFloat();               
        e.data.writeFloat(left * 0.2);
        e.data.writeFloat(right * 0.2);
    }
} 
```

我希望能够通过使用外部转换器实用程序（sox 或其他东西）来完成第二步（从光盘加载数据并提供声音对象播放）。

/乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:50:06.747

它应该是标准的 32 位浮点数，每个样本每个通道一个。所以我会为 sox 尝试 -e 浮点数，虽然我没有尝试过，但我会带着一定的信心去做...... :) 浮点数是与字节序无关的，我相信......

# visual-studio-2010 - 如何在没有活动远程会话的情况下运行编码的 UI 测试思想 TFS CI？

> ID：11187862
> 
> 赞同：5
> 
> 时间：2012-06-25T10:48:05.343
> 
> 标签：visual-studio-2010, tfs, continuous-integration, mstest, coded-ui-tests

我在没有远程会话的情况下使用 Team Foundation Server (TFS) 持续集成 (CI) 启动编码 UI 测试时遇到问题。我遵循了[http://msdn.microsoft.com/en-us/library/dd293551.aspx](http://msdn.microsoft.com/en-us/library/dd293551.aspx)中提到的所有建议，但这仍然需要一个活动的远程会话。建议是设置测试代理并以交互模式构建服务。

远程运行编码的 UI 测试是否有任何解决方法？

PS 我们的测试机器上有 Windows 7。

任何帮助都会做:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:34:31.287

我不能完全理解你的问题，但我有一个我认为类似的问题：

远程运行 Coded UI 测试时，机器无法锁定或有活动的屏幕保护程序。如果您正在运行虚拟机，例如在 Hyper-V 上，并且您使用远程桌面连接连接到它，则关闭该连接将锁定屏幕。

就我而言，我们使用的是 Hyper-V，所以我使用 Hyper-V 客户端连接，然后关闭了该窗口。这不会锁定屏幕。

资料来源：个人经历

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:49:13.490

我不确定你的问题是什么。我认为您的意思是您希望将测试代理设置为作为“交互式进程”运行，以便它可以运行与桌面交互的测试（CoudeUi 测试）。如果这是您面临的问题，请查看以下链接：

*   [如何：设置您的测试代理以运行与桌面交互的测试](http://msdn.microsoft.com/en-us/library/ee291332.aspx)

# c# - 链接上的 Onclick 事件 ( )

> ID：11187865
> 
> 赞同：0
> 
> 时间：2012-06-25T10:48:13.710
> 
> 标签：c#, asp.net, .net, onclick, anchor

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:11:38.663

用户 LinkBut​​ton 使链接看起来像一个超链接，但行为像一个按钮。这是你的答案

```
int counter = 1;
foreach (Node node in this._nodes)
{
    LinkButton lnkPost = new LinkButton();
    lnkPost.ID = "lnk" + i.ToString();
    lnkPost.Text = node.Title;
    lnkPost.Click += new EventHandler(LinkPost_OnClick);

    parent.Controls.Add(lnkPost);
}

protected void LinkPost_OnClick(object sender, EventArgs e)
{
    //add your handler code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:05:57.963

大致是这样的：

```
int counter = 1;
foreach (Node node in this._nodes)
{
 HyperLink DynLink = new HyperLink();         
 DynLink.ID = "DynLink" + counter.ToString();         
 DynLink.Text = node.title;            
 DynLink.NavigateUrl = "MyLink";  
 counter++;
} 
```

# azure - Windows Azure 为本地存储创建虚拟目录

> ID：11187877
> 
> 赞同：2
> 
> 时间：2012-06-25T10:48:53.540
> 
> 标签：azure, directory, virtual, storage, local

我需要帮助创建指向 Windows Azure（生产环境）中本地存储的虚拟目录。我可以手动设置一个虚拟目录，但每次重新启动 Azure 时都会删除它。线索是当我在 Azure 上上传我的项目包时，通过配置文件创建虚拟目录。问题是如何创建这样的目录，使其指向本地存储。

提前谢谢任何建议。

此致，

达雷克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T11:07:11.460

我建议您通过在 WebRole 的 OnStart 方法中与 IIS 交互来创建虚拟目录：

```
public class WebRole : RoleEntryPoint
{
    public override bool OnStart()
    {
        // Connect to the IIS site.
        using (var manager = new Microsoft.Web.Administration.ServerManager())
        { 
                var localResourcePath = RoleEnvironment.GetLocalResource("MyResource").RootPath;

            // Add to the root application.
            var rootSite = manager.Sites[RoleEnvironment.CurrentRoleInstance.Id + "_Web"];
            var rootApplication = rootSite.Applications["/"];
                rootApplication.VirtualDirectories.Add("/myVdir", localResourcePath);

                // Save
            manager.CommitChanges();
        }

        ...
    }
} 
```

如果我是对的，您需要将执行上下文设置为**提升**才能使其正常工作。您可以在 ServiceDefintion.csdef 中执行此操作：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyProject" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
  <WebRole name="MyRole" vmsize="Small" enableNativeCodeExecution="true">
    <Runtime executionContext="elevated" />
    ...
  </WebRole>
</ServiceDefinition> 
```

**注意：**您需要参考**Microsoft.Web.Administration.dll** (C:\Windows\System32\inetsrv)

# php - 分页我的 Wordpress PHP 查询

> ID：11187881
> 
> 赞同：0
> 
> 时间：2012-06-25T10:49:05.280
> 
> 标签：php, wordpress, pagination

我有一个查询，它在各自的页面上返回“出租/销售属性”，无论我尝试什么，我都无法让查询成功页面。

我想使用分页的页面之一是[http://www.urbanvision.org.uk/services/property-services/properties-for-sale/](http://www.urbanvision.org.uk/services/property-services/properties-for-sale/)。

我想要编号分页并尝试使用 WP Navi，但我的 PHP 搞砸了，我在尝试访问已发布页面时收到错误消息。

我当前的代码是：

```
<?php
$featuredPosts = new WP_Query();
$featuredPosts->query('showposts=100&cat=13');
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

<div class="literaturedescription">

<?php
$prop_det_url = get_field('property_details_url');
if($prop_det_url!=''){ ?>

<a href="<?php echo $prop_det_url; ?>" target="_blank" title="<?php the_field('property_title'); ?>">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>

<?php } else { ?>

<a href="<?php the_field('property_details'); ?>" title="<?php the_field('property_title'); ?>" target="_blank">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>

<?php } ?>

<p><strong><?php the_field('property_title'); ?></strong><br /><?php the_field('property_excerpt'); ?> <span style="color:red;font-weight:bold;"><?php the_field('property_status'); ?></span>

<?php
$prop_det_url = get_field('property_details_url');
if($prop_det_url!=''){ ?>

<br /><a href="<?php echo $prop_det_url; ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } else { ?>

<br /><a href="<?php the_field('property_details'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } ?>

</div>

<div class="clear"></div>

<?php endwhile; ?> 
```

我们将要添加越来越多的属性，理想情况下希望每页包含 10 或 20 个帖子。

* * *

更新以显示我尝试实现的代码：

```
<?php
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1
$featuredPosts = new WP_Query();
$featuredPosts = new WP_Query( array( 'posts_per_page' => 10, 'cat' => 13, 'paged' => $paged);
while ($featuredPosts->have_posts()) : $featuredPosts->the_post(); ?>

<div class="literaturedescription">

<?php
$prop_det_url = get_field('property_details_url');
if($prop_det_url!=''){ ?>

<a href="<?php echo $prop_det_url; ?>" target="_blank" title="<?php the_field('property_title'); ?>">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>

<?php } else { ?>

<a href="<?php the_field('property_details'); ?>" title="<?php the_field('property_title'); ?>" target="_blank">
<img src="<?php the_field('property_thumbnail'); ?>" width="220px" height="150px" alt="<?php the_field('property_title'); ?>" /></a>

<?php } ?>

<p><strong><?php the_field('property_title'); ?></strong><br /><?php the_field('property_excerpt'); ?> <span style="color:red;font-weight:bold;"><?php the_field('property_status'); ?></span>

<?php
$prop_det_url = get_field('property_details_url');
if($prop_det_url!=''){ ?>

<br /><a href="<?php echo $prop_det_url; ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } else { ?>

<br /><a href="<?php the_field('property_details'); ?>" target="_blank" title="<?php the_field('property_title'); ?>">&gt; &gt; View Details</a></p><br />

<?php } ?>

</div>

<div class="clear"></div>

<?php endwhile; ?>

<?php wp_reset_postdata() ?>

<?php wp_pagenavi( array( 'query' => $featuredPosts) ); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:55:02.823

您需要先为查询添加分页。

```
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1

$featuredPosts = new WP_Query( array( 'posts_per_page' => 10, 'cat' => 13, 'paged' => $paged ) ); 
```

结束通话后`wp_reset_postdata()`

然后对于 wp_pagenavi：

```
wp_pagenavi( array( 'query' => $featuredPosts) ); 
```

# python-3.x - 在pyparsing中使用“setResultsName”重复命名字段

> ID：11187884
> 
> 赞同：1
> 
> 时间：2012-06-25T10:49:18.713
> 
> 标签：python-3.x, pyparsing

我正在使用 pyparsing 来解码一些帧，但是解码的输出显示了一些重复的结果，我还没有弄清楚为什么。这是我得到的一个例子：

```
from pyparsing import *

def __Array__(s,l,t):
    n = int(t[0],16)
    buf << (n * asn1)

asn1 =      Forward()
buf =       Forward()

array =     Word(hexnums, exact=2).setParseAction(__Array__) + buf

asn1 <<     ( (Literal("01") + array).setResultsName("Array") \
            | (Literal("02") + Word(hexnums, exact=8)).setResultsName("Variable 1") \
            | (Literal("03") + Word(hexnums, exact=2)).setResultsName("Variable 2") )

structX =   Literal("C1").setResultsName("tag1") \
            + Literal("D1").setResultsName("tag2") \
            + Literal("E1").setResultsName("tag3") \
            + Literal("F1").setResultsName("tag4") \
            + asn1

structY =   Literal("C2").setResultsName("tag5") \
            + Literal("D2").setResultsName("tag6") \
            + Literal("F2").setResultsName("tag7") \
            + asn1

structZ =   Literal("C3").setResultsName("tag8") \
            + Literal("D3").setResultsName("tag9") \
            + asn1

header21 =  Literal("D1").setResultsName("header211") + structX \
            | Literal("D2").setResultsName("header212") + structY \
            | Literal("D3").setResultsName("header213") + structZ

header22 =  Literal("E1").setResultsName("header221") + structX \
            | Literal("E2").setResultsName("header222") + structY

header23 =  Literal("F1").setResultsName("header231") + structZ

header =    Literal("AA").setResultsName("header11") + header21 \
            | Literal("BB").setResultsName("header12") + header22 \
            | Literal("CC").setResultsName("header13") + header23

frame = "AA D1 C1 D1 E1 F1 01 02 02 00 00 00 00 03 00"
frame = frame.strip('').replace(' ','')

res = header.parseString(frame)
print(res.dump()) 
```

框架结构是这样的：

```
AA          -- One of multiple tags : header11
    D1      -- One of multiple tags : header21
        C1      -- StructX - tag1
        D1      -- StructX - tag2
        E1      -- StructX - tag3
        F1      -- StructX - tag4  
                -- asn1 part --   
            01          -- Array
            02
                02          -- Variable 1
                    00 00 00 00 
                03          -- Variable 2
                    00 
```

我得到的输出是这样的：

```
['AA', 'D1', 'C1', 'D1', 'E1', 'F1', '01', '02', '02', '00000000', '03', '00']
- Array: ['01', '02', '02', '00000000', '03', '00']
  - Variable 1: ['02', '00000000']
  - Variable 2: ['03', '00']
- Variable 1: ['02', '00000000']
- Variable 2: ['03', '00']
- header11: AA
- header211: D1
- tag1: C1
- tag2: D1
- tag3: E1
- tag4: F1 
```

但我想要的是这样的：

```
['AA', 'D1', 'C1', 'D1', 'E1', 'F1', '01', '02', '02', '00000000', '03', '00']
- Array: ['01', '02', '02', '00000000', '03', '00']
  - Variable 1: ['02', '00000000']
  - Variable 2: ['03', '00']
- header11: AA
- header211: D1
- tag1: C1
- tag2: D1
- tag3: E1
- tag4: F1 
```

有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:29:59.387

改变：

```
asn1 <<     ( (Literal("01") + array).setResultsName("Array") \
            | (Literal("02") + Word(hexnums, exact=8)).setResultsName("Variable 1") \
            | (Literal("03") + Word(hexnums, exact=2)).setResultsName("Variable 2") ) 
```

到：

```
asn1 <<     ( Group(Literal("01") + array).setResultsName("Array") \
            | (Literal("02") + Word(hexnums, exact=8)).setResultsName("Variable 1") \
            | (Literal("03") + Word(hexnums, exact=2)).setResultsName("Variable 2") ) 
```

Group 做了两件事：它在返回的 ParseResults 中创建一个子结构，并且它隔离嵌套解析器中定义的任何结果名称。

# php - 关闭共享主机环境中页面的 mod_security

> ID：11187887
> 
> 赞同：4
> 
> 时间：2012-06-25T10:49:40.687
> 
> 标签：php, security, .htaccess

当我通过其他页面发布方法发布一些混合数据时`html`，我的页面显示错误禁止访问错误。`javascript`

但是当我直接打开该页面时，它会正确显示而没有任何错误。

当我发布数据时，我知道这是与服务器安全相关的问题。

当我搜索时，我找到了**Turn off mod_security** in 的解决方案。`htaccess`文件 。

但我只想为这个页面而不是为我的完整网站这样做。

我的软管环境是共享的。但我可以编辑我的 . `htaccess`文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T22:37:28.067

看看一些[mod_security 和 .htaccess 技巧](http://www.askapache.com/htaccess/modsecurity-htaccess-tricks.html)。有很多不同的方法可以启用或禁用 mod_sceurity。最简单的可能是将`MODSEC_ENABLE`环境变量设置为`On`或`Off`。您可以使用[SetEnvIf](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html#setenvif)来匹配许多事物，包括`Request_URI`：

```
SetEnvIf Request_URI your_page\.php$ MODSEC_ENABLE=Off 
```

或多页：

```
SetEnvIf Request_URI ^/directory/file.*\.php$ MODSEC_ENABLE=Off 
```

或者，如果您需要做一些更复杂的事情，比如匹配查询字符串，请[使用 mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} example_param=example_value [NC]
RewriteRule ^path/your_file\.php$ - [E=MODSEC_ENABLE:Off] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T14:11:31.733

您是否启用了 OWASP 核心规则集？检查您的 Apache 错误日志以查看匹配的规则。您可能会发现它也阻止了其他页面上的一些合法用户。与您的托管服务提供商讨论他们使用的规则集以及他们对误报采取的措施。

* * *

为了解决您眼前的问题，您可以通过添加新的 URI 来防止被阻止`SecRule`（您可以在`.htaccess`文件中执行此操作。

```
SecRule REQUEST_URI "/your/uri" "phase:1,pass" 
```

要将其限制为 POST 请求，您可以使用`REQUEST_LINE`：

```
SecRule REQUEST_LINE "POST /your/uri" "phase:1,pass" 
```

根据当前匹配和阻止请求的规则，您可能必须将这些规则更改为`phase:2`甚至添加第二条相同的规则`phase:2`。

# coronasdk - 如何在 Corona 中获得 Openfeint 的产品密钥？

> ID：11187888
> 
> 赞同：0
> 
> 时间：2012-06-25T10:49:47.247
> 
> 标签：coronasdk, openfeint

我正在尝试从 Corona 示例代码中打开 Game Network 示例代码。我试图打开 OFlandscape，它给了我这个错误：

要在游戏中使用 OpenFeint，您需要获取产品密钥和产品密码。这可以在 OpenFeint 网站上完成。

但是我找不到它。你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:11:41.830

我知道这不是你问的，但 OpenFeint 现在在 Corona 上已过时，将被删除或替换（在他们的[路线图](http://www.coronalabs.com/resources/roadmap/)中）。

# css - 使整个样式覆盖另一个样式

> ID：11187891
> 
> 赞同：0
> 
> 时间：2012-06-25T10:49:55.530
> 
> 标签：css

我有一个默认的 a:hover 样式，但是对于某些事情，我已经编写了一个单独的按钮类，用于当我希望某些东西显示为按钮时。

我希望这样做：

```
.AeroButtonSlim hover
{
color: #FF0000;
cursor:pointer;
box-shadow: 1px 1px 10px 1px #42C0C4;
opacity: 0.70;
} 
```

覆盖默认值，但我不想经常使用 !important 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:51:05.943

AeroButtonSlim:hover` 不是**空格**

```
.AeroButtonSlim:hover
{
color: #FF0000;
cursor:pointer;
box-shadow: 1px 1px 10px 1px #42C0C4;
opacity: 0.70;
} 
```

# php - 查询不返回结果？

> ID：11187896
> 
> 赞同：0
> 
> 时间：2012-06-25T10:50:17.463
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我有 ：

```
$connector = new DBconnector();

    $sql = "SELECT school.name, student-.ClassSize_7, student-.ClassSize_8, degree_o.degree_code, accredit.full_faculty_3,
    accredit.total_faculty_3, accredit.pc_terminal, accredit.stud_fac_ratio, fresh_en.num_appl_offered, fresh_en.num_appl_received FROM school
    INNER JOIN student- ON school.scid = student-.scid
    INNER JOIN degree_o ON school.scid = degree_o.scid
    INNER JOIN accredit ON school.scid = accredit.scid
    INNER JOIN fresh_en ON school.scid = fresh_en.scid
    ORDER BY school.name ASC LIMIT 0, 25";

    $result = $connector->query($sql);
    //$numberRows = $connector->numRows($result);
    $numRows = mysql_num_fields($result); 
```

我的查询没有返回任何结果，我收到这样的警告：

```
Warning: mysql_num_fields() expects parameter 1 to be resource, boolean given in C:\wamp\www\...\academics.php on line 17 
```

和

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in C:\wamp\www\...\academics.php on line 96 
```

不知道为什么，谁能帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:59:07.417

用反引号包裹你的所有``` 列

```
 `student-`.`ClassSize_8` 
```

因为`-`在你的列名中

**建议：**将您的表名从更改`student-`为`student`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:07:19.693

你需要从列表中完成

```
 $sql = "... fresh_en.num_appl_received FROM school,student-, degree_o,accredit ,fresh_en 
INNER JOIN ..."; 
```

# c++ - 如何将 3 个整数连接成 unsigned long long？

> ID：11187898
> 
> 赞同：1
> 
> 时间：2012-06-25T10:50:20.570
> 
> 标签：c++, formatting, c++11

说，我们得到`int A` `333`; 我们想将它们连接成一个（格式为 0/1 int sign, int）`int B` `4444`。如何在 C++ 中进行这种格式化，是否有任何 C++11 工具可以简化流程？`int C` `5454``unsigned long long` `000333 004444 005454 00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:07:36.247

你就是这个意思吗？

```
unsigned int A = 333;
unsigned int B = 4444;
unsigned int C = 5454;

unsigned long long r = A*100000000000000ULL + B*100000000ULL + C*100ULL; 
```

证明它有效：http: [//ideone.com/XWFdU](http://ideone.com/XWFdU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T10:57:21.863

您可以使用[std::to_string从整数创建字符串，根据需要连接，然后使用](http://en.cppreference.com/w/cpp/string/basic_string/to_string)[std::stoll](http://en.cppreference.com/w/cpp/string/basic_string/stol)转换为 long long 。

# iphone - XML解析中的元素

> ID：11187902
> 
> 赞同：0
> 
> 时间：2012-06-25T10:50:32.830
> 
> 标签：iphone, ios

我是iphone开发新手，对解析不太了解。但是我尝试了以下代码来获取距离元素文本。我正在做以下链接的 XML 解析：

[http://maps.googleapis.com/maps/api/directions/xml?origin=30.9165904,75.8634752&destination=30.89314000,75.86938000&sensor=true](http://maps.googleapis.com/maps/api/directions/xml?origin=30.9165904,75.8634752&destination=30.89314000,75.86938000&sensor=true)

请检查我尝试过的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:
(NSDictionary *)attributeDict
{

 currentElement = [elementName copy];
if([currentElement isEqualToString:@"distance"])

{
       NSLog(@"ENTER IN distance");
      text = [[NSMutableString alloc]init];

  {
       dictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:text,@"text",nil];
  }

    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
  {
      if ([currentElement isEqualToString:@"text"])
     {
        [dictionary setObject:text forKey:currentElement];
        [text appendString:string];
        NSLog(@"text....%@",text);
     }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:  
 (NSString *)namespaceURI qualifiedName:(NSString *)qName 
```

{

```
 if ([elementName isEqualToString:@"distance"])
{
    [distanparsingarray addObject:dictionary];

} 
```

}

```
 By using above method I am getting the text both of distance and duration. But I want only distance text. Please tell me what I am doing wrong in above code. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:37:54.430

您必须通过以下方式对其进行管理。在类级别添加 BOOL 变量。当您将 currentElement 标识为距离时设置它。仅当上述 BOOL 为真时，内部找到的字符才会将字符串附加到文本。当 currentElement 不等于距离时，在 didEndElement 中将此 BOOL 设为 false。

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:
(NSDictionary *)attributeDict
{ 
     currentElement = [elementName copy];
     if([currentElement isEqualToString:@"distance"])
     {
         flag = TRUE; //created at class level.
         NSLog(@"ENTER IN distance");
         text = [[NSMutableString alloc]init];    
         {
              dictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:text,@"text",nil];
         }    
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
     if ([currentElement isEqualToString:@"text"] && flag == TRUE)
     {
        [dictionary setObject:text forKey:currentElement];
        [text appendString:string];
        NSLog(@"text....%@",text);
     }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:  
 (NSString *)namespaceURI qualifiedName:(NSString *)qName
{  
     if ([elementName isEqualToString:@"distance"])
     {
         [distanparsingarray addObject:dictionary];
         flag = FALSE;
     }
} 
```

# qt - 计算两个日期之间的天数

> ID：11187903
> 
> 赞同：6
> 
> 时间：2012-06-25T10:50:40.260
> 
> 标签：qt, qdatetime

我试图用 Qt 制作一个程序来计算两个日期之间的天数。问题是我是 Qt 的新手，我还没有让它工作。

我想`QDateTime`这很容易，但我不了解程序的结构。

有人可以为我举个例子吗。例如，只是一个简单的程序，显示距离圣诞节还有多少天。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T16:27:28.283

你的问题很简单。

在 QtCreator 中创建控制台应用程序，并以`main.cpp`这种方式进行编辑：

```
#include <QApplication>
#include <QDate>
#include <QDebug>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    // get current date
    QDate dNow(QDate::currentDate());
    // create other date
    //  by giving date 12.21.2012 (joke about end of the world)
    QDate dEndOfTheWorld(2012, 12, 21);
    qDebug() << "Today is" << dNow.toString("dd.MM.yyyy")
             << "Days to end of the world: "
             << dNow.daysTo(dEndOfTheWorld);

    return a.exec();
} 
```

你会得到如下输出：

> 今天是“18.12.2012”距离世界末日的天数：3

**PS**但我对你的建议是学习 C++（添加到你最喜欢的这个主题[——The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)），然后学习 Qt（我推荐[Jasmin Blanchette & Mark Summerfield 的 C++ GUI Programming with Qt 4](https://rads.stackoverflow.com/amzn/click/com/0132354160)和 Summerfields 的其他书籍）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:56:33.427

你将不得不使用

```
qint64 QDateTime::toMSecsSinceEpoch () const 
```

这将日期时间返回为自 1970-01-01 00:00:00.000 以来经过的毫秒数

因为没有办法直接找到timeSpan。将您的 2 个 dateTime 对象转换为毫秒，使用数学运算减去并转换为天、小时、分钟、秒。

# mysql - 授予承包商 MySQL 权限以处理数据库

> ID：11187904
> 
> 赞同：4
> 
> 时间：2012-06-25T10:50:41.320
> 
> 标签：mysql

我有一个独立承包商/自由职业者帮助对特定数据库进行一些优化。

我创建了一个新用户并授予他们对该数据库的所有权限。

但是，他们要求运行以下命令，我只需要确保这样做不会造成任何安全漏洞：

```
grant super,reload on *.* to 'odeskuser_priv'@'%' identified by 'abc123'; 
grant all on mysql.* to 'odeskuser_priv'@'%' identified by 'abc123'; 
```

如果用户“odeskuser”只能访问一个数据库，那么这些命令是否安全且不会对其他数据库造成任何潜在威胁？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T11:05:21.207

通过看这里：

[http://dev.mysql.com/doc/refman/5.0/en/privileges-provided.html](http://dev.mysql.com/doc/refman/5.0/en/privileges-provided.html)

Super 授予服务器管理权限，所以我想说：

```
grant super,reload on *.* to 'odeskuser_priv'@'%' identified by 'abc123'; 
```

将允许该用户打开服务器上任何数据库的线程，因为`*.*`它表示服务器上的任何数据库和任何表。

编辑：

事实上，在全球范围内给予 super 是非常危险的：

> SUPER 权限使帐户能够使用 CHANGE MASTER TO、KILL 或 mysqladmin kill 来杀死属于其他帐户的线程（您始终可以杀死自己的线程）、PURGE BINARY LOGS、使用 SET GLOBAL 修改全局系统变量的配置更改、mysqladmin调试命令，启用或禁用日志记录，即使启用了 read_only 系统变量，也执行更新，启动和停止从服务器上的复制，在存储程序和视图的 DEFINER 属性中指定任何帐户，并使您能够连接（一次）甚至如果达到由 max_connections 系统变量控制的连接限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:11:06.680

鉴于您授予对 mysql 内部数据库的写访问权限，我相信他们可以将行添加到 grants 表并为自己提供他们想要的任何其他权限。正如 Sammaye 所说，超级也很危险。

# c# - Excel工作表单元格显示日期和时间使用c#

> ID：11187912
> 
> 赞同：0
> 
> 时间：2012-06-25T10:51:06.750
> 
> 标签：c#, excel, datagridview, datagridviewcolumn

我正在将 Excel 工作表导入 DataGridView。我有一个单元格的日期为 05-06-2017。但是在 DataGridView 下显示时，它显示 05-06-2017 AM 12:00:00。

你能帮我如何只显示日期。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:54:59.210

您将需要格式化 DateTime 对象[DateTime Formats](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

```
d.Format("d") 
```

或者，使用带有“d”参数的 DefaultCellStyle.Format 属性设置 gridview 列本身的格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:55:35.353

我认为这是格式问题。如果您的绑定然后使用“MM-dd-yyyy”的字符串格式（假设美国日期格式）。为“.net 自定义日期格式”做一个谷歌。我想你会发现 XAML 绑定有一个“StringFormat”（或类似的）选项。

祝你好运

抢

# c# - 从数据读取 TcpClient 不如套接字

> ID：11187917
> 
> 赞同：2
> 
> 时间：2012-06-25T10:51:19.603
> 
> 标签：c#, .net

我一直认为 TcpClient 会简化我的网络应用程序中的套接字操作。

但是，似乎 TcpClient 需要知道应该从底层套接字读取多少数据。看起来 TcpClient.GetStream(..).Read(..) 调用 Socket.Receive(..) 读取指定的字节数。

TcpClient 公开了一个 NetworkStream ，处理起来可能很烦人。诸如终止字符串和不可靠的 DataAvailable 属性之类的东西使未知 TCP“数据包”的读取变得复杂。

使用 Socket.ReceiveFrom(..) 似乎更面向“数据包”。

我通常使用 TcpClient 来绑定和握手等，阅读我使用

```
 Socket socket = _tcpClient.Client;

        byte[] buffer = new byte[1000];

        IPEndPoint sender = new IPEndPoint(IPAddress.Any, 0);
        EndPoint senderRemote = sender;

        int length = socket.ReceiveFrom(buffer, ref senderRemote);

        string replyString = Encoding.ASCII.GetString(buffer, 0, length);

        return replyString; 
```

缓冲区初始化有一些开销，但它胜过从网络流中一次读取一个字节，并寻找终止字符或字符串。

TcpClient 没有以更好的方式处理读取数据，即 Socket 的方式，是不是有点奇怪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:52:44.833

有些协议有一个固定大小的标头，其中包含有效负载的大小，所以也许这并不*奇怪*。

在您的情况下，您最好`Socket`直接使用 s ，或者您可以编写一个包装器`NetworkStream`来读取缓冲区并允许您进入缓冲区以`Peek()`获取终止字符。

# javascript - Parse.com 日期问题使用 javascript

> ID：11187919
> 
> 赞同：0
> 
> 时间：2012-06-25T10:51:28.323
> 
> 标签：javascript, jquery, parse-platform

我正在构建一个简单的任务管理器，其中一个表单具有标题和描述的两个输入文本字段以及一个使用 jquery datepicker 的日期字段。我已经在表格中显示了我的数据，并使用 parse.com 作为我的后端来存储和检索数据。我的问题是当我使用 parse.js 设置我的日期对象时，我遇到了这些问题，即

```
 var sDate=new Date($(".date-task").val()); //Date {Tue Jun 26 2012 00:00:00 GMT+0530 (IST)}

var todo = new TodoList();

todo.set('dueon',sDate); // this is how I set the value in parse

todo.save(); 
```

但是当我去解析 .com 时，日期会保存到上一个日期，即 Mon Jun 25 2012 18:30:00 GMT

当我在萤火虫中检查帖子时，日期发布为

```
 __type     "Date"

iso   "2012-06-25T18:30:00.000Z" 
```

如何在 parse.com 的数据浏览器中保存正确的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:12:29.737

发布的日期是正确的，因为“Tue Jun 26 2012 00:00:00 GMT+0530 (IST)”与“Mon Jun 25 2012 18:30:00 GMT”相同，并且 Parse 使用GMT 时区中的[Unix 时间戳](http://www.epochconverter.com/).

基本上，您只需将日期从 GMT 转换为您的时区（在这种情况下为 IST）。您可以查看[这个问题](https://stackoverflow.com/questions/3741348/javascript-convert-a-utc-date-object-to-the-local-timezone)以了解它是如何完成的。

# objective-c - 不重复的 UITableView 单元格

> ID：11187920
> 
> 赞同：1
> 
> 时间：2012-06-25T10:51:29.920
> 
> 标签：objective-c, ios, xcode

这可能是一个非常简单的问题，但我有点困惑如何正确地做到这一点。我读到我需要删除这行代码：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

但是，我如何检查单元格是否不为零？我使用的完整代码如下。如果有人也可以解释这一行的目的：

```
static NSString *CellIdentifier = @"Cell"; 
```

完整代码：

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T10:53:10.820

您在发布的代码中使用它。使用静态类型修饰符的原因是为了防止每次调用方法时都创建和初始化变量。“正常”变量会在每种方法中自动创建和删除，实际上您可以这样做：

```
auto NSString* cellId = @"CellId"; 
```

类型修饰符是默认的`auto`（编译器添加它）并且为了节省打字人们不要添加它。通过放在`static`类型前面，您可以更改此行为，以便在程序启动时变量仅初始化一次。之所以调用它，是因为每次调用该方法时，`static`带有类型修饰符的变量中的数据都不会自动从堆栈中删除……它是静态的/不会更改。`static`由此得名。

由于您一遍又一遍地使用单元格 ID，因此只需将其初始化一次，而不是在每次调用该方法时都创建/删除变量，这对性能有一点好处。对于具有大量单元格的表格尤其如此。但是我从未见过 using`auto`和`static`variables 之间的区别，但这至少是它背后的想法。

您不应该删除该`[tableView dequeueReusableCellWithIdentifier:CellIdentifier];`行。您需要它才能从表格视图中取出表格视图单元格。

# android - 在 OpenGL 中实现捏缩放

> ID：11187924
> 
> 赞同：3
> 
> 时间：2012-06-25T10:51:38.313
> 
> 标签：android, opengl-es, pinchzoom

我有在 OpenGL 中绘制一个简单的纹理立方体的代码。

同样成功地实现了平移（平移）和旋转功能。

现在我有以下代码来实现立方体模型的捏缩放。我不知道问题出在哪里，当我点击多维数据集时什么都没有发生。

```
private float mLastTouchX;
private float mLastTouchY;
private static final int INVALID_POINTER_ID = -1;
private int mActivePointerId = INVALID_POINTER_ID;

@Override
public boolean onTouchEvent(MotionEvent event) {
    final int action = event.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = event.getX();
        final float y = event.getY();
        mLastTouchX = x;
        mLastTouchY = y;
        mActivePointerId = event.getPointerId(0);
        break;
    }
    case MotionEvent.ACTION_MOVE: {
        final int pointerIndex = event.findPointerIndex(mActivePointerId);
        final float x = event.getX(pointerIndex);
        final float y = event.getY(pointerIndex);
        final float dx = x - mLastTouchX;
        final float dy = y - mLastTouchY;
        mPosX += dx;
        mPosY += dy;
        mLastTouchX = x;
        mLastTouchY = y;
        invalidate();
        break;
    }
    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }
    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }
    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (action & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = event.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = event.getX(newPointerIndex);
            mLastTouchY = event.getY(newPointerIndex);
            mActivePointerId = event.getPointerId(newPointerIndex);
        }
        break;
    }
    }
    return true;
} 
```

M在这卡了这么多天，也检查了一些d链接实现多点触控，但还是没有得到满意的回应。提前致谢。

# c++ - ATL 服务未显示在 Services.msc 中

> ID：11187925
> 
> 赞同：0
> 
> 时间：2012-06-25T10:51:38.683
> 
> 标签：c++, service, atl

我们有一个用 Visual Studio 6 编写的 ATL 服务，现在需要进行一些更改。这是在新的开发机器上完成的。当它在这台机器上构建时，服务不会出现在 services.msc 中。根据我的阅读，这是设计使然。为了显示它，我在命令提示符中键入“servicename.exe /service”。但是，它仍然没有出现。这里有什么明显缺失的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:30:02.303

我能想到的两个原因，假设服务代码没有被更改破坏：

1.  您必须具有管理权限才能注册服务。如果您的开发机器启用了 UAC（并且应该），那么仅编写命令是不够的。您必须以管理员身份运行 cmd.exe（右键单击 + 以管理员身份运行），然后从那里进行注册。
2.  如果在您尝试注册新服务时服务控制台处于打开状态，则注册可能会失败。我不知道为什么，但我不止一次遇到过这个问题。因此，请确保在运行注册之前关闭 service.msc。

除此之外，您可能会在事件查看器中找到一些线索。

# c# - 同步不同网格中的网格列宽度，或在某个表格中联合单元格的最简单方法

> ID：11187927
> 
> 赞同：2
> 
> 时间：2012-06-25T10:51:47.233
> 
> 标签：c#, wpf

我有 3 个网格宽度 3 列，女巫有宽度 =“自动”。我想使相应列的结果宽度相等。所以我需要这个规则：

> grid[0].column[0].width = grid[1].column[0].width = grid[2].column[0].width
> 
> grid[0].column[1].width = grid[1].column[1].width = grid[2].column[1].width
> 
> grid[0].column[2].width = grid[1].column[2].width = grid[2].column[2].width

wpf中可以吗？

或者：是否有另一种方法来制作表格，可以联合单元格（垂直和水平），其中数据接口是固定的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:21:55.087

您可以使用[Grid.IsSharedSizeScope](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.issharedsizescope.aspx)和[SharedSizeGroup](http://msdn.microsoft.com/en-us/library/system.windows.controls.definitionbase.sharedsizegroup.aspx)属性使不同 Grid 中的列或行共享相同的宽度或高度

```
<Grid x:Name="Grid1" Grid.IsSharedSizeScope="True">
  <Grid.ColumnDefinitions>
    <ColumnDefinition SharedSizeGroup="FirstColumn"/>
    <ColumnDefinition SharedSizeGroup="SecondColumn"/>
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto" SharedSizeGroup="FirstRow"/>
  </Grid.RowDefinitions>

  ...

</Grid>

<Grid x:Name="Grid2" Grid.IsSharedSizeScope="True">
  <Grid.ColumnDefinitions>
    <ColumnDefinition SharedSizeGroup="FirstColumn"/>
    <ColumnDefinition SharedSizeGroup="SecondColumn"/>
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>        
    <RowDefinition Height="Auto" SharedSizeGroup="FirstRow"/>
  </Grid.RowDefinitions>

    ...

</Grid> 
```

# javascript - Javascript中iso格式的日期时间

> ID：11187928
> 
> 赞同：0
> 
> 时间：2012-06-25T10:51:53.797
> 
> 标签：javascript, python, datetime, date, time

在*Python*中，我有以下代码：

```
now =  datetime.now().isoformat()
if "." not in now:
  now = now + ".000000" 
```

我可以在*Javascript*中获得相同的结果吗？

生成的日期时间应该与这个掩码匹配，`%Y-%m-%dT%H:%M:%S.%f`因为日期时间将被保存到数据库中，然后我需要使用这个掩码从*Python代码中检索它。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:54:16.807

你看过[`Date.toISOString()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toISOString)- 生成 ISO 8601 日期的标准函数吗？

这是一个 Chrome 控制台测试：

```
> (new Date()).toISOString()
"2012-06-25T10:55:19.833Z" 
```

请注意，上面的链接包含一个 shim，它为尚未拥有此功能的浏览器添加了对此功能的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:24:17.843

页面上的最后一个示例：[https ://developer.mozilla.org/en/Core_JavaScript_1.5_Reference:Global_Objects:Date](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference:Global_Objects:Date)

```
/* use a function for the exact format desired... */
function ISODateString(d){
 function pad(n){return n<10 ? '0'+n : n}
 return d.getUTCFullYear()+'-'
  + pad(d.getUTCMonth()+1)+'-'
  + pad(d.getUTCDate())+'T'
  + pad(d.getUTCHours())+':'
  + pad(d.getUTCMinutes())+':'
  + pad(d.getUTCSeconds())+'Z'}

var d = new Date();
console.log(ISODateString(d)); // prints something like 2009-09-28T19:03:12Z 
```

# php - opencart 权限被拒绝

> ID：11187930
> 
> 赞同：3
> 
> 时间：2012-06-25T10:52:01.010
> 
> 标签：php, module, opencart

我试图为 opencart 创建一个支付模块。当我尝试在设置页面中保存详细信息时，它给了我错误“权限被拒绝！” 即使我以管理员身份登录。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:15:01.440

您需要为自己设置权限。去

```
SYSTEM > USERS > USER GROUPS 
```

在管理面板中，单击`EDIT`您的用户组旁边的，然后确保选中旁边的框`payment/your-payment-name-here`（或者只需单击`Select All`两个框下）

# java - 创建一个目录，然后在其中创建文件

> ID：11187932
> 
> 赞同：0
> 
> 时间：2012-06-25T10:52:13.567
> 
> 标签：java, file-io, directory, objectoutputstream

我想为一个名为“f”的文件创建一个 ouputStreamWriter 对象，说“out”。我希望这个文件 f 在名为“输出”的目录或文件夹中创建。如果目录“输出”不存在，那么它应该创建它，如果它已经存在，那么它应该在该目录中创建文件“f”。

简而言之，我想要一个名为“输出”的目录，然后我想在我的程序执行期间将不同的文件放入其中。

谁能告诉我如何在java中做到这一点？现在我的以下代码正在当前目录中创建不同的文件。为了方便起见，我想将所有文件放在一个文件夹中。

```
public Dump(String outputFile) throws IOException {
        final FileOutputStream fos = new FileOutputStream(outputFile + "gz.xml");
        final GZIPOutputStream gzfos = new GZIPOutputStream(fos);
        out = new OutputStreamWriter(new BufferedOutputStream(gzfos), "UTF-8");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:34:30.770

它支持开箱即用：

```
final File f = new File("dir/file.txt");
f.getParentFile().mkdirs();
f.createNewFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:55:33.517

您最好的答案是查看 commons IO 库，尤其是 FileUtils。它应该涵盖您需要的大部分内容：

[Commons IO Javadoc](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:57:36.387

您好，您可以使用文件的存在方法来检查您的目录/文件是否已准备就绪，

```
File myOutputDir = new File("path");

if(!myOutputDir.exists())
     myOutputDir.mkdir(); //Returns a boolean if you want to check it was successful.
//Continue with your code the directory should now exist if it did not before. 
```

干杯，

乙

# java - 执行 JSF 导航时，不会调用映射在前向调度程序上的过滤器

> ID：11187934
> 
> 赞同：3
> 
> 时间：2012-06-25T10:52:22.333
> 
> 标签：java, jsf, servlet-filters

我正在尝试使用 Tomcat 7 编写一个带有登录系统的简单 JSF Web 应用程序。

我有两个页面：index.xhtml 和 /restricted/welcome.xhtml。

“/restricted/*”下面的页面只能由登录的用户访问。

直接浏览到welcome.xhtml 会导致我的过滤器被执行，从index.xhtml 转发到welcome.xhtml 会绕过过滤器。我无法想象为什么不执行过滤器。

RestrictedAreaFilter.java：

```
@WebFilter(value = { "/restricted/*" }, dispatcherTypes = { DispatcherType.FORWARD, DispatcherType.REQUEST, DispatcherType.ASYNC, DispatcherType.ERROR, DispatcherType.INCLUDE })
public class RestrictedAreaFilter implements Filter {

@Override
public void destroy() {

}

@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest httpReq = (HttpServletRequest) request;
    User user = (User) httpReq.getSession().getAttribute("user");

    if (user != null && user.isLoggedIn()) {
        chain.doFilter(request, response);
    } else {
        httpReq.getRequestDispatcher("/access_denied.xhtml").forward(request, response);
    }
}

@Override
public void init(FilterConfig arg0) throws ServletException {

}

} 
```

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html">
<head>
<title>Login</title>
</head>
<body>
<h:form id="form">
    <h:panelGrid id="grid" columns="2">
        <h:outputLabel value="Benutzername" for="username" />
        <h:inputText id="username" value="#{login.username}" />
        <h:outputLabel value="Passwort:" for="password" />
        <h:inputSecret id="password" value="#{login.password}">
            <f:validateLength minimum="4" maximum="16" />
        </h:inputSecret>
        <h:message style="color: red" for="password" />

    </h:panelGrid>
    <h:commandButton id="login" value="Login" action="#{login.proceed}" />
</h:form>
</body>
</html> 
```

```
@ManagedBean(name = "login")
@RequestScoped
public class LoginBean {

@ManagedProperty(value = "#{user}")
private User user;

private String username;
private String password;

public void setUser(User user) {
    this.user = user;
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String proceed() {
    user.setLoggedIn(true);

    return "restricted/welcome.xhtml";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:36:05.203

只有在 webapp 代码中的某处调用调度`FORWARD`程序时才会触发调度程序。[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)标准的 JSF 导航处理程序不这样做。它只是调用[`ViewHandler#createView()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html#createView%28javax.faces.context.FacesContext,%20java.lang.String%29)并将其设置为当前视图[`FacesContext#setViewRoot()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#setViewRoot%28javax.faces.component.UIViewRoot%29)。

改为发送重定向：

```
public String proceed() {
    user.setLoggedIn(true);

    return "restricted/welcome.xhtml?faces-redirect=true";
} 
```

顺便说一句，这也是推荐的做法。现在它是一个可添加书签的页面（URL 更改现在反映在浏览器的地址栏中），刷新/F5 页面不会导致不必要地重新执行 POST，并且按下后退按钮不会导致意外。

如果您真的坚持`FORWARD`使用 JSF 调用调度程序，您总是可以使用[`ExternalContext#dispatch()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#dispatch%28java.lang.String%29)方法，但这**不是**推荐的方式。

```
public void proceed() throws IOException {
    user.setLoggedIn(true);

    FacesContext.getCurrentInstance().getExternalContext().dispatch("restricted/welcome.xhtml")
} 
```

# qtp - 如何在 QTP 中以编程方式检测测试脚本中的故障/错误

> ID：11187936
> 
> 赞同：2
> 
> 时间：2012-06-25T10:52:38.243
> 
> 标签：qtp

假设任何语言（如 java 或 c#）的程序执行存在缺陷，我们有异常处理机制，通过它我们可以以编程方式知道存在错误，如果我们想要记录它，我们可以将它存储在txt 或 xls 文件。

在 QTP 中，如果我正在执行十个脚本并且两个脚本失败，并且我想在 xls 文件中记录失败的文件，那么我该怎么做呢？因为似乎没有任何机制以编程方式通过它我可以检测到发生了错误并相应地在日志中输入了一个条目。我该如何处理？（顺便说一句，我不想​​知道恢复方案，因为我对处理错误不感兴趣，但我只想检测错误并记录下来）

先感谢您

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T11:54:36.877

QTP 脚本基于 VBScript，VBScript 中的异常等价物在`On Error`此处[（](http://ss64.com/vb/onerror.html)以及[其他地方](http://blogs.msdn.com/b/ericlippert/archive/2004/08/19/error-handling-in-vbscript-part-one.aspx)）进行了描述。

但是我不明白你为什么需要这个，如果测试失败，这个事实会记录在运行报告中，你不能在默认报告中查看哪个测试失败吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-13T12:47:11.157

QTP 10 具有恢复场景，您可以在测试脚本中调用错误函数。我的想法是编写一个 vbs 函数，该函数可以使用错误信息创建和更新 excel。通过函数调用，您甚至可以在出错时执行更多操作，例如发送邮件或短信。

为了了解恢复方案，以下链接可能对您有所帮助

[http://www.tutorialspoint.com/qtp/qtp_recovery_scenarios.htm](http://www.tutorialspoint.com/qtp/qtp_recovery_scenarios.htm)

# windows-phone-7 - windows phone7中的导航

> ID：11187944
> 
> 赞同：0
> 
> 时间：2012-06-25T10:53:03.020
> 
> 标签：windows-phone-7, windows-phone-7.1

什么样的导航最适合应用程序中的主页按钮，请帮助我，我是新手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:05:14.257

根据您的评论更新了答案，首先您需要创建一个按钮（最好是 Appbar 按钮），然后将此代码放在 click 事件处理程序中

```
NavigationService.Navigate(new Uri("/Home.xaml?home=true", UriKind.Relative)); 
```

然后在事件处理程序的主页中`onNavigatedTo`放置此代码

```
string home;
NavigationContext.QueryString.TryGetValue("home", out home);
if(home != null)
{
    if (home.Equals("true"))
        while(NavigationService.CanGoBack)
           NavigationService.RemoveBackEntry();
} 
```

所以这会清除你所有的后台堆栈

注意：这不是任何可取或推荐的方式，它只是一种解决方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:33:02.173

在每个页面添加一个按钮（因为你想从每个页面回家）把 onClick 做：

```
NavigationService.Navigate("YoursView/HomePage.xaml", UriKind.RelativeOrAbsolute); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:47:57.140

您可能需要查看以下有关应用程序结构和导航模型的 MSDN 文档：-

[http://msdn.microsoft.com/en-us/library/hh202909(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202909(v=vs.92).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:40:32.453

这行得通。

1.  在全局范围内，我在一个类中声明了一个设置为 false 的布尔变量。

2.  然后，每当单击主页按钮时，布尔变量都会设置为 true 并导航回来。

    ```
    Modules.HomeClick = true;
    NavigationService.GoBack(); 
    ```

3.  然后在页面加载事件的每个页面中，我检查了 bool 变量是否返回的条件。

    ```
    if (Modules.HomeClick=true)
    this.NavigationService.GoBack(); 
    ```

这些在每个页面中完成，直到主页。这不存储 backstack。

# java - 如何同时读取和写入 ArrayList

> ID：11187947
> 
> 赞同：0
> 
> 时间：2012-06-25T10:53:14.140
> 
> 标签：java, multithreading

我有两个线程 t1 和 t2 访问`ArrayList`.

我希望线程能够访问它，除非它们在同一个索引上读写。

在不使用任何并发 api 和 java 5 集合的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:23:49.183

好吧，在一个**正确**的程序中，您不能在多个线程之间共享一个可变对象并且不使用任何同步。如果不知道您的应用程序做了什么，就很难想出某种有用的答案。也许您可以`ArrayList`在线程之间拆分，以便每个线程都可以使用自己的版本，然后将结果连接起来。或者，如果您正在实现生产者-消费者场景，则可以取消几个 java 监视器和一个现成的`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:00:24.027

即使两个线程不同时访问同一个索引，如果重新分配 Array 也可能会出现问题，参见。ArrayList.ensureCapacity

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T11:05:52.930

[这](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/concurrent/package-info.java#package-info)可能是一个非常好的起点。仔细研究其中一些问题是如何解决的，真的会有所帮助。[这本书](http://books.google.com/books?id=-x1S4neCSOYC&printsec=frontcover&source=gbs_ge_summary_r&cad=0#v=onepage&q&f=false) 以及[通读](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)这本书也会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T11:47:59.223

它对您没有帮助吗 - [Collections.synchronizedList](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedList%28java.util.List%29)类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T15:23:34.950

我会考虑以下几点：
A. 将您的数据结构更改为 ArrayList 的映射（比方说 - 10 个条目的映射），以减少 ArrayList 上的锁定时间（使用对象的 hashCode() % 10 来执行访问到地图中保存的正确 ArrayList
每个地图条目中的 ArrayList 将被同步（您可以使用 Collections.synchronizedList

B 获得它的同步版本。使用 ReaderWriterLock 以便更好地锁定您的应用程序。缺点使用它，您必须继续使用 ArrayList 的任何场景，并了解是否需要锁定读取或锁定写入

C. 组合 A 和 B

然而，在许多情况下——正确的同步策略依赖于用例——你是否期望读取器比写入器多？如果是这样，请使用 ReaderWriterLock，如果不是 - Rw 锁可能对您没有帮助。

# c# - 从 c# 中搜索 html 值

> ID：11187955
> 
> 赞同：0
> 
> 时间：2012-06-25T10:53:56.397
> 
> 标签：c#, asp.net, html, input, textbox

我有一个根据返回的结果量动态创建的表。在每一行中都有一个单元格（由 c# 代码创建），其文本框类似于

`"<input id='textbox" + i + "'type='text'/`>"

所以 textbox0、1、2 等。

我的问题是，在用户输入内容后，如何在 c# 代码中获取每个文本框的值？

即你不能只去 textbox1.Text 来获取值，因为页面后面的代码不知道 textbox1 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:01:08.103

首先，您应该为您的输入指定一个唯一的名称：

```
"<input id='textbox" + i + "' name='textbox" + i + "' type='text'/>" 
```

然后在服务器端，您可以通过此名称获取每个文本框的值：

```
string textbox1Value = Request.Form["textbox1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:05:52.960

您可以使用 javascript 代码。

```
<script language="javascript">
var txt = document.getElementsByTagName('input');
for(var i = 0; i < txt.length; i++)
{
 // do what you want ...
}
</script> 
```

# mysql - node.JS 中的日期格式

> ID：11187961
> 
> 赞同：21
> 
> 时间：2012-06-25T10:54:20.367
> 
> 标签：mysql, node.js

我正在使用 mysql 数据库，因为我有一个按名称命名的字段`request_date`。该字段的类型为时间戳，该字段中存储的数据格式为`2012-05-16 14:59:18`。但是当我通过 Node.JS 检索相同的数据时，数据在浏览器中显示为

```
Fri Jun 08 2012 15:16:50 GMT+0530 (India Standard Time) 
```

为什么会发生这种格式变化？

我写了这个查询：

```
SELECT
biz_registration.reqid,biz_registration.request_date,biz_registration.req_status,biz_registration.annual_cost,biz_registration.rid,biz_contact.first_name,biz_contact.last_name
FROM biz_registration
INNER JOIN biz_contact ON biz_registration.reqid=biz_contact.reqid
ORDER BY biz_registration.request_date
DESC limit '+start+','+mlimit+'' 
```

我使用的 html 代码是，

```
options +='<div class="column" style="background-color: #E1E1E1;width:         100px;">'+result.reqid+'</div>';
options +='<div class="column" style="background-color: #E1E1E1;width: 160px;">'+result.request_date+'</div>'; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-04-05T13:29:19.950

我遇到了同样的问题，这解决了我的问题：

您需要“强制”您的 mysql 连接以立即对其进行格式化，将其添加到您的配置（连接详细信息）中：

```
host: 'localhost',
user: 'root'
// ....
dateStrings: 'date' 
```

* * *

请注意，在许多情况下

```
dateStrings: true 
```

而不是`'date'`

似乎是需要的解决方案。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-03-01T11:21:21.507

这个配置解决了我的问题，根据 [node-mysql doc](https://github.com/felixge/node-mysql)

```
 host: 'localhost',
  user: 'root',
  password: '',
  dateStrings:true,
  database: "mydb"
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-26T05:54:50.217

我通过要求称为日期格式的库或模块来完成这项工作。首先我们必须使用安装日期格式包

> npm 安装日期格式

然后你可以在你的编码中要求它。然后您可以将检索到的数据的对象创建为

> var day=dateFormat(result.request_date, "yyyy-mm-dd h:MM:ss");

并打印出来。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-12T19:17:11.793

这是[解决方案](https://stackoverflow.com/questions/5129624/convert-js-date-time-to-mysql-datetime/49555117#49555117)：

```
var datetme = new Date().toLocaleString(); 
```

或者

```
const DATE_FORMATER = require( 'dateformat' );
var datetme = DATE_FORMATER( new Date(), "yyyy-mm-dd HH:MM:ss" ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-02T10:22:05.207

您所看到的只是默认的 javascript 日期格式。如果您希望它的格式不同，您可以使用以下方法：

```
getDate(): Returns the date
getMonth(): Returns the month
getFullYear(): Returns the year 
```

在日期对象上，并将结果与​​ / 或 - 或 : 组合以获得您想要的格式。

看看：[http](http://www.elated.com/articles/working-with-dates/) ://www.elated.com/articles/working-with-dates/了解更多详情

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-14T06:32:53.993

有时，您无法`yyyy-mm-dd h:MM:ss`仅使用`new Date().toLocaleString`or来使用（数据库格式）格式化您的日期`new Date().toISOString()`。

为此，我们需要添加 dateformat 包

`npm install dateformat`

然后我们使用

`const dateFormat = require ('dateformat');`

所以要分配一个日期，你可以使用 dateFormat

`var created_at = dateFormat(new Date(), 'yyyy-mm-dd h:MM:ss');`

# javascript - 使用 :checked 选择器

> ID：11187964
> 
> 赞同：1
> 
> 时间：2012-06-25T10:54:34.250
> 
> 标签：javascript, jquery, jquery-selectors

我对 jquery 复选框感到困惑 :checked 选择器。即使在阅读文档之后，我也不知道如何使用它。

**HTML：**

```
<div class="addbox">
<h4><span class="addbox-text">Pick your best work from <b class="highlight-text">Flickr</b> to display in your portfolio</span></h4>
<div class="addbox-buttons"><input type="button" id="addbox-add" value="Add"><input type="button" id="addbox-cancel" value="Cancel"></div>
<div class="addmenu-item" id="addmenu-item-1e30"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info"><input type="checkbox" id="add-check-1e30">Orchid Profiles</span></div>
<div class="addmenu-item" id="addmenu-item-1230"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info"><input type="checkbox" id="add-check-1230">Orchid Profiles</span></div>
</div>​ 
```

**用于检查的 jQuery**：

```
$("#addbox-add").click(function(){
    $("input[type=checkbox] :checked").each( function() {
        alert("yes");
    });
}); 
```

如果单击添加按钮，则有两个复选框，它将显示每个选中复选框的警报消息。但它不起作用。谁能指出错误？

[这是jsfiddle](http://jsfiddle.net/qd4uJ/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T10:55:38.107

删除空间：**工作演示**：http: [//jsfiddle.net/F6pag/4/](http://jsfiddle.net/F6pag/4/)

```
$("input[type=checkbox]:checked").each( function() {
//                     ^ ----- No space!!!
    alert("yes");
}); 
```

你有过：

```
$("input[type=checkbox] :checked")
//                     ^--- Space! NO!!! :) 
```

因此，您的代码在复选框内搜索选定的复选框\ 单选...猜猜看，jQuery 没有找到任何这些。

如果没有空格，则将其视为额外的过滤器信息。

就像：

```
$("input[type=checkbox]").filter(':checked').each( function() {
    alert("yes");
}); 
```

顺便说一句，**后者更快。**

# ios - 使用 MFMessageComposeViewController 到 Google 地图的 SMS 链接

> ID：11187965
> 
> 赞同：3
> 
> 时间：2012-06-25T10:54:36.527
> 
> 标签：ios, sms, mapkit, mfmessagecomposeview

我想知道是否可以构建一个 SMS 来发送 Maps 位置的详细信息，它至少可以链接到 iOS Maps 或 Mobile Web Google Maps，其方式与通过实际 Maps 应用程序构建的方式相同，当用户通过短信点击“分享”时。例如看图片：

![在此处输入图像描述](../Images/aba816669ae98b4f66fd51c8f370a835.png)

我搜索了 SO 和其他网站，但没有找到明确的答案。（我不关心 iOS < 5.0）。

似乎唯一合适的解决方案是构建 HTML 链接，然后使用 Google URL 缩短器将其缩短，然后再将其附加到 SMS 消息中。我正在实施，直到找到更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-19T12:57:01.847

跳过一行并缩进八个空格。这是列表的四个空格和触发代码块的四个空格。

# iphone - 如何制作 NSDictionary 并在 iPhone 中解析它？

> ID：11187969
> 
> 赞同：0
> 
> 时间：2012-06-25T10:54:51.933
> 
> 标签：iphone, nsdictionary

我必须在下面做 NSDictionary

```
{"aps":{"sound":"default",
"alert":{"body":"From Franklin Av To Grand Army Plaza03:56:30 - 03:58:30",
"action-loc-key":"View"},"badge":1},"user_id":"1","start_station_id":"239N","node_id":"75"} 
```

我也想解析它并获取“从富兰克林大道到大军广场03:56:30 - 03:58:30”文本和所有 id 即 1,239N,75。如果有人知道该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:14:21.910

如果您使用的是 iOS 5.0 及更高版本，请尝试以下操作：

```
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:kNilOptions 
                                                           error:&error]; 
```

其中 responseData 是 NSData（你得到的响应）而不是 NSString。要获取文本“From Franklin Av To Grand Army Plaza03:56:30 - 03:58:30”，您可以使用：

```
[[[json objectForKey@"aps"] objectForKey@"alert"] objectForKey@"body"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:13:45.860

我假设将上述响应主要存储在 NSData（以下代码段中的数据）中，存储在 NSDictionary 中：

```
 NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                          JSONObjectWithData:data
                          options:kNilOptions 
                          error:&error]; 
```

现在你有了 NSDictionary json。用于`[[[json objectForKey:@"aps"] objectForKey:@"alert"] valueForKey:@"body"]`您的第一个要求，并用于第二个要求：

```
[json valueForKey:@"user_id"];
[json valueForKey:@"start_station_id"];
[json valueForKey:@"node_id"]; 
```

注意：iOS 5 及更高版本具有可以处理 JSON 响应的 NSJSONSerialization。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T10:59:33.823

使用[TouchJSON](https://github.com/TouchCode/TouchJSON)

```
 // i think you will have a downloaded NSData here, but..you gave us a string
    NSData *responseData = [string dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;
    CJSONDeserializer *deserializer = [CJSONDeserializer deserializer];
    deserializer.nullObject = NULL;
    NSDictionary *JSON_dictionary = [deserializer deserialize:responseData error:&error];
    NSLog(@"%@",[[[JSON_dictionary objectForKey:@"aps"] objectForKey:@"alert"] objectForKey:@"body"]); 
```

您也可以使用任何其他 JSON 解析器库，[其中有很多](https://stackoverflow.com/questions/286087/best-json-library-to-use-when-developing-an-iphone-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T11:03:10.243

试试这个代码

```
NSDictionary *menu = (NSDictionary *) [data objectForKey:@"aps"];
NSDictionary *data = (NSDictionary *) [menu objectForKey:@"alert"];
NSString *com=(NSString *) [data objectForKey:@"body"]];
NSLog(@"Body= %@",com); 
```

# android - 表格行在视图之外扩展，因为图像不会缩放

> ID：11187970
> 
> 赞同：1
> 
> 时间：2012-06-25T10:54:56.717
> 
> 标签：android, scaling, tablelayout, image-scaling

我有一个布局，其中包含下表：

```
 <TableRow
        android:id="@+id/tableRow1a"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dip"
        android:background="#338877"  >

         <TextView
            android:id="@+id/textviewSugarLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"
            android:text="@string/label_sugar"
            android:textColor="#00a7ce"
            android:textColorLink="#00a7ce"
            android:textSize="16sp" />

        <Button
            android:id="@+id/button_sugar_0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:text="TEST" />

        <ImageButton
            android:id="@+id/button_sugar_1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off"
            android:scaleType="centerInside"
            android:adjustViewBounds="true" />

        <ImageButton
            android:id="@+id/button_sugar_2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off" 
            android:scaleType="centerInside" 
            android:adjustViewBounds="true" />

        <ImageButton
            android:id="@+id/button_sugar_3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off"
            android:scaleType="centerInside"
            android:adjustViewBounds="true"  />

        <ImageButton
            android:id="@+id/button_sugar_4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off"
            android:scaleType="centerInside"
            android:adjustViewBounds="true"  />

        <ImageButton
            android:id="@+id/button_sugar_5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off"
            android:scaleType="centerInside"
            android:adjustViewBounds="true"  />

        <ImageButton
            android:id="@+id/button_sugar_6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:src="@drawable/button_sugar_off"
            android:scaleType="centerInside"
            android:adjustViewBounds="true"  />

    </TableRow>
</TableLayout> 
```

我得到的是，表格行在视图的右边框之外扩展（因为按钮图像没有缩放，因此很大）。我需要的是对图像进行缩放以实现这一点。我没有一个想法，为什么它不这样做 8)

任何指针表示赞赏！

最好的问候，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:29:31.460

找到解决方案：添加

android:stretchColumns="true" android:shrinkColumns="true"

给你的

```
<TableLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:01:19.417

在这种情况下，仅将您的 ImageButton 宽度和高度设置为`wrap_content`不起作用，因为它只会使您的 View 与其源（原始）大小一样大。您是否考虑过使用不同的视图组进行布局，例如 LinearLayout 或 RelativeLayout？

# php - 增加最大执行时间

> ID：11187978
> 
> 赞同：1
> 
> 时间：2012-06-25T10:55:30.660
> 
> 标签：php

我的代码从 xml 文件中读取并将数据保存在 mysql 数据库中。通过代码，它迭代了大约 8000 次。在本地主机中，我在 index.php 中添加了以下代码：

```
 ini_set('max_execution_time', 8000);
    ini_set('memory_limit','512M'); 
```

但它在服务器中不起作用。我应该怎么做才能让它在服务器上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:22:17.353

尝试`set_time_limit(0)`将其设置为无限。

# jquery - Jquery Jcrop 选择

> ID：11187983
> 
> 赞同：0
> 
> 时间：2012-06-25T10:55:39.870
> 
> 标签：jquery, jcrop

不知道我的 jcrop 选择中发生了什么。我想我按下了键盘上的一些键，使选择的句柄从正方形变成了点。我使用 mozilla firefox 作为我的浏览器。

![在此处输入图像描述](../Images/a95edcc5432ba2a42a5edc5a8e9f2e13.png)

原始手柄必须呈方形，如下所示。

![在此处输入图像描述](../Images/cfe11e9a02a321a336a58f96ace66f69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:19:10.513

正方形是css的一部分。自带的默认css是这样的：

```
.jcrop-holder{direction:ltr;text-align:left}
.jcrop-vline,.jcrop-hline{background:#FFF url(Jcrop.gif) top left repeat;font-size:0;position:absolute}
.jcrop-vline{height:100%;width:1px!important}
.jcrop-hline{height:1px!important;width:100%}
.jcrop-vline.right{right:0}
.jcrop-hline.bottom{bottom:0}
.jcrop-handle{background-color:#333;border:1px #eee solid;font-size:1px}
.jcrop-tracker{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;height:100%;width:100%}
.jcrop-handle.ord-n{left:50%;margin-left:-4px;margin-top:-4px;top:0}
.jcrop-handle.ord-s{bottom:0;left:50%;margin-bottom:-4px;margin-left:-4px}
.jcrop-handle.ord-e{margin-right:-4px;margin-top:-4px;right:0;top:50%}
.jcrop-handle.ord-w{left:0;margin-left:-4px;margin-top:-4px;top:50%}
.jcrop-handle.ord-nw{left:0;margin-left:-4px;margin-top:-4px;top:0}
.jcrop-handle.ord-ne{margin-right:-4px;margin-top:-4px;right:0;top:0}
.jcrop-handle.ord-se{bottom:0;margin-bottom:-4px;margin-right:-4px;right:0}
.jcrop-handle.ord-sw{bottom:0;left:0;margin-bottom:-4px;margin-left:-4px}
.jcrop-dragbar.ord-n,.jcrop-dragbar.ord-s{height:7px;width:100%}
.jcrop-dragbar.ord-e,.jcrop-dragbar.ord-w{height:100%;width:7px}
.jcrop-dragbar.ord-n{margin-top:-4px}
.jcrop-dragbar.ord-s{bottom:0;margin-bottom:-4px}
.jcrop-dragbar.ord-e{margin-right:-4px;right:0}
.jcrop-dragbar.ord-w{margin-left:-4px}
.jcrop-light .jcrop-vline,.jcrop-light .jcrop-hline{background:#FFF;filter:Alpha(opacity=70)!important;opacity:.70!important}
.jcrop-light .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#000;border-color:#FFF;border-radius:3px}
.jcrop-dark .jcrop-vline,.jcrop-dark .jcrop-hline{background:#000;filter:Alpha(opacity=70)!important;opacity:.7!important}
.jcrop-dark .jcrop-handle{-moz-border-radius:3px;-webkit-border-radius:3px;background-color:#FFF;border-color:#000;border-radius:3px}
.jcrop-holder img,img.jcrop-preview{max-width:none} 
```

您还需要 Jcrop.gif 文件，该文件也是 Jcrop 下载的一部分 - 对于上述 css，它需要与 css 位于同一文件夹中。所以我怀疑 gif 或 css 现在超出了范围

# iphone - 企业应用程序分发 (Wi-Fi) 有时会显示“无法下载应用程序”

> ID：11187984
> 
> 赞同：3
> 
> 时间：2012-06-25T10:56:01.630
> 
> 标签：iphone

[我们有一个内部开发的 iPhone 应用程序，并按照苹果文档](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)通过 wi-fi 分发

大约 60% 的员工设备可以毫无问题地下载该应用程序。对于 40%，安装过程在 75% 处停止，并显示消息*“无法下载应用程序”*。

有人遇到过这种情况或知道如何获得更具描述性的错误消息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:10:22.770

当设备没有正确的操作系统版本时，我们有时会得到这个。例如，如果您将最低操作系统设置为 5.1，您将在任何具有 5.0 或更低操作系统版本的设备上收到此错误。

此外，如果您有一个安装失败的设备，您可以将其插入您的开发机器，然后在 Xcode 管理器中选择该设备并单击控制台窗口，运行安装，发生的事情的详细信息将显示在控制台中

# c# - Visual Studio 大型解决方案

> ID：11187985
> 
> 赞同：5
> 
> 时间：2012-06-25T10:56:11.057
> 
> 标签：c#, visual-studio

我为我的 web 应用程序提供了一个解决方案，其中包含近 12 个项目和 3 个网站。我将一些项目用于多个网站，例如 MyProject.BE / MyProject.BLL / MyProject.DAL / MyProject.Controls 项目。

我的问题是，为 BE/BLL/DAL/Controls 创建多个项目是否更好，或者为 BE/BLL/DAL 层创建一个带有文件夹的项目是否更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T11:04:59.280

“大”的问题是一个相对的问题。在软件开发中，主要是您的 PC 有多好的问题。如果您可以在 1 秒内编译和运行 100 个项目，那么解决方案中的 100 个项目是“小”的。所以这真的是一个对你有用的问题。

我目前的工作解决方案中有大约 130 个项目。是的，我们可以打破它，但我们有一些令人印象深刻的盒子可以处理这个问题，因此拥有 130 个项目的成本适中到低，优势比成本更大。

如果您可以快速编译、运行和测试它们，那么将所有项目都放在一个解决方案中是可行的。该死的......然后开始讨论什么是“快速”，这是一个风格问题。如果您经常（每分钟或更快）编译和运行测试，那么快就是几秒钟。如果您每隔一小时左右编译和运行一次，那么几分钟就可以了。

答：“做对你有用的事”。

注意：考虑解决方案文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:09:23.907

我认为拥有多个项目确实更好。例如，如果您需要构建一个 WinForms UI，它将使用 BE 和 DAL 层中的一些现有类，您只需从 WinForms 项目中引用这些项目即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T11:30:43.677

据我了解您的问题，您指的是如何组织解决方案，而不是如何更快地编译代码或如何制作 VS-open-my-代码更快，对吧？

如果是这样，我会说，将解决方案中的类分解为多个项目，其名称清楚地表明它们的用途。您已经通过您提供的“BE/BLL/DAL/Controls”示例开始了类似的方法。

拥有指定的项目为您的解决方案架构提供了很大的灵活性。考虑一下您的解决方案会随着时间的推移而增长多少，以及它在未来可能存在多长时间。考虑如何将它部署到最终用户，以及更重要的是如何部署更新。所有这些考虑因素都会影响您的决定，您将在多大程度上深入细节。

分析您的代码并检查是否有可能应用经过时间验证的设计模式，例如单一职责模式。

它是一个短期的短期工具，在开发过程中运行了几次，然后就再也没有了？那么这将不值得付出太多努力。它是需要维护几年的工具或应用程序吗？然后去确认 SRP 模式是经过仔细实现的。

我推荐微软出版社的这本书：[Building Enterprise Applications with Windows Presentation Foundation and the Model View ViewModel Pattern](https://rads.stackoverflow.com/amzn/click/com/0735650926)

这为您提供了一些关于如何构建良好项目结构的建议、建议和基础知识。

关于如何构建解决方案的另一个建议是在这个 SO 线程中：[Mvvm Applications And location of Business layer](https://stackoverflow.com/questions/8859965/mvvm-applications-and-location-of-business-layer)

# facebook - Facebook 中的好友和好友列表

> ID：11187988
> 
> 赞同：1
> 
> 时间：2012-06-25T10:56:18.423
> 
> 标签：facebook, cordova, facebook-javascript-sdk

我如何使用 JS SDK 找出朋友是否在例如熟人或好朋友或另一个自定义的朋友列表中。我在 phonegap 中使用单页 javascript 应用程序。

主要问题是我需要不同的数据集，这些数据集在回调函数之外是不可用的。

我试着像这样查询我所有的朋友列表，

```
FB.api('me/friendlists'){
}); 
```

我所有的朋友都喜欢

```
 FB.api('me/friends', function(friends){
 friends.data.forEach(function(friend){
 });
 }); 
```

但他们都使用回调函数，我需要比较 2 个结果并将属性列表名和/或 id 添加到好友结果中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T11:29:04.903

使用`read_friendlists` [权限](https://developers.facebook.com/docs/authentication/permissions/)，您可以访问用户的朋友列表。

然后，调用`/[USER_ID]/friendlists`获取好友列表列表 ID，然后调用`/[FRIEND LIST ID]`获取该列表中的好友列表。

然后，您可以存储这些并检查特定的 uid 是否在其中一个列表中

# jquery - 浮动元素而不将其移动到主体

> ID：11187990
> 
> 赞同：0
> 
> 时间：2012-06-25T10:56:18.850
> 
> 标签：jquery, html, css, css-float

我想浮动一个元素，使其保持在其右侧和底部的元素之上。这很容易实现将元素移动到主体，然后使用 position: absolute 和 top left javascript 将其定位在相对元素旁边。

我不能使用这种方法，因为项目需要留在其父项中，因为父项可以随时更改（分页场景）。

有没有办法让物品留在原来的容器里让它漂浮？

我尝试使用 position: relative; 但如果我需要它，它就行不通

更多信息：标记看起来像这样，伪代码

```
<parent>
       <sibling></sibling>
       <my-float-element></my-float-element>
</parent>
<parent-sibling></parent-sibling> 
```

以及显示所需结果的图像 ![在此处输入图像描述](../Images/ecab8a168aa5f24f12d5a21d648a5b9e.png)

*   蓝色：父母
*   紫色：父兄弟姐妹
*   青色：兄弟姐妹
*   红色：我想浮动的元素

编辑：有人更改了标签，我可以在某种程度上使用 javascript 来解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:01:06.723

让父级拥有`position: relative`并继续使用绝对定位。这会将子元素的位置限定在父元素的左上角，而不是 body 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T11:28:44.363

看看这个

[如何创建重叠的div？](http://jqfaq.com/how-to-create-overlapping-divs/)

# java - 防止浏览器在 gwt 中显示弹出窗口警告

> ID：11187992
> 
> 赞同：3
> 
> 时间：2012-06-25T10:56:26.750
> 
> 标签：java, gwt

在 GWT 中，当我单击按钮打开 URL 最初设置为的弹出窗口时`Window.open(URL,"_blank","")`，我的浏览器 (Firefox) 会打开该窗口，而不要求允许弹出窗口。但是，当我从 GWT/fetch URL from database 中的 RPC 调用中获取 URL 并使用`Window.open(URL,"_blank","")`时，我的浏览器会要求允许弹出窗口。

如何在不更改浏览器属性的情况下防止浏览器显示此警告？如果我在按钮的`onSubmit()`方法中设置全局变量以设置 URL，则需要双击才能打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:08:36.657

你有使用：

```
Window.open(GWT.getModuleBaseURL()+ "ServletFile"+ String uri of file, "parameter name", ""); 
```

你可以试试效果很好。

# jquery - flexslider中的jquery flexslider

> ID：11187994
> 
> 赞同：0
> 
> 时间：2012-06-25T10:56:29.440
> 
> 标签：jquery, flexslider

我对 flexslider 有疑问。我想在另一个 flexslider 中创建一个 flexslider。试图修复它，但它不能正常工作。

**HTML：**

```
<div id="main-slider" class="flexslider" style="background-color: #000">
    <ul class="slides">
        <li>
            <div id="sec-slider" class="flexslider" style="background-color: #fff; height: 250px;">
                <ul class="slides">
                    <li><img src="img/slide-2.jpg" /></li>
                    <li><img src="img/slide-3.jpg" /></li>
                </ul>
            </div>
        </li>
        <li><img src="img/slide-2.jpg" /></li>
        <li><img src="img/slide-3.jpg" /></li>
    </ul>
</div> 
```

**JS：**

```
$('#main-slider').flexslider({
    animation: "slide",
    slideshowSpeed: 7000,
    prevText: "<i class='icon-chevron-left'></i>",
    nextText: "<i class='icon-chevron-right'></i>",
    controlsContainer: "#main-con"
});

$('#sec-slider').flexslider({
    animation: "slide",
    slideshowSpeed: 3000,  
    prevText: "<i class='icon-chevron-left'></i>",
    nextText: "<i class='icon-chevron-right'></i>"
}); 
```

你有什么解决办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:57:08.837

尝试使用 before 属性延迟辅助滑块的加载时间，如下所示：

```
$(window).load(function () {

     $('#main').flexslider({
         animation: "slide",
         slideshowSpeed: 7000,
         controlsContainer: ".flex-container",
     });

     $('#sec-slider').flexslider({
         animation: "slide",
         slideshowSpeed: 3000,
         prevText: "<i class='icon-chevron-left'></i>",
         nextText: "<i class='icon-chevron-right'></i>"
         before: function (slider) {
             // delay loading this slider
             $('.slide').find('.li').delay(800);
         }
     });
 }); 
```