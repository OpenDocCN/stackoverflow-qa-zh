# StackOverflow 问答 10960000-10960999

# android - Android：Activity恢复后DialogFragments的顺序发生变化

> ID：10960006
> 
> 赞同：4
> 
> 时间：2012-06-09T09:52:27.417
> 
> 标签：android, android-dialogfragment

在我的活动中，打开了两个 DialogFragment。

Dialog1 然后 Dialog2 在 Dialog1 上方（都可以看到，一个重叠另一个）。

我打开了一些其他活动，当我通过任务管理器返回到我原来的活动时，对话框的顺序发生了变化..即我现在看到 Dialog1 超过了 Dialog2。

当我从 TaskManager 恢复活动时，如何保持 DialogFragments 的顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:31:48.877

我对 DialogFragments 的排序也有类似的问题。就我而言，我有一个对话框来设置时间段，因此它还必须启动另一个对话框来选择日期。因此，在显示第二个对话框并更改屏幕方向后，两个对话框的顺序颠倒了，类似于您的问题。

所以，我的解决方案是创建一个看起来像对话框的 FragmentActivity。然后我用第一个对话框替换了它。这样我就可以更好地管理保存实例状态和 Activity 生命周期之类的东西。这个活动像往常一样调用了第二个对话框，没有携带其他东西。

我的另一个活动，实际上调用了前一个（第一个）对话框，然后只是调用新的活动以获得结果，就是这样！

这里更详细地介绍了如何使活动看起来像一个对话框：

```
class MyDialogActivity extends FragmentActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_dialog_layout);

    LayoutParams params = getWindow().getAttributes();
    params.height = LayoutParams.WRAP_CONTENT;
    params.width = LayoutParams.WRAP_CONTENT;
    getWindow().setAttributes((android.view.WindowManager.LayoutParams) params);

    setTitle("my dialogs title");
    setTheme(DialogFragment.STYLE_NORMAL);
    // ...
} 
```

我希望，它会帮助你，或者至少给你一个想法来解决那个丑陋的 android 错误！问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T12:42:59.757

我遇到了类似的麻烦。我创建了 DialogFragment 的第一个实体。然后我在第一个之上创建了第二个。当我旋转手机时，问题出现了。在这种情况下，第一个 DialogFragment 重定位于第二个。

似乎问题是我在我解雇另一个 DialogFragment 的同一个地方（方法）创建了第一个 DialogFragment。

我做了一种：

```
FirstDialogFragment a=FirstDialogFragment.newInstance(...);
a.show(getSupportFragmentManager(),"");
anotherDialogFragment.dismiss();
    .....
// then somewhere in another method
SecondDialogFragment b=SecondDialogFragment.newInstance(...);
b.show(getSupportFragmentManager(),""); 
```

当我在“FirstDialogFragment.newInstance()”之前放置“anotherDialogFragment.dismiss()”时，问题就解决了。

# c# - 如何在 Visual Studio 中恢复文件窗口表单文件

> ID：10960018
> 
> 赞同：0
> 
> 时间：2012-06-09T09:53:52.333
> 
> 标签：c#, visual-studio-2010

我在 Visual Studio 2010 中创建了一个表单。不知何故，我的计算机重新启动了。重新启动后，我无法打开表单。它将图标显示为 C# 文件，但是当我双击该文件时，它会在记事本中打开并在记事本中显示为空白。它也给了我错误：`No suitable editor to open the file.`

请帮我恢复文件。我花了很多时间来制作这个表格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:15:47.903

在工具 - 选项 - 环境下，您会找到自动恢复页面

![自动恢复页面](../Images/66e6e0b2e96f1422ad5768b883c69eca.png)

请注意，您可以通过取消选中保存自动恢复信息来选择退出自动恢复功能。我很好奇是否有人选择退出这里，为什么。

页面的其余部分是不言自明的，但是您知道 VS 将这些自动恢复的文件保存在哪里吗？它们保存在*\...\My Documents\Visual Studio \Backup Files\*中。

![自动恢复目录](../Images/f002a7ad736ae32198dedf5dcb4131b4.png)

如果您（希望）从未见过“自动恢复”对话框，请看下面的样子。下次启动 VS 时它会弹出。您可以选择使用备份文件或忽略它。

![自动恢复启动](../Images/ede02c30d4dcbc0c0cd7d9da41cb0c33.png)

# android - 如何将 android sdk 的附加组件复制到 android android sdk

> ID：10960021
> 
> 赞同：1
> 
> 时间：2012-06-09T09:53:58.220
> 
> 标签：android

谁能告诉我将android sdk中已安装的插件复制到android android sdk的步骤。

我的问题是现在谷歌现在不提供插件（这是相当旧的 sdk）。

现在我想将此添加复制到新的 sdk 中，以便在创建新的 android 项目时，它会要求基于此添加创建项目。谁能告诉我我该怎么做？

**更新**

为了澄清更多，在我的旧 sdk api 级别 9 中已安装，但现在不可用。所以我想把这个 api 级别 9 添加到新的 sdk 中，这样当我创建新的 Android 项目时，它应该让我选择使用 api 级别 9 创建项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T09:58:21.920

为 ex **ADT18.zip 解**压缩您的新插件 打开插件文件夹 复制所有**jar**文件到

`eclipse -> plugins`文件夹将所有 jar 文件粘贴到此处。

重启日食...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:59:46.787

这是无法做到的。如果您下载 sdk 组件，则只有它在 avd 管理器中可用。

# c++ - 游戏代码架构源

> ID：10960022
> 
> 赞同：2
> 
> 时间：2012-06-09T09:54:27.237
> 
> 标签：c++, structure

我想知道是否有人对游戏结构有任何好的来源。我知道这很模糊，所以我会尝试解释更多我在说什么。顺便说一句，我对 3d 游戏很好奇，特别是使用 directx 或 opengle，虽然我知道 2d 游戏可能使用类似的结构。

网上有很多书籍和资源可以做一些特定的事情，比如碰撞检测、使用directx 或opengl、渲染、使用着色器等等，但确实缺乏实际游戏结构的资源。

主要是我想知道现代游戏如何组织场景中的对象，何时更新它们，例如更新它们的顺序，动画如何与 phsycis 和渲染交互。还有在哪里发送事件以及如何初始化所有这些。我确定他们将所有这些都放入列表中，但是他们如何保持组织？

当然，我知道有上百万种方法可以做事，而且所有游戏的做事方式都不同，具体取决于他们到底需要什么。但我很好奇他们中的一些人是如何做到的，保持他们的场景、对象和事件井井有条，并且知道何时更新系统和对象以及以什么顺序。

编辑：我正在寻找的更多的是系统和类的布局图等等，如果有意义的话，只是一个游戏循环流程的一般概念。我知道如何做大部分技术性的事情。我知道如何在 3d 和 2d 中制作简单的游戏。我只是想知道大型联赛游戏如何初始化游戏的所有组件，然后通过游戏循环。我只是认为很难保持一切井井有条，因此所有对象都会有效地更新和发送事件。当然，我可以使用蛮力方法，只更新场景中的每个对象，但这是不对的。我想大多数游戏都使用场景图，但即便如此，场景中的对象应该如何在场景图中组织，它们应该何时更新？希望这更清楚我在问什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:01:11.560

我建议您从这里阅读“[如何布局简单游戏的代码](https://stackoverflow.com/q/1258015/889576)”答案。

但是，如果您对**游戏引擎布局**感兴趣，只需访问[gamedev.net](http://www.gamedev.net) - 有很多很酷的链接和主题可供阅读，例如“[游戏引擎布局](http://www.gamedev.net/topic/478268-game-engine-layout/)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:00:28.757

查看 Fabien Sanglard 的网站，对于任何游戏开发者来说，这绝对是令人敬畏的。

他正在审查开源的 IDtech 游戏引擎，这些引擎是一些最先进的引擎，以及其他一些与游戏/渲染相关的引擎。

[http://fabiensanglard.net/](http://fabiensanglard.net/)

他刚刚发布了 Doom3 引擎的代码审查。

# google-chrome - tabs.onUpdated(tab) - 点击链接或输入 URL？

> ID：10960024
> 
> 赞同：1
> 
> 时间：2012-06-09T09:54:45.083
> 
> 标签：google-chrome, google-chrome-extension

我正在开发 chrome 历史扩展。我添加了一个监听器`tabs.onUpdated()`来捕捉各个选项卡的 URL 的变化。但是，我想`onUpdated()`将由单击打开页面中的链接引起的事件与由用户在现有选项卡中手动输入新 URL（或打开书签）引起的事件区分开来。它们都创建`onUpdated()`事件，这些事件本身不允许区分这两种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:57:22.420

答案是：如果在地址栏中手动输入了新的 URL，Chrome 会生成一个新的 tabId。如果用户点击链接，tabId 保持不变。因此，观看 tabId 将告诉您地址更改是如何发生的

# lisp - 为什么 caddr[(ABC)] = C？

> ID：10960025
> 
> 赞同：3
> 
> 时间：2012-06-09T09:54:45.490
> 
> 标签：lisp, cons, cdr

理想情况下在 LISP 中：

```
caddr[(A B C)] = car[cdr[cdr[(A B C)]]] = car[cdr[(B C)]] = car[C] = Undefined. 
```

但书上说答案是`C`。谁能解释一下？

非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-09T09:57:30.077

您的错误是 cdr[(BC)] 是列表 (C)，而不是原子 C。

那么 car[(C)] 就是 C。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T10:01:09.207

(cdr '(bc)) 是列表 (c)，而不是原子 c，所以表达式变为 (car '(c)) 而不是 (car c)

```
? (cdr '(b c))
(C)

? (car '(c))
C 
```

# php - 在 codeigniter 聊天页面中集成 nodejs 聊天

> ID：10960031
> 
> 赞同：2
> 
> 时间：2012-06-09T09:55:48.787
> 
> 标签：php, node.js

我正在考虑在 nodejs 中为社交网站实现聊天系统。我是nodejs的新手。

所以我的第一个问题是：

1.  是否可以仅将 node.js 集成到基于 php 的站点的单个页面中？

2.  我们可以获取到 node.js 的 php 会话吗？所以我们可以得到发送者的当前会话ID。

3.  我们将如何处理端口。

    [http://domain.com/8000](http://domain.com/8000)到[http://domain.com/chat/1002](http://domain.com/chat/1002)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:07:19.870

我在这方面做了一些工作，做起来并不难

对于您的第一个问题，是的，我正在开发一个使用[now.js](http://www.nowjs.com)执行此操作的实时聊天应用程序，并且只是将 now.js 的脚本包含在节点服务器上作为要加载的脚本。

至于会话，您应该能够访问它们，尽管我想知道您为什么需要它们？Now.js 为每个连接的客户端分配一个唯一的 user_id，因此您可以找到唯一标识客户端的方法。

对于端口，我不会太担心，但如果需要，您可以随时使用代理。

# git - git rebase 奇怪的冲突，有意想不到的争吵

> ID：10960034
> 
> 赞同：2
> 
> 时间：2012-06-09T09:56:57.897
> 
> 标签：git, conflict, rebase

我有两个分支：master，joy。有一个名为'hello'的文件，我输入命令'git rebase joy'，有冲突，而且冲突内容很奇怪。

以下是详细步骤

*   1.

git结账大师

猫你好

显示 ==>

```
 Hello world 
```

*   2.

git结帐喜悦

猫你好

显示 ==>

```
Hello world
one line
two line 
```

*   3.

git结账大师

git rebase 喜悦 ==>

```
First, rewinding head to replay your work on top of it...
Applying: cherry-pick
Using index info to reconstruct a base tree...
Falling back to patching base and 3-way merge...
Auto-merging hello
CONFLICT (content): Merge conflict in hello
Failed to merge in the changes.
Patch failed at 0001 cherry-pick 
```

猫你好==>

```
Hello world
<<<<<<< HEAD
one line
two line
=======
add one line
add 2nd line
>>>>>>> cherry- pick 
```

但是我希望找到的是没有冲突，内容是

```
Hello world
one line
two line 
```

*   5.

我下面的版本树在学习后相当复杂

```
* <b04ea3b> 2012-06-09 [yaoyangyong]  (HEAD, joy) test rebase
* <5b595d6> 2012-06-09 [yaoyangyong]  joy clear hello
| * <eeba7d9> 2012-06-09 [yaoyangyong]  (master) clean hello
| *   <1dbc3b8> 2012-06-09 [yaoyangyong]  merge confilct
| |\  
| |/  
|/|   
| * <3cb9d88> 2012-06-09 [yaoyangyong]  modify master 1st line
* | <b1724ad> 2012-06-09 [yaoyangyong]  test merge
| *   <89a692f> 2012-06-09 [yaoyangyong]  merge from joy
| |\  
| |/  
|/|   
* | <dc96da9> 2012-06-09 [yaoyangyong]  modify second line
| *   <816f575> 2012-06-08 [yaoyangyong]  joy
| |\  
| |/  
|/|   
* | <93b5982> 2012-06-08 [yaoyangyong]  3line
| * <4400260> 2012-06-08 [yaoyangyong]  cherry-pick
* | <233d6f2> 2012-06-08 [yaoyangyong]  2nd line comment
* | <60d6edc> 2012-06-08 [yaoyangyong]  modify hello,add one line
|/  
:
* <b04ea3b> 2012-06-09 [yaoyangyong]  (HEAD, joy) test rebase
* <5b595d6> 2012-06-09 [yaoyangyong]  joy clear hello
| * <eeba7d9> 2012-06-09 [yaoyangyong]  (master) clean hello
| *   <1dbc3b8> 2012-06-09 [yaoyangyong]  merge confilct
| |\  
| |/  
|/|   
| * <3cb9d88> 2012-06-09 [yaoyangyong]  modify master 1st line
* | <b1724ad> 2012-06-09 [yaoyangyong]  test merge
| *   <89a692f> 2012-06-09 [yaoyangyong]  merge from joy
| |\  
| |/  
|/|   
* | <dc96da9> 2012-06-09 [yaoyangyong]  modify second line
| *   <816f575> 2012-06-08 [yaoyangyong]  joy
| |\  
| |/  
|/|   
* | <93b5982> 2012-06-08 [yaoyangyong]  3line
| * <4400260> 2012-06-08 [yaoyangyong]  cherry-pick
* | <233d6f2> 2012-06-08 [yaoyangyong]  2nd line comment
* | <60d6edc> 2012-06-08 [yaoyangyong]  modify hello,add one line
|/  
* <aeae413> 2012-06-08 [yaoyangyong]  add hello file 
```

*   6

作为比较，我重新创建了一个干净的文件夹，其版本树非常简单，如下所示，然后我进行了 rebase，它是成功的。

```
* <0d63388> 2012-06-09 [yaoyangyong]  (joy) add two lines
* <1f9d2f4> 2012-06-09 [yaoyangyong]  (HEAD, master) add hello file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:51:25.800

这对我来说有点奇怪。通常，您永远不想变基 master。变基通常在私有分支上完成，以便在合并时执行快进合并。使用 rebase -i 进行变基还使您有机会在将提交合并到公共分支（主分支）之前压缩和修复提交。

我会在这里看看什么是变基和做什么： http: [//git-scm.com/book/en/Git-Branching-Rebasing](http://git-scm.com/book/en/Git-Branching-Rebasing)

使用您的示例，我希望是这样的：

## 1.

```
git checkout master
cat hello 
```

显示 ==>

```
Hello World 
```

## 2.

```
git checkout joy
cat hello 
```

显示 ==>

```
Hello World
one line
two line 
```

## 3.

此时有两个commit，第一个commit同时存在于master和joy中，第二个commit只存在于joy中。现在我们可以合并，但我们要确保快乐的提交将干净地应用（避免合并提交）。要做到这一点，我们会将喜悦重新建立在大师身上。

*仍在欢乐分支上运行*

```
git rebase master 
```

*或者，您可以使用交互模式，让您可以压缩、修复、重新排序等*

```
git rebase -i master 
```

## 4.

现在我们的joy分支看起来我们想要的样子并重新基于master，我们可以切换到master并进行合并以获得漂亮的历史记录。

```
git checkout master
git merge joy 
```

## 5\. 重要

当您执行 rebase 时，这些提交的 SHA-1 标识符将发生变化。任何基于这些提交工作的人最终都会遇到很多麻烦，因为他们的提交的父级不再存在。这就是为什么你永远不会对公共分支进行变基。

# wpf - DataGrid 选择独立于当前排序的添加项目

> ID：10960040
> 
> 赞同：0
> 
> 时间：2012-06-09T09:58:33.337
> 
> 标签：wpf, datagrid

我在 WPF 中有一个 DataGrid 绑定到一个可观察的集合。在我的 UI 中，用户可以将新元素添加到基础集合中。我想在我的 DataGrid 中选择新添加的项目，但是根据 DataGrid 的当前排序，该项目被添加到底部或顶部，因此使用

```
grid.SelectedIndex = collection.Count - 1; 
```

不适用于所有情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:07:24.497

如果您对添加的项目有参考：

```
grid.SelectedItem = addedItem; 
```

如果您没有参考资料：

```
grid.SelectedItem = underlyingList[underlyingList.Count-1]; 
```

# facebook - Facebook应用程序中的网站网址格式？

> ID：10960041
> 
> 赞同：0
> 
> 时间：2012-06-09T09:58:34.747
> 
> 标签：facebook, facebook-apps

facebook 应用程序的网站 url 的格式是什么。是这样的：-

```
http://www.mysite.com/
or
http://www.mysite.com
or
http://mysite.com/
or
http://mysite.com
or
with index.php like:-
http://www.mysite.com/index.php
or
http://mysite.com/index.php and so on as above or without "http". 
```

任何人都可以建议，什么是正确的格式？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:02:13.543

这完全取决于你。如果您网站的非 www 版本重定向到 www。版本把 www。您的域设置如何？它使用两者还是只使用一个？

例如，我可以访问 www.mysite.com 和 mysite.com 并且它们都显示相同的内容吗？

只要确保你是一致的，你选择一种格式。你选择哪一个对 facebook 来说并不重要。但是，您确实需要应用程序设置中的斜杠或 ? 在 index.php 之后，如果你使用它

# c# - 当我将变量传递给另一个表单 C# 时出现 NullReferenceException

> ID：10960042
> 
> 赞同：-1
> 
> 时间：2012-06-09T09:58:54.057
> 
> 标签：c#, nullreferenceexception

所以我有以下情况；我想将几个变量发送到另一个表单。这是一些代码：

```
// In Form1
Form3 f3 = new Form3();
f3.SetVariables(pieces);
// In Form3
string[] items;
void SetVariables(string[] array)
{
    items = array;
} 
```

现在这**确实**有效，但如果我尝试使用：

```
items[x].Length 
```

它抛出一个`NullReferenceException`，但如果我使用：

```
String.IsNullOrEmpty(items[x]); 
```

（我正在检查是否`items[x]`有值）上面的代码运行良好，没有错误。这背后有什么原因吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:00:53.413

String.IsNullOrEmpty 将首先检查变量是否为空。调用`items[x].Length`when `items[x]`is null 会失败，因为没有对象可以`.Length`调用

# java - Android/Java - 带标准的递归扫描

> ID：10960046
> 
> 赞同：0
> 
> 时间：2012-06-09T09:59:26.693
> 
> 标签：java, android, recursion, directory

我进行了一些搜索并找到了这篇[文章](https://stackoverflow.com/questions/6604885/how-can-i-perform-full-recursive-directory-file-scan)......但我对所有这些 Android/Java 百灵鸟都是新手，所以想要一些建议。

我创建了一些代码来扫描用户 SD 卡，查找所有文件夹，但只显示 *.mp3、*.MP3 等文件。例如，我有：

*   /警报/
*   /DCIM/
*   /音乐/
*   - - - - /一种/
*   ------------/爱丽丝库珀/
*   - - - - - - - - - - - - - - - /垃圾/
*   --------------------------------------------------/曲目1.mp3
*   --------/B/
*   - - - - - - ...ETC
*   /播客/

列出了 sdcard 目录中的所有文件夹，但是，只有位于音乐树顶端的文件夹有 mp3。列表中仅显示 mp3，非常完美。

但是，我想进一步完善这一点，并且只显示列表中包含 mp3 的目录，或者在它们的内部，或者在它们的子目录中。出于其他原因，我希望我的列表保留在树视图结构中，而不仅仅是列出包含音乐的目录。所以结果是：

*   /SD卡/
*   - - - - /音乐/
*   - - - - - - - - /一种/
*   -------------------/爱丽丝库珀/
*   - - - - - - - - - - - - - - - - - - /垃圾/
*   --------------------------------------------------------/track 1.mp3
*   ----------------/B/
*   - - - - - - - - - - ....ETC

谁能让我开始如何创建这个？

我假设我需要点击每个文件夹，然后在子目录中移动，直到找到 mp3。但是，我不确定如何标记 Music 目录最终包含 mp3，因此应该在列表中。

The code that I am using to construct a tree. It is based on [this](http://www.dreamincode.net/forums/topic/190013-creating-simple-file-chooser/) and modded slightly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:14:22.093

In the end I decided to use the android media library along side a simple folder scanner. I still haven't resolved the problem above but I plan on building in the ability for the user to exclude folders from the search using stored strings.

# networking - 网络代码在哪里

> ID：10960047
> 
> 赞同：0
> 
> 时间：2012-06-09T09:59:43.467
> 
> 标签：networking, operating-system

各种 TCP/IP 层的代码在系统中的什么位置存在。它是什么语言，我们如何查看它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:04:19.003

它完全取决于所讨论的操作系统，但它主要是在内核中实现的。举几个例子：Windows 是封闭源代码，因此您无法检查其网络代码，但对于用 C 编写的 Linux，您可以在[GitHub 上](https://github.com/torvalds/linux)轻松浏览其代码。

# arrays - 在 MATLAB 中迭代地插入数组列

> ID：10960049
> 
> 赞同：0
> 
> 时间：2012-06-09T09:59:47.350
> 
> 标签：arrays, matlab

我正在尝试通过在 for 循环中在该数组上附加单个列来构造一个数组。我这样做是通过首先初始化一列零并将我读取的每个新列放在更新向量的右侧。但不幸的是，这部分有效，并且只有在做出限制之后，即只保留第一个 - 例如 - 每个新向量的 500 行。

关于下面关于问题的解决方案，首先我不明白为什么这个零列向量没有出现在最后一个数组中！另一个问题是，即使我从一开始就知道最终数组的总列数，在某些情况下，我也不知道单独列的实际行数。实际上，我想考虑，作为我最终数组中的默认行数，要附加的不同单列之间的行数越大，所以我假设，最好的做法应该是运行整个列数决定更大的行数，然后设置初始数组的适当维度以由单列数据填充，最后根据后者填充第一个。

任何建议将不胜感激！

```
data = zeros(500,1);
for symbol = 1:length(symbol_list),
    [hist_data] = retrieve_data(symbol_list(symbol));
    data = [data hist_data(1:500)];
end 
```

编辑：

让我给你一个输入/输出的例子：

我想放置以下三列（我在每次迭代中检索其中一列）

```
0.402513860949959   0.401546899405730   0.405949059210334
0.401396441661866   0.400288848738267   0.403936753893693
0.400862023741474   0.402233108860710   0.404473368644797
0.411161714570851   0.413612748989126   0.409437055092511
0                   0.414870799656589   0.415071509979105
0                   0.416586323294039   0 
```

一个接一个，最后得到下表（只保留行数较大但行数相同的表 - 因此，这里我只保留第二列）：

```
0.401546899405730
0.400288848738267
0.402233108860710
0.413612748989126
0.414870799656589
0.416586323294039 
```

换句话说，我有很多列，我想一个接一个地附加。它们中的大多数具有相同的非常大的行长度。但是，其他一些具有任意较小的行数（长度）。我什么是找到这个“大”行数，只保留与这个“大”长度相对应的列，最后将一个放在另一个旁边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:31:40.883

我认为您最好使用元胞数组来存储从retrieve_data 获得的数据，因为您正在处理具有不同行数的列。在单元格数组中收集所有内容后，您仍然可以通过填充较短的行或修剪较长的行来转换为标准矩阵。

```
c={[1 2 3 4]',[2 43 5]', [1 2]' , [2 5 6 7 3]'}
sizesC = cellfun(@length,c)
% pad to maximal size with Nan's
for el=1:length(c)
    c{el}(sizesC(el)+1:max(sizesC))=NaN;
end
% Trim to minimal size
c={[1 2 3 4]',[2 43 5]', [1 2]' , [2 5 6 7 3]'}
for el=1:length(c)
    c{el}(min(sizesC)+1:end)=[];
end
% Convert rectangular cellarray to matrix
m=cell2mat(c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:33:11.420

我不确定我是否遵循了您的大部分问题，因此这可能不是您提出的问题的答案...

如果您尝试构建的数据结构不是真正的数组，例如，如果它真的是长度不等的向量列表，那么普通的旧数组可能不是在 Matlab 中使用的最佳数据结构。这可能是实际的选择，但[单元阵列](http://www.mathworks.co.uk/help/techdoc/ref/cell.html)可能是更好的选择。

如果数组是正确或实用的选择，那么大多数有经验的 Matlab 用户通常认为通过在每个循环中添加一个新列来构建它是一个非常糟糕的想法。以这种方式构建数组在时间上可能非常昂贵，并且还可能导致内存问题。无论如何，这是一般的想法，没有人会强迫你遵循这个想法。

一种更好的方法是将数组分配为大块。在理想的 (?) 情况下，您将一次性分配整个数组，使用如下语句

```
data = zeros(500,462); 
```

然后将数据写入循环内的每一列。如果您不知道最终需要的列数，则创建一个可能足够大的数组；如果你用完了空间，一次添加N列，继续循环。必要时重复。N 的一个好的选择在很大程度上取决于您的问题和您的数据。

逐列（或逐行）构建（大）数组的原因是，每当您添加新列 Matlab 时：

1.  为新的更大的数组获取足够的空闲内存；
2.  将旧内存位置的值复制到新内存位置；
3.  返回存储旧版本数组的内存块到空闲内存池（或 Matlab 实际调用的任何内存池）

重复执行此操作可能需要很多时间。它还可能导致过多的内存碎片，返回到池中的内存块都不会大到可以用于同一数组的更高版本；如果你的内存使用模式错误，你最终会发现被释放的块占用的内存对于任何新数组来说都太小了，但是对于这里和那里的奇数标量来说，你需要的内存就太大了。这更多的是概率而不是确定性，但在将数据塞入盒子中的每个字节时值得牢记。

# javascript - 使用名称的按键功能，其中存在多个相同的名称

> ID：10960051
> 
> 赞同：2
> 
> 时间：2012-06-09T10:00:11.987
> 
> 标签：javascript, jquery, html, duplicates

**HTML**

```
<input name="pm" type="text" value="0"/>
<input name="pm" type="text" value="0"/>
<input name="pm" type="text" value="0"/>

<input name="total" type="text" value="0" disabled="disabled"/> 
```

**Javascript**

```
$('[name="pm"]').keypress(function() {

//implementation ?

}); 
```

我有三个文本框，默认值=0，当用户写这三个文本框中的任何一个时，总计必须显示在总计文本框中。按键事件适用于所有三个文本框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:10:13.193

**简单演示** [http://jsfiddle.net/mZBtg/](http://jsfiddle.net/mZBtg/)

请注意：我使用`keyup`了 api，但它会给你与你正在寻找的相同的结果。

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

你也可以做`isNumeric`检查`isNan`；好的链接：[$.isNumeric vs. isNaN](https://stackoverflow.com/questions/8012807/isnumeric-vs-isnan)另请参阅下面的评论。B-)

随意玩耍，希望对您有所帮助。

**代码**

```
$('input[name="pm"]').keyup(function() {
    var sum = 0;
    $('input[name="pm"]').each(function(){
        sum += parseInt(this.value);
    });
   $('input[name="total"]').val(sum);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:03:02.010

```
$('[name="pm"]').keypress(function() {
  var total = $('[name="total"]');
  total.val(parseInt(total.val(), 10) + parseInt($(this).val(), 10));
}); 
```

# combobox - 在组合框中添加新文本

> ID：10960053
> 
> 赞同：0
> 
> 时间：2012-06-09T10:00:27.570
> 
> 标签：combobox

在 asp.net(c#) dev express 组合框控件中。

我有一个名为 country 的组合框。它是从数据库国家表绑定的。但我需要通过组合框向数据库添加一个新的国家名称。我的意思是我必须在组合框中输入新的国家名称，并且应该添加到数据库中，然后绑定到同一个组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:18:45.623

您可以使用 asp 更新面板来实现这一点。在更新面板中拥有组合框和一个按钮以向框中添加额外的项目。单击按钮时，将数据添加到数据库中，然后重新绑定组合框。

个人 id 宁愿使用 jquery、jquery ajax 和 asp webservices 来实现这一点，因为它是一个更好的用户体验。后者将为您提供一些构建一些不错的应用程序的丰富经验。

# flash - Flash游戏和动画

> ID：10960054
> 
> 赞同：1
> 
> 时间：2012-06-09T10:00:38.087
> 
> 标签：flash, animation

我正在帮助一个朋友创建一个小型 Flash 游戏（在 AS 中工作），基本功能是： - 你有一架钢琴，一些瓶子和一个玻璃杯 - 每个键（在钢琴上）代表一瓶不同的酒 - 当一个按下键，瓶子将倒入玻璃杯中，

一般的想法是，通过弹钢琴，您可以制作鸡尾酒。

我知道如何为每个对象设置动画。我想知道的是如何使用这些动画并通过动作监听器触发它们。

在我精通的 Unity3D 中，您在 3dsmax 和模型中创建动画，然后将它们导入 Unity3d，当您的角色简单地行走时，它使用动画行走（在 3dsmax 中制作）。比如说，当你点击“空格”时，它会使用动画跳跃等等。

我将如何在 AS 中完成这样的事情？

意思是首先创建动画，保存它们并在另一个项目中使用它们，这将是游戏，或者在同一个项目中。

希望你理解，如果没有，我会回答任何误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:55:17.037

有时有很多方法可以在 Flash 中实现您的目标。我将为您的项目讨论其中之一。我不会给你所有你需要的东西，但你至少会大致了解要做什么以及要搜索什么术语。

Flash 中的基本思想是您可以通过类似于 Unity 中的 Prefabs 的 MovieClips 来分离事物。影片剪辑有自己的时间线，您可以使用它来控制该影片剪辑中的所有视觉效果（包括嵌套的影片剪辑）。任何代码都可以将这些影片剪辑告知 Play()、Stop()、gotoAndPlay(Frame#) 等，以完全控制要播放该影片剪辑时间线的哪些部分。

您可以使用时间线的不同部分创建几个不同的动画，这些部分都使用您的瓶子图形。其中一部分可能是坐在那里冒泡或其他东西的循环动画。另一部分可以是实际倾倒/倾倒、另一部分连续倾倒和另一部分用于停止倾倒/不倾倒。然后，您可以在另一层添加帧标签以帮助您管理它们，并在另一层上添加停止或“重复”等操作，以便动画在到达其段的末尾时循环或停止。

创建动画后，您可以使用代码调用它们，例如 gotoAndPlay("pouring")，然后您就可以担心 EventListeners。每次发生某些事情时，EventListener 都会调用您创建的函数。如果您为 Key Press 创建一个 EventListener，那么您将需要检查在您编写的函数中按下的特定键。根据按键的不同，您将调用不同的动画和可能的其他功能，例如发出音符声音、液体倾倒声音以及跟踪用户倾倒的“多少”。制作按键按下和按键向上的侦听器通常很有用。

您只需在项目之间拖放即可在项目之间复制您在库中制作的影片剪辑。有时使用库中的文件夹来帮助组织事物很有用，尤其是在项目之间复制时。

搜索教程并在新项目中练习新事物以降低复杂性，直到您确定它是如何工作的以及如何使用它。

多个动画

如果您在时间轴上制作动画并且想要在该时间轴的不同层上播放不同的动画，那么您不仅必须按层分离动画，而且还要按时间水平分离动画。为标签添加一个新图层。为停止操作添加一个新层。在每个动画片段开头的标签层中创建一个帧标签。在每个动画结束的动作层中添加停止命令。现在您已经通过标签和操作定义了起点和终点，是时候使用代码调用它们了。现在您可以引用包含您的动画/图层的影片剪辑并使用 gotoAndPlay("framelabelhere") 命令播放某个动画。

这里的缺点是您的动画是互斥的，这意味着它们必须共享相同的时间线，因此您一次只能播放 1 个。如果您需要并发，则改为通过影片剪辑分隔动画；每个影片剪辑都有自己的时间线，因此可以独立播放。在后一种情况下，您可以使用 myMovieClipInstanceNameHere.play() 开始播放时间线。您可能需要时间线中的初始停止命令，以确保它们不会默认播放。

祝你好运！

# git - 便携式开发环境和 Git

> ID：10960058
> 
> 赞同：4
> 
> 时间：2012-06-09T10:01:07.380
> 
> 标签：git, github, git-svn

我使用可移植应用程序和许多自定义批处理文件创建了一个可移植开发环境。我想让它的所有实例保持最新 - Dropbox 将是一个理想的选择，但我需要它在我的闪存驱动器和我的计算机上同步。我认为 git 会起作用，但 repo 的大小将是一个问题。我需要知道这个想法的可行性以及如何在上传时删除提交以修剪额外的数据。我认为回购至少会使数据的总大小增加一倍。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:56:52.893

如果您的文件主要是文本，Git 将远远少于您的数据大小的两倍。举个例子，我将我的 Vim 配置文件存储在 Git 存储库中，以便我可以轻松地在任何地方获取它们，并保持它们是最新的。配置文件本身不到 3 MB，而`.git`在 683 次提交之后，该目录仅超过 1 MB。它比 Subversion 结帐小，而且小到不用担心。

过去`git gc`常常需要在存储库中运行以从存储库中删除无法访问的数据。在进行大量变基或其他历史编辑之后尤其如此。但是从 Git 1.5 开始，它会在您进行时跟踪无法访问的数据量，并在数据过多时自动修剪它。如果您真的空间不足并且有空闲的时间和 CPU 周期，则可以使用配置选项对其进行调整。有关详细信息，请参阅`git help gc`，但我真的认为您不会发现空间有问题。

# mobile - 通过“通用发布者”发布 iOS 应用并支付低于 99 美元/年的费用？

> ID：10960059
> 
> 赞同：6
> 
> 时间：2012-06-09T10:01:07.503
> 
> 标签：mobile, app-store

所以，我有一个 iOS 应用的想法。经过一番研究，我注意到要在 Apple 的 App Store 上发布应用程序，我必须进入[开发人员计划](https://developer.apple.com/programs/ios/)并每年支付 99 美元。对于一个我什至不知道它是否会销售的简单应用程序来说，这太过分了。

我的概念：正式发布您的应用程序以及其他开发人员的应用程序的“发布者”。发行商拥有的开发者越多，每个人为该开发者计划支付的费用就越少。因此，发行商将支付 99 美元，而其（例如）99 名开发人员每人只需支付 1 美元！

这样的事情存在吗？如果是这样，我在哪里可以找到这些出版商的列表？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-27T21:31:11.297

3 年和赏金，但仍然没有答案，所以我将尝试对事物的状态进行更多的了解。我要提醒一下，这对于这个网站来说有点离题，以及来自[MIT 许可证](https://opensource.org/licenses/MIT)的修改摘录：

> 信息按“原样”提供，不提供任何形式的明示或暗示保证，包括但不限于适销性、特定用途适用性和非侵权保证。在任何情况下，作者均不对任何索赔、损害或其他责任负责，无论是在合同、侵权或其他方面，由信息或信息中的使用或其他交易引起或与之相关。

首先，正如许多评论所指出的那样，**大多数**应用程序在这一点上都失败了。应用商店模式存在相当大的进入壁垒，出售/免费的应用数量之多只是原因之一。

其次，如果此时有更便宜的方式进入应用商店，它可能只会确保更多的铲子。Apple 已经从开发人员那里得到了每年 99 美元的保证，所以我相信他们对这种模式更加满意。他们不需要依赖 many（或者在这种情况下是 many many many）的性能。

但是，有几种不同的方式来发布应用程序，前**三种**是[官方认可的方式](https://developer.apple.com/support/compare-memberships/)：

1.  个人计划（每年 99 美元）
2.  组织计划（每个席位每年 99 美元）
3.  企业计划（每年 299 美元内部分发又名：无应用商店）

现在还有一种颇有争议的[越狱](https://en.wikipedia.org/wiki/IOS_jailbreaking)方法，它显然不受 Apple 的认可，在您所在的国家/地区也**可能不**合法。然而，到目前为止，这在美国和加拿大以及其他一些国家 **是合法的。**

应用商店之外最常见的“商店”是[Cydia](https://cydia.saurik.com/)，一些发行商甚至在这里销售应用。这本身也不是非法的，但它又是一个灰色地带，如果你真的想追求，最好建议你寻求法律委员会。

另一个缺点是您的客户还需要越狱他们的系统才能从这样的商店购买。因此，您可能会针对更高级的用户形式，他们也更有可能规避您对产品可能拥有的任何保护措施。

我不是律师，但据我所知，没有什么能阻止上述出版模式。Apple 允许[转让和销售与](http://venturebeat.com/2013/06/11/apple-is-finally-allowing-developers-to-sell-their-apps-heres-why-and-how/)您所描述的非常接近的应用程序。从理论上讲，您可以与第三方发布实体达成某种**协议，该实体将是付费的 Apple 开发者计划参与者。**他们将使用自己的凭据发布应用程序，并按照上述**协议**规定的任何付款、版税等采取行动。

但是，我不知道有任何现有的出版商在这种模式下工作。然后，您可能会受到 Apple 和这个新实体的规定才能获得批准。如果这种模式流行起来，苹果也很可能会修改他们的服务条款，因为他们有权不时修改。然后，为了与这里的任何额外规定作斗争，需要进一步的合法性。

注意：一段时间以来，[绕过代码签名](https://stackoverflow.com/questions/26822962/bypass-code-signing-with-xcode-6)也是可能的。这又不是苹果希望你做的事情，但至少在上面提到的某些国家/地区，这并没有任何违法之处。这使您可以在越狱设备上进行开发和测试。

我希望这些信息对您有所帮助。

# c# - 如何在 C# 中按类型查找 .cs 文件的路径

> ID：10960071
> 
> 赞同：12
> 
> 时间：2012-06-09T10:03:00.653
> 
> 标签：c#

如何按类型查找 .cs 文件的路径？

功能原型：

`string FindPath(Type);`

返回类似“C:\Projects\.....\MyClass.cs”的内容

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-03-03T14:04:25.367

在 .Net 4.5 中，您可以使用`CallerFilePath`反射属性（来自 MSDN）：

```
// using System.Runtime.CompilerServices 
// using System.Diagnostics; 

public void DoProcessing()
{
    TraceMessage("Something happened.");
}

public void TraceMessage(string message,
        [CallerMemberName] string memberName = "",
        [CallerFilePath] string sourceFilePath = "",
        [CallerLineNumber] int sourceLineNumber = 0)
{
    Trace.WriteLine("message: " + message);
    Trace.WriteLine("member name: " + memberName);
    Trace.WriteLine("source file path: " + sourceFilePath);
    Trace.WriteLine("source line number: " + sourceLineNumber);
}

// Sample Output: 
//  message: Something happened. 
//  member name: DoProcessing 
//  source file path: c:\Users\username\Documents\Visual Studio 2012\Projects\CallerInfoCS\CallerInfoCS\Form1.cs 
//  source line number: 31 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T10:21:35.623

这是不可能的，没有这样的关系。一个类可以是部分的，因此它甚至可以来自多个不同的源文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-09T10:09:40.853

所有类都在程序集（.exe 或 .dll）中编译。我不认为您可以获得类的源文件的路径，因为该类甚至可能不存在（如果您已将 .exe 文件复制到另一台机器）。

但是您可以获得当前正在运行的程序集（.exe 文件）的路径。查看此答案：[获取程序集路径 C#](https://stackoverflow.com/a/917098/80003)

```
string file = (new System.Uri(Assembly.GetExecutingAssembly().CodeBase)).AbsolutePath; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-18T19:53:25.140

如果您在 Visual Studio 中查看，我们可以使用“Go to Defenition 或 F12”直接跳转到特定类型的源代码，我相信这是通过使用 Workspace API 实现的，深入挖掘 Workspace API 功能可能会发现一些解决方案。

此处的文档链接：[工作区](https://docs.microsoft.com/en-us/dotnet/api/microsoft.codeanalysis.workspace?view=roslyn-dotnet)

# android - 只有当应用程序在前台时，如何才能让 Toasts 出现？

> ID：10960072
> 
> 赞同：7
> 
> 时间：2012-06-09T10:03:01.190
> 
> 标签：android

我有一个`Toast`从内部调用的 a `Service`。无论应用程序的状态如何，它总是按设计出现。

如何让它只在我的应用程序在前台时出现，而不是在其他应用程序在前面时出现？也就是说，无需将其移至`Activity`代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T11:18:22.137

姆帕拉兹，

有很多方法可以很容易地做你想做的事。在我这样做之前，我想解决你问题中的一个非常重要的缺陷。App 不是 Activity，Activity 也不是 App。因此，应用程序不能位于前台或后台。这仅保留给活动。

一个简单的例子，然后给你回答。您的服务是您的应用程序的一部分。尽管 Activity 没有加载，但应用程序已加载。如果您的应用程序未加载，您的服务将无法运行。我之所以强调这一点，是因为它是 Android 中的一个重要理念，理解这些术语的正确使用以及定义它们的概念将使您在未来变得更加容易。

**一个简单的解决方案**

您可以扩展 Application 对象并在类中保存一个简单的公共标志。然后，您可以在活动进入后台时将标志设置为 false，在前台设置为 true（当然反之亦然）。

扩展应用程序：

```
public class MyApplication extends Application
{
    static public boolean uiInForeground = false;
} 
```

设置标志：在您的活动中...

```
//This may be done in onStart(), onResume(), onCreate()... 
//... whereever you decide it is important. 
//Note: The functions here do not include parameters (that's Eclipse's job).
public void onStart()
{//Notice the static call (no instance needed)
    MyApplication.uiInForeground = true;
}

public void onPause()
{
    MyApplication.uiInForeground = false;
} 
```

在你的服务中（你叫 Toast 的地方）

```
 if (MyApplication.uiInForeground)
        Toast.makeText(someContext, myMsg).show(); 
```

真的就这么简单。哦，是的...不要忘记告诉清单您正在扩展应用程序。对于您在 AndroidManifest.xml 中的应用程序声明

```
<application android:name=".MyApplication" .... >
   <!-- All other components -->
</application> 
```

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T15:23:22.387

只需放置一些标志

```
public class MyActivity {

    private boolean isInForeground;

    protected onResume() {
        isInForeground = true;
    }

    protected onPause() {
        isInForeground = false;
    }

    private displayToast() {
        if(isInForeground) {
           Toast.makeToast().show();
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T10:32:14.957

我不太擅长，但我认为如果您将 Toast 放在 onResume() 中，它只会在您的应用程序上运行。

# java - 为什么反射找不到方法？

> ID：10960074
> 
> 赞同：0
> 
> 时间：2012-06-09T10:03:04.837
> 
> 标签：java, class, reflection, types, methods

```
public class Test1<Type>
{
    public Type getCompositeMessage(Type... strings)
    {
        Type val = (Type) "";

        for (Type str : strings) {
            val = (Type) ((String)val + (String)str);
        }
        return val;
    }
} 
```

检索方法：

```
try
{
    Class<?> c = Class.forName("test1.Test1");
    Method[] allMethods = c.getDeclaredMethods();
    for (Method m : allMethods) {
        String mname = m.getName();
        System.out.println(mname);
    }

    Method m = c.getMethod("getCompositeMessage");
    m.setAccessible(true);
    Object o = m.invoke(c, "777777777777777777777777");
    System.out.println(m);
}
catch (Exception e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

输出：

```
getCompositeMessage
java.lang.NoSuchMethodException: test1.Test1.getCompositeMessage()
at java.lang.Class.getMethod(Unknown Source)
at test1.Main.main(Main.java:25) 
```

但是方法的名称是完全一样的！为什么我收到 NoSuchMethodException ？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T10:06:43.617

修复拼写错误后，您仍在寻找错误的方法：

该方法定义为：

```
getCompositeMessage(Type... strings) 
```

但你正在寻找

```
getCompositeMessage() 
```

没有参数。

你需要使用：

```
c.getMethod("getCompositeMessage", Object[].class); 
```

下一个问题将是对invoke() 的调用，您传递的是类引用而不是应该调用该方法的对象。

下一个错误是您没有将正确的参数传递给函数：

```
 Object o = m.invoke(new Test1<String>(), new Object[] {
          new String[] {"777777777777777777777777"}}); 
```

下一个问题是您希望在以下行中输出方法的结果而不是方法对象：

```
System.out.println(o); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T10:27:16.867

您可以使用

```
Test1.class.getDeclaredMethod("getCompositeMessage", Type[].class); 
```

（如果是类或接口，那将是正确`Type`的，因为它是您正在寻找的通用参数：）

```
Test1.class.getDeclaredMethod("getCompositeMessage", (Object) Object[].class); 
```

你得到的错误是因为第一个参数需要是一个实例，而不是类 Object。

错误的：

```
Object o = m.invoke(c /* c is a class Object, but it must be an instance */,
                    "777777777777777777777777" /* this must be an array */); 
```

对：

```
Type1<String> t = new Type1<String>();
Object o = m.invoke(t, new Object[]{"foo", "bar"}; 
```

# android - Android 4 源码：编译层

> ID：10960077
> 
> 赞同：1
> 
> 时间：2012-06-09T10:03:26.750
> 
> 标签：android, opengl-es

我正在寻找代码中 Android OS 执行层组合的位置。非常有趣的是，它是如何为原生 OpenGL|ES 应用程序完成的——它以标准方式渲染、交换缓冲区，但以某种方式渲染了由底层组成的图片——例如动态壁纸。Android 源代码中的哪里有这样的代码？

我真的无法理解，Android 如何处理原生应用程序与`eglSwapBuffers`.

欢迎任何关于作曲和/或图形引擎的文章。只是为了清楚起见 - Android 如何将本机 OpenGL|ES 输出与系统组合？

# java - 如何在网站上捕获图像并在其他网页上显示它们

> ID：10960080
> 
> 赞同：0
> 
> 时间：2012-06-09T10:04:32.307
> 
> 标签：java, html

我的问题是我想读取其他网站的 html 数据和图像并将它们显示在我的网页中。我使用了以下代码片段

```
URL iurl=new URL("https://abc.com");
URLConnection uRLConnection=iurl.openConnection();
BufferedReader br= new BufferedReader(new InputStreamReader(uRLConnection.getInputStream()));
String line;
int i=0;
PrintWriter pw=response.getOutputStream();
while((line=br.readLine())!=null)
{
pw.write(line)
} 
```

或者

```
InputStream is= urlconnection.getInputStream();  

  outputStream.close();

OutputStream out=response.getOutputStream();
    int data;
 byte[] dataByte=new byte[1024];
 while((data=is.read(dataByte))!=-1)
 {
     out.write(dataByte);
 } 
```

但两者都无法生成网页的镜像副本，所以我如何生成相同的。请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:10:19.967

您尝试使用的代码`URLConection`仅检索该页面的源代码。

因此，如果`CSS`同一页面的 存储在另一个文件中，它将不会被检索。只有`HTML`部分将被拍摄和显示。

因此，要创建页面的精确镜像，您还必须读取`url of the CSS`文件并将其与 html 代码分开存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:12:26.930

使用 JEditorPane（[在此处](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)阅读更多内容）。您实际上需要的是：

```
JEditorPane jep;
jep.setPage(url); //url is a String 
```

# fonts - 寻找替换“DIN”字体

> ID：10960082
> 
> 赞同：-1
> 
> 时间：2012-06-09T10:05:04.913
> 
> 标签：fonts

最初我使用“DIN”字体作为文本。后来我才知道它很少见，还需要安装。这对网页来说不是一个好主意。现在我正在寻找类似的字体并且通常可用。它也不需要安装在系统上。

寻找建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:07:12.340

您不一定受可能安装在用户计算机上的常见字体的约束。CSS 通过`@font-face`规则支持嵌入字体，但您应该始终检查您希望嵌入的字体是否允许您在其许可中这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:24:53.663

您可能会在可自由嵌入的网络字体集合中找到类似的内容，例如：[http ://www.google.com/webfonts](http://www.google.com/webfonts)

我不知道 DIN 字体，如果是[这个](http://www.myfonts.com/fonts/fontfont/ff-din/)，来自 Google Webfonts 集合的 Dosis 有点类似的感觉。

# android - Android自动启用蓝牙->应用程序需要重新启动才能与蓝牙正常工作

> ID：10960083
> 
> 赞同：1
> 
> 时间：2012-06-09T10:05:18.547
> 
> 标签：android, bluetooth, android-activity

我写了一个小应用程序来与蓝牙设备通信。当我启动应用程序时，蓝牙将自动启用。我用这段代码做到这一点：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();  
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
    }
} 
```

但是在自动启用蓝牙后，我无法在我的应用程序中使用蓝牙。我必须重新启动应用程序或转动我的应用程序正常工作的屏幕。

在启用蓝牙后，我尝试了这种解决方法来重新启动活动：

```
public void onCreate(Bundle savedInstanceState) {
....
    Intent intent = getIntent();
    finish();
    startActivity(intent);
} 
```

但是我的应用程序只会关闭而不会再次启动。有没有人知道如何解决这个问题，我不能使用蓝牙，当我在应用程序启动时启用它？

谢谢

干杯

菲利克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:01:56.737

“但在自动启用蓝牙后，我无法在我的应用程序中使用蓝牙。”

启用蓝牙需要一点时间。您应该监听 BluetoothAdapter.ACTION_STATE_CHANGED 意图以查看适配器何时实际启用。

# mysql - 不能在mysql中复制表

> ID：10960084
> 
> 赞同：1
> 
> 时间：2012-06-09T10:05:22.233
> 
> 标签：mysql, phpmyadmin

我正在尝试使用 phpmyadmin 复制表。它生成以下查询：

```
CREATE TABLE  `agendaeventos`.`diassemamaactivo` (

`idEvento` INT( 11 ) NOT NULL AUTO_INCREMENT ,
 `idExterno` VARCHAR( 16 ) CHARACTER SET utf8 COLLATE utf8_spanish_ci DEFAULT NULL ,
 `nombreEvento` TEXT CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL ,
 `entradilla` TEXT CHARACTER SET utf8 COLLATE utf8_spanish_ci,
 `descripcion` TEXT CHARACTER SET utf8 COLLATE utf8_spanish_ci,
 `diaDeInicio` DATE NOT NULL ,
 `diaDeFin` DATE NOT NULL ,
 `diaDeInicioYFinTexto` VARCHAR( 58 ) CHARACTER SET utf8 COLLATE utf8_spanish_ci DEFAULT NULL ,
 `horarioTexto` TEXT CHARACTER SET utf8 COLLATE utf8_spanish_ci,
 `fotoURL` VARCHAR( 200 ) CHARACTER SET utf8 COLLATE utf8_spanish_ci DEFAULT NULL ,
 `webURL` VARCHAR( 200 ) CHARACTER SET utf8 COLLATE utf8_spanish_ci DEFAULT NULL ,
 `idFuente` INT( 11 ) NOT NULL ,
 `esRevisado` TINYINT( 1 ) NOT NULL DEFAULT  '0',
 `esModificado` TINYINT( 1 ) NOT NULL DEFAULT  '0',
 `fechaActualizacion` DATE DEFAULT NULL ,
 `diasSemanaActivo` CHAR( 7 ) CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL DEFAULT  '1111111',
PRIMARY KEY (  `idEvento` )
) ENGINE = INNODB AUTO_INCREMENT = 372DEFAULT CHARSET = utf8 COLLATE = utf8_unicode_ci 
```

但它返回以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '372DEFAULT CHARSET  = utf8 COLLATE  = utf8_unicode_ci' at line 17 
```

我看不出它有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:08:07.363

像这样分开

```
372 DEFAULT 
```

复制或编辑查询，更正并重新执行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:07:58.510

您在 372DEFAULT 中缺少一个空格

# python - Python：列表理解和函数式编程

> ID：10960085
> 
> 赞同：7
> 
> 时间：2012-06-09T10:05:33.357
> 
> 标签：python, functional-programming, list-comprehension

在我的 Python 学习书中，当我读到 时`List Comprehension`，作者有一个小注释解释：

> Python 的列表理解是该语言支持函数式编程概念的一个示例。

我在维基百科上阅读了有关函数式编程的信息。但我很难想象，因为我`List Comprehension`在解释的 wiki 页面中看不到与此概念之间的任何联系。

请给我一个清楚的解释（如果可以的话，给我更多关于 Java 或 C# 函数式编程的例子：D）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T11:25:34.517

如果您的问题是“给我一些例子来说明 FP 在 python 中的工作原理”，那么：

**什么是纯函数式编程（在 Python 中）？**

它是一种编程范式，它避免了状态和可变数据，而是依赖于函数返回值。这意味着用 python 编写的纯函数式程序不会有变量、状态等。

**不那么纯粹的FP**

您可以将 FP 和命令式范式结合起来，并取得良好的效果（参见[此处](https://gist.github.com/2916956)）。链接的要点是我为几个月前学习的 Python 课程制作的数学测验程序。随意对代码做任何你想做的事情。

**Java/C#中的FP**

我个人没有使用 C# 的经验，因此其他人需要发布 C# 示例，但是您可以在 Java 中使用 FP，但不能使用纯 FP。例子 ：

```
int fib (int x) { 
    if (x < 2) return x;
    return fib (x-1) + fib(x-2);
} 
```

上面的方法完全是FP，但是在使用Java时不能在纯FP上下文中使用。这需要放在`C`Java 中的类中，并且只能在您实例化该类型的对象**后调用。**最后一部分取消了 Java 类`C`作为 FP 的资格，但方法仍然是。

编辑：实际上，您可以在 Java 中使用静态方法，无需任何实例化即可使用。因此，如果您将签名更改为`static int fib (int x)`，那么如果以 FP 方式调用该方法及其方法调用可能仍然是 FP。

* * *

回复：你的评论

递归可能是 FP，但不一定是（见下文）：

```
def f(first, rest):
    print first
    first = rest[0]; rest = rest[1:]
    f(first, rest) 
```

您也可以在没有递归的情况下使用 FP：

```
 def sum (a,b):
     return a+b

 def square(c):
     return c*c

 def square_of_sum (x,y):
     return square(sum(x,y)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T10:19:54.460

Python 的[map()、reduce() 和 filter()](http://docs.python.org/tutorial/datastructures.html)采用一个序列，将您选择的另一个函数应用于它，然后返回一个不同的序列给您，保持原始序列不变。

您可以说这是功能性的，因为它不会触及原始序列，不会触及其内部状态并且不会产生副作用。（尽管您自己提供给它的功能可以执行上述某些操作，例如产生副作用）

[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)是一种不同的编程和构建应用程序的方式，以减少由副作用（直接更改另一个静态位置或进程中的某些值）引起的错误，并减少或消除同步访问共享数据的需要。有些语言会强迫你这样做，比如[erlang](http://www.erlang.org/)，而另一些语言则让你更多地选择当时最适合你的路径（过程或函数），优先考虑编程范围的函数方面，比如[scala](http://www.scala-lang.org/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T17:58:50.450

我相信 Python 的列表推导直接取自 Haskell（一种非常“纯”的函数式语言）。

哈斯克尔：

```
[ x | x <- [1..10] ] 
```

Python：

```
[ x for x in range(1,11) ] 
```

正如人们所提到的，Python 确实允许函数概念，例如`map()`、`reduce()`和`lambda`

虽然这些都是函数式的想法，但它们很少能以纯粹的函数式方式使用，因为 Python 不是递归友好的。

如果您想了解“功能性”语言，请查看“Haskell”、“Scala”、“Clojure”、“Erlang”、“F#”……它们或多或少都具有功能性（尽管有些人可能认为这不是案子）

如果你真的想了解什么是函数式编程，请看这里。[向你学习一个很好的haskell，](http://learnyouahaskell.com/)它易于阅读，有漂亮的图片，会让你大开眼界。

编辑 -

Haskell 阶乘函数的示例（都做同样的事情）：

```
fact1 0 = 1
fact1 n = n * fact1 (n - 1)

fact2 n | n == 0 = 1
        | otherwise = n * fact2 (n - 1)

fact3 n = case n of
            0 -> 1
            _ -> n * fact3 (n - 1) 
```

ps，看看这个[问题](https://stackoverflow.com/questions/9737525/list-comprehension-in-haskell-python-and-ruby)以及它是否相关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T10:15:36.757

我确信其他人能够比我更好地解释它，但函数式编程主要与您如何看待程序流程以及您是否可以将函数作为对象传递以进行计算有关。例如，在 javascript 中，当您提供要在偶数触发时执行的函数时，这是在传递一个函数，从这个意义上说，它几乎就像函数式编程。

这就是列表理解类似于函数式编程的意义，因为您提供的是有关如何计算每个元素的说明，而不是更程序化的方法，即循环并自己进行计算，而不是将其作为函数传递。Python 并不是我真正认为的真正的函数式编程语言，如 LISP 或 ML 或 Haskell，（是 erlang 吗？不记得了）但它可以做类似的事情（查看 python 中的 lambda 表达式）。

Java 和 C/C++ 也不是真正的函数，但您可以使用函数指针作为参数来模拟它。对C#不太熟悉...

事件驱动语言倾向于更多地利用函数传递的这种思想，只是因为它们需要某种方式来传递未知代码以在以后执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T12:10:54.777

我认为很简单 Map 和 Reduce 这两个术语来自 Lisp 和函数式编程。

和蟒蛇有

过滤、映射和减少

参考：http://www.joelonsoftware.com/items/2006/08/01.html

```
 http://docs.python.org/tutorial/datastructures.html 
```

# ruby-on-rails - 控制器中的实例变量是否传递给 Rails 中的规范？

> ID：10960086
> 
> 赞同：2
> 
> 时间：2012-06-09T10:05:42.180
> 
> 标签：ruby-on-rails, ruby, testing, rspec, controller

出于某种原因，我的规范没有通过。似乎`@categories`没有达到规范。

这是控制器：

```
class CategoriesController < ApplicationController
  def index
    @categories = Category.all
  end
end 
```

我的规格：

```
require 'spec_helper'

describe CategoriesController do

  describe "GET #index" do
    category = FactoryGirl.create(:category)
    subject { get :index }
    it { @categories.should include category }
  end

end 
```

错误：

```
Failure/Error: @categories.should include category
     NoMethodError:
       undefined method `include?' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:27:55.470

不，但您可以使用[`assigns`](http://rubydoc.info/gems/rspec-rails/file/README.md#assigns)规范助手访问它们：

```
require 'spec_helper'

describe CategoriesController do

  describe "GET #index" do
    category = FactoryGirl.create(:category)
    subject { get :index }
    it { assigns(:categories).should include category }
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:32:12.553

实例变量是在控制器而不是规范中设置的。

如果您想确保在控制器中设置实例变量，那么您应该使用

```
assigns(:categories).should include category 
```

更多信息请点击这里：

[https://www.relishapp.com/rspec/rspec-rails/v/2-10/docs/controller-specs](https://www.relishapp.com/rspec/rspec-rails/v/2-10/docs/controller-specs)

# cross-compiling - 为基于 ARM 的板交叉编译 lftp-4.3.5 包

> ID：10960088
> 
> 赞同：0
> 
> 时间：2012-06-09T10:05:48.863
> 
> 标签：cross-compiling, embedded-linux, lftp

我正在尝试为基于 arm 的板交叉编译 lftp-4.3.5。我将配置文件执行为：

"./configure --host=arm-montavista-linux CXX=arm-montavista-linux-gnueabi-g++ CC=arm-montavista-linux-gnueabi-gcc --with-openssl=/abcd/xxx/yyy/ssl with_included_readline =没有”

我不得不稍微修改一下配置文件。我添加了“i_cv_posix_fallocate_works=yes”因为我遇到了类似的错误

```
checking for pty.h... yes
checking for library containing openpty... -lutil
checking for _getpty... configure: error: in `/home/xxxx/yyyy/lftp-4.3.5':
checking whether posix_fallocate() works... no
configure: error: cannot run test program while cross compiling
See `config.log' for more details 
```

我无法得到解决方案，所以我像这样修改它并摆脱了这种阻塞。

现在它要求 readline 库，我下载了 lib 源代码（readline-6.2）并交叉编译它。在运行 make 文件时，make 脚本没有从给定位置获取交叉编译的 libreadline.a 文件（我在运行 configure 时添加了 --libdir 路径）。无论如何，我能够提供这个库来制作脚本，但是当脚本读取这个库时，它抛出了很多错误：

```
/bin/sh ../libtool --silent --tag=CXX   --mode=link arm-montavista-linux-gnueabi-g++  -O2 -Wall -Wwrite-strings -Woverloaded-virtual -fno-exceptions -fno-rtti -fno-implement-inlines  -s -o lftp lftp.o complete.o lftp_rl.o attach.o liblftp-jobs.la -lreadline -lutil -ldl 
/home/dev/montavista/tools/arm-gnueabi/bin/../lib/gcc/arm-montavista-linux-gnueabi/4.4.1/../../../../arm-montavista-linux-gnueabi/bin/ld: warning: library search path "/usr/local/lib/lftp/4.3.7" is unsafe for cross-compilation
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `cr':
/home/dev/workspace/readline-6.2/display.c:2465: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `_rl_clear_screen':
/home/dev/workspace/readline-6.2/display.c:2345: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `_rl_clear_to_eol':
/home/dev/workspace/readline-6.2/display.c:2322: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `_rl_move_vert':
/home/dev/workspace/readline-6.2/display.c:2053: undefined reference to `tputs'
/home/dev/workspace/readline-6.2/display.c:2061: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o):/home/dev/workspace/readline-6.2/display.c:1981: more undefined references to `tputs' follow
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `insert_some_chars':
/home/dev/workspace/readline-6.2/display.c:2369: undefined reference to `tgoto'
/home/dev/workspace/readline-6.2/display.c:2370: undefined reference to `tputs'
/home/dev/workspace/readline-6.2/display.c:2379: undefined reference to `tputs'
/home/dev/workspace/readline-6.2/display.c:2386: undefined reference to `tputs'
/home/dev/workspace/readline-6.2/display.c:2395: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `delete_chars':
/home/dev/workspace/readline-6.2/display.c:2412: undefined reference to `tgoto'
/home/dev/workspace/readline-6.2/display.c:2413: undefined reference to `tputs'
/home/dev/workspace/readline-6.2/display.c:2419: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(display.o): In function `rl_redisplay':
/home/dev/workspace/readline-6.2/display.c:1083: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `_rl_set_cursor':
/home/dev/workspace/readline-6.2/terminal.c:728: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `_rl_control_keypad':
/home/dev/workspace/readline-6.2/terminal.c:701: undefined reference to `tputs'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o):/home/dev/workspace/readline-6.2/terminal.c:703: more undefined references to `tputs' follow
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `_rl_get_screen_size':
/home/dev/workspace/readline-6.2/terminal.c:269: undefined reference to `tgetnum'
/home/dev/workspace/readline-6.2/terminal.c:285: undefined reference to `tgetnum'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `_rl_init_terminal_io':
/home/dev/workspace/readline-6.2/terminal.c:452: undefined reference to `tgetent'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `get_term_capabilities':
/home/dev/workspace/readline-6.2/terminal.c:415: undefined reference to `tgetstr'
/usr/local/lib/lftp/4.3.7/libreadline.a(terminal.o): In function `_rl_init_terminal_io':
/home/dev/workspace/readline-6.2/terminal.c:516: undefined reference to `tgetflag'
/home/dev/workspace/readline-6.2/terminal.c:516: undefined reference to `tgetflag'
/home/dev/workspace/readline-6.2/terminal.c:531: undefined reference to `tgetflag'
/home/dev/workspace/readline-6.2/terminal.c:546: undefined reference to `PC'
/home/dev/workspace/readline-6.2/terminal.c:546: undefined reference to `BC'
/home/dev/workspace/readline-6.2/terminal.c:546: undefined reference to `UP'
collect2: ld returned 1 exit status
make[1]: *** [lftp] Error 1
make[1]: Leaving directory `/home/dev/workspace/sslftp/lftp-4.3.7/src'
make: *** [all-recursive] Error 1 
```

现在： 1.是否有人可以帮助我解决这里的问题？2.或者无论如何我可以跳过这个readline lib的添加？（'--with-readline=no' 选项未在配置文件中配置）。

我试图从 4-5 天开始交叉编译，但仍然坚持这一点。任何人都会帮助我。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:43:02.347

考虑到未定义的引用，例如 tputs( [http://linux.die.net/man/3/tputs](http://linux.die.net/man/3/tputs) )，它们似乎是 ncurses 库的一部分( [http://www.gnu.org/software/ncurses /](http://www.gnu.org/software/ncurses/)）。您需要交叉编译并与 ncurses 链接。

# fpdf - FPDF 图像在 MODx Revo 中不起作用

> ID：10960090
> 
> 赞同：1
> 
> 时间：2012-06-09T10:06:23.257
> 
> 标签：fpdf, modx-revolution

我正在使用 MODx 革命 2.2.1-PL 和 FPDF 来生成一些 PDF。我发现使用超过 100kb 的任何图像（至少在那个球场附近）都会导致它们在输出的 PDF 中被损坏。当图像被写入 PDF 时，几乎就好像图像仍然是下载的一半。

这是我用空白模板输出到页面上的片段：

```
require_once($modx->config['base_path']."assets/fpdf/fpdf.php");

define('FPDF_FONTPATH',$modx->config['base_path']."assets/fpdf/font/");

$pdf=new FPDF();
$pdf->AddPage();
$pdf->AddFont('novecentowidedemibold','','novecentowidedemibold.php');
$pdf->SetFont('novecentowidedemibold','',16);
$pdf->Cell(40,10,'text');
$pdf->Image('assets/img/pdf/image.jpg',0,0,-300);
$pdf->Output("myfile.pdf", D); 
```

它发现字体和一切正常，只是图像无法正常工作。如果我使用较小的图像（文件大小），它可以工作。它肯定会找到图像，并且图像本身很好，只是打印到 PDF 时有一半有很多小故障，就好像它从未完成加载一样。

如果我使用此代码并在同一服务器上但不在 MODx 中执行，则无论图像文件大小如何，输出的 PDF 都能完美运行。

我可以做些什么来确保在生成 PDF 之前完全下载图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:55:38.353

除了最简单的 gif 文件之外，我遇到了类似的问题，进入内容类型并标记了我创建为二进制文件的应用程序/pdf，这解决了它，然后我可以看到所有图像。

# ios5 - UIView水平居中使用autoresizingmask不起作用

> ID：10960092
> 
> 赞同：4
> 
> 时间：2012-06-09T10:06:40.870
> 
> 标签：ios5, uiview, autoresizingmask

我在 iOS5 的主-详细信息应用程序模板的详细视图中间将 UIView 居中时遇到问题。视图的宽度小于 iPad 屏幕，无论设备方向如何，它都应始终显示在中心。这是我尝试过的......

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.view setAutoresizingMask:(UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin)];
    [self.view.layer setBorderWidth:2.0F];
    [self.view.layer setBorderColor:[[UIColor orangeColor] CGColor]];

    // Do any additional setup after loading the view, typically from a nib.
    UIView *someContainerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 600.0F, 56.0F)];
    [someContainerView.layer setBorderWidth:2.0F];
    [someContainerView.layer setBorderColor:[[UIColor greenColor] CGColor]];
    [someContainerView setAutoresizingMask:(UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin)];
    [self.view addSubview:someContainerView];

    [self configureView];
} 
```

这是视图的显示方式

![在此处输入图像描述](../Images/35d0785e5632d7a1e0372c3ee28aeb79.png)

有人能告诉我我在这里想念什么吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:38:20.363

好的，这就是我解决这个问题的方法。创建 UIView 时，我改变了这个

```
CGRectMake((0, 0, 660.0f, 56.0F)]; 
```

对这个……

```
CGRectMake((self.view.bounds.size.width-660.0F)/2, 0, 660.0f, 56.0F)]; 
```

由于我使用具有灵活左右边距的 autoresizingmask，因此我实际上需要将 UIView 定位在中心，以便通过在视图旋转时保持左右边距来自动调整大小以发挥其魔力。

# google-app-engine - Google App Engine 空排序顺序

> ID：10960094
> 
> 赞同：0
> 
> 时间：2012-06-09T10:06:47.070
> 
> 标签：google-app-engine, gql

根据 Googles [Documentation](https://developers.google.com/appengine/docs/java/datastore/entities)，空值没有排序顺序。有没有办法配置这种行为。例如，如果我按升序对整数属性进行排序，是否可以将数据存储配置为最后或第一个返回空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T15:22:29.237

您最好的选择可能是将属性另存为空白“”字符串，用于每个具有该属性的空值的实体。请务必在您更改的每个实体上运行 put()。

```
employees = Employee.all().fetch(50)
for employee in employees:
    if employee.hobbies is None: # Null value property
        employee.hobbies = ""
        employee.put() 
```

当然，这不是执行此任务的最有效方式。您可能想要创建一个列表对象，例如“batch_put_list”，并将每个员工对象附加到列表中。然后，执行 db.put(batch_put_list)。

```
batch_put_list = []
employees = Employee.all().fetch(50)
for employee in employees:
    if employee.hobbies is None:
        employee.hobbies = ""
        batch_put_list.append(employee)
db.put(batch_put_list) 
```

希望这可以帮助。

# clojure - Clojure：轻量级监狱

> ID：10960101
> 
> 赞同：2
> 
> 时间：2012-06-09T10:08:05.410
> 
> 标签：clojure, jail

## 语境：

在 Lua 中，创建一个新的 Lua VM 非常简单且非常便宜（4kb 内存）。因此，创建廉价的 lua“监狱”是微不足道的。然后，如果不受信任的代码行为不端，我就会杀死 Lua VM。

我知道[https://github.com/Licenser/clj-sandbox](https://github.com/Licenser/clj-sandbox)但它似乎只是围绕 Java ......这将使不受信任的代码线程成为本机 Java 线程，然后我将无能为力。

## 问题：

无论如何要创建廉价/轻量级的 Clojure 监狱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:22:41.307

我是一个名为[clojail](https://github.com/flatland/clojail)的小库的（共同）作者，它是对 clj-sandbox 的一种重新思考。它还利用了 Java 沙箱，还提供了沙箱化 Clojure 特定事物的功能。[tryclj](http://www.tryclj.com)和[4clojure](http://www.4clojure.com)使用它。

我不明白你说的其余部分是什么意思。JVM 沙箱很棒，因为它可以防止 I/O。Clojail 通过允许超时来阻止长时间运行的代码来完成剩下的工作。如果您说的是“人们可以创建线程而我无法杀死它们”，clojail 会杀死在沙箱内创建的线程，并且通常会尽力防止杂散线程逃跑。JVM 沙箱（和 clojail 特定的东西）仍然可以防止危险代码在线程上运行。

总之，看看clojail。这可能是你需要的。它对于大多数用途来说已经足够了，并且是城里唯一的监狱游戏（除了没有维护的 clj-sandbox）。它并不总是最好的解决方案，但通常是最简单的。

如果 clojail 不能满足您的需求，下一步就是推出您自己的监禁机制，包括使用 JVM 沙箱和分离 JVM。这有*很大的*开销，所以如果可能的话，我会避免它。绝对不再是 4KB Luatown 了。;)

# java - 如何在 Android 的文本视图中随机设置文本？

> ID：10960104
> 
> 赞同：1
> 
> 时间：2012-06-09T10:08:29.253
> 
> 标签：java, android

我有 4 个字符串数组，每个数组的长度都是 4。我也有四个 textviews 。现在我想在文本视图中随机设置该数组索引的文本。我已经这样做了：

```
ansone.setText(Answera[0]);
anstwo.setText(Answerb[0]);
ansthree.setText(Answerc[0]);
ansfour.setText(Answerd[0]); 
```

但每次运行应用程序时它都保持相同的顺序，我想随机选择不同文本视图中的数组，比如有时'ansone' textview 将设置 Answerb [0] 的文本，或者'anstwo' textview 将设置文本已回答[0] 等等。因此，每次我运行应用程序时，textviews 都会随机选择要设置文本的数组。我怎样才能让它随机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:26:00.323

创建一个 ArrayList 数组：

```
ArrayList<String> tmp = new ArrayList<String>();
tmp.add(Answera[0]);
tmp.add(Answerb[0]);
tmp.add(Answerc[0]);
tmp.add(Answerd[0]); 
```

然后洗牌：

```
Collections.shuffle(tmp); 
```

接下来，只需将结果放到每个 textviews 中：

```
ansone.setText(tmp.get(0));
anstwo.setText(tmp.get(1));
ansthree.setText(tmp.get(2));
ansfour.setText(tmp.get(3)); 
```

# java - Java OCR 算法

> ID：10960112
> 
> 赞同：-1
> 
> 时间：2012-06-09T10:09:30.100
> 
> 标签：java, android, algorithm, ocr

我正在寻找一个 android 应用程序，它允许用户拍摄汽车车牌的照片，然后基于图像，将字母提取到字符串中。

我真的很难为 android 找到一个单一的开源应用程序库，它只是让您传递图像并返回文本。

我想知道是否有人知道这样做的库，或者如果没有人知道我可以实现的特定算法？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:19:53.630

罗恩·塞默（Ron Cemer）有一个非常好的。 [http://www.roncemer.com/software-development/java-ocr](http://www.roncemer.com/software-development/java-ocr)

但最流行的是 Tesseract(http://tesseract-ocr.googlecode.com/)，但你必须使用 JNI 包装器，例如 Tesjeract(http://code.google.com/p/tesjeract/) .

这是 Mezzofanti (http://code.google.com/p/mezzofanti/) 一个使用 Tesjeract 和 Tesseract 的开源应用程序。

还有 Abbyy 的付费： [http ://www.abbyy.com/mobileocr/android/](http://www.abbyy.com/mobileocr/android/)

# mongodb - 数据库移动后 MongoDB 服务无法启动

> ID：10960113
> 
> 赞同：1
> 
> 时间：2012-06-09T10:09:33.890
> 
> 标签：mongodb

我在 Amazon EC2 上安装的 MongoDB 磁盘空间不足，所以我创建了一个新的 EBS 卷，干净地关闭了 MongoDB 服务，将数据库文件复制到新卷，重新挂载到与旧分区相同的位置并尝试重新启动服务，但我收到此错误：

```
Sat Jun  9 10:03:30 [initandlisten] MongoDB starting : pid=24466 port=27017 dbpath=/db/mongo 64-bit host=ip-10-234-7-0
Sat Jun  9 10:03:30 [initandlisten] db version v2.0.5, pdfile version 4.5
Sat Jun  9 10:03:30 [initandlisten] git version: 1bb4de4630302fad8af53824ca4f627db490b753
Sat Jun  9 10:03:30 [initandlisten] build info: Linux ip-10-110-9-236 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_41
Sat Jun  9 10:03:30 [initandlisten] options: { config: "/etc/mongodb.conf", dbpath: "/succeed/db/mongo", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Sat Jun  9 10:03:30 [initandlisten] journal dir=/db/mongo/journal
Sat Jun  9 10:03:30 [initandlisten] recover : no journal files present, no recovery needed
Sat Jun  9 10:03:30 [initandlisten] warning couldn't write to / rename file /db/mongo/journal/prealloc.0
Sat Jun  9 10:03:30 [initandlisten] couldn't open /db/mongo/MyDB_Mongo.ns errno:1 Operation not permitted
Sat Jun  9 10:03:30 [initandlisten] error couldn't open file /db/mongo/MyDB_Mongo.ns terminating
Sat Jun  9 10:03:30 dbexit: 
Sat Jun  9 10:03:30 [initandlisten] shutdown: going to close listening sockets...
Sat Jun  9 10:03:30 [initandlisten] shutdown: going to flush diaglog...
Sat Jun  9 10:03:30 [initandlisten] shutdown: going to close sockets...
Sat Jun  9 10:03:30 [initandlisten] shutdown: waiting for fs preallocator...
Sat Jun  9 10:03:30 [initandlisten] shutdown: lock for final commit...
Sat Jun  9 10:03:30 [initandlisten] shutdown: final commit...
Sat Jun  9 10:03:30 [initandlisten] shutdown: closing all files...
Sat Jun  9 10:03:30 [initandlisten] closeAllFiles() finished
Sat Jun  9 10:03:30 [initandlisten] journalCleanup...
Sat Jun  9 10:03:30 [initandlisten] removeJournalFiles
Sat Jun  9 10:03:30 [initandlisten] shutdown: removing fs lock...
Sat Jun  9 10:03:30 dbexit: really exiting now 
```

目录对 mongodb 用户具有适当的权限。谁能解释为什么这没有开始？我可以使用配置以 root 身份手动启动

我应该提到这样做是有效的：

```
$ sudo su mongodb
$ mongod --config /etc/mongodb.conf & 
```

我正在使用来自 10-gen apt 存储库的 MongoDB 2.0.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:40:15.003

该问题是由于 mongodb 用户的权限不足引起的。修复权限后重新启动 mongodb 服务应该可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-09T10:28:49.277

""" 目录对 mongodb 用户具有适当的权限。"""

显然你的假设是错误的。我们应该相信您的假设还是清除错误信息？想想吧！

# c - C编程语言，邻接矩阵

> ID：10960117
> 
> 赞同：0
> 
> 时间：2012-06-09T10:09:55.293
> 
> 标签：c

在您的帮助下，我可以从文本文件 (input.txt) 中获取输入，其中行由 city1 city2 distance ... 组成，并将城市名称写在矩阵中而不重复。根据这个矩阵，我写了一段代码来将它们的距离添加到邻接矩阵中。但是输出看起来很奇怪，我的意思是，它不正确。我想在下面的代码中应该有一些缺失或错误。任何一点帮助都将受到高度赞赏。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
int main(int argc, char *argv[]){
int i=1,j, state=0, k, dist,x=0,y=0;

   int** myMat;
   char *city1, *city2, **matnames;
   FILE* p;
    city1 = (char*) malloc(sizeof(char));
    city2 = (char*) malloc(sizeof(char));
    matnames = (char**) malloc(sizeof(char*));
    myMat = (int**) malloc(sizeof(int*)*4);             
p = fopen(argv[1],"r");

/************************************************************/
    matnames[0] = (char*) malloc(sizeof(char));
    matnames[1] = (char*) malloc(sizeof(char));
    matnames[2] = (char*) malloc(sizeof(char));
    matnames[2] = NULL;
    fscanf(p, "%s %s %d", city1, city2, &dist);
        strcpy(matnames[0],city1);                  
        strcpy(matnames[1],city2);
/************************************************************/  
    for(i=0;i<3;i++){
        myMat[i] = (int*) malloc(sizeof(int));
    }
    myMat[1][2] = dist;         /* the first two distances placed at matnames */
    myMat[2][1] = dist;

/************************************************************/  
while( fscanf(p,"%s %s %d",city1,city2, &dist) != EOF){                 
        for(j=0; matnames[j]!=NULL; j++){                   
            if( strcmp(matnames[j], city1) != 0){
                 state++;
                }               
        }       
        if(state  == j){
            matnames = realloc(matnames, sizeof(char*)*(j+3));
            matnames[j] = (char*) malloc(sizeof(char));
            strcpy(matnames[j], city1);
            matnames[j+1] = (char*) malloc(sizeof(char));
            matnames[j+1] = NULL;   
            }
            state = 0;
        for(j=0; strcmp(matnames[j], city1) != 0;j++){ 
                x++;                   /* "x" finds the city1 indeks from matnames*/
        }

        for(k=0; matnames[k] != NULL;k++){                  
                if( strcmp(matnames[k], city2) != 0){
                    state++;
                }               
        }
        if(state == k){
            matnames = realloc(matnames, sizeof(char*)*(k+4));
            matnames[k] = (char*) malloc(sizeof(char));
            matnames[k+1] = (char*) malloc(sizeof(char));
            strcpy(matnames[k], city2); 
            matnames[k+1] = NULL;   
            }
        state = 0;
    /* till to here the names of cities are placed in matnames without repetion*/
        for(j=0; strcmp(matnames[j], city2) != 0;j++){ 
                y++;             /* "y" finds the city2 indeks from matnames*/
        }
        /****** the problem should be in this part */
        myMat = realloc(myMat,sizeof(int*)*(k+3));          
        for(i=2;i<k+2;i++){
            myMat[i] = (int*) malloc(sizeof(int));
        }
        myMat[x][y] = dist;
        myMat[y][x] = dist;
        x=0; y=0;
}   
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:18:27.900

您将 1 个字符分配给 city1 和 city2（带有 sizeof(char) 的 malloc）。除非您的城市都只有一个字符，否则 fscanf 将超出范围。

用 city1 = (char*) malloc(1024) 再试一次，这样一个城市可以更长一点。

matnames 不是很明显你想要它是什么，但是你给它分配了 1 个 sizeof(pointer)，即 4 个字节。然后你做 matnames[0] = ..., matnames[1] = ... matnames[1] 已经溢出了你分配的内存。所以你在随机的地方写作。

C 语言在内存分配方面非常宽容，但结果是完全不可预测的。确保你的 malloc 有足够的空间，并尽可能考虑其他语言。:)

# java - 在方法中定义一些类有什么好处？

> ID：10960121
> 
> 赞同：3
> 
> 时间：2012-06-09T10:10:37.323
> 
> 标签：java

在方法中定义一个类有什么好处。我看到有人喜欢在方法中定义一些监听器类，这样做有什么真正的好处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:17:15.340

我认为您的意思是**匿名内部类**或**本地内部类**。看到[这篇文章的区别和优点](http://www.roseindia.net/javatutorials/anonymous_innerclassestutorial.shtml)在我看来，最大的优点是代码在使用它的地方，而不是在另一个文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T10:33:17.547

这样做有两个原因：

*   逻辑的局部性。分散逻辑和紧密相关的代码部分使其更难遵循。
*   当您在方法中定义一个类时，它会[*关闭*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)范围内可用的局部变量。这种方式避免了不必要的参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T10:17:52.940

它被命名为 InnerClass，这允许您实例化实现接口或抽象类的对象，而无需将其正式定义为单独的类。监听器是很好的例子，因为支持一个将每个监听器都实现为一个单独的类的系统成本太高。

一个很好的参考：[http](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html) ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html （内部类主题）

# arrays - Telerik MVC Grid，服务器绑定，如果 int 在更新/插入时传递一个数组

> ID：10960122
> 
> 赞同：0
> 
> 时间：2012-06-09T10:10:51.760
> 
> 标签：arrays, insert, grid, telerik

我一直在寻找答案并尝试了几天，但我仍然无法让它工作。

我有服务器绑定网格（由于各种不同的原因，我不能使用 Ajax 绑定），当用户编辑或插入新行时，我需要做两件事：

**1\. 我需要从页面上的隐藏字段中提取所有值并将它们放入一个 int 数组中。2\. 我需要将此数组传递给插入/更新行上的控制器。**

现在有了ajax绑定，我想出了如何做到这一点。我在完成工作的客户端事件上设置了 javaScript 函数。但是 afaik 大多数客户端事件不适用于服务器绑定，所以我被卡住了。

onSave 客户端事件非常适合这个，但它不适用于服务器绑定。

在 Insert 或 Update 上传递单个变量作为第三个参数很容易，但我的情况有点复杂，我无法让它工作。

```
.Insert("Insert", "Posudbe", new { })
.Update("Update", "Posudbe", new { }) 
```

所以我基本上需要在上面这段代码中的第三个参数中做这两件事。

Tnx 4 答案（如果有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:15:32.630

您可以使用 onLoad JavaScript 事件（这是在服务器绑定中工作的少数事件之一）并将单击处理程序附加到“插入”和“更新”按钮。你需要使用 jQuery 委托，live 或 on。这是一个简单的例子：

```
function onLoad() {
   $(this).delegate(".t-grid-update", "click", function() {
     // your code here
   });
} 
```

# ruby-on-rails - 在 Rails 中跟踪模型及其所有关联模型的历史记录

> ID：10960124
> 
> 赞同：2
> 
> 时间：2012-06-09T10:11:07.447
> 
> 标签：ruby-on-rails, mongoid

最近在我的一个项目中，我需要添加功能来跟踪所有操作（创建、更新、删除）、重做和撤消某些模型。在项目中，我使用 Mongoid 作为 ODM。我可以用 mongoid-history 添加大部分这些功能。但是 mongoid-history 不能跟踪引用关系。在我的情况下，我有具有多个位置的建筑模型。当我从建筑形式（作为嵌套属性）更新位置时，mongoid-history 将适当的轨道（文档）添加到历史跟踪器集合，但该文档与建筑对象无关。因此，当我调用 @building.history_tracks 时，我无法获得此历史记录。你有什么建议？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:46:50.487

这是我想出的解决方案： [http ://www.elvinefendi.com/2012/06/23/added-new-features-to-the-mongoid-history-gem.html](http://www.elvinefendi.com/2012/06/23/added-new-features-to-the-mongoid-history-gem.html)

# c# - 你能检查一个 Web 应用程序是否已经在另一个浏览器选项卡上运行吗？

> ID：10960129
> 
> 赞同：0
> 
> 时间：2012-06-09T10:12:28.823
> 
> 标签：c#, javascript, asp.net

我有一个用 ASP.NET/C# 和 javascript 编写的 Web 应用程序。它使用会话变量。

当我打开应用程序时，有没有办法检查应用程序是否在另一个选项卡中运行？

或者你有什么想法让每个选项卡的会话变量都是唯一的吗？

任何帮助都会很棒！

谢谢

凯夫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:18:49.530

首先了解会话。会话是存在于服务器上并保存一些数据的文件。当用户获得一个会话时，他们实际上是在获得一个带有一些密钥的 cookie，用于查找哪个会话是他们的。

因此，在同一浏览器中的不同选项卡之间，cookie 将是相同的，因此它将在两个选项卡中访问服务器上的相同会话。您可以通过在开始会话时提供随机 ID 来使它们唯一，但这（据我所知）只会覆盖上一个会话的值......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:19:15.373

您可以使用 Session.IsNewSession() 方法检查特定会话是否为新会话。通常在具有多选项卡的 Web 浏览器中，会话在该窗口外是相同的

# api - 传统 Web 应用程序和 API 中的身份验证、授权和会话管理

> ID：10960131
> 
> 赞同：75
> 
> 时间：2012-06-09T10:12:41.310
> 
> 标签：api, session, authentication, authorization

如果我错了，请纠正我：在传统的 Web 应用程序中，浏览器会自动将会话信息附加到对服务器的请求中，因此服务器可以知道请求来自谁。实际上到底附加了什么？

但是，在基于 API 的应用程序中，这些信息不会自动发送，因此在开发 API 时，我必须检查自己是否请求来自经过身份验证的用户？这通常是如何完成的？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-06-27T23:48:26.960

HTTP 协议在设计上是无状态的，每个请求都是单独完成的，并在单独的上下文中执行。

会话管理背后的想法是将来自同一客户端的请求放在同一上下文中。这是通过服务器发出一个标识符并将其发送给客户端来完成的，然后客户端将保存此标识符并在后续请求中重新发送它，以便服务器可以识别它。

### 饼干

在典型的浏览器服务器案例中；浏览器为每个域管理一个键/值对列表，称为 cookie：

*   Cookie 可以由服务器使用`Set-Cookie`HTTP 响应标头管理（创建/修改/删除）。
*   服务器可以通过解析`Cookie`HTTP 请求头来访问（读取）Cookie。

面向 Web 的编程语言/框架提供了处理更高级别 cookie 的函数，例如 PHP 提供[`setcookie`](http://php.net/manual/en/function.setcookie.php)/[`$_COOKIE`](http://www.php.net/manual/en/reserved.variables.cookies.php)来写入/读取 cookie。

### 会话

回到会话，在典型的浏览器服务器案例中（再次），服务器端会话管理利用客户端 cookie 管理。[PHP 的会话管理](http://www.php.net/manual/en/ref.session.php)设置一个会话 id cookie 并使用它来识别后续请求。

### 网络应用程序 API？

现在回到你的问题；由于您将负责设计 API 并对其进行记录，因此实施将由您决定。你基本上必须

1.  `Set-Cookie`在响应正文（XML/JSON auth 响应）中为客户端提供一个标识符，无论是通过HTTP 响应标头。
2.  具有维护标识符/客户端关联的机制。例如，将标识符`00112233445566778899aabbccddeeff`与客户端/用户 #相关联的数据库表`1337`。
3.  让客户端在所有后续请求中重新发送在 (1.) 处发送给它的标识符，无论是在 HTTP`Cookie`请求标头中，`?sid=00112233445566778899aabbccddeeff`参数 (*)。
4.  使用 (2.) 中的机制查找接收到的标识符，检查是否是有效的身份验证，并被授权执行请求的操作，然后代表经过身份验证的用户继续操作。

当然，您可以在现有基础架构上构建，您可以在应用程序中使用 PHP 的会话管理（负责 1./2\. 和 4\. 的身份验证部分），并要求客户端实现进行 cookie 管理（即将处理 3.)，然后您在此基础上执行其余的应用程序逻辑。

* * *

(*) 每种方法都有优缺点，例如，使用 GET 请求参数更容易实现，但可能具有安全隐患，因为记录了 GET 请求。您应该将 https 用于关键（全部？）应用程序。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-06-23T18:54:31.407

会话管理是服务器的责任。创建会话时，会生成会话令牌并将其发送到客户端（并存储在 cookie 中）。之后，在客户端和服务器之间的下一个请求中，客户端（通常）将令牌作为 HTTP cookie 发送。所有会话数据都存储在服务器上，客户端只存储令牌。例如，要在 PHP 中启动会话，您只需：

```
session_start();  // Will create a cookie named PHPSESSID with the session token 
```

创建会话后，您可以在其上保存数据。例如，如果您想让用户保持登录状态：

```
// If username and password match, you can just save the user id on the session
$_SESSION['userID'] = 123; 
```

现在您可以检查用户是否经过身份验证：

```
if ($_SESSION['userID'])
    echo 'user is authenticated';
else
    echo 'user isn't authenticated'; 
```

如果需要，您可以仅为经过身份验证的用户创建会话：

```
if (verifyAccountInformation($user,$pass)){ // Check user credentials
    // Will create a cookie named PHPSESSID with the session token
    session_start();
    $_SESSION['userID'] = 123;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-29T17:52:49.630

对于 Web 应用程序和 API，真实用户有多种方式。有几个标准，或者您可以编写自己的自定义授权/和/或身份验证。我想指出授权和身份验证之间的区别。首先，应用程序需要验证请求来自的用户（或 api 客户端）。一旦用户通过身份验证，应用程序需要根据用户的身份确定任何经过身份验证的用户有权执行某些应用程序（授权）。对于大多数传统的 Web 应用程序，安全模型没有细粒度，因此一旦用户通过身份验证，在大多数情况下，它也被授权执行某些操作。但是，这两个概念（认证和授权）应该是两个不同的逻辑操作。

此外，在经典的 Web 应用程序中，在用户通过身份验证和授权后（主要通过在数据库中查找用户名/密码对），授权和身份信息被写入会话存储中。会话存储不一定是服务器端，正如上面的大多数答案所暗示的那样，它也可以存储在客户端的 cookie 中，在大多数情况下是加密的。例如，PHP CodeIgniter 框架默认执行此操作。在客户端有许多保护会话的机制，我认为这种存储会话数据的方式比存储 sessionId 更安全，然后在服务器端的会话存储中查找。此外，在分布式环境中存储会话客户端非常方便，

此外，使用简单的用户密码对进行身份验证不必在所有情况下都通过自定义代码来完成，该代码在数据库中查找匹配的用户记录。例如，[基本身份验证协议](http://www.w3.org/Protocols/HTTP/1.0/draft-ietf-http-spec.html)或[摘要身份验证](http://www.w3.org/Security/Implementation/DigestAuthFilter.html)。在Windows平台等专有软件上，也有用户槽认证的方法，例如[ActiveDirectory](http://en.wikipedia.org/wiki/Active_Directory)

提供用户名/密码对不仅是认证方式，如果使用 HTTPS 协议，还可以考虑[使用数字证书进行认证](http://www.techrepublic.com/article/secure-web-services-with-user-authentication-and-digital-certificates/1044829)。

在特定的用例中，如果设计使用 SOAP 作为协议的 Web 服务，还有SOAP 协议的[WS-Security](http://en.wikipedia.org/wiki/WS-Security)扩展。

综上所述，我想说以下问题的答案进入了选择 WebApi 授权/身份验证机制的决策程序：

1) 目标受众是什么，是公开的，还是仅限注册（付费）会员？
2) 它是运行还是 *NIX 或 MS 平台
3) 预计有多少用户
4) API 处理多少敏感数据（更强与更弱的身份验证机制）
5) 是否有任何 SSO 服务可供您使用

.. 还有很多。

希望这可以清除一些东西，因为方程中有很多变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T11:54:27.467

我建议您在每个请求中发送某种令牌。

取决于服务器和服务，它们可以是GET/POST 请求中的[JSESSIONID](https://stackoverflow.com/questions/595872/under-what-conditions-is-a-jsessionid-created)参数，也可以是Web 服务请求中 SOAP over HTTP 中的[SAML等成熟的参数。](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T18:35:43.427

你是对的，在标准环境中事情是“自动的”的原因是因为 cookie 比 URL 传播更受欢迎，以保持对用户的美观。也就是说，浏览器（客户端软件）管理存储和发送会话 cookie 以及每个请求。

在 API 世界中，简单的系统通常只是将身份验证凭据与每个请求一起传递（至少在我的工作中）。客户端作者通常（再次根据我的经验）不愿意实现 cookie 存储，以及每个请求的传输，并且通常超过最低限度的任何内容......

对于基于 HTTP 的 API，还有很多其他的身份验证机制，例如 HTTP 基本/摘要，当然还有无处不在的 o-auth，如果我没记错的话，它是专门为这些事情设计的。不维护任何 cookie，凭据是每次交换的一部分（相当肯定）。

要考虑的另一件事是您将在 API 中使用服务器上的会话做什么。网站上的会话为当前用户提供存储，并且通常存储少量数据以从页面到页面减轻数据库的负载。在 API 上下文中，这不是必需的，因为事物或多或少是无状态的，当然一般来说；这真的取决于服务在做什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T09:45:03.043

如果基于 API 的 APP 是客户端，则 API 必须具有从服务器响应流中检索/读取 cookie 并将其存储的选项。用于在为同一服务器/url 准备请求对象时自动附加 cookie。如果它不可用，则无法检索会话 ID。

# c++ - 是否可以在着色器类中使用“Key”设计模式？

> ID：10960136
> 
> 赞同：2
> 
> 时间：2012-06-09T10:13:36.890
> 
> 标签：c++, design-patterns, opengl, shader

首先，我不知道“关键”模式是否被接受为一般模式，但最近它已经出现在 SO 各处，所以......

**我想做的事？**

在 C++ 中创建着色器操作类。我在这里的问题特别关注设置统一值（从 C++“直接”发送到 GLSL 的值）。

**有什么问题？**

（快速解释，让不习惯OpenGL的人也可以贡献） - 使用全局`glUniform*`函数设置uniform变量，第一个参数是uniform在当前绑定着色器中的位置（`int`）；

所以常见的用法是：

```
glBindProgram(myProgramNum);
int Location = glGetUniformLocation(myProgramNum, "myUniformParameterName");
float myValue = 42.f; // arbitrary data
glUniform1f (Location, myValue); 
```

我已经创建了一些我需要封装上述内容的方法，例如

```
void SetUniform1f (std::string const& name, float a);
void SetUniformVector3 (std::string const& name, CVector3 const& vec);
void SetUniformMatrix4 (std::string const& name, CMatrix4 const& mat); 
```

但是，我注意到所有这些都使用`glGetUniformLocation(int, const char*)`. 由于其中一些将实时使用，这将导致不必要的性能开销。

**第一个想法**

我认为我可以为每个函数创建两个版本——一个是 take`std::string`和 value，第二个是`int`value，从而可以更快地访问。

但是，这不会比纯粹的 OpenGL 访问更好，因为用户仍然可以向它们发送恶意参数。

**第二个想法**

因此，正确的做法是从着色器类生成某种“Key”对象，其中包含给定制服的位置。然而，它需要链接到特定的 CShader 类实例，因为可能会在一个对象中生成密钥并将其传递给另一个对象，从而导致不需要的行为。

我的问题是——在 C++ 中这样的事情可能吗？我是否必须在关键对象中保留指向“父”对象的指针并测试它是否每次都是有效参数，或者是否有任何语言/Boost 功能允许围绕它使用某种语法糖？

我自己能够推断出，关键类应该嵌套在 CShader 中，并且有 CShader 作为朋友。它还应该将普通构造函数声明为私有，并重载复制构造函数，以便复制的对象仍然是有效的键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T22:42:53.890

您只需要一个整数来设置一个统一变量。确实，与其调用一堆`glGetUniformLocation`，不如将这些值缓存在 a 中`std::map<std::string, int>`？查询`map`会更快，不是吗？

您的问题并非一切都清楚（父指针？，恶意值？），但最后一个假设的`CShader`类用户想要一个设置统一值的快捷方式。实际上，您可以在着色器链接后查询统一（使用[glGetActiveUniform](http://www.opengl.org/sdk/docs/man/xhtml/glGetActiveUniform.xml)），或者您可以在必要时查询统一和缓存统一位置。

# iphone - 将文件和文件夹与文件目录 iniphone 区分开来

> ID：10960138
> 
> 赞同：0
> 
> 时间：2012-06-09T10:14:14.460
> 
> 标签：iphone, ios

我通过以下方式获取文档目录中可用文件和文件夹的列表

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
NSArray *dirContents = [[NSFileManager defaultManager]directoryContentsAtPath:bundleRoot]; 
```

我想从“不满”中获取文件和文件夹的列表，我怎样才能得到这样的文件和文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:25:03.640

要分离文件和文件夹，请使用此代码

```
+ (void) seperateFilesAndFolders
{
    NSString *basePath = [CacheManager pathForCacheFolder];

    NSArray *dirContents = [[NSFileManager defaultManager]directoryContentsAtPath:basePath];

    //This will contains directories
    NSMutableArray *directories = [[NSMutableArray alloc] init];

    //This will contains files
    NSMutableArray *files = [[NSMutableArray alloc] init];

    for (NSString *str in dirContents) 
    {
        NSString *strFilePath = [basePath stringByAppendingPathComponent:str];

        BOOL isDirectory;
        if([[NSFileManager defaultManager] fileExistsAtPath:strFilePath isDirectory:&isDirectory])
        {
            if (isDirectory) {
                [directories addObject:str];
            }
            else {
                [files addObject:str];
            }
        }
    }

} 
```

# java - 如何从 Java 列表中获取一种类型的所有实例？

> ID：10960144
> 
> 赞同：2
> 
> 时间：2012-06-09T10:15:46.640
> 
> 标签：java, generics

我的代码中有一些部分如下所示：

```
A, B and C extend D

public ArrayList<A> getA() {
    ArrayList<A> allElements = new ArrayList<A>();
    for (D el : listOfDs) {
        if (el instanceof A) {
            allElements.add((A) el);
        }
    }
    return allElements;
}

public ArrayList<B> getB() {
    ArrayList<B> allElements = new ArrayList<B>();
    for (D el : listOfDs) {
        if (el instanceof B) {
            allElements.add((B) el);
        }
    }
    return allElements;
}

public ArrayList<C> getC() {
    ArrayList<C> allElements = new ArrayList<C>();
    for (D el : listOfDs) {
        if (el instanceof C) {
            allElements.add((C) el);
        }
    }
    return allElements;
} 
```

我想将所有这些组合成这样的一种方法：

```
public <T> ArrayList<T> get() {
    ArrayList<T> allElements = new ArrayList<T>();
    for (D el : listOfDs) {
        if (el instanceof T) {
            allElements.add((T) el);
        }
    }
    return allElements;
} 
```

这在Java中可能吗？

此刻我得到

> 无法对类型参数 T 执行 instanceof 检查。改用它的擦除对象，因为更多的泛型类型信息将在运行时被擦除

和

> 类型安全：从 Node 到 T 的未经检查的强制转换

然后我试过这个：

```
@SuppressWarnings("unchecked")
public <T> ArrayList<T> get(Class<T> clazz) {
    ArrayList<T> allElements = new ArrayList<T>();
    for(D o : listOfDs) {
        if (o.getClass() == clazz) {
            allElements.add((T) o);
        }
    }
    return allElements;
} 
```

它不会引发任何错误，但我该如何调用它？这不起作用：

```
get(A); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:20:05.130

你可以[`Iterables.filter`](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20java.lang.Class%29)从番石榴中使用。

示例用法：

```
Iterable<X> xs = Iterables.filter(someIterable, X.class); 
```

由于它是一个开源库，您可以查看源代码以找出您做错了什么。

# iphone - 重复符号_SBJSONErrorDomain youtube iphone app

> ID：10960148
> 
> 赞同：1
> 
> 时间：2012-06-09T10:16:09.027
> 
> 标签：iphone, youtube-api

我正在尝试将 youtube 集成到我的应用程序中，我遵循了[http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4中提到的所有步骤/](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)

现在，当我尝试构建代码时，它会将错误作为重复符号 _SBJSONErrorDomain 在 Gdatalibrary.0 和架构 i386 的 SBJsonBase.o 中。

我在 facebook sdk 中也有 SBJson 文件。当我尝试从其中一个框架中删除文件时，无论是从 youtube Gdata Api 还是 facebook API 都给我错误，因为缺少文件。

请帮我解决这个问题。

谢谢你！

PS我已经尝试过 [iPhone错误ld给出的解决方案：/Users/Shared/PhoneGap/Frameworks/PhoneGap.framework/PhoneGap中的重复符号_SBJSONErrorDomain](https://stackoverflow.com/questions/8036897/iphone-error-ld-duplicate-symbol-sbjsonerrordomain-in-users-shared-phonegap-f)

[iPhone：重复符号 _SBJSONErrorDomain](https://stackoverflow.com/questions/6776202/iphone-duplicate-symbol-sbjsonerrordomain) 这个链接说运气不好！

请帮助我因此而陷入困境！

谢谢你！

# iphone - 如何在通用应用程序的同一个 .m 文件中为 iphone 和 ipad 进行不同的编码？

> ID：10960152
> 
> 赞同：1
> 
> 时间：2012-06-09T10:17:18.560
> 
> 标签：iphone, objective-c, ios-universal-app

我已经为 iPhone 创建了应用程序。我的应用程序中没有表格视图、图像视图、地图视图。所有数据都来自网络服务。我已经通过编码为图像和其他视图提供了一些静态尺寸。现在，我需要相同的 iPad 应用程序。所以我必须更改 Ipad 的视图大小编码。我需要在同一个 .m 文件中为 iPhone 和 iPad 进行不同的编码。任何人请建议我如何做到这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T10:44:41.403

在我理解你的问题之前，我认为这就是你需要的：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
{
    // place the iphone code
}
else 
{        
   // place the ipad code
} 
```

你可以参考这篇文章：http: [//iphonedevelopment.blogspot.in/2010/04/converting-iphone-apps-to-universal.html](http://iphonedevelopment.blogspot.in/2010/04/converting-iphone-apps-to-universal.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T12:37:37.150

正如您在开始新项目时选择通用应用程序时所看到的那样 - 在通用应用程序 Appdelegate.m 文件中，苹果提供了代码。

看到这个——

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
} else {
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
}
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

通过同样的方法你可以区分 iPad 和 iPhone。谢谢你！！

# android - 在android中以编程方式覆盖文本到语音设置中的“始终使用我的设置”选项

> ID：10960155
> 
> 赞同：2
> 
> 时间：2012-06-09T10:17:36.340
> 
> 标签：android, text-to-speech

某些平板电脑具有覆盖应用程序文本到语音设置的选项，名称为：文本到语音设置中的“始终使用我的设置”。如果选中此选项，则 TTS 引擎将获取 TTS 的用户设置，而不是特定于应用程序的设置。

我的要求是：每当我的应用程序使用 TTS 引擎时，应始终使用我的应用程序设置，因为它必须以特定语速以特定语言播报。但是一旦选择了“始终使用我的设置”并且如果它在语言和语速方面有不同的设置，那么我的应用程序的设置就会被覆盖。

有什么方法可以以编程方式更改此选项设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:29:21.860

这是不可能的。这是有道理的，因为否则它会破坏“始终使用**我的**设置”的目的。

[这个评论](https://stackoverflow.com/questions/6656536/setting-language-for-tts-programmatically#comment8479748_6656805)，以及我自己的实验，都支持我的结论。

# php - 从具有条件的数组生成数组

> ID：10960156
> 
> 赞同：-3
> 
> 时间：2012-06-09T10:17:49.977
> 
> 标签：php, arrays

假设我有一个数组

```
$x = (31,12,13,25,18,10); 
```

我想以这样一种方式减少这个数组，使每个数组元素的值都是`32`. 所以下班后我的数组会变成

```
$newx = (32,32,32,13); 
```

我必须以这样一种方式生成这个数组，数组值的总和永远不会大于`32`. 所以要创建第一个值，我`1`将从第二个索引值减少，即`12`第二个值将变为`11`，第一个索引值将变为`31+1 = 32`。这个过程应该继续，以便每个数组值都等于`32`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:32:04.100

使用一些基本的数学是最简单的：

```
$input = array(31,12,13,25,18,10);
$val = 32;                                // set the value: 32
$sum = array_sum($input);                 // calculate sum: 109
$output = array_fill(0, $sum/$val, $val); // fill in int(109/32) = 3 reps of 32
$rest = $sum % $val;                      // however, 109*32 = 96,
if ($rest) {                              // so if there is a rest (here 13)
    $output[] = $rest;                    // we add the remaining 13
} 
```

决赛`$output`：

```
array (
  0 => 32,
  1 => 32,
  2 => 32,
  3 => 13,
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:36:45.260

解释采取的每个步骤的稍微详细的方法 -

```
$x = array(31,12,13,25,18,10);
$total = 0;

// get the total values of the array
foreach($x as $val){
  $total += $val;
}

// calculate whole divisions
$divisions = floor($total / 32);

// calculate remainder
$remainder = $total % 32;

$finalArr = array();

// populate array with whole whole divisions
for ($i=0;$i<$divisions;$i++){
  $finalArr[] = 32;  
}

// last element is the remainder
if($remainder > 0 ){
  $finalArr[] = $remainder;
} 
```

* * *

输出 -

```
Array
(
    [0] => 32
    [1] => 32
    [2] => 32
    [3] => 13
) 
```

# javascript - Javascript调用父函数

> ID：10960162
> 
> 赞同：3
> 
> 时间：2012-06-09T10:18:52.783
> 
> 标签：javascript, call, parent

描述里面的问题

```
function Parent(){
    this.alertParent(){
        alert("Parent alert");
    }

    function child(){
        // how can I call to this.alertParent() from here without passing any  
        // parameters?
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-09T10:35:23.997

你的问题的标题令人困惑。非正式术语“父”函数用于*调用*函数。

在您的情况下，您在构造函数中有两个函数，您只想从另一个调用一个。具体来说，您想从“私有”方法调用“公共”方法（我将这些术语放在引号中，因为 JavaScript 不支持可见性，这些是实现相同目的的解决方法）。

只需保留对当前实例的引用：

```
function Parent(){
    var self = this;
    this.alertParent = function() {
        alert("Parent alert");
    }

    function child() {
        self.alertParent();
    }
} 
```

`child`关闭它定义的上下文中的所有变量，因此它可以访问`self`. [`this`当然会改变*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)。

除了创建闭包，您还可以使用[*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或[*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)*将实例显式*传递给。`child`[`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call) [`.apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)

所以你的函数定义保持不变

```
function child() {
    this.alertParent();
} 
```

当你调用函数时，你调用它，例如，`child.call(this)`如果你知道它`this`指的是你的实例（而不是`this`它可以是任何其他变量）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T10:22:22.570

您的代码有语法错误。也许你的意思是：

```
function Parent(){
    this.alertParent = function () {
        alert("Parent alert");
    };

    this.child = function () {
      this.alertParent();
    }
} 
```

# objective-c - SoundCloud Cocoa Auth Popup Modal 为纵向，而 UIViewController 为横向

> ID：10960163
> 
> 赞同：0
> 
> 时间：2012-06-09T10:19:02.753
> 
> 标签：objective-c, ios, cocoa, soundcloud

我正在将 SoundCloud 集成到我的 iOS 5 应用程序中，但是当我调用`[scAPI checkAuthentication]`弹出模式时，弹出模式以纵向模式出现，而我的 UIViewController 处于横向模式。这非常奇怪，因为对于同一个 UIViewController，我有一个正确显示的邮件组合模式；同样，转换到另一个正确显示的 UIViewController。

我不确定该怎么做，我一直在寻找网络和（SoundCloud）源代码以找到解决方案，但到目前为止还没有运气。

**更新：** 这是使用[SoundCloud 的 Cocoa API Wrapper](https://github.com/soundcloud/cocoa-api-wrapper)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T13:59:54.723

我创建了自己的 hack-ish 解决方案。在 Sources 下的 SoundCloudAPI 目录中，在文件 SCLoginViewController.m 中，我在文件中添加了以下方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation {
    return UIInterfaceOrientationIsLandscape(orientation);
} 
```

这是在 UIViewController 中强制横向模式的标准实现。我想如果有人想保持方向动态，他们总是可以从 rootViewController 获取 interfaceOrientation。

# batch-file - 批处理脚本拖放文件夹使用 ImageMagick 转换图像

> ID：10960165
> 
> 赞同：4
> 
> 时间：2012-06-09T10:19:20.683
> 
> 标签：batch-file, imagemagick, batch-processing, photos

首先，我尝试到处寻找，但没有成功。我没有经验，非常感谢任何帮助。我正在尝试编写一个脚本来将一个文件夹拖到一个批处理文件上，然后使用 ImageMagick 将该文件夹中的所有图像转换为 jpg。我可以看到很有可能在命令行上执行脚本，一切正常。但是拖动文件夹给我带来了问题。我可以将许多文件拖到脚本上，它转换得很好：

```
convert %* %1.jpg 
```

效果很好。我也可以拖动一个文件夹，它会转换里面的图像，但是将其重命名为文件夹的名称，上一级目录，如下所示：

```
@set SOURCE=%1
convert %SOURCE%\* %SOURCE%.jpg 
```

我想我需要一个 for 循环对文件夹中的每个文件执行转换。但是我遇到了问题。我不确定在哪里加上引号，使用什么变量，以及如何克服空格。我想像这样的事情......

```
for %%f in (%SOURCE%\*) do ( convert %%f "%SOURCE%\%%f.jpg" ) 
```

但是，是的，我不知所措。我正在尝试这个小项目，既可以学习，也可以帮助我父亲快速转换大量照片。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:44:50.473

听起来 ImageMagick 可以接受多个输入参数和一个输出参数，但要一次使用一个文件来简化它，请尝试以下操作。您的循环看起来正确，但下面的 ~ 更改将处理引号。

您可能还希望将 %%a* 匹配更改为特定文件，这样您就不会捕获现有的 jpg 或非图像文件，例如 (%%a*.png %%a*.gif) 中的 %%f做 ...

最后，在两条转换行前面添加一个“echo”，这样您就可以进行测试运行了。

```
@echo off

rem Loops through arguments. If a file converts it to a jpg.  If a directory
rem converts files in that directory to jpgs.  Assumes a program "convert".

set count=0
for %%a in (%*) do (
  if exist %%a (
    if exist %%a\ (
      rem Directory, loop through contents
      for %%f in (%%a\*) do (
        convert "%%f" "%%~a\%%~nf.jpg"
        set /a count+=1
      )
    ) else (
      rem File, just convert
      convert "%%~a" "%%~na.jpg"
      set /a count+=1
    )    
  ) else (
    echo Skipping non-existent %%~a
  )
)

echo Converted %count% files

pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:44:05.807

不是你想要的；这将在原始目录中创建一个新目录，以将修改后的照片保存到：

```
:: Create the new directory 
md %1\resized 

:: Resize and save the new version
for %%f in (%1\*.jpg) do ( convert "%%f" -thumbnail 800x800 "%1\resized\%%~nf.jpg" ) 
```

# iphone - Square Cam 的视图未显示 cameraview

> ID：10960172
> 
> 赞同：0
> 
> 时间：2012-06-09T10:20:07.540
> 
> 标签：iphone, ios, avfoundation, avcam, camera-overlay

我参考了苹果开发库的 squareCam 示例，它运行良好。

但

当我尝试像这样单击一个按钮更改叠加图像时

```
square = [UIImage imageNamed:@"add"];
[self teardownAVCapture];
[self setupAVCapture]; 
```

单击按钮时，我使用此代码更改图像并显示为叠加层。

但我不知道问题是什么，但我必须单击两次才能显示cameraview，因为它第一次只显示黑屏。

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:13:33.180

我得到了错误。必须对下面显示的方法进行一些更改，因为我在**iOS5中使用****ARC**。

 **```
- (void)teardownAVCapture
{
    [session stopRunning];
    session = nil;
    videoDataOutput = nil;
    dispatch_release(videoDataOutputQueue);
    [stillImageOutput removeObserver:self forKeyPath:@"capturingStillImage"];
    stillImageOutput = nil;
    previewLayer = nil;
    [previewLayer removeFromSuperlayer];
} 
```**

# android - Cordova 1.7 - 媒体，播放声音片段，多次播放后崩溃 - Android

> ID：10960176
> 
> 赞同：0
> 
> 时间：2012-06-09T10:20:36.690
> 
> 标签：android, cordova

我使用这样的媒体：

```
var my_media = new Media(src);
my_media.play() 
```

大多数声音片段都很短，比如 2-3 秒。当用户单击播放声音按钮时，我会播放声音。如果我一直按播放，Mediaplayer 会崩溃或出现什么问题，声音会停止播放，并且在 Eclips 中它会说： **无法创建媒体播放器。**

该应用程序仍然有效，但应用程序中的所有声音都停止播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T16:48:56.117

请使用

```
var my_media = new Media(src, onSuccess, onError);
my_media.play();

 // onSuccess Callback
        function onSuccess() {
            my_media.release();
            console.log("playAudio():Audio Success");
        }

 // onError Callback 
        function onError(error) {
            console.log('code: '    + error.code    + '\n' + 
                  'message: ' + error.message + '\n');
        } 
```

主要亮点是使用“my_media.release();” 在 onSuccess 回调中

参考：[http ://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#media.release](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html#media.release)

# javascript - 使用jQuery从子视图关闭对话框而不在MVC3中重新加载父视图

> ID：10960177
> 
> 赞同：0
> 
> 时间：2012-06-09T10:21:04.903
> 
> 标签：javascript, jquery-ui, jquery

我要实现的场景如下：

我正在使用带有剃刀视图的 MVC 3。

单击文本框（称为结果文本框），从主视图（这是一个不同的视图，添加视图）打开一个对话框，并执行回发到主控制器操作。

在对话框（即添加视图）上，只需输入两个数字以进行添加，然后在提交时，对添加视图控制器操作进行回发。

现在，当添加控制器操作处理完成时，我想要添加数字并关闭当前对话框（添加视图）并使用添加结果更新父视图（主视图）上的结果文本框。

注意：关闭对话框后，我不希望重新加载或刷新父视图。

现在，我面临的问题是如何

1）获取隐藏字段值（容器添加值）并设置到父页面上的结果测试框？

2）从对话框本身关闭对话框（添加视图）？不刷新父视图？

代码：

```
<h2> Input numbers to add</h2>
    @using (Html.BeginForm("About","Home",FormMethod.Post, new {id = "dialogchildform"}))
    { 

         @Html.Hidden("hdnresult", ViewData["result"], new { id = "hdnres" })

    <div style="position: relative; margin-left: 200px; top: 80px">

        <fieldset>

            @Html.ValidationSummary(true)
            <div class="editor-label">
                Value 1
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.num1, new { id = "num1" })
                @Html.ValidationMessageFor(model => model.num1)
            </div>
            <div class="editor-label">
                Value 2
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.num2, new { id = "num2" })
                @Html.ValidationMessageFor(model => model.num2)
            </div>
        </fieldset>
        <p>
            <input type="submit" value="Add and Retrun" id="inputSubmit" />
        </p>
    </div>

    }

    <script type="text/javascript">

           $(document).ready(function () {
               $("#inputSubmit").click(function () {

                   document.forms('dialogchildform').submit();

            // txtParentResult is a Textbox on prent view to be updated
                   document.getElementById('txtParentResult').value 
= document.forms('dialogchildform').hdnres.value; 
// not updating the parent textbox

                  // $(window.document).dialog('close');  
//gives error - Microsoft JScript runtime error: Object doesn't support property or method 'dialog'
                  //$("#mydiag").dialog("close");  
// also gives error

                  //jQuery(".ui-dialog-content").dialog("close");  
// again gives error -  Microsoft JScript runtime error: Object doesn't support property or method 'dialog'

               });        
           });

    </script> 
```

**控制器动作：**

```
[HttpPost]
        public ActionResult Add(AddNum vAddNum)
        {
            objAddNum = vAddNum;
            int result = objAddNum.AddNumbers();
            ViewData["_ActionCloseDialog"] = "true";
            ViewData["result"] = result;
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T04:40:00.097

得到了解决方案。

我没有在对话框视图上使用 jQuery 函数，而是在父视图本身上使用了对话框按钮。

由于对话框在父 .cshtml 上的 javascript 函数中定义为全局变量，并将子视图封装在 div 中，因此可以访问两个视图上的控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:29:22.840

不确定这是否是您的目标，但是，在子框架中，您可以设置一个全局变量，然后将父项中的控件文本设置为变量

```
parent.document.getElementById("").text() = ""; 
```

然后你可以通过做关闭子框架

```
var child = document.getElementById('childId');
child.document.close() 
```

希望这可以帮助

# php - 根据 statusmy 向用户发送电子邮件

> ID：10960178
> 
> 赞同：0
> 
> 时间：2012-06-09T10:21:21.600
> 
> 标签：php, mysql

我在数据库（mysql）中创建了一个表，我编写了一个使用php在数据库中插入数据的代码。正确插入了值。这里我将状态列值设置为deactive。当用户在那个时候创建​​时，我们发送一个邮件给用户以激活链接，这意味着我的网站，然后状态列必须更改为活动。

```
my db table contains the following columns

name,email,pwd,status,lastlogin,security qun,ans 
```

当用户在那个时候创建​​时，我将状态设置为 deactive.in 那个时候我想发送一封邮件（在这个邮件中，我想将链接发送到他们的帐户）给用户以激活他们的帐户，然后只有用户去到下一个过程。之后，当用户打开邮件并单击该链接时，状态列必须在数据库中更改为活动状态。我该怎么做，任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:48:25.687

您可以创建名为**activation_code**的列，向用户发送一封包含此**activation_code**链接的电子邮件。像这样的链接[www.example.com/active.php?activation_code=AABBCCDDEEFF](http://www.example.com/active.php?activation_code=AABBCCDDEEFF)，当用户单击此链接时，您可以获得**activation_code**，在数据库中找到用户并更改**状态**。您还可以创建列**activation_expires**，其中将包含激活码到期的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:02:35.493

解决问题的一种方法是：

1.  将字段“状态”设为 varchar 而不是 int。

2.  当您第一次插入用户信息时，制作一个随机字符串并将其插入到状态字段中。

3.  假设您创建的随机字符串是“lka342lkjasd8234kl2324ljklj2”。发送带有字符串作为参数的链接。

4.  在脚本中单击链接时，检查验证字符串是否与您的状态表中的值匹配。

5.  如果匹配，则显示他的帐户已验证的消息并将该字段的值更改为 1（因为 1 表示活动帐户）

6.  如果字符串不匹配，则显示消息验证链接错误。

以另一种方式，您可以制作另一个表来存储验证字符串。并使状态恶魔成为整数。初始置0，校验时置1，用新表校验校验。

# java - Android SD 卡路径同义词

> ID：10960180
> 
> 赞同：0
> 
> 时间：2012-06-09T10:21:37.030
> 
> 标签：java, android, file-io

我有一个有点奇怪的问题：这次一切正常，但我不明白为什么。

AFAIK 可以安装多个 SD 卡。一切都将被挂载到`/mnt`目录。（是真的吗？）

在我的设备上只有一张 sd 卡安装到`/mnt/sdcard`. 在我的应用程序中，我从中打开文件。我正在使用下一个代码：

```
 private void open() {
        // get file extension
        String extension = "";
        int dotIndex = downloadedFile.lastIndexOf('.');
        if (dotIndex != -1) {
            extension = downloadedFile.substring(dotIndex + 1, downloadedFile.length());
        }

        // create an intent
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
        Uri data = Uri.fromFile(new File(downloadedFile));
        String type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
        if (type == null || type.length() == 0) {
            // if there is no acceptable mime type
            type = "application/octet-stream";
        }
        intent.setDataAndType(data, type);

        // get the list of the activities which can open the file
        List resolvers = context.getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
        if (resolvers.isEmpty()) {
            (new AlertDialog.Builder(context)
                    .setMessage(R.string.AttachmentUnknownFileType)
                    .setNeutralButton(R.string.NeutralButtonText, null)
                    .create()).show();
        } else {
            context.startActivity(intent);
        }
    } 
```

实际上`downloadedFile`变量的值类似于`file:///sdcard/mydir/myfile.txt`. 但代码有效。为什么？Android如何理解什么`/sdcard/...`是相同的`/mnt/sdcard/...`？

主要问题：如果将 sd 卡安装到其他目​​录（例如，`/mnt/another-sd/`甚至`/media/sd`）会发生什么？如果将安装多个 sd 卡怎么办：android 如何理解使用什么卡？

感谢您的任何帮助！祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:51:28.857

这很简单，android configueres 在手机启动时通过设置文件安装，所以如果有 mor sdcard，Android 只会更喜欢其中一个设置为

> /SD卡/

因此，当安装设置更改时，您的代码根本没用，您只能希望设置保持不变。每家生产 Android 智能手机的公司都使用“sdcard”路径，甚至自定义 rom 也使用它

# javascript - 如何将（绝对）页脚保持在底部？

> ID：10960181
> 
> 赞同：3
> 
> 时间：2012-06-09T10:21:57.640
> 
> 标签：javascript, jquery, html, css

我想将页脚保持在页面底部，同时保持绝对位置，具有以下页面结构：

```
<div id="head"> </div> //want to keep its size auto and always on the top (position absolute) 
<div id="body"> </div> //the children of #body have position absolute (keep size auto)
<div id="foot"> </div> //want to keep this at the bottom (just below body , if body size 
                         changes then footer will also change (position absolute) 
```

我怎样才能做到这一点？

**编辑**

我想我不清楚我的问题，抱歉，但我的实际问题是在#main (height: auto) 中的内容是绝对的，所以这些内容不包括在 main 的高度中（我只是在猜这个）多数民众赞成在为什么 main 的高度是 0 因为这个页脚出现了。这是我的实际问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:25:28.010

使用`bottom:0`：

```
#foot {
  position:absolute; /* your requirement, you can also use fixed though */
  bottom:0;
  /* your other possible styles */
} 
```

请记住，`bottom`要工作，您必须`position`按照您所说的那样指定 :)

如果您使用，当您***滚动***`position:fixed`时，页脚仍然会出现在页面底部，但这取决于您的要求。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T10:33:24.710

如果我理解正确，您需要`position:fixed`而不是绝对的..

```
#head {
    position:fixed;
    height:30px;
    top:0;
    left:0;
    right:0;
}
#foot{
    position:fixed;
    height:40px;
    bottom:0;
    left:0;
    right:0;
}

#body{
    padding-top:30px; /* the same as the #head height*/
    padding-bottom:40px; /* the same as the #foot height*/
} 
```

演示在[http://jsfiddle.net/ZXMTR/](http://jsfiddle.net/ZXMTR/)*

# c# - Facebook like Button 正在发送 URL 来代替 Title

> ID：10960186
> 
> 赞同：0
> 
> 时间：2012-06-09T10:22:49.963
> 
> 标签：c#, asp.net, facebook, c#-4.0, facebook-like

我正在尝试在 Facebook 中发送标题信息，但是在单击 Like 按钮时发送 URL 来代替标题。

我的示例 HTML 在下面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="ASPNetDB.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
<head runat="server">
    <title></title>
    <meta property="og:title" content="Title" />
    <meta property="og:description" content="Description" />
    <meta property="og:url" content="url info" />
    <meta property="og:image" content="image url" />
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <iframe frameborder="0" scrolling="no" allowtransparency="true" style="border: none;
            overflow: hidden; width: 260px; height: 35px;" src="http://www.facebook.com/plugins/like.php?href=http://localhost:49334/WebForm1.aspx&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=arial&amp;height=35">
        </iframe>
    </div>
    </form>
</body>
</html> 
```

有任何想法吗？

注意 -**这是我的测试应用程序。我没有公开的 IP 地址。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:24:16.137

您无需将元数据发送到 Facebook，Facebook 在加载页面时会从页面的 HTML 中检索元数据。尝试使用以下工具查看您的 URL：

```
http://developers.facebook.com/tools/debug/og/echo?q=<your URL here> 
```

它将向您展示 Facebook 看到的内容（它是您现在正在使用的调试工具底部的“抓取的 URL”链接）。

如果它不包含元数据标签，则 Facebook 不会看到它们，并且不会将元数据添加到其 Open Graph 对象中。如果是这种情况，那么您可能没有将元数据正确添加到 HTML。

* * *

**编辑我：** *“这是我的测试应用程序。我没有公开的 IP 地址。”*

您**必须**有公开的 IP 地址，您可以尝试：

*   [动态DNS](http://dyn.com/dns/)
*   [无IP](http://www.no-ip.com/)
*   [开放式DNS](http://www.opendns.com/)
*   [TZO](http://www.tzo.com/)
*   [易DNS](http://web.easydns.com/)

* * *

**编辑二：** *我假设 Windows 主机，如果其他请提及我*

这是[DynDNS](http://dyn.com/dns/)教程 Youtube[频道](http://www.youtube.com/playlist?list=PL6FD4B5695C21E828)，另一个[No-IP](http://www.no-ip.com/) Youtube[频道](http://www.youtube.com/user/noipDDNS)，[OpenDNS](http://www.opendns.com/)相关[教程](http://www.opendns.com/support/videos/)和[TZO](http://www.tzo.com/)教程[页面](http://www.tzo.com/MainPageSupport/TutorialsPage.html)。

# asp.net - 无法从 ASP.NET 访问 ssrs 报告

> ID：10960188
> 
> 赞同：0
> 
> 时间：2012-06-09T10:23:32.393
> 
> 标签：asp.net, windows-7, reporting-services, sql-server-2008-r2

我已经在装有 Win 7 和 SQL Server 2008 R2 的机器上部署了 ssrs 报告。我正在尝试从部署在同一台机器上的 ASP.NET 应用程序访问这些报告。我可以从配置工具的 URL 访问报告。但是，当我从已部署的 ASP.NET 应用程序访问相同内容时，它会引发“未经授权”错误。该应用程序是在 Win XP、SQL Server 2008 环境下开发的。我从互联网上注意到了很多可能性。但不知道从 ASP.NET 应用程序访问报告时我缺少什么。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T06:35:21.673

将此代码放在 Page_Load 事件上并包括使用 Microsoft.Reporting.WebForms;：当报表在不同的服务器上时需要远程模式：

```
 if (!Page.IsPostBack)
        {
            ReportViewer1.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote;
            ReportViewer1.ServerReport.ReportServerUrl = new Uri(rptServerUrl);
            ReportViewer1.ServerReport.ReportPath ="Exact Report Path Here";
            ReportViewer1.ServerReport.ReportServerCredentials = new ReportViewerCredentials(userId, password, domain);
        }` 
```

# c# - 从没有 id 或类名的元素中获取文本

> ID：10960189
> 
> 赞同：0
> 
> 时间：2012-06-09T10:23:44.490
> 
> 标签：c#, html-agility-pack

我正在尝试使用 Html Agility Pack 解析 HTML 代码。有没有可用的教程，或者有人可以告诉我如何从`<td>`没有 ID 和课程的人那里获取文本？

```
 <table id="results-table">
    <tr class="row1">
    <td>Diode Zener Single 12V 5% 1W 2-Pin DO-41 Bulk</td> 
    ... 
```

每行包含 10 个不同的`<td>`. 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:28:11.053

您可以尝试使用它`XPATH`来查询您拥有的所有`td`s`table``id="results-table"`

```
//table[@id='results-table']/tr/td 
```

[Firepath](https://addons.mozilla.org/en-US/firefox/addon/firepath) for Firefox 可以帮助您制定 XPATH，您可以从那里操作它。

下面的示例代码

```
HtmlDocument doc = new HtmlDocument();
var fileName = @"..\..\..\docs\10960189.htm";
doc.Load(fileName);

var nodes = doc.DocumentNode.SelectNodes("//table[@id='results-table']/tr/td");

foreach (var node in nodes)
{
    Debug.WriteLine(node.InnerText);
} 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:25:52.023

这是一个解释如何使用 XPath 的链接：

[http://www.w3schools.com/xpath/](http://www.w3schools.com/xpath/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:28:37.373

我猜你的一些 td 标签会有类/id。使用以下代码。我在 linqpad 上写的

```
void Main()
{
    var webGet = new HtmlAgilityPack.HtmlDocument();
    //web page/string that need to be parsed
    webGet.LoadHtml(@"<table id='results-table'>" +
                                "<tr class='row1'>" + 
                                "<td class='testclass'>test td with class</td>" + 
                                "<td id='testid'>test td with id</td>" + 
                                "<td>Diode Zener Single 12V 5% 1W 2-Pin DO-41 Bulk</td>" + 
                                "<td>test td without class or id</td>" + 
                                "<tr/>"
                                );

    var tableOnPage = (from tds in webGet.DocumentNode.Descendants()
                      where lnks.Name == "td" &&
                            lnks.Attributes["class"] == null && tds.Attributes["id"] == null &&
                            tds.ParentNode.InnerText.Trim().Length > 0 && lnks.InnerText.Trim().Length > 0 
                     select new
                     {
                         td = tds.DescendantNodes().SingleOrDefault ().InnerHtml.Trim(),
                     });

    //looping through each items
    foreach (var item in tableOnPage)
    {
        Console.WriteLine(item.td);
    }
} 
```

**输出将是**

二极管齐纳单 12V 5% 1W 2-Pin DO-41 散装

测试没有类或 id 的 td

# php - 获取要在单选按钮的值属性中打印的数组的索引值

> ID：10960190
> 
> 赞同：0
> 
> 时间：2012-06-09T10:24:13.280
> 
> 标签：php, arrays, function, multidimensional-array, indexing

**问题：**

获取数组的索引值以在单选按钮的值属性中相应地打印。

**数组 $_SESSION['items']：**

```
Array
(
    [2] => Array
        (
            [category] => 2
            [question] => Array
                (
                    [6] => Källorna refereras separat
                    [7] => Vissa försök till sammanbindning
                    [8] => En del sammanfattningar
                    [9] => Olika forskningslinjer jämförs och sammanfattas
                    [10] => Kontraster, jämförelser, sammanfattningar; centrala likheter och skillnader framhävs
                )

            [title] => Integration av källorna
        )
) 
```

**我有一个看起来像这样的 PHP 函数：**

```
function itemsLayout ($array)
{   
    for ($i = 1; $i <= count($array['question']); $i++)
    {

        $form .= '<input type="radio" name="'.$array['category'].'" id="'.$array['category'].'" value="INDEX VALUE FOR QUESTION ARRAY HERE">';
    }

    return $form;
} 
```

**PHP代码：**

我使用以下方法获取索引：

```
$key = key($_SESSION['items']);
$current = $_SESSION['items'][$key]; 
```

**我使用以下方法打印第一个索引：**

```
echo itemsLayout($current); 
```

**问题：**

如何获取索引值 6、7、8、9、10 以在每个单选按钮的 value 属性中打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:29:26.127

使用 foreach 循环 [http://www.w3schools.com/php/php_looping_for.asp](http://www.w3schools.com/php/php_looping_for.asp)

我认为sintax是

```
foreach ($x as $key => $value)
{
    echo $key . "<br />";
} 
```

而不是 for ($i = 1; $i <= count($array['question']); $i++)

LE：一个更好的链接是这个[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:37:02.993

```
foreach ($question as $q) {
  $form .= sprintf('<input type="radio" name="%d" id="%d", value="%s">', $array['category'], $array['category'], $q);
} 
```

# jquery - Fancybox 中的 JScrollpanel 无法正常工作

> ID：10960195
> 
> 赞同：0
> 
> 时间：2012-06-09T10:24:37.653
> 
> 标签：jquery, fancybox, jquery-jscrollpane

我使用来自以下的fancybox：

[http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

并且滚动窗格无法正常工作，只是想知道我在下面的代码中是否做错了什么。它添加了窗格，但没有添加它自己的滚动条，所以我假设需要在fancybox之后触发，但我在下面所做的可能有问题

```
var scrollpane;    
$(document).ready(function() {      
    // start up the overlay
    $("a#addtatic-overlay").fancybox({
        helpers:  {
            overlay : {
                opacity: 0.35   
            }
        },
        'afterLoad' : (function(){
            //custom scroll bar
            scrollpane = $('.scroll-pane').jScrollPane();
        }),
        'afterClose' : (function(){
            scrollpane.destroy();
        })
    });

    // Slider
    $("#slidecontainer").muslider({
        "animationtype": "horizontal",
        "animationduration": 600,
        "height": 500,
        "width": 835
    });

    // Forms
    $("input, textarea, select").uniform();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:07:18.417

当您启动 fancybox 时究竟发生了什么？#slidecontainer 是否出现了？如果不是，请看这里：

[http://fancybox.net/howto](http://fancybox.net/howto)

内联示例：

```
 <a id="inline" href="#data">This shows content of element who has id="data"</a>

<div style="display:none"><div id="data">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div></div> 

```

# android - Android 无法启动活动

> ID：10960196
> 
> 赞同：-3
> 
> 时间：2012-06-09T10:24:44.737
> 
> 标签：android, android-activity, android-intent

所以我有这个活动：

```
public class settings_dock extends Activity {

    AlertDialog alert;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.settings); 

        //Weather settings
        ListView listView = (ListView) findViewById(R.id.settings);
        String[] values = new String[] { "Enable/Disable","Configure Item 1","Configure Item 2","Configure Item 3","Configure Item 4"};

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, values);

            // Assign adapter to ListView
            listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                if(position == 0)
                {

                    final CharSequence[] items = {"Enabled", "Disabled"};

                    AlertDialog.Builder builder = new AlertDialog.Builder(settings_dock.this);
                    builder.setTitle("The Dock is ....");

                    SharedPreferences dock = app.getContext().getSharedPreferences("dock",app.getContext().MODE_WORLD_READABLE);

                    builder.setSingleChoiceItems(items,dock.getInt("enabled_disabled",-1), new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int item) {

                            SharedPreferences dock = app.getContext().getSharedPreferences("dock",app.getContext().MODE_WORLD_READABLE);
                             SharedPreferences.Editor prefsEditor = dock.edit();
                             prefsEditor.putInt("enabled_disabled",item);
                             prefsEditor.commit();
                             alert.dismiss();
                             if(item == 0)
                             {

                             }
                            if(item == 1)
                                {

                                }

                        }
                    });
                    alert = builder.create();
                    alert.show();
                }
                if(position == 1)
                {
                    Intent in=new Intent(settings_dock.this,set_dock.class);
                    in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    in.putExtra("dock_location",1);

                }
                if(position == 2)
                {
                    Intent in=new Intent(settings_dock.this,set_dock.class);
                    in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    in.putExtra("dock_location",2);
                }
                if(position == 3)
                {
                    Intent in=new Intent(settings_dock.this,set_dock.class);
                    in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    in.putExtra("dock_location",3);
                }
                if(position == 4)
                {
                    Intent in=new Intent(settings_dock.this,set_dock.class);
                    in.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    in.putExtra("dock_location",4);
                }

            }
        });
    }

} 
```

并且我正在尝试启动一个意图，如您所见，但是 simplay 没有任何反应，甚至 logcat 中都没有错误启动的意图在我的清单中被渴望

我现在真的很困惑:(

米 **编辑：** 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.alexander.fuchs.lockscreen"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".app"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:excludeFromRecents="true"
            android:clearTaskOnLaunch="true"> 
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="boot">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.HOME" />
            </intent-filter>
        </receiver>

        <service
        android:name="lockservice" 
        android:process=":lockscreen" 
        android:icon="@drawable/ic_launcher"
        android:label="Lockscreen">
        </service>

        <activity
            android:name=".weather_update"
            android:theme="@android:style/Theme.Translucent">

        </activity>
        <activity
            android:name=".restart_service"
            android:theme="@android:style/Theme.Translucent">

        </activity>
        <activity
            android:name=".settings">

        </activity>
        <activity
            android:name=".settings_weather">

        </activity>
        <activity
            android:name=".settings_general">

        </activity>
        <activity
            android:name=".settings_dock">

        </activity>
        <activity
            android:name=".settings_personalisation">

        </activity>
        <activity
            android:name=".set_dock"
            android:theme="@android:style/Theme.Dialog"
            android:screenOrientation="portrait">

        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:29:06.437

你没有打电话：

```
startActivity(in); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:29:43.610

尝试添加`startActivity(in)`每个`if`语句。要开始一项活动，您需要调用`startActivity(intent)`方法。

# playframework - Play framework 2.0 : H2 DB 进化与简单模型

> ID：10960198
> 
> 赞同：3
> 
> 时间：2012-06-09T10:24:58.757
> 
> 标签：playframework, playframework-2.0, h2, ebean

我试图创建一个简单的控制器/模型（基于 play 2.0 的示例代码）并收到一条关于 DB 演变的消息：

```
Database 'default' needs evolution!

An SQL script will be run on your database - "Apply this script now"

1 # --- Rev:1,Ups - fbdc2fd
2 create table group (
3 id                        bigint not null,
4 name                      varchar(255),
5 description               varchar(255),
6 due_date                  timestamp,
7 constraint pk_group primary key (id))
8 ;
9 
10 create sequence group_seq; 
```

但是当点击按钮时，我收到以下错误消息：

```
Database 'default' is in inconsistent state!

An evolution has not been applied properly. Please check the problem and resolve it manually before making it as resolved 

We got the following error: SQLステートメントに文法エラーがあります "CREATE TABLE GROUP[*] ( ID BIGINT NOT NULL, NAME VARCHAR(255), DESCRIPTION VARCHAR(255), DUE_DATE TIMESTAMP, CONSTRAINT PK_GROUP PRIMARY KEY (ID)) "; 期待されるステートメント "identifier" Syntax error in SQL statement "CREATE TABLE GROUP[*] ( ID BIGINT NOT NULL, NAME VARCHAR(255), DESCRIPTION VARCHAR(255), DUE_DATE TIMESTAMP, CONSTRAINT PK_GROUP PRIMARY KEY (ID)) "; expected "identifier"; SQL statement: create table group ( id bigint not null, name varchar(255), description varchar(255), due_date timestamp, constraint pk_group primary key (id)) [42001-158] [ERROR:42001, SQLSTATE:42001], while trying to run this SQL script:

 1# --- Rev:1,Ups - fbdc2fd
2
3 create table group (
4 id                        bigint not null,
5 name                      varchar(255),
6 description               varchar(255),
7 due_date                  timestamp,
8 constraint pk_group primary key (id))
9 ;
10
11 create sequence group_seq; 
```

我的配置文件

```
#DB setting
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play"

# Ebean configuration
ebean.default="models.*" 
```

我的控制器

```
public class Application extends Controller {

    /**
     * 
     * @return
     */
  public static Result index() {

      Group g = new Group("New group Test","This is a test !");
      g.save();

    return ok(index.render("Render page"));
  }

} 
```

最后是我的模型：

```
@Entity
public class Group extends Model {

    public static Finder<Long,Group> find = new Finder (Long.class, Group.class);

    @Id
    public Long id;

    @Required
    public String name;

    @Required
    public String description;

    @DateTime(pattern = "MM/dd/yy")
    public Date dueDate;

    /**
     *  ToString method
     */
    public String toString() {
        return "Group(" + id + ") in project " + name;
        }

    /**
     *  Constructor
     * @param name
     * @param description
     */
    public Group(String name, String description){
            this.name=name;
            this.description=description;
    }

} 
```

有人遇到同样的问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T11:01:49.713

可能是您的表（组）的名称有问题，因为它是一个 SQL 关键字。尝试引用表名（“组”）或测试如果您使用不同的表名会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:11:23.290

Group 是一个关键字，因此请为您的模型找到其他名称，而不是`Group`它会起作用。

顺便说一句，还修复了您的 Finder：

```
public static Finder<Long,MyGroup> find = new Finder<Long,MyGroup> (Long.class, MyGroup.class); 
```

您也可以强制其他表的名称以避免与关键字冲突，但我会亲自更改模型名称并使用表和模型。

```
@Entity
@Table(name = "group_table")
public class Group extends Model {
  ...
} 
```

# javascript - 使用 `prototype` 而不是 `this` 的原因

> ID：10960205
> 
> 赞同：6
> 
> 时间：2012-06-09T10:25:37.267
> 
> 标签：javascript

我正在使用 Lightbox2

[https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js](https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js)

而且我不明白为什么Lightbox的所有内部成员都是原型（`Lightbox.prototype.init`）而不是简单的成员（`Lightbox.init`）？

如果它们特定于灯箱的每个实例，使用起来会不会更容易`this.init`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T10:34:27.553

## 使困惑？不要...

这样想：

1.  Lightbox 是您的类定义，但它还不是一个实例。

2.  你直接放在类上的任何东西都像一个静态成员：

    ```
    Lightbox.staticFunc = function() {
        // "this" will not point to instance object
    }; 
    ```

3.  无论您在其原型上放置什么都是共享实例成员：

    ```
    Lightbox.prototype.instanceFunc = function() {
        // "this" will point to object instance so members can be accessed
    }; 
    ```

4.  当你创建一个类的实例时，所有的实例成员都可以通过 t`this`关键字访问，但静态成员可以通过类定义来访问：

    ```
    var someData = Lightbox.staticFunc();
    var l = new Lightbox();
    l.instanceFunc(); 
    ```

这是否清楚你对原型成员的理解？

## 然后灯箱代码

您一直在查看的代码意味着：

```
// this is a constructor that accesses instance properties (using "this")
// ------
// since properties are accessed via "this.something" means that they are
//    not shared between instances but are part of one particular instance
// ------
function Lightbox(options) {
    this.options = options;
    this.album = [];
    this.currentImageIndex = void 0;
    this.init();
}

// adding an instance method that will be accessible to lightbox object instance
//    that's why it can also access instance members (using "this")
// ------
// all functions that are defined on the prototype are shared between
//    all instances so they consume less resources because not every
//    object instance created them separately.
// ------
Lightbox.prototype.init = function() {
    this.enable();
    return this.build();
}; 
```

但是这段代码的某些部分有点令人困惑，即

```
LightboxOptions = (function() {

    function LightboxOptions() {
        this.fileLoadingImage = 'images/loading.gif';
        this.fileCloseImage = 'images/close.png';
        this.resizeDuration = 700;
        this.fadeDuration = 500;
        this.labelImage = "Image";
        this.labelOf = "of";
    }

    return LightboxOptions;

})(); 
```

`LightboxOptions`类包含在函数闭包中，即使它没有定义任何私有数据，因此在此示例中可以省略外部立即执行函数，但结果相同：

```
LightboxOptions = function() {
    this.fileLoadingImage = 'images/loading.gif';
    this.fileCloseImage = 'images/close.png';
    this.resizeDuration = 700;
    this.fadeDuration = 500;
    this.labelImage = "Image";
    this.labelOf = "of";
}; 
```

当然可以在构造函数中定义这些函数 using`this`但是它们不会在实例之间共享，因此每个对象实例都将定义相同的函数，从而消耗更多资源。所以这是不一样的，尽管从执行点来看它看起来是一样的：

```
CustomClass = function() {
    this.prop = true;
};
CustomClass.prototype.method = function() { alert("I'm shared."); }; 
```

与以下略有不同：

```
CustomClass = function() {
    this.prop = true;
    this.method = function() { alert("I'm duplicated in every instance."); };
}; 
```

后者在为每个对象实例定义函数时消耗更多资源。

## ...还有一点要完全清除这个东西

假设我们有这个类定义：

```
var C = function() {
    this.prop = true;
    this.method = function() { console.log("Per instance method"); };
}
C.prototype.method = function() { console.log("Shared instance method"); }; 
```

如果我们调用这些代码行会发生什么

```
var a = new C();
var b = new C();
a.method();
b.method();
delete a.method;
a.method();
b.method(); 
```

你认为输出会是什么？你至少应该有点困惑之后会发生什么`delete`？哪个方法会被删除？每个实例？共享？两个都？好吧，应该在对象实例上删除每个实例方法`a`，这就是为什么之后它报告共享方法已被调用的原因。但仅在`a`. `b`仍然有自己的每个实例方法。

因此，事不宜迟，输出如下所示：

```
Per instance method      // a.method
Per instance method      // b.method
Shared instance method   // a.method
Per instance method      // b.method 
```

## `prototype`属性呢

这些是不同的。当您创建一个对象实例时，所有这些属性都会被复制到每个对象并且不会共享。因此，无论您在特定对象的范围内对它们做什么，都不会反映给其他人。

如果您随后删除特定对象上的此类属性，它的初始值仍然可用，就像对象被实例化时一样。

```
var C = new function() {};
C.prototype.prop = 1;

var a = new C();
var b = new C();

a.prop = 10;   // does not change the value of "b.prop"
delete a.prop; // "a.prop" is now back to 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T10:28:33.797

> 如果它们特定于灯箱的每个实例，使用 this.init 会不会更容易？

他们不应该这就是为什么他们将一切都放在`prototype`对象中。当您使用 时`prototype`，所有方法仍然对您可用，只是它们不会成为实例成员。

JavaScript 使用原型链，当它看到一个方法时，它会在原型链中搜索，直到找到指定的方法。`Object`如果在中间没有找到，这个过程会一直持续到最终的对象。

您应该只创建您认为合理或需要的实例成员（通过），因为如果您使用关键字（例如实例成员`this`）放置不必要的方法，它会增加开销（计算浪费） 。`this`

# mysql - MySQL 查询需要时间来执行

> ID：10960208
> 
> 赞同：1
> 
> 时间：2012-06-09T10:26:23.757
> 
> 标签：mysql, time, execution

查询很简单：

```
Eg 1: "UPDATE threads SET hits = hits+1 WHERE id = TID"
Eg 2: "UPDATE users SET last_activity = unix_timestamp() WHERE id = UID"

`users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(15) COLLATE utf8_unicode_ci NOT NULL,
  `last_activity` int(10) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci

`threads` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `hits` int(10) unsigned NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

让我们以这个查询为例：

```
mysql_query("UPDATE users SET last_activity = unix_timestamp() WHERE id = UID"); 
```

没有查询，脚本需要大约 30 毫秒才能执行：

![在此处输入图像描述](../Images/dfd969c7a0da32dd9b2fe6f35b41139b.png)

使用查询，脚本需要大约 110 毫秒来执行：

![在此处输入图像描述](../Images/7ab213bd57b8bdf9b069dbae1d9f3179.png)

最好的问候， 杜鲁曼·埃迪

LE：生成执行时间的代码如下：

```
///this is placed above any code
$mtime = explode(' ',microtime()); 
$mtime = $mtime[1] + $mtime[0]; 
$tstart = $mtime;
.....
my game code is here
.....
$mtime = explode(' ',microtime());
echo lang('info','page_load').' '.number_format(($mtime[1] + $mtime[0]) -    $tstart,4,'.','')*1000; 
```

这就是我计算执行时间的方式，它非常准确，从来没有让我失望过。PS - 实际执行时间要低约 15 毫秒，因为我现在在 Windows 上托管它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T14:09:36.257

你能确定你的`id`专栏是一个`index`吗？或者`primary key`......这将使您的查询快速点亮。

```
CREATE UNIQUE INDEX uid ON users 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:58:33.253

我想我可以在页面加载后对 $(document).ready() 进行 ajax 调用来进行更改，因为这个 UPDATE 语句是非常嵌套的。

# wordpress - 如何确保对 Wordpress 插件的更改不会在插件更新时丢失？

> ID：10960212
> 
> 赞同：5
> 
> 时间：2012-06-09T10:27:24.640
> 
> 标签：wordpress

我很确定我已经在某处读过，您实际上可以将主插件 *.php 文件移动到其他地方（我假设在您的主题目录下）以确保它安全，以防您对其进行更改和插件更新。我尝试了谷歌，但我找不到任何东西。具有良好结果的谷歌页面就足够了。

我刚刚经历了一种情况，我的 2 个插件的布局发生了变化并满足了我的需求，我想确保它不会再次发生。除了将主文件放在另一个位置之外，还有没有办法移动任何 CSS 和 JS 文件？

在 Concrete5 CMS 中有一个很好的方法，通过在插件块（可能被视为 WP 插件）内创建一个新文件夹，您可以在其中创建主文件、任何 CSS 和 JS 文件的副本以及然后您可以简单地编辑它们并为您正在使用该块的页面位置选择该模板。

我认为 Wordpress 中没有这样的东西，但我能走多远？

更新：我发现我在创建文件的新实例然后将其移动到主题目录时应用了该建议。有问题的插件是 HL-Twitter。这些是插件文件：

```
admin.php
archive.php
functions.php
hl_twitter.php
hl_twitter_archive.php
hl_twitter_widget.php
import.php
widget.php 
```

现在，这是 hl_twitter_widget.php 的顶部内容（已注释掉）：

```
Widget Theme for HL Twitter
To change this theme, copy hl_twitter_widget.php
to your current theme folder, do not edit this
file directly.

Available Properties:
$before_widget
$after_widget
$before_title
$after_title
$widget_title
$show_avatars
$show_powered_by
$num_tweets: how many tweets to show
$tweets: array of $tweet
$tweet: object representing a tweet
$tweet->twitter_tweet_id
$tweet->tweet
$tweet->lat
$tweet->lon
$tweet->created
$tweet->reply_tweet_id
$tweet->reply_screen_name
$tweet->source
$tweet->screen_name
$tweet->name
$tweet->avatar
$user: represents the Twitter user (ONLY SET IF SHOWING A SINGLE USERS TWEETS!)
$user->twitter_user_id
$user->screen_name
$user->name
$user->num_friends
$user->num_followers
$user->num_tweets
$user->registered
$user->url
$user->description
$user->location
$user->avatar 
```

所以我复制主文件（在本例中为 hl_twitter.php）是错误的，但仍然 - 这使我能够编辑插件目录之外的文件，系统以某种方式检查它的存在并在存在时将其拾取。如果这种行为是 Wordpress 本身支持的，或者它已集成到插件本身中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:47:32.857

对于主题，Wordpress 有一个“子主题”的概念，它允许这样做：将更改与主主题分开，以防它发生变化。

我还没有找到用插件来做到这一点的方法。

我自己使用了一些策略：

*   我将插件版本提高到一个非常高的数字，例如 99.9。这样 Wordpress 将永远不会更新插件。
*   将我的插件存储在版本控制中（我使用 git，但这没关系），这允许您更新插件，运行“差异”工具并查看发生了什么变化。如果您不喜欢，您只需恢复，就像您编写的代码很糟糕一样。但是这种方法需要一点技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:30:07.797

您是在谈论同时运行修改后的 3rd 方插件和更新版本的部分内容吗？

那是不可能的。没有“保留我的更改并自动将它们转移到新版本”的神奇方法。这里的方法是在编辑版本和更新之间进行差异，并将更改集成到实际源文件中。

底线是，如果您手动编辑第三方插件，那么一旦更新发生，您就需要进行手动审查（并且可能会返工）。这就是为什么广泛修改第三方插件通常不是一个好主意的原因。

# java - 如何从 Java 中的文本文件中读取逗号分隔值？

> ID：10960213
> 
> 赞同：11
> 
> 时间：2012-06-09T10:27:24.623
> 
> 标签：java, string, io

我有这个文本文件，其中包含地图上不同点的纬度和经度值。

如何将字符串拆分为纬度和经度？使用其他分隔符（如空格或制表符等）执行此类操作的一般方法是什么？示例文件：

```
28.515046280572285,77.38258838653564
28.51430151808072,77.38336086273193
28.513566177802456,77.38413333892822
28.512830832397192,77.38490581512451
28.51208605426073,77.3856782913208
28.511341270865113,77.38645076751709 
```

这是我用来从文件中读取的代码：

```
try(BufferedReader in = new BufferedReader(new FileReader("C:\\test.txt"))) {
    String str;
    while ((str = in.readLine()) != null) {
        System.out.println(str);
    }
}
catch (IOException e) {
    System.out.println("File Read Error");
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-09T10:29:07.510

您可以使用以下[`String.split()`](https://docs.oracle.com/javase/10/docs/api/java/lang/String.html#split(java.lang.String))方法：

```
String[] tokens = str.split(","); 
```

之后，使用[`Double.parseDouble()`](https://docs.oracle.com/javase/10/docs/api/java/lang/Double.html#parseDouble(java.lang.String))方法将字符串值解析为双精度值。

```
double latitude = Double.parseDouble(tokens[0]);
double longitude = Double.parseDouble(tokens[1]); 
```

其他包装类中也存在类似的解析方法 - `Integer`,`Boolean`等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T10:38:47.830

使用 OpenCSV 以获得可靠性。永远不应该将拆分用于此类事情。这是我自己的程序的一个片段，它非常简单。我检查是否指定了分隔符，如果是，则使用此分隔符，否则我使用 OpenCSV 中的默认值（逗号）。然后我读了标题和字段

```
CSVReader reader = null;
try {
    if (delimiter > 0) {
        reader = new CSVReader(new FileReader(this.csvFile), this.delimiter);
    }
    else {
        reader = new CSVReader(new FileReader(this.csvFile));
    }

    // these should be the header fields
    header = reader.readNext();
    while ((fields = reader.readNext()) != null) {
        // more code
    }
catch (IOException e) {
    System.err.println(e.getMessage());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T10:50:46.923

使用逗号（，）分割你的字符串`str.split(",")`和制表符使用`str.split("\\t")`

```
 try {
        BufferedReader in = new BufferedReader(
                               new FileReader("G:\\RoutePPAdvant2.txt"));
        String str;

        while ((str = in.readLine())!= null) {
            String[] ar=str.split(",");
            ...
        }
        in.close();
    } catch (IOException e) {
        System.out.println("File Read Error");
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-10T22:13:43.243

# 使用`BigDecimal`，而不是`double`

[adatapost](https://stackoverflow.com/a/10960224/642706)的答案关于使用是正确的，`String::split`但关于使用`double`来表示您的经纬度值是错误的。/和`float`/类型使用[浮点技术](https://en.wikipedia.org/wiki/Floating-point_arithmetic)，以牺牲[准确性](https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems)换取执行速度。`Float``double``Double`

而是使用[`BigDecimal`](https://en.wikipedia.org/wiki/Floating_point)正确表示您的经纬度值。

# 使用*Apache Commons CSV*库

此外，最好让诸如[*Apache Commons CSV*](https://commons.apache.org/proper/commons-csv/)之类的库来执行读取和写入[CSV](https://en.wikipedia.org/wiki/Comma-separated_values)或[制表符分隔](https://en.wikipedia.org/wiki/Tab-separated_values)文件的繁琐工作。

# 示例应用

*这是一个使用Commons CSV*库的完整示例应用程序。此应用程序写入然后读取数据文件。它`String::split`用于写作。该应用程序使用`BigDecimal`对象来表示您的经纬度值。

```
package work.basil.example;

import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVPrinter;
import org.apache.commons.csv.CSVRecord;

import java.io.BufferedReader;
import java.io.IOException;
import java.math.BigDecimal;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.time.Instant;
import java.util.List;
import java.util.concurrent.ThreadLocalRandom;

public class LatLong
{
    //----------|  Write  |-----------------------------
    public void write ( final Path path )
    {
        List < String > inputs =
                List.of(
                        "28.515046280572285,77.38258838653564" ,
                        "28.51430151808072,77.38336086273193" ,
                        "28.513566177802456,77.38413333892822" ,
                        "28.512830832397192,77.38490581512451" ,
                        "28.51208605426073,77.3856782913208" ,
                        "28.511341270865113,77.38645076751709" );

        // Use try-with-resources syntax to auto-close the `CSVPrinter`.
        try ( final CSVPrinter printer = CSVFormat.RFC4180.withHeader( "latitude" , "longitude" ).print( path , StandardCharsets.UTF_8 ) ; )
        {
            for ( String input : inputs )
            {
                String[] fields = input.split( "," );
                printer.printRecord( fields[ 0 ] , fields[ 1 ] );
            }
        } catch ( IOException e )
        {
            e.printStackTrace();
        }
    }

    //----------|  Read  |-----------------------------
    public void read ( Path path )
    {
        // TODO: Add a check for valid file existing.

        try
        {
            // Read CSV file.
            BufferedReader reader = Files.newBufferedReader( path );
            Iterable < CSVRecord > records = CSVFormat.RFC4180.withFirstRecordAsHeader().parse( reader );
            for ( CSVRecord record : records )
            {
                BigDecimal latitude = new BigDecimal( record.get( "latitude" ) );
                BigDecimal longitude = new BigDecimal( record.get( "longitude" ) );
                System.out.println( "lat: " + latitude + " | long: " + longitude );
            }
        } catch ( IOException e )
        {
            e.printStackTrace();
        }
    }

    //----------|  Main  |-----------------------------
    public static void main ( String[] args )
    {
        LatLong app = new LatLong();

        // Write
        Path pathOutput = Paths.get( "/Users/basilbourque/lat-long.csv" );
        app.write( pathOutput );
        System.out.println( "Writing file: " + pathOutput );

        // Read
        Path pathInput = Paths.get( "/Users/basilbourque/lat-long.csv" );
        app.read( pathInput );

        System.out.println( "Done writing & reading lat-long data file. " + Instant.now() );
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-11T01:36:10.177

您还可以使用 java.util.Scanner 类。

```
private static void readFileWithScanner() {
    File file = new File("path/to/your/file/file.txt");

    Scanner scan = null;

    try {
        scan = new Scanner(file);

        while (scan.hasNextLine()) {
            String line = scan.nextLine();
            String[] lineArray = line.split(",");
            // do something with lineArray, such as instantiate an object
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } finally {
        scan.close();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-31T05:32:23.807

`//lat=3434&lon=yy38&rd=1.0&|`以该格式显示 o/p

```
public class ReadText {
    public static void main(String[] args) throws Exception {
        FileInputStream f= new FileInputStream("D:/workplace/sample/bookstore.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(f));
        String strline;
        StringBuffer sb = new StringBuffer();
        while ((strline = br.readLine()) != null)
        {
            String[] arraylist=StringUtils.split(strline, ",");
            if(arraylist.length == 2){
                sb.append("lat=").append(StringUtils.trim(arraylist[0])).append("&lon=").append(StringUtils.trim(arraylist[1])).append("&rt=1.0&|");

            } else {
                System.out.println("Error: "+strline);
            }
        }
        System.out.println("Data: "+sb.toString());
    }
} 
```

# jquery - 如何在jquery mobile中将图像动态添加到网格中？

> ID：10960214
> 
> 赞同：-1
> 
> 时间：2012-06-09T10:27:34.907
> 
> 标签：jquery, android, jquery-plugins, jquery-mobile, cordova

我想使用 jquery mobile 将图像动态添加到网格中。我遵循以下代码[jQuery Mobile 网格与图像和标题](http://www.vjkhan.com/jquery-mobile-jqm-grid-with-images-and-captions/)。但是这里的图像是静态添加的。但是在我的项目中，在运行时我需要将图像添加到网格中，我不知道会有多少，所以我想动态添加它们。所以任何人都可以请建议我如何将图像动态添加到网格中。

我正在使用android中的phonegap插件实现此代码......

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T03:05:53.207

```
you should go through loop and append data to parent div..

Ex:

    <div class ='ui-grid- c' id="parentDiv">

        </div>

    And your code;;
        var Items = [];
            for(var i=0;i< your_data_length:i++){
               //Add your code here
        Items.push("<div class='ui-block-b'><img src="your image source"></div>");  

        }
         $('#perentDiv').append(Items.join(''));
         $('#perentDiv').trigger('create');

    if youcan post your data list , i can post more code .. 
```

/*这将用于 2 列网格。如果需要 maor 列网格，只需在[http://jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)上更改 div 的类。

# java - 在 Android 应用中发送电子邮件

> ID：10960216
> 
> 赞同：1
> 
> 时间：2012-06-09T10:27:43.817
> 
> 标签：java, android, email

我正在构建一个非常简单的 android 应用程序，它根据一堆用户输入创建一个字符串。我想让用户能够通过电子邮件向自己发送来自应用程序的字符串。

我来自 php 背景，这非常简单：有一个函数可以接收“收件人”地址、正文、主题等，并方便地*从*php 发送电子邮件：

```
mail($to,$subject,$message,$headers) 
```

这基本上是我想在 Android 环境中复制的内容。我在以下方面取得了一些成功，但这只是打开了*用户*的电子邮件客户端

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
String emailTo = userEmail;
String emailSubject = "Subject Line";
String emailBody = userString;
emailIntent.setType("text/html");
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,emailTo);
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,emailSubject);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(emailBody));
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

最后我尝试调用一个 php 脚本来发送：

```
String phpSend = "http://www.MyPHPSendScript.com?emailbody=userString";
try {
  URL url = new URL(phpSend);
  url.openConnection().getContent();
  } catch (Exception e) {
      out.println("Failed to send email");
  } 
```

但是a）这失败了，b）这似乎有点像黑客......

有没有人有任何想法/建议？

谢谢，格林奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:39:24.970

我没有足够的声誉将其作为评论而不是答案，但是遵循本教程应该会让您走上正确的轨道，[http://www.developerfusion.com/code/1975/sending-email-using-smtp -and-java/](http://www.developerfusion.com/code/1975/sending-email-using-smtp-and-java/)虽然老实说我之前没有这样做过。我确实从 android 文档中知道 Socket、DataInputStream 和 DataOutputStream 都受支持，所以看不出有任何不工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T11:19:30.457

我决定使用我原来的帖子中提到的 PHP 解决方案。恐怕我无法让任何电子邮件课程正常工作。我不知道您必须明确分配应用程序访问互联网的权限！我将以下内容添加到我的清单文件中，并且 PHP 工作得很好。

感谢您的所有帮助和指导！
格林奇

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# ios - Xcode 中的详细保存方法和委托 TableViewController 失败

> ID：10960219
> 
> 赞同：1
> 
> 时间：2012-06-09T10:28:25.847
> 
> 标签：ios, uitableview, xcode4.2, delegation, detailview

当我将用户传递的信息保存在 detailTableViewController 中时，我遇到了一个错误。虽然当我通过按讲座强制调试器时，它会继续执行 coredata 作业等。

这是我的结构：一个detailTableViewController，它呈现用户填充然后传递给核心数据的静态单元格。它为 MainTableViewController 实现了一个委托来弹出它。

PhraseDetailTableViewController.h:

```
 #import <UIKit/UIKit.h>
 #import "Phrase.h"

 @class PhraseDetailTableViewController;

 @protocol AddPhraseTVCDelegate
   - (void) theSaveButtonOnThePhraseDetailWasTapped:(PhraseDetailTableViewController *) controller;
 @end

 @interface PhraseDetailTableViewController : UITableViewController

   @property (strong,nonatomic) NSManagedObjectContext *managedObjectContext;
   @property (nonatomic,weak) id <AddPhraseTVCDelegate> delegate;
   @property (strong, nonatomic) IBOutlet UITextField *phraseMotivationTextField;

   - (IBAction)save:(id)sender;

 @end 
```

PhraseDetailTableViewController.m ：

```
- (void)save:(id)sender
{
  NSLog(@"Telling the PhraseDetailTableViewController Delegate that Save was tapped on the PhraseDetailTableViewController");

  Phrase *phrase = [NSEntityDescription insertNewObjectForEntityForName:@"Phrase" inManagedObjectContext:self.managedObjectContext];
  phrase.motivation = phraseMotivationTextField.text;

  NSLog(@"la phrase est %@", phrase.motivation);

  [self.managedObjectContext save:nil];

  [self.delegate theSaveButtonOnThePhraseDetailWasTapped:self];
  NSLog(@"le message savebuttononethe.. a ete envoyé");
} 
```

我把它委托给主要的，这里是 .H 和 .m

PhraseTableViewController.h ：

```
#import <UIKit/UIKit.h>
#import "PhraseDetailTableViewController.h"
#import "CoreDataTableViewController.h"
#import "Phrase.h"

@interface PhraseTableViewController : CoreDataTableViewController <AddPhraseTVCDelegate>

    @property (strong,nonatomic) NSFetchedResultsController *fetchedResultsController;
    @property (strong,nonatomic) NSManagedObjectContext *managedObjectContext;

@end 
```

PhraseTableViewController.m（提取我传递委托并接收委托方法的位置）：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if([segue.identifier isEqualToString:@"Add Phrase Segue"])
  {
     NSLog(@"Seeting PhraseTVC as a delegate of PhraseDetailTableViewController");

     PhraseDetailTableViewController *phraseDetailTableViewController= segue.destinationViewController;
     phraseDetailTableViewController.delegate=self;
     phraseDetailTableViewController.managedObjectContext=self.managedObjectContext;
  }
}

- (void)theSaveButtonOnThePhraseDetailWasTapped:(PhraseDetailTableViewController *)controller
{
  [controller.navigationController popViewControllerAnimated:YES];
  NSLog(@"c'est la methode en elle meme qui chie");
} 
```

我认为这与 Main/detail 的子类化及其继承的委托有关。但我无法弄清楚这个错误到底意味着什么：s

干杯，路易斯

# scala - Scala specs2 验收测试模式混淆

> ID：10960233
> 
> 赞同：1
> 
> 时间：2012-06-09T10:30:34.653
> 
> 标签：scala, acceptance-testing, specs2

我刚开始使用 Scala 和 Spec2。但是，我对 spec2 中的接受风格有点困惑。

有人可以向我解释一下它的功能是什么！和 ^ 在这种情况下。我已经阅读了文档，但我仍然不太明白。我了解单元测试模式，但这部分对我来说真的很难理解。

```
 "this is my specification"                          ^
    "and example 1"                                   ! e1^
    "and example 2"                                   ! e2

  def e1 = success
  def e2 = success 

```

这个例子是我从[http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html得到的](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html)

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T04:51:55.140

首先，`!`在`^`选择时考虑了两个标准：

*   减少视觉混乱
*   有必要的相对优先级以避免括号

他们所做的是：`!`将描述与测试该描述的代码相关联，并将`^` 一堆描述、测试、格式注释和其他支持代码连接到一个描述完整测试套件的对象中。

“接受”规范的重点是它们纯粹是功能。可变规范利用可变性来“注册”代码。例如，当您这样做时：

```
"a test" should {
  "succeed" in {
    success
  }
} 
```

这与任何声明无关。它只是类主体（构造函数）中的一个语句，那么 Specs2 是如何找到它的呢？很简单：当该代码运行时，它会更改值或变量以注册自身。

这是不可变规范不做的事情。通过运行方法找到测试`is`，该方法必须返回所有测试的列表。让我们想象一个非常面向对象的非语法糖，这样做的方式：

```
def is = List(
  new TestCase("A Test", new TestRule("succeed", success)),
  new TestCase("Another test", new TestRule("not fail", success))
) 
```

因此，该方法`^`所做的是加入“测试用例”（可以这么说——不是实际的 Specs2 术语），以及`!`将“测试规则”与“测试用例”相关联。它的工作原理有点像下面——不完全是，因为我正在改变一些东西，让它看起来更像传统的 OO。

```
"this is my specification"                        ^
"and example 1"                                   ! e1^
"and example 2"                                   ! e2

new ExampleDescription("this is my specification") ^
new ExampleDescription("and example 1")            ! e1^
new ExampleDescription("and example 2")            ! e2

// an "Example" is a subclass of "Fragment"
new ExampleDescription("this is my specification")       ^
new Example(new ExampleDescription("and example 1"), e1) ^
new Example(new ExampleDescription("and example 2"), e2)

new Fragment(
  new ExampleDescription("this is my specification"),
  List(
    new Example(new ExampleDescription("and example 1"), e1),
    new Example(new ExampleDescription("and example 2"), e2)
  )
)

new Fragments(
  new Fragment(
    new ExampleDescription("this is my specification"),
    List(
      new Example(new ExampleDescription("and example 1"), e1),
      new Example(new ExampleDescription("and example 2"), e2)
    )
  )
) 
```

因此，验收规范是由片段组成的。片段可以通过多种方式组成，例如与某些代码相关联的描述，或其他片段后跟的描述。

它的工作方式非常复杂，可以满足各种需求，例如自动示例、给定的时间规范、正则表达式提取器、部分函数、规范输出的格式等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T11:07:43.847

这很简单。如页面上所写，`^`构建了一个片段列表。片段可以是字符串、附加代码块的描述（“描述”！块）或控制元素`p`，如空行。所以你的例子可以读作：

```
Description("this is my specification") and
  Description("and example 1").withBlock(e1) and
  Description("and example 2").withBlock(e2) 
```

这将被分配为`def is =`规范类顶部的主体。然后将在内部处理此列表，并且对于每个描述，控制台都会打印一行，并且根据块的结果（如果有的话），它的颜色会有所不同。

总而言之，它构建了一个将由测试运行器处理的项目列表。

# php - 保存前 cakePHP 验证数据

> ID：10960235
> 
> 赞同：1
> 
> 时间：2012-06-09T10:30:53.490
> 
> 标签：php, cakephp-2.1

我在使用 cakePhp 2.x 创建的网站中遇到问题，当我尝试注册帐户时，我的表单检查了我的所有字段规则，并且 beforeSave 加密了密码，但在使用确认检查密码（MatchPassword）之前加密了密码密码，然后返回两个密码不相等的错误，因为密码是 40 个字符的密码。

这是我的模型代码，我该如何解决这个问题？

```
<?php
    //questo modello interessa lòa tabella User
    class User extends AppModel{
        public $name = 'User'; //non utilizzata nel sito è il nome del modello alla fine per migliorare la compatibilità

        public $validate = array(

            'password' => array(
                'non_vuoto' => array(
                    'rule'=> 'notEmpty',//non è vuoto metodo che eredito da appmodel
                    'message'=> 'La password non può essere vuota'  
                ),
                'min_lunghezza' => array(
                    'rule' => array('minLength',5),
                    'message' => 'La password deve contenere almeno 5 caratteri'
                ),
                'max_lunghezza' => array(
                    'rule' => array('maxLength',15),
                    'message' => 'La password deve contenere al massimo 15 caratteri'
                ),
                'password_uguale' => array(
                    'rule' => 'matchPasswords',
                    'message' => 'Not equal password'
                )
            ),
            'password_confirm' => array(
                'non_vuoto' => array(
                    'rule'=> 'notEmpty',//non è vuoto metodo che eredito da appmodel
                    'message'=> 'La password non può essere vuota'  
                )           
            )
        );

        public function matchPasswords($data){

            if ($data['password']==$this->data['User']['password_confirm']){
                return true;
            }

            $this->invalidate('password_confirm','Le due password non coincidono');
            return false;
        }

        public function beforeSave(){
            //crypt
            if (isset($this->data['User']['password'])){
                $this->data['User']['password']=AuthComponent::password($this->data['User']['password']);
            }
            return true;
        }

    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T19:44:58.097

我有一个类似的问题——我不确定这是否*正是*你所要求的——但我需要在应用 beforeSave() 规则之前验证我的模型。

我发现 CakePHP's [Validating Data from the Controller](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)页面很有帮助。基本上，您设置数据

```
$this->ModelName->set($this->request->data); 
```

然后你可以检查模型的 validates() 方法......

```
if ($this->ModelName->validates()) { // ... 
```

然后，您可以决定是保存模型还是使用 $this->Session->setFlash() 向用户显示错误。

# ruby-on-rails - 如何对两个关联执行 OR 查询？

> ID：10960240
> 
> 赞同：0
> 
> 时间：2012-06-09T10:31:33.600
> 
> 标签：ruby-on-rails, activerecord

在 Rails 3.2 中，在用户显示页面上，我试图显示用户喜欢或标记的用户列表。

```
@user = User.find(params[:id])
@users = User.where(( id: @user.tags.uniq.map(&:user_id)) | (id: @user.likes.uniq.map(&:user_id)) ) 
```

这给出了语法错误。我尝试了其他一些排列，但没有运气。

对两个关联执行 OR 查询的正确语法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:05:52.287

当您对两个查询都使用 id 列时，您可以在进行查找之前将两者的 id 结合起来`@user.tags`。`@user.likes`

```
@user = User.find(params[:id])
user_ids = (@user.tags.map(&:user_id) + @user.likes.map(&:user_id))
@users = User.find(user_ids.uniq) 
```

您可能可以进一步完善这一点，但对我来说这看起来更容易理解。

# ajax - 纯文本不会显示在 IE 中 - 而是奇怪的胡言乱语

> ID：10960245
> 
> 赞同：1
> 
> 时间：2012-06-09T10:32:08.020
> 
> 标签：ajax, cross-browser, internet-explorer-9

我有一个页面可以读取服务器上的文件并使用 Ajax 输出。在 Firefox 和 Chrome 中，文档显示正常，在 IE9 中，要么什么都不显示，要么显示一些奇怪的乱码。

该网站在这里：`http://199.193.248.80/test/test.html`在 IE 中等待几秒钟，然后出现乱码。

截屏： ![http://i.imgur.com/uligc.png](../Images/22a51d2684ecc06bfa03275f3bd5389c.png)

为什么 IE 会这样做，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:40:07.407

似乎对我来说工作正常（IE9）......

但是您可能想检查页面编码是否与从 AJAX 调用返回的 html 的编码相同。

我这样说是因为返回的内容类型标头是`text/html;Charset=Windows-1252`，但是使用 firebug 我在其中看到 unicode 字符..这可能会欺骗 IE ...

（*您可能也应该`<meta charset="...">`在 html 页面中*添加一个）

# javascript - Node.js Flatiron HTTPS 服务器

> ID：10960246
> 
> 赞同：2
> 
> 时间：2012-06-09T10:32:11.367
> 
> 标签：javascript, node.js, ssl, https, flatiron.js

有没有办法在 Flatiron 框架中使用 HTTPS 连接？

**更新：** HTTPS 服务器示例现在在[github](https://github.com/flatiron/flatiron#example-https-server)上可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:13:24.910

参考**[文档](https://github.com/flatiron/union#createserveroptions)**看起来像 https 可以作为一个选项添加，看起来应该像这样

```
{
  https: {
    cert: 'path/to/cert.pem',
    key: 'path/to/key.pem',
    ca: 'path/to/ca.pem'
  }
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:08:36.453

```
var flatiron = require('flatiron'),
    app = flatiron.app;

app.use(flatiron.plugins.http, {
  https: {
    cert: 'path/to/cert.pem',
    key: 'path/to/key.pem',
    ca: 'path/to/ca.pem'
  }
});

app.router.get('/', function () {
  this.res.writeHead(200, { 'Content-Type': 'text/plain' });
  this.res.end('Hello world!\n');
});

app.start(8080); 
```

# android - MapActivity 无法获取连接工厂客户端

> ID：10960252
> 
> 赞同：0
> 
> 时间：2012-06-09T10:32:49.510
> 
> 标签：android, google-maps, google-maps-mobile

我一直在谷歌上寻找很多关于这个问题的信息，但我还没有解决。地图已显示，但我位于我想要的位置并且仍然给我同样的失败：

> 06-09 12:10:57.231：I/MapActivity(1532)：处理网络更改通知：CONNECTED 06-09 12:10:57.231：W/IdleConnectionHandler(1532)：删除从未存在的连接！06-09 12:11:04.829：W/KeyCharacterMap(1532)：无法打开 keycharmap 文件 06-09 12:11:04.829：W/KeyCharacterMap(1532)：加载 keycharmap 文件时出错 06-09 12:11:04.829 ：W/KeyCharacterMap(1532)：使用默认键盘映射 06-09 12:11:57.080：I/MapActivity(1785)：处理网络更改通知：CONNECTED 06-09 12:11:57.080：E/MapActivity(1785)：Couln '不获取连接工厂客户端

而且我不明白，因为我已经按照所有步骤生成了 api 密钥，我的 Activity 从 MapActivity 扩展，并且我添加了我的 android 清单许可证和库。

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.XXX.XXX"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="10" />
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <uses-library android:name="com.google.android.maps"/>                  
            <activity
                android:name=".MainActivity"
                android:label="@string/app_name" 
                android:theme="@android:style/Theme.NoTitleBar">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>    
            <activity android:name=".Activities.Gmaps"/>                
        </application>
    </manifest> 
```

地图活动

```
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class Gmaps extends MapActivity{

    private MapView mapa = null;
    private MapController control = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gmaps);                        

        mapa = (MapView)findViewById(R.id.mapa);
        mapa.setBuiltInZoomControls(true);

        Double latitud = 40.4166909;
        Double longitud = -3.7003454;

        GeoPoint loc = new GeoPoint(latitud.intValue(), longitud.intValue());

        control = mapa.getController();            
        control.setCenter(loc);
        control.setZoom(7);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

gmaps.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapa"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0htJ1gM0WymyYYokI3eUunfuJ2-XXXXXXXXX" 
        android:clickable="true"/>

</RelativeLayout> 
```

对不起我的英语不好 ！！杰杰:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:33:03.713

使用密钥库为您的应用程序签名并使用此密钥库为您的应用程序生成一个 apk。然后将其安装在您的设备上。这将解决您的问题。您使用的地图 api 密钥必须仅使用此密钥库生成。

# iphone - 如何修复自动释放对象的内存泄漏

> ID：10960262
> 
> 赞同：1
> 
> 时间：2012-06-09T10:33:49.363
> 
> 标签：iphone, objective-c, ios, memory-leaks, xcode-instruments

我有这个泄漏〜6KB的方法：

```
+ (EInspectorFacilityInfo*) newWithNode: (CXMLNode*) node
{
  if(node == nil) { return nil; }
  return (EInspectorFacilityInfo*)[[[EInspectorFacilityInfo alloc] initWithNode: node] autorelease];
} 
```

这是一个屏幕截图，指示仪器中的内存泄漏。 ![在此处输入图像描述](../Images/5c4c506c6573afeee2b7e330e1516856.png)

我怎样才能摆脱这种内存泄漏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T10:44:24.237

该方法中包含单词“new”，因此根据[Objective-C 约定](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1)，它应该返回对对象的拥有引用，即。保留计数为 1 的对象。自动释放对象返回保留计数为 0 的对象。

您必须从方法名称中删除单词 new，或者不自动释放对象 - 在这种情况下，调用者将负责释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T18:52:00.237

除了 Jasarien 的答案之外，您应该将您的方法命名为：

```
+ (EInspectorFacilityInfo*) inspectorFacilityInfoWithNode: (CXMLNode*) node 
```

这将解决您的问题并匹配 Cocoa 编码风格和精神。

# json - 使用 json 在 SmartGWT Web 服务调用中获取响应状态码 0

> ID：10960266
> 
> 赞同：0
> 
> 时间：2012-06-09T10:34:19.340
> 
> 标签：json, web-services, smartgwt

我已经使用 SmartGWT 开发了应用程序。现在我需要使用json调用webservice到另一个部署在另一个服务器上的应用程序来提交用户名和密码。当我使用 url 和 POST 方法发出请求时，响应状态代码为 0，响应文本为空白。

这是我的代码，

```
public void sendRequest() throws Exception {

    // Get login json data to be sent to server.
    String strData = createLoginReqPacket();
    String url = "some url";
    RequestBuilder builder = new RequestBuilder(RequestBuilder.POST, url);
    builder.setHeader("Content-Type", "application/json");
    builder.setHeader("Content-Length", strData.length() + "");

    Request response = builder.sendRequest(strData, new RequestCallback() {

        @Override
        public void onResponseReceived(Request request, Response response) {

            int statusCode = response.getStatusCode();
            System.out.println("Response code ----"+response.getStatusCode()+"");

            if (statusCode == Response.SC_OK) {
                String responseBody = response.getText();
                System.out.println("Respose :" + responseBody);
                // do something with the response
            } else {
                GWT.log("Response error at server side ----",null);
                // do in case of server error
            }

        }// end of method.

        @Override
        public void onError(Request request, Throwable exception) {
            GWT.log("**** Error in service call ******",null);
        }// end of method.
    });

    builder.send();
}// end of send request. 
```

请问有人知道解决方法吗？

* * *

因为我是 GWT/SmartGwt 的新手，所以我不太关心它。

@ModeEngage 没有理由使用 GWT 类（RequestBuilder），但我不知道使用数据源。你可以提供参考或东西来做到这一点吗？

当我在 chrome 浏览器中运行它时，我在错误控制台中得到以下信息。

XMLHttpRequest 无法加载 http:// "requested Url" 。Access-Control-Allow-Origin 不允许来源 http://“localhost:8888”。

有什么解决办法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:34:30.890

我相信这是由防火墙引起的。我已经进行了一些测试，这是最可能的解释。

# cakephp - Cakephp 1.3 表单对齐？

> ID：10960268
> 
> 赞同：0
> 
> 时间：2012-06-09T10:34:37.460
> 
> 标签：cakephp, cakephp-1.3

我是 cakephp 1.3 的新手。我正在尝试在 Cakephp 1.3 中使用表单助手创建一个编辑用户表单。

我无法自定义表单元素的对齐方式，例如：

```
echo $this->Form->create('Model', array('action' => 'edit_users','id' => 'UserForm'));
echo $this->Form->input('First Name',array('style'=>'width:100px','label'=>'First Name:'));
echo $this->Form->input('Last Name',array('style'=>'width:100px','label'=>'Last Name:'));
echo $this->Form->input('Position',array('style'=>'width:100px','label'=>'Position:')); 
```

我希望前两个输入字段位于一行，第三个输入字段位于第二行。我用 div false 试过了，但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:28:04.890

div=>false 有效，但您需要添加一些 CSS

```
echo $this->Form->create('Model', array('action' => 'edit_users','id' => 'UserForm'));
echo '<div id="first">';
    echo '<div class="leftalign">';
      echo $this->Form->input('First Name',array('div'=>false,'label'=>'First Name:'));
    echo '</div>';
echo '<div class="rightalign">';
echo $this->Form->input('Last Name',array('div'=>false,'label'=>'Last Name:'));
    echo '</div>';
echo $this->Form->input('Position',array('style'=>'width:100px','label'=>'Position:')); 
```

CSS

```
#first .leftalign{
    float: left;
     width:300px;
 }
 #first .rightalign{
     clear:none;
     float: right;
     width:300px;
 }
 #first label,#first input{
  width: 100px;
 } 
```

您可以根据需要编辑css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T01:35:00.587

这个对我有用

```
<table border='0'>
     <tr><td>
            <?php echo $this->Form->create('Model', array('action' => 'edit_users','id' => 'UserForm'));
                  echo $this->Form->input('First Name',array('label'=>'First Name:'));?>
         </td><td>                     
            <?php echo $this->Form->input('Last Name',array('label'=>'Last Name:'));?></td>
     </tr>
    <tr><td>
            <?php echo $this->Form->input('Position',array('label'=>'Position:'));?>
         </td>
</table> 
```

只需将您的表单控件放在一个表格中，您就可以在表单上以任何您想要的方式对齐它们！

# windows - git，Windows 上的 SSH_ASKPASS

> ID：10960269
> 
> 赞同：3
> 
> 时间：2012-06-09T10:34:50.353
> 
> 标签：windows, git, ssh, msysgit

我正在为 基于[MSEide+MSEgui的 Linux 和 Windows](http://sourceforge.net/projects/mseide-msegui/) [(MSEgit)](http://sourceforge.net/projects/mseuniverse/)编写图形 git 前端。MSEgit 有一个内部控制台窗口，它通过管道与 git 通信。在 Linux 上，它使用 PTY，因此 SSH 要求 PTY 上的密钥解锁密码。 在 Windows 上，我编写了一个小型密码输入应用程序并相应地设置了 SSH_ASKPASS 环境变量。 如果 git 以 CreateProcess() dwCreationFlags DETACHED_PROCESS 设置启动，SSH 会调用密码应用程序，但密码输入窗口不会被聚焦，它的任务栏图标会闪烁。 如果调用 FreeConsole() 以确保没有连接到 MSEgit 的控制台并且 git 在没有 DETACHED_PROCESS 而是 CREATE_NO_WINDOW 的情况下启动，则 SSH 不会运行密码应用程序。

我假设应该调用 POSIX setsid() 的 Windows 等效项。
如何在没有 DETACHED_PROCESS 标志的情况下强制 SSH 使用 SSH_ASKPASS？
如果这是不可能的，我如何确保密码输入窗口是焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:37:34.320

在 Windows 上，除非获得许可，否则不允许子进程将焦点从父进程中移开。父级应调用[AllowSetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632668%28v=vs.85%29.aspx)来提供该权限。然后子进程可以成为前台并适当地设置其焦点。

# .net - 如何管理构建服务器上自动构建的依赖项？

> ID：10960284
> 
> 赞同：3
> 
> 时间：2012-06-09T10:37:40.967
> 
> 标签：.net, build, msbuild, continuous-integration, dependency-management

我正在尝试将持续集成实施到我们的日常工作中。在我们的团队中，我们正在从仅仅在我们的工作站上的 Visual Studio 中构建我们的代码并进行部署，到使用 MSBuild.exe 并在我们的构建服务器（即 Jenkins）上自动化而不使用 Visual Studio。

在我们的项目中，我们对引用（例如 Automap）有外部依赖关系。因为自动映射（例如）dll 不在构建服务器上，所以 msbuild 执行失败，原因很明显。还有其他 dll 我需要成为构建的一部分，我只是使用 automap 作为示例。

那么，作为自动构建的一部分，在构建服务器上获取任何依赖项的最佳方式是什么？我已经看到对使用“lib”文件夹的引用，但我真的不明白我应该把它放在哪里（在我的项目、文件系统、SVN ...？），以及构建服务器将如何到达它。我还读到 NuGet 可以对依赖项做一些事情，但是我的构建服务器没有连接到互联网，我不明白如何让我的构建拉取我可能创建的 NuGet 包，以及它是如何实现的一起工作。

**编辑：**我正在使用颠覆，我们不能使用 TeamCity，因为我们必须购买它，而且获得资金的机会为零。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T18:19:33.200

我们运行 SVN + CCNet。我们有一个用于 3rd 方库的 SVN 存储库，如下所示：

```
/foo/foo-1.2.3
/foo/foo-1.4.0
/bar/bar-1.0.0 
```

也就是说，每个库都有一个目录，每个可用版本都有子目录。

一条规则是目录必须包含原始库 - 即您解压缩并提交，不允许修改。

当您在项目中需要一个库时，您可以添加一个 lib 目录并在其中填充指向第 3 方存储库中的库的链接 (svn:externals)。这里重要的是，您不要在本地目录名称中包含版本号。如果您需要 foo-1.4.0，您的 lib 目录上的 svn:externals 链接将如下所示：

```
foo https://svn-server/3rdparty/foo/foo-1.4.0 
```

即它最终在/lib/foo 中。这样升级版本就变得容易多了，因为您所要做的就是更改 svn:externals 链接以指向新版本，并且（只要文件名没有更改）所有项目都会自动获取它并可以编译.

至于 NuGet .. 麻烦多于其价值，但意见不同 :)

希望有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T23:17:39.237

我喜欢 stmax 的解决方案，但在这一点上对你来说可能工作量太大了。

最简单的做法是**在您的存储库中创建一个 lib 目录并将所有第三方程序集添加**到该目录。 **更新您的所有项目以引用此 lib 目录中的第三方程序集**。检查所有内容。当构建服务器唤醒以进行下一次构建时，它将拉取最新更改，其中包括新的 lib 目录和项目引用更改。绿色建筑！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T11:03:43.190

您应该详细阅读 NuGet，因为它允许您设置内部包存储库，

[http://weblogs.asp.net/jgalloway/archive/2011/02/02/downloading-a-local-nuget-repository-with-powershell.aspx](http://weblogs.asp.net/jgalloway/archive/2011/02/02/downloading-a-local-nuget-repository-with-powershell.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T17:31:27.110

无论您的系统多么优雅，您的首要目标应该是运行 CI。在构建系统时，“lib 目录”选项通常是最简单的。您将二进制文件检入 Subversion。这很丑，但它可以让你开始，你的构建级别将是可重现的，这是必须的。在这工作之后，研究并选择适合您需求的外部依赖版本控制系统（可能是 Nuget）。

作为旁注，请详细检查 TeamCity 的免费部署是否不适合您。最后我检查了你必须有大量的协调项目或大量的构建代理才能需要许可证。

# php - joomla index.php 文件出现错误

> ID：10960290
> 
> 赞同：0
> 
> 时间：2012-06-09T10:39:29.000
> 
> 标签：php, joomla

我不确定其他人是否也遇到过这个问题，但我真的很努力解决这个错误，它说：

```
mark('afterLoad') : null;
// Instantiate the application.
    $app = JFactory::getApplication('site');
// Initialise the application.
    $app->initialise();
// Mark afterIntialise in the profiler.
    JDEBUG ? $_PROFILER->mark('afterInitialise') : null;
// Route the application. $app->route();
// Mark afterRoute in the profiler.
    JDEBUG ? $_PROFILER->mark('afterRoute') : null;
// Dispatch the application.
    $app->dispatch();
// Mark afterDispatch in the profiler.
    JDEBUG ? $_PROFILER->mark('afterDispatch') : null;
// Render the application.
    $app->render();
// Mark afterRender in the profiler.
    JDEBUG ? $_PROFILER->mark('afterRender') : null;
// Return the response.
    echo $app; 
```

我有 Joomla 1.7.3 并且在我的计算机的 localhost 中一切正常，但是当我上传到服务器时它得到了那个错误，为什么会出现这个错误，任何人都可以告诉我如何摆脱它？它是否必须与服务器部分的 php 版本有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:00:01.257

要记住的要点 -

1.  检查 joomla 配置文件（config.php）。

2.  检查 htaccess

3.  您正在使用的 php 版本

4.  检查服务器php版本

    检查此链接以了解技术要求——[技术要求](http://joomla.org/technical-requirements.html)

要更改 config.php 文件，我假设您的 htdocs 或 www(如果 wamp) 下有 joomla 文件夹，即 htdocs->Joomla 并且您正在访问它，就像 --`http://localhost/joomla/`

现在，当您将 joomla 文件夹上传到实时服务器时，然后在配置文件中检查这些设置-

```
public $host = 'localhost';
public $user = 'username';
public $password = '*****'; 
```

还有一些（同样的smtp）

# .htaccess - htaccess url 用搜索重写

> ID：10960296
> 
> 赞同：0
> 
> 时间：2012-06-09T10:40:34.617
> 
> 标签：.htaccess, url, rewrite

我正在尝试创建一个 .htaccess 文件，它将实现以下目标

1.  创建一个干净的网址，如 www.mydomain.com/About-Us 页面 page.php?title=About Us
2.  使用 URL 上传递的参数查询数据库，例如 www.mydomain.com/?search=abc 并将其拉到页面 index.php?search=abc

这是我到目前为止的代码

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^?search=([0-9]*)$ index.php?id=$1 ## e.g www.mydomain.com/?search=try
RewriteRule ^([A-Z]*)$ page.php?name=$1 
## www.mydomain.com/About-Us

##ErrorDocument 404 PageNotavailabale

####Protect the system from machines with worms
RewriteRule (cmd|root)\.exe - [F,E=dontlog:1]

#### To hold and redirect css/images/js files
RewriteRule images/(.+)?$ images/$1 [NC,L]
RewriteRule css/(.+)?$ css/$1 [NC,L]
RewriteRule js/(.+)?$ js/$1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:07:35.713

为什么不为您的搜索引擎使用这种网址：`www.domain.com/search/abc`？

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^search/([a-zA-Z0-9]+)$   index.php?search=$1
RewriteRule ^([a-zA-Z0-9]+)$          index.php?page=$1 
```

然后，您使用 访问您的页面`www.domain.com/<myPage>`。

和你的搜索引擎`www.domain.com/search/<mySearch>`

编辑 ：

请注意您的规则不允许使用很多参数：

*   `^?search=([0-9]*)$`只允许数字（甚至是空参数）
*   `^([A-Z]*)$`只允许大写字母（也允许空参数）

# c++ - 函数中的链接器错误

> ID：10960299
> 
> 赞同：1
> 
> 时间：2012-06-09T10:41:44.587
> 
> 标签：c++, function, linker, arguments, linker-errors

第一次在这里发帖，因为我坚持使用我美妙的 C++ 函数。

我得到的错误是链接器错误，如下所示：

> main.obj：错误 LNK2019：未解析的外部符号“public：void **thiscall controls::printText(int,int,int,int,int,char const *,struct HWND** *)”(?printText@controls@@QAEXHHHHHPBDPAUHWND__@@@ Z) 在函数“long **stdcall WndProc(struct HWND** *,unsigned int,unsigned int,long)”中引用 (?WndProc@@YGJPAUHWND__@@IIJ@Z)
> 
> C:\Users\HIDDEN\Documents\Visual Studio 2010\Projects\TimedShutdown\Debug\TimedShutdown.exe : 致命 >error LNK1120: 1 unresolved externals

基本上我正在尝试创建一个用于创建win32控件和绘制文本的类，而绘制文本的功能是我的问题所在。

代码如下：

> controls.h 文件段：-

```
void printText( int R, int G, int B, int x, int y, LPCSTR text, HWND parent); 
```

> controls.cpp 段

```
void printText(int R, int G, int B, int x, int y, LPCSTR text, HWND parent)
{
    HDC hdc;
    PAINTSTRUCT pss;
    hdc = BeginPaint(parent, &pss);
    SetBkMode(hdc, TRANSPARENT);
    SetTextColor(hdc, RGB(R,G,B));
    TextOut(hdc, 30, 20, text, strlen(text));       
    EndPaint(parent, &pss);
} 
```

> main.cpp 调用

```
controls ctrls;
ctrls->printText(255,0,0,300,50,"Test text",hWnd); 
```

我已删除呼叫，但错误仍然存​​在。最初我试图将 HDC 和 PAINTSTRUCT 也传递给该函数，但我在尝试识别错误源时已将其删除。

我完全迷路了，我不是一个了不起的 C++ 程序员，但我正在学习中。

批评我，我要求它！

提前感谢您提供的任何帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T10:50:21.127

你忘了告诉编译器里面的函数`printText`是. 因此，对于编译器，它仍然是未定义的。`controls.cpp``controls::printText`

你必须做的修改`controls.cpp`：

```
// This part is really important
// It tells the compiler which function is defined
//       |
//   vvvvvvvvvv
void controls::printText(int R, int G, int B, int x, int y, LPCSTR text, HWND parent)
{ // ... 
```

**注意**：传递给 printText 的颜色可能是 R8G8B8，即每个组件 8 位。如果我是对的，您应该使用而`unsigned char`不是`int`for`R`和。`G``B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:46:47.727

您尚未指定`controls::`定义它的函数名称。如果你不这样做，你就不能期望它表现得像控件类的成员函数。试试这个而不是你当前的声明

```
void controls::printText(int R, int G, int B, int x, int y, LPCSTR text, HWND parent)
{
    HDC hdc;
    PAINTSTRUCT pss;
    hdc = BeginPaint(parent, &pss);
    SetBkMode(hdc, TRANSPARENT);
    SetTextColor(hdc, RGB(R,G,B));
    TextOut(hdc, 30, 20, text, strlen(text));       
    EndPaint(parent, &pss);
} 
```

**编辑：**从您在问题中提供的代码中不清楚您实际上已经将 printText 作为控件的成员函数，但是您从代码中调用它的方式表明您希望它如何运行。

# c# - “私人”和“受保护的内部”有什么区别？

> ID：10960303
> 
> 赞同：14
> 
> 时间：2012-06-09T10:42:38.157
> 
> 标签：c#, .net, oop, access-modifiers

我只想知道**私有**和**受保护的内部**访问说明符之间的实际区别是什么。我所知

> ***对自己的类成员可见：***私有和受保护的内部**YES**
> 
> ***对其他类的对象可见：***两者都**没有**
> 
> ***对命名空间集合之外的其他类的对象可见：***两者都**没有**
> 
> ***对命名空间集合外的子类对象可见：***两者都**没有**

如果**private和****protected internal**做同样的事情，那么为什么我们只需要一个就足够了？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-09T10:46:43.300

*   `protected internal`成员对当前程序集中的任何代码**或**另一个程序集中的派生类中的任何代码都是可见的。用技术术语来说，它是 和 的逻辑析[**取**](http://en.wikipedia.org/wiki/Logical_disjunction)。`protected``internal`
*   成员仅对同一类中的`private`代码可见。

`protected internal`实际上是仅次于 . 的第二个最宽松的访问修饰符`public`。

* * *

值得注意的是，`protected`它可以说比*更*宽松`internal`，因为它允许从您无法控制的代码（即其他程序集）进行访问。虽然`internal`允许从当前程序集中的*所有*代码访问，但此代码是您的，您可以控制它！

换句话说，`protected`（和`protected internal`）成员是程序集公共 API 的一部分（因此应该记录在案）。`internal`成员不是。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-04-11T08:06:38.593

图形概览（简而言之）

![能见度](../Images/69d6da4b450476365fd050231403164a.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T10:46:08.590

`private`*仅对*自己的类成员可见，而对子`protected internal`类*以及*命名空间集合中的其他类可见。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-09T10:47:04.427

**私人的**

> 类型或成员只能由同一类或结构中的代码访问。

**受保护的内部**

> 同一程序集中的任何代码或另一个程序集中的任何派生类都可以访问该类型或成员

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T10:47:43.183

我认为受保护的内部意味着只有继承并位于同一程序集中的类才能看到该属性。那些派生类并且来自不同程序集的人看不到它。

LE：请阅读 Mattias Buelens 对此的评论。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T10:51:51.740

实际上，我通常只对变量使用 private 以确保它们不会被其他类滥用。

然而，受保护的内部，我经常将用于我不希望大多数其他类能够使用但我希望能够访问以编写测试用例的方法。它非常方便，因为它允许在健全的命名空间或包结构中创建测试类，然后可以访问那些受保护的内部方法，而不会不适当地将它们开放给世界其他地方。

这种方法确实需要一种编码方法，其中编写容易“可测试”的代码是优先事项。如果这不是我的方法，我不确定我会在很多场合使用受保护的内部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-25T15:33:31.777

我试图通过阅读不同论坛和博客提供的描述来了解 .NET 上下文中受保护的内部和内部之间的区别。我真的无法理解然后我使用 VS2015 创建了 2 个单独的程序集。大概现在我有了基本的了解。我想和你分享，它可能对某人有帮助。我试图使用另一个程序集中在一个程序集中声明的字段。我还尝试从另一个程序集中声明的类派生。这是来自程序集 1 的 class1.cs 的代码

```
namespace Z_Dll_1
{
    public class PublicBaseClassAssemblyOne
    {
        internal int _myinternal = 200;
        protected internal int _protectedinternal = 100;
        protected int _myProtected = 123;
        private int _myPrivate = 2;
        public int _myPublic = 45;
    }

    public class DerivedClassAssemblyOne : PublicBaseClassAssemblyOne
    {
        protected internal int intM = 10;
    }

    internal class MyInternalClass
    {
        public void MyMethod()
        {
            Console.WriteLine("Method one with internal class");
            PublicBaseClassAssemblyOne cl1 = new PublicBaseClassAssemblyOne();
            cl1._myinternal = 1000; //Internal type is available since it is in same assembly
            cl1._protectedinternal = 10; // protected internal is available
            cl1._myPublic = 2;  // Public OK
            //cl1.myPrivate = ?? // nor available since it is private

            DerivedClassAssemblyOne drOne = new DerivedClassAssemblyOne();
            drOne._myinternal = 30; // Internal and available from derived class
            drOne._myPublic = 1; // Public 
            drOne._protectedinternal = 2; // Able to be accessed from same assembly or derived class from other assembly
        }
    }
} 
```

这是来自另一个程序集的代码，class2.cs 使用 Z_Dll_1；

```
namespace Z_Dll_2
{
    public class ClassAssembly2
    {
        public ClassAssembly2()
        {
            PublicBaseClassAssemblyOne classfromOtherAssembly = new PublicBaseClassAssemblyOne();
            classfromOtherAssembly._myPublic = 0; //Only public is available
        }
    }

    public class ClassDerivedFromOtherAssemblyClass : PublicBaseClassAssemblyOne
    {
        public ClassDerivedFromOtherAssemblyClass()
        {
        }
        void ClassDerivedFromOtherAssemblyClassTestMethod()
        {
            //_myinternal = 200; // can't access since it was internal to other assembly
            _protectedinternal = 100; // this can be accessed as it is  derived class from other class that has protected internal 
            _myProtected = 123; // Ordinary protected data accessed from derived class
            //_myPrivate = 2; //Private member can't be accessed from  derived class
            _myPublic = 45; // Public can be accessed anyway

            //Try to create an instance of internal class
            //MyInternalClass intClass = new MyInternalClass(); //Not accessible from this assembly
        }
    }
} 
```

# android - EditText：自定义警报对话框中的软键盘

> ID：10960304
> 
> 赞同：0
> 
> 时间：2012-06-09T10:42:40.577
> 
> 标签：android

我已经实现了一个弹出对话框，里面有一个 EditText 元素。我无法在屏幕上显示软键盘，因为它无法填充 EditText 元素。这个问题是众所周知的，但我仍然无法让它工作。我尝试了不同的选项来解决这个问题 - 请参阅 onCreate 方法。谢谢。

```
public class MyPopup extends AbstractPlainPopup {
    protected Context _context;

    public CreatePlaylistPopup(Context context) {
        super(context);
        _context = context;
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LayoutInflater inflater = getLayoutInflater();
        View container = inflater.inflate(R.layout.popup_new_playlist, null);

        final EditText titleInput = (EditText) container.findViewById(R.id.my_text_view);
        titleInput.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (hasFocus) {
                    InputMethodManager mgr = (InputMethodManager) _context.getSystemService(Context.INPUT_METHOD_SERVICE);
                    mgr.showSoftInput(titleInput, InputMethodManager.SHOW_IMPLICIT);
                    //getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);
                    //MyPopup.this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE);

                }
            }
        });
        container.findViewById(R.id.cancelButton).setOnClickListener(
                new onCancelClick());
        container.findViewById(R.id.createButton).setOnClickListener(
                new onCreateClick());
        setContentView(container);
    }
    abstract public class AbstractPlainPopup extends AlertDialog implements Observable {

        public final static int CANCEL = 0;
        public final static int OK = 1;

        protected int _state;

        protected ArrayList<Observer> observers = new ArrayList<Observer>();

        public AbstractPlainPopup(Context context){
            super(context);
        }

    public AbstractPlainPopup(Context context, boolean cancelable, OnCancelListener cancelListener) {
        super(context, cancelable, cancelListener);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T16:33:31.543

```
 Dialog dialog = new Dialog(this, R.style.Theme_Dialog_Transparent);                           
  dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
  dialog.setContentView(R.layout.enter_details);
  dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:42:31.153

`getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);`

在 onCreate() 中使用它，而不是在焦点更改侦听器中

# sitecore - 仅复制 Sitecore 6 树结构中项目的引用

> ID：10960308
> 
> 赞同：0
> 
> 时间：2012-06-09T10:43:17.970
> 
> 标签：sitecore, sitecore6

我在 Sitecore 6 后端有一个项目，其中包含要呈现的所有渲染和数据。该项目是 Sitecore 树结构中其他项目的子项目。所以树看起来像这样：

```
Home 
  Parent Item
          My Item
  Another Parent Item
          I need a reference to My Item here 
```

有没有办法只复制项目的参考？这个想法是使用不同的 url 拥有相同的内容，但没有复制/粘贴。因为一段时间后，内容作者想更改内容，而他不想搜索副本并也更改它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:17:44.380

如果您使用的是 Sitecore 6.4 或更高版本，则可以使用克隆来完成此操作。选择要复制的项目，然后单击“配置”功能区上的“克隆”按钮。克隆显示来自原始项目的值，但也允许您在需要时在字段级别覆盖它们。

对于 Sitecore 6.3 及更早版本，您可以使用代理。这些不允许覆盖字段的选项，如果广泛使用可能会导致性能问题，并且已在 Sitecore 6.4 中被弃用。

[您可以在http://sdn.sitecore.net/upload/sitecore6/64/reusing_and_sharing_data-a4.pdf](http://sdn.sitecore.net/upload/sitecore6/64/reusing_and_sharing_data-a4.pdf)和[http://bit.ly/CloneTalk](http://bit.ly/CloneTalk)了解有关这两种技术的更多信息

# ruby - 这个案例陈述Ruby的问题

> ID：10960310
> 
> 赞同：1
> 
> 时间：2012-06-09T10:43:28.653
> 
> 标签：ruby, switch-statement

有人可以帮助我理解如何正确编写此案例语句它不起作用，作为一个 NOOB，我不知道如何解决它：

```
def hide_link?(link, mailing)
  case link
  when 'edit' &&  ['sent', 'sending', 'archived'].include?(mailing.status)
    return true
  when 'send_schedule' &&  ['sent', 'sending', 'archived'].include?(mailing.status)
    return true
  when 'archive' && ['archived'].include?(mailing.status)
    puts "I should be in here"
    return true
  else 'dashboard' && ['sending', 'draft'].include?(mailing.status)
    return true
  end
end 
```

基本上，当链接符合某些条件时，我想返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:00:17.583

我相信如果链接不符合这些标准，该方法应该返回 false。因此：

```
def hide_link?(link, mailing)
  case link
  when 'edit'
    ['sent', 'sending', 'archived'].include?(mailing.status)
  when 'send_schedule'
    ['sent', 'sending', 'archived'].include?(mailing.status)
  when 'archive'
    puts "I should be in here"
    ['archived'].include?(mailing.status)
  when 'dashboard'
    ['sending', 'draft'].include?(mailing.status)
  else
    false
  end
end 
```

构造`[...].include?(mailing.status)`有结果`true`或`false`将作为`hide_link?`方法的结果返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T10:52:31.350

删除`return`.

```
link = "fred"
case link
  when "fred"
    true
  else
    false
end 
```

`case`将返回值本身，然后将其传递给方法。

重构 megas 的版本：

```
def hide_link?(link, mailing)
  statuses_to_hide = case link
    when 'edit', 'send_schedule'
      %w{sent sending archived}
    when 'archive'
      %w{archived}
    when 'dashboard'
      %w{sending draft}
    else
      []
    end
  statuses_to_hide.include?(mailing.status)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:29:06.347

案例陈述中的条件都遵循相同的形式，这表明有机会消除一些重复，并将[政策与实施分开](https://stackoverflow.com/questions/2024135/separate-policy-from-mechanism-what-does-it-mean)。*策略*是应隐藏链接的一组条件：

```
WHEN_TO_HIDE_LINK = [
  ['edit', %w(sent sending archived)],
  ['send_schedule', %w(sent sending archived)],
  ['archive', %w(archived)],
  ['dashboard', %w(sending draft)],
] 
```

*实现*是应用策略的代码：

```
def hide_link?(link, mailing)
  WHEN_TO_HIDE_LINK.any? do |link_value, mailing_statuses|
    link_value == link && mailing_statuses.include?(mailing.status)
  end
end 
```

首屏下方的解释。

* * *

**%w**

%w 是一种无需输入所有引号和逗号即可指定字符串列表的方法。这：

```
%w(sent sending archived) 
```

相当于：

```
['sent', 'sending', 'archived'] 
```

**任何？**

[可枚举#any?](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any-3F) 将数组的每个元素传递给块（介于`do`和之间的位`end`）。如果块曾经返回*truthy*，那么结果`any?`为真；否则， 的值为`any?`假。

**数组分解**

你有没有注意到，虽然 的每个元素`WHEN_TO_HIDE_LINK`都是一个数组，但传递给的块`any?`却没有一个数组？您可能希望您必须这样做：

```
WHEN_TO_HIDE_LINK.any? do |when_to_hide|
  link_value = when_to_hide[0]
  mailing_statuses = when_to_hide[1]
  ... 
```

但是 Ruby 会为你分解数组。这是一种方法：

```
WHEN_TO_HIDE_LINK.any? do |when_to_hide|
  link_value, mailing_statuses = when_to_hide
  ... 
```

当右侧有一个数组，左侧有`=`逗号分隔的变量时，Ruby 会将数组分解为其元素，并将它们分别分配给变量。

但是 Ruby 可以让事情变得更简单：

```
WHEN_TO_HIDE_LINK.any? do |link_value, mailing_statuses|
  ... 
```

这相当于前面两个片段中的任何一个。

# android - 在android中将位图转换为jpeg

> ID：10960319
> 
> 赞同：14
> 
> 时间：2012-06-09T10:45:24.023
> 
> 标签：android, bitmap, jpeg

有没有办法将 android.graphics.Bitmap 实例转换为 android 中的 jpeg？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-09T11:01:41.267

尝试使用[压缩](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)方法，例如：

```
bitmap.compress(Bitmap.CompressFormat.JPEG, quality, outStream); 
```

* * *

这是一个示例程序：[compressing-a-bitmap-to-jpg-format-android-example](http://android.okhelp.cz/compressing-a-bitmap-to-jpg-format-android-example/)

# clojure - 语法：哈希（磅）然后符号

> ID：10960321
> 
> 赞同：3
> 
> 时间：2012-06-09T10:45:35.093
> 
> 标签：clojure, datomic

我正在关注 Datomic 示例架构，并且有一个实体的 ID 定义为

```
:db/id #db/id[:db.part/db] 
```

*#db/id*是什么意思？模式加载了读取字符串，所以我猜它是有效的 Clojure 语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T15:16:52.170

这是 Clojure 1.4 中的一个新特性：[阅读器文字](https://github.com/clojure/clojure/blob/master/changes.md#21-reader-literals)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:42:58.867

Jouni 是对的，它是[读者的文字](https://github.com/clojure/clojure/blob/master/changes.md#21-reader-literals)。

更具体地说，阅读器文字**#db/id[:db.part/db]**将在**:db.part/db**分区内创建一个临时实体 ID。

这个临时 id 可以在构建事务时使用。如果事务成功应用于数据库（即“事务”），则临时 id 将替换为数据库中的永久实体 id。

这个特定阅读器文字的一般形式是**#db/id[partition-name value*]**，其中 value 是一个可选的负值，它允许在单个事务中唯一且确定地区分临时 id。

这是一个很大的方便，例如。**#db/id[:db.part/user -300]**可以在特定事务中的多个位置使用，以引用同一个尚未创建的实体。

# c - 防止本地指针

> ID：10960326
> 
> 赞同：5
> 
> 时间：2012-06-09T10:46:06.593
> 
> 标签：c, pointers, compiler-warnings

也许这是一个新手问题，但是 C/C++ 中是否有一种方法可以防止函数接受指向局部变量的指针？

考虑这段代码：

```
int* fun(void)
{
 int a;
 return &a;
} 
```

编译器将生成一个无法返回指针的警告。现在考虑一下：

```
int* g;

void save(int* a)
{
 g = a;
}

void bad(void)
{
 int a;
 save(&a);
} 
```

这将在没有警告的情况下通过编译器，这很糟糕。是否有属性或东西可以防止这种情况发生？即类似的东西：

```
void save(int __this_pointer_must_not_be_local__ * a)
{
 g = a;
} 
```

如果有人知道答案，请提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:41:42.377

至少有一种使用调试堆调试构建的方法（默认）：

```
//d:\Program Files\Microsoft Visual Studio ?\VC\crt\src\dbgint.h
\#define nNoMansLandSize 4
typedef struct _CrtMemBlockHeader
{
    struct _CrtMemBlockHeader * pBlockHeaderNext;
    struct _CrtMemBlockHeader * pBlockHeaderPrev;
    char *                      szFileName;
    int                         nLine;
    size_t                      nDataSize;
    int                         nBlockUse;
    long                        lRequest;
    unsigned char               gap[nNoMansLandSize];
    /* followed by:
     *  unsigned char           data[nDataSize];
     *  unsigned char           anotherGap[nNoMansLandSize];
     */
} _CrtMemBlockHeader;
\#define pbData(pblock) ((unsigned char *)((_CrtMemBlockHeader *)pblock + 1)) 
```

有一个分配标头，以间隙结尾，因此指针之前出现 0xFDFDFDFD 的可能性不大 - 不完美，但可能会有所帮助......

```
if (\*((int\*)pointer-1) == 0xFDFDFD) { // stack pointer } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:54:07.810

不，没有可靠且可移植的方法来区分指向本地的指针和指向堆对象的指针。也没有办法以声明方式阻止这种情况。

有一些依赖于特定系统的内存布局的技巧，它们在运行时通过调用未指定的行为来工作（请参阅[此答案](https://stackoverflow.com/a/2054756/335858)以获取示例），但是如果您决定尝试它们，您就得靠自己了。

# android - 将全局广播接收器迁移到 LocalBroadcastManager

> ID：10960337
> 
> 赞同：1
> 
> 时间：2012-06-09T10:47:09.700
> 
> 标签：android

我正在`BroadcastReceiver`将 Manifest 中定义的一些 s 迁移到`LocalBroadcastManager`.

这些`BroadcastReceiver`s 不需要从其他应用程序调用。它们通过`sendBroadcast()`从`Activity`s 调用以响应 UI 操作，或者从执行 HTTP 请求并在`Intent`.

我最近才发现`LocalBroadcastManager`并想优化我的代码。我没有做任何基准测试（我不确定如何做）。值得做还是过早的优化？s 被调用以响应用户操作，`BroadcastReceiver`因此迁移可能不值得。

应该在哪里`registerReceiver`注册？是`Application`正确的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T14:44:20.413

> registerReceiver注册应该在哪里完成？

它们应该由负责其工作的任何组件注册。

主要`LocalBroadcastManager`用于组件间通信。典型的例子是`IntentService`发送本地广播`Intent`，让任何感兴趣的活动知道发生了一些变化……当且仅当前台有这样的活动。在这种情况下，活动将在 中注册接收者`onResume()`并在 中取消注册该接收者`onPause()`。

因此，让我们看一下您的两个简单描述的“用例”：

> 来自 Activity 以响应 UI 操作

删除`sendBroadcast()`. 删除`BroadcastReceiver`. 只需在这里完成工作，或者 fork an`AsyncTask`来完成工作，或者`IntentService`通过`startService()`.

> from a utility class that executes HTTP requests and delivers the responses in the Intent.

Either this "utility class" is being use by an activity (via an `AsyncTask`), an `IntentService`, or neither.

If the utility class is being used by an `AsyncTask` from an activity, dump the `sendBroadcast()`, dump the `BroadcastReceiver`, and simply do the work in the `AsyncTask` and/or activity.

If the utility class is being used by an `IntentService`, and you are trying to update the UI based upon that work, that's the pattern I outlined in my second paragraph of my answer.

# android - Android Eclipse 使用外部工具在代码上运行脚本

> ID：10960339
> 
> 赞同：4
> 
> 时间：2012-06-09T10:47:32.793
> 
> 标签：android, regex, eclipse, perl

我发现我的许多未解决问题的解决方案是在代码上运行一个 perl 脚本来执行一些使用正则表达式很难甚至不可能完成的更改，或者比我得到的一些建议更简单地连接到 DaVik。

因此，如果我**一步一步**地告诉你我是如何做到的，这将是一个**自我回答的问题**。我希望这将帮助人们解决他们的一些问题。

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:27:27.827

目标是在 Eclipse 中对我当前打开的文件运行以下命令行并刷新它以查看结果：

perl -S -pi.bak myscript.pl

我将使用外部工具配置。本指南基于 Eclipse 3.7.1

1.  打开**运行**->**外部工具**->**外部工具配置 ...** （或者，您可以从运行图标中打开它，角上有红色的小工具箱）
2.  选择**程序**
3.  添加**新的启动配置**（右上角带有小加号的第一个图标或右键单击 Program -> **New**）
4.  你应该看到这个： ![外部工具配置对话框](../Images/4b49de99c00525ff539a9202397f96dd.png)
5.  填写**姓名**
6.  在该位置放置您要启动的工具的路径（在本例中为 perl：**C:\Perl\bin\perl.exe**）
7.  在工作目录中选择**Variables...**，**${container_loc}**是当前在 IDE 上的文件的目录
8.  作为参数：**-S -pi.bak ${file_prompt:Select Perl Script:D:\marcelo\Perl\bin\myscript.pl} ${container_name}**
    同样你不必输入 ${container_name} 或 ${ file_prompt...} 你可以从变量中选择它...
9.  按**应用**
    你现在应该看到这个： ![在此处输入图像描述](../Images/49a6ae594223e645f889578a109daeb4.png)
10.  转到**刷新**选项卡并检查**完成后刷新资源**并从选项**中选择所选资源**
11.  转到“**构建**”选项卡并取消选中“**启动前构建”**

我们完成了，现在有几个注释：

*   在**常用**选项卡中，您可以检查**添加到收藏夹菜单**下的**外部工具**，您的脚本将出现在外部工具子菜单中，而无需先运行它。
***   您可能注意到还有很多其他选项，请随意尝试*   这个例子只是修改了 IDE 中的文件。myscript.pl 的内容是：**

 **> > 下一个除非/Log.i/；
> > s/\bint\s+(\w+)/int n_$1/g;
> > s/\bString\s+(\w+)/字符串 s_$1/g;

*   ${ file_prompt **:Select Perl Script:D:\marcelo\Perl\bin\myscript.pl}**打开一个对话框，您可以在其中选择要运行的 perl 脚本。
*   如果您想始终运行相同的脚本，只需将**${file_prompt...}**替换为脚本名称
*   我在 Eclipse 上安装了**EPIC 插件**，所以我也可以编辑 perl 文件

*   您不受限制修改您的资源。您可以只运行从当前文件生成输出的脚本。脚本的输出以及遇到的任何错误都会显示在**控制台**
    中提示：在 perl 中，如果您既想写出新文件，又想为用户打印一条消息，请使用 STDERR 打印出消息并使用 STDOUT 到打印出文件。****

# php - 使用变量获取属性 SimpleXML

> ID：10960343
> 
> 赞同：-1
> 
> 时间：2012-06-09T10:48:00.933
> 
> 标签：php, xml, variables, simplexml

我想从一个特定的 CollageObjectInfo 元素中获取 PositionX 属性的值，并且我有一个变量，其中包含我要选择的元素的编号。

我想要实现的是这样的（当然这段代码不起作用）：

```
$xml = simplexml_load_file("vars.xml");
$number = 140;
$positionx = $xml->CollageObjects->CollageObjectInfo[$number]->attributes()->PositionX; 
```

参考来源：

```
<?xml version="1.0" encoding="utf-8"?>
<CollageInfo xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" BgType="image" BgImagePath="http://localhost:8080/images/dreamboard/backgrounds/pattern2.jpg" BgColor="0" CanvasWidth="960" CanvasHeight="730" AutoSaveTime="50000" SelectedMemberDreamId="00000000-0000-0000-0000-000000000000">
  <CollageObjects>
    <CollageObjectInfo xsi:type="CollageImageInfo" 
                       MemberDreamId="a5d55cc1-8eb2-4e28-9ad9-4b9ea250926d" 
                       PositionX="670" PositionY="50" Rotation="0" 
                       ScaleX="0.5" ScaleY="0.5" Alpha="1" DropShadow="true"
                       Coords="670,77,887.5,77,887.5,337,670,337" 
                       Type="image" 
                       DreamboardImageId="00000000-0000-0000-0000-000000000000"
                       ImagePath="http://cubicflow.com/dan/dia/images/dream-1.jpg" 
                       Caption="I am flying without taking my shoes off." />
    <CollageObjectInfo xsi:type="CollageImageInfo" 
                       MemberDreamId="2f7a6c1b-6006-4a5d-b9d8-b653ee7ea4ca" PositionX="82" PositionY="323" Rotation="-40" ScaleX="0.5" ScaleY="0.5" Alpha="1" DropShadow="true" Coords="2,400,219.5,400,219.5,710,2,710" Type="image" DreamboardImageId="00000000-0000-0000-0000-000000000000" ImagePath="http://cubicflow.com/dan/dia/images/dream-2.jpg" Caption="I am continuing to improve physical conditioning." />
    <CollageObjectInfo xsi:type="CollageImageInfo" 
                       MemberDreamId="7230bb7a-58a6-49d3-bfc7-ed7e4486da85" PositionX="150" PositionY="404" Rotation="0" ScaleX="0.46" ScaleY="0.44" Alpha="1" DropShadow="true" Coords="680.75,381.25,880.85,381.25,880.85,736.75,680.75,736.75" Type="text" DreamboardImageId="00000000-0000-0000-0000-000000000000" ImagePath="" Caption="Lorem ipsum dolor yeeeeeeeahhhhssssss sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua." />
  </CollageObjects>
</CollageInfo> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-13T15:43:36.743

您可以尝试使用 XPath。

就像是

```
$attr = $xml->xpath('CollageObjects/CollageObjectInfo['.$number.']/@PositionX'); 
```

[xpath()](http://php.net/manual/en/simplexmlelement.xpath.php)总是返回一个数组（如果出错则返回 FALSE），所以你可以做类似的事情

```
$neededAttr = (string)$attr[0]; 
```

（当然是在你检查错误之后）

这是一个[例子](http://codepad.org/5YwmL1s9)

* * *

另一种可能的解决方案是：

```
$children = $x->CollageObjects->children();
echo $children[$number]->attributes()->PositionX; 
```

或者如果你使用 PHP >= 5.4

```
echo $x->CollageObjects->children()[$number]->attributes()->PositionX 
```

（我没有安装 php 5.4，所以我不能保证代码可以正常工作，但我认为没有理由不这样做）。

[PHP 5.4 数组解引用](http://php.net/manual/en/language.types.array.php#example-87)

**注意：**`$number` XPath 从 1 开始计数，而 PHP 从 0 开始计数，在使用as 索引时要考虑到这一点。

祝你好运 ：）

# performance - 如何评估 Java EE 应用程序的性能？

> ID：10960345
> 
> 赞同：0
> 
> 时间：2012-06-09T10:48:04.653
> 
> 标签：performance, spring, jsp, jakarta-ee, struts2

可以有多种方法来完成一项任务（例如：在 jsp、JSTL 或 scriplets 上查看某些内容，可以使用其他一些类或我们自己的自定义标签库）。

但是 JSP 页面运行的速度、性能、内存使用可能会有所不同。我相信，如果可以计算或评估性能、速度、时间使用（调用 JSP 页面或 servlet 时），则可以在其他方式中选择最佳方式。我希望为 Java EE 应用程序（jsp servelts、struts、spring、ejb、..）提供一个解决方案。（不看服务器性能）

所以任何人都让我知道，如果可能的话，这是一种找到这些的方法。任何教程，欢迎链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T05:22:38.507

要检查整个应用程序运行的性能，您可以随时使用分析器。您可以使用jdk 安装附带的**JVisualVM**，也可以使用市场上可用的任何第三方分析器，如**JProfiler**和**YourKit**。其中YourKit有非常好的功能。但是 JProfiler 和 YourKit 都是付费版本。

如果您需要检查在 Spring 应用程序中执行特定代码的性能，那么您可以使用Spring utils 包中提供的**StopWatch类。**它以非常好的格式化方式为您提供输出。它为您提供了一段代码执行所用的时间。[这](http://www.wikijava.org/wiki/Spring_Timer)是一个相同的例子。

希望这对您有所帮助。干杯。

# android - 如何知道是否有任何应用程序正在访问 android 中的内部文件

> ID：10960346
> 
> 赞同：-1
> 
> 时间：2012-06-09T10:48:08.440
> 
> 标签：android, file

有没有办法找出或存储哪个应用程序正在访问内部文件？

我想开发一个 android 应用程序，它将存储有关将访问内部文件的所有应用程序的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:22:26.390

> 有什么方法可以找出或存储哪个应用程序正在访问内部文件？

幸运的是没有，除了可能在根设备上。你无权知道其他应用程序在内部存储方面做了什么，就像他们有权知道你在内部存储方面做了什么一样。

# coding-style - 有人考虑按字母顺序排列公共班级成员吗？

> ID：10960355
> 
> 赞同：0
> 
> 时间：2012-06-09T10:50:00.190
> 
> 标签：coding-style, standards

考虑到 API 文档通常按字母顺序排列，也许按字母顺序排列公共类成员是有意义的，它们的专有私有成员依赖项散布在每个公共方法之间。和一般私人成员按字母顺序或上下文分开排列。

并没有真正考虑遵守这一点，但很好奇是否有人这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:12:17.787

我个人按功能组织我的公共方法，但在我脑海中最流行的一个（有点）遵循字母结构的开源库是 CodeIgniter。

例如，他们的[CI_Javascript](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Javascript.php)类按功能（事件、效果）对方法进行分组，并且每个组都按字母顺序组织。但有时它们似乎确实打破了字母规则，这违背了目的。

# c# - 如何在 Windows8 应用程序中向 HttpWebRequest 添加标头？

> ID：10960358
> 
> 赞同：5
> 
> 时间：2012-06-09T10:50:22.987
> 
> 标签：c#, windows-8, windows-runtime, httpwebrequest, microsoft-metro

我正在开发 C#\XAML metro-ui 应用程序。我想调用一些服务并为此使用`HttpWebRequest`。以前实现`HttpWebRequest`包含`ContentLength`和`UserAgent`属性。但是 WinRT 的实现没有它。我尝试使用这篇[文章](https://stackoverflow.com/a/7456544/182344)中描述的方法。它适用于`UserAgent`但不适用于`ContentLength`. 我试过设置`Headers`

```
request.Headers["Content-length"] = Length;
request.Headers["User-agent"] = UserAgent; 
```

但收到异常“必须使用适当的属性或方法修改'Content-length'标头。”

Hot 是否可以在 WinRT`Headers`中实现？`HttpWebRequest`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T17:11:39.053

`HttpWebRequest`在 WinRT 下处于半弃用状态。以前可以在较早的 .NET 平台上修改的某些标头值不再无法使用它进行修改。

这似乎[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28VS.110%29.aspx)是 HttpWebRequest 的新改进替代品，具有简单的 API 和完整的异步支持。

由于您要指定 Content-Length，我假设您正在尝试向服务器发布或放置某些内容。在这种情况下，您需要酌情使用 PostAsync() 或 PutAsync()。

```
 var req = new HttpClient();
    req.DefaultRequestHeaders.Add("User-agent", UserAgent);
    req.DefaultRequestHeaders.Add("Content-length", Length);
    return await req.PostAsync(RequestURL, Body); 
```

您可能实际上不需要指定 Content-length 标头，因为这些方法会根据 Body 的实际长度自动包含它，但是您可以尝试任何一种方式。

# sitemap - 创建 Google 搜索结果中显示的类似 Facebook 的站点地图

> ID：10960360
> 
> 赞同：3
> 
> 时间：2012-06-09T10:50:53.410
> 
> 标签：sitemap

你如何为 ASP.NET MVC 网站创建一个站点地图，它可以出现在任何搜索引擎上，比如谷歌搜索上的 facebook 搜索结果？

![google 上的 facebook 搜索结果](../Images/a3224b152854fddeee3ae223dd6d630c.png)

我已经创建了一个提交给 Google 的 xml 站点地图，但是当我搜索我的站点时，它只显示基本结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T10:52:24.533

这些链接称为站点链接。您不能“创建”它们本身，谷歌决定何时以及显示哪些链接。但是，您可以帮助 Google 确定哪些链接最相关。

> 只有当我们认为附加链接对用户有用时，我们才会显示这些附加链接。如果您网站的结构不允许我们的算法找到好的附加链接，或者我们认为您网站的附加链接与用户的查询不相关，我们将不会显示它们。

阅读Google Webmster 工具上的[附加链接。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=47334)

# mysql - Django Annotate Count with MySQL 在 Left Outer Join 上创建 Count 结果错误

> ID：10960362
> 
> 赞同：0
> 
> 时间：2012-06-09T10:51:00.327
> 
> 标签：mysql, sql, django, annotations, count

在使用 MyISAM 在 MySQL 上运行的 Django 中，我在查询集上的 Count 注释返回不正确的结果。我查看了 SQL 语句，无法确定是 MySQL 还是我的 Django 代码有问题。

Django模型：

```
class Resource(models.Model):
    ...
    voters = models.ManyToManyField(User, related_name="resources") 
```

代码：

```
resources = Resource.objects.filter(
    ...
).annotate(
    votes=models.Count('voters')
).order_by('-votes')
print resources.query 
```

打印的 SQL：大意是

```
SELECT
...,
COUNT(`app_resource_voters`.`user_id`) AS `votes`
FROM `app_resource`
...
LEFT OUTER JOIN `app_resource_voters`
ON `app_resource`.`id` = `app_resource_voters`.`resource_id`
... 
```

在 phpMyAdmin 中测试查询返回错误的投票值。它实际上返回投票者的数量乘以 ForeignKey 关联到资源上存在的其他属性的数量（非常混乱）。Django 和 SQL 看起来是否正确，这是否意味着这是 MySQL 的问题？你会推荐换成 MyISAM 以外的东西还是换成 PostgreSQL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:34:54.817

您可以使用另外两种解决方法。

第一个比较简单，但效率较低：在`Resource`模型上创建方法或属性。

```
class Resource(models.Model):
    ...

    @property    # or @django.utils.functional.cached_property
    def votes(self):
        return self.voters.count() 
```

第二个是使用[`extra()`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#extra)：

```
resources = Resource.objects.filter(
    ...
).extra(
    select={
        'votes': 'SELECT COUNT(*) FROM app_resource_voters WHERE app_resource.id = app_resource_voters.resource_id'
    },
).order_by('-votes') 
```

# jpa - JPA - 仅对给定查询强制延迟加载

> ID：10960363
> 
> 赞同：6
> 
> 时间：2012-06-09T10:51:03.457
> 
> 标签：jpa

我如何为给定的 NamedQuery 强制执行延迟加载策略。

例如。考虑下面的伪代码（只是为了解释案例）我有一个实体

```
@Entity
class Xyz {
 int a;
 int b;

@Fetch = EAGER
 Set<ABC> listOfItems;
} 
```

在这种情况下，我们已经声明 listOfItems 是 EAGERLY 获取的。

现在假设，我有一个`NamedQuery (query="getXyz" , name="select x from Xyz x where a=?")` 对于这个查询，我只需要懒惰的结果，即我不希望检索 listOfItems。

我可以通过哪些方式实现它们？ps：1.我不想在实体类中将 listOfItems 更改为 Lazy 2.我不想在查询中选择特定字段，例如`name="select a,b from Xyz z where a = ? "`

提前感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:23:27.157

如果您不想`Set`急切地获取，则必须将其定义为惰性。但是请注意，当您指定惰性时，允许实现急切地获取。

引用规范：

> 公共枚举 FetchType 扩展了 java.lang.Enum
> 
> 定义从数据库中获取数据的策略。EAGER 策略是对持久性提供程序运行时的要求，即必须急切地获取数据。LAZY 策略是对持久性提供程序运行时的提示，即在首次访问数据时应该延迟获取数据。允许该实现急切地获取已指定 LAZY 策略提示的数据。

但是，如果您不想获取这样的内容，`Set`我会创建一个小类来满足您的需求：

```
@Entity
@Table(name = "XYZ")
public class XyzStub
{
    int a;
    int b;
} 
```

您可以使用 TypedQuery 进行查询：

```
EntityManager em;
//....
TypedQuery<XyzStub> q = em.createNamedQuery("select x from XyzStub x where x.a = :a", XyzStub.class)
q.setParameter("a", a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:55:50.477

如果您使用的是 EclipseLink，则可以使用获取组，

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup](http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup)

# php - PHPExcel读取太慢

> ID：10960364
> 
> 赞同：3
> 
> 时间：2012-06-09T10:51:08.807
> 
> 标签：php, performance, phpexcel

我知道，这里有很多关于提高`PHPExcel`性能的问题。但是所有这些都是关于*写入*数据的，而我的问题在于*阅读*。

我的功能：

```
function parse($filename){
    $objPHPExcel = PHPExcel_IOFactory::load($filename); 
    $activeSheet = $objPHPExcel->getActiveSheet();
    $parsedData = array();
    $columnHeaders = array('order', 'ts', 'summ', 'name', 'quant', 'price', 'bccu');
    foreach ($activeSheet->getRowIterator() as $rkey => $row) {
        $cellIterator = $row->getCellIterator();
        foreach ($cellIterator  as $ckey => $cell) {
            $parsedData[$columnHeaders[$ckey]] = $cell->getCalculatedValue();
        }
    }
    return $parsedData;
} 
```

该文件包含约 300 行和 7 列。这个脚本在 30 秒内无法运行。

我该如何改进它？

**编辑：**

用过的

```
$objReader = PHPExcel_IOFactory::createReader("Excel2007");
$objPHPExcel = $objReader->load($filename); 
```

没有成功

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:29:43.033

如果您的列已经定义，那么删除列迭代器呢？

尝试这样的事情：

```
foreach ($activeSheet->getRowIterator() as $rkey => $row) {
    $rowIndex = $row->getRowIndex ();
    $parsedData[$rowIndex]['order'] = $activeSheet->getCell('A' . $rowIndex);
    $parsedData[$rowIndex]['ts']    = $activeSheet->getCell('B' . $rowIndex);
    $parsedData[$rowIndex]['summ']  = $activeSheet->getCell('C' . $rowIndex);
    .
    .
    .
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T10:57:04.030

在运行 parse() 之前尝试通过发出`gc_disable()`. 猜测这里的迭代级别没有被 PHP 正确优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T09:16:10.530

如果您不打算更改文件的内容；将阅读器设置为只读可提高约 10 倍。

例如：

```
$objReader = PHPExcel_IOFactory::createReader( 'Excel5' );
$objReader->setReadDataOnly( true ); 
```

# objective-c - 只选择一个单元格 UITableView

> ID：10960366
> 
> 赞同：2
> 
> 时间：2012-06-09T10:51:22.640
> 
> 标签：objective-c, xcode

我有一个包含许多单元格的表格视图。当我按下一个时，它旁边会出现一个勾号，但是当我选择另一个时，前一个上的勾号仍然存在，并且在当前单元格上添加了一个新的勾号。所以勾选了两个单元格，但一次只能勾选一个！

我试过这个，但它不起作用：

```
if (cell.selected = YES) {

[cell setSelected:NO animated:YES];
[cell setAccessoryType:UITableViewCellAccessoryNone];

}else if(cell.selected = NO){

    [cell setSelected: YES animated:YES];
    [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:07:30.350

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

int newRow = [indexPath row];
int oldRow = [lastIndexPath row];

if (newRow != oldRow)
{
        UITableViewCell *newCell = [tableView cellForRowAtIndexPath:
                                                                indexPath];
        newCell.accessoryType = UITableViewCellAccessoryCheckmark;

        UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:
                                                                lastIndexPath];
        oldCell.accessoryType = UITableViewCellAccessoryNone;

        lastIndexPath = indexPath;
}

[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

或者

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-02T14:47:34.360

替代：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    for (int i = 0; i<yourArray.count;i++)
    {
        if(i!=[indexPath row])
        {
            cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
            cell.accessoryType = UITableViewCellAccessoryNone;
        }
    }
    cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
} 
```

这实际上会遍历所有行并禁用它们。有点蛮力，但它有效。如果您想要一个不允许取消选择的版本，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    for (int i = 0; i<yourArray.count;i++)
    {
        cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    cell = [tableView cellForRowAtIndexPath:indexPath];

    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-06T17:28:00.457

Swift 中的快速修复：

```
 var lastIndexPath:NSIndexPath = NSIndexPath(forRow: 0, inSection: 0)
override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {
    let newRow = indexPath.row
    let oldRow = lastIndexPath.row

    if oldRow != newRow {
        tableView.cellForRowAtIndexPath(indexPath)?.accessoryType = .Checkmark
        tableView.cellForRowAtIndexPath(lastIndexPath)?.accessoryType = .None

        lastIndexPath = indexPath
    }

    tableView.deselectRowAtIndexPath(indexPath, animated: true)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T11:04:08.553

在 tableviewdatasource 你需要遵循这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil )
    {
        cell =[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }
    if ([indexPath compare:self.lastIndexPath] == NSOrderedSame) 
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } 
    else 
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    return cell;
}

// UITableView Delegate Method
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.lastIndexPath = indexPath;

    [tableView reloadData];
} 
```

lastindex 是 property(retain) NSIndexPath* lastIndexPath;

# objective-c - 设置（Objective C？）基于 Mac 的 Web 服务所需的建议

> ID：10960368
> 
> 赞同：0
> 
> 时间：2012-06-09T10:51:34.987
> 
> 标签：objective-c, web-services, apache, amazon-simpledb

多年来，我开发了许多 iOS 应用程序，因此对 Objective C 相当了解。

我想构建我的第一个 Web 服务来卸载一些处理器最密集的功能。

我倾向于使用我的 Mac 作为 Apache 附带的服务器。我已经配置了它，它似乎可以正常工作（我可以输入 Mac 的 IP 地址并收到确认）。

现在我正在尝试决定如何构建服务器端 Web 服务，这对我来说是全新的。如果可能的话，我想利用我的 Objective C 知识。我想我正在寻找一个与 Objective C 兼容的 Web 服务引擎以及一些如何将其连接到浏览器和移动界面的示例。我倾向于使用亚马逊的 SimpleDB 作为数据库。

顺便说一句：我看到 Apple 有 Lion Server，但如果这是一个选项，我无法确定。

任何想法/建议表示赞赏。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:25:06.400

有一些用 ObjC 编写的简单 Web 服务器示例，例如[this](http://macdevcenter.com/pub/a/mac/2006/11/14/how-to-write-a-cocoa-web-server.html)和[this](http://cocoawithlove.com/2009/07/simple-extensible-http-server-in-cocoa.html)。

也就是说，如果您不介意使用其他技术，可能会有“更好”的方法来做到这一点。这是一个偏好问题；但我使用 Python、MySQL 和优秀的[web.py](http://webpy.org/)框架来处理这些类型的后端。

例如，这里是一个使用所描述的技术组合的示例 Web 服务（省略了一些冗余......）。我只是在我的服务器上运行它，它负责 url 重定向并从数据库提供 JSON。

```
import web
import json
import MySQLdb

urls = (
    "/equip/gruppo", "gruppo",  # GET = get all gruppos, # POST = save gruppo
    "/equip/frame", "frame"
)

class StatusCode:
    (Success,SuccessNoRows,FailConnect,FailQuery,FailMissingParam,FailOther) = range(6);

#   top-level class that handles db interaction
class APIObject:
    def __init__(self):
        self.object_dict = {}       # top-level dictionary to be turned into JSON
        self.rows = []
        self.cursor = ""
        self.conn = ""

    def dbConnect(self):
        try:
            self.conn = MySQLdb.connect( host = 'localhost', user = 'my_api_user', passwd = 'api_user_pw', db = 'my_db')
            self.cursor = self.conn.cursor(MySQLdb.cursors.DictCursor)
        except:
            self.object_dict['api_status'] = StatusCode.FailConnect
            return False
        else:
            return True

    def queryExecute(self,query):
        try:
            self.cursor.execute(query)
            self.rows = self.cursor.fetchall()
        except:
            self.object_dict['api_status'] = StatusCode.FailQuery
            return False
        else:
            return True

class gruppo(APIObject):
    def GET(self):
        web.header('Content-Type', 'application/json')
        if self.dbConnect() == False:
            return json.dumps(self.object_dict,sort_keys=True, indent=4)
        else:
            if self.queryExecute("SELECT * FROM gruppos") == False:
                return json.dumps(self.object_dict,sort_keys=True, indent=4)
            else:
                self.object_dict['api_status'] =  StatusCode.SuccessNoRows if self.rows.count == 0 else StatusCode.Success

                data_list = []
                for row in self.rows:
                    # create a dictionary with the required elements
                    d = {}
                    d['id'] = row['id']
                    d['maker'] = row['maker_name']
                    d['type'] = row['type_name']
                    # append to the object list
                    data_list.append(d)
                self.object_dict['data'] = data_list
                # return to the client
                return json.dumps(self.object_dict,sort_keys=True, indent=4) 
```

# xcode - Xcode：滚动视图和图像数组

> ID：10960370
> 
> 赞同：0
> 
> 时间：2012-06-09T10:52:02.753
> 
> 标签：xcode, arrays, image, scrollview

我有一个带有滚动视图中显示的图像的数组。它在模拟器上完美运行，但是当我在实际设备（第一代 iPad）上运行它时，它崩溃了。起初我将图像质量降低到最低（每个<120kb），但这并没有解决我的问题。然后我将图像数量从 13 减少到 6 并且它起作用了。有没有你能想到的工作？以下是我使用的代码：

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view.
images = [NSArray arrayWithObjects:[UIImage imageNamed:@"back1.jpg"], [UIImage imageNamed:@"back2.jpg"], [UIImage imageNamed:@"back3.jpg"], [UIImage imageNamed:@"back4.jpg"], [UIImage imageNamed:@"back5.jpg"], [UIImage imageNamed:@"back6.jpg"], [UIImage imageNamed:@"back7.jpg"], [UIImage imageNamed:@"back8.jpg"],[UIImage imageNamed:@"back9.jpg"],[UIImage imageNamed:@"back10.jpg"],[UIImage imageNamed:@"back11.jpg"],[UIImage imageNamed:@"back12.jpg"],[UIImage imageNamed:@"back13.jpg"], nil]; 

pageControl.numberOfPages=images.count;

for (int i = 0; i < images.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    subview = [[UIImageView alloc] initWithFrame:frame];
    subview.contentMode = UIViewContentModeScaleAspectFit;
    subview.image = [images objectAtIndex:i]; //problima sthn eikona 
    [self.scrollView addSubview:subview];
}
pageControlBeingUsed = NO;
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height);} 
```

# java - 不等待就无法创建多个mongodb集合

> ID：10960373
> 
> 赞同：0
> 
> 时间：2012-06-09T10:52:33.090
> 
> 标签：java, mongodb, mongodb-java

如果我使用此代码：

```
private static void createDBAndCollections()
{
    Mongo mongo = new Mongo();
    DB db = mongo.getDB("dbname");

    BasicDBObject doc = new BasicDBObect();
    doc.put("somename","somevalue");

    ArrayList<String> collectionNames = new ArrayList<String>();
    collectionNames.add("userprofiles");
    collectionNames.add("companies");

    for(String collectionName : collectionNames)
    {
          DBCollection collection = db.getCollection(collectionName);
          collection.insert(doc);
    }
 } 
```

运行前 #1：数据库不存在 即使它存在，它也会使用 db.dropDatabase() 从控制台中删除

运行 #1 后：

*   我只看到一个集合而不是两个集合
*   “UserProfile”集合被创建并且其中有一个对象
*   未创建“公司”集合

运行#2之后：

*   我现在看到了这两个系列
*   “UserProfile”现在有两个对象
*   "companies" 集合被创建并且其中有一个对象

我觉得很奇怪

所以我改变了我的 for 循环，包括等待 10 秒

```
for(String collectionName : collectionNames)
{
    DBCollection collection = db.getCollection(collectionName);
    collection.insert(doc);

    //wait for 10 seconds ... do not really know why ... but it works
    Thread.sleep(10 * 1000); //not showing try .. catch .. throw etc for this
 } 
```

我清理了我的数据库并运行了这段代码，每次它成功地创建了两个集合（需要时间......但可以完成工作）

我错过了什么吗？我应该等待的地方是否正在进行异步操作？

我知道一个更好的技巧是不要创建下一个集合......直到第一个集合的存在被确认

此代码不会一直运行...仅当我的应用程序第一次初始化时...它必须创建默认数据库并设置一堆集合

谢谢

注意：提问时如何插入换行符...

MongoDB 版本：2.0.6 windows 64 位（当前生产版本） Java 驱动程序：2.7.3

# coffeescript - CoffeeScript：在函数调用中展开数组

> ID：10960374
> 
> 赞同：9
> 
> 时间：2012-06-09T10:52:33.957
> 
> 标签：coffeescript, splat

在 Ruby 中，我可以调用使用数组元素作为位置参数的方法，如下所示

```
method(fixed_arg1, fixed_arg2, *array_of_additional_args) 
```

这里的“*”运算符将数组展开到位。

我正在尝试在 CoffeeScript 中做同样的事情，但还没有找到方法。具体来说，我想在调用 jQuery 函数时传递其他参数

```
$('#my-element').toggle(true, *config.toggleOptions) 
```

显然，上面的语法不起作用，我正在寻找一种方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T11:14:49.453

尝试

```
$('#my-element').toggle(true, config.toggleOptions...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T07:54:38.177

你需要[喷](http://coffeescript.org/#splats)它。

```
fun(1,2,3,4,5)

fun = (first, second, rest...) ->
alert first # 1
alert second # 2
alert rest   # [3, 4, 5 ] 
```

# c# - 如何在按钮单击时获取变量中上传图像路径的值

> ID：10960375
> 
> 赞同：0
> 
> 时间：2012-06-09T10:52:42.340
> 
> 标签：c#, asp.net

我已经使用这些代码在根目录的文件夹中上传了两个图像，并且我已经给出了两个按钮来上传单独的图像。单击按钮 2 我可以上传图像并在图像控件中显示该图像，我也为单击按钮 2。但是在这里，我想通过单击 button1（比较）来获取我使用 Button2 和 button3 上传的图像的路径。

这是我正在使用的代码：我在 Button1 点击功能上试过这个：但它没有显示任何值。

我应该怎么做才能获得两个字符串变量 filename1 和 filename2 的值？

```
 //string filename1 = FileUpload1.PostedFile.FileName;
        //Response.Write(filename1);
        //string filename2 = FileUpload2.PostedFile.FileName;
        //Response.Write(filename2); 
```

ASPX 页面代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Day_8_campairTwoImageUpload.aspx.cs" Inherits="validate.Day_8_campairTwoImageUpload" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:FileUpload ID="FileUpload1" runat="server" />
        <asp:Button ID="Button2" runat="server"
            Text="upload" onclick="Button2_Click" /><asp:Label ID="StatusLabel" runat="server" Text="Status"></asp:Label>
        <br /><br />
        <asp:FileUpload ID="FileUpload2" runat="server" /><asp:Button ID="Button3" 
            runat="server" Text="upload" onclick="Button3_Click" /><asp:Label ID="StatusLabel1" runat="server"
                Text="Status"></asp:Label><br /><br />

    <asp:Button ID="Button1" runat="server" Text="Compar" a onclick="Button1_Click" />
    </div>
    <asp:Image ID="Image1" runat="server" Height="100" Width="100"   />&nbsp;&nbsp;&nbsp;
    <asp:Image ID="Image2" runat="server" Height="100" Width="100" />
    </form>
</body>
</html> 
```

ASPX.cs 页面代码：

```
//BUTTON2=CODE TO UPLOAD FIRST IMAGE AND SHOW IT IN IMAGE CONTROL
        protected void Button2_Click(object sender, EventArgs e)
        {

            if (FileUpload1.HasFile)
            {
                try
                {
                    if (FileUpload1.PostedFile.ContentType == "image/jpeg")
                    {
                        if (FileUpload1.PostedFile.ContentLength < 102400)
                        {
                            //EnsureDirectoriesExist();

                            string filename1 = Path.GetFileName(FileUpload1.FileName);
                            FileUpload1.SaveAs(Server.MapPath(@"~/upload/") + filename1);
                            StatusLabel.Text = "Upload status: File uploaded!";

                            Image1.ImageUrl ="/Upload/"+FileUpload1.FileName.ToString();

                           // string filename1 = Server.MapPath(@"~/upload/") + FileUpload1.FileName;
                           // Response.Write(filename1);
                        }
                        else
                            StatusLabel.Text = "Upload status: The file has to be less than 100 kb!";
                    }
                    else
                        StatusLabel.Text = "Upload status: Only JPEG files are accepted!";
                }
                catch (Exception ex)
                {
                    StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
                }
            }
        }
//BUTTON3=CODE TO UPLOAD SECOND IMAGE AND SHOW IT IN IMAGE CONTROL
        protected void Button3_Click(object sender, EventArgs e)
        {
            if (FileUpload2.HasFile)
            {
                try
                {
                    if (FileUpload2.PostedFile.ContentType == "image/jpeg")
                    {
                        if (FileUpload2.PostedFile.ContentLength < 102400)
                        {
                            //EnsureDirectoriesExist();

                            string  filename2 = Path.GetFileName(FileUpload2.FileName);
                            FileUpload2.SaveAs(Server.MapPath(@"~/upload/") + filename2);
                            StatusLabel1.Text = "Upload status: File uploaded!";
                            Image2.ImageUrl = "/Upload/" + FileUpload2.FileName.ToString();
                        }
                        else
                            StatusLabel1.Text = "Upload status: The file has to be less than 100 kb!";
                    }
                    else
                        StatusLabel1.Text = "Upload status: Only JPEG files are accepted!";
                }
                catch (Exception ex)
                {
                    StatusLabel1.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
                }
            }

        }

//BUTTON1=CODE TO GET THE PATH NAME OF BOTH UPLOADED IMAGE IN TWO VARIABLE

 protected void Button1_Click(object sender, EventArgs e)
        {

           // string filename1 = FileUpload1.PostedFile.FileName;
            //Response.Write(filename1);
            // string filename2 = FileUpload2.PostedFile.FileName;
            //Response.Write(filename2);

        }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:05:53.733

您可以使用 ViewState/Session/HiddenField 将上传文件的路径保存在 button2 和 button3 的 Click 处理程序中。

```
protected void Button2_Click(object sender, EventArgs e)
 {
   if (FileUpload1.HasFile)
    {
      .....
      ViewState["file1"]=Server.MapPath("~/upload/" + FileUpload1.FileName);
      ....
    }
 }

 protected void Button3_Click(object sender, EventArgs e)
 {
   if (FileUpload2.HasFile)
    {
      .....
      ViewState["file2"]=Server.MapPath("~/upload/" + FileUpload2.FileName);
      ....
    }
 } 
```

在 button1_click 处理程序中，

```
protected void Button1_Click(object sender, EventArgs e)
{
   if(ViewState["file1"]!=null)
      Label1.Text=ViewState["file1"].ToString();
   if(ViewState["file2"]!=null)
      Label2.Text=ViewState["file2"].ToString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:10:01.083

结果表明您没有将图像 url 保存在任何地方，例如数据库或临时变量（例如会话等）中，因此您应该将这些图像 url 保存在数据库中或临时变量（例如会话）中并使用在您的 button3 点击事件中保存数据，希望对您有所帮助

# generics - NerdDinner 通用存储库接口？

> ID：10960377
> 
> 赞同：0
> 
> 时间：2012-06-09T10:52:45.170
> 
> 标签：generics, interface, repository, base, nerddinner

我使用 NerdDinner (MVC 2) 作为我项目的基础。虽然存储库接口设计工作得很好，但在我的实际应用程序中有十几个模型类（而 NerdDinner 只有一个，Dinner），这意味着我需要为每个类一个接口（及其实现）。此外，基本的接口方法（获取、保存、添加、删除等）是相同的，这意味着我必须在每个实现类中复制和粘贴相同的代码。唯一改变的是类的类型，例如客户的接口暴露：

```
void Add(Customer customer) 
```

并且订单的界面公开：

```
void Add(Order order) 
```

这两种方法的实现本质上是相同的，但使用了适当的模型类型，当然：

```
db.Customers.InsertOnSubmit(customer) 
```

和

```
db.Orders.InsertOnSubmit(order) 
```

分别。为了停止一遍又一遍地重复相同的代码（并尽量减少项目中 .cs 文件的数量），我想我可以定义一个通用的基础存储库接口，例如：

```
public interface IRepository<T>
{
void Add(T t)
void Delete(T t)
void Save();   // This one is truly the same in any case!
} 
```

但是如何将泛型类型应用于实现代码？我需要类似的东西：

```
db.T.InsertOnSubmit(t) 
```

可以这样做吗？

*PS：db 是数据上下文对象（我使用的是 linq to sql 设计器）。*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:57:42.890

从你的问题

> 但是如何将泛型类型应用于实现代码？我需要类似的东西：
> db.T.InsertOnSubmit(t)
> 这可以做到吗？

我假设你需要这样的东西

```
db.GetTable<T>().InsertOnSubmit(entity); 
```

一个简单的存储库实现给你一个想法：

```
public class Repository<T> : IRepository<T> where T : class
{
    private NorthwindDataContext db = new NorthwindDataContext();

    public Table<T> Data
    {
        get
        {
            return db.GetTable<T>();
        }
    }

    public void Add(T entity)
    {
        db.GetTable<T>().InsertOnSubmit(entity);
    }

    public void Delete(T entity)
    {
        db.GetTable<T>().DeleteOnSubmit(entity);
    }

    public void Save()
    {
        db.SubmitChanges();
    }
} 
```

# java - Eclipse Indigo 中启用安全性的 Tomcat 7 显示空白 JSP 页面

> ID：10960380
> 
> 赞同：1
> 
> 时间：2012-06-09T10:53:00.790
> 
> 标签：java, security, jsp, permissions, tomcat7

我在 Eclipse Indigo SR 2 中运行 apache-tomcat-7.0.27 作为服务器

我部署了一个 Web 应用程序，我正在尝试配置 JAAS 登录模块。我发现在 Tomcat 中启用安全性之前，登录模块不会启动。我通过双击服务器配置并在那里设置安全复选框来做到这一点。

我的问题是，启用此功能后，所有 JSP 都停止显示任何内容，仅提供空白页面。静态页面不受影响。我想这是 Eclipse 提供的 catalina.policy 中的一些错误，需要在此处添加一些权限才能使 JSP 正常工作。至少这是我的猜测。我在 tomcat 日志中看不到任何错误。

请问有什么建议吗？

编辑：事实证明，这只发生在为我正在使用的 FORM 身份验证定义的登录和错误页面上。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:10:12.690

检查您的 tomcat 日志，您的应用程序可能缺少[SecurityPermission](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html#SecurityPermission)。

# jquery - 在不使用悬停功能的情况下更改悬停状态jQuery？

> ID：10960383
> 
> 赞同：2
> 
> 时间：2012-06-09T10:53:30.147
> 
> 标签：jquery, css, events, hover

我已经使用 css 为某些元素分配了悬停状态。在特定事件之后，我想使用 jQuery 更改悬停状态。我想更改我在 css 文件中提到的 :hover 类选择器。我知道我可以实现 using`.hover`函数，但我不想使用它，因为这不适合我的应用程序。在我的应用程序中，悬停状态的这种变化会持续一段时间，这意味着在特定时间之后我必须取消绑定悬停事件。但是在我的应用程序中有许多条件模块，我需要在其中调用此取消绑定事件。许多低效的电话取消绑定我不想要的东西。

```
elem {
  width:10px;
}
elem:hover {
  width:20px;
} 
```

我想`hover`从 say 更改状态的宽度`20px to 40px`。我想使用一些简单的东西，`.css('width','100px')`但是如何在`:hover`选择器上调用这个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:55:57.433

据我所知，您只能通过悬停事件影响悬停：

```
$('#selector').hover( 
  function() { $(this).css('width','100px'); }, 
  function() { $(this).css('width','10px'); }
}); 
```

作为替代方案，您可能希望使用[addClass](http://api.jquery.com/addClass/)和[removeClass](http://api.jquery.com/removeClass/)动态地将 css 类分配给给定的元素，因此基本上当您希望元素具有悬停的 css 类时，您可以这样做：

```
$('#selector').addClass('hovered'); 
```

并且您希望您的元素具有正常的课程：

```
$('#selector').removeClass('hovered'); 
```

这不会真正取代悬停事件，但这样您可以随时更改 css 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:07:50.423

您可以加载另一个覆盖 elem:hover 定义的样式表（或将样式节点附加到 head）和

```
elem:hover {
    width: 100px !important;
} 
```

[这是一个大意的问题。](https://stackoverflow.com/questions/8023898/dynamically-load-css-approaches)

（不过，不断绑定和取消绑定悬停事件听起来很可疑。您可能需要考虑导致您发布此问题的行为本身是否不是问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T11:27:01.037

您可以使用 jQuery 添加一个类，该类在您的 CSS 中应用了悬停选择器。

**例如**

```
elem {
  width:10px;
}
elem:hover {
  width:20px;
}
elem.jsApplied:hover {
  width:40px;
} 
```

# google-app-engine - Google App Engine (python)：搜索 API：字符串搜索

> ID：10960384
> 
> 赞同：11
> 
> 时间：2012-06-09T10:53:30.100
> 
> 标签：google-app-engine, full-text-search, google-search-api

我正在使用 Google App Engine 搜索 API（[https://developers.google.com/appengine/docs/python/search/](https://developers.google.com/appengine/docs/python/search/)）。我已经索引了所有实体并且搜索工作正常。但只有当我搜索完全匹配时，它才会返回 0 个结果。例如：

```
from google.appengine.api import search

_INDEX_NAME = 'searchall'

query_string ="United Kingdom"
query = search.Query(query_string=query_string)
index = search.Index(name=_INDEX_NAME)

print index.search(query) 
```

如果我运行以下脚本，我会得到如下结果：

```
search.SearchResults(results='[search.ScoredDocument(doc_id='c475fd24-34ba-42bd-a3b5-d9a48d880012', fields='[search.TextField(name='name', value='United Kingdom')]', language='en', order_id='45395666'), search.ScoredDocument(doc_id='5fa757d1-05bf-4012-93ff-79dd4b77a878', fields='[search.TextField(name='name', value='United Kingdom')]', language='en', order_id='45395201')]', number_found='2') 
```

但如果我将其更改`query_string`为`"United Kin"`或`"United"`返回 0 结果如下：

```
search.SearchResults(number_found='0') 
```

我想将此 API 用于普通搜索和 AutoSuggest。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-09T15:25:59.393

App Engine 的全文搜索 API 不支持子字符串匹配。

但是，我自己需要这种行为来支持用户键入时的搜索建议。这是我的解决方案：

```
""" Takes a sentence and returns the set of all possible prefixes for each word.
    For instance "hello world" becomes "h he hel hell hello w wo wor worl world" """
def build_suggestions(str):
    suggestions = []
    for word in str.split():
        prefix = ""
        for letter in word:
            prefix += letter
            suggestions.append(prefix)
    return ' '.join(suggestions)

# Example use
document = search.Document(
    fields=[search.TextField(name='name', value=object_name),
            search.TextField(name='suggest', value=build_suggestions(object_name))]) 
```

基本思想是为每个可能的子字符串手动生成单独的关键字。这仅适用于短句，但对我的目的非常有用。

# .net - XAML 网格组件放置问题

> ID：10960387
> 
> 赞同：1
> 
> 时间：2012-06-09T10:54:09.823
> 
> 标签：.net, wpf, xaml, grid

我在网格中放置组件时遇到问题。

atm 的输出是这样的：

![在此处输入图像描述](../Images/5ad575727b36acc11da8eb75c01fb5a3.png)

我想要做的只是让组件像这样并排放置：

![在此处输入图像描述](../Images/2eab166c9d5d157c530071381c193b6b.png)

这是我当前的代码：

```
<Grid x:Name="Components" Margin="8,8,0,8">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>                  
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <Label Grid.Row="1" Grid.Column="0" Content="{Binding .[Language.timeOptions1], Mode=OneWay, Source={StaticResource localisation}}" HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="11" Foreground="#FF585858" FontFamily="Myriad Pro" Height="23.2"/>
    <TextBox Grid.Row="1" Grid.Column="1" MaxLength="2" x:Name="textTimeHour" TextWrapping="NoWrap" VerticalAlignment="Top" HorizontalAlignment="Left" FontFamily="Myriad Pro" Style="{DynamicResource style1Text}" Height="25.2"/>
    <Label Grid.Row="1" Grid.Column="1" Content=":" HorizontalAlignment="Left" FontSize="11" Foreground="#FF585858" FontFamily="Myriad Pro" VerticalAlignment="Top"/>
    <TextBox Grid.Row="1" Grid.Column="2" MaxLength="1" x:Name="textTimeMin" TextWrapping="NoWrap" VerticalAlignment="Top" FontFamily="Myriad Pro" Style="{DynamicResource style1Text}" Height="25.2" HorizontalAlignment="Left" Width="Auto"/>
    <Button Width="80" Grid.Row="1" Grid.Column="2" x:Name="btnNow" Content="{Binding .[Language.now], Mode=OneWay, Source={StaticResource localisation}}" VerticalAlignment="Top" Style="{DynamicResource style1Btn}" Height="25.2" FontSize="9.333" Click="btnNow_Click"/>
    <TextBlock Grid.Row="2" Grid.Column="0" x:Name="blockIgnoreDate" Text="{Binding .[Language.timeOptions2], Mode=OneWay, Source={StaticResource localisation}}" HorizontalAlignment="Left" FontSize="11" Foreground="#FF585858" FontFamily="Myriad Pro" Height="23.202"/>
    <Custom:DatePicker  Grid.Row="2" Grid.Column="1" x:Name="pickerDate" d:LayoutOverrides="Width" FontFamily="Myriad Pro" IsTodayHighlighted="False" Foreground="#FF585858" Height="24" />
    <CheckBox Grid.Row="2" Grid.Column="2" x:Name="checkIgnoreDate" Content="{Binding .[Language.ignoreDate], Mode=OneWay, Source={StaticResource localisation}}" Foreground="#FF585858" Background="{x:Null}" Checked="checkIgnoreDate_Checked" Unchecked="checkIgnoreDate_Unchecked" Height="15.96"/>
    <Button Grid.Row="3" Grid.Column="0" x:Name="btnAddTask" Content="{Binding .[Language.addTask], Mode=OneWay, Source={StaticResource localisation}}" HorizontalAlignment="Left" VerticalAlignment="Bottom" Style="{DynamicResource style1Btn}" Click="btnAddTask_Click" Height="24.65"/>
</Grid> 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:21:59.273

将您的时间控件放入 a`StackPanel`并将`VerticalAlignment`您的控件更改为`Center`：

```
<Label Grid.Row="1" Grid.Column="0" Content="{Binding .[Language.timeOptions1],
       Mode=OneWay, Source={StaticResource localisation}}" HorizontalAlignment="Left"
       VerticalAlignment="Center" FontSize="11" Foreground="#FF585858"
       FontFamily="Myriad Pro" Height="23.2"/>
<StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1">
    <TextBox MaxLength="2" x:Name="textTimeHour" TextWrapping="NoWrap"
             VerticalAlignment="Center" HorizontalAlignment="Left"
             FontFamily="Myriad Pro" Style="{DynamicResource style1Text}"
             Height="25.2"/>
    <Label Content=":" HorizontalAlignment="Left" FontSize="11" Foreground="#FF585858"
           FontFamily="Myriad Pro" VerticalAlignment="Center"/>
    <TextBox MaxLength="1" x:Name="textTimeMin" TextWrapping="NoWrap"
             VerticalAlignment="Top" FontFamily="Myriad Pro"
             Style="{DynamicResource style1Text}" Height="25.2"
             HorizontalAlignment="Left" Width="Auto"/>
    <Button Width="80" x:Name="btnNow" Content="{Binding .[Language.now], Mode=OneWay,
           Source={StaticResource localisation}}" VerticalAlignment="Center"
           Style="{DynamicResource style1Btn}" Height="25.2" FontSize="9.333"
           Click="btnNow_Click"/>
</StackPanel> 
```

您可能还想为 the 添加边距`CheckBox`或将其设置`HorizontalAlignment`为`Center`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:09:19.830

将 textTimeMin 文本框和 btnNow 的 Grid.Column 更改为 1，并在 textTimeHour、textTimeMin、：标签和 btnNow 上设置 Grid.ColumnSpan="2" -

```
<Label Grid.Row="1" Grid.Column="0" Content="{Binding .[Language.timeOptions1], Mode=OneWay, Source={StaticResource localisation}}" HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="11" Foreground="#FF585858" FontFamily="Myriad Pro" Height="23.2"/>
<TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" MaxLength="2" x:Name="textTimeHour" TextWrapping="NoWrap" VerticalAlignment="Top" HorizontalAlignment="Left" FontFamily="Myriad Pro" Style="{DynamicResource style1Text}" Height="25.2"/>
<Label Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" Content=":" HorizontalAlignment="Left" FontSize="11" Foreground="#FF585858" FontFamily="Myriad Pro" VerticalAlignment="Top"/>
<TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" MaxLength="1" x:Name="textTimeMin" TextWrapping="NoWrap" VerticalAlignment="Top" FontFamily="Myriad Pro" Style="{DynamicResource style1Text}" Height="25.2" HorizontalAlignment="Left" Width="Auto"/>
<Button Width="80" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" x:Name="btnNow" Content="{Binding .[Language.now], Mode=OneWay, Source={StaticResource localisation}}" VerticalAlignment="Top" Style="{DynamicResource style1Btn}" Height="25.2" FontSize="9.333" Click="btnNow_Click"/> 
```

我现在无法对其进行测试，但您需要正确使用 Grid.Column 和 Grid.ColumnSpan 来实现您想要的。

# javascript - javascript 日期问题 - 0 到 1？

> ID：10960388
> 
> 赞同：1
> 
> 时间：2012-06-09T10:54:14.487
> 
> 标签：javascript, calendar

我创建了一个小脚本来显示日历，但月份是 1 位数。EG June 显示 5 而不是 6。

看看这里：http: [//jsfiddle.net/jwoodcreative/vgTN7/](http://jsfiddle.net/jwoodcreative/vgTN7/)

我究竟做错了什么...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:55:36.900

在 JavaScript 中，月份从 0 开始。只需添加 1 即可。来自[MDN 文章](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth)（强调添加）：

> 返回的值是**0 到 11 之间**`getMonth`的整数。0 对应于一月，1 对应于二月，依此类推。

 **这在[ECMAScript 规范](http://es5.github.com/#x15.9.1.4)中定义：

> 月份由 0 到 11 范围内的整数标识，包括 0 到 11。

这是一个[更新的小提琴](http://jsfiddle.net/vgTN7/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T10:56:44.450

查看文档[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

> **month**
> 表示月份的整数值，从 0 开始表示 1 月到 11 表示 12 月。**

# python - Python 字符串替换：URL 中的关键字

> ID：10960394
> 
> 赞同：1
> 
> 时间：2012-06-09T10:55:38.090
> 
> 标签：python, string, google-app-engine, utf-8

我将用字符串中的 url 替换一些关键字，例如，

```
content.replace("Google","<a href="http://www.google.com">Google</a>") 
```

但是，我只想在尚未包含在 url 中的情况下用 url 替换关键字。

内容是简单的 HTML：

```
<p><b>This is an example!</b></p><p>I love <a href="http://www.google.com">Google</a></p><p><a href="http://www.google.com"><img src="/google.jpg" /></a></p> 
```

主要是`<a>`和`<img>`标签。

**主要问题：如何确定关键字是否已经包含在`<a>`or`<img>`标记中？**

这是 PHP 中的一个类似问题[find and replace keywords with urls ONLY if not already Wrap in a url](https://stackoverflow.com/questions/4522143/find-and-replace-keywords-with-urls-only-if-not-already-wrapped-in-a-url)，但答案不是有效的。

Python中有更好的解决方案吗？代码示例更好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T21:02:42.560

我正在使用[Beatiful Soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)来解析我的 HTML，因为使用正则表达式[解析](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)HTML 可能......被证明很棘手。如果你使用漂亮的汤，你可以玩弄[previous_sibling](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#next-sibling-and-previous-sibling)和 previous_element 找出你需要什么。

您以这种方式进行交互：

```
soup.find_all('img') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T22:02:40.677

正如 Chris-Top 所说，BeautifulSoup 是要走的路：

```
from BeautifulSoup import BeautifulSoup, Tag, NavigableString
import re    

html = """
<div>
    <p>The quick brown <a href='http://en.wikipedia.org/wiki/Dog'>fox</a> jumped over the lazy Dog</p>
    <p>The <a href='http://en.wikipedia.org/wiki/Dog'>dog</a>, who was, in reality, not so lazy, gave chase to the fox.</p>
    <p>See image for reference:</p>
    <img src='dog_chasing_fox.jpg' title='Dog chasing fox'/>
</div>
"""
soup = BeautifulSoup(html)

#search term, url reference
keywords = [("dog","http://en.wikipedia.org/wiki/Dog"),
            ("fox","http://en.wikipedia.org/wiki/Fox")]

def insertLinks(string_value,string_href):
    for t in soup.findAll(text=re.compile(string_value, re.IGNORECASE)):
            if t.parent.name !='a':
                    a = Tag('a', name='a')
                    a['href'] = string_href
                    a.insert(0, NavigableString(string_value))
                    string_list = re.compile(string_value, re.IGNORECASE).split(t)
                    replacement_text = soup.new_string(string_list[0])
                    t.replace_with(replacement_text)
                    replacement_text.insert_after(a)
                    a.insert_after(soup.new_string(string_list[1]))

for word in keywords:
    insertLinks(word[0],word[1])

print soup 
```

将产生：

```
<div>
    <p>The quick brown <a href="http://en.wikipedia.org/wiki/Dog">fox</a> jumped over the lazy <a href="http://en.wikipedia.org/wiki/Dog">dog</a></p>
    <p>The <a href="http://en.wikipedia.org/wiki/Dog">dog</a>, who was, in reality, not so lazy, gave chase to the <a href="http://en.wikipedia.org/wiki/Fox">fox</a>.</p>
    <p>See image for reference:</p>
    <img src="dog_chasing_fox.jpg" title="Dog chasing fox"/>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T11:34:18.803

您可以尝试添加上一篇文章中提到的正则表达式。首先根据正则表达式检查您的字符串，以检查它是否已包含在 URL 中。这应该很容易，因为对 re 库的简单调用及其 search() 方法就可以解决问题。

如果您需要正则表达式和专门的搜索方法，这是一个很好的教程：[http ://www.tutorialspoint.com/python/python_reg_expressions.htm](http://www.tutorialspoint.com/python/python_reg_expressions.htm)

在检查字符串以查看它是否已包含在 URL 中之后，如果它尚未包含在 URL 中，则可以调用替换函数。

这是我写的一个简单的例子：

```
 import re

    x = "<a href=""http://www.google.com"">Google</a>"
    y = 'Google'

    def checkURL(string):
        if re.search(r'<a href.+', string):
            print "URL Wrapped Already"
            print string
        else:
            string = string.replace('Google', "<a href=""http://www.google.com"">Google</a>")
            print "URL Not Wrapped:"
            print string

    checkURL(x)
    checkURL(y) 
```

我希望这回答了你的问题！

# delphi - Delphi 7，使用FastMM4获取应用路径并打开应用

> ID：10960399
> 
> 赞同：0
> 
> 时间：2012-06-09T10:56:41.260
> 
> 标签：delphi, delphi-7, createprocess, fastmm

我正在开发一个应用程序`Delphi 7`，它将运行并显示由`FastMM4.pas`.

该应用程序将安装在系统的任何位置。我已经修改了它，`FastMM4.pas`以便它`CreateProcess`（简而言之执行我的应用程序）我 [以前的问题](https://stackoverflow.com/q/10784743/1051198)和[Sertac Akyuz 的答案中的代码](https://stackoverflow.com/a/10785566/1051198)

将`leakTracker.exe`fastmm4的日志文件作为参数，打开文件并显示。修改后的`fastMM4.pas`将用于任何其他应用程序。

```
Procedure OpenTheLeakReader
 begin
 CmdLine := 'C:\Program Files\leakTracker\leakTracker.exe "';  
 lstrcat(CmdLine,CTheArGuements ); 
 ZeroMemory(@SInfo, SizeOf(SInfo));
 SInfo.cb := SizeOf(SInfo);
 CreateProcess(nil, CmdLine, nil, nil, False,  NORMAL_PRIORITY_CLASS, nil, nil, sInfo, pInfo);
end; 
```

这工作正常，但我已经硬编码了`path`因为得到我的应用程序路径..

```
 [FastMM4]  -cannot use SysUtils.pas     //*1
                            -cannot use Registry.pas     //*2
                            -cannot use ParamStr(0)      //*3
                            -cannot use unitWithSysRegis //*4

                 [someAplicationWhichWillUseFastMM4] -Uses FastMM4.pas 
```

在`FAstMM4.pas` `finalization`我有这个

```
 if ifLeakedMemory then OpenTheLeakReader; 
```

因为我不能拥有

`*1 - SysUtils.pas`- 在 FastMM4.pass 中，因为这将卸载 fastmmm4

`*2 - Registry.pas`- 搜索`leakTracker`安装路径但会卸载 fastmm4

`*3 - paramstr(0)` - 它在应用程序结束时给出错误。

`*4 - unitWithSysRegis`- 使用 SysUtils,Registry 在 Fastm4 使用子句中也是不可能的。

所以我被困在如何`leakTracker.exe`通过CreateProcess获取日志文件的路径并将其发送到“leakTracker.exe”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:57:33.057

（首先解释一下（关于问题中的链接问题），这个问题不仅仅是不能在 FastMM4.pas 中使用单元（具有需要内存分配的初始化部分）。OP认为他的代码必须在 FastMM 之后运行最终确定内存管理器。如果在此之后分配内存，FastMM 会引发异常，因此禁止通过 RTL 分配内存。）

* * *

使用上一个问题中指出的 api 注册表函数或 Blorgbeard 对此问题的评论。结合前面的代码，它会变成这样：

```
var
  hReg: HKEY;
  Ret: Longint;
  RegDataType, RegDataSize: DWORD;
  CmdLine: array [0..560] of Char; // increase as needed
  Len: Integer;
  SInfo: TStartupInfo;
  PInfo: TProcessInformation;

initialization
{$ifndef BCB}
  // fastmm code
{$endif}

finalization
{$ifndef PatchBCBTerminate}
  FinalizeMemoryManager;  // fastmm code

  Ret := windows.RegOpenKeyEx(HKEY_LOCAL_MACHINE,
                  'SOFTWARE\[YourProgram]', // registry key to your program's path
                  0, KEY_READ, hReg);

  RegDataType := REG_SZ;
  RegDataSize := 260;
  Ret := windows.RegQueryValueEx(hReg,
                  'path',       // registry value containing your program's path
                  nil, @RegDataType, @CmdLine, @RegDataSize);
  RegCloseKey(hReg);

  CmdLine[RegDataSize - 1] := ' ';
  CmdLine[RegDataSize] := '"';     // open doublequote in case spaces in path
  Len := windows.GetModuleFileName(0,
          PChar(@CmdLine[RegDataSize + 1]), 260) + RegDataSize;

  while CmdLine[Len] <> '.' do     // assumes executable has an extension
    Dec(Len);
  CmdLine[Len] := #0;
  lstrcat(CmdLine, '_MemoryManager_EventLog.txt"'#0);  // closing doublequote

  ZeroMemory(@SInfo, SizeOf(SInfo));
  SInfo.cb := SizeOf(SInfo);
  CreateProcess(nil, CmdLine, nil, nil, False,
                NORMAL_PRIORITY_CLASS, nil, nil, sInfo, pInfo);

{$endif}
end. 
```

# unix - ssh 在 unix 控制台上快速清理书写符号，无需退格

> ID：10960404
> 
> 赞同：0
> 
> 时间：2012-06-09T10:57:59.273
> 
> 标签：unix, ssh, console

在使用 ssh 时，我有时会写入长字符串/命令，例如。`command -param 3 4 5 7 3 paran faff gfd werg h tgr egr`

如何在没有大量退格和不执行命令的情况下快速清理它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:02:34.260

似乎您需要`CTRL + u`，因为这是清除命令行的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:01:24.017

Ctrl-C 在 Mac 上的 Bash 中工作。

# c++ - 从基类和返回类型继承模板

> ID：10960408
> 
> 赞同：0
> 
> 时间：2012-06-09T10:59:26.950
> 
> 标签：c++, templates, return-type, template-inheritance

我的项目有一些问题。这是一些代码：

```
class calcDinamica
{
public:
    virtual void somma() =0;
    virtual void creaPrimo() =0;
    virtual T* ritornaPrimo()const{cout<<"errore"<<endl;};//THIS is what i want
    virtual ~calcDinamica(){};
};

template<class T>
class calcolatrice:public calcDinamica
{
private:
    T* primoVett;  //first operand
    T* secondoVett; //second operand
    T* risultatoVett; //result
public:
    calcolatrice():primoVett(0), secondoVett(0), risultatoVett(0){};
    virtual void creaPrimo(){primoVett= new T;};
    virtual void creaSecondo(){secondoVett= new T;};
    virtual void creaRisultato(){};
    virtual void somma()
    {
        risultatoVett=new T;
        *risultatoVett=*primoVett+*secondoVett;
    };
    virtual T* ritornaPrimo()const{cout<<"giusto"<<endl;return primoVett;};
}; 
```

此代码用于计算器，我还有其他 3 个不同的类，我在上面发布的这些类仅用于跟踪我在会话期间创建的数据，因为我正在使用 QT 实现它。

所以，我创建了这个基本的 CalcDinamica 只是为了允许我有一个像 calcDinamica* cal 这样的指针；然后像这样创建它： calc= new calcolatrice < matrix > ，因为当我将计算器与 QT 一起使用时，我可以更改我想要操作的操作数的类型（如向量或矩阵）。

好的，这可行，但我想返回 calcolatrice 中的数据，而不用 calcDinamica 的指针做很多 dynamic_cast。我怎样才能做到，还是不可能？因为如果不可能，我最好保留基类的这个选项，只创建 3 个不同的 calcolatrice。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T14:24:04.663

如果您使用多种类型，则必须为所有类型的表达式实现一个基类并在 AST 中使用它，并对所有评估的表达式执行类型检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:09:28.123

也许你应该在“ `template<class T>`”之前加“”，在“ ”之后`class calcDinamica`加“ ”`<T>``class calcolatrice:public calcDinamica`

# java - 如何将使用 HttpClient 下载的文件保存到特定文件夹中

> ID：10960409
> 
> 赞同：43
> 
> 时间：2012-06-09T10:59:29.583
> 
> 标签：java, apache-httpclient-4.x

我正在尝试使用 HttpClient 下载 PDF 文件。我能够获取文件，但我不确定如何将字节转换为 PDF 并将其存储在系统的某个位置

我有以下代码，如何将其存储为 PDF？

```
 public ???? getFile(String url) throws ClientProtocolException, IOException{

            HttpGet httpget = new HttpGet(url);
            HttpResponse response = httpClient.execute(httpget);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                long len = entity.getContentLength();
                InputStream inputStream = entity.getContent();
                // How do I write it?
            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-09T11:04:35.227

```
InputStream is = entity.getContent();
String filePath = "sample.txt";
FileOutputStream fos = new FileOutputStream(new File(filePath));
int inByte;
while((inByte = is.read()) != -1)
     fos.write(inByte);
is.close();
fos.close(); 
```

* * *

**编辑：**

您还可以使用[BufferedOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedOutputStream.html)和[BufferedInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedInputStream.html)来加快下载速度：

```
BufferedInputStream bis = new BufferedInputStream(entity.getContent());
String filePath = "sample.txt";
BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(new File(filePath)));
int inByte;
while((inByte = bis.read()) != -1) bos.write(inByte);
bis.close();
bos.close(); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-08-18T09:22:13.457

只是为了记录，有更好（更简单）的方法来做同样的事情

```
File myFile = new File("mystuff.bin");

CloseableHttpClient client = HttpClients.createDefault();
try (CloseableHttpResponse response = client.execute(new HttpGet("http://host/stuff"))) {
    HttpEntity entity = response.getEntity();
    if (entity != null) {
        try (FileOutputStream outstream = new FileOutputStream(myFile)) {
            entity.writeTo(outstream);
        }
    }
} 
```

或者如果有人更喜欢它，可以使用 fluent API

```
Request.Get("http://host/stuff").execute().saveContent(myFile); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-06-09T11:05:08.943

这是一个简单的解决方案，使用[`IOUtils.copy()`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#copy%28java.io.InputStream,%20java.io.OutputStream%29)：

```
File targetFile = new File("foo.pdf");

if (entity != null) {
    InputStream inputStream = entity.getContent();
    OutputStream outputStream = new FileOutputStream(targetFile);
    IOUtils.copy(inputStream, outputStream);
    outputStream.close();
}

return targetFile; 
```

`IOUtils.copy()`很棒，因为它处理缓冲。但是，此解决方案的可扩展性不是很高：

*   您不能指定目标文件名和目录
*   您可能希望以不同的方式存储文件，例如在数据库中。在这种情况下不需要文件。

更具可扩展性的解决方案涉及两个功能：

```
public void downloadFile(String url, OutputStream target) throws ClientProtocolException, IOException{
    //...
    if (entity != null) {
    //...
        InputStream inputStream = entity.getContent();
        IOUtils.copy(inputStream, target);
    }
} 
```

还有一个辅助方法：

```
public void downloadAndSaveToFile(String url, File targetFile) {
    OutputStream outputStream = new FileOutputStream(targetFile);
    downloadFile(url, outputStream);
    outputStream.close();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-10T11:35:56.223

使用依赖`org.apache.httpcomponents:fluent-hc`：

```
Request.Get(url).execute().saveContent(file); 
```

请求来自`org.apache.http.client.fluent.Request`。

就我而言，我需要一个流，这同样简单：

```
inputStream = Request.Get(url).execute().returnContent().asStream(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-17T17:37:59.673

如果您使用的是 Java 7+，则可以使用本机[Files.copy(InputStream in, Path target, CopyOption... options)](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#copy(java.io.InputStream,%20java.nio.file.Path,%20java.nio.file.CopyOption...))，例如：

```
HttpEntity entity = response.getEntity();

try (InputStream inputStream = entity.getContent()) {
    Files.copy(inputStream, Paths.get(filePathString), StandardCopyOption.REPLACE_EXISTING);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-09T11:04:19.097

打开 a`FileOutputStream`并将字节保存`inputStream`到其中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-22T11:38:08.290

您还可以使用 Apache http 客户端 fluent API

```
Executor executor = Executor.newInstance().auth(new HttpHost(host), "user", "password"); 
executor.execute(Request.Get(url.toURI()).connectTimeout(1000)).saveContent("C:/temp/somefile"); 
```

# mysql - 如何在 Mysql 中编写条件更新查询？

> ID：10960410
> 
> 赞同：2
> 
> 时间：2012-06-09T10:59:44.573
> 
> 标签：mysql

我有一个表用户。我希望仅根据某些条件更新列电子邮件。

```
update users set email='$email' where uid='$uid' 
```

（我希望仅在没有包含相同电子邮件 ID 的其他记录时更新表用户）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:06:17.380

在创建表时，您需要将电子邮件列设为唯一，这样它就不允许您插入重复的值。现在您可以使用上述查询，这样表中的电子邮件列中就不会出现重复的电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:16:09.947

如果对不将电子邮件字段/列标记为唯一没有任何限制，那么您可能应该这样做。然后，当出现重复条目​​时，您将收到一个可以处理的错误。

否则，如果我正确理解您的问题，您需要查询来更新给定 UID 的电子邮件，并且仅当电子邮件尚未在任何记录的表中时。如果是这样的话，那么应该这样做：

```
update users
set email='$email'
where uid='$uid' and (select count(1) from users where email='$email') < 1 
```

希望这可以帮助！

# android - 安卓下载大文件

> ID：10960411
> 
> 赞同：2
> 
> 时间：2012-06-09T10:59:48.823
> 
> 标签：android, eclipse

我有各种文件需要从网上下载到手机中

我已经完成了代码，但代码只能让我下载图片/照片等小尺寸。像 .apk 这样花费大约 2mb 到 >100mb 的大文件会让我失望。下面是代码：

```
final ProgressDialog progress=ProgressDialog.show(this, "Please wait", "Loading ...", true);

        new Thread()
        {
            public void run()
            {               
                try {
                    URL url = new URL("http://www.domain.com/apk/Gmail.apk");

                    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                    urlConnection.setRequestMethod("GET");
                    urlConnection.setDoOutput(true);

                    urlConnection.connect();

                    File SDCardRoot = Environment.getExternalStorageDirectory();
                    File file = new File(SDCardRoot, "Gmail.apk");

                    FileOutputStream fileOutput = new FileOutputStream(file);

                    InputStream inputStream = urlConnection.getInputStream();

                    byte[] buffer = new byte[1024];
                    int bufferLength = 0; 

                    while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
                            fileOutput.write(buffer, 0, bufferLength);
                            //downloadedSize += bufferLength;
                    }
                    fileOutput.close();

            } catch (MalformedURLException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
                progress.dismiss();                     
            }
        }.start(); 
```

# google-apps-script - 谷歌应用脚 本getas

> ID：10960413
> 
> 赞同：1
> 
> 时间：2012-06-09T11:00:23.857
> 
> 标签：google-apps-script

我的问题涉及使用一种解决方法来解决将 Google Doc 转换为 HTML 以用作[Henrique Abreu](https://stackoverflow.com/users/222901/henrique-abreu)发布的电子邮件模板的问题。它在 Google Apps 脚本问题跟踪器上注册为[问题 585 。](http://code.google.com/p/google-apps-script-issues/issues/detail?id=585)

一年中的大部分时间我一直在使用以下代码，除了丑陋的授权场景（即自动授权系统不起作用）之外，它工作正常。

```
function getDocAsHtml(docId){
  var url = 'https://docs.google.com/feeds/download/documents/Export?exportFormat=html&format=html&id=';
  var auth = googleOAuth_('docs',url+docId);
  return UrlFetchApp.fetch(url+docId,auth).getContentText();
}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

我的问题是最近新的授权不再有效。因此，我使用的现有电子表格继续工作并正确发送电子邮件。然而，在创建了一个新的电子表格并将代码导入其中后，就会触发授权机制 [1]。

问题是，以前当我授予权限时，调试器授权对话框会消失并且系统会正常工作，而现在该对话框只是重新出现。当尝试从电子表格中的菜单运行代码路径时，我得到一个通用的“糟糕！需要授权”对话框 [1]。

撇开对于一个已经存在很长时间的问题来说，这是一个丑陋的解决方法这一事实，有什么改变使这个解决方法不再有效？还有其他解决方案吗？

[1] 不幸的是，我还不能上传图片，但可以查看[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=585)，其中我附上了一张图片，其中包含我正在谈论的错误和授权对话框的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:12:04.323

我看到您在问题跟踪器上发帖并在新的电子表格上进行了一些测试。在我的测试中，当我使用这个小功能时，授权过程就会出现：

```
function autorise(){
// fonction à appeler pour autoriser googleOauth
var id= "put here the string ID of a doc you own"
  var url = 'https://docs.google.com/feeds/';
  var doc = UrlFetchApp.fetch(url+'download/documents/Export?exportFormat=html&format=html&id='+id,
                              googleOAuth_('docs',url)).getContentText();  
}
// this part is the same you use and is already in your script... I show it here for info only
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

也许你可以试试？

或者，如果您愿意，可以在[此共享测试表上进行测试](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dHVJQ1hVaXV4NmhPQm56dWk2MmVOOHc#gid=0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T05:57:00.390

在您的问题（和您的示例电子表格）中，您使用的范围我不确定是否会起作用。我用于文档的“范围”是“https://docs.google.com/feeds/”。这记录在这里[https://developers.google.com/gdata/docs/auth/oauth#Scope](https://developers.google.com/gdata/docs/auth/oauth#Scope)。请在您的代码中更改您传递给 googleOAuth_ 的范围，并让我们知道问题是否消失。

# windows-phone-7 - Windows Phone 7 - 等待 Webclient 完成

> ID：10960416
> 
> 赞同：1
> 
> 时间：2012-06-09T11:00:31.443
> 
> 标签：windows-phone-7, asynchronous

我正在开发一个应用程序并且遇到了异步调用的问题......这就是我正在尝试做的事情。

该应用程序使用 JSON API，并在运行时使用必要的值（即单个新闻文章）填充全景项目中的 ListBox。当用户选择一个 ListBox 项目时，会触发 SelectionChanged 事件 - 它从所选项目中获取 articleID，并将其传递给 Update 方法以下载该文章的 JSON 响应，使用 JSON.NET 对其进行反序列化，然后获取用户访问 WebBrowser 控件，该控件根据收到的响应呈现 html 页面。

问题是我必须在启动 NavigationService 之前等待响应，但我不确定如何正确执行此操作。这样，代码运行“太快”，我没有及时得到响应来呈现页面。

事件代码：

```
private void lstNews_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (lstNews.SelectedIndex == -1)
        {
            return;
        }

        ShowArticle _article = new ShowArticle();
        ListBox lb = (ListBox)sender;
        GetArticles item = (GetArticles)lb.SelectedItem;
        string passId = ApiRepository.ApiEndpoints.GetArticleResponseByID(item.Id);
        App.Current.JsonModel.JsonUri = passId;
        App.Current.JsonModel.Update();

        lstNews.SelectedIndex = -1;

        NavigationService.Navigate(new Uri("/View.xaml?id=" + item.Id, UriKind.Relative));
    } 
```

视图中的 OnNavigatedTo 方法：

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {          
        base.OnNavigatedTo(e);

        long sentString = long.Parse(NavigationContext.QueryString["id"]);

        string articleUri = ApiRepository.ApiEndpoints.GetArticleResponseByID(Convert.ToInt32(sentString));

        //this throws an error, runs "too fast"
        _article = App.Current.JsonModel.ArticleItems[0];
    } 
```

更新方法：

```
 public void Update()
    {
        ShowArticle article = new ShowArticle();

        try
        {
            webClient.DownloadStringCompleted += (p, q) =>
            {
                if (q.Error == null)
                {
                    var deserialized = JsonConvert.DeserializeObject<ShowArticle>(q.Result);
                    _articleItems.Clear();
                    _articleItems.Add(deserialized);
                }
            };
        }

        catch (Exception ex)
        { 
            //ignore this
        }

        webClient.DownloadStringAsync(new Uri(jsonUri));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:07:35.960

异步回调模式：

```
public void Update(Action callback, Action<Exception> error)
{
    webClient.DownloadStringCompleted += (p, q) =>
    {
        if (q.Error == null)
        {
            // do something
            callback();               
        }
        else
        {
            error(q.Error);
        }
    };
    webClient.DownloadStringAsync(new Uri(jsonUri));
} 
```

称呼：

```
App.Current.JsonModel.Update(() =>
{
    // executes after async completion
    NavigationService.Navigate(new Uri("/View.xaml?id=" + item.Id, UriKind.Relative));
},
(error) =>
{
    // error handling
});
// executes just after async call above 
```

# android - 安卓游戏图片格式

> ID：10960419
> 
> 赞同：0
> 
> 时间：2012-06-09T11:00:55.043
> 
> 标签：android

我对 Android 游戏的图像有疑问。问题不是代码问题，因为我使用的代码来自一本书（Beginning Android 4 Games Developer）。

问题是这样的：我知道我必须在android中使用的格式：png，但我不知道我必须使用的这种格式的设置（比如RGB565 ...）。因为如果我只使用 png，当我运行游戏时，图像并不好。所以我需要有人解释我需要为安卓游戏的图像使用哪些设置。

PS我用的软件是photoshop。如果有更好的软件用于此目的，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:33:52.423

我认为您对 Android 以及它如何实现图形的理解存在很大的误解。对于几乎任何开发，您都不受 .png 的限制。.png 和 .9.png 仅严格用于管理可绘制常量。

Android 使用 Java 并且能够利用几乎任何图形格式。特别是每个设备和 Android 操作系统版本都提供对 .bmp、.png 和 .jpg 的原生支持。您甚至可以逐字节实时创建图形。

至于一个好的图像编辑器，那里有很多。我自己经常使用 GIMP 和 Photoshop 的组合。

希望这可以帮助，

模糊逻辑

# java - 无法使用 ScaleDrawable 缩放 Drawable

> ID：10960422
> 
> 赞同：5
> 
> 时间：2012-06-09T11:01:12.037
> 
> 标签：java, android, drawable

使用 ScaleDrawable 缩放对我不起作用。
可绘制对象保持相同大小。

```
LayerDrawable layerDrawable = new LayerDrawable(layers);        
Drawable d = layerDrawable.getCurrent();
ScaleDrawable sd = new ScaleDrawable(d, 0, 0.01f, 0.01f); 
return sd.getDrawable(); 
```

我需要做什么来修复它？
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:41:53.043

您需要设置[级别](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#setLevel%28int%29)：

```
LayerDrawable layerDrawable = new LayerDrawable(layers);        
Drawable d = layerDrawable.getCurrent();
ScaleDrawable sd = new ScaleDrawable(d, 0, 0.01f, 0.01f); 
sd.setLevel(8000);
return sd; 
```

级别范围从 0 到 10000：在 10000 时为全尺寸，在 0 时根本不出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T21:04:50.303

如果您检查[参考](http://developer.android.com/reference/android/graphics/drawable/ScaleDrawable.html)，`ScaleDrawable`您将看到该`getDrawable`方法返回基本可绘制对象。也就是说，它会`d`在您的情况下返回。您应该返回`sd`，因为它已经是一个`Drawable`.

# objective-c - Macos x 应用程序的快捷方式

> ID：10960423
> 
> 赞同：4
> 
> 时间：2012-06-09T11:01:23.907
> 
> 标签：objective-c, xcode, macos, cocoa

我需要阅读 MAC OS 中最前面的应用程序的所有快捷方式。Cocoa，Objective-c中是否有提供此功能的API或类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T06:08:55.113

Accessibility API 是您所需要的。不幸的是，它相当复杂，最好通读 UIElementInspector[源代码](http://developer.apple.com/library/mac/#samplecode/UIElementInspector/Introduction/Intro.html)以了解它是如何使用的，以及[Mac 的 Accessibility Programming Guidelines](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Accessibility/cocoaAXIntro/cocoaAXintro.html#//apple_ref/doc/uid/10000118-SW1)中与辅助应用程序相关的部分。

您想要的将需要大量代码，因此我将概述这些步骤。

1.  用于获取应用程序列表，并获取属性为`[[NSWorkspace sharedWorkspace] runningApplications]`的应用程序。`active``YES`
2.  `NSRunningApplication`使用'`processIdentifier`属性获取该应用程序的 PID 。
3.  现在我们进入可访问性，通过[应用程序服务](https://developer.apple.com/library/mac/#documentation/Accessibility/Reference/AccessibilityLowlevel/index.html#//apple_ref/doc/uid/TP40001097)API访问
4.  使用 AXUIElement 创建一个表示活动应用程序的 AXUIElement [`AXUIElementCreateApplication`](https://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityLowlevel/AXUIElement_h/CompositePage.html#//apple_ref/c/func/AXUIElementCreateApplication)，它`pid`作为参数。
5.  现在你有了一个`AXUIElement`with`Application`角色，或`AXApplication`伪类。你会想要继续向下元素的层次结构`AXApplication`-> `AXMenuBar`-> `AXMenuBarItem`-> `AXMenuItem`。请注意，`AXMenuItems`可以有其他`AXMenuItems`嵌套在它们之下。
6.  要遍历层次结构，请使用[`AXUIElementCopyAttributeValues`](https://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityLowlevel/AXUIElement_h/CompositePage.html#//apple_ref/c/func/AXUIElementCopyAttributeValues)获取 的值[`kAXChildrenAttribute`](http://developer.apple.com/library/mac/documentation/Accessibility/Reference/AccessibilityCarbonRef/Reference/reference.html#//apple_ref/c/macro/kAXChildrenAttribute)。这将返回一个 children 数组`AXUIElements`。
7.  最后，当您到达`AXMenuItem`元素时，检查它们的菜单项 Cmd 字符、字形、修饰符和虚拟键属性以获取实际快捷方式。属性名称的常量，如，在[此处](http://developer.apple.com/library/mac/documentation/UserExperience/Reference/Accessibility_RoleAttribute_Ref/Attributes.html#//apple_ref/doc/uid/TP40007870-Attributes-AXMenuItemCmdChar)`kAXMenuItemCmdCharAttribute`列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T06:19:52.630

不想竞争@woody :)

但我发现了这一点，它也可能有帮助：

[用户界面浏览器](http://pfiddlesoft.com/uibrowser/index.html)

# c# - 从 sql server 迁移到大型数据集的 sqlite 的最快方法

> ID：10960433
> 
> 赞同：13
> 
> 时间：2012-06-09T11:03:25.400
> 
> 标签：c#, .net, sql-server, sqlite, data-migration

我有一个包含超过 3200 万条记录的数据库，我必须将它从 SQL Server 迁移到 Sqlite。

我在这篇文章 [http://dbauman.blogspot.com/2009/03/connecting-to-sqlite-through-ssis.html的帮助下尝试了 SSIS（SQL Server 集成服务）](http://dbauman.blogspot.com/2009/03/connecting-to-sqlite-through-ssis.html)

但是这个过程非常非常慢，我该如何迁移这些数据？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-09T12:29:23.897

有一个 C# 实用程序可以通过 liron 自动执行从 SQL Server DB 到 SQLite DB 的转换。

[这](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)是代码项目文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:29:17.033

我建议在 SQLite 中使用事务，否则索引是在添加每条新记录时构建的，而不是在完成一个工作块时。

由于我不了解您的数据结构，因此很难给出具体建议，但是编写一个可以从 SQLServer 读取并写入 SQLite 的小型应用程序通常是迁移的实际开始。迁移后有一个完整的包装器，您可以在将来使用它。

# .net - 多应用程序缓存 - WCF？

> ID：10960439
> 
> 赞同：1
> 
> 时间：2012-06-09T11:04:40.360
> 
> 标签：.net, wcf, caching

我正在设计一个共享的“服务/应用程序”，用于缓存 .NET 对象并从多个应用程序（asp.net、winforms ...）访问它们。WCF 方法是一个不错的选择吗？我还想允许应用程序的事件订阅知道缓存对象何时更改，或类似的事情。

你怎么看？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T14:40:51.753

您要问的是名为分布式缓存。

[http://msdn.microsoft.com/en-us/magazine/dd942840.aspx](http://msdn.microsoft.com/en-us/magazine/dd942840.aspx)

在像你这样的场景中，最有效的解决方案是使用一些现有的系统，而不是发明自己的自行车。

MS 最近开发了自己的实现分布式缓存的软件。软件名称为 AppFabric。实际版本是 1.1。它可以免费使用。

AppFabric 包含几个功能。你需要关注`AppFabric 1.1 Caching Features`

检查这个：

[http://msdn.microsoft.com/en-us/library/hh334305](http://msdn.microsoft.com/en-us/library/hh334305) - 缓存功能架构概述

[http://www.microsoft.com/en-us/download/details.aspx?id=19603](http://www.microsoft.com/en-us/download/details.aspx?id=19603) - 样本

# php - mysql循环和格式化结果

> ID：10960442
> 
> 赞同：-1
> 
> 时间：2012-06-09T11:05:05.557
> 
> 标签：php, mysql, css

我有这个代码

```
$query = mysql_query("SELECT * FROM my_table ORDER BY id ASC");
$i=0;
while($row = mysql_fetch_array($query)){
    if ($i%2==0) {
        <div class="main">
            <div class="wrapper-main">
    }
       <article>test string1</article>
       <article>test string2</article>
if ($i++%2==1) {
            </div>
        </div>
    }  
} 
```

当结果计数是对数但如果是奇数，则“div”未关闭时，这项工作非常完美。如何解决？

我的结果必须是：

```
 <div class="main">
     <div class="wrapper-main">
         <article>test string1</article>
         <article>test string2</article>
     </div>
 </div>
 <div class="main">
     <div class="wrapper-main">
         <article>test string1</article>
     </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:25:57.290

您的第二个测试在增加它的值`$i` *之前*评估它的值（您可能想在谷歌上搜索“post increment”）。`$i`因此，当奇怪的时候，你不要关闭你的 div 。你实际上在偶数时关闭了一个不存在的 div `$i`！

将您的第二个测试从

```
if ($i++%2==1) 
```

至

```
if ($i++%2==0) 
```

我可以建议我的偏好（为了清楚起见）：

```
if ($i%2==0) {
    // close your divs
}
$i++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:10:12.380

您可以在 while 循环之后添加以下内容：

```
if ($i%2==1) {
            </div>
        </div>
    } 
```

# ios - AVAudioSession 的 iOS 错误

> ID：10960447
> 
> 赞同：1
> 
> 时间：2012-06-09T11:05:36.790
> 
> 标签：ios, audiotoolbox, avaudiosession

我的用户不断收到此错误，我无法在模拟器或我的设备上重现它。我没有实现 AVAudioSessionDelegate （可能命名不同），我总是使用应用程序默认的 AVAudioSession，从不创建一个新的。

关于可能导致它的任何建议？

```
0   libobjc.A.dylib 0x31ca5fbc objc_msgSend + 15
1   AudioToolbox 0x3677ff27 _ZN29AudioSessionPropertyListeners24CallPropertyListenersImpEmmPKv + 274
2   AudioToolbox 0x36780205 _ZN29AudioSessionPropertyListeners21CallPropertyListenersEmmPKv + 240
3   AudioToolbox 0x3677de81 SSServer_AudioSessionInterruptionListenerMessage + 56
4   AudioToolbox 0x36726483 _XAudioSessionInterruptionListenerMessage + 62
5   AudioToolbox 0x366bb373 mshMIGPerform + 374
6   CoreFoundation 0x38199553 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
7   CoreFoundation 0x381994f5 __CFRunLoopDoSource1 + 140
8   CoreFoundation 0x38198343 __CFRunLoopRun + 1370
9   CoreFoundation 0x3811b4dd CFRunLoopRunSpecific + 300
10  CoreFoundation 0x3811b3a5 CFRunLoopRunInMode + 104
11  GraphicsServices 0x37c99fcd GSEventRunModal + 156
12  UIKit 0x355ab743 UIApplicationMain + 1090
13  Accentuate! 0x395f main (main.m:14) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:23:14.510

我们刚刚跟踪了一次非常相似的崩溃。

我们的结果如下所述：

[https://github.com/mattgallagher/AudioStreamer/issues/6](https://github.com/mattgallagher/AudioStreamer/issues/6)

特别是 MyAudioSessionInterruptionListener（或传递给 AudioSessionInitialize 的回调的名称）及其 inClientData 在注册后无法更改，因此即使底层对象已被释放，回调也必须始终做一些明智的事情。

为 AudioStream 建议的解决方案是使用静态变量，并确保它指向当前对回调感兴趣的对象，而不是指向已释放的对象 - 重要的是不要使用 inClientData。

# android - 当我从我的 Android 库运行时，我可以配置 Eclipse 以运行我的 Android 应用程序项目吗？

> ID：10960454
> 
> 赞同：3
> 
> 时间：2012-06-09T11:06:20.847
> 
> 标签：android, eclipse

当我在我的 Android 库和运行/调试中编辑文件时，它想要启动该库。我希望它启动 Android 应用程序（这是我工作区中的另一个项目）。

我的工作区中有三个项目：库、完整应用程序、精简应用程序。完整的和精简的应用程序只是库的包装器，允许我构建两个版本。

谢谢！将要

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-09T12:11:58.677

只需右键单击您要运行的项目并运行它

或者在你要运行的项目中打开一个类，然后点击运行

或者有时它通过选择项目的文件夹（在包资源管理器中）然后单击运行来工作

# ios - 在 IOS 应用程序中添加音频文件会增加应用程序大小超过音频文件大小

> ID：10960457
> 
> 赞同：1
> 
> 时间：2012-06-09T11:06:50.143
> 
> 标签：ios, avaudioplayer

我的 IOS 应用程序大小为 2 MB。我正在尝试添加一个大小为 2.8 MB 的 .m4a 文件。但是当我在 xcode 中存档应用程序时，该应用程序的估计应用程序商店大小从 2 MB 增加到 7.7 MB，即增加了 5.7 MB。但是我的音频文件只有 2.8 MB，所以我预计 App Store 的大小会增加大约 2.8 MB，而不是 5.7 MB。这是正常行为，我们可以忽略这个或修复这个吗？

# php - 从数组创建另一个多维数组

> ID：10960458
> 
> 赞同：-5
> 
> 时间：2012-06-09T11:06:57.053
> 
> 标签：php, arrays, multidimensional-array

假设我有一个数组

```
$x= ('A'=>31, 'B'=>12, 'C'=>13, 'D'=>25, 'E'=>18, 'F'=>10); 
```

我需要生成一个有点像这样的数组

```
$newx = (0 => array('A'=>31 , 'B' =>1) , 1 => array('B'=>11 , 'C' =>13 , 'D'=>8) , 2 =>array('D'=>17 , 'E'=>15) , 3=>array('E'=>3,'F'=>10); 
```

现在在这种情况下，每个值`$newx`都必须是`= 32`，这就是它的工作方式`$x[A] = 31 , $x[B] = 12`，所以首先我们必须使总和为 32，保持新数组的索引相同，即

```
array(0=>array('A'=>31,'B'=>1) , 1=>array('B'=>11) ) 
```

对于每个 $x 值，该过程应该继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T00:14:47.453

虽然我很确定这是一个家庭作业，但是你真的应该提供你自己的代码，至少尝试一下，我觉得这很有趣，所以我继续尝试。我想我会因为他而被否决，我可能确实应得的，但无论如何都会这样。

你需要做的是：

1.  循环遍历你的数组，
2.  确定给你 32 的元素，然后将结果存储在最终数组中。
3.  从工作数组的相应元素中减去结果中最后一个元素的值
4.  接下来通过删除第一个元素来缩小数组，直到您仍在使用的数组的第一个元素等于您最后一个结果返回的最后一个元素。
5.  如果你的最后一个结果 < 32，退出。

考虑到这一点，请先尝试自己找到解决方案，不要只是复制粘贴代码？:)

```
<?php

$x = array('A'=>31, 'B'=>12, 'C'=>13, 'D'=>25, 'E'=>18, 'F'=>10);
$result = array();

function calc($toWalk){
// walk through the array until we have gathered enough for 32, return result as   an array
$result = array();

foreach($toWalk as $key => $value){
    $count = array_sum($result);
    if($count >= 32){
        // if we have more than 32, subtract the overage from the last array element
        $last = array_pop(array_keys($result));
        $result[$last] -= ($count - 32);
        return $result;  
    }
    $result[$key] = $value;
}
return $result; 
}

// logic match first element
$last = 'A';
// loop for as long as we have an array
while(count($x) > 0){

/* 
we make sure that the first element matches the last element of the previously found array
so that if the last one went from A -> C we start at C and not at B
*/
$keys = array_keys($x);
if($last == $keys[0]){
    // get the sub-array
    $partial = calc($x);
    // determine the last key used, it's our new starting point
    $last = array_pop(array_keys($partial));
    $result[] = $partial;

            //subtract last (partial) value used from corresponding key in working array
            $x[$last] -= $partial[$last];

    if(array_sum($partial) < 32) break;
}
/* 
    reduce the array in size by 1, dropping the first element
    should our resulting first element not match the previously returned
    $last element then the logic will jump to this place again and
    just cut off another element
*/
$x = array_slice($x , 1 );
}

print_r($result); 
```

# asp.net - 在 VB.NET 项目中使用 WebActivator

> ID：10960460
> 
> 赞同：0
> 
> 时间：2012-06-09T11:07:10.847
> 
> 标签：asp.net, asp.net-mvc, vb.net, webactivator

为了使 Elmah.MVC 包也能在 VB.NET 项目中工作，我创建了 ASP.NET MVC3 VB.NET 应用程序，添加了 WebActivator Nuget 包（v.1.5.1），在 App_Start 文件夹中插入了简单的代码，比如

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(Elmah.Mvc.Web.App_Start.ElmahMvc_Start), "Start")]

namespace Elmah.Mvc.Web.App_Start
{
    public class ElmahMvc_Start
    {
        public static void Start()
        {
            Elmah.Mvc.Bootstrap.Initialize();
        }
    }
} 
```

该项目构建良好，但我从未上`Elmah.Mvc.Bootstrap.Initialize();`线。

WebActivator 是否适用于 VB.NET？如果不是，我会使用 WebActivator（Ninject、StructureMap 等）导致许多不同的项目。VB.NET 是否支持它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:46:17.880

WebActivator 应该可以在任何语言中工作，因为它是一个纯运行时组件。但我很困惑你如何最终在你的 VB 应用程序中使用这样的 C# 代码。你不应该用VB写这个吗？也许 C# 文件只是被忽略了，这就是为什么它不起作用？

# python - Matplotlib 中的非 ASCII 字符

> ID：10960463
> 
> 赞同：48
> 
> 时间：2012-06-09T11:07:24.873
> 
> 标签：python, unicode, matplotlib, ascii

我在 Matplotlib 中显示非[ASCII](http://en.wikipedia.org/wiki/ASCII)字符时遇到问题，这些字符被呈现为小框而不是正确的字体，看起来像（我用红色油漆填充了这些框以突出显示它们）：

![这是显示问题的图像](../Images/e9ecad4c10f1b644281cb13189640583.png)

我如何解决它？

一个相关的问题是*[Matplotlib 中的重音字符](https://stackoverflow.com/questions/2406700)*。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-09T11:07:25.560

这个问题实际上可能有几个不同的原因：

**默认字体不包括这些字形**

您可以使用以下方法更改默认字体（在完成任何绘图之前！）

```
matplotlib.rc('font', family='Arial') 
```

在某些版本的 matplotlib 中，您必须设置族：

```
matplotlib.rc('font', **{'sans-serif' : 'Arial',
                         'family' : 'sans-serif'}) 
```

（请注意，由于`sans-serif`在语法中包含连字符`**{}`，因此实际上是必需的。）

第一个命令将`sans-serif`字体系列更改为仅包含一种字体（在我的情况下是[Arial](http://en.wikipedia.org/wiki/Arial)），第二个命令将默认字体系列设置为`sans-serif`.

其他选项包含[在文档中](http://matplotlib.sourceforge.net/users/customizing.html)。

**您错误地创建/传递了字符串对象到 Matplotlib**

即使字体包含正确的字形，如果您忘记使用`u`创建[Unicode](http://en.wikipedia.org/wiki/Unicode)常量，Matplotlib 也会有以下行为：

```
plt.xlabel("Średnia odległość między stacjami wsparcia a modelowaną [km]") 
```

所以你需要添加`u`：

```
plt.xlabel(u"Średnia odległość między stacjami wsparcia a modelowaną [km]") 
```

另一个原因是您忘记在文件顶部放置[UTF-8](http://en.wikipedia.org/wiki/UTF-8)魔术注释（我读到这[可能是问题的根源](https://stackoverflow.com/questions/2406700/accented-characters-in-matplotlib)）：

```
# -*- coding: utf-8 -*- 
```

# windows - Windows批处理：for循环中的延迟扩展

> ID：10960467
> 
> 赞同：2
> 
> 时间：2012-06-09T11:07:36.083
> 
> 标签：windows, batch-file

我想修改几行特定行数的文本文件，我写了一个批处理文件如下：

```
@echo off
set n=0
set n1=10
set n2=40
cd.>output.txt

for /f "delims=" %%i in ('findstr /n .* test.txt') do (
set "var=%%i"
setlocal enabledelayedexpansion
set /a n=!n!+1
echo.!n!
set var=!var:*:=!
rem if !n!=%n1% ...
rem if !n!=%n2% ...
(echo.!var!)>>output.txt
endlocal
)
start output.txt 
```

但是，这并没有按预期工作。
经过一些测试，我认为`!n!`扩展通常不会延迟。这很奇怪，因为`!var!`扩展通常会延迟。

顺便说一句，`setlocal enabledelayedexpansion`and`endlocal`命令被放入`for`循环中，否则特殊字符`!`将被丢弃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:37:00.413

我想你看到的问题是`n`永远不会增加。

但这不是延迟扩展的问题，这是`setlocal/endlocal`循环内部块的影响。
正如@panda-34 提到的，您应该使用扩展语法`set/a`并将语句移到`setlocal/endlocal`块外。

```
@echo off
set n=0
set n1=10
set n2=40

(
  for /f "delims=" %%i in ('findstr /n .* test.txt') do (
    set "var=%%i"
    set /a n+=1
    setlocal enabledelayedexpansion
    echo !n!
    set var=!var:*:=!
    rem if !n!=%n1% ...
    rem if !n!=%n2% ...
    (echo(!var!)
    endlocal
  )
) >output.txt
start output.txt 
```

# html - 下拉式菜单。让它显示 onclick 而不是 onmouseover

> ID：10960470
> 
> 赞同：0
> 
> 时间：2012-06-09T11:07:50.020
> 
> 标签：html, css, drop-down-menu, touchscreen

我正在使用此动态驱动器下拉菜单（[http://www.dynamicdrive.com/dynamicindex1/chrome/](http://www.dynamicdrive.com/dynamicindex1/chrome/) ---- js 源代码位于[http://www.dynamicdrive.com/dynamicindex1/chrome/chromejs/chrome.js](http://www.dynamicdrive.com/dynamicindex1/chrome/chromejs/chrome.js) ) 在我的页面上。

作者说：现在添加到菜单的所有事件处理程序都不显眼，允许您在菜单项上定义自己的“onmouseover”或“onclick”事件*（但他没有向像我这样的新手解释如何）*。

这是代码的一部分：

```
<div class="chromestyle" id="chromemenu">
    <ul>
        <li><h2><a href="#" rel="dropmenu1">Me&amp;myself</a></h2></li>
        <li><h2><a href="#" rel="dropmenu2">Napoli</a></h2></li>
        <li><h2><a href="#" rel="dropmenu3">Technology</a></h2></li>
        <li><h2><a href="/ufo.php">UFO</a></h2></li>
        <li><h2><a href="#" rel="dropmenu4">Anime</a></h2></li>
        <li><h2><a href="/maps/map.php">Cartine geografiche</a></h2></li>
        <li><h2><a href="/calcio.php">Il calcio</a></h2></li>
    </ul>
</div>

<!--1st drop down menu -->                                                   
    <div id="dropmenu1" class="dropmenudiv">
    <a href="/">.: Home</a>
    <a href="/interess.php">.: About me</a>
    <a href="/blog/">.: My Blog</a>
    <a href="/gallery/">.: My Photo Gallery</a>
    <a href="/guestbook/guestbook.php">.: My Guestbook</a>
</div> 
```

问题是触摸屏设备无法显示下拉菜单，因为您没有鼠标，只能点击屏幕，因此我想让下拉菜单可点击，因为我已经编写了合适的手机css 样式表。

我没有运气用谷歌搜索，并尝试将 onclick="" 替换为 rel="" 但不幸的是它没有用。

有什么提示吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:23:14.843

这个下拉菜单的 js 似乎最后一次更新是在 2008 年，所以要小心它与现代浏览器和技术的兼容性。

我建议谷歌搜索更新的下拉 js 解决方案。

或者

你可以看看这个下拉解决方案列表（[http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/](http://www.1stwebdesigner.com/css/38-jquery-and-css-drop-down-multi-level-menu-solutions/)）列表已更新仅在上个月，仔细研究一下，您可能会找到比 Dynamic Drive 下拉菜单更好的解决方案。

# php - 将数据从php传回ajax

> ID：10960471
> 
> 赞同：9
> 
> 时间：2012-06-09T11:07:50.443
> 
> 标签：php, javascript, ajax, jquery

如何将数据从然后行的 php 传递回 ajax？

PHP

```
$query = 'SELECT * FROM picture order by rand() LIMIT 10';
$result = mysql_query($query);

while ($rec = mysql_fetch_array($result,  MYSQL_ASSOC)) {

$url[]=$rec['pic_location'];
$name[]=$rec['name'];
$age[]=$rec['age'];
$gender[]=$rec['gender'];

}

echo json_encode($url);
echo json_encode($name);
echo json_encode($age);
echo json_encode($gender); 
```

阿贾克斯

```
$(".goButton").click(function() {
   var dir =  $(this).attr("id");
   var imId = $(".theImage").attr("id");

   $.ajax({
      url: "viewnew.php",
      dataType: "json",
      data: {
         current_image: imId,
         direction    : dir
      },
      success: function(ret){
          console.log(ret);
          var arr = ret;
          alert("first image url: " + arr[0][0] + ", second image url: " + arr[0][1]);  // This code isnt working
          alert("first image Name: " + arr[1][0] + ", second image name: " + arr[1][1]);
          $(".theImage").attr("src", arr[0]);
          if ('prev' == dir) {
            imId ++;
         } else {
            imId --;
         }
         $("#theImage").attr("id", imId);
      }
   });

});
});
</script> 
```

我的问题是如何在此处显示值？警报消息给我“未定义”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-09T11:39:53.947

你可以按照这些思路做一些事情。

# PHP

```
$query = 'SELECT * FROM picture order by rand() LIMIT 10';
$res = mysql_query($query);

$pictures = array();
while ($row = mysql_fetch_array($res)) {
  $picture = array(
    "pic_location" => $row['pic_location'],
    "name"         => $row['name'],
    "age"          => $row['age'],
    "gender"       => $row['gender']
  );
  $pictures[] = $picture;
}

echo json_encode($pictures); 
```

# JS

```
...
$.ajax({
  ...
  dataType: "json",
  ...
  success: function(pictures){
    $.each(pictures, function(idx, picture){
      // picture.pic_location
      // picture.name
      // picture.age
      // picture.gender
    });
  }
});
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T11:19:47.823

您可以使用单个数组轻松完成此操作：

```
$pics = array();

while ($rec = mysql_fetch_array($result, MYSQL_ASSOC)) {
  $pics[$rec['id']]['url'] = $rec['pic_location'];
  $pics[$rec['id']]['name']=$rec['name'];
  $pics[$rec['id']]['age']=$rec['age'];
  $pics[$rec['id']]['gender']=$rec['gender'];
}

echo json_encode($pics); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T11:12:10.047

您不能`echo`为 AJAX 响应放置多个语句：

```
echo json_encode($url);
echo json_encode($name);
echo json_encode($age);
echo json_encode($gender); 
```

加入您的数组并发送一个响应：

```
$arr = $url + $name + $age + $gender;
echo json_encode($arr); 
```

# deployment - 重新部署 Glassfish 应用程序时如何显示“应用程序已关闭以进行升级”消息？

> ID：10960474
> 
> 赞同：2
> 
> 时间：2012-06-09T11:08:01.877
> 
> 标签：deployment, glassfish

我试图在重新部署或重新加载过程中访问 Web 应用程序，但我收到了 404 错误。如果用户碰巧看到它，这可能会导致浪费时间的帮助台呼叫。如何将 404 消息替换为更有帮助的内容，例如“此应用程序正在升级 - 一两分钟后再回来查看”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:18:32.730

您可能需要考虑查看应用程序版本控制功能来“预部署”应用程序以最大程度地减少影响。

部署您的应用程序：
$ asadmin deploy myapp.war

以“禁用”模式部署 version2，这意味着旧版本仍然处于活动状态：
$ asadmin deploy --enabled=false --name myapp:version2 myapp.war（version2 是任意名称）

准备好激活 version2 时：
$ asadmin enable myapp:version2

这种方法的好处是，如果您遇到版本 2 的问题，您总是可以回退到原始版本：

$ asadmin 启用 myapp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:49:22.780

您还可以在服务器配置中自定义标准响应代码（403、404 等）。简单的更改是更改消息文本，但它并不像您要查找的那样优雅。但是，总会有一点环境会返回 404、503 等，因此除了@Mark O'Connor 提供的“代理背后”答案之外，您还可以考虑添加这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T20:42:31.653

我通常将我的 webapps 部署在[Apache 代理](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)后面。当应用服务器关闭时，Apache 返回 503 响应。

这可以使用替代的“对不起，我们正在维护”消息进行[自定义](http://www.electrictoolbox.com/503-header-apache-htaccess/)

# python - 如何读取目录中的文件属性？

> ID：10960477
> 
> 赞同：19
> 
> 时间：2012-06-09T11:08:13.190
> 
> 标签：python, file

例如：

```
import os
print(os.listdir("path/to/dir")) 
```

将列出目录中的文件。

如何获取目录中所有文件的文件修改时间？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-09T11:09:50.403

在查找目录中所有文件的文件属性时，并且您使用的是 Python 3.5 或更高版本，请使用该[`os.scandir()`函数](https://docs.python.org/3/library/os.html#os.scandir)获取*包含文件属性组合*的目录列表。这可能比使用`os.listdir()`然后分别检索文件属性更有效：

```
import os

with os.scandir() as dir_entries:
    for entry in dir_entries:
        info = entry.stat()
        print(info.st_mtime) 
```

该[`DirEntry.stat()`函数](https://docs.python.org/3/library/os.html#os.DirEntry.stat)在 Windows 上使用时，无需进行任何额外的系统调用，文件修改时间已经可用。数据被缓存，因此额外的`entry.stat()`调用不会进行额外的系统调用。

您还可以使用[`pathlib`模块](https://docs.python.org/3/library/pathlib.html)面向对象的实例来实现相同的目的：

```
from pathlib import Path

for path in Path('.').iterdir():
    info = path.stat()
    print(info.st_mtime) 
```

在早期的 Python 版本中，您可以使用[`os.stat`](http://docs.python.org/library/os.html#os.stat)调用来获取文件属性，例如修改时间。

```
import os

for filename in os.listdir():
    info = os.stat(filename)
    print(info.st_mtime) 
```

`st_mtime`是 python 2.5 及更高版本上的浮点值，表示自纪元以来的秒数；使用[`time`](http://docs.python.org/library/time.html)或[`datetime`](http://docs.python.org/library/datetime.html)模块来解释这些以用于显示目的或类似目的。

请注意，该值的精度取决于您使用的操作系统：

> st_atime、st_mtime 和 st_ctime 属性的确切含义和分辨率取决于操作系统和文件系统。例如，在使用 FAT 或 FAT32 文件系统的 Windows 系统上，st_mtime 的分辨率为 2 秒，而 st_atime 的分辨率仅为 1 天。有关详细信息，请参阅您的操作系统文档。

如果您所做的只是获取修改时间，那么该[`os.path.getmtime`](http://docs.python.org/library/os.path.html#os.path.getmtime)方法是一个方便的捷径；它使用`os.stat`引擎盖下的方法。

但是请注意，该`os.stat`调用相对昂贵（文件系统访问），因此如果您对大量文件执行此操作，并且每个文件需要多个数据点，则最好使用`os.stat`和重用返回的信息，而不是使用每个文件将被多次调用的`os.path`便捷方法。`os.stat`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T11:59:58.913

如果您只想要修改后的时间，那么`os.path.getmtime(filename)`将为您获取。如果您使用`listdir`参数，您还需要使用`os.path.join`：

```
import os, os.path

for filename in os.listdir(SOME_DIR):
    print os.path.getmtime(os.path.join(SOME_DIR, filename)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-22T12:41:45.647

扩展 Martijn Pieters 的答案，值得注意的是`os.scandir`它不是递归的，这意味着它不能保证`DirEntry.stat()`所请求目录的子目录中的文件的最新数据。

如果您正在寻找递归解决方案，使用`os.scandir`仍然可以比基于`os.walk`. 这是一个递归返回目录的最后修改时间的示例，包括所有嵌套文件和子目录：

```
import os

def get_mtime(path, is_root=True):
    """Returns the last modified time for all files recursively within the `path` directory."""
    mtimes = []

    with os.scandir(path) as entries:
        for entry in entries:
            if entry.is_dir():
                mtimes.extend(get_mtime(entry.path, is_root=False))
            else:
                mtimes.append(entry.stat().st_mtime)

    return max(mtimes) if is_root else mtimes 
```

这可以修改为聚合其他特定用例的相关数据。

# php - 当有可用的更新图像时，如何防止旧图像出现在页面重新加载中

> ID：10960478
> 
> 赞同：0
> 
> 时间：2012-06-09T11:08:42.497
> 
> 标签：php, javascript, jquery, image, refresh

我经常需要更新我网站上的主要图片，用户会访问该网站，但除非他们手动点击刷新，否则这些图片不会是更新版本。即使我输入“请点击刷新以查看更新的图像”，用户也会忽略这一点，我必须通过电子邮件发送给他们以点击刷新按钮。我尝试使用像这样的 Javascript 将初始 index.html 重新加载到实际站点

初始 index.html：

```
document.location.href='index2.php?code=reload_page' 
```

然后在 index2.php 上：

```
$the_code = $_GET['code'];

  if($the_code == "reload_page")
    {
     $page = $_SERVER['PHP_SELF'];
     $sec = "1";
     header("Refresh: $sec; url=$page");
    }
  else
    {
      //load page regular
    } 
```

我试过这样，但它没有用，在你点击刷新按钮之前仍然有旧图像。使用 PHP 或 javascript/jquery 完成此任务的任何其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:17:47.593

图像不刷新的问题可能是 Web 浏览器或服务器代理等中的缓存问题。这是配置问题，可能不依赖于您。绕过这个的简单技巧是将时间戳添加到 img url。每次重新生成内容时，`index.php`只需向图像添加一些查询字符串，如下所示：

```
<?php
echo '<img src="my_image.png?ts='.time().'" />';
?> 
```

它会欺骗您的浏览器和代理，使其成为另一个图像并阻止缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:14:18.847

您可以使用计时器重新加载图像并通过 AJAX 请求从其他页面获取它们：

```
setInterval(function(){ 
  $.ajax({
    url: 'index2.php'
  }).done(function ( data ) {
    $('#image-div').html(data);
  }); 
}, 10000); // wait 10 seconds 
```

看看[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T11:18:50.520

将以下内容放在页面的头部，这将每 5 秒重新加载一次您的内容。

```
<meta http-equiv="refresh" content="5"> 
```

如果浏览器仍然缓存图像，因为 url 没有更改，则在图像 url 的末尾放置一个随机查询字符串。您可以使用时间戳。

```
<img src="image.jpg?<?php echo time(); ?>"> 
```

# javascript - 为什么一个 ko.mapping.fromJS 工作而另一个不工作？

> ID：10960479
> 
> 赞同：3
> 
> 时间：2012-06-09T11:08:51.803
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, knockout.js

我有一个名为 Foo 的类，而 Foo 包含模型。我正在对 Foo 执行 ko.applyBinding。Foo 类有一个从服务器检索 JSON 的函数，然后我这样做：

```
 self.Model = ko.mapping.fromJS(result); 
```

其中 self 是 Foo 的实例，结果是 JSON。这第一次有效。但是，当我从服务器检索第二项数据时，它就不起作用了。

但是如果以上行改为：

```
 self.Model = ko.mapping.fromJS(result, {}, self); 
```

有用。

谁能告诉我为什么第一个不工作而第二个工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T21:18:11.500

你的第二行应该是：

```
ko.mapping.fromJS(result, {}, self.Model); 
```

# emacs - 我应该使用什么作为 emacs 前奏的配置/设置文件？

> ID：10960481
> 
> 赞同：7
> 
> 时间：2012-06-09T11:09:03.420
> 
> 标签：emacs, emacs-prelude

我想添加一个钩子，这样每次我打开一个新文件时，都会启用弹丸。但是，我不知道在哪里添加它以便 emacs 读取它。有什么提示吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T11:26:42.310

这*肯定*在 Prelude 的文档中？如果没有，我建议你写信给作者建议添加它。

`init.el`我在其文件中注意到以下内容：

```
(defvar prelude-personal-dir (concat prelude-dir "personal/")
  "Users of Emacs Prelude are encouraged to keep their personal configuration
changes in this directory. All Emacs Lisp files there are loaded automatically
by Prelude.") 
```

`personal`因此，如果它不存在，您应该创建一个子目录，并`*.el`在该目录中创建您喜欢的任何文件名，用于您自己的自定义。

# php - 使用 jQuery 确定根据其顺序发送的按钮

> ID：10960487
> 
> 赞同：0
> 
> 时间：2012-06-09T11:10:07.520
> 
> 标签：php, jquery, forms, post, radio-button

**问题：**

根据订单确定发送了哪个单选按钮，并使用 PHP 提交值。

**HTML表1代码：**

```
<table class="table table-bordered neutralize" id="itembuttons">
    <thead>
        <tr>
            <th><input type="radio" name="3" id="3" value="6"></th>
            <th><input type="radio" name="3" id="3" value="7"></th>
            <th><input type="radio" name="3" id="3" value="8"></th>
            <th><input type="radio" name="3" id="3" value="9"></th>
            <th><input type="radio" name="3" id="3" value="10"></th>
        </tr>
    </thead>
</table> 
```

**HTML表2代码：**

```
<table class="table table-bordered neutralize" id="itembuttons">
    <thead>
        <tr>
            <th><input type="radio" name="3" id="3" value="11"></th>
            <th><input type="radio" name="3" id="3" value="12"></th>
            <th><input type="radio" name="3" id="3" value="13"></th>
        </tr>
    </thead>
</table> 
```

**设想：**

上面的代码将在 PHP 中生成一个名为“3”的 POST 变量，它的值在表 1 中的 6 到 10 或表 2 中的 11 和 13 之间。但是，我希望 jQuery 确定实际选择了哪个按钮。因此，例如，如果我选择第三个按钮（值 = 8 或值 = 13）），那么值 3 应该在隐藏的输入字段中发送。如果选择了第 5 个按钮（值 = 10），则应在隐藏的输入字段中发送值 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:22:31.130

试试这个 - [http://jsfiddle.net/Xa42c/](http://jsfiddle.net/Xa42c/)

```
$("input[type=radio]").on("click", function(e) {
    $("input[type=hidden]").val( $(this).val() );

    alert( "Hidden field value is set to " + $(this).val() );
});​ 
```

请注意，您不需要`id`-s。但是如果你想使用它们，它们**必须**是唯一的

**更新**获取位置使用`index()`- [http://jsfiddle.net/Xa42c/2/](http://jsfiddle.net/Xa42c/2/)

```
$("input[type=radio]").on("click", function(e) {
    var index = $("input[type=radio]").index(this) + 1;
    $("input[type=hidden]").val( index );

    alert( "Hidden field value is set to " + index );
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:20:27.403

您的代码的问题是 id 不是唯一的。尝试改变它们。如果您需要一些通用名称，您可以使用表的名称属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T18:13:07.910

**最终解决方案：**

```
$(document).ready(function() {
    $('input[type=radio]', $('#itembuttons')).click(
        function() {
            var pos = $(this).parent().index() + 1;
            $('#hdnQuestion').val(pos);
            alert( 'The ' + $('#hdnQuestion').attr('name') + ' value is now ' + $('#hdnQuestion').val() );
        }
    );
}); 
```

# configuration - 结构图根据生命周期实例化不同的类

> ID：10960489
> 
> 赞同：1
> 
> 时间：2012-06-09T11:10:14.883
> 
> 标签：configuration, structuremap

配置结构映射以根据生命周期实例化不同类的最佳方法是什么。

例如对于 IUser，当它是 HTTP 上下文时，我想实例化一个 User 类，如果没有 Http 上下文我希望结构映射实例化一个 ServiceUser 类？

# unix - "grep | xargs grep" 不同字符串的搜索条件

> ID：10960494
> 
> 赞同：1
> 
> 时间：2012-06-09T11:10:56.583
> 
> 标签：unix, search, grep

我想 grep 包含文本“wp_”但不包含文本“wp3_”的文件。例如，我有一个包含两个字符串的文件：

> wp_123
> 
> wp3_123

我试试`$ grep -lr wp_ ~/tmp | xargs grep -vl wp3_`

它输出这个文件名！但是如果我删除换行符，它就会像我想要的那样工作，即正确处理字符串“wp_123 wp3_123”。

如何使其适用于不同字符串的搜索条件？

PS抱歉有点重复，但似乎没有人在最后一小时注意到[我的评论......](https://stackoverflow.com/questions/10959666/another-grep-advanced#comment-14308071)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:23:24.410

这应该工作

```
$ grep -lr 'wp_' ~/tmp | xargs grep -L 'wp3_' 
```

在这种情况下，单引号不是必需的，但它是防止模式字符被 shell 解释的好习惯。在您最初的尝试中， -vl 的意思是“打印每个文件至少有一行不匹配”。在这里，-L 的意思是“打印没有匹配的行的每个文件”。

# c++ - 在 C++ 中解析设备文件的 ASCII 输出

> ID：10960495
> 
> 赞同：0
> 
> 时间：2012-06-09T11:11:06.490
> 
> 标签：c++, parsing, ascii, device

我为 USB 设备编写了内核空间驱动程序。例如，如果它已连接，它会挂载到 /dev/myusbdev0。通过带有 echo -en "command" > /dev/myusbdev0 的命令行，我可以向设备发送命令并使用 cat /dev/myusbdev0 读取结果。

好的，现在我必须编写一个 C++ 程序。起初我会打开设备文件进行读/写：

```
int fd = open("/dev/echo", O_RDRW); 
```

之后，将发送一个 cmd 以使设备正常工作：

```
char cmd[] = { "\x02sEN LMDscandata 1\x03" };
write(fd, cmd, sizeof(cmd)); 
```

现在我到了我现在不知道如何处理的部分。我现在需要从设备中读取数据，因为它会不断地向我发送数据。我现在需要读取和解析这些数据......

```
char buf[512];
read(fd, buf,  sizeof(buf); 
```

数据如下所示，每个都以 \x02 开头并以 \x03 结尾，它们的大小并不总是相同：

> SRA LMDscandata 1 1 89A27F 0 0 343 347 27477BA9 2747813B 0 0 7 0 0 1388 168 0 1 DIST1 3F800000 00000000 186A0 1388 15 8A1 8A5 8AB 8AC 8A6 8AC 8B6 8C8 8C2 8C9 8CB 8C4 8E4 8E1 8EB 8E0 8F5 908 8FC 907 906 0 0 0 0 0 0 所有值用 20hex {SPC} 分隔

它认为我需要某种 while 循环来不断地从 \x02 读取数据，直到我读取 \x03。如果我有一个完整的扫描，我需要在其单独的部分（一些变量 uint_16、uint_8、enum_16、...）中解析这个 ascii 消息。

知道如何将完整扫描读入 buf[] 然后解析其组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:21:49.683

正如您所说的设备正在连续发送，我建议添加一个队列来保存进入的块，并进行一些分派来取出队列的一部分，即 x02 到 x03，将完成的工作与接收块分离。

此外，您可以让单个对象处理从 x02 到 x03 的一个完整块，也许是线程化的（对于给定的信息是有意义的）。

设备 => 块读取器 => 输入队列 => 输入器读取器 => 数据处理

希望这可以帮助

# node.js - Foreman + NodeJS + MongoSkin：如何从 mongo cli 连接到 mongodb？

> ID：10960502
> 
> 赞同：0
> 
> 时间：2012-06-09T11:11:52.370
> 
> 标签：node.js, mongodb, foreman, mongoskin

我有一个使用工头 + nodejs + mongoskin 的简单 helloworld 项目。它从 http get 请求中获取一些数据，并通过 mongoskin 将其放入 mongodb。该应用程序有效，但我无法使用 mongo cli 连接到数据库。当我使用 mongoskin 使用的相同连接 url 启动它时，我有一个例外：连接失败。

# java - 替代 java.awt.imageproducer for android

> ID：10960504
> 
> 赞同：2
> 
> 时间：2012-06-09T11:12:07.690
> 
> 标签：java, android, awt

我正在尝试使用stackoverflow上的指南来实现一些ocr。使用该应用程序的示例代码正在使用 java，我正在尝试在 android 上运行它。这是示例中的代码；

```
 // OCRScannerDemo.java
// Copyright (c) 2003-2009 Ronald B. Cemer
// All rights reserved.
/*
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 2 of the License.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

package com.roncemer.ocr.main;

import java.awt.Frame;
import java.awt.Image;
import java.awt.MediaTracker;
import java.awt.ScrollPane;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.ImageProducer;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.HashMap;

import com.roncemer.ocr.CharacterRange;
import com.roncemer.ocr.OCRImageCanvas;
import com.roncemer.ocr.OCRScanner;
import com.roncemer.ocr.PixelImage;
import com.roncemer.ocr.TrainingImageLoader;
import com.roncemer.ocr.tracker.MediaTrackerProxy;

/**
  * Demo application to demonstrate OCR document scanning and decoding.
  * @author Ronald B. Cemer
  */
public class OCRScannerDemo extends Frame {

    private static final long serialVersionUID = -8030499184564680363L;

    private boolean debug = true;

    private Image image;
    private OCRImageCanvas imageCanvas;
    private OCRScanner scanner;

    public OCRScannerDemo() {
        super("OCR from a scanned image");
        setSize(1024, 768);
        ScrollPane scrollPane = new ScrollPane();
        imageCanvas = new OCRImageCanvas();
        scrollPane.add(imageCanvas);
        add(scrollPane);
        addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                ((Frame)(e.getSource())).hide();
                System.exit(0);
            }
        });
        scanner = new OCRScanner();
        show();
    }

    /**
      * Load demo training images.
      * @param trainingImageDir The directory from which to load the images.
      */
    public void loadTrainingImages(String trainingImageDir) {
        if (debug) System.err.println("loadTrainingImages(" + trainingImageDir + ")");
        if (!trainingImageDir.endsWith(File.separator)) {
            trainingImageDir += File.separator;
        }
        try {
            scanner.clearTrainingImages();
            TrainingImageLoader loader = new TrainingImageLoader();
            HashMap images = new HashMap();
            if (debug) System.err.println("ascii.png");
            loader.load(
                this,
                trainingImageDir + "ascii.png",
                new CharacterRange('!', '~'),
                images);
            if (debug) System.err.println("hpljPica.jpg");
            loader.load(
                this,
                trainingImageDir + "hpljPica.jpg",
                new CharacterRange('!', '~'),
                images);
            if (debug) System.err.println("digits.jpg");
            loader.load(
                this,
                trainingImageDir + "digits.jpg",
                new CharacterRange('0', '9'),
                images);
            if (debug) System.err.println("adding images");
            scanner.addTrainingImages(images);
            if (debug) System.err.println("loadTrainingImages() done");
        }
        catch(IOException ex) {
            ex.printStackTrace();
            System.exit(2);
        }
    }

    public void process(String imageFilename) {
        if (debug) System.err.println("process(" + imageFilename + ")");
        String imageFileUrlString = "";
        try {
            imageFileUrlString = new File(imageFilename).toURL().toString();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        try {
            ImageProducer imageProducer = (ImageProducer)
                (new URL(imageFileUrlString).getContent());
            image = createImage(imageProducer);
        }
        catch(IOException e) {
            e.printStackTrace();
        }
        if (image == null) {
            System.err.println("Cannot find image file at " + imageFileUrlString);
            return;
        }
        MediaTracker mt = new MediaTrackerProxy(this);
        mt.addImage(image, 0);
        try {
            mt.waitForAll();
        } catch(InterruptedException ex) {}
        if (debug) System.err.println("image loaded");

/*  int w = image.getWidth(null);
    int h = image.getHeight(null);
    if ( (w > 0) && (h > 0) ) {
        float scaleFactor = 2048.0f/(float)Math.max(w, h);
        if (scaleFactor < 1.0f) {
        image = image.getScaledInstance(
            (int)((float)w*scaleFactor),
            (int)((float)h*scaleFactor), Image.SCALE_SMOOTH);
        mt = new MediaTrackerProxy(this);
        mt.addImage(image, 0);
        try { mt.waitForAll(); } catch(InterruptedException ex) {}
        }
    }*/

        imageCanvas.setSize(image.getWidth(null), image.getHeight(null));

        if (debug) System.err.println("constructing new PixelImage");
        PixelImage pixelImage = new PixelImage(image);
        if (debug) System.err.println("converting PixelImage to grayScale");
        pixelImage.toGrayScale(true);
        if (debug) System.err.println("filtering");
        pixelImage.filter();
        if (debug) System.err.println("setting image for display");
        imageCanvas.setImage(
            pixelImage.rgbToImage(
                pixelImage.grayScaleToRGB(pixelImage.pixels),
                pixelImage.width,
                pixelImage.height,
                imageCanvas));
        System.out.println(imageFilename + ":");
        String text = scanner.scan(image, 0, 0, 0, 0, null, imageCanvas.getGraphics());
        System.out.println("[" + text + "]");
    }

    public static void main(String[]args) {
        if (args.length < 1) {
            System.err.println("Please specify one or more image filenames.");
            System.exit(1);
        }
        String trainingImageDir = System.getProperty("TRAINING_IMAGE_DIR");
        if (trainingImageDir == null) {
            System.err.println
                ("Please specify -DTRAINING_IMAGE_DIR=<dir> on " +
                 "the java command line.");
            return;
        }
        OCRScannerDemo demo = new OCRScannerDemo();
        demo.loadTrainingImages(trainingImageDir);
        for (int i = 0; i < args.length; i++)
            demo.process(args[i]);
        System.out.println("done.");
    }
} 
```

在处理方法中使用了 ImageProducer。有没有安卓的替代品，或者我也可以放弃使用这种方法？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-22T14:32:25.987

回复有点晚，但我想它可能对读者有所帮助。

在 Android 上，将 android.graphics.Bitmap 类视为构建图像的入口点。与 Java AWT API 相比，它是关于创建和使用图像的直接简化。Android 的 Bitmap 类与 java.awt.BufferedImage 非常相似，一个使用 set/getPixel 方法，另一个使用 set/getRGB，以及一些从不同来源创建位图（图像）的方法。

# mysql - 添加一个默认值不为空的列。

> ID：10960506
> 
> 赞同：15
> 
> 时间：2012-06-09T11:12:41.890
> 
> 标签：mysql

我必须在使用 Alter 表的特定列之后将默认值不为空的列添加到表中。

```
ALTER TABLE tblechecklistrevision ADD COLUMN IWorkFlowOrder INT(10) DEFAULT NOT NULL AFTER fState; 
```

当我执行查询时，我将收到以下错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NOT NULL AFTER fState”附近使用正确的语法

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-09T11:17:11.913

你应该删除`DEFAULT`：

```
ALTER TABLE tblechecklistrevision 
    ADD COLUMN IWorkFlowOrder INT(10) NOT NULL AFTER fState; 
```

DEFAULT 用于将初始值设置为未指定该列的值的新行，当您编写时`...INT(10) NOT NULL`，您的意思实际上是该列永远不能包含 NULL，不仅在初始化时。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-09T11:16:38.970

如果您希望默认值不等于`NULL`（例如 0），您可以执行以下操作：

```
ALTER TABLE tblechecklistrevision 
    ADD COLUMN IWorkFlowOrder INT(10) NOT NULL DEFAULT 0 AFTER fState 
```

# c++ - 初始化指针向量（自动）

> ID：10960508
> 
> 赞同：3
> 
> 时间：2012-06-09T11:13:10.227
> 
> 标签：c++, pointers, null, stdvector

尝试`NULL`通过`std::vector`构造函数初始化指针向量时遇到编译错误。我简化了指令以使其简单：

```
vector<int*> v (100,NULL) 
```

`const T& value= T()`我想这与（构造函数的参数）和非常值 NULL之间的不兼容有关，但我希望得到进一步的解释。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T12:11:49.423

如果你有相关的 C++11 支持，你可以使用`nullptr`：

```
std::vector<int*> v(100, nullptr); 
```

但是，在您的特定情况下，无需指定默认值，因此以下内容就足够了：

```
std::vector<int*> v(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:42:13.853

`NULL`很可能被定义为`0`，所以你最终得到

```
vector<int*> v(100,0); 
```

它试图构建 s 的向量`int`，而不是`int*`s 的向量。

只需跳过 NULL，因为这是指针的默认值，或者将其转换为正确的指针类型`(int*)NULL`。

# android - 在android的资源文件夹中添加ssl certi.p12文件

> ID：10960514
> 
> 赞同：1
> 
> 时间：2012-06-09T11:13:40.780
> 
> 标签：android

我需要在 android 的资源文件夹中添加 .p12 文件和密钥库文件。ssl 连接到服务器（不是 https）需要此文件。如何添加它？我试图添加资源文件夹中的任何文件夹，但这会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T01:57:22.880

究竟是什么问题？什么错误？您只需要将文件作为原始资源复制到`/res/raw/mykey.p12`.

# spring - 另一个控制器中的 Grails Spring Security 登录表单

> ID：10960516
> 
> 赞同：1
> 
> 时间：2012-06-09T11:13:59.157
> 
> 标签：spring, security, grails, view, controller

我想将从 Grails Spring Security 插件生成的登录视图的登录表单放置在 layouts/main.gsp 的主布局中。我只是将它复制过来，但它不起作用，因为原因，现在没有控制器可用于将表单数据传递给。表单代码如下所示：

```
<form action='${postUrl}' method='POST' id='loginForm' class='cssform' autocomplete='off'>
      <p>
        <label for='username'><g:message code="springSecurity.login.username.label"/>:</label>
        <input type='text' class='text_' name='j_username' id='username'/>
      </p>
      <p>
        <label for='password'><g:message code="springSecurity.login.password.label"/>:</label>
        <input type='password' class='text_' name='j_password' id='password'/>
      </p>
      <p id="remember_me_holder">
        <input type='checkbox' class='chk' name='${rememberMeParameter}' id='remember_me' <g:if test='${hasCookie}'>checked='checked'</g:if>/>
        <label for='remember_me'><g:message code="springSecurity.login.remember.me.label"/></label>
      </p>
      <p><input type='submit' id="submit" value='${message(code: "springSecurity.login.button")}'/></p>
    </form> 
```

我应该如何更改此代码，以便将表单代码发送到 Login auth 操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:03:43.310

正如我所理解的，您的问题是表单操作使用什么？`postUrl`应该与`grails.plugins.springsecurity.apf.filterProcessesUrl`配置中的属性相同，默认为`/j_spring_security_check`.

如果您没有更改此值，则可以使用`/j_spring_security_check`代替`${postUrl}`.

Spring Securty Plugin 具有处理此 URL 并授权用户的特殊过滤器。下一步取决于配置，但如果我没记错的话，默认情况下它将用户重定向到`/`.

[请参阅http://grails-plugins.github.io/grails-spring-security-core/guide/urlProperties.html](http://grails-plugins.github.io/grails-spring-security-core/guide/urlProperties.html)上的配置选项

# c++ - 通过 erlang 端口在 qt 应用程序和 erlang 服务器之间进行通信

> ID：10960517
> 
> 赞同：0
> 
> 时间：2012-06-09T11:13:59.063
> 
> 标签：c++, qt, erlang, erlang-ports

我需要在 ubuntu 中创建一个客户端（qt c++）和一个服务器（erlang）。服务器应该是通用的 OTP 服务器。客户端应该连接到服务器并发送一些数据（字符串）并且 erlang srv 应该返回相同的字符串。

请建议我一个示例代码或框架来实现这些东西。

我决定从这个开始：

```
connect(Message) ->
    Cmd = "./myqtwindowapp \n",
    Port = open_port({spawn,Cmd}, [stream,use_stdio,exit_status]),
    Payload = string:concat(Message, "\n"),
    erlang:port_command(Port, Payload),
    receive
        {Port, {data, Data}} ->
            ?DBG("Received data: ~p~n", [Data]);
        Other ->
            io:format("Unexpected data: ~p~n", [Other]);
        after 15000 ->
            ?DBG("Received nothing~n", [])
    end. 
```

请帮助我处理客户端和服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T00:38:03.030

您应该使用一些 IPC 进行通信。例如，您可以打开一个套接字 ( [gen_tcp](http://erlang.org/doc/man/gen_tcp.html) ) 或使用[D-Bus](https://code.google.com/p/erlang-dbus/)。Qt 也有适当的类来处理套接字和 d-bus。

# iphone - ios uiwebview stop request when shouldstartloadwithrequest

> ID：10960521
> 
> 赞同：0
> 
> 时间：2012-06-09T11:14:59.477
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在接收 shouldstartloadwithrequest 事件，我需要在某些情况下停止请求。应该startloadwithrequest时如何停止uiwebview请求？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:16:09.943

您可以`stopLoading`调用`UIWebView`. 下面的代码将检查 webview 是否正在加载并停止它。

```
 if([webView isLoading]) {
      [webView stopLoading];
   } 
```

**编辑**：重新阅读您的问题后，我知道您想返回`NO`请求以阻止它开始加载，因此您可以执行以下操作：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    //Check your condition:
    if(myCondition == TRUE)
         return NO;

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T11:17:26.500

检查条件，然后返回`NO`。`shouldStartLoadWithRequest`确保适当地设置委托，并在委托类的接口中包含 UIWebViewDelegate 协议。

# java - Android 使用 YQL 数据解析 XML

> ID：10960522
> 
> 赞同：2
> 
> 时间：2012-06-09T11:15:01.947
> 
> 标签：java, android, xml, parsing, yql

我正在尝试做一个简单的应用程序，使用他们的 YQL 查询语言解析来自雅虎财经的货币数据。我尝试使用 Google 的财务 API 解析数据，它运行良好，但是当我使用 Yahoo 的 URL 尝试它时，它在我使用非常奇怪的解析算法之前就冻结了。

```
package com.sfc.watcher;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.StringReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.HashMap;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.util.Xml;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.view.inputmethod.InputMethodManager;
import android.widget.AdapterView;
import android.widget.AdapterView.AdapterContextMenuInfo;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.Toast;

public class ForexActivity extends Activity {

    String temp1;
    String temp2;
    TableLayout tl1;

    View temp3;

    private static final String URL1 ="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(\"" ;
    private static final String URL2="\")&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";

    // This TAG is used for logging
    private static final String TAG = "ForexWatcherActivity";

    // These String constants refer to the XML elements we will be displaying
    private static final String NAME = "Name";
    private static final String RATE = "Rate";
    private static final String DATE = "Date";
    private static final String TIME = "Time";
    private static final String ASK = "Ask";
    private static final String BID = "Bid";

    // This String refers to the attribute we are collecting for each element in
    // our XML
    private static final String DATA = "data";

        // This HashMap will store, in key-value pairs, the currency data we receive.
    private HashMap<String, String> hmCurrencyData = new HashMap<String, String>();

        // This is the edit control that users will key into
    private EditText edittext1 = null;

        // This is the button that, when pressed, will request currency price data.
    private Button button1 = null;

        // This variable will hold the currency symbol value the user has keyed in.
    private String symbol = "";

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
                                    ContextMenuInfo menuInfo) {
        temp3=v;
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        switch (item.getItemId()) {
            case R.id.edit:

                return true;
            case R.id.delete:

                tl1.removeView(temp3);   
                return true;
            case R.id.save:

                return true;
            default:
                return super.onContextItemSelected(item);
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.forex);

        tl1 = (TableLayout) findViewById(R.id.myTableLayout);
        button1 = (Button)findViewById(R.id.bn_retrieve);
        edittext1 = (EditText) findViewById(R.id.edit_symbol1);
        edittext1.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable arg0) {

            }

            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {
            }

                        // here we respond to users key input events

            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {

                // collect the text from the edit control, and trim off spaces.
                symbol = edittext1.getText().toString().trim();

                // if the user has entered at least one character, enable the
                // bnRetrieve button.
                // otherwise, disable it.
                button1.setEnabled(symbol.length() > 0);

            }

        });

        final EditText edittext2 = (EditText) findViewById(R.id.edit_symbol2);
        //First spinner for input forex

        Spinner spinner1 = (Spinner) findViewById(R.id1.spinner);
        ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(
                this, R.array.forex_array, android.R.layout.simple_spinner_item);
        adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(adapter1);
        spinner1.setOnItemSelectedListener(new SellListener());

        //Second spinner for Output forex

        Spinner spinner2 = (Spinner) findViewById(R.id2.spinner);
        ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
                this, R.array.forex_array, android.R.layout.simple_spinner_item);
        adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(adapter2);
        spinner2.setOnItemSelectedListener(new BuyListener());

        // Capture our button from layout

        Button button2 = (Button)findViewById(R.id.bn_convert);
        // Register the onClick listener with the implementation above
        button2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {       
            Toast.makeText( getApplicationContext(),"Selling "+ "$"+ edittext2.getText().toString()+ " "+ temp1 + " Buying "+ "$"+ temp2, Toast.LENGTH_LONG).show();

            }
        });

    }
    public class SellListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent,
            View view, int pos, long id) {
            temp1=parent.getItemAtPosition(pos).toString();
        }

        public void onNothingSelected(AdapterView parent) {
          // Do nothing.
        }
    }
    public class BuyListener implements OnItemSelectedListener {

        public void onItemSelected(AdapterView<?> parent,
            View view, int pos, long id) {
            temp2=parent.getItemAtPosition(pos).toString();
        }

        public void onNothingSelected(AdapterView parent) {
          // Do nothing.
        }
    }

    public void retrieveQuote(View vw) {

        // our "symbol" variable already has the text from the edSymbol view via
        // the onTextChanged() event capture.
        String request = URL1  + symbol + URL2;
        CurrencyRetrieveTask task = new CurrencyRetrieveTask();
        task.execute(new String[] { request });

    }
    private class CurrencyRetrieveTask extends AsyncTask<String, Void, String> {

        private static final String TAG = "CurrencyRetrieveTask";

        private ProgressDialog pDlg = null;

        @Override
        protected void onPreExecute() {

            Log.i(TAG, "onPreExecute");

            hideKeyboard();

            pDlg = createProgressDialog(ForexActivity.this,
                    getString(R.string.retrieving));

            super.onPreExecute();

        }

        @Override
        protected String doInBackground(String... urls) {

            Log.i(TAG, "doInBackground");

            StringBuilder sb = new StringBuilder();

            // Remember that the array will only have one String
            String url = urls[0];

            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(
                        new InputStreamReader(content));

                String s = "";

                while ((s = buffer.readLine()) != null) {

                    sb.append(s);

                }

            } catch (Exception e) {
                Log.e(TAG, e.getMessage(), e);
            }

            return sb.toString();
        }

        @Override
        protected void onPostExecute(String response) {

            readResponse(response);

            displayResponse();

            pDlg.dismiss();

        }

    }

    private void hideKeyboard() {

        // hide the soft keyboard, if it is currently visible.
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(edittext1.getWindowToken(),
                InputMethodManager.HIDE_NOT_ALWAYS);

    }

    private ProgressDialog createProgressDialog(final Context context,
            final String message) {

        Log.i(TAG, "createProgressDialog");

        final ProgressDialog progressDialog = new ProgressDialog(context);

        progressDialog.setMessage(message);
        progressDialog.setProgressDrawable(getWallpaper());
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.setCancelable(false);
        progressDialog.show();

        return progressDialog;
    }

    private void readResponse(String response) {

        Log.i(TAG, "displayResponse");

        // initialize our HashMap, resetting it if it was previously used.

        hmCurrencyData = new HashMap<String, String>();

        try {

            String elementName = "";
            String elementValue = "";
            String nameSpace = "";

         StringReader xmlReader = new StringReader(response);

            XmlPullParser parser = Xml.newPullParser();
            parser.setInput(xmlReader);

            elementName = parser.getName();

            while (!elementName.equals("rate"))
            {
                parser.nextTag();
                elementName = parser.getName();
            }

        } catch (Exception e) {
            Log.e(TAG, e.getMessage(), e);
            e.printStackTrace();
        }

    }

    private void updateTextView(String name, TableRow Row) {

        if(hmCurrencyData.containsKey(name))
        {
        TextView TV1= new TextView(getApplicationContext());        
        TV1.setText(hmCurrencyData.containsKey(name) ? hmCurrencyData.get(name) : "");

        TV1.setLayoutParams(new TableRow.LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
        Row.addView(TV1); 
        }
    }

    private void displayResponse() {

        Log.i(TAG, "displayResponse");

        TableRow tr = new TableRow(getApplicationContext());
        tr.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
        tr.setPadding(0, 10, 0, 10);

        updateTextView(NAME, tr);
        updateTextView(RATE, tr);
        updateTextView(DATE, tr);
        updateTextView(TIME, tr);
        updateTextView(ASK, tr);
        updateTextView(BID, tr);

        registerForContextMenu(tr);

        tl1.addView(tr,new TableLayout.LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));  

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T20:01:17.477

该表未定义。URL 返回此错误：

> 找不到表 yahoo.finance.xchange 的定义

在浏览器中运行时：

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22%22%29&diagnostics=true

```

# ssis - 将平面文件源中的 NULL 字符串列转换为目标表中的 DATETIME 和 INT 类型

> ID：10960523
> 
> 赞同：0
> 
> 时间：2012-06-09T11:15:10.053
> 
> 标签：ssis

我正在将平面文件源导入表，我所有的平面文件列都是字符串数据类型。我的列中很少有 NULL 值，而在我的目标表中，这些列是 Datetime 和 Int 类型。我尝试使用派生列和数据转换转换但未能加载。

我的来源专栏

```
todaysdate   yesterdaydate   batchno    
NULL           NULL             NULL 
```

目标表中的`todaysdate`column和column是Datetime， column是int类型。我尝试使用派生和数据转换转换，但它失败了。 `yesterdaydate``Batchno`

我需要将 Null 值加载到此列的目标位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:53:41.417

我整理了一下问题

我在派生列转换中添加了以下表达式

我将派生列转换中的 todaysdate 列替换为

**TRIM(todaysDate) =="NULL" ？(DT_STR,20,1252)NULL(DT_STR,20,1252)：今天日期**

# java - 让jsp文件转到servlet

> ID：10960524
> 
> 赞同：0
> 
> 时间：2012-06-09T11:15:30.153
> 
> 标签：java, spring, jsp, servlets

我的 .jsp 文件在执行某些操作后出现问题，它必须转到我的 login.java (servlet) 我认为可以通过执行以下操作：

web-inf/serverlet 文件夹（我创建的）和我的 jsp 页面中的 login.java servlet 执行此 ${pageContext.request.contextPath}/servlets/login 作为 url。

那么问题是我收到一个错误“请求的资源（）不可用”。使用代码 404。

难道不能让jsp通过url去servlet吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:29:01.003

您需要在 Java 源代码文件夹中的包中创建 servlet 作为普通 Java 类，而不是在 web 文件夹中手动创建的文件夹中。您还需要将 servlet 映射到 URL 模式。

在 Java 源代码文件夹中创建一个包`com.example`（或其他东西，但它*必须*在一个包中），然后以通常的 Java 方式创建以下类：

```
package com.example;

// ...

@WebServlet("/login")
public class Login extends HttpServlet {

    // ...

} 
```

如果您使用的是 Eclipse 或 Netbeans 之类的 IDE，那么它将自动编译到正确的文件夹中，并且在部署后它将在 URL 上可用`/login`，相对于上下文路径。

```
<form action="${pageContext.request.contextPath}/login" method="post"> 
```

如果您仍然没有使用与 Servlet 3.0 兼容的容器（Tomcat 7、Glassfish 3 等），那么您需要删除`@WebServlet`注释并以老式方式注册 servlet，`web.xml`如下所示：

```
<servlet>
    <servlet-name>login</servlet-name>
    <servlet-class>com.example.Login</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>login</servlet-name>
    <url-pattern>/login</url-pattern>
</servlet-mapping> 
```

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含一些 Hello World 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:20:33.313

您不能将 .java 文件放入已编译的应用程序中。查看本教程： http: [//netbeans.org/kb/docs/javaee/ecommerce/page-views-controller.html](http://netbeans.org/kb/docs/javaee/ecommerce/page-views-controller.html)例如使用 NetbeansIDE 开发的 jsp+servlet。
并回答问题：是的，这是完全可能的。

# xcode - IBA动作、按钮和摄像头

> ID：10960528
> 
> 赞同：1
> 
> 时间：2012-06-09T11:15:56.903
> 
> 标签：xcode, uibutton, uiimagepickercontroller

我在 .h 文件中声明的界面中有一个按钮

```
@interface UserProfileVC : UIViewController <UIImagePickerControllerDelegate>{
    IBOutlet UIButton *camera;
}
@property (nonatomic,retain) IBOutlet UIButton *camera;
-(IBAction)cameraPress:(id)sender; 
```

在我的 .m 文件中，我有：

```
-(IBAction)cameraPress:(id)sender{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
//  [picker setDelegate:self];
    [picker setAllowsEditing:YES];
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    [self presentModalViewController:picker animated:YES];
    [picker release];
} 
```

但我有这个错误：

```
*** -[UserProfileVC performSelector:withObject:withObject:]: message sent to deallocated instance 0x7bc2a40 
```

有人能帮我吗？我不明白这是什么错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:48:08.507

根据您上次评论中的代码，

```
-(void)showDetails:(id)sender{ 
NSLog(@"Annotation Click"); 
details= [[UserProfileVC alloc] initWithNibName: @"Details" bundle:nil ]; 
details.Nome=note.title; 
addNavigationController = [[UINavigationController alloc] initWithRootViewController:details]; 
[self.navigationController presentModalViewController:addNavigationController animated:YES]; 
} 
```

我可以建议你关注。如果您查看`UIViewController`课程参考文档，您会发现以下注释

```
presentModalViewController:animated: 
```

向用户呈现由给定视图控制器管理的模态视图。（**已弃用**。`presentViewController:animated:completion:`改用。）

所以我建议你使用`presentViewController:animated:completion`. 我发现它与错误“发送到已释放实例的消息”无关，但仍然检查您是否可以解决您的问题。

我也不知道你为什么写这行

```
addNavigationController = [[UINavigationController alloc] initWithRootViewController:details]; 
```

如果您只是想`UserProfileVC`在当前显示，`UINavigationController`那么我建议您删除 addNavigationController 行并只写

```
[self.navigationController presentViewController:details animated:YES completion:NULL]; 
```

# c++ - 优化运行辅助

> ID：10960529
> 
> 赞同：0
> 
> 时间：2012-06-09T11:16:05.003
> 
> 标签：c++, hashtable, hash, hashcode

我正在对两组数据进行优化，并在一些帮助下根据计算结果查找运行设置。我会解释的......

我运行 2 条数据线（想想图形线）——A 线和 B 线。这些线有交叉点——根据每条线的方向向上和向下。例如，A 线上升，B 线下降“向上交叉”，A 线向下，B 线向上是“向下交叉”。程序计算财务分析。

我分析交叉点并根据一组规则从分析中获得一个结果“等级”。等级是单个整数。

A 行有许多优化运行的设置，例如窗口 1 的值从 10 到 20，窗口 2 的值从 30 到 40。行 B 也有设置。

当我运行优化时，我会遍历每行可用的参数并计算排名。优化运行的结果是一个等级列表，它是可用排列数量的大小。

所以我的问题是：

使用排名列表中的位置（索引）从计算的排名中查找行设置的最佳方法是什么。用于创建运行的优化设置将存储用于该排名运行，并可用于查找。

我还将在未来向系统添加额外的参数，因此我希望程序考虑额外的未来生产线设置，而不影响在添加新参数之前创建的任何等级文件。

除此之外，我希望能够根据优化运行中包含的特定设置找出索引（前一种方法的反向查找）。

如果可能的话，我想避免版本控制以实现向后兼容性，以便查找算法是自给自足的。

哈希表是否适合此目的，或者您是否有任何更适合的实现技术？在 C++ 中，您有任何此类操作的示例吗？

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:23:55.003

如果我理解正确，您有一堆相关数据（设置 + 排名），您希望能够使用不同的键类型执行查找。如果是这样，那么[*Boost.MultiIndex*](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/tutorial/index.html)听起来就像您正在寻找的那样。

# javascript - Element的绝对定位问题

> ID：10960530
> 
> 赞同：0
> 
> 时间：2012-06-09T11:16:07.423
> 
> 标签：javascript, jquery, html, css

有什么方法可以将其包含在`children elements size whose position is absolute`其中`parents size`，我的意思是说：

我们有 ：

**标记**

```
 <div class="parent">
         <div class="children">
           My position is absolute.
         </div>
        </div> 
```

**CSS**

```
 .parent      // position by default static
          {
            width:100%;
            height:auto;
          }

          .children
          {
            position :absolute;
            width:100%;
            height:auto;
          } 
```

我的问题是父母的高度是0，可能是因为它的孩子绝对定位。那么有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:09:41.063

你能用JavaScript吗？Inman 的清仓方法将为您完成这项工作：

[http://shauninman.com/assets/examples/si-clear-children-1.0/si-clear-children-1.0.zip](http://shauninman.com/assets/examples/si-clear-children-1.0/si-clear-children-1.0.zip)

更多信息在这里： [http ://shauninman.com/archive/2006/05/22/clearance_position_inline_absolute](http://shauninman.com/archive/2006/05/22/clearance_position_inline_absolute)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T20:47:37.723

旧帖子，但有人可能会觉得这很有用。如果你愿意使用 javascript

[http://shinytoyrobots.com/2011/11/super-simple-jquery-height-manipulation/](http://shinytoyrobots.com/2011/11/super-simple-jquery-height-manipulation/)

# javascript - 如何同步对 javascript 对象的私有成员的访问

> ID：10960531
> 
> 赞同：9
> 
> 时间：2012-06-09T11:16:09.033
> 
> 标签：javascript, synchronized, members

我创建了一个 Javascript 对象，如下所示：

```
var ccStatTracker = (function (){
  ccmap:{
    "1":["1","2","3","4"],
    "2":["4","5"];       
  }

  return {
    modifyCCMap: function (){
      // Code which takes following actions: 
      // - adds/removes keys.
      // - modifies arrays stored as values against the keys in the map.  
    }  
  }
)(); 
```

我有一个 DHTMLXGrid 组件，它以行和列的形式显示网格。当我编辑网格中的任何单元格时，会调用“onEditCell”事件。现在，我想从附加到“onEditCell”事件的事件处理函数中调用 ccStatTracker.modifyCCMap()。当我继续修改单元格时，这个事件将被异步调用，这又会调用一个函数“modifyCCMap”，该函数将修改我的Javascript对象的私有成员“CCMap”。所以两个调用看到的我的 CCMap 的最新状态可能不同，对吧？那么处理这个问题的最佳方法是什么？Javascript 中是否有像 Java 中一样“同步”的东西？

请帮助我，因为它将确定我们要采取的实施方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-09T11:20:13.970

JavaScript 是单线程的（暂时不考虑[web-worker ），没有任何事情是](/questions/tagged/web-worker "显示标记为“网络工作者”的问题")*异步*发生的（或所有事情）——所有代码：事件处理程序、超时、回调等——一个接一个地在同一个线程中运行。

因此，您不需要在 JavaScript 中进行任何同步。JavaScript 中的任何给定代码都保证只能由单个线程执行。多么酷啊？

# 也可以看看

*   [SwingUtilities.invokeLater() 的 JavaScript 等价物](https://stackoverflow.com/questions/8947034)
*   [受异步 ajax 回调干扰的“原子”操作](https://stackoverflow.com/questions/8333558)
*   [是否有任何原子 javascript 操作来处理 Ajax 的异步特性？](https://stackoverflow.com/questions/7266918)
*   [javascript 中如何实现异步编程（承诺）？javascript 不是 ui 线程环境吗？](https://stackoverflow.com/questions/9758052)
*   ...

# sql - sqlalchemy 使用 TOP 参数化执行 sql

> ID：10960534
> 
> 赞同：1
> 
> 时间：2012-06-09T11:16:19.290
> 
> 标签：sql, parameters, sqlalchemy, limit, execute

我想在 mssql 中使用限制，即 TOP，参数化。我希望我能像这样获得顶级参数：

```
engine.execute( text("select top :t * from Orders), t=100) 
```

但我得到：无法准备声明。（8180）（SQLExecDirectW）'）'选择顶部？* 来自 Orders' (100,)

顶部固定或外它工作正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:19:15.860

如[this answer](https://stackoverflow.com/a/1275392/274466)所示，假设您至少使用 SQL Server 2005，您应该能够运行：

```
engine.execute(text('select top (:t) * from Orders'), t=100) 
```

只要参数包含在括号中，SQL Server 就应该接受。

# mysql - 结合 3 个 MySQL 查询

> ID：10960537
> 
> 赞同：2
> 
> 时间：2012-06-09T11:16:46.397
> 
> 标签：mysql, join, subquery

我是一个mysql新手。我想将以下 3 个查询和结果集合二为一，但没有成功。查询之间的区别在于 WHERE 子句 (kw_research.id_country=) 和 SELECT 列 (global_value, local_value, us_local_value)。任何帮助，将不胜感激。谢谢你。

查询 1，

```
    选择
    dn_domains.sid,
    dn_domains.domain,
    dn_domains.tld,
    kw_keywords.id_keyword,
    kw_keywords.keyword_name,
    kw_research.id_research,
    dn_tlds.value,
    (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') AS global_value
    从
    ((((dn_domains)
    加入 kw_keywords)
    加入 kw_research)
    加入 dn_tlds) ,
    co_domain_keyword
    在哪里
    dn_domains.sid = co_domain_keyword.id_domain AND
    kw_keywords.id_keyword = co_domain_keyword.id_keyword AND
    kw_keywords.id_keyword = kw_research.id_keyword AND
    dn_domains.tld = dn_tlds.tld 和
    kw_research.id_country = '1'
    订购方式
    dn_domains.sid ASC

```

结果：

```
    +-----+------------+------+------------ -+----------+-------------+--------+---- -----------------+
    | 席位 | 域名 | 顶级域名 | id_keyword | 关键字名称 | id_research | 价值 | 全球价值 |
    +-----+------------+------+------------ -+----------+-------------+--------+---- -----------------+
    | 4 | infodomain.info | 信息 | 13534 | 信息域 | 27181 | 0.05 | 4864.859894050059 |
    | 5 | 示例域名.com | com | 28566 | 示例域 | 28694 | 1 | 8.064000120162964 |
    | 6 | domainexample.com | com | 27433 | 域示例 | 27503 | 1 | 14.112000210285185 |
    | 7 | officedomain.com | com | 27072 | 办公域名 | 27130 | 1 | 297.3600044310093 |
    | 8 | extractdomain.com | com | 27578 | 提取域 | 27680 | 1 | 6676.991976928712 |
    +-----+------------+------+------------ -+----------+-------------+--------+---- -----------------+
    5行一组

```

查询 2，

```
    选择
    dn_domains.sid,
    dn_domains.domain,
    dn_domains.tld,
    kw_keywords.id_keyword,
    kw_keywords.keyword_name,
    kw_research.id_research,
    dn_tlds.value,
    (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') AS local_value
    从
    ((((dn_domains)
    加入 kw_keywords)
    加入 kw_research)
    加入 dn_tlds) ,
    co_domain_keyword
    在哪里
    dn_domains.sid = co_domain_keyword.id_domain AND
    kw_keywords.id_keyword = co_domain_keyword.id_keyword AND
    kw_keywords.id_keyword = kw_research.id_keyword AND
    dn_domains.tld = dn_tlds.tld 和
    kw_research.id_country = dn_tlds.country
    订购方式
    dn_domains.sid ASC

```

结果：

```
    +-----+------------+------+------------ -+----------+-------------+--------+---- ----------------+
    | 席位 | 域名 | 顶级域名 | id_keyword | 关键字名称 | id_research | 价值 | 本地值 |
    +-----+------------+------+------------ -+----------+-------------+--------+---- ----------------+
    | 4 | infodomain.info | 信息 | 13534 | 信息域 | 27181 | 0.05 | 4864.859894050059 |
    | 5 | 示例域名.com | com | 28566 | 示例域 | 28694 | 1 | 8.064000120162964 |
    | 6 | domainexample.com | com | 27433 | 域示例 | 27503 | 1 | 14.112000210285185 |
    | 7 | officedomain.com | com | 27072 | 办公域名 | 27130 | 1 | 297.3600044310093 |
    | 8 | extractdomain.com | com | 27578 | 提取域 | 27680 | 1 | 6676.991976928712 |
    +-----+------------+------+------------ -+----------+-------------+--------+---- ----------------+
    5行一组

```

查询 3，

```
    选择
    dn_domains.sid,
    dn_domains.domain,
    dn_domains.tld,
    kw_keywords.id_keyword,
    kw_keywords.keyword_name,
    kw_research.id_research,
    dn_tlds.value,
    (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') AS us_local_value
    从
    ((((dn_domains)
    加入 kw_keywords)
    加入 kw_research)
    加入 dn_tlds) ,
    co_domain_keyword
    在哪里
    dn_domains.sid = co_domain_keyword.id_domain AND
    kw_keywords.id_keyword = co_domain_keyword.id_keyword AND
    kw_keywords.id_keyword = kw_research.id_keyword AND
    dn_domains.tld = dn_tlds.tld 和
    kw_research.id_country = '220'
    订购方式
    dn_domains.sid ASC

```

结果：

```
    +-----+--------+------+------------+-- ----------------+-------------+-------+------------ ------------+
    | 席位 | 域名 | 顶级域名 | id_keyword | 关键字名称 | id_research | 价值 | us_local_value |
    +-----+--------+------+------------+-- ----------------+-------------+-------+------------ ------------+
    | 4 | infodomain.info | 信息 | 13534 | 信息域 | 13535 | 0.05 | 1415.231969178199 |
    | 30 | domainhotspot.fr | 法语 | 13837 | 域名热点 | 13838 | 0.1 | 3880.8000578284264 |
    | 72 | domainrecovery.net | 净 | 2931 | 域恢复 | 2931 | 0.2 | 1761.177677000428 |
    | 75 | domainburner.co | 合作 | 16893 | 域名刻录机 | 16894 | 0.1 | 2286.1440437994006 |
    | 82 | domainrecorder.co | 合作 | 16969 | 域名记录器 | 16970 | 0.1 | 1344.6720444302562 |
    +-----+--------+------+------------+-- ----------------+-------------+-------+------------ ------------+
    5行一组

```

但是，我需要以下结果集：

```
    +-----+------------+------+------------ -+----------+-------------+--------+---- --------------------+---------------------+-------- ---------------+
    | 席位 | 域名 | 顶级域名 | id_keyword | 关键字名称 | id_research | 价值 | 全球价值 | 本地值 | us_local_value |
    +-----+------------+------+------------ -+----------+-------------+--------+---- --------------------+---------------------+-------- ---------------+
    | 4 | infodomain.info | 信息 | 13534 | 信息域 | 27181 | 0.05 | 4864.859894050059 | 4864.859894050059 | 1415.231969178199 |
    | 5 | 示例域名.com | com | 28566 | 示例域 | 28694 | 1 | 8.064000120162964 | 8.064000120162964 | 空 |
    | 6 | domainexample.com | com | 27433 | 域示例 | 27503 | 1 | 14.112000210285185 | 14.112000210285185 | 空 |
    | 7 | officedomain.com | com | 27072 | 办公域名 | 27130 | 1 | 297.3600044310093 | 297.3600044310093 | 空 |
    | 8 | extractdomain.com | com | 27578 | 提取域 | 27680 | 1 | 6676.991976928712 | 6676.991976928712 | 空 |
    | 30 | domainhotspot.fr | 法语 | 13837 | 域名热点 | 13838 | 0.1 | 空 | 空 | 3880.8000578284264 |
    | 72 | domainrecovery.net | 净 | 2931 | 域恢复 | 2931 | 0.2 | 空 | 空 | 1761.177677000428 |
    | 75 | domainburner.co | 合作 | 16893 | 域名刻录机 | 16894 | 0.1 | 空 | 空 | 2286.1440437994006 |
    | 82 | domainrecorder.co | 合作 | 16969 | 域名记录器 | 16970 | 0.1 | 空 | 空 | 1344.6720444302562 |
    +-----+------------+------+------------ -+----------+-------------+--------+---- --------------------+---------------------+-------- ---------------+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:21:31.900

您可以将查询与子句结合起来，并使用类似这样的内容`UNION`编写顶级-`SELECT``DISTINCT`

```
SELECT dn_domains.sid,
       dn_domains.domain,
       dn_domains.tld,
       kw_keywords.id_keyword,
       kw_keywords.keyword_name,
       kw_research.id_research,
       dn_tlds.value,
       CASE WHEN kw_research.id_country = '1' THEN
       (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') 
       ELSE NULL END AS global_value,
       (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') AS local_value,
       CASE WHEN kw_research.id_country = '220' THEN
       (kw_research.local_search * kw_research.aprx_cpc * '0.42' * dn_tlds.value * '12') 
       ELSE NULL END AS us_local_value
FROM (((dn_domains
        JOIN kw_keywords)
        JOIN kw_research)
        JOIN dn_tlds) ,
      co_domain_keyword
WHERE dn_domains.sid = co_domain_keyword.id_domain AND
      kw_keywords.id_keyword = co_domain_keyword.id_keyword AND
      kw_keywords.id_keyword = kw_research.id_keyword AND
      dn_domains.tld = dn_tlds.tld AND
      (kw_research.id_country IN (1, 220) OR kw_research.id_country = dn_tlds.country)
ORDER BY dn_domains.sid ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:21:19.697

一个简单的解决方案是：

```
(
    SELECT ... /* i.e. query 1 */
)
UNION (
    SELECT ... /* i.e. query 2 */
)
UNION (
    SELECT ... /* i.e. query 3 */
)
ORDER BY
    sid 
```

这是一个你可以玩[的演示。](http://sqlfiddle.com/#!2/5e88f/2)

在每个查询中，删除`ORDER BY`并将其添加到末尾，如上所述。这种方法将删除查询之间的任何重复行 - 如果您*想要*dup 行，请使用`UNION ALL`而不是`UNION`.

请记住，这可能不是最佳选择 - 对表的分析可能表明将其全部编写为一个查询会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:05:56.100

这是另一种方法，基于重新阅读您的问题 - 您只需要一些 OR 语句：

```
SELECT
dn_domains.sid,
dn_domains.domain,
dn_domains.tld,
kw_keywords.id_keyword,
kw_keywords.keyword_name,
kw_research.id_research,
dn_tlds.value,
(
    kw_research.local_search *
    kw_research.aprx_cpc * '0.42' *
    dn_tlds.value * '12'
) AS global_value
FROM
(((dn_domains
JOIN kw_keywords)
JOIN kw_research)
JOIN dn_tlds) ,
co_domain_keyword
WHERE
dn_domains.sid = co_domain_keyword.id_domain AND
kw_keywords.id_keyword = co_domain_keyword.id_keyword AND
kw_keywords.id_keyword = kw_research.id_keyword AND
dn_domains.tld = dn_tlds.tld AND
( /* Here's the new clause */
    kw_research.id_country IN (1, 220) OR
    kw_research.id_country = dn_tlds.country
)
ORDER BY
dn_domains.sid ASC 
```

我假设 id_country 是一个整数，因此将数字文字从字符串转换为数字。我也用过，比多条语句`IN`要快一点。`OR`

# java - scala 代码在 eclipse 中导致 playframework-2.0 错误

> ID：10960538
> 
> 赞同：7
> 
> 时间：2012-06-09T11:16:48.560
> 
> 标签：java, eclipse, scala, playframework-2.0

我正在尝试 eclipse.I代码并导入它，以便`todolist tutorial`可以正确检测 play api。但是我遇到了问题`playframework-2.0``eclipsified``eclipse(helios)``scala`

我更新了 eclipse 以获取 scala ide 插件。仍然 eclipse 在旁边显示错误标记

```
return ok(views.html.index.render(Task.all(),taskForm)); 
```

错误弹出框显示`views.html.index cannot be resolved to a type`

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T16:58:14.347

查看[Scala IDE](http://scala-ide.org/docs/tutorials/play/index.html)教程中的设置和使用 Play 框架。如有任何问题，请在[scala-ide-user](https://groups.google.com/group/scala-ide-user) ML 上向我们发送错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T23:56:28.997

在我的情况下，解决方案是将 /target/scala-2.10/src_managed/main 文件夹添加到类路径中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T06:22:38.657

我能够通过再次使项目黯然失色来摆脱这个警告

```
play eclipse 
```

或者

```
activator eclipse # If you use activator 
```

# image - 带有 appendChild 的 img

> ID：10960541
> 
> 赞同：0
> 
> 时间：2012-06-09T11:17:03.583
> 
> 标签：image, mouseover, html, appendchild

如果我用 a 包围`img`标签并将其`span`放入`mouseover`它`span`可以工作。如果我没有`span`并且只是将 放入`mouseover`中`img`，则它没有（请参阅正文中的单行 html）。

**我不能直接将孩子附加到图像吗？**

```
<html>
<script type="text/javascript">
function showMsg(obj) {
   var spn;
   spn = document.createElement('span');
   spn.innerHTML = "test message";
   obj.appendChild(spn);
   obj.onmouseout = function() {obj.removeChild(spn)};
 }
</script>

<body>
  <img onmouseover="showMsg(this)" src="http://www.w3schools.com/jsref/smiley.gif">
<!--
  <span onmouseover="showMsg(this)"><img src="http://www.w3schools.com/jsref/smiley.gif"></span>
-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:46:30.357

不，an[`<img>`](http://dev.w3.org/html5/markup/img.html)是一个空元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-11T20:04:26.913

但是，您可以做的是使用透明`div`的覆盖`image`并附加到它。

# user-agent - 如何使用用户代理检测苹果电脑？

> ID：10960551
> 
> 赞同：13
> 
> 时间：2012-06-09T11:19:38.133
> 
> 标签：user-agent

如何使用用户代理检测苹果电脑？Safari 也可以在 Windows 中运行

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-09T11:24:53.007

在 User-Agent 中寻找 Macintosh，用我的 Mac 浏览器试试这个：

*   您的用户代理：`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2`
*   您的用户代理：`Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20100101 Firefox/12.0`
*   您的用户代理：`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.27 Safari/536.11`

虽然 Safari for Windows 有“Windows”而不是 Macintosh：

*   `Mozilla/5.0 (Windows; U; Windows NT 6.1; sv-SE) AppleWebKit/533.19.4 (KHTML, like Gecko) Version/5.0.3 Safari/533.19.4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:24:25.750

http 响应（页面响应）的用户代理部分，并为您提供有关操作系统的详细信息。我检查了我的，它给出了

> Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0

适用于 windows 和 Mozilla

# java - 将图像添加为托管资源时出错（Ui 活页夹）

> ID：10960553
> 
> 赞同：0
> 
> 时间：2012-06-09T11:19:55.720
> 
> 标签：java, gwt, uibinder

我正在尝试将图像添加为 UiBinder Gwt 中的托管资源，但在“元素我只包含一个子元素”这一行出现错误

如何更改我的代码以克服错误。

这是我的 xml 文件。

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent"> 
```

```
 <inherits name="com.google.gwt.resources.Resources" />

<ui:style type = "com.equillore.mcmexternal.client.ui.IndicatorLabel.Style"> 

    @sprite 

    .required
     {

        gwt-image: 'requiredImage';
        font-weight:bold;
        width: 7px;
        height: 14px;
    }
    .labRequired
    {

        color:#2E2E2E;
        font-family: Tahoma, Geneva, sans-serif;
        font-size:8pt;
        font-style:normal;
        font-weight:bold;
    }
</ui:style>

<g:SimplePanel width='120px' height='21px'>
<g:Grid>
    <g:row>
        <g:customCell>
            <g:Label ui:field="label" addStyleNames="{style.labRequired}"/>
        </g:customCell>
        <!--  <g:customCell>
            <g:Label addStyleNames="{style.required}"/> 
        </g:customCell> -->
     </g:row>
</g:Grid>
</g:SimplePanel> 
```

在我的java文件中我添加

```
public interface myResources extends ClientBundle{
    @Source ("images/required_indicator.gif")
    ImageResource requiredImage(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:16:43.713

您不能在 external 中混合`ui:style`和定义。要在 a 中使用，您必须定义您使用的元素。`ImageResource``ClientBundle``@sprite``ui:style``ImageResource``ui:image`

```
<ui:image field="requiredImage" src="images/required_indicator.gif" /> 
```

# linux - GCC 警告关于 FD_SET 调用的符号转换

> ID：10960569
> 
> 赞同：1
> 
> 时间：2012-06-09T11:22:44.550
> 
> 标签：linux, gcc, network-programming, warnings

我正在尝试使用 GCC 和 glibc 2.15 在 Ubuntu 12.04 上编译网络应用程序让我们以以下代码为例：

一个.cpp：

```
#include <sys/select.h>
void func ()
{
  int fd;
  fd_set fds;
  FD_SET(fd, &fds);
} 
```

我可以使用命令“gcc -c -Wsign-conversion a.cpp”成功编译这些行，但在添加 -O1 或 -O2 选项后出现以下警告：

```
gcc -c -O1 -Wsign-conversion a.cpp
a.cpp:6: warning: conversion to ‘long unsigned int’ from ‘int’ may change the sign of the result [-Wsign-conversion] 
```

我对 gcc 4.4、4.5 和 4.6 都有警告。

UPD：如果我理解正确，我的示例严格符合 FD_SET 语义，所以在这种情况下我应该没有警告。

这是什么原因？我怎样才能避免它？

谢谢。

UPD：看起来这是现在已知的问题 - [http://comments.gmane.org/gmane.comp.lib.glibc.alpha/22344](http://comments.gmane.org/gmane.comp.lib.glibc.alpha/22344)。但我不明白我应该在 GLIBC 2.15 上用它做什么？只是等待下一个 GLIBC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:39:18.437

为了解决这个问题，我使用了一个单独的包装源文件，并且只针对那个源文件禁用了警告。

CMacroWrapper.h：

```
#include <sys/select.h>
namespace CMacroWrapper
{
  void FdSet(int fd, fd_set *set);
} 
```

CMacroWrapper.cpp：

```
#include "CMacroWrapper.h"

#pragma GCC diagnostic ignored "-Wsign-conversion"

void CMacroWrapper::FdSet(int fd, fd_set *set)
{
  FD_SET(fd, set);
} 
```

主.cpp：

```
#include "CMacroWrapper.h"
void func ()
{
  int fd;
  fd_set fds;
  FD_ZERO(&fds);
  CMacroWrapper::FdSet(fd, &fds);
} 
```

我发现 CMacroWrapper 命名空间对于添加在编译器警告中弹出的任何新系统头宏很有用。它确实添加了一个额外的函数调用，但为了让警告安心，这是值得的。或者，如果您愿意，可以包装所有 FD_ 宏以保持一致性。

# debugging - gcc - gdb - 漂亮的打印 stl

> ID：10960571
> 
> 赞同：1
> 
> 时间：2012-06-09T11:23:08.543
> 
> 标签：debugging, function, stl, gdb, g++

我目前正在对 STL 进行一些研究，尤其是在调试期间打印 STL 内容。我知道有很多不同的方法。

像：

*   [http://sourceware.org/gdb/wiki/STLSupport](http://sourceware.org/gdb/wiki/STLSupport)
*   或使用共享库打印容器的内容

我目前正在寻找的是，为什么 g++ 会删除未使用的函数，例如我有以下代码并使用编译设置`g++ -g main.cpp -o main.o`。

```
include <vector>
include <iostream>
using namespace std;
int main() {
    std::vector<int> vec;
    vec.push_back(10);
    vec.push_back(20);
    vec.push_back(30);

    return;
} 
```

所以当我调试这段代码时，我会发现我不能使用`print vec.front()`. 我收到的消息是：

```
Cannot evaluate function -- may be inlined 
```

因此我尝试使用该设置`-fkeep-inline-functions`，但没有更改。

当我使用时`nm main.o | grep front`，我看到该方法没有行条目`.front()`。再次做同样的事情，但是`vec.front()`在我的代码中有一个额外的条目，我可以使用`print vec.front()`，并`nm main.o | grep front`在我看到条目的地方使用

```
0000000000401834 W _ZNSt6vectorIiSaIiEE5frontEv 
```

有人可以解释一下我如何将所有函数保留在我的代码中而不会丢失它们。我认为，只要我不设置优化设置或执行以下操作，死函数就不会被删除。

*   [如何告诉编译器不要优化某些代码？](https://stackoverflow.com/questions/668103/how-to-tell-compiler-to-not-optimize-certain-code-away)

为什么需要它：当前的 Python 实现使用内部 STL 实现来打印容器的内容，但使用 ISO/IEC 14882 定义的函数会更有趣。我知道可以编写共享库，可以在调试之前将其编译为您的实际代码，以保持您拥有所有 STL 功能，但谁想在调试之前为其代码编译一个额外的库。知道这两种方法（共享库和 Python）是否有一些优点和缺点也会很有趣？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:23:57.613

> 究竟什么是死函数，它不是在我的源代码中可用但未使用的函数吗？

有两种情况需要考虑：

```
int unused_function() { return 42; }
int main() { return 0; } 
```

如果你编译上面的程序，`unused_function`它就死了——永远不会被调用。但是，它仍然会出现在最终的可执行文件中（即使经过优化 [1]）。

现在考虑一下：

```
template <typename T> int unused_function(T*) { return 42; }
int main() { return 0; } 
```

在这种情况下，即使您关闭*所有*优化，`unused_function`也*不会出现。*

 *为什么？因为模板不是“真正的”功能。它是一个原型，编译器可以从中创建“真正的”函数（称为“模板实例化”）——每种类型一个`T`。由于您从未使用过`unused_function`，因此编译器没有创建它的任何“真实”实例。

您可以使用 请求编译器显式实例化给定类中的*所有*`explicit instantiation request`函数，如下所示：

```
#include <vector>
template class std::vector<int>;

int main() { return 0; } 
```

现在，即使*没有*使用任何`vector`函数，它们都被*实例*化为最终的二进制文件。

[1] 如果您使用的是 GNU `ld`（或），在这种情况下，您仍然可以通过编译和链接`gold`来摆脱.`unused_function``-ffunction-sections``-Wl,--gc-sections`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:47:35.837

感谢您的回答。再说一遍，模板函数不会由 gcc 启动，因为它们是原型。只有在使用该功能或​​它被显式启动时，它才会在我的可执行文件中可用。

所以我们之前提到的是：

*   函数定义 **int usedFunc() { return 10; }**
*   函数原型 **int protypeFunc();** （只是为了打破它）

内联函数时会发生什么？我一直认为，该函数将被插入到我的源代码中，但现在我读到，编译器通常会自行决定要做什么。（听起来很奇怪，因为它们必须是规则）。**例如，您是否使用关键字inline**并不重要。

```
inline int inlineFunc() { return 10; } 
```

我的一个朋友也告诉我，他无法访问函数的地址，尽管他没有使用内联。有没有我忘记的函数类型？他还告诉我，它们应该是对象数据格式内部的差异。

@edit - 忘记了：

*   嵌套函数
*   函数指针
*   重载函数*

# javascript - 检查元素是否有类的最佳方法是什么？

> ID：10960573
> 
> 赞同：19
> 
> 时间：2012-06-09T11:23:09.947
> 
> 标签：javascript, dom

## 问题

如果元素有多个类，那么它将与常规属性值检查不匹配，因此我正在寻找检查对象是否在元素的 className 属性中具有特定类的最佳方法。

## 例子

```
// element's classname is 'hello world helloworld'
var element = document.getElementById('element');

// this obviously fails
if(element.className == 'hello'){ ... }

// this is not good if the className is just 'helloworld' because it will match
if(element.className.indexOf('hello') != -1){ ... } 
```

那么最好的方法是什么？

*请只是纯javascript*

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-09T11:25:07.120

```
function hasClass( elem, klass ) {
     return (" " + elem.className + " " ).indexOf( " "+klass+" " ) > -1;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-09T11:31:18.353

在现代浏览器中，您可以使用[classList](https://developer.mozilla.org/en/DOM/element.classList)：

```
if (element.classList.contains("hello")) {
   // do something
} 
```

在未实现但公开 DOM 原型的浏览器中`classList`，您可以使用链接中显示的 shim。

否则，您可以使用相同的 shim 代码来获得通用函数，而无需操作原型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-23T07:25:13.210

这个 2018 年使用 ES6

```
const hasClass = (el, className) => el.classList.contains(className); 
```

如何使用

```
hasClass(document.querySelector('div.active'), 'active'); // true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T11:27:26.903

你要求纯 javascript，所以这就是 jQuery 实现它的方式：

```
 hasClass: function( selector ) {
        var className = " " + selector + " ",
            i = 0,
            l = this.length;
        for ( ; i < l; i++ ) {
            if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) > -1 ) {
                return true;
            }
        }
        return false;
    }, 
```

`rclass`是 , 的正则表达式`[\n\t\r]`，以确保分隔类名的替代方法不是问题。`this`将是 jQuery 对对象的引用，从某种意义上说，它使代码比要求的更复杂，但在不了解其细节的情况下它应该是有意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T12:25:11.047

这应该适合你：

```
var a = [];
function getElementsByClassName(classname, node)  {
    if(!node) node = document.getElementsByTagName("body")[0];

    var re = new RegExp('\\b' + classname + '\\b');
    var els = node.getElementsByTagName("*");
    for(var i=0, j=els.length; i<j; i++)
        if(re.test(els[i].className)) a.push(els[i]);
        return a;
}

getElementsByClassName('wrapper');
for (var i=0; i< a.length; i++) {
    console.log(a[i].className);
} 
```

此代码将遍历 DOM 并搜索在主函数中定义为参数的类。然后它将使用正则表达式模式测试每个创建的类元素。如果找到将推送到一个数组，并将输出结果。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-09T11:37:19.100

首先，使用“ ”字符拆分类名，然后检查要查找的类的索引。

```
function hasClass(element, clazz) {
    return element.className.split(" ").indexOf(clazz) > -1;
} 
```

# python - 使用 PyPy 或 Shedskin 加速现有 Python 应用程序的一部分

> ID：10960576
> 
> 赞同：5
> 
> 时间：2012-06-09T11:23:28.667
> 
> 标签：python, pypy

我希望为现有应用程序带来速度改进，并且我正在寻找有关我可能的选择的建议。该应用程序是用 Python 编写的，使用 wxPython，并与`py2exe`（我只针对 Windows 平台）打包。应用程序的某些部分是计算密集型的，并且在解释型 Python 中运行速度太慢。我不熟悉 C，所以移植部分代码对我来说并不是一个真正的选择。

所以我的问题基本上是我是否清楚地了解了我在下面概述的选项，还是我从错误的方向接近这个？

*   **使用 pypy 运行：**今天我开始尝试使用 Pypy - 结果令人兴奋，因为我可以从 pypy 解释器运行大部分代码，并且我看到速度提高了 5 倍以上，而无需更改代码。但是，如果我理解正确，（a）支持 wxpython 的 Pypy[仍在进行中](https://groups.google.com/forum/#!topic/wxpython-dev/QSrl4MVzBTM)，并且（b）我[无法将其编译为 exe 以进行分发](https://stackoverflow.com/questions/10470800/compile-pypy-to-exe)。所以除非我弄错了，这对我来说似乎是不行的？没有办法打包东西，所以它的一部分是用 pypy 执行的？
*   **将代码转换为 RPython，使用 pypy 进行翻译**所以下一个选项似乎实际上是将部分代码重写为 pypy 受限语言，这似乎是一项相当大的工作。但如果我这样做，部分代码可以编译为可执行文件（？），然后我可以通过 ctypes（？）访问代码。
*   **其他受限选项**Shedskin 似乎是这里的流行替代品，这是否更符合我的要求？其他选项似乎是 Cpython、Psyco 和 Unladen，但它们都已被取代或不再维护。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T11:44:11.857

使用 PyPy 确实排除了 py2exe 和类似工具，至少在一个被移植之前（AFAIK 没有积极的工作）。尽管如此，由于不需要安装 PyPy 二进制文件，您可能会得到一个更复杂的发行版，其中包括您的 Python 源代码和 PyPy 二进制文件+stdlib，并使用一个小的包装器（批处理文件，可执行文件）来简化启动。我无法评论 PyPy 上的 WxPython 是否足够成熟，可以使用，但如果你描述了你的情况，pypy-dev、wxpython-dev 或任何一个 IRC 频道上的人可能会给出建议。

将您的代码翻译成 RPython 对我来说似乎不可行。翻译工具链并不是真正的通用开发工具，生成用于嵌入/ctypes 的 C dll 似乎并不简单。此外，RPython 代码确实*是*低级的，使您的 Python 代码受到足够的限制可能相当于重写其中的一半。

至于其他受限制的选项：您似乎将 CPython（用 C 编写的原始 Python 解释器）与 Cython（一种类似 Python 的语言的编译器，它发出适用于 CPython 扩展模块的 C 代码）混合在一起。这两个项目都很活跃。我对 Shedskin 不是很熟悉，但它似乎是一种用于开发整个程序的工具，与不受限制的 Python 代码几乎没有交互。Cython 似乎更合适：虽然它需要手动类型注释和较低级别的代码才能获得真正好的性能，但从 Python 中使用它是微不足道的：该项目的真正目的是生成扩展模块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T12:37:55.713

我肯定会研究 Cython，我一直在玩它，并且已经看到比纯 python 的速度提高了 ~100 倍。首先使用配置文件模块找到瓶颈。通常循环是去 Cython 时提高速度的最大机会。您还应该查看是否可以在 Numpy 中使用数组/向量操作而不是循环，如果这样也可以极大地提高性能。例如：

```
a = range(1000000)
for i in range(len(a)):
    a[i] += 5 
```

很慢，真的很慢。另一方面：

```
a = numpy.arange(10000000)
a = a +5 
```

很快，真的很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T03:03:26.740

更正：shedskin 可用于生成扩展模块以及整个程序。

# javascript - 自动向上滚动页面 javascript 滑块（我自己创建的）

> ID：10960578
> 
> 赞同：0
> 
> 时间：2012-06-09T11:23:44.377
> 
> 标签：javascript, jquery

所以我创建了 javascript 滑块，当它转到下一个选项卡时，它会自动向上拉页面。你可以在你的页面中测试它，你会看到，如何解决这个问题？它会向上拉页面，就像会有 href="#top" 和 ，但没有类似的东西。

代码 -

```
 <script type="text/javascript">
        jQuery(document).ready(function() {
            var time = <?php echo $data['tab1_speed']; ?>;          
            var tripleboxTitle = jQuery("triplebox-tab-title");
            setInterval(function() {
                tripleboxTitle.click(function(){
                    clearInterval();
                });
                var currentTab = jQuery('.triplebox-tab-active').attr("tab");
                var newTab = Number(currentTab)+1;
                if(newTab > 3) {
                    newTab = 1;
                }
                console.log(newTab);
                jQuery(".triplebox-tab-title").removeClass('triplebox-tab-active');
                jQuery('#triplebox-widget-tab'+newTab).addClass('triplebox-tab-active');
                jQuery(".triplebox-tab-default").hide();
                jQuery(".triplebox-tab-default").removeClass('triplebox-tab-default');
                jQuery("#triplebox-widget-tab"+newTab+"-widget").addClass('triplebox-tab-default').fadeIn(300);
            }, time);
        });
    </script>
    <a id="triplebox-widget-tab1" tab="1" class="triplebox-tab-title triplebox-tab-active" <?php if($data['use_color'] == 'default') { ?>style="color: <?php echo $data['color_text']; ?>; background: <?php echo $data['color_tabs']; ?>;" <?php } ?>><?php echo $data['tab1_name']; ?></a>
    <a id="triplebox-widget-tab2" tab="2" class="triplebox-tab-title" <?php if($data['use_color'] == 'default') { ?>style="color: <?php echo $data['color_text']; ?>; background: <?php echo $data['color_tabs']; ?>;" <?php } ?>><?php echo $data['tab2_name']; ?></a>
    <a id="triplebox-widget-tab3" tab="3" class="triplebox-tab-title" <?php if($data['use_color'] == 'default') { ?>style="color: <?php echo $data['color_text']; ?>; background: <?php echo $data['color_tabs']; ?>;" <?php } ?>><?php echo $data['tab3_name']; ?></a>

    <div id="triplebox-widget-tab1-widget" class="triplebox-widget triplebox-tab-default" <?php if($data['use_color'] == 'default') { ?>style="background: <?php echo $data['color_content']; ?>; color: <?php echo $data['color_text']; ?>;"<?php } ?>>
        <?php echo $content; ?>
    </div>
    <div id="triplebox-widget-tab2-widget" class="triplebox-widget" style=" <?php if($data['use_color'] == 'default') { ?>background: <?php echo $data['color_content']; ?>; color: <?php echo $data['color_text']; ?>;<?php } ?> display: none;">
        <?php echo $content2; ?>
    </div>
    <div id="triplebox-widget-tab3-widget" class="triplebox-widget" style=" <?php if($data['use_color'] == 'default') { ?>background: <?php echo $data['color_content']; ?>; color: <?php echo $data['color_text']; ?>;<?php } ?> display: none;">
        <?php echo $content3; ?>
    </div> 
```

另外，为什么我的 clearInterval(); 不工作？它仍在继续滚动。如何让它停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:41:06.213

您需要传递给函数“intervalID”

[https://developer.mozilla.org/en/DOM/window.setInterval#Example](https://developer.mozilla.org/en/DOM/window.setInterval#Example)

所以;

```
var tripleboxTitle = jQuery("triplebox-tab-title");
var myIntvID = setInterval(function() {
...
tripleboxTitle.click(function(){
   clearInterval(myIntvID);
}); 
```

# jpa - 如何在 JSF 应用程序中链接实体、会话和管理 bean

> ID：10960581
> 
> 赞同：1
> 
> 时间：2012-06-09T11:24:09.560
> 
> 标签：jpa, jsf-2, managed-bean

我是 Java EE 的新手，并使用 netbeans 7.1.2 开发了第一个 Java EE 登录应用程序。我有一个名为“Users”的数据库表和实体，其中包含很少的查询，一个包含持久性单元的会话 bean“UsersFacade”，下面名为“authenticate”的方法是代码

```
public Users authenticate(String login_id, String pwd) {       
    Users user = (Users) em.createNamedQuery("Users.authenticate")
            .setParameter("login_name", login_id) 
            .setParameter("password", pwd)
            .getResultList().get(0); 
```

最后我有 jsf 托管 bean，它是 sessionscoped，包含两个本地成员 login_name 和密码，jsf 页面 login.xhtml 与这些字段绑定，这个 bean 还具有身份验证方法，该方法反过来调用会话 bean 'UserFacade' 身份验证消息

```
 @ManagedBean
    @SessionScoped
    public class Login implements Serializable {
        private String login_name;
        private String password;

        private Users user;
        private @EJB UsersFacade user_services;

        public String authenticate() {
            user = user_services.authenticate(this.getLogin_name(),this.getPassword());
            if (user != null){            
                return "home";
            } else {
                FacesContext context = FacesContext.getCurrentInstance();
                context.addMessage("login", new FacesMessage("Invalid UserName and Password"));
                return "login";
            } 
```

到目前为止，一切都很好。但是，在主页上我想显示用户表的所有数据成员，以便我可以修改值并保存记录。在主页中我编码如下：

```
 <h:outputText value="Welcome #{login.user.login_name}" /> 
```

假设我已经在托管 bean 中声明了用户（实体）并且我应该能够访问实体的属性但是当我运行应用程序时，我得到以下错误：

“controller.Login”类没有“用户”属性

如果我有 3 个不同的 1 个托管 bean 实现（3 个不同的用户界面用于 3 个不同的角色/类型的用户），任何人都可以建议我做错了什么以及将 jsf 页面与托管 bean 绑定的理想方法。我正在使用 JPA（实体、会话）和 JSF 托管 bean。太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:32:56.243

> *“controller.Login”类没有“用户”属性*

当提到的类中没有提到的属性的 getter 方法时，您将收到此错误。确保您提供了有效的 getter 方法。

```
public Users getUser() {
    return user;
} 
```

# php - php。用户定义的比较功能如何工作？

> ID：10960585
> 
> 赞同：0
> 
> 时间：2012-06-09T11:24:39.107
> 
> 标签：php, compare

例子：

```
<?php
function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?> 
```

结果

```
0: 1
1: 2
2: 3
3: 5
4: 6 
```

在用户定义的比较函数' `cmd`'中，它有两个参数`$a`& `$b`。

第一个和第二个参数代表什么？它们是`array[x]`和`array[x+1]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:28:37.843

它们只是被排序数组中的两个元素，不一定是邻居。 `usort`执行某种排序算法（请参阅[http://en.wikipedia.org/wiki/Sort_algorithm#Comparison_of_algorithms](http://en.wikipedia.org/wiki/Sort_algorithm#Comparison_of_algorithms)），其中涉及比较各种元素对以确定它们的顺序。它使用您的回调函数来确定这一点。

# c - 如何查看 printf 的实现源码？

> ID：10960589
> 
> 赞同：0
> 
> 时间：2012-06-09T11:25:20.117
> 
> 标签：c, implementation, standard-library

我想看看 printf （和许多其他功能）是如何工作的。

我写

```
#include <Windows.h>
#include <stdio.h>
int main()
{
printf("");
return 0;
} 
```

在 main.c 代码中并转到右键菜单中的定义

但它显示了类似的东西

```
_Check_return_opt_ _CRTIMP int __cdecl printf(_In_z_ _Printf_format_string_ const char * _Format, ...);
#if __STDC_WANT_SECURE_LIB__
_Check_return_opt_ _CRTIMP int __cdecl printf_s(_In_z_ _Printf_format_string_ const char * _Format, ...);
#endif 
```

我找不到有关 printf 如何工作的任何提示。

任何人都可以让我知道如何学习标准库实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:42:15.617

干得好：

[http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c;h=d5690342536bc8cf948c786f663bb63f73f91f3a;hb=HEAD](http://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c;h=d5690342536bc8cf948c786f663bb63f73f91f3a;hb=HEAD)。

这来自 GNU C 库实现 (GLIBC)。

# .htaccess - 用 htaccess 中的 test.jpg 替换所有请求的图像

> ID：10960593
> 
> 赞同：1
> 
> 时间：2012-06-09T11:25:50.853
> 
> 标签：.htaccess, mod-rewrite

我正在尝试用我的 .htaccess 文件（运行 Apache2.2/Coldfusion8）中的测试图像替换所有请求的图像，如下所示：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  RewriteRule \.(?:jpe?g|?:JPE?G|gif|png)$ test.jpg 
</IfModule> 
```

test.jpg 与我的 .htaccess 文件位于同一个文件夹中，除了上面的代码片段之外，我已经清除了该文件中的所有内容。问题是，仍然没有任何反应。

**问题：**
有人可以告诉我我做错了什么吗？

**编辑：**
我猜必须是 httpd.conf 设置中的内容。我已经设定：

```
 AllowOverride All 
```

在文档根目录中，但仍然没有做任何事情。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:27:23.913

尝试向 htaccess 添加一些随机文本，看看是否收到 500 错误消息。如果没有，则未启用 htaccess。

# ruby-on-rails - 如果验证失败则运行命令 rails 3

> ID：10960596
> 
> 赞同：0
> 
> 时间：2012-06-09T11:26:04.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, callback

我想运行这些命令：

```
require 'fileutils'
FileUtils.rm_rf Dir.glob("#{Rails.root}/public/uploads/tmp/*") 
```

**如果通过回调在我的模型中验证失败：**

我见过回调`after_validation`。

如何通过`after_validation`回调检查验证是否正常或验证不正确（KO）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:35:58.040

你可以检查

```
if your_model.errors.empty?
   # run commands
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T11:46:04.340

```
class User < ActiveRecord::Base

  after_validation :do_something_if_validation_fails, :unless => lambda { errors.empty? }

  protected
  def do_something_if_validation_fails
    logger.info "Validation failed lets do something"
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:09:40.393

我的解决方案是：

```
after_validation :empty_tmp

  protected
  def empty_tmp
   if self.errors.any?
    require 'fileutils'
    FileUtils.rm_rf Dir.glob("#{Rails.root}/public/uploads/tmp/*")
   end
  end 
```

# java - 屏幕尺寸百分比计算器返回错误尺寸

> ID：10960597
> 
> 赞同：0
> 
> 时间：2012-06-09T11:26:26.433
> 
> 标签：java, math, bitmap

我有一个函数用于从可绘制文件夹中返回位图。（我不使用drawable DPI文件夹，浪费时间）

无论如何，该函数检索位图，位图作为视口大小的指定百分比返回。

目前它返回的百分比小于指定的百分比，例如接地元素：

百分比应该是宽度的 100%，即 480 像素。显然这应该是 480 但它返回 400？我必须在这里遗漏一些简单的数学运算，或者代码如下：（我也应该使用 createscaledbitmap 吗？）

```
public Bitmap getBitmapSized(String name, int percentage, int screen_dimention, int frames, int rows)
{
    _tempInt = _context.getResources().getIdentifier(name, "drawable", _context.getPackageName());
    _tempbitmap = (BitmapFactory.decodeResource(_context.getResources(), _tempInt, _BM_options));

    _bmWidth = _tempbitmap.getWidth() / frames;
    _bmHeight = _tempbitmap.getHeight() / rows;

    _newWidth = (screen_dimention / 100) * percentage;
    _newHeight = (_newWidth / _bmWidth) * _bmHeight;

    //Round up to closet factor of total frames (Stops juddering within animation)
    _newWidth = _newWidth * frames;

    //Output the created item
    Log.w("Screen Width: ", Integer.toString(screen_dimention));
    Log.w(name, "Item");
    Log.w(Integer.toString((int)_newWidth), "new width");
    Log.w(Integer.toString((int)_newHeight), "new height");

    //Create new item and recycle bitmap
    Bitmap newBitmap = Bitmap.createScaledBitmap(_tempbitmap, (int)_newWidth, (int)_newHeight, false);
    _tempbitmap.recycle();
    System.gc();

    return newBitmap;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:31:54.350

```
_newWidth = (screen_dimention / 100) * percentage; 
```

正在做整数除法。

你可能想要

```
_newWidth = (screen_dimention / 100.0) * percentage; 
```

或者如果 _newWidth 实际上应该被截断为整数，您可能想要

```
_newWidth = (screen_dimention * percentage) / 100; 
```

稍后进行截断。

# ruby-on-rails - 使用 gmaps4rails gem 点击 Google Map 获取地址

> ID：10960609
> 
> 赞同：0
> 
> 时间：2012-06-09T11:28:00.390
> 
> 标签：ruby-on-rails, google-maps, gmaps4rails

我正在使用 rails 3.2.3 和 gmaps4rails gem。

我有一个模型叫做联系。在联系对象中，我有一个名为地址的文件。

现在我已将联系人定义为acts_as_gmappable，并且gmaps4rails_address 将地址字段显示为谷歌地图中的标记。

现在，当我们添加新联系人时，我想添加一个功能，当我们点击带有点击位置的谷歌地图时，地址将自动填充。

如何在 gmaps4rails gem 的帮助下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:42:04.023

wiki 上有一个很好的指南可能会有所帮助。查找“在表单中删除标记并更新字段属性”部分

[https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Javascript-goodies)

只需包含 javascript，并使用您的实际字段 ID 更新以下内容（您可能需要在表单上隐藏一些 :lat :lon 字段）

```
$('#location_attributes_latitude').val(latLng.lat());
$('#location_attributes_longitude').val(latLng.lng());
$('#location_attributes_gmaps_zoom').val(Gmaps.map.serviceObject.getZoom()); 
```

保存时，您需要检查用户是否手动输入了地址，或者使用了地图。

如果他们使用了地图，您将需要一种方法来反向地理编码并使用 :lat :lon 值从 Google 获取地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:14:36.170

在带有 erb 的 rails 3.2 中，要添加 id 你应该这样做：

```
<%= text_field_tag(:latitudex, "", :id => "location_attributes_latitude") %> 
```

感谢您的回答，“字段ID”是我所缺少的。

# android - 单选按钮多行

> ID：10960611
> 
> 赞同：3
> 
> 时间：2012-06-09T11:28:14.953
> 
> 标签：android, radio-button, rows

我想显示同一个单选组的 6 个单选按钮。但是所有 6 个单选按钮都保持在同一行并离开屏幕。如何在两行中显示它们（每行 3 个单选按钮）？我为我尝试了一切可能的东西（我是 android 新手）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T12:32:16.047

通过搜索，似乎没有办法做到这一点，因为 RadioGroup 使用不换行的 LinearLayout。由于单选按钮必须是单选组的直接子级，因此您不能将子布局添加到单选组。

这意味着您必须手动实现此布局行为。两种可能的选择是：

*   创建 RadioGroup 的副本以扩展不同的布局，或者至少允许您动态控制它。
*   实现您自己的自定义布局以替换`RadioGroup`扩展您选择的布局，并实现`OnClickListener`. [这里](https://stackoverflow.com/questions/2381560/how-to-group-a-3x3-grid-of-radio-buttons)有一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:50:43.727

一个简单的答案是将 RadioGroup 包装在 ScrollView 中，以便用户可以滚动到屏幕外按钮（不是很优雅，但也不是代码密集型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T07:44:38.103

由marginTop和marginLeft动态生成，调整需要在同一行radiobutton。一、获取屏幕宽度，设置layoutparams marginLeft为屏幕宽度的一半，marginTop的高度需要根据具体的radiobutton进行调整。eg：</p>

```
holder.question = (TextView) convertView.findViewById(R.id.topic_item_question);
            holder.option = (RadioGroup) convertView.findViewById(R.id.topic_item_option);
            holder.option1 = (RadioButton) convertView.findViewById(R.id.topic_item_option1);
            holder.option2 = (RadioButton) convertView.findViewById(R.id.topic_item_option2);

            //为了能够在一行显示两个radiobutton:获取屏幕的宽度
            WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
            int width = wm.getDefaultDisplay().getWidth();//左侧设置的间距
            int height = DensityDpToPx.dpToPx(context, 24);//处于第二个的高度间距

            LinearLayout.LayoutParams params = (LayoutParams) holder.option2.getLayoutParams();
            params.setMargins(width / 2, -height, 0, 0);
            holder.option2.setLayoutParams(params);

            holder.option3 = (RadioButton) convertView.findViewById(R.id.topic_item_option3);
            holder.option4 = (RadioButton) convertView.findViewById(R.id.topic_item_option4);

            LinearLayout.LayoutParams paramsTwo = (LayoutParams) holder.option4.getLayoutParams();
            paramsTwo.setMargins(width / 2, -height, 0, 0);
            holder.option4.setLayoutParams(paramsTwo); 
```

# cloud-foundry - 微云虚拟机

> ID：10960613
> 
> 赞同：0
> 
> 时间：2012-06-09T11:28:29.350
> 
> 标签：cloud-foundry

我正在研究 Java 框架上的污点跟踪模型，并且我增强了现有的核心 Java 类，如 String、StringBuilder 等，并基于这些新的（自编辑的）Java 框架构建了一个虚拟机。

CloudFoundry 是在本地虚拟机上运行，​​还是创建自己的虚拟机？我将它与 VMware 播放器一起使用。

如果它创建自己的虚拟机，有没有办法获得 SSH 连接并设置新的虚拟机（我自己编辑的）？

这个项目纯粹是为了学术目的，所以 Sun 的 T&C 没有被限制。

亲切的问候，阿塞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:57:34.003

如果您使用的是 Micro Cloud Foundry，那么一切都在虚拟机中运行，包括用于执行代码的 Java VM。您使用 vmc push 将代码部署到 Micro Cloud Foundry 实例中，并在其中执行。

请记住，您无权修改“真实”（非微型）cloudfoundry.com 或其他 Cloud Foundry 实例（如 AppFog）上的系统 JVM，您使用的是已部署的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:12:34.227

您可以使用（在 vmware player/workstation/fusion 中）alt+f2 并登录，而不是 SSHing（对于 microcloud）。然后使用任何你想要的。尽管由于更新，VMWare 不鼓励这样做。

# algorithm - 如何找出图像的内容

> ID：10960615
> 
> 赞同：-1
> 
> 时间：2012-06-09T11:28:51.893
> 
> 标签：algorithm, search-engine, graph-algorithm

有没有办法理解图像的含义？我的意思是，如果我扫描一张图片，我怎么知道这张图片是关于一个特定对象的？我在想，如果我脑子里有一些形状，比如说一个特定对象的形状 - 图案，它符合我正在寻找的对象的要求，那么它一定是我正在寻找的。无论如何，我正在考虑一种算法来扫描图片数据库并找出我实际正在寻找的图片，有没有已知的方法来完成这种操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:46:57.707

如果我正确阅读了您的问题...

即使对于像谷歌这样成熟的公司来说，这也是一项非常艰巨的任务，尽管他们正试图沿着这些方向创造一些东西。

如果您想了解这种系统的行为方式，请查看适用于 Android 的 Google Goggles。您还会注意到，它需要非常特定的环境才能稍微可靠，但基础技术已经存在。

# c++ - popen 管道减慢其他线程

> ID：10960622
> 
> 赞同：2
> 
> 时间：2012-06-09T11:30:10.880
> 
> 标签：c++, multithreading, pthreads, popen

我的多线程应用程序有问题。当在一个线程执行同步`popen()`命令时 - 其他应用程序线程显着减慢。`popen()`带有execute的线程`ffmpeg`，会产生高负载。

通常，其他线程执行时间为 0.0007 ms。并且在`popen`使用时，一些线程正在将执行时间增加到 14-20 秒。

如何解决这个问题呢？

系统是 FreeBSD 6.4

```
 FILE *pipe;
    char buff[512];
    if ( !(pipe = popen( command.c_str(), "r")) )
    { // if pipe is NULL
        return false;
    }

    while ( fgets(buff, sizeof(buff), pipe) != NULL )
    {
        ptr_output->append(buff);
    } 
```

这是 popen 的新代码，但无济于事：[正确的代码 - 带有 popen 的非阻塞管道](https://stackoverflow.com/questions/10962044/correct-code-non-blocking-pipe-with-popen)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:06:06.853

fgets 是一个阻塞读取，所以当上面的线程等待从管道读取数据时，其他线程被阻塞。在发出读取之前，您将希望将 select/poll for 与文件描述符一起使用以查看管道上是否有数据。这样，你可以抢占这个线程，让其他线程运行做有用的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T15:00:36.413

不同线程之间有什么关系？如果它们相互依赖，这意味着它们来回发送数据，那么如果一个线程变慢，那么其他线程也会变慢是有道理的。

其他需要考虑的是正在执行的线程如何`ffmpeg`影响系统的其余部分。例如，如果它是一个单核 CPU 并且该特定线程正在产生高 CPU 负载，那么这将为其余线程留下更少的周期，从而减慢它们的速度。当然，从 0.0007 毫秒到 14 - 20 秒的变化确实是极端的！

高负载线程可能滥用（持有/锁定时间过长）的线程之间是否有任何其他资源共享（标准输入、互斥锁等），从而导致其他线程的饥饿？

此外，我建议对应用程序（或至少一些线程）进行分析，以了解它为什么慢得多。我几乎肯定你会发现一些线程被阻塞等待一个公共资源，比如互斥锁或类似的东西。

如果这是 linux，这里有 2 个 Stack Overflow 问题可能会有所帮助：

*   [ARM 设备上代码优化的 C++ 技巧](https://stackoverflow.com/a/10800412/1158895)
*   [如何在 linux 中分析 pthread 互斥锁？](https://stackoverflow.com/q/10852637/1158895)

# c# - 使用 C# Congugate 梯度稀疏矩阵求解器

> ID：10960625
> 
> 赞同：-1
> 
> 时间：2012-06-09T11:30:50.387
> 
> 标签：c#, sparse-matrix

我期待将 Congugate Gradient 稀疏矩阵求解器的算法转移到 C# 中。如果有人有 CG 或 PCG 的 C# 代码，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:53:25.267

也许这可以帮助你，但老实说，这似乎不是一个经过深思熟虑的问题。

[http://www.koders.com/csharp/fidA522A433065B5D359C943562507882606B1AD25D.aspx?s=search](http://www.koders.com/csharp/fidA522A433065B5D359C943562507882606B1AD25D.aspx?s=search "Koders.com 文档链接")

# websocket - SignalR 的持续 websocket 流量

> ID：10960628
> 
> 赞同：1
> 
> 时间：2012-06-09T11:31:12.130
> 
> 标签：websocket, signalr

一段时间以来，我一直在使用 serverSentEvents 传输成功地使用 SignalR。我刚刚在 Windows Server 2012 RC 上安装了我的应用程序，现在当我连接 SignalR 时正在使用 websockets（如您所料）。

它似乎工作正常，除了服务器和浏览器之间有连续的 websocket 流量流 - 大约每秒一次它发送大约 90 个字节。从 Chrome 的调试器窗口来看，它似乎每次都在发送连接升级请求。

我成功接收到服务器发送的消息，但我似乎比使用长轮询时更糟。浏览器是 Chrome 版本 19.0.1084.52。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T06:37:38.397

这归结为我自己的愚蠢 - 但我想我会回答以防其他人有同样的问题。

我已经构建了解决方案 SignalR.Hosting.AspNet 而不是 SignalR.Hosting.AspNet45 所以 AcceptWebSocketRequest 方法抛出了 NotSupportedException；因为客户端 websocket 升级失败，它只是在大约一秒钟后再次尝试。

我猜在这种情况下客户端*可能会*显示错误或其他内容以帮助调试。

# wcf - JayData - 服务器端验证 (CRUD)

> ID：10960630
> 
> 赞同：0
> 
> 时间：2012-06-09T11:31:39.163
> 
> 标签：wcf, wcf-ria-services, jaydata

我想使用 JayData + WCF/RIA 服务创建一个应用程序，但我需要检测客户端（Javascript）实体中的更改以将业务逻辑放在服务器端。

例如：如果我更改客户的名称，我想在服务器上更新它之前进行一些验证。

反正有做这样的事情吗？

```
 [Insert]
    public void InsertCustomer(Customer customer)
    {
        // Some validation before insert
    }

    [Update]
    public void UpdateCustomer(Customer customer)
    {
        // Some validation before update
    }

    [Delete]
    public void DeleteCustomer(Customer customer)
    {
        // Some validation before delete
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:48:14.210

也许这不是您需要的，但我试了一下：您可以使用附加到字段的自定义验证器函数来验证客户端上的字段。操作方法如下： 使用 JaySvcUtil.exe 导入数据上下文后，修改实体并使用 customValidator 装饰字段：

```
$data.Entity.extend("UserModel", {
    Id: { type: "int", key: true, computed: true },
    UserName: { type: "string", required: true,
               customValidator: function (v) { return !v || v.length == 3 }, 
               errorMessage: "custom error, length: 3" }
}); 
```

在当前版本中，没有实体级别的验证功能。如果您希望他们成为，请在 JayData.org/backlogs 上提交用户故事[或在 github.com/jaydata/jaydata](http://github.com/jaydata/jaydata)[上](http://jaydata.org/backlogs)提交问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:08:44.917

为了安全地解决这个问题，您需要在服务器端（而不是在 JayData 中）执行此操作，并且您需要以 .NET 方式或自己实现身份验证然后检查 onupdate 服务器端方法并进行如下操作：

C#代码：

```
[Insert]
public void InsertCustomer(Customer customer) {
    if (! customer.LoginName == Thread.CurrentPrincipal.Identity.Name ) {
      throw new SomeValidtionException()
    }
} 
```

这是你需要的吗？

# android - Android 自动触摸事件

> ID：10960632
> 
> 赞同：2
> 
> 时间：2012-06-09T11:31:45.310
> 
> 标签：android, touch-event

当在 android 中检测到 touch_down 时，会在一段时间后自动触发 touch_up（时间取决于硬件）我想这是出于安全原因。在我的应用程序中，在 touch_up 事件上，一些动作已经完成，我不想在这些自动 touch_up 事件上执行它们。

你知道吗： - 如果有可能摆脱它们（操作系统没有将它们发送到我的视图中）？- 或者您是否有想法检测到 action_up 来自这种（自动），而不是实际上来自用户真正举起手指？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:31:20.837

在与摩托罗拉的开发人员讨论后，问题来自摩托罗拉。他们在 android 框架之上实现了一些东西来防止触摸事件被卡住。...对此无能为力...

# c - 相同类型结构的指针内的结构

> ID：10960640
> 
> 赞同：1
> 
> 时间：2012-06-09T11:33:15.050
> 
> 标签：c, pointers, data-structures, pointer-to-array

```
typedef struct roads road; 
typedef struct city city; 
```

我正在实现一个代码，它有一条道路，两个城市在它的边缘，我将从一个文件中读取它们并将它们链接起来。结构就像

```
NewYork    250km    LosAngeles
LosAngeles 120km    Florida 
```

这样，我将拥有一个 ROADS 数组来存储我读过的道路。

```
struct city{
   char* city_name;
}

struct roads{
    int distance;
    struct city *next_city,*previous_city;
    struct roads **neigbors; // is this possible 

}

    size_t size = sizeof(road) + sizeof(city);
    road *ROADS = malloc(size); 
```

这样的代码和分配的缺点是什么，我正在考虑为一个国家制作地图。所有城市都应该有一个指向它的邻居的指针，这样当有人问他们之间的距离是多少时，我的程序应该能够回答它。

```
char *city_name = malloc(sizeof(char)*length_of_name);
road *given_road = malloc(sizeof(road));
city *given_city = malloc(sizeof(city)); 
```

说到邻居部分；

```
for(index = 0; given_road[index] != NULL; index++)
    road *given_road->neighbors[index] = malloc(sizeof(city)); 
```

这部分和最后一部分是我感到困惑的部分，我唯一的链接参考是城市的名称；

```
if(strcmp(ROADS[i]->next_city->city_name,ROADS[j]->previous_city->city_name)){
    if(ROADS[i]->neighbors[0]==NULL)
        ROADS[i]->next_city = ROADS[j]->previous_city;
        ROADS[i]->neighbors[0] = ROADS[j]->previous_city;
        ROADS[j]->neighbors[0] = ROADS[i]->next_city; //I totally don't know what am I doing here} 
```

我打算如果 ROADS[i] 的 city_name 中的道路与 ROADS[j] 的 city_name 相同（如 LosAngeles 示例），我将尝试通过邻居结构将它们连接起来，以便“NewYork 250km LosAngeles ” 道路有一个邻居，即“洛杉矶 120 公里佛罗里达”，反之亦然。如果从文件中读取“LosAngeles 500km Nebraska”之类的内容，那么我首先提到的两条道路也将有两个邻居和两个链接。ROADS 阵列现在存储 3 个道路结构。当然，当我制作道路结构时，我正在为 ROADS 数组分配内存。每次道路来；

```
ROADS = realloc(ROADS,i*size + size); 
```

我做错的地方在哪里？任何提示对于我进一步开发此代码都是完美的，甚至说“我应该搜索的概念”以便做我的想法会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:47:12.673

我更愿意将我的图存储为[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)。这也非常适合您存储边缘重量的要求。您可以使用城市名称的哈希值来更快地查找和比较顶点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T14:26:10.963

为了解决您的帖子的标题，将指针存储在引用相同类型结构的结构中是完全有效的，并且一直在链接列表中使用，这与您的用例非常相似 - 例如，任何时候您需要将类似的链接在一起结构。

看看[这个页面](http://www.thegeekstuff.com/2012/08/c-linked-list-example/)。

我看到你有一个额外的指向，你可以有一个指向结构的指针数组。对我来说似乎是一个合理的方法。

# c++ - 非常奇怪的 C++ 错误

> ID：10960646
> 
> 赞同：1
> 
> 时间：2012-06-09T11:34:22.437
> 
> 标签：c++

我在写代码的时候遇到了一个很奇怪的问题，下面是我的C++代码：

```
#include <iostream>
using namespace std;

int main()
{
    int qnum;
    cin >> qnum;
    int series[3];
    cin >> series[3];
    cout << qnum;
} 
```

例如，如果我为 qnum 输入 2，为 series[3] 输入 5，则在最后一行代码中 qnum 的值将被覆盖。这个问题只会在 series 的输入为 3 时出现。对于 new 的唯一解决方案是将“静态”属性添加到 qnum，如下所示：

```
#include <iostream>
using namespace std;

int main()
{
    static int qnum;
    cin >> qnum;
    int series[3];
    cin >> series[3];
    cout << qnum;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-09T11:36:48.657

没有`series[3]`。只有`series[0]`,`series[1]`和`series[2]`(数组从 0 到 N-1)。

您正在注销数组的末尾，这会导致未定义的行为。

# c# - 在不继承的情况下覆盖受保护的虚拟

> ID：10960647
> 
> 赞同：-1
> 
> 时间：2012-06-09T11:34:33.677
> 
> 标签：c#, .net, wpf, datagrid, wpftoolkit

我的应用程序中有一堆 DataGrid。我需要为所有这些覆盖一些受保护的虚拟方法。有什么比使用从不那么熟悉的名称派生的 DataGrid 类更好的方法吗？我希望像附加属性这样的解决方案能够使用自定义属性指定覆盖行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:44:34.930

在 C# 中，如果不从该方法继承，则无法覆盖该方法。[MSDN 覆盖](http://msdn.microsoft.com/en-us/library/ebca9ah3%28v=vs.71%29.aspx)。覆盖方法的唯一方法是从该基类继承。您是否有不想从基类继承的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:10:35.557

你必须覆盖。覆盖您自己的 MyOwnDataGrid（或更短的名称）中的方法。然后在使用数据网格的任何地方使用该类。如果您有数百个网格，您必须有一个奇怪的应用程序设计。如果您不想更改创建的每个位置，`new DataGrid()`我相信您可以更改 using 指令。

```
using DatGrid = My.NameSpace.MyOwnDataGrid; 
```

您仍然必须使用数据网格对每个文件执行此操作，这会使代码阅读起来有点混乱，所以我认为最好将“new DataGrid（”）全局搜索/替换为“new MyOwnDataGrid（”）完成。

# java - Google App Engine - 早期了解 Java 语言支持教程

> ID：10960654
> 
> 赞同：1
> 
> 时间：2012-06-09T11:35:35.480
> 
> 标签：java, google-app-engine

最近我开始使用 google app engine 和 eclipse 尝试创建一个简单的 java 应用程序。问题是今天在官方 GAE 网站上给出的“留言簿”示例略有不同，更复杂，我很难重新制作您很可能已经看过的视频中的示例：

[http://www.youtube.com/watch?v=P3GT4-m_6RQ](http://www.youtube.com/watch?v=P3GT4-m_6RQ)

如果有人在其他网站上看到此代码或知道任何其他资源，如书籍、期刊、文章等，这将帮助我自己重新创建示例，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:25:58.237

这对任何初学者来说都是最好的。

[https://developers.google.com/appengine/docs/java/gettingstarted/](https://developers.google.com/appengine/docs/java/gettingstarted/)

# android - Android图库示例

> ID：10960656
> 
> 赞同：0
> 
> 时间：2012-06-09T11:36:41.470
> 
> 标签：android, image-gallery

我刚刚为 Gallary 做了一些代码，现在它工作正常。我已经按照这个链接访问了[http://developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)。但是我的概念仍然不清楚。我在那里使用了样式，这是什么？还有一件事，是否可以更改画廊显示模式（我的意思是它的默认模式是 LR 或 RL 我们可以将其更改为 Top-Bottom 或 Bottom -最佳）。

```
TypedArray attr = mContext
                .obtainStyledAttributes(R.styleable.HelloGallery);
        mGalleryItemBackground = attr.getResourceId(
                R.styleable.HelloGallery_android_galleryItemBackground, 0);
        attr.recycle(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:44:12.713

Jay，您无法更改 Android 中图库的默认行为。

如果您仍然想让画廊作品上下移动，您需要专门为您的应用程序定制画廊。

# wpf - 如何在 ItemsControl 上放置标题？

> ID：10960657
> 
> 赞同：2
> 
> 时间：2012-06-09T11:36:41.793
> 
> 标签：wpf, listbox, itemscontrol

我想显示一个带有像 DataGrid 这样的标题的产品列表。但我不知道如何在列表框中显示标题。

```
<ListBox ItemsSource="{Binding CustomSalesProducts, Mode=TwoWay}" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" Template="{DynamicResource ListBox}" Style="{DynamicResource ListBoxStyle1}" BorderBrush="{DynamicResource BorderBrush}" Foreground="{DynamicResource ForegroundBrush}" FontFamily="Palatino Linotype" FontSize="13.333" ItemContainerStyle="{DynamicResource ListBoxItemStyle}" SelectedValue="{Binding CurrentCustomSale, Mode=TwoWay}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel CanHorizontallyScroll="True" CanVerticallyScroll="True" Orientation="Vertical"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel>

                    <StackPanel Orientation="Horizontal">
                        <TextBox Text="{Binding ProductName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Quantity" KeyUp="TextBox_KeyUp"/>
                        <TextBox Text="{Binding OrderQty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Quantity" KeyUp="TextBox_KeyUp">
                        </TextBox>
                            <TextBox Text="{Binding UnitSalePrice, Mode=TwoWay}" Style="{DynamicResource MiniTextBoxStyle}"  Margin="{StaticResource Margin4}" ToolTip="Price" IsReadOnly="True" />
                        <TextBox Text="{Binding MainDiscount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Discount" KeyUp="TextBox_KeyUp"/>
                        <TextBox Text="{Binding Discount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" IsReadOnly="True" Style="{DynamicResource MiniTextBoxStyle}" ToolTip="Line Discount" KeyUp="TextBox_KeyUp"/>
                    <TextBox Text="{Binding TaxAmount, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}"  ToolTip="Tax Amount" IsReadOnly="True" />
                    <TextBox Text="{Binding LineTotal, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="{StaticResource Margin4}" Style="{DynamicResource MiniTextBoxStyle}"  ToolTip="Total" IsReadOnly="True" />

                    </StackPanel>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ListBox> 
```

我想要这种输出

```
--------------------------------------
ID   Name          Price      Discount
1   xxxx            1245        8
2   xxxxxxxx        4354        9
..... and so on.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:22:43.397

我认为您真正想要的是带有 GridView 视图的[ListView 。](http://msdn.microsoft.com/en-us/library/system.windows.controls.listview.aspx)

```
<ListView ItemsSource="{Binding Source=
                       {StaticResource EmployeeInfoDataSource}}">
  <ListView.View>
    <GridView AllowsColumnReorder="true"
              ColumnHeaderToolTip="Employee Information">
      <GridViewColumn DisplayMemberBinding=
                          "{Binding Path=FirstName}" 
                      Header="First Name" Width="100"/>
      <GridViewColumn DisplayMemberBinding=
                          "{Binding Path=EmployeeNumber}" 
                      Header="Employee No." Width="100"/>
    </GridView>
  </ListView.View>
</ListView> 
```

# c# - ASP.NET MVC 3 中的@Html.ActionLink

> ID：10960658
> 
> 赞同：7
> 
> 时间：2012-06-09T11:36:44.320
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, html-helper

我在 .cshtml 中的操作链接是这样的：

```
@Html.ActionLink("Reply", "Post_Reply", new { item.ID, item.Post_ID, item.Reply_ID }) 
```

我在控制器中的方法是这样的：

```
[Authorize]    
public ActionResult Post_Reply(int PostId=0, int Id = 0, int ReplyId = 0)   
{   
    post posts = new post();    
    posts.ID = Id;    
    return View(posts);   
} 
```

但只有 item.ID 的值通过了，其他两个值 item.Post_ID 和 item.Reply_ID 没有通过..谁能指导我..谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T12:12:14.393

看起来您使用了错误的重载`@Html.ActionLink`：

尝试：

```
@Html.ActionLink("Reply", "Post_Reply", new { Id = item.ID, PostId = item.Post_ID, ReplyId = item.Reply_ID }, null) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T12:10:11.100

问题是，当您将参数值添加到操作链接时，您还必须添加 Html 属性，请使用以下命令：

```
@Html.ActionLink("Reply", "Post_Reply", new { Id = item.ID, PostId = item.Post_ID, ReplyId = item.Reply_ID }, null) 
```

添加`Null`Html 属性的值将允许发送正确的参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T11:39:20.630

尝试

```
@Html.ActionLink("Reply", "Post_Reply", new { Id = item.ID, PostId = item.Post_ID, ReplyId = item.Reply_ID }) 
```

您的问题是您传递的匿名对象不包含变量名，因此它不会映射到您的 Action 参数。

# varnish - 有没有办法在自定义清漆错误页面中显示中文字符，或者在清漆中显示静态 html 文件

> ID：10960659
> 
> 赞同：0
> 
> 时间：2012-06-09T11:36:47.537
> 
> 标签：varnish

我自定义了 varnish 500 错误页面，但我发现它无法显示中文字符，

我尝试从静态文件传递错误页面，但它不起作用 [Varnish 的用户友好错误页面](https://stackoverflow.com/questions/5961378/user-friendly-error-pages-from-varnish)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:27:58.740

[您指向](https://stackoverflow.com/a/7556756/193886)的示例使用 sprintf 和 strcat 操作文件内容，这在 UTF-8 上可能效果不佳（您的文件像标题状态一样采用 UTF-8 格式，对吧？）。您可以使用 memcpy 之类的基于字节的 C 函数来测试您的运气，或者使用 utf-8 证明字符串复制/格式化函数（从未在 C 中处理过这些东西）。

你能更详细地描述*它没有工作吗？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:17:45.133

以下是 varnish.vcf 中相关的完整部分

```
C{
  #include <stdio.h>
  #include <stddef.h>
  #include <stdlib.h>
}C
sub vcl_error {

set obj.http.Content-Type = "text/html; charset=utf-8";
set obj.http.Retry-After = "5";
if ((obj.status == 500 || obj.status == 503)&&client.ip !~ flnet){
   C{
     FILE    *infile;
     char    *buffer;
     char fname [50];
     long    numbytes;

        sprintf(fname, "/var/www/html/%d.html", VRT_r_obj_status(sp));
     infile = fopen(fname, "r");
      if(infile == NULL)
         return 1;

       fseek(infile, 0L, SEEK_END);
       numbytes = ftell(infile);
       fseek(infile, 0L, SEEK_SET);
       buffer = (char*)calloc(numbytes, sizeof(char));
       fread(buffer, sizeof(char), numbytes, infile);
       fclose(infile);
       VRT_synth_page(sp, 0, buffer, "<!-- XID: ", VRT_r_req_xid(sp), " -->", vrt_magic_string_end);

       free(buffer);
     return 0;
    }C
  } 
```

# java - "javaw.exe" won't exit after System.exit(0)

> ID：10960670
> 
> 赞同：4
> 
> 时间：2012-06-09T11:38:51.870
> 
> 标签：java, multithreading, jframe, javaw

I'm writing this Java program in which I have a JFrame and a Thread. Everything goes fine, except when I click the 'X' button to close the program, the program itself closes (frame and it's resources get destroyed), but the "javaw.exe" process won't end. I have to terminate that manually all the time.

I tried of course setDefaultCloseOperation(JFrame.*EXIT_ON_CLOSE*) , I even tried awt window listener with System.exit(0) in it, but still no success.

Any ideas to help?

This is the my code. [It needs JavaCV to be installed on your machine.]

```
class MyGrabber implements Runnable {
    final int INTERVAL = 1000;// /you may use interval
    IplImage image;
    CanvasFrame frame = new CanvasFrame("Web Cam");

    public MyGrabber() {
        frame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    }

    @Override
    public void run() {
        FrameGrabber grabber = new OpenCVFrameGrabber(0); // 1 for next camera
        int i = 0;
        try {
            grabber.start();

            while (true) {
                image = grabber.grab();
                if (image != null) {
                    cvSaveImage("test.jpg", image);
                    // show image on window
                    frame.showImage(image);
                }
                Thread.sleep(INTERVAL);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (com.googlecode.javacv.FrameGrabber.Exception e) {
            e.printStackTrace();
        }
    }
}

public class TestGrabber {
    public static void main(String[] args) {
        MyGrabber gs = new MyGrabber();
        Thread th = new Thread(gs);
        th.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T13:31:14.290

Remember this,

```
The JVM will terminate only and only when 
All the Non-Daemon threads including the main thread has terminated.

You can try System.exit(0) on the main thread, which runs the main method. 
```

Try creating a class which extends `JFrame`,and then place

`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);` in its constructor.

and yes.. in your main method where you make your frame visible, use the EventQueue..

Eg:

```
public static void main(String[] args){
   EventQueue.invokeLater(new Runnable(){

   public void run(){
         myframe.setVisible
        }
   });
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T13:56:53.940

*   Exit your program (using System.exit() or JFrame.EXIT_ON_CLOSE)
*   Go to the taskmanager and note the process id (pid)
*   Open a terminal window and `cd c:\<path>\java\bin` (replace `<path>` with your Java installation)
*   Use `jstack <pid> | more`. Replace `<pid>` with the process id from task manager.

Look at the threads that are not flagged as "daemon". There will be at least one such thread which hangs and has the shutdown handler in the stack trace.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T16:03:23.160

I think I found the problem point. The problem seems to appear at the "grabber.start();" line. (Because by commenting that line, everything went fine. It's an issue openCV library shows out. So I guess it won't be that easy getting rid of this problem.

Thanks everyone for the effort though.

Edited: [FOUND THE SOLUTION]

They seem to have the OpenCVFrameGrabber class implemented the Thread Runnable interface, thus, the object created by this class subsequently runs like a thread. (Not the same though). So anyway, as a solution to this problem, I did release the grabber first:

```
public Test() {
    //canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
    canvas.addWindowListener(new WindowAdapter() {

        @Override
        public void windowClosing(WindowEvent e) {
            System.out.println("\nClosing it.");
            try {
                //if (grabber != null)
                        grabber.release();
                        //grabber.stop();
            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            System.exit(0);
        }
    });
} 
```

# python - 如何获得文件硬盘上的确切内存地址？

> ID：10960672
> 
> 赞同：0
> 
> 时间：2012-06-09T11:39:06.600
> 
> 标签：python

我将制作一种擦除文件永远无法恢复的移除器。

我不知道算法，但我认为可以获得确切的文件内存地址和

在那里写一些像'null'的东西。所以我正在搜索 os 模块和其他模块，

但不知道该怎么做...有没有功能或其他方式？

或者我要做的只是读取文件 binarymode 并将其覆盖为空？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T12:02:10.303

除非你完全控制系统，否则我认为你最好放弃这种特殊的追求。现代文件系统或介质（例如 SSD 磨损均衡）可能会导致数据在物理上保留在磁盘上，即使您就地覆盖它们也是如此。

我书中的最佳实践是用随机数据填充磁盘，然后专门使用整个磁盘加密。

# ruby-on-rails - 如何创建按月分组的记录数数组并保持性能？

> ID：10960673
> 
> 赞同：0
> 
> 时间：2012-06-09T11:39:11.230
> 
> 标签：ruby-on-rails, activerecord

在 Rails 应用程序中，我有一个 User 模型和一个 Posts 模型。

我有一个`:post_rate`方法

```
def self.post_rate(month_start, month_end)
     where('created_at >= ? AND <= ?', month_start, month_end).map { |p| p.created_at.beginning_of_day }.uniq.size.to_f / (month_start - month_end).to_f 
end 
```

这显示了用户在给定时间范围内发布的天数百分比。

在用户展示页面上，我想按月显示用户发帖频率的摘要。我需要一个看起来像这样的数组：

```
['Month', 'Frequency'],
['Jan',  0.1],
['Feb',  0.5],
['Mar',  0.9],
etc.. 
```

（需要标签和标题）。

我怎样才能做到这一点？

我需要考虑哪些性能注意事项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:52:38.850

如果您的 Rails 足够新，您可以使用 ActiveRecord 的查询智能来编译在 SQL 中执行此操作的查询。您可以通过以下方式将函数传递给 GROUP BY 子句`group`：

```
where('created_at >= ? AND <= ?', month_start, month_end).group("to_char(created_at,'MONTH')").count() 
```

以上适用于 PostgreSQL。您可能必须更改 arg 以`group`使其与不同的数据库一起使用。

结果将采用散列的形式，其键是 GROUP BY 列，其值是计数。您可能需要做一些修改才能以您需要的格式获取数据。

# html - 在 jsp 页面中保留 \n

> ID：10960677
> 
> 赞同：0
> 
> 时间：2012-06-09T11:39:37.207
> 
> 标签：html, spring, jsp, textarea, jstl

我有以下代码：

```
<form:textarea rows="3" cols="21"  path="marksAndNumbers" onchange="changed()" htmlEscape="false"/></td> 
```

当我在我的控制器中调试“marksAndNumbers”的值时，它显示如下：

```
Stores
PO# 4640995
DPCI-Item# 069000364
Style# TB1124
COLOR 
SIZE 
CASEPACK 6
COUNTRY OF ORIGIN 
CHINA 
```

但是当我尝试使用`<textarea>`标签显示这个时，换行符不会保留，所有内容都显示在同一行中。

```
StoresPO# 4640995 DPCI-Item# 069000364 Style# TB1124COLOR SIZE CASEPACK 6 COUNTRY OF ORIGIN CHINA 
```

我试图用`"<br/>"`我的控制器中的“\ n”替换，这显示为：

```
Stores
<br/>PO# 4640995
<br/>DPCI-Item# 069000364
<br/>Style# TB1124
<br/>COLOR 
<br/>SIZE 
<br/>CASEPACK 6
<br/>COUNTRY OF ORIGIN 
<br/>HEIGHT 19.81 CM 
```

但是，如果我使用`c:out`它显示相同的值，它就会正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:25:49.377

与大多数 HTML 元素不同，`<textarea>`保留空格（[请参阅此 jsfiddle](http://jsfiddle.net/eXMH2/1/)）。

这意味着解决方案是用完整的换行符呈现 HTML。

如果它对您不起作用，则必须在途中去除空白。要调试这个：

1.  检查 Web 浏览器中的 HTML（源视图）。换行符在吗？
2.  检查 Web 浏览器的 JavaScript 调试器中的响应。换行符在吗？
3.  您是否在 web.xml 中安装了过滤器以去除“不必要的”空白？
4.  检查 JSP 的输出。它真的在输出中写入换行符吗？

# c# - 页面加载时打开两个窗口

> ID：10960681
> 
> 赞同：0
> 
> 时间：2012-06-09T11:40:44.823
> 
> 标签：c#, asp.net, winforms, windows-applications

在一个 Windows 应用程序中，我正在创建两个表单，名为`Form1`和`Configuration_Form`. 首先，我正在加载`Configuration_Form`. 在这种形式中，我检查与 txt 文件的连接。如果 txt 文件有一些数据，则意味着它将加载`Form1`. 否则 Configuration_Form 不会加载任何东西。

现在我有一个问题，假设txt文件有一些数据，那么这意味着它将加载`Form1`并打开另一个空表单。我只想显示`Form1`，而不是空表单。我怎样才能阻止那个空表格？

这是我的部分代码：

```
 public partial class Configuration_Form : Form
{
    Form1 form = new Form1();
    public Configuration_Form()
    {
        StreamReader tr = new StreamReader(Application.StartupPath + "\\" + "config.txt");

        string config = tr.ReadToEnd();
        if (config.Replace("\r\n", string.Empty) == "")
        {
            tr.Close();
            InitializeComponent();
        }
        else
        {
            form.Show();
        }
    }
    ///////////////////////////
   private void btn_submit_Click(object sender, EventArgs e)
    {
        try
        {
            if ((txtIP.Text != "") && (txtdatabase.Text != "") && (txtuser.Text != "") && (txtpass.Text != ""))
            {
                StreamWriter sr = new StreamWriter(Application.StartupPath + "\\" + "config.txt");
                sr.Write(Convert.ToString((txtIP.Text) + ";" + (txtport.Text) + ";" + (txtdatabase.Text) + ";" + (txtuser.Text) + ";" + (txtpass.Text)));
                sr.WriteLine();
                sr.Close();
                this.Hide();
                form.Show();

            }
            else
            {
                DialogResult msg = MessageBox.Show("All are mandatory fileds!", "SBS-BIO-CONFIG Administrator", MessageBoxButtons.OK, MessageBoxIcon.Stop);
                if (Convert.ToBoolean(msg) == true)
                {
                    this.Show();
                }
            }
        }
        catch (Exception e1)
        {
            MessageBox.Show("'" + e1.Message + "'");
        }
    } 
```

这是`Form1`代码：

```
 public partial class Form1 : Form
{

    MySqlConnection con;
    MySqlCommand cmd;
    MySqlDataAdapter DA;
    MySqlDataReader DR;
    DataSet DSS;

    #region Form_Load

    public Form1()
    {
        InitializeComponent();
    } 
```

这是我的`Program.cs`代码：

```
 namespace BIO_PUNCH_UPDATE
   {
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Configuration_Form());
    }
}
} 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:08:06.007

我想您需要根据配置数据加载其中一种表单。如果是这样，那么这里是代码：

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Form form;

        StreamReader tr = new StreamReader(Application.StartupPath + "\\" + "config.txt");

        string config = tr.ReadToEnd();
        tr.Close();
        if (string.IsNullOrWhiteSpace(config))
        {
            form = new Configuration_Form();
        }
        else
        {
            form = new Form1();
        }

        Application.Run(form);
    } 
```

此外，如果您需要其中一种形式的配置数据，您可以将配置字符串作为构造函数参数传递。

# c++ - Windows 筛选平台错误

> ID：10960683
> 
> 赞同：0
> 
> 时间：2012-06-09T11:40:48.863
> 
> 标签：c++, c, windows, wfp

我对 Windows 过滤平台非常陌生.. 我正在尝试学习这个.. 我从 msdn 网站的代码开始.. 就像[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb427376%28v=vs.85%29.aspx)一样。我尝试编译代码，但在头文件 "fwptypes.h" 中出现 13 个错误。我不知道如何解决这个问题..任何建议..这是错误[IMG](http://i49.tinypic.com/68vdlf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:19:31.207

为了消除第一个错误（预编译头），有三种方法：

1.  将您的项目设置更改为“不使用预编译头文件”（右键单击项目->在弹出菜单中选择“属性”->配置属性->C/C++->预编译头文件->预编译头文件）。

或者 2\. 将演示代码复制到头文件而不是 cpp 文件中。

或者 3\. 在演示代码前添加“stdafx.h”。

对于其他编译错误，试试这个（这个解决方案来自[http://social.msdn.microsoft.com/Forums/en-US/wfp/thread/8fd93a3d-a794-4233-9ff7-09b89eed6b1f](http://social.msdn.microsoft.com/Forums/en-US/wfp/thread/8fd93a3d-a794-4233-9ff7-09b89eed6b1f)，我测试过，它有效） ：

头文件中存在错误（额外的行空格）。您可以直接修改副本：

FwpTypes.h @ 第 275 行：

```
#define FWP_ACTION_BLOCK \
   (0x00000001 | FWP_ACTION_FLAG_TERMINATING)
 #define FWP_ACTION_PERMIT \
   (0x00000002 | FWP_ACTION_FLAG_TERMINATING)
#define FWP_ACTION_CALLOUT_TERMINATING \
   (0x00000003 | FWP_ACTION_FLAG_CALLOUT | FWP_ACTION_FLAG_TERMINATING)
#define FWP_ACTION_CALLOUT_INSPECTION \
   (0x00000004 | FWP_ACTION_FLAG_CALLOUT | FWP_ACTION_FLAG_NON_TERMINATING)
#define FWP_ACTION_CALLOUT_UNKNOWN \
   (0x00000005 | FWP_ACTION_FLAG_CALLOUT)
#define FWP_ACTION_CONTINUE \
   (0x00000006 | FWP_ACTION_FLAG_NON_TERMINATING)
#define FWP_ACTION_NONE \
   (0x00000007)
#define FWP_ACTION_NONE_NO_MATCH \
   (0x00000008) 
```

FwpTypes.h @ 第 343 行

```
#define FWP_FILTER_ENUM_VALID_FLAGS \
   (FWP_FILTER_ENUM_FLAG_BEST_TERMINATING_MATCH | \
    FWP_FILTER_ENUM_FLAG_SORTED) 
```

IkeTypes.h @ 第 367 行

```
#define IKEEXT_ERROR_CODE_COUNT  \
   (ERROR_IPSEC_IKE_NEG_STATUS_END - ERROR_IPSEC_IKE_NEG_STATUS_BEGIN) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T16:15:09.593

您可以使用 WinDivert 开源 WFP 标注驱动程序。

WinDivert 本质上将数据包传递给底层的 Windows 过滤平台 (WFP) 数据包注入函数。

查看此链接以获取更多信息.. [http://reqrypt.org/windivert.html](http://reqrypt.org/windivert.html)

# linux - Linux 上的 printf 路径名

> ID：10960685
> 
> 赞同：2
> 
> 时间：2012-06-09T11:41:24.013
> 
> 标签：linux, bash

我正在寻找有关如何在`getopts`没有基本名称的情况下显示目录名称的信息。这应该首先为我的计算机中的所有 sh 文件提供基本名称、制表符，然后是所有目录。

例如，如果我这样做：`myBashfile.sh -e *sh`

我需要查看输出：

```
test1.sh         /home/directory5/directory6
test60.sh        /home/directory50/directory6
anothertest.sh   /home/directory5/directory6 
```

目前我有这个：

```
while getopts b opt
 do
      case $opt in
        b) find / -name  $OPTARG -printf "%f\n"-print 2>/dev/null    ;;
       esac
done 
```

仅显示以下内容：

```
test1.sh
test60.sh
anothertest.sh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:33:38.127

怎么样`-printf "%-20f %h"`？

# sql-server - 嵌套事务的目的

> ID：10960686
> 
> 赞同：20
> 
> 时间：2012-06-09T11:41:30.033
> 
> 标签：sql-server, database, transactions, nested-transactions

我从来不明白嵌套事务有什么好处。提交嵌套事务不会提交任何内容 - 它只是减少了`@@TRANCOUNT`。并`ROLLBACK`回滚一切。

```
BEGIN TRANSACTION
   //do an update
   BEGIN TRANSACTION
     //do an insert
   COMMIT TRANSACTION
COMMIT TRANSACTION 
```

这有什么区别：

```
BEGIN TRANSACTION
     //do an update
     //do an insert
COMMIT TRANSACTION 
```

请给我一个例子，为什么要使用嵌套事务以及它们如何产生影响。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-09T11:45:03.260

嵌套事务允许您的代码调用使用事务本身的其他代码（例如 SP），而无需在提交时实际提交*您**的*事务。

 *也就是说，您可以使用安全点在事务内部回滚。

有一篇[CodeProject 文章](http://www.codeproject.com/Articles/4451/SQL-Server-Transactions-and-Error-Handling)专门讨论这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T06:24:39.163

如果您遇到调用一个 SP 的场景，其中包含另一个 SP 调用。并且内部 SP 也可以独立于您的应用程序调用。在这种情况下，有必要将内部事务（在内部 SP 上）以及父 SP 上。*

# apache - 用 php5-fpm 解决 chroot 问题

> ID：10960687
> 
> 赞同：1
> 
> 时间：2012-06-09T11:41:35.917
> 
> 标签：apache, variables, path, php, chroot

我正在使用 Apache（由于客户的原因，无法切换到 nginx 或 lighttpd），和其他许多人一样，我对以下变量有问题：

```
$_SERVER["SCRIPT_FILENAME"]
$_SERVER["PATH_TRANSLATED"]
$_SERVER["DOCUMENT_ROOT"] 
```

由于 chroot，apache 的 mod_fastcgi 传递给 php5-fpm 的变量被搞砸了，因此与正确的不匹配。
让我给你看一个例子：

```
$_SERVER["DOCUMENT_ROOT"] = /home/vhosts/h0001/home/domains/test.com
$_SERVER["SCRIPT_FILENAME"] = /home/vhosts/h0001/php-fpm
$_SERVER["PATH_TRANSLATED"] = /home/vhosts/h0001/home/domains/test.com/phpinfo.php 
```

代替：

```
$_SERVER["DOCUMENT_ROOT"] = /home/domains/test.com
$_SERVER["SCRIPT_FILENAME"] = /php-fpm
$_SERVER["PATH_TRANSLATED"] = /home/domains/test.com/phpinfo.php 
```

所以，这似乎很容易做到，因为我只需要从这些变量中删除“/home/vhosts/hXXXX”。

我曾想过在 php.ini 中使用 auto_prepend_file 指令并添加如下内容：

```
<?php
    $_SERVER['SCRIPT_FILENAME'] = str_replace('/home/vhosts/h0001','',$_SERVER['SCRIPT_FILENAME'])
    $_SERVER['PATH_TRANSLATED'] = str_replace('/home/vhosts/h0001','',$_SERVER['PATH_TRANSLATED'])
    $_SERVER['DOCUMENT_ROOT'] = str_replace('/home/vhosts/h0001','',$_SERVER['DOCUMENT_ROOT']) 
```

这将允许设置正确的变量，但是我有两个问题：

*   我无法添加任何文件，因为 php 根本不起作用（“没有输入文件。”），因为它在错误的目录中查找脚本

*   在虚拟主机中设置别名似乎不起作用，因为 chroot 环境发生在 /home/vhosts/hXXXX 上，并且各种域 docroot 位于 /home/vhosts/hXXXX/home/domains/domain.tld/；即使使用别名，Apache 仍然会给出错误的路径。

我见过很多人用 nginx 处理它，解决问题（允许编辑 SCRIPT_FILENAME 和 DOCUMENT_ROOT，Apache 不允许），以及其他人解决问题，在 chroot 中符号链接适当的目录树*以*解决问题. 最后一个解决方案真的很糟糕。

另一种方法是使用[这个补丁](http://orfika.net/src/mod_fastcgi-chroot-patch/)，但即使尝试它，似乎也出了点问题：尝试用*apxs2 -cia mod_fastcgi.c*编译它，抛出一个关于*undefined symbol: fcgi_config_new_static_server*的错误，我不知道如何解决这个问题（编译静态？如何用 apxs2 来做？）

关于它的最佳解决方案似乎是手动修补 PHP，但我不确定这是否是最干净的事情......！

# c++ - 如何抑制这一点 - qglobal.h:320:6: 警告：#warning“此版本的 Mac OS X 不受支持”？

> ID：10960688
> 
> 赞同：3
> 
> 时间：2012-06-09T11:41:39.237
> 
> 标签：c++, macos, qt, osx-lion

我遇到以下警告

```
/path/QtSDK/Desktop/Qt/474/gcc/include/QtCore/qglobal.h:320:6:
warning: #warning "This version of Mac OS X is unsupported" 
```

这是qglobal.h

```
 301 #ifdef Q_OS_DARWIN
 302 #  ifdef MAC_OS_X_VERSION_MIN_REQUIRED
 303 #    undef MAC_OS_X_VERSION_MIN_REQUIRED
 304 #  endif
 305 #  define MAC_OS_X_VERSION_MIN_REQUIRED MAC_OS_X_VERSION_10_4
 306 #  include <AvailabilityMacros.h>
 307 #  if !defined(MAC_OS_X_VERSION_10_3)
 308 #     define MAC_OS_X_VERSION_10_3 MAC_OS_X_VERSION_10_2 + 1
 309 #  endif
 310 #  if !defined(MAC_OS_X_VERSION_10_4)
 311 #       define MAC_OS_X_VERSION_10_4 MAC_OS_X_VERSION_10_3 + 1
 312 #  endif
 313 #  if !defined(MAC_OS_X_VERSION_10_5)
 314 #       define MAC_OS_X_VERSION_10_5 MAC_OS_X_VERSION_10_4 + 1
 315 #  endif
 316 #  if !defined(MAC_OS_X_VERSION_10_6)
 317 #       define MAC_OS_X_VERSION_10_6 MAC_OS_X_VERSION_10_5 + 1
 318 #  endif
 319 #  if (MAC_OS_X_VERSION_MAX_ALLOWED > MAC_OS_X_VERSION_10_6)
 320 #    warning "This version of Mac OS X is unsupported"
 321 #  endif
 322 #endif 
```

我在 10.7，因此发出警告。但是我该如何压制它呢？

还有没有什么严重的后果？否则我的程序编译得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:44:05.917

为什么不从以下位置下载最新的 Qt 安装程序：

[http://qt.nokia.com/downloads](http://qt.nokia.com/downloads)

我在该页面上看到“Mac OS X 10.6 或更高版本（64 位）”下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T10:03:55.460

只需将这三行注释掉：

```
 319 // #  if (MAC_OS_X_VERSION_MAX_ALLOWED > MAC_OS_X_VERSION_10_6)
 320 // #    warning "This version of Mac OS X is unsupported"
 321 // #  endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T21:15:58.363

我同意 Michael Dautermann 的观点，即您应该安装新版本，但这是另一个解决方案：更改此行：

```
 #  if (MAC_OS_X_VERSION_MAX_ALLOWED > MAC_OS_X_VERSION_10_6 + 1) 
```

如果这不起作用，请尝试添加 2 而不是 1。

# php - 等价于 array_unique 和 preg_split PREG_SPLIT_NO_EMPTY

> ID：10960691
> 
> 赞同：0
> 
> 时间：2012-06-09T11:42:12.420
> 
> 标签：php, javascript, regex, arrays, phpjs

我正在寻找与 php 完全相同的 Javascript 等价物：

```
$tags = preg_split('/+/', $_GET['q'], NULL, PREG_SPLIT_NO_EMPTY);
$p = array_unique(array_map('strtolower', $tags));
sort($p); 
```

快完成了

```
var queryString = decodeURIComponent(location.search.substring(1)).toLowerCase(); 
var key = queryString.split('&')[0].split('=');
if (key.length > 1){ //q should be the only query key
    var tags = key[1].split(/\+/g);
    // make tags values unique, non-empty and ordered alphabetically
} 
```

但我正在寻找使标签值唯一、非空且按字母顺序排列的 3 件事，这在 php 中很容易完成，我希望在 JavaScript 中有这样的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:45:56.240

你可以在 phpjs 项目中找到它：

*   [拆分](http://phpjs.org/functions/split:521)（正则表达式）
*   [array_unique](http://phpjs.org/functions/array_unique:346)

**代码：**

`split`: ([`explode`](http://phpjs.org/functions/explode:396)依赖)

```
function split (delimiter, string) {
    // http://kevin.vanzonneveld.net
    // +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // -    depends on: explode
    // *     example 1: split(' ', 'Kevin van Zonneveld');
    // *     returns 1: {0: 'Kevin', 1: 'van', 2: 'Zonneveld'}
    return this.explode(delimiter, string);
} 
```

`array_unique`

```
function array_unique (inputArr) {
    // http://kevin.vanzonneveld.net
    // +   original by: Carlos R. L. Rodrigues (http://www.jsfromhell.com)
    // +      input by: duncan
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   bugfixed by: Nate
    // +      input by: Brett Zamir (http://brett-zamir.me)
    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // +   improved by: Michael Grier
    // +   bugfixed by: Brett Zamir (http://brett-zamir.me)
    // %          note 1: The second argument, sort_flags is not implemented;
    // %          note 1: also should be sorted (asort?) first according to docs
    // *     example 1: array_unique(['Kevin','Kevin','van','Zonneveld','Kevin']);
    // *     returns 1: {0: 'Kevin', 2: 'van', 3: 'Zonneveld'}
    // *     example 2: array_unique({'a': 'green', 0: 'red', 'b': 'green', 1: 'blue', 2: 'red'});
    // *     returns 2: {a: 'green', 0: 'red', 1: 'blue'}
    var key = '',
        tmp_arr2 = {},
        val = '';

    var __array_search = function (needle, haystack) {
        var fkey = '';
        for (fkey in haystack) {
            if (haystack.hasOwnProperty(fkey)) {
                if ((haystack[fkey] + '') === (needle + '')) {
                    return fkey;
                }
            }
        }
        return false;
    };

    for (key in inputArr) {
        if (inputArr.hasOwnProperty(key)) {
            val = inputArr[key];
            if (false === __array_search(val, tmp_arr2)) {
                tmp_arr2[key] = val;
            }
        }
    }

    return tmp_arr2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T11:51:08.983

因为我最终在这里进行了搜索，`array_unique js equivalent`所以我认为值得一提的是，在 ES6 中你可以

```
var unique = (value, index, array) => array.indexOf(value) === index;

[1,1,1,2,3].filter(unique); 
```

或在 1 行

```
[1,1,1,2,3].filter((v, i, a) => a.indexOf(v) === i) 
```

# c# - 在 ASP.NET 中使用静态变量而不是应用程序状态

> ID：10960695
> 
> 赞同：18
> 
> 时间：2012-06-09T11:42:20.607
> 
> 标签：c#, asp.net, static, state

我打算在 ASP.NET 中使用静态变量而不是应用程序状态，我想知道这是否是正确的方法：

```
[Global.asax.cs]

...

public class Global : System.Web.HttpApplication
{
    void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup

    }

    ...

    private static Dictionary<string, object> cacheItems = new Dictionary<string, object>();
    private static object locker = new object();

    public static Dictionary<string, object> CacheItems
    {
        get
        {
            lock (locker)
            {
                return cacheItems;
            }
        }

        set
        {
            lock (locker)
            {
                cacheItems = value;
            }
        }
    }

    public static void RemoveCacheItem(string key)
    {
        cacheItems.Remove(key);
    }

    ...
} 
```

如您所见，我使用自动创建的 Global.asax（和代码隐藏）文件。我添加了一些静态变量和方法。我可以以这种方式使用它们：

```
[some .cs file]
foreach(KeyValuePair<string, object> dictItem in Global.CacheItems)
{
    ... 
```

这是正确的方法还是我应该创建新类而不是现有的全局？如果我应该创建新课程，我该怎么做？在哪里？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-09T19:42:55.610

## 微软怎么说

> ASP.NET 包括应用程序状态，主要是为了与经典 ASP 兼容，以便更容易将现有应用程序迁移到 ASP.NET。建议您将数据存储在应用程序类的静态成员中，而不是应用程序对象中。这提高了性能，因为您可以比访问应用程序字典中的项目更快地访问静态变量。

参考： http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;Q312607](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q312607)

## 我的经验

~~静态变量和应用程序状态之间的主要区别在于，应用程序状态在所有线程和池中都是相同的，但静态变量仅在每个池中是相同的。~~

经过新的测试，我看到应用程序状态变量与静态变量相同，它们只是引用应用程序上的静态变量，它们只是出于兼容性原因而存在，正如微软所说

如果您有 4 个池运行您的站点（网络花园），那么您有 4 组不同的静态内存。

## 你的代码

关于您的代码，您尝试访问字典数据的方式存在错误，并且您将在真实网络中遇到错误。这部分代码是锁定完整字典的变量，但不锁定您在使用它时要进行的更改。

```
// this is not enough to manipulate your data !
public static Dictionary<string, object> CacheItems
{
    get { lock (locker) { return cacheItems; } }
    set { lock (locker) { cacheItems = value; } }
} 
```

例如，正确的方法是锁定添加/删除的所有操作，直到您完成。

```
private static Dictionary<string, object> cacheItems = new Dictionary<string, object>();
private static object locker = new object();
public Dictionary<string, object> CacheItems
{
    get{ return cacheItems; }
    set{ cacheItems = value; }
}

SomeFunction()
{
    ...
    lock(locker)
    {
        CacheItems["VariableName"] = SomeObject;
    }
    ...
} 
```

另一方面，当您操作应用程序状态的数据时，您需要使用它的~~全局~~锁`Application.Lock();`，`Application.UnLock();`例如

```
Application.Lock();
Application["PageRequestCount"] = ((int)Application["PageRequestCount"]) + 1;
Application.UnLock(); 
```

以一些结论结束：

避免应用程序状态，只在代码上使用静态变量。

# api - Mturk api提交点击

> ID：10960696
> 
> 赞同：0
> 
> 时间：2012-06-09T11:42:22.110
> 
> 标签：api, amazon-web-services, mechanicalturk

是否有任何 api 可用于在 muturk 上提交命中。

实际上，我计划创建一个应用程序，该应用程序将具有特定命中的所有必需字段，并且工作人员命中并且应用程序将提交命中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:54:12.600

我假设您所说的*“mturk”*和*“muturk”*指的是亚马逊的 Mechanical Turk 服务。他们为所有[Amazon Web Services](http://aws.amazon.com/documentation/)提供了相当广泛的 API 文档。Mechanical Turk API 记录在 [http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/Welcome.html?r=6748](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMturkAPI/Welcome.html?r=6748)中。

# android - 如何创建专辑行布局（在 xml 中）？

> ID：10960699
> 
> 赞同：0
> 
> 时间：2012-06-09T11:42:25.727
> 
> 标签：android, xml, android-layout

我想知道在 xml 中构造这样的行的最佳方法是什么：

![列表视图行](../Images/898b82076301a5cc26db17dd767eec03.png)

有 2 个`ImageViews`（一个用于明星，一个用于封面）和 2 个`TextViews`（一个用于“专辑”，一个用于“艺术家”）。我不确定哪种布局是最好的以及如何构建这一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:20:21.710

您应该使用 a `RelativeLayout`（还有其他选项）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/album_cover"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="the drawable" />

    <ImageView
        android:id="@+id/star"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="the drawable" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/star"
        android:layout_toRightOf="@id/album_cover"
        android:text="Album" />

    <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/star"
    android:layout_toRightOf="@id/album_cover"
    android:layout_below="@id/textView1"
    android:text="Artist" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:55:39.747

使用类似的东西：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="2dip"
    android:paddingTop="2dip" >

    <ImageView
        android:id="@+id/image1"
        android:gravity="center"
        android:layout_gravity="center"
        android:layout_height="wrap_content"
        android:layout_weight="6"
        android:layout_width="fill_parent" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_width="fill_parent" >

        <TextView
            style="@style/TextView"
            android:id="@+id/text1"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_width="fill_parent"
            android:textStyle="bold" />

        <TextView
            style="@style/TextView"
            android:id="@+id/text2"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_width="fill_parent" />
    </LinearLayout>

    <ImageView
        android:id="@+id/image2"
        android:gravity="center"
        android:layout_gravity="center"
        android:layout_height="wrap_content"
        android:layout_weight="6"
        android:layout_width="fill_parent" />
</LinearLayout> 
```

# php - 从 SoapFault 扩展异常。WSDL

> ID：10960700
> 
> 赞同：1
> 
> 时间：2012-06-09T11:42:26.337
> 
> 标签：php, exception, soap, wsdl, soapfault

有可能吗？

例如：

服务器：

```
class Service
{
    public function methodCall()
    {
        ...
        throw new ExceptionEtc(...);
        ...
    }
} 
```

自定义异常：

```
class ExceptionEtc extends SoapFault
{
    // ...
} 
```

客户：

```
try{
   ...
    $client->methodCall();
}
catch(ExceptionEtc $e){
    // !
} 
```

所有异常都是**SoapFault 类型**（对象（SoapFault））。需要的自定义类型（ExceptionEtc.等）。怎么做 ？什么添加到 WSDL 方案？如果 php 可以，请用 wsdl 方案举一个简单的例子。

# php - Facebook 简单的 php 身份验证

> ID：10960706
> 
> 赞同：2
> 
> 时间：2012-06-09T11:43:09.310
> 
> 标签：php, facebook, facebook-php-sdk, facebook-authentication

我是 facebook api 的新手。在阅读了 fb 开发人员文档后，我编写了以下代码：

```
<?php

require_once("php-sdk/src/facebook.php");

$config = array();
$config[‘appId’] = '(my app id)';   //correct in actual code
$config[‘secret’] = '(my app secret)';  //correct in actual code
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config);

$user=$facebook->getUser();

if($user==0)
{
$params = array(
'redirect_uri' => 'http://mydomain.com/facebook/php_index.php'
);

$login_url = $facebook->getLoginUrl($params);
echo $login_url."<br/><br/>";
echo '<div class="notice">You need to <a href="' . $login_url . '" onclick="top.location.href = \'' . $login_url . '\';">authenticate first</a>.</div>';
}
else
{
echo $user;
}

?> 
```

fb 应用页面中的域和 url 设置是正确的。但仍然单击它显示的登录链接`An error occurred. Please try later.`

有人可以帮帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T20:50:32.897

您似乎没有在 API 中设置您的插件首选项。就我而言，如果我在应用程序设置中有错误的路径、错误的登录 URL 和错误的域，我会收到此消息。Facebook的一些描述可以在他们的[入门指南中找到](https://developers.facebook.com/docs/appsonfacebook/tutorial/#canvas)

编辑：这是画布首选项页面。您必须选择“网站”上方的选项

# c++ - 自定义函数中的 WINAPI BeginPaint 和 TextOut 多次调用

> ID：10960707
> 
> 赞同：1
> 
> 时间：2012-06-09T11:43:45.383
> 
> 标签：c++, winapi

我在 printText 函数中遇到了另一面墙，现在一直在寻找一个没有运气的解决方案。

基本上，在 WM_PAINT 消息中调用 printText 函数将文本绘制到 win32 窗口。它工作正常，但**只适用于一次通话**。如果我尝试使用不同的参数第二次调用该函数，似乎什么也没有发生。

我确定我只是再次完全忽略了某些东西，但我看不出它可能是什么。

功能如下：

```
void controls::printText(unsigned char R, unsigned char G, unsigned char B, int x, int y, LPCSTR text, HWND parent, PAINTSTRUCT pss, HDC hdc)
{

    hdc = BeginPaint(parent, &pss);
    SetBkMode(hdc, TRANSPARENT);
    SetTextColor(hdc, RGB(R,G,B));
    TextOut(hdc, x, y, text, strlen(text));     
    EndPaint(parent, &pss);

} 
```

它位于“控件”类中，调用如下：

```
HDC hdc, hdc2;
PAINTSTRUCT ps, ps2;

ctrls->printText(255,0,0,30,50,"Test text",hWnd,ps,hdc);
ctrls->printText(255,0,0,30,80,"test text 2",hWnd,ps2,hdc2); 
```

有两（2）个 HDC 和 PAINTSTRUCT 声明，因为我一直在尝试寻找解决方案的代码；我尝试从函数中删除 paintstruct 和 hdc 参数，并在函数内部将它们声明为局部变量（这对我来说没有多大意义），但没有成功。

基本上，第一行，

```
ctrls->printText(255,0,0,30,50,"Test text",hWnd,ps,hdc); 
```

将按照应有的方式打印“测试文本”，从 (30,50) 开始以红色显示，但第二行不打印任何内容。但是，如果我删除第一行，第二行也可以正常工作。

请注意：我可能在描述时在这里使用了同义词油漆和印刷。

我想我已经在这里包含了所有相关的内容，但是如果需要任何其他代码，请告诉我，我会在看到消息后立即发布：）

再次提前感谢伙计们，非常感谢您的时间和回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T11:45:35.197

该文件非常清楚地指出

> 除非响应 WM_PAINT 消息，否则应用程序不应调用 BeginPaint。

所以你应该每次调用它一次`WM_PAINT`，不要再调用它了。

# android - Android：调用另一个应用程序的活动

> ID：10960709
> 
> 赞同：14
> 
> 时间：2012-06-09T11:43:57.207
> 
> 标签：android, android-activity

我有两个Android应用程序，假设它们是“A”和“B”，“A”有五个活动，我想从“B”的按钮单击事件中调用它的特定活动。我测试了从另一个调用一个应用程序的这种方式：

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.testapp.ws");
startActivity(LaunchIntent); 
```

“com.testapp.ws”是“A”的包名。

这再次从其第一个活动而不是从特定活动运行“A”。如何调用 A 的指定活动？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-09T13:23:14.323

授予，

这里的问题显然是对 Android 应用程序模型的误解。Commonsware 关于如何解决这个问题是绝对正确的。但是，在不了解 Android 基础知识的情况下，我可以理解您为什么难以应用它。所以，一个快速的解释：

Android 中的每个操作都以 Intent 开头。对于活动尤其如此。每个活动都有一个意图。为了使开发人员的界面更容易，您可以响应来自操作系统的 Intent，或者您可以从活动类创建一个 Intent 以供使用。通常，最佳做法是执行第一个选项。

**响应意图**

在选择要响应的 Intent 时，您可以逐字地响应任何 Intent。这称为动作。如果我创建了一个名为“FOO”的 Intent，Bar Activity 可以将其拾取并做出响应。但是，我们有约定，其中主要的是将您的包名称添加到您创建的任何 Intent 中。例如“com.company.package.FOO”。简而言之，这是为了避免与其他应用程序发生冲突。

每个活动都可能响应不同的事件。这是在 AndroidManifest.xml 中定义的。

```
<activity android:name="Activity3" ... >
    <intent-filter>
      <action android:name="com.company.package.FOO"/>
      <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

上面，我们还将类别设置为 DEFAULT，这样除非用户更改它，否则我们将是唯一响应我们自定义 Intent 的应用程序。然后我们调用 Intent 的方式是使用我们创建的相同名称（即“com.company.package.FOO”）

```
startActivity(new Intent("com.company.package.FOO")); 
```

这就是它的工作原理！您只需将上面的“com.company.package.FOO”更改为您的包名称（由您的应用程序定义）和一些有意义的东西。一个例子是“com.testapp.ws.SWAT_FLIES”。

**为什么你的代码不起作用**

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.testapp.ws"); 
```

上面的代码寻找一种特定的 Intent 动作。记住当你制作 AndroidManifest 和你放置的第一个 Activity 时：

```
 <action android:name="android.intent.action.MAIN">
 <category android:name="android.intent.category.LAUNCHER"> 
```

嗯... getLaunchIntentForPackage() 只获取第一个 Activity 的 Intent。这就是我们制作自定义 Intent 的原因……首先，因为我们并不真的希望它成为我们启动的第三个 Activity……其次，因为操作系统只会告诉我们启动 Activity。我们必须用我们的 OWN 动作来告诉它（即“com.testapp.ws.SWAT_FLIES”）

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-09T11:48:55.400

步骤#1：`<intent-filter>`使用自定义操作向第三个活动添加一个：

```
<intent-filter>
  <action android:name="com.testapp.ws.SOMETHING_USEFUL"/>
  <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

步骤#2：使用适当的开始该活动`Intent`：

```
startActivity(new Intent("com.testapp.ws.SOMETHING_USEFUL")); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-20T20:13:54.223

在某些情况下，您可能没有使用两个您特别具有编辑功能的应用程序，或者您可能不想制作自定义意图，因此在这种情况下，有一个替代方案（对可用性进行更好的错误检查）：

```
Intent intent = new Intent();
intent.setClassName("PACKAGE_NAME", "PACKAGE_NAME.TARGET_ACTIVITY");
if (isCallable(context, intent)) {
    // Attach any extras, start or start with callback
} else {
    // Respond to the application or activity not being available
} 
```

在主类或处理通用方法的子类中的某处：

```
public static boolean isCallable(Activity activity, Intent intent) {
    List<ResolveInfo> list = activity.getPackageManager().queryIntentActivities(intent,PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-26T07:17:42.433

here is the code to open an app(ex whatsapp) from another app

public class MainActivity extends Activity{

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button bClock = (Button) findViewById(R.id.button1);
    bClock.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    Intent i = new Intent(Intent.ACTION_MAIN);
    PackageManager managerclock = getPackageManager();
    i = managerclock.getLaunchIntentForPackage("com.whatsapp");
    i.addCategory(Intent.CATEGORY_LAUNCHER);
    startActivity(i);
    }
    }); 
```

} }

# .net - 应用架构建议（可扩展性/性能）

> ID：10960714
> 
> 赞同：1
> 
> 时间：2012-06-09T11:44:27.473
> 
> 标签：.net, web-applications, architecture

我已经使用 .NET 开发了一个完全在内存中的应用程序。数据在启动时从持久存储加载一次，然后只有对对象的更改通过工作队列从应用程序层回传到持久存储。它运行良好，基准测试甚至更好（每秒 100k api 事务）。我意识到这是一种非常规且难以扩展的架构。这是一个实验=）

![建筑学](../Images/ef8e197b8c4acfac502c33f95c44793a.png)

（左侧为当前架构，右侧为所需架构）

现在我开始考虑冗余。我想并排运行两个应用程序服务器并在它们之间进行负载平衡。这意味着保持所有内存中的对象同步——可能通过持久的 tcp 连接来回穿梭二进制序列化对象。最终的一致性是好的。从概念上讲，我可以看到在两个应用程序服务器从持久存储冷启动到相同状态后这将如何工作，但是我很难概念化如何在请求流入时实例化和同步新的应用程序服务器节点。我猜这听起来像快照+事务日志之类的东西？

这听起来可以实现吗？这种架构是否在任何值得注意的地方使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:53:16.477

那里有满足您需求的产品。你还没有提到你的 nfrs，所以我不知道你是否只是为了提高效率而想手动滚动。像 infinispan 这样的东西应该适合你。鉴于您在内存空间中，更具挑战性的是数据的事务性。值得探索如何实现技术和破坏测试。

# php - 包含一个包含另一个文件的文件

> ID：10960715
> 
> 赞同：0
> 
> 时间：2012-06-09T11:44:28.203
> 
> 标签：php

文件夹结构

*   根
    *   公司/
        *   数据库.php
        *   会话.php
        *   数据库.php
        *   初始化文件
    *   库/
        *   枝条/
*   初始化文件

登录.php 文件

```
<?php
include 'inc/init.php'; 
```

初始化文件

```
<?php
include 'session.php';

$config = include 'config.php';
include 'db.php';

require_once '/lib/Twig/Autoloader.php';
Twig_Autoloader::register(); 
```

我很困惑的是 Twig 库被包含在内的事实。我不需要备份一个文件夹 ../ 吗？但这给了我一个错误，我根本不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:45:33.403

您正在使用 Twig 的绝对路径，这就是包含它的原因。如果你想`init.php`使用相对路径从文件中包含它，那么它应该是这样的：

```
require_once './lib/Twig/Autoloader.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:09:14.337

PHP include 语句的作用是获取您包含的文件并转储包含文件中的所有内容。因此，如果您在根文件夹的 init.php 中包含一个文件，则所有包含都相对于根目录。

要掌握这一点。在包含文件中抛出一些这样的语句`printf("I am in init.db, the current folder is %s", getcwd());`将帮助您了解包含文件时当前目录是什么，并且您可以相应地修改您的包含。

# eclipse - Eclipse CDT 错误解析器问题

> ID：10960723
> 
> 赞同：2
> 
> 时间：2012-06-09T11:45:33.850
> 
> 标签：eclipse, eclipse-cdt

我正在使用 Eclipse Indigo 的 CDT 插件进行编程，一段时间以来我一直遇到错误解析器的一些问题。

问题是解析器在引用未构建的项目内的文件中定义的名称时给我错误的错误（即它只包含头文件）。引用标头的项目仍然可以正常构建和运行。

我正在使用以下错误解析器（按顺序）：
CDT GNU C/C++ Error Parser
CDT GNU Assembler Error Parser
CDT GNU Linker Error Parser

无论如何让解析器识别引用还是我被迫完全关闭它们？

帮助表示赞赏！

# javascript - 显示/隐藏 css/javascript 代码未在 Chrome 中正确隐藏内容

> ID：10960728
> 
> 赞同：0
> 
> 时间：2012-06-09T11:46:06.993
> 
> 标签：javascript, css, google-chrome

我已经浏览了这个网站，试图找到一个类似的问题，但到目前为止还没有运气。希望也许这里有人会知道答案:)。

我发现这个网站有显示/隐藏滚动代码，似乎可以很好地满足我的需求。我已经实现了它，它在 Firefox 上运行良好。除了“隐藏”部分中的视频倾向于显示在左上角之外，滚动在 Chrome 上也可以正常工作。要触发这一点，请单击不同的链接（即诗歌、参与等），然后单击返回音乐，这就是它搞砸的时候。我已将代码包含在标题中以及“音乐”页面中。我在诗歌部分使用了相同的代码，文本没有问题。也许它与iframe有关？非常感谢！

[leclairstudios.ca](http://leclairstudios.ca)

头：

```
 <style type="text/css">
.dhtmlgoodies_question{ /* Styling question */
    /* Start layout CSS */
    width:500px;
    margin-bottom:2px;
    margin-top:2px;
    padding-left:2px;
    height:20px;

    /* End layout CSS */
    cursor:pointer;
}

.dhtmlgoodies_question:hover{
color: red ;
}

.dhtmlgoodies_answer{   /* Parent box of slide down content */
    /* Start layout CSS */

    background-color:#e6e5f8;

    /* End layout CSS */

    visibility:hidden;
    height:0px;
    overflow:hidden;
    position:relative;

}
.dhtmlgoodies_answer_content{   /* Content that is slided down */
    padding:1px;
    font-size:0.9em;
    position:relative;
}

</style>
<script type="text/javascript">
/************************************************************************************************************
Show hide content with slide effect
Copyright (C) August 2010  DTHMLGoodies.com, Alf Magne Kalleland

This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public
License along with this library; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA

Dhtmlgoodies.com., hereby disclaims all copyright interest in this script
written by Alf Magne Kalleland.

Alf Magne Kalleland, 2010
Owner of DHTMLgoodies.com

************************************************************************************************************/

var dhtmlgoodies_slideSpeed = 10;   // Higher value = faster
var dhtmlgoodies_timer = 10;    // Lower value = faster

var objectIdToSlideDown = false;
var dhtmlgoodies_activeId = false;
var dhtmlgoodies_slideInProgress = false;
var dhtmlgoodies_slideInProgress = false;
var dhtmlgoodies_expandMultiple = false; // true if you want to be able to have multiple items expanded at the same time.

function showHideContent(e,inputId)
{
    if(dhtmlgoodies_slideInProgress)return;
    dhtmlgoodies_slideInProgress = true;
    if(!inputId)inputId = this.id;
    inputId = inputId + '';
    var numericId = inputId.replace(/[^0-9]/g,'');
    var answerDiv = document.getElementById('dhtmlgoodies_a' + numericId);

    objectIdToSlideDown = false;

    if(!answerDiv.style.display || answerDiv.style.display=='none'){
        if(dhtmlgoodies_activeId &&  dhtmlgoodies_activeId!=numericId && !dhtmlgoodies_expandMultiple){
            objectIdToSlideDown = numericId;
            slideContent(dhtmlgoodies_activeId,(dhtmlgoodies_slideSpeed*-1));
        }else{

            answerDiv.style.display='block';
            answerDiv.style.visibility = 'visible';

            slideContent(numericId,dhtmlgoodies_slideSpeed);
        }
    }else{
        slideContent(numericId,(dhtmlgoodies_slideSpeed*-1));
        dhtmlgoodies_activeId = false;
    }
}

function slideContent(inputId,direction)
{

    var obj =document.getElementById('dhtmlgoodies_a' + inputId);
    var contentObj = document.getElementById('dhtmlgoodies_ac' + inputId);
    height = obj.clientHeight;
    if(height==0)height = obj.offsetHeight;
    height = height + direction;
    rerunFunction = true;
    if(height>contentObj.offsetHeight){
        height = contentObj.offsetHeight;
        rerunFunction = false;
    }
    if(height<=1){
        height = 1;
        rerunFunction = false;
    }

    obj.style.height = height + 'px';
    var topPos = height - contentObj.offsetHeight;
    if(topPos>0)topPos=0;
    contentObj.style.top = topPos + 'px';
    if(rerunFunction){
        setTimeout('slideContent(' + inputId + ',' + direction + ')',dhtmlgoodies_timer);
    }else{
        if(height<=1){
            obj.style.display='none';
            if(objectIdToSlideDown && objectIdToSlideDown!=inputId){
                document.getElementById('dhtmlgoodies_a' + objectIdToSlideDown).style.display='block';
                document.getElementById('dhtmlgoodies_a' + objectIdToSlideDown).style.visibility='visible';
                slideContent(objectIdToSlideDown,dhtmlgoodies_slideSpeed);
            }else{
                dhtmlgoodies_slideInProgress = false;
            }
        }else{
            dhtmlgoodies_activeId = inputId;
            dhtmlgoodies_slideInProgress = false;
        }
    }
}

function initShowHideDivs()
{
    var divs = document.getElementsByTagName('DIV');
    var divCounter = 1;
    for(var no=0;no<divs.length;no++){
        if(divs[no].className=='dhtmlgoodies_question'){
            divs[no].onclick = showHideContent;
            divs[no].id = 'dhtmlgoodies_q'+divCounter;
            var answer = divs[no].nextSibling;
            while(answer && answer.tagName!='DIV'){
                answer = answer.nextSibling;
            }
            answer.id = 'dhtmlgoodies_a'+divCounter;
            contentDiv = answer.getElementsByTagName('DIV')[0];
            contentDiv.style.top = 0 - contentDiv.offsetHeight + 'px';
            contentDiv.className='dhtmlgoodies_answer_content';
            contentDiv.id = 'dhtmlgoodies_ac' + divCounter;
            answer.style.display='none';
            answer.style.height='1px';
            divCounter++;
        }
    }
}
window.onload = initShowHideDivs; 
```

音乐：

```
<br /><br />
            <p> Click song name to expand video - page currently best viewed with Firefox</p>
            <hr>
            <br />
            <div class="dhtmlgoodies_question"><p>Eli, The Barrow Boy</p></div>
            <div class="dhtmlgoodies_answer">
                <div>
                <iframe width="420" height="315" src="http://www.youtube.com/embed/NEF8N-5zVMU" frameborder="0" allowfullscreen>        
                </iframe>
                </div>
            </div>
            <br />
            <div class="dhtmlgoodies_question"><p> Pussywillows, Cattails, Softwinds, and Roses </p></div>
            <div class="dhtmlgoodies_answer">
                <div>
                <iframe width="420" height="315" src="http://www.youtube.com/embed/R7XOiSmh7ik" frameborder="0" allowfullscreen>
                </iframe>
                </div>
            </div>
            <br />
            <div class="dhtmlgoodies_question"><p>Chasing Cars</p></div>
            <div class="dhtmlgoodies_answer">
                <div>
                <iframe width="420" height="315" src="http://www.youtube.com/embed/ZTm6--Bu7W8" frameborder="0" allowfullscreen>
                </iframe>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:52:24.027

考虑jquery？

```
$('.dhtmlgoodies_question').click(function(e){
    e.preventDefault();
    $('.dhtmlgoodies_answer_content').slideUp;
    $(this).next().slideDown(500);
}); 
```

# animation - 点击按钮时如何隐藏按钮图像，ios

> ID：10960729
> 
> 赞同：1
> 
> 时间：2012-06-09T11:46:21.297
> 
> 标签：animation, button, show-hide, imagebutton, tap

我对动画开发非常陌生。我正在尝试制作一个有趣的应用程序，其中我使用了三个按钮。其中一个按钮包含背景作为图像。另外两个按钮的功能是当我点击第二个按钮时，它必须显示正是该按钮顶部的 UITextField。我在隐藏功能的帮助下隐藏了 UITextView。现在当我点击第二个按钮时，我创建的动画帮助下的第一个按钮将放置在第二个按钮的顶部。同样的过程也适用于第三个按钮.当我点击一个按钮时，图像按钮被放在点击按钮的顶部，然后显示 UITextField。现在我想做的是我想在显示 UITextField 时隐藏按钮图像？请有人帮助我，下一步该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:59:19.957

单击第二个/第三个按钮时，您需要清除按钮一的背景图像。这是我的理解，如果我的理解是正确的，那么您需要在单击按钮（2 或 3）时调用 [buttonOne setBackgroundImage:nil forState:UIControlStateNormal]。

# c++ - 如何获取与某个扩展相关的程序列表？

> ID：10960736
> 
> 赞同：0
> 
> 时间：2012-06-09T11:47:19.033
> 
> 标签：c++, file, qt, file-extension

例如，对于`.png`我想接收`mspaint`, `ois`（`chrome`这些是可以在我的 Windows 机器上查看 png 文件的程序）。

当然总有

`HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\FileExts\\.png\\OpenWithList`

但我正在寻找一种跨平台的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:59:00.660

根据[这个线程](http://www.qtcentre.org/threads/32300-System-File-Association)，没有跨平台方式。但是您可以使用一些特定于平台的方式来做类似的事情。例如，您可以`open`在 OS X 或`xdg-open`Linux 上使用该命令（如此[处](https://stackoverflow.com/questions/264395/linux-equivalent-of-the-mac-os-x-open-command)所述）。看起来您已经知道如何在 Windows 上执行此操作，这很好，因为我不知道。

例如：

```
#ifdef __APPLE__

void open_image(){
    system("open someimage.png");
}

#endif 
```

# ruby-on-rails - 检查模型计数是否在一行中使用带有 rspec 的 lambda do.end 块更改

> ID：10960744
> 
> 赞同：1
> 
> 时间：2012-06-09T11:49:25.053
> 
> 标签：ruby-on-rails, testing

我有以下测试，检查是否在创建任务时创建了新任务和任务连接​​（用户和任务之间的连接表）。到目前为止，我使用 2 个 lambda 进行了检查，并希望在 1 行中完成...

```
 68       it 'can create new task' do       
 69         lambda do
 70           lambda do
 71             post :create, :project_id => project,         
 72                           :task => valid_attributes
 73           end.should change(Task, :count).by(1)
 74         end.should change(TaskConnection, :count).by(1)                                                                                          
 75       end 
```

像这样的东西……有可能吗？

```
 68       it 'can create new task' do       
 69         lambda do
 71           post :create, :project_id => project,         
 72                         :task => valid_attributes
 73         end.should change(Task && TaskConnection, :count).by(1 && 1)                                                                                         
 75       end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:28:40.370

你不能完全按照你在第二个例子中建议的那样做，但你可以像这样组合它们：

```
it 'can create new task' do
  lambda do
    post(:create, :project_id => project, :task => valid_attributes)
  end.should (change(Task, :count).by(1) && change(TaskConnection, :count).by(1))
end 
```

不过，我真的不推荐这种方法。虽然简洁，但 RSpec 在失败时报告的错误并不能告诉您哪个期望失败了。它只是说其中一个没有改变你认为的方式。

# jquery - 如何使切换默认隐藏

> ID：10960753
> 
> 赞同：8
> 
> 时间：2012-06-09T11:50:27.313
> 
> 标签：jquery

您好我想知道如何在页面加载时隐藏切换，我做了一个简单的代码，但是当页面加载时它会默认显示。我想要它的方式。

我必须尝试使用​​ CSS 之类的东西

```
.hidden {
display:none;
} 
```

当我使用此代码时，该元素根本不显示。

这是我的代码

*已编辑*

```
<script type="text/javascript">
 function toggleDiv(divId) {
  $("#"+divId).toggle();

  }
 </script> 
```

```
<a href="javascript:toggleDiv('myContent');">this is a test</a>
   <div id="myContent">
      <a href="javascript:toggleDiv('myContentt');"><span>this is a text</span></a>
          <div>this is a test #2 </div>
   </div>

          <div id="myContentt">
            test
          </div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T12:09:43.423

我猜，你想要这样的东西，

[演示](http://jsfiddle.net/krY56/1/)（我`onclick`在演示中使用过，因为 jsfiddle 不喜欢 javascript on `href`）

**CSS：**

```
.hidden{
       display:none;
    } 
```

**标记：**

```
<a href="javascript:toggleDiv('myContent');">this is a test</a>
<div id="myContent" class='hidden'>
  <div>this is a test #1 </div>
</div> 
<br />
<a href="javascript:toggleDiv('myContentt');"><span>this is a text</span></a>
<div id="myContentt" class='hidden'>
 this is a test #2
</div> 
```

**Javascript：**

```
function toggleDiv(divId) {
        $("#"+divId).toggle(); 
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-25T20:40:58.433

只需添加

```
$("your class").hide(); 
```

**例子**

```
$(document).ready(function(){
    $(".subResult").hide();
});

then you can define your function
 function toggle(){
$(".subResult").slideToggle(2000);
     } 
```

**另一个例子**

```
$(document).ready(function(){

$("p").hide();

  $("button").click(function(){

    $("p").toggle();

  });

}); 
```

///////

`$("p").hide();` 这一行隐藏了你的 div 准备好的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T11:55:24.830

用于`.toggleClass('hidden')`显示和隐藏您的元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-13T22:29:49.207

理解 toggle() 的关键是它只是切换 CSS 显示属性。因此，如果您想用另一个元素替换一个元素，只需确保最初要隐藏的元素的样式为`display: none;`. 当您使用 toggle() 方法时，它会使用 a 隐藏可见元素，`display: none;`并从隐藏元素中删除该属性。

# ruby-on-rails - 如何将来自不同来源的通知分组到一个模型中

> ID：10960756
> 
> 赞同：1
> 
> 时间：2012-06-09T11:50:50.910
> 
> 标签：ruby-on-rails, activerecord, models

我现在拥有的是角色扮演模型和消息模型。

我希望他们共享相同的通知流：他们都应该创建一个“通知”行，然后将其显示给用户。但我希望通知也指向他们的父母。我想创建一个 parent_id 和 parent_class 列，以便我可以获得父对象。但是有没有一种已经内置的方法呢？

我检查了多态模型，但我似乎并不真正了解如何在这里使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:16:17.077

解决方案正是多态模型，如果将**parent_id**和**parent_class**字段添加到**Notification**模型，您可以轻松地在通知模型中创建多态关联来实现它，如下所示：

```
class Notification < ActiveRecord::Base
  belongs_to :parent, :polymorphic => true
end 
```

然后使用它非常简单：

```
message = # assign the message here
notification = Notification.create(:parent => message) 
```

然后，您可以查询通知并将其用作所有通知的来源。

# jquery - 使用 jquery 验证表单

> ID：10960758
> 
> 赞同：0
> 
> 时间：2012-06-09T11:50:57.257
> 
> 标签：jquery

我正在阅读有关表单验证的教程，并遵循了它。表格仍未验证。请帮帮我。谢谢

```
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="stylesheet.css" type="text/css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>    
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script>
$(document).ready(function(){
    $("#registerForm").validate();
  });
</script>

<title>9am Resource Agency</title>
</head> 
```

这是表格，

```
 <form id="form1" class="registerForm" method="post" action="mailsent.php">                                                
                      <input name="name" class="required" type="text" minlength="3"  id="name"  style="font-family: Verdana; color:#FFFFFF; ; font-size: 13px; background-color: #0E0E0F;border: 1px solid #740086; margin-bottom:10px;  width:385px;" size="32" value="Name" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/>                  
                      <input name="email" class="required" type="text" id="email" minlength="5"  style=" font-family: Verdana;  font-size: 13px;  color:#FFFFFF; background-color: #0E0E0F; border: 1px solid #740086;  margin-bottom:10px;   width:385px;" size="38" value="Email" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;" />
                      <input name="phone"  type="text" id="phone" minlength="7" style=" font-family: Verdana; color:#FFFFFF; font-size: 13px;background-color: #0E0E0F; border: 1px solid #740086; width:385px;  margin-bottom:10px;" size="385" value="Phone #" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/>
                     <textarea
                     minlength="10"
                     class="required"
    name="message"
    cols="37"
    rows="12"
    id="message"
    style="font-family:Verdana; color:#FFFFFF; font-size:13px; background-color:#0E0E0F; border:1px solid #740086; width:385px;margin-bottom:10px;overflow:hidden;"
    onFocus="if(this.value==this.defaultValue)this.value='';"
    onBlur="if(this.value=='')this.value=this.defaultValue;">
Message
</textarea>

                      <input style="margin-left:303px; margin-top:20px;" type="image" src="logonbutton.png" name="Submit" value="Submit" />                    
   </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:54:19.400

您正在使用`$("#registerForm").validate();`，但您的表单 ID 是`form1`. 改成：

```
$("#form1").validate(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T11:54:52.863

**工作演示** [http://jsfiddle.net/dMTCq/](http://jsfiddle.net/dMTCq/)

好的链接：[http ://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

*从我之前的演示中*还可以为您提供一些额外的东西：http:* [//jsfiddle.net/CRfuZ/](http://jsfiddle.net/CRfuZ/)*

 *这应该有帮助:)

**代码**

```
jQuery(function($) {
    $("#form1").validate();
}); 
```

**如果你想用于课堂使用 ** `.`像这样。

```
jQuery(function($) {
    $(".registerForm").validate();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T11:56:58.977

无需在头部包含两个 jquery-core 文件。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T12:00:20.300

我很好奇为什么你的脚本标签中有 2 个版本的 jQuery。版本 1.6.1 和版本 1.3.2

如果您想执行 jQuery 验证，您也没有包括 jQuery 不显眼的验证。

我建议删除版本 1.3.2 行，因为它与 1.6.1 冲突，然后添加必要的脚本进行验证。按此顺序：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

如果你想要最新版本的 jQuery，我建议不要使用 1.6.1 脚本，而是使用这个。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

可以将这 4 行放在您的`_Layout`视图中的`head`部分中，以便它们可用于所有视图。然后您根本不必将它们放在您的个人视图中*

# java - 如何检查在鼠标单击事件中选择了哪个 JTree？

> ID：10960760
> 
> 赞同：1
> 
> 时间：2012-06-09T11:51:16.643
> 
> 标签：java, swing, mouseevent, jtree, mouselistener

我正在制作应用程序。在 Java 中的 Netbeans 中。在我的课堂上，我有 3 个`JTree`实例。我想检查在树的鼠标单击事件中单击或选择了哪个树的节点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:00:48.217

看：

*   [`addTreeSelectionListener(TreeSelectionListener)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#addTreeSelectionListener%28javax.swing.event.TreeSelectionListener%29)
*   [`EventObject.getSource()`](http://docs.oracle.com/javase/7/docs/api/java/util/EventObject.html#getSource%28%29)（`TreeSelectionEvent`扩展它）。

# java - 带有 Java Content Assist 覆盖字段名称的 Eclipse IDE

> ID：10960761
> 
> 赞同：1
> 
> 时间：2012-06-09T11:51:29.270
> 
> 标签：java, eclipse, content-assist

我对 Java 完全陌生，并且从 C# 背景中学习它。

我目前安装了 Eclipse 作为我选择的 IDE；并且我尝试设置“内容辅助”，使其像 Visual Studio 中的 Intellisense 一样工作；即，一旦我开始输入任何内容，它就会弹出。

但是，我注意到当我按下分号键时，它会令人讨厌地在我的字段名称末尾附加一些东西。例如，如果我输入：

私有字符串名

然后当我添加分号时（只要我足够快），我得到这个：

私有字符串 firstNameString;

有什么办法可以关闭它吗？我在偏好中看不到任何方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:30:13.733

我在 Eclipse IRC 频道中与某人交谈，并被告知无法禁用此功能。其实对于我这种习惯了 C# 和 VS 的 Intellisense 的人来说，并没有真正的解决方案。

仅有的两个选项是：

1：恢复为仅在您按“。”时才弹出内容辅助列表的标准选项。（虽然它可以随时用 Ctrl+Space 手动打开，但我不喜欢每次都做这个额外的组合，尤其是对于学习者）

2：保持它像智能感知一样，但只要我输入分号，就会忍受 Eclipse 自动完成字段名称。

老实说，这两种选择似乎都不令人满意，所以我建议像我这样希望迁移的 Visual Studio 粉丝尝试其他 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:56:42.107

不知道如何设置 Content Assist Eclipse 功能以像 VS intellisense 一样工作，但是，在 Window > Preferences > Java > Editor > Content Assist > Advanced 中，如果您在两者中都取消选中“Java Proposals”，则有 2 个列表其中并检查“Java Type Proposals”，您应该修复类型名称后缀自动插入问题。

![在此处输入图像描述](../Images/890fabe43e233bc1e9bade7ea795289e.png)

此外，您可以尝试[NetBeans](http://netbeans.org/)，它是一个基于 java IDE，具有良好的自动完成功能（它还可以在自动完成旁边显示文档并像 Visual Assist 那样插入代码模板）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T17:59:02.540

在使用 Java 大约一年后，我找到了答案：使用[IDEA](http://www.jetbrains.com/idea/)。

# cocos2d-iphone - 用 cocos2d 绘图

> ID：10960767
> 
> 赞同：0
> 
> 时间：2012-06-09T11:52:24.817
> 
> 标签：cocos2d-iphone, cclayer

我重写了 CCLayerColor 的 draw 方法来绘制边框，但是颜色没有改变。我试过 ccDrawXxxx 并且他们都只使用白色作为颜色。我也试过`glColor4ub`同样的效果。这就是我的绘图方法中的全部内容：

```
CGSize selfSize = [self contentSize];
float selfHeight = selfSize.height;
float selfWidth = selfSize.width;
CGPoint vertices[4] = {ccp(0.f, 0.f), ccp(0.f, selfHeight), ccp(selfWidth, selfHeight), ccp(selfWidth, 0.f)};

glColor4f(0, 0, 1.0f, 1.0f);
glLineWidth(4.0f);
ccDrawPoly(vertices, 4, YES); 
```

我错过了什么吗？我正在使用 v2.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:56:41.427

这应该有效：

```
ccDrawColor(1, 0, 0, 1);
ccDrawSomething(…); 
```

你不应该在 cocos2d 2.0 中使用像 glColor4f 和 glLineWidth 这样的 GLES 1.1 方法。也许这会通过导致 OpenGL 错误以某种方式影响 GL 状态。

# php - 学习 PHP - 有人可以解释这个 if 语句吗？

> ID：10960772
> 
> 赞同：0
> 
> 时间：2012-06-09T11:53:25.233
> 
> 标签：php

所以我正在学习 PHP，我正在根据 phpfox 学习更复杂的 php 标准。我遇到的一个问题是几行代码 - 我得到了他们“做什么”。但我不明白为什么它们的结构是这样的。有人可以解释一下吗？

在下面的代码行中，if 语句被 {} 而不是通常的：

```
if thing('condition') {
do stuff
} 
```

我熟悉的方式。为什么是这样？

```
{if Phpfox::isUser() && !PHPFOX_IS_AJAX && $sCustomViewType === null}
{if (Phpfox::getUserBy('profile_page_id') > 0 && defined('PHPFOX_IS_USER_PROFILE')) 
|| (isset($aFeedCallback.disable_share) && $aFeedCallback.disable_share) 
|| (defined('PHPFOX_IS_USER_PROFILE') && !Phpfox::getService('user.privacy')->hasAccess('' . $aUser.user_id . '', 'feed.share_on_wall'))
|| (defined('PHPFOX_IS_USER_PROFILE') && !Phpfox::getUserParam('profile.can_post_comment_on_profile'))
}

{else} 
```

还有 :: 的事情是什么？当我看到（不在此）a | 它本身在做什么？

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:57:27.200

该代码什么也不做。（从字面上看，它只检查东西而不做任何事情）。

不要那样编码。

* * *

至于 ，`::`那叫**[作用域解析操作符](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)**，用来标记静态类变量、静态类方法和类常量。

单管道 ( `|`) 是**[按位或运算符](http://php.net/manual/en/language.operators.bitwise.php)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T11:59:20.177

好吧，看起来这不仅仅是 PHP。它是 smarty 模板的一部分，这就是我们在 smarty 模板文件中使用 if else 的方式。

来自 smarty 网站本身的示例。

```
{if $name eq 'Fred'}
    Welcome Sir.
{elseif $name eq 'Wilma'}
    Welcome Ma'am.
{else}
    Welcome, whatever you are.
{/if} 
```

有关此链接的更多详细信息[http://www.smarty.net/docsv2/en/language.function.if.tpl](http://www.smarty.net/docsv2/en/language.function.if.tpl)

如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:04:15.107

看起来像 phpfox 模板（使用 smarty）。

[http://www.phpfox.com/kb/article/231/template-tags-in-phpfox/](http://www.phpfox.com/kb/article/231/template-tags-in-phpfox/)

因此，您可能遗漏的 {if} 和 {else} 之间的部分是如果 if 中的条件为真则生成（到 html）的部分。

:: 事物是静态方法的调用。Phpfox 是一个带有静态方法的类。这些方法不需要对象，称为 ClassName::method()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T12:03:50.557

您可以在 smarty 模板页面中轻松使用 if else 条件。来自 smarty 网站本身的示例。

{if $name=='anil'} anil gupta {else} amita gupta {/if}

# android - 如何在查询远程服务器并更新屏幕后调试缓慢的 Android Async 响应？

> ID：10960773
> 
> 赞同：0
> 
> 时间：2012-06-09T11:53:51.680
> 
> 标签：android, android-layout, android-listview, android-asynctask

我有一个 android 应用程序，它使用相同的服务器 PHP 脚本在数据库中执行某些操作并做出响应，然后相应地更新您的屏幕。

大约 60% 的时间它是快速的。但是有时手机的ui会挂很久，这真的让用户感到困惑，因为他们认为有问题。

另外，如果应用程序屏幕长时间挂起，我只是参考它，我看到数据都在那里，所以问题是在数据插入数据库之后。

这是我的安卓代码：

我有一个 TopicActivity 扩展 BaseListActivity 扩展 ListActivity

在 TopicActivity 中，我首先设置了这样的列表：

```
DiscussionMessage d = new DiscussionMessage ();
d.setMessage( "Please wait while the discussion load..." );

discussion.add(d);
adapter = new ArrayAdapter<DiscussionMessage>( 
        this,R.layout.discussion_comments, 
        discussion);

setListAdapter(adapter); 
```

然后当发生某些事情时，我调用 sendFeedback 方法，如下所示：

```
public void sendFeedback( String c , String user_id , String problem_id , 
        String recent_topic_id )
{  
    String[] params = new String[] 
            { "the_remote_url", 
             c , user_id, problem_id , recent_topic_id };

    AddComment task = new AddComment();
    task.execute(params);        
} 
```

下面是 AddComment 类的样子。它在 TopicActivity 类中：

```
public class AddComment extends AsyncTask<String, Void, String> 
{
    @Override
    protected String doInBackground(String... theParams) 
    {
        String myUrl = theParams[0];
        final String comment = theParams[1];
        final String user_id = theParams[2];
        final String problem_id = theParams[3];
        final String recent_topic_id = theParams[4];

        String charset = "UTF-8";           
        String response = null;

        try 
        {                           
            String query = String.format("comment=%s&user_id=%s&problem_id=%s&recent_topic_id=%s", 
                     URLEncoder.encode( comment, charset), 
                     URLEncoder.encode( user_id, charset), 
                     URLEncoder.encode( problem_id, charset), 
                     URLEncoder.encode( recent_topic_id, charset)
                     );             

            final URL url = new URL( myUrl + "?" + query );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            InputStream stream = conn.getInputStream();
            byte[] stream_buffer = new byte[8196];
            int readCount;
            StringBuilder stream_builder = new StringBuilder();
            while ((readCount = stream.read(stream_buffer)) > -1) 
            {
                stream_builder.append(new String(stream_buffer, 0, readCount));
            }

        } 
        catch (Exception e) 
        {
                e.printStackTrace();
        }

        return response;
    }

    @Override
    protected void onPostExecute(String result) 
    {

        if ( result != null )
        {
         Toast.makeText(getApplicationContext(), "Could not get the current discussion.", Toast.LENGTH_LONG).show();                                
        }
        else
        {               
            try
            {
                JSONArray obj = new JSONArray(result);

                if ( obj != null )
                {
                    discussion.clear();

                    if ( obj.length() == 0 )
                    {
                        DiscussionMessage message = new DiscussionMessage ( );
                        message.setMessage("No messages in this discussion.");

                        discussion.add( message );
                    }
                    else
                    {
                        for ( int i = 0; i < obj.length(); i++ )
                        {
                            JSONObject o = obj.getJSONObject(i);

                            String comment = o.getString("comment");
                            String commenter_id = o.getString("commenter_id");
                            String comment_id = o.getString("comment_id");
                            String first_name = o.getString("first_name");
                            String last_name = o.getString("last_name");
                            String is_private = o.getString("is_private");

                            DiscussionMessage d = new DiscussionMessage ( );
                            d.setMessage(comment);
                            d.setAuthorId(commenter_id);
                            d.setMessageId(comment_id); 
                            d.setAuthorName(first_name);                                

                            discussion.add( d );
                        }
                    }
                    adapter.notifyDataSetChanged(); 

                    // Now clear the text area of text.
                    EditText comment = (EditText) findViewById(R.id.discussion_comment);  
                    comment.setText( "" );  
                }                   
            }
            catch ( Exception e )
            {
                   // Do something.
            }
        }
    }        
} 
```

是否有可能从中看出我可能做错了什么？这可能是我如何使用 Async 或 ListAdapter 的问题吗？

非常感谢修复和/或调试此问题的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:38:40.327

将`DiscussionMessage`对象的 JSON 解析和创建移至`doInBackground()`，因为它们需要时间并且应该在后台线程上运行。离开将`DiscussionMessage`对象倒入并`Adapter`调用`notifyDataSetChanged()`。`onPostExecute()`

除此之外，正如 Fuzzical Logic 指出的那样，您需要准确确定您的困难所在，无论是使用`Log`调用还是 Traceview 或其他方式。例如，您的 Web 服务是否有时响应缓慢？

# iphone - 如何使用自己的委托方法添加子视图？

> ID：10960774
> 
> 赞同：0
> 
> 时间：2012-06-09T11:54:01.610
> 
> 标签：iphone, ios, ipad, delegates, addsubview

![在此处输入图像描述](../Images/1fcd27049c276254833fcb50b04d300f.png)

正如我的屏幕截图所示，我在 SliderValueViewController.xib 上有 UIButton。我希望当我单击此 UIButton 时，它会自动在 Secondview.xib 中添加子视图（名称为 detailview）。这是我的代码。在 SliderValueViewController.hi 中声明我的协议，

```
#import <UIKit/UIKit.h>
@protocol Testmyview

-(void)displayview;

@end

@interface SliderValueViewController : UIViewController {

    IBOutlet UILabel *sliderValue;
    IBOutlet UIButton *btngo;
        id <Testmyview> delegate;
}

@property (nonatomic, retain) IBOutlet UILabel *sliderValue;
@property (nonatomic, assign)id <Testmyview> delegate;

-(void)updateSliderValueTo:(CGFloat)_value;
-(IBAction)gotodetailview;
@end 
```

在 SliderValueViewController.m

```
 #import "SliderValueViewController.h"
           #import"secondview.h"
           @implementation SliderValueViewController
           @synthesize sliderValue;
           @synthesize delegate; 
```

这是我的按钮功能..

```
 -(IBAction)gotodetailview
      {
         [self.delegate displayview];
      } 
```

现在我的 secondview.h

![在此处输入图像描述](../Images/c13e9e5eee923d55cf7af23d1923903f.png)

而我的 secondview.m 看起来就像这样..

```
 #import "secondview.h"
   #import "SliderValueViewController.h"
   #import "ELCSlider.h"
   @implementation secondview 
```

这是我想要的功能..

```
 -(void)displayview
    {
      [self.view addSubview:detailview];    
   } 
```

在 ELSLiderl.mi 中执行此操作..

```
 -(id)initWithCoder:(NSCoder *)aDecoder {

 if(self = [super initWithCoder:aDecoder]) {
    [self addTarget:self action:@selector(valueChanged) forControlEvents:UIControlEventValueChanged];
    sliderValueController = [[SliderValueViewController alloc] initWithNibName:@"SliderValueViewController" bundle:[NSBundle mainBundle]];
    popoverController = [[UIPopoverController alloc] initWithContentViewController:sliderValueController];
    [popoverController   setPopoverContentSize:sliderValueController.view.frame.size];
     }

    return self;    
   }

 -(void)valueChanged {

[sliderValueController updateSliderValueTo:self.value];

CGFloat sliderMin =  self.minimumValue;
CGFloat sliderMax = self.maximumValue;
CGFloat sliderMaxMinDiff = sliderMax - sliderMin;
CGFloat sliderValue = self.value;

if(sliderMin < 0.0) {

    sliderValue = self.value-sliderMin;
    sliderMax = sliderMax - sliderMin;
    sliderMin = 0.0;
    sliderMaxMinDiff = sliderMax - sliderMin;
}

CGFloat xCoord = ((sliderValue-sliderMin)/sliderMaxMinDiff)*[self frame].size.width-sliderValueController.view.frame.size.width/2.0;

CGFloat halfMax = (sliderMax+sliderMin)/2.0;

if(sliderValue > halfMax) {

    sliderValue = (sliderValue - halfMax)+(sliderMin*1.0);
    sliderValue = sliderValue/halfMax;
    sliderValue = sliderValue*11.0;

    xCoord = xCoord - sliderValue;
}

else if(sliderValue <  halfMax) {

    sliderValue = (halfMax - sliderValue)+(sliderMin*1.0);
    sliderValue = sliderValue/halfMax;
    sliderValue = sliderValue*11.0;

    xCoord = xCoord + sliderValue;
}

[popoverController presentPopoverFromRect:CGRectMake(xCoord, 0, sliderValueController.view.frame.size.width, sliderValueController.view.frame.size.height) inView:self permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
 } 
```

使用所有这些代码，它不会给我带来任何磨损或错误，但它没有添加子视图。当我使用断点时，我的 UIButton 方法（-（IBAction）gotodetailview）被调用，但它没有在 secondview 中调用委托方法方法（-（void）displayview）。任何人都可以提前帮助我犯什么错误.thanx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T13:26:03.460

在`secondview.m`

您似乎忘记设置的`delegate`属性`SliderValueViewController`

在呈现或推送“ `SliderValueViewController`”的功能中你会有这样的东西

```
SliderValueViewController *controller = [[SliderValueViewController alloc] init];
//You will need to add this code
//self is secondview
controller.delegate = self; 
```

现在当接到电话时`[self.delegate displayview];`，这将调用`displayview``secondview`

# .htaccess - 从 Magento url 中删除子目录名称

> ID：10960778
> 
> 赞同：1
> 
> 时间：2012-06-09T11:54:20.737
> 
> 标签：.htaccess, magento, mod-rewrite

我在子目录中安装了 Magento，Magento 的路径是“public_html/magento”。出于充分的理由，我需要让 Magento 安装远离根目录。

我在根目录中有一个 .htaccess 文件，“public_html”，如下所示：

```
Options +FollowSymLinks

RewriteEngine On

RewriteCond %{http_host} ^alisonclairenaturalbeauty.com [NC]
RewriteRule ^(.*)$ http://www.alisonclairenaturalbeauty.com/$1 [R=301,L] 

RewriteCond %{HTTP_HOST}   ^(www\.)?alisonclairenaturalbeauty\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/magento(/.*)?$ [NC]
RewriteRule ^(.*)$         /magento/$1    [QSA,L] 
```

在“public_html/magento”的标准 Magento .htaccess 中，我取消了 RewriteBase 指令的注释，如下所示：

```
RewriteBase /magento/ 
```

在 Magento 配置中，我的不安全网址是“http://www.alisonclairenaturalbeauty.com/”，而我的安全网址是“https://www.alisonclairenaturalbeauty.com/”。

我的目标有两个：

1.  我想从 url 中删除子目录名称，以便“http://www.alisonclairenaturalbeauty.com/magento/”在浏览器中显示为“http://www.alisonclairenaturalbeauty.com”。

2.  我不想要重复的网址，因此“真实”网址“http://www.alisonclairenaturalbeauty.com/magento/ *”必须显示为“http://www.alisonclairenaturalbeauty.com/* ”。

我实现了第一个目标，但没有实现第二个目标。不幸的是，我的网站页面可以通过“http://www.alisonclairenaturalbeauty.com/skin-care/hand-creams.html”和“http://www.alisonclairenaturalbeauty.com/magento/skin-care/hand”访问-creams.html'。

我希望将“http://www.alisonclairenaturalbeauty.com/magento/skin-care/hand-creams.html”改写为“http://www.alisonclairenaturalbeauty.com/skin-care/hand-creams.html” .

我已经浏览了 SO 上的帖子以及我可以在 Google 上找到的任何帖子，但无济于事，因此非常感谢任何帮助。

# ruby-on-rails-3 - 重命名sqlite3数据库表中的列？（重命名列）

> ID：10960784
> 
> 赞同：0
> 
> 时间：2012-06-09T11:55:02.753
> 
> 标签：ruby-on-rails-3, sqlite

我错误地给我的数据库中的一列一个错误的名称，所以我想更改它。我已经运行了我的：

```
bundle exec rake db:migrate 
```

我正在尝试使用以下命令重命名我的列：

```
rename_column(Bankline, appendex_number, appendix_number) 
```

取自这里： [http ://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-rename_column](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-rename_column)

但是，我的终端给了我这个错误信息：

```
-bash: syntax error near unexpected token `Bankline,' 
```

有任何想法吗？我已经尝试过这些命令：

```
rename_column(bankline, appendex_number, appendix_number)

rename_column(banklines, appendex_number, appendix_number) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:59:52.750

答案在[您链接到的页面上](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-rename_column)：

```
rename_column(:banklines, :description, :name) 
```

# powershell - 与 Powershell 脚本相关的错误

> ID：10960787
> 
> 赞同：1
> 
> 时间：2012-06-09T11:55:36.513
> 
> 标签：powershell, configuration

我正在使用 Powershell (.ps1) 脚本来扫描物理应用程序和 Web 服务器，以识别与我们的应用程序相关的配置文件，这些文件中指定了硬编码的 IP 地址。

我正在执行脚本并出现错误的 Windows 服务器的 Powershell 版本 -1.0。

我收到**“您不能在空值表达式上调用方法”**

场景是：在我的本地物理机上运行脚本可以正常工作，但是，在我的应用程序服务器上运行它会给我上述错误。

```
$itemsFromFolder = Get-ChildItem -path $drive -include *.txt, *web.config, *.htm, *.html, *.asp, *.ascx, *.aspx, *.xml, *.js, *.css, *.sql -recurse -errorAction SilentlyContinue

Write-host -message "initializing object" 
$itemsToScan = New-Object System.Collections.Generic.List[string]
Write-host -message "initializing object $itemsToScan

foreach($item in $itemsFromFolder)
{
    $itemsToScan.Add($item.FullName)
    #Write-host -message "itemstoscan loop $itemsToScan" 
} 
```

我正在为 System.Collections.Generic.List[string] 实例化一个对象，该对象将包含在变量 $itemstoscan 中，该变量将包含要扫描我提供的 IP 模式的项目。

问题：

1.  `$itemsToScan = New-Object System.Collections.Generic.List[string]`这是在 powershell 1.0 中实例化对象的正确方法吗，这限制了我在不同配置的机器上运行相同的脚本？

2.  `$itemsToScan.Add($item.FullName)`我在本地运行良好的应用服务器上评估此表达式时出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T20:50:45.470

在 Powershell v1 中创建泛型类型没有“开箱即用”支持（阅读：您在 v1 中使用 v2 语法）。

`$itemsToScan = New-Object System.Collections.Generic.List[string]`将在 Powershell v1 中引发异常，变量`itemToScan`将为`$null`. 作为一种解决方法，您可以使用[New-GenericObject](http://www.leeholmes.com/blog/2006/08/18/creating-generic-types-in-powershell/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:11:04.710

我怀疑你可以更容易地达到预期的结果：

```
$itemsFromFolder = Get-Childitem -path $drive -include  *.txt, *web.config, *.htm, *.html, *.asp, *.ascx, *.aspx, *.xml, *.js, *.css, *.sql  -recurse -errorAction SilentlyContinue

$itemsToScan = $itemsfromfolder | Select-Object FullName 
```

使用 PowerShell，您不必再费心提取字符串值，而是利用传递实际对象的优势。

# sencha-touch-2 - onresume 不在 sencha 工作

> ID：10960800
> 
> 赞同：1
> 
> 时间：2012-06-09T11:58:21.567
> 
> 标签：sencha-touch-2, resume

我正在运行一个应用程序，当我在 IOS 中构建它并运行它时，它运行良好。我有一个绑定到它的本机应用程序首选项。因此，当应用程序恢复时，我需要将应用程序首选项中的数据加载到我的应用程序设置中。

我试过代码：

```
init: function(){
},
launch: function(){
loaduserpref();
}
resume: function(){
console.log('resumed');
setuserpref();
} 
```

但从不调用简历。

我应该怎么办？

# c# - itext sharp 获取书签总数

> ID：10960801
> 
> 赞同：1
> 
> 时间：2012-06-09T11:58:29.977
> 
> 标签：c#, itextsharp

我想知道如何获取 pdf 文件中的书签总数。我正在阅读pdf文件：

```
pdfReader = new iTextSharp.text.pdf.PdfReader(filePath); 
```

我知道我必须使用 pdfOutline 类，但如何在我当前的场景中使用它是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T10:28:49.607

嗯，我自己想通了。以下是可用于获取 PDF 文件中书签总数的方法。

```
int bookmarks = iTextSharp.text.pdf.SimpleBookmark.GetBookmark(pdfReader).Count; 
```

希望它会帮助某人，某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-01T11:02:21.603

您的回答具有误导性，因为它只会获得顶级（根）书签。这与书签的总数不同。PDF 书签的工作方式类似于具有嵌套对象的树或 XML 结构。您建议的答案将全部错过。

这是递归查找所有书签并对其进行处理的正确代码 [https://stackoverflow.com/a/28634840/2772858](https://stackoverflow.com/a/28634840/2772858)

# python - apt-get install 用于不同的 python 版本

> ID：10960805
> 
> 赞同：19
> 
> 时间：2012-06-09T11:59:06.070
> 
> 标签：python, linux, ubuntu, installation

默认情况下，我有带有 python2.6 的 ubuntu 10.04。我已经安装了python2.7。

当我想安装 python 包时

```
apt-get python-<package> 
```

它被安装到python2.6。我怎样才能将包安装到python2.7？有什么选择吗？

我看过[这个](https://superuser.com/a/236249/133546)，但我在我的操作系统中找不到这样的目录。我考虑过使用`easy_install-2.7`，但并非所有软件包都受支持。例如`python-torctl`.

我对将 python2.7 与`apt-get install`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T12:51:28.853

Python 拥有自己的包管理工具，与 Linux 发行版（包括 Ubuntu）的一套并行。存储库是 Pypi - Python 包索引，包是使用[`pip`](https://pypi.python.org/pypi/pip)easy_install 脚本安装的，它是 Python 的 setuptools 包的一部分。

根据经验，您不应同时使用通过 pip/setuptools 安装的软件包和发行版可用的软件包（通过 apt-get、yum、urpmi 等），因为它们可能会发生冲突。

因此，处理它的一种不太容易出错的方法是在您的系统中安装单独的 Python - 将系统附带的 Python 保留为系统脚本等 - 在此 Python 上，使用包管理器安装的包只要。并安装其他版本的 Python（或什至相同），以使用“virtualenv”运行 - 在这些其他安装中，您仅使用 pip/setuptools 安装东西。

（即使一个人选择大胆地生活而不使用 virtualenvs，在与系统的 Python 相同的前缀（`/usr`，甚至`/usr/local`）上安装另一个 Python 版本也会导致混淆错误和冲突）。

请注意，Debian - 和 Ubuntu - 系统设计了一种在 /usr 中运行并行官方 Python 的方法，并让 apt-get 一次将 Python 包安装到两个 Python 版本。这主要是可行的，但它们会破坏 Python 的默认目录层次结构，并且某些应用程序无法以这种方式使用 Python。（在 Debian 或 Ubuntu 中查找模块文件本身也是一团糟）。因此，即使您的系统在 apt-get 上确实有多个可用的 Python 版本，上述方法仍可作为推荐使用。

简而言之，一旦您编译了所需的 Python 版本，请执行以下操作：

1.  使用系统的包管理器安装“python-setuptools”和“python-virtualenv”（不确定这些是否是实际的包名）。
2.  用于`virtualenv`创建一个环境，您将在该环境中使用不同的 Python 版本
3.  激活您的 virtualenv，并在其上安装 Python 包`pip`。

Virtualenv 确实有一个“--help”开关来帮助你，但你基本上是这样做的：

```
$ virtualenv -p <path-to-python-interpreter>  <environment-dir>
$ source <environment-dir>/bin/activate 
```

你就在那里 - 由于设置了环境变量，所有使用 Python 的东西都会在 virtualenv 中“看到”解释器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T12:31:53.617

ubuntu 10.04 没有 python2.7 包。您必须自己构建 2.7。我确实读过一篇关于 ubuntu 在 12.04 发布时发布 python2.7 包的文章，但我不确定存储库位置是什么。

[http://eli.thegreenplace.net/2011/10/10/installing-python-2-7-on-ubuntu/](http://eli.thegreenplace.net/2011/10/10/installing-python-2-7-on-ubuntu/)

或者：

```
sudo add-apt-repository ppa:fkrull/deadsnakes
sudo apt-get update
sudo apt-get install python2.7 
```

[https://askubuntu.com/questions/101591/install-python-2-7-2-on-ubuntu-10-04-64-bit](https://askubuntu.com/questions/101591/install-python-2-7-2-on-ubuntu-10-04-64-bit)

这个问题网上有很多答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-10T13:12:57.887

**pyenv**

[https://github.com/pyenv/pyenv](https://github.com/pyenv/pyenv)

Pyenv 允许您在没有 sudo 的情况下为单个用户管理多个 Python 版本，就像[Node.js NVM](https://askubuntu.com/questions/594656/how-to-install-the-latest-versions-of-nodejs-and-npm/971612#971612)和[Ruby RVM](https://stackoverflow.com/questions/2812471/is-there-a-python-equivalent-of-rubys-rvm/59268119#59268119)一样。

安装 Pyenv：

```
curl https://pyenv.run | bash 
```

然后添加到您的`.bashrc`：

```
export PATH="${HOME}/.pyenv/bin:$PATH"
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)" 
```

查找要安装的 Python 版本：

```
pyenv install --list 
```

安装你想要的python版本：

```
# Increase the chances that the build will have all dependencies.
# https://github.com/pyenv/pyenv/wiki/Common-build-problems
sudo apt build-dep python3
sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
  libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev \
  xz-utils tk-dev libffi-dev liblzma-dev python-openssl git

# Build and install a Python version from source.
pyenv install 3.8.0 
```

列出可用的 Python 版本：

```
pyenv versions 
```

我们现在有：

```
* system (set by /home/cirsan01/.pyenv/version)
  3.8.0 
```

选择不同的 python 版本：

```
pyenv global 3.8.0
python --version
python3 --version 
```

两个输出：

```
Python 3.8.0 
```

我们现在可以继续正常安装和使用包：

```
pip install cowsay
python -c 'import cowsay; cowsay.tux("Python is fun")'
cowsay 'hello' 
```

我们可以通过以下方式确认所有内容都已本地安装在我们干净的环境中：

```
python -c 'import cowsay; print(cowsay.__file__)' 
```

给出：

```
/home/ciro/.pyenv/versions/3.8.0/lib/python3.8/site-packages/cowsay/__init__.py 
```

和：

```
which cowsay 
```

给出：

```
/home/ciro/.pyenv/shims/cowsay 
```

和：

```
which python 
```

给出：

```
/home/ciro/.pyenv/shims/python 
```

**每个项目使用情况**

在上一节中，我们看到了如何在全局设置中使用 pyenv。

但是，您通常想要的是在每个项目的基础上设置特定的 python 和包版本。这是如何做到的。

首先像以前一样安装所需的 Python 版本。

然后，在您的项目目录中，使用以下命令设置所需的 python 版本：

```
pyenv local 3.8.0 
```

它创建一个`.python-version`包含版本字符串的文件。

现在让我们为我们的项目在本地安装一个包： TODO：似乎没有什么好方法：[Pyenv 选择 virtualenv 目录](https://stackoverflow.com/questions/30407446/pyenv-choose-virtualenv-directory/59267972#59267972)

现在，当有人想使用你的项目时，他们会这样做：

```
pyenv local 
```

它将 Python 版本设置为正确的版本。

相关话题：

*   [https://askubuntu.com/questions/682869/how-do-i-install-a-different-python-version-using-apt-get](https://askubuntu.com/questions/682869/how-do-i-install-a-different-python-version-using-apt-get)
*   [https://unix.stackexchange.com/questions/9711/what-is-the-proper-way-to-manage-multiple-python-versions](https://unix.stackexchange.com/questions/9711/what-is-the-proper-way-to-manage-multiple-python-versions)
*   [apt-get install 用于不同的 python 版本](https://stackoverflow.com/questions/10960805/apt-get-install-for-different-python-versions/59268046#59268046)

在 Ubuntu 18.04、pyenv 1.2.15 上测试。

# html - 性能 - 在 html 表的每一行中都有复选框

> ID：10960808
> 
> 赞同：0
> 
> 时间：2012-06-09T11:59:30.240
> 
> 标签：html, performance, checkbox, html-table

为了在html表格中实现多行选择，传统上都是在每一行中使用复选框。这会影响表格（大量数据）渲染（性能）吗？我已经看到一些网络应用程序通过将带有边框的 div 和一些 CSS 类应用于选定的行来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:02:12.100

简短回答：没有*复选框*不会影响浏览器渲染它的性能。

影响性能的因素是图像、外部资源、iframe、加载的 JS/CSS 文件等。使用[Google Page Speed](https://developers.google.com/speed/pagespeed/)插件找出影响性能的因素以及如何改进它。

# c# - 有没有其他方法来设置长定时器间隔

> ID：10960815
> 
> 赞同：-1
> 
> 时间：2012-06-09T12:00:19.180
> 
> 标签：c#, .net, timer, intervals

我正在制作一个程序，它必须每 30 或 60 分钟检查一次数据库，并在 Windows 窗体界面中显示结果（如果有）。当然，from 提供访问的其他功能在执行数据库检查时应该仍然可用。为此，我使用了 System.Timers.Timer，它在与 UI 不同的线程上执行一个方法（如果使用这种方法有问题，请随时发表评论）。我写了一个小而简单的程序来测试热点的工作，只是注意到我不能真正将间隔设置为超过 ~ 1 分钟（我需要 30 分钟到一个小时）。我想出了这个解决方案：

```
public partial class Form1 : Form
{

    int s = 2;

    int counter = 1; //minutes counter

    System.Timers.Timer t;

    public Form1()
    {
        InitializeComponent();

        t = new System.Timers.Timer();
        t.Elapsed += timerElapsed;
        t.Interval = 60000;
        t.Start();
        listBox1.Items.Add(DateTime.Now.ToString());
    }

    //doing stuff on a worker thread
    public void timerElapsed(object sender, EventArgs e)
    {
        //check of 30 minutes have passed
        if (counter < 30)
        {
            //increment counter and leave method
            counter++;
            return;
        }
        else
        {
            //do the stuff
            s++;
            string result = s + "   " + DateTime.Now.ToString() + Thread.CurrentThread.ManagedThreadId.ToString();
            //pass the result to the form`s listbox
            Action action = () => listBox2.Items.Add(result);
            this.Invoke(action);
            //reset minutes counter
            counter = 0;
        }

    }

    //do other stuff to check if threadid`s are different
    //and if the threads work simultaneously
    private void button1_Click(object sender, EventArgs e)
    {
        for (int v = 0; v <= 100; v++)
        {

            string name = v + " " + Thread.CurrentThread.ManagedThreadId.ToString() +
                " " + DateTime.Now.ToString(); ;
            listBox1.Items.Add(name);
            Thread.Sleep(1000); //so the whole operation should take around 100 seconds
        }

    }
} 
```

但是这样一来，Elapsed 事件就会被引发，并且每分钟调用一次 timerElapsed 方法，似乎有点没用。有没有办法实际设置更长的计时器间隔？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:02:41.803

间隔以毫秒为单位，因此您似乎已将间隔设置为 60 秒：

```
t.Interval = 60000; // 60 * 1000 (1 minute) 
```

如果您想有 1 小时的间隔，那么您需要将间隔更改为：

```
t.Interval = 3600000; // 60 * 60 * 1000 (1 hour) 
```

# c# - 下载后文本文件错误

> ID：10960821
> 
> 赞同：1
> 
> 时间：2012-06-09T12:00:51.393
> 
> 标签：c#, download, webclient

当我尝试下载文本文件时，我收到错误的文本，例如`"úěćË¨Të€Ás…­žVż$—éxś¶źŹßCb}ă¬–92á•,˝V....."`

我使用 WebClient 类：

```
private void button1_Click(object sender, EventArgs e)
{
    WebClient _WebClient = new WebClient();
    string url = "http://bossa.pl/pub/metastock/forex/sesjafx/";
    string file= "20120601.prn";
    _WebClient.DownloadFile(url + file, @"C:\"+file);
} 
```

file 没有问题`20120603.prn`，但`20120601.prn`is. 怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:12:44.033

你需要这样的东西

```
client.Encoding = Encoding.GetEncoding("your encoding"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:23:02.387

[通过 WebClient.DownloadData 自动解压缩 gzip 响应](https://stackoverflow.com/questions/2973208/automatically-decompress-gzip-response-via-webclient-downloaddata)的副本

基本上你必须启用webclient的自动解压。如果您检查文件 20120601.prn 的响应标头（例如使用 firebug 或 fiddler），则会返回 gzip Content-Encoding。对于文件 20120603.prn，Content-Encoding 标头完全丢失。

```
void Main()
{
    WebClient _WebClient = new MyWebClient(); 
    string url = "http://bossa.pl/pub/metastock/forex/sesjafx/"; 
    string file= "20120601.prn";
    string a = _WebClient.DownloadString(url + file); 
}

class MyWebClient : WebClient 
{ 
    protected override WebRequest GetWebRequest(Uri address) 
    { 
        HttpWebRequest request = base.GetWebRequest(address) as HttpWebRequest; 
        request.AutomaticDecompression = DecompressionMethods.Deflate | DecompressionMethods.GZip; 
        return request; 
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:16:12.140

将您的编码设置为 UTF8

```
_WebClient.Encoding = System.Text.Encoding.UTF8; 
```

# c - Cygwin 和 Netbeans：在默认的 Windows shell 上运行？

> ID：10960822
> 
> 赞同：0
> 
> 时间：2012-06-09T12:00:53.143
> 
> 标签：c, windows, shell, netbeans, cygwin

我正在使用正确配置 Cygwin 的 Netbeans。
它编译并运行良好。问题是我无法像这样运行命令，`system("cls")`因为出现的 shell`C:\cygwin\bin\sh.exe`不是默认的 Windows 命令提示符。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:36:19.470

作为一种解决方法，您可以通过`getenv("COMSPEC")`使用您想要的任何参数的路径运行默认窗口外壳。特别针对您的情况，我会使用`"/c cls"`. （您需要`strdup`路径，因为您不能修改 . 返回的字符串`getenv`。）

# api - 通过 REST api 管理用户身份验证的正确方法？

> ID：10960825
> 
> 赞同：2
> 
> 时间：2012-06-09T12:01:35.997
> 
> 标签：api, authentication, rest

我已经做了很多研究，但我无法确定这是否是实现我需要的最佳方式。

我有一个通用的网络应用程序，我想创建一个通用的移动应用程序来配合它。为了让用户保存数据/访问用户特定的数据/等，他们必须登录，并且登录必须通过我的网络应用程序的 REST api 进行身份验证。

所以 api 有一个用于移动应用程序的私钥和一个公钥。公钥告诉我请求来自哪里（移动应用程序），私钥用作“盐”来散列查询字符串，然后当请求进入时可以在 Web 服务器上重新散列并比较有效性.

要登录，用户输入他们的用户名和密码，然后按照上述方法作为查询字符串 vars 发送。在另一端检查查询的有效性，并根据数据库检查用户名+密码对。如果登录正确，则为该用户和公钥生成一个随机的“身份验证令牌”，并将其发送回移动应用程序以在设备本地存储。

当下一个请求来自移动应用程序时，查询字符串变量之一是前面的“auth token”，它根据数据库中的“auth tokens”表检查其有效性（使用应用程序的公钥）。如果有效，则执行请求。

我的问题是，我做对了吗？这是实现我需要的最佳方式吗？最后一步似乎真的不安全，因为如果请求被拦截，公钥和身份验证令牌都是可见的。显然，请求将根据查询字符串的哈希值和另一端的私钥进行检查，这将确保请求不是来自任何恶意的地方。

还有其他步骤，或者我错过的有用的东西吗？例如，我读到还应该有一个时间戳变量，应根据请求中的 5/10 分钟时间范围检查该变量。任何超过 5/10 分钟的时间戳和请求都应该被拒绝。这很重要吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:15:58.330

您所描述的基本上是[2-legged OAuth](http://oauth.net/)的自制版本。您基本上可以使用许多实现。每当谈到安全相关的东西时，我都会说：如果其他人已经做过，不要重新发明轮子。许多大型网站（Twitter、Facebook、GitHub、Google 等）都在使用 OAuath，他们对 OAuth 标准进行了大量研究。所以我建议使用这些。

如果您担心您发送的消息可能被截获，您应该使用 HTTPS...如果您通过网络传递用户名和密码组合，这通常是一个好主意。

# android - 如何在 android 中使用 bundle 将活动之间的数据传递给片段

> ID：10960828
> 
> 赞同：1
> 
> 时间：2012-06-09T12:02:20.860
> 
> 标签：android, android-fragments

我可以将值存储在一个变量中。现在我想将该变量传递给片段使用下面的代码，我可以加载片段：

```
public class AndroidListFragmentActivity extends Activity {
    Fragment2 f2;
    public static String itemname;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.apetiserfragement);
        itemname=getIntent().getStringExtra("itemname");
        Bundle args=new Bundle();
        args.putString("itemname", itemname);
        f2=new Fragment2();
        f2.setArguments(args);
    }
} /* (Here I load fragment using xml page) itemname */ 
```

输出分为 2 个窗口，一个用于扩展列表片段（用于列表视图），一个用于片段。

片段2.xml

```
public class Fragment2 extends Fragment {
    String itemname;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        System.out.println(getArguments().getString("itemname"));

        return inflater.inflate(R.layout.fragment2, container, false);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }
} 
```

此类 itemname 中的 AndroidListFragmentActivity 我想通过 Fragment2.class .. 请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:07:30.627

如果两个片段都在其他活动上，则可以使用意图

如果在同一活动上，则可以对该特定活动进行操作

如在此[链接中](http://developer.android.com/guide/topics/fundamentals/fragments.html)

见类 TitlesFragment 的 onListItemClick

```
**
     * Helper function to show the details of a selected item, either by
     * displaying a fragment in-place in the current UI, or starting a
     * whole new activity in which it is displayed.
     */
    void showDetails(int index) {
        mCurCheckPosition = index;

        if (mDualPane) {//<---------------------f on same activity then can do operation on that particular fragment
            // We can display everything in-place with fragments, so update
            // the list to highlight the selected item and show the data.
            getListView().setItemChecked(index, true);

            // Check what fragment is currently shown, replace if needed.
            DetailsFragment details = (DetailsFragment) //<------------------------see use getFragmentManager
                    getFragmentManager().findFragmentById(R.id.details);
            if (details == null || details.getShownIndex() != index) {
                // Make new fragment to show this selection.
                details = DetailsFragment.newInstance(index);

                // Execute a transaction, replacing any existing fragment
                // with this one inside the frame.
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.replace(R.id.details, details);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }

        } else { //<----------If both fragment are on other activity then can use intent 
            // Otherwise we need to launch a new activity to display
            // the dialog fragment with selected text.
            Intent intent = new Intent();
            intent.setClass(getActivity(), DetailsActivity.class);
            intent.putExtra("index", index);
            startActivity(intent);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T16:10:27.030

在此处查看此响应：[android 中的 Fragments 和 Activity 之间的数据共享](https://stackoverflow.com/questions/13445594/data-sharing-between-fragments-and-activity-in-android/20521851#20521851)

# jquery - afterAjaxUpdate 回调函数 CListView 显示未定义

> ID：10960829
> 
> 赞同：3
> 
> 时间：2012-06-09T12:02:22.750
> 
> 标签：jquery, ajax, yii, yii-components

我正在尝试调用文件名的 afterAjaxUpdate 参数在另一个 js 文件中定义的函数，但我在控制台中收到错误，该函数未定义

```
<?php 
$dataProvider=new CActiveDataProvider('profiles',array('pagination'=>array('pageSize'=>3))); ?>
<?php $this->widget('zii.widgets.CListView', array(
'dataProvider'=>$dataProvider,
'itemView'=>'_profilesview',
'template'=>'{sorter}<br />{pager}{items}{pager}',
    'enableSorting' => true,
    'sortableAttributes'=>array(
     'name'=>'By firstName',
     'location'=>'By city',
     'age'=>'By age',
     'likes'=>'By likes'
     ),
     'afterAjaxUpdate'=>'readcookie()',
));
 ?> 
```

我的js函数是

```
$(document).ready(function(){
   function readcookie()
   {
       alert("hi");
   }
}); 
```

我可以在我的源代码中看到，文件中定义的函数包含在 yii 默认包含的所有 js 文件之后导致触发我的事件我也尝试通过设置

> renderPartial('Mybelowview',null,false,true)

这再次导致我的 js 文件包含多次，并且我的事件被多次触发。

这非常令人困惑，请帮助摆脱它谢谢大家的慷慨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T08:12:43.127

问题是内部`$(document).ready();`的函数超出了它的范围，这就是你得到*undefined*的原因。因此，您可以只拥有：

```
// $(document).ready(function(){
   function readcookie()
   {
       alert("hi");
   }
// });
// omit document.ready to make function available in the global scope 
```

或在窗口对象上定义函数以使其全局：

```
$(document).ready(function(){
   window.readcookie=function ()
   {
       alert("hi");
   };
}); 
```

最后将属性定义`'afterAjaxUpdate'`为：

```
'afterAjaxUpdate'=>'readcookie'
// if it is readcookie() it becomes a function call instead 
```

# c - 在程序运行期间可以随时删除或删除 C 变量吗？

> ID：10960831
> 
> 赞同：6
> 
> 时间：2012-06-09T12:03:29.643
> 
> 标签：c, free

我想知道是否可以删除，即从使用中删除一个 C 变量，例如，一旦该变量被使用一次？

前段时间我在思考这个问题，一个问题出现在我的脑海中。

C有很多数据类型，我们可以创建一个数据类型的变量，用简单的代码说整数

`int i;`

一旦我们以这种方式创建了一个变量，如果我们以后不需要它，我们如何“删除”它？

我在网上搜索，但没有找到任何执行此操作的 C 命令。'k 被删除'，我的意思是'k 已不复存在'。我的意思是，一旦我们不需要这个变量，它就是一种浪费，应该被删除。

C 确实提供了该`free()`功能，但它仅适用于使用`calloc(), malloc()`, 或分配的内存`realloc()`。

那么`int`，一旦使用了变量，如何删除它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-09T12:04:46.840

你没有。一旦超出范围，对象的生命周期就会结束（它被称为*自动*对象，因为它会被自动清理）。

例如

```
void foo() {
    int j = 3;

    while (blah) {
        int i = 5;
    }

    // i no longer exists
}

// j no longer exists 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-09T12:18:50.433

在 C 中，有一个对象的*存储期限*的概念，它决定了它的生命周期：

*   *静态存储*存在于程序的整个执行过程中
*   *线程存储*一直存在到线程终止
*   *自动存储*直到离开周围的块
*   *分配的存储*需要通过显式取消分配`free()`

Allocated storage aside, the language runtime will take care of reclaiming memory (eg decreasing the stack pointer to discard call frames, which 'frees' automatic storage).

# silverstripe - 是否有比 HasManyComplexTableField 更基本的 Silverstripe has_many 字段？

> ID：10960834
> 
> 赞同：0
> 
> 时间：2012-06-09T12:03:44.280
> 
> 标签：silverstripe

我正在建模课程（`CoursePage`）和该课程的实例（`CourseInstance`从`DataObject`）之间的非常基本的关联：

```
class CoursePage extends Page {
    public static $has_many = array('Instances' => 'CourseInstance');
}

class CourseInstance extends DataObject {
    public static $has_one = array('Course' => 'CoursePage');
} 
```

我在 CMS 中想要的是一种将课程实例添加到课程页面的简单方法。正在工作，`HasManyComplexDataField`但意味着所有课程页面都具有在所有课程中共享的相同（长！）实例列表。我想要的是一种仅添加/删除/编辑与该课程相关的实例的方法，而没有任何其他实例的任何详细信息`CoursePage`。

有没有更简单的领域更适合我的需求？或者，有什么方法可以将复杂字段限制为仅显示相关实例但还允许我添加新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:58:55.767

将`sourceFilter`参数设置`HasManyComplexDataField`为以下工作：

```
'CourseID = ' . $this-ID 
```

# java - 在某些情况下终止线程的正确方法是什么？

> ID：10960835
> 
> 赞同：4
> 
> 时间：2012-06-09T12:03:51.763
> 
> 标签：java, multithreading

`run`一些线程在其方法中执行一系列操作。当车站关闭时，它会通过 通知所有乘客`onStationClosed`。当它发生时，线程必须执行一些操作（例如离开站）并且线程必须在没有完成所有剩余操作的情况下终止。

正确的方法是什么：

```
// 1 - By checking station's state between each operationN?

public class Passenger extends Thread
{
     Station station;
     public void onStationClosed()
     {
          // Do some action before thread terminates
     }
     @Override
     public void run()
     {
         operation1();
         if(station.getState == Station.Closed) return;
         operation2();
         if(station.getState == Station.Closed) return;
         operation3();
         if(station.getState == Station.Closed) return;
         ..
         operationN();
     }
}

// 2 - Throw StationClosedException from onStationClosed and catch it in Station.

public class Passenger extends Thread
{
    Station station;
    public void onStationClosed()
    {
         // Do some action before thread terminates
         throw new StationClosedException();
    }
    @Override
    public void run()
    {
        operation1();
        operation2();
        ..
        operationN();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:21:08.293

第一个解决方案非常好。不过不是很[干](/questions/tagged/dry "显示标记为“干”的问题")，可以考虑将操作包装在一些小的操作对象中，并`station`在执行每个操作之前检查状态：

```
List<Operation> operations = Arrays.asList(new Operation1(), new Operation2(), new Operation3());

for(Operation operation: operations) {
  if(!perform(operation)) {
    return;
  }
} 
```

其中`perform()`定义如下：

```
private boolean perform(Operation operation) {
  if(station.getState == Station.Closed)
    return false;
  operation.run();
  return true;
} 
```

有点牵强，但是当操作数量增加时，您会很感激的。

我不太了解异常解决方案。如果您从`onStationClosed()`回调中抛出该异常，它将被抛出回您的事件发送者线程，而不是`Passenger`线程。它不会中断你的线程。

但是，您可以使用`InterruptedException`. 此解决方案与检查站状态非常相似，但您检查的是`Thread.isInterrupted()`标志。额外的好处：I/O 操作和睡眠会自动中断。你所要做的就是打电话

```
Thread passenger = new Passenger();
passenger.interrupt(); 
```

# c - C中的函数指针转换

> ID：10960839
> 
> 赞同：4
> 
> 时间：2012-06-09T12:04:37.663
> 
> 标签：c, function, gcc, function-pointers

正如我所听说的，将指针转换为函数是不安全的`void*`。

好的，施放安全吗

`void (*enumerate) (void (*)(const struct foo *event, void *), void *)`

至

`void (*enumerate) (void (*)(const void *event, void *), void *)`

然后用

`void (*)(const void *, void *)`作为第一个参数，它将其第一个 void* 视为 struct foo*?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-09T12:22:34.463

不，这不安全。C 标准不保证 a`struct foo *`和 a`void *`具有相同的大小和格式。通常，将函数指针转换为其他函数指针类型是灾难的根源。安全的解决方案是插入一个额外的函数，将参数转换为正确的类型，就像为`qsort`处理非`void *`参数编写比较函数时所做的一样：

```
static int compare_foo_as_voidp(void const *a, void const *b)
{
    return compare_foo((struct foo const *)a, (struct foo const *)b);
} 
```

（正如 Oli Charlesworth 在评论中所写，演员表本身不是问题，但通过指针调用会导致 UB。）

# mysql - 如何处理不断变化的数据库结构

> ID：10960844
> 
> 赞同：1
> 
> 时间：2012-06-09T12:05:20.313
> 
> 标签：mysql, database-design

我正在写我的硕士论文。对于我的实现，我有一些 MySQL 表。

每次迭代我的表结构都会有所不同（添加、删除列等）。我想知道在不过多更改旧代码的情况下处理不断变化的结构的最佳方法是什么。

我读到 Facebook 有一个版本控制系统，它可以准确地指定哪些类型的代码/功能可用以及哪些用户可用。据我所知，这一定意味着他们同时管理许多不同的数据库结构。他们的旧代码如何与他们的新代码一起在他们的数据库中工作？他们做了很多测试吗？他们是否一起放弃了 MySQL？

我个人非常喜欢[FriendFeeds 解决方案](http://backchannel.org/blog/friendfeed-schemaless-mysql)。但是我想知道这对我来说是否太多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:13:46.010

为什么有人会尝试将关系数据库用于非关系数据。忘掉 FriendFied，看看 NoSQL 解决方案吧。它们是无模式的，它们比任何 RDBS 都更好地支持水平可伸缩性，并且它们中的大多数是免费/开源的。

*   我可以推荐[MongoDB](http://www.mongodb.org/)。它非常快，用 C++ 编写，但没有 ACID 投诉。
*   你也可以试试[RavenDB](http://ravendb.net/)。它不如 MongoDB 快，并且与 Mongo 相比插入速度非常慢，但这是 ACID 的抱怨。用 .NET 编写。

# android - 静态关键字，需要重新安装

> ID：10960850
> 
> 赞同：0
> 
> 时间：2012-06-09T12:06:19.893
> 
> 标签：android, android-install-apk

在我的应用程序中，我有一个活动“模型”，在其中我从编辑文本中获取了一个值“n”，我已将此值 n 声明为静态 int。所以，我可以在应用程序的任何类中访问它。

问题是当我重新启动我的应用程序而不重新安装它时，'n' 的值仍然与第一种情况相同。这会影响我的输出。

我不能使用意图来发送值，因为即使在非活动的类中，该值也会在应用程序中随机访问。

你能告诉我，我错在哪里吗？？

```
package com.integrated.mpr;

import java.io.File;

import android.app.Activity;
import android.app.Dialog;

import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Model extends Activity implements OnClickListener{

    EditText etPos;
    Button bmodel;

    static int n;//static variable to be used in other classes

    File folder ;
    File subfolder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.inputpage);

        etPos = (EditText) findViewById(R.id.etpos);
        bmodel = (Button) findViewById(R.id.bModel);

        bmodel.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.bModel:

            String check = etPos.getText().toString();

            String check1 = etNs.getText().toString();
            n = Integer.parseInt(check);
            Intent openAlternative = new Intent("com.integrated.mpr.ALTERNATIVE");
            startActivity(openAlternative);

            break;
        }

    }
} 
```

如果我首先安装我的应用程序，并在编辑文本中输入值 2 ，则 n =2 的值；如果我第二次运行我的应用程序而不安装它，即使我在编辑文本中输入 3，n 的值仍然是 2 扭曲在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:24:13.993

库马尔，

您看到的行为是使用`static`成员的结果。`static`成员不需要实例，因此在首次访问时设置（无论是否创建了实例）并保留在内存中，直到 Android 决定它不再有效。从本质上讲，它正在做它应该做的事情。静态变量的正确使用是老手和新手程序员广泛讨论的话题，但本质上总是会导致“选择使用静态成员的位置和方式”。

也就是说，您需要从另一个组件访问它是一个常见问题，但是，有很多方法可以解决它。如果您需要让每个实例具有不同的值，那么它不应该是静态的。相反，您必须找到一种方法来传递 Activity 的实例。

如果每个实例不需要不同，但值需要根据其他参数更改，只需找到适当的位置更改值即可。如果您可以从应用程序的任何位置访问它，您也可以从应用程序的任何位置更改它。

**解决方案 1：按意图传递**

当信息可能发生变化并且必须发送到另一个组件和它专门使用的类时，此解决方案很有用。您几乎可以通过 Intent extra 传递任何值。

```
openAlternative.putExtra("MyValue", Integer.parseInt(check)); 
```

在您的响应组件中，您可以通过以下方式检索该值：

```
Intent myIntent = getIntent();
int n = myIntent.getIntExtra("MyValue", 0); //0 is the default if no value is sent. 
```

从这里，您可以轻松地将检索到的值传递给该组件正在使用的任何类。一个例子：

```
MyClass.setN(n); 
```

**解决方案 2：存储在生命周期之外**

更安全的替代方法是将值移动到扩展应用程序。这不受 UI 或生命周期处理的影响。

```
public class MyApplication extends Application
{
    static int n;
} 
```

调整你的 AndroidManifest.xml...

```
<application android:name=".MyApplication" ... >
    <!-- All of your components -->
</application> 
```

现在，您可以这样设置变量：

```
MyApplication.n = Integer.parseInt(); 
```

你可以通过

```
int myN = MyApplication.n; 
```

这个解决方案让我度过了很多麻烦的一天。但是，它确实应该用于非实例相关的数据。

**解决方案 3：真正不安全的方法**

此解决方案仅在您可以保证组件的单个实例时才有效。这需要设置 singleTask。对此要**非常**小心

将 n 更改为非静态

```
int n; 
```

将活动更改为单例

```
static private Model myInstance; 
```

在 OnCreate 中，设置 myInstance

```
myInstance = this; 
```

创建一个吸气剂：

```
static public Model getStaticInstance()
{   
    return myInstance;
} 
```

这是不可靠的（充其量），如果管理不当，可能会导致巨大的内存泄漏。

希望这可以帮助，

模糊逻辑

# java - 检查矩形是否包含另一个具有特定边界距离的矩形

> ID：10960853
> 
> 赞同：1
> 
> 时间：2012-06-09T12:06:44.650
> 
> 标签：java, 2d, awt, java-2d

我正在尝试编写小程序来检查一个矩形是否包含第二个矩形，并且它们的边界之间的距离应该小于某个特定的数字，例如 100 或 50。当我使用 Rectangle.contains 方法时，它不关心两个矩形的边界之间的距离. 有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:33:21.280

您可以使用[contains(Rectancle r)](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html#contains%28java.awt.Rectangle%29)方法两次：首先检查内部矩形是否在外部矩形内部，然后将内部矩形暂时放大一半阈值到各个方向并再次进行相同的检查。这次它不应该再在外部矩形内了。所以基本上是这样的：

```
//Rectangle outer;  // Do some proper setup for these two
//Rectangle inner;
int limit = 50;
boolean containsWithinLimits = outer.contains(inner);
inner.setLocation(inner.getX()-limit/2, inner.getY()-limit/2);
inner.setSize(inner.getWidth()+limit, inner.getHeight()+limit);
boolean containsWithinLimits = containsWithinLimits && !outer.contains(inner);
// Now reset the bounds:
inner.setLocation(inner.getX()+limit/2, inner.getY()+limit/2);
inner.setSize(inner.getWidth()-limit, inner.getHeight()-limit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:17:08.627

如果矩形是正交的，并且我假设您调用了`contains(Rectangle rect)`. 然后你只需要做额外的比较：

```
inside.x - outside.x >= LEFT_BORDER &&
outside.x + outside.width - inside.x - inside.width >= RIGHT_BORDER &&
inside.y - outside.y >= TOP_BORDER &&
outside.y + outside.height - inside.y - inside.height >= BOTTOM_BORDER 
```

`LEFT_BORDER`, `RIGHT_BORDER`, `TOP_BORDER`,`BOTTOM_BORDER`供您定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:13:57.787

示例代码等？

即便如此，您仍需要执行以下操作：除非我弄错了。

> 伪代码：

```
rectA = outside, rectB = inside
if rectB.left - rectA.left < x then distance is ok else do something
if rectB.top - rectA.top < y then distance is ok else do something 
```

等等等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T12:13:48.347

在 Rectangle2d 中，我们有

布尔包含（双 x，双 y）

```
 ---    Tests if a specified coordinate is inside the boundary of this Rectangle2D. 
```

布尔包含（双 x，双 y，双 w，双 h）

```
 ---   Tests if the interior of this Rectangle2D entirely contains the specified set of rectangular coordinates. 
```

所以不可能检查我所知道的距离......

# c++ - 重载赋值运算符 - 多态容器

> ID：10960854
> 
> 赞同：1
> 
> 时间：2012-06-09T12:06:46.660
> 
> 标签：c++, inheritance, operator-overloading, assignment-operator

我有一个基类、2 个派生类和一个 entitymanager 类，它有一个指向派生对象的基指针容器。我在基类中有一个虚拟克隆方法来处理派生类中的复制构造函数，但是我在重载赋值运算符和防止切片方面遇到了麻烦，有人可以帮忙，也许可以回顾一下我是如何处理的entitymanager 复制构造函数？我觉得还可以

```
class System
{
public:
    virtual System* clone()=0;
};

class projectile :public System
{
public:
    projectile* clone()
    {
        return new projectile(*this);
    }
};

class player : public System
{
public:
     player* clone()
    {
        return new player(*this);
    }
};

class EntityManager
{
private:
    vector<System*> theEntities;
public:
    EntityManager(){}
    EntityManager(EntityManager& other)
    {
        for (size_t i=0;i<other.theEntities.size();i++)
            theEntities.push_back(other.theEntities[i]->clone());
    }
    void init()
    {
        projectile* aProjectile = new projectile;
        player* aPlayer = new player;
        theEntities.push_back(aProjectile);
        theEntities.push_back(aPlayer);
    }
};

int main (int argc, char * const argv[]) 
{
    EntityManager originalManager;
    originalManager.init();
    EntityManager copyManager(originalManager);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:44:58.330

添加一个`swap`交换容器的成员，然后将分配实现为复制和交换：

```
void swap(EntityManager& other)
{ theEntities.swap(other.theEntities); }

EntityManager& operator=(EntityManager other)
{ swap(other); return *this; } 
```

赋值运算符的参数将使用您已经编写的复制构造函数复制，然后交换数据，因此`*this`当该参数超出范围时，属于的数据将被销毁，并`*this`拥有新复制的数据。

以这种方式重用复制构造函数意味着您只需要实现一个正确的复制构造函数（和正确的交换，这通常很容易正确），并且您的赋值运算符非常简单并且自动正确。

注意，您的`init`成员和复制 ctor 不是异常安全的，如果任何`push_back`操作引发异常，您就会泄漏内存。您还缺少一个析构函数，但我认为它存在于真实代码中。

# magento - 如何在magento中禁用图像弹出

> ID：10960857
> 
> 赞同：0
> 
> 时间：2012-06-09T12:08:12.310
> 
> 标签：magento

我在我的一个网站上使用 magento 1.5.0.1。在这种情况下，每当一个人将鼠标悬停在网格视图或列表视图中的图像上时，就会弹出一个更大的图像窗口。有没有办法我可以禁用它并摆脱产品视图中的缩放功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T17:12:29.750

这不是 Magento 的核心功能，因此将安装第 3 方扩展，或者更简单地说，正在加载额外的 JavaScript 和 CSS 文件。由于我无法进一步了解您的设置，因此我只能提供一些一般性帮助...

**第 3 方扩展**

如果扩展的唯一目的是在产品列表块中提供缩放功能，那么我会简单地禁用或完全删除它。如果它提供您需要的产品缩放以外的其他功能，那么您可能需要调整模块以满足您的需求。

如果您不知道模块名称，请查看 app/etc/modules 下的源代码作为起点。在这里，您将看到所有已安装模块的列表 xml 文件。如果您可以识别模块，则可以通过编辑 xml 文件中的活动节点来禁用它：

从：

```
<active>true</active> 
```

至：

```
<active>false</active> 
```

然后清除缓存。

如果您无法从那里识别它，请查看管理部分以获取一些线索 - 大多数模块将提供一些配置选项。

**正在加载其他 JS 和 CSS 文件**

如果只是为了提供此功能而加载了一些额外的 JS 和 CSS 文件。您必须查看主题中的 layout.xml 文件：

`app/design/your_package/your_theme/layout`

有几种不同的方法可以包含 js 和 css 文件，因此您将寻找类似于以下内容之一的内容：

```
<action method="addJs"><script>js/yourjs.js</script></action>

<action method="addItem"><type>js</type><name>js/yourjs.js</name></action>

<action method="addItem"><type>skin_js</type><name>js/yourjs.js</name></action> 
```

如果您可以找到负责包含 js 的节点，则只需将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T08:00:39.607

转到模板/目录/产品/视图/media.phtml

找到这段代码：

```
<a onclick="popWin('<?php echo $this->helper('catalog/image')->init($_product, 'image') ?>', 'gallery', 'width=520,height=480,left=50,top=50,location=no,status=yes,scrollbars=yes,resizable=yes'); return false;" href="#">
<img id="image" title="<?php echo $this->htmlEscape($_product->getName()) ?>" src="<?php echo $this->helper('catalog/image')->init($_product, 'image')->resize(250,250); ?>" alt="<?php echo $this->htmlEscape($_product->getName()) ?>" />
</a> 
```

并将其替换为：

```
<a href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" title="<?php echo $_product->getName();?>" onclick="$('image').src = this.href; return false;"> <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(56); ?>" width="56" height="56" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" /></a> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-07-08T10:46:59.263

谢谢你。这是非常有用的代码。

```
<a href="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>" title="<?php echo $_product->getName();?>" onclick="$('image').src = this.href; return false;"> 
     <img src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(56); ?>" width="56" height="56" alt="<?php echo $this->htmlEscape($_image->getLabel()) ?>" />
</a> 
```

# java - 复合主键、外键。引用对象或键？

> ID：10960860
> 
> 赞同：15
> 
> 时间：2012-06-09T12:08:31.993
> 
> 标签：java, jpa, composite-key

我有两个班级`Foo`和`Bar`. 数据库中的表如下所示：

```
|Foo|
|id : INT (PK) | bar_id : INT (PK, FK) |

|Bar|
|id : INT (PK) | 
```

通常我会这样映射它：

```
@Entity
public class Bar
{
    @Id
    @Column(name = "id")
    private int id;

    @OneToMany
    private Set<Foo> foo;
}

@Entity
public class Foo
{
    @EmbeddedId
    private FooPK key;

    @MapsId("barId")
    @ManyToOne
    @JoinColumn(name = "bar_id", referencedColumnName = "id")
    private Bar bar;
}

@Embeddable
public class FooPK
{
    @Column(name = "id")
    private int id;
    @Column(name = "bar_id")
    private int barId;
} 
```

但是，id 的`FooPK`映射很松散，需要手动连接。我更喜欢使用对象而不是松散 id 进行映射的解决方案。我尝试了以下方法，但（当然）它没有用，但我认为它可以让我了解我想要实现的目标：

```
@Entity
public class Bar
{
    @Id
    @Column(name = "id")
    private int id;

    @OneToMany
    private Set<Foo> foo;
}

@Entity
public class Foo
{
    @EmbeddedId
    private FooPK key;

    @MapsId("barId")
    @ManyToOne
    @JoinColumn(name = "bar_id", referencedColumnName = "id")
    @Access(AccessType.FIELD)
    private Bar getBar()
    {
        return key.getBar();
    }
}

@Embeddable
public class FooPK
{
    @Column(name = "id")
    private int id;

    @Transient
    private Bar bar;

    //....

    @Column(name = "bar_id")
    @Access(AccessType.PROPERTY)
    private int getBarId
    {
        return bar.getId();
    }
} 
```

后一种解决方案的另一个问题是`getBarId()`方法中的方法`FooPK`需要有`setBarId(Int)`方法。可以通过访问数据访问层来使用 ID 设置对象，但是（在我看来）这违反了业务/域/数据层的分离。

那么该怎么办？使用第一个解决方案并手动保持 id 同步，还是有另一种（最佳）做法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T09:04:58.917

参考[JPA 2：复合主键类](http://www.coderanch.com/t/486475/ORM/java/JPA-composite-primary-key-classes)讨论，对 Foo 和 FooPK 类进行以下更改：

```
@Entity
public class Foo {

    @EmbeddedId
    private FooPK key;

    @MapsId("barId") //references EmbeddedId's property
    @JoinColumn(name = "bar_id", referencedColumnName = "id")
    @ManyToOne
    private Bar bar;
}

@Embeddable
public class FooPK {

    @Column(name = "id")
    private int id;
    @Column(name = "bar_id")
    private int barId;
} 
```

我建议首先使其与 FIELD 访问一起使用，然后应用 PROPERTY 访问。

> 那么该怎么办？使用第一个解决方案并手动保持 id 同步，还是有另一种（最佳）做法？

让自己免于痛苦 - 自动生成 ID。

# ruby-on-rails - rails - 使用模型显示多对多

> ID：10960861
> 
> 赞同：0
> 
> 时间：2012-06-09T12:08:49.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用 rails 3 中的模型为我的演示应用程序实现多对多关系。
这一切都很好，直到我尝试添加一个模型来保存更多关于关系的数据。
我有一个食谱、成分、成分_食谱模型

文件：ingredient_recipe.rb

```
class IngredientRecipe < ActiveRecord::Base
  attr_accessible :created_at, :ingredient_id, :order, :recipe_id
  belongs_to :recipes
  belongs_to :ingredients
end 
```

文件：ingredient.rb

```
class Ingredient < ActiveRecord::Base
 has_many :ingredientRecipe
 has_many :recipes, :through => :ingredientRecipe
 ... 
```

文件：recipes.rb

```
 class Recipe < ActiveRecord::Base
  has_many :ingredientRecipe
  has_many :ingredients, :through => :ingredientRecipe
  ... 
```

在用户界面中

```
 <td >
  <% @recipe.ingredients.each do |ingredient| %>
   ingredient.name
  <% end %>
 </td > 
```

桌子

```
 ingredient_id, recipe_id, order, created_at, updated_at 
```

现在，这不太好用……

哦，很好，非常感谢实现多对多的好资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:56:09.703

我在模型代码中看到了一些错误。很难确切地说这些可能会做什么。

您的食谱模型应如下所示：

```
has_many :ingredient_recipes
has_many :ingredients, :through => :ingredient_recipes 
```

您的成分模型应如下所示

```
has_many :ingredient_recipes
has_many :recipes, :through => :ingredient_recipes 
```

关联应该被强调和小写，`has_many`关系应该是多元化的。

你说`Ingredient_Recipe`的包含，内容很好但是应该命名`ingredient_recipe.rb`，类名应该`IngredientRecipe`不确定是否只是我的误解。

您遇到的第一个错误说 undefined method `recipe_ingredient`，这是有道理的，关联名称是`ingredient_recipes`， through 参数采用关联的确切名称。

第二个问题很难说，但我会先进行上述修改，看看是否能改善情况。

第三项，我会说不。按照 railscast 的说明进行操作。

有问题的 railscast 是一个很好的资源，我以前使用过那个特定的资源。

编辑，刚刚注意到belongs_to 也不正确。

`IncredientRecipe`班内

```
belongs_to :recipe
belongs_to :ingredient 
```

`belongs_to`关联应该是单数的。

# javascript - 如何在jquery文件上传插件中隐藏部分上传文件表？

> ID：10960862
> 
> 赞同：2
> 
> 时间：2012-06-09T12:09:01.140
> 
> 标签：javascript, jquery, html

也许你们中有些人知道 blueimp 的 jquery 文件上传插件：[https](https://github.com/blueimp/jQuery-File-Upload/) ://github.com/blueimp/jQuery-File-Upload/ 。我有以下问题，我想隐藏已经上传文件的表格的一部分，我不能这样做，当我在普通桌子上做时，我是这样做的：[https://stackoverflow。 com/a/215231/1353905](https://stackoverflow.com/a/215231/1353905)。

但是当我尝试将 tbody 标记添加到此表代码中时（我想隐藏第 9、10、11 行 - 表包含 11 行）：

```
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { alert(i); %}

 {% if(i==8) {   %}
<tbody style="display:none;">  // I'm ADDING THIS
 {% } %}

<tr class="template-download fade">
    {% if (file.error) { %}
        <td></td>
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
    {% } else { %}
        <td class="preview">{% if (file.thumbnail_url) { %}
            <a href="{%=file.url%}" title="{%=file.name%}" rel="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
        {% } %}</td>
        <td class="name">
            <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
        </td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        <td colspan="2"></td>
    {% } %}
    <td class="delete">
        <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
            <i class="icon-trash icon-white"></i>
            <span>{%=locale.fileupload.destroy%}</span>
        </button>
        <input type="checkbox" name="delete" value="1">
    </td>
</tr>

  {%    if(i==10) {  %}
</tbody>     // here are my 3 lines too
{% } %}

{% } %}
</script> 
```

# android - Android：如何流式传输视频

> ID：10960865
> 
> 赞同：2
> 
> 时间：2012-06-09T12:09:35.990
> 
> 标签：android

我正在编写 android 客户端，它将实时显示来自网络摄像头的视频。问题是我通过 RTMP 协议获得了这个流。似乎没有人知道一个简单的方法来做到这一点。

在stackoverflow上，我发现了关于[如何在Android上通过RTMP流式传输的未解决问题？](https://stackoverflow.com/questions/6006043/how-to-stream-over-rtmp-on-android)，但现在可能有人知道答案了。所有帮助将不胜感激。

PS我要支持Android 2.3 >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T19:55:46.463

您可能希望将 VLC 用于 android[源](https://github.com/videolan/vlc)或使用一些中间服务器（ffmpeg、avconv）将 RTMP 转换为 RTSP

# hudson - 大规模禁用詹金斯工作

> ID：10960869
> 
> 赞同：15
> 
> 时间：2012-06-09T12:10:00.983
> 
> 标签：hudson, jenkins

是否可以一次性禁用大量 Jenkins 作业？我有大量需要禁用的詹金斯工作。轮流访问每项工作并取消工作是乏味的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-09T12:22:19.917

[https://wiki.jenkins-ci.org/display/JENKINS/Configuration+Slicing+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Configuration+Slicing+Plugin)

效果很好，安装它去[http://your_jenkins.com:8080/slicing/jobdisabledbool/](http://your_jenkins.com:8080/slicing/jobdisabledbool/)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-29T22:04:43.477

通过使用配置切片插件：

通过使用这个插件很容易找出任何启用或禁用作业和计时器分离的作业

管理 Jenkins >配置切片 > 选择选项

# cocos2d-iphone - cocos2d-iphone 用户为什么要避免使用@2x 文件扩展名？

> ID：10960875
> 
> 赞同：21
> 
> 时间：2012-06-09T12:10:21.763
> 
> 标签：cocos2d-iphone, incompatibility, retina-display

Cocos2d-iphone 对 Retina 图像（和其他资产）使用 -hd 扩展。[cocos2d Retina 指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:how_to_develop_retinadisplay_games_in_cocos2d)仅含糊地谈到@2x 的“一些不兼容性” ：

> Apple 使用“@2x”后缀，但 cocos2d 不使用该扩展名，因为一些不兼容。相反，cocos2d 有自己的后缀：“-hd”。
> 
> 警告：不建议使用“@2x”后缀。Apple 以一种特殊的方式处理这些图像，这可能会导致您的 cocos2d 应用程序出现错误。

伟大的。我觉得消息灵通。

通过[关于 @2x 的 2 年前的错误报告，](http://code.google.com/p/cocos2d-iphone/issues/detail?id=910)我得到了一个[论坛帖子的链接，该帖子据说可以解释 @2x 的问题](http://www.cocos2d-iphone.org/forum/topic/8511)。但是，事实并非如此。我在那里发现的唯一提示是关于 @2x 的 iOS (4.0/4.1) 错误，我认为这些错误不再相关。我可能错过了一些关键方面（有一些关于缓存或重复加载问题的讨论）——毕竟线程很长。

**我想知道如果 cocos2d 开发人员使用 @2x 后缀而不是 -hd 来表示图像，他可能会遇到哪些具体问题？**

请给出具体的例子来说明可能会出错或实际上会出错的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T01:13:09.920

这似乎是这个链接的主要原因：http: [//www.cocos2d-iphone.org/forum/topic/12026](http://www.cocos2d-iphone.org/forum/topic/12026)

特别是 riq 的这篇文章：

> 我不知道 initWithContentsOfFile 是否已修复，但在 4.0 中它已损坏并且无法与 @2x、~iphone 扩展一起使用。imageNamed 缓存了所有加载的文件，因此它比 initWithContentsOfFile 消耗更多的内存 此外，@2x 扩展做了一些事情（我不知道具体是什么），但它不适用于 cocos2d。

另一个好点：当 iPhone 4 刚刚发布带有视网膜显示器时，我确信 Cocos2D 的一些用户使用的是旧版本，所以当用户在不支持的 Cocos2D 版本上使用视网膜显示器时它，事情是他们应该的两倍大。除非您使用的是非常早期的 Cocos2D 版本，否则现在大多数情况下都已修复此问题。

概述，所以似乎主要问题是来自 iOS 4 的 initWithContentsOfFile，但他们已经解决了这个问题，因为我在我的应用程序中使用了 Cocos2D 2.0-rc2 的确切 API，我没有任何问题。我使用所有 Apple 指定的图像扩展，一切都很好！:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T23:41:13.493

这似乎有历史背景。

使使用 -hd 图形仍然值得的是，加载它们不依赖于 Apple 功能，而是在框架代码中完成。所以 -hd 可以在 iPhone Simulator 模式下为 iPad 加载，并在 2x 模式下使用更高分辨率的图片。

除此之外，当我一周前研究这个问题时，我找不到更多不使用@2x 的理由。

如果您想了解所有详细信息，最好给 riq 发送一封电子邮件。

# c - creating an ADT using its function - C

> ID：10960876
> 
> 赞同：0
> 
> 时间：2012-06-09T12:10:22.847
> 
> 标签：c, abstract-data-type

So, I'm trying to write a function which return a pointer to an ADT, in the heap.

The problem is that I can't manipulate it after the memory allocation. Here is a simplified code

```
typedef struct _entity {
    int value;
} *Entity;

Entity *new_entity() {
    Entity *ptr = (Entity*)malloc(sizeof(struct _entity));
    assert( ptr );

    (*ptr)->value = 5; // program crashes after this line

    return ptr;
} 
```

The error is:

> Unhandled exception at 0x013e1665 in test.exe: 0xC0000005: Access violation writing location 0xcdcdce21.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T12:13:01.943

```
typedef struct _entity {
    int value;
} *Entity;
  ^
  ^ 
```

You probably don't want this `*`. Otherwise, you are typedef-ing `Entity` to be a pointer to a struct, rather than a struct. So your code would become:

```
typedef struct _entity {
    int value;
} Entity;

Entity *new_entity(void) {
    Entity *ptr = malloc(sizeof(*ptr));
    assert( ptr );

    ptr->value = 5;

    return ptr;
} 
```

If, for some reason, you *do* want `Entity` to be a pointer type, then the rest of your code is wrong. You've malloced some space for the pointer, but not for what it's pointing to. It would need to be more like this:

```
Entity *ptr = malloc(sizeof(*ptr));  // Allocate an Entity
*ptr = malloc(sizeof(**ptr));        // Allocate a *Entity 
```

**But there's almost certainly no need to do this.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:14:23.793

you shouldn't use both * and ->, one of them is enough

```
ptr->value = 5 
```

OR

```
(*ptr).value = 5 
```

# c++ - MFC 的“更新命令 UI”系统如何工作？

> ID：10960879
> 
> 赞同：3
> 
> 时间：2012-06-09T12:11:27.890
> 
> 标签：c++, visual-studio-2010, user-interface, mfc, toolbar

我想更多地了解这个系统是如何工作的，特别是框架何时以及如何实际决定更新 UI 元素。

我的应用程序有一个“工具”系统，一次可以激活一个工具。我使用“ON_UPDATE_COMMAND_UI”消息在 UI 中“检查”工具的图标/按钮，这影响了应用程序菜单和工具栏。无论如何，这一切都很好，直到最近几天的某个时候，工具栏图标停止正确突出显示。

我调查了一下，发现只有在实际单击图标时才收到更新命令。奇怪的是这只会影响工具栏，而不是菜单，它仍然可以正常工作。即使更新了菜单中的按钮，工具栏图标也保持不变。

显然我已经做了一些事情来打破它 - 有什么想法吗？

**编辑：** 没关系。我已经覆盖了应用程序的`OnIdle()`方法并且没有调用原始的基类方法——也就是说，`CWinApp::OnIdle()`我猜这是大多数时候调用更新的地方。[来自https://msdn.microsoft.com/en-us/library/3e077sxt.aspx](https://msdn.microsoft.com/en-us/library/3e077sxt.aspx)的此代码片段说明：

```
BOOL CMyApp::OnIdle(LONG lCount)
{
   // CWinApp's original method is involved in the update message handling!
   // Removing this call will break things
   BOOL bMore = CWinApp::OnIdle(lCount);

   if (lCount == 0)
   {
      TRACE(_T("App idle for short period of time\n"));
      bMore = TRUE;
   }
   // ... do work

   return bMore;
   // return TRUE as long as there are any more idle tasks
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-04T00:49:08.557

这是一篇[很好的文章](http://www.codeguru.com/cpp/w-d/dislog/commandui/article.php/c1935/Using-ONUPDATECOMMANDUI-with-menu-items-and-controls-2.htm)，它解释了如何做到这一点。不要将他的代码示例与 WM_KICKIDLE 一起使用，而是向下滚动到评论部分。有两个代码示例解释了如何做得更好。我引用：

```
//Override WM_INITMENUPOPUP
void CDialog::OnInitMenuPopup(CMenu* pPopupMenu, UINT nIndex, BOOL bSysMenu)
{
    CDialog::OnInitMenuPopup(pPopupMenu, nIndex, bSysMenu);

    // TODO: Add your message handler code here
    if(pPopupMenu && 
        !bSysMenu)
    {
        CCmdUI CmdUI;
        CmdUI.m_nIndexMax = pPopupMenu->GetMenuItemCount();

        for(UINT i = 0; i < CmdUI.m_nIndexMax; i++)
        {
            CmdUI.m_nIndex = i;
            CmdUI.m_nID = pPopupMenu->GetMenuItemID(i);
            CmdUI.m_pMenu = pPopupMenu;

            // There are two options:

            // Option 1\. All handlers are in dialog
            CmdUI.DoUpdate(this, FALSE);

            // Option 2\. There are handlers in dialog and controls
/*
            CmdUI.DoUpdate( this, FALSE );

            // If dialog handler doesn't change state route update
            // request to child controls. The last DoUpdate will
            // disable menu item with no handler
            if( FALSE == CmdUI.m_bEnableChanged )
                CmdUI.DoUpdate( m_pControl_1, FALSE );

            ...

            if( FALSE == CmdUI.m_bEnableChanged )
                CmdUI.DoUpdate( m_pControl_Last, TRUE );
*/
        }       
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:15:28.793

看看这是否有帮助 - [http://msdn.microsoft.com/en-us/library/essk9ab2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/essk9ab2(v=vs.80).aspx)

# c++ - 每次我尝试构建一个简单的“hello world”时，我总是会遇到 2 个错误

> ID：10960881
> 
> 赞同：2
> 
> 时间：2012-06-09T12:11:44.237
> 
> 标签：c++, visual-studio

我正在使用视觉工作室 2010。

每次我尝试构建一个简单的“hello world”时，我总是会遇到 2 个错误。

这是代码::

```
#include  <iostream>

 using namespace std;

 int main ()
 {
  cout << "Hello World!";
  return 0;
 } 
```

> 错误 2 error LNK1120: 1 unresolved externals C:\Users\hershell kurt\Documents\Visual Studio 2010\Projects\test\Release\test.exe test
> 
> Error 1 error LNK2001: unresolved external symbol _WinMain@16 C:\Users\hershell kurt\Documents\Visual Studio 2010\Projects\test\test\MSVCRT.lib(crtexew.obj) test

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:19:57.800

奇怪，我刚刚创建了一个空项目并粘贴了您的代码，它对我来说很好用。

确保您将项目创建为`Win32 Console Application`，然后在出现的窗口中单击下一步并选择“空项目”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:29:55.707

> 您已经创建了 Win32 项目并且没有“main”函数，而是 WinMain。谷歌它或使用“win32 控制台应用程序”。正如[Alanir Alonedaw](https://stackoverflow.com/users/927209/alanir-alonedaw)和[Tudor](https://stackoverflow.com/users/808486/tudor)所说；尝试创建一个新项目，但选择控制台应用程序而不是 win32 项目。

它应该在此之后正确编译:)

win32 项目需要“WinMain”函数，而不是控制台应用程序所需的“main”函数。win32 项目通常是基于 Windows API 的基于 GUI 的应用程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T12:19:25.833

您已经创建了 Win32 项目并且没有“main”函数，而是 WinMain。谷歌它或使用“win32 控制台应用程序”。

# java - EclipseLink JPA 对象不是已知的实体类型

> ID：10960882
> 
> 赞同：2
> 
> 时间：2012-06-09T12:11:45.197
> 
> 标签：java, mysql, jpa, eclipselink

我对 eclipseLink 和一个我想坚持的对象有一个奇怪的问题。我有一个对象 (KeypointListImpl) 将另一个对象 KeypointImpl 存储在列表中。持久化一个 keypointImpl 对象效果很好，但是如果我尝试持久化一个 keypointListImpl 对象，我会得到一个 java.lang.IllegalArgumentException，它说对象 keypointImpl 不是已知的实体类型。

这是 KeypointImpl 代码：

```
@Entity
@Table(name="Keypoints")
public class KeypointImpl implements Keypoint {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    @Enumerated(EnumType.STRING)
    private DetectorType keypointType;
    private float x;
    private float y;
    private float size;
    private float angle;
    private float response;
    private int octave;
    private int classId;
    ...
} 
```

这是 KeypointListImpl 代码：

```
@Entity
@Table(name="KeypointLists")
public class KeypointListImpl implements KeypointList {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    @OneToOne(cascade={CascadeType.ALL}, targetEntity=KeypointImpl.class)
    private List<Keypoint> keypoints;
    ...
} 
```

以下是主要内容：

```
 Keypoint kp1 = new KeypointImpl(DetectorType.FAST, 5, 5, 10, 90, 2, 3, 0);
    Keypoint kp2 = new KeypointImpl(DetectorType.FAST, 6, 6, 3, 45, 1, 2, 1);

    em.persist(kp1);
    em.persist(kp2);

    List<Keypoint> keypoints = new ArrayList<Keypoint>();
    keypoints.add(kp1);
    keypoints.add(kp2);

    KeypointList keypointlist = new KeypointListImpl();
    keypointlist.setKeypointList(keypoints);

    em.persist(keypointlist); 
```

构建的表格看起来不错。我得到一个 KeypointsLists(ID, KEYPOINTS_ID) 和一个 Keypoints(..., ...) 表。

谁能指出我的错误？！:-)

根据要求，persistence.xml 也是如此

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">

    <persistence-unit name="AudiModelRecognition" transaction-type="RESOURCE_LOCAL">

        <class>amr.model.KeypointImpl</class>
        <class>amr.model.KeypointListImpl</class>

        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/amr" />
            <property name="javax.persistence.jdbc.user" value="arm" />
            <property name="javax.persistence.jdbc.password" value="..." /> 

            <!-- EclipseLink should create the database schema automatically -->
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode" value="database" />
        </properties>

    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T14:06:53.860

比我写我的评论作为答案：@OneToOne on List 看起来不对。使用@OneToMany。

# linux - 当路径包含符号链接时，如何将一个目录移回 unix / linux 中？

> ID：10960883
> 
> 赞同：7
> 
> 时间：2012-06-09T12:11:49.563
> 
> 标签：linux, shell, unix, symlink, cd

我创建了一个指向深度嵌套目录的符号链接。使用符号链接我可以从我的主目录移动到该目录。我想将一个目录从目标目录移回，但 shell 又回到了主目录。

```
[root@pe1800xs ~]# pwd
/root

[root@pe1800xs ~]# mkdir -p abc/def/ghi/jkl/mno/pqr

[root@pe1800xs ~]# ln -s abc/def/ghi/jkl/mno/pqr/ xyz

[root@pe1800xs ~]# cd xyz

[root@pe1800xs xyz]# pwd
/root/xyz

[root@pe1800xs xyz]# pwd -P
/root/abc/def/ghi/jkl/mno/pqr

[root@pe1800xs xyz]# cd ..

[root@pe1800xs ~]# pwd
/root 
```

我想要实现的是，当我`cd..`在`pqr`目录中执行时，shell 应该进入`mno`目录。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T12:23:16.567

你必须使用

```
cd -P xyz 
```

进入该目录以遵循文件夹的原始结构，然后您可以随意移动，因为您已经解决了指向真实路径的链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-09T12:21:26.023

你必须通过`-P`选项：

```
cd -P .. 
```

# r - 将向量解包到列表中，向量的每个元素作为列表中的单独元素

> ID：10960887
> 
> 赞同：2
> 
> 时间：2012-06-09T12:12:22.373
> 
> 标签：r, list, concatenation

使用以下代码，我正在创建一个列表：

```
scales <- c(p="hye", r="t3")
details <- list(t=20,y="c", scales) 
```

目前，上面给了我一个清单：

```
$t
[1] 20

$y  
[1] "c"

[[3]]
p     r 
"hye"  "t3" 
```

但是我想要一个这样的列表：

```
$t
[1] 20

$y  
[1] "c"

$p      
[1] "hye"  

$r
[1] "t3" 
```

由于这将在函数中重用，因此我想将其保留`scales`为向量参数，然后可以将其插入列表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:21:04.617

解决方案是：

```
details = c(list(t=20,y="c"),scales) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T12:25:19.703

您想连接`c()`两个列表，因此在形成之前使用`as.list()`将`scales`向量转换为列表`details`：

```
> details <- c(list(t=20, y="c"), as.list(scales))
> details
$t
[1] 20

$y
[1] "c"

$p
[1] "hye"

$r
[1] "t3" 
```

# titanium - 如何在外部 HTML 文件中访问本地 css 文件

> ID：10960891
> 
> 赞同：2
> 
> 时间：2012-06-09T12:13:20.553
> 
> 标签：titanium

我在 webview 中从 web 加载了一些外部文件，但现在我不会改进加载时间并将所有 css 和图像保存在设备上。

我的文件夹是`/Ressources/assets/themes/....`

在 html 文件中，我尝试了从简单`assets/...`到`file:///Ressources....`

什么是正确的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:53:28.793

我们必须使用前缀 `app://`
例如，如果您想包含文件夹 mycss 中的 style.css

```
app://mycss/style.css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T15:25:26.383

您需要使用`app://`前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T09:07:50.683

试试这个可能会帮助你

有没有解决这个问题的方法？我也有。我尝试了 4 种链接方法：

../css/style.css

/css/style.css

应用程序：//css/style.css

文件：///css/style.css

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T15:23:08.940

app://Resources/css/style.css 适合我。

使用 3.1.1.GA

# php - 如何设计具有多个文件夹的php文件？

> ID：10960894
> 
> 赞同：0
> 
> 时间：2012-06-09T12:13:45.273
> 
> 标签：php, include, directory

我有一个图书网站，想为每本书创建文件夹。例如，

```
www.mydomain.com/book1  
www.mydomain.com/book2
www.mydomain.com/book3 
```

每个书页都是相同的格式，只有书名和作者等会通过从数据库中获取数据而改变。因此，创建一个 index.php 文件并将其复制到所有书籍文件夹是我的想法。index.php 可以是：

```
include "include_book_format.php"; 
```

因此，书页的格式将在**"include_book_format.php"**中。
这是一个好的设计还是有什么方法可以更有效地创建它？谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:16:25.600

你想创建真正的文件夹吗？我不认为你需要它。
您可以使用重写引擎[http://kb.mediatemple.net/questions/85/Using+.htaccess+rewrite+rules](http://kb.mediatemple.net/questions/85/Using+.htaccess+rewrite+rules)

# iphone - 在 UITableview 中自动向下和向上滚动

> ID：10960901
> 
> 赞同：2
> 
> 时间：2012-06-09T12:14:37.927
> 
> 标签：iphone, objective-c, uitableview

我正在开发一个 Iphone 应用程序，它包含一个带有 8 个单元格的 UITableview。我实现了一个 NSMutableArray 用于在单元格创建时间时存储每个单元格，但 tableview 加载时间仅将显示的单元格存储提供给数组。为了避免这个问题，我使用以下代码自动滚动表格视图并获取存储到数组的总单元格；

```
-(void)viewDidAppear:(BOOL)animated{

    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:[musicGenre count]-1 inSection:0] atScrollPosition:UITableViewScrollPositionBottom animated:YES];

    } 
```

这工作得很好。但现在我想同时从下到上滚动（加载时间）。如何实现这个？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-09T13:25:03.120

由于`UITableView`继承自`UIScrollView`你可以使用这样的东西：

```
- (void)viewDidAppear:(BOOL)animated{

  [table setContentOffset:CGPointMake(0.0, table.contentSize.height - table.bounds.size.height)
                 animated:NO];  

  [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:[musicGenre count]-1 inSection:0]                                                
                   atScrollPosition:UITableViewScrollPositionBottom
                           animated:YES];
} 
```

编辑：

如果您希望从顶部到底部的初始移动也具有动画效果，只需使用：

```
- (void)viewDidAppear:(BOOL)animated{

  [table setContentOffset:CGPointMake(0.0, table.contentSize.height - table.bounds.size.height)
                 animated:YES]; 

  [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:[musicGenre count]-1 inSection:0]                                                
                   atScrollPosition:UITableViewScrollPositionBottom
                           animated:YES];
} 
```

但请考虑用户体验——需要这么多的动画吗？因为用户（特别是如果他们经常使用你的应用程序）不喜欢浪费时间。动画在增强用户体验并且不会导致工作流程延迟时非常棒。

EDIT2：要滚动到顶部（从当前位置），您可以使用：

```
 [table setContentOffset:CGPointZero
                animated:YES]; 
```

# java - 如何测试远程androidaidl服务

> ID：10960903
> 
> 赞同：49
> 
> 时间：2012-06-09T12:14:57.190
> 
> 标签：java, android, robolectric

我有一个与远程`android`服务交互的小应用程序。我想在单元测试中模拟该服务。我使用[Robolectric](http://robolectric.org/)以及`JUnit`其他测试用例和阴影，但我不知道如何处理远程服务。

使用与真实服务相同的包创建和启动测试服务并使用相同的导出方法是否足够`aidl`？

由于我没有该服务的代码，我假设我不能使用需要实际类`Robolectric`的[ShadowService 。](http://robolectric.org/javadoc/3.0/org/robolectric/shadows/ShadowService.html)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-29T07:57:39.517

我会使用[Mockito](http://mockito.org/)创建接口的 Mock，然后在测试中将该实例传递给您的代码。您还可以在测试代码中手动创建该接口的实现并使用它。

所以你必须自己做模拟，重要的是你想要测试的代码使用某种形式的依赖注入来获取对aidl接口的引用，这样你就可以在你的测试中传递你自己的模拟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-09T10:00:06.197

如果您想为服务编写单元测试，那么您可以使用 Mockito 来模拟服务行为。如果您想在真实设备上测试您的服务，那么这就是您连接服务的方式。

```
@RunWith(AndroidJUnit4.class)
public classRemoteProductServiceTest {
    @Rule
    public final ServiceTestRule mServiceRule = new ServiceTestRule();
    @Test
    public void testWithStartedService() throws TimeoutException {
        mServiceRule.startService(
                new Intent(InstrumentationRegistry.getTargetContext(), ProductService.class));
        //do something
    }
    @Test
    public void testWithBoundService() throws TimeoutException, RemoteException {
        IBinder binder = mServiceRule.bindService(
                new Intent(InstrumentationRegistry.getTargetContext(), ProductService.class));
        IRemoteProductService iRemoteProductService = IRemoteProductService.Stub.asInterface(binder);
        assertNotNull(iRemoteProductService);
        iRemoteProductService.addProduct("tanvi", 12, 12.2f);
     assertEquals(iRemoteProductService.getProduct("tanvi").getQuantity(), 12);
    }
} 
```

# java - PopupMenu 冻结父框架

> ID：10960904
> 
> 赞同：0
> 
> 时间：2012-06-09T12:15:00.360
> 
> 标签：java, awt, frame, repaint, popupmenu

我在不断重绘的框架上使用 AWT PopupMenu（这是一个游戏），但是每当 PopupMenu 显示时，父框架就会冻结。有没有办法禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:36:03.620

我假设应用程序的其余部分是在 Swing 中制作的，并且您将 AWT 弹出菜单与 Swing 组件结合使用。

我遇到了相当多的 AWT PopMenu 问题。您是否需要在应用程序范围之外显示 Popmenu？如果您只需要能够在您的应用程序 (JFrame) 中显示它，那么您最好将 JComponent 放在所有其他面板的顶部（使用 JLayredPane）并在那里绘制您自己的弹出菜单。

更简单的是在 Java 7 中使用 JLayer 来获得相同的效果（如果您不是在 Java 7 上而是在 Java 5 或 6 上，则使用 JXLayer）。

上述方法也比 AWT 弹出菜单更强大，因为您可以控制绘图。因此，例如使其半透明或赋予其圆形边缘变得轻而易举。

# java - 如何使用 NetBeans 开发好的 JSP/Servlet WebApplication

> ID：10960905
> 
> 赞同：0
> 
> 时间：2012-06-09T12:15:07.980
> 
> 标签：java

如果我需要用 Java 开发带有数据库的 Web 应用程序怎么办？我知道我需要首先开发 bean，所以我必须为每个数据库的表创建一个类，为每个数据库的列、setter、getter、无参数构造函数等创建一个字段。

现在：

如果我需要在数据库中保存记录怎么办？假设`PersonBean`上课，`PersonController`我这样做：

```
PersonBean p = new PersonBean();
p.setName("Mariano");
....
PersonController c = new PersonController();
c.insert(p); 
```

合法吗？它很优雅。这与高级抽象一致吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:23:19.637

我认为您应该查看像 Hibernate 这样的 ORM 框架。它**（编辑：**不是“它”而是 NetBeans IDE **）**可以自动为您的数据库生成 JavaBeans，反之亦然。它还包含创建-读取-更新-删除操作所需的大部分功能。它是免费的，可以为您节省大量时间。

**编辑：** 对于输出，您可以使用例如 JSF 或 Spring 框架（其中还包括 Hibernate 支持）。

我不是一个支持 J2EE 的开发人员，所以我可能在某些方面是错误的，但我就是这么看的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T16:42:24.573

这不一定是 netbeans 的问题，尽管 netbeans 将有一些工具来检查您的数据库并创建对象，反之亦然。这里的问题实际上是您想要在什么框架中开发您的应用程序。如果您想要大量基于约定的编码，您可以尝试 Spring Roo。IE，您创建一个 java 对象，框架根据您命名对象和属性的方式计算出您的表名和列名。

它还会根据您的对象名称等使 URL 可访问......

将其视为 Java 的 Ruby on Rails。还有 grails 非常相似，但使用“Groovy”语言，它本质上是 java，但有很多扩展。

Grails 和 Roo 都可以在任何 servlet 容器（即 tomcat、jetty、weblogic 等）上运行

# php - preg_match 为每个存在的封闭文本，重复一个函数

> ID：10960908
> 
> 赞同：0
> 
> 时间：2012-06-09T12:15:36.630
> 
> 标签：php, regex, preg-match

在一个字符串中，我有这样的东西：

```
[select|blog]
    Some text some text some text
[/select]

more text more text more text

[select|information]
    Some text some text some text
[/select] 
```

现在使用 preg_match 我希望函数：

*   获取 [select] 标签之间的文本
*   更改
*   将其重新插入字符串
*   删除选择标签

所以最终它会变成这样：

```
Changed text1 Changed text1 Changed text1

more text more text more text

Changed text2 Changed text2 Changed text2 
```

希望你们能帮帮我。谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:24:01.683

这个正则表达式会让你开始

```
\[.*?](.*?)\[.*?] 
```

把允许点的选项放在上面。匹配新行

括号内的文本在第 1 组中

我来自 .NET 世界，所以我会使用一个函数来解决这个问题，我可以在每场比赛后执行该函数。这个函数的输入是匹配。如果您需要访问第 1 组并重写或放置新内容，您可以在此处进入第 1 组。

我刚刚在评论中读到 php 中的等价物是`preg_replace_callback()`

# php - PHP使用GLOB根据文件名限制正在读取的文件

> ID：10960912
> 
> 赞同：1
> 
> 时间：2012-06-09T12:16:24.890
> 
> 标签：php, regex, filenames

我正在尝试使用 glob() 读取包含各种文件类型的目录中的文件。我设法以某种方式获取我想要的 .txt 文件，使用：

```
glob($dir.'*.txt') 
```

从读取的文件中，我获得了提供不同功能并根据名称进行分组的文件类型。此文件的示例是

```
MSPP850_36907816201203161900989.txt
MSPP850_36907816201203161805560.txt
MSP850_36907816201203161805560.txt
MSP850_36907816201203161805560.txt
MSP850_36907816201203161805560.txt
MSP850_36907816201203161805560.txt 
```

注意下划线前的文件名：我们有两种类型，即 MSPP850 和 MSP850。例如，我如何使用 glob 过滤和仅获取 MSP850 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:17:37.507

试试这个：

```
glob($dir.'MSP850_*.txt'); 
```

# php - 在 Symfony2 控制器中注入基于注释的需求

> ID：10960914
> 
> 赞同：0
> 
> 时间：2012-06-09T12:16:35.983
> 
> 标签：php, api, symfony

我目前正在使用 Symfony2 编写一个 REST API。一个月前我开始使用 Symfony2，目前面临技术难题。

在编写我的 API 时，我想按 IP 地址或用户对 API 调用进行速率限制（即，如果用户已登录，我将使用他的 id、时间戳和他的 IP 地址来跟踪他的连接，如果他没有登录后，我只是将他的 IP 地址和时间戳保存在我的数据库中）。为此，我编写了一个服务实现`VoterInterface`，每次用户访问控制器时，Symfony 都会调用该服务，并检查他是否没有按小时或按天超过 API 速率限制（它们都是硬编码的）。到目前为止，这工作正常。

但我想要一些更可定制和可扩展的东西，我想为每个控制器设置自己的限制，这样我就可以轻松控制和更改每个控制器的 API 速率限制。我的想法是使用注释，就像您可以使用的注释一样，`JMSSecurityExtraBundle`并在我的每个控制器的顶部指定如下内容：

```
/**
 * My API - UserController::registerAction
 *
 * @RateLimit(hour="200", day="2000")
 */
public function registerAction($format) 
```

然后在我的速率限制器类中检索注释信息以填充限制信息。问题是我没有找到方法，我需要一些帮助。我的解决方案有效，我只需要更强大的东西。我已经考虑将这些信息存储在 YAML 文件或数据库中，但这对我来说不是一个好的解决方案，因为它在我的控制器和持久性之间创建了不必要的依赖关系。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:26:45.287

参见[AOP Bundle——](https://github.com/schmittjoh/JMSAopBundle)它提供了做你想做的事的方法。

# unix - 如果我将它应用于 IPv4 套接字，我可以假设 accept(3) 返回 IPv4 地址吗？

> ID：10960918
> 
> 赞同：2
> 
> 时间：2012-06-09T12:16:52.947
> 
> 标签：unix, network-programming, posix, ipv6, ipv4

让`s`是由`socket(PF_INET, ...)`.

如果我调用`accept(s, (struct sockaddr *) &addr, ...)`where`addr`的 type `struct sockaddr_in`，我可以假设返回地址的格式是 IPv4，即

`addr.sin_family == AF_INET`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:24:31.430

来自[The Open Group 的](http://pubs.opengroup.org/onlinepubs/009695399/functions/accept.html)描述：

> 该`accept()`函数应提取待处理连接队列中的第一个连接，**创建一个与指定套接字具有相同套接字类型协议和地址族的新套接字**，并为该套接字分配一个新的文件描述符。

# linux - 将 EFL 用于嵌入式 UI 时，我们应该使用 Elementary 还是 Edje？

> ID：10960919
> 
> 赞同：4
> 
> 时间：2012-06-09T12:17:00.397
> 
> 标签：linux, user-interface, tizen, efl

我们从使用 Enlightenment Foundation 库的嵌入式开发开始。我们正在开发一个“全屏”应用程序，因此不需要窗口管理器，我们的 Linux 系统最终将运行 Tizen OS。

问题是，EFL 提供 Elementary 和 Edje。

我们应该使用 Elementary 小部件还是 Edje 脚本？

您可以在 Edje 脚本中使用 Elementary 小部件吗？我听说过这一点，但没有看到任何文档或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T08:15:31.843

EFL 提供没有。用于不同 GUI 任务的库。通常根据您需要选择特定库的要求。初级提供了一组已经为用户创建的小部件。因此，如果您可以重复使用，那就去吧。但是请务必使用 edje 来实现它，因为 edje 有助于定义布局，并且在您需要放大或缩小图形应用程序时会为您提供帮助。您可以参考以下链接以获取详细的 api 文档：

[http://web.enlightenment.org/p.php?p=docs&l=en](http://web.enlightenment.org/p.php?p=docs&l=en)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T18:25:01.483

先用初级。你可以做大部分事情，它支持很多功能，如主题、焦点、容器、访问、自动删除、缩放、镜像、翻译、方向设置等。

如果您真的想使用 edje（edc 脚本），请使用 elm_layout 并设置 edj 文件。

谢谢。

# php - MongoDB使用时间戳进行排序

> ID：10960922
> 
> 赞同：0
> 
> 时间：2012-06-09T12:17:14.350
> 
> 标签：php, mongodb, database

我有一个将存储访问者数据的 mongodb。我需要在十分钟不活动后删除数据，并将通过 cron 运行命令。我该怎么做？

目前该集合的设置如下：

```
{ "_id" : ObjectId("4fd33e0b0feeda3b2406f6be"), "name" : "Dugley Reanimator", "updated" : "Some form of timestmap" } 
```

我应该如何存储一个时间戳，我用 IE 搜索我的 MySql 版本的集合：

```
$sql = mysql_query('DELETE FROM `visitors` WHERE NOW() > DATE_ADD(`last_seen`, INTERVAL 10 MINUTE)'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T18:01:06.960

最好的方法是使用 _id 字段（如果插入时时间戳相同）。

_id 字段可以指示您的时间，您可以执行 $lte 查询来删除旧值。

我在这里写过：[http ://blog.dicarsio.com/post/10739857186/quick-snippet-get-creation-time-from-id-on-mongodb](http://blog.dicarsio.com/post/10739857186/quick-snippet-get-creation-time-from-id-on-mongodb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T22:24:55.157

ObjectId 有一个时间戳组件。[请参阅此处的文档](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)。这实质上为您提供了可[用于排序和查询](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs-Sortbyidtosortbyinsertiontime)的空闲插入时间。

mongodb 驱动器应该为您提供一种从时间戳创建 ObjectId 的方法。

在 Python 中：

```
gen_time = datetime.datetime(2010, 1, 1)
dummy_id = ObjectId.from_datetime(gen_time) 
```

在 Java 中：

```
Date d = new Date(some timestamp in ms);
ObjectId id = new ObjectId(d) 
```

因此，一旦您基于“10 分钟前”创建了一个 ObjectId，您就可以使用 $lt 进行删除查询

在 js 控制台中，它将是：

```
db.collectionName.remove({_id: {$lt: <Your Object Id that represents 10 minutes ago>}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:31:55.500

您的驱动程序将使用 MongoDate 时间（这可能映射到 PHP 中更本机的表示）。
然后，您可以使用以下 mongo 语句进行查询：

```
db.myCollection.find({updated : { $lte : new ISODate("2012-06-09T16:22:50Z") } }) 
```

PHP 的粗略翻译是：

```
$search = array(
  'updated' => array(
    '$lte' => new MongoDate($tenMinutesAgo))
);
$collection->find($search) 
```

或者（警告：未测试）：

```
$tenMinutesAgo = new DateTime();
$tenMinutesAgo->modify('-10 minutes');

$search = array('updated' => array('$lte' => $tenMinutesAgo));
$collection->find($search) 
```

# java - 如何从保存的文本文件中增加一个数字？

> ID：10960925
> 
> 赞同：0
> 
> 时间：2012-06-09T12:17:41.827
> 
> 标签：java, arrays, increment

*如何增加从保存的文本文件中读取的数字？

我正在尝试将从文件读取的帐号添加到数组中，当我向数组添加新数据时，帐号应该是现有帐号的自动增量。我的代码的问题是它可以正常工作，直到我将其保存到文件中。当我重新打开应用程序时，帐号从头开始，即如果保存的帐户号码是 100,101，当我重新打开应用程序时，帐户号码又从 100 开始。请任何人帮助我从文件中读取，然后将其写回文件。*

重新启动应用程序时，数组从头开始。但我只是想知道是否有人可以帮助我找到解决方案

这是我的代码

```
import java.io.Serializable;

public class Student implements Serializable {
    //--------------------------------------------------------------------------    
    protected static int nextBankID=1000;
    protected int accountNumber;    
    protected String fname;
    protected String lname;
    protected String phone;

    //--------------------------------------------------------------------------    
   //constructor
    public Student(String fname, String lname, String phone){

            this.accountNumber = nextBankID++;
            this.fname = fname;
            this.lname = lname;
            this.phone=phone;                 
    }
    //--------------------------------------------------------------------------
    public void setFname(String fname) {
        this.fname = fname;
    }
    //--------------------------------------------------------------------------
    public void setLname(String lname) {
        this.lname = lname;
    }
    //--------------------------------------------------------------------------
    public void setPhone(String phone) {
        this.phone = phone;
    }
    //--------------------------------------------------------------------------
    public int getAccountNumber() {
        return accountNumber;
    }
    //--------------------------------------------------------------------------
    public void setAccountNumber(int accountNumber) {
        this.accountNumber = accountNumber;
    }

    //--------------------------------------------------------------------------
    public String getFname() {
        return fname;
    }
    //--------------------------------------------------------------------------
    public String getLname() {
        return lname;
    }
    //--------------------------------------------------------------------------
    public String getPhone() {
        return phone;
    }  

    @Override
    public String toString(){

        return "\n #Acc\tFirst Name"+"\tLast Name\t#Phone"
        + "\tBalance"+ "\tOverdraft\t\t\n"+accountNumber+""
                + "\t"+fname+"\t"+lname+"\t"+phone; 
    }

}

//-------------------------------------------------------

import java.io.*;
import java.util.ArrayList;
import javax.swing.JOptionPane;

@SuppressWarnings("unchecked")

public class ReadWrite{

    //save stuAccount ArrayList will all stuAccount objects to file
public static void writeAccounts(String fileName,ArrayList<Student> stu) {
        //Create a stream between the program and the file
        try
        {
            FileOutputStream foStream = new FileOutputStream(fileName);
            ObjectOutputStream outStream = new ObjectOutputStream(foStream);

            outStream.writeObject(stu);
            outStream.close();
        }
        catch(FileNotFoundException fnfEx)
        {
              JOptionPane.showMessageDialog(null,fnfEx.getMessage());
        }
        catch(IOException ioE)
        {
               JOptionPane.showMessageDialog(null,ioE.getMessage());
        }   
}   

    //read stuAccount ArrayList
 public static ArrayList<Student> readAccounts(String fileName,ArrayList<Student> stu){ //throws IOException

     try
    {
    //JOptionPane.showMessageDialog(null, "Enter subject details to display");
            //StudentDriver.createSubject();  //create a subject to store stuAccount objects 
                FileInputStream fiStream = new FileInputStream(fileName);
                ObjectInputStream inStream = new ObjectInputStream(fiStream);

                stu = (ArrayList<Student>)inStream.readObject();
                //© Increment's the stu account with 1
                for (int i=0; i< stu.size(); i++){
                     Object b1 = stu.get(i);
                if (b1 instanceof Student){            
                    Student bAccount = (Student)b1;
                if(bAccount.accountNumber==stu.get(i).getAccountNumber())
                    bAccount.accountNumber=stu.get(i).getAccountNumber();
                    }

                }//for the next user entry
                inStream.close();

        }
        catch(ClassNotFoundException cnfEx){
            JOptionPane.showMessageDialog(null,cnfEx.getMessage());
        }       
        catch(FileNotFoundException fnfEx){
            JOptionPane.showMessageDialog(null,fnfEx.getMessage());
        }
        catch(IOException ioE){
            JOptionPane.showMessageDialog(null,ioE.getMessage());
        }

                JOptionPane.showMessageDialog(null, ""+stu.size()
                        + " stu account(s) found in the database....");

    return stu; //return read objects to Driver class   
 }
}

// ----------------------------------------------

import java.awt.Font;
import java.io.IOException;
import java.util.ArrayList;
import javax.swing.JOptionPane;
import javax.swing.JTextArea;

public class StudentDriver {

public static ArrayList<Student> stu = new ArrayList<>();
private static String fileName = "student.txt";

//------------------------------------------------------------------------------
public static void main(String [] vimal)  throws IOException{

   try{

           stu = ReadWrite.readAccounts(fileName,stu);

       if(stu.isEmpty()){
                JOptionPane.showMessageDialog(null,"No account's found "
                + "in the datbase to load into memory!\n\n");     
       }else{
            JOptionPane.showMessageDialog(null,"File contents "
                    + "read and loaded into memory!\n");
       }
    }
    catch (Exception e) {
                        JOptionPane.showMessageDialog(null,"Error encountered "
                                + "while opening the file"
                                + "\nCould not open file"
                                + "\n" + e.toString());
          } 
   //Initialise Main Menu Choice;              
//------------------------------------------------------------------------------           
    int choice= mainMenu();  

    while (choice!=3){

     switch (choice){
            case 1:
                createStudentAccount();//a new account Menu
                break;
            case 2:
                list();//list method            
                break;                  

            case -100:          
                    JOptionPane.showMessageDialog(null,"You have selected cancel");
                    break;          
            case -99:           
                    JOptionPane.showMessageDialog(null,"You must select  1-3");
                    break;          
            default:            
                    JOptionPane.showMessageDialog(null,"Not a valid option .Plese"
                                                        + " re-enter your option");
                    break;      
         }//END FO SWITCH STATEMENT 
      choice = mainMenu();
    }//END OF WHILE LOOP
   ReadWrite.writeAccounts(fileName,stu); //save ArrayList contents before exiting
    System.exit(0);                
   }    

//END MAIN , PROGRAM EXITS HERE 

public static int mainMenu(){

    String menu="US COLLEGE\n Main menu\n1.Add New Student\n2\. Print All\n3\. Exit\n\n";

    String userSelection = (String)JOptionPane.showInputDialog(null,menu);

        int option = validateSelection(userSelection);
    return  option;
}

//------------------------------------------------------------------------------
//                 CREATE ACCOUNT MENU SELECTION VALIDATION

public static int validateSelection(String createAccount){
    //enter cancel
    if (createAccount==null)
            return-100; 

    //hit enter without entry = zero-length string
    if (createAccount.length()<1)       
            return-99;

    //entered more than one charecter   
    if (createAccount.length()>1)       
            return-101;

    if (createAccount.charAt(0)< 49  || 
                                       createAccount.charAt(0)>51)      
            return-101;
    else    
            return Integer.parseInt(createAccount);
}

 public static void createStudentAccount(){

        String acctFirstName,acctLastName,strPhone;
        try{
                   //Account name validation
         acctFirstName = JOptionPane.showInputDialog(null,"Enter your first name");
         acctLastName = JOptionPane.showInputDialog(null,"Enter Your Family Name");
         strPhone =JOptionPane.showInputDialog(null,"Enter Your Phone nuber");

            stu.add(new Student(acctFirstName,
                                        acctLastName,strPhone));
     }
 catch(Exception e){}             
   }

public static void list(){

         String accounts = "";
         String College="\t======== US College ========\n";
         JTextArea output = new JTextArea();
         output.setFont(new Font("Ariel", Font.PLAIN, 12));  

if(stu.isEmpty()){
            JOptionPane.showMessageDialog(null,"No account's created yet");
         }
   else{      
         //for each Bank account in  BankAccount ArrayList
         for (Student s1: stu){         
         if(stu.isEmpty()){
                JOptionPane.showMessageDialog(null,"No account's created yet");               
         }else{              
             accounts += s1.toString();          
              } 
         output.setText(College+accounts );         
        }
         JOptionPane.showMessageDialog(null,output);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:23:15.347

First create a table for maintaing account number.After writing text to the file, every time use to update the table of previous account no to new account no by incrementing the value of account no .

# mongodb - 通过使用 mongodb 和 pymongo 来区分组

> ID：10960926
> 
> 赞同：0
> 
> 时间：2012-06-09T12:18:11.937
> 
> 标签：mongodb, group-by, pymongo

我有一个这样的条目集合：

```
db.mesh_captors.save({'arduino': 0xCB, 'pin': 14, 'value': 35, 'date': datetime.utcnow()})
db.mesh_captors.save({'arduino': 0xCB, 'pin': 14, 'value': 63, 'date': datetime.utcnow()})
db.mesh_captors.save({'arduino': 0xCB, 'pin': 15, 'value': 126, 'date': datetime.utcnow()})
db.mesh_captors.save({'arduino': 0x7B, 'pin': 14, 'value': 121, 'date': datetime.utcnow()}) 
```

我想获得 arduino 的每个引脚的最后一个值。使用 MySQL，我会这样写：

```
SELECT DISTINCT pin, value
FROM mesh_captors
WHERE arduino = 203
GROUP_BY pin
ORDER BY date DESC 
```

但是使用 MongoDB，我不太确定该怎么做。

我尝试过这样的事情，但它足够好吗？

```
reducer = Code("""
              function (doc, out) {
                  if(out.date == 0 || out.date < doc.date) {
                       out.date = doc.date;
                       out.value = doc.value;
                  }
              }
              """)

captors_value = db.mesh_captors.group(key=['pin'], condition={'arduino': int(arduino_id)}, reduce=reducer, initial={'date': 0}) 
```

到目前为止，我执行请求的时间超过了 4.5 秒，并且随着条目数量的增加，需要的时间也越来越多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T23:51:03.617

如果您可以使用即将发布的 2.2 版本的开发版本 2.1，那么您可以使用新的[聚合框架](http://docs.mongodb.org/manual/applications/#aggregation-framework)来比使用 map/reduce 更快地执行此查询。

以下是[聚合管道](http://docs.mongodb.org/manual/reference/glossary/#term-pipeline)获取该 arguino 和 pin 的最新日期值的样子：

```
[{$match:{arduino: 0xCB}},
{$project:
       {_id: 0, arduino:1, pin:1, maxVal: {date:1, val:"$value"} }
},
{$group:
       {_id:{"arduino":1, "pin":1},maxDate:{$max:"$maxVal"} }    
},
{$project:
       {_id:0, "arduino":"$_id.arduino" , "pin":"$_id.pin","date":"$maxDate.date",value:"$maxDate.val"}
}] 
```

如果在您的示例数据上运行，结果是：

```
> db.mesh_captors.aggregate(agg)
{
    "result" : [
        {
            "arduino" : 203,
            "pin" : 15,
            "date" : "Sat Jun 09 2012 16:22:50 GMT-0700 (PDT)",
            "value" : 126
        },
        {
            "arduino" : 203,
            "pin" : 14,
            "date" : "Sat Jun 09 2012 16:23:00 GMT-0700 (PDT)",
            "value" : 63
        }
    ],
    "ok" : 1
} 
```

您可以通过 pymongo 支持从 Python 访问聚合框架`db.runCommand`。您将执行`db.runCommand`将文件传递给它

```
{"aggregate":"mesh_captors", "pipeline":<pipeline-goes-here>} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T13:23:23.807

您不能在分片集合中使用组，这对于大多数任务来说是个糟糕的选择。如果您不使用可能接近您可以获得的最佳性能的分片集合。（如果我错了，请纠正我）您应该尝试使用 MapReduce 实现相同的任务并汇总和比较性能。

[这篇文章](http://blog.pythonisito.com/2012/06/using-mongodbs-new-aggregation.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20JustALittlePython%20%28Just%20a%20little%20Python%29)应该可以帮助你更好地理解来自 mongodb 的一些高级聚合。

# bash - 如何在不循环的情况下显示连续转换管道中每个步骤的结果？

> ID：10960930
> 
> 赞同：1
> 
> 时间：2012-06-09T12:19:08.967
> 
> 标签：bash, pipe

考虑以下示例 Bash one-liner，其中字母“h”、“e”和“o”按顺序从单词“hello”中删除。只剩下两个“l”字母；

```
$ echo "hello" | tr -d h | tr -d e | tr -d o
ll 
```

我正在尝试找到一种方法，将每个命令的输出显示到一个衬里内的屏幕上，以便其他运行它的人可以看到发生了什么。继续上面的示例，我希望输出如下；

```
$ echo "hello" | tr -d h | tr -d e | tr -d o
hello
ello
llo
ll 
```

这可能吗？根据上述单线的操作，我们使用垂直管道将命令的输出传送到命令。所以我假设我必须从管道中断打印到标准输出，然后会中断我编写的“命令链”。~~或者也许`tee`可以在这里使用，但我似乎无法达到愿望效果。~~ **更新**：`tee`不起作用，因为它的输出仍在管道的边界内，呵呵！

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T13:12:31.690

这仅适用于终端：

```
echo hello  | tee /dev/tty |
    tr -d h | tee /dev/tty |
    tr -d e | tee /dev/tty |
    tr -d o 
```

`/dev/tty`无论正常输出到哪里，设备都会将输出重定向到当前终端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-09T13:12:59.800

您可以`tee`直接输出到终端：

```
echo hello  | tee /proc/$$/fd/1 |
    tr -d h | tee /proc/$$/fd/1 |
    tr -d e | tee /proc/$$/fd/1 |
    tr -d o 
```

`$$`是外壳的 PID。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-09T14:14:36.837

IMO，如果这是现实世界的问题，而不是*如何在 bash 中进行操作*，那么您可以尝试一个简单的 perl oneliner，而不是启动 X tr 和 Y tee 进程的 bash 疯狂：

```
echo hello | perl -nale 'foreach $i (qw(h e o)) {@F=map{s/$i//g;print $_;$_}@F}' 
```

将打印：

```
ello
llo
ll 
```

或者如果你真的想要 bash（正如@chepner 建议的那样）

```
echo "hello" | while read w; do for c in h e o; do w=${w//$c};echo $w; done;done 
```

或者

```
while read w; do for c in h e o; do w=${w//$c};echo $w; done;done < wordlist 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T12:56:02.103

有一个小循环：

```
w="hello" ; for c in h e o .; do echo $w; w=$(echo $w | tr -d $c); done 
```

这 。仅用于简要解决方案。在更仔细地阅读了这个问题之后，我测试并发现它也可以在管道链中工作：

```
w="hello" ; for c in h e o .; do echo $w; w=$(echo $w | tr -d $c); done | less 
# pure bash buildins, see chepner's comment
w="hello" ; for c in h e o .; do echo $w; w=${w/$c}; done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T12:28:28.717

您可以使用`tee -`as`-`代表控制台：

```
echo "hello" | tee - | tr -d h | tee - | tr -d e | tee - | tr -d o 
```

希望有帮助！

**编辑**：

该解决方案**将不起作用**，因为`stdout`所有通过`stdout`.

我不会删除答案，因为它明确指出它不能解决问题，但也表明这种解决方案无效以及原因。如果有人发现自己处于相同的情况，就会发现此信息，这将很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-09T12:48:53.027

但这**将**起作用：

```
tmp=`echo "hello"`; echo $tmp; tmp=`echo $tmp | tr -d h`; echo $tmp; tmp=`echo $tmp | tr -d e`; echo $tmp; echo $C | tr -d o 
```

这很丑陋，但它有效。该解决方案创建变量来存储每个传递，然后将它们全部显示：

```
tmp=`echo "hello"`
echo $tmp
tmp=`echo $tmp | tr -d h`
echo $tmp
tmp=`echo $tmp | tr -d e`
echo $tmp
echo $C | tr -d o 
```

我找不到更好的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-09T12:51:43.947

您可以使用您收听的 fifo（或常规文件）来执行此操作：

```
mkfifo tmp.fifo
tail -f tmp.fifo 
```

然后只需在单独的 shell 上运行您的命令：

```
echo hello | tee -a tmp.fifo | tr -d e | tee -a tmp.fifo | tr -d o 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T05:49:11.680

再住一间？

```
echo "hello" | tee >(tr -d h | tee >(tr -d e | tee >(tr -d o) ) ) 
```

或者

```
 echo "hello" | 
tee >(tr -d h | 
tee >(tr -d e | 
tee >(tr -d o  ) ) ) 
```

输出是：

```
hello
ubuntu@ubuntu:~$ ello
llo
ll 
```

消除腐败需要一点有说服力的强制手段`ubuntu@ubuntu:~$`

```
cat <(echo "hello" | tee >(tr -d h | tee >(tr -d e | tee >(tr -d o) ) ) ) 
```

输出是：

```
hello
ello
llo
ll 
```

# java - 在具有不断重绘的 JPanel 的 JApplet 中使用组件

> ID：10960939
> 
> 赞同：3
> 
> 时间：2012-06-09T12:20:06.430
> 
> 标签：java, swing, applet, japplet

我的这个学校作业有一个大问题；幸运的是我早早开始了一次。我们被要求使用`JApplet`. 到现在为止还挺好。我设法创建了一个`JPanel`，然后将其添加到`JApplet`并保存所有图纸（`JPanel`内容不断被重绘）。但是，每当我尝试将 Swing 组件（例如 a）添加`JLabel`到`JApplet`内容窗格时，它都不会显示或显示曾经存在的迹象。我对`JApplet`s完全陌生，所以如果很明显，请不要太苛刻。

下面是代码：

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JApplet;
import javax.swing.JPanel;
import javax.swing.Timer;

public class CountingSheep extends JApplet
{

    final int BOARDWIDTH = 800;
    final int BOARDHEIGHT = 500;
    final int SCREENWIDTH = 800;
    final int SCREENHEIGHT = 800;
    Dimension boardDim = new Dimension(BOARDWIDTH, BOARDHEIGHT);
    Dimension screenDim = new Dimension(SCREENWIDTH, SCREENHEIGHT);
    Graphics bufferGraphics;
    Image offScreen;
    Image backgroundImage;
    Image[] sheepImage = new Image[2];
    JPanel gameBoard = new JPanel(true);
    List<Sheep> sheepArray = new ArrayList<>();
    Timer myTimer;

    public void init()
    {
        loadImages();
        initScreen();
        initBufferGraphics();
        initBoard();
        initTimer();
        sheepArray.add(new Sheep(sheepImage));
        myTimer.start();
    }

    private void loadImages()
    {
        sheepImage[0] = getImage(getDocumentBase(), "sheep.png");
        sheepImage[1] = getImage(getDocumentBase(), "sheep2.png");
        backgroundImage = getImage(getDocumentBase(), "bg.jpg");
    }

    private void initScreen()
    {
        setSize(800, 600);
        setLayout(new FlowLayout(FlowLayout.LEFT, 0, 0));
    }

    private void initBoard()
    {
        gameBoard.setPreferredSize(new Dimension(BOARDWIDTH, BOARDHEIGHT));
        getContentPane().add(gameBoard);
    }

    private void initBufferGraphics()
    {
        offScreen = createImage(BOARDWIDTH, BOARDHEIGHT);
        bufferGraphics = offScreen.getGraphics();
    }

    private void initTimer()
    {
        myTimer = new Timer(80, new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                timerTick(e);
            }
        });
    }

    private void timerTick(ActionEvent e)
    {
        repaint();
    }

    public void paint(Graphics g)
    {
        bufferGraphics.clearRect(0, 0, BOARDWIDTH, BOARDHEIGHT);
        bufferGraphics.drawImage(backgroundImage, 0, 0, null);
        drawSheepHerd();
        moveSheepHerd();
        gameBoard.getGraphics().drawImage(offScreen, 0, 0, this);
    }

    public void drawSheepHerd()
    {
        for (Sheep s : sheepArray)
        {
            s.draw(bufferGraphics);
        }
    }

    public void moveSheepHerd()
    {
        for (Sheep s : sheepArray)
        {
            s.move();
        }
    }
} 
```

在此先感谢，希望你们能弄清楚，因为我很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T12:34:44.717

总结一下我的一些建议：

*   创建您自己的扩展 JPanel 的 ContentPane 类，该类覆盖`paintComponent(...)`并绘制您的背景图像并显示动画。
*   在 init 方法中调用 JApplet 上的 setContentPane(...)，传入这个类的一个对象。
*   试验 ContentPane 的不同布局和定位。
*   确保该`paintComponent(Graphics g)`方法的第一行是：`super.paintComponent(g)`以便您的绘图在每次绘制时都将被重置。
*   JPanel 默认情况下是不透明的，您应该保留它，因为 contentPanes 必须是不透明的。如果您在 contentPane 顶部添加组件并希望看到添加的组件后面的图像，您可能必须使*它们*不透明。

# ruby - ruby 多维数组排序

> ID：10960940
> 
> 赞同：0
> 
> 时间：2012-06-09T12:20:08.780
> 
> 标签：ruby, arrays, sorting

我有一个这样的数组

```
arr = [[24,4], [44,5],[67,1], [30, 2], [67, 2]] 
```

如果我使用`arr.sort{|a,b| b[0]<=>a[0]}`我会得到这个结果

```
[[67,1], [67, 2], [44,5], [30, 2], [24,4]] -  #[value, id] 
```

如何再次对数组进行排序以实现此结果

```
[[67,2], [67, 1], [44,5], [30, 2], [24,4]] -  #[value, id] 
```

如果有相同的值，那么排序应该发生在 id descending 上。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T15:34:37.057

为什么不走简单明了的路线：

```
arr.sort.reverse
# => [[67, 2], [67, 1], [44, 5], [30, 2], [24, 4]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T12:29:49.577

最好使用`Enumerable#sort_by`：

```
arr = [[24,4], [44,5],[67,1], [30, 2], [67, 2]]
arr.sort_by { |x, y| [-x, -y] }
#=> [[67, 2], [67, 1], [44, 5], [30, 2], [24, 4]] 
```

# javascript - 在 Javascript 中将发布响应存储在变量中

> ID：10960942
> 
> 赞同：0
> 
> 时间：2012-06-09T12:20:27.810
> 
> 标签：javascript

我想发布一个表单并使用javascript将响应html代码保存在一个变量中。
这是我的代码：

```
<script type="text/javascript">
function submitform()
{
  document.forms["myform"].submit();
}
</script>

<form id="myform" action="url" method="post" target="iframe">
<input type="hidden" name="arg" value="value">
<a href="javascript: submitform()">Go</a>
</form>
<iframe name="iframe"></iframe> 
```

如果我运行此代码响应将显示在 iframe 中。但在某些情况下，加载 iframe 页面后会重定向到源代码。我搜索了很多地方以阻止重定向发生，但没有找到任何方法！
我刚刚通过添加此 javascript 代码找到了一种方法：

```
window.onbeforeunload = function(){
            return false;
        }; 
```

但是这种方式很烦人，因为它在重定向时会显示一个对话框，我不能要求用户每次都点击它！
所以我选择了一种不在浏览器中加载响应 html 代码的方法来进行重定向！而不是将响应保存在变量中并删除脚本然后打印它！

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:25:23.353

您正在拐角处编码。使用 jQuery 及其 .ajax 方法。将返回的标记放置到 div 中，而不是 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T12:36:13.187

你应该看看[jQuery 的 AJAX 功能](http://api.jquery.com/jQuery.ajax/)，它非常灵活且易于使用。或者，更简单，试试[jQuery Form Plugin](http://jquery.malsup.com/form/)，它基本上可以自动化所有与表单相关的事情。您所要做的就是指出表格并告诉您在提交表格之前和/或之后要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:25:11.047

您可以使用 javascript 来发出发布请求，而不是使用表单。在这种情况下，只要您发布到同一个域，您就可以轻松捕获响应。（出于安全原因，跨域帖子不提供返回值）。请参阅[JavaScript 发布请求，如表单提交](https://stackoverflow.com/questions/133925/javascript-post-request-like-a-form-submit)，了解如何使用 javascript 发布。

# php - 解析维基百科文章的第一段？

> ID：10960943
> 
> 赞同：1
> 
> 时间：2012-06-09T12:20:37.797
> 
> 标签：php, xml, wikipedia-api

> **可能重复：**
> [使用 wikipedia API 获取内容](https://stackoverflow.com/questions/6399456/getting-content-using-wikipedia-api)
> [使用 PHP，如何使用 MediaWiki API 获取 Wikipedia 文章的第一段？](https://stackoverflow.com/questions/9381233/using-php-how-do-i-get-the-first-paragraph-of-a-wikipedia-article-with-the-medi)

这主要是一个与 XML 相关的问题。

我正在尝试使用 MediaWiki API 来做到这一点。

我设法获得了 XML 格式的响应（如果更容易，可以更改为 JSON），并且我在响应中看到了我需要的所有内容。例子：

```
http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=War%20and%20Peace&prop=revisions&rvprop=content&format=xmlfm 
```

出于格式化原因，我在这里使用了 xmlfm。在 PHP 中，我正在做：

```
$request = "http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=War%20and%20Peace&prop=revisions&rvprop=content&format=xml";

$response = @file_get_contents($request);

$wxml = simplexml_load_string($response);

var_dump($wxml); 
```

它打印出 XML 中的所有内容。我的问题是，我如何从中得到第一段？

我可以从全文中解析它，所以基本上我要问的是，我如何从这个 XML 中获取文章文本？当然，如果有办法直接进入第一段，那将是最好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:43:18.690

我肯定会说你正在寻找[这个](https://stackoverflow.com/questions/8555320/is-there-a-clean-wikipedia-api-just-for-retrieve-content-summary)。

如果您想检索第一部分中的所有内容（不仅仅是第一段）：

```
// action=parse: get parsed text
// page=Baseball: from the page Baseball
// format=json: in json format
// prop=text: send the text content of the article
// section=0: top content of the page

$url = 'http://en.wikipedia.org/w/api.php?action=parse&page=Baseball&format=json&prop=text&section=0';
$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT, "TestScript"); // required by wikipedia.org server; use YOUR user agent with YOUR contact information. (otherwise your IP might get blocked)
$c = curl_exec($ch);

$json = json_decode($c);

$content = $json->{'parse'}->{'text'}->{'*'}; // get the main text content of the query (it's parsed HTML)

// pattern for first match of a paragraph
$pattern = '#<p>(.*?)</p>#s'; // http://www.phpbuilder.com/board/showthread.php?t=10352690
if(preg_match_all($pattern, $content, $matches))
{
    // print $matches[0]; // content of the first paragraph (including wrapping <p> tag)
    print strip_tags(implode("\n\n",$matches[1])); // Content of the first paragraph without the HTML tags.
} 
```

# c# - 在 Windows 8 Metro App (C#/XAML) 中同时播放两种声音

> ID：10960952
> 
> 赞同：6
> 
> 时间：2012-06-09T12:21:41.853
> 
> 标签：c#, audio, windows-8, microsoft-metro

我是一个 Windows 8 Metro 应用程序 (C#/XAML)：我怎样才能触发两次相同的音效，以便它同时播放。

第二场比赛应该在第一场比赛结束之前开始。

相关问题是：

[同时播放两个声音 c#](https://stackoverflow.com/questions/5747086/playing-two-sounds-simultaneously-c-sharp) 和[同时播放两个声音](https://stackoverflow.com/questions/6240002/play-two-sounds-simultaneusly)

我为 XNA 找到了这个类，它可以满足我的需求，但在 Metro 下不可用：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffectinstance.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.soundeffectinstance.aspx)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-09T12:54:54.770

只需为每个音效创建一个单独的媒体元素。

（不确定我每次都需要重新定位文件）

```
 public async void PlayLaserSound()
    {
        var package = Windows.ApplicationModel.Package.Current;
        var installedLocation = package.InstalledLocation;
        var storageFile = await installedLocation.GetFileAsync("Assets\\Sounds\\lazer.mp3");
        if (storageFile != null)
        {
            var stream = await storageFile.OpenAsync(Windows.Storage.FileAccessMode.Read);
            MediaElement snd = new MediaElement();
            snd.SetSource(stream, storageFile.ContentType);
            snd.Play();
        }
    } 
```

# c# - 通过分组拆分 Linq 列表

> ID：10960953
> 
> 赞同：4
> 
> 时间：2012-06-09T12:21:53.240
> 
> 标签：c#, linq

出于报告目的，我想将采购订单列表拆分为多个列表。每个购买地址一份清单。我知道可以按购买地址对列表进行分组，但我的问题是如何按此购买地址将列表拆分为多个列表并使用这些多个列表创建单独的报告文件。

代码：

```
(from o in orders
group o by new {field1, field2, field3, field4} into og
orderby og.Key.field1
select new ViewClass
{
    purchaseAddress = og.Key.field1,
    product = og.key.field2,
    count = og.count
}).ToList() 
```

问题：如何将上面的列表拆分为每个 purchaseAddress 的多个列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T04:07:55.887

我认为有一个内置功能可以满足您的需求。如果我假设您的代码被分配给一个名为的变量，`query`那么您可以这样写：

```
ILookup<string, ViewClass> queryLists = query.ToLookup(x => x.purchaseAddress); 
```

这实质上创建了一个列表列表，您可以像字典一样访问，除了每个值都是零个或多个值的列表。就像是：

```
IEnumerable<ViewClass> someList = queryLists["Some Address"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T01:32:03.777

只需将每个组变成一个列表。

```
select new ViewClass 
{ 
    purchaseAddress = og.Key.field1, 
    product = og.key.field2, 
    count = og.count,
    List = og.ToList()
}).ToList(); 
```

* * *

哦，您的分组是实体的一种方式和页面的另一种方式......只是重新组合。

```
List<ViewClass> classes = (
  from o in orders   
  group o by new {field1, field2, field3, field4} into og   
  orderby og.Key.field1   
  select new ViewClass   
  {   
    purchaseAddress = og.Key.field1,   
    product = og.key.field2,   
    count = og.count   
  }).ToList();

List<List<ViewClass>> regrouped = (
  from c in classes
  group c by c.purchaseAddress into g
  select g.ToList()
).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-30T05:23:21.257

您可以使用的另一个简单的内置函数是 GroupBy 函数。它的工作与 ToLookup 类似，但这意味着您的新列表是 IQuerable，不像字典和其他一些东西（请参阅这篇[文章](https://stackoverflow.com/questions/10215428/why-are-tolookup-and-groupby-different)以获得良好的细分）

```
var newList = orders.GroupBy(x => x.field1); 
```

这将返回按您指定的字段分组的列表列表。

# c - 如何获取电子邮件地址的开头

> ID：10960958
> 
> 赞同：0
> 
> 时间：2012-06-09T12:22:52.897
> 
> 标签：c, string

我有两个字符串，一个带有电子邮件地址，另一个是空的。如果电子邮件地址是 eg `"abc123@gmail.com"`，我需要传递电子邮件地址的开头，就在`@`第二个字符串之前。例如：

第一个字符串：`"abc123@gmail.com"`

第二个字符串：`"abc123"`

我写了一个循环，但它不起作用：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
char email[256] = "abc123@gmail.com";
char temp[256];
int i = 0;

while (email[i] != '@')
{
      temp = strcat(temp, email[i]);
      i++;
}

printf ("%s\n", temp);
system ("PAUSE");
return 0;
} 
```

基本上，我每次都从电子邮件地址中提取一个字符，并将其添加到新字符串中。例如，如果新字符串上有一个，现在我`b`也将使用`strcat`....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:31:28.683

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(void)
{
char email[256] = "abc123@gmail.com";
char temp[256];
size_t i = 0;

#if 0
for (i=0; email[i] && email[i] != '@'; i++) {;}

   /* at the end of the loop email[i] is either the first '@',
   ** or that of the terminating '\0' (aka as strlen() )
   */

#else

i = strcspn(email, "@" );

   /* the return value for strcspn() is either the index of the first '@'
   * or of the terminating '\0'
   */

#endif

memcpy (temp, email, i);
temp[i] = 0;

printf ("%s\n", temp);
system ("PAUSE");
return 0;
} 
```

更新：一种完全不同的方法是在循环内进行复制（我想这是 OP 的意图）：

```
for (i=0; temp[i] = (email[i] == '@' ? '\0' : email[i]) ; i++) {;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-09T12:54:50.253

有更好的方法来解决这个问题（例如通过找到`@`（通过`strcspn`或其他方式）的索引并执行 a `memcpy`），但是您的方法非常接近工作，因此我们可以进行一些小的调整。

* * *

正如其他人所指出的，问题出在这一行：

```
temp = strcat(temp, email[i]); 
```

据推测，您正试图将`i`th 位置的字符复制`email`到 的相应位置`temp`。但是，`strcat`这样做不是正确的方法：将`strcat`数据从一个复制`char*`到另一个`char*`，也就是说，它复制字符串。你只想复制一个字符，这正是`=`它所做的。

从更高的层次来看（所以我不只是告诉你答案），你想将适当的字符设置为适当`temp`的字符`email`（你需要使用`i`索引`email`和`temp`）。

另外，请记住 C 中的字符串必须以 终止`'\0'`，因此您必须在复制完字符串后将下一个字符设置为`temp`to 。`'\0'`（按照这种思路，您应该考虑如果您的电子邮件字符串中没有一个会发生`@`什么，您的`while`循环将继续超过字符串的末尾`email`：请记住，您可以判断您是否在字符串的末尾通过`character == '\0'`或仅用`character`作条件。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T12:57:08.060

指针。首先， strcat() 返回一个 char 指针，由于某种原因，C 不能将其转换为 char 数组（我听说[所有 C 程序员都必须知道](https://stackoverflow.com/questions/10960958/how-to-get-the-start-of-an-email/10961214#comment14310731_10961214)）。其次，strcat() 的第二个参数应该是一个 char 指针，而不是一个 char。

替换应该可以解决问题`temp = strcat(temp, email[i]);`。`temp[i] = email[i];`

此外，循环结束后，以空字符终止字符串。

```
temp[i] = '\0'; 
```

（循环结束后，`i`等于提取字符串的长度，`temp[i]`终端应该去的地方也是如此。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T12:30:46.543

您可能想尝试使用[strtok()](http://www.gnu.org/software/libc/manual/html_node/Finding-Tokens-in-a-String.html)

# iframe - IE 不允许 Google 在 iframe 内链接

> ID：10960965
> 
> 赞同：0
> 
> 时间：2012-06-09T12:23:31.820
> 
> 标签：iframe, internet-explorer-8

我认为他们在这方面走得太远了。我有这个 iframe：

```
<iframe width='425' height='350' frameborder='0' scrolling='no' 
 marginheight='0' marginwidth='0' src='http://www.microsoft.com'></iframe> 
```

它有效，但是当我把这个：

```
<iframe width='425' height='350' frameborder='0' scrolling='no' 
 marginheight='0' marginwidth='0' src='http://www.google.com'></iframe> 
```

一条消息说：

> 此内容无法在 iframe 中显示... bla bla bla

出现在 iframe 元素内。

我正在使用 IE8。到底是怎么回事？谢谢！

**更新**Mozilla Firefox 也是如此。这是什么？战场？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T12:29:38.997

因为谷歌不允许。请求 google.com 时的 HTTP 响应标头之一是：

```
X-Frame-Options SAMEORIGIN 
```

# c - 如何在程序中自动插入 pragma

> ID：10960974
> 
> 赞同：4
> 
> 时间：2012-06-09T12:25:01.057
> 
> 标签：c, compiler-construction, abstract-syntax-tree

我需要编写一个可以采用 C 代码并将**pragma**放在某些函数之上的工具。哪个编译器框架最容易完成这样的任务。另外，如果您能提供一个示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:05:01.543

如果你想可靠地做到这一点，你需要一个完整的 C 前端，以及修改解析代码的能力。

我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)可能可以满足您的需求。DMS 可以解析、构建 AST 并对源文本执行自定义转换，可以是程序化的，也可以是表面语法转换。

宏和预处理器指令存在一些问题；如果您解析并保留这些，它可以在许多情况下这样做，但它会扩展这些指令，它们不是“结构化”的。保留意味着您没有获得符号表。如果展开所有指令，解析后可以得到一个符号表，其内容与 C 编译器生成的内容相同。

对于 OP 的特定任务，他想编写一个源到源转换，如下所示：

```
 rule decorate_function_definition_with_pragma(fh:function_head, b: block): declaration -> declaration
       =  " \fh \b " ->
          " \fh 
            #pragma  my_pragma 
            \b "
         if some_condiiton(fh); 
```

其中“my_pragma”基本上被他想要的编译指示文本替换，而 some_condition 是过滤匹配的函数头的自定义谓词，应该为其插入编译指示。

该模式与语法树匹配，因此它不会像 sed 或正则表达式那样不匹配。秘诀在于模式变量引用了 C 前端中的语法规则；function_head 类型的模式变量只能匹配 function_head 语法规则可以满足的那些树。

需要一些简单的控制逻辑来为每个遇到的函数定义运行一次这种转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:36:52.887

看看 lex/flex 或 yacc/bison。

很棒的文章：[http ://www.ibm.com/developerworks/aix/tutorials/au-lexyacc/index.html](http://www.ibm.com/developerworks/aix/tutorials/au-lexyacc/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:07:45.937

您可以使用正则表达式来搜索函数定义。

[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

# mysql - 为什么我的 mysql MULTIPLE JOINS 查询在采用所有优化后这么慢？

> ID：10960980
> 
> 赞同：1
> 
> 时间：2012-06-09T12:25:36.193
> 
> 标签：mysql, join, group-by, query-optimization

假设您有类似的查询

```
SELECT
    t1.c1,
    t2.c2,
    ... more fields from joins ...
FROM t1
LEFT JOIN t2 ON t1.id = t2.id
... more joins ...
GROUP BY t1.field
WHERE ... 
```

而且您遇到了性能问题，并且您认为您已经涵盖了此类查询的[所有常见优化](https://stackoverflow.com/questions/7735703/optimizing-mysql-query-with-multiple-left-joins)`ON`，例如在,`GROUP BY`等中的列上定义索引`WHERE`。但它仍然非常慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:25:37.003

**检查您的所有联接是否都是实际表而不是视图！**

我知道这是相当明显的陈述，但它难住了一段时间，因为我刚刚忘记了其中一个连接是视图。

这是一个在我自己找到答案之前我没有问过的问题，但我想发帖以帮助其他有同样问题的人，因为在任何其他关于优化 GROUP BY 查询的帖子中都没有提到这个问题与 JOIN。我不确定这是否在 SO 上被接受，但我也在这篇文章中添加了接受的答案[，](https://stackoverflow.com/questions/7735703/optimizing-mysql-query-with-multiple-left-joins)所以如果管理员想删除这篇文章，我不会被冒犯。

# ruby-on-rails - 如何限制用户在 ruby on rails 中只“喜欢”一次帖子？

> ID：10960988
> 
> 赞同：1
> 
> 时间：2012-06-09T12:26:17.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

基本上我有一个页面，列出了 10 个最近的微博。每个帖子都有一个赞按钮。单击此赞按钮时，我的数据库中的赞表将更新。

**喜欢表：**

```
+----+------------+--------------+-------------------------+-------------------------+---------+
| id | likable_id | likable_type | created_at              | updated_at              | user_id |
+----+------------+--------------+-------------------------+-------------------------+---------+
| 2  | 5770       | Micropost    | 2012-06-09 11:30:55 UTC | 2012-06-09 11:30:55 UTC | 2       |
| 3  | 5770       | Micropost    | 2012-06-09 11:42:45 UTC | 2012-06-09 11:42:45 UTC | 2       |
+----+------------+--------------+-------------------------+-------------------------+---------+ 
```

用户只能点赞一次微博。我可以使用一些 jquery/js 来实现这一点，方法是在喜欢微博时显示一个指向破坏路径的不同按钮。

但是有没有办法做这个服务器端呢？就像不允许以任何必要的方式多次喜欢微博一样？因此，如果我要进入 Rails 控制台并尝试手动点赞我已经喜欢的微博，它不会工作，因为它会看到我已经喜欢微博？

**喜欢的型号：**

```
class Like < ActiveRecord::Base
  belongs_to :likable, :polymorphic => true
  attr_accessible :likable_id, :likable_type, :user_id
end 
```

**微贴模型：**

```
class Micropost < ActiveRecord::Base
    belongs_to :user
    has_many :likes, :as => :likable
end 
```

**喜欢控制器：**

```
class LikesController < ApplicationController
  def create
    micropost = Micropost.find(params[:micropost])
     like = micropost.likes.build(:user_id => current_user.id)
     like.save
  end
end 
```

**喜欢形式：**

```
<%= form_tag likes_path, :remote => true, :class => "like_micropost" do %>  
   <%= hidden_field_tag :micropost, micropost.id %>
       <%= submit_tag '', :class => "likeMicropostSubmit"  %> 
<% end %> 
```

**我以前试过这个没有运气：**

```
class LikesController < ApplicationController
  def create
    micropost = Micropost.find(params[:micropost])
    if micropost.likes.where(:user_id => current_user.id).nil?
     like = micropost.likes.build(:user_id => current_user.id)
     like.save
    end
  end
end 
```

亲切的问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T12:38:28.457

```
# in Like class
validates_uniqueness_of :user_id, :scope => [:likable_id, :likable_type] 
```

这样，您在尝试多次喜欢某样东西时会收到验证错误。

[请参阅文档。](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:44:28.147

我会做两件事：

1.  将创建逻辑移至模型（胖模型、瘦控制器）
2.  在类似创建时添加验证（正如 jdoe 已经说过的）

所以：

```
class LikesController < ApplicationController
  def create
    micropost = Micropost.find(params[:micropost])
    current_user.likes! micropost
  end
end

class Like < ActiveRecord::Base
  validates_uniqueness_of :user_id, :scope => [:likable_id, :likable_type]
end

class User < ActiveRecord::Base
  # exclamation mark to avoid confusion between things that are liked by the user
  def likes!(likable_object)
    unless likable_object.likes.where(:user_id => self.id).exists?
      like = likable_object.likes.build(:user_id => self.id)
      like.save
    end
  end
end 
```

**编辑**：说明：

1) 管理 Like 创建阶段是模型职责 -> 将管理创建的代码移至模型

2）找到一个好的方法名称来描述动作->`User.likes! something`听起来不错

3）实现创建方法->

```
def likes!(likable_object)
  like = likable_object.likes.build(:user_id => self.id)
  like.save
end 
```

4) 添加验证以管理模型有效/模型无效逻辑 ->`class Like; validates_uniqueness_of ...`

5) 让`likes!`方法意识到有效/无效逻辑 ->

```
def likes!(likable_object)
  unless likable_object.likes.where(:user_id => self.id).exists?
    like = likable_object.likes.build(:user_id => self.id)
    like.save
  end
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-09T12:36:49.863

好的，这对我有用：

```
class LikesController < ApplicationController
  def create
    micropost = Micropost.find(params[:micropost])
    unless micropost.likes.where(:user_id => current_user.id).exists?
     like = micropost.likes.build(:user_id => current_user.id)
     like.save
    end
  end
end 
```

没有创建模板是阻止它正常工作的原因，但模板是空的且未使用，所以想知道为什么它是强制性的。

# c# - 如何设置 MediaElement 源

> ID：10960989
> 
> 赞同：0
> 
> 时间：2012-06-09T12:26:27.777
> 
> 标签：c#, wpf, listbox, mediaelement, playlist

我正在用 C# WPF 制作音乐播放器。文件被添加到用作 MediaElement 播放列表的 ListBox 中。为了在 ListBox 中只显示没有路径和扩展名的文件名，我创建了一个`Song`具有路径和标题属性的类。

我想不通的是如何将 MediaElements 源设置为`Song`对象的路径属性，这样我只需单击 ListBox 中的一个项目，它就会开始播放。

这是我用于将文件添加到列表框的代码：

```
 if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            foreach (string file in ofd.FileNames)
            {
                Song songs = new Song(System.IO.Path.GetFileNameWithoutExtension(file), file);
                listBox.Items.Add(songs);                                                                           
            }  
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:38:19.067

将路径存储在您的`Song`类中以及文件名中。然后，当您选择该项目时，您可以立即使用该路径。您可以在`Song`类上拥有任意数量的属性。只需使用该[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)属性来控制要显示的内容，并使用该[`SelectedValuePath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath.aspx)属性来控制您需要将项目的哪些方面返回给代码。在这种情况下，您可以将文件名用作`DisplayMemberPath`，将路径用作`SelectedValuePath`.

您实际上不需要只存储文件名，因为您可以通过转换器传递路径以提取文件名以进行显示。显然，这会产生处理开销，并且存储文件名所占用的额外内存并不是真正的问题，但我认为值得一提。

# sqlite - SQLite >1 列表错误代码 = 1

> ID：10960997
> 
> 赞同：0
> 
> 时间：2012-06-09T12:27:47.190
> 
> 标签：sqlite, error-code, two-columns

我在创建具有 2 列的数据库时遇到问题。第一个应该有一个名字，第二个应该有一个数字。创建名称数据库没有问题，但是当我尝试添加第二列时，我收到错误消息“I/Database(13531): sqlite returned: error code = 1, msg = no such column: zahl”

我的代码在这里

首先是经理

```
package my.studienarbeit.bestimmung.database;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatenbankManager extends SQLiteOpenHelper {

private static final String DB_NAME = "carbohydrates.db";
private static final int DB_VERSION = 1;

private static final String WEIGHT_CREATE = 
         "CREATE TABLE weight (" 
        + "_id INTEGER PRIMARY KEY AUTOINCREMENT, " 
        +   "name TEXT NOT NULL, " +
    //  +   "zahl INTEGER" +
        ")";

public DatenbankManager(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(WEIGHT_CREATE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(DatenbankManager.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS SCANITEM");
    onCreate(db);
}

} 
```

和我的数据库：

```
package my.studienarbeit.bestimmung.database;

import my.studienarbeit.bestimmung.R;
import android.app.ListActivity;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class Datenbanken extends ListActivity {

private SQLiteDatabase mDatenbank;
private DatenbankManager mHelper;
/*/ private static final String WEIGHT_SELECT_RAW = 
        "SELECT _id, name, zahl FROM weight" ; //*/

//*/
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.daten_datenbanken);
    mHelper = new DatenbankManager(this);
    mHelper.getWritableDatabase();

}

@Override
protected void onPause() {
    super.onPause();
    mDatenbank.close();
    Toast.makeText(this, 
                 getResources().getString(R.string.tx_daten_datenbanken_db_geschlossen), 
            Toast.LENGTH_SHORT).show();
}

@Override
protected void onResume() {
    super.onResume();
    mDatenbank = mHelper.getWritableDatabase();
    Toast.makeText(
            this, 
            getResources().getString(
                    R.string.tx_daten_datenbanken_db_geoeffnet
                    ), 
            Toast.LENGTH_SHORT)
    .show();
    ladeDaten();

}

private void ladeDaten() {
     // Cursor weightCursor = mDatenbank.rawQuery(WEIGHT_SELECT_RAW, null);
Cursor weightCursor = mDatenbank.query("weight",
            new String [] {
                    "_id",
                    "name",
                //  "zahl",
            },
            null, null, null, null, null                
        ); 

    startManagingCursor(weightCursor);  
    SimpleCursorAdapter weightAdapter =
            new SimpleCursorAdapter(this, 
                    android.R.layout.simple_list_item_2, 
                    weightCursor, 
                    new String [] {
                    "name", 
                //  "zahl"
                    }, 
                    new int[] {
                        android.R.id.text1
                    }

            );

setListAdapter(weightAdapter);
}

public void onNavButtonClick(View view) {
    EditText et_c = 
            (EditText) findViewById(R.id.editText_name_c);
//  EditText et_w = 
    //      (EditText) findViewById(R.id.editText_weight_c);

    ContentValues werte = new ContentValues();
    werte.put("name", et_c.getText().toString());
//  werte.put("zahl", et_w.getText().toString());
    mDatenbank.insert("weight", null, werte);
    ladeDaten();
    et_c.setText("");
//  et_w.setText(""); 
```

对于调试功能，第二列现在不活动。我真的希望你能帮助我。我现在被困了3天......

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:07:31.443

如果您首先创建了没有“zahl”列的表，然后添加了“zahl”列并重新运行您的应用程序，则 OpenHelper 不会再次使用新值执行“onCreate”。我的建议是您首先删除表（在模拟器上，转到设置> 应用程序> Yourapp > 单击“清除数据”按钮），然后取消注释“zahl”行（尤其是在 DatenbankManager.java 中），然后重新编译 + 运行。使用空数据库再次运行您的应用程序，将重新创建包含“zahl”列的表。托马斯。

# c# - 异步编程与线程有什么不同？

> ID：10960998
> 
> 赞同：33
> 
> 时间：2012-06-09T12:27:49.480
> 
> 标签：c#, asp.net, .net, asynchronous

我一直在`async`这里阅读一些文章：[http](http://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45) ://www.asp.net/web-forms/tutorials/aspnet-45/using-asynchronous-methods-in-aspnet-45 ，作者说：

> 当您进行异步工作时，您并不总是使用线程。例如，当您发出异步 Web 服务请求时，ASP.NET 不会在异步方法调用和等待之间使用任何线程。

所以我想了解的是，`async`如果我们不使用任何线程进行并发执行，它会变成什么？“你并不总是使用线程”是什么意思？

让我首先解释一下我对使用线程的了解（一个简单的例子，当然线程可以在除了 UI 和 Worker 方法之外的不同情况下使用）

1.  你有 UI 线程来接受输入，给出输出。
2.  您可以在 UI 线程中处理事情，但它会使 UI 无响应。
3.  所以假设我们有一个与流相关的操作，我们需要下载某种数据。
4.  我们还允许用户在下载时做其他事情。
5.  我们创建一个新的工作线程来下载文件并更改进度条。
6.  一旦完成，就没有什么可做的，所以线程被杀死了。
7.  我们从 UI 线程继续。

我们可以根据情况在 UI 线程中等待工作线程，但在下载文件之前，我们可以使用 UI 线程做其他事情，然后等待工作线程。

`async`编程不一样吗？如果不是，有什么区别？我读到`async`编程用于`ThreadPool`从中提取线程。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-10T15:27:09.513

异步编程不需要线程。

“异步”意味着 API 不会阻塞*调用*线程。这并不*意味着*有另一个线程*正在*阻塞。

首先，考虑您的 UI 示例，这次使用实际的异步 API：

1.  你有 UI 线程来接受输入，给出输出。
2.  您可以在 UI 线程中处理事情，但它会使 UI 无响应。
3.  所以假设我们有一个与流相关的操作，我们需要下载某种数据。
4.  我们还允许用户在下载时做其他事情。
5.  **我们使用异步 API 来下载文件。**不需要工作线程。
6.  异步操作将其进度报告给 UI 线程（更新进度条），它还将其完成报告给 UI 线程（可以像任何其他事件一样对其进行响应）。

这显示了如何只涉及一个线程（UI 线程），但也有异步操作在进行。您可以启动多个异步操作，但只有一个线程参与这些操作 - 没有线程被阻塞。

`async`/`await`提供了一种非常好的语法来启动异步操作然后返回，并在该操作完成时让方法的其余部分继续。

ASP.NET 与此类似，只是它没有主/UI 线程。相反，它对每个不完整的请求都有一个“请求上下文”。ASP.NET 线程来自一个线程池，它们在处理请求时进入“请求上下文”；完成后，它们退出“请求上下文”并返回线程池。

ASP.NET 会跟踪每个请求的不完整异步操作，因此当线程返回线程池时，它会检查该请求是否正在进行任何异步操作；如果没有，则请求完成。

因此，当您`await`在 ASP.NET 中执行不完整的异步操作时，线程将增加该计数器并返回。ASP.NET 知道请求未完成，因为计数器不为零，因此它不会完成响应。线程返回线程池，此时：*没有*线程在处理该请求。

当异步操作完成时，它将方法的其余部分安排`async`到请求上下文中。ASP.NET 获取其处理程序线程之一（可能与执行该`async`方法的早期部分的线程相同，也可能不同），计数器递减，线程执行该`async`方法。

ASP.NET vNext 略有不同；整个框架对异步处理程序有更多支持。但大体概念是一样的。

了解更多信息：

*   [我的 async/await 介绍帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)试图既是*介绍*，又是如何和工作的*合理完整的图片。*`async``await`
*   官方的[async/await 常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)有很多很棒的链接，其中包含很多细节。
*   MSDN 杂志文章[It's All About the SynchronizationContext](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)揭示了下面的一些管道。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T16:12:01.203

第一次看到**async**和**await**时，我认为它们是异步编程模型的 C# 语法糖。我错了，**async**和**await**不止于此。这是一个全新的异步模式基于任务的异步模式，[http://www.microsoft.com/en-us/download/details.aspx?id=19957](http://www.microsoft.com/en-us/download/details.aspx?id=19957)是一篇不错的入门文章。大多数实现 TAP 的 FCL 类都是调用 APM 方法（BegingXXX() 和 EndXXX()）。以下是 TAP 和 AMP 的两个代码快照：

水龙头样品：

```
 static void Main(string[] args)
    {
        GetResponse();
        Console.ReadLine();
    }

    private static async Task<WebResponse> GetResponse()
    {
        var webRequest = WebRequest.Create("http://www.google.com");
        Task<WebResponse> response = webRequest.GetResponseAsync();
        Console.WriteLine(new StreamReader(response.Result.GetResponseStream()).ReadToEnd());
        return response.Result;
    } 
```

APM 样本：

```
 static void Main(string[] args)
    {
        var webRequest = WebRequest.Create("http://www.google.com");
        webRequest.BeginGetResponse(EndResponse, webRequest);
        Console.ReadLine();
    }

    static void EndResponse(IAsyncResult result)
    {
        var webRequest = (WebRequest) result.AsyncState;
        var response = webRequest.EndGetResponse(result);
        Console.WriteLine(new StreamReader(response.GetResponseStream()).ReadToEnd());
    } 
```

最后这两个会是一样的，因为 GetResponseAsync() 在里面调用了 BeginGetResponse() 和 EndGetResponse()。当我们反射 GetResponseAsync() 的源代码时，我们会得到这样的代码：

```
task = Task<WebResponse>.Factory.FromAsync(
       new Func<AsyncCallback, object, IAsyncResult>(this.BeginGetResponse), 
       new Func<IAsyncResult, WebResponse>(this.EndGetResponse), null); 
```

对于 APM，在 BeginXXX() 中，有一个回调方法的参数，该方法将在任务（通常是 IO 繁重的操作）完成时调用。创建一个新线程并且是异步的，它们都会立即在主线程中返回，它们都是未阻塞的。在性能方面，在处理 I/O 绑定操作（例如读取文件、数据库操作和网络读取）时，创建新线程将消耗更多资源。创建新线程有两个缺点，

1.  就像在您提到的文章中一样，内存成本和 CLR 是
    线程池的限制。
2.  会发生上下文切换。另一方面，异步不会手动创建任何线程，也不会在 IO 绑定操作返回时进行上下文切换。

这是一张有助于理解差异的图片：

![在此处输入图像描述](../Images/63afef23df5b1bbe15d2e8bca62bacb7.png)

此图来自 MSDN 文章“ [ASP.NET 2.0 中的异步页面](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)”，其中非常详细地解释了旧的异步如何在 ASP.NET 2.0 中工作。

关于异步编程模型，请从 Jeffrey Richter 的文章“[实现 CLR 异步编程模型](http://msdn.microsoft.com/en-us/magazine/cc163467.aspx)”中获得更多详细信息，在他的书“CLR via Csharp 3rd Edition”第 27 章中也有更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-10T16:16:00.970

假设您正在实现一个 Web 应用程序，当每个客户端请求进入您的服务器时，您需要发出一个数据库请求。当客户端请求进来时，线程池线程将调用您的代码。如果您现在同步发出数据库请求，线程将无限期地阻塞等待数据库响应结果。如果在此期间另一个客户端请求进来，线程池将不得不创建另一个线程，并且该线程将再次在它发出另一个数据库请求时阻塞。随着越来越多的客户端请求进来，创建的线程也越来越多，所有这些线程都阻塞等待数据库响应。结果是您的 Web 服务器分配了大量几乎没有使用的系统资源（线程及其内存）！更糟糕的是，当数据库确实回复各种结果时，线程变得畅通，它们都开始执行。但是由于您可能有很多线程在运行而 CPU 内核相对较少，因此 Windows 必须执行频繁的上下文切换，这会更加损害性能。这不是实现可扩展应用程序的方法。

为了从文件中读取数据，我现在调用 ReadAsync 而不是 Read。ReadAsync 在内部分配一个 Task 对象来表示读取操作的挂起完成。然后，ReadAsync 调用 Win32 的 ReadFile 函数 (#1)。ReadFile 分配它的 IRP，像在同步场景中一样初始化它（#2），然后将它传递给 Windows 内核（#3）。Windows 将 IRP 添加到硬盘驱动程序的 IRP 队列（#4），但现在，不是阻塞您的线程，而是允许您的线程返回您的代码；您的线程会立即从对 ReadAsync 的调用中返回（#5、#6 和 #7）。现在，当然，IRP 还不一定被处理，因此您不能在 ReadAsync 之后有代码尝试访问传入的 Byte[] 中的字节。