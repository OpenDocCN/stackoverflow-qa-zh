# StackOverflow 问答 10932000-10932999

# extjs - 如何在 Ext JS 4 中创建包含图像的字段类？

> ID：10932002
> 
> 赞同：1
> 
> 时间：2012-06-07T12:41:56.830
> 
> 标签：extjs, extjs4

我正在 Ext JS 4 中创建一个应用程序，但我被卡住了，因为我需要一个包含图像的类以用于**表单**或***字段集*** （如常规**文本字段**）；此外，图像将根据传递给表单的值而变化。类似于*imagefield*的东西：

```
Ext.define('Properties', {
        extend : 'Ext.form.Panel',
        alias : 'properties',
        bodyPadding: 5,
        // The fields
        defaultType: 'textfield',
            items: [{
            fieldLabel: 'Device Name',
            name: 'deviceName'
        },
        {
            xtype:'imagefield',
            fieldLabel: 'Status',
            name: 'status'
        }
        ],....... 
```

我试图扩展**Ext.form.field.Base**没有任何成功。有人可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:54:04.663

有`Ext.Image`你可以使用的类。但是您可能需要将其包装成某种边框并添加逻辑以在运行时加载特定图像。如果你愿意，我可以在今天晚些时候发布一些代码。

更新：我做了这样的事情：

```
Ext.define('QP.view.base.ImageContainer', {
    extend: 'Ext.container.Container',
    alias: 'widget.baseimagecontainer',

    NO_IMAGE_FILE:  'resources/images/no_image.png',
    DOWNLOAD_URL:   '/Image/',
    UPLOAD_URL:     '/UploadImage',
    CLEAR_URL:  '/ClearImage/',

    width: 205,
    layout: 'hbox',

    initComponent: function() {
        var me = this;

        Ext.apply(me, {
            items: [{
                xtype: 'fieldset',
                itemId: 'imageWrapper',
                title: 'Image',
                width: 122,
                height: 140,
                margin: '0 0 0 0',
                layout: 'anchor',
                items: [{
                    xtype: 'image',
                    itemId: 'image',
                    maxWidth: 100,
                    maxHeight: 100
                }]
            }, {
                xtype: 'container',
                margin: '4 0 0 5',
                layout: 'anchor',
                defaults: {
                    xtype: 'button',
                    width: 70,
                    margin: '0 0 5 0'
                },
                items: [{
                    itemId: 'clearButton',
                    text: 'Clear',
                    handler: function() {
                        me.clearImage();
                    }
                }, {
                    xtype: 'fileuploadfield',
                    buttonOnly: true,
                    hideLabel: true,
                    itemId: 'uploadButton',
                    buttonText: 'Upload...',
                    buttonConfig: { width: 70 },
                    listeners: {
                        change: function(el, val) { 
                            // this.up('window').fireEvent('uploadimage', fb, v);
                            me.uploadImage(el, val);
                        }
                    }
                }, {
                    itemId: 'fullResButton',
                    text: 'Download',
                    handler: function() { 
                        window.open(me.fullImagePath);
                    }
                }]
            }]
        });

        me.callParent(arguments);
    },

    success: function() {
        var me = this,
            fs = me.down('[itemId=imageWrapper]'),
            b1 = me.down('[itemId=clearButton]'),
            b2 = me.down('[itemId=fullResButton]');

        fs.enable();
        b1.enable();
        b2.enable();
    },

    loadImage: function(recordId) {
        var me = this,
            fs = me.down('[itemId=imageWrapper]'),
            b1 = me.down('[itemId=fullResButton]'),
            b2 = me.down('[itemId=clearButton]'),
            img = me.down('image');

        me.fullImagePath = me.DOWNLOAD_URL + '/' +recordId;
        me.imageRecordId = recordId;

        fs.disable();
        b1.disable();
        b2.disable();

        img.getEl().on('load', me.success, me, { single: true });
        img.getEl().on('error', function() { 

            img.getEl().un('load', me.success, me);
            img.setSrc(me.NO_IMAGE_FILE);
            fs.enable();

        }, me, { single: true });

        img.setSrc(me.DOWNLOAD_URL + '/' +recordId);
    },

    uploadImage: function(el, val) {
        var me = this,
            fm = Ext.create('Ext.form.Panel', {
                items: [ el ]
            }),
            f = fm.getForm();

        f.submit({
            method: 'POST',
            params: {
                recordId: me.imageRecordId 
            },
            url: me.UPLOAD_URL,
            waitMsg: 'Uploading your image...',
            success: function(fp, o) {
                me.loadImage(me.imageLocation, me.imageRecordId);
            },
            failure: function(fp, o) {
                console.log('upload failed', fp, o);
            }
        });
    },

    clearImage: function() {
        var me = this;

        QP.util.Msg.askConfirmation('Are you sure you want to delete an image?', function() {
            Ext.Ajax.request({
                method: 'GET',
                url: me.CLEAR_URL + me.imageLocation + '/' + me.imageRecordId,
                success: function(fp, o) { me.loadImage(me.imageLocation, me.imageRecordId); },
                failure: function(fp, o) { console.log('upload failed', fp, o); }
            });
        }, me);
    }

}); 
```

# javascript - IE8的淡入PNG修复

> ID：10932010
> 
> 赞同：4
> 
> 时间：2012-06-07T12:42:23.187
> 
> 标签：javascript, jquery, internet-explorer-8, png, cycle

我正在使用[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)来淡入动画。除了在 IE8 中具有半透明像素的 PNG 文件之外，这对所有内容都适用。半透明像素在淡入淡出期间是黑色的。

我尝试过的事情：

*   [Unit PNG](http://labs.unitinteractive.com/unitpngfix.php) : 解决了它，但是把 CSS 搞砸了，甚至让它变得更糟。
*   [jquery.pngFix.js](http://jquery.andreaseberhard.de/pngFix/)：不做任何事情。
*   [Malsup 的循环提示](http://forum.jquery.com/topic/jquery-cycle-plugin-and-png-transparency-in-ie8-and-ie7)：cleartype:false（无结果）和 cleartypeNoBg:true（有效，除了褪色本身）。
*   添加 BG-color: 可行，但我希望背景透明。添加透明BG图像不起作用。
*   尝试[X-UA 兼容模式](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)：不做任何事情。

有什么猜测吗？

JSFiddle在这里：http: [//jsfiddle.net/HaEym/](http://jsfiddle.net/HaEym/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:00:27.250

它并不迷人，但您可以使用 IE 特定的 css hack 将 png 替换为 gif。有一次我必须显示 PNG（因为 gif 是 LQ，所以在动画之后我用 png 替换了 gif。

有关具体示例，请参见另一个[Stack Overflow](https://stackoverflow.com/questions/1204457/how-to-solve-hack-fading-semi-transparent-png-bug-in-ie8)

# linux - 如何生成在文档查看器中工作的纯文本源代码 PDF 示例？

> ID：10932012
> 
> 赞同：5
> 
> 时间：2012-06-07T12:42:23.833
> 
> 标签：linux, pdf, command-line, pdf-generation

我刚刚发现[Adob​​e 论坛：规范中的简单文本字符串示例已损坏。](http://forums.adobe.com/thread/285416)，所以我对查找纯文本源代码 PDF 示例产生了兴趣。

所以，通过那个帖子，我最终发现：

*   网页[PDF 参考和 PDF 规范的 Adob​​e 扩展 | Adobe 开发人员连接](http://www.adobe.com/devnet/pdf/pdf_reference.html)；其中包含：
    *   PDF[文档管理 – 便携式文档格式 – 第 1 部分：PDF 1.7，第一版 (PDF32000_2008.pdf)](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)

PDF 1.7 规范在第 699 页附录“_Annex H（信息性）示例 PDF 文件”；从那里开始，我想尝试“H.3 简单文本字符串示例”（“经典 Hello World”）。

所以我尝试将其另存为`hello.pdf`（_除了注意当您从 PDF32000_2008.pdf 复制时，您可能会得到“ `%PDF-1\. 4`” - 即在 之后插入的空格`1.`，必须删除_）：

```
%PDF-1.4
1 0 obj
  << /Type /Catalog
      /Outlines 2 0 R
      /Pages 3 0 R
  >>
endobj

2 0 obj
  << /Type /Outlines
      /Count 0
  >>
endobj

3 0 obj
  << /Type /Pages
      /Kids [ 4 0 R ]
      /Count 1
  >>
endobj

4 0 obj
  << /Type /Page
      /Parent 3 0 R
      /MediaBox [ 0 0 612 792 ]
      /Contents 5 0 R
      /Resources << /ProcSet 6 0 R
      /Font << /F1 7 0 R >>
  >>
>>
endobj

5 0 obj
  << /Length 73 >>
stream
  BT
    /F1 24 Tf
    100 100 Td
    ( Hello World ) Tj
  ET
endstream
endobj 
```

...我正在尝试打开它：

```
evince hello.pdf 
```

...但是，evince无法打开它：“无法打开文档/PDF文档已损坏”；并且：

```
Error: PDF file is damaged - attempting to reconstruct xref table...
Error: Couldn't find trailer dictionary
Error: Couldn't read xref table 
```

我还检查[`qpdf`](http://qpdf.sourceforge.net/files/qpdf-manual.html)：

```
$ qpdf --check hello.pdf
WARNING: hello.pdf: file is damaged
WARNING: hello.pdf: can't find startxref
WARNING: hello.pdf: Attempting to reconstruct cross-reference table
hello.pdf: unable to find trailer dictionary while recovering damaged file 
```

我哪里错了？

非常感谢您的任何答案，
干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:53:09.103

啊该死的——我只复制了一部分代码；OP 代码是 pg 701 上的代码 - 然后有一个让我感到困惑的页脚；否则代码在 pg 702 上继续`:/`

（*编辑：另请参阅[PDF 简介 - GNUpdf](http://www.gnupdf.org/Introduction_to_PDF)（[存档](http://web.archive.org/web/20140804041530/http://gnupdf.org/Introduction_to_PDF)）以获取类似的更详细的示例*）

所以这里是完整的代码：

```
%PDF-1.4
1 0 obj
  << /Type /Catalog
      /Outlines 2 0 R
      /Pages 3 0 R
  >>
endobj

2 0 obj
  << /Type /Outlines
      /Count 0
  >>
endobj

3 0 obj
  << /Type /Pages
      /Kids [ 4 0 R ]
      /Count 1
  >>
endobj

4 0 obj
  << /Type /Page
      /Parent 3 0 R
      /MediaBox [ 0 0 612 792 ]
      /Contents 5 0 R
      /Resources << /ProcSet 6 0 R
      /Font << /F1 7 0 R >>
  >>
>>
endobj

5 0 obj
  << /Length 73 >>
stream
  BT
    /F1 24 Tf
    100 100 Td
    ( Hello World ) Tj
  ET
endstream
endobj

6 0 obj
  [ /PDF /Text ]
endobj

7 0 obj
  << /Type /Font
    /Subtype /Type1
    /Name /F1
    /BaseFont /Helvetica
    /Encoding /MacRomanEncoding
  >>
endobj

xref
0 8
0000000000 65535 f
0000000009 00000 n
0000000074 00000 n
0000000120 00000 n
0000000179 00000 n
0000000364 00000 n
0000000466 00000 n
0000000496 00000 n

trailer
  << /Size 8
    /Root 1 0 R
  >>
startxref
625
%%EOF 
```

确实，正如错误消息所说，缺少外部参照*部分*！

然而，这还没有结束——虽然这个文档会在 中打开`evince`，但 evince 仍然会抱怨：

```
$ evince hello.pdf 
Error: PDF file is damaged - attempting to reconstruct xref table... 
```

......所以会`qpdf`：

```
$ qpdf --check hello.pdf
WARNING: hello.pdf: file is damaged
WARNING: hello.pdf (file position 625): xref not found
WARNING: hello.pdf: Attempting to reconstruct cross-reference table
checking hello.pdf
PDF Version: 1.4
File is not encrypted
File is not linearized
WARNING: hello.pdf (object 5 0, file position 436): attempting to recover stream length 
```

因此，实际上要获得一个适当的示例，如[Adob​​e 论坛：规范中的简单文本字符串示例已损坏。](http://forums.adobe.com/thread/285416)指出，需要重建外部参照表（具有正确的字节偏移）。

为了做到这一点，我们可以使用`pdftk`“[修复 PDF 损坏的外部参照表和流长度（如果可能）](http://www.pdflabs.com/docs/pdftk-cli-examples/) ”：

```
$ pdftk hello.pdf output hello_repair.pdf 
```

...现在`hello_repair.pdf`打开`evince`没有问题 - 并`qpdf`报告：

```
$ qpdf --check hello_repair.pdf
checking hello_repair.pdf
PDF Version: 1.4
File is not encrypted
File is not linearized
No errors found 
```

好吧，希望这对某人有所帮助，
干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:03:17.227

您应该在文件末尾附加一个（语法正确）`xref`和`trailer`部分。这意味着：PDF 中的每个对象都需要外部参照表中的一行，即使字节偏移量没有正确说明也是如此。然后 Ghostscript、pdftk 或 qpdf 可以重新建立正确的外部参照并渲染文件：

```
[...]
endobj
xref 
0 8 
0000000000 65535 f 
0000000010 00000 n 
0000000020 00000 n 
0000000030 00000 n 
0000000040 00000 n 
0000000050 00000 n 
0000000060 00000 n 
0000000070 00000 n 
trailer 
<</Size 8/Root 1 0 R>> 
startxref 
555 
%%EOF 
```

# c# - 如何更改初始屏幕上的 Textblock 值？

> ID：10932016
> 
> 赞同：0
> 
> 时间：2012-06-07T12:42:43.167
> 
> 标签：c#, windows-phone-7

我正在尝试为我的应用程序制作动画启动画面。我有我的 MainPage，我在其中显示了一个 Popup，它有一个动画和一个文本块。我想更改文本块的文本以显示加载状态，但无法更改。有任何想法吗？

## 主页代码

```
namespace animatedsplash
{
    public partial class MainPage : PhoneApplicationPage
    {
        BackgroundWorker preloader;
        Popup splashPop;

        public MainPage()
        {
            InitializeComponent();
            splashPop = new Popup(){IsOpen = true, Child = new Splash() };
            preloader = new BackgroundWorker();
            RunPreloader();
        }

        private void RunPreloader()
        {
            preloader.DoWork += ((s, args) => {
                  Thread.Sleep(10000);
                  });

            preloader.RunWorkerCompleted += ((s,args) => 
            {
                this.Dispatcher.BeginInvoke(()=> { this.splashPop.IsOpen = false; });
            });

            preloader.RunWorkerAsync();
        }
    }
} 
```

## 启动 xaml

```
<phone:PhoneApplicationPage 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" xmlns:eim="clr-namespace:Microsoft.Expression.Interactivity.Media;assembly=Microsoft.Expression.Interactions"
    xmlns:local="clr-namespace:animatedsplash"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800"
    x:Class="animatedsplash.Splash"
    Orientation="Portrait"
    shell:SystemTray.IsVisible="False">
    <phone:PhoneApplicationPage.Resources>

        <Storyboard x:Name="load">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="image">
                <EasingDoubleKeyFrame KeyTime="0" Value="-180"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="180"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </phone:PhoneApplicationPage.Resources>

    <phone:PhoneApplicationPage.FontFamily>
        <StaticResource ResourceKey="PhoneFontFamilyNormal"/>
    </phone:PhoneApplicationPage.FontFamily>
    <phone:PhoneApplicationPage.FontSize>
        <StaticResource ResourceKey="PhoneFontSizeNormal"/>
    </phone:PhoneApplicationPage.FontSize>
    <phone:PhoneApplicationPage.Foreground>
        <StaticResource ResourceKey="PhoneForegroundBrush"/>
    </phone:PhoneApplicationPage.Foreground>
    <i:Interaction.Triggers>
        <eim:StoryboardCompletedTrigger Storyboard="{StaticResource load}">
            <eim:ControlStoryboardAction Storyboard="{StaticResource load}"/>
        </eim:StoryboardCompletedTrigger>
        <i:EventTrigger>
            <eim:ControlStoryboardAction Storyboard="{StaticResource load}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <!--TitlePanel contains the name of the application and page title--><!--ContentPanel - place additional content here-->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Image Margin="0" Grid.Row="1" Source="/media/splashbg.jpg" Stretch="Fill" d:IsLocked="True"/>
        <Image x:Name="rotator" Margin="96,288,184,312" Grid.Row="1" Source="media/splashpin.png" Stretch="Fill" d:IsLocked="True"/>
        <Image x:Name="image" Margin="142,305,0,370" Grid.Row="1" Source="media/pinload.png" Stretch="Fill" HorizontalAlignment="Left" Width="75" RenderTransformOrigin="0.838,0.504">
            <Image.RenderTransform>
                <CompositeTransform/>
            </Image.RenderTransform>
        </Image>
        <TextBlock x:Name="preloader_percentage" Margin="178,354,0,0" Grid.Row="1" TextWrapping="Wrap" Text="100" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.593" TextAlignment="Right" HorizontalAlignment="Left" Width="35" FontFamily="Segoe WP Semibold" Height="27"/>
        <TextBlock Margin="213,354,0,0" Grid.Row="1" TextWrapping="Wrap" Text="%" VerticalAlignment="Top" HorizontalAlignment="Left" Width="16" FontFamily="Segoe WP Semibold" d:IsLocked="True"/>

    </Grid>
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:39:10.990

像这样的东西怎么样：

在 Splash.xaml.cs 中，您将拥有以下内容：

```
public string Progress
{
    get { return preloader_percentage.Text; }
    set { preloader_percentage.Text = value; }
} 
```

在 MainWindow.xaml.cs 中，您将代码更改为如下所示：

```
preloader.WorkerReportsProgress = true;
preloader.ProgressChanged += (sender, e) =>
    {
        this.Dispatcher.BeginInvoke(() =>
            (this.splashPop.Child as Splash).Progress = e.ProgressPercentage.ToString());
    }; 
```

然后在您的工作方法中，您需要调用预加载器。[ReportProgress()](http://msdn.microsoft.com/en-us/library/a3zbdb1t%28v=vs.95%29.aspx)方法多次。据我所知，应该这样做。

注意：这里有很多设计地雷。我建议让这段代码正常工作，您可以稍后[重构](http://en.wikipedia.org/wiki/Code_refactoring)以使其更清洁、更易于维护。

# eclipse - 通过快捷方式在 Eclipse .jars 中打开类型/资源？

> ID：10932017
> 
> 赞同：10
> 
> 时间：2012-06-07T12:42:43.420
> 
> 标签：eclipse, keyboard-shortcuts

所以在 Eclipse 中，我知道如果我在 Maven 依赖项以及 JDK 中包含了源代码，我可以打开一个类型来查看它的实现（Type `Ctrl+T`）：

![在此处输入图像描述](../Images/9fb3f8a5a3da8005816251db4c177a91.png)

这对`.java`类来说非常有用，但我似乎没有任何快捷方式来打开除 java `.class`es 以外的资源。例如，我做了一些[Clojure](http://clojure.org/)和[JRuby](http://www.jruby.org/)，它们都 .jar 了它们的源代码，而它们通常只是源代码本身。

### 有没有办法获取`Ctrl+T`或“开放资源”等效项 ( `Ctrl+Shift+R`) 来打开 .jar 文件中保存的资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:28:16.563

不，据我所知，eclipse 中没有用于从 jar 中打开资源文件的键盘快捷键。只能访问类`Ctrl+T`。我总是必须使用包资源管理器来导航 jar 文件中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T22:03:13.693

似乎他们已经添加了自 eclipse mars 以来的功能。我不确定哪些版本实际支持此功能，但它不适用于我的 eclipse luna，但它确实适用于 eclipse mars EE。但是，快捷键是 CTRL + O。您可以通过 *.jar 找到。它列出了所有的罐子。这个问题似乎很老了，但是，只要回答一下，它就会对未来的困惑者有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T12:56:12.207

我知道这是一个迟到的答案，但我最近遇到了同样的问题。

这不是快捷方式，但是...您可以在代码中的某处创建一个对象，导入该类，然后单击`Ctrl`或按下`F3`该类，然后砰！你已经在包/项目资源管理器中找到了路径。当然记得打勾`Link with Editor`。

[![](../Images/6f308a3aad0a28888ea7a35d21c21abf.png)](https://i.stack.imgur.com/MpTcD.png)

# sharepoint - 未找到新的 SPWebApplication 应用程序池帐户

> ID：10932021
> 
> 赞同：7
> 
> 时间：2012-06-07T12:42:52.700
> 
> 标签：sharepoint, web-applications, powershell, sharepoint-2010, application-pool

我正在尝试使用 PowerShell 创建一个新的 Web 应用程序。我不断收到错误应用程序池帐户未找到！我该如何解决这个问题？

我尝试将新的 Web 应用程序添加到 DefaultAppPool，如下所示：

```
New-SPWebApplication -Name "Test WebApp" -ApplicationPool "DefaultAppPool" -ApplicationPoolAccount (Get-SPManagedAccount "WIN2K8R2SPTEST\Administrator") 
```

但是 Cmdlet Get-SPManagedAccount 似乎返回一个空字符串。我还尝试将 ApplicationPool 更改为 SharePoint 80。

我在独立安装上运行 SharePoint Foundation 2010。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T03:32:43.757

您必须首先为您的 win2k8r2sptest\administrator 创建一个托管帐户。以下是步骤顺序

```
$cred = get-credential 'win2k8r2sptest\administrator' // enter the password here
$adminMA = New-SPManagedAccount -Credential $cred
New-SPWebApplication -Name 'Test Webapp' -ApplicationPool "DefaultAppPool" -ApplicationPoolAccount $adminMA 
```

我已经在香草 SPS2010 SP1 上对此进行了测试。我认为这个过程也与 Foundation 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T15:21:05.657

就我而言，我已经有了上面@romanrozinov 发布的脚本。但它仍然没有工作。我意识到我必须在 AD 用户中创建一个用户帐户。可以在此处执行步骤 - [http://www.mustbegeek.com/create-user-account-in-windows-server-2008-r2/](http://www.mustbegeek.com/create-user-account-in-windows-server-2008-r2/)

我是 Sharepoint 的绝对初学者，添加一个用户然后在下面运行脚本解决了这个问题：

```
 $cred = get-credential //enter user name and password
$devAccount = New-SPManagedAccount -Credential $cred
New-SPWebApplication -Name 'Test Webapp' -ApplicationPool "DefaultAppPool" -
ApplicationPoolAccount $devAccount 
```

# jquery - 按属性名称搜索 DOM 元素

> ID：10932026
> 
> 赞同：0
> 
> 时间：2012-06-07T12:43:07.073
> 
> 标签：jquery, html

如何搜索（使用 jQuery）具有给定名称（而不是属性值）的属性的 DOM 元素？

例如：

```
<div id="div1">
  <div id="div2" myattr="myvalue">
  </div>
</div> 
```

我想搜索`#div1`（包括）下具有名为属性的每个元素`myattr`（以便`#div2`返回该元素）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:45:08.677

您可以为此使用 jQuery：

```
$('#div1 [myattr]') 
```

`#div1`这将找到具有`myattr`属性（具有任何值）的任何元素。

正如评论者所指出的，这不包括`div1`. 所以将选择器更新为：

```
$('#div1[myattr], #div1 [myattr]') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:45:10.923

使用这个选择器：

```
$('#div1[myattr], #div1 [myattr]') 
```

这将查找所有`#div1`具有该属性`myattr`和具有名为 的属性的**项目** 。`#div1``myattr`

[文档](http://api.jquery.com/attribute-equals-selector/)

# symfony - 对自定义表单类型使用 sonata_type_collection 而不是与另一个实体的属性/关系

> ID：10932028
> 
> 赞同：2
> 
> 时间：2012-06-07T12:43:23.527
> 
> 标签：symfony, symfony-forms, symfony-sonata, sonata-admin

是否可以`sonata_type_collection`针对自定义表单类型而不是与另一个实体的属性/关系使用？

像这样的东西：

```
$formMapper->add('foo', 'sonata_type_collection',
    array('type' => new \myVendor\myBundleBundle\Form\Type\BlockType() 
)); 
```

这引发了以下错误

```
The current field `contingut` is not linked to an admin. Please create one for the target entity : `` 
```

**编辑：**

像这样的东西起到了作用：

```
$formMapper->add('contingut', 'collection', array(                                 
    'type' => new \myVendor\myBundleBundle\Form\Type\Block1Type(),
    'allow_add' => true,
    'allow_delete' => true,
    'by_reference' => false 
)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T08:40:18.020

除了示例中的自定义类型，您还可以使用本机实体类型。

```
$formMapper->add('cars',
                            'collection',
                            array(
                                'type' => 'entity',
                                'allow_add' => true,
                                'allow_delete' => true,
                                'by_reference' => false,
                                'label' => false,
                                'options' => array(
                                    'class' => 'YourBundle:Car',
                                    'property' => 'name',
                                    'label' => false
                                )
                            )
                        ) 
```

# css - Joomla 文章样式

> ID：10932035
> 
> 赞同：0
> 
> 时间：2012-06-07T12:43:40.890
> 
> 标签：css, joomla, article

我想创建一篇包含简历的文章。文章的 HTML 如下所示：

```
<div class="bio-container">
    <div class="bio">
        <img src="images/cv-girl.jpg" border="0" alt="cv-girl" title="cv-girl" /> 
        <ul>
            <li>Position: </li>
            <li>Physics Lab</li>
        </ul>
    </div>

    <div class="bio">
        <h4>Paper blabla</h4>
        <ul>
            <li>paper 1</li>
            <li>paper 2</li>
            <li>paper 3</li>
        </ul>
    </div>

    <div class="bio">
        <h4>Interests</h4>
        <ul>
            <li>Interests 1</li>
            <li>Interests 2</li>
            <li>Interests 3</li>
            <li>Interests 4</li>
        </ul>
    </div>

    <div class="bio">
        <h4>Lessons</h4>
        <ol>
            <li><a href="www.google.com">lesson 1</a></li>
            <li><a href="www.google.com">lesson 2</a></li>
            <li><a href="www.google.com">lesson 3</a></li>
        </ol>
    </div>

    <div class="bio">
        <h4>Publishings</h4>
        <div class="public-menu">
            <a href="#" onclick="showHide('books');return false;">Books</a>
            <a href="#" onclick="showHide('magazines');return false;">Magazines</a>
            <a href="#" onclick="showHide('conf');return false;">Conferences</a>
            <a href="#" onclick="showHide('show');return false;">Shows</a>
            <a href="#" onclick="showHide('disc');return false;">Discography</a>
            <a href="#" onclick="showHide('other');return false;">Other</a>
        </div>
        <hr />

        <div id="books" class="anchor-hidden">
            <h5>Books</h5>
            <table border="0">
                <thead> 
                    <tr>
                        <th>A/A</th><th>Title</th><th>Year</th>
                    </tr>
                </thead> 
                <tbody>
                    <tr>
                        <td>[1]</td>
                        <td>C.K. Georgiadis, P. Fouliras, and A. Manitsaris, "Mobile Agent Platforms and Personalized Multimedia Services Issues", Chapter in "HANDBOOK OF RESEARCH ON MOBILE MULTIMEDIA, 2nd EDITION", I.K. Ibrahim (Ed.), Information Science Reference Inc (IGI Group), September 2008, ISBN 978-1-60566-046-2, pp. 595-611.</td>
                        <td>2008</td>
                    </tr>
                    <tr>
                        <td>[2]</td>
                        <td>S. Weerawarana, F. Curbera, et al., "Αρχιτεκτονική Πλατφόρμας Υπηρεσιών Ιστού", επιστημονική επιμέλεια ελληνικής έκδοσης: Χρήστος K. Γεωργιάδης, εκδόσεις Κλειδάριθμος, σελ. 455, ISBN 978-960-461-086-0, Αθήνα 2008.</td>
                        <td>2008</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- The rest of the divs for the links goes here -->
    </div>
</div> 
```

CSS是：

```
.bio img {
    float: left;
    margin-right: 20px;
    border: 1px inset black;
}

.bio:nth-child(odd){
    background-color: #EAEAEA;
}

.public-menu a {
    margin: 5px;
}

.anchor-hidden {
    /*overflow: hidden;*/
    display: none;
} 
```

JS函数：

```
function showHide(shID) {
    if(shID == "all") {
        document.getElementById("books").style.display = "block";
        document.getElementById("magazines").style.display = "block";
        document.getElementById("conf").style.display = "block";
        document.getElementById("show").style.display = "block";
        document.getElementById("disc").style.display = "block";
        document.getElementById("other").style.display = "block";
    }

    else {
        document.getElementById("books").style.display = "none";
        document.getElementById("magazines").style.display = "none";
        document.getElementById("conf").style.display = "none";
        document.getElementById("show").style.display = "none";
        document.getElementById("disc").style.display = "none";
        document.getElementById("other").style.display = "none";

        document.getElementById(shID).style.display = "block";
    }
} 
```

我使用的模板是[Ja Edenite](http://www.joomlart.com/joomla/templates/ja-edenite)

问题是，当我单击书籍标签时，会显示隐藏的 div，但不会将页脚向下推。（根据 SO 政策，我无法发布屏幕截图，所以......）

文章溢出页脚。到目前为止，我已经尝试了几件事（现在尝试解决这个问题大约 7 个小时），我要么真的很累，要么有一些我没有想到的事情。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:55:41.347

我刚刚把你的代码添加到我自己的页脚 div 中，它对我来说效果很好。

这是我用于页脚的内容：

```
<div id="footer" style="text-align:center; height:50px; background-color:#000; color:#FFF;">
    <p>Test Footer</p>
</div> 
```

不确定您为页脚提供了什么样式，但如果您给它定位例如`position:fixed;`，那么我建议您摆脱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:06:00.267

这可能是由于网站上有浮动内容。尝试在您的文章下方添加以下内容：

```
<div class="clr"></div> 
```

如果您使用的是删除空 div 的编辑器，您还可以使用类似于 bootstrap 的 clearfix ：

```
.bio-container:after {
    clear: both;
}
.bio-container:before, .bio-container:after {
    display: table;
    content: "";
    line-height: 0;
} 
```

希望这可以帮助 ：）

# awk - awk - 从变量追加字段

> ID：10932038
> 
> 赞同：1
> 
> 时间：2012-06-07T12:44:11.170
> 
> 标签：awk

第一次在这里发帖，这是和 awk 的问题。

我有一个看起来像这样的文件：

```
Motif name class from to strand sequence score
>ENSBTAG00000000436                         
MA0079.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.33
... (50 similar lines)
>ENSBTAG00000000380                         
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.03
... (57 similar lines) 
```

等等。请注意，>ENSBTA 行是一组记录的“标签”。所以我想要的是将 >ENSBTA 行作为字段附加到以 MA 开头的行中......即

```
MA0079.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.33 >ENSBTAG00000000436 
```

到目前为止我有

```
awk '{if (NR>1&&NF==1) genename=$1; if (NR>1&&NF>1) print $0, genename}' 
```

这非常接近，但它没有将 ENST 标识符与正确的行保持一致。因此，参考上面的示例，并非文件第二部分的所有 57 行都得到正确的标识符（ENSBTAG00000000380）。

有人可以建议最好的方法吗？

谢谢

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:59:18.893

未经测试，但这样的事情应该接近你想要的：

```
awk '/^>ENSBTAG/{tag=$0;}/^MA/{print $0,tag}' 
```

这基本上表示如果该行在行首匹配“>ENSBTAG”，则将该行保存在一个变量中，但如果它在行首匹配“MA”，则打印附加最新标签的行。

如果您的记录行并不总是匹配“^MA”（示例中的所有行都匹配，但我不想假设），或者如果标签有时看起来有点不同，您需要修改相应的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:11:51.747

这个 oneliner 会给你以下输出（见测试）。第一行`"Motif name class from to strand sequence score"`也会被打印出来。

```
awk '/^>[A-Z]*/{l=$0;next;}{print $0" "l}' file 
```

**测试**

```
kent$  cat a
Motif name class from to strand sequence score
>ENSBTAG00000000436
MA0079.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.33
MA0080.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.34
MA0082.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.35
>ENSBTAG00000000380
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.03
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.04
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.05

kent$  awk '/^>[A-Z]*/{l=$0;next;}{print $0" "l}' a
Motif name class from to strand sequence score 
MA0079.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.33 >ENSBTAG00000000436
MA0080.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.34 >ENSBTAG00000000436
MA0082.2 SP1 Zinc-coordinating 29 38 - agggggtggg 6.35 >ENSBTAG00000000436
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.03 >ENSBTAG00000000380
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.04 >ENSBTAG00000000380
MA0113.1 NR3C1 Zinc-coordinating 92 109 - ccagaaagtgcttctccc 7.05 >ENSBTAG00000000380 
```

# asp.net - 我可以使用服务器名称访问网站，但使用 IP 地址系统提示我需要提供用户名和密码。

> ID：10932042
> 
> 赞同：1
> 
> 时间：2012-06-07T12:44:24.217
> 
> 标签：asp.net, iis, web, security

我已经在服务器上设置了一个测试环境，并且在 IIS 上运行的网站很少。

网站安全设置设置为“集成 Windows 身份验证”，并且未选中匿名访问。

当我使用服务器名称访问网站时，它可以正常工作，但如果我使用 IP 地址，则系统会提示用户名密码窗口。

> 为什么系统提示用户名密码窗口？
> 
> 如何使用 IP 地址和服务器名称访问站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:59:40.297

假设您使用的是 Internet Explorer，当 URL 中有句点时，它认为它是一个外部地址并且不会传递凭据。因此，诸如“10.1.1.1”之类的 IP 地址*将*被视为外部地址，而对于诸如*“myhost”*之类的地址，它认为它是内部地址并传递凭据

看看这个知识库：

*   [http://support.microsoft.com/kb/258063](http://support.microsoft.com/kb/258063)
*   [http://msdn.microsoft.com/en-us/library/bb250483(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb250483(VS.85).aspx)

# mysql - GUID 有哪些好的解决方案？

> ID：10932045
> 
> 赞同：1
> 
> 时间：2012-06-07T12:44:38.820
> 
> 标签：mysql, ruby, ruby-on-rails-3, mongodb

目前，我有一个包含 1300 万行的数据库，我们将`uuid`其用作主键。每次我们进行数据库迁移时，完成一个表需要几个小时。查询性能似乎也很差。

在谷歌搜索和阅读一些博客后，他们建议将 from 转换`uuid`为`binary(16)`，但转换后的值不可读且使用起来非常尴尬。在我的 Ruby 代码中也很难使用。

是否有替代解决方案可以在 MySQL 中获得全局唯一标识符`uuid`？

```
mysql> select UNHEX(REPLACE('A4E7890F-A188-4663-89EB-176D94DF6774','-',''));
+---------------------------------------------------------------+
| UNHEX(REPLACE('A4E7890F-A188-4663-89EB-176D94DF6774','-','')) |
+---------------------------------------------------------------+
| ���Fc��m��gt                                                       | 
```

我查了一下，mongodb也有`ObjectId`，只有12个字节。是否可以在 MySQL 服务器中使用它？我如何利用它在 MySQL 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:07:15.300

### 回答

您将不得不为您的应用程序对此进行测试，但是对于非常大的数据集，如果您执行以下操作，我希望性能会有所提高：

1.  使用[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)列作为主键，因为 MySQL 已为此进行了优化。
2.  索引您的 UUID 列，以便您可以在不进行全表扫描的情况下进行快速查找。

比较冗长的 UUID 不可能像整数键一样有效，因此即使您仍在大量使用 UUID 列，也绝对应该通过这种方式获得性能提升。但是，没有什么可以替代自己进行基准测试。

### 相关问题

[MySQL中的UUID性能？](https://stackoverflow.com/questions/2365132/uuid-performance-in-mysql)

# php - 当双方都有多个值时如何在sql中使用IN语句

> ID：10932048
> 
> 赞同：1
> 
> 时间：2012-06-07T12:44:53.917
> 
> 标签：php, mysql

我有个问题。我想知道`IN`当双方都有多个值时如何使用语句（在查询中） - 我正在编写一个查询：

```
SELECT name FROM math_Details WHERE cric_ids in (1,2,3,4,8); 
```

在此查询问题中，`cric_ids`列中还有多个值通过 (,comma) 分隔；喜欢`(5,9,1,10,2)`

请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:25:42.740

你*可以*[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)重复使用 MySQL 的函数：

```
SELECT name
FROM   math_Details
WHERE  FIND_IN_SET(1, cric_ids) OR FIND_IN_SET(2, cric_ids)
    OR FIND_IN_SET(3, cric_ids) OR FIND_IN_SET(4, cric_ids)
    OR FIND_IN_SET(8, cric_ids) 
```

这样的语句可以在 PHP 中动态构建。例如，在[PDO中使用](http://php.net/pdo)[准备好的语句](https://stackoverflow.com/a/60496/623041)：

```
$set = [1,2,3,4,8];
$sql = 'SELECT name FROM math_Details WHERE FALSE'
     . str_repeat(' OR FIND_IN_SET(?, cric_ids)', count($set));

$qry = $dbh->prepare($sql);
$qry->execute($set) 
```

但是，正如其他人所说，这表明数据库设计不佳。您应该考虑[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的数据结构，以便`cric_ids`您拥有一个`math_Details`与每个`cric`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:18:12.693

oh man, your design is so mess up that what you are asking is almost impossible, what I understand is that you have:

```
 Select name from math_Details where cric_ids in (1,2,3,4,8); 
```

and the column looks like this:

```
| cric_ids |
-------------
|1,2,3,5,4 |
|5,8,6,12,3|
|78,6,2,4,6|
|5,7,8,9,1 | 
```

and you want to be able to make search by digits....

the like wont help you because the result is a string or varchar, so your possible options could be (beside that you need to use a 'like' for each option)

```
critics like '1' //wont work at least you only have 1 in your cric_ids
critics like '%1' // will work only if 1 is the last value
critics like '1%' //will work only if 1 is the first vaue
critics like '%1%' // will give you all values with 1, like 1, 10, 11, 111, 19, etc... 
```

I think you have 2 options,

1.  make a full query and with PHP functions get the values (you can convert it to into an array and get the values), it will be SO SLOW!.....
2.  Redesign your database (recommended) to fix that and futures conflicts.

Please take a look to database entity relationship model and normalization.

# python - 可以对回文程序进行哪些改进？

> ID：10932054
> 
> 赞同：4
> 
> 时间：2012-06-07T12:45:15.817
> 
> 标签：python, palindrome

我只是为了好玩而学习 Python 编程。我正在编写一个回文程序，我想到了如何进一步改进它。

我想到的第一件事是防止程序不得不双向遍历整个单词，因为我们只是在检查回文。然后我意识到只要第一个和最后一个字符不匹配，循环就可以被打破。

然后我在一个类中实现了它们，所以我可以只调用一个词并返回真或假。

这是该程序目前的状态：

```
class my_str(str):
        def is_palindrome(self):
                a_string = self.lower()
                length = len(self)
                for i in range(length/2):
                        if a_string[i] != a_string[-(i+1)]:
                                return False
                return True

this = my_str(raw_input("Enter a string: "))
print this.is_palindrome() 
```

是否有任何其他改进可以提高效率？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T12:49:50.480

我认为在 Python 中~~即兴~~编写回文检查函数的最佳方法如下：

```
def is_palindrome(s):
   return s == s[::-1] 
```

（根据需要添加`lower()`呼叫。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:49:54.350

更简单的东西呢？你为什么要创建一个类而不是一个简单的方法？

```
>>> is_palindrome = lambda x: x.lower() == x.lower()[::-1]
>>> is_palindrome("ciao")
False
>>> is_palindrome("otto")
True 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T12:53:07.213

虽然已经给出了其他答案，讨论了如何最好地解决 Python 中的回文问题，但让我们看看您在做什么。

您正在使用索引遍历字符串。虽然这可行，但它不是很 Pythonic。Python`for`循环旨在循环您想要的对象，而不是像其他语言那样简单地循环数字。这使您可以减少一层间接性并使您的代码更清晰、更简单。

那么，在您的情况下，我们如何做到这一点？好吧，你想要做的是在一个方向和另一个方向上循环字符 - 同时。我们可以使用[`zip()`](http://docs.python.org/library/functions.html#zip)和内置函数很好地做到这一点[`reversed()`](http://docs.python.org/library/functions.html#reversed)。`reversed()`允许我们以相反的方向获取字符，同时`zip()`允许我们一次迭代两个迭代器。

```
>>> a_string = "something"
>>> for first, second in zip(a_string, reversed(a_string)):
...     print(first, second)
... 
s g
o n
m i
e h
t t
h e
i m
n o
g s 
```

这是同时在两个方向上循环字符的更好方法。当然，这不是解决这个问题的最有效方法，但它是一个很好的例子，说明你应该如何在 Python 中以不同的方式处理事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T13:23:12.213

建立在 Lattyware 的答案之上——通过适当地使用 Python 内置函数，您可以避免做类似 的事情`a_string[-(i+1)]`，这需要一秒钟的时间来理解——而且，在编写比回文更复杂的事情时，很容易出现错误。

诀窍是告诉 Python 你要做什么，而不是如何实现它 - 因此，根据另一个答案，最明显的方法是执行以下操作之一：

```
s == s[::-1]
list(s) == list(reversed(s))
s == ''.join(reversed(s)) 
```

或其他各种类似的东西。他们都说：“字符串是否等于向后的字符串？”。

如果由于某种原因你确实需要优化，你知道你有一个回文一旦你做了一半（你通常不应该，但也许你正在处理极长的字符串），你仍然可以做得比 index算术。你可以从：

```
halfway = len(s) // 2 
```

（其中`//`强制结果为整数，即使在 Py3 中或如果你已经完成`from __future__ import division`）。这将导致：

```
s[:halfway] == ''.join(reversed(s[halfway:])) 
```

这将适用于所有 even-length `s`，但对于奇数长度无效，`s`因为 RHS 将是一个更长的元素。但是，你不关心其中的最后一个字符，因为它是字符串的中间字符——这不会影响它的回文性。如果您`zip`将两者放在一起，它将在简短的结束后停止-您可以像在原始循环中一样一次比较一个字符：

```
for f,b in zip(s[:half], reversed(s[half:])):
    if f != b: 
        return False
return True 
```

你甚至不需要`''.join`或`list`这样的。但是你仍然可以做得更好——这种循环是如此地道，以至于 Python 有一个内置函数`all`来为你做这件事：

```
all(f == b for f,b in zip(s[:half], reversed(s[half:]))) 
```

Says 'all the characters in the front half of the list are the same as the ones in the back half of the list written backwards'.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T12:50:32.900

我可以看到的一项改进是使用 xrange 而不是 range。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T15:12:08.590

It probably isn't a faster implementation but you could use a recursive test. Since you're learning, this construction is very useful in many situation :

```
def is_palindrome(word): 
    if len(word) < 2:
        return True 
    if word[0] != word[-1]:
        return False 
    return is_palindrome(word[1:-1]) 
```

Since this is a rather simple (light) function this construction might not be the fastest because of the overhead of calling the function multiple times, but in other cases where the computation are more intensive it can be a very effective construction.

Just my two cents.

# java - 会话范围的支持 bean 是否必须实现线程安全？

> ID：10932066
> 
> 赞同：4
> 
> 时间：2012-06-07T12:46:09.070
> 
> 标签：java, multithreading, jsf, servlets, specifications

是否有可能多个线程同时访问会话范围的支持 bean？

servlet 规范说，有可能：

> 多个执行请求线程的 servlet 可以同时对同一个会话对象进行主动访问。容器必须确保以线程安全的方式执行表示会话属性的内部数据结构的操作。开发人员负责对属性对象本身进行线程安全访问。这将保护 HttpSession 对象内的属性集合免受并发访问，从而消除应用程序导致该集合损坏的机会。

但是我不能让服务器（JBoss）对同一个会话使用不同的线程。当我打开多个选项卡并在一个选项卡中启动长时间运行的请求，然后在另一个选项卡中启动请求时，第二个选项卡必须等待响应，直到第一个选项卡中启动的操作完成。

我还通过在支持 bean 中使用断点阻塞线程来验证这一点。在我恢复线程之前，无法在同一会话的其他选项卡中执行任何操作。

尽管如此，我们在生产日志中有一些奇怪的异常，到目前为止，我们唯一可能的解释是，多个线程同时访问同一个会话范围的支持 bean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:47:18.543

是的，`A Servlet session is thread safe`。但是，如果您将可变对象放入会话中。应用程序应该负责同步。

在你的情况下，`if your Bean is Mutable i.e, has state. Yes it has to be thread safe.`

关于您的测试用例，这取决于您使用的浏览器。大多数浏览器最多支持每台服务器并行连接 6 个。但是，如果有 cookie，不确定他们是否使用并行连接。

# php - 我可以将会话值从一个浏览器转移到另一个浏览器吗？

> ID：10932076
> 
> 赞同：3
> 
> 时间：2012-06-07T12:47:04.960
> 
> 标签：php

我需要将一个浏览器中的会话值传输到我网站中的另一个浏览器

例如从 Firefox 到 Google Chrome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:51:14.770

即使使用 JS，也不可能`$_SESSION`在浏览器之间传输 PHP 变量或任何其他值。

如果您的网站包含登录信息，您可以将信息附加到数据库中的该登录信息，并在用户使用其他浏览器登录时检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:53:44.460

您可以使用会话 ID 设置自己的 cookie，并为所有域使用共享会话数据库。这将需要在实施您自己的会话时做一些工作。

[跨域 Cookie](https://stackoverflow.com/questions/3342140/cross-domain-cookies)

# java - 如何将操作命令设置为窗口关闭事件？

> ID：10932079
> 
> 赞同：0
> 
> 时间：2012-06-07T12:47:10.360
> 
> 标签：java, swing, jframe, windowlistener

如何将动作命令设置为作为子类的自定义框架类的关闭事件`javax.swing.JFrame`？

这是当前代码：

```
this.addWindowListener(new WindowAdapter() {
  @Override
  public void windowClosing(WindowEvent e) {
    // some stuff here
  }
}); 
```

进入的代码`// some stuff here`与标有 的按钮共享`quit`。对于按钮，我设置了一个动作命令`"quit"`并将侦听器设置为一个名为的外部类`NavigationHandler`，该类`actionPerformed`的 case 为`"quit"`. 如果我可以将我的窗口关闭事件的操作命令设置为`"quit"`，我也可以为窗口使用相同的侦听器。

目前我有一个从两个站点调用的方法，但感觉不干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:49:47.690

尝试如下

**要重用相当按钮的 actionListener，您可以单击 windowClosing 中的相当按钮。**

从代码调用[doclick()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/AbstractButton.html#doClick%28%29)方法中单击按钮。[例子](http://www.java2s.com/Tutorial/Java/0240__Swing/CallbuttondoClickmethodtosimulateaclickaction.htm)

```
quitButton.doClick(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:49:25.350

您想向 JFrame 添加一个[WindowListener](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)，它可以让您获得关闭事件。

```
frame.addWindowListener(new MyWindowListener());
...
public class MyWindowListener extends WindowAdapter {
    public void windowClosing(WindowEvent e) {
      // do something
    }
} 
```

# jira - 如何在 JIRA 中获取 ComponentManger 对象

> ID：10932084
> 
> 赞同：0
> 
> 时间：2012-06-07T12:47:22.070
> 
> 标签：jira, jira-plugin

直接`import com.atlassian.jira.ComponentManager`在java文件中不起作用。

`atlassian-create-jira-plugin-module`然后选择**Component Import**并指定 com.atlassian.jira.ComponentManager 也不会。

我查看了一些教程，但没有得到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:10:33.020

使用`ComponentAccessor`类。

Jira 5.0 的答案在这里：[https](https://answers.atlassian.com/questions/73426/how-do-i-import-com-atlassian-jira-componentmanager) ://answers.atlassian.com/questions/73426/how-do-i-import-com-atlassian-jira-componentmanager 。

# android - 如何在触摸时删除 ItemOverlay 并在触摸时添加另一个？

> ID：10932090
> 
> 赞同：0
> 
> 时间：2012-06-07T12:47:42.650
> 
> 标签：android

这是 MapOverlay：

```
class MapOverlay extends com.google.android.maps.Overlay
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {

            return true;

    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   
        //---when user lifts his finger---
        if (event.getAction() == 1) {                
            GeoPoint p = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());

            List<Overlay> mapOverlays = mapView.getOverlays();
            Drawable drawable = getResources().getDrawable(R.drawable.splash_logo);
            ItemizedOverlay itemizedoverlay = new ItemizedOverlay(drawable, getApplicationContext());

            OverlayItem overlayitem = new OverlayItem(p, "I'm in LA!");
            itemizedoverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedoverlay);

            mapView.invalidate();

            Geocoder geoCoder = new Geocoder(
                getBaseContext(), Locale.getDefault());
            try {
                List<Address> addresses = geoCoder.getFromLocation(
                    p.getLatitudeE6()  / 1E6, 
                    p.getLongitudeE6() / 1E6, 1);

                 String add = "";
                if (addresses.size() > 0) 
                {
                    for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                         i++)
                       add += addresses.get(0).getAddressLine(i) + "\n";
                }

                //Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
                addr = add;
            }
            catch (IOException e) {                
                e.printStackTrace();
            }   

            return true;
        }
        else                
            return false;
    }        
} 
```

这是 ItemizedOverlay：

```
class ItemizedOverlay extends com.google.android.maps.ItemizedOverlay<OverlayItem>{

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private Context mContext;

    public ItemizedOverlay(Drawable defaultMarker) {
     super(boundCenterBottom(defaultMarker));
    // TODO Auto-generated constructor stub
    }
    public ItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
      return mOverlays.get(i);
    }

    @Override
    public int size() {
      return mOverlays.size();
    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void removeOverlay(OverlayItem overlay) {
        mOverlays.remove(overlay);
        populate();
    }

    public void clear() {
        mOverlays.clear();
        populate();
    }

    @Override
    protected boolean onTap(int index) {
      OverlayItem item = mOverlays.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
    }

} 
```

我可以添加多个项目覆盖，但无法调用 clear 以便删除 itemziedoverylay 项目。

我想要做的是：当我触摸地图的特定点时，应该删除以前的逐项叠加层，并在该点创建一个新的叠加层。我知道我必须调用 clear() 但无法弄清楚我应该在哪里做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:02.647

嗨，您必须在 mapoverlay 类中编写此代码

`if (itemizedoverlay != null) { itemizedoverlay.overlayClear(); }`

# javascript - 如何调试混淆的 JavaScript？

> ID：10932095
> 
> 赞同：12
> 
> 时间：2012-06-07T12:47:47.027
> 
> 标签：javascript, html, debugging

我需要像这个例子一样调试混淆的 JavaScript：

```
__d("DataStore",[],function(a,b,c,d,e,f){var g={},h=1;function i(l){if(typeof l=='string'){return 'str_'+l;}else return 'elem_'+(l.__FB_TOKEN||(l.__FB_TOKEN=[h++]))........ 
```

嵌入在 MSIE、Opera 和 Chrome 中的 JavaScript 调试器不理解 JS 使用分号而不是 CRLF 作为换行符；所以调试这样的脚本是不可能的，因为整个函数都位于一个大行上，并且调试器总是突出显示这一行，不允许我查看实际执行的代码部分。

有没有办法调试包含很长代码行并且不使用 CRLF 分隔代码行的 JavaScript 文件？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-07T12:50:41.947

Chrome devtools“脚本/源”窗格具有“漂亮打印”模式（`{}`在底部工具栏中查找按钮）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:52:26.423

使用 Javascript Beautifier 重新格式化代码，然后调试代码。

查看[http://jsbeautifier.org/](http://jsbeautifier.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:51:03.643

谷歌浏览器有一个“漂亮的打印”功能，允许重新缩进代码。

我通常不使用它，所以我不知道它什么时候存在，但它存在于 Chrome 21 dev 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:52:04.007

对此没有单一的解决方案。你可以做的第一件事就是将 javascript 代码复制/粘贴到[http://jsbeautifier.org/](http://jsbeautifier.org/)

# entity-framework-4.3 - Entity Framework 4.3 如何保存列值记录之间互斥？

> ID：10932102
> 
> 赞同：0
> 
> 时间：2012-06-07T12:48:10.730
> 
> 标签：entity-framework-4.3

有什么方法可以保存记录之间互斥的特定列值。

例如：我有一个地址表，我想将“IsPrimaryAddress”列保存为真。因此，当我添加 IsPrimaryAddress 值为 True 的同一个人的第二个地址记录时，我想将其他具有 IsPrimaryAddress 值的记录更新为空，以便只有一个地址具有 IsPrimaryAddress 值 =True

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:00:10.627

那是你的领域逻辑，你必须在你的应用程序中实现它。EF 不会帮助您处理域逻辑——它是数据访问的框架。只有在您创建插入/更新触发器时，数据库才能处理此问题，而这是实现域逻辑的非常丑陋的方式。

# python - 为 Python 安装 SOAP

> ID：10932103
> 
> 赞同：0
> 
> 时间：2012-06-07T12:48:13.583
> 
> 标签：python, soappy, pyxml

我是 Python 新手，试图通过基于“深入 Python”一书的教程来学习它。我已经在关于 SOAP 的章节中，当我尝试安装所有必需的库以使用 SOAP 时遇到了一些问题。该教程说我需要3个库：

PyXML、fpconst、SOAPpy

我已经成功安装了 fpconst。但是我不能安装另外两个。我在某个论坛上读到，要安装 SOAPpy，我需要已经安装 PyXML，所以问题可能只出在第一个库中。

我按照自述文件中的说明进行操作，但出现了一些错误，我真的不知道出了什么问题以及如何解决它。有关详细信息，请参阅屏幕。我的 Python 版本是 2.7.2+，我正在尝试安装 PyXML 版本 0.8.4。

![错误截图。](../Images/16177995d7796dcc3cd0ba3780f7814b.png) [全尺寸](https://i.stack.imgur.com/rDas5.png)

错误表明此类文件或目录不存在。我正在使用 Ubuntu 11.10。

PS：啊！我忘了提那个。我从这个来源下载了 PyXML：

[http://sourceforge.net/projects/pyxml/](http://sourceforge.net/projects/pyxml/)

它在这里写道，它已经过时，不应该使用它。那么 PyXML 的替代品是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:02:42.027

如果您使用的是 Ubuntu，为什么不使用您的包管理器安装这些？

```
sudo apt-get install python-lxml python-fpconst python-soappy 
```

包管理器应该是您在 Linux 发行版中安装任何软件的首选方式 - 它会让您的生活更轻松，并确保您保持最新状态并轻松卸载它们。

如果做不到这一点，您还可以使用[PyPi - Python 包索引](http://pypi.python.org/pypi)。

```
pip install lxml
pip install fpconst
pip install soappy 
```

# jakarta-ee - Mule ESB和java企业应用服务器的区别

> ID：10932104
> 
> 赞同：4
> 
> 时间：2012-06-07T12:48:19.947
> 
> 标签：jakarta-ee, comparison, mule

我目前正在观看[Mule 101: Demonstrations of all things Mule](http://www.mulesoft.com/webinars/mule-101-demonstrations-all-things-mule-0)教程，因为我愿意了解整个[企业服务总线](http://en.wikipedia.org/wiki/Enterprise_service_bus)的内容。本教程与我看过的关于应用程序服务器或 PaaS 的许多其他教程很相似。

Mule ESB 和 Glassfish 域管理服务器（例如）有什么区别？

*   您可以在一个集群中启动多个应用程序。检查！
*   您获得了包含内聚原子服务的模块化架构。检查！
*   您获得了水平可扩展性。检查！
*   一个负载均衡器后面的多个物理服务器。检查！
*   基于不同语言的服务器之间的互操作性 - 例如 Glassfish 和 IIS 之间的通信。好的，如果您使用规范的数据模型（REST、SOAP、XML），您应该不会遇到很大的问题。半检！

Mule ESB 有哪些现代应用服务器没有的功能？

抱歉，对于不是这样 StackOverflow 类型的问题，我知道这里不容忍没有明确答案的比较问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:44:47.227

> Mule ESB 有哪些现代应用服务器没有的功能？

Mule ESB 可以运行 Mule 应用程序，这是一种主要处理集成任务的专有类型的应用程序。

来自[Mule 应用程序架构文档](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Application+Architecture)：

> 在最简单的层面上，Mule 应用程序一次接受一个连续的消息，然后按照接收到的顺序处理每条消息。有时，Mule 应用程序会向原始消息的来源返回不同的消息。在其他情况下，应用程序可能会将消息以其原始或更改的形式发送给一个或多个第三方。或者它可能两者兼而有之。

从[Application Format](http://www.mulesoft.org/documentation/display/MULE3USER/Application+Format)文档中，Mule 应用程序是：

> *   压缩文件。是的，这是一个带有“zip”扩展名的常规存档。
> *   同一个 zip 的解压版本（爆炸的应用程序）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T18:21:26.250

每个都专注于不同的应用程序领域。Mule 是服务总线，Glassfish 是应用程序容器。正如您所注意到的，就像许多工具一样，它们在某种程度上是可以互换的，但每种工具都有不同的优势。

Mule 提倡[面向服务的架构](http://en.wikipedia.org/wiki/Service-oriented_architecture)视图。它通过配置将服务相互连接。在这方面，它就像一个[消息传递基础架构](http://en.wikipedia.org/wiki/Message-oriented_middleware)，例如 JMS、Apache Camel 等。代替企业 bean，它提供了将服务粘合在一起的“组件”。但理想情况下，这些是无状态且轻量级的。事件驱动架构试图实现一个高效的解决方案，例如异步消息传递、非阻塞 IO 和消息传递保证。

虽然可以在 ESB 内构建整个应用程序，但结果更像是一[台 Rube Goldberg 机器](http://www.youtube.com/watch?v=qybUFnY7Y8w)。

Glassfish 促进了[n 层应用程序](http://en.wikipedia.org/wiki/Multitier_architecture)视图。[它的技术解决了标准模型-视图-控制器范式](http://java.sun.com/blueprints/patterns/MVC-detailed.html)的每一层等等。它支持非常抽象的应用程序，但是虽然它为服务和消息传递提供[适配器](http://mq.java.net/)，但它要么是外部独立服务，要么是解耦的（通过 RMI 或 IIOP）。该设计侧重于鲁棒性和安全性而不是性能，并允许容器代表组件保证安全性和可靠性。

您无法控制企业 bean 之间的内部消息传递，例如，您无法重新路由请求、切换到异步调用 bean 或做出性能保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T10:10:43.303

Mule ESB 有哪些现代应用服务器没有的功能？Mule ESB 可以运行 Mule 应用程序，这是一种主要处理集成任务的专有类型的应用程序。

来自 Mule 应用程序架构文档：

在最简单的层面上，Mule 应用程序一次接受一个连续的消息，然后按照接收到的顺序处理每条消息。有时，Mule 应用程序会向原始消息的来源返回不同的消息。在其他情况下，应用程序可能会将消息以其原始或更改的形式发送给一个或多个第三方。或者它可能两者兼而有之。

# vim - vim中的映射键盘键不响应控制键

> ID：10932105
> 
> 赞同：2
> 
> 时间：2012-06-07T12:48:23.833
> 
> 标签：vim, keymapping

我正在使用以下映射来管理窗口大小：

```
:nnoremap <kPlus> <C-W>+
:nnoremap <kMinus> <C-W>-
:nnoremap <kDivide> <C-W><
:nnoremap <kMultiply> <C-W>> 
```

地图窗口跳转添加控件前缀没有任何效果：

```
:nnoremap <C-kDivide> <C-W>h
:nnoremap <C-kMultiply> <C-W>l 
```

按下`<C-kMultiply>`的作用与`<kMultiply>`

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T07:17:07.850

扩展 ZyX 所说的：

类似的键`<C-kMultiply>`在 GVim 中可以正常工作，它从 GUI 环境接收键盘输入，但是由于在其中定义控制字符的古老方式，它们不可能在用作终端 Vim 输入的流中表示：

> [控制字符如何映射到键盘](http://en.wikipedia.org/wiki/Control_character#How_control_characters_map_to_keyboards)（维基百科）

控制修饰符通过简单地将两个高位归零来工作，例如`G`(​<strong>10​00111) 变为`BEL`(​<strong>00​00111)。这意味着它只能使用单字节字符代码：无法将其应用于多字节转义序列，例如`<kMultiply>`实际发送的内容。

（这也是为什么您通常不能在终端中`Ctrl`与, 结合使用：一旦高位清零，`Shift`两者`<C-G>`并最终成为相同的控制字符。）`<C-g>`

面对这种无法表示的组合键会发生什么因终端而异：`xterm`例如，将忽略修饰符并发送`<C-kMultiply>`as `<kMultiply>`，而`gnome-terminal`将完全拒绝发送按键。

# android - 安卓动画？

> ID：10932112
> 
> 赞同：0
> 
> 时间：2012-06-07T12:49:11.683
> 
> 标签：android, mobile, opengl-es

我想创建一个 android 游戏，但我不明白的一件事是我应该使用什么来为其创建图形，

这将是一个带有可移动图像的 2d 游戏，但我会使用**OpenGL ES**还是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:28:01.620

[LibGDX](http://code.google.com/p/libgdx/)是一个快速的库，本质上是 OpenGL 的包装器，可为您节省大量时间。不幸的是，它周围的文档严重缺乏，所以学习曲线相当陡峭，但是一旦你习惯了这个库，开发就会非常快。

它还为您提供了将代码作为 java 应用程序而不是 android 模拟器运行的选项，这可以节省大量时间。

wiki 上有一些很好的教程可以帮助您入门，但您最终将不得不依赖 Java 文档和测试代码来了解如何正确使用该库。

还有其他选项，例如[AndEngine](http://www.andengine.org/)，它更容易学习，但灵活性较低且运行速度较慢，因此最终使用 LibGDX 会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:54:19.180

您应该使用 OpenGL ES 以获得最佳性能。或者，您可以使用 Canvas 绘图，这是 Android 中的默认绘图方式...

但是创建 Android 游戏的最简单方法可能是使用 [Unity 3D](http://unity3d.com/) ... 不是 Java 开发 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:57:18.060

通过[libgdx 试试](http://code.google.com/p/libgdx/)

它很容易使用。

谢谢

# javascript - javascript中函数执行的优先级

> ID：10932115
> 
> 赞同：-2
> 
> 时间：2012-06-07T12:49:17.387
> 
> 标签：javascript, function, settimeout, order-of-execution

我不明白为什么第二个函数调用（在函数体之后）优先于函数体内部的调用？

```
function a(){
  var num = 5;
  console.log( ++num );
  setTimeout( a, 100 );
};
setTimeout(a,2000) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T12:56:45.987

按年代顺序：

*   您正在定义函数`a` **而不**调用它

*   您计划`a`在两秒钟后被调用：`setTimeout(a,2000)`

*   它被称为

*   当它被调用时，它会安排自己在 100 毫秒后调用

您的代码基本上会休眠 2 秒，然后`a`以 100 毫秒的暂停^([*])执行。

但是，根据您的上下文判断，您在问以下情况下的优先级是什么：

```
setTimeout(a, 2000);
setTimeout(b, 100); 
```

好吧，很可能`b`会首先被调用（假设第一行和第二行之间没有不可预测的暂停，例如由于整体操作系统性能问题）。

如果您使用相同的超时：

```
setTimeout(a, 100);
setTimeout(b, 100); 
```

`a`很可能会首先被调用。但是我不认为这是有保证的，并且取决于 JS 引擎（它是否对即将发生的事件使用严格的 FIFO 列表，内部时钟分辨率是多少等）

^([*] 你可以通过使用**once来实现***类似*的行为。`setInterval()`)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:55:15.730

该函数`a`没有被调用，只是被定义。实际运行的代码是 的定义`a`，然后`setTimeout(a,2000)`被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:42:56.717

我认为

```
function a () {
    var num = 5;
    console.log( ++num );
    setTimeout( a, 100 ); 
}; 
```

是一个函数体，在此之后我们调用。我不认为这是一个等级问题。**

# c# - 列表框滚动到 wp7 结束

> ID：10932121
> 
> 赞同：1
> 
> 时间：2012-06-07T12:49:29.467
> 
> 标签：c#, silverlight, windows-phone-7, xaml, silverlight-toolkit

我的 wp7 应用程序中有这样的列表框

```
 <ListBox Name="lstSelectedNumber" Height="50" MaxHeight="120" VerticalAlignment="Top" Grid.Column="1" SelectionChanged="lstSelectedNumber_SelectionChanged">
                            <ListBox.ItemContainerStyle>
                                <Style TargetType="ListBoxItem">
                                    <Setter Property="Padding" Value="-15" />
                                    <Setter Property="Margin" Value="0"/>
                                </Style>
                            </ListBox.ItemContainerStyle>
                            <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <toolkit:WrapPanel>
                                    </toolkit:WrapPanel>
                                </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                    <TextBox x:Name="txtNumber" Text="{Binding Name,Mode=TwoWay}" IsEnabled="{Binding IsEnabled,Mode=TwoWay}" Background="Transparent" Foreground="{StaticResource ContactSelectorBrush}" Style="{StaticResource DialNumberStyle}" FontSize="24" KeyUp="txtNumber_KeyUp">
                                        <TextBox.CaretBrush>
                                            <SolidColorBrush Color="{StaticResource CaretBrush}" />
                                        </TextBox.CaretBrush>
                                    </TextBox>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox> 
```

在我的列表框的数据模板中有一个名为“txtNumber”的文本框。我正在调用它的 Textchange 事件，并且`textchange`我正在做一些这样的操作

```
TextBox txtbox = sender as TextBox;
                Dispatcher.BeginInvoke(() =>
                {
                    ContactModel model = lstContactModel.LastOrDefault();
                    if (string.IsNullOrEmpty(model.Name) && string.IsNullOrEmpty(model.Phone))
                    {
                        lstContactModel.Remove(model);
                        lstContactModel.Add(new ContactModel { Name = txtbox.Text, Phone = txtbox.Text + ",", IsEnabled = false });
                    }

                    lstSelectedNumber.ItemsSource = null;
                    lstSelectedNumber.ItemsSource = lstContactModel;
                    var Selecteditem = lstSelectedNumber.Items[lstSelectedNumber.Items.Count - 1];
                    lstSelectedNumber.ScrollIntoView(Selecteditem);
                    lstSelectedNumber.UpdateLayout();
                }); 
```

我将新项目添加到我的列表中，然后重新绑定到我的列表框，我正在滚动到列表框的末尾，但它不起作用。

它表现出非常奇怪的行为。一旦此语句运行，它将添加项目并将焦点转到不在此列表框中的另一个文本框（它是我的 wp7 页面中的下一个控件）。谁能建议其中有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:03:46.667

是否有原因，为什么您删除`ItemsSource`并重新设置它。我建议使用一个`ObservableCollection`并让`DataBinding`引擎发挥它的魔力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:59:31.750

```
lstbox.Dispatcher.BeginInvoke(() =>
                {
                    lstbox.ItemsSource = null;
                    lstbox.ItemsSource = lstContactModel;
                    var Selecteditem = lstbox.Items[lstbox.Items.Count - 1];
                    lstbox.ScrollIntoView(Selecteditem);
                    lstbox.UpdateLayout();
                }); 
```

# javascript - 回溯 Javascript

> ID：10932123
> 
> 赞同：1
> 
> 时间：2012-06-07T12:49:30.680
> 
> 标签：javascript, apache, ubuntu

我正在使用 apache 2.2.14 运行完整的 Backtrack 5 R2 (ubuntu) 安装。我尝试运行一个简单的 index.html 文件，其中包含一些 javascript 代码。由于某种原因，javascript 代码没有出现。我正在运行一个完全标准版本的 apache 我没有更改单个配置文件。那么为什么我的javascript代码没有出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:05:48.437

您是否尝试使用其他浏览器？

请确保在 FireFox 中禁用扩展[NoScript ！](https://addons.mozilla.org/en-US/firefox/addon/noscript/)

（NoScript 允许 JavaScript、Java 和其他可执行内容仅从您选择的受信任域运行）

# cakephp - Cake PHP complex find 'OR' 在 null 和空字符串下无法正常工作

> ID：10932126
> 
> 赞同：4
> 
> 时间：2012-06-07T12:49:39.420
> 
> 标签：cakephp, cakephp-1.3

Cake PHP 复杂的 find 'OR' 运算符在 null 下无法正常工作...

```
$conditions = array(
    'Person.id' => array(2, 4, 1, 23, 45, 11),
    'OR' => array(
    array(
        array('NOT' => array('Person.image' => null)),
        array('NOT' => array('Person.image' => '')),
    ),
    array(
        array('NOT' => array('Person.photos' => null)),
        array('NOT' => array('Person.photos' => '')),
    )
    )
); 
```

对应的cake sql dump输出查询如下

```
SELECT `Person`.`id`, `Person`.`created`, `Person`.`modified` 
FROM `people` AS `Person` WHERE `Person`.`id` IN (2, 4, 1, 23, 45, 11)  AND 
((((NOT (`Person`.`image` IS NULL)) AND (NOT (`Person`.`image` = NULL))))   OR 
(((NOT (`Person`.`photos` IS NULL)) AND (NOT (`Person`.`photos` = ''))))) 
ORDER BY FIELD(`Person`.`id`, 2, 4, 1, 23, 45, 11) ASC LIMIT 3 
```

在 cake 条件数组中，我给出`Person.image`的不是`null`or `''`，而是对应的 cake sql 输出`(NOT (Person.image IS NULL)) AND (NOT (Person.image = NULL))`应该是这样的`(NOT (Person.image IS NULL)) AND (NOT (Person.image = ''))`。

这里**`Person.image`**两者都与 NULL 本身（**IS NULL**和**= NULL**）进行比较，其中**Person.image = NULL**想要与空字符串（如**Person.image = '' ）**进行比较。

这里`'Person.image'`是`'INT'`和`'Person.photos'`是`'VARCHAR'`类型，但是从当前阶段很难改变类型。

如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:16:47.370

您不必强制使用关联数组来定义条件。您可以像这样定义它：

```
$conditions = array(
    'Person.id' => array(2, 4, 1, 23, 45, 11),
    'OR' => array(
    array(
        array('NOT' => array('Person.image' => null)),
        array('NOT' => array('Person.image = "" ')),
    ),
    array(
        array('NOT' => array('Person.photos' => null)),
        array('NOT' => array('Person.photos = "" ')),
    )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:53:33.340

解释可能存在问题`'Person.image <>' => null`，因为它不是严格有效的 SQL（至少在 MySQL 中不是）。

从[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)：

> 您不能使用算术比较运算符（例如 =、< 或 <>）来测试 NULL。

您可以尝试用否定的空比较替换它：

```
array('NOT' => array('Person.image' => null)) 
```

除此之外，最后两个`OR`运算符什么也不做，因为每个运算符只有一个语句。您的数组是否嵌套了您所说的内容？如果您添加换行符和缩进，您的代码将变为

```
$conditions = array(
    'Person.id' => array(2, 4, 1, 23, 45, 11),
    'OR' => array(
        array(
            'OR' => array(
                'Person.image <>' => null
            ),
            array(
                'Person.image <>' => ''
            )
        ),
        array(
            'OR' => array(
                'Person.photos <>' => ''
            ),
            array(
                'Person.photos <>' => null
            )
        )
    )
); 
```

...看起来很奇怪。

完整的变化将是：

```
$conditions = array(
    'Person.id' => array(2, 4, 1, 23, 45, 11),
    'OR' => array(
        array(
            array('NOT' => array('Person.image' => null)),
            array('NOT' => array('Person.image' => '')),
        ),
        array(
            array('NOT' => array('Person.photos' => null)),
            array('NOT' => array('Person.photos' => '')),
        )
    )
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:04:20.883

似乎 Cake 的 null 比较取决于数据库字段类型。如果您的字段是整数类型，那么 Cake 会将 '' 重新定义为 Null。Varchars 不会被重新定义。

你能去 MySQL 并将 Person.image 类型更改为 varchar 吗？

如果是这样，请记住清除 app/tmp/cache/models 中的缓存，以便 Cake 注册更改。

**更新：手动更改模式类型将强制 cake 将字段类型视为定义。所以在查询之前这样的事情会起作用：**

```
$this->Person->_schema['image']['type']='string'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T00:27:13.280

抱歉，我认为这些答案不是 100% 正确的，它们提供了解决方法，但没有解决方案。

问题是数据库列类型：

> `Person.image`是`INT`并且`Person.photos`是`VARCHAR`类型

好吧，`''`（空字符串）永远不是整数的有效值。我假设您`NULL`在列上允许了值`Person.image`，所以 cake 做对了！

询问整数字段是否具有空字符串的值是没有任何意义的，它只能是`NULL`、0、1、-1、2、-2 等（如果有符号）。

这里发生的是 cake 知道您的数据结构（注意标志 > 0`DESCRIBE`时的查询`debug`），因此它会尝试将您的语句更正为下一个有用的语句 - 测试`NULL`值。此外，即使您要求 MySQL（或强制 cake 这样做）查询您的数据库，也*不会*因为这种情况而产生任何影响（可能是因为其他情况）：

`SELECT * FROM table WHERE my_int_column = ''`是完全合法的 SQL，但总是返回 0 结果，而`SELECT * FROM table WHERE NOT(my_int_column = '')`总是返回所有结果。

结论：如果您的应用程序现在可以在`=''`条件下运行，那么它在没有条件的情况下将完全相同。

最后说明：但是，您可以`INSERT`将空字符串转换为整数列，MySQL 会将其转换为`0`，因此您可能需要检查这些。

# iphone - 如何在特定索引路径的表格视图中插入单元格中的值？

> ID：10932137
> 
> 赞同：1
> 
> 时间：2012-06-07T12:50:10.230
> 
> 标签：iphone, ios5, uitableview, xcode4.2

我在 tableview 中有一个标签和文本字段，现在我想要的是我在 textfieldDidEditing 方法的文本字段中插入的任何值，它应该计算该值并将其返回到 tableviewvw 的索引路径中的标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:58:35.110

在textfieldDidEditing中，可以获取对应textfield的单元格，计算value赋值给label，如下：

```
yourTableViewCell *cell = (yourTableViewCell *)[[textField superview] superview];
cell.yourLabel.text = value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:56:11.630

```
/* u just give Tag to TextField and in textFieldDidEndEditing, save textfield text into an string and then reload the row...here is the code..also have sample */

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexpath
{
    UITableViewCell *cell = [[UITableViewCell alloc] init];

    UITextField *txtField1 = [[UITextField alloc]initWithFrame:CGRectMake(20, 10, 100, 80)];
    txtField1.tag = indexpath.row;
    txtField1.delegate= self;
    [cell addSubview:txtField1];

    UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(140, 10, 100, 80)];

    [cell addSubview:label1];

    //set text in label ** str1 comes from textFieldDidEndEditing
    label1.text = str1;

    return cell;
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
    //save textField text to any string**declair it global
    str1 = textField.text;

    //reload selected row in table
    NSIndexPath *durPath = [NSIndexPath indexPathForRow:textField.tag inSection:0];
    NSArray *paths = [NSArray arrayWithObject:durPath];
    [tbl reloadRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationRight];
} 
```

# c# - 如果 int 是值类型而 object 是引用类型，因为 object 是 int 的基类，那么为什么会这样呢？

> ID：10932138
> 
> 赞同：-2
> 
> 时间：2012-06-07T12:50:10.980
> 
> 标签：c#

> **可能重复：**
> [值类型与引用类型 - 对象类 C#](https://stackoverflow.com/questions/1205444/value-type-vs-reference-type-object-class-c-sharp)
> [为什么 Int32 是值类型？](https://stackoverflow.com/questions/3753542/why-is-int32-a-value-type)

每个人都知道 object 是任何类型的基类。但是为什么 int 是值类型呢？它应该是引用类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:53:04.687

[Int](http://msdn.microsoft.com/en-us/library/system.int32%28v=vs.80%29.aspx)是一个[结构](http://msdn.microsoft.com/en-us/library/ah19swz4%28v=vs.71%29.aspx)，而不是一个类。所以它是一个值类型。

欲了解更多信息：[请访问此处](http://msdn.microsoft.com/en-us/library/s1ax56ch%28v=vs.80%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:53:40.100

Int 是一个结构 - 值类型定义如下：

```
public struct MyValueType
{
} 
```

引用类型是这样定义的

```
public class MyReferenceType
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:54:19.053

int 不是 ant Object 它是 C# 中的 Primitive 数据类型，它被称为 struct 。 int 的对应 Object 是 Integer。Object 类是所有引用类型的父类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:55:30.617

Object 是`class`任何其他类的基础。int 不是一个类，它是一个结构，你可能在说的是[装箱和拆箱](http://msdn.microsoft.com/en-us/magazine/cc301569.aspx)

# php - jQuery从数据库填充级联下拉列表

> ID：10932140
> 
> 赞同：0
> 
> 时间：2012-06-07T12:50:19.040
> 
> 标签：php, jquery, mysql, drop-down-menu

[网站在这里。](http://comfyshoulderrest.com/guestvibe/index.php)

我正在尝试使一种形式从数据库中触发另一种形式的填充。我已经对 HTML、PHP 和数据库进行了排序，但我正在努力使用 jQuery。

有人能把我引向正确的方向吗？我已经用谷歌搜索死了，但我有点受限于我不知道要搜索什么的事实。

编辑：

这是我听从你的建议的。不幸的是，它仍然无法正常工作。

jQuery：

```
<script type="text/javascript">                       
$('#city').change(function(){
    var $club = $('#club');
    $club.find('option:not([value="default"])').remove(); //Remove previous items
    $.getJSON('GetClubs.php', {city:$(this).val()}, function(clubs){
        $.each(clubs, function(index, city){
            $club.append('<option value="'+city[0]+'">'+city[1]+'</option>');
        });
    });
});
</script> 
```

HTML：

```
<form name="myform" action="" method="POST">
<h1>1\. Choose your city</h1>
<select name="city" class="dropdown" id="city">
<option value="default" disabled="disabled" selected="selected">--- Select your option ---</option>
<?php getCities(); ?>
</select>

<h1>2\. Choose your club</h1>
<select name="club" class="dropdown" id="club">
<option value="default" disabled="disabled" selected="selected">--- Select your option ---</option>
</select>
</form> 
```

PHP：

```
<?php

date_default_timezone_set('Europe/London');

$day = date("l");
$time = date("G");

if ($time >= 21) {
    $day = date('l', strtotime($day .' +1 day'));
    }

$city = $_POST['city'];

if ($day == Monday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY')";
    }

else if ($day == Tuesday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY')";
    }

else if ($day == Wednesday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY')";
    }

else if ($day == Thursday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY')";
    }

else if ($day == Friday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY')";
    }

else if ($day == Saturday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY')";
    }

else if ($day == Sunday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY')";
    }

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
            $items[] = array( $row[0], $row[1] );
            }         
    } 

    mysql_close(); 
    // convert into JSON format and print
    echo json_encode($items);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:07:33.053

[检查这个](http://api.jquery.com/jQuery.getJSON/)

让您的第一个下拉列表在“onChange”事件中调用 jquery 函数。在此函数中 1) 获取所选选项的值，2) 使用上面链接中的示例创建一个 ajax，如下面的代码，并将值传递给您的 GetClubs.php。

```
 $.getJSON('url/GetClubs.php', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<option value="' + key + '">' + val + '</option>');
  });

  $('<select/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('#secondDropdown');
}); 
```

当然，这个例子依赖于 JSON 文件的结构：

```
{
  "one": "Singular sensation",
  "two": "Beady little eyes",
  "three": "Little birds pitch by my doorstep"
} 
```

而已。在第一个选择框中的值更改时填充数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:01:45.437

```
$('#city').change(function(){
    var $club = $('#club');
    $club.find('option:not([value="default"])').remove(); //Remove previous items
    $.getJSON('GetClubs.php', {city:$(this).val()}, function(clubs){
        $.each(clubs, function(index, city){
            $club.append('<option value="'+city[0]+'">'+city[1]+'</option>');
        });
    });
}); 
```

You'll also have to remove the `echo "<option..."`.

You should also have a look at [mysql-real-escape-string](http://php.net/manual/en/function.mysql-real-escape-string.php)

# php - Symfony 2 根据选定的值动态更改表单

> ID：10932142
> 
> 赞同：1
> 
> 时间：2012-06-07T12:50:24.483
> 
> 标签：php, javascript, ajax, symfony

我有下表：

```
Events:
 - Date (date)
 - EventType (varchar)
 - Value (varchar) 
```

EventType 可以有几个值，即签入、结账、房租、杂项等。我想制作一个表单，根据“中选择的类型”将“值”的字段类型更改为文本、日期或实体事件类型”。我试图找到一些解决方案，但没有成功。[我发现的唯一一件事](https://stackoverflow.com/questions/10004759/dynamic-form-with-multiple-choice-fields-symfony2)是我必须使用 queryBuilder 但不明白如何在这里应用它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T13:09:06.943

您应该使用事件订阅者，通过将事件订阅者添加到您的表单，您可以将字段的创建委托给该订阅者。在您的事件订阅者中，您可以检查您的“EventType”并添加适当的“Value”字段。

*   [如何使用表单事件动态生成表单](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

*   [将事件订阅者添加到表单类](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html#adding-an-event-subscriber-to-a-form-class)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:31:44.700

我找到了解决方案。我添加`EventSubscriber`到我的表单并发送带有用户选择的类型的 ajax 请求，让订阅者决定添加什么样的字段。

```
$subscriber = new EventSubscriber($builder->getFormFactory());
$builder->addEventSubscriber($subscriber);

$builder->add('eventType', 'entity', array('class' => 'Bundle:EventType', 'property' => 'eventName', 'required' => true)); 
```

感谢 Ahmed Siouani。

# eclipse - Git 完全取代了历史上的变化。如何恢复文件？

> ID：10932147
> 
> 赞同：-2
> 
> 时间：2012-06-07T12:50:35.677
> 
> 标签：eclipse, git, history, restore

我在 bitbucket 上有 git 存储库。我在 Eclipse 中使用了一段时间，然后将带有本地 git 存储库的 Eclipse 项目复制到文件系统上的另一个位置并在本地工作 3 周。我是 git 的新手，所以我只是按原样复制项目。

昨天我尝试推送本地更改，然后切换到远程分支。现在我在 git-gui 中看到只有旧的 bitbucket 提交，没有新文件。我到处搜索 git-gui。但是存储库的大小告诉我我的新文件仍然存在（在 bitbucket 16mb 上，本地 >300mb）。

`git branch`向我展示了 2 个分支（master 和 *（无分支）），并且都有 bitbucket 提交。我没有创建任何分支，我只是首先从 bitbucket 克隆了 repo，然后进行了提交，然后进行了一些操作，试图推送复制的 repo，然后更改分支。任何关于如何恢复本地文件的想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:53:23.210

我真的很难理解确切的情况。

但是，如果您说所有文件仍在本地存储库中，那么简单：

```
git reflog 
```

是您查看所有分支上最近提交的所有内容。找到您想要返回的正确提交，然后从那里获取。

# sql-server - 如何找到具有行数的不同值？

> ID：10932148
> 
> 赞同：-3
> 
> 时间：2012-06-07T12:50:39.447
> 
> 标签：sql-server, sql-server-2008

我需要很小的要求，我有以下输入。

```
ReportId   ReportName

1            Adhoc
1            Adhoc
2            Financial
2            Financial
2            Financial
3            Dynamic
3            Dynamic
3            Dynamic
3            Dynamic 
```

我需要像这样

```
ReportId   ReportName
    2    Adhoc
    3    Financial
    4    Adhoc 
```

请给我解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:54:28.000

```
select count(*),reportname from tbl group by reportname; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:15:00.487

我认为您在问题中错误地提到了您想要这样的输出。

```
ReportId   ReportName
    2    Adhoc
    3    Financial
    4    Dynamic 
```

以下查询将为您提供上述输出。

```
select Reportname, count(1) as ReportIdcount
from   Reportstb
group by reportname; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T12:53:38.860

```
select count(ReportName) as howMany, ReportName 
from reports
group by ReportName 
order by howMany asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:57:03.577

如果您在第一列中寻找计数，那么这将有所帮助：

```
SELECT Count(ReportName), ReportName FROM Table1 group by ReportName 
```

# javascript - 当我用 Backbone 触发事件时没有任何反应

> ID：10932160
> 
> 赞同：0
> 
> 时间：2012-06-07T12:51:34.083
> 
> 标签：javascript, testing, backbone.js, tdd, jasmine

我尝试开始使用 Backbone。我有以下JS：

```
var Question = Backbone.Model.extend({
    defaults: function() {
        return {
          title: "Enter your question",
          type: "smallTextField",
          editMode: true
        };
      },

    initialize: function() {
          if (!this.get("title")) {
            this.set({"title": this.defaults.title});
          }
        },   

    toggleEditMode: function() {
        !this.get("editMode");
    },

    clear: function() {
        this.destroy();
      }         

}); 
```

收藏：

```
var Questions = Backbone.Collection.extend({
    initialize: function(models, options) {
        this.bind("add", options.view.addQuestionView);
    }
}); 
```

应用视图：

```
var AppView = Backbone.View.extend({
    el: $("body"),

    initialize: function () {
        this.questions = new Questions( null, { view: this });
    },

    events: {
        "click #addQuestion":  "addQuestionModel"
    },

    addQuestionModel: function() {
            var model = new Question();
            this.questions.add(model);
    },

    addQuestionView: function(model) {
        $("#questionBox").append("<div>" + model.get('title') + "</div>");  
    },

}); 

    var appview = new AppView; 
```

和以下 HTML：

```
<div id="questionBox"></div>
<a href="#" id="addQuestion">Add question</a> 
```

在我的 Jasmine 规范中，我触发了 $("#addQuestion").click();

但是 - 当我运行测试时没有任何反应。例如，似乎没有函数绑定到#addQuestion 的点击事件。

我猜有些事情做错了，我根本无法弄清楚它是什么。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:28:40.413

通常当我遇到这个问题时，它与您传递到 Backbone 视图中的对象文字上的属性在 jQuery 和 DOM 完全加载之前被评估的事实有关。

这是一篇[很好的文章](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)，描述了这个问题和几个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:57:23.333

为什么你的 id 中有一个#？是错字吗？尝试删除它（id="addQuestion"）

另外，您确定在触发点击之前已初始化视图吗？通常，当事件未触发时，是因为它们设置在视图范围之外的元素上（例如，在视图“el”中未包含的链接上）。但是由于您使用的是正文，所以我看不出它是如何从那里获得的（除非您在帖子中对其进行了修改）。所以我的猜测是你的 jQuery 选择器在这里并不是很有用。尝试：

```
el: "body" 
```

代替：

```
el: $("body") 
```

# java - 尝试实现 Primefaces 示例时出错

> ID：10932163
> 
> 赞同：2
> 
> 时间：2012-06-07T12:51:41.400
> 
> 标签：java, jsf, jsf-2, primefaces

我设法用 Primefaces 运行 WAB 包。问题是某些示例正在运行，而某些示例在我尝试实现它们时出现问题。我测试了这个例子：

```
 <?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:p="http://primefaces.org/ui"  >
        <h:head>
            <ui:insert name="header">           
                <ui:include src="header.xhtml"/>         
            </ui:insert>
        </h:head>
        <h:body>

            <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
            <!-- layer for black background of the buttons -->
            <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
                <!-- Include page Navigation -->
                <ui:insert name="Navigation">           
                    <ui:include src="Navigation.xhtml"/>         
                </ui:insert>

            </div>  

            <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
                <h:graphicImage alt="Demo edit form"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_linuxz.png" />
            </div>
            <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

                <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                    <div id="settingsHashMap" style="width:350px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                        <h:form>

                            <p:growl id="growl" showDetail="true" sticky="true" />

                            <p:panel header="Growl">
                                <h:panelGrid columns="2">
                                    <h:outputText value="Your Name: *" /> 
                                    <p:inputText value="#{LinuxController.text}" required="true" label="Name"/>
                                </h:panelGrid>

                                <p:commandButton value="Save" actionListener="#{LinuxController.save}" update="growl"/>
                            </p:panel>

                        </h:form>

                    </div>   

                </div>  
            </div>

        </h:body>
    </html>

import javax.faces.bean.ViewScoped;

import java.io.Serializable;

import javax.faces.application.FacesMessage;  
import javax.faces.context.FacesContext;  

// Update form example
@Named("LinuxController")
@ViewScoped
public class Linux implements Serializable {

    public Linux() {  
    }  

    private String text;

    public String gettext() {
        return text;
    }
    public void settext(String text) {
        this.text = text;
    }

    public void save(ActionEvent actionEvent) {
        FacesContext context = FacesContext.getCurrentInstance();

        context.addMessage(null, new FacesMessage("Successful", "Hello " + text));
        context.addMessage(null, new FacesMessage("Second Message", "Additional Info Here..."));
    }

} 
```

这是 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.DX_57</groupId>
    <artifactId>History-Module-57</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>

    <name>History-Module-57</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>

        <dependency>  
            <groupId>org.primefaces</groupId>  
            <artifactId>primefaces</artifactId>  
            <version>3.3</version>  
            <type>jar</type>

        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.core</artifactId>
            <version>4.3.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.osgi</groupId>
            <artifactId>org.osgi.compendium</artifactId>
            <version>4.2.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>osgi-cdi-api</artifactId>
            <version>3.1-b41</version>
            <type>jar</type>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.glassfish</groupId>
            <artifactId>javax.faces</artifactId>
            <version>2.1.9</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>

        </dependency>
    </dependencies>

    <build>
        <pluginManagement>

            <plugins>
                <plugin>
                    <groupId>org.apache.felix</groupId>
                    <artifactId>maven-bundle-plugin</artifactId>
                    <version>2.3.7</version>
                    <extensions>true</extensions>
                    <configuration>
                        <supportedProjectTypes>
                            <supportedProjectType>ejb</supportedProjectType>
                            <supportedProjectType>war</supportedProjectType>
                            <supportedProjectType>bundle</supportedProjectType>
                            <supportedProjectType>jar</supportedProjectType>
                        </supportedProjectTypes>
                        <instructions>
                            <!-- Read all OSGi configuration info from this optional file -->
                            <_include>-osgi.properties</_include>
                            <!-- By default, we don't export anything -->
                            <Export-Package></Export-Package>
                            <DynamicImport-Package>*</DynamicImport-Package>
                            <Import-Package>*;resolution:=optional</Import-Package>
                            <Embed-Dependency>*;scope=compile|runtime;inline=false</Embed-Dependency>
                            <Embed-Transitive>true</Embed-Transitive>
                            <Embed-Directory>WEB-INF/lib/</Embed-Directory>
                            <Embed-StripVersion>false</Embed-StripVersion>
                            <Embed-StripGroup>true</Embed-StripGroup>
                            <Bundle-ClassPath>.,WEB-INF/classes</Bundle-ClassPath>
                        </instructions>
                    </configuration>
                    <executions>
                        <execution>
                            <id>bundle-manifest</id>
                            <phase>process-classes</phase>
                            <goals>
                                <goal>manifest</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>bundle-install</id>
                            <phase>install</phase>
                            <goals>
                                <goal>install</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin> 

                <plugin> <!-- Need to use this plugin to build war files -->
                    <artifactId>maven-war-plugin</artifactId>
                    <groupId>org.apache.maven.plugins</groupId>
                    <!-- Use version 2.1-beta-1, as it supports the new property failOnMissingWebXml -->
                    <version>2.2</version>
                    <configuration>
                        <archive>
                            <!-- add bundle plugin generated manifest to the war -->
                            <manifestFile>
                                ${project.build.outputDirectory}/META-INF/MANIFEST.MF
                            </manifestFile>
                            <!-- For some reason, adding Bundle-ClassPath in maven-bundle-plugin
                            confuses that plugin and it generates wrong Import-Package, etc.
                            So, we generate it here.
                            -->
                            <manifestEntries>
                                <Bundle-ClassPath>WEB-INF/classes/
                                </Bundle-ClassPath>
                            </manifestEntries>
                        </archive>
                    <!-- We don't have a web.xml -->
                        <failOnMissingWebXml>false</failOnMissingWebXml>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.4</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${endorsed.dir}</outputDirectory>
                            <silent>true</silent>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>javax</groupId>
                                    <artifactId>javaee-endorsed-api</artifactId>
                                    <version>6.0</version>
                                    <type>jar</type>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                    <compilerArguments>
                        <endorseddirs>${endorsed.dir}</endorseddirs>
                    </compilerArguments>
                </configuration>
            </plugin>
            <plugin>
                <!-- Enable this plugin for all modules -->
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>glassfish-repo</id>
            <name>The Glassfish repository</name>
            <url>http://download.java.net/maven/glassfish/</url>
        </repository>
        <repository>  
            <id>prime-repo</id>  
            <name>PrimeFaces Maven Repository</name>  
            <url>http://repository.primefaces.org</url>  
            <layout>default</layout>  
        </repository>  
    </repositories>
    <description>Module History Module</description>
</project> 
```

我只收到错误消息。我在 Glassfish 中得到了这个错误堆栈：

```
[#|2012-06-07T15:45:52.438+0300|SEVERE|glassfish3.1.2|javax.faces.event|_ThreadID=339;_ThreadName=Thread-2;|Received 'javax.el.MethodNotFoundException' when invoking action listener '#{LinuxController.save}' for component 'j_idt17'|#]

[#|2012-06-07T15:45:52.439+0300|SEVERE|glassfish3.1.2|javax.faces.event|_ThreadID=339;_ThreadName=Thread-2;|javax.el.MethodNotFoundException: Method not found: com.DX_57.HM_57.Linux@2be5284e.save()
    at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:160)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:251)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-06-07T15:45:52.439+0300|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.context|_ThreadID=339;_ThreadName=Thread-2;|JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt12:j_idt17, Message=Method not found: com.DX_57.HM_57.Linux@2be5284e.save()|#]

[#|2012-06-07T15:45:52.440+0300|SEVERE|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.context|_ThreadID=339;_ThreadName=Thread-2;|Method not found: com.DX_57.HM_57.Linux@2be5284e.save()
javax.faces.event.AbortProcessingException: Method not found: com.DX_57.HM_57.Linux@2be5284e.save()
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.el.MethodNotFoundException: Method not found: com.DX_57.HM_57.Linux@2be5284e.save()
    at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:160)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:251)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    ... 33 more
|#] 
```

什么可能导致这个问题？

**更新**

我更改了托管 bean 的名称。事实证明，框架正在搜索托管 bean- 的错误名称`avax.el.MethodNotFoundException: Method not found: com.DX_57.HM_57.Linux@c280dca.save()`。应该`avax.el.MethodNotFoundException: Method not found: com.DX_57.HM_57.Linux@LinuxController.save()`是这个配置问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:02:40.117

这是因为 CDI 本身不支持 ViewScoped。要么更改`@Named("LinuxController")`为`@ManagedBean(name="LinuxController")`使其成为纯 JSF，要么将 ViewScoped 更改为诸如 Seam 的 ConversationalScope 或 SessionScope 之类的其他东西（或者在您的情况下，我认为 RequestScope 就可以了）

PS还要检查你是否为ActionEvent实现了正确的包，曾经我花了两个小时才发现我有java.awt.event.ActionEvent而不是JSF的正确包:-)

**编辑**

那么您到底尝试了什么？您是否更改了 bean 的范围，将其设为 ManagedBean 而不是 CDI bean，更改了页面和 bean 中的方法名称？或者您可以创建另一个具有相同签名的 bean 并尝试重现错误. 还尝试为 text 变量分配一些值，以查看 getText 方法是否有效。在您尝试缩小可能的选项之前，很难说问题出在哪里。

**解决方案**

好的，所以我希望我为您找到了解决方案。您应该决定是要使用 CDI 还是纯 JSF。如果您想使用 CDI 方式，请将 bean 注释为`@Named`并使用其他范围 then `ViewScoped`。如果你选择 JSF 方式，那么改成`@Named`就`@ManagedBean`可以了`ViewScoped`。在这两种情况下，您都应该删除 managed-bean 记录`faces-config.xml`，它是`JSF 1.2`在 annotation 之前使用 with 的`@ManagedBean`，因此现在已弃用（并且您不能在 config 中同时使用 annotation 和 record，您必须选择其中一个选项）。

您还需要改进进口。正如我之前写的，你已经导入了`java.awt.ActionEvent`但你需要`javax.faces.event.ActionEvent`. 另请注意，如果您使用 CDI，则从`javax.enterprise.context.*`包中导入范围的所有注释（RequestScoped、SessionScoped、...）（请参阅那里缺少 ViewScope），如果要使用 JSF，`ManagedBean`则从`javax.faces.bean.*`. 您不能将它们混合在一起，因为那样会出现一些奇怪的错误，例如您所拥有的错误。

[这](http://www.sendspace.com/file/54ismt)是更改后的文件。

您还应该遵循 Java 惯例并使用[CamelCase](http://en.wikipedia.org/wiki/Naming_convention_%28programming%29#Java)命名您的方法（即不是*gettext()*而是*getText()*）。这对于 JSF 表达式语言尤其重要，因为您需要 setter 和 getter 来访问页面上的 bean 属性，并且这些方法应该用 CamelCase 编写，以便 JSF EL 可以解析它们。

# iphone - ld：找不到框架 com.apple.mobileicons

> ID：10932172
> 
> 赞同：1
> 
> 时间：2012-06-07T12:52:24.413
> 
> 标签：iphone, ios, xcode

我目前正在开发我的第一个 iOS 应用程序，迄今为止我已经在模拟器上进行了测试。昨天我的开发者帐户获得批准，我非常兴奋，尝试在设备上部署我的应用程序进行测试。我的设备 iOS 是 4.1，我目前使用的是 Xcode 4.2

编译时，它产生了 1 个错误，消息是：

```
ld: framework not found com.apple.mobileicons

Command /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang failed with exit code 1 
```

详细地

```
Ld /Users/adstuckltd/Library/Developer/Xcode/DerivedData/fbee-hkxqvccjpaucdlfsdppurvxweneb/Build/Intermediates/fbee.build/Debug-iphoneos/fbee.build/Objects-normal/armv6/fbee normal armv6
cd "/Users/adstuckltd/Desktop/MacBook Updtes/02 June/fbee"
setenv IPHONEOS_DEPLOYMENT_TARGET 4.1
setenv PATH "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang -arch armv6 -isysroot /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk -L/Users/adstuckltd/Library/Developer/Xcode/DerivedData/fbee-hkxqvccjpaucdlfsdppurvxweneb/Build/Products/Debug-iphoneos "-L/Users/adstuckltd/Desktop/MacBook Updtes/02 June/fbee/AviaryInc-Mobile-Feather-SDK-for-iOS-fb6747f/AviarySDK" -L/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/usr/lib/system "-L/Users/adstuckltd/Desktop/MacBook Updtes/02 June/fbee/AviaryInc-Mobile-Feather-SDK-for-iOS-b4367ba/AviarySDK" -F/Users/adstuckltd/Library/Developer/Xcode/DerivedData/fbee-hkxqvccjpaucdlfsdppurvxweneb/Build/Products/Debug-iphoneos -F/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/Developer/Library/Frameworks "-F/Users/adstuckltd/Desktop/MacBook Updtes/02 June/fbee/Images/Image Ref/Heavy Metal HD.theme/Bundles" -filelist /Users/adstuckltd/Library/Developer/Xcode/DerivedData/fbee-hkxqvccjpaucdlfsdppurvxweneb/Build/Intermediates/fbee.build/Debug-iphoneos/fbee.build/Objects-normal/armv6/fbee.LinkFileList -dead_strip -fobjc-arc -miphoneos-version-min=4.1 -lz.1.2.5 -lsqlite3.0 -framework SystemConfiguration -framework SenTestingKit -framework CFNetwork -framework Accelerate -framework CoreData -framework StoreKit -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -lAviarySDK -framework com.apple.mobileicons -o /Users/adstuckltd/Library/Developer/Xcode/DerivedData/fbee-hkxqvccjpaucdlfsdppurvxweneb/Build/Intermediates/fbee.build/Debug-iphoneos/fbee.build/Objects-normal/armv6/fbee 
```

可能是什么问题呢 ？请帮帮我，我真的很想看看我的应用程序在实际设备上是如何工作的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:13:20.240

确保您已将列出的框架链接到`Build Phase` `Link Binary with Libraries`

```
SenTesting
CFNetwork
Accelerate
Core Data etc. 
```

我也会更新到最新的`iOS 5.1.1`和`Xcode 4.3.2`

# html - Div 内的表格 - 不是 Div 元素的 100% 宽度

> ID：10932177
> 
> 赞同：1
> 
> 时间：2012-06-07T12:52:58.173
> 
> 标签：html, css, html-table

我无法让 div 内的表格始终是 div 内部的 100%，而且内部表格似乎在 div 内总是不同的大小。也许我在使用内部表格时弄乱了水域，但我确实有一堆格式可以尝试正确显示。希望它在任一浏览器等中都一样。

任何帮助表示赞赏。

下面的大部分代码。

[此处溢出](http://demo.silkea.com/table_div_overflow.jpg)- 在表格内使用宽度 = 100% 时

```
<script language="javascript"> 
function one_edit() {
var ele = document.getElementById("one_edit");
var text = document.getElementById("one_displayedit");
if(ele.style.display == "block") {
        ele.style.display = "none";
    text.innerHTML = "<b>ONE</b>";
}
else {
    ele.style.display = "block";
    text.innerHTML = "<b>ONE</b>";
}
} 
</script>
<script language="javascript"> 
function two_edit() {
var ele = document.getElementById("two_edit");
var text = document.getElementById("two_displayedit");
if(ele.style.display == "block") {
        ele.style.display = "none";
    text.innerHTML = "<b>TWO</b>";
}
else {
    ele.style.display = "block";
    text.innerHTML = "<b>TWO</b>";
}
} 
</script>

<style type="text/css">

.flist { 
font-family: Verdana; font-size: 13pt; font-weight: bold;
overflow: hidden; 
position: relative;
background-color: #e9e9e9;
padding: 5px;
margin-top: 5px;
margin-left: 21%;
margin-right: 21%;
border: 1px solid #000;
}

.flist > table 
{ 
    width: 100%; 
} 

.fqlist { 
font-family: Verdana; font-size: 12pt; font-weight: normal;
position: relative;
background-color: #f8f8f8;
padding: 5px;
margin-bottom: 5px;
margin-left: 21%;
margin-right: 21%;
border-left: 1px solid #000;
border-right: 1px solid #000;
border-bottom: 1px solid #000;
}

.code10 { font-family: Verdana; font-size: 10pt; font-weight: normal; color: #cc0033;}

.instable { 
margin-bottom: 8px;
border: 1px solid #474747;
background-color: #eeeeee;
} 

</style>

<div class=flist>
<table cellpadding=2 border=0 style="table-layout:fixed">
<tr>
    <td valign=middle>
    <a id="one_displayedit" href="javascript:one_edit();"><b>ONE</b></a>
    </td>
    <td align=right><input type="button" name="CheckAll" value="All N/A" class=verd8 onClick="checkAll(one_)"></td>
</tr>
</table>    
</div>

<div id="one_edit" style="display: none" class=fqlist>

    <table cellpadding=3 cellspacing=3 align=center class=instable>
    <tr>
    <td align=center><input type="button" name="CheckAll" value="All Yes" class=verd8 onClick="checkAll(one_yes)"></td>
    <td align=center><input type="button" name="CheckAll" value="All No" class=verd8 onClick="checkAll(one_no)"></td>
    <td align=center><input type="button" name="CheckAll" value="All N/A" class=verd8 onClick="checkAll(one_)"></td>
    </tr>
    </table>

    <table cellpadding=3 cellspacing=3 align=center class=instable>
    <tr>
    <td valign=top colspan=3 align=center>
    This is a General Question for whatever.
    </td>
    </tr>

    <tr>
    <td colspan=3 align=center>
    Some General Notes
    </td>
    </tr>

    <tr>

    <td align=center class=verd11><b>Yes</b></td>
    <td align=center class=verd11><b>No</b></td>
    <td align=center class=verd11><b>N/A</b></td>
    </tr>

    <tr>
    <td valign=top colspan=3 align=center>
    <span class=code10>General Notes About Question Rules.</span>
    </td>
    </tr>

    <tr>
    <td colspan=3 align=center class=cnote width=100%>
    <b>Compliance Note: 
    <br>
    <textarea style="width:85%" rows="3" name="compliancenote_#qid#"></textarea>
    <br>
    </td>
    </tr>
    </table>

</div>

<div class=flist>
<table cellpadding=2 border=0 style="table-layout:fixed">
<tr>
    <td valign=middle>
    <a id="two_displayedit" href="javascript:two_edit();"><b>Two</b></a>
    </td>
    <td align=right><input type="button" name="CheckAll" value="All N/A" class=verd8 onClick="checkAll(two_)"></td>
</tr>
</table>    
</div>

<div id="two_edit" style="display: none" class=fqlist>

    <table cellpadding=3 cellspacing=3 align=center class=instable>
    <tr>
    <td align=center><input type="button" name="CheckAll" value="All Yes" class=verd8 onClick="checkAll(two_yes)"></td>
    <td align=center><input type="button" name="CheckAll" value="All No" class=verd8 onClick="checkAll(two_no)"></td>
    <td align=center><input type="button" name="CheckAll" value="All N/A" class=verd8 onClick="checkAll(two_)"></td>
    </tr>
    </table>

    <table cellpadding=3 cellspacing=3 align=center class=instable>
    <tr>
    <td valign=top colspan=3 align=center>
    This is a General Question for whatever and is bigger than the other question, and I am trying to keep going to make it bigger and longer. 
    So not sure how to get these showing as same width across entire div length.
    </td>
    </tr>

    <tr>
    <td colspan=3 align=center>
    Some General Notes
    </td>
    </tr>

    <tr>

    <td align=center class=verd11><b>Yes</b></td>
    <td align=center class=verd11><b>No</b></td>
    <td align=center class=verd11><b>N/A</b></td>
    </tr>

    <tr>
    <td valign=top colspan=3 align=center>
    <span class=code10>General Notes About Question Rules.</span>
    </td>
    </tr>

    <tr>
    <td colspan=3 align=center class=cnote width=100%>
    <b>Compliance Note: 
    <br>
    <textarea style="width:85%" rows="3" name="compliancenote_#qid#"></textarea>
    <br>
    </td>
    </tr>
    </table>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:27:21.540

看起来你不是在申请`width:100%;`溢出表。尝试这样做（我相信溢出的表是`.instable`）：

```
.instable {
    width:100%;
} 
```

也可以尝试在不同的浏览器中查看它是否有效。我正在使用 Chrome，但表格甚至没有填满整个`div`.

# ios - Xcode 可以在 XIB 中查找/替换吗？

> ID：10932180
> 
> 赞同：3
> 
> 时间：2012-06-07T12:53:05.830
> 
> 标签：ios, xcode, xcode4

如果我使用 Xcode 的“在工作区中查找/替换”，它似乎会跳过 XIB 文件中 UIViews 中包含的任何文本。

无论如何要在 Xcode 中执行此操作，还是我需要使用其他工具？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:58:35.190

XCode 将成功重构 IBOutlet 名称，即使它们在 nib 中连接。所以来回答你：

在对文本选择 Find/Replace 之前，先看看 Xcode 是否会改用 Refactor。它不会重构某些东西（例如枚举和#defines）。如果它会重构您的目标文本，那么选择它应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T20:35:10.593

您可以从命令行使用 find 和 sed

```
find . -name '*.xib' -type f -exec sed -i "" 's/OldText/NewText/g' {} \ 
```

例如，我只需要查找并替换所有前缀为 SC 到 MCSC 的类，我使用了：

```
find . -name '*.xib' -type f -exec sed -i "" 's/[[:<:]]SC/MCSC/g' {} \ 
```

[[:<:]] 表示 OS X 上的单词边界（请参阅[https://stackoverflow.com/a/5734237/456366](https://stackoverflow.com/a/5734237/456366)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T12:56:54.393

如果文本/字符串替换不是文件，则查找和替换 Xcode 的选项。

如果你想这样做，你可以拥有你的 shell 脚本/苹果脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T12:57:09.370

如果您确实有很多想要查找/替换的文本，您可能会发现**IBTool 很有用**。

出于翻译原因，它通常用于将文本从/导入到 .XIB，但它也应该满足您的需求。

[您可以在iPhone Applications Localization Guide](http://www.icanlocalize.com/site/tutorials/iphone-applications-localization-guide/)中查看 IBTool 使用示例。您会对指南的第 2 点和第 5 点感兴趣。

*   您使用 IBTool 导出字符串
*   您确实在任何文本编辑器中查找/替换
*   你重新导入字符串

# iphone - 设置 AVCaptureTorchModeOn

> ID：10932185
> 
> 赞同：5
> 
> 时间：2012-06-07T12:53:10.197
> 
> 标签：iphone, xcode, camera, camera-flash, ios-camera

我想在录制视频时在我的应用中打开手电筒模式 AVCaptureTorchModeOn。

我正在使用下面的代码。

```
-(void)set_TorchMode:(BOOL)turnOn
{
 AVCaptureDevice *theDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    if ([theDevice hasTorch]) {
        [theDevice lockForConfiguration: nil];
        AVCaptureTorchMode currentMode = [theDevice torchMode];
        BOOL isAlreadyTurnedOn = (AVCaptureTorchModeOn == currentMode);
        if (isAlreadyTurnedOn != turnOn) {
            [theDevice setTorchMode: turnOn? AVCaptureTorchModeOn: AVCaptureTorchModeOff];
        }

        [theDevice unlockForConfiguration];
    }    
} 
```

我在开始录制时调用此方法以打开并在停止录制时将其关闭。

我第一次录制时它工作正常，但是当我第二次开始录制时，它打开但立即关闭。录制运行时它不会保持打开状态。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:28:21.540

以下代码用于打开和关闭背光。

愿这对你有所帮助，

```
- (void) setTorchOn:(BOOL)isOn
{
    AVCaptureDevice* device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    [device lockForConfiguration:nil]; //you must lock before setting torch mode
    [device setTorchMode:isOn ? AVCaptureTorchModeOn : AVCaptureTorchModeOff];
    [device unlockForConfiguration];
}

- (IBAction)changedState:(id)sender {
    UISwitch *switchValue = (UISwitch*)sender;
    [self setTorchOn:[switchValue isOn]];
} 
```

请将此代码测试到设备中。

# php - PHP 获取 html 源代码，然后解析某些 DIV 标签内的值

> ID：10932190
> 
> 赞同：3
> 
> 时间：2012-06-07T12:53:26.143
> 
> 标签：php, parsing, html

我可以很好地获取源代码，但我现在希望能够从特定 div 中获取数据：

```
$html = file_get_contents('http://www.website.com'); 
```

说 $html 包含：

```
<div class="productData">
   <div class="productDescription">Here is the product description</div>
   <div class="productPrice">1.99</div>
</div> 
```

我希望能够返回 内的数据，并为所有事件执行此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:56:15.917

使用[DOMDocument 类](http://www.php.net/manual/en/class.domdocument.php)，结合[DOMXPath](http://php.net/manual/en/class.domxpath.php)，如下所示：

```
$url = 'http://www.website.com/';
$dom = new DOMDocument();
$dom->load($url);
$xpath = new DOMXPath($dom);
$nodes = $xpath->query("//*[contains(@class, 'productData')]");
foreach ($nodes as $node) {
    // do something
} 
```

# linux - 从等待队列过渡到运行队列

> ID：10932196
> 
> 赞同：1
> 
> 时间：2012-06-07T12:53:46.020
> 
> 标签：linux, kernel, sleep

当进程调用 wait_event_interruptible 时，进程进入睡眠状态（假设条件满足并且没有挂起的信号）调度程序将进程从运行队列中移除到等待队列。当有 wake_up 调用时，究竟是谁从等待队列中删除进程并将其保留在运行队列中？

塔克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:19:48.330

“wake_up 调用”是由另一个线程/进程/任务（一些内核将状态放在线程而不是进程上）完成的*系统调用*，其中线程/进程/任务在参数中唤醒。因为*系统调用*是一个中断（`int $0x80`在Linux上，直到最近被`sysenter`哪个中断替换），因此进入内核，调度器会被调用，请求的线程/进程/任务会被弹出阻塞队列并推入就绪队列。如果这个线程/进程/任务的优先级最高，它最终会在从中断返回时运行，因此直接从阻塞状态进入运行状态。

# sql-server-2005 - 给定同一记录中其他列的值（NULL 值），更新许多标志列

> ID：10932202
> 
> 赞同：0
> 
> 时间：2012-06-07T12:54:03.023
> 
> 标签：sql-server-2005, flags, dbnull, data-integration

给定一个输入数据表，我希望有一组**描述同一记录的兄弟列的“标志列”**。

*   我正在使用 Microsoft **SQL Server 2005**。
*   首先，我需要在目标表中加载数据，然后我需要执行检查以将值放入这些标志列中。

例如，我有一张玩具桌，如下所示：

```
CREATE TABLE zzz_test
             (
                          color        VARCHAR(10),
                          value_x      INTEGER    ,
                          value_y      INTEGER    ,
                          value_x_FLAG bit        ,
                          value_y_FLAG bit
             ) 
```

然后我有以下玩具数据（由于“旧”2005 SQL 版本，我需要为每条记录重复 INSERT/VALUES 语句）：

```
INSERT zzz_test(color,value_x,value_y)
VALUES('red',1,NULL)
INSERT zzz_test(color,value_x,value_y)
VALUES('green',NULL,NULL)
INSERT zzz_test(color,value_x,value_y)
VALUES('red',NULL,2)
INSERT zzz_test(color,value_x,value_y)
VALUES('red',1,3)
INSERT zzz_test(color,value_x,value_y)
VALUES('black',NULL,1)
INSERT zzz_test(color,value_x,value_y)
VALUES(NULL,3,2)
INSERT zzz_test(color,value_x,value_y)
VALUES('black',1,2)
INSERT zzz_test(color,value_x,value_y)
VALUES('red',3,4)
INSERT zzz_test(color,value_x,value_y)
VALUES('green',1,1)
INSERT zzz_test(color,value_x,value_y)
VALUES('blue',5,NULL) 
```

现在我想有一种快速的方法将值放入内部`value_x_FLAG`并`value_y_FLAG`评估兄弟列是否`value_x`为.`value_y`**`NULL`**

我知道有类似`ISNULL()`, 或的函数`COALESCE()`，但我不认为是这种情况，因为**我正在尝试根据另一列的值更新一列**。

我知道我可以使用`IF / ELSE`语句，但是将许多布尔标志 (2^n) 的所有情况设置为在标志变量的同一个“更新”语句中一起工作是非常复杂的。

如何处理？

设置完所有标志后，我想以某种方式总结我的表格。例如，我想`COUNT`在所有标志变量上都有一个，然后我想有一个`COUNT`给定的“*颜色类别*”。

可能我不需要一组支持标志变量，但我想让它们使表格更具可读性，并使 SQL 代码更具可读性。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:00:55.467

试试这个，毕竟插入，做

```
update zzz_test set value_x_FLAG = CASE value_x when null then 1 else 0 END, value_y_FLAG = CASE value_y when null then 1 else 0 END 
```

希望它有效！

编辑：关于计数，您可以在每次需要时使用 group by 子句，而不是在某处保存标志

```
select Color, Count(value_x_FLAG) from zzz_test  group by Color having value_x_FLAG != 0 
```

这将返回一个 2 列的表，其中颜色和 int 另一列是具有标志 = 1 的行数

# sql - 为什么工会比团体快

> ID：10932204
> 
> 赞同：9
> 
> 时间：2012-06-07T12:54:05.563
> 
> 标签：sql

好吧，也许我太老了，我想了解以下内容。

查询1。

```
select count(*), gender from customer
group by gender 
```

查询2。

```
select count(*), 'M' from customer
where gender ='M'
union
select count(*), 'F' from customer
where gender ='F' 
```

第一个查询更简单，但由于分析器中的某种原因，当我同时执行这两个查询时，它说查询 2 使用了 39% 的时间，而查询 1 使用了 61%。

我想了解原因，也许我必须重写所有查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:04:00.310

您的查询 2 实际上是一个不错的技巧。它的工作原理是这样的：你有一个关于性别的索引。DBMS 可以在该索引中查找两次以获得两个范围的行（一个用于 M，一个用于 F）。它不需要从这些行中读取任何内容，只要它们存在即可。它可以计算两个范围内存在的行数。

在第一个查询中，DBMS 需要解码行以读取性别，然后需要对行进行排序或构建哈希表来聚合它们。这比仅仅计算行更昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:16:50.500

Are you sure? Maybe the second query is just using cached resources from the first on.

run them in two separately batches and before each one run `DBCC FREEPROCCACHE` to clean the cache. Then compare the values of each execution plan.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:34:42.897

我尝试了一个等效的查询，但发现了相反的结果；工会占 65%，“分组”占 35%。（使用 SQL Server 2008）。我没有关于性别的索引，所以我的执行计划显示了聚集索引扫描。除非您详细检查执行计划，否则实际上无法解释此结果。

为该查询添加索引可能不是一个好主意，因为您可能不会像在客户表中插入记录那样频繁地运行此查询。在其他一些具有位图索引的数据库引擎（Oracle、PostgreSQL）中，数据库引擎可以组合多个索引，从而可以改变单列索引的效用。但在 SQL Server 中，您需要设计索引以“覆盖”常用查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:12:39.863

查询的优化取决于数据库。您所看到的是特定于数据库的。

正如所写的那样，联合会天真地要求两次遍历数据，进行过滤和计数。基本上不需要其他存储。

聚合可能会对数据进行排序，然后进行计数。或者，它可能会生成一个哈希表。鉴于性能差异，我猜想正在使用一种排序。显然，这对于这种类型的查询来说太过分了。

如果你有关于性别的索引，这两种方法本质上都会扫描索引，所以性能应该是相似的（联合版本可能会扫描两次=.

您使用的数据库是否提供了一种计算表统计信息的方法？如果是这样，您应该更新统计信息，看看您是否仍然得到相同的结果。

另外，你能发布“解释”的结果或执行计划吗？这将准确地解释为什么一个比另一个快。

# php - Backbone.js 集合初始化 w/PHP 架构

> ID：10932211
> 
> 赞同：1
> 
> 时间：2012-06-07T12:54:27.183
> 
> 标签：php, backbone.js

我正在使用带有 RESTful 后端 (PHP) 的 Backbone。我的问题与页面加载后集合的初始化有关。

Backbone 可以在页面加载时从远程源加载内容，但是对 PHP 可以在首次加载时写入页面的内容进行另一个 HTTP 请求似乎有点浪费。我对嵌入模型数据的感受很复杂，因为它需要我有两种策略来更新基础集合。

只是想看看其他人是怎么想的。

希望我说得有道理。

干杯，

皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:22:25.243

您需要填写您的收藏和模型的 url 和 urlRoot

[http://backbonejs.org/#Model-urlRoot](http://backbonejs.org/#Model-urlRoot)

[http://backbonejs.org/#Collection-url](http://backbonejs.org/#Collection-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:43:34.310

[Backbone 文档](http://documentcloud.github.com/backbone/#FAQ-bootstrap)建议您将页面开始时所需的任何数据作为数据嵌入到实际 HTML 中，并且仅在您不需要页面开始时的数据或使用某种延迟加载时才对集合使用 fetch 方法.

要从文档中窃取示例，您需要在 PHP/HTML 中嵌入如下内容：

```
<script>
  var Accounts = new Backbone.Collection;
  Accounts.reset(<?php echo( $accounts.to_json() ); ?>);
  var Projects = new Backbone.Collection;
  Projects.reset(<?php echo( $projects.to_json() ); ?>);
</script> 
```

如果那是不正确的 PHP 语法，请原谅我，我已经多年没有使用 PHP。

# django - Add auth user in django admin interface: HTTP 403 error

> ID：10932219
> 
> 赞同：0
> 
> 时间：2012-06-07T12:54:55.780
> 
> 标签：django, apache, django-authentication, http-status-code-403, mod-security

I have a weird issue when I try to save a new user through the admin interface. I get a `403` HTTP status code error.

I've changed nothing in the auth application.

Here are my middlewares:

```
MIDDLEWARE_CLASSES = (
    'johnny.middleware.LocalStoreClearMiddleware',
    'johnny.middleware.QueryCacheMiddleware',
    #'django.middleware.cache.UpdateCacheMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    #'django.middleware.cache.FetchFromCacheMiddleware',
) 
```

I've no idea where to look, or either have any idea of what could provocate this. Any clue is welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:47:27.973

Your user probably has not permissions to add new users. It's a normal behaviour to return 403 code in this case. View the doc, please: [https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required).

And (in this case) your user *can have* permission to delete users because it's the decoupled permissions.

您可以查看用户的权限：http: [//yoursite.com/admin/auth/user/](http://yoursite.com/admin/auth/user/) {user_id}/（来自超级用户或可以查看其他用户权限的用户）。

**更新**。问题的作者找到了决定：这种情况是因为 Apache 设置（关闭 mod_security 解决了问题）。不幸的是，我对该模块没有深入的了解，也无法提供更详细的信息。

# sql - 即使为 0，也返回 count(*)

> ID：10932220
> 
> 赞同：2
> 
> 时间：2012-06-07T12:54:58.543
> 
> 标签：sql, sql-server, tsql, join, group-by

我有以下查询：

```
select bb.Name, COUNT(*) as Num from BOutcome bo 
JOIN BOffers bb ON bo.ID = bb.BOutcomeID 
WHERE bo.EventID = 123 AND bo.OfferTypeID = 321 AND bb.NumA > bb.NumB 
GROUP BY bb.Name 
```

该表如下所示：

```
Name | Num A | Num B
 A   |   10  |   3
 B   |   2   |   3
 C   |   10  |   3
 A   |   9   |   3
 B   |   2   |   3
 C   |   9   |   3 
```

预期的输出应该是：

```
Name | Count
 A   |   2 
 B   |   0  
 C   |   2 
```

因为当 name 为 A 和 C 时，Num A 比 Num B 大几倍，而当 Name 为 B 时，在两个记录中，Num A 都低于 Num B。

我目前的输出是：

```
Name | Count
 A   |   2 
 C   |   2 
```

因为 B 的输出是 0，所以我没有在我的查询中得到它。

我的查询有什么问题？我该如何取回它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:01:04.693

这是我的猜测。我认为这是一种比人们一直在转动车轮的所有左/右连接箍简单得多的方法。由于查询的输出仅依赖于左表中的列，因此根本不需要显式连接：

```
SELECT 
  bb.Name, 
  [Count] = SUM(CASE WHEN bb.NumA > bb.NumB THEN 1 ELSE 0 END)
  -- just FYI, the above could also be written as:
  -- [Count] = COUNT(CASE WHEN bb.NumA > bb.NumB THEN 1 END)
FROM dbo.BOffers AS bb
WHERE EXISTS 
(
    SELECT 1 FROM dbo.BOutcome 
    WHERE ID = bb.BOutcomeID
    AND EventID = 123
    AND OfferTypeID = 321
)
GROUP BY bb.Name; 
```

Of course, we're not *really* sure that both Name and NumA/NumB are in the left table, since the OP talks about two tables but only shows one table in the sample data. My guess is based on the query he says is "working" but missing rows because of the explicit join.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:51:33.037

另一个疯狂的猜测。随意投反对票：

```
SELECT ba.Name, COUNT(bb.BOutcomeID) as Num 
FROM 
        ( SELECT DISTINCT ba.Name
          FROM 
                  BOutcome AS b
              JOIN
                  BOffers AS ba
                      ON  ba.BOutcomeID  = b.ID
          WHERE b.EventID = 123 
            AND b.OfferTypeID = 321
        ) AS ba
    LEFT JOIN 
        BOffers AS bb 
            ON  AND bb.Name = ba.Name
            AND bb.NumA > bb.NumB
GROUP BY ba.Name ; 
```

# openlayers - 以 OpenStreetMap(OSM) 作为基础层的 Openlayer

> ID：10932224
> 
> 赞同：0
> 
> 时间：2012-06-07T12:55:03.680
> 
> 标签：openlayers, openstreetmap, mapserver

我在将来自我的 Minesotta 地图服务器的**OpenLayer放在****OSM 层**上作为基础层时遇到问题。

当我使用谷歌地图作为基础层时，它工作得很好！

那么是否有可能像 osm 作为基础层和 OpenLayer 作为覆盖层一样工作。或者这种组合是可能的还是不可能的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T14:20:14.577

如果我很好理解你的问题......你需要设置 allOverlays: true [link1](http://trac.osgeo.org/openlayers/wiki/Overlay) , [link2](http://openlayers.org/dev/examples/all-overlays-google.html)

```
var options = {
    projection: mercator, //EPSG:3785/900913
    displayProjection: geographic, //EPSG:4326
    theme: null,
    maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34, 20037508.34, 20037508.34),
    maxResolution: 156543.0339,
    units: 'm',
    controls: [],
    numZoomLevels: MAX_ZOOM_LEVEL,
    allOverlays: true
};
OpenLayers.Util.DEFAULT_PRECISION = 18;

mp = new OpenLayers.Map('map', options); 
```

# javascript - 如何从网页中获取源代码？

> ID：10932226
> 
> 赞同：4
> 
> 时间：2012-06-07T12:55:21.490
> 
> 标签：javascript, php

我们如何从 php 和/或 javascript 的网页中获取网页的源代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-10-09T02:40:20.690

在 Javascript 中不使用不必要的框架（在示例中 api.codetabs.com 是绕过跨域资源共享的代理）：

```
fetch('https://api.codetabs.com/v1/proxy?quest=google.com').then((response) => response.text()).then((text) => console.log(text)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:02:40.543

谢谢：

*   @PLB
*   @影子向导
*   [获取 iframe 的源代码](https://stackoverflow.com/questions/4730865/getting-the-source-code-of-an-iframe)
*   [http://www.frihost.com/forums/vt-32602.html](http://www.frihost.com/forums/vt-32602.html)
*   @马特考夫林。

首先，您必须知道，您将永远无法在 javascript 中获取与您的页面不在同一个域中的页面的源代码。（参见[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)）。

## 在 PHP 中，您可以这样做：

```
file_get_contents($theUrl); 
```

## 在javascript中，有三种方式：

**首先，通过 XMLHttpRequest ：http:** [//jsfiddle.net/635YY/1/](http://jsfiddle.net/635YY/1/)

```
var url="../635YY",xmlhttp;//Remember, same domain
if("XMLHttpRequest" in window)xmlhttp=new XMLHttpRequest();
if("ActiveXObject" in window)xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");
xmlhttp.open('GET',url,true);
xmlhttp.onreadystatechange=function()
{
    if(xmlhttp.readyState==4)alert(xmlhttp.responseText);
};
xmlhttp.send(null); 
```

**其次，通过 iFrames：http:** [//jsfiddle.net/XYjuX/1/](http://jsfiddle.net/XYjuX/1/)

```
var url="../XYjuX";//Remember, same domain
var iframe=document.createElement("iframe");
iframe.onload=function()
{
    alert(iframe.contentWindow.document.body.innerHTML);
}
iframe.src=url;
iframe.style.display="none";
document.body.appendChild(iframe); 
```

**第三，通过 jQuery：http:** [//jsfiddle.net/edggD/2/](http://jsfiddle.net/edggD/2/)

```
$.get('../edggD',function(data)//Remember, same domain
{
    alert(data);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:31:23.437

使用 jQuery 的 Ajax 示例：

```
// Display the source code of a web page in a pre tag (escaping the HTML).
// Only works if the page is on the same domain.

$.get('page.html', function(data) {
    $('pre').text(data);
}); 
```

如果你只是想访问源代码，上面代码中的 data 参数包含原始 HTML 源代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-03T01:41:23.313

按照[谷歌关于 fetch() 的指南](https://developers.google.com/web/updates/2015/03/introduction-to-fetch)并使用 D.Snap 答案，你会得到这样的东西：

```
fetch('https://api.codetabs.com/v1/proxy?quest=URL_you_want_to_fetch')
  .then(
    function(response) {
      if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
        return;
      }

      // Examine the text in the response
      response.text().then(function(data) {
        // data contains all the plain html of the url you previously set, 
        // you can use it as you want, it is typeof string
        console.log(data)
      });
    }
  )
  .catch(function(err) {
    console.log('Fetch Error :-S', err);
  }); 
```

这样您就可以使用 CORS 代理，在本例中是[Codetabs CORS 代理](https://codetabs.com/cors-proxy/cors-proxy.html)。

CORS 代理允许您获取不在同一域中的资源，从而避免同源策略阻止您的请求。您可以查看其他 CORS 代理：

[https://nordicapis.com/10-free-to-use-cors-proxies/](https://nordicapis.com/10-free-to-use-cors-proxies/)

# php - PHP：表达式正则，分" "，它是怎么做的？

> ID：10932227
> 
> 赞同：1
> 
> 时间：2012-06-07T12:55:28.383
> 
> 标签：php, regex, expression, preg-match-all

我想知道如何匹配所有标签`"<?"`，`"?>"` 例如：

```
"<?root?><abcd>" 
```

我想：

```
preg_match_all(/[^(<\?)(\?>)]+/, $str, $match); 
```

但结果`["root", "abcd"]`相反，我愿意这样`["<abcd>"]`

谢谢'！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:03:52.250

```
<(?!\?).+?(?<!\?)> 
```

这应该够了吧。

解释：

```
<    -- A <
(?!  -- Not followed by: (See link 1 - Positive and Negative Lookahead)
  \? -- A ?
)
.+?  -- As few characters as necessary (See link 2 - Laziness Instead of Greediness)
(?<! -- Not preceded by: (See link 1 - Positive and Negative Lookbehind)
  \? -- A ?
)
>    -- A > 
```

1.  [环视四周](http://www.regular-expressions.info/lookaround.html)
2.  [重复](http://www.regular-expressions.info/repeat.html)

IIRC，你会这样做：

```
preg_match_all('/<(?!\?).+?(?<!\?)>/', $str, $match); 
```

但是，[使用 regex 解析 HTML 并不是一个好主意](https://stackoverflow.com/a/1732454/785745)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:02:46.497

我当然希望这不是 HTML，但这将匹配尖括号括起来的单词，中间没有问号：

```
/<\w+>/ 
```

如果里面允许有其他`\w`字符但没有问号：

```
/<[^>?]+>/ 
```

如果问号可以在里面，但只有在与尖括号相邻时才被拒绝：

```
/<[^?].*?[^?]>/ 
```

`<b>`但是，由于最小长度限制，上述内容将具有无法匹配的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:06:49.617

这是微不足道的，但你以错误的方式接近它。你应该匹配你想要的，而不是不匹配你不想要的。要匹配标签，请使用以下变体：

```
<\w+[^>\?]*> 
```

根据您的需要使其具体化。只要`\?`不在标签中允许的字符集中，就可以了。另请注意，这会将标签与属性匹配。

# c# - 异常：System.ComponentModel.Win32Exception：System.Diagnostics.Process.Start_shell 中的数据无效

> ID：10932229
> 
> 赞同：0
> 
> 时间：2012-06-07T12:55:31.703
> 
> 标签：c#, linux, mono, system.diagnostics, process.start

我正在研究 linux 环境并使用 Mono 进行开发。我有一个 C# 项目，我想在其中启动另一个应用程序/可执行文件。代码片段如下：

```
string pathToDB = @"""/root/somefolder/anotherfolder/""";
                        Process process = new Process();
                        process.StartInfo.FileName = @"/root/somefolder/filename";
                        process.StartInfo.Arguments = @"""" + pathToDB + @"""" + "$" + contents + "$" + "documentTerms";
                        process.Start(); 
```

我传递了三（3）个参数。第一个是文件夹路径，第二个是我用字符串内容表示的一些文本数据，第三个是一些硬编码文本。当我运行这个程序时，它给了我以下异常/错误：

```
CreateProcess: Unfinished quote.

Exception: System.ComponentModel.Win32Exception: Invalid data
at System.Diagnostics.Process.Start_shell (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0 
  at System.Diagnostics.Process.Start_common (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0 
  at System.Diagnostics.Process.Start () [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) System.Diagnostics.Process:Start ()
  at XapianTest.SimpleIndex.ProcessFiles (System.String path) [0x000dc] in /root/Projects/XapianTest/XapianTest/SimpleIndex.cs:84 
  at XapianTest.SimpleIndex.ProcessFiles (System.String path) [0x0013d] in /root/Projects/XapianTest/XapianTest/SimpleIndex.cs:105 
  at XapianTest.SimpleIndex.ProcessFiles (System.String path) [0x0013d] in /root/Projects/XapianTest/XapianTest/SimpleIndex.cs:105 
  at XapianTest.SimpleIndex.Main (System.String[] argv) [0x00023] in /root/Projects/XapianTest/XapianTest/SimpleIndex.cs:51 
```

我究竟做错了什么！请任何人帮助我...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:05:40.433

你需要在参数之间有空格。尝试这个：

```
process.StartInfo.Arguments = @"""" + pathToDB + @""" ""$" + contents + @"$"" " + "documentTerms"; 
```

# java - Spring 是否提供了一个类来衡量迭代代码的性能？

> ID：10932230
> 
> 赞同：4
> 
> 时间：2012-06-07T12:55:34.870
> 
> 标签：java, spring, perf4j

我需要测量应用程序特定部分的性能。为了计算这些度量，我使用 Spring[`StopWatch`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/util/StopWatch.html)类。在一个方法中，有一个循环，我需要测量每次迭代的执行情况。

对于循环部分，我想要的是有一个计数器和最小值/最大值/平均值。不幸的是，Spring`StopWatch`类没有提供这样的功能。

例如，下面的代码：

```
StopWatch watch = new StopWatch("foo");
watch.start("First process");
doSomething();
watch.stop();
for (int i = 0; i < 10; i++) {
    watch.start("loop");
    doAnotherThing();
    watch.stop();
}
System.out.println(watch.prettyPrint()); 
```

将输出：

```
StopWatch 'foo': running time (millis) = 1469
-----------------------------------------
ms     %     Task name
-----------------------------------------
01000  068%  First process
00078  005%  loop
00000  000%  loop
00016  001%  loop
00047  003%  loop
00015  001%  loop
00047  003%  loop
00094  006%  loop
00000  000%  loop
00109  007%  loop
00063  004%  loop 
```

我想要的是：

```
StopWatch 'foo': running time (millis) = 1469
-----------------------------------------
ms     %     Task name
-----------------------------------------
01000  068%  First process
00469  032%  loop | min: 0 ; max: 109 ; average: 47 ; count: 10 
```

有没有办法使用 Spring 实现这一目标？

ps：我知道[perf4j](http://perf4j.codehaus.org/)会允许这样做，但是如果我可以避免添加新库，那就太好了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:19:21.790

我不知道 Spring 中有任何此类课程

如果您不想添加 Perf4J，我会封装到您自己的类中。

一个通用的统计类是一个方便的东西。只要确保它是线程安全的。

# c++ - std::auto_ptr 与 std::tr1::shared_ptr

> ID：10932232
> 
> 赞同：0
> 
> 时间：2012-06-07T12:55:36.407
> 
> 标签：c++, shared-ptr, std, auto-ptr

> **可能重复：**
> [我什么时候使用哪种指针？](https://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when)

我读到那`std::auto_ptr`已经过时了，所以你必须`std::tr1::shared_ptr`改用。正如我所读到的不同之处在于`std::tr1::shared_ptr`有引用计数，而`std::auto_ptr`没有，因此复制或分配会使资源更改其所有者，而源将所有权授予目的地。这是唯一的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:04:05.430

与单一所有权语义最接近的智能指针`auto_ptr`是[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)。`std::shared_ptr`如果可用，应优先使用它。见[这里](http://www2.research.att.com/~bs/C++0xFAQ.html#std-unique_ptr)。

# objective-c - 如何从 awakeFromNib 更新窗口位置和大小？

> ID：10932234
> 
> 赞同：0
> 
> 时间：2012-06-07T12:55:52.383
> 
> 标签：objective-c, cocoa

此代码使我的应用程序崩溃，因为`awakeFromNib`它被递归调用：

```
- (void)awakeFromNib
{
    [super awakeFromNib];
        ...
        [[self window] setFrameTopLeftPoint:NSMakePoint(frame.origin.x, frame.origin.y)];
} 
```

setFrameTopLeftPoint 是否再次调用`awakeFromNib`？我认为 awakeFromNib 只调用一次，当 NSWindow 由 XIB 文件加载时。

如何更新窗口位置和大小`awakeFromNib`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:35:32.720

我不知道你为什么在 awakeFromNib 中得到无限递归。我创建了一个模仿您的代码的测试项目，并且 -awakeFromNib 只被调用了一次。我怀疑这与您初始化窗口控制器的方式有关。

也就是说，在 -windowDidLoad 中更新窗口位置可能会更好。从文档的“子类化 NSWindowController”部分，它说：

> windowDidLoad：在加载窗口 nib 文件后重写以执行任务。

# php - php中的zip文件夹结构不正确

> ID：10932236
> 
> 赞同：1
> 
> 时间：2012-06-07T12:56:03.427
> 
> 标签：php, yii

我在 php 中使用 ZipArchive 创建 zip 文件。代码-

```
$path = Yii::getPathOfAlias('webroot').'/quickshopimages/productimage/';
$zip =new ZipArchive();
$zip->open('test.zip', ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE);
$iterator=new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path),
RecursiveIteratorIterator::SELF_FIRST);
foreach($iterator as $file) 
{
  if($file->isDir())   
  {
   echo strtoupper($file->getRealpath()), PHP_EOL.'<br/>';$file .'/');
   $zip->addEmptyDir(str_replace(strtoupper($file->getRealpath()) . '/', '', 
   $file . '/'));
  }
 else
 {
  $zip->addFile($file);
 }
}
$zip->close(); 
```

但这里的问题是，当我创建 zip 时，它的文件夹结构设置为

> C:\Program Files (x86)\EasyPHP-5.3.5.0\www\quickshop\trunk\quickshopimages\productimage\male\shirts\Ethnic\1

我的主根目录来自“productimage\male\shirts\Ethnic\1”。那么，如何从“productimage”作为根目录启动 zip 文件夹呢？

提前感谢，对不起英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T17:43:52.467

请参阅下面的答案，您的问题似乎来自您对 $zip->addFile($file); 的使用，没有第二个参数。

[php创建没有zip文件路径的zips](https://stackoverflow.com/questions/3993105/php-creating-zips-without-path-to-files-inside-the-zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T07:15:53.060

Yii 有一个邮政编码扩展名。 [yii zip 分机。](http://www.yiiframework.com/extension/ezip/)

```
$zip = Yii::app()->zip;
$zip->makeZip('./','./toto.zip'); // make an ZIP archive 
$zip->extractZip('./toto.zip', './1/'); // extract Zip arc. 
```

# android - Android：HTTPCLIENT POST - 无法将数据发送到服务器

> ID：10932238
> 
> 赞同：1
> 
> 时间：2012-06-07T12:56:08.980
> 
> 标签：android, httpclient, gsoap

您好我正在尝试使用 httpclient 将数据发送到服务器。

这是我的代码

```
public class MainActivity extends Activity implements OnClickListener {
private String TAG;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button press = (Button) findViewById(R.id.button1);
    press.setOnClickListener(this); 
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.button1:

        String usrName = ((EditText) findViewById(R.id.usrName)).getText()
                .toString().trim();
        String age = ((EditText) findViewById(R.id.age)).getText()
                .toString().trim();

        Toast.makeText(getApplicationContext(),
                "username:: " + usrName + "---Age::" + age,
                Toast.LENGTH_SHORT).show();

        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost("http://192.168.1.40"); 
        String resp = null;

        try {
            // create data to POST
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    5);
            nameValuePairs.add(new BasicNameValuePair("UserName", usrName));
            nameValuePairs.add(new BasicNameValuePair("Age", age));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost); 

            resp = response.toString();

        } catch (ClientProtocolException e) {
            System.out.println("---" + e.getMessage());
        } catch (IOException e1) {
            System.out.println("---" + e1.getMessage());
        }

        Log.i(TAG, "RTT inside post-data: " + time_passed);

        Log.i(TAG, resp.toString());

        break;
    case R.id.send:

    default:
        break;
    }

}

} 
```

我在 logcat 中收到此错误

```
 06-07 18:23:45.650: E/AndroidRuntime(2387): FATAL EXCEPTION: main
 06-07 18:23:45.650: E/AndroidRuntime(2387): android.os.NetworkOnMainThreadException
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at libcore.io.IoBridge.connect(IoBridge.java:112)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at java.net.Socket.connect(Socket.java:842)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at com.sakeesoft.android.MainActivity.onClick(MainActivity.java:104)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.view.View.performClick(View.java:3511)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.view.View$PerformClick.run(View.java:14105)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.os.Handler.handleCallback(Handler.java:605)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.os.Handler.dispatchMessage(Handler.java:92)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.os.Looper.loop(Looper.java:137)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at android.app.ActivityThread.main(ActivityThread.java:4424)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at java.lang.reflect.Method.invokeNative(Native Method)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at java.lang.reflect.Method.invoke(Method.java:511)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 06-07 18:23:45.650: E/AndroidRuntime(2387):    at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我了解 HTTPClient 的磨损情况。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:07:58.440

当应用程序尝试在其主线程上执行网络操作时引发的异常。

使用 asynctask 或 Thread 类进行网络调用。

# winforms - winforms图表中沿X轴移动的箭头注释

> ID：10932246
> 
> 赞同：1
> 
> 时间：2012-06-07T12:56:35.330
> 
> 标签：winforms, charts

我正在使用一个很好用的 trackBar 和一个计时器来制作一个 winforms 图表的动画。我想在这个动画上展示市场水平。市场水平只是 X 轴上的一个点。我有 4 个相互对应的图表区域。

我已经设法通过将以下代码放置在循环通过图表区域的循环中使用线注释来实现这一点（我清除动画的每一帧的注释集合）：

```
 VerticalLineAnnotation line = new VerticalLineAnnotation();

            line.IsInfinitive = true;
            line.ClipToChartArea = chartArea.Name;
            line.LineWidth = 3;
            line.LineColor = Color.MediumSeaGreen;
            line.AxisX = chartArea.AxisX;
            line.X = marketLevel;

            chrOI.Annotations.Add(line); 
```

但不是垂直线，我更喜欢只有一个指向 X 轴上相关位置的箭头。

所以目前我有：

![线注释](../Images/40fc23aea89921e20a91ff2254b92a5b.png)

但我更喜欢我在油漆中制作的这个模拟示例：

![使用箭头注释模拟](../Images/8b44162e9f3b67aed6d31ef3c0d4812b.png)

有任何想法吗？

# c++ - 从 Linux 交叉编译到 Windows 时我应该如何处理字符编码？

> ID：10932249
> 
> 赞同：1
> 
> 时间：2012-06-07T12:56:45.127
> 
> 标签：c++, windows, linux, mingw, cross-compiling

使用 mingw 从 Linux 交叉编译到 Windows 时，我应该如何处理字符编码/转换问题？

* * *

我正在尝试在 Linux 系统上为 Windows 目标交叉编译 Qt 项目。我已经安装（我相信是）所有必需的 mingw 包，并且我认为我的环境配置正确。但是，当我尝试配置 Qt 库时，尝试编译时失败`project.cpp`：

```
project.cpp: In member function 'QStringList& QMakeProject::values(const QString&, QMap<QString, QStringList>&)':
project.cpp:3062:51: error: cannot convert 'wchar_t*' to 'LPSTR {aka char*}' for argument '1' to 'WINBOOL GetComputerNameA(LPSTR, LPDWORD)'
gmake: *** [project.o] Error 1 
```

`wchar_t*`我可以通过在代码中替换为来解决这个错误`LPSTR`，但后来我又遇到了另一个错误。很明显，我现在面临字符编码问题。我想象可能有一些编译器选项可以正确处理转换（我正在查看`fexec-charset`），但我什至不确定这个问题。我知道这`LPSTR`和类似的东西是 Microsoft typedef，但是当从 Linux 为 Windows 目标交叉编译时，mingw 应该如何处理它们？

谢谢！

* * *

以下是 qmake/project.cpp 中的违规代码行：

```
DWORD name_length = 1024;
wchar_t name[1024];
if (GetComputerName(name, &name_length))
    ret = QString::fromWCharArray(name); 
```

它似乎`GetComputerName`是一个正在扩展的宏`GetComputerNameA`，当我显然需要时`GetComputerNameW`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:09:35.613

默认情况下，几乎所有 Windows API 函数（例如`GetComputerName`）都将解析为 ANSI 实现（例如`GetComputerNameA`），而不是它们的宽字符变体（例如`GetComputerNameW`）。

`#define UNICODE`在您之前尝试`#include <windows.h>`或将宏作为参数传递给您的编译器。

有关更多信息，请参阅[this](http://en.wikibooks.org/wiki/Windows_Programming/Unicode#Windows_Implementation)和[this](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/15/184076.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:00:47.600

您需要使用宽版本的 WINAPI 函数：`GetComputerNameA`成为`GetComputerNameW`等。

Unicode 版本（又名“宽”）以 a 为后缀，`W`而 ANSI 版本以`A`. 它们分别接受`LPWSTR`和`LPSTR`作为字符串参数（LPWSTR 是 wchar_t* 的别名）。

根据您的 unicode 配置，还有一些宏可以扩展为一个或另一个。有关示例，请参见 msdn 的文档：[GetComputerName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724295%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T17:19:55.267

你错误地配置了 Qt。

正确配置的 Qt 构建添加`-DUNICODE -D_UNICODE`（以及许多其他内容）可以解决您遇到的问题。

交叉编译 Qt 不是一件有趣的事，也不容易正确完成。

# c# - 如何从自托管 WCF 服务获取/设置对应用程序其余部分的引用？

> ID：10932251
> 
> 赞同：0
> 
> 时间：2012-06-07T12:56:49.200
> 
> 标签：c#, wcf

假设我有一个 Windows 窗体应用程序，应该使用 .net 从远程位置进行远程控制或影响。

据我用谷歌搜索，在该应用程序中托管 WCF 服务将是可行的方法。我已经成功地向应用程序添加了 WCF 服务，并且可以使用它启动它

```
 ServiceHost host = new ServiceHost(typeof(Service1));   
    host.Open(); 
```

什么是从正在运行的应用程序的其余部分获取对类的引用的好方法？
我想只有这两种方式：

*   使用静态属性从服务方法中调用其他方法/设置属性。
*   分配对服务类的引用？（如何为服务主机中托管的服务分配值？）

什么被认为是好的做法，或者更确切地说，过去哪种方式对你有用？

**根据评论更新**
我猜我正在寻找这样的东西：

```
 ServiceHost host = new ServiceHost(typeof(Service1));   
    host.Open();  
    (Service1)host.MyProperty = "asd"; 
```

我似乎找不到如何将 ServiceHost（或其属性）转换为 Service1 的实例。那可能会解决我所有的问题；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:37:25.983

您不能真正根据评论执行您添加的操作：

```
ServiceHost host = new ServiceHost(typeof(Service1));
host.Open();
(Service1)host.MyProperty = "asd"; 
```

因为那时`Service1`还没有创建类的实例。并且它们只会在新的服务请求到达时创建。

一种替代方法是使用自定义实例提供程序（如下面的代码所示），在 WCF 运行时使用服务实例之前，您可以在其中引用它。[您可以在http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/31/wcf-extensibility-iinstanceprovider.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/31/wcf-extensibility-iinstanceprovider.aspx)阅读有关实例提供程序的更多信息。

```
public class StackOverflow_10932251
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
    }
    public class Service : ITest
    {
        public string MyProperty { get; set; }
        public string Echo(string text)
        {
            Console.WriteLine("Inside Service.Echo, MyProperty = {0}", this.MyProperty);
            return text;
        }
    }
    static Binding GetBinding()
    {
        var result = new WSHttpBinding(SecurityMode.None);
        return result;
    }
    public class MyInstanceProvider : IEndpointBehavior, IInstanceProvider
    {
        string propertyValue;
        public MyInstanceProvider(string propertyValue)
        {
            this.propertyValue = propertyValue;
        }

        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            endpointDispatcher.DispatchRuntime.InstanceProvider = this;
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        public object GetInstance(InstanceContext instanceContext, Message message)
        {
            return new Service { MyProperty = this.propertyValue };
        }

        public object GetInstance(InstanceContext instanceContext)
        {
            return new Service { MyProperty = this.propertyValue };
        }

        public void ReleaseInstance(InstanceContext instanceContext, object instance)
        {
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(ITest), GetBinding(), "");
        endpoint.Behaviors.Add(new MyInstanceProvider("asd"));
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(GetBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();
        Console.WriteLine(proxy.Echo("Hello"));

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:38:03.873

当您创建`ServiceHost`和调用`Open`时，您的服务开始侦听请求。默认行为（尽管您可以更改此行为）是`Service1`仅在处理客户端请求时创建实例。换句话说，只要有客户端请求，`ServiceHost`就会创建一个实例，`Service1`然后调用其适当的方法（客户端调用的任何服务操作）来处理请求。因此，您*不会*尝试检索（当然也不能强制转换）`Service1`来自的实例（除非有客户端请求，否则`ServiceHost`没有实例）。`Service1`

如果您提供一个示例说明您为什么需要将 a`ServiceHost`转换为`Service1`，我们也许可以提供替代方法。

# javascript - jquery before() after() 无法正常工作

> ID：10932257
> 
> 赞同：1
> 
> 时间：2012-06-07T12:57:01.547
> 
> 标签：javascript, jquery, dom-manipulation

实际上我试图在 ul 之前插入这些（`<div class="error_msg_div"><div class="error_msgicon_div"><span class="sprite_16x16_group_errorinfo fl rmar5"></span></div><div class="error_msgtext_div">`）东西，在 ul之后插入这些

（ ）东西`</div><div class="error_msgcloseicon_div"><span class="sprite_16x16_group_blueclose_icon fl curpointer"></span></div><div class="clearfloat"></div></div>`。

但在这里它插入了 div 标签，但它会自动关闭 div，但我不希望那样

因为我试图将 ul 推到一个 div 内。这没有发生在这里

我的**[jsfiddle在这里](http://jsfiddle.net/sureshpattu/hrFuU/2/)**
这是我的脚本：

```
if($('span.error_span:has(ul.validation-messages)')){
                $('ul.validation-messages').before('<div class="error_msg_div"><div class="error_msgicon_div"><span class="sprite_16x16_group_errorinfo fl rmar5"></span></div><div class="error_msgtext_div">');
                $('ul.validation-messages').after('</div><div class="error_msgcloseicon_div"><span class="sprite_16x16_group_blueclose_icon fl curpointer"></span></div><div class="clearfloat"></div></div>');
            }​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:59:46.183

请注意，您正在使用这些函数操作 DOM，而不仅仅是连接一些包含 HTML 的字符串。您不能附加`</div>`.

您应该使用[`wrap()`](http://api.jquery.com/wrap/)在列表周围添加该 div，然后使用`before()`and`after()`插入其他 div。

```
$('ul.validation-messages')
    .wrap('<div class="error_msg_div">')
    .before('<div class="error_msgicon_div"><span class="sprite_16x16_group_errorinfo fl rmar5"></span></div><div class="error_msgtext_div">')
    .after('<div class="error_msgcloseicon_div"><span class="sprite_16x16_group_blueclose_icon fl curpointer"></span></div><div class="clearfloat"></div></div>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T12:59:18.040

您是否尝试过使用[wrap](http://api.jquery.com/wrap/)而不是`before`and `after`？

# google-app-engine - Gmail 小工具可以使用 users.get_current_user() 吗？

> ID：10932263
> 
> 赞同：0
> 
> 时间：2012-06-07T12:57:11.647
> 
> 标签：google-app-engine, google-gadget

我正在尝试获取 Gmail 小工具的当前用户，但它似乎`users.get_current_user()`返回`None`，即使我显然已登录。

我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:02:33.053

get_current_user 返回登录到您的域的用户，在 Gmail 小部件中，用户登录到 gmail。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:52:13.203

您不能直接在 Gmail 小工具中使用用户 API，但可以[结合使用 OpenID 和小工具 API](https://developers.google.com/google-apps/marketplace/best_practices#gadget_sso)来验证您的用户。该文档是在 Gmail 上下文小工具（通过 Google Apps Marketplace 安装）的上下文中编写的，但这些原则仍适用于非上下文小工具。

文档中概述的内容与非上下文小工具中发生的情况之间的最大区别在于，Google Apps Marketplace 应用程序（及其配套小工具）会自动将 OpenID 列入白名单。如果没有安装 Marketplace，用户将在首次加载您的小工具时看到 OpenID 批准屏幕。

# java - 无法使用 java 代码创建 oracle 表

> ID：10932271
> 
> 赞同：-2
> 
> 时间：2012-06-07T12:57:45.593
> 
> 标签：java, sql, oracle

```
try {
    String strQry= "CREATE TABLE IF NOT EXISTS ERROR_DETAIL (\"SNO\"NUMBER(16,0),\"TABLE_NAME\"  VARCHAR2(32 BYTE),\"ERROR_DESC\" VARCHAR2(255 BYTE),\"XCOORDINATE\" FLOAT(126),\"YCOORDINATE\" FLOAT(126),\"STATUS\"  VARCHAR2(30 BYTE),\"COMMENT\" Varchar2(255 Byte),PRIMARY KEY (\"TABLE_NAME\", \"ERROR_DESC\") ENABLE);";
    stmt = con.createStatement();
    stmt.execute(strQry);

} catch (Exception e) {
    e.printStackTrace();
} 
```

此代码给出错误：

```
java.sql.SQLSyntaxErrorException: ORA-00922: missing or invalid option 
```

但相同的查询在 oracle 中正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:01:53.460

Print the content of your `strQry` variable, and you'll see that it's not valid:

*   you don't need double quotes around column names
*   you should have a space between each column name and its type
*   you shouldn't have a semi-colon at the end of the query

Moreover, I think you should use `executeUpdate()` and not `execute()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-06T08:14:41.760

尝试使用下面的代码。

```
try {
    String strQry= " CREATE TABLE IF NOT EXISTS ERROR_DETAIL (SNO NUMBER(16,0),TABLE_NAME VARCHAR2(32 BYTE),ERROR_DESC VARCHAR2(255 BYTE),XCOORDINATE FLOAT(126),YCOORDINATE FLOAT(126),STATUS VARCHAR2(30 BYTE),COMMENT Varchar2(255 Byte),PRIMARY KEY (TABLE_NAME, ERROR_DESC) ENABLE)";
    stmt = con.createStatement();    
    stmt.execute(strQry);                    

} catch (Exception e) { e.printStackTrace(); } 
```

更改只是删除`;`里面的“（即在给定的代码中它是启用的）；”；

我将其更改为启用)";

# ruby-on-rails - Ruby on Rails：两个 has_many same_models :through => different_model

> ID：10932272
> 
> 赞同：1
> 
> 时间：2012-06-07T12:57:46.657
> 
> 标签：ruby-on-rails, ruby, has-many-through

我想在同一个模型上创建 2 个 has_many 但它通过不同的模型（这是一个连接表）

这是代码：

```
class Content
  belongs_to :dis
  belongs_to :fac

  has_many :dis_representations, :through => :dis
  has_many :fac_representations, :through => :fac
end

class Fac
  has_many :fac_representations
  has_many :contents
end

class Dis
  has_many :dis_representations
  has_many :contents
end

class DisRepresentation
  belongs_to :user, :foreign_key => "e_user_id"
  belongs_to :dis
end

class FacRepresentation
  belongs_to :user, :foreign_key => "e_user_id"
  belongs_to :fac
end

class User
  has_many :dis_representations, :foreign_key => "e_user_id"
  has_many :fac_representations, :foreign_key => "e_user_id"
  has_many :dises, :through => :dis_representations
  has_many :facs, :through => :fac_representations
  has_many :contents, :through => :dises, :source => :contents
  has_many :contents, :through => :facs :source => :contents
end 
```

现在我想这样做：

```
User.first.contents 
```

如果我这样做，它几乎可以工作。唯一的问题是只有第二个 has_many :contents 被调用。

现在我可以通过创建这样的方法来解决它：

```
def contents
    (dises + facs).map(&:contents).flatten
end 
```

但是，如果我执行上述操作，我会丢失所有内容范围，因为内容会变成一个简单的数组。

有没有办法解决？也许我使用了完全错误的方法。还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:25:46.980

**如果 dis 和 fac 模型没有显着不同**，那么您可以将它们折叠成一组模型并引入一个“type”属性，让您可以区分这些不同类型的内容。然后你在尝试查询它时不会有问题（它只会在你想编写更复杂的查询时变得更糟），并且当你想添加更多内容类型时它会扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:32.017

我会为内容关联使用两个不同的名称，例如 dis_contents 和 fac_contents。

如果您想通过单个关联检索所有 Content 对象，您应该更改您的关联并使用多态连接表。

也许这个例子会有所帮助

[has_many：通过+多态关系](https://stackoverflow.com/questions/4115797/has-many-through-polymorphic-relationships)

# regex - Vim 是否有等效于 \X 来匹配 Unicode“字素簇”？

> ID：10932276
> 
> 赞同：8
> 
> 时间：2012-06-07T12:58:02.903
> 
> 标签：regex, vim, unicode

Unicode 指定[`\X`应该匹配“扩展字形簇”](https://stackoverflow.com/questions/9928505/what-does-the-expression-x-match-when-inside-a-regex) ——例如，一个基本字符后跟零个或多个组合字符。（我相信这是一种简化，但可能足以满足我的需要。）

我很确定至少 Perl 支持`\X`它的常规表达式。

但是 Vim 定义`\X`匹配一个非十六进制数字。

**Vim 是否有任何等效`\X`或任何方式来匹配 Unicode 扩展字素簇？**

Vim 确实有组合或“组合”字符的概念，但[它的文档](http://vimdoc.sourceforge.net/htmldoc/mbyte.html#mbyte-combining)并未涵盖正则表达式是否支持或如何支持它们。

Vim 似乎还没有直接支持这一点，但我仍然对一种解决方法感兴趣，在这种解决方法中，搜索将突出显示所有字符，这些字符至少包括最基本的`U+0300`to范围内的组合字符`U+0364`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:22:06.187

如果你的 vim 安装是用[perl support](http://vim.wikia.com/wiki/Perl_compatible_regular_expressions)编译的，你可以运行：

```
:perldo s/\X/replacement/g 
```

我安装`vim-nox`在 debian 上（其中包含 perl 支持），并且与`\X`with匹配`perldo`确实有效，但我不确定它是否会满足您的需求，因为所有普通字符也都匹配，而且似乎`perldo`不会让您突出显示在 vim.

虽然它并不完美，但如果您可以获得 perl 支持，您可以使用 unicode 块和类别。这意味着您可以使用`\p{Block: Combining_Diacritical_Marks}`或`\p{Category: Nonspacing_Mark}`至少检测某些字符，尽管您仍然不会突出显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:52:59.120

您可以搜索所有字符并忽略使用`\Z`. 或者，您可以搜索一系列 Unicode 字符。阅读`:help /[]`有关两者的更多信息。

这里的最后一篇文章可能会提供更多帮助：

[http://vim.1045645.n5.nabble.com/using-regexp-to-search-for-Unicode-code-points-and-properties-td1190333.html](http://vim.1045645.n5.nabble.com/using-regexp-to-search-for-Unicode-code-points-and-properties-td1190333.html)

但是 Vim 的正则表达式没有像 Perl 这样的字符类。

# javascript - 读取 url 并输出新的 javascript src

> ID：10932278
> 
> 赞同：0
> 
> 时间：2012-06-07T12:58:04.080
> 
> 标签：javascript, jquery

所以基本上在页面加载时我想做以下事情：

```
<script>
    $(document).ready(function () {
        if (document.location.hostname == "somemachine.poc") {
            var fileref = document.createElement('script')
            fileref.setAttribute("type", "text/javascript")
            fileref.setAttribute("src", "myscript.js")
        }
    });
</script> 
```

这在理论和实践上是否正确？出于某种原因，我把它放在我的页面上，但它没有按预期工作，甚至没有出现在页面的源代码中。

所以我最终要做的是检查几个域，这取决于 .js 的不同 src 将加载哪个域。

## 更新

下面的答案帮助我解决了这个问题，我有一个新问题，这个问题自然会出现在这个问题上，可以在这里找到：[Losing entire page DOM running javascript](https://stackoverflow.com/questions/10934678/losing-entire-page-dom-running-javascript)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:00:43.630

您必须将脚本添加到文档中。

```
document.body.appendChild(fileref); 
```

但它仍然不会出现在源代码中。由 JS 修改的 DOM 不是源。您必须使用 DOM 查看器才能看到它（例如 Chrome Developer Tools 或 Opera Dragonfly）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:01:01.053

您还应该在文档中注入您的脚本元素，例如

```
document.body.appendChild(fileref); 
```

仅创建元素不足以使其运行，因为它没有作为 DOM 的一部分附加

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:01:44.393

不确定您要做什么，但您从未真正将`<script>`元素添加到`DOM`您提供的代码中。您需要执行以下操作：

```
document.getElementByTagName("head")[0].appendChild(fileRef); 
```

# c# - 声明一个空的 Queryable？

> ID：10932283
> 
> 赞同：21
> 
> 时间：2012-06-07T12:58:26.977
> 
> 标签：c#, linq, iqueryable

如何声明这样的变量？

```
 var rData = from nc in ctx.NEWSLETTER_CLIENTS
                        join ni in ctx.NEWSLETTER_INDICES on nc.INDEX_NUM 
                                                          equals ni.INDEX_NUM
                        select new
                        {
                            ClientID = nc.CLIENT_ID,
                            Email = nc.CLIENT_EMAIL_ADDRESS,
                            Index = nc.INDEX_NUM,
                            MainClass = ni.MAIN_CLASS,
                            SubClass = ni.SUB_CLASS,
                            App1 = ni.VALUE_1,
                            App2 = ni.VALUE_2,
                            App3 = ni.VALUE_3,
                            App4 = ni.VALUE_4
                        };

        // Now I need to declare on a variable named fData under the function scope,
        // so I can later use it:

        var fData = ...; //What do I declare here?

        if(x)
            fData = fData.Concat(rData.Where(u => ...));
        if(y)
            fData = fData.Concat(rData.Where(u => ...));
        // etc 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-07T13:00:29.463

```
IQueryable<type of p> fData = null; 
```

如果您想稍后使用查询（if 之后的 iow）：

```
var fData = Enumerable.Empty<type of p>().AsQueryable(); 
```

**更新：**

现在用于匿名类型：

```
IQueryable<T> RestOfMethod<T>(IQueryable<T> rData)
{
  var fData = Enumerable.Empty<T>().AsQueryable(); // or = rData;

  if(x)
    fData = fData.Concat(rData.Where(u => ...));
  if(y)
    fData = fData.Concat(rData.Where(u => ...));

  return fData;
}

// original code location
var rData = some query;
var fData = RestOfMethod(rData); 
```

**更新 2：**

正如所指出的，上述实际上不起作用，因为谓词 of`Where`不知道类型。您可以对其进行更多重构以在参数中包含谓词，例如：

```
IQueryable<T> RestOfMethod<T>(IQueryable<T> rData, 
  Expression<Func<T,bool>> pred1,
  Expression<Func<T,bool>> pred2) 
{ ... } 
```

**更新3：（也许是hacky）**

```
var fData = rData.Take(0); // should be cheap. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:51:06.773

好吧，以下解决方案可能很糟糕（甚至包含一些不需要的开销），*但是*，它可以工作：

```
var fData = from p in rData
            where 0 == 1
            select p;

if(x)
    fData = fData.Concat(rData.Where(u => ...));
if(y)
    fData = fData.Concat(rData.Where(u => ...)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T13:01:26.113

您可以将其声明为**IQueryable**而不是**var**。不能将 fData 声明为**var**的原因是因为“var”需要在声明期间推断类型。如果你提前知道类型，你可以声明它就好了。

```
IQueryable fData = null; 
```

更好的是，如果您知道**p**的类型，您可以使用 IQueryable 的通用形式将其设为强类型：

```
IQueryable<type-of-p> fdata = null; 
```

请注意，这将分配*null*！如果你尝试使用它，你会得到一个空引用异常。如果您确实想要一个*空*的Queryable 对象，请使用 leppie 的建议，并使用[Enumerable.Empty()](http://msdn.microsoft.com/en-us/library/bb341042.aspx)创建一个空集合。[AsQueryable()](http://msdn.microsoft.com/en-us/library/bb507003)方法链。

# java - Java 泛型和 Groovy 重载

> ID：10932288
> 
> 赞同：4
> 
> 时间：2012-06-07T12:58:47.360
> 
> 标签：java, generics, groovy, easymock, type-erasure

我使用 Groovy、JUnit 和 EasyMock 为我的 Java 应用程序编写单元测试。在 EasyMock 中，有几个重载方法`capture()`已被弃用，并附有注释“由于更严格的擦除强制，在 Java 7 中无法编译”。这些方法将类型的对象作为参数`Capture<T>`。除其他外，存在以下方法：

*   `static boolean capture(Capture<Boolean> captured)`
*   `static boolean capture(Capture<Integer> captured)`
*   ...
*   `static <T> T capture(Capture<T> captured)`

这在 Java 中不再允许，但如果您直接从 Java 调用该代码，则会调用正确的方法。例如，当您执行此代码时

```
Capture<MyClass> myClassCapture = new Capture<MyClass>();
mockObject.someMethod(capture(myClassCapture)); 
```

正确的方法（列表中的最后一个）被调用。

另一方面，如果您从 Groovy 内部调用相同的代码，则会调用列表中的第一个方法，并在我的测试中给出错误。我认为这与 Java 和 Groovy 如何解析方法有关。我的假设是 Java 在编译时绑定该方法，而 Groovy 尝试在运行时查找该方法并采用它可以找到的任何方法（可能是第一个）。

谁能解释一下这里发生了什么？这将有助于更准确地理解 Java 和 Groovy 之间的不同行为。

我通过将 Groovy 内部的调用委托给一个 Java 方法来修复它，该方法将为我完成这项工作：

```
public class EasyMockUtils {

    public static <T> T captureObject(Capture<T> captureForObject) {
        return EasyMock.capture(captureForObject);
    }
} 
```

有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T16:24:48.233

自己使用 EasyMock 3.0 解决这个问题。然而，从 EasyMock 3.2 开始，它似乎已经通过重命名所有采用包装原语的方法并只留下一个剩余的捕获方法来解决。

查看 3.2 文档以获取更多信息：[http ://easymock.org/api/easymock/3.2/org/easymock/EasyMock.html#capture%28org.easymock.Capture%29](http://easymock.org/api/easymock/3.2/org/easymock/EasyMock.html#capture%28org.easymock.Capture%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:54:15.860

尝试使用 Groovy 2.0 的 @CompileStatic - 可能会解决您的问题

# iphone - 使用 xode4 时出现编译错误

> ID：10932289
> 
> 赞同：2
> 
> 时间：2012-06-07T12:58:56.100
> 
> 标签：iphone, objective-c, xcode

我使用[DCControls](https://github.com/domesticcatsoftware/DCControls)，它是一个扩展的开源 UIControll。我下载了一个运行它`XCode 4`，我得到如下错误：

```
clang: error: no such file or directory: '/Users/apple/Desktop/domesticcatsoftware-DCControls-722bb9c/../DCIntrospect/DCIntrospect/DCCrossHairView.m'
clang: error: no input files
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我已经搜索了`DCCrossHairView.m`这个项目的错误消息中指示的文件。`No search result`. 我想知道可能的原因以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:09:58.950

你是绝对正确的。似乎他们有一些文件用于测试（或任何原因），他们*确实*删除了文件但没有删除参考。只需选择该`DCIntrospect`组并将其删除。之后它应该可以正常构建（刚刚尝试过并且可以正常工作）

![在此处输入图像描述](../Images/a7f6451816970ba4dec815880942f06d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:08:20.013

即使我下载了示例应用程序，发现一些文件丢失了。在 xcode 中转到 DCIntrospect 文件夹，你会发现一些文件已被删除，它们甚至不存在于项目中，甚至你的 DCCrossHairView。删除这些文件，它会工作。

# c# - Azure Web 角色中的后台线程

> ID：10932291
> 
> 赞同：6
> 
> 时间：2012-06-07T12:59:03.007
> 
> 标签：c#, multithreading, azure, azure-web-roles

是否可以从 WebRole.cs OnStart() 方法运行线程，以便我们能够通过 aspx 页面访问它以执行后台工作？我知道正确的做法是使用 Worker Role，但我希望将运行成本保持在尽可能低的水平。

这个想法是创建一个始终运行并等待作业的线程，例如，如果我想做一个阻塞操作，比如发送电子邮件，我会使用提供 SendEmail 方法的线程，有可能吗？如果是这样，您能否提供一些可以为我指明正确方向的示例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T13:32:11.673

我会建议一个不同于 Leon 和 David 的解决方案的解决方案：

*   大卫的解决方案还可以，但没有弹性。处理任务时实例/进程离线是什么？
*   Leon 的解决方案主要适用于预定的工作，但发送电子邮件并不总是预定的（也许您想在有人在您的应用程序中注册时发送电子邮件）。

您应该考虑的另一个选项是在这种情况下使用 Windows Azure 存储队列（它们非常便宜）：

*   您的 Web 应用程序：向队列发送消息（例如“向某人@someone.com 发送电子邮件”）
*   WebRole.cs：在启动实例时产生一个新线程并让它监听来自该队列的消息。每当消息到达时，对其进行处理。如果成功，则从队列中删除消息。

这种解决方案有很多优点。WebRole.cs 在与您的 Web 应用程序不同的进程中运行，因此对请求线程没有影响。除此之外，如果由于某种原因发送邮件失败，邮件将留在队列中，并在下一次处理。这将确保您在应用程序或进程崩溃时不会丢失任何要执行的任务。

这是一个帮助您入门的示例。请注意，如果您希望此代码可用于生产（重试策略、异常处理、退避轮询……），则需要改进此代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.Diagnostics;
using Microsoft.WindowsAzure.ServiceRuntime;
using Microsoft.WindowsAzure.StorageClient;
using System.Threading.Tasks;

namespace MvcWebRole1
{
    public class WebRole : RoleEntryPoint
    {
        public override bool OnStart()
        {
            Task.Factory.StartNew(InitializeQueueListener);
            return base.OnStart();
        }

        private void InitializeQueueListener()
        {
            Microsoft.WindowsAzure.CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
            {
                configSetter(Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue(configName));
            });

            var storageAccount = CloudStorageAccount.FromConfigurationSetting("DataConnectionString");
            var queueStorage = storageAccount.CreateCloudQueueClient();
            var queue = queueStorage.GetQueueReference("myqueue");
            queue.CreateIfNotExist();

            while (true)
            {
                CloudQueueMessage msg = queue.GetMessage();
                if (msg != null)
                {
                    // DO SOMETHING HERE
                    queue.DeleteMessage(msg);
                }
                else
                {
                    System.Threading.Thread.Sleep(1000);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:11:54.803

绝对可以创建一个线程（或许多线程）。Web 角色基本上是 Windows 2008 Server。您不需要单独的 Worker 角色来设置后台任务。当然，您*可以*拥有一个单独的工作者角色，这将允许您独立于您的 Web 角色实例来扩展这些实例。这是您需要平衡性能/扩展与成本的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:10:44.990

我在寻找“天蓝色计划任务”时发现了这一点：[http ://www.ronaldwidha.net/2011/02/23/cron-job-on-azure-using-scheduled-task-on-a-web-角色替换天蓝色工人角色换后台作业/](http://www.ronaldwidha.net/2011/02/23/cron-job-on-azure-using-scheduled-task-on-a-web-role-to-replace-azure-worker-role-for-background-job/)

看起来正是您正在寻找的东西。

# c++ - 使用可变参数模板的基于策略的设计

> ID：10932292
> 
> 赞同：5
> 
> 时间：2012-06-07T12:59:03.147
> 
> 标签：c++, templates, c++11, variadic-templates, policy-based-design

我有一组同类策略类，我想将它们作为策略传递给一个模板类 PolicyDrivenClass，它采用一些未知数量的策略模板参数。

每个策略都实现了一个“名称”功能，我希望能够在运行时通过 PolicyDriveClass::getNames 查询所有策略的名称。

我有一个可行的实现，但感觉很笨拙，特别是考虑到在我的最终设计中，策略类将实现几个类似于“名称”的函数，尽管可能具有不同的返回类型，并且我的策略驱动类将希望提供类似的访问器为这些函数中的每一个“getNames”。

我的问题是是否有人可以为此提出更好的实施方案。

为了它的价值，我正在使用 clang++。我的 g++ 版本不喜欢这样。

这是我到目前为止所拥有的：

```
#include <string>
#include <deque>
#include <algorithm>
#include <iterator>
#include <iostream>
using namespace std;

template<typename... Policies>
class PolicyDrivenClass
{
   public:

      template<typename T, typename... Types>
      class NameExtractor
      {
         public:
            static deque<string> getNames() 
            {
               deque<string> names = NameExtractor<Types...>::getNames();
               names.push_front(T::name());
               return names;
            }

      };
      template<typename T>
      class NameExtractor<T>
      {
         public:
            static deque<string> getNames() 
            {
               deque<string> ret;
               ret.push_back(T::name());
               return ret;
            }
      };

      deque<string> getNames() const
      {
         return NameExtractor<Policies...>().getNames();
      }
};

class Policy1
{
   public:
      static string name(){return "policy 1";}
};

class Policy2
{
   public:
      static string name(){return "policy 2";}
};

class Policy3
{
   public:
      static string name(){return "policy 3";}
};

int main()
{
   PolicyDrivenClass<Policy1, Policy2, Policy3> c;
   deque<string> names = c.getNames();

   ostream_iterator<string> out (cerr,"\n");
   copy(names.begin(), names.end(), out);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:12:54.780

你说的对。有更简单的方法来获取名称列表。以下适用于 GCC-4.7：

```
template <typename ...Policies>
struct PolicyDrivenClass
{
    std::deque<std::string> getNames() const 
    {
        return { Policies::name()... };
    }
}; 
```

**编辑：**将函数的声明部分更改为旧语法。就个人而言，我更喜欢新语法：

```
 auto getNames() const -> std::deque<std::string>; 
```

# ajax - jQuery：为什么 $.ajax() 在返回之前不等待请求完成？

> ID：10932293
> 
> 赞同：13
> 
> 时间：2012-06-07T12:59:07.517
> 
> 标签：ajax, jquery

我刚刚花了 3 个小时调试一些代码，却发现它是由我假设以下代码的执行顺序是线性的：-

```
$.ajax( {ajax options} );
console.log('I was assuming this would execute once the ajax request was complete'); 
```

这不是第一次给我带来问题，我只是想知道这种行为的原因是什么？

是否任何 ajax 请求都不会阻止其他可能与 ajax 请求无关的脚本执行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T13:19:31.467

大多数其他答案都在回答如何处理这个问题。我想非常简要地看看*为什么*异步在这种情况下是好的。

事实上，*大多数*浏览器内的 Javascript 都是异步的。举个例子，这段代码：

```
document.getElementById('foo').onclick = function() {
    alert('foo clicked');
};
document.getElementById('bar').onclick = function() {
    alert('bar clicked');
}; 
```

哪个会先运行？您不知道，因为浏览器模型（或者实际上是大多数事件驱动代码）固有的异步性。当事件发生时运行代码。您设置文档，然后等待事件发生，您的代码可以以各种不同的顺序执行，具体取决于首先发生的事件。Javascript 代码需要在页面的整个生命周期内执行，而不仅仅是在首次创建时。

所以*一般来说*Javascript 编程（或者至少，超越最简单级别的 Javascript 编程）通常是异步的。此外，HTTP 请求也是异步的也很有意义。

首先，正如您在问题中暗示的那样，使代码同步会阻止执行。也就是说，您可能不想让动画等待两秒钟才能开始，因为您正在向前两行发出 HTTP 请求。服务器响应时间可能 (a) 不规则和 (b) 缓慢，因此应用程序的设计依赖于服务器响应的速度是没有意义的。

其次，更重要的是，您的用户不会因为您的脚本正在进行 AJAX 调用而停止使用该页面。你的用户不在乎。您的用户可能会关心您的正常`onscroll`行为不起作用，因为您的脚本当前与不相关的 AJAX 请求相关联。为了配合整个浏览器 Javascript 编程的异步特性，绝大多数 HTTP 调用应该是非阻塞的、异步的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T13:01:50.850

**because ajax is Asynchronous**. if you want to execute something on the success of ajax call, use the success event

```
$.ajax({
  url: 'yourserverpage.php',
  success: function(data) {

    alert('This will be executed only when ajax call is success /finished');
  }
}); 
```

**[Asynchronous](http://en.wikipedia.org/wiki/Asynchronous_I/O) means ?**

> Asynchronous I/O, or non-blocking I/O, is a form of input/output processing that permits other processing to continue before the transmission has finished.Asynchronous I/O is used to improve throughput, latency, and/or responsiveness.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-16T08:17:10.920

jQuery`$.ajax()`提供了 4 个（事件）选项供您使用：beforeSend、success、error 和 complete。我认为在您的情况下，*完整*将是正确的答案。

例如

```
$.ajax({
  url: someUrl,
  //...
  beforeSend: function(){
    console.log("I'm sending AJAX.");
    //display loading?
  },
  success: function(data){
    console.log('response: '+data);
  },
  error: function(er){
    console.log(er.responseText);
  },
  complete: function(){
    console.log("I'm done.");
    //hide loading?
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:04:01.517

您可以成功，也可以使用`.done();`

```
$.ajax( {ajax options} ).done(console.log('I was assuming this would execute once the ajax request was complete')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T13:01:27.087

要阻止 AJAX 完成，您需要将代码放入`success:`函数中，如下所示：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    // Do something after AJAX is completed.
    console.log('I was assuming this would execute once the ajax request was complete');
  }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T13:16:12.307

The first **A** in **AJAX** stands for **Asynchronous**; that means AJAX calls are executed in the background and do not hold up the execution of the script until they are finished. This is pretty much by design.

If you want to run some code when the call finishes, you can pass a function in one or more of the following parameters:

```
$.ajax({
  // your other options

  done: function(data, textStatus, jqXHR) {
    alert('Success! I got the following data back: ' + data);
    // this runs when the request has finished successfully
  },

  fail: function(jqXHR, textStatus, errorThrown) {
    alert('Oops, there was an error :(');
    // this runs when the request has finished, but with an error
  },

  always: function(jqXHR, textStatus) {
    alert("OK, I'm done.");
    // this runs when the call is finished, regardless
    // of whether it has succeeded or not
  } 
```

For more info, check out the API: [http://api.jquery.com/jQuery.ajax](http://api.jquery.com/jQuery.ajax)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-17T11:21:37.153

另一种选择是简单地将 async 设置为 false

```
$.ajax({
  async : 'false',
  other options
}); 
```

这样，在 $.ajax 语句完成之前，您的下一条语句不会被执行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T13:01:31.150

`$.ajax`是一个异步函数，因此在返回之前不会等待请求完成。相反，当请求完成时，它会调用您指定的回调函数`success`和/或`error`。

如果您确实需要同步 bahviour，您可以将选项设置`async`为 false。（见[文档](http://api.jquery.com/jQuery.ajax/)）。但在这种情况下请注意，您的整个 UI 会冻结，直到请求完成！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-07T13:12:20.970

正如其他人所说，ajax 代表**Asynchronous Javascript 和 Xml**。话虽如此，您可以使用[jquerys ajax](http://api.jquery.com/jQuery.ajax/)函数执行以下任一操作：

1.  如果您希望调用是同步的，请将“async”选项设置为 false。默认情况下是这样。请参阅文档。从 jQuery 1.8 开始，不推荐使用此属性。

2.  提供“完整”回调。默认情况下，这将异步发生。这是：

    > 请求完成时要调用的函数（在执行成功和错误回调之后）。

3.  提供“成功”回调。默认情况下，这将异步发生。这是：

    > 请求成功时调用的函数。

# objective-c - Objective-C 运行时 - 如何使用 setValue 设置 CGRect

> ID：10932297
> 
> 赞同：2
> 
> 时间：2012-06-07T12:59:23.613
> 
> 标签：objective-c, key-value-coding

当该属性是 CGRect 时，如何设置实例的属性。我想做这个：

```
CGRect rect = CGRectFromString(value);
[localClassObjectInstance setValue:rect forKey:key]; 
```

但编译器不喜欢 setValue；它说我将 CGRect 发送到不兼容类型“id”的参数。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T13:02:22.070

您必须将 CGRect 转换为 NSValue （反之亦然）：

```
 NSValue *myValue = [NSValue valueWithCGRect:rect]; 
```

NSValue 是一个对象（所以它的类型是“id”）。

然后你可以得到 CGRect 回来：

```
 CGRect myRect = [myValue CGRectValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:01:57.440

`NSValue` and `NSNumber` are to handle cases when the value is not an obj-c object:

```
NSRect rect = ...;
[object setValue:[NSValue valueWithRect:rect] forKey:key];

NSValue* val = [object valueForKey:key];
NSRect extractedRect = [val rectValue]; 
```

To store `GCRect` with Mac OS X SDK, you have to convert it to `NSRect` first using `NSRectFromCGRect` and `NSRectToCGRect` functions. On iOS, there are `valueWithCGRect`/`CGRectValue` methods instead (see @viggio24 answer).

# ruby-on-rails - 如何在 Rails Model 和 form_for 中使用自定义函数？

> ID：10932300
> 
> 赞同：1
> 
> 时间：2012-06-07T12:59:50.667
> 
> 标签：ruby-on-rails, activemodel

我正在尝试使用更改为支持 bcrypt 密码的模型，就像这样

```
require 'bcrypt'
class User < ActiveRecord::Base
  # users.password_hash in the database is a :string
  include BCrypt

  def password
    @password ||= Password.new(password_hash)
  end

  def password=(new_password)
    @password = Password.create(new_password)
    self.password_hash = @password
  end
end 
```

我在脚手架之后添加了这个，希望密码和密码 = 足以让它继续运行，使用这个，但是它不起作用，form_for() 等不起作用，我收到错误：

```
ActionView::Template::Error (invalid hash):
2012-06-07T12:45:20+00:00 app[web.1]:     17:   </div>
2012-06-07T12:45:20+00:00 app[web.1]:     18:   <div class="field">
2012-06-07T12:45:20+00:00 app[web.1]:     19:     <%= f.label :password %><br />
2012-06-07T12:45:20+00:00 app[web.1]:     20:     <%= f.text_field :password %>
2012-06-07T12:45:20+00:00 app[web.1]:     21:   </div>
2012-06-07T12:45:20+00:00 app[web.1]:     22:   <div class="field">
2012-06-07T12:45:20+00:00 app[web.1]:     23:     <%= f.label :email %><br /> 
```

有谁知道我怎样才能完成这项工作，我是 Rails 的新手

这是按要求在新功能完整回溯中：

```
2012-06-12T18:23:57+00:00 app[web.1]: ActionView::Template::Error (invalid hash):
2012-06-12T18:23:57+00:00 app[web.1]:     19:     <%= f.label :password %><br />
2012-06-12T18:23:57+00:00 app[web.1]:     18:   <div class="field">
2012-06-12T18:23:57+00:00 app[web.1]:     17:   </div>
2012-06-12T18:23:57+00:00 app[web.1]:     20:     <%= f.text_field :password %>
2012-06-12T18:23:57+00:00 app[web.1]:     22:   <div class="field">
2012-06-12T18:23:57+00:00 app[web.1]:     23:     <%= f.label :email %><br />
2012-06-12T18:23:57+00:00 app[web.1]:   app/models/user.rb:19:in `new'
2012-06-12T18:23:57+00:00 app[web.1]:     21:   </div>
2012-06-12T18:23:57+00:00 app[web.1]:   app/models/user.rb:19:in `password'
2012-06-12T18:23:57+00:00 app[web.1]:   app/views/users/_form.html.erb:20:in `block in _app_views_users__form_html_erb__2064609863987267967_31546180'
2012-06-12T18:23:57+00:00 app[web.1]:   app/views/users/_form.html.erb:1:in `_app_views_users__form_html_erb__2064609863987267967_31546180'
2012-06-12T18:23:57+00:00 app[web.1]:   app/views/users/new.html.erb:3:in `_app_views_users_new_html_erb___1991359801167056023_31763940'
2012-06-12T18:23:57+00:00 app[web.1]:   app/controllers/users_controller.rb:251:in `new' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:12:10.113

异常消息“invalid hash”表明您的视图工作正常，但`User#password`无论出于何种原因都失败了。也许用户没有定义密码哈希（即，它是 nil、“”或其他一些无效值），导致`Password.new`出错？

查看您的回溯似乎强化了这一点：

```
2012-06-12T18:23:57+00:00 app[web.1]:   app/models/user.rb:19:in `new'
2012-06-12T18:23:57+00:00 app[web.1]:   app/models/user.rb:19:in `password'. 
```

`new`在您的`password`方法内部调用时，错误发生在 user.rb 中。因此我猜第 19 行是

```
@password ||= Password.new(password_hash) 
```

所以它看起来像`Password.new`不喜欢的价值`password_hash`出于某种原因。究竟为什么，我只能猜测。

*   究竟是`Password`什么？
*   的价值是`password_hash`多少？

# c# - 将一位数转换为 2 位以上

> ID：10932305
> 
> 赞同：3
> 
> 时间：2012-06-07T13:00:09.297
> 
> 标签：c#, numbers, long-integer

我有一个数字，它的长度将超过 10 位，所以我不能将它保存在 INTEGER 变量中。所以我把它保存在一个 LONG 变量中。现在的问题是，在使用该 LONG 变量添加一个数字时，它会返回一个 Round 值。我在 C# 中工作。

*例如：*

```
long empId = 00000000001; 
long answer = empId + 1;  //  00000000001 + 1 = 2;
// answer == 2; 
```

但预期的答案是“00000000002”，如何实现这一点..

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:30:17.197

`empId.ToString("D11")`如果您希望您的数字在左侧填充零，直到总共有 11 个数字，请考虑使用。这只是（在 C# 中`System.Int64`也称为）的字符串表示形式。`long`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T13:04:24.833

当您谈论数字时，`00000000002`并`2`代表完全相同的事物。如果您想要`string`用零填充该数字的表示，请尝试以下操作：

```
answer.ToString().PadLeft(11, '0'); 
```

这将确保字符串至少有 11 个字符长，并将用零填充空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T13:03:58.137

前导 0 不重要，它们不是数值的一部分。它只是一个格式化工件。如果要保留 0，请将数字转换回具有适当格式字符串的字符串。

```
long value = ...
string s = value.ToString("0000000000"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:04:27.267

00000000002 和 2 是相同的长值。如果你想在开头有零，你可以使用 Long.ToString(string format) 方法：

```
string strAnswer = answer.ToString("00000000000"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-04T10:42:09.480

```
string VALUE = answer.ToString("00000000000"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T13:04:27.963

只需添加整数或长整数，然后将其转换为字符串，然后调用[string.PadLeft](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)

从文档：

> 返回一个新字符串，该字符串通过使用指定的 Unicode 字符在左侧填充指定的总长度来右对齐此实例中的字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T13:05:41.743

如果将数字 00000000001 表示为数字，则实际上它只是 1。如果您希望它在前面显示多个 0，那么我建议您在显示它时使用[String.PadLeft 。](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)例如：

```
long empId = 00000000001; // Actually sets empID to 1

long answer = empId + 1; // 1 + 1 = 2

string formattedAnswer = 1.ToString().PadLeft(10, '0'); // Creates a string of "0000000001" 
```

# ruby - 尝试调用邪恶的向导步骤时收到名称错误

> ID：10932308
> 
> 赞同：8
> 
> 时间：2012-06-07T13:00:19.587
> 
> 标签：ruby, gem, wizard, railscasts

我尝试重现[http://railscasts.com/episodes/346-wizard-forms-with-wicked](http://railscasts.com/episodes/346-wizard-forms-with-wicked) railscast。我尝试通过四步向导创建报告。我

1.  生成控制器report_steps
2.  添加**资源 :report_steps**到 routes.rb
3.  创建步骤视图

现在我尝试调用它（就像在 railscats 通过在浏览器的地址栏中键入 ***localhost:3000/report_steps/step1 一样***）并接收：

```
Routing Error

uninitialized constant ReportStepsController::Wicked 
```

问题是什么？我使用 ruby​​ 1.9 2 和 rails 3.0.12。

**UPD：**评论和取消评论后**包括 Wicked::Wizard**行为改变（这是一种魔法），现在我收到新错误：

```
NameError in ReportStepsController#show

uninitialized constant ReportStep 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:46:44.747

听起来您在模型中/与模型中缺少某些东西。你有模型`Report`吗？

您也可以在这里发布相关代码（控制器、模型、最终助手）吗？这将有助于找到`ReportStep`实际使用常量的点。

# jquery - 使用 jQuery 从标记创建多维数组？

> ID：10932310
> 
> 赞同：0
> 
> 时间：2012-06-07T13:00:26.437
> 
> 标签：jquery, multidimensional-array, flot

基本上，我想用 jQuery 标记中的数据创建一个多维数组（数组数组）。我正在使用数组来显示[Flot](http://code.google.com/p/flot/)图表。这是一个标记示例：

```
 <ul id='test1'>
       <li data-key='02/06'>34</li>
       <li data-key='03/06'>15</li>
       <li data-key='04/06'>55</li>
    </ul> 
```

这是我想要的格式：

```
 var array = [[02/06, 34], [03/06, 15], [04/06, 55]]; 
```

我已经看过一些`map()`JSON 示例，但无法真正从中弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:05:09.090

您想从 html 列表创建一个数组吗？

```
// init empty array
var array = [];
// for each li in test1 ...
$('#test1 li').each(function() {
    // add to the array an new array with key und value
    array.push([ $(this).data('key'), $(this).text() ]);
}); 
```

另请参阅[此示例](http://jsfiddle.net/seZQk/)。

# c - C中的rs232字符串比较

> ID：10932317
> 
> 赞同：3
> 
> 时间：2012-06-07T13:00:51.850
> 
> 标签：c, serial-port, strncmp

我正在尝试制作一个可以从 RS232 端口读取命令并将其用于下一步操作的程序。

我正在使用字符串比较命令将所需的“操作”字符串与 RS232 字符串进行比较。某处的字符串转换出了点问题。我使用 putstr commando 来查看我的微控制器从我的计算机中得到了什么，但它不能正常工作。它返回我的字符串的最后两个字符，中间有一个点或一个“d”。（我完全不知道 dot/d 是从哪里来的……）

所以这是我的主要代码：

```
int length;
char *str[20];
while(1)
{
    delayms(1000);
    length = 5; //maximum length per string
    getstr(*str, length); //get string from the RS232
    putstr(*str); //return the string to the computer by RS232 for debugging
    if (strncmp (*str,"prox",strlen("prox")) == 0) //check wether four letters in the string are the same as the word "prox"
    {
        LCD_clearscreen(0xF00F);
        printf ("prox detected");
    }
    else if (strncmp (*str,"AA",strlen("AA")) == 0) //check wether two letters in the string are the same as the chars "AA"
    {
        LCD_clearscreen(0x0F0F);
        printf ("AA detected");
    }
} 
```

这些是使用的 RS232 功能：

```
/*
 * p u t s t r
 *
 *  Send a string towards the RS232 port
 */
void putstr(char *s)
{
    while(*s != '\0')
    {
            putch(*s);
            s++;
    }
}

/*
 * p u t c h
 *
 *  Send a character towards the RS232 port
 */
void putch(char c)
{
    while(U1STAbits.UTXBF);     // Wait for space in the transmit buffer
    U1TXREG=c;
    if (debug) LCD_putc(c);
}

/*
 * g e t c
 *
 *  Receive a character of the RS232 port
 */
char getch(void)
{
    while(!has_c());    // Wait till data is available in the receive buffer
    return(U1RXREG);
}

/*
 * g e t s t r
 *
 * Receive a line with a maximum amount of characters
 * the line is closed with '\0'
 * the amount of received characters is returned
 */
 int getstr(char *buf, int size)
 {
    int i;

    for (i = 0 ; i < size-1 ; i++)
    {
        if ((buf[i++] = getch()) == '\n') break;
    }
    buf[i] = '\0';

    return(i);
} 
```

当我将这个程序与连接到终端的 Microchip 一起使用时，我得到如下信息：

```
What I send:
abcdefgh

What I get back (in sets of 3 characters):
adbc.de.fg.h 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:07:55.060

问题是你如何声明你的字符串。就像现在一样，您声明了一个包含 20 个`char`指针的数组。我认为您可能应该将其声明为普通`char`数组：

```
char str[20]; 
```

然后，当您将数组传递给函数时，只需使用 eg `getstr(str, length);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:22:17.920

据我所知，当您将指针传递给字符串时，strcmp 函数起作用，而不是字符串本身。

当你使用

```
char *str[20]; 
```

您正在声明一个名为“str”的指针数组，而不是一个 char 数组。

您的问题是您将指针数组传递给 strcmp 函数。您可以通过将字符串声明为：

```
 char string[20]; 
```

如果因为某些奇怪的原因需要使用 char *，下面的声明是等价的：

```
 char * str = malloc(20*sizeof(int)) 
```

希望这会有所帮助。

# windows - perl 优先于 glob @argv

> ID：10932327
> 
> 赞同：3
> 
> 时间：2012-06-07T13:01:27.387
> 
> 标签：windows, perl, glob, operator-precedence

由于在 Windows 上 *.csv 不会从命令行扩展到 @ARGV 我通常最终会做类似的事情

`map { glob } @ARGV`获取文件名。

然而，我遇到了一个异常，只是想了解到底发生了什么。我刚刚读完“陌生土地上的陌生人”，所以我可以说我没有完全摸索！

```
use Modern::Perl;

# gets the filelist but then warns
say "Test 1 ", '-' x 20;
do { func($_) for map { glob } @ARGV } or warn "at least one arg expected\n";
say '-' x 27, "\n";

# works ok
say "Test 2 ", '-' x 20;
my @x = map { glob } @ARGV or warn "at least one arg expected\n";
func($_) for @x;
say '-' x 27, "\n";

# prints 2 (there are two files)
say "Test 3 ", '-' x 20;
func($_) for (map { glob } @ARGV or warn "at least one arg expected\n");
say '-' x 27, "\n";

sub func { 
  say "in func = $_[0]";
} 
```

输出：

```
Test 1 --------------------
in func = t.csv
in func = t2.csv
at least one arg expected
---------------------------

Test 2 --------------------
in func = t.csv
in func = t2.csv
---------------------------

Test 3 --------------------
in func = 2
--------------------------- 
```

**Test1：**我不明白为什么`do`没有真正返回，`func`返回最后一个语句 is `say`，如果有输出则返回 true 。或者是`for`用作返回的那个`do`？

**测试3：**显然标量上下文是隐含的，但如何？我在地图周围使用了括号？

谢谢，理查德。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:56:54.647

### 测试 1

`for`第一种情况是由于语句修饰符而评估 false （您可能认为它是无效的） 。观察：

```
 DB<1> x do { func($_) for map { glob } @ARGV }
in func = t.csv
in func = t2.csv
0  ''
  DB<2> x do { func 't.csv' ; func 't2.csv' }
in func = t.csv
in func = t2.csv
0  1 
```

请注意，它是*语句*修饰符而不是表达式修饰符。在做出这种区分的语言中，表达式有返回值但没有语句。

Perl 就是这样一种语言。给定简单的程序

```
#! perl
@a = (1 for 6, 7, 8); 
```

尝试运行它失败并出现语法错误。

```
foo 第 2 行的语法错误，靠近“1 for”
由于编译错误，foo 的执行中止。
```

您可能会在第一次测试中更直接地表达您的意图

```
map func($_), map glob, @ARGV or warn "at least one arg expected\n"; 
```

给出预期的输出。

```
测试 1 -----------------
在 func = t.csv
在函数 = t2.csv
--------------------------
```

### 测试 3

在第三种情况下，您将获得标量上下文，因为这就是[Perl 的逻辑或被](http://perldoc.perl.org/perlop.html#C-style-Logical-Or)定义为工作的方式。

> ### C 风格的逻辑或
> 
> 二进制`||`执行短路逻辑或运算。也就是说，如果左操作数为真，则甚至不计算右操作数。如果计算，标量或列表上下文会向下传播到正确的操作数。

左操作数总是在二进制（标量）上下文中求值。整个表达式的上下文仅归入右操作数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:05:46.690

保持简单，并发布一个可行的、可移植的解决方案。

* * *

### 测试 1

您正在检查`do`.

它是 的结果，是`for`由 评估的最后一个操作`do`，并且`for`不返回任何有用的东西。

* * *

### 测试 2

您正在检查列表分配的结果。

标量上下文中的列表赋值评估其右侧 ( `map`) 返回的标量数量。

* * *

### 测试 3

您正在迭代`or`.

`or`返回它的 LHS（在标量上下文中评估）或它的 RHS 。那将是`map`在标量上下文中评估的返回值（数字）或`warn`（布尔值）返回的值。

* * *

您希望操作同时返回一个列表和一个数字。那是行不通的。

请注意，您需要`bsd_glob`，否则带有空格的路径将被破坏。（`glob`实际上使用了`bsd_glob`！）

```
use File::Glob qw( bsd_glob );
@ARGV = map bsd_glob($_), @ARGV if $^O eq 'MSWin32';
die if @ARGV < 2;
func($_) for @ARGV; 
```

# php - 包含特定 href 值的正则表达式剥离标签

> ID：10932335
> 
> 赞同：3
> 
> 时间：2012-06-07T13:01:51.370
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:16:26.897

这是一种更可靠的基于 DOM 的方法：

```
<?php

$a = 'Lorem ipsum <a href="http://mysite.com/testing/something">dolor</a> sit amet, <a href="http://keepingThisLink.com">consectetur</a> adipiscing elit. Duis dignissim <a href="http://mysite.com/testing">golor</a> vitae turpis fermentum tincidunt.';

$domd = new DOMDocument();
libxml_use_internal_errors(true);
$domd->loadHTML($a);

$domx = new DOMXPath($domd);
foreach ($domx->query("//a") as $link) {
    $href = $link->getAttribute("href");
    if ($href === "http://keepingThisLink.com") {
        continue;
    }

    $text = $domd->createTextNode($link->nodeValue);

    $link->parentNode->replaceChild($text, $link);
}

//unfortunately saveHTML adds doctype and a few unneccessary tags    
var_dump(preg_replace('/^<!DOCTYPE.+?>/', '', str_replace( array('<html>', '</html>', '<body>', '</body>'), array('', '', '', ''), $domd->saveHTML()))); 
```

输出是：

```
string(161) "
<p>Lorem ipsum dolor sit amet, <a href="http://keepingThisLink.com">consectetur</a> adipiscing elit. Duis dignissim golor vitae turpis fermentum tincidunt.</p>
" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:19:49.323

您可能想查看 PHP 的 DOM 类，它们可以让您定位 HTML 文档中的所有超链接，获取它们的 href 属性并以比尝试使用正则表达式更强大的方式更新/删除它们。

（请注意，以下示例是“从臀部”，未经测试）

```
$dom = new DOMDocument ();

// Load from a file
$dom -> load ('/path/to/my/file.html');

// Or load a HTML string
$dom -> loadHTML ($string);

// Or load an XHTML string as XML
$dom -> loadXML ($string);

// Find all the hyperlinks
if ($nodes = $dom -> getElementsByTagName ('a'))
{
    foreach ($nodes as $node)
    {
        var_dump ($node -> getAttribute ('href'));
    }
} 
```

# jquery-ui - jQuery Date Picker not working on Chrome

> ID：10932341
> 
> 赞同：6
> 
> 时间：2012-06-07T13:02:03.820
> 
> 标签：jquery-ui

I've a jQuery UI Calendar as below and it works on IE only not on Chrome:

```
<input type="image" src="/images/caleder.jpg" id="btnCalendar" />

<script type="text/javascript">
$(function () {
    $("#btnPeriodCal").datepicker();
});
</script> 
```

If I change `type="text"` it seems to work. Could someone please help me with how to resolve the above issue. I can't use `type="text"` as I need to show the image.

Thanks.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T05:50:02.333

我有一个日期选择器的示例问题。

我使用了日期选择器，它在 Firefox 和 IE 中运行良好，但在 chrome 中却不行。单击输入字段时，我可以看到日历。我选择了日期，但日期值未在输入字段中输入。

我没有选择，所以我改变了`type='text'`然后它在 chrome 中工作..

![输入类型为日期](../Images/67a6ae9d55756e1b90d18462b409dc11.png)

![输入类型是文本](../Images/bbae4b1959cb12aa3de485b08ba91c8b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T13:04:10.593

您可以使用处理程序：

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true
    });
});
</script> 
```

希望这有效！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T02:49:55.733

我有同样的问题。我想为什么输入可以工作，但按钮不能。诀窍是点击时输入获得焦点，按钮没有。尝试这个：

```
$(function () {
    $("#btnPeriodCal").datepicker().click(function () { $(this).focus(); });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T18:05:01.957

我有一个类似的问题：我希望我的日期选择器在单击链接时出现，并且没有字段（或者更确切地说是隐藏字段）。（我的用例是日历上的日期用于查找直到并包括该日期选择器选择的日期范围，因此我不需要实际的日期值，除非将其传递给 onSelect 处理程序。）

所以这在 Firefox 中有效：

```
<a ...>click for calendar:   <input type="hidden" value="" />  </a> 
```

但不在 Chrome 中。替换为：

```
<input type="text" value="" style="display: none" /> 
```

也失败了。我最终得到了这个：

```
<input  type="text" value="" style="width: 0px; height: 0px; border: none; position: absolute; top: 0; left: 0" /> 
```

虽然我并不以此为荣！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-09T07:29:35.090

将其用作 -

```
<p>Date: <input type="text" id="datepicker"></p>

$(function() {
    $( "#datepicker" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true
    });
}); 
```

检查它在行动 - [http://jqueryui.com/demos/datepicker/#icon-trigger](http://jqueryui.com/demos/datepicker/#icon-trigger)

并且不要忘记将这些文件包含在`<head>`标签中

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/base/jquery-ui.css" type="text/css" media="all" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-23T21:10:45.847

我花了 3 个小时试图解决这个问题，这就是我解决问题的方式。

使用以下几行作为您的库。

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script  type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script  type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script> 
```

这是用于解决问题的javascript：

```
$(function() {
    $("#date_of_birth_date").datepicker({ 
        maxDate: '+0', changeYear: true, yearRange: "-70:+0" 
    });
}); 
```

记得删除所有以前的库等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T13:03:39.933

除非我错了，只有 div 标签、span 标签等可以是日期选择器。

# django - Django代理下载？

> ID：10932344
> 
> 赞同：1
> 
> 时间：2012-06-07T13:02:22.370
> 
> 标签：django

我在一些网站上看到了从远程 url 下载文件的选项，就好像该网站被用作代理一样。您将 url 放入输入框中，然后下载将通过该网站开始，所以我想知道这怎么可能用django实现？

# java - Maven JAXB - 如何指定根节点以从 XSD 生成

> ID：10932345
> 
> 赞同：0
> 
> 时间：2012-06-07T13:02:29.753
> 
> 标签：java, xml, maven, xsd, jaxb

我有个问题。我有一个非常大的公司 XSD 文件，其中包含跨许多系统的许多对象的定义。我不想从这个 XSD 在我的单独项目中生成一些 java 类，但**我不想生成在 XSD 中定义的所有类，**因为我不只是需要它们。

是否可以在 Maven 中指定使用 JAXB 生成 java 类的 XSD 根节点之类的东西？

我希望我的问题很清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:22:11.457

有一个用于生成可以接受 XJC 参数的 Java 类的插件，这可能是更高级配置中的一个钩子。但我对这些并不熟悉。

取自插件源码：

```
/**
 * Space separated string of extra arguments,
 * for instance <code>-Xfluent-api -episode somefile</code>;
 * These will be passed on to XJC as
 * <code>"-Xfluent-api" "-episode" "somefile"</code> options.
 * 
 * @parameter expression="${xjc.arguments}"
 */
protected String arguments; 
```

pom.xml 插件配置示例：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>jaxb2-maven-plugin</artifactId>
<version>1.3.1</version>
<executions>
    <execution>
        <id>xjc</id>
        <phase>process-resources</phase>
        <goals>
            <goal>xjc</goal>
        </goals>
    </execution>
</executions>
<configuration>
    <packageName>package.name</packageName>
    <schemaDirectory>${basedir}/src/main/webapp/WEB-INF/xsd</schemaDirectory>
    <bindingDirectory>${basedir}/src/main/java</bindingDirectory>
</configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:11:23.790

您的问题是我经常看到的问题，我会说大型 XSD 的典型问题。

不幸的是，我不知道控制生成过程的 JAXB 方式，而不是您想要的方式。

我为此开发的替代解决方案，因此我从这一点开始的偏见，依赖于自动 XML 模式重构 (XSR)。它基本上接受您的 XSD，并从一组 XSD 对象（在您的情况下可能是几个全局元素，也可能是某些类型）中，它会生成一个 XSD 子集，其中只包含必要的项目，没有绒毛。通过 JAXB 处理这些 XSD，它会为您提供您想要的东西。这涉及到 QTAssistant 及其 XSR 功能。高级步骤是：

*   建立一个新的 XSR 文件；
*   在 XML 模式集合中引用您的源 XSD
*   创建“发布”：图形编辑器可以帮助您。基本上，您匹配所需的顶级 XSD 对象和新的 XSD 文件位置。
*   生成新的 XSD。
*   将新的 XSD 与您的工件一起使用。

[QTAssistant 支持通过Exec Maven 插件](http://mojo.codehaus.org/exec-maven-plugin/)与 Maven 进行命令行集成，但仅适用于 Windows。

# c - C 中的迷宫游戏损坏。可能的内存泄漏。需要帮忙 ：）

> ID：10932353
> 
> 赞同：0
> 
> 时间：2012-06-07T13:02:58.450
> 
> 标签：c, pointers, malloc, memory-leaks, realloc

我已经开发了这个程序，它是我必须做的 uni 组合的迷宫。我遇到了指向“路径”结构的指针数组的问题。我希望能够使用 add_path 动态更改数组的大小。但是在运行代码时`r->paths = malloc(sizeof(path));`通常不会成功分配内存。以及`realloc`我也称之为的。

我是动态分配内存的新手，不确定程序是否存在内存泄漏。我也不肯定它应该是`malloc(sizeof(path));`或`malloc(sizeof(path *));`

```
void add_path(room *r, path newPath, int index)
{
    //delclarations
    int pathByteSize = sizeof(path);
    int fullSize = sizeof(r->paths);
    //check size
    if(r->paths == NULL)
    {
        printf("testa");
        //if its the first instant, 'malloc' new space
        r->paths = malloc(sizeof(path));
        if(r->paths == NULL)
        {   
            printf("Failed to save");
            return;
        }
        r->paths[0] = newPath;
        printf("testb");
    }
    else
    {
        //new size
        int newSize;
        //if its the second and onwards instant, 'realloc' new space
        printf("test1");
        path *tempPathArray = (path *)realloc(r->paths, sizeof(path) * index);
        printf("test2");
        if(tempPathArray == NULL)
        {
            printf("\nFailed Assigning Memory");
            return;
        }
        else
        {
            r->paths = tempPathArray;
        }

        r->paths[index] = newPath;
        free(tempPathArray);
    }
} 
```

这是整个源代码

```
 #include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <conio.h>
#include <stdbool.h>

//TYPE DEFINITIONS
typedef enum
{
    NORTH,
    EAST,
    SOUTH,
    WEST,
    UNSET
} direction;

typedef char varTitle[50];

typedef struct 
{
    int indexSource;
    int indexDest;
    direction direct;
}path;

typedef struct
{
    int index;
    char desc[50];
    char title[50];
    path *paths;
}room;

typedef struct
{
    char direction[7];
}directionStruct;

//PROCEDURE/FUNCTION DEFINITIONS
directionStruct dir_to_str(direction direct);
void display_room(room *r, room toShow);
room create_room(int tempIndex, char tempTitle[50], char tempDesc[50]);
void create_rooms_and_paths(room *r);
int get_movement(room *r, room currentRoom);
void add_path(room *r, path newPath, int index);
//THE REST 

//Read String Function. Used to read in name
char read_char(char prompt[100])
{ 
    printf(prompt);
    char a = getchar();
    return a;
}

int main()
{
    //Delcarations
    room r[8];
    room currentRoom;
    room endOfMaze;
    //add rooms and paths
    create_rooms_and_paths(&r[0]);
    //variables
    currentRoom = r[0];
    endOfMaze = r[7];   

    do
    {
        display_room(r,currentRoom);
        int newRoom = get_movement(r,r[0]);
        currentRoom = r[newRoom];
    } while(currentRoom.index != endOfMaze.index);

    printf("\n-YOU FOUND THE EXIT!");
    printf("\n-Well done you have completed the game");
    printf("\n\n-Credits : ");
    printf("\n  Code : Gareth Somers");

    //set rooms

    //do
    //{
        //display first rooms
    //  display_room(currentRoom);

    //  int index = get_movement(currentRoom);
        //currentRoom = get_room(index,r);
    //}
    //while (currentRoom.index != endOfMaze.index);

    //you win

}

directionStruct dir_to_str(direction direct)
{
    directionStruct temp;

    if(direct == NORTH)
    {
        strcpy(temp.direction,"North"); 
        return temp;
    }
    else if (direct == EAST)
    {
        strcpy(temp.direction,"East");  
        return temp;
    }
    else if (direct == SOUTH)
    {
        strcpy(temp.direction,"South");     
        return temp;
    }
    else if(direct == WEST)
    {
        strcpy(temp.direction,"West");      
        return temp;
    }

}
room get_room(room *r, int toFind)
{
    //get_room searches for a room and returns it
    int i = 0;
    for(i = 0; i < sizeof(r); i++)
    {
        if(r[i].index == toFind)
        {
            return r[i];
        } 
    }
    return;
}

void display_room(room *r, room toShow)
{   
    //display_room disaplys a room and its paths
    //declarations
    int i;
    //show title
    printf("\n\n-%s",toShow.desc);
    printf("\n-You may go down the following directions : ");

    for (i = 0; i < 2; i++)
    {
        //this loops through each room and displays its details
        char tempString[100] = "  ";
        sprintf( tempString, "  %d. ", (i+1) );
        directionStruct tempDirectionStruct = dir_to_str(toShow.paths[i].direct);
        strcat(tempString, tempDirectionStruct.direction);
        strcat(tempString," to ");
        room tempRoom = get_room(r,toShow.paths[i].indexDest);
        strcat(tempString,tempRoom.title);
        printf("\n%s",tempString);
    }
}

room create_room(int tempIndex, char tempTitle[50], char tempDesc[50])
{
    //printf("\n Creating %s - %s",tempTitle, tempDesc);
    room temp;
    temp.index = tempIndex;
    strcpy(temp.title, tempTitle);
    strcpy(temp.desc, tempDesc);
    temp.paths = NULL;
    return temp;
}

path create_path(int source, int dest, direction dir)
{
    //create tempoary path
    path temp;
    //assign values
    temp.indexSource = source;
    temp.indexDest = dest;
    temp.direct = dir;
    //return path
    return temp;
}

void add_path(room *r, path newPath, int index)
{
    //delclarations
    int pathByteSize = sizeof(path);
    int fullSize = sizeof(r->paths);
    //check size
    if(r->paths == NULL)
    {
        printf("testa");
        //if its the first instant, 'malloc' new space
        r->paths = malloc(sizeof(path));
        if(r->paths == NULL)
        {   
            printf("Failed to save");
            return;
        }
        r->paths[0] = newPath;
        printf("testb");
    }
    else
    {
        //new size
        int newSize;
        //if its the second and onwards instant, 'realloc' new space
        printf("test1");
        path *tempPathArray = (path *)realloc(r->paths, sizeof(path) * index);
        printf("test2");
        if(tempPathArray == NULL)
        {
            printf("\nFailed Assigning Memory");
            return;
        }
        else
        {
            r->paths = tempPathArray;
        }

        r->paths[index] = newPath;
        free(tempPathArray);
    }
    //if empty create first spaze
    //if not empty realloc space
    //check if worked
    //copy over contents if did
}

void create_rooms_and_paths(room *r)
{
    //Create rooms (Title and Description)
    *r = create_room(0,"Room 1", "Welcome to Room 1");
    add_path(r,create_path(0,1,EAST),0);  add_path(r,create_path(0,2,SOUTH),1);
    r++;
    *r = create_room(1,"Room 2", "Welcome to Room 2");
    add_path(r,create_path(1,0,WEST),0);  add_path(r,create_path(1,4,SOUTH),1);
    r++;
    *r = create_room(2,"Room 3", "Welcome to Room 3");
    add_path(r,create_path(2,0,NORTH),0); add_path(r,create_path(2,3,EAST),1);  add_path(r,create_path(2,6,SOUTH),2);
    r++;
    *r = create_room(3,"Room 4", "Welcome to Room 4");
    //add_path(r,create_path(3,2,WEST),0); add_path(r,create_path(3,4,EAST),1);
    r++;
    *r = create_room(4,"Room 5", "Welcome to Room 5");
    //add_path(r,create_path(4,1,NORTH),0); add_path(r,create_path(4,3,WEST),1); add_path(r,create_path(4,5,EAST),2);
    r++;
    *r = create_room(5,"Room 6", "Welcome to Room 6");
    //add_path(r,create_path(5,4,WEST),0); add_path(r,create_path(5,7,SOUTH),1);
    r++;
    *r = create_room(6,"Room 7", "Welcome the end of the maze");
    //add_path(r,create_path(6,4,NORTH),0);
}

bool check_movement(room currentRoom, direction direct)
{
    //check_movement checks the current room and the directions avaliable to determine if the player can go that direction
    int i;
    for(i= 0; i < sizeof(currentRoom.paths); i++)
    {
        if(currentRoom.paths[i].direct == direct)
        {
            return true;
        }
    }
    return false;
}

int get_path_dest_index(room currentRoom, direction direct)
{
    //check_movement checks the current room and the directions avaliable to determine if the player can go that direction
    int i;
    int dest;
    for(i = 0; i < sizeof(currentRoom.paths); i++)
    {
        printf("\n tester : %i to %i",currentRoom.paths[i].indexSource,currentRoom.paths[i].indexDest);
        if(currentRoom.paths[i].direct == direct)
        {
            dest = currentRoom.paths[i].indexDest;
            break;
        }
    }
    return dest;
}

int get_movement(room *r, room currentRoom)
{
    //declarations
    char input;
    direction direct = UNSET;
    int i;
    bool foundDirection = false;

    //loop until direction found (correctly inputed)
    while(check_movement(currentRoom, direct) == false)
    {
        input = NULL;
        fflush(stdin);
        direct = UNSET;
        char prompt[100] = "\n-Please Enter the direction you wish to take (n,e,w,s) : ";
        input = read_char(prompt);

        //determites direction
        if(input == 'n')
        {
            direct = NORTH;
        }
        else if(input == 'e')
        {
            direct = EAST;
        }
        else if(input == 's')
        {
            direct = SOUTH;
        }
        else if(input == 'w') 
        {
            direct = WEST;
        }
    }

    return get_path_dest_index(currentRoom,direct);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:11:43.593

当你重新分配你的数组时，你会立即释放它：

```
path *tempPathArray = (path *)realloc(r->paths, sizeof(path) * index);
/* Other things, including assinging to another pointer */
free(tempPathArray); 
```

当您稍后尝试访问`r->paths`时，您会访问已释放的内存。

# javascript - 如何创建由 mySQL 填充的添加/删除下拉框行？

> ID：10932354
> 
> 赞同：0
> 
> 时间：2012-06-07T13:02:58.793
> 
> 标签：javascript, jquery, html, drop-down-menu, add

是的，我已经尝试创建此表单大约 3 天了。我一切正常，但是当需要验证以查看是否填写了输入时，一切都失控了。

表单需要有一个由 mySQL 值填充的下拉框。旁边也会有一个文本框供输入。文本框需要通过 javascript 验证以检查输入是否在文本框中。然后，一个用于删除行的按钮。

添加按钮应该在所有这些之上，并且只需添加另一行相同的输入。

我使用了 innerHTML 语句并使用计数器将所有内容传递到 PHP 数组中，但是删除按钮和验证变得太复杂了。

我在 Web 应用程序的其他部分使用 jQuery，所以这是一个选项。

任何方向或示例代码都会有很大帮助。

谢谢

**能够使用此代码**

```
<script type="text/javascript">
$(document).ready(function() {
if(typeof intId==='undefined')
{
     $(".add").attr("disabled", "true");
}
$("#addButton").click(function() {
    var intId = $("#prodpart div").length + 1;
    var fieldWrapper = $("<div class=\"fieldwrapper\" id=\"partfield" + intId +     "\"/>");
    var partlabel = $("<label>Part #" + intId + ":</label>&nbsp;");
    var part = $("<select name=\"part[" + intId + "]\"><?php echo $option2; ?></select>");
    var partqtylabel = $("<label>Part QTY #" + intId + ":&nbsp;</label>&nbsp;");
    var partqty = $("<input type=\"text\" class=\"required\" onblur=\"enable()\"     value=\"\" size=\"5\" id=\"partqty" + intId + "\" name=\"partqty[" + intId + "]\" class=\"fieldname\" />");
    var parttimelabel = $("<label> Run Time #" + intId + ":</label>&nbsp;");
    var parttime = $("<input type=\"text\" size=\"5\" value=\"NOT REQUIRED\" name=\"runparttime[" + intId + "]\" />");
    var removeButton = $("<input type=\"button\" class=\"remove\" value=\"Del\" />");
    removeButton.click(function() {
        $(this).parent().remove();
    });
    fieldWrapper.append(partlabel);
    fieldWrapper.append(part);
    fieldWrapper.append(partqtylabel);
    fieldWrapper.append(partqty);
    fieldWrapper.append(parttimelabel);
    fieldWrapper.append(parttime);
    fieldWrapper.append(removeButton);
    $("#prodpart").append(fieldWrapper);
    });
});
function disable(){
$(".add").attr("disabled", "true");
$(".required").blur(function(){
    if ($(this).val() != initVal && $(this).val() != "") {
    $(".add").removeAttr("disabled");
    } else {
    $(".add").attr("disabled", "true");        
    }
}); 
};
function enable(){
    $(".add").removeAttr("disabled");
}; 
```

这是上面用于写入行、删除和验证的 javascript。

```
<input type="button" value="Add Prod Part" class="add" onclick="disable()" id="addButton" /> 
```

我的按钮之一。在所需框中输入文本之前，按钮被禁用。输入文本后，按钮启用，您可以添加另一行。这仍然有点错误，但可以很好地满足我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:26:11.807

我最近构建了类似的东西，我拥有的是以下内容：

1.  在开始时，所有行、单元格和字段都是从 mySQL DB 生成和填充的。

2.  所有输入类型都在一个表行中。

3.  左侧是订购号。这允许人们重新排序他们的数据。

4.  然后我有一个交互式“重新排序”功能，它允许行自动移动。

5.  “删除”功能在每一行的右侧；删除一行会将其移至底部，然后删除底部行。

6.  “添加”函数将添加一个表格行`table.insertRow(table.rows.length);`并插入相关数据。

最重要的是，我还有一个“行数”变量，分别由添加/删除按钮递增/递减。

然后数据验证成为`for`所有表行的循环（使用“行计数”）。祝你好运——这对我来说并不容易，我会发布源代码，但我认为这不是你想要的（没有验证，并且已经预设了很多表数据列）。

# java - 用 Java 创建一个高分屏幕

> ID：10932355
> 
> 赞同：0
> 
> 时间：2012-06-07T13:03:01.790
> 
> 标签：java, treeset

我正在尝试为我正在开发的游戏创建一个高分屏幕。我希望显示以前玩家的前十名以及刚刚完成游戏的玩家的分数以及他们的排名（在高分列表中的顺序）。这个高分列表将根据他们的分数排序，如果分数相同，则按照他们的名字排序。我已经尝试过`ArrayLists`并`TreeSets`做到这一点。我能够同时获得这两种数据以相应地对数据进行排序，但无法为刚刚完成游戏的玩家提取特定信息。

我查看了地图，但似乎它们不适用于我希望对数据进行排序的方式。有人可以指导我解决这个问题吗？

这是我为其中一个制作的一个小程序：

```
public class Tree_set_test {

    public static void main(String[] args) throws IOException {
        String sName;
        int nAge, nNum, i=0;
        SortedSet<CFriend> tsFriends = new TreeSet<CFriend>();

        sName = "Jason";
        nAge = 5000;
        nNum = tsFriends.size() + 1;
        CFriend c1= new CFriend(sName,nAge,nNum);
        tsFriends.add(new CFriend(sName,nAge,nNum)); 

        sName = "Kenny";
        nAge = 200;
        nNum = tsFriends.size() + 1;
        CFriend c2= new CFriend(sName,nAge,nNum);
        tsFriends.add(new CFriend(sName,nAge,nNum)); 

        sName = "Smile";
        nAge = 100;
        nNum = tsFriends.size() + 1;
        tsFriends.add(new CFriend(sName,nAge,nNum)); 

        sName = "Hossein";
        nAge = 200;
        nNum = tsFriends.size() + 1;
        tsFriends.add(new CFriend(sName, nAge,nNum)); 

        sName = "People";
        nAge = 200;
        nNum = tsFriends.size() + 1;
        tsFriends.add(new CFriend(sName, nAge,nNum)); 

        Iterator itFriends = tsFriends.iterator(); // see note below on iterators.
        while (itFriends.hasNext()) {
            i++;
            System.out.println(itFriends.next());
        }
    }
}

class CFriend implements Comparable<CFriend> { 
    String sName;
    int nScore, nNum;

    CFriend(String _sName, int _nAge, int _nNum) {// constructor to load vars
        sName = _sName;
        nScore = _nAge;
        nNum=_nNum;
    }

    public int compareTo(CFriend other) {
        if (nScore > other.nScore) {
            return -1;
        }
        else if (nScore < other.nScore) {
            return 1;
        }
        else {
            if (sName.compareTo(other.sName) < 0) {
                return -1;
            }
            else if (sName.compareTo(other.sName) > 0) {
                return 1;
            }
            else {
                return 0;
            }
        }
    }

    public String toString() {
        return sName + " " + String.valueOf(nScore);
    }
} 
```

我想检查`c1`和`c2`的位置，并将其与它们的和`TreeSet`一起显示。`name``age`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:06:42.353

您可以创建一个带有名称和分数的 Player 类。然后让它实现`Comparable`接口。请参阅：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)

您可以将 Player 对象保存在 ArrayList 中并使用`Collections.Sort(yourArrayList);`

您的 Player 类可能如下所示：

```
public class Player implements Comparable<Player>{

int score;
String name;

@Override
public int compareTo(Player o) {

//compare here

}

} 
```

# php - Zend 操作无需重新加载即可运行 php 脚本

> ID：10932357
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:03:11.463
> 
> 标签：php, zend-framework

是否有可能有一个不返回任何内容的 zend 视图？

我有以下内容，这可能是错误的：

```
 $oContextSwitch->addContext("print",array("suffix" => "something")); 
```

我这样称呼视图 something.com/stuff/view/format/print

我实际上不知道后缀在做什么，但我可以在没有它的情况下获得上下文。我已经阅读了我真的不理解它们的文档！

无论如何，这个视图是从一些已经嵌入页面的 highcharts javascript 调用的，有一些 svg 数据作为链接的一部分发布到视图中。

现在我想让这个视图做一些事情，主要是保存和转换 svg 数据。但我希望它在不重新加载页面的情况下执行此操作，视图可以不返回任何内容吗？调用视图的页面是否仍然可用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:15:11.263

是的，您可以拥有一个不输出任何内容的视图。

但在使用此视图之前，您必须更改为空的布局。

这样你就可以有一个没有输出的视图。

要更改使用的布局，请使用此脚本。

```
//from controller
$this->_helper->layout->setLayout('/path/to/your/layout_script'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:06:57.560

```
$this->_helper->layout()->disableLayout(); 
```

这将禁用您的布局并在您的视图文件中将其留空，zend 将不返回任何内容。但是我认为这只会解决你的部分问题。您使用 Highcharts（顺便说一句很棒的脚本），所以您也使用 jquery。您将要使用 jquery 来动态加载您想要的新选项卡。那个新标签需要内容吗？好吧，您确定您刚刚对应该不返回任何内容的 zend 脚本进行的 ajax 调用不是在该新选项卡中返回您想要的内容的理想页面吗？

# css - IE多行显示菜单

> ID：10932362
> 
> 赞同：1
> 
> 时间：2012-06-07T13:03:21.007
> 
> 标签：css, internet-explorer, firefox, google-chrome, safari

我正在做一个网站。该网站在 Chrome 中运行良好，但在 IE 中，菜单显示为多行。请帮忙。谢谢

CSS是，

```
#menu{
    margin-left: 353px;
    margin-top: -70px;
    padding-bottom: 16px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:23:32.510

这解决了问题，只需将#menu 的宽度增加 50px-

```
#menu {
  width: 550px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:09:22.103

我在这台机器上没有 IE，但尝试添加：

```
#menu a img {
    border: 0;
} 
```

到你的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:21:41.637

```
#menu{
    margin-left: 353px;
    margin-top: -70px;
    padding-bottom: 16px;
    width:550px;
} 
```

添加宽度解决了这个问题。谢谢

# java - Wicket - 双重重定向

> ID：10932366
> 
> 赞同：0
> 
> 时间：2012-06-07T13:03:50.557
> 
> 标签：java, wicket

只是一个小问题。如何在三页之间实现双重重定向？

埃斯。

```
 public class A extends BasePage{

    public A() {
        super("A");
        setResponsePage(new B());
    }

}

public class B extends BasePage{

    public B() {
        super("B");
        setResponsePage(new C());
    }

} 
```

Wicket 只是停在页面 B 而不重定向到页面 C。

不要问我为什么要这样做。我只需要知道即使不使用 setResponsePage 是否也可以。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:10:56.347

Wicket 将使用最后执行的 setResponsePage() 来确定其重定向页面。在您的情况下，这是 setResponsePage(new B()) 而不是 setResponsePage(new C())。实际上，后者是在构建 B 时执行的。

如果你愿意

```
public class A extends BasePage{

    public A() {
        super("A");
        B pageB = new B();
        setResponsePage(pageB);
        pageB.init();
    }

}

public class B extends BasePage{

    public B() {
        super("B");
    }

    public init() {
        setResponsePage(new C());
    }

} 
```

它应该可以工作，并且您会重定向到 C！

# c++ - 将 Qt 应用程序的状态保存到文件中

> ID：10932368
> 
> 赞同：1
> 
> 时间：2012-06-07T13:03:51.800
> 
> 标签：c++, windows, qt, loading, save

我有点新手，我无法让保存和加载工作。该程序有一些单选按钮和旋转框，我希望能够将这些位置和值保存到文件中，并能够稍后再次打开它。这是节省：

```
void MainWindow::on_saveButton_clicked()
{
 QString fileName = QFileDialog::getSaveFileName(this,
     tr("Salvesta Projekt"), "",
     tr("Latid Pindalaks (*.lp);;All Files (*)"));

 if (fileName.isEmpty())
     return;
 else {
     QFile file(fileName);
     if (!file.open(QIODevice::WriteOnly)) {
         QMessageBox::information(this, tr("Unable to open file"),
             file.errorString());
         return;
     }
     QDataStream out(&file);
     out.setVersion(QDataStream::Qt_4_8);

     QByteArray MyArray = MainWindow::saveState();

     out << (MyArray);
      }
 } 
```

这是加载

```
void MainWindow::on_loadButton_clicked()
{
 QString fileName = QFileDialog::getOpenFileName(this,
     tr("Ava Projekt"), "",
     tr("Latid Pindalaks (*.lp);;All Files (*)"));

 if (fileName.isEmpty())
     return;
 else {

     QFile file(fileName);

     if (!file.open(QIODevice::ReadOnly)) {
         QMessageBox::information(this, tr("Pole võimalik faili laadida"),
             file.errorString());
         return;
     }

     QDataStream in(&file);
     in.setVersion(QDataStream::Qt_4_8);

     in >> (MyArray);

     MainWindow::restoreState(MyArray);
 }
} 
```

我知道我做错了什么，所以一个很好的例子将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:09:57.230

[QMainWindow](https://qt-project.org/doc/qt-4.8/qmainwindow.html#saveState)文档指出：

> **保存此主窗口工具栏**和**停靠**小部件的当前状态。

这意味着您必须自己保存其他小部件（单选按钮等）的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T05:18:39.963

[QSettings](http://qt-project.org/doc/qt-4.8/qsettings.html/ "设置")通常用于存储 GUI 应用程序的状态。以下示例说明如何使用 QSettings 保存和恢复应用程序主窗口的几何图形。

```
 void MainWindow::writeSettings()
 {
     QSettings settings("Moose Soft", "Clipper");

     settings.beginGroup("MainWindow");
     settings.setValue("size", size());
     settings.setValue("pos", pos());
     settings.endGroup();
 }

 void MainWindow::readSettings()
 {
     QSettings settings("Moose Soft", "Clipper");

     settings.beginGroup("MainWindow");
     resize(settings.value("size", QSize(400, 400)).toSize());
     move(settings.value("pos", QPoint(200, 200)).toPoint());
     settings.endGroup();
 } 
```

# jquery - 包装 Jquery 代码

> ID：10932374
> 
> 赞同：1
> 
> 时间：2012-06-07T13:04:05.420
> 
> 标签：jquery, syntax

我的 jquery 代码现在开始创建一些相当长的代码行，尤其是一些正则表达式字符串。在 Jquery 语法中包装代码行以使其更易于阅读的最佳方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:15:27.460

When dealing with strings you can use concatenation (+) or the backslash (\):

[http://www.developfortheweb.com/2009/03/multi-line-strings-in-javascript/](http://www.developfortheweb.com/2009/03/multi-line-strings-in-javascript/)

For RegExp you can create them as objects, but you'll need to escape all backslashes.

```
var REGEX = new RegExp("^\\/[0-9]{1,2}$|^255\\.255\\.255\\.0$"); 
```

[http://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

# c# - 如何使用 caliburn.micro 使用视图模型在 text_changed 事件中执行 TextBox.scrolltoend

> ID：10932376
> 
> 赞同：0
> 
> 时间：2012-06-07T13:04:08.307
> 
> 标签：c#, wpf, mvvm, event-handling, caliburn.micro

我在我的 Wpf 应用程序中使用 caliburn micro。当内容更多时，我想向下滚动一个文本框。我不想使用视图的代码来实现这个功能。我用谷歌搜索并找到了以下链接。

[直接使用view后面的代码](http://social.msdn.microsoft.com/Forums/en/wpf/thread/01ddf533-1ee8-42f1-804d-40593768d265)。尽管这可能是一种解决方法，但我对这种方法并不满意，因为我认为这是不良做法的起点。

[我发现了另一个使用Rx（反应式扩展）](http://msdn.microsoft.com/en-us/data/gg577609)实现类似功能的参考

[WPF 中 .NET (Rx) 的响应式扩展 - MVVM](https://stackoverflow.com/questions/4585066/reactive-extensions-for-net-rx-in-wpf-mvvm)

我不知道如何在 Caliburn Micro 的上下文中使用它。

[另一个stackoverflow成员在这里](https://stackoverflow.com/questions/4960133/call-richtextbox-scrolltoend-from-view-model-class)提出了类似的问题，但没有令人满意的回应。

我必须做两件事。

1.  订阅文本更改事件
2.  从 sender 参数（或以某种方式获取文本框对象）获取文本框对象并执行`ScrollToEnd()`它的方法

我想可以通过`IHandle`Caliburn micro 或[Rx(Reactive extensions)](http://msdn.microsoft.com/en-us/data/gg577609)来实现。有人可以帮助我如何实现此功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:21:24.927

你看过使用 IResult 吗？它们提供了一种无需将视图和视图模型耦合在一起即可完成此任务的方法。

来自文档的简介：

> 因为协程发生在 Action 内部，我们为您提供了一个 ActionExecutionContext，可用于构建与 UI 相关的 IResult 实现。这允许 ViewModel 以声明方式声明其控制视图的意图，而无需对视图的任何引用或基于交互的单元测试。

使用 MediaElement 和 CM 在 SL 中播放声音的示例。 [使用 MediaElement 和 Caliburn Micro 在 Silverlight 中播放声音](https://stackoverflow.com/questions/7446850/playing-a-sound-in-silverlight-with-mediaelement-and-caliburn-micro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T14:18:30.097

就像我在他的评论中所说的那样，这本质上是一个 View 操作，而不是 ViewModel 的。视图背后的代码并不是立即糟糕的做法。只有当操作需要通过视图的依赖项时，视图上的代码才不好。

如果你不喜欢视图后面的代码，你可以通过使用行为来做到这一点：

```
 public class TextBoxScrollToEndOnTextChanged:Behavior<TextBox>
  {
    protected override void OnAttached()
    {
      AssociatedObject.TextChanged += AssociatedObject_TextChanged;
    }

    protected override void OnDetaching()
    {
      AssociatedObject.TextChanged -= AssociatedObject_TextChanged;
    }

    void AssociatedObject_TextChanged(object sender, TextChangedEventArgs e)
    {
      AssociatedObject.ScrollToEnd();
    }
  } 
```

xml:

```
<TextBox>
    <i:Interaction.Behaviors>
        <behaviors:TextBoxScrollToEndOnTextChanged />
    </i:Interaction.Behaviors>
</TextBox> 
```

现在，如果您有 View - ViewModel 交互，我认为这是最好的方法。

# jquery - 需要 jQuery 显示/隐藏逻辑

> ID：10932380
> 
> 赞同：0
> 
> 时间：2012-06-07T13:04:15.457
> 
> 标签：jquery

我有 4 个 optgroup 选择菜单，它们的出现取决于第一个选择选项的值。我想做的是在相关的匹配选择组中获取值并加载。但是很明显，如果一个组已经被选择隐藏该组并将新的选择组放在它的位置。

我的 jQuery 代码是：

```
$('#subcategory1, #subcategory2, #subcategory3, #subcategory4').hide();

// Hide Orientation Dropdown

$('#orientation').hide();

$('#category').change(function()
{
    $('#orientation').show();

    var CatValue = $("#category").val();

    if (CatValue == '1')
    {
        $("#subcategory1").show();
    }
    if (CatValue == '2')
    {
        $("#subcategory2").show();
    }
    if (CatValue == '3')
    {
        $("#subcategory3").show();
    }
    if(CatValue == '4')
    {
        $("#subcategory4").show();
    }
}); 
```

我正在寻找一种更合乎逻辑的方式来写这个。即隐藏以前的子类别选择等。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:07:28.833

```
var num; 
if (CatValue == '1')
{
    num = 1;     

}
if (CatValue == '2')
{
     num = 2;     
}
if (CatValue == '3')
{
     num = 3;     
}
if(CatValue == '4')
{
     num = 4;             
}
$("#subcategory"+num).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:07:53.500

```
$('#subcategory1, #subcategory2, #subcategory3, #subcategory4').hide().filter('#subcategory'+CatValue).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:06:53.807

```
 switch(CatValue)
    {
        case "1": $("#subcategory1").show();
        break;
        case "2": $("#subcategory2").show(); 
        break;
    } 
```

等等等等

switch 基本上允许您在几行代码中使用大量 if 语句:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:15:46.703

```
var i=1;
while($("#subcategory"+i).length > 0) { // hide others
    $("#subcategory"+i).hide();
    i++;
}
$("#subcategory"+$("#category").val()).show(); // show current 
```

# javascript - >> 在javascript中做什么？

> ID：10932381
> 
> 赞同：2
> 
> 时间：2012-06-07T13:04:17.627
> 
> 标签：javascript

在查看“Crossfilter”源代码时，我遇到了一个使用 >> 的函数。下面是函数：

```
 // Similar to bisectLeft, but returns an insertion point which comes after (to
  // the right of) any existing entries of x in a.
  //
  // The returned insertion point i partitions the array into two halves so that
  // all v <= x for v in a[lo:i] for the left side and all v > x for v in
  // a[i:hi] for the right side.

  function bisectRight(a, x, lo, hi) {
    while (lo < hi) {
      var mid = lo + hi >> 1;
      if (x < f(a[mid])) hi = mid;
      else lo = mid + 1;
    }
    return lo;
  } 
```

谷歌没有返回任何结果，我以前从未见过。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:05:57.107

这是[符号传播右移运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators#.3E.3E_%28Sign-propagating_right_shift%29)：

> 此运算符将第一个操作数向右移动指定的位数。右移的多余位被丢弃。最左边位的副本从左边移入。由于新的最左边的位与前一个最左边的位具有相同的值，因此符号位（最左边的位）不会改变。因此名称为“符号传播”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:07:04.937

按位移位，请参阅[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:06:13.677

它进行按位右移，这与整数除以 2^x*大致*相似（在您的示例中 - 只需除以 2 即可找到平均值）。它是一种[按位运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)，碰巧存在于许多语言中，并与数字的二进制表示一起使用。它通常用于性能原因，因为它几乎总是比除法更快。

# wordpress - 如何隐藏联系表格并显示“已发送！” 发送成功后

> ID：10932386
> 
> 赞同：14
> 
> 时间：2012-06-07T13:04:32.050
> 
> 标签：wordpress

我在 WordPress 模板中使用 Contact Form 7 插件。我创建了表单和相关的 CSS，所以一切正常。当我单击发送按钮并成功发送电子邮件时，我需要执行以下操作。表格应该消失并显示“已发送！” 而不是那个。我需要知道我需要更改的代码。请查看显示我喜欢做什么的照片

![在此处输入图像描述](../Images/53ef4bd77e03e702f434daba281be5d3.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-05-08T21:52:02.153

“on_sent_ok:”和“on_submit”已从联系表 7 5.0 中删除，因此需要使用 2 个可用选项之一。

1.  wpcf7提交
2.  wpcf7邮件已发送

要隐藏表单，需要在您的 js 文件中添加事件侦听器，或者可以使用提到的脚本在页脚中添加作为操作：

```
add_action( 'wp_footer', 'contact_form_sent' );

function contact_form_sent() {
?>
<script type="text/javascript">
document.addEventListener( 'wpcf7mailsent', function( event ) {
    if ( 'FORM_ID' == event.detail.contactFormId ) { //Use this only when targeting specific form.
         document.getElementById('DIV_ID_OF_FORM').style.display = 'none';
    } //Use this only when targeting specific form.
}, false );
</script>
<?php
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-22T06:58:38.583

如果您想隐藏表单并显示感谢信息，您可以使用下面的 CSS。

```
.wpcf7-form.sent p
{
    display:none;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-08T06:14:45.527

**在联系表格 7 管理员的附加设置中添加此代码。**

```
on_sent_ok: "var name = $('.wpcf7 input[name=your-name]').val();

var email = $('.wpcf7 input[name=your-email]').val();

$('.wpcf7').hide();

$('.head_er').hide();

$('.conversations').show();

$('.conversations').html('<p>Thank you.</p>');

$('.conversations').html('<p>We will respond to your email shortly.</p>');" 
```

**或者你可以看到下面的链接**

[http://ravinderrathore.herobo.com/contact-form-7-thank-you-success-messages/](http://ravinderrathore.herobo.com/contact-form-7-thank-you-success-messages/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T14:44:48.100

为了隐藏联系表格 7，您必须添加以下代码，在联系表格 7 的设置部分中，您已经生成了它

```
on_sent_ok:  "document.getElementById('contactform').style.display = 'none';" 
```

'contactform' 是“div”的 id，其中包含您的联系表单的标签。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-12T09:15:18.927

有多种方法可以做到这一点，这主要取决于您如何创建表单，但这应该适用于使用新事件模式的基本表单：

```
<script type="text/javascript">
/* <![CDATA[ */
document.addEventListener( 'wpcf7mailsent', function( event ) {
  jQuery(".wpcf7-form.sent").find('p').hide();
}, false );
/* ]]> */
</script> 
```

您可以将此代码放在主窗体中（没有空行或 cf7 将添加
和

标签），或至少与表单一起加载的任何 js 文件。

我个人在表单中使用它还包括调用分析和广告词转换代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-20T21:59:35.270

如果您只想隐藏表单并且不想使用脚本，您可以这样做：

```
.wpcf7-form.sent
{
    display:none;
}

#thankYou
{
    font-size: 18px;
    display: none;
} 
```

然后在我的联系表格 7 短代码之后的 HTML 中，我输入：

```
<div id="thankYou">Thank you</div> 
```

最后在我的设置中我使用：

```
on_sent_ok:  "$('#thankYou').show()" 
```

我最喜欢这种方法，因为它允许我实际显示一条消息（与其他只隐藏表单的答案不同）。这似乎也减少了我看到的一些“闪光”，因为由于纯 CSS，隐藏会立即发生。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-20T17:20:35.810

```
on_sent_ok:  "$('.wpcf7-form.sent p').hide();" 
```

由于一旦提交表单，发送的消息就会被放入表单中，因此我们需要隐藏所有段落以避免隐藏消息（标记为 DIV）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-08T13:04:19.193

我发现由于某些奇怪的原因，并非所有段落都隐藏在我的某些表单中，因此解决方案如下

```
.wpcf7-form.sent p {
    display:none;
} 
```

...没有完全起作用。

我发现最可靠的解决方案是在表单配置的“表单”选项卡中，添加一个自定义 DIV 环绕您的所有内容。IE

```
<div class="formWrapper">
    <label> Name (required)
        [text* your-name] </label>
    <label> Email (required)
        [email* your-email] </label>
    [submit "Send"]
</div> 
```

然后在主题的自定义 css 中添加

```
.wpcf7 form.sent .formWrapper{
    display: none;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-02T00:41:44.510

每个人都对此有所了解，但没有人具体说过，所以我将发布另一个答案，说明我目前是如何做的。

您可以使用其他一些答案的建议并`on_sent_ok`在 CF7 的“附加设置”部分中使用。但首先在“表单”字段中，您需要将整个表单内容包装在一个 div 中，我们稍后将引用该 div：

```
<div id="form-container">
     <h4>Form title</h4>
     <p>some text, etc</p>
     ...form fields...
</div> 
```

我们将使用 #form-container" 在选项中进行引用。

```
on_sent_ok:  "$("#form-container").fadeOut();" 
```

我喜欢使用`fadeOut();`动画，但你可以添加一个类，或者通过 jQuery 做任何你想做的其他花哨的东西。

我这样做的原因是，我可以准确地定位我想要隐藏的内容，而不是依赖 CF7 在 DOM 中创建的任何元素。

我认为这可以回答您的问题，而不会与成功消息产生任何冲突。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-23T03:36:56.090

我发现提供的各种答案没有达到我的要求。这是隐藏表单和提交按钮，但仍然允许显示表单发送的消息。所以这是对我有用的解决方案。

注意：需要注意的是，开发人员已经[弃用](https://contactform7.com/additional-settings/)了`on_sent_ok`和`on_submit`javascript 函数，并打算在 2017 年底之前取消对它的支持。[他建议](https://contactform7.com/dom-events/)改用 DOM 事件。我不知道如何实现这些。

```
on_sent_ok:  "$('label').fadeOut();"
on_sent_ok:  "$('input').fadeOut();"
on_sent_ok:  "$('div#required-info').fadeOut();" 
```

最后一个触发器特定于我的情况，其中我有信息说明“*指示必填字段”，我将其包装在`<div id="required-info"></div>`

所以删除第三行，或者如果您还向表单中引入了其他元素（除了标签和提交按钮），请修改它。

使用此解决方案，表单提交成功后，表单字段、提交按钮和我的附加文本都会消失，并显示成功消息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-18T15:13:42.253

如果有人正在寻找与当前版本的 CF7 一起使用的稍微不同的方法，请尝试这个纯 CSS 解决方案。

```
 form.wpcf7-form {
      position: relative;
    }
    .wpcf7-response-output {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background-color: white;
   } 
```

消息直接位于表单上方，将其隐藏。您可以进一步细化 CSS 以调整消息的样式，使其更加突出。

# javascript - 我正试图围绕 Node.js 和 Vows 中的变量范围

> ID：10932387
> 
> 赞同：0
> 
> 时间：2012-06-07T13:04:32.850
> 
> 标签：javascript, node.js, bdd, vows

作为 Node.js 中的 TDD 练习，我正在尝试实现一个非常简单的“数据库”，它将事物存储为平面文件。这是 DB 模块代码的最开始：

```
var fs = require( 'fs' );

exports.create = function( path, readycallback ) {
    new FlatFileDB( path, readycallback );
};

function FlatFileDB( path, readycallback ) {
    this.path = path;
    readycallback( null, this );
}

FlatFileDB.prototype.getPath = function() {
    return this.path;
}; 
```

数据库创建是异步的，在我的测试用例中，我检查调用 create() 函数是否实际上会产生两个不同的对象：

```
var vows = require('vows'),
    assert = require('assert'),
    fs = require( 'fs' ),
    flatfileDB = require( '../lib/flatfileDB' );

var twoDBs = {};

vows.describe( 'flatfileDB' ).addBatch( {
    'creating the database': {
        topic: flatfileDB,
        'calling create': {
            topic: function( flatfileDB ) {
                flatfileDB.create( './createTest', this.callback );
            },
            'results in an object with the path passed in': function( err, db ) {
                assert.equal( db.getPath(), './createTest' );
            }
        },
        'calling create more than once': {
            topic: function( flatfileDB ) {
                flatfileDB.create( './db1', function( err, newdb ) {
                    twoDBs.db1 = newdb;
                    flatfileDB.create( './db2', function( err, newdb ) {
                        twoDBs.db2 = newdb;
                        this.callback( null, twoDBs );
                    } );
                });
            },
            'results in two objects with different paths.': function( err, dbs ) {
                console.log( 'twoDBs.  db1: ' + twoDBs.db1 + ', db2: ' + twoDBs.db2 );
                console.log( 'dbs: ' + JSON.stringify( dbs ) );
                assert.notEqual( twoDBs.db1.getPath(), twoDBs.db2.getPath() );
            }
        }
    },
}).run(); 
```

不过，这两行 console.log 的输出让我感到惊讶：

```
两个数据库。db1：[对象对象]，db2：[对象对象]
数据库：{}

```

因为我将 twoDBs 传递给测试回调，所以我曾期望 dbs 和 twoDBs 是某个对象，但它们似乎不是。任何人都可以帮我解决这里发生的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:57:46.883

`dbs`范围在该回调内。您将无法访问，因为调用的`this.callback()`范围不在该回调中。您需要一起传递它，或者在回调中`this.callback(null, dbs, twoDBs)`创建一个 var`topic`并分配给它。`dbs`这不是 Vows 的问题。它更多地与 JavaScript 的词法作用域和回调有关。

在这些情况下，我所做的是通过将参数添加到`this.callback()`.

***编辑：**上面的内容是不正确的，但修复出现在下面的评论中：*

> 如果你把 var that = this; 在主题中并将其更改为 that.callback(null, twoDBs); 怎么了？

# c++ - Emacs 中的 K&R c++ 缩进

> ID：10932388
> 
> 赞同：1
> 
> 时间：2012-06-07T13:04:34.670
> 
> 标签：c++, emacs, indentation

我正在使用 emacs 23。我添加了这一行：

```
(setq c-default-style "k&r") 
```

到我的 .emacs 文件。它有效，但今天我发现了一个问题。当我想在这样的类（或结构）中定义一个函数时：

```
class CL {
    int f()
    {
        return 5;
    }
}; 
```

它像这样缩进：

```
class CL {
    int f()
        {
            return 5;
        }
}; 
```

这段代码在 K&R（或 Stroustrup）缩进样式中的正确形式是什么？emacs 的格式是否正确？如果没有，我应该如何纠正？

# unity-container - 为什么 Unity 需要程序集引用

> ID：10932389
> 
> 赞同：4
> 
> 时间：2012-06-07T13:04:36.050
> 
> 标签：unity-container

我正在弄清楚使用 Unity 应用程序块时的意外行为。我有项目 A 作为我的启动项目。

项目 A 具有对项目 B 的项目引用，而项目 B 具有对项目 C 的项目引用。

项目 A 使用 unity 来解析对项目 B 中定义的类的引用。这些类反过来使用 Unity 来解析对项目 C 中类的依赖关系的引用。

因此，由于**我只使用在通用项目中定义的接口并使用 Unity 解析具体引用，因此无需在 Project A 中为 Project B 或 Project C 添加项目/程序集引用**。

但在这种情况下，Unity 无法解析引用。另一方面，如果我为这两个项目添加了引用，则没有问题。为什么有必要？有没有办法解决？

**这是因为 Unity 需要在上下文中加载 dll 才能从这些程序集中构造类型？**不知怎的，这感觉不对。任何人都可以帮助我理解这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:13:51.663

如果您在代码中注册依赖项，则需要引用定义这些依赖项（无论是接口还是具体类）的程序集。如果您在 XML 中定义映射，则不需要引用，但您必须确保 Unity 可以在运行时定位程序集。因此，您需要将它们放在 GAC 或应用程序文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:34:34.093

Unity 程序集中的代码需要能够解析您注册的具体类。这意味着它需要能够访问具体类所在的程序集——无论它们在与 Unity 程序集相同的输出目录中，还是在 GAC 中——统一需要能够找到它们。

# javascript - 什么是 NaCl 套接字 API？

> ID：10932391
> 
> 赞同：7
> 
> 时间：2012-06-07T13:04:38.347
> 
> 标签：javascript, sockets, google-chrome, websocket, google-nativeclient

我找到了它，`chrome://flags/`但我真的不知道这是什么。我在网上搜索了很多，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:34:57.310

看看这个，[http](http://peter.sh/experiments/chromium-command-line-switches/) ://peter.sh/experiments/chromium-command-line-switches/ 。这是第八个下来。看起来它允许 Native Client 访问用于 chrome 扩展的 TCP/UDP 套接字

# ruby-on-rails-3 - 在 Rails3 上创建视频模型

> ID：10932392
> 
> 赞同：1
> 
> 时间：2012-06-07T13:04:50.057
> 
> 标签：ruby-on-rails-3

我需要一些关于如何在 Rails 中创建视频模型的建议，以便我每次都可以使用新视频的地址更新数据库。例如有一个管理页面，管理员可以通过输入视频的本地地址来添加视频。就像上传脸书照片一样。我该如何处理？我对 RoR 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:24:50.290

如果这就像一个博客，并且您将向数据库中添加新视频，请查看回形针 gem [https://github.com/thoughtbot/paperclip](https://github.com/thoughtbot/paperclip)，这应该可以解决问题。您只需将视频上传到存储系统（Amazon S3 非常受欢迎），回形针在幕后处理一切。

如果这更像是您链接到网络上其他人的视频（又名 youtube 视频），您可以创建一个辅助方法，该方法将获取链接并渲染 youtube 容器以显示在您的网站上。

# css - 自定义 JQuery Mobile iOS 主题

> ID：10932398
> 
> 赞同：0
> 
> 时间：2012-06-07T13:05:33.600
> 
> 标签：css, jquery-mobile, themes

我在这里找到了受 JQuery Mobile iOS 启发的主题：https://github.com/taitems/iOS-Inspired-jQuery-Mobile-Theme。虽然我很欣赏它，但理想情况下我想定制它。我的问题是，我可以使用 JQuery Mobile Theme Roller (http://jquerymobile.com/themeroller/) 来修改它。或者，我需要以艰难的方式去做吗？我不知道如何通过themeroller 自定义它。但是，我以前没有尝试过导入主题。我希望有人能给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:07:07.830

可能不是直接在 ThemeRoller 中，不是。ThemeRoller 允许您导入它生成的主题以对其进行自定义，但是从[https://raw.github.com/taitems/iOS-Inspired-jQuery-Mobile-Theme/master/ios_inspired/styles.css](https://raw.github.com/taitems/iOS-Inspired-jQuery-Mobile-Theme/master/ios_inspired/styles.css)复制和粘贴 CSS是未识别。看起来你可能不得不用老式的方式来做。

# c# - 通过cmd卸载exe程序

> ID：10932400
> 
> 赞同：0
> 
> 时间：2012-06-07T13:05:39.607
> 
> 标签：c#, cmd, exe, windows-installer

我正在编写一个应用程序来从网络中删除旧版本的 Qmuzik ERP 软件并安装新版本。我已经使用 C# 中的 Process 方法通过 cmd 命令执行 msi 来安装新版本。我使用的命令是：

```
msiexec /qn /i "MSI Path" 
```

这很好用。

我这样做的原因是因为有不止一个 msi 必须按顺序运行。使用 process 方法，我可以观察进程并检测它何时完成并执行序列中的下一个 msi。所有这一切都在用户电脑上悄然发生。

问题是，在我安装新版本之前，我必须卸载以前的版本。旧版本是使用 exe 安装文件安装到机器上的。我尝试将exe文件转换为msi并使用msiexec通过命令行卸载，但它对已安装exe的实例没有影响，而不是转换后的msi（即整个网络）

我可以在 cmd 中使用任何命令来卸载使用 exe 安装的这些实例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:30:35.353

当您在 Windows 中安装程序时，会创建一个用于卸载的注册表项，其中包含多个值，其中包括**UninstallString值，这是您单击****Remove时****添加或删除程序**使用的命令行。

 **父键是：

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall

而这些**UninstallStrings**通常具有以下格式：

> MsiExec.exe /I{0826F9E4-787E-481D-83E0-BC6A57B056D5}

为了完成您尝试执行的操作，您必须创建一个[RegistryKey 对象](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.aspx)，读取您要删除的应用程序的**UninstallString值并运行命令行。**

更多信息[在这里](http://support.microsoft.com/kb/314481)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:01:46.200

您可以使用 revo 卸载程序，不是为了它的卸载功能，而是为了它的主视图，它显示了您的应用程序的注册卸载字符串。

但这只是一个起点。每个安装引擎都可以有自己的卸载字符串。你必须找到正确的，如果你足够幸运的话（尝试 /quiet、/passive 等，直到你找到正确的）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-08-21T07:18:49.747

转到文件路径，查找需要卸载的 .exe。在命令提示符下打开 .exe 所在的路径并执行“xxxx.exe --uninstall”。**

# visual-studio-2010 - QtCreator 的 qmake 与 nvcc 和 CUDA，Windows 7

> ID：10932402
> 
> 赞同：5
> 
> 时间：2012-06-07T13:05:55.137
> 
> 标签：visual-studio-2010, cuda, qt-creator, qmake, nvcc

我见过许多将 QtCreator 与 CUDA 结合起来的旧尝试，但它们都不再起作用了。

所以我开始这个话题，以便为每个人提供一个新的参考。

首先，我尝试使用以下命令编译书中提到的代码：

```
nvcc seqCuda.cu -o seqCuda 
```

但我得到了错误：类型名称“size_t”的无效重新声明。

我唯一能做的就是使用 Visual Studio 2010 编译《CUDA 应用程序设计与开发》一书中的示例代码；但是，VS2010 不是我想要使用的环境。所以我去日志文件并获取它使用的执行命令，它是以下内容：

```
nvcc -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.1\include"    --keep-dir "Release" -maxrregcount=0  --machine 32 --compile      -Xcompiler "/EHsc /nologo /Od /Zi  /MD " -o "Release\main.cu.obj" "C:\Users\Sam\Documents\Visual Studio 2010\Projects\CUDA_TestVS2010\CUDA_TestVS2010\main.cu" 
```

此命令创建一个目标文件。我可以成功地为 seqCuda.cu 中的示例代码执行它，但我不知道如何从目标文件转到可执行文件。我想在 Qt 中使用 qmake 文件来做到这一点。

谁能告诉我这个编译命令的重要部分是什么，以及如何在 qmake 文件中以正确的方式合并它？

现在我的问题是，我试图反汇编这个命令并用 qmake 重写它，是的，我在黑暗中刺伤，并且无法获得任何令人满意的结果。以下是我在 qmake 中的“尝试”。如果您可以将以下 qmake 中的任何命令替换为环境变量，我将不胜感激，尤其是 VC2010 bin 目录。

```
win32 {
    INCLUDEPATH += $(CUDA_INC_PATH)
    QMAKE_LIBDIR += $(CUDA_LIB_PATH)
    ARCFLAGS = -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env
    VSVERSIONFLAGS = --cl-version 2010
    VSDIRFLAG = -ccbin "c:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/bin"
    OTHERFLAGS = -maxrregcount=0  --machine 32 --compile     
    -Xcompiler "/EHsc /nologo /Od /Zi  /MD "
    LIBS += -lcudart

    cuda.output = ./${QMAKE_FILE_BASE}_cuda.obj
    cuda.commands = $(CUDA_BIN_PATH)/nvcc.exe $$ARCFLAGS $$VSVERSIONFLAGS $$VSDIRFLAG -  
    I$(CUDA_INC_DIR)     $$OTHERFLAGS
}

CUDA_SOURCES += seqCuda.cu
cuda.input = CUDA_SOURCES
QMAKE_EXTRA_COMPILERS += cuda 
```

# javascript - “-webkit-overflow-scrolling: touch” - 滚动的内容被隐藏了？

> ID：10932403
> 
> 赞同：3
> 
> 时间：2012-06-07T13:05:55.983
> 
> 标签：javascript, ipad, html, webkit

所以我发现我的网站有问题所以添加了

> “-webkit-overflow-scrolling: 触摸”</p>

这样当内容溢出时左右滚动现在可以工作（所有内容都在 iframe 内）。但是我注意到，当您在此 iframe 中垂直或水平滚动时，不会显示最初未在页面上绘制的任何内容，它只是白色的。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:43:04.140

[http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/](http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/)

这几乎总结了它，并提供了一个非常糟糕但可用的实现。问题出在苹果身上，这将是一个临时的解决方法。

# objective-c - NSString：从字符串中删除 UTF-8 重音的简单方法？

> ID：10932405
> 
> 赞同：46
> 
> 时间：2012-06-07T13:06:02.143
> 
> 标签：objective-c, utf-8, nsstring

我想换一个句子，例如：

> Être ou ne pas être。C'était là-bas。

会成为：

> Etre ou ne pas etre。C'etait la-bas。

有没有简单的方法可以用 NSString 做到这一点？还是我必须通过检查每个字符自行开发？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-07T13:12:36.087

```
NSString *str = @"Être ou ne pas être. C'était là-bas.";
NSData *data = [str dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *newStr = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
NSLog(@"%@", newStr); 
```

...或尝试`NSUTF8StringEncoding`改用。

此处的编码类型列表：

[https://developer.apple.com/documentation/foundation/nsstringencoding](https://developer.apple.com/documentation/foundation/nsstringencoding)

* * *

只是 FTR 这是写这个好答案的一种方式：

```
yourString = [[NSString alloc]
  initWithData:
    [yourString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]
  encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-19T18:43:28.920

Mattt Thompson 在[NSHipster](http://nshipster.com/cfstringtransform/)和[WWDC 2013 session 228中再次介绍了这一点](https://developer.apple.com/wwdc/videos/)

TL;博士

```
NSMutableString *str = [@"Être ou ne pas être. C'était là-bas." mutableCopy];
CFStringTransform((__bridge CFMutableStringRef)string, NULL, kCFStringTransformStripCombiningMarks, NO); 
```

应该做的伎俩，它对我很有用。

**警告** 由于评论中的很多人说这应该是公认的答案，因此我想对这种方法提出警告。这种方法非常慢，如果需要转换大量的字符串/数据，应该小心使用

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-07T13:09:27.670

你有没有尝试过

```
[string stringByFoldingWithOptions:NSDiacriticInsensitiveSearch locale:[NSLocale currentLocale]] 
```

或者

```
Boolean CFStringTransform (
   CFMutableStringRef string,
   CFRange *range,
   CFStringRef transform,
   Boolean reverse
); 
```

?

[CFStringTransform](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFMutableStringRef/Reference/reference.html#//apple_ref/c/func/CFStringTransform) &[转换标识符](http://developer.apple.com/library/mac/documentation/CoreFoundation/Reference/CFMutableStringRef/Reference/reference.html#//apple_ref/doc/constant_group/Transform_Identifiers_for_CFStringTransform)

```
NSMutableString *string = ...;
CFMutableStringRef stringRef = (__bridge CFMutableStringRef)string;
CFStringTransform(stringRef, NULL, kCFStringTransformToLatin, NO);
NSLog(@"%@", string); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-01-25T22:02:32.533

只是一个更新说它可以像这样在swift中完成：

```
"Être ou ne pas être. C'était là-bas.".stringByFoldingWithOptions(NSStringCompareOptions.DiacriticInsensitiveSearch, locale: NSLocale.currentLocale()) 
```

--> “Etre ou ne pas etre。C'etait la-bas。”

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-25T13:00:50.840

这是在 iPhone 6 iOS 9.0 模拟器上使用 Swift 2.0 的性能测试，在解决方案之间使用：

*   CFStringTransform（任务 1）
*   stringByFoldingWithOptions（任务 2）

任务 2 始终更快，例如：

```
Task 1 took 9.49736100435257 seconds.
Task 2 took 1.96649599075317 seconds. 
```

这里是测试：

```
 let timer = ParkBenchTimer()
    for _ in 1...1000000 {
        let mStringRef = NSMutableString(string: "Être ou ne pas être. C'était là-bas.") as CFMutableStringRef
        CFStringTransform(mStringRef, nil, kCFStringTransformStripCombiningMarks, false)
        String(mStringRef)
    }
    print("Task 1 took \(timer.stop()) seconds.")

    let timer2 = ParkBenchTimer()
    for _ in 1...1000000 {
        "Être ou ne pas être. C'était là-bas.".stringByFoldingWithOptions(NSStringCompareOptions.DiacriticInsensitiveSearch, locale: NSLocale.currentLocale())
    }
    print("Task 2 took \(timer2.stop()) seconds.") 
```

Klaas 的 ParkBenchTimer：[https ://stackoverflow.com/a/26578191/1097106](https://stackoverflow.com/a/26578191/1097106)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-04-13T11:23:45.467

**Swift 3** （在操场上测试）

```
//String+StripCombiningMarks.swift

extension String {
    /// strip combining marks (accents or diacritics)
    var stripCombiningMarks: String {
        let mStringRef = NSMutableString(string: self) as CFMutableString
        CFStringTransform(mStringRef, nil, kCFStringTransformStripCombiningMarks, false)
        return mStringRef as String
    }
} 
```

用法：

```
let umlaut = "äöüÄÖÜ"
let stripped = umlaut.stripCombiningMarks //aouAOU 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-23T07:02:27.570

这是完整的代码。使用函数 stringbyfoldignWithOptions。

`NSString *str1=@"Être ou ne pas être C'était là-bas"; NSString *str2=[str1 stringByFoldingWithOptions:NSDiacriticInsensitiveSearch locale:[NSLocale systemLocale]]; NSLog(@"%@",str2);`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-06T09:11:37.333

对于那些想要 CFStringTransform 解决方案的 Swift 版本的人：

```
let stripAccentAndDiacritics: (String) -> String = {
    var mStringRef = NSMutableString(string: $0) as CFMutableStringRef
    CFStringTransform(mStringRef, nil, kCFStringTransformStripCombiningMarks, Boolean(0))
    return String(mStringRef)
} 
```

# c# - 有人如何处理默认日期时间

> ID：10932407
> 
> 赞同：6
> 
> 时间：2012-06-07T13:06:17.530
> 
> 标签：c#, asp.net, database, data-formats

我有 DAL，我将数据库空值转换为它们在 C# 中的等效表示。例如：

```
NULL for Numeric = 0
NULL for String = String.Empty
NULL for DateTime = "1/1/0001" (i.e. DateTime.MinValue) 
```

就日期而言，问题在于表示层，尤其是在 GridViews 中。您不能`1/1/01`向用户显示。

我以前做的是检查`if myDate.Year=1 or myDate.Year < AcceptedDate`并显示空字符串，但似乎与其他类型不同的是额外的努力

请愿意接受更好的方法。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T13:08:46.453

使用`Nullable`数据类型存储空值。

```
DateTime? value = null;
int? myNullableInt = 1;
value = DateTime.Now; 
```

如何检查变量是否有值或空值

```
if (value!=null) 
```

字符串值可以存储空值，因此字符串存储空值没有不同的数据类型。

```
string var;
if (var == null) 
```

或者

```
if (String.IsNullOrEmpty(var)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T13:12:03.513

您还可以使用 DateTime.MinValue 常量。

[http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.minvalue.aspx)

你的条件是：

```
if (myDate == DateTime.MinValue) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:08:39.810

您可以使用`Nullable` `DateTime`，因此您将返回`DateTime?`而不是`DateTime`从 DAL 中返回。这样您就可以检查返回值是否为空。

```
DateTime? dateTime = null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:11:15.240

正如其他人提到的，您可以使用`System::Nullable<DateTime>`.

我见过的另一种方法是使用标准`DateTime`并仅使用特殊值，例如`DateTime.MinValue`. 如果您需要遵守现有接口的类型并且无法将其更改`DateTime`为`Nullable<DateTime>`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T13:13:00.373

您可以按照其他人的建议使用 Nullable DateTime，也可以使用此技巧：（以防止无效的默认值。）

```
// If dateTime has not been initialize, initialize to Now
// (or to any other legal inital values)
dateTime = ((dateTime != new DateTime()) ? dateTime : DateTime.Now); 
```

如果您必须使用不可为空的 DateTime 并且想要提供默认值（如果没有），则此技巧很有用。（例如，您在数据库中有一个不可为空的 DateTime 列，并且仅当行是新的时才想设置该值。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T13:13:28.397

我认为您别无选择，只能像以前一样进行检查并相应地显示。可为空的类型可能会使您的事情变得更容易。根据您的数据，即使是数字也应该以这种方式处理。DBNull != 0。

# c - IP 校验和自动更改

> ID：10932408
> 
> 赞同：2
> 
> 时间：2012-06-07T13:06:20.667
> 
> 标签：c, sockets, network-programming, checksum

我是网络编程的新手。在过去的几天里，我正在学习这一点。今天我试着玩原始套接字。一切顺利。但是 Ip 校验和并没有很好地帮助我。无论我手动给 iph->check 的值是多少，但在接收校验和时会有所不同。

实际上我所做的是我创建了一个原始套接字 C 程序，它将创建一个使用原始套接字发送到环回接口的 TCP 数据包。我用wireshark捕获了数据包。但是当我解释接收到的数据包时，我发现无论我在程序中为校验和提供什么值，它都会显示一些不同的常数值。

这是我的代码

```
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/tcp.h>
#include <arpa/inet.h>
#include <errno.h>
//#include <linux/in.h>

unsigned short calculate_check_sum (unsigned short *buf, int nwords) {
unsigned long sum;
for (sum = 0; nwords > 0; nwords--) {
    sum += *buf++;
}
sum = (sum >> 16) + (sum & 0xffff);
sum += (sum >> 16);
return ~sum;
}

int main () {
int sockfd = socket (PF_INET, SOCK_RAW, 6);
if (sockfd < 0) {
    perror ("socket failed: ");
    return -1;
}
char packet[4096];

struct iphdr *iph = (struct iphdr *) packet;
struct tcphdr *tcph = (struct tcphdr *) packet + sizeof (struct iphdr);
//char *payload = packet + sizeof (struct iphdr) + sizeof (struct tcphdr);

memset (packet, 0, 4096);

//strcpy (payload, "helllo");

struct sockaddr_in sin;
sin.sin_family = AF_INET;
sin.sin_port = htons (1330);
inet_pton (AF_INET, "127.0.0.1", &(sin.sin_addr));

/* TESTING
char var[123];
inet_ntop (AF_INET, &(sin.sin_addr), var, INET_ADDRSTRLEN);
printf ("%s\n", var);
*/

//WRITING ON IP HEADER
iph->ihl = 5;
iph->version = 4;
iph->tos = 0;
iph->tot_len = sizeof (struct iphdr) + sizeof (struct tcphdr); //+ strlen (payload);
iph->id = htons (1234);
iph->frag_off = 0;
iph->ttl = 225;
iph->protocol = 6;
iph->check = 0;
iph->saddr = inet_addr ("43.88.80.72");
iph->daddr = sin.sin_addr.s_addr;

//WRITING TCP HEADER
tcph->source = htons (1234);
tcph->dest = htons (1330);
tcph->seq = random ();
tcph->ack_seq = 0;
tcph->res1 = 0;
tcph->doff = 0;
tcph->syn = 1;
tcph->window = htons (1000);
tcph->check = 0;
tcph->urg_ptr = 0;

//CALCULATE CHECK SUM AND PUT IN THEIR PLACES
//iph->check = calculate_check_sum ((unsigned short *) packet, iph->tot_len >> 1);
iph->check = 0xffff;

int one = 1;
if (setsockopt (sockfd, 0, IP_HDRINCL, &one, sizeof (one)) < 0) {
    perror ("setsockopt faild: ");
    return -1;
}

int ret = sendto (sockfd, packet, iph->tot_len, 0, (struct sockaddr *) &sin, sizeof (sin));
if (ret < 0) {
    perror ("sendto failed: ");
    return -1;
}
return 0;
} 
```

这是wireshark 000000000000000000000000008004500002804d20000e106*da5c*2b5850487f0000010000000000000000000000000000000000000000 捕获的流

这里的 5cda（在 astrics 之间）是我得到的校验和。

另外，我创建了自己的捕获程序，而不是wireshark，如下所示，

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <unistd.h>
#include <netinet/tcp.h>
#include <netinet/ip.h>
#include <string.h>
#include <errno.h>

int main () {
int fd = socket (PF_INET, SOCK_RAW, 6);
int len_msg;
if (fd < 0)
    perror ("socket failed: ");
char buf [8192];
memset (buf, 0, 8192);
struct sockaddr_in sock_addr;
inet_pton (AF_INET, "127.0.0.1", &(sock_addr.sin_addr));
int len = sizeof (struct sockaddr);
printf ("%s\n",inet_ntoa(sock_addr.sin_addr.s_addr));
if (bind (fd, (struct sockaddr *) &sock_addr, len)) {
    perror ("bind failed: ");
    return -1;
}
while ((len_msg = recvfrom (fd, buf, 8192, 0, (struct sockaddr *) &sock_addr, (socklen_t *)&len)) != -1) {
    //printf ("%s\n", buf+sizeof(struct iphdr)+sizeof(struct tcphdr));
    //printf ("%s\n", buf);
    int i;
    printf ("%d\n", len_msg);
    for (i = 0; i < len_msg; i += 1)
        printf ("%x ", (unsigned char) *(buf + i));
    printf ("\n");

    printf ("*****************************************\n");
    struct iphdr *iph = (struct iphdr *) buf;
    printf ("checksum: %x\n", iph->check);
    break;
}
printf ("%s\n",inet_ntoa(sock_addr.sin_addr.s_addr));
return 0;
} 
```

我仍然得到相同的支票价值。无论我在第一个程序中输入什么值，作为校验和，捕获的数据包只有值 0x5cda 作为其校验和。

我正在使用 CentOS。内核本身是否会对我的数据包进行任何更改？请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:38:58.000

根据您的描述，您似乎在发送代码中放入了虚假的 IP 校验和。根据 RFC 1122，这是无效的。我怀疑 Linux 原始套接字处理代码更宽松，并且会接受具有无效 IP 校验和的数据包将覆盖您的校验和。

看一眼：

[http://lxr.linux.no/linux+v3.4.1/net/ipv4/raw.c#L458](http://lxr.linux.no/linux+v3.4.1/net/ipv4/raw.c#L458) （当您发送消息时会调用它）

# c# - Web 浏览器控件导航错误

> ID：10932410
> 
> 赞同：2
> 
> 时间：2012-06-07T13:06:22.303
> 
> 标签：c#, windows-phone-7

在我的 wp7 网络浏览器应用程序中，我有两个 xaml 页面。一个是 mainpage.xaml，另一个是 web.xaml。我在 mainpage.xaml 中有一个 youtube 按钮，如果我点击它，它会导航到 web.xaml 中的 youtube.com。但是，如果我在 youtube 完全导航后按下设备后退按钮（导航到主页），则没有错误。但是，如果我在 youtube 导航时按下后退按钮，则会引发错误。我认为记录历史时出错（我也有历史页面来记录历史）。错误是 - **"Cannot write to a closed TextWriter"**。其他网站有时也会发生此错误。我还添加了该错误的图像。谁能帮我这个？在此先感谢您的帮助！

```
public partial class Web : PhoneApplicationPage
{
    List<Uri> HistoryStack;
    int HistoryStack_Index;
    bool fromHistory;
    bool navigationcancelled = false;
    public IsolatedStorageFile historyFile = null;
    public IsolatedStorageFileStream filestream = null;
    public StreamWriter stream = null;

    public Web()
    {
        InitializeComponent();
        HistoryStack = new List<Uri>();
        historyFile = IsolatedStorageFile.GetUserStoreForApplication();
        if (historyFile.FileExists("History.txt"))
        {
            Error in this line--->filestream = historyFile.OpenFile("History.txt", System.IO.FileMode.Append, FileAccess.Write);--->Error in this line
            stream = new StreamWriter(filestream);
        }
        else
        {
            filestream = historyFile.OpenFile("History.txt", System.IO.FileMode.Create);
            stream = new StreamWriter(filestream);
        }

        HistoryStack_Index = 0;
        fromHistory = false;
        browsers[this.currentIndex].Navigated += new EventHandler<System.Windows.Navigation.NavigationEventArgs>(browsers_Navigated);
        browsers[this.currentIndex].Navigating += new EventHandler<NavigatingEventArgs>(browsers_Navigating);
    }

    protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
        {
            stream.Close();
        }
    }

private void browsers_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    { 
        if (!fromHistory)
        {
            if (HistoryStack_Index < HistoryStack.Count)
            {
                HistoryStack.RemoveRange(HistoryStack_Index, HistoryStack.Count - HistoryStack_Index);
            }
            HistoryStack.Add(e.Uri);
                 //HistoryURL temp = new HistoryURL();
                 //temp.URL = e.Uri.ToString();
                 //app.historyList.Add(temp);
                Thread.Sleep(100);
                Dispatcher.BeginInvoke(() =>
                {
                    string title = (string)browsers[this.currentIndex].InvokeScript("eval", "document.title.toString()");
                    stream.WriteLine(title + ";" + e.Uri.ToString());---> **Error in this line.**
                });
            }

            HistoryStack_Index += 1;
        }
        fromHistory = false;
        navigationcancelled = false;
    } 
```

![在此处输入图像描述](../Images/0d7f7c6ce234b8084129cc07ffeee7b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:19:22.670

如果我正确理解这一点，您将拥有 2 个用于导航事件 (`OnNavigatedFrom`和`browsers_Navigated`) 的处理程序。

问题可能是在`OnNavigatedFrom`您调用时，由于流已关闭，`stream.Close();`因此`stream.WriteLine`下次调用时将失败。

尝试移动`stream.Close();`到应用程序关闭事件并使用`stream.Flush()`after `stream.WriteLine`。

# android - 设置可点击列表

> ID：10932411
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:06:27.237
> 
> 标签：android, list, clickable

我已经编写了设置列表的代码，现在我想要可点击的列表如何做到这一点。当我点击特定项目时它应该是可点击的。当我点击 TrxtView 时，应该会发生一些动作，当我点击时按钮应该发生另一个动作。

我的代码是

```
public class Downloadlist extends ListActivity {
            private List<String> item = null;
            private List<String> path = null;
            private String root="/sdcard";
            private TextView myPath;
            ListView lv1;

            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.mydownload);
                myPath = (TextView)findViewById(R.id.path);
                lv1=(ListView)findViewById(R.id.list);
                getDir(root);
            }
            private void getDir(String dirPath)
            {
                myPath.setText("Location: " + dirPath);
                item = new ArrayList<String>();
                path = new ArrayList<String>();
                File f = new File(dirPath);
                File[] files = f.listFiles();
                if(!dirPath.equals(root))
                {
                    item.add(root);
                    path.add(root);
                    item.add("../");
                    path.add(f.getParent());
                }
                for(int i=0; i < files.length; i++)
                {
                    File file = files[i];
                    path.add(file.getPath());
                    if(file.isDirectory())
                        item.add(file.getName() + "/");
                    else
                        item.add(file.getName());
                }
                Log.d("itemssssssss", item.toString());
                ArrayAdapter<String> fileList =
                        new ArrayAdapter<String>(this, R.layout.rowmydownload,R.id.rowtext, this.item);
                setListAdapter(fileList);

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:36:01.223

在列表视图项中有一个按钮将使该视图不可点击。因此，请使用 imageView 而不是按钮并将 onItemClickListener 放在活动中的 listView 中。在适配器中，为 Textview 和 ImageView 放置 OnClickListener。

# java - 设置 android:targetSdkVersion 后，应用程序不再适用于较低的 android 版本

> ID：10932420
> 
> 赞同：0
> 
> 时间：2012-06-07T13:07:05.863
> 
> 标签：java, android

将 android:targetSdkVersion 设置为 15 后，应用程序无法在 1.6 模拟器中运行。它抛出 java.lang.VerifyError。

编辑：应用程序崩溃了，因为我正在调用 API 11 中的 invalidateOptionsMenu。现在我什至在调用它之前进行检查（如果（VERSION.SDK_INT >= 11））。它仍然抛出同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:10:11.953

只需设置一个新的模拟器！

为此，您可以简单地使用您的`AVD Manager`（Android 虚拟设备）！

就像您在 1.6 设备上运行 4.0 应用程序一样。如果您不必将 apiLevel 设置为 15（即您不需要新的 API），您应该考虑将其设置为可能的最低级别。

编辑：

minSDK 版本和项目的 API 级别之间存在差异：
MinLevel：哪些设备能够运行应用程序
ApiLevel：哪些 API 能够在 eclipse 中的项目中使用

尽量确保不要混淆它们，以便您的 MinLevel 有望与您的 ApiLevel 相匹配。这样做将确保您的应用不会出现此类错误，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:16:55.337

您可能忘记将项目构建设置为版本 4.0.3。

1.  在项目资源管理器中右键单击您的项目。
2.  单击**属性**。
3.  点击**安卓**。
4.  **单击4.0.3**旁边的复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:42:08.430

[这个答案](https://stackoverflow.com/a/7889558/836308)的好把戏。杰出的。谢谢大家。

# jquery - 获取第一个孩子的 attr 值

> ID：10932421
> 
> 赞同：4
> 
> 时间：2012-06-07T13:07:06.253
> 
> 标签：jquery

我有以下代码用于将 onclick 分配给`<tr>`一行：

```
$("#tblDepartment tr").click(function() {
       alert($(this).eq(1).attr("field"));
   }); 
```

我的 HTML 代码在这里：

```
 <tr class="trEven" id="trDepartment4">
            <td field="ID" style="display: none;" width="50px">4</td>
            <td field="DEPT_NM" width="100%">BID DEPARTMENT</td>
    </tr> 
```

我想做的是获取第一个孩子的innerHTML。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:09:39.180

```
$(this).children(":first").html(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T13:15:25.830

You want to do something like this

```
$("#tblDepartment tr").click(function() {
   alert($(this).children('td').first().html());
}); 
```

This will show you the content your looking for :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T13:08:33.873

```
$("#tblDepartment tr").click(function() {
   alert($(this).children('td').first().html());
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T13:12:04.120

```
$(function(){
    $(".trEven").click(function() {
        alert($(this).parent().find("td:first").html());
   });    
}); 
```

工作示例[http://jsfiddle.net/H2gJV/7/](http://jsfiddle.net/H2gJV/7/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T13:09:20.627

```
$("#tblDepartment tr").click(function() {
   alert($(this).eq(1).attr("field#ID").html());
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T13:13:32.710

为了完整起见，这里有一个范围解决方案。

```
$('#tblDepartment tr').click(function () {
  alert($('td[field=ID]', this).html());
}); 
```

# jquery - 将值从多项选择移动到另一个选择

> ID：10932422
> 
> 赞同：3
> 
> 时间：2012-06-07T13:07:07.220
> 
> 标签：jquery, select

我有 2 个多项选择 - 我可以让它将我在 .select-cities 中单击的选项移动到 .chosen-cities，但是，它不能以其他方式工作吗？有什么想法为什么不呢？

```
//Move cities to div
$jq('.select-cities option').click(function () {
    return !$jq('.select-cities option:selected').remove().appendTo('.chosen-cities');
});

$jq('.chosen-cities option').click(function () {
    alert(this);
    $jq('.chosen-cities option:selected').remove().appendTo('.select-cities');
}); 
```

的HTML：

```
<select class="select-cities" name="city" multiple="multiple">
                <option>Frederiksberg</option>
                <option>Vanløse</option>
                <option>Glostrup</option>
                <option>Brøndby</option>
                <option>Roskilde</option>
                <option>Køge</option>
                <option>Gentofte</option>
                <option>Hillerød</option>
                <option>Tårnby</option>
                <option>Vallensbæk</option>
            </select>

<select class="chosen-cities" name="chosen-cities-name" multiple="multiple">

            </select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:13:08.170

```
$('.select-cities').click(function () {
    $('.select-cities option:selected').appendTo('.chosen-cities');
});

$('.chosen-cities').click(function () {
    $('.chosen-cities option:selected').appendTo('.select-cities');
}); 
```

[jsFiddler](http://jsfiddle.net/cs6Xb/)示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:11:09.303

选项上的选择器不会触发点击事件

这是一个可能的解决方法 [http://jsfiddle.net/nDvch/1/](http://jsfiddle.net/nDvch/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:14:21.023

您必须将点击事件分配给“选择”元素。不是“选项”。

看到这个小提琴：http: [//jsfiddle.net/fBd5z/](http://jsfiddle.net/fBd5z/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:10:58.843

您可能需要使用 jQuery live() 函数来确保单击事件适用于与选择器匹配的所有元素，即使这些元素发生更改：[.live()](http://api.jquery.com/live/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T13:11:58.210

首先我不会使用`$jq('.chosen-cities option').click`but `$jq('.chosen-cities').change(function () {`。

对于您的实际问题： remove() 还会删除所有事件侦听器。更好地使用[分离](http://api.jquery.com/detach/)

# bash - 确定全局使用哪些变量

> ID：10932424
> 
> 赞同：0
> 
> 时间：2012-06-07T13:07:09.637
> 
> 标签：bash, shell, ksh

我正在尝试重构一些冗长的 shell 脚本，并且我想消除在函数中声明但全局使用的任何变量。有没有办法快速找到这些变量？

或者，有没有办法快速找出哪些变量在使用时为空？这样我可以排版函数中的所有变量，并快速查看所有全局使用变量的列表（有一些误报，但我可以清除这些）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:05:58.157

你可能会觉得`set -u`有帮助。如果使用时未设置变量，shell 将出错。这不会帮助您找到使用时为空字符串的变量，但会找到未设置的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:23:55.617

我不知道这里有什么真正的捷径，但是您当然可以采取一些步骤来更系统地探索您的脚本。

1.  使用 查找导出的变量`export -p`。
2.  Grep 为`declare`您的脚本中的关键字。
3.  循环`declare -F`和 grep 用于声明语句或变量赋值。
4.  解析 的输出`set`以排除您知道的变量和函数，然后调查其余部分。

恐怕这些都不是全面的解决方案。但是为了让你开始：

```
# Find declare statements in functions.
for func in $( declare -F | awk '{print $NF}' ); do
    type "$func" | fgrep declare
done 
```

希望有帮助！

# facebook-graph-api - Facebook Graph API 返回带有粉丝页面 ID 的 false

> ID：10932425
> 
> 赞同：0
> 
> 时间：2012-06-07T13:07:10.063
> 
> 标签：facebook-graph-api, facebook-apps, facebook-javascript-sdk

我在使用 facebook graph api 时遇到问题，我有一个 iframe 应用程序可以返回来自特定粉丝页面的所有专辑，但是从过去 3 天开始它停止工作，我发现我是因为 API 返回错误，这里是网址：

[http://graph.facebook.com/347077778656045](http://graph.facebook.com/347077778656045)

这是粉丝专页网址：

[https://www.facebook.com/pages/Muebles-HRP/347077778656045](https://www.facebook.com/pages/Muebles-HRP/347077778656045)

我的 facebook id 是 347077778656045，如果我使用另一个粉丝页面 id，则应用程序可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:19:33.293

我认为`false`被退回意味着经过身份验证的用户`access_token`无权查看该对象。类似的帖子：[即使使用有效的用户访问令牌，用户的图形 API 也会返回 false](https://stackoverflow.com/questions/7357493/graph-api-for-user-returns-false-even-with-a-valid-user-access-token)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:11:19.863

我无法访问该页面。

你有未发布的页面吗？如果是这样，只有管理员可以看到该页面

仅供参考：[常见问题解答](https://www.facebook.com/help/?faq=184605634921611)

# jquery - jQuery DataTables 在 IE8 中弄乱了我的 CSS 网格，如何解决？

> ID：10932426
> 
> 赞同：2
> 
> 时间：2012-06-07T13:07:13.023
> 
> 标签：jquery, css, asp.net-mvc-3, jquery-plugins

我正在使用`ASP.NET MVC3`插件`jQuery Datatable`。当数据表在页面上时，我的 CSS 布局出现问题。如果没有数据表，则一切正常。当数据表在屏幕上时，它会与我网站的页脚重叠。我似乎无法让它正确显示。我有一个使用 的网格布局`YUI3`，这是我在 YUI3 中都使用的（按此顺序）：

*   cssreset-min
*   cssfonts-min
*   cssgrids-min
*   cssbase-min

这在最新版本的 FireFox 中运行良好。我只是在测试`IE8`，这是一个要求，我工作的大多数人都使用 IE8。

我已经缩小了我的 HTML，因此只有最低限度的可用。这是我的 HTML：

```
<!DOCTYPE html>
<html>
     <head>
          <title>My Website</title>
          <meta charset="utf-8" />
          <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
          <link href="/Assets/Stylesheets/hef2.css" rel="stylesheet" />
          <link href="/Assets/Stylesheets/jQuery-DataTables/css/jquery.dataTables.css" rel="stylesheet" />
     </head>
     <body>

          <div id="hd">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</div>

          <div id="bd">

               <div class="yui3-g">

                    <div class="yui3-u" id="nav">

                         <div id="nav-container">

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                         </div>
                    </div>

                    <div class="yui3-u" id="main">

                         <div id="main-container">

                              <div class="content">
                                   <h1>Banks Dashboard</h1>
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">

                                   <div id="banks-datatable-wrapper">
                                        <div id="banks-datatable-container"></div>
                                        <div style="clear:both;"></div>
                                   </div>

                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                              <div class="content">
                                   <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</p>
                              </div>

                         </div>

                    </div>

               </div>

          </div>

          <div id="ft">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas sit amet metus. Nunc quam elit, posuere nec, auctor in, rhoncus quis, dui. Aliquam erat volutpat. Ut dignissim, massa sit amet dignissim cursus, quam lacus feugiat.</div>

          <script src="/Assets/JavaScripts/jQuery/jquery-1.7.2.min.js"></script>
          <script src="/Assets/JavaScripts/jQuery-DataTables/jquery.dataTables.min.js"></script>

          <script type="text/javascript">

               $(document).ready(function () {

                    $('#banks-datatable-container').html('<table class="display" id="banks-datatable"></table>');
                    $('#banks-datatable').dataTable({
                         "aoColumns": [
                              { "sTitle": "Engine" },
                              { "sTitle": "Browser" },
                              { "sTitle": "Platform" },
                              { "sTitle": "Version", "sClass": "center" },
                              { "sTitle": "Grade" }
                         ],
                         "bAutoWidth": false,
                         "bFilter": false,
                         "bLengthChange": false,
                         "bProcessing": true,
                         //"bServerSide": true,
                         "bSort": false,
                         "iDisplayLength": 11,
                         "sAjaxSource": '/Administration/Bank/List2'
                    });
               });

          </script>

     </body>

</html> 
```

这是我目前与 YUI3 的 CSS 一起使用的唯一 CSS：

```
body
{
     margin: auto;
     width: 1025px;
}

#nav
{
     width: 300px;
}

#main
{
     width: 725px;
} 
```

有人可以帮我解决这个问题吗？我试过添加`clear:both`，但没有奏效。

是像 jsbin 这样的在线服务，我可以在其中粘贴/上传我的 HTML/CSS 代码/文件吗？

代码可以在：[http](http://live.datatables.net/efosuj/3/edit) ://live.datatables.net/efosuj/3/edit 查看。它在可用查看器中正确显示，但在 IE8 中单独运行时会出现问题。

**更新 2012-06-12**

我设法添加了以下内容并且它有效，但我想以一种样式添加它，尝试过但它没有用：

```
if (navigator.userAgent.toString().indexOf('MSIE') >= 0) {
     jQuery('#main-container').css('overflow', 'auto');
} 
```

这是在加载网格后添加的。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:36:42.527

我使用了以下内容，它对我有用：

```
if (navigator.userAgent.toString().indexOf('MSIE') >= 0) {
     jQuery('#main-container').css('overflow', 'auto');
} 
```

它张贴在数据表[论坛上](http://www.datatables.net/forums/discussion/comment/35607#Comment_35607)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:36:32.847

在你的桌子上你有 class="display" 这个类是什么？我认为这个类需要 position:absolute;

# sharepoint - Sharepoint 外部列表和自定义字段类型

> ID：10932430
> 
> 赞同：0
> 
> 时间：2012-06-07T13:07:29.823
> 
> 标签：sharepoint, external, custom-fields

我有一个奇怪的问题。

我有一个需要从 WCFService 填充的共享点列表的客户端。那部分工作得很好。

我有一个正在映射 WCF 数据的 bdcmodel，我也可以从 bdcmodel 创建一个外部列表，这样就可以正常工作了。

我遇到的问题是模型中的一个属性实际上是一组称为属性的实体。此集合中的对象仅具有 2 个属性 Name 和 Value，因此它们实际上只是一个键值对。

客户端希望在外部列表中查看父实体的属性列表。所以会有一个属性列，在该列中将是每个父对象的属性列表。

有没有办法做到这一点？我正在研究自定义字段类型，但似乎这些确实是单值。

我将如何在内部和外部列表中创建列表？

任何人都可以提供的任何帮助都会很棒，即使它只是告诉我确实没有稳定的方法可以做到这一点，所以我可以回到客户并告诉他们我们需要建立一个自定义列表来支持这一点，因为OOB 外部列表和自定义字段以及自定义字段类型将不支持这种嵌套列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:22:01.490

我决定将自定义字段设置为字符串，当我从 BdcModel 获取我的集合时，我将其序列化为 JSON，然后将其传递给该字段。当在 display、edit 或 new 中查看该字段时，我已经覆盖了 FieldRenderingControl，并且我正在以这种方式平铺集合。

# solr - 如果索引文件大于或等于 2 GB，Solr 每秒可以处理多少次搜索？

> ID：10932432
> 
> 赞同：2
> 
> 时间：2012-06-07T13:07:35.870
> 
> 标签：solr, lucene.net

NopCommerce 2.30 在 IIS 7.5 上运行，服务器有 16GB RAM 和双核处理器。我想用 Nop Commerce 实现 Solr。
如果索引文件大于或等于 2 GB，Solr 每秒可以处理多少次搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T19:29:11.400

我推荐这个演示文稿，它可以让您轻松了解您的系统功能。 [http://www.lucidimagination.com/devzone/events/conferences/lucene-revolution-2012-presentations#Paddy_Mullen](http://www.lucidimagination.com/devzone/events/conferences/lucene-revolution-2012-presentations#Paddy_Mullen)

它描述了如何将 Wikipedia 索引为单机性能限制的基准。在 solr 的 dataimporthandler wiki 上也有一些关于此的信息。 [http://wiki.apache.org/solr/DataImportHandler#Example:_Indexing_wikipedia](http://wiki.apache.org/solr/DataImportHandler#Example:_Indexing_wikipedia)

根据我使用 solr 的经验，我可以说我有一个 10 GB 的索引，分为 9 个核心，每分钟执行 2300 个请求，平均响应时间为 40 毫秒。这是在两个 AMD Opteron 2.6 ghz 处理器上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-08T14:44:32.240

也许你应该在这里问为 nop 商业做这件事的专家：http: [//nopaccelerate.com/](http://nopaccelerate.com/)

# iphone - 如何在 iphone 的 UIAlertview 中返回 UITextField 的键盘？

> ID：10932434
> 
> 赞同：0
> 
> 时间：2012-06-07T13:07:44.640
> 
> 标签：iphone, uitextfield, uialertview

我有一个 UIAlertView，其中包含一个带有确定和取消按钮的 UITextField。当我单击确定按钮时，我正在调用 webService。我想在调用 web 服务之前返回键盘。直到响应不是来自 web 服务，键盘才会返回。由于在加载 web 服务期间用户看不到半屏。这是我做的代码。

```
UIAlertView *alertview = [[UIAlertView alloc] initWithTitle:@"Forgot Password" message:@"    " delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];

    // Adds a username Field
    alertEmailtextfield = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 29.0)]; 
    alertEmailtextfield.layer.cornerRadius = 07.0f;
    [alertEmailtextfield setBorderStyle:UITextBorderStyleRoundedRect];
    alertEmailtextfield.placeholder = @"Enter Email";
    [alertEmailtextfield setBackgroundColor:[UIColor whiteColor]]; 
    alertEmailtextfield.autocapitalizationType =UITextAutocapitalizationTypeNone; //For Making Caps Off
    [alertview addSubview:alertEmailtextfield];

[alertview show];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 1) {

        if ([alertEmailtextfield.text length] != 0) {

            if (![self validEmail:alertEmailtextfield.text]) {

                [AlertView UIAlertView:@"Enter email is not correct"];

            }else{
                //[alertEmailtextfield resignFirstResponder];

                [NSThread detachNewThreadSelector:@selector(startSpinner) toTarget:self withObject:nil];

                Boolean isForgotPassword = [serverConnection forgotPassword:alertEmailtextfield.text];

                if (isForgotPassword) {

                    NSLog(@"Mail is send");

                    [AlertView UIAlertView:@"New password is send to your mail"];
                    [spinner stopAnimating];

                }else{

                    [AlertView UIAlertView:@"User does not exist"];
                    [spinner stopAnimating];
                }
            }
        }else{

            [AlertView UIAlertView:@"Text Field should not be empty"];
        }
    }
} 
```

如果有人知道如何在 UIAlertView 的 UITextField 中返回键盘，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:14:06.037

您的 UI 卡在等待您的 Web 服务完成。在后台线程中调用您的网络服务，您的问题将得到解决。

```
[self performSelectorInbackgroundThread:@selector(yourWebservice)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:30:02.663

可能是您在同一个主线程中同时执行两项任务（Web 服务调用和键盘处理），所以直到您的数据未从服务器键盘加载之前不会退出视图。在后台线程中调用 weservice 方法。

> -(void)alertView:(CustomAlert *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
> [textField resignFirstResponder];
> **更新**
> [self performSelectorInBackground:@selector(yourWebservice) withObject:nil];
> 
> }

# eclipse - 试图提交颠覆性的更改

> ID：10932436
> 
> 赞同：2
> 
> 时间：2012-06-07T13:07:49.350
> 
> 标签：eclipse, svn, subversive

我正在尝试提交我对项目所做的更改，但收到以下消息。

某些选定的资源存在冲突。您应该在提交之前解决冲突。

关于如何解决这个问题以便我可以提交的任何建议？

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:25:54.413

右键单击项目并选择`Team`-> `Synchronize with Repository`。切换到`Team Synchronization`透视。左视图`Synchronize`显示您的本地和远程更改。您可以通过从工具栏中选择红色图标（左右箭头）将过滤器设置为冲突资源。双击一个资源，您将看到冲突。解决它们后，您可以提交更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:59:35.493

这种情况正在发生，因为您项目中的其他人已经对您正在处理并提交（签入）文件的同一行代码进行了一些更改。

由于您没有随身携带他们的零钱，因此消息即将到来。

在提交任何内容之前始终进行更新是一个好习惯。

由于您收到消息，现在如果您尝试更新文件，那么您将发生冲突（如果您的代码更改与其他人的更改发生冲突）或者文件可能会被合并（如果在同一个文件上另一个人已对您未处理的其他一些代码行进行了更改）。

更新后冲突文件将在 svn 控制台中以红色显示。您可以右键单击该红色文件并手动“编辑冲突”。完成后，您的文件就可以提交了。

希望这可以帮助。

# php - 在 PHP 中使用 CURL POST 给出无效请求错误

> ID：10932443
> 
> 赞同：4
> 
> 时间：2012-06-07T13:08:05.480
> 
> 标签：php, post, curl, oauth, google-api

我正在使用 curl 为谷歌帐户使用以下发布方法，但它给了我 invalid_request 错误。

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/ux5gNj-_mIu4DOD_gNZdjX9EtOFf&
client_id=1084945748469-eg34imk572gdhu83gj5p0an9fut6urp5.apps.googleusercontent.com&
client_secret=CENSORED&
redirect_uri=http://localhost/oauth2callback&
grant_type=authorization_code 
```

这是我的带有 curl 的 PHP 代码

```
$text ='test';

$URL = "https://accounts.google.com/o/oauth2/token";

$header = array(
"POST /o/oauth2/token HTTP/1.1",
"Host: accounts.google.com",
"Content-type: application/atom+xml;charset=\"utf-8\"",
"Accept: text/xml",
"Cache-Control: no-cache", 
"code=[my_code]&client_id=[my_client_id]&client_secret=[my_client_secret]& redirect_uri=http://localhost/curl_resp.php&grant_type=authorization_code",
"Content-length: ".strlen($text),
);

 $xml_do = curl_init();
 curl_setopt($xml_do, CURLOPT_URL, $URL);
 curl_setopt($xml_do, CURLOPT_CONNECTTIMEOUT, 10);
 curl_setopt($xml_do, CURLOPT_TIMEOUT, 10);
 curl_setopt($xml_do, CURLOPT_RETURNTRANSFER, true);
 curl_setopt($xml_do, CURLOPT_SSL_VERIFYPEER, false);
 curl_setopt($xml_do, CURLOPT_SSL_VERIFYHOST, false);
 curl_setopt($xml_do, CURLOPT_POST, false);
 curl_setopt($xml_do, CURLOPT_POSTFIELDS, $text);
 curl_setopt($xml_do, CURLOPT_HTTPHEADER, $header); 
```

我有无效的请求错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T15:26:34.130

我对使用 Google 的 oAuth API 一无所知，但从我目前看到的示例来看，您应该在 post 字段中传递值（即`code`,`client_id`等），而不是直接在HTTP 标头。

下面的例子仍然不能完全工作，但它没有得到`invalid_request`错误，而是给你`invalid_grant`. 我认为除了我提到的内容之外还有其他问题（也许您需要来自 Google 的新凭据或其他东西），但这可能会让您更近一步，至少：

```
$post = array(
    "grant_type" => "authorization_code", 
    "code" => "your_code", 
    "client_id" => "your_client_id", 
    "client_secret" => "your_client_secret", 
    "redirect_uri" => "http://localhost/curl_resp.php"
);

$postText = http_build_query($post);

$url = "https://accounts.google.com/o/oauth2/token";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postText); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);

$result = curl_exec($ch);
var_dump($result);    // gets an error, "invalid_grant" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:14:35.213

对您的请求的响应实际上包括对问题的非常易读的描述：

> POST 请求需要一个`Content-length`标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:50:52.513

为什么将 CURLOPT_POST 设置为**false**？

```
 curl_setopt($xml_do, CURLOPT_POST, false); 
```

尽管如果设置了 CURLOPT_POSTFIELDS，cURL 的某些配置会自动将其更改为 tru，但您没有有效的 postfield。

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并使用完整路径。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，则 value 必须是数组。

它应该是 param=value 语法或传递的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T17:17:40.220

我也遇到了同样的问题，谷歌返回一个“invalid_xxx”。

经过大量研究和故障排除，问题出在表单本身的编码上！不要使用函数“http_builder_query”，因为它会弄乱字符串并且谷歌无法“识别”它。例子 ：

http_builder_query 输出：**“代码=4%252FYYUT71KJ6...”**

相比

只是一个普通的字符串：**“code=4/YYUT71KJ6...”**

这是我的工作代码，我在需要您自己的数据的位置放置了“x”（从[google oauth authentication](https://stackoverflow.com/questions/9629540/google-oauth-authentication)获取和修改）

```
 $code_from_user_login = "4/YYUT71KJ6....";
    $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, "https://accounts.google.com/o/oauth2/token");
        curl_setopt($ch, CURLOPT_POST, TRUE);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

        $post_params = "code=" . $code_from_user_login . "&";
        $post_params .= "redirect_uri=http://www.x.com/&";
        $post_params .= "client_id=x.apps.googleusercontent.com&";
        $post_params .= "client_secret=x&";
        $post_params .= "grant_type=authorization_code&";

        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_params);
        $result = curl_exec($ch);
        print($result); 
```

结果将是：

```
 '{
  "access_token" : "ya29.AHES6ZSwJSHpTZ1t....",
  "token_type" : "Bearer",
  "expires_in" : 3599,
  "id_token" : "eyJhbGciOiJSUzI1NiIsImtpZCI6IjU0MDQxOTZlMmQzOGNjYTA2MW...."
}' 
```

获得“access_token”后，使用以下网址访问配置文件数据： [https ://www.googleapis.com/oauth2/v1/userinfo?access_token=YOUR_ACCESS_TOKEN_HERE](https://www.googleapis.com/oauth2/v1/userinfo?access_token=YOUR_ACCESS_TOKEN_HERE)

~结束~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T07:21:13.790

我在 CURL 方法和有效的 Google 代码中使用了 post 数组，它对我有用

# java - 在Java中获取ZIP文件中目录的内容

> ID：10932446
> 
> 赞同：0
> 
> 时间：2012-06-07T13:08:13.987
> 
> 标签：java, jar, zip

我的应用程序 jar 中有一些默认配置文件，如果它们不存在，我想将它们保存到文件系统中。我也希望它保持目录结构。例子：

```
Jar file
-configs/
    -main-config.cfg
    -another-file.txt
    -stuff/
        -another-file.cfg
-com/
-META-INF/ 
```

我希望将 configs/ 的内容镜像到文件系统，包括子文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:13:27.507

用于[`JarFile.entries`](http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarFile.html#entries%28%29)获取 Jar 文件中所有条目的枚举。

# html - 目录 HTML 链接

> ID：10932449
> 
> 赞同：1
> 
> 时间：2012-06-07T13:08:18.717
> 
> 标签：html

在[维基百科的目录中](http://en.wikipedia.org/wiki/Coca-cola#Formula_of_natural_flavorings)，只需在所需内容上放置一个井号标签并使用下划线删除空格，我们就可以跳转到同一页面中的不同内容。是否有一个 HTML 标签来做到这一点？还是我必须使用 Javascript？如果是这样，请给我 jQuery 中的语法，因为我更喜欢它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:09:46.963

URI 上的片段标识符链接到[具有匹配 id 的元素](http://www.w3.org/TR/html4/struct/links.html#h-12.2.3)。

```
<a href="#foo"> links to <div id="foo"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:11:15.363

通常你会链接到命名的锚点，像这样：

```
<a name="top"></a>

<a href="#top">go to top of page</a> 
```

但是你真的可以使用任何匹配的 ID。

# mysql - 编写 MySQL 查询

> ID：10932456
> 
> 赞同：0
> 
> 时间：2012-06-07T13:08:39.733
> 
> 标签：mysql

我有一个`Table1`结构如下：

```
Database  name    value
SYSTEM    SCOTT    2
SYSTEM    SCOTT    4
SYSTEM    SCOTT    5
ORCL      TEST     4
ORCL      TEST     5
ORCL      TEST     7 
```

另一个`Table2`结构如下：-

```
Database1 name1 value1 database2 name2 value2 
```

现在，我想要一个查询，它将插入来自`Table1`to的值`Table2`，这样`Table2`将如下所示：-

```
Database1    name1   value1   database2  name2   value2.
SYSTEM       SCOTT    2        ORCL       TEST    4
SYSTEM       SCOTT    4        ORCL       TEST    5
SYSTEM       SCOTT    5        ORCL       TEST    7 
```

我怎样才能实现这张桌子？我猜有些`GROUPBY`操作会给我结果，但我没有得到确切的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:20:47.833

您可以简单地使用插入和联合操作来做到这一点..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:14:57.023

如果查询的数量不重要，那可以通过两个 insert...select 查询来完成，[http://dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)。

# android - 在 ListView 下面添加一个 LinearLayout

> ID：10932462
> 
> 赞同：2
> 
> 时间：2012-06-07T13:08:50.963
> 
> 标签：android, listview

实际上它不是 ListView 而是 ExpandableListView 但这并不重要。通常我会这样做：

```
<ScrollView >

<LinearLayout>
    <ExpandableListView ... />
    <TextView ... />        
</LinearLayout>

</ScrollView> 
```

..但我已经读过在 ScrollView 中使用 ListView 很费力。我尝试通过修改 ExpandListAdapter (getChildView()) 来解决这个问题：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view, ViewGroup parent) {
        if(isLastChild){
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.extra_info_bottom, null);

        }
        else{
                 //get normal item view
        }
        return view;
} 
```

但这样我只能将孩子附加到组中。如何在任何组之外的底部附加 LinearLayout？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:24:39.200

只需添加以下代码即可在最后一个列表视图块中添加线性布局。

```
View footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
                itemlist.addFooterView(footerView); 
```

其中 listfooter 是 xml 文件，您可以在其中定义布局控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:27:31.057

有什么理由要让列表视图在滚动中吗？你的布局做这样的事情是没有意义的：

```
<LinearLayout>
    <ExpandableListView ... />
    <ScrollView >
      <LinearLayout>
         <TextView ... />   
      </LinearLayout>     
    </ScrollView>
</LinearLayout> 
```

使用此解决方案，您可以在 Expandable List 和 Scrollview 上使用权重来定义您想要为 List 使用多少屏幕以及为底部的线性布局使用多少。

如果您希望您的线性布局出现在列表的最底部，我建议您使用页脚而不是 getView 的东西。

无论如何，为了帮助您解决您遇到的确切问题，我需要查看您要膨胀的内容的 xml 定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:15:43.120

尝试找出导致此错误的对象并使用`myObject.getClass().getName()`. 所以你可以看到你真正膨胀的对象，也许可以解决问题。

# vb.net - 使用 xpath 和 linq 过滤 xml（带有小数分隔符和千位分隔符的西班牙文价格）VB。网

> ID：10932469
> 
> 赞同：1
> 
> 时间：2012-06-07T13:09:08.047
> 
> 标签：vb.net, linq, xpath

我正在尝试过滤 xml 文件的结果。我被要求过滤的字段之一是每个节点的属性价格。问题是 xml 来自西班牙来源，价格是小数点分隔符，而不是 . 和千位分隔符是，而不是。

我正在尝试过滤一个 xml 文件，其中仅出现价格低于提供的价格的节点。

xml结构为：

```
<RoomStays>
    <RoomStay InfoSource="" Price="201,60" Discount="0" MealPlan="Sólo alojamiento" MealPlanId="1" Provider="Marsol" ProviderId="3" HotelName="HOTEL LA ESTACION" Rating="" Latitud="" Longitud=""> 
    <RoomStay InfoSource="" Price="1.234,75" Discount="0" MealPlan="Sólo alojamiento" MealPlanId="1" Provider="Marsol" ProviderId="3" HotelName="HOTEL LA ESTACION" Rating="" Latitud="" Longitud=""> 
    ....More nodes
</RoomStays> 
```

我尝试使用 XPath 和 Linq2Xml 进行过滤。我已经得出结论，我必须将 , 替换为 。和 。，但我得到 0 个结果。

值低于 1000 时只有 ，我使用它：

```
doc.XPathSelectElements(./RoomStays/RoomStay[translate(@Price,',','.')<=256.78]) 
```

但是当价格超过 1000 时，使用千位分隔符。它不起作用，所以我尝试了：

```
doc.XPathSelectElements(./RoomStays/RoomStay[translate(translate(@Price,'.',''),',','.')<=256.78]) 
```

但它返回 0 结果（我尝试使用替换功能而不是翻译来删除 . 字符，但我得到一个异常）。

所以我被困住了，如果有人可以帮助我，即使有另一种方法（不一定是 XPath）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:35:39.877

**使用**：

```
translate(@Price, ',.', '.') 
```

这将删除 any`'.'`并将 any 替换`','`为`'.'`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
      "/RoomStays/RoomStay[not(translate(@Price, ',.', '.') > 256.78)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<RoomStays>
    <RoomStay InfoSource="" Price="201,60" Discount="0" MealPlan="Sólo alojamiento" MealPlanId="1" Provider="Marsol" ProviderId="3" HotelName="HOTEL LA ESTACION" Rating="" Latitud="" Longitud=""/>
    <RoomStay InfoSource="" Price="1.234,75" Discount="0" MealPlan="Sólo alojamiento" MealPlanId="1" Provider="Marsol" ProviderId="3" HotelName="HOTEL LA ESTACION" Rating="" Latitud="" Longitud=""/>
    ....More nodes
</RoomStays> 
```

**计算 XPath 表达式并将选定节点（在本例中只有一个）复制到输出**：

```
<RoomStay InfoSource="" Price="201,60" Discount="0" MealPlan="Sólo alojamiento" MealPlanId="1" Provider="Marsol" ProviderId="3" HotelName="HOTEL LA ESTACION" Rating="" Latitud="" Longitud="" /> 
```

# c++ - 如何在 Code::Blocks 中使用 wmain() 入口点？

> ID：10932473
> 
> 赞同：7
> 
> 时间：2012-06-07T13:09:25.920
> 
> 标签：c++, unicode, mingw, codeblocks, wmain

我全新安装了 Code::Blocks（我[为 Windows 7 安装了 GCC 编译器](http://www.codeblocks.org/downloads/binaries#windows)(codeblocks-10.05mingw-setup.exe)）。然后我尝试编译这个非常简单的代码：

```
int wmain(int argc, wchar_t* argv[])
{
    return 0;
} 
```

我收到此错误消息：

> c:\development\ide\codeblocks\mingw\bin..\lib\gcc\mingw32\4.4.1......\libmingw32.a(main.o):main.c|| 未定义对“WinMain@16”的引用| ||=== 构建完成：1 个错误，0 个警告 ===|

当我尝试使用`main()`条目运行代码时，它按预期运行，没有任何错误或警告。如何`wmain()`在我的代码中使用？我需要做哪些修改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T08:26:42.620

最新的解决方案是使用该`-municode`选项而不是 mingw-unicode-main 包装器。

有关详细信息，请参阅：

*   [wWinmain、Unicode 和 Mingw](https://stackoverflow.com/questions/3571250/wwinmain-unicode-and-mingw/11706847#11706847)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T07:47:40.097

Mingw 不完全支持 unicode。如果您想尝试一下，可以使用包装器。[https://github.com/coderforlife/mingw-unicode-main](https://github.com/coderforlife/mingw-unicode-main)

# c++ - 在 GCC 中，如何使“-fpermissive”警告静音？

> ID：10932479
> 
> 赞同：27
> 
> 时间：2012-06-07T13:09:44.000
> 
> 标签：c++, gcc, warnings, pragma

我包含来自第三方库的文件，该文件引发错误，可以降级为带有`-fpermissive`. 但是因为我不想用这些警告“污染”我的编译日志，所以我想完全禁用这些消息。

到目前为止，我在包含文件时使用[诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas)`-fpermissive`设置了该选项；就像是：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic warning "-fpermissive"

#include <third-party-file.h>

#pragma GCC diagnostic pop 
```

由于 GCC 通常同时提供标志的“正”和“负”版本`-f`，我考虑忽略“不允许”功能：

```
#pragma GCC diagnostic ignored "-fno-permissive"
#include <third-party-file.h> 
```

但似乎没有`-fpermissive`标志的“负面”版本（我使用的是 GCC 4.6.3；但即使是 4.7.0 版本[也没有](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/C_002b_002b-Dialect-Options.html#C_002b_002b-Dialect-Options)）。

我可以模仿这种行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-07-20T16:38:16.820

tldr：您无法在 GCC 4.7 之后关闭 fpermissive 输出。

* * *

只是在此处发布此内容以提高知名度：不幸的是，[zwol 的回答](https://stackoverflow.com/questions/10932479/in-gcc-how-can-i-mute-the-fpermissive-warning/16555972#16555972)（虽然是善意的，并且可能对那些使用旧 GCC 版本的人有所帮助）不适用于更新版本的 GCC。从 GCC 4.8 及更高版本开始，您无法关闭 fpermissive 输出。[o11c 在他](https://stackoverflow.com/questions/10932479/in-gcc-how-to-mute-the-fpermissive-warning#comment78167294_10932479)对 OP 的评论中提供了以下跟踪此错误的错误：

*[错误 81787。[5/6/7/8 回归]#pragma GCC 诊断警告“-fpermissive”不再](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81787)*

Note that it is in the state "RESOLVED INVALID", so the inability to turn it off is the expected behavior and there are no plans to change it.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-15T02:48:09.040

其中之一应该做你想做的事：

```
#pragma GCC diagnostic ignored "-fpermissive" 
```

或者

```
#pragma GCC diagnostic ignored "-pedantic" 
```

由于历史原因，“忽略”是您完全压制诊断的方式，与`-fpermissive`is相反。`-pedantic`

# iphone - 不使用 UIScrollView 滚动屏幕

> ID：10932481
> 
> 赞同：2
> 
> 时间：2012-06-07T13:09:48.540
> 
> 标签：iphone, ios, xcode, uiscrollview, scroll

我见过允许用户在比屏幕本身更大的视图上滚动的 iOS 应用程序，而似乎没有实现 UIScrollView 机制。例如，屏幕上实际显示的图像是屏幕宽度的两倍，用户可以左右平移查看所有内容。这仅仅是使 ViewController 的宽度是屏幕宽度的两倍并允许通过手势识别器进行某种平移的情况吗？通过我正在尝试做的事情，似乎实现 UIScrollView 会更容易......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:11:27.393

您可以使用`UIPangestureRecognizer`或`UIscrollview`。后者选项非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:17:49.237

实现滚动视图比处理平移手势要容易得多，当苹果提供内置功能时，为什么你不想使用它？

# eclipse - 运行 play2 和 eclipse 时可以避免两次编译源代码吗？

> ID：10932482
> 
> 赞同：12
> 
> 时间：2012-06-07T13:09:53.600
> 
> 标签：eclipse, scala, sbt, playframework-2.0

目前我正在同时运行 eclipse 和播放（使用 ~run）。当我更改文件时，它将由 play 和 eclipse 编译。

是否可以避免这两个编译步骤之一？

据我所知，eclipse插件也使用sbt来构建项目，所以也许有办法在eclipse中执行play“run”命令？

（我问是因为我的笔记本电脑不是很快，编译需要一些时间，我希望播放网页上宣传的“快速周转”；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T13:35:36.077

`Build Automatically`您可以从菜单中关闭，`Project`而不会丢失任何 IDE 功能。二进制文件只能由 Sbt 构建（在命令行上）。

可以在 Scala IDE 网站上找到使用 Scala IDE 设置 Play 2 的详细指南：http: [//scala-ide.org/docs/tutorials/play20scalaide20/index.html](http://scala-ide.org/docs/tutorials/play20scalaide20/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:01:23.333

我还没有尝试在 Eclipse 中运行 play run sbt 任务。

但是您可以直接从 eclipse 运行服务器。

1.  将“target/scala-2.9.1/classes”添加到您的类路径中，使用过滤器仅包含您的资产。（项目属性，Java 构建路径）
2.  从运行按钮菜单中选择“运行配置...”。
3.  使用您喜欢的名称创建一个新的“Java 应用程序”配置。
4.  主选项卡：使用“DebugStart”作为主类
5.  参数选项卡：配置 VM 参数中可能需要的任何“-Dconfig.file=...”“-Dlogger.file”选项
6.  类路径选项卡：将 conf 目录添加到类路径（高级/添加文件夹）

使用以下命令创建 DebugStart.scala：

```
import play.core.server.NettyServer
import java.io.File
import play.core.SBTLink
import play.core.TestApplication
import play.api.test.FakeApplication
import play.api.test.TestServer

object DebugStart {
  def main(args: Array[String]) {
    val app = FakeApplication()
    val server = TestServer(9000, app)
    server.start()
  }
} 
```

您现在可以使用 run 或 debug 启动应用程序。如果您使用调试，您可以执行一些代码更改而无需重新启动。

我的 DebugStart.scala 版本实际上包含一些依赖于平台的 hackish 代码来杀死任何正在运行的进程，这样我就可以按 F11 或 CTRL+F11 来重新启动应用程序。

为确保您的资产/来源是最新的，请运行：

```
> sbt
...
[your project] $  ~ ;play-copy-assets;sources 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:24:57.720

IntelliJ Idea 12 (Leda) 即将推出。我使用 11 有一段时间了，没有这样的问题，但新版本将提供更好的 Play 2.0 集成。

# windows-phone-7 - WP7 DateTimeFormat null 在日期上创建 IndexOutOfRangeException

> ID：10932483
> 
> 赞同：1
> 
> 时间：2012-06-07T13:09:56.657
> 
> 标签：windows-phone-7, datetime, currentculture

我已经发布了一个类似的问题，但在这里我有一个稍微不同的问题。WP7.1 应用中的情况：

CultureInfo = new CultureInfo("es");

如果文化信息设置为 es（es-ES 工作正常，但不能解决硬编码），则当前文化的 DateTimeFormat （Thread.CurrentThread.CurrentCulture.DateTimeFormat）为空（抛出 IndexOutOfRangeException）导致简单的 DateTime.ToString( ) 以同样的异常失败。

我需要让它工作。我可能从上面假设了一些错误，我希望我这样做。有人可以帮我让它工作，还是指点我一些 msdn 解释它不起作用？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:49:43.207

我不相信 WP7.1 只支持文化代码的“es”。请参阅此链接：http: [//msdn.microsoft.com/en-us/library/hh202918%28v=VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh202918%28v=VS.92%29.aspx)

# gnu-screen - GNU屏幕：如何一次清除回滚和屏幕

> ID：10932487
> 
> 赞同：1
> 
> 时间：2012-06-07T13:09:59.513
> 
> 标签：gnu-screen

我正在寻找一种在 GNU 屏幕中同时清除回滚和可见屏幕的方法。目前我使用两个单独的绑定：

*   Ca，C（这是清除可见文本的默认值）
*   `bind _ eval "scrollback 0" "scrollback 15000"`（清除回滚）

有人可以指出我如何同时做到这两点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:09:59.887

原来你可以这样做：

```
 bind _ eval "clear" "scrollback 0" "scrollback 15000" 
```

请注意，顺序似乎很重要：如果最后有“清除”，它似乎并不每次都有效（它总是清除屏幕，但并不总是回滚）。

# xslt - 使用 XSLT foreach 循环比较 xml 中的值并确定它们是否相同

> ID：10932489
> 
> 赞同：2
> 
> 时间：2012-06-07T13:10:09.100
> 
> 标签：xslt, foreach, compare

我有以下xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<abc1 formName="Form">
    <Level1>
        <Element1>ZZZ</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Pears</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Milkshakes</SubElement5>
        </Element2>
    </Level1>
    <Level1>
        <Element1>XXX</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Kiwifruit</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Soda</SubElement5>
        </Element2>
    </Level1>
</abc1> 
```

我需要做的是查看某些节点中的值，确定它们是否不同，如果不同，则编写一些不同的 html 代码，每个部分之间有一个分页符。

所以，我需要比较这些`<Element1>`值，看看它们是否不同。这些`<Element1>`值可以是任何文本，并且`<Element1>`xml 中的标签数量可以是无限的。

所以在这种情况下，我们有两个不同`<Element1>`的值：“ZZZ”和“XXX”。

因此，如果有两个“”，则如下所示：

```
<xsl:choose>
<xsl:when test="differentvalues = 'true'">
<!--  SomeHTMLCode!-->
<p style="page-break-after: always"/>
<!--  SomeHTMLCode!-->
</xsl:when>
<xsl:otherwise><!--  SomeHTMLCode!--></xsl:otherwise>
</xsl:choose> 
```

但是使用for循环搜索xml，以及类似的东西

```
<xsl:choose>
<xsl:when test="differentvalues = 'true'">
<!--  SomeHTMLCode!-->
<p style="page-break-after: always"/>
<!--  SomeHTMLCode!-->
<p style="page-break-after: always"/>
<!--  SomeHTMLCode!-->
</xsl:when>
<xsl:otherwise><!--  SomeHTMLCode!--></xsl:otherwise>
</xsl:choose> 
```

如果存在三个不同的`</Element1>`值。

我什至不确定这是否可以做到。提前感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:19:44.347

**这个 XPath 表达式为您提供了不同值的所需计数`Element1`（假设 an`Element1`也不能有后代`Element1`**（有更有效的方法来使用键处理此类问题，但我不会谈论新手的键）：

```
count(//Element1[not(. = preceding::Element1)]) 
```

您可以在其属性中定义一个指定上述值的`select`变量，然后在`test`条件指令的属性中使用此变量。

更好的是，根本不使用条件指令并将上述 XPath 表达式指定为模板匹配模式的一部分：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*[count(//Element1[not(. = preceding::Element1)]) = 2]">
     Two processing
 </xsl:template>

 <xsl:template match="/*[count(//Element1[not(. = preceding::Element1)]) = 3]">
     Three processing
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<abc1 formName="Form">
    <Level1>
        <Element1>ZZZ</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Pears</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Milkshakes</SubElement5>
        </Element2>
    </Level1>
    <Level1>
        <Element1>XXX</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Kiwifruit</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Soda</SubElement5>
        </Element2>
    </Level1>
</abc1> 
```

**产生了想要的正确结果**：

```
 Two processing 
```

**当对以下 XML 文档应用相同的转换时**：

```
<abc1 formName="Form">
    <Level1>
        <Element1>ZZZ</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Pears</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Milkshakes</SubElement5>
        </Element2>
    </Level1>
    <Level1>
        <Element1>YYY</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Pears</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Milkshakes</SubElement5>
        </Element2>
    </Level1>
    <Level1>
        <Element1>XXX</Element1>
        <Element2>
            <SubElement1>Apples</SubElement1>
            <SubElement2>Oranges</SubElement2>
            <SubElement3>Kiwifruit</SubElement3>
            <SubElement4>Blueberries</SubElement4>
            <SubElement5>Soda</SubElement5>
        </Element2>
    </Level1>
</abc1> 
```

**再次产生正确的结果**：

```
 Three processing 
```

**注意**：

当然，您需要将模板的主体替换为您想要的处理。

# java - 使用java（zehon）通过FTPS协议传输文件时密钥库格式无效

> ID：10932491
> 
> 赞同：0
> 
> 时间：2012-06-07T13:10:10.147
> 
> 标签：java, ssl-certificate, ftps

我是 ftps 新手。我正在使用 zehon 库使用 FTPS 协议传输文件。我有一个经过验证的证书。这是我的代码片段：

```
FTPsClient ftpClient = new FTPsClient(host, port,username ,password ,false,keyStorePath,keyStorePass); // should it be true or false?? i.e. the isImplicit method 
int status = ftpClient.sendFile(filename, ftpsFolder); 
```

我已经验证了用户名 pwd 、 host 和其他详细信息。我唯一不确定的是作为证书文件的密钥库文件。我已经提到密钥库路径为 C:\keystorefile.crt。运行此程序时，我收到无效的密钥库格式。那么我的证书应该是什么格式呢？zehon有具体的要求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:54:26.080

我提供了一个证书文件，而该程序需要一个**密钥库**及其密码。创建一个密钥库并提供它的路径解决了这个问题。这是有关如何创建证书并将其放入密钥库的链接：

```
http://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html 
```

# javascript - 如何使用 javascript 结合地理位置和多个标记？

> ID：10932496
> 
> 赞同：6
> 
> 时间：2012-06-07T13:10:36.970
> 
> 标签：javascript, google-maps, geolocation

我正在尝试创建一个能够跟踪我的位置并同时能够显示多个标记的地图。我可以结合下面的 2 个 JavaScript 吗？如果不知道我应该怎么做？

**用于多个标记的 JavaScript**

```
<script type="text/javascript">
  var locations = [
  ['Hougang', 1.37265, 103.893658],
  ['Punggol', 1.400617, 103.907833],
  ['MacRitchie Reservoir', 1.346002, 103.825436],
  ['Bishan', 1.352051, 103.849125],
  ['Sentosa', 1.251226, 103.830757]
];

  var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 15,
      center: new google.maps.LatLng(1.37265, 103.893658),
      mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var infowindow = new google.maps.InfoWindow();

  var marker, i;

  for (i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map
      });

      google.maps.event.addListener(marker, 'click', (function (marker, i) {
          return function () {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
          }
      })(marker, i));
  } 
```

**当前位置的 JavaScript**

```
navigator.geolocation.getCurrentPosition(function(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:30:16.097

是的，可以将两者结合起来。当您初始化地图并绘制后港...位置后，您可以添加地理位置代码。我写了一个演示，它将为地理位置显示一个较小的绿色图标。如果浏览器不支持地理编码，则不会出现任何错误，也不会显示任何错误。

演示[http://jsfiddle.net/yV6xv/7/](http://jsfiddle.net/yV6xv/7/)

请记住，如果代码是从硬盘驱动器本地加载的，则地理位置不起作用（至少对我而言）。必须公开送达。

```
// Check if user support geo-location
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var geolocpoint = new google.maps.LatLng(latitude, longitude);

        var mapOptions = {
            zoom: 8,
            center: geolocpoint,
            mapTypeId: google.maps.MapTypeId.HYBRID
        }
        // Place a marker
        var geolocation = new google.maps.Marker({
            position: geolocpoint,
            map: map,
            title: 'Your geolocation',
            icon: 'http://labs.google.com/ridefinder/images/mm_20_green.png'
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-28T13:29:30.337

下面是一个工作示例，它正在我的项目中使用

```
function AddInfoWidnow(marker,message)
{
     var infowindow = new google.maps.InfoWindow({ content: message });

     google.maps.event.addListener(marker, 'click', function() {

     infowindow.open(marker.get('map'), marker);

    }); 

}

function ShowOnMap(ContainerId, mapItems) {

var DefaultLatLng= new google.maps.LatLng('12.967461', '79.941824');

var mapOptions = {
    center: DefaultLatLng,
    zoom: 10,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    marker: true
};

var mapCust = new google.maps.Map(document.getElementById(ContainerId), mapOptions);

var arrJsonObject = JSON.parse(mapItems);

for (var y = 1; y <= arrJsonObject.length; y++) 
{

    var myLatLng1 = new google.maps.LatLng(arrJsonObject[y - 1].Latitude, arrJsonObject[y - 1].Lonngitude);

    var marker = new google.maps.Marker({
    position: myLatLng1,
    map: mapCust,
    title: 'Marked at '+ arrJsonObject[y - 1].markedDate
});

    addInfoWindows(marker,y-1,arrJsonObject);

    marker.setMap(mapCust);

}
} 
```

使用下面的 Json 字符串来调用它。

```
 var mapItems='[
  {
    "Latitude": "22.575897",
    "Lonngitude": "88.431754",
    "CustomerCode": "*$$$*",
    "CustomerName": "*@@@*",
    "markedDate": "2/20/2014 12:04:41 PM"
  },
  {
    "Latitude": "22.615067",
    "Lonngitude": "88.431759",
    "CustomerCode": "*$$$*",
    "CustomerName": "*@@@*",
    "markedDate": "2/20/2014 3:02:19 PM"
  }
]';
    ShowOnMap(containerId2, mapItems); 
```

# cuda - #blocks, #threads

> ID：10932497
> 
> 赞同：0
> 
> 时间：2012-06-07T13:10:42.640
> 
> 标签：cuda, gpu, nvidia

我正在查看有问题的代码：[如何为 CUDA 内核选择网格和块尺寸？](https://stackoverflow.com/questions/9985912/cuda-grid-block-thread-size) 这是来自以下问题的后续问题：[CUDA 如何获取网格、块、线程大小和并行化非方阵计算](https://stackoverflow.com/questions/5643178/cuda-how-to-get-grid-block-thread-size-and-parallalize-non-square-matrix-calcu/5643838#5643838)

```
const int n = 128 * 1024;
int blocksize = 512; // value usually chosen by tuning and hardware constraints
int nblocks = n / nthreads; // value determine by block size and total work
madd<<<nblocks,blocksize>>>mAdd(A,B,C,n); 
```

块大小和nthreads有什么区别？我想他们是同一个。这只是一个错字还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:22:28.973

块的数量将是实例的数量除以每个块的大小。但是，这可能会导致非整数答案。因此，您必须确保进行四舍五入，以便以浪费一些资源为代价来执行每个实例。

所以你真正想做的是应用这个小整数算术技巧：

```
int nblocks = (n+blocksize-1)/blocksize; 
```

# jquery - 在 jquery 函数中返回未定义的值

> ID：10932503
> 
> 赞同：0
> 
> 时间：2012-06-07T13:11:01.947
> 
> 标签：jquery, jquery-mobile

我使用此代码来计算两个 gps 位置之间的距离。问题是当我返回计算值时，它返回未定义的值。请帮我

```
function calcDistane(offerID,userLocation){
    var dist;
    var adapter = new LocationAdapter();

    adapter.selectByOfferId(offerID,function(res){                       

    navigator.geolocation.getCurrentPosition(function(position){

        var R = 6371;
        var userLocation= position.coords;

        dist= Math.acos(Math.sin(userLocation.latitude)*Math.sin(res.item(0).lt) + 
              Math.cos(userLocation.latitude)*Math.cos(res.item(0).lt) *
              Math.cos(userLocation.longitude-res.item(0).lg)) * R;
        });

    });  
    return dist;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:14:40.933

`dist`你回来的时候还没有设置。设置 dist 的函数是一个回调。从外部（回调）函数返回后很可能会调用它。

可能的执行顺序是

1.  适配器.selectByOfferId
2.  返回 dist (未定义)
3.  调用用作adapter.selectByOfferId回调的匿名函数
4.  调用 navigator.geolocation.getCurrentPosition 并从步骤 3 的回调中返回
5.  当 navigator.geolocation.getCurrentPosition 返回时，调用该调用的回调并设置 dist。在第 2 步之后

您将需要传递延续而不是返回

```
function calcDistane(offerID,userLocation,callback){
  var adapter = new LocationAdapter();

  adapter.selectByOfferId(offerID,function(res){                       

        navigator.geolocation.getCurrentPosition(function(position){

               var R = 6371;
               var userLocation= position.coords;

               callback(Math.acos(Math.sin(userLocation.latitude)*Math.sin(res.item(0).lt) + 
                        Math.cos(userLocation.latitude)*Math.cos(res.item(0).lt) *
                        Math.cos(userLocation.longitude-res.item(0).lg)) * R);

       });

  });
} 
```

# php - 防止 Facemash 通过 url 作弊

> ID：10932504
> 
> 赞同：0
> 
> 时间：2012-06-07T13:11:03.367
> 
> 标签：php, url

我一直在使用类似 Facemash 的脚本。但问题是，当我们将光标指向每张图片的图片时，当我们对人们进行评分时，会有一个如下 URL：

```
rate.php?winner=XXX&loser=XXXX1 
```

所以，如果我们直接在地址栏中输入这个技巧就可以了！因此，用户有机会破解他们的分数。我知道我们可以将 GET 方法更改为 POST 方法。我已经搜索过这个，没有什么能真正帮助我。文件（rate.php 和 index.php）的链接也包含在这个问题的评论中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:55:33.200

我正在制作自己的类似 Facemash 的引擎，这就是我所做的。

我`id`在 PHP 中存储了两个挑战者`$_SESSION`。在显示新对之前，我检查是否`$_SESSION`已设置，如果是，我只显示它们而不是从数据库中获取新对。这可以通过刷新页面来防止作弊，直到您获得照片。我这样做是因为我正在为其制作 facemash 的社区相对较小。

所以链接看起来像`vote.php?v=left`or `right`。在`vote.php`I get `id`s from a `$_SESSION['right']`and`$_SESSION['left']`然后取消设置它们。我期待有一天能发布我的剧本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:25:31.553

是的，如果您从 GET 更改为 POST，那么参数将不会在提交时显示在 URL 中。

[http://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:45:36.823

与其依赖 GET/POST 来确定比较，不如将数据存储在其中`$_SESSION`，只让用户选择“image1”或“image2”，然后在做出选择后无效并创建新的比较。

[示例站点 - 表单仅允许您选择 1 或 2](http://robus.info/facemash/)

# php - 这个散列函数是否矫枉过正

> ID：10932509
> 
> 赞同：0
> 
> 时间：2012-06-07T13:11:17.987
> 
> 标签：php, hash, passwords, password-protection, sha

我最近开始研究一个项目，它包含以下散列密码的函数：

```
function hash_password($password) {
    $account_id = $this->account_id;

    /*
     * Cook up some randomness
     */
    $password = str_rot13($password);

    $random_chars = "1%#)(d%6^".md5($password)."&H1%#)(d%6^&HB(D{}*&$#@$@FEFWB".md5($password)."``~~+_+_O(Ed##fvdfgRG:B>";

    $salt = $account_id;
    $salt = ((int)$salt * 123456789) * 1000;

    $salt_len     = strlen($salt);

    for($i=0; $i <= $salt_len; $i++) {
        $salt .= $random_chars[$i];            
    }

    $salt = str_repeat($salt, 3);

    return hash('sha256', base64_encode($password.$salt.$password), false);
} 
```

*$account_id 对于每个用户帐户都是唯一的。

我的问题是：这个功能是否比做一些简单的事情更安全：

```
$salt = sha1($account_id);
$hash = hash('sha256', base64_encode($password.$salt), false); 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:20:02.663

使用帐户 ID 作为盐可能不是一个好主意 - 如果有人可以窃取您的散列密码，那么他们可能也可以获得帐户 ID。因此，在这种情况下，如果代码也受到很好的保护，那么在代码中使用更复杂的哈希可能会更安全。使用已知的随机字符串作为代码中的盐意味着有人必须同时破解您的数据和代码才能攻击密码——这比仅仅攻击数据库要好。

# javascript - 使用选择的名称标签获取标签的值

> ID：10932513
> 
> 赞同：1
> 
> 时间：2012-06-07T13:11:33.297
> 
> 标签：javascript, jquery, forms, validation

我有一个可以输出 0 个或多个选择框的系统，我需要添加一些 Javascript/JQuery 验证。我是编写 JQuery 的新手，我一直在获取错误消息的文本标签内容：这是我的选择框表单的示例：

```
<div id="prodOptions" class="sale">
   <p class="elevenText floatLeft">Product options</p>
    <div class="floatLeft"><label for="colour">Select Colour</label>
    <select name="colour">
        <option value="" selected="selected">---</option>
        <option value="blue">Blue</option>
    </select>
</div>
<div class="floatLeft">
    <label for="size">Select Size</label>
    <select name="size">
        <option value="" selected="selected">---</option>
        <option value="small">Small</option>
    </select>
</div>
<div class="floatLeft">
    <label for="flavour">Select Flavour</label>
    <select name="flavour">
        <option value="" selected="selected">---</option>
        <option value="cherry">Cherry</option>
    </select>
</div> 
```

这是我在提交表单时调用的javascript函数（警报用于测试）：

```
function validateOptions()
{

    selectList = $('select').get();
    message = "";

    for(i=0; i<selectList.length; ++i)
    {

            //alert(selectList[i].name);
            selector = "for[=\""+selectList[i].name+"\"]";
            alert(selector);
            alert($(selector.value));
            message += ($(selectList[i]).prop('selected', true).val() == "") ? "Please enter a value for \r\n" : "";

    }

    alert(message); 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:13:53.607

您的属性语法不正确。你的选择器应该是

```
var selector = "label[for='" + selectList[i].name + "']"; 
```

从那里，您应该获取标签的`.html()`，而不是`.val()`

此外，标签应该引用元素 ID，而不是名称。您希望如何格式化您的消息也不是很清楚。你应该能够做这样的事情：

```
function validateOptions()
{

    var message = '';

    $('select').each(function() {
       if($(this).val() == '') {
          var label = $('label[for="' + $(this).attr('id') + '"]');
          message += 'Please select a value for: ' + label.html() + '\n';
       }
    });

    alert(message);
} 
```

您还可以像这样格式化错误消息：

```
function validateOptions()
{
    var emptyFields = [];
    $('select').each(function() {
       if($(this).val() == '') {
          var label = $('label[for="' + $(this).attr('id') + '"]');
          emptyFields.push(label.html());
       }
    });

    if(emptyFields.length > 0) {
       alert('Please select a value for:\n' + emptyFields.join('\n'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:25:01.883

```
 function validateOptions() {
                message = "";

                $('select').each(function (i) {
                    message += ($(this).prop('selected', true).val() == "") ? "Please enter a value for" + $(this).prev().html() + " \r\n" : "";
                });

                alert(message);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:05:25.403

```
$(document).ready(function(){ var allSelect = $('select');

 $.each(allSelect,function(k,v){

    var thIs = $(this);
    var name = thIs.attr('name');

    if(name == 'colour')
    {
       // Do what you want to do with colour select here eg:-
       alert(thIs.prev('label').text());
       } else if(name == 'size'){
       alert(thIs.prev('label').text());
       } else if(name == 'flavour'){
       alert(thIs.prev('label').text());
       }
   return false;

});

}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-07T13:41:00.107

```
$(document).ready(function(){
  var allSelect = $('select');

     $.each(allSelect,function(k,v){

        var thIs = $(this);
    var name = thIs.attr('name');

        if(name == 'colour')
        {
      // Do what you want to do with colour select here eg:-
    thIs.prepend('<option value="1">White</option>
                 <option value="2">Black</option>
                 <option value="3">Gray</option>');
    } else if(name == 'size'){
      // Do what you want to do with size select here
    } else if(name == 'flavour'){
      // Do what you want to do with flavour select here
    }
       return false;
   });

}); 
```

# visual-studio-2010 - 使用 InstallShield Limited Edition 打开 .ISM

> ID：10932520
> 
> 赞同：0
> 
> 时间：2012-06-07T13:11:51.940
> 
> 标签：visual-studio-2010, installshield-2010

环境：TFS 2010 + VisualStudio 2010 + InstallShield 限量版。

我很抱歉成为 InstallShield 的新手。

我有一个带有 .ISM 扩展名的 InstallShield 项目。是否可以在 InstallShield Limited Edition 中加载它。我试过了，但它无法识别 .ISM 扩展名。

我尝试使用 InstallShield Limited Edition 创建新的 InstallShield 项目。它生成 .ISL 和 .ISPROJ 扩展名而不是 .ISM。

*   什么是 .ISM（如果 InstallShield 正在创建 .ISL 和 .ISPROJ 项目文件）？

*   如何使用
    InstallShield Limited Edition（如果可能）在 .ISM InstallShield setup (project) 上工作？

我的最低要求是查看现有设置，即使未启用构建和生成 MSI。

感谢和问候 Sumeet Nandan Garg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:51:14.920

InstallShield 限量版无法导入、打开或构建在 InstallShield 付费版中创建的项目。为了更好地了解该项目中的内容，您可以尝试评估 InstallShield 的专业版或高级版。如果您发现您需要超出限量版功能集的任何内容，您可能需要购买专业版或高级版。

# regex - 正则表达式检查数字长度

> ID：10932535
> 
> 赞同：3
> 
> 时间：2012-06-07T13:12:31.923
> 
> 标签：regex

我想验证 5 位或 9 位的邮政编码。我已经写了这个 `/^(\d){5|9}$/`，但它不匹配任何东西。

但是当我`/^(\d){5}$/`为 5 正确匹配它时。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:14:05.150

以下正则表达式应该可以工作。

```
^(\d{5}|\d{9})$ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T13:14:20.887

使最后四个可选：

```
^\d{5}(\d{4})?$ 
```

请注意，我删除了开/关斜杠，因为它们与正则表达式无关；它们是应用程序语言的产物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:12:09.077

### 匹配 USPS ZIP+4

如果您处理的是 US Postal Service 的 ZIP+4 格式，则此正则表达式可能会提供更准确的匹配：

```
egrep -o '\b[[:digit:]]{5}-?[[:digit:]]{4}?\b' 
```

### 语料库

这个正则表达式针对有限的语料库进行了测试。你的旅费可能会改变。

```
cat << EOF | egrep -o '\b[[:digit:]]{5}-?[[:digit:]]{4}?\b'
    12345
    123456789
    12345-6789
EOF 
```

# php - PHP函数回显文本

> ID：10932543
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:13:09.047
> 
> 标签：php

这只是一个例子，但我可以解决这个问题吗？

```
function echoText($text){
    echo $text;
}

$text2 = echoText("Text");
echo "<h1>$text2</h1><br><h2>$text</h2><h3>$text</h3>"; 
```

但结果不是`<h1>`，`<h2>`或者`<h3>`，它只是简单的文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:15:17.270

Your function is not *returning* the value, but *echoing* it out.

Try

```
function echoText($text){
    return $text;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:15:03.073

如果我了解您要正确实现的目标，则需要：

```
function echoText($text) 
{
    return '<h1>'. $text .'</h1>';
} 
```

然后你可以使用它：

```
$text2 = echoText('test');
echo $text2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:16:14.587

I think you mean this:

```
<?php
function echoText($text){
    echo $text;
}
$text2 = echoText("Text");
echo "<h1>".$text2."</h1><br><h2>".$text."</h2><h3>".$text."</h3>";

?> 
```

You also need a return in your function.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:15:39.550

`$text2` contains nothing (well, `null` technically), because `echoText()` returns nothing.
`return` a value from `echoText()` or otherwise assign a value to `$text2`.

# x86 - 在 Intel 上使用 SSE2 减少无符号字节的总和而不溢出

> ID：10932550
> 
> 赞同：14
> 
> 时间：2012-06-07T13:13:37.313
> 
> 标签：x86, sse, simd, sse2, sse3

我试图在 Intel i3 处理器上找到 32 个元素（每个 1 字节数据）的总和减少。我这样做了：

```
s=0; 
for (i=0; i<32; i++)
{
    s = s + a[i];
} 
```

但是，它需要更多时间，因为我的应用程序是一个需要更少时间的实时应用程序。**请注意，最终总和可能超过 255。**

有没有一种方法可以使用低级 SIMD SSE2 指令来实现？不幸的是，我从未使用过 SSE。为此，我尝试搜索 sse2 函数，但它也不可用。（sse）是否保证减少这种小型问题的计算时间？

有什么建议么？？

注意：我已经使用 OpenCL 和 CUDA 实现了类似的算法，并且效果很好，但仅在问题规模很大时才有效。对于小型问题，开销成本更高。不确定它如何在 SSE 上运行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T14:11:28.227

您可以滥用`PSADBW`快速计算小的水平总和。

像这样的东西：（未测试）

```
pxor xmm0, xmm0
psadbw xmm0, [a + 0]
pxor xmm1, xmm1
psadbw xmm1, [a + 16]
paddw xmm0, xmm1
pshufd xmm1, xmm0, 2
paddw xmm0, xmm1 ; low word in xmm0 is the total sum 
```

* * *

尝试的内在函数版本：

我从不使用内在函数，所以这段代码可能毫无意义。拆卸看起来还不错。

```
uint16_t sum_32(const uint8_t a[32])
{
    __m128i zero = _mm_xor_si128(zero, zero);
    __m128i sum0 = _mm_sad_epu8(
                        zero,
                        _mm_load_si128(reinterpret_cast<const __m128i*>(a)));
    __m128i sum1 = _mm_sad_epu8(
                        zero,
                        _mm_load_si128(reinterpret_cast<const __m128i*>(&a[16])));
    __m128i sum2 = _mm_add_epi16(sum0, sum1);
    __m128i totalsum = _mm_add_epi16(sum2, _mm_shuffle_epi32(sum2, 2));
    return totalsum.m128i_u16[0];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T15:20:44.010

This is a bit long-winded but it should still be at least 2x faster than the scalar code:

```
uint16_t sum_32(const uint8_t a[32])
{
    const __m128i vk0 = _mm_set1_epi8(0);   // constant vector of all 0s for use with _mm_unpacklo_epi8/_mm_unpackhi_epi8
    __m128i v = _mm_load_si128(a);          // load first vector of 8 bit values
    __m128i vl = _mm_unpacklo_epi8(v, vk0); // unpack to two vectors of 16 bit values
    __m128i vh = _mm_unpackhi_epi8(v, vk0);
    __m128i vsum = _mm_add_epi16(vl, vh);
    v = _mm_load_si128(&a[16]);             // load second vector of 8 bit values
    vl = _mm_unpacklo_epi8(v, vk0);         // unpack to two vectors of 16 bit values
    vh = _mm_unpackhi_epi8(v, vk0);
    vsum = _mm_add_epi16(vsum, vl);
    vsum = _mm_add_epi16(vsum, vh);
    // horizontal sum
    vsum = _mm_add_epi16(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi16(vsum, _mm_srli_si128(vsum, 4));
    vsum = _mm_add_epi16(vsum, _mm_srli_si128(vsum, 2));
    return _mm_extract_epi16(vsum, 0);
} 
```

Note that `a[]` needs to be 16 byte aligned.

You can probably improve on the above code using `_mm_hadd_epi16`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T05:59:19.500

还有另一种方法可以使用 SSE 指令找到数组中所有元素的总和。该代码使用以下 SSE 构造。

*   __m256 寄存器
*   _mm256_store_ps(浮点 *a, __m256 b)
*   _mm256_add_ps(__m256 a, __m256 b)

该代码适用于任何大小的浮点数组。

```
float sse_array_sum(float *a, int size)
{
    /*
     *   sum += a[i] (for all i in domain)
     */

    float *sse_sum, sum=0;
    if(size >= 8)
    {
        // sse_sum[8]
        posix_memalign((void **)&sse_sum, 32, 8*sizeof(float));

        __m256 temp_sum;
        __m256* ptr_a = (__m256*)a;
        int itrs = size/8-1;

        // sse_sum[0:7] = a[0:7]
        temp_sum = *ptr_a;
        a += 8;
        ptr_a++;

        for(int i=0; i<itrs; i++, ptr_a++, a+=8)
            temp_sum = _mm256_add_ps(temp_sum, *ptr_a);

        _mm256_store_ps(sse_sum, temp_sum);
        for(int i=0; i<8; i++)  sum += sse_sum[i];
    }

    // if size is not divisible by 8
    int rmd_itrs = size%8;
    // Note: a is pointing to remainder elements
    for(int i=0; i<rmd_itrs; i++)   sum += a[i];

    return sum;
}

float seq_array_sum(float *a, int size)
{
    /*
     *  sum += a[i] (for all i)
     */

    float sum = 0;
    for(int i=0; i<size; i++)   sum += a[i];
    return sum;
} 
```

**基准：**

对于域中的所有 i，大小 = 64000000
a[i] = 3141592.65358

顺序版本时间：194ms
SSE 版本时间 ：49ms

**机器规格：**

每个内核的线程数：
每个插槽2 个内核：2 个
插槽：1
CPU MHz：1700.072
操作系统：Ubuntu

# ruby-on-rails - Ruby 实例变量与 ActiveRecord 属性

> ID：10932553
> 
> 赞同：5
> 
> 时间：2012-06-07T13:13:43.540
> 
> 标签：ruby-on-rails, ruby, activerecord

我读过 ruby​​ 对象只是我们可以存储实例变量（和类指针）的地方。所以：

```
class Person
  def initialize(age)
    @age = age
  end
end 
```

现在如果我们运行：

```
p = Person.new(101) 
```

然后我们得到：

```
#<Person:0x86cf5b8 @age=101> 
```

太好了，正如预期的那样，属性**age**存储为*实例变量。*但是，如果我们将模型转换为从 ActiveRecord 继承，情况会有所不同。现在，在实例化一个新的 Person 之后，我们会看到：

```
# timestamps removed
#<Person id: 1, age: 101 > 
```

*age*属性似乎不再是实例变量。那么这里到底发生了什么？

我知道我们可以访问`@attributes`包含所有属性和值的散列的实例变量，所以我想知道 ActiveRecord 是否可能会修改控制台输出以以这种方式呈现对象属性。

是否可以在不使用 ActiveRecord 的情况下实例化一个 Ruby 对象，其中属性作为属性而不是实例变量保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:30:54.037

是的，您可以扩展一个 ruby​​ 类，`include ActiveModel::AttributeMethods`以将您的实例变量公开为`ActiveModel`-like 属性。

[有关更多信息，请参阅文档](http://api.rubyonrails.org/classes/ActiveModel/AttributeMethods.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:37:20.467

正如您在代码中看到的那样，将属性“存储”为实例变量是您自己做的，所以如果您想以任何其他方式保存它们，也取决于您。ruby 为您提供了方便的类方法来定义 getter 和 setter 方法，例如 attr_accessor。

还值得注意的是，如果您从 ActiveRecord::Base 继承，则不应覆盖初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T01:52:23.957

> 我想知道 ActiveRecord 是否可能会修改控制台输出以这种方式呈现对象属性。

嗯，有点。负责的方法是`inspect`，[它是由 Object](https://ruby-doc.org/core-2.5.0/Object.html#method-i-inspect)以一种方式实现的（emplasis mine）：

> ...显示对象的类名、对象 id 的编码以及**实例变量及其值的列表**（通过对每个变量调用检查）。

后面还有更多：

> 用户定义的类应覆盖此方法以提供更好的 obj 表示。

这正是 ActiveRecord 所做的，也是您看到此输出的原因。被覆盖的方法不会列出实例变量，而是显示 AR 属性。

因此，仅仅因为您没有在控制台中看到实例变量并不意味着它不存在！

# python - GAE TypeError：格式字符串的参数不足

> ID：10932556
> 
> 赞同：1
> 
> 时间：2012-06-07T13:13:54.027
> 
> 标签：python, google-app-engine, typeerror

我正在尝试使用 Python 在 Google App Engine 中编写我的第一个应用程序。这里是应用程序的链接：http: [//contractpy.appspot.com/](http://contractpy.appspot.com/) - 它只是一个实验性应用程序。整个代码如下。

但我收到此错误（显示在日志上）：

```
(...) line 229, in post "owner":owner})
TypeError: not enough arguments for format string 
```

第 229 行在这个 if 块中：

```
if (resident_name and valid_resident(resident_name)) \
        and (user_SSN and valid_SSN(user_SSN)) \
        and ((not user_email) or (user_email and valid_email(user_email))):
            self.redirect('/welcome?resident=%s&nacionality=%s?SSN=%s?driverLicense=%s?email=%s?witness =%s?owner=%s' % {"resident":resident_name,
                                      "nacionality":user_nacionality,
                                      "SSN":user_SSN,
                                      "driverLicense":user_driverLicense,
                                      "email":user_email,
                                      "witness ":witness ,
                                      "owner":owner}) 
```

更具体地说，就是这一行：

```
"owner":owner}) 
```

我试图进行更改，阅读类似的 awnswers，但没有任何效果。有人可以找出导致此错误的原因吗？提前感谢您的帮助！

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import webapp2

form = """

<html>
  <head>
    <title>Sign Up</title>
    <style type="text/css">
      .label {text-align: right}
      .error {color: red}
    </style>

  </head>

  <body>
    <h2>Signup</h2>
    <form method="post">
      <table>
        <tr>
          <td class="label">
            resident
          </td>
          <td>
            <input type="text" name="resident" value= "%(resident)s">
          </td>
          <td class="error"> %(resident_error)s

          </td>
        </tr>

         <tr>
          <td class="label">
            nacionality
          </td>
          <td>
            <input type="text" name="nacionality" value= " ">
          </td>
        </tr>

        <tr>
          <td class="label">
            License
          </td>
          <td>
            <input type="text" name="driverLicense" value="">
          </td>
        </tr>

        <tr>
          <td class="label">
            SSN
          </td>
          <td>
            <input type="text" name="SSN" value="%(SSN)s">
          </td>
          <td class="error"> %(SSN_error)s
          </td>
        </tr>

        <tr>
          <td class="label">
            Email (optional)
          </td>
          <td>
            <input type="text" name="email" value="%(email)s">
          </td>
          <td class="error"> %(email_error)s

          </td>
        </tr>
      </table>

<br>
        <td class="label">
          Contract Type
          <select name = "contractType">
              <option>House  Rental Contract</option>
              <option>Car Rental Contract</option>
              <option>Other</option>
          </select>
          </td>
<br>
<br>

<br>
          owner
          <select name = "owner">
              <option>House owner</option>
              <option>Car owner</option>
              <option>Other owner</option>
          </select>
<br>
<br>

<br>
          Witness
          <select name = "witness">
              <option>Carl Sagan</option>
              <option>Mahatma Gandhi</option>
          </select>
<br>
<br>

      <input type="submit">
    </form>
  </body>

</html>
"""

welcome = """
<html>
  <head>
    <title>Unit 2 Signup</title>
  </head>

  <body>

%(contractType)s

In consideration of the agreements of the Resident(s), known as: %(resident)s The owner hereby rents them the dwelling located at %(residentAdress)s, for the period commencing on the %(dateStarts)s, and monthly thereafter until the last day of %(dateEnds)s, at which time this Agreement is terminated. Resident(s), in consideration of owners permitting them to occupy the above property, hereby agrees to the following terms:

RENT: To pay as rental the sum of $ (rentalSum) per month, due and payable in advance from the first day of every month. Failure to pay rent when due will result in the owner taking immediate legal action to evict the Resident from the premises and seize the security deposit.
LATE FEE: Rent received after the first of the month will be subject to a late fee of 10% plus (3.00) dollars per day.

ACCEPTED THIS (dateContract), at (localContract).

___________________________________________________
%(resident)s - Resident

___________________________________________________
%(owner)s – owner

___________________________________________________
%(witness)s – Witness

  </body>
</html>

"""

import re

USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
def valid_resident(resident):
    return USER_RE.match(resident)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

def escape_html(s):
    for (i,o) in (("&","&"), (">",">"), ("<","<"), ('"','"')):
        s = s.replace(i,o)
        return s

import time

import datetime

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7 ':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExtenso[todaymonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
       self.response.out.write(form %{"resident": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "resident_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "email_error": ""})

    def write_form(self, text_write):
       self.response.out.write(text_write)

    def post(self):
        resident_name = self.request.get(escape_html("resident"))
        user_nacionality = self.request.get("nacionality")
        user_SSN = self.request.get(escape_html('SSN'))
        user_email = self.request.get(escape_html('email'))
        user_driverLicense = self.request.get(escape_html('driverLicense'))
        resident_error = ""
        SSN_error = ""
        driverLicense_error = ""
        contract_type = self.request.get("contractType")
        owner = self.request.get("owner")
        witness  = self.request.get("witness ")

        if (resident_name and valid_resident(resident_name)) \
        and (user_SSN and valid_SSN(user_SSN)) \
        and ((not user_email) or (user_email and valid_email(user_email))):
            self.redirect('/welcome?resident=%s&nacionality=%s?SSN=%s?driverLicense=%s?email=%s?witness =%s?owner=%s' % {"resident":resident_name,
                                      "nacionality":user_nacionality,
                                      "SSN":user_SSN,
                                      "driverLicense":user_driverLicense,
                                      "email":user_email,
                                      "witness":witness,
                                      "owner":owner})
        else:
            if not valid_resident(resident_name):
                resident_error = "Oh no!!! this resident name isn't valid!"
            if not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                email_error = "Oh no!!! e-mail isn't valid!"
            self.write_form(form % {"resident":resident_name,
                                      "resident_error":resident_error,
                                      "SSN":user_SSN,
                                      "SSN_error":SSN_error,
                                      "driverLicense":user_driverLicense,
                                      "email":user_email,
                                      })

class WelcomeHandler(webapp2.RequestHandler):
    def get(self):
        geted_resident_name = self.request.get('resident')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_resident_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        #geted_contract_type = self.request.get("contractType")
        geted_owner = self.request.get("owner")
        geted_witness  = self.request.get("witness ")

        self.response.out.write(welcome % {"resident":geted_resident_name,
                                      "nacionality":geted_user_nacionality,
                                      "SSN":geted_user_SSN,
                                      "SSN_error":geted_SSN_error,
                                      "driverLicense":geted_user_driverLicense,
                                      "email":geted_user_email,
                                      "witness ":geted_witness ,
                                      "owner":geted_owner,
                                      })

app = webapp2.WSGIApplication([('/', MainHandler), ('/welcome', WelcomeHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:03:45.893

`%`用于字符串格式化时，运算符的右手参数必须是元组，而不是字典。在您的情况下， dict 将替换`%s`格式字符串中第一次出现的 ，而没有足够的其他对象来替换其他对象。您需要手动构建要用于替换的项目的元组，例如：

```
('/welcome?resident=%s&nacionality=%s?SSN=%s?driverLicense=%s?email=%s?witness =%s?
owner=%s' % (resident_name, user_nacionality, user_SSN, user_driverLicense, user_email,
witness, owner) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:18:29.887

not enough arguments is caused when you have x format parameters in the string but you only passed y arguments to match then (where x > y).

In your case, you have a miss %, just change s% to %s.

```
self.redirect('/welcome?resident=%s&nacionality=%s?SSN=%s?driverLicense=%s?email=s%?witness =%s?owner=%s' % {"resident":resident_name,
                                      "nacionality":user_nacionality,
                                      "SSN":user_SSN,
                                      "driverLicense":user_driverLicense,
                                      "email":user_email,
                                      "witness ":witness ,
                                      "owner":owner}) 
```

# c++ - == 具有比按位与、异或和或更高的优先级的基本原理是什么？

> ID：10932558
> 
> 赞同：10
> 
> 时间：2012-06-07T13:13:58.880
> 
> 标签：c++, c, bitwise-operators, operator-precedence, comparison-operators

在 C++ 中，== 和 != 比按位 AND、XOR 和 OR 具有更高优先级的基本原理是什么？

`operator==`在我看来，拥有并`operator!=`追随`operator&`,`operator^`和似乎更自然`operator|`。我想了解动机，以便更好地记住排序。

例如，我认为以下类型的用法很常见：

```
if (bitFields & value == 0) { // Incorrect test.
  // Do Something.
} 
```

既然 == 结果是 1 或 0，为什么还要将它用于按位运算？相反，上面必须写成：

```
if ((bitFields & value) == 0) { // Correct test.
  // Do Something.
} 
```

以获得在与零比较之前完成按位与的预期含义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:19:06.797

1.  It is historical from C
2.  Consider using functions in your `if` statement

e.g.

```
if (func1() == 2 & func2() == 3) 
```

With the precedence of `==` being higher that `&` ensures that both functions are called.

# ravendb - RavenDB：从弱类型对象添加文档

> ID：10932562
> 
> 赞同：0
> 
> 时间：2012-06-07T13:14:09.373
> 
> 标签：ravendb, weakly-typed

我试图弄清楚如何将弱类型对象插入为 RavenDB 文档。

例如，我想插入一个 Datatable 作为文档：

*   每行都映射到一个文档
*   列是文档中的映射键
*   整个 Datatable 是相同模式的文档的集合

虽然数据在 Datatable 中，但它不适合关系数据库，正确的用途是在 NoSQL DB 中。
我有很多具有不同架构的不同数据表，我不想手动为每个表创建一个表示类。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T07:54:55.567

KellyG，您可以使用如下格式执行此操作：

```
public class Item
{
    public Dictionary<string, Item> Children {get;set;}

} 
```

这将干净地序列化到 RavenDB，然后您可以轻松地查询/加载/修改内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:28:10.823

您可以创建一个动态类，其中每列都是一个字段，然后使用反射创建一个动态类型的新对象并将 Row[Col_Name] 映射到 obj.Col_Name。创建对象后，将其存储在会话中。

# jquery - jquery 在另一个 div 上加载一个 div 并关闭它

> ID：10932563
> 
> 赞同：0
> 
> 时间：2012-06-07T13:14:16.190
> 
> 标签：jquery, html

我有一个包含多个 div 的页面。我有一个容器 div，然后是内容的 div 和右侧带有菜单的 div。

问题是，我想在内容 div 的“顶部”加载页面，我基本上想获取内容 div 的尺寸，因为它的长度可能会因您所在的页面而异，并plonk另一个页面来替换这个页面。

我还希望能够关闭“新”窗口，以便旧内容显示为在调用新窗口之前。

查看 JQuery 文档，我是否正确地假设我必须使用 prepend 命令？不确定，但我想我还需要一个类似下面的关闭功能？

```
$('.close').click(function (e) {
            //Cancel the link behavior
            e.preventDefault();

            $('#my_new_page').hide();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:24:08.750

要获取内容 div 的尺寸 -

宽度 = contentdiv.width(); 高度 = contentdiv.height():

然后，您可以使用 CSS z-index 在内容 div 的顶部覆盖一个 div。

也许您正在寻找类似 Jquery 的 fancybox 插件之类的东西？时不时用过，挺好用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:39:41.600

嗨@JK36，我知道您正在寻找灯箱或模式窗口。[这里](http://planetozh.com/projects/lightbox-clones/)有一个很棒的清单。好吧，示例#5 中的[JQModal](http://dev.iceburg.net/jquery/jqModal/#examples)你可以获得多模式，而 1010 有另一个[很好的实现](http://www.onezerozeroone.com/examples/multimodal/)。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:44:59.807

我使用这样的东西来制作覆盖：http: [//jsfiddle.net/ULmdH/1/](http://jsfiddle.net/ULmdH/1/)

使用它来关闭覆盖：

```
$('.close').click(function (e) {
    //Cancel the link behavior
    e.preventDefault();

    $('.new_content').hide();
    //or
    $('.new_content').remove();
}); 
```

# android - 应用程序长时间恢复时应用程序崩溃

> ID：10932565
> 
> 赞同：5
> 
> 时间：2012-06-07T13:14:20.797
> 
> 标签：android, caching, memory, crash

我正在创建一个安卓应用程序。它拥有从服务器下载的过程。它运行良好，直到应用程序运行并维护数据而没有任何崩溃，但现在我遇到了如下所述的问题

当应用程序通过按主页按钮最小化并经过很长时间后，当我打开应用程序时，应用程序中的所有数据都被删除。它给了我一个“空指针异常”；甚至 ArrayList 值也被删除，它给出了一个 0 大小的数组列表。

我仅通过 OnResume 从主屏幕最大化后打开应用程序，但它没有调用自身。

我不知道为什么会出现这个问题。谁能给我一个解决方案并指出我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:36:02.507

是的，正如@paradx 所说，垃圾收集器确实会在应用程序处于后台时丢弃数据。最后我找到了基于@paradx 建议的解决方案，因为数据存储在 SQLite 或 savedInstanceState

只需通过一些静态值

```
 intent.putExtra("static key","static value"); 
```

然后将静态哈希图写入文件并检索以供以后使用。现在应用程序不会因为这个问题而崩溃。

我已经发布了这个解决方案，以便有人可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:54:15.687

我的猜测是，当您的应用程序在后台时，垃圾收集器会丢弃您的数据。尝试将数据保存到内置 SQLite 数据库，或 onSaveInstanceState() 生命周期方法中的 savedInstanceState 包，然后在 onRestoreInstanceState() 方法中将其加载回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:18:47.143

Did u use the apache HTTP client or the UrlConnection?

See [Apache http client or URLConnection](https://stackoverflow.com/questions/4799151/apache-http-client-or-urlconnection)

Maybe the wrong use could lead to such an NPE. Could you also please post your logCat output?

# ruby - 重写嵌套循环

> ID：10932575
> 
> 赞同：1
> 
> 时间：2012-06-07T13:14:59.920
> 
> 标签：ruby, architecture

我知道，它看起来很糟糕，但它工作了一段时间。但是现在用户数量如此之多，以至于系统开始“忘记”它的确切位置（失去与数据库的连接）重写这个嵌套循环的最佳实践是什么？

```
User.all.each_with_index do
 get Subset of criteria to select data
 Subset1.each do
  getSubset2
   Subset2.each do
    getSubset3
     Subset3.each do
      getSubset4
       Subset4.each do
        compute something
         open file A
          create or update a line
         end
        end
       end
     end
   end 
end 
```

编辑：子集是查询或预定义的数组。我正在尝试按照建议组合它，将 brb

```
User.all.each_with_index do |user|
 Subset1.each do |parameter1|
   Subset2(function(user,parameter1)).each do |object2|
     Subset3.each do |parameter3|
       getSubset4(user, parameter1, object2, parameter3)
         Subset4.each do |data|
          p data
         end
     end
   end
 end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:57:13.737

```
subset1 = %w(a b c )
subset2 = %w(d e f g )
subset3 = [1,2,3,4,5]

subset1.product(subset2, subset3) do |data|
  p data
end 
```

这与三重循环具有相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:41:42.287

小猪支持@steenslag 的回答，假设您的用户是

```
#name, gender, city, profession
Alice, female, Los Angeles, doctor
Bob, male, Los Angeles, lawyer
Carol, female, New York, astronaut
David, male, New York, programmer 
```

不是遍历所有用户，然后是一个城市的所有用户，然后是所有性别的用户，而是打破这些嵌套查询。

```
#bad
User.each do |u1|
  u1.cities.each do |u2|
    u2.genders.each do |u3|
      u3.professions.each do |u4|
        u4.some_method
      end
    end
  end
end

#better
cities = ["Los Angeles", "New York"]
genders = ["female", "male"]
professions = ["lawyer", "doctor", "astronaut", "programmer"]
criteria = cities.product(genders, professions) 
```

现在您可以遍历收集所有这些数组的叉积的一个数组（标准）。

```
criteria.each do |cr|
  city, gender, profession = cr
  u = User.find_by_city_and_gender_and_profession(city, gender, profession)
  u.some_method
end 
```

# cpu - 如何在硬件层面实施转变？

> ID：10932578
> 
> 赞同：14
> 
> 时间：2012-06-07T13:15:04.460
> 
> 标签：cpu, processor, bit-shift, circuit, alu

当要移位的数字未知时，如何在硬件级别实现位移？

我无法想象每个可以移位的数字都有一个单独的电路（这将是 64 位机器上的 64 个移位电路），我也无法想象它会是一个移位循环（这将在 64 位机器上最多需要 64 个移位周期）。这是两者之间的某种妥协还是有一些巧妙的技巧？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T15:49:23.750

该电路称为“[桶形移位器](http://en.wikipedia.org/wiki/Barrel_shifter)”-基本上是多路复用器的负载。它具有每个需要移位的地址位的层，因此 8 位桶形移位器需要三个位来表示“要移位多少”，因此需要 3 层多路复用器。

[这是来自http://www.globalspec.com/reference/55806/203279/chapter-9-additional-circuit-designs](http://www.globalspec.com/reference/55806/203279/chapter-9-additional-circuit-designs)的 8 位图片：

![在此处输入图像描述](../Images/10527fb2a417f8124c175087ca14c3d0.png)

# objective-c - 使用 typedef 的不兼容块指针类型

> ID：10932579
> 
> 赞同：3
> 
> 时间：2012-06-07T13:15:07.677
> 
> 标签：objective-c, cocoa, objective-c-blocks

一天以来，我一直在尝试编写一段代码来帮助我以一种很好的方式处理 CoreData 的查找和创建（从这篇文章中我找到了[http://emplementation.blogspot.nl/2011/12 /importing-data-into-core-data-while.html](http://emplementation.blogspot.nl/2011/12/importing-data-into-core-data-while.html)）。我最终使用了以前从未做过的代码块。

不知何故，我无法修复发生的以下错误，因为我的 typedef 中的某些内容与我尝试在函数中定义的内容不同。我想我理解这与在 typedef 中定义为 __strong 的块有关，但在我的实现文件中有所不同。

错误

> *使用'* void (^ ) *(* NSManagedObject *** _strong , NSDictionary * _strong *, NSManagedObject ** _strong)'

 **MyViewController.h

```
typedef void (^objectOperationBlock)(NSManagedObjectContext *context,
                                 NSDictionary *hostObjectData,
                                 NSManagedObject *localManagedObject); 
```

我的视图控制器.m

```
objectOperationBlock matchedBlock = ^(NSManagedObject *context, NSDictionary *hostObjectData, NSManagedObject *localManagedObject){
    NSLog(@"Dosomething");
}; 
```

在我所有的尝试中，我发现这可以构建（但它没有使用 typedef）

```
void (^matchedBlock)(NSManagedObject*, NSDictionary*, NSManagedObject*) = ^(NSManagedObject *context, NSDictionary *hostObjectData, NSManagedObject *localManagedObject){
    NSLog(@"Dosomething");
}; 
```

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:28:05.127

我是否错过了 typedef 应该是：

```
typedef void (^objectOperationBlock)(NSManagedObject *managedObject,
                                     NSDictionary *hostObjectData,
                                     NSManagedObject *localManagedObject); 
```**

# ruby-on-rails - 什么是“/路径/到”？

> ID：10932582
> 
> 赞同：1
> 
> 时间：2012-06-07T13:15:14.550
> 
> 标签：ruby-on-rails, ruby

我从事网络编程已经有一段时间了，并不认为自己是一个新手，但我仍然不明白“/path/to”是什么。人们经常使用该代码，我曾经认为这只是引用主路径的一种方式。但我开始想知道为什么这么多人如此统一地使用该语法，因为如果它不是按字面意思理解的话，就会令人困惑。大多数人实际上会输入“/path/to”。

所以我尝试在谷歌上搜索“/path/to”，但这是在通用搜索引擎上很难搜索的东西，所以没有运气。所以我决定在这里问。“/path/to”是人们用来指代某物的某种行话吗？如果是，它具体指的是什么？如果不是，那么它在内部是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:18:55.837

这只是您环境中实际路径的占位符。当我想从相关路径中抽象出来时，我通常会使用它。没关系，我的代码的读者/用户可能会有所不同。所以我更愿意明确指出他应该修改哪些地方。

其他此类示例：

```
GET http://example.com
ssh username@host 
```

# javascript - Array.push() makes all elements the same when pushing an object

> ID：10932584
> 
> 赞同：18
> 
> 时间：2012-06-07T13:15:20.127
> 
> 标签：javascript, node.js

I'm new to node and javascript and have been banging my head on the following. I've created an object as follows:

```
var Subscriber = {
'userID': String,
'email': String,
'name': String,
'stage': String,
'poster': Boolean,
'canEmail': Boolean,
'stage': String, } 
```

I have a function where I query mongodb, and loop through the results, attempting to load an array of subscribers, which I've declared as:

```
var s = Subscriber;
var subscribers = []; 
```

The loop looks like this:

```
//load array of users that are subscribed to the group
        async.forEach(g.subscribers, function(item, callback) {     
            //load user document for this user
            User.findOne({ _id: item}, function(err, u) {
                if(!err && u) {                 
                    //var s = new Subscriber();
                    console.log('Sub load, found user %s, building array item', u.email);
                    console.log('Subs @ loop start');
                    console.log(util.inspect(subscribers));

                    console.log('Heres foo: ' + util.inspect(foo));

                    s.userID = u._id;
                    s.email = u.email;
                    s.name = u.firstName + ' ' + u.lastName;
                    s.stage = u.stage;
                    s.poster = false; //we're just loading subscribers at this point'
                    if(s.stage != 'new') s.canEmail = true;

                    //push new subscriber onto the array
                    console.log('Pushing ' + util.inspect(s));
                    subscribers.push(s);

                    console.log('At end ' + util.inspect(subscribers));

                    foo.push(s.email);
                    console.log('Heres foo now: ' + util.inspect(foo));

                    callback(null, item);
                } 
```

After each call to subscribers.push(s), the array has the correct number of elements, but all elements match the last values for s, like this (with two different users being pulled from the DB):

```
[ { userID: 4fc53a71163006ed0f000002,
email: 'test@test.com',
name: 'undefined undefined',
stage: 'new',
poster: false,
canEmail: true },
  { userID: 4fc53a71163006ed0f000002,
email: 'test@test.com',
name: 'undefined undefined',
stage: 'new',
poster: false,
canEmail: true } ] 
```

Pushing a single element of s rather than the whole object seems to be fine. I added the "foo" array as a test, and it works fine:

```
Heres foo now: [ 'email1@foo.com', 'test@test.com' ] 
```

What is going on here?!?!??!

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T13:24:29.710

问题不在于 the 的`push`方法，而在于`Array.prototype`您的绑定。`s`您在块中的每次迭代中都修改了相同的对象，`async.foreach`这实际上与之前定义的对象相同`Subscriber`。

首先，您应该将`s`变量的声明移至 foreach 块。

而且如果你想创建一个具有默认值的对象，它应该是 a `function`，它返回一个新对象：

```
function Subscriber() {
  return {
    'userID':   '',
    'email':    '',
    'name':     '',
    'stage':    '',
    'poster':   false,
    'canEmail': false,
    'stage':    ''
  };
}; 
```

然后你可以`Subscriber`像这样实例化一个对象：

```
var s = Subscriber(); 
```

有关更多解释，请参阅[此答案](https://stackoverflow.com/a/111200/221213)或[MDN 上的 Closures 。](https://developer.mozilla.org/en/JavaScript/Guide/Closures)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-16T18:29:01.337

在推入数组之前克隆对象也解决了这个问题。

```
temp = clone(s);
subscribers.push(temp); 
```

获取[https://www.npmjs.com/package/clone](https://www.npmjs.com/package/clone)

# node.js - handling asynchronous call backs in nodejs

> ID：10932587
> 
> 赞同：0
> 
> 时间：2012-06-07T13:15:24.497
> 
> 标签：node.js, callback

I am newbie to nodejs.It's very hard to handle callbacks at nodejs level. I have code like this,

```
getItems(request,function(jsonObject){
     var itemData={};
     var itemDetails=new Array();
     for(var i=0;i < jsonObject.length;i++){
         getItemDetails(jsonObject[i].value.item_id,function(jsonObject){
            itemDetails.push(jsonObject);
         });
    }
    itemData["itemDetails"]=itemDetails;
    response.contentType("application/json");
    response.send({"data":itemData});
}); 
```

while executing the above code, the for loop is continuing with out getting callback from getItemDetails method and response sent to client. My requirement is the loop will wait until getting the call back from the getItemDetails then response should send. I have tried with process.nextTick(), but i am unable to find where i have to use that process.nextTick().. Please anybody provide suggestions.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:24:57.090

您只需要在获得所有项目后发送响应，因此修改您的代码，如下所示：

```
getItems(request,function(jsonObject) {
    var itemData = {},
        itemDetails = [],
        itemsLeft = len = jsonObject.length,
        i;

    function sendResponse(itemDetails) {
        itemData["itemDetails"] = itemDetails;
        response.contentType("application/json");
        response.send({ "data": itemData });
    }

    for (i = 0; i < len; i++) {
        getItemDetails(jsonObject[i].value.item_id, function(jsonObject) {
            itemDetails.push(jsonObject);
            // send response after all callbacks have been executed
            if (!--itemsLeft) {
                sendResponse(itemDetails);
            }
        });
    }
}); 
```

注意：我在`itemLeft`这里使用它是因为它是解决这类问题的一种更通用的方法，但 Ianzz 方法也可以，因为您可以比较两个数组的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:20:28.657

您不能让循环等待，但您可以修改代码以获得您期望的行为：

```
getItems(request,function(outerJsonObject){
    var itemData={};
    var itemDetails=new Array();
    for(var i=0;i < outerJsonObject.length;i++){
        getItemDetails(jsonObject[i].value.item_id,function(innerJsonObject){
            itemDetails.push(innerJsonObject);
            if (itemDetails.length == outerJsonObject.length) {
                // got all item details
                itemData["itemDetails"]=itemDetails;
                response.contentType("application/json");
                response.send({"data":itemData});
            }
        });
    }
}); 
```

# asp.net - What is DefaultWsdlHelpGenerator.aspx?

> ID：10932589
> 
> 赞同：6
> 
> 时间：2012-06-07T13:15:27.053
> 
> 标签：asp.net, web-services, wsdl

Does anybody know what is DefaultWsdlHelpGenerator.aspx?
What its use? and the most important, **when** it is in use?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T03:53:16.450

测试页面是为 ASP.NET 中的 Web 服务自动生成的。

DefaultWsdlHelpGenerator.aspx 用于生成该测试页面。

您可以修改此生成器以更改测试页面的生成方式。

[参考](http://blogs.msdn.com/b/toub/archive/2004/03/10/87327.aspx)

# c - Why fork() twice

> ID：10932592
> 
> 赞同：23
> 
> 时间：2012-06-07T13:15:34.480
> 
> 标签：c, debugging, fork

Nagios lets me configure `child_processes_fork_twice=<0/1>`.

The [documentation](http://nagios.sourceforge.net/docs/nagioscore/3/en/configmain.html#child_processes_fork_twice) says

> This option determines whether or not Nagios will fork() child processes twice when it executes host and service checks. By default, Nagios fork()s twice. However, if the use_large_installation_tweaks option is enabled, it will only fork() once.

As far as I know `fork()` will spawn a new child process. *Why would I want to do that twice?*

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-05-20T17:42:15.653

好的，所以现在首先：什么是僵尸进程？

这是一个已经死亡的进程，但是它的父进程正忙于做一些其他的工作，因此它无法收集孩子的退出状态。

在某些情况下，孩子跑了很长时间，父母不能等那么久，并且会继续它的工作（注意，父母并没有死，而是继续其剩余的任务但不关心孩子）。

这样就创建了一个僵尸进程。

现在让我们开始谈正事。两次分叉在这里有什么帮助？

需要注意的重要一点是，孙子进程执行父进程希望其子进程执行的工作。

现在第一次调用 fork 时，第一个孩子只是再次分叉并退出。这样，父母不必等待很长时间才能收集孩子的退出状态（因为孩子唯一的工作就是创建另一个孩子并退出）。所以，第一个孩子不会变成僵尸。

至于孙子，它的父母已经去世了。因此，孙子进程将被`init`进程采用，该进程始终收集其所有子进程的退出状态。所以，现在父进程不用等待很长时间，也不会创建僵尸进程。

还有其他方法可以避免僵尸进程；这只是一种常见的技术。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-07T13:22:48.920

在 Linux 中，通常通过分叉两次来创建守护进程，中间进程在分叉孙子后退出。这具有孤立孙进程的效果。因此，如果它终止，则操作系统有责任在它之后进行清理。原因与所谓的僵尸进程有关，它们在退出后继续生存并消耗资源，因为通常负责清理的父进程也已经死亡。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T13:20:41.577

同样来自[文档](http://nagios.sourceforge.net/docs/3_0/largeinstalltweaks.html)，

> 通常 Nagios 在执行主机和服务检查时会 fork() 两次。这样做是为了 (1) 确保对出错和段错误的插件具有高水平的抵抗力，以及 (2) 使操作系统在孙子进程退出后处理清理它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T13:22:39.840

[Unix 编程常见问题解答](http://www.faqs.org/faqs/unix-faq/programmer/faq/)§1.6.2：

> ## 1.6.2 如何防止它们发生？
> 
> 您需要确保您的父进程为每个终止的子进程调用`wait()`（或 `waitpid()`,等）；`wait3()`或者，在某些系统上，您可以指示系统您对子退出状态不感兴趣。
> 
> 另一种方法是`fork()` *两次*，并让直接子进程立即退出。这会导致孙进程成为孤立的，因此 init 进程负责清理它。有关执行此操作的代码，请参阅`fork2()`示例部分中的函数。
> 
> 要忽略子退出状态，您需要执行以下操作（检查系统的联机帮助页以查看是否有效）：
> 
> ```
>  struct sigaction sa;
>      sa.sa_handler = SIG_IGN;
>  #ifdef SA_NOCLDWAIT
>      sa.sa_flags = SA_NOCLDWAIT;
>  #else
>      sa.sa_flags = 0;
>  #endif
>      sigemptyset(&sa.sa_mask);
>      sigaction(SIGCHLD, &sa, NULL); 
> ```
> 
> 如果这是成功的，那么这些`wait()`功能就会被阻止工作；如果它们中的任何一个被调用，它们将等待*所有*子进程终止，然后返回失败并返回`errno == ECHILD`.
> 
> 另一种技术是捕获 SIGCHLD 信号，并让信号处理程序调用`waitpid()`or `wait3()`。有关完整程序，请参阅示例部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-29T16:21:38.700

这段代码演示了如何使用 double`fork`方法让孙子进程被 init 采用，而不会有僵尸进程的风险。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/types.h>

int main()
{
    pid_t p1 = fork();

    if (p1 != 0)
    {
        printf("p1 process id is %d", getpid());
        wait();
        system("ps");
    }
    else
    {
        pid_t p2 = fork();
        int pid = getpid();

        if (p2 != 0) 
        {
            printf("p2 process id is %d", pid);
        }
        else
        {
            printf("p3 process id is %d", pid);
        }

        exit(0);
    }
} 
```

父进程将`fork`新的子进程，然后`wait`为它完成。子进程将`fork`是一个孙子进程，然后`exit(0)`.

在这种情况下，孙子进程除了 之外什么都不做`exit(0)`，但可以让其执行您希望守护进程执行的任何操作。孙子可能会长寿，并且在`init`完成后将通过该过程回收。

# visual-studio-lightswitch - Lightswitch Validation on Entity Field stops save of edit screen

> ID：10932598
> 
> 赞同：0
> 
> 时间：2012-06-07T13:15:57.003
> 
> 标签：visual-studio-lightswitch

In an entity called adDetail I have a non-identity field that should never have a duplicate value. adShortURL.

I have a custom New data and a custom edit screen attached to the entity called adDetail.

When the new data screen is used.  The validations on the field works great.  Even going to the database to check for a duplicate value.

However, when I go to edit the same table using existing data, the duplicate value validation stops the screen from saving.

Tried to determine the screen name so put an if around the validation.  Did not find a way.  Tried to set a screen parameter so I could look for it in the validation.  that did not work.  Did not have the screen parameter available in the custom validation method. (might not know where to look).

Please help me figure out how to validate on add and skip the validation on edit screens.

Thanks, Victor

Code Snippet:

```
partial void AdShortURL_Validate(EntityValidationResultsBuilder results)
{
   // results.AddPropertyError("<Error-Message>");
   // *** There is a Bug here that only happens on the Edit Screen.  On the edit screen, the check happens and finds a duplicate in the databae prohibiting saving.
   //Hit the database and see if there is already a value in there like the one I am Entering.
   IDataServiceQueryable<LSAR_AdDetail> adDetails = 
      this.DataWorkspace.OtLY83U6SQ72SZCG9OtData.LSAR_AdDetails.Where(i =>
         i.AdShortURL == this.AdShortURL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:18:00.507

I personally wouldn't query it in this way. You are only looking to see if there is one that exists already so I would use an Int variable and return a count of records where AdShortURL == the one you are looking for.

```
 var myCount = (from items in this.DataWorkspace.OtLY83U6SQ72SZCG9OtData.LSAR_AdDetails
             where items.AdShortURL == this.AdShortURL
             select items).Execute().Count(); 
```

# opengl-es-2.0 - Game development using OpenGL ES 2.0 and C

> ID：10932600
> 
> 赞同：-3
> 
> 时间：2012-06-07T13:16:05.083
> 
> 标签：opengl-es-2.0

I wanted to develop a game. I want to develop with the knowledge that I am having in OpenGL ES 2.0 and C language.

First thing that comes into my mind is how to develop textures etc. So please can any one tell me what are all the tools, game engine etc what all i need.

Any good tutorials for the same.

thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:14:07.247

1.  你说你想使用 OPENGL ES 2.0，我知道你想为 Android 或 iPhone 设备开发。

2.  您需要阅读一些有关矩阵、旋转、翻译的信息。OpenGl ES 没有 glrotate 和 gltranslate 方法（以及更多），但您可以使用 OpenGl 文档开发自己的方法方法： http: [//www.opengl.org/sdk/docs/man/xhtml/glRotate.xml](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml) [http ://www.opengl.org/sdk/docs/man/xhtml/glTranslate.xml](http://www.opengl.org/sdk/docs/man/xhtml/glTranslate.xml)

3.  如果要使用 OPENGL 进行绘图，则需要编写一个顶点和片段着色 [器 2D 游戏使用哪种着色器（即超级马里奥）](https://stackoverflow.com/questions/9714443/what-kind-of-shader-for-2d-games-ie-super-mario/9733430#9733430)

你需要的东西很多，这只是一小部分。我希望这对你有帮助。

# mod-rewrite - 500 error with mod re-write cannot see whats wrong?

> ID：10932601
> 
> 赞同：1
> 
> 时间：2012-06-07T13:16:06.990
> 
> 标签：mod-rewrite

I have been using mod re-write ok up until now.

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^/?(shopping-catalogue)/([0-9]+) index.php?friendly_url=$1&view=catalogue&catalogue_id=$2 [L]
RewriteRule ^/?(shopping-catalogue)/(category)/([0-9]+) index.php?friendly_url=$1&view=$2&category_id=$3 [L]
RewriteRule ^/?(shopping-catalogue)/(category-item)/([0-9]+) index.php?friendly_url=$1&view=$2&category_item_id=$3 [L]
RewriteRule ^/?(shopping-catalogue)/(category-item-option)/([0-9]+) index.php?friendly_url=$1&view=$2&category_item_option_id=$3 [L]

# marketing module see newsletter before sending
RewriteRule ^/?(newsletters)/([A-Za-z0-9-]+)/(newsletter)\.html /newsletters/$2/newsletter.html [L]

RewriteRule .([^/]+)\.html index.php [L]

#RewriteRule ^/client-area/CLID/([0-9]+) /index.php?temp=template_dataroom&CLID=$1 [L]

# allow access with no restrictions to local machine at 192.168.1.3
RewriteCond %{REMOTE_ADDR} !192.168.1.3

# allow access to all .css and .js in sub-directories..
RewriteCond %{REQUEST_URI} !\.css$
RewriteCond %{REQUEST_URI} !\.js$

# allow access to the files inside img/, but not a directory listing..
RewriteCond %{REQUEST_URI} !dataroom/(.*)\.
RewriteRule ^files/([^/]+)/([^/]+).zip /download.php?section=$1&file=$2 [NC]
# allow access to these particular files... 
```

My problem seems to be that this line gets ignored

```
# marketing module see newsletter before sending
RewriteRule ^/?(newsletters)/([A-Za-z0-9-]+)/(newsletter)\.html /newsletters/$2/newsletter.html [L] 
```

I am trying to access an html file directly but the folder is a unique name each time.... ie -

```
http://www.awebsite.co.uk/newsletters/template_4fd09c5b429ea/newsletter.html 
```

This line is being ignored. I do not understand why?

Any help would be much appreciated.

Thanks

Andi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:23:12.793

我没有检查结果，但你似乎不允许下划线

```
RewriteRule ^/?(newsletters)/([A-Za-z0-9-]+)/(newsletter)\.html /newsletters/$2/newsletter.html [L]

RewriteRule (newsletters)/([A-Za-z0-9|-|_]+)/(newsletter)\.html /newsletters/$2/newsletter.html [L] 
```

另外，我认为您不需要从位（^）开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:21:30.670

好的，我现在开始工作了，。将 / 从重定向的链接中取出

这是我现在的行

```
# marketing module see newsletter before sending
RewriteRule ^/?(newsletters)/([A-Za-z0-9_]+)/(newsletter)\.html newsletters/$2/newsletter.html [L] 
```

谢谢

和我

# ruby - How to edit the windows registry entry so that Devkit does not look at the incompletely uninstalled ruby installers in windows 7

> ID：10932604
> 
> 赞同：0
> 
> 时间：2012-06-07T13:16:12.793
> 
> 标签：ruby, windows, devkit

When running ***ruby dk.rb init*** from C:/Devkit it displays as below

[INFO] found RubyInstaller v1.8.7 at C:/ruby

[INFO] found RubyInstaller v1.9.2 at C:/IRails/Ruby192

Initialization complete! Please review and modify the auto-generated 'config.yml' file to ensure it contains the root directories to all of the installed Rubies you want enhanced by the DevKit.

But no such folder exists in the C Drive. How to remove this from the windows registry.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:49:07.923

如果 DevKit`dk.rb`在注册表中发现了这些元素，则意味着 Ruby 在某个时候安装在这些文件夹中，但要么手动删除要么重新定位。

如果您打开`dk.rb`，您将看到用于查找此类信息的注册表项：

`Software\RubyInstaller\MRI`先入`HKEY_LOCAL_MACHINE`后入`HKEY_CURRENT_USER`

您可以使用`regedit`并查找这些密钥并完全删除它们。

但是我建议你首先检查控制面板中的*添加和删除程序*，如果仍然安装了 Ruby，如果是这样，删除并正确安装。

# visual-studio-2010 - Auto download external assemblies when opening solution

> ID：10932606
> 
> 赞同：1
> 
> 时间：2012-06-07T13:16:22.920
> 
> 标签：visual-studio-2010, tfs

Here is the situation: We have source control based on tfs2010, visual studio 2010 and solution which contain projects and have referances to External assemblies. If we open solution and try to build it it will show us error which tell that some assemblies couldn't be find, to make it work we should go in source control explorer find external assembly directory and get latest version, then solution will be build without any errors. Does anybody know how to make solution to autodownload those external assemblies ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:26:25.927

在您的解决方案中，创建一个逻辑文件夹（称为“外部程序集”），然后添加程序集，方法是右键单击该文件夹，然后“添加现有项...”。

像那样：

![在此处输入图像描述](../Images/8e08ee6f7aca62923034ad4ae4d103ed.png)

这样，当您加载解决方案时，将从源代码管理中检索文件（当然，您的解决方案必须绑定到源代码管理）。

# javascript - Asyncronous function not changing variable in JS

> ID：10932607
> 
> 赞同：1
> 
> 时间：2012-06-07T13:16:25.850
> 
> 标签：javascript, ajax, variables, asynchronous, scope

```
var encodedAccount = '';
function encodeUsername() 
{
    encodedAccount=  encrypt(document.getElementById('account').value);
    alert(encodedAccount);
} 
```

the function encrypt is async ajax function. the `alert` is not returning a value , it's still '' Any Idea ? Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:18:27.083

Asynchronous functions generally don't return values. They usually accept a callback function that fires when the function is done (usually when when HTTP response comes back in the case of Ajax).

You need to find out how the `encrypt` function expects to be used and conform to its expectations.

# visual-studio-2010 - Qt translator in VS 2010 - translation TS file names are put in the .pro file in Qt Creator, how is it done in Visual Studio?

> ID：10932610
> 
> 赞同：0
> 
> 时间：2012-06-07T13:16:42.653
> 
> 标签：visual-studio-2010, qt, language-translation

I have code in C++ which needs to work with the Qt translation tools. In Qt Creator I would add

TARGET = translation TRANSLATIONS = tran_ar.ts tran_en.ts tran_la.ts

into the .pro file. The development is being done in VS 2010 (the Gui is working fine so Qt is integrated). So where do I put this information in Visual Studio 2010?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T10:45:22.040

尝试 VS 的 Qt 插件的菜单项：

Qt > 添加新的翻译文件

选择项目和语言，然后VS应该在“本地化文件”或类似的地方添加一个空白的xxx.ts文件到你的项目中。该文件的上下文菜单条目包含指向“lupdate”和“lrelease”的链接，所以我*认为*你甚至不需要打扰你不会在 VS 中真正使用的 pro 和 pri 文件（我检查了 .qm lrelease 生成的文件似乎包含 .ts 文件的所有翻译条目）。

# java - Parse exception with simpleDate Format

> ID：10932612
> 
> 赞同：1
> 
> 时间：2012-06-07T13:16:52.007
> 
> 标签：java, date

I am trying to convert date from one format to other format but the following code is giving me the exception: please help

```
public class Formatter {
        public static void main(String args[]) {

            String date = "12-10-2012";
            try {
                Date formattedDate = parseDate(date, "MM/dd/yyyy");
                System.out.println(formattedDate);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        public static Date parseDate(String date, String format)
                throws ParseException {
            SimpleDateFormat formatter = new SimpleDateFormat(format);
            return formatter.parse(date);
        }

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T13:40:40.567

要将**“MM-dd-yyyy”**转换为**“MM/dd/yyyy”**，您必须执行以下操作：

```
SimpleDateFormat format1 = new SimpleDateFormat("MM-dd-yyyy");
SimpleDateFormat format2 = new SimpleDateFormat("MM/dd/yyyy");
Date date = format1.parse("12-10-2012");
System.out.println(format2.format(date)); 
```

如果您输入`"12-10-2012"`，则输出将是`"12/10/2012"`：

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T13:19:11.840

change slash `/` to dash `-`

**MM-dd-yyyy** instead of **MM/dd/yyyy**

it should be `Date formattedDate = parseDate(date, "MM-dd-yyyy");`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T13:19:51.247

您的格式使用斜杠 (/)，但您提供的日期使用破折号 (-)。改成：

```
Date formattedDate = parseDate(date, "MM-dd-yyyy"); 
```

你应该很好:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:21:18.923

尝试这个。

```
Date formattedDate = parseDate(date, "MM-dd-yyyy"); 
```

# iphone - 使用 iFile 手动更改 Camera.app 设置？

> ID：10932621
> 
> 赞同：1
> 
> 时间：2012-06-07T13:17:23.793
> 
> 标签：iphone, ios, camera, jailbreak

我修理了我的手机，但前置摄像头的连接器坏了。所以我尝试打开Camera.app并检测到我无法切换回后置摄像头，因为Camera.app由于前置摄像头损坏而冻结。

当我打开自己的应用程序时，它可以使用前置摄像头制作照片。

我的手机越狱并安装了 iFile。有没有办法在文件系统上手动更改这些设置？我在哪里可以改变它？

PS：我不想进行设置重置，因为那时我已经清除了所有数据，只要我再次将相机切换到前置摄像头，相机就会工作，然后应用程序就会冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:14:52.253

我修好了它：

在列表中`/System/Library/CoreServices/SpringBoard.app/N90AP.plist`

我将值设置 `front-facing-camera`为`false`

重新启动后它起作用了。

# xcode - XCode4 Organizer - App fails validation due to CFBundleVersion error

> ID：10932623
> 
> 赞同：0
> 
> 时间：2012-06-07T13:17:34.660
> 
> 标签：xcode, validation, version

When submitting a new version of our app to the Apple app store, I am receiving the dreaded "This bundle is invalid. The key CFBundleVersion in the Info.plist file must contain a higher version than that of the previously uploaded version."

I'm puzzled by this, since I've updated this app many (>6) times previously. The current version app details from iTunes Connect shows that the bundle version previously uploaded is "5780".

The new version has a bundle version of 6001, however, this results in the aforementioned validation error.

I have tried various permutations of the bundle string (5781, 10000, 1.6.1, etc.) all to no avail. This is on Xcode 4.3.2 running on Lion 10.7.3 Again, this far from the first update and the same process has worked previously - the only difference that I am aware of is that the previous update was done with Xcode 4.3.1.

Thanks in advance for any suggestions or pointers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:35:52.533

尝试不仅增加内部版本号 - CFBundleVersion (5780->5781)，而且增加营销版本 - CFBundleShortVersionString (1.6.0 -> 1.6.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:08:05.870

尝试将应用程序从 1.09 更新到 1.5 时刚刚遇到此错误。我们的解决方案似乎是将 1.5 更改为 1.50，但这对您的编号方案没有帮助。也许这是一个需要等待的问题，而这个数字之所以奏效，仅仅是因为时间已经过去了。然后该应用程序验证并提交没有问题。

# linux - htaccess rewrite 在 WAMP 上离线工作，但在 linux 主机上不在线

> ID：10932625
> 
> 赞同：2
> 
> 时间：2012-06-07T13:17:37.473
> 
> 标签：linux, .htaccess, rewrite, wamp

我只是在这里解释我的问题：

```
http://mysite.com/movie/20000 
```

应该改写为

```
http://mysite.com/movie.php?id=20000 
```

我的 htaccess 文件：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^movie/([0-9]+)$ movie.php?id=$1 
```

在我的 localhost WAMP 安装上，这可以正常工作，但是当我将它放到我的 linux 主机上时，它并不能完全正常工作。它确实进入了 movie.php 页面，但似乎没有给出 GET 参数 id。

**编辑 ：**

如果我使用

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^movie([0-9]+)$ movie.php?id=$1 
```

然后

```
http://mysite.com/movie20000 
```

转到正确的页面，但我想要`/movie/20000`而不仅仅是`/movie20000`

我的主机似乎也自动将访问重写`mysite.com/movie`为`mysite.com/movie.php`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:56:48.523

找了很久，把我可爱的头发拔了出来，我找到了解决办法。

我刚刚添加

```
Options -MultiViews 
```

到我的 htaccess 文件并修复它。

为什么？因为 .php 被添加到没有扩展名的 url 中，我真的不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:47.793

这应该有效。

```
RewriteRule ^movie/([0-9]+)$ http://mysite.com/movie.php?id=$1 [NC,L] 
```

不要忘记 [NC, L] 这意味着不区分大小写，最后一条规则...如果您不这样做，它将继续通过您的 htaccess 规则进行处理，可能会触发其他规则。

不过，下面的东西是很好的建议.... :)

检查 Rewrite 模块是否正在加载 apache。在 httpd.conf 文件中查找这一行：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

检查您的 apache 配置是否允许您的系统或虚拟主机定义中的 .htaccess 文件。

此外，使用更简单的重写 catch all 进行测试并单独测试以查看它是否完全像这样工作（删除 htaccess 文件中的所有其他内容以限制测试）：

```
RewriteEngine On
RewriteRule ^(.*)$ http://www.google.com [L,R=301] 
```

如果 apache 的配置设置正确，对您网站的任何请求都应发送至 google。

# jsf - JSF - selectonemenu (nullPointer)

> ID：10932627
> 
> 赞同：1
> 
> 时间：2012-06-07T13:17:49.220
> 
> 标签：jsf, selectonemenu

Form snippet:

```
<h:selectOneMenu id="supervisor" value="#{newTopic.supervisor}">
                <s:objectConverter/>
                <f:selectItems value="#{supervisors}" var="_supervisor"
                               itemValue="#{_supervisor}"
                               itemLabel="#{_supervisor.name.firstName} #{_supervisor.name.lastName}"></f:selectItems>   
</h:selectOneMenu>
<h:commandButton action="#{newTopicAction.createTopic}" value="Create topic"/> 
```

Controller action:

```
@Model
public class NewTopicAction implements Serializable{
    @Inject
    private TopicManager topicManager;

    private ThesisTopic newTopic;

    public String createTopic(){
        topicManager.createTopic(newTopic);
        return "topics?faces-redirect=true";
    }

    @PostConstruct
    public void init(){
        newTopic = new ThesisTopic();
    }

    @Produces
    @Model
    public ThesisTopic getNewTopic(){
        return newTopic;
    }
} 
```

Why isn't newTopic.supervisor populated with selected supervisor, when newTopicAction.createTopic is invoked? Every other field works as expected, except this one. It may be something about selectOneMenu what i don't understand properly.

# redmine - 将 git commit 消息连接到 redmine 问题

> ID：10932630
> 
> 赞同：4
> 
> 时间：2012-06-07T13:17:57.560
> 
> 标签：redmine, redmine-plugins

如果我提交并编写修复＃12而不是发布12个状态更改来修复，是否可以让redmine拦截提交消息并采取行动，就像在汇编上一样。这种行为的任何插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:59:58.383

不需要插件，它的工作方式与[SVN](https://stackoverflow.com/a/7616280/63733)或[mercurial](https://stackoverflow.com/q/8309830/63733)的[工作](https://stackoverflow.com/a/7292711/63733)方式相同。

但是，为了让 redmine 获取新的提交消息，您要么必须在 redmine 中打开存储库页面，要么安排一个任务定期这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:37:23.470

正如@afarazit 所说，另外，您可能希望在 Redmine 中实时更新问题，而无需手动输入“*存储库*”选项卡以强制刷新。
这可以通过使用这个服务器端*接收后*挂钩来完成：

```
#!/bin/bash

_apikey=YOUR_API_KEY    
_projectid=YOUR_PROJECT_ID

curl -k "http://REDMINE_SERVER_URL/sys/fetch_changesets?key=$_apikey&i
d=$_projectid"& 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T10:29:33.417

Redmine 默认具有此功能。您可以使用*refs*、*references*、*IssueID*来引用和*修复*，*closes*来修复问题。您还可以添加自己的关键字以从 redmine 解析并解决您的问题。

您可以找到有关[文档的更多信息](http://www.redmine.org/projects/redmine/wiki/RedmineSettings#Referencing-issues-in-commit-messages)

# powershell - how can I export the contents of a virtual directory change some paths and then reimport

> ID：10932634
> 
> 赞同：4
> 
> 时间：2012-06-07T13:18:15.630
> 
> 标签：powershell, iis-6, adsi

I'm using IIS6

using powershell I would like to export a specific virtual directory to a file, change the name and some paths and then reimport the data, creating a new virtual directory

It looks like [IISComputer.Export](http://msdn.microsoft.com/en-us/library/ms524506%28v=vs.90%29) would do the job but try as I might I can't get it to work

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T09:44:05.513

这是我找到的解决方案

从这里的链接[MSDN DirectoryEntry.CopyTo](http://msdn.microsoft.com/en-us/library/hz4574y2%28v=vs.100%29.aspx)我发现我可以复制虚拟目录然后手动设置属性

从那里我想出了以下powershell代码，它可以让我克隆一个虚拟目录，然后重新指向它

```
$vd = [ADSI]"IIS://localhost/W3SVC/1/Root/CurrentVd"

$parent = [ADSI]"IIS://localhost/W3SVC/1/Root"

$vd.CopyTo($parent,"NewVd")

Set Application Pool
$vd.AppPoolId = "MyNewAppPool"

Set Virtual Directory
$Vd.Path = "C:\MyNewTargetPath"

$parent.CommitChanges() 
```

# javascript - Javascript RegExp parse URL make hyperlinks ignore img src

> ID：10932638
> 
> 赞同：0
> 
> 时间：2012-06-07T13:18:42.310
> 
> 标签：javascript, regex

I am not very good with Regular Expressions, some times I can figure them out but...

I need to parse text strings (for a chat room project).

So as you would imagine any pasted URLs need to be converted to click-able hyper links.

I use this RegExp for that, cobbled together from examples I have found on the net. It appears to work quite well :

```
/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:~;@'#%&.=\]\[\*\$\!\?\/\,]+/g 
```

Now another part of my project has to insert images in other words :

```
<img src="http://path/to/image" alt="alt" /> 
```

So I need the reg exp to ignore those, and I tried this :

```
/(?!src=")[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:~;@'#%&.=\]\[\*\$\!\?\/\,]+/g 
```

But it doesn't work. Perhaps my expression is faulty or I am going about it the wrong way.

I may just mask out 'src="http' and run my expression then reapply what I masked out.

But before I do that I thought I would see if anyone here has any ideas.

Many thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:51:09.590

```
(?!src=") 
```

是一个否定的**前瞻**，你想要的是一个**后瞻**，这是 javascript 不支持的。

# sql - sql when set default value getdate(), does it set value when run update statement?

> ID：10932646
> 
> 赞同：2
> 
> 时间：2012-06-07T13:19:17.287
> 
> 标签：sql, tsql

I know when you insert a value into db, it set that column value as current datetime, does it apply to it when you run a update statement?

e.g.

table schema:

```
Id, Name, CreatedDate(getdate()) 
```

when i insert into table `id = 1 , name = 'john'` it will set `createdDate = current date`

if i run an update statement

```
update table set name="john2" where id =1 
```

Will it update the `createdDate`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T13:30:02.990

不，DEFAULT CONSTRAINT 仅在 INSERT 时调用，并且仅在 (a) 与 NOT NULL 约束结合或 (b) 使用 DEFAULT VALUES 时调用。对于 UPDATE，SQL Server 根本不会查看您的 DEFAULT CONSTRAINT。目前您需要一个触发器（请参阅[如何在 SQL Server 2008 R2 表中添加“上次更新”列？](https://stackoverflow.com/questions/7349288/how-do-i-add-a-last-updated-column-in-a-sql-server-2008-r2-table)），但是已经有多个请求要内置此功能。

我在博客中介绍了一种诱使 SQL Server 使用时态表执行此操作的方法：

*   [在没有触发器的情况下维护 LastModified](https://sqlblog.org/2021/04/01/lastmodified-without-triggers)

但这充满了警告和限制，实际上只是在忽略其他多个类似的帖子：

*   [系统维护的 LastModifiedDate 列](https://michaeljswart.com/2021/10/a-system-maintained-lastmodifieddate-column/)
*   [使用时间列跟踪行更改](https://www.erikdarlingdata.com/sql-server/tracking-row-changes-with-temporal-columns/)
*   [如何在没有触发器的情况下添加“创建”和“更新”时间戳](https://sqlsunday.com/2021/08/09/add-created-and-updated-timestamps/)
*   [需要一个自动更新的日期时间列](https://stackoverflow.com/a/47487144/61305)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T13:23:25.770

哇-很难理解...

根据线索，我认为没有。

如果您在列中插入一条带有 NULL 的记录，并且该列定义了默认值，则将存储默认值而不是 null。

update 只会更新语句中指定的列。

除非您有一个执行特殊逻辑的触发器 - 在这种情况下，您需要查看触发器代码才能知道答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:24:51.337

如果你的更新语句告诉你用 getfate() 更新一个列，但是如果你只是更新一个名称并且你有一个 createdate 列（它是用 getdate() 插入的），那么这些列不会受到影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-11T17:52:31.833

您可以使用 DEFAULT 约束来实现这一点，就像我在下面的语句中使用 OrderDate 字段一样。

创建表订单（O_Id int NOT NULL，OrderNo int NOT NULL，P_Id int，OrderDate date DEFAULT GETDATE()）

# google-chrome - 如何使用开发者工具面板或网络面板运行 Chromium？

> ID：10932650
> 
> 赞同：0
> 
> 时间：2012-06-07T13:19:25.990
> 
> 标签：google-chrome, google-chrome-devtools, chromium

我从命令行运行 Chromium，我需要总是打开开发者工具面板。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:26:25.673

这有帮助吗？[https://groups.google.com/forum/#!msg/google-chrome-developer-tools/HhwKHUryNaA/ByS8AyEg7LIJ](https://groups.google.com/forum/#!msg/google-chrome-developer-tools/HhwKHUryNaA/ByS8AyEg7LIJ)

# php - 如何在 Wordpress 中使用 PHP 显示自定义信息？

> ID：10932653
> 
> 赞同：0
> 
> 时间：2012-06-07T13:19:33.447
> 
> 标签：php, mysql, wordpress

我目前正在着手我的第一个 Web 项目，如果没有适当的 PHP + Wordpress 经验，我想我可能承担了太多的责任。

我试图通过这个项目实现的是有一个网站，我们有两个不同的用户，一个用户可以通过表单发布自定义帖子类型，而另一个用户可以在该帖子类型的自定义提要中查看它们。我使用 Wordpress 作为 CMS，我尝试使用 Wordpress 和自定义帖子类型来解决这个问题。但我意识到，将 Post Type 放入 Wordpress 循环并用正确的信息显示它仍然需要相当多的 PHP 经验。

有人告诉我，我应该能够绕过 Wordpress，在后端工作并在那里创建所有内容，所以我连接到 MySQL 数据库并为我想要的帖子类型中的信息创建了一些变量。

到目前为止，我有三个文件：

提交的模板文件：

```
$
<form action="http://videsignerweb.no/postform.php" enctype="multipart/form-data" method="post" id="oppdragform">
            <input type="text" id="oppdragtittel" name="tittel" />
            <br>
            <select name="oppdragstype" id="oppdragdropdown">
                <option value="idephoto">Idé til Photoshop</option>
                <option value="idehtml">Idé til HTML/CSS</option>
                <option value="ideword">Idé til Wordpress</option>
                <option value="photohtml">Photoshop til HTML/CSS</option>
                <option value="photoword">Photoshop til Wordpress</option>
                <option value="htmlword">HTML/CSS til Wordpress</option>
            </select>
            <br>
            <input type="radio" name="seo" value="Ja"/>Ja + kr 4000,-
            <br>
             <input type="radio" name="seo" value="Nei"/>Nei
            <br><br>
            <input type="radio" name="java" value="Ja"/>Ja + kr 1500,-
            <br>
             <input type="radio" name="java" value="Nei"/>Nei
            <br>
            <input type="file" name="psdfil" />
            <br>
            <input type="textarea" name="prosjektinfo" value="" />
            <br>
            <input type="date" name="dato" value="" />
            <br>

            <input type="submit" name="submit" value="Last opp ditt oppdrag" />

        </form> 
```

postform.php：

```
 $
 <html>
 <body>
 <?php
 $connect = mysql_connect('videsignerweb.mysql.domeneshop.no', 'videsignerweb', '25zscHxj') or die ("Connection Faliure");
 mysql_select_db("videsignerweb") or die ("Database failure");

 $tittel = $_POST['tittel'];
 $oppdragstype = $_POST['oppdragstype'];
 $seo = $_POST['seo'];
 $java = $_POST['java'];
 $prosjektinfo = $_POST['prosjektinfo'];
 $dato = $_POST['dato'];

 echo $tittel;
 echo $oppdragstype;
 echo $seo;
 echo $java;
 echo $prosjektinfo;
 echo $dato;
 move_uploaded_file($_FILES["psdfil"]["tmp_name"],
 "uploads/" . $_FILES["psdfil"]["name"]);

 $filelocation="uploads/" . $_FILES["psdfil"]["name"];

 $queryreg = mysql_query("INSERT INTO oppdrag VALUES ('', '$tittel', '$oppdragstype', '$seo', '$java', '$prosjektinfo', '$dato', '$filelocation')");

 if ($_FILES["psdfil"]["error"] > 0)
 {
 echo "Error: " . $_FILES["psdfil"]["error"] . "<br />";
 }
 else
 {
 echo "Upload: " . $_FILES["psdfil"]["name"] . "<br />";
 echo "Type: " . $_FILES["psdfil"]["type"] . "<br />";
 echo "Size: " . ($_FILES["psdfil"]["size"] / 1024) . " Kb<br />";
 echo "Stored in: " . $_FILES["psdfil"]["tmp_name"];
 }
 ?>
 </body>
 </html> 
```

以及用于显示帖子类型的模板：

```
 $
 <?php
        $connect = mysql_connect('videsignerweb.mysql.domeneshop.no', 'videsignerweb', '25zscHxj') or die ("Connection Faliure");
 mysql_select_db("videsignerweb") or die ("Database failure");

        $sSQL = "SELECT * FROM oppdrag";

 $rsResult = mysql_query($sSQL);

 while ($row = mysql_fetch_array($rsResult))

 {

 echo ("

 <header> {$row['tittel']}</header>
 <article> <br/>
 {$row['info']}

 <br/>
 {$row['type']}Ü

 </article>
 <footer>{$row['dato']}</footer>

 ");

 }

        ?> 
```

如果有人可以帮助我，我将永远感激不尽，我真的不确定从这里去哪里，而且我很难通过搜索找到正确的信息。

干杯，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:24:19.920

关键声明是这样的：

> 我试图通过这个项目实现的是有一个网站，我们有两个不同的用户，一个用户可以通过表单发布自定义帖子类型，而另一个用户可以在该帖子类型的自定义提要中查看它们。

“用户”是指使用网站管理部分的人，还是将使用网站前端的用户组？

对于与 Wordpress 相关的大多数事情，您根本不需要使用 SQL 语句，而是使用内置的包装函数。

# bash - 如何替换每行上所有出现的字符串？

> ID：10932659
> 
> 赞同：0
> 
> 时间：2012-06-07T13:19:47.410
> 
> 标签：bash, shell, sed

我想在下面的脚本中用“+”替换所有出现的“用户名”，但它只替换第一次出现

```
ls -al | sed 's/username/+/' 
```

这就是 sed 默认的工作方式？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:21:30.977

您需要`g`（全局）修饰符：

```
sed 's/username/+/g' 
```

# php - 需要 php 数组帮助 - 如果当前数组项 = 'last or first item' 然后'做某事'

> ID：10932663
> 
> 赞同：1
> 
> 时间：2012-06-07T13:19:58.707
> 
> 标签：php, arrays

这个脚本需要一点帮助。它正在工作，但我喜欢一种简化它的方法。

目前我有'if($currentPageIndex == 4)'，每次我从projectlist数组中添加或删除一个项目时，我都必须手动更新'4'。我需要以某种方式说'if（$ currentPageIndex ==**数组的最后一项**）'这样我就可以添加/删除项目而不必担心更新数字。

我该怎么办？到目前为止，我已经阅读了各种选项，并且一直在尝试，但没有运气。

此外，如果可能的话，该解决方案是否也可用于 Prev 和 Next 链接？因此，它不是**+4**和**-4**而是分别跳转到第一项和最后一项。

非常感谢任何帮助。

工作演示在这里：[http](http://www.ok-hybrid.com/projects/monkey/) ://www.ok-hybrid.com/projects/monkey/ 代码在这里：

```
<?php

$currentPath = explode('?', $_SERVER['REQUEST_URI']); //make sure we don't count any GET variables!
$currentPath = $currentPath[0]; //grab just the path
$projectlist = array(
        '/projects/monkey/',
        '/projects/tiger/',
        '/projects/parrot/',
        '/projects/banana/',
        '/projects/aeroplane/',
);

if(! in_array($currentPath, $projectlist) ) {
    die('Not a valid page!'); //they didn't access a page in our master list, handle error here.
}

$currentPageIndex = array_search($currentPath, $projectlist);

if($currentPageIndex > 0) { 
    $prevlink = '<a href="'.$projectlist[$currentPageIndex-1].'">Prev</a>';
} else {
    $prevlink = '<a href="'.$projectlist[$currentPageIndex+4].'">Prev</a>';
    }

if($currentPageIndex == 4) { 
    $nextlink = '<a href="'.$projectlist[$currentPageIndex-4].'">Next</a>';
} else {
    $nextlink = '<a href="'.$projectlist[$currentPageIndex+1].'">Next</a>';
}

?>

<ul id="sub-nav">

<li>
<?php
print_r($prevlink);
?>
</li>

<li>
<?php
print_r($nextlink);
?>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:23:47.823

尝试`$projectlist[count($projectlist)-1]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:23:03.993

利用

```
sizeof($projectList) - 1 
```

得到想要的数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T13:23:27.827

使用 获取数组的元素数[`count()`](http://php.net/count)。

```
if ($currentPageIndex == count($projectlist)-1) {
  // do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:33:57.683

```
if( $currentPageIndex === end($projectlist) ) {
    //sup
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T21:46:57.520

我设法使用以下代码和朋友的帮助使其完全正常工作。非常感谢所有的帮助。

似乎在这里使用了各种提到的步骤。使用@Arthur 提到的 'sizeof($projectList) - 1' 来检查链接。

```
<?php 

    $currentPath = explode('?', $_SERVER['REQUEST_URI']); //make sure we don't count any GET variables!
    $currentPath = $currentPath[0]; //grab just the path

    $projectlist = array(

    '/projects/monkey/',
    '/projects/tiger/',
    '/projects/parrot/',
    '/projects/banana/',
    '/projects/aeroplane/',
    '/projects/egg/',

    );

    if(! in_array($currentPath, $projectlist) ) {
        die('Not a valid page!'); //they didn't access a page in our master list, handle error here
    }

    $currentPageIndex = array_search($currentPath, $projectlist);

    //echo $currentPageIndex."<Br />";

    //items in array count
    $projectlist_count = count($projectlist);

    if($currentPageIndex > 0) { //make sure it's not the first page
        $prevlink = '<a href="'.$projectlist[$currentPageIndex-1].'">Prev</a>';
            } else {
        $prevlink = '<a href="'.$projectlist[$projectlist_count-1].'">Prev</a>';
            }

    if($nextlink < sizeof($projectlist)-1 ) { //make sure we're not the last page

    if($currentPageIndex+1 >= $projectlist_count)
    {
    //go back to start of array
        $nextlink = '<a href="'.$projectlist[0].'">Next</a>';
    } else {
        $nextlink = '<a href="'.$projectlist[$currentPageIndex+1].'">Next</a>';
    }
    }

    ?>

    <ul id="sub-nav">

    <li>
    <?php
    print_r($prevlink);
    ?>
    </li>

    <li>
    <?php
    print_r($nextlink);
    ?>
    </li>

    </ul> 
```

# windows-7 - Windows 7 字体管理员权限

> ID：10932664
> 
> 赞同：3
> 
> 时间：2012-06-07T13:20:01.623
> 
> 标签：windows-7, fonts, privileges

在 Windows 7 中，是否可以授予管理员权限以为非管理员用户安装字体？最好不要安装额外的软件。

我不想授予用户完整的管理员权限，但你不能让他们以管理员身份运行某些程序似乎很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:16:55.567

通过授予对适当文件系统和注册表位置的访问权限，可以向 Windows 7 中的非管理员用户授予安装字体的管理员权限。

这在下面的文章中有详细描述：

[http://www.bohack.com/2011/04/allowing-non-administrators-to-install-fonts-in-windows-7/](http://www.bohack.com/2011/04/allowing-non-administrators-to-install-fonts-in-windows-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:58:55.797

在 Windows 7 中，您无法为其授予管理员权限。

但如果你不是管理员，我可以教你如何获得管理员权限。

只需获取具有“密码恢复”功能的 Windows LiveCD 并更改管理员密码即可。（您可以在许多网站上免费获得它）

# c# - 有没有办法修改解决方案中的所有项目？

> ID：10932667
> 
> 赞同：3
> 
> 时间：2012-06-07T13:20:07.253
> 
> 标签：c#, .net, visual-studio-2010

我有一个包含 30 多个项目的解决方案......是否有一种快速简便的方法来管理所有项目的构建修订，而不是编辑每个项目的 AssemblyInfo 或属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:32:21.883

过去，我按照[本文](http://blogs.msdn.com/b/jjameson/archive/2009/04/03/shared-assembly-info-in-visual-studio-projects.aspx)中的建议在解决方案级别创建了一个*SharedAssemblyInfo.cs文件，并从我的每个项目中链接到它。*

要点是您希望将*SharedAssemblyInfo.cs*文件作为链接添加到您的项目中。在 Visual Studio 中，您将选择“添加现有项”，但在对话框中，单击“添加”按钮上的箭头并选择“添加为链接”。

在*SharedAssemblyInfo.cs*中，放置您希望在所有项目中相同的任何程序集属性。文章建议如下：

*   `AssemblyCompany`
*   `AssemblyProduct`
*   `AssemblyCopyright`
*   `AssemblyTrademark`
*   `AssemblyConfiguration`
*   `AssemblyDescription`
*   `CLSCompliant`
*   `ComVisible`
*   `AssemblyVersion`
*   `AssemblyInformationalVersion`

每个项目仍将拥有自己的*AssemblyInfo.cs*文件，以补充它从共享文件接收到的属性：

*   `AssemblyTitle`
*   `AssemblyCulture`
*   `Guid`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:23:55.227

我建议使用 AssemblyInfo 任务，

[http://archive.msdn.microsoft.com/AssemblyInfoTaskvers](http://archive.msdn.microsoft.com/AssemblyInfoTaskvers)

[更新：它是 Microsoft MSBuild 团队的 MSBuild 目标。不需要 Visual Studio 插件，因此即使您直接使用 MSBuild，它也能正常工作。]

您可以使用其目标来修改中央 AssemblyInfo.cs 文件，然后将其链接到所有项目。我的开源项目#SNMP 展示了它是如何使用的，

[https://github.com/lextm/sharpsnmplib](https://github.com/lextm/sharpsnmplib)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:26:49.243

通常这应该只是一个评论，但我想给出这个答案

VS的这个插件是一个真正的救星 [版本控制构建](http://www.codeproject.com/Articles/5851/Versioning-Controlled-Build)

我非常喜欢这个插件，我在 VS 2003 版本中使用它。
请注意并阅读所有文章，安装其他插件时会出现一些问题

虽然公认的答案非常好，但我仍然更喜欢为每个项目提供一个单独的 assemblyinfo.cs，其中包含**FileVersion**和**AssemblyVersion**属性，因为通过这种方式，我可以在有错误修复时单独增加这些值或分发的修订

# asp.net-mvc - 无法在 Visual Studio 2012 上创建 ASP.NET MVC* 项目

> ID：10932668
> 
> 赞同：2
> 
> 时间：2012-06-07T13:20:08.580
> 
> 标签：asp.net-mvc, visual-studio-2012

我刚刚下载并安装了 VS2012 Ultimate RC。当我创建一个新的 ASP.NET MVC 项目时，它拒绝创建它并显示以下错误消息：
“无法打开项目文件'......'。缺少项目子类型。子类型：'{E53F8FEA-此安装不支持 EAE0-44A6-8774-FFD645390401}'。”

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T11:42:27.317

好的，它现在可以工作了。我的vs12安装似乎有问题。维修已经解决了这个问题，现在它工作得很好。感谢你们。

# jquery - 如何使用 jquery 在 html5 画布上绘制 DIV 的内容

> ID：10932670
> 
> 赞同：7
> 
> 时间：2012-06-07T13:20:13.543
> 
> 标签：jquery, html, html5-canvas

假设我有 div 并且在该 div 内我有几个表单控件，如文本框、下拉复选框、单选按钮等。现在我希望当用户单击特定按钮时，div 的内容将绘制在画布上。我在谷歌搜索有一些示例代码或示例，但没有找到。请指导我如何使用 jquery 在 html5 画布上绘制 DIV 的内容，因为它是带有样式表的控件外观。

## 问题已更新

```
<div class="login">
<form method="post" action="www.mysite.com">
    <fieldset>
        <div class="login-fields"><label class="" for="username" id="username-lbl">User Name</label>                    
        <input type="text" size="25" class="validate-username" value="" id="username" name="username"></div>
        <div class="login-fields"><label class="" for="password" id="password-lbl">Password</label>                 
        <input type="password" size="25" class="validate-password" value="" id="password" name="password"></div>
        <button class="button" type="submit">Log in</button>
    </fieldset>
</form>
</div> 
```

假设我有一个像上面这样的表单，我需要通过 jquery 以编程方式在画布上绘制，并且我的表单的外观和感觉将是相同的。

## 更新

```
var domElement = document.getElementById('myElementId');
html2canvas(domElement, {
    onrendered: function (domElementCanvas) {
        var canvas = document.createElement('canvas');
        canvas.getContext('2d').drawImage(domElementCanvas, 0, 0, 100, 100);

        // do something with canvas
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T17:17:50.527

chrome有一个解决方案：[https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#drawWindow()](https://developer.mozilla.org/en/DOM/CanvasRenderingContext2D#drawWindow())

但我认为你需要的是使用 xml + svg; 这是一个例子：http: [//jsfiddle.net/3N69j/](http://jsfiddle.net/3N69j/)

代码 ：

```
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var data = "data:image/svg+xml," +
           "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
             "<foreignObject width='100%' height='100%'>" +
               "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:12px'>" +
                "<ul> <li style='color:red'> hello </li>  <li style='color:green'>thomas</li> </ul> "  +   
               "</div>" +
             "</foreignObject>" +
           "</svg>";

var img = new Image();
img.src = data;
img.onload = function() { ctx.drawImage(img, 0, 0); } 
```

您可以使用 jquery 轻松获取 html 代码（点击时，使用 $(this).html() 并提供 svg 数据

祝你好运

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T17:21:35.953

查看[HTML-2-Canvas](https://html2canvas.hertzen.com)。我已经让它工作得很好。似乎也适用于Android手机。

# ipad - 子目录中的 HTML5 离线功能

> ID：10932674
> 
> 赞同：0
> 
> 时间：2012-06-07T13:20:29.670
> 
> 标签：ipad, html, mobile, offline

我正在尝试设置一个 iPad 应用程序以离线工作。我能够成功地让它工作，但我被告知将应用程序放在多个子目录中。当我这样做并将缓存清单文件更新到所有文件的新目标时，我不断收到一个错误，即该站点无法工作，因为它没有连接到互联网。我尝试了多种路径并查找了不同的想法，但都空手而归。他们是一种让离线模式与子目录内的站点一起工作的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:33:36.493

这不应该有所作为。确保清单中的所有 url 都是相对的，并且始终以以下方式结束清单：

```
NETWORK:
* 
```

此外，请确保您不要忘记将缓存 url 中的任何图像、库等添加到清单中。有时，即使是上限也会有所作为。在 Chrome 中打开开发人员工具的控制台以查看正在缓存的内容以及加载应用缓存的内容。

还要确保主页（在 html-tag 中包含 manifest 属性的页面）上没有 iframe（即like-buttons），它**始终**被缓存。

**小技巧：** 如果你想回退你的主页，请将清单属性放在应用主页上的不可见 iframe 中。这样，您就可以完全控制缓存的内容和不缓存的内容。

# jsp - 检查表达式语言中是否存在参数

> ID：10932677
> 
> 赞同：46
> 
> 时间：2012-06-07T13:20:51.227
> 
> 标签：jsp, parameters, jstl, el

```
<c:if test="${param.username}" >
</c:if> 
```

如何检查 param.username 是否存在？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-07T13:22:32.410

使用`not empty`支票。

```
<c:if test="${not empty param.username}" >
</c:if> 
```

编辑：如果您有表单的参数`?username`（无值），使用起来更安全`${param.username ne null}`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-03-14T10:30:45.660

如果要检查参数是否存在，只需测试它是否不为空，在您的情况下：

```
<c:if test="${param.username != null}"></c:if> 
```

### 更广泛的解释：

如果你想检查：

*   如果 yourParam 存在/不为空：

    `<c:if test="${param.yourParam != null}"></c:if>`

*   如果 yourParam 不存在/为空

    `<c:if test="${param.yourParam == null}"></c:if>`

*   如果 yourParam 不为空（非空字符串且非空）

    `<c:if test="${!empty param.yourParam}"></c:if>`

*   如果 yourParam 为空（空字符串或 null）

    `<c:if test="${empty param.yourParam}"></c:if>`

*   如果 yourParam 评估为“真”

    `<c:if test="${yourParam}"></c:if>`

*   如果 yourParam 评估为“假”（“真”以外的字符串）

    `<c:if test="${!yourParam}"></c:if>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-24T14:46:55.563

如果我可以添加评论...

为了测试请求参数“username”是否在JSP页面“a-jsp.jsp”中不存在，我们可以在页面“a-jsp.jsp”中写一个“if”子句：

```
<c:if test="${empty param['username']>
...
</c:if> 
```

如果请求的 URL 是，我们将遍历那个“if”子句：

`http://server/webapp/a-jsp.jsp`

或者

`http://server/webapp/a-jsp.jsp?username=`

如果请求的 URL 是，我们不会：

`http://server/webapp/a-jsp.jsp?username=foo`

# gwt - SmartGWT 蒙皮

> ID：10932683
> 
> 赞同：0
> 
> 时间：2012-06-07T13:21:30.043
> 
> 标签：gwt, smartgwt, smartclient

有些`SmartGWT components`是由许多小图像组成的。例如，使用图像渲染的 IButton 就是这种情况。

我想调整原件`SmartGWT CSS`以满足我的需要，基本上是*颜色变化*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:04:13.890

这个答案不太准确。。

如果您的员工具有基于图像的皮肤和适当工具（例如 Adob​​e Fireworks）的经验，请从您喜欢的任何皮肤开始。

如果您不这样做，并且您需要更改颜色但不关心旧 IE 中的圆角之类的细节（没有图像是不可能的），请从 Simplicity 开始，或者从为 3 most 提供的 CSS3 渲染模式开始流行的皮肤（从 3.1 开始）：

```
http://blog.isomorphic.com/css3-mode/ 
```

后一种方法（CSS3 模式）比 Simplicity 在视觉上更丰富。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:48:10.543

看起来，为 SmartGWT 应用程序设置皮肤的最佳方式是从`Simplicity`主题开始。

同构团队建议从这个主题开始，因为它使用的图像比其他主题少。

据我所知，一切都应该手工完成（编辑图像和 CSS）。

# extjs - 何时调用 scrollIntoView()

> ID：10932697
> 
> 赞同：1
> 
> 时间：2012-06-07T13:22:13.243
> 
> 标签：extjs, gridpanel

我用谷歌搜索过，搜索过论坛和堆栈交换，但似乎没有什么对我有用。我正在运行 extJS 3.2.1。

基本上我有一个网格面板控件，其中的项目在完成时显示为灰色，但垂直视图窗格只有大约 200 像素，而列表可能会变得非常大，每次我执行 store.reload() 时用户都需要向下滚动

我发现我可以通过调用手动移动列表中的下一项：

grid.getView().getRow(15).scrollIntoView();

我不能使用 selectRow() 因为我启用了复选框而不是行选择。

无论如何，上面的代码效果很好，只是我无法确定调用它的“位置”。我曾尝试捕获 store.load 事件以及 grid.afterrender ，但似乎都不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:45:50.010

如果你去源代码`store.reload();`你可以看到它调用了 load 方法。 [http://docs.sencha.com/ext-js/3-4/source/Store.html#Ext-data-Store-method-reload](http://docs.sencha.com/ext-js/3-4/source/Store.html#Ext-data-Store-method-reload)

所以你真的应该挂钩加载事件。

就像是

```
store.on('load',function(){
    grid.getView().getRow(15).scrollIntoView();

}) 
```

[http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.CellSelectionModel-method-select](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.grid.CellSelectionModel-method-select) 是单元格选择模型等效的顺便说一句（行选择）。

# android - 在 Android 中编辑 EditText 上下文菜单

> ID：10932701
> 
> 赞同：2
> 
> 时间：2012-06-07T13:22:26.317
> 
> 标签：android, contextmenu, android-edittext

有没有办法将自定义案例添加到 Android 中现有的上下文菜单中？我们都有一个在活动`EditText`视图上调用的上下文菜单，一个是“输入类型”，另一个是。我需要在此菜单中添加另一个案例，例如“选项”。老实说，我搜索了有关[Android Developers](http://developer.android.com/guide/topics/ui/menus.html#FloatingContextMenu)的信息，但那里没有运气。他们只写从头开始创建自己的菜单。我不需要像[这个人](https://stackoverflow.com/questions/7967348/is-it-possible-to-add-some-item-in-the-context-menus-of-android-system-menu)那样在系统范围内改变它。我唯一关心的是在我的应用程序的一项活动中更改它，`EditText`确切地说是一个实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:25:55.177

见[https://stackoverflow.com/a/7383161/1351347](https://stackoverflow.com/a/7383161/1351347)

不可能覆盖系统范围的 contextMenu。您可以（如您所知）在这个单个 EditText 上的 longClick 上推送另一个 contextMenu。

# ajax - jquery ajax 不工作

> ID：10932714
> 
> 赞同：0
> 
> 时间：2012-06-07T13:23:03.853
> 
> 标签：ajax, jquery

我有两个文件试图使用 ajax

这是 test.php 文件的代码

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>

<script type="text/javascript">

    var email = $('#email').val();
    $(document).ready(function(){    
        $("#submit").click(function() {
            $.ajax({
                url:"test1.php", 
                success:function(){
                    alert('');
                }
            });
        });
    });

</script>
</head>
<body>
    <form method="post">
        Email:<input type="text" name="email" id="email" />
        <input type="submit" name="submit" value="submit" id="submit" />
    </form>
</body>
</html> 
```

这是 test1.php 文件的代码

```
<?php 
    echo "hi";
    exit;
?> 
```

它不工作我无法在成功功能中获得警报

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:36:48.897

将提交按钮类型更改为仅一个按钮。否则，您将在 ajax 触发之前提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:04.267

尝试在函数`return false`末尾给出 a 。`click`

```
var email = $('#email').val();
$(document).ready(function(){
    $("#submit").click(function() {
        $.ajax({
            url:"",
            success:function(){
                alert('');
            }
        });
        return false;
    });
});​ 
```

这可能行得通！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:33:56.137

在这种情况下，我会在表单上使用提交事件，因为如果您在提交按钮上绑定点击事件，提交事件仍然会被触发。

看这里的例子

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# mysql - 如何查询3个mysql表并返回匹配结果（具有一对多关系）？

> ID：10932726
> 
> 赞同：0
> 
> 时间：2012-06-07T13:23:36.523
> 
> 标签：mysql, database, join

我正在尝试查询数据库以返回一些匹配的记录，但无法以最有效的方式进行操作。我有一个 TUsers 表、一个 TJobsOffered 表和一个 TJobsRequested 表。UserID 是 TUsers 表的主键，并以一对多关系在 Job 表中使用。

最终，我想运行一个查询，该查询根据特定的 UserID 返回所有匹配用户的列表（例如，匹配的用户是在两个表中至少有一个匹配记录的用户，例如，如果 UserA 在 TJobsOffered 中列出了 jobid 999 并且 UserB 有TJobsRequested 中列出的 jobid 999 那么这是一个匹配项）。

为了尝试了解它，我对其进行了很多简化，并尝试根据相关用户的作业标识匹配记录，例如：

```
SELECT DISTINCT TJobsOffered.FUserID FROM TJobsOffered, TJobsRequested
WHERE TJobsOffered.FUserID=TJobsRequested.FUserID AND 
(TJobsRequested.FJobID='12' OR TJobsRequested.FJobID='30') AND
(TJobsOffered.FJobID='86' OR TJobsOffered.FJobID='5') 
```

这似乎工作正常并返回正确的结果，但是当我引入 TUsers 表（以便我可以访问用户信息）时，它开始返回不正确的结果。我不明白为什么下面的查询没有返回与上面列出的结果相同的结果，因为它肯定仍然匹配相同的信息，只是使用不同的连接器（或者上面的一个实际上是多对多和一个低于 2一组一对多的比较）？

```
SELECT DISTINCT TUsers.Fid, TUsers.FName FROM TUsers, TJobsOffered, TJobsRequested
WHERE TUsers.Fid=TJobsRequested.FUserID AND TUsers.Fid=TJobsOffered.FUserID AND
(TJobsRequested.FJobID='12' OR TJobsRequested.FJobID='30') AND
(TJobsOffered.FJobID='86' OR TJobsOffered.FJobID='5') 
```

如果有人能解释我在第二个查询中哪里出了问题，以及你应该如何合并 TUsers，那将不胜感激，因为我无法理解加入。如果您能够通过仅传递用户 ID 向我提供有关如何在一个查询中完成所有这些操作的任何指示，那么这也将不胜感激！:)

非常感谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:30:26.790

试试这个

```
SELECT DISTINCT TJobsOffered.FUserID , TUsers.FName
FROM TJobsOffered
INNER JOIN  TJobsRequested ON TJobsOffered.FUserID=TJobsRequested.FUserID
LEFT JOIN TUsers ON TUsers.Fid=TJobsOffered.FUserID
WHERE  
(TJobsRequested.FJobID (12,30) AND
(TJobsOffered.FJobID IN (86 ,5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:05.213

您需要在 where 子句中添加“AND TJobsOffered.FUserID=TJobsRequested.FUserID”。

# jquery - JqueryUI日历设置最小和最大日期范围动态

> ID：10932727
> 
> 赞同：0
> 
> 时间：2012-06-07T13:23:46.483
> 
> 标签：jquery, jquery-ui

我有一个 Web 应用程序，它返回一组要在图表上显示的 JSON 数据。用户可以通过从 JQUERY 日历控件中选择日期来切换图表。

我需要禁用 JSON 上未返回的日期。有人可以帮助我如何实现这一目标吗？例如，JSON 对象可以包含长达 1.5 年的数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:38:16.490

如果您使用的是 jQuery UI Datepicker，它需要可选的最小/最大日期参数。从[文档](http://jqueryui.com/demos/datepicker/#min-max)中：

使用 minDate 和 maxDate 选项限制可选日期的范围。将开始日期和结束日期设置为实际日期 (new Date(2009, 1 - 1, 26))、从今天开始的数字偏移量 (-20) 或一串句点和单位 ('+1M +10D') . 最后，使用“D”表示天，“W”表示周，“M”表示月，或“Y”表示年。

```
 $( "#datepicker" ).datepicker({ minDate: -20, maxDate: "+1M +10D" }); 
```

因此，您需要从 json 数据中确定最小/最大日期，将它们转换为日期对象，并将它们作为选项传递给日期选择器。

# entity-framework - 如何在不使用实体框架的情况下使用 MVC4 迁移？

> ID：10932731
> 
> 赞同：7
> 
> 时间：2012-06-07T13:23:57.513
> 
> 标签：entity-framework, ef-code-first, data-migration, dapper

如何在不使用实体框架的情况下使用 MVC4 迁移？我真的很想使用数据迁移，但我没有使用实体框架。我正在使用 dapper-dot-net。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T15:28:46.613

是的，您可以在不使用实体框架的情况下使用迁移。所有 Migrations 关心的是它用于管理数据库的元数据，您需要使用一些 EF 的东西来处理它，但是您不需要使用 EF 来实际访问数据库。这篇博文详细描述了这个过程：[http ://weblogs.asp.net/fredriknormen/archive/2012/02/15/using-entity-framework-4-3-database-migration-for-any-project.aspx](http://weblogs.asp.net/fredriknormen/archive/2012/02/15/using-entity-framework-4-3-database-migration-for-any-project.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T22:53:44.093

查看 NuGet 上的 Insight.Database.Schema。它为您提供了许多迁移的魔力，而没有 EF 的麻烦。我将在接下来的几天内更新 github 上的文档。

# markdown - 使用带有降价的 r studio 时结果的最大长度？

> ID：10932741
> 
> 赞同：1
> 
> 时间：2012-06-07T13:24:44.707
> 
> 标签：markdown, google-visualization, rstudio

我正在尝试使用 googleVis 通过 R studio 和 markdown 显示我的结果。我使用 markdown 将默认 Fruits 数据生成到动态图中没有问题，但是当我尝试使用自己的数据时，markdown 拒绝正确附加它。

后

```
print(M, "chart") 
```

运行，我得到

```
## <!-- MotionChart generated in R 2.15.0 by googleVis 0.2.16 package -->
## <!-- Thu Jun 07 09:20:56 2012 -->
## 
## 
## <!-- jsHeader -->
## <script type="text/javascript" src="http://www.google.com/jsapi">
## </script>
## <script type="text/javascript">

.. and so on until

## <!-- divChart -->
##   
## <div id="MotionChartIDa7c4ac2425a"
##   style="width: 600px; height: 500px;">
## </div> 
```

我根本不明白为什么它不会自动附加，而是只显示 R 输出。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:43:26.443

您可能开始使用您的代码块

```
```{r} 
```

你需要用它来启动它

```
```{r results='asis'} 
```

这将告诉它代码块的输出是纯 HTML，应该直接附加到文档中。

# javascript - Facebook登录无限循环

> ID：10932743
> 
> 赞同：0
> 
> 时间：2012-06-07T13:24:50.657
> 
> 标签：javascript, ajax, facebook-graph-api, fbconnect

我的页面上的 Facebook 登录出现问题。首先，我仅使用 FB.Login 进行了尝试，但随后我收到以下消息：“当用户已连接时调用 FB.login()。”

所以我添加了 FB.getLoginStatus 但现在它让我在无限循环中登录。即使我已经登录（进入我的系统）并且没有我点击 FB-Connect 按钮。

在我单击 FB-connect 按钮之前，我如何才能实现不登录？

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/fb_LT/all.js#xfbml=1&appId=198866780209581";
     fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

window.fbAsyncInit = function() {
      FB.init({
         appId      : "198866780209581", // App ID
         status     : true,
         cookie     : true,
         xfbml      : true,
         oauth      : true,
      });   
    var login = false;

 FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      console.log('connected');
      login=true;
      $.ajax({
              type: "POST",
              url: "/?eID=login&modus=facebook&fb-login=1",
              data: $(this).serialize(),
              success: function(msg) {
              console.log("LOGIN");
              window.location.reload();
              }
            })
      var uid = response.authResponse.userID;
      var accessToken = response.authResponse.accessToken;
    }
    else{
      FB.login(function(response) {
       if (response.authResponse) {
       console.log('Welcome!  Fetching your information.... ');
       FB.api('/me', function(response) {
         console.log('Good to see you, ' + response.name + '.');
         if(login===false)
         {
           alert('nicht connected');
         }
       });
       } else {
       console.log('User cancelled login or did not fully authorize.');
       }   
     }, {scope: 'email'});
    }});
// Additional initialization code here
};

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:23:51.190

解决方案是像这样更改点击功能：

$(".fb-login-button").live("点击", function() {

}

我的最终代码如下所示：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fb_LT/all.js#xfbml=1&appId=198866780209581";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
window.fbAsyncInit = function() {
    FB.init({
      appId      : "198866780209581", // App ID
      status     : true,
      cookie     : true,
      xfbml      : true,
      oauth      : true,
    });   
    var login = false;
  $(".fb-login-button").live("click", function() {
FB.getLoginStatus(function(response) {
 alert('hier 1');
    if (response.status === 'connected') {
 alert('connected');
      console.log('connected');
      login=true;
      $.ajax({
              type: "POST",
              url: "/?eID=login&modus=facebook&fb-login=1",
              data: $(this).serialize(),
              success: function(msg) {
              console.log("LOGIN");
              window.location.reload();
              }
            })
      var uid = response.authResponse.userID;
      var accessToken = response.authResponse.accessToken;
    }
    else{
      alert('im else');
      FB.login(function(response) {
       if (response.authResponse) {
       console.log('Welcome!  Fetching your information.... ');
       FB.api('/me', function(response) {
         console.log('Good to see you, ' + response.name + '.');
         if(login===false)
         {
           alert('nicht connected');
         }
       });
       } else {
       console.log('User cancelled login or did not fully authorize.');
       }   
     }, {scope: 'email'});
    }});
});
// Additional initialization code here
}; 
```

# android - Android AsyncTask 错误

> ID：10932745
> 
> 赞同：-3
> 
> 时间：2012-06-07T13:24:56.470
> 
> 标签：android, android-asynctask

我正在尝试创建一个异步任务，但收到一个执行启动活动错误，有人知道导致错误的原因吗？

这是我的代码，我尝试在原始代码中实现异步任务，因为直到现在我才知道异步加载，但我尝试将其添加进去。这是我的代码

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.crypto.Mac;
import javax.crypto.spec.SecretKeySpec;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import co.uk.fantasticmedia.TheEvoStikLeague.PullToRefreshListView.OnRefreshListener;

import com.commonsware.cwac.merge.MergeAdapter;

public class HomeActivity extends ListActivity {

    private MergeAdapter adapter=null;
    private ArrayAdapter<String> arrayAdapter=null;
    private ArrayAdapter<String> arrayAdapter2=null;
    private LazyAdapter arrayAdapter3=null;
    private static final String apiKey = ""; 
    private static final String apiUser = "";
    private static String ChosenLeagueID = null;
    private static String ChosenMethod = null; 
    private static String ChosenTeamId = null; 
    public String fulldata = null;
    public String newsFeedRequest = null;
    public String newsFeedURL = null;
    public String resultsFeedURL = null;
    public String lastMonth = null;
    public String HomeTeam = null;
    public String AwayTeam = null;
    public String HomeScore = null;
    public String AwayScore = null;
    public String Attendance = null;
    public String Division = null;
    public String HomeScorers = null;
    public String AwayScorers = null;

    public String resultsFeedRequest = null;
    public String chosenLeagueId = "40";
    public List<String> newsList = null;
    public List<String> newsList2 = null;
    public List<String> newsList3 = null;
    public List<String> imageList = null;
    public JSONObject resultsDict = null;
    public View resultsView = null;

    public int newsAmount = 0;

    long unixTimeStamp = System.currentTimeMillis() / 1000L;

    //add Time Stamp to URL

    //public String chosenMethod; 

    public class PostTask extends AsyncTask<Void, String, Boolean> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;
         checkPreferences();

            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");
                }

        }

    }

    static String buildHmacSignature(String pKey, String pStringToSign)
    {
      String lSignature = "None";
      try
      {
        Mac lMac = Mac.getInstance("");
        SecretKeySpec lSecret = new SecretKeySpec(pKey.getBytes(), "");
        lMac.init(lSecret);

        byte[] lDigest = lMac.doFinal(pStringToSign.getBytes());
        BigInteger lHash = new BigInteger(1, lDigest);
        lSignature = lHash.toString(16);
        if ((lSignature.length() % 2) != 0) {
          lSignature = "0" + lSignature;
        }
      }
      catch (NoSuchAlgorithmException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }
      catch (InvalidKeyException lEx)
      {
        throw new RuntimeException("Problems calculating HMAC", lEx);
      }

      return lSignature;
    }

    public void checkPreferences(){

        SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
        ChosenMethod = preferences.getString("ChosenMethod", ChosenMethod);
        ChosenLeagueID = preferences.getString("ChosenLeagueId", ChosenLeagueID);
        ChosenTeamId = preferences.getString("ChosenTeamId", ChosenTeamId);

         Log.v("lc", "newsurl" + newsFeedURL);

        Log.v("myapp", "ChosenMethod Home = " + ChosenMethod);
        Log.v("myapp", "ChosenLeagueID Home = " + ChosenLeagueID);
        Log.v("myapp", "ChosenTeamID Home = " + ChosenTeamId);

         if (ChosenMethod.equals("Team")) {
             setContentView(R.layout.homeactteam2);
             newsAmount = 5;
             loadData();

         } else {
             setContentView(R.layout.homeact);
             newsAmount = 10;
             loadDataLeague();
         }

}

    public void loadresults(){

    resultsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/results?&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
    resultsFeedURL = "https://www.website.com/_services/api/" + resultsFeedRequest; 

    String myhash = buildHmacSignature(apiKey, resultsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

        if(jArray.length() < 1){

            loadLastResults();

        }else{

            Log.v("lc", "this month has results");

        }

//      
//         for(int t = 0; t < newsAmount; t++){
//             JSONObject newsTitleDict = jArray.getJSONObject(t);
//             imageList.add(newsTitleDict.getString("image_small"));
//           newsList3.add(newsTitleDict.getString("title"));
//             
//         }
//      
//         for(int t = 0; t < 1; t++){
//             JSONObject newsTitleDict = jArray.getJSONObject(t);
//              
//           newsList.add(newsTitleDict.getString("title"));
//           newsList2.add(newsTitleDict.getString("title"));
//             
//         }
//         

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}   

public void loadLastResults(){

resultsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/results?month=04&team_id=" + ChosenTeamId + "&limit=31&timestamp=" + unixTimeStamp;
resultsFeedURL = "https://www.website.com/_services/api/" + resultsFeedRequest; 

String myhash = buildHmacSignature(apiKey, resultsFeedURL);

Date anotherCurDate = new Date();  
SimpleDateFormat formatter = new SimpleDateFormat("MM");  
String CurMonth = formatter.format(anotherCurDate);  

int Int = Integer.parseInt(CurMonth);

int MonthInt = Int -1;

CurMonth = (String) (String.valueOf(MonthInt));

if (CurMonth.equals("1")){

    lastMonth = "12";

}    
 else {
    if(CurMonth.length() < 2){
        lastMonth = "0" + CurMonth;
    } else {
        lastMonth = CurMonth;
    }
}

Log.v("lc","month= " + CurMonth);
Log.v("lc","LastMonth= " + lastMonth);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(resultsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","resultsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("results");

           for(int t = 0; t < 1; t++){

               resultsDict = jArray.getJSONObject(t);
              HomeTeam = resultsDict.getString("hometeam");
              AwayTeam = resultsDict.getString("awayteam");
              HomeScore = resultsDict.getString("homescore");
              AwayScore = resultsDict.getString("awayscore");
              Attendance = resultsDict.getString("attendance");
              Division = resultsDict.getString("division");

              Log.v("lc","hometeam" + HomeTeam);
              Log.v("lc","awayteam" + AwayTeam);

           }

           resultsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.resultscell,
                     null);

           TextView homeTeam = (TextView) resultsView.findViewById(R.id.HomeTeam);
           homeTeam.setText(HomeTeam);

           TextView awayTeam = (TextView) resultsView.findViewById(R.id.AwayTeam);
           awayTeam.setText(AwayTeam);

           TextView homeScore = (TextView) resultsView.findViewById(R.id.HomeScore);
           homeScore.setText(HomeScore);

           TextView awayScore = (TextView) resultsView.findViewById(R.id.AwayScore);
           awayScore.setText(AwayScore);

           TextView attendance = (TextView) resultsView.findViewById(R.id.Attendence);
           attendance.setText("Att:" + Attendance);

           TextView division = (TextView) resultsView.findViewById(R.id.Division);
           division.setText(Division);

          Log.v("lc", "resultsDict" + resultsDict);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}   

    public void loadnews(){

         newsFeedRequest = "1.0/league-website/" + chosenLeagueId + "/news?timestamp=" + unixTimeStamp;
         newsFeedURL = "https://www.website.com/_services/api/" + newsFeedRequest;  

    String myhash = buildHmacSignature(apiKey, newsFeedURL);

    Log.v("lc" , "resultsurl=" + resultsFeedURL);
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(newsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");
        Log.v("lc","newsAmount= " + newsAmount);

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);
               imageList.add(newsTitleDict.getString("image_small"));
             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

         newsList.add(newsTitleDict.getString("title"));
//           newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void mergeAdapterSetup(){    

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.resultscell, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
     String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

     arrayAdapter3 = new LazyAdapter(this, mStrings, news);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);
            View header2 = inflater.inflate( R.layout.homeheader2, list, false);
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header);
        adapter.addAdapter(arrayAdapter);
        adapter.addView(header2);
        adapter.addView(resultsView);
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);
}

public void loadDataLeague(){

    String myhash = buildHmacSignature(apiKey, newsFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(newsFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);

        newsList = new ArrayList<String>();
        newsList2 = new ArrayList<String>();
        newsList3 = new ArrayList<String>();
        imageList = new ArrayList<String>();

        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");
        Log.v("lc","newsAmount= " + newsAmount);

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);
               imageList.add(newsTitleDict.getString("image_small"));
             newsList3.add(newsTitleDict.getString("title"));

           }

           for(int t = 0; t < 1; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

             newsList.add(newsTitleDict.getString("title"));
             newsList2.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    arrayAdapter = new ArrayAdapter<String>(this, R.layout.single_item, newsList);
    arrayAdapter2 = new ArrayAdapter<String>(this, R.layout.single_item, newsList2);
    //arrayAdapter3 = new ArrayAdapter(this, R.layout.complex_item, newsList3);

     String[] mStrings = (String[]) imageList.toArray(new String[imageList.size()]);
     String[] news = (String[]) newsList3.toArray(new String[newsList3.size()]);

     arrayAdapter3 = new LazyAdapter(this, mStrings, news);

        ListView list = getListView();
           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header3 = inflater.inflate( R.layout.homeheader3, list, false);

    //setListAdapter (arrayAdapter);

        adapter = new MergeAdapter();
        adapter.addView(header3);
        adapter.addAdapter(arrayAdapter3);
        setListAdapter(adapter);

    }   

    public void loadData(){
        loadresults();

        loadnews();
        mergeAdapterSetup();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        PostTask jsontask;
        jsontask = new PostTask();
        jsontask.execute();

        Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
                ChosenMethod = "null";
                SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("ChosenMethod", ChosenMethod);            
                editor.commit();
                previousScreen.putExtra("FullData", fulldata);
                startActivity(previousScreen);

            }
        });

    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if (item.getItemId() == R.id.home) {

        startActivity(new Intent(HomeActivity.this, HomeActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.match) {

        startActivity(new Intent(HomeActivity.this, MatchActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.teams) {

        startActivity(new Intent(HomeActivity.this, TeamsActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.twitter) {

        startActivity(new Intent(HomeActivity.this, TwitterActivity.class));

        return(true);
  }

    if (item.getItemId() == R.id.info) {

        startActivity(new Intent(HomeActivity.this, InfoActivity.class));

        return(true);
  }

    return(super.onOptionsItemSelected(item));

}

} 
```

错误

```
 06-07 13:07:01.680: E/AndroidRuntime(2725): java.lang.RuntimeException: Unable to start activity ComponentInfo{HomeActivity}: java.lang.NullPointerException
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1821)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread.access$1500(ActivityThread.java:132)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.os.Handler.dispatchMessage(Handler.java:99)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.os.Looper.loop(Looper.java:143)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread.main(ActivityThread.java:4263)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at java.lang.reflect.Method.invoke(Method.java:507)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at dalvik.system.NativeStart.main(Native Method)
    06-07 13:07:01.680: E/AndroidRuntime(2725): Caused by: java.lang.NullPointerException
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at co.uk.fantasticmedia.TheEvoStikLeague.HomeActivity.onCreate(HomeActivity.java:637)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
    06-07 13:07:01.680: E/AndroidRuntime(2725):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:28:37.670

将线 `setContentview(your layout id )`视图放在 Oncreate 之前

按钮 backbtn = (Button) findViewById(R.id.backbtn);

因为 backbtn 在那里为空

或者

不确定，但可以尝试......

把这条线

```
Button backbtn = (Button) findViewById(R.id.backbtn);
backbtn.setliner 
```

`after setContentview()`……

就像你的代码一样

```
 if (ChosenMethod.equals("Team")) {
             setContentView(R.layout.homeactteam2);
             newsAmount = 5;
             loadData();

         } else {
             setContentView(R.layout.homeact);
             newsAmount = 10;
             loadDataLeague();
         }

Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), ChooseTeamActivity.class);
                ChosenMethod = "null";
                SharedPreferences preferences = getSharedPreferences("prefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("ChosenMethod", ChosenMethod);            
                editor.commit();
                previousScreen.putExtra("FullData", fulldata);
                startActivity(previousScreen);

            }
        }); 
```

但请确保您在两个 ID 中都有此按钮，否则请进行空检查......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:28:49.840

你不见了`setContemtView(R.layout.main)`

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        //You forgot to put setContentView here  <<<<<<<<<<<<<<

        PostTask jsontask;
        jsontask = new PostTask();
        jsontask.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:30:04.907

加入 `setContentView(R.layout.main)` _

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    setContentView(R.layout.main) 
```

这应该工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T07:00:11.267

看到你的第 637 行`previousScreen.putExtra("FullData", fulldata);`，你有一个 NPE 很可能是因为`previousScreen`n...等等。您确定您的崩溃日志与您粘贴的代码匹配吗？看起来不像。

附近是：

```
Button backbtn = (Button) findViewById(R.id.backbtn); 
```

检查引用是否正确，`backbtn`然后设置其`onClickListener`.

# php - 在 PHP 中将数组中的所有项实例化为类的对象

> ID：10932751
> 
> 赞同：0
> 
> 时间：2012-06-07T13:25:24.023
> 
> 标签：php, object, instantiation

我有一个变量数组，它们传递给类的构造函数。我想将其转换为特定类的对象数组。

*最好*的方法是什么？

例如

```
class Foo { public function __construct($a) {$this->a=$a;} }
print_r(mass_instantiate(array(1, 2, 3), 'Foo'));

// gives:

Array
(
    [0] => Foo Object
        (
            [a] => 1
        )

    [1] => Foo Object
        (
            [a] => 2
        )

    [2] => Foo Object
        (
            [a] => 3
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:33:30.207

使用数组遍历：

```
$arr = array(1,2,3,4,5,6,7,8,9,10);
array_walk($arr, 'init_obj');

function init_obj(&$item1, $key){
    $item1 = new Foo($item1);
}
print_r($arr); 
```

这将为您提供所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:25:25.503

这是我目前正在使用的。它的限制是你只能传递 1 个参数

```
/**
 * Instantiate all items in an array
 * @param  array $array of $classname::__construct()'s 1st parameter
 * @param  string $classname to instantiate
 * @return array
 */
function mass_instantiate($array, $classname)
{
    return array_map(function($a) use ($classname) {
        return new $classname($a);
    }, $array);
} 
```

# javascript - 检查窗口打开

> ID：10932758
> 
> 赞同：1
> 
> 时间：2012-06-07T13:25:37.403
> 
> 标签：javascript

```
var windowUrl = "";
var windowName = "mywin";
var w = window.open(windowUrl, windowName, windowSize);
w.document.write(html);
w.document.close(); 
```

这与 onclick 有关。如果窗口存在，我不想写或关闭甚至打开（也许是重新聚焦）。我找到了一些例子，但它们似乎没有“工作”（或者做我认为我需要的事情。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:29:38.450

尝试以下操作：

```
<script type="text/javascript">
function loadUniquePage(page) 
{
    if (opener && !opener.closed) {
        opener.focus();
    } else {
        var myWin = window.open(page,'','width=800,height=600');
        opener = myWin;
    }
}
</script> 
```

也看看这个问题 - [JavaScript window.open only if the window is not already exist](https://stackoverflow.com/questions/528671/javascript-window-open-only-if-the-window-does-not-already-exist)

还可以查看@Aram Kocharyan 提供的链接：
[https ://developer.mozilla.org/en/DOM/window.closed](https://developer.mozilla.org/en/DOM/window.closed)

# jquery - 单击后禁用提交按钮并在几秒钟后再次启用它

> ID：10932766
> 
> 赞同：23
> 
> 时间：2012-06-07T13:25:56.233
> 
> 标签：jquery, ajax, forms

我在提交表单时使用 jquery $.post。我想在单击按钮后将其禁用 5 秒钟，以避免多次提交表单。

这是我现在所做的：

```
$('#btn').click(function(){
    $.post(base_url + 'folder/controller/function',$('#formID').serialize(),function(data){
        $('#message').slideDown().html('<span>'+data+'</span>');
    });
}); 
```

我以前用过fadeIn和fadeOut，但是当我快速点击按钮测试它时它仍然不起作用。我应该怎么做才能实现我想要发生的事情？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-07T13:30:58.257

你可以像这样做你想做的事：

```
var fewSeconds = 5;
$('#btn').click(function(){
    // Ajax request
    var btn = $(this);
    btn.prop('disabled', true);
    setTimeout(function(){
        btn.prop('disabled', false);
    }, fewSeconds*1000);
}); 
```

`.complete()`或者您可以使用ajax 收到响应后正在执行的jQuery方法：

```
$('#btn').click(function(){
    var btn = $(this);
    $.post(/*...*/).complete(function(){
        btn.prop('disabled', false);
    });
    btn.prop('disabled', true);

}); 
```

**编辑：** 这是一个服务器端响应延迟为 3 秒[的示例](http://jsfiddle.net/UDdaf/435/)

* * *

### 编辑

因为即使答案是 8 岁，但仍然受到关注并且 jQuery 越来越不受欢迎，我认为值得添加**没有 jQuery的示例**

```
const fewSeconds = 3

document.querySelector('#btn').addEventListener('click', (e) => {
    e.target.disabled = true
  setTimeout(() => {
   e.target.disabled = false
  }, fewSeconds * 1000)
})
```

```
<input type='button' id="btn" value="click me" />
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-02T14:10:27.540

只需将其放在提交按钮所在页面的 JS 中即可

```
<script type="text/javascript">
  $(document).ready(function(){
    $("input[type='submit']").attr("disabled", false);
    $("form").submit(function(){
      $("input[type='submit']").attr("disabled", true).val("Please wait...");
      return true;
    })
  })
</script> 
```

[代码源](https://recalll.co/app/?q=php%20-%20ZF2%20preventing%20multiple%20form%20submission%20-%20Stack%20Overflow)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:34:39.243

看看[这里](http://api.jquery.com/jQuery.post/)的 .success 函数，这就是你所需要的。

所以你要做的是禁用点击按钮

```
$('#btn').click(function(){
    $('#btn').attr('disabled', true);
    $.post(base_url + 'folder/controller/function', $('#formID').serialize(), function(data) {
        // code on completion here
        })
        .success(function() { 
           $('#btn').attr('disabled', false);
        })
    });
}); 
```

这种方式更好，因为如果您的请求需要超过 5 秒才能返回，会发生什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-10T14:37:58.970

如果表单中有多个提交按钮并且您想要服务器端的按钮名称，则扩展@Teneff 答案。

```
<script type="text/javascript">
var fewSeconds = 5;
$('button').click(function(){
    var btn = $(this);
    var text = btn.text();
    setTimeout(function(){
        btn.prop('disabled', true);
        btn.text("Wait...");
    }, 10);
    setTimeout(function(){
        btn.prop('disabled', false);
        btn.text( text);
    }, fewSeconds*1000);
});
<script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-03T23:59:27.490

**采用任何形式的按钮并将其值累积到变量中。将值替换为“请稍候...”，并在 5 秒后将先前保存的变量传回并禁用为 false。**

```
 $('input[type=submit], input[type=button]').click(function(){
    var btn = $(this);
    var textd = btn.attr("value");
    btn.prop('disabled', true);
    btn.attr('value', 'Please wait...');
    setTimeout(function(){
    btn.prop('disabled', false);
    btn.attr('value', textd);
    }, fewSeconds*1000);
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T13:36:17.933

```
 $('#btn').live('click', function () {
            $(this).prop('disabled', true).delay(800).prop('disabled', false);
        }); 
```

//或者

```
 $('#btn').live('click', function () {
            var obj = $(this);
            obj.prop('disabled', true);
            $.post(base_url + 'folder/controller/function', $('#formID').serialize(), function (data) {
                $('#message').slideDown().html('<span>' + data + '</span>');
                obj.prop('disabled', false);
            });
        }); 
```

# sql - VBA 等待 DoCmd.RunSQL 或更好的查询 - Ms Access

> ID：10932780
> 
> 赞同：1
> 
> 时间：2012-06-07T13:26:35.800
> 
> 标签：sql, ms-access, vba

我有一个查询，它使用一组表（存储为字符串数组）来循环我的表并执行一组删除/更新查询。除了表名之外，查询是相同的，因此使用循环来迭代使用表名作为变量。

问题是，我的删除查询锁定了表，之后更新查询运行得太快了；我收到“数据库已锁定”错误。

我需要两件事之一：

1.  一种告诉 VBA“等待上一个命令”的方法或
2.  一种将这些查询连接成一个（或两个）查询的方法：一个用于删除数据库行，另一个用于导入新行。有了这个，我可以从标准访问查询中运行查询（应该分配适当的时间，完成查询等）

唯一的问题是存在父子关系，因此父表必须在其子表之前更新（目前通过数组排序完成）。

这是（有时）产生“数据库锁定/正在使用”消息的当前代码：

```
For i = 0 To UBound(tables)
    'Delete all data first
    sql = "DELETE * FROM " & tables(i)
    DoCmd.RunSQL sql
    'Update all data second
    sql = "INSERT INTO " & tables(i) & " IN """ & toDB & """ SELECT " & tables(i) & " .* FROM " & tables(i) & " IN """ & fromDB & """;"
    DoCmd.RunSQL sql
Next 
```

应该澄清：查询`fromDB`从相同的表中获取一个后端的 ( ) 行并将其推送到另一个后端的 ( `toDB`) 行

编辑：在回答有关的问题时`INSERT INTO`，我的问题是如果我向 中添加字段`toDB`，如果我覆盖，它将删除它们。我必须使用这种后门方法的原因是因为数据库仍在开发中，但也与选择表一起使用。每天都会进行更新和功能改进。我也不能使用简单的拆分后端，因为访问数据库的另一台计算机并不总是在网络上（当它返回网络时我们必须手动同步它），所以我在一个后端工作，它在另一个后端工作，相同（ish，减去我的架构更新）后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:55:19.767

您可以使用 ADO 而不是 DoCmd.RunSQL 来同步执行您的 SQL。

```
 Dim cmd As ADODB.Command
 Dim cnn As New ADODB.Connection

 Set cnn = CurrentProject.Connection

 For i = 0 To UBound(tables)
     Set cmd = New ADODB.Command
     With cmd

        .CommandType = adCmdText
         .ActiveConnection = cnn
        .CommandText = "DELETE * FROM " & tables(i)
        .Execute
      End With

     Set cmd = New ADODB.Command
     With cmd

        .CommandType = adCmdText
         .ActiveConnection = cnn
        .CommandText = "INSERT INTO " & tables(i) & " IN """ & toDB & """ SELECT " & tables(i) & " .* FROM " & tables(i) & " IN """ & fromDB & """;"
        .Execute
      End With

Next 
```

您还可以添加`cnn.BeginTrans`和`cnn.CommitTrans`使这两个语句成为原子的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-14T19:27:31.027

尝试这样的事情（注意我已经评论了你的`DoCmd.RunSQL`。我改变了它`db.Execute`：

```
Sub DeleteInsertData(tables() As String, toDB As String, fromDB As String)

    Dim db As DAO.Database
    Dim i As Integer
    Dim SQL As String

    Set db = CurrentDb()
    For i = 0 To UBound(tables)
        'Delete all data first
        SQL = "DELETE * FROM " & tables(i)
        db.Execute SQL, dbFailOnError
        'DoCmd.RunSQL SQL
        'Update all data second
        SQL = "INSERT INTO " & tables(i) & " IN """ & toDB & """ SELECT " & tables(i) & " .* FROM " & tables(i) & " IN """ & fromDB & """;"
        db.Execute SQL, dbFailOnError
        'DoCmd.RunSQL SQL
    Next
    Set db = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:05:27.140

我不是专家，但我认为您不需要 DELETE 部分。SELECT INTO 是制作表格的语法。如果表已存在，则将其覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:16:51.907

如果我需要等待某事，我倾向于使用`DoEvents`允许 Windows 处理已暂停的任何其他操作。
来自帮助：“产生执行，以便操作系统可以处理其他事件。”

发现这个：
`.BeginTrans`然后
`.CommitTrans dbForceOSFlush`
作为一种在继续之前强制写入更新的方法

# xcode - 在 XCode 中：如何创建一个带有图标的主页，这些图标指向不同的页面

> ID：10932781
> 
> 赞同：0
> 
> 时间：2012-06-07T13:26:36.373
> 
> 标签：xcode

好的，我是 xcode 的新手。我怎么会...

- 创建一个几秒钟后的打开页面（带有我的徽标的第一页）

- 创建带有大约 4 个图标的主页，这将导致不同的页面

- 创建链接到其他页面的表格视图列表

-另外，当使用“表格视图”时，我如何编辑文字，我尝试双击。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:30:29.637

对此没有简短的回答。如果我是你，我会阅读文档并从那里采取婴儿步骤。

[https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/00-About_the_iOS_Application_Development_Workflow/introduction.html](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/00-About_the_iOS_Application_Development_Workflow/introduction.html)

此外，当您准备好时，请查看苹果示例代码库。

# c# - Active Directory 和多个 DC 的复制问题

> ID：10932787
> 
> 赞同：1
> 
> 时间：2012-06-07T13:27:02.303
> 
> 标签：c#, active-directory, ldap, replication

我们在使用活动目录和移动/重命名 OU 时遇到问题。这仅在我们在两个域控制器之间进行复制时发生。我们得到的例外是：

> System.ServiceModel.FaultException：服务器上没有这样的对象。（来自 HRESULT 的异常：0x80072030）

当我们尝试在活动目录中移动和重命名 OU 时，我们会收到此错误消息的变体。这是有问题的代码：

```
PrincipalContext context = GetPrincipalContext();

using (UserPrincipal principal = UserPrincipal.FindByIdentity(context, IdentityType.Guid, id.ToString()))
{
    if (principal == null)
    {
        throw new InvalidOperationException();
    }

    string oldEmail = principal.EmailAddress;

    principal.EmailAddress = newEmail;
    principal.Save();

    DirectoryEntry entry = principal.GetUnderlyingObject() as DirectoryEntry;
    DirectoryEntry targetDirectoryEntry = null;
    string target = null;

    // Access the underlying DirectoryEntry to rename it:
    try
    {
        if (entry == null)
        {
            throw new InvalidOperationException();
        }

        entry.RefreshCache();
        entry.Rename(string.Format("CN={0}", newEmail));

        // Move the DirectoryEntry to the correct location.
        target = BuildOrganizationalUnitName(newEmail);

        targetDirectoryEntry = FindDirectoryEntry(target);
        if (targetDirectoryEntry == null)
        {
            throw new InvalidOperationException();
        }
        entry.MoveTo(targetDirectoryEntry);
        entry.CommitChanges();
    }
    catch (Exception e)
    {
        // do some logging
    }
    finally
    {
        if (entry != null)
        {
            entry.Dispose();
        }

        if (targetDirectoryEntry != null)
        {
            targetDirectoryEntry.Dispose();
        }
    }
} 
```

所以我有两个问题：

1.  上面试图移动和重命名 OU 的代码有什么问题吗？
2.  如果没有，有什么方法可以确保两个 DC 在移动/重命名后保持同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:58:49.917

您可能应该在尝试移动它之前提交对重命名的更改。

```
entry.Rename(string.Format("CN={0}", newEmail));
entry.CommitChanges();  // add this line 
```

# xcode4 - 在 Xcode 中隐藏所有类实现 (.m) 文件

> ID：10932788
> 
> 赞同：1
> 
> 时间：2012-06-07T13:27:10.090
> 
> 标签：xcode4, project-navigator

有没有办法在 Xcode 工作区的项目导航器中隐藏所有 .m 文件？我总是可以通过它们的标题找到它们，所以我不想在项目导航器中同时查看标题和实现。

# c# - 策略事件触发 OnUserPreferenceChanged 挂起

> ID：10932789
> 
> 赞同：0
> 
> 时间：2012-06-07T13:27:13.520
> 
> 标签：c#, .net, freeze

我们正在经历`OnUserPreferenceChanged`另一篇文章中广泛记录的可怕挂起。当我们查看参数的`Category`属性时，`UserPreferenceChangingEventArgs`它的值`9`对应于枚举的`Policy`成员：`UserPreferenceCategory`

策略 - 指示用户对策略设置的偏好，例如用户权限和访问级别。

什么会触发这个事件？

# c# - C#：如果数据网格单元格值为数字，则启用按钮

> ID：10932795
> 
> 赞同：0
> 
> 时间：2012-06-07T13:27:46.810
> 
> 标签：c#, visual-studio-2010, datagridview

这是 Microsoft 网站上仅在数据网格中输入数字的功能，它工作正常。

如果第一行的第一个单元格值是数字，我想启用按钮？？？我怎样才能做到这一点？？

```
 private void dataGridView1_CellValidating(object sender,
    DataGridViewCellValidatingEventArgs e)
        {
            ThermalDatGrid.Rows[e.RowIndex].ErrorText = "";
            int newInteger;

            // Don't try to validate the 'new row' until finished 
            // editing since there
            // is not any point in validating its initial value.
            if (ThermalDatGrid.Rows[e.RowIndex].IsNewRow) {
                return;
            }
            if (!int.TryParse(e.FormattedValue.ToString(),
                out newInteger) || newInteger < 0)
            {
                e.Cancel = true;
                ThermalDatGrid.Rows[e.RowIndex].ErrorText = "Only Numerical and Non Negative Values";
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:32:11.750

尝试：

```
if (!int.TryParse(e.FormattedValue.ToString(),
             out newInteger) || newInteger < 0)
{
   e.Cancel = true;
   ThermalDatGrid.Rows[e.RowIndex].ErrorText = "Only Numerical and Non Negative Values";
}
else
{
   yourButton.Enabled=true;
} 
```

# jquery - 即返回数据时声明jquery ajax为空

> ID：10932797
> 
> 赞同：0
> 
> 时间：2012-06-07T13:27:50.797
> 
> 标签：jquery, json, internet-explorer

我知道我很愚蠢或其他什么，但对于我的生活，我无法让这个功能在 IE7+ 中工作，在所有其他非 IE 浏览器中工作：

/inbox/get_auth_replies（返回 JSON）：

```
{"default_message":"Thank you, we have already recieved your request. A member of the team will contact you shortly.","repeated_message":"Thank you for contacting us. A member of the team will contact you shortly."} 
```

jQuery：

```
var $keyword_id = 123;
$.post('/inbox/get_auto_replies', {keyword_id: $keyword_id}, function(resp) {
    console.log(resp.default_message);  
    $('#inbox_default_message').val(resp.default_message);
    $('#inbox_repeat_message').val(resp.repeated_message);
}, 'json'); 
```

在 IE 报告中：

SCRIPT5007：无法获取属性“default_message”的值：对象为空或未定义。

我可以看到它正在返回数据，但只是看不到/解析它？

我已经查看了 SO 上的所有内容，但似乎没有任何帮助。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:41:40.807

1.  更改`$.post`并`$.ajax`使用错误回调并记录错误。

2.  当表明它是一个 jquery dom 元素时，我建议在变量名之前更改`var $keyword_id = 123;`为`var keyword_id = 123;`Use`$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:35:09.043

您是否尝试过使用`jQuery.getJSON`？与 .post 相同的结构（减去 'json' 参数）。
然后可以循环遍历这些项目以尝试解决并警告/控制台记录它们吗？
[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这可能是无法在 IE7 中解析 JSON 的情况，它在 IE9 中是否有效（如果您可以尝试的话）。我知道您提到了 IE7+，但是您尝试过哪个？我认为从 IE8 开始就有原生 JSON 解析。

# assembly - 手臂装配中的分支

> ID：10932798
> 
> 赞同：3
> 
> 时间：2012-06-07T13:27:57.080
> 
> 标签：assembly, arm

我正在使用 GNU ARM 工具链（arm-elf-gcc）。我有一个程序集文件和一个调用程序集文件中定义的全局方法的 c 文件。我可以从 c 中成功调用单个组装方法，但我不知道如何调用本身调用另一个组装方法的组装方法。我希望这两种汇编方法都可以从 c 调用并在同一个文件中。

这是两个文件。当我运行程序时，它永远不会返回，所以我知道分支存在问题。

**数学库**

```
@ ARM Assembler Library for absolute value

    .align 2                    @ Align to word boundary
    .arm                        @ This is ARM code
    .global asm_abs             @ This makes it a real symbol
    .global asm_two_abs         @ This makes it a real symbol

@ ABS Func. Compiler just does "rsblt   r0, r0, #0" but this is more fun.
    asm_abs:                        @ Start of function definition
        mov     r2, #1              @ Set the least bit high in r2
        mov     r2, r2, lsl#31      @ Shift that bit all the way to the sign slot
        orr     r2, r2, r0          @ XOR with input (r0) to set ensure negative
        cmp     r2, r0              @ compare a for-sure neg input with input
        bne     asm_abs_ret         @ if not equal, input was pos, so return
        sub     r0, r0, r0, lsl#1   @ else set input = input - (2*input)
    asm_abs_ret:
        mov     pc, lr              @ Set program counter to lr (was set by caller)

    asm_two_abs:                        @ Start of function definition
        bl      asm_abs                 @ Should set r0 = abs(r0)
        mov     r2, r0                  @ set r2 = r0
        mov     r0, r1                  @ set r0 = r1
        bl      asm_abs                 @ Should set r0 = abs(r0)
        add     r0, r0, r2              @ set r0 = r0 + r2  
        mov     pc, lr                  @ Set program counter to lr (was set by caller) 
```

**程序.c**

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    extern int asm_abs(int a);
    extern int asm_two_abs(int a, int b);

    int m = atoi(argv[1]);
    int n = atoi(argv[2]);
    int r = asm_two_abs(m, n); 

    printf("%d\n", r);

    return 0;
} 
```

**编辑**

这是我最后想到的

```
@ ARM Assembler Library for absolute value

    .align 2                    @ Align to word boundary
    .arm                        @ This is ARM code
    .global asm_abs             @ This makes it a real symbol
    .global asm_mod             @ This makes it a real symbol

@ ABS Func. Compiler just does "rsblt   r0, r0, #0" but this is more fun.
@int asm_abs(int a)

asm_abs:                        @ start of function definition
    mov     r2, #1              @ set the least bit high in r2
    mov     r2, r2, lsl#31      @ shift that bit all the way to the sign slot
    orr     r2, r2, r0          @ XOR with input a (r0) to set ensure negative
    cmp     r2, r0              @ compare a for-sure neg input with input a
    bne     asm_abs_ret         @ if not equal, input was pos, so return
    sub     r0, r0, r0, lsl#1   @ else set a = a - (2*a)
asm_abs_ret:
    mov     pc, lr              @ set program counter to lr (was set by caller)

@ Take two numbers, and return abs(a) + abs(b)
@ int asm_two_abs(int a, int b)

asm_two_abs:                        @ start of function definition
    stmfd   sp!, {r4-r6}        @ push the non-scratch registers we'll use on the stack
    mov     r4, lr              @ store link register in r4
    mov     r6, r1              @ store second argument b in r6
    bl      asm_abs             @ set a (r0) = abs(a)
    mov     r5, r0              @ store abs(a) in r5
    mov     r0, r6              @ set r0 = b
    bl      asm_abs             @ should set b = abs(b)
    add     r0, r0, r5          @ set r0 = abs(b) + abs(a)  
    mov     lr, r4              @ restore link register
    ldmfd   sp!, {r4-r6}        @ restore non-scratch registers we used
    mov     pc, lr              @ set program counter to lr (was set by caller) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T13:58:23.070

您没有保留链接寄存器。

bl 跳转到一个地址并将链接寄存器 r14 设置为返回地址

```
bl hello
asdf <- lr points here

hello:
  push {lr}
  bl there
  pop {lr}
  bx lr

there:
  stuff
  bx lr 
```

由于 hello 调用了另一个函数，它需要保存链接寄存器以知道如何返回给调用它的人。没有，因为它不会对其他任何人 bl（不修改 lr）。

# forms - symfony 管理生成器表单

> ID：10932803
> 
> 赞同：0
> 
> 时间：2012-06-07T13:28:07.773
> 
> 标签：forms, symfony1

我使用 symfony 管理生成器来创建一个很长的表单。

这个表格太长了，以至于用户犹豫要不要开始填写。

我需要做一些小步骤填写： 示例： 第一种形式：步骤 1：组织第二种形式：第 2 步：姓名和职业 第三种形式：第 3 步：解决方案

....第十式第10步：备忘录

每个步骤都有一个提交按钮来保存表单的另一部分/部分。

你有什么想法如何实现吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:34:11.283

我将创建 10 个不同的表单（和控制器中的操作），当每个部分完成（并验证）时，重定向到表单控制器操作的下一部分。

# optimization - 为什么限制使这个查询更快

> ID：10932807
> 
> 赞同：0
> 
> 时间：2012-06-07T13:28:16.330
> 
> 标签：optimization, limit

我在这里问的另一个问题引发了另一个问题。我有这个查询

```
SELECT `Qty`, `Invt`, `ClassNr`, `SubPartCode`, `Description`, `DesignCode`, `Measure`, `Remark`, `PartMnem`
FROM (`loodvrij_receptuur` lr)
JOIN `loodvrij_artikel` la ON `la`.`PartCode` = `lr`.`SubPartCode`
WHERE `lr`.`PartCode` =  'M2430A'
ORDER BY `SubPartCode`, `Qty` desc 
```

我遇到的问题是它在 phpmyadmin 中的执行速度比 CodeIgniter 快。我发现它与 phpmyadmin 自动添加有关`LIMIT 30`

但我想知道的是，查询只产生 27 个结果。如何`LIMIT 30`使查询更快？我可以理解返回 30 或更多结果的查询可以更快地使用`LIMIT 30`，但是当您添加时，少于 30 个结果的查询如何变得更快`LIMIT 30`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:35:03.810

我认为您假设限制 30 仅在查询结束时起作用。如果我让你查看电话簿中所有姓氏以字母 T 开头并住在纽约的人，你必须拿出 50,000 个名字，然后看看哪些人在纽约。如果我告诉你我只需要 30 个，你就不必拿出 50,000 个名字，你可以看看纽约的人，然后选择前 30 个名字以 T 开头的人。

SQL 查询通常会以最有效的方式解决，因此通过添加 LIMIT 30，引擎盖下的内容将发生变化，从而使您的查询执行得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:39:42.377

问题不是查询返回多少结果，而是查询必须查看多少项。使用 LIMIT 30，您要求的是在获得前 30 个结果后停止运行。

如果你不限制结果，sql 仍然会搜索，直到它到达基数的末尾。所以即使你得到的结果少于 30 个，它也必须更加努力。

我不知道我是否说清楚了，对不起我糟糕的英语。

# android - 如何在 Android 中擦除 Activity 堆栈？

> ID：10932809
> 
> 赞同：1
> 
> 时间：2012-06-07T13:28:22.097
> 
> 标签：android, android-activity, stack, erase

我正在构建一个披萨订购应用程序。当用户将商品添加到他的购物车时，他可以选择转到商品类别并浏览/添加新商品。我想做的是：

主屏幕 > 类别列表（第一次出现）> 该类别中的比萨 > 比萨详情 > 购物车 > 类别列表（第二次出现）..

我需要擦除 Activity 堆栈，以便在将商品添加到购物车后，如果用户触摸后退按钮，他/她应该返回 CategoryList（第一次出现）。必须删除“该类别中的比萨 > 比萨详情 > 购物车”。如果他/她再次触摸，他/她应该在主屏幕。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:32:14.703

您可以尝试使用 `intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`
或
`intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`

查看
[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP推送最新活动](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

因此，您可以清除新活动下的活动堆栈。

此外，您可以尝试覆盖后退事件：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

另请参阅 [Android: Clear Activity Stack](https://stackoverflow.com/questions/7075349/android-clear-activity-stack) 或 [How to clear the Android Stack of Activity？](https://stackoverflow.com/questions/4190429/how-to-clear-the-android-stack-of-activities)

# sencha-touch - Sencha Touch 2 Carousel：开始/结束页面的锁定滑动

> ID：10932810
> 
> 赞同：1
> 
> 时间：2012-06-07T13:28:27.390
> 
> 标签：sencha-touch, sencha-touch-2, carousel, swipe

我希望 Carousel 在页面的开头和结尾停止滑动。我的意思
是防止**结束**页面**向右****滑动**，开始页面**向左****滑动****：**

 ******![旋转木马](../Images/d1a28f679d859e5e34be314a800b3a2b.png)

是否有任何配置或其他方式来实现它？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:04:58.943

默认情况下，ST2 的[`carousel`](http://docs.sencha.com/touch/2-0/#!/api/Ext.carousel.Carousel)组件具有此配置。因此，*您无需*付出任何额外的努力来实现这一目标。

查看[`this`](http://docs.sencha.com/touch/2-0/#!/api/Ext.carousel.Carousel)Sencha 网站上的示例。当您到达最后一个项目时，它会阻止向右滑动，当您到达第一个项目时，它将阻止向左滑动。

```
Ext.create('Ext.Carousel', {
    fullscreen: true,

    defaults: {
        styleHtmlContent: true
    },

    items: [
        {
            html : 'Item 1',
            style: 'background-color: #5E99CC'
        },
        {
            html : 'Item 2',
            style: 'background-color: #759E60'
        },
        {
            html : 'Item 3'
        }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T09:26:30.717

您可以创建自己的轮播然后覆盖 onDrag 事件下面是代码形式 Ext.carousel.Carousel

```
Ext.define('Ext.carousel.Custom', {
    extend: 'Ext.carousel.Carousel',

    onDrag: function(e) {
        if (!this.isDragging) {
            return;
        }

        var startOffset = this.dragStartOffset,
            direction = this.getDirection(),
            delta = direction === 'horizontal' ? e.deltaX : e.deltaY,
            lastOffset = this.offset,
            flickStartTime = this.flickStartTime,
            dragDirection = this.dragDirection,
            now = Ext.Date.now(),
            currentActiveIndex = this.getActiveIndex(),
            maxIndex = this.getMaxItemIndex(),
            lastDragDirection = dragDirection,
            offset;

        if ((currentActiveIndex === 0 && delta > 0) || (currentActiveIndex === maxIndex && delta < 0)) {
            delta *= 0.5;
        }

        offset = startOffset + delta;

        if (offset > lastOffset) {
            dragDirection = 1;
        }
        else if (offset < lastOffset) {
            dragDirection = -1;
        }

        if (dragDirection !== lastDragDirection || (now - flickStartTime) > 300) {
            this.flickStartOffset = lastOffset;
            this.flickStartTime = now;
        }

        this.dragDirection = dragDirection;

        // now that we have the dragDirection, we should use that to check if there
        // is an item to drag to
        if ((dragDirection == 1 && currentActiveIndex == 0) || (dragDirection == -1 && currentActiveIndex == maxIndex)) {
            return;
        }

        this.setOffset(offset);
    }
}); 
```

参考：=[链接](https://stackoverflow.com/questions/14410934/disable-carousel-overscroll-overdrag-in-sencha-touch)******

# ember.js - Ember.js 如何加载简单的 ember 对象数组

> ID：10932813
> 
> 赞同：7
> 
> 时间：2012-06-07T13:28:35.423
> 
> 标签：ember.js

从 json 对象对象数组创建 ember 对象数组的最佳方法是什么？

我可以像这样在每个单独的对象上使用 SetProperties：

```
var ret = Ember.A();

pojos.forEach(function(obj){
  var em = Ember.Object.create({});
  emCluster.setProperties(obj);
  ret.push(emCluster);
}); 
```

但是有没有一种方法可以获得相同的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T17:00:37.647

我不想`map`使用`forEach`：

```
pojos.map(function(obj){
  return Ember.Object.create().setProperties(obj);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:40:43.107

是的：

```
var ret = pojos.map(function(data) { return Ember.Object.create(data); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:41:23.367

我在我的培训应用程序中使用它从远程服务器获取 json 并将其解析为对象数组。

```
App.Model.reopenClass({
  allItems: [],
  find: function(){
    $.ajax({
      url: 'http://remote_address/models.json',
      dataType: 'json',
      context: this,
      success: function(data){
        data.forEach(function(model){
          this.allItems.addObject(App.Model.create(model)) <-------------------
        }, this)
      }
    })
    return this.allItems;
  },
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T19:59:57.490

```
ret = (Em.Object.create pojo for pojo in pojos) 
```

# java - 如何配置eclipse构建路径来开发ant任务？是否有用于 ant 任务开发的插件？

> ID：10932822
> 
> 赞同：2
> 
> 时间：2012-06-07T13:28:57.680
> 
> 标签：java, eclipse, ant, eclipse-plugin

我需要为用 java 实现的自动化任务开发一个 ant 包装器，我将用 eclipse 来做这件事，我想通过扩展 ant 的 Task 类来做到这一点。

由于 eclipse 已经有一个集成版本的 ant，我觉得在某处添加我自己的 ant.jar 副本是一种浪费。我正在寻找一种方法来表明我的项目需要“这个主要版本的 ant”，然后让 eclipse 完成剩下的工作。有点像我们将项目配置为使用“A J2SE 1.6 运行时”，而不是“此处安装的 jre 的确切特定版本”。

我检查了项目上下文菜单 -> 构建路径 -> 添加库，我希望在 JRE 系统库、EAR 库、谷歌应用程序引擎等旁边的库类型选择弹出窗口中找到类似“Ant”的东西......并且我没有找到它。

此外，没有“Ant 任务”项目模板。

我在这里缺少插件吗？有什么明智的做法吗？还是我只需要将 ant.jar 放到项目的 lib/ 目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:07:57.277

您可以从 Eclipse 安装中创建一个包含 Ant jar 的“用户库”，并将其添加到项目的构建路径中。

*   项目/构建路径/配置构建路径
*   添加库/用户库
*   单击用户库按钮
*   给它一个名字，例如“ant”或“eclipse-ant”
*   单击添加 JAR...
*   导航到 Eclipse 安装中的 ant 插件目录
    *   例如 eclipse\plugins\org.apache.ant_1.7.1.v20090120-1145\lib
*   选择部分或全部罐子
*   结束

这些 jars 现在在您的构建路径上。

# google-maps - Microsoft JScript 运行时错误：属性值无效: [object Object]

> ID：10932823
> 
> 赞同：2
> 
> 时间：2012-06-07T13:29:02.877
> 
> 标签：google-maps, google-maps-api-3

当我尝试在我的页面中调用 infoBox.open 方法时出现以下错误。

**Microsoft JScript 运行时错误：属性值无效：[object Object]**

以下是我正在使用的代码。

```
 var myInfoOptions = {                        
                content: 'Test'//$extradiv.html()
                , closeBoxMargin: "12px 2px 2px 2px"
                , closeBoxURL: '/Images/infowindow-close.gif'
                };

                var ib = new InfoBox(myInfoOptions);
                var info_Marker = new google.maps.Marker({
                    position: new google.maps.LatLng(e.latLng.lat(), e.latLng.lng())
                });
                info_Marker.setMap(null);
                ib.open(map, info_Marker); 
```

我已经在全局范围内声明了 Map 对象并将数据绑定如下。

```
 var myOptions = {
            zoom: 5,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

希望快速响应。

谢谢，
**卡利安巴萨**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:39:04.610

只是一个猜测：

1.  您没有在窗口范围内声明变量“map”
2.  文档内的某处是**ID为“map”的元素或****名称为**“map”的表单、图像、锚点等

会发生什么：IE

问题来了：当你在元素被解析之前不声明变量时，你不能覆盖对元素的引用。

为了更好地理解的演示：

**尝试#1：**

```
<input id="foo" type="button" value="click me to see foo's type-property" onclick="fx()">    
<script>
function fx()
{
   alert(foo.type);
}

window.onload=function()
{
   foo={type:'this is the type-property of the foo-variable'};
}
</script> 
```

...在创建变量之前解析 input#foo。在 IE 中创建变量 foo 的尝试将失败，因为已经存在对全局范围内可访问的 input#foo 的引用。警报将返回“按钮”，输入类型#foo
[**http://jsfiddle.net/doktormolle/kA9nb/**](http://jsfiddle.net/doktormolle/kA9nb/)

**尝试#2：**

```
<script>
var foo;

function fx()
{
   alert(foo.type);
}

window.onload=function()
{
   foo={type:'this is the type-property of the foo-variable'};
}
</script>
<input id="foo" type="button" value="click me to see foo's type-property" onclick="fx()"> 
```

如您所见，变量 foo 在解析 input#foo 之前在全局范围内声明。IE 现在不会创建对 input#foo 的全局引用，并且一切都按预期工作：http:
[//jsfiddle.net/doktormolle/88QV8/](http://jsfiddle.net/doktormolle/88QV8/)

所以解决方案：**在全局范围内声明变量“map”。**

# web-services - 如何测试 SharePoint 2010 Web 服务

> ID：10932831
> 
> 赞同：2
> 
> 时间：2012-06-07T13:29:28.817
> 
> 标签：web-services, sharepoint

有没有办法测试 sharepoint 2010 Web 服务方法？使用浏览器并修改 url 或某种免费工具来测试 Web 服务。SharePoint Web 服务看起来像[http://intranet.site.com/_vti_bin/webs.asmx](http://intranet.site.com/_vti_bin/webs.asmx)。有些方法不带参数，而另一些则带参数。

只是希望能够使用工具或浏览器是否允许测试方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:29:22.377

这个工具[http://www.xyrow.com/Home/Free](http://www.xyrow.com/Home/Free)似乎很轻，可以达到目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T18:25:36.127

Storm 值得一试——开源，这样你就不用担心下载讨厌的东西了

[http://storm.codeplex.com/](http://storm.codeplex.com/)

# android - 带有自定义适配器的多项选择 AlertDialog

> ID：10932832
> 
> 赞同：11
> 
> 时间：2012-06-07T13:29:29.413
> 
> 标签：android, android-alertdialog, android-arrayadapter, multiple-choice

我正在尝试创建一个带有多项选择选项的 AlertDialog。我已经尝试过，`setMultiChoiceItems`但我拥有的是 a`ArrayList<Category>`而不是 a`CharSequence`所以我尝试了适配器。

问题`setAdapter`在于，当我选择一项时，它会关闭对话框窗口。我想要的是选择项目，然后点击确定按钮查看选择了哪些项目。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Pick a color");
        ArrayAdapter<Category> catsAdapter = new ArrayAdapter<Category>(this, android.R.layout.select_dialog_multichoice,this.categories);
        builder.setAdapter(catsAdapter, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {

            }
        });
        builder.setPositiveButton("Save", new DialogInterface.OnClickListener() {
               @Override
               public void onClick(DialogInterface dialog, int which) {
                //do something  
               }                
        });;

        AlertDialog alert = builder.create();
        alert.show(); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-07-28T10:40:37.517

不幸的是，似乎没有一种简单的方法可以在不调用`setMultiChoiceItems()`.

`ListView`但是，您可以设置一个适配器，然后在包含本身中打开多选模式。

```
final AlertDialog dialog = new AlertDialog.Builder(getActivity())
    .setTitle("Title")
    .setAdapter(yourAdapter, null)
    .setPositiveButton(getResources().getString(R.string.positive), null)
    .setNegativeButton(getResources().getString(android.R.string.cancel), null)
    .create();

dialog.getListView().setItemsCanFocus(false);
dialog.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
dialog.getListView().setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        // Manage selected items here
        System.out.println("clicked" + position);
        CheckedTextView textView = (CheckedTextView) view;
        if(textView.isChecked()) {

        } else {

        }
    }
});

dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T05:22:45.170

this will stop ur dialog from disappearing after one selection.

```
AlertDialog alertDialog = builder.create();
ListView listView = alertDialog.getListView();
listView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
        // TODO Auto-generated method stub

    }
}); 
```

To get which items are selected , you need to plan your adapter accordingly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:12:41.967

请参阅下面的代码，它可能会对您有所帮助。我在我的应用程序中使用了这个。

```
public static ArrayList<String> Party_list_new = new ArrayList<String>();

ArrayList<String> party_multi_cheked = new ArrayList<String>();

public void show_alert() {

        final Dialog dia = new Dialog(this);
        dia.setContentView(R.layout.alert_);
        dia.setTitle("Select File to import");
        dia.setCancelable(true);

        final ListView list_alert = (ListView) dia
                .findViewById(R.id.alert_list);

        list_alert.setAdapter(new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_list_item_multiple_choice,
                Party_list_new));

        list_alert.setItemsCanFocus(false);
        list_alert.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        list_alert.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                    long arg3) {

            }
        });

        Button btn = (Button) dia.findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                SparseBooleanArray positions = list_alert
                        .getCheckedItemPositions();
                int j = 0;

                for (int k = 0; k < Party_list_new.size(); k++) {
                    if (positions.get(k)) {

                        party_multi_cheked.add("" + k);

                    }
                }

                dia.dismiss();
            }
        });
        dia.show();

    } 
```

alert_list.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
         <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Select Party" />

        <ListView
            android:id="@+id/alert_list"
            android:layout_width="match_parent" android:padding="5dp"
            android:layout_height="wrap_content" >
        </ListView>

    </LinearLayout> 
```

如果它是正确的，让它正确。

# macos - 在 awakeFromNib 中设置视图的值是否安全？

> ID：10932834
> 
> 赞同：0
> 
> 时间：2012-06-07T13:29:38.403
> 
> 标签：macos, cocoa

执行以下操作是否安全？

```
// in AppController.h
@interface AppController : NSObject
{
    IBOutlet NSTextField *label;
}
@end

// in AppController.m
- (void)awakeFromNib
{
    [label setIntValue:5];
} 
```

还是有可能在发送到实例`label`时可能尚未完全初始化？`awakeFromNib``AppController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:32:23.967

我不确定它是否安全。
但是您应该`viewDidLoad:`在加载 nib 文件后用于任何视图设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:40:48.010

[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)说：

> 重要
> 因为不能保证从档案中实例化对象的顺序，所以您的初始化方法不应向层次结构中的其他对象发送消息。***可以从 awakeFromNib 中安全地*****向其他对象发送消息——此时可以确保所有对象都未归档和初始化***（当然，不一定要唤醒）。*

 *事实上， awakeFromNib 是在创建对象并连接出口和操作完成后发送到所有对象的 nib 创建**和File's Owner 。***

# android - 申请特定的独特设备

> ID：10932844
> 
> 赞同：5
> 
> 时间：2012-06-07T13:30:23.173
> 
> 标签：android

有没有办法为特定的独特设备构建应用程序？假设我有一个 android 设备，我只想为该设备创建一个 apk 文件，该 apk 不能安装在任何其他设备上，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:52:45.053

您可以使用[此答案](https://stackoverflow.com/a/2785493/726954)中的代码来获取唯一的设备 ID。

但是，您将无法使用它来限制 Google Play 将您的应用程序仅限制在此设备上，相反，正如@ThomasK 建议的那样，您可以添加检查此特定设备 ID 和 finish() 如果它不是特定的设备。

您可以通过多种方式限制应用安装，但不能在配置级别将其限制在该范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:38:00.933

不，你不能那样做，不可能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:45:32.233

您的目的有两个机会：

第一：
当应用程序启动时（这意味着可以安装），您可以获得`MODEL`设备的，如果它不是您设计应用程序的设备，您可以获得`finish()`活动和应用程序。

获取模型：

```
String PhoneModel = android.os.Build.MODEL; 
```

第二：
Afaik 有可能控制您的应用程序禁止使用哪些设备，`Google Play Store`也许不仅有黑名单，还有白名单？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:46:33.107

> 该apk无法安装在任何其他设备上，有可能吗？

我不确定这一点。但是您可以根据设备决定是否启用某些功能。

就像您可以以编程方式检查每个设备唯一的设备 wifi mac 地址一样。如果它不符合您的标准，请不要启用该功能。

# php - 按日期和自动递增列 (id) 排序，但第三列 (oid) 具有相同值的行按第四列 (ab) 的字母顺序排序

> ID：10932846
> 
> 赞同：0
> 
> 时间：2012-06-07T13:30:24.863
> 
> 标签：php, mysql, sql-order-by

根据 Quassnoi 的回答，我已经编辑以显示使用他的建议会发生什么，并向 OID 添加字母以显示有问题的排序。

我在 mysql 数据库中有一个表，我首先想在它应该添加到数据库的日期之前对其进行排序。

```
SELECT * FROM table ORDER BY date_placed DESC; 
```

接下来日期相同的地方我想通过自动递增的 id 进行排序。所以我添加了：

```
SELECT * FROM table ORDER BY date_placed DESC, id DESC; 
```

我最终得到这样的结果：

```
日期_放置 | 身份证 | 标识 | AB
2012 年 5 月 1 日 | 1100 | A50 | 一种
2012 年 5 月 1 日 | 1109 | A50 | 乙
2012 年 5 月 1 日 | 1108 | B40 | 一种
2012 年 5 月 1 日 | 1107 | B40 | 乙
2012 年 4 月 1 日 | 1106 | C30 | 一种
2012 年 4 月 1 日 | 1105 | C30 | 乙

```

AB 字段将始终仅由 A 或 B 组成，并且 OID 可能存在两次或为唯一值。我现在想要的是在 OID 重复的情况下，B 在 AB 列中位于 A 之前。请注意，ID 将在一定程度上出现故障。

```
日期_放置 | 身份证 | 标识 | AB
2012 年 5 月 1 日 | 1109 | A50 | 乙
2012 年 5 月 1 日 | 1110 | A50 | 一种
2012 年 5 月 1 日 | 1107 | B40 | 乙
2012 年 5 月 1 日 | 1108 | B40 | 一种
2012 年 4 月 1 日 | 1105 | C30 | 乙
2012 年 4 月 1 日 | 1106 | C30 | 一种

```

我更喜欢在 mysql 端执行此操作，因为我将检索很多行。这可能吗？如果不在mysql中，那么我正在使用php，那么最好的方法是什么？提前感谢任何可以提供帮助的人。

Quassnoi 的回答是这样的：

```
日期_放置 | 身份证 | 标识 | AB
2012 年 5 月 1 日 | 1107 | B40 | 乙
2012 年 5 月 1 日 | 1108 | B40 | 一种
2012 年 5 月 1 日 | 1109 | A50 | 乙
2012 年 5 月 1 日 | 1110 | A50 | 一种
2012 年 4 月 1 日 | 1105 | C30 | 乙
2012 年 4 月 1 日 | 1106 | C30 | 一种

```

身份证件丢失

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:32:28.117

```
SELECT  m.*
FROM    (
        SELECT  date_placed, oid, MAX(id) AS mid
        FROM    mytable
        GROUP BY
                date_placed, oid
        ) md
JOIN    mytable m
ON      (m.date_placed, m.oid) = (md.date_placed, md.oid)
ORDER BY
        m.date_placed DESC, mid DESC, ab DESC 
```

如果两个条件成立：

1.  `id`单个内`oid`是连续的（它们之间没有间隙），并且
2.  `B`总是`A`按`id`顺序走在前面，

用这个：

```
SELECT  *
FROM    mytable
ORDER BY
        date_placed DESC,
        CASE ab WHEN 'A' THEN id - 1 ELSE id END DESC,
        id 
```

, 没有连接。

# extjs - Extjs 表单字段：使用“3d 4h”之类的格式解析时间？

> ID：10932852
> 
> 赞同：0
> 
> 时间：2012-06-07T13:30:35.870
> 
> 标签：extjs, extjs4, formfield

我想要一个文本字段，代表某事的时间量，将文本值解析`'3d 4h'`为小时。我提供的示例是 3 天 4 小时 -- 76 小时。

在我开始使用自己的文本到数字解析器引擎之前，有没有人做过类似的事情，或者 Extj4 是否提供了一种方法来简化这个过程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:29:32.530

我还没有在 JS 中看到这个。

查看 PHP 的 strtotime 函数的源代码，您可能会得到一些灵感，它基本上可以满足您的需求：

[https://github.com/php/php-src/blob/master/ext/date/php_date.c#L1324](https://github.com/php/php-src/blob/master/ext/date/php_date.c#L1324)

其他选项：

[文本日期的正则表达式？（又名 php 的 strtotime 的源代码）](https://stackoverflow.com/questions/3845145/regex-for-textual-dates-aka-source-code-for-phps-strtotime)

# java - 使用 Java 的应用程序包装器

> ID：10932853
> 
> 赞同：4
> 
> 时间：2012-06-07T13:30:50.477
> 
> 标签：java, security, policy, file-access, securitymanager

是否可以使用 Java 为其他 (Java) 应用程序实现包装应用程序？

目的是强制执行独立于用于处理特定文档的应用程序的文档的使用策略。

EG 我有一个加密文件，需要在某种编辑器中解密和打开。因此，包装应用程序将解密文件并在其内部启动编辑器，以通过拒绝对应用程序的写访问来强制执行只读策略。因此该`Runtime.getRuntime().exec(<command>)`方法不太适合:)

还有一些方法可以拦截同一应用程序中的方法调用，但没有一种方法可以包装整个其他应用程序。

我还阅读了有关更改 JVM 本身以拦截文件访问的信息。这听起来很不错。但我需要根据用户动态更改策略。据我目前所知，这可能行不通。

我想可能没有任何方法可以使用 Java 代码来做到这一点，但我会很感激任何提示和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:23:42.070

> 我还阅读了有关更改 JVM 本身以拦截文件访问的信息。这听起来很不错。但我需要根据用户动态更改策略。

设置一个`SecurityManager`覆盖[`checkWrite(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkWrite%28java.lang.String%29)以引发异常的自定义。

这是一个防止子框架退出 VM 的简单示例 ( `checkExit(int)`)。

```
import java.awt.GridLayout;
import java.awt.event.*;
import java.security.Permission;
import javax.swing.*;

/** NoExit demonstrates how to prevent 'child' applications from 
 * ending the VM with a call to System.exit(0). */
public class NoExit extends JFrame implements ActionListener {

    JButton frameLaunch = new JButton("Frame");
    JButton exitLaunch = new JButton("Exit");

    /** Stores a reference to the original security manager. */
    ExitManager sm;

    public NoExit() {
        super("Launcher Application");

        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

        sm = new ExitManager( System.getSecurityManager() );
        System.setSecurityManager(sm);

        setLayout(new GridLayout(0,1));

        frameLaunch.addActionListener(this);
        exitLaunch.addActionListener(this);

        add( frameLaunch );
        add( exitLaunch );

        pack();
        setSize( getPreferredSize() );
        setLocationByPlatform(true);
    }

    public void actionPerformed(ActionEvent ae) {
        if ( ae.getSource()==frameLaunch ) {
            TargetFrame tf = new TargetFrame();
        } else {
            // change back to the standard SM that allows exit.
            System.setSecurityManager(
                    sm.getOriginalSecurityManager() );
            // exit the VM when *we* want
            System.exit(0);
        }
    }

    public static void main(String[] args) {
        NoExit ne = new NoExit();
        ne.setVisible(true);
    }
}

/** Our custom ExitManager does not allow the VM to exit, but does 
 * allow itself to be replaced by the original security manager. */
class ExitManager extends SecurityManager {

    SecurityManager original;

    ExitManager(SecurityManager original) {
        this.original = original;
    }

    /** Deny permission to exit the VM. */
    public void checkExit(int status) {
        throw( new SecurityException() );
    }

    /** Allow this security manager to be replaced,
  if fact, allow pretty much everything. */
    public void checkPermission(Permission perm) {
    }

    public SecurityManager getOriginalSecurityManager() {
        return original;
    }
}

/** This example frame attempts to System.exit(0) on closing, we must 
 * prevent it from doing so. */
class TargetFrame extends JFrame {

    TargetFrame() {
        super("Close Me!");
        add(new JLabel("Hi!"));

        addWindowListener( new WindowAdapter() {
            public void windowClosing(WindowEvent we) {
                System.out.println("Bye!");
                System.exit(0);
            }
        });

        pack();
        setSize( getPreferredSize() );
        setLocationByPlatform(true);
        setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:00:41.680

Eclipse RPC 可能是一个不错的选择。它提供了编辑器视图，可以在运行时轻松更改以启用/禁用保存和其他功能。由于 Eclipse 是用 Java 编写的，因此您已经拥有的大多数 Java 代码都可以很好地与该框架配合使用。

# mongodb - MongoDB从数组中找到键等于字符串的位置

> ID：10932854
> 
> 赞同：4
> 
> 时间：2012-06-07T13:30:50.767
> 
> 标签：mongodb

我试图在集合中找到所有文档，其给定键等于数组中的字符串之一。

这是一个集合的例子。

```
{
  roomId = 'room1',
  name = 'first'
},
{
  roomId = 'room2',
  name = 'second'
},
{
  roomId = 'room3',
  name = 'third'
} 
```

这是一个要查看的数组示例。

```
[ 'room2', 'room3' ] 
```

我认为会起作用的是......

```
collection.find({ roomId : { $in : [ 'room2', 'room3' ]}}, function( e, r )
{
  // r should return the second and third room
}); 
```

我怎样才能做到这一点？

解决这个问题的一种方法是做一个 for 循环......

```
var roomIds = [ 'room2', 'room3' ];
for ( var i=0; i < roomIds.length; i++ )
{
  collection.find({ id : roomIds[ i ]})
} 
```

但这并不理想......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:49:49.123

您发布的内容应该可以工作 - 不需要循环。操作员完成以下[`$in`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$in)工作：

```
> db.Room.insert({ "_id" : 1, name: 'first'});
> db.Room.insert({ "_id" : 2, name: 'second'});
> db.Room.insert({ "_id" : 3, name: 'third'});
> // test w/ int
> db.Room.find({ "_id" : { $in : [1, 2] }});
{ "_id" : 1, "name" : "first" }
{ "_id" : 2, "name" : "second" }
> // test w/ strings
> db.Room.find({ "name" : { $in : ['first', 'third'] }});
{ "_id" : 1, "name" : "first" }
{ "_id" : 3, "name" : "third" } 
```

这不是你所期望的吗？

使用 MongoDB 2.1.1 测试

# asp.net - asp.net mvc 4 web api中的授权

> ID：10932856
> 
> 赞同：1
> 
> 时间：2012-06-07T13:30:57.997
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我一直在关注一系列关于[如何使用 MVC 4 创建 Web API](http://www.asp.net/web-api/videos)的视频。第六个视频描述了授权过程，但它对于我想要的来说太复杂了，而且它以某种方式重定向到一个表单（这对我来说没有意义，但我对这个东西很陌生）。

我使用过其他站点的 API，它们通常使用以下两种方法之一：

1.  url 中的令牌（http://myurl/api/service/?token=[bunch of characters here]

2.  标头中的用户名或密码（或令牌）

我倾向于第二种方法，因为这意味着我不必为每个方法添加参数。

如果我使用这种方法，我是否需要在每个方法的开头添加代码来检查用户名/密码的标题（request.headers？）（然后在我们的数据库中找到它们，看看他们是否有权访问这个方法） ...或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:39:28.467

您可以使用派生自 AthorizationFilterAttribute 的属性标记您的 Controller 类。 [http://msdn.microsoft.com/en-us/library/system.web.http.filters.authorizationfilterattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.filters.authorizationfilterattribute(v=vs.108).aspx)

在这种情况下，您不需要在每种方法中都编写授权检查，而只需在一个地方。这种方法在以下链接中有很好的描述：

[http://www.tugberkugurlu.com/archive/api-key-authorization-through-query-string-in-asp-net-web-api-authorizationfilterattribute](http://www.tugberkugurlu.com/archive/api-key-authorization-through-query-string-in-asp-net-web-api-authorizationfilterattribute)

# android - 连续发送数据

> ID：10932860
> 
> 赞同：1
> 
> 时间：2012-06-07T13:31:22.990
> 
> 标签：android, usb, led, accessory

android 应用程序的构建方式是，当数据（单击按钮）发送到 USB 设备时，LED 切换并显示数据。我希望在没有任何人工干预的情况下连续发送数据。请帮助

```
 if (mInputStream != null)
       {
          int Data = 0;
           try {
             Data = mInputStream.read();
           } catch (IOException e) {
           }
            if (Data == LED_ON)
            {

            ledStatus.setText("LED is ON");             
            }
             else if (Data == LED_OFF)
            {

            ledStatus.setText("LED is OFF");                                
            }
        else
        {
            ledStatus.setText("Request failed");                
        }

            }
           else 
            {
        ledStatus.setText("mInputStream == null");

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:51:46.550

这次我自己测试了它......它肯定可以将它粘贴到你的 onCreate() 祝你好运:)

```
 Timer t = new Timer();
        t.schedule(new TimerTask(){
              public void run(){
                           // write the method name here. which you want to call continuously
                  Log.d("timer", "timer");
                  }
                  },10, 1000); 
```

# sql-server - 导入制表符分隔的文本文件 - 无法更改列映射 SQL Server 2008

> ID：10932862
> 
> 赞同：1
> 
> 时间：2012-06-07T13:31:23.940
> 
> 标签：sql-server, sql-server-2008

我有一个非常大的制表符分隔的文本文件，我正在尝试导入 SQL Server 2008。某些字段名称超过 50 个字符，当我尝试使用 Management Studio 更改列映射时，我无法更改数据类型（默认为 varchar）或大小（默认为 50）。编辑 SQL 按钮也显示为灰色。什么给了这个？

我正在通过 SSMS 中的导入向导导入数据（右键单击数据库名称、任务、导入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-08T23:33:11.297

有时，如果您运行向导并遇到错误，它会创建一个表。您必须进入 SQL，删除表，然后重新开始。否则，SQL 向导不允许您在创建表后对其进行编辑。

# multithreading - Qt 中的 OpenGL 多线程，glGet* 结果的问题

> ID：10932863
> 
> 赞同：1
> 
> 时间：2012-06-07T13:31:28.680
> 
> 标签：multithreading, qt, opengl, qglwidget

我正在使用 QGLWidget 和 OpenGL 在 Qt (4.8.2)(VS 2008) 中编写图形应用程序。这是应用程序的简短描述：这是一个物理模拟。它由 2 个线程组成。主应用程序线程处理场景绘制（QGLWidget 子类）和事件。计算线程在循环中计算模拟的下一步。现在...我想使用光标（拖动对象或类似的东西）与模拟进行交互。由于我决定不在场景中进行智能射线拍摄以及一些空间空间分解（也许我必须这样做），我希望计算线程执行如下操作：

```
 glGetDoublev(GL_MODELVIEW_MATRIX, modelviewMatrix);
    glGetDoublev(GL_PROJECTION_MATRIX, projectionMatrix);
    glGetIntegerv(GL_VIEWPORT, viewport);
    gluProject(px, py, pz, modelviewMatrix, projectionMatrix, viewport, &x, &y, &z); 
```

为了获得 [px;py;pz] 点的屏幕 [x;y] 坐标，并将它们用于计算模拟的下一步。好吧，事实证明主线程总是得到正确的 modelviewMatrix 和 projectionMatrix 数组，但是当它由计算线程执行时，它会得到垃圾矩阵数据。我尝试了很多事情......在查询 OpenGL 之前运行 makeCurrent()，锁定任何 OpenGL 操作，因此矩阵应该不受影响，但没有成功。我想知道，这甚至可能吗？OpenGL 是否在绘制场景后保留矩阵？有什么方法可以使这段代码线程安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:33:44.950

在主线程中执行 GL 查询并将结果传递给您的计算线程。

# javascript - 实现 2-legged OAuth 以获取用户特定数据以在 Javascript 中使用

> ID：10932864
> 
> 赞同：0
> 
> 时间：2012-06-07T13:31:30.317
> 
> 标签：javascript, rest, oauth, spring-security, oauth-2.0

我正在深入研究 OAuth 2.0 以保护我的 RESTful 服务。我拥有消费者和提供者双方，因此不需要最终用户允许访问提供者上的数据。我已经尝试过客户端凭据流，但这似乎只允许我为我的整个客户端获取令牌，而不是为单个用户获取令牌。如果我在 Javascript 中为我的客户端使用令牌，那么它将提供给所有用户并且不会非常安全，因为用户可能会为所有其他用户获取数据。

有没有一种方法可以让我使用 2-legged（又名客户端凭据）来获取可在 Ajax/Javascript 中使用的特定于用户的令牌（类似于隐式流程提供的，但无需用户批准）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:23:51.510

没错，该标准没有说明“客户端凭据授予”场景的用户凭据。但是，如果受保护的资源属于用户，则每个令牌都应与特定用户相关。根据你的问题，我认为是这样。

如果您也在实现 OAuth 服务器，那么您可以轻松地做到这一点。只需在“客户端凭据授予”场景中的授权请求中添加“user_id”参数即可。在服务器端处理请求，可以将令牌绑定到指定的用户。您可以将其视为您自己对协议的轻微扩展。

您可能还希望完全符合标准并且不做任何非一成不变的事情，或者您可能无法访问 OAuth 服务器实现。在这种情况下，您可以尝试使用与用户无关的令牌（或您在问题中所称的“整个客户端”令牌）。但是，访问受保护资源时，您必须明确指定用户（例如，作为资源路径的一部分或在使用 HTTP 的查询参数中），因为它不能从令牌本身推导出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:04:11.130

我发现了自动批准客户的能力，因此当某些客户访问他们的数据时，用户不必授权。这在我的场景中有效，因为我对两个网站都使用相同的单点登录机制，并且提供者的登录对用户来说是透明的。

# django - django-openid-auth 多账号登录

> ID：10932868
> 
> 赞同：1
> 
> 时间：2012-06-07T13:31:57.243
> 
> 标签：django, openid

我刚开始玩 openid auth，我想知道是否有人可以告诉我如何配置设置，以便它在登录页面上显示多个社交媒体提供商，而不是在 settings.py 中设置单一登录。我使用的设置只是一个谷歌重定向帐户登录页面。

OPENID_SSO_SERVER_URL = 'https://www.google.com/accounts/o8/id'

我希望有多个选项供用户选择帐户登录（例如 Facebook、雅虎等）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:24:13.000

它只是不是设置你必须提供相应的视图和模板

参考： [https ://github.com/omab/django-social-auth/blob/master/example/app/views.py](https://github.com/omab/django-social-auth/blob/master/example/app/views.py)

# javascript - 使用 javascript 更改表行名称属性

> ID：10932869
> 
> 赞同：1
> 
> 时间：2012-06-07T13:31:57.540
> 
> 标签：javascript, jquery, tablednd

嘿，一旦将行从一组拖到另一组，我想更改表的名称属性。我得到要更改的名称属性的行和目标名称。但我的 javascript 函数没有更改行名这是我迄今为止尝试过的

```
<script type="text/javascript">
        $(document).ready(function() {
            $('#sort').tableDnD({
                onDrop: function(table, row) {
                    var patent_id = row.id;
                    var target_group_id = getpreviousSiblingName(row);
                    var data = {PID:patent_id, TGID:target_group_id};
                    **changename(patent_id,target_group_id);**
                    $.ajax({
                        type: "POST",
                        data: data,
                        url:"{{ path('MunichInnovationGroupBundle_patent_dragpatent') }}",
                        cache: false
                     });
                },
                dragHandle: ".dragHandle"
            });
            $("#sort tr").hover(function() {
                if($(this).hasClass('tr_group'))
                    $(this.cells[0]).addClass('showDragHandle');
                }, function() {
                    $(this.cells[0]).removeClass('showDragHandle');
            });

        });
</script>

    <script>
    function changename(row_id,row_name){
        var row = document.getElementById(row_id);
        alert(row_id);
        alert(row_name);
        row.name=row_name;
        return true;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:40:08.867

A`tr`没有`.name`属性，因此属性不会自动转移到属性。

改为使用`setAttribute()`来设置自定义属性。

```
function changename(row_id,row_name){
    var row = document.getElementById(row_id);
    row.setAttribute('name',row_name);
    return true;
} 
```

* * *

然后再次检索它，你需要`getAttribute`

```
row.getAttribute('name'); 
```

* * *

题外话，但你不需要通过`row.id`然后使用`getElementById`. 您可以直接通过该行。

# iphone - 保存多个地图注释 - 崩溃

> ID：10932871
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:04.423
> 
> 标签：iphone, objective-c, crash, nscoding

我一直在搜索顶部和底部以获取有关如何执行此操作的信息。我找到了一个很棒的教程！所以我对此还是很陌生。基本上我一直在尝试将地图视图注释存储到数组中。注释是一个单独的类，它基本上覆盖/充当`MKAnnotation`引脚注释。它具有三个属性：

> 1.  注释坐标
> 2.  注释标题
> 3.  注释副标题

这个数组需要存储到`NSUserDefaults`. 我遇到了一个问题，这是日志：

> [UIMutableIndexPath setObject:forKey:]：无法识别的选择器发送到实例 0x1187b0

存储在数组中的我的 Annotation 类对象无法保存为用户默认值。所以我不得不把这个数组变成`NSData`然后保存，对吧？

我有很多代码设置，只是不工作。这是我尝试所有这些的方法：

查看控制器类.m：

```
- (void)syncMap { // this method is called in viewWillDissapear (for running tests) and applicationDidEnterBackground in App Delegate

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSData *data = [NSKeyedArchiver archivedDataWithRootObject: localOverlays]; // this is the array I was talking about

[defaults setObject:data forKey:@"overlays"];

[defaults synchronize];

}

- (void)initCircles { // called in AppDelegate UIApplicationDelegate method: applicationDidFinishLaunchingWithOptions

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSData *data = [defaults objectForKey: @"overlays"];

    localOverlays = [NSKeyedUnarchiver unarchiveObjectWithData: data];

    if (!localOverlays) {

        // Either there is a problem or it is the first time opening the app

        localOverlays = [[NSMutableArray alloc] init];
    }

} 
```

注意：我正在使用数组中的两个注释进行测试 ( `localOverlays`)

所以，我`localOverlays`可以被编码/存档（使用`NSCoder`），因为它是一个`NSArray`. 但是，我不得不在我的 Annotation 类中添加一些进一步的设置。在其 .h 中，它使用 to`NSCoding`和`MKAnnotation`: 如下所示`< NSCoding, MKAnnotation>`。对不起，如果我没有使用正确的术语。这是我的.m：

```
 - (void)encodeWithCoder:(NSCoder *)aCoder { // should only be called when app enters background state, but since that cannot log in the console, like before I set it up so it should also be called in viewWillDissapear

    NSLog(@"encodeCoder called in Annotation"); // gets called twice when the view will disappear... GOOD!

    [aCoder encodeObject: title forKey: @"title"];
    [aCoder encodeObject: subtitle forKey: @"subtitle"];
    [aCoder encodeDouble: coordinate.latitude forKey: @"latitude"];
    [aCoder encodeDouble: coordinate.longitude forKey: @"longitude"];
}

- (id)initWithCoder:(NSCoder *)aDecoder { // Should be called only at startup of app (not the first time you startup the app though... because data will be NULL)

    NSLog(@"In the Annotation class, initWithCoder is called"); // Does get called at appropriate times twice... NICE!

    self = [super init];

    if (self) {

        title = [aDecoder decodeObjectForKey: @"title"];
        subtitle = [aDecoder decodeObjectForKey: @"subtitle"];

        double lat = [aDecoder decodeDoubleForKey: @"latitude"];
        double lon = [aDecoder decodeDoubleForKey: @"longitude"];

        coordinate = CLLocationCoordinate2DMake(lat, lon);
    }

    return self;
} 
```

如您所见，我已为存档设置了所有内容，对吗？好吧，似乎不是……因为现在在 ViewController 的 .m 中，我在 viewDidLoad 中也有这段代码：

```
 for (Annotation *pin in localOverlays) {

    if (pin) {

        NSLog(@"valid pin: _CMD updateCircles");

        [mapView addAnnotation: pin];

    }

} 
```

当我第一次打开我的应用程序并添加引脚时，这段代码运行良好。好的，现在我已经退出视图并退出应用程序，并从多任务栏中删除。当我重新打开它时，我在快速枚举行中遇到了崩溃：

```
 -[NSURL countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0xcd31140 
```

所以，我所有的归档和编码设置都有问题。这里有什么问题......我知道这是一个冗长的问题，但我试图很好地构建它。我的代码设置是否完全不正确，我的代码中是否存在拼写错误/错误。谢谢大家！

更新：

我已经对坐标变量进行了编码，因此当我在 pin 出现在正确的坐标后启动应用程序时，但是当我尝试按下它来查看标题和副标题时，我得到了以下崩溃：

```
 objc_msgSend 
```

所以有些东西被释放了……只是一个猜测……糟糕的内存管理？什么会导致我的代码崩溃？

更新：

我已经更深入地研究了我的代码并更改了一些`release`语句，只是改进了我的内存管理并进行了一些优化。现在我得到一个更具体的崩溃：

```
*** -[CFString length]: message sent to deallocated instance 0x147490 
```

所以我的标题或副标题被解除分配......为什么？我检查了我的代码，它应该是绝对没问题的，特别是因为坐标很好......

更新：

我已经解决了这个问题！我来实现，坐标两个变量，纬度和经度是双精度数，数据类型......不是对象！因此，它们坚持并工作只是因为它们被复制......不像引用的对象。长话短说，我需要`retain`。像这样：

```
 title = [[aDecoder decodeObjectForKey: @"titler"] retain];
    subtitle = [[aDecoder decodeObjectForKey: @"subtitler"] retain]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:48:44.750

我不确定崩溃的确切原因是什么。但我注意到您的编码/解码方法中有一些错误：

编辑：仅当您的超类符合 NSCoding 时：

在 encodeWithCoder 中，您应该首先调用：

```
[super encodeWithCoder: aCoder]; 
```

在 initWithCoder 中替换

```
self = [super init]; 
```

经过

```
self = [super initWithCoder:aDecoder] 
```

以下返回一个不可变对象（不是 NSMutableArray）：

```
 localOverlays = [NSKeyedUnarchiver unarchiveObjectWithData: data]; 
```

将此行替换为：

```
 localOverlays = [[NSKeyedUnarchiver unarchiveObjectWithData: data] mutableCopy]; 
```

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:25:54.157

我已经解决了这个问题！我来实现，坐标两个变量，纬度和经度是双精度数，数据类型......不是对象！因此，它们坚持并工作只是因为它们被复制......不像引用的对象。长话短说，我需要`retain`。像这样：

```
 title = [[aDecoder decodeObjectForKey: @"titler"] retain];
        subtitle = [[aDecoder decodeObjectForKey: @"subtitler"] retain]; 
```

# jquery - 试图移动或降低 Fancybox 中“关闭”按钮的不透明度

> ID：10932872
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:09.477
> 
> 标签：jquery, html, fancybox

我试图移动 youtube 上的“关闭”按钮。每当我尝试添加如下代码时：

```
'onComplete': function(){
   $("#fancybox-close").css({"opacity":"0.5"});
} 
```

该链接直接指向 Youtube，而不是在模态框中播放。

有什么建议么？

![在此处输入图像描述](../Images/5f5ccec7d10858fb2454ccf7f495ee6a.png)

HTML：

```
<a class="fancybox-media" href="http://www.youtube.com/watch?v=sqRPrGeBVL0&autoplay=1&autohide=1" >Youtube</a> 
```

Javascript：

```
$(function(){
$("a.fancybox-media").click(function() {
     $.fancybox({
          'padding'             : 0,
          'autoScale'   : false,
          'transitionIn'        : 'none',
          'transitionOut'       : 'none',
          'title'               : this.title,
          'width'               : 680,
          'height'              : 495,
          'autoPlay'            :'true',
          'href'                : this.href.replace(new RegExp("watch\\?v=", "i"),
                                      'v/'),
          'type'                : 'swf',    // <--add a comma here
          'swf'                 : {'allowfullscreen':'true'} // <-- flashvars here
       });
       return false;
  });
 }); 
```

笔记 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:40:05.020

As I mentioned in the other question, add to your script

```
'onComplete': function(){
 $("#fancybox-close").css({"opacity":"0.5"});
} 
```

just make sure that you separate the options with a **comma** like:

```
$("a.fancybox-media").click(function() {
 $.fancybox({
  'padding'             : 0,
  'autoScale'   : false,
  'transitionIn'        : 'none',
  'transitionOut'       : 'none',
  'title'               : this.title,
  'width'               : 680,
  'height'              : 495,
  'autoPlay'            :'true',
  'href'                : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
  'type'                : 'swf', 
  // the swf option IS NOT the last option anymore so it needs a trialing comma !!!
  'swf'                 : {'allowfullscreen':'true'}, // <-- ADDED a comma here
  'onComplete': function(){
    $("#fancybox-close").css({"opacity":"0.5"});
  }
 });
 return false;
}); 
```

**DEMO**: See it [working here](http://www.picssel.com/playground/jquery/dimCloseButton_07jun12.html)

**Side notes**: if you add another option, like `overlayColor` to change the background color, always make sure that every option is separated by a `comma` but the last.

**UPDATE**: If you want to change the opacity **AND** move the close button, do it within the same `onComplete` option like

```
'onComplete': function(){
    $("#fancybox-close").css({"opacity": 0.4,"right": -30});
  } 
```

[I updated the DEMO too](http://www.picssel.com/playground/jquery/dimCloseButton_07jun12.html)

**UPDATE #2** (just for fun): You could apply interesting effects like restoring the opacity of the close button on mouse hover (everything within the `onComplete` option) like

```
 'onComplete': function(){
    $("#fancybox-close").css({"opacity": 0.4,"right": -30})
      .hover(function(){
        $(this).css({"opacity": 1});
      },function(){
        $(this).css({"opacity": 0.4});
      });
   } 
```

(also updated in the DEMO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:34:44.720

为什么不改变CSS？

```
#fancybox-close {
    opacity: 0.5 !important;
} 
```

# c# - 检查安装在本地机器上的 .net framework 3.5 并使用 win 构建在相同环境中的应用程序

> ID：10932876
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:21.273
> 
> 标签：c#, .net-3.5

我需要检查本地计算机上安装的当前 .NET 版本，但我的主要任务是检查是否安装了 .net 3.5 版本。我的应用程序构建在相同的 .NET 环境 3.5 中。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:44:23.420

如果您正在执行某种安装程序，请查看[ClickOnce](http://msdn.microsoft.com/en-us/magazine/cc188708.aspx) ...

# google-plus - HTML1115：X-UA 兼容 META 标记（'IE=9，IE=8，chrome=1'）被忽略，因为文档模式已经完成

> ID：10932881
> 
> 赞同：11
> 
> 时间：2012-06-07T13:32:29.497
> 
> 标签：google-plus, addthis, x-ua-compatible

我收到了这样的警告：

```
HTML1115: X-UA-Compatible META tag ('IE=9, IE=8, chrome=1') ignored because document mode is already finalized. 
```

当我尝试在 IE9 上打开我的网站时。我有 addthis 脚本：

```
<script type="text/javascript" src="https://s7.addthis.com/js/250/addthis_widget.js#async=1"></script> 
```

它添加了 google+ 按钮

```
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a> 
```

当我评论这一行时 - 警告消失。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T20:58:09.827

x-ua 兼容的元标记必须位于所有其他非元或标题的元素之前。

否则，我认为文档模式已经确定，IE 将忽略稍后提示它使用哪种文档模式的尝试。

# php - PHP预赛？

> ID：10932882
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:32.080
> 
> 标签：php, regex, find, preg-match

好的，假设这是一行
v1=something;v2=something2;

如何从 = 开始获取 v1 值（某物）并在 ; 和调用 v2 一样 (v1)

```
function getVal($name){
  // some code to start grabbing from = and end by ;
} 
```

当我打电话时

```
getVal("v1"); 
```

它应该返回“某物”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:34:22.390

这将起作用

v1=([^;]*)

比赛将在第 1 组进行

只需将正则表达式中的 v1 替换为您要查找的键即可

```
if (preg_match('/v1=([^;]*)/', $subject, $regs)) {
    $result = $regs[1];
} else {
    $result = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:36:51.460

```
v(?:\d*)=(\w;+) 
```

这将匹配所有 v （后面有数字或没有数字），然后匹配组将在 = 符号之后。是第 1 组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:42:21.830

如果我理解你的问题，那么我认为这就是你要找的：

```
$line = "v1=something;v2=something2;";

function getVal($name, $line){
    preg_match('/'.$name.'=([^;]*)/', $line, $matches);
    return $matches[1];
} 

echo getVal("v1", $line); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:44:13.020

您有义务将线路发送到您的功能（或者您可能很脏并将其用作全局）。所以，你的功能可以是这样的：

```
<?php
function getVal($name, $line){
    // some code to start grabbing from = and end by ;
    preg_match('#;?' . $name . '=([^;]+);?#', $line, $aMatches);
    if(isset($aMatches[1])) {
        return $aMatches[1];
    }
    return false;
}

$line = 'v1=something;v2=something2';
$v1 = getVal('v1',$line);
echo $v1;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T13:53:29.887

使用此功能：

```
function getVal($name, $line){
    preg_match("/{$name}=(.+);(v(\d+)=|$)/U", $line, $matches);
    $matches = $matches[0];
    $matches = preg_replace("/{$name}=/","",$matches);
    $matches = preg_replace("/;v(\d+)=/","",$matches);
    return $matches;
} 
```

这会给你准确的答案。

测试和工作。:)

# asp.net-mvc-3 - 值未在 url 中传递

> ID：10932883
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:34.033
> 
> 标签：asp.net-mvc-3

```
 //In Controller this is what I have 
 public class AjaxController : Controller
 {

    [AcceptVerbs(new string[]{"GET"})]
    public ActionResult FindRooms(string selectedBuilding)
    {
        return Json(new { Room = "x"}, JsonRequestBehavior.AllowGet);
    }

 }

 //In Global.asax.cs I have  
 routes.MapRoute
 (
     "AjaxRoute1",
     "Ajax/FindRooms/{selectedBuilding}",
     new { controller = "Ajax", action = "FindRooms", selectedBuilding = "" }
 ); 
```

如果我浏览到 URL localhost/Ajax/FindRooms/SOMEBUILDING。SOMEBUILDING 未传递给 FindRooms 方法的 selectedBuilding 参数。它总是空的？？我该如何解决这个问题，以便它在 POST 和 GET 中都可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:57:37.887

正如 TA 先生所建议的，其他路线会影响这一点。路由的顺序很重要。

我把默认路由路由放在最后，就像一个魅力。！

```
 routes.MapRoute
        (
           "AjaxRoute1",
           "Ajax/FindRooms/{selectedBuilding}",
           new { controller = "Ajax", action = "FindRooms", selectedBuilding = "" }
        );

        routes.MapRoute
        (
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }

        ); 
```

# asp.net - asp.net 成员资格 - ident_current('aspnet_Users') 检索 NULL

> ID：10932887
> 
> 赞同：0
> 
> 时间：2012-06-07T13:32:45.313
> 
> 标签：asp.net, sql-server-2008, asp.net-membership

我配置了 asp.net Membership，当我执行“Select ident_current('aspnet_Users')”时，它检索 NULL，并且我在那里有信息。如果我对另一个表执行相同的命令，它会返回正确。

我正在使用“SA”默认登录名在 Microsoft SQL Management Studio 中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:51:41.820

您将无法在 aspnet_users 表上执行此操作，因为它使用 Guid 作为其主键 - 我猜您尝试的另一个表具有标准的 int 标识，这就是它起作用的原因。

你到底想做什么？如果您想从查询中获取生成的 Guid，请使用 OUTPUT（请参阅[https://stackoverflow.com/a/1510529/1191903](https://stackoverflow.com/a/1510529/1191903)）

# mysql - 在 PDO 语句中获取最接近的时间

> ID：10932893
> 
> 赞同：0
> 
> 时间：2012-06-07T13:33:24.283
> 
> 标签：mysql, sql-server, time, pdo

我正在使用 2 个数据库，我需要找到与最接近的时间匹配的记录。这两个字段都是 datetime()。

所以本质上：

```
table1.time = 2012-06-07 15:30:00
table2.time = 2012-06-07 15:30:01
table2.time = 2012-06-07 15:30:02
table2.time = 2012-06-07 15:30:03 
```

注意：我正在查询的表 (table2) 是一个 mssql 表，而 table1.time 是一个 datetime() 时间。我需要在 table2 中找到与 table1.time 最接近的行，但我不能保证它会完全匹配，所以我需要最接近的。我只需要返回 1 个结果。

我根据上一个 stackoverflow 查询中的示例尝试了下面的 SQL，但它无法正常工作。

Table1 是一个 mysql 数据库，其中 table2 是 mssql，查询发生在 table2 (mssql)

```
 try {
            $sql = "
                SELECT     
                    PCO_AGENT.NAME, 
                    PCO_INBOUNDLOG.LOGIN AS LOGINID, 
                    PCO_INBOUNDLOG.PHONE AS CALLERID, 
                    PCO_INBOUNDLOG.STATION AS EXTEN, 
                    PCO_INBOUNDLOG.TALKTIME AS CALLLENGTH, 
                    PCO_INBOUNDLOG.CHANNELRECORDID AS RECORDINGID, 
                    PCO_SOFTPHONECALLLOG.RDATE, 
                    PCO_INBOUNDLOG.RDATE AS INBOUNDDATE
                FROM         
                    PCO_INBOUNDLOG 
                INNER JOIN
                      PCO_LOGINAGENT ON PCO_INBOUNDLOG.LOGIN = PCO_LOGINAGENT.LOGIN 
                INNER JOIN
                      PCO_SOFTPHONECALLLOG ON PCO_INBOUNDLOG.ID = PCO_SOFTPHONECALLLOG.CONTACTID 
                INNER JOIN
                      PCO_AGENT ON PCO_LOGINAGENT.AGENTID = PCO_AGENT.ID
                WHERE 
                    PCO_INBOUNDLOG.STATION = :extension
                AND ABS(DATEDIFF(:start,PCO_SOFTPHONECALLLOG.RDATE))
            ";
            $arr = array(":extension" => $array['extension'], ":start" => $array['start']);
            $query = $this->mssql->prepare($sql);
            $query->execute($arr);
            $row = $query->fetchAll(PDO::FETCH_ASSOC);
            $this->pre($row);
        } 
```

我目前收到以下错误：

```
SQLSTATE[HY000]: General error: 174 General SQL Server error: Check messages from the SQL Server [174] (severity 15) [(null)]SQLSTATE[HY000]: General error: 174 General SQL Server error: Check messages from the SQL Server [174] (severity 15) [(null)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:58:16.213

找到一个较短的版本：

```
 SELECT * FROM `table` WHERE `date` < '$var' ORDER BY date LIMIT 1; 
```

# iphone - UIWebView 不会加载某些网站

> ID：10932894
> 
> 赞同：1
> 
> 时间：2012-06-07T13:33:26.263
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiwebview

UIWebView 有点问题。我在 Interface Builder 中创建了我的 UIWebView，并创建了一个作为 tasksWebView 的插座。我还将它作为委托链接到我的视图控制器。我想加载[http://www.taskyo.com](http://www.taskyo.com)，但是当我尝试加载它时，我只是得到一个白页。它在 Mobile Safari 中运行良好，所以我对问题所在感到困惑。更令人困惑的是，当我将[http://www.taskyo.com](http://www.taskyo.com)替换为[http://www.google.com](http://www.google.com)时，它工作正常。如果我尝试通过 Google 访问[http://www.taskyo.com](http://www.taskyo.com)，单击 URL 时会出现一个白页。我的代码如下：

头文件

```
#import <UIKit/UIKit.h>

@interface AppThirdViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIWebView *tasksWebView;

- (IBAction)goBack:(id)sender;
- (IBAction)goHome:(id)sender;

@end 
```

实施文件

```
#import "AppThirdViewController.h"

@interface AppThirdViewController ()

@end

@implementation AppThirdViewController
@synthesize tasksWebView = _tasksWebView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self goHome:self];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    _tasksWebView = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)goBack:(id)sender
{
    [_tasksWebView goBack];
}

- (IBAction)goHome:(id)sender
{
    NSURL *tasksURL = [NSURL URLWithString:@"http:/www.taskyo.com/"];
    NSURLRequest *tasksRequest = [NSURLRequest requestWithURL:tasksURL];
    [_tasksWebView loadRequest:tasksRequest];
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"Error : %@",error);
}

- (void)webViewDidStartLoad:(UIWebView *)webView
{
    NSLog(@"Started to load!");
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSLog(@"Finished loading!");
}

@end 
```

在我的控制台中，我得到以下输出：

```
Started to load
Finished loading! 
```

有人对这个问题有任何想法吗？提前致谢。

**编辑：**已修复 - 请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:35:32.700

在撰写此答案时，Taskyo.com 不可用。（即使我的网络浏览器也无法打开您提供的链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:09:30.130

一种可能性是该站点的 JavaScript 或 HTML 无效。移动 Safari 可能没有使用您的应用程序所使用的确切库版本。例如，W3C 验证器显示您的页面存在几个问题：[验证错误](http://validator.w3.org/check?uri=http://www.taskyo.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)。

您应该尝试的第一件事是将网页剥离为简单的“Hello World”消息，然后尝试添加回内容以查看问题所在。您也有可能从旧版本中获取过时的缓存 HTML。我喜欢添加一个带有递增值的“?rand=2”参数，以确保获得当前文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:50:57.717

taskyo.com 是一个新域名吗？也许某些名称服务器还不知道。（这无法解释为什么您可以在 Mobile Safari 上打开该页面）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:13:37.403

经过更多测试，我意识到我的代码没有问题，而是实际的应用程序包本身存在问题。我从模拟器中卸载它并重建它，它现在可以工作了。感谢你的帮助！

# javascript - 不使用 socket.io 和 node.js 发送/接收事件

> ID：10932895
> 
> 赞同：5
> 
> 时间：2012-06-07T13:33:30.003
> 
> 标签：javascript, node.js, socket.io

所以我有这个非常基本的 socket.io 设置，你可能已经看过一千次了。

请注意这里的文件是通过 apache 提供的。

**服务器**（app.js）

```
var io = require('socket.io').listen(8080);

io.sockets.on('connection', function(socket){ 
    socket.emit('server ready', {msg: 'hi'}) ;

    socket.on('random event', function(data) {
        console.log('received');
    })
}); 
```

和**客户**

```
$(document).ready(function() {
    var socket = io.connect('http://127.0.0.1:8080/projectname/server/');

    socket.on('server ready', function(data){ 
        console.log('server ready!'); 
    });

    socket.emit('random event', {hurr: 'durr'});
}); 
```

但是，我得到的唯一输出是

```
 debug - websocket writing 5:::{"name":"server ready","args":[{"msg":"hi"}]} 
```

在节点控制台中，在客户端控制台中没有任何内容。这是错误的。

我已经尝试了来自 socket.io 网站的基本示例，它显示了完全相同的行为。它在节点控制台中记录发出的数据，但似乎没有其他任何事情发生。

编辑：经过进一步调查，在 Firefox 中访问该站点会在节点控制台中创建不同的输出：

```
info  - handshake authorized 178702677759276313
   debug - setting request GET /socket.io/1/xhr-polling/178702677759276313?t=1339080239192
   debug - setting poll timeout
   debug - client authorized for 
   debug - clearing poll timeout
   debug - xhr-polling writing 1::
   debug - set close timeout for client 178702677759276313
   debug - xhr-polling received data packet �17�1::/stock/server/�66�5::/stock/server/:{"name":"random event","args":[{"hurr":"durr"}]}
   debug - setting request GET /socket.io/1/xhr-polling/178702677759276313?t=1339080239263
   debug - setting poll timeout
   debug - clearing poll timeout
   debug - xhr-polling writing 5:::{"name":"server ready","args":[{"msg":"hi"}]} 
```

这看起来就像从客户端发出的数据实际上到达了服务器。但是，它似乎并没有解决实际问题：console.log 行以及客户端和服务器端都没有执行。**此输出来自 Firefox 5.0.1**，它似乎回退到 xhr。

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:07:01.097

如果你`projectname`是`stock`，那是你的问题。Socket.IO 认为您正在使用[namespace](https://github.com/learnboost/socket.io#restricting-yourself-to-a-namespace)。您可以在`xhr-polling received data packet`日志行中看到这一点。`console.log`永远不会被调用，因为您没有在服务器端侦听该名称空间。

您应该摆脱`/projectname/server`客户端连接地址并正确引用客户端库，这样您就不会得到 404。这是 Apache 代理问题还是修复`script src`标题中的问题取决于您当前的设置。我无法从您提供的代码中分辨出来。

PS：Socket.io 应该为客户端库提供服务`http://127.0.0.1:8080/socket.io/socket.io.js`，但您可能会通过从 Apache 服务器在端口 80 提供的文档中引用该资产来遇到跨域源策略问题。快速修复可能是从您的 apache 服务器，位于`socket.io-client`模块`dist`文件夹中。

# java - Gwt-query：从 ImageData 中获取图像

> ID：10932900
> 
> 赞同：2
> 
> 时间：2012-06-07T13:33:40.073
> 
> 标签：java, gwt, canvas, gquery

我正在尝试完成此操作，但我不知道从 Canvas ImageData 获取 GWT 图像。我正在发布这段代码：

```
ImageData canvasImageData = canvas.getContext2d().getImageData(0, 0, 500, 500); 
```

我的目的是以某种方式获取图像，知道吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:28:13.640

要从您的画布创建一个`Image`，您应该使用[Canvas.toDataUrl()](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/canvas/client/Canvas.html#toDataUrl%28%29)，它将为您提供编码为字符串的图像数据，该字符串可用作标签的`src`属性。`<img>`

```
Image canvasImage = new Image(canvas.toDataUrl()); 
```

# javascript - 快速移动鼠标时无法捕捉所有鼠标坐标

> ID：10932903
> 
> 赞同：2
> 
> 时间：2012-06-07T13:33:52.207
> 
> 标签：javascript, jquery

我写了下面的代码来计算鼠标移动的坐标

```
$(document).mousemove(function(e){
  console.log(e.pageX + ", " + e.pageY);
}); 
```

[这](http://jsfiddle.net/Z5L7T/1/)是小提琴。

我的问题是，当我缓慢移动鼠标时，我能够在控制台中看到所有鼠标移动的坐标。但是当我移动得更快时，我看不到所有的东西。只计算了几个。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:36:39.133

不，这是操作系统的设计行为。这不是浏览器的错；浏览器只为您提供从操作系统获得的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:46:02.987

您将需要对它们进行内插（即计算彼此之间的点）。浏览器只会在每个新的滴答声（例如每 0.01 秒）返回鼠标位置。

幸运的是，鼠标位置只是每隔一段时间检查一次，否则操作系统会立即冻结。

内插可能看起来像

```
var posX, posY;
$(document).mousemove(function(e){
  var points = [];
  if(posX && posY) {
      // calculate a straight line that the mouse moved over
      // It gets more difficult if you want to take e.g. 
      // the current curved path into account
      var diffX = e.pageX - posX;
      var diffY = e.pageY - poxY;
      var length = Math.round(Math.sqrt((diffY*diffY)+(diffX*diffX)));
      for(n=0;n<length;n++) {
          var pointX = posX + (n/length) * diffX;
          var pointY = posY + (n/length) * diffY;
          points.push({x:pointX,y:pointY});
      }
  }
  points.push({x:e.pageX,y:e.pageY});
  posX = e.pageX;
  poxY = e.pageY;
  for(point in points) {
      console.log(point.x + ", " + point.y);
  }
}); 
```

# c# - 将数据导出到 Excel 电子表格

> ID：10932904
> 
> 赞同：0
> 
> 时间：2012-06-07T13:33:53.637
> 
> 标签：c#, excel, interop

我将开发一个通用工具包，用于根据数据库数据编写 excel 文件。我之前使用过几种方法：

1）创建一个CSV文件
Excel将打开它并格式化数据，每个值进入一个单元格，每一行是一行。
缺点：默认情况下，文件扩展名并不总是由 excel 打开。
它似乎“切断”了非常大的数据源。在文件的其余部分被excel“忽略”之前，它从内存中达到了大约65,000行。

2) 生成 XML 电子表格
[http://msdn.microsoft.com/en-us/library/bb226687(v=office.11](http://msdn.microsoft.com/en-us/library/bb226687(v=office.11).aspx)
​​).aspx 缺点：打开“您尝试打开的文件 ** 位于与文件扩展名指定的格式不同'。它确实打开得很好，但它不会激发信心。
使编写 SQL-to-XML 变得尴尬。

不久前，我简要介绍了使用 excel**互操作**方法。而且我确信在尝试从没有安装 excel/office 的服务器运行代码时遇到了问题。几乎总是**如此**。

通常，代码将通过网页或 silverlight WCF 服务运行（如果有区别的话）。
并且要么**通过电子邮件发送**给用户，要么也可以选择直接**打开**文件并允许他们保存。
包括标题/颜色/公式将是一个奖励

大多数情况下，他们只会复制/粘贴数据。
但是对于大型数据集，它很容易失败，或者真的很慢。

任何人都给我最好的想法如何去做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:41:06.417

您可以使用[Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)等商业产品在服务器上生成 C# 格式的 Excel 电子表格，而无需安装 Office。如果您想查看对象模型的外观，他们有一些[示例代码可以在 aspx.cs 页面中生成电子表格。](http://www.aspose.com/demos/.net-components/aspose.cells/csharp/business-reports/cost-pareto.aspx)

不幸的是，如果你有不止一个开发人员从源代码​​管理中获取代码并构建它，那么他们的定价方案真的很尴尬。他们正式认为您是同一团队的一员，并要求每个开发人员都获得许可证（即使您是唯一直接使用该代码的程序员）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:44:52.110

由于 CSV 存在在大量行后切断的问题，因此该方法已失效。

使用互操作很棘手。除了确保您在服务器上安装了 Excel 和 PIA，您还需要在单个线程中运行 Excel 代码（使用某种排队机制）。否则，您将开始遇到这方面的问题。

XML 实际上似乎是最可靠的解决方案，除了令人困惑的消息。如果您可以在评论中回答我的问题，我们也可以为您提供帮助。

PS。如果您可以在生成 Excel 工作表之前确定行数（您应该这样做），您可以以 2 种格式之一提供结果：CSV 用于小文件，XML 用于大文件，权衡是令人困惑的消息（提供它不会消失）。根据超过 CSV 阈值的文件的百分比，这可能是一个可以接受的折衷方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:48:53.643

我推荐使用[EPPlus](http://epplus.codeplex.com/)，将 s 转换为 Excel 文件非常容易，`DataTable`并允许大量样式选项甚至数据验证。您甚至不需要在服务器上安装 Excel。

# c - 如何打印函数的地址？

> ID：10932910
> 
> 赞同：19
> 
> 时间：2012-06-07T13:34:20.003
> 
> 标签：c, linux, gcc, function-pointers, gcc-warning

我让`gcc`编译以下示例使用`-Wall -pedantic`：

```
#include <stdio.h>

int main(void)
{
  printf("main: %p\n", main); /* line 5 */
  printf("main: %p\n", (void*) main); /* line 6 */

  return 0;
} 
```

我得到：

```
main.c:5: warning: format ‘%p’ expects type ‘void *’, but argument 2 has type ‘int (*)()’
main.c:6: warning: ISO C forbids conversion of function pointer to object pointer type 
```

第 5 行让我更改了第 6 行中的代码。

打印函数地址时删除警告我缺少什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T14:03:29.277

这本质上是打印函数指针的唯一可移植方式。

```
size_t i;
int (*ptr_to_main)() = main;
for (i=0; i<sizeof ptr_to_main; i++)
    printf("%.2x", ((unsigned char *)&ptr_to_main)[i]);
putchar('\n'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T13:37:28.963

这整个想法确实是不可移植的，因为一些系统使用不同大小的指针来指向代码和数据。

您真正需要的是关于函数指针有多大的特定于平台的知识，以及转换为该大小的整数类型。不幸的是，我认为没有人标准化一个可以保存任何数据指针的`intfuncptr_t`类比。`intptr_t`

* * *

正如 R.[在他的回答](https://stackoverflow.com/a/10933437/103167)`signed`中指出的那样，您始终可以将指针视为 (可能or `unsigned`)的数组`char`，这样您就不需要任何正确大小的整数类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T13:37:44.987

它就在警告中：ISO C 禁止将函数指针转换为对象指针类型，其中包括`void*`. 另请参阅[此问题](https://stackoverflow.com/questions/188839/function-pointer-cast-to-different-signature)。

~~您根本无法以可移植的方式打印函数的地址，因此您无法摆脱警告。~~

您可以使用@R.. 的建议打印函数指针。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T13:38:27.423

虽然将函数指针转换为 void 指针在技术上是危险的，但在 POSIX 标准中使用将函数指针转换为 void 指针，因此几乎可以肯定它适用于大多数编译器。

抬头看`dlsym()`。

# emacs - 如何使用 EMACS 将标准输出重定向到 Elisp 中的文件

> ID：10932915
> 
> 赞同：3
> 
> 时间：2012-06-07T13:34:35.213
> 
> 标签：emacs, lisp, elisp

我使用 with-output-to-temp-buffer 函数，将标准输出重定向到它，将其保存到文件中，切换回上一个缓冲区，然后终止临时缓冲区。

```
(require 'find-lisp)
(with-output-to-temp-buffer "*my output*" 
  (mapc 'print (find-lisp-find-files "~/project/clisp" "\\.lisp$"))
  (setq prev-buffer (buffer-name))
  (switch-to-buffer "*my output*")
  (write-region nil nil "test")
  (switch-to-buffer prev-buffer)
  (kill-buffer "*my output*")
  ) 
```

但出现以下错误。我不知道为什么。

```
Debugger entered--Lisp error: (error "Selecting deleted buffer") 
```

PS：在 elsip（将标准输出重定向到文件）中是否有更优雅的方法来实现这一点。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T13:41:52.383

发生此错误是因为`with-output-to-temp-buffer`尝试在评估其主体后显示缓冲区，但此时您已经删除了缓冲区。我认为`with-temp-file`是您正在寻找的宏。它的文档字符串说：

> `(with-temp-file FILE &rest BODY)`
> 
> 创建一个新缓冲区，在那里评估 BODY，然后将缓冲区写入 FILE。

然后，您可以绑定`standard-output`到新缓冲区，例如：

```
(with-temp-file "test.txt"
  (let ((standard-output (current-buffer)))
    (mapc 'print (find-lisp-find-files "~/project/clisp" "\\.lisp$")))) 
```

# javascript - 在 ajax 函数执行后 html 文本框值更新之前存在延迟

> ID：10932918
> 
> 赞同：0
> 
> 时间：2012-06-07T13:34:39.240
> 
> 标签：javascript, ajax, delay, lag

我在表单中使用 jcaptcha 进行图像验证。在提交表单之前，我使用 javascript 进行 ajax 调用，以验证用户输入的与显示的图像相对应的文本。我得到结果并更新文本框（imageVerification）的值。在执行这个 ajax 调用的函数之后，我从这个刚刚更新的文本框（imageVerification）中获取结果的值。

这是问题所在：我无法从此文本框（imageVerification）中获取值。它总是显示为空白。

抓住：如果我在获取值之前使用 alert()，我能够正确地获取值。我在 firebug 调试模式下运行它，发现即使不使用警报它也可以在调试模式下工作。

似乎在更新文本框（imageVerification）中的值之前存在延迟。所以我引入了一个 setTimeout() 方法并且能够获取值。

但我觉得这不是正确的解决方案。我假设javascript按顺序执行。那么，为什么我的声明在通过无法立即获取它的方法更新后获取值。结果是即使图像验证成功，我的检查也失败了，因为它无法从文本框中获取结果值。

此外，如果我使用一个简单的函数来更新文本框（imageVerification）而不是 ajax 调用，我不会遇到这个问题。

这是我用于 ajax 调用的代码。

函数 fetchContainerContent(url, containerid) {

```
var imageValue = document.forms['ratingForm'].elements['jcaptcha'].value;

    var req = false;
    var parameterString;

    if (window.ActiveXObject) {
        try {
            req = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                req = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    } else if (window.XMLHttpRequest) {
        req = new XMLHttpRequest();
    } else {
        return false;
    }

    req.onreadystatechange = function() {
        requestContainerContent(req, containerid);
    }

    parameterString = "jcaptcha="+imageValue;
    req.open('POST', url, true);
    req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    req.send(parameterString);

}

function requestContainerContent(req, containerid) {
    if (req.readyState == 4 && (req.status==200 || window.location.href.indexOf("http")==-1)){

    //document.getElementById(containerid).innerHTML = req.responseText
    //document.getElementById(containerid).value=req.responseText;
    document.forms['ratingForm'].elements[containerid].value = req.responseText;
    }

} 
```

这是图像验证的功能：

函数验证图像（）{

```
if(isBlank(document.forms['ratingForm'].elements['jcaptcha'].value)){
    showError('',"Please enter the text seen in the image above",'jcaptchaError');
    return false;
}
 fetchContainerContent('captchaController','imageVerification');

 var obj = document.forms['ratingForm'].elements['imageVerification'];
//alert('val '+obj.value);
var vall = obj.value;
if(vall=='PASS'){
    return true;

}
else{
    showError('',"Image verification failed. Please refresh image and try again","jcaptchaError");
    return false;
} 
```

}

发布我对 fetchContainerContent('captchaController','imageVerification') 的调用，应该设置 imageVerification 文本框的值。如果我使用在 fetchContainerContent('captchaController','imageVerification') 调用之后注释的警报框，它可以正常工作。

请帮帮我。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:57:02.073

**更新的答案：第一次通过时误读程序流程。**

基本问题是当 XMLHttpRequest 需要时间来完成时，您正试图从`validateImage()`函数（`return`真或假）获得即时响应。

将基于 的操作移动`return`到它们自己的函数 ( `validFunction`, `invalidFunction`) 并尝试以下操作：

```
function validateImage() {}
  if(isBlank(document.forms['ratingForm'].elements['jcaptcha'].value)){
      showError('',"Please enter the text seen in the image above",'jcaptchaError');
      return false;
  }

  var obj = document.forms['ratingForm'].elements['imageVerification'];

  validReq = fetchContainerContent('captchaController','imageVerification');
  validReq.onload = function () {
    var validResp = this.reponseText;
    if(validResp=='PASS'){
        validFunction();
    }
    else{
        showError('',"Image verification failed. Please refresh image and try again","jcaptchaError");
        invalidFunction();
    }
  }

  validReq.send(parameterString);
}

function fetchContainerContent(url, containerid) {
var imageValue = document.forms['ratingForm'].elements['jcaptcha'].value;
    var req = false;
    var parameterString;

    if (window.ActiveXObject) {
        try {
            req = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                req = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    } else if (window.XMLHttpRequest) {
        req = new XMLHttpRequest();
    } else {
        return false;
    }

    parameterString = "jcaptcha="+imageValue;
    req.open('POST', url, true);
    req.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    return req;
} 
```

# wix - 是否可以在作为托管 .EXE 文件的 WiX 中执行自定义操作？

> ID：10932927
> 
> 赞同：1
> 
> 时间：2012-06-07T13:34:56.480
> 
> 标签：wix, windows-installer, custom-action

我正在尝试执行一个由 C# (.NET 3.5) 编写的自定义操作，该操作依赖于单个 DLL（也是 C# 3.5）。我在安装中包含了 .EXE 和 .DLL，并验证了它们是否被复制到安装位置。但是，每次我尝试运行自定义操作时，都会收到以下错误：

行动开始 7:21:16：InstallFinalize。错误 1721。此 Windows 安装程序包有问题。无法运行完成此安装所需的程序。请联系您的支持人员或软件包供应商。操作：UpgradeTo022，位置：C:\Program Files\Test\，命令：Upgrade-0.2.2.EXE MSI (s) (CC:38) [07:21:19:061]：产品：测试 -- 错误 1721 . 这个 Windows Installer 程序包有问题。无法运行完成此安装所需的程序。请联系您的支持人员或软件包供应商。操作：UpgradeTo022，位置：C:\Program Files\Test\，命令：Upgrade-0.2.2.EXE

自定义操作定义如下：

```
<CustomAction Id="UpgradeTo022"
Directory="INSTALLLOCATION"
Impersonate="no"
Execute="deferred"
ExeCommand='Upgrade-0.2.2.EXE'> 
```

注意：自定义操作必须以提升的权限运行，因此延迟执行和 Impersonate="no" 属性。

安排如下：

```
<InstallExecuteSequence>
     <Custom Action="UpgradeTo022" Before="InstallFinalize">NOT Installed</Custom>
</InstallExecuteSequence> 
```

文件安装如下：

```
<Component Id="CMP_UpgradeCommon" Guid="8ECF5076-732E-4010-A33B-BE362D818949" Win64="yes">
  <File Id="FILE_UpgradeCommonDLL"
   Source="..\Upgrade\UpgradeCommon\bin\Debug\UpgradeCommon.dll" Vital="yes"/>
</Component> 
```

我已经看到一些关于运行托管 EXE 的暗示是自定义操作和 MSis 的问题，但没有真正明确的答案。

我也尝试过只运行一个非常简单的没有依赖关系的 .EXE 作为自定义操作，并且在那里没有运气。

作为创建安装程序包的新手，我很可能要么尝试做一些不受支持的事情，要么错过一些简单的事情。

在此先感谢您提供解决此问题的任何指示。

JT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:27:28.060

不幸的是，这可能是很多事情。首先，您确定.net 3.5 安装在目标机器上吗？从那以后，你真的可以在目标机器上运行 exe 吗？

需要注意的另一件事是延迟操作在系统帐户的上下文中运行，因此如果 exe 出于任何原因需要访问配置文件，这将导致它失败。在尝试生成证书作为安装的一部分时，我遇到了这个问题。我为此挠了很久，最后不得不使用 -RunAs 开关生成 PowerShell，然后运行脚本来调用 exe。可能值得检查应用程序是否在系统帐户下运行良好（http://www.tech-recipes.com/rx/1288/how-to-run-applications-in-the-local-system-account- lsa/)

# php - 在php中将时间格式转换为文本

> ID：10932929
> 
> 赞同：0
> 
> 时间：2012-06-07T13:35:01.723
> 
> 标签：php

我有时间说`"01:30:00"`我想把它转换成`one hour,thirty mins,zero seconds`.

我尝试通过添加将数字转换为文本并在那里添加`."hours".",". ."mins"` ，但是还有其他方法可以获取数据，例如时间到单词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:36:45.750

快速[谷歌搜索](https://www.google.com/search?sugexp=chrome,mod=11&sourceid=chrome&ie=UTF-8&q=php%20convert%20time%20into%20words)找到[了答案](http://www.phpro.org/examples/Convert-Seconds-To-Words.html)：

```
<?php 
    /*** start time ***/ 
    $start = strtotime('10:30 January 7 2004'); 
    /*** time now in seconds ***/ 
        $now = time(); 
    /*** do the math ***/ 
        $seconds = $now-$start; 

    /** 
     * 
     * @convert seconds to words 
     * 
     * @param INT $seconds 
     * 
     * @return string 
     * 
     */ 
        function secondsToWords($seconds) 
        { 
        /*** number of days ***/ 
                $days=(int)($seconds/86400); 
        /*** if more than one day ***/ 
        $plural = $days > 1 ? 'days' : 'day'; 
        /*** number of hours ***/ 
                $hours = (int)(($seconds-($days*86400))/3600); 
        /*** number of mins ***/ 
        $mins = (int)(($seconds-$days*86400-$hours*3600)/60); 
        /*** number of seconds ***/ 
        $secs = (int)($seconds - ($days*86400)-($hours*3600)-($mins*60)); 
        /*** return the string ***/ 
                return sprintf("%d $plural, %d hours, %d min, %d sec", $days, $hours, $mins, $secs);
        } 

    /*** example usage ***/ 

    /*** start time ***/ 
    $start = strtotime('10:30 January 7 2004'); 
    /*** time now in seconds ***/ 
    $now = time(); 
    /*** do the math ***/ 
    $seconds = $now-$start; 

    /*** show the words ***/ 
    echo secondsToWords($seconds); 

?> 
```

# azure - Windows Azure - 从辅助角色获取 Web 角色

> ID：10932931
> 
> 赞同：1
> 
> 时间：2012-06-07T13:35:11.957
> 
> 标签：azure, azure-worker-roles, azure-web-roles

我在 Azure 上有一个网络角色，它的工作之一是上传图片、格式化然后上传到 BLOB。

我使用 web 角色上的临时目录执行此操作 - 所以那里有一个临时文件，我在将其上传到 BLOB 后将其删除。

有时上传中断或 Web 角色出现问题，临时图像文件保留在 Web 角色上。

我想创建一个工作角色，在 X 小时内清理一次该文件夹。我可能会有 100 个 Web 角色（每个角色都在自己的隔离环境中）并且只有 2 个工作角色 - 所以他们必须以某种方式一个一个地获取 Web 角色，然后删除这些文件。

所以我的问题是——这有可能吗？！如果是这样，如何？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:41:21.153

如果您创建一个工作角色，它将在一个单独的 VM 上运行，与您的 Web 角色不同，这会破坏整个想法，因为如果没有精心设计的界面，您将无法访问另一个 VM，而这样的界面肯定会是矫枉过正对于这个任务。

您真正想要的只是一个单独的线程 ( `System.Threading.Thread`)，您从 Web 角色入口点开始并持续监控临时文件夹中的剩余文件。那将是便宜且有效的。

# c# - 使用 C# 在 .avi 文件中查找

> ID：10932932
> 
> 赞同：1
> 
> 时间：2012-06-07T13:35:14.733
> 
> 标签：c#, avi, seek, wmp

首先，我是 C# 新手，所以请耐心等待。

我正在制作一个应用程序，它在 Windows 媒体播放器中显示一个 .avi 文件，如下所示：

```
private void button1_Click(object sender, EventArgs e)
    {
        axWindowsMediaPlayer1.URL = @"C:BlaBla\Family Guy\Season 10\S10E16.HDTV.x264-LOL.avi";
    } 
```

我发现你不能在 .avi 文件中快进或快退，因为它没有被索引。但是使用 axWindowsMediaPlayer1 的 WMP-slider，您可以将文件设置为在特定点播放。例如，开始播放电影，然后将滑块拖动到 05:00 以跳过前 5 分钟。

我想以编程方式执行此操作，但我不知道如何做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:46:47.033

免责声明：我以前从未使用过这个。

但是，从[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564740%28v=vs.85%29.aspx)中可以看出，您可以像这样在视频中设置位置：

```
axWindowsMediaPlayer1.Ctlcontrols.currentPosition = 300d; 
```

（其中值是您要导航到的视频开头的秒数 - 我已根据要求将其设置为 5 分钟）。

**编辑：**从下面的评论 - 快进，有一种方法可以为您做到这一点。您可以先检查是否可以这样做，这里的文档中有一个示例[，](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564741%28v=vs.85%29.aspx)我已为您修改：

```
if (axWindowsMediaPlayer1.Ctlcontrols.get_isAvailable("fastForward"))
{
   axWindowsMediaPlayer1.Ctlcontrols.fastForward();
} 
```

这会检查它是否可以快进，然后以 5 倍正常速度播放，直到你告诉它做其他事情，或者我猜它到达视频的结尾！

# jquery - 如何在点击事件上使用 :not 选择器？

> ID：10932933
> 
> 赞同：3
> 
> 时间：2012-06-07T13:35:17.363
> 
> 标签：jquery

首先我尝试这样：

```
$('.choose-car li:not(.selected)').click(function () {
    console.log('works and with selected');
    $(this).addClass('selected');
}); 
```

然后我想了想，然后尝试这样：

```
$('.choose-car li:not(.selected)').on('click', function () {
    console.log('works and with selected');
    $(this).addClass('selected');
}); 
```

两者都适用于选定的..

但现在我想也许我必须在第一次点击后删除点击事件，或者有更简单的解决方案吗？也许我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:41:12.053

`selected`注册处理程序后，您的代码正在添加类。`selected`这可能不是您想要的，因为即使在获取类之后，处理程序仍将绑定到元素。

尝试委派事件：

```
$(".choose-car").on("click", "li:not(.selected)", function() {
    $(this).addClass("selected");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:39:40.273

```
$( ".choose-car" ).on( "click", "li", function(){
    if( $(this).hasClass("selected") ) {
        return;
    }

     $(this).addClass('selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:40:10.787

```
if($(this).hasClass('selected')){
$(this).removeClass('selected')
}
else{
$(this).addClass('selected')
} 
```

# mysql - ifnull 在 mysql 上不起作用

> ID：10932937
> 
> 赞同：2
> 
> 时间：2012-06-07T13:35:30.960
> 
> 标签：mysql, coalesce, ifnull

我有下表：

```
+----+------------+----------+------------------+
| 编号 | created_at | 平台 | 平台版本 |
+----+------------+----------+------------------+
| 1 | 1 | 麦克 | 1 |
| 2 | 2 | 麦克 | 1 |
| 3 | 3 | 麦克 | 2 |
| 4 | 4 | 麦克 | 2 |
| 5 | 5 | 麦克 | 2 |
| 6 | 5 | 麦克 | 3 |
| 7 | 2 | 窗户 | 1 |
| 8 | 2 | 窗户 | 2 |
| 9 | 3 | 窗户 | 3 |
| 10 | 3 | 窗户 | 1 |
| 11 | 4 | 窗户 | 2 |
| 12 | 4 | 窗户 | 3 |
| 13 | 5 | 窗户 | 4 |
| 14 | 5 | 窗户 | 1 |
| 15 | 6 | 窗户 | 2 |
| 16 | 6 | 窗户 | 3 |
+----+------------+----------+------------------+

```

我希望得到如下结果：

```
+-------------+----------------+---------------+--- ---------+
| 组数 | running_total | windows_total | created_at |
+-------------+----------------+---------------+--- ---------+
| 1 | 1 | 0 | 1 |
| 6 | 7 | 4 | 2 |
| 7 | 14 | 8 | 4 |
| 2 | 16 | 10 | 6 |
+-------------+----------------+---------------+--- ---------+

```

但是当我执行这个选择语句时：

```
选择组数，
       (@r := @r + group_count ) 作为 running_total，
       (@w := @w + ifnull(win_count, 0)) 作为 windows_total,
       t1.created_at
从（选择（@r：=0），
                COUNT( * ) AS group_count,
                平台，
                created_at
       从设备
       GROUP BY created_at DIV 2
      ) 作为 t1 左加入
      (SELECT COUNT( * ) AS win_count,
                created_at
       从设备
       WHERE 平台 = 'windows'
       GROUP BY created_at DIV 2
      ) AS t3 ON t1.created_at = t3.created_at

```

结果是这样的：

```
+-------------+----------------+---------------+--- ---------+
| 组数 | running_total | windows_total | created_at |
+-------------+----------------+---------------+--- ---------+
| 1 | 1 | 空 | 1 |
| 6 | 7 | 空 | 2 |
| 7 | 14 | 空 | 4 |
| 2 | 16 | 空 | 6 |
+-------------+----------------+---------------+--- ---------+

```

合并也不起作用。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T23:09:21.937

作为记录，我引用@eggyal的回答：

@w 最初为 NULL，因此将其添加到 IFNULL 的结果（无论该结果是什么）都会产生 NULL。
在子选择中给它一个初始值，就像你对 @r 所做的那样

```
SELECT group_count,
       (@r := @r + group_count ) AS running_total,
       (@w := @w + ifnull( win_count, 0 )) AS windows_total,
       t1.created_at
FROM  (SELECT   (@r:= 0),(@w:= 0),
                COUNT(*) AS group_count,
                platform,
                created_at
       FROM     devices
       GROUP BY created_at DIV 2
      ) AS t1 LEFT JOIN
      (SELECT   COUNT( * ) AS win_count,
                created_at
       FROM     devices
       WHERE    platform = 'windows'
       GROUP BY created_at DIV 2
      ) AS t3 ON t1.created_at = t3.created_at 
```

这应该可以解决问题。

# junit - hamcrest-library Matchers 和 hamcrest-core CoreMatchers 之间的区别

> ID：10932941
> 
> 赞同：74
> 
> 时间：2012-06-07T13:35:41.373
> 
> 标签：junit, hamcrest

看起来 hamcrest`org.hamcrest.Matchers`类非常相似`org.hamcrest.CoreMatchers`（尽管看起来`Matchers`有更多）。我为什么会选择使用`CoreMatchers`（除了看起来类略小），为什么这两个类如此相似？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-08T20:45:58.693

Hamcrest 匹配器分为几个模块。“核心”包括构建其他匹配器所需的最基本的匹配器和抽象类。`org.hamcrest.CoreMatchers`包括这些匹配器的工厂方法。其他匹配器位于“库”模块中，按它们匹配的对象类型分组，并且是可选的。`org.hamcrest.Matchers`包括两组匹配器。

你应该使用哪个？我从后者静态导入所有内容，没有任何麻烦。也许编译时间可能需要稍长一些，但这对我来说从来都不是问题。除了 JUnit 导入之外，我还把它放在了单元测试的顶部：

```
import static org.hamcrest.MatcherAssert.*;
import static org.hamcrest.Matchers.*; 
```

这在测试方法中提供了最佳的可读性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-19T22:23:45.863

如果你经常使用 Mockito（就像我一样），你可能会这样做：

```
import org.mockito.Mockito; 
```

或者

```
static import org.mockito.Mockito.*; 
```

并且由于`Mockito`该类扩展了 Mockito 的`Matchers`类，因此您最终可能会在 Matchers 类或其静态方法之间发生冲突。拥有 CoreMatchers 允许我在与 Mockito 相同的类中使用 JUnit 派生的 CoreMatchers，而无需在使用时对它们进行完全限定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-24T13:18:21.867

如果您使用 Android 的 JUnit 测试（未连接测试），则`CoreMatcher`s 似乎在已包含的*junit*模块中可用，而 s 则不可用`Matchers`。

因此，为了节省开销并避免导入另一个库，请考虑使用`CoreMatcher`这些类的版本（如果它们足够）：

```
assertThat(chrome.twiddle(), is(equalTo(0))); 
```

仅使用[`CoreMatcher`s](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/CoreMatchers.html)是可能的。

# javascript - 在jquery中将元素置于焦点下

> ID：10932945
> 
> 赞同：1
> 
> 时间：2012-06-07T13:35:52.190
> 
> 标签：javascript, jquery

我想把元素放在`focus`它后面`append`，意思类似于：

```
$("id").append($("elementid")).focus();        // not working 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:37:08.133

在您的示例中，您正在向`id`元素添加焦点，这就是它不起作用的原因。

试试这个解决方案：

```
$("#elementid").appendTo("#id").focus(); 
```

**演示：http:** [//jsfiddle.net/wRSBY/](http://jsfiddle.net/wRSBY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:41:31.810

jQuery [ID 选择器](http://api.jquery.com/id-selector/)`#`在 id 之前需要一个。

所以

```
$("#id").append($("#elementid")).focus(); 
```

如果你想把焦点放在你的`#id`DOM 元素上应该可以工作，如果你想把焦点放在`#elementid`DOM 元素上，那么你可以使用[VisioN 的答案](https://stackoverflow.com/a/10932977/221213)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:50:43.770

尝试触发

```
$("#id").trigger('focus'); 
```

# c - 哪段代码效率更高？

> ID：10932950
> 
> 赞同：0
> 
> 时间：2012-06-07T13:36:00.287
> 
> 标签：c, performance

为了初始化 100×100 二维数组的所有元素，我们可以通过两种方式进行：

**方法一：**

```
int a[100][100];
for(i=0; i<100; i++){
    for(j=0; j<100; j++){
        a[i][j] = 10;
    }
} 
```

**方法二：**

```
int a[100][100];
for(j=0; j<100; j++){
    for(i=0; i<100; i++){
        a[i][j] = 10;
    }
} 
```

现在我的问题是哪种方法更有效，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T13:38:03.767

第一种方法，因为它将按顺序访问数组。

*C 以行*优先顺序存储二维数组，这意味着 a[i][j] 将与 a[i][j+1] 相邻，但不与 a[i+1][j] 相邻。

说同样事情的另一种方式（推广到> 2维）是最右边的索引在内存中是相邻的。或者，增加索引意味着您必须跳过要增加的索引右侧的所有维度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:40:03.627

[C11 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，第6.5.2.1.3 节指示数组存储为[row-major](http://en.wikipedia.org/wiki/Row-major_order)。这意味着第一种方法是顺序访问内存，而第二种方法不是。**根据您的 CPU 的缓存机制、RAM 访问机制和数组的尺寸，两者都可能更快**。一般来说，我会说第一种方法更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:11:13.687

我怀疑两个循环的速度相同，实际上生成的代码是相同的。除非数组是易失的，否则编译器可以自由切换循环，并且应该将它们切换到对目标机器更好的顺序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:46:40.713

当你声明一个像它的内存一样的数组时，`int a[100][100]`它的布局与你声明的一样，`int a[10000]`这意味着如果你只在 a 上迭代，你就可以连续访问所有单元格。

该标准表明该数组是按行存储的，这意味着您在内存中的前一百个单元格将是`a[0][0]`to`a[0][99]`然后`a[1][0]`to `a[1][99]`。

在大多数 CPU 上，第一种方法会更快，因为 CPU 能够将（大部分）阵列加载到 CPU 缓存中，因此可以快速访问它。请注意，这可能在不同的 CPU 之间有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:13:17.317

这取决于您使用的语言是[行优先](http://en.wikipedia.org/wiki/Row-major_order)还是列优先。内存中的任何内容始终以一维方式布局，因此所有 2D 内容也以 1D 方式转换。现在请注意，有两种方法可以做到这一点。

1.  i*(一行中的元素数) + j 其中 i 是行号。j是列号。

2.  i*（一列中的元素数量）+ j 其中 i 是列号，j 是行号。

所以这里第一个是将二维数组转换为一维方式的行主要方式，第二个是列主要方式。像 C/C++ 这样的语言是行优先的，所以它们遵循第一种方式。

现在观察第一种方式，根据行中元素的数量，您的点 (0,0) 和 (1,0) 非常非常远，但是 (0,0) 和 (0,1) 是相邻的.

因此，作为最终答案，您的问题取决于编程语言，它是行主要编程语言还是列主要编程语言。在 C/C++ 中，因为它们是行优先的，所以第一个会更快。

# xaml - 如何在 windows8 的 Metro 应用程序中创建菜单项

> ID：10932953
> 
> 赞同：4
> 
> 时间：2012-06-07T13:36:07.043
> 
> 标签：xaml, windows-8, microsoft-metro, visual-studio-2012

我正在尝试使用visual studio 2012RC在windows8中开发metro appications。这里我需要像列一样的菜单项，如果用户点击它，每个项目都需要导航单独的页面。这里我试图给你我的应用场景。任何工作示例对我真的很有帮助。

谢谢你。

地铁应用：

```
----------------------------------
|        |                       |
| Item1  |-->Page1               |
|=========                       |
|        |-->Page2               |
| Item2  |                       |
|=========                       |
|        |                       |
| Item3  |-->Page3               |
|=========                       |
|  Item4 |-->Page4               |
|        |                       |
---------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:31:57.853

您可以使用包含一堆按钮的垂直 StackPanel：然后每个按钮将导航到专用页面。

# php - 表单漏洞测试的典型文本

> ID：10932955
> 
> 赞同：0
> 
> 时间：2012-06-07T13:36:15.530
> 
> 标签：php, javascript, html, forms, xss

对于通常的需要，我正在寻找一个典型的文本块来尝试我的 HTML/PHP 表单，并发送邮件。

目前，我使用这个：

```
test "test"
çà ;: $€
<script>alert('test');</script> 
```

它允许我测试：

*   特殊字符
*   XSS 漏洞
*   报价问题
*   换行符

我想让这个块进化，这就是为什么我问是否有人使用类似的块，也许更完整。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:40:36.433

很多有用的可以在这里尝试：[https ://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)

# algorithm - 找到通过最大点数的线

> ID：10932958
> 
> 赞同：3
> 
> 时间：2012-06-07T13:36:19.757
> 
> 标签：algorithm, data-structures, graph, graph-theory

[我在CareerCup](http://www.careercup.com/question?id=56605)上找到了一个 Google 面试问题

> 给定一个二维平面，假设上面有大约 6000 个点。找到通过最多点数的线。

那里的许多答案说这个问题很难并且涉及某种特殊算法。

但我的观点不同，也许我错了。

**这是我的想法：**

首先，我将为 2D 平面提供一个轴系。因此，每个点都有其唯一的 x 和 y，即`{x, y}`。为简单起见，我们可以将轴系`{0, 0}`作为整个平面的左下角，因此每个 x 和 y 都大于 0。

然后我有一个理论：

如果几个点在同一条线上，那么它必须是以下三种情况之一：

1.  它们的**`x`**值相同
2.  它们的**`y`**值相同
3.  它们的**`x/y`**或**`y/x`**值相同。但是`x/y`case 和 case 是一样的`y/x`，所以我们只关注**`x/y`**.

然后我将有 3 个哈希表。

1.  第一个 ( `hashtable-x`) 是 key of `x`，value 是相同点的列表`x`；

2.  第二个（`hashtable-y`）是键，`y`值是具有相同点的列表`y`；

3.  最后一个（`hashtable-x-y`）是键，`x/y`值是具有相同点的列表`x/y`；

然后我扫描整个 6000 个点，对于每个点，我将得到它的`x`from `hashtable-x`，并将该点放入该插槽的值（列表）中；`hashtable-y`然后我会对and做类似的事情`hashtable-x-y`。

最后，我将扫描 3 个哈希表中的所有列表，并找到最长的列表将包含所需行的点。

你觉得我的算法怎么样？

* * *

好的，这是重复的，抱歉我之前没有找到这个问题。

[找到通过大多数点的直线的最有效算法是什么？](https://stackoverflow.com/questions/4179581/what-is-the-most-efficient-algorithm-to-find-a-straight-line-that-goes-through-m)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:34:43.350

您的算法将无法按说明工作。考虑许多点落在 y=2x + 1 线上，这意味着您得到 (1,3)、(2,5)、(3,7)、(4,9) 和 (5,11)。

我不认为你应该解决这个问题，除非你有计算几何的研究生课程。处理是将所有点转换为对偶空间中的线，使用点线对偶性并找到大多数线相交的点。天真地，您可以通过遍历每对线并以分析形式评估它们相交的位置，在 O(n^2) 中做到这一点。我还认为您可以通过使用平面扫描样式算法来完成 O(n log n)，但我不确定细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:14:01.587

我将假设我的答案中的点数大于或等于 2（零和一分是微不足道的情况）。

首先注意任何这样的线必须通过至少两个点。所以我们可以构造一个解决方案如下：

```
for each pair of points p1,p2
    find equation of the line l passing through p1,p2

    for each point p3 not p1 or p2
        if p3 lies on l
            counter[l]++

return argmax(counter) 
```

# jquery - 如何使用 jQuery 以嵌套形式生成 2 个新的关联对象？

> ID：10932959
> 
> 赞同：1
> 
> 时间：2012-06-07T13:36:21.533
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, associations, nested-forms

我有一个名为 Pair 的模型，它有多个：问题，每个问题都有一个：答案。

我一直在关注这个[关于创建嵌套表单的 railscast](http://railscasts.com/episodes/197-nested-model-form-part-2)，但是我想在单击“添加问题”链接时同时生成一个问题字段和它的答案字段。

在遵循 railscast 之后，这就是我所拥有的：

..javascripts/common.js.coffee：

```
window.remove_fields = (link)->
  $(link).closest(".question_remove").remove()

window.add_fields = (link, association, content)->
  new_id = new Date().getTime()
  regexp = new RegExp("new_" + association, "g")
  $(link).before(content.replace(regexp, new_id)) 
```

application_helper.rb：

```
def link_to_add_fields(name, f, association)
   new_object = f.object.class.reflect_on_association(association).klass.new
   fields = f.simple_fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
     render(association.to_s.singularize + "_fields", :f => builder)
   end
   link_to_function(name, "window.add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")", class: "btn btn-inverse")
end 
```

意见/对/_form.html.erb：

```
<%= simple_form_for(@pair) do |f| %>
  <div class="row">
    <div class="well span4">
      <%= f.input :sys_heading, label: "System Heading", placeholder: "required", input_html: { class: "span4" } %>
      <%= f.input :heading, label: "User Heading", input_html: { class: "span4" } %>
      <%= f.input :instructions, as: :text, input_html: { class: "span4 input_text" } %>
    </div>
  </div>

  <%= f.simple_fields_for :questions do |builder| %>
    <%= render 'question_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "<i class='icon-plus icon-white'></i> Add Another Question".html_safe, f, :questions %>
  <%= f.button :submit, "Save Pair", class: "btn btn-success" %>
<% end %> 
```

_question_fields.html.erb 部分：

```
<div class="question_remove">
  <div class="row">
    <div class="well span4">
      <%= f.input :text, label: "Question", input_html: { class: "span4" }, placeholder: "your question...?" %>

      <%= f.simple_fields_for :answer do |builder| %>
        <%= render 'answer_fields', f: builder %>
      <% end %>
    </div>
  </div>
</div> 
```

_answer_fields.html.erb 部分：

```
<%= f.input :text, label: "Answer", input_html: { class: "span4" }, placeholder: "your answer" %>
<%= link_to_function "remove", "remove_fields(this)", class: "float-right" %> 
```

我对 reflect_on_association 部分特别困惑，例如调用`.new`那里如何创建关联？我通常需要使用`.build`

同样对于我使用的 has_one`.build_answer`而不是`answers.build`- 那么这对 jQuery 部分意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:18:46.433

检查这一点的一种方法是在 Rails 控制台中运行帮助脚本。

```
new_object = f.object.class.reflect_on_association(association).klass.new 
```

您正在获取 Form 对象并找到它所在的类（f.object.class - 在本例中为**pair**），然后使用 reflect_on_association(association) - 返回命名关联的 AssociationReflection 对象（作为符号从论据，即：问题）。

您可以使用 reflect_on_all_associations 查看每个类的所有这些 AssociationReflection 对象。

在此之后，您需要 AssociationReflection 所代表的类（这就是您使用 klass 而不是类的原因） - 然后您创建该类的新实例。

为什么不使用 build_#{association_name} 或 #{association_name}.builds 而不是 new 可能是因为脚本不知道关联是 has_one 还是 HABTM，直到它已经检索到关联对象的实例并且额外的逻辑是不值得的。

[http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html)

顺便说一句，修改后的 railcast 使用了一种稍微不同的方式来生成关联对象：但想法是一样的（在这种情况下，您发送 - 调用 - 表单对象上的一个方法，然后生成相关类）

```
new_object = f.object.send(association).klass.new 
```

至于在帮助程序中使用两个模型沿着这条线？

application_helper.rb

```
def link_to_add_nested_fields(name, f, association, nested_association)
   new_object = f.object.class.reflect_on_association(association).klass.new
   new_object.send(nested_association).new
   fields = f.simple_fields_for(association, new_object, :child_index => "new_#{association}") do |builder|
     render(association.to_s.singularize + "_fields", :f => builder)
   end
   link_to_function(name, "window.add_fields(this, \"#{association}\", \"#{escape_javascript(fields)}\")", class: "btn btn-inverse")
end 
```

例如

```
<%= link_to_add_fields "<i class='icon-plus icon-white'></i> Add Another Question".html_safe, f, :questions, :answer %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-09T12:27:48.783

下面的作品。我没有使用**form_for**代替**simple_form_for**和**fields_for**代替**simple_fields_for**。感谢粘贴

**def link_to_add_nested_fields（名称，f，关联，nested_association）**

new_object = f.object.class.reflect_on_association(association).klass.new

id = new_object.object_id # 需要索引，很重要。在浏览器中检查

nested_new_object = new_object.class.reflect_on_association(nested_association).klass.new

fields = f.fields_for(association, new_object, :child_index => id) 做 |builder|

```
builder.fields_for(nested_association, nested_new_object, :child_index => id) do |builder1|
  render(association.to_s.singularize + "_fields", association.to_s.singularize.to_sym => builder) + render(nested_association.to_s.singularize + "_fields", nested_association.to_s.singularize.to_sym => builder1)
end 
```

结尾

link_to(name, 'javascript:void(0)', class: "add_fields", data: {id: id, fields: fields.gsub("\n", "")})

**结尾**

# ios - 将 UIImage 保存到个人文件夹，然后通过 UIImage.FromFile 加载它

> ID：10932960
> 
> 赞同：0
> 
> 时间：2012-06-07T13:36:24.640
> 
> 标签：ios, xamarin.ios, uiimagepickercontroller, fromfile

我已经通过 UIImagePickerController 完成了一个图片选择器。由于内存问题，我想将选定的图像保存到磁盘，如果需要，从文件路径加载它。但我无法让它工作。

如果我直接绑定原始图像，则显示没有问题。

代码中的 File.Exists 返回 true，但如果在调试器中观看，最后一行中的图像为空。非常感谢您的帮助！

```
 NSData data = originalImage.AsPNG();

                    string path = Environment.GetFolderPath (Environment.SpecialFolder.Personal);
                    string pathTempImage = Path.Combine(path, "tempImage.png");

                    byte[] tempImage = new byte[data.Length];

                    File.WriteAllBytes(pathTempImage, tempImage);

                    if(File.Exists(pathTempImage))
                    {
                        int i = 0;
                    }

                    UIImage image = UIImage.FromFile(pathTempImage); 
```

**更新**

这是对我有用的代码：

```
void HandleFinishedPickingMedia (object sender, UIImagePickerMediaPickedEventArgs e)
    {
        _view.DismissModalViewControllerAnimated (true);

        BackgroundWorker bw = new BackgroundWorker();

        bw.DoWork += delegate(object bwsender, DoWorkEventArgs e2) {
            // determine what was selected, video or image
            bool isImage = false;
            switch(e.Info[UIImagePickerController.MediaType].ToString()) {
                case "public.image":
                    Console.WriteLine("Image selected");
                    isImage = true;
                    break;
                case "public.video":
                    Console.WriteLine("Video selected");
                    break;
            }

            // get common info (shared between images and video)
            NSUrl referenceURL = e.Info[new NSString("UIImagePickerControllerReferenceUrl")] as NSUrl;
            if (referenceURL != null)
                Console.WriteLine("Url:"+referenceURL.ToString ());

            // if it was an image, get the other image info
            if(isImage) {
                // get the original image  
                originalImage = e.Info[UIImagePickerController.OriginalImage] as UIImage;
                if(originalImage != null) {
                    NSData data = originalImage.AsPNG();
                    _picture = new byte[data.Length];

                    ImageResizer resizer = new ImageResizer(originalImage);
                    resizer.RatioResize(200,200);

                    string path = Environment.GetFolderPath (Environment.SpecialFolder.Personal);
                    string pathTempImage = Path.Combine(path, "tempImage.png");
                    string filePath = Path.Combine(path, "OriginalImage.png");

                    NSData dataTempImage = resizer.ModifiedImage.AsPNG();
                    byte[] tempImage = new byte[dataTempImage.Length];

                    System.Runtime.InteropServices.Marshal.Copy(dataTempImage.Bytes,tempImage,0,Convert.ToInt32(tempImage.Length));

                    //OriginalImage
                    File.WriteAllBytes(filePath, _picture); 

                    //TempImag
                    File.WriteAllBytes(pathTempImage, tempImage);

                    UIImage image = UIImage.FromFile(pathTempImage);

                    _view.InvokeOnMainThread (delegate {
                        templateCell.BindDataToCell(appSelectPicture.Label, image);
                    });

                    _picture = null;
                }
            } else { // if it's a video
                // get video url
                NSUrl mediaURL = e.Info[UIImagePickerController.MediaURL] as NSUrl;
                if(mediaURL != null) {
                    Console.WriteLine(mediaURL.ToString());
                }
            }          
            // dismiss the picker
        };

        bw.RunWorkerAsync();

        bw.RunWorkerCompleted += HandleRunWorkerCompleted;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:46:23.667

```
byte[] tempImage = new byte[data.Length];
File.WriteAllBytes(pathTempImage, tempImage); 
```

`data`在保存之前，您不会将图像复制到分配的数组中。这会导致一个大的空文件不是有效的图像。

尝试使用其中一种`NSData.Save`重载，例如：

```
NSError error;
data.Save (pathTempImage, NSDataWritingOptions.FileProtectionNone, out error); 
```

这将允许您避免分配`byte[]`数组。

# iphone - 如何以可变角度旋转 UIImageView？

> ID：10932961
> 
> 赞同：0
> 
> 时间：2012-06-07T13:36:27.870
> 
> 标签：iphone, objective-c, ios, quartz-graphics

我创建了一个`UIImageView` 这里的代码

```
capView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:kARROW_CAP_NAME]];
capView.frame = CGRectMake(0, 0, kARROW_H, kARROW_H);
[self addSubview:capView]; 
```

现在我有两点需要在视图中移动，所以，它们正在更新..

A点、B点

我得到了他们之间的角度：

```
CGFloat angleBetweenPoints(CGPoint first, CGPoint second) 
{
    CGFloat height = second.y - first.y;
    CGFloat width = first.x - second.x;
    CGFloat rads = atan(height/width);
    return RADIANS_TO_DEGREES(rads);
} 
```

当我将此角度应用于我的 UIImageView 时，它会不断变化，

我在这里使用的代码：

```
capView.transform = CGAffineTransformMakeRotation(arrowAngle); 
```

或者

```
capView.transform = CGAffineTransformRotate(self.transform, arrowAngle); 
```

箭头角度是我上面写的上述函数的值..

请看一下并帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:00:30.483

得到了答案，很简单。。

但是还是没有人给我答案。。

```
capView.transform = CGAffineTransformMakeRotation(RADIANS(M_PI_2 - arrowAngle)) 
```

而RADINAS在这里是宏定义的，

```
#define RADIANS(degrees) ((degrees * M_PI) / 180.0) 
```

感谢所有参与其中的人..

# java - java - 如何在java中使用for循环打印带有“*”的三角形？

> ID：10932962
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:36:29.243
> 
> 标签：java, for-loop, console-output

我想用for循环画一个像下面这样带有星星的三角形，但我真的不知道该怎么做？三角形将是这样的：

```
*
**
***
****
*****
******
*******
********
*********
********** 
```

等等。有人可以帮我吗？

```
public class Project1 {
    public static void main (String[] args){
        int c, d, e;
        for (c = 1 ; c <= 8 ; c++){
            for (d = 1 ; d <= c ; d++){
                System.out.print ("*");
            }
            System.out.println("");
        }

        for (e = 1 ; e <= 4 ; e++){
            System.out.println ("***");
        }
    } 
} 
```

这是我从互联网上找到的，但我不明白它使用两个循环的原因。（我理解用于构造茎的那个。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:44:08.277

```
public static void main(String[] args)
{

    StringBuilder stars = new StringBuilder();

    for(int i = 0; i <= 10; i++)
    {
           stars.append("*");
           System.out.println(stars);
    }

} 
```

或者使用嵌套循环：（这是练习*真正*想让你做的事情）

```
public static void main(String[] args)
{
    for(int i = 0; i <= 10; i++)
    {
        for(int j=0; j<=i; j++)
        {
            System.out.print("*");
        }
        System.out.print("\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T13:44:37.523

您将需要两个 for 循环；一个打印行，一个打印一行中的字符。当前行的编号可以用来打印一定数量的星星。

用于`System.out.print("*")`在不添加新行的情况下打印，在第二个循环结束时执行`System.out.println()`

我将把循环的实现作为练习，这里是语法：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:53:04.690

只是为了评论您在互联网上找到的代码......

1.  `for`循环应始终从 开始，`0`除非您有特定的理由从 开始`1`。从头开始练习是一个好习惯`0`，因为它会在你使用 java 时帮助你`arrays`。
2.  彼此内部的 2 个`for`循环......外部循环只是控制三角形中有多少条线（`8`在这种情况下）。内部循环正在写入该行的星数。这不是实现结果的最佳方式，但它可以正常工作。
3.  底部的`for`循环正在写出星星，看起来像树干。

希望这有助于您的理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T04:37:11.977

```
public class StarA {

public static void main(String[] args) {

    for( int i = 1; i <= 5; i++ )
    {
        for( int j = 0; j < i; j++ )
        {
            System.out.print("*");

        }
        System.out.println();
    }

    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T19:14:58.373

这可以为您解决问题。

```
class Seven 
{
public static void main(String arg[])
{
for(int i=0;i<=8;i++)
{
for(int j=8;j>=i;j--)
{
System.out.print(" ");
}
for(int k=1;k<=(2*i+1);k++)
{
System.out.print("*");
}
System.out.println("\n");
}
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-05T04:36:47.607

```
import java.util.Scanner;
public class apple{
public static void main(String[] args){

int c,r;
for(c=1; c<=10; c++){
for(r=1; r<=c; r++){
System.out.print("*");
}
System.out.println();
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-23T09:36:08.023

```
 import java.util.*;

          class StarForloop
{
          public static void main(String arg[])
    {
          Scanner ob=new Scanner(System.in); //getting input
          System.out.println("Enter any NO");

          int count=ob.nextInt(); 
        String ab="*";  // initialize string variable

          for(int i=1; i<=count; i++)
        {

           ab=ab+"*"; // here you add one another string
            System.out.println(ab);

        }           
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-03T07:35:49.607

您只需要两个循环即可实现所需的目标，第三个循环是无用的，第一个外循环用于行，内循环用于打印“*”。外循环用于更改行并保持所需行数。

```
public static void tri()
{ 
     for(int i=0;i<8;i++)
       {
          for(int j=0;j<=i;j++)
             {
                System.out.print("*");
                }
                   System.out.println();
                     }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-03T00:55:34.633

```
for(int aj =5;aj>=1;aj--){

            for (int a1 = 0; a1 < aj; a1++) {
                System.out.print(" ");
            }
                    for(int a2 = 5;a2>=aj;a2--) {
                        System.out.print("$");
                    }
                for(int a2 = 5;a2>aj;a2--) {
                    System.out.print("$");
                }
            System.out.println(); 
```

# sitecore - Sitecore Xpress - 缺少开发人员

> ID：10932967
> 
> 赞同：2
> 
> 时间：2012-06-07T13:36:44.937
> 
> 标签：sitecore

我已经在虚拟机（MS Server 2008 R2）上安装了 Sitecore Xpress 版本。我注意到 sitecore 仅适用于 Firefox。使用 IE8（或 IE9）或 Chrome 都没有为我提供选择适当用户界面的选项。此外，登录 Sitecore 时所有图标都丢失了，我也无法选择任何操作（按钮单击根本不起作用）。除此之外，我想知道为什么在登录前我无法将开发人员用户界面作为选项？在 Xpress 版本中是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:54:38.517

我们在 IE8 上使用过 Sitecore Express。它工作得很好。

您使用的是哪个操作系统？

如果您使用的是 server 2008，则必须降低 Intranet 的安全级别。或者，您可以将您的站点添加到受信任的站点。两个选项都在 Internet Explorer 工具 -> 选项 -> 安全中

在 Sitecore Express 的登录屏幕上单击高级选项。您将获得 6 个选项

1.  桌面
2.  内容编辑器
3.  页面编辑器
4.  预览
5.  工作箱
6.  开发者中心

# c# - 在 C# 中使用 Oracle 依赖关系更改通知

> ID：10932968
> 
> 赞同：4
> 
> 时间：2012-06-07T13:36:45.047
> 
> 标签：c#, oracle11g

我正在尝试在 c# 中获取 oracle 数据库更改通知。我找到 了有关如何获取这些通知的[教程。](http://docs.oracle.com/cd/B19306_01/win.102/b14307/featChange.htm#BABDGFBH)我还创建了简单的 win 表单应用程序来捕获通知

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        SetUpNotification();
    }

    private void SetUpNotification()
    {
        var login = "DATA SOURCE=XE;PERSIST SECURITY INFO=True;USER ID=USR;PASSWORD=PWD";

        OracleConnection conn = null;
        OracleDependency dep = null;

        try
        {
            conn = new OracleConnection(login);

            var cmd = new OracleCommand("select * from customer_details", conn);

            conn.Open();

            cmd.AddRowid = true;
            dep = new OracleDependency(cmd);
            cmd.Notification.IsNotifiedOnce = false;

            dep.OnChange += new OnChangeEventHandler(dep_OnChange);
        }
        catch(Exception e)
        {
            MessageBox.Show(e.Message, e.Source, MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }

    void dep_OnChange(object sender, OracleNotificationEventArgs eventArgs)
    {
        MessageBox.Show(eventArgs.Details.ToString(), "Database changed");
    }
} 
```

登录字符串和 OracleCommand cmd 100% 没问题。我还尝试以编程方式更改数据库，它更改了数据库中的数据，但没有触发 OnChange 事件。

我还向 tu USR 用户授予了通知

```
grant change notification to USR 
```

并且 job_queue_processes 大于零。

事实上，我使用的是 Oracle 数据库的**Express 版本，这可能是一个问题吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T12:52:54.490

我找到了解决方案。问题不在Oracle数据库的版本中，而在版本中。Oracle 服务器的版本是**11.2.0.2.0**，客户端的版本是**11.2.0.3.0**，这个小差异导致了问题。

所以以后遇到类似问题时，一定要检查客户端和服务器的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T07:34:00.033

你也错过`cmd.ExecuteNonQuery()`了你的代码。如果不执行命令，无论数据库版本如何，此代码都将不起作用。

```
var cmd = new OracleCommand("select * from new_place", conn);
conn.Open();
cmd.AddRowid = true;
var dep = new OracleDependency(cmd);
dep.OnChange += new OnChangeEventHandler(dep_OnChange);
cmd.ExecuteNonQuery(); 
```

# dynamics-crm-2011 - 邮件与富文本字段合并

> ID：10932969
> 
> 赞同：3
> 
> 时间：2012-06-07T13:36:45.733
> 
> 标签：dynamics-crm-2011

如果我的 Dynamics CRM 2011 中有 RichText 编辑器，并保存数据，它将与 HTML 标记一起保存。如何在邮件合并方案中使用这些字段？如果我将字段添加到 Word，标记只会显示，但格式不会显示！

有没有可以在域代码中设置的代码？

或者？

非常感谢任何解决方案:)

/基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:31:20.667

找到了解决方案。

使用 Documents Core Pack 将解决这些问题，它刚刚实现了 HTML 功能

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程第 7.25 章

> ID：10932975
> 
> 赞同：1
> 
> 时间：2012-06-07T13:36:55.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

嗨，我是通过 Hartl 工作的新手。在最近的一场灾难之后，我能够将我的应用程序恢复到接近工作状态（感谢 Github！）。我现在在测试中遇到了一个错误。所以当我运行测试时，我得到：

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/
..............................F

Failures:

1) User pages signup with valid information after saving the user 
 Failure/Error: it { should have_link('Sign out') }
   expected link "Sign out" to return something
 # ./spec/requests/user_pages_spec.rb:48:in `block (5 levels) in <top (required)>'

Finished in 0.61988 seconds
31 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:48 # User pages signup with valid information after saving the user 
```

这是我的 user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }
before { visit user_path(user) }

describe "signup" do
before { visit signup_path }

it { should have_selector('h1',    text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
it "should not create a user" do
expect { click_button submit }.not_to change(User, :count)
end
end

describe "with valid information" do
before do
fill_in "Name",         with: "Example User"
fill_in "Email",        with: "user@example.com"
fill_in "Password",     with: "foobar"
fill_in "Confirmation", with: "foobar"
end

it "should create a user" do
expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
before { click_button submit }
it { should have_link('Sign out') }
end
end
end
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:38:14.173

请检查您的“退出”链接，那里可能有问题。

# objective-c - 将 NsNumber 转换为 nsString 时的 Objective C 错误

> ID：10932978
> 
> 赞同：0
> 
> 时间：2012-06-07T13:37:12.090
> 
> 标签：objective-c, cocoa

```
NSNumber *abc = [[NSNumber alloc] initWithInt:123];
NSString *number = [NSString stringWithFormat:@"%d", abc]; 
```

结果`number`是31619！如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:38:18.930

您必须返回一个 intValue：

```
NSNumber *abc = [[NSNumber alloc] initWithInt:123];
NSString *number = [NSString stringWithFormat:@"%i", [abc intValue]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T13:38:24.950

这不是客观的 C 错误，您使用了错误的说明符-

采用 -

```
NSString *number = [NSString stringWithFormat:@"%@", abc]; 
```

# java - Java Web 应用程序中的异步任务

> ID：10932983
> 
> 赞同：2
> 
> 时间：2012-06-07T13:37:29.463
> 
> 标签：java, asynchronous, quartz-scheduler

异步作业，例如从网站下载分数，或在完成某些关键任务后发送电子邮件。现在，当我们下载一些乐谱时，我们必须等待当前页面才能获得响应页面或下载文件。是否有可能我可以点击下载分数并且它发生在后台，以便我可以导航到网站的其他部分，同时检查工作的状态。或者在以后安排一些工作，并通过电子邮件获取其执行结果。

我们的是一个带有 Hibernate 3.5 ORM 的 struts 2 web 应用程序。在浏览了一些 java 调度库之后，得到了一些关于 Quartz 的信息。但是 Quartz 是满足上述要求的正确库还是我可以尝试的任何其他库？请指导我正确的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T13:46:33.857

您将需要某种异步处理支持。您可以使用：

*   [quartz-scheduler](/questions/tagged/quartz-scheduler "显示标记为“石英调度程序”的问题") - 这个库非常全面，可以让你安排各种工作。如果您只想将其用于*在*后台安排作业并立即运行它们，则可能是矫枉过正

*   使用线程池，见[`Executors`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)类

*   [jms](/questions/tagged/jms "显示标记为“jms”的问题") queue 可以监听请求并在mdb[中异步处理](/questions/tagged/mdb "显示标记为“mdb”的问题")

*   [最后，您可以在spring](/questions/tagged/spring "show questions tagged 'spring'")或[ejb](/questions/tagged/ejb "show questions tagged 'ejb'")中利用`@Async`/`@Asynchronous`支持

然后你 mut 以某种方式恢复结果。取决于您是想直接在浏览器中还是通过电子邮件发送它们：

*   每次渲染页面时，检查是否没有任何已完成/正在进行的作业。如果有一些已完成的作业，请在页面上的某处显示一个额外的链接（某种通知）。如果作业正在进行中，启动一个[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")请求并每隔一秒询问一次或使用长轮询/[彗星](/questions/tagged/comet "显示标记为“彗星”的问题")来立即接收结果

*   如果您想通过电子邮件发送结果，只需在作业完成后发送即可。恕我直言，简单得多但用户友好性较差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:45:13.860

Quartz 无疑是实现这一目标的一种方式——如果您想安排一个作业在特定时间或以特定频率运行，它会很好地工作。

如果您只是想在后台启动某些操作以响应用户操作并检查其状态，还有其他一些可能更适合此模式的方法：

*   java.util.concurrent 包：您可以设置一个 ThreadPoolExecutor 并向其提交实现`Callable`. 你得到一个`Future<T>`对象，你可以检查它是否完成（`isDone`）并在完成时得到它的结果（`get`）。

*   对于 EJB 或 Spring，还有一个（会话）bean 方法的概念是`@Async`or `@Asynchronous`，它也返回 a`Future<T>`并表现如上。基本上，这只是从您的代码中抽象出线程池的创建和管理，并将其移动到容器或框架中。

# javascript - Jasmine - 测试对象中未定义的方法

> ID：10932986
> 
> 赞同：3
> 
> 时间：2012-06-07T13:37:42.300
> 
> 标签：javascript, jasmine

我有一个非常基本的问题。如何检查是否使用 jasmine 在对象中定义了方法？到目前为止，我有：

```
expect(obj.method).not.toBeUndefined(); 
```

但该报告无益地指出：

```
'Expected undefined not to be undefined.' 
```

如果它能够以某种方式告诉我我试图在报告中寻找的房产的名称，那就太好了。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:02:11.683

JS 引擎在将其传递给函数`obj.method`之前进行评估。`expect`因此，无法`"method"`从匹配器中恢复字符串。

您应该[编写自己的匹配器](https://github.com/pivotal/jasmine/wiki/Matchers)，将方法名称作为字符串类型的参数。

就像是

```
expect(obj).toHaveMethod("method"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:40:19.100

你能用类似的东西吗...

```
var validMethod = obj.hasOwnProperty('method') 
                  && typeof obj.method == 'function'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:43:21.200

也许你应该简单地做

```
 it("The 'toBeDefined' matcher compares against `undefined`", function() {
    var a = {
      foo: 'foo'
    };

    expect(a.foo).toBeDefined();
    expect(a.bar).not.toBeDefined();
  }); 
```

# r - 在 R 中创建一个变量过去水平的移动总和，对 3 个其他变量的每个水平求和

> ID：10932992
> 
> 赞同：0
> 
> 时间：2012-06-07T13:37:56.467
> 
> 标签：r, aggregate

我有一个具有以下结构（面板数据）的 data.frame，有 16 个时间级别（季度）、14 个地理级别（国家）和 20 个公民级别，每个级别都在数据框中相应地重复。

```
 time     geo                          citizen      X 
2008Q1 Belgium                      Afghanistan     22
2008Q1 Belgium                          Armenia     10
2008Q1 Belgium                       Bangladesh     25
2008Q1 Belgium Democratic Republic of the Congo     55
2008Q1 Belgium      China (including Hong Kong)      5
2008Q1 Belgium                          Eritrea      8 
```

我想创建一个新列，比如说MOVSUM，它将对每个公民级别的变量**X**和前4个季度的地理和时间求和，这样我就可以得到每个季度t，每个公民有多少个X在 t-4 到 t-1 季度期间，每个地理区域都可用。

提前致谢

# javascript - 您可以在不使用选择器的情况下创建 jQuery UI 小部件吗？

> ID：10932993
> 
> 赞同：0
> 
> 时间：2012-06-07T13:38:00.380
> 
> 标签：javascript, jquery, jquery-ui

我正在编写我的第一个 jquery UI 小部件：一个由两个文本框（开始日期和结束日期）组成的日期范围控件，这两个文本框都将使用 jQuery UI DatePicker。

我在网上看到的所有小部件代码示例都将小部件行为应用于通用选择器。就我而言，我的选择器中恰好需要两个元素（前面提到的两个文本框），并且将对每个元素应用不同的逻辑。例如，开始日期文本框将具有与结束日期文本框不同的 onblur 事件/行为。

有没有办法在没有选择器的情况下创建一个小部件，而是有两个命名的构造函数参数，一个用于开始日期，一个用于结束日期？如果没有，是否有更好的方法来处理这个小部件？也许我应该创建一个 POJSO（普通的旧 JS 对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:42:47.890

选择器是什么有什么关系？小部件使用选择器，因为大多数时候它适用于选定的元素。但由小部件决定使用选定的元素。从技术上讲，它可以忽略它们并继续处理任何内容。那么你为什么不直接选择文档（或者像文本框的父容器），然后将一个对象作为参数传递给你的小部件，其中包含“textbox1”和“textbox2”的值，然后在初始化时获取这些值。那有意义吗？

例如：

```
$("#parent_container").yourWidget({
    txtbox1: $("#txt_id1"),
    txtbox2: $("#txt_id2"),
    otherParam: true
}); 
```

在您的小部件代码中，只需忽略选定的元素。根据参数的值处理所有内容。

# java - Java switch：变量声明和范围

> ID：10932997
> 
> 赞同：10
> 
> 时间：2012-06-07T13:38:05.507
> 
> 标签：java, scope, initialization, switch-statement, variable-declaration

Java 编译器如何处理下面的 switch 块？'b' 变量的范围是什么？

请注意，“b”变量仅在 switch 语句的第一个分支中声明。尝试在第二个分支中声明它也会导致“重复的局部变量”编译错误。

```
 int a = 3;
    switch( a ) {
    case 0:
        int b = 1;
        System.out.println("case 0: b = " + b);
        break;
    case 1:
        // the following line does not compile: b may not have been initialized
        // System.out.println("case 1 before: b = " + b);
        b = 2;
        System.out.println("case 1 after: b = " + b);
        break;
    default:
        b = 7;
        System.out.println("default: b = " + b);
    } 
```

注意：上面的代码使用 java 1.6 编译器编译。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T13:40:26.310

与往常一样，范围由`{`and分隔`}`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T13:40:27.777

的范围`b`是块。您只有一个包含所有`case`s 的块。这就是为什么您`b`在第二个`case`.

您可以将每个包装`case`在一个自己的块中，例如

```
case 0:
   {
     int b = 1;
     ...
   }
case 1:
   {
     int b = 2;
     ...
   } 
```

但我认为 FindBugs 或 CheckStyle 会抱怨这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T13:41:43.397

的范围`b`是开关块 - 在声明和分隔符之间`}`-

```
int a = 3;

switch( a ) {
     case 0:
          int b = 1; //scope starts
          System.out.println("case 0: b = " + b);
          break;
     case 1:
          // the following line does not compile: b may not have been initialized
          // System.out.println("case 1 before: b = " + b);
          b = 2;
          System.out.println("case 1 after: b = " + b);
          break;
     default:
          b = 7;
          System.out.println("default: b = " + b);
}//scope ends 
```

但是，您需要知道，如果您在`int b`内部声明`case 1:`，您将无法访问`b`内部的变量`case 0:`

要回答您在 java 注释中提出的问题，您可以查看这个更简单的示例：

```
int b;
if(true){
    b++; //The local variable b hast not been initialized
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-30T13:25:26.497

您可以围绕您的案例使用 {} 定义范围。

```
int a = 3;
switch( a ) {
case 0: {
    int b = 1;
    System.out.println("case 0: b = " + b);
    break;
}
case 1: {
    // the following line does not compile: b may not have been initialized
    // System.out.println("case 1 before: b = " + b);
    int b = 2;
    System.out.println("case 1 after: b = " + b);
    break;
}
default: {
    int b = 7;
    System.out.println("default: b = " + b);
}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T13:42:53.280

在您的代码中，如果 a 不等于 0 b 将永远不会被初始化。您应该在 switch 语句之前定义 b 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T13:41:39.217

您的`case`块没有任何本地范围。不是一串`if`……块，java把它实现为一串s。`else if``else``GOTO`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T14:02:57.327

语句中定义的变量范围与由and`switch()`包围的普通块中的范围相同。`{``}`

`switch()`因此，一旦定义，语句中定义的每个变量对整个块都是可见的。