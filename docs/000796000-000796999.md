# StackOverflow 问答 000796000-000796999

# windows - fsutil 硬链接不起作用？

> ID：796003
> 
> 赞同：1
> 
> 时间：2009-04-28T02:25:12.317
> 
> 标签：windows, symlink, hardlink, fsutil

我正在寻找一种在 Windows 下创建硬链接的方法，我发现了这个页面：[http ://technet.microsoft.com/en-us/library/cc788097.aspx](http://technet.microsoft.com/en-us/library/cc788097.aspx)

为了试一试，我在 C: 驱动器的根目录上创建了一个文件 (1.txt)，其中包含 100 行以下内容：

C:\1.txt（2.598 字节）：

```
test test test test test 
```

然后我打开命令提示符并输入：

```
fsutil hardlink create C:\2.txt C:\1.txt 
```

成功，创建了 2.txt，但是当我去查看它的大小时，它正好有 2.598 字节，并且还注意到了一些奇怪的行为（据我对硬链接的理解）：

1.  如果我删除 2.txt（硬链接文件）1.txt 不会被删除，反之亦然。
2.  如果我在删除 1.txt（原始文件）后打开 2.txt，内容仍然相同。

fsutil hardlink create 命令与 copy 命令有何不同？以及如何在 Windows 下创建真正的硬链接？

我使用的是 Windows XP SP 3，我的文件系统是 NTFS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T02:29:08.097

这正是应该发生的行为。您确定您了解硬链接的工作原理吗？硬链接实际上只是文件系统中引用完全相同的文件的多个条目。如果您创建一个文件的硬链接并修改该文件的一个实例，则另一个文件将与您的更改一起显示，因为它们都引用磁盘上的相同数据块。

当您删除其中一个硬链接时，您实际上只是删除了一个引用该文件的文件系统条目。*在您删除其所有*硬链接（包括原始链接）之前，该文件不会被删除。删除 1.txt 后，2.txt 仍然存在，并且引用了原来存在的同一个文件，只是现在只有一个文件系统条目引用该文件（即 2.txt）。2.txt*就是*那个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T02:42:19.763

> fsutil hardlink create 命令与 copy 命令有何不同？以及如何在 Windows 下创建真正的硬链接？

创建硬链接文件后，尝试编辑其中一个。您会发现更改反映在两个文件中。

尝试创建一个非常大的文件（比如视频或磁盘图像）的硬链接。请注意，磁盘上的可用空间没有改变（或者改变不超过几个字节，如果必须将额外的元数据写入磁盘以反映新的 dir 条目）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T02:38:19.633

这是一个真正的硬链接。在 UNIX（我不熟悉 Windows 变体）中，文件只是磁盘上的一组数据（简单地说）。为该文件命名的是目录条目本身。

当您有两个目录条目指向同一个基础文件时，删除其中一个*不会*删除该文件，除非它是附加到它的最后一个目录条目（并且该文件仍未被进程打开，但这是另一回事）。

# c# - 初学者如何在 Linux 中开始使用 Mono？

> ID：796005
> 
> 赞同：49
> 
> 时间：2009-04-28T02:25:55.187
> 
> 标签：c#, linux, mono

作为初学者，当我想从 Visual Studio 切换时，如何开始在 Linux 中使用 Mono？

是否有一些简单的方法可以像 Visual Studio 一样安装它并开始使用？到目前为止，就我所见，开始看起来很复杂。

在 linux 中安装和配置 Mono 需要做很多工作，对吧？

或者是否有一些发行版可以直接安装并开始使用 Linux 中的应用程序？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-28T02:40:22.950

我最近开始自己涉足 Mono 并且到目前为止已经意识到 MonoProject 在这方面取得了巨大的进步。值得调查。

话虽如此，最简单的方法是使用对 Mono 友好的 Linux 发行版进行设置，例如 Suse 或 Ubuntu。就个人而言，我使用 Ubuntu 8.10 进行了尝试。

正确安装 Linux 发行版后，下载并安装 MonoDevelop。这是一个与 Mono 平台紧密集成的开源 IDE。MonoDevelop 被视为 SharpDevelop 的一个分支，旨在从头开始与 Mono 编译器一起工作。

这是迄今为止使用 Mono 进行设置的最简单、最快的方法。MonoDevelop IDE 甚至与 Visual C# Express 非常相似。它配备了项目/解决方案管理、使用 GTK# 框架的 GUI 开发、集成调试器以及您在 IDE 中期望的许多其他功能，例如代码完成、行号、代码折叠等。

MonoProject 的人们正在使用这套工具。

希望这可以帮助您入门。

[Mono 项目主页](http://mono-project.com/Main_Page)

[Mono 开发主页](http://monodevelop.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T08:26:50.623

有一些关于 Mono 的有趣书籍，尽管它们可能有点旧。不过，也许值得抓住一个并看看以便启动。

1.  [实用单声道](https://rads.stackoverflow.com/amzn/click/com/1590595483)
2.  [Mono：开发者的笔记本](https://rads.stackoverflow.com/amzn/click/com/0596007922)
3.  [跨平台 .NET 开发](https://rads.stackoverflow.com/amzn/click/com/1590593308)
4.  [单声道启动](https://rads.stackoverflow.com/amzn/click/com/0672325799)

然后，我会在 Linux 机器上安装最新的 Mono（2.4）（他们使用的是 OpenSuse，所以它总是可以顺利进行开发，但我们也在内部使用 Ubuntu）并开始使用编译器 MonoDevelop（它自2.0以来相当不错）等等。

唯一的难点是编写 GUI 应用程序，尽管我的团队在不同的 Unix 风格上广泛使用 MWF。但其他一切都会如您所愿。例如，我对远程处理的效果特别满意。

如果您习惯 Linux，那么它会容易得多，否则我也建议您按照一些教程来习惯它。

请记住，我们也将提供 NUnit 和 NAnt 等工具，因此您可以开始在 Windows 和 Linux 上编写代码并在这两个平台上进行测试和编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T22:52:51.010

在刚刚发布的[Ubuntu 9.04](http://www.ubuntu.com/)中，最新的 Mono 开发环境接近于：

```
apt-get install monodevelop 
```

我曾经同意你的观点，使用 Mono 有点困难，但是最新版本的 Ubuntu 已经消除了这个障碍。最新版本的[Monodevelop](http://monodevelop.com/)使用起来绝对令人愉悦。

不使用 Ubuntu？然后我会接受 Peter 关于使用[VMWare 映像](http://mono-project.com/VMWare_Image)的建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-28T08:32:11.577

为了在 linux 下轻松开始使用 mono，[你可以下载](http://www.go-mono.com/mono-downloads/download.html)

*   一个 vmware 映像
*   一个 linux live 发行版

一切都包括在内。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T14:09:47.053

如果您习惯使用 Visual-studio，您仍然可以在 Visual Studio 中进行开发，并将您的二进制文件复制到 Linux/OSX 或其他任何地方。或者更好的是，如果您有共享驱动器，只需将 VS-Project 输出目录重新配置到共享位置即可。

使用 mono 编译器或 monodevelop 可能有一些优势，但既然您是入门的，那么上面确实是最容易做的事情。如果您想在 Linux 上运行，mono 安装程序是快速启动和运行的绝佳选择。不幸的是，没有可用于最新单声道版本的安装程序，因此您要么需要管理员权限，要么需要从源代码编译。

[http://ftp.novell.com/pub/mono/archive/1.9.1/linux-installer/2/mono-1.9.1_2-installer.bin](http://ftp.novell.com/pub/mono/archive/1.9.1/linux-installer/2/mono-1.9.1_2-installer.bin)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-10T20:11:24.340

要使用[MonoDevelop 4.2.1+](http://software.opensuse.org/download/package?project=home%3atpokorra%3amono&package=monodevelop-opt)安装最新的[Mono 3.2.5+](http://software.opensuse.org/download/package?project=home%3atpokorra%3amono&package=mono-opt) ，最好使用[tpokorra repository](http://download.opensuse.org/repositories/home:/tpokorra:/mono/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T15:34:44.087

Debian 和 Ubuntu，可能还有所有其他的孩子，在存储库中都有单声道。因此，在 Linux 中设置单声道就像

```
aptitude install monodevelop 
```

但是我建议版本 2 需要在 Debian 中使用“sid”存储库（不了解 Ubuntu）。

```
vim /etc/apt/sources.list [ :%s/squeeze/sid/g ] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T22:41:53.860

我能找到的最简单的方法是在他们的网站上下载 OpenSUSE VMWare 映像并运行它。你得到你需要的所有工具:) 预配置。

# c# - 在 Web 应用程序和 Visual Studio for ASP.NET MVC 上使用图像

> ID：796007
> 
> 赞同：3
> 
> 时间：2009-04-28T02:27:46.740
> 
> 标签：c#, asp.net, asp.net-mvc, visual-studio-2008, iis-7

我正在使用 MS Visual Studio 2008 SP1 开发 ASP.NET MVC 应用程序。

我的项目结构是默认的：

> 项目 |-Content |-css |-img |-Models |-Views |-Controllers

**问题是**，只要文件包含在项目中，我就可以访问放置在*Content目录下的所有内容。*另一方面，如果我碰巧有一个图像（即用户上传的图像）在正确的物理目录 (Project\Content\img) 上但不包含在项目中，我会不断收到**404**错误使用浏览器访问它们。

 ****我认为我的网址是正确的：

[http://localhost:1260/Content/img/my_image.jpg](http://localhost:1260/Content/img/my_image.jpg)

我在 Project\Content\img\my_image.jpg 下**确实有一个文件。**

有什么问题？我是否被迫包含项目中的所有文件？我不这么认为，因为那意味着我不能以这种方式让网络用户上传和保存图像。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T04:08:14.503

如果您使用 IIS 7 托管项目，则必须在 IIS 7（处理程序映射）中添加内容类型。但是，如果您使用 Asp.net Developer Server 托管您的项目，则不是必需的。

在 web.config 文件中使用以下代码

```
<configuration>
   <system.webServer>
     <handlers>
      <add name="css mapping" path="*.css" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="js mapping" path="*.js" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="gif mapping" path="*.gif" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="jpg mapping" path="*.jpg" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />
      <add name="png mapping" path="*.png" verb="*" type="System.Web.StaticFileHandler" resourceType="Unspecified" preCondition="integratedMode" />      
     </handlers>
   </system.webServer>
</configuration> 
```

# python - 不能减去偏移天真和偏移感知日期时间

> ID：796008
> 
> 赞同：397
> 
> 时间：2009-04-28T02:28:08.597
> 
> 标签：python, postgresql, datetime, timezone

我`timestamptz`在 PostgreSQL 中有一个时区感知字段。当我从表中提取数据时，我想现在减去时间，这样我就可以得到它的年龄。

我遇到的问题是两者`datetime.datetime.now()`似乎`datetime.datetime.utcnow()`都返回了不知道时区的时间戳，这导致我收到此错误：

```
TypeError: can't subtract offset-naive and offset-aware datetimes 
```

有没有办法避免这种情况（最好不使用第三方模块）。

编辑：感谢您的建议，但是尝试调整时区似乎给了我错误..所以我将在 PG 中使用时区不知道的时间戳，并始终使用以下方法插入：

```
NOW() AT TIME ZONE 'UTC' 
```

这样我所有的时间戳默认都是UTC（即使这样做更烦人）。

* * *

## 回答 #1

> 赞同：394
> 
> 时间：2009-04-28T02:36:07.533

您是否尝试过消除时区意识？

来自[http://pytz.sourceforge.net/](http://pytz.sourceforge.net/)

```
naive = dt.replace(tzinfo=None) 
```

可能还需要添加时区转换。

编辑：请注意这个答案的年龄。下面是一个涉及添加时区信息而不是在 python 3 中删除它的答案。[https://stackoverflow.com/a/25662061/93380](https://stackoverflow.com/a/25662061/93380)

* * *

## 回答 #2

> 赞同：328
> 
> 时间：2014-09-04T09:37:14.320

正确的解决方案是*添加*时区信息，例如，将当前时间作为 Python 3 中的感知日期时间对象：

```
from datetime import datetime, timezone

now = datetime.now(timezone.utc) 
```

在较旧的 Python 版本上，您可以`utc`自己定义 tzinfo 对象（来自 datetime 文档的示例）：

```
from datetime import tzinfo, timedelta, datetime

ZERO = timedelta(0)

class UTC(tzinfo):
  def utcoffset(self, dt):
    return ZERO
  def tzname(self, dt):
    return "UTC"
  def dst(self, dt):
    return ZERO

utc = UTC() 
```

然后：

```
now = datetime.now(utc) 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2015-06-22T02:28:47.313

我知道有些人专门使用 Django 作为接口来抽象这种类型的数据库交互。Django 提供了可用于此目的的实用程序：

```
from django.utils import timezone
now_aware = timezone.now() 
```

您确实需要设置一个基本的 Django 设置基础设施，即使您只是使用这种类型的界面（在设置中，您需要包含`USE_TZ=True`以获取可感知的日期时间）。

就其本身而言，这可能还不足以激发您将 Django 用作界面，但还有许多其他好处。另一方面，如果你在这里绊倒是因为你正在破坏你的 Django 应用程序（就像我一样），那么也许这会有所帮助......

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-10-03T18:51:24.267

## 这是一个非常简单明了的解决方案
两行代码

```
# First we obtain de timezone info o some datatime variable    

tz_info = your_timezone_aware_variable.tzinfo

# Now we can subtract two variables using the same time zone info
# For instance
# Lets obtain the Now() datetime but for the tz_info we got before

diff = datetime.datetime.now(tz_info)-your_timezone_aware_variable 
```

结论：**您必须使用相同的时间信息管理您的日期时间变量**

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-11-16T15:13:14.317

您不需要标准库之外的任何东西

```
datetime.datetime.now().astimezone() 
```

如果您只是更换时区，它将不会调整时间。如果您的系统已经是 UTC，那么 .replace(tz='UTC') 就可以了。

```
>>> x=datetime.datetime.now()
datetime.datetime(2020, 11, 16, 7, 57, 5, 364576)

>>> print(x)
2020-11-16 07:57:05.364576

>>> print(x.astimezone()) 
2020-11-16 07:57:05.364576-07:00

>>> print(x.replace(tzinfo=datetime.timezone.utc)) # wrong
2020-11-16 07:57:05.364576+00:00 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-02-22T08:01:18.177

我也面临同样的问题。然后我经过大量搜索找到了解决方案。

问题是当我们从模型或表单中获取 datetime 对象时，它是**偏移感知**的，如果我们通过系统获取时间，它是**偏移天真**的。

所以我所做的是我使用**timezone.now()**获取当前时间并通过**from django.utils import timezone 导入时区**并将**USE_TZ = True**放入项目设置文件中。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-07-19T18:01:44.833

psycopg2 模块有自己的时区定义，所以我最终围绕 utcnow 编写了自己的包装器：

```
def pg_utcnow():
    import psycopg2
    return datetime.utcnow().replace(
        tzinfo=psycopg2.tz.FixedOffsetTimezone(offset=0, name=None)) 
```

只需`pg_utcnow`在需要当前时间与 PostgreSQL 进行比较时使用`timestamptz`

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-05-15T20:32:50.543

我想出了一个超简单的解决方案：

```
import datetime

def calcEpochSec(dt):
    epochZero = datetime.datetime(1970,1,1,tzinfo = dt.tzinfo)
    return (dt - epochZero).total_seconds() 
```

它适用于时区感知和时区原始日期时间值。并且不需要额外的库或数据库解决方法。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-25T19:39:16.273

我发现`timezone.make_aware(datetime.datetime.now())`在 django 中很有帮助（我在 1.9.1 上）。不幸的是，您不能简单地使`datetime`对象偏移感知，然后`timetz()`它。您必须`datetime`在此基础上进行比较。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-12T16:31:24.340

似乎缺少对标题中问题的最直接答案：

```
naive_date.replace(tzinfo=aware_date.tzinfo) - aware_date 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-28T10:24:24.257

是否有一些紧迫的原因导致您无法在 PostgreSQL 本身中处理年龄计算？就像是

```
select *, age(timeStampField) as timeStampAge from myTable 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-29T16:24:36.580

我知道这是旧的，但只是想我会添加我的解决方案以防万一有人发现它有用。

我想将本地天真的日期时间与来自时间服务器的有意识的日期时间进行比较。我基本上使用有意识的日期时间对象创建了一个新的天真的日期时间对象。这有点小技巧，看起来不是很漂亮，但可以完成工作。

```
import ntplib
import datetime
from datetime import timezone

def utc_to_local(utc_dt):
    return utc_dt.replace(tzinfo=timezone.utc).astimezone(tz=None)    

try:
    ntpt = ntplib.NTPClient()
    response = ntpt.request('pool.ntp.org')
    date = utc_to_local(datetime.datetime.utcfromtimestamp(response.tx_time))
    sysdate = datetime.datetime.now() 
```

……软糖来了……

```
 temp_date = datetime.datetime(int(str(date)[:4]),int(str(date)[5:7]),int(str(date)[8:10]),int(str(date)[11:13]),int(str(date)[14:16]),int(str(date)[17:19]))
    dt_delta = temp_date-sysdate
except Exception:
    print('Something went wrong :-(') 
```

# c# - 如何在 c# 中向 HashTable 添加不同的克隆对象？

> ID：796011
> 
> 赞同：0
> 
> 时间：2009-04-28T02:30:16.627
> 
> 标签：c#, hashtable, clone

我将密钥和对象传递给需要克隆该对象并将其与密钥一起存储在 hastable 中的类实例。我该怎么做？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T02:38:17.713

由于这个原因，GetHashCode() 是虚拟的。

[http://msdn.microsoft.com/en-us/library/system.object.getashcode.aspx](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

# vba - 将富文本数据从 Access 传输到 Word

> ID：796020
> 
> 赞同：1
> 
> 时间：2009-04-28T02:36:10.667
> 
> 标签：vba, ms-access, ms-word

我一直为支持一个现在已经停业的承包商生产的旧 Access 2003 数据库（带有 SQL 后端）而背负重任。

该数据库包括几个“非常规”的报告。他们都通过 VBA 使用自动化将字段直接输出到 Word 文档。有点像这样（伪代码）：

```
for each row{
      output(row.id);
      moveRight();
      output(row.firstName);
      newLine();
} 
```

等等。

问题是，数据库包含几个富文本字段。要将这些（包括它们的格式）输出到文档中，开发人员打开一个单独的 Access 表单，其中包含一个富文本控件，并将适当的字段拉入文本框中。

然后，他执行“全选，复制”，轻弹回 Word，然后粘贴文本。

我的任务是在报表中添加一个新的富文本字段，我觉得必须有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T03:32:43.277

啊! 显然是一个重复的问题。

这是答案：

[文字自动化：无需通过剪贴板即可编写 RTF 文本](https://stackoverflow.com/questions/22326/word-automation-write-rtf-text-without-going-through-clipboard/22335)

# f# - Map 和 Reduce 等概念是否适用于所有函数式编程语言？

> ID：796021
> 
> 赞同：1
> 
> 时间：2009-04-28T02:36:15.723
> 
> 标签：f#, functional-programming

我刚刚开始钻研函数式编程的世界。

许多 OOP（面向对象编程）概念（例如继承和多态）适用于大多数现代 OO 语言，例如 C#、Java 和 VB.NET。

但是 Map、Reduce、Tuples 和 Sets 等概念如何适用于所有 FP（函数式编程）语言？

我刚开始使用 F#。但是上述概念是否适用于其他 FP，如 Haskell、Nemerle、Lisp 等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T02:41:23.307

你打赌。函数编程的可取之处在于您描述的数学概念更自然地在 FP 中表达。

这有点困难，但 John Backus 的[图灵奖论文](http://www.thocp.net/biographies/papers/backus_turingaward_lecture.pdf)描述了函数式（或“应用程序”）编程是一本不错的读物。维基[百科的文章](http://en.wikipedia.org/wiki/Functional_programming)也很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T02:45:18.930

是的; 高阶函数、代数数据类型、折叠/变形等对几乎所有函数式语言都是通用的（尽管它们有时在每种语言中的名称略有不同）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T02:50:52.317

功能工具适用于所有编程，而不仅仅是显式处理的语言。例如，除了乱序评估之外，python 具有完全符合您期望的内置函数`map`。`reduce`你需要像多处理模块这样的东西才能变得非常聪明。

即使该语言没有提供确切的原语，大多数现代语言仍然可以通过更多的工作来获得所需的效果。这类似于在纯 C 中编码类概念的方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T14:38:12.853

我会将您的问题解释为，“高阶函数（map、reduce、filter……）和不可变数据结构（元组、cons 列表、记录、映射、集合……）在 FP 中是否常见？语言？” 我会说，绝对是的。

就像你说的，OOP 有众所周知的支柱（封装、继承、多态）。我想说的函数式编程的“支柱”是 1）使用函数作为一流的值和 2）在没有副作用的情况下表达自己。

您可能会找到将这些想法应用于各种 FP 语言的通用工具（顺便说一句，F# 是一个很好的选择！），您会看到它们找到了进入更主流语言的途径；可能是不太容易识别的形式（例如 LINQ 的 Select = map、Aggregate = reduce/fold、Where = filter、C# 具有轻量级 lambda 语法、System.Tuple 等）。

顺便说一句，非显式 FP 语言似乎普遍缺少的东西是良好的不可变数据结构和对它们的语法支持（不仅仅是一个库），这使得在这些语言中很难坚持第二支柱。F# 列表、记录、元组等都是很好的语言和库组合支持的好例子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T13:10:03.093

如果您*真的*想深入了解并理解为什么这些概念不仅是传统的，而且是*基础*的，请查看论文[“使用香蕉、镜头、信封和铁丝网进行函数式编程”](http://www.springerlink.com/content/77t3588175m4h5n7/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T12:23:20.880

它们适用于包含可以“映射”和“简化”的数据类型的所有语言，即映射、数组/向量或列表。

在“纯 lambda 演算”语言中，每个数据结构都是通过函数应用程序定义的，您当然可以并行应用函数（即，在调用 fn(expr1, expr2) 中，您可以并行计算 expr1 和 expr2），但这并不是 map/reduce 的真正意义所在。

# expression-web - 有人使用 Expression web 在 *nix 服务器上远程编辑 php 文件吗？

> ID：796023
> 
> 赞同：0
> 
> 时间：2009-04-28T02:36:19.590
> 
> 标签：expression-web

我想看看是否有人知道在表达式网络中编辑文件的任何 ssh 或 ftp 方式。这类似于记事本++。我已经知道 sftpdrive 选项。我正在寻找免费且强大的东西。

我没有玩过 Expression Web 中的开放站点功能。我不确定这是否适用于 Linux 机器上的 php 站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T03:07:37.770

另一种选择是使用 samba 或 nfs 在本地机器上挂载目录。如果服务器处于活动状态，您应该通过 ip 和/或使用 vpn 来限制连接。

请注意，一些编辑器在使用这些解决方案时会滞后很多，尤其是对于大文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T03:41:43.193

[通过在站点名称占位符（如ftp://myftpsite.com](ftp://myftpsite.com)）中键入 ftp 地址，将您的 Expression Web 直接连接到打开站点对话框中的任何 FTP 服务器。Expression web 会询问您的登录名和密码并列出您的文件夹以开始编辑您的文件。这很容易，完全没有问题。

# jquery - 未经授权的发布后，jQuery Ajax 没有失败

> ID：796026
> 
> 赞同：0
> 
> 时间：2009-04-28T02:36:45.503
> 
> 标签：jquery, asp.net-mvc

我有一个 jQuery .Ajax 帖子类型 JSON 和一个带有 [Authorise] 属性的 MVC 控制器。如果用户被授权，则返回 jQuery 执行“成功”，但从不执行“失败”。用户未授权时如何处理？

```
$.ajax({
  type: "POST",
  url: "/index",
  dataType: "json",
  data: { ID: id, Name: name },
  success: function(data){...},
  fail: function(){...}
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T02:44:12.833

错误：不失败：

[http://docs.jquery.com/Ajax/jQuery.ajax#options](http://docs.jquery.com/Ajax/jQuery.ajax#options)

在 firebug 中查看请求，实时查看请求，让您的生活更轻松

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T02:47:18.643

正确的语法是：

```
$.ajax({
  type: "POST",
  url: "/index",
  dataType: "json",
  data: { ID: id, Name: name },
  success: function(data){...},
  error: function(){...}
}); 
```

这是一个类似的帖子：[json-parameters-auto-convert-to-lowercase-when-ajax-request-made-to-mvc-action-m](https://stackoverflow.com/questions/377071/json-parameters-auto-convert-to-lowercase-when-ajax-request-made-to-mvc-action-m)

# c++ - 观察者模式的线程实现 - C++

> ID：796027
> 
> 赞同：0
> 
> 时间：2009-04-28T02:37:33.940
> 
> 标签：c++, multithreading, boost, observer-pattern

我正在开发一个 C++ 程序，它有一个“扫描”方法，它将触发一个运行相对较长的扫描过程。当该过程完成时，scan 方法将使用观察者模式通知观察者结果。

我想为每次扫描创建一个单独的线程。这样我可以同时运行多个扫描。当每个扫描过程完成时，我希望 scan 方法通知侦听器。

根据 boost 线程库，看起来我可以做这样的事情：

```
#include <boost/thread/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/bind.hpp>
#include <iostream>

boost::mutex io_mutex;

void scan(int scan_target, vector<Listener> listeners)  
{
  //...run scan 
  {
    boost::mutex::scoped_lock  
      lock(io_mutex);
    std::cout << "finished scan" << endl;
    // notify listeners by iterating through the vector
    // and calling "notify()

  }
}

int main(int argc, char* argv[])
{

  vector<Listener> listeners
  // create 
  boost::thread thrd1(
    boost::bind(&scan, 1, listeners));
  boost::thread thrd2(
    boost::bind(&scan, 2, listeners));
  //thrd1.join();
  //thrd2.join();
  return 0;
} 
```

这看起来大致正确吗？我是否需要对侦听器的呼叫进行互斥？可以摆脱连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T03:42:31.647

您是否需要锁定取决于您对通知的处理方式。我认为，如果您只将锁放在需要单线程访问的那些侦听器的通知功能中，那会更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T04:18:32.763

您的 Listener::Notify() 正在从多个线程中调用，因此除非 Notify() 没有副作用，否则您必须执行以下三个操作之一：

1.  外部锁（您的示例）：在调用 Listener::Notify() 之前获取互斥锁
2.  内部锁：Listener::Notify() 将在内部获取锁
3.  无锁：在谷歌搜索“无锁算法”

每个选项都有优点/缺点...

对于（我认为）你需要的东西，选项 1 会很好。

而且，您必须保留连接语句，否则您的 main() 可能会在您的线程完成工作之前退出。还可以考虑使用`boost::thread_pool`and `joint_all`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T03:07:05.570

我不知道提升的东西，但从概念上看它看起来是正确的。您有想要收到状态更改通知的观察者。当“合格事件”发生时，您必须遍历观察者列表（或向量，类似的东西）来通知。您还想以某种方式确保并发通知不会给您带来麻烦，

（这是关于该模式的[Wikipedia 文章](http://en.wikipedia.org/wiki/Observer_pattern)。）

# c# - .Net 扩展方法与实用程序类

> ID：796046
> 
> 赞同：2
> 
> 时间：2009-04-28T02:48:52.353
> 
> 标签：c#, .net, extension-methods

重复大约 20 个最近的问题；有人请链接他们。

对于简单的场景，我什么时候应该使用其中一种？有什么优点和缺点？

使用扩展方法有哪些建议？

编辑：

让我举个例子吧。假设我有一个表示为字符串的 Web 相对路径。现在我想编写一个方法，它 1) 检查路径是否以 '/en/ 或 '/fr/' 2) 开头，如果它不从另一个字符串中获取值。

例如扩展方法

```
public static string ToLocaleRelativePath(this string s, string contextPath)
        {
//1\. Check if string begins with a locale
//2\. If it does not prepend the value extracted from the context path
} 
```

这种操作适合扩展方法还是应该是实用程序？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-28T02:57:35.717

在您的示例中，实用程序类可能更合适，因为它仅对表示相对 URL 的字符串有意义，而不是对所有字符串有意义。相比之下，适用于所有（或绝大多数）字符串的方法（例如，Trim 或 Reverse 方法（如果这些方法尚不存在））将非常适合作为扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-11T14:20:13.697

有一些很好的暗示表明实用程序类是不好的，因为它们授权和鼓励与 OOP 模式相矛盾的不良做法（考虑[this](http://blogs.msdn.com/nickmalik/archive/2005/09/06/461404.aspx)和[this](http://blogs.msdn.com/elee/archive/2009/05/05/helper-classes-are-evil.aspx)）。

# c# - 类中的 C# 异常处理

> ID：796048
> 
> 赞同：1
> 
> 时间：2009-04-28T02:50:26.640
> 
> 标签：c#, exception, class

C# 2008

我开发了下面的课程。我必须从网络服务器获取余额。完成后，它会以结果回调到我的主应用程序中。

但是，有时 Web 服务器会因某种未知原因而失败。可能是高流量或其他原因。但是，我还没有在我的课堂上实现任何异常处理。因为使用它的应用程序处理异常。

但是，客户端已确认当 Web 服务器发生故障时，它会显示一个未处理的异常对话框。然后他们必须点击继续使用我的应用程序。

所以下面我不确定我是否应该在我的类中实现异常处理。但是，我很困惑为什么异常没有在我的应用程序中被捕获，如下所示。

非常感谢您的任何建议，或者如果您发现任何其他错误，

```
private void OnGetBalanceCompleted(object sender, SIPPhoneLibraryEventArgs e)
    {
        try
        {
            //If the balance starts with 'null' there has been an error trying to get the balance.
            if (e.Balance.StartsWith("null"))
            {
                statusDisplay1.CurrentBalance = CATWinSIP_MsgStrings.BalanceError;
            }
            else
            {
                // Display the current balance and round to 2 decimal places.
                statusDisplay1.CurrentBalance = Math.Round(Convert.ToDecimal(e.Balance), 2).ToString();

                //If the balance is zero display in the status message
                if (decimal.Parse(e.Balance) == 0)
                {
                    this.statusDisplay1.CallStatus = "Zero Balance";
                }
            }
            //Remove the event as no longer needed
            siplibrary.GetBalanceCompletedEvent -= new EventHandler<SIPPhoneLibraryEventArgs>(OnGetBalanceCompleted);
        }
        catch (WebException ex)
        {
            MessageBox.Show(ex.Message);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

//Control library for all importing functions
public class Balance : IDisposable
{
    //Constructor
    WebClient wc;
    public Balance()
    {
        using (wc = new WebClient())
        {
            //Create event handler for the progress changed and download completed events
            wc.DownloadProgressChanged += new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
            wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        }
    }

    ~Balance()
    {
        this.Dispose(false);
    }

    //Event handler and the method that handlers the event
    public EventHandler<SIPPhoneLibraryEventArgs> GetBalanceCompletedEvent;

    //The method that raises the event
    public void OnGetBalanceCompleted(SIPPhoneLibraryEventArgs e)
    {
        if (GetBalanceCompletedEvent != null)
        {
            GetBalanceCompletedEvent(this, e);
        }
    }

    //Get the current balance for the user that is logged in.
    //If the balance returned from the server is NULL display error to the user.
    //Null could occur if the DB has been stopped or the server is down.       
    public void GetBalance(string sipUsername)
    {
        //Remove the underscore ( _ ) from the username, as this is not needed to get the balance.
        sipUsername = sipUsername.Remove(0, 1);

        string strURL = string.Format("http://xxx.xxx.xx.xx:xx/voipbilling/servlet/advcomm.voipbilling.GetBalance?CustomerID={0}", sipUsername);

        //Download only when the webclient is not busy.
        if (!wc.IsBusy)
        { 
            // Sleep for 1/2 second to give the server time to update the balance.
            System.Threading.Thread.Sleep(500);
            // Download the current balance.
            wc.DownloadStringAsync(new Uri(strURL));
        }
        else
        {
            System.Windows.Forms.MessageBox.Show("Busy please try again");
        }
    }

    //return and display the balance after the download has fully completed
    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        //Pass the result to the event handler
        this.OnGetBalanceCompleted(new SIPPhoneLibraryEventArgs(e.Result));
    }

    //Progress state of balance.
    void wc_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        //Write the details to the screen.
        Console.WriteLine(e.TotalBytesToReceive);
        Console.WriteLine(e.BytesReceived);
        Console.WriteLine(e.ProgressPercentage);
    }

    //Dispose of the balance object
    public void Dispose()
    {
        Dispose(true);

        GC.SuppressFinalize(this);
    }

    //Remove the event handlers
    private bool isDisposed = false;
    private void Dispose(bool disposing)
    {
        if (!this.isDisposed)
        {
            if (disposing)
            {
                wc.DownloadProgressChanged -= new DownloadProgressChangedEventHandler(wc_DownloadProgressChanged);
                wc.DownloadStringCompleted -= new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);

                wc.Dispose();
            }               
            isDisposed = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T03:00:58.550

似乎您仅在 OnGetBalanceCompleted 事件上捕获异常，而不是在获取余额的过程中。

当提取出现任何错误时，甚至不会调用 OnGetBalanceCompleted，这就是不调用异常处理程序的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T03:00:07.413

1.  异常中包含的信息不仅仅是它的`Message`属性。`Message`您只是通过显示属性来丢弃所有这些信息。改为使用`ex.ToString()`。
2.  您发布的代码是用户界面的一部分吗？如果不是，那么它对用户界面一无所知。特别是，它不应该使用`MessageBox.Show`.
3.  我会删除所有 UI 的东西，而是引发一个事件。调用者将监听事件并执行任何 UI 工作。

# cryptography - 如何验证使用自签名证书签名的二进制文件？

> ID：796059
> 
> 赞同：1
> 
> 时间：2009-04-28T02:56:27.827
> 
> 标签：cryptography, code-signing, signing, authenticode

我们想为我们的应用程序添加自动软件更新，但我们公司还没有准备好从受信任的根 CA 购买代码签名证书，因此我们将使用自签名证书来签署代码更新 (.exe和.dll）现在。

问题：如何使用 Microsoft 的 Cryptography API 验证使用自签名证书签名的二进制文件，而无需安装证书？要检查的 .cer 文件将与应用程序捆绑在一起。还是使用通用 Crypto 库更简单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T18:32:47.093

你可以跳过整个 X509 的事情，毕竟如果你要使用自己的证书，你并不真的需要它......

对于您想要做的事情，首先您必须生成您的 RSA 私钥/公钥对。然后将公钥存储在您的应用程序中。

当您有更新时，您可以通过获取 MD5 或 SHA-1 或您想使用的任何哈希值在您的站点上对其进行签名；然后你用私钥加密那个散列。已安装的应用程序获取更新和签名（加密哈希）；当应用程序获取二进制文件时，它会计算其哈希值，然后使用公钥解密另一个文件并进行比较。如果它们相同，那么它是一个有效的更新，否则你拒绝它并警告用户或其他东西。

对于自签名的 X509 证书，机制将完全一样，但公钥将有一堆额外的数据，比如颁发者的身份，这将是证书的相同身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-11T20:20:11.577

我似乎记得几年前听说过一种启用自签名证书的方法，早在 Win2k 时代，但它非常笨拙，根本不适合公共部署，并且可能已被“修复”。如果您确实考虑使用其他加密库或开发自己的加密库，请注意：很难区分好加密和坏加密。

# jquery - 如何从失败的 jQuery 请求中获取异常消息？

> ID：796065
> 
> 赞同：1
> 
> 时间：2009-04-28T03:01:19.127
> 
> 标签：jquery, asp.net-mvc, ajax, exception

如果我将 jQuery ajax 与错误处理程序一起使用，并且我正在调用的 ASP.NET MVC 操作引发异常，我希望能够在异常中向用户显示消息。现在我正在使用：

```
 $.ajax( {
    ...
    error: function(request,status,error) {
        var exp = new RegExp('<title>(.*)<\/title>','i');
        if (exp.exec(request.responseText)) {
           alert( RegExp.lastParen );
        }
        else {
           alert( status );
        }
    }
 }); 
```

我希望有一个规范的 jQuery 实现，而不是我自己的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T03:23:21.770

对于它的价值，我通常有任何返回 JsonResult 的操作，该 JsonResult 包装在 try/catch 块中，这样它就不会引发异常。相反，我为每个 Json 数组返回两个参数：“ok”（真/假）和“message”（包含在出现错误时向用户显示的消息）。

然后我省略了$.ajax的“error”参数，对JsonResult结果的“ok”参数做了一个简单的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T03:27:08.457

您正在做的事情没有错，但是如果您想要想法……如果请求具有 application/json 标头，那么将错误序列化为 JSON 的自定义错误页面呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T03:34:38.157

您正在寻找比 5 行代码*更简单的东西吗？*真的吗？

第 1 行，解析错误。这是您的服务器自定义的，所以我看不出 jQuery 的任何通用工具有什么帮助。

第 2-5 行，根据解析显示不同的错误。同样，这是为您的服务器定制的。

我个人不会在这里使用匿名函数（调用它`alertUser`或其他东西），但我认为这种方法没有任何问题。

# c# - 对于 CTOR 中的原始类型，如何使用 StructureMap

> ID：796066
> 
> 赞同：1
> 
> 时间：2009-04-28T03:03:35.330
> 
> 标签：c#, structuremap

我有以下课程的CTOR：

```
public class Log : ILog {
   ...
   public Log (string file, string flag) { .... }

   ....
} 
```

我尝试了以下代码来进行 DI 映射：

```
public MyStructureMap {

    public void static InitializeMapping() {
       StructureMap.DSL.Registiry.ForRequestedType<ILog>().TheDefault.Is
          .OfConcreteType<Log>().WithCtorArg("file").EqualTo(@"C:\tmp\log.txt");
       StructureMap.DSL.Registiry.ForRequestedType<ILog>().TheDefault.Is
          .OfConcreteType<Log>().WithCtorArg("flag").EqualTo(@"debug");
    }
 ....
} 
```

我无法让 ObjectFactory.GetInstance<ILog>() 中的对象工作。我想在我有两个原始参数的情况下，我不能使用 WithCtorArg() 来匹配参数。那正确吗？注册我的映射的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-09T15:42:06.267

我今天开始使用 StructureMap 并在发现您的问题时正在 StackOverflow 上寻找其他答案。你的问题有点老了，但如果你没有得到你的答案，这里是：

您可以使用多个原始参数。您只需更改语法即可利用流畅的界面：

```
public MyStructureMap {

    public void static InitializeMapping() {
       StructureMap.DSL.Registiry.ForRequestedType<ILog>().TheDefault.Is.OfConcreteType<Log>()
          .WithCtorArg("file").EqualTo(@"C:\tmp\log.txt")
          .WithCtorArg("flag").EqualTo(@"debug");
    }
 ....
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-03T18:06:22.823

不，你绝对可以：[http ://structuremap.sourceforge.net/InstanceExpression.htm#section5](http://structuremap.sourceforge.net/InstanceExpression.htm#section5)

注册映射的最佳方法是使用注册表 DSL，您可以在那里使用它，但您需要从 Registry 派生并在初始化时配置该注册表：http: [//structuremap.sourceforge.net/RegistryDSL.htm](http://structuremap.sourceforge.net/RegistryDSL.htm)

# ruby-on-rails - 如何在 ActiveRecord 关联中创建/维护对特定对象的有效引用？

> ID：796071
> 
> 赞同：4
> 
> 时间：2009-04-28T03:05:16.450
> 
> 标签：ruby-on-rails, ruby, validation, activerecord

使用 ActiveRecord，我有一个对象 Client，它有零个或多个用户（即通过 has_many 关联）。客户端还具有可以手动设置的“primary_contact”属性，但始终必须指向关联用户之一。即primary_contact 只能在没有关联用户的情况下为空。

实现 Client 的最佳方法是什么：

a) 第一次将用户添加到客户端时，primary_contact 是否设置为指向该用户？

b）primary_contact 始终保证在用户关联中，除非所有用户都被删除？（这有两个部分：设置新的 primary_contact 或从关联中删除用户时）

换句话说，我如何将“主要联系人”的标题指定并重新分配给给定客户的用户之一？我已经修改了许多过滤器和验证，但我就是无法做到正确。任何帮助，将不胜感激。

* * *

更新：虽然我确信有无数的解决方案，但我最终让用户在删除它时通知客户端，然后在客户端中使用 before_save 调用来验证（并在必要时设置）它的 primary_contact。此调用在删除之前由用户触发。在更新关联时，这并不能捕捉到所有的边缘情况，但它足以满足我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T07:05:52.783

我的解决方案是在连接模型中做所有事情。我认为这在客户端转换到零关联或从零关联转换时可以正常工作，始终保证在存在任何现有关联时指定主要联系人。我很想听听任何人的反馈。

* * *

我是新来的，所以不能在下面评论弗朗索瓦。我只能编辑我自己的条目。他的解决方案假定用户对客户是一对多，而我的解决方案假定多对多。我在想用户模型可能代表一个“代理”或“代表”，并且肯定会管理多个客户端。这个问题在这方面是模棱两可的。

* * *

```
class User < ActiveRecord::Base
  has_many :user_clients, :dependent => true
  has_many :clients, :through => :user_client

end

class UserClient < ActiveRecord::Base

  belongs_to :user
  belongs_to :client

  # user_client join table contains :primary column

  after_create :init_primary
  before_destroy :preserve_primary

  def init_primary
    # first association for a client is always primary
    if self.client.user_clients.length == 1 
      self.primary = true
      self.save
    end
  end

  def preserve_primary
    if self.primary
      #unless this is the last association, make soemone else primary
      unless self.client.user_clients.length == 1 
        # there's gotta be a more concise way...
        if self.client.user_clients[0].equal? self
          self.client.user_clients[1].primary = true
        else
          self.client.user_clients[0].primary = true
        end
      end
    end
  end

end

class Client < ActiveRecord::Base
  has_many :user_clients, :dependent => true
  has_many :users, :through => :user_client

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-23T15:33:21.740

虽然我确信有无数的解决方案，但我最终让用户在删除它时通知客户端，然后在客户端中使用 before_save 调用来验证（并在必要时设置）它的 primary_contact。此调用在删除之前由用户触发。在更新关联时，这并不能捕捉到所有的边缘情况，但它足以满足我的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T08:42:35.827

我会使用用户的布尔属性来做到这一点。#has_one 可用于查找将此布尔值设置为 true 的第一个模型。

```
class Client < AR::B
  has_many :users, :dependent => :destroy
  has_one  :primary_contact, :class_name => "User",
                             :conditions => {:primary_contact => true},
                             :dependent  => :destroy
end

class User < AR::B
  belongs_to :client

  after_save    :ensure_only_primary
  before_create :ensure_at_least_one_primary
  after_destroy :select_another_primary

  private
  # We always want one primary contact, so find another one when I'm being
  # deleted
  def select_another_primary
    return unless primary_contact?
    u = self.client.users.first
    u.update_attribute(:primary_contact, true) if u
  end

  def ensure_at_least_one_primary
    return if self.client.users.count(:primary_contact).nonzero?
    self.primary_contact = true
  end

  # We want only 1 primary contact, so if I am the primary contact, all other
  # ones have to be secondary
  def ensure_only_primary
    return unless primary_contact?
    self.client.users.update_all(["primary_contact = ?", false], ["id <> ?", self.id])
  end
end 
```

# matlab - 如何在 MATLAB 中创建分段内联函数？

> ID：796072
> 
> 赞同：7
> 
> 时间：2009-04-28T03:05:40.113
> 
> 标签：matlab, function, inline, piecewise

我在 MATLAB 中有一个函数，它以另一个函数作为参数。我想以某种方式定义一个可以传入的分段内联函数。这在 MATLAB 中是否可能？

编辑：我想代表的功能是：

```
f(x) = { 1.0,  0.0 <= x <= 0.5,
         -1.0, 0.5 < x <= 1.0

where 0.0 <= x <= 1.0 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-28T11:13:03.827

您确实已经定义了一个具有三个断点的分段函数，即在 [0, 0.5, 1] 处。但是，您还没有在中断之外定义函数的值。（顺便说一句，我在这里使用了术语“中断”，因为我们实际上是在定义一种简单形式的样条曲线，一个分段常数样条曲线。我可能还使用了术语“结”，这是样条曲线世界中的另一个常用词。 )

如果您绝对知道您永远不会评估 [0,1] 之外的函数，那么就没有问题。因此，只需在 x = 0.5 处定义一个带有 ONE 断点的分段函数。定义像您这样的分段常量函数的简单方法是使用逻辑运算符。因此，测试 (x > 0.5) 返回一个常数，即 0 或 1。通过缩放和转换该结果，很容易生成一个满足您要求的函数。

```
constfun = @(x) (x > 0.5)*2 - 1; 
```

内联函数做类似的事情，但与匿名函数相比，内联函数非常慢。我强烈建议使用匿名表格。作为测试，试试这个：

```
infun = inline('(x > 0.5)*2 - 1','x');
x = 0:.001:1;

tic,y = constfun(x);toc
Elapsed time is 0.002192 seconds.

tic,y = infun(x);toc
Elapsed time is 0.136311 seconds. 
```

是的，内联函数的执行时间比匿名表单要多得多。

我在这里使用的简单分段常数形式的一个问题是，当您有更多断点时，它很难扩展。例如，假设您希望定义一个函数，该函数根据点所在的间隔采用三个不同的值？虽然这也可以通过创造性地使用测试来完成，小心地移动和缩放它们，但它可能会变得令人讨厌。例如，如何定义返回的分段函数

```
-1 when x < 0,
2 when 0 <= x < 1,
1 when 1 <= x 
```

一种解决方案是使用单位[Heaviside](http://en.wikipedia.org/wiki/Heaviside_step_function)函数。所以首先，定义一个基本单元 Heaviside 函数。

```
H = @(x) (x >= 0); 
```

我们的分段函数现在是从 H(x) 导出的。

```
P = @(x) -1 + H(x)*3 + H(x-1)*(-1); 
```

看到 P(x) 有三个部分。第一项是 x 在第一个断点以下发生的情况。然后我们添加一个在零以上生效的部分。最后，第三部分在上面 x == 1 中添加了另一个偏移量。它很容易绘制。

```
ezplot(P,[-3,3]) 
```

从这个开始很容易生成更复杂的样条。我再次将此构造称为样条曲线。真的，这就是我们可能领先的地方。事实上，这就是导致的地方。样条曲线是一个分段函数，在一系列节点或断点处小心地捆绑在一起。特别是样条曲线通常具有指定的连续性顺序，例如，三次样条曲线将在断点处两次可微 (C2)。还有只有 C1 函数的分段三次函数。我的观点是，我已经描述了一个简单的起点来形成任何分段函数。它对多项式样条曲线非常有效，尽管选择这些函数的系数可能需要一些数学知识。

创建此函数的另一种方法是显式分段多项式。在 MATLAB 中，我们有一个鲜为人知的函数 mkpp。试试这个...

```
pp = mkpp([0 .5 1],[1;-1]); 
```

如果你有样条工具箱，那么 fnplt 会直接为你绘制。假设您没有那个 TB，请执行以下操作：

```
ppfun = @(x) ppval(pp,x);
ezplot(ppfun,[0 1]) 
```

回顾一下 mkpp 调用，毕竟还是比较简单的。第一个参数是曲线中的断点列表（作为 ROW 向量）。第二个参数是一个 COLUMN 向量，具有分段常数值，曲线将在这两个定义的中断间隔内呈现。

几年前，我发布了另一个选项，[piecewise_eval](http://www.mathworks.com/matlabcentral/fileexchange/9394)。它可以从 MATLAB Central 文件交换中下载。这是一个允许用户将分段函数纯粹指定为断点列表的函数，以及这些断点之间的功能块。因此，对于在 x = 0.5 处具有单个中断的函数，我们将这样做：

```
fun = @(x) piecewise_eval(x,0.5,{1,-1}); 
```

请注意，第三个参数提供了每个段中使用的值，尽管这些部分不必是纯粹的常量函数。如果您希望函数返回感兴趣的区间之外的 NaN，这也很容易实现。

```
fun = @(x) piecewise_eval(x,[0 0.5 1],{NaN,1,-1,NaN}); 
```

在所有这些相当长的游览中，我的观点是了解分段函数是什么，以及在 MATLAB 中构建分段函数的几种方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-28T06:43:21.353

不幸的是，MATLAB 没有三元运算符可以使这种事情变得更容易，但是为了稍微扩展 gnovice 的方法，您可以创建一个匿名函数，如下所示：

```
fh = @(x) ( 2 .* ( x <= 0.5 ) - 1 ) 
```

一般来说，匿名函数比内联函数对象更强大，并且允许你创建闭包等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T03:59:33.370

如果您真的想创建一个内联函数（而不是[匿名函数](http://www.mathworks.com/access/helpdesk/help/techdoc/matlab_prog/f4-70115.html)），那么以下可能是最简单的方法：

```
f = inline('2.*(x <= 0.5)-1'); 
```

但是，正如其他答案中所指出的，匿名函数更常用且效率更高：

```
f = @(x) (2.*(x <= 0.5)-1); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-06T15:11:34.267

我只需要解决这个问题，我认为最简单的方法是使用匿名函数。假设你有一个分段函数：

```
when x<0    : x^2 + 3x
when 0<=x<=4: e^x
when x>4    : log(x) 
```

我首先为每个分段区域定义逻辑掩码：

```
PIECE1 = @(x) x<0
PIECE2 = @(x) x>=0 & x<=4
PIECE3 = @(x) x>4 
```

然后我把它们放在一起：

```
f = @(x) PIECE1(x).*(x.^2+3*x) + PIECE2(x).*exp(x) + PIECE3(x).*log(x)

x = -10:.1:10
figure;
plot(x,f(x)) 
```

# web-services - NHibernate 投影到 DTO

> ID：796076
> 
> 赞同：2
> 
> 时间：2009-04-28T03:08:34.380
> 
> 标签：web-services, nhibernate, orm, dto, projection

我不熟悉 NHibernate 投影。我正在尝试使用它，以便可以返回 List<> 而不是 IList<>。到目前为止，我在向 DTO 投射方面还没有多少运气。我有以下查询和域对象。所以一开始我只是想得到一个给定 EmployeeID 的订单列表。我正在遍历结果列表并将其添加到列表中，因为我希望能够序列化此列表。谁能告诉我Projection离我有多远？我搜索并发现了一些与我自己不相似的示例。基本上..我只想创建一个 DTO 列表。

谢谢！

```
public List<EmployeeOrder> GetEmployessOrdersDTO(int empid)
        {
        var emporders = new List<EmployeeOrder>();

        ICriteria criteriaSelect = NHibernateSessionManager.Instance.GetSession().CreateCriteria(typeof (Orders))
            .CreateCriteria("Employees")
            .Add(Expression.Eq("EmployeeID", empid));

        criteriaSelect.SetProjection(
            Projections.ProjectionList()
            .Add(Projections.Property("Products"), "OrderedProducts"));

        criteriaSelect.SetResultTransformer(NHibernate.Transform.Transformers.AliasToBean(typeof(EmployeeOrder)));
        criteriaSelect.List<EmployeeOrder>();

        foreach (var order in emporders)
        {
            emporders.Add(order);
        }
        return emporders;
    } 
```

订单：

```
 public class Orders
{
    public virtual int OrderID { get; private set;}
    public virtual string CustomerID { get; set; }
    public virtual DateTime OrderDate { get; set; }
    public virtual DateTime RequiredDate { get; set; }
    public virtual DateTime ShippedDate { get; set; }
    public virtual Employees Employee { get; set; }
    public virtual IList<Products> Products { get; private set; }

} 
```

雇员：

```
public class Employees
{

    public virtual int EmployeeID { get; private set;}
    public virtual string LastName { get; set;}
    public virtual string FirstName { get; set;}
    public virtual string City { get; set; }
    public virtual DateTime HireDate { get; set; }
    public virtual string Title { get; set; }
    public virtual IList<Orders> Orders { get; private set; }

} 
```

员工订单DTO：

```
public class EmployeeOrder
{
    public virtual string EmployeeName { get; set; }
    public virtual string EmployeeTitle { get; set; }
    public virtual DateTime RequiredDate { get; set; }
    public virtual List<Products> OrderedProducts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-28T11:25:45.417

在 nHibernate 2.1 中， .List() 方法实际上已经返回了一个 List 类型，所以你可以直接转换：

```
var list = (List<EmployeeOrder>)criteriaSelect.List<EmployeeOrder>(); 
```

但是，如果您希望未来安全并且不依赖于基于当前 nHibernate 实现的假设，我会编写一个接受 ICriteria 的扩展方法：

```
 public static List<T> ToList<T>(this ICriteria criteria)
  {
    return criteria.List<T>().ToList();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T05:00:09.200

改变

```
criteriaSelect.List<EmployeeOrder>(); 
```

至

```
List<EmployeeOrder> employeeOrders = criteriaSelect.List<EmployeeOrder>() as List<EmployeeOrder>; 
```

# sql - 在 T-SQL 中“合并”两个表 - 替换或保留重复的 ID

> ID：796077
> 
> 赞同：3
> 
> 时间：2009-04-28T03:08:42.510
> 
> 标签：sql, tsql, merge

我有一个使用相当大的表（数百万行，大约 30 列）的 Web 应用程序。我们称它为 TableA。在这 30 列中，该表有一个名为“id”的主键和一个名为“campaignID”的列。

作为应用程序的一部分，用户可以上传与新“活动”相关的新数据集。

这些数据集的结构与 TableA 相同，但通常只有大约 10,000-20,000 行。

新数据集中的每一行都有一个唯一的“id”，但它们都将共享同一个campaignID。换句话说，用户正在为一个新的“campaign”加载完整的数据，因此所有 10,000 行都具有相同的“campaignID”。

通常，用户正在上传新活动的数据，因此表 A 中没有具有相同活动 ID 的行。由于“id”对于每个活动都是唯一的，因此每一行新数据的 id 在 TableA 中都是唯一的。

但是，在极少数情况下，用户尝试为数据库中已存在的“活动”加载一组新行，要求首先从 TableA 中删除该活动的所有旧行，然后插入新行从新的数据集中。

所以，我的存储过程很简单：

1.  将新数据批量插入临时表 (#tableB)
2.  删除 TableA 中具有相同活动 ID 的任何现有行
3.  插入表 A ([columns]) SELECT [columns] from #TableB
4.  删除#TableB

这工作得很好。

但是新的要求是在用户上传新数据以处理“重复”时为用户提供 3 个选项 - 用户正在为已经在 TableA 中的活动上传数据的实例。

1.  删除 TableA 中具有相同活动 ID 的所有数据，然后插入 #TableB 中的所有新数据。（这是旧行为。使用此选项，它们将永远不会重复。）
2.  如果#TableB 中的一行与TableA 中的行具有相同的ID，则使用#TableB 中的行更新TableA 中的该行（实际上，这是用新数据“替换”旧数据）
3.  如果#TableB 中的一行与TableA 中的行具有相同的id，则忽略#TableB 中的该行（本质上，这是保留原始数据，而忽略新数据）。

用户不能逐行选择它。她选择如何合并数据，并将此逻辑应用于整个数据集。

在我使用 MySQL 的类似应用程序中，我使用了“LOAD DATA INFILE”函数，带有“REPLACE”或“IGNORE”选项。但我不知道如何使用 SQL Server/T-SQL 做到这一点。

任何解决方案都需要足够高效来处理 TableA 有数百万行，而#TableB（新数据集）可能有 10k-20k 行的事实。

我搜索了类似“合并”命令的东西（似乎支持 SQL Server 2008），但我只能访问 SQL Server 2005。

在粗略的伪代码中，我需要这样的东西：

如果用户选择选项 1：[我已经准备好了 - 我有这个工作]

如果用户选择选项 2（替换）：

```
merge into TableA as Target
using #TableB as Source
    on TableA.id=#TableB.id
when matched then 
    update row in TableA with row from #TableB
when not matched then
    insert row from #TableB into TableA 
```

如果用户选择选项 3（保留）：

```
merge into TableA as Target
using #TableB as Source
    on TableA.id=#TableB.id
when matched then 
    do nothing
when not matched then
    insert row from #TableB into TableA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T03:36:32.457

这个怎么样？

选项2：

```
begin tran;
delete from tablea where exists (select 1 from tableb where tablea.id=tableb.id);
insert into tablea select * from tableb;
commit tran; 
```

选项 3：

```
begin tran;
delete from tableb where exists (select 1 from tablea where tablea.id=tableb.id);
insert into tablea select * from tableb;
commit tran; 
```

至于性能，只要对 tablea（大表）中的 id 字段进行索引，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-02T08:36:12.710

当他声称他想要 MERGE 时，您为什么要使用 Upserts？SQL 2008 中的 MAREG 更快、更高效。

我会让合并处理差异。

# wpf - 将列表视图自动滚动到最后添加的项目的最佳方法是什么？

> ID：796078
> 
> 赞同：3
> 
> 时间：2009-04-28T03:09:05.987
> 
> 标签：wpf, data-binding, listview, listviewitem

我使用 a`ListView`来显示在我的应用程序中出现的错误列表。它的行为和外观与 Visual Studio 中的错误列表完全相同。我想在选择最后一个错误项时添加自动滚动（例如，当您将插入符号放在末尾时，Visual Studio 的日志窗口如何自动滚动）。

错误列表在一个 中`ObservableCollection`，它被传递给`ListView.ItemsSource`这样的：

```
public ObservableCollection<ErrorListItem> Items;
... 
MyListView.ItemsSource = _Items; 
```

我尝试在事件处理程序中执行自动滚动`_Items_CollectionChanged`，但因为这是事件`ItemsSource`而不是实际事件`ListViewItems`，所以很难确定是否选择了最后一项、选择新行等。因为这尤其困难似乎`ListViewItems`不是立即创建的。我设法通过延迟设置最后一个项目的调用来使其自动滚动，如下所示：

```
void _Items_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    // determine the last item to select from 'e'
    ...        

    _ItemPendingToBeScrolled = newItemToSelect;
    ListView.SelectedItem = newItemToSelect;

    Dispatcher.BeginInvoke(DispatcherPriority.Background, 
        (ThreadStart)delegate 
        { 
            if (_ItemPendingToBeScrolled != null)
            {
                ListView.ScrollIntoView(_ItemPendingToBeScrolled);
                ItemPendingToBeScrolled = null;
            } 
        })
} 
```

但这显然不是正确的做法。`ListViewItem`另外，如果列表被过滤，我希望事情继续工作（不检查我的源代码中的最后一个项目，但检查`ListView`.

有没有办法在将 a`ListViewItem`添加到`ListView`以下添加到绑定集合中时监听事件？这将是为了正确进行自动滚动而捕获的理想事件。还是我可以使用另一种技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-09-14T04:12:36.963

我对列表框/列表视图及其滚动有很多问题，但是，您提到挂钩到列表视图的更改事件，是因为您无法收听可观察集合的 CollectionChanged 事件吗？ObservableCollection 比 List 控件更稳定，并且您将获得相同的通知。

如果这些事件在 UI 中不起作用并且您无权访问，您也可以将这些事件冒泡，这样您就可以在 UI 中处理滚动而无需访问实际集合，只需在自定义中保留对 Selected Item 的引用EventArgs 类

# background - 使用损坏的 CTRL+Z 执行后，如何将进程置于后台？

> ID：796079
> 
> 赞同：10
> 
> 时间：2009-04-28T03:09:14.083
> 
> 标签：background, stdout

*这个问题很特殊，因为某些键（例如 CTRL+Z）停止工作。*

我试图通过输入顺序将进程置于后台：

> 1.  寻找 /
> 2.  CTRL+Z
> 3.  bg

但是，我仍然可以看到标准输出。仅执行第一步的唯一区别是命令 CTRL+Z 不再起作用。当我有未保存的工作并且我的硬盘超过 100GB 时，这是相当讨厌的。所以

> 如何将进程置于后台？

**[细节]**

我在 Mac 上使用第四版 Bash。

**[尼古拉斯·莱利的关键回复]**

问题真的是我不明白运行进程背景的“后果”。我不明白为什么 CTRL+Z 之类的命令对后台进程不起作用。我仍然能够使用以下命令在另一个 shell 中终止该进程：

```
ps -ej | awk '! /grep/ && /find/ {print $2}' | xargs kill -9 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-28T03:23:36.373

`^Z`不起作用，因为最前面的工作现在是 shell，而 shell 通常不响应`SIGTSTP`. （如果您确实想暂停非登录 shell，`suspend`通常可以。）

问题似乎是您误解了在后台工作的后果。重定向作业的标准输出是不相关的。

事实上，目前还不清楚*你*想做什么。如果你只是想停止`find`运行，那么`fg`它并使用`^C`or `^\`（默认情况下分别发送`SIGINT`和`SIGQUIT`）。

如果您想继续`find`运行但抑制其进一步输出，那么我能想到的最简单的解决方案是使用`bg ; disown ; exit`. 这将阻止 shell 杀死其子进程 ( `find`) 并退出 shell；假设它位于终端窗口的顶层，您将看到更多输出`find`并将继续运行（但您将无法与之交互）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T03:58:59.737

我用不认。

```
find / & disown
exit # close the terminal and the command still runs 
```

你也可以在 ^Z 之后使用 disown：

```
find /
^Z
bg
disown
exit 
```

我相信，disown 是一个内置的bash。不确定其他外壳的替代品。

有关详细信息，请参阅[我在 Server Fault 上的等效答案](https://serverfault.com/questions/311593/keeping-a-linux-process-running-after-i-logout/311737#311737)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T03:12:33.903

您可以在任何类 UNIX 系统上使用 stty 将操作设置为不同的键。

```
$ stty susp Q 
```

将使 Q 成为您的暂停键，而不是 CTRL-Z。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-28T03:25:31.110

后台处理进程不会断开与终端设备的输出，这就是为什么您仍然可以看到输出，并且输出很可能包含控制字符，这些字符可能会填满您的 TTY 设置（`cat`使用二进制文件是一种很好的方法）。

如果您希望作业在后台运行，请正确执行：

```
find / >/tmp/out 2>&1 & 
```

然后在完成后检查`/tmp/out`文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-28T03:25:20.380

我通常用 nohup 做这种事情。像这样：

nohup 查找 / > /tmp/myresults.txt &

nohup 确保进程不会停止，即使控制台消失（例如，您关闭窗口或丢失 SSH 或其他）。“>”将输出发送到文件而不是控制台，“&”将作业置于后台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T03:16:33.677

我假设您使用的是 Linux 或 UNIX 的常见变体，可能还有 bash shell。在这种情况下：

CTRL-Z 将`SIGTSTP`信号发送到前台进程。您应该能够通过指定 .kill 命令来执行相同的操作`kill -s SIGTSTP [pid]`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T03:39:30.237

我知道在 Ubuntu 9.04 中，您可以在它之后使用 & 启动该进程以在后台运行它。例如，“sudo gedit /boot/grub/menu.lst &”将启动一个文本编辑器，在后台编辑 GRUB 配置文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-02-23T22:26:25.510

杀死 -STOP your_pid_here

从另一个控制台窗口？

[http://tombuntu.com/index.php/2007/11/23/how-to-pause-a-linux-process/#comment-132413](http://tombuntu.com/index.php/2007/11/23/how-to-pause-a-linux-process/#comment-132413)

# java - Symbol SPT-1800 Java 条码扫描器

> ID：796083
> 
> 赞同：1
> 
> 时间：2009-04-28T03:13:21.717
> 
> 标签：java, barcode, palm-os

有人知道是否可以用 Java 为 SPT-1800 编写条形码扫描应用程序吗？

我不知道如何对 Old School Palm OS 进行编程。所以 java 会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T04:43:42.157

我认为[Waba/SuperWaba](http://www.wabasoft.com/)将是旧款 PalmOS 设备的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T15:41:05.447

看起来您必须用 C 语言编写一个 Palm 应用程序来控制该模型。

请参阅[软件开发工具包 (SDK)，v. 4.10](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=10387&sliceId=&dialogID=101782009&stateId=1%200%20101768992)和[常见问题解答：在哪里可以找到 Palm SDK 和开发工具？](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=MCD-00278&sliceId=SAL_Public&dialogID=101782009&stateId=1%200%20101768992)了解更多信息。

摩托罗拉/Symbol 站点不是很直观，因此这里有一个指向所有[SPT1800 支持文档](http://support.symbol.com/support/search.do?languages=&rwTarget=%2FrfPlayerWidget.do&searchMode=GuidedSearch&searchString=&productLine=SG_MOBILECOMPUTERS_1_1&product=SG_SPT1800_1_2&document=&cmd=search&productFamily=&contextType=gs)的链接。

SDK 通常非常好，可以让您快速启动并运行示例应用程序。

我最近曾希望将 Java 用于 MC3000 和 MC9000 系列，但似乎 Motorola/Symbol 已停止为这些设备发布更新的 Java SDK，现在正专注于 .NET SDK。

Java SDK 还需要从 3rd 方供应商处获得额外的 JVM 许可，这大大增加了最终部署成本。

# c - 在不修改源代码的情况下查找多进程程序中调用了哪些函数？

> ID：796086
> 
> 赞同：4
> 
> 时间：2009-04-28T03:15:01.697
> 
> 标签：c, linux, profiling, code-coverage, gprof

我正在做一个项目，我需要在给定特定输入的情况下找到在各种 Linux 程序（用 C 编写）中调用哪些函数。我目前的方法是使用 -pg（分析选项）编译一个程序，运行它，然后通过处理 gprof 的输出来查找调用了哪些函数。只有至少被调用一次的函数才会出现在输出文件中。

明显的问题是只有一个进程可以写入 gprof 输出文件。如果程序分叉多个进程，我不会从其他进程获得任何分析输出。

有没有办法让 gprof 为每个进程生成一个输出文件（可能由 pid 标记）？该手册建议将每个进程更改为不同的目录，但我不想修改源代码来执行此操作。是否有其他适用于 Linux 的工具可以提供帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T03:23:27.230

[他们在这里](http://www.regatta.cs.msu.su/doc/usr/share/man/info/ru_RU/a_doc_lib/cmds/aixcmds2/gprof.htm)建议使用[tprof](http://www.regatta.cs.msu.su/doc/usr/share/man/info/ru_RU/a_doc_lib/cmds/aixcmds5/tprof.htm#HDRC013828476JOY)：

你试过valgrind吗？

[http://www.network-theory.co.uk/docs/valgrind/valgrind_17.html](http://www.network-theory.co.uk/docs/valgrind/valgrind_17.html)

```
--child-silent-after-fork=<yes|no> [default: no] 
```

启用后，Valgrind 不会显示由 fork 调用产生的子进程的任何调试或日志输出。在处理创建子进程时，这可以使输出不那么混乱（尽管更具误导性）。它与 --trace-children= 结合使用特别有用。如果您正在请求 XML 输出 (--xml=yes)，也强烈建议使用此标志，因为否则来自子和父的 XML 可能会混淆，这通常会使其无用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T03:25:30.813

看看 GCov：[http ://gcc.gnu.org/onlinedocs/gcc/Gcov.html](http://gcc.gnu.org/onlinedocs/gcc/Gcov.html)

# css - 将一个 div 变成一个链接

> ID：796087
> 
> 赞同：579
> 
> 时间：2009-04-28T03:15:24.943
> 
> 标签：css, html, xhtml, anchor

我有`<div>`一些我不想更改的精美视觉内容的块。我想让它成为一个可点击的链接。

我正在寻找类似的东西`<a href="…"><div> … </div></a>`，但那是有效的 XHTML 1.1。

* * *

## 回答 #1

> 赞同：770
> 
> 时间：2010-08-16T14:32:56.217

来到这里是希望找到一个更好的解决方案，但我不喜欢这里提供的任何解决方案。我想你们中的一些人误解了这个问题。OP 希望使一个充满内容的 div 表现得像一个链接。这方面的一个例子是 facebook 广告 - 如果你看，它们实际上是正确的标记。

对我来说，禁忌是：javascript（不应该仅仅用于链接，而且非常糟糕的 SEO/可访问性）；无效的 HTML。

本质上是这样的：

*   使用普通的 CSS 技术和有效的 HTML 构建您的面板。
*   如果用户单击面板，则在其中的某处放置一个您希望成为默认链接的链接（您也可以有其他链接）。
*   在该链接内，放置一个空的跨度标签（`<span></span>`，不是`<span />`- 谢谢@Campey）
*   给面板位置：相对
*   将以下 CSS 应用于空范围：

    ```
    { 
      position:absolute; 
      width:100%;
      height:100%;
      top:0;
      left: 0;

      z-index: 1;

      /* fixes overlap error in IE7/8, 
         make sure you have an empty gif */
      background-image: url('empty.gif');
    } 
    ```

    它现在将覆盖面板，并且由于它位于`<A>`标签内，因此它是一个可点击的链接

*   给出面板位置内的任何其他链接：相对和合适的 z-index (>1) 以将它们带到默认跨度链接的前面

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2009-04-28T03:20:36.303

您不能制作`div`a 链接本身，但可以使`<a>`标签充当 a `block`，与 a 具有相同的行为`<div>`。

```
a {
    display: block;
} 
```

然后你可以设置它的宽度和高度。

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2011-04-14T01:12:05.993

这是一个古老的问题，但我想我会回答它，因为这里的每个人都有一些疯狂的解决方案。其实非常非常简单...

锚标签的工作原理是这样的 -

```
<a href="whatever you want"> EVERYTHING IN HERE TURNS INTO A LINK </a> 
```

苏...

```
<a href="whatever you want"> <div id="thediv" /> </a> 
```

虽然我不确定这是否有效。如果这是口头解决方案背后的原因，那么我道歉......

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2009-04-28T03:19:17.040

需要一点 JavaScript。但是，您`div`将是可点击的。

```
<div onclick="location.href='http://www.example.com';" style="cursor:pointer;"></div> 
```

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2014-02-27T16:25:01.923

此选项不需要 empty.gif ，如最受好评的答案所示：

HTML：

```
 <div class="feature">
       <a href="http://www.example.com"></a>
 </div> 
```

CSS：

```
 div.feature {
        position: relative;
    }

    div.feature a {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        text-decoration: none; /* No underlines on the link */
        z-index: 10; /* Places the link above everything else in the div */
        background-color: #FFF; /* Fix to make div clickable in IE */
        opacity: 0; /* Fix to make div clickable in IE */
        filter: alpha(opacity=1); /* Fix to make div clickable in IE */
    } 
```

正如[http://www.digitalskydesign.com/how-to-make-an-entire-div-a-link-using-css/所建议的那样](http://www.digitalskydesign.com/how-to-make-an-entire-div-a-link-using-css/)

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2009-04-28T03:52:29.097

这是实现您想要的“有效”解决方案。

```
<style type="text/css">
.myspan {
    display: block;
}
</style>
<a href="#"><span class="myspan">text</span></a> 
```

但最有可能您真正想要的是将`<a>`标签显示为块级元素。

我不建议使用 JavaScript 来模拟超链接，因为这违背了标记验证的目的，最终是为了提高可访问性（按照适当的语义规则发布格式良好的文档可以最大限度地减少不同浏览器对同一文档进行不同解释的可能性）。

最好发布一个不验证但*可以在所有浏览器上正常呈现和运行*的网页，包括禁用 JavaScript 的网页。此外，using`onclick`不会为屏幕阅读器提供语义信息来确定 div 是否用作链接。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2013-09-26T14:13:52.630

最简洁的方法是将 jQuery 与 HTML 中引入的数据标签一起使用。使用此解决方案，您可以在所需的每个标签上创建链接。首先用 data-link 标签定义标签（例如 div）：

```
<div data-link="http://www.google.at/">Some content in the div which is arbitrary</div> 
```

现在您可以随意设置 div 的样式。而且您还必须为“链接”类似的行为创建样式：

```
[data-link] {
  cursor: pointer;
} 
```

最后把这个 jQuery 调用放到页面上：

```
$(document).ready(function() {
  $("[data-link]").click(function() {
    window.location.href = $(this).attr("data-link");
    return false;
  });
}); 
```

使用此代码，jQuery 将点击侦听器应用于页面上具有“数据链接”属性的每个标签，并重定向到数据链接属性中的 URL。

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2011-02-12T04:35:34.250

不确定这是否有效，但它对我有用。

编码 ：

```
<div style='position:relative;background-color:#000000;width:600px;height:30px;border:solid;'>
  <p style='display:inline;color:#ffffff;float:left;'> Whatever </p>     
  <a style='position:absolute;top:0px;left:0px;width:100%;height:100%;display:inline;' href ='#'></a>
</div>
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2011-11-06T21:00:20.600

为了使同行的答案在 IE 7 及更高版本中工作，它需要一些调整。

1.  如果元素没有背景颜色，IE 将不支持 z-index，因此链接不会与包含内容的包含 div 的部分重叠，只会与空白部分重叠。为了解决这个问题，添加了不透明度为 0 的背景。

2.  由于某种原因，在链接方法中使用跨度时，IE7 和各种兼容模式完全失败。但是，如果链接本身被赋予样式，它就可以正常工作。

```
.blockLink  
{  
    position:absolute;  
    top:0;  
    left: 0;  
    width:100%;  
    height:100%;  
    z-index: 1;  
    background-color:#ffffff;   
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";  
    filter: alpha(opacity=0);  
    opacity:0;  
} 
```

```
<div style="position:relative">  
    <some content>  
    <a href="somepage" class="blockLink" />  
<div> 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2012-08-23T17:25:46.560

您也可以尝试包装一个锚点，然后将其高度和宽度设置为与其父级相同。这对我来说非常有效。

```
<div id="css_ID">
    <a href="http://www.your_link.com" style="display:block; height:100%; width:100%;"></a>
</div> 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2020-05-09T13:24:44.317

尚未提及的一个选项是使用 flex。通过应用于`flex: 1`标签`a`，它会扩展以适应容器。

```
div {
  height: 100px;
  width: 100px;
  display: flex;
  border: 1px solid;
}

a {
  flex: 1;
}
```

```
<div>
  <a href="http://google.co.uk">Link</a>
</div>
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-02-19T13:17:01.117

为什么不？`use <a href="bla"> <div></div> </a>`在 HTML5 中工作正常

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-03-09T01:17:36.873

这对我有用：

HTML：

```
<div>

  WHATEVER YOU WANT

  <a href="YOUR LINK HERE">
    <span class="span-link"></span>
  </a>

</div> 
```

CSS：

```
.span-link {
  position:absolute;
  width:100%;
  height:100%;
  top:0;
  left: 0;
  z-index: 9999;
} 
```

这会添加一个不可见的元素（跨度），它覆盖整个 div，并且在 z-index 上的整个 div*上方*，因此当有人点击该 div 时，点击本质上会被不可见的“跨度”层拦截，其中已连接。

注意：如果您已经对其他元素使用 z-index，只需确保此 z-index 的值高于您希望它“置于”顶部的任何值。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2010-08-11T15:23:30.743

我知道这篇文章很旧，但我只需要解决同样的问题，因为简单地编写一个显示设置为阻止的普通链接标签不会使整个 div 在 IE 中可点击。所以解决这个问题比使用 JQuery 要简单得多。

首先让我们了解为什么会发生这种情况：IE 不会使空的 div 可点击，它只会使该 div/a 标签内的文本/图像可点击。

解决方案：用背景图像填充 div 并将其隐藏在查看器中。

如何？你问了很好的问题，现在听好了。将此背景样式添加到 a 标签

```
> "background:url('some_small_image_path')
> -2000px -2000px no-repeat;" 
```

有了它，整个 div 现在可以点击了。这对我来说是最好的方法，因为我将它用于我的照片库，让用户单击图像的一半以向左/向右移动，然后放置一个小图像以达到视觉效果。所以对我来说，无论如何我都使用左右图像作为背景图像！

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-11-02T16:27:38.300

只需将链接放在块中并使用 jquery 增强它。对于没有 javascript 的任何人，它都会优雅地降级 100%。使用 html 执行此操作并不是最好的解决方案恕我直言。例如：

```
<div id="div_link">
<h2><a href="mylink.htm">The Link and Headline</a></h2>
<p>Some more stuff and maybe another <a href="mylink.htm">link</a>.</p>
</div> 
```

然后使用 jquery 使块可点击（通过[网页设计师墙](http://www.webdesignerwall.com/tutorials/jquery-tutorials-for-designers/)）：

```
$(document).ready(function(){

    $("#div_link").click(function(){
      window.location=$(this).find("a").attr("href"); return false;
    });

}); 
```

然后你所要做的就是将光标样式添加到 div

```
 #div_link:hover {cursor: pointer;} 
```

如果通过将“js_enabled”类添加到 div 或正文或其他任何内容来启用 javascript，则仅适用这些样式。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-10-10T11:27:23.047

这个例子对我有用：

```
<div style="position: relative; width:191px; height:83px;">
    <a href="link.php" style="display:block; width:100%; height:100%;"></a>
</div> 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-04-18T00:58:19.103

```
<a href="…" style="cursor: pointer;"><div> … </div></a> 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-07-06T12:37:45.540

这是 BBC 网站和《卫报》上使用的最佳方法：

我在这里找到了这项技术：http: [//codepen.io/IschaGast/pen/Qjxpxo](http://codepen.io/IschaGast/pen/Qjxpxo)

继承人的html

```
<div class="highlight block-link">
      <h2>I am an example header</h2>
      <p><a href="pageone" class="block-link__overlay-link">This entire box</a> links somewhere, thanks to faux block links. I am some example text with a <a href="pagetwo">custom link</a> that sits within the block</p>

</div> 
```

继承人的CSS

```
/**
 * Block Link
 *
 * A Faux block-level link. Used for when you need a block-level link with
 * clickable areas within it as directly nesting a tags breaks things.
 */

.block-link {
    position: relative;
}

.block-link a {
  position: relative;
  z-index: 1;
}

.block-link .block-link__overlay-link {
    position: static;
    &:before {
      bottom: 0;
      content: "";
      left: 0;
      overflow: hidden;
      position: absolute;
      right: 0;
      top: 0;
      white-space: nowrap;
      z-index: 0;
    }
    &:hover,
    &:focus {
      &:before {
        background: rgba(255,255,0, .2);
      }
    }
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2014-08-01T14:56:36.160

实际上，您现在需要包含 JavaScript 代码，请查看[本教程](http://css-tricks.com/snippets/jquery/make-entire-div-clickable/)以执行此操作。

但是有一个棘手的方法可以使用 CSS 代码来实现这一点，您必须在 div 标签内嵌套一个锚标签，并且必须将此属性应用于它，

```
display:block; 
```

完成后，它将使整个宽度区域可点击（但在锚标记的高度内），如果要覆盖整个 div 区域，则必须将锚标记的高度精确设置为div 标签，例如：

```
height:60px; 
```

这将使整个区域可点击，然后您可以应用`text-indent:-9999px`锚标签来实现目标。

这真的很棘手和简单，它只是使用 CSS 代码创建的。

这是一个[例子](http://jsfiddle.net/hbirjand/RG8wW/)：http: [//jsfiddle.net/hbirjand/RG8wW/](http://jsfiddle.net/hbirjand/RG8wW/)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2012-04-12T03:30:20.877

This is the simplest way.

Say, this is the `div` block I want to make clickable:

```
<div class="inner_headL"></div> 
```

So put a `href` as follows:

```
<a href="#">
 <div class="inner_headL"></div>
</a> 
```

Just consider the `div` block as a normal html element and enable the usual a `href` tag.
It works on FF at least.

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-08-27T16:42:17.870

您可以使用 href 标签包围元素，也可以使用 jquery 并使用

```
$('').click(function(e){
e.preventDefault();
//DO SOMETHING
}); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-05-30T12:49:56.240

您可以通过以下方法提供指向您的 div 的链接：

```
<div class="boxdiv" onClick="window.location.href='https://www.google.co.in/'">google</div>
<style type="text/css">
.boxdiv {
    cursor:pointer;
    width:200px;
    height:200px;
    background-color:#FF0000;
    color:#fff;
    text-align:center;
    font:13px/17px Arial, Helvetica, sans-serif;
    }
</style> 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2011-11-06T23:00:39.013

这对我有用：

```
<div onclick="location.href='page.html';"  style="cursor:pointer;">...</div> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-08T00:33:40.550

虽然我不建议在任何情况下这样做，但这里有一些将 DIV 变成链接的代码（注意：此示例使用 jQuery 并且为简单起见删除了某些标记）：

```
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {
    $("div[href]").click(function () {
        window.location = $(this).attr("href");
    });
});

</script>
<div href="http://www.google.com">
     My Div Link
</div> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-04-19T15:10:02.167

我引入了一个变量，因为我的链接中的某些值会根据用户来自的记录而改变。这适用于测试：

```
 <div onclick="location.href='page.html';"  style="cursor:pointer;">...</div> 
```

这也有效：

```
 <div onclick="location.href='<%=Webpage%>';"  style="cursor:pointer;">...</div> 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2021-12-27T17:06:58.493

将你`div`的锚标签括在里面`<a href></a>`就像魅力一样：

```
 <a href="">
      <div>anything goes here will turn into a link</div>
    </a> 
```

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2012-05-04T21:31:55.157

我的聪明裤回答：

“回避回答：“如何使块级元素成为超链接并在 XHTML 1.1 中验证”

只需使用 HTML5 DOCTYPE DTD。”

实际上并不适用于 ie7

`onclick="location.href='page.html';"`

适用于 IE7-9、Chrome、Safari、Firefox、

* * *

## 回答 #28

> 赞同：-4
> 
> 时间：2009-12-02T00:18:50.700

如果一切都可以这么简单...

```
#logo {background:url(../global_images/csg-4b15a4b83d966.png) no-repeat top left;background-position:0 -825px;float:left;height:48px;position:relative;width:112px}

#logo a {padding-top:48px; display:block;}

<div id="logo"><a href="../../index.html"></a></div> 
```

跳出框框想一想；-)

# sql - 为什么 ORACLE 不允许在命令中使用连续的换行符？

> ID：796089
> 
> 赞同：8
> 
> 时间：2009-04-28T03:17:21.520
> 
> 标签：sql, oracle, language-design, whitespace, sqlplus

我写：

```
CREATE TABLE Person ( 
name CHAR(10),

ssn INTEGER); 
```

并将其保存到文件“a.sql”中。

如果我随后在 SQL*Plus 命令提示符中键入“@a”来运行它，它会告诉我以“ssn”开头的行未被识别为命令，并被忽略。

据我所知，如果 sqlplus 连续遇到多个换行符，它似乎会终止命令。这是一个准确的说法吗？如果是这样，有谁知道这是否有必要/为什么选择这样做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-28T04:04:12.563

我不知道为什么，但是一个完全空白的行终止了 SQL*Plus 中的一个命令。

引用[SQL*Plus 文档](http://download.oracle.com/docs/cd/A91202_01/901_doc/server.901/a88827/ch24.htm)：

**结束 SQL 命令**：您可以通过以下三种方式之一结束 SQL 命令：

*   带分号 (;)
*   在一行上单独带有斜杠 (/)
*   有一个空行

您还可以使用 SET SQLBLANKLINES 更改处理空行的方式

> **SQLBL[ANKLINES] {开|关}**
> 
> 控制 SQL*Plus 是否允许在 SQL 命令或脚本中使用空行。ON 将空行和新行解释为 SQL 命令或脚本的一部分。OFF，默认值，不允许在 SQL 命令或脚本或脚本中出现空行或新行。
> 
> 输入 BLOCKTERMINATOR 以停止 SQL 命令条目而不运行 SQL 命令。输入 SQLTERMINATOR 字符以停止 SQL 命令输入并运行 SQL 语句。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-28T03:57:25.077

默认情况下，当输入空行时，SQLPlus 会终止（但不执行）语句。它一直这样做。在屏幕编辑器和查询工具出现之前，这似乎是个好主意。

您可以使用更改该默认行为

将 SQLBLANKLINES 设置为

在这种情况下，您必须输入仅包含句号的行来终止（但不执行）语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-04-28T17:30:42.360

但是如果您想在 varchar2 或 clob 字段中插入多行文本，您可以使用 chr(10)

```
 insert into t values ('Hello,'||chr(10)||chr(10)||' How are you?');

 insert into t values (
 'Hello,

 How are you'); 
```

由于上述原因无法正常工作。

# asp.net - IIS7 为另一台服务器上的文件创建虚拟目录

> ID：796090
> 
> 赞同：5
> 
> 时间：2009-04-28T03:17:24.080
> 
> 标签：asp.net, iis-7, virtual-directory

我正在将一些 ASP.Net 应用程序从 IIS6 迁移到 IIS7，到目前为止一切顺利。我正在尝试在一台服务器上创建几个虚拟目录，这些目录将指向另一台服务器上的文件。在 IIS6 中，我所要做的就是使用有权访问文件的用户进行匿名身份验证。在 IIS7 中，我无法让它工作。我使用用户名和密码设置了虚拟目录，但出现 500.19 错误“由于权限不足而无法读取配置文件”。我无法想象我真的必须将 web.config 放在一个只包含图像而没有应用程序文件的目录中。如果我单击 IIS 管理器中的目录，我会在我单击的任何内容（例如身份验证部分）上收到有关 web.config 文件的错误。还，从虚拟目录写入文件似乎工作得很好，所以我不认为我有访问问题。我已授予 IIS_IUSR 组的目录访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-02-13T19:21:06.860

使用指向 UNC 共享的虚拟目录时，请转到虚拟目录的高级设置，然后选择具有访问该文件夹的适当权限的特定用户帐户。它适用于我的 asp.net 应用程序中的虚拟目录，该目录指向远程服务器上的 UNC 共享。

# c++ - linux 和 gcc 4 中的 C++ 新运算符线程安全

> ID：796099
> 
> 赞同：15
> 
> 时间：2009-04-28T03:22:05.613
> 
> 标签：c++, linux, gcc, thread-safety

很快，我将开始研究使用共享内存的网格细化算法的并行版本。

该大学的一位教授指出，我们必须非常小心线程安全，因为编译器和 stl 都不是线程感知的。

我搜索了这个问题，答案取决于编译器（有些人试图*有点*线程感知）和平台（编译器使用的系统调用是否是线程安全的）。

那么，在 linux 中，gcc 4 编译器为 new 运算符生成线程安全代码？

如果没有，克服这个*问题*的最佳方法是什么？也许将每个呼叫锁定给新的接线员？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-30T00:43:57.473

您将不得不非常努力地找到一个支持线程但没有线程安全的平台`new`。事实上，`new`(and `malloc`) 的线程安全是它如此缓慢的原因之一。

另一方面，如果您想要一个线程安全的 STL，您可以考虑具有线程感知容器的[Intel TBB （尽管并非所有对它们的操作都是线程安全的）。](http://www.threadingbuildingblocks.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T03:26:26.960

通常，`new`操作员是线程安全的 - 但是调用 STL 和标准库的线程安全保证由标准管理 - 这并不意味着它们是线程不知道的 - 它们往往具有非常明确的线程安全保证操作。例如，以只读方式遍历列表对于多个读取器来说是线程安全的，而遍历列表并进行更新则不是。您必须阅读文档并了解各种保证是什么，尽管它们并不那么繁重并且它们往往是有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T04:15:10.850

虽然我在谈论我没有使用过的概念，但我觉得我应该提一下，如果您使用的是共享内存，那么您可能希望确保只使用 POD 类型，并使用placement new。

其次，如果您使用通常理解为在 linux 系统上的共享内存，那么您可能使用多个进程（而不是线程）来分配内存和“做事” - 使用共享内存作为通信层。如果是这种情况，那么您的应用程序和库的线程安全并不重要 - 然而，重要的是使用共享内存分配的任何事物的线程安全！这是与运行一个具有多个线程的进程不同的情况，在这种情况下，询问 new 运算符的线程安全是一个有效的问题，如果不是，可以通过放置 new 或定义您自己的分配器来解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-19T20:13:21.057

好吧，这不是我问题的明确答案，只是我发现 Google 实现了一个*高性能的多线程 malloc*。

因此，如果您不确定您的实现是否是线程安全的，也许您应该使用[Google Performance Tools](http://code.google.com/p/google-perftools/)。

# c++ - 用我自己的实现替换 getpid

> ID：796106
> 
> 赞同：2
> 
> 时间：2009-04-28T03:24:28.930
> 
> 标签：c++

我有一个应用程序，我需要编写一个新的 getpid 函数来替换原来的操作系统。实现将类似于：

```
pid_t getpid(void)
{
    if (gi_PID != -1)
    {
        return gi_PID;
    }
    else
    {
        // OS level getpid() function
    }
} 
```

如何通过此函数调用操作系统的原始 getpid() 实现？

编辑：我试过：

```
pid_t getpid(void)
{
    if (gi_PID != -1)
    {
        return gi_PID;
    }
    else
    {
        return _getpid();
    }
} 
```

正如乔纳森所建议的那样。使用 g++ 编译时，这给了我以下错误：

> In function `pid_t getpid()': SerendibPlugin.cpp:882: error:` _getpid' undeclared (first use this function) SerendibPlugin.cpp:882: error: (每个未声明的标识符对于它出现的每个函数只报告一次。)

编辑2：我已经设法通过使用函数指针并使用dlsym（RTLD_NEXT，“getpid”）将其设置为ID为“getpid”的下一个第二个符号来使其工作。

这是我的示例代码：

```
vi xx.c
"xx.c" 23 lines, 425 characters 
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <iostream>
#include <dlfcn.h>

using namespace std;
pid_t(*___getpid)();

pid_t getpid(void)
{
    cout << "My getpid" << endl;
    cout << "PID :" << (*___getpid)() << endl;
    return (*___getpid)();
}

int main(void)
{
    ___getpid = (pid_t(*)())dlsym(RTLD_NEXT, "getpid");
    pid_t p1 = getpid();
    printf("%d \n", (int)p1);
    return(0);
} 
```

g++ xx.c -o xout

```
My getpid
PID :7802
7802 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T03:29:58.213

在许多系统上，您会发现`getpid()`是 的“弱符号” `_getpid()`，可以调用它来代替`getpid()`。

* * *

提到的答案的第一个版本`__getpid()`；由于它是错误的，因此该提及被迅速删除。

此代码适用于 Solaris 10 (SPARC) - 使用 C++ 编译器：

```
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>

extern "C" pid_t _getpid();

pid_t getpid(void)
{
    return(-1);
}

int main(void)
{
    pid_t p1 = getpid();
    pid_t p2 = _getpid();
    printf("%d vs %d\n", (int)p1, (int)p2);
    return(0);
} 
```

此代码适用于 Solaris 10 (SPARC) - 使用 C 编译器：

```
Black JL: cat xx.c
#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>

pid_t getpid(void)
{
    return(-1);
}

int main(void)
{
    pid_t p1 = getpid();
    pid_t p2 = _getpid();
    printf("%d vs %d\n", (int)p1, (int)p2);
    return(0);
}
Black JL: make xx && ./xx
cc     xx.c   -o xx
"xx.c", line 13: warning: implicit function declaration: _getpid
-1 vs 29808
Black JL: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:32:08.147

您可以使用宏：

在 .h 中，包含在要替换`getpid`函数的每个文件中

```
#define getpid() mygetpid() 
```

然后，将您自己的实现放入 .cpp

```
pid_t mygetpid() {
    // do what you want
    return (getpid)();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T03:36:54.797

您使用的术语有点不正确。无法覆盖 getpid() 因为它不是虚函数。您所能做的就是尝试通过各种邪恶的手段将 getpid 替换为不同的功能。

但我必须问，你为什么要这样做？替换 getpid 意味着任何依赖于 getpid 返回的组件现在都将收到您大概修改后的结果。此更改具有更改某些其他组件的非常高的风险。

您提供的是新功能，因此应该是不同的功能。

话虽如此，如果您真的想采用这种方法，最好的方法是动态加载函数。原始 DLL 仍将包含 getpid 函数，您可以通过 Windows 上的 LoadLibrary/GetProcAddress 或 Linux 上的 dlopen/dlsym 的组合来访问它。如果您使用不同的操作系统，请指定。

**编辑**回应 getpid 需要可测试的评论

如果测试是问题，那么为什么不为您的应用程序使用自定义 getpid 方法。例如，applicationGetPid()。对于正常执行，这可以转发到系统 getpid 函数。但是在单元测试期间，它可以用来产生更多可预测的值。

```
pid_t applicationGetPid() { 
#if UNIT_TEST
return SomeCodeForUnitTests;
#else
return getpid();
#endif
} 
```

# unit-testing - 单元测试如何比仅测试整个应用程序的整个输出更好？

> ID：796113
> 
> 赞同：8
> 
> 时间：2009-04-28T03:27:01.637
> 
> 标签：unit-testing, testing

我不明白单元测试如何可能受益。测试人员将整个输出作为一个整体进行测试而不是进行单元测试还不够吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T03:34:19.530

您所描述的是集成测试。集成测试不会告诉您的是，当您的输出不再正确时，您的大型应用程序的哪一部分无法正常工作。

单元测试的优势在于，您可以为需要程序执行的每个业务假设或算法步骤编写测试。当有人向您的应用程序添加或更改代码时，您会立即确切地知道在引入错误时是哪一步、哪一段，甚至可能是哪一行代码被破坏了。仅仅因为这个原因节省了维护时间就值得了，但*更大的*优势在于不能引入回归错误（假设您的测试在构建软件时自动运行）。如果您修复了一个错误，然后专门编写了一个测试以在将来捕获该错误，那么任何人都不会意外地再次引入它。

集成测试和单元测试的结合可以让你晚上睡得更舒服，尤其是当你当天签入一大段代码时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-28T03:31:00.177

越早发现错误，修复它们的成本就越低。编码人员在单元测试期间发现的错误非常便宜（只需修复该死的东西）。

在系统或集成测试期间发现的错误成本更高，因为您必须修复它并重新启动测试周期。

您的客户发现的错误将花费很多：重新编码、重新测试、重新打包等等。当您通知管理层您在单元测试期间没有发现它，因为您没有做任何事情，认为系统测试人员会发现所有问题时，它也可能会在您的臀部留下痛苦的引导印 :-)

通用汽车因为催化转换器不能正常工作而召回 10,000 辆汽车需要多少钱？

*现在想想如果他们在这些转换器交付给他们之后，但在*它们被放入那 10,000 辆汽车之前立即发现，他们将花费多少。

我认为您会发现后一种选择要便宜得多。

这就是为什么测试驱动开发和持续集成（有时）是一件好事的原因之一——测试一直在进行。

此外，单元测试不会检查程序是否作为一个整体工作，只是检查每个小部分是否按预期执行。这通常比更高级别的测试要检查的*要多得多。*

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T04:22:45.513

根据我的经验：

1.  与单元测试套件相比，集成和功能测试往往更能反映系统的整体质量。
2.  高级测试（功能、验收）是一种 QA 工具。
3.  单元测试是一种**开发**工具。尤其是在 TDD 环境中，单元测试更像是一种设计实现，而不是质量保证。
4.  由于更好的设计，整个系统的质量（间接地）提高了。
5.  通过单元测试套件旨在确保单个组件符合开发人员的意图（正确性）。验收测试是涵盖系统有效性的级别（即系统执行用户希望它执行的操作）。

概括：

*   单元测试首先是作为开发工具，其次是 QA 工具。
*   验收测试是一种 QA 工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-28T03:30:39.010

仍然需要执行一定程度的手动测试，但单元测试用于减少进入该阶段的缺陷数量。单元测试测试系统的最小部分，如果它们都工作，则应用程序作为一个整体正常工作的机会显着增加。

它还有助于添加新功能，因为可以快速自动地执行回归测试。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-28T03:31:05.373

对于足够复杂的应用程序，将整个输出作为一个整体进行测试可能无法涵盖足够多的不同可能性。例如，任何给定的应用程序都有大量不同的代码路径，可以根据输入进行跟踪。在典型的测试中，你的代码中可能有很多部分根本就没有遇到过，因为它们只在某些情况下使用，所以你不能确定在你的测试情况下没有运行的任何代码是否真的有效。此外，一段代码中的错误大部分时间可能会被另一段代码中的其他内容所掩盖，因此您可能永远不会发现一些错误。

最好分别测试每个函数或类。这样，测试更容易编写，因为您只测试代码的一小部分。在测试时覆盖所有可能的代码路径也更容易，如果您分别测试每个小部分，那么即使在应用程序中运行时这些错误通常会被代码的其他部分掩盖，您也可以检测到错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-28T03:44:00.240

帮自己一个忙，先尝试单元测试。在我意识到单元测试是多么有用/强大之前，我自己一直很怀疑。如果您考虑一下，它们并不会真正增加您的工作量。它们可以让您高枕无忧，并允许您继续扩展您的应用程序，同时确保您的代码是可靠的。您会立即获得有关您何时可能损坏某些东西的反馈，这是非常有价值的东西。

对于为什么要测试一小段代码的问题，请考虑以下问题：假设您的大型应用程序使用您编写的很酷的 XOR 加密方案，并且最终产品管理更改了您如何生成这些加密字符串的要求。所以你说：“哎呀，我编写了加密例程，所以我会继续进行更改。这需要我 15 分钟，我们都会回家参加聚会。” 好吧，也许您在此过程中引入了一个错误。可是等等！！！您方便的 TestXOREncryption() 测试方法会立即告诉您预期的输出与输入不匹配。宾果游戏，这就是为什么您提前将单元测试分解为小“单元”进行测试的原因，因为在您的大型应用程序中，您几乎不会很快想到这一点。

此外，一旦你进入定期编写单元测试的思维框架，你就会意识到，虽然你在开始时支付了前期的时间成本，但在开发周期的后期，如果可以的话，你会得到 10 倍的回报。快速识别代码中引入问题的区域。

单元测试没有灵丹妙药，因为您识别问题的能力与您编写的测试一样好。它归结为提供更好的产品并减轻压力和头痛。=)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-07T19:15:23.997

同意大部分答案。让我们深入探讨速度的主题。以下是一些实数：

1.  **单元测试**结果在**1 或 2 分钟内**从新编译得到。作为真正的单元测试（不与 dbs 等外部系统交互），它们可以非常快速地涵盖很多逻辑。

2.  **自动功能测试**在 **1 或 2 小时内**得出结果。它们在简化的平台上运行，但有时会覆盖多个系统和数据库——这真的会影响速度。

3.  ****每天一次****自动集成测试**结果。这些执行全餐交易，但又重又慢，我们每天只能执行一次，需要几个小时。**

***   **手动回归**结果会在**几周后出现**。我们每天将东西交给测试人员几次，但您的更改最多不会在一两周内真正回归。** 

 **我想在 1 或 2 分钟内找出我打破了什么，而不是几周，甚至不是几个小时。这就是人们谈论的单元测试的 10 倍 ROI 的来源。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-28T03:30:55.247

这是一个难以解决的问题，因为它质疑的范围如此之广。然而，这是我的简短回答：

测试驱动开发（或 TDD）旨在*证明*应用程序（或代码块）的每个逻辑单元都完全按照其应有的方式运行。为了提高生产力而使测试尽可能自动化，这怎么可能真的有害呢？

通过测试每段逻辑代码，您可以信任代码在某些层次结构上的使用。假设我构建了一个依赖于线程安全堆栈实现的应用程序。在我构建之前，不应该保证堆栈在每个阶段都能正常工作吗？

关键是，如果**整个**应用程序中的某些内容出现故障，即仅查看总输出/结果，您怎么知道它来自哪里？好吧，当然是调试！这会让你回到你开始的地方。TDD 允许您（希望）绕过这个最痛苦的开发阶段。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-28T03:31:36.323

测试人员通常测试端到端功能。显然，这是针对用户场景而设计的，具有令人难以置信的价值。

单元测试提供不同的功能。这是开发人员验证他们编写的组件在没有其他功能或与其他功能组合的情况下能否正常工作的方法。这提供了一系列价值，包括

*   提供**不可忽视的**文档
*   能够将错误隔离到特定组件
*   验证代码中的不变量
*   对代码库的更改提供快速、即时的反馈。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T04:01:34.580

一个起点是回归测试。一旦你发现了一个错误，编写一个小测试来演示这个错误，修复它，然后确保测试现在通过。将来，您可以在每个版本之前运行该测试，以确保该错误没有被重新引入。

为什么要在单元级别而不是整个程序级别这样做？速度。在好的代码中，隔离一个小单元并编写一个小测试比将一个复杂的程序驱动到错误点要快得多。然后在测试时，单元测试通常会比集成测试运行得快得多。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-07T19:18:39.263

非常简单：单元测试更容易编写，因为您只测试单个方法的功能。并且错误更容易修复，因为您确切地知道哪种方法被破坏了。

但就像其他回答者指出的那样，单元测试并不是测试的全部。它们只是等式中最小的一部分。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-07T19:42:23.650

软件最大的单一困难可能是交互事物的绝对数量，而最有用的技术是减少必须考虑的事物的数量。

例如，使用高级语言而不是低级语言可以提高生产力，因为一行是单独的东西，并且能够用更少的行编写程序可以减少事情的数量。

过程式编程的出现是为了通过将函数视为事物来降低复杂性。然而，为了做到这一点，我们必须能够以一种连贯的方式思考函数的作用，并确信我们是对的。（面向对象的编程在更大范围内做类似的事情。）

有几种方法可以做到这一点。契约式设计是一种准确指定函数功能的方式。使用函数参数而不是全局变量来调用函数并获取结果降低了函数的复杂度。

单元测试是验证函数是否按预期工作的一种方法。通常可以测试函数中的所有代码，有时还可以测试所有执行路径。这是一种判断函数是否正常工作的方法。如果该功能有效，我们可以将其视为单个事物，而不是我们必须跟踪的多个事物。

它用于其他目的。单元测试通常可以快速运行，因此可以在易于修复的情况下快速捕获错误。如果开发人员确保一个函数在签入之前通过了测试，那么测试就是一种记录函数所做的事情的一种形式，可以保证是正确的。创建测试的行为迫使测试编写者思考函数应该做什么。在那之后，任何想要改变的人都可以查看测试，看看他或她是否被正确理解。

相比之下，较大的测试并不详尽，因此很容易漏掉很多错误。他们不擅长定位错误。它们通常以相当长的间隔执行，因此它们可能会在错误发生后的某个时间检测到错误。它们定义了整体用户体验的一部分，但不提供推理系统任何部分的基础。它们不应被忽视，但它们不能替代单元测试。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-08T04:51:06.813

正如其他人所说，反馈循环的长度和问题与特定组件的隔离是单元测试的关键优势。

它们补充功能测试的另一种方式是在某些组织中如何跟踪覆盖率：

*   代码覆盖率的单元测试
*   需求覆盖率的功能测试

功能测试可能会遗漏已实现但不在规范中的功能。

基于代码，单元测试可能会错过某个功能没有实现，这就是功能测试的基于需求的覆盖分析的用武之地。

最后一点：在单元级别有一些东西更容易/更快地测试，尤其是在错误场景周围。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-08T05:05:20.443

单元测试将帮助您更清楚地**识别错误的来源，并****让您更早地知道您遇到了问题**。两者都很好，但它们是不同的，单元测试确实有好处。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-08T05:19:55.277

您测试的软件是一个系统。当您将其作为一个整体进行测试时，您就是黑盒测试，因为您主要处理输入和输出。[当您无法进入系统内部时，黑盒测试](http://en.wikipedia.org/wiki/Black_box_testing)非常有用。

但是由于您通常这样做，因此您创建了许多单元测试，这些单元测试实际上将您的系统作为白盒进行测试。您可以通过多种方式打开系统并根据系统内部结构组织测试。[白盒测试](http://en.wikipedia.org/wiki/White_box_testing)为您提供了更多测试和分析系统的方法。它显然是对黑盒测试的补充，不应被视为替代或竞争方法。

# visual-studio - VS2005 和 VS2008 支持的已弃用 /clr:oldSyntax 是否仍可用于 VS2010？

> ID：796129
> 
> 赞同：3
> 
> 时间：2009-04-28T03:36:11.193
> 
> 标签：visual-studio, visual-c++, visual-studio-2010, clr

有谁知道（无论哪种方式都有信心）微软是否计划继续支持（如编译）不推荐使用的遗留（2003）（vs2005/vs2008）托管C++（MC++）语法以C++代码中的.NET CLR为目标？

Microsoft 正式弃用了带有 VS2005 C++ 编译器 (Orcas) 的 /clr:oldSyntax；幸运的是 VS2008 C++ 编译器仍然支持 /clr:oldSyntax 开关。

但是带有 VS2010 的 C++ 编译器仍然支持它吗？还是 VS2010 的发布最终会打破与 /clr:oldSyntax 的向后兼容性？

我想知道在VS2010发布之前进行项目计划调度，在MSDN网站或MVP网站上找不到官方的词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T04:06:26.240

如果您在 MSDN 或 MVP 上找不到信息，那么[在这里](http://social.msdn.microsoft.com/Forums/en-us/categories/)直接询问 Microsoft 可能是个好主意（我猜是 C++ 的）。我不为微软工作，但我为另一个（非常）大的组织工作，我们开发人员非常密切地监控公共论坛。我怀疑有不少 MS 开发人员会关注该网站。

但是，如果您在没有风险管理和突发事件的情况下进行项目规划，那么您就做错了。

*您应该考虑到它不受支持*的可能性，并做两件事之一。

*   在您的甘特图中有一个项目以允许重新设计。
*   有一个风险日志，清楚地说明重新设计可能是必要的。

根据我的经验，第一个通常更好，因为如果你发现你不必这样做并且日程安排正在下滑，你可以放弃那个项目来赶上。有时您无论如何都可以放弃它并尽快交付，只是为了让自己在年度绩效评估中看起来更好:-)

但是，即使您不允许这样做，然后发现它是必要的，风险也会变成一个问题，您可以向上级管理层解释为什么需要更多时间。由于风险日志中已明确说明，因此您已被覆盖 - 然后他们决定让您有更多时间或继续使用 MSVC 的后级。

请记住，如果您不必这样做，您可能仍然应该考虑它（没有计划延误）。微软并没有因为笑而弃用它们，它们会在某个时候消失。尽管 YAGNI 建议你不应该担心它，除非它迫在眉睫，但谨慎的做法是做*一些*准备工作。

当微软最终确实删除该功能时，这将避免最后一刻的疯狂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-23T17:26:36.343

它似乎受支持 - 请参阅 VS2010 beta 2[文档](http://msdn.microsoft.com/en-us/library/k8d11d4s(VS.100).aspx)以获取`/clr`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T04:38:22.200

好吧，您可以查看[CTP 位](https://connect.microsoft.com/VisualStudio/content/content.aspx?ContentID=9790)。这不能保证最终结果，但这是一个好主意。怀疑此时是否会有任何重大的编译器更改。

# asp.net - 基于 Web 的可视化查询构建器

> ID：796132
> 
> 赞同：12
> 
> 时间：2009-04-28T03:37:18.133
> 
> 标签：asp.net, query-builder

我正在寻找一个类似于[http://ajax.easyquerydemo.com/](http://ajax.easyquerydemo.com/)的可视化查询构建器。我正在使用 ASP.NET 但 MVC 所以宁愿不是基于 WebForms 的东西，比如链接中的那个。如果有人知道在很大程度上与平台无关的类似工具，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T18:06:00.120

正在寻找同样的东西，遇到了这个[http://devtools.korzh.com/query-builder-component/](http://devtools.korzh.com/query-builder-component/)对我来说看起来很有趣......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T18:24:18.680

[Easy Query Builder](http://easyquerybuilder.com/ "简易查询生成器")支持 MVC，他们有一个非常[漂亮的 MVC Demo](http://demo.easyquerybuilder.com/asp-net-mvc/)和一个没有过期的试用版。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T00:59:39.120

Activer 查询可以做你想做的所有事情：

[http://www.activequerybuilder.com/product.html](http://www.activequerybuilder.com/product.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-30T20:58:52.580

试试[www.ajaxquerybuilder.com](http://www.ajaxquerybuilder.com)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-03T11:33:53.023

即使我今天搜索它并创建了一个列表：

1) 查询生成器
[http://aspquerybuilder.net/?_ga=2.150945718.1618902383.1522751533-1013206784.1522751533](http://aspquerybuilder.net/?_ga=2.150945718.1618902383.1522751533-1013206784.1522751533) 价格：[https ://www.activequerybuilder.com/purchase.html](https://www.activequerybuilder.com/purchase.html)

2）主动查询构建器
演示：[https](https://webapi.activequerybuilder.com/Demo)
://webapi.activequerybuilder.com/Demo 免费使用。

3）自定义代码
[https://www.codeproject.com/Tips/1060170/User-Responsive-Web-Query-Builder-using-ASP-NET](https://www.codeproject.com/Tips/1060170/User-Responsive-Web-Query-Builder-using-ASP-NET)

4）DataSparc：付费服务
演示：[https ://www.datasparc.com/dbhawk-online-demo/](https://www.datasparc.com/dbhawk-online-demo/)

5) Jquery 查询生成器：免费使用。
演示： http: [//querybuilder.js.org/demo.html](http://querybuilder.js.org/demo.html)
GitHub：[https ://github.com/mistic100/jQuery-QueryBuilder](https://github.com/mistic100/jQuery-QueryBuilder)

6) DevExpress.com
演示：[https](https://demos.devexpress.com/ASPxGridViewDemos/DataBinding/QueryBuilder.aspx)
://demos.devexpress.com/ASPxGridViewDemos/DataBinding/QueryBuilder.aspx 文档：[https ://demos.devexpress.com/aspxgridviewdemos/DataBinding/QueryBuilderControl.aspx](https://demos.devexpress.com/aspxgridviewdemos/DataBinding/QueryBuilderControl.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-03T18:35:31.017

我们使用来自[Datasparc的](http://www.dbhawk.com)[DBHawk](http://www.datasparc.com)。它提供查询生成器和执行。

# java - 从 JSP 上的文本框获取用户输入

> ID：796136
> 
> 赞同：2
> 
> 时间：2009-04-28T03:42:08.530
> 
> 标签：java, textbox, input

我需要获取用户在 JSP 的文本框中输入的值。我使用 JavaScript 来获取该值，但是稍后我需要在页面中访问 JavaScript 之外的相同变量。

这是我所拥有的：

```
<script type="text/javascript">

   var sp;

function setPolicy(){

sp = document.getElementById('policy').value;

if(sp != "")
    alert("You entered: " + sp)

else
    alert("Would you please enter some text?")
}

</script> 
```

文本框：

```
input type="text" id='policy' size="15" tabindex = "1" onblur="setPolicy()" 
```

但我需要稍后在脚本中访问在此“策略”文本框中输入的字符串，以调用会话 bean 中的函数。有什么方法可以在 JavaScript 之外传递该变量？还是有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T03:45:14.217

JavaScript 执行发生在客户端，Scriptlet 执行在服务器端。您正在尝试将两者结合起来。

您应该通过传递一个参数将表单提交到同一页面，该参数将在文本框中输入值。您的 scriptlet 应该检查参数是否存在。第一次使用这个 jsp 时，参数不会出现，只有当用户在文本框中输入内容时才可用。

可能不是最好的解决方案，因为我不知道整个上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T03:45:44.057

我不确定您的 jsp 生命周期是否已经结束。到 javascript 运行时，所有的 scriptlet 都已被评估。

我的意思是，一个 JSP 被渲染，html 和 javascript 在对浏览器的响应中发出，并且没有更多的服务器来解释 JSP。

因此，您应该将您的问题视为用户操作的结果如何与服务器进行通信？

可能通过将表单发布到服务器上的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T03:48:20.683

如果您询问如何在 java 会话 bean 中获取文本输入值，它与您的 javascript 代码无关。

会话 bean 是服务器端代码。要将输入值传递给会话 bean，您需要更改服务器端代码、servlet、strut 操作、webwork 操作，具体取决于您使用的 Web 框架。

# nhaml - NHAML 指令

> ID：796142
> 
> 赞同：1
> 
> 时间：2009-04-28T03:43:48.400
> 
> 标签：nhaml

有谁知道如何在 NHAML 中使用指令（例如 @Import）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:35:47.607

如果您的意思是添加引用和导入命名空间，您可以在 app.config 或 web.config 中进行

```
<?xml version="1.0"?>

<configuration>

  <configSections>
    <section name="nhaml" type="NHaml.Configuration.NHamlConfigurationSection, NHaml"/>
  </configSections>

  <nhaml autoRecompile="true">
    <assemblies>
      <add assembly="NHaml.Samples.Mvc"/>
    </assemblies>
    <namespaces>
      <add namespace="NHaml.Web.Mvc"/>
      <add namespace="NHaml.Samples.Mvc.Controllers"/>
    </namespaces>
  </nhaml>

...

</configuration> 
```

# java - 如何从 Web 服务中调用 Web 服务

> ID：796148
> 
> 赞同：-1
> 
> 时间：2009-04-28T03:47:34.100
> 
> 标签：java, web-services, axis2

我正在尝试创建一个 Web 服务，它是另一个 Web 服务的消费者。这是布局。

我开发了一个 Java 类并用它创建了一个 Web 服务。

然后我使用 Eclipse 工具生成客户端存根和其他文件。

我将这些文件打包在一个 jar 中并在另一个项目中使用它。我测试了 jar 中的文件，我能够访问第一个 web 服务。

现在，我从测试第一个项目的项目中创建了另一个 Web 服务。

现在，当我将客户端写入第二个 Web 服务时，它似乎无法找到第一个的存根。给我以下错误

```
org.apache.axis2.AxisFault: com/cats/patient/PatientDataStub
    at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:512)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:370)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:416)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:163)
    at com.esps.patient.PatientDataESPSStub.getPatientByID(PatientDataESPSStub.java:186)
    at com.esps.patient.ESPSTestClient.main(ESPSTestClient.java:22) 
```

我已经在所有项目中加入了所有的罐子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T04:17:59.003

查看异常客户端发现了 WS1 的存根。读取响应时发生异常错误。

尝试[tcpmon](https://tcpmon.dev.java.net/)以查看请求和响应是什么。在 tcpmon 之前，您可以通过放置一些调试信息来检查 WS1 是否收到来自客户端的任何请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T10:27:32.787

如果您使用的是 Spring frawe 工作，那么我建议您使用 RestTemplate 从另一个 Web 服务调用另一个 Web 服务。

# ruby-on-rails - Rails has_many 关联计数子行

> ID：796150
> 
> 赞同：29
> 
> 时间：2009-04-28T03:48:48.280
> 
> 标签：ruby-on-rails, grouping, has-many

什么是有效抓取父表的所有行以及每行具有的子表数量的“rails 方式”？

我不想使用`counter_cache`，因为我想根据某些时间条件运行这些计数。

陈词滥调的博客示例：文章表。每篇文章有 0 条或更多条评论。

我希望能够提取过去一小时、一天、一周内每篇文章的评论数。

但是，理想情况下，我不想遍历列表并对每篇文章进行单独的 sql 调用，也不想用于`:include`预取所有数据并在应用服务器上处理它。

我想运行一条 SQL 语句并获得一个包含所有信息的结果集。

我知道我可以硬编码出完整的 SQL，也许可以使用 a`.find`并设置`:joins`,`:group`和`:conditions`参数......但我想知道是否有“更好”的方式......又名“Rails 方式”

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-28T06:04:05.287

这个 activerecord 调用应该做你想做的事：

```
Article.find(:all, :select => 'articles.*, count(posts.id) as post_count',
             :joins => 'left outer join posts on posts.article_id = articles.id',
             :group => 'articles.id'
            ) 
```

这将返回一个文章对象列表，每个对象都有一个方法`post_count`，其中包含文章上的帖子数作为字符串。

该方法执行类似如下的sql：

```
SELECT articles.*, count(posts.id) AS post_count
FROM `articles`
LEFT OUTER JOIN posts ON posts.article_id = articles.id
GROUP BY articles.id 
```

如果你很好奇，下面是运行此类查询时可能看到的 MySQL 结果示例：

```
+----+----------------+------------+
| id | text           | post_count |
+----+----------------+------------+
|  1 | TEXT TEXT TEXT |          1 |
|  2 | TEXT TEXT TEXT |          3 |
|  3 | TEXT TEXT TEXT |          0 |
+----+----------------+------------+ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-03T22:38:54.693

## 导轨 3 版本

对于 Rails 3，您会看到如下内容：

```
Article.select("articles.*, count(comments.id) AS comments_count")
  .joins("LEFT OUTER JOIN comments ON comments.article_id = articles.id")
  .group("articles.id") 
```

感谢[Gdeglin](https://stackoverflow.com/users/83491/gdeglin)提供 Rails 2 版本。

### 导轨 5 版本

由于 Rails 5 有，[`left_outer_joins`](https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-left_outer_joins)所以您可以简化为：

```
Article.select("articles.*, count(comments.id) AS comments_count")
  .left_outer_joins(:comments)
  .group("articles.id") 
```

并且因为您在询问 Rails 方式：没有办法使用 ActiveRecord 来简化/简化它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T05:39:18.247

从 SQL 的角度来看，这看起来很简单——只需编写一个新查询。

从 Rails 的角度来看，您提到的值是计算值。因此，如果您使用`find_by_sql`，Model 类将不知道计算字段，因此即使您设法将查询转换为 Rails 语言，也会将计算值作为字符串返回。请参阅下面的链接问题。
一般的偏差（从我对那个问题的回答）是有一个单独的类负责汇总/计算所需的值。

[如何让 Rails 返回具有正确数据类型而不是字符串的 SUM(columnName) 属性？](https://stackoverflow.com/questions/659523/how-to-get-rails-to-return-sumcolumnname-attributes-with-right-datatype-instead)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-22T20:14:53.517

我用来解决这个问题的一个简单方法是

在我的模型中，我做了：

```
class Article < ActiveRecord::Base
  has_many :posts

  def count_posts
    Post.where(:article_id => self.id).count
  end
end 
```

现在，您可以使用例如：

```
Articles.first.count_posts 
```

我不确定它是否可以更有效，但它是一种解决方案，在我看来比其他解决方案更优雅。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-23T12:22:49.050

我以这种方式完成了这项工作：

```
def show
  section = Section.find(params[:id])
  students = Student.where( :section_id => section.id ).count
  render json: {status: 'SUCCESS', section: students},status: :ok
end 
```

在这我有 2 个模型部分和学生。所以我必须**计算**与特定部分 id 匹配的学生人数。

# c# - 以编程方式检查代码复杂性，可能通过 c#？

> ID：796154
> 
> 赞同：0
> 
> 时间：2009-04-28T03:54:58.590
> 
> 标签：c#, asp.net, performance, artificial-intelligence, complexity-theory

我对数据挖掘项目很感兴趣，并且一直想创建一个分类算法来确定哪些特定的签入需要代码审查，哪些可能不需要。

我已经为我的算法开发了许多启发式方法，尽管我还没有找出杀手...

如何以编程方式检查一段代码的计算复杂度？

此外，甚至更有趣 - 我如何不仅使用代码，还使用源代码控制存储库提供的差异来在那里获得更好的数据..

IE：如果我增加了我要签入的代码的复杂性——但它降低了剩下代码的复杂性——那不应该被认为是“好”的代码吗？

对您对此的想法感兴趣。

**更新**

显然我并不清楚。我要这个

双 codeValue = CodeChecker.CheckCode(someCodeFile);

我希望根据代码的好坏得出一个数字。当您计算复杂性时，我将从 VS2008 给出的数字开始，但想进一步探索。

有人有想法么？将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T03:56:49.290

你看过[NDepend](http://www.ndepend.com/Features.aspx)吗？该工具可用于计算代码复杂度并支持一种查询语言，您可以通过该语言在应用程序中获取大量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T03:57:19.850

[NDepend](http://www.ndepend.com/)网站包含各种指标的[定义列表。](http://www.ndepend.com/Metrics.aspx)决定哪些在您的环境中最重要在很大程度上取决于您。

NDepend 也有一个[命令行版本](http://www.ndepend.com/NDependConsole.aspx)，可以[集成到您的构建过程中](http://s3.amazonaws.com/NDependOnlineDemos/NDependBuildProcessIntegration_viewlet_swf.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T08:32:17.833

此外，Microsoft 的代码分析（与 VS Team Suite 一起提供）包括检查代码圈复杂度的指标，如果此数字超过某个阈值，则会引发构建错误（或警告）。

我不知道，但可能值得检查这个数字是否可以根据您的要求进行配置。然后，您可以在签入某些内容时修改构建过程以运行代码分析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-29T19:03:33.533

请参阅[Semantic Designs C# Metrics Tool](http://www.semanticdesigns.com/Products/Metrics/CSharpMetrics.html)，了解一种计算完整文件和所有合理细分（方法、类等）的各种标准度量值的工具。

输出是一个 XML 文档，但是使用 XML 阅读器从中提取所需的值应该是微不足道的。

# c++ - 使用 g++ 制作静态库的优化和标志

> ID：796162
> 
> 赞同：29
> 
> 时间：2009-04-28T04:00:15.927
> 
> 标签：c++, optimization, g++, compiler-flags

我刚开始在 Linux 上使用 g++ 编译器，并在编译器标志上遇到了一些问题。这是他们

**优化**

我在 g++ 手册页中阅读了有关优化标志`-O1`的信息。我不明白何时使用这些标志。通常你使用什么优化级别？g++ 手册对.`-O2``-O3``-O2`

> 进一步优化。GCC 执行几乎所有支持的优化，不涉及空间速度折衷。当您指定 -O2 时，编译器不会执行循环展开或函数内联。与 -O 相比，此选项增加了编译时间和生成代码的性能。

如果它不进行内联和循环展开，如何实现上述性能，是否推荐使用此选项？

**静态库**

如何使用 g++ 创建静态库？在 Visual Studio 中，我可以选择一个类库项目，它将被编译成“lib”文件。g ++中的等价物是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-04-28T05:14:38.337

经验法则：

当你需要调试时，使用 -O0 （和 -g 来生成调试符号。）

准备发货时，请使用 -O2。

当你使用 gentoo 时，使用 -O3 ...！

当您需要将其放在嵌入式系统上时，请使用 -Os（针对大小进行优化，而不是针对效率进行优化。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T13:43:52.293

gcc 手册列出了每个优化级别的所有隐含选项。在 O2，您可以获得诸如常量折叠、分支预测和 co 之类的东西，它们可以显着改变应用程序的速度，具体取决于您的代码。确切的选项取决于版本，但它们的文档非常详细。

要构建静态库，请按如下方式使用 ar：

```
ar rc libfoo.a foo.o foo2.o ....
ranlib libfoo.a 
```

Ranlib 并不总是必要的，但没有理由不使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T05:06:42.583

关于何时使用什么优化选项 - 没有一个正确的答案。

某些优化级别有时可能会降低性能。这取决于您正在编写的代码类型和它具有的执行模式，并且取决于您正在运行的特定 CPU。

（举一个简单的规范示例 - 编译器可能决定使用使您的代码比以前稍大的优化。这可能会导致代码的某个部分不再适合指令缓存，此时更多的访问内存将是必需的 - 例如在一个循环中）。

最好根据您的需要进行测量和优化。尝试、衡量和决定。

一条重要的经验法则 - 对代码执行的优化越多，使用调试器（或读取其反汇编）调试它的难度就越大，因为 C/C++ 源代码视图离生成的二进制文件更远。出于这个原因，在开发/调试时使用较少的优化是一个很好的经验法则。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-28T04:10:00.210

除了循环展开和内联之外，编译器可以执行许多优化。那里特别提到了循环展开和内联，因为尽管它们使代码更快，但它们也使代码更大。

要制作静态库，请使用“g++ -c”生成 .o 文件并使用“ar”将它们归档到库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T10:02:51.397

关于静态库问题，[David Cournapeau](https://stackoverflow.com/users/11465/david-cournapeau)给出的答案是正确的，但您也可以将 's' 标志与 'ar' 一起使用，而不是在静态库文件上运行 ranlib。“ [ar”手册页](http://linux.die.net/man/1/ar)指出

> 在存档上运行 ar 相当于在其上运行 ranlib。

无论您使用哪种方法都只是个人喜好问题。

# authentication - 您最喜欢的 Web 框架的最佳身份验证和授权示例是什么？

> ID：796166
> 
> 赞同：0
> 
> 时间：2009-04-28T04:02:02.803
> 
> 标签：authentication

我最近一直在浏览 java web 框架（尽管这个问题不必局限于 java），我注意到 web 框架网站上的大多数示例在他们的股票文档中都遗漏了 auth 和 auth 示例。

一个红宝石示例：acts_as_authenticated（链接？）

grails 有：[http ://www.grails.org/Authentication+Plugin](http://www.grails.org/Authentication+Plugin)

无论如何，请提供一些指向您选择的框架的链接，以及一个指向实施 auth&auth 解决方案的不错的演练的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T17:21:13.913

这是一篇与stipes相关的文章：[http ://www.theserverside.com/tt/articles/article.tss?l=Stripes15](http://www.theserverside.com/tt/articles/article.tss?l=Stripes15)

# asp.net - 从 ASP.NET，如何下载两个 Excel 文件并在它们上调用批处理命令？

> ID：796167
> 
> 赞同：1
> 
> 时间：2009-04-28T04:02:05.360
> 
> 标签：asp.net, command-line, download

我需要将两个 Excel 文件下载到客户端，然后针对它们运行（diff）可执行文件。[我知道如何从这里](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-aspnet)下载单个 Excel 文件 。但是如何连续自动下载第二个呢？然后如何对它们运行批处理命令？这甚至是现实的吗？任何指导或指示将不胜感激。

谢谢，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T05:14:49.397

好吧，只是一些指示，因为我不确定我是否完全理解这个问题。您是一个用户同时获得两个下载，然后对这两个文件运行 diff 命令？在服务器或客户端我不确定？自动化客户端版本会遇到很多问题，因为强制人们运行客户端代码通常会受到病毒防护软件的反对。

服务器端差异对我来说听起来就像一个 CGI 时刻：[http](http://www.cs.tut.fi/~jkorpela/perl/cgi.html) ://www.cs.tut.fi/~jkorpela/perl/cgi.html 。这将允许您生成一个显示两者之间差异的网页。CGI 允许您在服务器上运行程序并在网页中显示它们的输出；这就是简单的解释。

如果那不是您想要的，请随时给我评论，我会尝试编辑以正确回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:45:30.393

要一次下载多个文件，您有两个主要选项：

1）只需打开多个窗口到您的页面生成脚本下载多个文件按照[http://www.webdeveloper.com/forum/showpost.php?s=b4f6b25edeb6b7ea55434c4685a675fe&p=950225&postcount=6](http://www.webdeveloper.com/forum/showpost.php?s=b4f6b25edeb6b7ea55434c4685a675fe&p=950225&postcount=6)

2) 将文件归档成一个包（zip/arj/7z 等）并将归档文件发送给客户端。例如。[http://www.motobit.com/tips/detpg_multiple-files-one-request/](http://www.motobit.com/tips/detpg_multiple-files-one-request/)

至于像 Shhnap 已经提到的那样做比较棘手的差异客户端。如果您为受控的客户端群执行此操作，您可能能够让他们允许运行客户端的 ActiveX 脚本的权限。（或启动控制台应用程序） - 但如果您无法很好地控制客户端环境，那么我想不出办法。

正如 Shhnap 建议的那样，您是否可以不只是在服务器端进行比较（然后将其作为第三个文件发送到客户端？）

# java - 安卓语言支持

> ID：796172
> 
> 赞同：3
> 
> 时间：2009-04-28T04:04:18.913
> 
> 标签：java, android, internationalization, android-assets

我想通过提供文件在 android 中输入不同的语言，而不是像**希伯来语这样的****英语。**有没有 in build的所以我可以使用它？**`ttf``API`**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-04T08:37:19.017

[API Demos](http://developer.android.com/guide/samples/ApiDemos/src/com/example/android/apis/graphics/Typefaces.html)中有一个关于如何使用自定义字体的示例。也就是说，您可能***不需要***。[这篇文章](http://www.forbes.com/2008/09/25/font-android-g1-tech-wire-cx_ew_0926font.html?feed=rss_technology)似乎表明默认字体（Droid）可能包含（至少）Android目标市场的所有必要字符。

除此之外，开发者网站有关于如何“国际化”应用程序的[很好的文档。](http://developer.android.com/guide/topics/resources/resources-i18n.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-24T14:00:19.627

您可以使用 ttf 文件本地化您的应用程序

这是开始的示例代码

**在assets**下创建一个名为“fonts”的文件夹。复制您的语言文件（例如：mylang.ttf）。

使用以下代码加载此文件：

```
Typeface myfont;
myfont=Typeface.createFromAsset(getAssets(),"fonts/mylang.ttf");
TextView textview = (TextView)findViewById(R.id.TextView01);
textview.setText(R.string.my_textview);
    textview.setTypeface(myfont); 
```

在中，为.`string.xml`提供**“某种语言字符串”**`my_textview`。

现在您可以在 android 设备/模拟器中看到您的语言文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T15:03:02.760

没有使用 *.ttf 文件的内置功能。使用不同的语言看这里：

[http://developer.android.com/guide/topics/resources/resources-i18n.html#AlternateResources](http://developer.android.com/guide/topics/resources/resources-i18n.html#AlternateResources) [http://almondmendoza.com/2009/01/28/force-localize-an-application-on-android/](http://almondmendoza.com/2009/01/28/force-localize-an-application-on-android/)

android 开发指南中关于使资源内部化的第一个链接，第二个 - 如何在应用程序中切换语言环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-21T00:04:42.517

看这里：http: [//varunmc133.blogspot.com/2009/10/android-internationalization.html](http://varunmc133.blogspot.com/2009/10/android-internationalization.html)

# c++ - 内存映射文件对不断变化的数据有害吗？

> ID：796175
> 
> 赞同：2
> 
> 时间：2009-04-28T04:05:30.907
> 
> 标签：c++, winapi, memory, memory-management

我有一项服务负责从网络上收集不断更新的数据流。目的是整个数据集必须随时可供使用（只读）。这意味着客户端代码应该可以访问到达最旧数据消息的最新数据消息。

当前计划是在 Windows 上使用内存映射文件。主要是因为数据集非常庞大，跨越数十 GiB。没有办法知道需要哪一部分数据，但是当需要时，客户端可能需要随意跳转。

内存映射文件符合要求。但是我看到它说（书面）它们最适合已经定义的数据集，而不是不断变化的数据集。这是真的？我上面描述的场景可以很好地与内存映射文件一起使用吗？

或者我最好为所有数据保留一个内存映射文件，直到最近的数据达到一定数量，以便内存映射文件保存几乎 99% 的传入数据历史记录，但我存储最新的，比如说100MB 在单独的内存缓冲区中。每次这个缓冲区变满时，我都会把它移到内存映射文件中，然后清除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T04:44:45.133

从您的问题陈述中，我看到以下要求：

1.  数据必须始终可用
2.  数据只写入一次，我认为它只是追加，永远不会被覆盖。
3.  数据读取访问模式是随机的，即跳来跳去
4.  似乎也有隐含的延迟要求

在我看来，内存映射文件被选为地址 3) + 4)。如果您的数据大小可以放入内存，这可能是一个合理的解决方案。但是，如果您的数据大小太大而无法放入内存，内存映射文件可能会由于频繁的页面错误而导致性能问题。

您没有描述“跳跃”是如何完成的。如果可以建立索引，或许可以将数据保存到多个文件中，将索引保存在内存中，使用索引加载数据和服务，还可以缓存最常用的数据。基本思想类似于基于磁盘的哈希。这可能是一个更具可扩展性的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T04:10:55.450

听起来像一个数据库符合你的描述。寻呼是大多数商业化的开箱即用的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T04:10:12.860

任何已定义且不会更改的数据集都是最好的！
内存映射文件通常会胜过其他任何事情 - 大多数操作系统无论如何都会将访问缓存在 RAM 中。并且性能将是可预测的，当您开始交换时，您不会掉下悬崖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T05:15:14.327

由于您标记了此 Win32，我假设您正在使用 32 位机器，在这种情况下，您根本没有足够的地址空间来内存映射所有数据集。这意味着您必须在“跳来跳去”时创建和销毁文件中的映射，这将导致效率低于您的预期。

在实践中，您通常有超过 1 GB 的连续地址空间来将文件映射到 32 位 Windows 机器上，如果您对地址空间进行分段，最终可能会更少。

话虽如此，如果您的内存（不是地址空间）受限，使用内存映射执行此操作确实有好处，因为当您将文件映射为只读（而不是将其显式读入内存）时，操作系统将没有文件系统缓存中的第二个副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-18T12:54:15.093

The file can be mapped as readonly in one thread that presents the data and have a background worker thread which has the file mapped as readwrite to do the appending.

# asp.net-mvc - 您将如何使用 ASP.NET MVC 在 CMS 中创建页面？

> ID：796185
> 
> 赞同：2
> 
> 时间：2009-04-28T04:12:31.747
> 
> 标签：asp.net-mvc, model-view-controller

在内容管理系统中，您通常可以动态创建页面，例如

www.website.com.au/home.aspx

www.website.com.au/projects.aspx

www.website.com.au/contact-us.aspx

在我们之前编写的 CMS 中，当用户选择在其站点中创建新页面时，我们会在磁盘上物理创建这些文件。我们从基本模板页面复制了新文件，重命名了文件并在后面的代码中重命名了类，例如

template_page.aspx 和 template_page.aspx.cs 变成

项目.aspx 和项目.aspx.cs

这一切都是通过我们的 CMS 应用程序完成的。用户无需手动创建文件。

这种方法如何使用 MVC 工作？

例如 www.website.com.au/home/

www.website.com.au/projects/

www.website.com.au/contact-us/

大概我们需要动态创建控制器和视图？

这似乎比旧方法更混乱，但我认为它是可行的。

谁能想到一个更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T04:58:29.670

您应该能够使用一个控制器和几个视图（显示、创建、编辑）进行一些路由工作。我为这样的个人项目做了一个超级简单的实现。我将此路由放在路由列表顶部附近，并使用约束来确定是否应将其视为我的规则中的静态页面。我的实现没有任何层次结构，即pages/About-us/contact - 只有/contact。

```
route:
routes.MapRoute("StaticContent", "{title}",
  new { controller = "Page", action = "Details"},
  new { title = new InvalidTitleContstraint()});

controller:
public class PageController : Controller
{
    // Details checks if it can find a matching title in the DB
    // redirects to Create if no match 
    public ActionResult Details(string title)
    // GET
    public ActionResult Create()
    // POST
    public ActionResult Create(Page page)
} 
```

# .net - ImageList / TabPage 中的动画 GIF

> ID：796186
> 
> 赞同：4
> 
> 时间：2009-04-28T04:13:49.670
> 
> 标签：.net, winforms, animated-gif, imagelist

我想将动画 GIF 显示为`TabPage`.

如果我将图像添加到`ImageList`并使用该`TabPage.ImageIndex`属性，它只会显示第一帧（并且不会动画）：

```
ImageList imageList = new ImageList();
imageList.Images.Add(Properties.Resources.my_animated_gif);

tabControl.ImageList = imageList;
tabPage.ImageIndex = 0; 
```

网上的一些论坛也建议`ImageList`不支持动画 GIF。

有没有一种简单的方法可以将动画 GIF 显示为图像上的图像`TabPage`？我必须自己绘制图像并为其设置动画吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-22T20:21:33.433

我建议（对于免费解决方案）使用后台工作程序，以循环方式以编程方式更新图标（并检查天气以停止或继续）。这有点复杂，但我认为你的想法对吗？=P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T15:29:05.920

这是一个较晚的答案，但希望有人会从中受益，以下是我为 TabPage 中的图像设置动画所做的，我用它来显示动画加载图标，这假设您已经提取了 GIF 的帧并包含他们在资源中。

```
using System;
using System.Windows.Forms;
using System.Drawing;
using System.Threading;
namespace GuiLib
{

public class AnimatedTabControl : TabControl
{

    static int ITEM_WIDTH = 250;
    static int ITEM_HEIGHT = 25;
    static int TIMER_INTERVAL = 80;

    static int ICON_X = 3;
    static int ICON_Y = 3;
    static int ICON_WIDTH = 15;
    static int ICON_HIGHT = 15;

    static int TEXT_X = 50;
    static int TEXT_Y = 6;
    static int TEXT_WIDTH = 200;
    static int TEXT_HIGHT = 15;

    int animationIndex;
    static System.Windows.Forms.Timer myTimer = new System.Windows.Forms.Timer();

    Bitmap[] animationImages = {new Bitmap(GuiLib.Properties.Resources._0), new Bitmap(GuiLib.Properties.Resources._1),new Bitmap(GuiLib.Properties.Resources._2),
                               new Bitmap(GuiLib.Properties.Resources._3),new Bitmap(GuiLib.Properties.Resources._4),new Bitmap(GuiLib.Properties.Resources._5),
                               new Bitmap(GuiLib.Properties.Resources._6),new Bitmap(GuiLib.Properties.Resources._7)};
    Bitmap animatedimage;

    public AnimatedTabControl()
        : base()
    {            
        this.DrawMode = TabDrawMode.OwnerDrawFixed;
        this.SizeMode = TabSizeMode.Fixed;
        this.ItemSize = new Size(ITEM_WIDTH, ITEM_HEIGHT);
        myTimer.Tick += new EventHandler(TimerEventProcessor);
        myTimer.Interval = TIMER_INTERVAL;
        animationIndex = 0;
    }

    private void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
    {
        animationIndex++;

        if (animationIndex >= animationImages.Length)
            animationIndex = 0;

        animatedimage = animationImages[animationIndex];
        AnimateLoadingTabsOrStopIfNonIsLoading();
    }

    private void AnimateLoadingTabsOrStopIfNonIsLoading()
    {
        bool stopRunning = true;
        for (int i = 0; i < this.TabPages.Count; i++)
        {
            if (this.TabPages[i] is LoadingTabPage)
            {
                LoadingTabPage ltp = (LoadingTabPage)this.TabPages[i];

                if (ltp.Loading)
                {
                    stopRunning = false;
                    Rectangle r = GetTabRect(i);
                    this.Invalidate(new Rectangle(r.X + ICON_X, r.Y + ICON_Y, ICON_WIDTH, ICON_HIGHT));
                }
            }
        }

        if (stopRunning)
            myTimer.Stop();
    }

    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        Rectangle r = e.Bounds;
        r = GetTabRect(e.Index);

        DrawAnimationImageIfLoading(e, r);
        DrawTabTitle(e, r);
    }

    private void DrawTabTitle(DrawItemEventArgs e, Rectangle r)
    {
        string title = this.TabPages[e.Index].Text;
        StringFormat titleFormat = new StringFormat();
        titleFormat.Trimming = StringTrimming.EllipsisCharacter;
        e.Graphics.DrawString(title, this.Font, Brushes.Black, new RectangleF(r.X + TEXT_X, r.Y + TEXT_Y, TEXT_WIDTH, TEXT_HIGHT), titleFormat);
    }

    private void DrawAnimationImageIfLoading(DrawItemEventArgs e, Rectangle r)
    {
        if (this.TabPages[e.Index] is LoadingTabPage)
        {
            if (((LoadingTabPage)this.TabPages[e.Index]).Loading)
            {
                if (animatedimage != null)
                    e.Graphics.DrawImage(animatedimage, new RectangleF(r.X + ICON_X, r.Y + ICON_Y, ICON_WIDTH, ICON_HIGHT));

                if (!myTimer.Enabled)
                    myTimer.Start();
            }
        }
    }       
}
} 
```

LoadingTabPage 是这样的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace GuiLib
{
/// <summary>
/// A Class to facilitate tab page with animated loading icon.
/// </summary>
public class LoadingTabPage : TabPage
{
    public LoadingTabPage(string s)
        : base(s)
    {
        loading = false;
    }

    public LoadingTabPage()
        : base()
    {
        loading = false;
    }

    private bool loading;

    public bool Loading
    {
        get { return loading; }
        set 
        { 
            loading = value;
            if (this.Parent != null)
            {
                this.Parent.Invalidate();
            }
        }
    }

}

} 
```

使用将很容易：

```
myLoadingTabPage.Loading = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-21T14:39:04.103

[Devexpress](http://documentation.devexpress.com/#WindowsForms/clsDevExpressUtilsImageCollectiontopic)有一个非常相似的 ImageCollection，它支持 GIF。

# javascript - XSL + Java 脚本问题...无法从 xsl 文件调用 javascript 函数

> ID：796190
> 
> 赞同：1
> 
> 时间：2009-04-28T04:16:50.020
> 
> 标签：javascript, xml

我是 XSL 世界的新手，在 XSL 方面遇到的问题很少

```
<?xml version="1.0"?>

<xsl:stylesheet xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

<xsl:template match="/">
    <html lang="en" xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <link rel="stylesheet" type="text/css" href="mycss.css" />
        <script language="javascript"  type="text/javascript" >
                      <xsl:text></xsl:text>
        </script>

        </head>
    <body>

    <table>
        <tr bgcolor='yellow' onMouseover="changeColor(event, 'red');"> MYTEXT 
        </tr>
    </table>
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

我的 XML 文件是

```
<COUNTRY>
        <CITY>X</CITY>
        <CITY>Y</CITY>
</COUNTRY> 
```

我的 Javascript 文件是

```
 function changeColor(e,highlightcolor){
      source=ie? event.srcElement : e.target
      source.style.backgroundColor=highlightcolor
   } 
```

问题不是鼠标悬停，颜色在浏览器中没有变化............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T04:23:24.093

在您的 XSL 中，我没有看到包含任何 JavaScript 文件 (.js)，也没有看到您提到的 javascript 函数。其次，您在函数 changeColor 中使用的 ie 变量在哪里定义？

检查通过在浏览器上查看源代码生成的 html 是否一切正确。在您的函数中添加一些警报以确认它是否实际被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T06:29:57.517

如果连您的警报都没有显示（上面 jsight 的建议），那么请执行以下操作：如果您的 javascript 不在 xslt 中而是在 html 中，请按如下方式调用该函数：

```
onMouseover="javascript:changeColor(event, 'red');" 
```

如果您的脚本在 xslt 文件中：

1.  在 xsl:stylesheet 中，指定

    xmlns:myscript=' [http](http://www.example.com/myscript) ://www.example.com/myscript '

2.  将脚本部分声明为

    函数 changeColor(e,highlightcolor){ source=ie? event.srcElement : e.target source.style.backgroundColor=highlightcolor}

3.  调用函数为：

    onMouseover="myscript:changeColor(event, 'red');"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T04:32:20.250

我建议在您的 changeColor 函数中添加警报以检查您的状况。即，在函数的第一行之前：

```
alert("IE?" + ie); 
```

然后在你的第一行之后：

```
alert("Src: " + source); 
```

然后在改变颜色的行之前：

```
alert("style: " + source.style);
alert("bgclr: " + source.style.backgroundColor); 
```

显然，您可以使用 Javascript 调试器做类似的事情，但我假设您没有使用一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-29T05:09:15.707

Firefox 中没有发出警报....我怀疑函数是否被调用。

# c# - 连接到互联网时，asp.net 不显示网页

> ID：796193
> 
> 赞同：0
> 
> 时间：2009-04-28T04:18:05.400
> 
> 标签：c#, asp.net

当我禁用我的互联网连接时，我在 asp.net 中开发了一个网站，但是当我连接到互联网时，我得到了这个错误：

> 错误
> 无法检索请求的 URL
> 
> * * *
> 
> 尝试检索 URL 时： [http://localhost:4719/IWS/](http://localhost:4719/IWS/)
> 
> 遇到以下错误：
> 
> 连接到 127.0.0.1 失败 系统返回：
> 
> (111) 连接被拒绝远程主机或网络可能已关闭。请重试该请求。
> 
> 您的缓存管理员是 root。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T04:22:47.120

您是否正在尝试通过代理？如果是这样，请为本地地址禁用它。

# c# - C# 自动完成

> ID：796195
> 
> 赞同：43
> 
> 时间：2009-04-28T04:19:19.187
> 
> 标签：c#, winforms, autocomplete

我正在尝试向文本框添加自动完成功能，结果来自数据库。它们的格式为

> [001] 最后，第一中间

当前，您必须键入 [001]... 才能显示条目。**所以问题是，即使我先输入名字，我也希望它完成**。所以如果一个条目是

> [001] 史密斯，约翰·D

如果我开始输入 John，那么这个条目应该会出现在自动完成的结果中。

目前代码看起来像

```
AutoCompleteStringCollection acsc = new AutoCompleteStringCollection();
txtBox1.AutoCompleteCustomSource = acsc;
txtBox1.AutoCompleteMode = AutoCompleteMode.Suggest; 
txtBox1.AutoCompleteSource = AutoCompleteSource.CustomSource; 

....

if (results.Rows.Count > 0)
    for (int i = 0; i < results.Rows.Count && i < 10; i++) 
    {
        row = results.Rows[i];
        acsc.Add(row["Details"].ToString());
    }
} 
```

*results 是包含查询结果的数据集*

*该查询是使用 like 语句的简单搜索查询。如果我们不使用自动完成功能并将结果放入数组中，则会返回正确的结果。*

有什么建议吗？

**编辑：**

这是返回结果的查询

```
SELECT Name from view_customers where Details LIKE '{0}' 
```

*{0} 是搜索字符串的占位符。*

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-29T00:32:18.790

现有的自动完成功能仅支持按前缀搜索。似乎没有任何体面的方法来覆盖该行为。

`OnTextChanged`有些人通过覆盖事件实现了自己的自动完成功能。这可能是你最好的选择。

例如，您可以`ListBox`在 the 下方添加一个`TextBox`并将其默认可见性设置为 false。然后您可以使用 的`OnTextChanged`事件`TextBox`和 的`SelectedIndexChanged`事件`ListBox`来显示和选择项目。

作为一个基本示例，这似乎工作得很好：

```
public Form1()
{
    InitializeComponent();

    acsc = new AutoCompleteStringCollection();
    textBox1.AutoCompleteCustomSource = acsc;
    textBox1.AutoCompleteMode = AutoCompleteMode.None;
    textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource;
}

private void button1_Click(object sender, EventArgs e)
{
    acsc.Add("[001] some kind of item");
    acsc.Add("[002] some other item");
    acsc.Add("[003] an orange");
    acsc.Add("[004] i like pickles");
}

void textBox1_TextChanged(object sender, System.EventArgs e)
{
    listBox1.Items.Clear();
    if (textBox1.Text.Length == 0)
    {
    hideResults();
    return;
    }

    foreach (String s in textBox1.AutoCompleteCustomSource)
    {
    if (s.Contains(textBox1.Text))
    {
        Console.WriteLine("Found text in: " + s);
        listBox1.Items.Add(s);
        listBox1.Visible = true;
    }
    }
}

void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
    textBox1.Text = listBox1.Items[listBox1.SelectedIndex].ToString();
    hideResults();
}

void listBox1_LostFocus(object sender, System.EventArgs e)
{
    hideResults();
}

void hideResults()
{
    listBox1.Visible = false;
} 
```

您可以轻松完成更多工作：将文本附加到文本框、捕获其他键盘命令等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T05:43:03.747

如果您决定使用基于用户输入的查询，请确保使用 SqlParameters 以避免 SQL 注入攻击

```
SqlCommand sqlCommand = new SqlCommand();
sqlCommand.CommandText = "SELECT Name from view_customers where Details LIKE '%" + @SearchParam + "%'";
sqlCommand.Parameters.AddWithValue("@SearchParam", searchParam); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-27T09:55:15.167

这是一个继承`ComboBox`控件类的实现，而不是用新控件替换整个组合框。当您在文本框中键入时，它会显示自己的下拉列表，但单击以显示下拉列表的处理方式与以前一样（即不使用此代码）。因此，您可以获得适当的本机控制和外观。

如果您想改进它，请使用它，修改它并编辑答案！

```
class ComboListMatcher : ComboBox, IMessageFilter
{
    private Control ComboParentForm; // Or use type "Form" 
    private ListBox listBoxChild;
    private int IgnoreTextChange;
    private bool MsgFilterActive = false;

    public ComboListMatcher()
    {
        // Set up all the events we need to handle
        TextChanged += ComboListMatcher_TextChanged;
        SelectionChangeCommitted += ComboListMatcher_SelectionChangeCommitted;
        LostFocus += ComboListMatcher_LostFocus;
        MouseDown += ComboListMatcher_MouseDown;
        HandleDestroyed += ComboListMatcher_HandleDestroyed;
    }

    void ComboListMatcher_HandleDestroyed(object sender, EventArgs e)
    {
        if (MsgFilterActive)
            Application.RemoveMessageFilter(this);
    }

    ~ComboListMatcher()
    {
    }

    private void ComboListMatcher_MouseDown(object sender, MouseEventArgs e)
    {
        HideTheList();
    }

    void ComboListMatcher_LostFocus(object sender, EventArgs e)
    {
        if (listBoxChild != null && !listBoxChild.Focused)
            HideTheList();
    }

    void ComboListMatcher_SelectionChangeCommitted(object sender, EventArgs e)
    {
        IgnoreTextChange++;
    }

    void InitListControl()
    {
        if (listBoxChild == null)
        {
            // Find parent - or keep going up until you find the parent form
            ComboParentForm = this.Parent;

            if (ComboParentForm != null)
            {
                // Setup a messaage filter so we can listen to the keyboard
                if (!MsgFilterActive)
                {
                    Application.AddMessageFilter(this);
                    MsgFilterActive = true;
                }

                listBoxChild = listBoxChild = new ListBox();
                listBoxChild.Visible = false;
                listBoxChild.Click += listBox1_Click;
                ComboParentForm.Controls.Add(listBoxChild);
                ComboParentForm.Controls.SetChildIndex(listBoxChild, 0); // Put it at the front
            }
        }
    }

    void ComboListMatcher_TextChanged(object sender, EventArgs e)
    {
        if (IgnoreTextChange > 0)
        {
            IgnoreTextChange = 0;
            return;
        }

        InitListControl();

        if (listBoxChild == null)
            return;

        string SearchText = this.Text;

        listBoxChild.Items.Clear();

        // Don't show the list when nothing has been typed
        if (!string.IsNullOrEmpty(SearchText))
        {
            foreach (string Item in this.Items)
            {
                if (Item != null && Item.Contains(SearchText, StringComparison.CurrentCultureIgnoreCase))
                    listBoxChild.Items.Add(Item);
            }
        }

        if (listBoxChild.Items.Count > 0)
        {
            Point PutItHere = new Point(this.Left, this.Bottom);
            Control TheControlToMove = this;

            PutItHere = this.Parent.PointToScreen(PutItHere);

            TheControlToMove = listBoxChild;
            PutItHere = ComboParentForm.PointToClient(PutItHere);

            TheControlToMove.Show();
            TheControlToMove.Left = PutItHere.X;
            TheControlToMove.Top = PutItHere.Y;
            TheControlToMove.Width = this.Width;

            int TotalItemHeight = listBoxChild.ItemHeight * (listBoxChild.Items.Count + 1);
            TheControlToMove.Height = Math.Min(ComboParentForm.ClientSize.Height - TheControlToMove.Top, TotalItemHeight);
        }
        else
            HideTheList();
    }

    /// <summary>
    /// Copy the selection from the list-box into the combo box
    /// </summary>
    private void CopySelection()
    {
        if (listBoxChild.SelectedItem != null)
        {
            this.SelectedItem = listBoxChild.SelectedItem;
            HideTheList();
            this.SelectAll();
        }
    }

    private void listBox1_Click(object sender, EventArgs e)
    {
        var ThisList = sender as ListBox;

        if (ThisList != null)
        {
            // Copy selection to the combo box
            CopySelection();
        }
    }

    private void HideTheList()
    {
        if (listBoxChild != null)
            listBoxChild.Hide();
    }

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg == 0x201) // Mouse click: WM_LBUTTONDOWN
        {
            var Pos = new Point((int)(m.LParam.ToInt32() & 0xFFFF), (int)(m.LParam.ToInt32() >> 16));

            var Ctrl = Control.FromHandle(m.HWnd);
            if (Ctrl != null)
            {
                // Convert the point into our parent control's coordinates ...
                Pos = ComboParentForm.PointToClient(Ctrl.PointToScreen(Pos));

                // ... because we need to hide the list if user clicks on something other than the list-box
                if (ComboParentForm != null)
                {
                    if (listBoxChild != null &&
                        (Pos.X < listBoxChild.Left || Pos.X > listBoxChild.Right || Pos.Y < listBoxChild.Top || Pos.Y > listBoxChild.Bottom))
                    {
                        this.HideTheList();
                    }
                }
            }
        }
        else if (m.Msg == 0x100) // WM_KEYDOWN
        {
            if (listBoxChild != null && listBoxChild.Visible)
            {
                switch (m.WParam.ToInt32())
                {
                    case 0x1B: // Escape key
                        this.HideTheList();
                        return true;

                    case 0x26: // up key
                    case 0x28: // right key
                        // Change selection
                        int NewIx = listBoxChild.SelectedIndex + ((m.WParam.ToInt32() == 0x26) ? -1 : 1);

                        // Keep the index valid!
                        if (NewIx >= 0 && NewIx < listBoxChild.Items.Count)
                            listBoxChild.SelectedIndex = NewIx;
                        return true;

                    case 0x0D: // return (use the currently selected item)
                        CopySelection();
                        return true;
                }
            }
        }

        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-11T00:34:57.097

这将为您提供您正在寻找的自动完成行为。

随附的示例是一个完整的工作表单，只需要您的数据源和绑定的列名。

```
using System;
using System.Data;
using System.Windows.Forms;

public partial class frmTestAutocomplete : Form
{

    private DataTable maoCompleteList; //the data table from your data source
    private string msDisplayCol = "name"; //displayed text
    private string msIDcol = "id"; //ID or primary key

    public frmTestAutocomplete(DataTable aoCompleteList, string sDisplayCol, string sIDcol)
    {
        InitializeComponent();

        maoCompleteList = aoCompleteList
        maoCompleteList.CaseSensitive = false; //turn off case sensitivity for searching
        msDisplayCol = sDisplayCol;
        msIDcol = sIDcol;
    }

    private void frmTestAutocomplete_Load(object sender, EventArgs e)
    {

            testCombo.DisplayMember = msDisplayCol;
            testCombo.ValueMember = msIDcol; 
            testCombo.DataSource = maoCompleteList;
            testCombo.SelectedIndexChanged += testCombo_SelectedIndexChanged;
            testCombo.KeyUp += testCombo_KeyUp; 

    }

    private void testCombo_KeyUp(object sender, KeyEventArgs e)
    {
        //use keyUp event, as text changed traps too many other evengts.

        ComboBox oBox = (ComboBox)sender;
        string sBoxText = oBox.Text;

        DataRow[] oFilteredRows = maoCompleteList.Select(MC_DISPLAY_COL + " Like '%" + sBoxText + "%'");

        DataTable oFilteredDT = oFilteredRows.Length > 0
                                ? oFilteredRows.CopyToDataTable()
                                : maoCompleteList;

        //NOW THAT WE HAVE OUR FILTERED LIST, WE NEED TO RE-BIND IT WIHOUT CHANGING THE TEXT IN THE ComboBox.

        //1).UNREGISTER THE SELECTED EVENT BEFORE RE-BINDING, b/c IT TRIGGERS ON BIND.
        testCombo.SelectedIndexChanged -= testCombo_SelectedIndexChanged; //don't select on typing.
        oBox.DataSource = oFilteredDT; //2).rebind to filtered list.
        testCombo.SelectedIndexChanged += testCombo_SelectedIndexChanged;

        //3).show the user the new filtered list.
        oBox.DroppedDown = true; //do this before repainting the text, as it changes the dropdown text.

        //4).binding data source erases text, so now we need to put the user's text back,
        oBox.Text = sBoxText;
        oBox.SelectionStart = sBoxText.Length; //5). need to put the user's cursor back where it was.

    }

    private void testCombo_SelectedIndexChanged(object sender, EventArgs e)
    {

        ComboBox oBox = (ComboBox)sender;

        if (oBox.SelectedValue != null)
        {
            MessageBox.Show(string.Format(@"Item #{0} was selected.", oBox.SelectedValue));
        }
    }
}

//=====================================================================================================
//      code from frmTestAutocomplete.Designer.cs
//=====================================================================================================
partial class frmTestAutocomplete
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.testCombo = new System.Windows.Forms.ComboBox();
        this.SuspendLayout();
        // 
        // testCombo
        // 
        this.testCombo.FormattingEnabled = true;
        this.testCombo.Location = new System.Drawing.Point(27, 51);
        this.testCombo.Name = "testCombo";
        this.testCombo.Size = new System.Drawing.Size(224, 21);
        this.testCombo.TabIndex = 0;
        // 
        // frmTestAutocomplete
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 273);
        this.Controls.Add(this.testCombo);
        this.Name = "frmTestAutocomplete";
        this.Text = "frmTestAutocomplete";
        this.Load += new System.EventHandler(this.frmTestAutocomplete_Load);
        this.ResumeLayout(false);

    }

    #endregion

    private System.Windows.Forms.ComboBox testCombo;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T05:21:03.110

如果您正在运行该查询（`{0}`被输入的字符串替换），您可能需要：

```
SELECT Name from view_customers where Details LIKE '%{0}%' 
```

`LIKE`仍然需要`%`角色...是的，您应该使用参数而不是信任用户的输入:)

此外，您似乎正在返回该`Name`列，但在该`Details`列上进行查询。因此，如果有人输入“John Smith”，如果那不在`Details`列中，您将无法获得您想要的内容。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-16T11:36:02.000

**有两种方法在使用 SQL 的 autoComplete textBox 控件中成功：**

但您应该执行以下操作：

a- 创建新项目

b-将组件类添加到项目并删除co​​mponent1.designer“根据您给组件类的名称”

c- 下载[“下载示例 - 144.82 KB”](http://www.codeproject.com/KB/edit/AutoCompleteTextBoxAdv/AutoCompleteTextBoxSample.zip) 并打开它并从 AutoCompleteTextbox.cs 中打开 AutoCompleteTextbox 类
d- 如图所示选择所有并将其复制到当前组件类

[http://i.stack.imgur.com/oSqCa.png](http://i.stack.imgur.com/oSqCa.png)

e- Final - 运行项目并停止以在工具箱中查看新的 AutoCompleteTextbox。

现在您可以添加以下两种可以与它们一起使用 SQL 的方法

**1- 在 Form_Load**

```
private void Form1_Load(object sender, EventArgs e)
  {            
   SqlConnection cn = new SqlConnection(@"server=.;database=My_dataBase;integrated security=true");
   SqlDataAdapter da = new SqlDataAdapter(@"SELECT [MyColumn] FROM [my_table]", cn);
   DataTable dt = new DataTable();
   da.Fill(dt);

   List<string> myList = new List<string>();
    foreach (DataRow row in dt.Rows)
       {
          myList.Add((string)row[0]);
       }

   autoCompleteTextbox1.AutoCompleteList = myList;
    } 
```

**2- 在 TextChanged 事件中**

```
 private void autoCompleteTextbox_TextChanged(object sender, EventArgs e)
        {           
         SqlConnection cn = new SqlConnection(@"server=.;database=My_dataBase;integrated security=true");
         SqlDataAdapter da = new SqlDataAdapter(@"SELECT [MyColumn] FROM [my_table]", cn);
         DataTable dt = new DataTable();
         da.Fill(dt);

     List<string> myList = new List<string>();
      foreach (DataRow row in dt.Rows)
        {
          myList.Add((string)row[0]);
        }

   autoCompleteTextbox2.AutoCompleteList = myList;

    } 
```

# database - 邮政编码和邮政编码是否违反第三范式？

> ID：796196
> 
> 赞同：8
> 
> 时间：2009-04-28T04:19:45.147
> 
> 标签：database, third-normal-form

鉴于邮政编码中隐含了状态信息，是否没有将它们都存储在某些违反第三范式的地方？您可以或应该将它们简单地组合成一个领域吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-28T04:24:46.197

根据[这篇文章](http://eagereyes.org/Applications/ZIPScribbleMap.html#comment-93)，有一些跨越州界的邮政编码。所以不，这不违反 3NF。

> 实际上，邮政编码跨越州界的情况很少见。通常是由于访问问题，例如在军事基地或由于运输网络的限制。
> 
> 一个这样的案例是密苏里州普罗腾（邮政编码 65733）。Bull Shoals Lake 以北的一些阿肯色州道路最好由 Protem 交付单位而不是阿肯色州邮局访问。此类道路的一些示例包括邮政编码 65733 中 H002 高速公路上的 Ann Street、Kalijah Road、McBride Road、Red Oak Lane 和 Vance Road。McBride Road 实际上穿过州界。如果您查看在线地图程序中的道路网络，您可以看到来自位于布尔肖尔斯湖南侧的 AR 钻石城附近（邮政编码 72644）的乡村运输公司需要开车数英里才能到达能够进入上面列出的道路。
> 
> 再举一个例子，肯塔基州坎贝尔堡（邮政编码 42223）在田纳西州也有一些道路。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T04:25:15.740

这种说法实际上并非在所有地理区域都是正确的。澳大利亚有几个跨越州界但共享相同邮政编码的姐妹城市。

3NF 虽然非常有用，但并非不可侵犯。出于性能原因，我有时会将某些表信息恢复为 2NF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T04:43:47.973

没有。有一些邮政编码跨越州界。有关一些示例，请参见[Wikipedia](http://en.wikipedia.org/wiki/ZIP_code)。此外，规范化减少了冗余，而地址实际上是相当复杂的事情，很容易出错。冗余意味着即使地址的一部分是错误的，邮件也很有可能能够到达目的地。

我记得有一次，一位来自欧洲的徒步旅行者住在我的兄弟会，想寄一封感谢信。他不太了解美国的地址或地理，所以当他寄出纸条时，它的地址是“<兄弟会名称> <不完全正确的大学名称>新英格兰？美国”。邮件真的到了那里，真是太神奇了。

地址冗余可能是一件非常好的事情，您通常不应该对地址进行超出您需要的假设。例如，有些人没有门牌号；你输入“一般投递”，邮递员应该知道信的去向（或者如果他不知道，你可以在邮局取信）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-28T08:12:08.380

有一个不同的问题。您可能希望在输入的数据（可能是冲突的）和从中得出的结论之间有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-29T05:57:31.267

# 3NF违规举例

让我们看看下面的博客文章项目的非规范化表。这不是第三范式，它被破坏了。假设有多个具有相同作者的帖子，我们可能会更新几行而其他行不更新。使表数据不一致。

![博客文章项目的非规范化表](https://lh3.googleusercontent.com/7uhXLc0vHEeIl6guinTbjKfrbn37RlT3Mii6nLdIdAGjR-66TPSDB9EyDkZeca71P7pA_tOphReWJ6xk4Y5vh7zO5eh4K8Twfroyh2N8GizTvbvWLvB_zgdnquVNCKK5vMXPCfigOUS_6MNjEftb8Vl-2Epr4nFOORfi3TlcekzYtPBUdJRHR7Km9MPKCYW8snNQBEvhWmQdJ2jDzUKvKqks38wwGV8tKT8ok6vNX3f9nEmniUOs0fTEcmX5BesT5HH-aufUbUExHOhl2JLqhJvYqIqw2bI6IK1SdhWlwsguJrusjr88ESwR3qVXdSdvTC7nAZrQTohidnlJ79U26c24EhQOpfTjfF1VKQ4jWM7ENAsurGinlQcV1zU2K7X2I0_qQ7oSQZ-O8loyKjzm-0GlfeWNhBnmH3azDKmCWsHsIzga_OCTCk8rGeWjbV-CTbxvnWhkTrqAhd99Y0TIQqMDJjUNPYHkTKBM2aTAq0TD0k9YPOYFheHxDZmmlx49apT2suoSzEQ41r3s9pZAzTsIq9UUwYSK8G7iRtYs4Hvv0rzqlp1TK1VJMQS4SF-8JeKAE8X8aBPlfokq9BjrFaDS8bBEtp81CKnNGFkupYqmM81z=w472-h95-no)

因此，这违反了规范化，因为它违反了以第 3 范式描述规范化表的常用方法，即表中的***每个非键属性都必须提供关于键的事实，整个键，除了键之外什么都没有***。那是你在美国法庭上所说的话的文字游戏，说实话，全部真相，除了真相什么都没有。在这种情况下，关键是`Post Id`并且有一个非关键属性`Author Email`不遵循该属性。因为它确实如此，实际上告诉了作者的一些事情。所以它违反了第三范式，没有达到[规范化的目标](https://stackoverflow.com/a/39199309/2404470)

希望这可以帮助。

# .net - IronPython - 将 int 转换为字节数组

> ID：796197
> 
> 赞同：2
> 
> 时间：2009-04-28T04:19:47.003
> 
> 标签：.net, python, ironpython, bytearray

在 Python 中获取字符串长度然后将该 int 转换为字节数组的正确方法是什么？将其打印到控制台进行测试的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T04:40:15.410

使用[结构](http://docs.python.org/library/struct)。

```
import struct

print struct.pack('L', len("some string")) # int to a (long) byte array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T04:29:20.367

使用.Net：

```
byte[] buffer = System.BitConverter.GetBytes(string.Length)
print System.BitConverter.ToString(buffer) 
```

这会将字节输出为十六进制。您可能需要清理 IronPython 的语法。

# c++ - 如何使用数据创建提升线程？

> ID：796198
> 
> 赞同：4
> 
> 时间：2009-04-28T04:20:01.043
> 
> 标签：c++, multithreading, boost

我在 boost::bind 和创建线程方面遇到了一些问题。

本质上，我想使用绑定在“扫描仪”对象上调用“扫描”函数。

像这样的东西：

```
 Scanner scanner;
   int id_to_scan = 1;

   boost::thread thr1(boost::bind(&scanner::scan)); 
```

但是，我被语法绊倒了。如何将数据传递给扫描？作为构造函数的一部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-28T04:39:48.500

请记住，任何成员函数的第一个参数都是对象。

所以如果你想打电话：

```
scanner* s;
s->scan() 
```

使用 bind 你会使用：

```
boost::bind(&scanner::scan, s); 
```

如果你想打电话：

```
s->scan(42); 
```

用这个：

```
boost::bind(&scanner::scan, s, 42); 
```

因为我经常希望在创建绑定对象的对象上调用绑定，所以我经常这样做：

```
boost::bind(&scanner::scan, this); 
```

祝你好运。

# servlets - 部署图像 servlet 以保持图像机密性的最佳方式是什么？

> ID：796200
> 
> 赞同：1
> 
> 时间：2009-04-28T04:20:22.617
> 
> 标签：servlets, confidential-information

我有一个允许操作图像的 servlet - 缩放等。

部署此服务以使 servlet 的用户对其图像保密的最佳方式是什么？

我认为这意味着他们需要在自己的服务器上而不是在我的服务器上运行 servlet。

有没有其他方式向他们提供这项服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T04:30:39.050

他们必须给你图像，让你改变它。您可以保证之后立即将其删除，但您的用户将不得不相信您的话。

文件托管服务可以通过仅托管服务运营商自己无法打开的加密文件来保持机密性。但是你不能在不先解密的情况下操作加密的图像。

您可以使用 HTTPS 来确保没有窃听者，并确保您将图像发送给除了原始所有者之外的任何人（据您从登录会话中可以看出）。您应该尽快删除所有文件。

正如您所说，确保没有其他人看到图像的唯一方法是在用户端运行应用程序。

# latex - LaTeX 与 DocBook

> ID：796201
> 
> 赞同：48
> 
> 时间：2009-04-28T04:22:34.873
> 
> 标签：latex, docbook

我对 LaTeX、基本格式、基本数学公式等知之甚少。我发现 LaTeX 很难配置成我自己的风格。最近听说过Docbook，它也是一种排版机制，但是因为使用了XML，所以容易很多。所以，如果我使用 LaTeX/Docbook 的主要工作是编写一个包含一些数学知识的简单文档（不是课堂书籍），并且我想要简单的配置和高度可定制的应用程序，那么哪个更好，有没有关于 Docbook 的好书?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2010-05-04T05:05:40.153

DocBook 不是“一种排版机制”。DocBook 就是将演示与内容分离。DocBook 只处理内容；它用于创建书籍、文章等的抽象表示。有[许多工具](http://wiki.docbook.org/topic/DocBookPublishingTools "DocBook 工具")可以根据预定义的模板布局 DocBook。[其中一些工具使用 LaTeX](http://dblatex.sourceforge.net/doc/ "Dblatex")。AFAIK，O'Reilly 使用稍微修改过的 DocBook 语言版本来创作他们的内容，然后他们将这个 XML 输入到与 Adob​​e FrameMaker 集成的自定义脚本中来布局他们的书籍。

LaTeX 本质上是一种尝试将 TeX 中的表示与内容分开，但它并没有完全实现 IMO 的目标。在大多数情况下，演示文稿仍然与内容混合在一起。我认为 LaTeX 是目前用于布局分页文档的最佳开源工具。然而，像 InDesign 这样的专有工具有许多TeX 所没有的特性（比如*良好的OpenType 支持）（XeTeX**增加*了 OpenType 支持）。无论哪种方式，**如果您正在写一本书**，我强烈建议您使用 DocBook 而不是 LaTeX 来创作您的内容。

也就是说，听起来您正在编写简短的一次性文档，其中包含一些数学知识。我认为 LaTeX 可能是你最好的选择。如果你需要*大量*的可定制性，你可能需要使用[Plain TeX](http://www.ntg.nl/doc/wilkins/pllong.pdf "Plain TeX 入门")而不是 LaTeX，但这需要你做很多工作。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-04-28T04:44:35.727

好吧，我没有使用过 DocBook，但是快速浏览一下 wikipedia 和 google：

1.  [DocBook 没有描述数学的元素。](http://www.sagehill.net/docbookxsl/Math.html)
2.  正如您所说，DocBook 是 XML。对我来说，这使得手写（或者，更确切地说，使用基本的文本编辑器）是一件可怕的事情。也许您喜欢编写 XML，或者拥有一个好的 IDE。我想你可以看看[这个问题](https://stackoverflow.com/questions/55622/best-tools-for-working-with-docbook-xml-documents)。

DocBook 的[Wikipedia 页面](http://en.wikipedia.org/wiki/Docbook)列出了几本您可能想看的书，但我显然不能说它们是否是“好”的书。

我建议使用 LaTeX。找人给你一个基本的模板，然后写 LaTeX 就这么简单：

```
\section{Introduction}

This is my introduction.

\section{Stuff}

Here is some stuff.

\subsection{Particular stuff}

A particular type of stuff.  With maths:

$\int_{x=1}^n 3x^2$

% etc. 
```

Google 是您寻找基本模板的朋友，您可以从以下方面着手：

*   [一](https://engineering.purdue.edu/ECN/Support/KB/Docs/LaTeXArticleTemplate)
*   [二](http://www.cs.technion.ac.il/~yogi/Courses/CS-Scientific-Writing/examples/simple/simple.htm)
*   [三](http://dsl.org/comp/templates/)

要从源代码转到文档，您需要安装 LaTeX（这超出了此答案的范围，但如果您使用的是 linux，则非常容易）。理想情况下，您的 LaTeX 安装将包括`pdflatex`. 然后你只需运行：

```
pdflatex source.tex 
```

（如果你有参考书目，还有更多的工作——但这​​是一个不同问题的主题）

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2009-04-28T22:13:50.290

DocBook 的伟大之处在于它是基于 XML 的——所以一章是完整的子树，一节是完整的子树，等等。在 LaTeX 中，分隔仅由线性扫描期间的文档结构决定。

Docbook 最糟糕的地方在于它是基于 XML 的——低级别的东西非常脏，而且手动编码很烦人。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-04-28T22:28:51.813

尽管我已经相当广泛地使用了 LaTeX，但我对 DocBook 并不是很熟悉。LaTeX 的思想**不是**制作一个定制的文档，就是制作一个可读的、有吸引力的文档。它是一组围绕 TeX 的库、模板、宏等，由知道自己在文档设计方面做什么的人设置。当然，您有他们无法预料的特殊需求，因此您也必须进行一些调整。它是一种非常高级的声明性语言，旨在反映文档的内容和结构，而不是它应该是什么样子，其想法是您的想法及其组织方式是您应该关注的，不是页面上文本的布局。如果您需要更多控制，则存在一个包含额外样式和宏等的庞大库（CTAN），其中一些（想起回忆录）为您提供了很多控制权。

如果您将大量复杂的格式化内容**塞入**LaTeX 文档的正文中，那么您做错了。你需要做的是把你的内容放在那里，你的文档在语义上被组织成章节和小节，*然后*再回去担心格式。此时您不必过多地进入文档正文。它应该都是适用于整个文档的通用内容，最好以可重用的方式。这确保了一致性。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-28T05:00:59.993

是的，LaTeX 很难配置以产生您想要的那种布局。我建议你看一下[LaTeX 类回忆录](http://www.ctan.org/tex-archive/macros/latex/contrib/memoir/)的手册，看看它能让你产生什么样的布局。

[网上](http://www.docbook.org/)有一本关于 DocBook 的书。也看一下，看看您可以生成什么样的布局，以及您是否可以使用 DocBook 轻松格式化您想要的数学内容。

如果您必须编写任何重要的数学，我的建议是使用 LaTeX，但当然这取决于您发现哪种格式更容易使用。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-04-28T22:52:08.077

大约两年前，我尝试喜欢和使用 DocBook；但是，我回到了 LaTeX，因为至少在当时，LaTeX 产生了更好的质量输出（PDF）。我从来没有设法让 DocBook 到 LaTeX 到 PDF 翻译工作。我的问题很可能是“操作员错误”，但我建议在选择一些简单文档之前先尝试 DocBook（和 LaTeX）。

以下是导致我选择 LaTeX 的几点：

*   [以JabREF](http://jabref.sourceforge.net/)作为 GUI 的BibTeX 参考书目
*   优质的PDF输出
*   网上很多例子，包括几个和我喜欢的格式差不多
*   好书，例如[“LaTeX 指南”](https://rads.stackoverflow.com/amzn/click/com/0321173856)

如果您喜欢 GUI，请查看[LyX](http://www.lyx.org/)。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2009-05-17T14:52:44.863

我不想走“更简单”或更好的路线，因为我认为这是一个品味问题并习惯了。我认为 docbook 是 XML 的一个优势，因此它可以通过使用 XSLT 变成几乎任何你喜欢的东西。结合它的独立性，它感觉更像是 Latex 所做的结构化内容。尤其是记录开源软件 Docbook 确实被广泛使用。您可以轻松地获取例如 Hibernate 和/或 Spring 的模板和样式表，并根据您的需要对其进行调整。

我想指出的另一个方面是构建系统中的集成。对于 Maven，有一个名为 docbkx 的插件可用，它只会根据内容和适当的 XSLT 输出 PDF、HTML 和任何您喜欢的内容。无需进一步安装。我见过的使用 Latex 完成此任务的唯一方法是将一些软件包安装到构建操作系统并围绕 em 构建自己的脚本。恕我直言，这不是可行的方法，特别是如果您构建跨平台。

关于编辑器，我可以建议[XMLmind XMLEditor](http://www.xmlmind.com/xmleditor/)，它会带来很多痛苦，并为 docbook 提供了相当不错的 WYSIWYG 方法。

如果您依赖数学表达式，我也更愿意选择 Latex，因为 docbook 中没有任何东西具有相同的功能。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-11-17T04:56:37.713

使用 DocBook 的真正原因在于对您的文档进行有意义的标记，能够对其进行验证，并将其转换为多种用途，而不仅仅是发布。LaTeX 和其他宏集添加了一层语义标记，但您始终可以自由地引入 TeX 代码，并添加来自其他来源的宏。从根本上说，TeX 文档是只能由 TeX 处理器解析的计算机程序。

对于数学和 DocBook：DocBook 是 XML，它允许您酌情使用其他 XML 技术；在这种情况下，MathML。已经提到的 XMLmind XMLEditor 提供了一个 GUI 数学编辑器，并包含样式表以将它们格式化为 Web 并与 DocBook 内容一起打印。

还有一些工具可以将 XML 文档翻译成其他语言（xml2po 是一个简单的工具，[http](http://heartsome.net/EN/home.html) ://heartsome.net/EN/home.html 是一个完整的套件）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-01-08T09:25:33.097

FWIW 我通过 xmlmind ( [http://xmlmind.com/](http://xmlmind.com/) ) 使用 docbook 来生成 html 和 .chm 文件。我还设置了 fop up 来生成 pdf，但它们并不漂亮。

完成 docbook 源代码后，我使用[xsltproc](http://xmlsoft.org/XSLT/xsltproc2.html)和[docbook.xsl](http://sourceforge.net/projects/docbook/files/)文件来编写它。这是漫长而痛苦的设置，但一旦它开始工作，它就很甜蜜。

另一种方法是使用[pandoc](http://johnmacfarlane.net/pandoc/)（一种扩展的降价类型工具）从降价到 DocBook。这会切断 xml 编辑器，但您仍然需要对输出格式进行转换。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2011-08-03T11:47:13.013

任何必须创建专业的科学文档（研究论文、书籍、技术指南等）的人都会知道为什么 TeX 是更好的选择。

对于那些不了解某些事实的人来说，这里是一个完美的例子：在好大学，如果他没有正确参考其他人的作品，他的作品可能会被完全拒绝。我相信，有数百种“官方”引用和引用方式，哈佛学校有自己的，ACM 有自己的，在计算机科学家中，数字（温哥华）符号是最常见的。很多专业机构都有自己的风格，并且坚持。据我所知，TeX 是唯一意识到这一点的排版系统，在 BiBTeX 的帮助下，它成为作者**非常强大的**工具。它可以节省数小时甚至数天的工作时间。

如果我是小说作家，或者一些非技术文档的作者，我可能会选择 DocBook。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-05-08T04:15:45.537

你看过ConTeXt吗？与 LaTeX 相比，它更灵活、更容易配置。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-03-08T15:21:26.973

Arbortext 支持本机 LaTeX。您可以发送发布引擎或打印作曲家 LaTeX，它会通过它。它还支持许多其他组合语言。

# stackless - 编程语言是无堆栈的到底意味着什么？

> ID：796211
> 
> 赞同：17
> 
> 时间：2009-04-28T04:23:37.307
> 
> 标签：stackless

根据这个答案

[https://stackoverflow.com/questions/551950/what-stackless-programming-languages-are-available/671296#671296](https://stackoverflow.com/questions/551950/what-stackless-programming-languages-are-available/671296#671296)

所有这些编程语言都是无堆栈的

*   无堆栈 Python
*   派皮
*   语言
*   方案
*   Tcl
*   卢阿
*   鹦鹉虚拟机

对他们来说，无堆栈到底意味着什么？这是否意味着他们不使用调用堆栈？如果他们不使用调用堆栈，他们使用什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-28T04:32:59.297

> 对他们来说，无堆栈到底意味着什么？这是否意味着他们不使用调用堆栈？

是的，这差不多。

> 如果他们不使用调用堆栈，他们使用什么？

当然，具体的实现会因语言而异。在 Stackless Python 中，有一个调度程序使用最顶层的帧及其结果启动 Python 解释器。解释器根据需要一次处理一个操作码，直到它到达一个`CALL_FUNCTION`操作码，即您即将进入函数的信号。这会导致调度程序使用相关信息构建一个新框架并返回带有展开标志的调度程序。从那里，调度程序重新开始，将解释器指向最顶层的帧。

出于多种原因，无堆栈语言避开调用堆栈，但在许多情况下，它的使用是为了使某些编程结构变得更容易实现。规范的是**[continuations](http://en.wikipedia.org/wiki/Continuation)**。延续是非常强大、非常简单的控制结构，可以表示您可能已经熟悉的任何常用控制结构（`while`、`do`、`if`、`switch`等）。

如果这令人困惑，您可能想尝试围绕维基百科的文章，特别是可爱的*延续三明治类比*：

> 假设你在冰箱前的厨房里，想着三明治。你在那里拿一个延续，把它放在你的口袋里。然后你从冰箱里拿出一些火鸡和面包，给自己做一个三明治，现在放在柜台上。你调用你口袋里的延续，你发现自己又站在冰箱前，想着一个三明治。不过好在柜台上有一个三明治，所有用来做三明治的材料都没有了。所以你吃它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-28T04:51:01.750

它们不使用调用堆栈，因为它们以[continuation-passing style](http://en.wikipedia.org/wiki/Continuation-passing_style)运行。如果您不熟悉尾调用优化，那么这可能是了解其含义的良好第一步。

为了在此模型上模拟传统的调用/返回，而不是推送返回地址并期望帧的其余部分保持不变，调用者关闭其代码的其余部分和仍然需要的任何变量（其余部分被释放）。然后它对被调用者执行尾调用，将此延续作为参数传递。当被调用者“返回”时，它通过调用这个延续，将返回值作为参数传递给它。

就上述内容而言，这只是一种进行函数调用的复杂方法。但是，它可以很好地推广到更复杂的场景：

1.  exception/finally/etc 块很容易建模 - 如果你可以传递一个“返回”延续作为参数，你可以很容易地传递 2（或更多）。lisp-y“条件处理程序”块（可能会或可能不会将控制权返回给调用者）也很容易 - 为这个函数的其余部分传递一个延续，它可能会或可能不会被调用。
2.  多个返回值同样变得容易 - 将多个参数传递给延续。
3.  返回临时/复制不再与函数参数传递不同。这通常可以更容易地消除临时性。
4.  尾递归优化是微不足道的——调用者只是传递它收到的“返回”延续而不是捕获一个新的延续。

# c# - ASP.net c#魔法数组问题

> ID：796213
> 
> 赞同：1
> 
> 时间：2009-04-28T04:25:03.667
> 
> 标签：c#, asp.net, arrays

我在以下代码中遇到了一个有趣的问题。productObject 是一个自定义对象，其中包含许多与产品相关的变量，包括“VendorLocationId”。

给定列表框中的这些项目：

“A镇”价值：1

“B镇”价值：2

还给出：在列表框中选择了这两个项目。

```
1  productObjectArray[] productObjectArray = new productObjectArray[lstLocation.Items.Count];
2  int counter = 0;
3  foreach (ListItem li in lstLocation.Items)
4  {
5    if (li.Selected == true)
6    {
7      productObject.VendorLocationId = li.Value;
8      productObjectArray[counter] = productObject;
9    }
10   counter++;
11 } 
```

执行后，上面的代码给出了这样的结果：

```
productObjectArray[0].VendorLocationId = 2
productObjectArray[1].VendorLocationId = 2 
```

我觉得这很令人困惑。如果我单步执行代码，productObjectArray[0].VendorLocationId = 1 和 counter = 1 直到第 7 行。然后 productObjectArray[0].VendorLocationId 神奇地等于 2 和 counter = 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T04:29:03.550

似乎您的“productObject”是在此代码块之外声明的，因此您将数组中*的两个元素都引用到同一个 object*。因此，当您在循环中最后一次更改“productObject”时，它会影响数组中的所有项目，因为它们都指向同一个确切的对象。您需要做的是让数组中的每个元素都指向对象的一个​​新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T04:29:04.953

看起来您正在使用 productObject 的单个实例并将 productObjectArray 中的两个项目设置为都指向该单个实例。VendorLocationId 在两者中都是 2，因为这是设置为 productObject 的最后一个值。

# variables - 变量名的声明

> ID：796216
> 
> 赞同：1
> 
> 时间：2009-04-28T04:26:23.210
> 
> 标签：variables, coding-style, names

声明变量名的最佳方法是什么......以大写......？..小写？在任何情况下都必须在哪个区域声明......根据标准变量的滚动，什么名称是合适的......有一些变量要声明？......对不起这个问题......我是新手编程世界......我希望不要打扰...... =）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T04:30:35.387

好吧，这里有一些关于各种语言的编码标准的链接。
这有变量命名标准等等。

[C# 编码标准](http://www.dotnetspider.com/tutorials/BestPractices.aspx)
[C++ 编码标准](http://www.possibility.com/Cpp/CppCodingStandard.html)
[Java 编码标准](http://java.sun.com/docs/codeconv/)

这是[通用编码标准文章](http://www.cs.uwf.edu/~wilde/gump/codestan.htm)，解释了编码标准背后的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T04:31:57.067

至少对于 C 和 C++，我们可以使用[匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T04:32:44.537

如果：

*   语言没有规定它；和
*   你的编码标准没有规定，

然后让它尽可能可读。将来，成群的开发人员会为你的名字歌颂，因为你没有给他们带来可怕的代码。

我个人最喜欢的是常量的全部大写和下划线`(IQ_LIMIT)`以及其他所有内容的驼峰式`(getItembyId(), itemCount)`。但那是个人喜好，不是写在石板上的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T04:33:20.900

这实际上取决于您使用的编程语言，以及一组遵循的任何编码约定。

例如，有用于编写 C 代码的[GNU 编码标准](http://www.gnu.org/prep/standards/)，它涵盖了[变量名](http://www.gnu.org/prep/standards/html_node/Names.html#Names)直至[行的缩进](http://www.gnu.org/prep/standards/html_node/Formatting.html#Formatting)。

对于语言，Java 编程语言的代码约定列出了[Java 编程语言](http://java.sun.com/docs/codeconv/)中变量、包、类、方法等的[大小写和命名的一些编码约定。](http://java.sun.com/docs/codeconv/html/CodeConventions.doc8.html#367)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T04:41:10.727

在罗马时，像罗马人一样行事。对于这类事情，每种语言通常都有自己的习语。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T04:43:12.610

IMO，知道变量的范围是最重要的。您应该一眼就知道有多少代码可以影响一个变量，以及您更改它会影响多少代码。通过这种方式，可以保持封装（和您的理智）。您不会意外更改全局变量并神秘地软管整个程序。此外，它们应该像一个疼痛的拇指一样脱颖而出，只是乞求重构。

因此，全局变量的第一个字母大写（其中“全局”是多个函数可以看到的任何变量），其他所有变量的第一个字母小写。常量传统上会全部大写。

因此，在 studlyCaps 风格中，它将是：

*   全局变量
*   局部变量
*   常数变量

并使用分数：

*   全局变量
*   本地变量
*   CONSTANT_VARIABLE

你是使用 studlyCaps 还是 under scores 取决于你的编程语言和本地风格（我更喜欢 under scores 是因为它们的可读性并且不会混淆大小写）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T04:49:30.583

在 C# 中，我们对属性和方法名使用 PascalCase，对其他成员使用 camelCase。对于常量，我们使用 CAPS_WITH_UNDERSCORE。对于 html 元素，使用匈牙利符号。（我认为这些是微软的标准。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T05:12:16.033

“When in Rome...”的一个推论是按照之前的编码员所做的那样做。当您在处理另一个开发人员的代码或项目时，您应该将您的样式与现有样式相匹配。虽然一开始看到一个奇怪的约定是令人费解且难以处理的，但与整理出一个每两个函数切换符号和样式的文件相比，这算不了什么。

在处理自己的项目时，或者作为单个开发人员，您可以在合理范围内做最舒服的事情。

# multithreading - 线和纤维有什么区别？

> ID：796217
> 
> 赞同：216
> 
> 时间：2009-04-28T04:27:20.073
> 
> 标签：multithreading, coroutine, fiber

线和纤维有什么区别？我听说过 ruby​​ 中的纤维，并且我听说它们有其他语言版本，有人可以简单地向我解释一下线程和纤维之间的区别。

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2009-04-28T04:40:19.980

用最简单的术语来说，线程通常被认为是抢占式的（尽管这可能并不总是正确的，具体取决于操作系统），而光纤被认为是轻量级的协作线程。两者都是您的应用程序的单独执行路径。

使用线程：当前执行路径可能随时被中断或抢占（注意：此语句是一个概括，可能并不总是适用，具体取决于操作系统/线程包/等）。这意味着对于线程来说，数据完整性是一个大问题，因为一个线程可能会在更新一大块数据的过程中停止，从而使数据的完整性处于不良或不完整的状态。这也意味着操作系统可以通过同时运行多个线程来利用多个 CPU 和 CPU 内核，并将其留给开发人员来保护数据访问。

使用纤程：当前执行路径仅在纤程产生执行时才会中断（与上述相同）。这意味着光纤总是在明确定义的位置开始和停止，因此数据完整性不再是问题。此外，由于光纤通常在用户空间中进行管理，因此无需进行昂贵的上下文切换和 CPU 状态更改，这使得从一根光纤更改为下一个光纤非常有效。另一方面，由于没有两条纤程可以完全同时运行，因此仅使用纤程并不能利用多个 CPU 或多个 CPU 内核。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2009-04-28T04:38:10.937

线程使用**抢先**调度，而纤程使用**协作**调度。

使用一个线程，控制流随时可能被中断，另一个线程可以接管。使用多个处理器，您可以同时运行多个线程（*同时*多线程，或 SMT）。因此，您必须*非常*小心并发数据访问，并使用互斥锁、信号量、条件变量等来保护您的数据。做对通常非常棘手。

使用光纤，控制仅在您告诉它时才会切换，通常使用名为`yield()`. 这使得并发数据访问更容易，因为您不必担心数据结构或互斥体的原子性。只要您不屈服，就不会有被*抢占*并让另一根光纤尝试读取或修改您正在使用的数据的危险。但是，结果是，如果您的光纤进入无限循环，则没有其他光纤可以运行，因为您没有屈服。

您还可以混合使用线和纤维，这会产生两者都面临的问题。不建议这样做，但如果小心操作，有时可能是正确的做法。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2009-04-28T04:35:44.030

在 Win32 中，纤程是一种用户管理的线程。光纤有自己的堆栈和自己的指令指针等，但光纤不是由操作系统调度的：您必须显式调用 SwitchToFiber。相反，线程是由操作系统抢先调度的。所以粗略地说，纤程是在应用程序/运行时级别管理的线程，而不是真正的操作系统线程。

结果是光纤更便宜，应用程序对调度有更多的控制。如果应用程序创建大量并发任务和/或希望在它们运行时进行密切优化，这可能很重要。例如，数据库服务器可能选择使用光纤而不是线程。

（同一术语可能还有其他用法；如前所述，这是 Win32 定义。）

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2013-11-08T09:14:29.547

首先，我建议阅读此对[进程和线程之间差异的](https://stackoverflow.com/a/19518207/71074)解释作为背景材料。

一旦你读过它，它就很简单了。线程既可以在内核中实现，也可以在用户空间中实现，或者两者可以混合使用。光纤基本上是在用户空间中实现的线程。

*   通常称为线程的是在内核中实现的执行线程：所谓的内核线程。内核线程的调度由内核专门处理，尽管内核线程可以根据需要通过休眠来自愿释放 CPU。内核线程的优点是它可以使用阻塞 I/O 并让内核担心调度。它的主要缺点是线程切换相对较慢，因为它需要陷入内核。
*   纤程是用户空间线程，其调度由单个进程下的一个或多个内核线程在用户空间处理。这使得光纤切换非常快。如果您将所有访问特定共享数据集的光纤分组在单个内核线程的上下文中，并由单个内核线程处理它们的调度，那么您可以消除同步问题，因为光纤将有效地串行运行并且您已经完成控制他们的日程安排。将相关纤程分组在单个内核线程下很重要，因为它们正在运行的内核线程可以被内核抢占。这一点在许多其他答案中都没有明确说明。此外，如果您在纤程中使用阻塞 I/O，则整个内核线程都是块的一部分，包括属于该内核线​​程的所有纤程。

在现代操作系统的第 11.4 节“Windows Vista 中的进程和线程”中，Tanenbaum 评论道：

> 虽然光纤是协作调度的，但如果有多个线程调度光纤，则需要进行大量仔细的同步以确保光纤不会相互干扰。为了简化线程和纤程之间的交互，通常只创建与运行它们的处理器一样多的线程，并将线程关联到每个只在一组不同的可用处理器上运行，甚至只在一个处理器上运行。然后每个线程可以运行特定的光纤子集，从而在线程和光纤之间建立一对多的关系，从而简化同步。即便如此，纤维仍然存在许多困难。大多数 Win32 库完全不知道纤程，并且尝试像线程一样使用纤程的应用程序会遇到各种故障。内核不知道纤程，当纤程进入内核时，它正在执行的线程可能会阻塞，内核会在处理器上调度任意线程，使其无法运行其他纤程。由于这些原因，除非从明确需要 Fiber 提供的功能的其他系统移植代码，否则很少使用 Fiber。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-04-28T17:33:35.253

请注意，除了线程和光纤之外，Windows 7 还引入了[用户模式调度](http://msdn.microsoft.com/en-us/library/dd627187.aspx)：

> 用户模式调度 (UMS) 是一种轻量级机制，应用程序可以使用它来调度自己的线程。如果 UMS 线程在内核中阻塞，应用程序可以在不涉及系统调度程序的情况下在用户模式下在 UMS 线程之间切换，并重新获得对处理器的控制权。UMS 线程与纤程的不同之处在于每个 UMS 线程都有自己的线程上下文，而不是共享单个线程的线程上下文。在用户模式下切换线程的能力使得 UMS 在管理大量需要很少系统调用的短期工作项方面比线程池更有效。

有关线程、光纤和 UMS 的更多信息，请观看[Dave Probert：Windows 7 内部 - 用户模式调度程序 (UMS)](http://channel9.msdn.com/shows/Going+Deep/Dave-Probert-Inside-Windows-7-User-Mode-Scheduler-UMS/)。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-28T04:39:57.797

线程最初是作为轻量级进程创建的。以类似的方式，纤程是轻量级线程，通过屈服控制（简单地）依赖纤程本身来相互调度。

我想下一步将是每次您希望他们执行指令时都必须向他们发送信号的绞线（与我 5 岁的儿子不同：-）。在过去（甚至现在在某些嵌入式平台上），所有线程都是纤程的，没有抢占式，您必须编写线程才能表现得很好。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-28T04:35:51.567

线程由操作系统调度（抢占式）。操作系统可以随时停止或恢复线程，但纤程或多或少地管理自己（合作）并相互让步。也就是说，程序员控制光纤何时进行处理以及该处理何时切换到另一根光纤。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-04-28T04:38:02.123

线程通常依靠内核来中断线程，以便它或另一个线程可以运行（更好地称为抢先式多任务），而纤程使用协作式多任务处理，其中纤程本身放弃其运行时间，以便其他光纤可以运行。

一些有用的链接解释它比我可能做的更好：

*   [http://en.wikipedia.org/wiki/Fiber_(computer_science)](http://en.wikipedia.org/wiki/Fiber_(computer_science))
*   [http://en.wikipedia.org/wiki/Computer_multitasking#Cooperative_multitasking.2Ftime-sharing](http://en.wikipedia.org/wiki/Computer_multitasking#Cooperative_multitasking.2Ftime-sharing)
*   [http://en.wikipedia.org/wiki/Pre-emptive_multitasking](http://en.wikipedia.org/wiki/Pre-emptive_multitasking)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-03-09T18:34:35.017

Win32 光纤定义实际上是 Sun Microsystems 建立的“Green Thread”定义。没有必要在某种线程上浪费术语纤维，即在用户代码/线程库控制下在用户空间执行的线程。

为了澄清这个论点，请查看以下评论​​：

*   使用超线程，多核 CPU 可以接受多个线程并将它们分配到每个内核上。
*   超标量流水线 CPU 接受一个线程执行，并使用指令级并行 (ILP) 更快地运行线程。我们可以假设一个线程被分解为在并行管道中运行的并行纤程。
*   SMT CPU 可以接受多个线程并将它们分解成指令纤程，以便在多个管道上并行执行，从而更有效地使用管道。

我们应该假设进程是由线程组成的，线程应该由纤维组成。考虑到这种逻辑，将纤维用于其他类型的线程是错误的。

# java - 什么是最小的 Java Web MVC 框架？

> ID：796219
> 
> 赞同：9
> 
> 时间：2009-04-28T04:28:52.067
> 
> 标签：java, model-view-controller, web-frameworks

我正在寻找一个 Java Web 框架，它需要对一个非常小的应用程序进行最少的配置。Spring & Struts 在这里绝对是矫枉过正。这是一个可以在没有任何框架的情况下编写的应用程序，但如果我能找到一个，我更愿意使用最小的 MVC 框架。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-28T04:35:56.277

[Stripes](http://www.stripesframework.org/)和[ZTemplates](http://en.wikipedia.org/wiki/Ztemplates)应该很轻。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-24T10:04:28.827

结帐[火花](http://www.sparkjava.com/)。它尽可能地简约。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-28T04:43:29.847

看看[Apache Wicket](http://wicket.apache.org/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T04:33:46.097

grails 需要最少的配置，因为其中大部分都具有合理的默认值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-28T06:42:13.820

我会说spring webmvc非常简约，恕我直言，它远非矫枉过正。你不必包含整个 spring 框架来做你的事情。要启动 webmvc webapp，您需要 ~3-4 jars IIRC。不要低估 DI 在内部结构和可测试性方面的优势。

我会选择 Spring WebMVC + JSP 可能与 sitemesh 结合使用。后来当你意识到你有更复杂的事情要做时，你可以添加 Spring-Webflow 等等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T04:31:42.090

制作 Java Web 应用程序的最简单方法是使用 JSP 来显示您的内容，并在后端使用纯 Java。

这几乎不需要配置。

唯一的要求是用于托管的 J2SE 和 Tomcat。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T04:42:49.630

最轻量级的 Java 框架是 servlet + JSP。尝试使用最新发布的标准——Servlet 2.5 和 JSP 2.1。Tomcat 提供您所需要的一切：

1.  小服务程序容器；
2.  JSP（可选）；
3.  Java 运行时；
4.  用于提供 HTML 的 Web 服务器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-06T08:28:38.800

试试 appfuce.com。这会根据您的偏好（struts2、spring 或 JSF）为您提供全功能的 mvc Web 应用程序。并实现了示例登录系统，以便您了解所涉及技术的核心功能

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T12:50:09.953

检查[(µ)Micro](http://micro-docs.simplegames.ca)看看它是否足够轻:)

HTH——弗洛林

# java - 如何通过 JDBC 将 Java 存储过程加载到 Oracle 10g 中？

> ID：796244
> 
> 赞同：3
> 
> 时间：2009-04-28T04:36:23.733
> 
> 标签：java, oracle, stored-procedures, jdbc

我正在尝试通过 JDBC 将一些 java 存储过程加载到 Oracle 10g 数据库中。我正在执行的语句是 -

```
CREATE OR REPLACE JAVA SOURCE NAMED "test.Test" AS
package test;
public class Test {
    public static String myMethod(String a) {
        return a;
    }
}; 
```

通过 TOAD 运行它可以正常工作，但是通过我的 JDBC 客户端运行时会出现以下错误 -

```
Exception in thread "Thread-3" java.lang.NullPointerException
        at oracle.jdbc.driver.T4C8Oall.getNumRows(T4C8Oall.java:728)
        at oracle.jdbc.driver.T4CStatement.execute_for_rows(T4CStatement.java:478)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1028)
        at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1451)
        at ejsdal.CreateDBJavaSQL.executeScript(CreateDBJavaSQL.java:23)
        at ejsdal.OperationController.run(OperationController.java:182) 
```

我正在使用 java.sql.Statement 的“executeUpdate”在第一个代码块中传递字符串。

是否可以通过 JDBC 加载 java 源代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T04:50:06.213

想通了 - 需要设置

```
statement.setEscapeProcessing(false); 
```

在执行更新之前。这是因为 Java 源文件的**{**和**}**字符被 JDBC 驱动程序误解为过程调用语法。

# c# - LINQ 查询表达式和扩展方法有什么区别

> ID：796246
> 
> 赞同：14
> 
> 时间：2009-04-28T04:37:08.413
> 
> 标签：c#, linq, query-expressions

下面是两个返回相同数据的查询。其他风格我不确定哪个更好。

哪些因素会影响这些查询？使用一种风格比另一种风格有什么好处？

样品 1

```
var x = from s in db.Surveys
    join sq in db.Survey_Questions on s.ID equals sq.Survey_ID
    join q in db.Questions on sq.Question_ID equals q.ID
    join qg in db.Question_Groups on q.ID equals qg.Question_ID
    where s.Type_ID.Equals(typeID) & s.Type.Equals(type)
    select new { question = sq.Question, status = sq.Status, grp = qg }; 
```

样品 2

```
var x = db.Surveys.Where(s => s.Type_ID.Equals(typeID) & s.Type.Equals(type))
              .Join(db.Survey_Questions,
                        s => s.ID,
                        sq => sq.Survey_ID,
                        (s, sq) => new
                        {
                            question = sq.Question,
                            status = sq.Status
                        })
              .Join(db.Question_Groups,
                        q => q.question.ID,
                        qg => qg.Question_ID,
                        (q, qg) => new
                        {
                            question = q.question,
                            status = q.status,
                            group = qg
                        }).ToList(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-28T05:40:31.770

更新：你已经修正了你的标题，所以忽略咆哮。

您的问题的标题与您的代码示例无关。您的问题暗示一种语法是 IEnumerable，另一种是 IQueryable，但这是不正确的。在您的示例中，如果`db.Surveys`是 IQueryable，那么您的*两个*示例都使用 IQueryable。我将尝试回答*这两个*问题。

您的两个代码示例只是编写相同 LINQ 查询的不同方式（假设它们编写得很好）。示例 1 中的代码只是示例 2 中代码的简写。编译器以相同的方式处理两个示例中的代码。想想 C# 编译器将如何`int?`处理`Nullable<System.Int32>`. C# 和 VB.Net 语言都提供这种速记查询语法。其他语言可能没有此语法，您必须使用示例 2 语法。事实上，其他语言甚至可能不支持扩展方法或 lambda 表达式，而且您还必须使用更丑陋的语法。

* * *

更新：

进一步以 Sander 为例，当您编写此代码时（查询理解语法）：

```
var surveyNames = from s in db.Surveys select s.Name 
```

你*认为*编译器把这个简写变成了这个（扩展方法和 lambda 表达式）：

```
IQueryable<string> surveryNames = db.Surveys.Select(s => s.Name); 
```

但实际上扩展方法和 lambda 表达式本身就是简写。编译器会发出类似这样的东西（不完全是，只是为了给出一个想法）：

```
Expression<Func<Survey, string>> selector = delegate(Survey s) { return s.Name; };
IQueryable<string> surveryNames = Queryable.Select(db.Surveys, selector); 
```

请注意，这`Select()`只是`Queryable`类中的静态方法。如果您的 .NET 语言不支持查询语法、lambda 或扩展方法，那么您将不得不自己编写代码。

* * *

> 使用一种风格比另一种风格有什么好处？

对于小型查询，扩展方法可以更紧凑：

```
var items = source.Where(s => s > 5); 
```

此外，扩展方法语法可以更灵活，例如条件 where 子句：

```
var items = source.Where(s => s > 5);

if(smallerThanThen)
    items = items.Where(s => s < 10);
if(even)
    items = items.Where(s => (s % 2) == 0);

return items.OrderBy(s => s); 
```

此外，有几种方法只能通过扩展方法语法（Count()、Aggregate()、Take()、Skip()、ToList()、ToArray() 等）使用，所以如果我使用其中一种，我通常会用这种语法编写整个查询，以避免混合两种语法。

```
var floridaCount = source.Count(s => s.State == "FL");

var items = source
            .Where(s => s > 5)
            .Skip(5)
            .Take(3)
            .ToList(); 
```

另一方面，当查询变得更大更复杂时，查询理解语法会更清晰，尤其是当您开始使用一些复杂的`let`, `group`,`join`等时。

最后，我通常会使用对每个特定查询效果更好的那个。

* * *

更新：你修正了你的标题，所以忽略其余的......

现在，关于您的标题：关于 LINQ，IEnumerable 和 IQueryable 非常相似。它们都具有几乎相同的扩展方法（Select、Where、Count 等），主要（唯一？）区别是 IEnumerable`Func<TIn,TOut>`作为参数，而 IQueryable`Expression<Func<TIn,TOut>>`作为参数。你用同样的方式表达（通常是lamba表达式），但在内部它们完全不同。

IEnumerable 是 LINQ to Objects 的入口。LINQ to Objects 扩展方法可以在任何 IEnumerable（数组、列表、任何可以迭代的对象`foreach`）上调用，并且`Func<TIn,TOut>`在编译时转换为 IL 并在运行时像普通方法代码一样运行。请注意，其他一些 LINQ 提供程序使用 IEnumerable，因此实际上在幕后使用 LINQ to Objects（LINQ to XML、LINQ to DataSet）。

IQueryable 由 LINQ to SQL、LINQ to Entities 和其他 LINQ 提供程序使用，这些提供程序需要检查您的查询并对其进行转换，而不是直接执行您的代码。IQueryable 查询及其`Expression<Func<TIn,TOut>>`s 在编译时不会编译到 IL 中。相反，会创建一个*表达式树*，并且可以在运行时进行检查。这允许将语句翻译成其他查询语言（例如 T-SQL）。表达式树可以在运行时编译成 Func<TIn,TOut> 并在需要时执行。

[在这个问题](https://stackoverflow.com/questions/695678/performing-part-of-a-iqueryable-query-and-deferring-the-rest-to-linq-for-objects/696014#696014)中可以找到一个说明差异的示例，其中 OP 希望在 SQL Server 中执行部分 LINQ to SQL 查询，将对象带入托管代码，并在 LINQ to Objects 中执行其余查询。为了实现这一点，他所要做的就是将 IQueryable 转换为他希望切换发生的 IEnumerable。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T04:41:54.733

LINQ 是一种技术的流行语。

IQueryable 是 LINQ 使用的 .NET 接口。

除了风格，两者没有区别。使用您喜欢的任何风格。

我更喜欢第一种风格的长陈述（就像这里显示的那样），第二种风格很短的陈述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T04:50:00.580

第一个示例中的 where 子句实际上只是第二种方法中 Where 子句的语法糖。事实上，您可以编写自己的与 Linq 或 IQueryable 无关的类，只需使用 Where 方法，您就可以使用该语法糖。例如：

```
 public class MyClass
    {

        public MyClass Where<T>(Func<MyClass, T> predicate)
        {
            return new MyClass { StringProp = "Hello World" };
        }

        public MyClass Select<T>(Func<MyClass, T> predicate)
        {
            return new MyClass ();
        }

        public string StringProp { get; set; }
    } 
```

这显然是一个愚蠢的例子，但请注意，有一个 Where 方法只返回一个新的 MyClass，其中 stringprop 设置为 Hello World。展示：

```
MyClass a = new MyClass();
            var q = from p in a
                    where p.StringProp == "foo" // doesnt matter what we put here, as we're not really checking the predicate
                    select p;
            Console.WriteLine(q.StringProp); 
```

这将导致写出“Hello World”。同样，这个例子显然毫无意义，但它证明了“where”语法只是在你的代码中寻找一个接受 Func 的 Where 方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-28T05:31:13.557

查询表达式和扩展方法是做同样事情的两种方法。查询表达式在编译时被转换为扩展方法——对于更熟悉 SQL 的人来说，它们只是语法糖。

当你写这个：

```
var surveyNames = from s in db.Surveys select s.Name; 
```

编译器将其转换为：

```
IQueryable<string> surveryNames = db.Surveys.Select(s => s.Name); 
```

真的，我认为查询表达式只是出于营销原因而创建的——一种类似 SQL 的语言结构，在开发 LINQ 时充当引人注目的角色，而不是提供太多实际用途的东西。我发现大多数人只是直接使用扩展方法，因为它们会产生更统一的编码风格，而不是 C# 和 SQL 的混合。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T04:48:59.397

1./您的问题标题与您所问的不符。
2./你的问题标题没有真正的意义。Linq 代表 Language Integrated Query，是一堆技术和实践的总称，IQueryable 是一个常用来促进 Linq 的接口。您正在比较 Apples 和 Oranges
3./关于您的实际问题，主要区别在于样式，对于像这样的复杂查询，我个人更喜欢第二个版本，因为它清楚地显示了结果集的进展。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T06:22:24.633

您的**Sample1**是 Linq 的顶级表示，它更具可读性，并且在编译时将转换为表达式树，即您的**Sample2**。

```
var x = from s in db.Surveys
    join sq in db.Survey_Questions on s.ID equals sq.Survey_ID
    join q in db.Questions on sq.Question_ID equals q.ID
    join qg in db.Question_Groups on q.ID equals qg.Question_ID
    where s.Type_ID.Equals(typeID) & s.Type.Equals(type)
    select new { question = sq.Question, status = sq.Status, grp = qg }; 
```

您可以尝试下面的代码来获取书面查询的表达式

```
var exp=x.Expression; 
```

查询不太复杂时使用表达式

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T04:43:06.010

我认为您的问题最好这样表述，“IEnumerable<T> 和 IQueryable<T> 相对于 LINQ 有什么区别”

默认情况下，LINQ 查询返回 IQueryable<T>。IQueryable<T> 允许您在执行查询之前将其他过滤器或“子句”附加到查询中。

您的 LINQ 查询（第一个示例）和使用方法链接的 LINQ（第二个示例）产生相同的结果，但语法不同。

可以将 LINQ 查询编写为 LINQ 方法链，反之亦然。这真的取决于你的喜好。

@Lucas：不同的是 IEnumerable<T> 执行内存查询，而 IQueryable<T> 执行内存不足。这意味着，一旦您在`foreach`迭代器中，您将使用 IEnumerable，并且当您通过扩展方法或使用 LINQ 语法构建查询时`from o in object`，您正在构建 IQueryable<T>。IQueryable<T> 在您触摸 Enumerator 时立即执行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-23T06:07:00.850

另一点值得一提的是，Linq 扩展方法遵循 C# 语言，而查询理解的东西是预处理的，就像编译器内置的一样。即您可以导航到 .Select(x => 的定义，而您不能`from ... where ... select`

# c# - 什么是功能测试？

> ID：796256
> 
> 赞同：10
> 
> 时间：2009-04-28T04:41:07.513
> 
> 标签：c#, unit-testing, testing, terminology

什么是功能测试？这与单元测试和集成测试有什么不同？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-28T04:50:48.113

另一种思路是这样的：

单元测试：
将代码作为单元进行测试，调用方法并验证返回值和对象属性状态/值

功能测试：
在执行任务时测试您的代码路径。这可以确保您的应用程序按照您的代码执行的操作。

综合测试？你是说集成测试吗？

集成测试：
通过将代码插入更大的代码块来测试代码，以确保您没有破坏现有逻辑并且能够集成回主分支。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-28T05:21:04.767

功能测试确保在最终产品中按照规范中的规定实现客户要求。单元测试是检查一小部分代码的行为是否符合预期。集成测试确保当您将所有不同的部分/模块组合在一起时系统是稳定的。

例如，BigBank Corporation 想要一种软件，该软件可以生成客户银行对帐单并每月为每位客户插入 3 笔随机费用。

程序经理在与 BigBank 的代表多次讨论后编写软件功能规范。

开发人员编写了一个模块来填充数据库中的模板语句。他执行单元测试以检查是否涵盖了大多数情况（典型客户、当月没有数据等）

另一位开发人员创建了一个随机数生成器模块。他对此进行单元测试。

集成商获取这两个模块，编译它们并执行集成测试，以确保它们可以很好地协同工作。

最后，为了向 BigBank 提供 beta 版试用，测试团队执行功能测试以验证软件是否符合功能规范。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T14:26:11.753

测试目标的功能测试应该关注任何可以直接追溯到功能规范或业务规则的测试需求。这些测试的目标是验证正确的数据接受、处理和检索。它测试产品的功能和操作行为以确保它们符合其规范，并结合忽略系统或组件的内部机制并仅关注响应所选输入和执行条件而生成的输出的测试。这种类型的测试基于典型的黑盒技术，即通过通过 UI（用户界面）与应用程序交互并分析输出（结果）来验证应用程序（及其内部流程）。

来源： http: **[//softwareqatestings.com/introduction-to-software-testing/basic-steps-of-functional-testing.html](http://softwareqatestings.com/introduction-to-software-testing/basic-steps-of-functional-testing.html)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T04:47:33.537

*   *单元测试*在单个应用层（表示、业务逻辑、数据访问等）内。

*   *功能测试*跨越多个应用程序层，因此测试跨越了完整的应用程序功能。

*   *集成测试*将是跨多个应用程序组件甚至应用程序的测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-29T00:11:43.533

单元测试：测试可能的最小代码单元，通常是一个函数或方法。通过使用模拟等。理想情况下，这应该非常快，并且不会以任何方式撞击硬盘或网络。

功能测试：测试一组一起工作的功能/方法。理想情况下，这也不应该去磁盘或网络，但通常会。

集成测试：在现实世界中运行的测试，进入真实（虽然是测试）数据库，写入磁盘等。您正在测试您的程序是否与其他服务正常工作，它是否与它们正确“集成”。您通常会有一个单独的程序（例如 Selenium）来执行测试，就像真正的用户一样。

另外：白盒测试：了解程序内部工作原理的测试。单元测试和功能测试通常是白盒。一个例子是调用一个函数来保存一个值，然后检查数据库中的值是否正确。

黑盒测试：不了解内部结构并将程序/功能/方法视为“黑盒”的测试。一个例子是调用一个函数来保存一个值并调用另一个（公共）函数来获取该值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-28T07:13:28.527

如果您查看 V 模型，功能测试现在通常称为端到端测试或系统测试。

单元测试显然是测试可能的最小代码单元，而集成测试是检查您的单元是否与系统的其他部分很好地集成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-28T06:33:23.023

术语“功能测试”通常用于测试整个系统，例如从浏览器端到数据库层的 Web 应用程序。虽然我对自己滥用这个术语感到内疚，但我相信术语“系统测试”或“端到端测试”能更好地描述它。

“功能测试”的另一个含义可能只是“测试功能”，这通常也适用于单元测试或集成测试。但是有些测试不是功能测试。几乎所有与非功能性需求相关的东西都属于该类别，例如负载测试或分析。

我认为最初的区别可能是“功能系统测试”和“非功能系统测试”，现在“功能测试”通常用于区分端到端测试和测试子系统/单元。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-03T14:59:34.860

首先，我们应该了解软件的“功能”是什么？

功能可以被认为是软件打算执行的任务/活动。

因此，测试软件的每一个功能称为功能测试

在进行单元测试时，您将隔离代码并测试它的每个单元。

将程序中的方法/函数视为一个单元，您将在其中传递一些参数并期望代码提供所需的输出，测试这样的代码单元称为单元测试

一组单元充当软件的功能，对这些功能的测试可以称为功能测试

请浏览链接以更好地理解它

[http://www.guru99.com/unit-testing-guide.html](http://www.guru99.com/unit-testing-guide.html)

[http://www.guru99.com/functional-testing.html](http://www.guru99.com/functional-testing.html)

# java - Scala 工具的当前状态是什么？

> ID：796258
> 
> 赞同：3
> 
> 时间：2009-04-28T04:41:28.137
> 
> 标签：java, ide, scala, intellisense

在过去的一年里，我听到越来越多关于 Scala 语言的炒作。我知道有几个现有项目计划将 Scala 支持与 IDE 集成；但是，并不总是很清楚集成到底有多好。

他们目前是否支持 Intellisense 以及 Eclipse 和 Netbeans 对 Java 语言的支持？他们是否也支持即时验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T06:02:43.307

我不能亲自谈论 IntelliJ 或 NetBeans 插件的稳定性（尽管我听说过好消息），但用于 Eclipse 的 Scala IDE 最近刚刚发布了带有 Scala 2.7.4 的新版本。在架构上，此版本与之前的版本有很大不同，因为它使用 Equinox Aspects，这是官方支持的扩展 JDT（和其他跨插件扩展）的机制。之前 Scala 插件必须使用私有 API 和反射来真正侵入 JDT 内部以欺骗系统正常运行，而现在它能够简单地声明其扩展点并让系统完成其余的工作。甚至很难描述这使事情变得更加稳定。我并不是说这一切都是阳光和玫瑰，但如果你过去曾尝试并拒绝过该插件（就像我一样），它'

至于它是如何堆叠功能的，SDT 没有任何重构支持（IntelliJ 有一些基本的东西，比如“重命名”），编辑器也没有做一些事情，比如“标记出现”。但是，它的 Outline 比 NetBeans 好得多，编译器支持比 IDEA 好，而且语义突出非常好。所有三个插件都支持内容辅助（或 Microsoft 所说的“智能感知”），但目前还没有一个插件在该领域特别可靠。用于 Eclipse 的 Scala IDE 是唯一支持增量编译的（所有 Eclipse 的 Java 工具）。

我的建议：货比三家。尝试所有三个，看看哪一个最适合你。据我所知，Eclipse 的 Scala IDE 凭借其最新版本超越了竞争对手，但其他版本显示出如此稳定的稳定性和稳定的进步，以至于您还不能将它们排除在外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T04:47:44.923

这是一个类似的问题： [哪个是 Scala 开发的最佳 IDE？](https://stackoverflow.com/questions/419207/which-is-the-best-ide-for-scala-development)

在我对[Scala IDE for Eclipse](http://www.scala-lang.org/node/94)和[Scala Plugin for Netbeans](http://wiki.netbeans.org/Scala)的短暂体验中，Netbeans 插件似乎比 Eclipse 插件更可靠一些。

使用 Scala IDE for Eclipse 时，我在运行 Hello World 类型的 Scala 对象时遇到了问题，有时语法高亮会开始起作用。然后，我试用了 Netbeans 插件，它似乎比 Eclipse 的功能更强大。

两个Scala IDE插件我都没有深入使用过，所以不能多说经验，但是从我的第一印象来看，Netbeans插件似乎比Eclipse稳定一点一。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T06:07:13.813

目前，所有三个主要 IDE 都处于大致相同的支持级别。

*   IntelliJ - 该插件有一些根本不工作，但在其他方面非常好。自 v8 以来，底层平台运行缓慢（至少在 linux 中）。
*   Eclipse - 该插件得到了很多支持，并且正在积极开发中。
*   NetBeans - 恕我直言，该插件比 Eclipse 工作得好一点，但不能运行任意文件是一个主要的缺点。

以上所有问题都无法在所有上下文中解析 A​​ST。例如，通过将特征与隐式定义混合在一起很容易混淆它们。当 IDE 提示语法错误时，它是不可信的。回退到编译器来确定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-05T07:08:03.967

我很高兴使用 IntelliJ IDEA 8.1 及其[Scala 插件](http://www.jetbrains.net/confluence/display/SCA/Scala+Plugin+for+IntelliJ+IDEA)，并且可以推荐它。它甚至有一个[路线图](http://www.jetbrains.net/confluence/display/SCA/Scala+Plugin+roadmap)，您可以通过投票来影响您最喜欢的缺失功能:) 不幸的是，我没有其他 IDE 的 Scala 支持经验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T06:08:54.417

我正在使用 Eclipse Scala 插件。它相当不错，但与 Java 工具不同。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-02-15T11:34:56.867

至于intelliJ，不知道。但是在 Eclipse 和 Netbeans 之间，我必须说 Netbeans，特别是如果你不愿意用 maven 换 sbt 并且你想要一个不会妨碍 maven 的 IDE。

Netbeans maven 支持太好了。

Netbeans scala 编辑器似乎也能很好地工作。我不关心 netbeans 中的集成 scala 开发工具包或编译器插件，或任何此类帮助程序。从 netbeans 我只期望三件事：（a）不要妨碍 maven，让 maven 运行我的构建（b）给我一个像样的编辑器（c）让我从我的 .scala 文件深入到源代码我的 Maven 依赖项引用的库。

我相信，Netebeans 能够很好地提供这三个方面，即使有时感觉有点太慢了。

我能说的是（1）你不会遇到任何编译问题，因为任务取决于 maven。maven 编译器插件有点太慢了。但是编译scala vs java总是这样，很痛苦。不过，如果您尝试过 GWT 将 java 编译为 javascript，甚至会更加痛苦。

(2) Netbeans 完美地为您找出 maven 依赖项的源代码，您可以深入了解最晦涩的 sacala 运算符，例如 lift 的 CSS 映射器。

至于eclipse，eclipse maven集成一直很讨厌。如果您有一个包含太多依赖项和模块的大项目，Netbeans maven 集成可能会变得非常糟糕。然后，netbeans 对外部更改的检查非常缓慢。这是netbeans的缺点。

但是，如果您是 SBT 的粉丝……好吧，那么答案可能是别的东西。

但对我来说，既然 maven 已经成为今天的样子，我再也不想回到那些“Web 应用程序项目”、“库项目”等......当你在IDE。我只是想要“maven 项目”，请通过阅读 pom.xml 来弄清楚我的输出工件是什么。

# vb.net - 如何在 VB.NET 2005 应用程序中获取键盘按键值？

> ID：796269
> 
> 赞同：0
> 
> 时间：2009-04-28T04:44:15.307
> 
> 标签：vb.net, keyboard

Hai 如何从 vb.net 2005 中的应用程序中获取键盘按键值。我尝试在 Application Active 中工作的表单 keydown 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T05:22:26.260

我对帮助“做间谍软件”的人犹豫不决，但听起来你正在尝试创建一个[低级键盘挂钩](http://blogs.msdn.com/toub/archive/2006/05/03/589423.aspx)。代码项目有一个[示例应用程序和代码](http://www.codeproject.com/KB/cs/CSLLKeyboardHook.aspx)。

# javascript - PrototypeJS：选择可见元素

> ID：796273
> 
> 赞同：3
> 
> 时间：2009-04-28T04:45:46.223
> 
> 标签：javascript, css-selectors, prototypejs

我正在尝试制定一个选择器来选择一组可见元素。我们的应用程序使用 Prototype JavaScript 框架，版本 1.6.0.3。

我正在使用的标记如下：

```
<ul>
    <li style="display:none;">1 Hidden</li>
    <li style="display:none;">2 Hidden</li>
    <li style="">3 Visible</li>
    <li style="display:none;">4 Hidden</li>
    <li style="display:none;">5 Hidden</li>
    <li style="display:none;">6 Hidden</li>
    <li>7 Visible</li>
    <li style="">8 Visible</li>
</ul> 
```

如您所见，某些元素*可能*具有样式属性，但只有隐藏的元素包含字符串“display:none;”。我需要选择可见的`<li>`元素，其中可见性定义为“不包含显示：无”。

我已经尝试过：

```
var visibleItems = $$('li[style*="display:none"]'); // Yields: [ ]
var visibleItems = $$('li[style*="display"]'); // Yields: [li, li, li, li, li], but isn't specific enough 
```

想法？理想情况下，我希望它尽可能紧凑，但我会尽我所能。

是的，我知道[jQuery 可以做到这一点](http://docs.jquery.com/Selectors/visible)，但我不想在这个应用程序中引入另一个框架，因为其中大部分已经依赖于 Prototype。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T05:34:03.393

[您可以使用findAll](http://www.prototypejs.org/api/enumerable/findAll)函数过滤项目：

```
var notVisible = $$('li').findAll(function(el) { return !el.visible(); }); 
```

# spring - Spring 在设置属性之前调用对象构造函数

> ID：796277
> 
> 赞同：2
> 
> 时间：2009-04-28T04:48:38.057
> 
> 标签：spring, configuration

我有一个抽象类 Foo，它有一个名为 Bar 的非抽象方法。我有一个类 Baz 扩展 Foo 并有自己独特的构造函数。默认情况下，当 Spring 在启动时实例化 Baz 类时，它会在将值传递给父类的方法 Bar 之前调用 Baz 构造函数。

有没有办法覆盖这种行为，所以 Bar 将在 Baz 的构造函数之前被调用？或者，如果我需要以某种方式扩展 Spring 的默认行为，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-29T00:01:09.440

您可以考虑用 afterPropertiesSet 方法替换构造函数中的逻辑。请参见[InitializingBean 接口](http://static.springframework.org/spring/docs/2.5.x/api/org/springframework/beans/factory/InitializingBean.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T04:56:02.407

在我看来，您所描述的就是 Java 设计的工作方式。在您可以调用该实例上的任何方法之前，必须完全构造对象（通过构造函数）。

我的 spring 代码很少使用构造函数，因为它们不是很好。我已经开始使用带有 @PostConstruct 注释的一些方法，这可能更适合您的需求。

# visual-c++ - 如何将控件从 MFC 窗体的底部移动到顶部？

> ID：796285
> 
> 赞同：2
> 
> 时间：2009-04-28T04:52:50.713
> 
> 标签：visual-c++, mfc

在 VC++ 6.0 (MFC) 中，控件（例如：Button、EditBox 和 Static Text）如何从窗体底部移动到窗体顶部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T04:55:29.600

您可以使用 CWnd::MoveWindow() 来移动控件。CWnd::GetDlgItem() 将检索给定控件 ID 的 CWnd。

要从作为控件父窗口的类内部调用的一些伪代码：

```
RECT windowRect;
GetClientRect( &windowRect );// Bounds of the current window

CWnd* controlWindow = GetDlgItem( controlId );
RECT controlRect;
controlWindow->GetWindowRect( &controlRect );//control rectangle
ScreenToClient( &controlRect );//control rectangle in the coordinate system of the parent

const int vertOffset = windowRect.top - controlRect.top;//how much to adjust
controlRect.top += vertOffset;
controlRect.bottom += vertOffset;
controlWindow->MoveWindow( &controlRect ); 
```

# wpf - 如何从 XAML 中为样式中的控件指定工具提示？

> ID：796290
> 
> 赞同：14
> 
> 时间：2009-04-28T04:57:01.983
> 
> 标签：wpf, datagrid, tooltip

我正在使用 Microsoft CodePlex 项目中的 WPF 数据网格。我有一个自定义控件，我想将数据绑定到数据网格行中的字段。我一生都无法弄清楚如何在数据网格行上指定工具提示。

我最接近的是使用带有 Setter 的 RowStyle 来设置工具提示，但这似乎只适用于文本。当我尝试将 ControlTempalte 作为 ToolTip 的值时，它会显示在 ControlTemplate 类型上调用 ToString 的结果。

我想我需要设置工具提示的“模板”属性，但我似乎无法弄清楚如何做到这一点......

```
 <dg:DataGrid Name="dgResults" AutoGenerateColumns="True">

            <dg:DataGrid.RowStyle >

            <Style TargetType="{x:Type dg:DataGridRow}">

                <Setter Property="ToolTip"  >
                    <Setter.Value>

                        <ControlTemplate TargetType="{x:Type ToolTip}">
                           <StackPanel>
                                 <TextBlock>txt1</TextBlock><TextBlock>txt2</TextBlock>
                           </StackPanel>
                        </ControlTemplate>

                    </Setter.Value>
                </Setter>
            </Style>

        </dg:DataGrid.RowStyle>

  </dg:DataGrid> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-28T09:20:46.373

想通了...花了我大约6个小时...

出于某种原因，我无法直接使用 Value.Setter 设置值。如果我将工具提示的内容定义为静态资源，然后在 DataGrid.RowStyle 的 Style 属性中设置它，它就可以工作。

因此，datagrid 行样式如下所示：

```
 <Style TargetType="{x:Type dg:DataGridRow}">

                <Setter Property="ToolTip" Value="{StaticResource resKWIC}">
                </Setter>                 
            </Style>

        </dg:DataGrid.RowStyle> 
```

资源是

```
<Window.Resources>
    <StackPanel x:Key="resKWIC">
        <TextBlock>f1</TextBlock>
        <TextBlock>f2></TextBlock>
    </StackPanel>
</Window.Resources> 
```

谢谢！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-03-12T00:06:13.200

关键是使用属性 ToolTipService.ToolTip，而不是 ToolTip - 像这样：

```
<Setter Property="ToolTipService.ToolTip" Value="My Tooltip"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T15:16:24.220

我也做了一些改变。包括它可以帮助某人。

我的 Datadrid 绑定到自定义对象列表，我想将字符串“Name”显示为列，并在工具提示中显示字符串“text”。对我（新手）来说，诀窍是我必须包含文本列并将其隐藏以使其显示在工具提示中，即：

```
<DataGrid AutoGenerateColumns="False" CanUserAddRows="False" EnableRowVirtualization="False" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" IsReadOnly="True" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" Name="dgrTextGroupText" VerticalContentAlignment="Stretch" Grid.Column="3" Grid.Row="1" Grid.RowSpan="6" CanUserReorderColumns="False" CanUserSortColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Name}" Width="*" />
        <DataGridTextColumn Binding="{Binding Text}" Width="0" Visibility="Hidden" />
    </DataGrid.Columns>
    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=DataContext.text}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:16:40.383

没有必要`ControlTemplate`。如果您想要`StackPanel`in `ToolTip`，只需将其设置为：

```
<Setter Property="ToolTip">
    <Setter.Value>
        <StackPanel>
            <TextBlock>txt1</TextBlock><TextBlock>txt2</TextBlock>
        </StackPanel>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T08:34:40.243

不确定您是否可以通过 XAML 做到这一点。

一种更简单的方法可能是只处理 LoadingRow 事件。在 xaml 中有类似的东西：

```
<dg:DataGrid Name="dgResults" AutoGenerateColumns="True" 
             LoadingRow="dgResults_LoadingRow" 
             ItemsSource="{Binding ListOfStrings}" /> 
```

然后在后面的代码中

```
void dgResults_LoadingRow(object sender, DataGridRowEventArgs e)
{
    DataGridRow row = e.Row;
    row.ToolTip = row.DataContext as string;
} 
```

显然，您必须根据在数据网格中填充数据的方式更改代码。这也是未经测试的=）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-04-25T13:34:19.073

我需要根据单元格内容动态设置工具提示。我正在使用工具提示来显示单元格中的文本溢出文本。下面的绑定来自名为 CellText 的 ac# 类属性。感谢上面的帖子让我避免自己弄清楚整个事情。

```
<DataGridTextColumn Header="HeaderText" Binding="{Binding DisplayText, Mode=OneWay}" Width="33*">
                            <DataGridTextColumn.CellStyle>
                                <Style>
                                    <Setter Property="ToolTipService.ToolTip" Value="{Binding DisplayText, Mode=OneWay}"/>
                                </Style>
                            </DataGridTextColumn.CellStyle>
                        </DataGridTextColumn> 
```

# sql - 我们可以通过一个查询从五个具有共同 id 的表中获取数据吗？

> ID：796299
> 
> 赞同：2
> 
> 时间：2009-04-28T05:02:14.437
> 
> 标签：sql, mysql, join

我想从一个查询中获取五个具有共同 id 的表的数据，我们可以这样做吗？

例如 tbl_student,tbl_batch,tbl_section,tbl_level,tbl_faculty 都有一个共同的 id college_id

如何通过一个查询获取所有表的值

如果有人可以帮助我，我会很感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T05:05:28.220

如果我理解正确的话，这听起来像是一个[join](http://en.wikipedia.org/wiki/Join_(SQL))。

```
select * from tbl_student st 
join tbl_batch ba on ba.college_id=st.college_id
join tbl_section se on se.college_id=st.college_id
join tbl_level le on le.college_id=st.college_id
join tbl_faculty fa on fa.college_id=st.college_id 
```

这很可能不是您想要获取数据的方式，因为数据模型没有多大意义。希望你能明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T05:53:02.800

```
SELECT fields FROM table1
  LEFT JOIN table2 ON table1.id = table2.id
  LEFT JOIN table3 ON table1.id = table3.id
  LEFT JOIN table4 ON table1.id = table4.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T14:26:54.407

你可以这样做，但它没有多大意义。

您的 SQL 查询返回一个二维表，其中每一行都有相同的列。如果您的一些行是学生，其中一些是学院，那么会有一堆对学生有意义但对学院没有意义的列，对于学院行，这些列应该为空。

对两个表执行此操作的 SQL 是：

```
SELECT t_F.college_id AS college_id, t_F.f_1, t_F.f_2, NULL   , NULL
    FROM tbl_Faculty AS t_F
UNION
SELECT t_S.college_id AS college_id, NULL   , NULL   , t_S.s_1, t_S.s_2
    FROM tbl_Student AS t_S
ORDER BY college_id 
```

然后您的结果将如下所示：

```
学院| 教师领域 1 | 2 | 学生领域 1 | 2
-------------------------------------------------- ------------
1 | 美国广播公司 | 定义 | 空 | 空值
1 | 美国广播公司 | 吉 | 空 | 空值
1 | 空 | 空| 阿多伊贾斯 | aosdifjasdf
1 | 空 | 空| 阿多伊贾斯 | aosdifjasdf
2 | abc321 | 啊！空 | 空值
2 | abc456 | bbb | 空 | 空值
2 | 空 | 空| afasdfafs | aosdifjasdf
2 | 空 | 空| 阿多伊贾斯 | aoffavsdfff

```

这对我来说没有多大意义。

# javascript - 如何监控隐藏输入元素的值？

> ID：796307
> 
> 赞同：2
> 
> 时间：2009-04-28T05:10:49.143
> 
> 标签：javascript, html, javascript-events

我有一个 SELECT 元素，每次单击 OPTION 时，它都会通过 Javascript 将其值添加到隐藏的 INPUT 中（以及每个选择的可视化表示），并且我希望能够监视另一个 Javascript 函数的更改。为了模块化，我不能将第二个功能集成到第一个功能中。我也宁愿不轮询隐藏的输入值以避免黑客攻击。目前，我在包含 SELECT 和隐藏的 INPUT 的 DIV 上使用 onclick 事件，但这也很 hack-ish。你知道一种方法来监控隐藏的 INPUT 元素的变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T05:15:26.540

所以你有了：

*   函数 A，它更新隐藏的 INPUT。
*   函数 B，应在更新 INPUT 时调用。

为什么不创建一个您自己的“事件”，该函数 A 在完成工作时调用/调度它？

我相信大多数 Javascript 框架很容易支持自定义事件的概念，但这只是一系列函数调用。

例如，创建一些对象 D，它代表单个事件的调度程序。是的，这很愚蠢，但我试图让这个概念保持简单。该对象 D 包含一个已为其事件“注册”的函数列表，当事件被调度时，它会调用这些函数。

就像是：

```
var d = (function() {
    var funcs = [];

    function fire() {
        for (var i=0; i<funcs.length; ++i) {
          funcs[i].call();
        }
    }

    function register(newfunc) {
        funcs.push(newfunc);
    }    

    return {
        fire: fire,
        register: register
    };
})(); 
```

你只剩下两件事要做 - 让函数 A 触发事件：

```
function A() {

    // do stuff to update the INPUT

    d.fire();
} 
```

还有`onload`，“注册”函数 B 在事件发生时被调用：

```
d.register(B); 
```

这种方法保持了模块分离原则（或任何所谓的），因为 A 和 B 彼此一无所知，只需要知道第三个对象。

# java - Java问题，如何从未知对象中获取方法的值

> ID：796312
> 
> 赞同：1
> 
> 时间：2009-04-28T05:14:30.927
> 
> 标签：java, dynamic, methods

我在系统中定义了很多对象，可能有 1000 个对象，其中一些具有这种方法：

```
public Date getDate(); 
```

无论如何我可以做这样的事情：

```
Object o = getFromSomeWhere.....;

Method m = o.getMethod("getDate");
Date date = (Date) m.getValue(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-28T05:27:53.533

如果你*能让*它们都实现一个接口，那肯定是最好的选择。但是，反射也将起作用，并且您的代码几乎就在那里：

```
Object o = getFromSomeWhere.....;
Method m = o.getClass().getMethod("getDate");
Date date = (Date) m.invoke(o); 
```

（诚​​然，您需要处理许多例外情况......）

一个完整的例子：

```
import java.lang.reflect.*;
import java.util.*;

public class Test
{
    public static void main(String[] args) throws Exception
    {
        Object o = new Test();
        Method m = o.getClass().getMethod("getDate");
        Date date = (Date) m.invoke(o);
        System.out.println(date);
    }

    public Date getDate()
    {
        return new Date();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T05:34:31.223

试试这个：

```
Object aDate = new Date();
Method aMethod = aDate.getClass().getMethod("getDate", (Class<Void>[]) null);
Object aResult = aMethod.invoke(aDate, (Void) null); 
```

您应该在调用之前添加 try-catch 以确定是否确实存在方法 getDate。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T05:23:40.953

如果有接口需要 getDate() 方法，您可以使用以下代码进行检查：

```
if (o instance of GetDateInterface){
    GetDateInterface foo = (GetDateInterface) o;
    Date d = foo.getDate();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T05:29:22.530

为了完成其他答案，我还将识别具有接口的类。我就是这样做的

```
import java.util.Date;

interface Dated {
  public Date getDate();
  public void setDate(Date date);
}

class FooObject implements Dated {
  private Date date;
  public void setDate(Date date) { this.date = date; }
  public Date getDate() { return date; }
  // other code...
}

public static void main (String[] args) {
  Object o = getRandomObject(); // implemented elsewhere
  if (o instanceof Dated) {
    Date date = ((Dated)o).getDate();
    doStuffWith(date);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T12:41:28.077

如果你不介意额外的依赖，BeanUtils 可以为你做这件事。

# c++ - 何时使用 boost 线程连接功能？

> ID：796313
> 
> 赞同：3
> 
> 时间：2009-04-28T05:14:32.363
> 
> 标签：c++, boost, join

我最近设法使用 boost::bind 函数创建了一个线程。

目前，我正在将线程显示到标准输出。如果我使用 thread.join，我可以看到输出。但是，如果我不这样做，我看不到任何输出。

为什么是这样？

我希望我不必使用 join 函数，因为我想多次调用此函数，而不必等待先前启动的线程完成。

感谢您的回复。我真正想确定的是线程实际执行了。所以我添加了一个系统调用来触摸一个不存在的文件，然后它就在那里，所以线程确实执行了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T05:51:54.783

默认情况下，线程对象的析构函数不加入主线程，是否是您的主线程在线程设法刷新其输出之前终止并关闭 STDOUT？

请注意，在 C++0x 中，线程的默认析构函数*会*加入（而不是像 boost 中那样分离），因此不会发生这种情况（请参阅[A request to reconsider detach-on-destruction for thread objects](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2802.html)）。

**注意：**由于这是编写的，因此 C++11 标准已更改，未加入的线程现在终止该进程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T05:26:23.457

> 如果我使用 thread.join，我可以看到输出。但是，如果我不这样做，我看不到任何输出。为什么是这样？

这很可能是标准输出在您的系统上缓冲方式的副作用。您是否在每个印刷声明中都有`'\n'`和/或`endl`散布？那应该强制输出（`endl`另外会刷新流）。

如果您查看 的文档[`join`](http://www.boost.org/doc/libs/1_38_0/doc/html/thread/thread_management.html#thread.thread_management.thread.join)，您会看到调用此函数以等待线程终止。当一个线程终止（或就此而言，一个进程）时，所有缓冲的输出都会被刷新。

您无需等到线程完成执行才能查看输出。至少有几种方法（我记得我的头顶）你可以实现这一点：

*   制作`cout`/`stdout`无缓冲，或
*   使用`\n`and `fflush(stdout)`（用于 C 风格的 I/O）或`std::endl`流操纵器

# sql - 更新重复的 varchars 在 SQL 数据库中是唯一的

> ID：796316
> 
> 赞同：3
> 
> 时间：2009-04-28T05:14:56.200
> 
> 标签：sql, database, unique, duplicates

我需要更改数据库以在表列上添加唯一约束，但其中的 VARCHAR 数据不是唯一的。

如何通过在现有数据的末尾添加序列号来更新这些重复记录，以便每个值都是唯一的？

例如，我想将 'name' 更改为 'name1'、'name2'、'name3'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-09T04:18:56.810

以下是使用 MS SQL SERVER 风格的 sql 的 2 个示例。

设置示例：

```
create table test (id int identity primary key, val varchar(20) )
    --id is a pk for the cursor so it can update using "where current of"

-- name a is not duplicated
-- name b is duplicated 3 times
-- name c is duplicated 2 times

insert test values('name a')
insert test values('name b')
insert test values('name c')
insert test values('name b')
insert test values('name b')
insert test values('name c') 
```

Sql 2005\2008：（计算表表达式）

```
begin tran; -- Computed table expressions require the statement prior to end with ;

with cte(val,row) as (

    select val, row_number() over (partition by val order by val) row
    --partiton is important. it resets the row_number on a new val
    from test 
    where val in ( -- only return values that are duplicated
        select val
        from test
        group by val
        having count(val)>1
    )
)
update cte set val = val + ltrim(str(row))
--ltrim(str(row)) = converting the int to a string and removing the padding from the str command.

select * from test

rollback 
```

Sql 2000：（光标示例）

```
begin tran

declare @row int, @last varchar(20), @current varchar(20)
set @last = ''
declare dupes cursor
    for
    select val 
    from test 
    where val in ( -- only return values that are duplicated
        select val
        from test
        group by val
        having count(val)>1
    )
    order by val

    for update of val

open dupes
fetch next from dupes into @current
while @@fetch_status = 0
begin
    --new set of dupes, like the partition by in the 2005 example
    if @last != @current
        set @row = 1

    update test
        --@last is being set during the update statement
        set val = val + ltrim(str(@row)), @last = val
        where current of dupes

    set @row = @row + 1

    fetch next from dupes into @current
end
close dupes
deallocate dupes

select * from test

rollback 
```

我回滚了每个更新，因为我的脚本文件包含这两个示例。这使我可以在不重置表格行的情况下测试功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T17:32:02.997

在表上打开一个游标，按该列排序。保留前一个值变量，初始化为 null，索引变量初始化为 0。如果当前值 = 前一个值，则递增索引并将索引附加到字段值。如果当前值 <> 前一个值，则将索引重置为 0 并保持字段值不变。设置前一个值变量 = 当前值。移动到下一行并重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T05:21:51.910

你用的是什么数据库？

在[Oracle](http://www.psoug.org/reference/OLD/constraints.html)中有一个：

NOVALIDATE 验证更改但不验证表中先前存在的数据

例子：

```
ALTER TABLE <table_name> ENABLE NOVALIDATE UNIQUE; 
```

如果您不使用 Oracle，请检查相应数据库的 SQL 参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T05:46:59.227

您可以向其中添加另一列...例如

```
update mytable set mycolumn = concat(mycolumn, id) 
            where id in (<select duplicate records>); 
```

将 id 替换为使 mycolumn 唯一的任何列

# python - 与 Python 相比，Shell 脚本的优势

> ID：796319
> 
> 赞同：104
> 
> 时间：2009-04-28T05:16:18.147
> 
> 标签：python, shell

我试过几次学习 shell(bash) 脚本，但被语法赶走了。然后我找到了 Python，并且能够完成大多数 shell 脚本在 Python 中可以完成的事情。我现在不确定是否应该再花时间学习 shell 脚本。所以我想问：

与 Python 相比，shell 脚本的哪些优势使其成为不可或缺的工具？

我不是专业的系统管理员，但我有兴趣为家庭用户设置 Linux 系统，因此我认为学习 shell 脚本可能是必要的。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-04-28T05:32:10.543

*   Shell 脚本具有更简单的 I/O 重定向符号。
*   从 shell 中的现有程序创建管道更简单。
*   Shell 脚本重用整个程序。
*   Shell 是普遍可用的（在 Unix 之类的任何东西上） - 不一定安装 Python。

'这是真的，你可以在 Python 中做你可以在 shell 中做的所有事情；这也是事实，有些事情在 Python 中很容易，但在 shell 中很难（就像有些事情在 shell 中很容易，但在 Python 中很难）。从长远来看，两者都知道是最好的。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-04-28T11:07:43.840

**“与 Python 相比，shell 脚本的哪些优势使其成为不可或缺的工具？”**

外壳不是必不可少的。为什么你认为有这么多？bash，tcsh，csh，sh等，等等，

Python*是*一个外壳。不是用于运行*所有*命令的命令，而是用于编写脚本的命令，它是理想的。

Python 或多或少是所有 Linux 发行版的标准部分。

更传统的 shell 做了太多的事情。

1.  他们有一个方便的用户界面来运行命令。这包括 shell 搜索您的 PATH、fork 和执行请求的程序的单行命令。它还包括管道、序列和并发程序（使用`;`和）`|`以及`&`一些重定向（使用`>`和`<`）。

2.  它们具有用于运行脚本的糟糕的、类似于编程语言的能力。这种语言相当难以使​​用并且效率极低。这种语言中的大多数语句都需要分叉一个或多个额外的进程，浪费时间和内存。

从 shell 运行程序，将 stderr 重定向到日志文件，这样的事情很好。在外壳中执行此操作。

几乎所有其他事情都可以作为 Python 脚本更有效、更清晰地完成。

**你需要两者**。但是，您永远不应该使用传统的 shell 语言编写带有 if 语句或循环的脚本。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2009-05-02T08:29:36.150

Shell 使常见和简单的操作变得非常简单，但代价是使更复杂的事情变得更加复杂。

通常，一个小的 shell 脚本会比相应的 python 程序更短更简单，但是 python 程序会倾向于优雅地接受修改，而 shell 脚本会随着代码的添加而变得越来越难以维护。

这样做的结果是，为了获得最佳的日常工作效率，您需要 shell 脚本，但您应该主要将它用于一次性脚本，并在其他任何地方使用 python。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-04-28T05:32:27.810

没有什么是你不能用 python 做的 shell 脚本。shell 脚本的最大优势在于您使用与使用 shell 时相同的命令，因此，如果您是 shell 的重度用户，shell 脚本在某些时候将成为自动化您的 shell 工作的一种非常快速和简单的方法.

我还发现在 shell 脚本中处理数据管道比在 python 中更容易，尽管它在 python 中是绝对可行的。

最后，您不必启动额外的解释器来运行 shell 脚本，这给您一个非常小的，但有时可能是显着的速度和内存使用优势。

但是话又说回来，Python 脚本更易于维护，出于这个原因，我正试图从又大又丑的 shell 脚本迁移到 Python 脚本。使用 Python 进行异常处理和 QA 也更容易。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-06-19T06:35:17.500

正如所有先前的答案所表明的那样，不必学习shell脚本；但学习从来都不是坏事。这确实是个人优先事项的问题。别人很难告诉你什么值得你花时间。

大多数程序员发现每次学习新语言都会变得越来越容易。（自然语言也是如此。）越早开始越好。

加：学过一门语言可以让你从完全的知识和熟悉的位置上奢侈地消除它的局限性。这可能不会让你上床，但可能会让你从同龄人那里赢得啤酒！

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2011-02-12T20:51:10.727

我同意前面的大部分答案。我认为 shell 命令最适合执行面向文件系统的任务（复制和移动文件、grep 等）。在我看来，Shell 更好，如果您必须读取和写入文件，因为单个`>>file.txt`重定向会立即附加到文件，而不是需要，比如说`file=open('file.txt','a'); file.write()`，等等。

目前，为了我个人的使用，我将两者混合使用，创建一个 python 脚本并调用 os.system('command') 或 os.popen('command') 每次在 shell 中执行某些操作比在 python 中更容易。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-04-28T05:33:20.383

外壳随处可见。如果你坚持一套相对基本的便携功能，你的脚本可以在手机、无线路由器、DVR、上网本、工作站、大型服务器等类似设备上运行。在许多系统中，Python 不一定是开箱即用的，并且根据环境的不同，可能很难安装它。

学习一些 shell 脚本也可以帮助你学习一些命令行技巧，因为命令行就是 shell。它也适用于使用一些相当长且复杂的命令行，并在您意识到您将需要它之后将其转换为更通用的脚本。

shell 还有一些非常强大的功能；据我所知，管道是一个非常有趣的控制结构，它仅适用于 shell。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-02-08T06:38:45.903

选择 Python 的 shell 脚本时要考虑的另一件事是将在目标机器上运行的 Python 版本。RHEL5（仅举一个例子）将会存在很长时间。RHEL5 卡在 Python 2.4 上。有很多不错的库依赖于 Python post-2.4 添加的功能。

# c++ - 奇怪的 C++ std::string 行为......我该如何解决这个问题？

> ID：796321
> 
> 赞同：1
> 
> 时间：2009-04-28T05:16:26.587
> 
> 标签：c++, string

这让我发疯了。我已经研究了2个多小时试图解决这个问题......

这是我的问题。我正在开发一个与贝叶斯网络一起使用的相当大的程序。这是主要功能：

```
using namespace std;

int main()
{  
    DSL_network net;
    initializeNetwork(net); 
    setEvidence(net);
    net.SetDefaultBNAlgorithm(7);
    net.SetNumberOfSamples(80000);
    cout << "Samples:\t" << net.GetNumberOfSamples() << endl;
    updateEvidence(net);
    //net.WriteFile("test.dsl");
    return(DSL_OKAY);
} 
```

这一切都很好。当我想打印一个字符串时，问题就来了：

```
using namespace std;

int main()
{  
    //simple string creation
    string a = "test";
    //should print out "test"
    cout << a << endl;
    DSL_network net;
    initializeNetwork(net); 
    setEvidence(net);
    net.SetDefaultBNAlgorithm(7);
    net.SetNumberOfSamples(80000);
    cout << "Samples:\t" << net.GetNumberOfSamples() << endl;
    updateEvidence(net);
    //net.WriteFile("test.dsl");
    return(DSL_OKAY);
} 
```

这是输出（仅来自打印字符串 a...）：

   ▀ÇΦy♠≈6 ♦</p>

会发生什么？

更新：

```
int main()
    {  
        //simple string creation
        string a = "test";
        //should print out "test"
        cout << a << endl;
        return(DSL_OKAY);
    } 
```

仍然打印

```
▀ÇΦy♠≈6 ♦ 
```

***大更新：*** 这是最近的。我创建了一个全新的项目并粘贴了 Neil Butterworth 发布的代码（谢谢顺便说一句）。我运行了代码，它打印正确。然后我将这两个 .lib 文件添加到新项目的链接器中（smile.lib 用于 SMILE 库，wsock32.lib 用于套接字。）

我再次尝试了代码，它正确打印了第一个“测试”，然后打印了乱码。这是我链接在一起的一个 .lib 的问题。我自己尝试了每一个，看看它们是否只是冲突，似乎是 Smile.lib 库导致了这个问题。我需要查看他们的文档并找出原因。

有任何想法吗？

谢谢大家的帮助

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-28T05:22:46.790

这很奇怪。我总是喜欢将问题分解为最小的情况。下面的程序在你运行时做了什么？

```
using namespace std;
int main() {  
    string a = "test";
    cout << a << endl;
    return 0;
} 
```

如果这有效，那么还有其他问题，您需要一次添加一行，直到它失败。*然后非常*仔细地检查那条线（“我在狩猎 wabbits”）。

根据您的编辑，它可能是正在使用的不同字符串类。试试这个：

```
int main() {  
    std::string a = "test";
    std::cout << a << std::endl;
    return 0;
} 
```

**更新：**

由于它适用于新项目而不是当前项目，请检查以下内容。

*   确保您与标准 C++ 运行时链接。
*   确保您没有将#define`string`定义为其他内容（并且包括`-Dstring=somethingelse`编译器的命令行选项）。
*   检查使用的行为`std::string`，而不仅仅是`string`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T05:51:54.567

也试试这个：

```
int main()
    {  
        //simple string creation
        string a = "test";
        const char* cStr = a.c_str();
        //should print out "test"
        cout << cStr << endl;
        return(DSL_OKAY);
    } 
```

如果该`const char*`行没有导致编译器错误，那么我们知道这`std::str`是一个 8 位字符串。如果`cout`不会导致编译器错误，那么我们知道它`cout`是为 8 位字符定义的。（如果程序产生相同的结果，那么我们仍然感到困惑：-}

**编辑**（根据您在下面的评论）：我注意到“测试”的错误输出可以达到 9 个字符——“▀ÇΦy♠≈6 ♦”。尝试其他“测试”字符串，例如，哦，“retest”或“foo”。我怀疑您的输出通常是原始字符串中字符数的 2x 或 2x+1（“retest”为 12 或 13，“foo”为 6 或 7。）这表明您正在输入 16 位字符串进入一个 8 位缓冲区。不过，我不知道你是如何通过编译器的——也许你对 std::string 和/或 cout 有错误或过时的定义？

**编辑2**：我记得我以前在哪里见过这个。几年前，我看到了一个问题，即 DOS 控制台窗口破坏了程序的输出。（我不记得确切的细节，但我认为问题在于 DOS 控制台无法处理 UTF-8 字符集。）如果您在 DOS 窗口中看到此输出（或者，不太可能，如果它是通过管道传输`system()`到另一个程序），然后尝试将其重定向到一个文件，然后使用记事本打开该文件。它可能会起作用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T05:23:16.867

检查是否

*   你有`#include<iostream>`和其他相关的标题包括吗？
*   `net.GetNumberOfSamples()`具有有效值 AND
*   你没有混合`string`和`wstring`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T06:17:30.993

你 100% 的源代码文件是 ASCII 吗？尝试在一些十六进制编辑器中打开它。

尝试在一个全新的文件中输入（而不是复制/粘贴）代码，看看会发生什么。

如果失败了，那么显然你的 cout 有什么东西在修补。你能告诉我们哪些库链接到可执行文件中吗？也许某些东西会关闭标准输出流或类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T05:48:58.707

我建议慢慢删除任何#include，直到找到导致问题的那个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T07:44:57.960

您可以尝试为字符串类型显式指定 std 命名空间。

我建议您尝试这样做的主要原因是，在某些包含的头文件中可能有一个定义，它将字符串替换为其他一些类或定义。添加命名空间应强制不使用宏。

要检查的另一件事是获取写入文件的源代码的已处理列表（或程序集和源列表，如果您想进行一些程序集黑客攻击）并检查它以查看发生了什么。您如果没有别的，可能会在那里找到你的答案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T07:58:38.880

编译并运行以下确切代码；不要添加任何 using 指令。

```
#include <iostream>
#include <string>

int main() {
    std::string s = "test";
    for ( unsigned int i = 0; i < s.size(); i++ ) {
        std::cout << s[i];
    }
    std::cout << "\n";
    std::operator<<( std::cout, s );
    std::cout << "\n";
} 
```

如果循环打印“test”，则表示字符串正常，问题出在输出中。如果第二个“测试”被破坏，那么问题肯定出在输出处理中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T08:13:53.197

将 std::string 转换为 char 字符串是否有效。IE：

```
cout << a << endl; 
```

变成

```
cout << a.c_str() << endl; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T08:48:35.267

您似乎很可能正在混合 wchar 和 char，因此在您的主要固定字符被认为是宽的（2 字节/字符）或一些 unicode，并且您的 cout 库认为它们是简单的 1 字节/字符。我会查看与项目链接的库。

不幸的是，我不确定如何解决这个问题。几乎可以肯定，您可以更改项目的某个设置（不幸的是，我面前没有 VS 2005），但您正在寻找 wchar、t_char 或 unicode 之类的东西。

我很好奇如果你使用会发生什么

```
string a("test"); 
```

而不是直接赋值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-28T10:12:52.160

是否有可能在同一个项目的另一个文件中的某个地方`operator <<`过载？请尝试搜索“ `operator <<`”或“ `operator<<`”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-30T03:12:02.890

建议：

*   `cout.flush`在你之前打电话`cout <<`看看你是否得到奇怪的字符
*   尝试`printf`

# asp.net-mvc - 如何从 URL 中获取 ID？

> ID：796329
> 
> 赞同：0
> 
> 时间：2009-04-28T05:22:45.213
> 
> 标签：asp.net-mvc

我正在使用 asp.net MVC。

我有像 {controller}/Edit/2 这样的编辑页面网址

那么在**查看页面上**，如何从该 URL 获取 ID？

我将放置一个链接以重定向到发送上述 ID 的某个页面。

**编辑** 喜欢

```
<%=Html.ActionLink("name", "Action", "Controller", new{ ID = ? } ) %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T05:38:44.037

您可以从 RouteData 对象中获取它

```
 <%=Html.ViewContext.RouteData.Values["id"].ToString() %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T05:33:37.030

将 ID 放入您的操作方法中的 ViewData 中，然后您的视图可以访问 ViewData 中的值。

控制器：`ViewData["ID"] = id;`

看法：`<%=Html.ActionLink("name", "Action", "Controller", new{ ID = (int)ViewData["ID"]} ) %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-02T10:49:32.590

...在视图中，您在模型中获取信息以显示数据，因此您在模型中有 id，然后您可以获取 id 并通过 id 在 View 中轻松调用 Model：

```
@model IEnumerable<NewsWebsite.Models.Blog>
  foreach (var item in Model)
            {
//your code
@Html.ActionLink("Edit", "Edit", new { id = item.BlogID })

} 
```

或者

您可以像这样从 URL 获取 id：

控制器：

```
public ActionResult Index(int id)
{
    ViewBag.ID = id;
    //Your Code......
    return View(...);
} 
```

看法：

```
@{  
ViewBag.Title = "Index";
var ID = ViewBag.ID;
} 
```

现在您在变量中有一个 ID

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-28T05:25:22.757

我知道两种方法：您可以创建链接并使用“ViewData”属性将链接传递给您的视图，或者您可以强烈键入 ViewPage。

这是一个关于[强输入视图](http://www.squaredroot.com/post/2008/01/07/MVC-Strongly-Type-ViewPages-Without-A-Code-Behind.aspx)的链接。

# crystal-reports - 其他部分永远不会在水晶报表公式字段中执行

> ID：796342
> 
> 赞同：0
> 
> 时间：2009-04-28T05:31:39.343
> 
> 标签：crystal-reports

我有一个简单的水晶语法公式，看起来像这样：

```
if isdate(totext({Absence Details.Return to Work Interview Date})) = true
  and {Absence Details.Return to Work Interview required} = true then
    1
else
    0; 
```

这是公式的实际代码

但是 else 部分永远不会被执行，当条件不正确时，报告只会显示空白。我不确定我在这里做错了什么。

提前致谢。- 阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T12:50:27.510

也许您的字段中有一些空值 - 在这种情况下，水晶只返回空值。然后，您需要“将空值转换为默认值”设置以进行报告或针对空值进行显式测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T06:12:35.687

**编辑：** NM，代码已发布到评论中。看起来不是这个问题。

我的猜测是，假设您已正确调试，您在不应该的地方有一个分号。

```
if {something} = x then
   do something;
else
   do something different; 
```

代替

```
if {something} = x then
   do something
else
   do something different; 
```

这将导致该行为，假设它不会阻塞孤立的 else 子句。但正如评论所说，没有发布真正的代码，我们只能猜测发生了什么。它可能很简单，因为您的评估总是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T06:44:27.047

将 更改`0`为 a`7`并查看它是否实际打印`7`. 一些报告生成工具（我对 Crystal 几乎没有经验，但对其他工具有很多经验）如果字段为零，则会将字段留空 - 这通常有助于通过减少不必要的混乱来阅读报告。

如果`7`'s 打印出来，那就是问题所在，问题是如何让 Crystal 输出实际的 0。

这可能是配置输出字段甚至将其设置为 textual`"0"`而不是 numeric 的问题`0`。

当然，如果没有打印出来`7`，请随时告诉我。

# java - 使用 JPA/Hibernate 注释映射字符串列表

> ID：796347
> 
> 赞同：21
> 
> 时间：2009-04-28T05:33:03.503
> 
> 标签：java, hibernate, jpa, annotations

我想做这样的事情：

```
 @Entity public class Bar {
        @Id @GeneratedValue long id;
        List<String> Foos
    } 
```

并让 Foos 保存在这样的表中：

```
foo_bars (
    bar_id int, 
    foo varchar(64)
); 
```

更新：

我知道如何映射其他实体，但在很多情况下它是矫枉过正的。如果不创建另一个实体或以某个 blob 列中的所有内容结束，我的建议似乎是不可能的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-01-02T03:00:31.977

如果您使用 JPA2，请执行以下操作：

```
@Entity public class Bar {
   @Id @GeneratedValue long id;

   @ElementCollection
   @CollectionTable(name="foo_bars", joinColumns=@JoinColumn(name="bar_id"))
   @Column(name="foo")
   List<String> Foos;
 } 
```

[有关更清晰的示例，请参阅Hibernate Annotations Reference Guide](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association)中的第 2.2.5.3.3 节。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-06-06T18:15:27.807

这在[Hibernate 术语](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/#d0e2770)中是“值的集合”或“元素”。它有一个（Hibernate 特定的）注释。JPA 不支持这个（还）。

简而言之，像这样注释您的集合：

```
@CollectionOfElements
@JoinTable(
        table=@Table(name="..."),
        joinColumns = @JoinColumn(name="...") // References parent
)
@Column(name="...value...", nullable=false) 
```

这将创建具有外键和限制的必要表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-16T16:49:18.313

如果将列表存储为数组，则可以：

```
setFoos(String[] foos); 
```

你可以像这样转换它：

```
setFoos(myList.toArray(new String[myList.size()])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T06:35:04.463

创建一个实体“FooBars”

将属性“Foos”重构为

@OneToMany 列出 Foos

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T13:10:48.613

我认为这就是您所需要的：

```
@Entity 
public class Bar {
    @Id @GeneratedValue long id;

    @OneToMany(mappedBy="bar")   //"bar" = field name in mapping class
    List<FooBar> Foos;
}

@Entity 
public class FooBar {
    @Id @GeneratedValue long id;

    @ManyToOne
    @JoinColumn(name="bar_Id")  
    Bar bar;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-24T14:58:55.160

这里'Foos'是字符串列表，所以它是单向的。我们可以使用@ElementCollection 注解在一个模型类中做到这一点。

```
@Entity 
@Table(name="bar")
public class Bar {

        @Id @GeneratedValue 
        long id;

        @ElementCollection
        @JoinTable(
            name="foo_bars",
            joinColumns = @JoinColumn( name="bar_id")
          )
        @Column(name="foo")
        List<String> Foos;
    } 
```

在 DB bar_id 是 foo_bars 表中的外键

# winapi - 关于 Win32 API 中的 GetTempPath 函数

> ID：796353
> 
> 赞同：1
> 
> 时间：2009-04-28T05:36:21.623
> 
> 标签：winapi

为什么[GetTempPath](http://msdn.microsoft.com/en-us/library/aa364992(VS.85).aspx)总是返回短路径名？有没有办法返回长路径名，而不是随后用[GetLongPathName](http://msdn.microsoft.com/en-us/library/aa364992(VS.85).aspx)转换返回的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T05:43:46.833

`GetTempPath`最有可能返回`TMP`或`TEMP`环境变量的值，它们（至少在 Windows XP 下）通常是根据短路径名定义的。

初始化环境变量时，Windows 似乎会从`HKEY_CURRENT_USER\Environment`注册表项转换为短路径名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T05:47:08.463

为什么不直接获取 TEMP 环境变量的值，而不是使用 GetTempPath？那将是漫长的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:15:17.863

我相信这样做是出于兼容性原因。在较旧的 Windows 版本中，临时路径相对较短。在最新的 Windows 中，这条路径要长得多。许多旧应用程序可能使用固定长度（小长度）的缓冲区来检索临时路径。如果您返回长文件名（现在相对较大） - 您将破坏这个旧程序，因为它们的缓冲区太小而无法容纳。这就是 GetTempPath 返回短路径名的原因。

# java - 使用 Java 的 GPRS 应用程序

> ID：796354
> 
> 赞同：0
> 
> 时间：2009-04-28T05:37:19.483
> 
> 标签：java, gprs

> 我们开发了用 Java/J2EE 编写的应用程序，使用它从服务提供商发送和接收 SMS，目前我们面临的问题是消息有一些延迟，而且对我们来说成本更高。

考虑到上述情况，我们计划转向 GPRS 技术（更便宜且速度更快）。

因此，请建议我可以开始的操作过程，并在 Java 中发布任何支持 GPRS 的系统的示例应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T05:54:29.333

使用 GPRS，您需要在移动设备中运行客户端应用程序。这对开发、部署和支持来说意味着很多麻烦。此外，尽管客户端发送消息是微不足道的，但接收不会那么简单。您需要实现某种“推送”服务。问题之一是客户端应用程序应该始终运行。

一般来说，用 GPRS 通信代替 SMS 消息并不容易。您可能需要大幅更改系统架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-05T07:29:59.387

要使用 java 制作 GPRS 应用程序，您必须需要 GPRS 调制解调器。首先，您必须制作一个容器来处理 GPRS 调制解调器和您的 API 的请求和重放。API 包含私有 ip 和端口号，它们将请求发送到容器和容器，然后将请求发送到 modelm，调制解调器将响应容器并将其发送回 API。

通过使用 methd Socket("IP Address", port number) 您可以连接容器和调制解调器。

您必须需要一个公共 IP 地址和端口号，它会在调制解调器和容器之间创建虚拟管道，就像 telnet 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-22T09:08:45.623

使用 GPRS 而不是 GSM 来发送 SMS*不会*导致 SMS 发送更快。你找错树了。

# sql - object_id() 与 sys.objects

> ID：796356
> 
> 赞同：3
> 
> 时间：2009-04-28T05:38:23.523
> 
> 标签：sql, sql-server-2005, stored-procedures, sql-scripts

我使用数据库脚本检查是否存在存储过程，然后删除它然后创建它。

**以下哪项对于检查和删除 SP选项 1**更有效

 **```
IF EXISTS(SELECT * FROM sys.objects WHERE OBJECT_ID = OBJECT_ID(N'[dbo].[myStoredProc]',N'P'))
  DROP PROCEDURE dbo.myStoredProc; 
```

**选项 2**

```
IF OBJECT_ID (N'dbo. myStoredProc',N'P') IS NOT NULL
  DROP PROCEDURE dbo.myStoredProc; 
```

由于显而易见的原因，我决定使用第二个，有什么理由我应该选择第一个选项

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-16T13:25:04.770

潮流变了。MSDN 的当前策略是应使用 sys.objects 代替 INFORMATION_SCHEMA 视图，因为 sys 视图比后者具有更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T05:46:18.900

不，没有令人信服的理由直接使用 sys.objects。事实上，不鼓励使用这些 sys 视图 - 所以如果你能避免它，那就这样做吧！

相反，应该尽可能使用 INFORMATION_SCHEMA 模式视图 - 这是一种标准 SQL-92 机制，用于公开有关您的服务器的元数据（而不是 Microsoft 特定的使用 sys.* 视图的方式）。

马克

# sqlite - 多列索引是否也适用于单列选择？

> ID：796359
> 
> 赞同：54
> 
> 时间：2009-04-28T05:40:05.110
> 
> 标签：sqlite, indexing

我有（例如）一个索引：

```
CREATE INDEX someIndex ON orders (customer, date); 
```

这个索引是只加速使用*客户和日期*的查询，还是像这样加速单列的查询？

```
SELECT * FROM orders WHERE customer > 33; 
```

我正在使用 SQLite。

* * *

如果答案是肯定的，为什么每个表可以创建多个索引？

* * *

还有一个问题：当您在查询中使用两个列时，与两个单独的索引相比，组合索引要快多少？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-28T18:56:46.053

marc_s 对您的第一个问题有正确答案。多键索引中的第一个键可以像单键索引一样工作，但任何后续键都不会。

至于复合索引的速度有多快取决于您的数据以及您如何构建索引和查询，但这通常很重要。索引本质上允许 Sqlite 对字段进行二进制搜索。

如果您运行查询，请使用您提供的示例：

```
SELECT * from orders where customer > 33 && date > 99 
```

Sqlite 将首先使用对客户 > 33 的整个表进行二分搜索来获取所有结果。然后它将仅对那些查找日期 > 99 的结果进行二分搜索。

如果您对客户和日期使用两个单独的索引执行相同的查询，Sqlite 将不得不对整个表进行两次二进制搜索，首先是客户，然后是日期。

因此，您将看到多少速度增加取决于您如何构建与查询相关的索引。理想情况下，索引和查询中的第一个字段应该是消除最可能匹配的字段，因为这将通过大大减少第二次搜索必须做的工作量来最大程度地提高速度。

有关更多信息，请参阅： [http ://www.sqlite.org/optoverview.html](http://www.sqlite.org/optoverview.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T05:44:35.567

我很确定这会起作用，是的 - 无论如何它在 MS SQL Server 中都是如此。

但是，如果您只需要选择日期（例如日期范围），此索引对您没有帮助。在这种情况下，您可能需要仅在日期上创建第二个索引，以提高这些查询的效率。

马克

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-04-28T22:34:33.580

我通常使用组合索引对希望分页或“流式”请求的数据进行排序。

假设一个客户可以下多个订单.. 并且客户 0 到 11 存在并且每个客户有几个订单都以随机顺序插入。我想根据客户编号和日期对查询进行排序。您还应该将 id 字段排序到最后一个客户有多个相同日期的拆分集（即使这可能永远不会发生）。

```
sqlite> CREATE INDEX customer_asc_date_asc_index_asc ON orders
          (customer ASC, date ASC, id ASC); 
```

获取排序查询的第 1 页（限制为 10 项）：

```
sqlite> SELECT id, customer, date FROM orders
          ORDER BY customer ASC, date ASC, id ASC LIMIT 10;

2653|1|1303828585
2520|1|1303828713
2583|1|1303829785
1828|1|1303830446
1756|1|1303830540
1761|1|1303831506
2442|1|1303831705
2523|1|1303833761
2160|1|1303835195
2645|1|1303837524 
```

获取下一页：

```
sqlite> SELECT id, customer, date FROM orders WHERE
          (customer = 1 AND date = 1303837524 and id > 2645) OR
          (customer = 1 AND date > 1303837524) OR
          (customer > 1)
          ORDER BY customer ASC, date ASC, id ASC LIMIT 10;

2515|1|1303837914
2370|1|1303839573
1898|1|1303840317
1546|1|1303842312
1889|1|1303843243
2439|1|1303843699
2167|1|1303849376
1544|1|1303850494
2247|1|1303850869
2108|1|1303853285 
```

等等...

当您使用查询 OFFSET 和 LIMIT 时，将索引放在适当的位置会减少服务器端索引扫描。查询时间越长，偏移量越高，驱动器越难寻找。使用这种方法可以消除这种情况。

如果您计划稍后加入数据但每个请求只需要一组有限的数据，建议使用此方法。如上所述加入 SUBSELECT 以减少大型表的内存开销。

# sql - 将声明附加到 XML 文件

> ID：796360
> 
> 赞同：1
> 
> 时间：2009-04-28T05:40:24.687
> 
> 标签：sql, xml, tsql

通过使用 bcp 调用 proc 从数据库中的数据创建 XML

```
SET @SQL= 'bcp "exec dbo.proc" queryout '+ @FileName +' -w -r -t  -Sdd\SQL2005 -T ' 
```

（下面产生的过程）一切都很好=>根据需要创建XML。现在的任务是向这个 XML ( `<?xml version="1.0" ?>`)添加声明

如何在下面的过程中或将 XML 与其他文件（包含声明）连接起来实现这一点

```
SELECT  ( SELECT TOP 1
                    ShiftDate AS "ShiftDate",
                    Shift AS "Shift"
          FROM      [TableName]
        FOR
          XML PATH(''),
              TYPE
        ),
        ( SELECT    EquipmentId AS "WasheryProductionDetails/EquipmentCode",
                    'n/a' AS "WasheryProductionDetails/ActivityCode",
                    'n/a' AS "WasheryProductionDetails/ReasonCode",
                    Parentmaterial AS "WasheryProductionDetails/WasheryFeed/MaterialCode",
                    ParentStockpile AS "WasheryProductionDetails/WasheryFeed/ROMStockpileCode",
                    CAST(ParentTonnes AS DECIMAL(18, 4)) AS "WasheryProductionDetails/WasheryFeed/FeedTonnes",
                    ChildMaterial AS "WasheryProductionDetails/WasheryOutput/MaterialCode",
                    ChildStockpile AS "WasheryProductionDetails/WasheryOutput/ProductStockpileCode",
                    CAST(ChildTonnes AS DECIMAL(18, 4)) AS "WasheryProductionDetails/WasheryOutput/ProductTonnes"
          FROM      [TableName]
        FOR
          XML PATH(''),
              TYPE
        )
FOR     XML PATH(''),
            ROOT('WasheryProduction') 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-29T03:41:35.917

[此页面](http://social.msdn.microsoft.com/Forums/fr-FR/sqlxml/thread/17fdee4a-06ab-4bbb-876c-52adca018ca0)建议您需要对声明进行硬编码：

```
SELECT

'<?xml version="1.0" ?>'

+
SELECT  ( SELECT TOP 1
... rest of your code goes here... 
```

编辑：将“UNION ALL”（这显然是错误的）更改为“+”（均取自链接页面。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-07-22T07:50:46.120

```
Declare @SQL varchar(8000)
Declare @xml xml
Declare @strXML as varchar(max)

set @xml = (select * from <tableName> for xml path(''))
set @strXML='< ? xml version = "1.0" ? >' + convert(varchar(max), @xml)

select @strXML

set @SQL ='bcp "select '''+@strXML+'''"  QueryOut "C:\xmlFile.xml" -r -w -t -T -S '

Exec master..xp_cmdshell @SQL 
```

# c++ - 快速跨平台 C/C++ 图像处理库

> ID：796364
> 
> 赞同：28
> 
> 时间：2009-04-28T05:42:35.570
> 
> 标签：c++, c, image-processing, cross-platform, performance

有哪些用于图像处理（调整大小和查找颜色/色调直方图）的跨平台和高性能图像库。不需要gui。这是针对 C/C++ 的。

到目前为止，我已经看过

*   开放式CV
*   GIL 作为 Boost 的一部分
*   魔鬼
*   CImg

我的问题

*   我上面列出的性能如何
*   还有哪些其他库

非常感谢您的意见。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-28T06:27:36.320

[OpenCV](http://opencv.org/)有相当不错的性能。对于大多数情况应该足够了。

为了提高性能，您还可以将 OpenCV 与[Intel IPP](http://software.intel.com/en-us/intel-ipp/)一起使用，但它是一个非免费的商业产品。如果 OpenCV 检测到 IPP 已安装，它将尽可能使用它。

作为第三种选择，您可以直接使用 IPP。IPP 的设计目标是高性能（在英特尔架构上）。它经过优化以使用英特尔 SIMD 指令。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-28T06:09:04.057

[imagemagick](http://www.imagemagick.org/script/index.php)很受欢迎。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T07:29:50.960

不要忘记查看[CxImage](http://www.xdp.it/cximage/) - 我在全球部署的图形密集型手机应用程序中专业地使用它，它在其中表现完美并且功能如此丰富。一定要检查一下！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-27T10:36:02.317

我认为我没有看到比[MVTec](http://www.mvtec.com)的 HALCON 更好的功能和性能。它提供了各种开箱即用的计算机视觉和图像处理算法以及大量现实生活中的示例。该库尽可能多地使用算法可能允许的多线程，并在可用时使用 GPU。它非常跨平台，并提供了一个出色的 IDE，允许您将原型代码（算法）导出为多种语言，包括 C、C++、C# 等。

该库的最佳功能之一是它们如何处理区域对象。它在存储和掩模处理方面都非常智能和高效。不幸的是，OpenCV 有很多东西要学。

这个包的主要问题是价格（高得离谱），但是如果您正在从事一个不需要部署运行时许可证（例如 SaaS）的项目，那么这是要走的路，如果您需要认真的图像处理和计算机视觉。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-30T07:07:54.817

有一个简单免费的开源跨平台图像处理库[Simd](http://simd.sourceforge.net/)。从其描述如下：

它为图像处理提供了许多有用的高性能算法，例如：像素格式转换、图像缩放和过滤、从图像中提取统计信息、运动检测。

算法使用不同的 SIMD CPU 扩展进行了优化：SSE、SSE2、SSSE3、SSE4.1、SSE4.2、AVX、AVX2 和 AVX-512 用于 x86/x64，VMX(Altivec) 和 VSX(Power7) 用于 PowerPC， ARM 的霓虹灯。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-28T07:03:46.907

你可能想看看[IM](http://www.tecgraf.puc-rio.br/im/)。它建立在多个平台上，并支持（模块化）图像文件格式、各种图像表示以及各种转换和运算符。还可以使用 GUI 工具[IMLab](http://imlab.sourceforge.net/)来演示基于 IM 库的图像处理运算符。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-28T07:13:52.233

还有[VTK](http://www.vtk.org/)和[ITK](http://www.itk.org/)，有大量的图像处理算法。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-13T16:03:47.907

我帮助维护[libvips](https://libvips.github.io/libvips/)，这是一个免费的跨平台 C/C++ 科学图像处理库。它速度很快，并且在非常大的图像上效果很好。

我做了一个非常简单的[基准测试](https://github.com/libvips/libvips/wiki/Speed-and-memory-use)：加载一个 5,000 x 5,000 像素的 RGB tif，从每个边缘裁剪 100 像素，缩小 10%，锐化，然后再次保存。至少在这个微不足道的测试中，vips 的速度是我尝试过的其他任何东西的两倍多。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-01-23T20:47:40.807

还有：

*   Framewave 基于[AMD 性能库](http://framewave.sourceforge.net/)，提供信号和图像处理功能
*   [GraphicsMagick](http://www.graphicsmagick.org/)多线程衍生自[ImageMagick](http://www.imagemagick.org/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-03-02T11:59:42.823

[ExactImage](http://www.exactcode.com/site/open_source/exactimage/)是一个快速的 C++ 图像处理库。与许多其他库框架不同，它本机允许在多个颜色空间和位深度中进行操作，从而降低内存和计算要求。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-28T13:21:55.310

我们使用[Accusoft](http://www.accusoft.com/imagegear.htm)已经有一段时间了，但出于非常特殊的原因，我们切换到了[LeadTools](http://www.leadtools.com/)，它仅适用于 Windows。Accusoft 比leadtools 有一个非常清晰和定义明确的界面。这两个库都非常健壮，并且都声称可以或多或少地读取所有现有文件类型。两者也有相当响应的支持。

# html - 这可以在没有表格或 JavaScript 的情况下完成吗：100% 高度将是容器的剩余高度

> ID：796367
> 
> 赞同：0
> 
> 时间：2009-04-28T05:43:18.130
> 
> 标签：html, css, html-table

是否可以制作一个基于非表格的布局，允许 #bottom 元素在不使用 JavaScript 的情况下填充父元素中剩余空间的 100%？

以下是使用表格时的工作原理：

```
<html>
    <head>
        <style>
            table{
                height: 100%;
                width: 100%;
            }

            #top{
                background-color: blue;
                height: 200px;
            }

            #bottom{
                background-color: red;
                height: 100%;
            }        
        </style>
    </head>
    <body>
        <table>
            <tbody>
                <tr id="top">
                    <td></td>
                </tr>
                <tr id="bottom">
                    <td></td>
                </tr>            
            </tbody>            
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T05:52:17.357

```
<html>
  <head>
    <style>
    * { padding: 0px; margin: 0px; }
    body {
      height: 100%;
    }
    #main {
      height: 100%;
      width: 100%;
      position: relative;
    }
    #top{
      background-color: blue;
      height: 200px;
    }
    #bottom{
      background-color: red;
      position: absolute;
      bottom: 0px;
      top: 200px;
      left: 0px;
      right: 0px;
    }               
    </style>
  </head>
  <body>
    <div id="main">
      <div id="top">
      </div>
      <div id="bottom">
      </div>
    </div>
    </body>
</html> 
```

你真的不需要#main，我只是想把我的东西不必要地包含在里面。

# ruby-on-rails - 我需要在 sql 查询中更新当前时间

> ID：796370
> 
> 赞同：0
> 
> 时间：2009-04-28T05:45:17.047
> 
> 标签：ruby-on-rails, ruby

使用 Time.now 或 Time.now.to_s 或 Time.now.to_datetime 会引发错误。

使用 Date.today 并没有帮助，因为它将日期和时间存储为 12.00 AM，而不是当前时间戳。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T07:43:58.527

我不确定为什么以及什么会引发错误，但是如果您尝试从 Ruby（特别是此处的 Rails）生成正确 SQL 的日期字符串，您可以使用`Time.now.to_s(:db)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T03:08:20.277

我使用 CURRENT_TIMESTAMP 来获取带有时间戳的当前日期。有效。

谢谢你的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T06:02:32.607

您是否尝试过这样的语句（在更新语句中使用**now() ）：**

```
INSERT INTO table1 (field1, field2, field3, timestampfield) VALUES ('value1', 'value2', 'value3', now()) 
```

* * *

[编辑：][在这里查看](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_now)“now()”的解释

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T06:44:30.913

对于更新尝试类似：

```
UPDATE table1 SET mytime = now(); 
```

如果您想在插入时放置适当的时间，则为您提供另一个选择，它只是为 datetime 字段默认设置函数 now() 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-30T08:06:24.867

Time.now.to_formatted_s :db 这应该给你数据库友好的时间戳。

[http://api.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Time/Conversions.html#M001093](http://api.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Time/Conversions.html#M001093)

# asp.net - 在中等信任环境中运行 ASP.Net 网站

> ID：796383
> 
> 赞同：0
> 
> 时间：2009-04-28T05:49:15.727
> 
> 标签：asp.net, security, hosting, medium-trust

免责声明：我的 ASP.Net 技能有限

我有几个网站正在从我当前的主机转移到 Mosso 主机服务。当我尝试转移其中一个网站时，我收到错误“System.Security.SecurityException：该程序集不允许部分受信任的调用者。”，这似乎与 Mosso 在 ASP.Net 的 Medium Trust 上运行的事实有关应用程序，并且网站中的代码似乎需要完全信任。

不幸的是，我无法访问该应用程序的完整源代码，并且原始开发人员不可用。移植这些网站有什么简单的解决方法吗？我尝试在 web.config 中添加，但没有奏效。

我不认为要求 Mosso 调整安全级别是一种选择，因为当我问他们时他们拒绝了。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T06:18:59.447

您的程序集是否命名为强？它是否调用强命名程序集？

您应该将“ [AllowPartiallyTrustedCallers](http://msdn.microsoft.com/en-us/library/system.security.allowpartiallytrustedcallersattribute.aspx) ”属性应用于程序集。有关此属性的更多信息，[请参见此处](http://blogs.msdn.com/shawnfa/archive/2005/02/04/367390.aspx)。

从文档：

> 默认情况下，未在程序集级别显式应用此属性以允许部分受信任的代码使用的强名称程序集只能由安全策略授予完全信任的其他程序集调用。此限制是通过在程序集中每个可公开访问的类的每个公共或受保护方法上放置 FullTrust 的 LinkDemand 来实施的。旨在由部分受信任的代码调用的程序集可以通过使用 AllowPartiallyTrustedCallersAttribute 来声明其意图。

有关详细信息，请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/8skskf63(vs.71).aspx)。

**编辑**：

* * *

一些信息证实了我怀疑 APTCA 属性是解决问题的可能方法：

[https://support.isqsolutions.com/article.aspx?id=10334](https://support.isqsolutions.com/article.aspx?id=10334)
[http://bloggingabout.net/blogs/rick/archive/2006/04/07/11929.aspx](http://bloggingabout.net/blogs/rick/archive/2006/04/07/11929.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T06:12:35.173

很抱歉，除非他们允许您设置信任级别，否则您可能会遇到大问题。你可以看看这里。 [专业的 ASP.NET 2.0 安全性、成员资格和角色管理](http://www.wrox.com/WileyCDA/Section/Using-the-WebPermission-Setting-in-ASP-NET-Partial-Trust.id-291738.html)

几乎完全相同的事情发生在我身上，除了我的托管公司在我的一些网站在他们的服务器上运行了几年之后改变了他们的信任政策。最后我不得不放弃并转向[DiscountASP](http://discountasp.net/)，因为它们`<trust level="Full" />`在我的配置文件中被覆盖。

这是我最初的问题。 [ASP.NET WebPermission 安全异常](https://stackoverflow.com/questions/245834/asp-net-webpermission-security-exception)

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-15T22:11:10.900

我知道这是旧的，但我想我会添加一些可能会有所帮助的东西。Mosso 对 Medium trust 的更改也给我们带来了一些问题。

我们使用 BlogEngine.NET 并访问 MySQL 作为其后端。我们的 bin 目录中有 MySQL dll，这导致了中等信任问题。一旦 Mosso 将 MySQL dll 添加到 GAC，我们就可以成功使用它。

显然，我不知道您的具体细节以及您要做什么，但如果它与 MySQL 有关，请告诉我。

# algorithm - 星搜索算法的 Erlang 实现

> ID：796384
> 
> 赞同：3
> 
> 时间：2009-04-28T05:50:13.183
> 
> 标签：algorithm, erlang, a-star

我需要 A* 搜索算法的 Erlang 实现。任何指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T16:31:01.597

[http://stevegilham.blogspot.com/2008/10/first-refactoring-of-star-in-erlang.html](http://stevegilham.blogspot.com/2008/10/first-refactoring-of-star-in-erlang.html)

# api - 是否可以在不抓取的情况下从 Myspace 页面获取即将举行的活动/节目信息？

> ID：796391
> 
> 赞同：0
> 
> 时间：2009-04-28T05:52:51.507
> 
> 标签：api, screen-scraping, myspace

我想从 myspace 艺术家那里获得演出信息。我可以做到这一点的一种方法是让艺术家输入他们的 myspace URL，然后我可以尝试抓取页面。

我真正想做的是向艺术家询问他们的 myspace 凭据并使用 myspace api 获取他们的演出数据。我在 myspace 开发者网站上找不到如何执行此操作。有人知道吗？

作为一个附带问题，如果我决定走页面抓取路线，那合法吗？我感觉很多人都是这样做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-16T04:01:54.527

试试[http://livekick.com](http://livekick.com)。它包括在 myspace 上发布的所有音乐会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-28T13:43:19.397

找到[了这篇很棒的文章](http://www.crainbandy.com/programming/using-php-and-simple-html-dom-parser-to-scrape-artist-tour-dates-off-myspace)：为巡演日期抓取我的空间。没有测试，但看起来不错。

# struts2 - 我们将如何启用基于validation.xml 中的xml 的前端验证？

> ID：796404
> 
> 赞同：2
> 
> 时间：2009-04-28T06:01:48.210
> 
> 标签：struts2

我想知道我们将如何基于validation.xml 中的xml 启用前端验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T04:40:44.370

如果您正在使用支持前端验证的主题之一（如 css_xhtml），则只需在标签上设置 validate="true"。这应该从您的validation.xml（或ActionName-validation.xml）生成javascript函数并在onSubmit处理程序中调用它。

# algorithm - 如何将复数单词变成单数？

> ID：796412
> 
> 赞同：21
> 
> 时间：2009-04-28T06:05:17.997
> 
> 标签：algorithm, nlp, lemmatization, inflection

我正在为 ORM 准备一些表名，我想将复数表名转换为单个实体名。我唯一的问题是找到一种可靠的算法。这就是我现在正在做的事情：

1.  如果一个单词以*-ies*结尾，我将其替换为*-y*
2.  如果一个单词以*-es*结尾，我删除这个结尾。然而，这并不总是有效 - 例如，它将*Types*替换为*Typ*
3.  否则，我只是删除尾随*-s*

有人知道更好的算法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-28T06:21:23.683

这些都是一般规则（也是好的规则），但英语不是胆小的人的语言:-)。

我自己的偏好是拥有一个转换引擎以及一组转换（令人惊讶的是）来完成实际工作。您将运行转换（从特定到一般），并在找到匹配项时，将转换应用于单词并停止。

由于其表现力，正则表达式将是解决此问题的理想方法。示例规则集：

```
 1\. If the word is fish, return fish.
 2\. If the word is sheep, return sheep.
 3\. If the word is "radii", return "radius".
 4\. If the word ends in "ii", replace that "ii" with "us" (octopii,virii).
 5\. If a word ends with -ies, replace the ending with -y
 6\. If a word ends with -es, remove it.
 7\. Otherwise, just remove any trailing -s. 
```

请注意保持此转换设置为最新的要求。例如，假设有人添加了表名`types`。这目前会被规则捕获`#6`，你会得到奇异值`typ`，这显然是错误的。

*解决方案是在之前* 的某处插入新规则`#6`，例如：

```
 3.5: If the word is "types", return "type". 
```

对于一个非常具体的转换，或者如果它可以变得更普遍，也许以后的某个地方。

换句话说，当您发现英语在几个世纪以来产生的所有那些奇妙的例外时，您基本上需要保持此转换表的更新。

* * *

另*一种*可能性是根本不要在一般规则上浪费时间。

由于此需求的用例目前只是将表名单数化，而那组表名将相对较小（至少与复数英文单词组相比），只需创建*另一个*表（或某种数据结构) 调用`singulars`，它将所有当前的复数表名称 ( `employees`, `customers`) 映射到单数对象名称 ( `employee`, `customer`)。

然后，每次将表添加到您的架构中时，请确保向单数“表”添加一个条目，以便您可以对其进行单数化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T06:08:33.200

问题是这是基于一般规则，但英语有（象征性地）十亿个例外......你如何处理像“鱼”或“鹅”这样的词？

此外，规则是关于如何将单数名词变为复数。反向映射不一定是可能的（考虑“免费赠品”）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-28T06:15:45.180

Andrew Peters 有一个名为[Inflector.NET](http://andrewpeters.net/inflectornet/)的类，它提供了复数到单数和单数到复数的方法。正如 Tal 指出的那样，没有一种算法是万无一失的，但这涵盖了相当数量的不规则英语名词。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T06:24:21.307

也许看看像 [Rails Inflector这样的源代码](http://api.rubyonrails.org/classes/Inflector.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-01T14:52:41.650

另请参阅[此答案](https://stackoverflow.com/questions/190775/stemming-algorithm-that-produces-real-words/615251#615251)，它建议使用 Morpha（或研究其背后的算法）。

如果您知道要词形还原的单词是复数名词，那么您可以标记它们`NNS`以获得更准确的输出。

输入示例：

```
$ cat test.txt 
Types_NNS
Pies_NNS
Trees_NNS
Buses_NNS
Radii_NNS
Communities_NNS
Sheep_NNS
Fish_NNS 
```

输出示例：

```
$ cat test.txt | ./morpha -c
Type
Pie
Tree
Bus
Radius
Community
Sheep
Fish 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-08T17:24:51.483

作为一项改进，您可以使用生成多种可能性的规则，然后在字典中查找结果以排除不可能的选项。

例如，将 -ies 替换为 -y 和 -ie。派变成派和派。字典中只有一个，所以选择那个。

也许您甚至可以找到包含频率信息的字典并选择您生成的最常见的单词。

如果将其与涵盖一些例外的有序规则列表结合起来，您可能会获得相当高的准确性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-06T02:20:56.967

也许你需要这个，如果你知道如何使用 PHP 脚本，它会很好用。它可以将复数单词转换为单个单词，也可以将单个单词转换为复数单词。

```
class BaseInflector
{
    /**
     * @var array the rules for converting a word into its plural form.
     * The keys are the regular expressions and the values are the corresponding replacements.
     */
    public static $plurals = [
        '/([nrlm]ese|deer|fish|sheep|measles|ois|pox|media)$/i' => '\1',
        '/^(sea[- ]bass)$/i' => '\1',
        '/(m)ove$/i' => '\1oves',
        '/(f)oot$/i' => '\1eet',
        '/(h)uman$/i' => '\1umans',
        '/(s)tatus$/i' => '\1tatuses',
        '/(s)taff$/i' => '\1taff',
        '/(t)ooth$/i' => '\1eeth',
        '/(quiz)$/i' => '\1zes',
        '/^(ox)$/i' => '\1\2en',
        '/([m|l])ouse$/i' => '\1ice',
        '/(matr|vert|ind)(ix|ex)$/i' => '\1ices',
        '/(x|ch|ss|sh)$/i' => '\1es',
        '/([^aeiouy]|qu)y$/i' => '\1ies',
        '/(hive)$/i' => '\1s',
        '/(?:([^f])fe|([lr])f)$/i' => '\1\2ves',
        '/sis$/i' => 'ses',
        '/([ti])um$/i' => '\1a',
        '/(p)erson$/i' => '\1eople',
        '/(m)an$/i' => '\1en',
        '/(c)hild$/i' => '\1hildren',
        '/(buffal|tomat|potat|ech|her|vet)o$/i' => '\1oes',
        '/(alumn|bacill|cact|foc|fung|nucle|radi|stimul|syllab|termin|vir)us$/i' => '\1i',
        '/us$/i' => 'uses',
        '/(alias)$/i' => '\1es',
        '/(ax|cris|test)is$/i' => '\1es',
        '/s$/' => 's',
        '/^$/' => '',
        '/$/' => 's',
    ];
    /**
     * @var array the rules for converting a word into its singular form.
     * The keys are the regular expressions and the values are the corresponding replacements.
     */
    public static $singulars = [
        '/([nrlm]ese|deer|fish|sheep|measles|ois|pox|media|ss)$/i' => '\1',
        '/^(sea[- ]bass)$/i' => '\1',
        '/(s)tatuses$/i' => '\1tatus',
        '/(f)eet$/i' => '\1oot',
        '/(t)eeth$/i' => '\1ooth',
        '/^(.*)(menu)s$/i' => '\1\2',
        '/(quiz)zes$/i' => '\\1',
        '/(matr)ices$/i' => '\1ix',
        '/(vert|ind)ices$/i' => '\1ex',
        '/^(ox)en/i' => '\1',
        '/(alias)(es)*$/i' => '\1',
        '/(alumn|bacill|cact|foc|fung|nucle|radi|stimul|syllab|termin|viri?)i$/i' => '\1us',
        '/([ftw]ax)es/i' => '\1',
        '/(cris|ax|test)es$/i' => '\1is',
        '/(shoe|slave)s$/i' => '\1',
        '/(o)es$/i' => '\1',
        '/ouses$/' => 'ouse',
        '/([^a])uses$/' => '\1us',
        '/([m|l])ice$/i' => '\1ouse',
        '/(x|ch|ss|sh)es$/i' => '\1',
        '/(m)ovies$/i' => '\1\2ovie',
        '/(s)eries$/i' => '\1\2eries',
        '/([^aeiouy]|qu)ies$/i' => '\1y',
        '/([lr])ves$/i' => '\1f',
        '/(tive)s$/i' => '\1',
        '/(hive)s$/i' => '\1',
        '/(drive)s$/i' => '\1',
        '/([^fo])ves$/i' => '\1fe',
        '/(^analy)ses$/i' => '\1sis',
        '/(analy|diagno|^ba|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i' => '\1\2sis',
        '/([ti])a$/i' => '\1um',
        '/(p)eople$/i' => '\1\2erson',
        '/(m)en$/i' => '\1an',
        '/(c)hildren$/i' => '\1\2hild',
        '/(n)ews$/i' => '\1\2ews',
        '/(n)etherlands$/i' => '\1\2etherlands',
        '/eaus$/' => 'eau',
        '/^(.*us)$/' => '\\1',
        '/s$/i' => '',
    ];
    /**
     * @var array the special rules for converting a word between its plural form and singular form.
     * The keys are the special words in singular form, and the values are the corresponding plural form.
     */
    public static $specials = [
        'atlas' => 'atlases',
        'beef' => 'beefs',
        'brother' => 'brothers',
        'cafe' => 'cafes',
        'child' => 'children',
        'cookie' => 'cookies',
        'corpus' => 'corpuses',
        'cow' => 'cows',
        'curve' => 'curves',
        'foe' => 'foes',
        'ganglion' => 'ganglions',
        'genie' => 'genies',
        'genus' => 'genera',
        'graffito' => 'graffiti',
        'hoof' => 'hoofs',
        'loaf' => 'loaves',
        'man' => 'men',
        'money' => 'monies',
        'mongoose' => 'mongooses',
        'move' => 'moves',
        'mythos' => 'mythoi',
        'niche' => 'niches',
        'numen' => 'numina',
        'occiput' => 'occiputs',
        'octopus' => 'octopuses',
        'opus' => 'opuses',
        'ox' => 'oxen',
        'penis' => 'penises',
        'sex' => 'sexes',
        'soliloquy' => 'soliloquies',
        'testis' => 'testes',
        'trilby' => 'trilbys',
        'turf' => 'turfs',
        'wave' => 'waves',
        'Amoyese' => 'Amoyese',
        'bison' => 'bison',
        'Borghese' => 'Borghese',
        'bream' => 'bream',
        'breeches' => 'breeches',
        'britches' => 'britches',
        'buffalo' => 'buffalo',
        'cantus' => 'cantus',
        'carp' => 'carp',
        'chassis' => 'chassis',
        'clippers' => 'clippers',
        'cod' => 'cod',
        'coitus' => 'coitus',
        'Congoese' => 'Congoese',
        'contretemps' => 'contretemps',
        'corps' => 'corps',
        'debris' => 'debris',
        'diabetes' => 'diabetes',
        'djinn' => 'djinn',
        'eland' => 'eland',
        'elk' => 'elk',
        'equipment' => 'equipment',
        'Faroese' => 'Faroese',
        'flounder' => 'flounder',
        'Foochowese' => 'Foochowese',
        'gallows' => 'gallows',
        'Genevese' => 'Genevese',
        'Genoese' => 'Genoese',
        'Gilbertese' => 'Gilbertese',
        'graffiti' => 'graffiti',
        'headquarters' => 'headquarters',
        'herpes' => 'herpes',
        'hijinks' => 'hijinks',
        'Hottentotese' => 'Hottentotese',
        'information' => 'information',
        'innings' => 'innings',
        'jackanapes' => 'jackanapes',
        'Kiplingese' => 'Kiplingese',
        'Kongoese' => 'Kongoese',
        'Lucchese' => 'Lucchese',
        'mackerel' => 'mackerel',
        'Maltese' => 'Maltese',
        'mews' => 'mews',
        'moose' => 'moose',
        'mumps' => 'mumps',
        'Nankingese' => 'Nankingese',
        'news' => 'news',
        'nexus' => 'nexus',
        'Niasese' => 'Niasese',
        'Pekingese' => 'Pekingese',
        'Piedmontese' => 'Piedmontese',
        'pincers' => 'pincers',
        'Pistoiese' => 'Pistoiese',
        'pliers' => 'pliers',
        'Portuguese' => 'Portuguese',
        'proceedings' => 'proceedings',
        'rabies' => 'rabies',
        'rice' => 'rice',
        'rhinoceros' => 'rhinoceros',
        'salmon' => 'salmon',
        'Sarawakese' => 'Sarawakese',
        'scissors' => 'scissors',
        'series' => 'series',
        'Shavese' => 'Shavese',
        'shears' => 'shears',
        'siemens' => 'siemens',
        'species' => 'species',
        'swine' => 'swine',
        'testes' => 'testes',
        'trousers' => 'trousers',
        'trout' => 'trout',
        'tuna' => 'tuna',
        'Vermontese' => 'Vermontese',
        'Wenchowese' => 'Wenchowese',
        'whiting' => 'whiting',
        'wildebeest' => 'wildebeest',
        'Yengeese' => 'Yengeese',
    ];
    /**
     * @var array fallback map for transliteration used by [[transliterate()]] when intl isn't available.
     */
    public static $transliteration = [
        'À' => 'A', 'Á' => 'A', 'Â' => 'A', 'Ã' => 'A', 'Ä' => 'A', 'Å' => 'A', 'Æ' => 'AE', 'Ç' => 'C',
        'È' => 'E', 'É' => 'E', 'Ê' => 'E', 'Ë' => 'E', 'Ì' => 'I', 'Í' => 'I', 'Î' => 'I', 'Ï' => 'I',
        'Ð' => 'D', 'Ñ' => 'N', 'Ò' => 'O', 'Ó' => 'O', 'Ô' => 'O', 'Õ' => 'O', 'Ö' => 'O', 'Ő' => 'O',
        'Ø' => 'O', 'Ù' => 'U', 'Ú' => 'U', 'Û' => 'U', 'Ü' => 'U', 'Ű' => 'U', 'Ý' => 'Y', 'Þ' => 'TH',
        'ß' => 'ss',
        'à' => 'a', 'á' => 'a', 'â' => 'a', 'ã' => 'a', 'ä' => 'a', 'å' => 'a', 'æ' => 'ae', 'ç' => 'c',
        'è' => 'e', 'é' => 'e', 'ê' => 'e', 'ë' => 'e', 'ì' => 'i', 'í' => 'i', 'î' => 'i', 'ï' => 'i',
        'ð' => 'd', 'ñ' => 'n', 'ò' => 'o', 'ó' => 'o', 'ô' => 'o', 'õ' => 'o', 'ö' => 'o', 'ő' => 'o',
        'ø' => 'o', 'ù' => 'u', 'ú' => 'u', 'û' => 'u', 'ü' => 'u', 'ű' => 'u', 'ý' => 'y', 'þ' => 'th',
        'ÿ' => 'y',
    ];
    /**
     * Shortcut for `Any-Latin; NFKD` transliteration rule. The rule is strict, letters will be transliterated with
     * the closest sound-representation chars. The result may contain any UTF-8 chars. For example:
     * `获取到 どちら Українська: ґ,є, Српска: ђ, њ, џ! ¿Español?` will be transliterated to
     * `huò qǔ dào dochira Ukraí̈nsʹka: g̀,ê, Srpska: đ, n̂, d̂! ¿Español?`
     *
     * Used in [[transliterate()]].
     * For detailed information see [unicode normalization forms](http://unicode.org/reports/tr15/#Normalization_Forms_Table)
     * @see http://unicode.org/reports/tr15/#Normalization_Forms_Table
     * @see transliterate()
     * @since 2.0.7
     */
    const TRANSLITERATE_STRICT = 'Any-Latin; NFKD';
    /**
     * Shortcut for `Any-Latin; Latin-ASCII` transliteration rule. The rule is medium, letters will be
     * transliterated to characters of Latin-1 (ISO 8859-1) ASCII table. For example:
     * `获取到 どちら Українська: ґ,є, Српска: ђ, њ, џ! ¿Español?` will be transliterated to
     * `huo qu dao dochira Ukrainsʹka: g,e, Srpska: d, n, d! ¿Espanol?`
     *
     * Used in [[transliterate()]].
     * For detailed information see [unicode normalization forms](http://unicode.org/reports/tr15/#Normalization_Forms_Table)
     * @see http://unicode.org/reports/tr15/#Normalization_Forms_Table
     * @see transliterate()
     * @since 2.0.7
     */
    const TRANSLITERATE_MEDIUM = 'Any-Latin; Latin-ASCII';
    /**
     * Shortcut for `Any-Latin; Latin-ASCII; [\u0080-\uffff] remove` transliteration rule. The rule is loose,
     * letters will be transliterated with the characters of Basic Latin Unicode Block.
     * For example:
     * `获取到 どちら Українська: ґ,є, Српска: ђ, њ, џ! ¿Español?` will be transliterated to
     * `huo qu dao dochira Ukrainska: g,e, Srpska: d, n, d! Espanol?`
     *
     * Used in [[transliterate()]].
     * For detailed information see [unicode normalization forms](http://unicode.org/reports/tr15/#Normalization_Forms_Table)
     * @see http://unicode.org/reports/tr15/#Normalization_Forms_Table
     * @see transliterate()
     * @since 2.0.7
     */
    const TRANSLITERATE_LOOSE = 'Any-Latin; Latin-ASCII; [\u0080-\uffff] remove';

    /**
     * @var mixed Either a [[\Transliterator]], or a string from which a [[\Transliterator]] can be built
     * for transliteration. Used by [[transliterate()]] when intl is available. Defaults to [[TRANSLITERATE_LOOSE]]
     * @see http://php.net/manual/en/transliterator.transliterate.php
     */
    public static $transliterator = self::TRANSLITERATE_LOOSE;

    /**
     * Converts a word to its plural form.
     * Note that this is for English only!
     * For example, 'apple' will become 'apples', and 'child' will become 'children'.
     * @param string $word the word to be pluralized
     * @return string the pluralized word
     */
    public static function pluralize($word)
    {
        if (isset(static::$specials[$word])) {
            return static::$specials[$word];
        }
        foreach (static::$plurals as $rule => $replacement) {
            if (preg_match($rule, $word)) {
                return preg_replace($rule, $replacement, $word);
            }
        }

        return $word;
    }

    /**
     * Returns the singular of the $word
     * @param string $word the english word to singularize
     * @return string Singular noun.
     */
    public static function singularize($word)
    {
        $result = array_search($word, static::$specials, true);
        if ($result !== false) {
            return $result;
        }
        foreach (static::$singulars as $rule => $replacement) {
            if (preg_match($rule, $word)) {
                return preg_replace($rule, $replacement, $word);
            }
        }

        return $word;
    }

    /**
     * Converts an underscored or CamelCase word into a English
     * sentence.
     * @param string $words
     * @param boolean $ucAll whether to set all words to uppercase
     * @return string
     */
    public static function titleize($words, $ucAll = false)
    {
        $words = static::humanize(static::underscore($words), $ucAll);

        return $ucAll ? ucwords($words) : ucfirst($words);
    }

    /**
     * Returns given word as CamelCased
     * Converts a word like "send_email" to "SendEmail". It
     * will remove non alphanumeric character from the word, so
     * "who's online" will be converted to "WhoSOnline"
     * @see variablize()
     * @param string $word the word to CamelCase
     * @return string
     */
    public static function camelize($word)
    {
        return str_replace(' ', '', ucwords(preg_replace('/[^A-Za-z0-9]+/', ' ', $word)));
    }

    /**
     * Converts a CamelCase name into space-separated words.
     * For example, 'PostTag' will be converted to 'Post Tag'.
     * @param string $name the string to be converted
     * @param boolean $ucwords whether to capitalize the first letter in each word
     * @return string the resulting words
     */
    public static function camel2words($name, $ucwords = true)
    {
        $label = trim(strtolower(str_replace([
            '-',
            '_',
            '.'
        ], ' ', preg_replace('/(?<![A-Z])[A-Z]/', ' \0', $name))));

        return $ucwords ? ucwords($label) : $label;
    }

    /**
     * Converts a CamelCase name into an ID in lowercase.
     * Words in the ID may be concatenated using the specified character (defaults to '-').
     * For example, 'PostTag' will be converted to 'post-tag'.
     * @param string $name the string to be converted
     * @param string $separator the character used to concatenate the words in the ID
     * @param boolean|string $strict whether to insert a separator between two consecutive uppercase chars, defaults to false
     * @return string the resulting ID
     */
    public static function camel2id($name, $separator = '-', $strict = false)
    {
        $regex = $strict ? '/[A-Z]/' : '/(?<![A-Z])[A-Z]/';
        if ($separator === '_') {
            return trim(strtolower(preg_replace($regex, '_\0', $name)), '_');
        } else {
            return trim(strtolower(str_replace('_', $separator, preg_replace($regex, $separator . '\0', $name))), $separator);
        }
    }

    /**
     * Converts an ID into a CamelCase name.
     * Words in the ID separated by `$separator` (defaults to '-') will be concatenated into a CamelCase name.
     * For example, 'post-tag' is converted to 'PostTag'.
     * @param string $id the ID to be converted
     * @param string $separator the character used to separate the words in the ID
     * @return string the resulting CamelCase name
     */
    public static function id2camel($id, $separator = '-')
    {
        return str_replace(' ', '', ucwords(implode(' ', explode($separator, $id))));
    }

    /**
     * Converts any "CamelCased" into an "underscored_word".
     * @param string $words the word(s) to underscore
     * @return string
     */
    public static function underscore($words)
    {
        return strtolower(preg_replace('/(?<=\\w)([A-Z])/', '_\\1', $words));
    }

    /**
     * Returns a human-readable string from $word
     * @param string $word the string to humanize
     * @param boolean $ucAll whether to set all words to uppercase or not
     * @return string
     */
    public static function humanize($word, $ucAll = false)
    {
        $word = str_replace('_', ' ', preg_replace('/_id$/', '', $word));

        return $ucAll ? ucwords($word) : ucfirst($word);
    }

    /**
     * Same as camelize but first char is in lowercase.
     * Converts a word like "send_email" to "sendEmail". It
     * will remove non alphanumeric character from the word, so
     * "who's online" will be converted to "whoSOnline"
     * @param string $word to lowerCamelCase
     * @return string
     */
    public static function variablize($word)
    {
        $word = static::camelize($word);

        return strtolower($word[0]) . substr($word, 1);
    }

    /**
     * Converts a class name to its table name (pluralized)
     * naming conventions. For example, converts "Person" to "people"
     * @param string $className the class name for getting related table_name
     * @return string
     */
    public static function tableize($className)
    {
        return static::pluralize(static::underscore($className));
    }

    /**
     * Returns a string with all spaces converted to given replacement,
     * non word characters removed and the rest of characters transliterated.
     *
     * If intl extension isn't available uses fallback that converts latin characters only
     * and removes the rest. You may customize characters map via $transliteration property
     * of the helper.
     *
     * @param string $string An arbitrary string to convert
     * @param string $replacement The replacement to use for spaces
     * @param boolean $lowercase whether to return the string in lowercase or not. Defaults to `true`.
     * @return string The converted string.
     */
    public static function slug($string, $replacement = '-', $lowercase = true)
    {
        $string = static::transliterate($string);
        $string = preg_replace('/[^a-zA-Z0-9=\s—–-]+/u', '', $string);
        $string = preg_replace('/[=\s—–-]+/u', $replacement, $string);
        $string = trim($string, $replacement);

        return $lowercase ? strtolower($string) : $string;
    }

    /**
     * Returns transliterated version of a string.
     *
     * If intl extension isn't available uses fallback that converts latin characters only
     * and removes the rest. You may customize characters map via $transliteration property
     * of the helper.
     *
     * @param string $string input string
     * @param string|\Transliterator $transliterator either a [[Transliterator]] or a string
     * from which a [[Transliterator]] can be built.
     * @return string
     * @since 2.0.7 this method is public.
     */
    public static function transliterate($string, $transliterator = null)
    {
        if (static::hasIntl()) {
            if ($transliterator === null) {
                $transliterator = static::$transliterator;
            }

            return transliterator_transliterate($transliterator, $string);
        } else {
            return strtr($string, static::$transliteration);
        }
    }

    /**
     * @return boolean if intl extension is loaded
     */
    protected static function hasIntl()
    {
        return extension_loaded('intl');
    }

    /**
     * Converts a table name to its class name. For example, converts "people" to "Person"
     * @param string $tableName
     * @return string
     */
    public static function classify($tableName)
    {
        return static::camelize(static::singularize($tableName));
    }

    /**
     * Converts number to its ordinal English form. For example, converts 13 to 13th, 2 to 2nd ...
     * @param integer $number the number to get its ordinal value
     * @return string
     */
    public static function ordinalize($number)
    {
        if (in_array($number % 100, range(11, 13))) {
            return $number . 'th';
        }
        switch ($number % 10) {
            case 1:
                return $number . 'st';
            case 2:
                return $number . 'nd';
            case 3:
                return $number . 'rd';
            default:
                return $number . 'th';
        }
    }

    /**
     * Converts a list of words into a sentence.
     *
     * Special treatment is done for the last few words. For example,
     *
     * ```php
     * $words = ['Spain', 'France'];
     * echo Inflector::sentence($words);
     * // output: Spain and France
     *
     * $words = ['Spain', 'France', 'Italy'];
     * echo Inflector::sentence($words);
     * // output: Spain, France and Italy
     *
     * $words = ['Spain', 'France', 'Italy'];
     * echo Inflector::sentence($words, ' & ');
     * // output: Spain, France & Italy
     * ```
     *
     * @param array $words the words to be converted into an string
     * @param string $twoWordsConnector the string connecting words when there are only two
     * @param string $lastWordConnector the string connecting the last two words. If this is null, it will
     * take the value of `$twoWordsConnector`.
     * @param string $connector the string connecting words other than those connected by
     * $lastWordConnector and $twoWordsConnector
     * @return string the generated sentence
     * @since 2.0.1
     */
    public static function sentence(array $words, $twoWordsConnector = ' and ', $lastWordConnector = null, $connector = ', ')
    {
        if ($lastWordConnector === null) {
            $lastWordConnector = $twoWordsConnector;
        }
        switch (count($words)) {
            case 0:
                return '';
            case 1:
                return reset($words);
            case 2:
                return implode($twoWordsConnector, $words);
            default:
                return implode($connector, array_slice($words, 0, -1)) . $lastWordConnector . end($words);
        }
    }
} 
```

有一些例子。

```
echo "Inflector Test";
require('PhInflector.php');
echo "<hr>";
echo PhInflector::slug('Höäpeäöäich Médsui27:;;,.1! *"29p');
echo "<hr>";
echo PhInflector::slug('HIJO"$(/&T §!"(/&T"§:;;,.1! *"29p');
echo "<hr>";
echo PhInflector::slug('38917 jiodj d                         ! *"29p');
echo "<hr>";
echo PhInflector::slug('каи циефле ///!!!'); 
```

并转发 github 链接点击[这里](https://github.com/schmunk42/php-inflector/blob/master/test.php)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-28T06:07:30.550

我认为您必须使用列表将某些特殊单词的复数转换为单数（在您的示例 Types->Type 中）。

我想你可以看看[CakePHP](http://cakephp.org)的源代码（你可以从[这里](http://book.cakephp.org/view/47/Inflections)开始搜索）。他们正在为他们的表名和字段名使用这种算法来自动连接表。

* * *

[编辑：] 在这里，您可以阅读一些有关[“英语中的复数变形”的科学著作](http://www.cogsci.ed.ac.uk/~annabelh/HarrisonMSc.pdf)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T06:13:10.817

我敢肯定，您可以通过 Google 找到大量可以执行此操作的库。

但是如果你喜欢编码，你可以尝试相反的过程：从字典的单数单词开始（下载免费的，被 aspell 或其他什么使用），使用复数规则；收集映射并切换方向。对于“类型”，您将复数为“类型”，反向映射将按预期工作。虽然这里也有例外，但可靠地复数事物会稍微容易一些。我不久前（在 90 年代中期...... :-)）做了这个，用于一个在线游戏（一个 MUD），其中多个相同项目的描述被连接起来，并且需要自动复数。

另外：鉴于它的表格数量有限，您可以使用最简单的算法，获取原始输出，关注它并手动修复错误案例。:-)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-11-20T10:17:49.600

我要试试这个 MorphAdorner：[http](http://morphadorner.northwestern.edu/morphadorner/download/) ://morphadorner.northwestern.edu/morphadorner/download/ （Java）。它是不同类型的 NLP 处理工具的集合，您可以通过在线示例对其进行测试。对于您的问题（这也是我的问题），有 Pluralizer 工具： http: [//morphadorner.northwestern.edu/morphadorner/pluralizer/example/](http://morphadorner.northwestern.edu/morphadorner/pluralizer/example/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-14T22:21:59.580

我刚刚遇到这个问题并在 10 分钟内开发了一个解决方案。

我认为@paxdiablo 为构建转换引擎和添加规则提供了一个很好的思路。我建立了一个字典规则和三个通用规则。字典规则进入字典文件以查找异常情况，而三个通用规则分别处理“ies”、“es”和“s”。

但是，将所有例外添加到字典中可能需要花费太多时间，例如，pies/trees/bus 等。我为处理这些单词所做的一项改进是确保可以将其转换回来。

例如，如果我们错误地将删除“es”规则应用于“trees”并将其转换为“tre”，当尝试添加复数形式时，您将得到“tres”，它不等于原始“tree”你知道不应该应用“es”规则。这种方法可以解决上面提到的异常，而不需要将它们添加到字典文件中。

我最终得到了一个包含 42 个真正特殊单词的字典文件，它可以处理大多数情况。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-12-03T03:57:49.657

考虑python包“inflect”

“正确生成复数、单数名词、序数、不定冠词；将数字转换为单词”

[https://pypi.python.org/pypi/inflect](https://pypi.python.org/pypi/inflect)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-07-29T10:26:10.743

在 uNnAddIns 项目中有一个很好[的变形器实现，它甚至实现了一个实验性的西班牙语变形器。](http://code.google.com/p/unhaddins/source/browse/#hg%2FuNhAddIns%2FuNhAddIns%2FInflector)这个想法来自 Rails [Inflector 模块](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)。

它也可以用于其他事情，例如从 CamelCase 转换为普通文本和其他好东西，例如从标题生成浏览器友好的 URL。

# msdtc - 分布式事务协调器

> ID：796416
> 
> 赞同：-1
> 
> 时间：2009-04-28T06:06:29.243
> 
> 标签：msdtc

我正在尝试跨多个系统进行数据库事务（插入记录）。所以，我决定在 .net 中使用 System.Transaction 命名空间。我在两个系统上都配置了 MSDTC（但我不知道我是否配置正确）。我的事务有两个插入查询，一个将在本地系统执行。另一个，将在本地网络中的某个其他系统上执行。第一个插入查询成功，但第二个引发错误，例如： Message = "事务已被隐式或显式提交或中止。"

* * *

这是我的代码

```
 using (TransactionScope txSc = new TransactionScope())
    {
        //vrm = new VolatileRM();
        //vrm.SetMemberValue(3);
        try
        {
            using (SqlConnection cn = new SqlConnection(connStr1))
            {
                SqlCommand cmd = cn.CreateCommand();
                cmd.CommandText = "Insert into empdetail Values ('YYY')";
                cn.Open();
                cmd.ExecuteNonQuery();
                cn.Close();
            }
            using (SqlConnection cn = new SqlConnection(connStr))
            {
                SqlCommand cmd = cn.CreateCommand();
                cmd.CommandText = "Insert into stu Values ('23','senthil')";
                cn.Open();
                cmd.ExecuteNonQuery();
                cn.Close();
            }                    
            txSc.Complete();
        }
        catch (Exception e)
        {
            txSc.Dispose();
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T06:32:09.510

首先检查 DTC 是否实际运行（在本地和远程系统上），然后尝试将 DTC 的身份验证设置为“匿名”，看看是否是权限问题。

此外，检查远程和本地计算机上的防火墙设置。

查看此常见问题解答：[分布式事务协调器 (MSDTC) 和事务常见问题解答](http://social.msdn.microsoft.com/forums/en-US/windowstransactionsprogramming/thread/173c937d-3fdc-43ab-8127-6083cef29a0e/)

[配置 MS DTC 服务](http://technet.microsoft.com/en-us/library/cc753866.aspx)

*   [为 MS DTC 安全启用网络访问](http://technet.microsoft.com/en-us/library/cc753620.aspx)
*   [为 MS DTC 启用防火墙例外](http://technet.microsoft.com/en-us/library/cc725913.aspx)

与此 SO 问题相关：[HRESULT: 0x8004D00E using TransactionScope - C#](https://stackoverflow.com/questions/784047/hresult-0x8004d00e-using-transactionscope-c/784070#784070)

# php - PHP Zend 框架生成器

> ID：796420
> 
> 赞同：6
> 
> 时间：2009-04-28T06:08:13.997
> 
> 标签：php, zend-framework

我正处于学习用于 PHP 开发的 Zend Framework 的阶段，我已经做了大约 2 年的“肮脏”PHP 编程，我从我的错误中学到了很多东西。

我已经了解了 Ruby On Rails，它是一个很棒的框架，Ruby 也是一种非常有趣的语言，但并不是每个人都希望他们的网站使用 RoR，至少不是我的所有客户。

因此，我做了很多 PHP。在研究过 RoR 之后，我发现 Zend Framework 提供了非常相似的功能和环境，因此我对此感到非常兴奋。

但是我很想知道是否有任何“生成器”脚本可以帮助您生成/自动化常见任务，例如项目结构创建、模型创建、控制器创建，就像 RoR 中的那些？

如果这样的东西已经存在，那就太好了，否则我会继续自己构建这样的脚本，因为我非常确定它们会非常方便，尤其是对我而言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T06:53:26.370

[Zend Tool](http://framework.zend.com/manual/en/zend.tool.framework.html)是您的朋友！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T07:20:02.373

我在编辑器（netbeans）中制作了几个代码片段和文件类型来帮助我实现自动化。您可以查看 zend studio，它具有内置的 zend 框架集成，运行良好，但它的商业化意味着切换 IDE 总是很麻烦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-05T02:09:26.253

我正在开发一个可能对您有用的 Zend Framework 代码生成器。它基于 Qcubed 代码生成器。查看[http://clintberry.com/2010/08/zend-framework-code-generator-with-scaffolding/](http://clintberry.com/2010/08/zend-framework-code-generator-with-scaffolding/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T10:22:26.163

这是我找到的最好的教程。它解释了如何开始使用 Zend Framework 一步一步的 [Zend Framework 教程](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/)

# c# - 检查ocx是否注册

> ID：796424
> 
> 赞同：1
> 
> 时间：2009-04-28T06:10:11.777
> 
> 标签：c#

如何检查 ocx 是否已注册。我想特别检查 mswinsck.ocx、richtx32.ocx 是否已注册

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T06:14:35.557

你知道对象的 CLSID 吗？然后检查注册表是否`HKEY_CLASSES_ROOT\CLSID\{...}`存在密钥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-10-16T02:38:53.693

您可以在 regedit 中搜索您的 ocx 名称

# mysql - MySQL全文搜索？

> ID：796427
> 
> 赞同：1
> 
> 时间：2009-04-28T06:11:47.840
> 
> 标签：mysql, database, search, full-text-search

我正在研究我网站中的搜索功能。我想为用户提供一个最好的搜索机制。我正在使用 PHP/MYSQL。

假设用户搜索“运动”。

我有 30 条包含单词“sport”的记录和 5 条包含单词“sports”的记录，但是当我搜索运动时，以下查询仅返回包含单词“sport”的结果 30。但实际上我认为提供良好搜索结果的最佳方式是显示所有 30+5 条记录，所有记录有运动或运动。

```
SELECT DISTINCT p.id, p.title, p.descr, p.tags FROM pdata p WHERE MATCH (p.title, p.tags, p.descr) AGAINST ('sport') 
```

请告诉我一些文章或一些提示和技巧，使用它们我将能够提供良好的搜索功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T06:20:19.443

```
...MATCH (p.title, p.tags, p.descr) AGAINST ('sport*' IN BOOLEAN MODE) 
```

可以解决问题。

编辑，[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)是解决此类问题的绝佳资源！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T06:53:48.070

只需在搜索字符串上使用 % 通配符。这将允许匹配由搜索字符串形成的任何单词。遗憾的是，您需要处于布尔模式才能使用此通配符。此外，所有搜索字符串必须大于 3 个字符才能使用全文搜索显示。这可以在 mysql 系统设置中更改，但默认为 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T18:08:14.297

在您的情况下，我会进行以下查询：

> 从 pdata p WHERE 中选择 p.id、p.title、p.descr、p.tags（p.title LIKE '%SPORT%' OR p.tags LIKE '%SPORT%' OR p.descr LIKE'%SPORT%' )

此查询将找到任何涵盖运动杂志、夏季运动等的文章。

# vb.net - 如何获取 CPU 使用率？

> ID：796430
> 
> 赞同：5
> 
> 时间：2009-04-28T06:12:42.067
> 
> 标签：vb.net

如何让 cpu 使用百分比显示在表单的标签中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-28T06:30:57.577

```
Import Namespace System.Diagnostics

' ...
Dim cpu as New PerformanceCounter()
With cpu
    .CategoryName = "Processor"
    .CounterName = "% Processor Time"
    .InstanceName = "_Total"
End With

' ...
myLabel.Text = cpu.NextValue() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-16T21:35:47.137

codekaizen 说：

```
Import Namespace System.Diagnostics

Dim cpu as New PerformanceCounter()
With cpu
    .CategoryName = "Processor"
    .CounterName = "% Processor Time"
    .InstanceName = "_Total"
End With

myLabel.Text = cpu.NextValue() 
```

如果您最终得到“0”（可能是因为您刚刚创建了 PerformanceCounter 然后直接使用它），您需要添加 2 行，因为 PerformanceCounter 需要一些时间来工作：

```
System.Threading.Thread.Sleep(1000)
myLabel.Text= cpu.NextValue 
```

为了避免这种睡眠，您可能希望在您的类而不是您的子/函数中声明 PerformanceCounter，并在表单加载事件中设置概率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T06:30:01.590

您至少可以使用 WMI API 在 .NET 中完成此操作。WMI 允许您获取大量 Windows 管理类型数据，例如 CPU 使用率、硬件规格等。

[http://www.aspfree.com/c/a/VB.NET/WMI-Programming-with-Visual-BasicNET-What-is-the-WQL/](http://www.aspfree.com/c/a/VB.NET/WMI-Programming-with-Visual-BasicNET-What-is-the-WQL/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T06:27:30.800

看这里：[如何获取 CPU 使用率 C#](https://stackoverflow.com/questions/278071/how-to-get-the-cpu-usage-c)

应该很容易翻译成 VB.Net

# html - 如何从我的页面中删除此控制台？

> ID：796440
> 
> 赞同：0
> 
> 时间：2009-04-28T06:19:00.587
> 
> 标签：html, internet-explorer

我在 Firefox 上测试我的网页，一切看起来都很好，但是当我在 IE 或 chrome 上运行我的页面时

**清除 ReCSS 控制台 DOM 对象 关闭**

它是什么，我怎样才能删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-11-08T04:46:11.890

这个让我也去了一段时间。如果您正在使用 DOJO 框架，那么您需要将 Debug=false 因为这是它附带的 firebug-lite 控制台！如果不是，它仍然是 Firebug-lite 控制台。Firebug-lite 不会在 Firefox 上显示，因为它具有完整的 Firebug，因此它会出现在其他浏览器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T06:26:59.333

Firefox 处理的 html 格式可能与 IE 和 Chrome 不同。确保您在整个过程中都有匹配的开始和结束标签！

如果您发布有问题的 html，我们可能会提供更多帮助...

# asp.net-mvc - 使用 LINQ 和 ASP.NET MVC 聚合数据

> ID：796441
> 
> 赞同：0
> 
> 时间：2009-04-28T06:19:13.893
> 
> 标签：asp.net-mvc, linq, linq-to-sql

假设我有一个结构

**小部件**

*   ID
*   姓名

和一个名为

**小部件投票计数**

*   widgetId（FK 到 Widget.ID）
*   票数

我想在我的视图上显示 Widget 的实例以及相应的聚合计数

```
WIDGET-TITLE     WIDGET-COUNT(which is the sum of WidgetVoteCount.numberOfVotes)
Blue Widget       5
Purple Widget     6
etc               etc 
```

所以我创建了我自己的类型并传递到我的视图中

```
Public Class WidgetWithCounts
{
    public Widget widget;
    public Int widgetCount;
} 
```

有人可以帮我一个 LINQ 查询，我可以在我的控制器中启动它来填充这个 WidgetWithCounts 类吗？我可以用一个查询来完成这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T06:27:07.773

查看 LINQ 101 示例中的聚合示例：

[http://msdn.microsoft.com/en-us/vcsharp/aa336747.aspx#countSimple](http://msdn.microsoft.com/en-us/vcsharp/aa336747.aspx#countSimple)

> 此示例使用 Count 返回客户列表以及每个客户有多少订单。

```
public void Linq76() { 
   List customers = GetCustomerList();

   var orderCounts = 
      from c in customers 
      select new {c.CustomerID, OrderCount = c.Orders.Count()};

   ObjectDumper.Write(orderCounts); 
} 
```

# php - 发布表单时 PHP 标头重定向不起作用 - 使用输出缓冲区 - 但在其他情况下呢？

> ID：796444
> 
> 赞同：1
> 
> 时间：2009-04-28T06:20:53.047
> 
> 标签：php, forms, post, header

我有一个不寻常的问题，只发生在一台服务器上。以下代码

```
....
elseif ($_GET['action']=='login') {

 if (empty($_POST['login_name'])) { $_POST['login_name']=''; }
 if (empty($_POST['login_pass'])) { $_POST['login_pass']=''; }
 if (!empty($_POST['send'])) {
  if (($_POST['login_name']==_ADMIN_NAME) and    ($_POST['login_pass']==_ADMIN_PASS)) {
   //Successfully logged in
   $_SESSION['logged']=1;

// DOES NOT WORK
   header('Location: '.$filename);
   die('Command '.$filename);
  }
 }
// Show Form;
include('plogin.inc.php');
} 
elseif ($_GET['action']=='logout') {
 $_SESSION['logged']=-1;
// DOES WORK!
 header('Location: '.$filename);
} 
```

所以问题是，如果我点击链接注销，一切顺利，我被重定向到 $filename。如果我提交登录表单，它会检查帖子是否正确，设置会话变量，但随后死亡而不是重定向。

我打开了输出缓冲区，所有错误报告但（没有错误），当我使用表单发布时它不会重定向，即使它确实通过了（因为设置了会话变量并且我进入了模具部分）

这种行为的原因可能是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T07:16:08.983

我也发现重定向在 POST 请求后有时不起作用。我认为这是浏览器而不是服务器端的问题。

我使用这样的东西：

```
if( sizeof( $_POST ) == 0 ) header( "Location: " . $url );
else echo '<html><head><meta http-equiv="refresh" content="1;url=' . $url . '"/></head><body>Redirecting to ' . $url . '</body></html>' 
```

简而言之，如果它是一个 POST 请求 - 那么我使用 html 刷新重定向，否则 - 正常的标头重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T06:43:07.050

您是否测试过 a) 代码已到达并且 b) 错误报告确实有效？

```
//成功登录
$_SESSION['logged']=1;

// 代码到达，error_reporting 测试
echo 'debug: will send location header', $filename, $unsetVariableTriggeringWarning;
冲洗（）；

如果（headers_sent（））{
  die('无法发送位置标头（不再）');
}
别的 {
  header('位置：'.$filename);
  死（）;
}
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T06:26:54.997

可能是一件简单的事情。header() 函数确实设置了一个标头，但不会终止脚本，以便在调用 header() 后立即发送标头。

您需要让 php 将脚本结果发送到客户端。当您使用输出缓冲时，此结果会一直保留到您触发输出为止。试试这个：

```
header('Location: '.$filename);
ob_end_flush();
exit(); 
```

问候，马里奥

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T06:56:23.053

该行与

```
die('Command '.$filename); 
```

可能是罪魁祸首。如果`die`(or `exit`) 函数（或实际上是语言结构）将字符串作为参数，则在停止之前将其打印在另一侧。如果您发送标头，PHP 不喜欢您尝试输出任何内容。

如果您使用的是相当新的 PHP (>= 4.3.0 iirc)，您可以使用整数 0..255 来标记退出条件（如果您愿意的话），它不会被打印出来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-12T19:04:13.510

当您发送重定向时，PHP 会将值放在 HTTP 响应标头中。正文跟随标题。因此，如果您在使用 Header 函数之前回显/打印任何类型的值，它会失败，因为 Response Headers 已经出来了。在打印任何文本之前尝试相同的脚本，它会起作用。

**正常的 HTTP 响应**

HTTP/1.1 200 OK 日期：2011 年 1 月 12 日星期三 18:40:22 GMT 服务器：Apache/2.2.17 (Unix) mod_ssl/2.2.17 OpenSSL/0.9.8e-fips-rhel5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/ 5.0.2.2635 X-Powered-By: PHP/5.2.14 过期时间: Thu, 19 Nov 1981 08:52:00 GMT 缓存控制: no-store, no-cache, must-revalidate, post-check=0, pre -check=0 Pragma: no-cache Keep-Alive: timeout=5, max=100 Connection: Keep-Alive Transfer-Encoding: chunked Content-Type: text/html

[邮件正文]

HTTP/1.1 302 发现日期：2011 年 1 月 12 日星期三 18:40:22 GMT 服务器：Apache/2.2.17 (Unix) mod_ssl/2.2.17 OpenSSL/0.9.8e-fips-rhel5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/ 5.0.2.2635 X-Powered-By：PHP/5.2.14 位置：**profile.php** 内容类型：text/html

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T09:30:45.447

根据我的经验，您在进行重定向时无法发送任何内容。所以我猜你的问题是 die() 参数。

我现在在文档中找不到这个，但是尝试在没有参数的情况下使用它来死（）或者只使用 exit；我敢打赌它会奏效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-02-28T05:51:28.120

```
 header('Location: '.$filename);
flush(); //Try to force server to send header before script die
   die('Command '.$filename); 
```

我遇到了同样的问题： script: header('Location: ...'); 死（）;

发送标头之前的脚本通过 POST 接收到一些数据，如果数据新，则对 DB 进行更改。奇怪的是，当 POST 数据很小且对 DB 重定向的更改很小时，当 POST 数据较大且对 DB 重定向的更改很大时，则不起作用。在 header() 之后使用 flush() 解决了我的问题。

PHP 版本 5.2.17 Apache/2.2.3 (CentOS)

在我看来，看起来服务器将标头推送到缓冲区并在将缓冲区内容发送给用户之前死掉，这就是为什么 flush() 有帮助。

如果刷新不起作用，请参阅有关输出缓冲设置和 zlib.compression 的注释： [http: //ru2.php.net/manual/en/function.flush.php](http://ru2.php.net/manual/en/function.flush.php)

# php - 使用 PHP 将数字舍入到最接近的 0.2

> ID：796450
> 
> 赞同：6
> 
> 时间：2009-04-28T06:22:41.997
> 
> 标签：php, math, rounding

我正在使用 5 角星创建这个评级系统。我希望标题包括平均评分。所以我创建了显示 1/5 的星星。使用“1.2”，我会得到一颗满星，下一颗星得到一分，依此类推......

但我还没有找到一个很好的方法来四舍五入到最接近的 0.2... 我想我可以乘以 10，然后四舍五入，然后运行一个开关，从 1 到 2、3 到 4 等等在。但这似乎乏味且不必要……

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-28T06:26:46.353

```
round(3.78 * 5) / 5 = 3.8 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-28T06:55:02.417

灵活的解决方案

```
function roundToNearestFraction( $number, $fractionAsDecimal )
{
     $factor = 1 / $fractionAsDecimal;
     return round( $number * $factor ) / $factor;
}

// Round to nearest fifth
echo roundToNearestFraction( 3.78, 1/5 );

// Round to nearest third
echo roundToNearestFraction( 3.78, 1/3 ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T06:27:00.333

```
function round2($original) {
    $times5 = $original * 5;
    return round($times5) / 5;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T06:28:03.170

所以你的总数是 25，是否可以不使用浮点数并使用 1->25/25？这样就需要更少的计算......（如果有的话）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-05T22:01:23.760

为什么每个人都提供需要更深入检查或转换的解决方案？想要0.2？然后：

```
round($n / 0.2) * 0.2; // $n = 3.78 / 0.2 = 18.9 (=) 19 * 0.2 = 3.8 // 
```

想要5个？然后：

```
round($n / 5) * 5; // $n = 17 / 5 = 3.4 (=) 3 * 5 = 15 // 
```

就这么简单。

# javascript - 如何根据 django admin 中的另一个选择字段限制选择字段选项

> ID：796466
> 
> 赞同：14
> 
> 时间：2009-04-28T06:28:14.540
> 
> 标签：javascript, python, django, django-admin

我有以下型号：

```
class Category(models.Model):
    name = models.CharField(max_length=40)

class Item(models.Model):
    name = models.CharField(max_length=40)
    category = models.ForeignKey(Category)

class Demo(models.Model):
    name = models.CharField(max_length=40)
    category = models.ForeignKey(Category)
    item = models.ForeignKey(Item) 
```

在创建新Demo时的管理界面中，用户从下拉列表中选择类别后，我想限制“项目”下拉列表中的选择数量。如果用户选择另一个类别，则项目选择应相应更新。我想在客户端上限制项目选择，甚至在它到达服务器上的表单验证之前。这是为了可用性，因为项目列表可能超过 1000 个，能够按类别缩小范围将有助于使其更易于管理。

是否有这样做的“django 方式”或者自定义 JavaScript 是这里唯一的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T07:07:33.667

这是一些 javascript（基于 JQuery）在类别更改时更改项目选项值：

```
<script charset="utf-8" type="text/javascript">
  $(function(){
    $("select#id_category").change(function(){
      $.getJSON("/items/",{id: $(this).val(), view: 'json'}, function(j) {
        var options = '<option value="">--------&nbsp;</option>';
        for (var i = 0; i < j.length; i++) {
          options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
        }
        $("#id_item").html(options);
        $("#id_item option:first").attr('selected', 'selected');
      })
      $("#id_category").attr('selected', 'selected');
    })
  })
</script> 
```

您需要在提供有效项目的 JSON 列表的 /items/ URL 上调用视图。

您可以使用[模型管理媒体定义](http://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-media-definitions)将其连接到您的管理员中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-07T01:06:07.787

有[django-smart-selects](https://github.com/digi604/django-smart-selects)：

如果您有以下型号：

```
class Location(models.Model)
    continent = models.ForeignKey(Continent)
    country = models.ForeignKey(Country)
    area = models.ForeignKey(Area)
    city = models.CharField(max_length=50)
    street = models.CharField(max_length=100) 
```

如果您选择一个大陆，您希望只有位于该大陆的国家/地区可用，并且您可以执行以下操作的区域相同：

```
from smart_selects.db_fields import ChainedForeignKey 

class Location(models.Model)
    continent = models.ForeignKey(Continent)
    country = ChainedForeignKey(
        Country, 
        chained_field="continent",
        chained_model_field="continent", 
        show_all=False, 
        auto_choose=True
    )
    area = ChainedForeignKey(Area, chained_field="country", chained_model_field="country")
    city = models.CharField(max_length=50)
    street = models.CharField(max_length=100) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:30:30.313

您将需要某种基于非服务器的过滤对象机制。要么，要么您可以在进行选择时重新加载页面（这很可能在 JavaScript 中完成）。

否则，无法从服务器获取数据子集到客户端。

# asp.net - 使用 SqlMembershipProvider 禁用帐户锁定

> ID：796472
> 
> 赞同：28
> 
> 时间：2009-04-28T06:30:36.720
> 
> 标签：asp.net, asp.net-membership, membership, sqlmembershipprovider

如何禁用**SqlMembershipProvider**的帐户锁定功能？

[MaxInvalidPasswordAttempts](http://msdn.microsoft.com/en-us/library/system.web.security.membership.maxinvalidpasswordattempts.aspx)属性的 MSDN 文档未指定如何禁用它。如果找不到正确的方法，我会将 maxInvalidPasswordAttempts 属性设置为 int 的最大值，这可以有效地实现相同的结果。

我很清楚禁用帐户锁定不是最好的主意，但我需要在短期内实现这一目标。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-04-28T08:03:15.950

将 maxInvalidPasswordAttempts 属性设置为 Int32.MaxValue 按照我在问题中的建议以及下面的 web.config 片段中所示的那样工作。我使用[Reflector](http://www.red-gate.com/products/reflector/)查看了 SqlMembershipProvider 实现，但看不到如何显式禁用帐户锁定功能，因此我将接受它作为解决方案。

我没有测试彻底设置 PasswordAttemptWindow 的建议，但它不能设置为 0（必须是正整数，即至少一分钟），因此如果不将 maxInvalidPasswordAttempts 属性设置得足够高以防止在一分钟的时间。

```
<membership defaultProvider="SqlMembershipProvider">
  <providers>
    <add name="SqlMembershipProvider" type="..."
         maxInvalidPasswordAttempts="2147483647"
         />
  </providers> 
```

# batch-file - 显示 Windows 命令提示符输出并将其重定向到文件

> ID：796476
> 
> 赞同：424
> 
> 时间：2009-04-28T06:32:23.283
> 
> 标签：batch-file, cmd, stdout, tee

如何在 Windows 命令提示符下运行命令行应用程序并同时显示输出并重定向到文件？

例如，如果我要运行 command `dir > test.txt`，这会将输出重定向到一个名为`test.txt`而不显示结果的文件。

我如何编写一个命令来显示输出**并将**输出重定向到 Windows 命令提示符中的文件，类似于`tee`Unix 上的命令？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-12-31T08:59:47.527

要扩展[davor 的答案](https://stackoverflow.com/a/12438402/148241)，您可以像这样使用 PowerShell：

```
powershell "dir | tee test.txt" 
```

如果您尝试重定向当前目录中 exe 的输出，则需要`.\`在文件名上使用，例如：

```
powershell ".\something.exe | tee test.txt" 
```

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2009-07-17T06:59:04.813

我能够找到将输出重定向到文件**然后**到控制台的解决方案/解决方法：

```
dir > a.txt | type a.txt 
```

其中**dir**是需要重定向输出的命令，**a.txt**是存储输出的文件。

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2009-04-28T06:41:28.910

Unix 命令有一个 Win32 端口，`tee`正是这样做的。请参阅[http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)或[http://getgnuwin32.sourceforge.net/](http://getgnuwin32.sourceforge.net/)

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2012-09-15T14:57:49.803

看看这个：[温蒂](http://code.google.com/p/wintee/)

不需要cygwin。

我确实遇到并报告了一些问题。

您也可以检查[unxutils](http://unxutils.sourceforge.net/)，因为它包含 tee（并且不需要 cygwin），但请注意输出 EOL 在这里类似于 UNIX。

最后但同样重要的是，如果你有 PowerShell，你可以试试 Tee-Object。键入`get-help tee-object`PowerShell 控制台以获取更多信息。

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2011-02-02T05:25:18.113

@tori3852

我找到

```
dir > a.txt | type a.txt 
```

没有工作（仅目录列表的前几行 - 怀疑某种进程分叉和第二部分，'type' 命令在可怕的列表完成之前终止？），所以我使用了：

```
dir > z.txt && type z.txt 
```

确实如此 - 顺序命令，一个在第二个开始之前完成。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2009-04-28T06:48:20.733

不幸的是，没有这样的事情。

Windows 控制台应用程序只有一个输出句柄。（嗯，有两个`STDOUT`，`STDERR`但在这里没关系）`>`将通常写入控制台句柄的输出重定向到文件句柄。

如果您想进行某种多路复用，则必须使用可以将输出转移到的外部应用程序。然后，此应用程序可以写入文件并再次写入控制台。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2009-04-28T07:01:15.023

一个简单的 C# 控制台应用程序就可以解决问题：

```
using System;
using System.Collections.Generic;
using System.IO;

namespace CopyToFiles
{
    class Program
    {
        static void Main(string[] args)
        {
            var buffer = new char[100];
            var outputs = new List<TextWriter>();

            foreach (var file in args)
                outputs.Add(new StreamWriter(file));

            outputs.Add(Console.Out);

            int bytesRead;
            do
            {
                bytesRead = Console.In.ReadBlock(buffer, 0, buffer.Length);
                outputs.ForEach(o => o.Write(buffer, 0, bytesRead));
            } while (bytesRead == buffer.Length);

            outputs.ForEach(o => o.Close());
        }
    }
} 
```

要使用它，您只需将源命令通过管道传输到程序中，并提供要将输出复制到的任何文件的路径。例如：

```
dir | CopyToFiles files1.txt files2.txt 
```

将显示 dir 的结果并将结果存储在 files1.txt 和 files2.txt 中。

请注意，上面的错误处理方式并不多（任何东西！），实际上可能不需要支持多个文件。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2011-03-17T01:49:32.033

这可行，虽然它有点难看：

```
dir >_ && type _ && type _ > a.txt 
```

它比其他一些解决方案更灵活一点，因为它可以逐语句工作，因此您也可以使用它来追加。我在批处理文件中经常使用它来记录和显示消息：

```
ECHO Print line to screen and log to file.  >_ && type _ && type _ >> logfile.txt 
```

是的，您可以重复 ECHO 语句（一次用于屏幕，第二次重定向到日志文件），但这看起来同样糟糕，并且有点维护问题。至少这样您就不必在两个地方对消息进行更改。

请注意，_ 只是一个短文件名，因此您需要确保在批处理文件的末尾删除它（如果您使用的是批处理文件）。

* * *

## 回答 #9

> 赞同：19
> 
> 时间：2016-06-18T11:07:43.500

我想稍微扩展一下 Saxon Druce 的[出色回答](https://stackoverflow.com/a/20854632/3477385)。

如前所述，您可以像这样重定向当前目录中可执行文件的输出：

```
powershell ".\something.exe | tee test.txt" 
```

但是，这仅记录`stdout`到`test.txt`. 它也不记录`stderr`。

显而易见的解决方案是使用这样的东西：

```
powershell ".\something.exe 2>&1 | tee test.txt" 
```

但是，这不适用于所有`something.exe`s。有些`something.exe`s 会将 the 解释`2>&1`为参数并失败。正确的解决方案是只在 the`something.exe`及其开关和参数周围加上撇号，如下所示：

```
powershell ".\something.exe --switch1 --switch2 … arg1 arg2 …&quot; 2^>^&1 ^| tee test.txt 
```

但请注意，在这种情况下，您必须转义特殊的 cmd-shell 字符“>&|” 每个都有一个“^”，所以它们只能由 powershell 解释。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2011-10-21T20:36:05.677

mtee 是一个小型实用程序，非常适合此目的。它是免费的，源代码是开放的，而且它可以正常工作。

您可以在 [http://www.commandline.co.uk](http://www.commandline.co.uk)找到它。

在批处理文件中用于显示输出并同时创建日志文件，语法如下所示：

```
 someprocess | mtee /+ mylogfile.txt 
```

其中 /+ 表示追加输出。

当然，这假定您已将 mtee 复制到 PATH 中的文件夹中。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2009-04-28T07:06:33.873

我同意 Brian Rasmussen 的观点，unxutils 端口是最简单的方法。在他的[脚本页面的](http://www.robvanderwoude.com/)[批处理文件](http://www.robvanderwoude.com/batchfiles.php)部分，Rob van der Woude 提供了大量有关使用 MS-DOS 和 CMD 命令的信息。我认为他可能对您的问题有一个本机解决方案，在那里挖掘后我发现[了 TEE.BAT](http://www.robvanderwoude.com/tee.php#TeeNT)，这似乎就是 tee 的 MS-DOS 批处理语言实现。这是一个看起来很复杂的批处理文件，我仍然倾向于使用 unxutils 端口。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2014-05-16T13:12:25.640

如果您的 Windows 环境路径中有 cygwin，则可以使用：

```
 dir > a.txt | tail -f a.txt 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2011-11-02T15:23:07.303

`dir 1>a.txt 2>&1 | type a.txt`

这将有助于重定向 STDOUT 和 STDERR

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-05-20T03:07:04.657

我知道这是一个非常古老的话题，但是在以前的答案中，并没有完整实现以批处理方式编写的实时 Tee。我下面的解决方案是一个 Batch-JScript 混合脚本，它使用 JScript 部分只是为了从管道命令中获取输出，但是数据的处理是在 Batch 部分中完成的。这种方法的优点是任何 Batch 程序员都可以修改该程序以满足特定需求。该程序还正确处理其他批处理文件产生的CLS命令输出，即在检测到CLS命令输出时清除屏幕。

```
@if (@CodeSection == @Batch) @then

@echo off
setlocal EnableDelayedExpansion

rem APATee.bat: Asynchronous (real time) Tee program, Batch-JScript hybrid version
rem Antonio Perez Ayala

rem The advantage of this program is that the data management is written in Batch code,
rem so any Batch programmer may modify it to fit their own needs.
rem As an example of this feature, CLS command is correctly managed

if "%~1" equ "" (
   echo Duplicate the Stdout output of a command in the screen and a disk file
   echo/
   echo anyCommand ^| APATee teeFile.txt [/A]
   echo/
   echo If /A switch is given, anyCommand output is *appended* to teeFile.txt
   goto :EOF
)

if "%2" equ ":TeeProcess" goto TeeProcess

rem Get the output of CLS command
for /F %%a in ('cls') do set "cls=%%a"

rem If /A switch is not provided, delete the file that receives Tee output
if /I "%~2" neq "/A" if exist %1 del %1

rem Create the semaphore-signal file and start the asynchronous Tee process
echo X > Flag.out
if exist Flag.in del Flag.in
Cscript //nologo //E:JScript "%~F0" | "%~F0" %1 :TeeProcess
del Flag.out
goto :EOF

:TeeProcess
   rem Wait for "Data Available" signal
   if not exist Flag.in goto TeeProcess
   rem Read the line sent by JScript section
   set line=
   set /P line=
   rem Set "Data Read" acknowledgement
   ren Flag.in Flag.out
   rem Check for the standard "End Of piped File" mark
   if "!line!" equ ":_EOF_:" exit /B
   rem Correctly manage CLS command
   if "!line:~0,1!" equ "!cls!" (
      cls
      set "line=!line:~1!"
   )
   rem Duplicate the line in Stdout and the Tee output file
   echo(!line!
   echo(!line!>> %1
goto TeeProcess

@end

// JScript section

var fso = new ActiveXObject("Scripting.FileSystemObject");
// Process all lines of Stdin
while ( ! WScript.Stdin.AtEndOfStream ) {
   // Read the next line from Stdin
   var line = WScript.Stdin.ReadLine();
   // Wait for "Data Read" acknowledgement
   while ( ! fso.FileExists("Flag.out") ) {
      WScript.Sleep(10);
   }
   // Send the line to Batch section
   WScript.Stdout.WriteLine(line);
   // Set "Data Available" signal
   fso.MoveFile("Flag.out", "Flag.in");
}
// Wait for last "Data Read" acknowledgement
while ( ! fso.FileExists("Flag.out") ) {
      WScript.Sleep(10);
}
// Send the standard "End Of piped File" mark
WScript.Stdout.WriteLine(":_EOF_:");
fso.MoveFile("Flag.out", "Flag.in"); 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2014-12-02T19:50:22.917

我也在寻找相同的解决方案，经过一番尝试，我成功地在命令提示符中实现了这一点。这是我的解决方案：

```
@Echo off
for /f "Delims=" %%a IN (xyz.bat) do (
%%a > _ && type _ && type _ >> log.txt
)
@Echo on 
```

它甚至还可以捕获任何 PAUSE 命令。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2011-11-02T18:17:52.297

这是我根据其他答案之一使用的示例

```
@echo off
REM SOME CODE
set __ERROR_LOG=c:\errors.txt
REM set __IPADDRESS=x.x.x.x

REM Test a variable
if not defined __IPADDRESS (
     REM Call function with some data and terminate
     call :TEE %DATE%,%TIME%,IP ADDRESS IS NOT DEFINED
     goto :EOF
)

REM If test happens to be successful, TEE out a message and end script.
call :TEE Script Ended Successful
goto :EOF

REM THE TEE FUNCTION
:TEE
for /f "tokens=*" %%Z in ("%*") do (
     >  CON ECHO.%%Z
     >> "%__ERROR_LOG%" ECHO.%%Z
     goto :EOF
) 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2015-01-23T18:46:10.670

将输出发送到控制台，附加到控制台日志，从当前命令中删除输出

```
dir  >> usb-create.1 && type usb-create.1 >> usb-create.log | type usb-create.1 && del usb-create.1 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-04-05T13:40:45.877

像这样的东西应该做你需要的吗？

```
%DATE%_%TIME% > c:\a.txt & type c:\a.txt
ipconfig >> c:\a.txt & type c:\a.txt
ping localhost >> c:\a.txt & type c:\a.txt
pause 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2013-05-03T12:47:31.410

就像unix一样。

`dir | tee a.txt`

可以在 windows XP 上运行，它需要`mksnt`安装。

它显示在提示符上并附加到文件中。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2020-07-07T09:09:10.757

这不是另一个答案，而是对已经存在的答案的概述和澄清，例如 [显示 Windows 命令提示符输出并将其重定向到文件](https://stackoverflow.com/questions/796476/displaying-windows-command-prompt-output-and-redirecting-it-to-a-file/796492#796492) 等

我自己发现有一系列问题导致一组 tee 实现在 Windows 中不可靠（`Windows 7`在我的情况下）。

我需要专门使用 tee 实现，因为已经使用了带有自重定向的批处理脚本：

```
@echo off

setlocal

... some conditions here ..

rem the redirection
"%COMSPEC%" /C call %0 %* 2>&1 | "<path_to_tee_utililty>" ".log\<log_file_name_with_date_and_time>.%~nx0.log"
exit /b

:IMPL
... here the rest of script ... 
```

如果与 tee 实用程序一起使用，脚本和对脚本内某些实用程序的调用可能会破坏输出。

* * *

1.  *gnuwin32 实现*：

[http://gnuwin32.sourceforge.net/packages/coreutils.htm](http://gnuwin32.sourceforge.net/packages/coreutils.htm)

**优点**：

*   正确处理标准输出和控制台进度条，其中`\r`字符被大量使用。

**缺点**：

*   使控制台进度条仅在日志文件中绘制，但在控制台窗口中没有重复或可见。
*   引发多条错误消息`Cwrite error: No such file or directory`，因为 cmd 解释器似乎过早关闭管道/标准输出，并且此后无法自行关闭（垃圾邮件直到终止）。
*   不在控制台窗口中复制/打印`pause`命令 ( ) 的输出。`Press any key to continue...`

* * *

2.  *wintee 实施*：

[https://code.google.com/archive/p/wintee/](https://code.google.com/archive/p/wintee/)

[https://github.com/rbuhl/wintee](https://github.com/rbuhl/wintee)

**优点**：

*   在控制台窗口和日志文件（多次打印）中显示控制台进度条。
*   是否在控制台窗口中复制/打印`pause`命令 ( ) 的输出。`Press any key to continue...`

**缺点**：

*   不正确地处理`\r`字符，输出混合和混乱（[https://code.google.com/archive/p/wintee/issues/7](https://code.google.com/archive/p/wintee/issues/7)）。
*   有其他问题：[https ://code.google.com/archive/p/wintee/issues](https://code.google.com/archive/p/wintee/issues)

* * *

3.  *UnxUtils*实现：

[http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)

[https://sourceforge.net/projects/unxutils/files/unxutils/current/](https://sourceforge.net/projects/unxutils/files/unxutils/current/)

**优点**

*   在控制台窗口和日志文件（多次打印）中显示控制台进度条。
*   正确处理`\r`角色。
*   是否在控制台窗口中复制/打印`pause`命令 ( ) 的输出。`Press any key to continue...`

**缺点**

*还没找到*

* * *

4.  ss64.net*实现*：

[http://ss64.net/westlake/nt](http://ss64.net/westlake/nt)

[http://ss64.net/westlake/nt/tee.zip](http://ss64.net/westlake/nt/tee.zip)

**优点**：

*   在控制台窗口和日志文件（多次打印）中显示控制台进度条。

**缺点**：

*   字符处理不正确`\r`，输出混杂
*   出于某种原因，在按键后会在控制台窗口中复制/打印`pause`命令 ( ) 的输出。`Press any key to continue...`

* * *

5.  ritchielawrence *mtee*实施：

[https://ritchielawrence.github.io/mtee](https://ritchielawrence.github.io/mtee)

[https://github.com/ritchielawrence/mtee](https://github.com/ritchielawrence/mtee)

**优点**

*   在控制台窗口和日志文件（多次打印）中显示控制台进度条。
*   正确处理`\r`角色。
*   是否在控制台窗口中复制/打印`pause`命令 ( ) 的输出。`Press any key to continue...`
*   错误代码保留功能 w/oa 需要使用`doskey`（`/E`标志，[Windows 命令解释器：如何获取第一个管道命令的退出代码](https://stackoverflow.com/questions/11170753/windows-command-interpreter-how-to-obtain-exit-code-of-first-piped-command)）的解决方法

**缺点**

*   不支持日志文件路径中的正斜杠字符 ( [https://github.com/ritchielawrence/mtee/issues/6](https://github.com/ritchielawrence/mtee/issues/6) )

*   有竞争条件问题，当无法提取管道进程退出代码时，因为它在访问之前已经关闭（[https://github.com/ritchielawrence/mtee/issues/4](https://github.com/ritchielawrence/mtee/issues/4)）

* * *

因此，如果您在上述之间选择 tee 实用程序实现，那么更好的选择是`UnxUtils`or `mtee`。

* * *

如果您正在寻找具有更多功能和更少问题的更好实现，那么您可以使用`callf`实用程序：
[https ://github.com/andry81/contools/blob/trunk/Utilities/src/callf/help.tpl](https://github.com/andry81/contools/blob/trunk/Utilities/src/callf/help.tpl)

您可以运行而不是：

```
call test.bat | mtee /E 1.log 
```

这个：

```
callf.exe /ret-child-exit /tee-stdout 1.log /tee-stdout-dup 1 "" "cmd.exe /c call test.bat" 
```

这样做更好，因为它可以`stdout`单独进行管道传输`stderr`，您甚至可以使用命名管道在具有管理员权限隔离的进程之间进行管道传输。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2015-07-27T16:36:32.577

这是 MTS 先前[答案](https://stackoverflow.com/a/5333976/4459336)的变体，但它添加了一些可能对其他人有用的功能。这是我使用的方法：

*   命令被设置为变量，以后可以在整个代码中使用，以输出到命令窗口并附加到日志文件，使用`set _Temp_Msg_Cmd=`
    *   该命令已使用胡萝卜字符转义[重定向](http://ss64.com/nt/syntax-redirection.html)`^`，因此最初不会评估命令
*   使用类似于正在运行的批处理文件的文件名创建一个临时文件，该文件`%~n0_temp.txt`使用[命令行参数扩展语法](http://ss64.com/nt/syntax-args.html) `%~n0`来获取批处理文件的名称。
*   输出附加到单独的日志文件`%~n0_log.txt`

以下是命令序列：

1.  输出和错误消息被发送到临时文件`^> %~n0_temp.txt 2^>^&1`
2.  临时文件的内容是：
    *   附加到日志文件`^& type %~n0_temp.txt ^>^> %~n0_log.txt`
    *   输出到命令窗口`^& type %~n0_temp.txt`
3.  带有消息的临时文件被删除`^& del /Q /F %~n0_temp.txt`

这是示例：

`set _Temp_Msg_Cmd= ^> %~n0_temp.txt 2^>^&1 ^& type %~n0_temp.txt ^>^> %~n0_log.txt ^& type %~n0_temp.txt ^& del /Q /F %~n0_temp.txt`

这样，命令可以简单地附加在批处理文件中的后续命令之后，看起来更干净：

`echo test message %_Temp_Msg_Cmd%`

这也可以添加到其他命令的末尾。据我所知，当消息有多行时它会起作用。例如，如果有错误消息，以下命令会输出两行：

`net use M: /D /Y %_Temp_Msg_Cmd%`

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-02-27T21:45:11.283

我使用带有“for”语句的批处理子例程来一次获取一行命令输出，并将该行写入文件并将其输出到控制台。

```
@echo off
set logfile=test.log

call :ExecuteAndTee dir C:\Program Files

Exit /B 0

:ExecuteAndTee
setlocal enabledelayedexpansion
echo Executing '%*'
  for /f "delims=" %%a in ('%* 2^>^&1') do (echo.%%a & echo.%%a>>%logfile%)
endlocal
Exit /B 0 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2010-12-03T14:15:07.237

```
@echo on

set startDate=%date%
set startTime=%time%

set /a sth=%startTime:~0,2%
set /a stm=1%startTime:~3,2% - 100
set /a sts=1%startTime:~6,2% - 100

fullprocess.bat > C:\LOGS\%startDate%_%sth%.%stm%.%sts%.LOG | fullprocess.bat 
```

* * *

这将使用当前日期时间创建一个日志文件，您可以在此过程中使用控制台行

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-07-02T11:05:10.397

我刚刚找到了一种使用 perl 作为替代方案的方法，例如：

`CMD1 | perl -ne "print $_; print STDERR $_;" 2> OUTPUT.TEE`

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2019-02-06T20:37:42.713

如果你在 CLI 上，为什么不使用 FOR 循环来“做”任何你想做的事情：

```
for /F "delims=" %a in ('dir') do @echo %a && echo %a >> output.txt 
```

用于循环的 Windows CMD 上的大量资源：[https ://ss64.com/nt/for_cmd.html](https://ss64.com/nt/for_cmd.html) 这里的关键是将分隔符（delims）设置为空，这将分解每一行输出。这样它就不会破坏默认的空白。%a 是一个任意字母，但它在“do”部分中用于，嗯……对每行解析的字符做一些事情。在这种情况下，我们可以使用与号 (&&) 执行第二个 echo 命令来创建或附加 (>>) 到我们选择的文件。如果在写入文件时出现问题，为了更安全地保持 DO 命令的顺序，我们至少会首先将回显发送到控制台。第一个回显前面的 at 符号 (@) 禁止控制台显示回显命令本身，而是仅显示命令的结果，即在 %a 中显示字符。否则你会看到：

> echo 驱动器 [x] 中的
> 卷是 Windows 驱动器 [x] 中的卷是 Windows

更新： /F 跳过空白行，唯一的解决方法是预先过滤输出，在每一行中添加一个字符（可能通过命令 find 使用行号）。在 CLI 中解决这个问题并不快也不漂亮。另外，我没有包含 STDERR，所以这里也捕获错误：

```
for /F "delims=" %a in ('dir 2^>^&1') do @echo %a & echo %a >> output.txt 
```

[重定向错误消息](https://support.microsoft.com/en-us/help/110930/redirecting-error-messages-from-command-prompt-stderr-stdout)

插入符号 (^) 用于对它们后面的符号进行转义，因为该命令是一个正在被解释的字符串，而不是直接在命令行上输入它。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2010-01-10T21:35:45.510

> 如何显示输出并将输出重定向到文件。假设如果我使用 dos 命令 dir > test.txt ，该命令会将输出重定向到文件 test.txt 而不显示结果。如何编写命令以显示输出并将输出重定向到使用 DOS 即 windows 命令提示符的文件，而不是在 UNIX/LINUX 中。

您可能会在 biterscripting ( [http://www.biterscripting.com](http://www.biterscripting.com) ) 中发现这些命令很有用。

```
var str output
lf > $output
echo $output                            # Will show output on screen.
echo $output > "test.txt"               # Will write output to file test.txt.
system start "test.txt"                 # Will open file test.txt for viewing/editing. 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2012-09-20T17:48:07.167

这可以实时工作，但也很丑陋，性能也很慢。也没有经过很好的测试：

```
@echo off
cls
SET MYCOMMAND=dir /B
ECHO File called 'test.bat' > out.txt
for /f "usebackq delims=" %%I in (`%MYCOMMAND%`) do (
  ECHO %%I
  ECHO %%I >> out.txt
) 
pause 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2012-11-23T19:50:28.903

另一种方法是在您的程序中将标准输出转换为标准错误：

在java中：

```
System.setOut(new PrintStream(new TeeOutputStream(System.out, System.err))); 
```

然后，在您的 dos 批处理文件中：`java program > log.txt`

标准输出将转到日志文件，标准错误（相同数据）将显示在控制台上。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-07-08T08:52:25.397

如果您希望在屏幕上真正看到某些内容，则以下操作会有所帮助 - 即使批处理文件被重定向到文件。如果重定向到文件，也可以使用设备 CON

例子：

```
ECHO first line on normal stdout. maybe redirected
ECHO second line on normal stdout again. maybe redirected
ECHO third line is to ask the user. not redirected  >CON
ECHO fourth line on normal stdout again. maybe redirected 
```

另请参阅良好的重定向描述： [http ://www.p-dd.com/chapter7-page14.html](http://www.p-dd.com/chapter7-page14.html)

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-02-19T15:39:36.310

我在我的大多数机器上都安装了 perl，所以使用 perl 来回答：tee.pl

```
my $file = shift || "tee.dat";
open $output, ">", $file or die "unable to open $file as output: $!";
while(<STDIN>)
{
    print $_;
    print $output $_;
}
close $output; 
```

目录 | perl tee.pl 或目录 | perl tee.pl 目录.bat

粗糙且未经测试。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-05-06T21:48:22.843

另一种变体是拆分管道，然后根据需要重新定向输出。

```
 @echo off
    for /f "tokens=1,* delims=:" %%P in ('findstr /n "^"') do (
      echo(%%Q
      echo(%%Q>&3
    )
    @exit/b %errorlevel% 
```

将以上内容保存到 .bat 文件中。它还将文件流 1 上的文本输出拆分为文件流 3，您可以根据需要对其进行重定向。在下面的示例中，我将上述脚本称为 splitPipe.bat ...

```
 dir | splitPipe.bat  1>con  2>&1  3>my_stdout.log

    splitPipe.bat 2>nul < somefile.txt 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2020-04-12T20:26:43.730

1.  [https://cygwin.com/install](https://cygwin.com/install)
2.  单击“setup-x86_.exe”的链接
3.  运行安装程序
4.  在〜第 2 页上，选择要下载的“镜像”（我查找了 .edu 域）
5.  我对标准选项说好的
6.  Cygwin 快速完成安装
7.  打开命令
8.  键入`c:\cygwin64\bin\script.exe`并输入
9.  键入`cmd`并输入
10.  运行你的程序
11.  键入`exit`并输入（退出 Cygwin 的 cmd.exe）
12.  键入`exit`并输入（退出 Cygwin 的 script.exe）
13.  在名为“typescript”的文本文件中查看程序的屏幕输出

# javascript - 我们有 Visual Studio 2005/2008 的 Minifier 插件吗？

> ID：796478
> 
> 赞同：2
> 
> 时间：2009-04-28T06:34:28.567
> 
> 标签：javascript, visual-studio, compression, visual-studio-addins

我们有 Visual Studio 2005 的任何 Minifier 插件吗？缩小视觉工作室中的各种文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-16T22:17:11.863

微软今天在 codeplex 上发布了他们的[Microsoft Ajax Minifier 。](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=34488)包括一个 MS 构建任务和一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-07T15:47:27.530

查看[此查询的结果](https://stackoverflow.com/search?q=javascript%20compressor%20visual%20studio)。

看起来[YUI Compressor for .Net](http://www.codeplex.com/YUICompressor)很受欢迎，而[最近的这篇博客文章详细介绍了 JSMin 在 Visual Studio 中的使用](http://encosia.com/2009/05/20/automatically-minify-and-combine-javascript-in-visual-studio/)。

# asp.net - 从多个表中删除 ASP.NET

> ID：796481
> 
> 赞同：2
> 
> 时间：2009-04-28T06:35:28.347
> 
> 标签：asp.net, sql, vb.net, ado.net

如何在 ASP.Net 中使用相同的删除语句一次从两个表中删除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T06:43:11.370

只需连接删除 sql 脚本：

```
Using connection As New SqlConnection(connectionString)
    Dim command As New 
       SqlCommand("DELETE FROM Table1 WHERE ID1=@ID1; DELETE FROM Table2 WHERE ID2=@ID2;", connection)

    command.Parameters.Add("@ID1", 1);
    command.Parameters.Add("@ID2", 2);

    command.Connection.Open()
    command.ExecuteNonQuery()
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T06:41:06.320

我不确定您的意思，但是如果您想使用另一个表的数据从表中删除，可以使用以下代码段（SQL Server）来完成：

```
DELETE x
FROM TableX x INNER JOIN TableY y
   ON x.SomeID = y.SomeID
WHERE ... 
```

如果你想在一个命令中执行两个 DELETE 语句，你可以将它们连接起来，用分号分隔它们：

```
DELETE TableX WHERE SomeID = ...; DELETE TableY WHERE SomeID = ... 
```

您还可以使用存储过程：

```
CREATE PROCEDURE DeleteTwoTables
   @ParamX int,
   @ParamY int
AS
   DELETE TableX WHERE SomeID = @ParamX
   DELETE TableY WHERE SomeID = @ParamY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T06:39:24.610

如果您的数据库是 MsSql，您可以在一个 SqlCommand 中组合多个删除语句。

尝试这个：

```
string deleteQuery = "DELETE FROM Table1; DELETE FROM Table2;";
using (SqlConnection connection = new SqlConnection(connectionstring))
using (SqlCommand deleteCommand = new SqlCommand(deleteQuery, connection))
{
    connection.Open();
    deleteCommand.ExecuteNonQuery();
} 
```

这将一次性删除 table1 和 table2 中的所有记录。

# ios - 将 iPhone 应用程序上传到 AppStore 的步骤

> ID：796482
> 
> 赞同：66
> 
> 时间：2009-04-28T06:36:00.717
> 
> 标签：ios, iphone, app-store

我想知道将我的 iPhone 应用程序上传到 AppStore 的基本步骤。

如何使用证书制作配置文件以及上传应用程序需要进行哪些其他设置？

我刚刚使用 Xcode 和 iPhone SDK V2.2.1 在我的 iMac 上创建了一个应用程序。我需要做什么才能将其上传到 Apple iTunes 商店？

我是其中的一员，我也有分销证书。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-04-28T07:43:48.760

这篇[arstechnica文章](http://arstechnica.com/apple/guides/2009/04/app-store-lessons-dealing-with-pink-uploads-of-doom.ars)描述了基本步骤：

> 首先访问程序门户并确保您的开发人员证书是最新的。它每六个月到期一次，如果您没有要求发行新的，您将无法向 App Store 提交软件。但是，对于大多数经历“厄运的粉红色上传”的人来说，他们的证书已经有效。接下来是什么？
> 
> 打开您的 Xcode 项目并检查您是否已将活动 SDK 设置为设备选项之一，例如 Device - 2.2。意外地将构建设置留给模拟器可能是粉红色拒绝的一个重要原因。这比许多开发人员愿意承认的更频繁。
> 
> 接下来，确保您选择了使用您的发行版（而不是您的开发人员）证书的构建配置。通过在项目窗口左侧的 Groups & Files 列中双击您的目标来检查这一点。目标信息窗口将打开。单击构建选项卡并查看您的代码签名身份。它应该是 iPhone Distribution：后跟您的姓名或公司名称。
> 
> 您可能还想在“属性”选项卡中确认您的应用程序标识符。最有可能的是，在使用开发人员证书进行调试时，您已经正确设置了标识符，但检查起来永远不会有坏处。
> 
> 项目窗口的左上角也会确认您的设置和配置。它应该是类似“Device - 2.2 | Distribution”的内容。这将向您显示活动的 SDK 和配置。
> 
> 如果您的设置正确，但您仍然没有正确完成上传，请清理您的构建。选择“构建”>“清理”（Command-Shift-K）并单击“清理”。或者，您可以从 Finder 手动删除项目中的构建文件夹。清洁后，重新构建新的。
> 
> 如果这不会产生一个应用程序，当压缩后正确加载到 iTunes Connect，退出并重新启动 Xcode。我不是在开玩笑。这个简单的技巧比已经提到的任何其他解决方案解决了更多的签名问题和“对厄运的粉红色拒绝”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T17:09:25.000

Apple 提供详细的图解说明，涵盖流程的每个步骤。登录 iPhone 开发者网站并单击“程序门户”链接。在程序门户中，您会找到程序门户用户指南的链接，这是关于该主题的非常好的参考和指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-29T20:19:07.820

检查您的目标属性中的歌唱身份是否正确。这个覆盖了您在项目属性中拥有的内容。

另外：我不知道这是不是真的——但是当我从 PC 上“准备好二进制上传”时，我没有收到详细说明我的二进制拒绝的电子邮件——但是当我在 MAC 上这样做时我确实收到了一封电子邮件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-26T06:41:00.320

# Xcode 9

如果这是您第一次提交应用程序，我建议您继续阅读完整的[Apple iTunes Connect 文档](https://developer.apple.com/support/itunes-connect/)或阅读以下教程之一：

*   [如何将 iOS 应用程序提交到 App Store](https://code.tutsplus.com/tutorials/how-to-submit-an-ios-app-to-the-app-store--mobile-16812)
*   [如何向 Apple 提交 App：从无帐户到 App Store](https://www.raywenderlich.com/127936/submit-an-app-part-1)

但是，当您只想快速提醒这些步骤时，这些材料会很麻烦。我对此的回答如下：

# 第 1 步：在 iTunes Connect 中创建一个新应用

登录 iTunes Connect 并转到我的应用程序。然后单击“+”按钮并选择新建应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/iSMJy.png)

然后填写新应用的基本信息。app bundle id 必须与您在 Xcode 项目中使用的相同。命名[SKU](https://stackoverflow.com/questions/8710512/itunes-connect-how-to-choose-a-good-sku)可能更好，但我从来不需要它，我只使用捆绑 ID。

![在此处输入图像描述](https://i.stack.imgur.com/rFw10.png)

单击**创建**，然后继续执行步骤 2。

# 第 2 步：在 Xcode 中归档您的应用

从活动方案菜单中选择**通用 iOS 设备。**

[![在此处输入图像描述](https://i.stack.imgur.com/veyQ7.png)](https://i.stack.imgur.com/veyQ7.png)

然后转到**产品 > 存档**。

[![在此处输入图像描述](https://i.stack.imgur.com/n4NpD.png)](https://i.stack.imgur.com/n4NpD.png)

您可能需要稍等片刻才能让 Xcode 完成对项目的归档。之后，您将看到一个包含已归档项目的对话框。您可以选择**上传到 App Store...**并按照提示进行操作。

我有时不得不重复这一步几次，因为我忘了包括一些东西。除了上传等待，这没什么大不了的。继续这样做，直到不再出现错误为止。

# 第 3 步：完成填写 iTunes Connect 信息

回到 iTunes Connect，您将需要完成所有必需的信息和资源。

![在此处输入图像描述](https://i.stack.imgur.com/k73sl.png)

只需浏览所有菜单选项，并确保您输入了所有需要的内容。

# 第 4 步：提交

在 iTunes Connect 中，在应用程序的准备提交部分下，单击**提交以供审核**。就是这样。给它大约一周的时间被接受（或拒绝），但它可能会更快。

# c# - Windows 和 Web 应用程序 C# asp.net 之间的并发

> ID：796483
> 
> 赞同：0
> 
> 时间：2009-04-28T06:37:06.267
> 
> 标签：c#, asp.net, asp.net-mvc

我想知道在 asp.net 和使用相同数据库的 Windows 应用程序之间的并发方面是否有最佳实践？我有一个包含项目数量的数据库，这些项目中的任何一个都可以从网站购物车或商店位置以不同数量出售。当用户将商品添加到购物车时更新商品数量似乎是一种有问题的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T10:42:11.460

我建议在您的系统中引入网关。网关将是单个应用程序（或现有应用程序之一的一部分：winforms 应用程序或 web 应用程序），充当 windows 应用程序和 web 应用程序的数据库的中介。这样，您在 db 请求和 db 本身之间只有一个故障点。设计该网关来管理并发，然后您不必担心其他进程写入您的数据库。

如果我处于您的位置，我可能会选择 Web 应用程序作为网关。创建一组服务/存储库以与数据库交互，并让 Web 应用程序的 UI 层访问这些服务。然后通过 Web 服务（或 WCF 服务）将这些服务公开给您的 Windows 应用程序，以便它访问数据库，而不是直接访问数据库。这样，您就可以解耦系统并创建数据存储的单一入口点。使用这种方法，您可能会解决除并发之外的更多问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-28T08:26:56.893

不了解有关如何在购物篮中保留商品的业务规则（例如购物篮过期），您能否不维护“已保留”和“已售出”计数？

好的，根据你说的。我想也许是一个基于补偿的系统而不是一个基于交易的系统来处理这个问题。是的，您有待售交易，但请注意您没有

# java - 如何使用 maven 创建发布包？

> ID：796486
> 
> 赞同：4
> 
> 时间：2009-04-28T06:38:31.490
> 
> 标签：java, maven-2

我使用 Maven2 构建了一个桌面应用程序。

我想不时发布（只需将所有项目和第三方 jar 复制到一个目录中并生成一个 run.bat 文件）。

怎么做 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T07:37:16.340

例如，您需要自己创建 run.bat 并将其放置在 src/main/assembly/scripts 中。然后你需要在 src/main/assembly 中创建一个 assembly.xml 文件。

下面是您可能想要使用的 assembly.xml 文件的示例。它会创建一个包含所有依赖项 jar 和 run.bat 的 tar.gz。

```
<assembly>
    <id>1.0</id>
    <formats>
        <format>tar.gz</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <dependencySets>
        <dependencySet>
            <outputDirectory>/lib</outputDirectory>
        </dependencySet>
    </dependencySets>
    <fileSets>
        <fileSet>
            <directory>target</directory>
            <outputDirectory>/lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>src/main/assembly/scripts</directory>
            <outputDirectory>/scripts</outputDirectory>
            <includes>
                <include>*.bat</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

最后，在您的 pom.xml 文件中添加程序集插件：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
            <descriptors>
                <descriptor>src/main/assembly/assembly.xml</descriptor>
            </descriptors>
        </configuration>
        <executions>
            <execution>
                <phase>package</phase>
                <goals>
                    <goal>attached</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

现在，当您运行“mvn install”时，您应该会看到您的 tar.gz 已创建。

释放运行：

mvn 发布：准备
mvn 发布：执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T09:59:22.880

好的，我在dogbane的回答的帮助下得到了它

我使用了自己的 assmlby 文件 src/main/assemlby.assembly.xml

```
<assembly>
   <id>teleinf</id>
   <formats>
      <format>dir</format>
   </formats>
   <moduleSets>
      <moduleSet>
         <includes>
            <include>pl..........:core</include>
            <include>pl..........:gui</include>
         </includes>
         <binaries>
            <outputDirectory>../../release</outputDirectory>
            <unpack>false</unpack>
         </binaries>
      </moduleSet>
   </moduleSets>
   <fileSets>
      <fileSet>
         <directory>src/main/assembly/</directory>
         <outputDirectory>../../release</outputDirectory>
         <includes>
            <include>*.bat</include>
         </includes>
      </fileSet>
   </fileSets>
</assembly> 
```

并在 pom 中添加了以下内容

```
 <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
           <descriptors>
              <descriptor>src/main/assembly/assembly.xml</descriptor>
           </descriptors>
        </configuration>
     </plugin> 
```

我必须自己编写一个 run.bat - 所以它并不完全令人满意，但会做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T06:47:37.757

我会使用 Maven 发布插件，请参阅：

*   [maven 发布插件](http://maven.apache.org/plugins/maven-release-plugin/index.html)
*   [使用 Maven 发布插件](http://weblogs.java.net/blog/johnsmart/archive/2008/08/using_the_maven.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T09:25:52.617

只是对[dogbane给出的答案的补充](https://stackoverflow.com/users/7412/dogbane)

您的 .bat 文件将运行打包的 jar 文件，其文件名反映应用程序的当前版本，例如

```
java -Xms256m -Xmx350m -jar bin\yourApp-1.10.1-SNAPSHOT.jar 
```

在每个版本中，此文件都需要使用应用程序的新版本名称进行更新。这也可以自动化。

在您的 pom.xml 文件中添加此部分：

```
<build>
  <resources>
    <resource>
      <filtering>true</filtering>
      <directory>${project.build.sourceDirectory}/../assembly/scripts</directory>
      <includes>
        <include>yourApp.bat</include>
      </includes>
    </resource>
    ...
  </resources>
  ...
</build> 
```

这假设您已将 yourApp.bat 文件放在文件夹中：

```
src/main/assembly/scripts 
```

yourApp.bat 文件的内容应如下所示：

```
java -Xms256m -Xmx350m -jar bin\${project.build.finalName}.jar 
```

只需运行 Maven 命令并享受。

# iphone - 屏幕抓取中用于提交的 iphone facebook 图标

> ID：796489
> 
> 赞同：0
> 
> 时间：2009-04-28T06:40:01.580
> 
> 标签：iphone, facebook, screenshot, double-submit-prevention

您认为将 Facebook 图标放在您的屏幕抓取列表中以供提交会违反苹果 sdk？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T12:09:26.610

Facebook 是否提供其图标供第三方使用？如果是这样，那么你应该没事。但是，没有人可以 100% 确定，因为历史表明 App Store 评论者的评论非常主观。例如，我有一个应用程序更新被拒绝，因为一个 UI 元素在实时应用程序中已经存在 6 个月，因为它可能会让用户感到困惑。

我没有听说过 Apple 会强制执行其他公司的版权和商标，但您要小心侵犯 Apple 的版权和商标（请参阅[此处](http://www.marco.org/98224131)）。

可悲的是，除了提交应用程序和交叉手指之外，我认为您不会得到明确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-15T17:32:38.577

Apple will protect their own copyrights and trademarks but isn't much interested in third-parties'. Who's to say you didn't get permission from Facebook to use their icon? If Apple rejected you for it, it would put them in the position of requiring you to submit proof to them that you have permission, which means they would be reviewing legal agreements between two other parties... why bother? It's easier for them to approve it and, if Facebook has a problem, let Facebook come after you themselves.

So, in brief, it wouldn't violate the SDK agreement; but you might get grief from Facebook if Facebook finds out about it.

# python - 从 HTML 页面中提取内容（不包括导航）的 python 方法

> ID：796490
> 
> 赞同：8
> 
> 时间：2009-04-28T06:40:28.507
> 
> 标签：python, html, parsing, semantics, html-content-extraction

当然，可以使用任意数量的 python 解析器来解析 HTML 页面，但令我惊讶的是，似乎没有任何公共解析脚本可以从给定的 HTML 文档中提取有意义的内容（不包括侧边栏、导航等） .

我猜这就像收集 DIV 和 P 元素，然后检查它们是否有最少的文本内容，但我确信一个可靠的实现将包括很多我没有想到的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T08:28:45.640

试试 Python 的[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)库。它具有从 html 文件中提取信息的非常简单的方法。

尝试从网页中提取一般数据将需要人们以类似的方式编写他们的页面......但是几乎有无数种方法可以传达看起来相同的页面，更不用说传达相同信息的所有组合了。

您是否尝试提取特定类型的信息或其他最终目标？

您可以尝试提取“div”和“p”标记中的任何内容，并比较页面中所有信息的相对大小。那么问题是人们可能将信息分组到'div's和'p's的集合中（或者至少如果他们正在编写格式良好的html，他们会这样做！）。

也许如果你形成了一个信息如何相关的树（节点将是'p'或'div或其他任何节点，每个节点将包含相关的文本）你可以进行某种分析来识别最小的'p'或' div' 包含似乎是大部分信息的内容..？

**[编辑]**也许如果你能把它放到我建议的树结构中，你就可以使用类似的积分系统来发送垃圾邮件刺客。定义一些尝试对信息进行分类的规则。一些例子：

```
+1 points for every 100 words
+1 points for every child element that has > 100 words
-1 points if the section name contains the word 'nav'
-2 points if the section name contains the word 'advert' 
```

如果你有很多低分规则，当你发现更多相关的部分时，这些规则加起来，我认为这可能会演变成一种相当强大和强大的技术。

**[EDIT2]**看看可读性，它似乎完全按照我刚才的建议做！也许可以改进以更好地理解表格？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T12:43:09.460

看看模板制造商：http: [//www.holovaty.com/writing/templatemaker/](http://www.holovaty.com/writing/templatemaker/)

它是由 Django 的一位创始人编写的。基本上你给它一些示例 html 文件，它会生成一个“模板”，然后你可以使用它来提取不同的位（通常是有意义的内容）。

[这是来自谷歌代码页](http://code.google.com/p/templatemaker/)的示例：

```
 # Import the Template class.
>>> from templatemaker import Template

# Create a Template instance.
>>> t = Template()

# Learn a Sample String.
>>> t.learn('<b>this and that</b>')

# Output the template so far, using the "!" character to mark holes.
# We've only learned a single string, so the template has no holes.
>>> t.as_text('!')
'<b>this and that</b>'

# Learn another string. The True return value means the template gained
# at least one hole.
>>> t.learn('<b>alex and sue</b>')
True

# Sure enough, the template now has some holes.
>>> t.as_text('!')
'<b>! and !</b>' 

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-11-21T18:59:34.743

您可以使用[boilerpipe Web 应用程序](http://boilerpipe-web.appspot.com/)即时获取和提取内容。

（这并不特定于 Python，因为您只需向 Google AppEngine 上的页面发出 HTTP GET 请求）。

干杯，

基督教

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T06:52:49.787

什么是有意义的，什么是没有意义的，这取决于页面的语义。如果语义很糟糕，您的代码将不会“猜测”什么是有意义的。我使用了您在评论中链接的可读性，并且我看到在我尝试阅读的许多页面上都没有提供任何结果，而不是在谈论一个体面的结果。

如果有人将内容放在表格中，你就完蛋了。在 phpbb 论坛上尝试可读性，你会明白我的意思。

如果您想这样做，请使用正则表达式 on `<p></p>`，或解析 DOM。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-22T23:39:26.557

[Goose](https://github.com/grangier/python-goose)只是这个任务的库。引用他们的自述文件：

> Goose 将尝试提取以下信息：
> 
> *   一篇文章的主要内容
> *   文章主图
> *   文章中嵌入的任何 Youtube/Vimeo 电影
> *   元描述
> *   元标签

# mercurial - 如何解决 Mercurial (v1.0.2) 中的合并冲突？

> ID：796495
> 
> 赞同：36
> 
> 时间：2009-04-28T06:42:22.090
> 
> 标签：mercurial, merge, dvcs, conflict

我有一个合并冲突，使用 Mercurial 1.0.2：

```
merging test.h
warning: conflicts during merge.
merging test.h failed!
6 files updated, 0 files merged, 0 files removed, 1 files unresolved
There are unresolved merges, you can redo the full merge using:
  hg update -C 19
  hg merge 18 
```

我不知道如何解决这个问题。谷歌搜索结果指示使用：

```
hg resolve 
```

但由于某种原因，我的 Mercurial (v1.0.2) 没有解析命令：

```
hg: unknown command 'resolve' 
```

我该如何解决这个冲突？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2010-04-07T09:20:49.490

*要在 Hg 1.1+ 的评论中突出显示答案：*

对于**Hg 1.1+ 手动**修复文件，然后执行

```
hg resolve -m test.h 
```

将文件标记为已合并。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-28T06:44:17.263

**仅对 hg < v1.1 有效**

无需调用任何`hg`命令。与 不同`svn`，Mercurial 不跟踪冲突文件。如果您调用`hg status`，您会看到该文件被简单地标记为已修改。

只需手动修复文件并提交即可。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-08-21T19:06:02.983

[Mercurial 1.1](https://www.mercurial-scm.org/wiki/WhatsNew#Version_1.1_-_2008-12-2)中引入了跟踪冲突，这是您正在使用的较新版本（您确实应该升级，Mercurial 1.1\. 于 2008 年 12 月发布）。在那个版本中，您获得了`resolve`与`svn resolve`.

我记得，当发生冲突时，Mercurial 会在您的文件中留下合并标记（`<<<<`和`>>>>`行），除非您配置了[合并工具](https://www.mercurial-scm.org/wiki/MergeToolConfiguration)。这也适用于较新的版本——我没有配置合并工具并在发生冲突时获取合并标记。然后我可以手动修复文件并将其标记为已解决`hg resolve`。

# asp.net - C# 中这些客户端选项的优缺点是什么？winforms、WPF、Jquery、ASP.NET AJAX 和 Silverlight

> ID：796503
> 
> 赞同：1
> 
> 时间：2009-04-28T06:44:20.697
> 
> 标签：asp.net, jquery, wpf, winforms, silverlight

只是想澄清客户演示的选项：

1) winforms - 适用于 windows 客户端 - 旧技术 2) wpf - 适用于 windows 客户端 - 较新的技术，使用 xaml

3) jquery - 用于 web 客户端 - 使用 javascript 4) asp.net ajax - 用于 web 客户端 - 旧技术 5) silverlight - 用于 web 客户端 - 新技术，使用 xaml

对于 web 客户端，选项 3、4、5 的优缺点是什么。学习 jquery 还是 asp.net ajax 更好？silverlight 是否成熟到可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T07:20:54.617

在桌面应用程序方面，你不能超越 WPF，问题是似乎没有大量的知识或推动使用 WPF 的商业项目。

我一直在用它来编写我的公司内部应用程序，它比 winforms 遥遥领先，它将 asp.net 可以拥有的所有 UI 模板和重用带到桌面应用程序，以及更多。

花一些时间来玩它，特别是看看绑定方面，使用 Linq 和一个像 CLinq 或 BindableLinq 这样的项目来传播对基本列表的更改到 UI 而不处理任何事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T06:51:38.870

jQuery 和 ASP.NET Ajax 相辅相成，所以我想这对它们来说不是非此即彼的，至少微软认为不是。

Silverlight 的问题不在于成熟度，而在于安装率低。在 Intranet 方案中，这可能不是问题。Silverlight 也存在与 Flash 相同的问题。更难获得可链接性、可搜索性等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T06:58:21.880

我想添加 MVC，它是 asp.net 的一部分，这取决于你问谁，但它是如此不同，值得单独使用。

我最近在 asp.net mvc 中为客户重建了一个旧的 asp.net web 应用程序，他对应用程序变得更加直观和快速印象深刻。我没有做任何功能更改。只是演示部分发生了变化。我想说这里值得一提。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-03T04:02:51.213

来自 ASP.Net 的这 2 个博客条目回答了我的问题

[http://weblogs.asp.net/paullitwin/archive/2009/03/30/the-four-pillars-of-asp-net.aspx](http://weblogs.asp.net/paullitwin/archive/2009/03/30/the-four-pillars-of-asp-net.aspx)

[http://weblogs.asp.net/shijuvarghese/archive/2008/07/09/asp-net-mvc-vs-asp-net-web-form.aspx](http://weblogs.asp.net/shijuvarghese/archive/2008/07/09/asp-net-mvc-vs-asp-net-web-form.aspx)

# html - 在“现代”网站上使用标签是否有意义？ 我正在开发一个“现代”网站，我在让 CSS 使所有内容正确排列时遇到了很多麻烦。我觉得如果我只使用一张桌子，它们的布局会容易得多，但我一直在避免使用<table>标签，因为我被告知它们是“过时的”而不是正确的做事方式。 可以使用表吗？我如何决定什么时候适合使用表格，什么时候应该使用 CSS？我只是做任何更容易的事情吗？

> ID：796504
> 
> 赞同：22
> 
> 时间：2009-04-28T06:44:20.773
> 
> 标签：html, css, html-table

我正在开发一个“现代”网站，我在让 CSS 使所有内容正确排列时遇到了很多麻烦。我觉得如果我只使用一张桌子，它们的布局会容易得多，但我一直在避免使用`<table>`标签，因为我被告知它们是“过时的”而不是正确的做事方式。

可以使用表吗？我如何决定什么时候适合使用表格，什么时候应该使用 CSS？我只是做任何更容易的事情吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-28T06:51:52.923

答案是肯定的，使用表格就可以了。一般的经验法则是，如果您要显示表格数据，表格可能是一个不错的选择。您通常应该尽可能多地尝试使用 css 设置表格样式。

此外，此饼图可能会帮助您：

[替代文字 http://www.ratemyeverything.net/image/7292/0/Time_Breakdown_of_Modern_Web_Design.ashx](http://www.ratemyeverything.net/image/7292/0/Time_Breakdown_of_Modern_Web_Design.ashx)

**编辑**：桌子很好。用于显示数据。就像我第二句话所说的那样。问题是“可以使用表格”。答案是——是的，可以使用表格。这并不违法。

因为即使在我的一般经验法则中暗示使用表格来存储数据，显然我还必须说明推论是不能将表格用于其他任何事情，即使发帖人似乎已经掌握了这个概念。因此，作为记录，一般的经验法则是不要使用表格来布置您的网站。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-28T06:50:29.700

应该使用表格来表示表格数据。CSS 应该用于展示和布局。

这个问题也在这里得到了详尽的回答：

[为什么不在 HTML 中使用表格进行布局？](https://stackoverflow.com/questions/83073/div-vs-table/84986#84986)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-04-28T06:54:52.823

本质上-如果您有表格数据，请使用表格。现在真的没有必要使用表格进行布局 - 当然，它们通常被认为“更容易”，但从语义上讲页面是可怕的，它们通常被认为是不可访问的。

查看一些讨论： [css-discuss](http://css-discuss.incutio.com/wiki/Tables_Vs_Divs)

和一个特别滑稽的 URL - [shouldiusetablesforlayout.com](http://www.shouldiusetablesforlayout.com/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-28T06:51:44.923

在表格的“现代”方法中，它不是关于使用表格标签或 div 标签，而是关于为正确的目的使用正确的标签。

表格标签用于表格数据。为此使用它没有任何问题！

对于使用 CSS，有很多教程和指南（好的和坏的）。糟糕教程的指标是：大量使用仅对布局有意义而不对内容有意义的块（div）。好的迹象是建议为正确的内容使用正确的标签并教您如何制作这些标签。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-28T06:51:55.530

表格仅适用于表格数据。想象一下，您必须添加一些类似数据的电子表格，其中有清晰的行/列标题，以及这些行内的一些数据。例如，产品比较也是有效的表项。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-28T06:51:58.307

我相信表格可以显示任意行和/或列的直线数据。就是这样。表格不应再用于布局目的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-28T07:37:42.847

一般来说，HTML 标记应该*描述*网页的结构和内容——它不应该用于控制诸如布局和样式（这就是 CSS 的用途）等表现方面的内容。一个`<table>`标签，就像大多数人已经说过的那样，应该代表*表格*数据——以信息表的形式出现的东西。

人们如此热衷于桌子的原因是，在过去，没有 CSS 之类的东西——所有的页面布局都是直接在 HTML 中完成的。标签不被认为是描述内容——所有人真正关心的是标签如何让事物在网络浏览器中看起来。因此，人们认为，既然他们可以将事物组织成行和列，那么表格必须适合于对网页元素进行布局。这成为一种非常流行的技术——事实上，我敢打赌，在相当长的一段时间内，使用表格被认为是布置网页的*首选方法。*

所以当人们告诉你桌子是“过时的”时，他们特别指的是这种在`<table>`过去非常流行的标签滥用。就像我说的，HTML 表格本身并没有什么问题，但是现在将它们用于网页布局已经没有意义了。

（另外，从纯粹实用的角度来看，使用 HTML 表格完成的布局*非常*不灵活且难以维护。）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-28T09:19:39.700

整个“反表格”运动是对深度嵌套表格是布局页面的唯一方法的时代的反应，导致 HTML 非常难以理解。

表格是表格（数据）布局的有效方法，如果表格是实现布局的最简单方法，那么无论如何都要使用表格。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-28T06:51:07.920

当您以网格/表格格式显示数据时，可以使用表格。但是，对于网站的一般结构，强烈建议您使用 css 驱动的 div、ul、li 元素，让您的网站更加清晰。

如果您还是决定使用表格，则必须考虑以下缺点：

*   他们对 SEO 不友好
*   它们的结构非常僵化，有时也难以维护

您可能会在基于 div 的网站上花费很少的额外时间，但花的每一分钟都是值得的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T06:51:37.683

当您需要在网格中呈现数据时，表格始终是正确的选择。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-28T06:52:09.803

引用 Sitepoints 的书[HTML Utopia: Designing without Tables using CSS](https://rads.stackoverflow.com/amzn/click/com/0957921829) *如果您有表格数据，并且该数据的外观不如其与同一数据集的其他部分相关的适当显示重要，那么表格是有序的。如果您有最适合在 Excel 等电子表格中显示的信息，那么您就有了表格数据。*

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-28T06:53:15.933

我会拒绝使用表格来构建您的布局。表格仅对您需要表示的实际表格数据有意义。如果您花足够的时间弄清楚 CSS，您会发现使用表格进行布局更容易。请记住：用于显示数据的表格。页面布局的 CSS。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-28T06:53:50.750

表格就是：表格。

它们不被接受，因为它们不应该用于布局，因为在浏览器可以正确定位内容之前，这是一种流行的做法。

如果您要标记的实际上是一个表格，那么请使用表格。除此之外，尽量远离。

一件小事：将文本的两部分与不会分开的完全相同的行对齐（想想，用户名和发布日期）。恕我直言，使用表格是一种选择。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-28T07:58:04.637

首先让它工作。然后让它完美。

在使其完美或更好之前以某种方式完成布局。

每天有多少人会访问您正在处理的页面？一百万？还是 20？

你打算花多少时间在 CSS 问题上而不是其他问题上？你的老板想让你在这个问题上花这么多时间吗？他/她知道你在做什么吗？

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-28T08:30:27.180

绝对地。我不知道 CSS 狂热者在哪里发明了表格不自然地用于“布局”的想法。自从发明以来，桌子就被用来布置东西，无论这些东西是数字、文字还是漂亮的图片。 *他们就是这样做的*。此外，表格是 (X)HTML 所有版本的一部分，因此不存在弃用问题。

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2009-04-28T09:48:18.430

绝对地。

HTML 提供的所有内容最初都是为了让您定义页面的标记。在我的书中，页面上元素的绝对和相对位置属于标记。所以 div 和表格都非常适合这项任务。挑选最适合您的特定需求的方法。

CSS 增加了许多样式可能性和布局技巧，但它补充了 HTML 选项而不是取代它们。

实际上，在将某些东西视为标记或样式问题之间存在着非常细微的界限。CSS 支持者会说，使用 CSS，您可以完全重新定位和重新排列页面的所有大小部分。但是，我无法想象将页眉放在下方，将页脚放在上方并使事物以相反的顺序出现。

举个例子。你设计一个笔记本。您知道主要组件、主板、冷却系统、键盘、显示器和端口的放置位置。您可能希望重新排列一点端口连接器，在哪一侧以及它们出现的顺序，但您并不真的希望将显示器放在键盘所在的位置，将键盘放在盖子上，让风扇吹到你的脸上，然后让底部的所有连接器都可以通过桌面上的孔连接到。

使用表格会使重新排列页面上的元素变得有点困难。这可能是真的。但是，在大多数情况下，您事先知道您的页面应该是什么样子，并且您不希望彻底改变一切。如果你不能在开始工作之前说出来，那么你可能不清楚自己在做什么和做什么。

此外，只有表格具有弹性属性，这允许拉伸到其内容的宽度/高度。没有其他的 HTML/CSS 可以用来做到这一点。

一侧的 CSS 设计允许您创建可调整的设计。另一方面，它使您无法设计可根据其内容调整的页面。输赢都有。

表也​​是制作非常复杂和精确的界面的唯一工具。例如，页面 SO 非常简单。它可能可以用纯 CSS 来完成。同时，您是否见过任何企业级软件，例如 CRM、SRM 等？大量的按钮、文本字段、复选框、下拉列表都精确地位于屏幕上？祝你好运，只用 CSS 就可以实现这种复杂性。这些布局每天都从桌面应用程序迁移到 Web（关键词：软件即服务）。

所以选择最适合你当前需要的，不要相信那些 CSS 爱好者。事实上，不要相信任何狂热分子。

# java - MVC和MVC Model2之间的实际区别是什么

> ID：796508
> 
> 赞同：9
> 
> 时间：2009-04-28T06:45:30.913
> 
> 标签：java, model-view-controller

只是我想知道MVC和MVC Model2在开发中的实际区别是什么

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-28T07:24:09.913

为了说明以前的答案（并添加[本文](http://faq.javaranch.com/java/Model1Model2MVC)的解释）：

MVC2 是一种[滥用语言](http://en.wikipedia.org/wiki/Abuse_of_language)，实际上指的是 JSP 模型 2 架构，而不是 JSP 模型 1：

> 用于服务器端 Web 开发的第一个 Java 技术是**servlet**。
> 使用 servlet 编写应用程序与使用 Perl 编写 CGI 应用程序非常相似，因为**所有输出都必须在 Java 代码中构建为字符串**。
> 这是非常乏味且容易出错的。这也使得没有 Java 经验的 Web 设计人员很难改变 servlet 生成的页面的外观和感觉。

[![替代文字](https://i.stack.imgur.com/0Rvqk.gif)](https://i.stack.imgur.com/0Rvqk.gif)
[（来源：[javaworld.com](http://www.javaworld.com/javaworld/jw-12-1999/images/MODEL1_sml.gif)）]

> 然后是**JSP**。JSP 与 Microsoft ASP 和流行的脚本语言 PHP 一样，**将所有内容都视为模板文本，但允许将 Java 代码插入称为 scriptlet 和 JSP 表达式的标记中**。
> 这使人们可以像使用其他流行的脚本语言一样在服务器端应用程序上工作，但它有几个缺点。
> 
> *   没有分离关注点。
> *   一个脚本将包含数据库代码、业务逻辑、HTML 标记和最终页面呈现所需的任何 JavaScript 代码。
> *   代码重用和自动化测试一样困难。
> 
> 这被称为“模型 1”JSP 编程。
> 
> [MVC 或模型视图控制器模式](http://en.wikipedia.org/wiki/Model-view-controller)是一种常见的技术，用于分离 GUI 代码中的各种关注点，由 Trygve Reenskaug 发明，为 Zerox 开发 Smalltalk。
> 
> 在某些时候，很明显这种技术可以适用于 Java EE 应用程序以实现相同级别的分离。
> 这样做涉及将模型层编写为 Bean 或普通旧 Java 对象 (POJO)，使用 servlet 作为控制器，然后，当所有繁重的工作完成后，转发到 JSP 以格式化和标记结果。
> 使用 MVC 架构编写的 Servlet/JSP 应用程序被称为 Model 2 JSP 编程。

[![替代文字](https://i.stack.imgur.com/1EzJ3.gif)](https://i.stack.imgur.com/1EzJ3.gif)
[（来源：[javaworld.com](http://www.javaworld.com/javaworld/jw-12-1999/images/MODEL2_sml.gif)）]

> 因为这种模式在用于 servlet/JSP 应用程序之前以不同的形式存在，所以它有时被称为“MVC2”。这个名称导致了一些混淆，因为它暗示有一个用于 servlet 应用程序的 MVC1，但实际上并没有。
> 只说 MVC 就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T15:00:07.430

关于这些条款的有趣的历史记录...

[我希望我能找到这篇论文......（我刚刚尝试谷歌搜索但没有运气！）]

不久前，有人写了一篇论文，描述了 Web 应用程序的两种 MVC 方法。里面，他有两个人影。

标题是“模型 1”和“模型 2”。

它们并非旨在作为模式的实际名称（更像是“图 1”和“图 2”），但有人阅读并写下它，就好像那是一个模式名称......

（有人有参考吗？）

VonC 很好地描述了差异

# language-agnostic - 如何确定错误的优先级？

> ID：796509
> 
> 赞同：18
> 
> 时间：2009-04-28T06:46:36.043
> 
> 标签：language-agnostic, process, bug-tracking

在我目前的公司中，测试和开发团队之间对于错误的严重程度并不清楚吗？有一些争论来回减少或增加严重性。我们目前不知道有任何文件规定了规则。测试人员根据他的直觉提出错误并分配优先级。开发人员会根据他的负载或其他因素请求更改。

错误的严重性/优先级如何分类？是否有任何标准可以指导如何根据客户需求、时间线和其他因素确定软件缺陷优先级？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-28T07:18:01.677

*   使用故意*与严重性或影响无关的***优先级**，并仅描述错误在计划中的概念位置。该字段将确定哪些错误得到解决，因此它将成为谈判的目标。

**   使用故意具有具体的、可验证的定义*且与调度或优先级无关的***严重性级别**。我已经成功地[使用了 Debian BTS 使用的严重性定义](http://www.debian.org/Bugs/Developer#severities)，普遍适用于一般的编程项目。* 

 **这样，**严重性**就更多地是一个*可验证的事实*问题，独立于优先级声明。然后可以通过协商或其他方式自由调整**优先级，而不会影响严重性字段中的事实信息。**

试图将“严重性”和“优先级”混为一谈会导致令人**筋疲力尽的争论和浪费时间**。错误报告者需要一个可靠的*事实*指南来确定错误有多“糟糕”，这需要独立各方轻松达成一致。另一方面，优先级是谈判和安排比赛的正确目标。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-28T08:35:41.567

我在紧急控制中心系统上工作，所以这组错误级别有点，嗯......*极端*：

*   有人死了
*   需要 DR 调用的总系统故障
*   服务器故障需要工程师响应
*   涉及失去呼叫连续性的故障
*   涉及数据丢失的故障
*   记录的数据不正确
*   应用程序失败 - 不可恢复
*   应用程序失败 - 不可恢复，但会自动重新启动
*   不符合要求规范，没有解决方法
*   不符合要求规范，但有解决方法
*   化妆品 - 布局等
*   实际上是一个功能请求

这不是我的想法。如果您想知道，这是从最极端到最不重要的:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-06-02T20:42:47.017

我们以前用过的一些东西。我们将缺陷等级分为优先级和严重性。

**严重性**（由提交者在提交缺陷时设置）

*   最高 (5)：数据丢失、可能的硬件损坏或与安全相关的故障
*   高 (4)：在没有任何合理解决方法的情况下失去功能
*   中 (3)：通过合理的解决方法丧失功能
*   低（2）：功能或特征集的部分丢失（特征仍然达到设计要求）
*   最低 (1)：外观错误

**优先级**（在缺陷评估期间由开发、管理和 QA 调整）

*   最高 (5)：系统实际上无法使用此缺陷。
*   高（4）：该缺陷将对公司销售和维护该系统的能力产生严重影响。
*   中（3）：如果系统有这个缺陷，公司会损失一些钱，但按时完成可能更重要。发布后修复。
*   低（2）：不要延迟发布，但要在之后修复这个问题。
*   最低 (1)：在时间和资源允许的情况下进行修复。

这两个数字共同构成一个风险优先级编号 (RPN)。简单地将严重性与优先级相乘。更高的结果意味着更高的风险。25 定义了终极缺陷炸弹。1 可以在空闲时间或某人无聊需要做点什么时完成。

第一个目标：任何类型的最高或高等级缺陷应在发布前修复。第二个目标：RPN > 8 的缺陷应该在发布产品之前修复。

* * *

这当然有点人为，但有助于为所有各方（支持、QA/测试、工程和产品经理）提供一个工具来设置优先级，而不会影响另一方的意见。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T06:52:40.210

用fogbugz 替换您的错误跟踪系统并完全摆脱严重性字段。

请参阅[优先级与严重性](http://citydesknews.com/FogBugz/kb/howto/Priorityvs.Severity.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-08-13T14:46:07.657

“去过也做过”。

我在不同的项目上一遍又一遍地讨论过这个问题。我们试图将优先级与严重性结合起来，但我学到的教训是：**不要将严重性与优先级结合起来**！

我们进行了很多头脑风暴和会议，最后都以“***就是这样***”作为结尾。已经创建了多个指南文档并在不同的“各方”之间传播，但一段时间后我们发现它最终不起作用。不同的“各方”对错误的看法不同：我们的帮助台对优先级的理解不同于开发团队或销售人员的理解。

同时具有严重性和优先级将很快变得非常混乱，因为：

*   当使用数字（1 到 5 之间）时，人们不会知道每个数字的含义
*   如果某个问题的优先级最高，但严重性最低怎么办？我相信这会发生！
*   如果有人降低了严重性，他是否也需要降低优先级？

**“那你该怎么办？”：**

*   只对问题的“级别”使用一种指标：不管你怎么称呼它。

*   使用数字（例如 1 - 5，但可能或多或少取决于您的需要）清楚地表明重要性，但**将**其与关键字结合使用，以便清楚其含义（例如，'nice to have'、'show stopper' ）。对于某些人来说，prio 1 意味着最重要，对于其他人来说，5 确实 -> 因此需要一个关键字来指示数字的含义。

*   区分“正常问题”或“红色警报”。在我们的案例中，必须立即解决“红色警报”并立即投入生产。一个正常的问题将遵循正常的开发-测试-部署-流程。优先级/严重性/但是如何称呼它应该只针对正常问题设置，对于“红色警报”将被忽略。*> 在实践中，“红色警报”可以成为

    > “正常问题”：支持团队发现了一个重大错误并创建了“红色警报”。但经过一番调查，我们发现数据库中的数据已经“损坏”，因为它是直接插入而不是通过应用程序插入的。*

*   选择一个允许您自定义流程的好工具；但大多数工具都可以。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T06:54:06.010

至于标准，*IEEE 软件异常分类指南，*尽管我不确定它的采用范围有多广。**IEEE 1044.1-1995**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-28T06:56:06.130

一种选择是让产品负责人确定错误的优先级。虽然对于错误有多“糟糕”有一些普遍的直觉，但产品所有者可能有责任设置优先顺序（即错误 A 应该在错误 B 之前修复等......）。

可以提供给产品所有者的更多信息（清晰和简洁）可以帮助个人做出这些决定（即有多少用户遇到了错误，哪些功能由于错误而不可用，等等......）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-28T07:13:35.667

1.  现在必须完成
2.  必须在我们发货前完成
3.  轻微的烦恼（不会阻止用户使用该功能）
4.  Edge case/Remote/Tester-from-Mordor 场景

好吧，我只是编造了……我的意思是对错误进行分类不应该是每周一个小时+长时间的仪式……
恕我直言，按照流程图优先考虑是浪费时间。修复 Cat#1 和 #2 中的错误 - 尽快修复。如果您发现自己被虫子淹没，请放慢速度并反思。如果计划不允许或优先级更高的项目覆盖，则推迟 Cat#3 和 Cat#4。
关键是你们所有人都对这种严重性和预期质量有共同的理解。不要让遵守 X 的神圣标准拖慢您交付客户想要的东西的速度……工作软件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-28T09:27:16.047

我个人喜欢两层严重性/优先级模型。我知道单级的论点，但我工作过的地方通常我刚刚看到两级的层次结构更好

严重性由支持团队设置（基于客户的输入）。优先级由客户设定（来自支持团队的输入）。

对于严重性，我使用：

1 - 阻止程序/节目停止
2 - 主要功能不可用（或实际上不可用），没有实际解决办法
3 - 主要功能不可用（或...），可以解决
4 - 次要功能不可用（或实际上不可用），没有工作围绕可能
5 - 次要功能不可用（或......），围绕可能
6 - 化妆品或其他琐碎

然后对于优先级，我只使用高、中、低，但任何 3 到 5 级都可以（远远超过顶部）。

我通常会先按优先级排序，然后再按其中的严重性排序。重要的是客户有最重要的发言权。如果他们说他们的徽标在报告上打印出来的方式是最高优先级，那么这就是要查看的内容，但它会在其他客户的高优先级阻止他们登录之后进行查看。

一般来说，我不会发布任何高优先级问题或任何严重程度为 1 - 4 的中等优先级问题。显然，在理想的世界中，你会解决所有问题，但我从来没有幸运地拥有这个选项。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T23:04:52.023

*   测试人员告诉你坏了什么
*   开发人员估计要修复多少工作
*   客户决定业务价值，即优先级。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-28T07:30:58.040

我将以下类别用于功能和错误：

1.  Showstopper，程序（或主要功能）将无法运行
2.  必须有，很大一部分客户会为此烦恼
3.  会有的，有些客户会被打扰
4.  很高兴有几个客户想要这个

通常您计划修复 1、2 和 3，但由于时间限制，3 通常会推迟到下一个版本。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-28T07:32:01.517

我和我们的一位客户有同样的问题。最后，我们一起建立了一个文档，描述了什么样的错误会与某种严重性相匹配。除了偶尔使用本文档作为指导进行讨论之外，似乎可行。

但是请注意，测试团队和开发团队对于什么是严重错误和什么不是严重错误可能有非常不同的看法。从测试人员的角度来看，当开发人员只是说没有人会注意到时，一个小的布局错误可能是高优先级的。

在我们的文档中，如果这些错误是“品牌损害”，则这些错误可能是高优先级的，即如果布局错误出现在徽标或其中一个产品中，那么它是严重的 - 如果它只是页面上的一个段落，距离 2 个像素那么它不是。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-29T02:29:07.977

我认为这是我们在上一份工作中使用的比例：

1.  导致文件丢失或系统不稳定。
2.  使程序崩溃。
3.  功能不起作用。
4.  功能不起作用，但有解决方法。
5.  化妆品问题。
6.  要求加强。

有时这会被滥用——如果某个功能设计得非常糟糕，以至于有人无法弄清楚如何使用它，则将其归类为 6，并且从未得到修复。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-28T06:54:39.643

设置项目的需求，以便您可以将修复的优先级基于受 bug 干扰的需求的优先级。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-04-16T20:12:55.717

我同意 FogBugz 的人认为这应该保持超级简单： http: [//fogbugz.stackexchange.com/questions/352/priority-vs-severity](http://fogbugz.stackexchange.com/questions/352/priority-vs-severity)

我制定了这个方案，我觉得很容易记住：

*   pS：秒很重要，例如，服务器着火了
*   pM：分钟很重要，例如，有些东西坏了
*   pH值：时间很重要，即在完成之前不要上床睡觉
*   pd：天数，即正常优先级
*   pw：星期很重要，即优先级较低
*   pm：几个月很重要，即，不着急
*   py：岁月很重要，即，也许/有一天，即愿望清单

它与 Debian 的方案大致相似：http: [//www.debian.org/Bugs/Developer#severities](http://www.debian.org/Bugs/Developer#severities)

我喜欢它，因为它直接将优先级和严重性组合到一个易于为其设置值的字段中。

PS：您还可以在“分钟很重要”和“小时很重要”之间选择“pMH”之类的中间紧急情况。或者“pHd”介于“小时很重要”和“日子很重要”之间——粗略地说，“不要真的为此熬夜，但在完成之前不要做任何其他事情”。

# xml - 如何在 XSL 中获取当前的国家代码/语言环境？

> ID：796515
> 
> 赞同：0
> 
> 时间：2009-04-28T06:48:54.633
> 
> 标签：xml, xslt, cultureinfo

我在 XML 上使用 XSL 转换。转换的某些部分取决于[当前的语言环境](http://en.wikipedia.org/wiki/Locale)。有没有办法从 XSL 中找到当前的语言环境？

例如，浮点数的用户可见序列化可能因语言环境而异（英语中的“1.0”是德语中的“1,0”），我的转换需要考虑到这些差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T06:54:04.247

将其作为参数传入。

```
<xsl:param name="CultureInfo" select="'default'" /> 
```

在样式表的顶层放置一个 XSL 参数，并在调用样式表之前从“外部”设置它。

另一种（专有）方法是注册扩展函数并从样式表中询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T10:50:02.260

XSLT 1.0 本身不支持局部变量，但有一些方法可以使用它们，但您需要将其作为参数传递给 XSLT 处理器或依赖扩展。*一些*处理器会授予您访问区域设置信息的权限，但没有标准的方法，我们必须了解您的环境以查看是否可能。然而，在 XSLT 2.0 中，一些日期、时间和数字格式化函数将（有时受到限制）支持语言环境，并且将由处理器处理，而不是由您处理（这就是为什么有这些函数的原因 :)

至于在 XSLT 1.0 环境中使用某种形式的局部性，并且无论 XSLT 版本如何，我都会为您正在使用的数据类型设置一些基本模板，并通过本地参数（如前所述）。例如，对于数字，请查找[xsl:format-number](http://www.w3schools.com/XSL/func_formatnumber.asp)。

至于其他本地内容，我将创建另一个 XML 文件，并让参数作为您所追求的信息的选择器。XML 可能看起来像；

```
<locals>
   <config id="de">
     <currency notation="&#8352;" format-number="###.###,##" />
     <text id="welcome">Wilcommen!</text>
   </config>
   <config id="en">
     <currency notation="&#163;" format-number="### ###.##" />
     <text id="welcome">Welcome!</text>
   </config>
   <config id="no">
     <currency notation="NOK" format-number="###.###,##" />
     <text id="welcome">Velkommen!</text>
   </config>
</locals> 
```

从这里，将其打开为 ;

```
<xsl:variable name="locale" select="document('locale.xml')/locals/config[@id=$parameter.for.locale]" /> 
```

您可以将其用于欢迎文本；

```
<xsl:value-of select="$locale/text[@id='welcome']" /> 
```

对于数字格式等，它有点复杂，但首先验证这是正确的路径，我将展开，但基本上你应该在语言环境 XML 文件上创建一些键，并使用键查找值。对于数字等（需要告诉我更多关于你想要支持的内容）我会写几个模板来处理这个问题，并使用 ;

```
<xsl:call-template name="my-template">
   <xsl:with-param name="this" select="'some_number'" />
</xsl:call-template> 
```

# css - 我们可以在实践中使用 CSS 2.1 选择器吗？

> ID：796516
> 
> 赞同：0
> 
> 时间：2009-04-28T06:49:09.017
> 
> 标签：css, cross-browser, css-selectors

这个问题背后的罪魁祸首当然是IE6，（几乎）每个人都同意一个网站应该支持IE6，因为它被超过15%的访问者使用（[对于雅虎来说，它仍然是一个A级浏览器](http://developer.yahoo.com/yui/articles/gbs/)）。

IE6 不支持 CSS 2.1，那么我们可以在样式表中使用 CSS 2.1 选择器吗？让我举个例子吧：

```
<body>
    <div class="header">
    </div>
    <div class="content">
        <h1>Title</h1>
        <p>First paragraph</p>
        <p>Second paragraph</p>
    </div>
    <div class="footer">
    </div>
</body> 
```

我的 CSS 可能如下所示：

```
body > div {width: 760px;} /* header content and footer = 760px wide */
h1 + p { margin-top: 5px;} /* the first paragraph after the h1 tag should have a smaller margin */ 
```

但是 IE6 不会理解这一点，所以无论如何要与浏览器兼容，我应该这样写：

```
.header, .content, .footer  { width:760px; } 
```

可能我必须给第一段一些类名并在我的css中定义它。我可以制作一个特定于定义这些规则的[IE6 样式表](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)，但这似乎是双重的（并且在第一段需要类名的情况下仍然无济于事）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:02:45.363

如果您对 100% 支持 IE6 很认真，那么您应该避免使用无法使用的 CSS。使用这些花哨的选择器的原因之一是让你的生活更轻松，但如果你必须为 IE6 重写它们，它不会让你的生活更轻松。最后，像这样的花哨的选择器[在 Firefox 中速度很慢](https://developer.mozilla.org/en/Writing_Efficient_CSS)，所以也许一起避免它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:26:15.977

如果您从[渐进增强](http://alistapart.com/articles/understandingprogressiveenhancement)的角度来处理您的网站设计，那么您应该没问题，因为更现代的浏览器将获得比使用 ie6 的浏览器更好的体验。如果您只是想走捷径或节省开发时间，那么您必须选择 ie6 用户是否对您的网站重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T12:22:02.740

我认为“支持” IE6 的概念是错误的想法，如果我们对此说不，我们只是不允许 IE6 用户访问我们的网站和内容吗？当然不是。所以真正的问题是，你想花多少时间让你的网站在 IE6 上的体验与其他浏览器一样。

我自己的观点是我“支持” IE6，因为 IE6 的用户将能够访问网站的所有内容及其所有功能，但他们可能无法获得与 Firefox 3 用户相同的视觉或交互体验。

所以回答你的问题，是的，我们可以使用 CSS 2.1 和 3.0 选择器来实现某些效果，只要 IE6 的内容仍然存在并且具有可接受的视觉外观。可接受的内容取决于项目（可能还有客户！）。

您的示例很好地展示了这一点：

```
p { margin-top: 10px; }
h1 + p { margin-top: 5px;} /* the first paragraph after the h1 tag should have a smaller margin 
```

在这里，IE6 仍然会获取段落内容，并且它们之间仍然会有所有重要的空白，只是不会在第一个空白处获得减小的间距。对于减少 HTML 中的混乱，这是 IMO 的一个公平妥协。

另一个很好的例子是圆角。您可以在 Firefox 和 Safari 中使用`-moz-border-radius`和`-webkit-border-radius`来获得圆角，从而增强您网站的视觉体验，但 IE 用户仍然可以获得内容，尽管具有普通的旧方角（然后有很多 JavaScript 解决方案可以为人们实现这一点启用 JavaScript）。

这都将归入[渐进增强的标题下](http://www.google.co.uk/search?q=progressive+enhancement)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:12:51.673

*   **像 JQuery 这样的**Javascript 。****
***   **CSS 黑客。**但我不建议这样做。因为它不是 W3C 标准。*   **CSS 类名。**通过使用 CSS Classname 替换 CSS Selector。**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T07:15:04.833

正如您已经说过的，您的浏览器受众将决定您所支持的内容，即使是像 w3schools 这样的“技术”网站仍然报告 IE6 的市场份额为 17%。

也就是说，如果你要支持它，显然你需要替代品。

[我昨天在stackoverflow](https://stackoverflow.com/questions/660652/ie8-css-selector/793342#793342)上阅读了另一个关于仅针对 IE8 的有趣线程，我怀疑如果您可以针对它们，支持每个浏览器会更容易。我在 .net 环境中，并使用有人在该线程的一半发布的方法，以便我的 CSS 选择器可以很容易地变成：

```
body > div {width: 760px;}
.IE6 div.header, .IE6 div.content, .IE6 div.footer { width: 760px; } 
```

显然，您会找到自己定位浏览器的方式，但 CSS 将等同于类似的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T08:17:26.370

决定是否忽略 IE6 的不是开发者而是网站所有者。您应该向网站所有者提供该特定网站的统计信息，然后做出决定。

如果您或所有者决定不牺牲 IE6 人员，那么使用那些花哨的选择器毫无意义。有很大的缺点，目前还没有上涨空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T08:22:27.777

对于我网站上的每个 IE6 用户，我都收到了大红色警报，说他们的浏览器很古老，他们应该下载真正的浏览器，比如 Firefox；] 这就是解决方案。如果网站管理员不告诉用户，谁会？

# css - 无法在 Safari 4 中获取“内容”的 css 属性

> ID：796531
> 
> 赞同：0
> 
> 时间：2009-04-28T06:52:54.903
> 
> 标签：css, safari, css-content

我很难弄清楚为什么 Firefox3.1 在测试元素上返回“内容”的值，而 Safari 4 不会。

我的示例页面设置如下：

```
<style>
#asd{
content: 'test';
}
</style>

<div id="asd">
Bleh
</div> 
```

我的 JS 正在使用 getComputedStyle。这适用于“背景颜色”等其他属性，但不适用于“内容”：

```
if( window.getComputedStyle ){
    var thestyle = window.getComputedStyle( document.getElementById('asd'), '');
    alert( thestyle.getPropertyValue('content') );
} 
```

Safari 是否对伪元素选择器 :before 和 :after 有更多限制？我用 :after 进行了测试，但也失败了，而 FF 成功返回了数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:50:12.113

Safari 仅支持 :before 和 :after 伪元素的 content 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T06:56:08.717

看看这条线，它可能会解决你所有的问题：

```
<div id="#asd"> 
```

那不应该是：

```
<div id="asd"> 
```

我猜这是一个简单的错误，但为了澄清，您不需要（不应该）在元素 ID 的名称中包含 # 。

另外我猜 Firefox 忽略了这个问题，只是补偿了它，而 safari 可能在代码的实现上更加严格，所以它不会补偿。

# nohup - 在执行期间删除 nohup 文件

> ID：796542
> 
> 赞同：13
> 
> 时间：2009-04-28T06:54:50.453
> 
> 标签：nohup

我做了以下事情：

```
nohup find / &

rm nohup.out 
```

奇怪的是， nohup 命令继续运行。我等待创建一个新文件。令我惊讶的是，没有这样的文件。命令的标准输出到哪里去了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-28T06:58:20.367

在 UNIX 中删除文件有两件事：

*   它删除它的目录条目。
*   如果没有进程打开它并且没有其他目录条目指向它（硬链接），它会释放空间。

您的 nohupped 进程将很乐意继续写入以前称为 nohup.out 的文件，但现在该文件只被称为该进程中的文件描述符。

你甚至可以让另一个进程创建一个 nohup.out，它不会干扰第一个进程。

当所有的硬链接都消失了，并且所有的进程都关闭了它，磁盘空间将被恢复。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-08-30T09:10:35.420

如果你要删除`nohup.out`文件，句柄将丢失，它只会写入文件描述符，但如果你想清理`nohup.out`文件然后运行这个

```
true > nohup.out 
```

它将删除文件的内容，但不会删除文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T06:58:47.713

这是 Unix 上的标准行为。

当您删除文件时，文件系统中的最后一个链接被删除，但文件仍然打开，因此`find`（在这种情况下）的输出被写入内核缓冲池中的磁盘块，甚至可能写入磁盘。但该文件没有名称。退出时`find`，没有进程或文件（inode）引用该文件，因此释放了空间。这是创建程序退出时将消失的临时文件的一种方法 - 通过打开文件然后将其删除。（这假定您不需要文件的名称；显然，如果您需要临时文件的名称，则此技术将不起作用。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-26T07:21:28.320

```
cat /dev/null > nohup.out 
```

从[这里](https://bparman.wordpress.com/2011/03/02/clean-and-clear-nohup-out/)

# java - 有什么方法可以将我的自定义名称放入我将放置在 struts 应用程序的 WEB-INF 文件夹中的 LIB 文件夹中？

> ID：796545
> 
> 赞同：1
> 
> 时间：2009-04-28T06:55:43.120
> 
> 标签：java, struts2

有什么方法可以将我的自定义名称放入我将放置在 struts 应用程序的 WEB-INF 文件夹中的 LIB 文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T06:58:00.257

你到底为什么要那样做？仅供参考，它`lib`不是`LIB`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T07:12:29.787

不。

或者是的……如果您不希望它的内容出现在类路径中。

# linq - 学习 Linq to Entity 的最快方法

> ID：796571
> 
> 赞同：4
> 
> 时间：2009-04-28T07:09:32.977
> 
> 标签：linq, entity-framework

我正在使用实体框架开发我的第一个 ASP.NET MVC 应用程序。尽管我精通其他 OO 语言，但我以前没有 .NET 经验。我无法理解 Linq to Entity 查询表达式，更具体地说，它的语法以及如何在 ASP 页面上呈现结果。

例如，我将三个表（实体）连接在一起并尝试迭代结果，但我得到了各种类型错误。我在 Google、SO 或 MSFT 上找到的每个示例都不是直截了当的，每个站点都采用自己的方法。我看了《Programming Entity Framework》一书，但目前这似乎也超出了我的想象。

我正在寻找执行复杂多重连接的等价物并迭代结果的清晰、简洁的示例。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T07:31:03.313

我自己刚开始做这个，我买[了 wrox 书](http://www.wrox.com/WileyCDA/WroxTitle/Professional-ADO-NET-3-5-with-LINQ-and-the-Entity-Framework.productCd-047018261X.html)和[o'reilly](http://learnentityframework.com/)书。

我发现 wrox 有点难以接近——其中使用的语言有点重，布局/组织不是那么“流畅”（这是一个词吗？呵呵）。

另一方面，o'reilly 是一本破解读物，确实可以很好地引导您完成它。如果你有一个潜艇，它也可以在 safaribooks 上找到，我从亚马逊那里得到它，亚马逊似乎是少数几个有库存的地方之一。非常推荐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:14:53.633

看看这些样本 - [http://blogs.msdn.com/adonet/archive/2007/03/13/101-linq-samples-updated.aspx](http://blogs.msdn.com/adonet/archive/2007/03/13/101-linq-samples-updated.aspx)

我从这些例子本身中汲取了这个概念

[Scott Guthrie 的](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)博客也有很好的解释和示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T07:16:27.110

在我看来，你应该给自己买一本关于这个主题的好书。由于您以前没有 .NET 方面的经验，因此一本涵盖 LINQ 的通用书可能是一个开始，然后是一本 ASP.NET-MVC 特定的书。

也许精通“其他” OO 语言无济于事的原因是 LINQ 不是一种 OO 语言，它的功能性更强，因此需要一种不同的推理方式才能很好地理解。

# c# - 将 HttpContext.Current.Request.Files 存储在会话变量中

> ID：796575
> 
> 赞同：1
> 
> 时间：2009-04-28T07:13:31.547
> 
> 标签：c#, asp.net, session-state

我想将用户上传的文件存储在会话变量中，以便我可以从我想要的项目中的任何页面使用它。我正在从语句中检索文件：

```
httpFileCollection uploads=HttpContext.Current.Request.Files; 
```

我如何在会话变量中存储和检索它？

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T07:27:31.060

该`Files`对象仅限于当前请求；要在请求之间保持这一点，您需要对上传的数据做一些事情 - 要么[`SaveAs`](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.saveas.aspx)，要么从[`InputStream`](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.inputstream.aspx).

IMO，出于可扩展性的原因，将其存储在会话中并不是一个好主意 - 例如，将文件写入磁盘上的共享暂存区并将路径存储在会话中会更自然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:30:03.363

与您在 Session 状态中存储和检索*任何*其他对象的方式相同：

```
//Store
Session["UploadedFiles"] = uploads;

//Retrieve
if (Session["UploadedFiles"] != null)
{
  //try-catch blocks omitted for brevity. Please implement yourself.
  HttpFileCollection myUploads = (HttpFileCollection)Session["UploadedFiles"];

  // Do something with the HttpFileCollection (such as Save).

  // Remove the object from Session after you have retrieved it.
  Session.Remove("UploadedFiles");
} 
```

将此对象存储在 Session 中是否明智值得商榷，但我不推荐它。

至于 HttpFileCollection 变量不能存储在 Session 状态中的争论（参考您之前的问题），我反驳说，因为我过去能够做到这一点。将对象检索到变量中后，您可以根据需要保存它。

# c# - 是否可以在 Windows mobile (3.5) 上打开 2 个连接？

> ID：796578
> 
> 赞同：0
> 
> 时间：2009-04-28T07:13:42.343
> 
> 标签：c#, .net-3.5, windows-mobile, compact-framework

是否可以在 windows mobile 上打开 2 个与数据库（.sdf 文件）的连接？

（框架 3.5）

如果是，我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T22:39:01.150

可能是我做错了什么，但对于 SQL Server CE，我保持打开相同的连接并为我的所有呼叫共享它。如果你正在处理调用，你可能会遇到问题，但总的来说你没问题。

SQL Server 和 SQL Server CE 中的连接之间的最大区别在于您不会在 SQL Server CE 中获得连接池。当你在 CE 中关闭一个连接时，它就消失了。并且打开连接可能很昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:42:45.747

如果您使用 SQL CE 3.5，您可以。怎么做？就像您通常打开连接一样。

例如，我目前正在运行，而 MSSQL Management Studio 2008 也有与数据库的连接，因此我可以在数据库运行时查看数据。

# c# - API 组装

> ID：796580
> 
> 赞同：0
> 
> 时间：2009-04-28T07:14:05.540
> 
> 标签：c#, api, vb6

在我 VB6.0 的日子里，我使用了大量的 Windows API。所以我知道我声明的所有 API 方法几乎都是基于过程的——或者它有一个基于过程的入口点。

我的问题 ：

我用 C# 编写了一些需要从 VB6.0 访问的代码。是否可以将我的 C# 代码编译为 DLL 并从 VB6.0 访问该 C# DLL，将其声明为 API 调用？如果是这样，这是如何完成的？

（我已经尝试过使我的 C# DLL COM 兼容，并且它有效 - 但我还是想尝试上述方法）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T07:31:11.910

不，您不能将 C# DLL 的入口点作为 Win32 样式的 API 公开。如果您真的非常需要为 .NET 库创建过程入口点，那么最好的办法可能是使用 C++/CLI 创建一个混合模式包装器库。但这似乎是一项艰巨的工作：将 C# 类公开为 COM 对象可能会少得多，维护起来也容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T16:03:03.490

如果您很高兴自己的手（非常）脏，您可以使用 MSIL 做您想做的事。查看[此 CodeProject 项目](http://www.codeproject.com/KB/dotnet/emilio_managed_unmanaged.aspx)以进行演练。

# oop - 策略模式是否违反单一职责原则？

> ID：796581
> 
> 赞同：4
> 
> 时间：2009-04-28T07:14:20.420
> 
> 标签：oop, design-patterns, strategy-pattern

如果单一职责原则规定每个对象都必须有一个更改的理由，并且使用策略模式（根据定义）实现的单个策略类具有多个可以因多种原因而更改的方法，这是否意味着不可能实现不违反 SRP 的策略模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T07:31:06.183

怎么会这样？如果我记得，策略模式基本上是一种解耦正在使用的逻辑/算法的方法。所以客户端有 m_IAlgorithm。IAlgorithm 应该有一小组方法，如果没有的话。

所以 AlgoImplementation 类可以改变的唯一原因是

*   如果它实现的算法发生变化。（**改变其责任/行为**）
*   或者如果 IAlgoritm 发生变化……除非您在定义接口时犯了错误，否则这种情况很少见。（它改变了它自己的公共接口——所以不要认为它违反了 SRP。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T07:42:28.980

我实际上看到了相反的情况。策略模式让您可以解耦两件事，用于完成某些工作的（潜在）算法以及关于这些算法的决策逻辑。

我不确定你是否宁愿有一个类，它既可以对要使用的算法执行条件逻辑，也可以包含这些算法。另外，我并不是说你暗示了这一点，但你没有给出一个例子，说明策略会破坏 SRP 以及在你看来什么是更好的设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-04-18T13:31:19.613

我最熟悉的单一职责原则的上下文是在整体系统设计中，并且可以补充关于系统内组件分组的策略模式。

使用策略模式定义一组客户端可互换使用的算法，然后可以使用单一职责原则来决定将客户端分组的位置以及客户端在系统中使用的算法。如果您的工作仅在算法 B 中进行，则您不想打扰算法 A 的代码，反之亦然。对于编译型语言，这会对重构、版本和部署周期的复杂性产生重大影响。当只需要更改算法 B 的位置时，为什么要版本并重新编译客户端和算法 A、C 和 D。

有了对单一职责原则的这种理解，我看不出有一个实现策略模式的类在哪里违反了 SRP。客户端类的目的是实现策略模式，即客户端的职责。算法的目的是实现它们负责的逻辑，单一责任原则是不要在系统内将它们全部组合在一起，因为它们会因不同的原因而变化。那是我的 0.02 美元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:20:08.787

好点:) 我想这更像是一个单一的责任指南，这对许多情况都是有意义的，但对于某些情况也不是，比如策略模式..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-10T18:03:05.240

取决于IMO的观点。如果您将策略（例如类）视为由运行时决定的算法/逻辑的混合物，并且它们彼此完全不同......是的，有点违反单一责任模式......但如果你认为关于这个策略类，它是一个解耦实体，它封装了整个决策并使其成为一个单一的工作类——决定使用哪种算法/逻辑，仅此而已

# .net - 单例、日志记录和全局设置 - 好还是坏的实现？

> ID：796585
> 
> 赞同：8
> 
> 时间：2009-04-28T07:14:56.147
> 
> 标签：.net, singleton, scope, settings, global

我有一个日志类，需要从应用程序中的几乎所有地方调用。

但是，它需要在应用程序的开头设置“要写入的路径”、“日志级别”以及是否“启用”。

我不想每次都给这个参数或将 Logging 类作为参数传递给我的应用程序中的每个对象，所以我确实使用单例模式进行日志记录。

最近我从紧密耦合的类中遭受了很多痛苦，我不想再犯同样的错误，但考虑到这听起来像是唯一的好解决方案。

**更新 ：**

**我并不真正关心记录我关心的是解决类似的设计问题**，我与另一个需要从这么多类中使用的全局设置对象有同样的困境。但是将它注入到它们中的每一个只会产生可怕的开销和可读性较差的代码。

你如何看待这个实现，当你遇到类似的设计决策时你会怎么做？

*PS请不要提出“使用Log4X库”之类的建议。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T07:18:15.297

首先-您可以将日志编写器编写为跟踪侦听器，并`Trace.Write`从方法中使用等吗？

你真的需要一个实例吗？这将很有用，例如，如果你想将它抽象为一个`TextWriter`或类似的 - 但如果它是一个独立的单例，这些方法可以不直接使用静态方法，即`Log.Write(...)`（而不是传递一个日志实例）？

关于一般问题 - 它取决于正在执行日志记录的类型。对于“管理器”（等）类，您可以考虑使用依赖注入（Unity、StructureMap 等）来自动执行此操作。不过，我通常不会将注入与 DTO 一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T07:21:58.827

即使您不想要“使用 Log4X”的建议（尽管您没有确切*说明为什么*要重新发明轮子），查看各种日志库做出的设计决策似乎是明智的。

以我的经验，紧密耦合的问题在应用于日志记录时并不那么相关——特别是，我很少想测试我的应用程序的日志记录端，而且我不介意它是否在单元测试期间记录到控制台。

简而言之，“正常”模式：

```
private static readonly Logger log = LogManager.GetLogger(...); 
```

（通过适当的名称更改等）在使用静态方法时在美学上没有吸引力，但在实践中效果很好。至少，这是我的经验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T07:30:02.723

您可能可以在这里使用单例。您将在应用程序中的每个类和记录器类之间紧密耦合，但是如果每个类都确实需要记录器类和全局设置类，这是可以接受的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T07:51:49.443

日志记录和设置实际上以两种不同的方式处理，所以如果我理解正确，您的实际问题与处理程序集之间的全局设置更相关。

关于日志记录，事情很清楚 - 使用全局单例是很常见的，尽管它确实将您的库与日志库紧密耦合。恕我直言，使用跟踪侦听器是一个更好的解决方案。

但是在谈论应用程序设置时，您当然应该**避免**将它们设为全局。将所有与应用程序相关的设置仅保存在一个地方（那些应该被持久化的地方），而不是静态地可供其他库使用。因此，将适当的设置传递给其他程序集必须是调用者的责任，反之亦然。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T08:23:47.977

在这种情况下，我个人使用静态类。该类具有静态配置字段（用于手动试验）以及一些使用相应 .config 文件部分的配置来填充它们的功能。

这实际上与 DI 非常接近，因为您可以“注入”新配置。要将配置更改为新模型，我只需更改保持“活动”配置部分的 .config 文件字段。

这易于使用，易于维护，并且每个人都理解它......我看不出它有什么特别的缺点......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T07:22:45.567

这是 ASP.Net 吗？如果是这样，您可以使用 Global.asax 中的错误事件。

对于您的许多依赖项，您是否考虑过使用依赖注入框架？

**更新**

我不确定性能影响或性能与您的应用程序的相关性，但这个框架看起来很有趣：[PostSharp](http://www.postsharp.org/)，[一篇关于它的博客文章](http://johnnycoder.com/blog/2009/01/16/caching-with-c-aop-and-postsharp/)。

您还可以利用[Conditional 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)。

如果您使用 PostSharp，我会对它的工作原理感兴趣。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T10:15:13.997

您可以调查的一件事是按功能打包。据称，遵循这种技术可以缓解一些导致类之间高度耦合的问题。更具体地说，这意味着在您的应用程序的每个功能中只有一个类负责与配置提供者进行对话（这很可能是配置/设置/安装功能本身的一部分）。耦合程度仍然偏高，但由于它定义明确，它应该是可管理的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T07:42:03.490

相似的东西：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using log4net;
using log4net.Config;
using log4net.Appender;
using System.Reflection;
using System.IO;
using System.Globalization;
using log4net.Core;
using System.Web;

namespace GenApp.Utils
{
  ///<summary> Wrapper around log4net with dynamically adjustable verbosity</summary>
  public class Logger
  {

    private static Logger inst = new Logger ();
    public static Logger Inst ()
    {
      inst.ConfigureLogging ();
      return inst;
    }

    public enum DebugLevel : int
    {
      Fatal_Msgs = 0,
      Fatal_Error_Msgs = 1,
      Fatal_Error_Warn_Msgs = 2,
      Fatal_Error_Warn_Info_Msgs = 3,
      Fatal_Error_Warn_Info_Debug_Msgs = 4
    }

    public static void Debug ( GenApp.Bo.User objUser, ILog logger, string msg )
    {
      DebugLevel debugLevel = (DebugLevel)objUser.UserSettings.LogLevel;
      string strLogLevel = Logger.GetLogTypeString ( debugLevel );
      inst.SetLogingLevel ( strLogLevel );
      logger.Debug ( msg );

    } //eof method 

    public static void Info ( GenApp.Bo.User objUser, ILog logger, string msg )
    {
      DebugLevel debugLevel = (DebugLevel)objUser.UserSettings.LogLevel;
      string strLogLevel = Logger.GetLogTypeString ( debugLevel );
      inst.SetLogingLevel ( strLogLevel );
      logger.Info ( msg );

    } //eof method 

    public static void Warn ( GenApp.Bo.User objUser, ILog logger, string msg )
    {
      DebugLevel debugLevel = (DebugLevel)objUser.UserSettings.LogLevel;
      string strLogLevel = Logger.GetLogTypeString ( debugLevel );
      inst.SetLogingLevel ( strLogLevel );
      logger.Warn ( msg );

    } //eof method 

    public static void Error ( GenApp.Bo.User objUser, ILog logger, string msg )
    {
      DebugLevel debugLevel = (DebugLevel)objUser.UserSettings.LogLevel;
      string strLogLevel = Logger.GetLogTypeString ( debugLevel );
      inst.SetLogingLevel ( strLogLevel );
      logger.Error ( msg );
    } //eof method 

    public static void Fatal ( GenApp.Bo.User objUser, ILog logger, string msg )
    {
      DebugLevel debugLevel = (DebugLevel)objUser.UserSettings.LogLevel;
      string strLogLevel = Logger.GetLogTypeString ( debugLevel );
      inst.SetLogingLevel ( strLogLevel );
      logger.Fatal ( msg );
    } //eof method 

    /// <summary>
    /// Activates debug level 
    /// </summary>
    /// <sourceurl>http://geekswithblogs.net/rakker/archive/2007/08/22/114900.aspx</sourceurl>
    private void SetLogingLevel ( string strLogLevel )
    {

      this.ConfigureLogging ();
      string strChecker = "WARN_INFO_DEBUG_ERROR_FATAL";

      if (String.IsNullOrEmpty ( strLogLevel ) == true || strChecker.Contains ( strLogLevel ) == false)
        throw new ArgumentOutOfRangeException ( " The strLogLevel should be set to WARN , INFO , DEBUG ," );

      log4net.Repository.ILoggerRepository[] repositories = log4net.LogManager.GetAllRepositories ();

      //Configure all loggers to be at the debug level.
      foreach (log4net.Repository.ILoggerRepository repository in repositories)
      {
        repository.Threshold = repository.LevelMap[strLogLevel];
        log4net.Repository.Hierarchy.Hierarchy hier = (log4net.Repository.Hierarchy.Hierarchy)repository;
        log4net.Core.ILogger[] loggers = hier.GetCurrentLoggers ();
        foreach (log4net.Core.ILogger logger in loggers)
        {
          ( (log4net.Repository.Hierarchy.Logger)logger ).Level = hier.LevelMap[strLogLevel];
        }
      }

      //Configure the root logger.
      log4net.Repository.Hierarchy.Hierarchy h = (log4net.Repository.Hierarchy.Hierarchy)log4net.LogManager.GetRepository ();
      log4net.Repository.Hierarchy.Logger rootLogger = h.Root;
      rootLogger.Level = h.LevelMap[strLogLevel];
    }

    ///<summary>
    ///0 -- prints only FATAL messages 
    ///1 -- prints FATAL and ERROR messages 
    ///2 -- prints FATAL , ERROR and WARN messages 
    ///3 -- prints FATAL  , ERROR , WARN and INFO messages 
    ///4 -- prints FATAL  , ERROR , WARN , INFO and DEBUG messages 
    ///</summary>
    private static string GetLogTypeString ( DebugLevel debugLevel )
    {

      string srtLogLevel = String.Empty;
      switch (debugLevel)
      {
        case DebugLevel.Fatal_Msgs:
          srtLogLevel = "FATAL";
          break;
        case DebugLevel.Fatal_Error_Msgs:
          srtLogLevel = "ERROR";
          break;
        case DebugLevel.Fatal_Error_Warn_Msgs:
          srtLogLevel = "WARN";
          break;
        case DebugLevel.Fatal_Error_Warn_Info_Msgs:
          srtLogLevel = "INFO";
          break;
        case DebugLevel.Fatal_Error_Warn_Info_Debug_Msgs:
          srtLogLevel = "DEBUG";
          break;
        default:
          srtLogLevel = "FATAL";
          break;
      } //eof switch
      return srtLogLevel;

    } //eof GetLogTypeString

    /// <summary>
    /// The path where the configuration is read from.
    /// This value is set upon a call to ConfigureLogging().
    /// </summary>
    private string configurationFilePath;
    public void ConfigureLogging ()
    {
      lock (this)
      {
        bool configured = false;

        #region ConfigureByThePathOfTheEntryAssembly
        // Tells the logging system the correct path.
        Assembly a = Assembly.GetEntryAssembly ();

        if (a != null && a.Location != null)
        {
          string path = a.Location + ".config";

          if (File.Exists ( path ))
          {
            log4net.Config.DOMConfigurator.Configure (
              new FileInfo ( path ) );
            configurationFilePath = path;
            configured = true;
          }
          else
          {
            path = FindConfigInPath ( Path.GetDirectoryName ( a.Location ) );
            if (File.Exists ( path ))
            {
              log4net.Config.DOMConfigurator.Configure (
                new FileInfo ( path ) );
              configurationFilePath = path;
              configured = true;
            }
          }
        }
        #endregion ConfigureByThePathOfTheEntryAssembly

        #region ConfigureByWeb.config
        // Also, try web.config.
        if (!configured)
        {
          if (HttpContext.Current != null &&
            HttpContext.Current.Server != null &&
            HttpContext.Current.Request != null)
          {
            string path = HttpContext.Current.Server.MapPath (
              HttpContext.Current.Request.ApplicationPath );

            path = path.TrimEnd ( '\\' ) + "\\Web.config";

            if (File.Exists ( path ))
            {
              log4net.Config.DOMConfigurator.Configure (
                new FileInfo ( path ) );
              configurationFilePath = path;
              configured = true;
            }
          }
        }
        #endregion ConfigureByWeb.config

        #region ConfigureByThePathOfTheExecutingAssembly
        if (!configured)
        {
          // Tells the logging system the correct path.
          a = Assembly.GetExecutingAssembly ();

          if (a != null && a.Location != null)
          {
            string path = a.Location + ".config";

            if (File.Exists ( path ))
            {
              log4net.Config.DOMConfigurator.Configure (
                new FileInfo ( path ) );
              configurationFilePath = path;
              configured = true;
            }
            else
            {
              path = FindConfigInPath ( Path.GetDirectoryName ( a.Location ) );
              if (File.Exists ( path ))
              {
                log4net.Config.DOMConfigurator.Configure (
                  new FileInfo ( path ) );
                configurationFilePath = path;
                configured = true;
              }
            }
          }
        }
        #endregion ConfigureByThePathOfTheExecutingAssembly

        #region ConfigureByThePathOfTheCallingAssembly
        if (!configured)
        {
          // Tells the logging system the correct path.
          a = Assembly.GetCallingAssembly ();

          if (a != null && a.Location != null)
          {
            string path = a.Location + ".config";

            if (File.Exists ( path ))
            {
              log4net.Config.DOMConfigurator.Configure (
                new FileInfo ( path ) );
              configurationFilePath = path;
              configured = true;
            }
            else
            {
              path = FindConfigInPath ( Path.GetDirectoryName ( a.Location ) );
              if (File.Exists ( path ))
              {
                log4net.Config.DOMConfigurator.Configure (
                  new FileInfo ( path ) );
                configurationFilePath = path;
                configured = true;
              }
            }
          }
        }
        #endregion ConfigureByThePathOfTheCallingAssembly

        #region ConfigureByThePathOfTheLibIsStored
        if (!configured)
        {
          // Look in the path where this library is stored.
          a = Assembly.GetAssembly ( typeof ( Logger ) );

          if (a != null && a.Location != null)
          {
            string path = FindConfigInPath ( Path.GetDirectoryName ( a.Location ) );
            if (File.Exists ( path ))
            {
              log4net.Config.DOMConfigurator.Configure (
                new FileInfo ( path ) );
              configurationFilePath = path;
              configured = true;
            }
          }
        }
        #endregion ConfigureByThePathOfTheLibIsStored

      } //eof lock   
    } //eof method 

    /// <summary>
    /// Searches for a configuration file in the given path.
    /// </summary>
    private string FindConfigInPath (
      string path )
    {
      string[] files = Directory.GetFiles ( path );

      if (files != null && files.Length > 0)
      {
        foreach (string file in files)
        {
          if (Path.GetExtension ( file ).Trim ( '.' ).ToLower (
            CultureInfo.CurrentCulture ) == "config")
          {
            return file;
          }
        }
      }

      // Not found.
      return string.Empty;
    } //eof method 

    /// <summary>
    /// Remove dynamically appenders
    /// </summary>
    /// <param name="appenderName"></param>
    /// <param name="threshold"></param>
    public static void SetThreshold ( string appenderName, Level threshold )
    {
      foreach (AppenderSkeleton appender in LogManager.GetRepository ().GetAppenders ())
      {
        if (appender.Name == appenderName)
        {
          appender.Threshold = threshold;
          appender.ActivateOptions ();

          break;
        }
      }
    } //eof method 

  } //eof class 

} //eof namespace 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-11T21:09:30.560

如果你总是写到同一个源，那么你可以使用单例模式。

但是，如果您在不同的源上记录信息，例如在文件或事件日志中，则为不同的配置创建不同的日志记录类实例。

# flash - ActionScript 3 - 打开外部文件

> ID：796586
> 
> 赞同：0
> 
> 时间：2009-04-28T07:15:00.390
> 
> 标签：flash, actionscript-3, powerpoint

有谁知道在 ActionScript 3 中打开外部文件的方法，而不需要先通过浏览器的请求。具体来说，我想直接用 PowerPoint 打开一个 PowerPoint 演示文稿。

我试过了：

```
var url:String = "MyContent/My presentation.pptx";
var request:URLRequest = new URLRequest(url);
navigateToURL(request); 
```

效果很好，但它首先向浏览器发出请求，而不是用 PowerPoint 本地打开它。

注意：这是一个桌面 Flash 作品，不会出现在网络上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T10:42:24.150

您需要一个外部包装器。James 告诉你的 Zinc、Adobe AIR 或 HippoHX 等开源替代品。

应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T07:38:28.367

我相当肯定，这仅靠闪光灯或空气是不可能的。主要是因为沙盒问题。能够打开其他应用程序可能会导致安全漏洞。

它应该可以通过[Zinc](http://www.multidmedia.com/software/zinc/)实现，但它需要更多的工作，而且显然需要额外的成本……如果你需要它发生，它可能是值得的。

# mysql - 我可以使用 CGI 显示 MySQL 的输出吗？

> ID：796593
> 
> 赞同：2
> 
> 时间：2009-04-28T07:16:30.417
> 
> 标签：mysql, perl, cgi, dbi

嗨，我使用 DBI 模块在 Perl 中编写了一个程序。我可以使用 CGI 显示 MySQL 的输出吗？如果是这样，请帮助我。

程序：

```
#!/usr/bin/perl -w
use DBI;

print "Content-type:text/html\n\n";
$db_handle = DBI->connect("dbi:mysql:database=CYP1B1;host=localhost:192.168.3.93;")
    or die "Couldn't connect to database: $DBI::errstr\n";

$sql = "SELECT * FROM BPCG";
$statement = $db_handle->prepare($sql)
    or die "Couldn't prepare query '$sql': $DBI::errstr\n";

$statement->execute()
    or die "Couldn't execute query '$sql': $DBI::errstr\n";
print "Location\tNucleotidechange\tAminoacidchange\n";
while(($Location,$Nucleotidechange,$Aminoacidchange)=$statement->fetchrow_array())
{
    print "$Location  $Nucleotidechange               $Aminoacidchange \n";

}
$db_handle->disconnect(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T13:21:36.483

你所拥有的是一个 CGI 脚本，足够接近。但是，您没有输出任何 HTML，该输出是用空格分隔的。将您的内容类型更改为“文本/纯文本”。

您需要的是一个网络服务器来运行您的 CGI 脚本。去查找有关 lighttpd 或 apache 的内容，以及如何设置它们以运行 CGI 脚本（[例如，Apache 的示例](http://httpd.apache.org/docs/2.2/howto/cgi.html)）。抱歉，没有什么是很有帮助的，设置网络服务器的主题相当复杂，但希望一些搜索词能让你朝着正确的方向前进。

或者，请注意，这不是为网络编写任何内容的现代方式。如果您正在探索什么是可能的（而不是快速解决问题），我建议您学习一个框架，例如 Catalyst（在 CPAN 上）。那里有更多的前期工作，但从长远来看，无论你想要做什么都会更容易做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T20:24:48.680

尝试阅读[Ovid 的 CGI 课程](http://jdporter.perlmonk.org/cgi_course/)。它有我见过的基本 CGI 编程的最佳解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T09:59:25.797

[从CPAN](http://search.cpan.org/~lds/CGI.pm-3.43/CGI.pm)开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T18:24:44.617

CGI 程序并没有什么特别之处。您必须输出 CGI 标头，但之后您可以像任何其他程序一样输出您喜欢的内容。

你到底想做什么，你有什么问题？当你运行你的程序时，什么没有按你预期的那样工作？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-29T17:12:26.020

我也想知道在网页上使用 cgi 显示 Mysql 数据库记录是否困难。这是我如何做到的链接（虽然它相当基本，但真的不是太难）： [Using Perl and Mysql to create a pages](http://markfightscode.blogspot.com/2009/11/using-perl-and-mysql-to-create-webpage.html)

我使用了 CGI、HTML::Template 和 DBI 模块。这是使用模块创建留言簿网页的基本教程的链接： [使用模块创建网页](http://www.bin-co.com/perl/tutorial/modules.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-29T00:01:33.933

看起来您已经在输出所需的标头（内容类型 + 2 个换行符），因此您通过 Web 浏览器查看此内容的所有剩余操作是将程序放在可以运行 cgi 脚本的 Web 服务器上的目录中（通常称为 cgi-bin），确保文件是可执行的（chmod 755 yourscript.cgi），然后将您的 Web 浏览器指向所需的 URL，例如[http://yourserver/cgi-bin/yourscript.cgi](http://yourserver/cgi-bin/yourscript.cgi)

# sharepoint - SPD 中的 DataView 组件将不必要的字符串附加到字段值

> ID：796594
> 
> 赞同：2
> 
> 时间：2009-04-28T07:16:34.097
> 
> 标签：sharepoint, moss, wss, sharepoint-designer, dataview

在 SharePoint Designer 中，我使用一些列表作为源，然后通过操作 GetListItems 将它们链接在一起（我从不同网站集上的多个列表中获取项目以进行汇总/聚合）： [alt text http://img151.imageshack.us/img151/1807 /ss20090428101310.png](http://img151.imageshack.us/img151/1807/ss20090428101310.png)

现在一切都很好，因为我设法得到了结果：[alt text http://img410.imageshack.us/img410/4835/ss20090428101013.png](http://img410.imageshack.us/img410/4835/ss20090428101013.png)

但是附加到字段结果 (6;#, 2;#) 的字符串......令人不安。我怎样才能摆脱那些附加的字符串？它们并非附加到所有领域，而是附加到一些（重要的）：

[替代文字 http://img168.imageshack.us/img168/1647/ss20090428100732.png](http://img168.imageshack.us/img168/1647/ss20090428100732.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:33:38.300

啊，通常情况下会发生这种情况-您一直在寻找答案，然后寻求帮助并自己找到。

我使用 substring xsl 函数来去除那些第一个字符。凌乱，如果我想添加到该表的链接，但有效。

[替代文字 http://img2.imageshack.us/img2/3117/ss20090428102714.png](http://img2.imageshack.us/img2/3117/ss20090428102714.png)

顺便说一句，如何从多个网站集中汇总内容的主要问题已经困扰我好几天了。如果有人遇到同样的情况，我建议（因为我在那里找到了答案）这些：

*   [如何在一个页面上汇总两个网站集中的两个列表](http://blogs.technet.com/harikumh/archive/2009/02/19/how-to-rollup-two-lists-in-two-site-collections-on-a-page.aspx)
*   或用于单个网站集的更好方法：[SharePoint 自定义技巧：使用 SPDataSource，Luke！](http://blog.mattsmith.co.nz/Lists/Posts/Post.aspx?List=c7bdac80-1d4e-4732-9e67-cefde9c03d31&ID=56)（那篇文章中的好链接）。
*   我没有接触到的东西，因为我不需要这么高级的方法，但也许有人需要：[在代码中填充数据源](http://sharepointmagazine.net/technical/development/populating-data-sources-in-code)

# log4net - 将调试信息和错误信息放入两个不同的日志文件（Log4net）

> ID：796596
> 
> 赞同：4
> 
> 时间：2009-04-28T07:17:16.593
> 
> 标签：log4net

我正在使用 NHibernate 和 log4net。这是我的错误日志文件的快照，使用的是我的软件的发布版本：

```
INFO 2009-04-28 03:07:06 - processing cascade NHibernate.Engine.CascadingAction+SaveUpdateCascadingAction for: bpojob.Generated.BusinessObjects.Job
INFO 2009-04-28 03:07:06 - cascade NHibernate.Engine.CascadingAction+SaveUpdateCascadingAction for collection: bpojob.Generated.BusinessObjects.Job.JobItems
DEBUG2009-04-28 03:07:06 - cascading to saveOrUpdate: bpojob.Generated.BusinessObjects.JobItem
DEBUG2009-04-28 03:07:06 - unsaved-value: 0
DEBUG2009-04-28 03:07:06 - transient instance of: bpojob.Generated.BusinessObjects.JobItem
DEBUG2009-04-28 03:07:06 - saving transient instance
DEBUG2009-04-28 03:07:06 - saving [bpojob.Generated.BusinessObjects.JobItem#<null>]
DEBUG2009-04-28 03:07:06 - executing insertions
DEBUG2009-04-28 03:07:06 - executing identity-insert immediately
DEBUG2009-04-28 03:07:06 - Inserting entity: bpojob.Generated.BusinessObjects.JobItem (native id)
DEBUG2009-04-28 03:07:06 - Opened new IDbCommand, open IDbCommands: 1
DEBUG2009-04-28 03:07:06 - Building an IDbCommand object for the SqlString: INSERT INTO job_items (FileName, Job_Id, Status) VALUES (?, ?, ?)
DEBUG2009-04-28 03:07:06 - Dehydrating entity: [bpojob.Generated.BusinessObjects.JobItem#<null>]
DEBUG2009-04-28 03:07:06 - binding 'Blue hills.jpg' to parameter: 0
DEBUG2009-04-28 03:07:06 - binding '8' to parameter: 1
DEBUG2009-04-28 03:07:06 - binding '1' to parameter: 2
DEBUG2009-04-28 03:07:06 - INSERT INTO job_items (FileName, Job_Id, Status) VALUES (?p0, ?p1, ?p2); ?p0 = 'Blue hills.jpg', ?p1 = '8', ?p2 = '1'
DEBUG2009-04-28 03:07:06 - Obtaining IDbConnection from Driver
DEBUG2009-04-28 03:07:06 - Closed IDbCommand, open IDbCommands: 0
DEBUG2009-04-28 03:07:06 - aggressively releasing database connection
DEBUG2009-04-28 03:07:06 - Closing connection
DEBUG2009-04-28 03:07:06 - could not insert: [bpojob.Generated.BusinessObjects.JobItem]
[ INSERT INTO job_items (FileName, Job_Id, Status) VALUES (?p0, ?p1, ?p2) ]

MySql.Data.MySqlClient.MySqlException: Duplicate entry 'Blue hills.jpg' for key 'Unique'
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
   at MySql.Data.MySqlClient.NativeDriver.ReadResult(UInt64& affectedRows, Int64& lastInsertId)
   at MySql.Data.MySqlClient.MySqlDataReader.GetResultSet()
   at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader()
   at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd)
   at NHibernate.Id.Insert.AbstractSelectingDelegate.PerformInsert(SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder) 
```

如您所见，所有`info`和`debug`都`exception`拼凑在一起，一旦出现错误，就很难筛选文件并查找信息。

我想将所有异常信息放入一个文件中，并将其他信息放入另一个文件中。而我要排除的调试信息是**release mode**。这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T12:49:52.067

In the below code i am using two log files using two appender(one for Debug,another for Fatal)

```
<log4net>
<appender name="FatalErrorLog" type="log4net.Appender.RollingFileAppender">
  <file value="C:\temp\Host.log" />
  <appendToFile value="true" />
  <maximumFileSize value="10MB" />
  <maxSizeRollBackups value="50" />
  <rollingStyle value="Size" />
  <layout type="log4net.Layout.PatternLayout">
     <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
  </layout>
  <filter type="log4net.Filter.LevelRangeFilter">
     <levelMin value="ERROR" />
     <levelMax value="FATAL" />
  </filter>
</appender>

<appender name="DebugLog" type="log4net.Appender.RollingFileAppender">
<file value="C:\temp\HostDebug.log" />
<appendToFile value="true" />
<maximumFileSize value="10MB" />
<maxSizeRollBackups value="50" />
<rollingStyle value="Size" />
<layout type="log4net.Layout.PatternLayout">
  <conversionPattern value="%identity------%username------%date [%thread] %-5level %logger - %message%newline" />
</layout>
<filter type="log4net.Filter.LevelRangeFilter">
  <levelMin value="DEBUG" />
  <levelMax value="ERROR" />
</filter>
</appender>
</log4net> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T08:50:15.637

In your log4net.xml use a different file appender logger for Error and Warning

See [here](http://logging.apache.org/log4net/release/manual/configuration.html) for more info

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T07:23:16.750

您不能只使用日志解析器以您选择的任何方式过滤/排序数据吗？

[Log4Net Dashboard](http://www.l4ndash.com/)是一个很好的工具（它有一个[免费的开发者版本](http://www.l4ndash.com/Download.aspx)）。

# c - Valgrind 是否存在已知的误报问题？

> ID：796600
> 
> 赞同：20
> 
> 时间：2009-04-28T07:19:20.503
> 
> 标签：c, debugging, gcc, profiling, valgrind

Valgrind 是否有任何已知的误报？我使用该函数得到“条件跳转或移动取决于未初始化的值” `fmemopen`，用 C 语言编写并用 GCC 编译。我能确定它是真的吗？

编辑：是否存在抑制文件中没有的已知问题？是否有一些事情可以在程序中做，这不是真正的错误，但 Valgrind 会说它们是？如果有已知问题，列表会很好。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-28T07:29:46.297

是的，Valgrind 存在误报，这就是为什么它具有特定 glibc 和 gcc 版本的抑制文件，例如。如果您使用较旧的 valgrind 和较新的 gcc 和 glibc，即 valgrind 3.3 和 glibc 2.9，则可能会出现误报。

话虽如此，您仍然需要调查问题并确定它是否真的是误报（如果事实证明是这种情况，您可以自己为其编写抑制）或者它是否是您程序中的真正错误。

没有快速简便的方法来说明这里发生了什么，但在这种情况下，我怀疑您正在将未初始化的值从代码传递到库代码。试试 Valgrind 选项`--track-origins=yes`。它将显示未初始化值的来源。如果它是您的代码，可能您应该初始化它。如果它在库中，则可能是误报，或者库调用参数的错误值可能会导致它，因此请检查这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T23:05:07.220

Valgrind 带有一些默认的错误抑制，但它们绝不会涵盖所有库。

> 错误检查工具可检测基本库中的大量问题，例如 GNU C 库和 X11 客户端库，这些库预装在您的 GNU/Linux 系统上。你不能轻易地修复这些，但你不想看到这些错误（是的，有很多！）所以 Valgrind 读取错误列表以在启动时抑制。构建系统时，./configure 脚本会创建一个默认抑制文件。

您可以创建自己的[错误抑制](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)，您知道这些错误抑制与您的代码无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T13:17:41.890

Debian SSL 的动机不是通过使用 Valgrind 修复一些误报吗？

# struts2 - Struts 2 中的 validate() 和 reset() 方法有哪些示例？

> ID：796604
> 
> 赞同：3
> 
> 时间：2009-04-28T07:20:52.917
> 
> 标签：struts2, struts

任何人都可以给我 struts2 中 validate() 和 reset() 方法的示例

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-29T07:39:00.400

这是一个涵盖验证方法的教程： [http ://www.vaannila.com/struts2/validation1Example1.html](http://www.vaannila.com/struts2/validation1Example1.html)

这是一个使用重置方法的教程： [http ://www.rkcole.com/articles/struts/crudTutorial/step1.html](http://www.rkcole.com/articles/struts/crudTutorial/step1.html)

# c# - 如何使用枚举值的自定义字符串格式设置枚举绑定组合框？

> ID：796607
> 
> 赞同：138
> 
> 时间：2009-04-28T07:21:23.697
> 
> 标签：c#, combobox, enums

在帖子[Enum ToString](https://stackoverflow.com/questions/479410/enum-tostring)中，描述了一种使用自定义属性的方法，`DescriptionAttribute`如下所示：

```
Enum HowNice {
  [Description("Really Nice")]
  ReallyNice,
  [Description("Kinda Nice")]
  SortOfNice,
  [Description("Not Nice At All")]
  NotNice
} 
```

然后，您调用一个函数`GetDescription`，使用如下语法：

```
GetDescription<HowNice>(NotNice); // Returns "Not Nice At All" 
```

但是，当我想简单地用枚举的值填充 ComboBox 时，这并没有真正帮助我**，因为我不能强制 ComboBox 调用`GetDescription`**.

我想要的有以下要求：

*   读取`(HowNice)myComboBox.selectedItem`将返回选定的值作为枚举值。
*   用户应该看到用户友好的显示字符串，而不仅仅是枚举值的名称。因此`NotNice`，用户将看到“”，而不是看到“ `Not Nice At All`”。
*   希望该解决方案将需要对现有枚举进行最少的代码更改。

显然，我可以为我创建的每个枚举实现一个新类，并覆盖它`ToString()`，但这对每个枚举来说都是很多工作，我宁愿避免这样做。

有任何想法吗？

哎呀，我什至会[拥抱](https://stackoverflow.com/questions/795979/retrieve-a-list-of-the-most-popular-get-param-variations-for-a-given-url)作为赏金:-)

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-04-28T07:36:31.007

`ComboBox`拥有您需要的一切：`FormattingEnabled`您应该设置为的属性`true`和`Format`事件，您需要在其中放置所需的格式化逻辑。因此，

```
myComboBox.FormattingEnabled = true;
myComboBox.Format += delegate(object sender, ListControlConvertEventArgs e)
    {
        e.Value = GetDescription<HowNice>((HowNice)e.Value);
    } 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2009-04-28T07:33:25.337

不！枚举是原语而不是 UI 对象 - 从设计的角度来看，让它们在 .ToString() 中为 UI 服务是非常糟糕的。您在这里尝试解决错误的问题：真正的问题是您不希望 Enum.ToString() 出现在组合框中！

现在这确实是一个非常可以解决的问题！您创建一个 UI 对象来表示您的组合框项目：

```
sealed class NicenessComboBoxItem
{
    public string Description { get { return ...; } }
    public HowNice Value { get; private set; }

    public NicenessComboBoxItem(HowNice howNice) { Value = howNice; }
} 
```

然后只需将此类的实例添加到组合框的 Items 集合并设置以下属性：

```
comboBox.ValueMember = "Value";
comboBox.DisplayMember = "Description"; 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2009-04-28T07:42:49.090

您可以编写一个读取指定属性的 TypeConverter 以在您的资源中查找它们。因此，您可以毫不费力地获得对显示名称的多语言支持。

查看 TypeConverter 的 ConvertFrom/ConvertTo 方法，并使用反射来读取 enum *fields*上的属性。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2009-04-28T08:07:18.343

类型转换器。我想这就是我一直在寻找的。大家欢呼[西蒙斯文森](https://stackoverflow.com/questions/796607/how-do-i-override-tostring-in-c-enums/796675#796675)！

```
[TypeConverter(typeof(EnumToStringUsingDescription))]
Enum HowNice {
  [Description("Really Nice")]
  ReallyNice,
  [Description("Kinda Nice")]
  SortOfNice,
  [Description("Not Nice At All")]
  NotNice
} 
```

我需要在当前枚举中更改的只是在声明之前添加这一行。

```
[TypeConverter(typeof(EnumToStringUsingDescription))] 
```

一旦我这样做了，任何枚举都将使用`DescriptionAttribute`其字段显示。

哦，`TypeConverter`会这样定义：

```
public class EnumToStringUsingDescription : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return (sourceType.Equals(typeof(Enum)));
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return (destinationType.Equals(typeof(String)));
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        return base.ConvertFrom(context, culture, value);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (!destinationType.Equals(typeof(String)))
        {
            throw new ArgumentException("Can only convert to string.", "destinationType");
        }

        if (!value.GetType().BaseType.Equals(typeof(Enum)))
        {
            throw new ArgumentException("Can only convert an instance of enum.", "value");
        }

        string name = value.ToString();
        object[] attrs = 
            value.GetType().GetField(name).GetCustomAttributes(typeof(DescriptionAttribute), false);
        return (attrs.Length > 0) ? ((DescriptionAttribute)attrs[0]).Description : name;
    }
} 
```

这对我的 ComboBox 案例有所帮助，但显然并没有真正覆盖`ToString()`. 我想我会同时解决这个问题......

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2012-08-01T01:25:33.213

使用您的枚举示例：

```
using System.ComponentModel;

Enum HowNice
{
    [Description("Really Nice")]
    ReallyNice,
    [Description("Kinda Nice")]
    SortOfNice,
    [Description("Not Nice At All")]
    NotNice
} 
```

创建扩展：

```
public static class EnumExtensions
{
    public static string Description(this Enum value)
    {
        var enumType = value.GetType();
        var field = enumType.GetField(value.ToString());
        var attributes = field.GetCustomAttributes(typeof(DescriptionAttribute),
                                                   false);
        return attributes.Length == 0
            ? value.ToString()
            : ((DescriptionAttribute)attributes[0]).Description;
    }
} 
```

然后你可以使用类似下面的东西：

```
HowNice myEnum = HowNice.ReallyNice;
string myDesc = myEnum.Description(); 
```

有关更多信息，请参见：[http ://www.blackwasp.co.uk/EnumDescription.aspx。](http://www.blackwasp.co.uk/EnumDescription.aspx)归功于 Richrd Carr 的解决方案

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-28T08:00:16.037

您可以创建一个通用结构，您可以将其用于所有具有描述的枚举。通过与类之间的隐式转换，您的变量仍然像枚举一样工作，除了 ToString 方法：

```
public struct Described<T> where T : struct {

    private T _value;

    public Described(T value) {
        _value = value;
    }

    public override string ToString() {
        string text = _value.ToString();
        object[] attr =
            typeof(T).GetField(text)
            .GetCustomAttributes(typeof(DescriptionAttribute), false);
        if (attr.Length == 1) {
            text = ((DescriptionAttribute)attr[0]).Description;
        }
        return text;
    }

    public static implicit operator Described<T>(T value) {
        return new Described<T>(value);
    }

    public static implicit operator T(Described<T> value) {
        return value._value;
    }

} 
```

使用示例：

```
Described<HowNice> nice = HowNice.ReallyNice;

Console.WriteLine(nice == HowNice.ReallyNice); // writes "True"
Console.WriteLine(nice); // writes "Really Nice" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-04-28T07:29:15.567

做到这一点的最好方法是上课。

```
class EnumWithToString {
    private string description;
    internal EnumWithToString(string desc){
        description = desc;
    }
    public override string ToString(){
        return description;
    }
}

class HowNice : EnumWithToString {

    private HowNice(string desc) : base(desc){}

    public static readonly HowNice ReallyNice = new HowNice("Really Nice");
    public static readonly HowNice KindaNice = new HowNice("Kinda Nice");
    public static readonly HowNice NotVeryNice = new HowNice("Really Mean!");
} 
```

我相信这是最好的方法。

当填充在组合框中时，将显示漂亮的 ToString ，并且没有人可以创建您的类的更多实例这一事实本质上使其成为一个枚举。

ps 可能需要一些轻微的语法修复，我对 C# 不太擅长。（爪哇人）

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-04-28T07:37:53.470

我认为如果不简单地绑定到不同的类型，你就无法做到这一点——至少，不方便。通常，即使您无法控制`ToString()`，您也可以使用 a`TypeConverter`来进行自定义格式 - 但 IIRC 的`System.ComponentModel`东西并不尊重枚举的这一点。

您可以绑定到一个`string[]`描述，或者一个本质上类似于键/值对的东西？（描述/价值） - 类似于：

```
class EnumWrapper<T> where T : struct
{
    private readonly T value;
    public T Value { get { return value; } }
    public EnumWrapper(T value) { this.value = value; }
    public string Description { get { return GetDescription<T>(value); } }
    public override string ToString() { return Description; }

    public static EnumWrapper<T>[] GetValues()
    {
        T[] vals = (T[])Enum.GetValues(typeof(T));
        return Array.ConvertAll(vals, v => new EnumWrapper<T>(v));
    }
} 
```

然后绑定到`EnumWrapper<HowNice>.GetValues()`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-28T07:29:55.487

无法覆盖 C# 中枚举的 ToString()。但是，您可以使用扩展方法；

```
public static string ToString(this HowNice self, int neverUsed)
{
    switch (self)
    {
        case HowNice.ReallyNice:
            return "Rilly, rilly nice";
            break;
    ... 
```

当然，您必须显式调用该方法，即；

```
HowNice.ReallyNice.ToString(0) 
```

这不是一个很好的解决方案，有一个 switch 语句和所有 - 但它应该可以工作，并且希望对许多重写没有影响......

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-28T07:30:08.730

鉴于您不想为每个枚举创建一个类，我建议创建一个枚举值/显示文本的字典并改为绑定它。

请注意，这依赖于原始帖子中的 GetDescription 方法方法。

```
public static IDictionary<T, string> GetDescriptions<T>()
    where T : struct
{
    IDictionary<T, string> values = new Dictionary<T, string>();

    Type type = enumerationValue.GetType();
    if (!type.IsEnum)
    {
        throw new ArgumentException("T must be of Enum type", "enumerationValue");
    }

    //Tries to find a DescriptionAttribute for a potential friendly name
    //for the enum
    foreach (T value in Enum.GetValues(typeof(T)))
    {
        string text = value.GetDescription();

        values.Add(value, text);
    }

    return values;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-06-10T07:34:46.587

跟进@scraimer 的回答，这里是枚举到字符串类型转换器的一个版本，它也支持标志：

```
 /// <summary>
/// A drop-in converter that returns the strings from 
/// <see cref="System.ComponentModel.DescriptionAttribute"/>
/// of items in an enumaration when they are converted to a string,
/// like in ToString().
/// </summary>
public class EnumToStringUsingDescription : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return (sourceType.Equals(typeof(Enum)));
    }

    public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
    {
        return (destinationType.Equals(typeof(String)));
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        return base.ConvertFrom(context, culture, value);
    }

    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType.Equals(typeof(String)))
        {
            string name = value.ToString();
            Type effectiveType = value.GetType();          

            if (name != null)
            {
                FieldInfo fi = effectiveType.GetField(name);
                if (fi != null)
                {
                    object[] attrs =
                    fi.GetCustomAttributes(typeof(DescriptionAttribute), false);
                    return (attrs.Length > 0) ? ((DescriptionAttribute)attrs[0]).Description : name;
                }

            }
        }

        return base.ConvertTo(context, culture, value, destinationType);
    }

    /// <summary>
    /// Coverts an Enums to string by it's description. falls back to ToString.
    /// </summary>
    /// <param name="value">The value.</param>
    /// <returns></returns>
    public string EnumToString(Enum value)
    {
        //getting the actual values
        List<Enum> values = EnumToStringUsingDescription.GetFlaggedValues(value);
        //values.ToString();
        //Will hold results for each value
        List<string> results = new List<string>();
        //getting the representing strings
        foreach (Enum currValue in values)
        {
            string currresult = this.ConvertTo(null, null, currValue, typeof(String)).ToString();;
            results.Add(currresult);
        }

        return String.Join("\n",results);

    }

    /// <summary>
    /// All of the values of enumeration that are represented by specified value.
    /// If it is not a flag, the value will be the only value retured
    /// </summary>
    /// <param name="value">The value.</param>
    /// <returns></returns>
    private static List<Enum> GetFlaggedValues(Enum value)
    {
        //checking if this string is a flaged Enum
        Type enumType = value.GetType();
        object[] attributes = enumType.GetCustomAttributes(true);
        bool hasFlags = false;
        foreach (object currAttibute in attributes)
        {
            if (enumType.GetCustomAttributes(true)[0] is System.FlagsAttribute)
            {
                hasFlags = true;
                break;
            }
        }
        //If it is a flag, add all fllaged values
        List<Enum> values = new List<Enum>();
        if (hasFlags)
        {
            Array allValues = Enum.GetValues(enumType);
            foreach (Enum currValue in allValues)
            {
                if (value.HasFlag(currValue))
                {
                    values.Add(currValue);
                }
            }

        }
        else//if not just add current value
        {
            values.Add(value);
        }
        return values;
    }

} 
```

以及使用它的扩展方法：

```
 /// <summary>
    /// Converts an Enum to string by it's description. falls back to ToString
    /// </summary>
    /// <param name="enumVal">The enum val.</param>
    /// <returns></returns>
    public static string ToStringByDescription(this Enum enumVal)
    {
        EnumToStringUsingDescription inter = new EnumToStringUsingDescription();
        string str = inter.EnumToString(enumVal);
        return str;
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-28T07:31:56.900

创建一个包含所需内容的集合（例如包含`Value`包含`HowNice`枚举值的`Description`属性和包含`GetDescription<HowNice>(Value)`组合并将数据绑定到该集合的属性的简单对象。

有点像这样：

```
Combo.DataSource = new EnumeratedValueCollection<HowNice>();
Combo.ValueMember = "Value";
Combo.DisplayMember = "Description"; 
```

当你有一个这样的集合类时：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Collections.ObjectModel;

namespace Whatever.Tickles.Your.Fancy
{
    public class EnumeratedValueCollection<T> : ReadOnlyCollection<EnumeratedValue<T>>
    {
        public EnumeratedValueCollection()
            : base(ListConstructor()) { }
        public EnumeratedValueCollection(Func<T, bool> selection)
            : base(ListConstructor(selection)) { }
        public EnumeratedValueCollection(Func<T, string> format)
            : base(ListConstructor(format)) { }
        public EnumeratedValueCollection(Func<T, bool> selection, Func<T, string> format)
            : base(ListConstructor(selection, format)) { }
        internal EnumeratedValueCollection(IList<EnumeratedValue<T>> data)
            : base(data) { }

        internal static List<EnumeratedValue<T>> ListConstructor()
        {
            return ListConstructor(null, null);
        }

        internal static List<EnumeratedValue<T>> ListConstructor(Func<T, string> format)
        {
            return ListConstructor(null, format);
        }

        internal static List<EnumeratedValue<T>> ListConstructor(Func<T, bool> selection)
        {
            return ListConstructor(selection, null);
        }

        internal static List<EnumeratedValue<T>> ListConstructor(Func<T, bool> selection, Func<T, string> format)
        {
            if (null == selection) selection = (x => true);
            if (null == format) format = (x => GetDescription<T>(x));
            var result = new List<EnumeratedValue<T>>();
            foreach (T value in System.Enum.GetValues(typeof(T)))
            {
                if (selection(value))
                {
                    string description = format(value);
                    result.Add(new EnumeratedValue<T>(value, description));
                }
            }
            return result;
        }

        public bool Contains(T value)
        {
            return (Items.FirstOrDefault(item => item.Value.Equals(value)) != null);
        }

        public EnumeratedValue<T> this[T value]
        {
            get
            {
                return Items.First(item => item.Value.Equals(value));
            }
        }

        public string Describe(T value)
        {
            return this[value].Description;
        }
    }

    [System.Diagnostics.DebuggerDisplay("{Value} ({Description})")]
    public class EnumeratedValue<T>
    {
        private T value;
        private string description;
        internal EnumeratedValue(T value, string description) {
            this.value = value;
            this.description = description;
        }
        public T Value { get { return this.value; } }
        public string Description { get { return this.description; } }
    }

} 
```

如您所见，此集合可以使用 lambda 轻松自定义，以选择枚举器的子集和/或实现自定义格式，`string`而不是使用`GetDescription<T>(x)`您提到的函数。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-28T07:53:15.977

我会编写一个用于任何类型的泛型类。我过去用过这样的东西：

```
public class ComboBoxItem<T>
{
    /// The text to display.
    private string text = "";
    /// The associated tag.
    private T tag = default(T);

    public string Text
    {
        get
        {
            return text;
        }
    }

    public T Tag
    {
        get
        {
            return tag;
        }
    }

    public override string ToString()
    {
        return text;
    }

    // Add various constructors here to fit your needs
} 
```

最重要的是，您可以添加一个静态“工厂方法”来创建一个给定枚举类型的组合框项目列表（与您在那里的 GetDescriptions 方法几乎相同）。这将使您不必为每个枚举类型实现一个实体，并且还为“GetDescriptions”辅助方法提供了一个很好/合乎逻辑的位置（我个人将其称为 FromEnum(T obj) ...

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-28T08:59:59.577

您可以使用 PostSharp 来定位 Enum.ToString 并添加您想要的其他代码。这不需要任何代码更改。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-06-25T14:27:55.270

您需要将枚举转换为 ReadonlyCollection 并将集合绑定到组合框（或任何启用键值对的控件）

首先，您需要一个类来包含列表中的项目。由于您只需要 int/string 对，因此我建议您使用接口和基类组合，以便您可以在任何您想要的对象中实现功能：

```
public interface IValueDescritionItem
{
    int Value { get; set;}
    string Description { get; set;}
}

public class MyItem : IValueDescritionItem
{
    HowNice _howNice;
    string _description;

    public MyItem()
    {

    }

    public MyItem(HowNice howNice, string howNice_descr)
    {
        _howNice = howNice;
        _description = howNice_descr;
    }

    public HowNice Niceness { get { return _howNice; } }
    public String NicenessDescription { get { return _description; } }

    #region IValueDescritionItem Members

    int IValueDescritionItem.Value
    {
        get { return (int)_howNice; }
        set { _howNice = (HowNice)value; }
    }

    string IValueDescritionItem.Description
    {
        get { return _description; }
        set { _description = value; }
    }

    #endregion
} 
```

这是接口和实现它的示例类。请注意，类的 Key 是 Enum 的强类型，并且 IValueDescritionItem 属性是显式实现的（因此该类可以具有任何属性，您可以选择那些实现键/值对。

现在 EnumToReadOnlyCollection 类：

```
public class EnumToReadOnlyCollection<T,TEnum> : ReadOnlyCollection<T> where T: IValueDescritionItem,new() where TEnum : struct
{
    Type _type;

    public EnumToReadOnlyCollection() : base(new List<T>())
    {
        _type = typeof(TEnum);
        if (_type.IsEnum)
        {
            FieldInfo[] fields = _type.GetFields();

            foreach (FieldInfo enum_item in fields)
            {
                if (!enum_item.IsSpecialName)
                {
                    T item = new T();
                    item.Value = (int)enum_item.GetValue(null);
                    item.Description = ((ItemDescription)enum_item.GetCustomAttributes(false)[0]).Description;
                    //above line should be replaced with proper code that gets the description attribute
                    Items.Add(item);
                }
            }
        }
        else
            throw new Exception("Only enum types are supported.");
    }

    public T this[TEnum key]
    {
        get 
        {
            return Items[Convert.ToInt32(key)];
        }
    }

} 
```

因此，您的代码中只需要：

```
private EnumToReadOnlyCollection<MyItem, HowNice> enumcol;
enumcol = new EnumToReadOnlyCollection<MyItem, HowNice>();
comboBox1.ValueMember = "Niceness";
comboBox1.DisplayMember = "NicenessDescription";
comboBox1.DataSource = enumcol; 
```

请记住，您的集合是使用 MyItem 键入的，因此如果您绑定到适当的属性，组合框值应该返回一个枚举值。

我添加了 T this[Enum t] 属性以使集合比简单的组合消耗品更有用，例如 textBox1.Text = enumcol[HowNice.ReallyNice].NicenessDescription;

您当然可以选择将 MyItem 转换为仅用于此 puprose 的 Key/Value 类，从而有效地跳过 EnumToReadnlyCollection 的类型参数中的 MyItem ，但随后您将被迫使用 int 作为键（意味着获得 combobox1.SelectedValue将返回 int 而不是 enum 类型）。如果您创建一个 KeyValueItem 类来替换 MyItem 等等，您可以解决这个问题......

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2011-06-25T20:43:40.760

很抱歉让这个旧线程出现。

我将采用以下方式来本地化枚举，因为它可以通过此示例中的下拉列表文本字段向用户显示有意义的本地化值，而不仅仅是描述。

首先，我创建了一个名为 OwToStringByCulture 的简单方法来从全局资源文件中获取本地化字符串，在本示例中，它是 App_GlobalResources 文件夹中的 BiBongNet.resx。在这个资源文件中，确保所有字符串都与枚举的值相同（ReallyNice、SortOfNice、NotNice）。在这个方法中，我传入参数：resourceClassName，它通常是资源文件的名称。

接下来，我创建一个静态方法来填充下拉列表，其中枚举作为其数据源，称为 OwFillDataWithEnum。以后可以将此方法与任何枚举一起使用。

然后在页面中有一个名为 DropDownList1 的下拉列表，我在 Page_Load 中设置了以下仅一行简单的代码来将枚举填充到下拉列表中。

```
 BiBongNet.OwFillDataWithEnum<HowNice>(DropDownList1, "BiBongNet"); 
```

就是这样。我认为使用这些简单的方法，您可以使用任何枚举填充任何列表控件，不仅可以使用描述性值，还可以显示本地化文本。您可以将所有这些方法作为扩展方法以便更好地使用。

希望这有帮助。分享以获得分享！

以下是方法：

```
public class BiBongNet
{

        enum HowNice
        {
            ReallyNice,
            SortOfNice,
            NotNice
        }

        /// <summary>
        /// This method is for filling a listcontrol,
        /// such as dropdownlist, listbox... 
        /// with an enum as the datasource.
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="ctrl"></param>
        /// <param name="resourceClassName"></param>
        public static void OwFillDataWithEnum<T>(ListControl ctrl, string resourceClassName)
        {
            var owType = typeof(T);
            var values = Enum.GetValues(owType);
            for (var i = 0; i < values.Length; i++)
            {
                //Localize this for displaying listcontrol's text field.
                var text = OwToStringByCulture(resourceClassName, Enum.Parse(owType, values.GetValue(i).ToString()).ToString());
                //This is for listcontrol's value field
                var key = (Enum.Parse(owType, values.GetValue(i).ToString()));
                //add values of enum to listcontrol.
                ctrl.Items.Add(new ListItem(text, key.ToString()));
            }
        }

        /// <summary>
        /// Get localized strings.
        /// </summary>
        /// <param name="resourceClassName"></param>
        /// <param name="resourceKey"></param>
        /// <returns></returns>
        public static string OwToStringByCulture(string resourceClassName, string resourceKey)
        {
                return (string)HttpContext.GetGlobalResourceObject(resourceClassName, resourceKey);
        }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-12-12T14:19:54.023

```
Enum HowNice {
  [Description("Really Nice")]
  ReallyNice,
  [Description("Kinda Nice")]
  SortOfNice,
  [Description("Not Nice At All")]
  NotNice
} 
```

要解决此问题，您应该使用扩展方法和字符串数组，如下所示：

```
Enum HowNice {
  ReallyNice  = 0,
  SortOfNice  = 1,
  NotNice     = 2
}

internal static class HowNiceIsThis
{
 const String[] strings = { "Really Nice", "Kinda Nice", "Not Nice At All" }

 public static String DecodeToString(this HowNice howNice)
 {
   return strings[(int)howNice];
 }
} 
```

简单的代码和快速的解码。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-04-25T01:02:37.153

我尝试了这种方法，它对我有用。

我为枚举创建了一个包装类并重载了隐式运算符，以便我可以将它分配给枚举变量（在我的情况下，我必须将一个对象绑定到一个`ComboBox`值）。

您可以使用反射以您想要的方式格式化枚举值，在我的情况下，我`DisplayAttribute`从枚举值中检索出来（如果存在）。

希望这可以帮助。

```
public sealed class EnumItem<T>
{
    T value;

    public override string ToString()
    {
        return Display;
    }

    public string Display { get; private set; }
    public T Value { get; set; }

    public EnumItem(T val)
    {
        value = val;
        Type en = val.GetType();
        MemberInfo res = en.GetMember(val.ToString())?.FirstOrDefault();
        DisplayAttribute display = res.GetCustomAttribute<DisplayAttribute>();
        Display = display != null ? String.Format(display.Name, val) : val.ToString();
    }

    public static implicit operator T(EnumItem<T> val)
    {
        return val.Value;
    }

    public static implicit operator EnumItem<T>(T val)
    {
        return new EnumItem<T>(val);
    }
} 
```

**编辑：**

以防万一，我使用以下函数来获取`enum`我用于的`DataSource`值`ComboBox`

```
public static class Utils
{
    public static IEnumerable<EnumItem<T>> GetEnumValues<T>()
    {
        List<EnumItem<T>> result = new List<EnumItem<T>>();
        foreach (T item in Enum.GetValues(typeof(T)))
        {
            result.Add(item);
        }
        return result;
    }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-01-27T12:08:34.163

一旦你有了`GetDescription`方法（它需要是全局静态的），你可以通过扩展方法使用它：

```
public static string ToString(this HowNice self)
{
    return GetDescription<HowNice>(self);
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-06-29T21:13:56.807

```
Enum HowNice {   
[StringValue("Really Nice")]   
ReallyNice,   
[StringValue("Kinda Nice")]   
SortOfNice,   
[StringValue("Not Nice At All")]   
NotNice 
}

Status = ReallyNice.GetDescription() 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2011-01-27T10:14:15.543

您可以将枚举定义为

```
Enum HowNice {   
[StringValue("Really Nice")]   
ReallyNice,   
[StringValue("Kinda Nice")]   
SortOfNice,   
[StringValue("Not Nice At All")]   
NotNice 
} 
```

然后使用`HowNice.GetStringValue()`.

# .net - 程序集重定向未按预期工作

> ID：796608
> 
> 赞同：2
> 
> 时间：2009-04-28T07:21:48.190
> 
> 标签：.net, app-config, strongname

我正在尝试在我的项目程序集中引入强签名。

我的项目输出保存在 XML 中，并且提到了一个类型（在签名之前）：

```
typestr="XYZ.PQR, MyWidget, Version=1.0.2406.20198, Culture=neutral, PublicKeyToken=null" 
```

在所有程序集都使用带有令牌的公钥 622edca63ee1770c 进行签名之后。我在 app.config 文件中引入了 <assemblyBinding> 块，如下所示：

```
 <assemblyBinding>
  <dependentAssembly>
    <assemblyIdentity name="MyWidget" publicKeyToken="622edca63ee1770c" culture="neutral"/>
    <bindingRedirect oldVersion="1.0.2406.20198" newVersion="0.1.27.10695"/>
  </dependentAssembly>
 </assemblyBinding> 
```

我仍然收到错误：

> 无法加载文件或程序集“EPGWidget，版本=1.0.2406.20198，Culture=neutral，PublicKeyToken=622edca63ee1770c”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

当一个代码片段像：

```
Type type = Type.GetType(typestr); 
```

以下被执行。但是，它适用于：

```
typestr="XYZ.PQR, MyWidget" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:56:53.360

如果是序列化为xml，为什么里面有类型信息？xml 的目标之一是从序列化中*删除*类型元数据。这是一个数组还是什么？可能有更好的方法来序列化这些数据。

AFAIK，程序集重定向不适用于基于字符串的反射；如果限定名称不匹配，则不匹配。最后一个示例没有指定签名详细信息，这允许它接受任何内容。

就个人而言，我会尝试解决在 xml 中包含类型信息的问题——这可能是一场更容易、更合适的战斗。

# visual-studio - vs2003中如何使用vs2005库

> ID：796610
> 
> 赞同：0
> 
> 时间：2009-04-28T07:22:36.953
> 
> 标签：visual-studio

有没有办法在VS2003中使用VS2005库。谁能帮我如何在vs2003中使用vs2005库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:25:20.660

不，您不能在 .NET 1.x 应用程序中使用 .NET 2.0 程序集（我假设我们在这里讨论的是 .NET），除非您将它们重新编译为针对 1.x 版本的框架。

# asp.net - 多租户架构中的 URL 验证

> ID：796614
> 
> 赞同：1
> 
> 时间：2009-04-28T07:23:18.013
> 
> 标签：asp.net, url, verification, multi-tenant

在多租户架构 Web 应用程序中验证 URL 的最佳方法是什么，以确保来自一个组织的用户不会通过更改查询字符串参数来访问另一个组织的数据。我不想对每个页面加载进行验证。该应用程序是在 ASP.net 3.5 上构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T08:06:36.583

您真的不应该根据 url 控制对数据的访问。您应该通过用户身份验证来限制数据访问，不幸的是，这意味着您必须在每次页面加载时进行验证，或者更具体地说，在每次数据访问时进行验证。

# mysql - 无法对 MySQL 用户设置权限

> ID：796619
> 
> 赞同：0
> 
> 时间：2009-04-28T07:25:34.543
> 
> 标签：mysql, permissions, mysql-error-1044

我正在尝试使用以下命令为 MySQL 用户设置权限。

GRANT ALL ON joomla.* to user@localhost;

我尝试了很多版本，但它们都返回：错误 1044（42000）：用户''@'localhost' 拒绝访问数据库'joomla2'

这似乎表明用户名“user”没有通过？我已经尝试了上面命令的许多版本，还有什么我需要注意的。

PS：我的名字实际上不是“用户”，以防有人提到它是保留字或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T07:33:55.913

尝试查看权限表。例如：

```
> use mysql;
> select * from db; 
```

这可能会提示您出了什么问题。

您也可以通过指定 user@'127.0.0.1' 并使用 -H 127.0.0.1 标志（如果您使用 mysql cmd line 客户端）连接来尝试通过 tcp 而不是 unix 套接字进行连接。

您是否尝试过使用 GRANT 语句的 'IDENTIFIED BY "mypwd"' 部分指定密码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:35:05.817

这对我有用：

```
GRANT ALL PRIVILEGES ON joomla.* TO 'username'@'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION; 
```

我认为问题在于您没有提供密码。

另外，您是否使用可以授予其他用户权限的用户？您是以 root 用户身份连接还是以普通用户身份连接？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T07:35:58.950

根据[MySQL 参考手册](http://dev.mysql.com/doc/refman/5.1/en/grant.html)，我会说您错过了上述声明中的 ' 。

你试过了吗：

```
GRANT ALL ON joomla.* to 'user'@'localhost'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T07:43:00.103

当您尝试运行此命令时，您是否以 user@localhost 身份登录到 MySQL？

如果是这样，您将无法在以 root 用户或其他能够分配权限的用户身份登录时为自己分配权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T07:51:02.160

感谢大家。它没有回答问题，但这次我要重新安装 mysql 并给它一个正确的 root 用户名和密码。上次我把这些留空了。长期的解决方案，但它会解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T08:35:30.693

之后有没有重启服务器？如果没有，您需要发出`FLUSH PRIVILEGES`

# linq - 动态 LINQ to Entity Count()

> ID：796620
> 
> 赞同：0
> 
> 时间：2009-04-28T07:26:09.957
> 
> 标签：linq, dynamic, count

我正在尝试以更通用的方式编写以下简短的代码行。

我想要实现的是对自特定日期以来已更改或创建的记录进行简单计数。

```
 public int GetChanges(DateTime LastActivityDate)
    {
        KHS.Innopas.Web.Library.DataModels.Documentation.DocumentationEntities ctx = 
            new KHS.Innopas.Web.Library.DataModels.Documentation.DocumentationEntities();

        return ctx.Images.Count(row => row.CreatedAt > LastActivityDate);
    } 
```

我想将上面的示例更改为更通用的函数，例如

```
 public int GetChanges(MetaTable table, string columnName, DateTime LastActivityDate)
    {
        return table.Count(row => row.columnName > LastActivityDate);
    } 
```

到目前为止我尝试的是

```
 public int GetChanges(MetaTable table, string columnName, DateTime lastActivityDate)
    {
                    // query = {Table(LanguageText)}
        var query = table.GetQuery();

        MetaColumn dateColumn;
        table.TryGetColumn(columnName,out dateColumn);

        if (dateColumn == null)
            return new string[] {};

        var entityParam = Expression.Parameter(table.EntityType, "row");

        var property = Expression.Property(entityParam, dateColumn.Name);

        var columnLambda = Expression.Lambda(property, entityParam);

        var constant = Expression.Constant(lastActivityDate);

        var GreaterThanCall = Expression.GreaterThan(columnLambda.Body, constant);

        var whereLambda = Expression.Lambda(GreaterThanCall, entityParam);

        var whereCall = Expression.Call(
           typeof(Queryable),
           "Count",
           new Type[] { query.ElementType },
           query.Expression,
           whereLambda);

        var result = query.Provider.CreateQuery(whereCall);

        return result ;
    } 
```

现在的问题是，'whereCall' 不正确并引发（德语）错误。任何想法，它必须看起来如何？

谢谢你的帮助。塞巴斯蒂安

更多信息：这是德语错误：

> Abfrageausdrücke für 'LINQ to Entities' können nur aus Instanzen konstruiert werden, die die die die IQueryable-Schnittstelle implementieren。参数名称：表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T17:46:48.197

您也许可以使用动态 linq 查询库来实现这一点。它允许您将子句作为字符串传递。示例：（ [来源：][[scottgu.com](http://www.scottgu.com/blogposts/dynquery/step2.png)][）][![替代文字](https://i.stack.imgur.com/cueo7.png)](https://i.stack.imgur.com/cueo7.png)

更多信息可以在[Scott Gu 的博客上找到](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# c# - C# 测试持续的互联网连接

> ID：796625
> 
> 赞同：1
> 
> 时间：2009-04-28T07:27:26.350
> 
> 标签：c#, networking

C# 2008

我开发了一个软件电话应用程序。

但是，我必须测试持续的互联网连接。

我正在考虑有一个在另一个线程中运行的函数，该线程不断地 ping 一个 IP 地址。但是，我可以使用什么 IP 地址来确定我的应用程序是否仍连接到 Internet。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T07:29:45.797

请参阅此 SO 问题和答案：[C# - 如何检查网络连接](https://stackoverflow.com/questions/520347/c-how-do-i-check-for-a-network-connection/520352#520352)

如果您受限于 .NET Compact Framework，请查看免费的[OpenNETCF 库](http://www.opennetcf.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:44:51.270

你只是想检查是否有网络连接，或者网络是否真的连接到互联网。

在第一种情况下，请按照[“如何检查网络连接问题”中的说明进行操作](https://stackoverflow.com/questions/520347/c-how-do-i-check-for-a-network-connection/520352#520352)。这会让您知道电缆是否从 PC 背面拔出，但不会告诉您调制解调器或电话线是否出现故障（例如）

第二种情况比较复杂，据我所知，除了不断地轮询某个IP地址外，没有办法检查这一点。在简单的情况下，您可以让定时器在一个单独的线程中每 30 秒对某个网站执行一次 ping 操作，并在它确定 Internet 关闭时引发事件。请注意，ICMP ping 并非 100% 可靠，即使您的连接正常，它们偶尔也会被丢弃。

如果您真的想变得复杂，您可以创建一个引发这些事件的 Windows 服务，然后多个应用程序可以连接并使用这些信息，但这有点超出了我对 Windows 编程的了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T09:09:49.927

我认为远程登录到 www.google.com 的 80 端口将是您最好的选择。

如果连接打开，一切都很好。

不过，不确定这在 cf 中实现起来有多容易。

# c# - NetPeerTcpBinding 在 Mono 上可用吗？

> ID：796627
> 
> 赞同：0
> 
> 时间：2009-04-28T07:27:34.743
> 
> 标签：c#, wcf, mono

我想知道 Mono 的 WCF 实现是否已经实现了 NetPeerTcpBinding。

有人在用吗？一些例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T07:46:31.030

[你自己看。](http://anonsvn.mono-project.com/viewvc/trunk/mcs/class/System.ServiceModel/System.ServiceModel/NetPeerTcpBinding.cs?view=markup) 它似乎还没有接近完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T08:31:33.980

[NetPeerTcpBinding 是](http://mono-project.com/WCF)Mono 上 WCF 里程碑 5 的一部分，目前 Mono 处于里程碑 1。

# c# - 如何防止 C# 中表单的 keydown 事件多次触发？

> ID：796654
> 
> 赞同：3
> 
> 时间：2009-04-28T07:36:27.733
> 
> 标签：c#, winforms, events, keyboard

根据[官方文档](http://msdn.microsoft.com/en-us/library/ms171536.aspx)，Windows 窗体控件上的 KeyDown 事件仅发生一次，但很容易证明只要按住某个键，该事件就会持续触发：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        label1.Text = string.Format("{0}", globalCounter++);
    } 
```

您如何使用该事件以使其仅触发一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:49:34.143

由于 KeyDown 的多次出现是由于 Windows 的 keyrepeat 设置，我认为您应该以某种方式跟踪该键的 KeyUp 事件，以了解该键已被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T07:58:09.163

使用 KeyUp。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T08:14:57.623

我通常是一个 VB 人，但这似乎对我来说是演示代码，使用表单本身作为输入源：

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private bool _keyHeld;
        public Form1()
        {
            InitializeComponent();
            this.KeyUp += new KeyEventHandler(Form1_KeyUp);
            this.KeyDown += new KeyEventHandler(Form1_KeyDown);
            this._keyHeld = false;
        }

        void Form1_KeyUp(object sender, KeyEventArgs e)
        {
            this._keyHeld = false;
        }

        void Form1_KeyDown(object sender, KeyEventArgs e)
        {
            if (!this._keyHeld)
            {
                this._keyHeld = true;
                if (this.BackColor == Control.DefaultBackColor)
                {
                    this.BackColor = Color.Red;
                }
                else
                {
                    this.BackColor = Control.DefaultBackColor;
                }
            }
            else
            {
                e.Handled = true;
            }
        }
    }   
} 
```

如果您一次按住多个键，我认为逻辑会有点粗略，但这似乎只会从最后按下的键触发事件，所以我认为这不会成为问题。

我在 VB 的 TextBox 中对此进行了测试，效果很好。不确定我应该在 c# 中遵循的继承约定，所以我把它作为这个答案的直接形式。

再次为任何严重的代码格式错误道歉，这不是我常用的语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:49:09.043

您可以覆盖 ProcessCmdKey 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T07:51:14.123

你可以用柜台！

# design-patterns - 您是否允许 Web 层直接访问 DAL？

> ID：796656
> 
> 赞同：17
> 
> 时间：2009-04-28T07:36:31.443
> 
> 标签：design-patterns, data-access-layer, bll

我对感知到的“最佳实践”感兴趣，这里有一点现实。

在 Web 应用程序中，您是允许您的 Web 层直接访问 DAL，还是应该先通过 BLL？

我说的是没有真正涉及“业务逻辑”的场景——例如一个简单的查询：“获取所有姓氏为 'Atwood' 的客户”。有任何逻辑的场景绝对会通过 BLL，所以我们称之为[moo](http://www.youtube.com/watch?v=fLwYpSCrlHU)。

虽然您*可以*将此方法封装在 BLL 对象中，但如果签名通常与 DLL 对象的签名完全相同，并且代码可能像将查询委托给 DLL 的单行代码一样简单，这似乎有点毫无意义.

如果你选择前者——使用 BLL 对象——你怎么称呼这些对象？（假设他们只是在 DLL 中提供一个查询层）。帮手？查询提供者？

请思想。

问候

马蒂

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-04-28T09:16:30.377

我不同意这里的大多数帖子。

我在 Web 层中调用我的数据层。如果 WEB/UI 层之间没有任何内容，那么创建一个“以防万一”层是没有意义的。是预优化。这是一种浪费。我不记得业务层“拯救了我”的时间。它所做的只是创造了更多的工作、重复和更高的维护。我花了数年时间订阅业务层 --> 数据层在层之间传递实体。我总是觉得通过什么都不做的方法创建传递是肮脏的。

[在被Eric Evans](https://rads.stackoverflow.com/amzn/click/com/0321125215)介绍给领域驱动设计之后，我做了有意义的事情。如果 UI 和数据层之间没有任何内容，那么我在 UI 中调用数据层。

为了允许将来进行更改，我将所有数据层类包装在接口中。在 UI 中，我引用接口并使用依赖注入来管理实现。做出这些改变之后，就像呼吸到了一股新鲜空气。如果我需要在数据层和 UI 之间注入一些东西，我会创建一个服务。

我做的另一件事是减少项目的数量。在我有一个数据层、业务逻辑、业务实体和某种类型的 UI 项目的项目之前——真是太痛苦了。

我有两个项目：核心项目（实体、业务逻辑和数据层）和 UI 项目（Web、Web 服务等...）

有关更多信息，我建议查看这些人：

*   [充满激情地发展](http://blog.jpboodhoo.com/)
*   [杰弗里·巴勒莫](http://jeffreypalermo.com/)
*   [大卫·拉里比](http://codebetter.com/blogs/david_laribee/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T08:40:22.023

在我看来，您应该**始终**在 Web 层和 DAL（[数据访问层](http://en.wikipedia.org/wiki/Data_access_layer)）之间使用 BLL（[业务逻辑层](http://en.wikipedia.org/wiki/Business_layer)）。

我很欣赏对于一些更“简单”的查询，BLL 将密切模仿 DAL（例如获取所有国家/地区，获取所有产品类型等），但老实说，即使在您的示例中：

> （获取所有姓氏为“Atwood”的客户）

这里表达了“业务逻辑” - 如果没有别的，希望按姓氏过滤数据记录！

通过从项目一开始就实施 BLL，在需要时插入验证或附加“逻辑”变得非常容易（如果您的项目是商业应用程序，那么几乎*肯定会*最终出现这种需求，如果它不是'在项目开始时不在那里）。添加其他逻辑，例如：

> 获取所有今年花费超过 10000 美元的客户
> 
> 或者
> 
> 不允许姓“阿特伍德”的顾客购买超过 1000 美元的商品

当涉及到真正的 BLL 时，它变得非常容易，而不是试图将这个逻辑推入 Web 层。

请记住，对于上述类型的查询，我们几乎可以肯定地谈论多个实体和数据库表，它们必须通过特定定义的关系连接在一起才能实现此功能。试图通过直接操作 DAL 来实现这一点变得很麻烦，因为您将处理多个实体和类。此处的 BLL 将大大简化您的 Web 层代码，因为 BLL 将把这些实体关系[封装在一个大大简化的接口后面。](http://en.wikipedia.org/wiki/Encapsulation_(computer_science))

当需要更改用户界面时，这种“[关注点分离”变得越来越重要。](http://en.wikipedia.org/wiki/Separation_of_concerns)

现在至少有两个不同的场合，我曾在具有网站用户界面的商业 Web 应用程序上工作，并且最终被要求（由于客户寻求在其软件产品中进行更大程度的集成而产生的业务需求）生成[Web 服务](http://en.wikipedia.org/wiki/Web_service)界面提供与网站完全相同的功能。

如果我在我的 Web 层中嵌入了任何业务逻辑，我将不得不在实现我的 Web 服务时复制并重新编写该逻辑。事实上，我确保所有业务逻辑都封装在 BLL 类中，这意味着我只需要设计一系列 Web 服务接口方法调用，并将它们插入到 BLL 类上的方法调用中（我实际上使用了[外观设计模式](http://en.wikipedia.org/wiki/Facade_pattern)用于简化 Web 服务 API）。

总之，我想不出任何理由不在**我**的 DAL 和我的 Web 层之间包含 BLL 层。

最简单的情况是，当 BLL 密切“模仿” DAL 时，是的，确实存在代码和功能的重复，但是，虽然需要更多的输入，但这也使得它相对容易实现。

当涉及更多时（例如从一开始就存在重要的业务逻辑时），关注点分离有助于减少重复（[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则），同时显着简化未来和持续的维护。

当然，这假设您正在“手动”完成所有这些工作。如果您愿意，您可以通过使用有很多[ORM来显着简化 DAL/BLL/UI 层！](http://en.wikipedia.org/wiki/Object-relational_mapping)（即[LINQ-to-SQL/Entities](http://en.wikipedia.org/wiki/Language_Integrated_Query)、[SubSonic](http://en.wikipedia.org/wiki/Subsonic_(software))、[NHibernate](http://en.wikipedia.org/wiki/Nhibernate)等）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T07:40:31.107

您需要区分 BLL 对象（这些到底是什么？域对象吗？）和服务。您的域对象应该与您的数据访问层无关。就 Web 层而言，它可以像对待`IRepository`它可以自由使用的任何其他服务一样对待您的存储库（想想）。

所以底线是：是的，Web 层可以直接使用 DAL，前提是它被属性封装并表示为标准的服务层服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T07:39:19.847

即使在 BLL 中的一行对 DLL 进行类似调用时，它也允许您在该层中**添加业务逻辑**，而无需影响任何其他层。现在可能看起来不太可能，但是在您之后必须支持该应用程序的人会感谢您在发生更改时使用这样的模式。

至于命名，我有我的核心对象，比如 NameChange，然后我将有一个 BLL 对象，它是一个接受名称更改对象的人，然后我将有一个称为 Person 的 DAL/Entity 对象。业务人员对象位于 BLL 命名空间中，而 DAL/实体人员对象位于 DB 命名空间中（如果我最初构建它，我会选择 DAL）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T07:45:38.957

我们将此层称为控制器类 [层]，它封装了来自 Web 层的 DAL。控制器层可能有也可能没有任何业务逻辑，它确实有助于将 DAL 与表示层分离并保持它们独立 [在某种程度上]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T07:55:21.417

我们倾向于使用[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)进行访问，尽管我们使用它的项目规模很大，但我认为在较小的项目中它可能会被证明是矫枉过正。

本质上：

UI -> BusFacade -> BusinessLogic -> DalFacade -> DataAccessLayer

外观为 UI 提供了一种漂亮/干净的方法，并迫使您标准化命名约定，因为单个入口点有许多方法。

```
BusFacade.GetCmsSiteMap()
BusFacade.GetProductGroup() 
```

等等等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-28T15:20:53.967

虽然可以直接从表示层转到 DAL，但您正在跳过通常需要身份验证的 BLL...

# linq-to-sql - 多重结果

> ID：796657
> 
> 赞同：0
> 
> 时间：2009-04-28T07:36:40.557
> 
> 标签：linq-to-sql

我有多个结果集，它们从客户表（单条记录）和客户地址（多条记录）返回数据。当我第一次检索数据时，它会带来正确的数据，但是当我更新它并保存更改时（我确定数据已在数据库中更新），它会为客户带来旧版本，为客户地址带来新数据。我不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T08:02:32.927

有了这些有限的信息，以及我对 linqtsql 的有限知识，我只能提供一些线索：

*   客户表/记录集可能具有某种高并发设置/锁定，以防止您的更新被传播。
*   这样它不一定不起作用，只是被延迟了。
*   将您的更新放入事务并确保它已提交。然后重新选择您的数据。这样它要么工作，要么你应该得到一些错误。

# latex - 在链接后显示 URL？

> ID：796658
> 
> 赞同：3
> 
> 时间：2009-04-28T07:36:49.383
> 
> 标签：latex, hyperref

我将 LaTeX 与 hyperref 包一起使用，我有以下内容：

```
超参考是
\href{http://www.tug.org/applications/hyperref/}{详细记录}。
它允许...

```

在 PDF 输出中，它显示：

```
hyperref 有详细记录。它允许...

```

该链接有效，但未显示 URL，这是打印文件时的一个大问题。[我在文档中](http://www.tug.org/applications/hyperref/ftp/doc/manual.html)找不到更改它的选项。

我使用的一些 hyperref 文件不是手动生成的，而是由[dblatex](http://dblatex.sourceforge.net/)生成的，因此更改每个文件`\href{...}`可能不是一种选择。

对于 hyperref 方面，请参阅 Will Robertson 的解决方案。对于 dblatex，我编写了一个自定义脚本，通过复制 XSL 模板`<ulink>`和类似元素，然后生成不同的 LaTeX 代码。[自从具有必要选项](http://dblatex.sourceforge.net/html/manual/ulink.show.html)的 dblatex 0.2.10 发布以来，**不再**需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T15:17:04.473

我建议在生成“可打印”版本的输出时在序言中添加一个开关。

例如，（未经测试）

```
\newif\ifprint
\打印真
\ifprint
  \let\oldhref\href
  \renewcommand\href[2]{%
    \oldhref{#1}{#2}%
    \脚注{\url{#1}}%
  }
\fi

```

当然，您仍然需要生成文档的两个版本，一个用于打印，一个用于屏幕。但我不确定你是否期待有什么不同`:)`

# c# - ASP.NET 解决方案迁移到 3.5 .. 但仅适用于 *一些 * CS 项目！

> ID：796663
> 
> 赞同：0
> 
> 时间：2009-04-28T07:38:11.130
> 
> 标签：c#, asp.net, version-control, migration, asp.net-3.5

我需要将 .net 解决方案从 1.1 迁移到 3.5。该解决方案目前包含 2 个 CS 项目 1) 一个类库和 2) 一个 Web 服务应用程序。

**问题**：我需要迁移解决方案文件和 Web 服务应用程序项目，但是我无法迁移类库，因为它与另一个不会迁移的解决方案共享！

由于 Web 服务应用程序引用了类库，我想我需要向类库**bin**目录添加一个**DLL 引用。**我不太喜欢这个主意。

 **bin 目录当前不是版本控制的一部分。这是否意味着我也需要将库 dll 添加到版本控制中。再说一次，我不喜欢这个主意。

我的方法正确吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T07:51:17.510

您应该在您的解决方案中创建一个 Dependencies（它不必被称为这个）文件夹，其中包含您需要的任何预编译的 dll。这应该包含在您的源代码控制中，并且您的 Web 服务项目应该引用 Dependencies 文件夹中已编译的类库 dll。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T07:52:38.927

听起来你在正确的轨道上。我会为您的类库命名和版本化（如果还没有的话）。对于版本，我将版本中的第 4 位设置为修订/变更集编号。这样我可以在需要时检索源。

在我的项目中，我有一个名为“ThirdParty”的文件夹，用于存储我在解决方案中引用的程序集。此文件夹位于解决方案结构之外，因此不会影响任何项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T07:56:48.197

**选项 1** - 开发必须与 Web 服务分开支持 .NET 1.1 的项目。在源代码管理下创建一个文件夹，用于存储 Web 服务所依赖的 dll。更新项目时，构建它并将其保存在依赖文件夹中。**请记住，将 .NET 1.1 程序集与 .NET 3.5 一起使用并不理想。**

**选项 2** - 将必须支持 .NET 1.1 的项目包含在需要它的两个解决方案中。使用 Web 服务构建它时，将项目属性中的目标框架设置为 3.5，在必须支持 1.1 的情况下使用它时，将目标设置为 1.1。

为什么不能将 1.1 应用程序升级到 2.0 或 3.5？好像您可以在选项 1 中将项目构建为 2.0，那么就不会有瓶颈。

# java - 如何让 Android SDK 1.5 版在我的 G1 手机上运行？

> ID：796665
> 
> 赞同：2
> 
> 时间：2009-04-28T07:38:31.237
> 
> 标签：java, android

好吧，这样说吧。我已经在模拟器中测试了一个 Android 应用程序。现在我想在真正的 G1 手机上尝试一下。但我无法在我的 G1 上运行 1.5 SDK。任何人都可以帮我解决这个问题，拜托。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T11:09:48.327

纸杯蛋糕可用于 G1 开发者手机。

# actionscript-3 - 更改 MovieClip Actionscript 3 的填充颜色

> ID：796671
> 
> 赞同：8
> 
> 时间：2009-04-28T07:41:57.780
> 
> 标签：actionscript-3, colors, instance, fill

我想问一下，如何仅更改舞台上实例的填充颜色 - 我可以通过使用 ColorTransform 对象来完成，但它会更改整个实例的颜色，而不仅仅是填充。我只想更改填充颜色，而不是描边颜色。有谁能够帮助我？

这是我的代码：

```
function paint(){
    var myColorTransform:ColorTransform = new ColorTransform();

    myColorTransform.color = someColorNumber;

    coloredObject.transform.colorTransform = myColorTransform;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T07:59:37.177

一旦您绘制了形状，就无法完成此操作，因为动作脚本无法确定什么是描边，什么是填充。

你有几个选择。

将您的填充和描边分成单独的影片剪辑，并将颜色变换设置为仅应用于填充。

或者

如果它是一个简单的形状，请使用 Graphics 对象绘制它，您可以在其中指定填充颜色和描边颜色。

可能 hood 是，我更喜欢的方法，将是第一个选项，因为形状可能很复杂，并且将其留在 fla 中为能够更改它的设计师而不是开发人员提供了更大的控制权。不过，这需要更多的工作并且稍微复杂一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-10-01T11:56:15.157

我知道这对游戏来说有点晚了，但我遇到了同样的问题并以不同的方式解决了它。它可能没有任何帮助，因为它只能在有限的情况下工作*，但我从我的形状开始填充白色并抚摸黑色。这样，您可以使用 RGB 乘法器应用颜色变换，将白色淡化为您想要的颜色，保持黑色边框完好无损。因此，要使您的对象变为红色（带有黑色边框），请使用：

```
function paint() {
    shape.transform.colorTransform = new ColorTransform(1, 0, 0);
} 
```

或者对于 Stack Overflow 橙色（仍然带有黑色边框）：

```
function paint() {
    shape.transform.colorTransform = new ColorTransform(0.996, 0.478, 0.082);
} 
```

*仅当您只想要带有黑色边框的单一颜色时才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-07-02T18:50:19.233

如果您的目标是 FP10，并且您想要一个简单的过滤器，就像您尝试使用 ColorTransform 一样，您可以编写一个 PixelBlender Kernel 来获取 2 个颜色参数（一个用于源，一个用于目标），将像素与源颜色匹配，并将它们换成目的地；像这样的东西：

```
//I release this under the MIT License. Use it to your heart's content.

<languageVersion : 1.0;>

kernel ReplaceColor
<   namespace : "PIPEEP";
    vendor : "PiPeep";
    version : 1;
    description : "Replace color";
>
{
    input image4 src;
    output pixel4 dst;

    parameter pixel4 sColor
    < 
        minValue:pixel4(0.); 
        maxValue:pixel4(255.);
    >; 
    parameter pixel4 dColor;
    parameter float tolerance;

    void
    evaluatePixel()
    {
        dst = sampleNearest(src,outCoord());
        pixel4 sColorAdjusted = abs((sColor/pixel4(255.)) - dst);
        if(sColorAdjusted.r < tolerance && sColorAdjusted.g < tolerance && sColorAdjusted.b < tolerance && sColorAdjusted.a < tolerance) {
            dst = dColor;
        }
    }
} 
```

***记得他为什么讨厌 PixelBlender IDE***

编辑：请记住，这与抗锯齿效果不佳，但如果您使用的是 stage.quality = "low"，则没关系。

要在 as3 中添加使用它，试试这个（从[http://scriptplayground.com/tutorials/as/Flash-CS4-and-Pixel-Bender-Overview/](http://scriptplayground.com/tutorials/as/Flash-CS4-and-Pixel-Bender-Overview/)偷来的，所以你需要更改几行代码）：

> 代码的第一部分是定义一些稍后使用的变量。唯一可能看起来很新的两个是 Shader 和 ShaderFilter。这些是 Flash Player 10 的新功能，是负责处理 Pixel Bender 过滤器数据的类。
> 
> ```
> var loader:URLLoader;
> var shader:Shader;
> var shaderFilter:ShaderFilter;
> var image:MovieClip;
> var timer:Timer;
> var timerInt:uint = 40; 
> ```
> 
> 代码中的下一步是将图像加载到您在前面的步骤中添加的阶段。
> 
> ```
> image = new SampleImage(); image.y =
> 20; image.x = 25;
> 
> addChild(image); 
> ```
> 
> 要创建的前两个方法是用于加载 pbj 文件和初始化过滤器创建过程
> 
> ```
> function startEffect() {  loader = new
> URLLoader();  loader.dataFormat =
> URLLoaderDataFormat.BINARY;
>   loader.addEventListener(Event.COMPLETE,
> loadComplete);    loader.load(new
> URLRequest("sample.pbj")); }
> 
> function loadComplete(e:Event):void {
>   shader = new Shader(loader.data);
>   initFilter(); } 
> ```
> 
> 成功加载 pbj 文件后调用next 函数`initFilter()`，因此可以创建过滤器。此滤镜设置图像的 r、g、b 颜色值，这实际上破坏了图像的细节。例如，“ `shader.data.red.value`”引用了开始编写的像素弯曲代码，如果您注意到代码有一个“参数 float red”，它是一个用于设置红色级别的浮点变量。在这种情况下，该值设置为 20。对其他 2 种颜色重复此过程，然后将其传递给图像实例。
> 
> 此函数的最后一部分设置将运行以应用此过滤器的计时器，直到图像恢复其正常外观
> 
> ```
> function initFilter() {
>   shader.data.red.value = [20];
>   shader.data.green.value = [20];
>   shader.data.blue.value = [20];
>   shaderFilter = new
> ShaderFilter(shader);     image.filters =
> [shaderFilter];
> 
>   timer = new Timer(timerInt, 0);
>   timer.addEventListener(TimerEvent.TIMER,
> timerHit);    timer.start(); } 
> ```
> 
> 最后一个函数重复应用过滤器的过程，但首先获取当前过滤器值并从每次传递的值中减去 0.1。这个过程会慢慢地从图像中移除过滤器强度，直到它完全消失。`timerHit()` 从函数中创建的计时器调用此函数`initFilter()` 。
> 
> ```
> function timerHit(e:TimerEvent):void
> {
>   if(shader.data.red.value == 1)
>   {
>       timer.stop();
>       return;
>   }
> 
>   var r:uint = shader.data.red.value   - 0.1;
>   var g:uint = shader.data.green.value - 0.1;
>   var b:uint = shader.data.blue.value  - 0.1;
> 
>   shader.data.red.value =     [r];
>   shader.data.green.value =   [g];
>   shader.data.blue.value =    [b];
>   shaderFilter = new ShaderFilter(shader);
>   image.filters = [shaderFilter]; 
> } 
> ```
> 
> 代码的最后一步是启动进程，在这个应用程序中是通过调用`startEffect()` 函数来完成的，这就是我们要做的
> 
> `startEffect();`

对不起让你的眼睛流血了！我想这是我最长的答案了！

# browser - 有人试用过 Google 的 3D 图形 O3D 插件吗？

> ID：796672
> 
> 赞同：2
> 
> 时间：2009-04-28T07:41:58.467
> 
> 标签：browser, 3d, o3d

我刚刚发现了 Google 的[O3D](http://code.google.com/apis/o3d/)项目，用于在浏览器中使用 html 和 javascript 渲染 3D 图形。看起来不错，尽管就我所见，图形已经过时了大约 5 年。有人试过吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T08:53:47.233

它似乎针对的是程序员而不是设计师

3d 环境应该易于描述和构建，但我在上面找到的文档似乎更面向程序员

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-29T20:12:00.917

我花了一些时间阅读文档并使用它。作为测试，我使用他们的画布对象制作了康威的生命游戏：

[生活](http://o3d-life.googlecode.com/svn/trunk/life_colors.html)

这实际上完全在 javascript 中运行，并且表现得非常好；比我在 Unity3D 中进行的等效测试要快得多。将其移入像素着色器将是性能的下一步，然后它会真正飞起来。

这是一个在图形技术前沿的严肃项目。他们对架构以及它如何与浏览器集成做出了非常好的决定。

但是，它是一个低级的图形 api - 与 DirectX 或 OpenGL 的级别相似，它使用现代的“可编程管道”而不是传统/遗留的“固定功能管道”。通俗地说，这意味着它不会在旧计算机上运行，​​但它可以在性能和功能方面充分利用较新的图形硬件。这也意味着开发人员需要了解现代图形编程技术，如着色器、渲染图等。

它支持图像的 web 格式（如 jpg 和 png），但也支持游戏行业风格的 DDS 纹理，这些纹理更适合加载到视频卡 RAM 中。它可以加载基于 xml 的 COLLADA 资产，还具有类似二进制的 JSON 接口，用于优化加载已处理资产。

要让 O3D 真正起飞，它需要构建在它之上的更高级别的 JavaScript API。理想情况下，游戏引擎之类的东西包括物理和音频，具有一致的光照模型和优化的资产格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T07:50:33.703

我做到了。它看起来不错，做了很好的镜面反射。弄清楚导航有点困难，但我也没有太多时间投入其中。

# .net - WAS 通过 net.tcp 绑定托管 WCF 服务

> ID：796682
> 
> 赞同：4
> 
> 时间：2009-04-28T07:44:29.007
> 
> 标签：.net, wcf, wcf-binding, was, net.tcp

我正在尝试在一组计算机上发布一个计算服务，这些计算机将由应用程序服务器使用。计算服务器是有状态的，需要能够执行异步回调，所以我想通过 TCP 使用每个会话设置。

服务应用程序是使用 VS2008 中的 WCF 服务应用程序项目类型构建的。

碰巧计算服务机器正在运行 Vista，所以根据我读过的文档，我应该能够使用 WAS 托管。我正在尝试遵循 Microsoft 关于该主题的说明：

[安装和配置 WCF 组件](http://msdn.microsoft.com/en-us/library/ms731053.aspx)

[在 WAS 中托管 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733109.aspx)

但是我很早就遇到了麻烦。我应该将 .svc 文件放在我的应用程序的虚拟目录中。但是由于我没有使用 IIS 托管，如何创建虚拟目录？上面的文档对此并不清楚。

此外，当尝试运行允许 net.tcp 访问我的应用程序的命令时：

```
%windir%\system32\inetsrv\appcmd.exe set app "Default Web Site/<WCF Application>" /enabledProtocols:net.tcp 
```

我不知道用什么来代替`<WCF Application>`。同样，似乎缺少一个以“类似 IIS 托管”的方式发布服务的先前步骤。

我创建了一个尝试使用该服务的测试应用程序。当我单击“添加服务引用”时，它会发现我的服务，但无法使用 net.tcp 连接到它。

这里有没有人成功地托管和使用了一项服务？你对我有什么指示吗？

更新：我现在尝试使用 IIS 管理器将 net.tcp 绑定添加到网站（右键单击 -> 编辑绑定...），但“添加...”对话框中唯一可用的协议是 http 和 https。该列表中没有 net.tcp。是的，我已经安装了非 http 激活组件……很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T10:41:59.517

由于**WAS**是**IIS 体系结构**的一部分，因此您需要在 IIS**网站**（例如“默认网站”）中创建一个**虚拟目录，该目录指向您托管的 WCF 服务的物理位置。**然后您必须在该虚拟目录上创建一个**应用程序**，就像您为 ASP.NET 网站或 ASMX Web 服务所做的那样。 您可以使用**IIS 7 的管理控制台**轻松做到这一点。

 ******您可以在[此处](http://www.devx.com/codemag/Article/33655/0/page/6)阅读有关 WAS 如何在 IIS7 中工作的**详细信息**。 有关 WAS 托管的更多**分步**指南，请查看[本文](http://www.devx.com/VistaSpecialReport/Article/33831)。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-04T12:40:02.527

您需要在 IIS 中将 net.tcp 绑定添加到应用程序的绑定中。

右键单击 IIS 中的虚拟目录/应用程序 -> 管理应用程序 -> 高级设置。

在启用的协议部分只需添加 net.tcp 和瞧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T08:31:30.397

我有同样的问题，但让它工作。看到这个问题。让我知道指南中是否有任何您需要帮助的内容。

[在 Web 应用程序中设置 WCF TCP 服务](https://stackoverflow.com/questions/16628382/setting-up-wcf-tcp-service-in-a-web-application/16745340)

# mysql - 如何重置 MYSQL 中的停用词？

> ID：796688
> 
> 赞同：7
> 
> 时间：2009-04-28T07:46:29.237
> 
> 标签：mysql, database, search, full-text-search, stop-words

我想重置 mysql 中的停用词列表以进行全文搜索。我已经在我的系统中安装了 WAMP 服务器，它有 phpmyadmin 来访问 mysql。但我不知道如何在 phpmyadmin 中重置停用词。谁能告诉我该怎么做。

我也[http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_ft_stopword_file](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_ft_stopword_file)阅读了这个链接，但不知道如何使用这个？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-28T10:36:16.270

我假设您正在使用[WampServer](http://www.wampserver.com/en/)。

单击托盘图标，选择`MySQL`，然后单击`my.ini`。配置文件将在记事本中打开。转到文件末尾并添加此行（在端口行之后）：

```
 ft_stopword_file='' 
```

禁用停用词。如果要使用自定义停用词文件，请将该行替换为：

```
ft_stopword_file='path/to/stopword_file.txt' 
```

（当然是设置停用词文件的路径）。

设置该行后，保存配置文件（文件 -> 保存）。然后单击托盘图标，选择`MySQL`，`Service`然后单击`Restart Service`。

要确保您的配置正确完成`phpMyAdmin`，请在浏览器中打开，单击`Variables`顶部的选项卡，然后查找`ft stopword file`并查看为其设置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:26:14.930

MySQL 附带的停用词列表（至少对于 MyISAM）可以在 MySQL 的源代码中找到`myisam/ft_static.c`。

另请注意，这些只是“英语”停用词。据推测，其他语言的停用词在其他地方定义......

`ft_stopword_file`您可以使用注释中指出 的指令覆盖或禁用默认停用词列表。[完整的文档在这里](https://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-05T07:25:46.973

您可以在此处找到要使用的停用词列表：[https](https://dev.mysql.com/doc/refman/5.6/en/fulltext-stopwords.html) ://dev.mysql.com/doc/refman/5.6/en/fulltext-stopwords.html 。我将此列表保存到一个文件中，并从 MySQL 配置文件（例如`ft_stopword_file='path/to/stopword_file.txt'`）中引用它。

我从停用词列表中删除了“it”和“us”，因为它们在我的问题域中表示“Information Technology”和“United States”。

不幸的是，每次更改停用词列表时，都必须重新启动 MYSQL 并重建全文索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-22T08:19:24.190

我有同样的问题，我认为你不需要重新编译任何东西，我读过你可以使用 mysql 控制台 SET ft_stopword_file='path/to/stopword_file.txt'，这不应该需要重新启动你的服务器。但我不认为它会持续到下次重启，所以我想我会尝试配置文件，看看它是否有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-13T13:13:10.757

我有同样的问题。停用词文件必须包含在 my.ini 文件的 [mysqld] 部分下。

[mysqld] ft_stopword_file = 'D:/stop.txt' 然后

修复表表名对我有用。

# .net - 如何集成/混合托管和非托管代码

> ID：796692
> 
> 赞同：3
> 
> 时间：2009-04-28T07:49:07.280
> 
> 标签：.net, sql-server-2005, c++-cli, interop, native

已经有使用本机代码开发的项目。
现在在一个小模块中使用 C++-CLI 中的 SQLSMO，我使用了托管代码。

如何将托管代码与本机代码集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:59:09.177

Stack Overflow 中已经有几个类似的线程。关键字是 P/Invoke 和 COM Interop，具体取决于您的本地组件的类型。以下是一些链接：

*   [P/调用](http://en.wikipedia.org/wiki/Platform_Invocation_Services)
*   [在 C# 中使用 P/Invoke 调用 Win32 DLL](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)
*   [COM 互操作简介](http://msdn.microsoft.com/en-us/library/kew41ycz(VS.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T07:53:03.480

这是一个很笼统的问题。这方面有各种各样的资源，包括[MSDN](http://msdn.microsoft.com/en-us/library/sd10k43k(vs.71).aspx)。回顾文献，然后回来提出更具体的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-28T08:01:26.750

如果您只需要从非托管应用程序中引用您的托管类，并且不介意在 C++/CLI 下重新编译它，您可以使用[`gcroot`](http://msdn.microsoft.com/en-us/library/481fa11f(VS.80).aspx).

# mysql - 在一对多的情况下选择行

> ID：796695
> 
> 赞同：1
> 
> 时间：2009-04-28T07:49:51.913
> 
> 标签：mysql, select

我认为我陷入了这种特殊情况：

这是我的表：

item_table：
ID | 项目
1：A
2：B
3：C

attr_table:
attr | item_id
1 : 1
1 : 2
2 : 1
2 : 3
3 : 2
3 : 3
我想知道在技术上是否可以检索与 attr = 1 和 3 关联的任何项目。答案应该是“B”只要。同样，如果我请求与 attr = 1 和 2 关联的项目，我应该只得到“A”。

问题是 attr_table 可能有很多行，我希望只进行一个查询。

这个问题听起来很简单，我为无法回答而感到非常沮丧。

我希望有更聪明的人可以帮助我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T07:59:25.773

该示例是为 SQLServer 编写的，但查询也应该在 mysql 中工作。

关键是 HAVING COUNT 语句等于必须匹配的属性数量。如果属性应为 (1, 2, 5)，则必须将计数更改为 3。

```
DECLARE @item_table TABLE (ID INTEGER PRIMARY KEY, Item CHAR(1))
DECLARE @attr_table TABLE (Attr INTEGER, Item_ID INTEGER)

INSERT INTO @item_table VALUES (1, 'A')
INSERT INTO @item_table VALUES (2, 'B')
INSERT INTO @item_table VALUES (3, 'C')

INSERT INTO @attr_table VALUES (1, 1)
INSERT INTO @attr_table VALUES (1, 2)
INSERT INTO @attr_table VALUES (2, 1)
INSERT INTO @attr_table VALUES (2, 3)
INSERT INTO @attr_table VALUES (3, 2)
INSERT INTO @attr_table VALUES (3, 3)

SELECT Item
FROM @item_table i
     INNER JOIN @attr_table a ON a.Item_ID = i.ID
WHERE a.Attr IN (1, 3)
GROUP BY Item
HAVING COUNT(a.Attr) = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T08:07:18.407

```
 SELECT * From attr_table a, item_table i
   where a.item_id = i.id
   and a.attr = 1
   and a.item_id  in (select item_id from attr_table where  attr = 3); 
```

作业是否为项目 B 返回一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T08:08:45.267

```
select * from item_table a 
where exists ( select * from attr_table b 
               where b.item_id = a.id and b.attr = 1)
and exists ( select * from attr_table c 
             where c.item_id = a.id and c.attr = 3); 
```

请注意，此查询准确地说明了您的规范所说的内容：获取所有行，`item_table`其中至少存在一行`attr_table`具有该行的 id 和指定的第一个 attr *，并且*至少存在一行`attr_table`具有该行的 id 和指定的第二个属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T07:59:55.553

```
select distinct item_table.item from item_table, attr_table
where item_table.id = attr_table.item_id
and attr_table.attr = 1 and attr_table.attr = 3; 
```

基本上，它会进行您期望的匹配并以大量行结束 - 但随后 distinct 关键字起作用，因此您将获得最小的唯一行集作为最终结果。

（顺便说一句，我希望它更有效，但不要费心组成匹配行的完整列表）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-17T05:21:19.873

这可能为时已晚，但我建议使用几个这样的连接：

```
select i.item, b.item_id, c.item_id 
from item_table i 
join attr_table b on i.id=b.item_id and b.item_id=1
join attr_table c on i.id=c.item_id and c.item_id=2 
```

我就是这样做的。

# asp.net-mvc - 我如何缓存 FileContentResult 以提高性能？

> ID：796704
> 
> 赞同：7
> 
> 时间：2009-04-28T07:52:15.573
> 
> 标签：asp.net-mvc, internet-explorer, firefox, caching

目前我有以下操作从我的数据库返回文件（图像、PDF 等）：

```
 //
    // GET: /FileManager/GetFile/ID
    [OutputCache(Duration = 600, VaryByParam = "ID")]
    public ActionResult GetFile(int ID)
    {
        FileService svc = new FileService(new SqlFileRepository(base.ConnectionString));

        KsisOnline.Data.File result = svc.GetFileByID(ID);

        return File(result.Data, result.MimeType, result.UploadFileName);
    } 
```

我正在使用该`OutputCache`属性，但我不知道我是否正确使用它或如何为此目的优化它。

就代码而言，我似乎在 Firefox(3) 中获得了缓存功能，但在 IE(7) 中没有。出于某种原因，IE 每次都从数据库请求图像（这显然是致命的），我不知道如何修复它。当然 IE 不能正确支持标准，但也许我仍然没有遵循一些首选的缓存约定。我真的很感激这方面的一些帮助，这样我就可以得到最少的数据库命中和跨浏览器的缓存支持。

**编辑：** 要查看上面的代码或使用浏览器/工具自己分析它，请参阅[此链接](http://ksis.sch.sa/Announcements/56)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-05T15:39:31.863

尝试使用 ServerAndClient 位置：

[OutputCache(Duration=600, VaryByParam="ID", Location=OutputCacheLocation.ServerAndClient)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T08:27:17.970

您需要使用[Fiddler](http://www.fiddler2.com/fiddler2/)查看 IE 发送的 HTTP 标头以及您的应用程序与 Firefox 的不同之处。您所要做的就是让浏览器发送`If-Modified-Since`标头（可能还有一个`ETag`）标头，并且您的应用程序应该以 HTTP 302 状态响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-03T15:14:59.387

```
ControllerContext.HttpContext.Response.ClearHeaders() 
```

# c# - 具有多种类型的列的Excel读取问题

> ID：796715
> 
> 赞同：1
> 
> 时间：2009-04-28T07:55:08.513
> 
> 标签：c#

我正在使用 C# 在 .Net Framework 1.1 中读取 Excel 文件。当我有包含数字的列以及类似这样的文本时，我在读取 Excel 文件时遇到问题

1003 1004 1005 测试_1 测试_2

它没有给我任何错误，但我在前三行得到空值。这是我用来读取 excel 文件的代码。

```
string strcon   = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" +
                                                     path +
                                                     ";Extended Properties=Excel 8.0;";

            System.Data.OleDb.OleDbConnection objConn  = new System.Data.OleDb.OleDbConnection(strcon);

            try
            {
                    objConn.Open ();                                
                    System.Data.OleDb.OleDbDataAdapter objadp = new System.Data.OleDb.OleDbDataAdapter("Select * from [" + sheetName + "$" + "]",objConn);  
                    DataSet ds = new DataSet ();                            
                    objadp.Fill (ds);
                    return ds;                              
            }
            catch(Exception ex)
            {
                    throw ex;
            }
            finally
            {
                    objConn.Close();
                    objConn.Dispose();                              
            } 
```

谁能告诉我可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T10:19:46.793

我的机器上没有安装 .NET 1.1，但能够重现安装了 .NET 2.0 的问题。我稍微修改了连接字符串，现在能够读取文本值。

```
 string strcon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" +
                                             @"C:\Documents and Settings\johnsond\Desktop\Book1.xls" +
                                             @";Extended Properties=" +  Convert.ToChar(34).ToString() + @"Excel 8.0;Imex=1;HDR=Yes;"
                                             + Convert.ToChar(34).ToString(); 
```

引用微软论坛的问题似乎是由于以下原因：

> 您遇到的问题很常见，因为 Excel 不是真正的数据库，并且列没有固定的数据类型。Jet OLEDB 并不是专门为与 Excel 一起工作而设计的，并且有这些限制。

我知道不是很有说服力:-)此外，如果您想将此类数据写入excel，它会变得更加复杂。进一步阅读：**[MSDN 论坛链接](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/9ec840d0-d132-4837-8cee-d4b89334401c/)**

或者，您可以使用**“Excel.Application Object”**来操作之前在 SO 上讨论过的工作表。

如果您有兴趣，请检查： **[Read Excel using Excel.Application](https://stackoverflow.com/questions/629639/how-to-search-a-value-in-an-excel-from-net-application/629768#629768)**

干杯!

# c# - C# 精简框架 - 带有 XmlSerializer.Serialize 的 OutOfMemoryException

> ID：796719
> 
> 赞同：2
> 
> 时间：2009-04-28T07:56:49.040
> 
> 标签：c#, serialization, compact-framework, stringwriter

我正在尝试序列化集合中的大量对象（20,000）对象。我正在使用以下代码执行此操作：

```
XmlSerializer xs = new XmlSerializer(deserialized.GetType());
StringWriter sw;
using (sw = new StringWriter())
{
   xs.Serialize(sw, deserialized);   // OutOfMemoryException here
}

string packet = sw.ToString();
return packet; 
```

有没有更好的方法来做到这一点，还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T08:01:06.330

看起来它*应该可以*工作，但 CF 确实有不可预测的限制。

xml 是必需的吗？我不记得用 20k 记录尝试过，但另一种选择可能是*尝试*使用不同的序列化程序 - 例如，[protobuf-net](http://code.google.com/p/protobuf-net/)在 CF2 上工作。我不能保证它会起作用，但它可能值得一试。

（特别是，我目前正在重构代码以尝试解决 CF 中的一些额外的[“泛型”限制](http://marcgravell.blogspot.com/2009/03/compact-framework-woes-revisted.html)——但除非你有一个非常复杂的对象模型，否则这不会影响你）。

* * *

显示用法的示例；请注意，此示例也适用于`XmlSerializer`，但 protobuf-net 仅使用 20% 的空间（如果您认为字符在内存中每个字节是两个字节，则使用 10% 的空间）：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;
using ProtoBuf;

[Serializable, ProtoContract]
public class Department
{
    [ProtoMember(1)]
    public string Name { get; set; }
    [ProtoMember(2)]
    public List<Person> People { get; set; }
}

[Serializable, ProtoContract]
public class Person
{
    [ProtoMember(1)]
    public int Id { get; set; }
    [ProtoMember(2)]
    public string Name { get; set; }
    [ProtoMember(3)]
    public DateTime DateOfBirth { get; set; }
}

static class Program
{
    [MTAThread]
    static void Main()
    {
        Department dept = new Department { Name = "foo"};
        dept.People = new List<Person>();
        Random rand = new Random(123456);
        for (int i = 0; i < 20000; i++)
        {
            Person person = new Person();
            person.Id = rand.Next(50000);
            person.DateOfBirth = DateTime.Today.AddDays(-rand.Next(2000));
            person.Name = "fixed name";
            dept.People.Add(person);
        }

        byte[] raw;
        using (MemoryStream ms = new MemoryStream())
        {
            Serializer.Serialize(ms, dept);
            raw = ms.ToArray(); // 473,399 bytes
        }

        XmlSerializer ser = new XmlSerializer(typeof(Department));
        StringWriter sw = new StringWriter();
        ser.Serialize(sw, dept);
        string s = sw.ToString(); // 2,115,693 characters
    }
} 
```

如果您需要更多帮助，请告诉我——我可以整天谈论这个主题；-p 请注意，它只能从标准的 xml 属性（`[XmlElement(Order=1)]`）中工作——为了清楚起见，我使用了更具体的`[ProtoMember(1)]`等。这也允许对序列化进行细粒度控制（zigzag vs twoscompliment，分组 vs 长度前缀等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T09:11:27.597

您对应用程序的内存消耗有任何衡量标准吗？我假设您在 WM 上运行，这意味着每个进程的地址空间限制为 32MB。对于大型 XML，您可能实际上已经耗尽了内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T07:07:40.423

也许您可以考虑保留单个对象（而不是将集合保留为一个大块）。如果是这样，您可能想使用我在 codeplex 上创建的 NFileStorage 项目；nfilestorage.codeplex.com（这个不是专门为CF制作的，所以不能判断它是否与那个兼容）......

祝你好运，格特-扬

# asp.net - 创建三个使用不同资源的相同网站？

> ID：796722
> 
> 赞同：0
> 
> 时间：2009-04-28T07:57:35.810
> 
> 标签：asp.net, visual-studio-2008

我正在启动一个包含三个相同站点的新 Web 项目。唯一不同的是每个站点都有自己的资源（具有 ASP.NET 成员资格的数据库、XML 和`web.config)`.

我想知道是否可以设置一个网站项目，为不同的子文件夹使用不同的资源。此外，如何在项目解决方案中设置虚拟文件夹？

这些网站如下所示：[www.mysite.com/es/](http://www.mysite.com/es/)、[www.mysite.com/uk/](http://www.mysite.com/uk/)和[www.mysite.com/au/](http://www.mysite.com/au/)。

我不想为每个站点创建不同的项目，因为我希望能够为所有站点使用相同的类和控件。

我最大的问题是如何设置虚拟文件夹并使每个文件夹访问自己的成员数据库。

关于如何设置的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T15:33:58.177

听起来这更像是一个部署问题而不是开发问题。

在您的实时 Web 服务器上，在网站的根目录中创建三个文件夹。使它们中的每一个成为自己的应用程序（使用 IIS 管理器）。您应该能够通过谷歌搜索您特定版本的 IIS 的说明。

将项目的副本安装到每个文件夹中。对每个数据库的每个 web.config 文件进行适当的更改，...

现在，您将拥有三个使用相同代码库运行的独立 Web 应用程序。

# sql - Sql Server 中的夏令时

> ID：796723
> 
> 赞同：2
> 
> 时间：2009-04-28T07:57:47.213
> 
> 标签：sql, sql-server, time

我们正在使用一个以 C/Unix 格式存储日期的旧应用程序。C 时间基本上是自 1970 年 1 月 1 日以来的秒数。日期以整数形式存储在 SQL Server 数据库中。我正在为使用这些日期的报告编写视图。

到目前为止，我正在从 UNIX 时间转换为本机日期时间：

```
DateAdd(s,3600+unix_time,'1/1/1970') 
```

3600 是从 UTC 转换为我们当地的 GMT+1 时区。这在冬天是准确的，但在夏天，由于夏令时，它会休息一小时。

SQL Server 中是否有内置方法可以将 UTC 转换为本地时间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-01-09T23:04:33.250

实际上，上面的答案忽略了夏令时。如果当前不是夏令时，则夏令时内的日期将关闭一小时，反之亦然。此外，许多不同国家/地区的立法者喜欢让夏令时变得比需要的更复杂。

本质上，尽可能在 SQL Server 中避免这种情况。客户端日期处理库通常可以做到这一点。如果您需要使用数据库中已有的时间戳，请考虑将它们转换为日期时间列或将日期值转换为客户端代码中的时间戳，然后再将它们用作查询参数。

这只是那些一直以错误方式发明的轮子之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T11:57:47.310

我在使用 UTC/GMT1 时遇到了类似的问题，虽然您希望在数据库中避免这种情况的许多陈述都是非常真实和有价值的建议，但并非总是可以完全避免这种情况。

但是，当您使用 GMT1 时，您很幸运，因为夏令时实际上是基于算法的。（不像我理解的美国夏令时是由立法机构决定的。）

由此，我能够制作将 UTC 日期时间输入转换为 GMT1 日期时间的存储过程。希望这可以帮助 ;）

```
CREATE PROCEDURE spUTCGMT1 @date AS DATETIME
AS 
BEGIN
     DECLARE @year AS INT = DATEPART( YYYY,@date)
     DECLARE @f AS INT = (FlOOR( (5 * @year) / 4) - FLOOR( @year / 100)+ FLOOR( @year / 400)) % 7

     IF(@date BETWEEN 
        DATEADD( DD,- ((@f + 5) % 7),(CAST(@year AS CHAR(4)) + '-03-31')) AND 
        DATEADD( DD,- ((@f + 2) % 7),(CAST(@year AS CHAR(4)) + '-10-31')))
     SELECT 
            DATEADD( HH,2,@date)
     ELSE
     SELECT 
            DATEADD( HH,1,@date)
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T11:26:28.320

您需要使用 DateDiff(s, getutcdate(), getdate())+unix_time 而不是 3600，这将为您提供与 UTC 时间的正确偏移量。

干杯，
埃里克

# sql - 在视图中执行存储过程？

> ID：796724
> 
> 赞同：1
> 
> 时间：2009-04-28T07:57:54.327
> 
> 标签：sql, tsql, stored-procedures

是否可以在视图中执行存储过程？

IE

创建视图 [dbo].[v_ReportInvoiceClientsThisMonth] AS EXEC [dbo].[GetInvoiceClients] @startDate = '2009-03-01', @endDate = '2009-04-01'

（不起作用）

我需要这个的原因是我需要一种在 Excel 中访问 SP 的方法（以一种白痴安全的方式，即没有 VBA）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T08:02:42.880

您可以通过表值函数的视图来执行此操作。这看起来像：

```
-- === Table-Valued function ====================================
--
create function fn_foo (
       @Date datetime

) returns @ResultSet table (
        DateKey           datetime
       ,DisplayDate       varchar (20)
) as
    insert @ResultSet (
           DateKey
          ,DisplayDate
    )
    select DateKey      -- Just pretend there's something to select
          ,DisplayDate  -- behind the scenes
      from ods.Dates
     where DateKey <= @Date
    return
go

-- === View ============================================
-- 
create view vw_foo (
       DateKey
      ,DisplayDate
) as
select DateKey
      ,DisplayDate
  from fn_foo ('2009-04-31')
go 
```

有几个注意事项：

*   您可以使用函数执行的操作有一些限制。特别是存储过程代码和函数代码之间存在一些阻抗不匹配，因此您通常不能使用函数来环绕存储过程来执行此类操作。

*   第一点意味着您可能必须将存储过程重新转换为表值函数。

# javascript - html预加载器

> ID：796734
> 
> 赞同：1
> 
> 时间：2009-04-28T08:00:22.497
> 
> 标签：javascript, jquery, preloader

有没有办法用 jquery 做 html 预加载器？抱歉，我找不到。我的意思是在加载 html 时显示一个小尺寸的图像（加载图像）。

感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:29:22.253

请不要那样做；这很烦人。

在（图像）链接断开的情况下，您可能会遇到问题（等待超时）。

# dependency-injection - IoC 和动态对象

> ID：796740
> 
> 赞同：3
> 
> 时间：2009-04-28T08:02:35.953
> 
> 标签：dependency-injection, inversion-of-control

我无法弄清楚如何解析依赖于在运行时非确定性创建的对象的对象。最好的方法是什么？

想象一下像文字处理器这样的东西。对于您打开的每个文档，您可能希望创建大量依赖于文档对象的对象。

例如，您想要获取 DocumentEditor 的一个实例：

```
public class DocumentEditor {
    public DocumentEditor(IDocument document, 
                          ISpellChecker spellChecker, 
                          IWordCounter wordCounter) {
        ...
    }
} 
```

到目前为止，我已经考虑了两种方法，但似乎都不太合适：

### 使用注入的工厂

这种方法的问题在于，您最终可以为需要创建的每种类型创建一个工厂。IE

```
public interface ISpellCheckerFactory {
    ISpellChecker Create(IDocument document);
}

public interface IWordCounterFactory {
    IWordCounter Create(IDocument document);
}

public class DocumentEditorFactory {
    public DocumentEditorFactory(ISpellCheckerFactory spellCheckerFactory,
                                 IWordCounterFactory wordCounterFactory) {
        ...
    }

    public DocumentEditor Create(IDocument document) {
        ...
    }
} 
```

添加另外 50 个类，您就会发现问题...

### 使用嵌套容器

使用嵌套容器消除了创建无数工厂的需要。它实际上非常紧凑（使用 Unity 的示例）：

```
var child = container.CreateChildContainer();
child.RegisterInstance<IDocument>(theDocument);
child.Resolve<DocumentEditor>(); 
```

这种方法的缺点是容器到处泄漏。

（作为旁注，统一实现这有点棘手。参见例如：[如何在主容器中注册类型，但在子容器中解析？](https://stackoverflow.com/questions/530405/unity-how-to-register-types-in-the-main-container-but-resolve-in-a-child-conta)）

### 混合方法

应该可以通过实现创建嵌套容器并使用子容器解决依赖关系的 DocumentEditorFactory 将两者结合起来。

最好的分析瘫痪...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:29:49.553

在 autofac 中有一种称为[DelegateFactories](http://code.google.com/p/autofac/wiki/DelegateFactories)的方法。它与您的第一个选项有点相似，但是消除了大量的手动编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:33:26.427

我可以建议您尝试[AutoFac](http://code.google.com/p/autofac/)，因为它在这些跟踪问题上非常成熟。您将服务注册到 ContainerBuilder 并且您构建的容器会根据它们的范围跟踪您请求的对象。当容器被释放时，每个标记为的对象`ContainerScoped`都将被释放。因此，您可以为每个容器创建一个容器，`DocumentEditor`并在不再需要文档时处理容器。

[http://code.google.com/p/autofac/wiki/NuancesOfTracking](http://code.google.com/p/autofac/wiki/NuancesOfTracking)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-03T16:58:08.993

> *使用注入的工厂*
> 
> *这种方法的问题在于，您最终可以为需要创建的每种类型创建一个工厂。*

这是一个关于依赖注入的常见神话。 [我强烈推荐 Misko Hevery 关于 new operator 的文章](http://misko.hevery.com/2008/09/10/where-have-all-the-new-operators-gone/)。简而言之：您只需要为每个生命周期创建一个工厂，而不是为每种类型创建一个工厂。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-28T08:07:32.743

尝试[MEFy](http://www.codeplex.com/MEF)方法：您可以将所有`SpellChecker`s 和`WordCounter`s 视为所谓的扩展，它们实现 say`IDocumentEditorExtension`接口并在运行时查询（伪代码）：

```
IDocumentEditor editor = Registry.Resolve<IDocumentEditor>();
IDocumentEditorExtension[] extensions = Registry.ResolveAll<IDocumentEditorExtension>();

extensions.ForEach((e) => e.AttachTo(editor)); 
```

# java - 如何在我的 Java 应用程序中添加文件浏览器？

> ID：796743
> 
> 赞同：4
> 
> 时间：2009-04-28T08:02:57.467
> 
> 标签：java, swing, jfilechooser, file-handling

我是 Java 编程新手，正在构建一个应用程序，该应用程序将从给定文件夹位置添加、显示和删除文件。

我已经使用 JFileChooser 添加了文件并且知道如何删除这些文件。但是我被显示部分卡住了。

我想在我的应用程序中使用不同的图标显示文件和文件夹。我尝试在显示面板内添加一个JFileChooser，并禁用对话框的按钮和菜单组件，但没有成功。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-28T08:09:25.470

我更喜欢以下方式。

```
JFileChooser chooser= new JFileChooser();

int choice = choose.showOpenDialog();

if (choice != JFileChooser.APPROVE_OPTION) return;

File chosenFile = chooser.getSelectedFile();

// You can then do whatever you want with the file. 
```

调用此代码将导致`JFileChooser`在其自己的窗口中弹出一个。

我通常从 a`JButton`的`ActionListener`代码中调用它。

```
fileChooseButton.addActionListener( new ActionListener(){
    public void actionPerformed(ActionEvent e){

        // File chooser code goes here usually
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T14:32:10.963

如果您不需要 的所有灵活性`JFileChooser`，则应`java.awt.FileDialog`改为使用。您的 OS X 用户会感谢您。 `FileDialog`使用本机文件选择器窗口，同时`JFileChooser`是一个摆动组件，并且缺少键盘快捷键和其他细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T14:41:36.180

我从来没有完全复制过文件浏览器。我已使用您的平台提供的图标在列表/表格中显示文件。[这在FileSystemView](http://java.sun.com/javase/6/docs/api/javax/swing/filechooser/FileSystemView.html)的帮助下很容易做到。使用 getSystemIcon(File) 方法检索正确的图标。然后，您可以使用此图标构建文件的 JList/JTable。

# string - 用于在最新文件中搜索字符串的批处理文件

> ID：796745
> 
> 赞同：1
> 
> 时间：2009-04-28T08:04:00.990
> 
> 标签：string, batch-file, recent-documents

我有很多需要搜索某些字符串的日志文件，我想知道我是否可以制作一个批处理文件来为我自动完成这项工作？我需要做的就是在某个目录中找到最新的日志，然后在该文件中搜索字符串。

我在这个网站上找到了下面的代码，它可以很好地打开最新的日志文件，但不幸的是我对批处理编程知之甚少，无法修改代码以搜索字符串并显示该行。

```
for /f "usebackq delims=" %%i in (`dir /b /o-d`) do @call "%%i"&goto :eof 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-28T08:13:45.693

在末尾添加一个 findstr：

```
or /f "usebackq delims=" %%i in (`dir /b /o-d`) do findstr searchforthisstring %%i 
```

这是在搜索“searchforthisstring”找到的文件

```
dir /b/o-d 
```

哪些列表文件（/b = 仅命名而不是任何其他信息和 /od 反向日期顺序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-11T15:25:50.653

首先，设置你想要的文件。如果`/od`不起作用，请尝试`/o-d`...

`for /f %%i in ('dir \path\to\files\ /b /od') do set myfile=%%i`

...并注意，因为`myfile`将没有途径。

然后使用`for /f "tokens=*"`完整读取文件的每一行，并`findstr`搜索您的`STRING`...

`for /f "tokens=*" %%i in (\path\to\files\%myfile%) do (echo %%i | findstr STRING >> OUTPUTFILE)`

如果您想`OUTPUTFILE`在每次运行代码时都被覆盖，请使用单个`>`.

如果您不想要文件，但在屏幕上看到输出，只需删除`>> OUTPUTFILE`代码。

# iphone - 为什么不调用动画停止选择器？

> ID：796747
> 
> 赞同：0
> 
> 时间：2009-04-28T08:04:15.327
> 
> 标签：iphone

一旦我的动画停止，我将使用以下代码调用方法

```
[UIView beginAnimations:@"swipe" context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(transitionDidStop:finished:context:)];
[UIView setAnimationDuration:0.3f];

//My Animation

[UIView commitAnimations]; 
```

这是 transitionDidStop 方法的签名

```
- (void)transitionDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context 
```

但我注意到，即使在转换停止之后，也不会调用该方法。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:48:38.777

因为你需要

```
- (void)transitionDidStop:(NSString *)animationID finished:(BOOL)finished context:(void *)context 
```

方法

但是你有

```
- (void)transitionDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context 
```

# windows - 如何在 Windows 上添加自定义 url 处理程序。喜欢 iTunes itms://

> ID：796748
> 
> 赞同：19
> 
> 时间：2009-04-28T08:04:26.743
> 
> 标签：windows, url, shell, protocol-handler

我希望 telnet://blah 打开 putty 而不是本机 Windows telnet 客户端。

我什至不知道在 Windows 下这个“功能”被称为什么，所以我没有运气找到任何关于它的信息。

在此先感谢，扬

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-28T08:15:56.030

如果它很简单，您可以通过命令行来完成：

```
ftype telnet # view current binding
ftype telnet=\path\to\putty.exe %1 
```

否则，您将需要使用之前发布的注册表。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-28T08:21:18.403

它是一个提供自定义 URI 处理程序的注册表项。

[这是 MSDN 上的一篇文章](http://msdn.microsoft.com/en-us/library/aa767914(VS.85).aspx)，引用其中的一些内容：

```
HKEY_CLASSES_ROOT
     alert
          (Default) = "URL:Alert Protocol"
          URL Protocol = ""
          DefaultIcon
               (Default) = "alert.exe"
          shell
               open
                    command
                         (Default) = "C:\Program Files\Alert\alert.exe" "%1" 
```

你会允许这样做吗

> 警报：一些消息

而且您的应用程序显然会收到“一些消息”作为其参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T08:12:15.040

要更改 XP 上的 telnet: 协议处理程序（或任何其他*现有*处理程序）（可能适用于 Vista - 我还没有查看），请转到控制面板 > 文件夹选项 > 文件类型（选项卡）。向下滚动（不多，它在顶部附近）找到 (NONE) URL:Telnet Protocol，然后点击“高级”按钮。从这里开始，就像更改文件类型关联一样。请注意，目标应用程序需要支持将提供的 URL 作为参数传递。

不幸的是，“新建”按钮似乎不允许创建新的“URL”类型，因为它需要输入扩展名。要创建一个新条目，我以前必须从注册表中复制现有条目（即：查找、导出、在文本编辑器中编辑和重新导入）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-27T08:27:41.580

您可以使用以下脚本： [https ://gist.github.com/sbiffi/11256316](https://gist.github.com/sbiffi/11256316)

它将 telnet:// 和 ssh:// URL 关联到一个脚本，该脚本解析 URL 中的参数并启动 putty。

无需更改 putty 它还支持通过登录（和 ssh 的密码）。

# asp.net - asp.net mvc 多个值路由

> ID：796749
> 
> 赞同：1
> 
> 时间：2009-04-28T08:05:26.273
> 
> 标签：asp.net, asp.net-mvc, routing, controller

有没有办法将多个参数作为一个参数发送到控制器？

例如，如果我有路线：

{controller}/{action}/{languages}

参数语言可以是字符串数组吗？如果是，如何使用它...如何将数组发送到控制器以及如何在控制器方法中解析它？

谢谢马尔科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T08:07:47.487

可能值得您查找 Mvc.Net 模型绑定。这用于将对象（而不是原语）传递给控制器​​，只需使用公共前缀命名您发送的字段即可。

这里的例子：

[http://odetocode.com/Blogs/scott/archive/2009/04/27/12788.aspx](http://odetocode.com/Blogs/scott/archive/2009/04/27/12788.aspx)

要创建一个对象数组，您可以将字段命名为 Person[i].Surname 等，它会为您构建人员对象并将其放置在一个数组中，假设 Controller 操作设置为接受一个。

# solr - Solr 获取日期范围

> ID：796753
> 
> 赞同：28
> 
> 时间：2009-04-28T08:06:52.760
> 
> 标签：solr

好吧，我正在编写一些方法来返回与间隔日期范围相匹配的 solr 文档。Docs 以 ISO 8601 格式存储日期字段。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2009-04-28T08:25:49.080

在[SOLR wiki](http://wiki.apache.org/solr/SolrQuerySyntax)中查看一些文档和示例：

> 时间戳：[* 到现在]
> 
> 创建日期：[1976-03-06T23:59:59.999Z TO *]
> 
> 创建日期：[1995-12-31T23:59:59.999Z 至 2007-03-06T00:00:00Z]
> 
> 发布日期：[NOW-1YEAR/DAY TO NOW/DAY+1DAY]
> 
> 创建日期：[1976-03-06T23:59:59.999Z 至 1976-03-06T23:59:59.999Z+1YEAR]
> 
> 创建日期：[1976-03-06T23:59:59.999Z/年至 1976-03-06T23:59:59.999Z]

希望这会有所帮助，大卫。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-10-04T07:35:38.370

在这里您可以找到有关范围查询的更多详细信息

[https://cwiki.apache.org/confluence/display/solr/The+Standard+Query+Parser](https://cwiki.apache.org/confluence/display/solr/The+Standard+Query+Parser)

举几个例子

```
1\. Exact Matching: q= modify_date:"2012-07-06T9:23:43Z"
2\. Less than: q= modify_date:{* TO 2012-07-06T9:23:43Z } 
3\. More than: q= modify_date:{ 2012-07-06T9:23:43Z TO *}
4\. Less or equal than: modify_date:[* TO 2012-07-06T9:23:43Z] 
5\. More or equal than: modify_date:[ 2012-07-06T9:23:43Z TO *] 
```

方括号 [ ] 表示匹配包含上限和下限的值的包含范围查询。

花括号 { } 表示一个排他范围查询，它匹配上限和下限之间的值，但不包括上限和下限本身。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-29T06:17:27.027

假设您在 Schema 中的字段为 Modified_Date 那么您可以应用以下范围查询：

```
Modified_Date:[2015-04-20T07:49:00Z TO *]
Modified_Date:[2015-04-20T07:49:00Z TO 2015-05-
20T07:33:00Z]
Modified_Date:[2015-04-20T07:49:00Z TO NOW]
Modified_Date:[NOW-7DAY/DAY TO NOW]
Modified_Date:"2015-05-27T10:04:00Z"
Modified_Date:NOW
Modified_Date:NOW/DAY
Modified_Date:NOW/HOUR
Modified_Date:NOW-1YEAR
Modified_Date:NOW-2YEARS
Modified_Date:NOW-3HOURS-30MINUTES
Modified_Date:"2008-07-04T13:45:04Z/DAY"
Modified_Date:[* TO NOW]
Modified_Date://DAY
Modified_Date://HOUR
Modified_Date:[ * 2015-04-20T07:49:00Z ]
Modified_Date:[2015-04-20T07:49:00Z *] 
```

# google-maps - Google 地图 API 密钥对生成的域无效？

> ID：796763
> 
> 赞同：1
> 
> 时间：2009-04-28T08:09:40.740
> 
> 标签：google-maps

昨天我第一次尝试谷歌地图 API，我正在为我的一个公共域生成 API 密钥。也许我犯了一个错误，因为我在我的本地主机上测试了该密钥并且工作正常，但是当我尝试在我的网站上发布它时，我收到了 javascript 警报，它说我的 API 密钥对该域无效，但是我正在为该域生成该密钥。诀窍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-28T00:12:24.287

出于测试目的，密钥始终为 localhost 工作。但是在其他域上，域必须与域匹配，您已经注册了密钥。那么，如果它真的匹配，你控制了吗？您注册密钥的域中没有错字？还是您使用子域？另一个问题可能是，谷歌希望你的应用程序（使用地图）可以从网络上访问，而不需要输入密码或类似的障碍。

# c# - 可以加载到 Windows 窗体控件中的最大数据量是多少？

> ID：796771
> 
> 赞同：2
> 
> 时间：2009-04-28T08:12:48.160
> 
> 标签：c#, windows, datagridview, listbox

我可以加载到表单控件的最大数据量是多少？

根据我的经验，当将超过 500,000 条记录添加到任何 Windows 窗体控件时，我的应用程序会消耗太多内存并挂起。有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T08:15:46.750

是的，这会导致问题。

不要添加那么多记录。

没有人需要那么多。您需要做的是添加过滤功能，以便用户可以指定他/她想要使用的数据范围。

例如，让用户按日期（如果是时间敏感数据）或订单号范围缩小搜索范围，或者......好吧，随便什么。

但我可以向您保证，找到一种将 500K 行添加到网格的方法或任何**不是解决方案的方法**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T08:16:25.453

看起来您已经找到了应用程序的最大内存占用。

没有单一的衡量标准。

应用程序内存还包括您的应用程序正在使用的 GDI 句柄、文件句柄、线程。确保您没有使用任务管理器和喜欢的 GDI 句柄泄漏。

此外，将 500,000 条记录加载到 UI 也不是一个好习惯，用户永远无法处理这么多信息，请通过使用分页或其他方式来更改您的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T08:32:28.940

那是一大堆数据；实际上，首先要做的是减少数据量-但是，由于您`DataGridView`在标签中提到，大数据场景有“虚拟模式”。请参阅 MSDN、[here (overview)](http://msdn.microsoft.com/en-us/library/ms171622.aspx)和[here (howto)](http://msdn.microsoft.com/en-us/library/2b177d6d.aspx)。

一些（但不是全部）其他基于列表的控件也具有“虚拟模式”支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T08:27:20.933

我通常会限制屏幕上显示的记录数，通常为 20，但这取决于您要显示的数据类型。

我通常在此之后应用过滤，并将数据和修改后的记录数返回给应用程序。如果用户希望能够查看所有记录，他们可以导出到另一个应用程序（通常是 Excel，这会破坏，但也是 XML。）

不过，没有人会阅读 50 万条记录。

# assembly - 汇编中的局部变量存储分配

> ID：796781
> 
> 赞同：2
> 
> 时间：2009-04-28T08:15:56.233
> 
> 标签：assembly

当说为局部变量分配存储空间时，经常使用以下代码段

```
addl $8,%esp  //allocate 8-byte storage

push %ebx     //store some value onto the stack 
```

为什么不简单地将值压入堆栈，而是提前分配一些空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T08:33:31.090

如果您问为什么编译器不为本地存储生成推送指令，而不是直接操作堆栈指针，那是效率问题。

自动变量（无论如何在 C 中）未初始化，因此代码序列将是（我将使用 subl，因为我习惯于在内存中向下增长的堆栈）：

```
C Code            Actual assembly        Your suggestion
void x(void) {
    int a;        subl 8,%esp            push 0
    int b;                               push 0
    : : :         blah blah              blah blah
} 
```

我的回答是，在以下情况下它是不必要且低效的：

```
C Code            Actual assembly        Your suggestion
void x(void) {
    int a[100];   subl 400,%esp          push 0
                                         push 0
                                         push 0
                                         : : :
                                         push 0
    : : :         blah blah              blah blah 
```

您的建议可能对以下内容有意义：

```
C Code            Your suggestion
void x(void) {
    int a = 7;    push 7
    int b = 9;    push 9
    int c[4];     subl 16,%esp
    : : :         blah blah
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:32:33.090

这样分配的空间是固定大小的，这对于编译器来说是最简单的，因为可以使用“DWORD PTR [ebp+(offset)]”访问内存。通常的函数序言是这样的：

(Intel 语法) push ebp add ebp, 8 mov ebp, esp

对于具有 8 个字节的局部变量的函数。

# asp.net - 将 SASS 与 ASP.NET 结合使用

> ID：796788
> 
> 赞同：104
> 
> 时间：2009-04-28T08:20:27.347
> 
> 标签：asp.net, css, sass

我正在研究在 ASP.NET 环境中使用 Ruby HAML 包中的[SASS （Syntactically Awesome StyleSheets）的方法。](http://haml.hamptoncatlin.com/docs/rdoc/classes/Sass.html)理想情况下，我希望将 SASS 文件编译成 CSS 成为构建过程的无缝部分。

这种集成的最佳方法是什么？或者，是否有其他更适合 .NET 环境的 CSS 生成工具？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-01-24T03:49:44.317

为了在 Visual Studio 中获得更好的工作体验，您可以安装开始支持 Sass（SCSS 语法）的[Web Essential的最新版本。](http://vswebessentials.com/)
或者，您可以安装[Sassy Studio](http://visualstudiogallery.msdn.microsoft.com/85fa99a6-e4c6-4a1c-9f00-e6a8129b6f4d)或[Web Workbench](http://www.mindscapehq.com/products/web-workbench)。

然后在 ASP.NET 项目中编译 .sass/.scss 文件，有一些不同的工具：通过[Web Essential](http://vswebessentials.com/)、[Web Workbench](http://www.mindscapehq.com/products/web-workbench)、[SassC](https://github.com/hcatlin/sassc)、[Sass.Net](http://libsassnet.codeplex.com/)、[Compass](http://compass-style.org/)、[SassAndCoffee](https://github.com/xpaulbettsx/SassAndCoffee) ...

* * *

[**Web Essential**](http://vswebessentials.com/)一个功能齐全的 Visual Studio 插件，它确实为所有前端的东西提供了更好的体验。最新版本开始支持 Sass（SCSS 语法）。在内部，它使用 Libsass 将 SCSS 编译为 CSS。

* * *

[**Web Workbench**](http://www.mindscapehq.com/products/web-workbench)是 Visual Studio 的另一个插件，它为编辑 SCSS 文件添加了语法高亮、智能和其他一些有用的东西。它还可以将您的代码编译成普通或缩小的 CSS。在内部，它使用了 Ruby Sass 编译器的包装版本。

* * *

[**Sassy Studio**](http://visualstudiogallery.msdn.microsoft.com/85fa99a6-e4c6-4a1c-9f00-e6a8129b6f4d)：Visual Studio 的另一个插件。功能较少但更轻。

* * *

[**Libsass 库**](https://github.com/hcatlin/libsass)是 Sass CSS 预编译器的C++ 端口（仍在开发中）。最初的版本是用 Ruby 编写的，但这个版本是为了提高效率和可移植性。该库力求轻巧、简单、易于构建并与各种平台和语言集成。

Libsass 库周围有几个包装器：

*   [**SassC**](https://github.com/hcatlin/sassc)：命令行编译器（在 Windows 上，您需要使用 MsysGit 编译 SassC 的源代码以获取 sassc.exe）。
*   [**NSass**](https://github.com/TBAPI-0KA/NSass)：.Net 包装器。
*   [**Node-Sass**](https://github.com/andrew/node-sass)：在 Node.js 上使用 Libsass。
*   等等

* * *

[**Compass**](http://compass-style.org/)是 Sass 的一个框架，它添加了许多有用的助手（如图像精灵），还可以编译你的 SCSS/Sass。但是您需要在需要编译样式的每个开发环境中安装 Ruby。

* * *

[**SassAndCoffee**](https://github.com/xpaulbettsx/SassAndCoffee)是一个通过一些 DLL 和配置添加 SCSS/Sass 编译和缩小支持的包。与 Web Workbench 编译器相比，它的优势在于它自包含到您的 Visual Studio 解决方案中：您无需在每个开发环境中安装插件。备注：SassAndCoffee 不经常更新，因为它使用 IronRuby 封装了官方的 Ruby 编译器，所以会出现一些性能问题。您可以通过[Nuget 包](http://nuget.org/packages/SassAndCoffee)安装最新版本。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-28T15:11:28.997

compass 项目有一个编译器，可以将你的 sass 编译为 css。它是为在 Windows 上运行而构建的，但在该平台上没有经过很好的测试。如果您发现任何与平台相关的错误，我很乐意帮助您修复它们。

指南针可以在这里找到：http: [//github.com/chriseppsein/compass](http://github.com/chriseppstein/compass)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-11-26T15:08:43.613

在 2015 年，我目前的建议是使用`Node.js`（服务器端 Javascript 平台）和`gulp.js`（任务运行程序节点包），以及`gulp-sass`（用于 gulp 实现*libsass*的节点包- Ruby SASS 的快速 C 端口）。

您可以从[这样的教程](https://markgoodyear.com/2014/01/getting-started-with-gulp/)开始。

> 更喜欢捆绑？[Bundle Transformer](http://bundletransformer.codeplex.com/releases/view/618390)现在终于使用 libsass，实现了高速编译。

这就是我认为你应该使用 Node 和 Gulp 的原因。

*   **Node 现在在前端工具中很流行**
    许多 Web 开发人员现在使用 Node 作为前端 Web 开发任务的平台。无论是 Grunt、Gulp、JSPM、Webpack 还是其他东西——它现在都在[npm](http://www.npmjs.com)中发生。
    你可以用 npm 包做的事情：
    *   使用 Sass、Less、PostCSS 等编译样式
    *   连接 Javascript、CSS、HTML 模板等
    *   编写其他版本的 JS 并将 ES6-7、Typescript、Coffeescript 转译为 ES5
    *   从本地 SVG 文件创建图标字体
    *   缩小 js、css、SVG
    *   优化图像
    *   拯救鲸鱼
    *   ...
*   **为项目的新开发人员设置更简单 设置**
    项目后`package.json`，`gulpfile.js`通常只需几个步骤即可运行：

    *   下载并安装[Node.js](http://nodejs.org)
    *   运行`npm install -g gulp` *（全局安装 gulp）*
    *   运行`npm install` *（在本地安装项目包）*
    *   运行`gulp taskname` *（根据您设置`gulpfile.js`任务名称的方式，将运行编译您的 SASS、Javascript 等的任务）*
*   **受 Visual Studio 2015 支持**
    不管你信不信，VS2015 现在可以为您处理所有命令行内容！

在工作流程方面，您有几个典型的选项：

*   **让您的开发人员将编译后的代码提交到存储库**
    缺点：开发人员必须始终运行`gulp`或类似地编译生产就绪资产

*   **您的构建|阶段|生产服务器在发布之前运行 gulp 任务**
    这种方式设置起来可能更复杂，但意味着工作经过验证并从未编译的源重新构建。

以下是我 2012 年的旧答案，留作后人：

> 从一个使用 Ruby、Python 和 C# .NET 的项目领先的前端开发人员那里，我有以下想法：
> 
> ## 萨斯 & LESS
> 
> 我更喜欢在一个新项目中使用 [Sass][1]，尤其是使用出色的 [Compass 框架][2]。指南针是一项伟大的工作，为我的过程增加了很多价值。Sass 有一个很棒的社区、良好的文档和强大的功能集。Sass 是一个 Ruby 库。
> 
> Sass 的替代方案是 [LESS][3]。它具有类似的语法和功能，但社区较小，文档稍好。少一个 JS 库。
> 
> 趋势方面，随着时间的推移，人们倾向于转向 Sass，因为它已经很好地开发，甚至支持 CSS Level 4 特性。但是 LESS 仍然完全可用，并且很容易增加足够的价值来保证使用它。
> 
> ## 在 ASP.NET 项目中使用 Sass/LESS
> 
> 虽然我更喜欢使用 Sass，但让 Ruby/Sass 与 .NET 项目一起工作可能会很痛苦，因为它很难设置，很陌生，并且会让开发人员感到沮丧。
> 
> 你有几个选择：
> 
> *   **Sass：原生 Ruby + Sass**
>     *   **Pro：**最快的服务器编译
>     *   **优点：**能够使用最新版本的 Sass
>     *   **缺点：**启动和运行非常麻烦
>     *   **缺点：**每个服务器或工作站都需要设置 ruby
>     *   **缺点：** .NET 开发人员更难解决 Ruby/集成问题
> *   **Sass：Ruby .NET 端口，如 [IronRuby][5] + Sass**
>     *   **优点：**服务器编译慢（前端开发人员会抱怨！）
>     *   **Pro：**可能无法使用最新版本的 Sass
>     *   **优点：**比 Native Ruby 更容易设置
>     *   **缺点：**每个服务器或工作站都需要设置 ruby
>     *   **缺点：** .NET 开发人员更难解决 Ruby/集成问题
> *   **Sass：使用 [BundleTransformer][7] + Sass 扩展 [.NET Bundling][8]**
>     *   **优点：（**使用 IronRuby）服务器编译慢（前端开发人员会抱怨！）
>     *   **Pro：（**使用 IronRuby）可能无法使用最新版本的 Sass
>     *   **Pro：（**使用 IronRuby）比 Native Ruby 更容易设置
>     *   **缺点：**每个服务器或工作站都需要设置 ruby
>     *   **缺点：** .NET 开发人员更难解决 Ruby/集成问题
> *   **Sass 或 LESS：Visual Studio 插件，如 [Mindscape Workbench][4]**
>     *   **优点：**容易上手
>     *   **优点：**快速编译
>     *   **缺点：**每个使用 Sass 样式的开发人员都需要一个 IDE 插件
>     *   **缺点：**无法在服务器上快速更改样式 - 需要本地重新处理
> *   **LESS：.NET 端口，如 [DotLessCSS][6]**
>     *   **优点：**快速服务器编译
>     *   **优点：**非常容易设置
>     *   **优点：**对 C# .NET 开发人员来说很舒服
>     *   **Pro：**没有 IDE/工作站/服务器要求 - 将其包含在 Web 应用程序本身中
>     *   **缺点：**没有 SASS/Compass 的多功能性，不能总是保证最新的 LESS.JS 语法兼容性
> *   **Sass：使用 [Vagrant][9] 虚拟化 linux+Ruby**
>     *   **优点：**设置没有你想象的那么可怕
>     *   **亲：**快！！
>     *   **Pro：**最新的前端工具（Sass、Compass 等），使用 linux 包管理器进行了更新
>     *   **缺点：**对于非 Linux 用户来说，初始设置可能很困难
>     *   **缺点：**环境要求现在涉及托管 VM
>     *   **缺点：** VM 可能存在可扩展性/维护问题
> 
> 在我看来，使用 [DotLessCSS][6] 的 LESS 是典型 Web 开发项目的最佳选择，原因如上所述。
> 
> 几年前，我发现 [DotLessCSS][6] 有烦人的错误和限制，但在 2012 年在一些项目中再次使用 [DotLessCSS][6]，我对设置非常满意。我没有通过使用 Sass/Ruby 给我的开发人员带来痛苦，并从 LESS 中获得大部分价值。最重要的是，没有 IDE 或工作站要求。
> 
> [1]：[http](http://sass-lang.com/) ://sass-lang.com/ [2]：[http](http://compass-style.org/) ://compass-style.org/ [ 3 ]：http: [//lesscss.org/](http://lesscss.org/) [4]： [http://www. mindscapehq.com/products/web-workbench](http://www.mindscapehq.com/products/web-workbench) [5]： [http](http://www.ironruby.net/) ://www.ironruby.net/ [6]： http: [//www.dotlesscss.org/](http://www.dotlesscss.org/) [7]： [http ://bundletransformer.codeplex.com /](http://bundletransformer.codeplex.com/) [8]： [http](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx) ://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx [9]：[http://www.vagrantup.com/](http://www.vagrantup.com/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2011-01-21T15:51:10.280

我刚刚编写了一个带有详细说明的 Visual Studio 插件，包括有关如何让 Sass 用于 Visual Studio 的屏幕截图。在这里查看 - [http://giri.sh/2011/01/21/sass-for-visual-studio-2010/](http://giri.sh/2011/01/21/sass-for-visual-studio-2010/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-10-17T10:39:23.653

它不是 SASS，但您可以查看我们的[Less Css for .NET](http://www.dotlesscss.org/)端口。不过 Compass 看起来真的很有趣，我认为对于 Less 来说这样的东西会是一个很好的补充。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-07-07T17:04:25.207

我昨天才发现这个，它看起来很有希望，除了 sass/scss 之外，它还可以处理 JS 的自动化（还不是 CSS）和文件的组合。我希望有人能创建一个用于编辑 sass/scss 文件的 VS 插件。我确实发现有问题的是，当您的 sass/scss 代码中有错误时，您只会发现它在测试或检查生成的 CSS 文件。我还没有完成所有的步骤，但到目前为止还不错。

[https://github.com/xpaulbettsx/SassAndCoffee](https://github.com/xpaulbettsx/SassAndCoffee)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-10-17T10:52:41.003

[我最初在这里](https://stackoverflow.com/questions/1049433/better-css-in-net/1049548#1049548)回答了这个问题。

```
#PostBuild.rb
#from http://sentia.com.au/2008/08/sassing-a-net-application.html
#Post-build event command line: rake -f "$(ProjectDir)PostBuild.rb"

require 'haml'
require 'sass'

task :default => [ :stylesheets ]

desc 'Regenerates all sass templates.'
task :stylesheets do
    wd = File.dirname(__FILE__)
    sass_root = File.join(wd, 'Stylesheets')
    css_root = File.join(wd, 'Content')
    Dir[sass_root + '/*.sass'].each do |sass|
        css = File.join(css_root, File.basename(sass, '.sass') + '.css')
        puts "Sassing #{sass} to #{css}."
        File.open(css, 'w') do |f|
            f.write(Sass::Engine.new(IO.read(sass)).render)
        end
    end
end 
```

# sql-server - SQL Server - 同义词提示和技巧？

> ID：796791
> 
> 赞同：16
> 
> 时间：2009-04-28T08:22:19.697
> 
> 标签：sql-server, performance, database-design, synonym

我最近一直在做很多数据库重构，同义词非常有用。当我最初放入同义词时，我认为它们在我重构时会非常临时。现在我认为可能有一些很好的理由来保留其中一些同义词。

*   有没有人将它们用作完整的抽象层？

*   性能成本是多少？

*   索引有什么问题吗？

*   提示或技巧？

我的第一个问题，所以请温柔一点。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-28T12:54:42.053

由于同义词是已经存在的数据库对象的抽象/替代名称，因此在表的情况下，索引行为与底层对象的行为相同，即生成执行计划时，无论使用表，都会生成相同的计划名称或相应的同义词。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-09-01T19:11:59.763

实际上，我在使用索引时遇到了一个问题......我不确定是否有办法在这个网站上创建相关帖子，但这里是我的同义词和表索引问题的链接。

[带索引的 SQL Server 表同义词](https://stackoverflow.com/questions/1362916/sql-server-table-synonyms-with-indexes)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-08T08:48:52.920

是的，同义词可以用作抽象层或间接层。例如，如果您需要访问外部数据库中的对象，其中实际数据库名称要到运行时才能知道。您可以编写通过同义词名称引用对象的 sql，然后稍后动态创建同义词。

没有索引陷阱：如果同义词指的是表或索引视图，那么在这些对象上定义的任何索引都在起作用。

性能应该与通过完全限定名称显式引用对象相同。

# c# - AJAX 进度条显示页面加载的加载进度百分比

> ID：796792
> 
> 赞同：2
> 
> 时间：2009-04-28T08:22:19.870
> 
> 标签：c#, ajax, asp.net-ajax, progress-bar

如何使用进度条显示页面的加载百分比？...（类似于它们在 Flash 中的显示方式）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T08:27:24.333

不可能（在没有插件或扩展的 IE8 和 FF3 和 Opera 上）。如果你想要真正的加载百分比，包括 HTML + Javascript + 样式表 + 图像。您只能检测到页面加载了多少文件（这种技术只能检测到图像和 javascript）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-28T08:28:05.877

我想说，如果您需要一个页面的进度条，那么该页面可能需要重新考虑。

我个人不喜欢有进度条的页面（比如华硕下载区的那个）。他们只是烦人。我的浏览器已经有一个进度条。而且我希望我的带宽用于下载页面，而不是仅仅告诉我我仍在等待页面的图形。

不过，当涉及到页面上的 AJAX 请求时，我只会使用某种微调器。告诉用户正在发生的事情并且页面没有死。再一次，如果后台请求需要很长时间以至于您需要一个进度条，我会再次说后台请求可能应该重新考虑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-07T02:58:58.280

哦，这么简单，你把我的代码复制下来并粘贴到你的网站上，虽然不是很酷，但仍然可以使用。

代码 ：`<SCRIPT LANGUAGE='JavaScript' SRC='http://www.seabreezecomputers.com/tips/progress.js' TYPE='text/javascript'> </SCRIPT>`

> 请记住此代码粘贴在“/Head”和“BODY”之间
> 
> ```
>  [1]: http://dw6-vista-tdx.blogspot.com 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-13T08:18:09.267

嘿，查看[s3fm](http://s3.amazonaws.com/s3fm/index.html)上的上传进度对话框，这是一个免费的在线 Amazon s3 文件管理器。

# firefox - 以编程方式删除 Firefox 的许可协议对话框

> ID：796796
> 
> 赞同：2
> 
> 时间：2009-04-28T08:22:42.630
> 
> 标签：firefox, unix, selenium, headless

我正在使用[Selenium](http://en.wikipedia.org/wiki/Selenium_%28software%29)运行回归测试，并自动启动 Firefox 实例。

问题是由于 Firefox 的许可协议对话框，我的测试卡住了：

[版权声明 http://img151.imageshack.us/img151/3467/31963141.png](http://img151.imageshack.us/img151/3467/31963141.png)。

我无法用鼠标单击，因为我处于具有虚拟图形环境的无头环境中。

我想知道我可以编辑什么 Firefox 的文件（以及如何编辑它）来欺骗 Firefox 认为有人接受了版权。

**澄清以下评论**

**我只需要做一次。但我不能用鼠标来做，因为这是一个虚拟图形环境，我没有鼠标，也看不到鼠标指针。但是我可以截屏。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T08:42:26.763

好的，最后我自己找到了。

正确答案是：

在 Firefox 安装中，查找`firefox.js`

找到这一行：

`pref("browser.EULA.3.accepted", false);`

并替换`false`白色`true`

感谢所有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T08:30:25.683

根据此[链接文本](http://www.desktoplinux.com/news/NS8123220578.html)，它已被删除 - 但它看起来比你的版本更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T08:28:17.793

编写一个单击“我同意”的 Selenium 测试

或者

添加任何“同意”设置使 Firefox 跳过这个到 Firefox 配置文件的`prefs.js`

或者

只需使用已同意许可的 Firefox 配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T08:53:36.953

在 Firefox 3.0.10 中它隐藏在`about:config`下面

```
browser.rights.3.shown 
```

设置它`true`，你就完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-14T23:21:24.417

有两个覆盖首选项（后者是“旧 EULA 首选项”），您可以在配置文件目录的 prefs.js 中覆盖它们：

```
user_pref("browser.rights.override", true);
user_pref("browser.EULA.override", true); 
```

# django - 如何将 SphinxQuerySet 与 QuerySet 相交

> ID：796799
> 
> 赞同：1
> 
> 时间：2009-04-28T08:25:39.003
> 
> 标签：django

是否可以相交 2 个查询集：SphinxQuerySet 和普通 django 的 QuerySet ？

我需要通过普通 django 的过滤器过滤 SphynxQuerySet。最好的方法是什么？

我试着往这个方向走：

```
ids = []
for obj in Object.search.query(query).all():
        ids += [obj.id]
qs = Object.objects.all().filter(id__in=ids).filter(some_other_filters) 
```

但我觉得这不是我的目的的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T08:49:26.310

有一次在 django-sphinx 中有一个（现已修复）错误，其中没有清除来自先前查询的过滤器，这意味着我必须在没有任何过滤器的情况下进行完整搜索，然后与普通过滤器相交。我是这样做的：

```
# First get list of objects matching criteria
results = Object.objects.filter(qset).distinct()

# Save id's from mysql queryset for later
qs_ids = [object.id for object in results]

# Do sphinx query
search_results = Object.search.query(search_terms)

# Now manually filter the sphinx queryset
results = [object for object in search_results if object.id in qs_ids]

return results 
```

这当然不如让 sphinx 进行过滤那么有效，但我当时别无选择。

也许您可以重新考虑您的策略，这样您就不需要自己手动过滤查询？

# .net - 如何在 C++ 中用 SQLSMO 替换 sqlDMO

> ID：796809
> 
> 赞同：0
> 
> 时间：2009-04-28T08:28:41.337
> 
> 标签：.net, sql-server, sql-server-2005, c++-cli

Is Managed code 是使用 sqlsmo 的唯一方法。

任何身体都可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T01:26:27.367

从我读过的所有内容中，SMO 都是为在托管代码中使用而严格编写的。根据以下 BOL 条目：

[SMO 编程语言](http://msdn.microsoft.com/en-us/library/ms162558.aspx)

> SMO 是一个 .NET 程序集。要使用 Microsoft .NET Framework 进行编程，您必须选择公共语言运行库支持的语言。在 SMO 参考中，有用于托管语言（如 Visual Basic .NET 和 Visual C# .NET）的语法。

# list - 删除 Sharepoint 列表项

> ID：796811
> 
> 赞同：0
> 
> 时间：2009-04-28T08:29:14.830
> 
> 标签：list, sharepoint

我有一个在问题列表（查找）中使用的联系人列表。当我删除联系人列表中的联系人时，我已经创建的问题中也消失了。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T20:33:59.190

> 有人可以告诉我如何构建一个从我的联系人列表中获取联系人的自定义查找字段吗？

从 SPField 继承。创建一个从 BaseFieldControl 继承的字段控件。我认为您可以使用 Microsoft.SharePoint.WebControls.LookupField 呈现一个下拉列表，您可以在其中选择值。

另一种（可能更简单）的方法是使用事件接收器并将所选值复制到文本或计算字段。

我不确定这些中的任何一个是否是您的最佳方法。为什么必须从联系人列表中删除联系人？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T11:20:20.040

如果我正确理解了您的初始问题，您将遇到以下情况：

联系人列表 - 联系人 A - 联系人 B - 联系人 C

问题列表 - 问题 A（查找联系人 A） - 问题 B（查找联系人 B） - 问题 C（查找联系人 C）

当您从联系人列表中删除“联系人 A”时，问题 A 不包含空值（或下拉列表中的空白选择），即使您在之后没有编辑“问题 A”，“联系人 A”也是如此删除“联系人A”。

所以它现在看起来像：

联系人列表 - 联系人 B - 联系人 C

问题列表 - 问题 A（查找联系人） - 问题 B（查找联系人 B） - 问题 C（查找联系人 C）

假设这是正确的。您已经描述了 SharePoint 中查找列表的默认行为。列表下拉列表在需要时动态构建，并将对原始列表的引用存储为值>

如果您要在“问题 A”中查询查找字段的值，您会在删除之前得到类似“1#;contact A”的内容，之后会得到“null”。

您无法使用默认查找字段调整此行为。

选择字段可能会根据添加/删除联系人的频率以及联系人列表的大小来解决您的问题。

选择字段只是一个带有预定义输入选项的文本字段。您可以使用事件处理程序来更新该字段的可用选项。

另一种方法是创建自己的查找字段（从默认值继承）。将字符串属性添加到从默认查找中复制数据的字段（选中时）。然后，您将更改渲染代码以在视图中显示添加的属性，并在创建/编辑时显示修改的下拉列表（显示不可用/已删除的值）。

IMO，这是默认查找字段的一大缺点。

# java - 如何从 RPG 调用 Spring Web 服务？

> ID：796817
> 
> 赞同：1
> 
> 时间：2009-04-28T08:30:29.787
> 
> 标签：java, web-services, spring, db2, rpgle

我们为我们的 Intranet 应用程序开发了 SOA 架构，因此我们的 web-start java 应用程序连接到中央应用程序。在 Spring HttpInvoker 上运行的服务器，一切运行良好。现在，我们需要集中我们的业务逻辑，所以我们需要从 DB2 RPG 存储过程中调用这些 Web 服务。这有可能吗？你建议从什么开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T02:13:22.133

最好在[RPG400-L](http://lists.midrange.com/listinfo/rpg400-l)清单上问这个问题。那里有许多 XML 专家。

RPG 可以在 V5R4 及更高版本上做 XML。还有其他工具，例如[RPG-XML](http://www.rpg-xml.com/)，也可以提供帮助。

# comp-3 - 将解压缩的 Packed Decimal Comp-3 数据转换为双精度

> ID：796818
> 
> 赞同：1
> 
> 时间：2009-04-28T08:30:38.320
> 
> 标签：comp-3

我有一个固定宽度的文本文件，它已从 Comp-3 数据解压缩为固定宽度的字符串。

我需要知道如何解释以下字段：

```
FIELD-NAME-1 PIC S9(15)V9(3) COMP-3.
FIELD-NAME-2 PIC S9(3)V9(8) COMP-3.
FIELD-NAME-3 PIC S9(3)V9(6) COMP-3. 
```

这些在我的平面文件中显示为：

```
FIELD-NAME-1 0123456789123456780
FIELD-NAME-2 01234567890
FIELD-NAME-3 012345670 
```

我需要知道上面的数字代表什么。

它是否正确：

```
FIELD-NAME-1 123456789123456.780  --> The first 0 means +ve?
FIELD-NAME-2 012.34567890
FIELD-NAME-3 012.345670 
```

谢谢您的帮助。火腿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T08:48:16.547

S9(15)V9(3) 需要 19 个半字节（实际上是 20 个，因为它必须生成偶数个半字节）来存储：

*   一个为标志。
*   15 为整数位。
*   3 表示非整数位（V 是隐含的小数，不是实数）。

`C`该符号通常以 a或nybble的形式出现在末尾，`D`因此这个问题的答案完全取决于拆包的内容。

你的第一个例子实际上有正确的数字*而没有*符号，所以我会担心你的陈述，其中一个代表了符号。要么，要么你已经离开了“9”。其他两个示例对于符号和数字部分都有足够的数字。

最好的选择，看看你是否可以得到一个负数（和其他测试数据，如 1），看看它会产生什么。

# .net - 使用代码创建 Infragistics 编辑模板

> ID：796820
> 
> 赞同：0
> 
> 时间：2009-04-28T08:31:00.533
> 
> 标签：.net, asp.net, javascript, infragistics

我们目前使用 Infragistics 网格，直到运行时才绑定数据集，然后在代码中设置网格设置。这似乎有点啰嗦，但这是我们的高级开发人员希望完成的方式。

我想研究使用编辑模板，我想知道是否有一种方法可以使用 c# 代码从网格中的内容自动生成编辑模板。我已经看到，如果我们在设计时绑定 infra 可以很好地创建基本模板。这在代码中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T13:42:26.637

有一个关于在代码中构建模板的教程，您可以遵循。它位于使用 WebDataGrid 部分下的 Infragistics 文档中。这是链接[http://help.infragistics.com/Help/NetAdvantage/ASPNET/2009.1/CLR3.5/html/WebDataGrid_Using_the_Template_Collection.html](http://help.infragistics.com/Help/NetAdvantage/ASPNET/2009.1/CLR3.5/html/WebDataGrid_Using_the_Template_Collection.html)

如果您需要更多帮助，您可以随时直接联系 Infragistics 支持 ( [http://www.infragistics.com/gethelp](http://www.infragistics.com/gethelp) )

# bnf - 用于生成 json.org 上使用的铁路图的工具

> ID：796824
> 
> 赞同：105
> 
> 时间：2009-04-28T08:31:36.210
> 
> 标签：bnf, diagramming

我喜欢[json.org](https://www.json.org/)上[铁路图](https://en.wikipedia.org/wiki/Syntax_diagram)的语法，它是 BNF 语言的图形表示。我还没有找到任何可以产生如此雄辩的结果的工具。

## 任何人都可以识别用于生成这些图表的工具吗？

![](https://i.stack.imgur.com/e3RRI.png) ![](https://i.stack.imgur.com/7Zcxu.png)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2011-08-22T05:22:21.217

有一个[**在线铁路图生成器**](http://bottlecaps.de/rr/ui)。[它根据EBNF](http://en.wikipedia.org/wiki/EBNF)中指定的[上下文无关语法](http://en.wikipedia.org/wiki/Context-free_grammar)创建 SVG[语法图](http://en.wikipedia.org/wiki/Syntax_diagram)，也称为铁路图。您可以复制 SVG 代码或截屏。

你必须输入语法，它会制作图表。

例如，要创建您展示的第一个铁路图，您将使用以下代码：

```
object ::= '{' ((string ':' value ) ( ',' string ':' value )*)? '}' 
```

![在此处输入图像描述](https://i.stack.imgur.com/yMMT0.png)

然后您可以继续定义`string`和`value`使用`string ::= ...`，并且`value ::= ...`所有参考都显示出来。

查看页面上的一些示例图表。他们有 XML 甚至 EBNF 本身。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2009-04-28T13:05:57.080

> 从 Douglas Crockford
> 到 Aleem B
> 日期 2009 年 4 月 28 日星期二下午 6:01
> 主题回复：json.org 上的铁路图
> 
> 我用 Visio 画了它们。Creative Docs.NET 也运行良好。
> 
> --
> 
> 阿莱姆 B 写道：
> 
> 你好道格拉斯，
> 
> 我非常喜欢你在那里发布的大多数东西，json.org 上的铁路图也不例外。我一直在尝试寻找一种工具，它可以生成几乎一样雄辩的图表，但没有运气：
> 
> [用于生成 json.org 上使用的铁路图的工具](https://stackoverflow.com/questions/796824/tool-for-generating-railroad-diagram-used-on-json-org)
> 
> 您是否使用了一些工具将 BNF 转换为这些图表，或者它们是手工制作的？
> 
> ——阿莱姆

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-09-11T10:03:36.940

![](https://raw.githubusercontent.com/tabatkins/railroad-diagrams/HEAD/images/rr-title.png)

[Tab Atkins Jr.](http://www.xanthir.com/)专门使用[svg](/questions/tagged/svg "显示标记为“svg”的问题")创建了一个**[Javascript 铁路图生成器](https://github.com/tabatkins/railroad-diagrams)**，因为他找不到具有他想要的视觉吸引力的工具，即“ *JSON.org 外观*”。

 ** * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-04-28T08:41:06.843

前几天有一个类似的问题： [制作铁路图的好工具是什么？](https://stackoverflow.com/questions/773371/what-is-a-good-tool-for-creating-railroad-diagrams)

那个问题是关于 SQLite 语法图中的铁路图是如何生成的。接受的[答案](https://stackoverflow.com/questions/773371/what-is-a-good-tool-for-creating-railroad-diagrams/773416#773416)发现这些图表是使用用 Tcl 编写的 DSL 生成的。

[另一个答案](https://stackoverflow.com/questions/773371/what-is-a-good-tool-for-creating-railroad-diagrams/773453#773453)提供了使用基于 EBNL 语法的图表生成器的建议。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-16T07:55:17.270

我也一直在寻找用于生成这些[*语法*](https://en.wikipedia.org/wiki/Syntax_diagram)图的工具，如果可能的`js library`话，可以对其进行编辑和显示，而无需等待无聊的时间来绘制图形。

我知道那里有工具[*，*](https://www.google.com/search?q=railroad%20diagram&tbm=isch)但我会说来自[*bottlecaps.de*](http://bottlecaps.de/rr/ui)的生成器有一个漂亮的图形和颜色选项。不幸的是，我无法在那里获得该工具的源代码。

我还在这里找到了相关的答案问题，但只得到了以下内容，我们可以将其作为开源获取，`js library`并提供了一个在线演示*[，我们可以在其中尝试和使用](https://chetabahana.github.io/#chetabahana-skema)*.

*   来自[tabatkins的](https://github.com/tabatkins/railroad-diagrams)[铁路图生成器](http://www.xanthir.com/etc/railroad-diagrams/generator.html)，在`js`（*语法*也作为`Python`库存在）
*   来自[bramp](https://github.com/bramp/js-sequence-diagrams)[的 js-sequence-diagrams](https://bramp.github.io/js-sequence-diagrams/)，`js`但在[*UML*](https://en.wikipedia.org/wiki/Sequence_diagram)中（*语法*是通过 bottlecaps.de 生成*的*）
*   来自 GoJS 的[umlClass](http://www.gojs.net/latest/samples/umlClass.html) [，](https://github.com/NorthwoodsSoftware/GoJS/blob/master/samples/sequenceDiagram.html)但`js`仅适用于*UML*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-09T17:41:57.703

IBM 的铁路轨道生成器可以很好地处理的一件事是默认值。我还没有看到另一个发电机可以做到这一点。

一个例子是

```
 ┌─────◀────┐┌(──«defaults»─)─┐                        
▶▶─COMMAND┴«argument»┴┼────────────────┼──────────────────────▶◀
                      │ ┌────◀─────┐   │                        
                      └(┴┬«option»┬┴┬─┬┘                        
                         └Help────┘ └)┘ 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-06-29T14:33:59.093

我找到了 J-algo 工具。我认为绘制图表很容易，但我无法导出到图像或其他类型。

![在此处输入图像描述](https://i.stack.imgur.com/dpTG0.png)

[http://j-algo.binaervarianz.de/index.php](http://j-algo.binaervarianz.de/index.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-08T05:00:20.827

查看生成 HTML 铁路图的[http://code.google.com/p/html-railroad-diagram/ 。](http://code.google.com/p/html-railroad-diagram/)有一个[示例](http://html-railroad-diagram.googlecode.com/svn/trunk/examples/railroad.html)显示了由带有链接的 JavaScript 在 HTML 页面中生成的 JSON 铁路。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-06-26T18:37:26.657

我似乎记得 IBM 有一个工具可以构建此类图表作为其 BookMaster SGML 套件的一部分。铁路图经常用于大型机文档中。

# asp.net-mvc - 如何使用 ASP.NET MVC VB.NET XML Literals View Engine 创建强类型视图页面？

> ID：796835
> 
> 赞同：0
> 
> 时间：2009-04-28T08:35:39.867
> 
> 标签：asp.net-mvc, vb.net, xml-literals, viewengine

我正在使用 Dmitry Robsman 创建的 ASP.NET MVC VB.NET XML Literals View Engine，并在他的博文中进行了描述。

[http://blogs.msdn.com/dmitryr/archive/2008/12/29/asp-net-mvc-view-engine-using-vb-net-xml-literals.aspx](http://blogs.msdn.com/dmitryr/archive/2008/12/29/asp-net-mvc-view-engine-using-vb-net-xml-literals.aspx)

我想使用此视图引擎创建强类型视图页面，但它似乎不包含创建此类视图类所必需的 VbView(Of TModel) 泛型类型。

最终结果应如下所示：

```
Namespace Views.Client
    Public Class Details(Of Models.Client)
        Inherits SiteMaster

        Public Overrides Function RenderContent() As XElement
            Return _
            <fieldset>
                <legend>Fields</legend>
                <p>
                    FirstName:
                    <%= Xhtml.Encode(Model.FirstName) %>
                </p>
                <p>
                    MiddleName:
                    <%= Xhtml.Encode(Model.MiddleName) %>
                </p>
                <p>
                    LastName:
                    <%= Xhtml.Encode(Model.LastName) %>
                </p>
            <fieldset>
        End Function

    End Class
End Namespace 
```

一旦有一个继承自 Dmitry 的 VbView 类的 VbView(Of TModel) 类，我将需要帮助弄清楚如何将它连接起来，以便它可以与像这样调用视图的标准 MVC 控制器一起工作。

```
Function Details(ByVal id As Integer) As ActionResult
    Dim c = SomeGetClientFunction(id)
    Return View(c)
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-30T05:53:12.580

我下载了 ASP.NET MVC C# 源代码，并且能够通过镜像某些结构来弄清楚如何创建 VbView(Of TModel) 类。我在 CodePlex 上创建了一个项目，其中包含该新类和一些其他更改，这些更改增强了 Dmitry 所做的事情。 [http://vbmvc.codeplex.com](http://vbmvc.codeplex.com)

# visual-studio - Visual Studio 中项目的图标

> ID：796840
> 
> 赞同：2
> 
> 时间：2009-04-28T08:38:00.423
> 
> 标签：visual-studio, visual-studio-2008

我希望在 Visual Studio 中打开的解决方案中的某些项目有不同的图标。就像 Visual Studio 如何为类项目、网站项目等显示不同的图标

> 我不是在谈论更改正在生成的 winforms 或其他此类应用程序的图标

我知道我应该将我的代码安排到适当的命名空间/文件夹结构中......甚至可以将项目安排到解决方案文件夹中......但是上面会暂时更好地与我的队友沟通......（不幸的是，我们继承了一个合理的代码基地和东西需要随着进一步的发展而清理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T02:01:39.743

如果您查看您的 SLN 文件，该项目有一个分配给它的 guid。

所有的 c# 项目都有

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") 
```

并且所有构建文件夹都有..

```
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") 
```

这些定义了项目类型，您可以在注册表中找到它....

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\9.0\Projects 
```

有了这个发现，我想说您正在寻找的东西是非常可能的，但是您必须为 Visual Studio 创建自定义项目类型。如果您从默认软件包开始，这可能不像听起来那么令人生畏。

这是一个指向示例的指针，实际上他们在第 3 步中提到了设置自定义图标。

[在 Visual Studio .NET 中构建自定义项目向导](http://msdn.microsoft.com/en-us/library/aa289144(VS.71).aspx)

# asp.net - IIS 上的 ASP.NET 动态 iframe

> ID：796844
> 
> 赞同：0
> 
> 时间：2009-04-28T08:40:45.067
> 
> 标签：asp.net, iframe

我知道它们是不好的做法，但我在内部网站上确实需要 iframe。我使用 go 按钮上的以下代码和下面的 iframe html 代码实现了这一点。

```
frame1.Visible = true;
frame1.Attributes["src"] = "http://freckles/bksb_ict/frmDiagnostic.aspx?" + args;

<iframe id="frame1" scrolling="auto" style="position:absolute; top:0; left:0;   height:100%; width:100%;" runat="server" visible="False">
 </iframe> 
```

这在 Visual Studio 中有效，并按预期显示了覆盖整个屏幕的 iframe，但在 iis 上部署时失败，iframe 中显示服务器应用程序不可用。

我动态设置 src 的原因是初始页面是搜索，按下显示的按钮之一可以获得正确的参数以发送到 iframe。

任何想法，如果这可以解决。我已经看到了涉及对象标签的可能替代方案，但不确定它是否最终会出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T08:51:01.157

请使用相对 url 来解决无效应用程序不可用的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T08:57:20.737

查看源代码并转到不涉及框架的 URL。可能是您传递的参数或您发送到的 URL 已损坏。

为什么不将 URL 放在框架标签中，只添加 args 而不是硬编码呢？

```
frame1.Attributes["src"] += args 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T10:20:49.303

我最终解决了这个问题，我的代码确实有效。结果是在部署它时，同一应用程序池中的 asp.net 版本不匹配。直到尝试同时显示两个页面才导致问题。将它们分成不同的应用程序池修复了它。

# c++ - JNI 与 C++ 对象实例

> ID：796845
> 
> 赞同：2
> 
> 时间：2009-04-28T08:40:48.217
> 
> 标签：c++, java-native-interface, instance

我刚刚开始了一份新工作。在这里，我们是使用 JNI（用于桥接 C++/Java）的新手。我是 JNI 的新手，所以请原谅我的菜鸟 :)

在我们的 (win32) Java 应用程序中，我们正在加载一个 C++ DLL。在 Java 端，我们有几个“SomeJClass”实例，每个实例都需要访问 DLL 端对应的“SomeCClass”实例。DLL 公开诸如 GlobalDoSomethingInC() 之类的入口点。这里我必须调用Doer::DoSomethingInC()的实例方法。所以我需要一种平滑的方式来映射各自的 this 指针。当 DLL 线程发现需要通知相应 Java 实例的有趣内容时，我还需要执行相同的映射。

我可以想到几种解决方案，但我不太喜欢它们。我的问题是，有没有比这更好的方法？

1 Java 调用 C:GetNewInstance()。这将返回一个实际上是指向新 C 实例的指针的 int。Java 将其存储在 m_myCInstance 中。然后 Java 调用 GlobalDoSomethingInC() 和 1a

```
// DLL global
void GlobalDoSomethingInC()
{
    // retrive this pointer
    //calling back to Java:  
    jobj tmpJ = NewGlobalRef( env, obj );
    Doer* myDoer = <reinterpret_cast>( Doer )tmpJ->GetMyCInstance();
    myDoer->DoSomething();
    DeleteGlobalRef( env, tmpJ );
    // Arrrrgh
} 
```

1b 或：

```
 // for **every call** that Java adds a parameter, 
    //which is the stored int:m_myCInstance, and
    Doer* myDoer = <reinterpret_cast>( Doer )instanceParam->DoSomethingInC();
    // Can we do better that this? 
```

2 对于从 C 调用到 Java，事情看起来，也许，更好

```
In the constructor C calls back into Java and stores
the Java instance reference 
    in a member variable. m_myJInstance.
    In all subsequent calls m_myJInstance can be used to call back Java.
    In the destructor we need to call DeleteGlobalRef( env, m_myJInstance ); 
```

我想还不错。但是存储对象引用确实很安全。 **我的意思是：当 GC 移动对象时会发生什么？**

3 我们目前的解决方案确实“有效”。但它属于[http://www.codinghorror.com/blog/](http://www.codinghorror.com/blog/) :)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T09:11:28.893

通常，这在一定程度上取决于您的环境。我只用过KNI，比JNI还要原始。我认为有些丑陋是不可避免的，因为您在两个系统中混合内存跟踪，其中只有一个系统具有 GC。

一般来说，我发现最好将所有 C 代码调用封装在处理讨厌的转换的函数中，我认为这是不可避免的。（顺便说一句，我在这里用 C 来表示非 Java 代码）

在 C 方面，Java 对象的移动绝对是​​一个潜在的问题。这将取决于您的平台，但我希望只要您在 lib 中，就不会发生 Java GC，因此您的对象是稳定的。您需要确定这一点。另一方面，如果不是这样，那你就完蛋了。假设是这种情况，您希望对暴露给 JNI 的函数进行隔离解引用/强制转换，以便您可以愉快地在所有被调用函数中使用普通 C 对象。

如果您可以让对象在任一侧超出范围，那么它可能会变得非常丑陋，因为那么任何一方都可能持有对您的对象的引用。在这里，我们在 Java 端使用了终结器，在 C 端使用了析构器。它不漂亮，但我认为这有点不可避免。

所以，简短的回答，它会有点丑陋，隔离两种语言之间接口周围的丑陋，这样对于大部分工作，无论是哪种语言，你都不必担心这些事情。

为存在于该接口上的对象创建一个基类也是值得的，因为在这里您还可以隔离一些丑陋的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T23:44:39.430

`jobject`是对象的不透明句柄。运行时实现可能会有所不同（请参阅 Android 2.x 与 4.x），但请相信它是一个不透明的对象。

当前的解决方案可能是正确的。如果必须将 a 存储`jobject`在本机代码中，则必须将其转换为全局引用——如果调用 NewGlobalRef，对象的引用计数会增加，并且在调用 DeleteGlobalRef 之前不会被释放（并且 GC 已经注意到它无法访问）

# windows-xp - 分页池内存或非分页池内存？？（windows驱动开发）

> ID：796848
> 
> 赞同：5
> 
> 时间：2009-04-28T08:41:56.607
> 
> 标签：windows-xp, kernel, device-driver

我是 Windows 驱动程序开发的新手。我只想知道，驱动程序中的全局变量将使用分页池内存还是非分页池内存？

谢谢并恭祝安康

纳瓦尼思

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T08:44:42.170

要看。非分页池应保留用于必须保留在 RAM 中的内存，因此，如果您正在执行可能受磁盘操作中的内存页面影响的关键操作，请使用非分页。

请参阅[此处](http://blogs.technet.com/markrussinovich/archive/2009/03/26/3211216.aspx)了解更多信息。

看看[这个](http://www.microsoft.com/whdc/driver/kernel/KMcode.mspx)（尽管它讨论的是 C++ 而不是 C），似乎默认情况下全局变量可以通过#pragma 定位。同样在 p22 上， 我们看到了如何做到这一点[。](http://people.msoe.edu/~atassim/atassi_WDM.pdf)最后在这里[讨论](http://www.osronline.com/showThread.cfm?link=27690)我们看到数据段默认情况下应该是不可分页的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T13:31:37.177

内核模式驱动程序中的全局变量是从 NonPagedPool 分配的。

你也可以使用设备扩展（当你调用 IoCreateDevice 时），它总是从非分页内存中分配的。

我希望这会有所帮助，马丁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-14T07:12:23.927

我找到的另一个很好的答案是：“非分页池是内核内存，当 Windows 用完可用的物理内存时，它不能被分页到页面文件中。驱动程序使用它来分配他们需要的内存。” 从[这里](https://serverfault.com/questions/590441/what-is-nonpaged-pool)

# javascript - 向生成的 URL 添加锚点

> ID：796850
> 
> 赞同：0
> 
> 时间：2009-04-28T08:42:09.510
> 
> 标签：javascript, jquery, append, anchor

我试图找到一个类似的例子并用它来回答我的问题，但我似乎无法让它工作，所以如果这听起来与其他问题相似，我深表歉意。

基本上，我使用 Terminal Four 的 Site Manager CMS 系统来构建我的网站。此工具允许您生成导航元素以在整个站点中使用。

我需要添加一些自定义的 JS 来为这些链接附加一个锚点。

生成的链接类似于：

```
<ul id="tab-menu">
<li><a href="/section/page">test link, can i rewrite and add an anchor!!!</a></li>
</ul> 
```

我可以编辑链接的 css 属性，但我不知道如何添加锚点。

我使用的 JQuery 如下：

```
<script type="text/javascript" src="http://jquery.com/src/jquery-latest.pack.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
    // everything goes here

    $("#tab-menu").children("li").each(function() { 
        $(this).children("a").css({color:"red"});

        });

    });
</script> 
```

提前感谢您的帮助。

稻田

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T08:49:41.643

有点重复： [How to change the href for a hyperlink using jQuery](https://stackoverflow.com/questions/179713/how-to-change-the-href-for-a-hyperlink-using-jquery)

只需复制旧的href并为其添加锚并将其粘贴回来

```
var link = $(this).children("a").attr("href");
$(this).children("a").attr("href", link+ "your own stuff"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T09:07:01.057

一个不错的基于 jQuery 的方法是使用 .get(index) 方法来访问 each() 函数中的原始 DOM 元素。然后，您可以访问 JavaScript 链接对象，该对象有一个名为“hash”的属性，表示 url 的锚部分。所以稍微修改你的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
    // everything goes here

        $("#tab-menu").children("li").children("a").each(function() {   
            $(this).css({color:"red"}).get(0).hash = "boom";
        });

    }); 
```

将“#tab_menu li”中的所有链接更改为红色，并将“#boom”附加到末尾。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T08:50:26.447

我现在可以使用以下命令来定位 html：

```
$(this).children("a").html("it works"); 
```

我假设：

```
$(this).children("a").href("something"); 
```

会编辑href，但我错了。

稻田

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-15T18:24:24.097

我不确定答案，我尝试

```
$("#tab-menu").children("li").children("a").each(function() {   
              //  $(this).css({color:"red"}).get(0).hash = "boom";
            var temp_url = $(this).href +'#an_anchor';//or var temp_url = $(this).attr('href');
          $(this).attr('href', temp_url);
    }); 
```

# c# - GTK# 和 Windows 窗体有什么区别？

> ID：796856
> 
> 赞同：10
> 
> 时间：2009-04-28T08:44:32.653
> 
> 标签：c#, winforms, mono, gtk, monodevelop

GTK# 和 windows 窗体有什么区别？他们完全不同吗？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-29T11:27:10.353

[gtk#](http://mono-project.com/GtkSharp)：

GTK# 是 Gtk+ 工具包的 .NET 绑定。该工具包是用 C 语言编写的，以提高速度和兼容性，而 GTK# 绑定提供了一个易于使用的面向对象的 API 以供托管使用。Mono 项目正在积极开发它，并且有各种使用它的实际应用程序（[Banshee](http://banshee-project.org/Main_Page)、[F-Spot](http://f-spot.org/Main_Page)、[Beagle](http://beagle-project.org/Main_Page)、[MonoDevelop](http://www.monodevelop.com/Main_Page)）。

一般来说，GTK# 应用程序是使用[MonoDevelop](http://www.monodevelop.com/Main_Page)编写的，它提供了一个用于创建 GTK# GUI 的可视化设计器。

平台：Unix、Windows、OSX

优点：

*   通过其 Gtk+ 遗产对可访问性的良好支持。
*   非常适合处理国际化环境的布局引擎，并且在不破坏应用程序的情况下适应字体大小。
*   应用程序与 Gnome 桌面集成。
*   Gtk+ 开发人员熟悉 API。
*   大型 Gtk+ 社区。
*   提供 Win32 端口，在 Windows XP 上具有原生外观。
*   API 在这一点上相当稳定，并且正在添加语法糖来改进它。
*   Unicode 支持非常出色。

缺点：

*   Gtk+ 应用程序在 MacOS X 上运行就像外国应用程序一样。
*   文档不完整。

* * *

[Windows.Forms](http://mono-project.com/WinForms)：

Windows.Forms 是 Microsoft 开发的对 Win32 工具包的绑定。作为数百万 Windows 开发人员（尤其是内部企业应用程序）使用的流行工具包，Mono 项目决定生成一个兼容的实现（Winforms），以允许这些开发人员轻松地将他们的应用程序移植到 Linux 和其他 Mono 平台上运行。

.Net 实现是对 Win32 工具包的绑定，而 Mono 实现是用 C# 编写的，以允许它在多个平台上工作。大多数 Windows.Forms API 都可以在 Mono 上运行，但是一些应用程序（尤其是第三方控件）偶尔会绕过 API 并直接 P/Invoke 到 Win32 API。这些调用可能必须更改才能在 Mono 上运行。

通常，Winforms 应用程序是使用 Microsoft 的 Visual Studio 或[SharpDevelop](http://www.icsharpcode.net/opensource/sd/)编写的，它们都提供了用于创建 Winforms GUI 的可视化设计器。

平台：Windows、Unix、OSX

优点：

*   存在大量文档（书籍、教程、在线文档）。
*   活跃的开发人员的大型社区。
*   移植现有 Windows.Forms 应用程序的最简单途径。

缺点：

*   固定布局的国际化可能会很棘手。
*   在非 Windows 平台上看起来很陌生。
*   调用 Win32 API 的代码不可移植。

* * *

资料来源：[选择正确的工具包](http://www.icsharpcode.net/opensource/sd/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-28T17:09:08.230

它们都是 GUI 工具包，各有优缺点。根据我的经验：

*   Winforms 不需要在 Windows 上安装，Gtk# 需要在 Windows 上安装。
*   Winforms 在 Visual Studio 中有一个设计器，Gtk# 有独立的设计器并在 MonoDevelop 中集成设计。
*   Winforms 绑定到 Windows，Gtk# 是跨平台的。
*   Winforms 很慢而且闪烁。Gtk 更快。
*   大多数 Winforms 控件都是标准 Windows 控件的包装器，并且提供的功能非常有限。Gtk 小部件功能更丰富。
*   Gtk 允许创建具有复杂布局的表单和小部件。Winforms 仅提供微不足道的布局变体，而 FlowLayout & TableLayout & AutoSize 太弱了，无法拥有调整大小并自动适应不同字体大小、不同分辨率的复杂表单。
*   Cairo 比 Gdi+ 更快且具有更多功能（Cairo 支持来自更多类型文件的输出和输入，例如 svg、pdf）
*   Gtk# 是开源的，winforms 不是
*   Winforms 和 Gtk# 具有 3rd-party 控件/小部件（但是，使用 Gtk# 对它们的需求较少，因为基本控件工作得非常好）。

简而言之，我不建议使用 Winforms（除非有充分的理由不具有比 .NET FW 更多的依赖项），而是使用 Gtk# 或 WPF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T08:57:33.887

它们是用于创建窗口应用程序的不同图形工具包，具有不同的来源。

GTK# 是 GTK 库的绑定，主要用于 linux/unix。它也适用于 Windows，但它不是为其设计的本机环境。

Winforms 是另一个工具包，这个来自微软。

它们是完全不同的 API，用于实现相同的结果，但每个都更适合一个平台。

如果您正在.net 中寻找多平台窗口，Qt 可能是一个选择，因为它获得了 LGPL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T08:46:45.240

简而言之：是的

两者都是 GUI-Tookits，但 WinForms（顾名思义）主要是为 Windows 开发的。GTK 是为 Gimp 开发的，是一种用于多操作系统 gui 工具包的方法。

如果您的应用程序只在 Windows 上运行，在大多数情况下您应该使用 WinForms。

如果您的应用程序将在不同的操作系统（如 linux、bsd、windows、macos 等）下运行，您会更喜欢 GTK。

为了更好的解释看[这里](http://mono-project.com/Gui_Toolkits)。

# c++ - 我可以在“\n”上停止 std::cout 刷新吗？

> ID：796865
> 
> 赞同：7
> 
> 时间：2009-04-28T08:49:28.603
> 
> 标签：c++, iostream, stdio, io-buffering

根据[这篇文章](http://www.cpptalk.net/n-and-flush-cout-vt9984.html)`\n`，当 std::cout连接到交互式设备（例如终端窗口）时，它会自动刷新。否则（例如，当通过管道传输到文件时）它将完全缓冲，并且只会在`.flush()`or上刷新`std::endl`。

有没有办法在 Microsoft Visual C++ 中覆盖此行为，以便我可以选择是完全缓冲模式还是行缓冲模式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-12-31T06:40:35.217

与 anon（2009 年 4 月 28 日）的回答相反，这种行为与操作系统或“控制台软件”无关。

C++ 的`<iostream>`流旨在与 C 的`<stdio.h>`流互操作。目标是允许`std::cout`混合使用 of 和`printf`/ `puts`。为了实现这一点，`std::cout`'s在 C 的流`streambuf`之上实现。当标准输出连接到终端设备时，`stdout`实际上是行缓冲的 C。`stdout`

您可以调用[`std::ios_base::sync_with_stdio(false)`](http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio)（在您的程序使用任何 C++ 的标准 I/O 流之前）告诉 C++ 流库直接与底层文件描述符通信，而不是在 C 的流库之上分层。这完全避免了 C 的`stdout`流并加速了 C++ 的 I/O 流，但代价是两个库不再很好地混合。

另一种方法是通过调用无条件设置`stdout`为完全缓冲[`std::setvbuf(stdout, nullptr, _IOFBF, BUFSIZ)`](http://en.cppreference.com/w/cpp/io/c/setvbuf)。然后，即使`std::cout`仍在写入`stdout`，也不会`stdout`在每个换行符后刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T08:54:43.300

这不是 C++ 的问题（没有语言要求 \n 刷新任何内容），而是您的操作系统和/或控制台软件。如果控制台想要在看到换行符时刷新其缓冲区，那么它可以，我猜大多数人都会这样做。请注意，区分 C++ 运行时的缓冲区（在某种程度上可以由您的 C++ 代码控制）和控制台应用程序的缓冲区（它无法控制）是很重要的。

仅供参考，标准 iostream 库中有一个名为**unitbuf**的标志，如果设置该标志，则会在每次输出操作后刷新缓冲区。例如，它是为 std::cerr 流设置的。但是，这与 '\n' 字符无关，因为您可以在单个操作中输出多个 '\n' 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T08:58:24.493

只要觉得合适，实现就可以自由刷新。无论是否刷新，供应商都不同`\n`。

`ios_base& nounitbuf(ios_base& str);`我可以从我的 C++0x 草稿中看到一些东西。试一试。这是标准 C++ 为您提供的唯一内容。

# iphone - flv流解码，3gp编码

> ID：796872
> 
> 赞同：0
> 
> 时间：2009-04-28T08:51:05.290
> 
> 标签：iphone, streaming, flv, 3gp

为了实现 flv 到 3gp 的转换，我需要查看任何语言和其他资源的开源项目吗？最好是流式传输，我的意思是在下载 flv 的最后一部分之前返回 3gp 的第一部分。

或者是否已经实施了任何类似的服务 - 我的目标是拥有类似 [http://converter.org?source=sourceUrl.flv&targetFormat=3gp](http://converter.org?source=sourceUrl.flv&targetFormat=3gp)的东西，我可以将其提供给 3gp 播放器，在我的情况下 - 在 iPhone 上，而不是等到服务器下载整个flv。

更新： ffmpeg 在这里做得很好，只是

```
ffmpeg -i input.flv output.mp4 
```

就是这样。但是输出文件只有在转换完成后才能使用。流媒体仍然是一个悬而未决的问题。有 ffserver 可以进行某种流式传输，但我无法使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-29T09:48:50.590

我不确定这是否可能，但如果有一件事应该这样做。它是[http://www.ffmpeg.org/](http://www.ffmpeg.org/) ..

它可以将任何东西转换为在线平台上的任何东西。不知道它是否支持流媒体，但绝对是在线视频转换的最佳解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-03T21:36:45.180

好吧，这可能有点晚了，但是要在线流式传输视频，您需要一个*媒体流服务器*来通过特定的流式传输协议（即 HTTP、HTTPS、RTSP、RTMP）传送视频。我也一直在寻找这样的“实时”转码服务，但到目前为止我发现的最接近的是 Video CDN，它非常昂贵，而且格式/支持也有限。真正好的是其中一个媒体服务器添加实时转码功能。在撰写本文时，据我所知不存在此类服务。

媒体流服务器的前 10 个最受欢迎的选项是（恕我直言）：

1.  *VideoLAN* - VLC 媒体播放器（适用于快速测试和概念验证）
2.  *Kaltura* - 开源视频平台
3.  *Real Media - Helix Universal Streaming Server（可能是***3GP** over RTSP的最佳选择）
4.  *Apple* - Darwin Streaming Server / Quicktime (Live) Broadcaster (最适合 iPhone/iPad)
5.  *Red5* - 开源**Flash**流媒体服务器
6.  *Adobe* - **Flash**流媒体服务器
7.  *Wowza* - 媒体服务器
8.  *FluMotion* - 开源多媒体流
9.  *Microsoft* - Windows 媒体服务器（**AVI**、**WMV**、**Silverlight**和其他格式）
10.  *FreeCast* - **OGG** Theoris（视频）和 OGG（音频）流/转换平台

正如您所看到的，有许多流式传输选项，您可以从在同一服务器上托管视频并通过 HTTP 传送到台式计算机浏览器开始（最简单的开始方法是反复试验）。每个都在支持的协议和转码方面提供不同的功能，但没有一个是真正实时的，因为您提到您可以在哪里输入源视频并以您选择的格式（即 3GP）获得输出视频。我个人的选择是从 VLC 开始在家庭网络上进行小规模测试，因为它基本上是桌面视频的瑞士军刀，也可以作为它可以播放的任何格式的服务器（尽管它可能将其流式传输到公共互联网会更加复杂，甚至更难一直传输到私有运营商网络上的单个设备， [http://forum.videolan.org/viewtopic.php?f=4&t=45782](http://forum.videolan.org/viewtopic.php?f=4&t=45782)

转至 MP4 的一些基本转码说明（iPhone/iPad/iPod 需要）： [http ://wiki.videolan.org/MPEG-4](http://wiki.videolan.org/MPEG-4)

我也同意 FFMPEG 是迄今为止视频转换的最佳解决方案，因为它还支持 3GP，您至少可以开始在您自己的测试服务器上进行转换，您可能想尝试以下**PHP 类项目： [http：/ /www.phpclasses.org/package/5977-PHP-Manipulate-video-files-using-the-ffmpeg-program.html](http://www.phpclasses.org/package/5977-PHP-Manipulate-video-files-using-the-ffmpeg-program.html)**

以我的经验，这对于加速与 FFMPEG 主要是命令行和有时笨重的界面的 Web 交互做出了极好的贡献。谁知道呢，也许你会建立第一个实时转码服务，我会是第一个注册为客户和/或作为贡献者来帮助你的人！

# iphone - 有什么理由让我更喜欢 NSArray 而不是 NSMutableArray？

> ID：796875
> 
> 赞同：1
> 
> 时间：2009-04-28T08:53:24.677
> 
> 标签：iphone, cocoa-touch, collections

我觉得当我使用 NSArray 时，我可能会在将来的某个时间限制自己。是否有充分的理由更喜欢这种“原始”而不是可变的“复杂”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T09:05:58.860

在您的代码中使用非可变结构并没有太大的约束——如果您以后需要修改它，您可以更改为使用可变结构。如果您将其放在外部界面中，请注意它可能会受到更多限制。不可变的主要优点是您可以获得线程安全并且更容易概念化代码 - 如果将可变性排除在等式之外，您就不必担心。这就是为什么我们有`const`约束等等 - 如果您不必修改数据，最好提前说出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T09:27:22.583

原因之一是[YAGNI](http://en.wikipedia.org/wiki/You_Ain't_Gonna_Need_It)原则。如果您不需要可变数组，请不要使用它。因此，您的代码将更易于理解、测试和维护。

请记住，代码不仅由编译器处理，还由编码人员或测试人员读取。使用`NSMutableArray`而不是`NSArray`对他们有意义。向他们提供有关您意图的虚假信息可能会适得其反。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T09:41:28.743

除了来自 Mssrs INFORMATION 和 mouviciel 的答案之外，NSArray 比 NSMutableArray 更快。这适用于所有 stati/mutable 集合。

# wpf - 如何保持 WPF 元素在背景图像上的相对位置

> ID：796881
> 
> 赞同：7
> 
> 时间：2009-04-28T08:54:22.757
> 
> 标签：wpf, layout

我是 WPF 的新手，所以以下问题的答案可能很明显，但对我来说不是。我需要显示一个用户可以在其中设置标记的图像（例如：您可能想用矩形在照片上标记一个人的脸），但是标记在缩放图像时需要保持它们的相对位置。

目前我通过使用 a`Canvas`并将 a 设置`ImageBrush`为背景来做到这一点。这将显示图像，我可以`Label`在图像顶部添加元素（作为矩形的替换）。但是当我设置这样的标签时，它的位置是绝对的，所以当底层图片被缩放（因为用户将窗口拖得更大）`Label`时，它会保持在它的绝对位置（比如 100,100）而不是移动到保持的新位置它与底层图像“同步”。

简而言之：当我在一个人的眼睛上设置一个标记时，它不应该在缩放窗口后放在人的耳朵上。

有关如何在 WPF 中执行此操作的任何建议？也许`Canvas`首先是错误的方法？我可以在代码中保留一组标记，并在每次调整窗口大小时重新计算它们的位置，但我希望有一种方法可以让 WPF 为我工作:-)

我很想听听你对此的看法。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-01-27T15:52:40.893

虽然这篇文章很旧并且已经回答，但它仍然对其他人有帮助，所以我会添加我的答案。

我想出了两种方法来保持元素的相对位置`Canvas`

1.  多值转换器
2.  附加属性

这个想法是在 [0,1] 范围内提供两个值 (x,y)，这将定义元素相对于`Canvas`. 这些 (x,y) 值将用于计算和设置正确的`Canvas.Left`值`Canvas.Top`。

为了将元素的**中心**放置在相对位置，我们需要`ActualWidth`and元素`ActualHeight`的`Canvas` **and**。

# 多值转换器

**多值转换器`RelativePositionConverter`：**

此转换器可用于在与`Canvas.Left`和绑定时相对定位 X 和/或 Y 位置`Canvas.Top`。

```
public class RelativePositionConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        if (values?.Length < 2 
            || !(values[0] is double relativePosition)
            || !(values[1] is double size) 
            || !(parameter is string) 
            || !double.TryParse((string)parameter, out double relativeToValue))
        {
            return DependencyProperty.UnsetValue;
        }

        return relativePosition * relativeToValue - size / 2;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

**的示例用法`RelativePositionConverter`：**

宽度和高度绑定`Canvas`到. `Image`有`Canvas`一个子元素 - an`Ellipse`与`Canvas`(and `Image`) 保持相对位置。

```
<Grid Margin="10">
    <Image x:Name="image" Source="Images/example-graph.png" />
    <Canvas Background="#337EEBE8" Width="{Binding ElementName=image, Path=ActualWidth}" Height="{Binding ElementName=image, Path=ActualHeight}">
        <Ellipse Width="35" Height="35" StrokeThickness="5" Fill="#D8FFFFFF" Stroke="#FFFBF73C">
            <Canvas.Left>
                <MultiBinding Converter="{StaticResource RelativePositionConverter}" ConverterParameter="0.461">
                    <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType=Canvas}" Path="ActualWidth" />
                    <Binding RelativeSource="{RelativeSource Self}" Path="ActualWidth" />
                </MultiBinding>
            </Canvas.Left>
            <Canvas.Top>
                <MultiBinding Converter="{StaticResource RelativePositionConverter}" ConverterParameter="0.392">
                    <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType=Canvas}" Path="ActualHeight" />
                    <Binding RelativeSource="{RelativeSource Self}" Path="ActualHeight" />
                </MultiBinding>
            </Canvas.Top>
        </Ellipse>
    </Canvas>
</Grid> 
```

# 附加属性

**附加属性`RelativeXProperty`和：`RelativeYProperty``RelativePositionProperty`**

*   `RelativeXProperty`并且`RelativeYProperty`可用于通过两个单独的附加属性来控制 X 和/或 Y 相对定位。
*   `RelativePositionProperty`可用于通过单个附加属性控制 X 和 Y 相对定位。

```
public static class CanvasExtensions
{
    public static readonly DependencyProperty RelativeXProperty =
        DependencyProperty.RegisterAttached("RelativeX", typeof(double), typeof(CanvasExtensions), new PropertyMetadata(0.0, new PropertyChangedCallback(OnRelativeXChanged)));

    public static readonly DependencyProperty RelativeYProperty =
        DependencyProperty.RegisterAttached("RelativeY", typeof(double), typeof(CanvasExtensions), new PropertyMetadata(0.0, new PropertyChangedCallback(OnRelativeYChanged)));

    public static readonly DependencyProperty RelativePositionProperty =
        DependencyProperty.RegisterAttached("RelativePosition", typeof(Point), typeof(CanvasExtensions), new PropertyMetadata(new Point(0, 0), new PropertyChangedCallback(OnRelativePositionChanged)));

    public static double GetRelativeX(DependencyObject obj)
    {
        return (double)obj.GetValue(RelativeXProperty);
    }

    public static void SetRelativeX(DependencyObject obj, double value)
    {
        obj.SetValue(RelativeXProperty, value);
    }

    public static double GetRelativeY(DependencyObject obj)
    {
        return (double)obj.GetValue(RelativeYProperty);
    }

    public static void SetRelativeY(DependencyObject obj, double value)
    {
        obj.SetValue(RelativeYProperty, value);
    }

    public static Point GetRelativePosition(DependencyObject obj)
    {
        return (Point)obj.GetValue(RelativePositionProperty);
    }

    public static void SetRelativePosition(DependencyObject obj, Point value)
    {
        obj.SetValue(RelativePositionProperty, value);
    }

    private static void OnRelativeXChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (!(d is FrameworkElement element)) return;
        if (!(VisualTreeHelper.GetParent(element) is Canvas canvas)) return;

        canvas.SizeChanged += (s, arg) =>
        {
            double relativeXPosition = GetRelativeX(element);
            double xPosition = relativeXPosition * canvas.ActualWidth - element.ActualWidth / 2;
            Canvas.SetLeft(element, xPosition);
        };
    }

    private static void OnRelativeYChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (!(d is FrameworkElement element)) return;
        if (!(VisualTreeHelper.GetParent(element) is Canvas canvas)) return;

        canvas.SizeChanged += (s, arg) =>
        {
            double relativeYPosition = GetRelativeY(element);
            double yPosition = relativeYPosition * canvas.ActualHeight - element.ActualHeight / 2;
            Canvas.SetTop(element, yPosition);
        };
    }

    private static void OnRelativePositionChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (!(d is FrameworkElement element)) return;
        if (!(VisualTreeHelper.GetParent(element) is Canvas canvas)) return;

        canvas.SizeChanged += (s, arg) =>
        {
            Point relativePosition = GetRelativePosition(element);
            double xPosition = relativePosition.X * canvas.ActualWidth - element.ActualWidth / 2;
            double yPosition = relativePosition.Y * canvas.ActualHeight - element.ActualHeight / 2;
            Canvas.SetLeft(element, xPosition);
            Canvas.SetTop(element, yPosition);
        };
    }
} 
```

**`RelativeXProperty`和的示例用法`RelativeYProperty`：**

```
<Grid Margin="10">
    <Image x:Name="image" Source="Images/example-graph.png" />
    <Canvas Background="#337EEBE8" Width="{Binding ElementName=image, Path=ActualWidth}" Height="{Binding ElementName=image, Path=ActualHeight}">
        <Ellipse Width="35" Height="35" StrokeThickness="5" Fill="#D8FFFFFF" Stroke="#FFFBF73C" 
                    local:CanvasExtensions.RelativeX="0.461" 
                    local:CanvasExtensions.RelativeY="0.392">
        </Ellipse>
    </Canvas>
</Grid> 
```

**的示例用法`RelativePositionProperty`：**

```
<Grid Margin="10">
    <Image x:Name="image" Source="Images/example-graph.png" />
    <Canvas Background="#337EEBE8" Width="{Binding ElementName=image, Path=ActualWidth}" Height="{Binding ElementName=image, Path=ActualHeight}">
        <Ellipse Width="35" Height="35" StrokeThickness="5" Fill="#D8FFFFFF" Stroke="#FFFBF73C" 
                    local:CanvasExtensions.RelativePosition="0.461,0.392">
        </Ellipse>
    </Canvas>
</Grid> 
```

**听听它的样子：**`Ellipse`作为a 的孩子的 The that`Canvas`相对于`Canvas`（和 an `Image`）保持相对位置。 [![在此处输入图像描述](https://i.stack.imgur.com/nma67.gif)](https://i.stack.imgur.com/nma67.gif)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-28T14:06:01.227

好的，这似乎有效。这是我所做的：

1.  写了一个自定义转换器
2.  每次用户单击画布时，我都会创建一个新标签（稍后将与 UserComponent 交换），使用我的转换器类创建绑定并进行初始计算以从鼠标的绝对位置获取画布的相对位置指针

这是转换器的一些示例代码：

```
public class PercentageConverter : IValueConverter
{
    /// <summary>
    /// Calculates absolute position values of an element given the dimensions of the container and the relative
    /// position of the element, expressed as percentage
    /// </summary>
    /// <param name="value">Dimension value of the container (width or height)</param>
    /// <param name="parameter">The percentage used to calculate new absolute value</param>
    /// <returns>parameter * value as Double</returns>
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //input is percentage
        //output is double
        double containerValue = System.Convert.ToDouble(value, culture.NumberFormat);
        double perc;
        if (parameter is String)
        {
            perc = double.Parse(parameter as String, culture.NumberFormat);
        }
        else
        {
            perc = (double)parameter;
        }
        double coord = containerValue * perc;
        return coord;
    }

    /// <summary>
    /// Calculates relative position (expressed as percentage) of an element to its container given its current absolute position
    /// as well as the dimensions of the container
    /// </summary>
    /// <param name="value">Absolute value of the container (width or height)</param>
    /// <param name="parameter">X- or Y-position of the element</param>
    /// <returns>parameter / value as double</returns>
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        //output is percentage
        //input is double
        double containerValue = System.Convert.ToDouble(value, culture.NumberFormat);
        double coord = double.Parse(parameter as String, culture.NumberFormat);
        double perc = coord / containerValue;
        return perc;
    }
} 
```

以下是在 XAML 中创建绑定的方法（请注意，我的画布被声明为`<Canvas x:Name="canvas" ... >`）：

```
<Label Background="Red" ClipToBounds="True" Height="22" Name="label1" Width="60"
           Canvas.Left="{Binding Converter={StaticResource PercentageConverter}, ElementName=canvas, Path=ActualWidth, ConverterParameter=0.25}"
           Canvas.Top="{Binding Converter={StaticResource PercentageConverter}, ElementName=canvas, Path=ActualHeight, ConverterParameter=0.65}">Marker 1</Label> 
```

然而，更有用的是在代码中创建标签：

```
private void canvas_MouseDown(object sender, MouseButtonEventArgs e)
{
    var mousePos = Mouse.GetPosition(canvas);
    var converter = new PercentageConverter();

    //Convert mouse position to relative position
    double xPerc = (double)converter.ConvertBack(canvas.ActualWidth, typeof(Double), mousePos.X.ToString(), Thread.CurrentThread.CurrentCulture);
    double yPerc = (double)converter.ConvertBack(canvas.ActualHeight, typeof(Double), mousePos.Y.ToString(), Thread.CurrentThread.CurrentCulture);

    Label label = new Label { Content = "Label", Background = (Brush)new BrushConverter().ConvertFromString("Red")};

    //Do binding for x-coordinates
    Binding posBindX = new Binding();
    posBindX.Converter = new PercentageConverter();
    posBindX.ConverterParameter = xPerc;
    posBindX.Source = canvas;
    posBindX.Path = new PropertyPath("ActualWidth");
    label.SetBinding(Canvas.LeftProperty, posBindX);

    //Do binding for y-coordinates
    Binding posBindY = new Binding();
    posBindY.Converter = new PercentageConverter();
    posBindY.ConverterParameter = yPerc;
    posBindY.Source = canvas;
    posBindY.Path = new PropertyPath("ActualHeight");
    label.SetBinding(Canvas.TopProperty, posBindY);

    canvas.Children.Add(label);
} 
```

所以基本上，这几乎就像我的第一个想法：使用相对位置而不是绝对位置，并在每次调整大小时重新计算所有位置，只有这样它是由 WPF 完成的。正是我想要的，谢谢马丁！

**但是请注意**，这些示例仅在内部的图像`ImageBrush`与周围的尺寸完全相同的情况下才有效`Canvas`，因为这种相对定位不考虑边距等。我将不得不调整它

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-28T09:16:13.687

在我的脑海中，您可以编写一个转换器类，该类将采用百分比并返回绝对位置。例如，如果您的窗口为 200 X 200，并且当您将窗口缩放到 400 X 400 时将标签放置在 100 X 100 处，则标签将保持原位（根据您的原始问题）。但是，如果您使用转换器，则可以将标签位置设置为其父容器大小的 50%，然后随着窗口的缩放，标签将随之移动。

您可能还需要对宽度和高度使用相同的转换器，以便它的大小也增加以匹配。

抱歉缺少细节，如果有机会，我会在稍后使用示例代码对其进行编辑。

* * *

编辑添加

[这个问题](https://stackoverflow.com/questions/717299?sort=votes#sort-top)给出了一些百分比转换器的代码。

# crystal-reports - 图表标题的格式

> ID：796882
> 
> 赞同：0
> 
> 时间：2009-04-28T08:54:28.450
> 
> 标签：crystal-reports, formatting, charts

你们中有人知道在 Crystal Reports 中格式化图表标题的方法吗？我有一个代表特定年份的数字，这个数字长 4 位。我希望标题显示如下：

> 2009

但目前显示的方式是

> 2.009

编辑：年份是从数据库动态加载的，在数据​​库中它们存储为我使用 year 函数选择的日期时间字段...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-28T09:11:44.227

我对水晶报表一无所知。您应该在问题标题中或至少在问题本身中提及这一点，而不仅仅是在标签中。

我想您可以使用真实的 DateTime 对象（而不是 int）作为日期，并使用一些函数来格式化日期以仅显示年份。喜欢[这个人](http://www.c-sharpcorner.com/UploadFile/mahesh/DateFormatInCR06132007092248AM/DateFormatInCR.aspx)：

> 例如，我需要如下日期格式： 23-Mar-2007 以下公式可以解决问题： ToText({MYFIELDNAME }, "dd-MMM-yyyy")

这与字段名称有关，但我想您可以对图表的标题使用相同的函数（ToText）？

您还可以将年份存储在字符串中。

# delphi - 如何外壳到另一个应用程序并让它以德尔福形式出现

> ID：796883
> 
> 赞同：11
> 
> 时间：2009-04-28T08:54:41.913
> 
> 标签：delphi, shellexecute, setparent

在 Delphi 中，我多年来一直使用 ShellExecute 来启动（并可选择等待）其他应用程序。但现在，我需要让这些应用程序之一出现在我的 Delphi 应用程序表单之一中。我已经尝试将下面的代码作为一个简单的测试来打开记事本（它确实如此）并在我的表单上的 PAnel1 中显示结果（它没有）。某个好心人可以让我走上正轨吗？谢谢

```
var
  Rec          : TShellExecuteInfo;
  wnd : HWnd;
const
  AVerb = 'open';
  AParams = '';
  AFileName = 'Notepad.exe';
  ADir = '';
begin
  FillChar(Rec, SizeOf(Rec), #0);

  Rec.cbSize       := SizeOf(Rec);
  Rec.fMask        := SEE_MASK_NOCLOSEPROCESS;
  Rec.lpVerb       := PChar( AVerb );
  Rec.lpFile       := PChar( AfileName );
  Rec.lpParameters := PChar( AParams );
  Rec.lpDirectory  := PChar( Adir );
  Rec.nShow        := sw_Show;

  ShellExecuteEx(@Rec);

  wnd := Windows.FindWindow( 'Notepad', nil );
  Windows.SetParent( Wnd, PAnel1.Handle );

end; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-28T09:06:06.660

省略了所有错误检查，但这应该可以帮助您入门：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Rec: TShellExecuteInfo;
const
  AVerb = 'open';
  AParams = '';
  AFileName = 'Notepad.exe';
  ADir = '';
begin
  FillChar(Rec, SizeOf(Rec), #0);

  Rec.cbSize       := SizeOf(Rec);
  Rec.fMask        := SEE_MASK_NOCLOSEPROCESS;
  Rec.lpVerb       := PChar( AVerb );
  Rec.lpFile       := PChar( AfileName );
  Rec.lpParameters := PChar( AParams );
  Rec.lpDirectory  := PChar( Adir );
  Rec.nShow        := SW_HIDE;

  ShellExecuteEx(@Rec);
  WaitForInputIdle(Rec.hProcess, 5000);

  fNotepadHandle := Windows.FindWindow( 'Notepad', nil );
  Windows.SetParent( fNotepadHandle, Handle );

  Resize;
  ShowWindow(fNotepadHandle, SW_SHOW);
end;

procedure TForm1.FormResize(Sender: TObject);
begin
  if IsWindow(fNotepadHandle) then begin
    SetWindowPos(fNotepadHandle, 0, 0, 0, ClientWidth, ClientHeight,
      SWP_ASYNCWINDOWPOS);
  end;
end; 
```

您绝对应该做的是枚举新进程的窗口，而不是简单地使用*FindWindow()*返回的任何窗口句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-11-04T16:05:18.160

```
var
  URL: string;
begin
  URL:= DBMemoURL.Text;
  // ShellExecute(self.WindowHandle,'open', PChar(URL), nil, nil, SW_SHOW); //default browser
     ShellExecute(self.WindowHandle,'open','chrome.exe', PChar(URL), nil, SW_SHOW); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:05:18.487

如果可能的话，这将是一个棘手的问题。

我见过适用于基于文本的应用程序的方法——它们通常会在过程发生时捕获标准输出并将其放入文本控件中。

但是您所说的是一个完全成熟的图形应用程序（记事本，尽管处理文本，显示像素，而不是字符代码）。

因此，除非记事本提供了一个界面，您可以：

*   请求缓冲区中的任意字符；和
*   向程序发送任意击键，我会说你完全不走运。

绝对是一个杂物，但一种选择是持续监视记事本窗口并确保它始终叠加在您的表单客户区域上。这非常可怕，因为您必须阻止它移动、调整大小、最小化等等，*并*保持它的 z 顺序刚好在您的应用程序之上。我不希望对我最大的敌人提出这些要求。

您是否考虑过使用专门为 Delphi 构建的编辑器控件（或您可以嵌入的 ActiveX 编辑器）？这可能是一个更好的方法。

# visual-studio-2008 - Javascript未在VS2008中执行更改

> ID：796886
> 
> 赞同：0
> 
> 时间：2009-04-28T08:56:07.697
> 
> 标签：visual-studio-2008

我有一个 MVC，并且正在使用 JS 和 JQuery。

我有 VS2008 使用开发服务器。

我在 JS 文件“SearchControl.js”中添加了一些 javascript 并且运行良好。

然后我做了一个改变，由于某种原因，它没有达到我输入的制动点。

所以我在一些旧代码上放了一个断点，它会中断，但会在 VS 中打开一个名为“SearchControl.js [动态]”的新文件，其中不包含我的新代码。

JS文件是否被缓存？我试图关闭 VS 并再次尝试同样的事情。到底是怎么回事？？

马尔科姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-28T16:06:40.013

这个 JS 文件是嵌入式程序集吗？如果是这样，请确保您已重新编译并将包含 JS 文件的程序集放入 GAC。重置 IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T09:32:12.680

您可以尝试将您的 js 文件从 SearchControl.js 重命名为类似 SearchControl-1.0.js 以强制浏览器获取文件的新版本？

# asp.net - 用于测试网站可访问性的屏幕阅读器

> ID：796887
> 
> 赞同：18
> 
> 时间：2009-04-28T08:56:08.133
> 
> 标签：asp.net, accessibility, screen-readers

我的网站旨在满足无障碍指南。

我希望这意味着屏幕阅读器应该能很好地与他们一起工作......但我有两个问题：

*   这是一个公平的假设吗？
*   是否有任何免费/便宜的屏幕阅读器客户端可用于测试或在线模拟器？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-28T10:13:54.360

仅仅因为某些东西符合准则并不意味着它可以保证是可访问的，所有屏幕阅读器都有不同的怪癖。我是一个完全失明的人，所以屏幕阅读器的评论如下。

请注意，这是一篇相当长的帖子，所以我在顶部对其进行了总结。总之，如果您想确保您的网站大部分可访问，请使用 NVDA，如果您想确保在政府工作的盲人能够使用您的网站使用 Jaws 进行测试，如果您想更加安全使用 Window -Eyes 和 Orca 也要进行测试。

[NVDA](http://nvda-project.org)是一个相当新的开源屏幕阅读器。它不如一些商业屏幕阅读器那么好，但它可以完成工作。我想说，如果一个网站与 NVDA 一起使用，它很可能与大多数其他屏幕阅读器一起使用。NVDA 的一个问题是它的可访问性仅在 Firefox 中非常好，因此您必须使用它来进行测试。

[Jaws](https://www.freedomscientific.com/Products/software/JAWS/)是目前使用最广泛的屏幕阅读器。您可以下载一次运行 40 分钟的演示，如果您想再次运行，则需要重新启动。如果您想确保 508 合规性，这可能是可行的方法，因为 Jaws 是美国政府使用的屏幕阅读器。

[Window-Eyes](http://www.gwmicro.com/Window-Eyes/)是第二常用的屏幕阅读器。我对此没有任何经验，但有人告诉我，就互联网可访问性而言，它非常好。[Orca](http://live.gnome.org/Orca)是 gnome 中内置的屏幕阅读器，可与 Firefox 和 Linux 一起使用。它内置在 Ubuntu 中。大约一年半前我尝试过它，这绝对是可怕的，但我被告知它变得更好了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T09:05:20.483

[NVDA](http://www.nvda-project.org/)是一个免费选项：

> NonVisual Desktop Access (NVDA) 是适用于 Microsoft Windows 操作系统的免费开源屏幕阅读器。它通过合成语音和盲文提供反馈，使盲人或视力受损的人能够访问运行 Windows 的计算机，成本不高于有视力的人。主要功能包括对 20 多种语言的支持以及完全从 USB 驱动器运行而无需安装的能力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T09:12:51.260

> 这是一个公平的假设吗？

不，即使您认为自己非常了解可访问性的来龙去脉，也只有测试才能真正告诉您这一点。

> 是否有任何免费/便宜的屏幕阅读器客户端可用于测试或在线模拟器？

已经提到的[NVDA](http://www.nvda-project.org/)看起来是一个可行的选择，或者您可以下载[JAWS](https://www.freedomscientific.com/Products/software/JAWS/)的试用版，我认为它是 Windows 上使用最广泛的屏幕阅读器。如果您对可访问性非常认真，并且需要进行持续测试，您可能只想考虑购买一份副本。

最后一点，听起来您已经知道这一点，但是没有多少自动可访问性测试可以真正告诉您您的网站是否可访问，只有真实世界的测试才能做到这一点！这就是你正在做的事情，做得很好。

# c# - NHibernate Linq 和 DistinctRootEntity

> ID：796889
> 
> 赞同：4
> 
> 时间：2009-04-28T08:56:23.000
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

当我执行以下查询时，我收到一个异常，告诉我“feedItemQuery”包含多个项目（因此 SingleOrDefault 不起作用）。

这是使用没有 DistinctRootEntity 转换器的 Criteria api 时的预期行为，但是在使用 linq 时，我希望获得一个根实体（FeedItem，其属性 Ads（ICollection 的）包含所有广告）。

有没有办法告诉 NHibernate.Linq 使用 DistinctRootEntity 转换器？

我的查询：

```
var feedItemQuery = from ad in session.Linq<FeedItem>().Expand("Ads")
                   where ad.Id == Id
                   select ad;

var feedItem = feedItemQuery.SingleOrDefault(); // This fails !? 
```

映射：

```
<class name="FeedItem" table="FeedItems" proxy="IFeedItem">
    <id name="Id" type="Guid">
        <generator class="guid.comb"></generator>
    </id>
 ...
    <set name="Ads" table="Ads">
        <key column="FeedItemId" />
        <one-to-many class="Ad" />
    </set>
</class> 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-01T13:27:28.620

您可以使用 RegisterCustomAction 方法来设置结果转换器：

```
var linqsession = session.Linq<FeedItem>();
linqsession.QueryOptions.RegisterCustomAction(c => c.SetResultTransformer(new DistinctRootEntityResultTransformer()));
var feedItemQuery = from ad in linqsession.Expand("Ads")
                    where ad.Id == Id
                    select ad 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T22:03:31.527

var feedItemQuery = from ad in session.Linq().Expand("Ads")
where ad.Id == Id
select ad**.FirstOrDefault();**

# math - 在 Web 上编写数学方程的最佳方法是什么？

> ID：796890
> 
> 赞同：43
> 
> 时间：2009-04-28T08:56:35.560
> 
> 标签：math, mathjax, mathml, jqmath

我正在研究与数学相关的网页，并正在寻找一种将数学方程式轻松写入网页的解决方案。目前有几种解决方案可供我使用：

*   使用 LaTeX 并将它们作为图像发布在我的网页上。
*   使用 MathML

这两种解决方案都不理想，而且似乎有些过时。用图像替换应该是文本的内容绝不是一个好主意，而且 MathML 并不兼容所有浏览器/操作系统。

我希望有一个使用图像或 MathML 的现代解决方案，也许是利用 sIFR 来显示数学方程的东西？经过一番研究，我仍然没有找到任何真正的解决方案。

请注意，我要求一种发布方程式的新方法。我不希望图像成为网页上显示的输出，而是希望将这些方程式呈现为*文本*数据。MathML 是我最接近的，但仍然不理想。我一直想知道是否可以使用像 sIFR 这样的替代工具在 Flash 中创建方程式。有人在这方面有什么建议吗？

**编辑：**自从我上次更新这篇文章已经有一段时间了，但是随着 HTML5 被浏览器采用，游戏中出现了一个新的玩家，它将 LaTeX 和 MathML 重新引入混合，[MathJax！](http://www.mathjax.org/). **MathJax 绝对是必经之路！**

**类似问题：** [网络上的数学方程式](https://stackoverflow.com/questions/775168)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-29T22:19:42.467

jsMath包是一个使用 LaTeX 标记和本机字体的选项**。**引用他们的网页[http://www.math.union.edu/~dpvc/jsMath/](http://www.math.union.edu/~dpvc/jsMath/)：

> jsMath 包提供了一种在 HTML 页面中包含数学的方法，该方法可以在 Windows、Macintosh OS X、Linux 和其他风格的 unix 下跨多个浏览器工作。它克服了使用图像来表示数学的传统方法的许多缺点：jsMath 使用原生字体，因此当您更改浏览器中文本的大小时它们会调整大小，它们会以打印机的全分辨率打印，并且您无需等待下载数十张图像即可在网页中查看数学。网页作者也有优势，因为不需要对网页进行预处理以生成任何图像，并且数学是以 TeX 形式输入的，因此很容易创建和维护您的网页。

参见例如[这一页](http://www.math.union.edu/~dpvc/jsMath/examples/Henrici.html)或[那](http://images.math.cnrs.fr/La-methode-de-Newton-et-son.html)一页。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2011-03-19T22:00:25.673

我刚刚编写了一个名为 jqmath 的 javascript 模块来执行此操作。见[http://mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html)

它有点类似于 MathJax，但更简单、更小、更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-03T03:29:35.240

我一直在我的网站中使用带有合并单元格的无边框表格来显示数学方程式。它适用于大多数方程。但是，由于标记通常有点复杂，因此在硬核数学网站的情况下会很耗时。

这是代码：

```
<style type="text/css">
  table.math{font:17px georgia, times, serif;border-collapse:collapse;border:none;}
  td.a{text-align:center;}
  td.b{padding:0 2px;}
  td.c{border-top:1px solid #505050;border-left:1px solid #505050;border-bottom:1px solid #505050;}
  td.d{border-top:1px solid #505050;border-right:1px solid #505050;border-bottom:1px solid #505050;}
  td.e{text-align:center;border-top:1px solid #505050;}
</style>
<table class="math">
  <tr>
    <td class="a">1</td>
    <td class="b" rowspan="2">&times;</td>
    <td class="c" rowspan="2">&nbsp;</td>
    <td class="a">8</td>
    <td class="b" rowspan="2">+</td>
    <td class="a">1</td>
    <td class="d" rowspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td class="e">x + 2</td>
    <td class="e">x + 2</td>
    <td class="e">x &minus; 1</td>
  </tr>
</table> 
```

以下是上述代码的输出：

![在此处输入图像描述](https://i.stack.imgur.com/2spgP.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-28T09:30:24.103

LaTeX 已经在网上和学术界广泛使用来渲染方程式。

一个很好的例子是 wikipedia 看看这个页面的 1 个例子。

[http://en.wikipedia.org/wiki/Latitude](http://en.wikipedia.org/wiki/Latitude)

我知道这是一种概括，但是：使用图像是一种可行的方法，可以在浏览器兼容的方式中实现 Web 上的许多事情——前提是您提供了一些缺点。（例如谷歌地图、圆角、图表、高级排版）

“过时”也可以解释为“经过尝试、测试和功能完整”

并感谢您指出 sIFR - 我稍后会看的东西，我已经有了一个可以用它探索的东西的列表，比如打印？（ html + images 可以很好地做到这一点，sIFR 可以吗？....）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T09:05:50.700

我一直在使用 Confluence wiki 的 LaTeX 插件在网络上（嗯，在 Intranet 上）编写方程式。它在网络浏览器中显示图像，但如果您编辑页面，您仍然可以看到 LaTeX 源代码。

我不知道您使用什么来托管网站，但您可以使用类似的方法：将 LaTeX 源代码嵌入页面中，并将其呈现为 Web 浏览器的图像。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T21:20:13.623

MathTran 是我遇到的最好的解决方案：

[http://www.mathtran.org/](http://www.mathtran.org/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-14T17:42:03.450

我喜欢[MathBin.net](http://mathbin.net/7)和[Roger 的在线方程编辑器](http://rogercortesi.com/eqn/)。后者使您可以控制输出的质量。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-01-04T19:35:51.807

试试我的 LaTeX2Flash 解决方案！:)

[http://validi.fi/latex2flash](http://validi.fi/latex2flash)

[http://sourceforge.net/projects/latex2flash/](http://sourceforge.net/projects/latex2flash/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-28T09:21:10.913

您可以直接在 HTML 页面中编写您的乳胶并使用此[库](http://www.codecogs.com/)动态显示它：

[http://www.codecogs.com/components/equationeditor/equationeditor.php](http://www.codecogs.com/components/equationeditor/equationeditor.php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-09-14T02:19:56.390

解决方案是使用[http://www.codecogs.com/components/equationeditor/equationeditor.php](http://www.codecogs.com/components/equationeditor/equationeditor.php)

该网站允许您以 LaTeX 格式键入您的方程式，并使用其 TeX 服务器，它将方程式转换为图像，您将能够在那里显示您的数学方程式。

让我给你看一个例子，假设我想打印一个我只需输入的积分公式：

img style="display: block; float: none; margin-left: auto; margin-right: auto" title=" \int_{a}^{b}(x+2)dx " src="http:// latex.codecogs.com/gif.latex?\int_{a}^{b}(x+2)dx"

参考上面代码的第 3 段，在 src="<a href="http://latex.codecogs.com/gif.latex?[put" rel="nofollow noreferrer 中的问号后面插入 LaTex 数学方程">http://latex.codecogs.com/gif.latex?[把你的 TeX 代码放在这里]”</p>

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-22T16:31:32.190

这将取决于您的主要目的和受众。

MathML (MathML2) 听起来很有希望，但它仍然存在很多跨浏览器和 MathML 方程编辑器（或生成器）的兼容性问题。许多复杂的方程式不会在不同的浏览器中保持或显示相同。许多数学编辑器、转换器、生成器表示他们支持 MathML。但结果并不相同，尽管输出可能看起来相似。在 MathML 2 中定义许多复杂的方程式并不容易/不可能。如果您只有一些简单的方程式，并且可以让您的观众使用特定的浏览器，那么这可能是一个选择。如果 MathML3 得到广泛支持，那么 MathML 可能是要走的路。

如果您的数学表达式不是交互式的并且不必动态生成）并且在页面上相当静态，那么 PNG 或 JPG 图像可能是一个不错的选择。在大多数情况下，图像的大小并没有那么大，并且在页面中显示数十个方程非常快，因为我们大多数人现在都拥有高速互联网。PNG 图像与任何基于脚本的渲染方法之间没有太大区别，因为基于脚本的方程通常只有几 KB，并且下载所有脚本后从本地计算机渲染图像需要时间。此外，还有许多应用程序支持重新编辑基于 PNG 或 JPG 的方程图像。MathMagic (www.mathmagic.com) 支持可重新编辑的 PNG（透明 PNG）、GIF、JPG、BMP。MathType (www.dessci.com) 支持可重新编辑的 GIF。MathMagic 还读取 MathType 图像。

如果屏幕和高质量输出（如打印）都需要基于矢量的图像格式，那么 SVG 可能是您的选择。此外，在某些情况下，PDF 也是一种选择。许多 Mac 方程编辑器支持 PDF 格式，因为它是一种（几乎是原生的）Mac OS X 格式。但只有少数支持 Windows 上的 PDF。看起来最新的 MathType Mac 版本支持 PDF。MathMagic 在 Mac 和 Win 上都支​​持 PDF。看起来 MathMagic 也支持 SVG。

如果方程式是由一些有限的作者创建的，则有许多选项可以组合以获得最佳结果。例如使用最新的 MS Word 内置的基于 MathML/XML 的公式编辑器，然后将页面转换为网页。或者使用一些第 3 方所见即所得方程编辑器（如 MathType 或 MathMagic）进行快速编写和编辑，然后将方程保存为符合 MathML、LaTeX 或 Wiki 的方程格式，并与 codecogs.com 等在线方程渲染引擎一起使用或数学贾克斯。

如果内容还应用于其他格式，例如 eBook/ePub，则还应考虑其他因素，包括方程的质量以及与 InDesign 等解决方案的集成。

如果有任何不正确的地方，请纠正我。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-12T12:34:23.423

[**iTex2Img**](http://www.sciweavers.org/free-online-latex-equation-editor)是我用过的最好的。这是带有示例的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/UgQQB.png)

# asp.net-mvc - ASP.NET MVC – 数据库驱动菜单

> ID：796901
> 
> 赞同：1
> 
> 时间：2009-04-28T09:01:22.257
> 
> 标签：asp.net-mvc, menu

我有一个数据库菜单结构，我想将它添加到 site.master 文件中。

我查看了有关 StackOverflow 的其他问题，但无法在我的网站上使用它。

如何将用户控件添加到 Site.Master 文件？

菜单.ascx

```
<%foreach (MainMenuSort mainMenuSort in (List<MainMenuSort>)ViewData["MainMenuSortListDisplay"])
      { %>
         <li><%= Html.Encode(mainMenuSort.MainMenuId.MainMenuName)%></li>
         <%foreach (SubMenuSort subMenuSort in (List<SubMenuSort>)ViewData["SubMenuSortListDisplay"])
           {%>
            <%if (mainMenuSort.MainMenuId.Id == subMenuSort.SubMenuId.MainMenu.Id)
              { %>
              <li><%= Html.Encode(subMenuSort.SubMenuId.SubMenuName)%></li>
            <%} %>
         <%} %>
      <%}%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T09:05:09.063

您需要在母版页中使用 Html.RenderPartial 方法。

您需要在调用使用母版页的视图的任何操作中设置 MainMenuSortListDisplay 和 SubMenuSortListDisplay 视图数据键。

在你的主人使用这个

```
<% Html.RenderPartial("~/Views/Shared/Menu.ascx"); 
```

路径需要是控件文件夹的应用程序相对路径。通常这些在共享下。您可以在“共享”文件夹下按照您的需要创建结构。

为了使这种技术更强大，请使用强类型的部分。在问题中，您可能会创建一个具有两个通用集合作为属性的新类 (MenuModel)，并将其放在应用程序的模型文件夹中。然后在模型的构造函数中调用填充列表的方法。

```
public class MenuModel
{
   public IEnumerable<MainMenuSort> OuterList {get; set;}
   public IEnumerable<SubMEnuSort> InnerList {get; set;}
   public MenuModel()
   {
       VoidThatFillsTheInnerAndOuterList();
   } 
```

这意味着您可以在控制器中执行此操作

```
public ActionResult ShowAForm()
{
   ViewData["MenuPartialData"] = new MenuModel();
   return View();
} 
```

设置此键后，您的母版页可以使用 RenderPartial 的重载，如下所示

```
<% Html.RenderPartial(
    "~/View/Shared/Menu.ascx", 
    (MenuModel)ViewData["MenuPartialData"]); %> 
```

这假定您的部分是对 MenuModel 类的强类型。然后在部分中，您可以使用稍微重写代码的模型

```
<% foreach (MainMenuSort mainMenuSort in Model.OuterList) { %>
     <li><%= Html.Encode(mainMenuSort.MainMenuId.MainMenuName)%></li>
     <% foreach (SubMenuSort subMenuSort in Model.InnerList) {%>            
        <%if (mainMenuSort.MainMenuId.Id == subMenuSort.SubMenuId.MainMenu.Id)  
        { %>              
           <li><%= Html.Encode(subMenuSort.SubMenuId.SubMenuName)%></li>
      <%} %>
     <%} %>      
    <%}%> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T09:05:41.027

尝试类似的东西

```
<% Html.RenderPartial("Menu") %> 
```

编辑：更正了一个错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T15:54:33.993

您也可以将其作为 HTMLHelper 并在 MasterPage 中调用 <%= Html.Menu() %>。然后在您的 HTMLHelper 中，您拥有获取数据库记录并循环访问它们的代码。这是我找到的一个[链接，可以帮助您入门。](http://www.dev102.com/2009/04/14/creating-a-tabbed-menu-control-for-aspnet-mvc/)请注意我的评论，因为提供的代码示例中存在错误。我在处理菜单子项时仍然遇到问题，我想我需要一个递归函数或其他什么东西？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-01T09:38:48.457

在这个[链接](http://blog.codeville.net/2008/10/14/partial-requests-in-aspnet-mvc/)的帮助下。我能够在 site.master 页面中显示一个菜单。

# python - CGI 和 Python

> ID：796906
> 
> 赞同：0
> 
> 时间：2009-04-28T09:02:13.360
> 
> 标签：python, cgi

这是我的问题...我有一个python脚本，一旦从命令行执行，就会执行所需的操作并退出。如果在执行期间程序无法执行选择，他会提示用户并要求他们做出决定！现在我必须实现一个 Web 界面，问题就来了……我用一个简单的表单创建了一个 htm 文件，一旦用户“提交”，他将参数传递给一个只包含一行的 cgi 脚本并运行我的蟒蛇程序！并且似乎有效......我的问题是：如果程序需要询问用户选择，我怎样才能将此值返回给我的 python 脚本！为了提示用户做出选择，我需要创建一个包含可能选择的网页......有人知道我如何用 python 打开网页吗？第二个也是最重要的问题是：如何将网页中的值返回到我的“原始”python 模块？在python中我会简单地做一个

回报选择

但是有一个网页我不知道该怎么做！

回顾： 1\. 从网页开始，我运行一个 cgi 脚本！完毕

2.  这个 CGI 脚本运行我的 python 程序...完成

3.  如果程序无法做出决定，

    3a 创建一个网页，其中包含我可以做的可能选择

    3b 显示创建的网页?????????

    3c 将响应返回到原始 pyhon 模块 ??????????

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-28T10:23:47.160

“有人知道如何用 python 打开网页吗？第二个也是最重要的问题是：如何将网页中的值返回到我的“原始”python 模块？？”

这一切都很简单。

但是，您需要了解网络的真正*含义*。你需要阅读网络服务器、浏览器和 HTTP 协议。

这是黄金法则： **Web 服务器使用网页响应 HTTP 请求。**

该规则的第二部分是： **一个请求是一个 URL 和一个方法（GET 或 POST）。**请求还有更多内容，但这是重要的部分。

这就是曾经发生的一切。因此，您必须将用例重新转换为上述形式。

人点击书签；浏览器发出一个空请求（对“/”的 URL）并获得一个表单。

人员填写表格，点击按钮；浏览器 POST 的请求（到表单中的 URL）并获得两件事之一。

*   如果您的脚本有效，他们会在他们的页面上显示这一切都有效。

*   如果您的脚本需要信息，他们会得到另一种形式。

人员填写表格，点击按钮；浏览器 POST 的请求（到表单中的 URL）并获得表明一切正常的最后一页。

您可以通过“CGI”脚本完成所有这些操作。使用 mod_wsgi 并将你的东西插入 Apache Web 服务器。

或者，您可以获得一个 Web 框架。Django、TurboGears、web.py 等。即使您认为自己的操作很简单，您也会对框架更满意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T09:58:42.693

我认为如果需要选择并接受选择作为参数，您可以修改 Python 脚本以返回错误。如果这样做，您可以检查 cgi 脚本的返回值，并使用它来适当地调用 python 脚本并将信息返回给用户。

不能直接调用python脚本有什么原因吗？如果您要避免中间 CGI，我怀疑您最终会得到一个更整洁的实现。

你用的是什么网络服务器？什么cgi语言？Perl 也许？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T09:39:17.280

网页不返回值，它们也不是程序——网页只是 HTML 的静态集合或浏览器可以显示的类似内容。您的 CGI 脚本不能等待用户发送响应 - 它必须将网页发送给用户并终止。

但是，如果浏览器根据该页面中的数据对您的 CGI 程序（或不同的 CGI 程序）执行第二次查询，那么您可以通过这种方式收集信息并从该点继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-28T10:00:42.190

如果你用 python 编写你的 cgi 然后从 cgi 脚本调用你的 python 脚本，可能会更容易。

更新您的脚本以将 UI 与逻辑分开。然后，将您的脚本与（python）cgi 脚本接口应该相对容易。

对于 python cgi 参考： [五分钟了解 Python CGI](http://gnosis.cx/publish/programming/feature_5min_python.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-28T04:49:21.347

[http://docs.python.org/library/cgihttpserver.html](http://docs.python.org/library/cgihttpserver.html)

我认为首先你需要将你的代码与你的界面分开。当你运行一个脚本时，它会输出一个页面。您可以使用 url 参数将参数传递给它。理想情况下，您想要执行您的逻辑，然后将结果传递到 python 打印到 cgi 的模板中。

# asp.net-ajax - 在 ASP.NET Ajax 中停止和启动计时器

> ID：796909
> 
> 赞同：4
> 
> 时间：2009-04-28T09:03:13.327
> 
> 标签：asp.net-ajax

如果您有一个 ASP.NET UpdatePanel 和触发 theUpdatePanel 刷新的 ASP.NET Timer，是否可以在 javascript 中停止/暂停计时器？

当用户鼠标悬停在更新面板上时，我想停止计时器！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T15:58:15.933

最好的方法是对定时器控件使用启用属性

```
timer1.Enabled = false; //For stop the timer

timer1.Enabled = true; // For starting the timer 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T10:01:48.943

[http://forums.asp.net/t/1094798.aspx](http://forums.asp.net/t/1094798.aspx)

然后只需将客户端事件附加到更新面板 ala -

[http://encosia.com/2007/07/13/easily-refresh-an-updatepanel-using-javascript/](http://encosia.com/2007/07/13/easily-refresh-an-updatepanel-using-javascript/) - 但改为 onmouseover 来调用它们。

# c# - 在 C# 中，我将如何使用委托来操作我制作的自定义类中的表单？

> ID：796914
> 
> 赞同：2
> 
> 时间：2009-04-28T09:05:13.150
> 
> 标签：c#, class, delegates, callback

我知道如何从表单操作表单上的文本框，但我不知道如何将文本框从它自己的文件中的 CLASS 操作到表单。

有人可以向我解释我将如何编写委托和回调，以便我可以简单地从不同文件中的类调用方法，并从不同的表单更改文本框中的内容吗？

我不知道如何更好地解释这一点。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T09:11:40.483

你的班级不应该改变表格。

但是，您可以在您的类中创建一个委托或事件，并让您的类在必须采取某些操作时引发该事件。您的表单可以将事件处理程序附加到此事件，并执行适当的操作。

例如：

```
class MyClass
{
   public event EventHandler DoSomething;

   public void DoWork()
   {
         // do some stuff

         // raise the DoSomething event.
         OnDoSomething(EventArgs.Empty);
   }

   protected virtual void OnDoSomething(EventArgs args )
   {
       // This code will make sure that you have no IllegalThreadContext
       // exceptions, and will avoid race conditions.
       // note that this won't work in wpf.  You could also take a look
       // at the SynchronizationContext class.
       EventHandler handler = DoSomething;
       if( handler != null )
       {
           ISynchronizeInvoke target = handler.Target as ISynchronizeInvoke;

           if( target != null && target.InvokeRequired )
           {
               target.Invoke (handler, new object[]{this, args});
           }
           else
           {
                handler(this, args);
           }
       }
   }
} 
```

并且，在您的表单中，您可以执行以下操作：

```
MyClass c = new MyClass();
c.DoSomething += new EventHandler(MyClass_DoSomething);
c.DoWork();

private void MyClass_DoSomething(object sender, EventArgs e )
{
    // Manipulate your form
    textBox1.Text = " ... ";
} 
```

当您想将一些数据从您的类传递到您的表单时，您可以使用通用的 EventHandler 委托，并创建您自己的 EventArgs 类，其中包含您的表单所需的信息。

```
public class MyEventArgs : EventArgs
{
    public string SomeData
    { get; 
      private set;
    }

    public MyEventArgs( string s ) 
    {
        this.SomeData = s;
    }
} 
```

然后当然，您必须在您的类中使用通用事件处理程序，并将适当的数据传递到您自己的 eventargs 类的构造函数中。在事件处理程序中，您可以使用此数据。

# nant - 通过 NANT 从属性文件中读取值

> ID：796924
> 
> 赞同：2
> 
> 时间：2009-04-28T09:06:33.257
> 
> 标签：nant

如何从属性文件中单独读取值。例如，如何从下面的示例中读取 build.home 或 temp.dir 的值。

env.properties 的内容

```
build.home=c:\build 
temp.dir=c:\temp 
```

问候

萨拉蒂

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-11T16:45:52.440

对于 Nant，我们以稍微不同的格式执行此操作。

在您的构建文件中：

```
<include buildfile="./env.properties" failonerror="true"/> 
```

环境属性：

```
<?xml version="1.0" ?>
<project>
   <property name="build.home" value="c:/build"/>
   <property name="temp.dir" value="c:/temp"/>
</project> 
```

# svn - Team Foundation / SubVersion - 谁在存储库中有多少贡献？

> ID：796926
> 
> 赞同：1
> 
> 时间：2009-04-28T09:07:09.980
> 
> 标签：svn, version-control, tfs

有没有人遇到过告诉谁在给定存储库（SubVersion 或 Team Foundation Server）中有多少贡献的东西

例如，假设 2 个文件中有 100 行代码；其中 khurram 写了 30 行，jhon 写了 70 行……使用 TFS 的注释和/或 SubVersion 的 Blame （在每个文件上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T13:24:01.813

对于颠覆，您可以尝试以下链接以获取[svn 统计信息](http://www.statsvn.org/)

它会给你带来比你想象中更多的东西。

# qt - Qt4中简单的进程间通信

> ID：796927
> 
> 赞同：2
> 
> 时间：2009-04-28T09:07:23.053
> 
> 标签：qt, qt4, operating-system, desktop

我需要使我的应用程序一次只能运行一个实例。此外，当它使用命令行参数启动时（例如注册打开某些文件类型时），它应该将参数传递给现有实例并立即退出而不显示图形界面。大家应该都知道我的意思了。使用的框架是 Qt 4，看起来它必须有一些设施。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T10:47:17.727

有一个 Qt Solutions 项目这样做：

[Qt 单一应用程序](http://www.qtsoftware.com/products/appdev/add-on-products/catalog/4/Utilities/qtsingleapplication/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-07T00:25:20.047

有几种方法可以进行进程间通信。示例可以在 Qt 的[示例部分](http://doc.trolltech.com/4.5/examples.html#inter-process-communication)中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-28T20:56:33.550

也可以使用 QSharedMemory 自己实现这种类（参见 QSharedMemory::attach() ）。它既可以用于确定其他实例是否已经在运行，也可以用于通信/发送消息。除了一些指针魔术和内存复制之外，它非常简单。

# history - 为什么从一开始就没有“管理”代码？

> ID：796931
> 
> 赞同：8
> 
> 时间：2009-04-28T09:08:09.430
> 
> 标签：history, managed-code

请注意，这与 Microsoft 为宣传托管代码概念而大力宣传的 .NET CLR 无关。你们中的大多数人都知道托管代码已经存在了很长一段时间，并且与火箭科学并没有太大关系。

我想知道的是，**为什么计算机发展过程中运行时安全的概念来得这么晚**。

我知道这就像在问“为什么第一辆福特 T 型车没有配备安全气囊和安全带？”。尽管如此，这个问题的相关性仍然存在，因为保护已知危险完全符合人性。例如，第一辆 T-Ford 的速度不足以激发安全气囊的研究。它的速度还不够快，以至于人们经常犯下致命的判断错误，以至于它会促使安全带成为许多国家的法律和标准。

在计算机进化中，它几乎是相反的。我们从组装机开始，这相当于用眼罩以 200 英里/小时的速度驾驶一辆 T-Ford。我有幸与这个时代的几位老卡车司机交谈，听到这些关于手工组装汇编代码、人工调试器、大量代码行等的故事。如果我们在 C 语言中犯了一个非常严重的错误，我们可能会结束蓝屏。几十年前，您最终可能会损坏硬件，天知道会发生什么。但这对我来说是个谜——这么多年了，我们所做的一切都是为了让崩溃不那么痛苦，只是蓝屏（很抱歉将 MS 用作任何东西的原型）。

防止已知危险不仅是人类的天性，**而且任何程序员的天性都是自动化和系统化常用设施**，如错误检查、内存诊断、日志框架、备份维护等。

为什么程序员/人类没有开始自动化确保他们提供给系统的代码不会损害系统的任务？是的，当然，*性能*。但是，嘿，这远远早于任何严重渗透的硬件标准。为什么主板没有设计有总线架构和额外的处理器来促进“托管代码”？

**有没有什么比喻说 T 型福特汽车不够快以至于我错过了？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-28T09:25:22.917

内置于安全等的托管代码已经存在了很长时间。

原来的 PC 平台上没有它的空间，后来也没有加入。

自 70 年代以来，古老的 IBM 大型机就具有受保护的寻址、不可触碰的内核库、基于角色的安全性等。此外，所有汇编程序代码都由一个复杂的（当时）变更管理系统管理。（Univac、Burroughs 等也有类似的情况。）

Unix 从一开始就内置了相当不错的安全性（多年来并没有太大变化）。

所以我认为这在很大程度上是一个 Windows/Web 空间问题。

从未有过大型机病毒！世界上的大多数金融交易都在某个时候通过这些系统，因此它们似乎不是一个有吸引力的目标。

不过，IBM 内部邮件系统确实托管了第一个“木马”！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-28T09:24:54.070

实际上，托管代码已经存在了很长时间。考虑：

*   LISP
*   短暂聊天
*   BASIC（原味）

所有都提供了类似操作系统的环境，可以保护使用免受内存和其他资源控制问题的影响。所有这些都是相对的失败（只有在引入 PEEK 和 POKE 等允许您与底层系统混淆的功能时，BASIC 才真正成功）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-28T09:12:03.867

计算机还不够强大，要让它们足够强大太昂贵了。当您只能使用有限的资源时，每个字节和 CPU 周期都很重要。

我使用的第一台计算机是 1982 年的[Sinclair ZX Spectrum](http://en.wikipedia.org/wiki/Zx_spectrum)。它的 RAM (16K) 比今天单个 Windows 字体文件的大小还小。那是相对最近的，在家用电脑时代。在 1970 年代中期之前，在家中拥有一台电脑的想法是不可想象的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-28T12:32:49.860

只是为了记录，我们从不手工编译程序集。我们手工组装了汇编语言代码。现在清楚了...

您的类比使问题变得模糊，因为在这个意义上，汽车的速度与计算机的速度不同：汽车速度的提高需要汽车安全性的改变，但驱动汽车的并不是计算机速度的提高需要改变计算机安全性，它是连接性的增加。换个角度看：对于汽车来说，提高速度是提高安全性的*驾驶*技术。对于计算机而言，提高速度是提高安全性的*使能*技术。

因此，第一辆汽车在事故中是安全的，因为它们很慢。第一台计算机是安全的，因为它们没有联网。

现在，通过安全带、安全气囊、ABS、防撞装置等，汽车变得更加安全。尽管您仍然无法拔下网络电缆，但通过其他技术使计算机变得安全。

这是一个简化，但我认为它是它的核心。那时我们不需要那些东西，因为计算机没有连接到网络。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-28T12:28:15.050

让我们从第一原则考虑这一点。

托管平台提供了一个相对沙盒区域来运行从高级语言创建的程序代码，以更适合平台执行的形式（IL 字节码）。其中还有一些实用功能，例如垃圾收集和模块加载。

现在考虑一个本机应用程序 - 操作系统提供了一个相对沙盒区域（一个进程）来运行从高级语言创建的程序代码到更适合平台执行的形式（x86 操作码）。还有一些实用功能，如虚拟内存管理和模块加载。

没有太大区别，我认为我们首先管理平台的原因仅仅是因为它使平台编码更容易。它应该使代码在操作系统之间可移植，但 MS 并不关心这一点。安全性是托管平台的一部分，但应该是操作系统的一部分 - 例如。您的托管应用程序可以像正常过程一样写入文件和类似内容。限制这是一项安全功能，它不是本机上不存在的托管平台的一个方面。

最终，他们本可以将所有这些托管功能放入一组原生 dll 中，并放弃中间字节码的想法，转而将 JIT 编译为原生代码。像 GC 这样的“托管”特性很容易在本机堆上实现 - 请参阅 Boehm C++ 的示例。

我认为 MS 这样做的部分原因是它使编译器更容易编写，部分原因是 Java 就是这样产生的（而且 .NET 在很大程度上是 Java 的后代，如果只是在精神上的话），尽管 Java 这样做是为了交叉- 平台编码可能，MS 不关心的东西。

那么，为什么我们不从一开始就获得托管代码 - 因为您提到的所有作为“托管”代码的一部分的东西都是本机代码。我们今天拥有的托管平台只是在已经抽象的平台之上的额外抽象。高级语言添加了更多功能来保护您自己，缓冲区溢出已成为过去，但没有理由在 C 首次发明时不能在 C 中实现它们。只是他们不是。也许事后看来，这些功能似乎缺失了，但我敢肯定，在 10 年后，我们会问“为什么 C# 没有像我们今天那样实现明显有用的功能 XYZ”

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-28T09:38:55.317

300年前没有火车的原因是一样的。30年前没有手机的原因是一样的。同样的原因，我们仍然没有传送机。

技术随着时间的推移而发展，它被称为进化。

那时的计算机还不够强大。在后台运行垃圾收集器会杀死您的应用程序性能。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-28T14:17:18.300

谈到为什么计算机没有托管代码级别的保护机制，而不是为什么 VM 不能在慢速硬件上运行的问题（已经在其他帖子中解释过）。简短的回答是确实如此。CPU 被设计为在发生错误代码时抛出异常，这样它就不会损坏系统。众所周知，Windows 处理这个问题的能力很差，但还有其他操作系统。Unix 将它作为信号传递，以便程序在不关闭系统的情况下终止。实际上，无论您是否正在运行托管代码，空指针异常都会以相同的方式导致 - 程序终止。虚拟内存确保程序不会与其他代码混淆，因此它们所能做的就是伤害自己。

这让我想到了第二点。如果您知道自己在做什么，所有这些都是不必要的。如果我想保持我的家具清洁，我根本不会把食物掉在上面。我不需要用塑料盖住我的房子，我只需要小心。如果你是一个草率的编码员，世界上最好的虚拟机不会拯救你，它只会让你运行你草率的代码而没有任何噪音。此外，如果您使用适当的封装，移植代码也很容易。当您是一名优秀的编码员时，托管代码并不能提供广泛的帮助。这就是为什么不是每个人都在使用它。这只是一个偏好问题，而不是更好/更糟。

就运行时安全而言，P 代码编译器无法预测机器代码无法预测，托管代码解释器也无法处理操作系统无法（或不能）处理的任何事情。带有额外总线、CPU 和指令集的主板要花更多的钱——IT 就是成本/性能比。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-28T09:22:53.920

1970 年，内存成本[约为 1 美元/位](http://www.eetimes.com/special/special_issues/millennium/milestones/whittier.html)（没有通货膨胀）。你负担不起像这样的成本的豪华垃圾收集。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-28T14:55:26.133

我认为像大多数问题一样，“为什么我们在 Y 年前的编程中没有 X”的答案是速度/资源分配。由于资源有限，他们需要尽可能有效地管理。与托管代码相关的通用类型的管理将过于耗费资源，以至于无法在当时的性能关键应用程序中受益。这也是为什么今天的性能关键代码仍然用 C、Fortran 或汇编程序编写的部分原因。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-28T14:58:40.697

为什么我们不立刻造飞机和宇宙飞船，而不是到处乱搞马车之类的乏味的东西呢？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-03-29T17:39:07.323

使用中间语言需要以下两件事之一：

1.  运行时解释，这将有很大的性能损失（变化很大——有时是 2 倍或更少，但有时是 100 倍或更多）
2.  即时编译器，它需要额外的 RAM，并且会增加与程序大小大致成比例的延迟，而不是执行的语句数量

多年来发生了变化的一件事是，许多程序运行其模式中使用最频繁的部分的次数比以前多得多。假设第一次执行任何特定语句将招致 1,000 倍于后续执行的惩罚。在每个语句平均运行 100 次的程序中，这种惩罚会产生什么影响？对于每条语句平均运行 1,000,000 次的程序，该惩罚会产生什么影响？

即时编译已经有很长一段时间了，但在 1980 年代或 1990 年代，性能成本将是不可接受的。随着技术的变化，JIT 编译的实际成本已经下降到完全实用的程度。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-28T11:02:02.137

答案变得更清楚了——人类不是为编写程序而生的。机器应该这样做，让我们通过玩吃豆人来放松。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-28T12:41:40.650

值得一提的是，我为我的计算语言课阅读了几篇论文（一篇由 CAR Hoare 撰写，另一篇由 Nicholas Wirth 撰写）在 60 年代和 70 年代尤其提倡这一点。

我无法确切说明为什么这些事情没有发生，但我的猜测是，这只是事后看来显而易见的事情之一，当时并不明显。并不是早期的编译器不关心安全性。这是因为他们对如何做到这一点有不同的想法。

Hoare 提到了“结帐编译器”的想法。据我所知，这本质上是一个进行静态分析的编译器。对他来说，这是一种失败的流行技术（或者至少没有解决它想要解决的那么多问题）。他的解决方案是通过创建托管代码来使编程语言更加安全（或者至少他用现代术语是这样说的）。

我想一旦 C（以及后来的 C++）流行起来，托管代码的想法基本上就死了。并不是说 C 是一种糟糕的语言，只是它旨在成为一种汇编语言而不是一种应用程序编程语言。

如果有机会，您可能会阅读[关于编程语言设计的提示](ftp://reports.stanford.edu/pub/cstr/reports/cs/tr/73/403/CS-TR-73-403.pdf)。如果你对这类事情感兴趣，这是一本很好的读物。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-28T12:59:29.110

这个问题的最佳答案是，恕我直言，当时没有人知道托管代码。知识实际上是随着时间的推移而发展的。与建筑或农业等领域相比，计算机科学是一个非常年轻的领域。因此，关于该领域的集体知识也很年轻，并且会随着时间的推移而发展。也许几年后我们会遇到一些新现象，有人会问同样的问题，“为什么以前没有人想到 XYZ？”。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2009-04-28T09:39:06.940

我想说这主要是由于对更改的阻力以及对垃圾收集效率低下的错误看法，延迟了 GC 和相关技术的采用。当然，英特尔 8086 上的脑死亡分段内存模型并不能完全帮助促进 PC 上的健全内存管理。

# c# - 在运行时将 TextEdit 添加到 DevExpress GridView 的列

> ID：796932
> 
> 赞同：2
> 
> 时间：2009-04-28T09:08:36.857
> 
> 标签：c#, gridview, devexpress

我正在尝试在运行时将 TextEdit 添加到 DevExpress GridView 上的列中，这就是我所得到的（几乎从一些自动生成的设计器代码中复制）。

```
DevExpress.XtraEditors.Repository.RepositoryItemTextEdit commentTextEdit 
      = new DevExpress.XtraEditors.Repository.RepositoryItemTextEdit();
gvwEnquiryList.Columns["Comments"].ColumnEdit = commentTextEdit;
ctlEnquiryList.RepositoryItems.Add(commentTextEdit); 
```

我错过了什么？（因为它不起作用，“评论”仍然只是一个普通的列）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-30T16:34:17.983

使用下面的代码，我可以在我的文本字段中添加一个 TextEdit 列。我不需要使用 RepositoryItems.Add 函数。

```
 DevExpress.XtraEditors.Repository.RepositoryItemTextEdit commentTextEdit = new DevExpress.XtraEditors.Repository.RepositoryItemTextEdit();
        commentTextEdit.Appearance.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(255)))), ((int)(((byte)(128)))), ((int)(((byte)(128)))));
        commentTextEdit.Appearance.Options.UseBackColor = true;
        commentTextEdit.Name = "commentTextEdit";

        this.comments.ColumnEdit = commentTextEdit; 
```

# mysql - 为什么像 Postgresql 和 Mysql 这样的开源数据库没有加密存储过程？

> ID：796934
> 
> 赞同：2
> 
> 时间：2009-04-28T09:08:52.940
> 
> 标签：mysql, postgresql, stored-procedures, encryption

为什么像 Postgresql 和 Mysql 这样的开源数据库没有加密存储过程？

是因为他们与生俱来的开源理念吗？

加密存储过程的令人信服的理由是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T12:50:46.167

虽然我确信加密存储过程至少在 PostgreSQL 中是一个简单的编程问题（MySQL 和存储过程并没有很长的历史），但在 PgSQL 的自定义语言支持下，我不明白为什么这会有用。它们需要在某些时候被解密才能执行它们，以便管理数据库/数据库服务器的任何人都能够通过足够的技能获得未加密的 sp。DBA 已经可以看到所有数据、所有关系，这似乎使混淆 SP 代码变得毫无意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-28T10:50:17.063

如果这是一个非常酷的功能（我从未使用过，也不需要它），我建议您在受尊敬的邮件列表中注册一个新功能请求。

Postgresql： [http ://www.postgresql.org/community/lists/](http://www.postgresql.org/community/lists/)

MySQL： http: [//lists.mysql.com/](http://lists.mysql.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-28T11:13:40.503

正确，因为没有人需要它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-28T11:16:52.460

因为加密存储过程显然是个坏主意。

业务编程*不*应该以 DBA 为中心，因为 DBA 可以单独访问整个应用程序代码，这些代码是用 SQL 编写的，并在数据库中存储、加密。那就是疯狂。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-10T16:46:50.843

我想最重要的原因是开源数据库是由非常聪明的人编写的。谁知道，加密程序实际上并不能保护您免受某些流氓管理员访问它的未加密源的影响。

在专有软件世界中，人们倾向于认为“加密会解决问题”。但是当您考虑到您的数据库源是开放的这一事实时，这意味着加密必须以一种非常聪明的方式完成，并且并非在所有情况下都有效。

基本上 - 如果您想保护您的数据免受“磁盘被盗” - 您可以使用硬盘加密。如果您想保护备份 - 加密备份。但是，如果您想保护数据库免受“过于好奇”的管理员的影响 - 请聘请律师，而不是尝试（或多或少）考虑隐藏数据的不可能方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-29T11:33:37.280

回答“加密存储过程的令人信服的理由？” 问题 当应用程序在存储过程中使用相当复杂的专有逻辑并且应用程序托管在客户数据库系统上时，我已经看到这种情况。

我知道这不是一个完美的解决方案，但它阻止了窃取代码或阻止客户端 DBA 更改他们不应该接触的内容的琐碎尝试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-05T01:07:00.120

我以前为InterBase提供支持的时候，时不时会出现这个问题。客户想要此功能的原因是在他们开发商业软件应用程序时保护他们对“知识产权”（即源代码）的投资。

当然，您可以限制对 C++、Java 或 Delphi 等编译语言的源代码的访问。客户可以对编译后的代码进行逆向工程并学习一些您的算法，但这与访问源代码不同。*他们无法*通过反编译获得很多信息。

但是，如果您在触发器和存储过程的主体中实现部分应用程序，那么任何购买该软件产品的客户都可以阅读这些内容。可能有办法隐藏或加密此代码，但它不能是不可逆的加密，否则数据库引擎将无法运行代码。

InterBase 将触发器/proc 源的副本存储在 BLOB 字段中，并将同一例程的编译版本存储在另一个 BLOB 中。因此，您可以将包含源的 BLOB 字段清空，并保留已编译的代码。但这仅与交付已编译的应用程序代码一样有效；它仍然可以由具有足够技能和动力的海盗进行逆向工程。

我不知道在 MySQL 或 PostgreSQL 中是否可以使用 NULL-out-the-source-BLOB 技巧。

底线是：

## 将数据库中的数据或元数据交给客户后，没有办法绝对限制对它的访问。

值得注意的是，这是人为的要求。我从未听说过有人因为触发器和存储过程中的可读代码而被盗其软件 IP。反正也没必要。盗版者可以使用其他方式复制您的软件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-31T01:36:10.917

恕我直言，这是加密存储过程/视图的好方案。我工作的公司编写了一个数据库驱动的应用程序。我们将数据库存放在客户端网络上的 sql 服务器或运行 SQL Express 的工作站上（适用于用户较少的小型客户端）。存储过程和视图用于审计客户提供给我们的数据。为了防止客户的 DBA 或 IT 人员简单地欺骗我们或窃取专有算法，我们对存储过程和视图进行了加密。我们在我们的版本控制软件（即 Visual Source Safe）中维护原始的纯文本脚本，以便我们的支持团队可以查看程序或视图是如何编码的。我希望一些开源引擎支持它，这样我们就可以摆脱 SQL Express 的限制。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-10-03T03:43:30.290

（RE：粗体字）我认为这不太对。如果您曾经看过 ACT！联系人管理他们将 MSSQL Express 安装为单独的实例，并为 SQL 和数据库使用私有用户名和密码。因此，有一些方法可以不与您的客户共享数据库。

不是要发动宗教战争，而是像 MSSQL 这样的数据库服务器具有 proc 加密功能。这个想法是，如果您是 ISV，您可以使用加密的过程部署您的解决方案以保护您的 IP。作为 DBA，您无法解密这些过程。

我的 2 美分

# matlab - 什么是函数句柄，它有什么用处？

> ID：796935
> 
> 赞同：38
> 
> 时间：2009-04-28T09:09:08.430
> 
> 标签：matlab, function, function-handle

有人可以向我解释`@`（函数句柄）运算符的含义以及为什么要使用它吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-28T13:44:21.950

MATLAB 中的[函数句柄运算符](https://www.mathworks.com/help/matlab/matlab_prog/creating-a-function-handle.html)的作用本质上类似于指向函数特定实例的指针。其他一些答案已经讨论了它的一些用途，但我将在这里添加我经常使用的另一个用途：维护对不再“在范围内”的函数的访问。

例如，下面的函数初始化一个 value `count`，然后返回一个嵌套函数的函数句柄`increment`：

```
function fHandle = start_counting(count)

  disp(count);
  fHandle = @increment;

  function increment
    count = count+1;
    disp(count);
  end

end 
```

由于函数`increment`是一个[嵌套函数](https://www.mathworks.com/help/matlab/matlab_prog/nested-functions.html)，它只能在函数内部使用`start_counting`（即工作空间`start_counting`是它的“作用域”）。但是，通过返回函数的句柄`increment`，我仍然可以在外部使用它`start_counting`，并且它仍然保留对`start_counting`!工作区中变量的访问权限。这允许我这样做：

```
>> fh = start_counting(3);  % Initialize count to 3 and return handle
     3

>> fh();  % Invoke increment function using its handle
     4

>> fh();
     5 
```

请注意，即使我们在函数之外，我们如何保持递增计数`start_counting`。`start_counting`但是您可以通过使用不同的数字再次调用并将函数句柄存储在另一个变量中来做一些更有趣的事情：

```
>> fh2 = start_counting(-4);
    -4

>> fh2();
    -3

>> fh2();
    -2

>> fh();  % Invoke the first handle to increment
     6

>> fh2();  % Invoke the second handle to increment
    -1 
```

请注意，这两个不同的计数器独立运行。该函数处理`fh`并`fh2`指向函数的不同实例，其中不同的`increment`工作空间包含`count`.

除了上述之外，将函数句柄与嵌套函数结合使用还可以帮助简化 GUI 设计，正如我在[另一篇 SO 帖子](https://stackoverflow.com/a/425347/52738)中所说明的那样。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-28T11:41:10.187

函数句柄是matlab中一个非常强大的工具。一个好的开始是阅读在线帮助，它会给你比我所能提供的更多的东西。在命令提示符下，键入

```
doc function_handle 
```

函数句柄是一种在一行中创建函数的简单方法。例如，假设我希望对函数 sin(k*x) 进行数值积分，其中 k 具有一些固定的外部值。我可以使用内联函数，但函数句柄要整洁得多。定义一个函数

```
k = 2;
fofx = @(x) sin(x*k); 
```

看到我现在可以在命令行评估函数 fofx 了。MATLAB 知道 k 是什么，所以我们现在可以将 fofx 用作函数。

```
fofx(0.3)
ans =
         0.564642473395035 
```

事实上，我们可以传递 fofx，有效地作为一个变量。例如，让我们调用 quad 来进行数值积分。我将选择区间 [0,pi/2]。

```
quad(fofx,0,pi/2)
ans =
         0.999999998199215 
```

如您所见，quad 进行了数值积分。（顺便说一句，内联函数至少会慢一个数量级，而且更不容易使用。）

```
x = linspace(0,pi,1000);
tic,y = fofx(x);toc
Elapsed time is 0.000493 seconds. 
```

作为比较，尝试一个内联函数。

```
finline = inline('sin(x*k)','x','k');
tic,y = finline(x,2);toc
Elapsed time is 0.002546 seconds. 
```

函数句柄的一个巧妙之处在于您可以动态定义它。在区间 [0,2*pi] 上最小化函数 cos(x)？

```
xmin = fminbnd(@(x) cos(x),0,2*pi)
xmin =
          3.14159265358979 
```

MATLAB 中的函数句柄还有很多其他用途。我在这里只触及了表面。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-28T11:15:02.217

免责声明：代码未经测试...

函数句柄运算符允许您创建对函数的引用并像任何其他变量一样传递它：

```
% function to add two numbers
function total = add(first, second) 
    total = first + second;
end

% this variable now points to the add function
operation = @add; 
```

一旦你有了一个函数句柄，你就可以像普通函数一样调用它：

```
operation(10, 20); % returns 30 
```

函数句柄的一个好处是您可以像传递任何其他数据一样传递它们，因此您可以编写作用于其他函数的函数。这通常使您可以轻松地分离出业务逻辑：

```
% prints hello
function sayHello 
    disp('hello world!');
end

% does something five times
function doFiveTimes(thingToDo) 
    for idx = 1 : 5 
        thingToDo();
    end
end

% now I can say hello five times easily:
doFiveTimes(@sayHello);

% if there's something else I want to do five times, I don't have to write
% the five times logic again, only the operation itself:
function sayCheese 
    disp('Cheese');
end
doFiveTimes(@sayCheese);

% I don't even need to explicitly declare a function - this is an 
% anonymous function:
doFiveTimes(@() disp('do something else')); 
```

[Matlab 文档](http://www.mathworks.com/help/techdoc/ref/function_handle.html)对Matlab 语法有更完整的描述，并描述了函数句柄的一些其他用途，如图形回调。

# asp.net - Web 应用程序项目 @Reference 标记

> ID：796936
> 
> 赞同：0
> 
> 时间：2009-04-28T09:09:26.230
> 
> 标签：asp.net, dynamic, user-controls, web-application-project

我正在将网站项目转换为 VS 2008 中的 Web 应用程序项目，并且我遇到了有关动态加载用户控件的查询。

```
<%@ Reference Control="~/UserControls/MyUserControl.ascx" %> 
```

然后在我简单调用的页面中......

```
Dim ucSupplierDetails As New ASP.usercontrols_myusercontrol_ascx 
```

可悲的是，当更新到网络应用项目时，这不再是一条有效的线路。有替代方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-02T20:50:52.397

在这里动态加载您的用户控件是一种替代方法：

```
Dim ucSupplierDetails As New UserControl 
ucSupplierDetails.LoadControl("~/UserControls/MyUserControl.ascx")
placeholder.Controls.Add(ucSupplierDetails) 
```

**编辑：**这是第二个选项，手动将您的用户控件放入命名空间：

```
Namespace MyUserControlNamespace

    Public Class MyUserControl Inherits System.Web.UI.UserControl

    End Class

End Namespace 
```

不要忘记更改用户控件的类声明（最后一行的继承属性）：

```
<%@ Control Language="VB" AutoEventWireup="true" 
    CodeFile="MyUserControl.ascx.vb" 
    Inherits="MyUserControlNamespace.MyUserControl" %> 
```

现在，您可以通过它的命名空间访问它们：

```
Dim ucSupplierDetails As New MyUserControlNamespace.MyUserControl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-02T14:33:16.447

尝试`<%@ Import namespace="Namespace.Of.Your.Usercontrol" %>`改用

# java - 使用图表 X 的 VC++ 图表

> ID：796939
> 
> 赞同：0
> 
> 时间：2009-04-28T09:11:11.343
> 
> 标签：java, c++, visual-c++, com, class-library

我是使用 chartfx 绘制图表的新手

你能告诉我以下方法的含义吗，它们有点令人困惑……我在任何地方都没有找到文档。

GetValue () GetXValue () PutItem()

谢谢，阿琼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T09:56:48.707

当您下载该库时，您将至少获得 API 的基本文档。该文档也可用于库的试用版。付费版本也将提供在线支持。

AFAIR, GetXValue() -- 将返回指定索引（参数）处的 x 坐标值。即，如果您想要图形/绘图上第三个点的 x 坐标，您将调用 GetXValue(3)。

对于其他 API 和示例，您可以参考[support.softwarefx.com](http://support.softwarefx.com)，其中包含详细信息。

# .net - 应该签署互操作程序集吗？

> ID：796945
> 
> 赞同：8
> 
> 时间：2009-04-28T09:11:47.533
> 
> 标签：.net, digital-signature, strongname

我们有一组用 VC++ 开发的 COM 组件。当对此类组件的引用添加到 .NET 项目时，Visual Studio 会生成一个互操作程序集。我们现在有一组这样的程序集。

在运行我们的日常构建时，我们使用数字签名对所有生成的二进制文件进行签名。互操作程序集没有签名，因为我们不认为我们是作者 - 任何人都可以使用 Visual Studio 并生成相同的程序集。

我们是否也应该签署互操作程序集？我们是否也应该使用强名称（sn.exe 实用程序）对它们进行签名？这样做的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-28T09:23:07.117

一段时间以来，这一直是一个棘手的平衡。问题在于您需要将 Interop 程序集与您的代码一起分发，*并且*您可能正在对自己的程序集进行签名。如果您对程序集进行签名，则它引用的所有程序集也必须签名 - 包括互操作程序集。所以你必须签署他们。

如果您正在分发一个独立的应用程序，那么没有风险，您应该继续签署程序集以使您的生活更轻松。

如果您正在分发组件库，事情可能会有点棘手，因为使用您的库的另一个开发人员可能会生成他们自己的互操作程序集，但使用他们自己的密钥对其进行签名。这会导致各种命名和依赖问题。

根据您的互操作程序集的复杂程度，您可以将代理代码生成到单独的 .CS/.VB 文件中，然后将其直接编译到您的程序集中。这样您就不必担心强名称问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-28T09:26:02.850

我们使用 Sn.exe 将工具生成的互操作程序集强命名为 COM 对象的包装器。我们需要这样做，因为加载它们的程序集已签名，因此需要对其进行签名。

要生成我们使用的互操作程序集：

```
tlbimp Some_COM.dll /delaysign /publickey:"Some_PublicKey.snk" /out:Some_COM2Lib.dll" 
```

如果您完全签名，显然删除 /delaysign 。

至于不编写程序集，可能是这种情况，但您应对它们负责。您希望确保它们不会被其他任何人（无意或无意）替换，因此您可能应该应用与应用于其他代码相同级别的签名/强名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T19:51:07.950

将“publickey”替换为“keyfile”：

```
tlbimp Some_COM.dll /delaysign /keyfile:"Some_PublicKey.snk" /out:Some_COM2Lib.dll" 
```

# java - 如何从 JFileChooser(JAVA Swing) 中禁用文件操作、文件选择和过滤面板？

> ID：796946
> 
> 赞同：1
> 
> 时间：2009-04-28T09:11:49.610
> 
> 标签：java, swing, view, jfilechooser

我需要将对话框嵌入`JFileChooser`到`Panel`. 我只需要文件和文件夹视图。如何从..禁用`dialogBox`ie（文件操作、文件选择和过滤器面板）中包含的其他面板`JFileChooser()` `dialogBox`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T09:18:55.927

您可能想研究使用 a[`JTree`](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/JTree.html)来显示文件结构。

将 File 结构转换为[`TreeModel`](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/tree/TreeModel.html).

基本上我会先创建一个名为`FileTreeModel`.

然后，您可以使用顶层目录作为模型的根目录并从那里开始。

然后，您需要做的就是将`TreeModel`a 的设置`JTree`为您的`FileTreeModel`.

的代码`FileTreeModel`可能如下所示：

```
private File root;
public TreeModel(File root){
    this.root = root;
}

public boolean isLeaf(Object node){
    File f = (File) node;
    return !f.isDirectory();
} 
```

您将需要实现接口的其余部分。但这相当简单。

# nhibernate - Fluent Nhibernate 组合实体，指定外键

> ID：796949
> 
> 赞同：0
> 
> 时间：2009-04-28T09:12:40.620
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我有一个流畅的 Nhibernate 地图，例如：

```
 public class UserMap : ClassMap<PortalUser>
{
    public UserMap()
    {
        WithTable("aspnet_Users");
        Id(x => x.Id, "UserId")
            .GeneratedBy.Guid();
        Map(x => x.Name, "UserName");
        Map(x => x.Login, "LoweredUserName");
        WithTable("LdapUsers", m => m.Map(x => x.FullName, "FullName"));

    }
} 
```

我在表“LdapUser”中的外键列是 UserId，但生成的选择将寻找“PortalUserId”。
有没有办法直接指定关系键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T17:40:52.600

试试这个：

```
...
WithTable("LdapUsers", m => {
    m.Map(x => x.FullName, "FullName");
    m.WithKeyColumn("UserId");
}); 
```

# apache-flex - 如何使用 flex 读取 xml 标签及其数据？

> ID：796951
> 
> 赞同：-2
> 
> 时间：2009-04-28T09:12:57.437
> 
> 标签：apache-flex, flex3, flexbuilder

我需要从一个文件中读取 xml 标签及其数据，然后将其写入另一个 xml..怎么做？请立即告诉我...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T09:21:33.190

请参阅[http://livedocs.adobe.com/flex/2/langref/XML.html](http://livedocs.adobe.com/flex/2/langref/XML.html)。我很难相信你在问之前用谷歌搜索过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-28T22:04:53.463

您可以使用 FileReference.save() 方法将 XML 数据保存到本地文件。它将提示用户首先保存文件的位置，然后再保存数据。

这是一个例子：

```
var xml:XML = <root><someXmlTag/></root>;
var fileReference:FileReference = new FileReference()
fileReference.save(xml, "myfile.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T00:33:24.237

据我所知，Flex 无法写入文件！

我使用 HTTPService 加载 XML 文件并使用结果处理程序来访问它。

```
<mx:HTTPService id="service" url="myXml.xml" result="ServiceResult (event)"/> 
```

不要在 HTTPService 标记中指定结果格式。这是结果事件处理程序的代码。

```
private function ServiceResult (e : ResultEvent) : void {
    e.result.XmlTag.AnotherXmlTag;
} 
```

您还可以使用 service.lastResult 访问 HTTPService 返回的最后一个结果。结果与 dataProvider 属性完全兼容，尤其是在数组和图表系列中。

```
var series : LineSeries = new LineSeries ();
series.dataProvider = e.result.XmlTag.AnotherXmlTag; 
```

这将采用 XmlTag 中所有 AnotherXmlTag 标记中的值。但是，对于系列，您还应该指定 yField 或和 xField，但它离题了 :-)

如果它不起作用，您也可以使用 as 关键字进行转换，例如：

```
series.dataProvider = e.result.XmlTag as ArrayCollection; 
```

我实际上并没有尝试在这种情况下强制转换它，但最重要的是 XML 标记与数组和 ArrayCollections 兼容。

在您的情况下，您只需使用 e.result 获取完整的 XML 文件，将其分配给一个变量，然后使用 Ben 的方法编写它。您还可以使用我上面解释的方式从单个值创建一个数组，并在需要时手动插入标签等。这样做的好处是，您可以在数组中准备好所有值，以便以后需要它们。如果你遍历索引，这不需要很多工作，这将是我这样做的方式。

希望这可以帮助！

# iphone - 如何将数据传递给 UITabBarController

> ID：796952
> 
> 赞同：0
> 
> 时间：2009-04-28T09:13:51.837
> 
> 标签：iphone, cocoa-touch, delegates, uitabbarcontroller

我的应用程序具有一个`UITabBarController`，它带来了一些视图。

在应用程序委托中，我必须将一个（自定义）模型传递给它。最好的方法是子类化，还是有更好的方法？

如果我将模型（例如 Notes）放入我的`UITabBarController`.，我如何从视图控制器访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T10:24:29.653

我不太确定为什么要将不同的模型传递给 UITabBarController。标签栏控制器唯一做得很好的是管理标签栏。他们的“模型”基本上是一个 ViewControllers 列表，如果用户点击标签栏图标，他们会将其呈现给用户。

在文档中，Apple 表示 UITabBarController 类不用于子类化，但如果有必要，您仍然可以这样做。

但是，如果您只是想这样做，因为您可以从其他视图控制器中方便地访问选项卡栏控制器，那么我建议您单独保留选项卡栏控制器并实现某种 NoteManager 类（可能作为单例）并简单地从您的其他视图控制器中使用它。

# c# - 将 WSDL 枚举映射到 ASP.NET Web 服务中的字符串

> ID：796953
> 
> 赞同：0
> 
> 时间：2009-04-28T09:14:15.780
> 
> 标签：c#, asp.net, xml, web-services, wsdl

**背景：** 我正在使用 ASP.NET 2.0 创建 Web 服务。此 Web 服务为现有 Web 表单提供了另一个接口，该表单包含从数据库动态填充的选择框。

我的 Web 服务初稿接受了其中每一个的字符串，然后确保它是有效的，如果不是则返回一个错误。然而，Web 服务的使用者已经要求，因为可能的值不太可能经常更改，所以我们在 WSDL 中提供枚举值。

我不愿意使用我的 Web 服务代码创建枚举，因此我更改了生成的 WSDL 文件并指示我的 Web 服务使用它，而不是检查我的类来生成它。

**WSDL：**

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://example.org/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" targetNamespace="http://example.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <s:schema elementFormDefault="qualified" targetNamespace="http://example.org/">
      <s:element name="MyMethod">
        <s:complexType>
          <s:sequence>
            <s:element minOccurs="0" maxOccurs="1" name="myClass" type="tns:MyClass" />
          </s:sequence>
        </s:complexType>
      </s:element>
      <s:complexType name="MyClass">
        <s:sequence>
          <s:element minOccurs="0" maxOccurs="1" name="MyString" type="tns:MyStringPossibleValues" />
        </s:sequence>
      </s:complexType>
      <s:element name="MyMethodResponse">
        <s:complexType />
      </s:element>
      <s:simpleType name="MyStringPossibleValues">
        <s:restriction base="s:string">
          <s:enumeration value="alpha" />
          <s:enumeration value="bravo" />
        </s:restriction>
      </s:simpleType>
    </s:schema>
  </wsdl:types>
  <wsdl:message name="MyMethodSoapIn">
    <wsdl:part name="parameters" element="tns:MyMethod" />
  </wsdl:message>
  <wsdl:message name="MyMethodSoapOut">
    <wsdl:part name="parameters" element="tns:MyMethodResponse" />
  </wsdl:message>
  <wsdl:portType name="ExternalAccessSoap">
    <wsdl:operation name="MyMethod">
      <wsdl:input message="tns:MyMethodSoapIn" />
      <wsdl:output message="tns:MyMethodSoapOut" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:portType name="ExternalAccessHttpGet" />
  <wsdl:portType name="ExternalAccessHttpPost" />
  <wsdl:binding name="ExternalAccessSoap" type="tns:ExternalAccessSoap">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="MyMethod">
      <soap:operation soapAction="http://example.org/MyMethod" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="ExternalAccessSoap12" type="tns:ExternalAccessSoap">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="MyMethod">
      <soap12:operation soapAction="http://example.org/MyMethod" style="document" />
      <wsdl:input>
        <soap12:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
</wsdl:definitions> 
```

**网络服务：**

```
namespace Example.Service
{
    [WebService(Namespace = "http://example.org/")]
    [WebServiceBinding(
        ConformsTo = WsiProfiles.BasicProfile1_1,
        Location="ExternalAccess.wsdl",
        Name="ExternalAccessSoap",
        Namespace = "http://example.org/")]
    [ToolboxItem(false)]
    public class ExternalAccess : System.Web.Services.WebService
    {
        public class MyClass
        {
            public string MyString;
        }

        [WebMethod]
        [SoapDocumentMethod(
            Action = "http://example.org/MyMethod",
            RequestNamespace = "http://example.org/",
            Binding="ExternalAccessSoap")]
        public void MyMethod(MyClass myClass)
        {
        }
    }
} 
```

**问题：** 由于 WSDL 指定了 MyString 的枚举并且代码指定了字符串类型，ASP.NET 无法正确映射字段。

是否有一个属性可以用来指示反序列化器用枚举值填充字符串字段？

问候，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T08:25:27.340

在经历了为我创建一个soap扩展的过程后，我发现它`MyString`实际上并没有被发送到我的网络服务。

这是因为该服务的测试应用程序也是在 .NET 中构建的，并且在构建请求对象时，`MyStringSpecified`生成的代理类的属性被忽略了。这会阻止枚举值作为 SOAP 请求的一部分发送。

当此属性设置为 true 时，枚举值已成功分配给`MyString`web 服务中的字段。

# python - windows的setsockopt坏了吗？

> ID：796957
> 
> 赞同：2
> 
> 时间：2009-04-28T09:14:59.337
> 
> 标签：python, windows, sockets, setsockopt

我希望能够重用一些端口，这就是我在套接字上使用**setsockopt的原因，代码如下：**

```
sock.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1) 
```

然而，这并没有真正起作用。我也没有收到绑定错误，但服务器套接字只是没有响应（它似乎已启动，但如果我尝试连接它，它不会进入选择循环）。如果脚本意外结束，则会出现此行为，并且如果我更改服务器正在侦听的端口，一切都会再次运行。你能提供一些建议吗？

编辑：我将套接字重命名为 sock。这只是我为此代码片段选择的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-02-18T23:00:36.003

看来 SO_REUSEADDR 在 Windows 和 Unix 上具有不同的语义。

请参阅此[msdn 文章](http://msdn.microsoft.com/en-us/library/ms740621(VS.85).aspx)（特别是“使用 SO_EXCLUSIVEADDRUSE”下方的图表）和此[unix 常见问题](http://www.developerweb.net/forum/showthread.php?t=2981)解答。

此外，请参阅此[python 错误讨论](http://bugs.python.org/issue2550)、此[扭曲错误讨论](http://twistedmatrix.com/trac/ticket/1151)以及此[Windows 和 Unix 套接字之间](http://itamarst.org/writings/win32sockets.html)的差异列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T09:30:02.700

`setsockopt`是一个套接字对象的方法。模块`socket`没有`setsockopt`属性。

# crystal-reports - 在 CrystalReports 查看器中以编程方式将纸张大小设置为 A4

> ID：796958
> 
> 赞同：0
> 
> 时间：2009-04-28T09:15:49.553
> 
> 标签：crystal-reports

我在 CrystalReports 设计器中看到的内容与我在以编程方式加载报表时在 CrystalReports 查看器中看到的不同。这是因为在设计器中我将纸张大小更改为 A4，而在查看器中默认为 Letter。

那么，如何将*代码*（c#）默认纸张尺寸更改为 A4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-28T09:34:07.713

查看器遵循系统设置（默认打印机的纸张尺寸）。您可以以编程方式更改底层报表的纸张大小（报表对象 PaperSize 属性）；它是否会影响查看器的默认设置，我不知道。

我们的应用程序仅更改特定打印机（POS 打印机）的纸张尺寸，但它也会更改报告默认打印机，在这种情况下，查看器会遵循打印机和纸张尺寸设置。CR 版本 9 - 也许以后的版本更灵活。

# django - 是否可以动态定义模型字段的名称？

> ID：796966
> 
> 赞同：0
> 
> 时间：2009-04-28T09:18:42.963
> 
> 标签：django, django-models

现在我有这个代码：

```
class Mymodel(models.Model):
    xxxx_count = ForeignCountField(filter={'foreign_table__xxxx': True})
    yyyy_count = ForeignCountField(filter={'foreign_table__yyyy': True})
    zzzz_count = ForeignCountField(filter={'foreign_table__zzzz': True})
    qqqq_count = ForeignCountField(filter={'foreign_table__qqqq': True})
    ssss_count = ForeignCountField(filter={'foreign_table__ssss': True})
    rrrr_count = ForeignCountField(filter={'foreign_table__rrrr': True}) 
```

我想要这样的东西：

```
class Mymodel(models.Model):
    for code in ['xxxx','yyyy','zzzz','qqqq','ssss','rrrr']:
        setattr(self, '%s_count' % code, ForeignCountField(filter={'foreign_table__%s' % code: True})) 
```

但是当我尝试这样做时，出现错误：“自我没有定义”。我需要把这段代码放到其他地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-28T21:19:15.057

自动创建多个类属性的方法是编写元类。当然可以继承 Django 的 ModelBase 元类并添加您需要的功能；但这也将是矫枉过正，并且可能比仅仅写出来更难维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-29T08:56:03.460

我想更多地了解使您达到这一点的设计决策。什么是 ForeignCountField，为什么需要它？它不应该是各个表的属性吗？（管理器上的方法还是类方法？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-29T09:48:25.643

如果要在模型定义之外添加字段，则必须使用`add_to_class`模型方法：

```
class Mymodel(models.Model):
    pass

for code in ['xxxx','yyyy','zzzz','qqqq','ssss','rrrr']:
    Mymodel.add_to_class('%s_count' % code, ForeignCountField(filter={'foreign_table__%s' % code: True}))) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-28T09:28:38.180

也许您需要将代码放在类的构造函数方法**init**中。

```
def __init__(self, *args, **kwargs):
    .....
    super(MyModel, self).__init__(*args, **kwargs) 
```

编辑：对不起**，这不起作用**。也许您可以尝试查看[This](http://code.djangoproject.com/wiki/DynamicModels)，*'这适用于 django 0.96。有一些修改使得很难用 django 1.0 版调整它。*

如果你不想它又脏又快，你可以尝试这样的事情：

```
class Foo(models.Model):
    letters = ["A", "B", "C"]
    for l in letters:
        exec "%s_count = models.CharField(max_length=255)" % l 
```

# c# - 以更简单的方式获得结果

> ID：796969
> 
> 赞同：0
> 
> 时间：2009-04-28T09:20:34.003
> 
> 标签：c#

我需要得到一个包含原始数组的反向备用元素的数组。

例如：包含元素 {12,56,67} 的数组。

我需要得到一个包含 {67,12} 的数组（反转数组以获取 {67,56,12} 然后采用备用元素意味着 {67,12}）

我需要在 c# 中执行此操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T09:46:10.480

这不会是您得到的最短答案，但对我来说似乎相当优化。

```
int[] rgIn = new int[]{0,1,2,3,4,5};

int[] rgOut = new int[rgIn.Length / 2];

int ixOut = 0;
for (int ixIn = rgIn.Length - 2; ixIn >= 0; ixIn -= 2)
{
    rgOut[ixOut++] = rgIn[ixIn];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T09:34:23.703

如果您使用的是 C# 3，请尝试以下操作：

```
int[] array = {1,2,3,4,5,6};
var x = array.Reverse().Where( (n,i) => i % 2 !=0); 
```

Where 是一种扩展方法（C# 3.0 中的新方法），它构成称为 LINQ 的语言功能的一部分。它根据谓词过滤序列。在上面的示例中，n 是序列的元素，i 是序列中元素的从零开始的索引。两者都是强类型。谓词 i%2!=0 是说元素的索引不能直接被 2 整除，所以我们说的是反转列表并从中选择奇数元素。

不是最有效的解决方案，但简洁明了。

# python - 如何在没有多次出现的情况下在 django 中查询过滤器

> ID：796971
> 
> 赞同：1
> 
> 时间：2009-04-28T09:20:54.690
> 
> 标签：python, django

我有 2 个模型：

ParentModel：“只是”坐在那里

ChildModel：有 ParentModel 的外键

`ParentModel.objects.filter(childmodel__in=ChildModel.objects.all())`给出多次出现的 ParentModel.

如何查询至少有一个 ChildModel 引用它的所有 ParentModel？并且没有多次出现......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-28T09:31:16.177

你几乎猜对了...

```
ParentModel.objects.filter(childmodel__in=ChildModel.objects.all()).distinct() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T17:12:31.980

`childmodel__in=ChildModel.objects.all()`如果`ChildModel`对象数量很大，您可能希望避免使用。这将生成`ChildModel`一个列表中枚举所有 id 的 SQL，可能会创建一个巨大的 SQL 查询。

如果您可以使用支持[聚合的 Django 1.1](http://docs.djangoproject.com/en/dev/topics/db/aggregation/#topics-db-aggregation)，您可以执行以下操作：

```
ParentModel.objects.annotate(num_children=Count('child')).filter(num_children__gte=1) 
```

这应该会生成更好的 SQL。

# php - 弄清楚我是否在附近

> ID：796976
> 
> 赞同：1
> 
> 时间：2009-04-28T09:21:33.690
> 
> 标签：php, geolocation, gps, gis, location

我有我当前的位置 lat long，我有一个地方列表，那里有 lat long。

我想做的是弄清楚我是否在其中一个地方附近，附近会是+100m。我不想显示地图，只要知道我是否在附近。

什么样的 php 库可用于比较位置/纬度？或者我可以用数学解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-28T09:27:04.173

[使用经度和纬度确定距离](http://www.mathforum.com/library/drmath/view/51711.html)

> 这个问题可以通过使用地球上的球坐标最容易地解决。你以前处理过这些吗？这是从球坐标到普通直角坐标的转换，其中 a=纬度，b=经度，r 是地球的半径：
> 
> x = r Cos[a] Cos[b]
> y = r Cos[a] Sin[b]
> z = r Sin[a]
> 
> 然后我们将使用点积的以下属性（记为 [p,q]）：
> 
> [p,q] = 长度[p] * 长度[q] * Cos[p & q 之间的角度]
> 
> (...)

至少，如果身高对你来说并不重要。如果您需要高度和/或距离取决于道路或可步行性（这甚至是一个词吗？），我认为谷歌地图会更准确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T09:30:29.033

考虑到它们的球坐标（纬度/经度），计算两点之间的距离并不难。在 Google 上快速搜索“纬度经度距离”会发现这个等式。

显然是这样的：

```
acos(cos(a.lat) * cos(a.lon) * cos(b.lat) * cos(b.lon) +
     cos(a.lat) * sin(a.lon) * cos(b.lat) * sin(b.lon) +
     sin(a.lat) * sin(b.lat)) * r 
```

where`a`和`b`是您的点，并且`r`是地球的平均半径（6371 公里）。

一旦您能够根据坐标计算两点之间的距离，您将需要遍历所有地标并查看您当前的位置是否在一个附近。

但是，如果您有许多地标，您可能需要使用空间搜索算法（可能使用[四叉树](http://en.wikipedia.org/wiki/Quadtree)或类似的数据结构）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T09:41:36.323

[http://blog.wekeroad.com/2007/08/30/linq-and-geocoding](http://blog.wekeroad.com/2007/08/30/linq-and-geocoding)用于 LINQ 示例 [http://www.codeproject.com/KB/cs/distancebetweenlocations.aspx](http://www.codeproject.com/KB/cs/distancebetweenlocations.aspx)用于 C# 和 TSQL 示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-28T09:51:36.597

我不熟悉这个问题的软件库。但是如果你在 2D 空间中说话，那么我想到了一些数学：

您可以使用以下计算找到 2D 空间中任意 2 个点的距离：

距离 = sqrt( (X2 - X1)^2 + (Y2 - Y1 )^2 )

其中 ^2 表示以 2 为动力。

所以假设你有一个 Point 对象数组（这里我为 Points 定义了一个简单的类），这样你就可以找出哪些点是相邻的：

```
class Point {
    protected $_x = 0;
    protected $_y = 0;

    public function __construct($x,$y) {
         $this->_x = $x;
         $this->_y = $y;
    }
    public function getX() {
         return $this->_x;
    }

    public function getY() {
    return $this->_y;
    }    

    public function getDistanceFrom($x,$y) {
        $distance = sqrt( pow($x - $this->_x , 2) + pow($y - $this->_y , 2) );
        return $distance;
    }

    public function isCloseTo($point=null,$threshold=10) {
        $distance = $this->getDistanceFrom($point->getX(), $point->getY() );
        if ( abs($distance) <= $threshold ) return true;
        return false;
    }

    public function addNeighbor($point) {
        array_push($this->_neighbors,$point);
        return count($this->_neighbors);
    }

    public function getNeighbors() {
        return $this->_neighors;
    }
}

$threshold = 100; // the threshold that if 2 points are closer than it, they are called "close" in our application
$pointList = array();
/*
 * here you populate your point objects into the $pointList array.
*/
// you have your coordinates, right?
$myPoint = new Point($myXCoordinate, $myYCoordinate);

foreach ($pointList as $point) {
   if ($myPoint->isCloseTo($point,$threshold) {
       $myPoint->addNeighbor($point);
   }
}

$nearbyPointsList = $myPoint->getNeighbors(); 
```

编辑：对不起，我忘记了线性距离公式。X 和 Y 轴距离值都应该以 2 为幂，然后它们的总和的 sqrt 就是结果。代码现已更正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-28T20:27:19.250

我不熟悉这个包，但 [GeoClass](http://www.multimediamotz.de/GeoClass)可能有用。

我在[FreeGIS](http://freegis.org)网站上找到了它。如果这不是您要寻找的，那么软件部分中还列出了许多其他 php 包。

# c# - Linq2SQL 处理具有唯一约束的表上的插入/删除

> ID：796978
> 
> 赞同：5
> 
> 时间：2009-04-28T09:22:20.350
> 
> 标签：c#, .net, linq, linq-to-sql

我有一个如下所示的表：

```
TABLE Foo
{
  Guid Id [PK],
  int A [FK],
  int B [FK],
  int C [FK],
} 
```

以及对 A、B 和 C 的唯一约束。

现在说，例如，您插入带有 A = 1、B = 1、C = 1 的新 PK 的行。

`SubmitChanges()`，皆大欢喜。

现在您编辑表格。

您删除前一个条目，并插入一个带有 A = 1、B = 1、C = 1 的 fresk PK 的行。

`SubmitChanges()`繁荣！唯一键约束 SQL 异常。

据我所知，它首先尝试插入新记录，然后尝试删除前一条记录。我什至可以理解，无法确定这需要发生的顺序。

但我能做些什么呢？将这 3 个字段作为复合 PK（并删除旧的）会是一个更好的解决方案，还是不会起作用？

目前，“解决方案”是从数据库中删除唯一约束（但我宁愿不这样做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-28T10:24:23.240

一种选择是创建一个事务（连接绑定事务或`TransactionScope`） - 删除记录 and `SubmitChanges`，添加记录 and `SubmitChanges`，然后最终提交事务（或者如果您崩溃了则回滚）。

请注意，您可以通过数据上下文构造函数 IIRC 关联连接绑定事务。`TransactionScope`也应该工作，并且更容易做到 - 但效率不高。

或者，编写一个在数据库中执行此交换作业的 SP，并*通过*数据上下文访问该 SP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-02T04:33:29.147

我有同样的问题。最终编写了一个包装类，其中包含我维护的“已添加”和“已删除”实体集合。以及“当前”系列。UI 绑定到当前集合。

只有当我去保存时，我才会 InsertOnSubmit / DeleteOnSubmit，然后我解析 2 个集合来决定哪些实体要做什么。

# mysql - MySQL / Rails 性能：一张表，多行 vs. 多表，少行？

> ID：796981
> 
> 赞同：1
> 
> 时间：2009-04-28T09:23:24.543
> 
> 标签：mysql, ruby-on-rails, performance, single-table-inheritance

在我的 Rails 应用程序中，我有几个处理资产（附件、图片、徽标等）的模型。我正在使用 attachment_fu ，到目前为止，我有 3 个不同的表用于将信息存储在我的 MySQL 数据库中。

我想知道如果我使用 STI 并将所有信息仅放在一个表中，使用类型列并具有不同的继承类，它是否会对性能产生影响。它会更 DRY 并且更容易维护，因为它们都共享许多属性和特征。

但更快的是什么？很多表，每张表的行数少，还是只有一张表多行？还是根本没有区别？我必须每秒处理大量信息和许多查询。

感谢您的意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-28T09:38:44.147

许多表和更少的行可能更快。

不过，这不是您应该这样做的原因：您的数据库应该为您的问题域建模。一张表是许多实体类型的糟糕模型。因此，您最终将编写大量代码来查找该表的子集，该子集代表您当前关注的实体类型。

常规的、可接受的、干净的数据库和前端客户端代码将无法正常工作，因为您的一张表就是所有东西，而根本没有东西。

它更慢，更脆弱，会在你的应用程序中增加你的代码，并制作一个糟糕的模型。

*仅*当所有事物在您的问题域中具有完全相同的属性*和*相同（或可能是 Liskov 可替代的）语义时，才这样做。

*否则，甚至不要尝试这样做。*

或者，如果您这样做，请问为什么这比使用一个大的 Map/哈希表/关联数组来保存您的应用程序中的所有实体（以及许多功能，其中大多数是重复的、剪切和粘贴的、过时的）更好`switch`案例或 RTTI 来确定每个实体的真实类型）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T09:37:33.260

唯一确定的方法是尝试这两种方法并衡量性能。

一般而言，这取决于您是否在这些表之间进行连接，如果是，那么这些表的索引方式。一般来说，数据库连接很昂贵，这就是为什么有时会非规范化数据库模式以提高性能的原因。在您处理大量数据（即数百万条记录）之前，通常不会发生这种情况。你可能还没有这个问题，也许永远不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-16T15:25:21.433

如果行具有相同的属性，那么，是的，一个表非常好，只有一行来指定数据类型，否则，使用不同的表来处理，这样在性能、代码量甚至代码的易读性上都会更好。

# testing - 什么是火鸡测试？

> ID：796986
> 
> 赞同：53
> 
> 时间：2009-04-28T09:25:06.987
> 
> 标签：testing, localization, internationalization, turkey-test

我在学习代码测试时遇到了“土耳其测试”这个词。我真的不知道这意味着什么。

什么是火鸡测试？为什么这样称呼？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-04-28T09:39:51.850

土耳其问题与软件国际化有关，或者只是与它在各种语言文化中的不当行为有关。

在不同的国家/地区有不同的标准，例如书写日期（土耳其的 14.04.2008 和美国的 4/14/2008）、数字（即波兰的 123,45 和美国的 123.45）和关于字符大写的规则（如带有字母 i、I 和 ı) 的土耳其。

正如[Jeff Moser](https://stackoverflow.com/users/1869/jeff-moser)在下面指出的那样，一位土耳其用户指出了一个这样的问题，他在`ToUpper()`函数中发现了一个错误。下面的评论中有更多细节。

但是，问题不仅限于土耳其和字符串转换。

例如，在波兰和许多其他国家，日期和数字也以不同的方式书写。

[谷歌搜索土耳其测试的](http://www.google.pl/search?q=The+Turkey+Test)一些链接：

*   [您的代码是否通过了土耳其测试？](http://www.moserware.com/2008/02/does-your-code-pass-turkey-test.html) 杰夫·莫泽
*   [土耳其怎么了？](http://blog.codinghorror.com/whats-wrong-with-turkey/) 通过杰夫阿特伍德

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-04-28T09:29:44.637

[这里描述了火鸡测试](http://www.moserware.com/2008/02/does-your-code-pass-turkey-test.html)

> 忘掉土耳其吧，这甚至不会在美国发生。您需要不区分大小写的比较。所以你尝试：
> 
> ```
> String.Compare(string,string,bool ignoreCase): 
> ```
> 
> ……
> 
> 这些是否通过了“火鸡测试”？
> 
> **没有机会！**
> 
> 原因：您遇到了“土耳其语 I”问题。
> 
> 正如很多人所讨论的那样，土耳其语中的“我”的行为与大多数语言中的不同。根据 Unicode 标准，我们的小写“i”在变为大写时变为“İ”（U+0130“拉丁大写字母 I，上面带有点”）。类似地，我们的大写“I”在变为小写时变为“ı”（U+0131“Latin Small Letter Dotless I”）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2010-10-28T18:54:23.183

我们将日期从小到大写成 dd.MM.yyyy: 28.10.2010

我们使用 '.'（点）作为千位分隔符，使用 ','（逗号）作为小数分隔符：4.567,9

我们有ö=>Ö, ç=>Ç, ş=>Ş, ğ=>Ğ, ü=>Ü,**最重要的是 ı=>I 和 i => İ** ; 换句话说，上 i 的小写字母是无点的，而小写 i 的大写字母是点状的。

由于上述规则造成的无意义的错误，人们可能会感到非常紧张。

如果您的代码在土耳其正常运行，它可能会在任何地方运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-28T09:46:26.483

所谓的“土耳其测试”与软件国际化有关。全球化/国际化的一个问题是，不同文化中的日期和时间格式可能在许多层面上有所不同（日/月/年顺序、日期分隔符等）。

此外，土耳其有一些特殊的大写规则，这可能会导致问题。例如，土耳其语“i”字符是许多以错误方式大写它的程序的常见问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-28T09:42:29.253

@Luixv 提供的链接对问题进行了全面的描述。

总结是，如果您只在一种非英语语言环境中测试您的代码，请在土耳其语环境中进行测试。

这是因为土耳其语具有您在本地化时可能遇到的大多数边缘情况的实例，包括“不寻常的”格式字符串和非标准字符（例如 i 的不同大写规则）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-28T09:44:14.837

Jeff Atwood 有一篇关于同一的博客文章，这是我自己第一次遇到它。总之，尝试在土耳其语区域设置下运行您的应用程序是对您的 I18n 的极好测试。

这是杰夫的[文章](http://www.codinghorror.com/blog/archives/001075.html)

# svn - Fork 并将 Google Code Subversion 存储库同步到 GitHub

> ID：796991
> 
> 赞同：131
> 
> 时间：2009-04-28T09:26:21.727
> 
> 标签：svn, git, github

如何将我没有写入权限的 Google Code Subversion 存储库分叉并保持同步到 GitHub 存储库？

我希望能够在我的 Git 存储库中开发自己的功能，但我也想与 Google Code Subversion 存储库同步。从 Google 代码项目方面获取修复。

我知道 git-svn 并且之前使用它来向上和下游到我可以完全控制的 Subversion 存储库。但我不知道如何与 Google Code Subversion 存储库保持同步。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2009-04-28T12:01:56.377

来自 git-svn 的远程分支与普通的 Git 远程分支几乎相同。因此，在您的本地存储库中，您可以克隆 git-svn 并将更改推送到 GitHub。吉特不在乎。如果您创建 git-svn 克隆并将完全相同的更改推送到 GitHub，您将拥有 Google 代码存储库的非官方镜像。剩下的就是普通的 Git。

```
git svn clone http://example.googlecode.com/svn -s
git remote add origin git@github.com:example/example.git
git push origin master 
```

现在您有了这个，有时您必须将 Subversion 存储库与 Git 同步。它看起来像：

```
git svn rebase
git push 
```

在 gitk 或其他任何东西中，这看起来像这样：

```
o [master][remotes/trunk][remotes/origin/master]
|
o
|
o 
```

当你运行时`git svn rebase`，你会得到这个：

```
o [master][remotes/trunk]
|
o
|
o [remotes/origin/master]
|
o
|
o 
```

所以现在运行`git push`会将这些提交推送到 GitHub，那里的*[remotes/origin/master]*分支。你会回到第一个 ASCII 艺术图中的场景。

现在的问题是，您如何将您的更改融入其中？这个想法是，你永远不会提交到你正在 git-svn-rebase-ing 和 git-pushing 的同一个分支上。您需要一个单独的分支来进行更改。否则，您最终会在 Subversion 的基础上重新调整您的更改，这可能会让克隆您的 Git 存储库的任何人感到不安。跟着我？好的，所以你创建了一个分支，我们称之为“功能”。然后你做出一个提交并将其推送到 GitHub 的功能分支。你的 gitk 看起来像这样：

```
o [features][remotes/origin/features]
|
o
|
o [master][remotes/trunk][remotes/origin/master]
|
o 
```

在这里，您的 features 分支在 Google Code 分支之前有几个提交，对吧？那么，当您想从 Google 代码中整合新内容时会发生什么？你会`git svn rebase`先运行并得到这个：

```
 o [features][remotes/origin/features]
[master][remotes/trunk] o  |
                        |  o
                        o /
                        |/
                        o[remotes/origin/master]
                        |
                        o 
```

如果您`git push`掌握了，您可以想象*[remotes/origin/master]*与 master 处于同一位置。但是您的功能分支没有更改。您现在的选择是将 master 合并到 features 中，或者 rebase features。合并看起来像这样

```
git checkout features
git merge master 

            o [features]
           /|
          / o [remotes/origin/features]
[master] o  |
         |  o
         o /
         |/
         o
         |
         o 
```

然后将功能推送到 GitHub。为了节省空间，我为 master 保留了遥控器，它们与*[master]*处于同一位置。

rebase 方法稍微更邪恶——你必须使用 --force 推动，因为你的推动不会是快进合并（你会从克隆它的人那里拉出功能分支）。这样做并不被认为是可以的，但如果你下定决心，没有人可以阻止你。它确实也使一些事情变得更容易，例如当补丁以略微修改的形式被上游接受时。它可以省去处理冲突的麻烦，你可以 rebase --skip 上游补丁。无论如何，一个变基会是这样的：

```
git rebase master features

         o [features]
         |
         o
         |  o [remotes/origin/features]
[master] o  |
         |  o
         o /
         |/
         o
         |
         o 
```

然后你将不得不这样`git push --force`做。你可以看到为什么你需要强制它，历史从*[remotes/origin/features]*到新的当前 post-rebase *[features]*有很大的分裂。

这一切都有效，但需要付出很多努力。如果你打算成为一名普通的贡献者，最好的办法是像这样工作一段时间，向上游发送一些补丁，看看你是否可以获得对 Subversion 的提交访问权限。如果做不到这一点，也许不要将您的更改推送到 GitHub。将它们保留在本地并尝试让它们在上游被接受。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-23T01:39:46.420

# svn2github 服务

网站[http://svn2github.com/](http://svn2github.com/)提供了一项服务，可以将任何可公开访问的 SVN 存储库分叉到 Github（位于[https://github.com/svn2github/projectname](https://github.com/svn2github/projectname)）。我尝试过这个; 按“制作镜子”后，它显然在几秒钟内什么也没做，并显示消息“错误”，但它确实有效。实际上创建了新的存储库，其中包含来自 SVN 存储库的代码。

然后，您将 fork 它创建的存储库，并在您自己的 fork 上工作。然后，您将使用他们的 bugtracker 将您的更改提交到上游项目。

查看服务的 Github 用户下的现有存储库（例如“5 小时前在 svn2github/haxe 上推送到 master 的 svn2github”），它似乎确实定期从 SVN 存储库中提取更改。没有关于谁在网站上运行该服务的信息，所以我不会打赌它会无限期地继续运行，但它现在可以工作（如果它出现故障，你仍然可以手动更新你的 fork）。

# 发射台

如果您不打算使用 Git 和 Github，另一种选择是使用 Launchpad.net。Launchpad 可以自动将 SVN（也称为 CVS）存储库导入个人 bzr 分支。为此，创建一个 Launchpad 项目，然后转到[新的导入页面](https://code.launchpad.net/+code-imports/+new)，选择 Subversion 并输入 URL（例如`http://projectname.googlecode.com/svn/trunk/`）。根据项目大小，初始导入可能需要几个小时。后续导入将定期运行。

有关更多文档，请参阅[Launchpad 帮助上的 VCS 导入](https://help.launchpad.net/VcsImports)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-12-10T08:05:35.787

[fnokd.com](http://web.archive.org/web/20100227093243/http://www.fnokd.com/2008/08/20/mirroring-svn-repository-to-github/)上提供了从 Google 代码同步到 GitHub 的演练。作者使用一个永远在线的远程服务器和一个 cron 作业来自动同步，并将 SVN 主干保存在一个名为“vendor”的 GitHub 分支中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-12-14T08:50:57.753

GitHub 现在支持直接导入 subversion 项目（参见[http://help.github.com/import-from-subversion/](http://help.github.com/import-from-subversion/)）。只需创建一个新的存储库，然后在“下一步”屏幕上单击“从 Subversion 导入”。但是，它不支持进一步同步：/。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-28T09:43:12.343

嗯..在我的公司里，我做的几乎一样。只需将 .svn 和 .git repo 放在同一个目录中（您签出 svn repo 并在此工作副本中创建 git repo）。

然后使用 svn up 和 git push 做了这件事。当然，如果您分歧很大，则必须手动合并。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-28T12:01:59.357

我不太确定你想要什么，但你当然可以从 subversion 存储库中提取并从同一个工作副本推送到 Git 存储库。而且您还可以`git svn dcommit`返回到 subversion 存储库。但是，您不能使 GitHub 存储库与 subversion 存储库同步。此外，当您的工作副本中有尚未在 subversion 存储库中的提交时，如果 subversion 存储库已更新，您将需要对它们进行 rebase，从而强制您`git push --force`将“新”提交到 GitHub。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-25T23:38:13.187

[我在Yu-Jie Lin](http://blog.yjl.im/2008/10/setting-up-git-mirror-on-github-for.html)的博客上找到了这些说明：

首先克隆 Subversion 存储库并推送到 Git：

```
git svn clone https://foo.googlecode.com/svn/ git-foo 
cd git-foo
git remote add git-foo git@github.com:username/foo.git 
git push git-foo master 
```

在 Subversion 存储库中提交后，运行

```
cd /path/to/git-foo
git svn fetch 
git svn rebase 
git push git-foo master 
```

# c# - 将图像的像素高度转换为图形对象使用的打印尺寸

> ID：796993
> 
> 赞同：1
> 
> 时间：2009-04-28T09:26:27.077
> 
> 标签：c#, .net, graphics, printing

作为我的应用程序打印过程的一部分，我正在尝试打印缩小到指定宽度并放置在另一个下方的图像列表。问题是我无法弄清楚如何将图像的像素高度转换为打印期间图形对象使用的单位高度。如何正确计算 imageHeightPrint 变量？

此代码片段是图像打印循环的一部分，它按比例缩小图像并计算其高度和下一张图像的位置。

```
Image image = Image.FromStream(imageStream);

// Get proportional correct height
int imageHeight = image.Height * imageWidth / image.Width;

Image imageToPrint = image.GetThumbnailImage(imageWidth, imageHeight, null, IntPtr.Zero);

float imageHeightPrint = e.Graphics.DpiY * imageToPrint.Height / imageToPrint.VerticalResolution;

e.Graphics.DrawImage(imageToPrint, e.MarginBounds.Left, yPos);

yPos += imageHeightPrint; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T12:39:03.650

剖析文档后，我自己找到了正确的解决方案。

这一行：

```
float imageHeightPrint = e.Graphics.DpiY * imageToPrint.Height / imageToPrint.VerticalResolution; 
```

应该改成这样：

```
float imageHeightPrint = imageToPrint.Height / 
                         imageToPrint.VerticalResolution * 100; 
```

我错过的最大的事情是印刷高度应该是百分之一英寸。

# asp.net - 即使执行成功，ExecuteNonQuery 也会返回 -1

> ID：796999
> 
> 赞同：3
> 
> 时间：2009-04-28T09:29:22.110
> 
> 标签：asp.net, sql

我正在运行一个 asp.net 2.0 Web 应用程序。今天早上突然，ExecuteNonQuery 开始返回 -1，即使 ExecuteNonQuery 正在运行的 SP 中的命令正在执行（我看到数据库中插入和更新的项目），并且没有抛出异常。

仅当我连接到我们的生产数据库时才会发生这种情况。当我连接到我们的开发数据库时，它们会返回正确的受影响行数。

另外，有趣的是，ExecuteDataSet 没有问题——它返回的 DataSet 很漂亮。

所以这似乎不是连接问题。但是，那还能是什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-28T09:46:13.287

您还可以检查程序以查看其中是否有这行代码 -

```
SET NOCOUNT ON 
```

这将导致 ExecuteNonQuery 始终返回 -1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T09:33:29.683

-1 表示“没有行影响”。
SELECT 语句也将返回 -1。

检查 SP 对开发和实际环境的影响。

取自[SqlCommand::ExecuteNonQuery 方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T09:44:37.877

我在使用 NpgsqlDataAdapter 时遇到[了几乎相同的问题（尽管在 Postgresql 中），Update 方法总是返回 1。](https://stackoverflow.com/questions/563865/why-this-npgsqldataadapter-update-command-always-return-1)

也许您到开发数据库的连接字符串与您的生产数据库不同。或者，如果它们的连接字符串之间确实没有区别，那么您的生产数据库的服务包可能与您的开发数据库不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T13:48:35.490

[ExecuteNonQuery 根据msdn](https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery(v=vs.110).aspx#See%20Also)为所有类型的存储过程返回 -1

只有在满足的情况下才会返回更新的记录值*************************