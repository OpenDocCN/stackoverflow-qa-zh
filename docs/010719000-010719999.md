# StackOverflow 问答 10719000-10719999

# c - 整数变量中总是垃圾

> ID：10719002
> 
> 赞同：0
> 
> 时间：2012-05-23T11:29:35.400
> 
> 标签：c, integer

此代码是计算函数 f(x) 的积分程序

在这里..函数是 f(x)= x^2

```
int main()
{
float integral;
float a=0,b=0;
int n=1024;
float h;
float x;
int i;

float f(float x);

printf("Enter a, b \n");
scanf("%f %f" , &a, &b);
printf("Enter  n\n");
scanf("%d" , &n);

h=(b-a)/n;
integral = (f(a)+f(b))/2;
x=a;
for (i = 0; i <= n-1; n++)
{
    x = x + h;
    integral = integral + f(x);
}
integral = integral * h ;

printf("with n = %d trapezoids, our esrimate\n", n );
printf("of the integral from %f to %f =  %f\n", a , b , integral);

system("pause");
return 0;

}

float f(float x)
{
  return x*x;
} 
```

n 的输出总是垃圾..我不知道为什么我的错在哪里？

这个问题很愚蠢

但我真的很累找错了 ![在此处输入图像描述](../Images/7607e18ca321ab69313a199c42bb5198.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:32:48.957

这是你的错误：`for (i = 0; i <= n-1; n++)`。你递增`n`而不是`i`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T11:33:01.220

错误就在这里，可能是错字：

```
for (i = 0; i <= n-1; n++) 
```

顺便说一句，程序中还有另一个错字：应该*估计**esrimate* :)

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:34:01.237

你必须清理键盘内存

[冲洗](http://openbook.galileocomputing.de/c_von_a_bis_z/016_c_ein_ausgabe_funktionen_013.htm#mj916b50e93a84be77b338cb8023b6fafc)

```
printf("Enter a, b \n");
scanf("%f %f" , &a, &b);
   fflush(stdin);
printf("Enter  n\n");
scanf("%d" , &n); 
```*

# android - 以 RadioButtons 作为句柄的 SlidingDrawer

> ID：10719005
> 
> 赞同：1
> 
> 时间：2012-05-23T11:29:40.957
> 
> 标签：android

我有一个使用 RadioButtons 作为其句柄的自定义可拖动 SlidingDrawer。为了在 RadioButtons 上启用触摸事件，我调用`return super.onInterceptTouchEvent(event);`而不是`return true`在`onInterceptTouchEvent`方法上。但不知何故，每次我想拖动我的 SlidingDrawer 时，我都无法通过准确地触摸 RadioButtons 来拖动它，我必须向上移动一点手指才能将 SlidingDrawer 向上拖动。

有什么方法可以通过触摸其 RadioButtons 来使 SlidingDrawer 完全可拖动，而不会丢失 RadioButtons 本身上的 TouchEvent？

这是我的触摸方法：

```
public boolean onInterceptTouchEvent(MotionEvent event) {

            if (mLocked) {
                //return false;
            }

            final int action = event.getAction();

            float x = event.getX();
            float y = event.getY();

            final Rect frame = mFrame;
            final View handle = mHandle;

            handle.getHitRect(frame);
            if (!mTracking && !frame.contains((int) x, (int) y)) {
                return false;
            }

            if (action == MotionEvent.ACTION_DOWN) {
                mTracking = true;
                WWHApplication.getListActivityIntance().resizeListView(1800);
                handle.setPressed(true);
                // Must be called before prepareTracking()
                prepareContent();
                // Must be called after prepareContent()
                if (mOnDrawerScrollListener != null) {
                    mOnDrawerScrollListener.onScrollStarted();
                }

                if (mVertical) {
                    final int top = mHandle.getTop();
                    mTouchDelta = (int) y - top;
                    prepareTracking(top);
                } else {
                    final int left = mHandle.getLeft();
                    mTouchDelta = (int) x - left;
                    prepareTracking(left);
                }
                mVelocityTracker.addMovement(event);
            }

            //return true;
            return super.onInterceptTouchEvent(event);

        } 
```

这是我的手柄的样子

```
 <LinearLayout
            android:id="@+id/handle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/tab_content_bg_top" />

            <HorizontalScrollView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/tab_content_bg"
                android:fillViewport="true"
                android:scrollbars="none" >

                <RadioGroup
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/cb_tab_all"
                        android:layout_width="46dp"
                        android:layout_height="45dp"
                        android:background="@drawable/checkbox_background"
                        android:button="@drawable/tab_all_selector"
                        android:onClick="true" />

                    <RadioButton
                        android:id="@+id/cb_tab_favorites"
                        android:layout_width="84dp"
                        android:layout_height="45dp"
                        android:background="@drawable/checkbox_background"
                        android:button="@drawable/tab_favorites_selector"
                        android:onClick="true" />

                    <RadioButton
                        android:id="@+id/cb_tab_historical"
                        android:layout_width="134dp"
                        android:layout_height="45dp"
                        android:background="@drawable/checkbox_background"
                        android:button="@drawable/tab_historical_selector"
                        android:onClick="true" />

                    <RadioButton
                        android:id="@+id/cb_tab_food"
                        android:layout_width="116dp"
                        android:layout_height="45dp"
                        android:background="@drawable/checkbox_background"
                        android:button="@drawable/tab_food_selector"
                        android:onClick="true" />
                </RadioGroup>
            </HorizontalScrollView>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/tab_content_bg_bottom" />
        </LinearLayout> 
```

# android - 跟踪来电动作

> ID：10719006
> 
> 赞同：1
> 
> 时间：2012-05-23T11:29:44.617
> 
> 标签：android, call, callstack

我知道这是一个被问到的问题。通过使用广播接收器和使用 android.intent.action.PHONE_STATE

在接收器标签中，您可以了解手机的操作。但是如何识别是来电还是去电呢？

这是我的代码

```
@Override
public void onReceive(Context context, Intent intent) 
{
    this.context = context ;
    System.out.println(":::called onReceiver:::");
    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    telephony.listen(phoneCallListener, PhoneStateListener.LISTEN_CALL_STATE);
}
private final PhoneStateListener phoneCallListener = new PhoneStateListener() 
{
        @Override
        public void onCallStateChanged(int state, String incomingNumber) 
        {
            switch(state)
            {
            case TelephonyManager.CALL_STATE_RINGING:
                 isRinging = true;
                 break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                 if (isRinging) 
                 {
                     hasAttended = true ;
                     isRinging = false;
                 } 
                 break;
            case TelephonyManager.CALL_STATE_IDLE:
                 if (hasAttended)
                 {
                     isCallEnded = true ;
                     hasAttended = false;
                 }
                 break;
            }
            if(isCallEnded)
            {
                isCallEnded=false;
                Intent callIntent = new Intent(context.getApplicationContext(),MyActivity.class);
                callIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(callIntent);
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    }; 
```

这里每次创建一个phoneCallListener对象，每次将onCallStateChanged的调用率增加一..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:34:37.127

[这](http://mfarhan133.wordpress.com/2010/10/15/manipulating-incoming-ougoing-calls-tutorial-for-android/)是一个方便的教程，它同时使用广播接收器和使用 android.intent.action.PHONE_STATE，根据调用状态创建不同的 toast。当你得到这个工作时，你将能够操纵代码在来电或去电时做你想做的事

首先你的班级必须`extend BroadcastReceiver`

接下来，您必须创建一个方法来侦听电话状态...`PhoneStateListener`它将在电话状态更改时进行侦听

`switch case`然后根据是来电还是去电做一个简单的接听电话

编辑

您需要做的就是编写一些代码来检查之前的状态是否为“响铃”。如果当前状态是空闲并且之前的状态是响铃，他们取消/错过了呼叫。如果当前状态是摘机而之前的状态是振铃，他们会接听电话。

```
switch(state){
        case TelephonyManager.CALL_STATE_RINGING:
             Log.i(LOG_TAG, "RINGING");
             wasRinging = true;
             break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
             Log.i(LOG_TAG, "OFFHOOK");

             if (!wasRinging) {
                 // Start your new activity
             } else {
                 // Cancel your old activity
             }

             // this should be the last piece of code before the break
             wasRinging = true;
             break;
        case TelephonyManager.CALL_STATE_IDLE:
             Log.i(LOG_TAG, "IDLE");
             // this should be the last piece of code before the break
             wasRinging = true;
             break;
    } 
```

# c++ - 如何避免样板代码构造函数？

> ID：10719015
> 
> 赞同：7
> 
> 时间：2012-05-23T11:30:16.193
> 
> 标签：c++, oop, inheritance

让我们像这样上课：

```
struct Base {
  Base() { ... }
  Base(int) { ... }
  Base(int,string) { ... }
  ...
}; 
```

我想继承很多类`Base`，所以我写

```
struct Son : public Base {
  Son() : Base() { }
  Son(int) : Base(int) { }
  Son(int,string) : Base(int,string) { }
};

struct Daughter : public Base {
  Daughter() : Base() { }
  Daughter(int) : Base(int) { }
  Daughter(int,string) : Base(int,string) { }
}; 
```

而且我不需要向孩子的构造函数添加任何代码。是否可以隐式继承它们？要像 in 一样调用它们`Base`，只需更改名称？预处理器可以在这里被滥用，但还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T11:41:16.070

在符合 C++11 的编译器（标准中的第 12.9 节）中，您实际上可以很容易地做到这一点：

```
struct Son : public Base {
  using Base::Base;
}; 
```

这继承了所有构造函数，`Base`并且等效于您的 class 代码`Son`。

# iphone - Iphone 如何从 UIWebView 访问相机？

> ID：10719016
> 
> 赞同：1
> 
> 时间：2012-05-23T11:30:20.407
> 
> 标签：iphone, objective-c, ios, ios5, cordova

> **可能重复：**
> [从 uiwebview 访问相机？](https://stackoverflow.com/questions/2915881/access-camera-from-uiwebview)

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;      
picker.allowsImageEditing = YES;      
picker.sourceType = UIImagePickerControllerSourceTypeCamera;       
[self presentModalViewController:picker animated:YES];
 return  NO; 
```

我正在使用上面的编码，但它不起作用..

如何从 webview 打开相机任何人帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:20:53.883

试试这个：

```
UIImagePickerController  *imgPicker = [[UIImagePickerController alloc] init];
imgPicker.delegate = self;
imgPicker.allowsImageEditing = YES;
imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
[self presentModalViewController:imgPicker animated:YES];
[imgPicker release]; 
```

下面是委托方法：

```
#pragma mark UIImagePickerController delegate
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
    UIImage *imgCapturePhoto = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [self dismissModalViewControllerAnimated:YES];
}
-(void)imagePickerControllerDidCancel:(UIImagePickerController *) picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

快乐的编码...

# iphone - 如何将 NSString 发送到另一个视图控制器

> ID：10719017
> 
> 赞同：0
> 
> 时间：2012-05-23T11:30:22.060
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, nsstring

我有一个 IBAction，它在触发时调用不同视图控制器（APICallsViewController）中的另一个方法。我希望也向该方法发送一个 NSString （消息）

这是我的 IBAction 推送到 APICallsViewController 以及 NSString 消息。我的问题可能是如何在另一个视图控制器的方法中获取该 NSString 的内容。

谢谢你的帮助

```
-(IBAction) someMethod{
        APICallsViewController *apiViewController = [[APICallsViewController alloc] init];
        [self.navigationController pushViewController:apiViewController animated:YES]; 

        NSString *message = [NSString stringWithFormat:@"Check out %@", nameLb.text];

        [apiViewController apiGraphUserCheckins];

        [apiViewController release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:33:52.267

在视图控制器中声明一个字符串到您必须传递字符串的位置。在您必须从中传递字符串的视图中，在您的情况下，设置为 apiViewController.stringintheotherview=message;

您的 APICallsViewController 中的字符串必须是合成的

```
 NSString *message = [NSString stringWithFormat:@"Check out %@", nameLb.text];
         APICallsViewController *apiViewController = [[APICallsViewController alloc] init];
 apiViewController.stringintheotherview=message;
            [self.navigationController pushViewController:apiViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:41:55.740

在 APICallsViewController.h 中执行此代码

```
@interface APICallsViewController : UIViewController{
   NSString *strMessage;

}
@property(nonatomic,retain) NSString *strMessage;

@end 
```

APICallsViewController.m

```
 @synthesize strMessage;

- (void)viewDidLoad {
Nslog(@"%@",strMessage); 
```

}

* * *

```
-(IBAction) someMethod{

    APICallsViewController *apiViewController = [[APICallsViewController alloc] init];
    [self.navigationController pushViewController:apiViewController animated:YES]; 

    NSString *message = [NSString stringWithFormat:@"Check out %@", nameLb.text];
    apiViewController.strMessage=message;
    [apiViewController apiGraphUserCheckins];

    [apiViewController release];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:42:23.583

为什么要以编程方式传递字符串，而不是声明函数参数？您可以将功能更改为类似

```
- (void) apiGraphUserCheckins:(NSString *)message; 
```

调用它

```
[apiViewController apiGraphUserCheckins:[NSString stringWithFormat:@"Check out %@", nameLb.text]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:06:50.403

在 SecondViewController 中声明一个属性。然后你可以通过2种方式在SecondViewController中获取字符串。

1.  在 FirstViewController someMethod 中为 secondviewController 创建对象后，您可以直接分配值

    > second.string2 = [NSString stringWithFormat:@"%@", [textField text]];

2.  在 SecondViewController 中创建一个方法并通过它进行分配。

# nfc - 如何访问 Mi-fare ultralight 1k 标签

> ID：10719022
> 
> 赞同：1
> 
> 时间：2012-05-23T11:30:36.603
> 
> 标签：nfc, mifare

请帮助我如何访问 Mi-fare ultralight 1k 标签。

我尝试了命令

```
ff 82 00 01 06 ff ff ff ff ff ff and ff 82 00 01 06 A1 A2 A3 A4 A5 A6 
```

在阅读器上成功加载。

但是当我尝试命令时

```
ff 88 00 01 60 00 
```

用于使用标签进行身份验证

状态字**63 00（操作失败）**

日志如下所示

```
[ACS ACR122 0] : Running script
[1] > ff 82 00 01 06 FF FF FF FF FF FF
< 90 00
[2] > ff 88 00 01 60 00
< 63 00
[ACS ACR122 0] : Running script
[1] > ff 82 00 01 06 A1 A2 A3 A4 A5 A6
< 90 00
[2] > ff 88 00 01 60 00
< 63 00 
```

* * *

我正在使用的 MIFARE 1K 标签的 ATR

```
3B 8F 80 01 80 4F 0C A0 00 00 03 06 03 00 01 00 00 00 00 6A 
```

下面给出了用于 MIFARE 1K 标签的 ACR122U 阅读器附带的脚本。这也是不成功的

MIFARE 1K 卡和 ACR122U PC/SC 读卡器的演示脚本

(c) 2008 年，Advanced Card Systems Ltd.

```
[1] Load (Mifare Default) key in reader (key location 0)
FF 82 00 00 06 FF FF FF FF FF FF (9000)

; [2] Authenticate sector 0, Block 0 with key at location 0
FF 86 00 00 05 01 00 00 60 00 (9000)

; [3] Read the full 16 bytes from Sector 0, Block 1
FF B0 00 01 10 [xx xx xx xx xx xx xx xx xx xx xx xx xx xx xx xx] (9000)

; [4] Update the 16 bytes in Sector 0, block 1
FF D6 00 01 10 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F (9000)

; [5] Read the full 16 bytes from Sector 0, Block 1 again
FF B0 00 01 10 [xx xx xx xx xx xx xx xx xx xx xx xx xx xx xx xx] (9000)

; [6] Authenticate sector 1, Block 5 with key at location 0
FF 86 00 00 05 01 00 05 60 00 (9000)

; [7] Store a value "1" into block 5
FF D7 00 05 05 00 00 00 00 01 (9000)

; [8] Read the value block 5
FF B1 00 05 04 [xx xx xx xx] (9000)

; [9] Copy the value from value block 5 to value block 6
FF D7 00 05 02 03 06 (9000)

; [10] Read the value block 6
FF B1 00 06 04 [xx xx xx xx] (9000)

; [11] Increment the value block 5 by "5"
FF D7 00 05 05 01 00 00 00 05 (9000)

; [12] Read the value block 5
FF B1 00 05 04 [xx xx xx xx] (9000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:55:44.517

这张卡在我看来就像 MIFARE Classic 1K。

我认为您要与之进行身份验证的密钥号有误。尝试这个：

```
ff 82 00 01 06 FF FF FF FF FF FF  //Set key with on slot 1
ff 88 00 01 60 01                 //Auth with key from slot 1 to block 1 
```

我希望这将有所帮助。

# php - 编写一个单元测试来测试一个返回它自己的类常量的静态方法

> ID：10719026
> 
> 赞同：2
> 
> 时间：2012-05-23T11:30:42.060
> 
> 标签：php, unit-testing, static-methods

我的任务是为具有一堆静态方法的类编写单元测试，其中大多数返回类本身中定义的某种常量，并且正在思考测试的价值，它只是在测试中断言事物本身。例如：

```
public static function stringToHex($color = null) {
    switch($color) {
        case 'green':
            return self::OK; // self::OK = '#00cc00'
        break;
        default 'red':
            return self::DANGER; // '#cc0000'
    }
} 
```

当它在我正在测试的类中定义时，我将如何有效地测试返回值？在我的脑海中，它会是这样的：

```
public function teststringToHex() {
    $this->assertEquals(MyClass::stringToHexColor('green'), MyClass::OK);
} 
```

但这似乎不正确，因为我断言结果是测试甚至不知道其价值的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:34:48.737

现在您的测试信任并依赖于正确的实现细节。除非您不相信常量具有正确的值，否则这很好。如果是这样，您应该传入期望的十六进制值，例如使用 DataProvider

```
/**
 * @dataProvider provideColorToHexMapping
 */
public function testStringToHex($colorName, $expectedHex) {
    $this->assertEquals(
        $expectedHex,
        MyClass::stringToHexColor($colorName)
    );
}
public function provideColorToHexMapping()
{
    return array(
        array('green', '#00cc00'),
        …
    );
} 
```

# javascript - nodejs计时器性能

> ID：10719035
> 
> 赞同：0
> 
> 时间：2012-05-23T11:31:02.797
> 
> 标签：javascript, performance, node.js, timer

我必须在 nodejs 中创建一个定时应用程序，用户可以设置每天、每周和每月。我的第一个任务是创建这样的东西：

```
socket.on("connect")
{
  client.on("authenticate")
  {
    var frequency = GetTimersForUser(client);
    var timersInMilliseconds = ConvertFrequencyToMS(frequency);
    var nextInMS = GetLower(timersInMilliseconds);
    setTimeout("timedCount()",nextInMS );
  }
}
timedCount()
{
  cancelTimer;
  client.emit("poke");
  var frequency = GetTimersForUsers(client); 
 ...
  setTimeout("timedCount()",nextInMS );
} 
```

但这不会提醒我有关失败的计时器（如果客户端已断开连接），因为计时器仅在连接后创建，所以我想在连接之前创建计时器。那么，每秒创建 1 个计时器是否更快：

```
 userslist = getIndividualUsersNextTimerAsDate();
  setTimout("timedCount()",1000);
    timedCount()
    {
      foreach(user in userslist)
      {
       if(user.time <= now())
       {
        if(user.socket)
        {
        user.socket.emit("poke");
        }
        user.time = resetTimeForNextTimer(user);
       }
      }
    }
    socket.on("connect")
    {
      ...
      userslist[x].socket = client;
    } 
```

或每个“时间”多个计时器：

```
var userslist = GetUsersTimers();
  foreach(user in userslist)
  {
    user.Counter = setTimeout("runTime()",client.timer );
  }
 runTime(client)
 {
  client.emit("poke");
  client.Counter.cancel();
  client.timer = resetToNextTimer();
  client.Counter = setTimeout("runTime()",client.timer );
 } 
```

还是有什么更好的方法让我想念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:09:53.783

听起来您的某些计时器可以持续数天，但连接通常不会持续那么久。用户会重新连接到服务器并始终保持连接吗？

假设用户始终处于连接状态，那么我会将结束时间存储在数据库中。如果服务器出现故障，您可以恢复结束时间并正常重新启动。当你得到一个新的计时器时，使用 setTimeout 去睡觉。重新启动时，您可以重新执行 setTimeout，因为您知道结束时间和当前时间（即获取持续时间）。

这将工作“合理”数量的计时器。如果您将拥有数百万个这样的计时器，那么实际上最好使用 setInterval ，它每 X 毫秒/秒/分钟唤醒一次，检查是否有任何结束时间已经过去，对这些时间采取行动，然后重新进入睡眠状态.

# php - 在 PHPStorm 中，是否需要为每个项目创建新的运行配置？

> ID：10719049
> 
> 赞同：1
> 
> 时间：2012-05-23T11:31:37.863
> 
> 标签：php, ide, xdebug, phpstorm

我一直在阅读文档，但我的脑海中一直在思考如何在这个 IDE 中进行项目创建和执行。

理想情况下，我希望能够在 IDE 中编写 PHP 代码，单击“运行”，然后在浏览器中启动该代码（最好使用 xdebug 交互）。似乎要做到这一点，必须编辑/创建一个新的运行配置（在这种情况下使用 PHP Web 应用程序模板）。

但是是否必须对每个项目/文件都这样做？是否可以设置默认的运行配置，以相同的方式启动所有后续项目文件（在带有调试会话的浏览器中启动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:30:36.463

不可能为所有项目创建这样的默认值。您还可以考虑使用[零配置调试](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)，这样您根本不必创建运行配置。

# android - background-size css 属性不适用于 android WebView

> ID：10719051
> 
> 赞同：0
> 
> 时间：2012-05-23T11:31:44.493
> 
> 标签：android, css, android-webview

我在我的 android 应用程序（使用 android 2.2 SDK）中使用 WebView 来使用这个 css 显示一个 html 页面：

```
body{
background-image: url(.....);
background-size: cover;
background-repeat:no-repeat;
} 
```

我的问题是视图右侧仍然有一个小白条，我想摆脱它。我怎样才能做到这一点？（它在 android 4 上运行良好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:59:37.380

最后我找到了一个技巧：

```
webview.setScrollBarStyle(GONE); 
```

这不会删除滚动条，但会删除后面的白条。如果有人知道更好/更清洁的方法，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:08:07.100

我相信我有更好的解决方案：

在布局中使用 XML 属性 android:scrollbars="none"。

例子：

```
<WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none" /> 
```

# java - 读取文件的各种类之间的区别

> ID：10719056
> 
> 赞同：-5
> 
> 时间：2012-05-23T11:31:53.307
> 
> 标签：java

谁能解释我的区别/何时使用各种类来读取java中的文件。比如，Scanner vs FileInputStream 等。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:44:58.507

类**DataInputStream**
数据输入流用于以与机器无关的方式从底层输入流中读取原始 Java 数据类型。应用程序使用数据输出流写入数据，这些数据稍后可以由数据输入流读取。
数据输入流和数据输出流以对 UTF-8 稍作修改的格式表示 Unicode 字符串。

类**BufferedReader**
从字符输入流中读取文本，缓冲字符，以便高效读取字符、数组和行。
可以指定缓冲区大小，也可以使用默认大小。对于大多数用途，默认值足够大。
通常，由 Reader 发出的每个读取请求都会导致对底层字符或字节流发出相应的读取请求。

类**Scanner**
Scanner 类仅用于读取，不用于写入，它允许以紧凑的方式读取文件。

希望对你有帮助

# actionscript-3 - 四舍五入到最接近的一万

> ID：10719061
> 
> 赞同：1
> 
> 时间：2012-05-23T11:32:23.887
> 
> 标签：actionscript-3, actionscript-2

我这里有问题。我需要一个函数，它需要一个介于 20 000 - 350 000 之间的数字，并将该数字四舍五入到最接近的一万。我实际上在这里不太清楚。

我希望它像这样工作：

如果函数接收到数字 120 435 它应该返回 120 000 ，这是最接近的一万等。

有人在这里有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T11:37:31.313

```
function round($input:Number, $round:int = 10000):int
{
    var round = Math.round($input / $round);
    return round * $round;
} 
```

# c# - 在 C# 中动态生成事件？

> ID：10719062
> 
> 赞同：0
> 
> 时间：2012-05-23T11:32:29.380
> 
> 标签：c#, winforms, events, controls

我在 c# 中生成了一堆链接标签。我想要的是用一个 URL 填充 textBox1，每个链接标签都不同。我将如何生成动态事件？这是一个例子：

```
foreach (var node in nodes)
{
    HtmlAttribute att = node.Attributes["href"];
    HtmlAgilityPack.HtmlDocument tempDoc = new HtmlAgilityPack.HtmlDocument();
    tempDoc.LoadHtml(node.InnerHtml);
    var tempNode = tempDoc.DocumentNode.SelectSingleNode("//img[@alt]");
    HtmlAttribute tempAtt = tempNode.Attributes["alt"];
    LinkLabel ll = new LinkLabel();
    ll.Location = new Point(20, 20 * i);
    ll.Text = tempAtt.Value;
    this.Controls.Add(ll);
    i++;
} 
```

节点文本应为`tempAtt.Value`，单击时 textBox1 应填充`att.Value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:33:25.100

您不能直接将 dat 传递给事件，您必须以其他方式从处理程序内部获取它。

```
foreach (var node in nodes)
{
    ...
    LinkLabel ll = new LinkLabel();
    ...
    ll.Click += MyLabelClickHandler;
    this.Controls.Add(ll);

    i++;
}

void MyLabelClickHandler(object sender, Eventargs e)
{
    senderLabel = sender as LinkLabel;
    string text = senderlabel.text;
    ....
} 
```

# java - 从视图（而不是活动）管理清理......单例模式的危险？

> ID：10719065
> 
> 赞同：2
> 
> 时间：2012-05-23T11:32:36.850
> 
> 标签：java, android, android-fragments

来自非 Java 背景，我发现自己编写了许多具有广泛功能的 View 类（为了便于移植），就维护而言，它们不一定适合 Android FW 设置 - 例如，我可能有一个小部件，它会在我想在 Activity 暂停/停止/销毁时停止并清理的时间间隔内执行某些操作。一般来说，我可以通过从包含的 Activity 调用小部件上的公共方法来管理它，但是 A) 有时这会变得很深，并且必须创建一个公共方法来访问每个父母中的孩子会变得丑陋，并且 B) 需要额外（不需要？）注意。

我正在考虑使用像全局代表这样的方法来管理这种事情，但是已经阅读了很多关于这种方法的警告——像下面的类这样的东西是否有我可能遗漏的任何固有缺陷？

```
import java.util.HashMap;
import java.util.HashSet;

public class ActiveRegistry {

    private static final ActiveRegistry instance = new ActiveRegistry();
    public static ActiveRegistry getInstance(){
        return instance;
    }

    private HashMap<String, HashSet<Runnable>> registry = new HashMap<String, HashSet<Runnable>>();
    private ActiveRegistry(){

    }

    public void register(String key, Runnable runnable){
        if(!registry.containsKey(key)){
            HashSet<Runnable> list = new HashSet<Runnable>();
            registry.put(key, list);
        }
        HashSet<Runnable> list = registry.get(key);
        list.add(runnable);
    }

    public void execute(String key){
        if(registry.containsKey(key)){
            HashSet<Runnable> list = registry.get(key);
            for(Runnable runnable : list){
                runnable.run();
            }
        }
    }
} 
```

使用可能类似于...

1.  A`View`有东西需要清理。在实例化时，注册它... `ActiveRegistry.getInstance().register("paused", someRunnableThatCleansUpStuff)`
2.  扩展`Activity`以便`onPause`调用`ActiveRegistry.getInstance().execute("paused");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:50:14.040

你做的工作比你需要的要多。使用`Fragment`s（来自[**支持包**](http://developer.android.com/sdk/compatibility-library.html)，如果您想确保与旧版本的 android 向后兼容），将使您的生活变得更加轻松。每个片段都嵌入在一个活动中，并具有与其宿主活动的生命周期直接链接的生命周期。使用它们应该会显着降低代码的复杂性，因为您目前担心的大部分内容将由系统管理。

# api - Google 将 api 3 与地点 DEMO 仅在 Chrome 中有效......为什么？

> ID：10719068
> 
> 赞同：1
> 
> 时间：2012-05-23T11:32:43.637
> 
> 标签：api, google-maps-api-3, google-places-api

这里已经有很多 Google Maps API Places 信息，但这里有一个演示，它显示了很多人似乎遇到的问题，遗憾的是它只适用于 Chrome（至少不适用于 Firefox 或 IE）。

[http://gmaps-samples-v3.googlecode.com/svn/trunk/places/2012-may-hangout/search.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/places/2012-may-hangout/search.html)

谁能解释为什么？它有很多不必要的东西，比如标记的动画放置，但是有一个很好的例子来说明 google.maps.places.RankBy.DISTANCE 之间的区别；和 google.maps.places.RankBy.PROMINENCE；在带有类型图标的表格中呈现有序标记和结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:17:23.997

我刚刚使用 IE8 访问了您问题中的链接，它似乎运行良好：

![在此处输入图像描述](../Images/b30910e7bbfa449088d453f95f0f951f.png)

您在 IE 中遇到的问题是什么？

# ruby-on-rails - rails_sql_views 阻止 Heroku 上的迁移

> ID：10719071
> 
> 赞同：0
> 
> 时间：2012-05-23T11:32:48.053
> 
> 标签：ruby-on-rails, postgresql, heroku

我有一个需要多表继承的 Rails 应用程序，我正在使用 CITIER gem，它本身需要 rails_sql_views gem 来生成表示对象的数据库视图。

到现在为止还挺好。所有这一切都像我使用 sqlite3 的本地机器上的魅力一样。但是，当我尝试将应用程序部署到 Heroku 时，我既无法执行数据库迁移，也无法访问 rails 控制台。

原因似乎是 rails_sql_views gem 试图访问一些声称不存在的 PostgreSQLAdapter 方法。但是，当我检查 rails 存储库的文件时，我可以在代码中找到这些方法。这里发生了什么？

当我尝试运行“heroku run rake db:migrate”时，我会得到以下错误跟踪：

```
Running rake db:migrate --trace attached to terminal... up, run.1 rake aborted!
undefined method `tables' for class `ActiveRecord::ConnectionAdapters::PostgreSQLAdapter'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/core_ext/module/aliasing.rb:31:in `alias_method'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/core_ext/module/aliasing.rb:31:in `alias_method_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rails_sql_views-0.8.0/lib/rails_sql_views/connection_adapters/postgresql_adapter.rb:5:in `included'
/app/vendor/bundle/ruby/1.9.1/gems/rails_sql_views-0.8.0/lib/rails_sql_views/loader.rb:12:in `include'
[....] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:31:14.893

这看起来像是 sqlite3 和 postgres 适配器与该 gem 之间的不兼容。您应该尝试使开发尽可能接近生产。尝试在本地安装 postgress [https://devcenter.heroku.com/articles/local-postgresql](https://devcenter.heroku.com/articles/local-postgresql)并查看是否在本地遇到相同的错误。如果这样做，请考虑编写详细的错误报告并将其发送给 Gem 的作者，或者尝试自己修复它并发送拉取请求。

# iphone - iOS 检测连接速度或类型

> ID：10719073
> 
> 赞同：9
> 
> 时间：2012-05-23T11:32:50.687
> 
> 标签：iphone, objective-c, ios, reachability

> **可能重复：**
> [Iphone 检测 3g 或 wifi](https://stackoverflow.com/questions/7938650/iphone-detect-3g-or-wifi)

有没有办法获得当前的网络速度或者设备是否在 EDGE/3G/GPRS 上？我可以使用 Reachability 将 WiFI 与 WMAN 区分开来，但这对我的应用程序来说还不够。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:56:23.140

如果您真的需要知道，则必须对其进行测试。

建立与具有低延迟的已知服务器的连接。在一个单独的线程中，标记时间（时间 A）并发送一个数据包（确保它是一个数据包）。等待那个线程。标记第一个数据包的时间（时间 B）。读取数据直到完成。标记最后一个数据包的时间（时间 C）。确保服务器响应跨越至少三个数据包。

时间 B - 时间 A 是对延迟的非常粗略的估计。时间 C - 时间 B 是对带宽的粗略估计。

因为您希望尽可能准确，请使用您可用的最低级别的网络访问（我相信在 iPhone 上这是套接字）。使用固定长度的随机数据块作为您的请求和响应。请求的几个字节就足够了，但响应需要构造良好。确保服务器发送一个小的第一个数据包，然后是一个足以填满三个或更多的数据包序列。

到那时，您将需要进行测试。测试，测试，测试和测试。测试不同的网络类型，测试不同数量的网络流量，测试交换网络，以及测试你能想到的任何其他东西。

# python - pythons“setdefault”增强赋值的替代方法

> ID：10719075
> 
> 赞同：0
> 
> 时间：2012-05-23T11:32:55.230
> 
> 标签：python, dictionary, defaultdict, setdefault

我想要一个显示布尔计数的字典。即姓名/职位组合符合标准的频率。例如：

```
Key - Value1 - Value2
John12 Yes:300 No:25 
John13 Yes:400 No:29 
Linda13 Yes:300 No:60 
```

...

我试过这个：

```
if str(f[1]) + str(f[7]) in psHpGrp:
    if f[6] == 1:
        psHpGrp.setdefault(str(f[1]) + str(f[7]), []) +=1 
```

由于一个错误，我得到了“SyntaxError：扩充赋值的非法表达式”

所以谷歌搜索给了我这个：

```
if str(f[1]) + str(f[7]) in psHpGrp:
    if f[6] == 1:
        i = psHpGrp.setdefault((f[1]) + str(f[7]), [])
        i += 1    
    else:
        j = psHpGrp.setdefault((f[1]) + str(f[7]), [])
        j += 1 
else:
    psHpGrp.setdefault(str(f[1]) + str(f[7]), []).append(str(f[1]) + str(f[7])) 
```

现在我得到： j += 1 'int' object is not iterable

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:38:19.630

你想使用`defaultdict`：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> d['a'] += 1
>>> d['b'] += 1
>>> d['b'] += 1
>>> print d['a'], d['b'], d['c']
1 2 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:38:04.573

```
from collections import Counter

psHpGrp.setdefault(str(f[1]) + str(f[7]), Counter()).update([f[6] == 1]) 
```

第一部分：

```
psHpGrp.setdefault(str(f[1]) + str(f[7]), Counter()) 
```

`str(f[1]) + str(f[7])`将从字典中获取键的对象，`psHpGrp`如果它不存在，则创建一个新的`Counter`.

然后它将`.update([f[6] == 1])`它与条件的结果`f[6] == 1`，可以是`True`or `False`。然后将s 和s`Counter`的数量保存为字典。它们代表你的，只是它们是布尔值。`True``False``"Yes"/"No"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:49:07.873

就像@larsmans 所说，您不能将 int 添加到列表中（使用`+=`）。在您最初尝试替换`[]`为`0`，然后增加该条目的数字。

```
if str(f[1]) + str(f[7]) in psHpGrp:
    if f[6] == 1:
        psHpKey = str(f[1]) + str(f[7])
        psHpGrp.setdefault(psHpKey, 0)
        psHpGrp.setdefault[psHpKey] +=1 
```

**另外：**您的最终错误似乎是由您尚未发布的代码引起的。Python 让你知道有问题的代码在哪一行，最好**至少**发布那行代码。

# c# - DataGridView 错误：进程因未处理的异常而终止

> ID：10719077
> 
> 赞同：1
> 
> 时间：2012-05-23T11:33:00.000
> 
> 标签：c#, .net, winforms, datagridview, thread-safety

我的 Windows 应用程序崩溃了，因为即使在表单被处理后，后台线程也试图更新表单。我的代码如下

```
if (IsDisposed || dataGridIncidentView.IsDisposed)
                   return;

               if (dataGridIncidentView.InvokeRequired)
               {
                   dataGridIncidentView.Invoke(new MethodInvoker(delegate { rowIndex = dataGridIncidentView.Rows.Add("val1","val2"); }));
               }
               else
               {
                   rowIndex = dataGridIncidentView.Rows.Add("val1", "val2");
               } 
```

事件日志中的错误是：

> 由于未处理的异常，该进程被终止。异常信息：System.InvalidOperationException 堆栈：在 System.Windows.Forms.DataGridViewRowCollection.AddInternal(Boolean, System.Object[]) 在 System.Windows.Forms.DataGridViewRowCollection.Add(System.Object[]) ..... …………

我对 asyncCallBack 函数进行了 IsDisposed 检查。但是所有这些检查并没有处理所有情况。任何人都可以建议我，如何解决它？

谢谢，

阿比纳夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:25:20.850

您需要`IsDisposed`在委托内部进行检查。

IE：

```
delegate { 
  if (!IsDisposed) rowIndex = dataGridIncidentView.Rows.Add("val1","val2"); 
} 
```

# opengl - 是否可以替换 glutInit(&argc, argv)？

> ID：10719084
> 
> 赞同：0
> 
> 时间：2012-05-23T11:33:29.050
> 
> 标签：opengl, glut

我正在尝试将示例（.exe）从 Rob Farber（[链接](http://www.drdobbs.com/architecture-and-design/222600097)）转换为 DLL，以便可以从 LABView 调用它。

在示例中称为`glutInit(&argc, argv)`.

是否可以`glutInit(&argc, argv)`用可以放在 DLL 中的东西替换？

或者可以是手动设置的值`argc`吗`argv`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:48:54.663

argc 是传递给您的可执行文件的参数数量，argv 包含实际参数。第一个值只是整数，第二个值是`char**`. 因此，如果您不需要将任何特定于 glut 的程序参数传递给您的应用程序 pass argc = 0，则 argv 应该是 a`char**`并且它的内容是什么并不重要。如果您需要将特定于 glut 的参数传递给 glutInit，只需创建一个`char**`包含它们的（将参数从索引 1 而非 0 放置）并将 argc 设置为您传递的参数数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:25:00.843

> 我正在尝试将示例（.exe）从 Rob Farber（链接）转换为 DLL，以便可以从 LABView 调用它

如果您想在 LabVIEW 的上下文中执行某些操作，那么 GLUT 绝对是不行的！LabVIEW 有自己的事件循环和管理。GLUT 的 MainLoop 会与 LabVIEW 的内部严重冲突。

我已经编写了相当多的 LabVIEW 模块，坦率地说，我不知道如何创建适当的 OpenGL 上下文以集成到 LabVIEW 的一个窗口中，甚至不用谈论仪器。

想一想，我可能会产生一个独立运行的线程，拥有自己的窗口和事件处理，并在 LabVIEW 端和本地端之间建立某种通信通道。此外，我会确保从线程本地存储 (TLS) 分配独立线程一侧的所有内容，因为我发现 LabVIEW 自己的内存管理不太热衷于与其他库的内存分配合作。（您会在我的接口 VI 中找到我的标准模式之一，即我以 LabVIEW 数组的形式将内存传递给我的模块，以进行处理，而我的模块不会自行分配任何东西。）

# c# - 没有填充 C# 的 RSA 加密

> ID：10719088
> 
> 赞同：2
> 
> 时间：2012-05-23T11:33:49.707
> 
> 标签：c#, rsa, padding

我来布景

我需要使用 512 位密钥在给定的一组字节上计算 RSA 加密。这可以通过 RSACryptoServiceProvider 类轻松实现，但是我需要在计算 RSA 加密之前为加密预先计算自定义填充。

此自定义填充不符合 RSACryptoServiceProvider 的 Encrypt 方法中提供的 PKCS#1 v1.5 或 v2。是否有任何替代 C# 类可以用来计算 RSA 加密而不添加自己的填充？

我目前正在将 OpenSSL.Net 作为替代方案，但还有其他更好的/

任何帮助都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:36:28.033

原则上，您可以在`BigInteger`使用`ModPow`. 但这会相对缓慢，而且对于私钥操作来说，它很容易受到定时侧信道攻击。

我相信`Mono.Security`（您可以在普通的.net 上使用它）包含支持未填充 RSA 的类。

# xml - 如何在html5中使用滚动条显示大的xml值

> ID：10719093
> 
> 赞同：1
> 
> 时间：2012-05-23T11:34:08.800
> 
> 标签：xml, html

我想在 div 标签中显示一些 xml 值。
我使用 xmp html 标签。
但有时我的 xml 值由几行组成，如何添加滚动条以显示所有行。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:42:22.333

使用 overflow:scroll 或 overflow-y 设置 div 的样式，以便更具体，因为您需要线条。为此，您必须为 div 设置一个高度

```
<div style="overflow-y:scroll; height:500px">...</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:53:55.267

该标签`<xmp>`自 HTML 3.0 起已弃用。从 HTML 4.0 开始，您可以使用`<pre>`标签来预先格式化您的内容。如果您想显示一些源代码，请`<code>`在您的 div 中包含

```
<div style="height:200px; overflow-y:scroll">
<pre>
<code>
 .... your XML content here
</code>
</pre> 
```

您将内容的大小`<div>`和格式设置为`<pre>`and`<code>`

# windows-mobile - Windows Mobile 6 CM 配置说明

> ID：10719094
> 
> 赞同：1
> 
> 时间：2012-05-23T11:34:14.950
> 
> 标签：windows-mobile, provisioning

我们有一个配置 XML 文件，在第一行设置

```
<nocharacteristic type="CM_ProxyEntries" /> 
```

然而，需要公开一个 CM 代理条目，经过大量的跟踪和错误并使用此问题作为指南[如何设置网络管理设置或使对话框出现在 Windows Mobile 上的 C# 中？](https://stackoverflow.com/q/300607/108847)我们设法使用以下 XML 使其工作：

```
 <characteristic type="CM_ProxyEntries">
<characteristic type="HTTP-{9922B32F-0721-40FA-BB11-896274A92AB0}">       
  <parm name="SrcId" value="{9922B32F-0721-40FA-BB11-896274A92AB0}"/>
  <parm name="DestId" value="{436EF144-B4FB-4863-A041-8F905A62C572}"/>
  <parm name="Proxy" value=" new-inet:1159"/>
  <parm name="Enable" value="1"/>
  <parm name="Type" value="0"/>
</characteristic>
<characteristic type="null-corp-{9922B32F-0721-40FA-BB11-896274A92AB0}">
  <parm name="SrcId" value="{9922B32F-0721-40FA-BB11-896274A92AB0}"/>
  <parm name="DestId" value="{A1182988-0D73-439E-87AD-2A5B369F808B}"/>
  <parm name="Proxy" value=" new-corp:1118"/>
  <parm name="Enable" value="1"/>
  <parm name="Type" value="0"/>
</characteristic> 
```

{9922B32F-0721-40fa-BB11-896274A92AB0} 是我们为 GPRS 连接指定的目标 ID，如下所示：

```
 <characteristic type="CM_GPRSEntries">
<characteristic type="TM">
  <parm name="DestId" value="{9922B32F-0721-40fa-BB11-896274A92AB0}" />
  <parm name="AlwaysOn" value="0" />
  <!-- set to 0 if no pw is used set to 1 if pw is used -->
  <!-- Set to 0 even though password is provided -->
  <parm name="RequirePw" value="0" />
  <parm name="UserName" value="xxx" />
  <parm name="Password" value="xxx" />
  <characteristic type="DevSpecificCellular">
    <snip...>
  </characteristic>
</characteristic> 
```

现在有人要求我准确地解释供应 XML 的作用，但我自己并不确定。

如果我不得不猜测我会这么说

> {436EF144-B4FB-4863-A041-8F905A62C572} 和 {A1182988-0D73-439E-87AD-2A5B369F808B}

是“互联网”和“工作”的硬编码指南，XML 基本上是说对这些的请求应该通过我们的连接 {9922B32F-0721-40fa-BB11-896274A92AB0} 发送，但我不太确定。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:24:34.760

是的，这些值在 Windows Mobile 上是硬编码的

# c# - 不同构建的替代启动对象

> ID：10719099
> 
> 赞同：1
> 
> 时间：2012-05-23T11:34:30.500
> 
> 标签：c#, wpf, visual-studio, visual-studio-2008, ide

我有一个标准的 WPF 应用程序。VS 解决方案有一个主项目和一个单元测试项目（使用标准的 VS 单元测试套件）

出于单元测试之外的测试目的（例如，只是以交互方式尝试一段新代码），我必须等待我的整个应用程序启动，然后单击我想要测试的表单。

如果我可以选择具有不同入口点的替代构建，我更愿意，它会跳过所有我不需要的东西并将我放在我想要的地方。除了“调试”和“发布”之外，我还创建了一个额外的构建配置，称为“调试（测试）”。如何设置选择此构建时执行的不同启动对象？

或者这个问题有替代解决方案吗？为了简化测试和分析，我更喜欢不涉及添加额外项目或 dll 的东西。

一种可能的解决方案是定义一个编译器符号并在我的 app.xaml.cs 中检查它

```
#if DEBUG_TEST
    TestWindow view = new TestWindow();
    view.Show();
#else
    MainWindow view = new MainWindow();
    view.Show();
#endif 
```

有什么不那么骇人听闻的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:39:27.687

我不知道你为什么认为这种方法“hacky”。
这似乎是正确的方法。
只需选择您的配置 DEBUG(TEST) 并将 DEBUG_TEST 定义添加到项目的属性页面。

完成测试后返回正常配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:49:18.920

另一种方法是依赖注入： http: [//www.martinfowler.com/articles/injection.html](http://www.martinfowler.com/articles/injection.html)

假设您使用以下代码：

```
IMainView view = DIContainer.GetInstance<IMainView>();
view.Show(); 
```

在您的 Main 项目中，您将 Dependency Injection Container 配置为使用 MainWindows

```
DIContainer.SetDefaultInstance<IMainView, MainView>(); 
```

在你的测试项目中

```
DIContainer.SetDefaultInstance<IMainView, TestView>(); 
```

MainView 和 TestView 需要实现

```
interface IMainView
{
     void Show();
} 
```

这种简单的方法可以由您自己完成（`use Activator.CreateInstance<T> in GetInstance`），但是有几个框架可以解决这个问题。

[哪些 .NET 依赖注入框架值得研究？](https://stackoverflow.com/questions/21288/which-net-dependency-injection-frameworks-are-worth-looking-into)

# windows-phone-7 - 在 Windows Phone 上的 C# 中尝试访问该方法失败：System.IO.FileStream..ctor(System.String, System.IO.FileMode)

> ID：10719100
> 
> 赞同：0
> 
> 时间：2012-05-23T11:34:33.917
> 
> 标签：windows-phone-7

```
FileStream FS = new FileStream("MyFolder\\MyFile.txt", FileMode.Open);
IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();
StreamWriter writeFile = new StreamWriter(new IsolatedStorageFileStream("MyFolder\\MyFile.txt", FileMode.Append, myIsolatedStorage));

    using (writeFile)
    {
        FS.Seek(0, SeekOrigin.End);
        writeFile.WriteLine(txtWrite.Text);
        writeFile.Close();
        System.Diagnostics.Debug.WriteLine("Now I am here");
    } 
```

当我尝试运行此代码（尝试将数据附加到现有文本文件中）时，出现异常

> “尝试访问该方法失败：System.IO.FileStream..ctor(System.String, System.IO.FileMode)”

我在这里犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:24:20.833

不要使用`FileStream`类目录。通过以下方法获取您的流[`IsolatedStorageFile`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile_methods)：

```
IsolatedStorageFile myIsolatedStorage = 
    IsolatedStorageFile.GetUserStoreForApplication();

using (var writeFile = myIsolatedStorage.OpenFile("MyFolder\\MyFile.txt", FileMode.Append))
using (var writeFileStream = new StreamWriter(writeFile))
{
    writeFileStream.WriteLine(txtWrite.Text);
    System.Diagnostics.Debug.WriteLine("Now I am here");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:14:40.683

最后我在挣扎了 4 小时后让它工作了：

```
 IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();                
            StreamWriter writeFile = new StreamWriter(new IsolatedStorageFileStream("MyFolder\\MyFile.txt", FileMode.Append, myIsolatedStorage));

            writeFile.Flush();

            System.Diagnostics.Debug.WriteLine(txtWrite.Text);
            writeFile.WriteLine(txtWrite.Text);                
            writeFile.Close();
            System.Diagnostics.Debug.WriteLine("Now I am here"); 
```

我删除了文件流方法并做了一些修改。它开始工作了。感谢所有试图帮助我提出建议的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:01:14.540

可能是您试图两次打开同一个文件吗？

您的问题的一个版本（带有答案）可以在[How to append data into the same file in IsolatedStorage for Windows Phone 中查看](https://stackoverflow.com/questions/6227836/how-to-append-data-into-the-same-file-in-isolatedstorage-for-windows-phone)

# iphone - iOS：在没有地图的情况下从当前位置获取地理位置的角度

> ID：10719115
> 
> 赞同：6
> 
> 时间：2012-05-23T11:35:24.927
> 
> 标签：iphone, ios, xcode, geolocation, accelerometer

我正在开发一些 iPhone 应用程序，我想制作一个方位，一个移动到特定地理位置的图像，具体取决于使用加速度计的用户位置。

我在这里阅读了很多答案，但没有得到解决方案。

我有当前位置坐标和目的地坐标。

您有任何想法或示例代码吗？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T12:04:09.460

在顶部定义这个

```
#define RadiansToDegrees(radians)(radians * 180.0/M_PI)
#define DegreesToRadians(degrees)(degrees * M_PI / 180.0) 
```

在 .h 文件中定义变量

```
float GeoAngle; 
```

在您的位置管理器的委托方法中：-

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
{
    GeoAngle = [self setLatLonForDistanceAndAngle:newLocation];
} 
```

功能如下：-

```
-(float)setLatLonForDistanceAndAngle:(CLLocation *)userlocation
{
    float lat1 = DegreesToRadians(userlocation.coordinate.latitude);
    float lon1 = DegreesToRadians(userlocation.coordinate.longitude);

    float lat2 = DegreesToRadians(locLat);
    float lon2 = DegreesToRadians(locLon);

    float dLon = lon2 - lon1;

    float y = sin(dLon) * cos(lat2);
    float x = cos(lat1) * sin(lat2) - sin(lat1) * cos(lat2) * cos(dLon);
    float radiansBearing = atan2(y, x);
    if(radiansBearing < 0.0)
    {
        radiansBearing += 2*M_PI;
    }

    return radiansBearing;
} 
```

您将在 GeoAngle 变量中获得不断更新的角度。将箭头旋转到目标位置获取箭头的图像并将其分配给 arrowImageView 的 IBOutlet 并在标题更新方法上旋转它。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading 
{
    float direction = -newHeading.trueHeading;

    arrowImageView.transform=CGAffineTransformMakeRotation((direction* M_PI / 180)+ GeoAngle);
} 
```

# java - SQLite - JDBC 类型没有方言映射：0（休眠）

> ID：10719117
> 
> 赞同：0
> 
> 时间：2012-05-23T11:35:38.460
> 
> 标签：java, hibernate, sqlite, exception, dialect

我有一个 SQLite 数据表，其中字符串值作为 id 和图片的 BLOB 值。

我想知道表中是否存在具有特定 id 的条目。

```
Query query = entityManager
            .createNativeQuery("SELECT logo_id FROM logo WHERE logo_id = ?");
    query.setParameter(1, id);
    int count = query.getResultList().size(); 
```

但是，如果我执行查询，我会收到此错误。

```
javax.persistence.PersistenceException: org.hibernate.MappingException: No Dialect mapping for JDBC type: 0
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1367)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:265)
at at.beko.rainstar2.service.impl.LogoServiceImpl.hasLogoWithId(LogoServiceImpl.java:59)
at at.beko.rainstar2.service.impl.LogoServiceImpl.saveLogo(LogoServiceImpl.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy53.saveLogo(Unknown Source)
at at.beko.rainstar2.ui.controller.OptionController.btnSavePic_click(OptionController.java:204)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.el.parser.AstValue.invoke(AstValue.java:238)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at org.primefaces.component.fileupload.FileUpload.broadcast(FileUpload.java:279)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:759)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:935)
at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at at.beko.rainstar2.ui.filter.CustomCharacterEncodingFilter.doFilter(CustomCharacterEncodingFilter.java:25)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:88)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619)

Caused by: org.hibernate.MappingException: No Dialect mapping for JDBC type: 0
at org.hibernate.dialect.TypeNames.get(TypeNames.java:76)
at org.hibernate.dialect.TypeNames.get(TypeNames.java:99)
at org.hibernate.dialect.Dialect.getHibernateTypeName(Dialect.java:565)
at org.hibernate.loader.custom.CustomLoader$Metadata.getHibernateType(CustomLoader.java:660)
at org.hibernate.loader.custom.CustomLoader$ScalarResultColumnProcessor.performDiscovery(CustomLoader.java:564)
at org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:580)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1961)
at org.hibernate.loader.Loader.doQuery(Loader.java:829)
at 
org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
at org.hibernate.loader.Loader.doList(Loader.java:2438)
at org.hibernate.loader.Loader.doList(Loader.java:2424)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
at org.hibernate.loader.Loader.list(Loader.java:2249)
at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:331)
at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:1784)
at org.hibernate.internal.AbstractSessionImpl.list(AbstractSessionImpl.java:226)
at org.hibernate.internal.SQLQueryImpl.list(SQLQueryImpl.java:156)
at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:256)
... 71 more 
```

如果我使用此代码，则没有问题。

```
Query query = entityManager
            .createNativeQuery("SELECT COUNT(*) FROM logo WHERE logo_id = ?");
    query.setParameter(1, id);
    Object o = query.getResultList().get(0);
    int count = Integer.valueOf(o.toString()); 
```

为什么我在其他代码版本中出现错误，因为 select 语句必须有效！？

谢谢。

关于马蒂亚斯

更新：

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:task="http://www.springframework.org/schema/task"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

<context:component-scan base-package="at.beko.rainstar2" />

<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="rainstarDataSource" />
    <property name="persistenceUnitName" value="rainstar-pu" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="at.beko.rainstar2.dialect.SQLiteDialect" />
        </bean>
    </property>
</bean>

<bean id="rainstarDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="java:comp/env/jdbc/rainstar_ds"></property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:29:19.773

`JDBC type: 0`意味着`Null`在`java.sql.Types`。`resultSet`必须包含空值，但休眠不能支持 SQLite 的这种数据类型。所以你应该在你的自定义中设置这个映射`at.beko.rainstar2.dialect.SQLiteDialect`。

```
public class SQLiteDialect extends Dialect {
    public SQLiteDialect() {
        super();
        ...
        ...
        ...
        registerColumnType(Types.NULL, "null");
        registerHibernateType(Types.NULL, "null");
    }
    ...
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T14:34:31.293

我有一个类似的问题，我的 SQL 查询将多行规范化为一列，给出；

```
org.hibernate.MappingException: No Dialect mapping for JDBC type: -9 
```

所以我不得不将 XML 结果包装在转换器中以将其转换为 varchar。

例如从

```
STUFF((select '   ' + RFID as [text()] from InnerTable inner 
       where inner.id = outer.id for XML PATH ('')), 1, 1, '') 
as RFIDs 
```

至

```
CONVERT(varchar(100), 
STUFF((select '   ' + RFID as [text()] from InnerTable inner 
       where inner.id = outer.id for XML PATH ('')), 1, 1, '')
) as RFIDs 
```

# javascript - inArray() 一直返回 false

> ID：10719121
> 
> 赞同：1
> 
> 时间：2012-05-23T11:35:57.257
> 
> 标签：javascript, jquery, arrays

我不知道如何修复它，但我总是`-1`在使用`inArray()`. 更明确地说，这就是我正在做的事情：

```
<!-- HTML Markup -->

<nav class="navigation clearfix">
    <a class="home-anchor" data-class="home-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">Home</span>
    </a>
    <a class="about-anchor" data-class="about-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">About</span>
    </a>
    <a class="work-anchor" data-class="work-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">Work</span>
    </a>
    <a class="shop-anchor" data-class="shop-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">Shop</span>
    </a>
    <a class="services-anchor" data-class="services-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">Services</span>
    </a>
    <a class="contact-anchor" data-class="contact-anchor" href="#">
        <span class="icons-wrapper">
            <i class="icon-normal-state"></i>
            <i class="icon-active-state"></i>
        </span>
        <span class="anchor-text">Contact</span>
    </a>
</nav>

/* JavaScript Markup */

var anchors = $(this.cluster_navigation_class).children();
var anchor = (jQuery.inArray(data, anchors) == -1) ? anchors[0] : jQuery.inArray(data, anchors); 
```

在哪里`this.cluster_navigation_class`，在哪里`.navigation`。当我签入控制台时，上面的 JavaScript 语句总是返回，为什么会发生这种情况？它不应该返回索引，因为该类存在于索引中，还是我错了？`data``.about-anchor``-1``1``1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:45:01.133

你用`inArray`错了。您正在将字符串与元素列表进行比较。jQuery 不能神奇地知道你想做什么。

您是否意识到您在帖子中自相矛盾。一个地方你说检查数据，下一个地方你说检查课程。数据和类只是重复，所以我不确定使用它们中的任何一个有什么问题。

您应该使用`find`来选择导航元素内的元素。

```
var myLink = jQuery(".navigation").find('[data-class="about-anchor"]'); 
```

另一种使用过滤器的方法：

```
var links = jQuery(".navigation a");
var activeElem = links.filter( function(){ return jQuery(this).data()==="about-anchor"; } ); 
var myLink = activeElem.length===1 ? activeElem : links.eq(0); 
```

或与班级

```
var links = jQuery(".navigation a");
var activeElem = links.filter(".about-anchor");
var myLink = activeElem.length===1 ? activeElem : links.eq(0); 
```

# java - 如何使用java将文件上传到http远程服务器？

> ID：10719124
> 
> 赞同：7
> 
> 时间：2012-05-23T11:36:07.723
> 
> 标签：java, http, jsf, file-upload, remote-server

我需要使用 java 将图像和 txt 文件从我的应用程序上传到远程服务器（只是 http 没有 ftp）。我的应用程序在 jsf 框架中。我搜索但没有找到合适的东西。有人可以指导我吗？事实上，我应该将文件上传到远程服务器的特殊文件夹。我有两个具有共享路径的应用程序来上传文件，因此为了访问这些文件，我决定将共享文件（如图像和文本）上传到第三台服务器。第一个应用程序应该将文件上传到这个远程服务器，第二个应用程序应该从中读取它们。所以我在这个解决方案中最难的部分是使用 http 将文件上传到第三台服务器（实际上是远程服务器）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:48:58.157

要将文件上传到特定文件夹，您的服务器 API 必须支持该功能。

服务器端用于接收上传的文件，可以使用[http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

客户端发送文件上传请求，可以使用[https://hc.apache.org/httpcomponents-client-ga/index.html](https://hc.apache.org/httpcomponents-client-ga/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T11:47:03.920

看看 apache [commons-fileupload](http://commons.apache.org/fileupload/)。[您可以在此处](http://www.theserverside.com/news/1365153/HttpClient-and-FileUpload)找到示例代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:47:28.197

使用以下代码：

```
 byte[] data = bos.toByteArray();//convert ur file into byte[]
        HttpClient httpClient = new DefaultHttpClient();//Client
        HttpPost postRequest = new HttpPost(YOUR_SERVER_URL);//Post Request to specified URL
        ByteArrayBody bab = new ByteArrayBody(data, "a.txt");
        MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);// Multipart data
        reqEntity.addPart("uploadingFile", bab); //adding data to request entity
        postRequest.setEntity(reqEntity);//adding request entity to post request
        HttpResponse response = httpClient.execute(postRequest); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T11:39:53.520

您可以使用 HttpClient。

`POST`使用作为方法发送文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T11:50:04.233

根据您的要求，您需要发送多个图像和文本文件。所以 HTTP 多部分文件上传似乎是一个合适的解决方案。您可以从[这里](http://commons.apache.org/fileupload/using.html)获得更多信息。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2018-01-27T18:38:45.957

制作

```
@Autowired
ServletContext c; 
```

或采取对象

```
byte[] bytes = file.getBytes();

String UPLOAD_FOLDEdR=c.getRealPath("/images");  
Path path = Paths.get(UPLOAD_FOLDEdR +"/"+ file.getOriginalFilename());
Files.write(path, bytes);
System.out.println(path);
String Pic_Name =file.getOriginalFilename(); 
```

# c# - 单击时更改文本块文本

> ID：10719125
> 
> 赞同：0
> 
> 时间：2012-05-23T11:36:10.590
> 
> 标签：c#, .net, wpf, wpf-controls, textblock

我有一个`<Border>`里面有一个`<Image>`和一个`<Textblock>`，我正在尝试更改 Mouseleftbutton 上的文本块文本，因为在这个点击事件中有一些更冗长的操作，文本块的文本在这个操作完成之前不会改变。

我也试过了`Dispatcher.BeginInvoke()`，但没有成功。

***这是我的代码：***

```
<Border x:Name="btnReadMe" Grid.Row="0" Style="{StaticResource BorderStyle1}" MouseLeftButtonDown="btnReadMe_MouseLeftButtonDown" MouseLeftButtonUp="btnReadMe_MouseLeftButtonUp" >
    <Border.Background>
        <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
            <GradientStop Color="#46c746" Offset="0"/>
            <GradientStop Color="#129312" Offset="1"/>
        </LinearGradientBrush>
    </Border.Background>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="6*"/>
        </Grid.ColumnDefinitions>
        <Image Grid.Column="0" Source="/CareFamily.AtHome;component/Resources/read_message-read_it.png" Margin="5,15" >
            <Image.RenderTransform>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
            </Image.RenderTransform>
        </Image>
        <StackPanel Grid.Column="1" Margin="0,10,0,10"  VerticalAlignment="Center">
            <TextBlock Name="tbReadToMe" Text="Read to Me" Style="{StaticResource TextBlockStyle1}" Margin="0,0,0,0"  />
        </StackPanel>
    </Grid>
</Border> 
```

* * *

```
SpVoice voice;
private void btnReadMe_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    if (voice == null)
        voice = new SpVoice();

    string readMessageState = tbReadToMe.Text;
    switch (readMessageState)
    {
        case "Read to Me":
            {
                tbReadToMe.Text = "Pause";
                break;
            }

        case "Pause":
            {
                tbReadToMe.Text = "Resume";
                voice.Pause();
                break;
            }

        case "Resume":
            {
                tbReadToMe.Text = "Pause";
                voice.Resume();
                break;
            }
        default:
            {
                tbReadToMe.Text = "Read to Me";
                break;
            }
    }

    if (!string.IsNullOrEmpty(Msg.Subject))
    {
        voice.Speak(Msg.Subject, SpeechVoiceSpeakFlags.SVSFDefault);
    }
    if (!string.IsNullOrEmpty(Msg.Body))
    {
        voice.Speak(Msg.Body, SpeechVoiceSpeakFlags.SVSFDefault); // Length operation
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:50:20.163

在线程上执行冗长的操作并使用

> 调度员

相应地更新 UI。

示例代码：

```
var opThread = new Thread(delegate()
{
    //your lengthy operation

    tbReadToMe.Dispatcher.Invoke(new Action(delegate
    {
        tbReadToMe.Text = "Pause";
    }));

    //your lengthy operation

    tbReadToMe.Dispatcher.Invoke(new Action(delegate
    {
        tbReadToMe.Text = "etc...";
    }));
});

opThread.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:29:38.800

Dispatcher.BeginInvoke() 没有帮助的原因是，即使它异步运行，它仍然在主/UI 线程上运行。使用 BackgroundWorkerThread 类在后台线程上执行冗长的操作。

我做了一个小样本来演示：

Window1.xaml：

```
<Window x:Class="BackgroundWorkerExample.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="663">
<Grid>
    <TextBox PreviewMouseDown="textBox1_PreviewMouseDown" Height="38" Margin="24,34,26,0" Name="textBox1" VerticalAlignment="Top" FontSize="24">
        The quick Velociraptor jumped over the torpid tapir.
    </TextBox>
</Grid> 
```

Window1.xaml.cs：

```
using System.Windows;
using System.Windows.Input;
using System.ComponentModel;
using System.Threading;
using System.Windows.Media;
using System;

namespace BackgroundWorkerExample
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
        }

        void _asyncSpeakerThread_DoWork(object sender, DoWorkEventArgs e)
        {
            // Change color of text to Red to indicate Start of operation
            this.Dispatcher.BeginInvoke(new Action(() =>  { textBox1.Foreground = Brushes.Red; }));

            string text = e.Argument as string;
            //voice.Speak(text, SpeechVoiceSpeakFlags.SVSFDefault); // Lengthy operation 
            Thread.Sleep(1000); // Simulate lengthy operation

            // Change color of text to Black to indicate End of operation
            this.Dispatcher.BeginInvoke(new Action(() => { textBox1.Foreground = Brushes.Black; }));
        }

        private void textBox1_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            BackgroundWorker bw = new BackgroundWorker();

            bw.DoWork += new DoWorkEventHandler(_asyncSpeakerThread_DoWork);
            string workerArgument = textBox1.Text;
            bw.RunWorkerAsync(workerArgument);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T11:52:18.833

`Application.DoEvents()`在您的“冗长”操作之前使用！

# asp.net-mvc-3 - 无效的Json数据返回页面内容

> ID：10719128
> 
> 赞同：1
> 
> 时间：2012-05-23T11:36:35.350
> 
> 标签：asp.net-mvc-3, jquery

我使用 jquery ajax 调用控制器操作（请参见下面的代码），执行操作后，引发了 Invalid Json 错误。我注意到，它返回页面内容。为什么会发生。谁能帮我解决这个问题？

控制器

```
[HttpGet]
       public ActionResult ViewDetails(int id)
       {
           var eventsdetails = _service.GeteventByID(id);
           return View("EventDetails",eventsdetails);
       }

       [HttpPost]
       public ActionResult UpdateAnswers(string answers, string question, string controlid, int eventid)
       {
           var replacetext=string.Empty;
           if (answers.Length>0) 
             replacetext = answers.Replace("\n", ",");
           _service.UpdateAnswers(eventid, replacetext, controlid);
          return RedirectToAction("ViewDetails", new { id = eventid });
       } 
```

Javascript

```
function dropdownlist(controlid, title, answers, eventid) {
            var $answersreplaced = answers.replace( /\,/g , "&nbsp;\r");
            var $deleteDialog = $('<div><textarea id="answerlist"  rows="10" cols="50">' + $answersreplaced + '</textarea><div><div style="font-size:9px">(To change back to an open answer field, delete all choices above and save)</div>');
            $deleteDialog.dialog({
                resizable: false,
                height: 280,
                width: 350,
                title: title + " - Edit Choices",
                modal: true,
                buttons: {
                    "Save": function () {
                        $.ajax({
                            type: 'POST',
                            url: '@Url.Action("UpdateAnswers")',
                            dataType: 'json',
                            data: { answers: $('#answerlist').val(),
                                question: title,
                                controlid: controlid,
                                eventid: eventid
                            },
                            success: function (result) {
                                $(this).dialog("close");
                                alert(result);
                            },
                            error: function (xhr, ajaxOptions, thrownError) {
                                alert(thrownError);
                                // alert('there was a problem saving the new answers, please try again');
                            }
                        });
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:42:14.550

这是因为您没有从操作返回 JsonResult，而是重定向到另一个操作，该操作又返回 ViewResult。

尝试这样的事情：

```
[HttpPost]
public ActionResult UpdateAnswers(string answers, string question, string controlid, int eventid)
{
    var replacetext=string.Empty;
    if (answers.Length>0) 
        replacetext = answers.Replace("\n", ",");
    _service.UpdateAnswers(eventid, replacetext, controlid);
    var eventsdetails = _service.GeteventByID(eventid);
    return Json(eventdetails);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:43:37.403

您`dataType: 'json'`在 AJAX 请求和`UpdateAnswers`控制器操作中指定您`return RedirectToAction`显然重定向到 ViewDetails 操作，该操作又返回一个视图，该视图又是 HTML。所以这没有意义。

您必须从 UpdateAnswers 控制器操作中返回 Json 而不是重定向。

# javascript - 有没有办法强制工具提示显示在输入元素的特定位置？

> ID：10719129
> 
> 赞同：0
> 
> 时间：2012-05-23T11:36:47.657
> 
> 标签：javascript, jquery, html

我正在处理过滤器列表，由于大小限制，我希望每列都有文本输入元素。每个输入的值最初将是列的名称，但当用户单击它时将被清除。我想要一种在输入上方显示带有列名称的工具提示的方法，只要输入被聚焦（这样用户就可以看到他在做什么，而不必取消他的操作并重新开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:41:05.797

您可以通过在工具提示上应用 CSS 来做到这一点

```
.tooltip {
  border-bottom: 1px dotted #000000;
  color: #000000; outline: none;
  cursor: help; text-decoration: none;
  position: relative;
}
.tooltip div {
margin-left:50px;
margin-top:50px;
margin-right:80px;
margin-bottom:300px;
  position: absolute;
} 
```

# android - 地理编码和反向地理编码

> ID：10719130
> 
> 赞同：-3
> 
> 时间：2012-05-23T11:36:48.863
> 
> 标签：android, google-geocoder

我正在尝试一个简单的应用程序，我需要在其中显示地图。当我点击任何位置时，它应该返回该位置的地址。你能指导我如何进行此操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:27:26.750

我发现 Google API 对于反向地​​理编码非常方便。为此，我创建了这个类。您可以直接在您的应用程序中使用此类：

```
public class getReverseGeoCoding
{
    private String Address1 = "", Address2 = "", City = "", State = "", Country = "", County = "", PIN = "";

    public void getAddress()
    {
        Address1 = "";  Address2 = ""; City = ""; State = ""; Country = ""; County = ""; PIN = "";

        try {

            JSONObject jsonObj = parser_Json.getJSONfromURL("http://maps.googleapis.com/maps/api/geocode/json?latlng="+ Global.curLatitude + "," + Global.curLongitude +"&sensor=true"); 
            String Status = jsonObj.getString("status");
            if(Status.equalsIgnoreCase("OK"))
            {
                JSONArray Results = jsonObj.getJSONArray("results"); 
                JSONObject zero = Results.getJSONObject(0);
                JSONArray address_components = zero.getJSONArray("address_components");

                for(int i = 0; i<address_components.length(); i++)
                {
                    JSONObject zero2 = address_components.getJSONObject(i);
                    String long_name = zero2.getString("long_name");
                    JSONArray mtypes = zero2.getJSONArray("types");
                    String Type = mtypes.getString(0);

                    if(TextUtils.isEmpty(long_name) == false || !long_name.equals(null) || long_name.length() > 0 || long_name != "" )
                    {
                        if(Type.equalsIgnoreCase("street_number"))
                        {
                            Address1 = long_name + " ";
                        }
                        else if(Type.equalsIgnoreCase("route"))
                        {
                            Address1 = Address1 + long_name;
                        }
                        else if(Type.equalsIgnoreCase("sublocality"))
                        {
                            Address2 = long_name;
                        }
                        else if(Type.equalsIgnoreCase("locality"))
                        {
//                          Address2 = Address2 + long_name + ", ";
                            City = long_name;
                        }
                        else if(Type.equalsIgnoreCase("administrative_area_level_2"))
                        {
                            County = long_name;
                        }
                        else if(Type.equalsIgnoreCase("administrative_area_level_1"))
                        {
                            State = long_name;
                        }
                        else if(Type.equalsIgnoreCase("country"))
                        {
                            Country = long_name;
                        }
                        else if(Type.equalsIgnoreCase("postal_code"))
                        {
                            PIN = long_name;
                        }
                    }

//                  JSONArray mtypes = zero2.getJSONArray("types");
//                  String Type = mtypes.getString(0);
//                  Log.e(Type,long_name);
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    public String getAddress1()
    {
        return Address1;

    }

    public String getAddress2()
    {
        return Address2;

    }

    public String getCity()
    {
        return City;

    }

    public String getState()
    {
        return State;

    }

    public String getCountry()
    {
        return Country;

    }

    public String getCounty()
    {
        return County;

    }

    public String getPIN()
    {
        return PIN;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:42:50.160

你知道如何在你的安卓应用中显示地图吗？如果没有，你可以看看[这个](http://www.vogella.com/articles/AndroidLocationAPI/article.html)不错的教程。

然后显示地址可以这样完成：

```
Geocoder geocoder = new Geocoder(this, Locale.getDefault());
    List<Address> addresses = geocoder.getFromLocation(lat, lng, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:42:54.440

要获取单击的坐标，请检查此线程：

[单击 MapView 上的任意位置时获取坐标](https://stackoverflow.com/questions/2787204/getting-coordinates-when-clicking-anywhere-on-a-mapview)

您可以使用以下命令将坐标转换为地址：

```
 Address a = ((Address)geocoder.getFromLocation(latiAsDouble, longiAsDouble, 1).get(0));
 String Position = a.getAddressLine(1) + " - " + a.getAddressLine(0); 
```

这会对 google 服务器进行 http 调用，因此您可能希望将其放入某种线程中。

# mercurial - 无法使用子存储库更新到 mercurial 分支

> ID：10719131
> 
> 赞同：0
> 
> 时间：2012-05-23T11:36:59.597
> 
> 标签：mercurial

```
hg update develop --clean
remote: conq: repository does not exist.
abort: no suitable response from remote hg! 
```

我希望能够切换到我的开发分支，撤消我最近的 2 次提交并将开发分支与提示合并或关闭它！

或者

只需关闭并重命名分支，但由于我无法更新它，我不知道该怎么做。我想：用分支 y 覆盖分支 x：

```
hg update x
hg commit --close-branch -m 'closing branch x, will be overwriten with branch y'
hg update y
hg branch -f x
hg ci 
```

但我无法更新到 x。如何解决/强制这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:10:44.703

我使用了 MQ 扩展：

```
hg qinit
hg qimport -r 4:tip
hg qpop -a
hg qdelete 4.diff
hg qpush -a
hg qfinish -a 
```

那行得通，但是在拉动之后，被移除的东西又回来了。

但是，我刚刚使用 -f 从提示创建了一个新的分支，名称相同。这对我来说已经足够好了。无法删除它的“错误”分支，因为它是“瓶外”发布的。

# sql - 如何在sql中循环遍历表的项目列表

> ID：10719137
> 
> 赞同：2
> 
> 时间：2012-05-23T11:37:47.240
> 
> 标签：sql, sql-server, database, cursor

我是 sql 新手，我想要那个，我有一个表， `Customer`
我在其中添加了一个新字段`Region`，现在我想
在 SQL 中做一些更改。我想获取所有记录`Customer`并检查每个记录

```
 // This check will perfome for every customer let suppose we have our first customer
if currentcustomer.Country = 'US' 
 {
  UPDATE currentcustomer SET currentcustomer.Region=currentcustomer.id
 }
 else
 {
    UPDATE  currentcustomer SET currentcustomer.Region=currentcustomer.ZIP
  } 
```

这就是我想做的，但我不知道如何对所有客户执行此操作以及如何在 sql 中执行此操作。请帮帮我谢谢！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T11:39:03.217

```
UPDATE Customer SET Region='AA'
WHERE Country = 'US'

UPDATE Customer SET Region='ZZ'
WHERE Country <> 'US' 
```

避免在 SQL 中循环——它不是为循环而设计的。

尝试在基于集合的术语中制定您的要求（我需要更新所有客户的国家/地区为`US`region `AA`，所有其他客户为 region `ZZ`）。

更新：

看到您的编辑，并假设它是明智的（兼容的数据类型和有意义的数据）：

```
UPDATE Customer SET Region= id
WHERE Country = 'US'

UPDATE Customer SET Region= Zip
WHERE Country <> 'US' 
```

# jms - 具有中继行为的消息服务

> ID：10719142
> 
> 赞同：0
> 
> 时间：2012-05-23T11:38:24.013
> 
> 标签：jms

我正在设计一个分布式传感设备网络。这些设备将生成日志并将它们发送到中央数据库。我正在使用 JMS 传输日志消息。主数据库服务器将运行 MDB（消息驱动 Bean）来处理传入消息。客户端正在使用 GPRS 发送数据。问题是我不希望我的客户处理网络问题。我需要一些在客户端机器上本地运行的中继服务，并立即从客户端获取消息而不阻止它并代表它尝试。（如果网络出现故障，请在一段时间后再次尝试发送）。

message 是一个简单的 java 对象：

```
public class Message {
    public int x;
    public int y;
    public int z;
} 
```

客户：

```
Message msg = new Message();
while (True) {
    /* sense data */
    msg = get_data_from_environment();

    /* send data to local relay service
     * This is non blocking call */
    relay_service.send(msg);
} 
```

本地中继服务：

```
while (True) {
    /* get message from local client */
    msg = get_message_from_local_client();

    result = send_msg_to_JMS_server(msg);

    /* if not successful, persist it on a local queue and try some other time */
    if (result.is_sent() != True)
        store_msg_on_disk(msg);
} 
```

是否有这样的消息服务或者我应该自己编写中继服务？

在这种情况下使用 JMS 好吗？我应该设计自己的套接字级协议来发送消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:46:22.703

**编辑**

> 是否有这样的消息服务或者我应该自己编写中继服务？

通常，这些类型的中继服务您必须自己编写代码，除非您能够找到完全符合您要求的软件。在这些情况下这样做并不少见。

> 在这种情况下使用 JMS 好吗？

是的，JMS 是用作中间件的非常好的解决方案。您可以让许多客户端连接到 JMS 并向其发送消息。当您有一个正在运行的服务器程序从 JMS 读取消息并对其进行处理并处理网络问题（如果有）时。同样作为奖励，服务器程序在完全失败的情况下将消息发送回客户端。

> 我应该设计自己的套接字级协议来发送消息吗？

我仍然不知道您要发送什么样的消息。如果您使用的是标准传输，如 SMTP、SMS 或 HTTP 或类似的东西，那么有一些库可以帮助您发送和验证交付。如果您必须使用自定义协议发送，那么您必须编写自己的套接字级别代码。

看到您的代码示例表明您想知道您的客户是否成功地将他的消息发送到 JMS。如果未发送，则保存到磁盘并稍后重试。

如果收到消息，JMS 服务器将自动确认。您可以从 JMS 消息中检查这一点，或者如果失败，您将收到 JMSException。如果您将消息保存在磁盘上，您将需要知道何时重新发送它们。您将需要一个计时器或重新发送下一条要发送的消息。

# android - Android startActivityForResult 方向改变

> ID：10719143
> 
> 赞同：1
> 
> 时间：2012-05-23T11:38:26.977
> 
> 标签：android

我正在使用启动活动来帮助我的应用程序用户过滤掉一些信息。过滤信息后，我将其添加到意图中，然后调用完成。除了当用户在执行过滤时旋转设备时，它工作得很好。这会导致第一个活动重新创建，并且由于这种情况发生，我的过滤选项被清除（它们在 onCreate 结束之前完成，因此 UI 被清除）。关于处理这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:47:35.803

有 3 个选项可以做到这一点

1.  `onSaveInstanceState()` // 但通常可以处理少量数据

2.  `onRetainNonConfigurationInstance() and getLastNonConfigurationInstance()`//首选

3.  `android:configChanges="orientation|keyboardHidden"`在 AndroidManifest.xml 中

// 这不会让活动重新启动，当您要保存的数据不大时使用此。对于 api 13+ 使用此`android:configChanges="orientation|screenSize"`

# c++ - 运算符重载和模板特化

> ID：10719145
> 
> 赞同：0
> 
> 时间：2012-05-23T11:38:36.907
> 
> 标签：c++, templates, operator-overloading

我有一个模板类`template<typename T, typename R>`。R 是`vector<T*>`或类型`list<T*>`。

我希望我的类重载`[]`运算符，这样如果它是一个向量，我将使用内置`[]`运算符来提高效率，如果它是一个列表，我将使用迭代器来实现它。

对我来说，这听起来像是模板专业化的工作，所以我想写这样的东西：

```
template<typename T, typename R>
T& tContainer_t<T, R>::operator[]( unsigned i )
{
    //TODO with iterators   
}

template<>
T& tContainer_t::operator[]<T, std::vector<T*> >( unsigned i )
{
    // TODO with built in [] operator
} 
```

这是错误的，编译器不允许这样做。

有没有办法让它工作，或者我应该`typeid()`在运行时区分这两个对象并采取相应的行动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:48:27.220

使用模板的方法是在一个可以部分特化的类中创建一个静态辅助函数。但是，我会做的是：

```
template<typename T, typename R>
T& tContainer_t<T, R>::operator[]( unsigned i )
{
    //assuming that the container refernce is name container;
    typename R::iterator itr = container.begin();
    std::advance(itr, i);
    return *itr;
} 
```

`std::advance`保证对于具有随机访问迭代器（例如向量）的容器，它是恒定时间（基本上，它是迭代器 + n），它可以与指针查找向量执行的速度一样快。否则，它会执行`iterator++`n 次，这将是线性时间。const 版本将使用 const_iterator，但本质上是相同的。

这样做可以让您正确处理不同类型的容器（不仅仅是向量和列表），而无需修改代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:48:51.643

您不必重载运算符。库 aleady 包含可以帮助您的重载函数。`std::advance`将移动一个迭代器，利用`operator+()`随机访问迭代器。

```
template<typename T, typename R>
T& tContainer_t<T, R>::operator[]( unsigned i )     
{
    typename R::iterator it = myContainer.begin();
    std::advance(it, i);

    return *it;
} 
```

# java - Gson 中同步 getHandlerFor(Type) 的性能

> ID：10719146
> 
> 赞同：0
> 
> 时间：2012-05-23T11:39:00.860
> 
> 标签：java, json, gson

我正在使用 gson 1.7，我看到它在类的 toJson() 中有一个序列化块

```
final class ParameterizedTypeHandlerMap<T>{
....
public synchronized T getHandlerFor(Type type) {
.... 
```

如果我为每个请求创建对象，它也有一个正在构建的同步块。

我有几个问题：

1.  2.1 版本是否具有相同的行为？
2.  升级到 2.1 是否安全（从向后兼容性的角度来看）
3.  json 的最佳性能包是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:05:09.833

我使用 gson 2，它对我来说与 1.7 相同。如果同步吓到您，您可以为每个线程创建一个 Gson 实例。

# php - 重写 Mage_Core_Block_Abstract

> ID：10719149
> 
> 赞同：1
> 
> 时间：2012-05-23T11:39:03.180
> 
> 标签：php, magento

我想我已经知道答案了，但可能有一种很好的方法可以重写 Mage_Core_Block_Abstract 类，而无需直接在 magento 框架中进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:14:46.967

您可以在 Magento 中重写类的原因是因为您将要加载的类通过翻译层传递，例如从 翻译`core/template`到。`Mage_Core_Block_Template`

抽象类不会通过这一层，因为您直接在代码中引用它们，例如`class Mage_Core_Block_Template extends Mage_Core_Block_Abstract {..}`.

如果你*真的*需要重新定义类，那么你需要把它放在加载路径的更高位置，比如在`app/code/local`文件夹中。不过，我会重新评估您这样做的原因，因为您可能采用了错误的方法，或者可能有更好的方法来实现您想要的结果。

# protobuf-net - ProtoBuf-Net 性能

> ID：10719169
> 
> 赞同：1
> 
> 时间：2012-05-23T11:40:25.097
> 
> 标签：protobuf-net

在下面的示例中：

Class1 序列化所花费的时间几乎是 Class2 序列化的两倍吗？或者 protobuf-net 会将 Class1 中的 byte[] 作为已经序列化的数据处理？

伪示例：

```
[ProtoContract]
class Class1
{
  [ProtoMember(1)]
  public byte[] SerializedData { get; set; }
}

[ProtoContract]
class Class2
{
  [ProtoMember(1)]
  public Class3 NonSerializedData { get; set; }
}

[ProtoContract]
class Class3
{
  [ProtoMember(1)]
  public string Address{ get; set; }

  [ProtoMember(2)]
  public string ZipCode{ get; set; }

  [ProtoMember(2)]
  public string Country{ get; set; }
}

Class3 _c3 = new Class3() { Address = "MyAddress", ZipCode = "90210", Country = "AZ"  }

// Class 1 Serialization
Class1 _c1 = new C1();
_c1.SerializedData = protobuf.Serialize(_c3);

byte[] c1Bytes = protobuf.Serialize(_c1);

// Class 2 Serialization
Class2 _c2 = new Class2();
_c2.NonSerializedData = _c3;

byte[] c2Bytes = protobuf.Serialize(_c2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:02:11.603

> 或者 protobuf-net 会将 Class1 中的 byte[] 作为已经序列化的数据处理？

A`byte[]` **被**视为原始数据（并且在没有任何额外处理的情况下写入流），但仍然需要序列化一些小事情`Class1`- 写入标题字段和一般开销。在处理单个对象时，这两种方法都足够快，以至于任何区别都没有实际意义。但是，在大批量时，我有充分的理由怀疑序列化`Class2`会明显更快——因为处理单个序列化管道可以避免大量开销

> Class1 序列化所花费的时间几乎是 Class2 序列化的两倍吗？

这将是一个很好的分析，但这将取决于您的典型数据。只有你能想出实际的数字。我希望“稍微长一点”。在这两个方面，我都在比较“序列化 class3 的成本，然后序列化由该输出组成的 class1”与“序列化由 class1 实例组成的 class3 的成本”

实际上，如果速度是您最关心的问题，我希望最佳方法是：

```
[ProtoContract]
class Class2
{
  [ProtoMember(1, DataFormat = DataFormat.Group)]
  public Class3 NonSerializedData { get; set; }
} 
```

这种微妙的调整意味着它可以`Class3`以非缓冲、仅向前的方式写入（通过使用终止符而不是长度前缀）。这不是默认设置的唯一原因是谷歌明确更喜欢长度前缀方法。

# c# - 在对象列表中加载未引用程序集的类型

> ID：10719175
> 
> 赞同：1
> 
> 时间：2012-05-23T11:40:39.097
> 
> 标签：c#, reflection, .net-assembly

我想从未引用的程序集中获取类型。我用[这个答案](https://stackoverflow.com/a/463366/1384848)来解决我的问题。

现在的问题是，我正在加载`ObjectList`包含来自另一个程序集的另一种类型的类型。我这样做：

```
Assembly assembly = Assembly.LoadFrom ("@c:\myAssemblies\myAssembly.Data.DomainObjects.dll");
Type myType = assembly.GetType ("myAssembly.Data.DomainObjects.ObjectList`1[[myAssembly.otherNamespace.myClass, myAssembly.otherNamespace, Version=1.13.73.1082, Culture=neutral, PublicKeyToken=fee00910d6e5f53b]]"); 
```

带有 的程序集`otherNamespace`也未被引用，因此该`GetType`方法返回`null`。我现在的问题是：

是否可以获得包含另一种类型的未引用程序集的对象列表的类型？或者：如何在我的 ? 中加载类型的程序集`ObjectList`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:52:16.450

我对此不是 100% 确定，但是当我尝试这个时：

```
public class Moop<T> {} 
```

我这样做：

```
Type.GetType("UserQuery.Moop`1") //returns null

Type.GetType("UserQuery+Moop`1") //returns the correct type 
```

在 Linqpad

编辑：'+' 表示它只是一个嵌套类型 - 所以，这可能不是正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:06:56.157

好的，这对我来说有点难以测试 - 但我希望我的答案可以转换：

基本上，您需要分两步完成 -

1.  解析通用参数类型（在您的情况下为 myAssembly.otherNamespace.myClass）
2.  根据泛型参数的类型生成新类型。

这是一个 Linqpad 脚本：

```
void Main()
{
    //resolve the inner type
    var  parameterType = Type.GetType("UserQuery+GenericParameter");

    //Use the generic type, and generate with the inner parameter type
    var genericTypeWithParameter = Type.GetType("UserQuery+Moop`1")
        .MakeGenericType(parameterType);

    //The resolved type - printed to console
    genericTypeWithParameter.Dump();
}

public class Moop <T> { }
public class GenericParameter { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:26:25.533

如果程序集*myAssembly.otherNamespace.dll*与可执行文件不在同一目录或安装在 GAC 中，则公共语言运行时无法找到它。因此*myAssembly.otherNamespace.dll*未加载到 AppDomain 并且您无法获得所需的类型。

将*myAssembly.Data.DomainObjects.dll*和*myAssembly.otherNamespace.dll*放在可执行文件所在的同一目录中，或者将它们安装到 GAC。然后使用[Load](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)（而不是[LoadFrom](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)）确保将它们加载到相同的[*Load Cntext*](http://msdn.microsoft.com/en-us/library/dd153782.aspx)。

如果程序集 myAssembly.Data.DomainObjects.dll 中的元数据*包含*对程序集 myAssembly.otherNamespace.dll 的引用*，*则加载前者时应自动加载后者。否则，您必须在获得所需类型之前加载两个程序集。

# emacs - emacs 有有理数数据类型吗

> ID：10719177
> 
> 赞同：5
> 
> 时间：2012-05-23T11:40:49.830
> 
> 标签：emacs, elisp

*我从头开始*评估一个 lisp 表达式

 *```
(+ (/ 1 2) (/ 1 2)) 
```

我得了一个 0。

通常它应该是1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:31:39.663

正如 Oleg 指出的那样，除非您包含浮点参数（如`1.0`），否则运算符通常默认为整数算术。

关于您关于有理数支持的问题，emacs-calc（它是 emacs 的一部分）支持许多数字类型，包括分数（即有理数）、复数、无限精度整数等。您的代码必须调用 emacs-calc 函数（而不是`/`等），以便使用 calc 的算术。

GNU Emacs 计算手册：

*   [分数](http://www.gnu.org/software/emacs/manual/html_mono/calc.html#Fractions)
*   [Lisp 数学函数索引](http://www.gnu.org/software/emacs/manual/html_mono/calc.html#Lisp-Function-Index)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T11:58:08.243

试试这个方法

```
(+ (/ 1.0 2) (/ 1.0 2)) 
```

根据[emacs doc](http://www.gnu.org/software/emacs/manual/html_node/elisp/Arithmetic-Operations.html)

> 函数：/除数除数&rest除数
> 
> 如果所有参数都是整数，那么结果也是整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:16:15.153

您可以在此处阅读有关 elisp 中数字的所有信息：

`C-h``i``g` `(elisp) Numbers` `RET`

正如tripleee 已经指出的那样，答案显然是“否”。*

# iphone - 即使我强加为真，布尔值也总是假的

> ID：10719186
> 
> 赞同：0
> 
> 时间：2012-05-23T11:41:30.617
> 
> 标签：iphone, objective-c, boolean, uigesturerecognizer, uipangesturerecognizer

我有一个 UIView，在我使用 UILongPressGestureRecognizer 之前，然后我使用 UIPanGestureRecognizer。对于 UIPanGestureRecognizer，我收到一条关于 UILongPressGestureRecognizer 压力的消息，但我的应用程序不采用布尔值，即使我强加为真，这也总是假的。我能怎么做？

```
 -(IBAction)longGesture:(UILongPressGestureRecognizer *)gestureRecognizer{

   if(fromRiga ==0){
    if ([gestureRecognizer state]==UIGestureRecognizerStateBegan){
        self.inLongPress = YES;
        self.view.backgroundColor =[UIColor darkGrayColor];
        gestureRecognizer.allowableMovement=200;

      }else if([gestureRecognizer state]==UIGestureRecognizerStateEnded){
        self.inLongPress = NO;
      }
}

 - (IBAction)panGesture:(UIPanGestureRecognizer *)gestureRecognizer
  {
    NSLog(@"inLongPress is %@", self.inLongPress ? @"YES": @"NO");
  } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:55:25.313

当您触摸视图并检查从那一刻起的移动时，平移识别器会立即触发。长按识别器触发总是晚于平移识别器（在*长时间*结束后）。我怀疑`panGesture`总是在之前调用`longGesture`。也许平移识别器正在完全取消长按识别器。

您应该通过添加更多`NSLog`语句来检查会发生什么。

```
 -(IBAction)longGesture:(UILongPressGestureRecognizer *)gestureRecognizer {
    NSLog(@"Long gesture");

    if (fromRiga == 0){
        if ([gestureRecognizer state] == UIGestureRecognizerStateBegan){
            self.inLongPress = YES;
            self.view.backgroundColor =[UIColor darkGrayColor];
            gestureRecognizer.allowableMovement=200;

            NSLog(@"Long gesture began, self.iLongPress = %@", self.iLongPress ? @"YES" : @"NO");
        } else if([gestureRecognizer state] == UIGestureRecognizerStateEnded) {
            self.inLongPress = NO;
            NSLog(@"Long gesture ended, self.iLongPress = %@", self.iLongPress ? @"YES" : @"NO");
        }
    }
}

- (IBAction)panGesture:(UIPanGestureRecognizer *)gestureRecognizer {
    NSLog(@"Pan gesture, self.iLongPress = %@", self.iLongPress ? @"YES" : @"NO");
} 
```

# html - 如何在 YouTube iframe 中嵌入高清视频

> ID：10719187
> 
> 赞同：4
> 
> 时间：2012-05-23T11:41:31.587
> 
> 标签：html, iframe, youtube, embed

我的代码现在看起来像这样：

```
<iframe title="YouTube video player" width="640" height="360" src="http://www.youtube.com/embed/6X3zUh8RqbY?hd=1" frameborder="0" allowfullscreen></iframe> 
```

我在这里和其他地方读到 ?hd=1 部分应该把它变成高清，但这对我不起作用。视频嵌入为 360p...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:56:39.170

尝试使用

```
<iframe title="YouTube video player" width="640" height="360" src="http://www.youtube.com/embed/6X3zUh8RqbY&ap=%2526fmt%3D22" frameborder="0" allowfullscreen></iframe> 
```

方法见于

[http://www.mydigitallife.info/how-to-embed-and-play-720p-hd-high-definition-youtube-videos-fmt22-code-hack/](http://www.mydigitallife.info/how-to-embed-and-play-720p-hd-high-definition-youtube-videos-fmt22-code-hack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T00:34:47.277

`<iframe width="420" height="315" src="http://www.youtube.com/embed/XGSy3_Czz8k"> </iframe>`

iFrame 视频和音频使用有损压缩进行编码。仅启用帧内压缩；每个框架都是一个独立的 i 框架。宽度和高度设置将上传的视频的大小。例子：

# ios - 无法在 Ipad 上安装配置文件

> ID：10719190
> 
> 赞同：2
> 
> 时间：2012-05-23T11:41:41.990
> 
> 标签：ios, ipad

我遵循了所有必要的步骤并创建了开发配置文件。我在 win7 上，我将 myapp.mobileprovision 添加到 Itunes 库文件/将文件添加到库...然后按同步。

现在，当我转到 Ipad 上的设置/常规时 - 我没有看到任何配置文件。

这里可能是什么问题。我也没有收到任何通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:42:38.170

我们在谈论什么类型的配置文件？除非它是来自企业开发者帐户的分发配置文件，否则配置文件需要包含每个设备的设备 ID。如果您的 iPad 的设备 ID 未包含在配置文件中，则配置文件将不会安装在设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T08:00:15.870

我在挖掘同样的问题；我面前有两台 iPad，其中一台（8.0）没有在设置/常规下显示“配置文件”。在装有 iOS7.1.1 的 iPad 上，我仍然可以看到个人资料。

“配置文件”菜单在 iOS8 上是隐藏的，它会自动处理配置文件，删除过期的配置文件。

有关更多信息，请参阅：[https ://apple.stackexchange.com/a/150432](https://apple.stackexchange.com/a/150432)

# hadoop - Hadoop的输入拆分——它是如何工作的

> ID：10719191
> 
> 赞同：0
> 
> 时间：2012-05-23T11:41:41.773
> 
> 标签：hadoop

我了解[hadoop](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CIMBEBYwAA&url=http://hadoop.apache.org/&ei=Jcy8T4GxG4jPrQfXzISvDQ&usg=AFQjCNH_fucjedSFJYj4f6CB9trYS4DMDA)

我很想知道它是如何工作的。

确切地说，我想知道它是如何划分/拆分输入文件的。

它在大小方面是否分成相等的块？

或者它是可配置的东西。

我确实看过这篇[文章](https://stackoverflow.com/questions/2831507/how-does-hadoop-perform-input-splits)，但我无法理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:10:10.580

这取决于 InputFormat，对于大多数基于文件的格式，InputFormat 是在`FileInputFormat`基类中定义的。

有许多可配置的选项表示 hadoop 将如何获取单个文件并将其作为单个拆分处理，或者将文件分成多个拆分：

*   如果输入文件被压缩，输入格式和压缩方法必须是可拆分的。例如，Gzip 是不可拆分的（您不能随机查找文件中的某个点并恢复压缩流）。BZip2 是可拆分的。有关更多信息，请参阅您的输入格式的具体`InputFormat.isSplittable()`实现
*   如果文件大小小于或等于其定义的 HDFS 块大小，则 hadoop 很可能会在单个拆分中处理它（这可以配置，请参阅稍后关于拆分大小属性的点）
*   如果文件大小大于其定义的 HDFS 块大小，则 hadoop 很可能会根据底层块将文件分成多个拆分（4 个块将导致 4 个拆分）
*   您可以配置两个属性`mapred.min.split.size`，`mapred.max.split.size`它们在将块分解为拆分时有助于输入格式。请注意，输入格式可能会覆盖最小大小（可能具有固定的最小输入大小）

如果您想了解更多信息，并且可以轻松查看源代码，请查看中的`getSplits()`方法`FileInputFormat`（新旧 api 具有相同的方法，但它们可能存在一些细微差别）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T19:46:27.000

当您提交 map-reduce 作业（或 pig/hive 作业）时，Hadoop 首先计算输入拆分，每个输入拆分大小通常等于 HDFS 块大小。例如，对于 1GB 大小的文件，如果块大小为 64MB，则将有 16 个输入拆分。但是，拆分大小可以配置为小于/大于 HDFS 块大小。输入拆分的计算是使用 FileInputFormat 完成的。对于这些输入拆分中的每一个，都必须启动一个映射任务。

但是您可以通过配置以下属性来更改输入拆分的大小：

```
mapred.min.split.size: The minimum size chunk that map input should be split into.
mapred.max.split.size: The largest valid size inbytes for a file split. 
dfs.block.size: The default block size for new files. 
```

输入拆分的公式为：

```
Math.max("mapred.min.split.size", Math.min("mapred.max.split.size", blockSize)); 
```

[您可以在此处](http://codinghassle.blogspot.com.tr/2014/06/hadoop-number-of-map-and-reduce-tasks.html)查看示例。

# ruby-on-rails - 如何使用gmail smtp服务发送确认电子邮件以在本地开发模式下使用devise进行注册？

> ID：10719192
> 
> 赞同：3
> 
> 时间：2012-05-23T11:41:52.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, devise

我有一个应用程序，它使用设计为新注册的用户发送确认邮件，我在 development.rb 文件下有 smtp 设置为

```
 config.action_mailer.default_url_options = { :host => 'http://localhost:3000' }
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = {
  :enable_starttls_auto => true,
  :address => "smtp.gmail.com",
  :port => 587,
  :domain => "gmail.com",
  :authentication => :login,
  :user_name => "my_username@gmail.com",
  :password => "mygmail password"
    } 
```

这让我犯了一个错误，例如，

```
Net::SMTPAuthenticationError in Devise::RegistrationsController#create

535-5.7.1 Please log in with your web browser and then try again. Learn more at 
```

任何想法如何解决这个问题？

使用这些设置解决..

```
 config.action_mailer.default_url_options = { :host => 'localhost:3000' }
 config.action_mailer.perform_deliveries = true
 config.action_mailer.default :charset => "utf-8"
  ActionMailer::Base.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :user_name            => "my_username@gmail.com",
  :password             => 'my_gmail password',
  :authentication       => "plain",
  :enable_starttls_auto => true
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T10:44:22.823

我无法用任何代码解决这个问题。过了一会儿，我登录了 gmail 帐户，这就是它给我的结果。

```
We've detected suspicious activity on your Google Account. Please create a new password to continue using your account.

Read some tips on creating a secure password. 
```

所以解决这个问题的方法是简单地登录您用于发送电子邮件的帐户并重新确认您的新密码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:47:36.237

:authentication => '普通'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T09:58:20.327

# ActionMailer 配置

```
config.action_mailer.default_url_options = {:host => 'localhost:3000' }
config.action_mailer.delivery_method = :smtp
# change to false to prevent email from being sent during development
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true
config.action_mailer.default :charset => "utf-8"

config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "example.com",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: "your_mail@gmail.com",
  password: "your_password"
} 
```

像这样制作你的 development.rb 文件后，如果你有问题，请登录到你的 gmail 帐户，该帐户在 development.rb 文件中使用。那么问题就解决了。

# google-maps - Google Maps MarkerClusterer：标记未显示

> ID：10719193
> 
> 赞同：2
> 
> 时间：2012-05-23T11:41:52.967
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

如果我单击标记群集，它不会显示带有标题的标记。这是我的测试代码...

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title></title>
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=-my-key-&sensor=false"></script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <script type="text/javascript">
      var map;
      var myCenter = new google.maps.LatLng(55.34943850000000, 11.12281580000000);

      var customers = [
        ['Place1', 55.34943850000000, 11.12281580000000],
        ['Place2', 55.34943850000000, 11.22281580000001]
      ];

      function initialize() {
        geocoder = new google.maps.Geocoder();
        var myOptions = {
          zoom: 7,
          center: myCenter,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        setMarkers(map);
      }

      function setMarkers(map) {
        var markers = [];

        for (var i = 0; i < customers.length; i++) {
          var customer = customers[i];
          var myLatLng = new google.maps.LatLng(customer[1], customer[2]);
          var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: customer[0]
          });
          markers.push(marker);
        }

        var CLUSTER_MINIMUM_SIZE = 1;
        var markerCluster = new MarkerClusterer(map, markers, { minimumClusterSize: CLUSTER_MINIMUM_SIZE });
      }

      google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html>
```

知道我做错了什么或 MarkerCluster 中存在错误吗？

谢谢魔乔

# javascript - django - 值错误

> ID：10719196
> 
> 赞同：0
> 
> 时间：2012-05-23T11:42:09.293
> 
> 标签：javascript, jquery, python, django

我正在开发一个 Web 应用程序，但我遇到了一个功能问题。您可以在这里查看[http://qlimp.com](http://qlimp.com) 您也可以将其用于用户名/密码：dummy/dummy

登录后，请单击链接**转到封面设置**您将看到一个调色板，您可以在其中上传图像，输入一些文字。

当您上传图像时，我在 jQuery 中编写了一个 ajax 请求，它将图像上传到服务器并显示该图像的全页背景预览。

jQuery

```
$('#id_tmpbg').live('change', function()
    {
    $("#ajax-loader").show();
    $("#uploadform").ajaxForm({success: showResponse}).submit();
    });

function showResponse(responseText, statusText, xhr, $form)  { 
    $.backstretch(responseText)
    $("#ajax-loader").hide();
} 
```

所以这里的问题是，当我上传图片时，它显示

```
ValueError at /cover/ 
The view cover.views.backgroundview didn't return an HttpResponse object. 
Request Method: POST Request URL: http://qlimp.com/cover/ 
```

我实际上是在视图中返回 HttpResponse 对象。

视图.py：

```
@login_required
def backgroundview(request):
    if request.is_ajax():
        form = BackgroundModelForm(request.POST, request.FILES)
        if form.is_valid():
            try:
                g = BackgroundModel.objects.get(user=request.user)
            except BackgroundModel.DoesNotExist:
                data = form.save(commit=False)
                data.user = request.user
                data.save()
            else:
                if g.tmpbg != '' and g.tmpbg != g.background:
                    image_path = os.path.join(settings.MEDIA_ROOT, str(g.tmpbg))
                    try:
                        os.unlink(image_path)
                    except:
                        pass
                data = BackgroundModelForm(request.POST, request.FILES, instance=g).save()
            return HttpResponse(data.tmpbg.url)
    else:
        form = BackgroundModelForm()
        return render_to_response("cover.html", {'form': form}, context_instance=RequestContext(request)) 
```

模型.py：

```
class BackgroundModel(models.Model):
    user = models.OneToOneField(User)
    background = models.ImageField(upload_to='backgrounds', null=True, blank=True)
    tmpbg = models.ImageField(upload_to='backgrounds', null=True, blank=True)

class BackgroundModelForm(ModelForm):
    class Meta:
        model = BackgroundModel
        exclude = ('user','background') 
```

但是这些东西在我的电脑上工作（保存图像并显示背景预览）但不在生产服务器上。为什么会这样？我已将相同的代码上传到服务器。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:15:17.827

如果表单有效，您不会返回响应。

# android - Android 横向到纵向处理数据

> ID：10719203
> 
> 赞同：1
> 
> 时间：2012-05-23T11:42:28.190
> 
> 标签：android, screen-orientation

我已经为平板电脑开发了一个应用程序，其中我有横向和纵向，我为两个屏幕做了不同的 ui 设计，我尝试在清单中使用 onconfig change =orientation 和 java 代码中的 onconfig change 问题是如何处理屏幕中的数据方向。

请请朋友们帮帮我..提前谢谢..

# ios - 如何将json字符串转换为元素数组？

> ID：10719205
> 
> 赞同：2
> 
> 时间：2012-05-23T11:42:33.377
> 
> 标签：ios, xcode, json, nsmutablearray, nsdictionary

这是我获取json响应字符串的代码

我通过使用这种方法得到这个字符串

```
NSDictionary *selector = [json valueForKey: @"Title"];
NSMutableArray *dictArray = [[NSMutableArray alloc] initWithObjects: selector,nil];
str1=[[dictArray objectAtIndex:i] valueForKey:@"CompanyName"]; 
```

打印“str1”

我正进入（状态

```
(
    "hello@developer.com"
),
    (
    "hello@developer.com",
    "helloworld@microsoft.com"
),
    (
    "hello@developer.com"
),
    (
    "hello@developer.com"
),
    (
    "hello@developer.com"
),
    (
    "hello@developer.com"
),
    (
    "hello@developer.com"
),
    (
    "hello@developer.com"
) 
```

)

我正在尝试使用“，”运算符存储在数组中

像这样

```
NSArray *SplitStringArray = [str1 componentsSeparatedByString:@", "]; 
```

但我没有将字符串拆分为元素数组

可以请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:55:02.987

```
 NSDictionary *selector = [json valueForKey: @"Title"];

    NSMutableArray *dictArray = [[NSMutableArray alloc] initWithObjects: selector,nil];

    NSMutableArray *str1Array=[[dictArray objectAtIndex:i] valueForKey:@"CompanyName"];

        //note this line
    NSMutableArray *SplitStringArray =[[NSMutableArray alloc]init];

    for (id eachArray in str1Array) {

        if ([eachArray count]>0) {

            for (int i = 0; i<[eachArray count]; i++) {

                NSString *emailid=[NSString stringWithFormat:@"%@",[eachArray objectAtIndex:i]];

                [SplitStringArray addObject:emailid];

            }

        }

    }

    NSLog(@"SplitStringArray : %@",SplitStringArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:58:03.020

```
NSMutableArray *SplitStringArray = [[NSMutableArray alloc]init]; 
[SplitStringArray setArray:[str1 componentsSeparatedByString:@","]]; 
```

# c++ - 将枚举类型用于用户界面功能是个好主意吗？

> ID：10719212
> 
> 赞同：0
> 
> 时间：2012-05-23T11:42:55.843
> 
> 标签：c++, c++11

假设我正在构建一个在屏幕上打印一些文本的简单类，并且它可以更改文本的颜色。

```
myclass a("this is the text");
a.setColor("green"); 
```

我仍在学习 C++，我最近被介绍`enum`并想尝试一下。`enum`我想知道在上面的接口函数中使用类型是否是一种好习惯`setColor`？

`enum`在接口函数中使用类有什么好处或坏处？是否存在它们比它们更适用的情况，是否存在它们不适合使用的情况？

如果我想组合属性怎么办？例如

```
a.setAttribute("bold reverse"); 
```

*我不知道*接口*是否是我想要描述的正确术语：我的班级的用户最终会使用的功能。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T11:45:01.553

在您的情况下，有（至少）两个优点：

*   无需在运行时解析字符串，效率更高。`switch`您可以直接在语句中使用枚举变量。
*   枚举（在某种程度上）是自记录的，代码的用户必须努力工作以提供无效值。

一个潜在的“缺点”是颜色字符串来自例如运行时用户输入的情况（他们已经键入文本框或其他内容）。您将需要解析此字符串并将其转换为枚举。但这并不是真正的劣势，因为无论如何您都需要这样做。最佳实践是让用户界面逻辑尽早验证字符串并转换为枚举。

> 如果我想组合属性怎么办？

我能想到至少三个选项：

*   多次调用`setAttribute`.
*   传递一组属性。
*   将每个枚举值定义为 2 的幂，然后您可以将枚举与`|`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T11:44:40.447

是的，`enum`在这种情况下使用 an 似乎比实际的字符串更好。

一个明显的优势 - 强大的打字。

如果`setColor`接受 a `char*`，就像你的情况一样，你可以这样做：

```
 a.setColor("horse"); 
```

您只能在运行时将其检测为错误。

如果`setColor`采用`eColors`as 参数：

```
 a.setColor(eGreen);
 a.setColor(eRed); 
```

会编译，但是

```
 a.setColor(eHorse); 
```

不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:58:00.197

在这种情况下，枚举肯定比字符串更明确。至于值的连接，您可以使用一些小技巧来完成这项工作。将您的枚举值设置为 2 的递增幂，然后您可以将它们组合在一起。

```
enum TextAttributes {
    Bold = 1,
    Italic = 2,
    Reverse = 4,
    StrikeThrough = 8,
    Underline = 16
};

TextAttributes attr = Bold | Reverse; 
```

# jquery - 我可以使用 getJSON 方法设置 twitter 标头吗？

> ID：10719217
> 
> 赞同：-1
> 
> 时间：2012-05-23T11:43:20.043
> 
> 标签：jquery, header, twitter, getjson

我正在使用 twitter api 访问`user_timeline`. 我正在使用`$.getJSON`它。

```
var url = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name='+username;
                var html = "<div class='feeds'>";
                $.getJSON ( url, function( data ){
                    for ( var i in data ){
                        html += "<div class='feed'>" + data[i].text + "</div>";
                    }

                    html += "</div>";
                    $('div.tfeed h2').replaceWith ( html );
                }); 
```

经过几次请求后，我开始收到错误消息`Rate limit exceeded. Clients may not make more than 150 requests per hour.`。后来我才知道，如果我使用 OAuth，那么这个限制会提高到稍高的水平（如果我错了，请纠正我），并且这个 OAuth 可以在 header 中传递。我有消费者密钥、消费者秘密、访问令牌、访问令牌秘密。但是我如何通过这些？

我需要使用 $.ajax 方法而不是 $.getJSON 吗？$.ajax 有一个设置`beforeSend`。但不知道如何使用它。

所以，

1.  我可以`getJSON`用于这个要求吗？
2.  如果没有，那么会`$.ajax`工作吗？如何？
3.  重要的是我应该在javascript中真正使用我的消费者密钥、秘密、访问令牌。我的意思是我可能是错的，但任何人都可以做`view-source`我的页面，并会很快得到这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:49:14.760

`$.getJSON`只是`$.ajax`dataType: 'json' 的简写。

我将在服务器端创建一个使用您的秘密内容的新服务，并让它通过您现在使用的 ajaxcall 接收不那么秘密的变量 -> 让它以 JSON 形式返回响应。希望你明白这个想法，否则会详细说明。

如何使用他们的 c# api 使用“秘密”变量的 c# 示例

```
OAuthTokens accessToken = new OAuthTokens();
accessToken.ConsumerKey = "XXXXXXXXXXXXXXXXXXXXXXXX";
accessToken.ConsumerSecret = "XXXXXXXXXXXXXXXXXXXXXXXXXX";
accessToken.AccessToken = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
accessToken.AccessTokenSecret = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"; 
```

您使用的是 ASP.NET 还是 PHP？

# drupal - 在 drupal-7 中使用 $_GET[...]

> ID：10719221
> 
> 赞同：2
> 
> 时间：2012-05-23T11:43:37.957
> 
> 标签：drupal, drupal-7

我找不到适合我的问题的标题。

我一直在尝试在我的 drupal 网站中加入一个漂亮的搜索栏（http://loopj.com/jquery-tokeninput）。为此，我需要创建一个 php 回调函数，应该类似于：www.mysite.com/search/callback?q=var1。

这是一个先决条件，否则我不能这样做。但是，在 drupal 中，您将 Url 设置为类似于 www.mysite.com/search/callback/var1。

有没有办法在 Drupal 中实现第一个？

谢谢 ：-）

EDIT-1：我已经做的是：

```
$items['search/callback'] = array(
      'title'             => 'Search for String',
      'description'       => 'callback function for search bar',
      'page callback'     => 'search_callback',
      'access callback'   => TRUE,
      'type'              => MENU_CALLBACK,
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:19:23.780

我可以建议您在这里探索 jQuery UI 自动完成分类术语的完整示例：http: [//xandeadx.ru/blog/drupal/526](http://xandeadx.ru/blog/drupal/526)。它最初是用俄语编写的，但您可以轻松阅读代码清单并下载[打包项目](http://xandeadx.ru/sites/default/files/files/jqueryui_autocomplete.rar)。我认为您可以使用相同的模块思想。
一些注意事项：

1.  您不能将`q`get param 用于您的目的，因为 Drupal 在内部使用它。在 jQuery Tokeninput 中，您可以使用`queryParam`选项设置另一个参数名称。
2.  我建议使用[check_plain()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/check_plain/7)`$_GET`检查任何参数。

# c# - 在 C# 客户端应用程序中使用 Kerberos-ticket

> ID：10719224
> 
> 赞同：2
> 
> 时间：2012-05-23T11:43:57.497
> 
> 标签：c#, webclient, kerberos, single-sign-on

我有一个使用 Windows 凭据自动登录的网络应用程序。我现在想使用我的 Windows 帐户在 ac# windows 应用程序中使用来自此 Web 应用程序的信息。因此，我需要能够从该网站获取会话 cookie。在这里你可以看到我的一段代码，我想在其中检索 cookie：

```
 string URLAuth = extractParameterFromProperties("relatieBeheer_login_url");
        WebClient webClient = new WebClient();
        webClient.Credentials = CredentialCache.DefaultCredentials;
       // webClient.UseDefaultCredentials = true;

        byte[] responseBytes = webClient.DownloadData(URLAuth);
        //byte[] responseBytes = webClient.UploadValues(URLAuth, "POST", formData);
        string resultAuthTicket = Encoding.UTF8.GetString(responseBytes);
        if(resultAuthTicket.Contains("Verkeerde combinatie gebruikersnaam")){
            sessionCookie="NoSession";
        }else{
                WebHeaderCollection cookies = webClient.ResponseHeaders;
                sessionCookie = cookies[HttpResponseHeader.SetCookie];
        } 
```

当我调试应用程序时，我看不到凭据中没有填写任何内容：域、用户名和密码为空。

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:57:43.160

DefaultCredentials 返回的 ICredentials 实例不能用于查看当前安全上下文的用户名、密码或域。

[http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials.aspx](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials.aspx)

# regex - 我的 htaccess 中的 RegEx 无法按预期工作

> ID：10719225
> 
> 赞同：0
> 
> 时间：2012-05-23T11:43:58.987
> 
> 标签：regex, .htaccess, mod-rewrite, redirect

几天前，我的虚拟主机更新了 apache。此后出现错误代码 500。现在的问题是，根据 htaccess 语法，apache 似乎更加严格。错误已修复，但我的重定向无法按预期工作。

我的 htaccess 的内容：

```
RewriteEngine on
RewriteBase / 

RewriteCond %{http_host} ^(www\.)?domain\.de$ [NC]
RewriteRule ^(.*)$ http://www.domain.de/DE/ [L,R=301] 
```

描述：我想将 www.domain.de 和 domain.de 重定向到[http://www.domain.de/DE/](http://www.domain.de/DE/)。

问题：

```
(www\.) 
```

对于这部分，重定向根本不起作用。如果我删除它，它只适用于 domain.de 而不是 www.domain.de。

我的 htacces 有什么错误吗？我找不到任何东西。我用谷歌搜索了很多次，并多次找到了这个解决方案。到目前为止，我在这个问题上花了很多时间，但我没有取得任何进展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:31:13.373

这很可能是区分大小写的问题 - 变量实际上是`%{HTTP_HOST}`，而不是`%{http_host}`（请参阅[RewriteCond 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)）

此外，我很惊讶您没有获得无限重定向循环，因为 www.domain.de/DE/ 将匹配 RewriteCond 和 RewriteRule。

# jsf-2 - ui:repeat JSF 2.0 无法呈现迭代 p:row primefaces

> ID：10719233
> 
> 赞同：3
> 
> 时间：2012-05-23T11:44:39.087
> 
> 标签：jsf-2, primefaces

我在这里遇到了一个问题，我的系统配置是 Mojarra 2.1.7、Primefaces 3.2 并使用 Glassfish 3.1+。

在此之前，我使用以下代码很好地呈现了我的代码：

```
<p:tabView>
    <p:tab title="Offices Access" >
         <h:outputText value="Access | Offices Name | Offices Code | Parent Offices" style="font-weight: bold;"/>

         <ui:repeat value="#{userBean.officeses}" var="office">
              <h:panelGrid columns="2">
                   <p:selectBooleanCheckbox id="access#{office.officesID}" style="width: 50px;"/>
                   <h:outputLabel for="access#{office.officesID}" value="#{office.officesName} | #{office.officesCode} | #{office.parentOffices}"/>
               </h:panelGrid>
         </ui:repeat>
     </p:tab>
</p:tabView> 
```

我发现这是生成相当丑陋的界面，所以我`p:panelGrid`从 primefaces 跑过来。
在我编写了一些代码并且按照我的预期它会工作之后，它不会:(
此代码完美地呈现标题，但在`ui:repeat`代码之后，它不会呈现其中的`p:row`和`p:column`内部。

这是代码：

```
<p:tabView>
    <p:tab title="Offices Access" >
        <p:panelGrid styleClass="centerContent">
             <f:facet name="header">
                 <p:row>
                     <p:column style="font-weight: bold;">Access</p:column>
                     <p:column style="font-weight: bold;">Offices Name</p:column>
                     <p:column style="font-weight: bold;">Offices Code</p:column>
                     <p:column style="font-weight: bold;">Above Level Offices</p:column>
                 </p:row>
            </f:facet>

            <ui:repeat value="#{userBean.officeses}" var="office">
                <p:row id="rowforOffice#{office.officesID}">
                    <p:column><p:selectBooleanCheckbox id="access#{office.officesID}"/></p:column>
                    <p:column><h:outputText value="#{office.officesName}"/></p:column>
                    <p:column><h:outputText value="#{office.officesCode}"/></p:column>
                    <p:column><h:outputText value="#{office.parentOffices}"/></p:column>
                </p:row>
            </ui:repeat>
       </p:panelGrid>
    </p:tab>
</p:tabView> 
```

我想念什么吗..？
或者这是一个错误..？因为我跑过谷歌寻找这种代码，但我什么也没找到。
问候，
bLueZ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:28:17.360

至于具体问题，`<ui:repeat>`是视图渲染时间标签。因此，它实际存在于 JSF 组件树中，并根据需要迭代该值多次生成其 HTML 输出。

但是，`<p:panelGrid>`期望物理上的多个`<p:row>`或`<p:column>`孩子，而不是`<ui:repeat>`其中一个单一的`<p:row>`。换句话说，它们需要在视图构建期间而不是视图渲染期间进行准备。

JSTL`<c:forEach>`是一个视图构建时间标记。它将在物理上生成多个`<p:row>`组件到 JSF 组件树中，因此`<p:panelGrid>`只会找到`<p:row>`子组件。

```
<p:panelGrid styleClass="centerContent">
    <c:forEach items="#{userBean.officeses}" var="office">
        <p:row id="rowforOffice#{office.officesID}">
            <p:column><p:selectBooleanCheckbox id="access#{office.officesID}"/></p:column>
            <p:column><h:outputText value="#{office.officesName}"/></p:column>
            <p:column><h:outputText value="#{office.officesCode}"/></p:column>
            <p:column><h:outputText value="#{office.parentOffices}"/></p:column>
        </p:row>
    </c:forEach>
</p:panelGrid> 
```

注意：这会破坏早于 2.1.18 的 Mojarra 版本中的视图范围 bean。如果您无法升级，请考虑`<p:dataTable>`改为，因为您已经发现自己。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:40:08.100

感谢@Jedrus07 建议我发布答案。

实际上，我所做的是`<p:dataTable/>`用来很好地显示数据。例子 ：

```
<p:tabView id="tabCustomerView">
    <p:tab title="Fasilitas Nasabah">
                <p:fieldset legend="Detil Fasilitas">
                    <p:dataTable value="#{custViewBean.customerSavingAccounts}"
                                 var="customerSavingAccount"
                                 rowIndexVar="customerSavingAccountRowIndex"
                                 paginator="true"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rows="10"
                                 rowsPerPageTemplate="5,10,15"
                                 paginatorPosition="top">
                        <f:facet name="header">
                            <h:outputText value="Daftar Rekening / Fasilitas Nasabah"/>
                        </f:facet>

                        <p:column headerText="#">
                            <h:outputText value="#{customerSavingAccountRowIndex + 1}"/>
                        </p:column>

                        <p:column headerText="Fasilitas Nasabah">
                            <h:outputText value="#{of:capitalize(customerSavingAccount.customerFacility)}"/>
                        </p:column>

                        <p:column headerText="Saldo Akhir">
                            <h:outputText value="#{customerSavingAccount.lastBalance}">
                                <f:convertNumber type="currency" currencySymbol="#{appBean.appSetting.curDefault.currencySymbol}"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Tanggal Akhir">
                            <h:outputText value="#{customerSavingAccount.lastTransactiondate}">
                                <f:convertDateTime pattern="#{appBean.appSetting.siteFormatdate}"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Suku Bunga">
                            <h:outputText value="#{customerSavingAccount.interest} %"/>
                        </p:column>

                        <p:column headerText="Kolektibilitas">
                            <h:outputText value="#{customerSavingAccount.collectibility}"/>
                        </p:column>

                        <p:column headerText="Account Officer">
                            <h:outputText value="#{of:capitalize(customerSavingAccount.accountOfficer)}"/>
                        </p:column>

                        <p:column headerText="Jumlah Tunggakan">
                            <h:outputText value="#{customerSavingAccount.arrearsAmount}">
                                <f:convertNumber type="currency" currencySymbol="#{appBean.appSetting.curDefault.currencySymbol}"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Jumlah Pembayaran">
                            <h:outputText value="#{customerSavingAccount.totalPayment}">
                                <f:convertNumber type="currency" currencySymbol="#{appBean.appSetting.curDefault.currencySymbol}"/>
                            </h:outputText>
                        </p:column>

                        <p:column headerText="Periode Pembayaran">
                            <h:outputText value="#{customerSavingAccount.termLimit} #{customerSavingAccount.termLimitDesc}"/>
                        </p:column>

                        <p:column headerText="Status">
                            <h:outputText value="#{customerSavingAccount.status}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </p:tab>
</p:tabView> 
```

因此，使用 datatable 来获得更好的外观来显示您的数据 :) 玩得开心。

# mysql - 来自带有 CONCAT 的两个表的 MYSQL 请求

> ID：10719235
> 
> 赞同：1
> 
> 时间：2012-05-23T11:44:41.943
> 
> 标签：mysql, sql, request, database-table

也许你可以帮助我：

如果有一个表1：帐户

```
user_id   account_id   
39        3799207
39        80286966
40        3789458 
```

...

表 2：订阅者

```
id   client_id  master_id   master_account_id   active 
1    43         39          3799207             1
2    43         39          80286966            1
3    44         39          80286966            1
4    45         39          80286966            1 
```

...

使用此请求：

```
'SELECT account_id FROM accounts WHERE user_id = "39"'; 
```

我可以得到这张表：

```
Account
3799207
80286966 
```

我怎样才能得到这张桌子：

```
Account      Subscribers     Count
3799207      43              1
80286966     43,44,45...     3 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:48:04.270

试试这个：

```
SELECT a.account_id Account, 
      GROUP_CONCAT(b.client_id) Subscribers,
      COUNT(b.client_id) `Count`
FROM accounts a INNER JOIN subscribers b
    on a.account_id = b.master_account_id
WHERE b.master_id = '39'
GROUP BY a.account_id 
```

`MySQl`并具有将列连接成行`SQLite`的内置函数。`GROUP_CONCAT`

高温高压

# objective-c - 我应该如何为 Mac App 存储两个字符串？

> ID：10719237
> 
> 赞同：0
> 
> 时间：2012-05-23T11:44:50.793
> 
> 标签：objective-c, macos

我正在制作一个网络应用程序，它需要存储用户的电子邮件和网络服务密码，然后连接到该服务。而不是他们每次都必须输入这个，我希望它在应用程序关闭时保存。

我该怎么做？我是否只需要对两个字符串使用核心数据或 SQLite，还是有另一种更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:04:22.937

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:42:56.070

创建一个 nsobject 全局类----

全球.h

```
#import <Foundation/Foundation.h>
@interface Global : NSObject 
extern NSString *gStrEmail;
extern NSString *gStrPassword; 
```

@结尾

环球网

```
#import "Global.h"

@implementation Global
NSString *gStrEmail=@"";
NSString *gStrPassword=@"";
@end 
```

将此类导入 App_Prefix.pch

```
 #import "Global.h" 
```

登录视图控制器.m

```
 gStrEmail=txtEmail.text;
 gStrPassword==txtEmail.text; 
```

并在任何地方使用电子邮件和密码字符串

# .net - 如何创建存根，在 Rhino 模拟中的所有调用中引发异常？

> ID：10719243
> 
> 赞同：1
> 
> 时间：2012-05-23T11:45:03.140
> 
> 标签：.net, unit-testing, rhino-mocks, stub

Rhino Mocks 是否可以创建一个存根，为所有调用抛出异常？

```
public interface IMyIF
{
    // Some methods
}

[TestClass]
public class MyTestClass
{
    [TestMethod()]
    public void MyTest()
    {
        MockRepository mocks = new MockRepository();
        IMyIF stb = mocks.Stub<IMyIF>();

        // Somehow set stb to throw some exception on every method call
        // without knowing all the methods and overloads in IMyIF interface

        // use stb to test something
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:49:37.697

```
var stb = MockRepository.GenerateStrictMock<IMyIF>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T15:28:01.457

很奇怪的要求。你想测试什么？如果您正在测试该`Bar`接口的方法在`IFoo`您的测试类调用时抛出一些异常，那么只需在方法 Bar 上设置此期望。不要一次测试所有方法。

这将使您的测试集中在 sut 和依赖项之间的一种特定交互上（我会这样做）：

```
var mock = MockRepository.GenerateMock<IMyIF>();
mock.Expect(m => m.Foo()).Throw(new MyCustomException());
sut.Exercise(mock); 
```

这将抛出 ExpectationViolationException：

```
var mock = MockRepository.GenerateStrictMock<IMyIF>();
sut.Exercise(mock); 
```

这将抛出 NullreferenceException：

```
sut.Exercise(null); 
```

您也可以创建`MyIFStub`继承自`IMyIF`. 右键单击接口名称并选择*实现接口*。Visual Studio 将生成接口的子成员，这将引发 NotImplementedException。如果需要，您可以更改存根实现：

```
public class MyIFStub : IMyIF
{    
    public void Foo()
    {
       throw new NotImplementedException();
    }

    // other members
} 
```

# php - 虚荣 URLS 和 Xampp

> ID：10719247
> 
> 赞同：0
> 
> 时间：2012-05-23T11:45:42.347
> 
> 标签：php, .htaccess, url

我知道可能还有其他关于虚 url 的问题，但我看到的每个人都有不同的代码，我猜它们做同样的工作。因此，我不明白什么规则最适合我的个人问题，这里所说的是我的问题。

我只是想创造这个，

127.0.0.1/website/profile.php?id=1

对此，

127.0.0.1/website/profile/Admin

我的子问题也是，

1.  我知道 .htaccess 文件必须在根目录中，但这是我网站的根目录还是我的 xampp htdocs？（例如 c:/xampp/htdocs/ 或 c:/xampp/htdocs/website）
2.  使用 php 我应该在单独的文件中将 URL 的 id 转换为用户名，然后重定向到请求的用户页面吗？

感谢您的阅读，我似乎无法理解 .htaccess！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:02:02.270

1.  您网站的根目录。
2.  无需重定向。它的工作方式是您可以将 URL 的每个部分映射到 URL 参数。例如，`http://localhost/profile/Admin`真的被解释为`http://localhost/website/profile.php?username=Admin`. 只有用户会看到虚 URL；PHP 仍然会看到 URL 参数。在您的情况下， .htaccess 规则看起来像`^profile/([0-9]+)$ profile.php?username=$1`（我显然不确定，因为我不知道您网站的架构）。

* * *

在旁注中，您可能会发现虚拟主机很有趣。这是一种能够为您的站点创建自己的本地域的方式，例如，`http://my-local-website`而不是在生产中使用`http://localhost/website`或等待测试。

更多信息在这里：[http ://sawmac.com/xampp/virtualhosts/](http://sawmac.com/xampp/virtualhosts/)

# html - Flash 问题 index.html

> ID：10719252
> 
> 赞同：1
> 
> 时间：2012-05-23T11:46:07.707
> 
> 标签：html, flash

我对 Flash 知之甚少，但我的新闻网站是用它写的，但没有工作，我被要求看一看。问题是登录页面已损坏，因此不允许您通过它，但这就是大多数网站所在的位置（我的计划是创建该网站的 HTML 副本）我看到的唯一 html 页面是 index.html 和在页面上单击链接时，顶部的地址栏仍保留在 index.html 上，有谁知道我如何进入 Flash 站点（我有这个离线），所以我可以编辑登录页面并复制代码/信息。

谢谢你的时间罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:59:40.160

没有任何代码很难判断出什么问题，您愿意与我们分享源代码吗？

此外，一些交互会有所帮助。很难弥补你在这里想说的话，因为每一件事都是一个大句子。

# mysql - SQL-Mysql 长度不同

> ID：10719254
> 
> 赞同：0
> 
> 时间：2012-05-23T11:46:11.803
> 
> 标签：mysql, sql-server-2008

大家好，我有一个关于`Sql Server(Len)`和的问题`Mysql(Length)`

我在`Sql Server`&中编写了一个示例脚本，`Mysql`如下所示

```
Sql ---->select len('Experts ') 

Result ---->7

MySql ---->select Length('Experts ')

Result ---->8 
```

现在我只是对查询进行了如下更改

```
Sql ---->select len(' Experts') 

Result ---->8

MySql ---->select Length(' Experts')

Result ---->8 
```

但是为什么它在我的第一个查询中显示不同的结果..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:50:44.493

SQL Server`LEN`函数不包括尾随空格，如文档中所示：http: [//msdn.microsoft.com/en-us/library/ms190329.aspx](http://msdn.microsoft.com/en-us/library/ms190329.aspx)。

如果您想要包含空格的长度，请尝试`LEN(<source> + 'x') - 1`在哪里`<source>`尝试获取长度。

# c# - networkStream.Read 被阻塞

> ID：10719256
> 
> 赞同：3
> 
> 时间：2012-05-23T11:46:19.853
> 
> 标签：c#

我正在编写一个简单的应用程序，它将与服务器连接。但是我也想发送简单的聊天命令（见`Console.ReadLine`下文）。但是，此脚本无法访问， `string Message = Console.ReadLine();`因为它在`bytesRead = clientStream.Read(message, 0, 4096);`.

我想继续这个脚本，但是如果有字节传入，它应该处理它们（就像它现在正在做的那样），如果没有字节传入，它应该通过脚本并等待用户输入）。如何做到这一点？

```
 TcpClient tcpClient = (TcpClient)client;
        NetworkStream clientStream = tcpClient.GetStream();

        byte[] message = new byte[4096];
        int bytesRead;

        while (true)
        {
            bytesRead = 0;

            try
            {
                // Blocks until a client sends a message                    
                bytesRead = clientStream.Read(message, 0, 4096);
            }
            catch (Exception)
            {
                // A socket error has occured
                break;
            }

            if (bytesRead == 0)
            {
                // The client has disconnected from the server
                break;
            }

            // Message has successfully been received
            ASCIIEncoding encoder = new ASCIIEncoding();

            // Output message
            Console.WriteLine("To: " + tcpClient.Client.LocalEndPoint);
            Console.WriteLine("From: " + tcpClient.Client.RemoteEndPoint);
            Console.WriteLine(encoder.GetString(message, 0, bytesRead));

            // Return message
            string Message = Console.ReadLine();
            if (Message != null)
            {
                byte[] buffer = encoder.GetBytes(Message);
                clientStream.Write(buffer, 0, buffer.Length);
                clientStream.Flush();
            } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T11:56:44.547

您可以尝试使用[DataAvailable](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable.aspx)属性。它会告诉你套接字上是否有任何东西在等待。如果它是假的，请不要`Read`拨打电话。

# json - 如何连接网络服务

> ID：10719260
> 
> 赞同：1
> 
> 时间：2012-05-23T11:46:37.533
> 
> 标签：json, web-services, jquery

我正在尝试从 Web 服务获取一些数据：

```
$.ajax({
    type: 'POST',
    url: "http://192.******.asmx?op=GetJSONString",
    method: "serverCallback",
    data: "Select con.cod as codigo, con.res as descripcion from con where ide>0",
    success: function(data){alert(data)},    
}); 
```

如何获取返回的 JSON 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:43:39.407

我还将发布对我有用的 asmx 服务。

在下面的示例中，对于“url”：“/service/Details.asmx/Reject”，“/Reject”是 Web 服务 (asmx) 文件中的方法名称。

```
 $.ajax({
            "dataType": 'json',
            "contentType": "application/json; charset=utf-8",
            "type": "POST",
            "url": "/service/Details.asmx/Reject",
            "data": "{\"itemId\":\"" + id + "\",\"comment\":\"" + comms + "\"}",
            "success":
                        function (msg) {
                          alert("Yea it worked!");
                            });
                        }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:20:28.377

这是我的电话的样子。您能更具体地说明您遇到的问题吗？

```
$.ajax({
    type: "POST", 
    data: "SOME DATA",      
    dataType: "json",
    url : "/myapp/service.json",
    cache: false,
    error: function() {     
                         alert("There was an issue");
        }
    ,
    success: function(data) 
    {                   
            processJson(data); 
    }
}); 
```

# java - 身份验证 Oauth 2.0 Google 日历

> ID：10719262
> 
> 赞同：1
> 
> 时间：2012-05-23T11:46:52.333
> 
> 标签：java, api, oauth

当我尝试使用我的谷歌帐户进行身份验证以从我的谷歌日历中插入/获取事件时遇到问题

我使用这个代码：

```
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.calendar.Calendar;
import com.google.api.services.calendar.Calendar.Calendars;
import com.google.api.services.calendar.Calendar.Calendars.Insert;
import com.google.api.client.auth.oauth2.draft10.AccessProtectedResource.Method;
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessTokenRequest.GoogleAuthorizationCodeGrant;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAccessProtectedResource;
import com.google.api.client.googleapis.auth.oauth2.draft10.GoogleAuthorizationRequestUrl;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

@SuppressWarnings({ "deprecation", "unused" })
public class connect{

        //connessione Google for unauthorized user for a limited usage
                /*JsonHttpRequestInitializer initializer = new GoogleKeyInitializer("AIzaSyCuWqLpR9G4QhfJ1QMbqh3pa0vul6sd8yQ");
                Plus plus = Plus.builder(new NetHttpTransport(), new JacksonFactory(), new GenericUrl())
                    .setApplicationName("Progetto SITI")
                    .setJsonHttpRequestInitializer(initializer)
                    .build();*/
    public void setUp() throws IOException {
        HttpTransport httpTransport = new NetHttpTransport();
        JacksonFactory jsonFactory = new JacksonFactory();

        // The clientId and clientSecret are copied from the API Access tab on
        // the Google APIs Console
        String clientId = "MYCLIENTID";
        String clientSecret = " MYSECRETID ";

        // Or your redirect URL for web based applications.
        String redirectUrl = "https://www.googleapis.com/calendar/v3/calendars/{calendarID}";
        String scope = "https://www.googleapis.com/auth/calendar";

        // Step 1: Authorization-->
        String authorizationUrl = new GoogleAuthorizationRequestUrl(clientId, redirectUrl, scope)
            .build();

        // Point or redirect your user to the authorizationUrl.
        System.out.println("Navigate the link on your browser:");
        System.out.println(authorizationUrl);

        // Read the authorization code from the standard input stream.
        System.out.println("What's your authorization code?");
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String code = in.readLine();
        // EndStep 1 <--

        // Step 2: Change-->
        AccessTokenResponse authResponse = new GoogleAuthorizationCodeGrant(httpTransport, jsonFactory,
                clientId, clientSecret, code, redirectUrl).execute();
        System.out.println("Token d'accesso: "+authResponse.accessToken);
        if(scope == "https://www.googleapis.com/auth/calendar")
        System.out.println("Scope di lettura e scrittura usato :"+scope);
        else
            System.out.println("Scope di sola lettura usato :"+scope);
        // End Step 2 <--

        GoogleAccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(
                authResponse.accessToken, httpTransport, jsonFactory, clientId, clientSecret,
                authResponse.refreshToken);
        System.out.println("Client ID: "+accessProtectedResource.getClientId());
        System.out.println("Secret ID: "+accessProtectedResource.getClientSecret());
        System.out.println("Authentication Url: "+accessProtectedResource.getAuthorizationServerUrl());

        Calendar prova = new Calendar(httpTransport, jsonFactory);
        Calendar cale = new Calendar(httpTransport, jsonFactory);
        com.google.api.services.calendar.model.Calendar cal = new com.google.api.services.calendar.model.Calendar();
        cal.setSummary("My test Calendar");
        cal.setDescription("This calendar was created with the API v3.");
        cal.setTimeZone("Europe/Amsterdam");
        cal.setLocation("Amsterdam");
        cal.setId("4");
        String summary = cal.getSummary();
        System.out.println(summary);
        prova.calendars().insert(cal);
        prova.calendars().delete("Caldario prova");
        //Calendar calendarService = null;
        //Calendars calendarList = cale.calendars();
        //Insert insert = calendarList.insert(cal);
        //cal = insert.execute();
        System.out.println("Job Done");
      }
} 
```

我不知道为什么每次运行此代码时，我的浏览器都会向我报告此响应：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

当我将链接复制到浏览器时，我接受了我的项目的授权，但是在出现错误之后

有人可以帮助我吗？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T00:20:04.033

如果您尝试仅将其用作命令行示例，则需要更改：

```
String redirectUrl =  "https://www.googleapis.com/calendar/v3/calendars/{calendarID}"; 
```

至

```
String redirectUrl = "urn:ietf:wg:oauth:2.0:oob"; 
```

这表明您正在使用[OAuth 2.0 安装应用程序](https://developers.google.com/accounts/docs/OAuth2InstalledApp)（带外）。Google 会在您的浏览器中为您提供授权码，您可以将其复制/粘贴到您的应用程序中。

# javascript - 在模板-nodejs 中链接 url

> ID：10719264
> 
> 赞同：1
> 
> 时间：2012-05-23T11:47:03.740
> 
> 标签：javascript, node.js, hyperlink

认为我的问题从标题本身就很清楚了。在 ejs 模板中呈现时，如何将 url 字符串与 href 属性链接？此任务是否存在任何助手？我想将 url 连同它们的 href 属性一起转换为字符串，然后将它们发送到模板，但我想它们会在渲染时被转义。

即使我使用 ejs 进行视图..如果其他人有这个链接工具，我想更改模板引擎。

更新：

假设这是渲染函数

```
return res.render("polo", {
                    title: "Posters",
                    has_next:false,
                    posters:posters,
                    offset:0
                }); 
```

这是视图

```
<% for (var i=0;i<posters.length;i++) { %>

                <div id="<%=posters[i]._id %>" class="newstitle">

                <p>
                <%=posters[i].body %>
            </p>
            </div>

<% }; %> 
```

现在，如果 posters[1].body="Hello this is a good site. www.google.com" 。类似地，海报数组中的每个其他元素都是一些包含一些 url 的文本。当 posters[i].body 被渲染时，我希望上面示例中的“google.com”之类的 URL 被链接。我不能使用 <%= url %> 因为我不知道 url 在 poster.body 中的确切位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:09:38.153

如果你想输出到一个 href 属性而不转义，那么，你可以使用`<a href="<%- yourvar %>">the link.</a>`它，它不会转义。

（注意，使用连字符而不是等号。）

**编辑**

OP 询问如何仅在定义 url 时显示链接。

```
<% if (typeof yourvar != 'undefined' && yourvar !== null) { %>
  <a href="<%- yourvar %>">the link</a>
<% } %> 
```

# c++ - 在 Visual Studio 2010 中编译 IDL 文件时无法生成必要的文件

> ID：10719266
> 
> 赞同：1
> 
> 时间：2012-05-23T11:47:21.197
> 
> 标签：c++, visual-studio, com, compilation, idl

我正在通过互联网教程学习 COM（http://www.codeguru.com/cpp/com-tech/activex/tutorials/article.php/c5567/Step-by-Step-COM-Tutorial.htm）。首先是创建一个 IDL 文件并编译它以创建另外 5 个文件。详情如下：

1.  打开VS2010
2.  创建 Win32 DLL 项目名称 AddObj
3.  添加包含内容的 IAdd.idl 文件

    > 导入“unknwn.idl”；
    > 
    > [ object, uuid(1221db62-f3d8-11d4-825d-00104b3646c0), helpstring("接口IAdd用于实现超快加法算法") ]
    > 
    > 接口 IAdd : IUnknown { HRESULT SetFirstNumber(long nX1);
    > 
    > HRESULT SetSecondNumber(long nX2); HRESULT DoTheAddition([out,retval] long *pBuffer); };
    > 
    > [ uuid(3ff1aab8-f3d8-11d4-825d-00104b3646c0), helpstring("Code Guru 算法实现接口。") ] 库 CodeGuruMathLib { importlib("stdole32.tlb"); importlib("stdole2.tlb");
    > 
    > 接口 IAdd；}

之后，按照教程，如果我编译 IAdd.idl 文件，它将生成：

--IAdd.h 包含 C++ 风格的接口声明。

--dlldata.c 包含代理 DLL 的代码。在不同的进程/计算机上调用对象时很有用。

--IAdd.tlb 二进制文件，具有良好定义的格式，完全描述了我们的接口 IAdd 以及它的所有方法。该文件将分发给我们 COM 组件的所有客户端。

--IAdd_p.c 包含代理 DLL 的编组代码。在不同的进程/计算机上调用对象时很有用。

--IAdd_i.c 包含接口 IID

但是当我通过右键单击它并在快捷菜单中选择编译来编译 IAdd 时，没有生成文件。但是当打开视图类时，我可以看到带有某种方法的 IAdd 接口。

我也尝试通过从互联网下载 midl.exe 并在命令行中运行手动编译它，但它失败了。

我对谷歌的很多材料都很好，所有人都说我可以通过 Visual Studio 编译 idl 文件，但我尝试了很多次，在我的两台计算机上但在我编译 idl 文件后没有生成文件。我还安装了新的 Win7，新的 Visual Studio 2010 Ultimate，但没有任何变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:24:44.187

我刚刚创建了一个新项目并使用您指定的代码创建了一个新的 idl 文件。如果我右键单击并选择编译它就可以正常工作（VS2010 Ultimate）。
您是否在 VS 的文件属性中选择了正确的文件类型？它应该是“IDL 文件”。

您是否在尝试手动编译时使用过 VS 命令提示符？
（VS 命令提示符将设置所有必要的环境变量）

# ios - 使自定义键盘不可移动

> ID：10719270
> 
> 赞同：3
> 
> 时间：2012-05-23T11:47:28.837
> 
> 标签：ios, ipad, keyboard, xamarin.ios, inputview

我们为 iPad 创建了一个自定义数字小键盘。在我们的测试人员 iPad 上，这个键盘突然被移出了适当的位置，我们花了很长时间才发现可以通过在“键盘按钮”通常所在的位置开始拖动来移动那个自定义键盘。

客户将很难将其移回以防万一他们不小心移动了它。由于在特定输入屏幕上移动键盘没有任何意义，我宁愿阻止键盘移动，而不是绘制某种手柄，让用户可以看到键盘可以移动。（这是一个特殊的输入屏幕，仅用于编辑单个数值。键盘就像布局的一部分，在此屏幕上始终可见。）

我努力尝试，但找不到阻止键盘在这个特定位置拖动时移动的方法。甚至我所有的肮脏想法，例如删除可能预先存在的 GestureRecognizers（没有）或将我自己的按钮放在前面也无济于事。

编辑：键盘甚至可以在我能想到的用 Monotouch 编写的最简单的自定义键盘应用程序中移动。我错过了什么吗？

```
using System;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace KeyboardTest
{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        private UIWindow window;
        private UIViewController viewController;
        private UIViewController keyboardViewController;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            // Create a red dummy keyboard
            keyboardViewController = new UIViewController();
            keyboardViewController.View.BackgroundColor = UIColor.Red;

            // Create a textfield and assign our beautiful red keyboard as its InputView
            UITextField textField = new UITextField();
            textField.BorderStyle = UITextBorderStyle.RoundedRect;
            textField.Frame = new System.Drawing.RectangleF(44, 44, 200, 44);
            textField.InputView = keyboardViewController.View;

            // create a rootview controller and add our textfield
            viewController = new UIViewController();
            viewController.View.AddSubview(textField);

            window.RootViewController = viewController;
            window.MakeKeyAndVisible ();

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:53:16.013

对于您的解释，我猜您将键盘作为主视图的子视图。相反，我会将其设置为 UItextFields 的 inputView，然后让您的第一个 textFields 成为 viewDidLoad 上的第一个响应者。就像是：

```
-(void)viewDidLoad{

[super viewDidLoad];

CustomkeyPad *keypad=[[CustomKeyPad alloc]init];  // initWithFrame would probably be better

self.textField.delegate=self;
self.textField.inputView=keypad;
[self.textField becomeFirstResponder];

} 
```

我不在我的 Mac 中，所以我可能在这里犯了一些错误，但这就是我的想法，这就是我在制作自定义键盘时的做法，而且它对于两种风景都是通用的（iPad 和 iPhone）和肖像模式，到目前为止它没有给我带来任何问题。

# c++ - 使用 std::list 的编译器错误

> ID：10719271
> 
> 赞同：1
> 
> 时间：2012-05-23T11:47:30.180
> 
> 标签：c++, templates

我有这个简单的函数来检查一个值是否在列表中：

```
template <class T>
bool IsinList(list<T> l, T x)
{
    for(list<T>::iterator it=list.begin(); it != list.end(); it++)
    {
        if (*it == x)
            return true;
    }
    return false;
} 
```

我在同一个 .cpp 文件中使用了该函数，如下所示：

```
if (!IsinList (words, temp))   
    goodwords.push_back(temp); 
```

但我收到此错误：

```
'std::list' : use of class template requires template argument list 
```

我无法弄清楚问题是什么。我检查了以前提出的问题，但没有帮助。你能向我解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:48:21.350

那里的错字：

```
list.begin() / list.end() 
```

应该

```
l.begin() / l.end() 
```

您的变量被称为`l`，而不是`list`。

编辑：

正如马蒂尼奥所指出的，这可能还不够。一些编译器会接受这个，但由于迭代器依赖于模板参数，你可能需要一个类型名：

```
typename list<T>::iterator it=list.begin() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:03:46.543

您打错字（`list`vs. `l`）并且没有指定那`list<T>::iterator`是`typename`. 此外，您应该通过`list`reference-to-const 传递和 search 参数。总而言之，它应该是这样的：

```
template <class T>
bool IsinList(const list<T>& l, const T& x)
{
    typename list<T>::const_iterator first = l.begin(), last = l.end();
    for(; first != last; ++first)
    {
        if (*it == x)
            return true;
    }
    return false;
} 
```

就是说，还是不要用这个。[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)改用更好

```
if (std::find(words.begin(), words.end(), temp)==words.end())
{
  goodwords.push_back(temp);
} 
```

# asp.net - 从 DisplayFor 中删除 mailto 锚点

> ID：10719274
> 
> 赞同：6
> 
> 时间：2012-05-23T11:47:48.540
> 
> 标签：asp.net, .net, asp.net-mvc

我有以下模型属性：

```
[DataType(DataType.EmailAddress)]
public string EmailAddress { get; set; } 
```

当我使用显示器时：

```
@Html.DisplayFor(modelItem => item.EmailAddress) 
```

它在文本中添加了一个“mailto”锚点。无论如何我可以指定它不包括这个吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T12:18:16.093

您可以使用以下方法之一。

```
 @Model.EmailAddress 
```

或者

```
 @Html.DisplayTextFor(model => model.EmailAddress) 
```

# android - 如何在布局中居中查看

> ID：10719276
> 
> 赞同：2
> 
> 时间：2012-05-23T11:47:57.840
> 
> 标签：android, android-layout, android-linearlayout, layout-gravity

我必须建立如下图所示的布局。主要任务是使文本居中。

![在此处输入图像描述](../Images/4077d99f977114a5d998772582af0e71.png)

我使用这个 xml 来实现布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/ll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/author"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/author">
    </LinearLayout>

    <LinearLayout
        android:id="@+id/footer_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="bottom"
        android:orientation="vertical" 
        android:layout_alignParentBottom="true">

        <LinearLayout
            android:id="@+id/menu_layout"
            android:layout_width="fill_parent"
            android:layout_height="60dp"
            android:background="@drawable/nav_overlay"
            android:gravity="center_horizontal"
            android:orientation="horizontal">

            <Button
                android:id="@+id/previous"
                android:layout_width="45dp"
                android:layout_height="45dp"
                android:background="@drawable/button" />

        </LinearLayout>

        <com.google.ads.AdView
            xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="@string/admob_id"
            ads:loadAdOnCreate="true" />
    </LinearLayout>

</RelativeLayout> 
```

但它工作不正确。
我需要`TextView` `android:id="@+id/author"`居中`LinearLayout` `android:id="@+id/ll"`。但它以 parent 为中心`RelativeLayout` `android:id="@+id/main_layout"`。
我`android:layout_height="fill_parent"`用于`LinearLayout` `android:id="@+id/ll"`.
我的布局如何不填充父级而只填充剩余空间？
如果有人遇到类似问题，请举例说明其实现。

**编辑：**现在我有错误的居中文本，如下图所示。
![在此处输入图像描述](../Images/bdb622f9ac2881fe6a56036a2585dccb.png)

此时此刻，我认为最好的解决方案是使用 android:layout_weight。
但是当广告没有显示时 - 违反了比例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T11:52:17.857

现在试试：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/main_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/ll"
    android:layout_above="@+id/footer_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/author"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/author"/>
</LinearLayout>

<LinearLayout
    android:id="@+id/footer_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    android:orientation="vertical" 
    android:layout_alignParentBottom="true">

    <LinearLayout
        android:id="@+id/menu_layout"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:background="@drawable/nav_overlay"
        android:gravity="center_horizontal"
        android:orientation="horizontal">

        <Button
            android:id="@+id/previous"
            android:layout_width="45dp"
            android:layout_height="45dp"
            android:background="@drawable/button" />

    </LinearLayout>

    <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="@string/admob_id"
        ads:loadAdOnCreate="true" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:51:55.570

在线性布局中，添加属性：gravity="center_horizo​​ntal" 并在文本视图中添加属性：layout_gravity="center_horizo​​ntal"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T11:55:03.700

为您的文本视图添加重力。找到以下代码

```
 <TextView
        android:id="@+id/author"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="hiiiiiiiiiii"/> 
```

这将在布局的中心提供您的文本视图...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:20:54.473

更改您的文本视图布局，如下所示：

```
 <TextView
        android:id="@+id/author"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/author">
    </TextView>
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:26:42.693

放`layout_centerInParent = true`

# java - JAR 文件位不相同

> ID：10719278
> 
> 赞同：3
> 
> 时间：2012-05-23T11:48:03.857
> 
> 标签：java, jar

每次我创建一个与最后一个相同内容的 jar 文件时，md5 校验和总是会改变。我相信这是关于时间戳和创建日期，但我想有一定的理由。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T11:58:05.233

这可能是因为您的构建过程在每次运行时都会创建一些文件。例如，`MANIFEST.MF`位于下`META-INF`可能包含日期、内部版本号等。因此，如果它对您很重要，请检查清单和其他生成生成的文件。

# wix - WIX 安装程序，根据平台包含不同的合并模块

> ID：10719280
> 
> 赞同：0
> 
> 时间：2012-05-23T11:48:04.880
> 
> 标签：wix, setupapi

我正在用 WIX 安装程序编写一个应用程序。该应用程序需要一个驱动程序（我也编写了该驱动程序），它是通过主 WIX 安装程序项目中包含的合并模块安装的。

不同的平台需要不同的驱动程序变体，据我所知，它们需要不同的安装程序包，因为我不能在同一个安装程序中包含 diffxapp_x64 和 diffxapp_x86。

所以，我有一个主安装程序和三个合并模块（用于 x86、x64 和 ia64）。我可以使用目标平台设置有条件地在主安装程序项目中包含正确的合并模块变体，吐出三个包吗？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:48:24.970

使用[WiX 预处理器](http://wix.sourceforge.net/manual-wix3/preprocessor.htm)。

当您启动安装程序的构建时，设置一个 WiX 预处理器变量并使用条件语句根据变量的值选择不同的合并模块。

# c# - 如何在不将整个文档加载到内存的情况下使用 Xml 文件？

> ID：10719281
> 
> 赞同：1
> 
> 时间：2012-05-23T11:48:07.350
> 
> 标签：c#, xml

如何在不将整个文档加载到内存中的情况下添加新节点、更新现有节点和删除 xml 文档的现有节点？

我有一个 xml 文档并将其视为我的应用程序的内存，因此需要能够在不加载整个文档的情况下快速进行数百次读取和写入。

它的结构是这样的：

```
<spiderMemory>
  <profileSite profileId="" siteId="">
    <links>
      <link>
        <originalUrl></originalUrl>
        <isCrawled></isCrawled>
        <isBroken></isBroken>
        <isHtmlPage></isHtmlPage>
        <firstAppearedLevel></firstAppearedLevel>
      </link>
    </links>
  </profileSite>
</spiderMemory> 
```

XDocument 怎么可能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T11:53:50.320

如果您想快速进行数百次读写……您可能使用了错误的技术。您是否尝试过使用普通的旧 RDBMS？

如果您仍然需要 XML 表示，那么您可以创建一个导出方法来从数据库中生成它。

XML 并不能很好地替代这类问题。只是说。

还有……把整件事都记在内存里有什么问题？它可能有多大？说1GB？吸起来。说1TB？哎呀。但是在那种情况下，XML 是错误的，错误的，无论如何都是错误的 ;) 太冗长了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:50:12.680

您可以使用 XmlReader，如下所示：

```
FileStream stream = new FileStream("test.xml", FileMode.Open);
XmlReader reader = new XmlTextReader(stream);
while(reader.Read())
{
  Console.WriteLine(reader.Value);
} 
```

这是一个更详细的示例[http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T05:19:31.663

正如Daren Thomas 所说，正确的解决方案是根据您的需要使用RDBMS 而不是XML。我有一个使用 XML 和 Java 的部分解决方案。**Stax 解析器**不会解析内存中的整个文档，并且比 DOM 快很多（仍然 XML 解析总是很慢）。“拉式解析器”（例如 Stax）允许您控制要解析的内容。一种不太干净的方法是在获得所需元素时在 SAX 解析器中抛出异常。

要进行修改，最简单（但速度较慢）的方法是使用 XPath。另一个（未经测试的）选项是将 XML 文件视为**文本**，然后**是“搜索和替换”**内容。在这里您可以使用各种文本搜索优化。

# iphone - uiview上的透视变换

> ID：10719285
> 
> 赞同：-1
> 
> 时间：2012-05-23T11:48:33.977
> 
> 标签：iphone, ipad, core-animation

这是开始使用的基本代码：

```
[UIView transitionWithView:self.view duration:2.0
                   options:UIViewAnimationOptionBeginFromCurrentState
                animations:^ {         

                    CALayer *layer1 = leftband.layer;
                    layer1.anchorPoint = CGPointMake(0, 0.5);
                    CATransform3D rotationAndPerspectiveTransform1 = CATransform3DIdentity;
                    rotationAndPerspectiveTransform1.m34 = 1.0 / -500;
                    rotationAndPerspectiveTransform1 = CATransform3DRotate(rotationAndPerspectiveTransform1, DegreesToRadians(-180.0f), 0.0f, 1.0f, 0.0f);
                    layer1.transform = rotationAndPerspectiveTransform1;

                    CALayer *layer2 = rightband.layer;
                    layer2.anchorPoint = CGPointMake(0, 0.5);
                    CATransform3D rotationAndPerspectiveTransform2 = CATransform3DIdentity;
                    rotationAndPerspectiveTransform2.m34 = 1.0 / -500;
                    rotationAndPerspectiveTransform2 = CATransform3DRotate(rotationAndPerspectiveTransform2, DegreesToRadians(180.0f), 0.0f, 1.0f, 0.0f);
                    layer2.transform = rotationAndPerspectiveTransform2;
                }
                completion:nil {

                }]; 
```

leftband 和 rightband 是两个 UIImageView。我想要的效果是leftband沿Y轴向左方向变换动画。右边带沿其 Y 轴向右做同样的事情。

但是上面的代码导致左右图像视图在同一方向上动画（它只发生在左边）。我想我对锚点的理解是错误的。旋转变换中的 -180° 和 +180° 都会产生向左的动画。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:16:34.297

基本上在动画块运行之前设置锚点可以解决问题。左锚点 -> (0.0f,0.5f) 和右锚点 -> (1.0f,0.5f)。

# svg - SVG 标记在用作 D3 强制布局链接的 d3.svg.diagonal 曲线上的方向不正确

> ID：10719286
> 
> 赞同：6
> 
> 时间：2012-05-23T11:48:34.030
> 
> 标签：svg, d3.js, marker, force-layout

我对 SVG 和 d3.js 有点陌生。

在使用 D3 力布局绘制图形时，我使用了一个简单的对角线生成器并使用标记端来绘制箭头。

当使用弧线而不是对角线发生器时，箭头看起来很好。但是使用如下代码中的对角线生成器不会产生正确的标记：

```
var vis = this.vis = d3.select(el).append("svg:svg")
    .attr("width", w)
    .attr("height", h);

var force = d3.layout.force()
    .gravity(0.03)
    .distance(120)
    .charge(-800)
    .size([w, h]);

var linkDiag = d3.svg.diagonal()
    .projection(function(d)
    {
        return [d.x, d.y];
    });

vis.append("svg:defs")
        .selectAll("marker")
    .data(["normal", "special", "resolved"])
   .enter()
        .append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
    .append("svg:path")
    .attr("d", "M 0,-5 L 10,0 L0,5"); 
```

...然后还有：

```
 force.on("tick", function() {
        link.attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; })
        .attr("d", linkDiag)
        .attr("marker-end", function(d) { return "url(#special)"; });

    }); 
```

标记根本不与顶点定向。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-14T05:39:27.827

它只是看起来好像箭头没有指向正确的方向，因为您正在通过`refX`和将箭头移动到新位置`refY`。

例如，查看这个在各个方向绘制对角线的[代码。](http://jsfiddle.net/2zqSN/2)箭头显示正确，但 180 度的箭头除外，但这可能是由于舍入误差。

现在，尝试将`refX`第 10 行的值更改为 5。现在，靠近水平方向的箭头看起来不正确。要更显着地看到这一点，请尝试将值更改为 8。

发生的事情是您隐藏了对角线的一部分，因此该线似乎在较早的点结束，该点的弯曲与实际端点略有不同。如果箭头太大以至于它覆盖了曲线的一部分，也会发生同样的事情。请注意，对于 d3 中的对角线，它们是对称的贝塞尔曲线，箭头应始终完美地指向水平或垂直方向。通过降低箭头的不透明度，您可以准确地看到正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T12:51:38.340

你能具体说明你的问题吗？但是，即使运行您的代码，我认为您的问题可能是

```
.attr("orient", "auto") 
```

尝试指定 pos

# java - 在服务请求中使用用户密钥？

> ID：10719288
> 
> 赞同：1
> 
> 时间：2012-05-23T11:48:40.050
> 
> 标签：java, web-services, soap, wsdl

我正在编写一个 SOAP/WSDL Web 服务。

我通过以下方式连接到服务器：

服务 s = Service.create(url, qname);

因此，为了进行身份验证，我有一个用户密钥。

如何将其作为服务请求中的属性？

# excel - Excel 空间看不到

> ID：10719295
> 
> 赞同：-1
> 
> 时间：2012-05-23T11:48:59.740
> 
> 标签：excel

我从 translate.google.com 复制了一些名称。然后我将它粘贴到 excel 上（每个名称在一列中）。

现在，当我想拆分它以仅保留名字时，它不起作用。似乎excel看不到空间了。

我使用了这段代码：

```
=LEFT(R2;SEARCH(" ";R2;1)) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T11:57:54.453

您需要使用逗号 (,) 来分隔公式中的变量，如下所示：

```
=LEFT(R2,SEARCH(" ",R2,1)) 
```

这有帮助吗？

如果没有，请同时发布单元格 R2 的内容。

# java - JavaCV-OpenCV 错误

> ID：10719301
> 
> 赞同：1
> 
> 时间：2012-05-23T11:49:28.960
> 
> 标签：java, opencv, javacv

我想以一种简单的方式将我的网络摄像头捕获到 Java 中。我按照本教程使用 JavaCV 和 OpenCV：[http ://ganeshtiwaridotcomdotnp.blogspot.com/2011/12/opencv-javacv-eclipse-project.html](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/12/opencv-javacv-eclipse-project.html)

尝试一些示例代码时出现此错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Users\Francis\AppData\Local\Temp\jniopencv_core7109340164936655704.dll: Can't find dependent libraries
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1807)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1703)
        at java.lang.Runtime.load0(Runtime.java:770)
        at java.lang.System.load(System.java:1003)
        at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:403)
        at com.googlecode.javacpp.Loader.load(Loader.java:342)
        at com.googlecode.javacpp.Loader.load(Loader.java:316)
        at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:131)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at com.googlecode.javacpp.Loader.load(Loader.java:335)
        at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:96)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at com.googlecode.javacpp.Loader.load(Loader.java:335)
        at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:91)
        at com.googlecode.javacv.OpenCVFrameGrabber.start(OpenCVFrameGrabber.java:171)
        at beeldherkenningp1.CaptureImage.captureFrame(CaptureImage.java:13)
        at beeldherkenningp1.BeeldherkenningP1.main(BeeldherkenningP1.java:37) 
```

但是我的所有 jar 都包括在内，安装了 Microsoft Visual C++ 2010 Redistributable Package，将 OpenCV 解压缩到 root 并且我的系统路径设置正确......（已经尝试过多次重新安装 Visual C++ Redistributable Package）。（x64 位，Netbeans 是 x86 有关系吗？）

或者有人知道其他可以**轻松**捕获java中凸轮的库吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:41:23.477

我是编写您正在关注的教程的人。

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: 
C:\Users\Francis\AppData\Local\Temp\jniopencv_core7109340164936655704.dll: 
Can't find dependent libraries 
```

看起来dll库不在环境变量路径中，因为您没有正确添加opencv的路径。或者这可能是问题，因为您已经安装了 Romain 所说的 Visual C++ 可再发行组件的 x64 和 x86 版本。

我建议你按照我在这里描述的步骤 JavaCV：[eclipse 项目配置窗口](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/12/opencv-javacv-eclipse-project.html)？并将以下内容添加到系统路径？

**配置路径**

```
64-bit version of the JDK:
[installation path]\build\common\tbb\intel64\vc10\;C:\opencv\build\x64\vc10\bin\;
32-bit version of the JDK:
[installation path]\build\common\tbb\ia32\vc10\;C:\opencv\build\x86\vc10\bin\; 
```

这里`[installation path]`可能是`"C:\opencv"`

希望这可以帮助。

**更新：**

配置 JavaCV 的更简单的步骤是可用的。请检查以下链接：

*   [http://ganeshtiwaridotcomdotnp.blogspot.com/2017/01/javacv-configuration-in-windows.html](http://ganeshtiwaridotcomdotnp.blogspot.com/2017/01/javacv-configuration-in-windows.html)

# java - 名称中带点的 Java 包文件夹

> ID：10719306
> 
> 赞同：4
> 
> 时间：2012-05-23T11:49:58.757
> 
> 标签：java, classpath

是否按照规范，给定一个`MyClass.java`包含

```
package com.mycorp.foo;

public class MyClass {
  public static void main (String[] args) {
    System.out.println("Hello, world!");
  }
} 
```

在以下路径中（注意文件夹名称中的点）：

```
./com/mycorp.foo/MyClass.java 
```

以下工作正常：

```
$ javac com/mycorp.foo/MyClass.java 
```

生产`./com/mycorp.foo/MyClass.class`，而这不起作用：

```
$ java com.mycorp.foo.MyClass 
Exception in thread "main" java.lang.NoClassDefFoundError: com/mycorp/foo/MyClass
Caused by: java.lang.ClassNotFoundException: com.mycorp.foo.MyClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:24:00.833

类文件顶部提到的打包结构**与编译的关系不大，**而与**运行时类加载**有关。

1.  您可以输入任何包名并编译它。例如下面的java类编译

    ```
    package com.sa.test.me.yes.no;

     public class Test{

     public static void main(String[] args){

     System.out.println("Hello");
     }

      } 
    ```

**即使您没有放入**与包声明相同的文件夹结构，它也会编译。您可以通过不放入任何文件夹来测试它（例如`java Test.java`）

2\. 类加载时包组织更重要。**类加载器将始终****根据包结构**将类搜索到文件夹中。因此，当您尝试运行程序时，类加载器会尝试根据包结构在文件夹中搜索类文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:04:20.207

[Oracle 文档](http://docs.oracle.com/javase/tutorial/java/package/managingfiles.html)指出源树不必匹配目标文件树这一事实。`javac`出于这个原因，让任何事情都可以进行，但`java`将要求目录结构遵循以点分隔的包名称的每个元素都有一个子目录的标准。

# c - 使用 strftime() 获取 UTC 时间戳

> ID：10719310
> 
> 赞同：4
> 
> 时间：2012-05-23T11:50:05.540
> 
> 标签：c, datetime, glibc, strftime, time-t

我正在尝试使用以下`strftime`函数将当前 utc 时间编码为字符串：

```
time_t now;
struct tm nowLocal;
struct tm nowUtc;

now = time(NULL);
localtime_r(&now, &nowLocal);
gmtime_r(&now, &nowUtc); 
```

到目前为止一切顺利：`nowLocal`包含我的时区 (CET) 中的当前时间，`nowUtc`包含 utc 时间，差异完全`tm_gmtoff`取决于值：

```
nowLocal: {tm_sec = 28, tm_min = 27, tm_hour = 13, tm_mday = 23, tm_mon = 4, tm_year = 112, tm_wday = 3, tm_yday = 143, tm_isdst = 1, tm_gmtoff = 7200, tm_zone = 0x8127a38 "CEST"}

nowUtc: {tm_sec = 28, tm_min = 27, tm_hour = 11, tm_mday = 23, tm_mon = 4, tm_year = 112, tm_wday = 3, tm_yday = 143, tm_isdst = 0, tm_gmtoff = 0, tm_zone = 0x3e9907 "GMT"} 
```

然后我`strftime()`用`"%s"`格式调用以获取自纪元以来的秒数：

```
char tsFromLocal[32];
char tsFromUtc[32];

strftime(tsFromLocal, sizeof(tsFromLocal), "%s", &nowLocal);
strftime(tsFromUtc, sizeof(tsFromUtc), "%s", &nowUtc); 
```

结果对我来说似乎很奇怪。`strftime()`我希望从两个调用中得到完全相同的字符串，因为`%s`格式描述为：

自纪元以来的秒数，即自`1970-01-01 00:00:00 UTC`. 除非闰秒支持可用，否则闰秒不计算在内。

但我得到了两个不同的值：

```
tsFromLocal:"1337772448"

tsFromUtc: "1337768848" 
```

而且区别不是***7200*** ( `tm_gmtoff`) 而是***3600***。谁能解释这种行为？或者它是一个错误？

我这样做的原因是我需要通过网络传输时间值，并将其与目标机器上可能处于不同时区的当前时间进行比较。在目标机器上我想：

```
struct tm restoredUtc;
time_t restored;

strptime(tsFromUtc, "%s", &restoredUtc);
restored = timegm(&restoredUtc); 
```

但我得到了：

```
restoredUtc:{tm_sec = 28, tm_min = 27, tm_hour = 12, tm_mday = 23, tm_mon = 4, tm_year = 112, tm_wday = 3, tm_yday = 143, tm_isdst = 1, tm_gmtoff = 7200, tm_zone = 0x8127a38 "CEST"} 
```

所以无论如何都要根据当前时区`strptime()`设置。`tm_zone`但即使我会使用`timelocal()`而不是`timegm()`我不会得到正确的值，因为它应该是***11:27:28 CEST***而不是***12:27:28 CEST***。这个错误是否与不同的结果有关`strftime()`？

对后面的部分有任何评论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:39:43.563

你可能最好只使用格林威治标准时间，因为`gmtime_r`它总是会在任何地方给你相同的答案。如果一台机器想要以本地时间显示，那可以稍后完成，但坚持使用一个时区进行存储和网络传输是个好主意，而且 GMT 值很容易获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T02:49:40.763

我怀疑评论是正确的：`strftime()`将时间解释为当地时间。请注意，这`tm_gmtoff`不是一个标准化的字段；我想知道是否`strftime()`正在看它。但我找不到任何具体的东西来证实这一点。

但是，回答您问题的第二部分，为什么不`time(NULL)`直接通过网络传输结果呢？或者，如果您已经有时间以 a 的形式`struct tm`，使用`mktime()`转换为`time_t`然后转移？ `printf("%lu", (unsigned long) time)`比尝试使用简单得多`strftime("%s")`，C99 或 POSIX 没有标准化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T04:54:34.010

Q1：谁能解释这种行为？或者它是一个错误？

是的，这是一个错误`tsFromLocal:"1337772448"`!= `tsFromUtc: "1337768848"`。但是错误在**tsFromUtc**中。它们应该是相同的，它们都应该是 1337772448。

1337772448%(24*60*60) --> 41248 是一天中的 UTC 秒数或 11:27:28，它与您的`nowUtc`结构匹配并且是您认为的时间（以 UTC 为单位）

Q2: ... 这个错误是否与 strftime() 的不同结果有关？

我同意`time_t`将整数用作网络通信的一般想法。

是的，看起来是这样。

`now`如果您想在这篇文章中走得更远：考虑发布紧随其后的数值，`time(&now)`并清楚地说明您当时预计的时间。

# javascript - 从 HTML 表单中提取数据

> ID：10719314
> 
> 赞同：0
> 
> 时间：2012-05-23T11:50:27.247
> 
> 标签：javascript, html, ajax, forms, xmlhttprequest

我有一些 Javascript，它通过 XMLHttpRequest 从服务器获取表单的 HTML，并在页面上显示表单。

如果表单已提交，我希望能够提取将通过 POST 发送的数据，然后通过另一个 XHR 发送。棘手的一点是表单可能包含不同类型的不同元素。

有没有办法做到这一点，而不必检查表单上的每个元素，确定其类型，根据类型手动提取数据，并将其全部构建到查询字符串中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:53:12.147

> 有没有办法做到这一点，而不必检查表单上的每个元素，确定其类型，根据类型手动提取数据，并将其全部构建到查询字符串中？

不，没有，但是有一些预先编写的库已经编写了代码。例如[jQuery 序列化](http://api.jquery.com/serialize/)

请注意，如果您要发出 POST 请求，则数据应位于请求正文中，而不是查询字符串中。

# javascript - JSON 数据没有响应

> ID：10719318
> 
> 赞同：2
> 
> 时间：2012-05-23T11:50:56.860
> 
> 标签：javascript, jquery, json, jsonp

以下是我的代码：

```
 function jsonpCallback(response){
                    //JSON.stringify(response)
                    alert(response);
                }                
                $.ajax({
                    url: url,
                    dataType: 'jsonp',
                    error: function(xhr, status, error) {
                        alert(error);
                    },
                    success: function(data) {
                        alert(data);
                        jsonpCallback(data);
                    }
                }); 
```

这里我的 url 变量是包含以下数据的链接，据我所知它是 JSON 格式：

```
[{"destination":"United States","destinationId":"46EA10FA8E00","city":"LosAngeles","state":"California","country":"United States"}] etc.. 
```

我想在将连续数据传递给它之后调用 jsonpCallback 函数。但是 $.ajax 的成功参数没有调用该函数，这就是我没有将任何数据输入其中的原因。但是我的调试器窗口在那里显示响应，那么为什么它不来 $.ajax 函数呢？

任何帮助...在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:05:56.243

尝试传递 ajax 调用 GET/POST 的类型。

```
$.ajax({
     type: "GET",
     url: url,
     dataType: 'jsonp',
     error: function(xhr, status, error) { alert(error); },
     success: function(data) {
         alert(data);
         jsonpCallback(data);
     }
});

 function jsonpCallback(response){
      //JSON.stringify(response)
      alert(response);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:19:17.890

您尝试从中加载数据的 URL 不支持 JSONP，这就是未调用回调的原因。

如果您拥有端点，请确保您处理回调 GET 参数。在 PHP 中，您的输出将如下所示：

```
<?php 
echo $_GET['callback'].'('.json_encode($x).')'; 
```

这会将结果转换为如下所示：

```
jsonp2891037589102([{"destination":"United States","destinationId":"46EA10FA8E00","city":"LosAngeles","state":"California","country":"United States"}]) 
```

当然，回调名称会根据 jQuery 自动生成的内容而改变。

这是必需的，因为 JSONP 通过在 中创建一个新`<script>`标签`<head>`来强制浏览器加载数据。如果`callback`未处理 GET 参数（并且 URL 返回 JSON 响应而不是 JSONP 响应），则数据会被加载，但不会分配给任何东西，也不会（通过回调）传输给任何东西。本质上，数据会丢失。

如果不修改端点，您将无法从该 URL 加载数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:14:57.253

首先检查您在哪个事件中调用`$.ajax`函数...

```
 <script type='text/javascript'>
    jQuery('#EnrollmentRoleId').change(function(){
alert("ajax is fired");
    $.ajax({
         type: "GET",
         url: url,
         dataType: 'jsonp',
         error: function(xhr, status, error) { alert(error); },
         success: function(data) {
             alert(data);
             jsonpCallback(data);
         }
    });
    });
     function jsonpCallback(response){
          //JSON.stringify(response)
          alert(response);
     }       

    </script> 
```

第二次尝试替换`$`为`jQuery`.

如果您认为有任何冲突错误，请尽量避免冲突。

[jQuery ajax 错误回调未触发](https://stackoverflow.com/questions/6615084/jquery-ajax-error-callback-not-firing)

```
function doJsonp()
{
alert("come to ajax");
    $.ajax({
        url: url,
        dataType: "jsonp",
        crossDomain: true,
        jsonpCallback:'blah',
        success: function() { console.log("success"); }, 
        error: function() { console.log("error"); } 
    });
} 
```

然后检查您的 json 数据是否有效。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:18:26.457

我注意到关于 $.ajax 的一件奇怪的事情是，如果内容类型不完全匹配，它就不会被认为是成功的。试着玩弄它。如果您更改`success`为`complete`（并修复参数）它会发出警报吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:22:51.710

它不起作用，因为您的服务器没有呈现 JSONP 响应。它呈现一个 JSON 响应。

要使 JSONP 工作，服务器必须调用 ajax 请求发送的 javascript 函数。该函数由 jQuery 生成，因此您不必担心。

但是，服务器必须担心它。默认情况下，此函数的名称在`callback`参数中传递。例如，服务器的 URL 将是[http://some.domain/ajax.php?callback=functionName](http://some.domain/ajax.php?callback=functionName) (notice `callback=functionName`)。

因此，您需要在服务器端（在 PHP 中）实现类似以下的内容：

```
$callback = $_GET['callback'];
// Process the datas, bla bla bla
// And display the function that will be called
echo $callback, '(', $datas, ');'; 
```

返回的页面会在javascript中执行，所以会调用函数，所以jQuery会调用`success`函数。

# google-maps-api-3 - 经过几个月的 100% 稳定性，今天我在谷歌地图服务上收到 403 错误

> ID：10719319
> 
> 赞同：4
> 
> 时间：2012-05-23T11:51:08.667
> 
> 标签：google-maps-api-3, geocoding, http-status-code-403

我只是想知道是否有人可以解释为什么我的谷歌地图服务会出现 403 Forbidden 错误。

我一直在加载地图 api：

```
<script type="text/javascript" src="//maps.googleapis.com/maps/api/js?libraries=places&amp;sensor=false"></script> 
```

然后使用地理编码和自动完成库将用户搜索转换为坐标，以显示在我的搜索结果的地图上。

直到昨天，当我在访问自动完成服务时开始看到 403 错误时，这一直运行良好（几个月）。

我 100% 确信我没有达到每天 25k 的查询限制，并且我没有对我的代码进行任何更改。

我现在已经在我的脚本加载中添加了一个 API 密钥，并且问题消失了，但我想确保这不会再次发生。基于位置的搜索是我们网站的主要功能，如果它出现故障，我们就会失去客户。

有没有人知道为什么会发生这种情况？

在什么情况下会再次发生？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T15:39:00.367

**即使使用 API 密钥集**，这个问题也会重新出现- 我认为问题实际上在于缓存 google maps javascript。

我让我的网络服务器动态决定要在本地组合、缩小和缓存哪些 javascript。这是使用[RequestReduce](http://requestreduce.org/)完成的。

当客户端 javascript 变得陈旧（*在我的情况下大约 3 天*）时 - 谷歌返回 403 未经授权。

API 密钥只是一条红鲱鱼。我可以删除密钥并且我的代码仍然有效 - 只要地图 js 是“新鲜的”。

就我而言，解决方法是添加`maps.googleapis.com`到[RequestReduce](http://requestreduce.org/)忽略列表中：

```
javascriptUrlsToIgnore="maps.googleapis.com" 
```

对于其他人，请确保不要将 maps.googleapis.com javascript 缓存超过几个小时（如果有的话）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T13:49:24.957

Google Maps JavaScript API 最近将小版本增量升级到 3.9[^(变更日志)](http://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)，默认版本从 3.6 升级到 3.7。我注意到您没有在用于加载 Google Maps JavaScript API 库的 URL 中指定版本，因此您检索了默认版本 3.7。关于 3.7 版的一件重要事情是，它现在需要为某些库使用密钥。[**开发人员指南的版本控制**部分](https://developers.google.com/maps/documentation/javascript/basics#Versioning)提供了有关您应该使用哪个版本的信息。

其他一些也遇到了类似的问题，但是如果您在添加密钥后运行良好，那么您应该很好。如果您希望在未来收到有关 Google Maps API 更改的通知，您可以[注册通知](https://groups.google.com/forum/?fromgroups#!forum/google-maps-js-api-v3-notify)。

# css - 自定义类的选择器

> ID：10719329
> 
> 赞同：0
> 
> 时间：2012-05-23T11:52:07.470
> 
> 标签：css, javafx

假设我有一个名为 TextEditor 的类，它扩展了 TextArea，那么正确的选择器是什么？选择器喜欢`.text-editor`没有帮助。

好吧，实际上`.text-area`工作正常，但这不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:16:40.497

您可以定义自己的选择器来自定义默认`.text-area`选择器。并使用此选择器设置自定义类的 id。[请参阅此答案](https://stackoverflow.com/a/10149050/682495)的“更改表格列标题样式：自定义”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:00:03.533

CSS 不知道您创建的 Java 类。手动添加一个 CSS 类并使用它来设置样式。例如 class="TextEditor" 然后使用 .TextEditor 对其进行样式设置

# iphone - 如何在不冻结 UI 的情况下安排多个本地通知？

> ID：10719335
> 
> 赞同：1
> 
> 时间：2012-05-23T11:52:21.523
> 
> 标签：iphone, ios, cordova, uilocalnotification, phonegap-plugins

在我的 PhoneGap 1.3 离线应用程序中，我正在使用在官方插件 GitHub 页面中找到的修改后的 iOS 本地通知插件。

我需要根据用户定义的设置安排重复通知（每周/每月），或每 2 周触发多个单一通知。

当我尝试将这 26 个通知安排为每 2 周触发一次时，就会出现问题。

目前我正在使用它来实现：

```
for (int i = 1; i < 26; i++)
{
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];

    if (localNotif == nil) {
        return;
    }

    NSDate *date = [[NSDate date] dateByAddingTimeInterval: i * 60 * 60 * 24 * 7 * 2];

    localNotif.fireDate = date;
    localNotif.timeZone = [NSTimeZone defaultTimeZone];
    localNotif.alertBody = [NSString stringWithFormat:@"%i: %@", i, msg];

    localNotif.hasAction = NO;
    localNotif.soundName = UILocalNotificationDefaultSoundName;
    localNotif.applicationIconBadgeNumber = 0;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];        

    [localNotif release];

} 
```

在 iPhone 3G 或 iPod Touch 2 上运行此程序时，UI 会冻结大约 3 - 5 秒，这是一个很大的禁忌。有没有办法优化调度通知？

我知道只使用每周和每月重复通知可以解决问题，但客户想要`every 2 weeks`、`every 2 months`和`every 3 months`通知，所以我需要安排多个通知。

我试图在新线程中运行循环，`[NSThread detachNewThreadSelector:...]`这会引发新问题（不时崩溃）。

3G 之后发布的 iPhone 是否会快得多以至于延迟/冻结不存在？我只有这两个古老的设备可以测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:04:24.727

我建议使用以下方法在后台线程中执行创建：`(void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg`

或者我会尝试重新考虑这个过程。也许与其一次创建价值 2 周的提醒，不如创建一对并设置其他东西来创建其余部分。或者甚至只是创建一个并存储一个重复的布尔值，这样当它触发时它也会创建下一个。

# python - 在没有布局的父小部件上居中小部件

> ID：10719337
> 
> 赞同：0
> 
> 时间：2012-05-23T11:52:34.240
> 
> 标签：python, pyqt4, pyside

我在不使用布局的情况下将小部件添加到父小部件（因为我正在使用一些与布局尝试执行的操作相冲突的动画）。

我试图了解我需要做些什么来手动将子小部件与其父小部件对齐（即使调整父小部件的大小也将其水平和垂直居中）。

我试过自己计算位置并使用`QWidget.move()`and `QWidget.setGeometry()`，但都不能正常工作，因为我似乎无法获得正确的父宽度和高度。

这是我要实现的目标的简化示例：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class Test( QWidget ):

    def __init__( self, parent=None ):
          super( Test, self ).__init__( parent )

    def sizeHint( self ):
        return QSize( 500, 500 )

    def addPage( self, widget ):
        widget.setParent( self )
        # THIS SEEMS UNPREDICTABLE:
        widget.move( self.sizeHint().width()/2, self.sizeHint().height()/2 ) 

if __name__ == '__main__':
    app = QApplication( sys.argv )

    mainW = Test()
    childW = QPushButton( 'centre me please' )
    mainW.addPage( childW )
    mainW.show()

    sys.exit( app.exec_() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:26:54.933

您可以使用 QWidget.setGeometry 将您的子小部件放置在中心。如果您希望无论您的主小部件发生什么事情都保持这种状态，那么您需要捕获与您期望的更改相对应的事件。

以下应该有效：

```
#!/usr/bin/env python

from PyQt4 import QtGui, QtCore
import sys

class Application(QtGui.QApplication):

    def __init__(self):
        QtGui.QApplication.__init__(self, sys.argv)

        self.main = MyWidget()
        self.main.show()

class MyWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QLabel.__init__(self, parent)

        self.setStyleSheet("QWidget { background-color : white}")
        self.setGeometry(0, 0, 200, 200)

        self.sub_widget = QtGui.QWidget(self)
        self.sub_widget.setStyleSheet("QWidget { background-color : black}")
        self.sub_widget.setGeometry((self.width()-100)/2, (self.height()-100)/2 , 100, 100)

    def resizeEvent(self, event):

        self.sub_widget.setGeometry((self.width()-100)/2, (self.height()-100)/2 , 100, 100) 
```

# java - JPA 查找表值

> ID：10719340
> 
> 赞同：0
> 
> 时间：2012-05-23T11:52:45.997
> 
> 标签：java, database, jpa, lookup

我有2张桌子。一个用于问题，一个用于可能的答案。例如，我正在建模：“你养狗吗？” 是[ ]，不是[ ]。

所以我有一组问题和一组可能的答案。我想知道如何在 JPA 中表示这一点（注意这不是关于捕获答案，而是显示问题并填充选择框）。

到目前为止，我有：

```
@Entity(name="QUESTIONS")
public class Question {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  private long id;

  private int order;
  private String questionTitle;
  private String questionText;
  private Set<AnswerOption> possibleAnswers;
  ....
} 
```

这是`private Set<AnswerOption> possibleAnswers;`我遇到麻烦的部分。我如何让这个预先填充可能的答案范围？

上面的建模方式将提供一个 Set 变量来存储答案。

我在想这个错误的方式吗？我应该使用代码填充数据库并将相同的 AnswerOption 对象分配给不同的 Question 对象吗？

谢谢你的帮助。亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:05:28.007

由于 Hibernate 本质上是一个 ORM 工具，它只负责将您的类和实例映射`Question`到`AnswerOption`定义的表。

您需要的是初始化**数据***，*而不是数据*结构*。因此，您必须以某种初始化方法用可能的实例填充所有实例。***`Question``AnswerOption``initQuestions()`***

 ***另外，您最好注意这些`Question`s 是否已经初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:32:24.083

在尝试在 JPA 中映射该关系之前，您应该首先从数据库关系建模的角度来看这一点。首先，您需要定义问题和答案在数据库级别的链接方式。我假设您使用外键或关联表。像这样的东西：

```
CREATE TABLE questions (
    id INT NOT NULL PRIMARY KEY,
    text VARCHAR(255)
);

CREATE TABLE answers (
    id INT NOT NULL PRIMARY KEY,
    text VARCHAR(255)
);

CREATE TABLE question_answers (
    id INT NOT NULL PRIMARY KEY,
    question_id INT NOT NULL,
    answer_id INT NOT NULL,
    KEY k_question_id (question_id),
    KEY k_answer_id (answer_id),
    CONSTRAINT fk_question_answers_question_id FOREIGN KEY (question_id)
        REFERENCES questions(id),
    CONSTRAINT fk_question_answers_answer_id FOREIGN KEY (answer_id)
        REFERENCES answers(id)
); 
```

这将问题和答案之间的关系定义为关联表，然后您可以将其映射到 JPA 中：

```
@Entity(name="QUESTIONS")
public class Question {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    private int order;
    private String questionTitle;
    private String questionText;

    @JoinTable(name = "question_answers", joinColumns = { @JoinColumn(name = "question_id", unique = true) }, inverseJoinColumns = { @JoinColumn(name = "answer_id") })
    private Set<AnswerOption> possibleAnswers;
} 
```

当然，使用外键（而不是关联表）的注释会有所不同，如果你想走这条路，请留下评论，我会举一个例子。这应该足以让你开始。***

# jquery - 如何使用 jQuery 使文本框可拖动？

> ID：10719341
> 
> 赞同：3
> 
> 时间：2012-05-23T11:52:46.620
> 
> 标签：jquery, textbox, dialog, draggable, resizable

有没有人有使用 jQuery 使 html 输入文本框可拖动的经验？

我试图将文本框包装在 div 内，并使其可调整大小，但不可拖动。div 和文本框放置在标准的 jQuery UI 对话框中。实际上，我需要两者 - 对话框内的可拖动和可调整大小的 html 输入文本框。

代码如下：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $("#btnShow").click(function(e) {
            $('#dialog').dialog("open");
        });
        $('#dialog').dialog({
            title: "Sample dialog",
            resizable: false,
            autoOpen: false,
            width: 400,
            height: 300,
            buttons: [{ text: "OK", click: function() { /* do something */ } },
                { text: "Cancel", click: function() { $(this).dialog("close") } }]
        });
        $('#divText1').draggable({
            containment: "parent",
            cursor: "move"
        }).resizable({
            containment: "parent",
            handles: "e, w"
        });
    });
</script>

    <input id="btnShow" type="button" value="Show" />

    <div id="dialog" title="Dialog Box" style="border: solid 1px black; margin: 0px 0px 0px 0px; padding: 5px 0px 0px 5x;">
        <div id="divText1" style="width: 200px; height: 30px;">
            <input type="text" style="width: 98%;" value="Hello world!" /><br /><br />
        </div>
    </div> 
```

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-24T15:17:56.070

默认情况下，类型为 的元素禁用拖动`input,textarea,button,select,option`。您可以使用该[`cancel`](http://api.jqueryui.com/draggable/#option-cancel)选项更改/清除它。

工作代码：

```
$("#btnShow").click(function(e) {
  $('#dialog').dialog("open");
});
$('#dialog').dialog({
  title: "Sample dialog",
  resizable: false,
  autoOpen: false,
  width: 400,
  height: 300,
  buttons: [{
      text: "OK",
      click: function() { /* do something */ }
    },
    {
      text: "Cancel",
      click: function() {
        $(this).dialog("close")
      }
    }
  ]
});
$('#divText1').draggable({
  cancel: null,
  containment: "parent",
  cursor: "move"
}).resizable({
  containment: "parent",
  handles: "e, w"
});
```

```
<link href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<input id="btnShow" type="button" value="Show" />

<div id="dialog" title="Dialog Box" style="border: solid 1px black; margin: 0px 0px 0px 0px; padding: 5px 0px 0px 5x;">
  <div id="divText1" style="width: 200px; height: 30px;">
    <input type="text" style="width: 98%;" value="Hello world!" /><br /><br />
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:54:46.780

类似的例子：

```
 <script type="text/javascript">
            $(function () {
                $(".draggable").draggable({
                    revert: true,
                    helper: 'clone',
                    start: function (event, ui) {
                        $(this).fadeTo('fast', 0.5);
                    },
                    stop: function (event, ui) {
                        $(this).fadeTo(0, 1);
                    }
                });

                $("#droppable").droppable({
                    hoverClass: 'active',
                    drop: function (event, ui) {
                        this.value = $(ui.draggable).text();
                    }
                });
            });
        </script> 
```

# asp.net-mvc-3 - 创建 HTTP 处理程序

> ID：10719342
> 
> 赞同：0
> 
> 时间：2012-05-23T11:52:50.417
> 
> 标签：asp.net-mvc-3, httphandler

谁能告诉我如何创建自定义处理程序（.ashx）文件。要求：当我的应用程序请求 .pdf 时，我想调用该 .ashx 处理程序。.ashx 处理程序将具有显示或不显示文件的逻辑。

我的传入路径是“http://www.domainname.com/Content/PDF/ABC.pdf”。此 URL 应由“http://www.domainname.com/Handler.ashx”文件处理。

我想知道如何在我的应用程序中创建、映射和注册处理程序

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:54:53.560

`HTTPHandler`如果您正在使用 ASP.NET MVC，为什么需要使用一种`Action`方法来为您的文件内容提供服务。你可以用`HttpHandler`一个 Action 方法做大部分的事情。您可以根据需要执行操作的路由， `http://domainname.com/content/abc`可以返回 abc.pdf 文件

您不应该直接让浏览器访问资源 (PDF)。相反，您通过一种`action`方法授予访问权限。从请求中读取action方法中的文件Id/name，读取文件并输出。假设您在您的`ResourceController`

```
public ActionResult GetFile(string id)
{
   string fullFilePath=somefullpathvariable+"//"+id+".pdf";
   return File(fullFilePath, "application/pdf", Server.UrlEncode(id+".pdf"));
} 
```

现在用户可以像这样访问它

```
http://www.yourdomain.com/Resource/awesomemvc 
```

现在这可以返回一个`awesomemvc.pdf`从存储在您的服务器中的位置调用的文件，并且您`someFullPathVariable`保存到该位置的路径

# iphone - 由于内存泄漏导致应用程序崩溃

> ID：10719343
> 
> 赞同：0
> 
> 时间：2012-05-23T11:52:53.327
> 
> 标签：iphone, ios

```
- (void)viewDidLoad {

    webCollectionOnScroller=[[NSMutableArray alloc] init];
    scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 370, 320, 94)];
    scroll.pagingEnabled = YES;
    currentWeb=0;
    globali=0;
    firstTime=0;
    [loadingWeb startAnimating];
    alertForLoading = [[UIAlertView alloc] initWithTitle:@"Loading..." message:@"link is being loaded.\n Please wait!" delegate:self cancelButtonTitle:@"Back" otherButtonTitles:nil];
    [alertForLoading show];
    UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    // Adjust the indicator so it is up a few pixels from the bottom of the alert
    indicator.center = CGPointMake(alertForLoading.bounds.size.width / 2, alertForLoading.bounds.size.height - 100);
    [indicator startAnimating];
    [alertForLoading addSubview:indicator];
    [NSThread detachNewThreadSelector:@selector(initializeParser)toTarget:self withObject:nil];
    [super viewDidLoad];
} 
```

这是控制台错误“-[linksGallery respondsToSelector:]: message sent to deallocated instance 0x639a890 [Switching to process 2211]”

当我在主视图上评论发布声明时它不会崩溃

```
-(IBAction) goToLinks{
    linksGallery *showLinks=[[linksGallery alloc] initWithNibName:@"linksGallery" bundle:nil];
    [self.navigationController pushViewController:showLinks animated:YES];
        //[showLinks release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:11:43.667

尝试首先放置以下行：

```
[super viewDidLoad]; 
```

在“dealloc()”函数内部：

```
[super dealloc]; 
```

在所有版本结束时。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:02:58.997

该错误消息意味着 linksGallery 的实例在您向其发送消息“respondsToSelector”时已被释放。要调试它，请尝试在释放它时将其设置为 null，这样它就不会崩溃，尽管它可能也不会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:34:46.650

使您的 ViewDidLoad 看起来像这样：

```
- (void)viewDidLoad {

[super viewDidLoad];

webCollectionOnScroller=[[NSMutableArray alloc] init];
scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 370, 320, 94)];
scroll.pagingEnabled = YES;
currentWeb=0;
globali=0;
firstTime=0;
[loadingWeb startAnimating];
alertForLoading = [[UIAlertView alloc] initWithTitle:@"Loading..." message:@"link is being loaded.\n Please wait!" delegate:self cancelButtonTitle:@"Back" otherButtonTitles:nil];
[alertForLoading show];
UIActivityIndicatorView *indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

// Adjust the indicator so it is up a few pixels from the bottom of the alert
indicator.center = CGPointMake(alertForLoading.bounds.size.width / 2, alertForLoading.bounds.size.height - 100);
[indicator startAnimating];
[alertForLoading addSubview:indicator];
[NSThread detachNewThreadSelector:@selector(initializeParser)toTarget:self withObject:nil];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:18:29.260

试试下面的代码

```
-(IBAction) goToLinks{
    linksGallery *showLinks=[[linksGallery alloc] initWithNibName:@"linksGallery" bundle:nil];
    [self.navigationController pushViewController:[showLinks mutableCopy] animated:YES];
    [showLinks release];
} 
```

或者

```
-(IBAction) goToLinks{
    linksGallery *showLinks=[[[linksGallery alloc] initWithNibName:@"linksGallery" bundle:nil] autorelease];
    [self.navigationController pushViewController:showLinks animated:YES];
    //[showLinks release];
} 
```

希望这会有所帮助

# sql-server-2005 - 在 SQL Server 中的 where 语句中将字符串转换为日期时间

> ID：10719344
> 
> 赞同：1
> 
> 时间：2012-05-23T11:53:02.283
> 
> 标签：sql-server-2005, datetime, type-conversion

`datetime`我在 SQL Server 2005 中遇到字符串转换问题。

如果`Convert(datetime, x)`在这样的 where 语句中使用：

```
SELECT ThumbId
FROM [ImageBankSQL].[dbo].[MetaData]
WHERE (DataKey = 'ImagePropertyTagExifDTOrig'
       OR DataKey='ImagePropertyTagDateTime')
AND CONVERT(datetime, DataValue, 120) > CONVERT(datetime, '2011-09-23 00:00:00', 120) 
```

我得到：

> 从字符串转换日期时间时转换失败

但是，如果我选择转换`datetime`而不是在 where 语句中使用它们，一切都很好，并且我得到了转换后的日期：

```
SELECT ThumbId, Convert(datetime, DataValue, 120), Convert(datetime, '2011-09-23 00:00:00', 120)
FROM [ImageBankSQL].[dbo].[MetaData]
WHERE (DataKey = 'ImagePropertyTagExifDTOrig'
       OR DataKey = 'ImagePropertyTagDateTime') 
```

在这两个示例中，我都使用了两者`Convert(datetime, DataValue, 120)`并且`Convert(datetime, DataValue)`结果相同。

为什么我可以在选择中转换，但不能在哪里转换？以及如何在 where 语句中使用 convert 进行我的第一个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:58:35.047

当您进行选择时，转换仅适用于符合您条件的 DataValue（即 DataKey = 'ImagePRpertyTagDateTime'）

SQL Server 不执行惰性求值，因此使用 where 子句中的 Convert，它将针对所有行求值，即使 DataValue 不适合解析为日期。

# php - Symfony2：如何处理动态“导航”栏

> ID：10719350
> 
> 赞同：0
> 
> 时间：2012-05-23T11:53:45.373
> 
> 标签：php, jquery, symfony

我在文档的左侧有一个导航/操作栏，它允许我通过单击链接来管理三个实体之间的数据。

这使它有点复杂。呈现三种类型的状态：

1.  静态 URL (/image/add) - 那些 URL 不会改变并且总是一样

2.  动态 URL（服务器端） - 例如，当我执行“showAction”时，我可以将 showen 实体的 slug 渲染到 url 的

3.  动态 URL（客户端）- 例如，当我执行“indexAction”时，我选择了一个实体，然后 jQuery 将实体的 id 设置为 url (/image/2383382.jpg/edit)

这三种状态有时会同时出现，这使得很难清晰地维护和编码。不同的层也混在一起

我认为有两种方法可以更好地处理这个问题：

1.  Javascript - 仅限（首选）我编写了一个 jQuery 插件，它获取 JSON-Object 作为输入，插件处理所有内容

2.  Symfony 服务 Symfony 服务处理 url，只需要由 twig 渲染，不幸的是仍然需要 javascript 来选择实体而不渲染编辑，额外显示每个实体的操作

你觉得我的想法怎么样？还有其他/更好的解决方案吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:59:07.230

你总是应该通过 {{ path('route_name', { 'param1': 'value' }) }}

为了在 JS 中维护路由，请使用[FOSJsRoutingBundle](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)

# css - 如何重构现有项目以使用 Compass？

> ID：10719351
> 
> 赞同：1
> 
> 时间：2012-05-23T11:53:48.293
> 
> 标签：css, compass-sass

我有一个使用常规 CSS 的现有 Django 项目。样式表按功能分解，因此有 nav.css、course.css、default.css、reset.css 等。所有这些都导入到 main.css 中，从 html 页面引用。

我想在这个项目中使用 Compass，这样我就可以使样式表更易于管理，也可以轻松地为 UI 设置皮肤。

在查看 Compass 之前，我查看了 Sass，并为我的所有样式表创建了 .scss 文件。

现在我意识到使用 Compass 可能比只使用 Sass 更好，因为我将获得它附带的所有默认样式。但是，我对如何开始重构过程有点困惑。

重构已经定义了样式的现有项目以使其使用 Compass 的正确过程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:32:29.770

有或没有 Compass 的大部分重构工作都是一样的，你会比 Compass 更快地看到 Sass 提供的好处。

Compass 的创建者 Chris Eppstein 写了一篇关于他如何[重构 digg 的 CSS 的文章](http://chriseppstein.github.com/blog/2010/05/25/refactor-my-stylesheets-digg-edition/)。总结一下：

1.  **提取部分。**您已经在这方面做得很好，因为您已经为不同的功能提供了单独的样式表。更进一步，提取独立的规则集，使其更易于管理，并将重构项目分解为更小的步骤。

2.  **分析风格。**在新的分部中寻找重复的模式和继承关系。无论哪里有选择器重复，都可能是开始下一步的好地方。

3.  **提取基类。**这是你用[`@extend`](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#extend). 将重复的声明提取到基类中并扩展。

4.  **应用嵌套。** [嵌套](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#nested_rules)是一个很棒的 Sass 特性，可以让你的样式表更容易阅读。

5.  **提取混合。**如果您在第 2 步中找到了常见的样式模式，那么是时候将它们提取到[mixins](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins)中了。

现在您可以真正开始利用 Compass 及其可重用模式了。熟悉[Compass 文档](http://compass-style.org/reference/compass/)将有助于确定哪些 mixin 适用于您的项目。

# ms-access - 使用变量运行查询的 MS Access 表单

> ID：10719353
> 
> 赞同：2
> 
> 时间：2012-05-23T11:53:51.883
> 
> 标签：ms-access, ms-access-2007

您可以将变量传递给将填充组合框的查询吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:57:15.843

您可以通过多种方式设置组合框的行源。例如，您可以在当前事件中包含以下内容：

```
 Me.ComboX.RowSource = _
    "SELECT ID, Description FROM Table WHERE AText='" & MyVar & "'" 
```

或者，您可以在代码或设计视图中引用表单：

```
 SELECT ID, Description FROM Table WHERE AText=Forms!AnOpenForm!AControl 
```

您可能还希望考虑级联组合框：[是否有一种简单的方法可以在此 Access 数据库模式中填充下拉列表？](https://stackoverflow.com/questions/927256/is-there-a-simple-way-of-populating-dropdown-in-this-access-database-schema/927588#927588)

# javascript - Require.js 嵌套需求

> ID：10719355
> 
> 赞同：4
> 
> 时间：2012-05-23T11:53:54.280
> 
> 标签：javascript, jquery, requirejs

我正在尝试使用 requireJS，但我想构建依赖关系的层次结构：`main`需要`obr.platcom`和`obr.platcom`需要`obr`（例如）。

我有这个文件层次结构：

```
- index.html
-> js
   - main.js
   -> lib
      - jquery.js
      - require.js
   -> obr [my own 'libraries']
      - obr.js
      - obr.platcom.js 
```

索引.html

```
<!DOCTYPE html>
<html lang="es">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="initial-scale=1.0, width=device-width" />
        <title>Platcom</title>
        <script type="text/javascript" src="js/lib/jquery.js"></script>
        <script data-main="js/main" src="js/lib/require.js"></script>
    </head>
    <body>
    </body>
</html> 
```

main.js

```
$(document).ready(function() {
    require(["obr/obr.platcom"], function() {
        obr.hola();
        var myPlatcom = obr.platcom();
        myPlatcom.test();
    });
}); 
```

obr.js

```
var obr = {};
obr.hola = function() {
    alert('Hola OBR');
}; 
```

obr.platcom.js

```
require(["obr.js"],function() {
    obr.platcom = function(params) {
        var that = {};

        var test = function test() {
            alert('Hola Platcom!');
        }

        that.test = test;
        return that;
    }
}); 
```

如果我在所有作品中都需要`obr`和`obr.platcom`文件`main`，但如果我使用这种嵌套样式，我会收到下一个错误：

```
Uncaught ReferenceError: obr is not defined       main.js:3 
```

你知道我做错了什么吗？先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T12:04:01.813

好吧，你做错了几件事。

1.  您需要将要注入的依赖项指定为参数。例如，除非您指定*如何*调用所需的模块，`require(["obr/obr.platcom"], function() {`否则不会做太多事情。你应该需要这个：

     *```
    require(["obr/obr.platcom"], function( obr ) { 
    ```

    这样，您就知道所需对象在哪个变量中。* 
**   `obr.js`变量在全局范围内。您需要将它们包装在`require`or`define`函数调用中。以下将起作用：

    ```
    define(function() {
        var obr = {};
        obr.hola = function() {};
        return obr;
    }); 
    ```

    您可能已经注意到上一个文件存在一些问题。

    *   如果你希望你的模块被导入到某个地方，你必须**定义**它。所以你必须使用这个`define`功能，而不是那个`require`。并且该`define`函数必须返回一个对象。这是一个固定的`obr.platcom.js`文件：

    ```
    // If you don't use "define" for the obr.js file too, this won't work
    define(['obr'], function( obr ) {
        obr.platcom = function() {};

        // Don't forget to return the obr object, or the require of
        // the main file won't return anything
        return obr;
    }); 
    ```* 

 *这样，事情就以正确的方式完成了。或者至少，require.js 希望你做事的方式。

我希望这能告诉你如何有效地使用 require.js 来轻松地将你的代码分离到模块中:)*

# python - 如何在pylab中调整图像大小

> ID：10719361
> 
> 赞同：1
> 
> 时间：2012-05-23T11:54:22.427
> 
> 标签：python, matplotlib

每当我生成图像时，使用 pylab 手动缩放它非常容易，即在我们打算放大的区域周围绘制一个矩形。我想知道是否可以对这个操作进行编码。

这是一个示例代码，我在其中生成了一个 100x100 的图像，每行都有随机值：

```
from random import *
from pylab import *
from numpy import *

a=ones((100,100))
image=array([dummy*random() for dummy in a])

imshow(image,extent=[0,1]+[5,6]) 
```

在上面的示例中，我们的图像在 x 轴上从 0 延伸到 1，在 y 轴上从 5 延伸到 6。如何在图像上显示缩放，比如说在 0.5 区域

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:02:49.460

您可以使用[scipy.ndimage.interpolation.zoom()](http://docs.scipy.org/doc/scipy/reference/ndimage.html#module-scipy.ndimage.interpolation)来调整数组大小。

编辑：

对不起，我误解了你的问题。您可以使用`xlim()`and`ylim()`来设置 X 和 Y 轴的范围：

```
import numpy as np
import pylab as pl

y, x = np.ogrid[-1:1:100j, -1:1:100j]
z = np.sin(4*(x**2+y**2))

pl.imshow(z, origin="lower", extent=(-1,1,-1,1))
pl.xlim(-0.5, 0)
pl.ylim(0.5, 1.0)
pl.show() 
```

# screen-resolution - 是否可以根据用户的分辨率缩放整个固定页面？

> ID：10719365
> 
> 赞同：0
> 
> 时间：2012-05-23T11:54:44.797
> 
> 标签：screen-resolution

是否可以制作一个 1600px900px 的页面，所有测量值都固定为像素，然后如果用户宽度太小，则添加代码以缩小所有内容？

我不是要求流畅的 CSS，因为我已经制作了一个固定宽度的页面。我无法更改所有测量值，但仍然需要找到一种方法来缩小较小显示器的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T18:07:18.560

这段代码成功了。

```
document.body.style.zoom = screen.width / 1600 + '';
document.body.style.MozTransform = screen.width / 1600 + '';
document.body.style.MozTransformOrigin = '0 0';
document.body.style.OTransform =  screen.width / 1600 + '';
document.body.style.OTransformOrigin = '0 0';
document.body.style.WebkitTransform = screen.width / 1600 + '';
document.body.style.WebkitTransformOrigin = '0 0'; 
```

# jquery - 检查验证错误

> ID：10719366
> 
> 赞同：0
> 
> 时间：2012-05-23T11:54:46.523
> 
> 标签：jquery, asp.net

我的 aspx 页面中有两个选项卡，每个页面中有 5 个控件，并且有一个`single save`用于这两个选项卡的按钮。

所有 10 个字段都是必需的，所以在`required field validator`这里使用，假设用户填写第一个选项卡中的所有字段并按`save`，什么都不会发生，因为在第二个选项卡中触发了必填字段验证器。

对于这种情况，我需要告诉他们填写第二个选项卡中的字段。

我计划检查两个选项卡中是否发生任何验证错误，如果是，那么我可以使用 jQuery 弹出一个弹出窗口，如果那里没有验证错误，那么我需要调用按钮单击事件。但我不知道如何做到这一点。

谁能给我一些更好的主意，或者如何检查特定选项卡中是否有任何验证错误？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:12:35.537

为什么不为每个选项卡使用不同的验证组，并在选项卡 1 上有一个下一个按钮。选项卡 1 上的下一个按钮将附加到“ValidationGroupForTab1”，因此它会在选项卡移出之前验证选项卡。然后只有选项卡 2 有提交按钮。

或者你可以在按下提交时做这样的事情..

```
Validate("ValidationGroupForTab1") 
 Validate("ValidationGroupForTab2"). 
```

确定两个选项卡上的信息是否有效，并为每个选项卡提供有关选项卡区域的验证摘要，并检查 Page.IsValid。

这绝对不是一个具体的答案，但它可能会给你一些想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:28:35.823

您可以使用`ValidationGroup`的属性`Required Field validator.`

为 Ist Tab设置相同`ValidationGroup`，并为第二个选项卡设置另一个`ValidationGroup`。当用户单击时，`'Next' button`只会调用第一个选项卡验证。

# cocoa - 托管层的 NSView 是否允许有子视图？

> ID：10719368
> 
> 赞同：7
> 
> 时间：2012-05-23T11:54:48.570
> 
> 标签：cocoa, core-animation, calayer, nsview

托管层的 NSView（因此您提供 CALayer 实例并设置它的 NSView `setLayer:`）显然可以包含子视图。为什么很明显？因为在 Apple 自己的[Cocoa Slides 示例代码项目](https://developer.apple.com/library/mac/#samplecode/CocoaSlides/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004072)中，您可以选中一个复选框，将其`AssetCollectionView`从 layer-backed 切换为 layer-hosting：

```
- (void)setUsesQuartzCompositionBackground:(BOOL)flag {
    if (usesQuartzCompositionBackground != flag) {
        usesQuartzCompositionBackground = flag;

        /* We can display a Quartz Composition in a layer-backed view tree by 
           substituting our own QCCompositionLayer in place of the default automanaged 
           layer that AppKit would otherwise create for the view.  Eventually, hosting of 
           QCViews in a layer-backed view subtree may be made more automatic, rendering 
           this unnecessary.  To minimize visual glitches during the transition, 
           temporarily suspend window updates during the switch, and toggle layer-backed 
           view rendering temporarily off and back on again while we prepare and set the 
           layer.
        */
        [[self window] disableScreenUpdatesUntilFlush];
        [self setWantsLayer:NO];
        if (usesQuartzCompositionBackground) {
            QCCompositionLayer *qcLayer = [QCCompositionLayer compositionLayerWithFile:[[NSBundle mainBundle] pathForResource:@"Cells" ofType:@"qtz"]];
            [self setLayer:qcLayer];
        } else {
            [self setLayer:nil]; // Discard the QCCompositionLayer we were using, and let AppKit automatically create self's backing layer instead.
        }
        [self setWantsLayer:YES];
    }
} 
```

在同一个`AssetCollectionView`类中，为每个应该显示的图像添加子视图：

```
- (AssetCollectionViewNode *)insertNodeForAssetAtIndex:(NSUInteger)index {
    Asset *asset = [[[self assetCollection] assets] objectAtIndex:index];
    AssetCollectionViewNode *node = [[AssetCollectionViewNode alloc] init];
    [node setAsset:asset];
    [[self animator] addSubview:[node rootView]];
    [nodes addObject:node];

    return [node autorelease];
} 
```

当我构建并运行应用程序并使用它时，一切似乎都很好。

但是，在[Apple 的 NSView 类参考中，`setWantsLayer:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setWantsLayer:)它读取的[方法是：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setWantsLayer:)

> 使用图层托管视图时，您不应依赖视图进行绘图，也不应将子视图添加到图层托管视图。

什么是真的？示例代码是否不正确，它的工作原理只是巧合？或者文件是假的（我怀疑）？还是因为子视图是通过动画代理添加的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T23:24:57.777

当 AppKit 是“层托管”时，我们假设您可能（或可能没有）拥有 AppKit 不知道的整个层子树。

如果您将子视图添加到图层托管视图，则它可能不会以您想要的正确同级顺序出现。另外，我们有时会添加和删除它们，因此它可能会根据您何时调用 setLayer:、setWantsLayer: 或何时从父视图中添加或删除视图而改变。在 Lion（和之前）上，当视图从窗口（或超级视图）中移除时，我们会移除我们“拥有”的层（即：支持层）。

添加子视图是可以的……如果您有不是 NSViews 的兄弟层，它们在子层数组中的子兄弟顺序可能不是确定性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:05:13.607

我不知道这个问题的“正确”答案是什么。但我确实认为 CocoaSlides 示例在文档说你“不应该”做的范围内有效。在示例中，查看`insertNodeForAssetAtIndex:`调用该方法的位置，您会发现它仅在视图被填充时发生，*在*它被分配一个层或调用 setWantsLayer: 之前。

文档并没有说图层托管视图不能包含任何子视图，他们只是说您不能*将*子视图添加到其中。在添加这些子视图的时间点，主视图尚未成为图层托管视图。通过为其分配手动创建的图层将其转换为图层托管视图后，不再添加子视图。

所以文档和这个特定的例子之间真的没有矛盾。话虽如此，进一步探索这一点可能会很有趣，也许从一开始就打开 QC 背景层，例如通过`[self setUsesQuartzCompositionBackground:YES];`在里面粘贴一个 right `initWithFrame:`。

**SPOLIER ALERT：** 它似乎工作得很好。显示的创建有点慢（所有 QC 动画正在进行中并不奇怪），但除此之外它是一帆风顺的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T17:49:06.430

Apple 对这段代码的一条评论：它被破坏了。

首次启动应用程序时，请注意漂亮的渐变背景。打开 QC，然后关闭。

噗，没有渐变背景了。

# ruby-on-rails - 引用用户的多态关联

> ID：10719379
> 
> 赞同：1
> 
> 时间：2012-05-23T11:55:07.917
> 
> 标签：ruby-on-rails, testing, polymorphism

我已经设置了项目、任务和子任务，所有这些都是可评论的。我创建了评论模型并连接了模型，但不知道如何正确验证用户 ID 以及如何使用 Rpsec 和 Factory Girl 测试模型代码。我也在使用设计。

**评论迁移**

```
 1 class CreateComments < ActiveRecord::Migration
  2   def change               
  3     create_table :comments do |t|   
  4       t.references :user, :null => false
  5       t.text :comment,  :null => false,
  6                         :limit => 500                   
  7       t.references :commentable, :polymorphic => true
  8         # upper line is a shortcut for this
  9         # t.integer :commentable_id     
 10         # t.string :commentable_type    
 11       t.timestamps         
 12     end                    
 13     add_index :comments, :user_id   
 14     add_index :comments, :commentable_id
 15   end
 16 end 
```

**评论模型**

```
1 class Comment < ActiveRecord::Base
  2         
  3   # RELATIONSHIPS   
  4   belongs_to :commentable, :polymorphic => true
  5   belongs_to :user
  6   # VALIDATIONS            
  7   validates :user, :presence => true
      validates :commentable, :presence => true
  8   validates :comment, :presence => true,
  9                       :length => { :maximum => 500 }  
 10 
 11   # ATTRIBUTE ASSIGNMENT   
 12   attr_accessible :comment 
 13   
 14 end 
```

**用户模型**

```
 1 class User < ActiveRecord::Base
  2         
  3   # RELATIONSHIPS   
  4   has_many :synapses, :dependent => :destroy
  5   has_many :projects, :through => :synapses
  6 
  7   has_many :vesicles, :dependent => :destroy
  8   has_many :tasks, :through => :vesicles
  9 
 10   has_many :subvesicles, :dependent => :destroy
 11   has_many :subtasks, :through => :subvesicles, :dependent => :nullify
 12   
 13   has_many :comments, :dependent => :destroy
 14   
 15   # VALIDATIONS
 16   validates :name,  :presence => true,
 17                     :uniqueness => true             
 18 
 19   # ATTRIBUTE ASSIGNMENT   
 20   attr_accessible :name, :email, :password, :password_confirmation, :remember_me
 21 
 22   # DEVISE MODULES         
 23   # Include default devise modules. Others available are:
 24   # :token_authenticatable, :encryptable, :lockable, :timeoutable and :omniauthable
 25   devise :database_authenticatable, :registerable,
 26          :recoverable, :rememberable, :trackable, :validatable,
 27          :confirmable      
 28 
 29 end 
```

**评论工厂**

```
105   factory :comment do
106     comment "This is some generic comment with some generic content"
107   end 
```

**评论型号规格**

```
 1 require 'spec_helper'      
  2         
  3 describe Comment do
  4 
  5   it 'Should create new comment' do
  6     FactoryGirl.build(:comment).should be_valid
  7   end                      
  8 
  9   it 'Should respond to method provided by polymorphism to find its parent' do
 10     FactoryGirl.build(:comment).should respond_to(:commentable)
 11   end                      
 12 
 13 end 
```

此第一个测试当前失败，错误消息**为 #Comment:0xa88c354> 的未定义方法“用户”**。但是如果我像这样传递用户ID......

```
FactoryGirl.build(:comment, :user => confirmed_user).should be_valid 
```

比我应该将用户 ID 设置为可批量分配的属性，而我不希望这样（认为某些用户可能会弄​​乱该属性并更改它）。**如何正确测试和验证这一点？**另外，这是我第一次做多态，所以如果你看到任何愚蠢的事情，请告诉我。

编辑。我现在已经按照建议的一个答案这样做了。不幸的是，它返回相同的错误。

```
 5   it 'Should create new comment' do
  6     confirmed_user = FactoryGirl.build(:confirmed_user)
  7     FactoryGirl.build(:comment, :commentable => confirmed_user).should be_valid 
  8   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:08:12.277

尝试替换：

```
:user => confirmed_user 
```

和：

```
:commentable => confirmed_user 
```

**升级版：**

```
validates :user, :presence => true 
```

还必须是：

```
validates :commentable, :presence => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:12:48.457

模型评论应该有：

```
belongs_to :user 
```

# iphone - Flash Builder，导出版本构建错误

> ID：10719387
> 
> 赞同：1
> 
> 时间：2012-05-23T11:55:27.727
> 
> 标签：iphone, apache-flex, flash-builder, flex4.5

我无法从 flex 为 Apple ios 进行导出构建。尝试导出时出现以下错误。

![在此处输入图像描述](../Images/23a73a8f792867622ff3202b373604f8.png)

我该如何解决这个错误。我也能够成功地为 android 导出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:24:03.547

这个问题可能是由于您的弹性项目的一些特征：太多的类或链接的项目或资产等等。

几个月前，我们发布了一些[关于使用 Adob​​e AIR for iOS 进行开发的经常性问题](http://translate.google.es/translate?sl=es&tl=en&js=n&prev=_t&hl=es&ie=UTF-8&layout=2&eotf=1&u=http://nosmoke.cycle-it.com/2012/08/07/desarrollo-de-aplicaciones-con-adobe-air-para-ios-problemas-y-soluciones/&act=url)。博客文章是西班牙语，所以我链接到谷歌翻译的页面（我希望它是可读的）。

无论如何，我们在那里列出的内容如下：

1.  增加您的 java 堆大小内存（它对我们不起作用）。当你编译一个 flex 项目时，它使用在 java 中实现的 mxmlc 编译器（至少它的某些部分是在 java 中实现的）。提供更多内存可以使导出为您工作（但我不这么认为）。
2.  将您的 Adob​​e AIR SDK 版本切换到最新[版本 3.4](http://www.adobe.com/devnet/air/air-sdk-download.html)
3.  尝试使用 Mac OS 而不是 Windows 机器导出您的应用程序（如果您有可用的机器）。

希望这对您有所帮助。

# ruby-on-rails - 将数组分配给作为字符串的键？

> ID：10719389
> 
> 赞同：0
> 
> 时间：2012-05-23T11:55:42.500
> 
> 标签：ruby-on-rails, arrays

我有一个数组（Ruby on Rails），例如：

```
[{"name"=>"Start Time", "id"=>3, "value"=>"15:00"}, 
 {"name"=>"End Time",   "id"=>4, "value"=>"16:00"}] 
```

如何将此数组分配给一个键，使其看起来像：

```
{"custom_fields": [{"name"=>"Start Time", "id"=>3, "value"=>"15:00"}, 
                   {"name"=>"End Time",   "id"=>4, "value"=>"16:00"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:14:01.530

ruby [Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html) litteral 的正确语法是：

```
hash = { "string key" => value }
hash = { :symbol_key  => value } 
```

此语法仅适用于 ruby​​ > 1.9 和只有[符号](http://ruby-doc.org/core-1.9.3/Symbol.html)作为键的哈希：

```
hash = { symbol_key: value } 
```

ps：您可能应该深入研究一本好的 ruby​​ 书籍来学习基础知识。rubyist 中公认的参考书是[“pickaxe”](http://pragprog.com/book/ruby/programming-ruby)书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:43:38.273

你非常接近。`=>`就像另一位用户所说，如果您的哈希键是字符串，您将需要使用旧语法。

```
{"custom_fields" => [{"name"=>"Start Time", "id"=>3, "value"=>"15:00"}, 
                   {"name"=>"End Time",   "id"=>4, "value"=>"16:00"}]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:36:58.330

只需创建一个新的哈希并将您的数组分配给键`custom_fields`：

```
myHash = Hash.new
myHash['custom_fields'] = myArray 
```

另外，我建议您阅读有关哈希和数组的内容；它们在 Ruby 中不是一回事。
例如，如果您来自 PHP 背景，您可以假装散列是一个关联数组，而一个数组是……一个没有键的数组（例如`[:a, :b, :c]`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:00:08.160

不知道 ruby​​ on rails，但我从你写的内容中猜想是：

```
[{"custom_fields"=>{{"name"=>"Start Time", "id"=>3, "value"=>"15:00"}, {"name"=>"End Time", "id"=>4, "value"=>"16:00"}}}] 
```

# c# - c# 深度超过三的DataSet

> ID：10719390
> 
> 赞同：0
> 
> 时间：2012-05-23T11:55:43.780
> 
> 标签：c#, xml, dataset

我想使用 xml 文件来存储我的程序数据。xml 的结构如下所示：

```
<?xml version="1.0" standalone="yes"?>
<Data>
    <Projects>
        <Project>
            <Name>Name1</Name>
            <Description>Description1</Description>
        </Project>
        <Project>
            <Name>Name2</Name>
            <Description>Description2</Description>
        </Project>
    </Projects>
</Data> 
```

我想使用 a`DataSet`因为它提供了对 xml 结构的轻松读写。但问题是，如何读取和写入`<Project>`-Nodes 的值？我可以访问`<Projects>`-Node，但是我不知道如何继续，因为我猜单个项目不是表。那么，如何访问深度三（数据->项目->项目）中的节点？我认为这必须以某种方式工作，因为读取文件并将其输出到控制台上确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:02:59.727

您最好尝试使用具有对象列表的 Data 类 Project 更容易序列化/反序列化。我认为使用数据集读取/写入 xml 并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:03:08.663

而不是`DataSet`我建议您改用 XDocument 和 XElement，因为它们可以提供更好的 API 来访问 XML 结构中的项目。

[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

另一个可以帮助您入门的链接：

[如何从 XDocument 获取 XML 节点](https://stackoverflow.com/questions/752271/how-to-get-xml-node-from-xdocument)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:03:32.987

听起来这`DataSet`对你来说不是正确的方式。它不是用于读写任意 XML 的通用机制。

如果您使用的是 .NET Framework 4 或更高版本，我建议使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)而不是`DataSet`.

如果您使用的是较旧的 .NET Framework 版本，那么还有很多其他选项，包括[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)、[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)和[XmlSerlializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)。选择哪一个取决于您的数据来自哪里以及您希望如何处理它。

# android - 如果添加 x 和 y 坐标，为什么 MapView.LayoutParams MODE_VIEW 不起作用？

> ID：10719393
> 
> 赞同：0
> 
> 时间：2012-05-23T11:55:57.283
> 
> 标签：android, android-mapview, layoutparams

当我将 x 和 y 坐标添加到 MapView.LayoutParams 构造函数时。它的 MODE_VIEW 行为消失了。我想要这种行为以及 x 和 y 坐标。我不明白为什么会这样。

```
public void addMarkerToMAp(GeoPoint geoPoint) {
    mapView.removeAllViews();

    final ImageView view = new ImageView(mapView.getContext());
    view.setImageResource(R.drawable.map_marker_anim);
    view.post(new Runnable() {
        @Override
        public void run() {
            AnimationDrawable animationDrawable = (AnimationDrawable) view.getDrawable();
            animationDrawable.start();
        }
    });

    mapView.addView(view);
    MapView.LayoutParams layoutParams = new MapView.LayoutParams(MapView.LayoutParams.WRAP_CONTENT,
        MapView.LayoutParams.WRAP_CONTENT,
        geoPoint,
        MapView.LayoutParams.MODE_VIEW);
    view.setLayoutParams(layoutParams);
} 
```

所以，我得到了 geoPoint 作为

geoPoint = mapView.getProjection().fromPixels((int)event.getX(), (int)event.getY()); 其中事件是点击事件。

我还想在（event.getX（），event.getY（））处显示标记图钉，但它显示在点击下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:09:39.653

如果您在 Eclipse 中编码，请按 ctrl+shift+f。这将使您的代码更具可读性。话虽如此，当您显示标记时，您使用哪些点？如果我没有错，那么您将插入的点将是左下角（如果它是覆盖可绘制的）。

左上角，如果它是一个视图（我认为这就是你在做什么），因此它会出现在你的点击下。

您可以添加一个 offsetx 和 offsety 到它是 -view.getWidth()/2 和 -view.getHeight/2。然后应该使您的视图直接位于您按下的点下方。但是，您可能无法获取 view.getWidth/Height，因此请确保它不返回 0。

# android - 在上一个动画运行时在片段之间切换

> ID：10719401
> 
> 赞同：2
> 
> 时间：2012-05-23T11:56:48.910
> 
> 标签：android, android-fragments, android-animation

我有一个 TabManager 触发片段之间的过渡，并带有漂亮的滑动动画。

如果我在切换到下一个选项卡之前等待每个转换的动画完成，这会很好地工作。但是，如果我决定快速切换选项卡，那么动画似乎会相互冲突，并且我的片段最终会以错误的方向制作动画。

有什么方法可以取消在开始新的过渡时可能仍在之前过渡上运行的任何动画？

我的代码如下：

> @Override public void onTabChanged(String tabId) {
> 
> ```
>  hostActivity.getSupportFragmentManager().popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
> 
>         TabInfo newTab = tabs.get(tabId);
>         if (lastTab != newTab) {
>             FragmentTransaction ft = hostActivity.getSupportFragmentManager().beginTransaction();
> 
>             if (newTab != null) {
>                 if (newTab.fragment == null) {
>                     newTab.fragment = Fragment.instantiate(hostActivity, newTab.clss.getName(), newTab.args);
>                 }
>             }
> 
>             if(lastTab != null && newTab != null)
>             {
>               if(lastTab.index < newTab.index)
>               {                       
>                   ft.setCustomAnimations(R.anim.slide_in_from_right, R.anim.slide_out_to_left);
>               }
>               else
>               {
>                   ft.setCustomAnimations(R.anim.slide_in_from_left, R.anim.slide_out_to_right);
>               }
>             }
> 
>             ft.replace(containerID, newTab.fragment);
> 
>             ft.commit(); 
> ```

# algorithm - 在 Three.js 中是否自动进行剪辑？

> ID：10719403
> 
> 赞同：3
> 
> 时间：2012-05-23T11:56:58.837
> 
> 标签：algorithm, 3d, webgl, three.js, clipping

所以，我正在阅读[这篇](http://en.wikipedia.org/wiki/Clipping_%28computer_graphics%29)维基百科文章中的剪辑。它似乎对所有游戏都非常重要，所以，我必须这样做，还是由 Three.js 甚至 WebGL 自动完成？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T13:15:22.523

您可以将近剪裁平面和远剪裁平面的值传递给相机对象：

```
var camera = new THREE.PerspectiveCamera( fov, aspect, near, far ); 
```

例如，近和远可以包含值`near = 0.1`，`far = 10000`因此将呈现位于这些值之间的对象。

编辑：

近和远，代表您的世界的剪裁平面。在一个同时绘制数千个对象和纹理的场景中，尝试显示所有内容会占用 CPU 和 GPU 的资源。更糟糕的是，画你甚至看不到的东西会很浪费。近剪裁平面通常相对靠近用户，而远剪裁平面在远处某处。当物体穿过远平面时，它们会自发地出现或消失。一些游戏使用雾来使物体的出现和消失更加逼真。

# php - 调用一个表示为字符串的函数？

> ID：10719405
> 
> 赞同：0
> 
> 时间：2012-05-23T11:57:07.273
> 
> 标签：php, string, function-calls

我可以调用一个表示为字符串的方法吗？

例子：

```
$function = '$this->myfunction($myparam)'; 
```

我怎么能用 myparam 调用 myfunction？可能的？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:40:59.997

你可以使用`call_user_func();`PHP的功能。

例如。，

```
function callMe($message)
{
echo "My Function was called with arg:".$message;
} 
```

你可以这样称呼它

```
call_user_func("callMe","MyMessage"); 
```

它将返回函数返回的任何值。

此外，如果您想使用多个参数或数组调用，您可以使用

`call_user_func_array()`

[希望您可以在www.php.net](http://www.php.net/manual/en/function.call-user-func.php)中获得这些的详细实现

# wpf - Kinect SDK 1.5 - 人脸跟踪：WPF 跟踪问题

> ID：10719410
> 
> 赞同：2
> 
> 时间：2012-05-23T11:57:24.207
> 
> 标签：wpf, kinect

我正在使用 Kinect（Microsoft 官方）的新人脸跟踪 SDK，我注意到 c++ 和 c#-wpf 示例之间的检测存在差异：第一个比第二个（我想要实际上使用）。在 c++ 版本中，面部跟踪几乎是即时的，而在 wpf 版本中，它仅在我将整个身体（所以整个骨架）放在 Kinect 的 FOV 中时才开始。

有没有人发现原因？我注意到提供的骨架框架显示了属性“Trackingmode = default”，即使我将 kinect 骨架流设置为坐姿。

```
colorImageFrame.CopyPixelDataTo(this.colorImage);
depthImageFrame.CopyPixelDataTo(this.depthImage);
skeletonFrame.CopySkeletonDataTo(this.skeletonData);

// Update the list of trackers and the trackers with the current frame information
foreach (Skeleton skeleton in this.skeletonData)
{
   if (skeleton.TrackingState == SkeletonTrackingState.Tracked
       || skeleton.TrackingState == SkeletonTrackingState.PositionOnly)
   {
       // We want keep a record of any skeleton, tracked or untracked.
       if (!this.trackedSkeletons.ContainsKey(skeleton.TrackingId))
       {
           this.trackedSkeletons.Add(skeleton.TrackingId, new SkeletonFaceTracker());
       }

          // Give each tracker the upated frame.
          SkeletonFaceTracker skeletonFaceTracker;
          if (this.trackedSkeletons.TryGetValue(skeleton.TrackingId, 
                                                out  skeletonFaceTracker))
          {
             skeletonFaceTracker.OnFrameReady(this.Kinect, 
                                              colorImageFormat, 
                                              colorImage, 
                                              depthImageFormat, 
                                              depthImage, 
                                              skeleton);
             skeletonFaceTracker.LastTrackedFrame = skeletonFrame.FrameNumber;
          }
    }
} 
```

该代码是为我的微软提供 1.5 SDK 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:37:39.530

我在其他论坛上有一些信息，特别是这里（感谢这个人（[博客](http://nsmoly.wordpress.com/)））：

[MSDN 论坛链接](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/a63d2a40-ad14-46d4-8d91-a84c5ef61dd1/#1a3ec31d-6114-4bd3-98df-b5be15ee4d06)

基本上，在 c++ 示例中使用了所有跟踪面部的方法，包括颜色+深度和颜色+深度+骨架，而在 c# 中仅使用后者。所以它只有在你站起来时才开始。

我做了一些测试，但另一种方法仍然不适合我，我对代码做了一些修改，但没有运气。这是我的修改：

```
internal void OnFrameReady(KinectSensor kinectSensor, ColorImageFormat colorImageFormat, byte[] colorImage, DepthImageFormat depthImageFormat, short[] depthImage)
        {
            if (this.faceTracker == null)
            {
                try
                {
                    this.faceTracker = new Microsoft.Kinect.Toolkit.FaceTracking.FaceTracker(kinectSensor);
                }
                catch (InvalidOperationException)
                {
                    // During some shutdown scenarios the FaceTracker
                    // is unable to be instantiated.  Catch that exception
                    // and don't track a face.
                    //Debug.WriteLine("AllFramesReady - creating a new FaceTracker threw an InvalidOperationException");
                    this.faceTracker = null;
                }
            }

            if (this.faceTracker != null)
            {
                FaceTrackFrame frame = this.faceTracker.Track(
                    colorImageFormat,
                    colorImage,
                    depthImageFormat,
                    depthImage,
                    Microsoft.Kinect.Toolkit.FaceTracking.Rect.Empty);
                    //new Microsoft.Kinect.Toolkit.FaceTracking.Rect(100,100,500,400)); 

                this.lastFaceTrackSucceeded = frame.TrackSuccessful;
                if (this.lastFaceTrackSucceeded)
                {
                    if (faceTriangles == null)
                    {
                        // only need to get this once.  It doesn't change.
                        faceTriangles = frame.GetTriangles();
                    }

                    this.facePointsProjected = frame.GetProjected3DShape();

                    this.rotationVector = frame.Rotation;
                    this.translationVector = frame.Translation;
                    this.faceRect = frame.FaceRect;
                    this.facepoints3D = frame.Get3DShape();
                }
            }
        } 
```

frame.TrackSuccessful 总是假的。任何的想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T06:33:02.807

我终于想通了，并在 MSDN 论坛上发表了一篇关于还需要做些什么才能使其正常工作的帖子。

[它在这里。](http://social.msdn.microsoft.com/Forums/en-US/kinectsdkfacetracking/thread/a63d2a40-ad14-46d4-8d91-a84c5ef61dd1#48fdf044-51ed-42c6-a418-24b07724300a)

希望有帮助！

# java - FileReader：“读取”示例

> ID：10719420
> 
> 赞同：-4
> 
> 时间：2012-05-23T11:58:05.127
> 
> 标签：java, file, file-io

该类`FileReader`用于对字符执行 I/O。

我尝试读取放置在目录中并在 FileReader 构造函数中作为参数传递的文件。该文件包含一些字符值，例如`abcd`.

当我尝试从`FileReader`with`read`方法中读取时，它以 ASCII 格式返回值，而`FileReader`用于字符。为什么会这样？如果采用unide概念，那么当我们从文件中读取字符时，它必须转换为字符。但这不会发生。

文件“xyz.txt”中的数据是“abcd”。

代码：

```
File h=new File("d:/xyz.txt");
FileReader j=new FileReader(l);
for(int i=0;i<h.length;i++)
{
  System.out.println(j.read());
} 
```

我希望它打印“abcd”。相反，它打印 ASCII 值，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:00:55.533

因为合同上[`Reader`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Reader.html#read%28%29)说应该。您可以使用`read(char[] buf)`直接读取字符。

# ios - 如何在后台线程中准备我的 UI？

> ID：10719424
> 
> 赞同：1
> 
> 时间：2012-05-23T11:58:10.773
> 
> 标签：ios, multithreading, cocoa-touch

A`UIViewController`需要大约半秒来加载其内容并出现在屏幕上。我怎样才能让它们全部加载到后台并在它们准备好时出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:06:55.630

Apple 开发者网站上有一个[LazyTableImages示例。](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

它展示了如何在后台线程中执行繁重的工作并在主线程上更新 UI。

`PerformSelectorInBackground:withObject:`是一种可能的解决方案，尽管更现代的方法是使用异步块。您可以从这些块中在主线程上运行代码以安全地更新 UI。

[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)是查找更多信息和示例的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:28:34.660

后台线程不能更新UI，你可以在后台线程中执行所有的处理逻辑并调用主线程进行UI更新

使用数据加载 tableView 的示例，使用后台线程处理所有内容并加载数据，`[tableView reloadData]`使用主线程调用，请参阅 Grand Central Dispatching 以了解如何在 IOS 中使用线程。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T14:24:27.270

创建一个 GCD 队列以在后台线程中处理您的工作（阅读文档，因为我的“创建”标签和选项可能不是您想要的）。

您将它异步发送到队列，这意味着对 dispatch_async 的调用将对您提供给它的代码块进行适当的安排，以便在另一个线程中运行，然后它将“立即”返回给您。

您给它的块中的所有工作都将在单独的线程上执行。请注意，最后，您再次调用，这次调用的是众所周知的主队列。这安排该代码在主线程中运行，这对于任何 UI 工作都是必需的。

此外，您真的应该阅读有关 GCD 的文档，尤其是块，因为有内存和周期方面的考虑。祝你好运。

```
dispatch_queue_t workQ = dispatch_queue_create("bgWorkQ", 0);
dispatch_async(workQ, ^{
    // This code is now running in a background thread.
    // Do all your loading here...
    // When ready to touch the UI, you must do that in the main thread...
    disptach_async(dispatch_get_main_queue(), ^{
        // Now, this code is running in the main thread.
        // Update your UI...
    });
});
dispatch_release(workQ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:00:55.117

最简单的方法是使用 NSObject 的`- (void)performSelectorInBackground:(SEL)aSelector withObject:(id)arg`您只需将选择器传递给它，它就会在后台运行并且不会阻塞您的 UI。但是请注意，后台线程有一些规则。

您不应该从后台线程更新您的 UI。你需要确保你调用的方法是线程安全的。

# android - 外键约束ON DELETE CASCADE在android上的sqlite数据库中不起作用

> ID：10719425
> 
> 赞同：13
> 
> 时间：2012-05-23T11:58:12.840
> 
> 标签：android, sqlite, foreign-key-relationship

我有如下创建的“天”表

```
"create table days(" +
            "day_id  integer primary key autoincrement, " +
            "conference_id integer , " +
            "day_date text, " +
            "day_start_time text, " +
            "day_end_time text, " +
            "day_summary text, " +
            "day_description text)"; 
```

我有如下创建的轨道表

```
CREATE_TABLE_TRACK = "create table track(" +
        "track_id integer primary key autoincrement," +
        "day_id integer,"+
        "track_name text," +
        "track_description text," +
        " FOREIGN KEY(day_id) REFERENCES days(day_id) ON DELETE CASCADE )"; 
```

如上所示，我有外键 day_id 引用表天的 day_id ...

所以我想要的是，如果我删除那一天，那么相应的曲目也应该被删除......但在我的情况下不会发生......

我有版本**3.5.9的 sqlite**

而且我还在我的助手类中添加了 1 行作为

**> db.execSQL("PRAGMA foreign_keys=ON;");**

但仍然无法正常工作..请帮帮我..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T12:15:44.587

直到 Sqlite 版本 3.6.19 才支持级联删除，该版本首次包含在 Android 2.2 中。

幸运的是有一个替代方案。

您可以在创建表查询下面执行另一个查询，如下所示：

```
db.execSQL("CREATE TRIGGER delete_days_with track BEFORE DELETE ON track "
       +  "FOR EACH ROW BEGIN"
       +         " DELETE FROM days WHERE track.day_id = days.day_id "
       +  "END;"); 
```

请注意，这`delete_days_with_track`只是一个描述触发器功能的名称，这只是我使用的模式；我相信你可以随意命名它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:13:18.597

根据[SQLite 文档](http://www.sqlite.org/foreignkeys.html)，直到 3.6.19 才添加对外键的支持。

使用 3.5.9，您必须以其他方式进行级联删除。

# php - PHP中重定向前的等待时间

> ID：10719426
> 
> 赞同：3
> 
> 时间：2012-05-23T11:58:17.273
> 
> 标签：php, redirect, refresh

这是我在第 1 页的代码：

```
session_start();
if(isset($_SESSION[$login])){
    header("Refresh: 5; location:page2.php");
    echo "Welcome back!";
} 
```

我认为这是在暂停 5 秒后在 page2 上进行重定向的方法，其中用户可以看到“欢迎回来”消息。我错了吗？

我的代码的结果是登录的正确识别，随后显示 echo "Welcome Back"，但重定向没有发生。我永远留在第1页。

错误在哪里？

ps：我搜索了类似的帖子，但我无法解决问题，所以我在这里发布，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:02:58.180

我相信你需要使用`url=`而不是`location:`

```
header("Refresh: 5; url=page2.php"); 
```

不幸的是，这是一种非标准的重定向方式（而且不是一个很好的方式），所以我一直找不到任何文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T09:34:59.630

```
session_start();    
if(isset($_SESSION[$login])){    
   header("Refresh: 5;page2.php");    
   echo "Welcome back!";     
} 
```

这是我检查的代码。在 page2.php 中，您应该使用相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:01:15.337

尝试使用 JavaScript 来执行此操作。

这是一个关于使用 javascript 重定向的好教程：[http ://www.tizag.com/javascriptT/javascriptredirect.php](http://www.tizag.com/javascriptT/javascriptredirect.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:04:49.963

这可能是因为您使用`"location"`的是`"url"`.

尝试这个：`header("Refresh: 5; URL=page2.php");`

`"location"`在 Javascript 中用于执行重定向。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-23T12:00:10.563

使用php的睡眠功能。这应该可以完成工作：

```
session_start();
if(isset($_SESSION[$login])){
sleep(5);
header("location:page2.php");
echo "Welcome back!";
} 
```

# c - 使用 CBLAS/LAPACK 在 C 中进行对称矩阵求逆

> ID：10719427
> 
> 赞同：2
> 
> 时间：2012-05-23T11:58:27.353
> 
> 标签：c, lapack, blas, accelerate-framework, matrix-inverse

我正在用 C 语言编写一个需要矩阵和向量乘法的算法。我有一个矩阵***Q*** (W x W)，它是通过将向量***J*** (1 x W) 的转置与自身相乘并添加单位矩阵***I***来创建的，使用标量***a***进行缩放。

Q = [(J^T) * J + aI]。

**然后我必须将Q 的倒数**与**向量 G**相乘以得到向量**M**。

M = (Q^(-1)) * G。

我正在使用*cblas*和*clapack*来开发我的算法。当矩阵**Q**使用随机数（浮点类型）填充并使用例程*sgetrf_*和*sgetri_*进行反转时，计算的逆是**正确**的。

**但是当矩阵 Q 是对称**的时，当你乘以 (J^T) x J 时，计算的**逆是错误的！**.

*在从 C 调用lapack*例程时，我知道数组的行优先（在 C 中）和列优先（在 FORTRAN 中）格式，但是对于对称矩阵，这应该不是问题，因为 A^T = A.

我在下面附上了矩阵求逆的 C 函数代码。

我相信有更好的方法来解决这个问题。谁能帮我这个？

使用 cblas 的解决方案会很棒......

谢谢。

```
void InverseMatrix_R(float *Matrix, int W)
{   
    int     LDA = W;
    int     IPIV[W];
    int     ERR_INFO;
    int     LWORK = W * W;
    float   Workspace[LWORK];

    // - Compute the LU factorization of a M by N matrix A
    sgetrf_(&W, &W, Matrix, &LDA, IPIV, &ERR_INFO);

    // - Generate inverse of the matrix given its LU decompsotion
    sgetri_(&W, Matrix, &LDA, IPIV, Workspace, &LWORK, &ERR_INFO);

    // - Display the Inverted matrix
    PrintMatrix(Matrix, W, W);

}

void PrintMatrix(float* Matrix, int row, int colm)
{
    int i,k;

    for (i =0; i < row; i++) 
    {
        for (k = 0; k < colm; k++) 
        {
            printf("%g, ",Matrix[i*colm + k]);
        }

        printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T14:27:34.750

我不知道 BLAS 或 LAPACK，所以我不知道是什么导致了这种行为。

但是，对于给定形式的矩阵，计算逆很容易。重要的事实是

```
(J^T*J)^2 = (J^T*J)*(J^T*J) = J^T*(J*J^T)*J = <J|J> * (J^T*J) 
```

where`<u|v>`表示内积（如果组件是实数 - 复杂组件的规范*双线性*形式，但是您可能不会考虑转置，而是考虑共轭转置，并且您会回到内积）。

概括，

```
(J^T*J)^n = (<J|J>)^(n-1) * (J^T*J), for n >= 1. 
```

让我们用 表示对称方阵`(J^T*J)`，用表示`S`标`<J|J>`量`q`。然后，对于`a != 0`绝对值足够大的一般 ( `|a| > q`)：

```
(a*I + S)^(-1) = 1/a * (I + a^(-1)*S)^(-1)
               = 1/a * (I + ∑ (-1)^k * a^(-k) * S^k)
                           k>0
               = 1/a * (I + (∑ (-1)^k * a^(-k) * q^(k-1)) * S)
                            k>0
               = 1/a * (I - 1/(a+q)*S)
               = 1/a*I - 1/(a*(a+q))*S 
```

That formula holds (by analyticity) for all `a` except `a = 0` and `a = -q`, as can be verified by calculating

```
(a*I + S) * (1/a*I - 1/(a*(a+q))*S) = I + 1/a*S - 1/(a+q)*S - 1/(a*(a+q))*S^2
                                    = I + 1/a*S - 1/(a+q)*S - q/(a*(a+q))*S
                                    = I + ((a+q) - a - q)/(a*(a+q))*S
                                    = I 
```

using `S^2 = q*S`.

That calculation is also much simpler and more efficient than first finding the LU decomposition.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:11:24.170

Example for 3x3 matrix inversion, visit [sgetri.f](http://www.netlib.org/lapack/single/sgetri.f) for more

```
//__CLPK_integer is typedef of int
//__CLPK_real is typedef of float

__CLPK_integer ipiv[3];
{
    //Compute LU lower upper factorization of matrix
    __CLPK_integer m=3;
    __CLPK_integer n=3;
    __CLPK_real *a=(float *)this->m1;
    __CLPK_integer lda=3;
    __CLPK_integer info;
    sgetrf_(&m, &n, a, &lda, ipiv, &info);
}

{
    //compute inverse of a matrix
    __CLPK_integer n=3;
    __CLPK_real *a=(float *)this->m1;
    __CLPK_integer lda=3;
    __CLPK_real work[3];
    __CLPK_integer lwork=3;
    __CLPK_integer info;
    sgetri_(&n, a, &lda, ipiv, work, &lwork, &info);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T08:25:13.510

You may want to try [Armadillo](http://arma.sourceforge.net), which is an easy to use C++ wrapper for LAPACK. It provides several inverse related functions:

*   [inv()](http://arma.sourceforge.net/docs.html#inv), general inverse, with an optional speedup for symmetric positive definite matrices
*   [pinv()](http://arma.sourceforge.net/docs.html#pinv), pseudo-inverse
*   [solve()](http://arma.sourceforge.net/docs.html#solve), solve a system of linear equations (that can be over- or under-determined), without doing the actual inverse

# php - 如何显示表格的选定单元格？

> ID：10719429
> 
> 赞同：0
> 
> 时间：2012-05-23T11:58:37.137
> 
> 标签：php, html, html-table, row, html-select

我有一个表格，它在 HTML 表格中显示来自 mysql 数据库的数据，如下所示：

![当前表结构](../Images/36f80c532d035af79bce89ca65fd2abc.png)

然后我想用复选框显示这样的：

![表结构看起来像](../Images/0dbf4cb55c58be20ec8a8558d319cf69.png)

在该用户选择一些行并提交之后，选择的行显示在下一页中，那么如何在 php 中使用 HTML 来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:15:39.313

这将使您开始：

```
<table>
<?php
while($r = mysql_fetch_array($q)) {
    ?>
    <tr>
        <td><?php echo $r['s_no']; ?></td>
        <td><?php echo $r['name']; ?></td>
        <td><input type="checkbox" name="selected_s_no[]" value="<?php echo $r['s_no']; ?>" /></td>
    </tr>
    <?php
}
?>
</table> 
```

在提交的页面上会有一个数组，您可以使用选定的`s_no`值访问

```
print_r($_REQUEST['selected_s_no']) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T12:19:19.110

```
<table>
<?php
while($r = mysql_fetch_array($q)) {
    ?>
    <tr>
        <td><?php echo $r['s_no']; ?></td>
        <td><?php echo $r['name']; ?></td>
        <td><input type="checkbox" name="selected_s_no[]" value="<?php echo $r['s_no']; ?>" /></td>
    </tr>
    <?php
}
?>
</table>

on submitting page you can use foreach with selected values

foreach($_POST['selected_s_no'] as $value)
{
    //show data according to selected checkbox 
} 
```

# c# - 在 wpf 中找不到 MainWindow.xaml 文件

> ID：10719430
> 
> 赞同：2
> 
> 时间：2012-05-23T11:58:37.153
> 
> 标签：c#, wpf

我在 Visual Studio 中创建了一个**MainWindow.xaml文件。**然后我点击运行它的工作良好。我创建了另一个名为**SecondMainWindow.xaml**的文件，现在我想将 SecondMainWindow.xaml 作为启动文件运行。但是当我单击运行时 MainWindow.xaml 文件正在打开。所以我从项目中排除了那个文件。现在，如果我单击运行，那么它会抛出一个错误说

**MainWindow.xaml 不存在**。

是的，这是真的，因为我已将它排除在我的项目之外。

但是我的问题是如何将**SecondMainWindow.xaml**作为单击运行时应首先打开的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:00:26.967

在标记`StartupUri`属性下的App.xaml 中`Application`更改`MainWindow.xaml`为`SecondMainWindow.xaml`.

```
<Application StartupUri = "SecondMainWindow.xaml" >

</Application> 
```

顺便说一句，不需要`MainWindow.xaml`从项目中删除。您可以拥有 n 个 xaml 文件。您在`StartupUri`属性中定义的是首先运行的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:02:34.393

在 App.xaml 中将 StartupUri 设置为 SecondMainWindow.xaml

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T12:03:46.403

转到 App.xaml 文件并将 StartupUri="MainWindow.xaml" 更改为 StartupUri="SecondMainWindow.xaml"

# c - pthreads/等待（&状态）

> ID：10719438
> 
> 赞同：4
> 
> 时间：2012-05-23T11:59:18.400
> 
> 标签：c, multithreading, pthreads

我读了一本书，给出了下一个例子：

```
int value=0
int thread_func(int id) {
   int temp;
   temp=value+id;
   printf("Thread%d value: %d", id, temp);
   value=temp;
}

int main() {
   int fork_id, status, i;
   pthread_t tids[3];
   fork_id=fork();
 if (fork_id == 0) {
   for (i=1; i≤3; i++) 
        pthread_create(&tids[i-1], NULL, thread_func, i);
      for (i=0; i≤2; i++)
        pthread_join(tids+i, &status);
      printf("Second process value: %d", value);
  }
 else {
  wait(&status);
      printf("First process value: %d", value)
      } 
```

我不明白两个主要的事情：当我阅读时，该行的唯一值`printf("First process value: %d", value)`是 0。但是为什么呢？wait(&status) 等待子进程终止。在这种情况下，它只会在所有连接完成后才会终止。意思是，当值为 6 时。

其次，在 line`printf("Second process value: %d", value);`中，值可以是 1 到 6。这也很奇怪，因为我们有 join 指令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:03:57.180

您的问题的答案：

1.  该值在父进程中将为 0，因为当`fork`发生这种情况时，父进程的地址空间在子进程中被复制（连同变量`value`）。因此，虽然`value`在孩子身上发生了变化，但这种变化并没有反映在父母身上，因为它们是不同的变量。

2.  由于不涉及同步，因此无法知道`value`三个子线程以何种顺序更改变量。具体来说，每个线程都有一个具有不同值的局部`temp`变量，然后将其复制到全局`value`变量中，但是这里无法知道线程将以哪个顺序`value`覆盖`temp`：`value = temp;`. 因此，它的值在执行之间可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:04:36.707

因为当你 fork 时，你会得到一个拥有自己内存的全新进程，这意味着一个进程中对变量的更改不会出现在另一个进程中。另一方面，线程共享它们的内存，这意味着线程程序中对变量的更改会显示在所有线程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:15:03.710

该值由子进程递增，因此父进程会将其值显示为 0。

```
if(fork_id == 0){
......
......
} 
```

is executed by the child which spawned threads.

And child process has different copy of memory. so increasing value in child does not mean the same for parent.

And threads have access to global values.

# c# - 架构和序列化建议

> ID：10719439
> 
> 赞同：1
> 
> 时间：2012-05-23T11:59:29.020
> 
> 标签：c#, .net, serialization

我需要一些架构帮助，我认为我一直在做的事情不一定是最好的方法。

注意事项：

*   这不是一个 android 特定的问题。
*   然而，Android 确实要求我需要跨“屏幕”序列化对象。

*考虑以下：*

我目前正在开发一款需要在不同屏幕之间传递角色类的 android 游戏。为了做到这一点，我需要序列化对象。考虑到将需要不同类型的字符，我想创建一个为每个字符继承的类。在我有静态字符的地方，我想从 Character 类继承并在构造函数中设置默认值，例如“名称”和“描述”。

*当前实施：*

我正在传递序列化的子类对象。（例如：具有 Character 基础的 UserCharacter ）理想的情况是我能够反序列化对象，因为它是基类，但在我看来这不起作用。我目前唯一可行的解​​决方案是在尝试进行序列化时执行以下操作：

```
new XmlSerializer(typeof (Character, new [] { typeof(CharacterUser)})); 
```

这允许我传入多个子类型。然而，这从长远来看是不可行的，因为它只是意味着在我的应用程序中重复代码，以及每次创建新的字符子类时，我都需要在需要反序列化的任何时候添加它。我宁愿编写代码并在我离开它的地方工作以做自己的事情。我相信你能理解这一点。

我尝试过的另一件事是在字符对象上使用 IXmlSerializable 并独立处理阅读和写作。我*认为*这需要实现一个列表才能正常工作？目前我的 ReadXml 永远不会被调用。（好主意，但到目前为止它对我不起作用）

有人有什么想法我可以尝试吗？

我认为这是一个非常开放的问题，如果我需要稍微不同的范围，请告诉我。

# java - 从累积函数或规则代码访问 drools 会话时钟

> ID：10719441
> 
> 赞同：2
> 
> 时间：2012-05-23T11:59:35.030
> 
> 标签：java, drools, drools-fusion

我正在尝试编写一个需要了解当前时间的累积函数。我显然可以使用 System.currentTimeMillis()，但是为了测试我正在运行一个带有伪时钟的 drools 会话，并且希望能够测试这个函数。

我正在寻找一种从 getResult() 方法中获取会话时钟（或者更好的是 KnowledgeRuntime）的方法，或者，如果那不可能，从 drools 代码本身（在 te when 部分中），所以我可以通过时钟功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:30:23.317

使用时钟时要小心，因为您可能会遇到很多惊喜。请注意，当事实/事件插入会话或使用更新/修改调用修改时，会评估约束。这意味着评估约束时的时钟时间可能与触发规则时的时钟时间不同。这就是为什么 drools 不会将当前时间直接暴露给 LHS 模式的原因。

话虽如此，这样做的方法是将会话时钟作为事实插入会话并将其绑定为任何其他事实：

```
rule X
when
    $clock : SessionClock()
    ... your patterns / accumulate / etc  ...
then
    ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T08:46:03.453

在单元测试期间，我发现添加`$clock : SessionClock()`to`when`会导致单元测试不触发 FWR（可能是因为我将它模拟为 a ，因此在工作内存`SessionPseudoClock`中没有事实）。`SessionClock`

`drools` `KnowledgeHelper`但是，通过使用实例，我能够在不需要条件绑定的情况下获得会话时钟（伪或真实） ：

例如

```
then
  System.out.println(String.format(
      "It is now %s", 
         new java.util.Date(drools.getWorkingMemory()
                                  .getSessionClock()
                                  .getCurrentTime())
         .toString())); 
```

# javascript - 使用 jQuery $.ajax 的 JSONP 响应/回调不起作用

> ID：10719443
> 
> 赞同：0
> 
> 时间：2012-05-23T11:59:38.137
> 
> 标签：javascript, jquery, ajax, jsonp

我无法使用`$.ajax`. 我得到一个错误`"SCRIPT ERROR"`。如何使用 JSONP 捕获响应？这就是我正在使用的：

```
$.ajax({
    async: true,
    context: mrq,
    cache: false,
    type: "GET",
    url: MYURL,
    crossDomain: true,
    dataType: 'jsonp',
    data: MYDATA,
    processData: false,
    jsonp: "jsonREQ",
    jsonpCallback: "onJSONPsuccess",
    success: function (jsonText, textStatus) {}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:52:07.707

据我了解，`dataType: 'jsonp'`这意味着一旦它返回，它就会作为参数放入回调函数中。所以，我会试试这个：

```
onJSONPsuccess = function(response) {
  // do something with response, e.g.
  results = response["results"]
}

$.ajax({
  crossDomain: true,
  dataType: 'jsonp',
  data: { /*params you're sending in*/ },
  jsonp: "jsonREQ",
  jsonpCallback: "onJSONPsuccess",
  success: onJSONPsuccess
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:30:21.790

你说服务器端是 C# - 你在使用 WCF 吗？这里有一篇很棒的文章：http: [//bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)

基本上，您需要设置 WCF（或您正在使用的任何服务器端代码）以返回包装在对回调函数的调用中的 json。

但是，使用 jquery，您可以简单地添加 "?Callback=?" 到您的 URL，将 dataType 更改为“jsonp”，然后忘记其余的内容。您不需要设置 jsonp 或 jsonpCallback 选项。

与 json 请求相比，jsonp 请求将返回*未*包含在“d”属性中的数据，因此您的回调函数是：

```
function(data) { var a = data.myProperty ... } 
```

而不是

```
function(data) { var a = data.d.myProperty ... } 
```

整个方法是这样的：

```
var url = configuration.serviceUrl + "/" + method + "?callback=?";

var options = {
    type: 'GET',
    url: url,
    data: args,
    dataType: "jsonp",
    contentType: "application/json",
    success: function(data) {
        if (callback != null) callback(data);
    }
};

if (typeof errorCallback != 'undefined')
    options.error = errorCallback;

$.ajax(options); 
```

# javascript - 替代使用 search 或 indexOf

> ID：10719451
> 
> 赞同：1
> 
> 时间：2012-05-23T12:00:05.057
> 
> 标签：javascript, conditional

与我的问题[有关](https://stackoverflow.com/questions/10706243/why-does-this-script-never-run)。

我有一个 JavaScript 语句如下：

```
<script type="text/javascript">
var u1 = '%pu1=!;';

if (u1.search('NBSLoan|Accept') > -1)
{       
var pvnPixel = '<img src="someurl.com"/>';
document.writeln(pvnPixel);
}
if (u1.indexOf('NBSLoan|Refer') > -1)
{       
var pvnPixel2 = '<img src="someurl2.com"/>';
document.writeln(pvnPixel2);
}
if (u1.indexOf('DeBSLoan|Accept') > -1) {
var pvnPixel3 = '<img src="someurl3.com"/>';
document.writeln(pvnPixel3);    
}
</script> 
```

假设`u1`变量是一个宏，它可能包含以下任何值：

`NBSLoan|Accept|PPI+No|48Months`
`NBSLoan|Refer|PPI+No|48Months`
`NBSLoan|Accept|PPI+No|48Months`
`NBSLoan|Refer|PPI+No|48Months`

还要记住最后一部分（48 个月）可能会改变，我怎样才能编写一个只检查字符串第一部分的 JavaScript 语句？即是否是“NBSLoan|Accept”等？

如果您将上述语句放在 JSFiddle 中，是的，它确实有效，但我向您保证（在现场）这不起作用，所以我正在探索编写此语句的其他可能性。我可以做类似的事情：

`if (u1.search(/NBSLoan|Accept/)`? 这甚至可以与模式匹配正常工作吗？目前正在发生的事情是 if`u1`等于`NBSLoan|Accept`url1 和 url2 都被解雇了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:06:38.937

由于您的参数由`|`'s 分隔（分隔），我们可以在`|`'s 上拆分并检查它们之间的位，如下所示：

```
var u1 = '%pu1=!;';
var u1Split = u1.split("|");

if (u1Split[1] == "Accept") {
    var pvnPixel = '<img src="someurl.com"/>';
    document.writeln(pvnPixel);
} else if (u1Split[1]  == "Refer") {
    var pvnPixel2 = '<img src="someurl2.com"/>';
    document.writeln(pvnPixel2);
} else if (u1Split  == "Accept" && u1Split[0] == "DeBSLoan") {
    var pvnPixel3 = '<img src="someurl3.com"/>';
    document.writeln(pvnPixel3);
} 
```

让我知道这是否有用。此外，`writeln`这不是一个标准功能，`document`所以如果您之前没有在某处声明它，那将是另一个问题。

# android - 如何使用android中的基适配器类在textview中传递总值

> ID：10719452
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:00:07.060
> 
> 标签：android, android-listview, baseadapter

第一次选择价格，数量值。我添加了所有价格并显示为 textview.up 到现在工作正常。如果我更改了数量值，我可以自动更改当时的价格值我想更改 textview 中的总值

我试试这段代码

```
 public class SelectedItem extends Activity  {
 private ListView lv;
    private CustomAdapter adapter;
    int tableid;
    String id;
ArrayList<String> arr=new ArrayList<String>();
ArrayList<String> price=new ArrayList<String>();
ArrayList<Bitmap> image=new ArrayList<Bitmap>();
Double amountvalue;
TextView totalamount;
Button order;
String dtotalamount;
    protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
arr=getIntent().getStringArrayListExtra("itemname");
price=getIntent().getStringArrayListExtra("itemprice");

image=getIntent().getExtras().getParcelableArrayList("itemimage");

setContentView(R.layout.selecteditem);
 lv = (ListView) findViewById(R.id.selecteditemlist);
 adapter = new CustomAdapter(this, arr,price,image);
 lv.setAdapter(adapter);
 amountvalue=CustomAdapter.x;
 System.out.println(amountvalue);
 totalamount=(TextView)findViewById(R.id.amount);
 totalamount.setText(String.valueOf(amountvalue));(here only i can display the total value...now i want change qty means total also will change)
 order=(Button)findViewById(R.id.order);
 order.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        try
        {
            tableid=Login.tableid;
            id=Integer.toString(tableid);
            System.out.println(id);
            String x=amountvalue.toString();
                           public class SelectedItem extends Activity  {
 private ListView lv;
    private CustomAdapter adapter;
    int tableid;
    String id;
ArrayList<String> arr=new ArrayList<String>();
ArrayList<String> price=new ArrayList<String>();
ArrayList<Bitmap> image=new ArrayList<Bitmap>();
Double amountvalue;
TextView totalamount;
Button order;
String dtotalamount;

  protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
arr=getIntent().getStringArrayListExtra("itemname");
price=getIntent().getStringArrayListExtra("itemprice");

image=getIntent().getExtras().getParcelableArrayList("itemimage");

setContentView(R.layout.selecteditem);
 lv = (ListView) findViewById(R.id.selecteditemlist);
 adapter = new CustomAdapter(this, arr,price,image);
 lv.setAdapter(adapter);
 amountvalue=CustomAdapter.x;
 System.out.println(amountvalue);
 totalamount=(TextView)findViewById(R.id.amount);
 totalamount.setText(String.valueOf(amountvalue));
 order=(Button)findViewById(R.id.order);
 order.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

            tableid=Login.tableid;
            id=Integer.toString(tableid);
            System.out.println(id);
            String x=amountvalue.toString();

         }
             });
          }
          } 
```

CustomAdapter.java

```
 public class CustomAdapter extends BaseAdapter {

public static Double x = 0.0;
public static Double z;
ArrayList<Integer> selectprice = new ArrayList<Integer>();
public static ArrayList<String> arr1 = new ArrayList<String>();
public static ArrayList<String> itemprice = new ArrayList<String>();
public static ArrayList<Bitmap> itemimage = new ArrayList<Bitmap>();
ArrayList<Integer> total = new ArrayList<Integer>();
public Context Context;
private LayoutInflater inflater;

HashMap<String, String> map = new HashMap<String, String>();

public CustomAdapter(Context context, ArrayList<String> arr,
        ArrayList<String> price, ArrayList<Bitmap> image) {
    Context = context;
    inflater = LayoutInflater.from(context);
    arr1 = arr;
    itemprice = price;

    itemimage = image;
    System.out.println(itemprice);
    System.out.println("arr: " + arr.size());

    for (int i = 0; i < price.size(); i++) {

        x = x + Double.parseDouble(price.get(i));

    }

}

public int getCount() {
    // TODO Auto-generated method stub
    return arr1.size();

}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return arr1.get(position);
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

public void clear() {
    arr1.clear();

}

public View getView(final int position, View convertView, ViewGroup parent) {

    final ViewHolder holder;

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.selecteditemlistview, null);
        holder = new ViewHolder();

        holder.textViewSelectedText = (TextView) convertView
                .findViewById(R.id.selectedtext);
        holder.price = (TextView) convertView
                .findViewById(R.id.selectitemprice);
        holder.image = (ImageView) convertView
                .findViewById(R.id.selectitemimage);
        holder.qty = (EditText) convertView.findViewById(R.id.selectqty);
        holder.total = (TextView) convertView.findViewById(R.id.price);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    @SuppressWarnings("unused")
    String amount = holder.qty.getText().toString();
    final Double price1 = Double.parseDouble(itemprice.get(position));
    int qut = Integer.parseInt(holder.qty.getText().toString());
    final double total = (price1 * qut);
    holder.textViewSelectedText.setText(arr1.get(position));
    holder.price.setText(itemprice.get(position));
    holder.image.setImageBitmap(itemimage.get(position));
    holder.total.setText(String.valueOf(total));

    holder.qty.setOnFocusChangeListener(new OnFocusChangeListener() {

        @SuppressWarnings("static-access")
        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub

            if (!hasFocus) {

                int position = v.getId();
                final EditText Caption = (EditText) v;
                Caption.setFocusable(true);
                holder.qty.setFocusable(true);
                int q = Integer.parseInt(holder.qty.getText().toString());
                Double result = (price1 * q);
                Double y = x - total;
                double z = y + result;

            }

        }

    });

    return convertView;
}

class ViewHolder {
    TextView textViewSelectedText = null;
    TextView price = null;
    ImageView image = null;
    EditText qty = null;
    TextView total = null;
}
} 
```

第一次可以显示 x(customadapter) 值。更改数量后，我将获得 z(customadapter) 值。这个z值我想通过总..请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:54:03.347

好的。在 Adapter 的 getView() 中执行此操作，

您必须为您的 EditText 使用**TextWatcher**。很简单。

```
 holder.qty.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
            int q = Integer.parseInt(holder.qty.getText().toString()); 
            Double result = (price1 * q);
            Double y = x - total;
            double z = y + result;
            totalamount.setText(String.valueOf(z));             
    }
}); 
```

**编辑 1**

在您的 SelectedItem.Java 中，

更改此行

```
adapter = new CustomAdapter(this, arr,price,image); 
```

作为，

```
adapter = new CustomAdapter(this, arr,price,image,totalamount); 
```

现在在您的**CustomAdapter 类**中全局添加一个 TextView，

```
TextView totalamount=null; 
```

现在更改构造函数，

```
public CustomAdapter(Context context, ArrayList<String> arr,
        ArrayList<String> price, ArrayList<Bitmap> image,TextView text) {
    Context = context;
    inflater = LayoutInflater.from(context);
    arr1 = arr;
    itemprice = price;
    totalamount=text;
    itemimage = image;
    System.out.println(itemprice);
    System.out.println("arr: " + arr.size());

    for (int i = 0; i < price.size(); i++) {

        x = x + Double.parseDouble(price.get(i));

    }

} 
```

# eclipse - java servlet中芝麻服务器存储库（owl本体）的操作

> ID：10719454
> 
> 赞同：1
> 
> 时间：2012-05-23T12:00:10.597
> 
> 标签：eclipse, rdf, owl, sesame

我正在尝试将 Web 应用程序（eclipse）与我的 Sesame 存储库服务器（sesame 2.6.3）连接起来，它们都在我的本地机器上运行在同一个 Apache Tomcat 6.0.29 下。我在这里找到了芝麻用户指南：[http](http://www.openrdf.org/doc/sesame2/users/ch08.html#d0e835) ://www.openrdf.org/doc/sesame2/users/ch08.html#d0e835 ，部分“8.2.2。查询存储库”正是我希望做的但是我找不到给定代码放在哪里的问题..更多地解释我的问题：我想从jsp页面操作本体（查询本体）所以当我找到连接代码时，查询代码，用于评估元组查询的代码...我不知道将它们放在哪里请帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:36:24.280

将您的代码放在 JSP 中。然后，根据 JSP 中的逻辑，就可以查询存储库了。如果您遇到问题，请发布有关您正在做什么以及出了什么问题的更多详细信息。

# python - 任务中的芹菜任务

> ID：10719456
> 
> 赞同：3
> 
> 时间：2012-05-23T12:00:14.767
> 
> 标签：python, django, celery, dropbox

我在我的应用程序中将 Dropbox 与 celery 结合在一起，这样我就允许用户在连接了他们的 Dropbox 时存储自己的照片。

我写了一段代码，但我担心这可能会导致无限循环，从而杀死系统。

我正在使用的 API 一次只允许 60 张照片，然后它会为您提供分页功能。

这是我的 tasks.py 文件的副本 - 这实际上工作正常，但我想检查我是否在做正确的事情并且不会对系统造成太大影响。

```
class DropboxUsers(PeriodicTask):
    run_every = timedelta(hours=4)

    def run(self, **kwargs):
        logger = self.get_logger(**kwargs)
        logger.info("Collecting Dropbox users")

        dropbox_users = UserSocialAuth.objects.filter(provider='dropbox')
        for db in dropbox_users:
            ...
            ...
            ...
            sync_images.delay(first, second, third_argument)
        return True

@task(ignore_result=True)
def sync_images(token, secret, username):
    """docstring for sync_images"""
    logger = sync_images.get_logger()
    logger.info("Syncing images for %s" % username)
    ...
    ...
    ...
    ...
    feed = api.user_recent_media(user_id='self', count=60)
    images = feed[0]
    pagination = feed[1]
    for obj in images:
        ### STORE TO DROPBOX
        ...
        ...
        ...
        response = dropbox.put_file(f, my_picture, overwrite=True)
    ### CLOSE DB SESSION
    sess.unlink()
    if pagination:
        store_images.delay(first, second, third, fourth_argument)

@task(ignore_result=True)
def store_images(token, secret, username, max_id):
    """docstring for sync_images"""
    logger = store_images.get_logger()
    logger.info("Storing images for %s" % username)
    ...
    ...
    ...
    ...
    feed = api.user_recent_media(user_id='self', count=60, max_id=max_id)
    images = feed[0]
    try:
        pagination = feed[1]
    except:
        pagination = None
    for obj in images:
        ### STORE TO DROPBOX
        ...
        ...
        ...
        response = dropbox.put_file(f, my_picture, overwrite=True)
    ### CLOSE DB SESSION
    sess.unlink()
    if pagination:
        ### BASICALLY RESTART THE TASK WITH NEW ARGS
        store_images.delay(first, second, third, fourth_argument)

    return True 
```

非常感谢您的专业知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:04:01.023

我看不出有什么大问题。我还实现了一个任务启动另一个任务的系统。

有一段时间，我在服务器重启时遇到了芹菜复制任务的问题。我写了一个装饰器来包装一个任务，该任务使用缓存后端来确保具有相同参数的相同任务不会经常运行。可能对您对冲无限循环很有用。

```
from django.core.cache import cache as _djcache
from django.utils.functional import wraps

class cache_task(object):

    """ Makes sure that a task is only run once over the course of a configurable
    number of seconds. Useful for tasks that get queued multiple times by accident,
    or on service restart, etc. Uses django's cache (memcache) to keep track."""

    def __init__(self, seconds=120, minutes=0, hours=0):
        self.cache_timeout_seconds = seconds + 60 * minutes + 60 * 60 * hours

    def __call__(self, task):
        task.unsynchronized_run = task.run
        @wraps(task.unsynchronized_run)
        def wrapper(*args, **kwargs):
            key = sha1(str(task.__module__) + str(task.__name__) + str(args) + str(kwargs)).hexdigest()
            is_cached = _djcache.get(key)
            if not is_cached:
                # store the cache BEFORE to cut down on race conditions caused by long tasks
                if self.cache_timeout_seconds:
                    _djcache.set(key, True, self.cache_timeout_seconds)
                task.unsynchronized_run(*args, **kwargs)
        task.run = wrapper
        return task 
```

用法：

```
@cache_task(hours=2)
@task(ignore_result=True)
def store_images(token, secret, username, max_id):
   ... 
```

# jquery - 如何创建拖放组件？

> ID：10719458
> 
> 赞同：0
> 
> 时间：2012-05-23T12:00:21.233
> 
> 标签：jquery, extjs, smartgwt

我想在我的网页中创建拖放组件。例如在页面输入文本框的右侧，单选按钮、复选框应该可用。然后我需要将这些组件拖放到页面的左侧。

对于这个要求，这可能是最适合的。

我尝试搜索，如 jQuery、Smart GWT、Ext JS 等建议。哪一个是可行的，甚至除此之外也是可行的？

谢谢，

尝试使用 jQuery 拖放选项。但是这些都是用原始实例播放的。但是我正在寻找，即使在拖放之后，该组件也应该可用于下一次拖动？可能吗 ？？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:06:25.490

我认为[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)在这种情况下将是最灵活的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:17:19.300

为什么不使用 HTML5 功能？

[http://html5demos.com/drag](http://html5demos.com/drag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T11:49:19.007

您应该在 jquery UI 中使用“droppable”组件

[http://jqueryui.com/droppable/](http://jqueryui.com/droppable/)

默认情况下，可放置项是可拖动项。

```
 $( ".selector" ).droppable({
  drop: function( event, ui ) {
    //reset the position of "ui" element to initial position
    //add any new item in the place of dropped item
   }
}); 
```

# objective-c - 如何以编程方式获取 iPad 设置（不是应用程序设置）

> ID：10719462
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:00:29.347
> 
> 标签：objective-c

我如何以编程方式获取 iPad 设置（而不是应用程序设置）
，例如蓝牙开启或关闭、自动设置日期时间等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:21:50.297

那是行不通的。有些东西会起作用，比如获取基本的设备特定属性，例如电池电量、设备名称等。但是如果不使用私有框架，你就不能打开蓝牙/Wifi，然后，Apple 可能会拒绝你的应用程序。要获取设备属性，请查看`UIDevice`类。

# c# - 下载文件的名称错误，其中包含挪威字母，如 å ø æ

> ID：10719464
> 
> 赞同：0
> 
> 时间：2012-05-23T12:00:33.220
> 
> 标签：c#, asp.net-mvc, encoding, filenames

我有一个控制器

```
 [AcceptVerbs(HttpVerbs.Get)]
    public ActionResult ExportToWord(string docId)
    {
        .... create document in the stream ...
        return File(stream, "application/vnd.openxmlformats-officedocument.wordprocessingml.document", "test-ø-æ-å.docx");
    } 
```

Firefox、Chrome 和 IE9 返回正确的文件名 «test-ø-æ-å.docx»

IE7、IE8 返回 «ExportToWord.docx»

如果文件名不包含挪威字母 så 它也适用于 IE7-8。

如何解决这个问题？谢谢！

**我的解决方案：**

```
if (Request.Browser.Browser == "IE" && (Request.Browser.Version == "7.0" || Request.Browser.Version == "8.0"))
{
            fileName = Uri.EscapeDataString(fileName).Replace("%20", " ");
            or
            fileName = Uri.EscapeDataString(fileName.Replace(" ", "_"));
} 
```

# c++ - Opencv2.4设置相机参数

> ID：10719465
> 
> 赞同：1
> 
> 时间：2012-05-23T12:00:38.770
> 
> 标签：c++, opencv

我正在尝试使用以下代码设置相机参数，但它根本不起作用。

```
using namespace cv;

    int main(int argc,char *argv[])
    {
        VideoCapture cap(0); // open the default camera 
        if(!cap.isOpened())  // check if we succeeded
            return -1;
        bool value = cap.set(CV_CAP_PROP_FRAME_WIDTH,10);
        for(;;)
        {
            Mat frame;
            cap >> frame;   // get a new frame from camera
            imshow("frame", frame);
            unsigned char *dad = (unsigned char*)frame.data;
            if(waitKey(30) >= 0) break;
        }
        // the camera will be deinitialized automatically in VideoCapture destructor
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:42:18.647

OpenCV 尝试直接在相机中设置这个大小，因此它不需要调整框架的大小。

这种方法的问题在于，如果您的相机本身不支持此尺寸，OpenCV 将无法设置该值，让您在检索帧后调整其大小。

`cap.set()`似乎返回函数成功，建议你检查一下。

我建议看看另一个线程：[如何更改 OpenCV 中的捕获分辨率](https://stackoverflow.com/questions/14287/increasing-camera-capture-resolution-in-opencv)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:02:17.647

来自 opencv 正在使用 directshow 进行视频捕获。但是，您的相机仅支持一些分辨率设置，例如 480*320、640*480、720p、1080p。如果你设置别的东西，它根本不起作用。如果您想检查您的相机支持哪种分辨率。下载 graphedt 并检查捕获 pin 属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T12:22:08.087

上面的代码不用于更改相机参数。我认为它完全可以在您的机器上显示视频。可能这个链接对你有用[http://opencv.willowgarage.com/wiki/CameraCapture](http://opencv.willowgarage.com/wiki/CameraCapture)

# c# - 更新服务引用错误

> ID：10719473
> 
> 赞同：0
> 
> 时间：2012-05-23T12:00:59.713
> 
> 标签：c#, silverlight, web-services

我正在尝试将我的 silverlight 应用程序中的服务引用更新为我刚刚更新为目标版本 4 框架的 Web 服务。

当它在 3.5 版上运行并且我进行了任何更改，然后在客户端中更新时，它工作正常但是自从更改 Web 服务目标框架后，我收到一个错误，指出下载 Web 服务 URL 时出错。

更改框架后如何更新服务引用？

# objective-c - 使用动态代码枚举 NSArray 的块闭包和三元运算符

> ID：10719474
> 
> 赞同：2
> 
> 时间：2012-05-23T12:01:02.403
> 
> 标签：objective-c, objective-c-blocks, dynamic-code

我不知道我正在尝试做的事情是否可行。我对积木没有经验，只是阅读了一些教程，并且非常喜欢这个想法。我的课程 AppointmentView.h（和 m）正在扩展 ViewController。它包含一些属性，这些属性是另一个类 Appointment 的成员，而后者又具有一些 NSArray。出于创建分组表视图的目的，我检查了数组的值，然后适当地复制将显示的值（不要太花哨或太复杂）。通常我会使用 if-else 语句，并进行适当的控制，但是在查看块之后，我开始思考以下是否可行：

```
[self setOutcomes: [[NSArray alloc] initWithObjects:
                        ^{ return [myAppointment.CANCELED isEqualToString:@"NO"] == YES ? 
                                                            [[NSString alloc] initWithString:@"Not Cancelled"] :
                                                            [[NSString alloc] initWithString:@"Cancelled"]; },
                        ^{ return [myAppointment.CANCELED isEqualToString:@"NO"] == YES ?
                                                            [[NSString alloc] initWithString:@"No Cancellation reason"] :
                                                            [[NSString alloc] initWithString:myAppointment.CANCREASON]; },
                        ^{ return [myAppointment EVENTS].length > 0 ?
                                                            [[NSString alloc] initWithString:myAppointment.EVENTS] :
                                                            [[NSString alloc] initWithString:@"No Events"]; },
                        ^{ return [myAppointment SUMMARY].length > 0 ?
                            [[NSString alloc] initWithString:myAppointment.SUMMARY] :
                            [[NSString alloc] initWithString:@"No Summary"]; },
                        nil]]; 
```

此代码编译良好，但运行时崩溃。我的理解是这是错误的，因为我是在告诉枚举每次都执行一段代码。所以这不是我想要的。然后我尝试了以下方法：

```
 [self setOutcomes: [[NSArray alloc] initWithObjects:
                        [[NSString alloc] initWithString: (NSString *) ^(void){ 
                                                                        return [myAppointment.CANCELED isEqualToString:@"NO"] == YES ?
                                                                                                        @"Not Cancelled" : @"Cancelled"; }],
                        [[NSString alloc] initWithString: (NSString *) ^(void){ 
                                                                        return [myAppointment.CANCELED isEqualToString:@"NO"] == YES ? 
                                                                                                        @"No Cancellation reason" : myAppointment.CANCREASON; }],
                        [[NSString alloc] initWithString: (NSString *) ^(void){ 
                                                                        return [myAppointment.EVENTS isEqualToString:@""] == YES ? 
                                                                                                        myAppointment.EVENTS : @"No Events"; }],
                        [[NSString alloc] initWithString: (NSString *) ^(void){ 
                                                                        return [myAppointment.SUMMARY isEqualToString:@""] == YES ?
                                                                                                        myAppointment.SUMMARY : @"No Summary"; }],
                        nil]]; 
```

虽然它编译得很好，但崩溃并出现以下错误：

> -[ **NSMallocBlock**长度]：无法识别的选择器发送到实例 0x6bd68f0

我还尝试定义一个我可以使用的通用方法，但也没有帮助。所以，我想知道，这可能吗？我知道对于这段代码，我可以简单地使用 if-else（就像我通常那样）并完成它，但在其他情况下，这样的动态代码生成选项将非常有用。

我觉得任何一个 NSString 都不知道如何处理这个问题，因此我应该用一个选项来扩展它让我们说

> 初始化块：

或者我在这里遗漏了其他东西。或者这可能是不可能的......（？）

PS：我刚刚看到 NSArray 的 enumerateUsingBlock: 方法，但我不确定在这种情况下这是否能达到我的目的，因为数组中的每个条目都完全不同，并且特定的块不符合标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:32:47.943

如果您需要在初始化程序中做出简单的选择，则不需要块。

```
[NSArray initWithObjects:
         ([myAppointment.CANCELED isEqualToString:@"NO"] ? @"Not Cancelled" : @"Cancelled"),
         ([myAppointment.CANCELED isEqualToString:@"NO"] ? @"No Cancellation reason" : myAppointment.CANCREASON),
         nil]; 
```

使用括号括起来 ?: 运算符。

* * *

**更新以回答如何在同一位置定义和调用块的问题**

这个单元测试对我有用：

```
- (void)testBlockNow
{
    BOOL X = ^{ return YES; }();
    STAssertTrue(X, nil);
} 
```

这很简单：`^{ … }`定义块，然后`()`调用块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:07:27.160

是的，您可以将块存储在一个数组中，但您需要聪明一点。

```
typedef (void)(^X)();

X block1 = ^{ … };
X block2 = ^{ … };
X block3 = ^{ … };

NSArray *array = [NSArray initWithObjects:
                  [[block1 copy] autorelease],
                  [[block2 copy] autorelease],
                  [[block3 copy] autorelease],
                  nil]; 
```

# javascript - 递归函数的javascript返回

> ID：10719480
> 
> 赞同：13
> 
> 时间：2012-05-23T12:01:28.800
> 
> 标签：javascript, recursion, return

讨厌打开一个新问题来扩展上一个问题：

```
function ctest() {
    this.iteration = 0;
    this.func1 = function() {
        var result = func2.call(this, "haha");
        alert(this.iteration + ":" + result);
    }
    var func2 = function(sWord) {
        this.iteration++;
        sWord = sWord + "lol";
        if ( this.iteration < 5 ) {
            func2.call(this, sWord);
        } else {
            return sWord;
        }
    }
} 
```

这将返回迭代 = 5 但结果未定义？这怎么可能？我明确返回 sWord。它应该已经返回“hahalollollollollol”并且只是为了仔细检查，如果我在返回 sWord 之前发出警报（sWord），它会正确显示它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-23T12:05:12.097

您必须一直返回堆栈：

```
func2.call(this, sWord); 
```

应该：

```
return func2.call(this, sWord); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T12:05:34.793

您需要返回递归的结果，否则该方法隐式返回`undefined`。尝试以下操作：

```
function ctest() {
this.iteration = 0;
  this.func1 = function() {
    var result = func2.call(this, "haha");
    alert(this.iteration + ":" + result);
  }
  var func2 = function(sWord) {
    this.iteration++;
    sWord = sWord + "lol";
    if ( this.iteration < 5 ) {
        return func2.call(this, sWord);
    } else {
        return sWord;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:04:00.193

您的外部函数没有`return`语句，因此它返回`undefined`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T12:17:16.310

把事情简单化 ：）

[您在 JSFiddle 中修改的代码](https://jsfiddle.net/shareefhiasat/1qocqkfx/)

```
iteration = 0;
func1();

    function  func1() {
        var result = func2("haha");
        alert(iteration + ":" + result);
    }

    function func2 (sWord) {
        iteration++;

        sWord = sWord + "lol";
        if ( iteration < 5 ) {
            func2( sWord);
        } else {

            return sWord;
        }

    return sWord;
    } 
```

# grammar - 乔姆斯基语言类型

> ID：10719484
> 
> 赞同：15
> 
> 时间：2012-05-23T12:01:53.853
> 
> 标签：grammar, chomsky-hierarchy

我试图理解四种不同的乔姆斯基语言类型，但我发现的定义对我来说没有任何意义。我知道类型 0 是自由语法，类型 1 是上下文相关的，类型 2 是上下文无关的，而类型 3 是常规的。所以，有人可以解释一下，并把它放在上下文中，谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T12:21:05.807

语言是属于该语言的一组单词。然而，很多时候，与其列出语言中的每个单词，不如指定生成该语言单词的规则集（并且仅是那些规则集）来识别所讨论的语言是什么就足够了。

*注意*：可以有不止一组描述相同语言的规则。

一般来说，对规则施加的限制越多，语言的表达力就越低（可以从规则中生成的单词越少），但如果单词属于规则指定的语言，则更容易识别。由于后者，我们希望识别对其规则限制最多的语言，这些语言仍然允许我们生成相同的语言。

**关于规则的几句话**：一般来说，你用四个项目来描述一种正式的语言（又名四元组）：

1.  *非终结符号*集( *N* )
2.  *终端符号*集( *T* )
3.  *生产规则*集( *P* )
4.  *起始符号*( S)

终端符号（AKA 字母）是该语言的单词组成的符号，通常是小写英文字母的子集（例如'a'、'b'、'c'）

非终结符号标记了单词生成的中间状态，表明可能的转换仍然可以应用于中间“单词”。终结符和非终结符之间没有重叠（即两个集合的交集是空的）。用于非终结符的符号通常是大写英文字母的子集（例如'A'、'B'、'C'）

这些规则表示一系列终端和非终端符号的可能转换。它们的形式是：左侧 -> 右侧，其中左侧和右侧都由一系列终端符号和非终端符号组成。一个示例规则：aBc -> cBa，这意味着在单词生成过程中，一系列符号“aBc”（作为中间“单词”的一部分）可以替换为“cBa”系列。

起始符号是一个专用的非终结符号（通常用 S 表示），表示单词生成的“根”或“开始”，即在一系列单词生成中应用的第一条规则始终具有起始符号作为它的左侧。

当所有非终结符都被终结符替换后，一个单词的生成就成功结束了（因此最终的“中间词”仅由终结符组成，这表明我们到达了所讨论语言的单词）。

一个词的生成是不成功的，当不是所有的非终结符都被替换为终结符时，但是没有可以应用于当前中介“词”的产生规则。在这种情况下，生成必须从起始符号重新开始，遵循生产规则应用程序的不同路径。

**示例**：

> **L** ={ *T* , *N* , *P* , S},

在哪里

> *T* ={a, b, c}
> 
> *N* ={A, B, C, S}
> 
> *P* ={S->A, S->AB, S->BC, A->a, B->bb, C->ccc}

它表示三个词的语言：“a”、“abb”和“bbccc”

规则的示例应用：

> S->AB->aB->abb

其中我们 1) 从起始符号 (S) 开始，2) 应用第二条规则（用 AB 代替 S），3) 应用第四条规则（用 a 代替 A）和 4) 应用第五条规则（用 bb 代替 B ）。由于生成的“abb”中没有非终结符，因此它是该语言的一个词。

在一般谈论规则时，希腊符号*alpha*、*beta*、*gamma*等表示（可能为空的）一系列终端+非终端符号；希腊字母*epsilon*表示空字符串（即空系列符号）。

**乔姆斯基层次结构**中的四种不同类型描述了不同表达能力的语法（对规则的不同限制）。

*   由*Type 0*（或*Unrestricted*）语法生成的语言最具表现力（限制较少）。*递归可枚举*语言集包含可以使用图灵机（基本上是计算机）生成的语言。这意味着如果你有一种比这种类型更具表现力的语言（例如英语），你就不能编写一个算法来列出该语言的每一个（并且只有这些）单词。规则有一个限制：规则的左侧不能为空（不能“突然”引入符号）。

*   由*类型 1*（*上下文相关*）语法生成的语言是*上下文相关*语言。这些规则的限制是它们的格式为：*alpha* A *beta* -> *alpha gamma beta*，其中*alpha*和*beta 可以为*空，而*gamma*不为空（例外：S-> *epsilon*规则，仅在以下情况下才允许开始符号 S 不会出现在任何规则的右侧）。这将规则限制为在其左侧至少有一个非终结符并允许它们具有“上下文”：此规则示例中的非终结符 A 可以替换为*gamma*, 仅当它被 ("is in the context of") *alpha*和*beta*包围时。规则的应用保留了上下文（即*alpha*和*beta*不变）。

*   由*类型 2*（*无上下文*）语法生成的语言是无*上下文*语言。这些规则的限制是它们的形式为： A -> *gamma*。这将规则限制为在其左侧只有一个非终端并且没有“上下文”。这实质上意味着，如果您在中间词中看到一个非终结符号，您可以应用任何一个在其左侧具有该非终结符号的规则，以将其替换为右侧，而不管周围环境如何的非终结符。大多数编程语言都有上下文无关的生成语法。

*   由*Type 3* ( *Regular* ) 语法生成的语言是*正*则语言。规则有以下形式的限制：A->a 或 A->aB（如果起始符号 S 没有出现在任何规则的右侧，则允许规则 S-> *epsilon* ），这意味着每个非终结符必须恰好产生一个终结符（也可能是一个非终结符）。正*则表达式*生成/识别这种类型的语言。

其中一些限制可以通过某种方式解除/修改，以保持修改后的语法具有相同的表达能力。修改后的规则可以允许其他算法识别一种语言的单词。

请注意（如前所述）一种语言通常可以由多种语法（甚至属于不同类型的语法）生成。一个语系的表达能力通常等同于可以生成这些语言的最严格的文法类型的表达能力（例如，由常规（类型 3）文法生成的语言也可以由类型 2 文法生成，但它们的表达能力力量仍然是类型 3 语法的力量）。

**例子**

常规*语法*

> *T* ={a, b}
> 
> *N* ={A, B, S}
> 
> *P* ={S->aA, A->aA, A->aB, B->bB, B->b}

生成包含以非零数量的 'a' 开头，后跟非零数量的 'b' 的单词的语言。请注意，不可能用常规语法来描述一种语言，其中每个单词都由多个 'a' 后跟相等数量的 'b' 组成。

上下文*无关文法*

> *T* ={a, b}
> 
> *N* ={A, B, S}
> 
> *P* ={S->ASB, A->a, B->b}

生成包含以非零数量的“a”开头的单词的语言，后跟相等数量的“b”。请注意，不可能描述一种语言，其中每个单词由多个 'a's 组成，后跟相同数量的 'b's，后跟相同数量的 'c's 与上下文无关语法。

*上下文相关*语法

 *> *T* ={a, b, c}
> 
> *N* ={A, B, C, H, S}
> 
> *P* ={S->aBC, S->aSBC, CB->HB, HB->HC, HC->BC, aB->ab, bB->bb, bC->bc, cC->cc}

生成 tha 语言，其中包含以非零数量的 'a' 开头的单词，后跟相同数量的 'b'，然后是相同数量的 'c'。H 在这个语法中的作用是能够将 CB 组合“交换”为 BC 组合，因此 B 可以集中在左边，C 可以集中在右边。请注意，不可能描述一种语言，其中单词由一系列 'a's 组成，其中 'a's 的数量是具有上下文敏感语法的素数，但可以编写生成该语言的不受限制的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-26T07:33:48.540

**有4种语法**

**类型-0**：

*   不受限制的语法接受的语法

*   递归可枚举语言接受的语言

*   自动机是**图灵机**

**类型一**：

*   上下文相关语法接受的语法

*   上下文相关语言接受的语言

*   自动机是**线性有界自动机**

**2型**：

*   上下文无关语法接受的语法

*   上下文无关语言接受的语言

*   Automaton 是**PushDown 自动机**

**3型**：

*   正则文法接受的文法

*   正则语言接受的语言

*   自动机是**有限状态自动机**

**Chomsky**是一个**范式**，每个产生式都有形式：

*   **A->BC**或**A->a**

> **乔姆斯基**的规则 可以有**两个变量**或**只有一个终端***

# c# - 发布时更改 Visual Studio 中的连接字符串

> ID：10719486
> 
> 赞同：1
> 
> 时间：2012-05-23T12:02:04.660
> 
> 标签：c#, visual-studio-2010

我有一个 asp.net 应用程序。我设置了两个数据库，一个测试和生产。现在写，在我推送任何更新之前，我手动更改我的 conn 字符串以指向生产。当我发布我的应用程序并自动更改为生产时，有没有办法做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:04:10.530

您可以为此使用[web.config 转换](http://msdn.microsoft.com/en-us/library/dd465318.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:48:42.120

是的 web.config 转换，或者我认为更好的方法是将您的配置与您的 web/app.config 分开，因此例如为每个构建配置都有一个文件夹

配置/调试/connectionStrings.config

配置/阶段/connectionStrings.config

配置/生产/connectionStrings.config

然后您的应用程序或 web.config 看起来像

```
<connectionStrings configSource="bin\connectionStrings.config" /> 
```

要将特定于环境的配置添加到您的 bin 目录，请创建一个构建后事件，该事件根据当前构建配置复制配置或手动将它们复制到您的 bin。这样您就不必依赖构建来获得所需的配置。

如果你真的想要这个自动化你的后期构建事件可能看起来像

```
"$(SolutionDir)CopyConfigs.bat" "$(ProjectDir)" "$(ConfigurationName)" "$(OutDir).." 
```

和批处理文件，以便可以在项目之间重复使用复制：

```
@echo CopyConfigs.bat :
@echo Coping Config Files...

set projectDir=%1
set configurationName=%2
set outDir=%3

REM Trim Quotes    
for /f "useback tokens=*" %%a in ('%1') do set projectDir=%%~a    
for /f "useback tokens=*" %%a in ('%2') do set configurationName=%%~a    
for /f "useback tokens=*" %%a in ('%3') do set str3=%%~a    
@echo Project Directory: %1    
@echo ConfigurationName: %2    
@echo OutDir: %3    
if not exist %1 goto ProjectDirectoryNotFound    
REM Copy the configuration files to the projects output directory    
xcopy /Y "%projectDir%Configuration\%configurationName%\*.config" "%outDir%"    
xcopy /Y "%projectDir%Configuration\*.config" "%outDir%"    
@goto END    
:ProjectDirectoryNotFound    
@echo Project Directory %projectDir% was not found.    
@goto END    
:END    
@echo Coping Config Done 
```

# qt - 如果服务器以管理权限运行（Windows 7），则 QLocalSocket::connectToServer 失败并出现 QLocalSocket::SocketAccessError

> ID：10719487
> 
> 赞同：3
> 
> 时间：2012-05-23T12:02:05.553
> 
> 标签：qt, winapi, uac, named-pipes, qlocalsocket

*在 Qt 4.8.1 的 Microsoft Windows 7 实现中出现以下问题：*

QLocalServer（命名管道）正在等待客户端连接，它作为以管理权限运行的服务器应用程序（例如系统服务）运行。

如何允许**非特权**QLocalSocket 客户端连接到该服务器？连接尝试总是被拒绝，错误代码为 3 (QLocalSocket::SocketAccessError)。有解决办法吗？

**编辑**：正如我所发现的，解决方案是通过允许完全访问“每个人”Sid 来更改管道安全性。这里唯一的问题是，调用`SetSecurityInfo`总是失败并出现“**拒绝访问**”错误。首先，我们必须获得一个管道句柄。由于管道已经由 Qt 创建，我们将使用`CreateNamedPipe`.

```
HANDLE hPipe = CreateNamedPipe(
    (const wchar_t *)_Server->fullServerName().utf16(), // pipe name
    PIPE_ACCESS_DUPLEX | FILE_FLAG_OVERLAPPED,       // read/write access
    PIPE_TYPE_BYTE |          // byte type pipe
    PIPE_READMODE_BYTE |      // byte-read mode
    PIPE_WAIT,                // blocking mode
    PIPE_UNLIMITED_INSTANCES, // max. instances
    0,                  // output buffer size
    0,                  // input buffer size
    3000,                     // client time-out
    0 // Default Security
);
// Same call to open/create pipe as in qlocalserver_win.cpp
// Code here to add/change ACEs
if (SetSecurityInfo(hPipe, SE_KERNEL_OBJECT, DACL_SECURITY_INFORMATION,
    0, 0, NewAcl, 0) == ERROR_SUCCESS) {
    // Success
} 
```

即使`NewAcl`设置为 NULL，调用也会失败。那么什么会导致“拒绝访问”错误呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-01T17:27:04.663

我知道，现在有点晚了，但这可能会帮助其他有同样问题的人。请注意，此解决方案仅适用于服务器是您的应用程序的情况。

如果是这种情况，只需调用或调用之前`server.setSocketOptions(QLocalServer::WorldAccessOption);`的其他值之一。`QLocalServer::​SocketOption``listen`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T07:27:26.793

我对 Qt 不熟悉，因此不知道以这种方式使用 QtLocalServer 时会默认创建哪些安全特性。但是，通常有两种不同的机制可能导致“访问被拒绝”错误。

第一个是与管道关联的 DACL（自由访问控制列表）。这与 Windows 中任何安全对象上的 DACL 的工作方式相同（cf 文件安全）。列表中必须有一个访问控制条目 (ACE)，它授予您的客户端用户所需的管道访问类型。正如您正确指出的那样，为“EVERYONE”SID 添加一个允许读/写访问的 ACE 将消除您的客户端面临的任何 DACL 障碍。但是，请注意，修改 DACL 的代码必须已经拥有对管道的 WRITE_DAC 访问权限，否则它将无法打开可以修改 DACL 的句柄。您的代码在对 CreateNamedPipe 的调用中甚至没有请求 WRITE_DAC 访问权限，因此这是您对 SetSecurityInfo 的调用失败的另一个原因。

第二种机制是在 Windows Vista 及更高版本中引入的强制完整性控制机制。从您的描述中不清楚这是否在这里起作用，但一般来说，客户端进程永远不能对与完整性级别低于资源的完整性级别相关联的安全资源具有写访问权限。如果这是这里的问题（并且由于您的标题专门针对 Windows 7，我猜它可能是）唯一的解决方案是更改管道上的强制完整性标签以将管道的完整性级别降低到您的客户端的完整性级别。为此，您需要访问服务器打开的第一个管道句柄（[此问答解释了原因](https://stackoverflow.com/a/4499322/502194)) 因为完整性标签是包含在管道的系统访问控制列表 (SACL) 中的特殊 ACE，您需要 WRITE_OWNER 权限才能更改。我不知道在 Qt 中获取这个管道句柄是否可行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T06:02:35.400

我找到了 Qt 问题的解决方案。由于不能使用`CreateNamedPipe`调用 QLocalServer::listen() 后创建的句柄，我们可以`CreateNamedPipe`在 Qt 执行之前调用。如果我们调用它，`WRITE_DAC | FILE_FLAG_FIRST_PIPE_INSTANCE`我们可以改变任何东西。

然后我们可以更改 Chris Dickson 所述的安全设置。

# c# - createdon 字段日期时间格式

> ID：10719496
> 
> 赞同：2
> 
> 时间：2012-05-23T12:02:35.977
> 
> 标签：c#, plugins, dynamics-crm-2011, fetchxml

编译以下 coe 总是会遇到同样令人沮丧的错误。我正在尝试将“createdon”字段与当前日期进行比较。我尝试了几种日期格式，但仍然无法正常工作...

错误详细信息：“23/05/2012 14:01:55 的日期时间格式无效”

代码片段：

```
DateTime d = DateTime.Now;
                String.Format("{0:dd/MM/YYYY HH:mm:ss}", d);

                FetchExpression fetch = new FetchExpression(@"
                    <fetch distinct='false' mapping='logical'>
                      <entity name='" + context.PrimaryEntityName + "'><filter type='and'><condition attribute='createdon' value='" + d + "' operator='ne'></condition></filter><link-entity name='new_contrats' alias='nombreligne' from='new_contratsid' to='new_contratsid'><filter type='and'><condition attribute='new_contratsid' value='" + contrats.Id + "' operator='eq'></condition></filter></link-entity></entity></fetch>"); 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:20:33.050

我[在这里发布的博客](http://thecrmgrid.wordpress.com/2010/05/19/dates-in-fetchxml-queries/)可能会有所帮助。基本上，UTC 格式但原始用户的本地偏移量可能会影响数据库中的基础值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T02:12:49.170

在 Linq to CRM 或查询表达式中工作可能比 Fetch XML 更容易。由于您正在使用对象，因此您不必担心格式。

# java - 将外部数据库导入应用程序并在android中使用

> ID：10719498
> 
> 赞同：2
> 
> 时间：2012-05-23T12:02:40.957
> 
> 标签：java, android, database, sqlite, import

我是android开发的新手。现在我正在尝试使用 sqlite db。我使用 sqlite manager 创建了一个数据库 sqlite 文件。我通过 /data/data/packagename/dbname 将它导入到项目中，它在模拟器中运行良好，但是如果我在设备中发布应用程序崩溃，我不知道会发生什么以及为什么会发生。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:06:59.937

您不能以这种方式使用外部数据库。当您将它导入您的项目时，这并不意味着它在之后的所有设备中都可用（假设您为此使用了 DDMS）。这意味着 DB 仅适用于该特定模拟器。按照以下链接了解如何将外部数据库添加到您的应用程序。

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:19:36.093

```
private void StoreDatabase() {
     File DbFile=new File("data/data/packagename/DBName.sqlite");
     if(DbFile.exists())
     {
         System.out.println("file already exist ,No need to Create");
     }
     else
     {
         try 
         {
             DbFile.createNewFile();
             System.out.println("File Created successfully");
             InputStream is = this.getAssets().open("DBName.sqlite");
             FileOutputStream fos = new FileOutputStream(DbFile);
             byte[] buffer = new byte[1024];
                int length=0;
                while ((length = is.read(buffer))>0)
                {
                fos.write(buffer, 0, length);
                }
             System.out.println("File succesfully placed on sdcard");
                //Close the streams
                fos.flush();
                fos.close();
                is.close();
         }
         catch (IOException e)
         {
             e.printStackTrace();
         }
   }    
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T12:10:22.560

查看此链接，如果您在 Android 中使用自己的数据库，这将非常有帮助。

> [http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

在本教程中，您必须将数据库放在项目的资产文件夹中，数据库将自动转移到您设备的数据库文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T12:18:58.017

请参阅[https://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)以获取帮助程序库来解决此问题。

（我没有亲自使用过这个库，但我昨天在搜索其他东西时遇到了它。不过，它似乎可以满足您的需求）。

# java - 有没有办法在通过 selenium 加载后将一些 js 添加到所有页面中？

> ID：10719499
> 
> 赞同：2
> 
> 时间：2012-05-23T12:02:41.050
> 
> 标签：java, javascript, selenium, webdriver

我正在使用 selenium 创建自动化测试。目前我想在加载后在每个页面/框架中执行一些 js 代码，以便能够在 js 中调用一些测试函数。在页面加载后立即执行它并不是必需的，我只想确保它会在每个页面上执行。

为了解决这个问题，我编写了自己的 WebDriver 实现器，它使用委托模式，在调用方法“get”之后添加 js 执行。与我添加在更改当前帧的 driver.switchTo() 对象的所有方法中执行的脚本相同的方式。

问题是在单击某些链接/执行某些 js 代码后页面重新加载的情况下。很容易理解在这种情况下我的脚本不会被执行。

有没有办法使用 selenium WebDriver 来覆盖这种行为？

任何想法或技巧都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T18:20:57.523

您可以让 fiddler 在后台运行以代理所有 HTTP 方法.....在 fiddler 中，您可以添加自定义规则来更改来自服务器的响应（通过插入 JS ）为每种特定类型的 HTTP 调用 GET /POST（不包括 PNG/ IMG 等）......我一直这样做......为了复制难以测试的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:38:51.483

我会在服务器端执行此操作：使用仅在 Selenium 运行时添加 js 代码的通用 servlet 扩展所有 servlet（在 selenium 启动时在服务器上设置静态变量）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T10:18:48.447

我使用`WebSocket`. 在应用程序中创建一个 WebSocket 服务器。在 initial 之后`get`，`execute_script`这将打开与服务器的连接。当浏览器移动到新页面时，套接字连接关闭 - 您可以再次执行脚本。整个事情有点复杂，因为您需要检查任何`iframe`s，如果连接失败则重试连接等。

我能够很好地使用 Firefox、Chrome。也应该与 Edge/IE 一起使用。

# jquery - 将 Jquery 库添加到 MVC4 应用程序

> ID：10719502
> 
> 赞同：5
> 
> 时间：2012-05-23T12:02:45.390
> 
> 标签：jquery, asp.net-mvc-4

有人可以向我解释一下如何将 jquery 库添加到 asp.net MVC4 应用程序中。我试图弄清楚如何将它们添加到剃刀视图中。我只能在网上找到 Jquery Mobile 的教程？好吧，我只想知道如何将 jquery 库添加到 cshtml 视图中。任何带有一些示例的链接都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:54:43.487

下载脚本文件。在脚本文件夹中添加脚本

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
//Or
<script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

然后在布局页面中调用上面的脚本行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:45:27.857

如果不是将它添加到每个视图中，而是通过 Global.asax.cs 中的 RegisterBundles 添加它会怎样？

```
 private void RegisterBundles(BundleCollection bundles)

    {
    var js = new Bundle("~/scripts/MercerAdvisors.OnTrack.Bundle.js", typeof(JsBundleOnly));

    js.AddFile("~/Scripts/jquery-1.7.2.js");
    js.AddFile("~/Scripts/jquery.validate.js");
    js.AddFile("~/Scripts/jquery.validate.unobtrusive.js");
    js.AddFile("~/Scripts/jquery.tipTip.minified.js");
    js.AddFile("~/Scripts/jquery-ui-1.8.16.js");
    js.AddFile("~/Scripts/jquery.layout.js");
    js.AddFile("~/Scripts/checkRadio.js");
    js.AddFile("~/Scripts/jquery.formatCurrency-1.4.0.js");
    js.AddFile("~/Scripts/rangeValidator.js");
    js.AddFile("~/Scripts/jquery.nimble.loader.js");
    js.AddFile("~/Scripts/jquery.maskedinput-1.3.js");
    js.AddFile("~/Scripts/jquery.sparkline.js");
    js.AddFile("~/Scripts/jquery.loadmask.js");
    js.AddFile("~/Scripts/DataTables-1.8.2/media/js/jquery.dataTables.js");
    js.AddFile("~/Scripts/FixedColumns.min.js");
    js.AddFile("~/Scripts/ZeroClipboard.js");
    js.AddFile("~/Scripts/jquery.livequery.js");
    js.AddFile("~/Scripts/jquery.timers-1.2.js");
    js.AddFile("~/Scripts/selectToUISlider.jQuery.js");

    bundles.Add(js);

    var jqueryCss = new Bundle("~/Content/themes/base/jQuery.Bundle.css", typeof(CssBundleOnly));

    jqueryCss.AddFile("~/Content/themes/base/jquery-ui.css");

    bundles.Add(jqueryCss);

} 
```

# javascript - 使用 Javascript 在 Chrome 中强制重新加载页面 [无缓存]

> ID：10719505
> 
> 赞同：22
> 
> 时间：2012-05-23T12:02:50.443
> 
> 标签：javascript, google-chrome, safari, webkit, browser-cache

我需要使用 JavaScript 重新加载页面，并确保它不会从浏览器缓存中提取，而是从服务器重新加载页面。[因为页面的元素将在此期间发生变化]

在 IE 和 FF 上，我发现以下代码运行良好；

```
window.location.reload(true); 
```

但是它不适用于 Chrome 或 Safari。

我尝试了以下方法，但也无济于事；

```
window.location.replace(location.href);
document.location.reload(true);
document.location.replace(location.href); 
```

这个问题有解决方案吗？

**发现**

经过调查，我发现这个问题是 HTTP 协议处理；

1.  Chrome 发送带有`Pragma: no-cache`HTTP 字段的请求
2.  服务器响应`Last-Modified: DATE1`字段
3.  JS 用于`location.reload(true)`强制从服务器重新加载而不是缓存
4.  Chrome 发送带有`If-Modified-Since: DATE1`字段的请求
5.  服务器响应`HTTP Status 304 Not Modified`

服务器应用程序因没有注意到动态页面内容中的状态变化而导致错误，因此没有返回`200`. `If-Modified-Since`但是，Chrome/WebKit 是唯一在调用JS 时发送字段的浏览器`location.reload(true)`。

我想我会把我的发现放在这里，以防其他人遇到同样的问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-21T09:45:42.633

你可以使用这个技巧：

```
 $.ajax({
        url: window.location.href,
        headers: {
            "Pragma": "no-cache",
            "Expires": -1,
            "Cache-Control": "no-cache"
        }
    }).done(function () {
        window.location.reload(true);
    }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T12:08:32.810

为确保页面未从缓存中加载，您可以添加一些唯一编号进行查询：

```
window.location = location.href + '?upd=' + 123456; 
```

您也可以使用日期而不是 123456

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:00:32.680

伟大的发现！我刚刚遇到了同样的问题，这真的很有帮助！但是，除了您的发现之外，Chrome 似乎总是向 location.reload() 发送 GET 请求...IE/FF 正在重复最后一个请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-25T08:59:09.907

这是我为确保在 chrome 上强制重新加载我的应用程序文件所做的工作：

```
 var oAjax = new XMLHttpRequest;
    oAjax.open( 'get', '/path/to/my/app.js' );
    oAjax.setRequestHeader( 'Pragma', 'no-cache' );
    oAjax.send();
    oAjax.onreadystatechange = function() {
        if( oAjax.readyState === 4 ) {
            self.location.reload();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:05:32.040

尝试`window.location = window.location`

# java - 扩展 XML 验证/自动完成

> ID：10719513
> 
> 赞同：0
> 
> 时间：2012-05-23T12:03:29.973
> 
> 标签：java, xml, eclipse

我有几种类型的数据源，我想将它们用于额外的 XML 验证并提供自动完成（如果可能，使用 Eclipse）。

此源可能是其他一些 XML（来自另一个或同一个文件）：

```
<type name="TypeA"/>
<type name="TypeB"/> 
```

或 Java 类

```
public List<String> getValues() {
    return Arrays.asList("Val1", "Val2", "Val3");
} 
```

* * *

然后在其他 XML 文件中引用这些值：

```
<x type="TypeA" value="Val2" />
<x type="TypeB" value="Val3" /> 
```

现在我想改进编辑这个文件

*   **验证**XML 文件（在错误的类型/值下划线，如果可能，在 Package Expl 中显示红色 x。）
*   提供**代码补全** （建议`TypeA`和`TypeB`输入时`type="`）

* * *

我当然必须编写一些代码，但是最好的开始方式是什么？

*   可以扩展标准 XML 编辑器吗？
*   有没有可以提供帮助的插件？[（也许[是 Rinzo XML 编辑器](http://editorxml.sourceforge.net/extendingRinzo.html)？）]
*   还有其他我没有想到的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:03:17.223

彼得，

我在新帖子中回答你，因为我没有足够的评论空间。

如果您想根据您的示例扩展 Rinzo，我想您需要创建一个插件来贡献站点文档中声明的扩展点。

对于内容助手的实现，我猜基于您的示例的粗略实现可能如下：

```
public class CustomSourceAssistProcessor implements IXMLContentAssistProcessor {
@Override
public void addAttributeValuesProposals(XMLNode currentNode, String attributeName, String prefix,
        ITextViewer viewer, int offset, Collection<ICompletionProposal> results) {
    if("x".equals(currentNode.getTagName()) && "type".equals(attributeName)) {
        for (String possibleValue : this.getPossibleValuesFromXML()) {
            results.add(new CompletionProposal(possibleValue, offset, prefix.length(), 0, null, "Proposal Description...", null, null));
        }
    }
    if("x".equals(currentNode.getTagName()) && "value".equals(attributeName)) {
        for (String possibleValue : this.getPossibleValuesFromJavaClass()) {
            results.add(new CompletionProposal(possibleValue, offset, prefix.length(), 0, null, "Proposal Description...", null, null));
        }
    }
} 
```

}

就与 Rinzo 的 API 交互而言，您从外部 XML 文件或 java 类收集值的特定逻辑应在方法**getPossibleValuesFromXML()**和**getPossibleValuesFromJavaClass()中实现**

另一方面，为了添加您的自定义验证器，我猜您的扩展点的粗略实现，也基于您的示例，应该类似于这个：

```
public class CustomSourceXMLValidator implements XmlValidator {
@Override
public void validate(RinzoXMLEditor editor) {
    editor.getModel().getTree().accept(new HierarchicalVisitor() {
        @Override
        public boolean visitStart(XMLNode node) {
            if(node.isTag() && "x".equals(node.getTagName())) {
                for (Entry<String, XMLAttribute> entry : node.getAttributes().entrySet()) {
                    if("type".equals(entry.getKey())) {
                        this.validateValueFromXML(entry.getValue().getValue());
                    }
                    if("value".equals(entry.getKey())) {
                        this.valdateValueFromJavaClass(entry.getValue().getValue());
                    }
                }
            }
            return true;
        }
        private void valdateValueFromJavaClass(XMLAttribute xmlAttribute) {
            if(!this.getPossibleValuesFromXML().contains(xmlAttribute.getValue())) {
                this.createMarker(editor, xmlAttribute);
            }
        }
        private void validateValueFromXML(XMLAttribute xmlAttribute) {
            if(!this.getPossibleValuesFromJavaClass().contains(xmlAttribute.getValue())) {
                this.createMarker(editor, xmlAttribute);
            }
        }
    });
} 
```

}

再一次由你来决定**getPossibleValuesFromXML()**和**getPossibleValuesFromJavaClass()**方法的实现。**也可以看ClassNamesValidatorVisitor**的源码为例。

在自由的世界里继续摇滚！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:12:16.157

我很确定 eclipse 已经做了这两件事，但它们是扩展包之一的一部分。尝试为 Java EE 开发人员下载 eclipse。我相当肯定验证和完成是 Web 工具平台的一部分。

检查[此处](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.xmleditor.doc.user/topics/twxvalid.html)以验证 XML

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:27:51.897

您可以为文件编写`XSD`模式`XML`，然后`Eclipse`验证它们。

当然，有些框架会从您的类中生成`XSD`模式。`Java`

在此处查看答案：[从 java 类生成 xsd 的实用程序](https://stackoverflow.com/questions/9681373/utility-to-generate-xsd-from-java-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T17:09:18.913

如果您决定扩展 Rinzo，似乎已经更新了有关如何扩展您想要自定义的相同功能的文档 :)

[http://editorxml.sourceforge.net/extendingRinzo.html](http://editorxml.sourceforge.net/extendingRinzo.html)

# objective-c - 在 UITabBarController 中制作自定义 UITabBar 的正确方法

> ID：10719521
> 
> 赞同：1
> 
> 时间：2012-05-23T12:04:03.920
> 
> 标签：objective-c, ios, uitabbarcontroller, uitabbar

我正在尝试使用 UITabBarController 创建一个应用程序，以便使用 Cocoa 自己的内存和视图控制器管理在不同的视图控制器之间切换。

但是我确实需要制作一个非常自定义的 UITabBar，经过大量谷歌搜索后我发现这是不可能的。原始的 UITabBar 有几件事是不可能的：

*   更改 TabBar 的位置和大小，
*   向工具栏添加自定义（非选项卡）元素，例如搜索/下拉菜单

是否有任何“合法”方法可以完全改变 TabBar 的设计/子视图，但同时使用 UITabBarController 并仍然获得 Apple 批准的应用程序？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:03:47.070

关于更改大小，您可以扩展 UITabBar 并覆盖函数 sizeThatFits。我很抱歉没有回答其他问题。

```
- (CGSize)sizeThatFits:(CGSize)size {
    CGSize auxSize = size;
    auxSize.height = 54; // Put here the new height you want
    return auxSize;
} 
```

我一发现就会告诉你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:16:20.263

在标签栏中不能自定义太多，但有一些很好的例子：-

1.  [iDevRecipes 的自定义标签栏](https://github.com/boctor/idev-recipes/tree/master/CustomTabBar)
2.  [brianCollins 的自定义 TabBar](https://github.com/briancollins/BCTabBarController)

它可能不完全是您所需要的，但会给您指明方向。

# css - CSS tag assignment

> ID：10719525
> 
> 赞同：2
> 
> 时间：2012-05-23T12:04:10.807
> 
> 标签：css

I'm using this CSS

`.options input[type="radio"],input[type="checkbox"],label{ vertical-align: middle; }`

But the vertical-align property is being assigned to all the check boxes on the site not just ones in the 'options' class.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:10:23.043

CSS rules which are comma seperated, have no relation to each other, and are just a short-hand, consistent way, of applying the same styles for different rules. Your example could be rewritten as:

```
.options input[type="radio"]
{
  vertical-align: middle;
}
input[type="checkbox"]
{
  vertical-align: middle;
}
label
{
   vertical-align: middle;
} 
```

Therefore the 2nd & 3rd rule will apply these styles to all input checkboxes and labels. To get the results you are after, your rules should be rewritten as:

```
.options input[type="radio"]
{
  vertical-align: middle;
}
.options input[type="checkbox"]
{
  vertical-align: middle;
}
.options label
{
   vertical-align: middle;
} 
```

Then the shorthand for this would be:

```
.options input[type="radio"],
.options input[type="checkbox"],
.options label
{
   vertical-align: middle;
} 
```

Also, its worth noting, that best practice is to put **each rule & style on a seperate line**. This will make version controlling a lot easier if you are to later use it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:06:02.440

You need to inlcude .options for each set e.g.:

```
.options input[type="radio"], .options input[type="checkbox"], .options label{ vertical-align: middle; } 
```

When you use the comma, it essentially acts as an 'OR' statement. Each of the comma separated rules are considered individually. The above code is the same as as writing:

```
.options input[type="radio"] { vertical-align: middle; }
.options input[type="checkbox"] { vertical-align: middle; }
.options label{ vertical-align: middle; } 
```

# sql - 如何找到日期的日期

> ID：10719529
> 
> 赞同：2
> 
> 时间：2012-05-23T12:04:21.857
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
ID Date Value1 Value2

001 01/01/2012 100 0
001 02/01/2012 200 200
...
...
001 31/01/2012 250 0
002 01/01/2012 050 100
002 02/01/2012 100 0
...
002 31/01/2012 075
.... 
```

我想按日期（日期列）按 id 分组显示值（value1 列）

输出如

```
ID 01/01/2012 02/01/2012 ... 31/01/2012

001  100 200 .... 250
002  050 100 .... 075
..... 
```

询问

```
DECLARE @loop int,@date Date,@sql nvarchar(4000)
DECLARE @TempTable TABLE
(
  [Date] DATE
)
INSERT INTO @TempTable SELECT DISTINCT [Date] FROM table1 ORDER BY [Date]
  SET @sql = ''
  SET @loop = 1
  WHILE (@loop<=31)
    BEGIN
        IF EXISTS(SELECT * FROM @TempTable WHERE DAY([Date])=@loop) 
        BEGIN
            SET @date = (SELECT [Date] FROM @TempTable WHERE DAY([Date])=@loop)
            SET @sql = @sql+ ',MAX(CASE CONVERT(nvarchar(10),[Date],103) WHEN '''+CONVERT(nvarchar(10),@date,103)+''' THEN [Value1] END) AS [DATE'+CONVERT(nvarchar(2),@loop)+']'
         END
         ELSE
            SET @sql = @sql+ ', NULL AS [DATE'+CONVERT(nvarchar(2),@loop)+']'
         SET @loop = @loop+1
    END 

EXEC('SELECT ID'+@sql+' FROM table1 GROUP BY ID') 
```

上面的查询正在工作，从上面的查询中我想找到星期天，如果是星期天，那么日期列应该显示 value2 列中的值，否则 value1 列应该显示

这该怎么做。

需要查询帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:17:55.520

[DATEPART 函数](http://msdn.microsoft.com/en-us/library/ms174420)为您提供一周中的整数天。星期日 - 星期六变成 1 - 7。

试着用这个换行

```
SET @sql = @sql+ ',MAX(CASE CONVERT(nvarchar(10),[Date],103) WHEN '''+CONVERT(nvarchar(10),@date,103)+''' THEN CASE DATEPART(weekday,[Date])WHEN 1 THEN [Value1] ELSE [Value2] END END) AS [DATE'+CONVERT(nvarchar(2),@loop)+']' 
```

每个 id 的总计算

```
SELECT ID,
SUM(CASE WHEN DATEPART(weekday,[Date]) <> 1 THEN [Value1] END) AS Value1,
SUM(CASE DATEPART(weekday,[Date]) WHEN 1 THEN [Value2] END) AS Value2,
FROM table1 GROUP BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:44:43.430

事实证明，您不需要迭代，也不需要动态脚本。考虑以下：

```
SELECT
  ID,
  Day1  = MAX(CASE D WHEN  1 THEN V END),
  Day2  = MAX(CASE D WHEN  2 THEN V END),
  Day3  = MAX(CASE D WHEN  3 THEN V END),
  Day4  = MAX(CASE D WHEN  4 THEN V END),
  Day5  = MAX(CASE D WHEN  5 THEN V END),
  Day6  = MAX(CASE D WHEN  6 THEN V END),
  Day7  = MAX(CASE D WHEN  7 THEN V END),
  Day8  = MAX(CASE D WHEN  8 THEN V END),
  Day9  = MAX(CASE D WHEN  9 THEN V END),
  Day10 = MAX(CASE D WHEN 10 THEN V END),
  Day11 = MAX(CASE D WHEN 11 THEN V END),
  Day12 = MAX(CASE D WHEN 12 THEN V END),
  Day13 = MAX(CASE D WHEN 13 THEN V END),
  Day14 = MAX(CASE D WHEN 14 THEN V END),
  Day15 = MAX(CASE D WHEN 15 THEN V END),
  Day16 = MAX(CASE D WHEN 16 THEN V END),
  Day17 = MAX(CASE D WHEN 17 THEN V END),
  Day18 = MAX(CASE D WHEN 18 THEN V END),
  Day19 = MAX(CASE D WHEN 19 THEN V END),
  Day20 = MAX(CASE D WHEN 20 THEN V END),
  Day21 = MAX(CASE D WHEN 21 THEN V END),
  Day22 = MAX(CASE D WHEN 22 THEN V END),
  Day23 = MAX(CASE D WHEN 23 THEN V END),
  Day24 = MAX(CASE D WHEN 24 THEN V END),
  Day25 = MAX(CASE D WHEN 25 THEN V END),
  Day26 = MAX(CASE D WHEN 26 THEN V END),
  Day27 = MAX(CASE D WHEN 27 THEN V END),
  Day28 = MAX(CASE D WHEN 28 THEN V END),
  Day29 = MAX(CASE D WHEN 29 THEN V END),
  Day30 = MAX(CASE D WHEN 30 THEN V END),
  Day31 = MAX(CASE D WHEN 31 THEN V END)
FROM (
  SELECT
    ID,
    V = CASE DATENAME(WEEKDAY, Date) WHEN 'Sunday' THEN Value2 ELSE Value1 END,
    D = DAY(Date)
  FROM Table1
  WHERE … /* perhaps, a condition to retrieve a specific month is due here */
) s
GROUP BY ID
; 
```

# .net - 如何使用 fluent API 添加主键 - Entity Framework EF 4.x Code First

> ID：10719543
> 
> 赞同：4
> 
> 时间：2012-05-23T12:05:18.810
> 
> 标签：.net, database, entity-framework, code-first

我需要映射一些自动生成的类，出于明显的原因我不想更改它们（它是自动生成的！）。

那么是否有可能使用实体框架的流畅 API（在我的情况下为 4.3）定义主键？由于 NULL 值，将属性作为 ComplexType 处理会导致 DbUpdateExcetion。向生成的类添加主键可能是一种解决方案，但不适合我，POCO 必须保持不变。请帮忙！谢谢。

目前我忽略了属性，因为...

> ```
> ModelValidationException 
> EntityType 'Attribute' has no key defined.  Define the key for this EntityType.
> EntitySet 'Attributes' is based on type 'Attribute' that has no keys defined. 
> ```

这是一个缩短的示例代码：

```
public class Item
{
   public ID {set;get;}
   public Attribute[] Attributes {set;get;}
} 
public class Attribute
{
   public SomeComplexType misc1 {set; get;}
   public SomeComplexType misc2 {set; get;}
}

public class ItemDb : DbContext
{
    public ItemDb(string connection) : base(connection)  {}

    public DbSet<Item> Items { get; set; }

    protected override void OnModelCreating(DbModelBuilder builder)
    {
      // currently I am ignoring the Attributes 
        builder.Ignore<Attributes>();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:21:29.670

您可以使用[HasKey](http://msdn.microsoft.com/en-us/library/gg671266%28v=VS.103%29.aspx)方法。

```
builder.Entity<FooBar>().HasKey(...); 
```

# sql-server - MSSQL 服务器上的数据库复制失败

> ID：10719544
> 
> 赞同：0
> 
> 时间：2012-05-23T12:05:22.117
> 
> 标签：sql-server

我正在尝试在与源数据库相同的 MSSQL 服务器上复制 MSSQL 数据库以用作测试版本。

我在 SQL Server Management Studio 中使用复制数据库向导，SQL Server 版本是 2008。

但是，它在最后一步失败，并出现一条完全模糊的错误消息，在事件日志中也没有提供任何信息：

包“CDW_XXXXX-_XXXXX-_1”失败。

有没有人有任何在 MSSQL 中复制数据库的经验，并且可以阐明我可能会寻求解决问题的地方。（我意识到这并不多，但任何提示都可能有所帮助！）

谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:13:03.680

我不会使用向导。

首先找出你需要处理的文件：

```
SELECT name, type_desc
  FROM [db].sys.database_files
  ORDER BY [type]; 
```

在大多数情况下，这将产生两行：

```
name        type_desc
----------- ---------
db          ROWS
db_log      LOG 
```

您将在一分钟内需要此信息。

现在，备份数据库：

```
BACKUP DATABASE db TO DISK = 'C:\wherever\db.bak'; 
```

完成后，您可以使用新名称恢复数据库。但是为了防止覆盖原始数据库的文件，您需要使用上面的信息来指定`WITH MOVE`参数。

```
RESTORE DATABASE db_copy FROM DISK = 'C:wherever\db.bak'
  WITH MOVE 'db' TO 'C:\wherever\db_copy_data.mdf', 
  MOVE 'db_log' TO 'C:\wherever\db_copy_log.ldf'; 
```

# windows - 应用程序在 Delphi 中关闭后如何启动自己的服务？

> ID：10719546
> 
> 赞同：1
> 
> 时间：2012-05-23T12:05:29.893
> 
> 标签：windows, delphi, service

我有一个应用程序，用户可以以两种不同的方式启动，作为普通应用程序或作为 Windows 服务。当服务已经运行时（系统托盘中有一个图标）并且用户尝试启动应用程序（不仅仅是通过单击托盘图标打开，而是再次单击开始>应用程序>等等），它说：“*应用程序已经作为服务运行，您要关闭服务并启动应用程序吗？* ” 当用户单击“是”时，应用程序将关闭服务并作为普通应用程序启动自身。

发生这种情况时，我放置了一个标志，表明用户曾经停止过服务，并且当他们关闭应用程序时，软件会看到该标志并且服务必须重新开始运行，因为它在作为普通应用程序启动之前已关闭。

我试着说：

```
WinExec(PChar('NET START MyApplicationName'),SW_shownormal); 
```

在`OnClose`事件中，在此行之前：

```
ExitProcess(0); 
```

但它说该服务已经在运行并关闭应用程序而不启动该服务，如果我把它放在该行之后，它根本不会做任何事情。
有没有办法做到这一点？

当我在它之前放置该行时，`ExitProcess(0);`它会打开一个带有以下消息的 cmd 窗口：

> “服务没有响应控制功能”

然后它关闭应用程序，关闭 cmd 窗口并且它不启动服务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T13:34:02.063

在我看来，您使问题过于复杂。启动和停止服务是一项复杂的操作，而且对于非管理员用户来说，默认情况下是禁止的。这一事实将使您的应用程序使用起来非常烦人。您将限制其对管理员用户的使用，并且还使用 UAC 对话框对他们进行装饰。没有人喜欢这样的应用程序。

另一种方法是让您的服务一直运行，但在标准桌面应用程序运行时使其处于非活动状态。当桌面应用程序启动时，它会使用某种形式的 IPC 与服务进行通信，并要求服务停止工作。该服务执行此操作，然后桌面应用程序继续执行。当桌面应用程序关闭时，会要求该服务恢复工作。您可能希望始终保持通信通道打开，以防止桌面应用程序异常终止——如果发生这种情况，服务将简单地重新启动。

现在，如果你真的想把工作做好，你可以让所有的工作处理总是发生在服务中。桌面应用程序只是服务的前端。在我看来，这似乎是这个应用程序最有效和最合乎逻辑的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:45:41.903

像这样写一个简单的批处理文件

```
@ECHO OFF
ping 1.1.1.1 -n 1 -w 10000 > NUL
NET START MyApplicationName 
```

然后在关闭程序之前运行执行此批处理文件。

```
ShellExecute(0, 'Open', YourBatchFile, nil, nil, SW_HIDE) 
```

# javascript - 查找属于由 JQuery 生成的数组的一部分的图像的宽度

> ID：10719547
> 
> 赞同：0
> 
> 时间：2012-05-23T12:05:29.970
> 
> 标签：javascript, jquery

我来自 Flash 背景（记住 Flash :) 但对 JS 很陌生，所以要温柔。

我正在围绕一个简单的 ul 构建一个轮播，其中每个 li 都是一个图像。
我在使用的列表中有一个包含所有图像的数组`var list = $('#carousel li img');`

如果我`list[0]`在控制台中检查，我看到它是一个`HTMLImageElement`并且宽度和 clientWidth 都列为 74，但如果我尝试在我的脚本中获取该宽度，我`(list[0].width, list[0].clientWidth, $(list[0]).width() etc)`只会得到 0。

如果我在标签中指定宽度，`img`那么我就可以了，但这似乎只是额外的输入，除非有一个很好的论据来包含它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:08:12.157

您需要先加载图像，然后才能访问其尺寸。

查看图像元素的`load`事件。请注意，使用已缓存的图像可能很困难。

您可以通过始终处理一个新`img`元素（`new Image`将创建一个）来解决这个问题。

# ruby-on-rails - Rails + 设计 + Facebook 身份验证

> ID：10719552
> 
> 赞同：2
> 
> 时间：2012-05-23T12:05:41.760
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, devise

我有一个 API 和一个使用 Rails 和 Devise gem 进行身份验证的 Web 应用程序。使用 Devise 和 Omniauth，我可以使用 facebook 进行注册，并通过网站使用 Facebook 登录。我的 API 使用 token_authenticable 和 TokensController 保护，所以当你想首先与我的 API 交互时，你必须将你的用户名和密码传递给 TokensController，它会给你一个有效的令牌，我的问题是当用户是用 facebook 注册，我应该将用户名和 facebook 令牌传递给 TokensController 以生成令牌吗？有一些标准的方法可以做到这一点吗？

感谢您的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T18:44:19.990

在我看来，只要符合您的标准，您就可以选择任何您想要的：

*   这是秘密
*   它可以为您检索
*   它具有最低安全性（不仅仅是“123pw”）

所以你有两个类似的选择：

*   使用 Facebook 令牌作为“密码”
*   使用 Devise 生成的密码

通常，您在使用 Devise 创建 Facebook 用户时会生成密码。我猜你的-call中有类似`:password => Devise.friendly_token[0,20]`的代码`User.create`？

加密密码通常为 60 个字符，Facebook 令牌最多可包含[255 个字符](https://developers.facebook.com/blog/post/572/)。所以我个人会选择设计生成的密码。它足够长以确保安全，并且您不依赖 API 来检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:36:13.763

感谢您的评论；在考虑了哪一个是最好的选择之后，这是我最终所做的：

注意：我将客户端和服务器端的代码（API）分开

**客户端**：

*   获取特定用户的 Facebook 令牌和 Facebook 用户 ID。
*   使用我上面得到的参数从*TokensController*调用 API 方法*Create方法。*

 ***服务器端**：

*   我收到 Facebook 令牌和 Facebook 用户 ID。
*   使用 Facebook 令牌，我从 API 获取 Facebook 用户 ID。
*   我验证来自请求的接收 UID 和 Facebook UID 是否相同。
*   如果 UID 相同，我会为我的应用程序生成一个随机令牌，并在响应中返回它。

注意：所有通信都是通过 HTTPS 完成的。*

# multithreading - 传递 QVector 通过信号/槽从工作线程到主线程

> ID：10719553
> 
> 赞同：4
> 
> 时间：2012-05-23T12:05:42.727
> 
> 标签：multithreading, qt, signals-slots, qthread

目前，我在将 QVector 传递给线程时遇到了一些麻烦。目前我有一个主线程（GUI-Thread）和一个经常发出 QVector 数组的工作线程。直接在向量内发出数据之前看起来不错。接收器是主线程中的一个槽，但是槽接收到的数据是乱码。

以下是我的代码的一些部分：

在工作线程中发出：

```
void Pipeline::process
{
    QVector<float> buffer(w * h * d);

    // filling the vector with RGB-Values

    emit this->pushBuffer(buffer, w, h, d);
} 
```

主线程中信号与槽的连接：

```
QObject::connect(this->_pipeline.data(), SIGNAL(pushBuffer(const QVector<float>, int, int, int)), this->ui->widgetFiltered, SLOT(setBuffer(const QVector<float>,int,int,int))); 
```

主线程中的插槽：

```
void GLWidget::setBuffer(const QVector<float> buffer, int dataSizeX, int dataSizeY, int dataSizeZ)
{
    // at this point the contents inside 'buffer' is garbled
} 
```

线程使用 QObject 的 moveToThread 启动，并在 main 方法中`QVector<float>`注册到元系统。`qRegisterMetaType< QVector<float> >("QVector<float>");`

返回后数据是否可能丢失`Pipeline::process`？我不确定`QVector`在这种多线程情况下，内部的隐式共享如何表现。

任何帮助，将不胜感激。

问候

狼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:17:19.337

a) 注册元类型 QVector。`app.exec()`在您的主要功能之前添加此行：

```
qRegisterMetaType<QVector<float> >("QVector<float>"); 
```

没有这个 QueuedConnection 将无法工作。

`Qt::QueuedConnection` b）如果您在连接后执行 moveToThread ，则明确说明您的信号和插槽是通过连接的，这应该可以在正确的线程中修复插槽执行。

# ios - Facebook Connect 始终仅在 iPad 上将应用返回到初始屏幕

> ID：10719554
> 
> 赞同：1
> 
> 时间：2012-05-23T12:05:45.840
> 
> 标签：ios, xcode, facebook, ipad

正如标题所示，我有一个使用 Facebook 连接来登录用户的应用程序。

在 iPhone 上这工作正常；它切换到 Facebook 应用程序，登录，然后在它离开的同一个地方返回到我的应用程序。

但是在 iPad 上（我手头只有一个 iPad 1，但我假设问题是所有 3 个），当它返回到我的应用程序时，它似乎已经完全重新启动它。它返回到初始屏幕，然后返回到登录屏幕。尽管 Facebook 应用程序正确登录，但用户仍陷入“不成功”登录的无限循环。

有谁知道为什么这会发生在 iPad 而不是 iPhone 上？

这个应用程序实际上是从一个更老的应用程序继承而来的，它只是 iPhone，为了简化事情，它基本上是这样的。图像等只是根据屏幕尺寸进行缩放，除了屏幕尺寸之外，iPhone 和 iPad 之间的代码没有区别。facebook 连接代码有一个“FBIsDeviceIPad”布尔值，但 afaik 仅用于在不使用 SSO 时设置弹出登录对话框的位置和大小。

编辑：进一步调查表明这可能是 OpenGL ES 的问题。应用程序在发送到后台时崩溃，因为 OpenGl ES 代码继续尝试制作动画等。Facebook 应用程序暂时将我的应用程序置于后台，因此应用程序崩溃并重新启动。

一旦我发现如何解决这个问题，我会更新这个，与此同时，如果有人已经处理过这种情况，我会欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:16:03.010

在您的`AppDelegate` 类中实现此代码

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
    return [facebook handleOpenURL:url];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T01:01:13.353

对我来说，是权限产生了影响。我在 iPhone 上遇到了同样的问题。我减少了权限，应用程序停止这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T14:23:05.833

原来这是问题编辑中指出的内存问题。仍然没有解决如何让它工作，但这至少是问题的原因。

# c# - 具有多种类型的 C# 泛型类型推断

> ID：10719557
> 
> 赞同：4
> 
> 时间：2012-05-23T12:05:56.553
> 
> 标签：c#, .net, generics

我有以下通用方法将一种类型的输入对象序列化为超类型，如下所示：

```
public string SerialiseAs<TResult, TInput>(TInput input) where TInput : TResult
{
    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(TResult));
    MemoryStream stream = new MemoryStream();
    ser.WriteObject(stream, input);
    stream.Position = 0;
    StreamReader reader = new StreamReader(stream);
    return reader.ReadToEnd();
} 
```

我必须调用这个方法来指定两个泛型类型，如下所示：

```
MySubType x = new MySubType();
string json = SerialiseAs<MySuperType, MySubType>(x); 
```

我的问题是，为什么`TInput`在这种情况下不能推断？是因为`TResult`它实际上没有用作返回类型吗？以下代码更简洁，但由于缺少输入类型而无法编译：

```
MySubType x = new MySubType();
string json = SerialiseAs<MySuperType>(x); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:09:11.510

为什么不直接写成这样：

```
public string SerialiseAs<TResult>(TResult input)
{
    DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(TResult));
    MemoryStream stream = new MemoryStream();
    ser.WriteObject(stream, input);
    stream.Position = 0;
    StreamReader reader = new StreamReader(stream);
    return reader.ReadToEnd();
} 
```

由于`TInput`派生自`TResult`，因此您根本不需要指定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T12:10:22.180

> 我的问题是，为什么在这种情况下不能推断 TInput ？

它可以 - 它是`TResult`无法推断的，并且无法指定“部分”推断。

您有时*可以*做的是将类型参数分为泛型*类型*和泛型*方法*的类型参数，因此您最终会得到：

```
// Explicitly state TResult, and infer TInput
Serializer<MySuperType>.Serialize(x); 
```

# jquery - 如果每个图形在可滚动的 div 中可见

> ID：10719562
> 
> 赞同：0
> 
> 时间：2012-05-23T12:06:29.590
> 
> 标签：jquery

我有一个可滚动（jQuery 工具）中的项目列表...它一次显示 3 个项目/数字，当单击下一个按钮时，它显示下一个 3...

我想要做的事情是，例如，我想要调用一个 web 服务，当可滚动区域内显示的项目、未显示在可滚动区域中的项目应该什么都不做 - 只有在单击下一步按钮时，并显示下 3 个项目...

我的 HTML 输出如下所示：

```
<div id="adbelt">
<div class="ad-container">
    <div id="prevnext">
        <a class="next carouselbutton"><span>next</span></a>
        <a class="prev carouselbutton"><span>prev</span></a>
    </div>
    <div id="belt">
        <div class="scrollable" id="scrollable">
            <div class="items">
                <figure>
                    <a target="_blank" title="http://www.dis-play.dk/" href="http://www.dis-play.dk/">

                    </a>
                    <figcaption>
                        <span>Skarp</span>
                        <div class="fig-text">og lige til</div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_0$hiddenFieldAdGuid" id="ctl10_phadlist_0_hiddenFieldAdGuid" value="B2A276D78E764528900B723F144117A7" />
                </figure>

                <figure>
                    <a target="_blank" title="DIS/Play" href="http://www.dis-play.dk">
                        <img src="~/media/DISPLAY/Default/defaultAdImage.ashx" class="slide-banner" alt="Kaffe" width="300" height="150" />
                    </a>
                    <figcaption>
                        <span>Forbrugsforeningen 2</span>
                        <div class="fig-text">har det hele</div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_1$hiddenFieldAdGuid" id="ctl10_phadlist_1_hiddenFieldAdGuid" value="75011C876D04465D865B34FA6DC2CBE3" />
                </figure>

                <figure>
                    <a target="_blank" title="http://www.dis-play.dk/" href="http://www.dis-play.dk/">

                    </a>
                    <figcaption>
                        <span>Skarp</span>
                        <div class="fig-text">og lige til</div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_2$hiddenFieldAdGuid" id="ctl10_phadlist_2_hiddenFieldAdGuid" value="B2A276D78E764528900B723F144117A7" />
                </figure>

                <figure>
                    <figcaption>
                        <span></span>
                        <div class="fig-text"></div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_3$hiddenFieldAdGuid" id="ctl10_phadlist_3_hiddenFieldAdGuid" value="BE7DA9601D4840B981A1E5305E01786F" />
                </figure>

                <figure>
                    <a target="_blank" title="DIS/Play" href="http://www.dis-play.dk">
                        <img src="~/media/DISPLAY/Default/defaultAdImage.ashx" class="slide-banner" alt="Kaffe" width="300" height="150" />
                    </a>
                    <figcaption>
                        <span>Forbrugsforeningen 2</span>
                        <div class="fig-text">har det hele</div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_4$hiddenFieldAdGuid" id="ctl10_phadlist_4_hiddenFieldAdGuid" value="75011C876D04465D865B34FA6DC2CBE3" />
                </figure>

                <figure>

                    <figcaption>
                        <span></span>
                        <div class="fig-text"></div>
                    </figcaption>
                    <input type="hidden" name="ctl10$phadlist_5$hiddenFieldAdGuid" id="ctl10_phadlist_5_hiddenFieldAdGuid" value="BE7DA9601D4840B981A1E5305E01786F" />
                </figure>
            </div>
        </div>
    </div>
</div> 
```

我试过这个：

```
 $("#belt figure").each(function () {

    if ($(this).filter(':visible')) {
        alert("visible");
        //Do something, like calling a webservice
    } else {
        alert("not visible");
        //Dont call webservice
    }

}); 
```

我试过查看 jquery.appear 插件，但它似乎不支持我想要的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:07:56.867

如果这是您唯一感兴趣的数字，您可能只循环浏览可见的数字

```
$("#belt figure:visible").each({...}); 
```

或者，如果您希望根据每个人物的可见性对其进行处理，我认为您正在寻找以下`is()`方法：

```
if ($(this).is(":visible")) {
    //Do something
} else {
    //Do something else
} 
```

**编辑：**我现在看到你在尝试别的东西。如果您想查看它是否在某个区域内可见，则需要执行其他操作。`:visible`如果元素不是`display:none`或，则为真`visibility:hidden`。

因此，您需要检查可滚动区域的高度和`scrollTop`，然后`offset`根据这些数字检查每个图形的高度以查看它是否可见

**编辑2：你**[有这样](http://jsbin.com/icuber/edit#javascript,html,live)的想法吗？

# haskell - 在使用 Vim 的文本换行的 Haskell 注释中自动继续前导破折号

> ID：10719574
> 
> 赞同：5
> 
> 时间：2012-05-23T12:07:13.937
> 
> 标签：haskell, vim, comments

我正在用 Vim 编辑我的 Haskell 源文件，并设置了 'textwidth' 选项来自动换行超长行。所以我的 ~/.vimrc 看起来像：

```
set tw=78 
```

现在，当我编写超过 78 个字符的行时，最后一个单词会自动转到下一行。这对于在源文件中编写注释非常有用。好消息是在注释中，当最后一行太长并被自动换行时，前导注释符号会自动插入每行的开头。但这仅适用于 C 风格的注释，但不幸的是不适用于 Haskell 前导破折号。

所以，例如在一个 JS 文件中

```
/**
 * This is a very long comment which is longer than 78 chars, yeah really 
 * longer than 78 chars... 
```

包裹得很好

```
// This is a very long comment which is longer than 78 chars, yeah really 
// longer than 78 chars... 
```

所以现在如果 Haskell 评论中发生同样的事情会很好，比如

```
------------------------------------------------------------------------------
-- | This is a very long module description which is longer than 78 chars,
--   yeah really longer than 78 chars... 
```

有谁知道这是否以及如何可能？此行为在哪里指定？:set formatexpr 或 :set formatoptions 对我有帮助吗？

在此先感谢您的帮助！

=<<约翰内斯

/编辑：顺便说一句，我使用 vim 7.3.x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:34:20.723

您应该检查`formatoptions`设置；对我来说，它具有价值`croql`。`c`表示注释在下一行继续。看`:help 'formatoptions'`

```
:set formatoptions=croql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:47:26.770

我不是`vim`用户（`haskell-mode`通常`emacs`只是“做正确的事”，优雅地适应某种缩进风格），但以下似乎适用于我的快速测试：

```
:set comments=:--\ ,sr:{-,m:\ ,ex:-} 
```

这没有`-- |`具体处理，但我实际上从未在 Haskell 中看到过这样的缩进：

```
-- | Bla Bla
--   continues right under the Bla 
```

缩进这样的评论更为常见：

```
-- | Usually a one-line short description.
--
-- Continued like this, with a longer description. 
```

或者，这个变体：

```
-- | Bla bla slightly longer than one line description
-- bla bla.
--
-- Bla bla additional details. 
```

如果您想要一段长时间运行的描述您的声明的正文，您可以将其作为多行注释开始：

```
{-|
The definition of 'myfunc', Act I, Chapter 1\. Bla bla bla bla
bla bla...
-} 
```

# silverlight - 在 Windows Phone 中拨打电话

> ID：10719577
> 
> 赞同：2
> 
> 时间：2012-05-23T12:07:30.410
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序，它需要在发生某些事件时进行自动呼叫，而无需用户干预。是否可以？（目的是合法的）

如果没有，是否有任何其他方式可以从我的 Windows Phone 应用程序向另一部手机发送一些通知或消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:12:23.427

应用程序拨打电话的唯一方法是使用[`PhoneCallTask`](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.phonecalltask%28v=vs.92%29.aspx)，这需要用户交互，所以恐怕你不走运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:12:57.083

您可以在 Mango 或更高版本（因此 SDK 7.1 及更高版本）上启动[PhoneCallTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.phonecalltask%28v=vs.92%29.aspx)​​ - 这可以预先填写，但拨打电话的操作必须由手机用户完成。

同样，SMS 消息传递也需要确认（毕竟，这两个操作都需要花钱）——如果您需要电话间通信，您可以通过网络服务和推送通知来实现自己。

# php - 将子窗口的循环值传递给父窗口，反之亦然

> ID：10719579
> 
> 赞同：0
> 
> 时间：2012-05-23T12:07:54.433
> 
> 标签：php, javascript, mysql

我有一个名为订阅者名称的文本框。当我双击该文本框时，应打开一个子窗口。在该子窗口中，使用 mysql 查询的 while 循环显示订阅者名称列表。我的问题是当我双击它时将传递一个**未定义**的值。这个问题是由于从 db 表中循环订阅者名称造成的。我该如何解决？请尽快帮助我。这是我的代码。

```
<script type="text/javascript">
function displaymessage(){ 
  opener.document.cash_entry.sub_name.value = document.subscriber.subname.value;
  self.close();
}
</script>
<form>
<?php
$sel=mysql_query("select * from add_ticket");
while($row=mysql_fetch_array($sel)) { 
  $subscriber=$row['subscriber'];
?>
  <input type="text" name="subid" id="subid" value="<?php echo $subscriber; ?>"
  ondblclick="displaymessage()" readonly="true">
<?php } ?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:15:44.070

您没有命名您的表单，并且您对字段的命名方式与 HTML 代码中的不同，并且您拥有多个同名元素，如果多个元素则使其成为一个数组

做这个

```
<script type="text/javascript">
function displaymessage(fld){ 
  opener.document.cash_entry.sub_name.value = fld.value;
  self.close();
}
</script>
<form>
<?php
$sel=mysql_query("select * from add_ticket");
while($row=mysql_fetch_array($sel)) { 
  $subscriber=$row['subscriber'];
?>
  <input type="text" name="subname" 
  id="subid<?php echo $subscriber; ?>" 
  value="<?php echo $subscriber; ?>"
  ondblclick="displaymessage(this)" readonly="true">
<?php } ?>
</form> 
```

为什么不

```
 <input type="button" value="<?php echo $subscriber; ?>"
  onclick="displaymessage(this)" > 
```

对于多个值，您可以执行

```
function displaymessage(fld){ 
  var parts = fld.value.split("|");
  opener.document.cash_entry.sub_name.value = parts[0];
  opener.document.cash_entry.sub_id.value = parts[1];
  self.close();
}

  <input type="button" 
  value="<?php echo $subscriber; ?>|<?php echo $subscriberID; ?>"
  onclick="displaymessage(this)" > 
```

# svn - 颠覆发布管理系统

> ID：10719580
> 
> 赞同：0
> 
> 时间：2012-05-23T12:07:55.537
> 
> 标签：svn, release-management

我们正在使用 Subversion，一切进展顺利。我们正在积极使用适当的分支和标签来指示适当级别的版本。

但是，我们正在寻找一个发布管理工具。本质上，它需要做的事情相对简单：

1.  从 Subversion 获取相关代码（基于标签）。
2.  做准备工作（例如：把它放在一个 tar 中，排除某些目录）。
3.  审计跟踪（“用户 X 正在执行此版本”）
4.  电子邮件跟踪（发送一封表明发布请求的电子邮件）。
5.  执行安装。

我们之前创建了自己的基于 Web 的系统来处理这类事情（发布请求）。真的，这更多是我们所追求的*工作流程。*

我知道 SVN 本身可以用来更新不同的服务器，但这不适合我们。由于正在使用的安全层，我们不希望使用 SVN 本身更新生产服务器。目前，我们的运营团队会根据需要提取一个 tar 文件以供发布。开发人员没有这种级别的访问权限，因此存在一定程度的分离。

我们不需要*构建*管理工具，因为该软件在 Perl 中，我们对它的运行方式感到满意。在 Subversion 中一切都安全无虞。关键是部署，一旦一切都标记好并准备就绪！

期待您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:06:06.690

我不倾向于使用这些东西，因为我发现保持部署最新和正确所需的工作非常困难，尽管我想这取决于您的软件和您拥有的部署目标类型（例如，没办法我们会在我的舞台上自动部署到客户端吗！）。

但是，来自 Thoughtworks 的[Go或](http://www.thoughtworks-studios.com/go-agile-release-management)[uDeploy](http://www.urbancode.com/html/products/deploy;jsessionid=27D2E9240832A6C8F3731445F2BDCC10)可能适合您。我会非常小心地使用昂贵的工具，我使用的工具太可怕了，我们会尽快将它装箱。

您可能想快速查看一下 Jenkins，我知道它会为您解决一个已解决的问题，但它可以（除了构建 - 它仍然可以运行您的 perl 脚本）打包构建并进行电子邮件和审核您想要的工作流程。它可能能够运行安装，但这取决于您的安装系统。Jenkins 是一款优秀的软件，无论如何都值得研究。我认为它会适合您现有的系统，而您只需稍作妥协。

对于实际部署，您可以使用[Puppet 之](http://puppetlabs.com/)类的工具，它还会为您提供有关已完成步骤的一些反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:28:12.860

一种传统的方法是使用`automake`分发 tarball，然后使用简单的 shell 脚本执行附加步骤。这应该写得很快，而且很容易改变。

# ruby - 如何使用 Puppet Ruby DSL 定义类继承

> ID：10719584
> 
> 赞同：4
> 
> 时间：2012-05-23T12:08:08.460
> 
> 标签：ruby, configuration-management, puppet

我有一个木偶类“Ruby”：

```
# init.pp
class ruby {
  package { 'libldap-ruby1.8':
    ensure => 'installed'
  }
} 
```

然后我有一个用 Puppet Ruby DSL 编写的类，它应该继承这个 Puppet 类：

```
# ldap.rb
hostclass 'ruby::ldap' do
  (...)
end 
```

如何定义 ruby​​::ldap 继承 ruby​​？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:35:20.307

[不幸的是，Google Groups 上的Puppet](https://groups.google.com/d/topic/puppet-users/RtMbu8yFZCc/discussion)开发人员没有回答任何相关问题（链接 1 、[链接 2](https://groups.google.com/d/topic/puppet-users/6RbsbakI2J0/discussion)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T10:37:16.457

[更新](https://groups.google.com/forum/#!topic/puppet-dev/UsDaDGAneEE)，现有的 ruby​​-dsl 已弃用。存在发布不向后兼容的新版本的计划。我不认为旧的 ruby​​-dsl 曾经支持继承。

如果您喜欢 puppet ruby​​-dsl 提供的灵活性，您也可以喜欢 chef。

# blackberry - 将焦点放在黑莓自定义按钮字段上

> ID：10719596
> 
> 赞同：0
> 
> 时间：2012-05-23T12:08:41.667
> 
> 标签：blackberry

我是黑莓新手，

我正在使用自定义图像按钮字段，如选项卡，我有 3 个图像按钮（如选项卡）和 3 个屏幕。所有 3 个屏幕都有 3 个图像按钮，如果我单击 2 个图像按钮，它会导航到下一个屏幕。它只关注第一个图像按钮（第一个选项卡），但我想要，它将关注第二个图像按钮，任何人都可以在这里帮助我我的代码，

ImageButtonField.java

```
public class ImageButtonField  extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

String text;
int mWidth;
int mHeight;

public ImageButtonField(Bitmap normalImage, Bitmap focusedImage, 
    Bitmap activeImage,String text) {
    super(CONSUME_CLICK);
    this.text=text;
    mNormal = normalImage;
    mFocused = focusedImage;
    mActive = activeImage;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);     
    setBorder(BorderFactory
                .createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE, BorderFactory
            .createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

protected void paint(Graphics graphics) {
    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(),
            bitmap, 0, 0);
    if(text!=null)
    {
        graphics.setColor(Color.WHITE);
     graphics.setFont(getFont().derive(Font.BOLD, 28));
    // graphics.
    graphics.drawText(text,50, 30);
    }

}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);

}
} 
```

HomeScreen.java

```
public final class HomeScreen extends MainScreen implements FieldChangeListener {

private Bitmap homeImageOn;
private Bitmap activateImageOn;
private Bitmap socialImageOn;
private Bitmap homeImageOff;
private Bitmap activateImageOff;
private Bitmap socialImageOff;
private Bitmap logo;
private Bitmap driveNowTextBgImage;
private Bitmap webLink1Image;
private Bitmap webLink2Image;

ImageButtonField homeBitmapImageResource;
ImageButtonField activateBitmapImageResource;
ImageButtonField socialBitmapImageResource;
ImageButtonField logoBitmapResource;
ImageButtonField driveNowBgImageButtonField;

BitmapField webLink1BitmapResorce;
BitmapField webLink2BitmapResorce;

/**
 * Creates a new HomeScreen object
 */
public HomeScreen() {
    // Set the displayed title of the screen
    HorizontalFieldManager tabHorizantalManager = new HorizontalFieldManager();
    VerticalFieldManager contentVerticalManager = new VerticalFieldManager();

    homeImageOn = Bitmap.getBitmapResource( "home-on.png");
    activateImageOff = Bitmap.getBitmapResource( "activate-off.png");
    socialImageOff = Bitmap.getBitmapResource( "social-off.png");
    homeImageOff = Bitmap.getBitmapResource( "home-off.png");
    activateImageOn = Bitmap.getBitmapResource( "activate-on.png");
    socialImageOn = Bitmap.getBitmapResource( "social-on.png");

    Bitmap bitmap = Bitmap.getBitmapResource("bg.png");
    getMainManager().setBackground(
            BackgroundFactory.createBitmapBackground(bitmap));

    homeBitmapImageResource = new ImageButtonField(homeImageOff,
            homeImageOn, homeImageOff, null);
    activateBitmapImageResource = new ImageButtonField(activateImageOff,
            activateImageOn, activateImageOff, null);
    socialBitmapImageResource = new ImageButtonField(socialImageOff,
            socialImageOn, socialImageOff, null);

    tabHorizantalManager.add(homeBitmapImageResource);
    tabHorizantalManager.add(activateBitmapImageResource);
    tabHorizantalManager.add(socialBitmapImageResource);

    add(tabHorizantalManager);

    socialBitmapImageResource.setChangeListener(this);
    activateBitmapImageResource.setChangeListener(this);
    homeBitmapImageResource.setChangeListener(this);

}

public void fieldChanged(Field field, int context) {
    // TODO Auto-generated method stub

    if (field.equals(homeBitmapImageResource)) {
        UiApplication.getUiApplication().pushScreen(new HomeScreen());
    }
    if (field.equals(activateBitmapImageResource)) {

        ActivateScreen activateScreen = new ActivateScreen();
        UiApplication.getUiApplication().pushScreen(activateScreen);            
        System.out.println("Button pressed: ");
    }
    if (field.equals(socialBitmapImageResource)) {
        UiApplication.getUiApplication().pushScreen(new SocialScreen());

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:57:59.017

我在我的解决方案代码中找到了上述问题的解决方案，

```
protected void onDisplay(){
socialImageButtonField.setFocus(); 
} 
```

# javascript - d3.js 如何在水平对数缩放轴上放置自定义标签

> ID：10719598
> 
> 赞同：2
> 
> 时间：2012-05-23T12:08:48.017
> 
> 标签：javascript, d3.js

我正在使用 d3.js 绘制图表， `d3.scale.log` 用于 x 轴并结合自定义标签。不幸的是，标签相互碰撞......关于如何使这项工作的任何提示？

```
var width = 400;
var x = d3.scale.log().domain([1, 1000]).range([0, width]);

var formatSi = d3.format(".4s");
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(function(d, i) {
        return formatSi(d) + 'Hz'
    });

var svg = d3.select("#chart")
    .append("svg").attr("width", width)
    .attr("height", 200)
    .append("g").attr("transform", "translate(20,20)");

([1, 3, 6, 9]).forEach(function(d) {
    x.domain([1, Math.pow(10, d)]);
    svg.append("g").attr("class", "axis x")
        .attr("transform", "translate(0," + d * 2 + "0)")
        .call(xAxis);
});​ 
```

此代码的一个工作示例位于[jsfiddle](http://jsfiddle.net/qAHC2/13/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T07:26:24.847

弄清楚了。诀窍是*不*使用`.tickFormat`提供格式化功能，而是使用`.ticks` 方法将提供的格式化功能应用于`.tickFormat` 比例的方法。

```
var width = 400;
var x = d3.scale.log().domain([1, 1000]).range([0, width]);

var formatSi = d3.format(".4s");
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
​    .ticks(5,function(d, i) {
        return formatSi(d) + 'Hz';
    });

var svg = d3.select("#chart")
    .append("svg").attr("width", width)
    .attr("height", 200)
    .append("g").attr("transform", "translate(20,20)");

([1, 3, 6, 9]).forEach(function(d) {
    x.domain([1, Math.pow(10, d)]);
    svg.append("g").attr("class", "axis x")
        .attr("transform", "translate(0," + d * 2 + "0)")
        .call(xAxis);
}); 
```

结果仍然不完全令人满意，因为当刻度靠近时，系统似乎无法放置标签......

# jquery - 勾选复选框 - 一定有比这更优雅的方式吗？

> ID：10719600
> 
> 赞同：2
> 
> 时间：2012-05-23T12:08:55.113
> 
> 标签：jquery

我有一堆相关的复选框，带有整数值。我试图包含一个简单的逻辑：

*   当您勾选一个框时，所有值 <= 的框都应自动勾选。
*   当您取消选中一个框时，所有具有值 > 的框都应该自动取消选中。

这就是我所拥有的，它有效，但占用了 16 行并且看起来有点重复。有没有更好的办法？

```
$('.chk_level').click(function(event){
    var this_val        = parseInt( $(this).val() );
    var this_is_checked = $(this).is(':checked');
    $('.chk_level').each(function(i,chk){
        var $chk = $(chk);
        if ( this_is_checked ){
            if ( parseInt( $chk.val() ) <= this_val ){
                $chk.attr('checked', true);
            }
        }else{
            if ( parseInt( $chk.val() ) > this_val ){
                $chk.attr('checked', false);
            }
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:25:59.027

您的逻辑似乎很奇怪，就好像您取消选中更高的值一样，然后您可以取消选中所有复选框，然后只检查所需的较低值。考虑到这一点，以下工作方式与您的 OP 示例相同：

```
$('.chk_level').click(function(e){
    var $el = $(this);
    $(".chk_level").prop("checked", false);
    var $chk = $(".chk_level").filter(function() {
        return parseInt($(this).val(), 10) <= parseInt($el.val(), 10);
    }).prop("checked", true);
}); 
```

[**示例小提琴**](http://jsfiddle.net/LKPT9/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:19:17.513

使用[filter()](http://api.jquery.com/filter/)并批量检查/取消检查元素会使代码更短：

```
$(".chk_level").click(function() {
    var predicate, $this = $(this),
        this_val = parseInt($this.val(), 10),
        this_is_checked = $this.is(":checked");
    if (this_is_checked) {
        predicate = function() {
            return parseInt($(this).val(), 10) <= this_val;
        };
    } else {
        predicate = function() {
            return parseInt($(this).val(), 10) > this_val;
        };
    }
    $(".chk_level").filter(predicate).prop("checked", this_is_checked);
}); 
```

# drupal - Drupal 升级:: 需要将 pagerquery 重写到版本 7

> ID：10719602
> 
> 赞同：0
> 
> 时间：2012-05-23T12:09:04.723
> 
> 标签：drupal

我需要重写 pagerquery，我尝试了几个添加标签的选项，extend(PagerDefault)，但对我没有任何帮助：请帮忙。

我的版本 6 代码是：

```
$sql = 'SELECT DISTINCT(n.nid), n.sticky, n.title, n.created FROM {node} n '.$sort_join.' WHERE n.uid = %d AND n.type = "case" AND n.status = 1 ORDER BY '. $order; 
```

$sql_count = 'SELECT COUNT(DISTINCT(n.nid)) FROM {node} n WHERE n.uid = %d AND n.type = "case" AND n.status = 1';

```
$args = array('uid' => $user->uid);

$sql = db_rewrite_sql($sql);

$sql_count = db_rewrite_sql($sql_count);

if ($pager) {

$result = pager_query($sql, variable_get('default_nodes_main', 10), 0, $sql_count, $args);
dsm($result);

}

else {

$result = db_query_range($sql, $args, 0, variable_get('feed_default_items', 10));
}

$num_rows = FALSE;
while ($node = db_fetch_object($result)) {
$output .= node_view(node_load($node->nid), 1);
$num_rows = TRUE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:24:28.273

在不知道连接表的名称的情况下，这并不完整，但应该可以帮助您入门：

```
$query = db_select('node', 'n')
  ->fields('n', array('nid', 'sticky', 'title', 'created'))
  ->condition('n.uid', $user->uid)
  ->condition('n.type', 'case')
  ->condition('n.status', 1)
  ->extend('PagerDefault')
  ->limit(variable_get('default_nodes_main', 10))
  ->addTag('node_access')
  ->orderBy('col_name');

$query->join('table_to_join', 'table_alias', 'table_alias.nid = n.nid');

foreach ($query->execute() as $row) {
  // Do what you need to
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:14:12.760

```
if ($vidw == 'my_cases' or $vidw == 'my') {                   // including private
    switch ($sort_by) {
        case 'rated':
            $order = 'n.sticky DESC, vc.value DESC';
            $sort_join = 'LEFT OUTER JOIN {votingapi_cache} vc ON n.nid = vc.content_id AND vc.content_type = "node" AND vc.function = "average"';
            break;
        case 'discussed':
            $order = 'n.sticky DESC, nc.comment_count DESC';
            $sort_join = 'LEFT OUTER JOIN {node_comment_statistics} nc ON n.nid = nc.nid';
            break;
        case 'viewed':
            $order = 'n.sticky DESC, nc.totalcount DESC';
            $sort_join = 'LEFT OUTER JOIN {node_counter} nc ON n.nid = nc.nid';
            break;
        case 'recent':
        default:
            $order = 'n.sticky DESC, n.created DESC';
            $sort_join = '';
            break;
    }
    // from taxonomy_select_nodes
    $sql = 'SELECT DISTINCT(n.nid), n.sticky, n.title, n.created FROM {node} n '.$sort_join.' WHERE n.uid = %d AND n.type = "case" AND n.status = 1 ORDER BY '. $order;
    $sql_count = 'SELECT COUNT(DISTINCT(n.nid)) FROM {node} n WHERE n.uid = %d AND n.type = "case" AND n.status = 1';
    $args = array('uid' => $user->uid);
    $sql = db_rewrite_sql($sql);
    $sql_count = db_rewrite_sql($sql_count);
    if ($pager) {
        $result = pager_query($sql, variable_get('default_nodes_main', 10), 0, $sql_count, $args);
    }
    else {
        $result = db_query_range($sql, $args, 0, variable_get('feed_default_items', 10));
    }
    // $output .= taxonomy_render_nodes($result);
    $num_rows = FALSE;
    while ($node = db_fetch_object($result)) {
        $output .= node_view(node_load($node->nid), 1);
        $num_rows = TRUE;dsm($output);
    }
    if ($num_rows) {
        $output .= theme('pager', NULL, variable_get('default_nodes_main', 10), 0);
    }
    else {
        $output .= '<p>'. t('There are currently no visible cases in this category.') .'</p>';
    }
} 
```

在上面的 drupal 6 代码中，我更新了给我结果的查询，但 node_view() 和 theme() 不起作用。

# java - 如何使用户放置的元素可点击？

> ID：10719603
> 
> 赞同：2
> 
> 时间：2012-05-23T12:09:05.400
> 
> 标签：java

我有一个程序，一个人可以在屏幕上放置一个代表扭曲门的元素。我想知道之后如何找到元素的位置，以便程序可以捕获该区域的点击。

这是我目前拥有的：

```
int xCoord22[];
int yCoord22[];
int numSquare22;

int warpGate = 0;

public void init()
{

    warpgate = getImage(getDocumentBase(),"image/warpgate.png");

    xCoord22 = new int[100];
    yCoord22 = new int[100];
    numSquare22 = 0;
}

public void paint(Graphics g)
{

    warpGate(g);
}

public void warpGate(Graphics g)
{
    //Checks if warpgate == 1 then will make the warp gate where the user chooses
    if(warpGate == 1)
    {

        g.drawImage(warpgate,510,820,100,100,this);
        //Use the custom cursor  
        setCursor(cursor2);  

    }

    //Building the pylons
    if(Minerals >= 150)
    {

        for (int k = 0; k < numSquare22; k++)
        {

            g.drawImage(warpgate,xCoord22[k],yCoord22[k],120,120,this);
        //Makes cursor normal.
        setCursor(new Cursor(Cursor.DEFAULT_CURSOR));
        }
    }
}

public boolean mouseDown(Event e, int x, int y) 
{
    if(warpGate == 1)
    {
        if(Minerals >= 150)
        {
            xCoord22[numSquare22] = x;
            yCoord22[numSquare22] = y;
        numSquare22++;
        handleWarpGatePlacement();
        repaint();
        }
    }

    //Checks to see if the person clicks on the warpGate icon so you can build it
    if(x > 1123 && x < 1175 && y > 782 && y < 826 && onNexus == 1 && Minerals >= 250)
    {
        warpGate = 1;

    } 
```

所以，基本上，当你点击时，`x > 1123 && x < 1175 && y > 782 && y < 826`你可以放置一个传送门。我怎样才能做到这一点，以便您以后将它放在任何地方，您只需单击它，它就会像一个`system.out.print("hey");`或其他东西一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:24:58.893

您可以将您的 warpgate 图像放在 JLabel 中并添加`MouseListener`：

```
label.addMouseListener(new MouseAdapter() {
 public void mouseClicked(MouseEvent e) {
   System.out.print("hey");
 }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:10:46.100

不幸的是，您的代码并不是真正的 SSCCE，但我猜这段代码在某种组件中（也许是 JLabel？）。您已经在那里实现了一个 MouseListener。现在您只需要保存放置的 warpgate 的位置，然后检查该位置而不是 MouseListener 中的常量值：

```
int minerals = 300;
Vector<int[]> warpgatePosition = new Vector<int[]>();
private final int warpgateDimX = 52, warpgateDimY = 44;

public boolean mouseDown(Event e, int x, int y) {
  boolean clickedOnAWarpgate = false;
  for (int[] p : warpgatePosition) {
    if (x > p[0] && x < p[0] + warpgateDimX && y > p[1] && y < p[1] + warpgateDimY) {
      clickedOnAWarpgate = true;
      break;
    }
  }
  if (clickedOnAWarpgate) {
    // we can not build one as there is already one there
    System.out.print("hey");
  } else {
    if (minerals >= 150) {
      warpgatePosition.add(new int[] {x - warpgateDimX / 2, y - warpgateDimY / 2});
      repaint();
    }
  }
  return false;
} 
```

所以我刚刚建立了一个带有 Warpgate 位置的向量。

编辑：当然，你的曲门的位置（以及矿物数量、曲门大小等）最好不要保存在这个类中。我只是把它们放在那里以使其紧凑。

# javascript - 是否有可能知道 HTTPRequest 的目标 DOMWindow？

> ID：10719606
> 
> 赞同：4
> 
> 时间：2012-05-23T12:09:15.040
> 
> 标签：javascript, gwt, firefox-addon, httprequest

我正在开发一个 firefox 扩展，它要求我通过过滤掉一些 HTTPRequest 来拦截页面加载。我是按照[这里](https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads)给出的说明来做的。请注意，我的问题来自此链接的内容。

我使用了[HTTPObservers](https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads#HTTP_Observers)部分下给出的方法。它奏效了，我确实能够提取发出的请求的相应 url。

但是，我真正需要的另一件事是获取即将加载与 HTTPRequest 有关的内容的目标 DOM 窗口。是否可以使用 HTTPObservers？

在上面的链接中，使用[WebProgressListeners](https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads#WebProgressListeners)描述了另一种方式。

我也试过了。onLocationChange() 方法仅返回 url 栏中的位置更改。是否有可能使用这些进度侦听器中的任何一个来获取 HTTPRequest url？因为如果是这样，那么如果我理解正确，aWebProgress.DOMWindow 会给我我需要的窗口。

注意：我将 gwt 用于扩展，将 JSNI 用于上述部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:22:08.767

您通常可以通过使用附加到请求或其负载组的[`nsILoadContext`接口（遗憾的是几乎没有记录）来做到这一点。](http://www.oxymoronical.com/experiments/apidocs/interface/nsILoadContext)以下是您将如何执行此操作：

```
function getWindowForRequest(request)
{
  if (request instanceof Components.interfaces.nsIRequest)
  {
    try
    {
      if (request.notificationCallbacks)
      {
        return request.notificationCallbacks
                      .getInterface(Components.interfaces.nsILoadContext)
                      .associatedWindow;
      }
    } catch(e) {}

    try
    {
      if (request.loadGroup && request.loadGroup.notificationCallbacks)
      {
        return request.loadGroup.notificationCallbacks
                      .getInterface(Components.interfaces.nsILoadContext)
                      .associatedWindow;
      }
    } catch(e) {}
  }

  return null;
} 
```

请注意，此函数预计会`null`偶尔返回 - 并非每个 HTTP 请求都与一个窗口相关联。

# jquery - 展开元素时在 contenteditable 中保留插入符号的位置？

> ID：10719610
> 
> 赞同：0
> 
> 时间：2012-05-23T12:09:43.053
> 
> 标签：jquery, selection, contenteditable, rangy

我有这个问题，我试图在[这个 jsFiddle](http://jsfiddle.net/vYmHj/)中展示。我有 contenteditable ，其中是简单的 html - 只有文本和一个`<B>`元素。我的问题是关于插入符号位于`<B>`元素内部某处并且用户点击“X”键的情况。然后`<B>`元素成功展开，但插入符号改变位置并移动到展开`<B>`元素的开头。

我希望插入符号不改变其位置并保持在 samoe 位置。可能吗 ？最好使用[Rangy 库](http://code.google.com/p/rangy/)来解决？

出于这个问题的目的，代码被简化：

```
<div id="contenteditable" contenteditable="true">
  text text text text <b>bold bold bold</b> text text text
</div>

$(document).ready(function(){
  $('#contenteditable').bind('keyup', function(e){
    if (e.which == 88) {
      $('#contenteditable').find('b').contents().unwrap();
    }
  });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:35:13.183

我建议将插入符号位置存储为`contenteditable`元素内文本中的字符索引。我在回答您最近的一个问题时链接到的相同代码可以：

[https://stackoverflow.com/a/10682429/96100](https://stackoverflow.com/a/10682429/96100)

# c++ - 如何防止 CRT 错误 C++ 上的进程崩溃

> ID：10719626
> 
> 赞同：1
> 
> 时间：2012-05-23T12:10:39.767
> 
> 标签：c++, exception-handling, crt

我有一个 3rd 方 C 库，它可能会因 CRT 错误而崩溃。在这种情况下，整个过程会崩溃。有什么方法可以捕获所有 CRT 错误并防止进程终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:14:01.843

防止崩溃可能只是延迟问题。

想象一下，您可以防止崩溃，但是结果，用户会将不正确的数据保存回数据库，或者损坏数据文件，那么您只会使问题变得更糟。

相反，请尝试找出确切的问题是什么：

*   您是否将不正确的参数传递给第 3 方库中的函数？
*   还是第 3 方库中的错误？与错误的库制造商对抗。

或者：

*   尝试找到解决问题的方法
*   找到图书馆的替代品

**编辑：** 老实说，我去年遇到了同样的情况，第 3 方组件。我所做的是以下内容：

首先，使用_try */* _except 构造来解决问题。这仅在您知道它在哪个函数调用中完全崩溃时才有效。它是这样工作的：

```
__try
   {
   Some3rdPartyLibraryFunction();
   }
__except (EXCEPTION_EXECUTE_HANDLER)
   {
   } 
```

其次，为了防止您的应用程序进一步损坏，请确保您的应用程序中不再调用第三方库。例如假设库是一个报表组件，那么如果你遇到崩溃，就不要再让用户打开报表了，像这样：

```
bool MyClass::openReport (char *reportname)
   {
   if (!reportModuleEnabled)
      return false;

   __try
      {
      OpenTheReport(reportname);
      }
   __except (EXCEPTION_EXECUTE_HANDLER)
      {
      // Tell the user about the problem and prevent further access to the library
      ShowMessage ("Sorry, no more reports");
      reportModuleEnabled = false;
      return false;
      }
   return true;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:23:38.180

您的程序在 Windows 上运行？你试过用 SEH 包装有问题的代码吗？ [http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680657(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T11:26:41.980

真可惜，没有人明白这一点。CRT 错误与 SEH 无关，因此无法通过_try *...* _except 捕获。您应该使用 _set_invalid_parameter_handler 和 _set_purecall_handler 函数来处理 CRT 错误。

[http://crashrpt.sourceforge.net/docs/html/exception_handling.html](http://crashrpt.sourceforge.net/docs/html/exception_handling.html)

# redis - Redis 值更新

> ID：10719629
> 
> 赞同：0
> 
> 时间：2012-05-23T12:10:51.623
> 
> 标签：redis

我目前有一个 redis 数据集，其中键表示 ids 和值作为 json 。我需要在 json 中为每个用户标识（键）添加一个新实体。有没有现成的开源工具？我应该以什么方式继续更新 1M 键数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:05:53.727

有几种可能：

1.  这是使用 Redis 2.6 Lua 脚本执行此操作的一些伪代码。

    ```
    for userid in users:
        EVAL 'local obj = cjson.decode(redis.call("GET", KEY[1])); obj.subobj.newjsonkey = ARGV[1]; redis.call("SET", KEY[1], cjson.encode(obj));' 1 userid "new value!" 
    ```

2.  除此之外，您可能需要停止服务并使用 GET 和 SET 执行此操作，因为您可能没有适当的锁定机制。如果您可以强制执行锁定，请参阅[http://redis.io/commands/setnx](http://redis.io/commands/setnx)

3.  有一些用于更新 rdb 的工具。[https://github.com/sripathikrishnan/redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools) [https://github.com/nrk/redis-rdb](https://github.com/nrk/redis-rdb)

请注意，此答案适用于我对以下内容的回答：[Working with nested objects in Redis?](https://stackoverflow.com/questions/10704190/working-with-nested-objects-in-redis/10711006)

# sorting - 如何将 ObservableCollection 的降序排序到 WP7 中。？

> ID：10719630
> 
> 赞同：1
> 
> 时间：2012-05-23T12:10:54.027
> 
> 标签：sorting, observablecollection

我想将我的 ObservableCollection 排序为我尝试过的不同场景的降序，但我无法对其进行排序，我的代码是这样的。

1>

```
 LeaderboardItems = new ObservableCollection<AEGAPI.clsAEGAPI.Leaderboard>(LeaderboardItems.OrderByDescending(a => a.Points)); 
```

2>

```
 LeaderboardItems.OrderByDescending(p => p.Points); 
```

我尝试了很多，但我无法得到我的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:55:38.513

通常您无法对 ObservableCollection 进行排序，因为您正在更改集合。如果您只想显示排序列表：

```
List<AEGAPI.clsAEGAPI.Leaderboard> list = LeaderboardItems.OrderByDescending(p => p.Points).ToList() 
```

或者您可以直接将源绑定到列表框

```
listbox.ItemsSource = LeaderboardItems.OrderByDescending(p => p.Points) 
```

该列表不会对可观察集合的更改做出反应。你必须自己实现它。

过去我发现有人做了一个可排序的可观察集合，也许你可以选择那个选项（搜索：sortableobservablecollection），但这有点复杂。

问候

# c# - C# 中的 TCP 侦听器启动异常

> ID：10719632
> 
> 赞同：2
> 
> 时间：2012-05-23T12:10:57.017
> 
> 标签：c#, .net, exception, tcplistener

我使用以下代码创建了一个 TCP 侦听器：

```
TCPListener = new TcpListener(IPAddress.Any, 1234); 
```

我开始使用以下代码监听 TCP 设备：

```
TCPListener.Start(); 
```

但是在这里，我不控制端口是否正在使用中。当端口被使用时，程序给出一个异常：“每个套接字地址（协议/网络地址/端口）通常只允许使用一次。”。

我该如何处理这个异常？我想警告用户该端口正在使用中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:14:54.470

放置一个 try/catch 块 `TCPListener.Start();`并捕获 SocketException。此外，如果您从程序中打开多个连接，那么最好在列表中跟踪您的连接并在打开连接之前查看您是否已经打开了连接

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T12:20:36.217

获取异常来检查端口是否在使用中并不是一个好主意。使用`IPGlobalProperties`对象获取对象数组`TcpConnectionInformation`，然后您可以查询端点 IP 和端口。

```
 int port = 1234; //<--- This is your value
 bool isAvailable = true;

 // Evaluate current system tcp connections. This is the same information provided
 // by the netstat command line application, just in .Net strongly-typed object
 // form.  We will look through the list, and if our port we would like to use
 // in our TcpClient is occupied, we will set isAvailable to false.
 IPGlobalProperties ipGlobalProperties = IPGlobalProperties.GetIPGlobalProperties();
 TcpConnectionInformation[] tcpConnInfoArray = ipGlobalProperties.GetActiveTcpConnections();

 foreach (TcpConnectionInformation tcpi in tcpConnInfoArray)
 {
   if (tcpi.LocalEndPoint.Port==port)
   {
     isAvailable = false;
     break;
   }
 }

 // At this point, if isAvailable is true, we can proceed accordingly. 
```

有关详细信息，请阅读[此](https://stackoverflow.com/questions/570098/in-c-how-to-check-if-a-tcp-port-is-available)内容。

为了处理异常，您将`try/catch`按照 habib 的建议使用

```
try
{
  TCPListener.Start();
}
catch(SocketException ex)
{
  ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T12:13:14.897

抓住它并显示您自己的错误消息。

检查异常类型并在 catch 子句中使用此类型。

```
try
{
  TCPListener.Start();
}
catch(SocketException)
{
  // Your handling goes here
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T12:13:47.330

把它放在一个`try catch`块里。

```
try {
   TCPListener = new TcpListener(IPAddress.Any, 1234);
   TCPListener.Start();

} catch (SocketException e) {
  // Error handling routine
   Console.WriteLine( e.ToString());
 } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T12:14:00.310

使用 try-catch 块并捕获 SocketException。

```
try
{
  //Code here
}
catch (SocketException ex)
{
  //Handle exception here
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-23T12:13:23.633

好吧，考虑到您正在谈论*异常*情况，只需使用合适的块处理该异常`try/catch`，并告知用户一个事实。

# codeigniter - 如何在 html 页面中呈现 Zend_Barcode？

> ID：10719633
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:10:58.377
> 
> 标签：codeigniter, barcode

我的一个应用程序使用 Codeignitor 开发并使用 Zend_Barcode 库创建条形码，

参考：[http ://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/](http://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/)

如何在 codeignitor 视图上显示条形码。试过了，

```
// Only the text to draw is required
$barcodeOptions = array('text' => 'NOT-ME');

// No required options
$rendererOptions = array();

// Draw the barcode in a new image,
$imageResource = Zend_Barcode::draw(
    'code39', 'image', $barcodeOptions, $rendererOptions
);

$data['barcode'] = imagejpeg($imageResource, 'barcode.jpg', 100);

// Free up memory
imagedestroy($imageResource); 
```

在视野中

```
<img src="<?php echo $barcode;?>"> 
```

但它失败了:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:21:55.887

代替

```
Zend_Barcode::draw('code39', 'image', $barcodeOptions, $rendererOptions); 
```

利用

```
Zend_Barcode::render('code39', 'image', $barcodeOptions, $rendererOptions); 
```

# android - 出于测试目的，是否有可能在 Google Play 上发布我一个人可以访问的应用程序

> ID：10719636
> 
> 赞同：2
> 
> 时间：2012-05-23T12:11:09.093
> 
> 标签：android, google-play

我知道可以有一项功能来启用许可 API (LVL) 测试，但在向世界发布之前测试“完整的 Google Play 用户体验”也很好。

我认为这是一个技术问题，而不是与业务相关的问题，因此希望允许它保持在线状态。

一如既往地提前感谢。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T12:28:26.463

不可以，无法将 Play 商店中的应用程序限制为一个用户。

第一次发布 apk 时，它只会在搜索确切的包名称时可见。因此，也许您有足够的时间对其进行测试，直到它出现在常规搜索结果中。

# iphone - 从外部路径加载 TTF 字体

> ID：10719641
> 
> 赞同：5
> 
> 时间：2012-05-23T12:11:39.330
> 
> 标签：iphone, ios, fonts, cocos2d-iphone

我想知道如何从绝对文件路径而不是相对路径加载 TTF 字体，这通常使用 [UIFont fontWithName:@"xyz"];

在 cocos2d 中，我们可以使用以文件为参数的 CCLabelBMFont 来做到这一点，但是当使用 CCLabelTTF 时，它需要字体名称，而不是文件名。

是否有任何解决方法来加载未嵌入应用程序但根据需要从某些资源下载的外部字体？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T13:11:07.023

是的，你可以这样做。

只需将字体复制到您的项目中并将此引用添加到您的 info.plist 中。然后，您可以像引用任何其他系统字体一样引用字体名称。

![在此处输入图像描述](../Images/2f43c491fd8e2256f4457039fdc73d7c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T14:21:30.820

如果我很好理解你的问题，也许这篇文章[我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)会给你一个答案。

# google-maps-api-3 - 多个多边形 MySQL

> ID：10719642
> 
> 赞同：0
> 
> 时间：2012-05-23T12:11:41.340
> 
> 标签：google-maps-api-3

我正在尝试从数据库中绘制几个分离的多边形（建筑物）。我从数据库中获取的数据如下所示：

```
<buildings>
    <building build_id="94" build_gebaeude="A"
        build_geoX="49.26173942769648" build_geoY="7.350542675857582"
    />
    <building build_id="95" build_gebaeude="A"
        build_geoX="49.26173942769648" build_geoY="7.3524094933319475"
    />
    <building build_id="96" build_gebaeude="A"
        build_geoX="49.26019903253632" build_geoY="7.35234512031559"
    />
    <building build_id="97" build_gebaeude="A"
        build_geoX="49.26032506667364" build_geoY="7.350692879562416"
    />
    <building build_id="98" build_gebaeude="B"
        build_geoX="49.26155738350112" build_geoY="7.362129818801918"
    />
    <building build_id="99" build_gebaeude="B"
        build_geoX="49.26157138692462" build_geoY="7.364275586013832"
    />
    <building build_id="100" build_gebaeude="B"
        build_geoX="49.260255047748224" build_geoY="7.364361416702309"
    />
    <building build_id="101" build_gebaeude="B"
        build_geoX="49.260311062896506" build_geoY="7.362065445785561"
    />
</buildings> 
```

以下代码显示了我正在做什么来绘制建筑物：

```
for (var i = 0; i < building.length-1; i++) {
    var point = new google.maps.LatLng(
        parseFloat(building[i].getAttribute("build_geoX")),
        parseFloat(building[i].getAttribute("build_geoY"))
    );

    latlngbounds.extend(point);

    if( building[i].getAttribute("build_gebaeude") == 
        building[i+1].getAttribute("build_gebaeude") )
    {
        path.push(point);
    }
    else {
        path.push(point);
        poly = new google.maps.Polygon({
            paths: path,
            strokeWeight: 5,
            strokeOpacity: 1,
            fillOpacity: 0.30,
            strokeColor:'#FFFFFF',
            fillColor: '#a3141d'
        }); 
        polygons.push(poly);
        path.clear();
    }
}   
polygons[0].setMap(map);
polygons[1].setMap(map); 
```

问题是不是所有的点都画出来了？我不明白问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:08:35.037

看起来`paths`数组可能有问题。从您包含的代码中不清楚`paths`是 JavaScript`Array`还是类似数组的对象，但由于您`paths`在`for`循环内使用，然后尝试`paths`在循环内清除，我建议：

*   `paths` `Array`根据需要在循环内创建一个新的
*   添加代码来管理数组循环的状态
*   更改用于检查建筑属性和测试相等性的代码
*   由于您将路径数组传递给 Polygon 构造函数，因此不要清除数组

* * *

```
var paths = null;
var aNewPathIsNeeded = true;
for ( var i = 0; i < building.length-1; i++) {
    //Create your point
    //Extend your bounds
    //Since you always add the point to the paths array, move it out of the if
    //check and perform some array state management:

    if ( aNewPathIsNeeded ) {
        paths = new Array( point );
        aNewPathIsNeeded = false;
    }
    else { paths.push( point ); }

    //Change the if condition to deal with just the specific case of interest:

    var currentBldgAttr = building[i].getAttribute("build_gebaeude");
    var nextBldgAttr = building[i+1].getAttribute("build_gebaeude");
    if ( !( currentBldgAttr === nextBldgAttr ) ) { //Change to use: '==='
        //Create your polygon
        //Add the polygon to the polygons array
        //New code to manage paths state:
        aNewPathIsNeeded = true;
    }
} 
```

我不确定你的问题到底是什么，但我相信这段代码会帮助你继续前进。附带说明，`clear()`不是 JavaScript`Array`方法；当您想清空 时`Array`，请使用：`array.length = 0`如：[JavaScript 的 array.clear() 不是函数吗？](https://stackoverflow.com/q/4020548/1314132)

# objective-c - 我想从左侧滑入一个透明菜单

> ID：10719645
> 
> 赞同：0
> 
> 时间：2012-05-23T12:12:06.470
> 
> 标签：objective-c, ios

![滑出菜单示例](../Images/26a30d449244f4a06052beae9e05126f.png)

我想实现一个如上所示的菜单。我是一个完全的 iOS 新手。几天以来，我一直在寻找这种控制。

有人可以从头开始逐步指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:34:14.527

您可以通过以下步骤实现上述内容：-

1>左侧菜单视图是作为子视图添加的 UIView，其上添加了各种自定义 UIButtons 作为子视图。

2>最初您必须设置框架，以便仅显示视图的特定部分（面板部分）。

3> 单击指示器按钮 ，将框架展开至完整以显示按钮。

4>在下一次点击即（奇数点击）折叠框架。

上面的动画可以使用简单的 UIView Animation 来实现。

示例代码（原始框架宽度=300，高度300）：-

```
yourMenuView.frame=CGRectMake(0,10,100,300);

[yourViewController addSubview:yourMenuView];

-(IBAction)expandMenu:(id)sender
{
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
CGRect frame=yourMenuView.frame;
frame.size.width+=200;
yourMenuView.frame=frame;
[myview removeFromSuperview];
[UIView commitAnimations];
}

-(IBAction)collapseMenu:(id)sender
{
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
CGRect frame=yourMenuView.frame;
frame.size.width-=200;
yourMenuView.frame=frame;
[myview removeFromSuperview];
[UIView commitAnimations];

} 
```

# java - 没有定义名为“transactionManager”的 bean

> ID：10719646
> 
> 赞同：26
> 
> 时间：2012-05-23T12:12:11.667
> 
> 标签：java, spring, hibernate, jakarta-ee

我已经配置了两个持久单元，其实体管理器设置如下所示：

```
<bean id="liveEntityManagerFactory" 
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          p:dataSource-ref="LiveDataSource">          

          <property name="persistenceUnitName" value="LivePersistenceUnit" />
    </bean>

    <bean id="archiveEntityManagerFactory" 
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"
          p:dataSource-ref="ArchiveDataSource">          

          <property name="persistenceUnitName" value="ArchivePersistenceUnit" />
    </bean> 
```

然后我将事务管理器配置为

```
 <bean id="LiveTransactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="liveEntityManagerFactory"/>

    <bean id="ArchiveTransactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="archiveEntityManagerFactory"/> 
```

我最初只配置了一个，它被称为“transactionManager”。添加一个额外的持久单元似乎会产生错误。我不明白的一件事是，如果我配置了两个持久单元（每个用于一个单独的数据库），我是否还需要为每个数据源配置一个单独的实体管理器和一个事务管理器？

我得到的错误如下所示：（我搜索了所有文件，但在任何有“transactionManager”引用的地方都找不到）

```
org.springframework.ws.soap.client.SoapFaultClientException: No bean named 'transactionManager' is defined
    at org.springframework.ws.soap.client.core.SoapFaultMessageResolver.resolveFault(SoapFaultMessageResolver.java:37)
    at org.springframework.ws.client.core.WebServiceTemplate.handleFault(WebServiceTemplate.java:774)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:600)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:384)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:378)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:370)
    at com.ws.client.SoapTest.testFail(SoapTest.java:140)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

我正在将 Spring 与 Jpa/Hibernate 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T12:46:48.573

事务管理器属性的默认值为事务管理器。在您的情况下，您应该指定每个方法或服务要使用的事务管理器，如下所示：

```
@Service
@Transactional(value="LiveTransactionManager") 
class someClass... 
```

或者

```
@Transactional(value="ArchiveTransactionManager") 
public void someMethod 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-25T08:42:05.957

实际上，有*一种*方法可以将命名的 TransactionManager 与 Spring Data JPA 一起使用。这对我有用：

```
<bean id="myTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="myEntityManagerFactory" />
</bean>
<tx:annotation-driven transaction-manager="myTransactionManager"/>

<jpa:repositories base-package="com.xxx.yyy" entity-manager-factory-ref="myEntityManagerFactory" transaction-manager-ref="myTransactionManager">
</jpa:repositories> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-23T20:04:50.133

我使用 java 配置并指定**transactionManagerRef**是我的解决方案：

```
@Configuration
@EnableTransactionManagement
@EnableJpaRepositories(
    entityManagerFactoryRef = "myCustomEntityManagerFactory",
    basePackages = {"ua.demitt.other.path.to.repos"},
    transactionManagerRef = "myCustomTransactionManager" ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T22:37:12.817

在您的 @Configuration 文件中，如果这是您的数据源：

```
@Bean(name = "dataSource")
public DataSource getDataSource() {
    return DataSourceBuilder
            .create()
            .username(username)
            .password(password)
            .url(url)
            .build();
} 
```

这将是您的事务管理器 bean：

```
@Bean(name = "DataSourceTransactionManager")
public DataSourceTransactionManager getDataSourceTransactionManager() {
    return new DataSourceTransactionManager(getDataSource());
} 
```

然后注释您想要事务性的服务方法：

```
@Transactional(transactionManager = "DataSourceTransactionManager", timeout = 60, rollbackFor = { Exception.class}) 
```

# objective-c - 数组中浮点数的 ObjC 结构：避免 NSValue 的紧凑方法？

> ID：10719647
> 
> 赞同：0
> 
> 时间：2012-05-23T12:12:13.803
> 
> 标签：objective-c, arrays, struct

我要将一些 JS 移植到本机 ObjC 代码。由于结构不适合数组，因此需要对其进行包装。

JS代码如下：

```
var bezierVertices = [{0: 14},{10: 32},{24: 16}]; 
```

简单明了的 JS：匿名对象数组。

我必须遵守以下要求：让代码尽可能紧凑，这意味着我在使用 [NSValue valueWithCGPoint:ccp(x,y)] 提出 NSValue 的 NSArray 时被拒绝了

走 malloc 方式也不符合这个标准。他们想要像上面提到的 JS 一样紧凑的东西。

在写像 @"0:14;10:32;24:16"; 这样丑陋的 NSString 之前 这是在一个循环中拆分和解析的，我认为 SO 可以帮助带来一些干净的东西:) 我被允许使用 .mm 所以 ObjC++ 解决方案也可以适用，但我对 C++ 一无所知......

谢谢！J。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:22:12.927

> 他们想要像上面提到的 JS 一样紧凑的东西

“他们”是谁？“他们”是否理解 Objective-C 是一种编译语言并且源代码的“紧凑性”在很大程度上无关紧要？

总之，吐槽一下。您可以像这样制作一个 C CGPoints 数组：

```
CGPoint myArray[] = {{0.0, 14.0}, {10.0, 32.0}, {24.0, 16.0}}; 
```

这是一个标准的 C 数组初始化程序。你得到这样的元素数量：

```
int nElements = sizeof myArray / sizeof(CGPoint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:25:41.017

如果您需要管理可变长度的顶点数组，C++ 提供了`std::vector<CGPoint>`.

# javascript - Javascript：属性函数中的此引用

> ID：10719651
> 
> 赞同：1
> 
> 时间：2012-05-23T12:12:25.597
> 
> 标签：javascript, function, this, prototype

这旨在在浏览器上使用。

```
function keyboardJS () {
    this.keys = {};
    this.tempASCIIkey;
    this.tempCHARkey;
}
keyboardJS.prototype = {
    keyIsUp : function (evt) {
      console.log(this);
      this.ASCIIkey = evt.keyCode;
      this.CHARkey = String.fromCharCode(this.ASCIIkey);
      this.keys[this.CHARkey] = false;
      console.log(this.CHARkey + " is now " + this.keys[this.CHARkey]);
    },
    keyIsDown : function (evt) {
      console.log(this);
      this.ASCIIkey = evt.keyCode;
      this.CHARkey = String.fromCharCode(this.ASCIIkey);
      this.keys[this.CHARkey] = true;
      console.log(this.CHARkey + " is now " + this.keys[this.CHARkey]);
    },
    init : function () {
      document.addEventListener("keydown", this.keyIsDown);
      document.addEventListener("keyup", this.keyIsUp);
    }
}

var game = {};

game.myKeyboard = new keyboardJS();
game.myKeyboard.init(); 
```

但是，(console.log(this);) 返回“#document”。如何在原型函数中引用对象的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:14:50.423

尝试这个...

```
init : function () {
  document.addEventListener("keydown", this.keyIsDown.bind(this));
  document.addEventListener("keyup", this.keyIsUp.bind(this));
} 
```

当`this`您传递对函数的引用时， 并没有神奇地绑定，在这种情况下`addEventListener()`， the`this`就是它的本意。

请注意，`bind()`我们最喜欢的旧版 IE 不支持这一点。

您可以填充它，传递在原型上调用您的函数的函数，或使用具有绑定等效项的库（`_.bind()`在 Underscore、`$.proxy()`jQuery 等中）。

# jquery - 自定义 swap() 插件以动画背景颜色

> ID：10719654
> 
> 赞同：0
> 
> 时间：2012-05-23T12:12:34.850
> 
> 标签：jquery, jquery-plugins, jquery-animate, background-color

使用以下插件时，任何人都可以建议如何使交换的框在单击时更改背景颜色？

[http://www.vertstudios.com/blog/swap-jquery-plugin/](http://www.vertstudios.com/blog/swap-jquery-plugin/)（见演示）

我不确定如何链接到 JSFiddle 中的插件，所以很遗憾无法演示。

这些方法对所有框的位置进行动画处理，仅影响位置已更改的框。我正在尝试添加一种类似地为背景颜色设置动画但没有成功的方法。

我认为如果不自定义插件这是不可能的，但我可能是错的。

* * *

更新：

谢谢约翰。我应该说我实际上需要背景颜色在交换后动画回默认值。我已经通过以下修改尝试了您的解决方案。如您所见，它的行为不一致。我认为正确执行此操作的方法是自定义 fakeFloat 方法。

```
$("#swapTrigger").click(function()
{
var index1 = $('input:radio[name=index1]:checked').val();
var index2 = $('input:radio[name=index2]:checked').val();
boxes = $(boxes).swap(index1,index2);

var $box1 = $('.box').eq(index1);
var $box2 = $('.box').eq(index2);

var randomHex = '#fc0';

$box1.animate({ backgroundColor: "#fc0" }, 300);
$box2.animate({ backgroundColor: "#fc0" }, 300);

$(boxes).fakeFloat({margin: 10, offset: 20, speed: 300}).each(function()

{
    $box1.animate({ backgroundColor: "#fff" }, 300);
    $box2.animate({ backgroundColor: "#fff" }, 300);
    $(this).html($(this).getIndexOf(boxes));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:49:34.037

1.  包括缩小颜色插件以动画 bgcolors：

    [http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors-min.js](http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors-min.js)

2.  在 onclick 事件中试试这个

    ```
    $("#swapTrigger").click(function()
    {
        var index1 = $('input:radio[name=index1]:checked').val();
        var index2 = $('input:radio[name=index2]:checked').val();
        boxes = $(boxes).swap(index1,index2);

        var $box1 = $('.box').eq(index1);
        var $box2 = $('.box').eq(index2);

        var randomHex = '#'+Math.floor(Math.random()*16777215).toString(16);

        $box1.animate({ backgroundColor: randomHex }, 200);

        $(boxes).fakeFloat({margin: 10, offset: 20, speed: 300}).each(function()
        {
            $(this).html($(this).getIndexOf(boxes));
        });
    }); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T01:00:42.563

好吧，我想我已经破解了这个。

我现在需要的只是整理一下。尽管它有效，但我确信它的编码很糟糕并且没有遵循最佳实践。我将不胜感激任何建议。

以下是点击事件现在的样子，其中两个附加参数（test1 和 test2）传递给 fakeFloat，值为 index1 和 index2：

```
$("#swapTrigger").click(function()
{
var index1 = $('input:radio[name=index1]:checked').val();
var index2 = $('input:radio[name=index2]:checked').val();
boxes = $(boxes).swap(index1,index2);

var $box1 = $('.box').eq(index1);
var $box2 = $('.box').eq(index2);

var randomHex = '#'+Math.floor(Math.random()*16777215).toString(16);

$box1.animate({ backgroundColor: randomHex }, 300);
$box2.animate({ backgroundColor: randomHex }, 300);

$(boxes).fakeFloat({margin: 10, offset: 20, speed: 300, test1: index2, test2: index1}).each(function()
{
    $(this).html($(this).getIndexOf(boxes));
});
}); 
```

这是修改后的 fakeFloat 方法，它现在包含一个背景颜色变量，通过每个语句中的 if-else 语句，根据 test1 或 test2 是否等于 i 来设置该变量。背景颜色动画被添加到位置动画中。我已经用 -1 而不是 0 初始化了 test1 和 test2 因为 i=0 这会在加载时导致不需要的动画。

```
jQuery.fn.fakeFloat = function(options, callback)
{

var defaults = {
direction: "left",
margin: 0,
offset: 0,
speed: 0,
test1: -1,
test2: -1
},
settings = jQuery.extend({}, defaults, options);  

//Initialize counter
var i=0;

//Default background color
var bg = "#fff";

//Initialize element width
var elemWidth = 0;

jQuery(this).each(function()
{
    if (settings.test1 == i || settings.test2 == i) {
        bg = "#fc0";
    }
    else
    {
        bg = "#fff";
    }

    elemWidth = jQuery(this).width();
    if(settings.direction == "left")
    {
        jQuery(this).animate({"backgroundColor": bg}, 300);
        jQuery(this).animate({"left": ((settings.margin) + elemWidth)*i + (settings.offset) + 'px'}, settings.speed);
        jQuery(this).animate({"backgroundColor": "#fff"}, 300);         }
    else
    {
            jQuery(this).animate({"right": ((settings.margin) + elemWidth)*i + (settings.offset) + 'px'}, settings.speed);
    }
    i++;
});

if(typeof callback == 'function')
{
    setTimeout(function(){callback.call(this);}, settings.speed);
}

return this;

}; 
```

# sql - 使用 SSH 隧道将本地 SQL 文件导入远程服务器上的 MySQL

> ID：10719662
> 
> 赞同：37
> 
> 时间：2012-05-23T12:13:00.047
> 
> 标签：sql, import, ssh, tunnel

我使用 putty SSH 隧道在我的本地主机和远程服务器之间建立了连接。

没关系。

现在我需要一个命令来获取本地机器上的 sql 文件，即 c:\folder\test.sql 并将其导入远程服务器上的 mysql

我想也许...

```
mysql -u prefix_username -p testpass -h localhost -P 3307 prefix_testdb 
```

然后执行类似的命令

```
mysql -p testpass -u prefix_username prefix_testdb < c:\folder\test.sql 
```

该命令不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-12-06T14:40:28.223

你应该运行这个命令

```
mysql -h host -u user_name -pPassword database < file.sql > output.log 
```

file.sql 包含要运行的 sql 查询，而 output.log 仅在您有返回某些内容的查询（如选择）时才有意义

我可以在您的代码中看到的唯一不同之处是 -p 选项和密码之间的空格。如果使用 -p 选项，则必须在不留任何空格的情况下写入密码。或者您可以使用选项 --password=Password

我希望你能解决问题

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-09-20T16:06:34.700

您需要通过附加 mysql 命令 ssh 到远程计算机：

```
ssh remote_user@remote_server mysql -p testpass -u username testdb < c:\folder\test.sql 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-11-22T08:16:59.703

```
 1\. mysql -h xxx -uxxx -pxxx . //login to the remote mysql
 2\. use DATABASE.             //assign which db to import
 3\. source path/to/file.sql  //the path can be your local sql file path. 
```

参考：[将SQL文件导入mysql](https://stackoverflow.com/questions/5152921/import-sql-file-into-mysql)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-23T12:18:15.177

使用 'scp' 复制和 mysql 插入到您的本地机器。

句法：

```
scp remote_user@remove_server:/path/to/sql/file.sql ~/path/to/local/directory 
```

传输文件后使用：

```
mysql -uYouUserName -p name_of_database_to_import_to < ~/path/to/local/directory/file.sql 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-06-16T04:21:20.143

您可以使用`pscp`将文件上传到服务器。转到您的命令行并输入

```
pscp.exe c:\folder\test.sql usernameoftheserver@websitename.com:/serverpath 
```

# toolbar - Ext.NET GridPanel 顶部栏工具栏按钮在 DirectEvent 上引发内部服务器错误 500 未在后面的代码中引发

> ID：10719671
> 
> 赞同：1
> 
> 时间：2012-05-23T12:13:33.430
> 
> 标签：toolbar, ext.net, gridpanel, resourcemanager

我将 Ext.NET 与 VS2008、ASP.NET 一起使用。我有一个独特的问题，我无法找到任何解决方案。

有一个 GridPanel，在 TopBar 中有一个删除按钮。Grid 使用 RowSelection 模型。选择行后，用户单击删除按钮。引发客户端事件以进行确认以下是代码片段

```
<ext:Button ID="btnDelete" runat="server" Text="Delete" Icon="Delete">
                    <DirectEvents>
                        <Click OnEvent="Evt_Delete">
                        <ExtraParams>
                        <ext:Parameter Name="recordId" Value="(#{grdSanction}).selModel.getSelected().data.VoucherID" Mode="Raw" />
                        </ExtraParams>

                            <Confirmation Message="Do you really want to delete sanction?" ConfirmRequest="true"/>
                        </Click>
                    </DirectEvents>
                </ext:Button> 
```

但问题是我在单击“是”后收到以下消息，基本上是 500 内部服务器错误。

以下是我在 Fiddler 中找到的内容：

结果 协议 主机 URL 正文 缓存 内容类型 进程 注释 自定义
1 500 HTTP onyx /pages/sanction.aspx?_dc=1337773867270 4,268 私有文本/html；字符集=utf-8 铬：920

VS2008 的调试器不起作用，因为后面代码上的事件永远不会引发。工具栏上的其他按钮工作得很好。有谁知道我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:39:04.683

我认为您只需要从`#{grdSantion}`.

```
// Not OK 
(#{grdSanction}).selModel.getSelected().data.VoucherID

// OK
#{grdSanction}.selModel.getSelected().data.VoucherID 
```

以下示例演示了完整方案，并且似乎可以根据您的要求工作。

**例子**

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!X.IsAjaxRequest)
        {
            var store = this.GridPanel1.GetStore();

            store.DataSource = this.Data;
            store.DataBind();
        }
    }

    private object[] Data
    {
        get
        {
            return new object[]
            {
                new object[] { "3m Co", 71.72, 0.02, 0.03, "9/1 12:00am" },
                new object[] { "Alcoa Inc", 29.01, 0.42, 1.47, "9/1 12:00am" },
                new object[] { "Altria Group Inc", 83.81, 0.28, 0.34, "9/1 12:00am" },
                new object[] { "American Express Company", 52.55, 0.01, 0.02, "9/1 12:00am" },
                new object[] { "American International Group, Inc.", 64.13, 0.31, 0.49, "9/1 12:00am" },
                new object[] { "AT&T Inc.", 31.61, -0.48, -1.54, "9/1 12:00am" },
                new object[] { "Boeing Co.", 75.43, 0.53, 0.71, "9/1 12:00am" },
                new object[] { "Caterpillar Inc.", 67.27, 0.92, 1.39, "9/1 12:00am" }
            };
        }
    }

    protected void Button1_Click(object sender, DirectEventArgs e)
    {
        X.Msg.Notify("Company", e.ExtraParams["company"]).Show();
    }
</script>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
<form runat="server">
    <ext:ResourceManager runat="server" />

    <ext:GridPanel 
        ID="GridPanel1"
        runat="server" 
        Title="Array Grid" 
        Width="350" 
        Height="215">
        <TopBar>
            <ext:Toolbar runat="server">
                <Items>
                    <ext:Button runat="server" Text="Delete" Icon="Delete">
                        <DirectEvents>
                            <Click OnEvent="Button1_Click">
                            <ExtraParams>
                                <ext:Parameter Name="company" Value="#{GridPanel1}.selModel.getSelected().data.company" Mode="Raw" />
                            </ExtraParams>
                                <Confirmation Message="Do you really want to delete sanction?" ConfirmRequest="true"/>
                            </Click>
                        </DirectEvents>
                    </ext:Button>
                </Items>
            </ext:Toolbar>
        </TopBar>
        <Store>
            <ext:Store runat="server">
                <Reader>
                    <ext:ArrayReader>
                        <Fields>
                            <ext:RecordField Name="company" />
                        </Fields>
                    </ext:ArrayReader>
                </Reader>
            </ext:Store>
        </Store>
        <ColumnModel runat="server">
            <Columns>
                <ext:Column ColumnID="Company" Header="Company" DataIndex="company" />
            </Columns>
        </ColumnModel>
        <SelectionModel>
            <ext:RowSelectionModel runat="server" SingleSelect="true" />
        </SelectionModel>
    </ext:GridPanel>
</form>
</body>
</html> 
```

# c# - 当实现它的类有自己的属性时如何使用接口？

> ID：10719673
> 
> 赞同：2
> 
> 时间：2012-05-23T12:13:39.903
> 
> 标签：c#, c#-4.0, interface

我正在使用接口引用变量来访问接口上的属性

但除此之外，实现接口的类还有自己的属性。

我无法通过此接口引用访问类属性。

以下是我的问题：

1）为什么会这样？

2）问题的解决方案是什么？有什么方法可以仅通过机器访问 AC 类的冷却剂功率变量吗？TYPE CAST 会起作用吗？

```
 interface IMachines
{
    #region properties
    int machineID { get; set; }
    static int totalID { get; set; }
    string name { get; set; }
    string make { get; set; }
    int weight { get; set; }
    int cost { get; set; }
    int warranty { get; set; }
    DateTime creationDate { get; set; }
    #endregion

    int generateWarrantyExpiry();
    int searchMachine();
}

public class AC:IMachines
{
    #region ACMembers

    protected int _machineID;
    protected string _name;
    protected int _weight;
    protected string _make;
    protected DateTime _creationDate;
    protected int _warranty;
    protected int _cost;
    public int _coolentPower;

    public int CoolentPower
    {
        get { return _coolentPower; }
        set { _coolentPower = value; }
    }

    #endregion

    #region IMachines Members

    public int machineID
    {
        get { return _machineID; }
        set { _machineID = value; }
    }

    public string name
    {
        get { return _name; }
        set { _name = value; }
    }

    public string make
    {
        get { return _make; }
        set { _make = value; }
    }

    public int weight
    {
        get { return _weight; }
        set { _weight = value; }
    }

    public int cost
    {
        get { return _cost; }
        set { _cost = value; }
    }

    public int warranty
    {
        get { return _warranty; }
        set { _warranty = value; }
    }

    public DateTime creationDate
    {
        get { return _creationDate; }
        set { _creationDate = value; }
    }

    public int searchMachine()
    {
        //Search machine logic to be implemented
return 2
    }

    public void GenerateWarranty()
{
//generate warranty logic to be implemented

}

    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:18:14.427

是的，您可以使用“as”关键字尝试转换为 AC 类：

```
IMachines machines = new AC();
(machines as AC).CoolentPower = 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:23:19.443

请注意，正如许多回答者所建议的那样，使用强制转换会破坏`IMachines`接口提供的抽象。

如果您确实只使用实现接口的一种类型`AC`，那么这将起作用，但如果您想要支持其他类型的`IMachines`，事情可能会失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:34:30.763

以这种方式使用接口的有趣之处之一是能够检查泛型变量是否实现了接口。例如，您有一个在较低级别运行的通用函数。如果您获得的对象实现了 IMachines，请对其执行一些特殊或附加的操作。

```
public void DOSTUFF (object myobject)
{
    IMachines machine = myobject as IMachines;
    if (machine != null)
    {
        //do something special for IMachine objects
    }

    //the rest of the function that gets run against everything
} 
```

是的，要访问接口中未定义的类部分，您必须直接转换为类型，而不是使用接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T12:38:46.433

> 这是为什么？

接口是*合同*的声明。您是说实现类型符合该合同。

当使用接口访问属性时，您只能访问接口声明的那些属性——接口如何“知道”这些属性？它需要“知道”实现它的所有类型以及您的确切意思。

解决方案是在需要接口抽象时使用接口，在需要使用类型及其所有定义的属性时使用具体类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:16:17.403

有一个解决方案，它调用`CAST`.

因此，转换为类的类型实现它以访问 inetrface 本身中不存在的属性/方法。

```
var machine = (AC)interfaceVar;
machine.CoolentPower 
```

或者，只需使用[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)

```
dynamic machine = interfaceVar; //no cast needed ! non need to "know" actual type
machine.CoolentPower 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T12:16:44.173

如果你转换它，你可以访问你的类的属性。

```
var cool = machine as AC; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T12:21:37.933

回答 1 - 因为接口定义了类将实现的契约，因此只要契约（即接口）保持不变，您就可以更改实现。您要做的是获取不属于合同一部分的属性-如果您可以访问 AC 类的属性，但有人传入了实现 IMachine 但没有的 MachineX 实例，您会期望发生什么有你的 AC 类的属性吗？编译器无法猜测在这种情况下要做什么，因此您必须明确告诉它，如果您的机器是 AC，则将其作为 AC 做一些事情（这就是其他关于强制转换它的答案）。

# android - 如何在设备中运行安卓应用

> ID：10719675
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:13:54.270
> 
> 标签：android, adb

`adb device`我在我的 PC (Windows7) 中安装了三星 Galaxy 10.1 平板电脑的驱动程序，但在 cmd 提示符下运行命令时无法获取设备名称。

如果有任何解决方案，请与我分享

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:31:18.740

您需要在您的设备上启用 USB 调试。也检查这篇文章[将我的设备连接到 PC 时出现问题？](https://stackoverflow.com/questions/7510471/problem-when-connecting-my-device-to-pc/7511988#7511988),如果启用 USB 调试没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:39:54.060

正如 mihail 所写 - 您需要启用 USB 调试。拔掉usb线，进入设置->管理应用程序->usb调试->开机再重新插入。设备应被识别为开发设备并安装驱动程序（win7应该会自动找到它们）

# android - 在调用 addTab(TabHost.TabSpec spec) 方法时设置 tabhost 时出现 nullpointer 异常

> ID：10719677
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:00.977
> 
> 标签：android, nullpointerexception, android-tabhost, android-tabs

这个问题真的很奇怪，让我发疯。我无法摆脱 nullPointerException。我的任务很简单，只需在 tabhost 上运行测试即可。但现在我什至无法创建一个标签主机！为了创建一个tabhost，我需要注意一些要点。首先必须有一个 id 为“@android:id/tabs”的 tabwidget 和一个 id 为“@android:id/tabconent”的框架布局。我发誓我确实注意了，您可以在下面的代码中看到这一点。我阅读了使用 TabActivity 推荐的文章。但不幸的是，这个 tabhost 将成为活动的一个组成部分。所以我必须在正常活动中创建它。

当代码转到“addSpec()”时，它会抛出一个 nullPointerException。我检查了 Logcat 中的 tabHost 和 Host.Spec。他们都不是空的！我会将我的打印结果添加到这个问题的末尾。

这是我的java代码。

```
public class Cao extends Activity {
ScrollView menu_scroll;
TabHost menu_host;
TabWidget menu_tags;
int[] contents;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testtab);
    menu_host = (TabHost) findViewById(R.id.tabhost);
    Log.e("tabhost", (menu_host == null) + "");
    menu_tags = (TabWidget) findViewById(android.R.id.tabs);
    contents = new int[] { R.id.b1, R.id.b2 };
    int count = 6;
    for (int i = 0; i < count; i++) {
        TabSpec spec = menu_host.newTabSpec(i + "");
        spec.setIndicator("no " + i);
        Log.e("spec", (spec == null) + "");
        spec.setContent(R.id.b1); **// the problem occurs at this line**
        menu_host.addTab(spec);
    }
}
} 
```

我的xml代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:orientation="vertical" >

        <HorizontalScrollView
            android:id="@+id/menu_scroll"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:scrollbars="none" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
            </TabWidget>
        </HorizontalScrollView>
    </LinearLayout>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <Button
            android:id="@+id/b1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="1" />

        <Button
            android:id="@+id/b2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="2" />

    </FrameLayout>
</TabHost>

</LinearLayout> 
```

除了 logcat 打印输出

```
tabhost(490): false
spec(490): false
E/AndroidRuntime(490): Uncaught handler: thread main exiting due to uncaught exception  
E/AndroidRuntime(490): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.tim.wirelessorder/com.tim.wirelessorder.ui.Cao}: java.lang.NullPointerException   
E/AndroidRuntime(490):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
E/AndroidRuntime(490):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
E/AndroidRuntime(490):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
E/AndroidRuntime(490):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
E/AndroidRuntime(490):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(490):  at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(490):  at android.app.ActivityThread.main(ActivityThread.java:4363)
E/AndroidRuntime(490):  at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(490):  at java.lang.reflect.Method.invoke(Method.java:521)
E/AndroidRuntime(490):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
E/AndroidRuntime(490):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
E/AndroidRuntime(490):  at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(490): Caused by: java.lang.NullPointerException    
E/AndroidRuntime(490):  at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:583)
E/AndroidRuntime(490):  at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:578)
E/AndroidRuntime(490):  at android.widget.TabHost$TabSpec.setContent(TabHost.java:435)
E/AndroidRuntime(490):  at com.tim.wirelessorder.ui.Cao.onCreate(Cao.java:38)
E/AndroidRuntime(490):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime(490):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:46:35.330

//将您的标签主机ID更改为

```
<TabHost 
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"> 
```

//你的活动，它像下面这样扩展 TabActivity

```
public class HelloTabWidget extends TabActivity { 
```

//在您的 onCreate 中执行此操作

```
 TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab 
```

[检查这个：](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:16:38.967

您需要扩展 TabActivity 而不是简单的活动尝试

```
public class Cao extends TabActivity 
```

而不是

```
public class Cao extends Activity 
```

并改变这个

```
menu_host = (TabHost) findViewById(R.id.tabhost); 
```

到 menu_host =getTabHost(); 和

```
 android:id="@+id/tabhost" 
```

至

```
android:id="@android:id/tabhost" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:36:30.267

我所需要的只是改变我`TabHost`在 .xml 中声明 ID 的方式。我没有使用`"@+id/tabhost"`，而是使用`"@android:id/tabhost"`. 然后，在分配我`TabHost`的 in 代码时，我调用了`findViewById(android.R.id.tabhost)`. 无论出于何种原因，这解决了我的问题。

# html - Div 溢出而不是单独的行

> ID：10719681
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:08.047
> 
> 标签：html, css

> **可能重复：**
> [wordwrap 一个很长的字符串](https://stackoverflow.com/questions/856307/wordwrap-a-very-long-string)

我的代码

```
<div style="width:40px;">adfdddddddddddddddddddd</div> 
```

此代码应为 4 行，但它在一行中显示输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:16:09.657

尝试

```
<div style="width:40px;word-wrap:break-word;">adfdddddddddddddddddddd</div>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:20:15.407

对于自动换行，请考虑添加此类。

```
.wordwrap { 
   white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* Opera <7 */   
   white-space: -o-pre-wrap;   /* Opera 7 */    
   word-wrap: break-word;      /* IE */
} 
```

请参阅此处的参考[有没有办法在 div 中自动换行长单词？](https://stackoverflow.com/questions/1638223/is-there-a-way-to-word-wrap-text-in-a-div)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:23:38.797

您的代码在一行中显示输出，因为它将内容作为一个单词。一个单词将显示在一行中。使用一些句子尝试此代码，然后您将获得所需的输出。您可以尝试以下方法

```
<div style="width:40px;">This is a sentence.</div> 
```

# sharepoint - 无权访问 webApplication 属性

> ID：10719683
> 
> 赞同：1
> 
> 时间：2012-05-23T12:14:19.323
> 
> 标签：sharepoint, exception, sharepoint-2010, permissions

激活站点功能时，我会自动设置 WebApplication 属性。这是代码：

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
        {             
                SPWeb currentWeb = ContentTypes.ValidateFeatureActivation(properties);
                using (SPSite site = new SPSite(currentWeb.Site.Url))
                {
                    SPWebApplication currentApplication = site.WebApplication;
                    if (currentApplication.MaxQueryLookupFields < 20)
                    {

                        SPSecurity.RunWithElevatedPrivileges(delegate()
                        {
                            try
                            {
                                currentApplication.MaxQueryLookupFields = 20;
                            }

                            catch (System.Security.SecurityException ex)
                            {
                                _log.ErrorFormat("no permission");
                            }
                        });

                    }
                }                
        } 
```

即使我是农场管理员激活了该功能，也会引发安全异常（“拒绝访问”）。在线

```
currentApplication.MaxQueryLookupFields = 20; 
```

AFAIK SPSecurity.RunWithElevatedPrivileges 作为站点管理员**而不是**场管理员运行。但如何做到这一点？（没有 RunWithElevatedPrivileges 我得到了同样的例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:03:03.180

您需要在 SPSecurity.RunWithElevatedPrivileges 中创建新的 SPSite、SPWeb 和 SPWebApplication 对象，否则您将以与当前用户相同的权限运行它们。例如

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
        {
        SPSecurity.RunWithElevatedPrivileges(delegate()
             {             
                SPWeb currentWeb = ContentTypes.ValidateFeatureActivation(properties);
                using (SPSite site = new SPSite(currentWeb.Site.Url))
                {
                    SPWebApplication currentApplication = site.WebApplication;
                    if (currentApplication.MaxQueryLookupFields < 20)
                    {
                            try
                            {
                                currentApplication.MaxQueryLookupFields = 20;
                            }

                            catch (System.Security.SecurityException ex)
                            {
                                _log.ErrorFormat("no permission");
                            }

                    }
                }
            });                
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T10:02:19.323

您应该在 RWEP 内实例化另一个 SPSite 对象以获取应用程序池标识上下文，因为在 RWEP 块之外创建的第一个 SPSite 是使用 SPSite 当前用户上下文创建的。所以试试这个：

```
public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPWeb currentWeb = ContentTypes.ValidateFeatureActivation(properties);
        using (SPSite site = new SPSite(currentWeb.Site.Url))
        {
            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPSite _site = new SPSite(site.ID))
                {
                    SPWebApplication currentApplication = _site.WebApplication;
                    if (currentApplication.MaxQueryLookupFields < 20)
                    {
                        try
                        {
                            currentApplication.MaxQueryLookupFields = 20;
                        }
                        catch (System.Security.SecurityException ex)
                        {
                            _log.ErrorFormat("no permission");
                        }
                    }
                }
            });
        }
    } 
```

# mysql - PHP 不能从数据库中正确生成数组（UBUNTU）

> ID：10719684
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:24.027
> 
> 标签：mysql, ubuntu, php

我有一个小问题。我的数据库中有两个表：用户和类。第一个包含有关用户的信息，第二个包含有关用户类和访问权限的信息。

现在我使用这个从那里提取所有数据：

```
SELECT * FROM users NATURAL JOIN classes WHERE users.ID_User = '$id'; 
```

mysql 代码工作并返回一个正确的数组。现在，当我接下来要做的时候：

```
<?php
$result = mysql_query($sql_above);
$row = mysql_fetch_array($result);
print_r($row);
?> 
```

...我得到这个：

```
Array ( [0] => 1 [ID_User] => 1 [1] => John [Name] => John [2] => Doe [Surname] => Doe [3] => ... [16] => Owner [Class] => Owner [17] =>  [All] =>  [18] =>  [CanAuth] =>  [19] =>  [CanViewData] =>  [20] =>  [CanAddData] =>  [21] =>  [CanAlterData] =>  [22] =>  [CanDeactivateData] =>  [23] =>  [CanDeleteData] =>  [24] =>  [CanMgLocatari] =>  ...  ) 
```

从 17 到末尾的列是访问权限，在数据库中用 1 或 0 表示。在那里，它们丢失了。

是否有任何选项可以在 PHP 配置中启用来纠正这个问题？因为在 Windows 机器上，代码正确执行并且权限正常。

PHP 版本 5.3.6-13ubuntu3.7 | Apache/2.2.20 (Ubuntu) | MySQL客户端版本：5.1.62

请回复。谢谢！

# sql - Cakephp 1.3 - 排序一组结果

> ID：10719686
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:37.770
> 
> 标签：sql, cakephp, model

我有以下模型：

```
$values = $this->PtlUserdata->find('all', array(

    'fields' => array(

        'PtlUserdata.field', 
        'PtlUserdata.value',
        'PtlUserdata.timestamp'

     ), 

     'conditions' => array(

         'PtlUserdata.user_id' => $user->get('id'),

     ),

     'order' => array('PtlUserdata.timestamp' => 'DESC'),
     'group' => array('PtlUserdata.field')

)); 
```

我正在尝试按时间戳对结果进行排序，然后按字段对结果进行分组，这样我就可以获得具有该字段名称的最新记录。

有谁知道如何做到这一点是cakephp？

在此先感谢您的帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:31:15.127

这是否有效：

```
$values = $this->PtlUserdata->find('all', array(

'fields' => array(

    'PtlUserdata.field', 
    'PtlUserdata.value',
    'max(PtlUserdata.timestamp)'

 ), 

 'conditions' => array(

     'PtlUserdata.user_id' => $user->get('id'),
     'PtlUserdata.timestamp' => 'max(PtlUserdata.timestamp)',
 ),

 'group' => array(
      'PtlUserdata.field',
      'PtlUserdata.timestamp'
      )

)); 
```

我没有机会对此进行测试，但您肯定需要按`PtlUserdata.timestamp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:36:39.240

这是数据库的默认行为。您将不得不想出某种解决方法来做到这一点。

一个想法：[CakePHP：按 ID 分组和按日期排序](https://stackoverflow.com/questions/6858408/cakephp-group-by-id-and-order-by-date)

# qt - 如何在 QWebView 中捕获插件错误

> ID：10719687
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:40.047
> 
> 标签：qt, qtwebkit

我正在使用 QWebView 加载具有 adobe flash 的网站（例如 youtube 视频）。以便 QWebView 与我的机器中已经安装的 Adob​​e flash player 插件交互，但是如果插件中出现任何错误，那么如何在 QWebView 中捕获它？这样至少我可以向我的用户显示一些错误消息以采取进一步的措施。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:30:47.180

我认为这是一个 Flash 问题，而不是 Qt 问题。您可以使用[SWFObject](http://code.google.com/p/swfobject/)之类的库来嵌入 Flash 文件。如果 Flash 不可用，SWFObject 还允许您显示替代内容，因此您可以使用它来显示一些消息或链接以下载 Flash 插件。

# iphone - 在播放电影时播放电影文件，然后播放各种音频文件。(iOS)

> ID：10719688
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:41.257
> 
> 标签：iphone, objective-c, ios, xcode

播放我的电影时是否可以播放一些音频文件。我不希望它打断或暂停他的电影。只是在各个预定点同时播放的音频。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:54:19.663

同时使用两个或三个 Audioplayer。需要时播放该音频

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:53:56.313

你不应该有任何问题。

如果您想同步或延迟这些播放器，您应该使用它们在[AvAudioPlayer 类参考](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)中提供的代码，使用 [playAtTime:](http://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/occ/instm/AVAudioPlayer/playAtTime:)方法。

遗憾的是 MPMediaPlayback 协议没有提供相同的方法，因此与视频进行精确同步有点困难。

编辑：RoLYroLLs[在这里](https://stackoverflow.com/a/10259608/653513)`MPMoviePlayerLoadStateDidChangeNotification`提到了使用来实现这一点，这种方法似乎很有希望。

# java - Java泛型类，如何创建实例

> ID：10719690
> 
> 赞同：3
> 
> 时间：2012-05-23T12:14:46.863
> 
> 标签：java, generics

我有以下类结构：

```
public abstract class Generic<T extends SuperClass>

public class SuperGeneric<T extends SuperClass & SomeInterface> 
    extends Generic<T> 
```

现在我想创建一个`SuperGeneric`涵盖所有可能类的实例。我试过这样：

```
Generic<? extends SuperClass & SomeInterface> myGeneric 
    = new SuperGeneric<? extends SuperClass & SomeInterface>(); 
```

现在这似乎不起作用。`Generic`它给出了以下错误`Incorrect number of arguments for type Generic<T>; it cannot be parameterized with arguments <? extends SuperClass, SomeInterface>`：.

在`new SuperGeneric`我得到一个类似的错误：`Incorrect number of arguments for type SuperGeneric<T>; it cannot be parameterized with arguments <? extends SuperClass, SomeInterface>`。

知道如何正确创建 this 的实例`SuperGeneric`吗？

这个想法是我有 2 个不同的类满足`extends SuperClass & SomeInterface`条件，但不能用一种类型概括。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:20:14.750

当您实例化时，您需要提供一个类型供编译器填写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:22:49.583

当你想实例化一个泛型类时，你需要提供具体类型。你说有两个类可以满足约束。说这些是`Type1`和`Type2`。

然后你应该能够做到：

```
Generic<Type1> myGeneric1 = new SuperGeneric<Type1>(); 
```

和

```
Generic<Type2> myGeneric2 = new SuperGeneric<Type2>(); 
```

通配符仅用于声明。他们的意思是：你可以在这里放任何类型（满足给定的约束）

# iphone - 如何仅在 x 和 y 轴交汇处添加绘图点

> ID：10719693
> 
> 赞同：0
> 
> 时间：2012-05-23T12:14:47.593
> 
> 标签：iphone, ios, ipad, core-plot

我使用核心绘图库为我的 iPad 应用程序绘制了散点图。用户可以触摸绘图点，但我想将绘图点限制在 x 和 y 轴相交的位置。例如 xmin = 1 , xmax = 4,ymin =1,ymax = 5 用户只能在 (1,1),(1,2),(1,3),(1,4),(1, 5),(2,1) .... (5,5).如果用户触摸到喜欢 (1.98002,1.79000) 它会在 (2,2) 处绘制点。请告诉我该怎么做。我是非常困惑。请不要 x 和 y 轴也可能包含十进制值。

# javascript - 如何在 UIWebView 中实现更改字体颜色的方法

> ID：10719701
> 
> 赞同：1
> 
> 时间：2012-05-23T12:15:12.353
> 
> 标签：javascript, iphone, html, objective-c, xcode

在我的应用程序中，我有一个 UIWebView 具有来自文件（HTML）的内容

我想知道是否有任何方法可以让用户将字体颜色更改为 5 种颜色或类似的东西

反正？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:30:27.817

您想从应用程序（objective-c）还是 html 中更改它？

您可以在 html 文件中创建一个 javascript 函数来更改字体（例如，通过更改 body 标签上的类）。

如果您想从应用程序更改它，您可以使用以下方法调用该函数：

`[webView stringByEvaluatingJavaScriptFromString:@"changeColor('red')"];`

* * *

像这样的东西应该工作。

**CSS**

```
.red{
   color:#f00;
}
.green{
   color:#0f0;
}
.blue{
   color:#00f;
} 
```

**JS**

```
function changeColor(colorClass){ // red, green or blue
    document.body.className = colorClass; 
} 
```

**例子**

[http://jsfiddle.net/mMhwC/](http://jsfiddle.net/mMhwC/)

# java - 使用 jfreechart 的折线图

> ID：10719703
> 
> 赞同：1
> 
> 时间：2012-05-23T12:15:24.787
> 
> 标签：java, servlets, jfreechart

我在 jsp 和 servlet 中使用 jfreeChart API 创建了折线图。

以下是servlet中的代码

```
// Get the output stream from the response object:
OutputStream out = response.getOutputStream();

// Set the HTTP Response Type:
response.setContentType("image/png");

XYSeries series = new XYSeries("Average Weight1233");
series.add(1.48, 20.0);
series.add(1.52, 25.0);
series.add(2.02, 50.0);
series.add(2.05, 65.0);
series.add(3.30, 2);
series.add(3.52, 50);
XYDataset xyDataset = new XYSeriesCollection(series);

// Create chart:
JFreeChart chart
= ChartFactory.createXYLineChart("XYLine Chart using JFreeChart",
                                 "Age", "Weight",xyDataset,
                                 PlotOrientation.VERTICAL,
                                 true, true, false);

// Write the data to the output stream:
ChartUtilities.writeChartAsPNG(out, chart, 400, 300); 
```

它会根据我添加的值自动创建水平数字，`XYSeries`但我想手动设置该值。

可能吗？如何？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T12:51:29.400

我不确定，但我有一个例子。有一天，我需要根据时间创建水平数字。然后我创建了这个类：

```
public class TimeAxis {

    public static TickUnitSource createTimeTickUnits() {
        TickUnits units = new TickUnits();
        TimeFormat format = new TimeFormat();
        units.add(new NumberTickUnit(1, format, 2));
        units.add(new NumberTickUnit(2, format, 2));
        units.add(new NumberTickUnit(5, format, 5));
        units.add(new NumberTickUnit(10, format, 2));
        units.add(new NumberTickUnit(20, format, 2));
        units.add(new NumberTickUnit(60, format, 5));
        units.add(new NumberTickUnit(120, format, 2));
        units.add(new NumberTickUnit(240, format, 2));
        units.add(new NumberTickUnit(540, format, 5));
        units.add(new NumberTickUnit(1080, format, 2));
        units.add(new NumberTickUnit(2160, format, 2));
        units.add(new NumberTickUnit(5400, format, 5));
        units.add(new NumberTickUnit(10800, format, 2));
        units.add(new NumberTickUnit(21600, format, 2));
        units.add(new NumberTickUnit(54000, format, 5));
        units.add(new NumberTickUnit(108000, format, 2));
        units.add(new NumberTickUnit(216000, format, 2));
        units.add(new NumberTickUnit(540000, format, 5));
        units.add(new NumberTickUnit(1080000, format, 2));
        units.add(new NumberTickUnit(2160000, format, 2));
        units.add(new NumberTickUnit(5400000, format, 5));
        units.add(new NumberTickUnit(10800000, format, 2));
        units.add(new NumberTickUnit(21600000, format, 2));
        units.add(new NumberTickUnit(54000000, format, 5));
        units.add(new NumberTickUnit(108000000, format, 2));
        units.add(new NumberTickUnit(216000000, format, 2));
        units.add(new NumberTickUnit(540000000, format, 5));
        units.add(new NumberTickUnit(1080000000, format, 2));
        units.add(new NumberTickUnit(2160000000.0, format, 2));
        units.add(new NumberTickUnit(5400000000.0, format, 5));
        units.add(new NumberTickUnit(10800000000.0, format, 2));
        return units;
    }
} 
```

然后，我创建了一个类来操作“TimeFormat”：

```
public class TimeFormat extends NumberFormat {

    @Override
    public StringBuffer format(double number, StringBuffer toAppendTo, FieldPosition pos) {
        StringBuffer myReturn = new StringBuffer();
        //here I have the source to transform time in seconds in that format: 12h25m35s
        return myReturn;
    }

    @Override
    public StringBuffer format(long number, StringBuffer toAppendTo, FieldPosition pos) {
        return new StringBuffer();
    }

    @Override
    public Number parse(String source, ParsePosition parsePosition) {
        return 0;
    }
} 
```

最后，我设置了这个属性：

```
ValueAxis domainAxis = plot.getDomainAxis();
domainAxis.setStandardTickUnits(TimeAxis.createTimeTickUnits()); //Here sets the horizontal numbers 
```

要设置垂直数字：

```
NumberAxis rangeAxis = (NumberAxis) plot.getRangeAxis();
rangeAxis.setStandardTickUnits(TimeAxis.createTimeTickUnits()); 
```

我希望有用

# c - C / 确定接收数据包的端口

> ID：10719704
> 
> 赞同：0
> 
> 时间：2012-05-23T12:15:24.660
> 
> 标签：c, sockets

我创建了四个具有不同端口配置的套接字。使用`select`我从四个文件描述符之一中读取的函数。但是我怎样才能知道我在哪个端口收到了 UDP 数据包，我只有文件描述符，对吧？根据端口，我需要以不同方式处理接收到的数据包。该`recv_from`函数填充一个`struct sockaddr`我可以从中读出数据包的源端口，但不能读出目标端口的函数。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:19:23.040

将`select`所有四个套接字添加到要检查的集合中，`select`返回时集合将包含活动的套接字。

您现在有两种方法可以确定您从哪个特定套接字/端口返回`select`：

1.  与您拥有的插座进行比较。
2.  获取本地端口（虽然`getsockname`）并与端口进行比较。

我推荐第一种选择。

# asp.net - 如何将参数从 iOS 发送到 ASP.NET WebService？

> ID：10719707
> 
> 赞同：0
> 
> 时间：2012-05-23T12:15:40.170
> 
> 标签：asp.net, ios, xcode, json, web-services

我有一个 Web 服务，用 c# 编写，如下所示：

```
[WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string HelloWorld()
    {
        return "Hello World";
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string HelloParam(string param)
    {
        return "Hello " + param;
    } 
```

我在 Xcode 中的代码如下所示：

```
 - (IBAction)getButton:(id)sender {

    NSString *urlString = @"http://172.16.43.132/Server/Service1.asmx/HelloParam";
    NSURL *url = [NSURL URLWithString:urlString];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod: @"POST"];
   // [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"charset=utf-8" forHTTPHeaderField:@"Content-Type"];
       NSError *errorReturned = nil;
    NSURLResponse *theResponse =[[NSURLResponse alloc]init];
    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&theResponse error:&errorReturned];
       if (errorReturned) 
    {
        NSLog(@"Shit");
    }
    else 
    {
        NSString *retVal = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"%@", retVal);

    }
} 
```

当我调用方法你好世界。我收到 xml 格式的答案。它应该在 json 中。

当我调用第二种方法“helloparam”时，我得到一个错误：参数丢失。

你能给我一个简单的例子来说明如何在 iPhone 和 asp.net 网络服务之间建立连接和通信吗？提前致谢

# c# - WaveOut 将波形文件播放到设备的特定通道

> ID：10719708
> 
> 赞同：0
> 
> 时间：2012-05-23T12:15:41.933
> 
> 标签：c#, winapi, audio, waveout

我正在使用`WaveOut`API 播放 .wav 文件，使用设备功能获取设备信息。有什么方法可以获取频道信息（例如ASIO如何给出）并且需要将两个不同的.wav文件播放到设备的两个不同频道。请在这方面帮助我。任何 C# 示例都会有所帮助

最好的问候， 拉马钱德兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:47:21.947

waveOut API 只接受不同通道的交错采样，因此您必须将 2 个单通道文件合并为一个双通道文件并播放。

# python - Python，如何将 statuses/update_with_media 发布到 Twitter？

> ID：10719714
> 
> 赞同：6
> 
> 时间：2012-05-23T12:16:02.700
> 
> 标签：python, twitter

我能够通过以下方式在 Python 中成功发布状态更新（推文）：

```
import urllib
import oauth2 as oauth

token = oauth.Token(access_token,access_token_secret)
consumer = oauth.Consumer(consumer_key,consumer_secret)

client = oauth.Client(consumer,token)

data = {'status': 'hello world'}
request_uri = 'https://api.twitter.com/1/statuses/update.json'

resp, content = client.request(request_uri, 'POST', urllib.urlencode(data)) 
```

现在我想知道我需要更改什么才能使用 update_with_media 发布图片？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T22:54:30.330

最后我得到了它的工作，并想让那些为此苦苦挣扎的人知道我最终是如何使用漂亮的 Twython 库轻松做到的，它很好地抽象了函数：

```
from twython import Twython

twitter = Twython(
    twitter_token = 'consumer_key',
    twitter_secret = 'consumer_secret',
    oauth_token = 'access_token',
    oauth_token_secret = 'access_token_secret'
)

twitter.updateStatusWithMedia('/home/blah/projects/pathexample/static/example.png', status='hello!') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:45:22.090

也许是这样的？

```
data = {'status': 'hello world'
      , 'media': ['image.jpg']
      }
request_uri = 'https://upload.twitter.com/1/statuses/update_with_media.json'

resp, content = client.request(request_uri, 'POST', urllib.urlencode(data)) 
```

这只是通过检查[使用 statuses/update_with_media](https://dev.twitter.com/discussions/1059?page=4)和[POST statuses/update_with_media](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media)快速拼凑起来的，可能不正确。

# wpf - 无需安装 Office 即可在 Excel 中读取和写入数据

> ID：10719720
> 
> 赞同：1
> 
> 时间：2012-05-23T12:16:24.040
> 
> 标签：wpf, excel, .net-4.0

我正在开发一个 WPF 4.0 应用程序，它使用 Microsoft Office Interop 来读取和写入 Excel 文件。但我面临的情况是，我需要在未安装 Office 的系统上读取/写入 Excel 文件中的数据。

这有点重复[这个](https://stackoverflow.com/questions/1369361/how-can-i-programatically-create-read-write-an-excel-without-having-office-ins)问题。我重新发布这个问题的唯一原因是因为之前的帖子已经有 3 年了，我只是想知道现在是否有更好的方法。

要求是我需要将文件写入并保存为 .xls/.xlsx 格式并从中读取。我现在支持使用互操作的两种格式。

*   **购买许可证不是一种选择。**
*   **安装 Excel 不是一种选择。**
*   **需要支持 .xls/.xlsx 格式的读/写。**
*   **易于实施，因为我有点落后于计划。将无法在实施上投入大量时间。**
*   **需要一个值得信赖且强大的解决方案，这意味着它应该是您个人使用过或有良好反馈的东西。**
*   **更喜欢既能满足读/写需求又能同时支持 .xls/.xlsx 格式的解决方案。如果不存在这样的东西，可以使用不同的解决方案，但上述所有要点将分别适用于它们。**
*   **不需要建议，但更需要指导。**

**请不要投票结束这个问题**，因为其他问题没有给出具体的解决方案。有太多的建议。我需要一个你有信心的解决方案，因为这个应用程序很快就会进入最终构建，如果我没有得到任何强大的解决方案，我们最终可能会按原样发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:35:59.223

如果您可以在没有 xls-support（仅 xlsx）的情况下生活，那么您绝对应该查看 OpenXML SDK：

[http://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

我不需要 Excel 或任何额外的许可证，你可以读写，我会说它很强大，而且它附带了很棒的生产力工具。另一方面，API 不是那么直观，您无法处理 .xls 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:28:48.063

我建议你 ExcelPackage: Office Open XML Format 文件创建

[http://excelpackage.codeplex.com/](http://excelpackage.codeplex.com/)

# c# - ASP.NET 应用程序发送带有超链接的邮件

> ID：10719722
> 
> 赞同：7
> 
> 时间：2012-05-23T12:16:34.923
> 
> 标签：c#, asp.net, .net

```
MailMessage message = new MailMessage();
message.From = new MailAddress("hkar@gmail.com");

message.Subject = "Subject";
message.Body = "Please login";
SmtpClient smtp = new SmtpClient();

message.To.Add("karaman@gmail.com");                  
smtp.Send(message); 
```

我想在发送的邮件正文中有一个超链接，上面写着“登录”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T12:18:21.480

```
message.Body = "Please <a href=\"http://www.example.com/login.aspx\">login</a>"; 
```

确保在发送内容是 HTML 时突出显示。

```
message.IsBodyHTML = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T12:18:44.460

将消息设置为`message.IsBodyHTML = true`

```
<a href="http://YourWebsite.Com">Login</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T12:19:14.447

```
message.Body = string.Format("Click <a href='{0}'>here</a> to login", loginUrl); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:19:27.840

将消息格式化为 HTML，并确保将 MailMessage 上的 IsBodyHtml 属性设置为 true：

message.IsBodyHtml = true;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T12:30:04.017

```
 System.Text.StringBuildersb = new System.Text.StringBuilder();
 System.Web.Mail.MailMessage mail = new System.Mail.Web.MailMessage(); 
 mail.To = "recipient@address"; 
 mail.From = "sender"; 
 mail.Subject = "Test"; 
 mail.BodyFormat = System.Web.Mail.MailFormat.Html;
 sb.Append("<html><head><title>Test</title><body>"); //HTML content which you want to send
 mail.Body = sb.ToString();
 System.Web.Mail.SmtpMail.SmtpServer = "localhost"; //Your Smtp Server 
 System.Web.Mail.SmtpMail.Send(mail); 
```

您只需将正文的格式设置为 html，然后您可以在邮件消息的 bosy 中添加 html 元素

# navigation - 显示：无；和显示：块；在导航菜单中

> ID：10719724
> 
> 赞同：2
> 
> 时间：2012-05-23T12:16:39.993
> 
> 标签：navigation, html-lists, css

我正在尝试更多地了解一些 CSS 编码。我借了一个导航栏。HTML 代码是这样的：

```
 <ul>
        <li>
        <a href="">Business</a>
            <ul> 
            <li><a href="#">sub menu item 1</a></li>
            <li><a href="#">sub menu item 2</a></li>
            </ul>
        </li>
    </ul> 
```

CSS：

```
 ul li 
   {
   display: block;
   position: relative;
   float: left;
   font-size:12px;
   top:15px;
   }

   li ul { display: none; }

   #navigation ul
   {margin:0px; padding:0px;}

   ul li a 
   {
   display:block;
   text-decoration: none;
   color: white;
   padding: 20px 30px 20px 15px;
   }

   ul li a:hover 
   { 
   background: #F89623;
   }

   /*submenu position*/
   li:hover ul 
   {
   display:block;
   position:absolute;
   left: -30px;
   top:51px;
   }

   li:hover a 
   { 
   background: #F89623;
   }

   /*Background when you mouseover subitems*/
   li:hover li a:hover 
   { 
   background: #FFDEB0;
   }

   /*top nav only*/
  #navigation > ul > li > a {
  font-size: 16px;
  border-top-left-radius:10px;
  border-top-right-radius:10px;
  } 
```

我不明白一些显示标签。做什么`li ul { display: none; }`？

这在我的代码中还有`display: block;`什么作用（上图）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:24:44.243

**li ul { 显示：无；}**将隐藏在 li 标签下定义的 ul 列表。

**li:hover ul { display:block; .. }**这将显示在 li 标签下定义的隐藏 ul 列表块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:25:09.070

CSS display:none 表示隐藏元素；display:block 表示显示元素。

看看后代选择器 - [http://www.w3.org/TR/CSS2/selector.html#descendant-selectors](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)

在你的情况下，

```
 li ul { display: none; } 
```

意味着不会显示那些作为 LI 后代的 UL（display:none vs. display:block）；

换句话说，

```
<ul id='parentUL'>
   <li id='childLI'>
      <ul id='childUL'>
      </ul>
   </li>
</ul> 
```

childUL 将不会基于此 CSS 显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:25:12.560

```
li ul { display: none; } 
```

隐藏 li 标签内的 ul 标签。

```
display: block; 
```

这将显示为 div 或段落。（它将使其可见）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T12:45:55.873

它只是在显示模式之间切换——元素在页面上的行为方式。正如您可能已经猜到的那样，`none`这意味着它根本不会显示。另外两种最常见的显示类型是`inline`和`block`。

内联元素是诸如`<a>`、`<span>`或之类的元素`<img>`。它将自己定位在与先前内容相同的行上。

块元素是诸如`<div>`或之类的元素`<h1>`。它将自己定位在新行上，并且通常会填满容器的整个宽度。块元素也可以使用填充、边框、边距等（盒子模型）进行操作。

还有很多其他的显示模式，例如`table`或`inline-block`。我建议您阅读显示模式。这是一个很好的资源，可以帮助您入门：[http ://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

编辑：
我知道`<img>`技术上不是纯`inline`元素。它确实显示内联，但与传统`inline`元素不同，它可能具有一些`block`属性，例如宽度或高度。实际上，它可能更像是一个`inline-block`元素，但这是另一天的讨论。;)

# android - 无法在 Spring 3 REST Web 服务中反序列化 START_ARRAY 令牌中的对象实例

> ID：10719729
> 
> 赞同：23
> 
> 时间：2012-05-23T12:16:56.363
> 
> 标签：android, spring, jackson

我正在使用 Spring 提供的这个很酷的东西：Spring RESTWebService（Spring 的版本是 3）。如果我从浏览器访问 URL，我可以看到 JSON 响应，但从客户端端点（Android 应用程序）我收到此错误消息：

```
Caused by: org.springframework.web.client.ResourceAccessException: 
    I/O error: Can not deserialize instance of MyObject out of START_ARRAY token
  at [Source: org.apache.http.conn.EofSensorInputStream@4076e940; line: 1, 
    column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: 
    Can not deserialize instance of MyObject  out of START_ARRAY token
  at [Source: org.apache.http.conn.EofSensorInputStream@4076e940; line: 1, column: 1]
   at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:466)
   at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:414)
   at org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:234)
   at com.be.android.locateconsultants.resources.AsyncTaskRESTServiceCaller.doInBackground(AsyncTaskRESTServiceCaller.java:43)
   at com.be.android.locateconsultants.resources.AsyncTaskRESTServiceCaller.doInBackground(AsyncTaskRESTServiceCaller.java:1)
   at android.os.AsyncTask$2.call(AsyncTask.java:252)
   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
   ... 4 more

 Caused by: org.codehaus.jackson.map.JsonMappingException: Can not deserialize 
    instance of MyObject  out of START_ARRAY token
  at [Source: org.apache.http.conn.EofSensorInputStream@4076e940; line: 1, column: 1]
   at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:198)
   at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeUsingCreator(BeanDeserializer.java:565)
   at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:365)
   at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2395)
   at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1655)
   at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:135)
   at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
   at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:74)
   at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:632)
   at org.springframework.web.client.RestTemplate$ResponseEntityResponseExtractor.extractData(RestTemplate.java:618)
   at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:459)
   ... 10 more 
```

MyObject 结构与来自服务器端应用程序的结构相同。

我试图像这样请求服务器：

```
final String url = ".....";
RestTemplate restTemplate = new RestTemplate();
ResponseEntity<Consultant> responseEntity = restTemplate.getForEntity(
            url, Consultant.class); 
```

或者像这样：

```
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON);
HttpEntity<String> entity = new HttpEntity<String>(headers);
ResponseEntity<MyObject> response = restTemplate
            .exchange("....",HttpMethod.GET, entity, MyObject.class);
System.out.println("RESPONSE: " + response.getBody()); 
```

但还是和上面一样的错误。无法弄清楚我在这一点上缺少什么，任何想法或提示都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T15:08:03.987

您应该将其映射到`List<Consultant>`而不是映射到`Consultant.class`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-11T08:27:07.840

`Consultant[].class` 如果您尝试反序列化映射对象的 JSON 数组，则类似情况下的解决方案是映射到。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-14T15:13:30.767

这与 Jackson 以及您尝试从数组中反序列化和初始化容器的方式有关。

虽然我的使用上下文有点不同，但这可能有助于一些从搜索 Jackson 特定的反序列化错误到这里的人。

我不得不这样做：

```
List<Consultant> consultants = Arrays.asList(
    mapper.readValue(myJson.toString(), Consultants[].class)
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T01:21:38.840

文件 foo.json 包含一批数据，如下所示：

> [{"A":"TYMH","B":"datab","C":"DLJQ","D":"datad"}, {"A":"TYMH","B":"datab ","C":"DLJQ","D":"datad"}]

以下语句为您提供 LinkedHashMap 的 ArrayList，其中 ABCD 是键。

```
List list = mapper.readValue(new File("D:\\...\\foo.json"), List.class); 
```

# yelp - 是否可以使用 Yelp API 发表评论？

> ID：10719734
> 
> 赞同：2
> 
> 时间：2012-05-23T12:17:07.420
> 
> 标签：yelp

我正在使用 yelp api，我可以在 api 的帮助下检索产品评论。

但是，是否也可以使用 Yelp API 发表评论？

我需要从我自己的 php 脚本中发布对产品的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T07:50:09.793

不，Yelp API 目前是只读的。

# java - 使用 DefaultHttpClient 发送大文件失败

> ID：10719736
> 
> 赞同：0
> 
> 时间：2012-05-23T12:17:16.397
> 
> 标签：java, android, networking, connection, android-networking

我正在尝试使用 httpput 将大文件传输到服务器。但是，我不能传输大文件。我收到带有错误消息的 IOException：“系统调用期间出现 I/O 错误，对等方重置连接”。我正在使用代码：

```
 // create authenticate client
    DefaultHttpClient client = new DefaultHttpClient(httpParameters);

    // create HTTP put with the file
    HttpPut httpPut = new HttpPut(url);
    final File recordingFile = new File(mDir, mName);
    FileEntity entity = new FileEntity(recordingFile, "binary/octet-stream");
    entity.setChunked(true);
    httpPut.setEntity(entity);
    httpPut.addHeader("Connection", "Keep-Alive");
    httpPut.addHeader("Content-Type", "application/zip");

    // Execute
    HttpResponse res = client.execute(httpPut);
    int statusCode = res.getStatusLine().getStatusCode(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:01:03.450

通过 http 发送文件时，请记住您的服务器 http 对文件的尺寸有最大限制。

如果我没记错，默认值为 2MB：但您可以在服务器 (PHP) 的配置文件中更改它。

要检查的文件是 php.ini。

打开文件并搜索“upload_max_filesize = 2M”：只需将 2 更改为项目所需的尺寸并保存。

就这样！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T12:25:44.903

我认为您需要更改 web.config 文件中的最大请求大小。

```
<httpRuntime executionTimeout="110" maxRequestLength="8192" /> 
```

# c# - 更改 Visual Studio 2010 的进程内编译器？

> ID：10719742
> 
> 赞同：1
> 
> 时间：2012-05-23T12:17:27.870
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, async-await, csc

这是对以下内容的后续：[使用异步委托/lambda 进行投影](https://stackoverflow.com/questions/10712655/projection-using-async-delegate-lambda)

显然，异步 CTP 有一个我遇到的错误，我需要使用 VS11 编译器。在命令行中，`msbuild`即使针对用 VS2010 编写的项目运行，仍然可以使用 VS11 编译器进行编译，因为 VS11/.NET 4.5 就地安装在 .NET 4.0 目录中。

但是，在 Visual Studio 2010 中，使用了一个进程内编译器，似乎还没有升级到新的 VS11 编译器。

我可以（通过一些hackery / DLL 操作）更改Visual Studio 2010 使用的编译器吗？在 VS11 支持 Windows Azure 之前，这只是一个 hack/解决方法，这样我就可以升级到 beta/release Candidate/RTM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:58:52.807

使用鲜为人知的属性可能会取得一些成功[`UseHostCompilerIfAvailable`](http://msdn.microsoft.com/en-us/library/microsoft.build.tasks.csc.usehostcompilerifavailable%28v=vs.110%29.aspx)。这应该会导致 IDE 中的构建使用框架目录中的编译器。

但是，诸如智能感知之类的 IDE 功能将始终使用进程内编译器。如果您遇到的错误仅在异步方法的最终转换上，您可能会发现进程内编译器对于智能感知已经足够好，并且 UseHostCompilerIfAvailable 足以让您从 VS 构建。

您可以通过手动编辑您的 csproj 文件来设置它以包含

```
<UseHostCompilerIfAvailable>false</UseHostCompilerIfAvailable> 
```

在顶级属性组中。

另外 - VS11 支持“往返”！在大多数情况下，您可以使用 VS11 打开您的 VS10 项目，而无需强制升级。因此，如果你有一个团队需要暂时将你的项目保持在 V10 格式，你至少可以独立使用 VS11。但是，如果您需要尚未为 VS11 发布的插件，这将更加困难。

希望这可以帮助！:)

# wpf - system.windows.interactivity.dll

> ID：10719743
> 
> 赞同：1
> 
> 时间：2012-05-23T12:17:31.367
> 
> 标签：wpf, resources

我想知道，如果有什么方法可以知道，system.windows.interactivity.dll 正在加载哪些资源？这个 dll 有许多文件夹，包含单个文件：System.Windows.Interactivity.resources.dll，我想发现在运行时加载了什么文件。怎么可能做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:23:53.393

您可以使用 Process Explorer 实用工具获取程序集及其在内存中加载的资源的快照。你可以从[这里下载](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

# ios - prepareToRecord 崩溃

> ID：10719758
> 
> 赞同：3
> 
> 时间：2012-05-23T12:18:29.273
> 
> 标签：ios, audio-recording, xcode4.3, avaudiorecorder

我从苹果文档 [http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6中阅读了有关 AVaudioRecorder 的信息](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW6)

我找到了一个记录声音的功能。但我的代码正在崩溃

```
[soundRecorder prepareToRecord]; 
```

我用谷歌搜索了很多。但我没有找到解决方案。我还发现了一些其他源代码。但它们也有同样的问题（崩溃`prepareToRecord`）。任何人都可以帮助我吗...

野兔是我的`IBAction`

```
- (IBAction) recordOrStop: (id) sender {

if (recording) {

    [soundRecorder stop];
    recording = NO;
    self.soundRecorder = nil;

    [recordOrStopButton setTitle: @"Record" forState:
     UIControlStateNormal];
    [recordOrStopButton setTitle: @"Record" forState:
     UIControlStateHighlighted];
    [[AVAudioSession sharedInstance] setActive: NO error: nil];

} else {

    [[AVAudioSession sharedInstance]
     setCategory: AVAudioSessionCategoryRecord
     error: nil];

    NSDictionary *recordSettings =
    [[NSDictionary alloc] initWithObjectsAndKeys:
     [NSNumber numberWithFloat: 44100.0], AVSampleRateKey,
     [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
     [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
     [NSNumber numberWithInt: AVAudioQualityMax],
     AVEncoderAudioQualityKey,
     nil];
    AVAudioRecorder *newRecorder =
    [[AVAudioRecorder alloc] initWithURL: soundFileURL
                                settings: recordSettings
                                   error: nil];

    self.soundRecorder = newRecorder;

    soundRecorder.delegate = self;
    [soundRecorder prepareToRecord];
    [soundRecorder record];
    [recordOrStopButton setTitle: @"Stop" forState: UIControlStateNormal];
    [recordOrStopButton setTitle: @"Stop" forState: UIControlStateHighlighted];

    recording = YES;
} 
```

}

我的 .h 文件

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>
#import "MBProgressHUD.h" 
```

`@interface LyricsController : UIViewController<AVAudioSessionDelegate,AVAudioRecorderDelegate, MBProgressHUDDelegate>{`

```
IBOutlet UITextView *LyricsView;
MBProgressHUD *HUD;
AVAudioRecorder * soundRecorder;
NSURL *soundFileURL;  

BOOL recording;
BOOL playing;

__weak IBOutlet UIButton *recordOrStopButton;
}@property(strong,nonatomic)NSURL *soundFileURL;
@property(nonatomic,strong)AVAudioRecorder * soundRecorder; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-11T19:38:49.400

这只是因为您使用了断点。我遇到了同样的问题，我的代码没有崩溃，但它`prepareTorecord`作为断点停止，因为即使我没有在其上放置任何断点。如果您禁用 xcode 的断点，它也将在模拟器上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T21:53:59.267

[从这个答案](https://stackoverflow.com/questions/9683547/avaudioplayer-throws-breakpoint-in-debug-mode)中引用：

> 添加您的异常断点并将异常类型从“All”编辑为“Objective-C exceptions” AudioToolbox 中的某些类会引发常规 C++ 异常。您可以通过这种方式过滤掉它们。

至于为什么：

> “AVAudioPlayer 不应该抛出随机异常”——这不在我们手中。这就是框架的编写方式，你必须忍受它。虽然，我同意这不是一个好主意

# windows-7 - SQL Compact Edition (CE) 和密码复杂性要求

> ID：10719766
> 
> 赞同：0
> 
> 时间：2012-05-23T12:19:04.267
> 
> 标签：windows-7, passwords, sql-server-ce, group-policy

在 Windows 7 中，我们有强制执行密码复杂性要求的组策略，这需要 SQL Server Express 的“更好”密码。

这是否也会影响 SQL CE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:52:06.827

不，它不会影响 SQL Server Compact...

# c# - 无论如何要使用 F# 中的 C# 隐式运算符吗？

> ID：10719770
> 
> 赞同：17
> 
> 时间：2012-05-23T12:19:17.060
> 
> 标签：c#, f#, implicit-conversion

如果我有一个隐式转换为 double 的 C# 类，如下所示：

```
public class Parameter
{
    private double _value;
    public Parameter(double value) { _value = value }
    public static implicit operator double(Parameter p) { return _value; }
} 
```

F# 不喜欢我尝试使用它，就好像它是`float`：

```
let a = Parameter(4.0)
let b = Parameter(2.0)
let c = a * Math.Sin(b) <-- 'expected float, here Parameter' 
```

有没有办法做到这一点（我猜没有，基于[这个问题/答案](https://stackoverflow.com/q/1686895/11410)），如果没有，什么是体面的解决方法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T12:37:54.840

F# 不执行隐式转换，但它允许您定义显式运算符来运行它们。请参阅[kvb 对上一个问题的回答](https://stackoverflow.com/questions/1686895/is-there-an-equivalent-to-creating-a-c-sharp-implicit-operator-in-f)：

```
let inline (!>) (x:^a) : ^b = ((^a or ^b) : (static member op_Implicit : ^a -> ^b) x) 
```

这是使用[静态解析](http://msdn.microsoft.com/en-us/library/dd548046.aspx)的类型参数来表示输入或结果需要提供隐式转换运算符 - 这些被编译为名为 的方法`op_Implicit`，因此 F# 编译器检查具有此特殊名称的静态方法。

使用`!>`运算符，您现在可以在代码示例中明确说明要转换`Parameter`为`float`（两次）的位置，如下所示：

```
let a = Parameter(4.0) 
let b = Parameter(2.0) 
let c = !> a * Math.Sin(!> b) 
```

我认为在 F# 中不允许隐式转换的主要原因是它会使类型推断更加困难，并且编译器很难给出好的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:29:26.867

它不会让您进行隐式转换。在需要的地方明确转换。

有关明确执行此操作的各种方法，请参见此处：http: [//natehoellein.blogspot.com/2008/02/basic-type-conversions-with-f.html](http://natehoellein.blogspot.com/2008/02/basic-type-conversions-with-f.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-02T22:22:55.147

[FSharp.Interop.Dynamic](https://github.com/fsprojects/FSharp.Interop.Dynamic)使用 DLR，因此对于大多数人来说可能有点矫枉过正，但具有`Dyn.implicitConvert`动态使用 C# 隐式运算符的功能。

```
 [<Test>] member basic.``Test Implicit Conversion`` ()=
                    let ele = 50
                    ele |> Dyn.implicitConvert |> should equal (decimal 50) 
```

# eclipse - eclipse插件：是否可以“听”和解释文本编辑器上的双击？

> ID：10719774
> 
> 赞同：1
> 
> 时间：2012-05-23T12:19:21.603
> 
> 标签：eclipse, eclipse-plugin

大局是我们需要实现一个远程调试器作为一个 Eclipse 插件。在调试期间将传递的代码将显示在文本编辑器中。

我在想我们如何处理在文件上放置断点的问题。有什么方法可以监听双击事件，然后获取发出双击的特定行？

非常感谢您阅读和思考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:05:50.000

看看[Eclipse Debug 项目](http://www.eclipse.org/eclipse/debug/index.php)——他们有一个新的调试器的完整基础设施。包括断点、编辑器等的接口。

# objective-c - 分配给Objective C中的数组元素分配给错误的索引

> ID：10719775
> 
> 赞同：0
> 
> 时间：2012-05-23T12:19:21.903
> 
> 标签：objective-c, arrays, variable-assignment

在调试我的 iPhone 项目时，我看到了一些相当奇怪的行为。除其他外，在 UIViewController 后代的头文件中，我有这个：

```
@interface OOGameDetailsViewController : UIViewController <OOXMLParserDelegate,OOServerDelegate>
{
    ...

    OOXMLNode *node;
    float elheights[6];

    ...
}

@property (readwrite, retain) OOXMLNode *gameNode;

...

@end 
```

然后在代码中，我为这个数组赋值：

```
- (void)setNode:(OOXMLNode *)aNode
{
    node = aNode;
    [self updateUserDefaults];

    [background setImage:[gameNode imageFromKey:@"background"]];

    CGFloat maxw = 240.0f;

    NSString *text = [gameNode elementNodeWithKey:@"title"].value;
    CGSize sizeOfText=[text sizeWithFont:[UIFont boldSystemFontOfSize:20.0f]
                       constrainedToSize:CGSizeMake(maxw, CGFLOAT_MAX)
                           lineBreakMode:UILineBreakModeWordWrap];
    ...
    elheights[0] = 10 + sizeOfText.height;

    text = [gameNode elementNodeWithKey:@"age"].value;
    sizeOfText=[text sizeWithFont:[UIFont systemFontOfSize:16.0f]
                constrainedToSize:CGSizeMake(maxw, CGFLOAT_MAX)
                    lineBreakMode:UILineBreakModeWordWrap];
    ...
    elheights[1] = 10 + sizeOfText.height;

    ...
    elheights[2] = 10 + height;

    ...
    elheights[3] = 10 + separatorHeight;

    text = [gameNode elementNodeWithKey:@"intro"].value;
    sizeOfText=[text sizeWithFont:[UIFont boldSystemFontOfSize:14.0f]
                constrainedToSize:CGSizeMake(maxw, CGFLOAT_MAX)
                    lineBreakMode:UILineBreakModeWordWrap];
    ...
    elheights[4] = sizeOfText.height;

    ...
    elheights[5] = 20 + btnHeight;

    [mainTable reloadData];
} 
```

这个想法很简单：我将 6 个浮点值分配给一个 6 元素数组 - 索引从 0 到 5。但是，当我在调试器中逐步执行此代码时，我始终看到每个分配都分配了索引 1 高于指示的数组元素。即，`elheights[0] = ...`实际上将这个值赋值给`elheights[1]`等等。最后一个赋值（赋值给索引为 5 的元素什么都不做）。

为了证明我没有疯，这里是调试器的截图（相关部分的裁剪 - 将图像大小保持在最小）。第一个是在分配之前，第二个是在分配之后。

![在此处输入图像描述](../Images/a91952f74ee8edddbd3df057d2156f9d.png)

* * *

![在此处输入图像描述](../Images/252a25c8159478eeb1e73a89b0fd03bf.png)

我清理了项目并重新启动；我关闭了模拟器，关闭了 Xcode，重新打开并重新启动 - 结果相同。ObjectiveC 处理简单 C 风格数组的方式有什么特别之处吗？

在此先感谢，-Aleks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:42:57.817

`-O0`在单步执行由于编译器重新排序指令而导致的优化（即非）代码时，我在 Xcode 中遇到了奇怪的调试器行为。尝试确保这`GCC_OPTIMIZATION_LEVEL`不是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:31:30.787

XCode4 默认使用新的 LLDB 调试器，但它并不总是能完美运行。（例如，当前版本不识别结构对齐属性）。它在这里和那里也有一些错误。

如果您遇到问题，请切换到 GDB（单击工具栏中的方案 / 编辑方案，有“调试器”弹出按钮有两个选项）。

# web-applications - 如何模拟丢失的数据包，以测试我的 Web 应用程序对网络故障的处理？

> ID：10719780
> 
> 赞同：0
> 
> 时间：2012-05-23T12:19:31.117
> 
> 标签：web-applications, network-programming, packet

如何模拟丢失的数据包，以测试我的 Web 应用程序对网络故障的处理？

我的背景是视频游戏开发 ( [http://xona.com/](http://xona.com/) )，我知道可以通过模拟丢失的数据包来测试网络编码，设置从 0% 到 100% 以测试您的游戏在不良网络流量下的性能。我相信微软提供了一种方法来做到这一点，但我现在迷失了寻找这个解决方案。我对有关此事的任何解决方案和建议都很感兴趣。

我希望调试的 Web 应用程序在平均丢包率为 0.06..0.07% 的网络上运行。我们认为，这足以给用户带来问题，但对于开发人员来说太低而无法复制。在这几周的工作中，我只复制了两次问题，然后无法立即再次复制以进行调试。如果可能的话，我想模拟更多的数据包丢失以复制问题，但仅限于我自己和运行 Web 应用程序的服务器之间，而不是每个人与 Web 应用程序服务器之间。

我希望这能解释这种情况！

编辑：可能重复，但仅在 Linux 机器上，但我们可能也需要在 Windows 机器上执行此操作（取决于被赋予任务的开发人员）：[在 Linux 上模拟延迟和丢弃的数据包](https://stackoverflow.com/questions/614795/simulate-delayed-and-dropped-packets-on-linux)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:55:17.000

我使用了一个名为 DonsProxy 的 JAVA 应用程序来模拟延迟、丢包和低带宽。

你可以在这里找到它：http: [//donsproxy.moneybender.com/](http://donsproxy.moneybender.com/)

# methods - 形式方法、逻辑和 VDM 过去的试卷问题

> ID：10719781
> 
> 赞同：2
> 
> 时间：2012-05-23T12:19:35.227
> 
> 标签：methods, logic, formal-languages, formal-methods

我希望有人可以帮助我解决以下问题，答案将是最好的，但如果你能指出我正确的方向，那也会有所帮助。我是大学最后一年的学生，这些问题来自之前的形式方法考试，我可以知道为今年论文准备的答案。我们的讲师似乎不是最好的，并且没有涵盖很多内容，因此事实证明不可能找到确切的答案。谷歌并没有太大的帮助，也没有推荐的书籍。

1 - 假设 ∃x • P (x) 在逻辑上等价于 ¬∀x • ¬P (x) 并且 ∀x ∈ S • P (x) 意味着 ∀x • x ∈ S ⇒ P (x)，推导出∃x ∈ S • P (x) 表示 ∃x • x ∈ S ∧ P (x)

2 - 描述必须证明的两个陈述以表明定义：

```
max(i, j)
if i>j
then i
else j 
```

是规范的正确实现：

```
max(i : Z, j : Z)r : Z
pre true
post (r = i ∨ r = j) ∧ i ≤ r ∧ j ≤ r 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:40:55.743

第一个实际上只是使用给定的和另外两个众所周知的逻辑等价来操作符号：

```
(1) ∃x • P(x) is logically equivalent to ¬∀x • ¬P(x)
(2) ∀x∈S • P(x) means ∀x • x∈S ⇒ P(x)

∃x∈S • P(x)
== ¬∀x∈S • ¬P(x) (from (1))
== ¬∀x • x∈S ⇒ ¬P(x) (from (2))
== ¬∀x • ¬x∈S v ¬P(x) (from def. of ⇒)
== ¬∀x • ¬(x∈S ∧ P(x)) (from ¬A v ¬B == ¬(A ∧ B))
== ∃x • x∈S ∧ P(x) (from (1) -- the other way around) 
```

对于第二个，您需要认识到 的结果`max(i, j)`将沿以下两条路径之一计算：一条是何时`i<j`，另一条是何时`i>=j`（的逻辑否定`i<j`）

所以你需要证明

1.  if `true ∧ i<j`(前置条件), then `(r=i ∨ r=j) ∧ i≤r ∧ j≤r`(后置条件), and
2.  if `true ∧ i>=j`(precond.) then `(r=i ∨ r=j) ∧ i≤r ∧ j≤r`(post cond.),

`r`结果在哪里`max(i, j)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-01T16:33:26.240

但是您问题的第 2 节没有意义，因为任何返回 i 或 j 的实现都是正确的。

规范是错误的。

一个正确的后置条件是

```
post (i > j => r = i) v (i <= j => r = j) 
```

# android - 将 Opencv 链接到我自己的 android 项目

> ID：10719783
> 
> 赞同：4
> 
> 时间：2012-05-23T12:19:36.393
> 
> 标签：android, eclipse, opencv

我想使用 Opencv 处理一个 Android 项目（在 Eclipse 下），我已经导入了 Opencv 库，并且它与 Eclipse 相关联的示例，如下所述：

[http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)。

我测试了样品，它们运行良好。但是当我在 Eclipse 中创建自己的新 Android 项目时，它无法链接与项目放置在同一工作区中的 Opencv（即我编写时出错`import org.opencv.core.*`）。

新项目与 Opencv (`src`和`lib`) 链接是否需要做一些事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:07:42.350

我建议您下载 OpenCV 预构建包并按照这些[说明](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)进行操作。

我不知道您是否打算将 C++ 用于 openCV 并与 NDK 和 JNI 库进行交叉编译，但这种方式很容易设置所有内容。如果您需要更多关于如何在 android 项目中包含 C++ OpenCV 代码的帮助，我可以查看我的代码。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T15:26:22.013

听起来您还没有在新项目中包含 Open CV 库。

我不记得在项目中包含库的确切步骤，但下面是一些可能有帮助的链接。

[http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project](http://wiki.eclipse.org/FAQ_How_do_I_add_an_extra_library_to_my_project) 's_classpath%3F

[在 Eclipse 中导入库？](https://stackoverflow.com/questions/4962559/import-libraries-in-eclipse)

# mongodb - 带有参数的MongoDB查找查询是否将整个文档加载到内存中？

> ID：10719786
> 
> 赞同：6
> 
> 时间：2012-05-23T12:19:43.627
> 
> 标签：mongodb

在 MongoDB 中，当我们将字段名称作为 find 查询的第二个参数传递时，mongodb 是将整个文档加载到内存中还是仅加载与这些字段关联的内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T13:23:51.910

在 MongoDB 服务器端，整个文档存储在磁盘上的一个位置。因为 MongoDB 使用内存映射文件，所以任何文档访问都需要将整个文档加载到内存中。查询运行后，仅将请求的字段传输到客户端。这意味着在客户端/驱动程序端，只有请求的字段存储在内存中，而不是整个文档

# javascript - 将网络表单加载到 iframe 中

> ID：10719788
> 
> 赞同：0
> 
> 时间：2012-05-23T12:19:51.587
> 
> 标签：javascript, asp.net

在我的项目中，我创建了一个菜单列表。当我单击菜单项时，它应该将给定页面加载到同一页面上的 iframe 中。但是，它作为单独的页面加载，而不是加载到 iframe 中。为什么是这样？

```
<script language="javascript" type="text/javascript" >
   function changeFrm(NewSrc){
       document.getElementById('middleiD').src = NewSrc;}
    <asp:HyperLink ID="HyperLink6" runat="server" onClick='ChangeFrm("WebUserControl.ascx")'>Calendar</asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:21:54.333

你需要`return false;`在你的`onclick`事件中告诉原始点击停止冒泡

```
<asp:HyperLink ID="HyperLink6" runat="server" onClick='ChangeFrm("WebUserControl.ascx"); return false;'>Calendar</asp:HyperLink> 
```

好吧，要停止欺骗，请将其添加到您的功能中：

```
function changeFrm(NewSrc){
   document.getElementById('middleiD').src = NewSrc;
   return false;
} 
```

# php - 创建 Moodle 2 主题

> ID：10719794
> 
> 赞同：2
> 
> 时间：2012-05-23T12:20:12.450
> 
> 标签：php, themes, moodle

正如 Moodle 的文档所建议的那样，我创建了一个新的 Moodle 主题。

在 config.php 文件中，我定义了这样的布局：

```
$THEME->layouts = array(
    // Most pages - if we encounter an unknown or a missing page type, this one is used.
    'base' => array(
        'theme' => 'nop',
        'file' => 'general.php',
        'regions' => array('side-pre', 'side-post'),
        'defaultregion' => 'side-post'
    ),
    'standard' => array(
        'theme' => 'nop',
        'file' => 'general.php',
        'regions' => array('side-pre', 'side-post'),
        'defaultregion' => 'side-post'
    )
); 
```

创建它后，我在 Moodle 的管理区域中选择了它，并清理了缓存。在管理主题选择页面中，我可以看到这个主题颜色、样式和新界面，但是，在 Moodle 的其他区域（每隔一个页面）我看不到它。

有谁知道为什么会发生这种奇怪的事情？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T14:21:46.397

我可以通过在 config.php 文件中添加此代码来解决它。

```
$THEME->layouts = array(    // Most pages - if we encounter an unknown or a missing page type, this one is used.
    'base' => array(
        'theme' => 'nop',
        'file' => 'general.php',
        'regions' => array('side-pre', 'side-post'),
        'defaultregion' => 'side-post'
    ),
    'standard' => array(
        'theme' => 'nop',
        'file' => 'general.php',
        'regions' => array('side-pre', 'side-post'),
        'defaultregion' => 'side-post'
    ),
    'frontpage' => array(
        'theme' => 'nop',
        'file' => 'general.php',
        'regions' => array('side-pre', 'side-post'),
        'defaultregion' => 'side-post'
    ) ); 
```

# javascript - Javascript源代码查找

> ID：10719796
> 
> 赞同：0
> 
> 时间：2012-05-23T12:20:15.663
> 
> 标签：javascript

我有一个外部 xxxx.js 文件，其中的内容是不可理解的格式。

例如：{G(d&&!E.6c(d)){E.2A+=(E.2A?" ":"") 等。

我不明白这段代码是如何完成的，因为我是这种开发的新手。谁能帮我找到这个代码？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:22:23.927

询问谁为您提供了它的开发/调试版本的代码。您拥有的代码已针对大小进行了优化，并非旨在用手触摸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:22:30.363

该代码已通过“缩小器”，旨在：

1.  使代码更短
2.  混淆代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:23:14.020

这种代码是因为js是最小的形式。js的min形式是指通过缩短变量名和修剪空格、删除注释等方式，尽可能将其转换为最少代码...

压缩 javascript 文件是个好主意的原因有很多：

1.  为您的用户提供更快的下载时间。
2.  减少网站的带宽消耗。
3.  将多个 javascript 文件合并为一个压缩文件时减少服务器上的 HTTP 请求数量，从而减少服务器负载并允许更多访问者访问您的网站。
4.  javascript 执行不需要注释和空格；删除它们将加快脚本执行时间。

# c# - 在 Asp.net C# 中的 DataGrid 中分页下一步不起作用

> ID：10719799
> 
> 赞同：1
> 
> 时间：2012-05-23T12:20:32.197
> 
> 标签：c#, asp.net, datagrid, paging, page-index-changed

我正在尝试对数据进行分页。基本上我正在获取数据并希望在多页上显示它。但它不起作用。我正在使用 Asp.net 和 C# 进行编码。我正在使用 mysql 作为数据库。

代码如下： ASP代码

```
<asp:DataGrid runat="server" ID="RestData"
     AllowPaging="True" PageSize="2" 
     OnPageIndexChanged="RestData_PageIndexChanged" AllowCustomPaging="True" 
     PagerStyle-Wrap="False">
     <PagerStyle />
</asp:DataGrid> 
```

C#代码：

```
protected void Page_Load(object sender, EventArgs e)
 {
    BindData();
 }
public void BindData()
    {
     RestData.DataSource = call.GetReader(Convert.ToInt32(AreaData.SelectedValue));  
       //GetReader is function which returns the data reader of mysql 
     RestData.DataBind();
    }
protected void RestData_PageIndexChanged(object source, DataGridPageChangedEventArgs e)
    {
       RestData.CurrentPageIndex = e.NewPageIndex;
        BindData();
   } 
```

输出：它显示两行（因为我给了pagesize 2）。但我看不到下一页。查询应该返回超过 2 行（当我使用中继器时确实会发生这种情况，但我无法在其中进行分页。

请提供一些解决方案（我无法用这个论坛中的任何其他解决方案解决我的问题，所以我创建了新的解决方案）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:31:42.987

尝试添加

```
If(! IsPostBack)
{
   BindData();
} 
```

有一个类似于您在此处的[DataGrid custom paging的示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.allowcustompaging.aspx)

下面的部分更适合`Gridview`而不是`DataGrid`

~~您应该订阅`PageIndexChanging`而不是`PageIndexChanged`事件。~~

`PageIndexChanging`当您单击其中一个分页按钮并且在网格处理分页操作之前发生

而 PageIndexChanged 是发布操作。

~~另外我会检查绑定数据的页面加载~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T17:40:14.633

当您尝试更改页面时，DataGrid 必须知道该怎么做。

在您的网格中（示例来自我在 VB 中的项目，抱歉）：

```
 <asp:DataGrid ID="MainGrid"
    OnEditCommand="MainGrid_Edit"
    OnCancelCommand="MainGrid_Cancel"
    OnUpdateCommand="MainGrid_Update"
    runat="server"
    AutoGenerateColumns="False"
    AllowSorting="True"
    CssClass="DistPortalDataGrid"
    AllowPaging="True"
    CellPadding="3"
    PageSize="25" 
    onpageindexchanging="MainGrid_PageIndexChanged"
    .... 
```

注意最后一行...

现在转到代码视图并创建以下子：

```
Protected Sub MainGrid_PageIndexChanged(source As Object, e As DataGridPageChangedEventArgs) Handles MainGrid.PageIndexChanged
    MainGrid.CurrentPageIndex = e.NewPageIndex
    BindMainGrid() 'rebinds the grid
End Sub 
```

正如[Rajuu Parmar](https://stackoverflow.com/a/10719974/3726030)所指出的，DataGrid没有`.PageIndex`属性。这是对的。DataGrid 的等效属性是`.CurrentPageIndex`. 为什么微软让它们与众不同，我不知道。虽然您解决了问题（从日期算起几年前），但我希望您或其他人发现这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:32:43.683

您还需要通过执行以下操作来告诉网格总共有多少项目：

```
public void BindData() {
    RestData.VirtualItemCount = CountTotalItemsInDb();
    // ... the rest ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T20:13:13.840

数据网格上的分页不起作用的原因是因为您创建了“受保护”方法并且它无法访问它。如果代码更改为下面，它会工作。希望对有需要的人有所帮助。

```
public void RestData_PageIndexChanged(object source, DataGridPageChangedEventArgs e)
    {
       RestData.CurrentPageIndex = e.NewPageIndex;
        BindData();
   } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-23T12:31:21.530

尝试这个。

```
protected void G_BgtPersonnel_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    //Next page in the GridView
    G_BgtPersonnel.PageIndex = e.NewPageIndex;
    BindgrdPersonnal();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-24T06:06:50.123

谢谢你的帮助。我得到了解决方案。如果将来有人需要，只需发布​​解决方案。最后我得到了GridView的解决方案。它确实进行分页。

ASP 代码

```
<asp:GridView ID="RestGridData" runat="server"
     AllowPaging="True"  AutoGenerateColumns="False"
     PageSize="2" onpageindexchanging="RestGridData_PageIndexChanging">
  </asp:GridView> 
```

客户服务代码

```
protected void Page_Load(object sender, EventArgs e)
    {
       GridBindData(); // on page load 
    }
public void GridBindData()
    {
        MySqlConnection Conn; // I am using MySql 
        myConn = new MySqlConnection("server=localhost;user=root;database=DBName;");
        conn.Open();
        MySqlCommand cmd = new MySqlCommand("Select Name, address, mobileNo, emailID from  user", conn);
         MySqlDataReader reader = cmd.ExecuteReader();
        // As DataReader can move only in forward it is not useful to use it GridView.
       // So convert it to DataTable(or?). It can move in both direction

        DataTable dTable = new DataTable();
        dTable.Load(reader); // ASP function to convert reader to DataTable

        RestGridData.DataSource = dTable; 
        RestGridData.DataBind();

    }
protected void RestGridData_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        RestGridData.PageIndex = e.NewPageIndex;
        GridBindData();
    } 
```

# node.js - csrf 令牌使用

> ID：10719804
> 
> 赞同：5
> 
> 时间：2012-05-23T12:20:44.563
> 
> 标签：node.js, express, csrf, csrf-protection

我对使用生成 csrf 令牌来保护我的 Web 应用程序感兴趣。我的问题是我需要如何将该令牌发送回服务器：使用查询参数或 http 标头 x-csrf-token ？

有什么区别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T08:12:16.923

由于您使用的是 Express，您可以使用其 CSRF 中间件（通过 Connect）：[http ://www.senchalabs.org/connect/csrf.html](http://www.senchalabs.org/connect/csrf.html)

您可以在此处查看注释源：[https ://github.com/senchalabs/connect/blob/master/lib/middleware/csrf.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/csrf.js)

您需要做的就是包含该中间件，然后在您的 POST 表单（或 PUT 等任何改变状态的请求）中将变量设置`_csrf`为具有 value `req.session._csrf`。

在此处查看示例：[https ://github.com/senchalabs/connect/blob/master/examples/csrf.js](https://github.com/senchalabs/connect/blob/master/examples/csrf.js)

**更新**

从 Connect 2.9.0 开始，您必须使用`req.csrfToken()`而不是`req.session._csrf`

完整示例：[https ://github.com/senchalabs/connect/blob/master/examples/csrf.js](https://github.com/senchalabs/connect/blob/master/examples/csrf.js)

提交：[https ://github.com/senchalabs/connect/commit/70973b24eb1abe13b2da4f45c1edbb78c611d250](https://github.com/senchalabs/connect/commit/70973b24eb1abe13b2da4f45c1edbb78c611d250)

**更新2**

连接中间件被分成不同的模块（和相关的 repos），你可以在这里找到它们（包括 CSRF 一个）：[https ://github.com/senchalabs/connect#middleware](https://github.com/senchalabs/connect#middleware)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T11:54:57.213

从我的角度来看，您应该`csrf`在提交表单时在隐藏字段中使用 POST 参数。这是唯一的出路。

但是对于 AJAX 请求，我强烈建议您改用`X-CSRF-Token`标头。主要是因为，如果正确完成，它将为您省去记住为每个 POST 请求添加令牌的麻烦。或者，当使用 jQuery Form 之类的库时，在提交时添加额外的 POST 参数可能会变得很糟糕。

例如，如果您将 jQuery 用于您的 AJAX 请求，它会为您提供[一个挂钩](http://api.jquery.com/ajaxSend/)，您可以使用该挂钩`X-CSRF-Token`在发出请求之前自动且透明地设置。因此，只需要很少的客户端代码修改。你的代码的威力猛增。

--

我在几乎所有项目中成功使用的示例实现，基于 Django 的，将是：

```
jQuery(document).ajaxSend(function(event, xhr, settings) {

  function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var cookie = jQuery.trim(cookies[i]);
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) == (name + '=')) {
          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
          break;
        }
      }
    }
    return cookieValue;
  }

  function sameOrigin(url) {
    // url could be relative or scheme relative or absolute
    var host = document.location.host; // host + port
    var protocol = document.location.protocol;
    var sr_origin = '//' + host;
    var origin = protocol + sr_origin;
    // Allow absolute or scheme relative URLs to same origin
    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
           (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
           // or any other URL that isn't scheme relative or absolute i.e relative.
           !(/^(\/\/|http:|https:).*/.test(url));
  }

  function safeMethod(method) {
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
  }

  if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
    xhr.setRequestHeader("X-CSRFToken", getCookie('csrf.token'));
  }
}); 
```

在服务器端，您只需要设置一个包含 CSRF 令牌的 cookie，以便客户端轻松获取令牌。我将其替换为`app.use(express.csrf())`：

```
app.use((function(options) {

  var csrf = express.csrf(options);

  return function(req, res, next) {

    function onCsrfCalled() {
      var token = req.session._csrf;
      var cookie = req.cookies['csrf.token'];

      // Define a cookie if not present
      if(token && cookie !== token) {
        res.cookie('csrf.token', token);
      }

      // Define vary header
      res.header('Vary', 'Cookie');

      next();
    }

    csrf(req, res, onCsrfCalled);
  }
})()); 
```

# jquery - jquery下拉选择文本填充asp.net

> ID：10719807
> 
> 赞同：0
> 
> 时间：2012-05-23T12:20:55.203
> 
> 标签：jquery, asp.net, drop-down-menu, stylesheet, jquery-selectbox

[我使用来自http://www.misfitgeek.com/2011/04/jquery-styled-dropdownlist/](http://www.misfitgeek.com/2011/04/jquery-styled-dropdownlist/) 的jquery 下拉选择框，
它工作正常，除了我不知道如何设置 padding-left: 20px; 选定文本的
选定文本在使用圆角背景时非常左，并且选定文本需要一些左填充
任何人都可以帮忙

```
 <!-- aspx -->
            <link href='Styles/Selectbox.css' rel='stylesheet' type='text/css' />
                <script src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.1.js'
                        type='text/javascript' charset='utf-8'></script>
                <script type='text/javascript' src='Scripts/jquery.selectbox-0.5.js'>
                </script>
                <script src='Scripts/PageScript.js' type='text/javascript'></script>
    <asp:DropDownList runat='server' name='Items' id='Items'
                          class='StyledDD' ClientIDMode='Static'>
          <asp:ListItem>One</asp:ListItem>
          <asp:ListItem>Two</asp:ListItem>
          <asp:ListItem>Three</asp:ListItem>
          <asp:ListItem>Four</asp:ListItem>
        </asp:DropDownList>

    <!--    jquery function  -->
        $(document).ready(function () {
            $('.StyledDD').selectbox();
        });

<!-- CSS --->
/* Drop down styles*/
div.selectbox-wrapper {
  position:absolute;
  width:400px;
  background-color:white;
  border:1px solid #ccc;
  margin:0px;
  margin-top:-10px;
  padding:0px;
  text-align:left;
  max-height:200px;
  overflow:auto;
}

/*Drop down list styles*/
div.selectbox-wrapper ul {
  list-style-type:none;
  margin:0px;
  padding:0px;
}
/* Selected item in dropdown list*/
div.selectbox-wrapper ul li.selected {
  background-color: #EAF2FB;
}

/* Hover state for dropdown list */
div.selectbox-wrapper ul li.current {
  background-color: #CDD8E4;
}

/* Drop down list items style*/
div.selectbox-wrapper ul li {
  list-style-type:none;
  display:block;
  margin:0;
  padding:2px;
  cursor:pointer;
}

/* Look and feel of select box */
.selectbox
{
  margin: 0px 5px 10px 0px;
  padding-left:2px;
  font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;
  font-size:1em;/* Resize Font*/
  width : 190px; /* Resize Width */
  display : block;
  text-align:left;
  background: url('../images/bg_select.png') right;
  cursor: pointer;
  border:1px solid #D1E4F6;
  color:#333;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:48:17.943

花了几个小时后，我发现只是给

```
text-indent: 50px; 
```

为我工作

# monitoring - 另一种方式，而不是 SNMP

> ID：10719809
> 
> 赞同：-1
> 
> 时间：2012-05-23T12:21:01.747
> 
> 标签：monitoring, snmp

是否有其他方法可以监视系统阈值（RAM、CPU）而不是 SNMP？既然一开始在SNMP中定义TRAP并不容易，应该有客户端-服务器交互一样简单的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:17:32.543

好吧，如果您正在查询 Windows 机器，您可以使用[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)。它真的很强大，如果你从 Linux 机器上查询，它还有一个 Linux 移植。例如，如果要监视 RAM 使用情况，可以执行以下查询：

```
select FreePhysicalMemory from Win32_OperatingSystem 
```

现在，如果您想了解更多信息，我需要了解您的平台系统以及您将使用什么语言。

# c# - 在WPF中绘制一个支持多角度的三角形

> ID：10719812
> 
> 赞同：0
> 
> 时间：2012-05-23T12:21:21.980
> 
> 标签：c#, wpf, xaml, geometrydrawing

我正在使用 a`GeometryDrawing`在 WPF 中绘制一个三角形。我目前能够将它绑定到我的 ViewModel 的“角度”属性，该属性附加到用户可以移动的滑块，从而围绕对象移动矩形。问题是我想让矩形也能够根据我计算的基于缩放值的特定角度更宽或更窄。我目前无法更改矩形，因为我不知道如何在`GeometryDrawing`对象上执行此操作。也许应该使用另一个对象？

GeometryDrawing 对象代码是这样的：

```
<GeometryDrawing Geometry="M100,100 L186.6,280 A100,100,0,0,1,13.4,280 L100,100">
     <GeometryDrawing.Brush>
         <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" Opacity="0.25">
               <GradientStopCollection>
                     <GradientStop Color="Black" Offset="0" />
                     <GradientStop Color="Transparent" Offset="0.9"/>
               </GradientStopCollection>
         </LinearGradientBrush>
     </GeometryDrawing.Brush>
</GeometryDrawing> 
```

应用程序的 UI 是这样的（只是一个测试项目，我已经在我的实际项目中实现它之前测试了控件）

![矩形问题的 UI。 褪色的矩形是有问题的](../Images/e05972ab39e2932b75f179755b04cf4e.png)

感谢大家的帮助！

约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:33:09.803

[您可以用两个 LineSegments 和一个ArcSegment](http://msdn.microsoft.com/en-us/library/system.windows.media.arcsegment.aspx)替换当前的 Geometry 绘图字符串。

```
<ArcSegment Size="100,50" 
            IsLargeArc="True" 
            SweepDirection="CounterClockwise" 
            Point="200,100" /> 
```

此外，对于视野而言，弧形比三角形更自然，尤其是在角度较大（接近 180 度）时。

**编辑**

这比看起来要难，因为您需要计算弧的终点。除了在代码中计算端点之外，我没有看到其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:45:58.983

好的，我已经设法使电弧打开和关闭。我这样做的方法是像这样定义两条弧线

```
<PathGeometry>
      <PathFigure StartPoint="50,0" IsClosed="True">
             <LineSegment Point="0,100" x:Name="m_leftLine" />
             <LineSegment Point="100,100" x:Name="m_rightLine" />
      </PathFigure>
</PathGeometry> 
```

然后只需为滑块的`ValueChanged`事件编写代码并使用所需的角度重新计算线的 X 位置。这导致了以下代码：

```
public partial class MyFovControl : UserControl
{
private float m_oldAngleValue;
private float m_newAngleValue;

public MyFovControl()
{
  InitializeComponent();
  this.zoomSlider.ValueChanged += new RoutedPropertyChangedEventHandler<double>(zoomSlider_ValueChanged);
  m_oldAngleValue = m_newAngleValue = 0;
}

void zoomSlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
{
  m_newAngleValue = (float)(Convert.ToDouble((double)lblFovXAngle.Content));

  // Happens only once the first time.
  if (m_oldAngleValue == 0)
  {
    m_oldAngleValue = m_newAngleValue;
  }

  m_leftLine.Point = new Point(m_leftLine.Point.X + (m_oldAngleValue - m_newAngleValue), m_leftLine.Point.Y);
  m_rightLine.Point = new Point(m_rightLine.Point.X - (m_oldAngleValue - m_newAngleValue), m_rightLine.Point.Y);
  m_oldAngleValue = m_newAngleValue;
  }
} 
```

我知道，非常梅西，但这是我能想到的唯一方法，而且从我在网上搜索的内容来看——可能是唯一的方法。

# java - 作为单独的 Maven 模块休息

> ID：10719815
> 
> 赞同：2
> 
> 时间：2012-05-23T12:21:36.767
> 
> 标签：java, rest, maven, jboss

我正在建立一个新的多模块项目结构。现在有一个 ejb 和一个 ear 模块，我想为 RESTful Web 服务添加一个 Web 模块。什么是最好的方法？

应用程序看起来像这样（模块及其内容）：

*   `app`(pom): 父 pom
    *   `core`(ejb)：ejb、休眠、DAO、实体、业务逻辑
    *   `ear`(ear)：创建可部署容器的模块

现在我想添加一个宁静的网络服务模块。

[查看来自http://www.jboss.org/jbossas/downloads](http://www.jboss.org/jbossas/downloads)的 jboss-as-7 快速入门应用程序，总有一个`war`模块可以引导其余服务，而带有 jax-rs 注释的 bean 是 ejb 项目的一部分（就我而言`core`：

*   `app`
    *   `ejb`（包含带有 jax-rs 注释的服务 + bean）
    *   `ear`
    *   `war`（只包含一个`web.xml`）

我对这种方法的问题是 ejb 模块包含服务和其余资源。把它们分开不是更好吗？或者这是要走的路？

否则：哪种方法会更好？

*   `app`
    *   `core`
    *   `ear`
    *   `rest`（包含其余资源 bean 和的战争`web.xml`）

或者

*   `app`
    *   `core`
    *   `ear`
    *   `rest`
    *   `rest-resources`（其余资源 bean 的单独容器）
    *   `rest-war`（仅包含 的战争`web.xml`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:33:58.550

从 JEE6/JAX-RS 的角度来看，您需要 WAR 文件的唯一目的是实际上有一些东西可以交给应用程序服务器进行部署。它实际上可以不包含任何资源（使其成为有效存档所需的资源除外），只要您的类在类路径中的某处可用，您的应用程序仍然可以工作。因此，您可以根据自己的需要来捆绑这些类。

您将需要一个扩展 javax.ws.rs.core.Application 的类。此类用作标记/引导程序，以向应用程序服务器指示 Web 存档中有可用的 REST 资源需要加载。在大多数商店中，我都看到这个类被放置在 WAR 项目本身中。

如果您真的在寻找组织技巧，我建议您首先将所有 REST 资源类分组到他们自己的项目中。将资源类工作所需的任何项目添加为依赖项（例如您的 core 和 ear 项目）。将所有三个（rest、ear、core）添加为您的战争项目的依赖项。

然后在您完成实施的过程中根据需要细化模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:44:13.467

这类项目有一个非常棒的 JBoss Maven Archetype。

1) 安装 maven 集成进入 Eclipse
2) 新建 -> 项目 -> Maven 项目
3) 单击下一步
4) 在 ee6 中的过滤器类型中
5) 在出现的选项中，使用组 ID：“org.jboss.spec. archetypes”和工件 ID：“jboss-javaee6-webapp-archetype”
6) 将推出一个结构精美的 Web 应用程序项目，其中 EAR 连接到 EJB 项目和 WAR 项目。

# java-me - 如何在midlet中获取模拟器的电话号码？

> ID：10719818
> 
> 赞同：1
> 
> 时间：2012-05-23T12:21:40.257
> 
> 标签：java-me, midp, phone-number

通常模拟器的电话号码会显示在自己身上（例如：0555555555）。

我想从 midlet 得到那个号码。

换句话说，是否有任何方法可以检索模拟器或手机的手机号码？

# iphone - 如何在 iPhone 应用程序中使用饼图显示百分比配给

> ID：10719819
> 
> 赞同：1
> 
> 时间：2012-05-23T12:21:46.823
> 
> 标签：iphone, ios, xcode

我在 iphone 应用程序中创建一个饼图，它从数组中获取 4 个值，然后创建饼图，它显示填充了不同颜色的饼图我还希望它必须显示每个部分的百分比，比如 1 是 15%，然后是 15% 35% 35% 像这样我使用以下代码来创建饼图。

下面是饼类的实现

```
 - (void)drawRect:(CGRect)rect
{

   int c=[itemArray count];

   CGFloat angleArray[c];
   CGFloat offset;
   int sum=0;

   CGContextRef context = UIGraphicsGetCurrentContext();

  CGContextSetAllowsAntialiasing(context, false);
  CGContextSetShouldAntialias(context, false);
   for(int i=0;i<[itemArray count];i++)

    {

    sum+=[[itemArray objectAtIndex:i] intValue];

}

   for(int i=0;i<[itemArray count];i++)

   {

    angleArray[i]=(float)(([[itemArray objectAtIndex:i] intValue])/(float)sum)*(2*3.14); // in radians
    CGContextMoveToPoint(context, radius, radius);
    if(i==0)
        CGContextAddArc(context, radius, radius, radius, 0,angleArray[i], 0);
    else
        CGContextAddArc(context, radius, radius, radius,offset,offset+angleArray[i], 0);
    offset+=angleArray[i];

    CGContextSetFillColorWithColor(context, ((UIColor *)[myColorArray objectAtIndex:i]).CGColor);
    CGContextClosePath(context); 
    CGContextFillPath(context);

    }

   }

   -(void)createGraph{

PieClass *myPieClass=[[PieClass alloc]initWithFrame:CGRectMake(10,440,230,200)];

myPieClass.backgroundColor=[UIColor clearColor];

myPieClass.itemArray=[[NSArray alloc]initWithObjects:valueOne,valueTwo,valueThree,valueFour, nil];

myPieClass.myColorArray=[[NSArray alloc]initWithObjects:[UIColor blueColor],[UIColor redColor],[UIColor greenColor],[UIColor brownColor], nil];

myPieClass.radius=100;

[self.view addSubview:myPieClass];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:30:28.027

这是带有百分比显示的饼图源代码[的链接。](https://github.com/honcheng/iOSPlot)这将对您有所帮助。

# c++ - 将单声道编译为静态库

> ID：10719828
> 
> 赞同：2
> 
> 时间：2012-05-23T12:22:11.970
> 
> 标签：c++, c, mono, embed, static-linking

我想在 Windows 上将 libmono 编译为静态库。

目标平台是 Windows x86。构建环境：Windows 7 64 位，VC++ Express 2010

我已经做了什么。

1) 下载单声道 2.10.8 源。
2) 从 msvc 文件夹中打开 mono.sln 并确保一切都在编译。
3) 然后我做了一些更改：
3.1) General->Project Defaults->Configuration Type: Static library (.lib)
3.2) General->Project Defaults->Use of MFC: Use Standard Windows Libraries
3.3) C/C++ -> 代码生成-> 运行时库：多线程 (/MT)
4) 构建它并且 VC++ 2010 成功创建了 mono-2.0.lib
5) 将它添加到我自己项目的链接器输入中（我想嵌入单声道）与：
5.1）常规->项目默认值->配置类型：应用程序（.exe）
5.2）常规->项目默认值->使用MFC：在Ststic库中使用MFC
5.3）C/C++->代码生成->运行时图书馆：

它似乎工作得近乎完美，但有一些可怕的问题：[Dictionary<TKey, TSource> 的神秘行为](https://stackoverflow.com/questions/10717406/mysterious-behavior-of-dictionarytkey-tsource)

一切都做对了吗？我应该指定任何其他编译器选项或预处理器指令吗？

**PS：** libmono命令行是：

> /I"..\libgc\include" /I"..\" /I"..\mono\" /I"..\mono\jit" /I"..\mono\eglib\src" /I "..\mono\eglib\src" /I"..\eglib\src" /Zi /nologo /W1 /WX- /O1 /Ob1 /Oi /Oy- /D "NDEBUG" /D " **i386** " /D“TARGET_X86”/D“i386”/D“WIN32”/D“_WIN32”/D“ **WIN32** ”/D“_WINDOWS”/D“WINDOWS”/D“HOST_WIN32”/D“TARGET_WIN32”/D“_CRT_SECURE_NO_DEPRECATE” /D“GC_NOT_DLL”/D“HAVE_CONFIG_H”/D“WINVER=0x0500”/D“_WIN32_WINNT=0x0500”/D“_WIN32_IE=0x0501”/D“WIN32_THREADS”/D“FD_SETSIZE=1024”/D“ **default_codegen**" /D "MONO_ASSEMBLIES=0" /D "_UNICODE" /D "UNICODE" /GF /Gm- /EHsc /MT /GS /Gy /fp:precise /Zc:wchar_t /Zc:forScope /Fp".\Release/ libmono.pch" /Fa"Win32\obj\libmono\" /Fo"Win32\obj\libmono\" /Fd"Win32\obj\libmono\vc100.pdb" /Gd /TC /analyze- /errorReport:queue

**升级版：**

我发现这个讨论与我的问题有关[http://mono.1490590.n4.nabble.com/Mono-static-library-td3546774.html](http://mono.1490590.n4.nabble.com/Mono-static-library-td3546774.html)

还是真实的吗？我可以使用 SGen 代替 Boehm 吗？如果是，任何提示都非常感谢。如果是的话，我可以将mono用作使用sgen的静态库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:59:41.313

我将跳过您问题的详细信息，因为我怀疑是[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

如果您想创建一个静态链接到单声道运行时的应用程序，只需使用`mkbundle.exe`：

```
 mcs Main.cs
 mkbundle --static --deps -z Main.exe -o Main
 ldd Main 
```

结果是

```
sehe@mint12:~/Projects/SODemo/SODemo$ mkbundle --static --deps -z Main.exe -o Main
OS is: Linux
Note that statically linking the LGPL Mono runtime has more licensing restrictions than dynamically linking.
See http://www.mono-project.com/Licensing for details on licensing.
Sources: 1 Auto-dependencies: True
   embedding: /home/sehe/Projects/SODemo/SODemo/Main.exe
   compression ratio: 44,62%
   embedding: /usr/lib/mono/4.0/mscorlib.dll
   compression ratio: 34,99%
   embedding: /usr/lib/mono/gac/System/4.0.0.0__b77a5c561934e089/System.dll
   compression ratio: 37,49%
   embedding: /usr/lib/mono/gac/Mono.Security/4.0.0.0__0738eb9f132ed756/Mono.Security.dll
   compression ratio: 40,12%
   embedding: /usr/lib/mono/gac/System.Configuration/4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
   compression ratio: 40,12%
   embedding: /usr/lib/mono/gac/System.Xml/4.0.0.0__b77a5c561934e089/System.Xml.dll
   compression ratio: 34,06%
   embedding: /usr/lib/mono/gac/System.Security/4.0.0.0__b03f5f7f11d50a3a/System.Security.dll
   compression ratio: 39,32%
   embedding: /usr/lib/mono/gac/System.Core/4.0.0.0__b77a5c561934e089/System.Core.dll
   compression ratio: 34,16%
   embedding: /usr/lib/mono/gac/Mono.Posix/4.0.0.0__0738eb9f132ed756/Mono.Posix.dll
   compression ratio: 40,01%
Compiling:
as -o temp.o temp.s 
cc -o Main -Wall `pkg-config --cflags mono-2` temp.c -lz `pkg-config --libs-only-L mono-2` -Wl,-Bstatic -lmono-2.0 -Wl,-Bdynamic `pkg-config --libs-only-l mono-2 | sed -e "s/\-lmono-2.0 //"` temp.o
Done
sehe@mint12:~/Projects/SODemo/SODemo$ ldd Main
    linux-vdso.so.1 =>  (0x00007fff7b1ff000)
    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007ffe95d0f000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007ffe95a8b000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007ffe95882000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007ffe9567e000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007ffe95461000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007ffe950bf000)
    /lib64/ld-linux-x86-64.so.2 (0x00007ffe95f52000) 
```

**请注意**，生成的可执行文件大小为：5.8Mb，用于普通程序。但它*是*完全独立的。

也可以看看

*   Monotouch 链接器[http://docs.xamarin.com/ios/advanced_topics/linker](http://docs.xamarin.com/ios/advanced_topics/linker) 这优化了所有未使用的引用

*   Sebastian Poulliot 的博客[http://spouliot.wordpress.com/](http://spouliot.wordpress.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:09:06.400

我现在一切都清楚了。

Hans Passant[对 Dictionary<TKey, TSource> 的神秘行为](https://stackoverflow.com/questions/10717406/mysterious-behavior-of-dictionarytkey-tsource)给出了答案，表明静态链接不起作用。

对这个问题的回答表明还没有选择另一个 GC 的可能性： [Compiling Mono from Visual Studio with sgen support](https://stackoverflow.com/questions/8214594/compiling-mono-from-visual-studio-with-sgen-support)

总结一下，现在windows上唯一的解决办法就是动态链接

# windows-phone-7 - 创建列表框不能像我中心或消息中心一样移动

> ID：10719830
> 
> 赞同：0
> 
> 时间：2012-05-23T12:22:17.223
> 
> 标签：windows-phone-7, windows-phone-7.1

当我在 Windows Phone 设备中打开 Me Hub 时，我看到了 Profile Pivot。

在那个枢轴项目上，我可以在 Lanscape 模式下向上或向下移动 listBox。而且它不能在人像模式下移动。当我在日历中编写节点时，它的工作原理类似。

我该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:27:14.330

它不是一个列表框。您可以在 scrollviewer 中“覆盖”您的控件。它应该照顾它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:43:47.140

只需在方向更改时更改列表框、内部、ScrollViewer 的可见性

# r - R语言赋值

> ID：10719836
> 
> 赞同：15
> 
> 时间：2012-05-23T12:22:45.367
> 
> 标签：r, variable-assignment

我想知道赋值如何在 R 语言中工作。

考虑以下 R shell 会话：

```
> x <- c(5, 6, 7)
> x[1] <- 10
> x
[1] 10 6 7
> 
```

我完全理解。向量 (5, 6, 7) 被创建并绑定到符号“x”。稍后，'x' 被反弹到新的向量 (10, 6, 7)，因为向量是不可变的数据结构。

但是这里会发生什么：

```
> c(4, 5, 6)[1] <- 10
Error in c(4, 5, 6)[1] <- 10 :
  target of assignment expands to non-language object
> 
```

或在这里：

```
> f <- function() c(4, 5, 6)
> f()[1] <- 10
Error in f()[1] <- 10 : invalid (NULL) left side of assignment
> 
```

在我看来，只能将值分配给命名数据结构（如“x”）。

我问的原因是因为我尝试实现 R 语言核心，但我不确定如何处理这样的任务。

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T12:33:41.597

在我看来，只能将值分配给命名数据结构（如“x”）。

这正是文档`?"<-"`所说的：

> 描述：
> 
> ```
>  Assign a value to a name. 
> ```

`x[1] <- 10`不使用与`x <- c(5, 6, 7)`. 前者调用`[<-`，后者调用`<-`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-23T13:22:28.127

As per @Owen's answer to [this question](https://stackoverflow.com/questions/10449366/levels-what-sorcery-is-this), `x[1] <- 10` is really doing two things. It is calling the `[<-` function, and it is assigning the result of that call to x.

So what you want to achieve your `c(4, 5, 6)[1] <- 10` result is:

```
> `[<-`(c(4, 5, 6),1, 10)
[1] 10  5  6 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-23T12:30:42.657

您可以对匿名函数进行修改，但不会对匿名向量进行赋值。甚至 R 也会创建带有名称的临时副本，您有时会看到反映该事实的错误消息。[您可以在第 21 页的R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.pdf)中阅读此内容，其中处理“子集赋值”和其他形式的赋值表达式的评估：

```
x[3:5] <- 13:15 
# The result of this commands is as if the following had been executed 
`*tmp*` <- x 
x <- "[<-"(`*tmp*`, 3:5, value=13:15) 
rm(`*tmp*`) 
```

并且有一个警告不要`*tmp*`用作对象名称，因为它会在下次调用时被覆盖`[<-`

# php - 使用 PHP 将 UTF-8 字符转换为 Microsoft Word (DOCX)

> ID：10719840
> 
> 赞同：2
> 
> 时间：2012-05-23T12:22:56.003
> 
> 标签：php, utf-8, ms-word, docx

我们使用 PHP 将文章转换为 Microsoft Word (DOCX)。问题是有时文章包含特殊的 UTF-8 字符。我尝试使用 htmlentities，但这并不能解决问题（它解决了带有“&”的文章）。你知道我应该怎么做才能将 UTF-8 字符转换为 DOCX 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:25:29.393

好的，我们找到了解决方案。我们开始使用[PHPDOCX](http://www.phpdocx.com)创建 DOCX 文件，现在一切正常。

# css - 带有填充和边距的粘性页脚 - 在 FF 中工作，但在 Chrome 和 IE 中存在问题

> ID：10719843
> 
> 赞同：0
> 
> 时间：2012-05-23T12:23:12.420
> 
> 标签：css

我正在尝试为我正在处理的网站实现一个粘性页脚（[请参见此处](http://www.exstockbearings.co.uk)）。我试图遵循[CSS Sticky Footer](http://www.cssstickyfooter.com/)的指南——特别是[这个](http://www.smipple.net/snippet/Owlyfool/HTML5%20Boilerplate%20Sticky%20Footer%20With%20100%25%20wide%20centered%20header/footer%20CSS)实现。

这在 Firefox (13) 中运行良好，但在 Chrome (21) 和 IE (9) 中，#footer 被推到页面下方，添加了一个垂直滚动条。我认为这与在我的#wrapper 中使用填充和边距有关 - 但是我无法具体说明这个问题。我真的很感激一些帮助。

网站结构：

```
<html>
    <div id="wrapper">
        <div id="header"></div>
        <div id="menu"></div>
        <div id="page"></div>
    </div>
    <div id="footer"></div>
</html> 
```

和相关的CSS：

```
#wrapper {
    min-height: 100%;
    width: 100%;
}
#header { 
background: url("/images/backgrounds/transparent.png") transparent;
    border-bottom: 2px solid #EF7C31;
    height: 44px;
    margin: 0 auto 20px;
    width: 960px;
}
#menu { 
background:#FFFFFF;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    height: 60px;
    margin: 0 auto 20px;
    padding: 10px 20px;
    width: 920px;
}
#page {
background: #FFFFFF;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    margin: 0 auto 30px;
    overflow-x: hidden;
    overflow-y: auto;
    padding: 20px 20px 30px;
    width: 920px
}
#footer {
background: url("/images/backgrounds/transparent.png") transparent;
    border-top: 2px solid #EF7C31;
    clear: both;
    height: 116px;
    margin-top: -158px;
    overflow: auto;
    padding: 20px;
    position: relative;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:49:02.823

将此行添加到包装器中：

```
overflow: hidden; 
```

所以你会有：

```
#wrapper {
    min-height: 100%;
    width: 100%;
    overflow: hidden;
} 
```

或者在页脚之前添加一个推送 div。这会将页脚向下推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:50:22.457

我注意到一些导致一些问题的事情。您链接到的教程在工作中被标记为恶意，所以我一直使用[Ryan Fait 的 CSS Sticky Footer Tutorial](http://ryanfait.com/sticky-footer/)。

检查你有什么，我注意到了一些不同之处。首先，您需要将 html body 和 height 设置为 100% 才能在所有浏览器中工作。其次，您的填充和边框引起了问题，因此我创建了另一个 div，该 div 将包含页脚中的特定内容，并包含填充和边框 css。

**HTML**：

```
<html>
    <div id="wrapper">
        <div id="header"></div>
        <div id="menu"></div>
        <div id="page"></div>
        <div class="push"></div>
    </div>
    <div id="footer">
        <div class="footerContent"></div>
    </div>
</html>​ 
```

**CSS**：

```
 * {
    margin: 0;
}

html, body {
    height: 100%;
}

#wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    width:100%;
    margin: 0 auto -158px; /* the bottom margin is the negative value of the footer's height */
}

#footer, .push {
    height: 158px; /* .push must be the same height as .footer */
}

.footerContent {
    border-top: 2px solid #EF7C31;
    padding:20px;
} 
```

[现场演示](http://jsfiddle.net/vE4F4/7/)

# c - C：通过引用传递结构

> ID：10719847
> 
> 赞同：3
> 
> 时间：2012-05-23T12:23:30.617
> 
> 标签：c, reference

我定义了以下结构：

```
typedef struct {
    double salary;
} Employee; 
```

我想改变`salary`. 我尝试通过引用传递它，但值保持不变。下面是代码：

```
void raiseSalary (Employee* e, double newSalary) {
    Employee myEmployee = *e;
    myEmployee.salary = newSalary;
} 
```

当我调用这个函数时，`salary`保持不变。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T12:25:30.770

您正在传递指向原始文件的指针，**但**随后您创建了它的副本：

```
Employee myEmployee =*e; 
```

创建一个副本。

```
e->salary = newSalary; 
```

会做的。或者，**如果您**出于某种原因必须有一个辅助变量：

```
Employee* myEmployee =e;
Myemployee->salary= newSalary; 
```

这样，两个变量都将指向同一个对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:25:07.267

```
void raiseSalary(Employee* e, double newSalary){
    e->salary= newSalary;
    } 
```

在您的代码中，您创建结构的本地副本，并且仅更改此本地副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:26:24.540

假设您在调用方分配了内存，它应该是：

```
e->salary= newSalary; 
```

# mobile - 在移动设备的文本输入焦点上滚动页面？

> ID：10719848
> 
> 赞同：16
> 
> 时间：2012-05-23T12:23:31.330
> 
> 标签：mobile, user-experience

我正在制作一个带有文本输入的移动优化网站，它会在您键入时过滤列表。它与此类似：http: [//jquerymobile.com/test/docs/lists/lists-search.html](http://jquerymobile.com/test/docs/lists/lists-search.html)

对于手机，如果当您选择输入时页面向下滚动以使输入位于页面顶部，这将是一个可用性优势。这样，当您键入时，下面的列表中的大部分内容都将可见。这可能吗和/或有人有这样做的经验吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-29T23:52:23.330

同意 - 这对可用性很有好处。

如果您使用的是 jQuery，这应该可以解决问题：

```
$('#id-of-text-input').on('focus', function() {
    document.body.scrollTop = $(this).offset().top;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-21T10:38:09.873

更好的解决方案是：

```
$('#id-of-text-input').on('focus', function() {
   document.body.scrollTop += this.getBoundingClientRect().top - 10
}); 
```

因为`offsetTop`（或者`.offset().top`如果使用 Jquery）返回与第一个定位的*parent*的距离，而您需要与`document`.

`getBoundingClientRect().top`返回当前*视口*位置到元素之间的距离，如果您在元素下方滚动 300px，它将返回`-300`. 因此，使用添加距离`+=`将滚动到元素。`-10`是可选的 - 在顶部留出一些空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-28T15:14:51.457

```
$('input, textarea').focus(function () {
    $('html, body').animate({ scrollTop: ($('input, textarea').offset().top - 10) }, 1);
    return false;
}); 
```

# javascript - 如何在 html5 中选择用户媒体输入？

> ID：10719849
> 
> 赞同：1
> 
> 时间：2012-05-23T12:23:31.727
> 
> 标签：javascript, html, webrtc

我现在正在编写软件来通过 html5 和 js 从用户那里直播直播，我遇到了麻烦。我在服务器上有 2 个网络摄像头和 3 个音频输入，我该如何选择我将在何时调用 getUserMedia(..) 时获得哪个媒体设备？现在我使用 chrome，但如果解决方案适用于任何浏览器，它会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:24:39.030

鉴于 WebRTC-API 的[当前草案](http://dev.w3.org/2011/webrtc/editor/getusermedia.html#idl-def-MediaStreamConstraints)（8 月 13 日），**无法指定特定的记录设备**。这个选择必须由用户自己做出：

> 鼓励用户代理默认使用用户的主要或系统默认摄像头和/或麦克风（如果可能）来生成媒体流。用户代理可以允许用户使用任何媒体源，包括预先录制的媒体文件。

[getUserMedia() 方法仅允许通过MediaStreamConstraints](http://dev.w3.org/2011/webrtc/editor/getusermedia.html#idl-def-MediaStreamConstraints)指定媒体源是视频源还是音频源：

```
interface NavigatorUserMedia {
    void getUserMedia (MediaStreamConstraints? constraints, NavigatorUserMediaSuccessCallback successCallback, optional NavigatorUserMediaErrorCallback? errorCallback);
};

dictionary MediaStreamConstraints {
    (boolean or MediaTrackConstraints) video = false;;
    (boolean or MediaTrackConstraints) audio = false;;
}; 
```

# javascript - jquery圆角在第一个和最后一个li

> ID：10719856
> 
> 赞同：0
> 
> 时间：2012-05-23T12:23:59.963
> 
> 标签：javascript, jquery, css

如何使用 jquery 创建第一个 LI 的圆角左上角和左下角以及最后一个 li 的右上角和右下角圆角？

我知道我可以使用border-radius，但这不会是一个跨浏览器的解决方案。

这是我开始的：http: [//jsfiddle.net/c7NyZ/1/](http://jsfiddle.net/c7NyZ/1/)

如果您可以向 jsfiddle 添加资源并对其进行更新，那就太好了。

**HTML：**

```
<div id="new-menu-upper">
<ul id="top-nav">
<li><a href="/t-topnavlink.aspx">menu item 1</a></li>
<li><a href="/t-topnavlink.aspx">menu item 2</a></li>
<li><a href="/t-topnavlink.aspx">menu item 3</a></li>
<li><a href="/t-topnavlink.aspx">menu item 4</a></li>
<li><a href="/t-topnavlink.aspx">menu item 5</a></li>
<li><a href="/t-topnavlink.aspx">menu item 6</a></li>
</ul>
</div> 
```

**CSS：**

```
div#new-menu-upper {
    border: 0 solid red;
    height: 40px;
    margin: 0 5px 10px;
    padding-top: 63px;
}
ul#top-nav li {
    background-image: url("http://i47.tinypic.com/21nqxjc.png");
    background-repeat: repeat;
    border-right: 2px solid lightgrey;
    float: left;
    height: 41px;
    width: 156px;
}
ul#top-nav li a {
    color: White;
    display: inline-block;
    font-family: Arial;
    font-size: 12px;
    font-weight: bold;
    letter-spacing: 1px;
    padding-left: 38px;
    padding-top: 12px;
    text-transform: uppercase;
} 
```

**编辑：它必须是一个跨浏览器解决方案，这意味着它必须与 MIN IE7**一起工作 **编辑：将 JQUERY.CORNERS 资源添加到 JSFIDDLE 并尝试使用 CORNER 进行第一个 LI 渲染，但它不起作用 - 请你帮忙 ** - [http ://jsfiddle.net/c7NyZ/4/](http://jsfiddle.net/c7NyZ/4/)

**解决方案：http: [//jsfiddle.net/c7NyZ/6/](http://jsfiddle.net/c7NyZ/6/)**（我没有应用 JS 库！）

编辑：第一个李似乎与第二个李合并，你能解决这个问题吗？- [http://jsfiddle.net/c7NyZ/7/](http://jsfiddle.net/c7NyZ/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:30:03.580

简单，只需使用`first-child`和`last-child`伪元素

```
 ul#top-nav li:first-child{
    border-radius : 10px 0px 0px 10px;
  }
  ul#top-nav li:last-child{
    border-radius : 0px 10px 10px 0px;
  } 
```

**[JSBIN](http://jsbin.com/avegeb/2)**

如果你愿意使用 css3 pie，那么

```
 ul#top-nav li{behavior: url(PIE.htc);}  
 ul#top-nav li:first-child{
        border-radius : 10px 0px 0px 10px;
 }
 ul#top-nav li:last-child{
      border-radius : 0px 10px 10px 0px;
 } 
```

* * *

否则，如果要在 IE 6、7、8 中合并曲线，则必须使用放置良好的图像或矢量图形库。

结帐[css3pie](http://www.css3pie.com) - 它的整洁！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:40:01.060

IE9+、Firefox 4+、Chrome、Safari 5+ 和 Opera 支持border-radius 属性。这里是css代码：

```
 .first_li{
   border-top-left-radius: 10px;
   border-bottom-left-radius: 10px;
   -moz-border-radius : 10px 0px 0px 10px; /*firefox 3.6 and earlier*/
  }
  .last_li{
   border-top-right-radius: 10px;
   border-bottom-right-radius: 10px;
   -moz-border-radius : 0px 10px 10px 0px;/*firefox 3.6 and earlier*/
   } 
```

这是相应的jquery代码：

```
$(function(){ // use any other event handler like click, hover or others
     $('ul#top_nav li:first').addClass('.first_li');
     $('ul#top_nav li:last').addClass('.last_li');
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:32:08.597

这是我的版本：

```
ul#top-nav li:first-child {
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
}
ul#top-nav li:last-child {
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
} 
```

[jsFiddle](http://jsfiddle.net/teneff/c7NyZ/2/)

**编辑：**适用于最新的 Firefox、Opera 和 Chrome。我正在使用 linux 并且无法告诉 IE

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T12:50:23.257

将此用于所有浏览器：

```
ul li:first-child {
border-top-left-radius: 10px;
border-bottom-left-radius: 10px;
}
ul li:last-child {
border-top-right-radius: 10px;
border-bottom-right-radius: 10px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T12:52:23.287

在（不是那么）美好的过去，人们以艰难的方式做到了。这是艰难的方式：

*   用 4 个 div 包围你的盒子
*   为每个 div 添加正确的类（左上、右上、左下和右下）
*   在每个班级添加一个圆角的图像
*   ？？？
*   利润！

在您的 jsfiddle 上，代码如下所示：http: [//jsfiddle.net/Ralt/c7NyZ/5/](http://jsfiddle.net/Ralt/c7NyZ/5/)

此处显示了一个真实示例：[http ://www.sitepoint.com/examples/jscorners/four-nested-divs.html](http://www.sitepoint.com/examples/jscorners/four-nested-divs.html)

您将在这里看到一个真正的教程：[http](http://webcsstips.wordpress.com/2009/07/17/boxes-with-rounded-corners/) ://webcsstips.wordpress.com/2009/07/17/boxes-with-rounded-corners/上面有一些不错的链接，例如圆角图像生成器。

也就是说，我现在只会选择 CSS3PIE。

# c# - linq to object 获取正确的模式

> ID：10719863
> 
> 赞同：0
> 
> 时间：2012-05-23T12:24:15.107
> 
> 标签：c#, string, linq, linq-to-objects

我的记录如下

```
mazhar-kaunain-baig-5
mazhar-kaunain-baig-5-6
mazhar-kaunain-baig 
```

这是我的查询

```
ptype = _pagecontext.PagesRefs
                    .Where(m => m.nvcr_Slug.Contains(str+ "-") && m.bit_Active == true)
                    .ToList(); 
```

***正确结果：***

```
 1) str=mazhar-kaunain-baig 
```

带回

```
mazhar-kaunain-baig-5
mazhar-kaunain-baig-5-6   

 2) str=mazhar-kaunain 
```

什么都不带回来

```
 3) str=mazhar 
```

什么都不带回来

在这种情况下 contains 和 equals 变得无效。在我有模式的完全匹配的情况下，我怎样才能达到以下结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:26:49.220

拿出来`+"-"`？

`sRefs.Where(m => m.nvcr_Slug.Contains(str) && m.bit_Active == true).ToList();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:31:40.243

你为什么不`StartsWith`改用呢？

*确定此字符串实例的开头是否与指定的字符串匹配。*

```
.Where(m => m.nvcr_Slug.StartsWith(str) && m.bit_Active == true).ToList(); 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/baketfxw.aspx](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T12:43:40.073

这将返回您在情况 1、2 和 3 中提到的确切结果。

```
var result = from d in data
             let remainingString = d.Slug.Remove(0, Math.Min(text.Length + 1, d.Slug.Length))
             where remainingString.Length > 0 && Char.IsDigit(remainingString[0])
             select d; 
```

# jquery-mobile - mobile.changepage 需要页面刷新

> ID：10719864
> 
> 赞同：0
> 
> 时间：2012-05-23T12:24:20.463
> 
> 标签：jquery-mobile

我正在使用 $.mobile.ChangePage() 从一个 HTML 页面导航到另一个页面。但是页面的内容并没有改变。这样做时，页面 URL 会更改，但未加载新页面。它需要刷新才能加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:53:53.393

您应该使用 JavaScript 函数来更改页面..使用

```
window.location = 'your page '; 
```

希望它能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:19:34.530

在您在上面的评论中提供的代码中，您可能会收到一个错误，指出`next_page`未定义。鉴于您正在处理 jQuery Mobile，请尝试`click`稍微不同地分配处理程序：

将链接的定义更改为如下内容：

```
<a id="btnNextPage" href="#" >Details</a> 
```

您不必给它一个`id`- 您可以使用选择器来识别以下 javascript 中的链接：

```
 // the event handler
 function next_page() { 
     $.mobile.changePage("http://www.google.com", {transition:"slide"}); 
 }

// assign the click event when the DOM is ready
$(function() {
      $("#btnNextPage").click ( next_page );
}); 
```

# iphone - iphone视频上传队列

> ID：10719868
> 
> 赞同：0
> 
> 时间：2012-05-23T12:24:30.817
> 
> 标签：iphone, ios, video, upload

我需要录制视频并将它们上传到服务器。它们将被添加到队列中并一一上传。

我的问题是，当我录制视频时，我应该在哪里保存直到它被上传？
我应该将它保存在相册中吗？或在私人文件目录中？

上传后我还需要删除视频。

根据ios指南，是否只需要将视频保存在相册中？如果我的应用程序在 Documents 目录中保存更长时间，它会被拒绝吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:13:12.543

如果它们不是用户创建的（或者如果您不希望它们参与 iCloud 之类的东西），那么不要将它们放在 APPHOME/Documents 中。

首选位置是 APPHOME/Library/Caches 但该位置可以在系统还原时由 iOS 清理（可能还有其他时间 - 文档未指定）。但是，它不会定期发生，因此如果您可以在极少数情况下（例如还原）重新生成数据，这是第一个选择。

因此，如果可以重新创建文件，请将它们保存在 APPHOME/Library/Caches 中。如果不能，则将它们放在 APPHOME/Library 中的其他位置。

只需确保在完成上传后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:44:42.123

没关系，您可以在目录中/从`Documents`目录中保存/删除它们。相反，您不能从用户的相册中删除视频/照片。“更长的时间”没有问题。

# javascript - 在 PhpStorm 中使用 Symfony2 进行 Javascript 调试

> ID：10719872
> 
> 赞同：0
> 
> 时间：2012-05-23T12:24:47.433
> 
> 标签：javascript, symfony, phpstorm

我正在使用 PHPStorm IDE 开发 Symfony2 应用程序。

我似乎无法让它工作。我已经尝试使用多个参数对本地和远程进行 Javascript 调试。消息从“没有为断点指定远程 URL...”等不同。

最好的情况是我可以在 PHPStorm 中调试我的 Javascript 代码。这可能吗？

我还在为我的资产使用 AsseticBundle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:16:36.530

我也使用 PHPStorm，但我只将它用于编码，调试是在浏览器中..

所以我想说这取决于 PHPStorm 是否执行 app_dev.php 并获取输出。如果您已经有 PHPStorm（调试）的经验，您可以回答这个问题。我自己不这么认为...

希望我能帮助至少一点:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:38:06.367

如果您使用 Chrome 或 Firefox 浏览器，[则绝对可以从 PhpStorm 进行 JavaScript 调试。](http://www.jetbrains.com/phpstorm/webhelp/configuring-javascript-debugger.html)目前不支持同时调试 JavaScript 和 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T17:52:23.547

我能够设置这个

1.  安装[JetBrains Chrome 扩展程序](https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji)

2.  在 PHPStorm 中，单击右上角附近绿色错误左侧的运行/调试配置

3.  添加 Javascript 调试（使用加号）

4.  在 URL 框中，只需输入您正在调试的页面的 URL（例如[http://my.test/app_dev.php/route/here/not-there/3290](http://my.test/app_dev.php/route/here/not-there/3290)），命名配置，然后应用

5.  在js中添加断点

6.  确保在浏览器中关闭了开发工具，然后单击绿色错误（确保选择了 4 中命名的配置），它将重定向到 4 中指定的页面。

断点现在将被激活并且能够被单步执行（如 xdebug）。当它在断点处停止时，它可能位于原始文件的一个版本中，文件名附加了版本号（该文件是只读的）。名称左侧有一个按钮，您可以在更新实际（可写）文件后重新加载正在停止的只读文件。

# jquery - 梳理 Div

> ID：10719881
> 
> 赞同：0
> 
> 时间：2012-05-23T12:25:12.737
> 
> 标签：jquery

我试图让下面的函数循环遍历一个 div 列表 - 到目前为止，我只将它设置为应用于一个 div (#two) 和最近的 div。我知道它需要增加 (i+++)，其中第一个 div (#one) 将具有 i=0。

是的，我是那个建立自己的裸骨滑块的新人。

```
function movedown() {
   $("#two").next().animate({height:'80%'}, 500);
   $("#two").animate({height: '20px'},500);
;}

function moveup() {     
   $("#two").prev().animate({height:'80%'}, 500);
   $("#two").animate({height: '20px'},500);
;}

$(function () {
   $('#up').click(moveup); 
   $('#down').click(movedown);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:30:11.093

当你现在正在做仪式时，给你的 div id 像一二三。然后尝试这可能会有所帮助

```
function movedown() {
    for(var i=0; i<(no of divs);i++){
        $("#"+i).next().animate({height:'80%'}, 500);
        $("#"+i).animate({height: '20px'},500);
    }
 ;} 
```

# opengl - How to get the projection plane in OpenGL

> ID：10719882
> 
> 赞同：1
> 
> 时间：2012-05-23T12:25:13.310
> 
> 标签：opengl, projection, projection-matrix, glulookat

I use the gluPerspective and glLookAt to set my projection matrix and view matrix. If I want to get the coordinate of the eye, it's the first three arguments in the gluLookAt, right?

However, now I need to get the projection plane, that is, the position of the screen in the world coordinate system. You know, if I can calculate the left-bottom corner point and the right-top corner point, the plane is right there!

Could anyone give me a hint about how to do this calculation?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:31:53.233

You could use gluUnProject with screen space coordinates (mapping viewport width and height to 0…1) A=(0,0,0), B=(1,0,0) and C=(1,0,0) giving the coplanar points of the projection plane. Adding a fourth point (1,1,0) you get the rectangular limits.

# database - 在 R 中组合多个观察值

> ID：10719890
> 
> 赞同：1
> 
> 时间：2012-05-23T12:25:43.440
> 
> 标签：database, r, twitter

我有一个推文的平面文件，想按用户聚合它们的属性。

例如

```
user1, hashtag1, hashtag2 
user1, hashtag3, hashtag4 
user2, hashtag5, hashtag6 
user2, hashtag7, hashtag8 
```

我想转换成：

```
user1, hashtag1, hashtag2, hashtag3, hashtag4
user2, hashtag5, hashtag6, hashtag7, hashtag8 
```

有没有优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:36:43.903

除非每个用户的主题标签数量始终相同，否则我会将结果汇总到一个列表中。列表的每个元素都是一个用户标签的（可能是可变长度的）向量。

```
# Read in your example data
df <- read.table(text="user1, hashtag1, hashtag2 
user1, hashtag3, hashtag4 
user2, hashtag5, hashtag6 
user2, hashtag7, hashtag8", sep=",", header=FALSE, stringsAsFactors=FALSE)

lapply(split(df[-1], df[1]), function(X) unname(unlist(X)))
# $user1
# [1] " hashtag1"  " hashtag3"  " hashtag2 " " hashtag4 "
# 
# $user2
# [1] " hashtag5"  " hashtag7"  " hashtag6 " " hashtag8" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:15:37.443

你正在寻找重塑。`reshape`命令（它的语法很痛苦，但基本上你想从“长”到“宽”，用“用户”作为你的 id 变量）或者后面跟着的包会`reshape2`做你想做的事。`melt``dcast`

或者，由于主题标签的数量似乎可能会有所不同，您可以使用`plyr`：

```
> colnames(x) <- c("user","tag1","tag2")
> 
> library(plyr)
> extract.hashtags <- function(x) {
+   x <- subset(x,select=c(-user))
+   mat <- as.matrix(x)
+   dim(mat) <- c(1,length(mat))
+   as.data.frame(mat)
+ }
> ddply(x, .(user), extract.hashtags )
   user       V1       V2       V3       V4
1 user1 hashtag1 hashtag3 hashtag2 hashtag4
2 user2 hashtag5 hashtag7 hashtag6 hashtag8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:22:01.157

一种方法是使用该`aggregate()`功能。来自`?aggregate`：

> 将数据拆分为子集，计算每个子集的汇总统计信息，并以方便的形式返回结果

首先，读入您的数据（您应该在将来的问题中这样做以提供可重现的示例，请参阅：[How to make a great R reproducible example?](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)）：

```
txt <- "user1, hashtag1, hashtag2 
user1, hashtag3, hashtag4 
user2, hashtag5, hashtag6 
user2, hashtag7, hashtag8"

x <- read.delim(file = textConnection(txt), header = F, sep = ",", 
        strip.white = T, stringsAsFactors = F) 
```

然后，使用`aggregate()`将数据拆分为子集，并将每个子集转换为一维数组：

```
aggregate(x[-1], by = x[1], function(z)
        {
            dim(z) <- c(length(z)) # Change dimensions of z to 1-dimensional array
            z
        })
#      V1     V2.1     V2.2     V3.1     V3.2
# 1 user1 hashtag1 hashtag3 hashtag2 hashtag4
# 2 user2 hashtag5 hashtag7 hashtag6 hashtag8 
```

**编辑**

这种方法只有在所有用户都拥有相同数量的标签时才有效，这似乎不太可能。@Josh O'Brien 的回答是更好的方法。

# jquery - 改组 DOM

> ID：10719897
> 
> 赞同：2
> 
> 时间：2012-05-23T12:26:11.753
> 
> 标签：jquery, shuffle

我正在使用下面的随机播放脚本来随机化我网站上某些 div 的顺序。

[http://james.padolsey.com/javascript/shuffling-the-dom/](http://james.padolsey.com/javascript/shuffling-the-dom/)

该脚本有效，但只会随机化**`.content div`**，而不是**`.step`**，因此图像会混淆。

有没有办法选择*所有*内容`.step`？

```
<div class="step">
<div class="content">
  <h2>title</h2>
  <p>text</p>
  <a href="#">link</a>
</div>
<img src="./images/1.png" />
</div>

$( '.step div' ).shuffle(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:27:56.990

```
$( '.step' ).shuffle(); 
```

只需删除内部 div 选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:30:36.010

我阅读了您发布的链接，您是否使用了插件 $.fn.shuffle 或第二个“未经作者测试”，如果您使用第一个，因为我认为您应该在链接的首页仔细阅读它说

**

> 我最近在寻找一种体面的方式来改组一组元素。我找到了一个声称可以做到这一点的 jQuery 插件，但不幸的是，它只有在所有元素都是单个父项的直接后代时才有效，就像无序列表下的所有列表项一样。

**

在包含我的代码 HTML 的插件后，我在我的 netbeans 上尝试了它

```
<div class="content">
  <p>text1</p>
</div>
 <div class="content">
  <p>text2</p>
</div>
<div class="content">
  <p>text3</p>
</div>

<div class="content">
  <p>text4</p>
</div>
 <div class="content">
  <p>text5</p>
</div>
<div class="content">
  <p>text6</p>
  <img src="./images/1.png" />
</div> 
```

但同样，它仅在所有元素都是单个父项的直接后代时才有效，例如无序列表下的所有列表项

它工作正常，但要精确

我使用了下面的脚本，并将**图像放在 div 元素中**

```
 $("document").ready(function() {
       $("div").shuffle();
 }); 
```

输出

文本5

文本3

文本4

文本2

文本1

文本6

他们随机洗牌

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:09:01.730

`$('div.step').shuffle();`应该有帮助。

你能展示你的完整HTML吗？

# vb.net - 在 vb.net 中创建文件层次结构

> ID：10719901
> 
> 赞同：1
> 
> 时间：2012-05-23T12:26:40.303
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010, c#-to-vb.net, csproj

我正在尝试在 vb.net 中创建类的层次结构。通过在 .csproj 中使用以下标签，我能够在 csharp 中实现它

```
<Compile Include="ClassA.cs">
      <DependentUpon>ClassB.cs</DependentUpon>
</Compile> 
```

解决方案资源管理器中的以下代码段如下

![Csharp 中的类层次结构](../Images/151a9ac2aec86b55bc1ff95b41a277f7.png)

我需要在 vb.net 中实现相同的目标。

我是 vb.net 的新手。谁能告诉我`<DependUpon>`.csproj 中使用的属性的替代方案，等效于 .vbproj。由于某种原因，该属性似乎在 .vbproj 中被忽略，即使它显示在 visualstudio2010 智能中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:42:29.340

[Ego](http://social.msdn.microsoft.com/profile/ego%20jiang/?ws=usercard-mini)已回答[您在 MSDN](http://social.msdn.microsoft.com/Forums/pl/msbuild/thread/5a79d68e-f85d-4bbe-a818-1e107efaafc4)上的问题。

它实际上与 c# 相同（原因是这是 MSBUILD，Visual Studio 正在对其进行解释，以便为您提供良好的演示体验。

```
<Compile Include="ClassB.vb" />

    <Compile Include="ClassA.vb">

      <DependentUpon>ClassB.vb</DependentUpon>

</Compile> 
```

![在此处输入图像描述](../Images/238cdf61f14d6ce930b0b89badfd1cbb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T09:39:18.060

供参考，我的帖子已在以下链接中得到答复

[答案] (http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/5a79d68e-f85d-4bbe-a818-1e107efaafc4)

# multithreading - 从 WorkerThread 到 MFC 中的主窗口的 PostMessage

> ID：10719902
> 
> 赞同：7
> 
> 时间：2012-05-23T12:26:41.503
> 
> 标签：multithreading, user-interface, mfc, postmessage, worker-thread

我有一个 MFC 应用程序，它有一个工作线程，我想做的是从工作线程向主 GUI 线程发布消息，以更新 GUI 上的一些状态消息。到目前为止我所做的是`Registered a new window message`

```
//custom messages
static UINT FTP_APP_STATUS_UPDATE = ::RegisterWindowMessageA("FTP_APP_STATUS_UPDATE"); 
```

将此消息添加到对话框类的消息映射中

```
ON_MESSAGE(FTP_APP_STATUS_UPDATE, &CMFC_TestApplicationDlg::OnStatusUpdate) 
```

的原型`OnStatusUpdate`是

```
afx_msg LRESULT OnStatusUpdate(WPARAM, LPARAM); 
```

定义是

```
LRESULT CMFC_TestApplicationDlg::OnStatusUpdate(WPARAM wParam, LPARAM lParam)
{

     //This function is not called at all.
     return 0;
} 
```

并且工作线程调用代码是

```
void CMFC_TestApplicationDlg::OnBnClickedMfcbutton1()
{
    ThreadParams params;
    params.m_hWnd = m_hWnd;
    params.FTPHost = "test_host";
    params.FTPUsername = "test";
    params.FTPPassword = "test";

    AfxBeginThread(FTPConnectThread,&params);
} 
```

和工作线程代码是

```
//child thread function
UINT FTPConnectThread( LPVOID pParam )
{
    if(pParam == NULL)
    {
        return 0;
    }
    ThreadParams *params = (ThreadParams*)pParam;
    OutputDebugString(params->FTPHost);
    Sleep(4000); //simulating a network call
    CString * message = new CString("Conencted");
    PostMessage(params->m_hWnd,FTP_APP_STATUS_UPDATE,0,(LPARAM)message);
    //PostMessage do nothing? what I am doing wrong?
    return 1;
} 
```

问题是当 PostMessage 函数被调用时`OnStatusUpdate`应该被调用，但它没有被调用，没有异常或断言被抛出，我做错了什么？我试过了`ON_REGISTERED_MESSAGE`，`ON_MESSAGE`但没有成功，有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T12:34:37.940

`CMFC_TestApplicationDlg::OnBnClickedMfcbutton1()`可能在线程开始之前返回。这会导致您`ThreadParams`超出范围，因此当您从线程访问它时，您正在访问已释放的内存。您需要以其他方式分配它，例如：

```
void CMFC_TestApplicationDlg::OnBnClickedMfcbutton1()
{
    ThreadParams* params = new ThreadParams();
    params->m_hWnd = m_hWnd;
    params->FTPHost = "test_host";
    params->FTPUsername = "test";
    params->FTPPassword = "test";

    AfxBeginThread(FTPConnectThread,params);
}

//child thread function
UINT FTPConnectThread( LPVOID pParam )
{
    if(pParam == NULL)
    {
        return 0;
    }

    ThreadParams *params = (ThreadParams*)pParam;
    OutputDebugString(params->FTPHost);
    Sleep(4000); //simulating a network call
    CString * message = new CString("Conencted");
    PostMessage(params->m_hWnd,FTP_APP_STATUS_UPDATE,0,(LPARAM)message);

    delete params;
    return 1;
} 
```

# objective-c - UIImage 类别方法未调用 iOS SDK

> ID：10719904
> 
> 赞同：0
> 
> 时间：2012-05-23T12:26:43.937
> 
> 标签：objective-c, xcode, categories

我已经实现了 UIImage 类别...我正在尝试从我的视图控制器中调用一个方法..奇怪的是我得到了下面显示的警告

![警告屏幕](../Images/dd21048012a0768d8f566739663a2d15.png)

谁能回答我为什么收到此警告以及如何避免这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:29:44.610

看起来编译器不知道它是否需要释放选择器返回的值。所以我猜你已经启用了 ARC，或者编译器可能正在检查这个作为静态分析的一部分。

选择器可能返回 +1 保留对象或自动释放对象。在编译时无法知道这一点，因此编译器会给你这个警告。

通常你不应该像这样从选择器中获取对象。更好的解决方案是使用内存语义更清晰的强类型委托接口。

# git - 带有 gitolite 密码的 ubuntu 服务器

> ID：10719905
> 
> 赞同：1
> 
> 时间：2012-05-23T12:26:44.743
> 
> 标签：git, ubuntu, passwords, gitolite

我正在尝试在 Ubuntu 服务器上设置 gitolite！它似乎工作，因为我可以克隆 gitolite-admin

但是当我尝试在客户端发出命令时

```
git clone gitolite@ubuntu-server:testing 
```

它要求输入 gitolite 的密码，但我在客户端配置的 ssh 密码不被接受

我在某处做错了吗？

我确实将 .pub 复制到服务器并运行 gl-setup 没有问题

注意：我对 git 非常熟悉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:48:46.723

检查服务器 gitolite 帐户上的内容：

```
 ~/.ssh/authorized_keys 
```

您应该在 gitolite start / gitolite-end 中看到您的公钥：

```
#more authorized_keys
# gitolite start
command="/home/gitolite/bin/gitolite-shell gitoliteadm",no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa ABCAB3NzaC1yc2EAAAADAQABAAABAQCxy5Y1epgjph3h439etAognIP4rlpDlD0OBh2rh+9DHMwlMad04zb3Tah5HQ
10Zg7mFWvltZlIBdhk5cBr3/mN1dNiRFspKwD2Z0yQaaI23zjHnXRAgLV76SOImICUt9CfCtGOy6jQH+2x4j921DL2cT8Ib+RslhBUEUdc3qNvOQSNhIz2qTVHJ676ohGFiqitgswIVIk6WRS+fERx6JFy9o7rLnnOCrozHYU271TwFgYqfNS7TuV4ZFwTP04hDGN+YALjvcQ0KGQGY/7qok+h5nHoRh9RDTeSJ2gDK2M4QPrTCzkCa0ebCexP2lR9G0iXYcClzXitttKDH7cls0j Gitolite Admin access (not interactive)
# gitolite end 
```

确保使用最新的 gitolite (V3)，如果您有以下情况：

```
/path/to/gitolite/bin/gitolite-shell 
```

（您可以`gitolite-shell xxx`在服务器上执行：检查您使用的版本）

还要确保*不要*（至少一开始）使用密码保护您的私有 ssh 密钥。

如果它一直要求您输入密码，请使用以下内容编辑您的问题：

```
ssh -vvv gitolite@ubuntu-server 
```

* * *

OP补充说：

> 如果我运行`git clone morten@ubuntu-server:testing`并输入密码，一切正常......但现在我似乎无法将任何内容推送到存储库

这意味着现在 ssh 部分运行正常，但是不要忘记您的第一次推送必须是：

```
git push origin master 
```

（参见“ [git push origin master:refs/heads/master 这是做什么的](https://stackoverflow.com/a/7506906/6309)”）

那是因为默认的推送策略（[可能很快会改变](https://stackoverflow.com/a/9749477/6309)）是推送*匹配*的分支（如果你还没有推送任何东西，那么`master`远程仓库上就不会有分支）

另一个技巧是在推动之前确保你在一个分支上

```
git checkout master
git push 
```

（并且在您处于[分离头部模式](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)时不要尝试推动）

# android - Android WebView propt URL 只有一次

> ID：10719908
> 
> 赞同：0
> 
> 时间：2012-05-23T12:26:54.737
> 
> 标签：android, eclipse, android-webview

我有一个使用 webview 的应用程序。我希望应用程序在首次启动时允许您输入要使用的 URL 并将其绑定到应用程序，除非通过操作系统端的应用程序设置清除默认值，否则不再提示。

如何才能做到这一点？我在应用程序构建方面非常陌生，所以请按照说明为我做些虚拟！

```
package com.namespace;

import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.Window;
import android.webkit.CookieManager;
import android.webkit.CookieSyncManager;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MYAPPNAME extends Activity
{
final Activity activity = this;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);
    WebView webView = (WebView) findViewById(R.id.webview);
    webView.getSettings().setJavaScriptEnabled(true);
    CookieManager.getInstance().setAcceptCookie(true); 
    webView.setWebChromeClient(new WebChromeClient()

    {

        public void onProgressChanged(WebView view, int progress)
        {
            activity.setTitle("Loading...");
            activity.setProgress(progress * 100);

            if(progress == 100)
                activity.setTitle(R.string.app_name);

        }
    });

    webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onReceivedError(WebView view, int errorCode, String description,        String failingUrl)
        {
            // Handle the error
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);
            return true;
        }
    });
    WebSettings settings = webView.getSettings();

    settings.setDomStorageEnabled(true);
    webView.loadUrl("http://my.app.URL");

}
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:30:31.887

我建议使用共享首选项。有关示例，请参[见此链接](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

# perl - 我的和我们的有什么区别？（在同一文件中声明）

> ID：10719918
> 
> 赞同：13
> 
> 时间：2012-05-23T12:27:54.947
> 
> 标签：perl

在写这个程序之前，我以为这`our`是一个包范围变量，`my`是一个文件范围变量。但是，在写完那个程序之后，我很困惑。

我的程序是，

```
#!/usr/bin/perl

use strict;
use warnings;

package one; 
our $val = "sat";
my $new = "hello";
print "ONE:val =>$val \n";
print "ONE:new =>$new \n\n";

package two;
print "TWO:val =>$val \n";
print "TWO:new =>$new \n"; 
```

哪个输出

```
ONE:val =>sat 
ONE:new =>hello 

TWO:val =>sat 
TWO:new =>hello 
```

那么，`my`和之间`our`有什么区别。两者是相同的还是有区别的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T12:38:19.253

如你所见，两者都`my`具有`our`词法作用。

`my`创建一个词法范围的变量。

`our`创建包变量的词法范围***别名。***

仅仅因为你说不`package`改变词法范围，所以即使在看到语句之后你`$val`仍然是别名。`$one::val``package two`

如果你没有看到一个紧密的卷曲，你还没有完成你的范围。（或 EOF 或字符串中的字符串结尾`eval`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T12:31:57.480

**我**将变量访问限制在声明它们的最里面的块中。如果没有块，它们是文件范围的。

**相反，我们**将一个简单的名称与当前包中的包变量相关联，因此它在包级别声明并链接到包名。**我们**试图通过让您在不添加包名称的情况下使用包变量来提供帮助。

```
package pack;
our $variable;    # These are the same
$pack::variable;  # These are the same 
```

**our**变量类似于 C 的静态变量，但不同的是，如果使用变量的完全限定名称调用函数中使用 our 声明的变量，仍然**可以**在函数外部访问它。

但是最重​​要的是**my**是词法范围，而**our**是词法范围，但它们的生命即使在声明块之外也是持久的（它们的生命就像全局变量生命），因此要真正理解**my**和**our**之间的区别，您必须了解词法之间的区别和 Perl 中的全局范围。

简而言之，这两种类型之间的区别是：

## 全局变量

任何地方的任何代码都可以更改它们的值。

## 词法变量

变量的生命周期以包含它们的代码块的结尾而结束，之后它们的值被垃圾收集。这类变量只能在声明它们的块内访问。

* * *

**回答你具体的示例问题：** *尝试将第二个包声明（包二）移动到另一个文件中，你会看到**我的**和**我们的**......*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T13:10:44.917

区分*可见性*和*寿命*很重要。

使用or声明的变量的*可见性*是相同的。您可以在声明之后的第一个大括号或文件结尾之前的任何位置使用该名称。`our``my`

请注意，这不适用于*完全限定的*变量名，它不需要声明并且可以在任何地方访问。在不声明任何内容的情况下，我可以分配给包变量

```
$pack::three = 3; 
```

并在任何包中的其他任何地方使用它。我什至不必申报`pack`包裹。但如果我写

```
package pack;
our $three; 
```

我已经生成了一个缩短的*别名*，`$pack::three`我可以在同一个词法范围内使用它，因为我可以`my`在同一个地方使用一个变量：在一个封闭的大括号或文件结尾之前。

这些包变量在程序执行开始时始终可用。就像哈希元素一样，您总是可以分配给一个新元素，并且它会一直存在——它们的*生命周期*是无穷无尽的。事实上，包变量*是*所有意图和目的的哈希元素。

`my`另一方面，用 声明的词法变量在声明时创建，一旦超出范围就销毁，并且在任何地方都没有对它们的引用。因此，除非您引用此类变量，否则它的*生命周期*与它的*可见性*相同。循环内的`my`声明会导致为每次执行循环创建和销毁一个新变量。

`$val`在您的代码中，您为包变量`$one::val`和词法变量创建了一个别名`$new`。两者都不在代码块内，因此两者在文件末尾都是可见的。`package two`此处根本没有任何效果，但如果您在第二个包语句之后编写，`our $val` *您*将更改别名`$val`来指示`$two::val`。

我希望这会有所帮助。

# javascript - RegEx 非捕获组问题

> ID：10719924
> 
> 赞同：4
> 
> 时间：2012-05-23T12:28:11.047
> 
> 标签：javascript, regex

为什么要使用 return`["vddv"]`而不是 ["dd"]：

```
"aaavddv".match(/(?:v).*(?:v)/) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:33:18.367

```
(?:v) # matches 'v' this is a non-capturing group, not a lookbehind
.*    # matches 'dd'
(?:v) # matches 'v' this is a non-capturing group, not a lookahead 
```

非捕获组仍然参加比赛。也许您想要前瞻/后视？但是Javascript不支持lookbehind。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T12:33:08.010

```
"aaavddv".match(/(?:v)(.*)(?:v)/)[1] 
```

整个匹配是正确的，`vddv`但是如果您只想匹配，则`dd`需要使用捕获组（并查看 element `[1]`）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T12:34:05.823

`/(?:v).*(?:v)/`指定表达式 v（字符数）v

# mysql - 我们可以在 Linux CentOS5.8 上安装不同版本的 MySQL 吗？

> ID：10719925
> 
> 赞同：1
> 
> 时间：2012-05-23T12:28:12.270
> 
> 标签：mysql, linux, installation, centos

我正在尝试安装一个需要在服务器上安装 MySQL-server、MySQL-client 的软件，所以现在我想使用 rpm 文件“MySQL-server-5.5.17-1.rhel5.x86_64”安装 MySQL-server 和 MySQL-client .rpm”和“MySQL-client-5.5.17-1.rhel5.x86_64.rpm”。

我已经安装了 MySQL-client 但是当我尝试运行 mysql-server

```
 *rpm -i MySQL-server-5.5.17-1.rhel5.x86_64.rpm* 
```

它显示错误：

```
 *error: Failed dependencies:
     MySQL conflict with mysql-5.0.77-4.el5_6.6.x86_64
     MySQL conflict with mysql-5.0.77-4.el5_6.6.i386
     MySQL conflict with mysql-server-5.0.77-4.el5_6.6.x86_64* 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:31:54.160

您给出的错误 *错误：失败的依赖项：MySQL 与 mysql-5.0.77-4.el5_6.6.x86_64 冲突 MySQL 与 mysql-5.0.77-4.el5_6.6.i386 冲突 MySQL 与 mysql-server- 冲突5.0.77-4.el5_6.6.x86_64*

清楚地表明你要安装mysql 5.5 rpm的机器已经安装了mysql 5.0.77。

解决这个问题。1.你备份datadir和my.cnf（如果你之前使用的是mysql 5.0 db server）。2.删除所有mysql 5.0服务器包，删除这些包你应该知道机器上已经安装了哪些包来查看所有已经安装的mysql包使用rpm -qa | grep -i "mysql*" 这个命令显示机器上已经安装了什么包，现在你必须删除上面命令中显示的所有包。

要删除包/rpm，请使用 rpm -e mysql-5.0。**** 如果显示错误，则使用 rpm -e --nodeps mysql-5.0。****

我们必须使用 rpm -e 一个一个地删除所有包。

1.  成功删除所有旧版本的 mysql 后，现在使用 rpm -ivh mysql-5.5***.rpm 开始安装 mysql-5.5*** 软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:44:35.577

第一个问题 - MySQL 的版本是否已经安装在实际使用中，还是只是因为全新的 CentOS 安装而存在？如果是前者，请尝试升级而不是安装。如果是后者，请卸载旧版本（可能使用`--no-deps`on 选项`rpm`），然后安装较新版本

接下来，您是要替换 MySQL 还是安装其他版本？

如果是前者，请再次尝试升级而不是安装。如果这不可能，您将不得不删除旧版本，然后安装新版本

*如果是*后者，并且如果可能，请查看 RPM. 中的`--prefix`和`--relocate`选项，因为它们可能会有所帮助。

如果您设法将它与旧版本并排安装，您将获得乐趣和游戏，确保相关版本指向正确的库并且您不会在它们之间出现任何损坏。此外，您**将**需要运行它们，以便它们在具有单独数据库文件夹、PID 和套接字文件等的单独端口上侦听。

无论您需要做什么，都可以在工作时间之外进行尽可能多的备份

# c++ - 编译示例 ocde 时未定义对 xercesc_2_8 的引用

> ID：10719927
> 
> 赞同：2
> 
> 时间：2012-05-23T12:28:14.703
> 
> 标签：c++, ubuntu, xerces, xerces-c

我正在尝试编译 XERCES 站点上提供的以下示例代码：

```
#include <xercesc/util/PlatformUtils.hpp>
// Other include files, declarations, and non-Xerces-C++ initializations.
XERCES_CPP_NAMESPACE_USE

int main(int argc, char* argv[])
{
  try {
      XMLPlatformUtils::Initialize();

  }
  catch (const XMLException& toCatch) {
    // Do your failure processing here
    return 1;
  }

  // Do your actual work with Xerces-C++ here.

  XMLPlatformUtils::Terminate();

  // Other terminations and cleanup.
  return 0;
} 
```

和，

```
g++ -g -Wall -pedantic -L/usr/lib -lxerces-c -o xercesTest xercesTest.cpp 
```

给我以下链接错误：

```
/tmp/ccYIHCfR.o: In function `main':
/home/cjmv/temp/xercesTest.cpp:8: undefined reference to `xercesc_2_8::XMLUni::fgXercescDefaultLocale'
/home/cjmv/temp/xercesTest.cpp:8: undefined reference to `xercesc_2_8::XMLPlatformUtils::Initialize(char const*, char const*, xercesc_2_8::PanicHandler*, xercesc_2_8::MemoryManager*, bool)'
/home/cjmv/temp/xercesTest.cpp:18: undefined reference to `xercesc_2_8::XMLPlatformUtils::Terminate()'
/tmp/ccYIHCfR.o:(.gcc_except_table+0x10): undefined reference to `typeinfo for xercesc_2_8::XMLException'
collect2: ld returned 1 exit status 
```

我已经通过 aptitude 在我的 ubuntu-server 12.04 上安装了 xerces-c28 和 xerces-c2-dev

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T12:33:35.920

将库放在命令行的最后：

```
g++ -g -Wall -pedantic -L/usr/lib -o xercesTest xercesTest.cpp -lxerces-c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T06:21:07.247

包括 xerces 的 lib 路径：试试这个

```
g++ -I/<xerces-c 2.8.0 path>/include -c xercesTest.cpp
g++ -L/<xerces-c 2.8.0 path>/lib -lxerces-c xercesTest.o 
```

# c# - 如何将 LINQ Distinct() 与多个字段一起使用

> ID：10719928
> 
> 赞同：85
> 
> 时间：2012-05-23T12:28:38.950
> 
> 标签：c#, linq, distinct

我有以下从数据库派生的**EF 类（简化）**

```
class Product
{ 
     public string ProductId;
     public string ProductName;
     public string CategoryId;
     public string CategoryName;
} 
```

`ProductId`是表的**主键**。

对于 DB 设计师做出的错误设计决定（我无法修改它），我在这张表中有`CategoryId`和。`CategoryName`

我需要一个**DropDownList**，其中 (distinct)`CategoryId`作为**Value**和`CategoryName`作为**Text**。因此我应用了以下代码：

```
product.Select(m => new {m.CategoryId, m.CategoryName}).Distinct(); 
```

`CategoryId`从逻辑上讲，它应该创建一个具有和`CategoryName`作为属性的匿名对象。`Distinct()`保证没有重复对 ( , `CategoryId`) `CategoryName`。

但实际上它不起作用。据我了解，`Distinct()`当集合中只有一个字段时，它会忽略它们……它是否正确？有什么解决方法吗？谢谢！

**更新**

对不起`product`是：

```
List<Product> product = new List<Product>(); 
```

我找到了一种获得相同结果的替代方法`Distinct()`：

```
product.GroupBy(d => new {d.CategoryId, d.CategoryName}) 
       .Select(m => new {m.Key.CategoryId, m.Key.CategoryName}) 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-23T12:38:20.427

我假设您使用 distinct 像列表上的方法调用。您需要将查询结果用作 DropDownList 的数据源，例如通过`ToList`.

```
var distinctCategories = product
                        .Select(m => new {m.CategoryId, m.CategoryName})
                        .Distinct()
                        .ToList();
DropDownList1.DataSource     = distinctCategories;
DropDownList1.DataTextField  = "CategoryName";
DropDownList1.DataValueField = "CategoryId"; 
```

如果您需要真实对象而不是只有很少属性的匿名类型，另一种方法是使用`GroupBy`匿名类型：

```
List<Product> distinctProductList = product
    .GroupBy(m => new {m.CategoryId, m.CategoryName})
    .Select(group => group.First())  // instead of First you can also apply your logic here what you want to take, for example an OrderBy
    .ToList(); 
```

第三种选择是使用[MoreLinq 的`DistinctBy`](https://github.com/morelinq/MoreLINQ/blob/master/MoreLinq/DistinctBy.cs).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T12:31:51.967

> Distinct() 保证没有重复对（CategoryId、CategoryName）。

- 正是这样

匿名类型“神奇地”实现`Equals`和`GetHashcode`

我假设某处还有另一个错误。区分大小写？可变类？不可比的领域？

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-19T21:32:15.840

这是我的解决方案，它支持不同类型的 keySelector：

```
public static IEnumerable<TSource> DistinctBy<TSource>(this IEnumerable<TSource> source, params Func<TSource, object>[] keySelectors)
{
    // initialize the table
    var seenKeysTable = keySelectors.ToDictionary(x => x, x => new HashSet<object>());

    // loop through each element in source
    foreach (var element in source)
    {
        // initialize the flag to true
        var flag = true;

        // loop through each keySelector a
        foreach (var (keySelector, hashSet) in seenKeysTable)
        {                    
            // if all conditions are true
            flag = flag && hashSet.Add(keySelector(element));
        }

        // if no duplicate key was added to table, then yield the list element
        if (flag)
        {
            yield return element;
        }
    }
} 
```

要使用它：

```
list.DistinctBy(d => d.CategoryId, d => d.CategoryName) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-03-30T06:00:46.683

在您的选择中使用`Key`关键字将起作用，如下所示。

`product.Select(m => new {Key m.CategoryId, Key m.CategoryName}).Distinct();`

我意识到这提出了一个旧线程，但认为它可能会对某些人有所帮助。在使用 .NET 时，我通常在 VB.NET 中编写代码，因此`Key`可能会以不同的方式转换为 C#。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-23T13:04:34.990

[Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)方法从序列中返回不同的元素。

如果您使用 Reflector 查看它的实现，您会发现它是`DistinctIterator`为您的匿名类型创建的。不同的迭代器`Set`在枚举集合时添加元素。这个枚举器跳过所有已经存在的元素`Set`。`Set`用于`GetHashCode`定义`Equals`元素是否已存在于`Set`.

匿名类型如何`GetHashCode`实现？`Equals`正如它在[msdn](http://msdn.microsoft.com/en-us/library/bb397696.aspx)上所说：

> 匿名类型的 Equals 和 GetHashCode 方法是根据属性的 Equals 和 GetHashcode 方法定义的，相同匿名类型的两个实例只有在它们的所有属性都相等时才相等。

因此，在对不同集合进行迭代时，您绝对应该有不同的匿名对象。结果并不取决于您为匿名类型使用了多少字段。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-24T22:47:57.763

回答问题的标题（是什么吸引了这里的人）并忽略了该示例使用匿名类型....

此解决方案也适用于非匿名类型。匿名类型不需要它。

助手类：

```
/// <summary>
/// Allow IEqualityComparer to be configured within a lambda expression.
/// From https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer
/// </summary>
/// <typeparam name="T"></typeparam>
public class LambdaEqualityComparer<T> : IEqualityComparer<T>
{
    readonly Func<T, T, bool> _comparer;
    readonly Func<T, int> _hash;

    /// <summary>
    /// Simplest constructor, provide a conversion to string for type T to use as a comparison key (GetHashCode() and Equals().
    /// https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer, user "orip"
    /// </summary>
    /// <param name="toString"></param>
    public LambdaEqualityComparer(Func<T, string> toString)
        : this((t1, t2) => toString(t1) == toString(t2), t => toString(t).GetHashCode())
    {
    }

    /// <summary>
    /// Constructor.  Assumes T.GetHashCode() is accurate.
    /// </summary>
    /// <param name="comparer"></param>
    public LambdaEqualityComparer(Func<T, T, bool> comparer)
        : this(comparer, t => t.GetHashCode())
    {
    }

    /// <summary>
    /// Constructor, provide a equality comparer and a hash.
    /// </summary>
    /// <param name="comparer"></param>
    /// <param name="hash"></param>
    public LambdaEqualityComparer(Func<T, T, bool> comparer, Func<T, int> hash)
    {
        _comparer = comparer;
        _hash = hash;
    }

    public bool Equals(T x, T y)
    {
        return _comparer(x, y);
    }

    public int GetHashCode(T obj)
    {
        return _hash(obj);
    }    
} 
```

最简单的用法：

```
List<Product> products = duplicatedProducts.Distinct(
    new LambdaEqualityComparer<Product>(p =>
        String.Format("{0}{1}{2}{3}",
            p.ProductId,
            p.ProductName,
            p.CategoryId,
            p.CategoryName))
        ).ToList(); 
```

最简单（但效率不高）的用法是映射到字符串表示，以避免自定义散列。相等的字符串已经具有相等的哈希码。

参考：
[在 IEqualityComparer 中包装委托](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-22T05:36:11.937

```
public List<ItemCustom2> GetBrandListByCat(int id)
    {

        var OBJ = (from a in db.Items
                   join b in db.Brands on a.BrandId equals b.Id into abc1
                   where (a.ItemCategoryId == id)
                   from b in abc1.DefaultIfEmpty()
                   select new
                   {
                       ItemCategoryId = a.ItemCategoryId,
                       Brand_Name = b.Name,
                       Brand_Id = b.Id,
                       Brand_Pic = b.Pic,

                   }).Distinct();

        List<ItemCustom2> ob = new List<ItemCustom2>();
        foreach (var item in OBJ)
        {
            ItemCustom2 abc = new ItemCustom2();
            abc.CategoryId = item.ItemCategoryId;
            abc.BrandId = item.Brand_Id;
            abc.BrandName = item.Brand_Name;
            abc.BrandPic = item.Brand_Pic;
            ob.Add(abc);
        }
        return ob;

    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-17T14:35:33.970

添加了 .net 6 的更新`DistinctBy`：

```
myQueryable.DistinctBy(c => new { c.KeyA, c.KeyB}); 
```

[https://docs.microsoft.com/en-us/dotnet/api/system.linq.queryable.distinctby?view=net-6.0](https://docs.microsoft.com/en-us/dotnet/api/system.linq.queryable.distinctby?view=net-6.0)

（对于`IQueryable`和`IEnumerable`）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-26T11:21:49.240

您的问题的解决方案如下所示：

```
public class Category {
  public long CategoryId { get; set; }
  public string CategoryName { get; set; }
} 
```

...

```
public class CategoryEqualityComparer : IEqualityComparer<Category>
{
   public bool Equals(Category x, Category y)
     => x.CategoryId.Equals(y.CategoryId)
          && x.CategoryName .Equals(y.CategoryName, 
 StringComparison.OrdinalIgnoreCase);

   public int GetHashCode(Mapping obj)
     => obj == null 
         ? 0
         : obj.CategoryId.GetHashCode()
           ^ obj.CategoryName.GetHashCode();
} 
```

...

```
 var distinctCategories = product
     .Select(_ => 
        new Category {
           CategoryId = _.CategoryId, 
           CategoryName = _.CategoryName
        })
     .Distinct(new CategoryEqualityComparer())
     .ToList(); 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2014-10-21T08:25:58.650

```
Employee emp1 = new Employee() { ID = 1, Name = "Narendra1", Salary = 11111, Experience = 3, Age = 30 };Employee emp2 = new Employee() { ID = 2, Name = "Narendra2", Salary = 21111, Experience = 10, Age = 38 };
Employee emp3 = new Employee() { ID = 3, Name = "Narendra3", Salary = 31111, Experience = 4, Age = 33 };
Employee emp4 = new Employee() { ID = 3, Name = "Narendra4", Salary = 41111, Experience = 7, Age = 33 };

List<Employee> lstEmployee = new List<Employee>();

lstEmployee.Add(emp1);
lstEmployee.Add(emp2);
lstEmployee.Add(emp3);
lstEmployee.Add(emp4);

var eemmppss=lstEmployee.Select(cc=>new {cc.ID,cc.Age}).Distinct(); 
```

# debugging - 在不破坏网站的情况下测试文件更改的好方法？

> ID：10719930
> 
> 赞同：0
> 
> 时间：2012-05-23T12:28:44.517
> 
> 标签：debugging, beta, beta-testing

每次我想向我的站点添加新代码时，我都必须在用户视图之外修改文件以在更新用户看到的真实文件之前对其进行调试。

我通常会创建一个我想要更改的文件的副本并测试它的所有更改，但有时这些文件只包含在另一个文件中，我必须创建两个副本，有时它会变得更加复杂。

这通常是如何完成的？是否有任何工具可以简化该过程，例如在我的 PC 上测试我的站点的环境，这样我就不必每次更新某些内容时都将文件上传到服务器。任何有关 beta 测试新功能的信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:31:46.903

大多数人都有第二台服务器（可能是虚拟机），其配置与他们的实时（生产）网站完全相同。第二台服务器的位置完全取决于您，但它应该通过使用相同版本的软件和相同的文件结构来匹配您的实时站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:26:43.763

我也喜欢 Sean 建议的登台服务器的想法。同样，您的帖子并没有过多地说明您的生产 Web 服务器以及您正在使用的所有功能（您是否在服务器上运行脚本？PHP？某些版本的 SQL？）。[但是对于简单的设置，您可以在自己的 PC 上运行Apache Web 服务器](http://httpd.apache.org/)的副本，或者像[XAMPP 服务器](http://www.apachefriends.org/en/xampp.html)这样更轻量级的东西。

# twitter-bootstrap - Bootstrap 在悬停时折叠手风琴

> ID：10719931
> 
> 赞同：11
> 
> 时间：2012-05-23T12:28:46.287
> 
> 标签：twitter-bootstrap, accordion, collapse

我在我正在处理的项目中使用 Twitter 的 Bootstrap 'Collapse' 插件。我有一个简单的手风琴（[根据文档进行](http://twitter.github.com/bootstrap/javascript.html#collapse)设置），但我想将默认功能从**点击**修改为**悬停**事件。

谁能确认实现这一目标的最佳方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-21T13:18:29.180

我实现了悬停功能，同时相当容易地保持“可点击性”：

```
jQuery(".pointer").hover(
    function(){
        var thisdiv = jQuery(this).attr("data-target")
        jQuery(thisdiv).collapse("show");
    },
    function(){
        var thisdiv = jQuery(this).attr("data-target")
        jQuery(thisdiv).collapse("hide");
    }
); 
```

我已经在使用数据属性，所以我保留了它们，并在这里使用它们来触发正确的 div。“指针”是我的切换链接上的一个类，因此您可以根据需要对其进行调整。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T13:47:45.877

您可以直接从插件脚本中复制可折叠的 data-api 并对其进行调整以实现悬停功能。然后，您可以将其放置在您自己的 script.js 文件中，并将您想要修改的可折叠文件定位为在悬停而不是单击时打开。试试这个例如：

**JS**

```
$(function() {
    $('#accordion2').on('mouseenter.collapse.data-api', '[data-toggle=collapse]', function(e) {
        var $this = $(this),
            href, target = $this.attr('data-target') || e.preventDefault() || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
            ,
            option = $(target).data('collapse') ? 'show' : $this.data()
            $(target).collapse(option)
    })
}) 
```

这是插件上找到的 data-api 块的直接副本，我只是将`click`事件替换`mouseenter`为`collapse`选项，并将其更改为`show`。

演示：http: [//jsfiddle.net/um2q2/1/](http://jsfiddle.net/um2q2/1/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-17T13:03:39.420

为了让它为 bootstrap3 工作，我做了一些改变

```
$(function() {
    $(document).on('mouseenter.collapse', '[data-toggle=collapse]', function(e) {
        var $this = $(this),
            href, 
            target = $this.attr('data-target') 
                     || e.preventDefault() 
                     || (href = $this.attr('href')) 
                     && href.replace(/.*(?=#[^\s]+$)/, ''), //strip for ie7
            option = $(target).hasClass('in') ? 'hide' : "show"

            $('.panel-collapse').not(target).collapse("hide")
            $(target).collapse(option);
    })
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-25T01:05:17.070

1.  添加以下脚本

    ```
    $( ".hoverExpand" ).hover(
        function() {
            if (! $(this).hasClass('collapsing') && 
                $(this).hasClass('collapsed')) {
                    $( this ).click();
            }
        }, function() {
            if  (! $(this).hasClass('collapsing') || 
                 ! $(this).hasClass('collapsed')) {
                    $( this ).click();
            }
        }
    ); 
    ```

2.  将`hoverExpand`（或任何您想调用的名称）添加到元素中。请参阅下面的示例

    ```
    <a class="hoverExpand" data-toggle="collapse" data-parent="#accordion" 
       href="#collapseOne">A plane that flies below water</a> 
    ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-01T11:12:09.967

根据 Cliff Seal 的回答，我建议排队动画以防止在动画完成之前发生时`panel-collapse`保持打开状态。`mouseleave``collapse('show')`

```
$('div.panel-collapse').on('shown.bs.collapse hidden.bs.collapse', function() {
  $(this).dequeue('collapse');
});
$('div.panel-heading').hover(
  function() {
    var collapse = $($(this).find('a').attr('href'));
    collapse.queue('collapse', function() {
      $(this).collapse('show');
    });
    if (!collapse.hasClass('collapsing')) {
      collapse.dequeue('collapse');
    }
  },
  function() {
    var collapse = $($(this).find('a').attr('href'));
    collapse.queue('collapse', function() {
      $(this).collapse('hide');
    });
    if (!collapse.hasClass('collapsing')) {
      collapse.dequeue('collapse');
    }
  }
} 
```

这没有使用 DRY 编码，但是我在使用命名函数时遇到了`hover`事件。`onload`也许有人可以就此提出建议？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-23T10:12:51.460

我参加聚会有点晚了，但对于未来的谷歌人来说，我想出了一个更简单的方法来做这件事。

恐怕这是咖啡脚本，但你应该明白：

```
$(".your-hoverable-object-class").mouseenter (e) ->
$this = $(this)
link = $this.find("a") #(assumes you only have one link)
target = link.attr('data-target') || e.preventDefault() || (href = link.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') #strip for ie7
unless $(target).hasClass('in')
  link.trigger('click') #Here's the money shot - just trigger the default functionality 
```

其余的代码是设置变量——你可能需要根据你的设置方式来调整它——最后一点在再次触发点击之前检查面板是否已经打开。再次 - 这适用于我的设置，但如果不适合您，您可以将其删除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-28T08:13:49.213

这是在鼠标悬停时完成此操作的最简单方法。在 angularJs 中使用纯 JavaScript。

***脚本***

```
$scope.collapsePanel = function(variable) {
    if(document.getElementById(variable).className=="collapse in") {
        document.getElementById(variable).className="collapse";
        document.getElementById(variable).setAttribute("aria-expanded","false");
        } else {
            document.getElementById(variable).className="collapse in";  
            document.getElementById(variable).setAttribute("aria-expanded","true");
        }
} 
```

***HTML 代码***

```
<div ng-repeat="entity in entities">
<div class="panel-heading" ng-mouseover="collapsePanel(entity)">
     //Give your contents here
</div> 
</div> 
```

> 注意：使用 ng-click 更改 ng-mouseover 以使其在单击而不是 mouseover 时工作

# grails - 在 gsp 中将枚举显示为单选按钮

> ID：10719934
> 
> 赞同：4
> 
> 时间：2012-05-23T12:29:06.917
> 
> 标签：grails

在我的域类中，我有一个枚举：-

```
class Product{
  Type type
  enum Type{
    MEDICINE, NON_MEDICINE
  }
} 
```

通过生成默认视图，这在 create.gsp 页面中显示为下拉菜单。我的要求是在创建页面中将其显示为单选组，我可以在其中通过单击单选按钮选择两个值中的任何一个。任何人都可以提供一些帮助。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T13:45:34.143

这应该有效：

```
<g:radioGroup name="type"
                  values="${test.Product$Type?.values()}"
                  labels="${test.Product$Type.values()*.name()}"
                  value="${productInstance?.type?.name()}">
  ${it.radio} <g:message code="${it.label}" />&nbsp;
</g:radioGroup> 
```

那应该取代当前`g:select`的`grails-app/views/product/_form.gsp`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:42:02.090

尝试

```
<g:radioGroup name="type" values="${['MEDICINE', 'NON_MEDICINE']}" value="${currentInstance.type}" labels="${['Medicine', 'Non medicine']}">
<span>${it.label} - ${it.radio}</span>
</g:radioGroup> 
```

# jquery - Jquery - 使用 .append 时停止 HTML 标签的自动完成

> ID：10719936
> 
> 赞同：0
> 
> 时间：2012-05-23T12:29:13.097
> 
> 标签：jquery

我正在尝试从 XML 创建一个嵌套列表，但是我发现 .append 函数似乎可以自动完成我的 HTML 标签，这很有用，但是当它不需要时我如何覆盖此操作或者是否有更聪明的方法来执行以下操作：

```
$('#name').html('<li>'+'Origin'+'<ul>'+' ' ).html();
$(this).find("origin").each (function() {
var name = '<li>origin: ' + $(this).text() + '</li>';
$('#name').append(name);
$('#name').append('</ul></li>'); 
```

我得到什么：

```
<ul id="name">
<li>
Origin
<ul> </ul>
</li>
<li>origin: network</li>
<li>origin: nevil-nmshub</li>
<li>origin: origin_overide</li>
<li>origin: Support_4</li>
<li>origin: test-origin</li>
</ul> 
```

正如您所看到的，它在我想要它们之前添加了标签。我想也许我做错了，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:37:42.323

`.append()`（与 一样`.innerHTML`）只能插入*整个 DOM 元素*，而不是任意 HTML 的不完整片段。

所以根据定义，当你第一次`.append()`做某事时，其中的任何标签都会隐式关闭。

试试这个：

```
var $li = $('<li>').appendTo('#name');
var $ul = $('<ul>').appendTo($li);
$(this).find("origin").each(function() {
    $('<li>', { text: 'origin: ' + $(this).text() }).appendTo($ul);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:33:41.820

将您的代码更改为以下内容：

```
var ul = $('<ul />');

// I believe you mean to find elements with class origin instead of <origin>
$(this).find(".origin").each (function() {
   var name = '<li>origin: ' + $(this).text() + '</li>';
   ul.append(name);
});
$('#name').append(ul); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:05:52.493

在动态创建 HTML 时，请尽量避免将开始标签和结束标签分开。

你可以这样做：

```
$('#name').append('<li>Origin<ul></ul></li>');

// I think 'origin' is an XML tag.
// So no worries, you can call in like an HTML element
$(this).find('origin').each(function(index, value) {
    $('#name ul').append('<li>origin: ' + value + '</li>')
}); 
```

# c# - .Net 服务安装在 Windows Server 2008 上

> ID：10719943
> 
> 赞同：0
> 
> 时间：2012-05-23T12:29:49.003
> 
> 标签：c#, windows, service, installation

我有以下问题，我希望在系统上安装我的应用程序作为服务。我的类继承自 System.Configuration.Install.Installer。当我在该类的构造函数中尝试获取 Context 属性的参数时，问题就开始了，然后我得到以下异常：

无法创建（我从安装程序继承的类名）安装程序类型的实例。

当我打印出 Context 属性时，我在构造函数中看到它为 null（并且在尝试访问 context 属性时会引发异常）。
相同的代码在 2003 上运行良好，安装成功完成，但在这里失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:11:03.247

如果可能，将您的代码从构造函数移至安装。Installer 的常见用法是：

```
using ( TransactedInstaller transactedInstaller = new TransactedInstaller() )
{
    transactedInstaller.Installers.Add(myInstaller);
    transactedInstaller.Context = new InstallContext(null, null);
    transactedInstaller.Install(new System.Collections.Hashtable());
} 
```

这就是`Context`构造函数中为 null 的原因。

# wpf - 覆盖 WPF OnStartUp 会导致多个窗口实例

> ID：10719944
> 
> 赞同：7
> 
> 时间：2012-05-23T12:29:57.073
> 
> 标签：wpf, mvvm

在一个简单的 MVVM 方法中，我通过覆盖 App.xaml 中的 OnStartup 将 MainWindow 链接到 ViewModel。

```
 public partial class App : Application
  {

    protected override void OnStartup(StartupEventArgs e)
    {
      base.OnStartup(e);

      MainWindow window = new MainWindow();
      var viewModel = new MainWindowViewModel();
      window.DataContext = viewModel;
      window.Show();
    }

  } 
```

当我运行 WPF 应用程序时，这会导致 MainWindow 的两个实例。当我覆盖启动时，它不应该只导致一个吗？

其中一个窗口显示正确的 DataContext (ViewModel)，而另一个则没有。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T13:17:37.360

在 App.xaml 中：

```
<Application x:Class="WpfApplication1.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"> 
```

删除 StartupUri。这将停止第二个窗口加载。

# vba - 在 Outlook VBA 中使用通讯录

> ID：10719951
> 
> 赞同：0
> 
> 时间：2012-05-23T12:30:13.427
> 
> 标签：vba, outlook, addressbook, email-templates

工作中的某个人问我是否可以实现一个简单的系统，让他根据他可以输入的一些参数发送 Outlook 模板邮件。

一个例子是这样的消息：

```
"Hello,

Please be informed that system **Parameter1** is current down.

Regards," 
```

`@@parameters@@`我正在考虑在 Outlook VBA 中创建一个表单，该表单将动态查找在某个模板中找到样式为参数（例如）的字符串的次数，然后在表单中为每个找到的参数创建一个编辑框。

问题是我显然想为收件人添加一个框。我需要找到一种方法来调用 Outlook 通讯簿并使其表现得像一个。这不像我希望的那样直观。到目前为止，我只设法做到了以下几点：

```
Dim snd As Outlook.SelectNamesDialog
Dim displayLL As Boolean

Set snd = Application.Session.GetSelectNamesDialog()
snd.NumberOfRecipientSelectors = Outlook.OlRecipientSelectors.olShowTo
snd.AllowMultipleSelection = True
displayLL = snd.display() 
```

如您所见，这只弹出地址簿并允许我选择几个地址。但是我很难理解我如何才能创建一些实际上就像普通 Outlook 邮件中的“收件人：”和“抄送：”字段一样的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:52:44.623

不确定这有多相关，考虑到我最终采取了完全不同的路线，但我想我还是会添加这个，因为没有人回答。

我只是创建了一个表单，通过搜索 %AppData% 中的模板文件夹来列出所有模板。然后，我将遍历整个邮件以查找参数样式的字符串，并在每次遇到这样的字符串时（通过简单的输入框）询问所需的值。我没有添加自定义的“收件人”框，而是打开了一封正确填写参数的新邮件。然后，用户可以像往常一样简单地将收件人添加到邮件中，他对此很好。这样一来，他也能够仔细检查邮件是否真的和他想要的一样。

没有什么花哨的东西，也没有什么是 7 岁孩子做不到的，但它确实有效。

# asp.net - 如何在 Web 服务器上运行没有计划任务的计划任务

> ID：10719958
> 
> 赞同：0
> 
> 时间：2012-05-23T12:30:34.073
> 
> 标签：asp.net

我的客户更改了虚拟主机。在旧的虚拟主机上有运行计划任务的选项。我有一个需要每月运行一次的网址 website.com/st.aspx。

在新的网络服务器上没有计划任务（它不工作，管理员不会启用它）有没有其他方法可以让我像 ST 一样运行我的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:48:01.573

您可以从启用了计划任务的**其他服务器调用它。**

或者，如果您的网站至少获得了一些流量，您可以调用执行的任何内容`st.aspx`，**`global.asax`**并在您最后一次调用它时在某处登录，以防止每月调用它超过一次。

另一种可能性是尝试找到一个**正常运行时间监控服务**，您可以将其配置为每月仅调用一次您的网址......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:48:20.400

我有同样的问题并使用在线服务

```
http://http.sh/index.php 
```

当然，不利的一面是您依赖于第三者，但它似乎非常可靠。

# objective-c - 使用 objectAtIndex 从 NSMutableArray 获取整数值

> ID：10719963
> 
> 赞同：0
> 
> 时间：2012-05-23T12:30:45.120
> 
> 标签：objective-c, arrays

我有一个名为 George 的 NSMutableArray。它内部有 NSInteger 值：12、23、54、34、45。现在我有一个名为 unitID 的字符串，它由一个字母和一个数字组成，例如。t00, e01, t02, e03, t04

我正在做的是：

```
-(int)getSpawnAmount:(NSString *)unitID
{
typeString = [unitID substringWithRange:NSMakeRange(0,1)];
numberString = [unitID substringWithRange:NSMakeRange(1,2)];

    return [[george objectAtIndex:[numberString integerValue]] integerValue];
} 
```

我知道 objectAtIndex 返回一个“id”，我不确定我是否以正确的方式获取整数值。

无论如何，我的问题是如何使用 objectAtIndex 从我的 NSMutableArray 中获取 NSInteger 值？

提前致谢。

我的数组在另一个类中，我没有引用它，而是创建了一个新的 NSMutableArray，它是空白的。我的代码现在工作正常。感谢您的回答。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T12:41:52.413

安全的方法可能是对类型 id 使用反射；所以你将能够在里面放一些错误处理。否则，您可以将类型 id 转换为 NSNumber，然后转换为“任何”其他类型，例如 int。

# c++ - gdb 中未解析的调试符号

> ID：10719964
> 
> 赞同：0
> 
> 时间：2012-05-23T12:30:49.393
> 
> 标签：c++, gdb, cross-compiling

我在 powerpc 平台的 Montavista linux 上运行的一个应用程序崩溃了。前 3 个堆栈帧显示绝对地址而不是符号。我的构建机器托管在不同的平台上，我正在使用交叉编译器来构建应用程序。我怎样才能取回符号。

回溯如下 -

```
#0  0x0f272adc in ?? () from /lib/libc.so.6
#1  0x0f3537fc in ?? () from /lib/libc.so.6
#2  0x0f274f44 in ?? () from /lib/libc.so.6
#3  0x0f276e94 in malloc () from /lib/libc.so.6
#4  0x105c94a8 in fast_memget (module_id=0, noctets=820, err=0x3893e710) at ../common/src/portlayer.c:1305
#5  0x1055f734 in glbSipParserDecodeMessage (
    message=0x3b225e58 "SIP/2.0 200 OK\r\nVia: SIP/2.0/TCP 10.194.182.55:5060;branch=z9hG4bK2495419925-4086;received=10.194.182.55;ingress-zone=mxenode51\r\nCall-ID: 2469861343-4086\r\nCSeq: 6 INFO\r\nContact: <sip:4084565719@10.194"..., opt=0x3893e70c, messageLength=425, nextmesg=0x3893e898, pContext=0x3893e8cc, ppSipMessage=0x3893e6bc, err=0x3893e710) at src/sipdecode.c:6184 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:36:41.800

您需要安装带有调试信息的 C 库 (libc)。在 Debian 或派生系统（例如 Ubuntu）上，它是一个名为`libc6-dbg`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:47:08.920

考虑到评论中的额外信息，这里有一些事情需要检查：

应用程序是否经过优化（-O1、-O2 等）编译？如果是这样，请在不使用这些选项的情况下重新编译。我自己在 Cavium Octeon (MIPS) 上进行交叉编译时遇到过这种情况，并观察到优化标志的存在导致看到符号时出现问题。

可能是堆栈以某种方式损坏了吗？尽管如果是这种情况，我认为所有帧都会损坏。您是否有可能使用 Valgrind 之类的东西来查看您是否在某处踩踏记忆？或者至少在 Linux 上运行应用程序？

在继续之前，您真的需要了解更多关于前 3 帧的信息吗？知道它在 malloc 中崩溃还不够吗？也许相反，您应该考虑可能导致 malloc 崩溃的原因。在前面提到的同一个 Cavium 平台中，我们遇到了一个问题，如果我们在没有剩余内存的情况下调用 malloc/new，系统会崩溃:( 即使在通知他们这个错误之后，我们也不得不使用一个 hacky 解决方法。你在调用 malloc/new 时检查 NULL 吗？如果你从几个不同的地方调用它，这可能会很困难。我们包装了 new/malloc，所以这对我们来说很容易。

来自 OP 的更多评论后更新

如果您用完内存，无论是否由于内存泄漏，它都不应该崩溃，但请尝试检查 malloc 是否返回 NULL。[您还应该考虑使用此处](https://stackoverflow.com/q/5548639/1158895)提到的“内存不足处理程序” 。

在同一个 Cavium 平台上，我们遇到了类似的内存损坏问题，很难追踪（我们还不能在带有 valgrind 的 Linux 上运行它）。我们找到了一种在每次执行 malloc 时检查内部内存头有效性的方法。这确实减慢了速度，但最终它让我们找到了问题所在。如果您无法访问这样的东西，或者 linux 上的 valgrind，您可以考虑“包装” malloc/new 并自己实现它。这将非常复杂，但可能是最坏的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T13:56:44.017

我会说最后三帧不知何故没有有效信息。猜测：可能是从 malloc 调用的一些汇编函数（尽管这些框架应该是可读的）。

但是由于您确实知道来自同一库的 malloc 的地址，因此您可以计算该帧中 PC 的相对差异（例如：帧 #2 的 -1f50）。使用您的交叉工具链，并使用 objdump -d libc.so，并检查 malloc 中的代码 - 区别......

# iphone - 如何强制 UIImagePickerController 以横向模式录制视频

> ID：10719966
> 
> 赞同：1
> 
> 时间：2012-05-23T12:31:00.347
> 
> 标签：iphone, objective-c, uiimagepickercontroller, video-capture

我的应用程序正在运行 potrate 模式，但我想以横向模式录制视频。

```
 self.imgPicker = [[UIImagePickerController alloc] init];
        self.imgPicker.editing=FALSE;
        //self.imgPicker.allowsImageEditing = YES;
        self.imgPicker.delegate = (id)self;

        [self.imgPicker shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight];
        //self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    #if !(TARGET_IPHONE_SIMULATOR)    
        self.imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    #endif
imgPicker.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;
            NSArray *mediaTypesAllowed = [NSArray arrayWithObject:@"public.movie"];
            [imgPicker setMediaTypes:mediaTypesAllowed];
            [self.imgPicker shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight];
            [self presentModalViewController:imgPicker animated:YES]; 
```

我想`UIImagePickerController`默认以横向模式加载。

请指导我如何做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:29:22.067

正如 Apple 文档所述，UIImagePickerController（从现在起将被称为 UIIPC）仅在纵向模式下工作。您的应用程序将被拒绝。无论如何，你可以试试这个以横向模式打开的[url 。](http://www.mediafire.com/?ubc0i69jq4x8ex6)

# c++ - v8 | 手动启动垃圾收集器

> ID：10719967
> 
> 赞同：9
> 
> 时间：2012-05-23T12:31:04.573
> 
> 标签：c++, garbage-collection, v8

有没有办法在 Google 的 V8 引擎上手动启动垃圾收集器？我找不到任何参考。通常 GC 支持此功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T23:14:06.190

*   `v8::HEAP->CollectAllGarbage`您可以通过命令标志将该函数公开给全局 JavaScript 命名空间`--expose_gc`。然后只需调用`gc();`.

*   您可以通过以下语句强制从 C++ 进行垃圾收集：

    `while(!V8::IdleNotification()) {};`

参考：

*   [http://code.google.com/p/v8/source/browse/trunk/src/extensions/gc-extension.cc](http://code.google.com/p/v8/source/browse/trunk/src/extensions/gc-extension.cc)
*   [http://code.google.com/p/v8/issues/detail?id=1688](http://code.google.com/p/v8/issues/detail?id=1688)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:33:20.310

使用 V8::AdjustAmountOfExternalAllocatedMemory

[http://create.tpsitulsa.com/wiki/V8/Garbage_Collection](http://create.tpsitulsa.com/wiki/V8/Garbage_Collection)

# c# - 如何使用 C# 在文件观察器中捕获剪切和粘贴操作

> ID：10719968
> 
> 赞同：1
> 
> 时间：2012-05-23T12:31:11.517
> 
> 标签：c#, paste, filesystemwatcher

我编写了文件观察器功能来专注于特定的目录活动。我可以阅读所有事件，如创建、删除、重命名和更改文件/文件夹。

但我不知道如何处理剪切和粘贴场景，因为“剪切”结果作为触发删除事件 i 和“粘贴”结果作为创建事件触发。

如何处理剪切和粘贴场景？对此有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T12:42:38.630

给你！监视剪贴板的剪切/复制/粘贴操作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:43:25.643

在删除时，您可以存储已删除的文件，并在创建时检查它们是否相同。然后你知道这是一个剪切和粘贴。

# ruby-on-rails-3 - 如何管理公共记录和用户特定记录

> ID：10719970
> 
> 赞同：1
> 
> 时间：2012-05-23T12:31:12.893
> 
> 标签：ruby-on-rails-3, controllers

我有一个公司由用户管理的情况。即：用户可以创建、读取、更新和删除他们自己的公司。但我也希望同一用户访问系统中所有公司的列表，即使在注销时也是如此。

例如：

user_a 管理以下公司：company_a 和 company_b

user_b 管理以下公司：company_c 和 company_d

user_a 应该能够看到他自己的公司（a 和 b）的列表以及所有公司的列表（a、b、c 和 d）

在控制器中处理此问题的最佳方法是什么？

理想情况下，我希望将其设置在 2 条单独的路线下，如下所示：

```
/companies
/users/1/companies 
```

我应该为公司设置一个控制人，还是多个控制人？那将如何工作？

我正在寻找这种情况下的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:18:18.840

在您的情况下，方法可以是：

1.  使用`Devise`RubyGem 处理身份验证。[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)
2.  使用 RESTful 操作集创建或搭建简单的 CompaniesController：`index, new, create, edit, udpate, destroy`操作。
3.  添加`before_filter`以`CompaniesController`限制对需要用户身份验证的操作的访问：

    before_filter :authenticate_user!, :except => [:public_list]

4.  您应该`has_many`在 User 和 Company ActiveRecord 模型之间建立关联，以访问公司的`current_user`.

**下面是示例代码：**

路由：

```
resources :users do
    resources :companies
end
match '/companies' => 'companies#public_list', :as => :public_companies_list 
```

控制器：

```
class CompaniesController < ApplicationController
    before_filter :authenticate_user!, :except => [:public_list]

  def index
    @companies = current_user.companies
  end

  def show
    @company = current_user.companies.find(params[:id])
  end

  def new
    @company = current_user.companies.new
  end

  def edit
    @company = current_user.companies.find(params[:id])
  end

  def create
    @company = current_user.companies.new(params[:company])

    respond_to do |format|
      if @company.save
        format.html { redirect_to @company, notice: 'Company was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
  end

  def update
    @company = current_user.companies.find(params[:id])

    respond_to do |format|
      if @company.update_attributes(params[:company])
        format.html { redirect_to @company, notice: 'Company was successfully updated.' }
      else
        format.html { render action: "edit" }
      end
    end
  end

  def destroy
    @company = current_user.companies.find(params[:id])
    @company.destroy

    respond_to do |format|
      format.html { redirect_to companies_url }
    end
  end
end 
```

对于上市公司列表，请添加此方法：

```
def public_list
  @companies = Company.all
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:52:50.280

恕我直言，如果所有用户都可以看到所有公司，那么拥有一个控制器来完成这项工作是完美的。只需在模板中，您就可以检查当前用户是否是指定公司的作者，然后添加链接以编辑该公司等，当然如果您愿意。

# javascript - Javascript - jquery，手风琴

> ID：10719971
> 
> 赞同：1
> 
> 时间：2012-05-23T12:31:17.100
> 
> 标签：javascript, jquery, html, accordion

```
<div id="wrapper">
    <div class="accordionButton">Personal Information</div>
    <div class="accordionContent">      
    Personal text
    </div>
    <div class="accordionButton">Experience</div>
    <div class="accordionContent">
    Experience information
    </div>
    <div class="accordionButton">Training</div>
    <div class="accordionContent">
    No skills
    <div class="accordionButton">Career</div>
    <div class="accordionContent">
    Never had a job
    </div>
    <div class="accordionButton">Referers</div>
    <div class="accordionContent">
    None.
    </div>
</div> 
```

这段代码按我想要的方式工作。它是一种水平手风琴。但是，当它加载到我的网页上时，必须隐藏它们的内容 div，我的 jquery 才能工作。

查询：

```
$(document).ready(function() {

    // When div is clicked, hidden content divs will slide out  
    $('div.accordionButton').click(function() {
        $('div.accordionContent').slideUp('normal');    
        $(this).next().slideDown('normal');
    });

    // Close all divs on load page  
    $("div.accordionContent").hide();

}); 
```

如果我不隐藏 div，则会显示所有 div。有什么方法可以在不更改太多 jquery 的情况下显示第一页，或者我必须为按钮和内容设置不同的类名，以便在单击指定按钮时，关联内容将滑出该按钮 div ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T12:34:18.427

您可以将 jquery 选择器用于第一个 div 并将其设置为`show()`. 就像是 ：

```
 $('div.accordionContent:first').show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:44:05.290

我想你必须试试这个： -

```
<script type="text/javascript">
    $.fn.accordion = function(settings) {
        accordion = $(this);
    }
    $(document).ready(function($) {
        $('div.accordionContent').click(function() {

            if($(this).next().is(":visible")) {
                $(this).next().slideDown();
            }

            $('div.accordionContent').filter(':visible').slideUp();
            $(this).next().slideDown();
            return false;
        });
    });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:53:10.567

为什么不使用[`slideToggle()`](http://api.jquery.com/slidetoggle)而不是 IF 语句....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T18:20:35.690

试试这个非常简单的解决方案

**HTML**

```
<div class="accordion-container">
    <div class="accordion-content">
        <div class="accordion-title">Title</div>
        <div class="accordion-toggle">Toggle content</div>
    </div> 
    <div class="accordion-content">
        <div class="accordion-title">Title</div>
        <div class="accordion-toggle">Toggle content</div>
    </div> 
    <div class="accordion-content">
        <div class="accordion-title">Title</div>
        <div class="accordion-toggle">Toggle content</div>
    </div> 
</div> 
```

**jQuery**

```
$('.accordion-content .accordion-title').on('click', function(){ 
    $(this).toggleClass('active');
    $('.accordion-title').not($(this)).removeClass('active');
    $(this).next().slideToggle();
    $(".accordion-toggle").not($(this).next()).slideUp();
}); 
```

# nhibernate - 我可以在 NHibernate 中保持打开多少会话？

> ID：10719975
> 
> 赞同：0
> 
> 时间：2012-05-23T12:31:27.297
> 
> 标签：nhibernate

我正在编写一个使用 NHibernate 连接到数据库的桌面应用程序。

我的模型有一个会话，它在模型初始化时打开，在模型被释放时关闭。当我每个表单有一个模型时，这没关系，因为打开的会话数与打开的窗口数相同 - 数量很少。

我现在正在制作一个列出许多模型的表单，所以如果表单列出了 50 个模型，那么将有 50 个打开的会话。我怀疑这可能是个问题。

我可以在 NHibernate 中打开多少个会话？我应该只有一小部分，还是我可以根据需要有尽可能多的开放会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:11:11.683

这取决于您将会话保持多长时间以及您如何处理它们。会话本身非常轻量级，不一定打开与数据库的连接。

但是，我认为为 1 个表单设置 50 个公开会话并不是最好的设计。我建议将会话用作“工作单元”，因为当您想做某事（例如呈现一些数据，或更新一些数据，或列出一堆实体）时，您打开会话，做您的工作，然后处理会话。这可能会导致延迟加载和数据绑定出现一些问题，但您可以通过获取所需的关联来解决这些问题。

您可以使用 session.Lock(entity, LockMode.None) 将已在一个会话中加载的实体重新连接到另一个会话，因此您无需在用户交互之间打开会话。

# c# - ADO.Net 中 ForeignKeyConstraint.AcceptRejectRule 的用途？

> ID：10719977
> 
> 赞同：2
> 
> 时间：2012-05-23T12:31:32.640
> 
> 标签：c#, .net, ado.net

ADO.Net 中 ForeignKeyConstraint 类的[AcceptRejectRule](http://msdn.microsoft.com/en-us/library/system.data.foreignkeyconstraint.acceptrejectrule.aspx)属性的生活目的是什么？

MSDN 文档没有提供足够的解释（对我来说）来明确其目的。阅读文档后，我认为将属性设置为 None 将防止从父表到子表的任何更改级联。但是，在运行以下代码后，这个假设被证明是错误的：

```
 DataTable table1 = new DataTable("Customers");

        table1.Columns.Add(new DataColumn("CustomerID", typeof(int)));
        table1.Columns.Add(new DataColumn("CustomerName", typeof(string)));

        DataTable table2 = new DataTable("Orders");
        table2.Columns.Add(new DataColumn("OrderID", typeof(int)));
        table2.Columns.Add(new DataColumn("CustomerID", typeof(int)));

        DataSet dataSet = new DataSet();
        dataSet.Tables.AddRange(new DataTable[] { table1, table2 });
        dataSet.EnforceConstraints = true;

        DataRelation dataRelation = new DataRelation("CustomerOrders", table1.Columns["CustomerID"],
            table2.Columns["CustomerID"], true);
        dataSet.Relations.Add(dataRelation);

        Debug.WriteLine("No. of constaints in the child table = {0}", table2.Constraints.Count);

        dataRelation.ChildKeyConstraint.AcceptRejectRule = AcceptRejectRule.None;
        dataRelation.ChildKeyConstraint.DeleteRule = Rule.Cascade;
        dataRelation.ChildKeyConstraint.UpdateRule = Rule.Cascade;

        table1.Rows.Add(new object[] { 11, "ABC" });
        table1.Rows.Add(new object[] { 12, "XYZ" });

        table2.Rows.Add(new object[] { 51, 12 });
        table2.Rows.Add(new object[] { 52, 11 });
        table2.Rows.Add(new object[] { 53, 11 });

        table1.Rows.RemoveAt(0);
        table1.AcceptChanges();
        table2.AcceptChanges();

        Debug.WriteLine("No of rows in the parent table = {0}", table1.Rows.Count);
        Debug.WriteLine("No of rows in the child table = {0}", table2.Rows.Count); 
```

上述代码的输出是：

**子表中的约束数 = 1
父表
中的行数 = 1 子表中的行数 = 1**

谢谢，
迪内什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:42:55.620

为避免级联，您需要设置`DeleteRule`和`UpdateRule`to `Rule.None`。

我不确定，但我相信`AcceptRejectRule`只会影响接受/拒绝命令本身是否级联。在您的代码中，我猜这些更改已被级联（因为这是已设置的方式），但只有更改`DeleteRule`已被接受；上的更改*未被*接受。`UpdateRule``table1``table2`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-01T17:41:25.143

这是我的理解。假设您有父子关系，并且您将其设置`relation.acceptrejectrule`为级联。您还可以`dataadapter.acceptchangesduringupdate`设置为`true`，如果您修改父记录和子记录，然后`dataadapter.update`先对父记录执行 a ，则父记录和子记录将被“接受”，如果您`subsequent dataadapter.update`对子记录执行 a ，则不会更新任何内容（因为“接受”从父记录级联到子记录）。所以你的父母得到了更新，但没有孩子的记录。可能的解决方案是先更新子记录，然后更新父记录，或者简单地将其设置`relation.acceptrejectrule`为无。通过这样做，“接受”不会级联到子记录，您将能够更新它们。当您对子记录进行更新时，它们也将被“接受”`dataadapter.acceptchangesduringupdate``true`. 当然，您可以设置`acceptchangesduringupdate`并`false`执行 a`manual dataset.acceptchanges`以接受数据集中的所有更改。但如果您这样做，请确保您已对数据集中的所有表进行了更新。

我只是在这里根据我的测试说明我认为正在发生的事情。如果其他人有不同的认识，请加入。*

# java - Edittext 不会恢复

> ID：10719978
> 
> 赞同：0
> 
> 时间：2012-05-23T12:31:34.760
> 
> 标签：java, android, android-edittext, sharedpreferences

我仍然在同一个应用程序上，我是编程新手。

所以，EditText 输入不会恢复...我想让应用程序保存 EditText 的输入，当用户再次启动应用程序时，EditText 输入将恢复...

我认为我对 Sharedpreferences 进行了编程，每次单击按钮时，EditText 都会被删除并且不会保存输入或恢复...

我做错了什么？

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bCalculate = (Button) findViewById(R.id.bCalculate);
    display = (TextView) findViewById(R.id.TvDisplay);

    AdView ad = (AdView) findViewById(R.id.ad);
    ad.loadAd(new AdRequest());

    bCalculate.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

            inputManager.hideSoftInputFromWindow(getCurrentFocus()
                    .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);

            int error = 0;
            int anzahlGraden = 0;
            double d1 = 0.0, d2 = 0.0, d3 = 0.0, d4 = 0.0, d5 = 0.0, d6 = 0.0, d7 = 0.0, d8 = 0.0, d9 = 0.0, d10 = 0.0;

            EditText Grade1r = (EditText) findViewById(R.id.Grade1r);
            String Grade1 = Grade1r.getText().toString();

            EditText Grade2r = (EditText) findViewById(R.id.Grade2r);
            String Grade2 = Grade2r.getText().toString();

            EditText Grade3r = (EditText) findViewById(R.id.Grade3r);
            String Grade3 = Grade3r.getText().toString();

            EditText Grade4r = (EditText) findViewById(R.id.Grade4r);
            String Grade4 = Grade4r.getText().toString();

            EditText Grade5r = (EditText) findViewById(R.id.Grade5r);
            String Grade5 = Grade5r.getText().toString();

            EditText Grade6r = (EditText) findViewById(R.id.Grade6r);
            String Grade6 = Grade6r.getText().toString();

            EditText Grade7r = (EditText) findViewById(R.id.Grade7r);
            String Grade7 = Grade7r.getText().toString();

            EditText Grade8r = (EditText) findViewById(R.id.Grade8r);
            String Grade8 = Grade8r.getText().toString();

            EditText Grade9r = (EditText) findViewById(R.id.Grade9r);
            String Grade9 = Grade9r.getText().toString();

            EditText Grade10r = (EditText) findViewById(R.id.Grade10r);
            String Grade10 = Grade10r.getText().toString();

            if (Grade1.equals("")) {
                error++;
            } else {
                d1 = Double.parseDouble(Grade1);
                anzahlGraden++;
            }

            if (Grade2.equals("")) {
                error++;
            } else {
                d2 = Double.parseDouble(Grade2);
                anzahlGraden++;
            }

            if (Grade3.equals("")) {
                error++;
            } else {
                d3 = Double.parseDouble(Grade3);
                anzahlGraden++;
            }

            if (Grade4.equals("")) {
                error++;
            } else {
                d4 = Double.parseDouble(Grade4);
                anzahlGraden++;
            }

            if (Grade5.equals("")) {
                error++;
            } else {
                d5 = Double.parseDouble(Grade5);
                anzahlGraden++;
            }

            if (Grade6.equals("")) {
                error++;
            } else {
                d6 = Double.parseDouble(Grade6);
                anzahlGraden++;
            }

            if (Grade7.equals("")) {
                error++;
            } else {
                d7 = Double.parseDouble(Grade7);
                anzahlGraden++;
            }

            if (Grade8.equals("")) {
                error++;
            } else {
                d8 = Double.parseDouble(Grade8);
                anzahlGraden++;
            }

            if (Grade9.equals("")) {
                error++;
            } else {
                d9 = Double.parseDouble(Grade9);
                anzahlGraden++;
            }

            if (Grade10.equals("")) {
                error++;
            } else {
                d10 = Double.parseDouble(Grade10);
                anzahlGraden++;
            }

            if (error > 8) {
                display.setText("Please enter more then 2 grades.");
            } else {

                double gesamt = d1 + d2 + d3 + d4 + d5 + d6 + d7 + d8 + d9
                        + d10;

                double resultat = gesamt / anzahlGraden;

                display.setText("Your average is " + resultat);

            }

             mPrefs = getSharedPreferences(Grade1, 0);

             String rememberedText1 = mPrefs.getString("grade1r", "");
             grade1r = (EditText) findViewById(R.id.Grade1r);
             grade1r.setText(rememberedText1);
        }

    });

}
 protected void onPause() {
     super.onPause();

     SharedPreferences.Editor ed = mPrefs.edit();
     ed.putString("grade1r", grade1r.getText().toString());
     ed.commit();
 } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:55:44.640

//您仅在 onPause() 方法中将数据保存到共享首选项。

顺便说一句，当您单击按钮时，您正在阅读“grade1r”，它将为空，因此默认值为“”即将到来

```
String rememberedText1 = mPrefs.getString("grade1r", ""); 
```

如果您想检查默认打印，请这样做

```
String rememberedText1 = mPrefs.getString("grade1r", "myDefault value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:03:10.550

当您单击一个按钮时，您会从 SharedPreferences 中恢复一个值。您的默认值是一个空字符串。但是，您在暂停应用程序时会保存一个值。尝试在文本框中输入一些文本并关闭您的应用程序，然后启动您的应用程序并单击该按钮，文本应该会恢复。

# c++ - Irrlicht GUI 编辑器导入文件

> ID：10719981
> 
> 赞同：0
> 
> 时间：2012-05-23T12:31:40.653
> 
> 标签：c++, user-interface, irrlicht

我目前正在开发一个使用 irrlicht 库的软件。

我想使用 GUIEditor 来设计菜单，但我无法导入 GUIEditor 在我的项目中导出的文件。

这是我进行的方式：

```
gui->loadGUI("xml_file"); 
```

但这似乎不起作用。我的菜单未显示在我的视图中。

你有什么解决办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:44:07.010

GUI 编辑器目前缺少一个像样的菜单编辑器，这是我的错；我没来得及写一篇。

虽然包括对菜单编辑器的支持，如果您添加一个添加`menu_editor`和`contextmenu_editor`小部件的 GUI 工厂，那么 GUI 编辑器应该自动使用它们来显示菜单，但是在它们被编写之前，您必须在代码中实际创建菜单然后用于`saveGUI`将它们写成 XML。

# ubuntu - 访问 Ubuntu GDM 登录屏幕的 X 显示器

> ID：10719987
> 
> 赞同：5
> 
> 时间：2012-05-23T12:31:53.753
> 
> 标签：ubuntu, x11, ubuntu-10.04, ui-automation

总的来说，我正在尝试从单独的外壳将按键注入 Ubuntu 登录屏幕。我在标准登录屏幕上有机器（运行 Ubuntu 10.04），我也通过 SSH 连接到机器。我尝试了以下方法（来自 SSH shell）：

```
$ ps ax | grep X
 2844 tty8     Ss+    0:01 /usr/bin/X :0 -br -verbose -auth /var/run/gdm/auth-for-gdm-Gp2Rlq/database
$ export DISPLAY=:0
$ xdotool key Return
No protocol specified
Error: Can't open display: :0
Failed creating new xdo instance 
```

一旦机器登录到 Ubuntu，这个**完全相同的**方法就可以工作，但它不适用于登录屏幕。

理想情况下，我希望能够从另一个 shell 完成登录。我**不想**使用自动登录。我只想能够获取正确的显示，并执行登录所需的按键。

任何帮助将不胜感激。

**编辑：**

感谢 nm 的提示，我能够使用它：

```
export DISPLAY=:0
sudo xdotool key Return 
```

这完成了我想要的，但现在我想知道是否有办法在没有'sudo'的情况下完成这个？有没有我可以启用/禁用的标志来解决这个问题？

再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T13:46:12.350

您需要授权才能连接到显示器。注意`-auth`X 命令的参数。这就是权威所在。

试试这个：

```
export XAUTHORITY=/var/run/gdm/auth-for-gdm-<whatever-it-is>/database 
export DISPLAY=:0 
xdotool key Return 
```

您需要成为 root 才能访问授权文件。

查看`man xauth`（很多）更多信息。