# StackOverflow 问答 11524000-11524999

# objective-c - 通过一个逻辑步骤在 uitableview 中更新并插入带有动画的新行

> ID：11524007
> 
> 赞同：0
> 
> 时间：2012-07-17T13:54:14.527
> 
> 标签：objective-c, ios, uitableview

当我从服务器获取新数据时，我需要：

1.  更新现有行的现有数据`UITableView`和
2.  插入带有动画的新行。

问题是我不知道*第 1 步*`[UITableView reloadData]`何时完成，所以我可以开始*第 2 步*。

 **如何处理这种情况？

为简单起见，我更喜欢使用第*1 步*`[UITableView reloadData]`，但在一个逻辑步骤中实现这两个步骤的任何其他解决方案也很酷。

**更新**- 也许这是我的错误。

看来

-使用现有行信息更新数据模型

-重新加载数据

-使用新行信息更新数据模型

-insertWorsAtIndexPaths

现在工作正常。

我删除了一些在第 1 步后强制主线程刷新的“丑陋”方式，现在一切正常

（“丑陋的方式是调用 [NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.0f] ，出于某种原因我需要将它添加到过去的工作中）

想知道..如果现在一切都很好。如果仍然有问题，将更新。给您添麻烦了：）

**更新 2**

这就是我现在使用它的方式，并且似乎可以正常工作：

-更新数据模型中的现有行，然后调用

```
[UITableView reloadData]; 
```

- 向数据模型添加新行，然后调用

```
[UITableView beginUpdates]

[UITableView insertRowsAtIndexPath withRowAnimation]

[UITableView endUpdates] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:02:18.137

您可以使用**NSURLConnection**来做到这一点，

如果您设置委托，这些方法将在有响应时被调用：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response;

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
```

在这些方法中，您可以将数据添加到 tableview，并执行

```
[UITableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:48:30.033

您可以使用`reloadSections:withRowAnimation:`动画来更新您的行。或者您可以使用`reloadData`它`insertRowsAtIndexPaths:withRowAnimation:`取决于您如何获取数据。

检查[UITableView 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)**

# c# - 滚动条可见性

> ID：11524011
> 
> 赞同：4
> 
> 时间：2012-07-17T13:54:26.247
> 
> 标签：c#, winforms

我写了简单的代码：

```
namespace Test01
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.panel1 = new System.Windows.Forms.Panel();
            this.button1 = new System.Windows.Forms.Button();
            this.button2 = new System.Windows.Forms.Button();
            this.button3 = new System.Windows.Forms.Button();
            this.button4 = new System.Windows.Forms.Button();
            this.panel1.SuspendLayout();
            this.SuspendLayout();
            // 
            // panel1
            // 
            this.panel1.AutoScroll = true;
            this.panel1.Controls.Add(this.button4);
            this.panel1.Controls.Add(this.button3);
            this.panel1.Controls.Add(this.button2);
            this.panel1.Location = new System.Drawing.Point(24, 13);
            this.panel1.Name = "panel1";
            this.panel1.Size = new System.Drawing.Size(206, 43);
            this.panel1.TabIndex = 0;
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(89, 62);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 1;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // button2
            // 
            this.button2.Location = new System.Drawing.Point(3, 3);
            this.button2.Name = "button2";
            this.button2.Size = new System.Drawing.Size(75, 23);
            this.button2.TabIndex = 2;
            this.button2.Text = "button2";
            this.button2.UseVisualStyleBackColor = true;
            // 
            // button3
            // 
            this.button3.Location = new System.Drawing.Point(84, 3);
            this.button3.Name = "button3";
            this.button3.Size = new System.Drawing.Size(75, 23);
            this.button3.TabIndex = 3;
            this.button3.Text = "button3";
            this.button3.UseVisualStyleBackColor = true;
            // 
            // button4
            // 
            this.button4.Location = new System.Drawing.Point(165, 3);
            this.button4.Name = "button4";
            this.button4.Size = new System.Drawing.Size(75, 23);
            this.button4.TabIndex = 4;
            this.button4.Text = "button4";
            this.button4.UseVisualStyleBackColor = true;
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(251, 98);
            this.Controls.Add(this.button1);
            this.Controls.Add(this.panel1);
            this.Name = "Form1";
            this.Text = "Form1";
            this.panel1.ResumeLayout(false);
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Panel panel1;
        private System.Windows.Forms.Button button4;
        private System.Windows.Forms.Button button3;
        private System.Windows.Forms.Button button2;
        private System.Windows.Forms.Button button1;
    }
} 
```

和：

```
namespace Test01
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            panel1.Controls.Remove(button4);
        }
    }
} 
```

我运行它并得到以下结果：

![样本](../Images/ffa2ee4efaad5348b5a2c44befae3c8e.png)

在第一列，我只需按 button1 - 它按预期工作。

在第二列，我移动滚动条并按下 button1 - button4 消失了，但滚动条仍然存在。当我折叠和展开窗口滚动条消失了。

在第三列，我打开经典主题，然后按 button1 - 一切正常。

我已阅读[stackoverflow1](https://stackoverflow.com/questions/7088877/how-to-fix-scrollbars-when-the-window-or-container-is-resized) [stackoverflow2](https://stackoverflow.com/questions/632504/scrollbar-still-is-painted-after-it-should-be-removed) [stackoverflow3](https://stackoverflow.com/questions/5565653/scrollbar-does-not-update-on-changing-the-scroll-value)并尝试使用验证、无效、更新、刷新 - 但它没有帮助。那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:00:00.260

在移除按钮之前将滚动条的位置重置为零：

```
 private void button1_Click(object sender, EventArgs e)
    {
        panel1.HorizontalScroll.Value = 0;
        panel1.Controls.Remove(button4);
    } 
```

**编辑**

从那以后，我发现当滚动条的值为零时，这种方法并不总是有效。我尝试了各种方法来强制它始终清除滚动条，但唯一似乎可靠工作的是在移除按钮之前将其值设置为 1 然后 0：

```
 panel1.HorizontalScroll.Value = 1;
        panel1.HorizontalScroll.Value = 0;
        panel1.Controls.Remove(button4); 
```

这很丑陋，但似乎有效。我个人认为这是框架中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:22:20.153

尝试用 FlowLayoutPanel 替换您的面板。使用与您要更换的面板相同的尺寸。在 FlowLayoutPanel 控件上，设置`AutoScroll = True`和`FlowDirection = TopDown`。

面板应该为您移动控件，您也不必担心滚动条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:44:19.580

尝试通过 BeginInvoke 调用刷新方法，使其重新进入窗口循环：

```
this.BeginInvoke((Action)scrollBar.PerformLayout); 
```

从当前方法调用它（不调用）有时可以避免重新渲染。

# php - 联系表格未检测到字段内容

> ID：11524016
> 
> 赞同：0
> 
> 时间：2012-07-17T13:54:38.893
> 
> 标签：php, forms, field, detect, contact-form

我对 PHP 的了解**非常**有限，所以我使用了联系表单生成器，但它无法正常工作。电子邮件确实发送成功，但仅检测到“电子邮件”和“选项”弹出窗口。其他任何东西都返回空。

这是代码。

表单.php

```
<?=$message?>

<form id="FormName" action="send.php" method="post" name="FormName">

<table width="448" border="0" cellspacing="2" cellpadding="0">

<tr><td width = "150" align="right"><label for="EmailFrom">Your E-mail</label></td>

<td><input id="EmailFrom" type="text" name="EmailFrom" size="25"></td></tr>

<tr><td width = "150" align="right" valign="top"><label for="text_field">text field</label></td>

<td valign="top"><input id="text_field" name="text_field" type="text" size="25" value="<?=$text_field?>" maxlength="255"></td></tr><tr><td width = "150" align="right" valign="top"><label for="hello_world_1">Hello world 1</label></td>

<td valign="top"><input id="hello_world_1" name="hello_world_1" type="checkbox" value="Y"></td></tr><tr><td width = "150" align="right" valign="top"><label for="hello_world_2">Hello world 2</label></td>

<td valign="top"><input id="hello_world_2" name="hello_world_2" type="checkbox" value="Y"></td></tr><tr><td width = "150" align="right" valign="top"><label for="hello_world_3">Hello World 3</label></td>

<td valign="top"><input id="hello_world_3" name="hello_world_3" type="checkbox" value="Y"></td></tr><tr><td width = "150" align="right" valign="top"><label for="text_area">text area</label></td>

<td valign="top"><textarea id="text_area" name="text_area" rows="4" cols="40"><?=$text_area?></textarea></td></tr><tr><td width = "150" align="right" valign="top"><label for="popup">popup</label></td>

<td valign="top"><select id="popup" name="popup" size="1">

<option value="Option 1"<?php if($popup == "Option 1"){echo " selected";}?>>Option 1</option>

<option value="Option 2"<?php if($popup == "Option 2"){echo " selected";}?>>Option 2</option>

<option value="Option 3"<?php if($popup == "Option 3"){echo " selected";}?>>Option 3</option>

</select></td></tr><tr><td width = "150" align="right" valign="top"><label for="date">date</label></td>

<td valign="top"><input id="date" name="<?=$date?>" type="text" size="25" value="<?=$date?>" maxlength="255"></td></tr><tr><td width = "150" align="right" valign="top"><label for="hidden">hidden</label></td>

<td valign="top"><input type="hidden" name="hidden" value="<?=$hidden?>"></td></tr><tr><td width = "150" align="right" valign="top"><label for="image">image</label></td>

<td valign="top"><input type="hidden" name="hidden" value="<?=$hidden?>"></td></tr><tr>

<td width="150"></td>

<td>

<input type="submit" name="submitButtonName" value="Send E-mail"></td>

</tr>

</table>

</form> 
```

发送.php

```
<?php

$EmailFrom = $_POST['EmailFrom'];

$text_field = trim($_POST['text_field']);

$hello_world_1 = trim($_POST['hello_world_1']);

$hello_world_2 = trim($_POST['hello_world_2']);

$hello_world_3 = trim($_POST['hello_world_3']);

$text_area = trim($_POST['text_area']);

$popup = trim($_POST['popup']);

$date = trim($_POST['date']);

$hidden = trim($_POST['hidden']);

$image = trim($_POST['image']);

$EmailTo = "nomail@nomail.com";

$Subject = ""; /// Add a subject

$validationOK=true;

if (trim($EmailFrom)=="") $validationOK=false;

if (!$validationOK) {

  echo "Error! E-mail was not sent. Please check you code.";

  exit;

}

$Body = "";

$Body .= "text field:\n$textfield\n\n";

$Body .= "Hello world 1:\n$helloworld1\n\n";

$Body .= "Hello world 2:\n$helloworld2\n\n";

$Body .= "Hello World 3:\n$helloworld3\n\n";

$Body .= "text area:\n$textarea\n\n";

$Body .= "popup:\n$popup\n\n";

$Body .= "date:\n$date\n\n";

$Body .= "hidden:\n$hidden\n\n";

$Body .= "image:\n$image\n\n";

if($Subject == NULL) {$Subject = "From $EmailFrom";}

$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

if ($success){ echo "Success! Your e-mail was sent!";}

else{  echo "Error! Your e-mail was not sent!";}

?> 
```

为什么它不起作用？此外，如果您可以推荐一个有效的 php 表单生成器，那将非常有帮助。我需要复选框和弹出/单选按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:05:53.983

您的变量被命名为“$text_field”（带下划线），但是当附加到 $Body 时，您不使用下划线，例如“$textfield”。因此，甚至没有设置变量“$textfield”，即为空。

# java - 在没有“/”运算符的情况下在 Java 中实现除法函数

> ID：11524022
> 
> 赞同：-3
> 
> 时间：2012-07-17T13:54:51.863
> 
> 标签：java

有人可以就如何做到这一点提出建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:56:18.103

由于除法只是一系列重复的减法，我认为你可以做到这一点。（在你请我吃饭之前不要放弃完整的代码）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:57:29.283

你可以使用一个循环，每次迭代减去你除以一次的数量，并记录你能够做到这一点的次数。这应该非常接近整数除法，尽管效率很低。

# vb6 - Microsoft Visual Basic 6.0 升级评估工具错误

> ID：11524024
> 
> 赞同：1
> 
> 时间：2012-07-17T13:54:59.843
> 
> 标签：vb6, vb6-migration

这是我第一次使用升级评估工具，执行分析时出现以下错误：

> 分析过程中出现问题。请检查以下错误消息：
> 
> 你调用的对象是空的。
> 
> 你想退出吗？

这是我在 VB 6.0 中开发的代码

```
Private Sub Command1_Click()
Dim line As String

Dim name As String
name = Text1.Text

If Text1.Text = Null Or Text1.Text = "" Then
MsgBox ("Please enter your name")
Else
    MsgBox ("Welcome, " + Text1.Text)
    If Option1.Value = True Then
    line = "Admin"
    MsgBox (name + ", you have selected the following items " + line)

    ElseIf Option2.Value = True Then
    line = "User"
    MsgBox (name + ", you have selected the following items " + line)

    Else
    MsgBox ("You have not selected any options! Please select one of the options given in the right panel")
    End If
'
End If

End Sub 
```

我还尝试了一个简单的 hello world 应用程序，但它仍然给我同样的错误。注意：我的计算机上没有 Visual Studio。我正在使用 Windows XP。VB 6.0。.Net 框架 1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:21:43.147

Microsoft 要求声明需要 VB6。这可能只意味着运行时，但是... [Visual Basic 6.0 到 Visual Basic .NET 升级评估工具](http://www.microsoft.com/en-us/download/details.aspx?id=9639)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T15:24:33.777

除了VB6的要求外，该工具还依赖于msvcp71.dll，这是属于Microsoft C Runtime Library的一个模块。

确保您拥有该模块或从 Internet 的某个位置获取它（我刚刚从 dll-files.com 下载），然后复制到 c:\windows\system32。

您还需要安装 Excel 2003，该工具使用它来生成报告。

# django - Django 管理员个人访问

> ID：11524026
> 
> 赞同：0
> 
> 时间：2012-07-17T13:55:06.477
> 
> 标签：django, django-authentication

我有一个电话簿应用程序 - 我们组织中的一个内部应用程序。

我正在调查是否可以让员工更新他们自己的记录。

djangos 身份验证系统是否只允许访问您自己的详细信息。

IE - 如果我在 Active Directory 中查找他们的用户名，并且它对应于我拥有的用户名 - 然后让他们编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:06:25.387

管理界面不直接支持此功能。

如果您正在谈论编辑`django.contrib.auth.models.User`，那么我建议您只使用常规视图而不是管理界面。您也许可以注入自定义验证来检查它，`request.user == user`但它很hacky。

如果您正在谈论编辑 UserProfile 对象，那么将自定义验证添加到管理表单以检查授权会更容易。

# permissions - 复制现有用户的 Sybase 权限？

> ID：11524032
> 
> 赞同：0
> 
> 时间：2012-07-17T13:55:24.503
> 
> 标签：permissions, sybase

如何将所有现有 Sybase 用户的权限复制到新帐户？例如，有些表只有 select 权限，许多 proc 有执行权限等。原始帐户对数百个数据库对象中的几十个表和几个存储的 proc 的访问权限有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:58:01.080

如果您要多次执行此操作：创建一个角色，授予该角色权限，并将用户分配给该角色。

如果在数据库中审核谁在做什么并不重要：将新用户别名为数据库中的旧用户

```
sp_dropuser 'NEW_USERNAME'
go
sp_addalias 'NEW_USERNAME', 'EXISTING_USERNAME'
go 
```

sp_helprotect EXISTING_USERNAME 将打印出该用户的权限列表。您可以捕获该输出并使用它将这些权限添加到新帐户。

***以下步骤需要编辑系统表，请注意避免破坏您的系统。确保您有良好的备份。****

用户权限存储在 sysprotects 表中。理论上，您应该能够：

1.  创建新用户登录
2.  将用户添加到数据库
3.  添加任何角色或别名
4.  从 sysprotects 中选择权限，其中 uid = EXISTING_USER_ID 进入临时表。
5.  更新临时表并将 uid 从 EXISTING_USER 更改为 NEW_USER 的 uid
6.  使用 sp_configure 允许更新系统表
7.  使用更新的临时表将记录插入 sysprotects
8.  使用 sp_configure 禁止更新系统表

**免责声明** 请在生产服务器上尝试之前测试它，因为我没有测试它来验证它是否有效。

# extjs4 - Extjs4 Formpanel 数据存储在变量中

> ID：11524033
> 
> 赞同：0
> 
> 时间：2012-07-17T13:55:29.000
> 
> 标签：extjs4

我目前有一个没有商店的表格。我想要实现的是单击该面板中的一个按钮，将该表单的数据对象存储在一个变量中。如何做到这一点？

这是我的代码：

```
Ext.define('Nits.view.PropertyPanelCmp', {
            extend:'Ext.form.Panel', 
            alias : 'widget.propertypanelCmp',
            id: 'propertypanelCmp',
            title: 'File properties',
            height: 500,
            width: 200,
            draggable: false,
            closable: false,    
            //autoScroll:true,
            layout: {
                align: 'stretch',
                type: 'vbox'
            },
            fieldDefaults: {
                labelWidth: 65
            },
            bodyPadding: 10,    

            initComponent: function() {
                var me = this;

                me.items = [
                {
                    xtype: 'fieldset',
                    height: 108,
                    title: 'Common Properties',
                    items: [
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Name',
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Type',
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Age',
                            anchor: '100%'
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    title: 'Level1 Properties',
                    items: [
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Sample1',
                            anchor: '100%'
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Recursive',
                       //     boxLabel: 'Box Label',
                            anchor: '100%'
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Delete',
                     //       boxLabel: 'Box Label',
                            anchor: '100%'
                        },
                        {
                            xtype: 'checkboxfield',
                            fieldLabel: 'Read Only',
                         //   boxLabel: 'Box Label',
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Include',
                            anchor: '100%'
                        },
                        {
                            xtype: 'textfield',
                            fieldLabel: 'Exclude',
                            anchor: '100%'
                        }
                    ]
                },
                {
                    xtype: 'fieldset',
                    title: 'Level2 Properties',
                    items: [
                        {
                            xtype: 'combobox',
                            fieldLabel: 'File B',
                            anchor: '100%'
                        }
                    ]
                },
                {
                    xtype: 'button',
                    text: 'Apply',
                    listeners: {
                        click: {
                            fn: me.onButtonClick,
                            scope: me
                        }
                    }
                }
            ];
                me.callParent(arguments);
            },
            //Here do what you want to when click on Apply button
            onButtonClick: function(button, e, options) {
                alert('Sample');
            }
}
); 
```

此表单元素需要 json 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:52:45.330

您应该使用[来](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-getFieldValues)`Ext.form.Basic.getFieldValues`获取所需的对象（如文档中所述），然后将其转换为 JSON。

按照 MVC 模式，我会将按钮处理程序放在控制器中，而不是在视图中，因此它看起来像这样：

```
Ext.define('Nits.controller.MyController', {
    extend: 'Ext.app.Controller',

    views:  [
        'PropertyPanelCmp',
    ],

    init: function() {
        var me = this;

        me.control({

            'propertypanelCmp button[text=Apply]': {

                click: function(button) {
                    var form = button.up('propertypanelCmp').getForm(),
                        values = form.getFieldValues(),
                        json = Ext.JSON.encode(values);

                    console.log(json);
                    alert(json);
                }
            }
        });
    }
} 
```

我想如果您真的想要视图中的按钮处理程序，它可能看起来像这样：

```
//Here do what you want to when click on Apply button
onButtonClick: function(button, e, options) {
    var form = this.getForm(),
        values = form.getFieldValues(),
        json = Ext.JSON.encode(values);

    console.log(json);
    alert(json);
} 
```

**编辑**

正如您所注意到的，表单中的字段必须具有有效的`inputId`配置。`getFieldValues`这将代表调用返回的键/值对的“键”部分。

# php - 如何在codeigniter中做mvc

> ID：11524036
> 
> 赞同：0
> 
> 时间：2012-07-17T13:55:38.573
> 
> 标签：php, model-view-controller, codeigniter

我已经使用 codeIgniter 5 个月了，我想改进我编写代码的方式。这是来自控制器的用户方法：

```
function create_user(){ 

         $user_data = array(
            'username' => 'Username', 'firstname' => 'Firstname',
            'middlename' => 'Middlename', 'lastname' => 'Lastname',
            'password' => 'Password', 'department' => 'Department', 
            'role' => 'Role'
        );

        foreach ($user_data as $key => $value) {
            $this->form_validation->set_rules($key, $value, 'required|trim');
        }

        if ($this->form_validation->run() == FALSE) {
            $departments = $this->user_model->list_departments();
            $it_roles = $this->user_model->list_roles(1);
            $tc_roles = $this->user_model->list_roles(2);
            $assessor_roles = $this->user_model->list_roles(3);

            $data['data'] = array('departments' => $departments, 'it_roles' => $it_roles, 'tc_roles' => $tc_roles, 'assessor_roles' => $assessor_roles);

            $data['content'] = 'admin/create_user';

            parent::error_alert();
            $this->load->view($this->_at, $data);

        } else {
            $username = $this->input->post('username');
            $salt = $this->bcrypt->getSalt();
            $hashed_password = $this->bcrypt->hash($this->input->post('password'), $salt);
            $fname = $this->input->post('firstname');
            $mname = $this->input->post('middlename');
            $lname = $this->input->post('lastname');
            $department = $this->input->post('department');
            $role = $this->input->post('role');

            $user_login     = array($username, $hashed_password, $salt);
            $user_profile   = array($fname, $mname, $lname);
            $this->user_model->register_user($user_login, $user_profile, $department, $role);

            $data['content'] = 'admin/view_user';

            parent::success_alert(4, 'User Sucessfully Registered!', 'You may now login using your account');

            $data['data'] = array('username' => $username, 'fname' => $fname, 'mname' => $mname, 'lname' => $lname, 'department' => $department, 'role' => $role);
            $this->load->view($this->_at, $data);
        }

    } 
```

我基本上在一个控制器中完成了获取输入、输入验证、呈现错误或成功的视图以及其他内容。这样做的更好方法是什么，你建议我如何分解这个功能。有人说我应该在视图和控制器之间添加一个路由器/调度程序来处理, `POST`，`GET`但是我不知道该怎么做。`COOKIE``SESSION`

任何有助于我掌握正确做事方式的代码示例和建议都将被接受为答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:05:32.343

您还需要在 POST 请求后使用重定向，以免[重复提交](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

```
function create_user() {

    $params = $this->input->post();

    if( !$this->user_model->valid_user_params( $params, $errors ) )
    {
        //Place errors in flash data
        //redirect and exit
    }

    if( !$this->user_model->register_user($params, $errors) )
    {
        //Place errors in flash data
        //redirect and exit
    }

    //redirect and exit

}

function created_user() {
    //read flash data
    //show some views with the errors or success message
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:10:40.377

我做了一些小的改动：不设置不必要的变量，将用户数据分组到一个数组中等等。这就是我要做的方式。我会说，除此之外，你一路走好。

```
<?php 
function create_user()
{ 
     $user_data = array ('username' => 'Username', 'firstname' => 'Firstname', 'middlename' => 'Middlename', 'lastname' => 'Lastname', 'password' => 'Password', 'department' => 'Department', 'role' => 'Role');

    foreach ($user_data as $key => $value) {
        $this->form_validation->set_rules($key, $value, 'required|trim');
    }

    if ($this->form_validation->run() == FALSE)
    {

        $data['data'] = array(  'departments'   => $this->user_model->list_departments(), 
                                'it_roles'      => $this->user_model->list_roles(1), 
                                'tc_roles'      => $this->user_model->list_roles(2), 
                                'assessor_roles'=> this->user_model->list_roles(3)
                        );

        $data['content'] = 'admin/create_user';

        parent::error_alert();
        $this->load->view($this->_at, $data);

    } 
    else 
    {
        $salt    = $this->bcrypt->getSalt();

        $user['username']       = $this->input->post('username');
        $user['hashed_password']= $this->bcrypt->hash($this->input->post('password'), $salt);
        $user['fname']          = $this->input->post('firstname');
        $user['mname']          = $this->input->post('middlename');
        $user['lname']          = $this->input->post('lastname');
        $user['department']     = $this->input->post('department');
        $user['role']           = $this->input->post('role');

        $user_login     = array($user['username'], $user['hashed_password'], $salt);
        $user_profile   = array($user['fname'], $user['mname'], $user['lname']);
        $this->user_model->register_user($user_login, $user_profile, $department, $role);

        $data['content'] = 'admin/view_user';

        parent::success_alert(4, 'User Sucessfully Registered!', 'You may now login using your account');

        unset($user['hashed_password']); // Just to be sure 
        $this->load->view($this->_at, $user);
    }

} 
```

# django - 如何添加新对象（表单）？

> ID：11524040
> 
> 赞同：0
> 
> 时间：2012-07-17T13:55:45.220
> 
> 标签：django, django-forms

我有表格：

```
class ProjektForm(forms.ModelForm):

    class Meta:
        model = MyModel 
```

并查看：

```
@login_required
def add_new(request):
    data = dict()

    if request.method == 'POST':
        form = MyForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
    else:
        form = MyForm()

    data.update({ 'form': form })

    t = loader.get_template('form.html')
    c = RequestContext(request, data)
    return HttpResponse(t.render(c)) 
```

但是当我单击“提交”时 - 系统显示错误：“需要 id”。它是新对象，没有“id”。

怎么做？是否可以在一个视图中添加和编辑对象？

# c++ - 主机上的 getaddrinfo() 会返回多个 IPv4 地址吗？

> ID：11524044
> 
> 赞同：2
> 
> 时间：2012-07-17T13:56:02.363
> 
> 标签：c++, sockets

假设我`getaddrinfo()`如下调用：

```
addrinfo hints;
addrinfo* res = NULL;

hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;

getaddrinfo(NULL, "http", &hints, &res); 
```

当前是否有可能此结果包含多个具有 IPv4 地址的结果？我能想到的唯一原因可能是多个设备具有单独的连接，但我有一半期望它只返回主连接的地址或它碰巧使用的一个连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:57:47.803

是的。

**getaddrinfo 上的[手册页](http://linux.die.net/man/3/getaddrinfo)有以下关于该主题的内容**

链表可能具有多个 addrinfo 结构的原因有多种，包括： 网络主机是多宿主的，可通过多种协议访问（例如，AF_INET 和 AF_INET6）；或者可以从多种套接字类型（例如，一个 SOCK_STREAM 地址和另一个 SOCK_DGRAM 地址）获得相同的服务。通常，应用程序应尝试按照返回的顺序使用地址。getaddrinfo() 中使用的排序函数在 RFC 3484 中定义；可以通过编辑 /etc/gai.conf（自 glibc 2.5 起可用）来调整特定系统的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-24T04:27:28.117

我也有这种困惑，我做了一些研究。

引自*Linux 编程接口*

```
int getaddrinfo(const char * host , const char * service ,
const struct addrinfo * hints , struct addrinfo ** result ); 
```

> 结果参数返回结构列表，而不是单个结构，因为主机和服务可能有多种组合，对应于 、 和 中指定`host`的`service`条件 `hints`。**例如，可以为具有多个网络接口的主机返回多个地址结构**。

我用自己的域进行了测试`copyqwer.com`

DNS设置：

```
Type    Name        Value               TTL 
A       @           23.106.150.74       600 seconds 
A       @           111.222.17.173      600 seconds 
```

并`getaddrinfo`返回具有这 2 个不同 ip 地址的 addr 结构。

一个完整的例子。[https://onlinegdb.com/ry1cdoAKr](https://onlinegdb.com/ry1cdoAKr)

我的电脑上的输出（我不知道为什么`UDP`我的本地电脑上没有输出，但这没关系）

```
/home/*****/CLionProjects/APUE/cmake-build-debug/APUE copyqwer.com http
flags canon family inet type stream protocol TCP
    host copyqwer.com address 111.222.17.173 port 80
flags canon family inet type stream protocol TCP
    host - address 23.106.150.74 port 80 
```

# datetime - 如何在 xforms 中使用adjust-dateTime-to-timezone 函数？

> ID：11524046
> 
> 赞同：0
> 
> 时间：2012-07-17T13:56:12.497
> 
> 标签：datetime, xforms

我们有一个特殊的功能，它应该将日期和时间值转换为用户的本地时区。我了解到在 xfdl 版本 8 中已经提供了 adjust-dateTime-to-timezone() 日期函数，因此我尝试使用它。

但是，我不断收到错误 Tue Jul 17 21:49:28 2012 0 Viewer : xforms-compute-exception:adjust-dateTime-to-timezone(../utcDT)。

这是实际的源代码。

```
<XFDL xmlns:custom="http://www.ibm.com/xmlns/prod/XFDL/Custom" xmlns:designer="http://www.ibm.com/xmlns/prod/workplace/forms/designer/2.6" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xfdl="http://www.ibm.com/xmlns/prod/XFDL/8.0" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns="http://www.ibm.com/xmlns/prod/XFDL/8.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<globalpage sid="global">
    <global sid="global">
        <designer:date>20120717</designer:date>
        <formid>
            <title/>
            <serialnumber></serialnumber>
            <version>1.0.0</version>
        </formid>
        <pageloading>
            <ondemand>enable</ondemand>
        </pageloading>
        <transmitformat>application/vnd.xfdl;content-encoding=base64-gzip</transmitformat>
        <saveformat>application/vnd.xfdl;content-encoding=base64-gzip</saveformat>
        <xformsmodels>
            <xforms:model>
                <xforms:instance id="formData" xmlns="">
                    <root>
                        <utcDT>2011-09-01T23:00:01Z</utcDT>
                        <!-- UTC dateTime -->
                        <localDT>2011-09-01T23:00:01Z</localDT>
                        <!-- local dateTime with the timezone (accounting for daylight saving correction) -->
                    </root>
                </xforms:instance>
                <xforms:bind nodeset="utcDT | localDT" type="xforms:dataTime"/>
                <xforms:bind calculate="adjust-dateTime-to-timezone(../utcDT)" nodeset="localDT"/>
            </xforms:model>
        </xformsmodels>
        <history>
            <editors>
                <editor minversion="3.5.1" version="4.0.0">IBM Forms Designer</editor>
            </editors>
        </history>
    </global>
</globalpage>
<page sid="PAGE1">
    <global sid="global">
        <label>PAGE1</label>
    </global>
    <label sid="l2">
                <xforms:output ref="localDT">
                    <xforms:label>Local dateTime = </xforms:label>
                </xforms:output>
    </label>
    <spacer sid="vfd_spacer">
        <itemlocation>
            <x>960</x>
            <y>1260</y>
            <width>1</width>
            <height>1</height>
        </itemlocation>
    </spacer>
</page> 
```

非常感谢您的帮助！先感谢您！

从凯利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:45:17.003

的第一个参数[`adjust-dateTime-to-timezone`](http://goo.gl/Fn7sZ)must 是 an`xs:dateTime`并且您在这里传递给它一个元素。因此，您需要编写：

```
adjust-dateTime-to-timezone(xs:dateTime(../utcDT)) 
```

# objective-c - 将图像永久添加到应用程序包

> ID：11524049
> 
> 赞同：0
> 
> 时间：2012-07-17T13:56:21.473
> 
> 标签：objective-c, ipad, ios5

我在 Supporting Files 文件夹（Xcode 4.3）中添加了一些我需要在我的应用程序中使用的图像。但是当我将该代码传输到其他机器（比如我的主管）时，这些图像不可用，因为我在该列表中只有它们的名称以红色显示。如何永久添加它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:04:07.040

在添加文件窗口中，选择图像后，确保选中 distination 复选框，此复选框指示您是否要将所选项目复制到 distention 组文件夹中，或者只是想引用这些项目

所以选中复选框，这会将项目永久复制到应用程序包

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:00:38.947

红色只是意味着 XCode 找不到图像。

仅仅因为一个文件出现在 Xcode 中的组中并不意味着它与组中的其他文件位于同一文件夹中:(

我怀疑您已将图像添加到计算机上其他位置的组中。然后你给你的老板一份你的应用程序文件夹的副本，但该文件夹不包含那些图像！

当您在 XCode 中单击文件时，您可以在右侧检查器中看到文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:05:50.303

将您的图像放入/复制到 xcode 的项目文件夹（/Users/SomeUser/mySuperProject/）中，然后将图像添加到您的项目（支持文件组或其他组）。之后，您可以在任何地方使用此项目。

# c# - while (k >= 0 && arr[k] > 0) 安全吗？

> ID：11524051
> 
> 赞同：2
> 
> 时间：2012-07-17T13:56:27.320
> 
> 标签：c#, coding-style

是

```
while (k >= 0 && arr[k] > 0) 
```

安全的？

当 k 在范围内并且 arr[k] > 0 时它会循环。但我不知道这是否是编码的好习惯。我知道如果我们这样做

```
while (arr[k] > 0 && k >= 0) 
```

这将是一场灾难。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:58:40.333

`&&`短路是安全的。如果`k`小于零，则不会对其进行索引`arr`。

这可能是不安全的，因为您的 while 循环体可能不会`k`正确递减，从而导致无限循环。`k`或者如果超出`arr`'s bounds可能不安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T14:01:00.567

您还应该关心数组大小：

```
while (k >= 0 && k < arr.length && arr[k] > 0) 
```

将是一个更安全的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T13:58:37.187

是的，这是一个很好的做法。事实上，这也是发明短路 `&&`算子的部分原因。运算符从左到右计算其子表达式，并在找到错误的子表达式时停止。这正是您想要的；运算符`&&`允许您在一行中表达这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:09:54.487

关于表达：

> 而 (k >= 0 && arr[k] > 0) { ... }

不，这**不安全。**

该表达式`k >= 0 && arr[k] > 0`在某种程度上是安全的，它确保仅`arr[k]`使用正索引 of （因为在这些情况下，不会评估第二个操作数`&&`的快捷方式值）。`k < 0``arr[k] > 0`

**但**请注意，**不能保证**索引**超出范围**（例如 for `k >= arr.length`） - 并且 arr 也可能是`null`。因此，您可以获得一个`IndexOutOfRangeException`或一个`NullReferenceException`- 如果未处理，您的应用程序将中断。

为避免这种情况，请使用

```
if (k >=0 && arr != null) 
{   
    while (k<arr.Length && arr[k] > 0) { ... k++; }
} 
```

在上面的代码中，如果`arr`是`null`，则可以跳过循环，因为数组中没有元素。如果超出数组长度（即`k>=arr.length`），则`arr[k] > 0`不再检查（从而避免发生异常）。

我已将表达式的不变部分`k >=0 && arr != null`从循环表达式中取出，因为没有必要（并且运行速度会更慢）在循环的每次迭代中对其进行评估。

与`for`循环相同：

```
if (k >=0 && arr != null) 
    for (; var k=0; k<arr.Length && arr[k] > 0; k++) { ... } 
```

请注意，因为您不是从 0 开始，所以我跳过了初始化`var k=0`，我假设您已经在源代码的上方某处完成了初始化。

* * *

**除此之外，还有一些附加信息**- 如果您想了解有关逻辑运算符和副作用的一些有趣细节，请继续阅读。

在**C/C++/C#**`&`中，重要的是要知道vs.`&&`和`|`vs. `||`:之间的区别，`&`并`|`“按位”评估整个表达式，而`&&`如果`||`结果已经清楚则停止评估（如果有任何部分，逻辑`and`不能是`true`表达式是；如果表达式的任何部分是 )，则`false`逻辑`or`不能是)。`false``true`

**但是，在某些情况下**，您也需要**“非快捷方式”版本`&`**。假设您想要将字符串数组转换为整数数组，并且您想要转换每个可以转换的值，即使有些值不能转换为整数（其他值应保持 0） - 如下**例所示：**

```
void Main()
{
    var sArr = new string[] {"4", "2", "x", "y", "10", "11"};
    var iArr = new int[sArr.Length];
    bool bCheck = true;
    for (var i=0; i<sArr.Length; i++)
    {
        int value=0;
        // need to use & instead of && here:
        bCheck = bCheck && int.TryParse(sArr[i], out value);
        iArr[i]=value;
    };  
    if (bCheck==true) 
    {
        Console.WriteLine("All numbers are okay.");
    }
    foreach (var n in iArr) Console.Write(n.ToString() + " ");
    Console.WriteLine();
} 
```

此代码的目的是将字符串数组中的值一一转换为 int 并将它们存储在整数数组中 - 如果元素不包含有效整数，则它存储值 0 代替。

我们在这里得到的输出是

```
4 2 0 0 0 0 
```

这不是我们所期望的，因为 10 和 11 也是有效的整数并且应该被转换，相反我们得到了它们的 0 和 0。

为了得到我们期望的结果，即

```
4 2 0 0 10 11 
```

我们需要替换`&&`为`&`：

```
bCheck = bCheck & int.TryParse(sArr[i], out value); 
```

**这里有什么区别？**

如果您在`&&`上面的语句中使用，那么只要 bCheck 计算结果为 false，快捷方式就会完成——这通常是正确的，因为这样我们就不必再检查表达式了，因为不可能被计算为 true .

但也会发生的情况是，由于我们有快捷方式，`int.TryParse`不再被调用，因此值不会从函数中传递出去——循环中的所有后续调用都将评估为 0，而不管`sArr[i]`.

这是我们在这里遇到的意外副作用，可以通过强制评估每个表达式来修复（通过使用`&`）。

# c# - 找不到自动地图参考 C#

> ID：11524052
> 
> 赞同：3
> 
> 时间：2012-07-17T13:56:28.677
> 
> 标签：c#, automapper

```
while (rdr.Read())
{
    List<PackageDetailFile> pkgFiles = rdr.AutoMap <PackageDetailFile> ().ToList(); 
    foreach (PackageDetailFile pkgf in pkgFiles)
    {
         PackageDetail pkgd = getPackageDetail((long)pkgf.PackageDetailId);
    } 
```

我有一个错误，如：

> “System.Data.SqlClient.SqlDataReader”不包含“AutoMap”的定义，并且找不到接受“System.Data.SqlClient.SqlDataReader”类型的第一个参数的扩展方法“AutoMap”（您是否缺少 using 指令还是汇编参考？）

而且我找不到 AutoMap 参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:24:16.377

简单的答案是添加对`AutoMapper`库的引用。你如何做到这一点，如果你搜索，你可以很容易地找到。我会在你的路上帮助你：http: [//msdn.microsoft.com/en-us/library/wkze6zky](http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.100).aspx) (v=vs.100).aspx有一个相当完整的详尽的操作方法，并且[https:// /stackoverflow.com/a/2157158/64976](https://stackoverflow.com/a/2157158/64976)是对有关如何添加引用的问题的更简洁的答案。

一个更广泛的答案可能是建议您返回`AutoMapper`文档、.NET 开发和项目结构的基础知识，并学习如何添加对下载的第三方程序集的引用。[http://automapper.org/](http://automapper.org/)是开始获取有关`AutoMapper`其自身信息的好地方。

# php - 使用 Amazon SNS/SQS 在 PHP 中推送通知？

> ID：11524057
> 
> 赞同：11
> 
> 时间：2012-07-17T13:56:49.047
> 
> 标签：php, amazon-web-services, push-notification, amazon-sqs, amazon-sns

在我的网站上，我想像 Stackoverflow 那样推送评论通知。Amazon SNS/SQS 似乎提供了一个框架来执行此操作，但我很难在 Web 上找到任何代码/解释，而不是“hello world”等价物。

从阅读 AWS SNS/SQS 文档看来，我需要以下内容：

逻辑：

1.  发表评论/回答新问题
2.  创建主题（仅适用于第一条评论/答案）
3.  发布消息
4.  订阅主题

发表评论的页面上的 PHP (http://mysite.com/postCommentOrAnswer.php)：

```
$comment=$_POST['comment']; //posted comment
require_once 'application/third_party/AWSSDKforPHP/sdk.class.php';
$sns = new AmazonSNS();

$response = $sns->create_topic('SO-like-question-12374940'); //create topic

$response = $sns->publish(
  'arn:aws:sns:us-east-1:9876543210:SO-like-question-12374940',
  $comment
);  //publish comment

$response = $sns->subscribe(
  'arn:aws:sns:us-east-1:9876543210:SO-like-question-12374940',
  'https ',
  'https://mysite.com/notificationsReceiver'
); // Subscribe to notifications 
```

收到通知的页面上的 PHP (http://mysite.com/notificationsReceiver.php)：

```
no idea, thoughts? 
```

显然，这不是一个完整的演示，并且可能有一些不正确的函数调用，但我想知道是否有人可以帮助建立这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:45:54.657

你的评论暗示你不喜欢 SQS，所以我用 MySQL 解决方案来回答。

除非您处理的流量如此之大以至于消息实际上会排队，否则我建议您只使用一种简单的 MySQL 表方法。

我有一个带有 MySQL 通知表的站点，如下所示：

```
CREATE TABLE `notification` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `user_id` INT(11) NOT NULL,
    `notification_type` ENUM('inline','popup') NOT NULL DEFAULT 'inline',
    `html` TEXT NOT NULL,
    `entered_date` DATETIME NOT NULL,
    `display_date` DATETIME NOT NULL,
    `show_once` TINYINT(1) NOT NULL DEFAULT '0',
    `closable` TINYINT(1) NOT NULL DEFAULT '1',
    `destroy_on_close` TINYINT(1) NOT NULL DEFAULT '1',
    PRIMARY KEY (`id`),
    INDEX `user_id` (`user_id`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM 
```

在页面加载时检查此表，并根据通知数据显示正确的通知。插入是在网站上发生各种动作或事件时完成的。

我有超过 10,000 个用户，到目前为止，这种方法还没有被证明是该站点的瓶颈。我也不指望它很快。

# python - htaccess does not require login when using POST

> ID：11524059
> 
> 赞同：0
> 
> 时间：2012-07-17T13:56:59.213
> 
> 标签：python, apache, .htaccess, cgi, .htpasswd

I'm new to this so I'm hoping that this is just a issue of me not editing a config file properly. I have a protected directory in my cgi-bin called /auth. The auth directory has an .htaccess file in it. First I made the htpasswd file as follows...

```
htpasswd -c /var/pass/.htpasswd username 
```

Then I made the .htaccess file and put it in the auth directory. The .htaccess file contains the following text...

```
AuthUserFile  /var/pass/.htpasswd
AuthGroupFile /dev/null
AuthName "Protected Directory"
AuthType Basic

<Limit GET>
require valid-user
</Limit> 
```

I put a sample python script in /cgi-bin/auth called Test.py which contains the following text...

```
#!/usr/bin/python
import cgi

form = cgi.FieldStorage()
print 'Content-Type: text/html\n'

if form.has_key('text'): print form['text'].value
else: print 'No text entered' 
```

When I go to localhost/cgi-bin/auth/Test.py I get the password prompt and I can login and see the 'No text entered' text so I know it works.

My problem is that there is no password prompt when I submit data to this protected file using the POST method. For example, I made this file (called input.py) and put it in my /cgi-bin directory...

```
#!/usr/bin/python

print 'Content-Type: text/html\n'

print '<form method="post" name="form_transfer" action="/cgi-bin/auth/outputTest.py">'
print '<input type="hidden" name="text" value="transferred"/>'
print '</form>'

print '<a href="javascript:void(0)" onclick="document.form_transfer.submit(); return false">Click Me</a>' 
```

I went to localhost/cgi-bin/input.py and clicked on the Click Me link and my simple example (the "Test.py" script) does not ask me for a password. It accepts the data and displays the text "transferred" immediately. How do I stop it from doing this? I want the user to have to login.

On a side note entering via GET actually DOES generate a password dialog (entered localhost/cgi-bin/auth/Test.py?text=printthis on my browser). For some reason POST is not working.

EDIT. Tyler Eaves solved this. In the htaccess file, instead of `<LIMIT GET>` I typed `<LIMIT GET POST>` and it worked.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:05:24.590

Nevermind. Solved it. Thanks Tyler Eaves!

EDIT. Tyler Eaves solved this. In the htaccess file, instead of `<LIMIT GET>` I typed `<LIMIT GET POST>` and it worked.

# php - PHP shell_exec 等待脚本完成？

> ID：11524063
> 
> 赞同：-4
> 
> 时间：2012-07-17T13:57:06.637
> 
> 标签：php, ffmpeg, shell-exec

我有一个 PHP 脚本，它查询数据库以获取要完成的作业列表，并根据它在数据库中找到的内容（基本上是一个进程队列）触发其他 PHP 脚本。

队列运行器脚本执行的某些脚本可能需要 30 秒左右才能完成运行（转换视频、调整图像大小等）。

问题是队列运行器脚本中的 shell_exec() 调用处理脚本，但不等待它们完成，导致队列未完成。

队列运行器脚本：

```
#!/usr/bin/php
<?php
    // Loop through database and find jobs to be done
    shell_exec("nohup $command > /dev/null 2> /dev/null & echo $! &");
?> 
```

直接从命令行运行作业脚本可以工作并创建 PDF。

有想法该怎么解决这个吗？还是运行进程队列的更好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:05:14.670

**shell_exec**不是您的问题的原因。它会等待并返回您的命令的输出。但是，您不能在后台启动命令并使用**nohup**。

**nohup**是您正在调用的命令，但一旦它启动了它的子进程，它将立即退出，因此，**shell_exec**不会等待该进程完成。您还应该避免使用**&**在后台运行该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:06:49.240

我首先建议不要从 PHP 执行代码，而是尽可能使用 PHP 包装器和库。

我看到的一个问题是您的处理是同步的，这意味着用户将不得不等待服务器响应而对正在发生的事情没有任何线索。他甚至可能会刷新页面，这会增加您服务器的负载而无法控制，这是一个非常严重的问题。这将启用*DOS 攻击*。

我建议将 AJAX 用于这些长期运行的任务。您可以在网页上显示一些内容以显示进度并在完成后更新它（AJAX）或切换到另一个页面。您甚至可以通过在 javascript 中捕获该事件并终止进程来处理用户退出页面的情况。

# java - 0xFFFF 需要变短吗？

> ID：11524067
> 
> 赞同：3
> 
> 时间：2012-07-17T13:57:18.550
> 
> 标签：java, android, types

我正在用 Java 开发一个 Android 2.3.3 应用程序。

我有以下代码：

`short CRCAux = 0xffff;`

我在 Eclipse 中收到警告，我必须将此值转换为短：

`short CRCAux = (short) 0xffff;`

我正在将 iOS 应用程序迁移到 Android，而在 iOS 中，`CRCAux`是`UInt16`.

为什么编译器需要将该值转换为short？short 是带符号的 int 16 位数据类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:18:11.193

像 0xFFFF 这样的文字被 java 编译器假定为 int 类型。因此，您在此处收到警告是非常正确的，因为 int 值 0x0000FFFF 不适合短（在这种特殊情况下，编译器不知道您不关心上零的截断）。

在这种情况下，如果您将 16 位值写入有符号值，编译器将接受它而不进行强制转换：

> 短 CRCaux = -1；

short 类型可用于存储 uint16 的值（16 位二进制补码毕竟只是 16 位，这只是对这些位的解释问题）。

也就是说，由于 java 假定这 16 位表示有符号的二进制补码。使用许多运算符（移位、乘法/除法和更大/更小比较），您会得到非常不同的语义。除非您确切地知道自己在做什么，否则这很可能会破坏您正在移植的代码。Char 更适合这种情况，因为它提供了所需的“无符号”行为。

# android - 无法创建 Facebook 应用：缺少应用集成

> ID：11524069
> 
> 赞同：1
> 
> 时间：2012-07-17T13:57:24.177
> 
> 标签：android, facebook, integration

我无法创建 FacebookApp。我们制作了一款 Android 游戏，当用户触摸 Facebook 徽标时，它会在用户的墙上发布一条消息，作为回报，我们会授予他优质的东西。

但*我无法创建 FaceBookApp*

在管理员模式下，当我进入“App Center”时，有一个红色方块，里面有这条消息：

**[**

**缺少应用程序集成。**

**在设置您的应用详情页面之前，您必须指定您的应用如何与 Facebook 集成。单击此处查看您的应用程序设置页面以管理您的集成**

**]**

如果我单击该链接，它会将我带到您选择如何将您的应用程序集成到 Facebook 的位置。

我只选择了 **“Native Android App”**

对于我选择的选项：

1.  单点登录 [已禁用]
2.  深度链接 [已禁用]
3.  Android key hash = 我把正确的放在了适当的位置
4.  Android 包名 = ""
5.  安卓类名 = ""

在这个页面上，如果我点击“**确认**”，它会告诉我“好的，一切顺利”，但是当我回到 App Center 时，仍然有红色方块告诉我，我需要指定我的应用程序如何与 Facebook 集成 :(

谁能帮我解决这个问题？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:06:27.977

不一定要在 facebook 应用程序中心创建一个应用程序来在墙上（或等）发布消息。我也在创建一个支持 facebook 的游戏，它正在发布带有链接和标题的照片，但游戏没有针对同一问题添加到 facebook 应用中心。

首先，我在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)上创建了一个应用程序，我们应该记住 AppId（API KEY），而不是为 Android 选项卡启用应用程序并输入哈希码。使用命令由您的密钥库生成哈希`keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64`码，其中“androiddebugkey”是您的密钥名称（用于导出），“~/.android/debug.keystore”是您的密钥库（用于导出 ofc）。

我的班级正在发布照片

```
public class EveryBodyActivity extends Activity {

    public final String API_KEY = "YOUR API KEY HERE";
    public final String[] permissions = {"publish_stream"};
    Facebook facebook = new Facebook(API_KEY);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ImageButton imageButton = (ImageButton)findViewById(R.id.button);
        imageButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                authorizeAndPostMassage();
            }
        });
    }

    public void authorizeAndPostMassage() {
        facebook.authorize(this, permissions, Facebook.FORCE_DIALOG_AUTH, new DialogListener () {
            @Override
            public void onComplete(Bundle values) {
                    Toast.makeText(EveryBodyActivity.this, "Authorization successful", Toast.LENGTH_SHORT).show();
                    postMassage();
            }

            @Override
            public void onFacebookError(FacebookError e) {
                Toast.makeText(EveryBodyActivity.this, "Facebook error, try again later", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onError(DialogError e) {
                Toast.makeText(EveryBodyActivity.this, "Error, try again later", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onCancel() {
                //Этот коллбэк никогда не срабатывает, вероятно, ошибка в SDK
                Toast.makeText(EveryBodyActivity.this, "Authorization canceled", Toast.LENGTH_SHORT).show();
            }});
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    private void postMassage() {
        Bundle imageBundle = new Bundle();
        imageBundle.putString(Facebook.TOKEN, facebook.getAccessToken());
        imageBundle.putString("method", "photos.upload");
        imageBundle.putString("caption", "New Voodoo Doll");

        byte[] data = null;

         Bitmap bi = BitmapFactory.decodeResource(getResources(),
                R.drawable.ic_launcher);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();
        imageBundle.putByteArray("picture", data);
        Toast.makeText(EveryBodyActivity.this, "Sending VooDoo...", Toast.LENGTH_SHORT).show();
        try {

            facebook.request(null, imageBundle, "POST");

        } catch (FileNotFoundException fileNotFoundException) {
            Toast.makeText(getApplicationContext(), (fileNotFoundException.getMessage()), 100);
        } catch (MalformedURLException malformedURLException) {
            Toast.makeText(getApplicationContext(), (malformedURLException.getMessage()), 100);

        } catch (IOException ioException) {
            Toast.makeText(getApplicationContext(), (ioException.getMessage()), 100);
        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:22:59.493

打开“为 Android SSO 配置”选项。

[https://developers.facebook.com/bugs/270177039756846/](https://developers.facebook.com/bugs/270177039756846/)

# c++ - C ++中的向量与数组？

> ID：11524072
> 
> 赞同：0
> 
> 时间：2012-07-17T13:57:30.913
> 
> 标签：c++, arrays, vector

> **可能重复：**
> [使用数组而不是 std::vector 的优势？](https://stackoverflow.com/questions/4004015/advantages-of-using-arrays-instead-of-stdvector)

C++中数组和向量的主要优点/缺点是什么？我通常发现向量由于其动态特性而更易于使用，但有时似乎数组更快且开销更少。还有其他显着的优势吗？我通常不确定何时使用其中一个，具体取决于。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:04:20.287

首选数组的最明显原因是在命名空间范围内实现变量的静态初始化；静态初始化意味着没有初始化问题的顺序。（如果你有 C++11， `std::array`也提供这个。）

另一个主要原因是允许编译器根据初始化程序的数量来确定大小，而不必计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:59:40.927

（2012 年）没有理由在 C++ 中使用 C 类型数组。

更快、更清洁、更安全。

# cuda - 使用独立流在多个 GPU 上同时调用相同的 cuda 函数

> ID：11524082
> 
> 赞同：1
> 
> 时间：2012-07-17T13:58:11.110
> 
> 标签：cuda

我正在多个 GPU 上实现我的程序...我的 PC 中有两个 GPU，并希望生成两个独立的流来处理这两个设备。我生成了两个流：

```
cudaStream_t *streams; 
streams = (cudaStream_t*) malloc(nstreams * sizeof(cudaStream_t));
for(int j = 0; j < nstreams; j++){
    cudaStreamCreate(&(streams[j]));
} 
```

然后，根据 SDK 示例，我尝试使用设备 ID 作为参数调用内核。根据设备 id，设置 cudaDevice (cudaSetDevice(dev_ID);) 并通过各自的流传递内核调用：

```
kernel1<<< grid, block,0,streamNo >>>(tex, size);................

for (i = 0;i<gpuN;i++){
    initialize(i);
    printf("initialization done with stream %i on device %i\n", (int)streams[i], i);
    runTest(i);
    printf("running tests done with  %i  stream \n", i);
    deini(i);
    printf("deinitialization is done\n");
} 
```

我的程序在两个不同的流中运行良好，但它是按顺序运行的。我想使用两个设备同时使用两个独立的流来运行功能。谁能帮我解决这个问题？

我正在使用两个 Tesla 2070 处理 CUDA 4.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:48:05.070

您创建的流与您在其中创建它们的上下文相关联，并且在创建流之外的任何上下文中使用流都是非法的。在 CUDA 4.x 及更高版本中，上下文切换是使用`cudaSetDevice()`.

因此，为了做到这一点，您需要执行以下操作：

```
cudaStream_t *streams[ndevices];

for(int i=0; i<ndevices; i++) {
    cudaSetDevice(i);  
    streams[i] = (cudaStream_t*) malloc(nstreams * sizeof(cudaStream_t)); 
    for(int j = 0; j < nstreams; j++){ 
        cudaStreamCreate(&(streams[j])); 
    }
} 
```

这将`nstreams`在枚举的每个设备上创建流`[0,..,ndevices-1]`。每当对流执行操作（启动内核、执行异步 memcpy 等）时，您必须首先执行`cudaSetDevice()`到正确的设备上下文。

实际上听起来您可能根本不需要使用流。如果你只有两个流和两个设备，你的主内核启动代码可能很简单：

```
for(int i=0; i<2; i++) {
    cudaSetDevice(i);
    kernel1<<< grid, block >>>(tex, size);
} 
```

实际上根本不需要创建任何流。

# iphone - uiactivityindicatorview 在 uipopoverviewcontroller iphone 中不起作用

> ID：11524087
> 
> 赞同：0
> 
> 时间：2012-07-17T13:58:19.977
> 
> 标签：iphone, ios, ipad, uipopovercontroller, uiactivityindicatorview

我有 uipopovercontroller 具有 uitableview 并且我想在 uitableview 方法的 didselectrowatindexpath 方法中开始为 uiactivityindicatorview 设置动画。这是我的代码。

```
-(IBAction)btnA_Clicked:(id)sender{

    self.objuiviewCon = [[myuiviewController alloc] initWithNibName:@"myuiviewController" bundle:nil];
    [self.objuiviewCon setDelegate:self];

    self.ObjApopCon = [[UIPopoverController alloc] initWithContentViewController:self.objuiviewCon];
    [self.ObjApopCon setPopoverContentSize:CGSizeMake(self.objuiviewCon.view.frame.size.width, self.objuiviewCon.view.frame.size.height)];
    [self.ObjApopCon presentPopoverFromBarButtonItem:btnA permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}

@interface myuiviewController : UIViewController<UITableViewDelegate,UITableViewDataSource>{

IBOutlet UITableView *tblList;

IBOutlet UIActivityIndicatorView *actiIndi;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [myarr count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSLog(@"cell called");

    cell.textLabel.text = [myarr objectAtIndex:indexPath.row];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"didSelectRowAtIndexPath called");
    [actiIndi startAnimating];
} 
```

还设置了接口构建器和委托中连接的所有 ibotle。但我的问题是我的 didSelectRowAtIndexPath 方法正在调用但 activityindicator 没有动画。

我在使用协议单击表视图行时调用 webservice，所以我需要 uiactivityindicatorview 进行动画处理，直到获得 webservice 的输出。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:44:00.357

检查activity和table的View可能是UIActivityIndi​​cator在UITableView后面。并检查它是否被隐藏

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"didSelectRowAtIndexPath called");
    [tableview bringSubviewToFront:actiIndi];
    [actiIndi startAnimating];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:44:33.890

对于您所说的，didSelectRowAtIndexPath: 中有更多代码。也就是说，您正在从那里调用的方法调用 webservice。

我认为所有的问题是你正在同步调用 web 服务。您必须记住，用户界面中的每项更改仅在您的方法完成后才有效。因此，如果您没有将控制权返回给主界面循环，startAnimating 将什么也不做。

解决方案是，当您调用调用 web 服务的方法时，而不是这样：

```
[actiIndi startAnimating];
[self callWebservice:fooObject]; 
```

写这个：

```
[actiIndi startAnimating];
[self performSelector:@selector(callWebservice:) withObject:fooObject afterDelay:0.0]; 
```

然后您将控制权返回给主循环，活动指示器将开始旋转，然后尽快调用另一个方法。

# git - 当我使用“git branch”时是否可以显示最新的提交？

> ID：11524088
> 
> 赞同：7
> 
> 时间：2012-07-17T13:58:23.327
> 
> 标签：git, commit

因此，在每个分支上，如果我执行“git log”或“git lg”，它将显示已完成的提交列表。

现在，当我输入“git branch -arg”时，有没有办法在每个分支上显示最新提交？我发现必须检查每个分支然后使用“git log”检查提交有点烦人/乏味。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T14:11:42.827

`git branch -v`列出分支名称以及每个分支上最新提交的 SHA 和提交消息。

请参阅[git 分支手册页](http://www.kernel.org/pub/software/scm/git/docs/git-branch.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T14:05:54.350

是的，您可以添加结帐后挂钩（[在此处描述](https://stackoverflow.com/questions/1504724/a-git-hook-for-whenever-i-change-branches)）。

基本上，创建`.git/hooks/post-checkout`文件并将您想要运行的任何 git 命令放入其中，最后确保使该文件可执行（`chmod +x .git/hooks/post-checkout`在类似 unix 的系统上，例如 Mac OS、GNU/Linux 等）。

例如，如果您放入`git show`该文件，它会自动向您显示最后一次提交以及在您切换分支时所做的更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T14:33:55.870

有多个`git log`参数可以控制其输出：

像`--branches`, `--glob`, `--tag`,`--remotes`选择要显示的提交，`--no-walk`避免显示所有历史记录（只是您想要的提示），`--oneline`仅显示第一行提交日志，`--decorate`并`--color=always`添加更多吸引眼球的东西：D

试试这些命令：

```
$ # show the first line of the commit message of all local branches
$ git log --oneline --decorate --color=always --branches --no-walk

$ # show the whole commit message of all the branches that start with "feature-"
$ git log --decorate --color=always --branches='feature-*' --no-walk

$ # show the last commit of all remote and local branches 
$ git log --decorate --color=always --branches --remotes --no-walk

$ # show the last commit of each remote branch
$ git fetch
$ git log --decorate --color=always --remotes --no-walk 
```

顺便说一句，无需切换分支即可查看其他分支的提交：

```
$ # show the 'otherbranch' last commit message
$ git log --decorate --color=always -n 1 otherbranch

$ # show a cool graph of the 'otherbranch' history
$ git log --oneline --decorate --color=always --graph otherbranch 
```

# excel - 使用选定的列表框值动态隐藏/显示列

> ID：11524089
> 
> 赞同：0
> 
> 时间：2012-07-17T13:58:26.507
> 
> 标签：excel, vba, listbox, controls, userform

我可以在必须通过 VBA 完成的 excel 中使用多选列表框表单的一些帮助，表单的值是从 1 月到 6 月的几个月，如下所示。

*   一月
*   二月
*   行进
*   四月
*   可能
*   六月

例如，如果选择 Jan，我希望显示列 e 到 h。如果未选择 Jan，则将隐藏 e 到 h 列。

1 月 - (EH 栏)
2 月 - (IM 栏)
3 月 - (NR 栏)
4 月 - (SW 栏)
5 月 - (X-AB 栏)
6 月 - (AC-AG 栏)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:35:50.253

欢迎来到堆栈溢出。有时，宏记录器是您的朋友。

我录制了一个自己隐藏列 E 到 H 的宏。这是录制的代码：

```
Sub Macro1()
'
' Macro1 Macro
' Macro recorded 7/17/2012 by Jimmy Peña
'

'
    Columns("E:H").Select
    Selection.EntireColumn.Hidden = True
End Sub 
```

Select/Selection 对清楚地表明我可以连接这两行。我像这样缩短代码：

`Columns("E:H").EntireColumn.Hidden = True`

由于该属性的值为`True`，我知道我可以通过将值设置为来隐藏列，并通过将值设置为来`True`显示列`False`。

由于您没有显示您正在使用的代码，因此我将提供一个通用方法，您需要对其进行自定义以供您使用。

我在示例用户表单中添加了一个列表框。此代码将根据选择的值有选择地隐藏/取消隐藏。

```
Private Sub ListBox1_Click()

  Dim selectedValue As String

  ' get selected value from listbox
  selectedValue = ListBox1.value

  Application.ScreenUpdating = False

  ' unhide any columns
  Cells.EntireColumn.Hidden = False

  Select Case selectedValue
  Case "JAN"
    Columns("E:H").EntireColumn.Hidden = True
  Case "FEB"
    Columns("I:M").EntireColumn.Hidden = True
  Case "MARCH"
    Columns("N:R").EntireColumn.Hidden = True
  Case "APRIL"
    Columns("S:W").EntireColumn.Hidden = True
  Case "MAY"
    Columns("X:AB").EntireColumn.Hidden = True
  Case "JUNE"
    Columns("AC:AG").EntireColumn.Hidden = True
  End Select

  Application.ScreenUpdating = True

End Sub 
```

# java - 字符串构造函数参数

> ID：11524092
> 
> 赞同：2
> 
> 时间：2012-07-17T13:58:33.550
> 
> 标签：java

我在 Java 练习中遇到了这个问题，并且不断打印出内存地址。

为以下类编写代码；

```
public class MyClass 
{ 

} 
```

这样的打印结果：

```
MyClass cls = new MyClass("Test Class"); 
System.out.println(cls); 
```

将是“测试类”。

（您需要编写整个类，并在答案中的构造函数中使用参数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:59:57.730

您需要重写上述`toString()`方法才能正常工作，并添加如下构造函数：

```
public class MyClass {
    private String message;
    public MyClass(String message) {
        this.message = message;
    }
    @Override
    public String toString() {
        return message;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:01:14.727

您将需要覆盖 toString() 方法，以便它返回作为构造函数参数发送的值。

# java - 这个Java小程序的错误

> ID：11524103
> 
> 赞同：1
> 
> 时间：2012-07-17T13:58:55.250
> 
> 标签：java, android, add, subtraction

这段代码有什么错误？当我运行程序时，它说“应用程序 buttonProj（进程 com.example.buttonproj）已意外停止。请重试”我只是尝试创建一个添加和减去按钮，用户可以单击它来增加或减少数字 i .

```
 package com.example.buttonproj;

 import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

 import android.view.View;
 import android.widget.Button;
   import android.widget.TextView;

 public class MainActivity extends Activity {

int counter;
Button add, sub;
TextView display;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    counter = 0;

   add = (Button) findViewById(R.id.bAdd);
   sub = (Button) findViewById(R.id.bSub);
   display = (TextView) findViewById(R.id.textView1);

   add.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter +=1;
        display.setText(counter);
    }
});
   sub.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        counter--;
        display.setText(counter);

    }
});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:00:04.953

采用

```
display.setText(""+counter);
 //OR
display.setText(String.valueOf(counter)); 
```

代替

```
display.setText(counter); 
```

# eclipse - 我使用 imdisk 将我的 JVM 移动到 RAM 磁盘，但无法从该位置运行 java？

> ID：11524104
> 
> 赞同：1
> 
> 时间：2012-07-17T13:58:55.513
> 
> 标签：eclipse, jvm, java

所以我正在尝试提高 Eclipse 性能，不久前有人建议将 JVM 移动到 RAM 磁盘，我用 imdisk 做到了，我基本上将 jdk 文件夹复制到该磁盘并从 eclipse.ini 指向那里 - eclipse 不加载！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:25:32.040

JVM 在 Eclipse 启动期间几乎完全加载。

主要的速度问题是工作区和 Eclipse 本身的文件系统。特别是对于带有防病毒软件的 Windows，这可能会非常慢。

我建议您不要移动 JDK，而应该分析您的系统以找出导致它变慢的原因并从那里开始。如果它开始交换任何东西，但修复它会起作用。

# wpf - 如何删除窗口标题和内容之间的边框

> ID：11524105
> 
> 赞同：6
> 
> 时间：2012-07-17T13:58:57.023
> 
> 标签：wpf, window, styles, border

我创建了一个带丝带的窗口（2010 - `Microsoft.Windows.Controls.Ribbon`）。

它看起来像这样：

![在此处输入图像描述](../Images/e3e1cb15b6e2c5f32052cc15ecb73221.png)

现在，选项卡（选项卡和标题之间）是否有边框。这是非常丑陋的。

它应该看起来像 Microsoft Office Word：

![在此处输入图像描述](../Images/445c4a0c9784dee3239aa5df110a8609.png)

我该怎么办，标签和标题栏之间没有边框？

（使用 RibbonWindow）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T17:40:13.317

看起来您正在使用标准的 WPF 窗口。尝试改用 Ribbon 框架的[RibbonWindow](http://msdn.microsoft.com/en-us/library/system.windows.controls.ribbon.ribbonwindow%28v=VS.110%29.aspx)。它将 Ribbon 集成到窗口本身，而不是像普通控件一样包含它，这就是 Window 所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:52:30.840

我现在使用[Fluent Ribbon](http://fluent.codeplex.com)来解决问题。

# java - 继续在java中的数组中搜索一个数字

> ID：11524106
> 
> 赞同：0
> 
> 时间：2012-07-17T13:58:58.433
> 
> 标签：java, arrays, search, for-loop, int

这是代码：

```
public class test2 {
    /**
     * @param args
     * @throws InterruptedException 
     */
    public static void main(String[] args) throws InterruptedException {
        int[][] arrayOfInts = { 
                { 32, 87, 3, 589 },
                { 622, 1076, 2000, 8 },
                { 12, 127, 77, 955 },
                {12, 3}
        };
        int searchfor = 12;

        int i;
        int j = 0;
        boolean foundIt = false;

        search:
            for (i = 0; i < arrayOfInts.length; i++) {
                for (j = 0; j < arrayOfInts[i].length;
                        j++) {
                    if (arrayOfInts[i][j] == searchfor) {
                        foundIt = true;
                        break search;
                    }
                }
            }

        if (foundIt) {
            System.out.println("Found " + searchfor +
                    " at " + i + ", " + j);
        } else {
            System.out.println(searchfor +
                    " not in the array");
        }
    }
} 
```

此代码在前 12 处停止。如您所见，数组 3 中还有另一个 12。我怎样才能让它继续下去，并搜索第二个 12？我不希望它在前 12 点终止。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:33:16.983

我假设您正在尝试查找找到 searchFor 的所有位置。这是方法之一。此代码不使用任何标签。这将打印找到 searchFor 的所有位置。

```
public static void main(String[] args) throws InterruptedException {
        int[][] arrayOfInts = { { 32, 87, 3, 589 }, 
                                { 622, 1076, 2000, 8 }, 
                                { 12, 127, 77, 955 }, 
                                { 12, 3 } };
        int searchfor = 12;

        int i;
        int j = 0;
        boolean foundIt = false;
        for (i = 0; i < arrayOfInts.length; i++) {
            foundIt = false;
            for (j = 0; j < arrayOfInts[i].length; j++) {
                if (arrayOfInts[i][j] == searchfor) {
                    foundIt = true;
                    continue;
                }
            }
            if (foundIt) {
                    System.out.println("Found " + searchfor + " at " + i + ", " + j);
            }
            else {
                System.out.println(searchfor + " not in the array "+i);
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:05:33.983

通过以下方式更改您的代码

```
 public static void main(String[] args) throws InterruptedException {
        int[][] arrayOfInts = { 
                { 32, 87, 3, 589 },
                { 622, 1076, 2000, 8 },
                { 12, 127, 77, 955 },
                {12, 3}
            };
            int searchfor = 12;

            int i;
            int j = 0;
            boolean foundIt = false;
            int foundItIndexI = null;
            int foundItIndexJ = null;

            for (i = 0; i < arrayOfInts.length; i++) {
                for (j = 0; j < arrayOfInts[i].length;
                     j++) {
                    if (arrayOfInts[i][j] == searchfor) {
                        foundIt = true;
                        foundItIndexI = i;
                        foundItIndexJ = j;

                    }
                }
            }

            if (foundIt) {
                System.out.println("Found " + searchfor +
                                   " at " + foundItIndexI + ", " + foundItIndexJ);
            } else {
                System.out.println(searchfor +
                                   " not in the array");
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:06:03.513

这将跟踪找到的每个坐标：

```
 int[][] arrayOfInts = { 
             { 32, 87, 3, 589 },
             { 622, 1076, 2000, 8 },
             { 12, 127, 77, 955 },
             {12, 3}
         };
         int searchfor = 12;

         int i;
         int j = 0;

         // this is dumb way to keep track of coordinates, but prob
         // not important to have better implementation (eg. Coordinate object)
         List<String> foundCoordinates = new ArrayList<String>();

     search:
         for (i = 0; i < arrayOfInts.length; i++) {
             for (j = 0; j < arrayOfInts[i].length;
                  j++) {
                 if (arrayOfInts[i][j] == searchfor) {
                     foundCoordinates.add(i + ", " + j);
                     continue search;
                 }
             }
         }

         if (foundCoordinates.size() > 0) {
             System.out.println("Found " + searchfor +
                                " at:" );

             for(String s : foundCoordinates)
             {
                 System.out.println(s);
             }
         } else {
             System.out.println(searchfor +
                                " not in the array");
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:06:20.757

`search`当您第一次点击您正在搜索的数字时 ，您正在打破标记的循环。

如果我猜对了你想要完成的事情，我会这样做

```
boolean foundIt = false;

for (int i = 0; i < arrayOfInts.length; i++) {
    for (int j = 0; i < arrayOfInts.length; j++) {
        if (arrayOfInts[i][j] == searchFor) {
            foundIt = true;
            System.out.println("Found " + searchFor + " at [" + i + ", " + j + "].");
        }
    }
}

if (foundIt == false) {
    System.out.println("Haven't found " + searchFor + ".");
} 
```

如果你想记住你找到它们的位置，你可以使用[`java.awt.Point`](http://docs.oracle.com/javase/7/docs/api/java/awt/Point.html)或者你可以为此编写自己的类。

您的代码将如下所示：

```
boolean foundIt = false;
List<Point> points = new ArrayList<Point>();

for (int i = 0; i < arrayOfInts.length; i++) {
    for (int j = 0; i < arrayOfInts.length; j++) {
        if (arrayOfInts[i][j] == searchFor) {
            foundIt = true;
            points.add(new Point(j, i));
            System.out.println("Found " + searchFor + " at [" + i + ", " + j + "].");
        }
    }
}

if (foundIt == false) {
    System.out.println("Haven't found " + searchFor + ".");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T14:01:17.187

而不是`break search;`使用`continue search;`. 如果您使用`break`，它会中断整个循环，同时`continue`仅中断当前迭代并继续循环。

# python - 分析无法装入内存的数据

> ID：11524111
> 
> 赞同：4
> 
> 时间：2012-07-17T13:59:19.527
> 
> 标签：python, database, data-analysis

我有一个数据库，其中包含需要分析的原始文本。例如，我收集了数亿个单独网页的标题标签，并根据主题对其进行聚类。我现在有兴趣对每个主题集群的子集执行一些额外的测试。问题有两个方面。首先，我无法将所有文本都放入内存来评估它。其次，我需要并行运行其中的几个分析，所以即使我可以将一个子集放入内存，我当然也无法将许多子集放入内存。

我一直在使用生成器，但通常有必要了解有关已加载和评估的数据行的信息。

我的问题是：处理和分析无法放入内存的数据的最佳方法是什么。数据必须从某种数据库中提取（目前是 mysql，但可能很快就会切换到更强大的解决方案。）

我正在构建处理 Python 数据的软件。

谢谢，

**编辑**

我将整天对此进行研究和集思广益，并计划继续发表我的想法和发现。请留下您可能有的任何意见或建议。

想法 1：标记单词和 n-gram 并保存到文件。对于从数据库中提取的每个字符串，使用已存在文件中的标记进行标记。如果令牌不存在，请创建它。对于每个单词标记，从右到左组合，直到字符串中所有单词的单一表示存在。搜索包含减少标记的现有列表（可以放入内存）以查找潜在的匹配项和相似性。每个简化的令牌都将包含一个指示令牌类别的标识符。如果发现简化标记（由单词标记组合创建的标记）与感兴趣的标记化字符串分类匹配，但不是直接匹配，那么简化标记将分解为其对应部分，并逐个单词进行比较。标记到感兴趣的字符串。

我不知道是否已经存在可以做到这一点的库或模块，我也不确定我会从中获得多少好处。但是，我的优先事项是：1）节省内存，2）担心运行时间。想法？

**编辑 2**

Hadoop 肯定会成为这个问题的解决方案。我在 python 和 hadoop 中找到了一些关于自然语言处理的好资源。见下文：

1.  [http://www.cloudera.com/blog/2010/03/natural-language-processing-with-hadoop-and-python](http://www.cloudera.com/blog/2010/03/natural-language-processing-with-hadoop-and-python)
2.  [http://lintool.github.com/MapReduceAlgorithms/MapReduce-book-final.pdf](http://lintool.github.com/MapReduceAlgorithms/MapReduce-book-final.pdf)
3.  [http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python)
4.  [https://github.com/klbostee/dumbo/wiki/Short-tutorial](https://github.com/klbostee/dumbo/wiki/Short-tutorial)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:27:05.407

[Map/Reduce](http://en.wikipedia.org/wiki/MapReduce)就是为此目的而创建的。

最好的 map reduce 引擎是 Hadoop，但它的学习曲线很高，需要很多节点才值得。如果这是一个小项目，您可以使用[MongoDB](http://www.mongodb.org/)，这是一个非常易于使用的数据库，并且包含一个使用 Javascript 的内部 map reduce 引擎。map reduce 框架非常简单易学，但它缺少使用 Hadoop 在 JDK 中可以获得的所有工具。

警告：您一次只能在 MongoDB 的 map reduce 引擎上运行一个 map reduce 作业。这对于链接作业或中等数据集（<100GB）来说没问题，但它缺乏 Hadoop 的并行性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:47:45.167

> 目前 mysql 但可能很快就会切换到更强大的解决方案。

请不要更糟——对于大多数类型的任务来说，MySQL 是最好的解决方案。

要处理海量数据，请使用[iteratools](http://docs.python.org/library/itertools.html)或[Build a Basic Python Iterator](https://stackoverflow.com/questions/19151/build-a-basic-python-iterator)

关于*如何*迭代数据。这取决于你的算法。

# java - Windows server 2003（32 位）终端服务上的 Java RE 1.7.0 问题？

> ID：11524112
> 
> 赞同：1
> 
> 时间：2012-07-17T13:59:20.690
> 
> 标签：java, windows, terminal-services

最近，我正在对我们的一项 Windows 2003 终端服务执行更新。在更新期间，我卸载了所有以前的 Java RE 版本并重新启动，然后使用添加/删除程序（用于终端服务安装模式）在管理员登录下安装 Java RE 1.7.0。安装 1.7.0 后，即使在其高级 Internet Explorer 8 Internet 选项页面中选中“使用 JRE 1.7.0_5（需要重新启动）”，RDP 客户端也无法运行 Java。

即使不是用于安装的帐户具有管理员权限的帐户也无法使用 Java RE 1.7.0。

测试使用（设置为“受信任的站点”以确保降低安全设置）：

*   [http://javatester.org/version.html](http://javatester.org/version.html)
*   [http://www.java.com/en/download/installed.jsp?detect=jre&try=1](http://www.java.com/en/download/installed.jsp?detect=jre&try=1)

为了测试这一点，我启动了几个 Windows 2003 VM，它们以类似的方式设置了组策略和终端服务来进行测试。其他两个 VM 的行为完全相同，这使得除了 Install 用户之外的任何用户都无法使用 Java RE 1.7.0。

在测试时，我继续执行以下操作：

1.  已卸载 Java RE 1.7.0
2.  重新启动
3.  在管理员帐户下使用相同的添加/删除程序方法安装 Java RE 1.6 Update 33
4.  重新启动
5.  RDP 以标准用户身份进入机器并测试了 Java RE，它运行良好

我认为 Java RE 1.7.0 中的某些内容没有正确安装 Windows Server 2003 下的终端服务。但是，我发现网上没有其他人提到这一点真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:21:58.200

在使用 Sysinternals Procmon.exe 进行大量跟踪后，我发现 Installed Console 用户和 RDP 用户之间的注册表项存在特定差异。

`HKCU\Software\Classes\CLSID\{CAFEEFAC-0017-0000-0005-ABCDEFFEDCBB}\` `HKCU\Software\Classes\CLSID\{CAFEEFAC-0017-0000-0005-ABCDEFFEDCBB}\InprocServer32`

这些密钥对于正常运行的用户来说是存在的，但对于 RDP 用户帐户来说是缺失的。所以我首先尝试简单地将这个密钥导入 RDP 用户，这适用于特定的用户帐户。但是，我希望所有用户都能正常工作，因此我将密钥修改为 HKLM (HKEY_LOCAL_MACHINE)，然后导入密钥。这解决了**ALL USERS**的 Java RE 1.7.0 问题。

在我的情况下，Java RE 安装到 D:\Program Files\Java\Jre7\ 您必须根据安装路径修改注册表项。

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\Software\Classes\CLSID\{CAFEEFAC-0017-0000-0005-ABCDEFFEDCBB}]

@="Java Plug-in 1.7.0_05"

[HKEY_LOCAL_MACHINE\Software\Classes\CLSID\{CAFEEFAC-0017-0000-0005-ABCDEFFEDCBB}\InprocServer32]

@="D:\\Program Files\\Java\\jre7\\bin\\jp2iexp.dll"

"ThreadingModel"="Apartment" 
```

# php - 设计重复 PHP/MySQL 任务

> ID：11524115
> 
> 赞同：8
> 
> 时间：2012-07-17T13:59:28.510
> 
> 标签：php, mysql, recurring, delayed-execution

我在这里有一个设计头痛，我将 PHP 和 MySQL 与 Java 结合使用（我的项目是一个 Android 应用程序）。我必须决定如何定期运行一系列服务器端计算。这里有大量关于 SO 解决如何创建 cron 作业等的材料，这很好，我很可能会到此结束，但我不确定如何从更广泛的意义上解决我的项目的这一部分。

该应用程序完全以用户的地理位置为中心。它们总是组织成 4 到 40 个之间的集群，这些集群在我的数据库中形成一个实例记录。这些实例可以随时变为活动或不活动。

### 任务

对于我的数据库中的每条记录，或者，我更喜欢实例，在每个时期，我想从其用户位置重新计算实例的质心（这很容易，特别是使用标量方法，因为它们非常接近），有效地移动位置通过更新实例的数据库中的纬度和经度值来了解实例本身。用户随后会在打电话回家时定期收到这些新的实例质心坐标。

### 方法

由于我的等级缺乏经验，这就是它变得混乱的地方。我首先编写了一个相对简单的计算，涉及一个 SQL 选择查询和一个后续 SQL 更新操作，对于每个实例，在每个时期。如果我们现在假设更新间隔约为 20-30 秒，那就是不到一分钟，显然这违反了 cron 作业的 1 分钟限制。（应该注意，如果绝对必要，可以硬编码时期之间的时间差）。

在短期内，这个过程可能只需要很少的时间来执行，因为实例/集群很少。但是，如果实例数量达到数千个，它可能会堆积大量 SQL 查询和大量时间来处理所有计算......为了减少不必要的负载，我自然想要结合一些机制来排除不活动的实例，尽管我猜仍然可以想象所需的计算时间可能会超过 epoch 间隔。我想这是（很多）以后的问题。

### 问题

就目前而言，问题有两个方面：

1.  我想在每个时期为所有活动实例执行相同的简单功能。那么，有没有比运行那么多迭代更有效的方法呢？我可以使用一个大型的最终 SQL 更新查询以某种方式一次更新许多表行吗？像 mysqli_multi_query() 这样的东西在这里真的很有帮助吗？（此时我没有mysqli）。
2.  考虑到它可能违反我一直在阅读的 cron 作业的 1 分钟限制这一事实，我如何最好地实施计时器或触发机制以在每个时期重新启动此过程？

### 我的点子

我目前的做法如下：

1.  运行一个 SQL 选择查询以将其全部设置为当前 epoch，获取需要质心移位的实例 ID 号。
2.  使用这些实例 ID 填充 PHP 数组
3.  使用循环和一个或非常多的 SQL 更新（见上文）顺序移动每个实例，以将新的坐标对写入数据库。
4.  安排在每个时期执行此任务（换句话说，每 x 秒）

上述方法合理吗？在这一点上，除非有更好的建议，否则我打算这样做。我真的不知道如何安排在每个时期执行的任务（第 4 点），但是……我已经到处找了，我自己也无法解决没有一些指导，我还不是很好。:) 一如既往，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:09:52.157

您可能会考虑从计划任务转移到按需更新的方法。这很容易实现，但需要权衡取舍。

*   添加一个名为 Last Updated 的日期时间字段

*   每次查询对象时，检查
    “新鲜度”的最后更新字段（在您的情况下，如果它是 > 30 秒前）

*   如果它是新鲜的，则将数据发送给用户。

*   如果不新鲜，重新计算数据并将其保存到数据库中
    （确保更改最后更新的字段）。然后，将新
    数据发送给用户。

这将消除对计划任务的需要并摆脱更新每一行的浪费。但是，它会减慢对用户的响应。

# android - 如何在底部显示标签栏，-Tab with Fragment

> ID：11524125
> 
> 赞同：4
> 
> 时间：2012-07-17T13:59:54.563
> 
> 标签：android, android-layout

我正在开发一个基于标签的 android 应用程序，我已经看到“TabActivity”类已被弃用，而是使用 Fragment 来实现相同的效果，我使用以下链接开发我的应用程序，现在我需要在底部，我尝试了几种方法，但无法使其正常工作，

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

有人可以帮我解决这个问题吗，我的标签布局 xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0"/>

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"/>
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T16:50:08.383

先把外面的LinearLayout去掉，没用。然后把你的 TabWidget 放在你内部 LinearLayout 的最后一个位置，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T16:23:24.703

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_horizontal">
    <TabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#ff140c14">

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"/>

            <TabWidget
                android:id="@android:id/tabs"
                android:orientation="horizontal"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0" />
        </LinearLayout>
    </TabHost>
</RelativeLayout> 
```

为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T07:16:04.237

分配内部线性布局方向垂直并将选项卡主机放在线性布局的最后位置。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-18T22:11:19.463

不管怎样，今天的底部 Tabbar 是一个 UX 反模式

[http://developer.android.com/design/patterns/pure-android.html](http://developer.android.com/design/patterns/pure-android.html)

# java - JDBCTemplate 挂起

> ID：11524127
> 
> 赞同：3
> 
> 时间：2012-07-17T13:59:57.400
> 
> 标签：java, spring, spring-jdbc

我正在使用 JDBCTemplate。对于一个特定的查询，JDBCTemplate 在调用超过 3-4 次后挂起，有时在 15-20 次尝试后。我的代码中没有发现任何错误。

```
private String getXXX(String table)
{
    System.out.println("Test 1");
    final List<String> data = getJdbcTemplate().queryForList(SELECT_TBL_NME,
                new Object[] { table }, String.class);
    System.out.println("Test 2");
    ret = data.size() > 0 ? data.get(0) : null;
    return ret;
} 
```

如果函数被调用超过 15 次，有时甚至在第 3 次或第 4 次调用之后，控制台会在“测试 1”处挂起而没有任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:18:27.613

问题似乎是您没有关闭连接。

```
final List data = getJdbcTemplate().queryForList(SELECT_TBL_NME, new Object[] { table}, String.class); 
```

上面的行永远不会结束，因为 JdbcTemplate 正在等待从您的数据库获取连接。

因此，如果您的数据库无法为您提供连接，则您的应用程序正在等待，等待，等待，并且它对时间没有任何作用。

**可能的修复：**由于您使用的是 Spring，请检查您是否没有在您的`queryForList`方法之外进行操作。

几个月前我遇到了同样的问题，因为我在我的`queryForList`方法之外调用了 ResultSet.getMetaData() 并且没有释放/关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:29:41.490

问题可能不在 Java 层。

首先尝试检查您的：

1.  DB - 尝试使用 DB 工具（Toad、sqlplus、SQL Developer 等）执行相同的查询，并确保 DB 正常工作。问题可能出在您的数据库对象上（它可能被其他会话锁定）。

2.  网络——同样的问题可能是因为延迟不好。确保您的网络运行良好。

3.  尝试使用普通 JDBC 测试相同的查询。

# c++ - 静态对象的私有析构函数是如何调用的？

> ID：11524131
> 
> 赞同：8
> 
> 时间：2012-07-17T14:00:07.500
> 
> 标签：c++, static, standards, destructor

> **可能重复：**
> [无法访问单例类析构函数中的私有成员](https://stackoverflow.com/questions/2130864/cannot-access-private-member-in-singleton-class-destructor)

我正在实现一个单例，如下所示。

```
class A
{
public:

    static A& instance();
private:
    A(void)
    {
        cout << "In the constructor" << endl;
    }
    ~A(void)
    {
        cout << "In the destructor" << endl;
    }

};

A& A::instance()
{
    static A theMainInstance;
    return theMainInstance;
}

int main()
{
    A& a = A::instance();

    return 0;
 } 
```

**析构函数是私有**的。当程序即将终止时，会为对象 theMainInstance 调用它吗？

我在 Visual Studio 6 中试过这个，它给出了一个编译错误。

```
"cannot access private member declared in class..." 
```

在 Visual Studio 2010 中，它被编译并**调用了析构函数**。

根据标准，这里的期望应该是什么？

编辑：由于 Visual Studio 6 的行为不是那么愚蠢，因此出现了混淆。可以说，静态对象的 A 的构造函数是在 A 的函数上下文中调用的。但**析构函数不是在同一个函数的上下文中调用的**。这是从全局上下文中调用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:20:01.043

C++03 标准的第 3.6.3.2 节说：

`Destructors for initialized objects of static storage duration (declared at block scope or at namespace scope) are called as a result of returning from main and as a result of calling exit.`

它对拥有私有析构函数没有任何限制，因此基本上如果它被创建，它也会被销毁。

私有析构函数确实会限制声明对象的能力 (C++03 12.4.10)

`A program is ill-formed if an object of class type or array thereof is declared and the destructor for the class is not accessible at the point of declaration`

但是由于 A::theMainInstance 的析构函数可以在声明时访问，因此您的示例应该没有错误。

# html - 如何使用 cURL 将表单发布到 purewhois.com

> ID：11524133
> 
> 赞同：0
> 
> 时间：2012-07-17T14:00:16.430
> 
> 标签：html, forms, post, curl

我正在尝试提交此处找到的表格：[http ://www.purewhois.com/index.php](http://www.purewhois.com/index.php)

使用以下命令：

```
curl --data "queryInput=microsoft.com@hidden=default&submit=search" \
http://www.purewhois.com/index.php 
```

它似乎无法正常工作。我什至尝试过`-F`开关。任何人都可以建议修复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:39:43.607

这行得通吗？

> curl --data "queryInput=microsoft.com&output=default&submit=search" [http://www.purewhois.com/index.php](http://www.purewhois.com/index.php)

# javascript - e.preventDefault 的 IE 错误

> ID：11524134
> 
> 赞同：10
> 
> 时间：2012-07-17T14:00:17.340
> 
> 标签：javascript, internet-explorer, preventdefault

如果这已经被覆盖，我提前道歉，但我是新手，我看到还有其他类似的帖子，但没有一个有帮助，所以我认为可能还有另一个问题。

我有一个模态弹出窗口，它在 Chrome 中运行良好，但在 IE 中不起作用。问题似乎出在线路上

```
{ e.preventDefault(); } 
```

它给出了以下错误。

> 错误：对象不支持属性或方法“preventDefault”

就像我说的那样，我对此并不陌生，我已经尝试通过在它周围放置一个 if 或只是删除该行但没有运气，所以任何人都可以帮助我来做它在其他日志中所说的。

```
/* prevent default behaviour on click */
var e = this.browserEvent;
var tgt = this.triggeringElement;
/*e.preventDefault();*/
{ e.preventDefault(); }
/* Trigger JQuery UI dialog */
var horizontalPadding = 30;
var verticalPadding = 30;
$('<iframe id="modalDialog" src="' + $(tgt).attr("href") + '" />').dialog({
   title: "IC v RT",
   autoOpen: true,
   width: 1050,
   height: 700,
   modal: true,
   close: function(event, ui) {apex.event.trigger('#P28_AFTER_MODAL','select',''); $(this).remove();},
   overlay: {
       opacity: 0.5,
       background: "black"}
}).width(1050 - horizontalPadding).height(700 - verticalPadding);
return false; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-17T14:13:01.670

```
event.preventDefault ? event.preventDefault() : event.returnValue = false; 
```

来自[event.preventDefault() 函数在 IE 中不起作用](https://stackoverflow.com/questions/1000597/event-preventdefault-function-not-working-in-ie)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-17T09:18:12.043

```
if(event.preventDefault) 
{
  event.preventDefault();
}
else
{
   event.returnValue = false;
} 
```

# javascript - CSS 不适用于 Javascript 函数

> ID：11524136
> 
> 赞同：0
> 
> 时间：2012-07-17T14:00:21.473
> 
> 标签：javascript, css

所以我这里有个问题。我为一些 div 设置了一些自定义样式，使它们暂时不可见。但是，当我使用文档写入功能从外部 .js 文件生成文本时，这些自定义样式似乎不会触发：

CSS：

```
<style type="text/css">
        .section 
        {
            display: none;
        }
        .section#form1
        {
            display: block;
        } 
```

用于切换可见性的 JavaScript 函数：

```
function toggleVisibility(newSection) 
        {
            $(".section").not("#" + newSection).hide();
            $("#" + newSection).show();
        } 
```

在生成此页面上大部分内容的递归循环函数中的某个地方我有这个

```
...
if (step != 1)
                    {
                        document.write("</div>");
                    }
                    document.write("<div id='form"+step+"' class='section'>");
... 
```

我是否需要某种代码来分配 JavaScript 将表单的所有元素打印到某个外部 div 的位置？我似乎无法理解为什么所有的 div 一开始都是可见的，我之前做了同样的代码，然后它工作得很好。也许 document.write 的一个很好的替代品可能会奏效。感觉像 document.write sorta 覆盖一切。

```
$(document).ready(function()
    {       
        $('#show-results').click(function() 
        {
            $.post('JSAAN.php', function(data) 
            {
                var pushedData = jQuery.parseJSON(data);

                // Uses the function from loop.js
                document.write("<form id='evalForm' onsubmit='return false;'>");
                var fieldsetActive = 0;
                loop(pushedData);
            })
        })
    }); 
```

And the loop function (who's in a separate file starts like this:

```
function loop(obj) {
    // Starts the form
        $.each(obj, function(key, val) {
            if($.isPlainObject(val) || $.isArray(val)) { // object, call recursively 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:04:04.887

Instead of using `document.write` to create your `div`, consider using `document.createElement`.

```
var elem = document.createElement('div'),
    formStep = 'form' + step;
elem.setAttribute('id', formStep);
elem.setAttribute('class', 'section'); 
```

This will insert the element into the DOM. `document.write` is not recommended for this type of usage.

If you need to use jQuery:

```
// using document.createElements('div') as the selector is the fastest way
var elem = $(document.createElement('div')),
    formStep = 'form' + step;
elem.attr('id', formStep).attr('class', 'section'); 
```

Let me know if you have any questions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:11:54.640

You shouldn't be using `document.write`. If the page is fully loaded, it will erase the entire page (including the CSS).

You seem to be using jQuery already, so use its `.append` or `.html` methods instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:12:27.800

because when you use `document.write` it overwrites everything in the page including styles etc, I think you should consider using DOM functions instead of using `document.write`

# javascript - noty Jquery 插件超时没有发生

> ID：11524139
> 
> 赞同：7
> 
> 时间：2012-07-17T14:00:28.713
> 
> 标签：javascript, jquery, jquery-plugins, notifications, noty

当输入消息列表时，Jquery noty 插件超时不起作用。我从 servlet 获取消息列表并像这样调用 noty。

```
<script>
    function callNotification()
    {
        <c:foreach var = "message" items = "${sessionScope.notification}">
             notify('${message}');
        </c:foreach>
    }
    function notify(message)
    {
       noty({
                "text": message,
                "theme": noty_theme_facebook",
                "layout": topRight,
                "information","animateOpen":{"height":"toggle"},
                "information","animateOpen":{"height":"toggle"},
                "speed":500,
                "timeout":5000,
                "closeButton":true,
                "closeOnSelfClick":true,
                "closeOnSelfOver":false,
                "modal":false
          })
    </script> 
```

理想情况下，这应该遍历消息并以 5000 毫秒的超时时间打印它们。但这会一次打印所有消息。我进一步尝试使用 javascript 本机 setTimeout 函数并用它替换了我的 callNotification。

```
 function callNotification()
    {
        <c:foreach var = "message" items = "${sessionScope.notification}">
         (function(message){ 
            setTimeout(function(){notify('${message}');},5000)
         }('${message}')
        }}
        </c:foreach>
    } 
```

但这也被证明是无效的。`"layout":center`奇怪的是，当我在通知方法中替换时，超时似乎工作正常。我哪里错了。我希望在 5 秒后显示消息，然后自动删除第一条消息并显示下一条消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-23T13:53:24.297

Noty 被编码，因此如果您的 Noty 中有按钮，它会禁用超时。这对我来说没有意义，但事实就是如此。

这是罪魁祸首（第 62 行）：

```
60: // If we have button disable closeWith & timeout options
61: this.options.closeWith = [];
62: this.options.timeout = false; 
```

只需删除`this.options.timeout = false;`，如果您有一个带按钮的 Noty，这将保持超时工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T19:28:46.327

为了让它工作，我在 jquery.noty.js 中更改了以下内容......

```
self.$bar.delay(self.options.timeout).promise().done(function () {
                self.close();
            }); 
```

对此...

```
setTimeout(function () {
                self.close();
            }, self.options.timeout); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-24T12:27:39.803

尝试`closeWith`使用超时选项希望它能正常工作

```
 function generate(type, text) {

                var n = noty({
                    text        : text,
                    type        : type,
                    dismissQueue: true,
                    layout      : 'topRight',
                    closeWith   : ['click','timeout'],
                    theme       : 'relax',
                    maxVisible  : 10,
                    timeout     :7000,

                    animation   : {
                        open  : 'animated bounceInRight',
                        close : 'animated bounceOutRight',
                        easing: 'swing',
                        speed : 500
                    }
                }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-22T23:30:00.810

我的答案是针对 v2.3.7。

Noty 返回一个 javascript 对象，因此如果您通过执行 console.dir(n) 在 firebug 上检查它，您将找到返回对象的所有方法和属性。

以下将设置 3 秒超时：

```
var n = noty({text: 'noty - a jquery notification library!'});
n.setTimeout(3000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-31T06:59:00.620

您需要提供此选项作为参数：“buttons: false”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-11T10:53:49.557

您也可以通过在初始化期间指定此选项来实现此目的

```
buttons: false 
```

更多在这里[http://ned.im/noty/#/about](http://ned.im/noty/#/about)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T10:54:20.450

在您的 jquery.noty.packaged.js 中创建一个名为“master_self”的全局变量文件。现在在第 103 或 104 行中，必须在该行的 `var self = this;`下方有一行将 master_self 分配为 self`master_self = self;`

现在在同一个文件中创建一个函数：

```
function autoTimeout(timeoutVal){
    setTimeout(function(){
                            var self = master_self;
                            if (typeof self.options.animation.close == 'string') {
                                self.$bar.addClass(self.options.animation.close).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function() {
                                    if(self.options.callback.afterClose) self.options.callback.afterClose.apply(self);
                                    console.log(self);
                                    self.closeCleanUp();
                                });
                            } else {
                                self.$bar.clearQueue().stop().animate(
                                    self.options.animation.close,
                                    self.options.animation.speed,
                                    self.options.animation.easing,
                                    function() {
                                        if(self.options.callback.afterClose) self.options.callback.afterClose.apply(self);
                                    })
                                    .promise().done(function() {
                                        self.closeCleanUp();
                                    });
                            }
                         },timeoutVal);
} 
```

现在，在调用 noty 对象以创建通知之后，立即在要以这种方式超时的通知上显式调用此函数：

```
autoTimeout(1000); 
```

# javascript - 在 Fancy Box 覆盖按钮单击时调用 Ajax 未按预期工作

> ID：11524142
> 
> 赞同：0
> 
> 时间：2012-07-17T14:00:34.037
> 
> 标签：javascript, ajax, fancybox

我对 Ajax 和花哨的盒子有一些愚蠢的问题。我是 Ajax 的新手。我在我的一个页面中使用花式框，就像花式框在单击按钮时所做的那样，它会弹出一个包含一些输入字段和按钮的表单。单击按钮时，尝试进行 ajax 调用，该调用需要显示指示器，直到调用完成。我进行了同步调用，但指示器没有显示，但是当我将其设为异步调用时，它正确显示. 谁能解释一下原因

更新：看看下面的代码......它工作正常并显示指标，直到我们从服务器得到响应......但是当点击花哨的框覆盖上的按钮时调用的函数不起作用异步 false isAsync 为 False

```
function LoadCarrier(isAsync)
{
   try
  {
    SetCarrierLoadingIndicator("","Loading..");
    xmlHTTPObject1 = GetXMLHTTPObject();
    xmlHTTPObject1.onreadystatechange = OnPopulateCarrierComplete;
    var currentTime = new Date();
    var  parameters =   "";
    var pageNumber=document.getElementById(hdnCarrierCurrentPage).value;
    parameters += "CarrierPage";
    parameters += "^" + pageNumber;
    parameters += "~NetworkIds";
    parameters += "^" + GetAllSelectedNetworks();
    parameters += "~SelectedCarriers";
    parameters += "^" + GetAllSelectedCarriers();
    var parms = "?OPCode=LoadCarrier&Parms=" + parameters + "&RequestTime" + currentTime;
    var ajaxURL = ajaxCallHandlerUrl + parms;
    xmlHTTPObject1.open ("GET", ajaxURL, isAsync);
    xmlHTTPObject1.send(null);
}
catch(exception)
{
    alert(exception);
}
return false; 
```

}

```
 function OnPopulateCarrierComplete()
    {
     if (xmlHTTPObject1.readyState == 4)
   {
   var result = xmlHTTPObject1.responseText;
   var contents = result.split("[6CE650P$0$NTS3E!]");

   if (contents[0] == "SUCCESS")
   {
        SetCarrierLoadingIndicator("none","");
        if(contents[1].length > 0)
        {
            var details=contents[1].split("[$sEpaRaToR$]");
            document.getElementById(lblCarrier).innerHTML=details[0];
            document.getElementById(lblCarrierPaging).innerHTML=details[1];
            document.getElementById(lblCarrierCount).innerHTML=details[2];
            var tmp=details[3].split(',');
            for(var i=0;i<tmp.length;i++)
            {   
                CarrierList.push(Number(tmp[i]));     
            }
        }
        else
        {
            document.getElementById(lblCarrier).innerHTML="";
            document.getElementById(lblCarrierPaging).innerHTML="";
            document.getElementById(lblCarrierCount).innerHTML="0";
        }
   }
   else
   {
       if(contents[1] == "Session Expired")
       {
            parent.document.location = "Default.aspx";
       }
       else
       {
            alert(contents[1]);
       }
   }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:11:12.767

同步调用锁定浏览器在调用完成之前无法执行任何操作，而异步调用允许在等待从服务器返回结果时执行其他操作（例如显示指示器）。因此，当您进行同步调用时，浏览器不会显示您的指示器或执行任何其他操作，直到它从您的服务器获得响应。

简而言之，您应该很少需要对您的服务器进行同步调用。AJAX 中的“A”代表“异步”是有原因的：)。

# iphone - 进入前台时应用程序崩溃

> ID：11524147
> 
> 赞同：0
> 
> 时间：2012-07-17T14:01:03.190
> 
> 标签：iphone, objective-c, cocoa-touch, ios5

我最近将 MDProgressHUD 添加到我的应用程序中，并按照自述文档中的说明进行操作，该文档建议我在主队列上设置 HUD，然后在新线程上执行其他任务，这就是我实现它的方式。在应用程序的初始启动时一切正常，但是如果您选择手机上的主页按钮，以便将应用程序置于后台，然后选择应用程序的图标将其恢复到前台，则应用程序将崩溃。

我已经实现了如下代码。当用户选择 OK 按钮时，应用程序将通过调用 Web 服务 (NSURLConnection) 来验证他们的登录 ID 和密码，即 authenticateUser。

```
- (IBAction)Ok:(id)sender {

    [self.txtPassword resignFirstResponder];

    [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 0.01 * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
       [self authenticateUser];
       [MBProgressHUD hideHUDForView:self.view animated:YES];
    });

}

- (void)authenticateUser {

   self.loginEmailAddress = self.txtEmailAddress.text;
   self.loginPassword = self.txtPassword.text;

   if ([self.loginEmailAddress isEqualToString:@""] || [self.loginPassword isEqualToString:@""]) {
    self.lblErrMsg.text = @"Invalid login details. Please try again.";
    self.lblErrMsg.hidden = NO;
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    return;
}

    NSString *myRequestString = [NSString stringWithFormat:@"org_id=%@&login_id=%@&pword=%@", signedUpOrgId, self.loginEmailAddress, self.loginPassword];
    NSString *myEncodedRequestString = [myRequestString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];

    NSData *myRequestData = [myEncodedRequestString dataUsingEncoding:NSUTF8StringEncoding];

    NSMutableURLRequest *theRequest=[NSMutableURLRequest requestWithURL:serviceURL
                                                      cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                    timeoutInterval:60.0];

    [theRequest setHTTPMethod: @"POST"];
    [theRequest setHTTPBody: myRequestData];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (theConnection) {
        receivedData = [NSMutableData data];

    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorry! Can't connect." message:@"Sorry, but there seems to be a problem connecting to the internet at the moment. Please try again or wait until you have better reception for a data connection." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    }
} 
```

日志：

```
2012-07-17 23:40:33.699 AppName[6155:707] -[ContactListViewController authenticateUser]: unrecognized selector sent to instance 0x2616e0
2012-07-17 23:40:33.704 AppName[6155:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ContactListViewController authenticateUser]: unrecognized selector sent to instance 0x2616e0'
*** First throw call stack:
(0x3146588f 0x377a3259 0x31468a9b 0x31467915 0x313c2650 0x31d78933 0x31439a33 0x31439699 0x3143826f 0x313bb4a5 0x313bb36d 0x33435439 0x30b1ecd5 0xe13c7 0xe136c)
terminate called throwing an exception 
```

我无法弄清楚为什么该应用程序第二次崩溃。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:46:25.883

在块中引用`self`时，建议通过“弱”变量间接执行此操作（否则您可能永远无法正确释放）。

__weak ContactListViewController *weakself = self; dispatch_after(popTime, dispatch_get_main_queue(), ^(void){ [weakself authenticateUser]; [MBProgressHUD hideHUDForView:weakself.view animated:YES]; });

这是因为对您的引用绑定到该块；它有一个重要的含义：你*确定*你在这个街区呆的时间足够长，可以很好地参考你吗？您可能需要仔细考虑并确保`self`被称为“属于”其他人的对象足够长的时间以仍然是执行此块的有效实例。

# java - 是什么让 Finalizers 如此昂贵？

> ID：11524148
> 
> 赞同：5
> 
> 时间：2012-07-17T14:01:07.430
> 
> 标签：java, finalizer

从有效的Java：

> 哦，还有一件事：使用终结器会导致严重的性能损失。在我的机器上，创建和销毁一个简单对象的时间约为 5.6 ns。添加终结器会将时间增加到 2,400 ns。换句话说，使用终结器创建和销毁对象的速度大约慢了 430 倍。

是什么让 Finalizers 如此昂贵？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:09:53.660

关键的区别在于终结器方法的**存在**，无论它做什么。一旦 GC 有了可终结的对象，它就必须更加努力地完成所有的内务处理。它必须将它们标记为可终结，将它们保存在池中，运行终结，检查它们之后是否复活，处理各种多线程问题和终结代码，等等。

这种差异在 GC 的年轻代中表现得最为明显：在一个乐观且并非完全罕见的情况下，GC'ing 归结为一个操作：递减指向第一个可用内存地址的指针。使用终结器，就是上面概述的整个过程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T14:11:46.310

[http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)

从上面的链接中提取

与没有终结器的对象相比，具有终结器的对象（具有非平凡 finalize() 方法的对象）具有显着的开销，应谨慎使用。可终结的对象分配和收集都比较慢。在分配时，JVM 必须向垃圾收集器注册任何可终结对象，并且（至少在 HotSpot JVM 实现中）可终结对象必须遵循比大多数其他对象更慢的分配路径。同样，可终结对象的收集速度也较慢。至少需要两个垃圾收集周期（在最好的情况下）才能回收可终结对象，并且垃圾收集器必须做额外的工作来调用终结器。结果是分配和收集对象花费了更多时间，垃圾收集器承受了更大的压力，因为不可访问的可终结对象使用的内存保留的时间更长。再加上终结器不能保证在任何可预测的时间范围内运行，甚至根本不能保证这一事实，您可以看到在相对较少的情况下终结器是正确的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:16:34.687

当您进行基准测试时，您可能会对对象的使用寿命进行基准测试。

对象存在超出其使用寿命，基本上在最后一个程序引用消失和垃圾收集例程（在不同的线程中运行）检测到分离的对象之间存在时间延迟。添加终结器时，对象的“使用寿命”现在会延长，直到垃圾收集检测到分离的对象之后，并且在 JVM 运行终结方法之后。

这不是 100% *，因为*存在终结方法，终结方法增加了很多时间，其中很多时间都在等待垃圾收集线程唤醒并最终偶然发现您的分离对象（并决定对其进行处理）。

# jquery - 为同一页面上的多个幻灯片实现 each()

> ID：11524150
> 
> 赞同：1
> 
> 时间：2012-07-17T14:01:07.933
> 
> 标签：jquery

这是一个使用 div 'store_images' 中的图像的幻灯片。同一页面上的多个幻灯片：单击图像以查看下一张幻灯片，最后一张图片后转到第一张。如果我只有一个，它可以工作，但我必须在第二部分中实现 each() 条件，因为它们更多，我不知道如何。

```
$(function(){
    $('.store_images').each(function(){
    $(this).find('.store_book_image:gt(0)').hide(); 
});

$(this).find('img').click(function () {
    $('.store_images :first-child').hide()
       .next('img').show()
       .end().appendTo('.store_images');
}); }); 
```

谢谢，

更新：HTML

```
<div style="cursor:e-resize;" class="store_images">
                <img class="store_book_image" src="{{ book.image1.url }}" />
                <img class="store_book_image" src="{{ book.image2.url }}" />
                <img class="store_book_image" src="{{ book.image3.url }}" />
                <img class="store_book_image" src="{{ book.image4.url }}" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:10:45.540

你可以试试这个：

```
$(this).find('img').click(function () {
    var $parentDiv = $(this).closest('.store_images');
    $(':first-child',$parentDiv).hide()
       .next('img').show()
       .end().appendTo($parentDiv);
}); 
```

也就是说，单击特定 img 元素时，会找到它所属的“store_images”div，而不是选择所有“store_images”div。

顺便说一句，为什么`$(this).find('img')`而不是`$('img')`？我假设那时`this`是`document`.

# ldap - 使用 net-ldap 库查询 Ldap 以获取组详细信息

> ID：11524151
> 
> 赞同：3
> 
> 时间：2012-07-17T14:01:08.863
> 
> 标签：ldap, ldap-query, netldap

我正在尝试使用 ruby​​ 的 net-ldap 库查询 ldap 服务器以获取任何组的详细信息

```
require 'rubygems'
require 'net/ldap'

username = "user1"
password = "pass1"
host = 'server.address'
ldap = Net::LDAP.new :host => host,  :port => 389
ldap.auth username, password

filter = Net::LDAP::Filter.eq("cn", "*group*")

ldap.search(:base => treebase, :filter => filter, :return_result => true) do |entry|
  puts "DN: #{entry.dn}"
  entry.each do |attr, values|
    puts ".......#{attr}:"
    values.each do |value|
      puts "          #{value}"
    end
  end
end 
```

我获得了有关该组的详细信息，但没有获得该组的所有者。

知道什么是错的吗？以及如何做

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T12:18:11.280

**找到了访问 LDAP 服务器提供的所有属性的正确方法**

```
 require 'rubygems'
   require 'net/ldap'

   ldap = Net::LDAP.new :host => 'server',
        :port => 389,
        :auth => {
              :method => :simple,
              :username => "user",
              :password => "pass"
        }

   group_name_filter = Net::LDAP::Filter.eq( "cn", "la lakers" )
   group_type_filter = Net::LDAP::Filter.eq( "objectclass", "basketball" )
   filter = group_name_filter & group_type_filter
   treebase = "dc=example,dc=com"
   attrs = ["dn", "cn", "mail", "displayname", "listowner", "members"]

   ldap.search( :base => treebase, :filter => filter, :attributes => attrs, :return_result => true ) do |entry|
     puts "DN: #{entry.dn}"
     entry.each do |attribute, values|
       puts "   #{attribute}:"
       values.each do |value|
         puts "      --->#{value}"
       end
     end
   end

   p ldap.get_operation_result 
```

**谢谢**

# javascript - NowJS在尝试启动nodejs服务器时抛出错误

> ID：11524154
> 
> 赞同：0
> 
> 时间：2012-07-17T14:01:10.157
> 
> 标签：javascript, node.js, nowjs-sockets

我正在尝试使用 nowjs 启动 node.js 服务器，但出现以下错误：

```
    /var/www/vhosts/sitename.com/httpdocs/sitename/assets/js/node_modules/now.js:2
    TagName("head")[0].appendChild(fileref)}return nowObjects[uri]=now};window.now
                                                                        ^
    ReferenceError：未定义窗口
        在 /var/www/vhosts/sitename.com/httpdocs/sitename/assets/js/node_modules/now.js:2:9761
        在对象。(/var/www/vhosts/sitename.com/httpdocs/sitename/assets/js/node_modules/now.js:2:9794)
        在 Module._compile (module.js:449:26)
        在 Object.Module._extensions..js (module.js:467:10)
        在 Module.load (module.js:356:32)
        在 Function.Module._load (module.js:312:12)
        在 Module.require (module.js:362:17)
        在需要（module.js:378:17）
        在 /var/www/vhosts/sitename.com/httpdocs/sitename/assets/js/app.js:35:14
        在对象。(/var/www/vhosts/sitename.com/httpdocs/sitename/assets/js/app.js:38:3)

```

# ajax - Ajax - 点击后隐藏链接

> ID：11524160
> 
> 赞同：0
> 
> 时间：2012-07-17T14:01:37.060
> 
> 标签：ajax

```
<script type="text/javascript">

      var url = document.URL;
      var strg = url.toString();
function StartAjax(ResultsId){
    $.ajax({
      type: "GET",
      url: "mark.php",
      cache: false,
    data: (strg),
      success: function(html){
        $("#"+ResultsId).append(html);
        **$("#").hide();**
      }

    });

}
</script>

<br><a href="#" name="link"  onclick="StartAjax('ResultsId');">Proceed</a>
<div id="ResultsId"></div> 
```

Ajax 做了它应该做的事情，但是我如何在链接被点击后隐藏它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:05:33.640

你应该能够做一个 $(this).hide(); 或者你可以给锚标签一个类

```
<br><a href="#" name="link" class="thisBtn" onclick="StartAjax('ResultsId');">Proceed</a> 
```

接着

```
success: function(html){
    $("#"+ResultsId).append(html);
    $(".thisBtn').hide();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:04:05.013

```
<a href="#" name="link" class="clickme" onclick="StartAjax('ResultsId');">Proceed</a>

    $('.clickme').click(function(event){

        var _this = this;
        $.ajax({
          type: "GET",
          url: "mark.php",
          cache: false,
        data: (strg),
          success: function(html){
            $("#"+ResultsId).append(html);

            $(_this).hide();

          }

        });

}); 
```

所以你在这里做的是在你身上注册点击事件，一旦它运行你就保存对当前元素的引用。由于它仍在同一范围内运行，因此您可以*成功*访问它并且可以隐藏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:04:27.907

您实际上是在问“如何使用 jQuery 选择元素”。在您的 HTML 的当前状态下，链接可能会像这样定位：

```
$('a[name=link]').hide(); 
```

但是，由于代码在由链接调用的事件回调中运行，我们可以使用对它的相对引用。@Jure C. 的回答显示了一种方法。另一个是：

```
success: (function(link) { return function(html) {
    $('#'+ResultsId).append(html);
    link.hide();
}; })($(this)) 
```

# c - 这个程序基本上是做什么的？指针减法？

> ID：11524161
> 
> 赞同：3
> 
> 时间：2012-07-17T14:01:38.353
> 
> 标签：c, string

```
int main(int argc, char* argv[])
{
   int i,s;
   s=0;
   char*p;
   for(i=1; i<argc;i++)
   {
      for (p=argv[i];*p;p++);
      s+=(p-argv[i]);
   }
 printf("%d\n",s);
 return 0;
} 
```

我很难理解这段代码的作用。

据我所知，它忽略了程序的名称，并且对于在命令行中打印的每个其他字符串，它都设置`p`为当前字符串。

1.  条件`*p`是“`p`只要不是，就继续旅行`NULL`，即直到你到达字符串的末尾？
2.  在每次迭代`s`中，将当前 的减法相加`p`，其余单词的名称为`argv[i]`，这个减法的结果是什么？这是两个ascii值的减法吗？
3.  这个程序基本上是做什么的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:07:33.903

回答这个问题的关键是理解这个表达式的含义：

```
p-argv[i] 
```

这是一个指针减法表达式，它被定义为指针所指向的元素在第一个和第二个指针之间的距离。当两个指针都指向已分配为连续块的内存区域时，此方法有效（这对于所有 C 字符串通常是正确的`argv[]`，尤其是元素）。

指针`p`先前进到字符串的末尾（注意`;`循环末尾的分号，表示循环体为空），然后`argv[i]`减去。结果是相应参数的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:08:19.617

它告诉您传递给程序的所有参数的总字符串长度。

在您的观点 (2) 中，它只是将字符串的起始地址与包含`\0`字符的地址相减

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:07:15.573

此代码计算程序的参数（作为字符串）长度的总和

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:13:10.967

它以向后类型的方式使用指针地址来计算所有参数中的总字符。

```
for (p=argv[i];*p;p++); //sets p to the address of argv[i]'s \0 terminator
   s+=(p-argv[i]);     // p minus the address of the start of argv[i] accumulated to s 
```

# python - couchdb-python：couchdb.mapping.Document 类的 rev 属性是只读的

> ID：11524165
> 
> 赞同：0
> 
> 时间：2012-07-17T14:01:51.003
> 
> 标签：python, mapping, couchdb, readonly, couchdb-python

我想知道为什么 couchdb.mapping.Document 类的 rev 属性是只读属性。甚至可以设置 id 属性，我需要在我的项目中创建一个带有 rev 的新文档，我从 CouchDB 视图中获取该文档。我知道 rev 是在 CouchDB 中生成的，但很遗憾创建者没有预测到这样的异常。此外，以我的拙见，应该有一个带有参数的 Document 类的 get 方法：ids - 它是文档的许多标识符。

```
@property
def rev(self):
    """The document revision.

    :rtype: basestring
    """
    if hasattr(self._data, 'rev'): # When data is client.Document
        return self._data.rev
    return self._data.get('_rev') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:49:16.950

你说*“我需要在我的项目中创建一个带有 rev 的新文档”*，但是无论这在这个 python 库中是否可能，这在 CouchDB 本身中是不可能的，所以允许你在你的库中设置它对你的实际数据。

CouchDB 中的`_rev`CouchDB 由 CouchDB 严格管理以解决冲突，您不能从 CouchDB 设置的值更改它。（FWIW，CouchDB 允许您设置任何（唯一）`_id`您喜欢的，这就是为什么这是您的 python 库中的可写字段）。

# wpf - WPF Custom ItemsControl - Wrapping issue

> ID：11524168
> 
> 赞同：3
> 
> 时间：2012-07-17T14:01:58.507
> 
> 标签：wpf, controltemplate, itemscontrol, wrappanel

I want to create a breadcrumb control that has a button at the beginning that will clear the breadcrumb items. My problem is getting that first button to wrap properly with the rest of the items. Here's my style:

```
<Style TargetType="{x:Type local:Breadcrumb}">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <Button Content="{Binding}"
                        FontSize="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbFontSize}" 
                        FontFamily="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbFont}"
                        FontWeight="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbFontWeight}"
                        Width="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbItemWidth}"
                        Height="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbItemHeight}"
                        Margin="0,0,-22,10"
                        Style="{DynamicResource BreadcrumbButton}" />
            </DataTemplate>
        </Setter.Value>
    </Setter>

    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <WrapPanel />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ItemsControl}">
                <WrapPanel>
                    <Button Content="Menu" Height="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbItemHeight}"
                            Width="{Binding RelativeSource={RelativeSource AncestorType=local:Breadcrumb}, Path=BreadcrumbItemWidth}"/>
                    <ItemsPresenter Height="{TemplateBinding Height}" Width="{TemplateBinding Width}" />
                </WrapPanel> 
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

When all of the items fit on the same line it displays properly:

![enter image description here](../Images/6cbcdd90016cf92d6e1d2ff3baf95273.png)

When it starts to wrap, it pushes all of the items below the "Menu" button:

![enter image description here](../Images/0a7d8879d34f6106e446ae6df8e4b047.png)

Is there a way that I can update this so that the other elements do not go below the Menu button?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:06:00.923

No, the `ItemsPresenter` will contain another `WrapPanel`, i would recommend making that button part of the items (e.g. using a [`CompositeCollection`](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)), then it is in the same `WrapPanel`.

# c# - Linq 按跨不同表的多个字段分组

> ID：11524171
> 
> 赞同：9
> 
> 时间：2012-07-17T14:02:13.453
> 
> 标签：c#, linq

在尝试将此 SQL 查询转换为 LINQ 时，我遇到了 group by 的问题。如何按源自多个表的多个列进行分组？下面的 linq 查询根本无法编译，所以我需要正确的语法

### 原始 SQL 查询

```
select LTRIM(RTRIM(e.Shortname)) 
Name, LTRIM(RTRIM(j.JobName)) 
JobName, j.JobCode, 
SUM(Hours) Hours, 
MAX(ce.LatestTimesheetEntry) LastTimeSubmitted 
from TWCTL.TW.Postings p
join TWCTL.TW.Employees e on e.EmployeeId = p.EmployeeId
join TWCTL.TW.Jobs j on j.JobCode = p.JobCode
join CentralTimeEmployees.dbo.Employees ce on ce.CtEmployeeId = e.EmployeeId
where (e.CostCentreId = 1 or e.CostCentreId = 3) 
and (p.TransactionDate >= '2012-01-01' and p.TransactionDate <= '2012-07-01') 
and j.JobCode <> 'CTCIT00001' 
and ce.DatabaseCode = 'CTL' 
and (ce.CostCentreId = 1 or ce.CostCentreId = 3)
group by j.JobName, j.JobCode, Shortname
order by e.Shortname, j.JobName 
```

### Linq 查询尝试（不工作）

```
var model = 
        from p in context.Postings
        join e in context.Employees on p.EmployeeId equals e.EmployeeId
        join j in context.Jobs on p.JobCode equals j.JobCode
        join ce in context.CentralTimeEmployees on e.EmployeeId equals ce.CtEmployeeId
        where (e.CostCentreId == 5 || e.CostCentreId == 3)
                && (p.TransactionDate >= fromDate
                    && p.TransactionDate <= toDate)
                && j.JobCode != "CTCIT00001"
                && ce.DatabaseCode == "CTL"
                && (ce.CostCentreId == 1 || ce.CostCentreId == 3)
        group j by new {j.JobName, j.JobCode} into g1
        group e by e.Shortname into g2    <- doesnt work??        
        select
            new ProjectHoursViewModel
                {Posting = p, Job = g1.Key.JobName, Employee = e, CentralTimeEmployee = ce}; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T14:21:33.413

对于初学者，您的查询是不等价的。次要的事情真的很喜欢检查不同的值，但主要的一点是你没有按相同的键分组。您在查询中遗漏的按 JobCode 分组的 SQL。你试图分组太多而不是订购它。您要汇总的值应该是您要分组的值。

至于为什么会出现语法错误，在您执行延续（`into`在`group by`or`select`子句中使用）之后，前一个范围内的所有变量都将丢失，并且仅保留延续变量（`g1`在您的情况下）。您试图引用`e`现在超出范围的引用给您带来问题。

我认为查询应该更像这样：

```
var fromDate = new DateTime(2012, 1, 1);
var toDate = new DateTime(2012, 7, 1);
var query = 
    from p in dc.Postings
    join e in dc.Employees on p.EmployeeId equals e.EmployeeId
    join j in dc.Jobs on p.JobCode equals j.JobCode
    join ce in dc.CentralTimeEmployees on e.EmployeeId equals ce.CtEmployeeId
    where (e.CostCentreId == 1 || e.CostCentreId == 3) // the SQL tested 1 or 3
       && (p.TransactionDate >= fromDate && p.TransactionDate <= toDate)
       && j.JobCode != "CTCIT00001"
       && ce.DatabaseCode == "CTL"
       && (ce.CostCentreId == 1 || ce.CostCentreId == 3)
    group new { ce.Hours, ce.LatestTimesheetEntry }
       by new { j.JobName, j.JobCode, e.ShortName } into g
    orderby g.Key.ShortName, g.Key.JobName
    select new
    {
        Name = g.Key.ShortName.Trim(),
        JobName = g.Key.JobName.Trim(),
        JobCode = g.Key.JobCode,
        Hours = g.Sum(x => x.Hours),
        LastTimeSubmitted = g.Max(x => x.LatestTimesheetEntry),
    }; 
```

# asp.net - 按顺序显示 ASP 下拉列表

> ID：11524177
> 
> 赞同：1
> 
> 时间：2012-07-17T14:02:27.760
> 
> 标签：asp.net

下面的代码是一个显示数据库中学校的下拉框，有没有办法让这些学校按字母顺序显示？

```
<td align="right" style="text-align: right; width: 170px;">
    <asp:Label ID="School_lbl" runat="server" AssociatedControlID="School" 
        Text="School:"></asp:Label>
</td>
<td style="width: 206px">
    <asp:DropDownList ID="School" runat="server" DataSourceID="School_DS" 
        DataTextField="SchoolName" AppendDataBoundItems="True"
        DataValueField="SchoolName" Font-Names="verdana" Width="185px" 
        AutoPostBack="True"
        OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">

        <asp:ListItem Selected="True">-- Select --</asp:ListItem>
    </asp:DropDownList>
    <asp:AccessDataSource ID="School_DS" runat="server" 
        DataFile="~/App_Data/MockCourt_db.mdb"
        SelectCommand="SELECT [SchoolName] FROM [tbl_school]">
    </asp:AccessDataSource>
    &nbsp;&nbsp;
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:03:58.437

将您的选择命令更改为：

```
SELECT [SchoolName] FROM [tbl_school] ORDER BY [SchoolName] ASC 
```

# wcf - 为空时的 WCF 日期时间问题

> ID：11524183
> 
> 赞同：1
> 
> 时间：2012-07-17T14:02:53.440
> 
> 标签：wcf, c#-4.0, datetime

我的班级有一个数据成员`Datetime StartDate`。

该值由数据库填充，可以为空。在这种情况下，我执行以下命令：

```
StartDate = new DateTime () 
```

此外，此属性是由 WCF 服务发送的。但是，当`StartDate`为空（等于`01/01/0001`）时，我的客户端会失去与服务的连接。

我应该为 WCF (datetimeoffset) 使用另一种类型吗？或者我该如何使用`datetime`？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:05:20.620

考虑在合同中使用可为空的 DateTime：

```
[DataMember]
public Nullable<DateTime> StartDate {get;set;} 
```

或者

```
[DataMember]
public DateTime? StartDate {get;set;} 
```

# ssrs-2008 - 在 SSRS 报告中查找平均值

> ID：11524186
> 
> 赞同：1
> 
> 时间：2012-07-17T14:03:14.423
> 
> 标签：ssrs-2008, reporting-services

您好，我在 SSRS 报告中有以下专栏。

**列名（标题）**

Mehta, Natasha(18)——它的 Title+(count) 值
Rodriguez, Lauren(19)
Harwood, Matt(19)
Lloyd, David(19)

* * *

我想从 SSRS 报告的上列中找到平均值（18+19+19+19/4）。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:17:09.887

假设该列称为“标题”，则以下可能有效：

## SQL

```
=SUM(CAST(LEFT(RIGHT([Title], 3), 2)) AS int) / COUNT([Title]) * 1.0 
```

## SSRS

```
=Sum(CDbl(Left(Right(Fields!Title.Value, 3), 2))) / CDbl(Count(Fields!Title.Value)) 
```

* * *

> 如果我们使用第一行数据 ( **Mehta, Natasha(18)** ) 作为测试字符串来逐步执行此操作，我们会得到：

1.  Sum(CDbl(Left( `Right(Fields!Title.Value, 3)`, 2))) / CDbl(Count(Fields!Title.Value))
    *   这需要字符串**'Mehta, Natasha(18)'**最右边的 3 个字符，这将返回字符串：**'18)'**
2.  Sum(CDbl( `Left(Right(Fields!Title.Value, 3), 2)`, 2))) / CDbl(Count(Fields!Title.Value))
    *   *或*Sum(CDbl( `Left('18)'), 2)`, 2))) / CDbl(Count(Fields!Title.Value))
    *   **这从字符串'18)'**中获取最左边的 2 个字符，返回字符串：**'18'**
3.  Sum( `CDbl(Left(Right(Fields!Title.Value, 3), 2))`) / CDbl(Count(Fields!Title.Value))
    *   *或*Sum( `CDbl('18')`) / CDbl(Count(Fields!Title.Value))
    *   将字符串**'18'**转换为双精度，返回：**18.0**
    *   SQL 中的`CAST()`函数（可以执行 的等价物`CDbl()`）可以在[这里](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)阅读。
4.  `Sum(CDbl(Left(Right(Fields!Title.Value, 3), 2)))`/ CDbl(Count(Fields!Title.Value))
    *   这将汇总列中存在的转换金额，如果我们假设您在示例中提到的所有行都在列中，那么这将给出等价于...
    *   `Sum(18.0, 19.0, 19.0, 19.0)`/ CDbl(Count(Fields!Title.Value))
    *   这将返回整数值：**75**
5.  Sum(CDbl(Left(Right(Fields!Title.Value, 3), 2))) /`CDbl(Count(Fields!Title.Value))`
    *   *或*75 /`CDbl(Count(Fields!Title.Value))`
    *   在这种情况下，这将计算行数并转换为双精度数。
    *   **注意：这将在求和****之后**强制转换，即转换整数值 4 并返回一个双精度值：**4.0**
6.  `Sum(CDbl(Left(Right(Fields!Title.Value, 3), 2))) / CDbl(Count(Fields!Title.Value))`
    *   *或者* `75 / 4.0`
    *   给出最终结果：**18.75**
    *   **注意：**如果分母不是双精度数，它将执行数字的截断（在 SQL 中它将对数字进行四舍五入）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T06:57:59.707

我会在数据集查询本身中使用 SQL 函数，以便将数字分成独立的列。将数据正确地放入报告中比将其固定在报告中更正确。

# java - 同步代码块是否仅阻塞分配或整个块体？

> ID：11524187
> 
> 赞同：2
> 
> 时间：2012-07-17T14:03:18.487
> 
> 标签：java, concurrency, synchronization, java.util.concurrent

我有一个数据 var，`monthArray`由多个消费者读取，并由单个定期更新程序线程定期更新。都是异步的。

我已经考虑了这两个选项来安全地执行更新。

```
 ArrayList<String> tempArray = ModelJob.getDistinctMonths(user, true);       
    synchronized (monthArray) {
        monthArray = tempArray;
    } 
```

或者

```
 synchronized (monthArray) {
        monthArray = ModelJob.getDistinctMonths(user, true);
    } 
```

第一个背后的想法是`ModelJob.getDistinctMonths(user, true);`调用很耗时，我不想让同步阻塞更长的时间，只是为了用更新的数组快速重新分配旧数组。然而似乎是一个混淆，我只想在完全必要的情况下这样做。谁能给我任何关于jvm如何处理这种同步和天气的见解，或者不做前者会让我的性能有所提高吗？基本上我问jvm是否会阻塞整个静态ModelJob调用，或者它是否能够只阻塞重新分配并且安全，如果是这样，这样做是否足够聪明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:05:52.657

假设您不需要*围绕*调用进行同步`getDistinctMonths()`（该调用是线程安全的，并且您不需要围绕调用和分配的原子性），那么您可以围绕分配进行同步（是的，阻塞是仅限于同步块，否则语法将毫无意义）。请注意，@JohnVint 提出了一个很好的观点，即您不应在`monthArray`修改参考时对其进行同步。您必须在不会更改的单独对象实例上进行同步。

最后，您可以删除同步块并使`monthArray`成员易失并获得相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:17:20.693

从性能的角度来看，使用第一种方法会更好。它将避免不必要的同步。

您必须记住的一件事是，即使对 monthArray 的**读取**也需要同步。仅当更新和读取使用相同的对象锁同步时，同步才有效。我更喜欢使用类对象锁。例如，如果此代码是 ModelUpdate 类的一部分，则使用以下代码

```
synchronized(ModelUpdate.class) {
        monthArray = tempArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:18:37.777

同步块将始终阻塞其整个执行。作为参数给出的对象（在您的情况下为monthArray）称为“监视器”，并将保证具有相同对象（monthArray）作为参数的所有其他同步块将异步执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T14:17:05.743

如果您只是将`volatile`修饰符放在`monthArray`并删除所有`synchronized`块，您将获得无锁线程安全。

此外，JVM 可能会优化您的更清洁（第二）版本的代码，使其像第一个版本一样执行。因此，如果保留锁，最好坚持使用更清洁的版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T14:19:35.903

这里一个明显的缺陷是您不应该对将要更改的对象进行同步。

我更喜欢第一个示例，而是使用普通锁

```
final Object lock = new Object();

synchronized(lock){
   monthArr = ...;
} 
```

然而，正如大多数人所说，声明 monthArr`volatile`将产生相同的效果。

# jsf-2 - 编码为 HTML 实体的 JSF 请求范围表单

> ID：11524196
> 
> 赞同：0
> 
> 时间：2012-07-17T14:03:43.793
> 
> 标签：jsf-2, primefaces, crud

这类似于[关于字符集验证](https://stackoverflow.com/questions/8035232/jsf-different-charset-validation-sending-a-form-database)的问题，除了一些字符（例如“żźć”）在提交后显示为 HTML 实体（“żźć”）。奇怪的是像“&”这样的东西保存为“&”。

我已经在 Tomcat 端尝试过 Spring 的 CharacterEncodingFilter 和 Connector，但这似乎根本没有帮助。数据库编码似乎不是问题，因为我的表单在与 AJAX 请求和会话 bean 一起使用时工作正常（与正常的提交和请求范围相反）。

这是我的表格的一部分：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >
  <h:body>
   <ui:composition template="/tpls/main-layout.xhtml">
   <ui:define name="content">
    <h:form>
    ...
     <p:commandButton value="#{i18n.msg('_Save')}"
      action="view" actionListener="#{readerController.save}" ajax="false" />
    ...
     <p:panelGrid>
      <p:row>
       <p:column><h:outputLabel for="lastName" value="#{i18n.msg('Reader.lastName')}" /></p:column>
       <p:column><p:inputText id="lastName" value="#{readerController.currentReader.lastName}" required="true">
        <p:ajax update="msg-lastName" event="change" />
        <f:validateRegex pattern="#{applicationConfiguration.nameValidationPattern}" />
        <f:validateLength maximum="50" />
       </p:inputText></p:column>
       <p:column><p:message for="lastName" id="msg-lastName" /></p:column>
      </p:row>
      ...
     </p:panelGrid>
    </h:form>
  </ui:define>
  </ui:composition>
</h:body>
</html> 
```

**编辑**：作为一个澄清 - 你可以`#{i18n.msg('_Save')}`用`Save`和替换之类的东西`#{applicationConfiguration.nameValidationPattern}`，例如`[^0-9]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:04:40.280

完全魔术。

我正在使用它进入我的编辑视图：

```
<p:commandButton action="#{readerController.edit(list.id)}" title="#{i18n.msg('_Edit')}" icon="ui-icon-gear" /> 
```

这要提交：

```
<p:commandButton ajax="false" value="#{i18n.msg('_Save')}" action="view" actionListener="#{readerController.save}" /> 
```

并且编码无法正常工作。

使用它去编辑视图：

```
<p:commandButton ajax="false" action="#{readerController.edit(list.id)}" title="#{i18n.msg('_Edit')}" icon="ui-icon-gear" /> 
```

同样提交和编码工作正常......更准确地说，在两端使用 ajax="false" 或 ajax="true" 工作。

去搞清楚。

**编辑：**实际上是上述内容*和来自*[Corrupted characters](https://stackoverflow.com/questions/8035232/jsf-different-charset-validation-sending-a-form-database)的CharacterEncodingFilter在提交表单后重新显示在输入中。

# java - Java Web 服务 - 解析响应文本的框架

> ID：11524197
> 
> 赞同：0
> 
> 时间：2012-07-17T14:03:46.543
> 
> 标签：java, web-services, http, jakarta-ee, httpwebrequest

我正在编写一个调用 Web 服务并使用其响应文本的 Java 应用程序。（即）它调用一个 URL，如`http://web-server.com/item/3455`

该 URL 将返回响应文本（字符串），例如“nexus”。

为了实现上述功能，我们可以利用任何现成的框架吗？或者我应该从头开始编写功能。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:11:06.887

即使 API 不是严格的 RESTful，您也可以像这样使用 spring-web 的[RestTemplate](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/client/RestTemplate.html)：

```
RestTemplate restTemplate = new RestTemplate();
String response = restTemplate.getForObject("http://web-server.com/item/3455", String.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:06:09.740

根据 url，您似乎正在进行 REST 调用。您可以使用[HTTPURLConnection](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests) API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:14:32.120

您所需要的只是一个简单的 HTTP 客户端来执行您所说的操作。来自 Apache的[HttpClient](http://hc.apache.org/httpclient-3.x/)项目是一个受欢迎的选择，并且肯定会为您尝试做的事情工作。

# cmake - 如何为所有子模块添加 CMake 自定义目标

> ID：11524201
> 
> 赞同：3
> 
> 时间：2012-07-17T14:04:01.377
> 
> 标签：cmake

简介：
有谁知道是否可以在 CMake 中添加一个包含在所有子模块中的 custom_target？一个示例是如何将 Install/Run_Tests/Package 目标添加到构建中的每个子模块。

更多细节：
我的场景是目录结构，例如：

```
项目
  --CMakeLists.txt
  --SubMod A
      --CMakeListsA.txt
  --SubMod B
      --CMakeListsB.txt

```

我想将用于 doxygen 生成的 custom_target 添加到顶级 CMakeLists.txt 文件中，并将其包含在子模块 A 和 B 中。所有模块之间的命令将完全相同。

我可以将 custom_target 添加到每个子模块的 cmake 文件中，但这似乎是错误的。另一个问题是，如果我让 CMake 生成 Visual Studio 解决方案，则会与已经存在的“doc”项目发生冲突（如果打开顶级解决方案）。然而，CMake 提供的目标足够聪明，不会被包含两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:20:50.163

我认为您能做的最好的事情是将其包装`add_custom_target`在顶级 CMakeLists.txt 中定义的函数中，并在每个 CMakeLists.txt 中使用它。

为了避免重复目标名称的问题，您可以定义如下函数：

```
function(AddDoxygenTarget)
  add_custom_target(Doxygen${PROJECT_NAME} ...)
endfunction() 
```

这取决于每个子模块的 CMakeLists.txt 有一个`project`命令。如果没有，您可以使用每个子目录的名称：

```
 get_filename_component(SubDirName ${CMAKE_CURRENT_LIST_DIR} NAME)
  add_custom_target(Doxygen${SubDirName} ...) 
```

# java - 监控进程或方法的已用时间

> ID：11524202
> 
> 赞同：0
> 
> 时间：2012-07-17T14:04:03.257
> 
> 标签：java, android

在我的 Android 应用程序中，我使用 TTS 和语音识别。尽管使用了所有可用的回调来了解它们所处的状态，但我仍然遇到无法处理的情况。例子：

1) TTS 报告初始化成功，但无法说话（某些自定义 TTS 引擎的已知问题（未提及名称））。

2) 初始连接成功后失去网络访问权限，这可能会导致在返回网络错误之前存在大量延迟。

还有其他情况我不会让你厌烦的。

我已经阅读并消化了诸如[this](https://stackoverflow.com/questions/1770010/how-do-i-measure-time-elapsed-in-java)和[this](https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java)之类的时间监控线程，因此我了解如何准确确定X&Y之间的时间，但这是我所追求的一种监控方法，当达到设定的限制时我可以做出反应。

请原谅我的伪代码，但我举起手来，我不知道从哪里开始......

```
 public boolean methodSuccess = false;

    public void troublesomeMethod() {
    if(// everything completed and I got a usual result) {
    methodSuccess = true;
    } 

    public boolean timeMonitor(int maxDuration) {

    // use System.currentTimeMillis() here as start value

    // monitor time elapsed here in loop
    // monitor methodSuccess in loop
    // return false if methodSuccess is set to true whilst in loop

    // break if maxDuration reached and return true

    } 
```

再次，请原谅上面的代码，我根本想不出如何实现这一点......

另外，如果我从上面开始：

```
 boolean monitorThis = timeMonitor(5000); // let me know when 5 seconds have passed
    startTroublesomeMethod(); // the one I want to monitor 
```

那么，如果我必须在 startTroublesomeMethod() 实际开始之前“等待”返回的布尔响应，那将毫无意义！还是在我开始监控之前就开始了麻烦的方法……

```
 if(monitorThis) {
    // react to lagging method by destroying TTS or Listener Object
    } else {
    // the troublesomeMethod behaved normally - do nothing
    } 
```

我希望在我的困惑中，我已经设法表达了我想要实现的目标。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:36:38.710

您可以使用 a`Handler`过帐延迟支票。例如：

```
 Handler mHandler = new Handler();
    mHandler.postDelayed(new Runnable() {
        @Override public void run() {
            // You can set a flag or if you run your method 
            // on another thread, you can interrupt that thread. 
        }
    }, 5000); 
```

请记住，处理程序设置为创建它的同一线程。如果您尝试监视的方法在同一线程中运行，您可能会遇到问题。在另一个线程中调用您的方法并保留对该线程的引用以在必要时中断它。

```
 Thread mThread = new Thread(new Runnable() {
        @Override public void run() {
            // Call your method here and keep a reference to this thread.
        }
    });
    mThread.run(); 
```

# c# - 如何为数据网格单元分配单位数量

> ID：11524204
> 
> 赞同：0
> 
> 时间：2012-07-17T14:04:04.140
> 
> 标签：c#, winforms, visual-studio-2010

```
public class DataGridLayer
    {
        public double Layerdepth { get; set; }  //  (m)
        public double Anndiameter { get; set; } // (inches)
        public double Layergradient { get; set; }   //(k/m)
        public double Formationconductivity { get; set; }   //(W/m/k)
        public double Formationcapacity { get; set; }   //(j/kg/k)
        public double Ftiondensity { get; set; }    //(kg/m3)

    } 
```

上面的类是数据网格层。我想确保在 datagrid 单元格中输入的值在`(m),(inches),(k/m),(W/m/k),(j/kg/k),(kg/m3)`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:43:24.617

框中没有单元格的“单位”。但是您有多种选择来提供单位：

1.  在列标题中显示单位名称`Anndiameter (inches)`。因此，所有输入的值都将被视为英寸。
2.  将列添加到值列的右侧。用组合框单元格填充它，这将允许选择价值单位。
3.  创建您自己的数据网格单元，它将提供与选项 2 相同的功能。

# c++ - 声明一个有值的数组

> ID：11524208
> 
> 赞同：0
> 
> 时间：2012-07-17T14:04:04.653
> 
> 标签：c++, multidimensional-array, initialization

我正在用 C++ 编写一个程序，我试图用值声明一个数组，但只有这个值被设置为数组中的第一个成员。

```
char mines[100][100] = {'0'}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:09:00.883

`std::fill`在每个维度上使用：

```
for (int i = 0; i < 100; ++i)
    std::fill (mines[i], mines[i] + 100, '0'); 
```

或者在 C++11 中：

```
for (auto &chars : mines)
    std::fill (std::begin (chars), std::end (chars), '0'); 
```

更简单的是，使用数组是连续的这一事实，您可以为自己节省循环：

```
std::fill (mines, mines + 100*100, '0'); 
```

正如 Shahbaz 指出的那样，要消除那里的幻数，请替换`mines + 100*100`为`sizeof(mines)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:09:19.337

如果您不想编写或生成 10000 个元素的初始化列表，您可以这样做：

```
char mines[100][100];
memset(mines, '0', sizeof(mines)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:07:00.720

我通常使用 for 循环来初始化所有值。据我所知，您只能通过列表进行初始化，而不是所有元素的默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:10:38.457

你只会通过做初始化第一个元素

```
char mines[100][100] = {'0'}; 
```

其余部分将使用`0`（值而不是字符）初始化，您将需要一个循环。像这样：

```
int row, column;
for (row = 0; row < 100; row++)
    for (column = 0; column < 100; column++)
        mines[row][column] = '0'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T14:44:19.113

Luna，这称为零初始化器，仅用于将所有值初始化为零对应值：空指针，零。如果您尝试将 char 初始化为 0 它将起作用，但对于任何其他值都不会。

更多信息[在这里](http://www.kuzbass.ru:8086/docs/isocpp/decl.html#dcl.init)。

```
#include <iostream>

int main(int argc, char *argv[])
{
    int value[2][2] = {0};

    for(int i = 0; i < 2; ++i)
       for (int j = 0; j < 2; ++j)
           std::cout << (value[i][j] == 0) << std::endl;

    return 0;
} 
```

输出：

> 1 1 1 1

如果您需要使用特定值进行初始化，我认为 Luchian 使用 memset 提供了最佳解决方案。

# c# - 文件上传控件的 ASP.NET 问题

> ID：11524209
> 
> 赞同：1
> 
> 时间：2012-07-17T14:04:04.450
> 
> 标签：c#, asp.net, .net, visual-studio-2010, updatepanel

我在尝试使用 ASP.NET 文件上传控件时遇到了困难。发生的事情是，当我从后面的代码中调用文件上传控件时，我总是得到 FileUploadControl.HasFile = false。我进行了一些研究并尝试了不同的方法，但无济于事。该控件用于以下场景：该控件包含在一个 div 中，该 div 将通过 JQuery 作为弹出对话框调用。与 fileupload 控件一起，有两个链接按钮将操作上述控件（从文件导入 XML 并进行操作）。

谢谢。

下面是我的代码示例。

```
<asp:scriptmanager id="ScriptManager1" runat="server">
    </asp:scriptmanager>
<div style="text-align: center; margin-left: auto; margin-right: auto">
    <asp:fileupload id="FileUploadControl" runat="server" />
    <asp:updatepanel runat="server">
                <ContentTemplate>                    
                    &nbsp;
                    <asp:LinkButton ID="Append" runat="server" Text="Append" OnClick="Append_Click"></asp:LinkButton>
                    &nbsp;
                    <asp:LinkButton ID="Overwrite" runat="server" Text="Overwrite" OnClick="Overwrite_Click"></asp:LinkButton>
                </ContentTemplate>
                <Triggers>
                    <asp:PostBackTrigger ControlID="Append" />
                    <asp:PostBackTrigger ControlID="Overwrite" />
                </Triggers>
            </asp:updatepanel>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:23:15.817

您需要删除`UpdatePanel`. 您不能在部分回发时上传文件，如果`UpdatePanel`触发器中的所有内容都不需要上传文件：

```
<div style="text-align: center; margin-left: auto; margin-right: auto">
    <asp:fileupload id="FileUploadControl" runat="server" /> 
        &nbsp;
        <asp:LinkButton ID="Append" runat="server" Text="Append" OnClick="Append_Click"></asp:LinkButton>
        &nbsp;
        <asp:LinkButton ID="Overwrite" runat="server" Text="Overwrite" OnClick="Overwrite_Click"></asp:LinkButton>
</div> 
```

*注意：开发的一般提示`UpdatePanel`。如果您遇到任何没有意义的奇怪现象，请删除`UpdatePanel`并测试您的代码。根据您的页面/控件复杂性，UpdatePanel 有很多限制。*

# android - 添加TextView时AndroidRelativeLayout.addView()异常

> ID：11524215
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:04:35.490
> 
> 标签：android

`null pointer`当我在相对布局上调用方法 addView() 以添加 textView 时出现异常 ( )

```
public class FormAddNewTaskActivity extends Activity {

    private final String TAG = FormAddNewTaskActivity.class.getCanonicalName();

    private TaskLiteApplication taskLiteApplication;

    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.form_add_task);

        RelativeLayout rl = (RelativeLayout) findViewById(R.layout.form_add_task);
        TextView tv = new TextView(taskLiteApplication);
        tv.setText("blah blah");
        tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
        rl.addView(tv); //null pointer exeption there

        //set application context
        taskLiteApplication = ((TaskLiteApplication)getApplicationContext());

        //Spinner set list user
        Spinner s = (Spinner) this.findViewById(R.id.spinnerUser);

        //set list user
        ArrayList<User> listUser = taskLiteApplication.getCtrlUser().getListUserFromDataBase();

        //adapter user
        UserSpinnerAdapter userSpinnerAdapter = new UserSpinnerAdapter(listUser , getApplicationContext());

        //set adapter on the spinner
        s.setAdapter(userSpinnerAdapter);

        //set listener on add button task
        ImageButton imageButtonAdd = (ImageButton) findViewById(R.id.imageButtonAdd);
        imageButtonAdd.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.d(TAG, "add form new subtask");
            }
        });

    }

} 
```

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#fff" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <EditText
            android:id="@+id/editTextGroupTaskName"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hint_task_name"
            >

            <requestFocus />
        </EditText>

         <Spinner
            android:id="@+id/spinnerUser"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textViewDateDue"
            android:layout_below="@+id/editTextGroupTaskName" />      

        <TextView
            android:id="@+id/textViewDateDue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/spinnerUser"
            android:text="@string/date_due"
            android:textColor="#000"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <DatePicker
            android:id="@+id/datePickerDateDue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/textViewDateDue" />

        <TextView 
            android:id="@+id/textViewSubTask"
            android:layout_below="@id/datePickerDateDue"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/sub_task"
            android:textColor="#000"
            android:paddingTop="11dp"
            android:paddingBottom="11dp"
            android:textAppearance="?android:attr/textAppearanceMedium"
            />

        <ImageButton
            android:id="@+id/imageButtonAdd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@id/datePickerDateDue"
            android:src="@drawable/add" />

    </RelativeLayout>

</ScrollView> 
```

原木猫：

```
 07-17 14:07:40.696: D/AndroidRuntime(338): Shutting down VM
...
07-17 14:07:40.707: E/AndroidRuntime(338): Caused by: java.lang.NullPointerException
07-17 14:07:40.707: E/AndroidRuntime(338):  at android.view.View.<init>(View.java:1823)
07-17 14:07:40.707: E/AndroidRuntime(338):  at android.widget.TextView.<init>(TextView.java:326)
07-17 14:07:40.707: E/AndroidRuntime(338):  at android.widget.TextView.<init>(TextView.java:320)
07-17 14:07:40.707: E/AndroidRuntime(338):  at android.widget.TextView.<init>(TextView.java:315)
07-17 14:07:40.707: E/AndroidRuntime(338):  at activity.FormAddNewTaskActivity.onCreate(FormAddNewTaskActivity.java:38)
07-17 14:07:40.707: E/AndroidRuntime(338):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:08:56.180

那里只能`rl`为空。

也许代替`RelativeLayout rl = (RelativeLayout) findViewById(R.layout.form_add_task)`, 做`RelativeLayout rl = (RelativeLayout) findViewById(R.id.relative_layout)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:09:31.333

`RelativeLayout rl = (RelativeLayout) findViewById(R.layout.form_add_task);`

您正在向查找器发送布局标签`View`。将此添加到您的 XML 中：

```
<RelativeLayout
        android:id="@+id/form_add_task"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" > 
```

并致电：

`RelativeLayout rl = (RelativeLayout) findViewById(R.id.form_add_task);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:10:16.247

问题是你的相对布局。尝试：

```
<RelativeLayout
        android:id="@+id/myLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" > 
```

和

```
 RelativeLayout rl = (RelativeLayout) findViewById(R.id.myLayout); 
```

# mysql - 图和关系数据模型

> ID：11524217
> 
> 赞同：4
> 
> 时间：2012-07-17T14:04:37.137
> 
> 标签：mysql, nosql, relational-database, neo4j, graph-databases

对我来说，关系数据*是*一个图，其中每个表都是一个节点，每个外键是连接两个节点的边。

因此，当我听到诸如 Neo4j 和“图形数据库”之类的东西时，我很难理解它们与关系模型在本质上有何不同，关系模型本身就是一个图形！

最重要的是，因为我无法区分两者之间的区别，所以我很难弄清楚哪些问题域最好用图模型解决，哪些问题最好用关系模型解决。我正在寻找一组指导方针说：*嘿，这个问题绝对最好用图模型来表示，所以我将使用*（比如说）*Neo4j。*或者说：*这个问题肯定是最好用关系模型来表示，所以我会用*（比如说）*MySQL。*

**编辑**：总之，*图模型比关系模型更好地解决哪些问题域（数据方面）？*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T15:37:59.113

您想要使用 neo4j 而不是关系数据库的一种情况：

一旦您**主要在表之间使用多个连接，尤其是在连接自身的表时**，请考虑使用图形数据库。

在我看来，使用图形数据库是一种存储此类信息的方法，我以很少的方式查询这些信息（或者我可能只使用一种查询模式）并且我正在寻找答案的速度. 当您使用大量查询类型并且仍然具有足够的计算能力时，拥有关系数据库会更好。

如果您想了解更多并深入了解图形数据库，我建议您阅读有关数学图的一般内容（[http://en.wikipedia.org/wiki/Graph](http://en.wikipedia.org/wiki/Graph)），但这可能很难理解万一你没有很强的数学背景。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-03T18:02:00.413

正如您所说，如果您将节点与行进行比较，将关系与表进行比较，将属性与列进行比较，那么图形和关系数据库的结构可能看起来相同。

但基本区别在于我们如何访问数据。

您可以使用关系连接两个节点并为其添加标签，并轻松查找它们是否相关而不是使用外键（如果表中有大量数据，这会使其变慢）。

使用 Graph DB 在 RDBMS 中维护有关该节点（相关）的关系和附加信息。如果应用程序有要求，您可以在单个应用程序中使用它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-01-26T14:08:43.243

简而言之，“图”的意思是“递归的”。当您想在安排如下后递归处理数据时，您需要图表：

```
struct node {
     *node[] edges;
} 
```

或者，作为连接矩阵：

```
 | a | b | c |
--------------
a | x |   |   |
b |   | x |   |
c |   |   | x | 
```

此类算法的示例是 Dijkstra 和梯度下降。

# regex - 从谷歌搜索下载前 1000 张图片

> ID：11524218
> 
> 赞同：15
> 
> 时间：2012-07-17T14:04:47.667
> 
> 标签：regex, image, shell, uri

我对谷歌图片进行了一些搜索

[http://www.google.com/search?hl=en&q=panda&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1287&bih=672&um=1&ie=UTF-8&tbm=isch&source=og&sa =N&tab=wi&ei=qW4FUJigJ4jWtAbToInABg](http://www.google.com/search?hl=en&q=panda&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&biw=1287&bih=672&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=qW4FUJigJ4jWtAbToInABg)

结果是成千上万的照片。我正在寻找一个可以下载第一`n`张图像的 shell 脚本，例如 1000 或 500。

我怎样才能做到这一点 ？

我想我需要一些高级正则表达式或类似的东西。我尝试了很多东西但无济于事，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T18:33:08.337

**更新 4：** PhantomJS 现已过时，我使用 Selenium 和 Chrome 无头在 Python 中创建了一个新脚本 google-images.py。有关更多详细信息，请参见此处：[https ://stackoverflow.com/a/61982397/218294](https://stackoverflow.com/a/61982397/218294)

**更新 3：**我修复了脚本以使用 phantomjs 2.x。

**更新 2：**我修改了脚本以使用 phantomjs。它更难安装，但至少它可以再次工作。[http://sam.nipl.net/b/google-images](http://sam.nipl.net/b/google-images) [http://sam.nipl.net/b/google-images.js](http://sam.nipl.net/b/google-images.js)

**更新 1：**不幸的是，这不再有效。现在似乎需要 Javascript 和其他魔法来查找图像的位置。这是雅虎图像搜索脚本的一个版本：http: [//sam.nipl.net/code/nipl-tools/bin/yimg](http://sam.nipl.net/code/nipl-tools/bin/yimg)

**原始答案：**为此，我一起破解了一些东西。我通常会编写较小的工具并将它们一起使用，但您要求的是一个 shell 脚本，而不是三打。这是故意密集的代码。

[http://sam.nipl.net/code/nipl-tools/bin/google-images](http://sam.nipl.net/code/nipl-tools/bin/google-images)

到目前为止，它似乎工作得很好。请让我知道您是否可以改进它，或者建议任何更好的编码技术（假设它是一个 shell 脚本）。

```
#!/bin/bash
[ $# = 0 ] && { prog=`basename "$0"`;
echo >&2 "usage: $prog query count parallel safe opts timeout tries agent1 agent2
e.g. : $prog ostrich
       $prog nipl 100 20 on isz:l,itp:clipart 5 10"; exit 2; }
query=$1 count=${2:-20} parallel=${3:-10} safe=$4 opts=$5 timeout=${6:-10} tries=${7:-2}
agent1=${8:-Mozilla/5.0} agent2=${9:-Googlebot-Image/1.0}
query_esc=`perl -e 'use URI::Escape; print uri_escape($ARGV[0]);' "$query"`
dir=`echo "$query_esc" | sed 's/%20/-/g'`; mkdir "$dir" || exit 2; cd "$dir"
url="http://www.google.com/search?tbm=isch&safe=$safe&tbs=$opts&q=$query_esc" procs=0
echo >.URL "$url" ; for A; do echo >>.args "$A"; done
htmlsplit() { tr '\n\r \t' ' ' | sed 's/</\n</g; s/>/>\n/g; s/\n *\n/\n/g; s/^ *\n//; s/ $//;'; }
for start in `seq 0 20 $[$count-1]`; do
wget -U"$agent1" -T"$timeout" --tries="$tries" -O- "$url&start=$start" | htmlsplit
done | perl -ne 'use HTML::Entities; /^<a .*?href="(.*?)"/ and print decode_entities($1), "\n";' | grep '/imgres?' |
perl -ne 'use URI::Escape; ($img, $ref) = map { uri_unescape($_) } /imgurl=(.*?)&imgrefurl=(.*?)&/;
$ext = $img; for ($ext) { s,.*[/.],,; s/[^a-z0-9].*//i; $_ ||= "img"; }
$save = sprintf("%04d.$ext", ++$i); print join("\t", $save, $img, $ref), "\n";' |
tee -a .images.tsv |
while IFS=$'\t' read -r save img ref; do
wget -U"$agent2" -T"$timeout" --tries="$tries" --referer="$ref" -O "$save" "$img" || rm "$save" &
procs=$[$procs + 1]; [ $procs = $parallel ] && { wait; procs=0; }
done ; wait 
```

特征：

*   小于 1500 字节
*   解释用法，如果在没有参数的情况下运行
*   并行下载完整图像
*   安全搜索选项
*   图像大小、类型等 opts 字符串
*   超时/重试选项
*   冒充 googlebot 获取所有图像
*   数字图像文件
*   保存元数据

有时间我会发布一个模块化版本，以展示它可以用一组 shell 脚本和简单的工具很好地完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T14:19:47.353

我不认为你可以单独使用正则表达式来完成整个任务。这个问题有3个部分-

**1** .提取所有图像的链接 -----> 不能用正则表达式完成。为此，您需要使用基于 Web 的语言。谷歌有 API 以编程方式执行此操作。看看[这里](https://developers.google.com/custom-search/v1/overview)和[这里](https://developers.google.com/web-search/docs/)。

**2** .假设您在第一步中成功使用了一些基于 Web 的语言，您可以使用以下正则表达式，它使用前瞻来提取确切的图像 URL

```
(?<=imgurl=).*?(?=&) 
```

上面的正则表达式说 -从**遇到****符号****之后开始抓取所有内容`imgurl=``&`**。有关示例，[请参见此处，我在其中获取了搜索结果的第一张图片的 URL，并提取了图片 URL。](http://regexr.com?31i8f)

我是如何得出上述正则表达式的？通过检查在图像搜索中找到的图像的链接。

**3** .现在您已经获得了图像 URL，使用一些基于 Web 的语言/工具来下载您的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T15:19:12.010

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T06:00:23.597

工作量这么大？为什么不使用批量图像下载器？它有 100 张图像限制。

并且需要为具有 Java 图像查看器的站点编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T12:10:08.563

如果您想要图像的高度和宽度，请响应 Pavan Manjunath

`(?<=imgurl=)(?<imgurl>.*?)(?=&).*?(?<=h=)(?<height>.*?)(?=&).*?(?<=w=)(?<width>.*?)(?=&)`

您获得 3 个正则表达式组*imgurl*、*height*和*width*以及信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T15:29:45.697

与其尝试解析 HTML（这非常困难并且可能会破坏），不如考虑[@Paven](https://stackoverflow.com/a/11524501/7093)在他的回答中突出显示的 API。

此外，考虑使用已经尝试做类似事情的工具。WGET (web-get) 具有类似蜘蛛的功能，用于跟踪链接（特别是针对指定的文件类型）。请参阅 StackOverflow 问题[“我如何使用 wget 将所有图像下载到单个文件夹中”的](https://stackoverflow.com/q/4602153/7093)答案。

正则表达式非常有用，但我不认为它是在这种情况下 - 记住正则表达式的口头禅：

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。
> 
> ——杰米·扎温斯基

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-28T09:09:18.013

我找到了一种更简单的方法来使用[这个工具](http://download.cnet.com/Google-Image-Downloader/3000-2381_4-75439931.html)，我可以确认它在这篇文章中运行良好。 ![截屏](../Images/29826d611f6540218e3f7dcb135526fb.png)

对开发者的功能要求：

*   获取图像的预览以验证它是否正确。
*   允许顺序输入多个术语（即批处理）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-02T01:36:59.973

Python 脚本：要从 Google 图片搜索下载全分辨率图片，目前它每次查询下载 100 张图片

```
from bs4 import BeautifulSoup
import requests
import re
import urllib2
import os
import cookielib
import json

def get_soup(url,header):
    return BeautifulSoup(urllib2.urlopen(urllib2.Request(url,headers=header)),"html.parser")

query = raw_input("query image")# you can change the query for the image  here
image_type="ActiOn"
query= query.split()
query='+'.join(query)
url="https://www.google.co.in/search?q="+query+"&source=lnms&tbm=isch"
print url
#add the directory for your image here
DIR="C:\\Users\\Rishabh\\Pictures\\"+query.split('+')[0]+"\\"
header={'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.134 Safari/537.36"
}
soup = get_soup(url,header)

ActualImages=[]# contains the link for Large original images, type of  image
for a in soup.find_all("div",{"class":"rg_meta"}):
    link , Type =json.loads(a.text)["ou"]  ,json.loads(a.text)["ity"]
    ActualImages.append((link,Type))

print  "there are total" , len(ActualImages),"images"

###print images
for i , (img , Type) in enumerate( ActualImages):
    try:
        req = urllib2.Request(img, headers={'User-Agent' : header})
        raw_img = urllib2.urlopen(req).read()
        if not os.path.exists(DIR):
            os.mkdir(DIR)
        cntr = len([i for i in os.listdir(DIR) if image_type in i]) + 1
        print cntr
        if len(Type)==0:
            f = open(DIR + image_type + "_"+ str(cntr)+".jpg", 'wb')
        else :
            f = open(DIR + image_type + "_"+ str(cntr)+"."+Type, 'wb')

        f.write(raw_img)
        f.close()
    except Exception as e:
        print "could not load : "+img
        print e 
```

我在这里重新发布我的解决方案我在以下问题上发布的原始解决方案 [https://stackoverflow.com/a/28487500/2875380](https://stackoverflow.com/a/28487500/2875380)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-16T14:31:18.693

我用它下载了 1000 张图片，它 100% 对我有用： [atif93/google_image_downloader](https://github.com/atif93/google_image_downloader)

下载后打开终端并安装 Selenium

```
$ pip install selenium --user 
```

然后检查你的python版本

```
$ python --version 
```

如果运行`python 2.7`然后下载 1000 张披萨运行图像：

```
$ python image_download_python2.py 'pizza' '1000' 
```

如果运行`python 3`然后下载 1000 张披萨运行图像：

```
$ python image_download_python3.py 'pizza' '1000' 
```

细分是：

```
python image_download_python2.py <query> <number of images>
python image_download_python3.py <query> <number of images> 
```

*查询*是您要查找的图像名称*，图像数量*为 1000。在上面的示例中，我的查询是比萨饼，我想要 1000 张图像

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-02T07:47:20.483

使用这个库怎么样？[谷歌图片下载](https://github.com/hardikvasa/google-images-download)

对于仍在寻找下载 100 张图像的体面方式的任何人，都可以使用此命令行参数代码。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-10-11T00:47:37.780

github 上还有其他库 - 这看起来相当不错 [https://github.com/Achillefs/google-cse](https://github.com/Achillefs/google-cse)

```
g = GoogleCSE.image_search('Ian Kilminster')
img = g.fetch.results.first.link
file = img.split('/').last
File.open(file,'w') {|f| f.write(open(img).read)} 
`open -a Preview #{file}` 
```

# templates - 带有样式表的网络报告

> ID：11524219
> 
> 赞同：0
> 
> 时间：2012-07-17T14:04:53.977
> 
> 标签：templates, coldfusion, coldfusion-9

我需要创建一些数据库驱动的报告，而不是再次重新创建轮子，我很好奇是否有任何网站列出了报告类型模板。我知道有大量的免费模板可供前端/GUI 下载，但是对于后端可能有用的东西太多了。所以，我希望这里的人可能有一些建议。我正在使用 Cooldfusion，但用于布局工作，但它并不真正关心什么语言（asp，php），因为我可以将它调整为适用于 CF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:43:20.233

Coldfusion 9 有[CFgrid](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7baf.html)，它可以在报告的后端和前端提供帮助，但它并不是世界上最漂亮的东西。还有[cfchart](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7930.html)，它将提供基于图表的报告。它们都具有大量的可定制性，并且已经内置于 CF 中。

最后是[cfreport](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c1d.html)，它按照它在锡上所说的做。它是一个更简单的标签，使用起来更简单，视觉影响更小，但允许您附加样式表以覆盖其样式，并将输出一个很好的文档类型选择。

我鼓励您在查看 3rd 方报告解决方案之前查看 CF 中的这些工具。

希望这是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:11:59.800

[ThemeForest](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFUQFjAA&url=http://themeforest.net/category/site-templates/admin-templates&ei=npwFUJb3KqPu2gWrgKWWBQ&usg=AFQjCNHsq45JOIv0zHy0ZLI08uaGNIXhMg&sig2=cPs_Tpk-wsPit_gMBV_c4w)为管理员皮肤提供了很多选择。该链接会将您直接带到管理模板区域。

# azure - 带有错误 Microsoft.WindowsAzure.Plugins.Caching.FileStore 的 Windows azure

> ID：11524225
> 
> 赞同：4
> 
> 时间：2012-07-17T14:05:17.057
> 
> 标签：azure, azure-configuration

在我将 Azure SDK 更新到 1.7 版本并尝试在 Web 角色上发布我的更改后，它向我显示一个错误：

```
Windows Azure could not find the resource Microsoft.WindowsAzure.Plugins.Caching.FileStore in the service package. 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T19:17:18.843

我确信在您的基于 SDK 1.7 的应用程序中，您在 CSDEF 中有以下设置：

```
<LocalResources>
  <LocalStorage name="Microsoft.WindowsAzure.Plugins.Caching.FileStore" sizeInMB="1000" cleanOnRoleRecycle="false" />
</LocalResources> 
```

基于此错误，我可以看到您正在更新以前没有上述设置的基于 SDK 1.6 的部署，以及您收到此错误的原因。

因为您的配置已更改，更新失败。作为此问题的解决方法，您可以先对暂存槽进行全新的部署，然后将 VIP 与生产交换以进行更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:56:22.430

我发现了问题。问题是因为此键名中的 co-locate 缓存设置=“Microsoft.WindowsAzure.Plugins.Caching.ConfigStoreConnectionString”被设置为开发存储，而不是真正的 blob 存储。这是问题所在

# javascript - 使用 phonegap 下载文件

> ID：11524227
> 
> 赞同：1
> 
> 时间：2012-07-17T14:05:21.630
> 
> 标签：javascript, cordova, download

我需要下载一个文件，但我没有他的名字。我尝试下载而不指定他的名字。按照我的代码

```
$("#sincronizar").click( function(){
            var localFileName = "ico/recebe/";
            window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
                fileSystem.root.getFile(localFileName, {create: true, exclusive: false}, function(fileEntry) {
                    var localPath = fileEntry.fullPath;
                    var url = "http://192.168.250.100:5000/envia_arquivo/?username=dlemes&password=101112";
                    var onSucess = function(entry) {
                            alert("download complete: " + entry.fullPath);
                            //extractFile();

                        };
                    var onError = function(error) {
                            alert("Erro ao buscar fonte de dados: " + error.source);
                            alert("Código do erro: " + error.code);
                        };
                    var ft = new FileTransfer();
                    ft.download(url,localPath, onSucess, onError);  
                });
            });      
        }); 
```

# tridion - 返回作者 不工作且未给出任何错误

> ID：11524229
> 
> 赞同：0
> 
> 时间：2012-07-17T14:05:24.560
> 
> 标签：tridion, tridion-2011

以下返回作者的代码不适用于基于核心服务的工作流程。

并且没有给出任何错误。有什么建议么？

```
public void BackToAuthor(string workitemid)
{
  var client = new CoreServiceSession();
  var csClient = client.GetClient();
  var readoption = new ReadOptions();

  var workitem = (WorkItemData)csClient.Read(workitemid, readoption);
  var processInstance = (ProcessInstanceData)csClient.Read(
                                             workitem.Process.IdRef, readoption);
  var ieActivities = processInstance.Activities;

  if (ieActivities != null)
  {
    var targetactivity = (ActivityInstanceData)csClient.Read(
                                  processInstance.Activities[0].Id, readoption);
    var finishData = new ActivityFinishData();
    finishData.Message = "Finished automatically";
    finishData.NextAssignee = new LinkToTrusteeData { 
        IdRef = processInstance.Activities[0].Performers[0].IdRef, 
        Title = processInstance.Activities[0].Performers[0].Title };
      csClient.FinishActivity(targetactivity.Id, finishData, readoption);
      logdetails("Finished the activity");
      csClient.Close();
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:59:47.290

我相信您必须将活动发送回表演者而不是所有者（第一个活动是“每个人”）。您可能需要更改以下代码行...

```
finishData.NextAssignee = new LinkToTrusteeData { 
        IdRef = processInstance.Activities[0].Performer.IdRef, 
        Title = processInstance.Activities[0].Performer.Title }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:53:46.050

我建议您首先让代码在调试器下运行，并验证 Id 是否符合您的期望。例如，流程实例是否正确，各种活动和执行者是否符合您的预期？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:24:47.677

你能检查`ActivityInstanceData.ActivityState`( `processInstance.Activities[0]`) 属性吗？当它已经完成时，你会得到你提到的异常。在这种情况下，您需要重新启动活动：`ICoreService2011.RestartActivity(activityInstanceId, readBackOptions)`

那么，您的流程定义如何？在流程定义中的第一个活动之后，是否从自动活动调用 BackToAuthor？

# c# - 检查winform是否隐藏在以独占全屏模式运行的游戏后面

> ID：11524234
> 
> 赞同：2
> 
> 时间：2012-07-17T14:05:35.043
> 
> 标签：c#, windows, winapi

我有一个分层窗口/表单，我尝试始终使用 SetWinPos WinAPI 方法将其设置在桌面上的任何其他窗口之上，我几乎可以越过任何窗口，唯一的问题是我的桌面上是否有全屏游戏然后我调用 SetWinPos 将我的窗体放在游戏顶部，根据 GetTopWindow WinAPI 方法的返回值，它实际上被识别为“顶部窗口”，当我将鼠标悬停在游戏屏幕的某些部分时，我什至可以看到鼠标光标发生了变化（我想因为表单实际上是“顶部窗口”）但是我并没有真正看到我的表单，因为游戏处于独家全屏模式......

有什么方法可以检查我的表单是否隐藏在游戏（或任何以独占全屏模式运行的应用程序）后面或检查游戏是否实际上以独占全屏模式运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:22:59.233

我不太确定，但听起来你的游戏是在 DirectX-Fullscreen 中运行的，AFAIK 与 win-api 全屏并不完全相同。我不知道在哪里，但您也许可以通过查询 directx-api 来检查您的应用程序位置.....正如我所说.. 不确定这些...

# mysql - SQL - 比较不同时区的日期

> ID：11524236
> 
> 赞同：2
> 
> 时间：2012-07-17T14:05:40.777
> 
> 标签：mysql, date, convert-tz

我的`MySQL`数据库中有一个字段，其中包含具有以下格式的时区日期：`1986-07-10T00:00:00.000+02:00`或`1986-07-10T00:00:00.000Z`（Z 表示祖鲁时间，或`UTC`）。

我正在尝试编写一个`WHERE`子句来检查 NOW （我的时区 = ）和日期字段之间的差异`Europe/Brussels`是否超过例如 18 年。有什么办法我可以只使用来完成这个`SQL`吗？

我正在阅读一个名为的函数，`CONVERT_TZ()`但我不确定我是否朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:22:33.453

# .net - 什么是适用于 IIS 上 Web 应用程序的 Net 4.5 的正确应用程序池？

> ID：11524244
> 
> 赞同：16
> 
> 时间：2012-07-17T14:05:57.017
> 
> 标签：.net, iis, iis-7.5

我已经在计算机上安装了 .NET 4.5。然后尝试使用 Net 4.5 将新的 Web 应用程序部署到 IIS，但只有 2 个应用程序池可用：

```
.NET Framework v2.0.50727
.NET Framework v4.0.30319 
```

不确定 v4.0.30319 是否适合 .NET 4.5 上的应用程序池。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T14:09:16.150

是的 .NET Framework v4.0.* 是正确的应用程序池，.NET 4.5 不是主要的新版本。

# php - get_headers_curl 格式为 ($url,1)

> ID：11524248
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:06:07.430
> 
> 标签：php

标准的 get_headers 函数有多种格式

```
get_headers($url);
get_headers($url,1); 
```

我使用 curl 设置请求的超时，所以这是我的功能

```
function get_headers_curl($url)
{
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,            $url);
curl_setopt($ch, CURLOPT_HEADER,        true);
curl_setopt($ch, CURLOPT_NOBODY,         true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT,       3);

$r = curl_exec($ch);
$r = split("\n", $r);
return $r;
} 
```

我努力了

```
get_headers_curl($url,1) 
```

没有结果

所以请告诉我如何制作第二种格式

```
get_headers($url,1) 
```

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:20:44.363

尝试使用该 `curl_getinfo()` 功能。

# ubuntu - 无法通过在 Ubuntu 11.04 上编辑 fcrontab 来运行计划作业

> ID：11524249
> 
> 赞同：0
> 
> 时间：2012-07-17T14:06:07.960
> 
> 标签：ubuntu

我已经为用户 user1 安装了 fcrontab。我有一个 .net Web 应用程序，用户可以通过它安排作业。为此，我正在通过 c# 文件操作方法编辑文件“/var/spool/fcron/user1.orig”。我可以编辑文件，并且可以通过“fcrontab -l”终端命令查看更改。但不幸的是，计划的作业没有像 fcrontab 中计划的那样运行。如果我通过“fcrontab -e”终端命令编辑 fcrontab，作业将按照 fcrontab 中的计划运行！

我已向用户 user1 和 www-data 授予文件夹“/var/spool/fcron”的读写权限，并且编辑文件“/var/spool/fcron/user1.orig”没有问题。我是否需要运行其他任何东西才能让 fcron 注意到 fcrontab 中的更改并重新构建自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:08:31.290

看起来一旦你编辑了 fcrontab 文件，你就必须更新 fcron。有一个通过“fcronsighup”发送信号的选项，它指示 fcron 重新读取 fcron 表。我试过了，但它不起作用。然后我想出了拥有临时文件的想法，并编辑临时文件而不是 fcrontab 文件，然后通过脚本将 fcrontab 替换为 tempfile。通过脚本替换文件可确保 fcron 将重新读取修改后的 fcron 表。可以在此处找到有关如何替换 fcrontab 文件的说明：http://fcron.free.fr/doc/en/faq.html [（](http://fcron.free.fr/doc/en/faq.html) 查找**如何在脚本中使用 fcrontab？**）它可以工作！

# android - 如何在我为 android 创建的音乐播放器中使用 RatingBar？

> ID：11524253
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:06:22.423
> 
> 标签：android, android-music-player

我为我最后一年的项目创建了一个适用于 android 的音乐播放器。它具有播放、下一首、上一首等基本功能，还有一个用于从播放列表中选择歌曲的滚动条。

我想使用评分栏来允许用户设置歌曲的评分，但如果我为一首歌曲设置评分，然后从播放列表中选择另一首歌曲**，那么也会为该歌曲设置相同的评分**。

如何让它为不同的歌曲设置不同的评分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:16:25.870

歌曲更改时是否有回调？基本上，我们需要查看一些代码，但您需要将评级重置为 2 星，或者任何默认的星数。然后，您将需要使用[OnRatingBarChange](http://developer.android.com/reference/android/widget/RatingBar.OnRatingBarChangeListener.html "OnRatingBarChangeListener")将评级保存到数据库中。似乎“MediaPlayer”类有一个[OnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html#onCompletion%28android.media.MediaPlayer%29 "OnCompletionListener")来告诉轨道何时完成。

```
RatingBar ratingBar = (RatingBar)view.findViewById(R.id.ratingbar);
RatingBar.OnRatingBarChangeListener barListener = 
    new RatingBar.OnRatingBarChangeListener() {
            public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromTouch) {
                // Do your database stuff here
            }

        } 
```

然后是 onCompletion 的内容

```
//mp is the reference to your media player
mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {           
        public void onCompletion(MediaPlayer mp) {
            // Do what you need to do to reset the rating bar. Might need to make a public reference or create a way for this inner class to access the rating bar.

        }           
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:23:35.827

`OnClickListener`我认为，在活动的上一个和下一个歌曲发生变化时，将评分栏的速率设置为默认值。

```
ratingbar.setRating(3); //For three stars 
```

并保存歌曲的速度`OnRatingBarChange`。

# emacs - 在 emacs 中处理文本

> ID：11524254
> 
> 赞同：1
> 
> 时间：2012-07-17T14:06:24.327
> 
> 标签：emacs

我需要定义一个函数来读取 Emacs 中特定文档的所有内容并处理其中的文本。例如，我正在读取一个 XML 文件，我想搜索特定属性并计算出现次数。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:50:50.387

`M-x count-matches RET`

您可以使用正则表达式来匹配您的属性

我从屏幕截图中添加了这个小动画，向您展示了一个使用示例。如果您需要更复杂的，请随时询问。

![使用小例子](../Images/0b37849f05c60cf310f4cbc8e765b45d.png)

如果你想用 Emacs-Lisp 解决这个问题，请查看 -> [问题]：[https:](https://stackoverflow.com/questions/41522/tips-for-learning-elisp/1313997#1313997) //stackoverflow.com/questions/41522/tips-for-learning-elisp/1313997#1313997 尤其是重点`count-string-matches`，或者这样做这：

`(defun count-words ()
(interactive)
(let ((words (count-matches "[-A-Za-z0-9][-A-Za-z0-9.]*"
(point-min) (point-max))))
(message (format "%d matches" words))))`

# jquery - JQuery & SVG 拖放

> ID：11524263
> 
> 赞同：1
> 
> 时间：2012-07-17T14:06:52.203
> 
> 标签：jquery, svg

几天来一直把头撞在墙上，一无所获，所以我只想找到某种确认，证明我正在尝试做的事情实际上是可行的......

我有一个带有 SVG 和 DIV 的页面。我希望能够单击 SVG 的一个组件并将其拖动。理论上真的很简单。我在一个凌乱的原始 javascript 版本中有这个，但我试图在 JQuery 中做到这一点以保持一致性。

我有以下内容，它拖着整个容器 DIV：

* var svgName = "/mySvg.svg";

```
$(document).ready(function($) {
    $('#svgDiv').svg();
    var svg = $('#svgDiv').svg('get');
    svg.load(svgName,

    function () {
        $('#svgDiv').draggable().bind('mousedown', function(event, ui) {
            $(event.target.parentElement).append( event.target );
        }).bind('drag', function(event, ui) {
            event.target.setAttribute("transform", "translate("+event.clientX+","+event.clientY+")");
        });
    });
}); 
```

*

我把它改成了这个，我认为它会通过它的 ID 获得 SVG 的一个元素，但这什么也没做。就好像 JQuery 看不到 DIV 的“内部”（想要一个更好的词）。*

```
var svgSource = "/mySvg.svg";

$(document).ready(function($) {
    $('#svgDiv').svg();
    var svgObj = $('#svgDiv').svg('get');
    svgObj.load(svgSource,
        function () {
            var svgObj2 = $('#svgDiv').svg('get');
            var svgElem = svgObj2.getElementById('pathIdOne');
            $(svgElem).draggable().bind('mousedown', function(event, ui) {
                $(event.target.parentElement).append( event.target );
            }).bind('drag', function(event, ui) {
                //event.target.setAttribute("transform", "translate("+event.clientX+","+event.clientY+")");
                event.target.setAttribute('x', ui.position.left);
                event.target.setAttribute('y', ui.position.top);                    
            });
        });
}); 
```

*

任何人都可以看到任何明显需要改变的东西，可以这样做，还是完全错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T18:00:06.073

我最近花了几天时间来解决这个问题，我想出了一个对我来说效果很好的解决方案。这绝对是一个 hack，并且不会在所有情况下都有效。

[这个链接](http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/)对如何解决一般问题有很好的描述，这绝对是“更好”的解决方案。但是，我想继续使用 JQuery 出色的 Draggable API。

[你可以在这里](http://jsfiddle.net/BFU6F/1/)看到我在小提琴中所做的快速模型。关键思想是使用代理 div，您可以将其精确地悬停在要拖动的 svg 元素上。然后在拖动代理 div 时更改 svg 元素的 x 和 y 坐标。像这样的东西：

```
$('#proxy').on('drag', function(e)
    {
        t = $('#background');
        prox = $('#proxy');
        t.attr('x', t.attr('x')*1
                   + prox.css('left').slice(0,-2)*1
                   - prox.data('position').left)
            .attr('y', t.attr('y')*1
                      + prox.css('top').slice(0,-2)*1
                      - prox.data('position').top);
        prox.data('position',{top : prox.css('top').slice(0,-2)*1,
                              left: prox.css('left').slice(0,-2)*1}
                  );
    }); 
```

在我的例子中，我想要拖动的 SVG 元素总是会填充屏幕上的某个正方形，因此将代理 div 定位在目标上非常容易。在其他情况下，这可能要困难得多。使用“遏制”选项来确保您不会将背景拖到框架之外也不是太难……它只需要一些仔细的数学运算，并且您必须在每次拖动之间重置遏制。

要使其适用于更多 SVG 元素，您可以使用变换而不是 x 和 y 坐标。

# javascript - atob 不能在 IE 中工作

> ID：11524268
> 
> 赞同：26
> 
> 时间：2012-07-17T14:07:02.627
> 
> 标签：javascript, internet-explorer

我正在尝试使用 atob 将 base64 编码数据转换为字符串。我发现它在 Mozilla 和 Chrome 中运行良好，但在 IE 中无法运行。请告诉我这个的任何替代品，或者如何在 IE 中使它工作

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-17T17:19:52.867

转到此链接并包含那里的 js：

[http://code.google.com/p/stringencoders/source/browse/trunk/javascript/base64.js?r=230](http://code.google.com/p/stringencoders/source/browse/trunk/javascript/base64.js?r=230)

```
/*
 * Copyright (c) 2010 Nick Galbreath
 * See full license on http://code.google.com/p/stringencoders/source/browse/#svn/trunk/javascript
 */

var base64 = {};
base64.PADCHAR = '=';
base64.ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

base64.makeDOMException = function() {
    // sadly in FF,Safari,Chrome you can't make a DOMException
    var e, tmp;

    try {
        return new DOMException(DOMException.INVALID_CHARACTER_ERR);
    } catch (tmp) {
        // not available, just passback a duck-typed equiv
        // https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Error
        // https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Error/prototype
        var ex = new Error("DOM Exception 5");

        // ex.number and ex.description is IE-specific.
        ex.code = ex.number = 5;
        ex.name = ex.description = "INVALID_CHARACTER_ERR";

        // Safari/Chrome output format
        ex.toString = function() { return 'Error: ' + ex.name + ': ' + ex.message; };
        return ex;
    }
}

base64.getbyte64 = function(s,i) {
    // This is oddly fast, except on Chrome/V8.
    //  Minimal or no improvement in performance by using a
    //   object with properties mapping chars to value (eg. 'A': 0)
    var idx = base64.ALPHA.indexOf(s.charAt(i));
    if (idx === -1) {
        throw base64.makeDOMException();
    }
    return idx;
}

base64.decode = function(s) {
    // convert to string
    s = '' + s;
    var getbyte64 = base64.getbyte64;
    var pads, i, b10;
    var imax = s.length
    if (imax === 0) {
        return s;
    }

    if (imax % 4 !== 0) {
        throw base64.makeDOMException();
    }

    pads = 0
    if (s.charAt(imax - 1) === base64.PADCHAR) {
        pads = 1;
        if (s.charAt(imax - 2) === base64.PADCHAR) {
            pads = 2;
        }
        // either way, we want to ignore this last block
        imax -= 4;
    }

    var x = [];
    for (i = 0; i < imax; i += 4) {
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) |
            (getbyte64(s,i+2) << 6) | getbyte64(s,i+3);
        x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff, b10 & 0xff));
    }

    switch (pads) {
    case 1:
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12) | (getbyte64(s,i+2) << 6);
        x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff));
        break;
    case 2:
        b10 = (getbyte64(s,i) << 18) | (getbyte64(s,i+1) << 12);
        x.push(String.fromCharCode(b10 >> 16));
        break;
    }
    return x.join('');
}

base64.getbyte = function(s,i) {
    var x = s.charCodeAt(i);
    if (x > 255) {
        throw base64.makeDOMException();
    }
    return x;
}

base64.encode = function(s) {
    if (arguments.length !== 1) {
        throw new SyntaxError("Not enough arguments");
    }
    var padchar = base64.PADCHAR;
    var alpha   = base64.ALPHA;
    var getbyte = base64.getbyte;

    var i, b10;
    var x = [];

    // convert to string
    s = '' + s;

    var imax = s.length - s.length % 3;

    if (s.length === 0) {
        return s;
    }
    for (i = 0; i < imax; i += 3) {
        b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8) | getbyte(s,i+2);
        x.push(alpha.charAt(b10 >> 18));
        x.push(alpha.charAt((b10 >> 12) & 0x3F));
        x.push(alpha.charAt((b10 >> 6) & 0x3f));
        x.push(alpha.charAt(b10 & 0x3f));
    }
    switch (s.length - imax) {
    case 1:
        b10 = getbyte(s,i) << 16;
        x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +
               padchar + padchar);
        break;
    case 2:
        b10 = (getbyte(s,i) << 16) | (getbyte(s,i+1) << 8);
        x.push(alpha.charAt(b10 >> 18) + alpha.charAt((b10 >> 12) & 0x3F) +
               alpha.charAt((b10 >> 6) & 0x3f) + padchar);
        break;
    }
    return x.join('');
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T10:19:47.460

atob 和 btoa 是 mozilla 的特定功能，后来支持扩展到 webkit 浏览器，如 chrome、safari，因此它在 IE 中不起作用。

所以最好使用其他一些功能，例如：-

```
/**
*
*  Base64 encode / decode
*  http://www.webtoolkit.info/
*
**/

var Base64 = {

    // private property
    _keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

    // public method for encoding
    encode : function (input) {
        var output = "";
        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
        var i = 0;

        input = Base64._utf8_encode(input);

        while (i < input.length) {

            chr1 = input.charCodeAt(i++);
            chr2 = input.charCodeAt(i++);
            chr3 = input.charCodeAt(i++);

            enc1 = chr1 >> 2;
            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
            enc4 = chr3 & 63;

            if (isNaN(chr2)) {
                enc3 = enc4 = 64;
            } else if (isNaN(chr3)) {
                enc4 = 64;
            }

            output = output +
            this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
            this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

        }

        return output;
    },

    // public method for decoding
    decode : function (input) {
        var output = "";
        var chr1, chr2, chr3;
        var enc1, enc2, enc3, enc4;
        var i = 0;

        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

        while (i < input.length) {

            enc1 = this._keyStr.indexOf(input.charAt(i++));
            enc2 = this._keyStr.indexOf(input.charAt(i++));
            enc3 = this._keyStr.indexOf(input.charAt(i++));
            enc4 = this._keyStr.indexOf(input.charAt(i++));

            chr1 = (enc1 << 2) | (enc2 >> 4);
            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
            chr3 = ((enc3 & 3) << 6) | enc4;

            output = output + String.fromCharCode(chr1);

            if (enc3 != 64) {
                output = output + String.fromCharCode(chr2);
            }
            if (enc4 != 64) {
                output = output + String.fromCharCode(chr3);
            }

        }

        output = Base64._utf8_decode(output);

        return output;

    },

    // private method for UTF-8 encoding
    _utf8_encode : function (string) {
        string = string.replace(/\r\n/g,"\n");
        var utftext = "";

        for (var n = 0; n < string.length; n++) {

            var c = string.charCodeAt(n);

            if (c < 128) {
                utftext += String.fromCharCode(c);
            }
            else if((c > 127) && (c < 2048)) {
                utftext += String.fromCharCode((c >> 6) | 192);
                utftext += String.fromCharCode((c & 63) | 128);
            }
            else {
                utftext += String.fromCharCode((c >> 12) | 224);
                utftext += String.fromCharCode(((c >> 6) & 63) | 128);
                utftext += String.fromCharCode((c & 63) | 128);
            }

        }

        return utftext;
    },

    // private method for UTF-8 decoding
    _utf8_decode : function (utftext) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while ( i < utftext.length ) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i+1);
                c3 = utftext.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;
    }

} 
```

这将解决您的问题

# c++ - C++ 生成器表单崩溃

> ID：11524269
> 
> 赞同：0
> 
> 时间：2012-07-17T14:07:04.027
> 
> 标签：c++, c++builder

表格 1: (frmStart)

```
void __fastcall TfrmStart::btnRunClick(TObject *Sender)
{
    frmStart->Hide();
    Application->CreateForm(__classid(TfrmRunning), &frmRunning);
} 
```

表格 2：（跑步）

```
void __fastcall TfrmRunning::FormCreate(TObject *Sender)
{
      frmRunning->Show(); 
 //Here i do a lot of stuff to run my main program
} 
```

问题是我的第一个表单正确加载和隐藏。当第二个表单加载时，不会显示任何组件，只显示一个看起来像是崩溃的 GUI/。当程序真正结束时，GUI 会返回到正常状态。

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T19:54:44.953

在这种情况`OnCreate`下，`frmRunning`变量尚未分配，这就是代码崩溃的原因。由于您已经在类中，只需使用方法的`this`指针：

```
void __fastcall TfrmRunning::FormCreate(TObject *Sender) 
{ 
      //frmRunning->Show();  
      this->Show();  
} 
```

或者简单地说：

```
void __fastcall TfrmRunning::FormCreate(TObject *Sender) 
{ 
      //frmRunning->Show();  
      Show();  
} 
```

在方法中做同样的事情`btnRunClick()`- 使用`this`指针而不是`frmStart`变量：

```
void __fastcall TfrmStart::btnRunClick(TObject *Sender) 
{ 
    //frmStart->Hide(); 
    this->Hide(); 
    ...
} 
```

或者：

```
void __fastcall TfrmStart::btnRunClick(TObject *Sender) 
{ 
    //frmStart->Hide(); 
    Hide(); 
    ...
} 
```

最后，您应该使用`new`运算符而不是方法，并且在表单完成初始化之前`TApplication::CreateForm()`不要调用方法：`Show()`

```
void __fastcall TfrmStart::btnRunClick(TObject *Sender)   
{   
    frmRunning = new TfrmRunning(Application);
    frmRunning->Show();   
    Hide();   
}   

__fastcall TfrmRunning::TfrmRunning(TComponent *Owner)   
    : TForm(Owner)
{   
   // initialize this Form as needed...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:19:22.843

Using FormCreate isn't the right place to set up your form. Use the c++ style constructor instead. I'd also probably call the Show method from somewhere else, such as another form's button handler, or the form's constructor. I would then use the OnShow Event to do the "lot of stuff"

# ruby-on-rails - Heroku db pull 错误，它正在寻找 sqlite3 但我有 postgres，如何更改？

> ID：11524273
> 
> 赞同：1
> 
> 时间：2012-07-17T14:07:10.993
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku, taps

我安装了水龙头。我收到以下错误。这是我第一次从 Heroku 拉出这样的内容，所以我不确定确切的格式

```
$ heroku db:pull postgres://postgres:@localhost/prod_20120717

 !    Taps Load Error: cannot load such file -- sqlite3
 !    You may need to install or update the taps gem to use db commands.
 !    On most systems this will be:
 !    
 !    sudo gem install taps 
```

我`prod_20120717`在 postgres 中创建了一个空来接收数据，但问题似乎是 taps 正在寻找 sqlite3，而不是 postgres。

我的 postgres 用户是 postgres，没有密码。

我的 database.yml 文件只定义了 postgres 适配器。

这似乎是适配器名称问题。我也在我拥有`postgresql`的两个地方都试过了`postgres`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:36:04.607

只是预感，但我认为 sqlite 是水龙头的要求：

[https://github.com/ricardochimal/taps/blob/master/lib/taps/cli.rb](https://github.com/ricardochimal/taps/blob/master/lib/taps/cli.rb)第10行：

```
require 'sqlite3' 
```

我不认为这与您的实际应用程序有关，但更多的是水龙头本身的工作原理，也许安装 gem 并从那里开始？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:39:27.163

答案是我实际上没有安装 sqlite3（我在 Mac 上，我的应用程序只使用 postgres），我必须安装它（sqlite3）。

```
[sudo] gem install sqlite3 
```

我的 Gemfile 中不需要它，我只需要在我的机器上安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:20:22.200

你有这样的gemfile设置吗？

```
group :production do
  gem 'pg'
end

group :development, :test do
  gem 'sqlite3'
end 
```

# hibernate - hbm2ddl 忽略 @Column 注释？

> ID：11524276
> 
> 赞同：4
> 
> 时间：2012-07-17T14:07:24.780
> 
> 标签：hibernate, hbm2ddl

为什么 hbm2ddl 会忽略 @Column 注释？

这是我的课：-

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "BASETEMPLATE")
public class BaseTemplate implements IBaseTemplate
{
    private Integer id;

    @Column(name="TEMPLATENAME")    
    private String templateName;

    @Column(name="BASETEMPLATEID")  
    private Integer baseTemplateId;

    @Id 
    @GeneratedValue 
    @Column(name = "TEMPLATEID")
    @Override
    /** {@inheritDoc} */
    public Integer getId() { return id; }       
...
} 
```

hbm2dll 生成这个（sqlserver）表

```
dbo.BASETEMPLATE 
(
TEMPLATEID      int
templateName    varchar(255)
baseTemplateId  int
) 
```

方言是 org.hibernate.dialect.SQLServerDialect 奇怪的是，主键总是正确创建的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:22:53.537

当你在 getter 上放置注解时，Hibernate 使用属性访问策略，当你将它们放置在字段上时，Hibernate 使用字段访问策略。但是，您不应该在同一个实体中（或者更准确地说，在同一个继承层次结构中）混合这些策略，除非您使用[`@Access`](http://docs.oracle.com/javaee/6/api/javax/persistence/Access.html)对访问策略的细粒度控制。

默认情况下，Hibernate 期望以与 相同的方式放置注释`@Id`，因此在您的情况下，它期望在 getter 上进行注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:52:35.707

我不知道为什么hbm2ddl会忽略字段上的@Column，但我发现如果您注释getter，它会正确设置表中的列名。

# mongodb - PyMongo 连接未释放：错误，因为没有更多与 MongoDB 的连接可用

> ID：11524277
> 
> 赞同：0
> 
> 时间：2012-07-17T14:07:28.523
> 
> 标签：mongodb, pymongo

我有一个脚本，它用完本地运行的 MongoDB 的所有可用连接，然后存在以下错误消息：

```
pymongo.errors.AutoReconnect: [Errno 4] Interrupted system call 
```

/var/log/mongodb/mongod.log 中的错误消息是：

```
[initandlisten] connection refused because too many open connections: 819 
```

调用脚本时，Mongo-Shell 会给出以下输出：

```
> db.serverStatus().connections
{ "current" : 1, "available" : 818 }  // Script not yet started
> db.serverStatus().connections
{ "current" : 400, "available" : 419 }  // Losing connections
> db.serverStatus().connections
{ "current" : 638, "available" : 181 }
> db.serverStatus().connections
{ "current" : 804, "available" : 15 }
> db.serverStatus().connections
{ "current" : 819, "available" : 0 }  // Script terminates
> db.serverStatus().connections
{ "current" : 1, "available" : 818 }  // Script terminated 
```

我无法发布原始脚本，但下面的“净化”片段希望能提供一个想法。基本上，我在多个集合中运行各种不同的查询和更新。

最重要的是，11 个数据库语句中只有 5 个*有时*不会释放它们的连接。其他 6 个语句将*始终*留下与语句之前一样多的空闲连接。

```
mc = pymongo.Connection()
db = mc.database

def available():
    """ Return the number of available connections """
    return db.command("serverStatus")['connections']['available']

def process():
    while True:
        # ...
        # Connections lost:
        conns = available()
        coll_a = db.coll_a.find_and_modify(
                query={'x': x},
                update={'$pop': {'x': -1}},
                fields={'x': 1})
        if conns > available():
            print('Fewer connections')
        # ...
        # No connections lost:
        db.coll_a.update({'x': x}, {'$pullAll': {'x': [x]}})
        # ...
        # No connections lost:
        coll_d = db.coll_d.find_and_modify(
                query={'x': x,},
                update={'$set': {'x': x}},
                fields={'x': 1})
        # ...
        # No connections lost:
        coll_b_cursor = db.coll_b.find({'x': x}, {'x': 1})
        # ...
        # No connections lost:
        coll_e_cursor = db.coll_e.find({'$or': [{'x': x}, {'x': x}]})
        # ...
        for item in coll_e_cursor:
            # No connections lost:
            coll_b = db.coll_b.find({'x': x}).count()
        # ...
        # No connections lost:
        coll_b_cursor = db.coll_b.find({'x': x}, {'x': x})
        # ...
        for x in y:
            if x:
                # Connections lost:
                conns = available()
                db.coll_b.update({'x': x}, {'$unset': {'x': 1}})
                if conns > available():
                    print('Fewer connections')
            # ...
            # Connections lost:
            conns = available()
            coll_b = db.coll_b.find_and_modify(
                    query={'x': x},
                    update={'$set': {'x': x}},
                    fields={'x': 1},
                    upsert=True)
            if conns > available():
                print('Fewer connections')
            # ...
            # Connections lost:
            conns = available()
            coll_c_1 = db.coll_c.find_one({'x': x})
            coll_c_2 = db.coll_c.find_one({'x': x})
            if conns > available():
                print('Fewer connections')
        # ...
        # Connections lost:
        conns = available()
        db.coll_b.update({'x': x}, {'$unset': {'x': 1}})
        if conns > available():
            print('Fewer connections') 
```

*   不释放连接的语句和释放连接的语句有什么区别？
*   PyMongo 或 MongoDB 在所有情况下都不应该释放连接吗？

PyMongo：2.2.1

MongoDB：2.0.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:15:09.830

连接并没有在看起来的地方丢失*，而是在什么**时候*丢失。

我忽略了一个线程是在 process() 的某个地方启动的：

```
threading.Thread(target=target, args=(args)).start() 
```

该线程进行了数据库调用。

process() 中的 while 循环足够快，以至于许多线程同时运行。用完所有可用的数据库连接。

如果不启动这些线程，可用数据库连接的数量将保持不变。

# class - 获取所有类属性。如何？

> ID：11524279
> 
> 赞同：3
> 
> 时间：2012-07-17T14:07:31.143
> 
> 标签：class, reflection, attributes, abap

我想从 ABAP 中的一个类中读取所有属性，也许是通过反射？之后，我想从指定类型中过滤掉所有常量。我怎样才能做到这一点？

我知道我可以通过 读取结构的所有项目`assign component of structure`，也可以通过从结构中读取字段目录的功能模块来读取它们。

如何使用类的属性来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:22:43.810

为此使用[RTTS](http://help.sap.com/abapdocu_702/en/abenrtti.htm)。您将获得一个 CL_ABAP_OBJECTDESCR 实例（一个 CLASSDESCR 或一个 INTFDESCR，取决于您输入的引用类型），它具有一些包含相关类属性的公共属性。

# c# - BeginInvoke 后 QueueUserWorkItem 切换回后台线程？

> ID：11524283
> 
> 赞同：1
> 
> 时间：2012-07-17T14:07:40.393
> 
> 标签：c#, wpf, threadpool, dispatcher

这是一个代码示例。想象一下，它不是一个`ViewModel`，也没有什么相关的。

**解释：**

所以我有一个`ObservableCollection`我想从数据库中删除的项目。为了避免阻塞 UI，我在后台线程中调用它。

如果我有数据库问题或者它成功了，我想在 UI 中显示。所以我在`Dispacther.BeginInvoke`.

我知道调用`BeginInvoke`会将线程上下文更改为 UI。

**代码示例：**

```
ThreadPool.QueueUserWorkItem(new WaitCallback((o) =>
{
    Action completedAction = null;
    try
    {
        //Delete from database;
        item.Delete();
        completedAction = () => { this.Observable.Remove(item); };
    }
    catch (Exception)
    {
        completedAction = () =>
        {
            someTextBox.Text = "Error";
        };
    }

    App.Current.Dispatcher.BeginInvoke(completedAction);
})); 
```

**问题：**

`BeginInvoke`我想知道是否甚至认为我在将线程上下文更改回后台线程之后没有编写更多代码。

PS。我知道我可以使用`BackgroundWorker`，但对我来说使用`QueueUserWorkItem`起来更简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:34:26.157

BeginInvoke 方法将要在 UI 线程上完成的工作“排队”（它可能已经忙于做其他事情）。在 BeginInvoke 之后，后台线程继续运行您的委托的其余部分。当它完成运行您的委托时，该后台线程（线程池线程）将返回到池中以可能被重用。所以，是的，BeginInvoke 之后的代码是在后台线程上运行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:32:10.507

这就是它的工作原理。只有您传递给 BeginInvoke 的委托将在 UI 线程上执行 - 之后的任何代码`BeginInvoke`都将在后台线程上发生。

# iphone - IFTweetLabel 长 URL 的主要问题

> ID：11524285
> 
> 赞同：3
> 
> 时间：2012-07-17T14:07:48.520
> 
> 标签：iphone, url, uilabel, detection

以下开源主要用于超链接网址，电话号码。等/ [https://github.com/clawoo/IFTweetLabel](https://github.com/clawoo/IFTweetLabel)

但是这个开源有一个主要问题是如果太长（超过 1 行）它永远不会超链接

我尝试使用以下网址，它只超链接第一行而不是 3 行 [http://2.bp.blogspot.com/_wuODgRtiCUY/TO2W2EqC2hI/AAAAAAAAAEA/PbwTm9Cl8As/s1600/Shining-Apple-Logo-759135.jpg](http://2.bp.blogspot.com/_wuODgRtiCUY/TO2W2EqC2hI/AAAAAAAAAEA/PbwTm9Cl8As/s1600/Shining-Apple-Logo-759135.jpg)

请发布一些解决方案或任何其他好的开源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T08:14:57.260

刚刚得到解决方案。

注释掉代码：

//BOOL breakWidth = NO;

```
/*if (currentSize.width > frame.size.width)
{
// the width of the text in the frame caused the line to break
    //NSLog(@"------ scanText = '%@', currentSize = %@", scanText,       
    //NSStringFromCGSize(currentSize));
      breakWidth = YES;

  }*/ 
```

现在它不会检查字符串的宽度（或 1 行的结尾），而是会检查整个字符串，直到它得到新的行字符。

# mysql - Mysql 4.0.27 中使用的系统变量

> ID：11524286
> 
> 赞同：0
> 
> 时间：2012-07-17T14:07:50.003
> 
> 标签：mysql

Mysql server 4.0.27 支持哪些系统变量？我想在 4.0.27 中设置所有最新 Mysql 版本中可用的变量“sql-mode”，就像现在使用该版本一样。但是当我的应用程序尝试与数据库连接时出现错误。错误是“无法执行命令 'SET SESSION' sql-mode。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:45:39.597

这似乎有效

> 设置会话 sql_mode='NO_UNSIGNED_SUBTRACTION';

或者

> SET @@SESSION.sql_mode='NO_UNSIGNED_SUBTRACTION';

# tridion - SmartTarget 2010 - 部署 Web 服务 WSDL 404

> ID：11524288
> 
> 赞同：4
> 
> 时间：2012-07-17T14:08:06.790
> 
> 标签：tridion, smarttarget

我已将 Fredhopper 安装在与 Tridion 不同的服务器上，并按照此处的说明为 Fredhopper 设置 SmartTarget 部署 Web 服务的说明（需要登录）：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_SmartTarget_2010_SP1/task_7DA6ABC3212F47FEACF03CD73411CB02](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_SmartTarget_2010_SP1/task_7DA6ABC3212F47FEACF03CD73411CB02)

我应该能够访问我新部署的 Web 服务并查看 WSDL，但是在尝试这样做时，我收到了 404 消息。如果我访问 http://[machinename]:8180/SmartTargetDeploymentWebService/SmartTargetDeploymentWebService 我可以获得一个显示可用方法的页面，但是单击 WSDL 链接不起作用。

这是一个问题的原因是因为无法从 SDL Tridion 2011 SP1 将内容部署到 Fredhopper，因为它无法读取服务的 WSDL：

> 阶段：部署处理阶段失败，无法通过 web 服务持久化 fredhopper XML，无法访问位于 http://[machinename]:8180/SmartTargetDeploymentWebService/SmartTargetDeploymentWebService?wsdl 的 WSDL。它失败了：http://[machinename]:8180/SmartTargetDeploymentWebService/SmartTargetDeploymentWebService?wsdl

发现有人在 Tridion 论坛中也遇到了同样的问题，但没有找到解决方案：

[https://forum.sdltridion.com/topic.asp?TOPIC_ID=7415](https://forum.sdltridion.com/topic.asp?TOPIC_ID=7415)

有没有人遇到过这个问题？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:21:56.983

几个问题...

*   您提到了 SmartTarget 2010，还提到了 Tridion 2011 SP1。SmartTarget 2010 是为 SDL Tridion 2009 构建的，为什么您不使用更新版本的 ST？（最新版本是 ST 2011 SP2）。
*   您是否在 Fredhopper 的 JBoss 中运行部署 Web 服务？据我所知，这是不支持的，因为 Fredhopper 附带的 JBoss 版本是高度定制的。

话虽如此，我已经在 Tomcat 上使用了部署 Web 服务，没有任何问题。

ñ

# c# - 操纵索引

> ID：11524289
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:08:08.023
> 
> 标签：c#

当我的程序运行时，它会输出以下错误：

在 mscorlib.dll 中发生了“System.ArgumentOutOfRangeException”类型的第一次机会异常

线程“vshost.RunParkingWindow”（0x11d4）已退出，代码为 0（0x0）。

线程 '' (0xdbc) 以代码 0 (0x0) 退出。

程序“[2868] Filereader m 15062012.vshost.exe: Managed (v4.0.30319)”已退出，代码为 0 (0x0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:08:48.840

为了解决这个问题，我激活了'Break when exception is Common Language Runtime Exceptions' - 可以从调试菜单访问，然后选择异常，然后为'Common Language Runtime Exceptions'激活抛出。当程序运行时，它会指向发生问题的确切位置。

显然，就我的程序而言，这是一个多余的代码。所以我删除了这些行。感谢 tp Tim Schmelter、aquinas 和所有要求我在调试模式下运行的人。赞赏！！

# encryption - 无法理解 CBCBlockCipherMac.update

> ID：11524290
> 
> 赞同：0
> 
> 时间：2012-07-17T14:08:13.173
> 
> 标签：encryption, bouncycastle

我目前正在尝试将 java 代码移植到 object-c。然而，我在代码中遇到了 CBCBlockCipherMac.update 和 CBCBlockCipherMac.doFinal 但不明白这些方法的作用以及它们是如何工作的。混淆点是一个 21 个字符的字符串被转换为字节并传递给这个方法，输出是一个 [4] 字节的字符串。有人请向我解释这种方法是如何工作的。示例代码附在下面。请逐步解释此方法的内容：

```
public String getMyMac("Thisstringis21inlength")
     {
    byte [] macKey = {0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10}
         byte[] macBytes = new byte[4];
         CBCBlockCipherMac macCipher = new CBCBlockCipherMac(new DESedeEngine());
         DESedeParameters keyParameters = new DESedeParameters(macKey);
         DESedeEngine engine = new DESedeEngine();
         engine.init(true, keyParameters);
         macCipher.init(keyParameters);
         byte[] macDataBytes = macData.getBytes(); 
         macCipher.update(macDataBytes, 0, macData.length());
         macCipher.doFinal(macBytes, 0);
         byte[] encodedMacBytes = Hex.encode(macBytes);
         String mac = new String(encodedMacBytes);
         return mac;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:39:27.103

似乎它使用 CBC 模式下的 3DES 来生成[消息验证码 (MAC)](http://en.wikipedia.org/wiki/Message_authentication_code)。MAC 由最后一个加密块的前四个字节组成。如果输入不适合块大小，则用零填充。

# node.js - findOne 对 MongoDB 和 node.js 没有回调

> ID：11524291
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:08:17.687
> 
> 标签：node.js, mongodb

我将 MongoDB 2.0.6 与 node.js 和 mongodb-native 模块一起使用。我正在尝试创建一个包含不同社交媒体项目的数据库，并且目前有推文正确填充我的数据库。我想添加一个函数来获取最新的推文 ID（不是 mongo ID，而是一个名为“api_id”的字段）并将其返回以用于 API 调用。

我按照[这个很棒的教程](http://howtonode.org/express-mongodb)作为我所拥有的基础，但是 findOne 函数似乎永远不会触发它的回调。我也尝试将 findOne 与本机 Mongo ID 序列化一起使用，但没有运气。我将尝试[这里](https://github.com/mongodb/node-mongodb-native/issues/617)为 Mongo 1 建议的解决方法，但我认为它不会起作用。任何帮助，将不胜感激。

```
// Find one by given criteria
updateSocial.prototype.findByCrit = function(crit, callback) {
    this.getCollection(function(error, social_collection) {
      if( error ) callback(error)
      else {
        social_collection.findOne({api_type: crit}, function(error, result) {
            if( error )
                callback(error)
            else {
                callback(null, result);
            }
        });
      }
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-01T11:39:36.897

根据[MongoDB 文档](https://docs.mongodb.com/v3.2/reference/method/db.collection.findOne/)， findOne 方法没有回调作为第二个参数：

```
db.collection.findOne(query, projection) 
```

在哪里：

*   **查询**：可选。使用查询运算符指定查询选择条件。
*   **投影**：可选。指定要使用投影运算符返回的字段。省略此参数以返回匹配文档中的所有字段。

因此，您不应该期望 Mongo 在执行查询后调用您的第二个参数。

# asp.net-mvc - 显示 PDF ASP.Net MVC

> ID：11524293
> 
> 赞同：4
> 
> 时间：2012-07-17T14:08:20.627
> 
> 标签：asp.net-mvc

我的桌面上有一个文件供测试。我试图在一个看起来像这样的视图中显示它：

```
@{
    ViewBag.Title = "ShowFile";
}

<h2>ShowFile</h2> 
```

我用于控制器的代码是：

```
 [HttpGet]
        public ActionResult ShowFile(string path)
        {
            path = @"C:\Documents and Settings\nickla\Desktop\nlamarca_06_15.pdf";

            return File(path, "application/pdf", "nlamarca_06_15.pdf");
        } 
```

当我运行此代码时，视图会显示“未定义”关于这里可能出现什么问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:12:24.017

您似乎没有在路径中指定文件名：

```
public ActionResult ShowFile(string filename)
{
    var path = @"C:\Documents and Settings\nickla\Desktop";
    var file = Path.Combine(path, filename);
    file = Path.GetFullPath(file);
    if (!file.StartsWith(path))
    {
        // someone tried to be smart and sent 
        // ?filename=..\..\creditcard.pdf as parameter
        throw new HttpException(403, "Forbidden");
    }
    return File(file, "application/pdf");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:12:44.307

您在路径中缺少文件名。你的路径只到目录。给出完整的 PDF 文件名。

```
public ActionResult ShowFile(string path)
{
   //not sure why you overwrote although you have a parameter to pass the path

    path = @"C:\Documents and Settings\nickla\Desktop\nlamarca_06_15.pdf";
    return File(path, "application/pdf", "nlamarca_06_15.pdf");
} 
```

假设您在该特定目录中的 PDF 文件名是`nlamarca_06_15.pdf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:12:36.863

缺口，

乍一看似乎是路径问题（没有文件名，只有路径），请尝试：

```
[HttpGet]
public ActionResult ShowFile(string path)
{
    path = @"C:\Documents and Settings\nickla\Desktop\nlamarca_06_15.pdf";

    return File(path, "application/pdf", "pdf_download_name.pdf");
} 
```

最后一个参数纯粹是您希望下载的文件在“命中”用户本地驱动器时给出的名称。

**[编辑]**我看到你已经更新了你的问题，这使到目前为止的所有建议都无效。我能看到的唯一补充是您可能没有处理路径参数的路由设置。这个问题可能是一个移动的目标:)

# javascript - 离线地图脚本

> ID：11524294
> 
> 赞同：0
> 
> 时间：2012-07-17T14:08:20.693
> 
> 标签：javascript, jquery, google-maps

我正在制作一个带有基本计划的网站。首先，我使用谷歌地图的功能，但我的老板告诉我，该网站也可以在没有互联网接入的计算机上运行。

然后我使用了 jquery geo，但它错过了一些我需要的东西（比如标记）。这是一个 alpha 版本。

我需要的是一个我可以下载的脚本，它显示我自己的地图图块并有我可以点击的标记。地图需要平移和缩放。

有人知道这样做的图书馆吗？

# php - 我可以在我的网站上创建一个按钮来备份我的数据库吗？

> ID：11524296
> 
> 赞同：2
> 
> 时间：2012-07-17T14:08:25.150
> 
> 标签：php, mysql, sql, database, backup

我想在我的内容管理系统中设置一个按钮，我可以在其中保存特定页面上显示的表的备份 sql 文件。如果可能的话，我只想让它将 SQL 文件下载到我的计算机上。我还想知道是否可以做同样的事情，但导出为表格数据的 excel 文件。

如果只对整个数据库进行备份更容易，我会接受，我只需要知道它是否可能以及我正在寻找什么来构建脚本。

希望这是有道理的，我正在努力知道我需要寻找什么，因为我不知道它是否真的可能。我正在用php编码。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:21:58.433

这是一个小页面，使您能够：

*   检查你想要的表
*   下载它们
*   或将它们写入磁盘（服务器端）

**但**

如果您关心安全性，则不应这样做。

如果您想做这种操作，我建议您改用[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。

而如果你只是想在不下载的情况下进行自动备份，你最好使用`cron`和`mysqldump`命令。许多服务器上都配置了 Cron 以每晚进行备份。

看这个 ：

[http://www.comentum.com/mysqldump-cron.html](http://www.comentum.com/mysqldump-cron.html)

[http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html](http://www.noupe.com/how-tos/10-ways-to-automatically-manually-backup-mysql-database.html)

出色地。这是 PHP 页面：

```
<?

$db_base="set_your_base";
$db=mysql_connect("xxxx","xxxx","xxxx")
or die ("unable to connect");
$select_base=mysql_selectdb($db_base,$db);

function get_para_value($name, $default_value) {
    global $HTTP_GET_VARS, $HTTP_POST_VARS, $_GET, $_POST;
    if( isset($_GET[$name])) {
        return $_GET[$name];
    }
    if( isset($_POST[$name])) {
        return $_POST[$name];
    }
    return $default_value;
}

$action=get_para_value('action', 'ask');

if ($action=='ask') {
    ?>
    <html>
    <body>
    <SCRIPT LANGUAGE="JavaScript">
    var checkflag = "false";
    function check(form) {
        var objCheckBoxes = form.elements;
        if (checkflag == "false") {
            for (i = 0; i < objCheckBoxes.length; i++) {
                objCheckBoxes[i].checked = true;
            }
            checkflag = "true";
            return "Uncheck all";
        } else {
            for (i = 0; i < objCheckBoxes.length; i++) {
                objCheckBoxes[i].checked = false;
            }
            checkflag = "false";
            return "Check all";
        }
    }
    </script>

    <center>

    <form name=dump_form action=dump_dys.php method="post" enctype="multipart/form-data" accept-charset="utf-8">
    <br>
    Choose the tables you want:
    <br>
    <br>
    <input type=button value="Check all" onClick="this.value=check(this.form)">
    <br>
    <br>
    <table>
    <?php
    $sql_tables = "SHOW TABLES";
    $req_tables = mysql_query($sql_tables);
    while (list($table) = mysql_fetch_row($req_tables)) {
        echo "<tr><td><input type=checkbox name=".$table."> ".$table."</td></tr>";
    }
    ?>
    </table>
    <input type=hidden name=action value=dump>
    <br>
    <input type=button value="Download" onClick="this.form.action.value='dump';this.form.submit();">
    &nbsp; <input type=button value="Write on server" onClick="this.form.action.value='dump_to_disk';this.form.submit();">
    </form>
    </center>
    </body>
    </html>
    <?php
} else if ($action=='dump') {
    header("Content-type: application/octet-stream");
    header("Content-Disposition: attachment;filename=\"$db_base.sql\"");
    header("Content-Transfer-Encoding: binary");
    echo "--\n";
    echo "-- Dump of database $db_base\n";
    echo "--\n";
    $sql_tables = "SHOW TABLES";
    $req_tables = mysql_query($sql_tables);
    while (list($table) = mysql_fetch_row($req_tables)) {
        if (get_para_value($table,'no')=='no') continue;
        echo "\n--\n-- Table $table\n\n";
        echo "DROP TABLE IF EXISTS $table;\n";
        $sql_create_table = "SHOW CREATE TABLE $table";
        $req_create_table = mysql_query($sql_create_table);
        $create_table = mysql_fetch_array($req_create_table);
        echo $create_table[1].";\n";
        echo "\n--\n-- Filling de $table\n\n";
        $sql_fill_table = "SELECT * FROM $table";
        $req_fill_table = mysql_query($sql_fill_table);
        while ($row = mysql_fetch_assoc($req_fill_table)) {
        $line_insert = "INSERT INTO $table (";
        $l_value = ") VALUES (";
        foreach ($row as $field => $value) {
            $line_insert .= "`$field`, ";
            $l_value .= "'".mysql_real_escape_string($value)."', ";
        }
        $line_insert = substr($line_insert, 0, -2);
        $l_value = substr($l_value, 0, -2);
        echo $line_insert.$l_value.");\n";
       }
    }

    echo "--\n";
    echo "-- Dump of base $db_base finished )\n";
    echo "--\n";
} else if ($action=='dump_to_disk') {
    $file = fopen($db_base.".sql", 'w') or die('bug!');
    fwrite($file, "--\n");
    fwrite($file,  "-- Dump of the base $db_base\n");
    fwrite($file,  "--\n");
    $sql_tables = "SHOW TABLES";
    $req_tables = mysql_query($sql_tables);
    while (list($table) = mysql_fetch_row($req_tables)) {
        if (get_para_value($table,'no')=='no') continue;
        fwrite($file,  "\n--\n-- Table $table\n\n");
        fwrite($file,  "DROP TABLE IF EXISTS $table;\n");
        $sql_create_table = "SHOW CREATE TABLE $table";
        $req_create_table = mysql_query($sql_create_table);
        $create_table = mysql_fetch_array($req_create_table);
        fwrite($file,  $create_table[1].";\n");
        fwrite($file,  "\n--\n-- Remplissage de $table\n\n");
        $sql_fill_table = "SELECT * FROM $table";
        $req_fill_table = mysql_query($sql_fill_table);
        while ($row = mysql_fetch_assoc($req_fill_table)) {
        $line_insert = "INSERT INTO $table (";
        $l_value = ") VALUES (";
        foreach ($row as $field => $value) {
            $line_insert .= "`$field`, ";
            $l_value .= "'".mysql_real_escape_string($value)."', ";
        }
        $line_insert = substr($line_insert, 0, -2);
        $l_value = substr($l_value, 0, -2);
        fwrite($file,  $line_insert.$l_value.");\n");
       }
    }
    fwrite($file, "--\n");
    fwrite($file, "-- Dump of base $db_base finished (not even a crash!)\n");
    fwrite($file, "--\n");
    fclose($file);
    echo "dump done";
}
?> 
```

# iphone - 为 UITableViewAccessory 设置自定义 BG 图像？

> ID：11524298
> 
> 赞同：0
> 
> 时间：2012-07-17T14:08:55.890
> 
> 标签：iphone, ios, cocoa-touch

我正在尝试为 UITableViewCellAccessory 设置自定义背景图像。这可能吗？基本上，我想要一个配件的功能，但看起来像一个自定义按钮。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:24:03.203

请检查文档[http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

# iphone - textLabel 隐藏 detailLabel

> ID：11524299
> 
> 赞同：0
> 
> 时间：2012-07-17T14:08:56.587
> 
> 标签：iphone, objective-c, ios5, uitableview

我正在使用`UITableView`带有“右细节”样式的动态单元格。但是当`textLabel`具有高宽度时，他隐藏了`detailLabel`.

我试图调整大小，`textLabel`但它似乎无法调整大小。有没有办法在避免子类化`UITableViewCell`或自己添加一些`UILabel`类的同时做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:40:35.593

在单元格中添加自定义标签。如果仍然遇到问题，请增加单元格的高度。

这是我的代码 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { static NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
cell.textLabel.textColor=[UIColor blackColor];
cell.backgroundColor=[UIColor clearColor];  
NSDictionary *dict=[dataArray objectAtIndex:indexPath.row];
NSString *strName=[dict objectForKey:@"name"];
NSString *strType = [dict objectForKey:@"type"];
cell.selectionStyle = NO;
cell.textLabel.numberOfLines=1;
cell.selectionStyle = UITableViewCellSelectionStyleBlue;
UILabel *lbl =[[UILabel alloc]init];
lbl.frame=CGRectMake(115,8,220,40);
lbl.text=strName;
lbl.textColor = [UIColor colorWithRed:74/255.0f green:64/255.0f blue:34/255.0f alpha:1.0];
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    lbl.font = [UIFont boldSystemFontOfSize:17];
}
else
{
    lbl.font = [UIFont boldSystemFontOfSize:15];
}
lbl.baselineAdjustment=UIBaselineAdjustmentAlignCenters;
lbl.numberOfLines=1;
lbl.backgroundColor=[UIColor clearColor];

UILabel *lbl1 =[[UILabel alloc]init];
lbl1.frame=CGRectMake(115,35,220,40);
lbl1.text=strType;
lbl1.textColor = [UIColor colorWithRed:74/255.0f green:64/255.0f blue:34/255.0f alpha:1.0];
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    lbl1.font = [UIFont boldSystemFontOfSize:17];
}
else
{
    lbl1.font = [UIFont boldSystemFontOfSize:15];
}
lbl1.baselineAdjustment=UIBaselineAdjustmentAlignCenters;
lbl1.numberOfLines=1;
lbl1.backgroundColor=[UIColor clearColor];

[[cell contentView] addSubview:lbl];
[[cell contentView] addSubview:lbl1];
return cell;

[cell release];
[CellIdentifier release];
[lbl release]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:16:13.777

您应该能够`UILabel`通过更改框架来调整 a 的大小。或者，使用该`adjustsFontSizeToFitWidth`属性。查看文档：[UILabel 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html)

# php - PHP 案例工作但不是默认的

> ID：11524303
> 
> 赞同：1
> 
> 时间：2012-07-17T14:09:12.990
> 
> 标签：php, get, switch-statement

对于使用 Ajax 加载的页面，我有一些案例。每个案例都与底部的默认值完全分开。它只是不显示任何东西。

```
switch($_GET['page'])  {  

    case '#filemanager' : $page = '
        <div class="innerbox">
            <p>Demo text for the file manager page</p>
        </div>'; break;

    case '#todo' : $page = '
        <div class="innerbox">
            <p>Demo text for the to-do page</p>
        </div>'; break;

    default: $page = '
        <div class="innerbox">
            <h1>ADMIN CONTROL PANEL</h1>
        </div>'; break;

}
echo $page; 
```

我在代码中做错了什么吗？如果是这样，一个快速的帮助之手将不胜感激。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:13:25.023

该代码应该可以工作，请参阅[此示例](http://codepad.org/vNURlJch)。

最有可能的问题是`$_GET['page']`没有设置，你遇到了一个 php 警告。您可以使用以下方法避免这种情况：

```
$get = isset($_GET['page']) ? $_GET['page'] : 'default or something';
switch($get) {
    ... 
```

# jquery - jquery自动计算文本输入中两个值的乘积

> ID：11524307
> 
> 赞同：0
> 
> 时间：2012-07-17T14:09:23.347
> 
> 标签：jquery, html, autocomplete

我有两个输入框，我们分别命名为 txt_qty 和 txt_price。我想要做的是自动计算这两个值的乘积并将其放在另一个文本输入中。

jQuery代码：

```
$('.toAdd').live('change', function() {
  var total = 0;

  $('.toAdd').each(function () {
    var v = $(this).val();
    total *= Number(v);
  });

  $('#total_amount').val(total);
}); 
```

假设 txt_qty 和 txt_price 有一个类“toAdd”并且产品容器的 id 为“total_amount”。

上面的代码仅适用于添加这两个值，使得

```
total += Number(v); 
```

但是当我把它做成

```
total *= Number(v); 
```

它不起作用。这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:30:47.573

开始时total = 0，当你第一次做*=时，结果是0..

如果您有两个输入，请执行以下操作：

```
var total = parseInt($('#txt_qty').val()) * parseInt($('#txt_price').val()); 
```

# iphone - iCloud：如何管理 iCloud 停用？

> ID：11524308
> 
> 赞同：6
> 
> 时间：2012-07-17T14:09:25.290
> 
> 标签：iphone, objective-c, ios, icloud

我遇到了有关 iCloud 同步过程的问题。

当用户决定激活 iCloud 时，本地存储在应用沙箱中的文档被移动到本地 iCloud 目录，然后沙箱中的文件被删除。这是通过**setUbiquitous**方法完成的。

如果用户在 iPhone 设置中停用 iCloud（通过关闭“iCloud 文档和数据保存”），我的问题就会出现。在这种情况下，iCloud 目录不再可访问，并且应用程序沙箱无效（因为它已被**setUbiquitous**方法删除）。因此，用户丢失了所有数据......

一种解决方案可能是始终在应用程序沙箱中维护 iCloud 文件的副本……但这似乎需要做很多工作。应该有一种更简单的方法......任何人都有更好的想法/解决方案？

谢谢阅读 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:41:57.400

这些文件实际上并没有被删除，并且会在再次启用 iCloud 时重新下载。您不能只显示带有该信息的消息吗？在某种程度上，这类似于在设置应用程序中删除电子邮件帐户。用户可能期望他/她的电子邮件随后从设备中删除，但仍可“在云中”使用。

# json - 理解 json 数据

> ID：11524309
> 
> 赞同：1
> 
> 时间：2012-07-17T14:09:26.623
> 
> 标签：json

各位程序员好。我有一个 URL，我应该获取托管在该 URL 上的 JSON 数据。由于我对 JSON 完全陌生，我只能识别一些数据，但我想知道 JSON 数据中有一些“奇怪”的字符。我使用在线“JSON 查看器”查看来自 URL 的数据，它看起来像这样：

```
{
    "Content": "\u000d\u000a\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u000d\u000a\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Current Leaders\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Sales in 000's\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Alice\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u00091,000\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Bill\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009975\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Curt\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009967\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Deborah\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009965\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009Elsa\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009\u0009\u0009964\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u000d\u000a\u000d\u000a\u000d\u000a\u0009 \u000d\u000a",
    "DateChanged": "\/Date(1330709756123+0100)\/",
    "InfoContentID": 150,
    "Topic": "INCENTIVE LEADER BOARD"
  } 
```

问题是，所有这些都是`u000d\u0009`什么意思？这一切都很奇怪。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:13:25.137

这些是unicode字符`\u000d`，是回车符（`\r`），`\u000a`是换行符（`\n`），`\u0009`是制表符（`\t`）。基本上都是空格。

# xcode - 当它是使用 XCode 4 的 UISCrollView 时将单元格推送到 DetailView 时崩溃

> ID：11524319
> 
> 赞同：0
> 
> 时间：2012-07-17T14:09:54.823
> 
> 标签：xcode, uitableview, uiview, uiscrollview, uistoryboard

我使用此代码从 TableView 移动到 DetailView：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:TRUE];
  if(indexPath.row==0) {

      //Initialize the detail view controller and display it.
      Detail1ViewController *firstDetailController = [[Detail1ViewController alloc] initWithNibName:@"Detail1ViewController" bundle:nil];
      [self.navigationController pushViewController:firstDetailController animated:YES];
      [firstDetailController release];
}
else if(indexPath.row==1) {

    //2nd view
}
else if(indexPath.row==2) {

    //3rd view
}
} 
```

Storyboard 中的 Detail1ViewController 只是一个 UIScrollView，后面没有 UIView。

这是 Detail1ViewController.h：

```
#import <UIKit/UIKit.h>

@interface Detail1ViewController : UIViewController {
 IBOutlet UIScrollView *detail1Scroller;
}

@end 
```

并加载它.m：

```
- (void)viewDidLoad
{
[super viewDidLoad];
[detail1Scroller setScrollEnabled:YES];
[detail1Scroller setContentSize:CGSizeMake(320,1100)];
// Do any additional setup after loading the view.
} 
```

我已经在 Connections Inspector 中建立了从“detail1Scroller”到 UISCrollView 的连接，并在 Identity Inspector 中将“Detail1ViewController”写为 Detail1ViewController 的类。但是当我进入详细视图时，应用程序崩溃了！

我注意到在我正在关注的教程中，UIScrollView 放置在 UIView 上，这在我的项目中没有做过。所以我尝试在 UIView 中创建一个带有 UIScrollView 的 TestViewController，但是“detail1Scroller”插座没有像教程中那样显示在 Connections Inspector 中！有人可以帮我解决这个问题，并明确我是否应该使用带有 UIView 的 UIScrollView 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:37:12.590

故事板是一种配置视图控制器实例的方法，并通过 segues 自动或手动使用代码一遍又一遍地实例化它们。当您在情节提要中设计视图控制器时，您不是在设计类，而是在设计该类的特定实例。在故事板中有两个相同视图控制器类的实例是合法的，具有不同的视图布局。

这意味着如果您直接分配视图控制器类的实例，它不会附带您在情节提要中指定的所有 UI。这实际上是这段代码发生的事情：

```
Detail1ViewController *firstDetailController = [[Detail1ViewController alloc] initWithNibName:@"Detail1ViewController" bundle:nil];
[self.navigationController pushViewController:firstDetailController animated:YES];
[firstDetailController release]; 
```

即使您没有在 Xcode 中设计 XIB/NIB，您也指定了一个 NIB 名称，这也存在一些混淆。

要分配您在情节提要中设计的视图控制器的新副本，您应该使用 -[UIStoryboard instantiateViewControllerWithIdentifier:] 方法。标识符值应与故事板身份检查器中的值匹配。

您的代码应如下所示：

```
Detail1ViewController *firstDetailController = [[self storyboard] instantiateViewControllerWithIdentifier:/* my identifier */];
[self.navigationController pushViewController:firstDetailController animated:YES]; 
```

如果您使用此代码为视图控制器使用情节提要，您还应该考虑使用 segue 来启动此转换。

# jquery - 在jquery动画不起作用后使用完整

> ID：11524321
> 
> 赞同：0
> 
> 时间：2012-07-17T14:09:55.357
> 
> 标签：jquery, animation

我有一个动画 div 覆盖的 jQuery 函数。动画完成后，我想要一个`.load`功能发生。我试图使用完整的功能来做到这一点，但似乎无法让它工作。

```
$(function() {
    $("#fullscreen_launch").click(function(){
        $("#fullscreen").animate({
            top: '0px',
            height:'100%',
        }, 950),
        complete: function() {
            $('#fullscreen').load('http://www.klossal.com/portfolio/space_fullscreen.html');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:13:35.540

`.animate()`有两种不同的语法选项，不能混用。

```
.animate( properties [, duration] [, easing] [, complete] )

.animate( properties, options ) 
```

在第一种情况下，它看起来像这样

```
$("#fullscreen").animate({
    top: '0px',
    height:'100%',
}, 950, function() {
    $('#fullscreen')
       .load('http://www.klossal.com/portfolio/space_fullscreen.html');
}); 
```

# php - javascript->php 加密解密 - 需要说明和方法请

> ID：11524323
> 
> 赞同：0
> 
> 时间：2012-07-17T14:10:09.647
> 
> 标签：php, javascript, encryption

简单场景：
1\. 我的客户想登录我的网站。他去`http`://mywebsite.com
2\. 输入他的用户/通行证并提交。
3\. 我们去`https`。

问题：在客户端**不**
使用 javascript 加密用户/密码 有多不安全？ 这意味着用户/通行证在网络上按原样发送。 怎么会有人接他们？ 如果有人可以接他们，是否建议加密？ 如果是这样，那么推荐的方法是什么？

 **谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:14:19.843

如果您的表单发布到的操作是 HTTPS，那么发布到它的操作应该在传输层中加密。无需使用 javascript 进行加密。事实上，如果您确实使用了 javascript 来加密密码，那么攻击者很容易剥离该 javascript 以便在未加密的情况下发送凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:44:23.300

像所有人一样，我建议在您的服务器中仅使用 HTTPS。但是，我正在查看我银行页面的源代码......我注意到他们在发送之前在字段中使用了密码学，例如，仅使用 javascript“隐藏”帐户的号码和密码。我认为在某些情况下避免“不安全”是有效的，因为当数据离开您的机器时，协议 SLL/TLS（TCP 和 HTTPS 之间的层）提供“安全”。但是，如果您的 SO 感染了某些东西，也许这个“东西”可以在操作系统使用 TLS/SLL 之前“分析”浏览器输出产生的网络流量。

无论如何，如果有人有兴趣，Javascript 中有一些库可以做 criptography！

例如，这个：

[http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)

我的回答是试图表明有一个重点是防止恶意软件能够了解您的浏览器和操作系统之间的流量。**

# python - 在 Python 中更改类或属性名称的首选策略是什么？

> ID：11524325
> 
> 赞同：0
> 
> 时间：2012-07-17T14:10:11.333
> 
> 标签：python, emacs

我习惯了 Java 和像 Netbeans 这样的 IDE，它们通过突出显示需要更改名称的任何地方来使更改名称变得非常简单。

在 Python 中解决这个问题的最佳方法是什么？

我假设答案将与编写测试（以什么形式以及我应该如何组织它们？）和文本搜索和替换（如何处理引用不同变量的同名）有关。

信息：我在 Windows 上使用 emacs。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:21:07.223

经过一番谷歌搜索后，我找到了[http://rope.sourceforge.net/](http://rope.sourceforge.net/)，这是一个用于 python 的重构库，带有 vim 和 emacs 的扩展。据我所知，它非常可靠。您还可以查看[http://bicyclerepair.sourceforge.net/](http://bicyclerepair.sourceforge.net/)以获取另一种选择。

# pdfbox - PDFBox：如何从 TextPosition 获取 PDRectangle

> ID：11524327
> 
> 赞同：2
> 
> 时间：2012-07-17T14:10:22.933
> 
> 标签：pdfbox

我需要用超链接替换现有 PDF 中的某些短语。例如，“使用 Java 语言的一个优势是人力的可用性”应该被处理为“使用[Java 语言](http://en.wikipedia.org/wiki/Java_%28programming_language%29)的一个优势是人力的可用性”。

为此，我创建了一个扩展[PDFTextStripper](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/PDFTextStripper.html)的处理器类。通过覆盖`processTextPosition`，我能够获得所有字符的[TextPosition](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/TextPosition.html)。但我不知道如何从 TextPosition 中获取[PDRectangle](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/common/PDRectangle.html)，这将帮助我构建[PDAnnotationLink](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/pdmodel/interactive/annotation/PDAnnotationLink.html)。我尝试了 x、y 属性的组合，但缺少位置。需要一些帮助。谢谢你。

桑杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T10:58:58.820

我这样做了：

```
rectangle.setLowerLeftX(position.getTextPos().getXPosition());
rectangle.setLowerLeftY(position.getTextPos().getYPosition() - 2); // 2 as cushion
rectangle.setUpperRightX(rectangle.getLowerLeftX() + position.getWidthDirAdj());
rectangle.setUpperRightY(rectangle.getLowerLeftY() + 12 /*
    ideally it should be position.getHeightDir()?
    but my sample PDF yielded a negative figure for this */); 
```

# javascript - jqChart烛台图：奇怪的显示

> ID：11524329
> 
> 赞同：0
> 
> 时间：2012-07-17T14:10:34.993
> 
> 标签：javascript, jquery, jquery-plugins, jqchart

我正在为 jQuery 使用 jqChart 插件。
使用以下代码，烛台图可以正确呈现。

```
<script lang="javascript" type="text/javascript">
        $(document).ready(function () {
            $('#jqChart').jqChart({
                title: { text: 'CNDL CHRT' },
                series: [
                            {
                                type: 'candlestick',
                                data : [ ['Mon', 5375, 5325, 5340, 5330], ['Tue', 5322, 5250, 5290, 5270], ['Wed', 5375, 5325, 5340, 5330], ['Fri', 5322, 5250, 5290, 5270]] 
                                                            }
                        ]
            });
        });
    </script> 
```

![jqChart 确定](../Images/eebbe0ff28175a8b71cb876beb4b4940.png)

除了下面的 JSON 数据之外，所有其他的东西都没有变化，图表没有正确呈现。
工具提示仅针对某些条显示。
所有条形都没有填充颜色。

```
data : [["2012/07/02:0920", 5308.2, 5308.2, 5288.0, 5292.4], ["2012/07/02:0930", 5292.0, 5296.7, 5283.35, 5295.05], ["2012/07/02:0940", 5295.95, 5297.3, 5286.6, 5288.55], ["2012/07/02:0950", 5289.4, 5292.0, 5284.0, 5285.0]] 
```

![jqChart 不正常](../Images/9a2d0c1d67a13278a3fa8f9accc37c91.png)

第二个“数据”json对象可能有什么问题？
谢谢，

维内

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:32:32.183

jqChart 烛台图表接受格式为 HLOC 的数据。我相信你的第二个数据是 OHLC 格式的。

您可以将其转换为：

```
 var data = [["2012/07/02:0920", 5308.2, 5308.2, 5288.0, 5292.4], ["2012/07/02:0930", 5292.0, 5296.7, 5283.35, 5295.05], ["2012/07/02:0940", 5295.95, 5297.3, 5286.6, 5288.55], ["2012/07/02:0950", 5289.4, 5292.0, 5284.0, 5285.0]];

    for (var i = 0; i < data.length; i++) {

        var item = data[i];

        data[i] = [item[0], item[2], item[3], item[1], item[4]];
    }

    $('#jqChart').jqChart({
        title: { text: 'CNDL CHRT' },
        series: [
                    {
                        type: 'candlestick',
                        data: data
                    }
                ]
    }); 
```

# emacs - 将 u2014、u2019 等转换为 UTF-8 字符的函数

> ID：11524332
> 
> 赞同：1
> 
> 时间：2012-07-17T14:10:41.877
> 
> 标签：emacs, unicode, encoding

当我从网页复制并粘贴到 Emacs 时，我的缓冲区通常看起来像这样：

```
Here\u2019s a practical example: 
```

代替：

```
Here’s a practical example: 
```

我现在有两个不同的问题（但它们是相关的）：

1.  我应该如何配置 Emacs，以便从现在开始，当我复制和粘贴时，我会立即获得 UTF-8 字符而不是*\uxxxx*转义？

2.  如何转换我已经保存并包含虚假编码的所有先前文件？

是否已经有一个函数在我可以简单地调用的地方进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:39:26.540

Emacs 似乎理解这些转义码。您可以将它们作为 lisp 字符串读入，它会自动转换它们。希望这可以变得不那么笨重。

```
C-M-% \(\\u[0-9A-Fa-f]\{4\}\) RET \,(read (concat "\"" \1 "\"")) RET 
```

如果您不熟悉`\,`替换字符串，它允许您评估任意 lisp 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:11:58.913

您需要根据您用于文件的编码系统，指定用于通过窗口系统与其他程序传输选择的编码系统。

这就是函数 set-selection-coding-system，通常绑定到 Cx RET x

默认情况下，我将文件设置为 utf-8。在我将复制粘贴的字体也设置为 utf-8 之前，我遇到了和你一样的问题。

# postgresql-9.1 - 在 Ubuntu (Turnkey Linux) 上将 Postgre 8.4 升级到 9.1

> ID：11524333
> 
> 赞同：2
> 
> 时间：2012-07-17T14:10:43.077
> 
> 标签：postgresql-9.1, postgis, postgresql-8.4

我试图让 Postgre 9.1 工作，因为我需要 PostGIS 2.0 版本中可用的功能。Turnkey Linux 提供了一个 Postgre 8.4 设备，它运行良好，甚至内置了 PostGIS……但它只有 1.2 版。

我遵循了本指南，该指南基本上展示了如何通过 apt-get 安装 9.1，这似乎有效： http: [//netadminlinux.blogspot.com/2011/11/installing-postgresql-91-on-ubuntu-1104.html](http://netadminlinux.blogspot.com/2011/11/installing-postgresql-91-on-ubuntu-1104.html)

我现在的问题是，虽然安装了 8.4 和 9.1，但我似乎只能访问 8.4。我安装了 pgadmin3，但我不知道如何访问它，因为默认的 Turnkey Appliance 设置为托管 pgadmin2。

在 /etc/init.d/ 中有两个条目，postgres-8.4。和postgres。我相信第二个是 9.1 实例，我什至可以使用 /etc/init.d/postgres start 来启动它。我尝试关闭 8.4 实例，然后启动 9.1... 但是当我尝试使用命令行 psql 访问服务器时，我收到以下消息：

> psql：无法连接到服务器：没有这样的文件或目录服务器是否在本地运行并接受 Unix 域套接字“/var/run/postgresql/.s.PGSQL.5432”上的连接？

我需要对 9.1 的新实例执行什么操作才能使其运行？我似乎错过了哪些安装后步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:34:18.647

如果你都安装了，你应该有两个配置文件：

```
/etc/postgresql/8.4/main/postgresql.conf
/etc/postgresql/9.1/main/postgresql.conf 
```

它们中的每一个都有不同的`port =`指令（通常是 5432 和 5433）。

如果版本 9.1 配置了 5433，您可能必须将客户端配置为显式使用 5433（对于具有 TCP 连接的端口或作为 unix 套接字名称的一部分）。

如果您希望 9.1 使用默认端口，请将其更改为 5432，将另一个更改为 5433，停止这两个服务并重新启动它们。（请注意，这可能会影响在端口 5432 上使用 8.4 版的其他应用程序，如果有的话。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:28:03.113

您可以尝试删除旧的 postgres：

```
 apt-get purge postgresql-8.4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:00:51.143

当我安装 2 个 PG 实例（8.3 与 9.1）时，我无法将 8.3 附带的 PG Admin 版本连接到 9.1 服务器实例

所以要小心你没有打开 8.x 附带的 PG Admin 版本，并且你没有尝试使用它来连接到 9.x .. 因为我得到了相同或相似的 msg

`psql: could not connect to server: No such file or directory Is the server running locally and accepting connections`

我更改了旧 PG Admin 快捷方式的图标，以便我可以暂时知道我正在使用哪个。使用 9.1 附带的 PG Admin 我可以毫无问题地连接到它，并且一旦迁移了所有数据，我确保我卸载了正确的 PG 和 PGAdmin 程序

# javascript - 我想拆分的以下字符串的正则表达式：1.5 cc 或 1.5cc

> ID：11524336
> 
> 赞同：0
> 
> 时间：2012-07-17T14:10:44.620
> 
> 标签：javascript, regex

我有以下刺痛输入，我需要分开输出。示例**1.5 cc**或**1.5cc** 我现在正在根据使用以下代码分隔输入字符串的空格来执行此操作：

```
var immunization = msg['dose_size'].toString().trim();
immunization = immunization.split(' ');
var amount = immunization[0];
var unit = immunization[1]; 
```

然而，在测试中，我发现输入并不总是以这种方式格式化，有时空格会丢失。所以我没有空格的输入输出是1.5cc，第二个输出是空的。

我尝试使用正则表达式，如： \d*.?\d+ 并且它有效，但由于它在 1.5 上找到匹配项，我得到第一个输出的空值和第二个输出的“cc”，我需要两者.

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:16:36.710

您可以使用此代码获取数据：

```
/(\d+(?:\.\d*)?|\.\d+)\s*(\S+)/.exec(inputString) 
```

*   `(\d+(?:\.\d*)?|\.\d+)`将匹配十进制数，它将接受整数`34`、常规十进制数`34.555`，并允许`.5555`和`4533.`通过。

*   后面是`\s*`匹配的可选空格。

*   随后`(\S+)`匹配并捕获下一个标记（没有空格字符）。

如果匹配，则返回一个数组，其中数组的索引 1 为十进制数，数组的索引 2 为单位。

# perl - 如何在 Perl 中对选定字段执行算术运算

> ID：11524340
> 
> 赞同：-4
> 
> 时间：2012-07-17T14:11:02.233
> 
> 标签：perl

我正处于学习 Perl 的基本阶段，并且有一个任务要执行。我需要从文件中其他字段的其他数字中减去一个字段中的数字，并将差值放在我要减去的数字中。我可以将其描述如下

```
03,12682559,USD,010,11398,,,015,11398,,,030,11398,,,
16,698,416667,V,110729,,1354409,2011060411/
88,XX:XXXX XXX
88,TE:56745745
88,VBDS:4564574
16,195,416667,V,110729,,3134046323,SD06546700S1DA01/
88,ED:BMG RECD
88,ED:2097675
88,DRGF:D5674D6756
88,CV:O/O XXXXX XXXX XXX XX
88,AB:XXXX
88,BO:ABCL VSSFRDE SERV WESF 12700 Wdftgs 
88,OA:USD416667
88,BO:5676476 BO1:gfhdghj fhfjhjdd SERV TKDF 
49,2151723,15/
98,2151723,3,21/ 
```

**首先，我需要在第一行从03**开始​​搜索帐号，在本例中为**12682559**（我必须只为该帐号执行操作）。

 **接下来，我需要从文件中的**88,OA:USD416667**开始的**88行中获取数字****416667**。

 ******这个数字将从49**和**98**开始的两行中的值中减去，并在不干扰这些行的其他元素的情况下替换差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:25:38.063

我假设您正在寻找从文件中获取数据，在这种情况下，您需要阅读 Perl 如何执行 IO：

```
perldoc -f io 
```

您可以自己解析这些行，也可以使用诸如[Text::CSV之类的模块](https://metacpan.org/pod/Text::CSV)

解析完这些片段后，您可以执行所需的任何操作并将数据写回文件等。

既然你刚刚开始，这里有[一本](http://modernperlbooks.com/books/modern_perl/chapter_00.html#toc_UHJlZmFjZQ)你可能会考虑阅读的书。

你也可以在[这里](http://learn.perl.org/)花一些时间。******

# mysql - 在我的 Google Maps api v3 上获取“Unexpected Token <”

> ID：11524341
> 
> 赞同：0
> 
> 时间：2012-07-17T14:11:04.703
> 
> 标签：mysql, google-maps-api-3

我有一个问题，我正在使用[这个项目](http://vikku.info/programming/google-maps-v3/draggable-directions/saving-draggable-directions-saving-waypoints-google-directions-google-maps-v3.htm "SintaxError：意外的令牌<")来使用我的项目的基础。我试图获得与这些家伙项目相同的结果，并使用相同的项目在我的 SQL 中进行测试。

我完成了“index.php”的工作，当我单击“保存路线”时，它会发送一条消息“已更新”，因此，当我打开“loady.htm”时，它会给出该错误：“SintaxError: Unexpected Token <”

我使用了相同的代码，但更改了 process.php 上的本地主机以及帐户和密码。但这是独一无二的变化。

load.htm 有什么问题？或者它在 teste.php 上的错误，我无法在“loady.htm”中加载航点

测试链接：

[www.inventoresdegaragem.com/dbteste/index.htm](http://www.inventoresdegaragem.com/dbteste/index.htm) 和 www.inventoresdegaragem.com/dbteste/loady.htm

编辑 2：这是我的 process.php

```
<? ob_start(); header('Cache-Control: no-store, no-cache, must-revalidate');

@$data = $_REQUEST['*******'];

$host = 'localhost';
$usuario = '******';
$banco = '******';
$senha = '******';
$db = mysql_connect($host, $usuario, $senha);
mysql_select_db($banco, $db);

if($_REQUEST['command']=='save')
{

    $query = "update mapdir set value='$data'";
    if(mysql_query($query))die('bien');
    //die(mysql_error());
}

if($_REQUEST['command']=='fetch')
{
    $query = "select value from mapdir";
    if(!($res = mysql_query($query)));      
    $rs = mysql_fetch_array($res,1);
    die($rs['value']);      
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:13:00.210

您`process.php`无法连接到您的数据库。

> **警告**：mysql_connect() [function.mysql-connect]：第 10 行**/home/i/inventoresdegara/www/dbteste/process.php**中的未知 MySQL 服务器主机 'http' (1)

您当前的实时版本`process.php`似乎没有`localhost`指定为服务器。请注意，它应该只是一个服务器名称，不应包含协议：

```
$host = 'localhost';
$host = 'www.mydomainnamehere.com'; 
```

（或您想使用的任何域名）而**不是**

```
$host = 'http://www.mydomainnamehere.com'; 
```

我相信错误正在发生，因为我在上面复制的数据库错误消息被格式化为 HTML 并以`<`：

```
<br />
<b>Warning</b>:  mysql_connect() [<a href='function.mysql-connect'>function.mysql-connect</a>]: Unknown MySQL server host 'http' (1) in <b>/home/i/inventoresdegara/www/dbteste/process.php</b> on line <b>10</b><br /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:03:21.693

“之后”页面上的 html[无效](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.inventoresdegaragem.com%2Fdbteste%2Floady.htm&charset=%28detect+automatically%29&doctype=Inline&group=00)

看起来 jax.responseText 是空的。

# javascript - 为什么jQuery，每次输出相同的rel？

> ID：11524347
> 
> 赞同：3
> 
> 时间：2012-07-17T14:11:25.000
> 
> 标签：javascript, jquery, html

所以基本上这是我的脚本：

[http://jsfiddle.net/JJFap/42/](http://jsfiddle.net/JJFap/42/)

代码 -

```
jQuery(document).ready(function() {
    var rel = new Array();
    var count = 0;
    jQuery(".setting").each(function() {
        rel[count] = [];
        if(jQuery("span").attr("rel")) {
            rel[count].push(jQuery("span").attr("rel"));
        }  
        console.log(count);
        count++;
    });               
    jQuery("body").text(rel);
    console.log(rel);
});​ 
```

和

```
<div class="setting">
    <span rel="Variable">Variable</span>
    <span rel="Item">Item</span>
    <span rel="Something">Something</span>
</div>
<div>
    <span rel="Smth">Smth</span>
    <span>Sec</span>
</div>
<div class="setting">
    <span>Second</span>
    <span rel="first">First</span>
    <span rel="Third">Third</span>
</div> 
```

​我的问题，为什么它显示变量，变量？

我希望它首先显示变量，但我做不到。

基本上我想要实现的是创建新数组，在其中插入每个 div.setting 具有 rel 属性数组的跨度元素。

所以基本上在这个例子中它应该输出 -

```
Array (

   Array[0] => "Variable","Item","Something";

   Array[1] => "first","Third";

) 
```

希望你明白我的意思：）

**编辑：**

在我的另一个示例中，我尝试首先在每个函数中添加 jQuery("span").each(function() ...，但它输出了两个带有 rel 的所有 span 元素的完整数组。我不能有不同的类/ID对于每个 div 元素，因为它们都将具有相同的类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:15:00.443

`jQuery('span')`将在您的页面中查找**所有**跨度，然后拉出`rel`第一个的属性。由于您没有为该跨度搜索提供上下文，因此您将始终在文档中获得相同的 #1 跨度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T14:14:52.157

你应该使用这个：

```
 jQuery('span',this).each(function() {
        rel[count] = [];
        if (jQuery(this).attr("rel")) {
            rel[count].push(jQuery(this).attr("rel"));
        }
        console.log(count);
        count++;
    }) 
```

而不是这个：

```
 rel[count] = [];
    if(jQuery("span").attr("rel")) {
        rel[count].push(jQuery("span").attr("rel"));
    }  
    console.log(count);
    count++; 
```

[http://jsfiddle.net/mblase75/JJFap/52/](http://jsfiddle.net/mblase75/JJFap/52/)

诀窍是用一秒钟`.each`来遍历`span`每个标签中的所有标签`<div class="setting">`——您的原始代码正在使用`jQuery("span")`，它每次都会抓取`span`文档中的第一个标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:16:35.663

在该`.each()`方法中，您有几次此代码：`jQuery("span").attr("rel")`. 该代码只是在页面上查找*所有* `span`标签。当您将其粘贴在`.push()`方法中时，它只会推送`rel`集合中第一个 jQuery 对象的属性值。相反，您想做类似`$(this).find('span')`. 这将导致它查找作为该方法正在迭代的当前元素`span`的后代的任何标签。`.setting``.each()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T14:17:41.180

除了已经说过的，您还可以在使用时去掉`count`and以及在添加到选择器时去掉 ：`push()``jQuery.fn.map()``if``[rel]`

```
jQuery(document).ready(function() {
    var rel = [];
    jQuery(".setting").each(function() {
        rel.push(jQuery(this).find('span[rel]').map(function() {
            return this.getAttribute('rel');
        }).get());
    });               
    jQuery("body").text(rel);
    console.log(rel);
}); 
```

# json - 将 AS 3.0 转换为 AS 2.0 以进行 JSON 编码和解码

> ID：11524353
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:11:52.967
> 
> 标签：json, actionscript-2, actionscript-3

我已经为 JSON 编码和解码编写了一个 AS 3.0 代码，但我需要以下用 AS 2.0 编写的代码。我知道 AS 3.0 但不知道 AS 2。

这是代码：

```
 stop();
            var getFBId:String = ExternalInterface.call("getFBIdFromJS");
            var getFBName:String = ExternalInterface.call("getFBNameFromJS");

            import com.adobe.serialization.json.JSON;
            import flash.events.Event;
            import flash.net.URLLoader;
            import flash.net.URLRequest;
            import flash.net.URLRequestMethod;
            import flash.net.URLVariables;

            import fl.transitions.*;
            import fl.transitions.Tween;
            import fl.transitions.easing.*;
            import fl.transitions.TweenEvent;

            import flash.display.MovieClip;
            import flash.events.MouseEvent;
            playerInformation.visible = true;

            var loginObj:Object = new Object();

            var fbId:String = new String();
            var Id:String = new String();
            var varUid:String = new String();
            var ImageUrl:String = new String();
            var CreditBalance:String = new String();
            //var PointBalance:String = new String();
            var CoinBalance:String = new String();
            var IsDailyBonus:String = new String();
            var DailyBonusAmount:int = new int();

            var fbvarsLoader:URLLoader = new URLLoader();
            var fbvarsReq:URLRequest = new URLRequest("fbvars.php");
            var fbvarsVariables:URLVariables = new URLVariables();
            fbvarsLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
            fbvarsReq.method = URLRequestMethod.POST;

            fbvarsReq.data = fbvarsVariables;
            fbvarsLoader.load(fbvarsReq);
            fbvarsLoader.addEventListener(Event.COMPLETE, receiveLoad);

            function receiveLoad(evt:Event):void
            {
                fbId = getFBId;
                varUid = getFBName;
                ImageUrl = "https://graph.facebook.com/" + getFBId + "/picture";

                trace (getFBId);
                trace (getFBName);
                trace (ImageUrl);

                loginObj.FacebookId     = fbId;
                loginObj.UserName       = varUid;
                loginObj.PlatformId     = 1;
                loginReq.data = JSON.encode(loginObj);

                loginLoader.load(loginReq);
                trace("login ENCODE: " + JSON.encode(loginObj));

                FBlogindata.text = JSON.encode(loginObj);

            }
            //--------------- FB Vars (E)

            var serverURL:String = "http://serverURL";
            var playerPicLoader:Loader = new Loader();

            //--------------------------------

            var loginReq: URLRequest    = new URLRequest();
            loginReq.method             = URLRequestMethod.POST;
            loginReq.url                = 

            "http://serverURL";

            var loginLoader:URLLoader = new URLLoader();
            loginLoader.addEventListener(Event.COMPLETE, onComplete_login);

            function onComplete_login(e_login:Event)
            {
                var loginReturn:Object=JSON.decode(e_login.target.data,true);
                trace("login DECODE: " + e_login.target.data);
                logindata.text = e_login.target.data;

                if (loginReturn.Player.Status == "Valid")
                {

                    Id = String(loginReturn.Player.Id); 
                    CreditBalance = String(loginReturn.Player.CreditBalance);       
                    var playerPic:URLRequest = new URLRequest(ImageUrl);
                    playerPicLoader.load(playerPic);

                    playerInformation.mcPlayerThumbHolder.addChild(playerPicLoader);        
                    playerInformation.txtPlayerName.text = varUid;
                    playerInformation.txtPlayerCredit.text = CreditBalance;
                    playerInformation.visible = true;

                    UIDShow.text = Id;
                    FBIDShow.text = fbId;       

                    if (this.parent.parent != null){

                        trace (CreditBalance);

                        MovieClip(this.parent.parent).credit = CreditBalance;

                    }
                }
            } 
```

任何人都可以在 AS 2.0 中编写上述代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:32:34.683

这是[AS2 JSON 解析器的实现](http://inner.geek.nz/uploads/JSON.as)。有两种静态方法`stringify()`- 编码为 JSON 和`parse()`解码。因此，您不必编写自己的实现。对于其他东西，你可能应该坐下来学习一些关于 AS2 的东西，或者找一个仍然记得 AS2 的人 :)

# c# - 在 NHibernate 上使用 Linq 的 IN 运算符

> ID：11524355
> 
> 赞同：4
> 
> 时间：2012-07-17T14:11:56.980
> 
> 标签：c#, linq, nhibernate, queryover

我有一个使用 NHibernate`Session.Query<T>`方法的 linq 查询，我在这个查询中获取了一些复杂的属性和集合属性。我想知道，我怎样才能添加一个带有`IN`运算符的条件`int[]`？看我的代码：

```
public IEnumerable<Product> GetProducts(int[] idCategories) 
{
    // how to add IN condition here or a subquery 
    var query = Session.Query<Product>()
                   .Where(?????)
                   .Fetch(x=>x.Category)
                   .FetchMany(x=>x.Status).ThenFetch(x=>x.Item);

    return query.ToList();
} 
```

我有另一种查询方法来获取它`int[]`，我想在这里应用它，或者是否有任何方法可以在`IN`运算符上添加这个子查询，我真的很感激！

OBS：如有必要，我可以转换`int[]`为。`List<int>`

## 编辑

我`int[]`通过如下查询得到了这个：

```
return session.Query<Category>.Where(...).Select(x => x.Id).ToArray(); 
```

我的第二个问题是，如何将此查询添加为子查询以按类别过滤？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:14:50.327

你真的不需要`IN`运营商。你可以这样做：

```
.Where(x => idCategories.Contains(x.Category)) 
```

注意：`Contains`是一种扩展方法。您需要确保有一个 using 语句 for `System.Linq`，但您可能已经有了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:17:03.040

看看限制，例如

```
var query = Session.Query<Product>()
     .Where(Restrictions.In(Projections.Property<Product>x=>x.Id),idCategories))
     .Fetch(x=>x.Category)
     .FetchMany(x=>x.Status).ThenFetch(x=>x.Item); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:25:10.663

关于子查询，需要子查询类

```
var query = Session.Query<Product>()
               .Where(Subqueries.WhereProperty<Product>(x=>x.Id)...)
               .Fetch(x=>x.Category)
               .FetchMany(x=>x.Status).ThenFetch(x=>x.Item); 
```

有关更多详细信息，请查看此处[如何在 nhibernate 中进行子查询？](https://stackoverflow.com/questions/5969250/how-to-do-subqueries-in-nhibernate)

# arrays - 使用 CodeIgniter 2.0 上传多个文件（数组）

> ID：11524356
> 
> 赞同：33
> 
> 时间：2012-07-17T14:11:59.833
> 
> 标签：arrays, file, codeigniter, upload

我一直在寻找和挣扎 3 天来使这个工作，但我就是做不到。我想要做的是使用多文件输入表单，然后上传它们。我不能只使用固定数量的文件来上传。我在 StackOverflow 上尝试了许多解决方案，但我无法找到一个可行的解决方案。

这是我的上传控制器

```
<?php

class Upload extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url','html'));
}

function index()
{    
    $this->load->view('pages/uploadform', array('error' => ' ' ));
}

function do_upload()
{
    $config['upload_path'] = './Images/';
    $config['allowed_types'] = 'gif|jpg|png';

    $this->load->library('upload');

 foreach($_FILES['userfile'] as $key => $value)
    {

        if( ! empty($key['name']))
        {

            $this->upload->initialize($config);

            if ( ! $this->upload->do_upload($key))
            {
                $error['error'] = $this->upload->display_errors();

                $this->load->view('pages/uploadform', $error);
            }    
            else
            {
                $data[$key] = array('upload_data' => $this->upload->data());

                $this->load->view('pages/uploadsuccess', $data[$key]);

            }
         }

    }    
  }    
 }
 ?> 
```

我的上传表格是这个。

```
 <html>
 <head>
    <title>Upload Form</title>
</head>
<body>

<?php echo $error;?>

<?php echo form_open_multipart('upload/do_upload');?>

<input type="file" multiple name="userfile[]" size="20" />
<br /><br />

<input type="submit" value="upload" />

</form>

</body>
</html> 
```

我只是一直有这个错误：

> 您没有选择要上传的文件。

这是示例的数组：

> Array ( [userfile] => Array ( [name] => Array ( [0] => youtube.png [1] => zergling.jpg ) [type] => Array ( [0] => image/png [1 ] => image/jpeg ) [tmp_name] => 数组 ( [0] => E:\wamp\tmp\php7AC2.tmp [1] => E:\wamp\tmp\php7AC3.tmp ) [error] =>数组 ( [0] => 0 [1] => 0 ) [大小] => 数组 ( [0] => 35266 [1] => 186448 ) ) )

如果我选择 2 个文件，我会连续 5 次这样。我也使用标准的上传库。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-07-18T10:13:23.417

在你的帮助下，我终于成功了！

这是我的代码：

```
 function do_upload()
{       
    $this->load->library('upload');

    $files = $_FILES;
    $cpt = count($_FILES['userfile']['name']);
    for($i=0; $i<$cpt; $i++)
    {           
        $_FILES['userfile']['name']= $files['userfile']['name'][$i];
        $_FILES['userfile']['type']= $files['userfile']['type'][$i];
        $_FILES['userfile']['tmp_name']= $files['userfile']['tmp_name'][$i];
        $_FILES['userfile']['error']= $files['userfile']['error'][$i];
        $_FILES['userfile']['size']= $files['userfile']['size'][$i];    

        $this->upload->initialize($this->set_upload_options());
        $this->upload->do_upload();
    }
}

private function set_upload_options()
{   
    //upload an image options
    $config = array();
    $config['upload_path'] = './Images/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size']      = '0';
    $config['overwrite']     = FALSE;

    return $config;
} 
```

谢谢你们！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-26T08:52:00.273

您应该使用此库在 CI [https://github.com/stvnthomas/CodeIgniter-Multi-Upload中进行多次上传](https://github.com/stvnthomas/CodeIgniter-Multi-Upload)

安装 只需将 MY_Upload.php 文件复制到您的应用程序库目录。

使用：控制器中的函数 test_up

```
public function test_up(){
if($this->input->post('submit')){
    $path = './public/test_upload/';
    $this->load->library('upload');
    $this->upload->initialize(array(
        "upload_path"=>$path,
        "allowed_types"=>"*"
    ));
    if($this->upload->do_multi_upload("myfile")){
        echo '<pre>';
        print_r($this->upload->get_multi_upload_data());
        echo '</pre>';
    }
}else{
    $this->load->view('test/upload_view');
} 
```

}

应用程序/视图/测试文件夹中的upload_view.php

```
<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="myfile[]" id="myfile" multiple>
<input type="submit" name="submit" id="submit" value="submit"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T21:45:33.450

试试这个代码。

它对我来说很好用

每次库都必须初始化

```
 function do_upload()
    {
        foreach ($_FILES as $index => $value)
        {
            if ($value['name'] != '')
            {
                $this->load->library('upload');
                $this->upload->initialize($this->set_upload_options());

                //upload the image
                if ( ! $this->upload->do_upload($index))
                {
                    $error['upload_error'] = $this->upload->display_errors("<span class='error'>", "</span>");

                    //load the view and the layout
                    $this->load->view('pages/uploadform', $error);

                    return FALSE;
                }
                else
                {

                     $data[$key] = array('upload_data' => $this->upload->data());

                     $this->load->view('pages/uploadsuccess', $data[$key]);

                }
            }
        }

    }

    private function set_upload_options()
    {   
        //upload an image options
        $config = array();
        $config['upload_path'] = 'your upload path';
        $config['allowed_types'] = 'gif|jpg|png';

        return $config;
    } 
```

**进一步编辑**

我找到了您必须使用唯一输入框上传文件的方法

> CodeIgniter 不支持多个文件。在 foreach 中使用 do_upload() 与在外部使用它没有什么不同。
> 
> 您将需要在没有 CodeIgniter 帮助的情况下处理它。这是一个示例[https://github.com/woxxy/FoOlSlide/blob/master/application/controllers/admin/series.php#L331-370](https://github.com/woxxy/FoOlSlide/blob/master/application/controllers/admin/series.php#L331-370)
> 
> [https://stackoverflow.com/a/9846065/1171049](https://stackoverflow.com/a/9846065/1171049)

这就是你在评论中说的:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-10T07:19:04.757

这里还有一段代码：

参考：[https ://github.com/stvnthomas/CodeIgniter-Multi-Upload](https://github.com/stvnthomas/CodeIgniter-Multi-Upload)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-05T13:58:26.867

正如 Carlos Rincones 所建议的那样；不要害怕与超全球玩家一起玩。

```
$files = $_FILES;

for($i=0; $i<count($files['userfile']['name']); $i++)
{
    $_FILES = array();
    foreach( $files['userfile'] as $k=>$v )
    {
        $_FILES['userfile'][$k] = $v[$i];                
    }

    $this->upload->do_upload('userfile')
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-05T12:13:05.607

所有已发布的文件都将包含在 $_FILES 变量中，为了使用 codeigniter 上传库，我们需要提供我们用于上传的 field_name（默认情况下它将是 'userfile'），所以我们获取所有发布的文件并创建另一个文件数组为每个文件创建我们自己的名称，并将此名称赋予 codeigniter 库 do_upload 函数。

```
if(!empty($_FILES)){
    $j = 1;                 
    foreach($_FILES as $filekey=>$fileattachments){
        foreach($fileattachments as $key=>$val){
            if(is_array($val)){
                $i = 1;
                foreach($val as $v){
                    $field_name = "multiple_".$filekey."_".$i;
                    $_FILES[$field_name][$key] = $v;
                    $i++;   
                }
            }else{
                $field_name = "single_".$filekey."_".$j;
                $_FILES[$field_name] = $fileattachments;
                $j++;
                break;
            }
        }                       
        // Unset the useless one 
        unset($_FILES[$filekey]);
    }
    foreach($_FILES as $field_name => $file){
        if(isset($file['error']) && $file['error']==0){
            $config['upload_path'] = [upload_path];
            $config['allowed_types'] = [allowed_types];
            $config['max_size'] = 100;
            $config['max_width'] = 1024;
            $config['max_height'] = 768;
            $this->load->library('upload', $config);
            $this->upload->initialize($config);

            if ( ! $this->upload->do_upload($field_name)){
                $error = array('error' => $this->upload->display_errors());
                echo "Error Message : ". $error['error'];
            }else{
                $data = $this->upload->data();
                echo "Uploaded FileName : ".$data['file_name'];
                // Code for insert into database
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-10T09:10:55.050

```
 public function imageupload() 
    {

      $count = count($_FILES['userfile']['size']);

  $config['upload_path'] = './uploads/';
  $config['allowed_types'] = 'gif|jpg|png|bmp';
  $config['max_size']   = '0';
  $config['max_width']  = '0';
  $config['max_height']  = '0';

  $config['image_library'] = 'gd2';
  $config['create_thumb'] = TRUE;
  $config['maintain_ratio'] = FALSE;
  $config['width'] = 50;
  $config['height'] = 50;

  foreach($_FILES as $key=>$value)
  { 
     for($s=0; $s<=$count-1; $s++)
     {
     $_FILES['userfile']['name']=$value['name'][$s];
     $_FILES['userfile']['type']    = $value['type'][$s];
     $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$s]; 
     $_FILES['userfile']['error']       = $value['error'][$s];
     $_FILES['userfile']['size']    = $value['size'][$s];  

         $this->load->library('upload', $config);

         if ($this->upload->do_upload('userfile'))
         {
           $data['userfile'][$i] = $this->upload->data();
       $full_path = $data['userfile']['full_path'];

           $config['source_image'] = $full_path;
           $config['new_image'] = './uploads/resiezedImage';

           $this->load->library('image_lib', $config);
           $this->image_lib->resize(); 
           $this->image_lib->clear();

         }
         else
         {
           $data['upload_errors'][$i] = $this->upload->display_errors();
         } 
     }
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-14T07:32:59.933

我在
我的控制器调用的自定义库中使用了下面的代码，如下所示，

```
function __construct() {<br />
   &nbsp;&nbsp;&nbsp; parent::__construct();<br />
   &nbsp;&nbsp;&nbsp;   $this->load->library('CommonMethods');<br />
}<br />

$config = array();<br />
$config['upload_path'] = 'assets/upload/images/';<br />
$config['allowed_types'] = 'gif|jpg|png|jpeg';<br />
$config['max_width'] = 150;<br />
$config['max_height'] = 150;<br />
$config['encrypt_name'] = TRUE;<br />
$config['overwrite'] = FALSE;<br />

// upload multiplefiles<br />
$fileUploadResponse = $this->commonmethods->do_upload_multiple_files('profile_picture', $config); 
```

* * *

```
/**
 * do_upload_multiple_files - Multiple Methods
 * @param type $fieldName
 * @param type $options
 * @return type
 */
public function do_upload_multiple_files($fieldName, $options) {

    $response = array();
    $files = $_FILES;
    $cpt = count($_FILES[$fieldName]['name']);
    for($i=0; $i<$cpt; $i++)
    {           
        $_FILES[$fieldName]['name']= $files[$fieldName]['name'][$i];
        $_FILES[$fieldName]['type']= $files[$fieldName]['type'][$i];
        $_FILES[$fieldName]['tmp_name']= $files[$fieldName]['tmp_name'][$i];
        $_FILES[$fieldName]['error']= $files[$fieldName]['error'][$i];
        $_FILES[$fieldName]['size']= $files[$fieldName]['size'][$i];    

        $this->CI->load->library('upload');
        $this->CI->upload->initialize($options);

        //upload the image
        if (!$this->CI->upload->do_upload($fieldName)) {
            $response['erros'][] = $this->CI->upload->display_errors();
        } else {
            $response['result'][] = $this->CI->upload->data();
        }
    }

    return $response;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-16T12:01:13.723

```
<form method="post" action="<?php echo base_url('submit'); ?>" enctype="multipart/form-data">
    <input type="file" name="userfile[]" id="userfile"  multiple="" accept="image/*">
</form> 
```

型号：文件上传

```
class FilesUpload extends CI_Model {

    public function setFiles()
    {
        $name_array = array();
        $count = count($_FILES['userfile']['size']);
        foreach ($_FILES as $key => $value)
            for ($s = 0; $s <= $count - 1; $s++) {
                $_FILES['userfile']['name'] = $value['name'][$s];
                $_FILES['userfile']['type'] = $value['type'][$s];
                $_FILES['userfile']['tmp_name'] = $value['tmp_name'][$s];
                $_FILES['userfile']['error'] = $value['error'][$s];
                $_FILES['userfile']['size'] = $value['size'][$s];

                $config['upload_path'] = 'assets/product/';
                $config['allowed_types'] = 'gif|jpg|png';
                $config['max_size'] = '10000000';
                $config['max_width'] = '51024';
                $config['max_height'] = '5768';

                $this->load->library('upload', $config);
                if (!$this->upload->do_upload()) {
                    $data_error = array('msg' => $this->upload->display_errors());
                    var_dump($data_error);
                } else {
                    $data = $this->upload->data();
                }
                $name_array[] = $data['file_name'];
            }

        $names = implode(',', $name_array);

        return $names;
    }
} 
```

控制器提交

```
class Submit extends CI_Controller {
    function __construct()
        {
        parent::__construct();
        $this->load->helper(array('html', 'url'));
        }

        public function index()
        {
        $this->load->model('FilesUpload');

        $data = $this->FilesUpload->setFiles();

        echo '<pre>';
        print_r($data);

    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-30T12:49:25.417

```
 // Change $_FILES to new vars and loop them
        foreach($_FILES['files'] as $key=>$val)
        {
            $i = 1;
            foreach($val as $v)
            {
                $field_name = "file_".$i;
                $_FILES[$field_name][$key] = $v;
                $i++;   
            }
        }
        // Unset the useless one ;)
        unset($_FILES['files']);

        // Put each errors and upload data to an array
        $error = array();
        $success = array();

        // main action to upload each file
        foreach($_FILES as $field_name => $file)
        {
            if ( ! $this->upload->do_upload($field_name))
            {
                echo ' failed ';
            }else{
                echo ' success ';
            }
        } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-03T16:59:21.077

```
function imageUpload(){
            if ($this->input->post('submitImg') && !empty($_FILES['files']['name'])) {
                $filesCount = count($_FILES['files']['name']);
                $userID = $this->session->userdata('userID');
                $this->load->library('upload');

                $config['upload_path'] = './userdp/';
                $config['allowed_types'] = 'jpg|png|jpeg';
                $config['max_size'] = '9184928';
                $config['max_width']  = '5000';
                $config['max_height']  = '5000';

                $files = $_FILES;
                $cpt = count($_FILES['files']['name']);

                for($i = 0 ; $i < $cpt ; $i++){
                    $_FILES['files']['name']= $files['files']['name'][$i];
                    $_FILES['files']['type']= $files['files']['type'][$i];
                    $_FILES['files']['tmp_name']= $files['files']['tmp_name'][$i];
                    $_FILES['files']['error']= $files['files']['error'][$i];
                    $_FILES['files']['size']= $files['files']['size'][$i];    

                    $imageName = 'image_'.$userID.'_'.rand().'.png';

                    $config['file_name'] = $imageName;

                    $this->upload->initialize($config);
                    if($this->upload->do_upload('files')){
                        $fileData = $this->upload->data(); //it return
                        $uploadData[$i]['picturePath'] = $fileData['file_name'];
                    }
                }

                if (!empty($uploadData)) {
                    $imgInsert = $this->insert_model->insertImg($uploadData);
                    $statusMsg = $imgInsert?'Files uploaded successfully.':'Some problem occurred, please try again.';
                    $this->session->set_flashdata('statusMsg',$statusMsg);
                    redirect('home/user_dash');
                }
            }
            else{
                redirect('home/user_dash');
            }
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-23T11:35:18.233

codeigniter 中没有预定义的方法可以一次上传多个文件，但是您可以以数组的形式发送文件并一一上传

这里是参考：这是在codeigniter 3.0.1中上传多个文件的最佳选择，预览[https://codeaskbuzz.com/how-to-upload-multiple-file-in-codeigniter-framework/](https://codeaskbuzz.com/how-to-upload-multiple-file-in-codeigniter-framework/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-26T22:02:54.777

所以我改变的是我每次加载上传库

```
 $config = array();
                $config['upload_path'] = $filePath;
                $config['allowed_types'] = 'gif|jpg|png';
                $config['max_size']      = '0';
                $config['overwrite']     = FALSE;

                $files = $_FILES;
                $count = count($_FILES['nameUpload']['name']);

                for($i=0; $i<$count; $i++)
                {
                    $this->load->library('upload', $config);

                    $_FILES['nameUpload']['name']= $files['nameUpload']['name'][$i];
                    $_FILES['nameUpload']['type']= $files['nameUpload']['type'][$i];
                    $_FILES['nameUpload']['tmp_name']= $files['nameUpload']['tmp_name'][$i];
                    $_FILES['nameUpload']['error']= $files['nameUpload']['error'][$i];
                    $_FILES['nameUpload']['size']= $files['nameUpload']['size'][$i];

                    $this->upload->do_upload('nameUpload');
                } 
```

它对我有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-04T16:14:11.097

对于 CodeIgniter 3

```
<form action="<?php echo base_url('index.php/TestingController/insertdata') ?>" method="POST"
      enctype="multipart/form-data">
    <div class="form-group">
        <label for="">title</label>
        <input type="text" name="title" id="title" class="form-control">
    </div>
    <div class="form-group">
        <label for="">File</label>
        <input type="file" name="files" id="files" class="form-control">
    </div>
    <input type="submit" value="Submit" class="btn btn-primary">
</form>

public function insertdatanew()
{
    $this->load->library('upload');
    $files = $_FILES;
    $cpt = count($_FILES['filesdua']['name']);

    for ($i = 0; $i < $cpt; $i++) {
        $_FILES['filesdua']['name'] = $files['filesdua']['name'][$i];
        $_FILES['filesdua']['type'] = $files['filesdua']['type'][$i];
        $_FILES['filesdua']['tmp_name'] = $files['filesdua']['tmp_name'][$i];
        $_FILES['filesdua']['error'] = $files['filesdua']['error'][$i];
        $_FILES['filesdua']['size'] = $files['filesdua']['size'][$i];

        // fungsi uploud
        $config['upload_path']          = './uploads/testing/';
        $config['allowed_types']        = '*';
        $config['max_size']             = 0;
        $config['max_width']            = 0;
        $config['max_height']           = 0;
        $this->load->library('upload', $config);
        $this->upload->initialize($config);

        if (!$this->upload->do_upload('filesdua')) {
            $error = array('error' => $this->upload->display_errors());
            var_dump($error);

            // $this->load->view('welcome_message', $error);
        } else {

            // menambil nilai value yang di upload  
            $data = array('upload_data' => $this->upload->data());
            $nilai = $data['upload_data']; 
            $filename = $nilai['file_name'];
            var_dump($filename);

            // $this->load->view('upload_success', $data);
        }
    }
    // var_dump($cpt);
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-01-07T23:05:18.207

我最近正在研究它。试试这个功能：

```
/**
 * @return array an array of your files uploaded.
 */
private function _upload_files($field='userfile'){
    $files = array();
    foreach( $_FILES[$field] as $key => $all )
        foreach( $all as $i => $val )
            $files[$i][$key] = $val;

    $files_uploaded = array();
    for ($i=0; $i < count($files); $i++) { 
        $_FILES[$field] = $files[$i];
        if ($this->upload->do_upload($field))
            $files_uploaded[$i] = $this->upload->data($files);
        else
            $files_uploaded[$i] = null;
    }
    return $files_uploaded;
} 
```

在你的情况下：

```
<input type="file" multiple name="images[]" size="20" /> 
```

或者

```
<input type="file" name="images[]">
<input type="file" name="images[]">
<input type="file" name="images[]"> 
```

在控制器中：

```
public function do_upload(){
    $config['upload_path'] = './Images/';
    $config['allowed_types'] = 'gif|jpg|png';
    //...

    $this->load->library('upload',$config);

    if ($_FILES['images']) {
        $images= $this->_upload_files('images');
        print_r($images);
    }
} 
```

PHP手册的一些基本参考：[PHP文件上传](http://br1.php.net/manual/en/features.file-upload.multiple.php)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-01-16T17:41:12.487

保存，然后将变量 $_FILES 重新定义为您需要的任何内容。也许不是最好的解决方案，但这对我有用。

```
function do_upload()
{

    $this->load->library('upload');
    $this->upload->initialize($this->set_upload_options());

    $quantFiles = count($_FILES['userfile']['name']);

    for($i = 0; $i < $quantFiles ; $i++)
    {
        $arquivo[$i] = array
                    (
                        'userfile' => array 
                                        (
                                            'name' => $_FILES['userfile']['name'][$i],
                                            'type' => $_FILES['userfile']['type'][$i],
                                            'tmp_name' => $_FILES['userfile']['tmp_name'][$i],
                                            'error' => $_FILES['userfile']['error'][$i],
                                            'size' => $_FILES['userfile']['size'][$i]
                                        )
                    );
    }

    for($i = 0; $i < $quantFiles ; $i++)
    {
        $_FILES = '';
        $_FILES = $arquivo[$i];

        if ( ! $this->upload->do_upload())
        {
            $error[$i] = array('error' => $this->upload->display_errors());

            return FALSE;
        }
        else
        {

            $data[$i] = array('upload_data' => $this->upload->data());

            var_dump($this->upload->data());
        }

    }

    if(isset($error))
        {
            $this->index($error);
        }
        else
        {
            $this->index($data);
        } 
```

}

建立配置的单独功能..

```
private function set_upload_options()
{   
    $config['upload_path'] = './uploads/';
    $config['allowed_types'] = 'xml|pdf';
    $config['max_size'] = '10000';

    return $config;
} 
```

# drupal-6 - 如何将用户与分类术语联系起来

> ID：11524357
> 
> 赞同：1
> 
> 时间：2012-07-17T14:12:12.607
> 
> 标签：drupal-6, drupal-7, drupal-taxonomy

我试图在注册 drupal7 和 profile2 期间将用户分配给分类术语。

drupal 6 曾经有一个配置文件分类，但尚未移植到 7。

有没有办法通过参考/实体参考来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:19:28.290

yes there is

[http://drupal.org/project/entityreference](http://drupal.org/project/entityreference)

I just created a new field for the user account select entity reference then you can choose any entity within drupal to reference. (ie so you can select a term/content/anything)

# javascript - 如何在 HTML 图像地图上制作 twitter-bootsrap 弹出框

> ID：11524359
> 
> 赞同：0
> 
> 时间：2012-07-17T14:12:16.443
> 
> 标签：javascript, html, twitter-bootstrap

我正在制作一个网站，在该网站上我有一张带有图像地图的图像。

我被困在这一点上，弹出框在标签中工作得很好，但在标签中却没有。有谁知道如何让 twitter-bootstrap 弹出窗口在图像地图上工作？

我认为这与这一行有关：`$('#example').tooltip(options)` [tooltip exaple](http://twitter.github.com/bootstrap/javascript.html#tooltips)

[twitter-bootstrap pover](http://twitter.github.com/bootstrap/javascript.html#popovers)

谢谢（我希望我的英语是可以理解的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:36:09.853

将您的图像映射变成类似（填充`...px`实际尺寸）：

```
<div id="#map" style="position:relative;width:...px;height:...px;background-image:...">
    <a id="map-link-1" href="/path/url/for/target/or/#"
        style="position:absolute;top:...px;left:...px;width:...px;height:...px">&nbsp;</a>
    <a id="map-link-2" href="/path/url/for/target/or/#"
        style="position:absolute;top:...px;left:...px;width:...px;height:...px">&nbsp;</a>
    ...
</div> 
```

然后像你习惯的那样处理锚。

# java - 令牌“类”上的语法错误@预期 [JAVA - LWJGL]

> ID：11524361
> 
> 赞同：6
> 
> 时间：2012-07-17T14:12:19.750
> 
> 标签：java, opengl, lwjgl

我在编写我的一门课程时遇到了错误。

我的进口是，

```
import static org.lwjgl.opengl.GL11.GL_COLOR_BUFFER_BIT;
import static org.lwjgl.opengl.GL11.GL_MODELVIEW;
import static org.lwjgl.opengl.GL11.GL_PROJECTION;
import static org.lwjgl.opengl.GL11.glClear;
import static org.lwjgl.opengl.GL11.glLoadIdentity;
import static org.lwjgl.opengl.GL11.glMatrixMode;
import static org.lwjgl.opengl.GL11.glOrtho;

import java.util.Random;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

public class InputDemo{

public InputDemo(){

    int height = 720;
    int width = 1280;

    try {
        Display.setDisplayMode(new DisplayMode(1280, 720));
        Display.setTitle("Input Demonstration");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
    }

    //Initialization code OpenGL
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, 1280.0, 720.0, 0.0, 1.0, -1.0);
    glMatrixMode(GL_MODELVIEW);

    while(!Display.isCloseRequested()) {

    //Render (Quads are X, Y (Across, Up + Down))

        glClear(GL_COLOR_BUFFER_BIT);

        if(Keyboard.isKeyDown(Keyboard.KEY_ESCAPE))
        {
            Display.destroy();
            System.exit(0);
        }
        int dx = Mouse.getDX();
        int dy = -Mouse.getDY();
        System.out.println(dx + ", " + dy);

        Display.update();
        Display.sync(60);
    }
    Display.destroy();
}

private static class Box{
    public int x, y;
    public boolean selected = false;
    private float colorRed, colorBlue, colorGreen;

    Box(int x, int y)
    {
        this.x = x;
        this.y = y;

        Random randomGenerator = new Random();
        colorRed = randomGenerator.nextFloat();
        colorBlue = randomGenerator.nextFloat();
        colorGreen = randomGenerator.nextFloat();
    }

    boolean inBounds(int mousex, int mousey)
    {
        if(mousex > x && mousex < x + 50 && mousey > y && < y + 50)

            return true;
        else
            return false;

    }

    void update(int dx, int dy)
    {
        x += dx;
        y += dy;
    }

    void randomizeColors()
    {
        Random randomGenerator = new Random();
        colorRed = randomGenerator.nextFloat();
        colorBlue = randomGenerator.nextFloat();
        colorGreen = randomGenerator.nextFloat();
    }

    void draw()
    {
        glBegin(GL_QUADS);
            glVertex2f(x, y);
            glVertex2f(x + 50, y);
            glVertex2f(x + 50, y + 50);
            glVertex2f(x, y + 50);
        glEnd();
    }
}

/**
 * @param args
 */

public static void main(String[] args) {
    new InputDemo();
} 
```

}

错误是 'class' 的语法错误，@ expected' 以及 'Insert '}' to complete block'

另外，你能看到 draw() 的错误吗，因为我不能，但 glBegin 不起作用，因为 'GL_QUADS 不是变量，但我找不到我在哪里使用它作为变量...... '

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T14:13:12.457

应该没有`()`之后`Box`，您应该`}`在课程结束时关闭。

此外，您不应该`Random`在每个函数调用上创建一个新实例。让它成为该类的属性。

```
private static class Box {
    public int x, y;

    private float colorRed, colorBlue, colorGreen;
    private Random randomGenerator;

    public Box(int x, int y) {
        this.x = x;
        this.y = y;
        this.randomGenerator = new Random(System.currentTimeMillis());
        randomizeColors();
    }

    public void randomizeColors() {
        colorRed = randomGenerator.nextFloat();
        colorBlue = randomGenerator.nextFloat();
        colorGreen = randomGenerator.nextFloat();
    }
} 
```

至于OpenGL问题，请看这里：
[http ://en.wikipedia.org/wiki/Java_OpenGL](http://en.wikipedia.org/wiki/Java_OpenGL)

您确定您已正确导入和调用所有内容吗？我只在 Python 中使用过 OpenGL，但如果我没记错的话，GL_QUADS 可与 Java 中的 Enums 相媲美（或映射到整数但具有类似 Enum 的名称的静态类变量）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:13:02.497

您的代码缺少`}`class 和 class 的结束大括号不包含`()`，Box 定义应该只是`Box`not `Box()`。您的构造函数已关闭，方法已关闭，但类未关闭。

# git - 涉及服务器的论文的适当 Git 工作流程

> ID：11524369
> 
> 赞同：3
> 
> 时间：2012-07-17T14:12:57.433
> 
> 标签：git, workflow

我刚开始在我的论文中使用 git，我的问题是什么是适合我的工作流程。这是我的先决条件：

使用的硬件：

*   家用笔记本电脑 A
*   笔记本电脑 B 我在图书馆时使用的上网本
*   大学里的台式电脑
*   我的大学服务器上的私有文件空间也运行 git（由大学预安装，很好，不是吗？）

在知道之前我所做的就是用 LaTeX 写我的论文并在所有这些计算机之间手动复制它。我经常写某事。在一台机器上，但后来我放了一天假，我不知道我的最新版本在哪里。在这些情况下，我使用 diff 来比较并找出最新的文档。

一点点阅读关于 git 的内容告诉我，它对我有很大帮助。我想到了一些事情，比如在服务器上有一个中央仓库，并用所有的计算机推/拉它。

我现在在服务器上创建了一个裸仓库，并`git init`在每台计算机上创建了本地存储库（by）。

但我不确定这是否正确：现在所有计算机都处于同步状态，因此所有本地存储库都包含相同的文件/版本。我已经从我的笔记本电脑 A 推送到服务器上的裸仓库。

我试图从服务器回购拉到我的台式电脑：

```
git pull origin master 
```

输出：

```
* branch            master     -> FETCH_HEAD
Merge made by the 'recursive' strategy. 
```

如果我理解正确的话，那会在我的台式计算机上创建一个分支。在我开始使用台式电脑之前，我是否应该在此之后应用任何进一步的操作？

另一种尝试是：

```
git pull origin master:master 
```

输出：

```
 ! [rejected]        master     -> master  (non-fast-forward) 
```

就我在 Git 书中读到的而言，这是一种预期的行为，但我无法说出原因。这不会阻止每次拉取时创建一个新分支吗？

无论如何，我现在阅读了许多关于 stackoverflow 的帖子以及官方 git 书籍中的一些章节，但我必须说，我的脑袋有点嗡嗡作响。

我不知道我从这里开始的工作流程是否完全适合我想要实现的目标。也许我不应该使用服务器 git 而只是克隆到文件空间？有人能让我走上正轨吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:26:32.157

不，您不会在每台计算机上创建存储库。您在一台计算机上创建存储库，推送到中央存储库，然后从那里克隆到其他计算机上。

最简单的解决方案：

```
Laptop A:  leave alone
Laptop B:  change name of existing git repository to retain it as a backup.  Then `git clone <url>` from central repo
Desktop:  same as laptop B 
```

一旦你确信你已经克隆了存储库并且文件是正确的，你可以删除重命名的原始存储库。

从那时起，无论何时移动到计算机，您的工作流程：

```
git pull (to receive any changes you pushed while on a different computer.  If it exits silently, there were no changes)
work, work, work
git add .
git commit -m <comment>
git push 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:26:58.570

在服务器上创建裸仓库后，您应该从服务器上的裸仓库克隆，而不是在每台计算机上运行 git init。例如，如果您使用 ssh 协议，您可以在其他每台计算机上执行以下操作：

```
git clone ssh://username@servername:/path/to/bare/repo.git 
```

这将自动将您的源远程设置为带有裸仓库的服务器。然后，您可以在本地计算机上进行所有您想要的更改，在本地提交您的更改，如下所示：

```
git add .
git commit -m 'Made some changes' 
```

然后，您只需执行以下操作：

```
git pull 
```

当您想要更新时，并且：

```
git push 
```

当您想将本地提交的更改推送到服务器时。

# android - Android 版本和 API 确认

> ID：11524370
> 
> 赞同：0
> 
> 时间：2012-07-17T14:12:59.690
> 
> 标签：android

我是 Android 开发的新手，我想问一个问题，Android SDK 包被列为 SDK 平台 Android 2.3.3，API 10，修订版 1

谁能解释一下 Android 2.3.3 和 API 10 以及修订版 1 的含义。

这将有助于清楚地理解基本概念

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:16:27.223

*   API 10 是 API 级别。
*   Android 2.3.3 => 版本名称
*   版本 1 => SDK 特定版本的序列号。

> **什么是 API 级别？**
> 
> API 级别是一个整数值，用于唯一标识 Android 平台版本提供的框架 API 修订版。阅读更多：[什么是 API 级别？](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)[Android 中 API 级别的](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#uses)使用

您可以在此处阅读更多信息 =>[平台版本](http://developer.android.com/about/dashboards/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:41:15.457

**Android 2.3.3**是 Android 平台版本名称

**Android 2.3.3**属于 Android **API10** （API 级别），它标识了 Android 平台版本提供的框架 API 修订版。**API10**包括 Android 平台版本**2.3.3** -* *2.3.7* *

SDK 工具的版本由版本号表示，在每个版本中您可以注意到一些添加的工具、缓存和性能改进[等等](http://developer.android.com/tools/sdk/tools-notes.html)。

# java - 未通过 localhost 访问 Google App Engine

> ID：11524373
> 
> 赞同：0
> 
> 时间：2012-07-17T14:13:09.630
> 
> 标签：java, eclipse, google-app-engine

我使用 Mac OS X 10.7.4、app engine sdk 1.7.0、eclipse juno 和 Java 作为编程语言。问题是当部署在 apppot 上时，App 运行得非常好，但在 localhost 上却无法运行。当在端口 8888 或任何其他端口上作为 Web 应用程序运行时（如果从配置中更改它），日志表示服务器正在运行，但是当我点击 URL 时，没有任何反应，并且在一段时间后连接超时。当，调试它给出错误：`Cannot connect to VM`。来自控制台的运行和调试日志如下所示，请帮助我，我已经搜索了整个网络，但找不到解决方案。

**调试时记录：**

```
ERROR: transport error 202: handshake failed - connection prematurally closed
ERROR: JDWP: Failed to initialize transport via localhost:49741, trying localhost via 127.0.0.1:49741
ERROR: transport error 202: recv failed during handshake: Connection reset by peer
ERROR: JDWP Transport dt_socket failed to initialize, TRANSPORT_INIT(510)
JDWP exit error AGENT_ERROR_TRANSPORT_INIT(197): No transports initialized [../../../src/share/back/debugInit.c:690]
FATAL ERROR in native method: JDWP No transports initialized, jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197) 
```

**运行时记录：**

```
2012-07-17 19:07:42.504 java[417:407] [Java CocoaComponent compatibility mode]: Enabled
2012-07-17 19:07:42.505 java[417:407] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000
Jul 17, 2012 2:07:49 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
Jul 17, 2012 2:07:50 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
INFO: Successfully processed /Volumes/DATA 1/Google App Engine/Java/HelloWorld/war/WEB-INF/appengine-web.xml
Jul 17, 2012 2:07:50 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
INFO: Successfully processed /Volumes/DATA 1/Google App Engine/Java/HelloWorld/war/WEB-INF/web.xml
Jul 17, 2012 7:07:52 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at localhost:8888/
Jul 17, 2012 7:07:52 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at localhost:8888/_ah/admin 
```

**从命令行运行时记录：**

```
 Jul 21, 2012 3:23:19 PM com.google.apphosting.utils.jetty.JettyLogger info
    INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger
    Jul 21, 2012 3:23:19 PM com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml
    INFO: Successfully processed /Volumes/DATA 1/Softwares/appengine-java-sdk-1.7.0/demos         
    /guestbook/war/WEB-INF/appengine-web.xml
    Jul 21, 2012 3:23:19 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml
    INFO: Successfully processed /Volumes/DATA 1/Softwares/appengine-java-sdk-1.7.0/demos/guestbook/war/WEB-INF/web.xml
    Jul 21, 2012 8:23:22 PM com.google.appengine.tools.development.DevAppServerImpl start
    INFO: The server is running at http://localhost:8080/
    Jul 21, 2012 8:23:23 PM com.google.appengine.tools.development.DevAppServerImpl start
    INFO: The admin console is running at http://localhost:8080/_ah/admin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:40:32.610

检查以下内容：

1) 如果应用程序已经实际启动。在终端输入“ps ax | grep java” 2）如果应用程序已绑定到端口。安装 nmap（不确定如何在 mac 上安装）并使用“nmap localhost”运行它。您将看到使用的端口和协议列表。如果您没有看到带有 http 的 8888，则说明有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:18:00.890

您是否尝试过从命令行运行它？看起来您也正在尝试在调试器中启动它.. 不是吗？尝试从命令行运行，确保它有效。然后尝试使用“运行”而不是“调试”从 Eclipse 运行它，并确保在尝试调试器之前可以正常工作。Appengine 有点特别……

# java - 慢速 Java 程序

> ID：11524375
> 
> 赞同：-4
> 
> 时间：2012-07-17T14:13:12.077
> 
> 标签：java, methods, execute

我有一个问题，可以说我有这样的代码：

```
public static void main(String[] args)
{
startMethod1();
startMethod2();
} 
```

现在，如果 startMethod1 方法非常大并且需要很长时间来执行它，那么 startMethod2 会在 startMethod1 完成之前启动。如何让这些方法一一执行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T14:15:19.873

> startMethod2 在 startMethod1 完成之前启动。

这永远不会发生。`startMethod1`您可以启动仍然可以作为`startmethod2`启动运行的线程。除非来电，否则`startMethod2`无法开始`startMethod1``startMethod1``startMethod2`

如果您想等到 startmethod1 中的线程完成，您必须`Thread.join()`使用它们或使用`ExecutorService.awaitTermination()`

> 如何让这些方法一一执行？

就像您编写代码一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:15:34.590

他们已经这样做了。您编写的方式在运行`startMethod2`之前不会开始`startMethod1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:15:05.473

如果您使用的是线程，那么请更改您的代码示例...但我假装您这样做了，因为您对另一个问题的评论表明您打算这样做;-)

你可以看看 wait() 和 notify()

调用wait()告诉当前线程挂起，notify()再次唤醒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:18:52.230

我的猜测是您正在使用某种正在缓冲的消息记录 API，因此某些输出出现的时间比您预期的要晚得多。甚至可能直到程序结束才冲洗。因此，您会得到误导您的交错输出。

# jsf-2 - JSF 命令按钮显示/隐藏问题

> ID：11524377
> 
> 赞同：0
> 
> 时间：2012-07-17T14:13:21.020
> 
> 标签：jsf-2, primefaces

我使用 primefaces FieldSet 组件并在字段集中指定了一个按钮字段。我有一个要求，在哪里，当我单击命令按钮时，应该显示 ah:selectonemenu & inputtext 并且在进一步单击时，应该隐藏 h:selectOnemenu &inputtext。下面是我为显示和隐藏而编写的代码。显示部分工作正常。但是当我尝试点击按钮隐藏时，它不起作用。

xhtml代码

```
<h:panelGrid id="grid1" columns="3">
    <p:fieldset id="GlobalAdjustment" legend="GlobalAdjustment"  style="font-size:12px !important;width:30%" >
    <h:commandButton  id="globalAdjustID"  image="#{review.imageUrl}" actionListener="#{review.showUpdateList}" />  
    </p:fieldset>

    <h:selectOneMenu id="SelectID"   value="#{review.reviewList}"  rendered="#{demandReview.selectoneRenderer}">
        <f:selectItems id="FilterSelectListID"   value="#{review.reviewListIDs}" style="font-size:12px !important"></f:selectItems>
    </h:selectOneMenu>
    <h:inputText id="fieldUpdateID" required="false" rendered="#{review.inputTextRenderer}"></h:inputText>
</h:panelGrid> 
```

ManagedBean ActionListener 方法

```
public void showUpdateList(ActionEvent event)
{
    System.out.println("entering the Action Method:");
    Map<String, Object> idMap = new HashMap<String, Object>() ;
    idMap = event.getComponent().getAttributes();
    String url = (String) idMap.get("image");
    System.out.println("The url is :"+url);
    if(url.equals("/images/add_data_button.png")){
        //upbean.setImageUrl("/images/remove_data_button.png") ;
        imageUrl ="/images/remove_data_button.png" ;
        selectoneRenderer = true;
        inputTextRenderer = true;
    }else
    {
        imageUrl ="/images/add_data_button.png" ;
        selectoneRenderer = false;
        inputTextRenderer = false;
    }
} 
```

当我第一次单击字段集中的命令按钮时，它工作正常并显示 selectoneMenu 和文本框。一旦进一步点击，ActionListener 就不会被调用。请帮我解决问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:07:49.527

您可以尝试另一种方法。将 p:commandButton 与更新属性一起使用，如下所示：

```
<h:panelGrid id="grid1" columns="3">
    <p:fieldset id="GlobalAdjustment" legend="GlobalAdjustment"  style="font-size:12px !important;width:30%" >
    <p:commandButton  id="globalAdjustID"  image="#{review.imageUrl}" actionListener="#{review.showUpdateList}" update="grid1"/>  
    </p:fieldset>

    <h:selectOneMenu id="SelectID"   value="#{review.reviewList}"  rendered="#{demandReview.selectoneRenderer}">
        <f:selectItems id="FilterSelectListID"   value="#{review.reviewListIDs}" style="font-size:12px !important"></f:selectItems>
    </h:selectOneMenu>
    <h:inputText id="fieldUpdateID" required="false" rendered="#{review.inputTextRenderer}"></h:inputText>
</h:panelGrid> 
```

这样，您将使用部分处理，并且面板内部组件的条件渲染将通过 AJAX 完成。

此外，检查服务器的控制台以查看队列中是否有任何未显示的消息可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:43:29.270

要求是否指定使用服务器端？对于这样的事情，我会认为一个简单的 Javascript 脚本会更适合。

例如，使用 jQuery 库执行以下操作：

```
<h:commandButton id="xyz" onclick="$('#elementId').toggle();"/> 
```

# blackberry - OutboundMessageListener 未检测到传出短信

> ID：11524381
> 
> 赞同：1
> 
> 时间：2012-07-17T14:13:46.113
> 
> 标签：blackberry, sms

当从设备发送短信时，以下代码应打印出一条消息。我已经在模拟器上尝试了几次，但是当我发送短信时什么都没有打印出来。我究竟做错了什么？为什么应用程序没有收到已发送的短信。

```
public class BackGroundApp extends UiApplication implements OutboundMessageListener, javax.wireless.messaging.MessageListener {

    private MessageConnection messageConnection;

    public static void main(String args[]) 
    {
        BackGroundApp theApp = new BackGroundApp();
        theApp.enterEventDispatcher();
    }

    public BackGroundApp(){
     try {
            MessageConnection _mc = (MessageConnection)Connector.open("sms://");
            _mc.setMessageListener(this);

         } catch (IOException e) {}

}

    public void notifyIncomingMessage(MessageConnection messageconnection){

    }

    public void notifyOutgoingMessage(javax.wireless.messaging.Message message) {

      System.out.println("SMS just sent from your device!");  

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:13:53.187

1.  您需要根据[API 文档](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/blackberry/api/sms/OutboundMessageListener.html)向 MessageConnection 注册您的侦听器。

2.  模拟器无法真正发送 SMS 消息，因此您可能必须在设备上执行此操作。

# jquery - 如何在 Asp.net 网格视图中添加 Jquery Ui 日期选择器控件？

> ID：11524382
> 
> 赞同：3
> 
> 时间：2012-07-17T14:13:46.857
> 
> 标签：jquery, asp.net, jquery-ui

如何将 Jquery Ui DatePicker 添加到 GridView 。请查看我编写的示例代码。
谢谢

```
 <script type="text/javascript">
            $(document).ready(function ()
            {
                $("[id$=txtDate]").datepicker();
            });
        </script> 
```

> ```
> <asp:TemplateField HeaderText="Date">
>                     <EditItemTemplate>
>                         <asp:TextBox ID="txtDate" runat="server" Text='<%# Bind("MilkingDate") %>' />
>                     </EditItemTemplate>
>                     <ItemTemplate>
>                         <asp:Label runat="server" ID="lblDate" Text='<%# Eval("MilkingDate") %>' />
>                     </ItemTemplate>
>                 </asp:TemplateField> 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:17:21.043

向您的文本框添加一个类：

```
<asp:TextBox 
    ID="txtDate" runat="server" Text='<%# Bind("MilkingDate") %>'
    CssClass="youpi" 
    /> 
```

然后将此类用作 jQuery 选择器：

```
<script language="javascript" type="text/javascript">
    $(function() {
        $(".youpi").datepicker();
    });

</script> 
```

# matlab - Matlab UI控制单元

> ID：11524384
> 
> 赞同：3
> 
> 时间：2012-07-17T14:14:05.607
> 
> 标签：matlab, screen-resolution, uicontrol

我正在使用 uicontrol 创建 GUI 元素。以下是我的代码

```
uicontrol('Style','pushbutton', 'String','Load data','Parent',hTabs(1),'Position',[250 825 80 20], 'Callback',@ButtonCallback); 
```

这里的问题是当我使用单位标准化选项时，GUI 元素正在从屏幕上消失。我想使用规范化，以便 GUI 在不同的屏幕分辨率下自行调整。对此的任何想法都会对我很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:37:00.893

当您使用`Normalized`单位时，您需要定义 0 和 1 之间的位置，其中 0 是底部/左侧，1 是包含对象的总高度/宽度。

您当前正在使用远远超出此范围的数字来定义位置。你可以做两件事。

*   将单位切换到`normalized`单独的函数调用中（如下所示）
*   使用标准化单位创建`uicontrol`，但您必须计算正确的位置向量

以下是有关如何执行的示例

一个简单的解决方案是创建`uicontrol`然后在单独的调用中将单位设置为标准化

```
u = uicontrol(...) %don't specify the units
set(u,'Units', 'Normalized'); % this solves your problem 
```

如果您想以标准化单位获取位置向量

```
normPos = get(u, 'Position') % get the position in normal space 
```

然后使用这些数字创建`uicontrol`标准化单位：

```
u = uicontrol(...,'Units','Normalized', 'Position', normPos); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:36:47.680

使用该 `'units','normalized'`选项时，您必须更改位置矢量。图形参考系统的坐标介于 0 和 1 之间。

例如

```
uicontrol('Style','pushbutton',...
          'String','Load data',...
          'Parent',hTabs(1),...
          'units','normalized',...
          'Position',[0 0 0.1 0.1],...
          'Callback',@ButtonCallback); 
```

在父面板的左下角为您提供一个 10% 的高度和宽度的按钮。

# iphone - 负整数比较

> ID：11524390
> 
> 赞同：3
> 
> 时间：2012-07-17T14:14:24.570
> 
> 标签：iphone, objective-c, ios

我正在尝试比较两个整数。一个是 的`row`，`NSIndexPath`另一个是`count`的`NSArray`。`row`等于 0 和`count`等于 2。我将它们放在如下`if`语句中：

```
if([self.selectedSetpoint row] < ([self.theCategories count]-3))
{
    //Do true stuff
} 
```

所以根据我的数学，`if`当我比较时，这个陈述应该是错误的`0 < -1`。但是，我一直认为这句话是真的，并且里面的块`if`正在运行。我已尝试使用`NSLog`这些值来确保我不只是得到错误的值。我把这个放在`if`声明之前：

```
NSLog(@"%d",[self.selectedSetpoint row]);
NSLog(@"%d",[self.theCategories count]-3);
NSLog(@"%@",[self.selectedSetpoint row] < ([self.theCategories count]-3)?@"Yes":@"No"); 
```

并在控制台上得到了这个：

```
2012-07-17 08:58:46.061 App[61345:11603] 0
2012-07-17 08:58:46.061 App[61345:11603] -1
2012-07-17 08:58:46.062 App[61345:11603] Yes 
```

任何想法为什么这种比较是真实的？我对比较整数有误解吗？

我有另一个 if 语句就在这个比较的上面

```
[self.selectedSetpoint row]<([self.theCategories count]-2) 
```

这是`0 < 0`，它工作正常（返回`NO`）。所以我觉得使用负整数存在一些问题，我没有得到。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:27:11.443

我怀疑这个问题是返回`count`是一个**无符号**整数，减去超过它的大小，它会下溢并变得非常大。我已经运行了一些测试，并且得到了与您相同的基本行为（它*看起来*像`-1`，并且在某些情况下它*似乎*按预期工作......但是它显然在`if()`块的上下文中下溢。

愚蠢的问题，但幸运的是有一个简单的解决方案：在 if 语句中将其强制转换：

```
if([self.selectedSetpoint row] < ( (int)[self.theCategories count] -3 ))
{
    //Do true stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T17:33:19.377

我打算提出一个替代解决方案 - 即避免使用减法，而是在等式的另一边使用加法：

```
if ([self.selectedSetpoint row] + 3 < [self.theCategories count])
{
    //Do true stuff
} 
```

这回避了被这些下溢错误捕获，但是它留下了另一个未触及的问题......即在这个问题的答案中提到的转换规则：[在 C 中比较不同数据类型的一般规则是什么？](https://stackoverflow.com/questions/6636793/what-are-the-general-rules-for-comparing-different-data-types-in-c)

引用该问题的答案，您会看到 C99 规范指出：

*   （当一个操作数有符号而另一个无符号时）否则，如果无符号整数类型的操作数的秩大于或等于另一个操作数类型的秩，则将有符号整数类型的操作数转换为无符号整数类型的操作数。

所以如果你有一个负值，`[self.selectedSetpoint row] + 3`那么比较将失败......

这里的其他答案主张将 (NSUInteger) 转换为 (NSInteger) - 但请注意，如果您的无符号值非常大，这可能会导致溢出问题。例如：

```
(NSInteger) -3 < (NSInteger) 4294967289 == false... 
```

想到必须有一个简单的方法来解决这个问题，我首先想出了一个很难解决的方法......

```
#define SafeLT(X, Y) \
({ typeof (X) _X = (X); \
   typeof (Y) _Y = (Y); \
( _X < (NSInteger) 0 ? (( _Y > 0) ? YES : _X < _Y ) : ( _Y < (NSInteger) 0 ? NO : _X < _Y));}) 
```

无论您如何混合 NSUInteger 和 NSInteger，这都应该有效，并且将确保操作数最多被评估一次（为了提高效率）。

通过正确性证明：

1.  为了`_X < (NSInteger) 0`评估为 True，_X 必须是 NSInteger 并且 < 0，所以我们检查 _Y > 0。编译器将通过评估 _Y 的类型来进行正确的比较。如果 Y > 0，那么根据定义，我们返回 YES。否则我们知道 X 和 Y 都是有符号的并且 < 0 并且可以安全地比较它们。
2.  但是，如果 X 是 NSUInteger 或 > 0，那么我们测试 Y 以查看它是否 < 0。如果 Y 是 < 0，那么根据定义，我们返回 NO。所以现在我们有 X 是 NSUInteger 或 NSInteger > 0 并且 Y 是 NSUInteger 或 NSInteger > 0。由于混合比较将被提升到 NSUInteger 我们每次都会有一个安全的转换，因为没有下溢的机会。

然而，一个更简单的解决方案是将类型转换为更长的有符号整数（如果您的系统有一个）：

```
#define EasySafeLT(X, Y) \
({ long long _X = (X); \
   long long _Y = (Y); \
   ( _X < _Y);}) 
```

虽然这取决于是否有更大的类型可用，但可能并不总是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:33:12.800

问题是`count`属性有点，`NSUInteger`当你从一个较小的数字中减去一个更高的数字时，你不会得到一个小于零的数字，你会得到一个非常大的正数，这会导致奇怪的行为。

试试这个方法，你会得到好的结果：

```
NSLog(@"%@",(NSInteger)[self.selectedSetpoint row] < ((NSInteger)[self.theCategories count]-3)?@"Yes":@"No"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:31:03.957

这似乎是比较有符号整数和无符号整数的情况。您的日志语句将抛出您的假设，因为您要求打印签名的数字。

```
NSLog(@"%d", -1); //Signed

-1;

NSLog(@"%u", -1); //Unsigned (tested on ios, 32 bit ints)

4294967295; 
```

然后当你比较时：`0 < 4294967295`肯定是真的。

按照@ctrahey 的建议进行投射应该可以解决您的问题：

```
if([self.selectedSetpoint row] < ( (int)[self.theCategories count] -3 ))
{
    //Do true stuff
} 
```

# jquery - Web 应用程序上的 QUnit？

> ID：11524391
> 
> 赞同：2
> 
> 时间：2012-07-17T14:14:24.523
> 
> 标签：jquery, unit-testing, web-applications, qunit

我主要是一个 jquery 开发人员，我在一个 struts 2/spring/hibernate 表单应用程序上工作。我不开发插件或类似的东西，它只是简单的 jquery 代码来显示/隐藏东西、验证表单、使用 ajax 提交、进行一些计算等等。我不明白我应该准确测试什么（我的大部分代码都是这样的，单击复选框以显示关联的 div 等），也不知道我应该如何测试它（比如 ajax 提交）。

我读了一些关于这个主题的教程，但它似乎不符合我的需求（似乎它应该在你开发独立的 js 代码时使用，就像 jquery 一样），或者如果它确实如此，我不明白如何。但我真的很想进行单元测试，因为我花了几天时间手动测试这些功能（当您单击复选框 x 时是否正确显示 div？是否正在动态验证字段？等等），在多个表单上一遍又一遍地做完全相同的事情由于代码回归，并且可能在此过程中遗漏了一些东西。

帮助将不胜感激！多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:19:43.023

如果您的 js 文件主要包含 DOM 操作，那么 qunit 将不适合。相反，如果您喜欢 TDD，请使用 selenium 和 jenkins 的组合。

如果你有返回值的函数，或者如果你使用像 Backbone.js 这样的 JavaScript MVC 框架，QUnit 会很有帮助。您可以测试它的模型部分。

请参阅 [测试操纵 DOM 的 Javascript](https://stackoverflow.com/questions/1435038/testing-javascript-that-manipulates-the-dom)

# c++ - 检查构造函数中类成员的数量

> ID：11524394
> 
> 赞同：1
> 
> 时间：2012-07-17T14:14:36.333
> 
> 标签：c++, class, assert

我正在编写一个不断添加新成员的类（它是项目的原型），并且我已经实现了自己的构造函数、复制构造函数、复制运算符等......当我添加更多成员时，我必须提醒自己继续将它们添加到构造函数和运算符中，我想知道是否有一种自动方法来检查我是否包含所有内容。

我实现了一个简单的解决方案，该解决方案涉及计算类声明中的所有成员，然后使用该值设置#define。

```
Class A
{
   int a;
   int b;
   vector<int> c;
   /*3 members*/
}

#define CLASS_A_MEMBERS 3 
```

在构造函数中，我只是做这样的事情

```
A::A( )
{
   int counter=0;
   a=1; counter++;
   b=1; counter++;
   c.clear(); counter++;

   assert(counter==CLASS_A_MEMBERS)
} 
```

伟大的！每当我忘记添加一些东西时，我都会得到一个断言和有问题的地方！

好的，这行得通......但是，有没有更优雅的方式来做这样的事情？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:19:51.837

不要以这种方式解决你的根本问题。相反，通过使您的课程不可复制或微不足道（默认）复制/分配来解决它。如果您的所有资源都由 RAII 原则管理，那么您可以让编译器为您生成所有特殊的构造函数/运算符，无论您对类做什么，它都会正确生成它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:19:03.647

您的代码仍然需要您记住更新`CLASS_A_MEMBERS`，并添加`counter++`到您的初始化程序和复制构造函数。

更好的解决方案是编写单元测试，这是一个更强大的解决方案，因为您可以使用它来测试各种行为。

没有办法自动解决这个问题。当你向一个类添加一个成员时，你必须访问所有的构造函数等等，以确保它们是正确的。文本搜索可以找到最后一个成员提到的所有地方，这将很好地提醒您添加新成员时可能需要触摸的所有地方。

# c# - 为什么 const mytype _var = new mytype() 不起作用？

> ID：11524395
> 
> 赞同：4
> 
> 时间：2012-07-17T14:14:36.373
> 
> 标签：c#, constants

我很好奇为什么 C#.NET 设计器中不允许使用以下代码的解释：

```
const foo f = new foo(); 
```

它给出以下错误消息：

> “f”的类型为“ConsoleApplication1.foo”。字符串以外的引用类型的 const 字段只能用 null 初始化。

问题是：为什么？有人可以解释这个`const`要求吗？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T14:16:07.033

因为 a`const`必须是可以在**编译时**解决的问题。

`new foo();`将在**运行时**执行。

您可能希望使用`readonly`关键字来确保它不能在构造函数之外初始化：

```
private readonly foo f = new foo(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:16:05.557

因为`const`C# 中的 a 必须是*编译*时常量。因此，唯一有效的`const`选项（对于大多数引用类型）是`null`.

一个例外是`string`您可以将其分配给字符串文字。

```
// allowed because string literals are compile-time
private const string Message = "Hello World"; 
```

您可以拥有一个`readonly`字段，这将允许该字段仅在初始化程序或构造函数中设置。本质上，这类似于 a ，`const`只是它是在运行时确定的，并且可以是`static`或实例（所有`const`字段都是`static`自动的）。

但是，应该注意，`readonly`引用只是意味着该*引用*是只读的，这并不意味着它所*引用*的对象也是只读的（当然，除非该对象在设计上是不可变的，例如`string`）。

例如：

```
private readonly List<string> validStrings = new List<string> { "Apple", "Orange", "Pear" }; 
```

即使`validStrings`上面是`readonly`，它仅意味着您不能通过`validStrings`将其分配给新参考来进行更改。 **但是**如果对象是可变的，您*可以*修改它所指的内容：

```
// allowed, you can change what it refers to
validStrings.Clear();

// disallowed, cannot change what the reference refers to outside of constructor
validStrings = new List<string> { "Other", "Stuff" }; 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T14:17:30.713

const 表示该值在编译时是已知的。因为 new 分配一个对象（如果程序没有运行，这是不可能的），你不能将 const 设置为一个新对象。你可以实现一些类似这样的东西：

```
static readonly Foo foo = new Foo() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T14:26:20.517

实际上，错误文本令人困惑，因为它是您拥有的局部变量（在方法内部声明），而不是字段（在方法外部声明，属于类（或结构））。

您必须删除`const`，因为正如其他人所说，它对于除`string`.

# android - Webview 中的按钮不起作用

> ID：11524397
> 
> 赞同：4
> 
> 时间：2012-07-17T14:14:38.767
> 
> 标签：android, dropbox

我正在制作的应用程序使用保管箱，用户必须授权才能使我们这样做。为此，我在 webview 中加载了一个 url，它打开了 dropbox 的登录，然后显示了一个“连接”按钮。

我遇到的第一个问题是 webview 正在打开默认浏览器。所以我可以理解为什么这样做我添加了一个 WebViewClient 并像这样覆盖了 onPageStarted 方法..

```
class AuthCodeWebViewClient extends WebViewClient {

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
        Log.d(TAG, url);
    }
} 
```

这样做会停止默认浏览器打开，但我无法按下 html 中的按钮。当我在日志中收到这个时，webview 正在识别它......

> 07-17 16:13:16.700: V/webview(29778): singleCursorHandlerTouchEvent-getEditableSupport FASLE 07-​​17 16:13:17.025: I/GATE(29778): DEV_ACTION_COMPLETED

我在做什么错所以按钮不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:40:16.000

事实证明这很简单，我在发布后大约一分钟就知道了。我需要启用 javascript

```
 webview.getSettings().setJavaScriptEnabled(true); 
```

# android - Android 谷歌地图点之间的距离

> ID：11524405
> 
> 赞同：0
> 
> 时间：2012-07-17T14:15:15.303
> 
> 标签：android, listview

这是一个 ListView，我可以显示可用的城市和地点。我想显示从当前点到所列地点的距离。

例如：

```
+++++++++++++++++++++++++
Name :Hotel Hilton
Category :hotel
distance:1km
+++++++++++++++++++++++++ 
```

如何计算并显示列表中的每个距离值？

```
ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

            JSONArray jsonArray = new JSONArray(response);

            if (jsonArray != null) {
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject object = (JSONObject) jsonArray.get(i);

                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put(TAG_Name, object.getString("name"));
                    map.put(TAG_Category, object.getString("category"));
                    map.put(TAG_Lat, object.getString("lat"));
                    map.put(TAG_Lng, object.getString("lng"));

                    contactList.add(map);

                }
            }

            ListAdapter adapter = new SimpleAdapter(this, contactList,
                    R.layout.menu_list_row, new String[] { TAG_Name,
                    TAG_Category }, new int[] { R.id.LR_Name,
                            R.id.LR_date });
            list.setAdapter(adapter);
        } 
```

当前位置从 GPS 识别并存储为 lat,lng。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:23:01.037

您可以使用[Haversine](http://en.wikipedia.org/wiki/Haversine_formula)公式计算距离。

[http://devdiscoveries.wordpress.com/2010/02/01/android-distance-between-two-points-on-the-earth/](http://devdiscoveries.wordpress.com/2010/02/01/android-distance-between-two-points-on-the-earth/)

[https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:23:39.887

您可以使用：

```
float[] res = new float[3];
Location.distanceBetween(object.getDouble("lat"), object.getDouble("lng"), lat,lng, res); 
```

假设前两个参数是双精度数，表示您的对象的位置，而`lat`变量`lng`包含您的当前位置。

结果，以米表示，将在`res[0]`

# excel - Excel vba宏根据单元格整数值多次复制行

> ID：11524408
> 
> 赞同：2
> 
> 时间：2012-07-17T14:15:30.480
> 
> 标签：excel, vba, duplicates, row

我正在寻找一个将完整行复制到另一个工作表的 VBA Excel 宏。它需要根据单元格整数值创建该行的其他重复副本。

这在使用邮件合并来创建文档或标签的多个副本时很有帮助。我找到了几个接近的答案，但没有任何复制完整行的答案

输入
col1 | col2 | col3 | col4
狗 | 喜欢 | 猫 | 1
只老鼠 | 喜欢 | 坚果| 3
只猫 | 咀嚼 | 老鼠| 高分辨率照片| CLIPARTO 2

输出 col1 | col2 | col3 | col4
狗 | 喜欢 | 猫
鼠|高分辨率照片| CLIPARTO 喜欢 | 坚果
老鼠|高分辨率照片| CLIPARTO 喜欢 | 坚果
老鼠|高分辨率照片| CLIPARTO 喜欢 | 坚果
猫| 高分辨率照片| CLIPARTO 咀嚼 | 老鼠
猫| 高分辨率照片| CLIPARTO 咀嚼 | 老鼠

输出 col4 中的值可能存在，对我的情况无关紧要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:03:22.800

假设带有数据的工作表的名称为“Sheet1”，输出工作表的名称为“Sheet2”，复制的次数位于 D 行 - 此代码将起作用。您需要先对其进行修改以满足您的需求！

```
Sub DuplicateRows()

Dim currentRow As Integer
Dim currentNewSheetRow As Integer: currentNewSheetRow = 1

For currentRow = 1 To 3 'The last row of your data

    Dim timesToDuplicate As Integer
    timesToDuplicate = CInt(Sheet1.Range("D" & currentRow).Value2)

    Dim i As Integer
    For i = 1 To timesToDuplicate

        Sheet2.Range("A" & currentNewSheetRow).Value2 = Sheet1.Range("A" & currentRow).Value2
        Sheet2.Range("B" & currentNewSheetRow).Value2 = Sheet1.Range("B" & currentRow).Value2
        Sheet2.Range("C" & currentNewSheetRow).Value2 = Sheet1.Range("C" & currentRow).Value2

        currentNewSheetRow = currentNewSheetRow + 1

    Next i

Next currentRow

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T16:42:51.880

我做了一些改变并调整了*弗朗西斯·迪恩的*回答：

*   对于 Office 2013（或 2010？）的用户，Excel 需要明确知道“Sheet1”是工作表的名称。
*   我还为更多的列和行调整了宏。例如`currentRow`is`Long`和最后一行是`Integer+1`.
*   我确定重复的整数值在“J”中。

那么宏是：

```
Sub DuplicateRows()
    Dim currentRow As Long
    Dim currentNewSheetRow As Long: currentNewSheetRow = 1

    For currentRow = 1 To 32768 'The last row of your data
    Dim timesToDuplicate As Integer
    timesToDuplicate = CInt(Worksheets("Sheet1").Range("J" & currentRow).Value)
    Dim i As Integer
    For i = 1 To timesToDuplicate
        Worksheets("Sheet2").Range("A" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("A" & currentRow).Value
        Worksheets("Sheet2").Range("B" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("B" & currentRow).Value
        Worksheets("Sheet2").Range("C" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("C" & currentRow).Value
        Worksheets("Sheet2").Range("D" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("D" & currentRow).Value
        Worksheets("Sheet2").Range("E" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("E" & currentRow).Value
        Worksheets("Sheet2").Range("F" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("F" & currentRow).Value
        Worksheets("Sheet2").Range("G" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("G" & currentRow).Value
        Worksheets("Sheet2").Range("H" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("H" & currentRow).Value
        Worksheets("Sheet2").Range("I" & currentNewSheetRow).Value = Worksheets("Sheet1").Range("I" & currentRow).Value
        currentNewSheetRow = currentNewSheetRow + 1
    Next i
Next currentRow
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T01:44:49.727

我调整了弗朗西斯的答案，使其适用于当前活动的电子表格，并且仅适用于选定的行。我的特定用例需要将每个重复的数量更改为 1，因此将“G”列设置为 1。

它仍然只适用于一组固定的列。

```
Sub MultiplySelectedRows()
'store reference to active sheet
Dim Source As Worksheet
Set Source = ActiveWorkbook.ActiveSheet
'create new sheet for output
Dim Multiplied As Worksheet
Set Multiplied = Sheets.Add(After:=Worksheets(Worksheets.Count))
'switch back to original active sheet
Source.Activate
Dim rng As Range
Dim lRowSelected As Long
Dim duplicateCount As Integer
Dim newSheetRow As Integer
newSheetRow = 1
For Each rng In Selection.Rows
    lRowSelected = rng.Row
    'Column holding number of times to duplicate each row is specified in quotes
    duplicateCount = CInt(Source.Range("G" & lRowSelected).Value)
    Dim i As Integer
    For i = 1 To duplicateCount
        'one copy statement for each column to be copied
        Multiplied.Range("A" & newSheetRow).Value = Source.Range("A" & lRowSelected).Value
        Multiplied.Range("B" & newSheetRow).Value = Source.Range("B" & lRowSelected).Value
        Multiplied.Range("C" & newSheetRow).Value = Source.Range("C" & lRowSelected).Value
        Multiplied.Range("D" & newSheetRow).Value = Source.Range("D" & lRowSelected).Value
        Multiplied.Range("E" & newSheetRow).Value = Source.Range("E" & lRowSelected).Value
        Multiplied.Range("F" & newSheetRow).Value = Source.Range("F" & lRowSelected).Value
        'multiplier is replaced by 1 (16x1 instead of 1x16 lines)
        Multiplied.Range("G" & newSheetRow).Value = 1
        Multiplied.Range("H" & newSheetRow).Value = Source.Range("H" & lRowSelected).Value
        Multiplied.Range("I" & newSheetRow).Value = Source.Range("I" & lRowSelected).Value
        Multiplied.Range("J" & newSheetRow).Value = Source.Range("J" & lRowSelected).Value
        Multiplied.Range("K" & newSheetRow).Value = Source.Range("K" & lRowSelected).Value
        Multiplied.Range("L" & newSheetRow).Value = Source.Range("L" & lRowSelected).Value
        newSheetRow = newSheetRow + 1
    Next i
Next rng 
```

结束子

# database - Vertica CE 集群节点号？

> ID：11524409
> 
> 赞同：0
> 
> 时间：2012-07-17T14:15:31.307
> 
> 标签：database, vertica

Vertica CE 数据库中可以创建多少个节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-16T07:13:53.390

Vertica 社区版的限制：

1.  可创建3个节点
2.  您可以加载或维护的 1 TB 数据
3.  驱动程序仅支持 Linux 和 Windows

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:37:12.110

文档说 3，但我自己没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:06:24.660

CE 限制为 3 个节点和 1 TB 数据。

# android - 根据 Spinner 选择创建多个 TextView

> ID：11524410
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:15:32.353
> 
> 标签：android

我正在制作一个 android 应用程序，其中有 3 个 textview 及其相应的 2 个微调器和 edittext。我希望当用户选择“次数”作为微调器中的字符串 3 时，下一个屏幕中应该有 3 个文本视图

这是一个截图

[http://postimage.org/image/vk9ngksk9/8e94a435/](http://postimage.org/image/vk9ngksk9/8e94a435/)

意思是说如果我从微调器中选择 2，则下一个屏幕中应该有 2 个文本视图。

这是下一个屏幕的屏幕截图

[http://postimage.org/image/n25axcf8x/dbb0775d/](http://postimage.org/image/n25axcf8x/dbb0775d/)

所以我希望文本视图的数量与微调器选择相对应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:32:07.383

您可以从 spinner 获取 int 值并将其保存到某个全局位置，然后从下一个屏幕中您可以访问该值，并且您可以将 textView 与该值一样膨胀。像这样的东西：

```
View main = (View) findViewById(R.id.mainView);
for(int i = 0; i < spinnerValue; i++) {
     TextView tv = new TextView(getContext());
     tv.setText(i+". value");

     main.addView(tv);
} 
```

这里的主视图是您要添加文本视图的任何地方...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:38:10.700

如果我理解正确，那么您应该做的是解析所选项目的意图，如下所示：

在您的第一个活动中：

```
Intent i = new Intent(firstActivity.this, secondActivity.class);
//Here I set an ID and the value so you can find it in the second activity
i.putExtra(nbTextView, Integer.parseInt(spinner.getSelectedItem());
startActivity(i); 
```

在您的第二个活动中：

```
Bundle data = getIntent().getExtras();
nbTextView = data.getInt("nbTextView"); 
```

然后使用此变量动态创建您的电视。

希望能帮助到你。

# cocoa-touch - 如何配置 NSNumberFormatter 以显示不带前导零的小数部分？

> ID：11524413
> 
> 赞同：2
> 
> 时间：2012-07-17T14:15:35.473
> 
> 标签：cocoa-touch, cocoa, nsnumber, nsnumberformatter

我`NSNumberFormatter`用来格式化一个`NSDecimalNumber`.

我可以使用什么配置将数字显示`0.012676`为`1`？

**重要提示：我*不想*四舍五入到 1.0 — 我想四舍五入到小数点的百位，然后去掉前面的零和小数点分隔符。**

* * *

我当前的配置如下所示：

```
// in a method...

NSDecimalNumber *value = /* retrieve a value like 0.012676 */;
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];

// this is the rounding behavior I want
[nf setRoundingMode: NSNumberFormatterRoundHalfEven];

[nf setMinimumFractionDigits: 2];
[nf setMaximumFractionDigits: 2];

return [nf stringFromNumber: value]; 
```

生成以下输出：

`.01`

* * *

多亏了 dasblinkenlight 和 Twitter 朋友，解决方案是简单地乘以`100`，然后消除小数位数：

```
[nf setMultiplier: [NSNumber numberWithInt: 100]];
[nf setMinimumFractionDigits: 0];
[nf setMaximumFractionDigits: 0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:25:07.227

`N`您可以通过乘以`N`10 的 -th 次方来消除前导零。由于您正在寻找第 100 位，因此乘以`0.012676`并将`100`其转换为整数。

# python - 运行 python-openid 的 django 示例时出错

> ID：11524414
> 
> 赞同：0
> 
> 时间：2012-07-17T14:15:45.327
> 
> 标签：python, openid

我是 django 的新手。我从[https://github.com/openid/python-openid/tree/master/examples/djopenid运行这个例子](https://github.com/openid/python-openid/tree/master/examples/djopenid)

任何指向我做错了什么的指针都将不胜感激。

```
ImproperlyConfigured at /server/
Error importing template source loader django.template.loaders.filesystem.load_template_source: "'module' object has no attribute 'load_template_source'"
Request Method: GET
Request URL:    http://localhost:9001/server/
Django Version: 1.4
Exception Type: ImproperlyConfigured
Exception Value:    
Error importing template source loader django.template.loaders.filesystem.load_template_source: "'module' object has no attribute 'load_template_source'"
Exception Location: /usr/local/lib/python2.7/dist-packages/django/template/loader.py in find_template_loader, line 101
Python Executable:  /usr/bin/python
Python Version: 2.7.2
Python Path:    
['/home/murtaza/repos/python-openid/examples/djopenid',
 '/usr/local/lib/python2.7/dist-packages/distribute-0.6.24-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/pip-1.0.2-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/ipdb-0.7-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/reimport-1.3dev_r77-py2.7.egg',
 '/usr/local/lib/python2.7/dist-packages/python_openid-2.2.5-py2.7.egg',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/pymodules/python2.7',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',
 '/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']
Server time:    Tue, 17 Jul 2012 09:12:55 -0500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:21:19.977

这是一个老例子，它可能与 Django 1.4 不兼容。

# mysql - 更新表时MySQL更新错误

> ID：11524415
> 
> 赞同：1
> 
> 时间：2012-07-17T14:15:45.163
> 
> 标签：mysql, sql

我在 MySQL 中有一个表，列名称为 1960、1961、1962 等。记录已成功插入。当我尝试使用查询更新表时

```
UPDATE table1 SET 1960=0.0 WHERE id = 'abc' 
```

它给：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near '1960=0.0 WHERE id='abc' at line 1 
```

是由于列名作为数字还是其他错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:17:02.370

试试这个：

```
UPDATE table1 SET `1960`='0.0' WHERE id = 'abc' 
```

... 为列名添加反引号和值周围的单引号（值实际上不需要，但我总是这样做）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:17:17.013

用反引号转义你的列名

```
UPDATE table1 SET `1960` = 0.0 WHERE id = 'abc' 
```

如果您的列名是MySQL中的[保留关键字或数字，则必须这样做。](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:20:36.560

您必须使用反引号字符来转义列名。以下手册页[有些密集但内容丰富](http://dev.mysql.com/doc/refman/4.1/en/identifiers.html)

尝试...

```
UPDATE table1 SET `1960`=0.0 WHERE id = 'abc' 
```

# matlab - 使用 for 循环填充向量

> ID：11524416
> 
> 赞同：0
> 
> 时间：2012-07-17T14:15:50.693
> 
> 标签：matlab, vector, for-loop

我有一个解决方案来为矩阵的一个元素创建一个向量：

```
[dx,dy] = gradient(Im);
orient11 = [(-dx(1,1)) (dy(1,1)) 0]; 
```

在哪里

```
size(orient11) =

0 0 0 
```

即对于orient的第一个元素，即orient11，是一个向量。我如何对所有其他元素执行此操作，所以我有 orient12、orient13 ....orientnn。我知道我需要一个 for 循环，但是我应该将向量从 for 循环存储到什么对象中？我发现我无法创建向量矩阵。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:52:29.637

```
v = -2:0.2:2;
[x,y] = meshgrid(v);
z = x .* exp(-x.^2 - y.^2);
[px,py] = gradient(z,.2,.2);

orient11 = [(-px(1,1)) (py(1,1)) 0]; % based off of your concatination there.
size(orient11) 
```

然后我得到：

```
ans =

     1     3 
```

如果您只想从您拥有的渐变中获取第一列数据并且只想与它们堆叠零，您可以这样做：

```
orient11 = [(-px(:,1)) (py(:,1)) zeros(size(px,1),1)]; 
```

而不是一个`for`循环。

更新：

```
Orient = zeros(size(px,1),3,size(px,2));
for n = 1:size(px,1)
    Orient(:,:,n) = [(-px(:,n)) (py(:,n)) zeros(size(px,1),1)];
end 
```

现在的布局`Orient`是你的 -px, py, 0 in layers。每层代表来自初始数据的列。因此，如果您想访问第 4 行第 14 列，您可以调用`Orient(4,:,14)`.

希望这有意义并有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:35:29.160

您*可以*尝试构建一个*N* × *N* × 3 矩阵，但操作起来不太方便。这是因为从该矩阵中提取一个向量会产生一个 1×1×3 的向量，您需要对其进行整形。绝对不好玩。

相反，我建议您构建一个由 1×3 向量组成的*N* × *N* [元胞数组，如下所示：](http://www.mathworks.com/help/techdoc/matlab_prog/br04bw6-117.html)

```
[dx, dy] = gradient(Im);
vec = @(i)[-dx(i), dy(i), 0];
orient = arrayfun(vec, reshape(1:numel(dx), size(dx)), 'UniformOutput', 0); 
```

要访问向量，请使用花括号。例如， (1, 2) 位置的向量将是：

```
orient12 = orient{1, 2}; 
```

希望能帮助到你！

# jquery - jquery更改img标签的src值

> ID：11524418
> 
> 赞同：0
> 
> 时间：2012-07-17T14:16:04.343
> 
> 标签：jquery, sharepoint-2010, image, src

下面的 jquery 将 src 值更改为我指定的任何值，但这会应用于所有标签。

```
$("img").attr({src: "/_layouts/images/Flags_Germany_resized.png"}); 
```

我有确实有 id 的标签，因此我想知道如何通过使用其标题而不是 id 来选择特定标签。

我想更改 src 值的 img 标签如下：

```
<img title="Folder: Germany" alt="Folder: Germany" src="/_layouts/images/folder.gif" 
border="0" complete="complete"/>

<img title="Folder: Angola" alt="Folder: Angola" src="/_layouts/images/folder.gif" 
border="0" complete="complete"/>

<img title="Folder: Russia" alt="Folder:Russia" src="/_layouts/images/folder.gif" 
border="0" complete="complete"/> 
```

任何建议或帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:17:21.190

像这样

```
$('img[title="Folder: Germany"]') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:17:47.427

使用[属性选择器](http://api.jquery.com/attribute-equals-selector/)：

```
$('img[title="Folder: Germany"]').attr({src: "/_layouts/images/Flags_Germany_resized.png"}); 
```

文档：[http ://api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:17:22.153

查看属性选择器。这些在 jQuery 中（几乎）像在 CSS 中一样工作。

```
$('img[title="some title here"]').attr('src', 'some/new/src.jpg'); 
```

# java - 通过单个数据库命中向表中插入多行的可能性

> ID：11524423
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:16:13.047
> 
> 标签：java, database, oracle, insert

我遇到了这种情况，我必须使用我支持的 Java 应用程序将大约 100 行插入到我的表中。

我不希望我的应用程序每次都使用插入查询来访问数据库来执行此操作。

您能否建议我通过一个 DB 命中将所有这 100 行插入到该表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:18:33.087

为此，您可以进行[批量查询处理。](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)

# iphone - 在不阻塞主线程的情况下更新 tableView

> ID：11524424
> 
> 赞同：0
> 
> 时间：2012-07-17T14:16:19.903
> 
> 标签：iphone, objective-c, ios, ipad

所以我有一个带有 UIScrollView 的 iPad 应用程序。滚动视图一次显示大约 5-10 个 UIView，在这些 UIView 内部是一个 tableView。所以基本上一次显示了 5-10 个 UITableView。问题是，当我滚动 UIScrollView 时，它会在 UITableView 上调用 reloadData，在这种情况下，它将设置 UITableView 单元格的文本。方法如下：

```
if (shouldUpdateComment){
        shouldUpdateComment = NO;
        __block __weak AHCommentsTableViewCell * weakSelf = self;
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{

            NSString *commentsText = [NSString stringWithFormat:@"%@ %@", self.imageComment_.username_, self.imageComment_.text_];
            NSMutableAttributedString* attrStr = [[[NSMutableAttributedString alloc] initWithString:commentsText] autorelease];

            NSRange usernameRange = [commentsText rangeOfString:self.imageComment_.username_];
            if (usernameRange.location != NSNotFound){
                [attrStr setTextColor:[UIColor colorWithRed:86.0/255.0 green:134.0/255.0 blue:172.0/255.0 alpha:1.0] range:usernameRange];

            }

            NSString * url = [NSString stringWithFormat:@"userid://%@", self.imageComment_.id_];
            usernameRange = [commentsText rangeOfString:self.imageComment_.username_];
            if (usernameRange.location != NSNotFound){
                [weakSelf.commentsText_ addLink:[NSURL URLWithString:url] range:usernameRange];
            }

            NSRange range;
            range.location = 0;
            range.length = commentsText.length;

            [attrStr setFont:[UIFont fontWithName:@"HelveticaNeue" size:14] range:range];

            dispatch_async(dispatch_get_main_queue(), ^{
                [weakSelf.commentsText_ setAlpha:0.0];
                [weakSelf.commentsPostedTime_ setAlpha:0.0];
                [weakSelf.commentsText_ setFrameWidth:self.contentView.frameWidth - self.profilePicture_.frameWidth - kCommentsPadding];
                [weakSelf.commentsText_ setFrameHeight:weakSelf.imageComment_.commentHeight_ - 30];
                [weakSelf.commentsText_ setAttributedString:attrStr];

                dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{
                    [weakSelf parseTagsInComment:commentsText];
                });

                NSString *timePosted = [NSString timestampToString:weakSelf.imageComment_.createdTime_];
                CGSize commentsTimeSize = [timePosted sizeWithFont:weakSelf.commentsPostedTime_.font constrainedToSize:CGSizeMake(weakSelf.commentsText_.frameWidth, 50)];
                [weakSelf.commentsPostedTime_ setText:timePosted];
                [weakSelf.commentsPostedTime_ setFrameWidth:commentsTimeSize.width];
                [weakSelf.commentsPostedTime_ setFrameHeight:commentsTimeSize.height];
                [weakSelf.commentsPostedTime_ setFrameY:weakSelf.commentsText_.frameY + weakSelf.commentsText_.frameHeight];
                [weakSelf.commentsPostedTime_ setFrameX:weakSelf.commentsText_.frameX];

                [UIView animateWithDuration:0.3 animations:^{
                    [weakSelf.commentsText_ setAlpha:1.0];
                    [weakSelf.commentsPostedTime_ setAlpha:1.0];
                }];
            });

        });

    } 
```

现在上面的方法很重，因为我试图在仪器上分析它。当它在滚动视图滚动时执行时，它会滞后非常糟糕。所以我所做的就是等到滚动视图停止滚动并调用上面的方法，问题是它会导致非常糟糕的用户体验。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:26:15.890

UI 的改变只能在主线程中进行，也就是说，如果你想改变文本，改变 UIControl 的框架等，必须在主线程中实现。

这就是 UIKit 框架所支持的

# php - 如何将MYSQL中的Blob数据转换为Android ImageView

> ID：11524436
> 
> 赞同：2
> 
> 时间：2012-07-17T14:16:58.627
> 
> 标签：php, android, mysql

Android 3.1 (API 12) - 严格来说，这是一个商业应用程序，不会在任何其他设备上。

我（n00b）正在尝试检索存储为我们服务器上 Mysql 中 Blob 的图像数组，并将它们添加到`ImageView`Android 中的 's 中。

首先，服务器端：我不确定是`base64_encode`还是`json_encode`，这是我当前的 PHP 和结果。

* * *

**PHP：**

```
$query = "SELECT `locations`.`businessName`, `photos`.`img` 
        FROM `locations` 
        JOIN `photos` ON `locations`.`co_id` = `photos`.`co_id` 
        WHERE `locations`.`businessName` = '".$companyID."'";

    mysql_connect($dbserver, $dbusername, $dbpassword) or die(mysql_error());
    mysql_select_db($dbname) or die(mysql_error());

    $result = mysql_query($query) or die(mysql_error());  

    while ($row = mysql_fetch_array($result)) {
        $finalImg[] = $row['img'];

        foreach ($finalImg as $img) {
            $finallyWeAreThere = base64_encode($img);
        }

    }

    echo $finallyWeAreThere;

    mysql_close(); 
```

**结果：**

```
/9j/4AAQSkZJRgABAQEAYABgAAD/... and so on.. and so on.. 
```

* * *

现在到 Android 方面。在我尝试提取图像之前，我连接到不同的同一数据库`Activity`以获取公司名称列表（成功），一旦单击公司名称，即通过将公司名称按意图传递给我的主类来收集图像.

我以我的公司名称收集的成功作为起点，所以这个`Main.java`文件代码非常原始并且可能非常错误。

**Main.java**（现在，我还没有包含一个`for`或`while`循环来显示所有图像，我很高兴此时只返回一张图像）：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Get the appropriate layout
        setContentView(R.layout.main);

        Bundle extras = getIntent().getExtras();
        businessName = extras.getString("companyName");

        // Load AsyncTask to get photos from server
        new RetrievePhotos().execute(businessName);
    }

    class RetrievePhotos extends AsyncTask<String, String, Void> {
        private ProgressDialog progressDialog = new ProgressDialog(Main.this);
        InputStream inputStream = null;
        String result = ""; 

        protected void onPreExecute() {
            progressDialog.setMessage("Gathering photos...");
            progressDialog.show();
            progressDialog.setOnCancelListener(new OnCancelListener() {
                public void onCancel(DialogInterface diaInterface) {
                    RetrievePhotos.this.cancel(true);
                    diaInterface.dismiss();
                }
            });
        }

        @Override
        protected Void doInBackground(String... params) {

            String url_select = "http://www.someCompany.com/someFile.php?imgTest=true&companyName=" + businessName;
            imView = (ImageView)findViewById(R.id.imageView1);

            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
            try {
                // Set up HTTP post
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url_select);
                httpPost.setEntity(new UrlEncodedFormEntity(param));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // Read content & Log

                inputStream = httpEntity.getContent();
                bmImg = BitmapFactory.decodeStream(inputStream);
                imView.setImageBitmap(bmImg);

                Log.i("HttpClient", "Called on the HTTP Client and went to: " + url_select);
            } catch (UnsupportedEncodingException e1) {
                Log.e("UnsupportedEncodingException", e1.toString());
                e1.printStackTrace();
            } catch (ClientProtocolException e2) {
                Log.e("ClientProtocolException", e2.toString());
                e2.printStackTrace();
            } catch (IllegalStateException e3) {
                Log.e("IllegalStateException", e3.toString());
                e3.printStackTrace();
            } catch (IOException e4) {
                Log.e("IOException", e4.toString());
                e4.printStackTrace();
            }

            // Convert response to string using String Builder
            try {
                BufferedReader bReader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 8);
                StringBuilder sBuilder = new StringBuilder();

                String line = null;
                while ((line = bReader.readLine()) != null) {
                    sBuilder.append(line + "\n");
                }

                inputStream.close();
                result = sBuilder.toString();

            } catch (Exception e) {
                Log.e("StringBuilding & BufferedReader", "Error converting result " + e.toString());
            }
            return null;

        } // end doInBackground 
```

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/hsdarker"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="150dp"
        android:layout_height="112dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="75dp"
        android:layout_marginTop="50dp" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="300dp"
        android:layout_height="225dp"
        android:layout_below="@id/imageView1"
        android:layout_toRightOf="@id/imageView1" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="150dp"
        android:layout_height="112dp"
        android:layout_alignTop="@id/imageView1"
        android:layout_marginLeft="208dp"
        android:layout_toRightOf="@id/imageView2" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="300dp"
        android:layout_height="225dp"
        android:layout_below="@id/imageView3"
        android:layout_marginRight="75dp"
        android:layout_toRightOf="@id/imageView3" />

</RelativeLayout> 
```

**Logcat 错误日志：**

```
07-17 09:39:00.775: W/dalvikvm(5222): threadid=11: thread exiting with uncaught exception (group=0x40202760)
07-17 09:39:00.775: E/AndroidRuntime(5222): FATAL EXCEPTION: AsyncTask #2
07-17 09:39:00.775: E/AndroidRuntime(5222): java.lang.RuntimeException: An error occured while executing doInBackground()
07-17 09:39:00.775: E/AndroidRuntime(5222):     at android.os.AsyncTask$3.done(AsyncTask.java:266)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.lang.Thread.run(Thread.java:1020)
07-17 09:39:00.775: E/AndroidRuntime(5222): Caused by: java.lang.IllegalArgumentException: Illegal character in query at index 82: http://www.holidaysigns.com/db/nstCompanyList.php?imgTest=true&companyName=HOLIDAY SIGNS
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.net.URI.create(URI.java:769)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at org.apache.http.client.methods.HttpPost.<init>(HttpPost.java:79)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at holidaysigns.nst.Main$RetrievePhotos.doInBackground(Main.java:148)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at holidaysigns.nst.Main$RetrievePhotos.doInBackground(Main.java:1)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at android.os.AsyncTask$2.call(AsyncTask.java:252)
07-17 09:39:00.775: E/AndroidRuntime(5222):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-17 09:39:00.775: E/AndroidRuntime(5222):     ... 4 more 
```

我已经对此进行了不间断的研究，老实说，我现在不知道该去哪里，或者我是否在服务器端正确设置它。我很抱歉成为n00b。非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:26:58.533

你有2个问题。

首先，您的 URL 未正确编码。很可能是导致您出现问题的 businessName 中的空格。您需要 URLEncoder.encode(businessName,"UTF-8") 来处理可能出现在 businessName 中的任何空格或特殊字符。因此“companyName=HOLIDAY SIGNS”将变为“companyName=HOLIDAY+SIGNS”。

第二个问题是您试图在后台线程中设置 ImageView。您需要在主线程（UI 线程）上设置 ImageView 内容。更改 doInBackground() 以返回解码的位图，而不是 void，并添加一个 onPostExcecute(Bitmap bitmap) 方法，将位图设置到 ImageView 中。onPostExecute 在 UI 线程中运行。（一定要检查是否为空）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:20:34.710

网址

```
http://www.holidaysigns.com/db/nstCompanyList.php?imgTest=true&companyName=HOLIDAY SIGNS 
```

根据异常，具有非法字符。

这个字符是空格，“”。用加号 (+) 替换所有空格，然后重试！

空格不合法的原因如下：

一个典型的 HTTP 请求是这样发起的：

```
GET /url HTTP/1.1 
```

所以用空格隔开三件事：方法、URI和HTTP协议版本。如果你把一个像你一样的网址放在那里怎么办？

```
GET /db/nstCompanyList.php?imgTest=true&companyName=HOLIDAY SIGNS HTTP/1.1

Method: GET
URL: /db/nstCompanyList.php?imgTest=true&companyName=HOLIDAY
HTTP VERSION: SIGNS 
```

……出了点问题，对吧？

这就是为什么不允许使用空格的原因。

# java - 使用微模拟器从 jar 制作 apk

> ID：11524437
> 
> 赞同：0
> 
> 时间：2012-07-17T14:16:59.270
> 
> 标签：java, jar, apk, lwuit

好吧，我已经使用 java me 制作了一个应用程序，作为图形，我使用了我添加到 midlet jar 中的 lwuit 库。在诺基亚上它运行流畅，我想将它移植到安卓。所以我发现了微模拟器[http://microemu.blogspot.ro/2008/11/running-java-me-applications-on-android.html](http://microemu.blogspot.ro/2008/11/running-java-me-applications-on-android.html)并按照这些步骤操作，我得到了 apk。但是，当我将它运行到 Android 模拟器中时，它会在启动时关闭。我不知道可能是什么问题，因为我能够将演示 jar 应用程序转换为 apk 并且它运行成功。关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:06:35.423

我建议您将应用程序移植到[Codename One](http://www.codenameone.com/)，这应该非常简单。它具有适当的 Android 支持，这将使您的应用程序在 Android 上看起来和运行原生。

# objective-c - 如何防止 UIView 消耗用户输入

> ID：11524440
> 
> 赞同：4
> 
> 时间：2012-07-17T14:17:02.940
> 
> 标签：objective-c, ios, user-input

我有一个简单的视图层次结构示例。

![在此处输入图像描述](../Images/72aedb1bf924fcc3ba2759ab6a01d27c.png)

显然，主视图空间是用户将与之交互的主要空间。在底部，我有可以弹出的选项卡，以向用户指示他/她在应用程序的进展中所处的位置。通常，这些选项卡仅占用底部“自定义选项卡”矩形指示的空间，但它们可以一直向上扩展以填充“空白空间”框。

为了让选项卡仍然可以点击，我必须使选项卡视图的框架成为包含“自定义选项卡”空间和“空白空间”空间的完整矩形。这导致的是，当标签未弹出时，“空空间”没有与用户交互，因为该输入基本上是被Uiview所消耗的，而不是通过层次结构的其余部分转发。

我想这个问题的根源是“主视图空间”和“空白空间+自定义选项卡”都是主窗口的子视图。

如果用户没有主动点击交互式元素，有没有办法告诉系统将用户输入转发到同级视图？例如，使用`touchesBegan`等`touchesEnded`方法向操作系统表明此视图未使用输入。

**编辑**

这是视图的另一个版本，展示了打开一个选项卡的状态：

![在此处输入图像描述](../Images/89bb40bc0269f57e69fba5e99dfa33a5.png)

**编辑2**

经过一些简单的测试，默认行为似乎是最顶层的视图首先获取输入。即使您`UIView`在`UITextField`. 清除`UIView`将消耗输入，防止`UITextField`可编辑

**编辑3**

选项卡的工作方式是用户可以点击选项卡（大小如第一张图片中所示），然后它将展开以显示与该选项卡关联的缩略图视图（如第二张图片中所示）。然后，用户可以选择再次点击选项卡以将其关闭，并将大小恢复为原始图片。为了使选项卡在打开时可单击，我必须让包含视图基本上足够大以包含所有 4 个选项卡，就好像它们已打开一样。这会导致包含视图中有大量空白空间。这个空白空间导致屏幕上的输入空间基本上是无效的。如果主视图空间中有一个按钮被空白区域覆盖，则用户将无法单击它。我希望能够避免这种行为，并且让空白区域覆盖的那个按钮仍然可以点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:27:11.760

我不会尝试“转发”触摸，而是修改您的布局，以便选项卡视图仅与选项卡一样大，并且`.frame`仅在您需要时将其更改为代码中的较大矩形。例如，单击选项卡时：

```
 CGRect tabFrame = tabView.bounds;
 tabFrame.origin.y = top_of_emptySpace;
 tabFrame.size.height = height_of_emptySpace + height_of_tabView;
 tabView.frame = tabFrame; 
```

然后你可以添加你需要的内容。当您需要它消失时，删除内容然后执行：

```
 CGRect tabFrame = tabView.bounds;
 tabFrame.origin.y = top_of_tabView;
 tabFrame.size.height = height_of_tabView;
 tabView.frame = tabFrame; 
```

There might be some tweaking required to make the content show up as you like, but this way, when the tabs are minimized, you won't have to do anything extra to make the main view respond to touches correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:49:12.983

好的，这就是我会这样做的方式：

RootViewController 有两个视图，它的主视图占据整个屏幕，一个被添加到窗口中。和标签视图。

然后我会将另一个视图控制器（理想情况下是 UINavigationController）添加到 RootViewController，并将其视图添加为 RootViewController 视图的子视图。

执行的任何更改，例如推送新的视图控制器或任何东西，都将在子视图控制器上完成。

这样，您的标签视图将始终显示。要打开选项卡，您可以使用动画或类似的东西创建一个新视图，该视图将显示在选项卡栏的顶部。

# python - Python popen 内存不足，输出量大

> ID：11524445
> 
> 赞同：0
> 
> 时间：2012-07-17T14:17:18.153
> 
> 标签：python

我正在使用 subprocess.popen() 函数来运行一个外部工具，该工具将大量数据 (>GB) 读写到标准输出。但是，我发现内核在内存不足时正在杀死 python 进程：

```
Out of memory: Kill process 8221 (python) score 971 or sacrifice child
Killed process 8221 (python) total-vm:8532708kB, anon-rss:3703912kB, file-rss:48kB 
```

因为我知道我正在处理大量数据，所以我设置了 popen 来将 stdout 和 stderr 写入文件，所以我不使用管道。我的代码看起来像这样：

```
errorFile = open(errorFilePath, "w")
outFile = open(outFilePath, "w")
#Use Popen to run the command
try:                
    procExecCommand = subprocess.Popen(commandToExecute, shell=False, stderr=errorFile, stdout=outFile)
    exitCode = procExecCommand.wait()

except Exception, e:
    #Write exception to error log       
    errorFile.write(str(e))     

errorFile.close()
outFile.close() 
```

我尝试将 shell 参数更改为 True 并设置 bufsize 参数 = -1 也没有运气。

我已经分析了运行此脚本和通过 bash 运行的内存，并且与 bash 相比，通过 Python 运行时，我发现内存使用量大幅增加。

我不确定 Python 到底在做什么来消耗比仅使用 bash 更多的内存，除非它与尝试将输出写入文件有关？bash 脚本只是将输出通过管道传输到一个文件。

我最初发现我的交换空间非常低，所以我增加了它，这最初有所帮助，但随着数据量的增长，我又开始耗尽内存。

那么我可以用 Python 做些什么来尝试更好地处理这些数据量，或者只是推荐更多内存和大量交换空间的情况。或者完全抛弃 Python。

系统详情：

*   Ubuntu 12.04
*   Python 2.7.3
*   我正在运行的工具是来自 samtools 的 mpileup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:44:47.677

问题可能是您使用的`wait()`方法（如在*procExecCommand.wait()*中）尝试将子进程运行到完成然后返回。尝试[这个问题](https://stackoverflow.com/q/1410849/127465)中使用的方法，例如`stdout.read()`在进程句柄上使用。通过这种方式，您可以定期清空管道、写入文件，并且不会堆积内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:48:13.620

你的过程产生什么样的输出，也许线索就在其中。

**警告：脚本不会终止，你必须杀死它。**

此示例设置按我的预期工作。

```
import subprocess

fobj = open("/home/tst//output","w")

subprocess.Popen("/home/tst//whileone",stdout=fobj).wait() 
```

而当一个

```
#!/bin/bash

let i=1
while [ 1 ]
do
 echo "We are in iteration $i"
 let i=$i+1
 usleep 10000
done 
```

# vb6 - 将数据从 listview 导出到 OpenOffice VB6

> ID：11524448
> 
> 赞同：0
> 
> 时间：2012-07-17T14:17:19.560
> 
> 标签：vb6

我有一个程序可以将 CSV 文件中的数据显示到 ListView 中。然后我有一个名为“报告”的按钮 - 当我单击此按钮时，我希望从 OpenOffice Calc 中的 ListView/CSV 文件中显示数据。

这是我的代码：

```
Private Sub cmdReports_Click()
Dim oSM As Object
Dim oDesk As Object
Dim oDoc As Object
Dim oSheet As Object
Dim i As Integer

'Instanciate OOo : this line is mandatory with VB for OOo API
Set oSM = CreateObject("com.sun.star.ServiceManage…
'Create the first and most important service
Set oDesk = oSM.CreateInstance("com.sun.star.frame.D…
'Create a new doc
Set oDoc = oDesk.loadComponentFromURL("private:fact… "_blank", _
0, arg())
'Get the first sheet in the doc
Set oSheet = oDoc.getSheets().getByIndex(0)

With oSheet
For i = 1 To ListView1.ListItems.Count
.cells(i, 1) = ListView1.ListItems(i).Text
.cells(i, 2) = ListView1.ListItems(i).SubItems(1)
.cells(i, 3) = ListView1.ListItems(i).SubItems(2)
.cells(i, 4) = ListView1.ListItems(i).SubItems(3)
Next
End With
End Sub 
```

目前，我的所有按钮都在给我运行时错误“438”对象不支持此属性或方法当我调试此行时突出显示：

```
.cells(i, 1) = ListView1.ListItems(i).Text 
```

此代码是为 Excel 编写的，但我对其进行了编辑，以便可以在 OpenOffice Calc 中显示。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:16:43.147

它的意思正是它所说的 - 该语句正在使用 Ole 自动化接口不支持的方法属性。第一个问题：您可以使用类型库吗（请参阅参考对话框 - 列表中是否有类似 OpenOffice Calc 的内容）？知道编译时可用的方法和属性要好得多 - 您可以使用 Microsoft Excel 做同样的事情。然后，您可以将变量声明为特定类型，而不是“作为对象”。

不知道 OpenOffice，我在 OpenOffice 上查找了文档，并找到了下一个最好的东西，Star Office。试试：[http](http://www.openoffice.org/api/basic/man/tutorial/tutorial.pdf) ://www.openoffice.org/api/basic/man/tutorial/tutorial.pdf 。有关电子表格的文档，请参见第 64 页第 4.4 节。对象模型看起来与 Office 不同，这可以解释您的问题。

看起来好像您需要使用 Sheet.getCellByPosition() 方法，而不是 Cells() 方法，例如

```
GetCell = oSheet.getCellByPosition (nColumn , nRow) 
```

# javascript - 在后台使用 javascript 播放声音

> ID：11524452
> 
> 赞同：2
> 
> 时间：2012-07-17T14:17:32.980
> 
> 标签：javascript, html, audio

> **可能重复：**
> [用 JavaScript 播放声音](https://stackoverflow.com/questions/3402859/playing-sound-with-javascript)

我正在为我的网站进行 javascript 聊天，当它有新消息并且聊天没有重点时，我需要播放声音，就像 Facebook 的聊天一样。问题是我不知道如何在后台使用 javascript 播放这个声音。你可以帮帮我吗？

编辑：没有 Flash 的跨浏览器解决方案会更好

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T14:30:20.303

您可以使用**[jQuery](http://jquery.com/)**，它的`append`功能与脚本一起使用；

创建一个元素（例如 - `<div>`）或使用现有元素，并给它一些 id（如`<div id="some_div">`）。然后试试下面的代码

```
$('#some_div').append('<embed id="embed_player" src="your_sound_file.wav" autostart="true" hidden="true"></embed>'); 
```

希望这可以帮助...`:)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:22:17.267

[快速搜索相关教程](http://google.com/search?q=html5+audio+tutorial)应该可以帮助您上路。如果您遇到任何问题，请随时询问这些具体问题，而不是广泛的主题。

* * *

> 是否可以在浏览器不渲染播放器的情况下使用此标签？

是的。只是不要添加`controls`属性。这就是它出现的原因，所以如果你把它排除在外，玩家就不会在那里。

# asp.net-mvc - web.config 转换不起作用

> ID：11524454
> 
> 赞同：0
> 
> 时间：2012-07-17T14:17:34.527
> 
> 标签：asp.net-mvc, web-config, transform, transformation

在 MVC 应用程序中，我有一个为我的开发环境设置的 web.config，并且我有一个需要插入新 WCF 服务端点的转换文件，但是它将它添加到错误的位置，所以我认为我错过了一些东西.

我已经减少了配置文件以仅显示需要的内容。

我有正常的 web.config 如下：

```
<services>
  <!-- Report Service -->
  <service name="Core.ReportDataHost">
    <endpoint name="ReportDataHost" address="..." binding="customBinding" contract="..."/>
  </service>

  <!-- Authentication Service -->
  <service name="Core.AuthenticationHost">
    <endpoint name="AuthenticationHost" address="..." binding="customBinding" contract="..."/>
  </service>

</services> 
```

然后我有如下转换文件：

```
<services>

  <service name="Core.AuthenticationHost">
    <endpoint xdt:Transform="Insert" address="" binding="customBinding" contract="..." />
  </service>

</services> 
```

我希望这会在“AuthenticationHost”服务中添加新端点，但它将它添加到第一个服务“ReportDataHost”中。

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:05:06.303

默认情况下，转换仅使用标签，而不使用属性，因此即使您的转换中有 name="Core.AuthenticationHost" ，它也会被忽略，并且仅使用它找到的第一个服务标签匹配服务标签。

向标签添加一个定位器，`<service>`以便它知道要使用哪个（而不是只使用第一个）。定位器是标签上的一个属性：`xdt:Locator="Match(attribute1,attribute2,...)"`。在这种情况下，您希望在`name`属性上进行匹配。

您更正的变换将如下所示：

```
<services>
  <service name="Core.AuthenticationHost" xdt:Locator="Match(name)">
    <endpoint xdt:Transform="Insert" address="" binding="customBinding" contract="..." />
  </service>
</services> 
```

更多信息可在[MSDN 的转换语法页面上找到](http://msdn.microsoft.com/en-us/library/dd465326.aspx)。

# mysql - MySQL 查询将一个值设置为 1，将所有其他值设置为 0

> ID：11524458
> 
> 赞同：1
> 
> 时间：2012-07-17T14:17:54.757
> 
> 标签：mysql

如果表单输入的结果（例如 $_POST['eventID'] 与数据库中的 eventID 匹配，则此查询旨在更新 inUse 变量，从而将该事件的 inUse 值更改为 1，而将所有其他值更改为零。

```
mysql_query("UPDATE events SET inUse=IF('$_POST['eventID']' = eventID, 1, 0)"); 
```

数据库需要一个整数，但是我很担心，因为我已经转储了 $_POST['eventID'] 的值，它显示为一个字符串。我试过使用 intval 和 int 无济于事。

还是我的查询语法有问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:22:51.643

尝试这个：

```
UPDATE events SET
inUse = ('$_POST['eventID']' = eventID); 
```

这假设它`inUse`是一个布尔值（在 mysql 中它被实现为`TINYINT`带有值的 a`1`或`0`，但无论如何，mysql 在布尔值/int 值之间转换就好了）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:26:38.427

我从 PHP 的查询类型猜测。

不管你的语法有什么问题（不是缺少括号吗？），真的不要在那里使用那个帖子。您是否尝试过将“'); DROP TABLE events”的值发送到您的 post 变量？如果没有，我相信其他人会！

如果该值是 int，请尝试

```
$num = (int)$_POST['eventID'];
mysql_query("UPDATE events SET inUse=($num = eventID), 1, 0"); 
```

# css - 左栏不显示

> ID：11524459
> 
> 赞同：0
> 
> 时间：2012-07-17T14:17:56.683
> 
> 标签：css, asp.net-mvc, asp.net-mvc-2

我想在我的 MVC 项目中使用这个[模板。](http://www.dynamicdrive.com/style/layouts/item/css-fixed-layout-21-fixed-fixed/)

但左列未显示在 index.aspx 中。感谢您帮助我找到错误。

网站.css

```
body{
    margin:0;
    padding:0;
    line-height: 1.5em;
    }

    b{font-size: 110%;}
    em{color: red;}

    #maincontainer{
    width: 840px; /*Width of main container*/
    margin: 0 auto; /*Center container on page*/
    }

    #topsection{
    background: #EAEAEA;
    height: 90px; /*Height of top section*/
    }

    #topsection h1{
    margin: 0;
    padding-top: 15px;
    }

    #contentwrapper{
    float: left;
    width: 100%;
    }

    #contentcolumn{
    margin-left: 200px; /*Set left margin to LeftColumnWidth*/
    }

    #leftcolumn{
    float: left;
    width: 200px; /*Width of left column*/
    background: #C8FC98;
    }

     #footer{
     clear: left;
     width: 100%;
     background: black;
     color: #FFF;
     text-align: center;
     padding: 4px 0;
     }

     #footer a{
     color: #FFFF80;
     } 
```

Site.Master

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
<!DOCTYPE html>
<html>
<head id="topsection" runat="server">
 <link href="<%=Url.Content("~/Content/Site.css")%>" rel="stylesheet" type="text/css" /> 
    <title>
    <asp:ContentPlaceHolder ID="TitleContent" runat="server" />
    </title>
     </head>
   <body>
    <asp:ContentPlaceHolder ID="pageHeadPlaceHolder" runat="server">
        <div id="pageHead">
        <p>Head</p>
        </div>
    </asp:ContentPlaceHolder>
        <div id="mainContainer">
            <asp:ContentPlaceHolder ID="leftColPlaceHolder" runat="server">
                <div id="leftcolumn">
                    <ul>
                        <li>Home</li>
                        <li>Contact Us</li>
                        <li>About Us</li>
                    </ul>
                    <div class="innertube"><b>Left Column: <em>200px</em></b></div>
                </div>
            </asp:ContentPlaceHolder>
            <asp:ContentPlaceHolder ID="MainContent" runat="server">
            <div id="contentwrapper">
                <div id="contentcolumn">
                    <p>
                        test</p>
                </div>
                </div>
            </asp:ContentPlaceHolder>
        </div>
      <asp:ContentPlaceHolder ID="pageFooterPlaceHolder" runat="server">
        <div id="footer">
        </div>
     </asp:ContentPlaceHolder>
    </body>
    </html> 
```

索引.aspx

```
 <%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master"   Inherits="System.Web.Mvc.ViewPage" %>

   <asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
          Home Page
   </asp:Content>

   <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
        <h2><%: ViewData["Message"] %></h2>
   <p>
            To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
   </p>
    </asp:Content>
    <asp:Content ID="Content3" ContentPlaceHolderID="leftColPlaceHolder" runat="server"></asp:Content> 
```

**更新的图像**

![图片已更新](../Images/68ee96b3bff4eb6c6425dd1c613cd29b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:01:49.793

你检查过 HTML 输出吗？如果左列代码不存在，那么它不是 CSS 问题。看起来您正在使用空白内容标签覆盖主文件中的左列代码。尝试从您的 index.aspx 中删除以下内容。

```
<asp:Content ID="Content3" ContentPlaceHolderID="leftColPlaceHolder" runat="server"></asp:Content> 
```

如果您打算替换主文件中的内容，则只需在 index.aspx 中声明它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:23:39.403

爱，

我在您的 Site.Master 中的任何地方都看不到 css 文件。尝试添加对它的引用，类似于（或您的特定 css 的路径可能是什么）：

```
<link href="<%=Url.Content("~/Content/Site.css")%>" rel="stylesheet" type="text/css" /> 
```

# json - 阻止对 json API 的不必要使用

> ID：11524461
> 
> 赞同：0
> 
> 时间：2012-07-17T14:18:00.973
> 
> 标签：json, security, blocking

我有一个网站，您可以在其中使用 ajax 从我们的服务器请求数据作为 json（仅在我们的网站上使用）。现在我发现人们开始使用我们的请求从我们的系统中获取数据。有没有办法阻止用户使用我们的公共 json API。我一直在思考的想法是：

*   某种校验和。
*   页面上必须与服务器端匹配的会话唯一 javascript 值
*   某种具有 1000 个不同有效值的滚动密码。

所有这些都不是 100% 安全的，但会使我们的数据更难使用。任何其他想法或解决方案都会很棒。

（您可以做的请求是查找和翻译邮政编码、电话号码、ssn 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:33:40.103

您可以使用与 Google 相同的[API 密钥身份验证](http://en.wikipedia.org/wiki/Application_programming_interface_key)方法来限制对其 API 的访问。

*   要求每个用户都必须拥有有效的 API 密钥才能请求数据。
*   当用户请求时，生成 API 密钥并将其存储在您的数据库中。

**链接：** [相关问题](https://stackoverflow.com/questions/2256305/how-does-google-maps-secure-their-api-key-how-to-make-something-similar)

这样，您可以监控 API 的使用情况，并对其施加使用限制。

正如@c69 所指出的，您还可以将生成的 API 密钥绑定到 API-user 的 domain 。然后，您可以检查引用 URL（`$_SERVER['HTTP_REFERER']`在 PHP 中），并拒绝请求，如果它不是来自 API 用户的域。

# c# - C# windows 服务无法创建文件。请帮我解决问题？

> ID：11524463
> 
> 赞同：0
> 
> 时间：2012-07-17T14:18:03.850
> 
> 标签：c#, .net, visual-studio-2010, windows-services, windows-xp

我对**.Net、C# 和 visual studio**很陌生。现在我想**使用 c# 开发 Windows 服务应用程序**。Windows 服务需要将一些数据写入某个文件。我正在使用**视觉工作室 2010**。我正在使用**windows xp**作为我的操作系统。我创建了一个 Windows service.its 安装程序等。

当我在非默认文件夹（C盘除外）以外的文件夹中安装Windows服务时，运行服务后它将创建文件并成功写入文本文件。

当我在默认位置安装服务时（安装时我无法默认路径）（请参考附图）

![在此处输入图像描述](../Images/6da1fc3f10f8874c31b04c1c99f454ca.png)

然后在安装之后我运行服务。但是文件没有创建并且没有抛出异常。以下是文件的编码片段。

字符串 logPath = AppDomain.CurrentDomain.BaseDirectory + "log\CastrolSdWindowsService_Log.txt";

```
fs = new FileStream(logPath, FileMode.Append, FileAccess.Write);
                fs.Write(bytes, 0, bytes.Length);
                fs.Flush(); 
```

我找不到为什么该文件没有在 C 盘中创建。请帮助我，欢迎大家提出你的想法。

很抱歉技术术语中的错误，因为我是 .net 和 c# 的新手。我不知道正确的术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:30:01.627

正如评论中所述，Program Files 目录将受到操作系统的保护，并且不是放置应用程序生成文件的理想位置。存储这些文件的最佳位置是应用程序数据文件夹。.net 框架中有一些辅助方法可以帮助您通过使用[Environment](http://msdn.microsoft.com/en-us/library/14tx8hby%28v=vs.90%29.aspx)类并使用[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder%28v=vs.90%29.aspx)枚举之一来动态定位文件夹来获取文件夹的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T19:24:48.227

您可以选择（如上所述）更改日志文件的路径并将它们移到受保护的程序文件文件夹之外，或者您可以更改 NTFS 权限以允许对要写入“程序文件”中的那些日志文件和文件夹进行 WRITE/MODIFY /你的应用程序”文件夹。

请注意，您的 Windows 服务应用程序没有以 SYSTEM 身份运行。它可能是 NT AUTHORITY\LOCAL SERVICE 或 NT AUTHORITY\NETWORK SERVICE 运行您的服务，然后运行进程资源管理器，打开“USER”列并检查它。

# python - python解析csv文件

> ID：11524467
> 
> 赞同：1
> 
> 时间：2012-07-17T14:18:15.597
> 
> 标签：python, string, parsing, casting, numbers

我正在解析一个 csv 文件，其中第一行是标题。我想根据日期对金额列求和，但收到一条错误消息。为了调试，我正在根据错误消息检查该列是否是数字以及它是否是字符串 - 两者都是。这可能是什么原因？

```
def parseDataFromFile(self,f):
    fh = open(f,'r')
    s = 0
    for line in fh:
        #parsing the line according to comma and stripping the '\n' char
        year,month,day,amount = line.strip('\n').split(',')

        #checking the header row, could check if was first row as well - would be faster
        if (amount == "Amount"): continue

        #just for the debug checks
        #here is the question

        if isinstance(amount,str):
            print "amount is a string"
            #continue
        if amount.isdigit:
            print "amount is a digit"

        #sum on the amount column
        s = s + amount 
```

输出：amount是一个字符串amount是一个数字amount是一个字符串amount是一个数字

错误：

```
s = s + amount 
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:21:08.653

你的问题是它`s`是一个整数，你将它初始化为`0`. 然后你尝试向它添加一个字符串。`amount`始终是一个字符串。您无需将类似数字的数据转换为实际数字，它始终是一个字符串。

如果您希望数量是一个数字，请使用：

```
s += float(amount) 
```

PS：您应该使用`csv`stdlib 中的模块来读取 CSV 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:21:42.130

```
if amount.isdigit:
    print "amount is a digit" 
```

将始终打印“金额是数字”，因为您没有调用该方法（应该是`if amount.isdigit():`）。

您可以确定通过从 CSV 文件中拆分一行获得的任何字段都是字符串，您需要先将其转换为 int：

```
s = s + int(amount) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:21:15.053

s 是一个 int，而 amount 是一个数字的字符串表示，所以更改`s = s + amount`为`s += int(amount)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:34:26.953

像？：（假设列标题是“年”、“月”、“日”、“金额”）

```
from collections import defaultdict
import csv

sum_by_ym = defaultdict(float)
with open('input_file.csv') as f:
    for row in csv.DictReader(f):
        sum_by_ym[(row['Year'], row['Month'])] += int(float['Amount'])

print sum_by_ym 
```

# python - 使用低级 rpy2 在 python 中创建 R data.frame

> ID：11524468
> 
> 赞同：4
> 
> 时间：2012-07-17T14:18:18.190
> 
> 标签：python, r, rpy2

我正在使用 rpy2 包为 python 带来一些 R 功能。我在 R 中使用的函数需要一个 data.frame 对象，通过使用 rlike.TaggedList 和 robjects.DataFrame 我能够完成这项工作。

但是，当与具有完全相同数据的完全相同的 R 函数进行比较时，我遇到了性能问题，这导致我尝试使用此处提到的 rpy2 低级接口 - [http://rpy.sourceforge.net/rpy2/ doc-2.3/html/performances.html](http://rpy.sourceforge.net/rpy2/doc-2.3/html/performances.html)

到目前为止，我已经尝试过：

1.  将 TaggedList 与 FloatSexpVector 对象而不是 numpy 数组和 DataFrame 对象一起使用。
2.  使用这样的字典转储 TaggedList 和 DataFrame 类：

    ```
    d = dict((var_name, var_sexp_vector) for ...)
    dataframe = robjects.r('data.frame')(**d) 
    ```

两者都没有让我有任何明显的加速。

我注意到 DataFrame 对象可以在它们的构造函数中获得一个 rinterface.SexpVector ，所以我想创建一个这样的命名向量，但我不知道如何输入名称（在 RI 中知道它的名称（vec） = c('a','b'...))。

我怎么做？还有其他方法吗？有没有一种简单的方法来分析 rpy 本身，所以我可以知道瓶颈在哪里？

**编辑：**

以下代码在较新的 rpy (2.2.3) 上似乎工作得很好（x4 更快）

```
data = ro.r('list')([ri.FloatSexpVector(x) for x in vectors])[0]
data.names = ri.StrSexpVector(vector_names) 
```

但是它不在版本 2.0.8（Windows 支持的最后一个版本）上，因为 R 似乎无法使用名称：“eval 中的错误（expr，envir，enclos）：找不到对象'y'”

想法？

**编辑#2：** 有人为windows（python 2.7）构建了一个rpy2.3二进制文件做得很好，提到的效果很好（我的代码几乎快x6）

链接：[https ://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32](https://bitbucket.org/breisfeld/rpy2_w32_fix/issue/1/binary-installer-for-win32)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:17:29.943

Python 可以比 R 快几倍（甚至是字节编译的 R），并且我设法使用 rpy2 比 R 更快地对 R 数据结构执行操作。共享相关的 R 和 rpy2 代码将有助于提出更具体的建议（并在需要时改进 rpy2）。

同时， SexpVector 可能不是您想要的；它只不过是所有 R 向量的抽象类（参见[rpy2.rinterface 的类图](http://rpy.sourceforge.net/rpy2/doc-dev/html/rinterface.html#class-diagram)）。`ListSexpVector`可能更合适：

```
import rpy2.rinterface as ri
ri.initr()
l = ri.ListSexpVector([ri.IntSexpVector((1,2,3)),
                       ri.StrSexpVector(("a","b","c")),]) 
```

一个重要的细节是 R 列表是递归数据结构，R 通过使用运算符“[[”（除了“[”）避免了 catch 22 类型的情况。Python 没有，我还没有（还没有？）将“[[”作为低级方法实现。

例如，Python 中的分析可以使用模块 stdlib 模块 cProfile 来完成。

# php - Android 为网站上的一个页面启动 Intent

> ID：11524469
> 
> 赞同：0
> 
> 时间：2012-07-17T14:18:19.510
> 
> 标签：php, android

我为我居住的城镇构建了一个小型移动网络应用程序，它聚合了大量信息并使其具有可读性。最近，在我的 android 手机浏览器上，当我转到某个页面时，它会询问我是要使用 Browser 还是 MX And​​roid Player 打开它。我查看了 Chrome 中的请求标头，但没有发现任何问题。我已经有人在 iphone 上对此进行了测试，但问题没有发生。有任何想法吗？

有问题的网站是[http://sligo.me](http://sligo.me)

页面抛出错误是[http://sligo.me/Events](http://sligo.me/Events)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:31:36.147

这与您的页面无关。它与 MX And​​roid Player 有关。Android 允许其应用注册要通过它们处理的 URL。这样，如果手机上安装了 Chrome 并且用户单击 URL，系统将询问它是否应该使用 Chrome 或浏览器打开 URL。用户现在可以选择默认应用或在每次单击 URL 时进行选择。

应用程序也可以仅注册某些 URL 部分。一个好的 Twitter 应用程序会在主机 Twitter 上注册所有 URL，然后在应用程序内显示该页面的内容。

我猜想 MX And​​roid Player 注册了一些 URL，并且[http://sligo.me/Events](http://sligo.me/Events)与该过滤器匹配。您可以尝试一下并尝试更改过滤器匹配的 URL 部分。有关此过滤的更多信息可以在有关[Intents 和 Intentfilters的文档中找到](http://developer.android.com/guide/components/intents-filters.html)

# java - 在 Java 中处理日期

> ID：11524471
> 
> 赞同：-2
> 
> 时间：2012-07-17T14:18:26.740
> 
> 标签：java

我需要处理日期，但我不确定如何在 Java 中进行处理，因为我以前从未这样做过。

我正在从 Excel 文件中提取日期，并且可以以代表日期的数据格式检索它们。

前任：

1.  2010 年 2 月 1 日
2.  2011 年 5 月 12 日
3.  2011 年 8 月 15 日
4.  2011 年 9 月 1 日
5.  2011 年 9 月 1 日

我所有的代码都与这个问题无关，但我正在设置一个 getter/setter 方法：

```
public Date getDate() {
    return date;
}

public void setDate(Date date) {
    this.date = date;
} 
```

所以我的问题是，当我从 Excel 中提取数据时以什么方式：

```
 temp.setDate((row.getCell(3).getDateCellValue()); 
```

我可以设置限制，使其仅检索 x 个月的数据。8、12等..从文件中显示的上个月/年开始，而不是一直追溯到2010年？如果需要，我可以提供更多详细信息。

编辑：这就是我现在拥有的：

```
 import java.util.Date;
    Date date;
   date = row.getCell(3).getDateCellValue(); 
```

它显示：Tue June 01 00:00:00

我不在乎星期二或 00:00:00，我只有一个完整的数据列表，我只想显示 x 个月。

编辑：我想通了。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:22:42.040

您必须使用 DateFormat.class 来解析单元格，或者使用日历来放置日月年

**编辑**

您也可以使用*Calendar.class*

```
final String[] tabDate = {"2/1/2010", "5/12/2011", "8/15/2011",
                           "9/1/2011", "9/1/2011"};
// Extract field's value
final Calendar c = Calendar.getInstance();

// Parse the list of stringDate
for (final String string : tabDate) {
    System.out.println("Input string: " + string);
    final String[] shortDate = string.split("/");

   // Build Calendar
    c.set(Integer.valueOf(shortDate[2]), Integer.valueOf(shortDate[0]),
        Integer.valueOf(shortDate[1]));

    // Extract date as you like
    System.out.format("%25s  : %d/%d/%d\t%s\n\n", c.getTime(),
        c.get(Calendar.MONTH), c.get(Calendar.DATE),
        c.get(Calendar.YEAR), c.getTimeInMillis());
} 
```

安慰 ：

```
Input string: 2/1/2010
Mon Mar 01 09:09:48 CET 2010  : 2/1/2010    1267430988109

Input string: 5/12/2011
Sun Jun 12 09:09:48 CEST 2011  : 5/12/2011  1307862588109

Input string: 8/15/2011
Thu Sep 15 09:09:48 CEST 2011  : 8/15/2011  1316070588109

Input string: 9/1/2011
Sat Oct 01 09:09:48 CEST 2011  : 9/1/2011   1317452988109

Input string: 9/1/2011
Sat Oct 01 09:09:48 CEST 2011  : 9/1/2011   1317452988109 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:27:56.313

这个问题很模糊，但如果您使用 Excel，我发现将文件另存为“filename.csv”非常有益。这种格式很容易使用，它是逗号分隔的，换行符是向下的。如果您定期检查月份，很容易确保您只倒退 x 个月。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:36:32.943

首先，您需要使用 SimpleDateFormat 类相应地解析日期。结果是一个日期对象。

```
SimpleDateFormat df = new SimpleDateFormat( "M/d/yyyy" );
Date date = df.parse(row.getCell(3).getDateCellValue()); 
```

然后：

```
Calendar cal = Calendar.getInstance(); 
```

将返回一个对象 ob 类型 Calendar，您可以在其中设置日期

```
cal.setTime(date); 
```

最后，您读取 Excel 文件的循环可以根据日历对象确定是否应包含/使用以下方法进一步处理日期：

```
int month = cal.get(Calendar.MONTH); // e.g. 11 for Nov
int year = cal.get(Calendar.YEAR); // e.g. 2011 
```

# python - 如何获取默认 ipython 异常处理程序捕获的异常对象？

> ID：11524475
> 
> 赞同：13
> 
> 时间：2012-07-17T14:18:38.673
> 
> 标签：python, exception-handling, ipython

假设我在 IPython 中以交互方式运行一些代码，它会产生一个未捕获的异常，例如：

```
In [2]: os.waitpid(1, os.WNOHANG)
---------------------------------------------------------------------------
OSError                                   Traceback (most recent call last)
<ipython-input-2-bacc7636b058> in <module>()
----> 1 os.waitpid(1, os.WNOHANG)

OSError: [Errno 10] No child processes 
```

此异常现在被默认的 IPython 异常处理程序拦截并产生错误消息。是否有可能以某种方式提取 IPython 捕获的异常对象？

我希望具有与以下相同的效果：

```
# Typing this into IPython prompt:
try:
    os.waitpid(1, os.WNOHANG)
except Exception, exc:
    pass
# (now I can interact with "exc" variable) 
```

但我想要没有这个`try/except`样板。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-17T14:24:05.907

我认为`sys.last_value`应该做的伎俩：

```
In [8]: 1/0
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)

/home/ubuntu/<ipython console> in <module>()

ZeroDivisionError: integer division or modulo by zero

In [11]: sys.last_value
Out[11]: ZeroDivisionError('integer division or modulo by zero',) 
```

如果您想在这些事情上获得更多乐趣，请查看[traceback 模块](http://docs.python.org/library/traceback.html)，但这在 ipython 中可能没有多大用处。

# django - Django用户认证错误

> ID：11524478
> 
> 赞同：1
> 
> 时间：2012-07-17T14:18:47.063
> 
> 标签：django, django-models, django-views, django-authentication

我正在使用以下代码登录，但后来当我导航`index.html`并尝试访问它时，`get_profile()`它说 id 未关联。但是当我打印以下变量时，两者都是错误的。我在这里做错了什么？

`EDIT`

```
def someotherview(request):
  logging.debug(request.user.is_authenticated()) #prints false
  logging.debug(request.user.is_active) #prints false 
```

登录方式是这样的

```
def logon(request):
  qd = get_request_type(request)
  try:
   uname = qd.__getitem__('username')
   pwd = qd.__getitem__('password')

  user = authenticate(username = uname, password = pwd)
  if user is not None:
     response_dict.update({'yes':1})
     logging.debug("labs_home1 ==================")
     return render_to_response('home/index.html', context_instance=RequestContext(request, {'response_dict':response_dict,'a':1}))
  else:
     response_dict.update({'yes':0})
     logging.debug("labs_home2 ==================")
     return render_to_response('registration/login.html', context_instance=RequestContext(request, {'response_dict':response_dict,'a':1}) 
```

也看看我的问题[django get_profile error](https://stackoverflow.com/questions/11523106/django-get-profile-error)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:31:00.397

`authenticate`仅验证用户名和密码是否正确并返回为该对找到的用户实例。要实际登录用户并使其在模板、会话等中可用，您需要调用[login](https://docs.djangoproject.com/en/dev/topics/auth/#how-to-log-a-user-in)

```
login(request, user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:26:58.963

简短回答：使用内置身份验证。不要试图写你自己的。[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)

*   您的代码完全被破坏了 - 在`login`视图中变量`uname`并且`pwd`未定义。请发布工作代码。
*   您似乎自己在进行身份验证 - 为什么不使用内置的身份验证方法？
*   看起来你的问题的一部分是你用变量定义了一个登录用户，`user`但它只存在于函数的范围内`logon`- 你的代码的其余部分正在检查`request.user`。这就是您需要使用内置身份验证方法的原因。

# javascript - 在使用 cmake 打包成 zip 之前缩小 CSS 和 Javascripts 文件

> ID：11524481
> 
> 赞同：1
> 
> 时间：2012-07-17T14:18:48.953
> 
> 标签：javascript, css, installation, cmake

我正在使用 CMake 构建和打包 C++ Web 应用程序。应用程序需要额外的 CSS 和 Javascript 文件。为了简化不同机器上的安装过程，我准备了一个 ZIP 文件并使用类似于以下规则的规则添加所需的文件。

```
# add javascript/CSS
install(DIRECTORY "${PROJECT_SOURCE_DIR}/css" DESTINATION "${THE_HTDOCS_DIR}"
    DIRECTORY_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)

# add images/icons
install(DIRECTORY "${PROJECT_SOURCE_DIR}/ico" DESTINATION "${THE_HTDOCS_DIR}"
    DIRECTORY_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE) 
```

将压缩器或缩小工具集成到 CMake/CPack 发布过程中的最佳方法是什么？例如，调用[YUICompressor](http://developer.yahoo.com/yui/compressor/css.html)来压缩 CSS/JS 文件会很好。在我的网络搜索过程中，我没有找到任何解决此问题的提示。所以欢迎任何提示。

使用 ant 或其他构建系统对我来说不是一个选项 - 我知道 ant 支持 YUICompressor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:57:54.327

我自己需要这个，并使用 CMake add_custom_command() 和 add_custom_target() 来调用 minifier。它会查找 yui-copmressor 二进制文件并在 CMAKE_BUILD_TYPE 不是“调试”时进行压缩，这样您在开发时会更轻松一些。

```
set(js_in_files
    foo.js
    bar.js
    baz.js
)

find_program(YUI_EXECUTABLE yui-compressor)
if(YUI_EXECUTABLE AND (NOT ${CMAKE_BUILD_TYPE} STREQUAL "Debug"))
    message(STATUS "JS files will be minified before install.")
    foreach(jsfile ${js_in_files})
        set(jsmin "${CMAKE_CURRENT_BINARY_DIR}/${jsfile}.min")
        add_custom_command(OUTPUT ${jsmin}
            COMMAND ${YUI_EXECUTABLE}
            ARGS "${CMAKE_CURRENT_SOURCE_DIR}/${jsfile}" -o "${jsmin}"
        )
        install(FILES ${jsmin}
            DESTINATION "${WEB_INSTALL_PATH}/cgi-bin/scripts/"
            RENAME ${jsfile}
        )
        set(js_out_files ${js_out_files} ${jsmin})
    endforeach(jsfile)
else()
    message(STATUS "JS files will be installed unmodified.")
    foreach(jsfile ${js_in_files})
        install(FILES ${jsfile}
            DESTINATION "${WEB_INSTALL_PATH}/cgi-bin/scripts/"
        )
        set(js_out_files ${js_out_files} ${jsfile})
    endforeach(jsfile)
endif()

add_custom_target(installjs ALL DEPENDS ${js_out_files}) 
```

确保调整安装命令的 DESTINATION。;-)

# iphone - NSString sizeWithFont，问题

> ID：11524492
> 
> 赞同：0
> 
> 时间：2012-07-17T14:19:15.333
> 
> 标签：iphone, objective-c, ios, ios5, ios4

如果我尝试找出字符串的像素宽度

```
CGSize sz = [@"Test text to hilight without new line for testing" sizeWithFont:CGTextLabel.font];

NSLog(NSStringFromCGSize(sz)); 
```

输出为：CoregraphicsDrawing[3306:f803] **{339, 21}**

如果我尝试用空格分隔字符串**@“”**并循环它以添加每个单词的宽度+每个单词后的空格宽度，总宽度是不同的
CoregraphicsDrawing[3306:f803] **351.000000**

***请检查我正在逐字计算宽度的代码：***

```
str = @"Test text to hilight without new line for testing";

    self.words = [NSMutableArray arrayWithArray:[str componentsSeparatedByString:@" "]];

    CGFloat pos = 0;
    [self.rects addObject:[NSValue valueWithCGPoint:CGPointMake(0, 0)]];
    for(int i = 0; i < [self.words count]; i++)
    {
        NSString *w = [self.words objectAtIndex:i];
        NSLog(w);
        CGSize sz = [w sizeWithFont:CGTextLabel.font];
        pos += sz.width;
        pos += [@" " sizeWithFont:CGTextLabel.font].width;

        if(i != [self.words count]-1)
        {

            [self.rects addObject:[NSValue valueWithCGPoint:CGPointMake(pos, 0)]];
        }
        else {
            NSLog(@"%f",pos); //here actual calculated width is printed. 
        }

    } 
```

如果有人可以提出解决方案，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T16:20:23.247

在做了一些测试之后，它看起来像`sizeWithFont:`只用一个空格调用，增加了额外的空间，并且没有将它视为字符之间的空格。这就是我尝试使用`systemFont`.

因此，每次使用`[@" " sizeWithFont:CGTextLabel.font].width;`时，您都不会获得字符之间空格的大小，但很可能还会在结尾处获得一些额外的位。我注意到这一点使用以下内容：

```
CGSize size1 = [@"Hello There" sizeWithFont:[UIFont systemFontOfSize:12]];
CGSize size2 = [@" " sizeWithFont:[UIFont systemFontOfSize:12]];
CGSize size3 = [@"Hello" sizeWithFont:[UIFont systemFontOfSize:12]];
CGSize size4 = [@"There" sizeWithFont:[UIFont systemFontOfSize:12]];

CGSize size5 = [@"Hello There Hello There" sizeWithFont:[UIFont systemFontOfSize:12]];

NSLog(NSStringFromCGSize(size1));
NSLog(NSStringFromCGSize(size2));
NSLog(NSStringFromCGSize(size3));
NSLog(NSStringFromCGSize(size4));
NSLog(NSStringFromCGSize(size5)); 
```

我从控制台返回了这个：

```
2012-07-17 10:57:40.513 TesterProject[62378:f803] {63, 15}
2012-07-17 10:57:40.514 TesterProject[62378:f803] {4, 15}
2012-07-17 10:57:40.514 TesterProject[62378:f803] {28, 15}
2012-07-17 10:57:40.514 TesterProject[62378:f803] {32, 15}
2012-07-17 10:57:40.514 TesterProject[62378:f803] {128, 15} 
```

因此，仅空间就返回了 4 个“像素”的宽度。“Hello”返回 28，“There”返回 32。所以你会认为它是 64，但我得到了 63。所以空间占用 3 而不是 4。同样，当我执行“Hello There Hello There”时" 你会认为我会得到 63*2 + 4 的空间 = 130。相反，我得到了 63*2 + 2。所以在这种情况下，大部分时间空间实际上只占用 2-3 个“像素”，但如果我`sizeWithFont:`只要求`@" "`我得到 4。

字体并不总是为每个空间创建完全相同数量的间隙，这可能就是您遇到问题的原因。通过我的测试，我得到了将 2、3 甚至 4 个“像素”添加到不同单词组合的空间。我认为只有当你有整个短语时才应该使用这个调用，尝试将它们加在一起太难了。是否有另一种方法来创建您正在寻找的功能？

编辑：我还发现，仅将两个词放在一起会给您带来与单独使用它们不同的结果：

```
CGSize size = [@"HelloThere" sizeWithFont:[UIFont systemFontOfSize:12]]; 
```

返回 59，而“Hello”返回 28，“There”返回 32。

# javascript - jquery对话框在IE中不显示滚动条

> ID：11524493
> 
> 赞同：0
> 
> 时间：2012-07-17T14:19:15.490
> 
> 标签：javascript, jquery, internet-explorer, dialog, scroll

我有一个 jquery 对话框的小问题。

它在所有浏览器中都可以正常工作，除了一个，我敢打赌你可以猜到是哪一个。

当它最初加载对话框时，它不显示滚动条，也不是代码中指定的大小。

当你去找到右下角来调整对话框的大小时，第二次单击并移动它，它会按照代码的大小调整，现在有滚动条。

```
 $( "#dialog-form" ).dialog({
    autoOpen: false,
    closeOnEscape: false,
    height: 100,
    maxHeight: 500,
    width: 800,     
    modal: true,
    buttons: {... 
```

另一个奇怪的事情是，如果我不将高度设置为 100，它会显示滚动条，但对话框的高度不会从 maxHeight 开始，而是在屏幕之外增长。非常感谢能够防止高度超过 maxHeight 并从一开始就显示滚动条的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:49:34.473

原来是愚蠢的怪癖模式才是问题所在。我投入

```
 <!DOCTYPE html> 
```

在我之前`<html>`，一切都像所有其他浏览器一样工作。

# vaadin - Vaadin Container.Filter 使用可变数量的条件

> ID：11524495
> 
> 赞同：1
> 
> 时间：2012-07-17T14:19:19.747
> 
> 标签：vaadin

刚刚使用以下代码实现了新的 Container.Filter：

```
Filter f  = 
new Or(new SimpleStringFilter(Columns.SEARCH.id(), "rpm-diastolic", true, false),  
new Or(new SimpleStringFilter(Columns.SEARCH.id(), "rpm-systolic", true, false)),
new Or(new SimpleStringFilter(Columns.SEARCH.id(), "rpm-weight", true, false))) ;
container.addContainerFilter(f); 
```

并且工作正常。

现在我想使用以下内容通过动态构建过滤器来构建我需要的尽可能多的标准：

```
List<String> filters;
for(String filter : filters) {
    Filter f  = new Or(new SimpleStringFilter(Columns.SEARCH.id(), filter, true, false) );
    container.addContainerFilter(f);
} 
```

我该怎么做才能使此代码不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:43:57.160

好的，

我可以通过简单地将数组传递给 Or 构造函数来做到这一点：

```
Filter[] filtersToAdd = new Filter[filters.size()];
for(String filterString : filters) {
filtersToAdd[i++] = 
    new Or(new SimpleStringFilter(Columns.SEARCH.id(), filterString, true, false));
}
Filter f = new Or(filtersToAdd);
container.addContainerFilter(f); 
```

# c++ - 指针传递的区别-C++

> ID：11524496
> 
> 赞同：1
> 
> 时间：2012-07-17T14:19:20.750
> 
> 标签：c++, pointers

以下代码有什么区别：-

```
 int a;
 int *p;
 p=&a;
 function(p); 
```

和

```
 int a;
 function(&a); 
```

我正在读一本书，有时他们使用第一个代码，有时使用另一个。虽然它不是一本好书（由当地作者撰写）。

两个代码会以相同的方式工作还是有什么不同？

在效率方面也有任何区别，这有那么重要吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:21:57.650

对于引用，对象必须已经存在才能引用它。至于指针，声明指针时对象不需要已经存在

例子：

```
int &i = 10;       //Invalid
const int &i = 10; //Valid 
```

还

您不能声明引用数组：

```
int &tab[] = {2,3};  //Invalid
int * tab[] = {2,3}; //Valid 
```

在实践中，引用多用作函数的参数和返回值；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:21:25.240

据我所知，编译器将引用实现为指针。所以性能上应该没有区别。但是引用更严格，可以保护你不犯错误。例如，您不能重新绑定引用或不能用它们执行算术运算

还有一些人更喜欢将指针传递给修改对象的函数。例如

```
void changeVal(int *p)
{
    *p = 10;
} 
```

他们说当你看到它时它更具可读性：

```
 changeVal(&var) 
```

比

```
changeVal(var); 
```

**编辑**

您可以将其`reference`视为它所指对象的另一个名称。因此，对对象所做的所有更改`reference`都将应用于该对象。这是一个例子：

```
void foo_copy(int a) //pass by copy
{
    a = 10; //changes copy
}

void foo(int &a) //bass by reference
{ 
     a = 10; //changes passed value
}

void foo(int *a) //pass an adress of a
{
    (*a) = 10; //change a value pointed by a
    a = nullptr; //change a (the pointer). value is not affected
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:33:09.960

在上述两种方法中，两者都使用指针，除了大小等于 sizeof(int *) 的内存将在堆栈上为“int *p”分配之外没有区别。

如果通过引用调用，[请参阅](https://stackoverflow.com/questions/5014056/call-by-reference-vs-pointer-argument)。看起来你是初学者和学习的东西，你会在类中使用复制构造函数时更多地了解引用传递及其使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:35:00.807

使用现代编译器编译时，这两个代码片段应该是等效的。额外的声明和赋值 ( `p=&a;`) 被优化掉了。

# forms - CakePHP - 自定义表单动作的最佳方式？

> ID：11524497
> 
> 赞同：0
> 
> 时间：2012-07-17T14:19:26.897
> 
> 标签：forms, cakephp, cakephp-2.2

我有一个使用搜索控制器/模型的搜索表单。

```
echo $this->Form->create('Search', array('action' => 'query', 'type' => 'get'));
 ...
echo $this->Form->end(); 
```

但默认情况下，表单提交到`'/searches/query'`. 如何获取搜索页面的 URL `/search/query`？

如果可能的话，我真的不想使用 .htaccess 重写，因为这看起来有点乱。希望有一个整洁的蛋糕方式来做到这一点。

我认为这可以通过 bootstrap.php 中的自定义 Inflector 规则来完成，但我不确定如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:40:56.220

只用路由器。在您的路线文件中，添加：

```
Router::connect('/search/:action/*', array('controller' => 'searches'));
Router::connect('/search/*', array('controller' => 'searches', 'action' => 'index')); 
```

[阅读本书中](http://book.cakephp.org/2.0/en/development/routing.html)有关路由器的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:25:22.627

有没有办法说：

```
echo $this->Form->create('Search', array('action' => 'search/query', 'type' => 'get')); 
```

然后为此设置路由器？

```
$this->Router->('search/query', array('controller' => 'searches', 'action' => 'query')); 
```

# android - 激活列表行和主片段之间的绘图指示器

> ID：11524499
> 
> 赞同：3
> 
> 时间：2012-07-17T14:19:38.557
> 
> 标签：android, android-layout, android-listview, android-fragments

我正在尝试模拟 gmail 平板电脑应用程序使用的 UI。当左侧列表视图中的项目处于“激活”状态时，我希望绘制一个箭头指示器，将列表行链接到右侧的主要内容片段。我所指的“箭头”在这张图片中被圈出：

[Gmail 应用截图](http://i.imgur.com/swiy2.png)

我通过对列表行使用背景可绘制对象来实现这一点，这是令人满意的；但是，我想使用分隔线来分隔列表和主要内容区域。所以我的问题是如何在不使用背景可绘制对象的情况下实现这一目标？我尝试将箭头指示器作为列表行的子项，并尝试将其绘制到行外 1 个像素以覆盖分隔线，但这不起作用。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T19:58:53.427

你的问题类似于这些：

[Android 片段之间的阴影分隔符](https://stackoverflow.com/questions/10670905/shadow-separator-between-android-fragments)

[ListView 行标记 ala GMail](https://stackoverflow.com/questions/6075235/listview-row-marker-ala-gmail)

阅读他们的答案，似乎最简单的方法是使用背景 9-patch 可绘制对象。

事实上，Gmail 应用程序使用 9-patch PNG 来实现这种效果。如果您查看 Gmail APK 的 res/drawable-hdpi 文件夹中的 PNG 文件，您可以自己查看它（您需要像 AirDroid 这样的工具来从您的设备获取 APK）。

# jquery - 使用 jQuery 更改背景图像不起作用

> ID：11524500
> 
> 赞同：1
> 
> 时间：2012-07-17T14:19:40.070
> 
> 标签：jquery, background-image

有人可以帮我理解为什么这段代码不起作用吗？

```
$('#quick-search-header.widget-title').css('background-image', 'url(dd_includes/images/icons/sliding-menu-arrow-right.gif)'); 
```

我通过 Firebug 看到 background-image 已完全从 中删除`#quick-search-header.widget-title`，但上面的新背景图像已添加到`element.style`. 谢谢。

HTML -

```
<div id="quick-search-header" class="widget-title">
    <p>Quick search results</p>
</div> 
```

CSS -

```
#quick-search-header.widget-title{
    background: #C60B46 url(dd_includes/images/icons/sliding-menu-arrow-down.gif) right 3px no-repeat;
} 
```

完整的 JS（标有错误代码）-

```
$(document).ready(function(){

    $('input#s').val('');

    $('#quick-search-header.widget-title').live('click', function(){

        if($('#quick-search-content').hasClass('visible')){

            $('#quick-search-header.widget-title').css('background-image', 'url(dd_includes/images/icons/sliding-menu-arrow-right.gif)'); /** Not working */
            $('#quick-search-content').removeClass('visible')
            $('#quick-search-content').slideUp('600');

        } else {

            $('#quick-search-header.widget-title').css('background-image', 'url(dd_includes/images/icons/sliding-menu-arrow-down.gif)'); /** Not working */
            $('#quick-search-content').addClass('visible')
            $('#quick-search-content').slideDown('600');

        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:25:04.620

通过 jQuery 中的函数设置任何值`css('attributename','attributevalue')`都会将该属性添加到元素的内联样式中。在检查器中，它经常被标记为**element.style**

如果您只需要通过类来执行此操作，那么您可以创建一个带有备用背景图像的单独类，并通过从元素中添加/删除类来切换类，这不会出现在**element.style**中，而只是切换类，它将显示在检查器中。

您甚至可以使用`toggleClass()`允许您打开或关闭特定或多个类的功能。

文档如下：

[切换类](http://api.jquery.com/toggleClass/)

[添加类](http://api.jquery.com/addClass/)

[移除类](http://api.jquery.com/removeClass/)

或者你甚至可以通过在元素上设置一个属性来做到这一点`.attr('class','newClassName');`

由你决定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T16:36:49.763

1.  确保相对路径正确。根据当前位置检查 10 次相对路径：javascript：

    > 窗口.位置.路径名

2.  尝试： **首先将css定义为：**

    > .XXX { 背景图片： url() }

**然后在javaScript中：**

> backgroundImage = "url('../images/image.png')"; //注意单引号
> 
> $(XXX).css("背景图片", backgroundImage);
> //或
> $(XXX).css({"background-image": backgroundImage});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:34:33.487

尝试;

```
$('#quick-search-header.widget-title').css({'background-image':'url(dd_includes/images/icons/sliding-menu-arrow-right.gif)'}); 
```

希望这可以帮助...`:)`

# java - 使用 java.util.Calendar 在 Java 中获得下周

> ID：11524506
> 
> 赞同：4
> 
> 时间：2012-07-17T14:19:59.390
> 
> 标签：java, calendar

我想要一个函数，它在给定一周和一年的情况下返回下一周和一年。它看起来像：

```
public static int[] getNextWeek(int year, int week) {
    Calendar c = Calendar.getInstance(); // I'm Locale.US and TimeZone "America/New_York"
    c.clear();
    c.set(Calendar.YEAR, year);
    c.set(Calendar.WEEK_OF_YEAR, week);

    c.add(Calendar.WEEK_OF_YEAR, 1);

    return new int[] {c.get(Calendar.YEAR), c.get(Calendar.WEEK_OF_YEAR)}
} 
```

这有时不适用于年份边界。这似乎取决于您调用它的日期以及您使用的参数！例如，如果我在 2012 年和第 52 周调用它，那么我希望结果是 2013 年和第 1 周。如果你今天调用它（2012 年 7 月 17 日星期二）它会起作用。如果您将星期几设置为昨天，则不会；并且在 2012 年第 1 周出现奇怪的结果。奇怪。到底是怎么回事？它似乎与星期几有关，因为如果用 SUNDAY 或 MONDAY（2012 年的最后两天）调用它就不起作用！如果我将星期几设置为一周的最后一天，该功能似乎可以工作；在调用 Calendar.add() 之前，我会：

```
 // Must set to last day of week; initially set to first day due to API
    c.set(Calendar.DAY_OF_WEEK, c.getFirstDayOfWeek()); // SUNDAY
    c.add(Calendar.DAY_OF_WEEK, 6); // Must roll forward not backwards 
```

如果我创建一个 getPreviousWeek 方法，似乎没有任何奇怪之处。这是 java.util.Calendar 错误吗？下次我想我会使用 Joda 时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:49:43.250

您是否考虑过 ISO8601 周算法认为一年中的第一周是该年至少有 4 天的这一事实？

因此，如果 1 月 1 日是星期四，那一周实际上被认为是上一年的第 52 周，而不是当年的第一周。

您可能至少要考虑 joda-time 进行这种计算，因为它可以正确处理 ISO 标准。

```
 LocalDate ld = new LocalDate();
    ld = ld.withWeekOfWeekyear(29);
    ld = ld.withWeekyear(2012);

    System.out.println(ld.getWeekOfWeekyear());
    System.out.println(ld.getWeekyear());

    // 29
    // 2012

    System.out.println(ld.plusWeeks(1).getWeekOfWeekyear());
    System.out.println(ld.plusWeeks(1).getWeekyear());
    // 30
    // 2012 
```

这将跨越年份界限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:26:07.923

只需做一个明确的检查，看看是否有翻转。

```
return new int[] {c.get(Calendar.WEEK_OF_YEAR) == 1 ? c.get(Calendar.YEAR) + 1 :
    c.get(Calendar.YEAR), c.get(Calendar.WEEK_OF_YEAR)}; 
```

据我所知，`WEEK_OF_YEAR`没有正确添加的原因是因为它不是`Calendar`like `SECOND`, `MINUTE`, `MONTH`, `DAY`, or的实际属性`YEAR`。它是一个派生属性，例如`WEEK_OF_MONTH`. 解决此问题的一种方法是使用`c.add(Calendar.DAY, 7)`恰好添加 7 天而不是递增`WEEK_OF_YEAR`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T18:59:33.840

在这一点上，我将假设这确实是一个错误。我在这里用 Oracle 填写了一个错误报告：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7197761](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7197761)

# google-chrome - 如何在自己的搜索引擎中使用 Chrome 即时搜索？

> ID：11524509
> 
> 赞同：3
> 
> 时间：2012-07-17T14:20:04.597
> 
> 标签：google-chrome, search-engine

是否可以将 Chrome 即时搜索功能用于非 Google 搜索？如果是这样，是否有人知道是否有任何文档向您展示如何在您自己的搜索引擎中使用即时搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:17:24.050

是的你可以。查看[此页面](http://dev.chromium.org/searchbox)，了解如何与多功能框交互。

有关预渲染器的信息，请参阅[this](https://developers.google.com/chrome/whitepapers/prerender)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-17T08:03:58.797

谷歌最近更新了 Chrome 浏览器。

现在可以在新设置下启用/停用。

**脚步**

1.  点击Chrome浏览器“...”
2.  选择设置
3.  转到“高级部分”
4.  转到“隐私和安全”
5.  转到“同步和 Google 服务”
6.  转到“其他 Google 服务”
7.  激活或停用“自动完成搜索和 URL”

万岁，您配置了 Chrome 浏览器的“即时搜索”行为

**PS** [浏览器配置截图](https://i.stack.imgur.com/xb2QY.jpg)

# javascript - 如何为特殊字符编写正确的xml

> ID：11524514
> 
> 赞同：0
> 
> 时间：2012-07-17T14:20:16.067
> 
> 标签：javascript, xml, svg

我正在尝试从使用特殊字符的字符串中编写正确的 svg。我正在为 svg 文档使用 UTF-8 编码。我正在处理 javascript 。字符串是这样的：

```
<glyph unicode="&#xa5;" horiz-adv-x="819" /> 
```

使用 DOMParser api 编写 xml 时，它会将 ¥ 转换为 ¥，这是不正确的 xml 并且浏览器会抛出 XML Parsing 错误。

这是我要转换为 SVG 文档的完整文本。

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"   "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
<svg xmlns="http://www.w3.org/2000/svg">
<metadata></metadata>
  <defs>
    <font id="DearestRegular" horiz-adv-x="2048" >
      <font-face units-per-em="2048" ascent="1638" descent="-410" />
      <glyph unicode="&#xa5;" horiz-adv-x="819" />
    </font>
 </defs>
</svg> 
```

使用 DOMParser 我得到如下输出：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"   "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
<svg xmlns="http://www.w3.org/2000/svg">
<metadata></metadata>
  <defs>
    <font id="DearestRegular" horiz-adv-x="2048" >
      <font-face units-per-em="2048" ascent="1638" descent="-410" />
      <glyph unicode="¥" horiz-adv-x="819" />
    </font>
 </defs>
</svg> 
```

这会在浏览器中引发 XML 解析错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:22:39.670

这不是不正确的 XML。

可能您的服务器在 HTTP 标头中发送了错误的[字符编码信息。](http://www.w3.org/International/questions/qa-what-is-encoding.en)

（由于 XML 声明没有另外说明，您应该使用 UTF-8）

# javascript - jQuery 仅悬停在图像内容上而不是 Alpha

> ID：11524517
> 
> 赞同：0
> 
> 时间：2012-07-17T14:20:29.640
> 
> 标签：javascript, jquery, jquery-ui, css

也许标题不是很好，但我的措辞有点麻烦......

基本上，是否有可能让 jQuery 的悬停只在具有 alpha 通道的 png 的实际内容上触发。

所以在下图中；

[http://i.imgur.com/3kO7v.png](http://i.imgur.com/3kO7v.png)

仅在矩形上触发，而不是在构成文档边界其余部分的 alpha 通道上触发...

我已经尝试过明显的 $('obj').hover(function(){stuff}) 但这也会在 alpha 通道上触发......

最终的实现将是更复杂的形状，而不仅仅是旋转的正方形，因此 css3 技巧已作为主要基础，但可以与备份/垫片一起使用，另外我需要支持 IE7 和 ipad、iphone、 iPod....

如果有 CSS2 解决方案，那也很合适。此外，任何关于这个问题的真正指导都非常受欢迎。我对此的备份将是有一个空的 div，显示块并将其放置在形状上，然后使用它。这显然不适用于较小的方形物体。

任何点击或提示都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:25:30.410

是的，这取决于元素的堆叠上下文。请记住，当您将焦点放在页面上的任何特定元素上时，您实际上将焦点放在同一堆叠上下文中的所有其他元素上。

所以你可以做的是阻止事件在堆栈中冒泡（如果你想要“悬停”的元素在堆栈中低于你想要防止悬停效果的元素），或者专门为 onhover 设置防止默认值堆叠上下文中所有元素的事件，除了您想要实际获得悬停效果的元素。

# javascript - 带有 json 数据解析的 Jquery 和 ajax

> ID：11524520
> 
> 赞同：0
> 
> 时间：2012-07-17T14:20:34.723
> 
> 标签：javascript, jquery, json, parsing

我的代码有什么问题，我无法在 resultTXT 中显示任何内容

txtfld 显示数组

```
[{
    "user_id": "2790",
    "freelancer_name": "",
    "order_id": "9121",
    "orderamount": "0.00",
    "payment_method": " ....... "
}] 
```

我希望用户 ID 在 resultTXT 中

```
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        $.post('userfind.php', function(data) {
            $("#txtfld").val(data);

            var json = data,
            obj = JSON.parse(json);
            alert(""+obj.user_id);
            $("#resultTXT").val(obj.user_id);
        },'json');
    }
};
ajaxRequest.open("POST", "userfind.php", true);
ajaxRequest.send(null); 
```

请帮助我应该改变什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:30:18.610

我认为这有一些问题。首先，你为什么要 POST`userfind.php`两次？你为什么使用香草 JS AJAX 和 jQuery AJAX？只用一个。

其次，`,'json'`in`$.post`表示 jQuery 会为你解析 JSON，你不需要`JSON.parse`.

第三，您的 JSON 是一个（对象）数组，因此您需要先获取数组元素，然后是`user_id`属性。

```
$.post('userfind.php', function(data) {
    $("#txtfld").val(data);  // data is an object,
                             // so this will just put [object Object] in the field,
                             // probably not what you want

    alert(data[0].user_id);  // data is an array of (one) object(s)
    $("#resultTXT").val(data[0].user_id);
},'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:25:34.893

我认为那是因为 json 是一个数组所以也许试试`obj[0].user_id`

# encryption - as2crypto 的使用示例

> ID：11524528
> 
> 赞同：2
> 
> 时间：2012-07-17T14:20:46.650
> 
> 标签：encryption, actionscript-2

我有一个 AS3 项目，我已经使用出色的[as3crypto](http://code.google.com/p/as3crypto/)库成功地添加了加密。我还有一个 AS2 项目，我想使用[AS2 版本的 as3crypto](http://www.yuniti.com/As2RSA)添加完全相同的加密。

不幸的是，AS2 没有优秀的`ByteArray`类，所以它并不容易上手。

我的基本流程是这样的：打开一个`Socket`连接，创建一个 ARC4 对象，在发送前用 ARC4 实例加密数据，在接收时用 ARC4 对象解密传入的数据。直截了当。

在 AS3 中，这很好用。我如何在 AS2 中做同样的事情？是否有我无法找到的使用 AS2 RSA 库的示例？任何人都知道应该如何在 AS2 中使用 ARC4 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:32:39.567

以下是示例：

*   [闪存黑客](http://examples.oreilly.com/9780596006457/)
*   [ActionScript 手册](http://examples.oreilly.com/9780596004903/)
*   [保护和混淆您的 Flash 文件](http://etutorials.org/Macromedia/Flash+hacks.+100+industrial-strength+tips+tools/Chapter+12.+Security/Hack+98+Protect+and+Obfuscate+Your+Flash+Files/)

# winforms - 使用集成安全性连接到 SQL Server

> ID：11524529
> 
> 赞同：0
> 
> 时间：2012-07-17T14:20:49.117
> 
> 标签：winforms, security, integrated

我想使用 Windows 集成安全性通过网络（或 VPN）连接到 SQL 服务器实例。

完成此任务需要哪些步骤？我正在使用 Winforms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:42:27.330

您需要从配置文件中提供连接字符串并使用它来创建 SQL 连接；集成安全性的典型示例可能是：

```
Persist Security Info=False;
User ID=frosty;Password=flakes;
Initial Catalog=milkjug;
Data Source=supermarket
Integrated Security=True;
provider=System.Data.SqlClient; 
```

其中“超市”是您的完全限定数据库名称（或 IP 地址）；这也可以包括端口号。

在您的代码中，如下所示的块：

```
SqlClient.SqlConnection myConnection = New SqlClient.SqlConnection();
myConnection.ConnectionString = myConnectionString;
myConnection.Open(); 
```

以上内容未经测试，来自记忆 - 应该可以解决问题或至少为您指明正确的方向。

# c# - foreach 循环中的委托方法始终绑定到最后一项

> ID：11524532
> 
> 赞同：1
> 
> 时间：2012-07-17T14:20:58.390
> 
> 标签：c#, winforms, events, delegates, foreach

> **可能重复：**
> [C#：在 lambda 表达式中使用 foreach 循环的迭代器变量 - 为什么会失败？](https://stackoverflow.com/questions/3168375/c-using-the-iterator-variable-of-foreach-loop-in-a-lambda-expression-why-fai)

我有一种将一些按钮添加到自定义控件的方法。我希望每个按钮都有一个事件处理程序，它将弹出一个消息框以显示有关该按钮的详细信息。

我在下面编写了代码，但是我添加的所有按钮都将显示...中最后一个按钮的详细信息。`List<Pin>`如何为每个按钮及其各自的`pin`对象添加 click 事件 hadnler？

```
 public void Populate(List<Pin> pins)
    {
        _pins = pins;

        var count = _pins.Count;
        var location = new Point(5, 5);

        foreach (var pin in _pins)
        {
            var button = new Button();
            button.Text = pin.Name;
            button.Name = "buttonPin_" + pin.Name;
            button.Click += delegate
            {
                MessageBox.Show(pin.Name + Environment.NewLine + pin.Batch);
            };
            button.Size = new Size(30, 30);
            button.Location = location;
            location.X += 30;

            if (location.X > Width) location = new Point(5, location.Y + 35);

            Controls.Add(button);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:24:28.793

```
button.Tag = pin;
button.Click += MyHandler;

void MyHandler(object sender, EventArgs e)
{
    var pin = (Pin)sender.Tag;
} 
```

或作为 lambda：

```
button.Tag = pin;
button.Click += (s, e) =>
{
    var pin = (Pin)s.Tag;
}; 
```

# c - 双倍的 Pow 实现

> ID：11524536
> 
> 赞同：4
> 
> 时间：2012-07-17T14:21:13.367
> 
> 标签：c, floating-point, direct3d, ogre3d, fpu

我正在开发一个用于运动控制的代码，但我遇到了 pow 函数的问题。我使用 VS2010 作为 IDE。

这是我的问题：我有：

```
 double p = 100.0000;
    double d = 1000.0000;
    t1 = pow((p/(8.0000*d),1.00/4.000); 
```

在评估最后一个函数时，我没有得到更好的近似结果。我得到了正确的 7 位十进制数字，随后的数字都是垃圾。我猜 pow 函数只会将任何输入变量转换为浮点数并进行计算。

1.  我对吗？
2.  如果是这样，是否有任何代码可以让我得到“启发”来重新实现 pow 以获得更好的精度？

编辑：已解决。

毕竟，我遇到了由 OGRE 3D 框架使用的 Direct3D 引起的 FPU 配置位问题。

如果使用 OGRE，在配置 GUI 上，只需设置“Floating-point mode=Consistent”。

如果使用原始 Direct3D，在调用 CreateDevice 时，请确保将“D3DCREATE_FPU_PRESERVE”标志传递给它。

原帖：

> 您可能正在使用将 FPU 的默认精度更改为单精度的库。然后，所有浮点运算，即使是双精度运算，实际上都将作为单精度运算执行。
> 
> 作为测试，您可以尝试调用 _controlfp( _CW_DEFAULT, 0xfffff ); （你需要包括）在执行计算之前，看看你是否得到正确的结果。这会将浮点控制字重置为默认值。请注意，它也会重置其他设置，这可能会导致问题。
> 
> 一个改变浮点精度的常用库是 Direct3D 9（可能还有其他版本）：默认情况下，它在创建设备时将 FPU 更改为单精度。如果使用它，请在创建设备时指定标志 D3DCREATE_FPU_PRESERVE，以防止其更改 FPU 精度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:45:13.373

您可能正在使用将 FPU 的默认精度更改为单精度的库。那么所有的浮点运算，即使是在`double`s 上，实际上都将作为单精度运算来执行。

作为测试，您可以在执行计算之前尝试调用`_controlfp( _CW_DEFAULT, 0xfffff );` （您需要包含`<float.h>`），看看您是否得到正确的结果。这会将浮点控制字重置为默认值。请注意，它也会重置其他设置，这可能会导致问题。

一个改变浮点精度的常用库是 Direct3D 9（可能还有其他版本）：默认情况下，它在创建设备时将 FPU 更改为单精度。如果使用它，请`D3DCREATE_FPU_PRESERVE`在创建设备时指定标志，以防止它更改 FPU 精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:31:02.980

你是如何确定你只得到 7 位数的精度的？您是否打印`t1`并指定了正确的输出格式？在我的机器上，使用 VS2010，以下代码：

```
int main()
{
    double p = 100.0000;
    double d = 1000.0000;
    double t1 = pow(p/(8.0000*d),1.00/4.000);

    printf("t1=%.15f\n", t1); // C
    std::cout << "t1=" << std::setprecision(15) << t1 << '\n'; // C++
} 
```

产生这个输出：

```
t1=0.334370152488211
t1=0.334370152488211 
```

# javascript - 目标：在使用 $(this) 之后

> ID：11524539
> 
> 赞同：0
> 
> 时间：2012-07-17T14:21:19.540
> 
> 标签：javascript, jquery, css, jquery-selectors, pseudo-element

> **可能的重复：**
> [使用 jQuery 操作 CSS :before 和 :after 伪元素](https://stackoverflow.com/questions/5041494/manipulating-css-before-and-after-pseudo-elements-using-jquery)

所以我有一个点击事件，在它被点击之后我想定位伪元素。

```
 $('.expanable h3').click(function(){
        $(this).....TARGET AFTER
    }); 
```

我想改变风格`:after`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:14:32.793

您可以像这样设置规则：

```
h3:after { content: "."; }

h3.emergency:after { content: "!"; } 
```

然后添加或删除类“emergency”会将`<h3>`文本的结尾更改为“.”。或者 ”！”。

CSS 中有一种`attr()`机制允许受影响元素的属性作为内容，但我不确定它是否得到足够好的支持以供依赖。

# javascript - jQuery - FadeToggle - 如果元素可见或不可见，则执行不同的操作

> ID：11524541
> 
> 赞同：1
> 
> 时间：2012-07-17T14:21:24.677
> 
> 标签：javascript, jquery

我有一个按钮，当你点击那个按钮时，我正在做一个 fadeToggle() 来显示或隐藏一个弹出窗口。

该弹出窗口出现在自动播放的 Flash 视频之上。

所以，我想做的是**当弹出窗口可见时，我想暂停视频。隐藏后，播放视频**。

我的视频播放器已经支持这些功能。所以这工作正常：

```
 videoPlayer.pause(); 
 videoPlayer.play() 
```

那么我的 FadeToggle() 会是什么样子？现在我有这个代码：

```
 $("#categorySlider").fadeToggle('fast', function() {
       var videoPlayer = document.getElementById("videoContainer");
       videoPlayer.pause();
  }); 
```

我在这里错过了 play() 部分，但我无法弄清楚添加它的语法？！如果fadeToggle 不适合使用，任何jquery 或javascript 都可以！

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:26:56.640

您可以使用 jquery`:visible`选择器来确定是否`#categorySlider`可见，并取决于暂停或播放视频。

```
$("#categorySlider").fadeToggle('fast', function() {
   var videoPlayer = document.getElementById("videoContainer");
   if ($("#categorySlider").is(":visible"))
        videoPlayer.pause();
   else
        videoPlayer.play(); 
}); 
```

# java - 计时器的值成字符串

> ID：11524545
> 
> 赞同：0
> 
> 时间：2012-07-17T14:21:40.217
> 
> 标签：java, android, string, chronometer

我正在尝试将计时器的值相乘，或者只是尝试将值设为字符串。

每次我尝试将其设为字符串并用于`toast.show()`查看它时，我的应用程序都会崩溃。我可以`EditText`显示我的价值，但我似乎无法让我的计时器工作。两个字符串`time`都`fin`让它崩溃。这是代码：

```
String hour = String.valueOf(mText.getText());
String time = String.valueOf(mChronometer.getBase() - stoppedMilliseconds);
int h = java.lang.Integer.parseInt(hour) / 60;
int t = java.lang.Integer.parseInt(time) * 1000 / 60;
int mm = h * t;
mon.setText(Integer.toString(mm));
String fin = "" + mm;

Toast.makeText(PoopActivity.this,
        "Money made: " + fin, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:36:53.270

有几个缺陷掩盖了此代码的功能。

*   `time`总是消极的。交换减法参数。
*   从小时转换`hour`为分钟时，请乘以而不是除以 60。
*   从毫秒转换`time`为分钟时，除而不是乘以 1000。
*   计算`mm`产生以分钟平方为单位的数量。这几乎没有任何意义。
*   使用`getApplicationContext`而不是`PoopActivity`. 某些应用程序`PoopActivity`可能正在运行。
*   没有异常处理。据我们所知，`mon`可能为 null 并`setText`抛出异常。将您的代码包装在 try - finally 块中：

`String fin = "";`

 ````
try
{
    // most of your code goes here

    mon.setText(Integer.toString(mm));
    String fin += mm;
}
catch (Exception e)
{
    // display the exception here if so inclined
}
finally
{
    Toast.makeText(PoopActivity.this,
    "Money made: " + fin, Toast.LENGTH_LONG).show();
} 
````  `但是，`fin`是一个包含负数的字符串就好了。`

# iphone - 将 CSV 文件附加到电子邮件目标的问题 - C

> ID：11524548
> 
> 赞同：0
> 
> 时间：2012-07-17T14:21:50.933
> 
> 标签：iphone, objective-c, ios, csv, mfmailcomposeviewcontroller

我正在使用以下 IBAction 将包含一些简单收据数据的 CSV 文件附加到电子邮件中，但是当电子邮件编辑器视图打开时，正文部分中会出现一个灰色文件，并且当我实际发送消息时消息发送时根本没有附件。

这是我的代码：

```
 - (IBAction)actionEmailComposer {
    NSLog(@"Receipts Count: %d", [receipts count]);
    //Create CSV File
    NSMutableString *csvString = [[NSMutableString alloc] init];
    [csvString appendString:@"Date,Business,Category,Paid By,Note, Number,Currency, Amount"];

    for (int i = 0; i < [receipts count]; i++){

        [csvString appendString: [[receipts objectAtIndex:i] receiptDate]];
        [csvString appendString: [[receipts objectAtIndex:i] business]];
        [csvString appendString: [[receipts objectAtIndex:i] category]];
        [csvString appendString: [[receipts objectAtIndex:i] paidBy]];
        [csvString appendString: [[receipts objectAtIndex:i] note]];
        [csvString appendString: [[receipts objectAtIndex:i] number]];
        [csvString appendString: [[receipts objectAtIndex:i] currency]];
        [csvString appendString: [[receipts objectAtIndex:i] amount]];

    }

    [csvString writeToFile:@"test.csv" atomically:YES encoding:NSUTF8StringEncoding error:NULL];

    if ([MFMailComposeViewController canSendMail]) {

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
//        NSString *recipient = [defaults objectForKey:@"reportsEmail"];
        NSString *recipient = @"testemail@live.com";
        NSArray *recipients = [NSArray arrayWithObjects:recipient, nil];

        MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
        mailViewController.mailComposeDelegate = self;
        [mailViewController setSubject:@"CSV Export"];
        [mailViewController setToRecipients:recipients];
        [mailViewController setMessageBody:@"" isHTML:NO];
        mailViewController.navigationBar.tintColor = [UIColor blackColor];
        NSData *myData = [NSData dataWithContentsOfFile:@"test.csv"];

        [mailViewController addAttachmentData:myData 
                                     mimeType:@"text/csv" 
                                     fileName:@"test"];

        [self presentModalViewController:mailViewController animated:YES];

    }
    //Display alert to the user
    else {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Can't Send Mail"
                                                            message:@"Device is unable to send email in its current state." 
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];

        [alertView show];
    }

} 
```

csvString 输出：

日期、业务、类别、付款人、备注、数字、货币、金额"2012 年 7 月 17 日","tho","Category 1","Cheque","lunch","726269","GBP","100.00 "

所以有现有的数据，它似乎没有正确附加，谁能解释这里发生了什么？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T06:31:06.917

试试这个代码

```
 arr_email=[[NSMutableArray alloc] initWithArray:[objDatabase lookupAllForSQL:@"select * from password"]];

    NSString *mystr=@"";
    NSString *str_type;
    NSString *str_name;
    NSString *str_user;
    NSString *str_pwd;
    NSString *str_url;
    NSString *str_descr;
    NSString *csvstr;

    csvstr=[NSString stringWithFormat:@"Account Type,Account Name,UserName/Card No,Password/Pin No, URL/Other Info,Description"];

    for (int i=0; i<[arr_email count]; i++) {
        NSMutableDictionary *dict = [arr_email objectAtIndex:i];

        str_type=[NSString stringWithFormat:@"%@",[dict objectForKey:@"AccountType"]];
        str_name=[NSString stringWithFormat:@"%@",[dict objectForKey:@"AccountName"]];
        str_user=[NSString stringWithFormat:@"%@",[dict objectForKey:@"UserName"]];
        str_pwd=[NSString stringWithFormat:@"%@",[dict objectForKey:@"Password"]];
        str_url=[NSString stringWithFormat:@"%@",[dict objectForKey:@"Url"]];
        str_descr=[NSString stringWithFormat:@"%@",[dict objectForKey:@"Description"]];

         mystr=[NSString stringWithFormat:@"%@ \n %@,%@,%@,%@,%@,%@",mystr,str_type,str_name,str_user,str_pwd,str_url,str_descr];

    }
    csvstr=[NSString stringWithFormat:@"%@ \n %@",csvstr,mystr];   
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];

    NSString *filename = [docDir stringByAppendingPathComponent:[NSString stringWithFormat:@"My Private Closet.csv"]];
    NSError *error = NULL;
    BOOL written = [csvstr writeToFile:filename atomically:YES encoding:NSUTF8StringEncoding error:&error];
    if (!written)
    NSLog(@"write failed, error=%@", error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:40:40.007

这是违反直觉的，但附加文件时的文件名不包含扩展名。因此，使用名为“test.csv”的文件名：

```
[mailViewController addAttachmentData:myData 
                             mimeType:@"text/csv" 
                             fileName:@"test"]; 
```

# node.js - Node.js + Mongoose / Mongo 和一个缩短的 _id 字段

> ID：11524549
> 
> 赞同：1
> 
> 时间：2012-07-17T14:21:52.230
> 
> 标签：node.js, mongodb, mongoose

我希望我的一个模型中的唯一 _id 字段相对较短：8 个字母/数字，而不是通常更长的 Mongo _id。像这样有一个简短的唯一索引有助于我的代码的其他地方，原因我将跳过这里。我已经成功创建了一个可以解决问题的模式（randomString 是一个生成给定长度字符串的函数）：

```
new Schema('Activities',  {
    '_id': { type: String, unique: true, 'default': function(){ return randomString(8); } },   
    // ... other definitions
} 
```

到目前为止效果很好，但我担心从 randomString 函数生成的重复 ID。有 36^8 个可能的 ID，所以现在这不是问题......但是随着可能的 ID 集填满，我担心插入命令由于重复 ID 而失败。

显然，我可以做一个额外的查询来检查在插入之前是否获取了 ID……但这让我在里面哭泣。

我确信有更好的方法可以做到这一点，但我没有在文档中看到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T17:15:44.650

Doodle 或 Die 正在使用这个 shortid 库[https://github.com/dylang/shortid ，似乎经过了实战测试。](https://github.com/dylang/shortid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:44:26.587

通过创建唯一索引，`_id`如果您尝试插入具有重复键的文档，则会出现错误。因此，将错误处理包装在您执行的任何插入操作中，以查找错误，然后生成另一个 ID 并在这种情况下重试插入。您可以在架构中添加一个[方法](http://mongoosejs.com/docs/methods-statics.html)来实现这种增强的保存以保持干净和干燥。

# silverlight - 导航到页面后首次单击不起作用

> ID：11524556
> 
> 赞同：0
> 
> 时间：2012-07-17T14:22:02.057
> 
> 标签：silverlight, navigation, focus

我有一个使用导航框架的 Silverlight 应用程序。该页面在导航后也永远不会立即聚焦。所以当我第一次点击一个按钮时，它什么都不做（除了聚焦页面）。只有导航后的第二次点击有效。我使用了一个子类`Page`并且已经钩住了这个`GotFocus`事件。它永远不会被调用。我还尝试将该`Focus`方法称为`Loaded`事件的处理程序，并将覆盖称为`OnNavigatedTo`. 没有任何效果。在`GotFocus`我实际单击视图中的某个位置之前，永远不会调用处理程序。我的客户不会接受这个。这是导航框架的错误，有解决方法吗？

谢谢你的帮助。

# java - 在浏览器中显示 android 应用程序图标

> ID：11524561
> 
> 赞同：0
> 
> 时间：2012-07-17T14:22:14.897
> 
> 标签：java, android

我正在使用以下代码检索 android 应用程序图标：

```
Drawable icon = icon = p.applicationInfo.loadIcon(context.getPackageManager()); 
```

其中 p 是`PackageInfo`类对象。

我已经为 android 实现了一个服务器，它处理客户端的请求和响应。在这里，当我从客户端发送一个`GET request`浏览器时，服务器会生成一个 html 页面。

问题是我需要在 html 页面上显示检索到的 android 安装的应用程序图标，我使用以下代码来执行此操作：

```
returnHtml += "<tr>";
returnHtml += "<td><img src=" + icon +" /></td>";
returnHtml += "<td>" + apps[0] + "</td>";
returnHtml +="<td>" + apps[1] + "</td>";
returnHtml += "<td>" + apps[2] + "</td>";
returnHtml +="<td>" + apps[3] + "</td>";
returnHtml +="</tr>"; 
```

基本上，我在这里生成一个带有相应应用程序信息的表格行，并在第一列中显示相应的应用程序图标。但它没有显示相应的应用程序图标，而是显示默认图标图像（上面带有问号的小图像）。

“icon”是一个“Android Drawable”类对象。我是否需要将检索到的图标转换为某种形式，或者我需要先将图标存储在某个文件夹中？

由于我的 html 页面存储在`assets`不可写的文件夹中，因此我无法在其中存储图标图像。是否有任何解决方案可以仅从可绘制对象直接显示图标图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:26:31.097

你在使用 fromHtml 吗？[http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String](http://developer.android.com/reference/android/text/Html.html#fromHtml(java.lang.String) , android.text.Html.ImageGetter, android.text.Html.TagHandler)

Html.ImageGetter 有一个参数，它允许您将 src 字符串解析为 Drawable。

# antlr - ANTLR 词法分析器子串

> ID：11524563
> 
> 赞同：1
> 
> 时间：2012-07-17T14:22:16.560
> 
> 标签：antlr, lexer

有没有一种定义 Lexer 规则的方法，例如：

```
DESCRIPTOR :   'INIT'(.)*'END'; 
```

那么DESCRIPTOR返回INIT和END这两个标签之间的内容呢？

我想我可以使用返回值，例如：

```
DESCRIPTOR returns [String content]
@init {
   content="";
}: 'INIT'(.)*'END'; 
```

但我不明白如何获得这样的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:31:08.077

请注意，词法分析器规则（以大写开头的规则）不能有`returns`子句，只有解析器规则可以。

但是规则：

```
DESCRIPTOR :   'INIT' (.)* 'END'; 
```

工作得很好。默认情况下，ANTLR 不情愿地（不情愿地）匹配`.*`，`.+`因此上面的规则匹配 "INIT" 后跟零个或多个字符，直到第一个`"END"`.

## 编辑

啊，你想从令牌中去掉`"INIT"`and 。`"END"`你可以这样做：

```
DESCRIPTOR 
 : 'INIT' .* 'END' {setText($text.substring(4, $text.length() - 3));}
 ; 
```

where`$text`是简写`getText()`（即标记匹配的整个字符串）。

# mercurial - Mercurial：移动书签而不修改文件？

> ID：11524564
> 
> 赞同：3
> 
> 时间：2012-07-17T14:22:24.593
> 
> 标签：mercurial

是否可以在不提交任何文件更改的情况下将书签从一个头移动到另一个头？我试过了：

```
hg update <destination-head>
hg bookmark bookmark-to-move -f
hg commit 
```

但是 Mercurial 抱怨`nothing changed`，当我尝试时，`hg push -f`我得到了`no changes found`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T18:50:23.330

您需要使用`-B`标志来`hg push`使其移动书签。

如果书签已经导出（在源和目标中都存在），那么一个简单`hg push`的将在目标中向前移动书签。在您的情况下，本地书签不是远程书签的后代，因此`hg push`单独不会移动它。

使用

```
hg push -B bookmark-to-move 
```

将工作并根据需要移动远程书签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-02T01:47:28.730

你也可以运行

```
hg bookmark -r . yourbookmark
hg update yourbookmark 
```

# java - 如果代码正在被调试，你能在 Java 中检测到吗？

> ID：11524566
> 
> 赞同：9
> 
> 时间：2012-07-17T14:22:34.113
> 
> 标签：java, debugging

> **可能重复：**
> [如何确定是否启用了“调试模式”](https://stackoverflow.com/questions/3776204/how-to-find-out-if-debug-mode-is-enabled)

来自 C#，我无法相信 Java 只有在调试程序时才能执行代码。不知何故，Log4J 似乎能够做到这一点。有谁知道这种可能性？我在想这样的事情：

```
#if DEBUG
    executedCode();
#endif 
```

或者是这样的：

```
if (Java.isDebugging())
    executeCode(); 
```

想法？

编辑：感谢 Matt Ball，[这个](https://stackoverflow.com/questions/3776204/how-to-find-out-if-debug-mode-is-enabled)可能重复的代码可以工作：

```
public static boolean debugging = java.lang.management.ManagementFactory.getRuntimeMXBean().
        getInputArguments().toString().indexOf("-agentlib:jdwp") > 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:35:38.903

我认为您将程序的*调试版本*与在调试器下运行（除非 C# 相当奇怪）混为一谈。

许多系统 - 包括许多 C/C++ 构建环境，我希望 C#，考虑到 Microsoft 历来设计 Visual Studio 构建过程的方式 - 有两种不同类型的构建可以执行：

*   发布版本，只有信息/错误/警告日志，没有调试符号，额外的优化等。
*   调试构建，启用额外的日志记录，调试符号，可能调整优化。

您在开发和调试程序时使用调试版本，并为最终的 QA 和发布发布版本。然而，调试版本独立于在调试器下运行——它们是普通程序，如果你运行它们，运行仍然会输出它们额外的日志信息。这可能非常有用。

在调试器下运行它们是完全正交的。您可以在调试器下运行发布版本（尽管缺少调试符号，它可能不是很有用）。事实上，我会提出您不希望代码根据您是否在调试器下运行而更改 - 这使得调试在应用程序中实际运行的代码变得相当困难。

与 C、C++ 和 C# 不同，Java 没有编译时条件的功能，因此程序中的所有内容都已启用。您通常通过一种非常快速的方法来检查是否要发出调试消息，并在没有发出的情况下做尽可能少的工作来处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:30:20.757

C仅在调试时才执行代码，您显示的是条件编译指令，仅在标志值为true时才编译代码。正在运行的代码不知道它何时被调试。与 Log4j 类似，它从其配置中读取要使用的级别，它不知道何时调试。

条件编译标志被故意排除在 Java 之外，他们想要避免复杂性。C# 有不同的哲学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:33:06.280

您可以按照描述使用全局标志进行操作。虽然它应该注意它不会自动检测，但您必须在开始调试之前自己更改标志。

```
public class Globals
{
    public static final boolean debugFlag = false;
} 
```

之后...

```
if (Globals.debugFlag){...} 
```

仅当您想在调试时执行功能代码时才真正需要这样做。这也是一种蛮力解决方案，因为您必须在任何地方打开它才能在任何地方打开它。如果您需要更多粒度，您可以在要使用成员标志调试的特定类中执行类似的操作。如果您想要的只是在调试块内记录，请参阅 Peter 关于记录库的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:27:14.953

也许您正在考虑与使用调试器不同的调试日志记录。

您会发现的问题是，Java 有六个以上广泛用于日志记录的库。

有内置的记录器。

[http://docs.oracle.com/javase/1.4.2/docs/guide/util/logging/overview.html](http://docs.oracle.com/javase/1.4.2/docs/guide/util/logging/overview.html)

Log4j 应用广泛，slf4j 和 Logback 也很流行。

甚至还有用于抽象出您实际使用的记录器的库，例如公共日志记录。

# eclipse - 自动化插件的部署过程

> ID：11524573
> 
> 赞同：0
> 
> 时间：2012-07-17T14:22:51.833
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我有一个 Eclipse 插件，当我部署它时，我使用一个功能项目然后通过向导导出以获取 zip 文件以安装在任何基于 Eclipse 的应用程序中。

我怎样才能自动化呢？

我希望整个过程自动运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:56:21.167

使用[PDE Build 的东西](http://www.eclipse.org/articles/Article-PDE-Automation/automation.html)，另请参阅[文档](http://www.eclipse.org/articles/Article-PDE-Automation/automation.html)。

# ios - ACDOAuthSigner 连接出现意外错误：错误域 = XPCObjectsErrorDomain 代码 = 2

> ID：11524580
> 
> 赞同：3
> 
> 时间：2012-07-17T14:23:01.477
> 
> 标签：ios, testing

有人在 iOS 中看到过这个问题吗？这与您的应用在后台时从设置应用中删除 Twitter 帐户有关。我的应用程序需要通过 twitter 登录，我通过阅读在帐户商店中注册的所有 twitter 帐户在表格中显示用户帐户列表。一旦我使用其中一个帐户成功登录应用程序，我会转到设置应用程序，删除我在我的应用程序中登录的 Twitter 帐户。我回到我的应用程序，它崩溃了。这是苹果代码中的错误吗？

谢谢

# asp.net - 将服务层转移到业务层时如何处理枚举？

> ID：11524581
> 
> 赞同：0
> 
> 时间：2012-07-17T14:23:04.333
> 
> 标签：asp.net, wcf, entity-framework, enums

我在我的服务层中使用枚举。如果我设置枚举的值，反之亦然，我不会设置它的值，而不是它给我一个错误错误：

```
The underlying connection was closed: The connection was closed unexpectedly. 
```

我在 DataContract 类中使用了枚举，它将在数据库操作时使用。我正在使用 WCF 服务通过数据模型与数据库连接。在某些方法中我使用的是枚举，但在某些方法中我不是。数据合同类：

```
[DataMember]
public Enums.SearchType SearchType { get; set; } 
```

枚举声明：

```
 public enum SearchType
    {
      Search = 'S',

      Export = 'E',

      Undefined = 0
    } 
```

那么在这种情况下我该怎么办？如果有人对此有任何想法，请帮助我...

提前致谢…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:25:22.377

确保您的枚举类型具有默认值 (0)

```
public SearchType
{
   Undefined = 0,
   ...
} 
```

枚举是 Int32（除非另有说明）。default(Int32) 为 0。default(Enums.SearchType) 也将为 0。如果枚举中未定义 0，则数据合约反序列化将失败。

# asp.net - System.Security.SecurityException？

> ID：11524582
> 
> 赞同：13
> 
> 时间：2012-07-17T14:23:09.963
> 
> 标签：asp.net, .net, iis-7

**说明**：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

**异常详细信息**：System.Security.SecurityException：请求“System.Security.Permissions.FileIOPermission，mscorlib，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”类型的权限失败。

我的代码在我的本地服务器上正常运行，将其上传到服务器时会产生问题。

已经完成了以下代码，但它对我不起作用：

样品 1：

```
<system.web>
  <securityPolicy>
    <trustLevel name="Full" policyFile="internal"/>
  </securityPolicy>
</system.web> 
```

样品 2：

```
<location allowOverride="false">
  <system.web>
    <securityPolicy>
      <trustLevel name="Full" policyFile="internal" />
      <trustLevel name="High" policyFile="web_hightrust.config" />
      <trustLevel name="Medium" policyFile="web_mediumtrust.config" />
      <trustLevel name="Low"  policyFile="web_lowtrust.config" />
      <trustLevel name="Minimal" policyFile="web_minimaltrust.config"/>
    </securityPolicy>
  </system.web>
</location> 
```

样品 3：

```
<system.web>
    <trust level="Full" originUrl="" />
</system.web> 
```

我无法访问 IIS 我只有 FTP 详细信息来上传文件。请建议我选择从 webconfig 文件中解决它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-28T04:35:24.423

您在示例三中使用的方法与我的解决方案类似，但我没有添加您拥有的附加属性。试试这个简单的方法。

```
 <system.web>
    <trust level="Full"/>
  </system.web> 
```

这来自我阅读的[MSDN 帖子。](http://social.msdn.microsoft.com/Forums/vstudio/en-US/20decf81-c9a4-40de-a074-e354077be643/error-systemsecuritysecurityexception-request-for-the-permission-of-type?forum=clr&prof=required)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:29:42.380

*注意：如果您使用的是共享主机，它们通常有一个 Web 界面来允许对文件进行读/写访问。*

我不推荐，但您可以模拟特定帐户：

```
<system.web>
    <identity impersonate="true" username="user" password="pass" />
</system.web> 
```

否则，请确保您已授予您尝试访问`Identity`应用程序池中正在使用的文件的适当权限。

[指定应用程序池的标识 (IIS 7)](http://technet.microsoft.com/en-us/library/cc771170%28WS.10%29.aspx)

# c# - 无法在局部视图中使用扩展方法

> ID：11524585
> 
> 赞同：6
> 
> 时间：2012-07-17T14:23:18.357
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试在部分视图中使用字符串扩展方法。我收到以下错误：

> “字符串”不包含“TruncateAtCharacter”的定义

这是扩展方法：

```
namespace PCCMS.Core.Libraries {
    public static class Extensions {
        public static string TruncateAtCharacter(this string input, int length) {
            if (String.IsNullOrEmpty(input) || input.Length < length)
                return input;

            return string.Format("{0}...", input.Substring(0, length).Trim());
        }
    }
} 
```

根据[这个先前的问题](https://stackoverflow.com/questions/1115834/how-do-i-use-an-extension-method-in-an-asp-net-mvc-view)，我需要将命名空间添加到 web.config，但是我已经这样做了，我仍然收到相同的错误消息。奇怪的是，我确实得到了扩展方法的智能感知？

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="PCCMS.Core.Libraries.ClientWebViewPage">
        <namespaces>
            <add namespace="System.Web.Mvc" />
            <!-- Other namespaces... -->
            <add namespace="PCCMS.Core.Libraries" />
        </namespaces>
    </pages>
</system.web.webPages.razor> 
```

谁能解释这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:37:46.727

如果命名空间声明位于根视图目录 web.config 的 system.web.webPages.razor/namespaces 元素中，这应该可以工作。如果失败，请尝试在视图顶部使用显式 @using 语句，而不使用任何 web.config 语句。它“应该”工作。

PS那是ReSharper智能感知还是VS？ReSharper 明确告诉我，如果 web.config 条目不在范围内，则需要 @using。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:57:32.893

是在 VS 调试器中运行，还是从测试或生产系统中运行时发生错误？确保包含扩展的模块已正确安装（并正确更新）。此外，尝试从命令提示符运行“iisreset”。

# android - 通过 Python 从 Android 访问 LogCat

> ID：11524586
> 
> 赞同：5
> 
> 时间：2012-07-17T14:23:23.367
> 
> 标签：android, python, events, logcat, android-logcat

是否可以在 python 中读取通过 LogCat 发送的信息？

我有一个用java编写的程序。它发送的每个并条框标签：“Fps：”消息：数字

我希望这条消息触发我可以在我的python脚本中捕获的事件，以便我可以绘制一个fps-meter。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T14:36:43.983

看看[subprocess](http://docs.python.org/library/subprocess.html)。以下代码改编自[Stefaan Lippens](http://stefaanlippens.net/python-asynchronous-subprocess-pipe-reading)

```
import Queue
import subprocess
import threading

class AsynchronousFileReader(threading.Thread):
    '''
    Helper class to implement asynchronous reading of a file
    in a separate thread. Pushes read lines on a queue to
    be consumed in another thread.
    '''

    def __init__(self, fd, queue):
        assert isinstance(queue, Queue.Queue)
        assert callable(fd.readline)
        threading.Thread.__init__(self)
        self._fd = fd
        self._queue = queue

    def run(self):
        '''The body of the tread: read lines and put them on the queue.'''
        for line in iter(self._fd.readline, ''):
            self._queue.put(line)

    def eof(self):
        '''Check whether there is no more content to expect.'''
        return not self.is_alive() and self._queue.empty()

# You'll need to add any command line arguments here.
process = subprocess.Popen(["logcat"], stdout=subprocess.PIPE)

# Launch the asynchronous readers of the process' stdout.
stdout_queue = Queue.Queue()
stdout_reader = AsynchronousFileReader(process.stdout, stdout_queue)
stdout_reader.start()

# Check the queues if we received some output (until there is nothing more to get).
while not stdout_reader.eof():
    while not stdout_queue.empty():
        line = stdout_queue.get()
        if is_fps_line(line):
            update_fps(line) 
```

当然，您需要自己编写`is_fps_line`and`update_fps`函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T14:28:15.383

我会重定向`adb logcat`到你的 python 脚本。这看起来像：

```
$ adb logcat | python yourscript.py 
```

现在，您可以从[sys.stdin](http://docs.python.org/library/sys.html#sys.stdin)上的 logcat 读取并根据需要对其进行解析。

# java - 遍历 Swing DOM 的最佳方法是什么？

> ID：11524587
> 
> 赞同：0
> 
> 时间：2012-07-17T14:23:26.737
> 
> 标签：java, javascript, html, swing, dom

在浏览器中，如果我使用的是 javascript，那么遍历 DOM 是相当直接的。从上到下解包只是一系列调用，由于 id# 标签，查找单个元素很容易。

Swing 组件具有类似于 HTML 的树状结构。遍历该结构以查找其中的对象的最佳方法是什么？或者我应该坚持为我关心的对象创建本地字段引用？

假设您有一个包含数据的用户界面，以及一些有兴趣查询这些组件以了解其状态的代码，您将如何管理在 Swing DOM 中“查找”这些组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:01:23.627

HTML DOM 是一种树数据结构，它不提供太多行为，并且使用不受您控制的节点类型。

组件的 Swing 树是丰富对象的树，包含您创建的类型的对象，并且应该提供您需要的行为。您应该将 OO 原则应用于这棵树的元素（面板等）：封装、demeter 法则、组合等。

您不必遍历 Swing 组件树来找到您想要的组件。这将是设计不佳和缺乏封装的标志。树的元素应该协作、相互引用、调用适当的方法来完成它们的工作。

# php - php下载提示打开但没有内容正在下载

> ID：11524588
> 
> 赞同：-2
> 
> 时间：2012-07-17T14:23:29.227
> 
> 标签：php, download

我的网站上有一个文件（mp3 语音文件）下载功能。当用户尝试下载文件时，对于某些用户来说它工作正常。对于其他人，它只是打开了浏览器下载窗口，并且没有下载任何内容。半小时后显示为 0%。任何人都可以提出解决方案。

该网站是用PHP开发的。用户来自美国。这会由于任何防火墙而发生吗？

下面是下载文件的代码

```
header("Cache-Control: cache, must-revalidate");
header("Pragma: public");

header('Content-Type: application/force-download');
header('Content-Disposition: attachment; filename="' . $originalFileName . '"');
header('Content-Length: '.$fileSize);

//open the file
$fp = fopen($filePath, 'rb');
//seek to start of missing part
fseek($fp, $seek_start);

//start buffered download
while(!feof($fp))
{
    //reset time limit for big files
    set_time_limit(0);
    print(fread($fp, 1024*8));
    flush();
    ob_flush();
    session_write_close();
}

fclose($fp); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T15:01:49.573

您可以在循环`session_write_close()`之外编写。`while`

我认为如果您一次又一次地关闭会话，那么它将无法正常工作。

# javascript - 选择 div 标签内的文本区域

> ID：11524599
> 
> 赞同：0
> 
> 时间：2012-07-17T14:23:42.460
> 
> 标签：javascript, jquery, html

感觉就像我经常来这里问问题一样，但我又一次被困住了。我正在尝试选择一个 textarea 并允许自己在另一个 textarea 中编辑文本，它使用文本框可以正常工作，但不能使用 textarea。每次单击 div 容器时，在查找 textarea 时都会得到未定义的结果。下面是代码。

jQuery

```
 $(".textAreaContainer").live('click','div', function(){
        var divID = this.id;
        if ( divID !== "" ){

            var lastChar = divID.substr(divID.length - 1);
            var t = $('#' + divID ).find(':input');
            alert(t.attr('id'));

            t = t.clone(false);               
            t.attr('data-related-field-id', t.attr('id'));              
            t.attr('id', t.attr('id') + '_Add');
            t.attr('data-add-field', 'true');

            var text = document.getElementById(divID).innerHTML;
            //var textboxId = $('div.textAreaContainer').find('input[type="textArea"]')[lastChar].id;
            $('div#placeholder input[type="button"]').hide();
            var text = "<p>Please fill out what " + t.attr('id') +" Textarea shall contain</p>";

            if ( $('#' + t.attr('id')).length == 0 ) {
                $('div#placeholder').html(t);
                $('div#placeholder').prepend(text);
            }
        }
        else{

        }
    }); 
```

t.attr('id') 应该返回 textbox1（或类似的），但只是返回未定义。

我已经尝试了 .find(':textarea'),.find('textarea'),.find(text,textArea),.find(':input') 以及我通过谷歌找到的很多其他人，但所有他们返回未定义，我不知道为什么。可以在此处找到演示，[http://jsfiddle.net/xYwaw/](http://jsfiddle.net/xYwaw/)。在此先感谢您的任何帮助，不胜感激。

编辑：下面是我正在使用的一个非常相似的示例的代码。这就是我想做的，但使用文本框而不是文本区域。

```
 $('#textAdd').live('click',function() {
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "Textbox " + textBoxCounter + " <br><div id='container" + counter + "' class='container'><li><input type='text' id='textBox" + textBoxCounter +"' name='textBox" + textBoxCounter + "'></li></div></br>";
        document.getElementById("identifier").appendChild(newdiv);
        textBoxCounter++
        counter++;
    });
    $(".container").live('click','div', function(){
        var divID = this.id;
        if ( divID !== "" ){
            var lastChar = divID.substr(divID.length - 1);
            var t = $('#' + divID).find('input');
            alert(divID);

            t = t.clone(false);
            t.attr('data-related-field-id', t.attr('id'));
            alert(t.attr('id'));
            t.attr('id', t.attr('id') + '_Add');               
            t.attr('data-add-field', 'true');

            var text = document.getElementById(divID).innerHTML;
            // var textboxId = $('div.container').find('input[type="text"]')[lastChar].id;
            $('div#placeholder input[type="button"]').hide();
            var text = "<p>Please fill out what " + t.attr('id') +" textbox shall contain</p>";

            if ( $('#' + t.attr('id')).length == 0 ) {
                $('div#placeholder').html(t);
                $('div#placeholder').prepend(text);
            }
        }
        else{

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:36:46.213

首先从第一行删除第二个参数“div”：

```
$(".textAreaContainer").live('click','div', function(){ 
```

...实现它：

```
$(".textAreaContainer").live('click', function(){ 
```

然后改变：

```
var t = $('#' + divID ).find(':input'); 
```

...到：

```
var t = $(this).find(':input'); 
```

因为您已经知道这`this`是容器，所以无需再次通过 id 选择它。此外，您分配给 textarea 容器的 id 属性中有一个空格，这是无效的，并导致您的原始代码尝试选择`'#textAreaContainer 0'`实际用于查找`0`标记的元素，该标记是`#textAreaContainer`. 因此，修复创建元素以删除 id 中的空间的代码通常是一个好主意，也是解决此问题的另一种方法。

# javascript - 如何将发生在 iframe 上的 ondragover 事件传播到包含它的父 div？

> ID：11524600
> 
> 赞同：1
> 
> 时间：2012-07-17T14:23:41.963
> 
> 标签：javascript, html, drag-and-drop, dom-events

如何传播 ondragover 事件，发生在 iframe 备份到包含 iframe 的父 div？我已将 ondragover 和 ondrop 事件处理程序关联到父 div。当某些东西被拖到 div 上时，我以编程方式在 ondrop 事件处理程序中创建一个 iframe。下次如果有什么东西被拖到这个 iframe 上，我想把这个 iframe 的大小减小到一半，为新的 iframe 创建创造空间。新的 iframe 将在 ondrop 事件处理程序中创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T20:26:34.783

好的，找到了解决方案。在父 div 内放置一个透明的空 div，其宽度和高度与父 div 相同，并将 z-order 设置为 2（z-order 应大于 iframe 的 z-order）。基本上这种安排会覆盖 iframe，因此，事件现在会冒泡到父 div。

# pipe - 如何从标准输入中提取 tar 存档？

> ID：11524602
> 
> 赞同：50
> 
> 时间：2012-07-17T14:23:45.550
> 
> 标签：pipe, stdin, tar, pipeline

我有一个大的 tar 文件`split`。是否可以`cat`使用管道解压缩文件。

就像是：

```
cat largefile.tgz.aa largefile.tgz.ab | tar -xz 
```

代替：

```
cat largefile.tgz.aa largfile.tgz.ab > largefile.tgz
tar -xzf largefile.tgz 
```

我一直在四处寻找，我找不到答案。我想看看这是否可能。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-17T16:10:47.573

`-`用作输入文件：

```
cat largefile.tgz.aa largefile.tgz.ab | tar zxf - 
```

确保按照它们分开的顺序对它们进行 cat 处理。

如果您使用的是 zsh，则可以使用 multios 功能并避免调用 cat：

```
< largefile.tgz.aa < largefile.tgz.ab tar zxf - 
```

或者，如果它们按字母顺序排列：

```
<largefile.tgz.* | tar zxf - 
```

# pdf - 将 postscript 文件的子集转换为 pdf 文档

> ID：11524604
> 
> 赞同：1
> 
> 时间：2012-07-17T14:23:50.730
> 
> 标签：pdf, ghostscript, postscript

我有一个系统可以生成大量 PostScript 文件，每个文件都包含多个多页文档。我想编写一个脚本来获取这些大型 PostScript 文档并从每个文档中输出多个 PDF 文档。

例如，一个附言文件包含 200 封给客户的信，每封有 10 页长。这个后记文件包含 2000 页。我想从这个 1 ps 文档中输出 200x 10 页 PDF，每个客户一份。

我在想 GhostScript 是这种级别的文档操作的方法，但我不确定最好的方法 - GhostScript 中是否有一个函数来获取输入 ps 文件的“第 1-10 页”？我是否必须将整个 ps 文件输出为 2000 个单独的 ps 文件（每页 1 个），然后将它们重新组合在一起？

或者有没有一种更简单的方法可以用 GhostScript 以外的东西来实现我的目标？

非常感谢，
本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:32:30.927

从技术上讲，这将在 Ghostscript 的下一个版本中实现，或者使用 Git 存储库中的 HEAD 代码。现在可以在使用 pdfwrite 时切换设备，这将导致设备关闭并完成当前的 PDF 文件。再次切换回来将开始一个新的。

将此与页面设备字典中的 BeginPage 和/或 EndPage 过程相结合，您应该能够执行您想要的操作。

警告; 我还没有尝试过这些，它需要一些 PostScript 编程才能让它工作。

由于 PostScript 的性质，无法从文件中提取第“N”页，因此无法指定页面范围。

正如 lsemi 建议的那样，您可以先转换为一个大的 PDF 文件，然后提取所需的范围。Ghostscript 能够使用 FirstPage 和 LastPage 开关来执行此操作（与 PostScript 不同，它*可以*从 PDF 文件中提取特定页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:26:02.850

好吧，您可以先将 PS 制作成 PDF 对象集合（或通过打印到 PDFWriter 设备直接从 GhostScript 生成 PDF），然后使用 pdftk 从大 PDF 中“剪切”，这会非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:27:08.040

Create the complete PDF file first with the help of Ghostscript:

```
 gs \
   -o 2000p.pdf \
   -sDEVICE=pdfwrite \
   -dPDFSETTINGS=/prepress \
    2000p.ps 
```

Use pdftk to extract PDF files with 10 pages each:

```
 for i in $(seq 0 10 199); do \
     export start=$(( ${i} * 1 + 1 )); \
     export end=$(( ${start} + 9 ));  \
     pdftk \
        2000p.pdf \
        cat ${start}-${end} \
        output pages---${start}..${end}.pdf; \
 done 
```

You can have Ghostscript generate a 2000page sample+test PDF for you by first creating a sample PostScript file named '2000p.ps' with these contents:

```
 %!PS
 /H1 {/Helvetica findfont 48 scalefont setfont .2 .2 1 setrgbcolor} def
 /pageframe  {1 0 0 setrgbcolor 2 setlinewidth 10 10 575 822 rectstroke} def
 /gopageno {H1 300 700 moveto } def
 1 1 2000 {pageframe gopageno
    4 string cvs
    dup stringwidth pop
    -1 mul 0 rmoveto
    show
    showpage} for 
```

and then run this command:

```
 gs -o 2000p.pdf -sDEVICE=pdfwrite -g5950x8420 2000p.ps 
```

# php - PHP 登录计数器

> ID：11524614
> 
> 赞同：4
> 
> 时间：2012-07-17T14:24:07.550
> 
> 标签：php, variables, login, counter

我在保留变量时遇到问题。我猜当您提交表单时，变量将被重置为默认值。所以我不知道如何在它说“走开！黑客！”之前限制 3 次登录尝试。仅使用 php，仅此而已。有人有线索吗？不要担心安全性，因为这只是我的教授给我们的练习示例，我们只需要单独使用 php 即可。所以不用担心黑客重置cookies。

注意：我只使用 XAMPP 使 php 在 localhost 中工作。

这是PHP中的代码：

```
<center><form action="" method="post"><br>
User ID: <input type="text" name="id"><br>
Password: <input type="password" name="pass"><br>
<input type="submit" name="submit" value="login">
</form>

<?php
if(isset($_POST['submit'])){
    $counter = 0;
    $counter++;
    $vid = 'hanzo';
    $vpass = '123456';
    $id = $_POST['id'];
    $pass = $_POST['pass'];
    $c = "<center>";
    if(empty($id)) echo "$c Please Input Username.<br>";
    else if(empty($pass)) echo "$c Please Input Password.<br>";
    else if($vid==$id && $vpass==$pass) echo "$c Login Succesfully<br>";    
    else if($counter>3) echo "$c Go Away! Hacker!<br>";
    else echo "$c Invalid Username/Password<br> Login Attempt: $counter";
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:26:55.127

您可以在会话中粘贴变量，以便通过多个页面加载为用户/客户端计算机保留它们。[http://us3.php.net/manual/en/intro.session.php](http://us3.php.net/manual/en/intro.session.php)

每次您的脚本运行时，它都会从一张白纸开始。除了魔术 $_X 变量之外，所有变量都是未定义的。您需要将您自己的任何数据放在可以通过多次运行持续存在的位置——会话、cookie、数据库、文本文件等。

会话可能是最简单的方法。由于它们具有客户端元素，因此它们并不完全安全。相对成熟的用户可以绕过会话检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:34:00.973

尝试使用

```
<input type='hidden' /> 
```

不会真正阻止一个坚定的黑客，但如果您对它们有特殊的厌恶，您可以使用它来存储页面之间的变量而无需启用会话。

否则

```
session_start();  
if (isset($_SESSION['loginCount']))
{
   $_SESSION['loginCount']++;
   if ($_SESSION['loginCount'] > 3)
   {
     echo 'Bog Off!';
     exit;
   }
} else {
   $_SESSION['loginCount'] = 1;
} 
```

这会更好，但请注意，如果您的黑客清除了他们的浏览器缓存，会话将被重置。最好的办法是在数据库中跟踪源 IP 地址，但即使这样也可以使用代理解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:27:48.317

您可以使用会话并将登录信息保存到这些会话中。

```
if(!isset($_SESSION['logonCounter'])) {
    $_SESSION['LogonCounter'] = 0;
}

if($LogonFail == true) { // do something that check if its correct
    $_SESSION['LogonCounter']++;
}

if($_SESSION['LogonCounter'] < 3) {
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:27:52.647

将计数器保存在 SESSION 中，并在每次登录失败时增加其值。否则，您可以在数据库中创建一个表，并将登录尝试与用户的 IP 地址保持在同一行中。如果需要，使用第二种方法可以永久阻止某些 IP ...

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T14:28:53.300

就我个人而言，我会使用一个数据库，以便您可以看到正在发生的事情，并且黑客不容易避免，但是仅使用 php，您可以将登录尝试次数存储在会话变量中：

```
<?php
// only check on posts
if ($_SERVER['REQUEST_METHOD'] === 'POST')
{
  session_start();
  $_SESSION['login_attempts'] = isset($_SESSION['login_attempts']) ? ($_SESSION['login_attempts'] + 1) : 0;
  // do checking on number of attempts
  if ($_SESSION['login_attempts'] > 3)
  {
    echo "Go Away! Hacker!";
    die();
    // or just do a redirect to another page...
  }
}
?>
<center><form action="" method="post"><br>
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T14:28:57.933

```
if(isset($_SESSION['attempts']))
{
    if ($_SESSION['attempts'] == 3){
        echo "Go away!";
    } else {
      $_SESSION['attempts']=$_SESSION['attempts']+1;
    }
}
else
{
  $_SESSION['attempts']=0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T14:29:00.017

您可能最好通过会话来执行此操作，以实现简单的实现。但是，用户可以通过删除会话 cookie 轻松终止他们的会话。真正最安全的方法是按 IP 地址将所有登录请求记录到数据库，然后如果您在 Y 时间内从给定 IP 地址收到 X 个失败请求，则显示安全警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-17T14:26:35.557

您可以将其存储在其中，`$_SESSION`但它不可靠，因为他们可以简单地继续重置会话 cookie。我建议您使用[`memcache`](http://php.net/manual/en/book.memcache.php)或[`apc_store`](http://www.php.net/manual/en/book.apc.php)根据您运行的 IP 地址来识别和识别。

# java - 可以允许 Result 对象有行为吗？

> ID：11524616
> 
> 赞同：2
> 
> 时间：2012-07-17T14:24:17.057
> 
> 标签：java

这是对[ResultObjectPattern](http://c2.com/cgi/wiki?ResultObjectPattern)的引用。通常，ResultObject 将相当简单，只有私有实例变量引用结果的各种组件，以及用于这些的 getter 方法（可能还有 setter？）。

现在，将行为方法添加到 ResultObject 是不是一个坏主意？例如，假设 ResultObject 将其一个或多个实例变量推送到缓存中并仅在需要时将其取回，或者提供进行一些计算的方法，这样可以吗，或者这些是而是由一个单独的（单例/实用程序）类处理，例如 ResultObjectManager？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:04:05.970

我认为如果行为与数据密切相关，并且行为不超出 RO 职责的范围 - 这不是坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:09:48.040

我会说，当在向常规类添加实例方法和向任何东西添加静态方法或向单例添加任何方法之间进行选择时，我会将实例方法添加到常规类。这是OO方式。

# asp.net-mvc - 允许用户多次添加部分视图 MVC 3

> ID：11524617
> 
> 赞同：1
> 
> 时间：2012-07-17T14:24:20.527
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个模型，它有几个字段并包含一个列表。我需要一个允许用户输入父字段然后输入多个子字段的视图。我的问题是我不知道他们要添加多少子对象。我需要视图以允许他们根据需要添加尽可能多的子对象。

我假设我需要子对象的部分视图，但我如何允许他们将部分视图多次添加到页面？

编辑

这是我到目前为止所拥有的，但它只是将 append 方法中的代码呈现为屏幕上的文本。

```
 $(document).ready(function () {
     $("#AddProgramTrainingButton").click(function (e) {

         $("#ProgramTraining").append('@@{Html.RenderPartial("_ProgramTrainingDetailsCreate",new Online.Models.ProgramTrainingDetailsViewModel());}</br></br>');

         e.preventDefault();

     });
 }); 
```

---------第二次编辑

我尝试使用 jquery 通过在控制器中调用局部视图来加载局部视图，但这也不起作用。

```
 $(document).ready(function () {
         $("#AddProgramTrainingButton").click(function (e) {

             alert("button clicked!");

             $('#ProgramTraining').load('@Url.Action("GetCreatePartialView","PGTController")');
             return false;

         });
     });

// controller method
        public ActionResult GetCreatePartialView() 
        {
            return PartialView("_ProgramTrainingDetailsCreate.cshtml",new PGTProgramTrainingDetailsViewModel());
        } 
```

我需要删除文件扩展名并且在 jquery 中缺少一些结束字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:37:01.747

我得到了这个工作。我将部分视图包装在一个 div 中

```
 $(document).ready(function () {

     // This section is to remove a Dynamically added Training section when a button is clicked
     $("#RemoveTrainingButton").live('click', function (e) {
         e.preventDefault();

         $(this).closest('div').remove();

     });

     // This section adds a Training section to the page when a button is clicked
     $("#AddProgramTrainingButton").click(function (e) {
         e.preventDefault();
         var url = '@Url.Content("~/PGT/GetCreatePartialView")';
         $.get(url, null, function (data) {
             $('#ProgramTraining').append(data);
         }, 'html').error(function (error) {
             alert(error);
         });

     });
 }); 
```

```
 [HttpGet]
    public ActionResult GetCreatePartialView() 
    {
        return PartialView("_ProgramTrainingDetailsCreate",new PGTProgramTrainingDetailsViewModel());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T20:22:41.300

罗纳德，看看这篇博文……我用它，它很完美。

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T18:34:43.580

您可以使用 jQuery 检索局部视图并将其插入到主页面的 DOM 中。查看[load](http://api.jquery.com/load/ "加载")和[ajax](http://api.jquery.com/jQuery.ajax/ "阿贾克斯")函数。您需要连接某种控制来触发异步加载。您的部分视图将从控制器操作返回（不同于完整视图，例如 /Controller/MyPageAction 和 /Controll/MySubformAction，其中 MyPageAction 是完整结果而 MySubformAction 是部分结果）。

您可以依赖明确的用户操作（单击按钮），也可以在用户开始填写最后一组可用的子字段时自动提供一组新的子字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:49:36.423

我建议有一个图像/按钮指示字段添加，然后单击，您可以编写一个简单的处理程序来在表单中插入部分视图或任何其他表单字段。如果你保持插入字段的名称相同，那么它们将作为一个数组提交到服务器中，你可以从那里解析和查找。

# javascript - 使用javascript将小数位添加到数字中

> ID：11524619
> 
> 赞同：30
> 
> 时间：2012-07-17T14:24:26.063
> 
> 标签：javascript, formatting, decimal

我有这个数字作为整数 439980

我想将小数点放在右边的 2 位。使其成为 4399.80

字符数可以随时更改，所以我总是需要它是右边的小数点后 2 位。

我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-17T14:25:18.497

```
function insertDecimal(num) {
   return (num / 100).toFixed(2);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-09T10:04:23.240

只需添加 toFixed() 将返回一个字符串值，因此如果您需要一个整数，它将需要 1 个过滤器。实际上，您可以使用 Number() 将 nnnnnn 函数的返回值包装起来以获取整数：

```
function insertDecimal(num) {
   return Number((num / 100).toFixed(2));
}

insertDecimal(99552) //995.52
insertDecimal("501") //5.01 
```

这里唯一的问题是 JS 将删除尾随的 '0'，因此 439980 将返回 4399.8，而不是您可能希望的 4399.80：

```
insertDecimal(500); //5 
```

如果您只是打印结果，那么 nnnnnn 的原始版本可以完美运行！

### 笔记

JavaScript 的 Number 函数可能会导致某些输入的一些非常意外的返回值。[您可以放弃对 Number 的调用并使用一元运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Unary_operators)将字符串值强制为整数

```
return +(num / 100).toFixed(2); 
```

或乘以 1 例如

```
return (num / 100).toFixed(2) * 1; 
```

*TIL：JavaScript 的核心数学系统[有点奇怪](https://coderwall.com/p/5tlhmw/converting-strings-to-number-in-javascript-pitfalls)*

# php - Symfony2 禁止 app.php 直接访问

> ID：11524625
> 
> 赞同：0
> 
> 时间：2012-07-17T14:24:34.037
> 
> 标签：php, .htaccess, symfony

> **可能重复：**
> [symfony2 重写规则 .htaccess app.php](https://stackoverflow.com/questions/11149526/symfony2-rewrite-rules-htaccess-app-php)

我一直在使用 a从我**的 Symfony2**项目`.htaccess`中删除访问权限。我希望用户从这样的 url 访问项目：`app.php`

 **> **[http://localhost:8888/Social-Shows/web/shows](http://localhost:8888/Social-Shows/web/shows)**

但我需要从此网址删除访问权限

> **[http://localhost:8888/Social-Shows/web/app_dev.php/shows](http://localhost:8888/Social-Shows/web/app_dev.php/shows)**

现在我的 .htaccess 让我可以访问这两个地址，这是我的 .htaccess 代码：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteOptions Inherit
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_URI} !^/web/shows
   RewriteRule ^(.*) web/app_dev.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:44:04.217

那可能是不可能的。您不应该真正删除访问权限，`app.php`因为它是您的应用程序的入口点。相反，您可以用`.htaccess`重写 url 使其看起来好像没有 app.php。**Symfony2**的默认设置应该已经完成​​了`.htaccess`。**

# c - 构建 C 程序的最佳实践（用于 CMake 构建）

> ID：11524626
> 
> 赞同：3
> 
> 时间：2012-07-17T14:24:47.357
> 
> 标签：c, cmake, directory-structure

我有一个 C 程序，它是由一位离开的开发人员传给我的。我试图弄清楚他到底在做什么，并将软件重新安排成更合乎逻辑的东西，这样我就可以更容易地构建它。我使用 CMake 构建，而他使用 Make。

有一个 src/ 文件夹，其中包含多个源文件，其中大约 4 个具有 main() 方法。具有 main() 方法的文件在文件中的命名更像是实用程序、工具或其他任何东西。这让我觉得很奇怪，因为他还有一个 lib 文件夹，里面还有一些其他的东西，它们是构建的，看起来更像是库。我是否应该将这些主要方法拆分为“驱动程序”源文件，并将这些文件中也定义的方法设为其他库？如果我这样做，我知道如何让 CMake 去寻找一个库并构建并将它链接到驱动程序以执行。

如果在 src 文件夹中构建那些“库”源文件是可以接受的，我应该设置 CMake 以一次构建该文件夹中的所有内容，还是应该创建一个目录结构以至少进行一些逻辑分离?

就像一个想法，这是当前的目录结构

```
project
.../src
......file1.c
......file2.c <-has a main() as well as other methods
......file3.c
......file4.c <- has a main() as well as other methods
......file5.c
.../lib
....../lib1
........./file1.c <-references top level include folder files
........./file2.c
....../lib2
........./file1.c <-refs top level and local include files
........./file2.c
........./file2.h
.../scripts
.../include
.
.
. 
```

任何有关重组此构建或在 CMake 中配置它的最佳实践的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T10:45:01.483

答案永远不会太晚，所以我建议：

```
project
.../CMakeLists.txt
     include_directories(include/)
     add_subdirectory(lib/lib1)
     add_subdirectory(lib/lib2)
     add_subdirectory(src/)  

.../lib/lib1/CMakeLists.txt
              add_library(lib1 file1.c file2.c)

.../src/CMakeLists.txt
         add_executable(test1 test1.c test2.c)
         target_link_libraries(test1 lib1) 
```

它为什么起作用：`include_directories`在子目录中派生，所有目标（以及库）`add_subdirectory`都在整个项目中导出。

# java - 编译器如何不检查 RuntimeExceptions，即使它们扩展了 Exception 类？

> ID：11524627
> 
> 赞同：2
> 
> 时间：2012-07-17T14:24:47.900
> 
> 标签：java, exception, exception-handling, jls

当我们通过扩展 Exception 类创建**CustomException 时，编译器会对其进行检查，但即使 RuntimeExceptions 扩展了 Exception 类，编译器也不会对其进行检查**。

这是如何在编译器中建立的。我在[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/exceptions.html#44121)中找到了一个部分说明原因。

> 为什么不检查
> 运行时异常 运行时异常类（RuntimeException 及其子类）免于编译时检查，因为根据 Java 编程语言设计者的判断，必须声明此类异常不会显着帮助确定正确性的节目。Java 编程语言的许多操作和构造都可能导致运行时异常。编译器可用的信息以及编译器执行的分析级别通常不足以确定不会发生此类运行时异常，即使这对程序员来说可能是显而易见的。要求声明这样的异常类只会让程序员感到恼火。

在标记接口的情况下，幕后是否发生了一些事情。

我正在寻找一些可以解释它是如何完成的以及为什么所有检查的异常都没有父类的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:27:52.013

> ***在标记接口的情况下，幕后是否发生了一些事情。***

`RuntimeException`免除所有子类都是检查异常的规则的事实`Exception`只是规范的一部分。

*如何*实现该规则的例外取决于编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:29:58.307

编译器检查除 Error 和 RuntimeException 子类之外的所有 Throwable 子类。它只是检查 Throwable 是否是这些类的子类。

注意：你可以有一个 Throwable 的子类，它不是错误或异常，它将被检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:41:47.693

在任何时候，有人可以在您的程序中输入零。如果你曾经除过，这可能会导致除以零错误，这将抛出一个`RuntimeExcpetion`被调用的`ArithmeticException`.

现在，如果您需要在所有除法语句周围包含 try / catch 块，则代码将被错误处理弄乱，这会降低代码主要目的的可读性，这可能是任何东西（但可能与捕获无关）除以零错误）。

Java 要么选择在可读性和健壮性之间取得平衡，要么在所有情况下允许健壮性，并带有一些增强可读性的“假设”。换句话说，当 Java 语言被布局时，平衡可读性和健壮性的决定看起来就像是在污染用户编写的源代码和需要`ArithmeticExcpetion`围绕任何除法运算捕获 s 之间的决定。另一种方法是始终确保健壮性，但使某些类型的`Exception`s 不受要求的捕获，确保程序健壮性而不影响源代码的可读性（代价是知道该语言稍微复杂一些，因为它有两个类别`Exception`s) 。

# esb - 协助一个简单的 WSO2 ESB 项目

> ID：11524628
> 
> 赞同：0
> 
> 时间：2012-07-17T14:24:49.620
> 
> 标签：esb, wso2, wso2esb

我对此非常陌生，需要一些帮助来编写 ESB 脚本以获取通过 HTTPS 在 WSO2 的端口 9090 上发布的事件，并将其转换为要附加到服务器上 XML 文件的消息：

HTTPS 数据将包含：“ID=Servername|Severity=sevtype”（其中 Servername 是设备名称，Sevtype 可以是“WARNING”或“OK”，具体取决于服务器是关闭还是启动）

然后需要将其转换并附加到现有 XML 文件中，格式如下：

```
<event>
<componentID>Servername</componentID>
<timestamp>2012-04-27 01:37:10</timestamp> ***(Date and time the event was received)***
<severity>NORMAL</severity>    ***(If original is WARNING then severity = SEVERE else it = NORMAL)***
<eti>NodeStatus</eti><etivalue>Up</etivalue> ***(If original is WARNING then severity = Down else it = Up)***

<\event> 
```

请有人可以帮助我，我真的在为看似简单的事情而苦苦挣扎

非常感谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:24:30.850

您可以编写一个简单的任务来将您的数据轮询到服务器中，并且可以执行 xslt 转换来构造特定的 xml 格式消息。

编写任务的一些参考资料；

[http://wso2.org/project/esb/java/4.0.3/docs/configuration_language.html#TaskConcept](http://wso2.org/project/esb/java/4.0.3/docs/configuration_language.html#TaskConcept)

[http://docs.wso2.org/wiki/display/ESB403/Writing+Tasks](http://docs.wso2.org/wiki/display/ESB403/Writing+Tasks)

[http://wso2.org/library/2900](http://wso2.org/library/2900)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:44:03.803

如何获得 ID 和严重性？他们是http头吗？

通常，您可以使用有效负载工厂调解器 [1] 来构建带有一些输入参数数据的有效负载消息。

[1] [http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html#Sample17](http://wso2.org/project/esb/java/4.0.3/docs/samples/message_mediation_samples.html#Sample17)

# winforms - 真正奇怪的 Windows 窗体 C++ 错误

> ID：11524631
> 
> 赞同：1
> 
> 时间：2012-07-17T14:24:57.197
> 
> 标签：winforms, visual-studio, c++-cli

所以我正在编写一个 Windows 窗体应用程序，所以当我运行它时，它会抛出一个它不应该抛出的错误。它抛出“语法错误：缺少；使用前”

我尝试将一个放在前一行，但它不起作用。

有问题的文件是这个

```
// Rock Paper Scisors.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"

using namespace RockPaperScisors;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew Form1());
    return 0;
}} 
```

stdafx.h 是 MS Visual C++ Express 的一部分，无论如何，Form1.h 的代码可以在这个 pastebin 中找到（不想淹没整个堆栈溢出页面。）[http://pastebin.com/324mpCps](http://pastebin.com/324mpCps)

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:48:14.090

你只是混淆了括号。

首先，删除 Rock Paper Scisors.cpp 文件中的最后一个 '}'。其次，这是正确的 Form1.h 文件的外观：

```
#include<time.h>
#include<stdlib.h>
#include<stdio.h>
#include<ctime>
#include<cstdlib>

#pragma once

namespace RockPaperScisors {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Form1
    /// </summary>
    public ref class Form1 : public System::Windows::Forms::Form
    {
    public:
        Form1(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  Rock;
    protected: 
    private: System::Windows::Forms::Button^  Paper;
    private: System::Windows::Forms::Button^  cis;
    private: System::Windows::Forms::TextBox^  ComBox;

    private: System::Windows::Forms::TextBox^  WonBox;
    private: System::Windows::Forms::Label^  CompLabel;

    private: System::Windows::Forms::Label^  WonLabel;

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->Rock = (gcnew System::Windows::Forms::Button());
            this->Paper = (gcnew System::Windows::Forms::Button());
            this->cis = (gcnew System::Windows::Forms::Button());
            this->ComBox = (gcnew System::Windows::Forms::TextBox());
            this->WonBox = (gcnew System::Windows::Forms::TextBox());
            this->CompLabel = (gcnew System::Windows::Forms::Label());
            this->WonLabel = (gcnew System::Windows::Forms::Label());
            this->SuspendLayout();
            // 
            // Rock
            // 
            this->Rock->Location = System::Drawing::Point(13, 33);
            this->Rock->Name = L"Rock";
            this->Rock->Size = System::Drawing::Size(75, 23);
            this->Rock->TabIndex = 0;
            this->Rock->Text = L"Rock";
            this->Rock->UseVisualStyleBackColor = true;
            this->Rock->Click += gcnew System::EventHandler(this, &Form1::Rock_Click);
            // 
            // Paper
            // 
            this->Paper->Location = System::Drawing::Point(94, 33);
            this->Paper->Name = L"Paper";
            this->Paper->Size = System::Drawing::Size(75, 23);
            this->Paper->TabIndex = 0;
            this->Paper->Text = L"Paper";
            this->Paper->UseVisualStyleBackColor = true;
            this->Paper->Click += gcnew System::EventHandler(this, &Form1::Paper_Click);
            // 
            // cis
            // 
            this->cis->Location = System::Drawing::Point(175, 33);
            this->cis->Name = L"cis";
            this->cis->Size = System::Drawing::Size(75, 23);
            this->cis->TabIndex = 0;
            this->cis->Text = L"Scisors";
            this->cis->UseVisualStyleBackColor = true;
            this->cis->Click += gcnew System::EventHandler(this, &Form1::cis_Click);
            // 
            // ComBox
            // 
            this->ComBox->Location = System::Drawing::Point(83, 127);
            this->ComBox->Name = L"ComBox";
            this->ComBox->Size = System::Drawing::Size(100, 20);
            this->ComBox->TabIndex = 1;
            // 
            // WonBox
            // 
            this->WonBox->Location = System::Drawing::Point(83, 190);
            this->WonBox->Name = L"WonBox";
            this->WonBox->Size = System::Drawing::Size(100, 20);
            this->WonBox->TabIndex = 2;
            // 
            // CompLabel
            // 
            this->CompLabel->AutoSize = true;
            this->CompLabel->Location = System::Drawing::Point(91, 95);
            this->CompLabel->Name = L"CompLabel";
            this->CompLabel->Size = System::Drawing::Size(88, 13);
            this->CompLabel->TabIndex = 3;
            this->CompLabel->Text = L"Computer Choice";
            // 
            // WonLabel
            // 
            this->WonLabel->AutoSize = true;
            this->WonLabel->Location = System::Drawing::Point(91, 163);
            this->WonLabel->Name = L"WonLabel";
            this->WonLabel->Size = System::Drawing::Size(62, 13);
            this->WonLabel->TabIndex = 3;
            this->WonLabel->Text = L"Who Won\?";
            // 
            // Form1
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(284, 262);
            this->Controls->Add(this->WonLabel);
            this->Controls->Add(this->CompLabel);
            this->Controls->Add(this->WonBox);
            this->Controls->Add(this->ComBox);
            this->Controls->Add(this->cis);
            this->Controls->Add(this->Paper);
            this->Controls->Add(this->Rock);
            this->Name = L"Form1";
            this->Text = L"Form1";
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion
    int userChoice, compChoice;
private: System::Void Rock_Click(System::Object^  sender, System::EventArgs^  e) 
         {
             ComBox->Text="";
             userChoice=1;

        compChoice=rand()%3+1;

            switch(compChoice)
            {
            case 1:
                ComBox->Text="Rock";
                WonBox->Text="You Tied";
                break;
            case 2:
                ComBox->Text="Paper";
                WonBox->Text="You Lost";
                break;
            case 3:
                ComBox->Text="Scisors";
                WonBox->Text="You Won";
                break;
            }

         }
private: System::Void Paper_Click(System::Object^  sender, System::EventArgs^  e) {
             ComBox->Text="";
             userChoice=2;
        compChoice=rand()%3+1;

            switch(compChoice){
            case 1:
                ComBox->Text="Rock";
                WonBox->Text="You Won";
                break;
            case 2:
                ComBox->Text="Paper";
                WonBox->Text="You Tied";
                break;
            case 3:
                ComBox->Text="Scisors";
                WonBox->Text="You Lost!";
                break;
            }
         }
private: System::Void cis_Click(System::Object^  sender, System::EventArgs^  e) {
             ComBox->Text="";
             userChoice=3;
            compChoice=rand()%3+1;

            switch(compChoice){
            case 1:
                ComBox->Text="Rock";
                WonBox->Text="You Lost";
                break;
            case 2:
                ComBox->Text="Paper";
                WonBox->Text="You Won";
                break;
            case 3:
                ComBox->Text="Scisors";
                WonBox->Text="You Tied!";
                break;
            }
}  //The culprit!
};
} 
```

我只在末尾添加了一个括号，关闭了类中的最后一个方法。由于 Visual Studio 2010 及更早版本不支持 C++/CLI 中的 IntelliSense，因此此类项目中可能会出现错误。

# java - 不能提交有冲突的更改？

> ID：11524634
> 
> 赞同：1
> 
> 时间：2012-07-17T14:25:04.833
> 
> 标签：java, eclipse, synchronization, repository

当我想提交到我的存储库时，我收到消息：

> 不能提交有冲突的更改。从提交中排除它们或使用同步视图来解决冲突

同步还有一个小问题：我同步的时候总是出现红色标记？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:27:38.477

首先更新（并合并更改 == 解决冲突），然后您可以提交。

# java - 将 Eclipse 更改为 UTF-8 编码后文本损坏

> ID：11524638
> 
> 赞同：5
> 
> 时间：2012-07-17T14:25:10.260
> 
> 标签：java, eclipse, encoding

我不得不将 Eclipse Indigo 编码更改为 UTF-8。现在所有像éàçè这样的特殊字符都被替换为�。

我可以进行搜索和替换，但我想知道是否有更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:49:02.797

更改 Eclipse 中的编码不会更改现有文件：它只会更改 Eclipse 读取它们的方式。

您需要将旧文件转换为 UTF-8 以及配置 Eclipse。

有一些工具可以做到这一点，您也可以编写一个小型 Java 程序。

如果您想使用现有工具，这是我找到的第一个工具：http: [//www.marblesoftware.com/Marble_Software/Charco.html](http://www.marblesoftware.com/Marble_Software/Charco.html)（您可以为您的（未指定）操作系统找到更好的工具。

如果你想自己写一个工具（大约 20 LOC），你需要知道的是你必须：

*   [使用初始字符集读取文件](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.nio.charset.CharsetDecoder%29)
*   [以 UTF-8 写入文件](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStreamWriter.html#OutputStreamWriter%28java.io.OutputStream,%20java.nio.charset.CharsetEncoder%29)

这是操作的核心：

```
 reader = new BufferedReader(new InputStreamReader(new FileInputStream(...), "you have to know it"));
  writer = new OutputStreamWriter(new FileOutputStream(...), "UTF-8"); 
  String line;
  while ((line=reader.readLine())!=null) {
     writer.write(line);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T19:12:29.567

我推荐notepad++进行转换。这是一个编辑器，它有一些非常有用/强大的视图和转换工具来解决字符集。还有一些类似“瑞士刀”的功能（文件比较、高级搜索和替换等等……）

[记事本++](http://notepad-plus-plus.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T04:18:31.190

只需要 alt + enter 然后选择资源 UTF-8

# bash - 使用 awk 合并两个文件并写入输出

> ID：11524639
> 
> 赞同：1
> 
> 时间：2012-07-17T14:25:14.910
> 
> 标签：bash, awk, export-to-csv

我有两个具有公共字段的文件。`awk`我想将这两个文件与公共字段合并，并使用linux 命令将合并的文件写入另一个文件。

**文件 1**

```
412234$name1$value1$mark1
413233$raja$$mark2
414444$$$ 
```

**文件2**

```
412234$sum$file2$address$street
413233$sum2$file32$address2$street2$path
414444$$$$ 
```

这些示例文件由分隔`$`，输出合并文件也将在`$`. 这些行也有空字段。

我尝试使用以下脚本`join`：

```
 join -t "$" out2.csv out1.csv  |sort -un > file3.csv 
```

但是发生了总数不匹配的情况。

试过`awk`：

**myawk.awk**

```
#!/usr/bin/awk -f 
NR==FNR{a[FNR]=$0;next} {print a[FNR],$2,$3} 
```

我跑了

```
awk -f myawk.awk out2.csv out1.csv > file3.csv 
```

这也花费了太多时间。没反应。

这`out2.csv`是主文件，我们必须比较`out1.csv`

您能帮我将合并的文件写入另一个文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:32:39.723

使用`bash`. 这给了你相当于一个完整的外连接

```
 join -t'$' -a 1 -a 2 <(sort -k1,1 -t'$' out1.csv ) <(sort -k1,1 -t'$' out2.csv ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:57:38.100

您的`awk`解决方案朝着好的方向发展。要点是更改`FS`为拆分字段`$`：

内容`script.awk`：

```
awk '
    BEGIN {
        ## Split fields with "$".
        FS = "$"
    }

    ## Save lines from second file, the first field as the index of the
    ## array, and rest of the line as the value.
    FNR == NR {
        file2[ $1 ] = substr( $0, index( $0, "$" ) )
        next
    }

    ## Print when keys from both files match.
    FNR < NR {
        if ( $1 in file2 ) {
            printf "%s$%s\n", $0, file2[ $1 ]
        }
    }
' out2.csv out1.csv 
```

输出：

```
412234$name1$value1$mark1$$sum$file2$address$street
413233$raja$$mark2$$sum2$file32$address2$street2$path
414444$$$$$$$$ 
```

# android - 在运行时加载语言环境不会同时更新

> ID：11524644
> 
> 赞同：0
> 
> 时间：2012-07-17T14:25:26.673
> 
> 标签：android

我创建了一个包含一个 TextView 和 Spineer 的活动。Spineer 用于选择语言环境，在选择时我希望 TextView 文本应该从选定的语言环境中选择，并且我希望在 spiner 关闭时立即更改它。
在 onItemSelected 方法上，我编写了以下代码：

```
selectedLocale=(String) arg0.getItemAtPosition(arg2);

        if(selectedLocale.equals("Arabic")){
            locale2= new Locale("AF");
        }
        else
        {
            locale2= new Locale("EN");
        }

        Configuration config = new Configuration();
        config.locale = locale2;
        Log.v("This file @onItem selected", "calling updatinon" + selectedLocale); 

        getApplicationContext().getResources().updateConfiguration(config, null); 
```

我的问题是我无法获取所选语言环境的文本。如果我遗漏了一些东西，任何人都可以更新我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:55:43.247

我在 onItemSelected 中编写了错误的代码流，每次设置更新的语言环境后都会调用该代码流，这会将语言环境重置为旧语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:37:39.260

语言代码的使用`lower case`，例如：

```
new Locale("ar"); 
```

`ar`导致`Arabic`本地。

# android - Android SQLite：无法访问现有表上的列

> ID：11524647
> 
> 赞同：0
> 
> 时间：2012-07-17T14:25:29.833
> 
> 标签：android, database, sqlite

我似乎无法访问 SQLite 数据库表。尝试这样做时，它说表不存在。我搜索了有同样问题的人，仔细检查了我的代码，但我找不到问题。

一些定义：

```
private static final String TABLE_PRODUTOS = "produtos";
private static final String TABLE_CONCORRENTES = "concorrentes";
private static final String TABLE_VENDE = "vende";

private static final String KEY_ID_PROD = "_id";
private static final String KEY_NOME_PROD = "nome_prod";
private static final String KEY_CODBAR_PROD = "codbar_prod";
private static final String KEY_ID_CONC = "_id";
private static final String KEY_NOME_CONC = "nome_conc";
private static final String KEY_VENDE_PROD_ID = "prod_id";
private static final String KEY_VENDE_CONC_ID = "conc_id";
private static final String KEY_VENDE_PRECO = "preco";
private static final String KEY_VENDE_OFERTA = "oferta"; 
```

这是创建数据库的代码：

```
public void onCreate(SQLiteDatabase db) {

    Log.i("DB","CREATING_DB");

    String CREATE_TABLE_PRODUTOS = "CREATE TABLE " + TABLE_PRODUTOS + "("
            + KEY_ID_PROD + " INTEGER PRIMARY KEY," + KEY_NOME_PROD + " TEXT," + KEY_CODBAR_PROD + " INTEGER" + ")";
    String CREATE_TABLE_CONCORRENTES = "CREATE TABLE " + TABLE_CONCORRENTES
            + "(" + KEY_ID_CONC + " INTEGER PRIMARY KEY," + KEY_NOME_CONC + " TEXT" + ")";
    String CREATE_TABLE_VENDE = "CREATE TABLE " + TABLE_VENDE + "("
            + KEY_VENDE_PROD_ID + " INTEGER," + KEY_VENDE_CONC_ID
            + " INTEGER," + KEY_VENDE_PRECO + " REAL,"
            + KEY_VENDE_OFERTA + "INTEGER" + ")";

    db.execSQL(CREATE_TABLE_PRODUTOS);
    db.execSQL(CREATE_TABLE_CONCORRENTES);
    db.execSQL(CREATE_TABLE_VENDE);
} 
```

这是插入/更新的代码：

```
public void addVenda_(Venda p_) {
    //bd is my SQLiteDatabase
    if (bd != null && bd.isOpen()) {
    //Log.i("CLOSING_DB", "addVenda");
        bd.close();
    }
    bd = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_VENDE_PRECO, p_.preco); // Contact Name
    values.put(KEY_VENDE_OFERTA, p_.oferta); // Contact Name

    if(getVenda_(p_)){ //getVenda() returns true if row with KEY_VENDE_PROD_ID and KEY_VENDE_CONC_ID already exist
        //Log.i("UPDATE","conc: "+p_.id_conc+" prod: "+p_.id_prod+" preço: "+p_.preco+" oferta: "+p_.oferta);
        bd.update(TABLE_VENDE, values, KEY_VENDE_PROD_ID + " = ? AND "+KEY_VENDE_CONC_ID + " = ?", new String[]{ "" + p_.id_prod, "" + p_.id_conc });
        //bd.rawQuery("update "+TABLE_VENDE+" SET "+KEY_VENDE_PRECO+"="+p_.preco+", "+KEY_VENDE_OFERTA+"="+p_.oferta+" WHERE "+KEY_VENDE_PROD_ID+"="+p_.id_prod+" AND "+KEY_VENDE_CONC_ID+"="+p_.id_conc, null);
    }
    else{
        //Log.i("INSERT","conc: "+p_.id_conc+" prod: "+p_.id_prod+" preço: "+p_.preco+" oferta: "+p_.oferta);
        values.put(KEY_VENDE_PROD_ID, p_.id_prod);
        values.put(KEY_VENDE_CONC_ID, p_.id_conc);
        bd.insert(TABLE_VENDE, null, values);
        //String sql = "INSERT INTO vende(prod_id, conc_id, preco, oferta) values ("+ p_.id_prod+","+p_.id_conc+","+p_.preco+","+p_.oferta +");";
        //bd.rawQuery(sql, null);

    }

} 
```

这是我尝试在 TABLE_VENDE 上插入一些值时遇到的错误：

```
sqlite returned: error code = 1, msg = table vende has no column named oferta
Error inserting oferta=0 conc_id=1 preco=1.42 prod_id=3
android.database.sqlite.SQLiteException: table vende has no column named oferta: ,  while compiling: INSERT INTO vende(oferta, conc_id, preco, prod_id) VALUES(?, ?, ?, ?); 
```

我访问其他两个表（PRODUTOS 和 CONCORRENTES）没有问题，只是表 VENDE。所以我的问题是：“oferta：”（第三个错误）来自哪里？我创建/访问我的数据库是否错误？这不可能是 SQLite 的错，不是吗？（可能不是..）

提前致谢

PS：这是我的第一个问题，如果我搞砸了，请原谅我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:27:51.357

```
KEY_VENDE_OFERTA + "INTEGER" 
```

在 key 和 word 之间留一个空格`INTEGER`。

```
KEY_VENDE_OFERTA + " INTEGER" 
```

# javascript - 从 javascript 访问实例变量

> ID：11524653
> 
> 赞同：0
> 
> 时间：2012-07-17T14:25:43.620
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

在我的 Rails 应用程序中，我需要脚本根据所提供的控制器和操作而表现出不同的行为。所以在我的 ApplicationController 中，我像这样提供这些：

```
before_filter :save_action_controller  

def save_action_controller
  @action = action_name
  @controller = controller_name
end 
```

在一个 erb 过滤的 javascript 文件中，我有这个：

```
window.controller = <%= @controller || 'undefined' %>;
window.action = <%= @action || 'undefined' %>; 
```

但是在这种情况下，@controller 和 @action 似乎都为零？但是，我可以从视图和助手中访问它们。另外，如果我真的试图访问“不存在”的变量，我看不出这怎么能不引发异常？

我需要做什么才能从 javascript 访问它？有首选方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:33:09.683

这个[railscast](http://railscasts.com/episodes/324-passing-data-to-javascript?view=asciicast)剧集有一些关于将数据传递给 javascript 的信息。

有几种方法可以做到这一点，但一种很好的方法是使用数据属性（如 railscast 所示）。您可以使用 html 来定义它，如下所示：

```
<h1>Products</h1>

<div id="products" data-url="<%= products_url %>">
  Loading products...
</div> 
```

然后通过javascript访问它

```
jQuery ->
  alert $('#products').data('url') 
```

# ios - 从 ios5 应用程序与 REST 服务通信

> ID：11524654
> 
> 赞同：3
> 
> 时间：2012-07-17T14:25:43.140
> 
> 标签：ios, xcode, rest

我正在构建一个需要与 REST 服务通信的应用程序。该应用程序正在使用 ARC，因此 ASIHTTPRequest 不是一个选项。当我们尝试使用 RESTKit 时，它也严重失败。

我们应该如何处理发送 http 请求？（最好是异步的）并“存储”要由 XML 解析器解析的数据（我真的不需要帮助，只需要知道如何为其提供数据）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:27:40.847

您不需要在任何地方都使用 ARC，请查看这个问题和答案，您可以为第三方库禁用 ARC。

[禁用某些文件的自动引用计数](https://stackoverflow.com/questions/6448874/disable-automatic-reference-counting-for-some-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:09:58.953

您可以使用 AFNetworking，它是一个非常好的用于 REST 通信协议的 Lib。您也可以为 AFNetworking 禁用 ARC。

# php - 仅将某些列值作为输出获取的代码不起作用

> ID：11524655
> 
> 赞同：-3
> 
> 时间：2012-07-17T14:25:45.450
> 
> 标签：php, mysql, sql

我有一个表格数据和几列，我试图只显示某些列的值。我在下面写了这个代码，但它不能正常工作。给出一些错误。

```
$daily = mysql_query("SELECT email, first_name, last_name AS dval FROM users");
while( $stat = mysql_fetch_assoc($daily)) 
{
    echo '<br/>' . " {$stat['dval']}";
} 
```

仅打印所有条目的 first_name。我怎样才能得到电子邮件和姓氏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:26:20.493

您需要使用以下命令执行查询[`mysql_query()`](http://php.net/mysql_query)：

```
$result = mysql_query( "SELECT email, first_name, last_name AS dval FROM `data`");
$row = mysql_fetch_assoc( $result);
echo $row['dval']; 
```

我更改了您的变量名称以使用通用命名约定。

要打印多行，请使用`while`循环：

```
while( $row = mysql_fetch_assoc( $result)) {
    echo $row['dval'];
} 
```

请注意， mysql_* 函数已被弃用，您应该切换到[`mysqli`](http://php.net/mysqli)或[`PDO`](http://php.net/pdo)。

为什么除了`$stat['dval']`打印什么都没有？你只说`echo $stat['dval'];`。

`while`在循环中添加要打印的内容：

```
while( $row = mysql_fetch_assoc( $result)) {
    // HERE is where you add the things you want to print
    echo $row['email'];
    echo $row['first_name'];
    echo $row['dval'];
} 
```

# c++ - C++ 库中的快速梯度下降实现？

> ID：11524657
> 
> 赞同：1
> 
> 时间：2012-07-16T22:03:15.317
> 
> 标签：c++, optimization, gradient-descent

> **可能重复：**
> [C++ 库中的快速梯度下降实现？](https://stackoverflow.com/questions/11513926/fast-gradient-descent-implementation-in-a-c-library)

我正在寻找运行梯度下降优化以最小化变量实例化的成本。我的程序在计算上非常昂贵，所以我正在寻找一个可以快速实现 GD 的流行库。推荐的图书馆/参考资料是什么？

# html - HTML 布局问题

> ID：11524659
> 
> 赞同：0
> 
> 时间：2012-07-17T14:25:55.763
> 
> 标签：html, css, layout

有人可以帮忙吗？

我正在尝试在 HTML 和 CSS 中进行以下布局。此图像只是网站总体布局的粗略表示。 ![在此处输入图像描述](../Images/95488e260d143a9e1dfee7399be7a153.png) 顶部栏（或标题）将是例如浅灰色，而侧栏 1 将是相同的颜色。侧边栏1还具有圆形的左下角，而侧边栏2具有圆形的右上角。我试图重新创建的效果是页眉将“流入”侧边栏 1，而侧边栏 2 将“流入”页脚。到目前为止，我已经对这些框进行了编码，以便它们看起来可以触摸，并且我还完成了圆角。但是我一整天都在坚持的是如何做颜色，以便看起来 1 正在流入下一个。这是我到目前为止的一个例子（仍然很粗糙，因为我只是想阻止形状等）[hansmoolman.com](http://hansmoolman.com/)

上面网站中的相关部分是一个名为“这是主容器”的部分，它位于页面的一半左右，包含侧边栏 1（带有 Twitter 提要的那个）和侧边栏 2（带有所有 Lorenm Ipsum 的那个）东西）。顶部栏将是带有徽标和导航内容的栏。页脚尚未实现。

谁能建议我如何做到这一点？我试图远离代表这一点的背景图像，因为如果添加更多内容，侧边栏 1 和 2 应该能够相互独立地动态增长。或者这可以用背景图像/图像完成吗？

任何人都可以帮忙，因为我一直在研究的所有解决方案都变得非常混乱，里面和其他盒子上面都有盒子。它在代码方面看起来不太好，我担心它可能无法在所有设备上按预期显示。

如果这个问题需要更多的清晰度或代码，请告诉我，我可以同时提供。

提前致谢

*编辑 - 这是弗莱姆建议的一种可能的解决方案

![解决方案](../Images/621731fd0c8adcd8849be8d014de83ea.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:32:33.797

用这样的 div 构建你的布局（间距只是为了可见性）：

![分区布局](../Images/25bd800db84895fa0dab635c1a823991.png)

您还需要在每个圆角后面添加一个具有相反颜色的元素。（如果你设置了你的身体背景颜色，你只需要做其中一个。）

# user-interface - 如何在gtk窗口上显示c中程序的输出？

> ID：11524660
> 
> 赞同：0
> 
> 时间：2012-07-17T14:25:58.243
> 
> 标签：user-interface, gtk

我有一个用 c 编码的程序。现在我想在 gtk 窗口上显示它的输出。现在我正在控制台上获取输出，我希望将此输出馈送到 gtk+ 以便我将其显示在窗口上。我的程序输出是一个整数值。

我是 gtk+ 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:27:22.910

看看[`g_spawn_sync()`](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html#g-spawn-sync)和朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:02:11.453

这是一个`g_spawn_command_line_sync`用于在 a 中显示命令结果的示例`GtkTextView`：[http ://www.gtkforums.com/viewtopic.php?t=906](http://www.gtkforums.com/viewtopic.php?t=906)

这个代码示例很旧并且使用 Libglade（已被 GtkBuilder 取代），但是，`on_execute_button_clicked`函数中的代码演示了您正在寻找的内容。

# php - 带有ajax验证的mysql单选按钮

> ID：11524662
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:02.460
> 
> 标签：php, mysql, ajax, object, radio

首先：我正在使用 Jeffrey Way 在 In the Woods 中制作的邮件脚本。

我有一个简单的表格，如下所示：

```
<form method="post" action="sendEmail.php" id="form_reserveren">
<div id="container">

    <div id="main" style="width: 100%; height: auto; float: left;">
        <div class="left">
            <h3>Uw gegevens</h3>
            <p style="margin-bottom: 30px; height: 40px; width: 100%;">
                <input type="radio" id="zml_geslacht" name="zml0" value="de Heer"/><span style="float: left; margin-top: -5px; height: 25px;">de Heer</span><br />
                <input type="radio" id="zml_geslacht" name="zml0" value="Mevrouw"/><span style="float: left; margin-top: -5px; height: 25px;">Mevrouw</span>
            </p>
            <p>
                <input type="text" id="zml_voornaam" name="zml1" value="Uw voornaam" onblur="if(this.value=='') this.value='Uw voornaam';" onfocus="if(this.value=='Uw voornaam') this.value='';"/>
                <input type="text" id="zml_achternaam" name="zml2" value="Uw achternaam *" onblur="if(this.value=='') this.value='Uw achternaam *';" onfocus="if(this.value=='Uw achternaam *') this.value='';"/>
            </p>
            <p>
                <input type="text" id="zml_email" name="zml3" value="Uw e-mailadres *" onblur="if(this.value=='') this.value='Uw e-mailadres *';" onfocus="if(this.value=='Uw e-mailadres *') this.value='';"/>
            </p>
        </div>

        <div class="right">
            <h3>Uw reservering</h3>
            <p style="height:68px;">
                <textarea name="zml13" id="zml_opmerkingen" rows="12">Opmerkingen</textarea>
            </p>    

            <p><input type="submit" name="submit" id="submit" value="Email Us!" /></p>
            <ul id="response" />
        </div>
    </div><!--end main -->

</div><!-- end container -->
</form> 
```

这通过ajax，如下所示：

```
var zml0 = $('input#zml_geslacht').html( $(':checked').val());
var zml1 = $('input#zml_voornaam').val();
var zml2 = $('input#zml_achternaam').val();
var zml3 = $('input#zml_email').val();
var zml13 = $('textarea#zml_opmerkingen').val();

$.ajax({
    type: 'post',
    url: 'sendEmail.php',
    data: 'zml0=' + zml0 + '&zml1=' + zml1 + '&zml2=' + zml2 + '&zml3=' + zml3 + '&zml13=' + zml13,

    success: function(results) {
        $('#main img.loaderIcon').fadeOut(1000);
        $('ul#response').html(results);
    }
}); // end ajax 
```

之后它转到我的 sendEmail.php 以将表单发送到电子邮件地址（并将其存储在数据库中）。查询是：

```
 $zml0 = $_REQUEST['zml0']; // Geslacht

    // database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

// query
$sql = "INSERT INTO test (zml0,zml1,zml2) VALUES (:zml0,:zml1,:zml2)";
$q = $conn->prepare($sql);
$q->execute(array(':zml0'=>$zml0,
                  ':zml1'=>$zml1,
                  ':zml2'=>$zml2)); 
```

一切正常。我还有姓名、电子邮件地址等，除了 Gender 单选按钮（荷兰语中的 Gender 是 Geslacht，我将其命名为 zml0 以更好地防止垃圾邮件发送者）。当然，这个想法是用户应该选择女性或男性。

当它存储在数据库中时，它所说的只是[object Object]。另外，当我只是回显输入时。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:32:09.983

尝试这个：

```
var zml0 = $('input[name=zml0]:checked').val(); 
```

您可以尝试的另一件事是：

```
$.ajax({
    type: 'post',
    url: 'sendEmail.php',
    data: $('#form_reserveren').serialize(),

    success: function(results) {
        $('#main img.loaderIcon').fadeOut(1000);
        $('ul#response').html(results);
    }
}); // end ajax 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:33:56.527

这一行是问题：

```
var zml0 = $('input#zml_geslacht').html( $(':checked').val()); 
```

似乎是一个全局变量，因此如果您选中另一个框，则无关紧要。你总是会发送初始值。好吧，如果它是正确的，你会的。第二个问题是你只是在抓取 html？从它，而不是实际价值。显然这是返回一个对象。

您的 ajax 调用应获取当时的表单输入：

```
$.ajax({
    type: 'post',
    url: 'sendEmail.php',
    data: 'zml0=' + $('input[name=zml0]:checked').val(),

    success: function(results) {
        $('#main img.loaderIcon').fadeOut(1000);
        $('ul#response').html(results);
    }
}); 
```

# python - 如何判断 NumPy 是创建视图还是副本？

> ID：11524664
> 
> 赞同：80
> 
> 时间：2012-07-17T14:26:05.840
> 
> 标签：python, numpy, copy

对于一个最小的工作示例，让我们数字化一个 2D 数组。`numpy.digitize`需要一维数组：

```
import numpy as np
N = 200
A = np.random.random((N, N))
X = np.linspace(0, 1, 20)
print np.digitize(A.ravel(), X).reshape((N, N)) 
```

现在[文档说](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)：

> ...仅在需要时才制作副本。

在这种情况下，我如何知道`ravel`它是否“需要”副本？一般来说 - 有没有一种方法可以确定特定操作是创建副本还是视图？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-07-17T14:30:03.857

[这个问题与我不久前提出的一个问题](https://stackoverflow.com/q/11286864/748858)非常相似：

您可以检查`base`属性。

```
a = np.arange(50)
b = a.reshape((5, 10))
print (b.base is a) 
```

然而，这并不完美。您还可以检查他们是否使用`np.may_share_memory`.

```
print (np.may_share_memory(a, b)) 
```

您还可以检查 flags 属性：

```
print (b.flags['OWNDATA'])  #False -- apparently this is a view
e = np.ravel(b[:, 2])
print (e.flags['OWNDATA'])  #True -- Apparently this is a new numpy object. 
```

但是最后一个对我来说似乎有点可疑，虽然我不能完全弄清楚为什么......

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-11T03:40:59.530

在[reshape](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html#numpy.reshape)的文档中，有一些关于如何在无法创建视图时确保异常的信息：

> 在不复制数据的情况下，并非总是可以更改数组的形状。如果要在复制数据时引发错误，则应将新形状分配给数组的形状属性：

```
>>> a = np.zeros((10, 2))
# A transpose make the array non-contiguous
>>> b = a.T
# Taking a view makes it possible to modify the shape without modiying the
# initial object.
>>> c = b.view()
>>> c.shape = (20)
AttributeError: incompatible shape for a non-contiguous array 
```

这不完全是您问题的答案，但在某些情况下它可能同样有用。

# javascript - JavaScript+Phonegap+Android：screen.width 返回错误（几乎是随机）值

> ID：11524669
> 
> 赞同：3
> 
> 时间：2012-07-17T14:26:28.350
> 
> 标签：javascript, android, css, cordova, width

在启动带有“deviceready”事件的应用程序后，我在 Android 上的 Phonegap 应用程序在 ZTE Blade（本机 800 像素）上返回 false screen.width（window.innerWidth 相同）值。当多次询问时，我会得到 320、533 或 787 像素等宽度值，有时在一个应用程序实例（启动）中会出现不同的值......

我的 AndroidManifest.xml 中有 android:screenOrientation="landscape"。在 Eclipse (Indigo) 中使用 Phonegap/Cordova 1.8.1。

screen.width 的一些示例值：

在 index.html 中

*   在 document.addEventListener+"deviceready" 之前：320
*   就在“设备就绪”之后：320

然后重定向 3 次（将 window.location 更改为不同的 HTML 文件），因为 2 个闪屏，最后登陆到 main.html。我在每个文件中都包含我的 .js 代码，仅用于调试，并获得 3 个 console.logs：

1.  320
2.  787
3.  787

很奇怪...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:25:23.390

您应该阅读一篇综合文章（+不同值的比较表）：http: [//tripleodeon.com/2011/12/first-understand-your-screen/](http://tripleodeon.com/2011/12/first-understand-your-screen/)

希望这对您的问题有所帮助。

# emacs - 如何检查 emacs 是否安装了库？

> ID：11524673
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:33.063
> 
> 标签：emacs

我想检查是否已经安装了pymacs。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T14:33:10.497

`M-x locate-library`将告诉您 emacs 是否可以在其`load-path`. 如果它没有返回任何内容，您可能需要先进行编辑`load-path`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T15:22:32.110

There are many ways to do it.

*   type apropos, then pymacs. If it finds the symbols, it was loaded.

*   (require 'pymacs) -- if it does not return error, it was loaded

*   if you already loaded it, it called (provide 'pymacs), and the variable load-history keeps the symbols

There are still other ways to ckeck it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:33:15.133

不确定您是否在谈论 ELPA 包，但我的 .emacs 中有以下定义：

```
  (defun sh-elpa-ensure-package (名称)
      “确保安装了特定的软件包；如果没有，那么
  自动下载，编译和安装它。

  这主要由 sh-elpa-require 用于允许部署
  新机器的配置 - 因此包将是
  在新机器上下载（安装后它们是
  包管理器自动保持最新）。

  如下使用它：
  (sh-elpa-ensure-package 'org)"
      (if (not (package-installed-p name))
          （包安装名称）））

    (defun sh-elpa-require (名称)
      “标准 Emacs 'require' 的替代品
  功能。这使用 sh-elpa-require 下载并安装
  如有必要，在使用标准“要求”之前打包
  导入它的功能。这对于允许配置很有用
  只需“sh-elpa-require”一个包而不必费心
  检查它是否已经安装。”
      （sh-elpa-ensure-package 名称）
      （需要姓名））

```

然后我可以在我的 .emacs 中包含如下代码来激活包 - 如果它尚未安装，那么这将从 ELPA 下载它并在它是“必需的”之前对其进行字节编译：

```
(sh-elpa-require 'pymacs) 
```

如果您只是在谈论检查是否从 elisp 安装了一个包，那么您也可以从上面的代码片段中挑选出它的骨架 - 请参阅该`(if (not (package-installed-p name))`位。

# css - 如何使文本区域看起来与 div 元素完全相同？

> ID：11524676
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:41.410
> 
> 标签：css, html, cross-browser, textarea

我需要在所有浏览器中使 a`textarea`和 a`div`看起来完全相同。

我有这个代码：http: [//jsfiddle.net/eric777/XHtY9/](http://jsfiddle.net/eric777/XHtY9/)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:36:21.163

首先，我相信强迫某些东西在所有浏览器中看起来完全相同是一种即将消亡的方法。接受差异并让输入等在浏览器之间的风格略有不同要容易得多。无论如何，很少有访问者会通过多个浏览器访问您的网站，因此很少有人会注意到差异。

现在回答你的实际问题。由于您尚未指定 textarea/div 的外观，因此我无法为您提供完整的属性集，但这里有一种方法来实现它。

1.  使用 CSS 重置，[比如这个](http://meyerweb.com/eric/tools/css/reset/)（还有其他的），以摆脱每个浏览器应用的默认样式。现在页面在所有浏览器中都以相同的外观开始。

2.  在 div 和 textarea 上应用您想要的样式。

3.  当内容不适合时，文本区域将默认滚动。您可能必须`div`使用`overflow-y: scroll;`.

# vb.net - 如何使用 vb.net 解决系统安全异常

> ID：11524678
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:46.150
> 
> 标签：vb.net, filesystemobject

在一种情况下， `Exception from HRESULT: 0x800A0046 (CTL_E_PERMISSIONDENIED)`当我尝试使用 vb.net 中的文件系统对象创建文件和写入数据时，我得到了

```
DIM fso,file
const ForWriting = 2
fso = CreateObject("Scripting.FileSystemObject")
file= fso.opentextfile("C:\test\log.csv",ForWriting,True)
file.write("This,is,a,sampledata")
file.close() 
```

我该如何解决这个问题，请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:28:02.777

`FileSystemObject`除非绝对必要，否则使用旧版 COM是个坏主意。使用 .NET 框架中的托管库将为您提供更好的错误信息。例如，您只需执行以下操作即可完成完全相同的事情：

```
Try
    File.WriteAllText("C:\test\log.csv", "C:\test\log.csv")
Catch ex As Exception
    ' Handle the exception.  See ex.ToString() for full info.
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T06:57:28.763

我遇到了与 JScript 相同的问题，但前提是我之前创建了文件。

```
var fso = new ActiveXObject("Scripting.FileSystemObject");
fso.CreateTextFile(filename); 
```

如果文件已经存在，我可以读取或写入文件。

```
var fso = new ActiveXObject("Scripting.FileSystemObject");

// Create the file, and obtain a file object for the file.
var filename = "testfile.txt";

//here no create! --> fso.CreateTextFile(filename);
var fileObj = fso.GetFile(filename);

// Open a text stream for output.
var ts = fileObj.OpenAsTextStream(ForWriting, TristateUseDefault);

// Write to the text stream.
ts.WriteLine("Hello World!");
ts.WriteLine("The quick brown fox");
ts.Close(); 
```

它有效，但如果您知道所需的文件，这是一种解决方法。否则你会得到 System.Security.SecurityException: HRESULT: 0x800A0046 (CTL_E_PERMISSIONDENIED)。

**编辑::** MSDN 说：在上面显示的代码中，CreateObject 函数返回 FileSystemObject (fs)。然后 CreateTextFile 方法将文件创建为 TextStream 对象 (a)，WriteLine 方法将一行文本写入创建的文本文件。Close 方法刷新缓冲区并关闭文件。

所以我尝试了这个，它对我有用：

```
var ForReading = 1, ForWriting = 2, ForAppending = 8;
var TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0;

var fso = new ActiveXObject("Scripting.FileSystemObject");

// Create the file, and obtain a file object for the file.
var filename = "testfile.txt";
var tss = fso.CreateTextFile(filename);
tss.close();
var fileObj = fso.GetFile(filename);

// Open a text stream for output.
var ts = fileObj.OpenAsTextStream(ForWriting, TristateUseDefault);

// Write to the text stream.
ts.WriteLine("Hello World!");
ts.WriteLine("The quick brown fox");
ts.Close(); 
```

创建文件后，您必须先将其关闭，因为 createFileMethod 将文件创建为 TextStream 对象。只要它是作为 TextStream 创建的，它就被锁定在文件系统上。

# php - 使用函数查找和替换首先操作匹配项

> ID：11524679
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:47.513
> 
> 标签：php, regex, sed, replace

我需要在文件中搜索包含数字的某些行，然后在将它们替换到文件中之前对这些数字进行一些操作。例如，假设我有这样的一行：

```
normal: { x: 50, y: 50 } 
```

我需要找到该行，将两个数字除以 2，然后替换该行中的数字并更新文件。我编写正则表达式来查找该行没有问题，并编写了一个`preg_replace_callback()`用于操作数字的小 PHP 脚本，但我需要能够替换数字然后只更新文件中的那一行。我很乐意使用 bash/sed/awk 或 Ruby 或 Python 或 PHP，但我不是这些方面的专家。

我应该只读入整个文件，`replace_callbacks`然后覆盖文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:36:52.687

是的。你建议的是最好的选择。读取整个文件，替换数字（你已经这样做了），然后写回整个文件。

如果你有一个非常大的文件，你可能会遇到麻烦，因为它不适合内存。你当然可以，扫描文件，只替换你需要替换的。如果您要摆弄文件句柄，并且只覆盖您需要覆盖的字节（并且不理会文件的其余部分），您可能会发现自己处于以下情况：

```
normal: { x: 10, y: 6 } 
```

成为

```
normal: { x: 5, y: 3 } 
```

因此你丢失了一个字节，因为“10”变成了“5”。:-) 在您的示例中，您可以改用空格，但我不知道这是否适用于您遇到的所有情况。

简而言之：做你自己建议的事情：阅读、操作和回写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:45:14.697

使用 preg_replace 您可以像这样用自定义函数替换内容..：
在此示例中，值 50 将被发送到 cnt 函数，计算并发送回替换函数..：

```
<?php
function cnt($x){
    return $x/2;
}

$txt="normal: { x: 50, y: 50 }";  //Replace this with content of your file
$x=preg_replace("/(normal: { x: )(\d+)(, y: )(\d+)( })/e", "'\\1'.cnt(\\2).'\\3'.cnt(\\4).'\\5'", $txt);
echo $x; //Output:  normal: { x: 25, y: 25 }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:30:56.920

您想以字符串形式读取文件。使用 preg_match 获取您想要操纵的数字，然后操纵它们。然后将这些数字放回字符串并将整个内容写入文件。

# c# - Telerik.OpenAccess.OpenAccessException 未被用户代码处理

> ID：11524680
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:49.777
> 
> 标签：c#, telerik, etl

以下是我遇到的错误。请帮助解决这个问题。

```
Telerik.OpenAccess.OpenAccessException was unhandled by user code
  Message=No metadata has been registered for class Ind.Data.IndiStage.Academy. (This usually indicates, that either this class is not declared persistent or it is declared persistent but not enhanced. The class was loaded from file:///C:/Users/suresh/Documents/WorkSpace/Ind_folder/Ind.ETLService/bin/Release/Ind.Data.IndiStage.DLL.)
  Source=Telerik.OpenAccess
  CanRetry=true
  StackTrace:
       at Telerik.OpenAccess.SPI.Backends.ThrowException(Exception e)
       at OpenAccessRuntime.ExceptionWrapper.Throw()
       at OpenAccessRuntime.storagemanager.StorageManagerFactoryBuilder.createSmfForURL()
       at OpenAccessRuntime.storagemanager.StorageManagerFactoryBuilder.createStorageManagerFactory()
       at OpenAccessRuntime.DataObjects.PersistenceManagerFactoryImp.createStorageManagerFactory()
       at OpenAccessRuntime.DataObjects.PersistenceManagerFactoryBase.init()
       at OpenAccessRuntime.DataObjects.PersistenceManagerFactoryImp.init()
       at OpenAccessRuntime.DataObjects.PersistenceManagerFactoryImp..ctor(PropertySet properties, Object classloader)
       at OpenAccessRuntime.DataObjects.PersistenceManagerFactoryImp.getPersistenceManagerFactory(PropertySet props)
       at OpenAccessRuntime.DataObjects.BootstrapPMF.getPersistenceManagerFactory(PropertySet props)
       at OpenAccessRuntime.Helper.getPersistenceManagerFactory(PropertySet props)
       at OpenAccessRuntime.DatabaseAdapter.AssertPersistenceManagerFactory(String usr, String password, Boolean open)
       at OpenAccessRuntime.DatabaseAdapter.GetObjectScope(TransactionProvider provider)
       at Telerik.OpenAccess.Database.GetObjectScope(TransactionProvider provider)
       at Telerik.OpenAccess.OpenAccessContextBase.GetScope()
       at Telerik.OpenAccess.OpenAccessContext.GetAllCore[T]()
       at Telerik.OpenAccess.OpenAccessContext.GetAll[T]()
       at System.Timers.Timer.MyTimerCallback(Object state)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T11:13:59.140

哇。我很难摆脱这个例外。Telerik OpenAccess 的“没有为班级注册元数据”。

阅读这篇文章**，尤其是你使用像 TeamCity 这样的 CI 构建系统**：http : [//docs.telerik.com/data-access/developers-guide/integrating-data-access-in-your-solution/external-tools-howto-integrate-增强器-msbuild](http://docs.telerik.com/data-access/developers-guide/integrating-data-access-in-your-solution/external-tools-howto-integrate-enhancer-msbuild)

# stored-procedures - Crystal Reports XI 中存储过程的数据库字段

> ID：11524681
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:26:49.557
> 
> 标签：stored-procedures, crystal-reports

我在 SQL Server 2008 中有一个存储过程，如下所示：

```
if something

select 
x, y
... from table 1

 else 

select
a, b
... from table 2 
```

Crytal Reports 中的数据库字段未显示我`a`和`b`第二条语句，而仅显示`x`, `y`。

如何在 Crystal Report 中进行以便拥有所有这些字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:31:57.987

究竟是`something`什么？如果您的程序是这样编写的，那么您的报告将只会返回`x`and`y`或`a`and ，`b`具体取决于您的`IF`语句返回的内容。

如果您希望所有这些都返回，您需要使用您的程序编辑您的问题，并显示您的数据结构。我强烈怀疑您将需要一些组合`SELECT CASE`和/或`UNION`加入您的表格并有条件地返回列。

# c++ - 逻辑比较运算符

> ID：11524682
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:26:50.960
> 
> 标签：c++, oop, function, error-handling, operator-overloading

这是我的逻辑比较运算符（==）重载的代码。我用它来检查两个字符串的大小和内容是否相同。否则它应该返回 false 。

```
 bool MyString::operator==(const MyString& other)const
 {
    if(other.Size == this->Size)
    {
        for(int i = 0; i < this->Size+1; i++)
        {
            if(&other == this)                          
                  return true;            
        }
    }
    else
        return false;
 } 
```

当我运行 valgrind 时，它告诉我警告控制到达非空函数的末尾。有关如何解决此问题以及我可以做些什么来改进代码的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:31:43.843

当控制到达`for`循环的末尾时，您会立即到达函数的末尾而不返回值。

在我看来，你的`for`循环中的逻辑无论如何都被修改了——它正在将另一个项目的地址与这个进行比较。虽然这样做是可以的，但您只需要这样做一次，而不是循环。

在循环中，您无疑想要比较字符串中的字符，而不是对象的地址。

编辑：

一个典型的实现将是这样的一般顺序：

```
class MyString { 
    char *data;
    size_t length;
public:
    // ...
    bool operator==(MyString const &other) const {
        if (length != other.length)
            return false;
        for (int i=0; i<length; i++)
            if (data[i] != other.data[i]) // If we see any inequality
                return false;             //     they're not equal
        return true;                      // all equal, so the strings are equal.
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:36:28.337

如果大小相等，尚不清楚是什么决定了相等，但循环表明您正在寻找类似的东西：

```
bool
MyString::operator==( MyString const& other ) const
{
    return size == other.size && std::equals( ??? );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T15:47:17.870

好吧，首先，如果你进入`for`循环，并且条件`&other == this`不会被满足，你将永远不会返回任何东西。要解决此问题，您应该删除该`else`语句。`other.Size == this->Size`如果条件不满足，或者您已经完成了整个循环并且没有在其中使用，这将导致您的函数返回 false `return`。

第二个问题是线路`if(&other == this)`。我相信在循环内部您打算检查字符串的所有符号。但是现在您只检查指向类本身的指针。要检查字符，您将需要使用类似的东西`if( other->data == this->data )`，前提是您有一个`data`存储...数据的成员（抱歉重言式）。

另一个小流程是在设计中。你看，要检查字符串*是否*相等，你需要查看每个字符并检查它们是否匹配。但是，要证明字符串*不*相等，您只需找到 1 对不匹配的字符。之后，继续比较是没有意义的。因此，最好将循环中的条件更改为否定条件，以便在找到不匹配的对后立即停止比较，并且不要对其他字符进行无用的比较。

一般来说，最好尽快返回所有错误并避免不必要的计算。因此，如果您可以通过简单的检查在函数开始时检查某些内容，那么最好这样做。

所以，毕竟，你应该有这样的东西：

```
bool MyString::operator==(const MyString& other)const
{
   if(other.Size != this->Size)
       return false;//If the sizes do not match, no need to check anything else. Just return false.

   //If we are here, the sizes match. Lets check the characters.
   for(int i = 0; i < this->Size+1; i++)
   {
       //If some pair doesnt match, the strings are not equal, and we exit.
       if( other->data[i] != this->data[i])                          
                  return false;
   }

   //If we are here, all the characters did match, so we return true.
   return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:31:50.373

只需摆脱`else`. 这样，`false`如果不满足条件，则会返回“默认”行为。这是您想要的功能，编译器或语法检查器不会抱怨。

# django - Django livesettings - 灰色组

> ID：11524683
> 
> 赞同：0
> 
> 时间：2012-07-17T14:26:51.413
> 
> 标签：django, django-admin, settings, admin

我正在使用[django-livesettings](http://django-livesettings.readthedocs.org)来提供由管理员设置的其他参数。

我想做的一件事是根据组是否已启用而将它们显示为灰色。

一个例子是启用 pop3 或 imap 邮件设置，可能通过单选按钮。如果管理员启用 pop3，则所有 imap 设置都将显示为灰色。

另一个示例可能只是一个简单的组启用复选框。如果该组未启用，则无需输入更多信息。

我想明确哪些设置有效。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:18:09.383

听起来像，你需要用 JS/CSS 来做。使用带有[settings.TEMPLATE_DIRS的项目特定模板覆盖，或者在](https://docs.djangoproject.com/en/dev/ref/settings/#template-dirs)[Bitbucket](http://bitbucket.org/bkroeze/django-livesettings)上 fork 项目并添加您的功能。

# android - Mono for Android MySQL 连接

> ID：11524684
> 
> 赞同：1
> 
> 时间：2012-07-17T14:26:52.687
> 
> 标签：android, mysql

我刚刚开始在 Mono for Android 上沾沾自喜。我有一个具有 MySQL 数据库的远程服务器，我的问题是有没有办法从我的 android 应用程序连接到数据库并执行 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:30:24.250

您将需要构建一个 Web 服务来连接您的应用程序和数据库！您不应该尝试直接连接！

这看起来像是一个很好的教程和解释为什么你不能直接连接：[http ://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html](http://www.basic4ppc.com/forum/basic4android-getting-started-tutorials/8339-connect-android-mysql-database-tutorial.html)

其他一些类似的 StackOverflow 问题：

[android直接使用mysql-connector连接mysql数据库](https://stackoverflow.com/questions/9904742/android-connect-to-mysql-database-directly-using-mysql-connector)

# user-data - 如何在会话期间检索特定用户数据

> ID：11524697
> 
> 赞同：0
> 
> 时间：2012-07-17T14:27:34.123
> 
> 标签：user-data

我在我的网站上设置了一个个人资料系统，用户可以在其中注册、填写他们的用户名、密码和简短的“关于我”描述。查看他们的个人资料时，我似乎无法正确显示“关于我”的内容。它会不断显示来自表上每个用户的所有关于我的信息，而不是当前用户的个人资料。

这就是我所拥有的

```
$query = mysql_query("select aboutme from plus_signup");

while ($row = mysql_fetch_array($query)) {
echo $row['aboutme']. " ";

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:31:29.500

似乎您无条件要求所有餐桌。

也许你错过了类似的东西

```
$query = mysql_query("select aboutme from plus_signup where id=".$user_id);
... 
```

# sql - .NET 身份验证问题

> ID：11524703
> 
> 赞同：1
> 
> 时间：2012-07-17T14:27:47.727
> 
> 标签：sql, sql-server, authentication, migration, connection-string

我最近一直在为客户开发一个 ASP.NET 项目。该项目是将数据库从旧的 Oracle 数据库迁移到新的 SQL Server 2008 数据库。迁移进行得很顺利，大部分程序并没有花很长时间来修复。但是我们现在遇到了一个问题，到目前为止，我们一直在使用 SQL Server 身份验证并使用用户名和密码从 .NET 代码访问数据库。下面显示了连接字符串：

```
<add key="DatabaseConnectionString" value="Data Source=DATASOURCE;Initial Catalog=DATABASE;User Id=USERID;Password=PASSWORD;"/> 
```

这工作得很好，但是最近我收到了客户的电子邮件说：

“您可以使用 Active Directory 帐户，而不是使用 .NET 应用程序的本地 SQL 帐户来访问数据库。在 web.config 中，它会显示`<domain name>/<username>`而不仅仅是`<username>`.”

我感到困惑的是：

我是否必须将 SQL Server 中的身份验证模式更改为 Windows 身份验证？客户的意思是将其从 to 更改`<username>`为`<domain>/<username>`或相反？我需要在 web.config 中的什么位置对用户名进行此更改？它在连接字符串中吗？

对此的任何帮助都会很棒。

我也不确定你是否需要知道这一点，但无论如何我已经添加了它......

这是 web.config 的 Authentication 部分：

```
<identity impersonate="true"/>
<authentication mode="Windows"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:43:34.167

> 我是否必须将 SQL Server 中的身份验证模式更改为 Windows 身份验证？

不，因为始终启用 Windows 身份验证。但是，禁用 Sql Server 身份验证是一种很好的做法。

> 客户端是否意味着将其从“用户名”更改为“域/用户名”

不，这不仅仅是添加域名。您需要针对活动目录对用户进行身份验证，并使用委托进行 sql 连接。要使用 windows 帐户，您需要决定是要特定帐户访问 Sql Server，还是要登录网站的用户帐户。我认为第一种方法几乎总是更好。为此，您需要从连接字符串中删除用户 ID 和密码，并将其替换为“Integrated Security=SSPI”，并将应用程序池标识设置为活动目录用户帐户。在 Sql Server 中，您需要授予此帐户执行所需操作的权限。对于第二种方式，您需要对网站中的用户进行 Windows 身份验证，并使用委托进行连接。我不知道模仿是否足够。

# deployment - 如何解决 JBOSS AS7 上的钩子部署错误：无法处理部署的阶段安装

> ID：11524704
> 
> 赞同：0
> 
> 时间：2012-07-17T14:27:49.043
> 
> 标签：deployment, jboss, liferay, jboss7.x, liferay-6

当我尝试部署我的时，我收到以下错误（完整堆栈跟踪）`TagsNavigation-hook.war`：

```
14:04:37,562 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) Starting deployment of "TagsNavigation-hook.war"
14:04:37,589 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) added javax.persistence.api dependency to TagsNavigation-hook.war
14:04:37,596 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."TagsNavigation-hook.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.unit."TagsNavigation-hook.war".INSTALL: Failed to process phase INSTALL of deployment "TagsNavigation-hook.war"
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [:1.7.0_04]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [:1.7.0_04]
        at java.lang.Thread.run(Unknown Source) [:1.7.0_04]
Caused by: java.lang.RuntimeException: Failed to load class com.liferay.taglib.portlet.NamespaceTag
        at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:141)
        at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:122)
        at org.jboss.as.ee.component.LazyValue.get(LazyValue.java:40)
        at org.jboss.as.ee.component.EEApplicationDescription.getClassConfiguration(EEApplicationDescription.java:183)
        at org.jboss.as.ee.component.ComponentDescription.createConfiguration(ComponentDescription.java:153)
        at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:70)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
        ... 5 more
Caused by: java.lang.ClassNotFoundException: com.liferay.taglib.portlet.NamespaceTag from [Module "deployment.TagsNavigation-hook.war:main" from Service Module Loader]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
        at java.lang.Class.forName0(Native Method) [:1.7.0_04]
        at java.lang.Class.forName(Unknown Source) [:1.7.0_04]
        at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:139)
        ... 11 more 
```

这以前可以工作，但是在我通过直接`TagsNavigation-hook.war`从位置删除取消部署后无法正常工作`\liferay-portal-6.1.10-ee-ga1\jboss-7.0.2\standalone\deployments`，在我通过liferay取消部署的另一台Jboss服务器上`Control Panel --> Update Manager`

我尝试了以下方法：

1.  将文件重命名`TagsNavigation-hook.war.failed`为`TagsNavigation-hook.war.dodeploy`但仍然相同的错误。
2.  停止服务器，然后将其更改为`TagsNavigation-hook.war.dodeploy`然后重新启动服务器，但仍然是同一件事。
3.  完全删除`TagsNavigation-hook.war`和`TagsNavigation-hook.war.failed`文件，然后部署它。我尝试将此作为热部署以及停止服务器->部署->启动服务器。

其他插件部署（主题、钩子和 portlet）运行良好。这个钩子在 Tomcat-7 上也能正常工作！

**环境：** Liferay 6.1.10 EE 与 Linux 上的 JBOSS 7.0.2 捆绑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:58:27.583

现在它正在工作。

我刚刚添加了这个属性：`portal-dependency-jars=util-taglib.jar`在里面`liferay-plugin-package.properties`然后部署。

这感觉很奇怪，因为钩子在没有定义属性的情况下在 tomcat 上工作得非常好，而且只有在 Jboss 上它才会给出这个错误，而且只有在我取消部署它之后才会出现这个错误。

# objective-c - GCDAsyncSocket 标签参数

> ID：11524710
> 
> 赞同：3
> 
> 时间：2012-07-17T14:28:02.163
> 
> 标签：objective-c, gcdasyncsocket

我想知道如何在方法中使用标签参数，例如

```
readDataWithTimeout: tag:
writeData: tag: 
```

如果我想使用标签来识别数据包的类型会怎样？例如，我说标签 == 2 表示数据包是来自客户端的消息，标签 == 1 表示数据包是来自服务器的消息...如果可以，我是否需要调用 readData: withTag:几次（每个不同的标签一次）？

```
[readDataWithTimeout:-1 tag:1];
[readDataWithTimeout:-1 tag:2]; 
```

有没有办法说：“读取每个数据而不关心标签”，然后在 didReadData: withTag: 方法中根据标签处理数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T15:55:34.560

我认为您对标签概念略有误解。读取操作*并不是*说“读取已标记为 2 的数据”。他们说“从网络*中*读取下一个数据，并将其标记为 2 以供将来参考。”

标签永远不会通过网络发送 - 服务器没有标记数据并将其发送给客户端进行读取。这是一个完全可选的概念，仅用于区分*本地*操作。换句话说，正在读取的数据没有标签。标签是您分配给读取操作的东西，因此您可以在完成后稍后识别它。

例如，假设您正在以一系列标头和有效负载的形式读取数据。您可以使用标签来区分标头读取和有效负载读取：

```
const NSInteger kHeaderTag = 1;
const NSInteger kPayloadTag = 2;

// Assume you know to expect a header, so tag the read operation as such.
[self readDataWithTimeout:-1 tag:kHeaderTag];

// Next assume you know to expect a payload, so tag the read operation as such.
[self readDataWithTimeout:-1 tag:kPayloadTag]; 
```

然后你可以稍后识别它......

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    if (tag == kHeaderTag)
    {
        // Handle header
    }
    else if (tag == kPayloadTag)
    {
        // Handle payload
    }
} 
```

# .net - 为什么我的模型的相关数据没有加载？

> ID：11524713
> 
> 赞同：0
> 
> 时间：2012-07-17T14:28:13.583
> 
> 标签：.net, entity-framework-4, ef-code-first

我有一个首先使用 EF 4 代码构建的数据库，这里有两个模型：

```
Public Class HvacAudit
    Public Property HvacAuditID As Integer

    Public Overridable Property HvacAuditPictures As IEnumerable(Of HvacAuditPicture)

    ... other properties
 End Class

Public Class HvacAuditPicture
    Public Property HvacAuditPictureID As Integer

    Public Property HvacAuditID As Integer
    Public Overridable Property HvacAudit As HvacAudit

    ... other properties
End Class 
```

当我从数据库中提取我的 HvacAudit 记录时，它们没有 HvacAuditPictures！即使我直接拉图片，它们也在那里。考虑

```
context.HvacAudits.Where(Function(hva) hva.HvacAuditID = 1).HvacAuditPictures Is Nothing 'evaluates true

context.HvacAuditPictures.Where(Function(p) p.HvacAuditID = 1).Count() 'is currently 20 
```

这是我的上下文类：

```
Public Class EfContext
Inherits DbContext
Implements IDataSource

Public Property HvacAudits As IDbSet(Of HvacAudit) Implements IDataSource.HvacAudits
Public Property Vendors As IDbSet(Of Vendor) Implements IDataSource.Vendors
Public Property HvacAuditPictures As IDbSet(Of HvacAuditPicture) Implements IDataSource.HvacAuditPictures
Public Property Sites As IDbSet(Of Site)
Public Property Markets As IDbSet(Of Market)

Public Sub SaveChanges1() Implements Domain.DataSource.IDataSource.SaveChanges
    SaveChanges()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:32:35.797

找到了答案。关系的“多”侧的导航属性必须是*ICollection(Of T)*，而不是*IEnumerable(Of T)*。

```
Public Class HvacAudit
    Public Property HvacAuditID As Integer

    Public Overridable Property HvacAuditPictures As ICollection(Of HvacAuditPicture)

   ... other properties
End Class 
```

# java - gcm-server.jar 主要版本错误，偏移量=6

> ID：11524714
> 
> 赞同：0
> 
> 时间：2012-07-17T14:28:15.000
> 
> 标签：java, android, google-cloud-messaging

我对 gcm-server.jar 有疑问。直到昨天一切正常，现在当我将我的 war 文件部署到服务器时，我收到了这个错误：

```
java.lang.UnsupportedClassVersionError: (com/google/android/gcm/server/InvalidRequestException) bad major version at offset=6 
```

当我打开 gcm-server.jar 有评论：

```
Compiled from InvalidRequestException.java (version 1.6 : 50.0, super bit) 
```

我正在使用运行 java5 的 Eclipse。我需要做什么才能让它与 java5 一起工作？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:26:22.370

我使用 jdk 5.0 从 gcm-server 编译了必要的类并生成了新的 gcm-server.jar。现在一切正常。

# java - 使用 Java Mail API 保存草稿消息？

> ID：11524716
> 
> 赞同：4
> 
> 时间：2012-07-17T14:28:24.377
> 
> 标签：java, jakarta-mail

目前我正在做以下事情，

```
@Override
public void saveDraftMessage(MimeMessage draftMessage) throws MessagingException 
{
    Folder draftsMailBoxFolder = imapsStore.getFolder("inbox");//[Gmail]/Drafts
    draftsMailBoxFolder.open(Folder.READ_WRITE);    
    draftMessage.setFlag(Flag.DRAFT, true);
    MimeMessage draftMessages[] = {draftMessage};
    draftsMailBoxFolder.appendMessages(draftMessages);
} 
```

它可以工作，但是，正如您所看到的，消息被附加到“收件箱”文件夹而没有服务器端的抱怨！

是否有任何类型的验证或替代方法来确保消息仅在适当的位置保存为草稿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T18:16:31.057

正如上面其他人所建议的那样，您需要将草稿消息存储在不同的文件夹中。您可以选择该文件夹的名称。如果您只使用 Gmail，并且希望与 Gmail 的操作保持一致，那么将其保存在 Gmail 使用的文件夹（“[Gmail]/Drafts”？）中会很有意义。发送邮件时，请记住从文件夹中删除邮件。

# git - 部署的 GIT 接收后挂钩似乎不起作用

> ID：11524719
> 
> 赞同：3
> 
> 时间：2012-07-17T14:28:40.197
> 
> 标签：git, ubuntu

我正在尝试使用 Git 使用本文所述的 post-receive 挂钩将我的文件推送到我的测试服务器：

[http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)

似乎对此有很多讨论，大多数人似乎都让它发挥作用。我的问题是 /hooks 目录中没有 post-receive.sample 文件，所以我手动创建一个。我也尝试过使用更新后文件，但我似乎没有得到任何结果。我的问题是：

1.  有没有我可以查看的日志以查看是否有任何东西在运行？

2.  收到后有替代品吗？

我在 Ubuntu 上使用 Git v 1.7.9.5 作为服务器，在 Windows 上使用 v 1.7.10 作为客户端。

注意：推送似乎从客户端工作得很好，但看起来好像结帐没有在服务器上发生。

# iphone - 激活 Lite 到专业版流程

> ID：11524720
> 
> 赞同：0
> 
> 时间：2012-07-17T14:28:42.567
> 
> 标签：iphone, xcode, ipad

我正在为我拥有的专业版应用程序构建精简版。Lite 版本有一些功能被“阻止”，没有作为完整的专业版激活，还有一个购买按钮来购买或升级到专业版。

我不清楚的是，当拥有 Lite 版本的用户购买 Pro 版本时，实际上会发生这种情况，他是否将新的 Pro 包安装到他的 iphone/ipad 并且 Lite 版本仍然存在（直到用户卸载它，如果他选择）还是我需要删除 Lite 版本限制并在这一点上让相同的应用程序表现得像 Pro 全功能版本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:34:09.327

您的两个建议之间的正确选择实际上取决于您是否使用应用内购买。

**使用**应用内购买，您必须交付禁用功能的完整应用。然后升级按钮将触发应用内购买。成功购买后，您将以编程方式解锁锁定的功能。

**如果没有**应用内购买，您将在应用商店中拥有两个应用。然后，轻量版中的升级按钮会将用户发送到应用商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:35:16.167

无法更新到其他应用程序（您的专业版）。精简版必须包含专业版的所有功能。但他们是残疾人。然后从精简版升级到专业版只是在精简版中启用这些功能。然后lite版本和pro一样。

# c++ - 使 unsigned char 大于 256 的简单方法？所以它可以转换为整数

> ID：11524723
> 
> 赞同：0
> 
> 时间：2012-07-17T14:28:53.660
> 
> 标签：c++, char, int

有没有办法增加 unsigned char 的大小，以便可以将其转换为大于该大小的整数？

更新：

基本上我正在编辑一个现有系统，其中端口号被定义为无符号字符，因为它们只需要最多 255 的数字。现在它需要增加到任何端口号，所以我试图找到一种简单的方法无需通过 100 个文件更改引用等即可增加大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:37:37.617

c++ 标准告诉 char 的大小为 1。

但是，您可以使用 typedefs，然后很容易更改大小：

```
typedef unsigned char data_type;  // 1 byte 
```

到

```
typedef unsigned short data_type; // 2 byte on some platforms 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:29:39.087

不，您不能更改内置类型的大小。

但是您可以先转换`unsigned char`为`int`，然后再更改：

```
unsigned char val = 25;
int int_val = val;
int_val = 1000; 
```

**根据问题更新**

我认为唯一的选择是手动更改类型。但在更改 make a`typedef`并使用它之前：

```
typedef int PortId 
```

并替换`unsigned char`为`PortId`

# optimization - 如何确定加载时间缓慢的原因？

> ID：11524726
> 
> 赞同：1
> 
> 时间：2012-07-17T14:28:57.373
> 
> 标签：optimization, hosting, expressionengine, pagespeed

我有一个网络解决方案托管和 ExpressionEngine。我有一个页面使用 jquery isotope 来展示我们的产品。此页面需要大量时间来加载。我下载了“Yslow”FF 插件，并根据这些指南进行了优化，得到了 93 分。然而页面仍然很慢。

*   我已经用“smush.it”压缩了所有图像
*   设置 Etags 和过期标头
*   结合和缩小 js 和 css
*   减少 DOM 元素的数量
*   减少了 EE 查询的数量 - 通过删除 playa 字段类型关联从 415 减少到 69。
*   css在顶部，js在底部

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:26:33.487

查看您提供的链接，在上面的评论中提出了一项基准测试建议。

您是否按照@kant312 的建议使用 Chrome 开发人员工具？或者更好的是尝试[Google Canary](https://tools.google.com/dlpage/chromesxs/)，因为这些工具是下一代的。

未启动的浏览器缓存中的总有效负载超过 1.0MB，总共有 74 个网络请求。这是大量数据和大量请求。

使用该 Chrome 工具，从网络的角度来看，您最严重的违规者是：

[http://www.hexarmor.com/automin/8ce57c337ec87d08b88c9da7c9fbb37b.js?modified=1338396875](http://www.hexarmor.com/automin/8ce57c337ec87d08b88c9da7c9fbb37b.js?modified=1338396875) 这是一个 154KB 的 .js 文件，由于某种原因它没有被压缩。

您的第二大文件是[http://www.hexarmor.com/assets/img/background.jpg](http://www.hexarmor.com/assets/img/background.jpg)这是一个 147KB 的图像。您在这里使用的那种嘈杂的纹理背景不能很好地压缩。至于压缩算法，这一切看起来都像是“重要的细节”。如果稍微模糊它，它可能会压缩得更好。但这是一个设计因素。

第三大文件是[http://www.hexarmor.com/automin/ede5907dc9f416131684b845fc597112.css?modified=1342712812](http://www.hexarmor.com/automin/ede5907dc9f416131684b845fc597112.css?modified=1342712812)这是一个 117KB 的 CSS 文件。同样，高度可压缩，但您的服务器没有压缩它。

我认为通过修复这 3 个文件，您可以将总有效负载减少 200KB (20%)。修复 CSS 和 JS 的 gzipping 也将适用于其他文件，以便自动进一步减少有效负载。

这是我们用于 gzip 压缩的 .htaccess 行

```
AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/x-js application/x-javascript text/javascript 
```

有些人使用大量额外的规则来处理边缘情况（主要是较旧的浏览器），但这应该可以帮助您入门。

如果你要在一个页面上展示这么多产品，那么你将会有很多网络请求图像。也许您可以延迟加载页面较低的那些？还可以考虑将您的社交按钮组合成一个单独的精灵。

# spring - 将 Spring 格式化程序应用于 JSP 中的非表单文本

> ID：11524728
> 
> 赞同：1
> 
> 时间：2012-07-17T14:29:08.287
> 
> 标签：spring, jsp, spring-mvc

在 Spring MVC 3 中，我有一个客户`Formatter`将我的实体对象转换为文本并解析我的实体对象的文本。它已在`conversionService`bean 中注册。此链接显示了它是如何工作的：[http ://springinpractice.com/2012/01/07/making-formselect-work-nicely-using-spring-3-formatters/](http://springinpractice.com/2012/01/07/making-formselect-work-nicely-using-spring-3-formatters/)

我想知道是否有任何方法可以将格式化程序应用于不在表单内的文本。具体来说，我希望我的对象显示具有指向其外键实体的 Web 链接，其文本与表单中使用的文本相同。我已经让表单成功显示，但我无法将其应用于 JSP 页面上的文本。相反，它使用`toString`.

我玩过`<spring:bind>`,`<spring:message>`和`<spring:eval>`，但它们似乎不适用于格式化程序。`<spring:eval>`尝试使用`DateTimeFormatter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:04:55.667

希望这可以帮助其他人寻找这个。事实证明它是`<spring:eval>`，这是有道理的，因为它必须以某种方式与 Spring 相关联。这个问题是句法的。下面的语句使实体由 Spring 转换器处理。

```
<spring:eval expression="myEntityObject" htmlEscape="false"/> 
```

不需要 JSP 标记，例如：`${ok}`

这使用了 Spring 表达式语言。

# android - 如何在不同的位置发布我的 android 应用程序的几乎相同版本

> ID：11524731
> 
> 赞同：1
> 
> 时间：2012-07-17T14:29:13.003
> 
> 标签：android

我已经发布了一个可在英国下载的 android 应用程序，但我希望为美国发布该应用程序的（略有不同）版本目前我认为我需要为该应用程序的新版本执行以下操作...

**1.**将清单文件中的 'package' 属性更改为不同的内容。

**2.**确保在 Google Play 上只有美国可以下载该应用程序。

还有什么我还没有发现我需要做的事情，或者我还没有考虑任何其他问题吗？

**格林威治标准时间 7 月 19 日 13:19 编辑**- 我目前正在热心使用 TelephonyManager.getNetworkCountryIso() 作为初始国家/地区猜测，如果失败（因为没有 SIM 卡）则退回到区域设置。人们怎么想？不过，使用 GPS 也是一种选择，但这是否有点矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:10:26.503

既然您说您只是更改了几个字符串（我们也将 URL 视为一个字符串），我建议如下：

1.  创建资源目录`res/values`和`res/values-en-rUS`.

2.  在每一个中，创建一个[`strings.xml`资源文件](http://developer.android.com/guide/topics/resources/string-resource.html)

3.  在目录中定义您的默认（英国特定）字符串值，并在文件夹中定义您`res/values`的美国特定字符串值。`res/values-en-rUS`

然后，要引用这些字符串，只需`@string/my_string_name`在从 XML 文档`getResources().getString(R.string.my_string_name)`引用它们或从代码引用它们时使用。

有关资源限定符类型的更多详细信息，请查看[此页面](http://developer.android.com/guide/topics/resources/providing-resources.html)，有关您可以使用的合格国家代码列表，请参阅[此页面](http://www.iso.org/iso/country_names_and_code_elements)。

我敢肯定，任何有足够决心的人都可以将他们的地区更改为美国——老实说，我不确定该地区是如何确定的——但出于所有意图和目的，这应该可以解决问题，而不必维护两个单独的应用程序。我只想评估英国用户无法访问该应用程序的美国特定功能的重要性，并考虑到这一点来确定是否值得维护两个应用程序。

**编辑**一些额外的搜索让我相信该区域被锁定在`build.prop`文件中，在您的设备生根之外无法编辑（即它不会意外发生）。也就是说，如果他们仍然必须拥有正确的选项，我可能会建议仅在第一次运行应用程序时弹出一个对话框，与用户确认语言环境，将其保存为 SharedPreference，然后以编程方式选择您的字符串基于这种偏好。这样，您仍然只维护一个应用程序，但您仍然可以灵活地处理两个区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:37:00.130

这是对的。Play 商店针对谁可以下载以及是否可以更新两件事。第一个是包名 com.andya.myukapp -> com.andya.myusapp 应该可以工作，只要您现有的客户都不希望在两者之间自由切换（假设它是付费应用程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T15:19:44.863

我最终决定最好的策略是使用 TelephonyManager 来检查网络所在的国家/地区。

```
TelephonyManager tm = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
String networkCountryCode = tm.getNetworkCountryIso(); 
```

如果失败，我得到了语言环境。

```
String locale = context.getResources().getConfiguration().locale.getCountry(); 
```

这将在应用程序启动时发生一次。然后将保存此结果并在设置屏幕中进行配置。

# jsf - 获取 JSF 项目的路径？

> ID：11524734
> 
> 赞同：0
> 
> 时间：2012-07-17T14:29:23.870
> 
> 标签：jsf, path

我正在开发一个 JSF 应用程序，我想启动一个位于我的 Web 项目中的脚本，如果不从 c:..... 开始路径，我怎么能做到这一点，有没有办法获得一个根路径JSF 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:31:04.847

如果您的意思是在您的网页中运行的脚本，那么`/`就是您的应用程序的根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T07:11:58.260

```
ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext(); 

String webContentRoot = ec.getRealPath("/") 
```

如上图，首先初始化ExternalContext对象。然后调用对象的`getRealPath("/")`方法来获取应用程序的根路径。

# sockets - 错误的套接字 id，流关闭错误 + 黑莓套接字连接

> ID：11524739
> 
> 赞同：1
> 
> 时间：2012-07-17T14:29:46.577
> 
> 标签：sockets, blackberry, connection

我正在使用 socketConnection 在黑莓曲线 9300 中编写程序。当我尝试读取输入流时，出现流关闭/错误套接字 id 错误。你能建议我可能是什么问题。

```
String url = Constants.SOCKET + serverIp + Constants.COLON + serverPort + UserInfo.getConnectionType();

//connection open
socketConne`enter code here`ction = (SocketConnection) Connector.open(url, Connector.READ_WRITE,true);

socketConnection.setSocketOption(SocketConnection.DELAY, 0);
socketConnection.setSocketOption(SocketConnection.KEEPALIVE, 1);
socketConnection.setSocketOption(SocketConnection.RCVBUF, 16834);
socketConnection.setSocketOption(SocketConnection.LINGER, 10);

outputStream = socketConnection.openDataOutputStream();

//Output stream deligated to Sender Object to send the command
sender = new Sender(outputStream);
sender.send(command);
inputStream = socketConnection.openDataInputStream();

//read inputstream
while (tobeRead < toRead && retryCount < 5) {
    try {
        if ((toRead - tobeRead) > 8192) {
            readBufferLength = 8192;
        } else {
            readBufferLength = (toRead - tobeRead);
        }
        buffer = new byte[readBufferLength + 1];

        bytesRead = inputStream.read(buffer, 0, readBufferLength);
        sb.append(new String(buffer, 0, bytesRead));
        tobeRead += bytesRead;
        totalBytesRead += bytesRead;
    } catch (Exception cce) {
    }
} 
```

说如果要读取的字节数是 5192。我说 2123 字节然后它迭代循环，下一次读取它失败。我在单独的线程中运行它。我使用 WIFI 网络进行连接

# python - 下拉选择刷新页面后，“元素不再附加到 DOM”

> ID：11524740
> 
> 赞同：0
> 
> 时间：2012-07-17T14:29:51.280
> 
> 标签：python, unit-testing, selenium

我正在编写一个 Selenium 单元测试，它从触发页面刷新的下拉菜单中选择一个选项（不是完全刷新，但 JS 更改了 DOM）以根据该选择显示数据。我的测试用例可以[在 Pastebin上看到](http://pastebin.com/PF1r8hBT)

因此，在重新加载数据后，硒无法找到进一步的循环选项。不过，我实际上不需要再循环了。
我可以进行 xpath 查找以查看是否`option.text`在页面的 H2 元素中，但我的尝试失败了......

```
for option in dropdown.find_elements_by_tag_name('option'):
    if self.ff.find_element_by_xpath("//h2[contains(text(), option.text)"):
        pass    # Employee Selected 
```

从下面的代码中，任何人都可以帮助避免这种“附加到 DOM”错误吗？基本上，如果我可以选择选项 [1] 或其他东西，然后继续进行其余的测试，那将是理想的。

```
dropdown = self.ff.find_element_by_id('employeeDatabaseSelect')
for option in dropdown.find_elements_by_tag_name('option'):
    try:
        option.click()  # causes JS refresh which you need to wait for
    except Exception, e:
        print 'Exception ', e
else: sys.exit("Error: There are no employees for this employer")
print 'Dropdown: ', dropdown.getText()
WebDriverWait(self.ff, 50).until(lambda driver : driver.find_element_by_xpath("//h2[contains(text(), dropdown.getText())")) 
```

我的堆栈跟踪看起来像这样；

```
 [exec] test_process (__main__.viewEmployeeUseCase) ...
 [exec] ERROR
 [exec]
 [exec] ===============================================================
 [exec] ERROR: test_process (__main__.viewEmployeeUseCase)
 [exec] ---------------------------------------------------------------
 [exec] Traceback (most recent call last):
 [exec]   File "viewEmployeeUnitTest.py", line 43, in test_process
 [exec]     print 'Dropdown: ', dropdown.getText()
 [exec] AttributeError: 'WebElement' object has no attribute 'getText'
 [exec]
 [exec] ---------------------------------------------------------------
 [exec] Ran 1 test in 16.063s
 [exec]
 [exec] FAILED (errors=1)
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Exception  Message: u'Element is no longer attached to the DOM'
 [exec] Dropdown:  Tearing Down! 
```

最后`Tearing Down!`是从我的 tearDown() 函数打印的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:34:52.890

正如您所见，刷新页面可能会导致元素引用出现奇怪的行为。您将看到的另一个常见错误是过时元素异常。

从堆栈跟踪中，我会尝试将倒数第二行修改为：

```
print 'Dropdown: ', self.ff.find_element_by_id('employeeDatabaseSelect').getText() 
```

这样你就可以对元素有一个新的引用。

同样，可能导致问题的另一个区域是该行：

```
for option in dropdown.find_elements_by_tag_name('option'): 
```

如果页面在迭代之间刷新，`dropdown`可能不再有效。如果是这种情况，我会试试这个：

1.  浏览所有选项并保留它们的值/文本列表
2.  浏览值/文本（不是元素）列表，然后找到与其匹配的选项元素

同样，这是为了让您`dropdown`每次都使用新的参考。

# java - java中的'>>'和'/'有什么区别，移位和除法

> ID：11524751
> 
> 赞同：1
> 
> 时间：2012-07-17T14:30:22.713
> 
> 标签：java, bitwise-operators

我们可以使用>>运算符进行移位，我们可以在java中使用'/'来划分。我要问的是，当我们进行这些操作时，幕后究竟发生了什么，两者是否完全相同..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:32:35.397

不，绝对不一样。

您可以使用`>>`除以，是的，但只能除以 2，因为`>>`将所有位向右移动，结果是将数字除以 2。

这只是因为二进制基本操作的工作方式。并且适用于无符号数字，对于有符号数字，它取决于您使用的是哪种编码以及它是哪种转变。

例如。

```
122 = 01111010 >> 1 = 00111101 = 61 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:36:58.470

查看此内容以了解有关位移的解释： [什么是位移（位移）运算符以及它们如何工作？](https://stackoverflow.com/questions/141525/absolute-beginners-guide-to-bit-shifting)

一旦理解了这一点，您就应该了解它与除法运算之间的区别。

# php - 在 mysql codeigniter 中加入 3 个表

> ID：11524752
> 
> 赞同：3
> 
> 时间：2012-07-17T14:30:22.987
> 
> 标签：php, mysql, codeigniter, join

我的数据库中有 3 个表：-

1.  tbl_roles(role_id,role_name);
2.  tbl_users(id,role_id,用户名,电子邮件,密码);
3.  tbl_tickets_replies(id,ticket_id,user_id,role_id,comments)

`role_id, id, id`是对应表的主键。我需要 ：-

1.  来自 tbl_users 的用户名。
2.  来自 tbl_roles 的角色名称。
3.  来自 tbl_tickets 的评论

其中`ticket_id`from `tbl_tickets_replies`=`$ticket_id`作为参数出现。

我的模型功能是：-

```
function fetch_comments($ticket_id){
        $this->db->select('tbl_tickets_replies.comments,tbl_users.username,tbl_roles.role_name');
        $this->db->where('tbl_tickets_replies.ticket_id',$ticket_id);
        $this->db->from('tbl_tickets_replies');
        $this->db->join('tbl_users','tbl_users.id = tbl_tickets_replies.user_id');
        $this->db->join('tbl_roles','tbl_roles.role_id=tbl_tickets_replies.role_id');
        $comments = $this->db->get('tbl_tickets_replies');
        return $comments;
     } 
```

这显示数据库错误，即我做错了查询。我想问如何加入三个表以从 3 个不同的表中获取数据

显示此错误：-

> 发生数据库错误
> 错误号：1066
> 
> 不是唯一的表/别名：'tbl_tickets_replies'
> 
> 选择`tbl_tickets_replies`。`comments`, `tbl_users`. `username`, `tbl_roles`. `role_name`从 ( `tbl_tickets_replies`, )`tbl_tickets_replies`加入`tbl_users`。= 。加入。_ = 。在哪里 。='6'`tbl_users``id``tbl_tickets_replies``user_id``tbl_roles``tbl_roles``role_id``tbl_tickets_replies``role_id``tbl_tickets_replies``ticket_id`
> 
> 文件名：C:\wamp\www\local.helpdesk.com\bonfire\codeigniter\database\DB_driver.php
> 
> 行号：330`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:47:32.840

你指的是`tbl_tickets_replies`两次。试试这个：

```
function fetch_comments($ticket_id){
    $this->db->select('tbl_tickets_replies.comments, 
           tbl_users.username,tbl_roles.role_name');
    $this->db->where('tbl_tickets_replies.ticket_id',$ticket_id);
    $this->db->join('tbl_users','tbl_users.id = tbl_tickets_replies.user_id');
    $this->db->join('tbl_roles','tbl_roles.role_id=tbl_tickets_replies.role_id');
    return $this->db->get('tbl_tickets_replies');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:41:37.380

对于复杂的查询，我更喜欢使用如下的普通 SQL。

```
$sql = "SELECT....";
$q = $this->db->query($sql); 
```

顺便说一句，尝试从 db->get 函数中删除表名

```
$comments = $this->db->get(); //change this 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T10:11:32.177

有条件加入。

```
$this->db->select('*'); $this->db->from('articles');
$this->db->join('category', 'category.id = articles.id');
$this->db->where(array('category.id' => 10)); $query =
$this->db->get(); 
```

# python - 在 base.html django 中查看

> ID：11524756
> 
> 赞同：0
> 
> 时间：2012-07-17T14:30:41.770
> 
> 标签：python, django, view

我在 fb 或 twitter 上有通知滚动条。顶部 menu.html 直接包含在 base.html 中。不幸的是，我在那里只能使用 User 方法。是否可以不写我需要通知的每个视图？我想一次粘贴到一个视图中，并始终将它放在基础的顶部 menu.html 中！

`from intarface import menu_nots`

`nots = menu_nots(request)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:44:05.027

有可能的。尝试[编写自己的上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。

```
def add_notifications(request):
    """ Adds Facebook notifications to the view context. """
    return {'notifications': menu_nots(request)} 
```

接下来，将其添加到 settings.py 中的 TEMPLATE_CONTEXT_PROCESSORS 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:17:51.937

使用[消息](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)%username% ！

看法

```
from django.contrib import messages

messages.add_message(request, messages.INFO, 'Hello world.')
messages.debug(request, '%s SQL statements were executed.' % count)
messages.info(request, 'Three credits remain in your account.')
messages.success(request, 'Profile details updated.')
messages.warning(request, 'Your account expires in three days.')
messages.error(request, 'Document deleted.') 
```

模板

```
{% if messages %}
    <ul class="messages">
    {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:54:19.607

我认为使用包含标签解决问题的最佳方法： [https ://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)

```
@register.inclusion_tag('menu.html')
def show_menu():
    #menu logic2 
```

在 base.html 中：

```
<html>
    ...
    {% show_menu %}
    ...
</html> 
```

包含标签的功能将在每个页面上的每个请求上运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-01T10:29:42.020

添加到 TEMPLATE 的 setting.py 部分追加到`context_processors`列表 ->`app_name.view.base,`

# sql-server - 从批处理文件运行 SQL 命令并出现错误

> ID：11524757
> 
> 赞同：0
> 
> 时间：2012-07-17T14:30:44.960
> 
> 标签：sql-server, batch-file

大家，早安。想知道是否有人可以帮助我。我正在尝试编写一个批处理文件，以使我的生活和其他人在我的工作中生活更轻松，但想寻求一些帮助。我通常会运行我编写的一堆不同的 SQL 脚本来安装特定的安装，并决定如果我将这些全部移到批处理文件中，生活会更轻松。我正在尝试从批处理文件运行以下命令：

```
:T02
cls
echo Qualifiers will be installed next with names of
echo Q_AutoFax_CC_1
echo Q_AutoFax_CC_2
echo Q_AutoFax_CC_3
echo Q_AutoFax_CC_4
echo Q_AutoFax_CC_5
pause
cls
If Exist "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\bcp.exe" cd "C:\Program Files\Microsoft SQL Server\100\Tools\Binn"
If Exist "C:\Program Files\Microsoft SQL Server\90\Tools\Binn\bcp.exe" cd "C:\Program Files\Microsoft SQL Server\90\Tools\Binn"
If Exist "C:\Program Files\Microsoft SQL Server\80\Tools\Binn\bcp.exe" cd "C:\Program Files\Microsoft SQL Server\80\Tools\Binn"

sqlcmd /U eiw_admin /P eiw_admin /d cabinet /S . /Q 
"declare @q int
select @q = 1
While @q < 6
    Begin
        Insert into cabinet..qualifiers 
        select 'HL7', 'Q_AutoFax_CC_'+ convert(varchar(2),@q), 
        '%Physician_Code'+ convert(varchar(2),@q)+'% == (NULL) || %Physician_Code'+ convert(varchar(2),@q)+'% == (BLANK)', 'R'    
    select @q = @q + 1
    End"

pause
cls 
```

我通常只运行：

```
declare @q int
select @q = 1
While @q < 6
    Begin
        Insert into cabinet..qualifiers 
        select 'HL7', 'Q_AutoFax_CC_'+ convert(varchar(2),@q), 
        '%Physician_Code'+ convert(varchar(2),@q)+'% == (NULL) || %Physician_Code'+ convert(varchar(2),@q)+'% == (BLANK)', 'R'    
    select @q = @q + 1
    End 
```

来自SQL，它运行得很好......我之前在批处理文件中使用过SQL命令......是否需要为此做一些不同的事情，因为它是一个循环而不是通用命令？该文件正在从数据库服务器运行，我收到一个错误：

```
Sqlcmd: '-Q': Missing argument. Enter '-?' for help. ' "declare @q int' is not recognized as an internal or external command, operable program or batch file 
```

.....同样的事情选择，开始，插入和选择......等

我想如果你想运行 SQLCMD，你只需要把你的命令放在单引号中，这不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:39:15.057

批处理文件中的 SQL 语句应与`sqlcmd`语句位于同一行。将 SQL 语句放在单独的文件中，并使用`-i`开关从文件中读取查询可能是最简单的。

# c# - 将多个 RIA silverlight 链接与共享服务器端实体一起使用

> ID：11524759
> 
> 赞同：0
> 
> 时间：2012-07-17T14:30:51.350
> 
> 标签：c#, .net, silverlight, entity-framework, ria

对于一个项目，我将 Silverlight 4.0 与 RIA 和 EntityFramework 4.0 一起使用。我有三个网络项目：

*   Common.Web：包含一般类型
*   Workflow.Web：包含工作流的域服务
*   Monitor.Web：包含监视器的域服务

Workflow.Web 和 Monitor.Web 项目都使用 Common.Web 项目中定义的 Enumeration (SalesChoice) 类型作为 DomainService 的返回值。

到目前为止，这个故事的 Web 方面。我们继续客户端部分，它由两个项目组成：

*   Workflow.UI：包含与 Workflow.Web 的 RIA 连接
*   Monitor.UI：包含与 Monitor.Web 的 RIA 链接

现在我的问题（最后:)）。在 Workflow.UI 项目中，我需要使用 Monitor.UI 项目中的信息，因此我在这两者之间添加了一个引用。当我构建项目时，我收到一个错误：

**警告为错误：“Generated_Code\Workflow.Web.g.cs”中的“MyProject.SalesChoice”类型与“Monitor.UI.dll”中导入的“MyProject.SalesChoice”类型冲突。**

很容易解释为什么会出错，但我正在寻找解决方案。也许我使用共享 Common.Web 项目的整个方法是不可能的或最好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:13:58.207

（对不起我的英语不好）在这种情况下，我更喜欢使用[Portable Class Library](http://msdn.microsoft.com/en-us/library/gg597391.aspx)。在该项目上定义您的枚举并将其添加为您需要它的所有项目的参考。

# google-chrome - 如何使用 Chrome 同步 XMPP 服务器进行身份验证？

> ID：11524760
> 
> 赞同：12
> 
> 时间：2012-07-17T14:30:53.207
> 
> 标签：google-chrome, xmpp, sync

我需要在我的 Java 应用程序（不在同一台机器上）中获取 Google Chrome 用户当前打开的选项卡。Chrome 同步已启用，因此当前标签页与 Google 服务器同步。

根据 Chrome 同步的[文档](http://www.chromium.org/developers/design-documents/sync)，它是通过 XMPP 完成的。所以我想应该可以连接到 Google XMPP 服务器 (xmpp.google.com)，例如通过 Smack（XMPP 的 Java 库），验证并监听指示选项卡会话更改的 protobuf 消息。当然，用户的登录凭据或 Chrome 用来识别客户端的“client_id”是可用的。

但是我很难理解用于连接到 XMPP 服务器的身份验证方法——我无法弄清楚它是如何在 Chromium[源代码](http://src.chromium.org/viewvc/chrome/trunk/src/chrome/browser/sync/)中完成的，并且除了非常低级的注释之外没有可用的文档编码。Google 用于其基于 XMPP 的服务的 libjingle 库仅适用于 C++，并且没有得到很好的维护/记录。

那么有没有人以前做过类似的事情并且可以就身份验证过程的工作方式提供任何建议/提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T14:08:44.650

我不确定 chrome 同步是否使用 xmpp，至少在它必须与客户端交换信息的级别上。它使用“协议缓冲区”谷歌技术。该协议是使用 .proto 协议描述文件给出的，您可以使用特殊的编译器将其转换为您的语言对象。同步服务器似乎停留在[https://clients4.google.com/chrome-sync](https://clients4.google.com/chrome-sync)和客户端发送 POST 请求，其中包含放置键入的 ClientToServerMessage 消息的二进制正文。这是第一次连接到同步服务器时的输出。第一个输出 Python 对象是 'environ' WSGI 变量的 pprint，其中也放置了 HTTP 标头。第二个对象（在 '====' 之后）是实际的协议消息。

```
{'CONTENT_LENGTH': '54',
 'CONTENT_TYPE': 'application/octet-stream',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',
 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',
 'HTTP_AUTHORIZATION': 'GoogleLogin auth=MKhiqZsdz2RV4WrUJzPltxc2smTMcRnlfPALTOpf-Xdy9vsp6yUpS5cGuND0awqrYVUK4lhOJlh6OMsg093eBRghGGIgvWUTzU8PUvquy_c8Xn4sRiz_3tVJcke5eXi3q4qFDa6iVuEbT_0QhyPOjIQyeDOKRpZzMR3rpHsAs0ptFiTtUeTHsoIeUFT9nZPYzkET4-yHbDAp45_dxWdb-U6DPg24',
 'HTTP_CONNECTION': 'keep-alive',
 'HTTP_HOST': 'localhost:8080',
 'HTTP_USER_AGENT': 'Chrome MAC 0.4.21.6 (130497)-devel',
 'PATH_INFO': '/chrome-sync/dev/command/',
 'QUERY_STRING': 'client_id=SOME_SPECIAL_STRING',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_PORT': '59031',
 'REQUEST_METHOD': 'POST',
 'SCRIPT_NAME': '',
 'SERVER_NAME': 'vian-bizon.local',
 'SERVER_PORT': '8080',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SOFTWARE': 'gevent/1.0 Python/2.6',
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x100416140>,
 'wsgi.input': <gevent.pywsgi.Input object at 0x102a04250>,
 'wsgi.multiprocess': False,
 'wsgi.multithread': False,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'https',
 'wsgi.version': (1, 0)}
'==================================='
share: "MY_EMAIL_WAS_HERE@gmail.com"
protocol_version: 30
message_contents: GET_UPDATES
get_updates {
  caller_info {
    source: NEW_CLIENT
    notifications_enabled: false
  }
  fetch_folders: true
  from_progress_marker {
    data_type_id: 47745
    token: ""
    notification_hint: ""
  }
}
debug_info {
  events {
    type: INITIALIZATION_COMPLETE
  }
  events_dropped: false
} 
```

这发生在基于 OAuth 的身份验证中。您可以在 HTTP_AUTHORIZATION 字段中看到 OAuth 令牌。OAuth 令牌是在您与 HTML 对话框“Google 帐户登录”交互时提供给您的。我不确定，但似乎获取 Google 服务访问令牌的 API 是公开可用的。

如果您正在寻找 XMPP 身份验证，请在此处查看 X-GOOGLE-TOKEN 身份验证机制的描述： [Authenticate to Google Talk (XMPP, Smack) using an authToken](https://stackoverflow.com/questions/6194899/authenticate-to-google-talk-xmpp-smack-using-an-authtoken/6211324)

对于 X-OAUTH2 授权，您可以在此处访问信息：[https ://developers.google.com/talk/jep_extensions/oauth](https://developers.google.com/talk/jep_extensions/oauth)

这里有一个示例：http: [//pits.googlecode.com/svn/trunk/xmpp.c](http://pits.googlecode.com/svn/trunk/xmpp.c)

请注意，您可以将 XMPP 流添加到每次运行浏览器时填充的 Chrome 日志文件 - chrome_debug.log。要启用此功能，请使用以下选项运行 Chrome：--enable-logging --v=2

# php - 打开带有动态内容的 jQuery UI 对话框

> ID：11524761
> 
> 赞同：5
> 
> 时间：2012-07-17T14:30:53.480
> 
> 标签：php, javascript, jquery, mysql, jquery-ui

我有一个关于 jQuery UI 对话框和显示数据库中的动态内容的问题。

所以我得到了一个 web 应用程序，我还需要在其中创建一个管理模块来管理所有用户和其他信息。我创建了一个在列表中显示所有用户的页面，在每一行中我还制作了一个编辑按钮。我想这样当您按下用户的编辑按钮时，会打开一个对话框并在对话框中显示所有用户信息和内容。

所以我的问题是，最好的方法是什么？我正在考虑制作一个 PHP 页面，在其中执行 MySQL 查询并在对话框中显示它，但我相信有更好的方法..

编辑：这是现在页面的代码。我添加了一个用于测试目的的小占位符对话框。

Javascript：

```
script type="text/javascript"> 
    jQuery(document).ready( function(){       
        jQuery(".edit-button").click( showDialog );

            //variable to reference window
            $myWindow = jQuery('#myDiv');

            //instantiate the dialog
            $myWindow.dialog({ height: 600,
                    width: 800,
                    modal: true,
                    position: 'center',
                    autoOpen:false,
                    title:'Bewerk therapeut',
                    overlay: { opacity: 0.5, background: 'black'}
                    });
            }

    );
//function to show dialog   
var showDialog = function() {
    $myWindow.show(); 
    //open the dialog
    $myWindow.dialog("open");
    }

var closeDialog = function() {
    $myWindow.dialog("close");
} 
```

PHP：

```
<?php
//LEFT OUTER JOIN Vragen ON Vragen.bsn_nummer = Gebruikers.bsn_nummer
include_once 'classes/class.mysql.php';
$db = new Mysql();
$dbUsers = new Mysql();

$db->Query("SELECT * FROM USERS_users ORDER BY username ASC");
$db->MoveFirst();

echo "<table>";
echo "<tr><th> </th><th> </th><th>BSN Nummer</th><th>Gebruikersnaam</th>       <th>Voornaam</th><th>Achternaam</th></tr>";
while(! $db->EndOfSeek()) {
$row = $db->Row();
$dbUsers->Query("SELECT * FROM Gebruikers WHERE user_idnr = '{$row->user_idnr}'");
$rowUser = $dbUsers->Row();
echo "<tr><td><a class='del-button' href='#'><img src='afbeeldingen/edit-delete.png' /></a></td>
    <td><a class='edit-button' href='#'><img src='afbeeldingen/edit.png' /></a>  </td>
    <td>".@$rowUser->bsn_nummer."</td>      
    <td>".@$row->username."</td>
    <td>".@$rowUser->voornaam."</td>
    <td>".@$rowUser->achternaam."</td></tr>";
    }
    echo "</table>";
?>
<div id="myDiv" style="display: none">
<p>Gebruiker bewerken</p>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:57:48.653

没有。听起来你做对了。

弹出窗口的占位符 - >

```
<div id="popup"></div> 
```

jQuery ui 对话框 ->

```
$('#popup').dialog({
  autoOpen: 'false',
  modal: 'true',
  minHeight: '300px',
  minWidth: '300px',
  buttons: {
    'Save Changes': function(){
      $.ajax({
        url: 'path/to/my/page.ext',
        type: 'POST',
        data: $(this).find('form').serialize(),
        success: function(data){
          //some logic to show that the data was updated
          //then close the window
          $(this).dialog('close');
        }
      });
    },
    'Discard & Exit' : function(){
      $(this).dialog('close');
    }
  }
}); 
```

现在已经创建了默认设置，从 php 文件发送数据的 ajax 请求，并更新 'popup' div 中的内容。

```
$('.edit').click(function(e){
  e.preventDefault();
  $.ajax({
    url: 'path/to/my/page.ext',
    type: 'GET',
    data: //send some unique piece of data like the ID to retrieve the corresponding user information
    success: function(data){
      //construct the data however, update the HTML of the popup div 
      $('#popup').html(data);
      $('#popup').dialog('open');
    }
  });
}); 
```

在 PHP 页面中，构造一个要发回的表单 ->

```
<?php
  if(isset($_GET['id'])){
    //build the query, do your mysql stuff
    $query = mysql_query(sprintf("SELECT * FROM sometable WHERE id = %d", $_GET['id']));
    //construct constant objects outside of the array
?>
  <form>
  <?php
    while($row = mysql_fetch_array($query)){
  ?>
    <tr>
      <td>
        <input type="text" name="<?php echo $row['id']?>" value="<?php echo $row['name'] ?>" />
      </td>
    </tr>   
  <?php 
    }
  ?>
  </form>
<?php
  }    
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:40:08.693

> 我相信有更好的方法..

不，仅此而已。

您将需要一个 PHP 脚本来为您提供用户的当前详细信息，以及您应该结合添加新用户或更新现有用户的第二个脚本。

使用 AJAX 获取用户列表，同样让“当前详细信息”页面发回包含信息的 JSON blob。

使用客户端 Javascript 填充对话框本身。

最困难的部分是确保只有授权用户才能与后端脚本对话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:55:46.020

这是我要做的：

1.  创建用户列表时，我知道每个用户的 ID（唯一）。然后为编辑按钮附加一个事件处理程序，该处理程序将向具有该用户 ID 的服务器端脚本发出 ajax 请求，服务器端脚本将以 JSON 格式向您发送用户详细信息。

2.  有一个模板，例如一个 div，其中包含更新用户详细信息所需的所有字段（带有附加的类或 id，因此您将知道如何使用选择器找到它们）。当您从服务器接收数据时，您将模板中字段的值设置为服务器响应中的数据，然后打开对话框（现在预先填充了您需要的数据）。

3.  更新用户详细信息也可以通过 ajax 来完成，以保持简单。（获取输入中的值，并向服务器发送请求，同时发送您想要更改详细信息的用户的 ID。

所以……祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:40:35.933

最简单的方法是使用 PHP 获取数据库中的信息，然后像这样填充 UI 表。主要的缺点是加载时间。如果您发现页面加载时间过长，那么您可能需要查看 jQuery 的[.ajax()](http://api.jquery.com/jQuery.ajax/)

# javascript - 从 attachEvent 获取事件的调用者

> ID：11524762
> 
> 赞同：1
> 
> 时间：2012-07-17T14:30:53.900
> 
> 标签：javascript, attachevent

我正在尝试做一些简单的事情：我有一堆正在通过 JS 加载的图像。我将一个事件侦听器附加到加载事件，并且在加载图像之后，在侦听器函数中，我想获取调用图像并从中检索属性。这是我的代码，简化：

```
function loadImages() {
   for (var i = 0; i < arrDownloadQueueBasic.length; i++) {
                var path = arrDownloadQueueBasic[i].path;

                var img = new Image();
                img.type = arrDownloadQueueBasic[i].type;
                img.attachEvent(img, 'load', setBasicElement);
                img.src = path;
            }
   }

function setBasicElement(e) {
        var caller = e.target || e.srcElement;
        alert(caller); // THIS DOESNT WORK - RETURN NULL
        alert(caller.type) // OF COURSE THIS DOESNT WORK AS WELL...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:54:18.500

尝试这个：

```
var caller = window.event ? window.event.srcElement : e.target; 
```

如果我没记错的话，当你使用 IE 时，IE 不会将事件对象作为参数传递`attachEvent()`，但它有一个全局`event`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:43:22.890

您需要纠正几件事。首先，attachEvent 方法不应该用于 IE 以外的浏览器。您应该构造您的代码以检查该方法是否已实现，然后像这样采取相应的行动：

```
if(img.addEventListener) {
    img.addEventListener('load', setBasicElement, false);
}
else if(img.attachEvent) {
    img.attachEvent('onload', setBasicElement);
}
else {
    img.onload = setBasicElement;
} 
```

另一个问题是，在使用 attachEvent 时，您需要在事件名称前加上“on”前缀。

**编辑**

您可以通过在 setBasicElement 函数中使用以下代码来获取调用者：

```
var caller = e.target || e.srcElement || window.event.target || window.event.srcElement; 
```

这是一个工作示例 - [http://jsfiddle.net/BMsXR/3/](http://jsfiddle.net/BMsXR/3/)

# f# - 解释器可以用符号表来实现吗？

> ID：11524770
> 
> 赞同：2
> 
> 时间：2012-07-17T14:31:18.370
> 
> 标签：f#, interpreter, symbol-table

我经常听说使用符号表可以优化编程语言中符号的查找。目前，我的语言仅作为解释器实现，而不是编译器。我还不想分配时间来构建编译器，所以我正在尝试优化解释器。该语言大部分基于 Scheme 语义和语法，并且是静态范围的。我使用 AST 在运行时执行代码（在我的解释器中，就像`Write Yourself a Scheme in 48 Hours`.

不幸的是，由于使用 F# Map 来按名称包含和查找符号，我的解释器中的符号查找速度很慢。（好吧，事实上，它使用了 Trie，但性能同样有问题）。我想改用符号树来实现更快的符号查找。但是，我不知道是否或如何在解释器中实现符号表。我只在编译器的上下文中听说过它们。

这可能吗？如果实现策略或性能与编译器中的符号表不同，您能描述一下差异吗？最后，我可能会在解释器中查看符号树的现有参考实现吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T14:49:36.210

符号表将一些信息与每个符号相关联。在解释器中，您可能会将值与符号相关联。`Map`是一种特别适用于函数式解释器的实现。

如果您想优化您的解释器，请在运行时摆脱对符号表的需求。一种方法是[De Bruijn idexing](http://en.wikipedia.org/wiki/De_Bruijn_index)。

还有一些关于从函数式解释器机械派生优化解释器、VM 和编译器的很好的文献，例如：

[http://www.brics.dk/RS/03/14/BRICS-RS-03-14.pdf](http://www.brics.dk/RS/03/14/BRICS-RS-03-14.pdf)

举个简单的例子，考虑使用 De Bruijn 索引编码的常量的 lambda 演算。请注意，评估器没有符号表，因为它可以使用整数进行查找。

```
type exp =
    | App of exp * exp
    | Const of int
    | Fn of exp
    | Var of int

type value =
    | Closure of exp * env
    | Number of int

and env = value []

let lookup env i = Array.get env i
let extend value env = Array.append [| value |] env
let empty () : env = Array.empty

let eval exp =
    let rec eval env exp =
        match exp with
        | App (f, x) ->
            match eval env f with
            | Closure (bodyF, envF) ->
                let vx = eval env x
                eval (extend vx envF) bodyF
            | _ -> failwith "?"
        | Const x -> Number x
        | Fn e -> Closure (e, env)
        | Var x -> lookup env x
    eval (empty ()) exp 
```

# c++ - 将 boost::lexical_cast 与算术表达式一起使用

> ID：11524774
> 
> 赞同：2
> 
> 时间：2012-07-17T14:31:26.560
> 
> 标签：c++, boost

我有一个带有算术的输入文件（ASCII），例如
`TEST;0.0;0.0+0.1;0.0+0.2`

我可以读取字符串并相应地拆分它，所以我已经有了`std::string`. 现在我想用`boost::lexical_cast<double>`双精度存储它，类似于这样的表达式：

```
double d = boost::lexical_cast<double>("0.0+0.1"); 
```

但是，Boost抛出

```
terminate called after throwing an instance of 'boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::bad_lexical_cast> >'
what():  bad lexical cast: source type value could not be interpreted as target 
```

有没有好办法，也许没有`sscanf`？（如果`sscanf`有能力做到这一点......）

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:49:11.893

`boost::lexical_cast`不是解析器/计算器。你可以使用[Boost.Spirit](http://www.boost.org/doc/libs/1_50_0/libs/spirit/doc/html/index.html)来做到这一点。有一个关于如何实现这种计算器的[O'Reilley 示例](http://www.oreillynet.com/network/2003/05/06/examples/calculatorexample.html)，但正如您所见，它并不简单。

如果您想实现一个简单的解析器， OpenSouce [C/C++ 数学表达式解析器库](https://stackoverflow.com/q/4071456/167251)和[计算 C++ 中的算术表达式](https://stackoverflow.com/q/9329406/167251)可能是很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:48:44.460

解决方案可能是再次拆分字符串，如果字符串中有算术运算符，则对两个子字符串进行强制转换，然后进行算术运算。

我不认为 boost::lexical_cast 或任何类似的东西这样做或打算这样做。

# grails - 在 IntelliJ IDEA 中更改 Grails SDK 不适用于插件模块

> ID：11524777
> 
> 赞同：5
> 
> 时间：2012-07-17T14:31:35.023
> 
> 标签：grails, intellij-idea

想法 11.1.2

我有一个需要升级的 Grails 应用程序。该应用程序由几个模块组成。一个是应用程序，其他几个是插件。我右键单击应用程序并转到 Grails -> 更改 SDK 版本。我选择了我想要的版本，然后 IDEA 询问我是否要升级应用程序。单击是，一切都很好。

我一直在尝试在插件模块上做同样的事情。IDEA 从不询问我是否要升级，并且似乎没有更改 SDK。如果我从命令行升级模块，当我回到 IDEA 时，它会认为版本不匹配，甚至不问就自动降级。

有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:37:16.853

在这个 IDEA 版本中它对我有用。确保在所有插件的 application.properties 中更改 Grails 版本：

```
app.grails.version=2.1.0 
```

然后右键单击每个模块（插件），Grails，更改 SDK 版本。它应该已经改变了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-25T06:13:37.440

有完全相同的问题 - 应用程序 + 插件需要不同的 SDK（用于测试）。

经过一番调查发现这是一个 IntelliJ IDEA 错误[IDEA-114418](http://youtrack.jetbrains.com/issue/IDEA-114418)。所以，我认为，如果你也在那里投票支持这个错误，那将是一件好事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-28T21:06:21.460

我也有同样的错误。我采取了极端措施来纠正它。

我从 Global Libraries 中删除了旧的 grails。去`file>Project Structure > Global Libraries`。它应该抱怨这是由模块使用的。

然后我不得不添加 grails 框架支持，但添加了新的。

# sql-server-2008 - 由于参数值无效，使用数据驱动订阅执行报表时出错

> ID：11524783
> 
> 赞同：1
> 
> 时间：2012-07-17T14:31:58.923
> 
> 标签：sql-server-2008, reporting-services

数据驱动订阅执行报表后，向 Reporting Services 日志文件抛出以下错误：

**错误：抛出 Microsoft.ReportingServices.Diagnostics.Utilities.InvalidReportParameterException：，Microsoft.ReportingServices.Diagnostics.Utilities.InvalidReportParameterException：为报告参数“客户”提供的默认值或值不是有效值。**

如果我手动执行报告，它工作得很好，因为`customer`参数值是静态的。

当数据驱动的订阅查询结果中的值是动态的时，有人知道解决方案吗？

# php - 使用 Windows 帐户通过 PHP 连接到 SQL Server

> ID：11524784
> 
> 赞同：6
> 
> 时间：2012-07-17T14:32:00.087
> 
> 标签：php, sql-server, odbc, windows-authentication

我正在尝试使用 PHP 连接到另一台机器上的 SQL Server。我找到了两种方法来做到这一点。使用 odbc_connect 或 sqlsrvr 连接。

```
 $connection = odbc_connect("Driver={SQL Server Native Client 10.0};Server=$serverName;Database=$db;", 'user', 'pass'); 
```

或者

```
 $conn = sqlsrv_connect($serverName, array('UID' => '', 'PWD' => '')); 
```

如果我尝试连接到 SQL 帐户，则连接有效。不幸的是，我无法使用 Windows 身份验证进行连接。

到目前为止，我已经尝试了以下方法：使用了工作通行证，添加了 Trusted_Connection=yes; 或集成安全=SSPI；. 我也尝试将它与 fastcgi.impersonate = 1 或 0 结合使用。

当我直接使用我的用户并通过时，我收到登录被拒绝错误，当我尝试使用 sspi 进行 Windows 身份验证时，我收到以下错误：用户“NT AUTHORITY\ANONYMOUS LOGON”登录失败。

我用谷歌搜索了很多问题，但找不到解决方案。然而，有些人在谈论 php 不使用网络服务帐户，这可能是问题所在。

有谁知道我该如何解决这个问题或者给我一个领导？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-13T21:51:53.510

我能够使用在单独的 IIS 服务器上运行的 PHP 与远程 SQL 服务器建立受信任的连接：

```
$connectionInfo = array('Database' => $dbname);
$con = sqlsrv_connect($servername,$connectionInfo); 
```

在 php.ini 中：

```
fastcgi.impersonate = 0
mssql.secure_connection = On 
```

在我的 PHP 站点的 IIS 中：

```
Anonymous Authentication = Disabled
Windows Authentication = Enabled
Application Pool settings for site: Integrated, Network Service 
```

$dbname 数据库的 SQL Server 上的数据库安全性：

```
create login: domainname\iisservername$  
map domainname\iisservername$ to db_datareader privilege for $dbname database 
```

注意：iisservername 中的 $ 很重要。通过上述设置，IIS 将与 SQL 服务器建立信任连接，而无需在 PHP 文件中存储用户 ID 和密码信息。本地应用程序池使用的权限是“网络服务”。远程，这些权限作为用户 domainname\iisservername$ 通过网络传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:35:40.847

基本上问题是用于连接服务器的身份将始终是运行 PHP 的进程的身份

[此](http://blogs.msdn.com/b/brian_swan/archive/2010/02/10/sql-server-driver-for-php-understanding-windows-authentication.aspx)链接可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-01T15:40:58.227

让 IIS 7.5 上的 PHP 使用 SSPI 身份验证在没有用户名和密码的情况下进行连接。我必须执行以下操作：

在我的 IIS 应用程序池高级设置中，我将其设置为使用自定义帐户域\用户名来连接我需要 PHP 连接的用户。

在我的 IIS 特定网站中，我将基本设置更改为以相同的域\用户名连接。

在我的 PHP 代码中，我可以使用`$conn = sqlsrv_connect($dbhost, array("Database" => $dbname, "UID" => "", "PWD" => ""));`

其他注意事项：`fastcgi.impersonate = 1` 我只有：启用匿名身份验证 [*](http://blogs.msdn.com/b/brian_swan/archive/2010/02/10/sql-server-driver-for-php-understanding-windows-authentication.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-30T12:16:41.240

1.  打开 IIS 控制台
2.  使用所需用户配置您的应用程序池身份，该用户必须在您的 SQL Server+数据库中具有足够的权限
3.  选择您的“特定网站”
4.  打开“身份验证”设置
5.  右键单击“匿名身​​份验证”，然后单击“编辑”
6.  最后选择选项：应用程序池标识（单选按钮）并按“确定”按钮应用更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T14:50:43.937

你有没有尝试过`$conn = sqlsrv_connect($serverName);`

该数组是可选的。默认使用 Windows 身份验证。请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/cc296161.aspx)

IIS 应该启用 Windows 身份验证并关闭匿名访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-17T15:16:38.007

1.  打开 IIS 控制台
2.  转到您的网站
3.  打开“身份验证”设置右键单击“匿名身​​份验证”并单击“编辑”最后选择选项：应用程序池身份（单选按钮）并按“确定”按钮应用更改。
4.  转到“应用程序池”并获取应用程序池名称。
5.  打开SSMS（SQL管理工作室），进入相关数据库，选择“安全”。
6.  添加一个新用户，只填写名称并保存。用户名应为：IIS APPPOOL\{YOUR_APP_POOL_NAME}

祝你好运！

# ffmpeg - FFMpeg - 添加视频编解码器

> ID：11524785
> 
> 赞同：0
> 
> 时间：2012-07-17T14:32:04.393
> 
> 标签：ffmpeg

我已阅读本网站上的教程 [将新的编解码器添加到 ffmpeg](https://stackoverflow.com/questions/1636226/adding-new-codec-to-ffmpeg)

但我似乎无法将它们应用于我的情况。我有一个闭路电视系统中使用的基于 Mpeg-4 的专有编解码器。我想将它解码回基本的 Mpeg-4 或其他格式。编解码器是基于 dll 的 - dll 位于我的 c:/Windows 文件夹中。我按照 Cook 教程 ( [http://wiki.multimedia.cx/index.php?title=FFmpeg_codec_howto](http://wiki.multimedia.cx/index.php?title=FFmpeg_codec_howto)-) ) 中的步骤进行操作 - 但在开发自己的类似于 libavcodec/cook.c 的 .c 文件时迷失了方向 - 我可以不指向这个dll文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:59:10.553

在过去的几天里，我玩弄了几个想法。我发现使用 AVISynth 之类的帧服务器提取视频并将帧作为图像提供给 FFMPEG 以重新编码为所需的任何所需格式更容易。这工作得很好，但它不是一个非常快速/可扩展的解决方案，因为帧是在视频播放时提取的。

任何其他解决方案。如何将编解码器直接嵌入到 FFMPEG 中，尤其是因为它是一个利用 FFDSHOW 的 VfW 编解码器。

谢谢

# objective-c - 如何实现 NSArrayController 子类的 init 方法

> ID：11524789
> 
> 赞同：0
> 
> 时间：2012-07-17T14:32:11.533
> 
> 标签：objective-c, cocoa

我创建了一个 class: `MyArrayController`，它是一个子类`NSArrayController`并将它绑定到一个表。

我需要将一个人对象传递给`MyArrayController`对象，例如使用方法：

```
-initWithPerson:(Person *)person; 
```

但是因为`MyArrayController`是自动创建的（因为我没有显式分配它，我认为它是由Cocoa自动创建的），我无法获取MyArrayController的对象或显式初始化它。

如何将人员对象设置为 MyArrayController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:41:38.550

执行此操作的典型方法是不使用`NSArrayController`子类。从您的描述来看，您并没有试图改变`NSArrayController`您的行为，只是试图指定其内容。这样做的方法是`NSArrayController`在您的 nib 文件中放入一个并将其绑定到您的表格。将一个添加`IBOutlet`到您的`NSWindowController`或`NSViewController`绑定到`NSArrayController`. `NSArray`使用要在表格中显示的内容创建并预填充。然后在您的`awakeFromNib`or`windowDidLoad`方法中调用`setContent:`以将内容数组设置为`NSArrayController`您`NSArray`创建的。大致如下：

```
 IBOutlet NSArrayController *myArrayController;

    NSArray *contentArray = [NSArray arrayWithObject:person];
    [myArrayController setContent:contentArray]; 
```

# maven - Gradle 对应于 Maven 原型？

> ID：11524790
> 
> 赞同：69
> 
> 时间：2012-07-17T14:32:19.143
> 
> 标签：maven, gradle, maven-archetype

Maven 原型的 Gradle 对应物是什么？如何为其他 Gradle 用户提供新项目的文件和目录布局模板？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-09-25T09:45:22.473

使用[构建初始化插件](http://www.gradle.org/docs/current/userguide/build_init_plugin.html)：

```
~$ mkdir newproj
~$ cd newproj
~/newproj$ gradle init --type java-library 
```

目前`java-library`, `scala-library`, `groovy-library`, `java-application`,`pom`和`basic`支持。该功能正在孵化中，因此可以在未来的版本中进行更改，因此请密切关注文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T14:49:01.127

Gradle 不支持这个（还）。已经打开了一个开放的[功能请求](http://issues.gradle.org/browse/GRADLE-1289)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-07T08:20:26.947

据我所知，没有 gradle 对应物。但是，对于大多数情况，按照下面给出的步骤就足够了：

*   使用 maven 和您选择的 maven 原型生成项目。
*   将 maven 项目转换为 gradle 项目。您可以通过在主 pom.xml 所在的目录中执行以下命令来做到这一点：

```
gradle init 
```

它应该适用于所有基本的 Maven 原型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T19:52:28.820

虽然 Gradle 尚不支持此功能，但[gradle:templates 插件](https://github.com/townsfolk/gradle-templates)看起来很有希望：

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-09T19:30:17.447

**Gradle 不支持内置 archetype-like 功能，但您可以使用名为**[Gradle 模板](https://github.com/townsfolk/gradle-templates)的插件

*阅读更多：*
[gradle 是否具有类似 Maven 原型的功能？](https://discuss.gradle.org/t/does-gradle-have-maven-archetype-like-functionality/3831)
[Gradle原型问题](https://issues.gradle.org/browse/GRADLE-1387)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-02T12:51:29.937

[我也在寻找这个功能，发现有一个复杂的项目模板来使用https://github.com/townsfolk/gradle-templates](https://github.com/townsfolk/gradle-templates)有点复杂。

所以我创建了这个插件，它与 Maven 原型函数非常相似。 [https://github.com/orctom/gradle-archetype-plugin/](https://github.com/orctom/gradle-archetype-plugin/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-13T15:05:11.393

如果您在 Linux 下使用 spring 框架：您可以使用[http://start.spring.io/](http://start.spring.io/) 或者安装[Spring CLI](http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started-installing-the-cli)

```
$ curl -s "https://get.sdkman.io" | bash

$ sdk install springboot

$ spring --version
Spring Boot v1.3.5.RELEASE

$ spring init --build gradle --name test --groupId com.test
Using service at https://start.spring.io
Content saved to 'demo.zip'

$ unzip demo.zip 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-19T00:47:28.047

您可以为[Yeoman](http://yeoman.io/)创建生成器，或使用现有的非官方生成器，例如[JHipster](http://www.jhipster.tech/)。例如，[java-gradle 生成器](https://www.npmjs.com/package/generator-java-gradle)：

> 1.  `npm install -g yo`
> 2.  全局安装模块：`npm install -g generator-java-gradle`
> 3.  生成项目：`yo java-gradle`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-07T18:02:13.427

看起来解决方案现在可用：[https ://plugins.gradle.org/plugin/com.orctom.archetype](https://plugins.gradle.org/plugin/com.orctom.archetype)

# c# - 向面板发送 WM_SETREDRAW 消息后刷新

> ID：11524796
> 
> 赞同：3
> 
> 时间：2012-07-17T14:32:29.467
> 
> 标签：c#, refresh, panel, redraw

```
ControlHelper.SuspendDrawing(panel);
panel.Controls.Clear();
AddItemIdLabel();
AddLastEditedLabel();
AddDeleteButton();
AddSaveButton();
ControlHelper.ResumeDrawing(panel);

public static class ControlHelper
{
    [DllImport("user32.dll")]
    private static extern int SendMessage(IntPtr hwnd, int wMsg, int wParam, int lParam);

    private const int WM_SETREDRAW = 0xB;

    public static void SuspendDrawing(Control target)
    {
        SendMessage(target.Handle, WM_SETREDRAW, 0, 0);
    }

    public static void ResumeDrawing(Control target)
    {
        SendMessage(target.Handle, WM_SETREDRAW, 1, 0);
        target.Refresh();
    }
} 
```

如果我使用上面的代码进行测试，面板的某些部分不会被刷新。您可以在没有添加新控件的地方看到 Clear() 之前的旧控件。

如果我把它放在`panel.Controls.Clear();`前面，`ControlHelper.SuspendDrawing(panel);`一切都按预期工作，**但**我试图避免一些闪烁是可见的。

那么这里发生了什么？取决于我是在暂停之前还是之后清除控件集合，如何产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-02T14:31:23.587

注意，提到的 PInvoke 是不正确的。应该是这样的：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
public static extern IntPtr SendMessage(IntPtr hWnd, int Msg, int wParam, IntPtr lParam);
private const int WM_SETREDRAW = 11;

public static void SuspendDrawing(this Control Target)
{
    SendMessage(Target.Handle, WM_SETREDRAW, 0, IntPtr.Zero);
}

public static void ResumeDrawing(this Control Target)
{
    SendMessage(Target.Handle, WM_SETREDRAW, 1, IntPtr.Zero);
    Target.Invalidate(true);
    Target.Update();
} 
```

特别是返回类型是 IntPtr 而不是 int（64 位上 8 个字节，而不是 4 个字节）可能会随机使您的运行时崩溃。

来源：[http ://www.pinvoke.net/default.aspx/user32.sendmessage](http://www.pinvoke.net/default.aspx/user32.sendmessage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-19T14:10:13.803

您的`target.Refresh()`电话并未完全使删除旧控件的区域无效。由于[Control.Refresh()](https://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(System.Windows.Forms.Control.Refresh);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-csharp)&rd=true)是一种“虚拟”方法，因此它可能会被覆盖并且可能会产生类似这样的副作用。

为了保证完全覆盖，您应该使用`Invalidate(true)`&`Update()`中的方法`ResumeDrawing()`。该`Invalidate(true)`方法会将控件的整个区域和所有子控件设置为无效，并且该`Update()`方法将在最后重新绘制所有内容。

此外，您应该考虑将这些方法实现为 .NET 扩展。这将自动将`SuspendDrawing()`and`ResumeDrawing()`方法添加到每个**System.Windows.Forms.Control**中，您在其中声明了扩展名的命名空间的 USING ：

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, Int32 wMsg, bool wParam, Int32 lParam);
private const int WM_SETREDRAW = 11;

public static void SuspendDrawing(this Control Target)
{
    SendMessage(Target.Handle, WM_SETREDRAW, false, 0);
}

public static void ResumeDrawing(this Control Target)
{
    SendMessage(Target.Handle, WM_SETREDRAW, true, 0);
    Target.Invalidate(true);
    Target.Update();
} 
```

# ios - 如何在 safari 中而不是在 webview 中打开 url

> ID：11524805
> 
> 赞同：22
> 
> 时间：2012-07-17T14:32:43.403
> 
> 标签：ios, objective-c, xcode

我想在 safari 中打开一个 url，在应用程序之外而不是在 webview 中。

我实现了[UIWebViewDelegate](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIWebViewDelegate_Protocol/)但我仍然无法打开网址。基本上我无法点击网址。

下面是代码：

```
-(void)newView:(NSString *)title Description:(NSString *)desc URL:(NSString *)url{
    webView =[[UIWebView alloc]initWithFrame:CGRectMake(15, 17, 190, 190)];
    webView.backgroundColor=[UIColor clearColor];
    webView.delegate=self;
    webView.opaque = NO;
    [webView loadHTMLString:[NSString stringWithFormat:@"<html><body p style='color:white' text=\"#FFFFFF\" face=\"Bookman Old Style, Book Antiqua, Garamond\" size=\"5\">%@ %@</body></html>", desc,url] baseURL:nil];

    v = [[HUDView alloc] initWithFrame:CGRectMake(60, 70, 220, 220)];

    cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];
    cancelButton.frame = CGRectMake(0, 0, 30, 30);
    [cancelButton setBackgroundImage:[UIImage imageNamed:@"closebox.png"] forState:UIControlStateNormal];
    [cancelButton addTarget:self action:@selector(cancelButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [v addSubview:cancelButton];
    [v addSubview:webView];
    [self.view addSubview:v];  
}

-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-17T14:36:52.087

这个答案很容易通过谷歌获得：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.apple.com"]]; 
```

只需将它放在您的按钮按下或您想要调用它的任何事件中，然后将它传递给它一个 URL（替换 @"http:/www.apple.com"）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-17T15:08:04.820

阅读评论后，我认为这就是您要寻找的内容：

实现这个方法：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

从`UIWebViewDelegate`并取决于该请求参数，您应该返回`TRUE`or `FALSE`。如果您不希望 web 视图打开它，您应该调用：

```
[[UIApplication sharedApplication] openURL:request.URL]; 
```

正如其他人提到的并返回`FALSE`。

希望这可以帮助。干杯!

**编辑：**如果您的网页视图中无法识别链接，请尝试以下操作：

```
[webView setDataDetectorTypes:UIDataDetectorTypeLink] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-17T14:37:57.227

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.google.com"]]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-10T06:54:32.970

对于 iOS 10+

```
// Objective-C
UIApplication *application = [UIApplication sharedApplication];
[application openURL:URL options:@{} completionHandler:nil];

// Swift
UIApplication.shared.open(url, options: [:], completionHandler: nil) 
```

有关更多信息，请参阅[此](http://useyourloaf.com/blog/openurl-deprecated-in-ios10/)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-14T19:31:22.567

这对我有用：

```
[[NSWorkspace sharedWorkspace] openURL: [NSURL URLWithString: @"http://www.apple.com"]]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-20T11:37:33.860

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if (![[NSString stringWithFormat:@"%@",[request URL]] containsString:@"file"] ) {
        [[UIApplication sharedApplication] openURL:[request URL]];
        return NO;
    }
    return YES;
} 
```

我在本地使用了一个 html 文件。在这个 html 中有一些链接。如果您设置委托 UIWebViewDelegate 并使用此本地 html 将在您的 webView 中打开，而其他链接将在 safari 中打开
我写了“文件”，因为这个链接是“文件：///Users/~/x.app/about.html”在当地。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-02T12:04:41.983

******************** 斯威夫特 **********************

//MARK: Button Click on open with SafariViewController

```
private var urlString:String = "https://google.com"

@IBAction func openWithSafariVC(sender: AnyObject)
{

    let svc = SFSafariViewController(URL: NSURL(string: self.urlString)!)
    svc.delegate = self
    self.presentViewController(svc, animated: true, completion: nil)
} 
```

//MARK: SafatriViewConroller Dismiss

```
func safariViewControllerDidFinish(controller: SFSafariViewController)
{

    controller.dismissViewControllerAnimated(true, completion: nil)
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-20T08:35:31.210

我在谷歌找到了这个答案，但我需要在打开浏览器后终止我的应用程序并继续浏览器。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://google.com"] options: @{} completionHandler: nil]; 
```

在Android中可以做到调用`finish()`方法很容易我该怎么做

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-20T06:33:22.287

Swift 并且没有 webview 方式

```
 if let url = NSURL(string: "http://www.apple.com") {
        UIApplication.sharedApplication().openURL(url)
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-28T20:42:50.123

**斯威夫特 3** (iOS 10+):

```
if let url = URL(string: "http://www.seligmanventures.com") {
    UIApplication.shared.open(url, options: [:], completionHandler: nil)
} 
```

# abap - Abap 表创建，组合引用表/字段不存在。有什么问题？

> ID：11524808
> 
> 赞同：0
> 
> 时间：2012-07-17T14:32:45.593
> 
> 标签：abap, activation, sap-erp, sap-data-dictionary

我正在尝试在 SAP 系统中激活我的表。你可能会说，我只是一个初学者，无论如何，错误日志：

> TABL ZAVG_SO_OO 未激活 检查表 ZAVG_SO_OO (VARDELEAN/17.07.12/17:27) ZAVG_SO_OO-NETWR（组合引用表/字段 VBAP-NETWR 不存在） 必须在数据库中创建表 ZAVG_SO_OO 检查表 ZAVG_SO_OO 导致错误

vbap-netwr 消息让我很困惑。显然，表 VBAP 有一个字段 NETWR。其余的我真的不知道该怎么想。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:04:28.387

不要忘记对于像 NETWR 这样的货币和数量字段，您需要一个参考表和参考字段。进入 SE11，输入 VBAP，单击货币/数量字段选项卡并向下滚动到您的 NETWR。点击 F1 以获得关于该字段为您做什么的很好的描述。您的自定义表也需要这些引用。希望这会引导您朝着正确的方向前进。

# matlab - 使用之前和之后的值来分析所需的值::: 辐射校准 - 条纹

> ID：11524809
> 
> 赞同：0
> 
> 时间：2012-07-17T14:32:48.047
> 
> 标签：matlab, loops, increment, decrement, calibration

假设我有一个 1x15 的数据表

```
 [21 78 33 59 90 26 88 54 36 63 72 37 48 93 56] 
```

所以对于我的裸奔方程，我需要实现这个：

% 条纹 = {[abs(Q_n - ((Q_n-1 + Q_n+1)/2))] / ((Q_n-1 + Q_n+1)/2)))}*100

方程的解释：

让我们将值 90 分配给 Q_n（这来自单元格 (1,5)）使用这个值意味着对于 Q_n-1 我们想要值 59 而对于 Q_n+1 我们想要值 26本质是 (1,4) 之前的单元格和 (1,6) 之后的单元格)

Q_n = 90

Q_n-1 = 59

Q_n+1 = 26

我的问题是：我将如何对整个数据集执行此操作并将它们应用于条纹方程？（不包括第 1 行和第 15 行，因为第 1 行不能有 Q_n-1，第 15 行不能有 Q_n+1）

我在想一些事情可能是这样的：

```
Q_n = 1;
while Q_n < length(middle.middle_interpolate)
    Q_n = Q_n+1;
    before = middle.middle_interpolate{Q_n-1};
    actual = middle.middle_interpolate{Q_n};
    after = middle.middle_interpolate{Q_n+1};
    averg = ((before + after)/2);
    equation = (abs(actual-averg)/averg)*100;
    plot(equation);
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:17:17.447

我把它分成几部分，这样你就可以看到我在做什么。它也只适用于这个特定的数据集，因为索引是硬编码的（但我敢打赌，你可以弄清楚如何让它适用于你拥有的任何数据集）。

```
averg = mean([Qn(1:13),Qn(3:15)],2); % this is just getting your averg value.
actual = Qn(2:14);
equation = abs(actual-averg)./averg*100;
plot(equation) 
```

当然，你可以把这一切放在一条线上，让它看起来很复杂......

```
equation = abs(mean([Qn(1:13),Qn(3:15)],2) - Qn(2:14))./mean([Qn(1:13),Qn(3:15)],2)*100 
```

但是你想让它对将来可能会查看代码的其他人保持一定的可读性。

# html - 试图在后台 z-index subnav

> ID：11524810
> 
> 赞同：3
> 
> 时间：2012-07-17T14:33:00.527
> 
> 标签：html, css, drop-down-menu, navigation, z-index

所以我正在尝试创建一个从背景图像后面弹出的下拉导航。我认为最好的方法是使用 z-index，但我似乎无法让它工作......这是链接，看看，你会看到我想要做什么：[http://cottonwood .towermarketing.net/](http://cottonwood.towermarketing.net/)。基本上，当您将鼠标悬停在顶部导航项目上时，我希望子导航从撕裂的羊皮纸后面滑出。我已经为此苦苦挣扎了一段时间。下面是我的 CSS 和 HTML，如果需要更多，我可以发布更多。任何帮助都会很棒！

CSS：

```
.header {
    background: url(../../assets/images/repeatable-tear.png) repeat-x;
    height: auto;
    position: absolute;
    z-index: 1;
    width: 100%
}

.top-nav {
    z-index: 1  
}

.sub-nav {
    position:absolute;
    left:0;
    display:none;
    margin:0 0 0 -1px;
    padding:0;
    list-style:none;
    background: #4e8abe;
    z-index: -1;
} 
```

HTML：

```
<div class="header">
    <div class="header-container">
        <div class="nav">
            <ul class="menu">
                <li class="top-nav"><a href="#">Home</a></li>
                <li class="top-nav"><a href="#">One</a>
                    <ul class="sub-nav">
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                    </ul>
                </li>
                <li class="top-nav"><a href="#">Two</a>
                    <ul class="sub-nav">
                         <li><a href="#">One</a></li>
                         <li><a href="#">Two</a></li>
                         <li><a href="#">Three</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

好的，有一些评论我把它改成了这个，但我只能让整个导航落后，而不仅仅是子导航：

CSS .header { 高度：自动；宽度：100% }

```
.header-bg {
    background: url(../../assets/images/repeatable-tear.png) repeat-x;
    height: 175px;
    position: absolute;
    z-index: 1;
    width: 100%
} 
```

HTML

```
<div class="header">
    <div class="header-bg"></div>
    <div class="header-container">
        <div class="nav">
            <ul class="menu">
                <li class="top-nav"><a href="#">Home</a></li>
                <li class="top-nav"><a href="#">One</a>
                    <ul class="sub-nav">
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                    </ul>
                </li>
                <li class="top-nav"><a href="#">Two</a>
                    <ul class="sub-nav">
                        <li><a href="#">One</a></li>
                        <li><a href="#">Two</a></li>
                        <li><a href="#">Three</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>          
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:39:38.880

考虑你的层次结构。背景元素和下拉元素应该在同一级别。*背景元素包含*下拉元素的事实，您将无法将其 z-index 到遗忘。将您的背景应用到`div.header-container`，然后`div.nav`向上移动一个级别（从 中移出`div.header-container`，进入`div.header`），您将能够解决此问题。当然，在一些定位的帮助下，您将能够准确地实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:36:10.417

您需要在标题元素之外有子导航菜单。现在它们与标题（背景所在的位置）处于相同的堆叠上下文中，因此无论您的 z-index 值如何，它们都只会显示在背景图像的顶部。

# javascript - JSON 添加、删除、获取

> ID：11524812
> 
> 赞同：0
> 
> 时间：2012-07-17T14:33:02.650
> 
> 标签：javascript, json

您可以操作 JSON 文件吗？

例如，我可以使用 URL 按 ID 提取元素`localhost/text/egg.json?id=1`，还是可以使用 JavaScript 从 JSON 文件中删除其中一条记录？还是 JSON 是一种只读格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:39:42.343

是和不是。对于 JSON 本身，您可以**在客户端**任意操作它。在服务器上修改它时，服务器需要配合。如果您可以控制服务器，则可以处理 HTTP PUT 或 POST 来更改文件的内容。否则，没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T14:36:08.710

> 你能操作一个 JSON 文件吗

只要您可以操作任何结构化文本格式

> 例如，我可以使用 URL 通过其 ID 提取元素，例如 localhost/text/egg.json?id=1

没有通过 URI 访问部分 JSON 文本的标准。

您可以编写一个服务器端脚本，该脚本返回一个 JSON 文本，该文本是基于查询字符串的另一个文本的子集。

> 或者我可以使用 JavaScript 从 JSON 文件中删除其中一条记录吗

你可以下载文件。解析它。从生成的数据结构中删除数据。然后将其序列化回 JSON。

除非服务器支持 HTTP PUT 或提供一些其他 API 让您将更改的文件发回，否则您无法将其保存到原始 URI。

# c# - 在 EF 中引用导航属性的父表

> ID：11524819
> 
> 赞同：1
> 
> 时间：2012-07-17T14:33:15.123
> 
> 标签：c#, entity-framework-4, navigation-properties

我基本上有三张带 FK 的桌子

制作

*   MakeId
*   品牌名称

模型

*   型号 ID
*   型号名称
*   制造商 (FK)

车辆

*   车辆编号
*   购买日期
*   型号 ID (FK)

我想要一个从 Vehicle 到 Make 的导航属性而不修改我的数据库

我试过了：

```
public class Make
{
    public int MakeId {get;set;}
    <snip>...</snip>
    public virtual Vehicle Vehicles {get;set;}

}

<snip>Model</snip>

public class Vehicle
{
    public int VehicleId {get;set}
    <snip>...</snip>
    public virtual Make VehicleMake {get;set;}
}

public class VehicleMap : EntityTypeConfiguration<Vehicle>
{
    public VehicleMap()
    {
        this.HasKey(t => t.VehicleId);
        <snip>...</snip>
        this.HasRequired(t => t.VehicleMake)
        .WithMany(t => t.Vehicles)
        .HasForeignKey(t => t.Model.MakeId);
    }

} 
```

但是，当我这样做时，我收到了一个异常：

> 属性表达式 'd => d.Model.MakeId' 无效。该表达式应表示一个属性：C#: 't => t.MyProperty' VB.Net: 'Function(t) t.MyProperty'。指定多个属性时使用匿名类型：C#: 't => new { t.MyProperty1, t.MyProperty2 }' VB.Net: 'Function(t) New From { t.MyProperty1, t.MyProperty2 }'。

如何在我的 Make & Vehicle 表上创建导航属性而不将 Vehicle.ModelId 列添加到我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:02:17.043

EF 不支持这种类型的建模。`Model.Make`您可以按如下方式创建一个环绕的属性。但这可能会导致不必要的延迟加载。

```
public class Vehicle
{
    public int VehicleId {get;set}
    <snip>...</snip>

    [NotMapped]
    public virtual Make VehicleMake 
    {
        get { return Model.Make; }
        set { Model.Make = value; }
    }
} 
```

# linux - ldd 和 objdump 有什么区别？

> ID：11524820
> 
> 赞同：23
> 
> 时间：2012-07-17T14:33:15.280
> 
> 标签：linux, objdump, ldd

我正在运行这两个命令，并且得到不同的输出：

```
$ ldd `which ls`
    linux-gate.so.1 =>  (0x00db3000)
    libselinux.so.1 => /lib/i386-linux-gnu/libselinux.so.1 (0x00ba2000)
    librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0x007bf000)
    libacl.so.1 => /lib/i386-linux-gnu/libacl.so.1 (0x004ce000)
    libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x00110000)
    libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0x00398000)
    /lib/ld-linux.so.2 (0x00dea000)
    libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0x00a83000)
    libattr.so.1 => /lib/i386-linux-gnu/libattr.so.1 (0x00d3d000) 
```

进而

```
objdump -x `which ls` | grep NEEDED
  NEEDED               libselinux.so.1
  NEEDED               librt.so.1
  NEEDED               libacl.so.1
  NEEDED               libc.so.6 
```

那是怎么回事？我以为他们都给了库依赖项？我关心的原因是我怀疑`ldd`是正确的，但我正在ARM上的linux上工作，我可以告诉我没有ldd......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T14:44:13.590

您可以看到输出的差异。

objdump 只是将对象本身列出的内容转储为包含未解析符号的库。

ldd 列出了 ld.so 实际加载的库。它向后跟随图表，以便您可以看到*这些*库将加载什么。这就是 libpthread.so.0 在 ldd 输出中结束的方式，尽管它不在 objdump 输出中。

所以 ldd 将更好地描述运行时真正需要可用的内容。但是，在解决编译/链接时问题时，objdump 非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T20:24:36.413

请参阅**程序库 HOWTO**，第[3.5 节。安装和使用共享库](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN115)：

> 当心：不要*在*您不信任的程序上运行 ldd。正如 ldd(1) 手册中明确指出的那样，ldd （在某些情况下）通过设置一个特殊的环境变量（对于 ELF 对象，LD_TRACE_LOADED_OBJECTS）然后执行程序来工作。不受信任的程序可能会强制 ldd 用户运行任意代码（而不是简单地显示 ldd 信息）。因此，为了安全起见，不要在您不信任执行的程序上使用 ldd。

# c# - 卸载 MVC 4 RC 后难以安装 MVC 3

> ID：11524821
> 
> 赞同：3
> 
> 时间：2012-07-17T14:33:15.093
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

最近开始了一个新项目，打算用MVC 4。犯了一个错误，没有先安装MVC 3就安装了MVC 4 RC。

在阅读了其他用户遇到的问题后，卸载了 MVC 4 并尝试安装 MVC3。

我使用平台安装程序安装 MVC 3，但反复遇到一些关于 MVC 3 某些部分安装失败的错误消息（平台安装程序的详细信息报告没有帮助）。

我卸载并重新安装了 Visual Studio 2010 Enterprise，并尝试安装 MVC 3 两次。第二次只是为了向其他人展示错误。

我尝试第三次安装，以便将错误复制到 Stack Overflow 以获取洞察。

令人震惊的是，这一次成功了。

一方面我很高兴有一个“成功”的安装，另一方面我很紧张可能仍然有问题。

我知道我没有付出太多，但我想知道是否有其他人遇到过这种顺序或类型的问题？我知道微软开发人员会关注这个网站。谁能指出从我的环境中“清理”MVC 4 RC 可能需要的任何其他步骤？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T11:02:58.773

在安装 MVC 4 时，系统中会安装更新版本的 Nuget，这会阻止 MVC 3 的安装成功。因此，一旦您从添加/删除程序中卸载了此版本的 Nuget，您就可以成功安装 MVC 3，同时保留 MVC 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:09:18.730

万一其他人遇到这个问题，没有其他不利影响。

卸载 MVC 4 后，尝试了 3 次安装 MVC 3。但经过 5 个多星期的开发，没有出现明显的问题。

明确的教训是在安装 MVC 4 之前安装 MVC 3。

# performance - 命名管道与 IPC 的 COM

> ID：11524823
> 
> 赞同：0
> 
> 时间：2012-07-17T14:33:16.877
> 
> 标签：performance, com, ipc, named-pipes

命名管道是否比使用 COM（进程外）进行进程间通信更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:37:43.957

没有更多信息，很难回答您的问题。根据您提供的信息，我会说 - 这取决于。我们需要有关实施方案和您的需求上下文的更多信息。

尽管如此，我个人还是建议使用命名管道。它们的设置相对简单，向后兼容且非专有。只需确保将其包装在抽象层中，以便您可以在需要时轻松更改为不同的 IPC 方法。

# android - 进度对话框 - WindowManager$BadTokenException：无法添加窗口 - 令牌 null 不适用于应用程序

> ID：11524825
> 
> 赞同：1
> 
> 时间：2012-07-17T14:33:20.137
> 
> 标签：android, android-asynctask, progressdialog, android-windowmanager

我有一个**MapActivity**，首先我试图获取用户的当前位置。为了获取当前位置，我使用了**AsyncTask**概念。现在我想要实现的是向用户显示**ProgressDialog**直到获得当前位置。

**这是布局代码：-**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:apiKey="0nO35c3MpXJisxsknk_w_fqVQa78sPhMQK3Yf5w"
        android:clickable="true" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <SeekBar
            android:id="@+id/zoombar"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:max="20"
            android:progress="0" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="70dip"
        android:layout_marginTop="5dip"
        android:background="@drawable/round"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="5dip" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/sun" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|center_horizontal"
                android:layout_marginLeft="15dip" >

                <ImageView
                    android:id="@+id/rupee"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/rupee" />

                <TextView
                    android:id="@+id/day_amount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|right"
                    android:layout_marginLeft="10dip"
                    android:numeric="decimal"
                    android:text="0.0"
                    android:textColor="@color/autoText"
                    android:textSize="@dimen/text_size_medium"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>

        <View
            android:layout_width="2dip"
            android:layout_height="wrap_content"
            android:background="#ff6600" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="5dip" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/moon" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|center_horizontal"
                android:layout_marginLeft="15dip" >

                <ImageView
                    android:id="@+id/rupee"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/rupee" />

                <TextView
                    android:id="@+id/night_amount"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical|right"
                    android:layout_marginLeft="10dip"
                    android:numeric="decimal"
                    android:text="0.0"
                    android:textColor="@color/autoText"
                    android:textSize="@dimen/text_size_medium"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

**地图活动代码：-**

```
// Background AsyncTask Class

    class CurrentPositionTask extends AsyncTask<String, Void, Void> {
        boolean flag = true;
        @Override
        public void onPreExecute() {
            // TODO Auto-generated method stub
            System.out.println("Executed");

                    // TODO Auto-generated method stub
                    dialog = new ProgressDialog(AutoMapActivity.this.getApplicationContext());
                    dialog.setTitle("");
                    dialog.setMessage("Searching");
                    dialog.show();
        }

        @Override
        public Void doInBackground(String... params) {
            // TODO Auto-generated method stub
            while(flag){
                //System.out.println("While Loop");
                if (latitude != 0 && longitude != 0) {
                    flag = false;
                    break;
                }
            }

            return null;
        }

        @Override
        public void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            locationManager.removeUpdates(locationListener);
            if (latitude!=0 && longitude!=0) {
                dialog.cancel();
                setInit();
            }
        }
    }

    //LocationListner Class
    class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
            if (location != null) {
                latitude = location.getLatitude();
                longitude = location.getLongitude();
            }
        }

        public void onProviderDisabled(String arg0) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Gps Disabled",
                    Toast.LENGTH_LONG).show();

        }

        public void onProviderEnabled(String arg0) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Gps Enabled",
                    Toast.LENGTH_SHORT).show();
        }

        public void onStatusChanged(String provider, int status, Bundle extra) {
            // TODO Auto-generated method stub
            switch (status) {
            case 0:
                // OutofService
                Toast.makeText(getApplicationContext(), "Out of Service",
                        Toast.LENGTH_LONG).show();
                break;
            case 1:
                // Temporarily unavailable
                Toast.makeText(getApplicationContext(),
                        "Location Temporary Unavailable", Toast.LENGTH_LONG)
                        .show();
                break;
            case 2:
                // Available
                Toast.makeText(getApplicationContext(), "Available",
                        Toast.LENGTH_LONG).show();
                break;
            }
        }
    } 
```

**记录猫：-** '

```
07-17 19:37:49.267: W/System.err(881): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
07-17 19:37:49.277: W/System.err(881):  at android.view.ViewRoot.setView(ViewRoot.java:531)
07-17 19:37:49.277: W/System.err(881):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
07-17 19:37:49.277: W/System.err(881):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
07-17 19:37:49.277: W/System.err(881):  at android.app.Dialog.show(Dialog.java:241)
07-17 19:37:49.277: W/System.err(881):  at com.test.fare.AutoMapActivity$CurrentPositionTask.onPreExecute(AutoMapActivity.java:195)
07-17 19:37:49.277: W/System.err(881):  at android.os.AsyncTask.execute(AsyncTask.java:391)
07-17 19:37:49.277: W/System.err(881):  at com.test.fare.AutoMapActivity.getUserCurrentLocation(AutoMapActivity.java:146)
07-17 19:37:49.277: W/System.err(881):  at com.test.fare.AutoMapActivity.onCreate(AutoMapActivity.java:80)
07-17 19:37:49.277: W/System.err(881):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-17 19:37:49.287: W/System.err(881):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-17 19:37:49.287: W/System.err(881):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-17 19:37:49.287: W/System.err(881):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-17 19:37:49.287: W/System.err(881):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-17 19:37:49.287: W/System.err(881):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-17 19:37:49.287: W/System.err(881):  at android.os.Looper.loop(Looper.java:130)
07-17 19:37:49.287: W/System.err(881):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-17 19:37:49.297: W/System.err(881):  at java.lang.reflect.Method.invokeNative(Native Method)
07-17 19:37:49.297: W/System.err(881):  at java.lang.reflect.Method.invoke(Method.java:507)
07-17 19:37:49.297: W/System.err(881):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-17 19:37:49.297: W/System.err(881):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-17 19:37:49.297: W/System.err(881):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T14:45:45.447

在 MapActivity 创建对话框时尝试使用 AutoMapActivity.this 而不是 AutoMapActivity.this.getApplicationContext()？

# jquery - 使用 jQuery 在 Firefox 中获取隐藏表单字段值的问题

> ID：11524826
> 
> 赞同：0
> 
> 时间：2012-07-17T14:33:21.933
> 
> 标签：jquery

我有以下表单，当我单击下一步按钮时，我试图获取隐藏表单字段“kpiValueType”的值。

```
<script type="text/javascript">
    function getGivenFieldValue()
    {
        var searchFieldVal = jQuery('input:hidden[name="activities[0].kpiList[0].kpiValueType"]').val();
        alert(searchFieldVal);
    }
</script>

<h:form id="fundRequestForm" action="" method="post">
    <ui:repeat value="#{fundRequestBean.requestActivityList}" var="activity" varStatus="stat">
        <table width="100%" class="tablesorter">
            <thead class="fixedHeader">
                <tr>
                    <th width="418px">
                            <input type="checkbox" checked="checked" name="activities[#{stat.index}].check" />
                        #{activity.activityName}
                    </th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                <ui:repeat value="#{activity.kpiList}" var="kpi" varStatus="status">
                    <tr>
                        <td>#{kpi.kpiName}<ui:fragment rendered="#{kpi.required=='true'}">
                                <label style="color: red">*</label>
                            </ui:fragment>
                        </td>
                        <td><div style="text-align: left; padding-top: 5px; padding-bottom: 5px; float: left;">
                                <input type="text" name="activities[#{stat.index}].kpiList[#{status.index}].kpiValueString"
                                        value="#{kpi.kpiValueString}" size="60" maxlength="50" />
                        </td>
                    </tr>
                    <input type="hidden" name="activities[#{stat.index}].kpiList[#{status.index}].kpiValueType"
                        value="#{kpi.kpiValueType}" />
                </ui:repeat>
            </tbody>
        </table>
    </ui:repeat>

    <table width="100%" border="0" bordercolor="#CCCCCC" rules="none" cellspacing="0" cellpadding="0">
        <tr>
            <td colspan="3" align="center">&#160;&#160;&#160;&#160;</td>
        </tr>
        <tr>
            <td>&#160;&#160;&#160;&#160;</td>
            <td>&#160;&#160;&#160;&#160;</td>
            <td align="right"><div id="nextButtonDiv" style="float: right;">
                    <h:commandButton
                        onclick="getGivenFieldValue()"
                        actionListener="#{fundRequestBean.saveFundRequest}" action="#{fundRequestBean.getPreviewFundRequestData}"
                        value="#{msg.nextLbl}">
                    </h:commandButton>
                </div>&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
        </tr>
        <tr>
            <td colspan="3" align="center">&#160;&#160;&#160;&#160;</td>
        </tr>
    </table>
</h:form> 
```

从页面源中，我看到隐藏字段 kpiValueType 的名称为

```
<input type="hidden" name="activities[0].kpiList[0].kpiValueType" value="N" /> 
```

警报给我未定义。你能告诉我这里有什么问题吗？我正在使用 jQuery 1.7 和 Firefox 13.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:39:54.190

您需要转义`.`选择器中的字符：

```
var searchFieldVal = jQuery('input:hidden[name="activities[0]\\.kpiList[0]\\.kpiValueType"]').val();
alert(searchFieldVal); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/4uDSp/)。

# javascript - 拆分格式化数字并分配为变量

> ID：11524831
> 
> 赞同：0
> 
> 时间：2012-07-17T14:33:43.443
> 
> 标签：javascript, regex

在 JavaScript 中使用 Titanium IDE。我认为这也必须使用正则表达式来实现。

所以，我试图把类似的东西 `5-6-7` 分开，例如，我取第一个数字（在本例中为 5），然后将它带入一个变量以供以后使用。这对所有数字都是一样的，所以我最终得到类似`var one = 5; var two = 6; var three = 7;`

这样，我就可以采用特定的数字并使用它们的值，而不是将其作为一个整体。

我已经为此工作了大约两个小时，但由于我对 Regex 或其他类似文本格式的理解在这一点上非常糟糕（学习！），我可以使用额外的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:46:22.433

我很确定您可以像这样访问数据：

```
var list = "1-6-7-123-123-3-21-3",
    items = list.split('-');

console.log(items[1]); // logs "6"
console.log(items[0]); // logs "1"
console.log(items[3]); // logs "123" 
```

# jquery - 从请求返回字符串时出现错误错误 80020101 的 ajax 问题

> ID：11524832
> 
> 赞同：4
> 
> 时间：2012-07-17T14:33:43.157
> 
> 标签：jquery, asp.net, html, ajax

我的代码执行出现以下错误： **Microsoft JScript 运行时错误：由于错误 80020101 无法完成操作。**

*以下链接是我在 Stackoverflow 上找到的内容：* [Ajax 请求问题：错误 80020101](https://stackoverflow.com/questions/4918969/ajax-request-problem-error-80020101)

```
var div = $("<div class='modal'>").html($(result.getWebFormDesignFieldContentsResult)); 
```

传入的信息 result.getWebFormDesignFieldContentsResult 是一长串 HTML 和 JAVASCRIPT，还没有解析成 DOM。我只是觉得这很奇怪，因为前几天我让它工作，然后试图添加额外的功能......打破它。:(

传入的字符串相当大，但类似于：

```
<div>input tags for filtering</div>
<select><option></option>...[150 option tags]... </select>
<anchor tag to return contents>
<script type = "text/javascript">
  ...stuff fires related to the above items...
</script> 
```

我当时认为将作为字符串传递的信息放入 div 标签中存在问题，因为它可能不像脚本标签。

有没有其他人完成了这个，或者给我一些关于如何处理这个的指示？我可能想制作一个字符串对象，然后相应地分解内容，只将html放入html中，然后以不同的样式处理js。

**结果字符串 (result.getWebFormDesignFieldContentsResult)**

**你也可以在这里访问：http:** [//jsfiddle.net/3kFv2/](http://jsfiddle.net/3kFv2/)

```
 <table style='width:inherit;'>
                <tr>
                    <td>
                        <input type='text' id ='queryInput' onkeypress = 'clearTimeout(timerVar); timerVar = setTimeout(function(){ fetchFieldInfo($("#queryInput").val()); },1000);' />
                    </td>
                    <td style = 'text-align:right;'>
                        <a class = 'modalButton' id = 'queryButton' runat='server' value = 'Re-Filter' onCLick = '$("div.modal").fadeOut(); fetchFieldInfo($("#queryInput").val());'>Re-Filter</a>
                    </td>
                </tr>
                <tr>
                    <td colspan='2' style='margin-left:auto; margin-right:auto; text-align:center;'><select size = '20' id = 'selectList' name = 'selectList' ><option value = '1000'>Abutment Notes</option><option value = '2300'>Abutments Notes</option><option value = '2302'>Abutments Notes Maint Need</option><option value = '2301'>Abutments Notes Remarks</option><option value = '10942'>Concrete Deterioration Maint Need</option></select></td>
                <td>
                    <div style='width:300px;height:300px;' id = 'modalInfoPanel'>
                    </div>
                </td>
            </tr>
            <tr>
                <td></td>
                <td style='text-align:right;'>
                    <a class = 'modalButton' id = 'buttonReturnValue' value = 'Return Selected Element' onClick='$("div.modal, div.overlay").fadeOut();'>Return Selected Element</a>
                </td>
            </tr>
        </table>
        <script type = 'text/javascript'>
            function ajaxDisplayContents(value){
                //alert(value.val());
 /*
                $('#selectList option').each(function(){
                    return $(this).val() == '';
                }).attr('selected','selected');
 */
                $.ajax({
                    type: 'POST',
                    url: WEBSERVICE_URL + '/fetchFieldInfo',
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify({'fe_id': value.val().toString()}),
                    success: function(result, textStatus, jqXHR){
                        $('#modalInfoPanel').html(result.fetchFieldInfoResult);
                    },
                    error: function(xhr, status, message){
                        $('#modalInfoPanel').html(status + ' ' + message);
                    }
                });
            }
            $('select#selectList').change(function(){
                ajaxDisplayContents($(this));
            });

            $(function(){
                $('ul li').click(function(){ clicker(this); });
            });
            function clicker(x){
                if($(x).next().is('li') || $(x).next().length == 0){
                    $.ajax({
                        type: 'POST',
                        url:,
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify({}),
                        success: function(result){
                            $(x).after($('<ul>').append($(result['METHODResult']));
                            $(x).next().find('li').click(function() clicker(this); });
                        },
                        error: function(){
                            alert('failed to fetch');
                        }
                    });
                }else if($(x).next().is('ul')){
                    $(x).next().slideUp(function(){ $(this).remove(); });
                }
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T13:28:37.810

我得到了同样的错误 80020101。

然后在逐行检查代码时，我意识到我错误地添加了两次：`<script<script>`

一旦我删除了这些，错误就消失了。

因此，请仔细检查所有代码，尤其是打开未正确关闭的标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T17:02:21.323

看着： http: [//mattwhite.me/blog/2010/4/21/tracking-down-error-80020101-in-internet-exploder.html](http://mattwhite.me/blog/2010/4/21/tracking-down-error-80020101-in-internet-exploder.html) 告诉你虽然有嵌入脚本标签等错误。 ..从根本上说，错误只是说明“有错误”。

在牢记这些信息之后，我深入研究了我的代码，通过在这里和那里注释掉一些片段来发现越来越多的问题。我发现的错误是 clicker() ajax 调用。我看了一会儿，意识到原来的 ajax 调用被注释掉了。这是对未实现的 Web 服务的新调用并且有错误。由于我将其注释掉，它再次正常工作，我只需为该 ajax 调用正确定义所有内容，一切都会好起来的。

感谢大家帮忙调试。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T07:44:45.253

就我而言，问题是位于某些注释行末尾的特殊字符（重音）。

当这些字符接近注释行的末尾时，Internet Explorer 会删除其中的一些（包括换行符）并中断 JavaScript 代码。

```
// This comment line could fail because it has an accent at the end aeíou
alert("This line probably doesn't work in IE"); 
```

IE 会将这一行理解为：

```
// This comment line could fail because it has an accent at the end **aealert**("This line probably doesn't work in IE"); 
```

我希望它对你有帮助。

# mysql - 在 bash 中将标准输出转换为 utf8

> ID：11524842
> 
> 赞同：2
> 
> 时间：2012-07-17T14:34:11.220
> 
> 标签：mysql, bash, curl, utf-8, character-encoding

我想将使用 curl 获得的任何网站的输出转换为 utf8 用于数据库插入。

用法例如：

```
html="$(curl -iL -compressed "$link")"

##code needed to convert nonUTF8 $html to utf8, preferably without writing to file

## escape characters for insert
html_q="${html//'\'/\\\\}"
html_q="${html_q//"'"/\'}"

## the insert statement
sqlHtml='INSERT INTO `'"${tableHtml}"'` (`html`) VALUES ('"'${html_q}'"');'
mysql -u$dbUser -p$dbPass -h$dbHost -P$dbPort -D$dbName --default_character_set utf8 -A <<ENDofMESSAGE
${sqlHtml}
ENDofMESSAGE 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T14:37:45.823

简短的问题，简短的回答：

`man iconv`

现在，您还有一个问题：确定网页的源编码是什么。（提示：在 google 中输入 charsetdetector）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:16:44.993

在一般情况下，如果没有解析器，它就无法正确完成。脚本不会削减它。如果您的目标是存储页面，请将其视为二进制，压缩并转换为可打印的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:03:33.113

这是我寻求的解决方案：

```
#!/bin/bash 

result="$( { stdout="$(curl -Lsv -compressed "$1")" ; } 2>&1; echo "--SePaRaToR--"; echo "$stdout")"; 
echo '
found:'
echo "$result" | grep -o '\(charset\|encoding\)[ ]*=[ ]*["]*[a-zA-Z0-9_: -]*'
echo ' '
status=1
charset="ISO_8859-1" #set default
# 1: HTTP Content-Type: header 
# 2: <meta> element in the page 
# 3: <xml> element in the page
regex='.*(charset|encoding)\s*=\s*["]*([a-zA-Z0-9_: -]*)'
if [[ "$result" =~ $regex  ]]
    then
        charset="${BASH_REMATCH[2]}"    
        status=2
        echo "match succes: $charset"
    else 
        echo "match fail: $charset : ${BASH_REMATCH[2]}" 
fi

if [[ "$charset" == *utf-8* || "$charset" == *UTF-8* ]]
    then
        charset='NotModified'
    else
    echo "iconv '$charset' to UTF-8//TRANSLIT"
    html=$(echo "$result" | iconv -f"$charset" -t'UTF-8//TRANSLIT')
    if [ $? -ne 0 ] 
        then
        echo "translit failed : iconv '$charset' to UTF-8//IGNORE"
        html=$(echo "$result" | iconv -f"$charset" -t"UTF-8//IGNORE")
        if [ $? -ne 0 ] 
            then            
            charset="ISO_8859-1"
            echo "ignore failed : iconv '$charset' to UTF-8//IGNORE"
            html=$(echo "$result" | iconv -f"$charset" -t"UTF-8//IGNORE")
            status=4
        fi
        status=3
    fi

fi
echo "charset: '$charset' , status: '$status'" 
```

默认是 w3c[推荐](http://www.w3.org/TR/html4/charset.html#h-5.2.2)。
它不是 100% 准确，但速度很快，而且 99% 的时间都能完成工作。

希望它可以帮助处于相同情况的人。
也感谢所有回答。

# java - spring mvc用post方法传递对象

> ID：11524843
> 
> 赞同：2
> 
> 时间：2012-07-17T14:34:13.877
> 
> 标签：java, json, spring, spring-mvc

我正在尝试将提交的表单传递给我的页面控制器。我正在构建这样的 JSON 对象：

```
{
"periodId": "1",
"domainId": "46",
"modelTypeId": "1",
"modelGroup": {
    "modelGroupName": "123",
    "modelGroupDescription": "abc"
}
} 
```

我想将对象`*Id`作为整数和`modelGroup`完整对象传递。所以我的目标是以某种方式完成这项工作：

**JS文件**

```
jQuery.ajax( "/Models/SaveModel", {
    type:"POST",
    dataType:'json',
    contentType:"application/json",
    data:JSON.stringify( output )
} ); 
```

**页面控制器**

```
@RequestMapping(value = "/SaveModel", method = RequestMethod.POST, headers = {"content-type=application/json"})
public
@ResponseBody
boolean createModel( SettlementModelGroup modelGroup, 
                     Integer periodId,
                     Integer domainId,
                     Integer modelTypeId )
{
    //process data here
} 
```

有可能还是我必须进行`@RequestBody String object`注释然后解析 JSON 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:44:24.667

默认情况下，Spring MVC 不会为您执行此操作 - 如果您想使用默认方法，您可以像您所说的那样使用您的 , , 创建一个包装器`modelGroup`类型`periodId`，`domainId`并`modelTypeId`使用`@RequestBody`.

如果您绝对想要一种与您所写内容一致的方法，则一种方法是：

创建自定义注释 - 比如说`@JsonArg`

用这个注解标注相关参数

```
boolean createModel( @JsonArg SettlementModelGroup modelGroup, 
                     @JsonArg Integer periodId,
                     @JsonArg Integer domainId,
                     @JsonArg Integer modelTypeId ); 
```

编写一个自定义[HandlerMethodArgumentResolver](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/method/support/HandlerMethodArgumentResolver.html)它将支持 @JsonArg 注释参数：

```
boolean supportsParameter(MethodParameter parameter){
  return (parameter.getParameterAnnotation(JsonArg.class)!=null);
} 
```

编写逻辑从请求体中解析出相关参数：

```
public Object resolveArgument(MethodParameter methodParameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:42:32.390

如果您创建了一个对象，其中包含上面列出的所有 4 个作为参数的对象，那么您只需使用该参数注释一个参数，`@RequestBody`它就会为您转换所有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T22:28:48.717

在@RequestBody 之后你必须写一个对象，其中包含模型类（getters/setters）

# forms - Symfony2 - 表单方法从 POST 切换到 GET？

> ID：11524848
> 
> 赞同：2
> 
> 时间：2012-07-17T14:34:26.167
> 
> 标签：forms, symfony

我在 Symfony2 中手动构建登录表单（不使用表单构建器），并且由于某种原因忽略了 POST 方法；目标页面看到一个 GET 请求，所以我无权访问发布的字段值。

这是表格：

```
<form action="/mysite/web/dologin" method="POST">
   Email: <input name=email type=text size=40>
   Password: <input name=password type=password size=40>
   <input type=submit>
</form> 
```

还有 routing.yml 条目：

```
dologin: 
    pattern:  /dologin/
    defaults: { _controller: SiteDefaultBundle:Default:dologin } 
```

和控制器动作：

```
public function dologinAction()
{
        $request = $this->getRequest();
        var_dump($request);
} 
```

我提交的表单在两个字段中都有值，但没有值通过。生成的请求转储的相关部分如下所示；注意“请求”中没有字段：

```
 ["request"]=>
  object(Symfony\Component\HttpFoundation\ParameterBag)#8 (1) {
    ["parameters":protected]=>
    array(0) {
    }
  }
  ["query"]=>
  object(Symfony\Component\HttpFoundation\ParameterBag)#9 (1) {
    ["parameters":protected]=>
    array(0) {
    }
  }
  ...
  ["REQUEST_METHOD"]=>
  string(3) "GET" 
```

如果我在 HTML 表单中将方法更改为“GET”，识别的 request_method 仍然是 GET，但表单值现在可用：

```
 ["request"]=>
  object(Symfony\Component\HttpFoundation\ParameterBag)#8 (1) {
    ["parameters":protected]=>
    array(0) {
    }
  }
  ["query"]=>
  object(Symfony\Component\HttpFoundation\ParameterBag)#9 (1) {
    ["parameters":protected]=>
    array(2) {
      ["email"]=>
      string(13) "test@test.com"
      ["password"]=>
      string(4) "mypw"
    }
  } 
```

为什么会这样？为什么 POST 被忽略？我需要指定编码类型吗？我知道您可以保护 Symfony 中的表单免受跨站点攻击；我想知道这是否是我需要更改的默认配置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:36:23.700

回答我自己的问题：我需要让表单操作（'/dologin'）和路由规范（'/dologin/'）对应于斜杠。向表单操作添加尾部斜杠可修复问题。

# c# - 与 Linq 不同的日期

> ID：11524853
> 
> 赞同：5
> 
> 时间：2012-07-17T14:34:34.593
> 
> 标签：c#, linq, datetime, linq-to-entities, distinct

我有一个名为 Billings 的实体，其属性为 DateTime。我需要唯一地找到日期，以便我可以浏览它们并做一些事情。我试过：

```
var DistinctYearMonthsDays = (from t in db.Billings 
                              where t.DateTime.HasValue 
                              select   t.DateTime.Value.Date).Distinct();

foreach (var day in DistinctYearMonthsDays) 
```

但我得到（在`foreach`）：

> LINQ to Entities 不支持指定的类型成员“日期”。仅支持初始化程序、实体成员和实体导航属性。

搜索后，我还尝试了以下操作，但均未成功：

```
IEnumerable<DateTime> DistinctYearMonthsDays = db.Billings
    .Select(p => new 
        {              
            p.DateTime.Value.Date.Year,
            p.DateTime.Value.Date.Month,
            p.DateTime.Value.Date.Day 
         }).Distinct()
         .ToList()
         .Select(x => new DateTime(x.Year,x.Month,x.Day)); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T14:44:15.150

您可以使用内置的 EntityFunctions。您的查询将变为：

```
var DistinctYearMonthsDays = (from t in db.Billings 
                              where t.DateTime.HasValue 
                              select EntityFunctions.TruncateTime(t.DateTime)).Distinct(); 
```

有关 EntityFunctions 的更多信息，请查看[MSDN](http://msdn.microsoft.com/en-us/library/bb738563.aspx)。

# c - 用于在 C 中对数组进行排序的内置函数

> ID：11524857
> 
> 赞同：8
> 
> 时间：2012-07-17T14:35:11.817
> 
> 标签：c, arrays, function, sorting, built-in

C 编程语言中是否有用于排序数组的内置函数？还是我必须编写自己的函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T14:37:26.517

查看 qsort

句法：

`#include <stdlib.h>
void qsort( void *buf, size_t num, size_t size, int (*compare)(const void *, const void *) );`

描述：

该`qsort()`函数使用 Quicksort 对 buf（包含 num 个项目，每个项目的大小大小）进行排序。compare 函数用于比较 buf 中的项目。如果第一个参数小于第二个参数，compare 应该返回负数，如果它们相等则返回零，如果第一个参数大于第二个参数，则比较应该返回正数。qsort() 按升序对 buf 进行排序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-17T14:38:18.517

您可以[`qsort`](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)在`stdlib.h`. ~~它是一种快速排序算法，平均时间复杂度为 O(nlogn)，最坏情况复杂度为 O(n ² )。~~[C99 标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)甚至更新的C11[标准](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1570.pdf)不要求函数的实现或时间复杂度。但是，常见的实现很可能会使用产生平均情况 O(nlogn) 时间复杂度的算法（这是通过比较进行排序的最佳选择）。

您可以使用它对任何类型的数组（甚至`struct`）进行排序 - 但您必须提供一个比较函数来比较数组的 2 个元素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-17T14:38:21.393

[qsort](http://www.manpagez.com/man/3/qsort/)是众所周知的。还有其他的，如堆排序、合并排序等。请查看链接以获取更多详细信息。

请注意，它们都将比较函数作为输入，这使得它们很容易与原生数据类型以及用户创建的数据类型一起使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-17T14:37:40.753

是的：[`qsort`](http://pubs.opengroup.org/onlinepubs/009695399/functions/qsort.html)。它在`stdlib.h`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-14T00:09:44.903

```
 #include <stdio.h> 
 #include <stdlib.h> 

  // This function is used in qsort to decide the relative order 
  // of elements at addresses p and q. 
  int comparator(const void *p, const void *q) 
   { 
      return (*(int*)p-*(int*)q);
      } 

  // A utility function to print an array 
  void printArr(int arr[], int n) 
  { 
     int i; 
     for (i = 0; i < n; ++i) 
     printf("%d ", arr[i]); 
  }  

  // Driver program to test above function 
  int main() 
  { 
     int arr[] = {1, 6, 5, 2, 3, 9, 4, 7, 8, 0}; 
     int size = sizeof(arr) / sizeof(arr[0]); 
     qsort((void*)arr, size, sizeof(arr[0]), comparator); 
     printf("Output array is\n"); 
     printArr(arr, size);  
     return 0; 
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-10T22:13:26.917

**简单的语法：**

```
int function (const void * a, const void * b) {return ( *(int*)a-(int*)b);}
`qsort(arr_name , sizeofarray , sizeof(int), function); 
```

# entity-framework-4 - EDM 结构注释 - 用于在属性上提供 IgnoreDataMemberAttribute 的示例 xml 配置

> ID：11524860
> 
> 赞同：0
> 
> 时间：2012-07-17T14:35:21.533
> 
> 标签：entity-framework-4

传统实体框架 4 项目（不是 POCO）。

默认情况下，所有基元和导航实体属性都使用 DataMemberAttribute 进行标记。

我想用 IgnoreDataMemberAttribute 标记一个实体导航属性。目的是当在 WCF 中使用 DataContractSerializer 时，当集合中有大量相关实体时，它不会在 Web 服务中生成非常大的序列化对象。该属性的可访问性似乎并不重要。

我在[这里](https://blogs.msdn.com/b/efdesign/archive/2008/08/12/structural-annotations-one-pager.aspx "结构注释 - 一个寻呼机")和[这里](http://preview.library.microsoft.com/en-us/library/dd456856.aspx "结构注释（实体数据模型）")看到了一些关于将结构注释与 edmx 文件一起使用的文档。这似乎很适合这个目的。

是否可以使用结构注释在 edmx 文件的 CSDL 中使用 IgnoreDataMemberAttribute 标记实体属性？

如果是这样，有人可以提供一个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:41:08.987

这似乎可以通过使用自定义 T4 模板来实现，尽管这种方法会删除所有导航属性的属性。

步骤是：

右键单击 EDM 设计器图面，然后选择添加代码生成项。

*   选择 ADO.NET EntityObject Generator 并指定您正在创建的 T4 模板 tt 文件的名称。

*   单击解决方案资源管理器窗口中的 EDMX 文件，然后在属性窗格中清除自定义工具属性。

*   单击解决方案资源管理器窗口中的 TT 文件，然后在属性窗格中，指定自定义工具命名空间（如果适用）。

*   编辑 TT 文件以从 Navigation Property 部分中删除 [DataMemberAttribute]

更多信息：

[https://blogs.msdn.com/b/efdesign/archive/2009/01/22/customizing-entity-classes-with-t4.aspx](https://blogs.msdn.com/b/efdesign/archive/2009/01/22/customizing-entity-classes-with-t4.aspx)

[http://www.smartsoftwarebits.com/qaa/46-misc/107-how-to-prevent-entity-framework-navigation-property-from-being-exposed-through-wcf-service](http://www.smartsoftwarebits.com/qaa/46-misc/107-how-to-prevent-entity-framework-navigation-property-from-being-exposed-through-wcf-service)

# c# - 用 Viewbox 模糊背景

> ID：11524863
> 
> 赞同：4
> 
> 时间：2012-07-17T14:35:31.027
> 
> 标签：c#, wpf, viewbox, visualbrush

我正在构建 AERO 玻璃给你的类似效果，一个模糊的窗户。我很快意识到这在 WPF 中并不容易，但我设法让它几乎完全工作。当涉及 Viewbox 时，我只是卡住了。

所以我所做的是：我创建了一个矩形，制作了一个可视画笔来获取给定背景元素的一部分，将视图框转换为恰好占据矩形重叠的图像空间，并将其用作矩形的填充。

```
<Grid x:Name="grid">
    <Image x:Name="image" Source="someImage.png"/>
    <Rectangle x:Name="blurBackgroundRect" Width="100" Height="100">
        <Rectangle.Effect>
            <BlurEffect Radius="10"/>
        </Rectangle.Effect>
        <Rectangle.Fill>
            <VisualBrush
                ViewboxUnits="Absolute"
                AlignmentX="Center"
                AlignmentY="Center"
                Visual="{Binding ElementName=image}"
                Stretch="None">
                <VisualBrush.Viewbox>
                    <MultiBinding Converter="{StaticResource visualBrushTargetConverter}">
                        <Binding ElementName="grid"/>
                        <Binding ElementName="blurBackgroundRect"/>
                        <Binding ElementName="grid" Path="ActualWidth"/>
                        <Binding ElementName="grid" Path="ActualHeight"/>
                    </MultiBinding>
                </VisualBrush.Viewbox>
            </VisualBrush>
        </Rectangle.Fill>
    </Rectangle>
</Grid> 
```

ElementName 网格指的是我的矩形和我的图像的共同父级。我不能让它们成为祖先，否则会干扰模糊效果。所以我把它们放在一个网格中。

最后一部分是多值转换器，它为 VisualBrush Viewbox 进行实际计算。

```
public class VisualBrushTargetConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var parentControl = values[0] as FrameworkElement;
        var targetControl = values[1] as FrameworkElement;

        var transformedPos = targetControl.TransformToVisual(parentControl).Transform(new Point());
        var transformedSize = targetControl.TransformToVisual(parentControl).Transform(new Point(targetControl.RenderSize.Width, targetControl.RenderSize.Height));

        transformedSize = new Point(transformedSize.X - transformedPos.X, transformedSize.Y - transformedPos.Y);
        return new Rect(transformedPos.X,
                        transformedPos.Y,
                        transformedSize.X,
                        transformedSize.Y);
    }
} 
```

所以这是重现我的以下问题所必需的。如果您想测试代码，您可以轻松地将其放入一个简单的 wpf 应用程序中。

如果您对此进行测试，您会发现它运行良好。如果我们将矩形放置在 Viewbox 和具有固定大小的网格中（这模仿了我的实际问题），现在就会出现问题。

```
<Image x:Name="image" .../>
<Viewbox>
    <Grid Width="800" Height="600">
        <Rectangle x:Name="blurBackgroundRect" ...>
    </Grid>
</Viewbox> 
```

所以我猜测视图框的缩放是在布局之后应用的，因此在我的 TransformTo 调用中不会被识别。但是我已经尝试在我的转换中使用 Viewbox 的实际缩放，但没有运气。只要 Viewbox 在那里，我就无法让它工作，所以我希望任何人都知道可能出了什么问题，或者甚至可以为我指出一个更简单的解决方案。我希望该代码稍后转换为自定义控件，以便轻松重用它，因此我更喜欢不太依赖任何特殊条件的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:57:09.480

我能够通过将 VisualBrush 上的 Stretch 更改为 Fill 而不是 None 来修复奇怪的行为。

# exception - 当没有出现错误时，expect{...}.to raise_error 也会通过

> ID：11524864
> 
> 赞同：0
> 
> 时间：2012-07-17T14:35:35.963
> 
> 标签：exception, rspec

我有以下规格：

```
describe EmailImport do
  describe "#format_x_priority" do
    specify { EmailImport.format_x_priority('5 (Lowest)').should eq(:low) }

    it "should raise an error when wrong argument is passed" do
      expect { EmailImport.format_x_priority('5 (Lowest)').to raise_error }
    end
  end
end 
```

这应该不会过去吧？两次都是相同的代码，一次应该导致`:low`，一次应该导致错误。但有趣的是，两者都通过了！我究竟做错了什么？

只是为了完整起见，这是我的`EmailImport.format_x_priority`方法：

```
def self.format_x_priority(priority)
  # 1 Highest; 2 High; 3 oder "" normal; 4 low; 5 lowest
  case priority
  when "1 (Highest)"
    Priority::HIGH
  when "2 (High)"
    Priority::HIGH
  when "3 (Middle)"
    Priority::MEDIUM
  when "4 (Low)"
    Priority::LOW
  when "5 (Lowest)"
    Priority::LOW
  when ''
    Priority::MEDIUM
  else
    raise "Invalid value '#{priority}' for argument 'priority'!"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:57:55.857

### 语法错误

您有语法错误。您将整行包含在块中，包括匹配器。移动花括号以仅包含 lambda，您应该回到正轨。例如：

```
it "should raise an error when wrong argument is passed" do
  expect { EmailImport.format_x_priority('5 (Lowest)') }.to raise_error
end 
```

### 为什么这样有效

*指定*关键字需要一个块，所以`specify { ... }`是正确的。另一方面，*expect*接受一个 lambda，并将其传递给匹配器。那是`expect { ... }.to raise_error`正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:38:27.960

解决方案在于细节！正确的代码：

```
expect { EmailImport.format_x_priority('5 (Lowest)') }.to raise_error 
```

错误代码：

```
expect { EmailImport.format_x_priority('5 (Lowest)').to raise_error } 
```

# android - 如何关闭ActionBar（ActionBarSherlock）下的蓝线？

> ID：11524867
> 
> 赞同：16
> 
> 时间：2012-07-17T14:35:40.260
> 
> 标签：android, styles, themes, actionbarsherlock

我使用带有主题**Theme.Sherlock.ForceOverflow**的 ActionBarSherlock （用于在预 Honeycomb 设备上使用），我需要关闭我的 ActionBar 下的蓝线....有可能吗？

**解决方案**： [在这里](https://stackoverflow.com/questions/10364045/actionbarsherlock-actionbar-custom-background-with-divider?rq=1)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-27T23:51:24.010

解决问题的另一种方法：

```
actionBar.setBackgroundDrawable(null); 
```

不过只能在本地解决问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T15:51:43.573

我不确定您是否可以删除该栏，但您可以更改该栏的颜色以匹配背景颜色？

如果你想尝试一下，试试这个：

```
<item name="android:background">@drawable/your_theme_name</item>
<item name="background">@drawable/your_theme_name</item> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T15:56:11.870

ActionBar 下的那条蓝线是背景图像的一部分（这是一个 9 补丁）。更改背景图像，或将其设置为纯色，蓝条将消失。

# c# - 如何使 GlyphTypeface FontUri 通用

> ID：11524869
> 
> 赞同：3
> 
> 时间：2012-07-17T14:35:46.823
> 
> 标签：c#, wpf, generics, fonts

我们在代码中创建了以下图像（它用于制作显示“文件”的图像以在功能区中使用）：

```
 <DrawingImage x:Key="FileText">
    <DrawingImage.Drawing>
        <GlyphRunDrawing ForegroundBrush="White">
            <GlyphRunDrawing.GlyphRun>
                <GlyphRun
                        CaretStops="{x:Null}" 
                        ClusterMap="{x:Null}" 
                        IsSideways="False" 
                        GlyphOffsets="{x:Null}" 
                        GlyphIndices="41 76 79 72" 
                        FontRenderingEmSize="12" 
                        DeviceFontName="{x:Null}" 
                        AdvanceWidths="5.859375 2.90625 2.90625 6.275390625">
                    <GlyphRun.GlyphTypeface>
                        <GlyphTypeface FontUri="C:\WINDOWS\Fonts\SEGOEUI.TTF"/>
                    </GlyphRun.GlyphTypeface>
                </GlyphRun>
            </GlyphRunDrawing.GlyphRun>
        </GlyphRunDrawing>
    </DrawingImage.Drawing>
</DrawingImage> 
```

问题是我们的一位客户有一个不使用 C:\Windows 而是使用 C:\WINNT 的 Windows 映像。这将导致应用程序在启动时崩溃，并显示一个不太有用的日志。任何想法如何概括 FontUri 以便它也可以在这样的系统设置上工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:21:06.397

I was thinking of the same thing as Rachel, why can't you use an environment variable? You could indeed do, when you derive from GlyphTypeface:

```
public class MyGlyphTypeface : GlyphTypeface
{
    private string fontPath;

    public string FontPath
    {
        get { return fontPath; }
        set
        {
            fontPath = value;
            FontUri = new Uri(Environment.ExpandEnvironmentVariables(fontPath));
        }
    }
} 
```

and use it like this:

```
<GlyphRun.GlyphTypeface>
    <local:MyGlyphTypeface FontPath="%SystemRoot%\Fonts\SEGOEUI.TTF"/>
</GlyphRun.GlyphTypeface> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:22:48.267

你有几个选择。第一个是嵌入任何使用的字体。这可能会导致您遇到许可问题，但会避免指定绝对路径。

第二种选择是使用标记扩展：

```
// nb: there is a bug in the VS designer which requires this type of extension
// be used as an element if you embed another markup extension in it.
public class FindFirstFileExtension : MarkupExtension
{
    public Environment.SpecialFolder Root { get; set; }
    public string Paths { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (String.IsNullOrWhiteSpace(this.Paths)) return null;

        var root = Environment.GetFolderPath(this.Root);
        var uri = this.Paths
                      .Split(',')
                      .Select(p => Path.Combine(root, p))
                      .FirstOrDefault(p => File.Exists(p));

        return uri != null ? new Uri(uri) : null;
    }
} 
```

然后，这将允许您提供一个逗号分隔的字体列表来使用，相对于`SpecialFolder.Fonts`（这应该“解决”不同文件夹名称的问题）：

```
<GlyphRun.GlyphTypeface>
     <GlyphTypeface
         FontUri="{local:FindFirstFile Paths='SEGOEUI.TTF,ARIAL.TTF,TIMES.TTF', Root=Fonts}" />
</GlyphRun.GlyphTypeface> 
```

# javascript - 关于 jQuery 中 window.unload 的一些（奇怪的？）问题

> ID：11524872
> 
> 赞同：0
> 
> 时间：2012-07-17T14:36:04.877
> 
> 标签：javascript, events, firefox, google-chrome, javascript-events

我正在使用以下代码（纯粹用于测试目的）：

```
$(window).bind('unload', function() {alert('unload!')});
$(window).unload(function () {alert(".unload()")}); 
```

我有两个问题：

1.  为什么它会起作用——即为什么我会看到两条消息？我在某处读到将两个事件侦听器附加到相同的 DOM 对象没有效果；第二个和更多的听众被忽略。

2.  为什么 Firefox 在一个标准的、类似系统的消息框中显示这两条消息，而在使用页面的过程中触发的所有其他消息（也包括警报）总是显示在这个丑陋、无标题、烦人的消息框中-喜欢的东西？

3.  正如我在对[这个问题](https://stackoverflow.com/questions/9385778/window-unload-is-not-firing)的评论中所写的那样，你真的认为阻止`alert()`（`unload`通过 Chrome / WebKit）是一个好主意吗？用 console.log 替换警报（如那里所建议的那样）不会给您带来太多有用的效果，因为在您刷新页面或导航到另一个页面之后，控制台（至少在 Chrome 中）正在被清除。您可以在它们真正消失之前的几毫秒内看到写入控制台的消息痕迹，所以我宁愿觉得它没用。在卸载时禁用警报并不是最好的主意。很难进行一些严肃的测试，“糟糕”的页面可以通过显示自己的“烦人”消息而不使用警报（jQuery UI、某些 div 等）来轻松解决问题。

这些问题纯粹是为了满足我想知道所有答案的渴望！:] 所以，不要认真对待它（比如做一些额外的测试，小提琴例子等）。只是，写下你对此的了解或感受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:38:26.447

为同一个事件（使用 jQuery）绑定多个事件处理程序肯定会导致两者都被触发。您可能正在考虑对“onfoo”元素属性进行连续分配，但这不是 jQuery（或我知道的任何其他现代框架）在内部使用的机制。

浏览器显示`alert()`他们想要的消息。它不受页面上代码的控制。

最后，禁止`alert()`“卸载”事件处理程序对用户来说是个好主意。您可以控制调试控制台是否在页面加载时清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T15:00:39.057

> （至少在 Chrome 中）在您刷新页面或导航到另一个页面后立即被清除

设置调试器以保留控制台！了解您每天使用的工具的功能。

*   Chrome - 右键单击​​控制台选项卡，上下文菜单中的选项
*   Firebug - 控制台中的按钮

# php - htaccess 重定向到 php 文件时出错，当用户有权限时 php 输出文件

> ID：11524878
> 
> 赞同：1
> 
> 时间：2012-07-17T14:36:25.347
> 
> 标签：php, file, .htaccess

这对我来说似乎很奇怪。我有一个动态上传的文件目录，我需要先检查权限，然后用户才能打开该文件，所以我将 htaccess 添加到目录中：

```
RewriteEngine On
RewriteRule ^(.*)$ ../../get_file.php [QSA] 
```

然后我在 php 中检查权限，如果用户有权限，我正在尝试为用户提供文件，如下所示：

```
//serve file back to user
$full_file_name = 'uploads/conversation_attachments/'.$file_name;
$filesize = filesize($full_file_name);
header("Content-length: ".$filesize);
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=".$full_file_name.";");
readfile($full_file_name); 
```

它吐回'a'文件而不是'the'文件。因此，我没有使用 $file_name="rYMmfk3j9BSrjaRC.pdf" 获取文件“rYMmfk3j9BSrjaRC.pdf”，而是得到一个名为“uploads_conversation_attachments_rYMmfk3j9BSrjaRC.pdf”的文件。不知何故，它似​​乎用下划线代替了斜线。

有人知道为什么会这样吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:38:26.713

```
header("Content-Disposition: attachment; filename={$file_name};");
                                                  ^^^^^^^^^^^^ 
```

不要向客户端输出任何服务器端路径数据——这是无用的信息。服务器端路径极不可能存在于客户端上，浏览器无论如何也不会尊重它，否则恶意服务器可能会尝试在客户端计算机上的任意文件上乱写。

# three.js - 三.js 大飞机低FPS

> ID：11524881
> 
> 赞同：1
> 
> 时间：2012-07-17T14:36:30.973
> 
> 标签：three.js

我对three.js 有一个问题，其中使用CanvasRenderer 有一个带有大纹理的平面会导致严重的FPS 下降。相机越远，fps越好。

代码在这里： http: [//pastebin.com/eZgnewa1](http://pastebin.com/eZgnewa1)

map.jpg 是来自谷歌地图的 2048x2048 屏幕截图。

我已经尝试更改几乎所有东西的尺寸，包括 PlaneGeometry 的平面大小和分段数量，但似乎没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T17:45:50.303

我看到你正在使用`CanvasRenderer`. 很有可能你想做的事情对穷人来说有点太多了`CanvasRenderer`。

PS。如果您可以共享一个有效的实时链接，就会更容易看到发生了什么。

# c# - 为什么这个委托不在循环内工作？

> ID：11524883
> 
> 赞同：0
> 
> 时间：2012-07-17T14:36:35.767
> 
> 标签：c#, generics, delegates

> **可能重复：**
> [C#：在 lambda 表达式中使用 foreach 循环的迭代器变量 - 为什么会失败？](https://stackoverflow.com/questions/3168375/c-using-the-iterator-variable-of-foreach-loop-in-a-lambda-expression-why-fai)

我在 MSDN 上阅读 c# 参考资料，我发现了这个..

[http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx](http://msdn.microsoft.com/en-us/library/0yw3tz5k.aspx)

在评论的最后有一条评论是`albionmike` 这样的..

```
When you "catpure" a variable from an outer scope, some counter-intuitive things happen.
If you run this, you will get an IndexOutOfRange exception during the call f().
If you uncomment the two commented out lines of code, it will work as expected.
Hint: Captured Outer Variables have reference rather than value semantics

// Console Project
using System;
using System.Collections.Generic;
using System.Text;

namespace EvilDelegation
{
    delegate void PrintIt();

    class Program
    {

        static void Main(string[] args)
        {
            string[] strings = { "zero", "one", "two", "three", "four" };
            PrintIt f = null;
            for (int i = 0; i < strings.Length; ++i) {
                if (i == 2 || i == 3) {
                    // Can you see why this would not work?
                    f = delegate() { Console.WriteLine(strings[i]); };

                    // But this does...
                    //int k = i;
                    //f = delegate() { Console.WriteLine(strings[k]); };

                }
            }
            f();
        }
    }
} 
```

我不明白，为什么第一个不行，第二个不行？在第 4 行中，他说：`Captured Outer Variables have reference rather than value semantics`.
好的。但是在for循环中，我们定义`i`了`int`which当然是值类型，那么类型怎么能`int`持有引用呢？如果`i`不能保持引用，这意味着它正在存储价值，如果它正在存储价值，那么我不明白为什么第一个不起作用而第二个会起作用？
我在这里错过了什么吗？

**编辑：**我认为原作者有一个错字，对 f() 的调用应该在 if 循环内。请在回答时考虑这一点。

**编辑 2：**好的，如果有人可能会说，这不是错字，让我们考虑一下。我想知道在`f()`子句`if`中调用的情况。在那种情况下都会运行，还是只运行一个没有评论的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:39:47.227

这是因为闭包的语义。当闭包在其外部范围内引用局部变量时，它会捕获对变量的引用，而不是变量中包含的值。

在这种情况下，匿名委托`delegate() { Console.WriteLine(strings[i]); }`正在捕获对变量的*引用；*`i`也就是说，该变量在匿名函数和`i`声明的范围之间共享。当`i`一种情况发生变化时，另一种情况也会发生变化。

例如（[看到它运行](http://ideone.com/P5lpa)）：

```
using System;

class Foo {
    static void Main() {
        int i = 0;
        Action increment = delegate { ++i; };

        Console.WriteLine(i);

        ++i;
        Console.WriteLine(i);

        increment();
        Console.WriteLine(i);

        ++i;
        Console.WriteLine(i);

        increment();
        Console.WriteLine(i);
    }
} 
```

这将输出：

```
0
1
2
3
4 
```

在 C# 中，local 的生命周期被扩展为包括引用它们的任何闭包的生命周期。这启用了一些非常有趣的技巧，可能会冒犯 C/C++ 开发人员的敏感性：

```
static Func<int> Counter() {
    int i = 0;
    return delegate { return i++; };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T14:39:43.733

您正在访问修改后的闭包。您的委托只会在它被调用时被评估，并且它已经捕获了循环变量`i`。在访问 this 时，在循环退出后，它的值将等于`strings.Length`。但是，通过在循环中引入局部变量`k`，您可以捕获`k`循环迭代的特定变量，并且结果是正确的。

如果调用是在循环中进行的，正如您在下面的评论中所建议的那样，那么在`i`循环前进之前，将在该点评估 的值，并将具有“正确”的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:41:58.270

这只是（不幸的）设计。当您`i`在委托中使用循环变量时，它会像这样被捕获，并且`i`在您到达`f()`调用时将具有其最终值。

根据Eric Lippert的[这篇博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/16/closing-over-the-loop-variable-part-two.aspx)，它很快就会改变`foreach`变量，但不会改变变量（这就是您在示例中所拥有的）。`for`

**添加：**

`foreach`这是一个使用代替的示例`for`：

```
 string[] strings = { "zero", "one", "two", "three", "four" }; 

  var list = new List<PrintIt>();

  foreach (var str in strings)
  {
    PrintIt f = delegate { Console.WriteLine(str); };  // captures str
    list.Add(f);
  }
  var f0 = list[0];
  f0(); 
```

在我的 .NET 版本（.NET 4.0，C# 4）中，最后一行打印“四”。据我了解，在即将推出的 .NET 版本（.NET 4.5、C# 5、Visual Studio 2012）中，它将打印“零”。*颠覆性变化...*

当然，在这种情况下`delegate { Console.WriteLine(str); }`相当于`delegate() { Console.WriteLine(str); }`相当于`() => { Console.WriteLine(str); }`。

# asp.net - 带路由的页面导航

> ID：11524886
> 
> 赞同：0
> 
> 时间：2012-07-17T14:36:41.853
> 
> 标签：asp.net, routing

我的 Global.asax 文件中有这段代码：

```
 Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        ' Code that runs on application startup
        RegisterRoute(RouteTable.Routes)
    End Sub
    'about.aspx
    Sub RegisterRoute(ByVal _routes As RouteCollection)
        With _routes
            .MapPageRoute("homepage", "Home", "~/default.aspx")
            .MapPageRoute("aboutpage", "About", "~/about.aspx")
            .MapPageRoute("producs", "Products", "~/products/Default.aspx")
            .MapPageRoute("adFin", "Products/{name}", "~/products/Default.aspx")
            .MapPageRoute("news", "News", "~/news.aspx")
            .MapPageRoute("contact", "Contact", "~/contact.aspx")

        End With
    End Sub 
```

每当我导航到 Product/Myproductname 时，它​​都可以正常工作，但是如果我导航回主页，则 url 仍然显示为 Product/Home 而不是 Home

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:40:49.817

我的想法是您可能正在通过 ActionLink 方法生成链接——该方法使用当前控制器，即“产品”。您可能想在没有 HtmlHelper 的情况下手动创建链接 --- 只需链接到 Home

# javascript - Web 组件 - 自动完成清单框

> ID：11524894
> 
> 赞同：1
> 
> 时间：2012-07-17T14:36:54.473
> 
> 标签：javascript, jquery, web

任何人都可以将我带到包含自动完成清单框的资源。这将响应用户在搜索字段中输入的内容，然后用户可以从中选择建议（通过单击可能结果旁边的复选框）。

# r - 在R中的“周”箱中聚合平均“％H％M”

> ID：11524895
> 
> 赞同：5
> 
> 时间：2012-07-17T14:36:55.697
> 
> 标签：r, aggregate-functions, aggregate, time-series

我已经为此苦苦挣扎了一段时间。我是使用*ts*数据和所有相关 R 包的新手。我有一个带有几个变量的df，包括格林威治标准时间“%H%M”中的“一天中的时间”和发生采样的日期“%Y/%m/%e”。我想将我的日期数据分类/聚合为“周”（即 %W/%g），并计算在该周发生采样时的平均“一天中的时间”。

通过首先将我的 df 转换为 zoo 对象，然后使用如下所示的 aggregate.zoo 命令，我能够计算数值变量（例如重量）的其他乐趣：

```
#calculate the sum weight captured every week 
x2c <- aggregate(OA_zoo, as.Date(cut(time(OA_zoo), "week")), sum) 
```

但是，我不确定如何解决我正在使用*Date 格式*而不是*num*的事实，并且不胜感激任何提示！此外，我显然已经通过分别处理我的每个变量来编码。是否有一种方法可以通过使用 plyr 聚合“每周”在我的 df 上应用不同的 FUN（总和/平均值/最大值/最小值）？还是其他一些包？

***编辑/澄清*** 这`dput`是我的完整数据集样本的输出。我有 2004-2011 年的数据。我想使用 ggplot2 查看/绘制的是 TIME 的平均值/中位数（%H%M），在几周内随时间（2004-2011）聚合。现在，我的数据不是按周汇总的，而是每天汇总的（随机样本）。

```
> dput(godin)
structure(list(depth = c(878, 1200, 1170, 936, 942, 964, 951, 
953, 911, 969, 960, 987, 991, 997, 1024, 978, 1024, 951, 984, 
931, 1006, 929, 973, 986, 935, 989, 1042, 1015, 914, 984), duration = c(0.8, 
2.6, 6.5, 3.2, 4.1, 6.4, 7.2, 5.3, 7.4, 7, 7, 5.5, 7.5, 7.3, 
7.5, 7, 4.2, 3, 5, 5, 9.3, 7.9, 7.3, 7.2, 7, 5.2, 8, 6, 7.5, 
7), Greenland = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 40L, 28L, 0L, 
0L, 34L, 7L, 28L, 0L, 0L, 0L, 27L, 0L, 0L, 0L, 44L, 59L, 0L, 
0L, 0L, 0L, 0L, 0L), date2 = structure(c(12617, 12627, 12631, 
12996, 12669, 13036, 12669, 13036, 12670, 13036, 12670, 13037, 
12671, 13037, 12671, 13037, 12671, 13038, 12672, 13038, 12672, 
13038, 12672, 13039, 12631, 12997, 12673, 13039, 12673, 13039
), class = "Date"), TIME = c("0940", "0145", "0945", "2045", 
"1615", "0310", "2130", "1045", "0625", "1830", "1520", "0630", 
"0035", "1330", "0930", "2215", "2010", "0645", "0155", "1205", 
"0815", "1845", "2115", "0350", "1745", "0410", "0550", "1345", 
"1515", "2115")), .Names = c("depth", "duration", "Greenland", 
"date2", "TIME"), class = "data.frame", row.names = c("6761", 
"9019", "9020", "9021", "9022", "9023", "9024", "9025", "9026", 
"9027", "9028", "9029", "9030", "9031", "9032", "9033", "9034", 
"9035", "9036", "9037", "9038", "9039", "9040", "9041", "9042", 
"9043", "9044", "9045", "9046", "9047")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:52:38.470

我会这样处理它：首先用一个代表星期的字符串创建一个列：

```
godin$week <- format(godin$date2, "%Y-W%U") 
```

这会给你类似的东西`"2004-W26"`，这已经足够了`aggregate`。

那么您需要将表示 HHMM 的字符向量转换为实际时间，以便您可以在其上使用时间数学。

```
godin$time2 <- as.POSIXct(strptime(godin$TIME, "%H%M")) 
```

注意：以上内容有点骇人听闻...`strptime()`如果未指定当前日期，则假定为当前日期，但这不应妨碍此特定应用程序，因为所有转换后的时间都将具有相同的日期，时间部分平均值是正确的。稍后我会删除日期...

那时，我认为您可以简单地汇总：

```
x2c <- aggregate(time2~week, data=godin, FUN=mean) 
```

并摆脱不相关（和错误）的日期部分

```
x2c$time2 <- format(x2c$time2,"%H:%M:%S") 
```

等瞧。

```
> x2c
      week    time2
1 2004-W29 09:40:00
2 2004-W30 01:45:00
3 2004-W31 13:45:00
4 2004-W36 12:07:00
5 2004-W37 10:32:30
6 2005-W31 12:27:30
7 2005-W36 10:48:20
8 2005-W37 13:11:06 
```

这里的教训是，在 R 中推动没有相关日期的时间是很棘手的。我很想听听其他有更好方法的人的意见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T18:03:18.570

您需要将该`TIME`列转换为常用单位（即分钟）。这里有几个辅助函数可以做到这一点：

```
hour2min <- function(hhmm) {
  hhmm <- as.numeric(hhmm)
  trunc(hhmm/100)*60 + hhmm %% 100
}
min2hour <- function(min) {
  min <- as.numeric(min)
  trunc(min/60)*100 + min %% 60
} 
```

然后，您可以根据需要汇总分钟数。我会亲自将它们放在 xts 对象中并使用`apply.weekly`：

```
library(xts)
x <- xts(hour2min(godin$TIME), as.Date(godin$date2), dimnames=list(NULL,"MINS"))
w <- apply.weekly(x, mean)
w$TIME <- min2hour(w$MINS)
#                MINS     TIME
# 2004-07-18 580.0000  940.000
# 2004-08-01 585.0000  945.000
# 2004-09-12 711.2500 1151.250
# 2005-08-02 747.5000 1227.500
# 2005-09-11 746.6667 1226.667
# 2005-09-13 764.1667 1244.167 
```

秒数仍然是 100 分之一分钟，但可以更改...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T18:02:56.903

如果您想要每周所有观察时间的平均值并且想要日期很重要（即今天 19:00 和明天 19:00 平均到明天早上 07:00），那么您可以这样做

```
godin$datetime <- as.POSIXct(paste(godin$date2, godin$TIME), format="%Y-%m-%d %H%M")
aggregate(godin$datetime, list(format(godin$datetime, "%W/%g")), mean)

#  Group.1                   x
#1   28/04 2004-07-18 09:40:00
#2   30/04 2004-07-31 01:45:00
#3   31/05 2005-08-02 00:27:30
#4   36/04 2004-09-10 13:51:15
#5   36/05 2005-09-11 00:26:40
#6   37/05 2005-09-13 00:44:10 
```

但是，我认为您想要平均时间，并且您不关心日期（除了确定它是哪一周）。在这种情况下，您可以使用任意日期作为锚点，并将所有时间视为在该日期发生的时间。

```
godin$stime <- as.POSIXct(paste("1970-01-01", godin$TIME), format='%Y-%m-%d %H%M')
aggregate(godin$stime, list(format(godin$datetime, "%W/%g")), mean)

#  Group.1                   x
#1   28/04 1970-01-01 09:40:00
#2   30/04 1970-01-01 09:45:00
#3   31/05 1970-01-01 12:27:30
#4   36/04 1970-01-01 11:51:15
#5   36/05 1970-01-01 12:26:40
#6   37/05 1970-01-01 12:44:10 
```

**编辑**

上述输出与@JoshuaUlrich 提供的输出之间的区别在于他是按周排序的。如果我对它们进行排序，它就像 Joshua 的，但用秒而不是 100 分之一分钟。`format`（虽然，由于您选择的规范，以相同的方式对它们进行排序有点棘手。）

```
out <- aggregate(godin$stime, list(format(godin$datetime, "%W/%g")), mean)
out[order(as.numeric(paste0(substr(out[, 1], 4, 5), substr(out[, 1], 1, 2)))), ]
#  Group.1                   x
#1   28/04 1970-01-01 09:40:00
#2   30/04 1970-01-01 09:45:00
#4   36/04 1970-01-01 11:51:15
#3   31/05 1970-01-01 12:27:30
#5   36/05 1970-01-01 12:26:40
#6   37/05 1970-01-01 12:44:10 
```

**编辑 2**

如果你只是想取回一个格式化的字符串，你可以`format`在里面`aggregate``%H%M`

```
out <- aggregate(godin$stime, list(format(godin$datetime, "%W/%g")), function(TIME) format(mean(TIME), "%H%M"))
out[order(as.numeric(paste0(substr(out[, 1], 4, 5), substr(out[, 1], 1, 2)))), ]
#  Group.1    x
#1   28/04 0940
#2   30/04 0945
#4   36/04 1151
#3   31/05 1227
#5   36/05 1226
#6   37/05 1244 
```

# python - 在python中的不同位置覆盖nd数组

> ID：11524896
> 
> 赞同：1
> 
> 时间：2012-07-17T14:36:57.073
> 
> 标签：python, numpy, scipy

假设我有一个大小为 (100,100,100) 的 3d 数组，我想覆盖或复制这个数组，该数组以空间中的各个点（所有方向的范围为 0-100）为中心，生成的 3d 数组的大小为(100,100,100)。将连接数组边缘附近的任何点以保持数组的结果大小

我通过查找数组索引的范围并对其进行处理来手动编写此代码，但我怀疑有一种更简单的方法。

arr1.shape (100, 100, 100)

点[0] = [5.5, 45.32, 35.0] ...点[n] = [85.0, 15,2, 90.1]

arr2 = np.zeros((100,100,100),float) 对于我将手动查找并复制的每个点 arr2[minx:maxx,miny:maxy,minz,maxz] = arr1[minx:maxx,miny:maxy,minz,maxz ] 其中 min 和 max 是数组的索引。

是的，我正在尝试将这个内核卷积到点上。我查看了 numpy.convolve 但不知道如何使用 scipy 进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:28:06.923

听起来您正在尝试进行卷积。scipy.ndimage.convolve对你[有用吗？](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.convolve.html#scipy.ndimage.filters.convolve)

# unicode - 如何将印地语文本从 HTML 传输到 Java 到 MYSQL，最后到 PHP？

> ID：11524901
> 
> 赞同：1
> 
> 时间：2012-07-17T14:36:59.573
> 
> 标签：unicode, jdbc, utf-8, hindi

我想下载存储在MySQL中的表格形式的HTML内容，然后通过PHP代码重新显示。为此，我使用 jdbc 创建了一个网络爬虫。我成功下载了所有内容，除了印地语文本被一堆 ???????? （这意味着不支持）。我的 HTML 页面完全支持 UTF-8。我的 MySQL 表和数据库也支持 utf-8，我明确地测试了它们。

在整个 Java 代码中，我尝试实现 UTF-8 编码，但仍然无处可去。

我的一些 utf-8 代码如下：

```
private String url = "jdbc:mysql://localhost:3306?useUnicode=yes&characterEncoding=UTF-8"; 
```

[在 url 连接字符串中]

```
BufferedReader bReader = new BufferedReader(new InputStreamReader(in,"UTF-8")); 
```

[下载（阅读）html内容时]

这是大部分代码

```
import java.io.*;
import java.net.URL;
import java.net.URLConnection;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.Statement;
import java.util.*;

public class TestDataParsing2 {

private Connection conn = null;
private String url = "jdbc:mysql://localhost:3306?useUnicode=yes&characterEncoding=UTF-8";
private String dbName = "/hindi-eng"; 
private String driver = "com.mysql.jdbc.Driver";
private String userName = "root"; 
private String password = "";
private String TABLE = "dict";

private void initdb(){
     try {
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);

     } catch (Exception e) {
          e.printStackTrace();
     }
}   
private void closedb(){ 
     try {
          conn.close();
        } catch (Exception e) {
          e.printStackTrace();
        }
} 
public void process(String content){ 
    try{  ufferedReader reader =  new BufferedReader(new StringReader(content));
        String text = "";           

        boolean start1 = false;
        boolean start2 = false;
        while (( text = reader.readLine()) != null)
        {
            if(text.contains("\"a"))
            {

                //System.out.println(text);
                System.out.println("COUNTER : " + counter); 
                String id = getID(text);
                System.out.println("word : " + id);
                this.ID = id;
                String title = getTitle(text);
                System.out.println("type: " + title);
                this.title = title;

                String owner = getOwner(text);
                System.out.println("hindi meaning : " + owner);
                this.owner = owner;

                start1 = true;
            }               

            if(start1 && start2)
            {
                String s = getS(text);
                System.out.println("Usage is : " + s);
                this.s = s;
                counter++;
                insert();
                start2=false;
                start1= false;                  
            }

            if(start1)
            {start2= true;
            }               
        }
    }catch(Exception e){
        System.out.println(e);
    }   
}

public void insert(){

        String insertString = "INSERT INTO " + TABLE + " VALUES (" + this.counter + ",'" + this.ID 
                    + "','" + this.title + "','" + this.owner + "','" + this.s + "')";

                    //System.out.print(insertString);           
        try {
            Statement stmt = conn.createStatement();
            stmt.executeUpdate(insertString);
            stmt.close();
        } catch(Exception e) {
            System.out.println(e);
        }
    }   

public String getID(String text){
    String id = "";
    id = text.substring(text.indexOf("\"")+1, text.indexOf("\",")); 
    return id;
}

public String getTitle(String text){
    String title = "";
    title = text.substring(text.indexOf(",\"")+2, text.indexOf("\",\"1.")); 
    return title;
}

public String getOwner(String text){

try{
    String owner = "";
    owner = text.substring(text.indexOf("\",\"1.")+5, text.indexOf("\"<br>"));      
    int i;      
    for(i=0;i<owner.length();i++)
    {
    String fifthChar = "\u00AE";
    int codePoint = owner.codePointAt(i);
    //System.out.println(codePoint);
    //System.out.println("'" + owner.substring(i, i+1) + "': Ux00" + Integer.toString(codePoint, 16));
    //System.out.println(fifthChar);    
    }

    //System.out.println(Character.codePointAt(owner));
    //System.out.println("enetred");
    //System.out.println(owner);
    return owner;
}
catch(Exception e)
{ System.out.println(e);
System.out.println("eeee");
}

return owner;
}

public String getS(String text){
    String s = "";
    s = text.substring(0, text.indexOf("<br>"));

    return s;
}   

public String download(String path) {
    String result = "";
    try {
        URL url = new URL(path);
        URLConnection conn = url.openConnection();
        conn.setDoOutput(true);
        InputStream in = null;
        in = url.openStream();
        String content = pipe(in,"utf-8");
        //System.out.println(content);  
        result = content;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return result; 
}

public String pipe(InputStream in,String charset) throws IOException {
    StringBuffer s = new StringBuffer();

    if(charset==null||"".equals(charset)){
        charset="utf-8";
    }

    String rLine = null;
    BufferedReader bReader = new BufferedReader(new InputStreamReader(in,"UTF-8"));

    while ( (rLine = bReader.readLine()) != null)
    {
        String tmp_rLine = rLine;
            s.append(tmp_rLine+"\n");
            }
        tmp_rLine = null;

    in.close(); 
    return s.toString();
}

public static void main(String[] args) {
    TestDataParsing2 tdp = new TestDataParsing2();
    tdp.initdb();
    System.out.println("process started");

        String urlPath = "file:///C:/Users/Abhinav/Downloads/Compressed/eng-hindi-dict-
                    utf8/sa.htm";
        String content = tdp.download(urlPath);
        tdp.process(content);
    tdp.closedb();
} 
```

}

其他所有细节都正常工作。非常感谢任何有用的帮助。

# android - Android：如何将layout.xml封装在Object中

> ID：11524902
> 
> 赞同：1
> 
> 时间：2012-07-17T14:37:10.447
> 
> 标签：android, android-layout

我有我在屏幕上动态膨胀的布局文件。然后在我的活动中，我必须初始化一些 UI 逻辑（监听器等）。

但是现在这个逻辑需要转移到某个类。而且我无法决定哪种方式是创建基于视图的对象的最佳方式，该对象的布局在 xml 中。

```
public MyView extends View {
    MyView(Context context) {
        super(context);
        //inflation here...        
    } 
```

或者

```
MyViewFactory {
    View get(Inflater inflater) {

    } 
```

或者是其他东西？

可能有人还可以推荐源代码在哪里寻找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:52:12.893

您可能不想使用 ImageView 之类的简单视图来执行此操作。你希望它是一个更复杂的布局，比如（包含按钮等的线性布局）？

如果您需要第一个，最好使用简单的视图实例`ImageView img = new ImageView(context);`或工厂，如果您认为在 xml 中设置它们更简单，则涉及更多参数。

至于更复杂的布局，我更喜欢使用扩展一些 viewGroups 的自定义类（**比如** `MyView extends LinearLayout`：）

创建一个名为`init();`

从每个构造函数调用函数

在其中实现类似：

```
LayoutInflater.from(context).inflate(R.layout.my_layout,this,true); 
```

**this** + **true**意味着布局将附加到根，在这种情况下为线性布局，您可以直接在视图组上使用 findViewById）

```
ImageView img = findViewById(R.id.myView); 
```

我发现创建自定义视图非常重要，因为它们总是包含特定于它们的逻辑并且可以重用，并且还公开了一些公共方法以从包含自定义视图的活动中调用。

# json - 无法使用 python 和 trac 将字典中的 datetime.datetime 对象序列化为 JSON

> ID：11524905
> 
> 赞同：0
> 
> 时间：2012-07-17T14:37:21.097
> 
> 标签：json, python-2.7, trac

我有一个字典列表（每个字典代表一条 SQL 查询的记录），我试图将其序列化为 JSON。这些字典中有几个 datetime.date 和 datetime.datetime 对象，它们被证明难以序列化。最初，错误消息是：

```
TypeError: datetime.date(2012, 5, 23) is not JSON serializable 
```

将处理程序添加到 json.dumps 调用后，错误消息为：

```
TypeError: date_handler() takes exactly 1 argument (2 given) 
```

date_handler 看起来像这样：

```
 def date_handler(obj):
        return obj.isoformat() if hasattr(obj, 'isoformat') else obj 
```

我将它作为 Trac 插件的一部分运行，但是我认为这只是一个孤立的 python 问题，但不知道如何对其进行排序 - 有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:13:31.127

当我从数据库导入数据时，我通过在字典中应用日期或时间戳字段解决了这个问题`.isoformat()`，因此事先知道字段类型是什么，感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:46:25.850

请参阅[Django](http://djangosnippets.org/snippets/1435/)域中的解决方案。

# android - 在所有提供商中查找最新位置

> ID：11524911
> 
> 赞同：1
> 
> 时间：2012-07-17T14:37:40.213
> 
> 标签：android, time

有没有人有办法在所有提供者中找到最近的位置？因为由于这个[问题](http://code.google.com/p/android/issues/detail?id=28174#makechanges)，我们将始终获得网络提供商之一，而不是 GPS 提供商。

似乎方法： getLastKnownLocation() 除了 GPS 提供者是没用的，我错了吗？

# html - 右侧的空 div 我的内容 div 占用了 100% 的高度空间

> ID：11524912
> 
> 赞同：1
> 
> 时间：2012-07-17T14:37:43.883
> 
> 标签：html, css

我正在尝试在内容 div 的右侧放置一个空 div。这个 div 是空的，因为我将使用它来放置背景图像。

看看：http: [//jsfiddle.net/V9XtN/3/](http://jsfiddle.net/V9XtN/3/)

我希望下面的 div 占据蓝色 div 左侧的所有可用空间。

```
#ConteudoDireito {
width: 35%;
height: 100%; 
float: left;
overflow: hidden;
background-color: Red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:48:47.397

一种选择：添加`position:absolute;`和`right:0;`到`#ConteudoDireito`：

[http://jsfiddle.net/V9XtN/6/](http://jsfiddle.net/V9XtN/6/)

如果您稍后用内容填充 div，则不需要这样做，因为 div 将扩展到内容高度，因此您可以将其更改回您现在的样子。

# css - 如何定位第一个标签

> ID：11524915
> 
> 赞同：0
> 
> 时间：2012-07-17T14:37:45.947
> 
> 标签：css, css-selectors

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:39:16.107

```
div > ul > li > a { border: 1px solid #000; } 
```

会在你的情况下工作。

但是，我宁愿使用一个类来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:40:31.890

或者

```
div ul li:first-child { border: 1px solid #000; } 
```

但这只有在您`<a>`真正想要的是 that 的第一个孩子时才有效`<li>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T14:41:00.313

我相信这会奏效：

```
div ul li > a:first-child { border: 1px solid #000; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T14:41:27.480

像这样使用第一个子伪类

```
div ul > li:first-child > a:first-child 
```

这将仅针对 ul 的子元素的第一个 li，然后仅针对第一个子锚元素。但是这很令人费解，你最好在这里使用一个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T14:41:47.677

# svn - TFS11 可以连接谷歌代码吗？

> ID：11524916
> 
> 赞同：1
> 
> 时间：2012-07-17T14:37:49.770
> 
> 标签：svn, tfs, google-code

我目前正在为我正在进行的项目使用 TFS11。

我想从 GoogleCode 中提取一个项目 ( [AntiSamy](http://code.google.com/p/owaspantisamy/source/browse/#svn/trunk/dotNet/current/source/owaspantisamy%253Fstate%253Dclosed) )。

我需要安装 TortoiseSVN 来连接到项目并将其保存在我的文件系统中，还是 TFS 可以连接到 GoogleCode *？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:32:37.307

在有关[Team Foundation Server 迁移和集成解决方案](http://msdn.microsoft.com/en-us/vstudio//bb840033.aspx)的 MSDN 页面上，他们将[及时迁移](http://www.timelymigration.com/)作为一种工具，

> 将版本控制数据从 Subversion 迁移到 Team Foundation Server，还提供对迁移数据的双向同步。

所以你应该看看他们能提供什么。

关于免费替代方案，您可以使用[SvnBridge](http://svnbridge.codeplex.com/)以便能够为您的 TFS 和 SVN 服务器使用相同的客户端（例如 TortoiseSVN）。

最终，您将不得不深入了解[TFS 集成工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)和[TFS 集成平台](http://tfsintegration.codeplex.com/)。[这个页面](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/06/06/toc-tfs-integration-tools-blog-posts-and-reference-sites.aspx)和[这个](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/05/11/tfs-integration-tools-where-does-one-start-part-1.aspx)页面似乎是很好的切入点。

# git - Git 因提交而损坏

> ID：11524922
> 
> 赞同：4
> 
> 时间：2012-07-17T14:38:15.107
> 
> 标签：git

我对 git 有点陌生，但我从他们的网站上阅读了 Git 书。所以我开始使用一个安装在我的服务器上的 GitLab。

我之前在 SVN 上工作，所以第一次提交是 SVN 的导出。我的朋友也在从事同一个项目（他的名字叫 Lucas）。

我创建了一个分支*origin/dev*以使*origin/master*完全稳定，然后在 /dev 上进行开发。我还创建了一个我正在研究的分支*feature258 。*当我尝试在合并我的强大功能之前拉取*源/开发以获取更改时，我有这个：*

```
$ git pull origin dev
fatal: object 18c29b4c26d7b0d34719d10ada6901c6024f91e6 is corrupted
fatal: The remote end hung up unexpectedly 
```

看来*18c29b4*对象是*粉红色*的提交（cf ScreenShot），它只修改了一点 .gitignore 文件

我跑了*git fsck --full*但我得到的线索对我没有帮助：

```
$ git fsck --full
dangling blob 0c87d2eb401651ec3045eb0248d54ed546206dbe
dangling blob 1cd17aadc009ba9d39d1137533d65107ca54da95 
```

blob 0c 和 1c 只是我在上次提交 feature_258 时修改的一个文件。

我在 Google 上搜索了 3 个多小时，发现 Linus Torvalds 方法和其他 StackOverflow 帖子，但没有找到好的解决方案。

如果它可以拯救我，也许我可以在 BAD 提交之前重新建立分支并重新做我的工作（我保存在另一个目录中以确保）

![SourceTree 截图](../Images/957f73eb22ffae61649bf95f0c88a675.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:02:33.897

通常是这样的：

```
fatal: The remote end hung up unexpectedly 
```

告诉连接终止。也许（也许）这不是 Git 回购问题，而是某种系统问题。如果我是你，我会从检查 repo 中的文件权限开始。如果您使用的是 gitolite，那么它将类似于：

```
chown git:git -R $GITOLITE/repositories/my_repo.git/
chmod u+rw -R $GITOLITE/repositories/my_repo.git/ 
```

然后，如果它不是问题，我会尝试*在服务器*上克隆 repo ：

```
git clone $GITOLITE/repositories/my_repo.git/ ~/test_clone.git 
```

还有一个建议 - 以用户**git**登录并检查 git 版本。

# java - DatagramChannel 数据包侦听器占用高 CPU

> ID：11524924
> 
> 赞同：0
> 
> 时间：2012-07-17T14:38:20.133
> 
> 标签：java, multithreading, udp, datagram

我有一个用于 UDP 数据包的 Java 数据包侦听器线程以及 2-3 个其他线程。

直到今天它运行良好，但现在进程 javaw.exe 已开始使用 CONSTANT 50% CPU。

这是我的代码。

```
public class PacketListenerThread implements Runnable {
    private SocketAddress receivedSocketAddress;
    private DatagramChannel channel;
    private ExecutorService pool;

    public PacketListenerThread(DatagramChannel channel, ExecutorService pool) {
        this.channel = channel;
        this.pool = pool;
    }

    @Override
    public void run() {
        while (true) {
            receivedSocketAddress = null;
            ByteBuffer recvbuf = ByteBuffer.allocate(1400);
            recvbuf.clear();
            try {
                receivedSocketAddress = channel.receive(recvbuf);
            } catch (IOException e) {
                e.printStackTrace();
            }
            if (receivedSocketAddress != null) {
                pool.submit(new PacketHandlerRunnable(new TaskObject(receivedSocketAddress, recvbuf)));
            }
        }
    }
} 
```

我已经停止了所有其他线程，但这个线程仍然使用 "CONSTANT" 50% CPU 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:47:41.983

请参阅[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/DatagramChannel.html)：

> 如果一个数据报立即可用，或者如果这个通道处于阻塞模式并且一个最终变得可用，那么数据报被复制到给定的字节缓冲区中并返回它的源地址。如果此通道处于非阻塞模式并且数据报不能立即可用，则此方法立即返回 null。

也许您对 channel.receive(recvbuf) 的调用没有阻塞，因此您以无限的速度循环，这解释了您的 CPU 负载。

# windows - 从 Windows 调用 ssh 时转义字符

> ID：11524931
> 
> 赞同：0
> 
> 时间：2012-07-17T14:38:31.113
> 
> 标签：windows, linux, command-line, ssh

我需要从 Windows 命令提示符调用 ssh 命令，该命令将在远程 Linux 机器上执行命令。该命令接受两个字符串参数，其中一个可能是多行的。基本上，我的电话看起来像这样：

```
ssh user@server command parameter1 parameter2 
```

当参数中有空格时，这将失败。
我试图用 来转义参数`'`，但这些参数被 Windows 框剥离，然后 Linux 会破坏参数。
我也试过`"`了，那些在 Windows 机器上都可以的，但 Linux 只是忽略了它们。我同时使用的版本，像这样

```
ssh user@server command "'para meter 1'" "'para meter 2'" 
```

kinda-sorta 有效，但现在我遇到了内联引号的问题。有什么标准方法可以让 Linux 和 Windows 都理解空格、单引号和双引号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:23:49.570

干得好 ....

```
ssh user@server date "--date='TZ=\"America/Los_Angeles\" 09:00 next Fri'" 
```

印刷

```
Fri Aug 17 16:00:00 UTC 2012 
```

重要的是，Windows 命令提示符将 " 作为引号字符，您可以使用 \ 制作这一参数来转义封闭的 "。

希望这可以帮助。

# jquery - 你能修改外部html文件上的div吗

> ID：11524933
> 
> 赞同：0
> 
> 时间：2012-07-17T14:38:32.247
> 
> 标签：jquery, html

我有一个 index.html 文件，它包含三个框架：top.html（将包括页面标题）、left.html（将包括 jstree 节点）和 right.html，它将包括 6 个 div 以显示基于图像在 left.html 上选择的节点上。如果我想将我的树节点存储在 left.html 框架上并选择左侧的节点，我喜欢将图像加载到存储在 right.html 文件中的 div 上。是这可行吗？

这是加载 jstree 节点和选择节点的脚本。如果所有 div 都在一个 index.html 文件上，则此方法有效。script.js - 当所有 div 都在一个页面上时，此方法有效。

```
 $(document).ready(function(){

     $("#left").jstree({  

         "xml_data" : {  

             "ajax" : {  

                 "url" : "tree.xml" 

             },  

             "xsl" : "nest"

         },  

         "plugins" : ["themes", "xml_data", "ui","types"] 

}).bind("select_node.jstree", function (event, data) {
$("#left").jstree("toggle_node", data.rslt.obj);

    img1 = new Image;
    img1.src=teamA.jpeg;
    var node_id = data.rslt.obj.attr("id");
    if (node_id=="teamA" {
    $("#first").html(img1).css("border","1px solid");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:51:00.363

如果您在框架内：使用

```
parent.document 
```

您可以访问父框架（在本例中为包含 3 个框架的索引），然后通过普通 ID 选择器访问其子框架（框架）：

```
$('#right').contents(); 
```

# knockout.js - Knockoutjs ，取消可观察更新

> ID：11524936
> 
> 赞同：0
> 
> 时间：2012-07-17T14:38:43.200
> 
> 标签：knockout.js, observable

我有以下 JSFiddle [http://jsfiddle.net/rayray/KAa6S/](http://jsfiddle.net/rayray/KAa6S/)。当我单击编辑文件夹时，会弹出一个对话框，我可以编辑名称。然后表单的文件夹名称会发生​​变化，因为它是可观察到的淘汰赛。单击取消按钮后，如何取消并恢复到旧数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:49:35.163

`folderName`只需保存单击编辑文件夹链接时的当前值。如果单击取消按钮，则设置`folderName`回该值。

# .net - 在没有测试框架的情况下使用 Moles

> ID：11524939
> 
> 赞同：2
> 
> 时间：2012-07-17T14:38:45.820
> 
> 标签：.net, delegates, runtime, instrumentation, moles

我想在我的项目中委托 DateTime.Now 的每个实例。项目需要作为一个整体进行测试，在这种情况下单元测试将无济于事。我想做一些事情，比如将 DateTime.Now 设置为特定时间或从当前日期时间添加/减去分钟，然后让项目中的每个 DateTime.Now 引用获取重定向值。Microsoft Moles 可以做到这一点吗？有没有办法使用鼹鼠仪器运行整个项目？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:52:10.277

您的问题的解决方案是使用依赖注入来存根 System.DateTime 类型。改造 IOC 的时间不应超过 30-60 分钟。您可以重新使用 3rdd 方实用程序，例如 Ninject。但是，最好以正确的方式做事并将其编码。

除非绝对必要（例如 3rd 方 API 等），否则您真的不想使用 Moles 或 Fakes。我保证你未来的自己会派一个终结者机器人回到过去，在令人发指的行为之前暗杀你自己。

# java - 如何在包含 jdbc 的 Eclipse 中创建一个自包含的 jar 文件？

> ID：11524940
> 
> 赞同：1
> 
> 时间：2012-07-17T14:38:52.623
> 
> 标签：java, jdbc, jar, export

我编写了一个程序，它从 jdbc 创建一个随机数（ID）和名称。但是当我导出 jar 文件时，数据库不起作用。

我可以创建一个包含 jdbc 文件和 jar 文件的完整文件或文档

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T18:59:56.027

更清楚一点，您想将 JDBC 驱动程序包含到可运行的 JAR 文件中吗？如果是这样，您可以使用诸如 Netbeans 或 Eclipse 之类的 IDE 来实现这一点。两者都允许您导出包含所需库的 JAR 文件。

在 Netbeans 中： - 右键单击​​项目文件夹，转到属性 - 展开 Building -> 封装 - 确保标记了“复制依赖库”

# html - 标签要在 jquery ui 模式中的输入左侧对齐

> ID：11524941
> 
> 赞同：0
> 
> 时间：2012-07-17T14:38:57.103
> 
> 标签：html, css, jquery-ui

我的 HTML：

```
<fieldset>
            <label for='descSorteo'>
                Descripción Sorteo</label>
            <input type='text' value='Hoalaa' name='descSorteo' id='descSorteo' class='text ui-widget-content ui-corner-all' />
            <label for='idPremio'>
                Id Premio</label>
            <input type='text' name='idPremio' id='idPremio' class='text ui-widget-content ui-corner-all' />
            <label for='descripcionPre'>
                Descripción</label>
            <input type='text' name='descripcionPre' id='descripcionPre' class='text ui-widget-content ui-corner-all' />
            <label for='tipoPre'>
                Tipo de premio</label>
            <select id='tipoPre'>
                tipoPremioOptions
            </select>
        </fieldset> 
```

我希望我的标签在输入 ex 的左侧保持对齐：

```
[Label][input]
[Label][input]
[Label][input] 
```

此刻我得到了类似的东西：

```
[Label]
[Input]

[Label]
[Input]

[Label]
[Input] 
```

我正在使用 jQuery UI 模态对话框表单，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:25:36.277

这样的事情怎么样？

```
label {
    display: block;
    float: left;
    width: 200px;
    text-align: right;
    padding-right: 10px;
}
input, select {
    float: left;
    margin-bottom: 10px;
} 
```

**示例**- [http://jsfiddle.net/tj_vantoll/HpSc8/](http://jsfiddle.net/tj_vantoll/HpSc8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-19T11:10:39.610

使用正确的标记：

HTML

```
<button class="whatever"> Click me</button> 
```

使其成为 Jquery UI 对象：

JS

```
$('button').button(); 
```

并覆盖 Jquery UI 默认值：

CSS

```
.ui-button {
    text-align: left
} 
```

对于图标，只需在其上放置一个[Fontello](http://fontello.com/)类。

# android - 如果您不想为 AlertDialogs 创建十几个类怎么办？

> ID：11524943
> 
> 赞同：0
> 
> 时间：2012-07-17T14:39:13.300
> 
> 标签：android

我有许多不同的状态，我需要根据这些状态以`AlertDialog`. 为每个警报创建一个单独的类简直太疯狂了。我现在拥有的是：

```
class FeedbackAlertDialog extends DialogFragment {
    private String message;
    private int action;

    FeedbackAlertDialog() {
    }

    FeedbackAlertDialog(String message, int action) {
        this.message = message;
        this.action = action;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        return new AlertDialog.Builder(getActivity())
                .setCancelable(false)
                .setTitle(message)
                .setPositiveButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        switch (action) {
                            case action: // It's impossible because the int should be final
                        }
                        startActivity(new Intent(getActivity(), MainActivity.class));
                    }
                }).show();
    }
} 
```

问题是我不能使用`switch`，因为`int`应该是最终的。怎么想出这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:40:38.713

采用：

> FeedbackAlertDialog.this.action

据我所知，这应该在开关中。

同样的方式用于访问更高级别的变量（简单模型中的通知设置器）。

在您的情况下，您必须首先进入根对象的范围（您的情况是 FeedbackAlertDialog）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T15:15:20.667

**编辑 ：：**

在您的计算机系统上尝试这个简单的 java 演示：

```
public class CalcDemo {
    public static void main(String[] args) {
        int n1 = 6, n2 = 3;
        int opr = 1;
        MyMath math = new MyMath(n1, n2, opr);
        System.out.println("Answer :: "+math.getResult());
    }
}

class MyMath {
    int n1, n2, opr;

    public MyMath() {   }
    public MyMath(int n1, int n2, int opr) {
        this.n1 = n1;
        this.n2 = n2;
        this.opr = opr;
    }
    public int getResult() {
        //int ch = opr;
        switch (opr) {
        case 1: return n1-n2;
            //break;
        case 2: return n1+n2;
        default : System.out.println("Invalid Choice");
            break;
        }
        return 0;
    }
} 
```

* * *

做一个**技巧**如下：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    return new AlertDialog.Builder(getActivity())
            .setCancelable(false)
            .setTitle(message)
            .setPositiveButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    final int action1 = action;  //  <---- ---  Try This
                    switch (action1) {  //  <--- ---  Use as This
                        case action1: // I THINK,  NOW  THIS  IS  POSSIBLE
                    }
                    startActivity(new Intent(getActivity(), MainActivity.class));
                }
            }).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:53:24.123

这是不可能的，因为您需要在 switch 中使用常量。

# python - python中的长文本作为字符串

> ID：11524946
> 
> 赞同：12
> 
> 时间：2012-07-17T14:39:19.847
> 
> 标签：python, string, text

嘿，我想在 Python 中声明一个字符串，它是一个长文本（带有换行符和段落）。这可能吗？如果我只是将文本复制粘贴到引号中，Python 只能识别第一行，如果我想要整个文本，我必须手动删除所有换行符。如果这是可能的，如果文本有引号（“”）仍然可能吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-17T14:40:45.137

使用三引号：

```
mytext = """Some text
Some more text
etc...
""" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T14:42:07.930

用 """ 将字符串内容括起来以表示多行字符串。

```
>>>a = """
...this
...is
...a
...multi-line
...string
..."""
>>> a
'this\nis\na\nmulti-line\nstring\n' 
```

# java - Javac 找不到在同一目录中的类

> ID：11524949
> 
> 赞同：6
> 
> 时间：2012-07-17T14:39:27.197
> 
> 标签：java, class, import, javac

我正在尝试编译 Java 文件，但收到以下错误消息：

```
$ javac -cp "bc-j-mapi-w-2.4.jar;apache-commons/*;json-org/*;lib/*" BrightcoveVideoQueryPOI.java
BrightcoveVideoQueryPOI.java:57: cannot find symbol
symbol  : class BrightcoveAPI
location: class BrightcoveVideoQueryPOI
        BrightcoveAPI brightcoveAPI = new BrightcoveAPI(BrightcoveAPI.PROD_READ_URL_TOKEN);
        ^
BrightcoveVideoQueryPOI.java:57: cannot find symbol
symbol  : class BrightcoveAPI
location: class BrightcoveVideoQueryPOI
        BrightcoveAPI brightcoveAPI = new BrightcoveAPI(BrightcoveAPI.PROD_READ_URL_TOKEN);
                                          ^
BrightcoveVideoQueryPOI.java:57: cannot find symbol
symbol  : variable BrightcoveAPI
location: class BrightcoveVideoQueryPOI
        BrightcoveAPI brightcoveAPI = new BrightcoveAPI(BrightcoveAPI.PROD_READ_URL_TOKEN);
                                                        ^
3 errors 
```

这表明 javac 找不到类 BrightcoveAPI。我不确定问题是什么，因为它在同一目录中：

```
$ ls
apache-commons  bc-j-mapi-w-2.4.jar  BrightcoveAPI.class  BrightcoveAPI.java  BrightcoveVideoQueryPOI.java  json-org  lib 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T14:41:12.280

您需要`.`在类路径中包含（当前目录）：

```
javac -cp ".;bc-j-mapi-w-2.4.jar;apache-commons/*;json-org/*;lib/*" BrightcoveVideoQueryPOI.java 
```

一些注意事项：

*   `.`位于默认类路径中，但如果您使用`-cp`指定显式类路径，则仅在您指定时才包含它。
*   此答案的先前版本添加`.`到类路径的末尾，但[aioobe](https://stackoverflow.com/users/276052/aioobe)说它通常放在第一位，这是有道理的，所以我进行了相应的编辑。（类路径是按顺序搜索的，所以如果你有一个类的两个副本，一个在库中`.`，一个在库中，那么你可能希望`.`版本取代库版本，所以你需要先列出它。但当然，拥有两个不同的类副本通常不是一件好事！）
*   您粘贴的内容看起来像 *nix shell，但您使用的是`;`，这是 Windows 预期的分隔符。（在 *nix 上，预期的分隔符是`:`。）这很可能是正确的，例如，如果您使用的是 Cygwin，但我想我会提到它以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:47:03.920

如果您不搜索当前目录（您的类路径不会）`javac`，则不会将该目录添加为您的附加默认值。

此行为允许`javac`为项目（源代码文件集）一致地调用编译器，而与调用编译器的用户的目录无关。如果是其他方式，那么您必须确保始终从同一个工作目录编译以获得相同的结果。

----在看到ruakh的优秀答案的评论后进行编辑----

您看到的第二个问题与第一个问题无关。“找不到或加载主类”是因为您使用**源代码文件名**而不是该源代码文件中定义的**类名**`java`调用命令。

 ****该`java`命令运行类，而不是源代码文件。当您记住单个源代码文件*可能*包含多个类（即使它们通常不包含）时，这更有意义。****

# .net - MySQL数据库-基于用户量的性能

> ID：11524951
> 
> 赞同：0
> 
> 时间：2012-07-17T14:39:37.023
> 
> 标签：.net, mysql, performance

我试图弄清楚从具有不同数量的数据库用户的.Net 类中访问数据库的优缺点。
是否有反对仅使用 1 个 mysql 用户的论据，例如

```
new MySqlConnection("SERVER=localhost;DATABASE=db;UID=alwaysthesameuser;PASSWORD=1234;") 
```

还是使用更多用户会更好？

该应用程序将由多达 100 个用户（正在处理客户端）同时使用。所有查询都在服务器机器上完成。

有什么我需要考虑的，以后可能会产生问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:03:53.250

使用单个“应用程序用户”数据库帐户，而不是大量用户帐户，您将获得更好的性能。

最大的优势是您可以使用连接池，并且可以共享连接。如果有很多单独的帐户，您将需要很多连接池，每个用户帐户一个。您要避免的是“连接搅动”，即反复连接和断开与数据库的连接，这限制了性能和可伸缩性。

还有一个管理优势（至少在数据库方面），因为您不必创建/锁定/删除帐户和授予/撤销权限。不确定 , 等表中有很多行会有多大影响`mysql.user`，`mysql.db`但我认为那里的很多行不太可能加速任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:45:59.050

作为一个经验法则来扩展数据库连接设置一个连接池。使用同一用户。我们称之为应用程序用户。在面向性能的数据库应用程序中，连接池是必须的。

这当然假设您使用的是分层模型。从您的帖子来看，您似乎有一个分层模型。如果不确定谷歌如何在 .net 中设置连接池，我的理解是微不足道的。

# actionscript-3 - Actionscript 3：简单按钮

> ID：11524957
> 
> 赞同：1
> 
> 时间：2012-07-17T14:39:43.923
> 
> 标签：actionscript-3, button, actionscript, frame, layer

我正在做一个项目，在该项目中单击一个按钮，框架会在某个区域跳跃和停止。我拥有的按钮称为cancelmenu_btn。它分布在动作层上的 1 个关键帧（超过 5 帧）上。后退按钮的编码是：

```
menuback_btn.addEventListener(MouseEvent.CLICK, menubackClick);
function menubackClick(event:MouseEvent):void{
    gotoAndStop (2);
    } 
```

然而，后退按钮仅适用于其中一个框架 - 框架 3。我有一个指向我的项目的链接：

[https://skydrive.live.com/embed?cid=9AB08B59DCCDF9C6&resid=9AB08B59DCCDF9C6%21110&authkey=ALkJwkJaKg7ypI0](https://skydrive.live.com/embed?cid=9AB08B59DCCDF9C6&resid=9AB08B59DCCDF9C6%21110&authkey=ALkJwkJaKg7ypI0)

我在 menuback_btn 上做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:14:33.387

如果您希望按钮处于活动状态，您必须检查一些事项。首先，确保您的代码位于第一帧，因为在该帧命中之前它不会变为活动状态。

其次，确保您的按钮也在第一帧上，但随后它将正确关联您的 btn.addEventListener(Function)。

# c# - MetadataExchangeClient 使用 Web 代理

> ID：11524959
> 
> 赞同：2
> 
> 时间：2012-07-17T14:39:45.933
> 
> 标签：c#, wcf, web-services

我正在尝试使用 MetadataExchangeClient 类连接到指向 WSDL 文件的 URI，该文件描述 WCF 服务。

```
var mexClient = new MetadataExchangeClient(uri, MetadataExchangeClientMode.HttpGet);
var metaDocs = mexClient.GetMetadata(); 
```

问题是我无法直接访问此 uri，需要通过 HTTP 代理服务器。代理服务器 URL 可以在运行时更改，因此我不能简单地通过 app.config 文件对其进行配置。

在 MetadataExchangeClient 类中哪里可以指定代理服务器信息？

有人有想法吗？WCF 专家？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:51:27.010

您需要`app.config`像这样指定代理：

```
<system.net>
  <defaultProxy enabled="true">
   <proxy bypassonlocal="true"
          proxyaddress="http://proxy.domain.org:8888/" />
  </defaultProxy>
</system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:16:08.677

您可以覆盖 GetChannelFactory 并提供可以创建合适端点的实现，即添加了代理详细信息的 BasicHtppBinding。

有关如何以编程方式设置绑定的线索，请参见此处。

*   [如何在 WCF 客户端服务代理上设置 HTTP 代理 (WebProxy)？](https://stackoverflow.com/questions/951523/how-can-i-set-an-http-proxy-webproxy-on-a-wcf-client-side-service-proxy)

有关创建通道工厂的起点，请参见此处（请参阅帖子末尾的 3 条评论）

*   [http://msdn.itags.org/visual-studio/83755/](http://msdn.itags.org/visual-studio/83755/)

这显示了如何将 MetadataExchangeClient 与自定义绑定一起使用：

*   [http://wikiencyclopedia.net/WCF/3.5.30729.1/untmp/Orcas/SP/ndp/cdf/src/WCF/infocard/Service/managed/Microsoft/InfoCards/InfoCardMetadataExchangeClient.cs/2/InfoCardMetadataExchangeClient.cs](http://wikiencyclopedia.net/WCF/3.5.30729.1/untmp/Orcas/SP/ndp/cdf/src/WCF/infocard/Service/managed/Microsoft/InfoCards/InfoCardMetadataExchangeClient.cs/2/InfoCardMetadataExchangeClient.cs)

这是 MetadataExchangeClient 的 .NET Framework 源，因此您可以更好地了解它在做什么。

*   [http://reflector.webtropy.com/default.aspx/WCF/WCF/3@5@30729@1/untmp/Orcas/SP/ndp/cdf/src/WCF/ServiceModel/System/ServiceModel/Description/MetadataExchangeClient@ cs/1/MetadataExchangeClient@cs](http://reflector.webtropy.com/default.aspx/WCF/WCF/3@5@30729@1/untmp/Orcas/SP/ndp/cdf/src/WCF/ServiceModel/System/ServiceModel/Description/MetadataExchangeClient@cs/1/MetadataExchangeClient@cs)

# c++ - CRT 内存泄漏检测未检测到内存泄漏

> ID：11524960
> 
> 赞同：2
> 
> 时间：2012-07-17T14:39:49.300
> 
> 标签：c++, multithreading, memory-leaks

我遇到了问题，我的应用程序有一个无限增长的内存泄漏，没有被检测到。我所做的非常简化，是创建一个对象，在其上运行一个方法，然后删除该对象。每次我这样做时，TaskManager 中的内存使用量都会增加大约 50-100MB。一些跑步后，这耗尽了我的全部记忆。我通过多线程来做到这一点，但是没有静态变量，所以我的线程中的不同对象之间没有冲突。它们只使用其他对象的静态方法，除了传入参数之外不会修改任何其他内存——因此它是线程安全的。我试图找出原因：

*   使用 crtdbg.h（CRT-Memeory-Leak-Detection），但自我的应用程序启动以来仅存在泄漏 - 它们将在关闭时被删除，并且它们不是那么大。
*   我一直在我继承的所有对象中寻找虚拟析构函数，但它们都可以

我还能尝试找出我的应用程序在哪里泄漏？我在 HEAP 中找不到任何泄漏，除了可能导致堆栈泄漏的析构函数问题之外，我不知道任何其他原因（我的意思是一个对象不会破坏本地 std::string 对象已在堆中分配空间）。我不知道“STACK-Leaks”是否还有其他原因，但我知道在我的方法中，内存增长最多的部分，没有 HEAP 分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:35:14.233

不确定您是如何使用 CRTDBG 库的，但它提供了很多好东西：

[http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx](http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx)

您可以以分而治之的方式使用 _CrtMemCheckpoint。它允许您测量代码中两点之间的内存使用差异。对于多线程，这可能很困难。

另一个是启用了 _CRTDBG_MAP_ALLOC 的 _CrtDumpMemoryLeaks （我想无论如何都会在应用程序端执行），这应该显示内存分配的确切位置。

另一个提示是，也许你的 CRTDBG 配置过度，有很多小分配可能会创建巨大的内部内存结构。

尝试关闭部分代码，并检查问题是否仍然存在。

如果您每天构建应用程序，请尝试运行以前的版本以发现问题出现的位置，然后比较源代码存储库中的更改。

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:47:26.680

您可能想要使用更好、更强大的检漏仪。您可能还需要使用泄漏检测器，它可以在程序运行时在不同时间输出堆报告。最后，您应该考虑到您的问题可能是由于堆碎片造成的，而不仅仅是泄漏。

您可以试用Google 免费提供的[Visual Leak Detector 。](http://vld.codeplex.com/)

[此问题](https://stackoverflow.com/q/1502799/183203)包含其他内存检查产品的列表，从基本到相当高级/昂贵。CRTDBG 是最小公分母解决方案；我在 BoundsChecker 上运气不错，虽然它不是免费的。

# asp.net - asp.net 中的后台工作者（线程池）

> ID：11524961
> 
> 赞同：0
> 
> 时间：2012-07-17T14:39:53.047
> 
> 标签：asp.net, backgroundworker, threadpool

我有一个 asp.net 网络表单，它将大约 25-30 个项目（当用户从​​表单发出后续请求时需要信息）写入自定义缓存。目前所有这些都在主线程上同步发生。但是在更高的负载下，addcache 正在成为一个瓶颈。

如何在后台运行此任务而不消耗 asp.net 工作进程线程池中的线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T15:22:00.513

Alternatives:

## Completely async:

*   Call the server code using AJAX from the client, and add code to monitor the process of the call

    I just added an answer related to this process:

    [https://stackoverflow.com/a/11524718/1268570](https://stackoverflow.com/a/11524718/1268570)

## Partially async:

The call from the client to the server will be sync which means the response won't be returned to the client until the whole process ends, but the real code will be executed async releasing the thread used by ASP.Net increasing scalability

*   Execute the page async. You need to implement the `IHttpAsyncHandler` interface in your ASPX code behind. This is an example:

    ```
     public partial class _Default : System.Web.UI.Page, IHttpAsyncHandler
        {
            public void EndProcessRequest(IAsyncResult result)
            {
                var context = (result as AsyncOperation).Context;

                context.Response.Write(string.Format("<p>End Process Request on {0}</p>", Thread.CurrentThread.ManagedThreadId.ToString()));
            }

            public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)
            {
                var operation = new AsyncOperation(cb, this.Context, extraData);
                operation.StartAsync();

                this.Context.Response.Write(string.Format("<p>Begin Process Request on: {0}...</p>", Thread.CurrentThread.ManagedThreadId.ToString()));

                return operation;
            }
        }

        public class AsyncOperation : IAsyncResult
        {
            private AsyncCallback asyncCallback;

            public AsyncOperation(AsyncCallback asyncCallback, HttpContext context, object state)
            {
                this.AsyncState = state;
                this.asyncCallback = asyncCallback;
                this.Context = context;

                this.IsCompleted = false;
                this.AsyncWaitHandle = null;
                this.CompletedSynchronously = false;
            }

            public HttpContext Context { get; private set; }
            public object AsyncState { get; private set; }
            public WaitHandle AsyncWaitHandle { get; private set; }
            public bool CompletedSynchronously { get; private set; }
            public bool IsCompleted { get; private set; }

            public void StartAsync()
            {
                ThreadPool.QueueUserWorkItem(new WaitCallback(StartAsyncOperation), this.AsyncState);
            }

            public void StartAsyncOperation(object workItemState)
            {
                // place here the async logic

                this.Context.Response.Write(string.Format("<p>Long Async operation started on: {0}</p>", Thread.CurrentThread.ManagedThreadId.ToString()));
                Thread.Sleep(2000);
                this.Context.Response.Write(string.Format("<p>Long Async operation ended on: {0}</p>", Thread.CurrentThread.ManagedThreadId.ToString()));
                this.IsCompleted = true;
                this.asyncCallback(this);
            }
        } 
    ```

    **Output**

    ![enter image description here](../Images/997112f9af53297f45a7a1ed1fc7a973.png)

*   Create an HttpAsyncHandler. You need to create a custom `HttpHandler` implementing the `IHttpAsyncHandler` interface. Example:

    ```
    public class AsyncHandler : IHttpAsyncHandler
    {
        public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)
        {
            var operation = new AsyncOperation(cb, context, extraData);
            operation.StartAsync();

            context.Response.Write(string.Format("<p>Begin Process Request on: {0}...</p>", Thread.CurrentThread.ManagedThreadId.ToString()));

            return operation;
        }

        public void EndProcessRequest(IAsyncResult result)
        {
            var context = (result as AsyncOperation).Context;

            context.Response.Write(string.Format("<p>End Process Request on {0}</p>", Thread.CurrentThread.ManagedThreadId.ToString()));
        }

        public bool IsReusable
        {
            get { return false; }
        }

        public void ProcessRequest(HttpContext context)
        {
            throw new NotImplementedException();
        }
    } 
    ```

# ios - Stelford Titanium Calendar 未在 ios 上向 ical 添加事件

> ID：11524962
> 
> 赞同：0
> 
> 时间：2012-07-17T14:39:52.830
> 
> 标签：ios, module, calendar, titanium

我有一些代码应该使用 stelford 日历在带有 ios 5.1.1 的 iphone 3gs 上向我的 ical 添加事件，但是当我在手机上对其进行测试时，它不会将它添加到我的日历中。如果有人可以提供帮助，那就太好了！

```
//Calendar Dates
var sd = new Date();
sd.setYear(startYear);
sd.setMonth(startMonth);
sd.setDate(startDay);
sd.setHours(startHour);
sd.setMinutes(startMinute);

var ed = new Date();
ed.setYear(endYear);
ed.setMonth(endMonth);
ed.setDate(endDay);
ed.setHours(endHour);
ed.setMinutes(endMinute);

btn2.addEventListener('click',function(e){
    var ticalendar = require("com.ti.calendar");

    var ev = ticalendar.createItem({
        title: meetName,
        startDate: sd,
        endDate: ed,
        location: meetLoc
    });

    var p = ev.saveEvent();
    Ti.API.info(p);
    alert('Event Saved to Your Calendar!');
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:45:43.553

试试这个。

```
var sd = new Date();
var ed = new Date();
    ed = ed.setMinutes(59);

btn2.addEventListener('click',function(e){
    var ticalendar = require("com.ti.calendar");

    var ev = ticalendar.createItem({
        title: "meetName",
        startDate: sd,
        endDate: ed,
        location: "meetLoc"
    });

    var p = ev.saveEvent();
    Ti.API.info(p);
if(p.error!="none"){

    alert("Error :- " + p.error );
}else{
    alert("Add Successfully");
}
    alert('Event Saved to Your Calendar!');
}); 
```

我认为这对你有帮助干杯:)

# objective-c - 如何旋转图像？

> ID：11524972
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:40:15.870
> 
> 标签：objective-c, ios5

我很难修复这段代码。

```
UIGestureRecognizer *tapGest = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
tapIt = (UITapGestureRecognizer *)tapGest;
[tapIt setNumberOfTapsRequired:2];
[tapIt setNumberOfTouchesRequired:1];
tapIt.delegate = self;
[pc1 addGestureRecognizer:tapIt]; 
```

我想将它（图像）旋转到另一个角度，例如 0、90、180、360 度。我要补充什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:47:41.967

它是一个点击识别器，因此每当您点击（在您的情况下双击）特定视图时，都会调用“点击：”方法。

因此，在 tapped: 方法中，您将通过应用旋转变换来更改视图的旋转，如下所示：

```
- (void)tapped:(UIGestureRecognizer *)gesture {
    // Rotate the view that was tapped to 90 degrees (pi/4)
    UIView *tappedView = [gesture view];
    [tappedView setTransform:CGAffineTransformMakeRotation(M_PI_4)];
} 
```

要将视图旋转到另一个角度，您将更改变换的角度参数。

* * *

如果您希望视图在每次被点击时添加 90 度，您可以通过旋转视图的现有变换然后再次设置它来做到这一点，如下所示：

```
CGAffineTransform newTransform = CGAffineTransformRotate([tappedView transform], M_PI_4);
[tappedView setTransform:newTransform]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:48:16.007

请使用`UIImageView`该类，正确设置该类的`image`属性，将 添加`UIImageView`到您的 any `UIViewController`，然后您有**机会**`UIImageView`使用以下方法旋转：

```
_imageView.transform = CGAffineTransformMakeRotation(_angle); 
```

*（请不要忘记* `_angle` *必须以弧度表示）*

制作其余代码（从哪里以及何时获取参数`_angle`）仍然需要您。

# google-search - 如何保存谷歌搜索查询网址？

> ID：11524976
> 
> 赞同：0
> 
> 时间：2012-07-17T14:40:38.630
> 
> 标签：google-search

我有一个相当简单的任务，需要我几个小时才能定期完成。我想做的是使用该`site:www.example.com`命令在谷歌上搜索我的网站并保存弹出的网址。

由于我的网站很大，所以结果很多。我将此信息用于 SEO 目的，并且非常感谢一个简单的程序，该程序将列出所有结果并能够将其保存为 csv 格式。我用 Firefox 尝试了 SEOQuake，我发现它太重了，每次打开它都会减慢我的计算机速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:12:05.707

尝试使用 Xpath 抓取结果——方法如下：

[http://vancouverdata.blogspot.co.il/2011/02/how-to-web-scraping-xpath-html-google.html](http://vancouverdata.blogspot.co.il/2011/02/how-to-web-scraping-xpath-html-google.html)

我使用类似的方法，但使用 Niels Bosma（非常好！） Excel SEO Tools

[http://nielsbosma.se/projects/seotools/](http://nielsbosma.se/projects/seotools/)

# css - 删除包含 myBB 的 wordpress iframe 中页脚下方的额外空间

> ID：11524979
> 
> 赞同：-1
> 
> 时间：2012-07-17T14:40:47.633
> 
> 标签：css, wordpress, iframe, footer, mybb

我正在尝试将论坛放在 wordpress 的页面上。我正在使用 100% 的宽度和高度，一切都很好，除了一件事，wordpress 页面似乎太长了，其中带有 mybb 的内联框架部分在论坛下方有一个很长的背景图像。我将如何解决这个问题。我在 wordpress 中使用了一个整页模板，并将其用于我的内联框架：

```
<pre></pre> <iframe src="http://ouyadb.com/mybb/" width="100%" height="100%" display:block /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:45:08.457

您需要修改 CSS 代码 margin-bottoms 并删除边距、空白。让我稍后检查您的 css 文件...

在文件 [http://ouyadb.com/wp-content/themes/responsive/style.css](http://ouyadb.com/wp-content/themes/responsive/style.css)

```
#content-full {
  margin-bottom: 0px;
} 
```

然后

```
#wrapper{
   padding: 0 20px 0px 20px;
} 
```

# oracle - 使用 Hibernate 4.1 执行本机查询

> ID：11524984
> 
> 赞同：2
> 
> 时间：2012-07-17T14:41:03.453
> 
> 标签：oracle, hibernate

我正在使用带有 C3P0 连接池的 Hibernate。在 Hibernate 3 中，我可以通过访问包装的 C3P0ProxyConnection`BorrowedConnectionProxy`然后执行`rawConnectionOperation`. 据我所知`BorrowedConnectionProxy`，它不再是 Hibernate 4.1 的一部分。

有什么方法可以运行供应商特定的查询吗？（里面的代理连接实例`Work.execute`对我不起作用，我需要执行 Oracle 存储过程来收集自定义对象类型）。

谢谢你 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:25:06.897

您可以通过调用以下方式访问未代理的工作连接：

```
public void execute(Connection connection) throws SQLException {
    Connection unproxiedConnection = connection.unwrap( Connection.class );
    ...
} 
```

这种形式利用了 JDBC 4 的 unwrap 方法，我们只是将它委托给底层连接。或者，如果您特别需要 OracleConnection：

```
public void execute(Connection connection) throws SQLException {
    OracleConnection oracleConnection = connection.unwrap( OracleConnection.class );
    ...
} 
```

您还可以使用：

```
public void execute(Connection connection) throws SQLException {
    Connection unproxiedConnection = ( (JdbcWrapper<Connection>) connection ).getWrappedObject();
    ...
} 
```

在考虑允许作品表示它想要一个未经代理的连接方面，我来回考虑，但考虑到 Connection#unwrap 的可用性，我不太确定是否有真正的好处。

# ruby-on-rails - 如何使用 NET::HTTP 解决错误

> ID：11524985
> 
> 赞同：0
> 
> 时间：2012-07-17T14:41:09.363
> 
> 标签：ruby-on-rails, httprequest

我想使用标准 ruby​​ 类 NET::HTTP 发布一些数据。

我有来自示例的控制器

```
def request
require "net/http"
require "uri"
uri = URI.parse("http://google.com/")
 # Shortcut
response = Net::HTTP.get_response(uri)
 # Will print response.body
Net::HTTP.get_print(uri)
 # Full
http = Net::HTTP.new(uri.host, uri.port)
response = http.request(Net::HTTP::Get.new(uri.request_uri))
end 
```

我的应用程序给出错误 -

```
undefined method `content_mime_type' for #<Net::HTTPMovedPermanently 301 Moved Permanently readbody=true> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:44:00.160

问题可能是在代码的最后一行，发生了两个请求。代码转换为：

`response = http.request(<result>)`其中`<some result>`part 是调用的返回值`Net::HTTP::Get.new(uri.request_uri)`

我认为您正在尝试这样做：

```
http.request(uri.request_uri) 
```

# .net - 当用户在 DataGridViewTextBoxEditingControl 中的文本末尾按下向下箭头时如何前进到下一个单元格

> ID：11524989
> 
> 赞同：2
> 
> 时间：2012-07-17T14:41:15.667
> 
> 标签：.net, datagridview, arrow-keys, datagridviewtextboxcell

我有一个带有 DataGridView 的 winforms 应用程序，其中包含一些多行文本单元格。DataGridViewTextBoxEditingControl 的默认行为看起来很奇怪。出于某种原因，如果正在编辑一个单元格并且选择位于文本的最后（在最后一行的最后一个单词的末尾），如果用户按下向下箭头键，它会将选择设置回到该单元格中文本的开头（不离开编辑模式），而不是将它们带到下一个单元格。如果在编辑除最后一行以外的任何行时按下向下箭头，则插入点会按预期移动到下一行。如果在编辑最后一行但不是在该行的最末尾按下向下箭头，则编辑结束并且下一个单元格（下方）成为新的当前单元格。有没有（好的/简单的）方法来改变这种行为？我想出了这个解决方案，但我对不得不输入杂乱无章的代码来修复.Net 控件中似乎存在的错误并不满意。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (msg.WParam.ToInt32() == (int)Keys.Down &&
        IsCurrentCellInEditMode && EditingControl is DataGridViewTextBoxEditingControl &&
        ((DataGridViewTextBoxEditingControl)EditingControl).SelectionStart == EditingControl.Text.Length)
    {
        EndEdit();
        if (CurrentCellAddress.Y < RowCount - 1)
            CurrentCell = this[CurrentCellAddress.X, CurrentCellAddress.Y + 1];
        return true;
    }
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

# c# - 如何将我的 Windows Phone 应用程序连接到 Microsoft Dynamics CRM 2011？

> ID：11524992
> 
> 赞同：1
> 
> 时间：2012-07-17T14:41:27.570
> 
> 标签：c#, .net, windows-phone-7.1, dynamics-crm-2011, windows-phone-7-emulator

我正在尝试将我的 WP7.1 应用程序连接到我在 Dynamics CRM 2011 上的组织。

当我输入我的登录信息（实时 ID 和密码）时，我收到一个错误（见截图）

![模拟器报错页面截图](../Images/126fe41357f61bde57662af19bd86c2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:20:49.820

这是一个很好的例子：

[http://crmland.blogspot.com/2011/01/building-windows-phone-7-crm-client.html](http://crmland.blogspot.com/2011/01/building-windows-phone-7-crm-client.html)

# visual-studio - 从 Visual Studio Express 2012 中的共享文件夹构建应用程序

> ID：11524998
> 
> 赞同：0
> 
> 时间：2012-07-17T14:41:45.527
> 
> 标签：visual-studio, windows-8, microsoft-metro

我正在尝试从 Visual Studio Express 2012 中的共享文件夹构建应用程序。

虽然从本地文件夹构建应用程序工作得很好，但共享的却不行。这些是构建时抛出的错误：

错误 1 ​​错误：DEP0700：在布局文件夹“\VBOXSVR\Repos\App1\App1\bin\Debug\AppX”中注册应用程序失败。App1 错误 2 错误 0x80073D55：从文件 C:\ProgramData\Microsoft\Windows\AppRepository\7b7fb2d4-65eb-45d3-808c-3e42a6eacbb4_S-1-5-21-1933965384-392669828-504697624-1001_1.rslc 恢复 DeploymentRequest 失败。应用程序1

我没有在 Virtual Box 中使用共享文件夹，而是尝试设置一个 Samba 共享，我已将其安装为网络驱动器。此外，我使用 caspol 使用此技术使驱动器受信任：[http ://blog.kowalczyk.info/article/Network-drives-net-security-and-virtualbox.html](http://blog.kowalczyk.info/article/Network-drives-net-security-and-virtualbox.html)

我的主机操作系统是 Max OSX，我的客户操作系统是 Windows 8。

我期待听到您的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:05:35.093

有趣的是，您经常在提出问题后立即找到解决方案；-)

这是其他感兴趣的人的解决方案：[http ://connect.microsoft.com/VisualStudio/feedback/details/106132/building-fails-when-build-directory-is-on-a-network-drive](http://connect.microsoft.com/VisualStudio/feedback/details/106132/building-fails-when-build-directory-is-on-a-network-drive)

# jasper-reports - iReport：按百分比工具+图表计算百分比？

> ID：11524999
> 
> 赞同：0
> 
> 时间：2012-07-17T14:41:46.757
> 
> 标签：jasper-reports, report, ireport, percentage

我正在尝试在关系数据库上使用 iReports 生成报告。我必须计算某些数据的百分比，因此我在调色板中使用了百分比工具。这对于以表格形式出现的数据非常有效。

但现在我也必须为相同的数据生成图表。但是这个百分比现在没有反映在图表中。

百分比工具正在生成以下表达式

```
new Double( $F{Totalvalue}.doubleValue() / $V{Totalvalue_SUM}.doubleValue() ) 
```

此表达式适用于表格格式数据但不适用于图形，我不明白为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:39:34.500

尝试将图形属性“评估时间”更改为值“报告”。默认情况下它是“现在”。

这就是为什么在图形渲染时重新计算所有值的原因。