# StackOverflow 问答 10683000-10683999

# iis - 为什么IIS web.config中的超时设置似乎没有效果。

> ID：10683005
> 
> 赞同：0
> 
> 时间：2012-05-21T09:50:45.933
> 
> 标签：iis, timeout

我在 web.config (IIS v6) 中有以下设置：

```
<authentication mode="Forms">
  <forms loginUrl="Login.aspx" name=".xyzauth" protection="All" timeout="360" path="/" />
</authentication> 
```

我理解这意味着会话将在 6 小时（360 分钟）后超时。但是，在 5 到 15 分钟之间会提示我重新登录。**这可能是什么原因造成的？**我在整个项目中搜索了 sessionState 引用的其他超时，但一无所获。该项目来自一家声称“无辜”的外部公司。该项目使用 Infragistics 框架。

有任何想法吗？

# c# - 可以作为服务或控制台应用程序运行的 WCF 服务在作为服务运行时找不到现有文件

> ID：10683006
> 
> 赞同：0
> 
> 时间：2012-05-21T09:50:48.240
> 
> 标签：c#, wcf, windows-services

我正在编写一个 wcf 服务。出于调试目的，它可以作为控制台应用程序启动。我的服务需要特定的文件才能使用，并在 init 的配置（路径可以是远程）中定义的指定路径中验证其存在。这就是神秘主义者开始的地方。

如果我将服务作为控制台应用程序启动，一切正常：文件存在并且服务启动。但是，当我尝试将我的服务作为服务应用程序启动时，在指定路径上看不到文件，即使之前作为控制台应用程序成功运行是几秒钟前。

我只需使用 File.Exists 验证文件是否存在。

有谁知道为什么会这样？

UPD：忘了说：我使用的是绝对路径。

# objective-c - 我们可以将打印变量转换为宏吗

> ID：10683007
> 
> 赞同：1
> 
> 时间：2012-05-21T09:50:48.863
> 
> 标签：objective-c, xcode4.3

我经常这样做

```
 CLog(@"someNew.Title %@", someNew.Title); //Working
    CLog (@"_currentBusiness.managedObjectContext %@",_currentBusiness.managedObjectContext);
    CLog (@"someNew.managedObjectContext %@",someNew.managedObjectContext);
    CLog (@"[ThreadClass managedObjectContext] %@",[ThreadClass managedObjectContext]);
    CLog (@"UIAppDelegate.managedObjectContext %@",UIAppDelegate.managedObjectContext); 
```

基本上我会

```
CLog (@"VariableName %@", VariableName) 
```

有没有办法把它变成一个宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:55:49.937

这应该工作 - 像这样定义宏：

```
#define CLOG(x) CLog(@#x " %@", x) 
```

然后像这样调用它：

```
CLOG(someNew.Title); 
```

# android - 如何从 android 中的 xtify sdk 获取 PAYLOAD 值？

> ID：10683010
> 
> 赞同：1
> 
> 时间：2012-05-21T09:50:53.707
> 
> 标签：android, push-notification, android-c2dm, xtify

我正在使用新的 xtify sdk，我在其中尝试了以下代码，

```
 @Override
  public void onMessage(Context context, Bundle msgExtras) {
    Log.i(TAG, "-- Notification recived");
    Log.i(TAG, "Notification Title: "+ msgExtras.getString(NOTIFICATION_TITLE));
    Log.i(TAG, "Notification Content: "+msgExtras.getString(NOTIFICATION_CONTENT));
    Log.i(TAG, "Payload Data "+ msgExtras.getString("listing_id"));
    RichNotificationManger.processNotifExtras(context, msgExtras);
} 
```

在 msgExtra,getString("listing_id") 中，我得到的是空值。

还请告诉我如何使用密钥传递有效载荷的值。

我试过了，

```
 payload{"myKey":"myValue"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:20:55.427

在网站中尝试在有效负载字段中发送以下 json：

```
{"listing_id":"my_listing_id"} 
```

在客户端，这是您检索数据的方式：

```
 @Override
  public void onMessage(Context context, Bundle msgExtras) {
 msgExtras.getString("listing_id")
} 
```

如果您仍然遇到问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T17:41:00.160

使用 Xtify 2.0，发送以下 JSON：

```
{"listing_id":"my_listing_id"} 
```

在客户端使用：

```
msgExtras.getString("data.listing_id"); 
```

# file - 构建电晕sdk时缺少文件？

> ID：10683017
> 
> 赞同：0
> 
> 时间：2012-05-21T09:51:25.993
> 
> 标签：file, lua, mp3, coronasdk

我正在开发一个项目，该项目在 corona sdk 中使用`mp3`和`.lrc`归档我的游戏。当我尝试在 android 上构建它并在 android 设备上运行它时，我收到了这个错误..

```
Director ERROR: Failed to execute new(params) function on 'gameLoad'. 
```

所以我想知道我的游戏中缺少文件。

`mp3`和文件可能`.lrc`没有与游戏代码一起构建吗？

谁能介绍一下我的情况？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:57:40.597

你用的是哪个版本的导演？最新版本的导演类（我认为是 1.4）会打印导致问题的实际错误。

您提到的错误只是您无法控制的导演类中的错误。你会得到这样的东西。

```
-----------------------
Director ERROR: Failed to execute new( params ) function on 'mainscreen'.
-----------------------
e:\corona\satheesh\doodle2\mainscreen.lua:35: attempt to perform arithmetic on global 'screen' (a nil value)
Runtime error 
```

**编辑**

如果您需要在设备上显示这些消息，请对 director.lua 进行以下更改

1套

```
showDebug = true 
```

2.改变

```
local alert = native.showAlert( "Director Class - ERROR", message, { "OK" }, onComplete ) 
```

到

```
local alert = native.showAlert( "Director Class - ERROR",debugMessage, { "OK" }, onComplete ) 
```

# debugging - 生产期间的 Wicket DebugBar / DevUtils

> ID：10683018
> 
> 赞同：4
> 
> 时间：2012-05-21T09:51:26.030
> 
> 标签：debugging, wicket

`DebugBar`在调试会话/序列化问题时，Wicket`wicket-devutils`增加了很多有用的信息。文档建议应将其添加到基本页面。

这种方法似乎为区分开发和生产环境提供了非常弱的支持。我不希望`wicket-devutils`作为生产依赖项，我当然也不希望将代码与“if development”分支混淆。

“检票口”人如何在现实生活应用中处理这个问题？有没有既定的模式？

[http://wicket.apache.org/apidocs/1.4/org/apache/wicket/devutils/debugbar/DebugBar.html](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/devutils/debugbar/DebugBar.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-03T07:31:48.900

`DebugBar`已经覆盖`isVisible`. 所以你不必做任何事情。

```
@Override
public boolean isVisible()
{
    return getApplication().getDebugSettings().isDevelopmentUtilitiesEnabled();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:26:56.550

在我们的例子中，我们仅在启用开发实用程序时添加它。

```
if (getApplication().getDebugSettings().isDevelopmentUtilitiesEnabled()) {
    add(new DebugBar("dev"));
} else {
    add(new EmptyPanel("dev").setVisible(false));
} 
```

依赖并没有那么大，我们可以让它在我们的生产依赖中。

# python - Python ftplib - retrbinary 因零字节文件超时而失败

> ID：10683024
> 
> 赞同：3
> 
> 时间：2012-05-21T09:51:35.990
> 
> 标签：python, ftplib

使用 Python 2.6 并以被动模式从 FTP 服务器下载文件，我发现如果源文件为空（0 字节），retrbinary 会失败并超时。这是一个错误还是我缺少配置选项？

```
ftp.retrbinary('RETR digital.conf', open('digital.conf','wb').write)

Downloading digital.conf
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "download.py", line 13, in run
    ftp.retrbinary('RETR %s' % source, callback)
  File "c:\Python26\lib\ftplib.py", line 398, in retrbinary
    conn = self.transfercmd(cmd, rest)
  File "c:\Python26\lib\ftplib.py", line 360, in transfercmd
    return self.ntransfercmd(cmd, rest)[0]
  File "c:\Python26\lib\ftplib.py", line 337, in ntransfercmd
    resp = self.getresp()
  File "c:\Python26\lib\ftplib.py", line 216, in getresp
    raise error_temp, resp
ftplib.error_temp: 421 Timeout 
```

其他非零字节文件传输良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T03:35:01.467

这是您的会话空闲时间太长。您可以在会长文件后进入实例化 ftplib。否则。修改ftp软件配置。

比如你使用vsftpd，可以在vsftpd.conf中加入如下配置：

`idle_session_timeout=60000 # The default is 600 seconds`

# backbone.js - 使用 jQuery/UI 添加拖放到主干待办事项

> ID：10683027
> 
> 赞同：1
> 
> 时间：2012-05-21T09:51:44.470
> 
> 标签：backbone.js, drag-and-drop

我对backbone.js 完全陌生，刚刚开始深入研究臭名昭著的“todos”应用程序以了解它。我注意到[localtodos.com](http://localtodos.com/)包含一个不错的拖放功能，而[主干示例](http://documentcloud.github.com/backbone/examples/todos/index.html)没有。localtodos 拖放是用 Mootools 实现的，但我希望改用 jQuery 和 jQuery UI。

我遇到了[一个看起来已经实现它的示例，](http://jonahlyn.heroku.com/blog/2011/12/02/backbone-drag-and-drop)但是当我尝试它时，data-id 属性存在问题。添加：

```
<%= id ? 'data-id="'+id+'"' : '' %> 
```

到模板阻止我输入任何待办事项。我在控制台中收到此错误：

> 未捕获的 ReferenceError：未定义 id

但是在 AppView 模板的初始化函数中包含的拖放实现确实允许拖放：

```
this.$("#todo-list").sortable({
    update: function(event, ui) {
        $('div.todo',this).each(function(i) {
            var id = $(this).attr('data-id'),
                todo = Todos.get(id);
            todo.save({order: i + 1});
        });
    }
}); 
```

如果我删除了 data-id 属性代码，那么我可以再次输入待办事项，但是当我刷新页面时，他们的订单没有保存（显然）。

我只是无法弄清楚 data-id 属性的问题所在。我正在使用的代码的更完整示例可在[此处作为 gist](https://gist.github.com/2761530)获得。

# python - 在python中过滤元组列表

> ID：10683029
> 
> 赞同：1
> 
> 时间：2012-05-21T09:51:49.533
> 
> 标签：python

我正在寻找一种干净的pythonic方式来执行以下操作

我有一个元组列表说：

```
[(1,'a'), (1,'b'), (1,'c'), (2, 'd'), (5, 'e'), (5, 'f')] 
```

我想创建一个新列表，它丢弃以前见过第一个键的元组。所以上面的 o/p 将是：

```
[(1,'c'), (2,'d'), (5, 'f')] 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T09:54:02.223

一个简单的方法是创建一个字典，因为它只会保留最后一个元素具有相同的键：

```
In [1]: l = [(1,'a'), (1,'b'), (1,'c'), (2, 'd'), (5, 'e'), (5, 'f')]

In [2]: dict(l).items()
Out[2]: [(1, 'c'), (2, 'd'), (5, 'f')] 
```

**更新：**正如[@Tadeck](https://stackoverflow.com/users/548696/tadeck)在他的评论中提到的那样，由于不能保证字典项目的顺序，您可能想要使用[有序字典](http://docs.python.org/library/collections.html#collections.OrderedDict)：

```
from collections import OrderedDict
newl = OrderedDict(l).items() 
```

如果你真的想用相同的键保留第一个元组（而不是最后一个，你的问题是模棱两可的），那么你可以先反转列表，添加它做字典并`.items()`再次反转输出。
尽管在这种情况下可能有更好的方法来实现这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:22:35.003

对于一个班轮迷恋者来说，这是一个很好的技巧，可以保持订单到位（我承认它不是很可读，但你知道......）

```
>>> s = [(1,'a'), (1,'b'), (1,'c'), (2, 'd'), (5, 'e'), (5, 'f')]
>>> seen = set()
>>> [seen.add(x[0]) or x for x in s if x[0] not in seen]
[(1, 'a'), (2, 'd'), (5, 'e')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T09:56:43.250

`unique_everseen`从[文档](http://docs.python.org/library/itertools.html)中使用`itertools`

```
from itertools import ifilterfalse
def unique_everseen(iterable, key=None):
    "List unique elements, preserving order. Remember all elements ever seen."
    # unique_everseen('AAAABBBCCDAABBB') --> A B C D
    # unique_everseen('ABBCcAD', str.lower) --> A B C D
    seen = set()
    seen_add = seen.add
    if key is None:
        for element in ifilterfalse(seen.__contains__, iterable):
            seen_add(element)
            yield element
    else:
        for element in iterable:
            k = key(element)
            if k not in seen:
                seen_add(k)
                yield element

a = [(1,'a'), (1,'b'), (1,'c'), (2, 'd'), (5, 'e'), (5, 'f')]

print list(unique_everseen(a,key=lambda x: x[0])) 
```

屈服

```
[(1, 'a'), (2, 'd'), (5, 'e')] 
```

# connection - TYPO3 4.7.0更新，BE页面暂时不可用

> ID：10683031
> 
> 赞同：0
> 
> 时间：2012-05-21T09:52:00.237
> 
> 标签：connection, typo3, backend, updates

我刚刚将一个站点更新为 TYPO3 v. 4.7.0，但现在当我单击后端菜单中的任何内容时出现“页面暂时不可用”/连接错误，它只是一直在“寻找”页面。

有没有其他人遇到过这个问题？

FE没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:02:00.377

关闭这个 - 更新到较新的 TYPO3 版本，问题已解决

# android - Android在自定义视图组中传输视图动画

> ID：10683032
> 
> 赞同：0
> 
> 时间：2012-05-21T09:52:01.317
> 
> 标签：android, animation, layout, transfer, viewgroup

当我单击画廊中的照片文件夹时，我想要像扩展照片这样的动画，就像在这个[关于 Android 画廊的视频](http://www.youtube.com/watch?v=I4SbdlS9Bbc&t=1m11s)中一样。

*   我在同一个自定义视图组中有两个视图

    *   view1 在 0,0
    *   view2 在 100,100
*   由于单击“开始”，view1 将移至 100,0，view2 将移至 0,100

到目前为止我的解决方案：

我通过requestlayout使用计时器刷新布局的新位置。

视图的位置将刷新`onLayout`：

它可以工作，但它不是本机功能，并且在同时移动 100 个视图时速度非常慢。

完整代码：

```
private class MyViewGroup extends ViewGroup{
    View view1,view2;
    Button btn;
    public MyViewGroup(Context context) {
        super(context);
        view1=new View(context);
        view1.setBackgroundColor(Color.RED);
        this.addView(view1);
        view2=new View(context);
        view2.setBackgroundColor(Color.BLUE);
        this.addView(view2);
        btn=new Button(context);
        btn.setText("start");
        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                xLayout=0;
                handler.sendEmptyMessage(0);
            }
        });
        this.addView(btn);

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int w = MeasureSpec.getSize(widthMeasureSpec);
        int h= MeasureSpec.getSize(heightMeasureSpec);
        int widthSpec = MeasureSpec.makeMeasureSpec(50, MeasureSpec.EXACTLY);
        int heightSpec = MeasureSpec.makeMeasureSpec(50, MeasureSpec.EXACTLY);
        view1.measure(widthSpec,heightSpec);
        view2.measure(widthSpec,heightSpec);
        btn.measure(widthSpec,heightSpec);
        this.setMeasuredDimension(w, h);
    }
    private int xLayout=0;
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        view1.layout(xLayout,0,xLayout+50,50);
        view2.layout(100-xLayout,100,150-xLayout,150);
        btn.layout(0,200,50,250);
    }

    private void startAnimation(){
        Timer timer = new Timer() ;
        timer.schedule(new TimerTask(){
            @Override
            public void run() {
                if(xLayout<100){
                    handler.sendEmptyMessage(0);
                }
                this.cancel();
            }

        },5);
    }

    private Handler handler=new Handler(){
        @Override
        public void handleMessage(Message msg) {
            xLayout=xLayout+20;
            view1.requestLayout();
            startAnimation();
        }
    }   ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:35:56.383

[http://android-developers.blogspot.fr/2011/05/introducing-viewpropertyanimator.html](http://android-developers.blogspot.fr/2011/05/introducing-viewpropertyanimator.html)

```
myView.animate().x(500).y(500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:25:24.573

我们可以使用“LayoutTransition”作为

```
 final LayoutTransition transitioner = new LayoutTransition();
 myViewGroup.setLayoutTransition(transitioner); 
```

当我们点击“开始”addview

完整代码

```
 private class MyViewGroup extends ViewGroup{
    View view1,view2;
    Button btn;
    public MyViewGroup(final Context context) {
        super(context);
        view1=new View(context);
        view1.setBackgroundColor(Color.RED);
        this.addView(view1);
        view2=new View(context);
        view2.setBackgroundColor(Color.BLUE);
        this.addView(view2);
        btn=new Button(context);
        btn.setText("start");
        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                xLayout+=100;
              MyViewGroup.this.addView(new View(context));
            }
        });
        this.addView(btn);

    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int w = MeasureSpec.getSize(widthMeasureSpec);
        int h= MeasureSpec.getSize(heightMeasureSpec);
        int widthSpec = MeasureSpec.makeMeasureSpec(50, MeasureSpec.EXACTLY);
        int heightSpec = MeasureSpec.makeMeasureSpec(50, MeasureSpec.EXACTLY);
        view1.measure(widthSpec,heightSpec);
        view2.measure(widthSpec,heightSpec);
        btn.measure(widthSpec,heightSpec);
        this.setMeasuredDimension(w, h);
    }
    private int xLayout=0;
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        view1.layout(xLayout,0,xLayout+50,50);
        view2.layout(100-xLayout,100,150-xLayout,150);
        btn.layout(0,200,50,250);
    }

} 
```

# php - ZF：禁用动作助手 viewRenderer

> ID：10683037
> 
> 赞同：0
> 
> 时间：2012-05-21T09:52:24.900
> 
> 标签：php, ajax, zend-framework

为了提供 ajax 操作，我执行以下操作：

```
 public function preDispatch()
    {
        if ($this->getRequest()->isXmlHttpRequest()) {
                Zend_Controller_Action_HelperBroker::removeHelper('viewRenderer');
                Zend_Layout::getMvcInstance()->disableLayout();
        }           
    } 
```

但响应带有以下错误：在路径中找不到脚本'async/tax.phtml' (/var/www/app/trunc/application/views/scripts/:./views/scripts/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:02:16.827

1.  您是否检查过该文件是否`tax.phtml`存在于`/var/www/app/trunc/application/views/scripts/`.
2.  如果存在，则位于`tax.phtml`文件`echo exit;`底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:46:35.107

为什么不使用 Ajaxcontext 操作助手？[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch)

```
// supposedly in your async controller
public function init() {
$ajaxContext = $this->_helper->getHelper('AjaxContext');
$ajaxContext->addActionContext('tax', 'html')
} 
```

然后将您的视图命名为“async/tax.ajax.phtml”并确保您的 ajax 调用请求 html 格式。

这样，您甚至可以调整您的代码以使用相同的控制器/操作自动响应 json、phtml 或 xml。

# ruby - 可挂载引擎的应用程序控制器问题

> ID：10683041
> 
> 赞同：1
> 
> 时间：2012-05-21T09:52:58.667
> 
> 标签：ruby, ruby-on-rails-3, devise, cancan, rails-engines

我有一个名为 X 的 rails 应用程序和一个名为 Y 的 rails 可安装引擎。App X 具有设计，引擎 Y 具有 CanCan，可与主机应用程序设计安装一起使用。为了分离宿主应用程序和可挂载引擎的关注点，引擎具有CanCan能力模型以及宿主应用程序。我的问题如下，根据 CanCan 文档，您可以像[https://github.com/ryanb/cancan/wiki/Changing-Defaults](https://github.com/ryanb/cancan/wiki/Changing-Defaults)一样更改默认能力模型。我的问题是，如果我在可安装引擎应用程序控制器中设置默认能力类，如下所示：

```
module Y
  class ApplicationController < ActionController::Base
    def current_ability 
      @current_ability = Ability.new(current_user)
    end
  end
end 
```

我收到以下错误：

```
uninitialized constant Ability 
```

（附带说明，当我编辑文件并重新加载页面而不重新启动服务器时，它工作正常）

但是，如果我将相同的方法放入主机应用程序的应用程序控制器中：

```
class ApplicationController < ActionController::Base
  def current_ability 
    @current_ability = Y::Ability.new(current_user)
  end
end 
```

一切都按预期工作（这也意味着 Devise 和 CanCan 设置正确）。

有人知道为什么会这样吗？我可能无法正确理解可挂载引擎，但我一直认为它们与主机应用程序是隔离的，因此在访问由可挂载引擎定义的页面时，主机应用程序的应用程序控制器甚至不应该被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:54:44.583

您的引擎应用程序控制器很可能根本没有加载。如果您在主应用程序中具有相同的类名，Rails 引擎会表现不佳。[如果您想查看，这就是问题所在。](https://github.com/rails/rails/issues/6413)我建议在您的引擎中使用显式声明。使用 Y::Ability 代替能力。

# java - 为什么有些人不显示小程序的启动按钮？

> ID：10683047
> 
> 赞同：0
> 
> 时间：2012-05-21T09:53:22.043
> 
> 标签：java, button, applet

我有一个简单的心理实验小程序，我使用 pxLab 库（[http://www.pxlab.de/](http://www.pxlab.de/)）。在这个网页（[http://cogsci.fmph.uniba.sk/~stachova/exp/experiment.php](http://cogsci.fmph.uniba.sk/~stachova/exp/experiment.php)）上，应该有一个小程序的开始按钮，并且（在多台计算机上尝试过）有一个按钮，它可以工作.

但是，我的一些朋友在加载页面时看不到按钮，我已经对他们的一台计算机进行了团队查看，但实际上没有显示任何内容，按钮应该在哪里。你有什么想法，可能是什么问题？

这是我如何调用小程序：

```
<APPLET
  CODEBASE="."
  CODE="ExRunButton.class"
  ARCHIVE="exrunbutton.jar, pxlabrt.jar"
  ALT="Start design file experiment.pxd"
  WIDTH=800
  HEIGHT=60
  MAYSCRIPT=true>
  <PARAM NAME="CommandLine" VALUE="-S2">
  <PARAM NAME="DesignFile" VALUE="experimentB.pxd">
  <PARAM NAME="DesignFile" VALUE="experimentB.pxd">
  <PARAM NAME="StartButtonLabel" VALUE="Začni experiment">
</APPLET> 
```

# java - JTable 帮助（调整标题和数据源的大小）

> ID：10683056
> 
> 赞同：1
> 
> 时间：2012-05-21T09:54:19.063
> 
> 标签：java, swing, jtable

我`JTable`对它的大量信息很陌生，也很困惑。有几个问题希望各位大侠能解答。

1.  如何单独设置每个单元格值？是通过实现一个`TableModel`（我不太知道如何使用它）？我知道可以使用 2D 矩阵预先设置数据。
2.  我怎样才能使下表的标题很好地定位（条目完全显示）？如果您仔细查看表中的第一个条目，作业等级被部分隐藏。我一直在寻找解决这个问题的方法，但无济于事。

[http://i45.tinypic.com/24pxvmx.jpg](http://i45.tinypic.com/24pxvmx.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:03:21.117

正如我在上面评论的那样，您可以做的最好的事情是通过[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

但是要回答您的两个具体问题：

1) 是的，您需要一个 TableModel。您可以通过传递数组来创建一个新的 JTable，但无论如何它只是在后台创建一个 DefaultTableModel。查找模型-视图-控制器架构以获取有关为什么需要模型的更多信息。

2）您可以使用类似这样的方式在列上设置首选宽度

```
table.getColumnModel().getColumn(1).setPreferredWidth(100); 
```

这将使第 1 列的首选宽度为 100 像素（我认为它是像素......不过不要引用我的话！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:10:43.860

这个概念是您使用自己的类继承 DefaultTableModel。例如，如果您想显示工作表，您可以创建一个名为 JobsTableModel 的类。JobsTableModel 通常会有一个 Job 类型的对象集合，这些对象可能会被传递给构造函数。您的 JobsTableModel 必须能够回答以下问题：

1.  有多少行
2.  有多少列
3.  X列的名称是什么
4.  X列的数据类型是什么
5.  单元格（X，Y）中的值是多少

它通过覆盖以下方法来做到这一点：

```
public int getRowCount()
public int getColumnCount()
public String getColumnName(int columnIndex)
public Class<?> getColumnClass(int columnIndex)
public Object getValueAt(int rowIndex, int columnIndex) 
```

然后，JTable 实现可以使用此信息来填充表格，而无需担心在每个单元格中设置值。此外，JTable 实现将自动免费为您提供排序和列重新排序。如果您必须直接填充每个单元格，那么这将是一场噩梦。

至于获得正确的宽度，我不相信有任何自动的方法可以做到这一点，你只需要使用一些试验和错误。您可以按如下方式设置列的宽度（以像素为单位）：

```
TableColumn column = table.getColumnModel().getColumn(i);
column.setPreferredWidth(width); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:20:36.467

JTable 是 Swing 中最复杂的组件之一。所以需要一些时间来启动它。但是当你掌握它的时候，你会发现 JTable 是非常强大和灵活的。说了这么多，让我试着回答你的问题。

> 1）如何单独设置每个单元格值？是通过实现一个 TableModel（我不太清楚如何使用它）？我知道可以使用二维矩阵预先设置数据

JTable 对数据使用 TableModel 实例。如果您有可用的数组或带有预加载数据的向量，则可以简单地使用[DefaultTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/DefaultTableModel.html)。如果 DefaultTableModel 对您的要求不够灵活，那么请不要犹豫，通过扩展[AbstractTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html)来实现您的 TableModel 。[AbstractTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html)只有以下三个抽象方法，所以很容易通过扩展[AbstractTableModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/table/AbstractTableModel.html)来实现一个具体的 TableModel 。：

```
public int getRowCount();
public int getColumnCount();
public Object getValueAt(int row, int column); 
```

> 2）我怎样才能使下表的标题很好地定位（条目完全显示）？如果您仔细查看表中的第一个条目，作业等级被部分隐藏。我一直在寻找解决这个问题的方法，但无济于事。 [http://i45.tinypic.com/24pxvmx.jpg](http://i45.tinypic.com/24pxvmx.jpg)

您可以在此处找到自动设置列宽的示例：[http](http://www.exampledepot.com/egs/javax.swing.table/PackCol.html) ://www.exampledepot.com/egs/javax.swing.table/PackCol.html 此链接中的代码示例使用所有列数据来计算首选列宽。我想它也可以适应您的要求。

# c# - 在 C# 中禁用 MouseDragElementBehavior

> ID：10683059
> 
> 赞同：2
> 
> 时间：2012-05-21T09:54:25.710
> 
> 标签：c#, windows-phone-7, behavior

我有一个包含一个矩形和 2 个文本块的网格。Grid 有`MouseDragElementBehavior`，我通过在 Expression Blend 中拖动行为来添加它。

现在在 C# 中，我希望能够禁用`MouseDragElementBehavior`并重新启用它。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:30:24.963

[http://invokeit.wordpress.com/2012/02/10/wp7-drag-drop-example/](http://invokeit.wordpress.com/2012/02/10/wp7-drag-drop-example/)看看我的博文。这就是我以编程方式访问它的方式

```
BehaviorCollection behaviours = Interaction.GetBehaviors(ball);
if (behaviours.Count > 0 && behaviours[0] is MouseDragElementBehavior)
{
    MouseDragElementBehavior dragBehaviour = behaviours[0] as MouseDragElementBehavior;
} 
```

我现在倾向于做的不是在 XAML 中使用它，而是在运行时添加它。

您可以在需要时添加它并在其他时间删除它。

# php - php：如何通过字符数组分割字符串？

> ID：10683060
> 
> 赞同：1
> 
> 时间：2012-05-21T09:54:27.003
> 
> 标签：php, string, split, explode, preg-split

我想用一个字符数组分割一个字符串，我该怎么做？我注意到[preg_split](http://php.net/manual/en/function.preg-split.php)接受字符串输入而不是数组。

例如，这是我的数组：

`$splitting_strings = array(".", ";", "-", "and", "for");`

`$text = "What a great day, and I love it. Who knows; maybe I will go.";`

```
$result = array (
0 => "What a great day",
1 => "I love it",
2 =>  "Who knows",
3 => "maybe I will go"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:56:32.627

您可以通过[`preg_split()`](http://php.net/manual/en/function.preg-split.php)以下内容：

```
$regex = '/(' . implode('|', $splitting_strings) . ')/'; 
```

您将需要转义任何特殊的正则表达式字符，例如`.`. 所以你应该最终得到这样的东西：

```
// run through each element in the array escaping any
// special regex chars
$splitting_strings = array_map(function($string) {
                                   return preg_quote($string);
                               }, $splitting_strings);

$regex = '/(' . implode('|', $splitting_strings) . ')/';
$final_array = preg_split($regex, $splitting_strings); 
```

`$final_array`毕竟这一切的输出是：

```
array(5) {
  [0]=>
  string(18) "What a great day, "
  [1]=>
  string(10) " I love it"
  [2]=>
  string(10) " Who knows"
  [3]=>
  string(16) " maybe I will go"
  [4]=>
  string(0) ""
} 
```

# xml - linq 获取内部属性

> ID：10683061
> 
> 赞同：0
> 
> 时间：2012-05-21T09:54:28.237
> 
> 标签：xml, vb.net, linq

我想做的是，我有以下xml：

> 邮编 id="E20 2AP" 从="test1" 到="test2"/>

我试图搜索邮政编码 id，然后从该 id 获取来自和到文本我拥有的代码：

```
 Public Shared Function GetFromDate(ByVal PostCode As String) As String
    Dim LoadToAddresses = From ex In doc.Descendants.Elements("Postcode") Select New With {.accountName = ex.Attribute("id").Value, .datefrom = ex.Attribute("from").Value}
    For Each x In LoadToAddresses
        Dim datefrom = (From p In LoadToAddresses Where p.accountName = PostCode Select New With {.datefrom = p.datefrom}).Single
        Return datefrom.ToString
    Next
End Function 
```

这有效，但它返回：

> { 日期来源 = 测试 }

我只想让它声明“测试”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:00:47.797

```
'Return datefrom.ToString
Return datefrom.datefrom 
```

或者：

```
'Dim datefrom = (From p In LoadToAddresses Where p.accountName = PostCode Select New With {.datefrom = p.datefrom}).Single
Dim datefrom = (From p In LoadToAddresses Where p.accountName = PostCode Select p.datefrom}).Single 
```

# javascript - 骨干关系未更新

> ID：10683064
> 
> 赞同：0
> 
> 时间：2012-05-21T09:54:38.453
> 
> 标签：javascript, backbone.js, coffeescript, backbone-relational

我在我的用户对象和我的用户游戏对象之间建立了关系。关系似乎设置正确，我可以通过用户对象访问用户游戏。

但是，当我创建一个新的 usergame 对象时，用户对象不会更新。

有人可以为我提供解决方案吗？

关系设置如下：

```
class App.Models.User extends Backbone.RelationalModel
  urlRoot: '/user'

  relations: [
    type: Backbone.HasMany
    key: 'user_games'
    relatedModel: 'App.Models.UserGame'
    includeInJSON: true
    collectionType: 'App.Collections.UserGames'
    reverseRelation:
      key: 'user'
  ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T17:34:14.920

从[文档中](https://github.com/PaulUithol/Backbone-relational#known-problems-and-solutions)：

> **问**：（反向）关系或子模型似乎没有正确初始化（我正在使用 CoffeeScript！）
> 
> **答**：您可能使用的是语法`class MyModel extends Backbone.RelationalModel`而不是`MyModel = Backbone.RelationalModel.extend`. 这在 CoffeeScript 中具有优势，但也意味着`Backbone.Model.extend`不会被调用。相反，CoffeeScript 生成的代码通常可以实现大致相同的效果。但是，extend 也是 Backbone-relational 在定义`Backbone.RelationalModel`子类时设置关系和其他内容的方法。

真可惜，因为我喜欢 Coffeescript 的`extend`语法。如文档中所述，尝试不使用？

# google-maps - 防止谷歌地图信息窗口关闭

> ID：10683067
> 
> 赞同：0
> 
> 时间：2012-05-21T09:54:55.910
> 
> 标签：google-maps, google-maps-api-3, infowindow

如果在关闭 infoWindow 时满足某些条件，我想阻止触发的默认关闭事件。有可能实现吗？我尝试了很多方法，例如：

1.  停止事件传播
2.  从回调方法返回 false
3.  infoWindow 也没有任何方法/属性可以防止关闭。

请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:54:54.020

InfoWindow 并没有真正提供步进事件传播的方法。我不知道它是否适合您，但有一个[InfoBox 实用程序库](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)，它确实为您提供了更多的控制烤箱的行为。具体到您的问题，`InfoBoxOptions`[^(api-doc)](http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/docs/reference.html)对象包括属性：

`enableEventPropagation`, 一个布尔值，它将允许您控制是否`InfoBox`将：在 InfoBox 中传播 mousedown、click、dblclick 和 contextmenu 事件（默认为 false 以模仿 a 的行为`google.maps.InfoWindow`）。如果 InfoBox 被用作地图标签，则将此属性设置为 true。**iPhone注意：**此属性设置无效；事件总是被传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T13:21:57.587

你总是可以监听 close 事件，然后抛出一个 javascript 错误来阻止它关闭。前任：

```
google.maps.event.addListener(my_infoWindow, 'closeclick', function(e){
    // Throw an error to stop the close
    throw "stop close";
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T19:37:52.627

您唯一能做的就是抓住`closeclick`导致您无处可去的事件。

我曾经一起破解过一些东西，一个一次性的解决方案，它可能对你有用，也可能对你不起作用：我已经确定了一种到达用户单击关闭的 x 标记的方法，并将其删除。用户无法关闭 infoWindow。完全没有。您仍然可以通过调用 .close()。

**警告！这是一个黑客**

```
var a=document.getElementById('map_canvas');
var b=a.getElementsByTagName('img');
var i, j=b.length;
for (i=0; i<j; i++) {
  if(b[i].src.match('imgs8.png')){
    if(b[i].style.left=='-18px') {
      c=b[i].parentElement.parentElement;
      console.log(c);
      if(c.innerText.match("Map data")) {
        console.log('no');
      } else {
        b[i].parentElement.removeChild(b[i]);
      }
    }
  }
} 
```

现在。如果您存储对 [x] 标记的引用，您甚至可以随意打开和关闭它。

**编辑：**

[这个黑客的演示](http://stimulus.hk/demos/iwOnOff.html)

# c++ - C's -> 是否等同于 Objective-C 中的点表示法

> ID：10683072
> 
> 赞同：6
> 
> 时间：2012-05-21T09:55:09.853
> 
> 标签：c++, objective-c, c

我正在做 Box2D 编程，并且抬头，我对 C++ 和 C 完全是个菜鸟。我是一个 Objective-C 人，这就是为什么我很难理解这门语言。尤其：

```
-> 
```

基本上我知道这用于引用不同的方法或函数或变量/属性，如下所示：

```
body->GetWorld()->DestroyBody(body); 
```

这是否等同于 Objective-C 中的点表示法：

```
// made up example
[body.world destroyBody]; 
```

或者

```
[self destroyBody:body.world]; 
```

或者类似的东西？我真的不明白这个。有人可以告诉我这是什么。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T09:58:42.570

我不知道 Objective-C，但我可以解释 C 和 C++ 之间的区别`->`，`.`希望对您有所帮助。

`.`是允许您访问结构/类实例的成员的运算符。`a->b`与`(*a).b`- 所以它首先取消引用指针，然后访问指针指向的实例的成员。

此外，Luchian 提到了一个案例 -`operator->()`给定类的重载。如果您使用的类确实重载了此运算符，则行为会有所不同，由类定义 - 它几乎可以返回它想要的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:03:28.183

我对 Objective-C 了解不多，但我可以尝试为您提供一些有关 C++ 的帮助：假设您`Foo`在 C++ 中定义了一个类，并使用了一个方法`bar()`：

```
class Foo
{
public:
  void bar();
  ...
}; 
```

如果`Foo` **在堆栈上**分配 的实例，则使用**点表示法**( `.`) 调用该方法`bar()`：

```
Foo f;
f.bar(); 
```

如果您有一个**指向**的实例的指针`Foo`，则使用**箭头符号**( `->`) 来调用该方法`bar()`：

```
Foo* pf; // must point to some instance of Foo
pf->bar(); 
```

（更复杂的是，还有*引用*，它们具有值语法和指针语义：如果您有对`Foo`（例如`Foo& f`）的引用，您仍然使用点符号：`f.bar();`。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T11:07:04.707

不，用于`.`访问 Objective-C 属性与访问 C 和 C++ 中的结构和类成员不同。`->``.`

Objective-C 属性访问器对类型的值`id`（它是一个指针类型）起作用，但使用特殊的命名约定来决定它实际做什么。它可以直接访问属性数据成员，使其类似于`->`数据成员访问。或者它可以查找用于获取和/或设置属性值的特殊函数，在这种情况下，它是消息发送的语法糖。

除了 C++ 中运算符重载的情况外，`->`它始终与取消引用指针然后访问引用的成员相同。`a->b`相当于`(*a).b`。`b`可能是成员函数的数据成员，但被访问的成员将具有引用的确切名称`b`，而不是基于任何特殊命名约定的某种突变。如果`b`命名一个成员函数，那么它可能是一个虚函数，它与 Objective-C 中的消息发送有一些相似之处，但并不相同。`b`也可能是 C++ 中的重载成员函数，在 Objective-C 中没有等价物。

在 Objective-C 中添加用于访问对象属性的`.`语法违反了 Objective-C 的设计原则，即新功能应该看起来是新的。使用`@`、`[]`消息发送语法和定义 Objective-C 对象的特殊关键字是 Objective-C 之前遵循此设计原则的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T10:06:42.343

`.`用于访问对象成员，`->`用于通过指针访问成员。**通常**. `operator ->`可以重载，这意味着您也可以在对象上使用它：

```
struct X
{
   X* other;
   X* operator->() {return other;}
};

X x;
x->other; 
```

在这种情况下，`x->other`不指代`x.other`，而是指代`x.other.other`。:D

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T16:10:06.160

这是objective-c 代码。

```
@interface Foo : NSObject
{
  NSInteger _a;
}
@property (nonatomaic, assign) NSInteger a;
@end

@implement Foo
@synthesize a = _a;
@end 
```

你知道'@synthesize' 短语。@synthesize 创建波纹管代码。

```
- (NSInteger)a
{
  return _a;
}

- (void)setA:(NSInteger)aa
{
  return _a = aa;
} 
```

让我们访问属性 a。

```
void main()
{
  Foo foo = [[Foo alloc] init];
  foo.a = 1;
} 
```

必须将 foo.a 分配为 1。但编译器调用如下。

```
void main()
{
  Foo foo = [[Foo alloc] init];
  [foo setA:1];
} 
```

foo.a = 1 和 [foo setA:1] 是一样的。foo.a = 1 调用 [foo setA:1]。

贝娄，用 C 语言编写。

```
class Foo
{
private:
  int _a;
public:
  int getA();
  void setA(const int aa);
};

int Foo::getA()
{
   return _a;
}
void Foo::setA(const int aa)
{ 
   _a = aa;
}

// local allocation example.

void main()
{
  Foo foo;
  foo.setA(1);
}

// Heap allocation example.
void main()
{
   Foo *foo = new Foo();
   foo->setA(1);
   delete foo;
}

// Pointer (like object objectve-c).
void main()
{
   Foo foo1;
   foo1.setA(1);

   Foo *foo2 = &foo1;
   foo2->setA(2);

   printf("result>>> %d, %d", foo1.a, foo2->a); 
}

result>>>  2, 2 
```

foo1.a 和 foo2->a 也是 2。Objectve-C 示例如下。

```
void main()
{
   Foo *foo1 = [[Foo alloc] init];
   foo1.a = 1;

   Foo *foo2 = foo1;
   foo2.a = 2;

   NSLog(@"result>>> %d, %d", foo1.a, foo2.a);
}

result>>>  2, 2 
```

祝你有美好的一天。谢谢你。

# java - 如何在黑莓中使用 Vector<> 泛型

> ID：10683080
> 
> 赞同：0
> 
> 时间：2012-05-21T09:55:43.523
> 
> 标签：java, blackberry, vector

我正在将 android 代码移植到 BlackBerry..

下面是我的android代码片段..

```
 public Vector<InMapping> INMSGMAPPING;
 public Vector<InMapping> getINMSGMAPPING() {
    return INMSGMAPPING;
} 
```

上面的代码给出了休闲错误：

```
 generics are not supported in -source 1.3
 [exec] (use -source 5 or higher to enable generics) 
```

我知道发生上述错误是因为 BlackBerry 中不允许使用泛型。

是否有任何替代方法可以在 BlackBerry 中实现相同的功能。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:24:28.837

使用[Vectors](http://www.blackberry.com/developers/docs/4.5.0api/java/util/Vector.html)，并在元素检索中[转换](http://www.fluffycat.com/Java/Casting/)为您想要的任何类

# powershell - 在 Windows 7 脚本中，如何确定当前系统关闭是否实际上是重新启动？

> ID：10683082
> 
> 赞同：5
> 
> 时间：2012-05-21T09:55:55.467
> 
> 标签：powershell, windows-7, vbscript, shutdown, reboot

我使用 Windows 7（也是 Windows XP）的一部分的组策略编辑器来运行所谓的关闭脚本，每次系统关闭或重新启动时都会自动执行该脚本。我的问题是：我需要在我的脚本中知道用户是否选择了关闭系统，或者他是否选择了重新启动。这两个操作都会使 Windows 运行关闭脚本，但是在脚本执行期间如何确定实际执行了哪个操作？

在关机期间，有什么方法可以知道系统当前是执行关机还是重新启动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T12:12:37.000

在**pre-vista 系统上**，您可以查询**注册表**：

下找到的[关机设置](http://technet.microsoft.com/en-us/library/cc962586.aspx)DWORD`HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer`存储了从当前用户的 Shut Down Windows 对话框的列表中最近选择的设置。

在**更新的系统上**，您可以在关闭脚本中查询**系统事件日志，如下所示：**

```
$systemstateentry = get-eventlog -LogName system -Source User32 | ?{$_.eventid -eq 1074} | select -first 1

switch -regex ($systemstateentry.message) 
    { 
        ".*restart.*" {"restart"} 
        ".*power off.*" {"power off"} 
        default {"unknown"}
    } 
```

# c# - 在自己的 using 块中处理对象不是多余的吗？

> ID：10683086
> 
> 赞同：2
> 
> 时间：2012-05-21T09:56:13.220
> 
> 标签：c#

在对现有类进行编程时，我注意到有人写了这样的东西：

```
using(DisposableObject disp = new DisposableObject())
{
    ...
    ...

    disp.Dispose()
} 
```

然后我想知道： using 块不足以处理一个对象吗？在这种情况下，Dispose() 有什么用处吗？

因为这对我来说没有任何意义...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T09:57:03.767

`dispose`在您的情况下，在内部使用是没用的，`using`因为当`using`语句的范围结束时，它会自动调用`dispose`. 这就是为什么你只能在括号内编写实现`IDisposable`接口的对象。`using`

```
using(.......) 
```

而且如果有任何语句使用`disp`object之后`disp.Dispose()`它会报错，因为到那时object已经被释放，即它的内存已经被释放。

**但要小心**

如果是作用域结束`dispose`之前的最后一行，那么它是无用的。`using`

但是当后面有更多的行时，它也不是没用的`dispose`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:01:24.917

是的，一个 using 块实际上等同于以下的替代语法：

```
var d = new DisposableObject();
try
{
    d.DoSomething();
}
finally
{
    if(d != null)
         ((IDisposable)d).Dispose();
} 
```

请注意，它使用 finally 而不是“catch”之类的东西。finally 子句将始终被执行，即使有异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T09:58:14.000

`using`足够。没有理由打`Dispose`两次电话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:09:18.557

您可以在 using 块中使用 Dispose 有两个原因：

*   您想在 using 块结束之前处理对象。在这种情况下， using 块是一个“安全网”，即使发生异常，也可以确保您的对象将被释放。（使用的行为就像一个 try 块，它有一个 finally 块，您的对象被放置在其中）
*   打电话`Dispose`更清楚你在做什么。这是典型的，即

交易范围：

```
using(TransactionScope ts=new TransactionScope)
{
  ...
  if (cond)
  {
    ts.Complete();
  }
  else
  {
    ts.Dispose(); // makes it clear you're rolling back the transaction
  }
} 
```

这个调用`Dispose`它不是必需的，但它是“解释性的”。事务回滚更明显。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T02:35:11.613

@Nikhil Agrawal 是对的。我需要提到的一件事是当你实现 Idisposable 接口时，你应该确保它可以被多次调用。这意味着您应该进行一些验证。

# jquery - 如何调整简单模式对话框的大小

> ID：10683090
> 
> 赞同：0
> 
> 时间：2012-05-21T09:56:18.547
> 
> 标签：jquery, dialog, simplemodal

我正在尝试使 ericmmartin simplemodal 对话框更宽更高。我的要求是，如果内容很长，对话框将显示滚动条，它使用开箱即用的设置来实现。

如果我更改给定的 css 示例：#simplemodal-container {height:360px; 宽度：600 像素；说宽度：700px；内容只是向下溢出对话框。

如果我尝试在点击调用中设置宽度，如 Eric 的示例中所示： $("#sample").modal({ minHeight:400, minWidth: 600 });

(http://www.ericmmartin.com/projects/simplemodal/) 没有任何变化。请问有什么想法吗？理想情况下，如果内容长于 500 像素，我希望模态始终显示垂直滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T14:43:28.033

通过 CSS 为模态容器设置样式和大小。然后，当您通过 jQuery 实例化模态对话框时，使用“自动”大小选项动态处理对话框的大小。

就我而言，我们有多个模式对话框可以出现在同一页面上。由于 SimpleModal 对话框将包含模态容器，因此以全面的方式将宽度和高度应用于 simplemodal-container 类是不可行的。

这是我刚刚处理的示例标记。

```
<div id="accountCanceled" class="simplemodal-container">
    <div id="cancelWrap" class="box">
        <!-- Modal dialog markup goes here, all styled by an external CSS. -->
    </div>
</div> 
```

这是 CSS 的一部分，用于设置上面显示的 #cancelWrap div 的宽度。

```
#cancelWrap {
    width: 100%;
    max-width: 560px;
} 
```

这是相关的jQuery。

```
 $canceledAlert = $('#accountCanceled');
  $canceledAlert.modal(
     {  containerCss: {
           height: 'auto',
           width: 'auto',
        }
     }
  ); 
```

请记住将“自动”设置用引号括起来。

当显示此 SimpleModal 对话框时，它的容器将动态调整大小以适合 #cancelWrap div 的内容。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:00:47.303

设置模态`height`并`width`使其`auto`不显示滚动条并根据其中的内容自动调整大小。

**编辑**

让模态框有一个固定的高度和一个设置的 css 属性`overflow:scroll`

# php - 从选择 field1 插入 field1,field2，field2 仅填充 1 个字段

> ID：10683091
> 
> 赞同：1
> 
> 时间：2012-05-21T09:56:23.617
> 
> 标签：php, mysql

我正在从 插入表`SELECT field1, field2`，但仅填充了**field1**而不是 **field2。

```
$query_settings = 
    "INSERT INTO email_sent (field1, field2) 
     SELECT field1, field2 
     FROM field_id 
     WHERE id='$x'"; 
```

我可能会错过什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:07:52.410

检查各个`field2`列的数据类型：可能会发生一些隐式类型转换，从而截断数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:07:23.937

您应该始终在运行查询后检查该行，例如：

```
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0 
```

特别注意`Warnings`柜台；由于数据类型转换失败，您最终可能会得到`NULL`值，但这会在上面显示。

要显示警告：

```
SHOW WARNINGS; 
```

# javascript - 仅使用 javascript 将 HTML 转换为 PDF

> ID：10683095
> 
> 赞同：1
> 
> 时间：2012-05-21T09:56:40.450
> 
> 标签：javascript, jquery, jquery-plugins

有没有办法仅使用 javascript 将 HTML 页面转换为 PDF 文档？

我知道这可以使用 PHP 或 Java 等来完成，但我没有选择在我的项目中使用这些语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:38:24.323

免责声明：我隶属于[ByteScout](http://bytescout.com/)

Bytescout 有新的 javascript 产品“PDF Generator SDK for Javascript”，它能够在客户端 100% 生成 PDF 文件，可能您可以生成带有文本、图像、图形的 PDF。不支持完整的 HTML 格式，但您可以在文本中使用 <b>、<i>、<u> html 标签来使用富格式（新版本将支持文本中的 <font> 和 <a href> html 标签）

生成带有徽标和表格的发票演示：http: [//bytescout.com/products/developer/pdfgeneratorsdkjs/create_pdf_invoice_javascript.html](http://bytescout.com/products/developer/pdfgeneratorsdkjs/create_pdf_invoice_javascript.html)

# c - 如何在linux中获得这种点击运行效果？

> ID：10683098
> 
> 赞同：1
> 
> 时间：2012-05-21T09:56:42.393
> 
> 标签：c, windows, linux

我有交流程序

```
#include <stdio.h>

int main ()
{
  printf("Hello");
} 
```

**在 Windows 上：**

我在 Windows 上编译该程序并获得**a.exe**

现在当我`double-click`在**a.exe**

命令窗口打开

**a.exe**运行

并自动关闭该窗口。

为了克服这个我有两个解决方案

1> 创建一个`batch`包含以下内容的文件：

```
a.exe
pause 
```

2> 或`getch()`在我的代码中添加函数

**在 Linux 上**

现在我希望在 linux 中发生同样的事情

我已经在 linux get **a.out**上编译了那个程序，每当我点击它时什么都没有发生？

我制作了一个 shell 脚本：

```
#!/bin/bash

./a.out &

pause 
```

并通过单击它来运行该脚本，但仍然没有任何反应？

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:02:18.187

你没有看到的是它根本不会打开任何东西。该程序将在后台安静地执行。

为了使输出可见，您需要制作一个 shell 脚本来在终端中运行程序，这可以很简单：

```
#!/bin/bash
gnome-terminal -x "`dirname \"$0\"`"/a.out 
```

将脚本标记为可执行文件，现在您应该能够双击它并在终端窗口中看到您的程序打开了。请注意，将程序绑定到特定的终端仿真器（如`gnome-terminal`）可能是一个坏主意，您应该重新考虑为什么需要这种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:00:44.657

Linux 没有区分终端和 GUI 应用程序。

您需要做的是实际配置程序以在终端中运行，或者只是运行终端并在其中执行程序。

# iphone - 如何显示 UITableViewCellAccessoryCheckmark

> ID：10683100
> 
> 赞同：0
> 
> 时间：2012-05-21T09:56:46.613
> 
> 标签：iphone, ios, uitableview, ios4, edit

我有一个表格视图，其中包含用户选择的选项列表（这是一个编辑页面）。

表格视图如下所示

> 苹果 `UITableViewCellAccessoryCheckmark`
> 
> 橙子 `UITableViewCellAccessoryNone`
> 
> 菠萝 `UITableViewCellAccessoryCheckmark` 香蕉
> `UITableViewCellAccessoryNone`

```
- (void)viewDidLoad {

  self.mySavedFruitsArray = [myDBOperations getMyFruitsList:[appDelegate getDBPath]:self.myId];

}

/ Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath
//-------------------------------------------------------------------------------
{
    static NSString *CellIdentifier = @"PoemTypeCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"MyIdentifier"]autorelease];

    }

   NSDictionary *aDict = [self.myFruitsArr objectAtIndex:indexPath.row];
   NSString *aValue = [aDict objectForKey:@"value"];
   NSString *aId = [aDict objectForKey:@"key"];
   cell.textLabel.text = aValue;
   cell.accessoryType = UITableViewCellAccessoryNone;

   NSDictionary *aSavedDict = [self.mySavedFruitsArray objectAtIndex:indexPath.row];
    NSString *Value = [aSavedDict objectForKey:@"value"];
    NSString *Id = [aSavedDict objectForKey:@"key"];
    if ( aId == Id ){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }    

  return cell;

} 
```

`mySavedFruitsArray`- 它保存用户选择的水果。

`myFruitsArr`- 这有常见的水果清单

现在我想知道如何显示`UITableViewCellAccessoryCheckmark`与`mySavedFruitsArray`.

我的意思是，在这个编辑视图中，我想显示带有用户选择选项的水果列表。

请让我知道该怎么做。

我试过这样，但没有用。

```
/ Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
(NSIndexPath *)indexPath
//-------------------------------------------------------------------------------
{
    static NSString *CellIdentifier = @"PoemTypeCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"MyIdentifier"]autorelease];

    }

   NSDictionary *aDict = [self.myFruitsArr objectAtIndex:indexPath.row];
   NSString *aValue = [aDict objectForKey:@"value"];
   NSString *aId = [aDict objectForKey:@"key"];
   cell.textLabel.text = aValue;
   cell.accessoryType = UITableViewCellAccessoryNone;

   NSDictionary *aSavedDict = [self.mySavedFruitsArray objectAtIndex:indexPath.row];
    NSString *Value = [aSavedDict objectForKey:@"value"];
    NSString *Id = [aSavedDict objectForKey:@"key"];
    if ( aId == Id ){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }    

  return cell;

} 
```

请注意 self.mySavedFruitsArray 可能不总是等于 myFruitsArr （因为用户只能选择一种水果）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:01:13.273

```
if ( aId == Id ){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    } 
```

字符串比较是错误的。您应该以这种方式比较字符串：

```
if([aId isEqualToString:Id]) {
....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:01:33.873

而不是检查 if ( aId == Id ) 比较字符串作为相同的对象，使用 if ([aID isEqualToString:Id]) 比较字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-08T23:55:15.130

在昨天（2014 年 6 月 8 日）下载的版本中，`UITableViewCellAccessoryCheckmark`无效`UITableViewCellAccessoryNone`。它为我抛出了编译器错误。我认为您应该将其用作枚举，如下所示：

```
 if item.completed {
        cell!.accessoryType = UITableViewCellAccessoryType.Checkmark
    } else {
        cell!.accessoryType = UITableViewCellAccessoryType.None
    } 
```

通过此更改，我的代码编译并且行为出现在模拟器中。抱歉，我不知道要查找哪个版本（UIKit？），我是 iOS 开发新手。

# ruby - 将多个变量与单个表达式中的值进行比较

> ID：10683108
> 
> 赞同：7
> 
> 时间：2012-05-21T09:57:19.210
> 
> 标签：ruby, variables

我有两个变量`a`和`b`. 我想比较两者`a`和`b`一个值，比如说`10`。

我可以这样做：

```
10 == a && 10 == b 
```

但是，我想知道是否有任何方法可以将它写成一个表达式？（例如喜欢`a == b == 10`）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T10:19:36.610

```
[a,b,3].all? {|x| x==10} 
```

但在这种情况下

```
[].all? {|x| x==10} 
```

也将返回 true

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:30:46.943

在来自 aztaroth 的评论后更新：

```
[a,b].uniq == [10] 
```

# xcode - 如何在 iOS5 中调试

> ID：10683113
> 
> 赞同：0
> 
> 时间：2012-05-21T09:57:48.210
> 
> 标签：xcode, ios5

我在我的应用程序的某些行放置了断点，当我运行应用程序时它没有调试，即我的应用程序没有在断点处停止......

谁能告诉我如何在iOS5中启用调试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:52:13.750

显示断点导航器 -> 添加异常断点 -> 完成

# android - android_app->activity->internalDataPath 在 2.3.8 NDK r8 中仍然为 NULL

> ID：10683119
> 
> 赞同：7
> 
> 时间：2012-05-21T09:58:11.260
> 
> 标签：android, android-ndk, android-ndk-r7

为了说明我在哪里测试，HTC Desire S、Android 2.3.5 和 ndk-r8。

我在 ndk-r7b 和 ndk-r8 中使用 android_app->activity->internalDataPath 或 externalDataPath 访问本地读写目录时遇到问题，因为它们都是 NULL。我看到这已在以前的版本中发布，并且根据这篇文章更新将解决此问题：-

[如何使用 NativeActivity 写入内部存储文件系统？](https://stackoverflow.com/questions/6525724/how-do-i-write-to-the-internal-storage-file-system-with-nativeactivity)

现在也许这在 Ice Cream Sandwich 中得到了修复，但这远非理想，因为我的工具链完美地支持向后兼容性以捕捉那些不更新的人。所以我的问题是有一个已知的修复还是我必须手动添加像“/data/data/com.example.mytest/files/somefile.dat”这样的目录结构，直到它修复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-23T18:47:22.407

以下来自 NDK 的作品不使用 Java：

```
const char* path = app->activity->internalDataPath;
if (!path) {
    JNIEnv* jni;
    app->activity->vm->AttachCurrentThread(&jni, NULL);

    jclass activityClass = jni->GetObjectClass(app->activity->clazz);
    jmethodID getFilesDir = jni->GetMethodID(activityClass, "getFilesDir", "()Ljava/io/File;");
    jobject fileObject = jni->CallObjectMethod(app->activity->clazz, getFilesDir);
    jclass fileClass = jni->GetObjectClass(fileObject);
    jmethodID getAbsolutePath = jni->GetMethodID(fileClass, "getAbsolutePath", "()Ljava/lang/String;");
    jobject pathObject = jni->CallObjectMethod(fileObject, getAbsolutePath);
    path = jni->GetStringUTFChars((jstring)pathObject, NULL);

    jni->DeleteLocalRef(pathObject);
    jni->DeleteLocalRef(fileClass);
    jni->DeleteLocalRef(fileObject);
    jni->DeleteLocalRef(activityClass);

    app->activity->vm->DetachCurrentThread();
} 
```

# html - 精灵右对齐

> ID：10683122
> 
> 赞同：1
> 
> 时间：2012-05-21T09:58:17.297
> 
> 标签：html, css

即使我的`#tbr`div **align**设置为**right**，sprite 仍保持向左对齐。任何想法为什么？

普通文本、链接和图像工作正常。（向右对齐，右边距为 20px，就像它应该的那样）。

**HTML：**

```
<div id="topbar">
<div id="tbl">abc</div>
<div id="tbc">center</div>
<div id="tbr">
<div id="bar">
<a href="#" id="sound"></a>
</div>
</div>
</div> 
```

**CSS：**

```
#topbar {

    width:100%;
    height:36px;
    padding-top:12px;
    background-color:#e7e6e6;
    border-top:1px solid #d0cdcd;
    border-bottom:1px solid #d0cdcd;

}

#tbl {float:left; width: 30%; text-align:left; padding-left:20px;}
#tbc {display:inline-block; text-align:center; width: 30%;}
#tbr {float:right; width: 30%; text-align:right; padding-right:20px;}

#bar {margin-top:-5px;}

#bar a {

    height:35px;
    display:block;
    background-image:url(http://goo.gl/yLbQ9);
    float:left;
}

#sound {width:35px; background-position:0 0;} 
```

> **JSFIDDLE：http: [//jsfiddle.net/B4n9T/](http://jsfiddle.net/B4n9T/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:05:11.253

不确定我是否完全关注你，但我认为这可能是你的问题

```
#bar a {
    height:35px;
    display:block;
    background-image:url(http://goo.gl/yLbQ9);
    float:left; //you want this to be right
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:02:29.277

[http://jsfiddle.net/B4n9T/3/](http://jsfiddle.net/B4n9T/3/)

以下是它的修复方法：

位置：相对；在#tbr 上并阻止它再次被错误定位，我设置了宽度：自动；也在上面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:05:02.577

[看到这个](http://jsfiddle.net/B4n9T/4/)

这是你想要的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:18:07.110

只要给你**浮动：对**你**#bar**这样的： -

```
#bar a {

    height:35px;
    display:block;
    background-image:url(http://goo.gl/yLbQ9);
    float:right;
} 
```

我希望这会对你有所帮助....查看演示：- [http://jsfiddle.net/B4n9T/5/](http://jsfiddle.net/B4n9T/5/)

# amazon-s3 - Amazon Elastic MapReduce - 从 S3 到 DynamoDB 的大量插入非常慢

> ID：10683136
> 
> 赞同：17
> 
> 时间：2012-05-21T09:58:58.057
> 
> 标签：amazon-s3, hive, amazon-dynamodb, amazon-emr

我需要将大约 1.3 亿个项目（总共 5+ Gb）初始上传到单个 DynamoDB 表中。在我遇到使用应用程序中的 API 上传它们的[问题](https://stackoverflow.com/questions/10682797/ridiculously-slow-writes-to-amazon-dynamodb-php-api)后，我决定尝试使用 EMR。

长话短说，即使在最强大的集群上，导入非常平均（对于 EMR）的数据量也需要很长时间，花费数百小时而几乎没有进展（大约 20 分钟来处理测试 2Mb 数据位，并且没有管理在 12 小时内完成测试 700Mb 文件）。

我已经联系了 Amazon Premium Support，但到目前为止他们只告诉“由于某种原因 DynamoDB 导入速度很慢”。

我在交互式配置单元会话中尝试了以下说明：

```
CREATE EXTERNAL TABLE test_medium (
  hash_key string,
  range_key bigint,
  field_1 string,
  field_2 string,
  field_3 string,
  field_4 bigint,
  field_5 bigint,
  field_6 string,
  field_7 bigint
)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '|'
LOCATION 's3://my-bucket/s3_import/'
;

CREATE EXTERNAL TABLE ddb_target (
  hash_key string,
  range_key bigint,
  field_1 bigint,
  field_2 bigint,
  field_3 bigint,
  field_4 bigint,
  field_5 bigint,
  field_6 string,
  field_7 bigint
)
STORED BY 'org.apache.hadoop.hive.dynamodb.DynamoDBStorageHandler'
TBLPROPERTIES (
  "dynamodb.table.name" = "my_ddb_table",
  "dynamodb.column.mapping" = "hash_key:hash_key,range_key:range_key,field_1:field_1,field_2:field_2,field_3:field_3,field_4:field_4,field_5:field_5,field_6:field_6,field_7:field_7"
)
;  

INSERT OVERWRITE TABLE ddb_target SELECT * FROM test_medium; 
```

各种标志似乎没有任何明显的效果。尝试了以下设置而不是默认设置：

```
SET dynamodb.throughput.write.percent = 1.0;
SET dynamodb.throughput.read.percent = 1.0;
SET dynamodb.endpoint=dynamodb.eu-west-1.amazonaws.com;
SET hive.base.inputformat=org.apache.hadoop.hive.ql.io.HiveInputFormat;
SET mapred.map.tasks = 100;
SET mapred.reduce.tasks=20;
SET hive.exec.reducers.max = 100;
SET hive.exec.reducers.min = 50; 
```

为 HDFS 而不是 DynamoDB 目标运行的相同命令在几秒钟内完成。

这似乎是一个简单的任务，一个非常基本的用例，我真的想知道我在这里做错了什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T11:19:38.850

这是我最近从 AWS 支持那里得到的答案。希望对遇到类似情况的人有所帮助：

> EMR 工作人员目前被实现为单线程工作人员，其中每个工作人员一个接一个地写入项目（使用 Put，而不是 BatchWrite）。因此，每次写入消耗 1 个写入容量单位 (IOP)。
> 
> 这意味着您正在建立大量连接，这会在一定程度上降低性能。如果使用 BatchWrites，这意味着您可以在一次操作中最多提交 25 行，这将降低性能成本（但如果我理解正确，价格相同）。这是我们所知道的，并且可能会在未来的 EMR 中实施。但我们无法提供时间表。
> 
> 如前所述，这里的主要问题是您在 DynamoDB 中的表已达到预置吞吐量，因此请尝试暂时增加它以进行导入，然后随意将其降低到您需要的任何水平。
> 
> 这听起来可能有点方便，但是当您执行此操作时警报出现问题，这就是您从未收到警报的原因。此后问题已得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-23T19:40:14.677

上周我也遇到了同样的问题。我做了一些注释来缩短在 DynamoDB 中写入数据的时间

1.  查找输入文件，如果它们被压缩，Hive 不能拆分超过文件的数量，您将减少可能的映射器数量。

2.  将 reducer 的数量设置为 1 或 -1，看起来他们并没有使用太多，它会为映射器打开插槽。

3.  在 dynamodb 中，如果您使用提供的容量，则需要设置要使用的 wcu 数量。请记住，hive 将尽量不消耗超过 dynamodb.throughput.write.percent 中的百分比。如果您使用自动缩放，请将 write.percent 设置为最高目标百分比以保证它会缩放。或者按需放置，不用担心这个，但它更贵。

4.  您可以更改实例的内存配置以尝试获取更多映射器，在上面的页面中可以查看默认配置，使其更改 mapreduce.map.memory.mb 和 mapreduce.reduce.memory.mb。请注意这里可能会出现内存不足错误。 [https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-hadoop-task-config.html](https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-hadoop-task-config.html)

一些相关链接

[http://cloudsqale.com/2018/10/22/tez-internals-1-number-of-map-tasks/](http://cloudsqale.com/2018/10/22/tez-internals-1-number-of-map-tasks/)

[https://github.com/awslabs/emr-dynamodb-connector](https://github.com/awslabs/emr-dynamodb-connector)

[https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.PerformanceTuning.Mappers.html](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.PerformanceTuning.Mappers.html)

# php - JavaScript 或 PHP 算法书

> ID：10683138
> 
> 赞同：1
> 
> 时间：2012-05-21T09:59:12.413
> 
> 标签：php, javascript, algorithm

我看过一些关于算法的书籍，例如：

*   算法简介
*   算法设计手册
*   算法简述
*   ETC

但它们中的大多数都是 C/C++ 或我不知道的语言。我知道算法是要掌握的通用主题，但是由于我不了解 C/C++，因此我很难做到。

有没有用 JavaScript 或 PHP 编写的例子的算法书？我在谷歌上搜索，但没有找到书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:31:28.017

这是一本学习算法的好书：

算法导论，第二版，作者：Cormen, Leiserson, Rivest & Stein

只说一句，如果你想学习算法，javascript和PHP都不是最好的选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:01:15.870

JM Muller，基本函数、算法和实现。Birkhäuser，波士顿，1997 年 [第二版于 2005 年出版]

P. Markstein，IA-64 和基本函数：速度和精度。Prentice Hall, 2000 [最先进的算法不仅适用于安腾]

SL Moshier，数学函数的方法和程序。E. Horwood, Chichester, England, 1989 [作者：Cephes 图书馆，www.netlib.org/cephes/]

W. Cody 和 W. Waite，基本功能软件手册。Prentice Hall，恩格尔伍德悬崖，新泽西州，1980

JF Hart 等人，计算机近似。John Wiley and Sons，纽约，1968 年 [RE Krieger Publishing 于 1978 年重印并更正]

LA Lyusternik、OA Chervonenkis 和 AR Yanpol'skii，《计算初等函数手册》。佩加蒙出版社，牛津，1965 年。

C. 黑斯廷斯，数字计算机的近似值。普林斯顿大学出版社，新泽西州普林斯顿，1955 年

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:04:46.350

C 喜欢计算机语言中的英语。您可能不需要在工作中直接使用它。但有时您需要将其仅用于通信。最好学习一些C知识。在中国，大多数大学生都会学习C作为一项基本技能。也许不是最近。:)

# android - 我想向 google-analytics 发送信息

> ID：10683139
> 
> 赞同：-5
> 
> 时间：2012-05-21T09:59:16.747
> 
> 标签：android

我想向 google-analytics 发送数据，请告诉我如何在 android 中向 google-analytics 发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:05:43.143

您需要获取 GoogleAnalytics jar。

[https://developers.google.com/analytics/devguides/collection/android/resources](https://developers.google.com/analytics/devguides/collection/android/resources)

在 google 上设置您的帐户以及您的应用启动时：

[https://developers.google.com/analytics/devguides/collection/android/devguide](https://developers.google.com/analytics/devguides/collection/android/devguide)

```
 //Google analytics
    tracker = GoogleAnalyticsTracker.getInstance();
    tracker.setDebug(true);
    tracker.startNewSession("UA code",10, this); 
```

跟踪（例如事件）：

```
tracker.trackEvent("landing.login", "tap", "login", 0); 
```

# java - 为什么我将 en_US 作为默认语言环境？

> ID：10683143
> 
> 赞同：0
> 
> 时间：2012-05-21T09:59:42.757
> 
> 标签：java, locale

> **可能重复：**
> [Java 7 默认语言环境](https://stackoverflow.com/questions/7107972/java-7-default-locale)

当我打印`Locale.getDefault()`时，我得到`en_US`.

在我的系统上，我将时区设置为`(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna`.

在“控制面板-> 区域和语言”中，区域为`Italian(Italy)`.

为什么我将语言环境设置为 en_US？

# c - '{' 标记 c 程序之前的预期表达式

> ID：10683147
> 
> 赞同：1
> 
> 时间：2012-05-21T09:59:53.563
> 
> 标签：c, syntax-error

我写了以下代码我正在解决一个难题，我在编译这部分代码时

```
#include <stdio.h>
int main ()
{

int a[10],b[10],c[10];
int i,j,k,l;
 a[10]={"21","33","12","19","15","17","11","12","34","10"};
 b[10]={"10","15","9","13","16","21","15","32","29","7"};
 c[10]={"11","8","3","6","1","4","6","20","19","3"};

 l=sizeof(a)/sizeof(a[0]);

for (i=0;i<=l;i++)
 {
 }
} 
```

给我错误

```
array.c: In function ‘main’:
array.c:7:8: error: expected expression before ‘{’ token
array.c:8:8: error: expected expression before ‘{’ token
array.c:9:8: error: expected expression before ‘{’ token 
```

为什么这里会出现错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:03:59.293

您的代码中有几个问题：

1.  您应该在声明它们的同一行中初始化数组
2.  您必须使用数字数组初始化它们，而不是使用 c 字符串数组：
3.  您实际上尝试将值设置为数组的第 11 个元素。

正确的代码行将是：

```
int a[10] = {21,33,12,19,15,17,11,12,34,10}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:03:56.983

您正在将数组的**第十一个**元素设置为数组。

试试这个：

```
int a[10] = {21,33,12,19,15,17,11,12,34,10}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:04:32.957

*   类型不匹配：您将字符文字字符串设置为`int`s。这是一个禁忌。

*   您正在访问数组末尾的一个 - 一个经典的一对一错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:04:47.943

这是 int 数组，不要把 qoutes 放在数字上

```
c[10]={11,8,3,6,1,4,6,20,19,3}; 
```

# visual-studio-2010 - 为资源文件构建 dll 时出错 --error CVT1100: 重复资源。类型：DIALOG，名称：4159，语言：0x0409

> ID：10683148
> 
> 赞同：0
> 
> 时间：2012-05-21T10:00:19.467
> 
> 标签：visual-studio-2010, dll, resource-files

我试图从资源文件创建 dll。我有超过 1 个 .rc 文件并希望包含在 dll 中。但我收到以下错误

错误 CVT1100：重复资源。类型：DIALOG，名称：4159，语言：0x0409 错误 LNK1123：转换为 COFF 期间失败：文件无效或损坏。

我搜索了很多，但仍然无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:13:31.997

我的项目中可能遇到了同样的问题（但我使用了 Visual Studio 2008）。在我的情况下，问题是在“项目属性/链接器/清单文件/生成清单”中，当处于“调试”模式时，设置应该是“否”（设置为“是”会产生完全相同的错误） - 但是在“发布”模式设置应为“是”。

# sql - 一个查询中的多个查询

> ID：10683149
> 
> 赞同：-2
> 
> 时间：2012-05-21T10:00:35.403
> 
> 标签：sql, ms-access

我有个问题：

是否可以在一个查询中收集多个查询？

即在表单中我有 10 个这样的查询：

```
1\.  SELECT ThisValue FROM thatTable1 WHERE
2\.  SELECT ThisValue FROM thatTable2 WHERE
                 .......
10\.      SELECT ThisValue FROM thatTable10 WHERE 
```

我应该在哪里编写，即在 Access 中编写此代码。它可能在 Access 中，或者只有我可以在 MS SQL 中这样做，并且......

```
CREATE PROC dbo.proc_app_CollectControlData
AS
    SET NOCOUNT ON

    DECLARE @t TABLE
    (
      CONTROLNAME   nvarchar(74),
      CONTROLVALUE  nvarchar(255)
    )

    -- Now we collect the data for the 10 different controls
    INSERT INTO @t
    (CONTROLNAME, CONTROLVALUE)
    SELECT 'MyFirstControl',
            ThisValue
    FROM dbo.ThatTable
    WHERE Condition1

    ...

    INSERT INTO @t
    (CONTROLNAME, CONTROLVALUE)
    SELECT 'MyTenthControl',
            ThisValue
    FROM dbo.ThatTable
    WHERE Condition10

    -- And now we return all found data to the client
    SELECT * FROM @
    SET NOCOUNT OFF
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:02:49.620

```
SELECT ThisValue FROM thatTable1 WHERE ...
UNION ALL
SELECT ThisValue FROM thatTable2 WHERE ...
UNION ALL
SELECT ThisValue FROM thatTable10 WHERE ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:03:33.403

我认为您正在寻找[UNION Operator](http://www.w3schools.com/sql/sql_union.asp)。

```
SELECT  'MyFirstControl' AS ControlName, ThisValue AS ControlValue
FROM    thatTable1 
WHERE   Condition1 
UNION ALL
SELECT  'MySecondControl' AS ControlName, ThisValue AS ControlValue
FROM    thatTable2
WHERE   Condition2
UNION ALL
SELECT  'MyThirdControl' AS ControlName, ThisValue AS ControlValue
FROM    thatTable3
WHERE   Condition3 
```

# logging - fwrite 被另一个进程删除的文件

> ID：10683152
> 
> 赞同：1
> 
> 时间：2012-05-21T10:00:46.830
> 
> 标签：logging, fwrite

```
fwrite(str, strlen(str), 1, g_poFp); 
```

这是一个日志文件。我的进程使用`fwrite`. 但是今天该文件被某人删除了。我的问题是，如何编写代码来监控删除操作！

# vba - Select the radio buttons of “Create handouts in Microsoft Word” in Powerpoint 2007

> ID：10683155
> 
> 赞同：1
> 
> 时间：2012-05-21T10:00:59.030
> 
> 标签：vba, powerpoint, powerpoint-2007

How can I write a macro in Powerpoint to select any option (Radio Button) that is displayed when you call "Create Handouts in Microsoft Word" (Office Button-> Publish -> Create Handouts in Microsoft)?

The macro to call "Create Handouts in Microsoft Word" is

```
Application.CommandBars.ExecuteMso ("CreateHandoutsInWord") 
```

But I need to know how to write the macro to select the options (like "Notes Next to slide" , "Blank Lines next to line", "Notes below slides" etc...) from the window that would be displayed when you call the above macro.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:04:03.267

The solution for the above question is:

```
Application.CommandBars.ExecuteMso ("CreateHandoutsInWord")
SendKeys "{TAB}", True
SendKeys "{TAB}", True
SendKeys "{DOWN}", True      'Repeat as required...
SendKeys "{ENTER}", False here 
```

See [http://msdn.microsoft.com/en-us/library/aa202943(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa202943(v=office.10).aspx) for more details

# c - C: vsprintf 覆盖一个数组

> ID：10683158
> 
> 赞同：0
> 
> 时间：2012-05-21T10:01:06.857
> 
> 标签：c, overwrite, printf

我在使用函数 vsprintf 时遇到问题。

我有 3 个函数来打开、关闭和写入 XML 文件。open 函数将输入文本的第一个单词存储在一个数组中，close 函数关闭带有该单词的标签。问题是我存储要使用的关闭标记的数组在每次调用打开或写入函数时都会被覆盖（即使写入函数没有对用于存储关闭标记的数组的任何引用）。

```
int xml_level = 0;
char *xml_header[64];
FILE *xml_out;

void xmlopen(const char *format, ...){
   char buffer[256];
   va_list arglist;
   va_start(arglist,format);
   vsprintf(buffer,format,arglist);
   va_end(arglist);
   int i;
   for(i=0; i<xml_level; i++){
      fprintf(xml_out,"\t");  
   }
   fprintf(xml_out,"<%s>\n",buffer);
   xml_header[xml_level] = strtok (buffer, " ");
   xml_level++;
}

void xmlclose(){
   xml_level--;
   int i;
   for(i=0; i<xml_level; i++){
      fprintf(xml_out,"\t");  
   }
   fprintf(xml_out,"</%s>\n",xml_header[xml_level]);
}

void xmlwrite(const char *format, ...){
   char buffer[256];
   va_list arglist;
   va_start(arglist,format);
   vsprintf(buffer,format,arglist);
   va_end(arglist);
   int i;
   for(i=0; i<xml_level; i++){
      fprintf(xml_out,"\t");  
   }
   fprintf(xml_out,"<%s/>\n",buffer);
} 
```

使用示例：

```
xmlopen("Hello Word");
xmlopen("Foo Bar");
xmlwrite("Potato");
xmlwrite("Sentence longer than the other ones");
xmlclose();
xmlclose(); 
```

输出示例：

```
<Hello Word>
        <Foo Bar>
                <Potato/>
                <Sentence longer than the other ones/>
        </Sentence longer than the>
</Sentence longer than the> 
```

它应该在哪里：

```
<Hello Word>
        <Foo Bar>
                <Potato/>
            <Sentence longer than the other ones/>
        </Foo>
</Hello> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:16:09.537

你的问题是你只有一个局部变量被调用`buffer`，`xmlopen`你（a）存储指向它的指针以在函数外部使用（未定义的行为）和（b）试图在多个调用中使用它（逻辑错误）。

您需要为返回的字符串*分配存储空间*`strtok`，并确保稍后处理它们，例如更改：

```
xml_header[xml_level] = strtok (buffer, " "); 
```

到：

```
char * s = strtok(buffer, " ");
if (s != NULL)
{
    xml_header[xml_level] = strdup(s);
} 
```

（稍后在不再需要这些字符串时处理这些字符串，留给读者作为练习。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:04:15.130

**解决方案**

更改此行：

```
xml_header[xml_level] = strtok (buffer, " "); 
```

到

```
xml_header[xml_level] = strdup (strtok(buffer, " ")); 
```

并记住在程序退出时释放 xml_headers。

**[更新]** 当然，您还需要检查可能的极端情况，例如`strtok`退货`NULL`等...

**解释**

`strtok`不会为返回的令牌分配额外的存储空间。我个人的怀疑是，它会用`\0` **in place**替换分隔符，并每次都将指针返回到下一个标记的开头。

请注意，在您的代码中，您在开头和开头都分配了 256 字节的缓冲区`xmlopen`，`xmlwrite`并记得该缓冲区将在堆栈中分配。`xmlopen`所以在你对or的调用中`xmlwrite`，`buffer`实际上会指向同一个地址（你可以打印它的值来验证这个`printf("buffer is %p\n", buffer)`，它`0xbff2481c`在我的机器上）。

首先，您调用`xmlopen("Hello World")`，`xml_header[0]`并将指向`"Hello"`，这也是 的开始`buffer`。然后你调用`xmlopen("Foo Bar")`，并且`xml_header[1]`会指向`"Foo"`，这也是开始的`buffer`。然后你打电话`xmlwrite("Portato")`和`xmlwrite("Sentence longer than the other ones")`。请注意，此时，`xml_header[1]`仍指向 的开始`buffer`，现在是`"Sentence longer than the other ones"`。因此，当您调用 时`xmlclose()`，它将打印出该句子而不是您预期的令牌，该令牌将被您以后的缓冲区覆盖。

有趣的是，如果您在 和 中分配不同的缓冲区大小`xmlopen`，`xmlwrite`例如 256 字节`xmlopen`和 128 字节`xmlwrite`，那么您会看到`xmlclose`会打印出一些不可读的混乱代码。

`xml_header[0], xml_header[1]`您可以通过检查（例如，打印）和的值来验证所有这些`buffer`。

# asp.net - httpErrors 在本地机器上显示 500 错误而不是 YSOD

> ID：10683159
> 
> 赞同：5
> 
> 时间：2012-05-21T10:01:07.717
> 
> 标签：asp.net, error-handling, webforms, ysod

我`httpErrors`在我的网站中使用 web.config 来处理 404 错误。在我添加到节点之前，这无法正常工作，`existingResponse="Replace"`但现在我的本地开发机器上没有出现任何黄屏死机错误。

```
<httpErrors errorMode="Custom" existingResponse="Replace" >
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" prefixLanguageFilePath="" path="/error.aspx?c=404" responseMode="ExecuteURL" />
 </httpErrors> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T22:50:32.943

尝试将`existingResponse`值更改为`Auto`. 这对我有用。我现在可以使用自定义 404 页面，同时还可以看到黄屏死机错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-09T19:24:54.860

您应该将`errorMode`属性设置为`DetailedLocalOnly`. 这将允许您在从远程机器访问您的网站时查看本地环境中的 YSOD 和 httpErrors

# sql - 将 MS Access 2010 查询转换为 SQLite 查询

> ID：10683160
> 
> 赞同：0
> 
> 时间：2012-05-21T10:01:09.433
> 
> 标签：sql, sqlite, ms-access

我在 MS Access 数据库中有一个查询。我想在 SQLite 数据库中运行这个查询。我想知道是否有一种简单的方法来转换代码或只是一步一步地改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:23:50.223

您有几个选项可用于查看 sqlite 数据库的内容并对其运行查询。从源代码构建 sqlite 时，您可以选择构建 shell 实用程序。

如果你想要更多的交钥匙，你可以安装一个免费的工具，比如[Sqlite Manager](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/) for Firefox 或[Sqlite Browser](http://sqlitebrowser.sourceforge.net/)。

在这两个应用程序中，您都可以复制并粘贴要针对 SQLITE 数据库文件执行的 SQL。祝你好运！

# asp.net - 使用连接更新查询

> ID：10683166
> 
> 赞同：-1
> 
> 时间：2012-05-21T10:01:27.623
> 
> 标签：asp.net, gridview

```
UPDATE project_phases p2 
SET 
  p2.ClartiyID = @ClarityID,
  p2.Start_date = @start_date,
  p2.End_date = @End_date,
  p2.Planned_efforts = @Planned_efforts 
FROM 
  WSR.dbo.project_phases p2 
  INNER JOIN WSR.dbo.tb_Project p1 ON p1.ProjectID=p2.ProjectID 
WHERE 
  ProjectID = @ProjectID 
```

但是即使找到该表，错误仍然显示，例如找不到对象名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:06:45.233

如果这是您的全部查询，为什么要链接到 tb_Project？似乎这只是为了过滤 ProjectID，但此列在 Project_Phases 中，所以你不能忘记 INNER JOIN 并只使用：

```
UPDATE project_phases 
SET 
  ClartiyID = @ClarityID,
  Start_date = @start_date,
  End_date = @End_date,
  Planned_efforts = @Planned_efforts 
WHERE 
  ProjectID = @ProjectID 
```

# dependency-injection - 依赖注入 + 环境上下文 + 服务定位器

> ID：10683169
> 
> 赞同：2
> 
> 时间：2012-05-21T10:01:44.127
> 
> 标签：dependency-injection, service-locator, cross-cutting-concerns

最近我读了很多关于应用程序设计模式的东西：关于 D​​I、SL 反模式、AOP 等等。原因——我想在设计上做出妥协：松散耦合、干净且易于使用。DI 似乎几乎是一种解决方案，除了一个问题：横切和可选依赖导致构造函数或属性污染。因此，我为此提出了自己的解决方案，**我想知道您**对此有何看法。

Mark Seemann（DI 书籍的作者和著名的“SL 是反模式”声明的作者）在他的书中提到了一种称为 Ambient Context 的模式。尽管他说他不太喜欢它，但这种模式仍然很有趣：它就像旧的好单例，只是它是作用域的并提供默认值，因此我们不必检查 null。它有一个缺陷——它没有而且它不知道它的范围以及如何处置自己。

那么，为什么不在这里应用服务定位器呢？它可以解决环境上下文对象的作用域和处置问题。在你说它是反模式之前：这是你隐藏合同的时候。但在我们的例子中，我们隐藏了 OPTIONAL 合同，所以 IMO 并没有那么糟糕。

这里有一些代码来说明我的意思：

```
public interface ILogger
{
    void Log(String text);
}

public interface ISomeRepository
{
    // skipped
}

public class NullLogger : ILogger
{
    #region ILogger Members

    public void Log(string text)
    {
        // do nothing
    }

    #endregion
}

public class LoggerContext
{
    public static ILogger Current
    {
        get
        {
            if(ServiceLocator.Current == null)
            {
                return new NullLogger();
            }
            var instance = ServiceLocator.Current.GetInstance<ILogger>();
            if (instance == null)
            {
                instance = new NullLogger();
            }
            return instance;
        }
    }
}

public class SomeService(ISomeRepository repository)
{
    public void DoSomething()
    {
        LoggerContext.Current.Log("Log something");
    }
} 
```

编辑：我意识到不问具体问题与堆栈溢出设计相冲突。因此，我会将一篇最好地描述为什么这种设计不好或更好地提供更好的解决方案（或者可能是添加？）的帖子标记为答案。但是不要建议 AOP，它很好，但是当你真的想在你的代码中做一些事情时，它不是一个解决方案。

编辑 2：我添加了对 ServiceLocator.Current 的检查是否为空。这就是我的代码要做的事情：在未配置 SL 时使用默认设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:48:38.093

[您可以使用手工制作的装饰器或某种拦截（例如Castle DynamicProxy](http://www.castleproject.org/dynamicproxy/index.html)或[Unity 的拦截扩展](http://msdn.microsoft.com/en-us/library/ff660891%28PandP.20%29.aspx)）添加横切关注点。

因此，您根本不必注入`ILogger`您的核心业务类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:38:00.267

您提出的环境上下文的一个问题是它使测试变得更加困难。有几个原因：

1.  在运行单元测试时，必须始终在“ServiceLocator.Current”中注册一个有效的实例。但不仅如此，它还必须使用有效的`ILogger`.
2.  当您需要在测试中使用假记录器（除了简单的 NullLogger）时，您将必须配置您的容器，因为没有办法挂钩，但由于容器是单例，所有其他测试都将使用同一个记录器。
3.  当您的单元测试并行运行时（正如 MSTest 默认情况下所做的那样），创建一个可以工作的解决方案将是非常重要的（并且是浪费时间）。

所有这些问题都可以通过简单地将`ILogger`实例注入到需要它的服务中来解决，而不是使用环境上下文。

如果您系统中的许多类都依赖于该`ILogger`抽象，那么您应该认真问问自己[是否记录了太多](https://stackoverflow.com/questions/9892137/windsor-pulling-transient-objects-from-the-container)。

另请注意，[依赖项几乎不应该是可选的](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=97#Optional-dependencies)。

# core-data - 过滤 NSManagedObject 的关系

> ID：10683172
> 
> 赞同：2
> 
> 时间：2012-05-21T10:01:50.837
> 
> 标签：core-data, nspredicate, relationship, nsmanagedobject

假设 a与对象`Manager`具有一对多关系。`Employee`给定一个`Manager`对象的引用（即`NSManagedObject *manager`），我如何获得对“`Employee`所有工资超过 10000 的人中工资最低的”的引用？

我可以想到两种可能的方法：

方法 1：构造一个`NSFetchRequest`并用所讨论的对象 ID 指定`Manager`想要的`Manager`。

方法 2：在 上的某种键值编码表达式`Manager`，例如`[manager valueForKeyPath:@"..."]`（使用一些`NSPredicate`？）

如果有一个合理的解决方案，我倾向于方法 2。请赐教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:26:48.370

当然，您可以只将谓词和排序描述符应用于关系返回的集合。如果集合相对较小（因为它是在内存中完成的，所有对象都必须被获取），那么简单且非常快。您可能希望预先执行该批处理以限制执行 I/O 的次数。

根据数据库的大小和经理（以及索引）下的员工数量，您可能希望在数据库级别完成所有操作......

```
// We want "Employee" objects
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Employee"];
// Assuming the "inverse" relationship from employee-to-manager is "manager"...
// We want all employees that have "our" manager, and a salary > 10000
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"(manager == %@) AND (salary > 10000", manager];
// Sort all the matches by salary, little-to-big
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"salary" ascending:YES]];
// Limit the returned set to 1 object, which will be the smallest
fetchRequest.fetchLimit = 1; 
```

这将在数​​据库级别执行整个查询，并且只返回 1 个对象。

As always, performance issues are usually highly dependent on your model layout, and the options used for specifying the model and its relationships.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T04:53:26.260

您可以过滤一系列`Employee`关系以获得您想要的关系。1）首先，获得所有`Employee`工资超过10000的：

```
NSArray *filtered = [manager.employees filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(salary > 10000)"]]; 
```

2）然后按降序排序

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"salary" ascending: NO];
NSArray *sortedAndFiltered =  [filtered sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]]; 
```

3）然后让你的员工

```
[sortedAndFiltered lastObject]; 
```

# c# - Kinect，警告：未释放 ImageFrame 实例

> ID：10683176
> 
> 赞同：1
> 
> 时间：2012-05-21T10:02:00.820
> 
> 标签：c#, wpf, kinect

我是 Kinect 的新手。我正在尝试使用骨架跟踪，但我一直收到此警告“警告：未处理 ImageFrame 实例。”。你知道任何解决方案吗？

这是我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using Coding4Fun.Kinect.Wpf;
using System.Diagnostics;
using System.IO;

namespace KinectSkeleton
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        bool closing = false;
        const int skeletonCount = 6;
        Skeleton[] allSkeletons = new Skeleton[skeletonCount];

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            myKinectSensorChooser.KinectSensorChanged += new DependencyPropertyChangedEventHandler(myKinectSensorChooser_KinectSensorChanged);
        }

        void myKinectSensorChooser_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
        {
            KinectSensor oldSensor = (KinectSensor)e.OldValue;
            if (oldSensor != null)
            {
                oldSensor.Stop();
                oldSensor.AudioSource.Stop();
            }

            KinectSensor mySensor = (KinectSensor)e.NewValue;
            if (mySensor == null)
                return;

            mySensor.DepthStream.Enable(DepthImageFormat.Resolution320x240Fps30);
            mySensor.ColorStream.Enable();
            mySensor.SkeletonStream.Enable();
            mySensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(mySensor_AllFramesReady);

            try
            {
                mySensor.Start();
                Debug.WriteLine("Starting Sensor .....");
                Debug.WriteLine("The Current Elevation Angle is: " + mySensor.ElevationAngle.ToString());
                mySensor.ElevationAngle = 0;
            }
            catch (System.IO.IOException)
            {
                //another app is using Kinect
                myKinectSensorChooser.AppConflictOccurred();
            }
        }

        void mySensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
        {
            if (closing)
                return;

            byte[] depthImagePixels;
            DepthImageFrame depthFrame = e.OpenDepthImageFrame();
            if (depthFrame == null)
                return;

            depthImagePixels = GenerateDepthImage(depthFrame);
            int stride = depthFrame.Width*4;
            image1.Source =
                BitmapSource.Create(depthFrame.Width, depthFrame.Height,
                96, 96, PixelFormats.Bgr32, null, depthImagePixels, stride);

            //Get a skeleton
            Skeleton first = GetFirstSkeleton(e);
            if (first == null)
                return;

            Debug.WriteLine("Head Position is : " + first.Joints[JointType.Head].ToString());

            depthFrame.Dispose();

        }

        private byte[] GenerateDepthImage(DepthImageFrame depthFrame)
        {
            //get the raw data from the frame with the depth for every pixel
            short[] rawDepthData = new short[depthFrame.PixelDataLength];
            depthFrame.CopyPixelDataTo(rawDepthData);

            //use frame to create the image to display on-screen
            //frame contains color information for all pixels in image
            //Height x Width x 4 (Red, Green, Blue, empty byte)
            Byte[] pixels = new byte[depthFrame.Height * depthFrame.Width * 4];

            //hardcoded locations to Blue, Green, Red (BGR) index positions       
            const int BlueIndex = 0;
            const int GreenIndex = 1;
            const int RedIndex = 2;
            int player, depth;

            //loop through all distances
            //pick a RGB color based on distance
            for (int depthIndex = 0, colorIndex = 0;
                depthIndex < rawDepthData.Length && colorIndex < pixels.Length;
                depthIndex++, colorIndex += 4)
            {
                //get the player (requires skeleton tracking enabled for values)
                player = rawDepthData[depthIndex] & DepthImageFrame.PlayerIndexBitmask;

                //gets the depth value
                depth = rawDepthData[depthIndex] >> DepthImageFrame.PlayerIndexBitmaskWidth;

                if (player > 0)
                {
                    pixels[colorIndex + BlueIndex] = Colors.Gold.B;
                    pixels[colorIndex + GreenIndex] = Colors.Gold.G;
                    pixels[colorIndex + RedIndex] = Colors.Gold.R;
                }
                else
                {
                    pixels[colorIndex + BlueIndex] = Colors.Green.B;
                    pixels[colorIndex + GreenIndex] = Colors.Green.G;
                    pixels[colorIndex + RedIndex] = Colors.Green.R;
                }
            }
            //depthFrame.Dispose();
            return pixels;
        }

        Skeleton GetFirstSkeleton(AllFramesReadyEventArgs e)
        {
            using (SkeletonFrame skeletonFrameData = e.OpenSkeletonFrame())
            {
                if (skeletonFrameData == null)
                {
                    return null;
                }
                skeletonFrameData.CopySkeletonDataTo(allSkeletons);

                //get the first tracked skeleton
                Skeleton first = (from s in allSkeletons
                                  where s.TrackingState == SkeletonTrackingState.Tracked
                                  select s).FirstOrDefault();

                return first;
            }
        }

        void StopKinect(KinectSensor sensor)
        {
            if (sensor != null)
            {
                if (sensor.IsRunning)
                {
                    sensor.ElevationAngle = 0;
                    sensor.Stop();
                    if (sensor.AudioSource != null)
                    {
                        sensor.AudioSource.Stop();
                    }
                }
            }
        }
        private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            closing = true;
            Debug.WriteLine("Closing window...");
            StopKinect(myKinectSensorChooser.Kinect);
        }
    }
} 
```

非常感谢，迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:40:29.203

在你写的方法 mySensor_AllFramesReady

```
 //Get a skeleton
        Skeleton first = GetFirstSkeleton(e);
        if (first == null)
            return; // Here if first skeleton is null then you are returning without disposing depthFrame frame. 
```

在打开深度框架时使用 using 块，如下所示

```
 using(DepthImageFrame depthFrame = e.OpenDepthImageFrame())
  {
        if (depthFrame == null)
            return;

        depthImagePixels = GenerateDepthImage(depthFrame);
        int stride = depthFrame.Width*4;
        image1.Source =
            BitmapSource.Create(depthFrame.Width, depthFrame.Height,
            96, 96, PixelFormats.Bgr32, null, depthImagePixels, stride);

        //Get a skeleton
        Skeleton first = GetFirstSkeleton(e);
        if (first == null)
            return;

        Debug.WriteLine("Head Position is : " + first.Joints[JointType.Head].ToString());
     } 
```

# java - 从终端运行代码时会创建文本文件，但在 Java 中运行时不会创建文本文件

> ID：10683178
> 
> 赞同：1
> 
> 时间：2012-05-21T10:02:09.370
> 
> 标签：java, linux

```
public static void main(String[] args) throws Exception {
  System.setOut(new PrintStream(
      new FileOutputStream("/home/main/smt/output/out.txt")));

  try {
    String line;
    Process p = Runtime.getRuntime().exec(
        "/home/main/smt/tools/moses-2010-08-13/moses/moses-cmd/src/moses " +
        "-f /home/main/smt/work/model/moses.ini " +
        "< /home/main/smt/work/corpus/dataset.en" );

    BufferedReader in = new BufferedReader(
                   new InputStreamReader(p.getInputStream()) );
    while ((line = in.readLine()) != null) {
      System.out.println(line);
    }
    in.close();
  }
  catch (Exception e) {
    // ...
  }
} 
```

命令

```
home/main/smt/tools/moses-2010-08-13/moses/moses-cmd/src/moses 
  -f /home/main/smt/work/model/moses.ini
  < /home/main/smt/work/corpus/dataset.en
  >/home/main/smt/output/out.txt 
```

在 Linux 的终端中执行并`out.txt`创建。但是在java中没有`out.txt`创建。

`dataset.en`是输入文件。`src`使用模型中和模型中的exe moses，`moses.ini`dataset.en 中的内容被翻译并保存在`out.txt`. 但是在这里运行此代码时不会`out.txt`创建。尽管控制台中没有显示任何内容，但我从命令中删除了将输出保存在文件中。如果我改变 `Process p = Runtime.getRuntime().exec(ls)`它的工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:01:59.830

Shell 可以解释重定向和参数。你应该尝试

String[] cmd = {"/bin/ksh", "-c", "yourcommand < infile"};

进程进程 = Runtime.getRuntime().exec(cmd);

# jquery - JQuery - 无法让我的动画循环重新启动

> ID：10683179
> 
> 赞同：0
> 
> 时间：2012-05-21T10:02:09.537
> 
> 标签：jquery, animation, loops

我对 JQuery 真的很陌生，并且已经阅读了一些关于循环和动画的内容。我的想法是`<li>`在移动到下一个之前让其中的每个 's 淡入淡出`<li>`。

我已经设法让淡入和淡出工作，但一旦它到达终点，它就会停止。一旦到达终点，让它重新开始的最佳方法是什么？

查询：

```
<script>
$(document).ready(function(){

$('.fader > li').hide();

var duration = 1000;

$('.fader > li').each(function(i){ $(this).delay( i * (duration * 2) ).fadeIn(duration).fadeOut(duration); } );

});
</script> 
```

HTML

```
<ul class="fader">
<li>List item 1</li>
<li>List item 2</li>
<li>List item 3</li>
<li>List item 4</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:23:48.347

而不是用正确的方法来做这件事，`delay`它更容易使用可以传递给`fadeIn`/的可选回调，`fadeOut`它在动画完成时被调用。

然后，您可以将这一切包装在一个漂亮、简单的插件中：

```
(function($){
    $.fn.cycle = function(options){
       var settings = $.extend({duration:1000},options) ;

       this.children().hide();
       doSequence(this.children(),0);        

       function doSequence ($elems, i){
           var next = (i == $elems.length-1) ? 0 : i+1;
           fadeInThenOut($elems.eq(i),function(){ doSequence($elems, next) });;       
       }
       function fadeInThenOut ($elem,callback){
           $elem.fadeIn(settings.duration,function(){
               $elem.fadeOut(settings.duration,callback);
            });
       }           
    };

})(jQuery); 
```

然后使用变得非常简单：

```
$('.fader').cycle({duration:1000}); 
```

现场示例：http: [//jsfiddle.net/VZJTL/](http://jsfiddle.net/VZJTL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:11:49.297

```
var len = $('.fader > li').hide().length;
var duration = 1000;

function animate(i) {
    $('.fader > li:eq(' + i++ +')').fadeIn(duration).fadeOut(duration, function() {
        animate(i == len ? 0 : i);
    });
}

animate(0);​ 
```

**演示：http:** [//jsfiddle.net/mW9xf/](http://jsfiddle.net/mW9xf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:06:40.367

```
<script>
$(document).ready(function(){

$('.fader > li').hide();

var duration = 1000;
var t;

fade();

function fade()
{
    $('.fader > li').each(function(i){ 
        $(this).delay( i * (duration * 2) )
            .fadeIn(duration)
            .fadeOut(duration); 
    } );
    t = setTimeout(fade, 2000);

}

});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:33:18.930

以下应该可以满足您的需要，而不会出现滞后问题（一次出现多个项目）：

```
$(document).ready(function() {

    $('.fader > li').hide();
    fade();

    function fade() {
        var duration = 1000;
        $('.fader > li').each(function(i) {
            $(this).delay(i * (duration * 2)).fadeIn(duration).fadeOut(duration, function() {
                if ((i + 1) == $('.fader > li').length) {
                    fade();
                }
            });
        });

    }

});​ 
```

[例子](http://jsfiddle.net/Daedalus/7uKVm/1/)

# python - 管道弹出标准错误和标准输出

> ID：10683184
> 
> 赞同：28
> 
> 时间：2012-05-21T10:02:22.337
> 
> 标签：python

我想通过 python 从目录中调用脚本（它们是可执行的 shell 脚本）。

到目前为止，一切都很好：

```
 for script in sorted(os.listdir(initdir), reverse=reverse):
        if script.endswith('.*~') or script == 'README':
             continue
        if os.access(script, os.X_OK):
            try:
                execute = os.path.abspath(script)
                sp.Popen((execute, 'stop' if reverse else 'start'),
                         stdin=None, stderr=sp.PIPE,
                         stdout=sp.stderr, shell=True).communicate()
            except:
                raise 
```

现在我想要的是：假设我有一个带有启动功能的 bash 脚本。我从那里打电话

> 回声“某事”

现在我想在 sys.stdout 和退出代码上看到那个回声。我相信你用 .communicate() 来做到这一点，但我的并没有像我想象的那样工作。

我究竟做错了什么？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-21T10:12:01.290

授予[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)。

> 通信（）返回一个元组（stdoutdata，stderrdata）。

子流程完成后，您可以从 Popen 实例中获取返回码：

> Popen.returncode：子返回码，由 poll() 和 wait() 设置（间接由communicate() 设置）。

同样，您可以像这样实现您的目标：

```
sp = subprocess.Popen([executable, arg1, arg2], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
out, err = sp.communicate()
if out:
    print "standard output of subprocess:"
    print out
if err:
    print "standard error of subprocess:"
    print err
print "returncode of subprocess:"
print sp.returncode 
```

顺便说一句，我会改变测试

```
 if script.endswith('.*~') or script == 'README':
         continue 
```

变成积极的：

```
if not filename.endswith(".sh"):
    continue 
```

明确说明您想要执行的内容比明确说明您不想执行的内容*要好*。

此外，您应该以更通用的方式命名变量，因此`script`应该`filename`放在首位。还列出了目录，您`listdir`可以显式检查这些目录。`try/except`只要您不处理特定异常，您当前的块就不合适。而不是`abspath`，您应该只连接`initdir`and `filename`，这是一个经常在 . 的上下文中应用的概念`os.listdir()`。出于安全原因，仅当您绝对确定需要它时，才`shell=True`在对象的构造函数中使用它。`Popen`让我提出以下建议：

```
for filename in sorted(os.listdir(initdir), reverse=reverse):
    if os.path.isdir(filename) or not filename.endswith(".sh"):
         continue
    if os.access(script, os.X_OK):
        exepath = os.path.join(initdir, filename)
        sp = subprocess.Popen(
            (exepath, 'stop' if reverse else 'start'),
            stderr=subprocess.PIPE,
            stdout=subprocess.PIPE)
        out, err = sp.communicate()
        print out, err, sp.returncode 
```

# mysql - sql错误'查询为空'

> ID：10683185
> 
> 赞同：0
> 
> 时间：2012-05-21T10:02:25.217
> 
> 标签：mysql, syntax

我不是一个训练有素的程序员。我从网上学到的都是我自己。如果您发现我的代码和问题非常业余，请原谅。

我正在尝试根据数据库中的卖家数据调用买家的匹配项，并自动将他们的匹配项邮寄给他们。

当我使用 EasyPhp 在我的系统上运行此代码时，它显示“查询为空”。当我在服务器上运行此代码时，它显示`"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1' at line 1 "`我哪里出错了？

```
<?php

include('adminmaster.htm');

Echo "<center>Mail Matching Properties</center><br><br>";

mysql_connect("localhost", "username","password") or die(mysql_error()); 

mysql_select_db("database") or die(mysql_error()); 

$query= 'SELECT*FROM clientdata WHERE email != "  " AND Transaction="Buyer"';

$result=mysql_query($query);

echo mysql_error();

if (!$result){ die("No Buy results");}

$matchrows=mysql_num_rows($result);

if($matchrows==0){ die("No Buy results");}

while($info = mysql_fetch_array($result))

$Price1= $info['Price']+($info['Price']*10/100);

$Price2 = $info['Price']-($info['Price']*10/100);

$una=$info['username'];

$query2='SELECT*FROM clientdata WHERE email!=" " AND Transaction="Seller"';

$result2=mysql_query($query2);

echo mysql_error();

$matchrows2=mysql_num_rows($result2);

if($matchrows2==0){ die("Sell Data Not Found");}

if(!$result2)

{die("Sell Data Not Found");}

while($info2=mysql_fetch_array($result2))

{

if ($info['Detail']==$info2['Detail'])

{

if ($info['Location']==$info2['Location'])

{

if ($Price1 >= $info2['Price'])
{

if ($Price2 <= $info2['Price'])

{

if ($info['username']!=$info2['username'])

{

echo mysql_error();

echo "<table width=600 border = 1 style='text-align:left';>

<tr>
<td><b>Clients</b></td>
<td><b><font color='maroon'>BUYER</font></b></td>
<td><b><font color='maroon'>SELLER</font></b></td>
</tr>

<tr>
<td><b>Date Posted:</b></td>
<td>$info[Date]</td>
<td>$info2[Date]</td>
</tr>

<tr>
<td><b>Title:</b></td>
<td>$info[propheading]</td>
<td>$info2[propheading]</td>
</tr>

<tr>
<td><b>Transaction:</b></td>
<td>$info[Transaction]</td>
<td>$info2[Transaction]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Detail:</b></td>
<td style='background-color:lightgrey'>$info[Detail]</td>
<td style='background-color:lightgrey'>$info2[Detail]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Price:</b></td>
<td style='background-color:lightgrey'>$info[Price]</td>
<td style='background-color:lightgrey'>$info2[Price]</td>
</tr>

<tr>
<td><b>Additional Data:</b></td>
<td>$info[AdditionalData]</td>
<td>$info2[AdditionalData]</td>
</tr>

<tr>
<td><b>Location:</b></td>
<td>$info[Location]</td>
<td>$info2[Location]</td>
</tr>
<tr>
<td><b>Agent/Individual:</b></td>
<td>$info[Agent_Ind]</td>
<td>$info2[Agent_Ind]</td>
</tr>
<tr>
<td><b>Name:</b></td>
<td>$info[Title] $info[firstname] $info[lastname]</td>
<td>$info2[Title] $info2[firstname] $info2[lastname]</td>
</tr>
<tr>
<td><b>Phone:</b></td>
<td>$info[Phone]</td>
<td>$info2[Phone]</td>
</tr>
<tr>
<td><b>Email:</b></td>
<td>$info[Email]</td>
<td>$info2[Email]</td></tr>

</table>";

$tomail=$info2['Email'];

if   ($tomail=="anitgopinath@gmail.com"|$tomail=="anit@landshoppe.com"|$tomail=="info@landshoppe.com")  {continue;}

$headers ="From:info@landshoppe.com"."\r\n";

$headers .='Bcc:anit@landshoppe.com'."\n";
$headers .= 'MIME-Version: 1.0'."\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1'."\r\n";
$subject ="You have a Property Match !";

$message="<html></head><body>

<table width=600 border = 1 style='text-align:left';>

<caption><b><font color='maroon'>YOUR PROPERTY MATCH!</font></b></caption>

<tr>
<td><b>Date Posted:</b></td>
<td>$info[Date]</td>
</tr>

<tr>
<td><b>Title:</b></td>
<td>$info[propheading]</td>
</tr>
<tr>
<td><b>Transaction:</b></td>
<td>$info[Transaction]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Detail:</b></td>
<td style='background-color:lightgrey'>$info[Detail]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Price:</b></td>
<td style='background-color:lightgrey'>$info[Price]</td>
</tr>

<tr><td><b>Additional Data:</b></td><td>$info[AdditionalData]</td></tr>
<tr><td><b>Location:</b></td><td>$info[Location]</td></tr>
<tr><td><b>Agent/Individual:</b></td><td>$info[Agent_Ind]</td></tr>
<tr><td><b>Name:</b></td><td>$info[Title] $info[firstname] $info[lastname]</td></tr>
<tr><td><b>Phone:</b></td><td>$info[Phone]</td></tr>
<tr><td><b>Email:</b></td><td>$info[Email]</td></tr>

</table></body><html>";

echo $tomail."<br>";
echo "$message"."<br>";

$mailresult=mysql_query(mail($tomail,$subject,$message,$headers));

if ($mailresult){echo "Mailed<br>";}else{echo "Not Mailed !<br>";}

echo "**********************************Seller Match**************************************************<br>";

$tomail2=$info['Email'];

if   ($tomail2=="anitgopinath@gmail.com"|$tomail2=="anit@landshoppe.com"|$tomail2=="info@landshoppe.com"){continue;}

$headers ="From:info@landshoppe.com"."\r\n";

$headers .='Bcc:anit@landshoppe.com'."\n";
$headers .= 'MIME-Version: 1.0'."\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1'."\r\n";
$subject ="You have a Property Match !";

$message="<html></head><body>

<table width=600 border = 1 style='text-align:left';>

<caption><b><font color='maroon'>YOUR PROPERTY MATCH!</font></b></caption>

<tr>
<td><b>Date Posted:</b></td>
<td>$info2[Date]</td>
</tr>

<tr>
<td><b>Title:</b></td>
<td>$info2[propheading]</td>
</tr>

<tr>
<td><b>Transaction:</b></td>
<td>$info2[Transaction]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Detail:</b></td>
<td style='background-color:lightgrey'>$info2[Detail]</td>
</tr>
<tr>
<td style='background-color:lightgrey'><b>Price:</b></td>
<td style='background-color:lightgrey'>$info2[Price]</td>
</tr>

<tr>
<td><b>Additional Data:</b></td>
<td>$info2[AdditionalData]</td>
</tr>

<tr>
<td><b>Location:</b></td>
<td>$info2[Location]</td>
</tr>
<tr>
<td><b>Agent/Individual:</b></td>
<td>$info2[Agent_Ind]</td>
</tr>
<tr>
<td><b>Name:</b></td>
<td>$info2[Title] $info2[firstname] $info2[lastname]</td>
</tr>
<tr>
<td><b>Phone:</b></td>
<td>$info2[Phone]</td>
</tr>
<tr>
<td><b>Email:</b></td>
<td>$info2[Email]</td>
</tr>

</table></body><html>";

echo $tomail2."<br>";
echo "$message"."<br>";

$mailresult2=mysql_query(mail($tomail2,$subject,$message,$headers));

if ($mailresult2){echo "Mailed<br>";}else{echo "Not Mailed !<br>";}

echo "**********************************Buyer Match**************************************************<br>";

}
}
}
}
}
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:16:42.633

不想听起来粗鲁，但你最好重新设计你的代码，现在一团糟。从一个简单的“分而治之”方法开始：标记每个只做一件事的代码块 - 并分成一个函数（只在主脚本中保留它的调用）。您会立即注意到它在阅读和更新代码方面的不同。

您所说的错误是由这一行引起的：

```
$mailresult=mysql_query(mail($tomail,$subject,$message,$headers)); 
```

...因为`mail`function 的结果是[boolean](http://php.net/manual/en/function.mail.php)。当被mysql_query转换成字符串时，要么是空字符串，要么是`'1'`; 当然，它们都不是有效的查询。如果你需要检查结果，那只是......

```
$mailresult=mail($tomail,$subject,$message,$headers); 
```

再一次，错误本身很简单——但它隐藏在你的代码中是如此之好，以至于五个或更多的 SO 用户未能找到它。) 这就是代码需要重组的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:07:19.680

首先，在 SQL 请求中指定字符串文字时，您应该使用单个 qoutes：

```
$query= "SELECT*FROM clientdata WHERE email != '  ' AND Transaction='Buyer'"; 
```

# javascript - 在Javascript中上传多个文件时检查重复文件

> ID：10683189
> 
> 赞同：0
> 
> 时间：2012-05-21T10:02:56.400
> 
> 标签：javascript, html, file-upload

我使用以下代码上传多个文件。它工作得很好，但是因为我需要检查我上传的文件是否重复，所以我面临一个问题。我为此创建了一个名为**checkDuplicate**的函数，并在函数内部调用它。但问题是 for 循环循环的数组大小是双倍的。我不知道为什么会这样。如果有人有任何想法，请帮助我。

**这是Javascript**

```
<script type="text/javascript">

function MultiSelector(list_target, max) {
    this.list_target = list_target;
    this.count = 0;
    this.id = 0;
    if (max) {
       this.max = max;
    } else {
       this.max = -1;
};

this.addElement = function(element) {

if (element.tagName == 'INPUT' && element.type == 'file') {
    element.name = 'file_' + this.id++;
    element.multi_selector = this;
    element.onchange = function() {
    var new_element = document.createElement('input');
    new_element.type = 'file';
    this.parentNode.insertBefore(new_element, this);
    this.multi_selector.addElement(new_element);
    this.multi_selector.addListRow(this);
    this.style.position = 'absolute';
    this.style.left = '-1000px';
};

if (this.max != -1 && this.count >= this.max) {
    element.disabled = true;
}
;
this.count++;
this.current_element = element;
} 
else {
     alert('Error: not a file input element');
}
;
};

this.addListRow = function(element) {
     var new_row = document.createElement('div');
     var new_row_button = document.createElement('img');
     new_row_button.setAttribute("src","<%=request.getContextPath()%>/images/deletei.gif");
     new_row_button.onclick = function() {
     this.parentNode.element.parentNode.removeChild(this.parentNode.element);
     this.parentNode.parentNode.removeChild(this.parentNode);
     this.parentNode.element.multi_selector.count--;
     this.parentNode.element.multi_selector.current_element.disabled = false;
     return false;
}; 
if(checkDuplicate(element)) {
   new_row.element = element;
   new_row.innerHTML = element.value + "&nbsp;&nbsp;";
   new_row.appendChild(new_row_button);
   this.list_target.appendChild(new_row);
}
};
};
function checkDuplicate(element) {
    var arr = new Array();
    var i = 0,dup=0;
    //alert(new_row.element = element.value);
    if(dup==0) {
       arr[i++] = element.value;
       dup=1;
    }
    alert("Length ==> "+ arr.length);
    for ( var j = 0; j < arr.length; j++) {
         alert("Name ==> " + arr[j]);
         if(arr[j] == element.value && j>=1) {
            alert("Duplicate");
         } else {
           alert("Not Duplicate");
           arr[i++] = element.value;
         }
    }
}
</script> 
```

**这是HTML**

```
<body>
<!-- This is the form -->
<form enctype="multipart/form-data" action=""method="post">
<input id="my_file_element" type="file" name="file_1">
<input type="submit">
<br/>
<br/>
Files:
<!-- This is where the output will appear -->
<div id="files_list"></div>

</form>
<script>
var multi_selector = new MultiSelector(document
.getElementById('files_list'), 15);

multi_selector.addElement(document.getElementById('my_file_element'));
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:22:26.993

因为你有 arr[i++] = element.value; 在最后一行，而 j < arr.length 在 for，所以每次 array.lenght 变得越来越大。

将 for 行更改为这两行：

```
var len = arr.length;
for ( var j = 0; j < len; j++) { 
```

# javascript - 如何使用 JavaScript 或 JQuery 从 input type=file html 元素中获取文件名？

> ID：10683192
> 
> 赞同：18
> 
> 时间：2012-05-21T10:03:00.567
> 
> 标签：javascript, jquery, internet-explorer, firefox, google-chrome

在谷歌 Chrome 浏览器中，我尝试了几种方法 + 以下方法，但没有一个给我附加文件名的值，验证后我将提交文件。但总是找不到它的未定义或 val() ..

如何解决？

```
console.log($("input[name='attachment[]']"));
/* Output:
[
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
, 
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
, 
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
]
*/

$.each($("input[name='attachment[]']"), function(i,v) {
    console.log(i);
    console.log(v); //v.val() does not exist... even uploaded a file and showing file

});

/* Output: 
0
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
1
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
2
<input type=​"file" name=​"attachment[]​" id=​"attachment">​
*/

return false; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-21T10:08:54.120

这应该有效：

```
$("input[name='attachment[]']").each(function() {
    var fileName = $(this).val().split('/').pop().split('\\').pop();
    console.log(fileName);
}); 
```

您无法获取文件的完整路径，因为它取决于您使用的浏览器。输入文件的唯一通用跨浏览器值是文件名。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-21T10:09:38.277

我建议类似于以下内容：

```
​$('input:file').change(
    function(e){
        console.log(e.target.files[0].name);
    });​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nSf7w/)。

如果您允许上传多个文件，则使用该`multiple`属性，然后获取每个名称：

```
$('input:file').change(
    function(e){
        var f = e.target.files,
            len = f.length;
        for (var i=0;i<len;i++){
            console.log(f[i].name);
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nSf7w/1/)。

**注意：在当前浏览器版本中，`f[i].fileName`应该是`f[i].name`.**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-10T23:49:36.010

该元素具有通过其成员变量访问`<input type=file>`的零索引[FileList](https://developer.mozilla.org/en-US/docs/Web/API/FileList)`files`。

您可以通过查询选择器访问该列表：

```
document.querySelector('input[type=file]').files 
```

您可以使用点符号访问文件名：

```
document.querySelector('input[type=file]').files[0].name 
```

应该注意的是，在 Chrome 53、Firefox 49 和当前的[W3C 规范中 FileAPI](https://www.w3.org/TR/FileAPI/#filelist-section)是`files`一个类似数组的列表，而不是实际的数组。您可以通过其索引访问每个文件对象，但如果不先将列表转换为数组，您将无法访问任何数组原型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:21:38.150

为了

```
<input type="file" mutiple onchange="getSongs(this.files)"/> 
```

采用

```
function getSongs(files){
  ...
  for(var i = 0; i < files.length; i++){
     file=files[i];
     filename=file.fileName;
  }
} 
```

如果输入仅用于单个文件，则只需使用 name 属性

```
$("type=['file']").attr('name'); 
```

# c# - 包括在命名空间中使用

> ID：10683205
> 
> 赞同：1
> 
> 时间：2012-05-21T10:04:25.610
> 
> 标签：c#

我一直想知道使用代码的更好方法是什么。使用命名空间内部编写有什么区别：

命名空间之外

```
using System.Data.Entity;
using System.Web.Mvc;
using System.Web.Routing;
using Myproject.DataLayer;

namespace Myproject
{
  public class MyProjectClass{
  // etc
  }
} 
```

在命名空间内部，我可以做的唯一原因是：更短的名称，编译器不需要去全局位置来查找实现......但不确定其余的

```
namespace Myproject
{
using System.Data.Entity;
using System.Web.Mvc;
using System.Web.Routing;
using DataLayer;

  public class MyProjectClass{
  // etc
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:32:39.380

Scott 已经在[http://www.hanselman.com/blog/BackToBasicsDoNamespaceUsingDirectivesAffectAssemblyLoading.aspx回答了这个问题](http://www.hanselman.com/blog/BackToBasicsDoNamespaceUsingDirectivesAffectAssemblyLoading.aspx)

如果您决定在一个文件中包含多个命名空间，则将使用代码和别名名称保留在命名空间中的价值。

但是要问自己的问题是为什么我想在同一个文件中有多个命名空间

# jquery - jquery 弹出窗口不起作用

> ID：10683206
> 
> 赞同：-1
> 
> 时间：2012-05-21T10:04:30.550
> 
> 标签：jquery

我想在我的 mvc3 razor 应用程序中打开一个弹出窗口，因为我知道下面的代码。当我单击按钮时，什么都没有发生。我在错误控制台中看到一个错误“$(#dialog).dialog is not a function”。我是 jquery 的新手，任何人都可以帮助我我在做什么错误。

```
 $(function () {   
        $('#dialog').dialog({
            autoOpen: false,
            width: 400,
            resizable: false,
            title: 'hi there',
            modal: true,
            open: function(event, ui) {
                //Load the Edit action which will return 
                // the partial view _Edit
                $(this).load("@Url.Action("Edit")");
            },
            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });

        $('#Button1').click(function () {
            $('#dialog').dialog('open');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:06:20.703

要使用`.dialog`，您必须在页面上加载 jQuery 和 jQueryUI。

将此添加到您的`HEAD`：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script> 
```

# java - 数组输出和提示用户输入输出的问题

> ID：10683208
> 
> 赞同：1
> 
> 时间：2012-05-21T10:04:35.947
> 
> 标签：java, arrays, java.util.scanner

我在实验室任务方面遇到了一些麻烦：

当我的程序尝试提示用户输入时，程序会在同一行输出两个问题，并且只接受第二个问题的输入。

我的程序的输出：

> 请输入第二名员工的姓名：请输入第二名员工的号码：1

（它们出现在同一行而不是单独的行）

数组的输出也是这样的：

```
0.00.00.00.00.00.00.00.00.00.0 
```

而不是这样：

```
0, 0, 0, 0, 0, 0, 0, 0, 0, 0 
```

我不太确定如何解决这两个问题，任何帮助将不胜感激！

这是我的代码：

**雇员.java**

```
//import java.util.*;

public class Employee
{
    private String empName;
    private int empNumber;
    private String empAddress;
    private double empSalary;

private double[] empBonus=new double[10];

public Employee(){}

public Employee(String empName_, int empNumber_, String empAddress_, double empSalary_, double[] empBonus_)
{
    this.empName=empName_;
    this.empNumber=empNumber_;
    this.empAddress=empAddress_;
    this.empSalary=empSalary_;

    this.empBonus=empBonus_;
}

public String getName()
{
    return this.empName;
}

public int getEmployeeNumber()
{
    return this.empNumber;
}

public String getAddress()
{
    return this.empAddress;
}

public double getSalary()
{
    return this.empSalary;
}

public String changeAddress(String chAddress)
{
    return empAddress=chAddress;
}

public double changeSalary(double chSalary)
{
    return empSalary=chSalary;
}

public String addBonus(double[] empBonus)
{
    String arrayBonus=new String("");

    for(int i=0; i<empBonus.length;i++)
    {
        arrayBonus+=empBonus[i];
    }

    return arrayBonus;
}

public String toString()
{
    return ("\nEmployee's name: "+empName+"\nEmployee's Number: "+empNumber+"\nEmployee's address: "+empAddress+
            "\nEmployee's original salary: "+empSalary+ "\nEmployee's bonuses: "+addBonus(empBonus)+"\n");
}
} 
```

**EmployeeTester.java**

```
import java.util.*;

public class EmployeeTester
{
public static void main(String[] args)
{
    Scanner in1=new Scanner(System.in);
    Scanner in2=new Scanner(System.in);
    Scanner in3=new Scanner(System.in);

    Employee emp1;
    Employee emp2;

    emp1=read_input("first", in1, in2, in3);
    emp2=read_input("second", in1, in2, in3);

    System.out.println(emp1.toString());
    System.out.println(emp2.toString());

}

public static Employee read_input(String msg, Scanner scan1, Scanner scan2, Scanner scan3)
{
    String name, address;
    int num;
    double salary;
    double[] bonus=new double[10];

    System.out.print("\nPlease enter the name of the "+msg+" employee:");
    name=scan1.nextLine();

    System.out.print("Please enter the number of the "+msg+" employee:");
    num=scan2.nextInt();

    System.out.print("Please enter the address of the "+msg+" employee:");
    address=scan1.nextLine();

    System.out.print("Please enter the salary of the "+msg+" employee:");
    salary=scan3.nextDouble();

    System.out.print("Please add a bonus for the "+msg+" employee:");
    bonus[0]=scan3.nextDouble();

    System.out.print("Add more bonuses to the "+msg+"employee? (y/n) \nNote: Enter 0.0 if you would like to terminate adding more bonuses: ");

    if(scan1.next().startsWith("y"))
    {
        for(int i=1; i<bonus.length;i++)
        {
            System.out.print("Continue entering a bonus to "+msg+" employee:");
            bonus[i]=scan3.nextDouble();

            if(bonus[i]==0.0 || i==bonus.length)
            {
                break;
            }
        }
    }   

    return new Employee(name, num, address, salary, bonus);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:18:04.597

对于您的第一个问题，只需改变您`Scanners`的`read_input`方法，以便它们每次都重新开始。

```
public static void main(String[] args) {
    Employee emp1;
    Employee emp2;

    emp1 = read_input("first");

    emp2 = read_input("second");

    System.out.println(emp1.toString());
    System.out.println(emp2.toString());

}

public static Employee read_input(String msg) {
    Scanner scan1 = new Scanner(System.in);
    Scanner scan2 = new Scanner(System.in);
    Scanner scan3 = new Scanner(System.in);
    ... 
```

对于您的第二个问题，在`addBonus`您构建输出字符串的方法中，您没有添加任何空格或逗号。`StringBuilder`此外，如果您使用这种类型的循环连接而不是重复创建新的字符串对象，它的效率也会更高。

```
public String addBonus(double[] empBonus)
{
    StringBuilder arrayBonus = new StringBuilder();

    for(int i=0; i<empBonus.length;i++)
    {
        arrayBonus.append(empBonus[i] + ", ");
    }

    return arrayBonus.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:10:20.947

您不需要 3 台不同的扫描仪，只需一台即可。

对于印刷部分，您需要`println()`或使用`'\n'`换行。

例如：

```
System.out.println("Please enter the name of the "+msg+" employee:"); 
System.out.print("Please enter the name of the "+msg+" employee:\n"); 
```

在第一种情况下，您正在调用一个函数（`println()`而不是`print()`），该函数会自动将换行符附加到输出文本。在第二种情况下，您正在制作字符串的换行部分（您已经在打印的第一行的开头使用了它）

使用数组输出`0.0`是因为这些值是浮点值（`double`在您的情况下），默认情况下会打印小数部分。要仅打印整数部分，您需要将值转换为整数或使用双精度格式。

铸件：

```
double a = 0.0;
System.out.print("'a' as integer: " + ((int)a)); 
```

格式化：

```
System.out.format("Here is a number: %.0f", a); 
```

`.`和之间的数字`f`指定要输出的小数位数。

# c# - 在 C# 中动态分派到派生类

> ID：10683210
> 
> 赞同：9
> 
> 时间：2012-05-21T10:04:44.340
> 
> 标签：c#, c#-4.0, dispatch

我正在尝试执行以下操作：

```
public abstract BaseClass {

  public virtual void ReceiveEvent(Event evt)
    {
        ProcessEvent(evt as dynamic);
    }

    private void ProcessEvent(object evt)
    { 
        LogManager.Log(@"Received an event that is not being processed! 
                        Dispatch fallback");
    }
}

public DerivedClass: BaseClass {

    private void ProcessEvent(SpecificEvent evt)
    { 
        LogManager.Log("Processing Event");
    }
} 
```

SpecificEvents 命中后备方法，而不是派生类中的方法。我一直在同一个类中使用动态调度，发现它非常有用/干净。如上例所示，它不能与派生类一起使用吗？

**编辑：** 答案似乎有些混乱。基本上我一直使用以下设计：

```
public class SomeClass{

    public void DoSomethingDispatcher(SomeObject obj)
    {
        ProcessObject(obj as dynamic);
    }

    private void DoSomething(SomeObjectType1 obj)
    { 

    }

    private void DoSomething(SomeObjectType2 obj)
    { 

    }

    private void DoSomething(SomeObjectType3 obj)
    { 

    }

    private void DoSomething(object obj) //fallback
    { 

    }
} 
```

当**您事先不知道确切的类型并且不想使用大的 switch 语句**时，效果很好。只是想知道这是否可以通过继承来实现，其中基类包含回退方法，派生类包含所有更具体的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:35:42.483

它对您不起作用，因为即使 evt 是动态传递的，ProcessEvent 也不会被声明为虚拟的。这意味着当对 ProcessEvent 的调用被编译时，它被链接到基类中找到的方法的唯一实现，而派生类中的方法永远不会被执行。此外，您不能简单地将 ProcessEvent 声明为虚拟，因为派生类中的签名会有所不同。

为了让您的代码按预期工作，您可以在派生类中覆盖 ReceiveEvent ，使其完全相同：

```
 public override void ReceiveEvent(Event evt)
    {
        ProcessEvent(evt as dynamic);
    } 
```

如果要管理基类中未处理的事件，只需将基类中Process事件的修饰符修改为protected即可（否则被重写版本的ReceiveEvents调用时无法执行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:11:57.503

如果方法不在`virtual`/`abstract`在基类中，并且方法没有标记为`override`在派生类中，它永远不会起作用。

另外，我不明白`dynamic`这里的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:11:32.590

当它击中 ProcessEvent 时，您的“evt”的类型是什么？

您可以查看 [Using Type dynamic](http://msdn.microsoft.com/en-us/library/dd264736.aspx)：

> 该类型是静态类型，但动态类型的对象绕过静态类型检查。在大多数情况下，它的功能就像它具有类型对象一样。

所以，evt 不是一个`SpecificEvent`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:18:24.510

要获得预期的行为，您应该覆盖虚拟方法：

```
public DerivedClass: BaseClass
{
  private override void ReceiveEvent(Event evt)
  { 
      // Process your event here.
  }
} 
```

使用此代码，`ReceiveEvent`不会调用基类中的代码，因此不会调用回退`ProcessEvent`。

没有理由使用`dynamic`.

# java - 如何使用 Servlet 从服务器下载文件

> ID：10683215
> 
> 赞同：1
> 
> 时间：2012-05-21T10:04:55.500
> 
> 标签：java

我是 servlet 技术的新手，我需要编写代码从客户端的服务器下载文件。

我们可以使用 servlet 技术直接从服务器下载文件吗？

请提出宝贵的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:06:00.947

如果我理解正确，您可以通过 response.sendRedirect() 从 HTTP servlet 下载文件，以获取公共位置可用的文件。

否则，您需要使用响应输出流来绑定文件信息，以便它会提示您下载文件：

```
OutputStream out = response.getOutputStream();
FileInputStream in = new FileInputStream(fileToDownload);
byte[] buffer = new byte[4096];
int length;
while ((length = in.read(buffer)) > 0){
    out.write(buffer, 0, length);
}
in.close();
out.flush(); 
```

我想你当然可以处理异常。

# asp.net-mvc-3 - asp.net mvc3, c#

> ID：10683216
> 
> 赞同：0
> 
> 时间：2012-05-21T10:04:55.923
> 
> 标签：asp.net-mvc-3, c#-4.0

有没有一种简单的方法可以将对象从我的控制器传递到控制器？

我试过*ViewData["compaignId"]*但这没有用。

**控制器*“内容”*：**

```
ViewData["CompaignId"] = id; 
```

**查看*“内容”*：**

```
<div>
    @Html.ActionLink("Go To Team Creation", "Team", ViewData["CompaignId"])
</div> 
```

**控制器*“团队”*：**

```
public ActionResult Team(long CompaignId)
{
    ....
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:08:56.960

一般来说，您应该使用 ViewModel 来处理类似的事情。但是你也可以使用`ViewBag`。

```
ViewBag.CompaignId = id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:10:46.490

你可以使用：

**控制器“内容”：**

```
ViewBag.CompaignId = id; 
```

**查看“内容”：**

```
<div>
    @Html.ActionLink("Go To Team Creation", "Team", new 
    { 
        CompaignId = (long)ViewBag.CompaignId 
    })
</div> 
```

**控制器“团队”：**

```
public ActionResult Team(long CompaignId)
{
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:09:49.743

你应该看看[这个重载](http://msdn.microsoft.com/en-us/library/dd492936.aspx)

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    Object routeValues
) 
```

您可以将[匿名对象](http://msdn.microsoft.com/en-us/library/bb397696.aspx)作为最后一个参数传递

```
<div>
    @Html.ActionLink("Go To Team Creation", "Team", new { campaignId = (int)ViewData["CompaignId"] })
</div> 
```

# r - 从 DateTime 向量中获取小时

> ID：10683224
> 
> 赞同：12
> 
> 时间：2012-05-21T10:05:17.373
> 
> 标签：r, date, time

我在 data.frame 中有一个 DateTime 向量，其中数据框由 8760 个观测值组成，代表全年的每小时间隔，例如

```
2010-01-01 00:00
2010-01-01 01:00
2010-01-01 02:00
2010-01-01 03:00 
```

等等。

我想创建一个 data.frame ，它的第一列是原始的 DateTime 向量，然后是第二列中的每小时值，例如

```
2010-01-01 00:00          00:00
2010-01-01 01:00          01:00 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T10:20:51.117

使用`format`或`strptime`提取时间信息。

创建一个 POSIXct 向量：

```
x <- seq(as.POSIXct("2012-05-21"), by=("+1 hour"), length.out=5) 
```

提取时间：

```
data.frame(
  date=x,
  time=format(x, "%H:%M")
)

                 date  time
1 2012-05-21 00:00:00 00:00
2 2012-05-21 01:00:00 01:00
3 2012-05-21 02:00:00 02:00
4 2012-05-21 03:00:00 03:00
5 2012-05-21 04:00:00 04:00 
```

* * *

如果输入向量是字符向量，则必须先转换为 POSIXct：

创建一些数据

```
dat <- data.frame(
  DateTime=format(seq(as.POSIXct("2012-05-21"), by=("+1 hour"), length.out=5), format="%Y-%m-%d %H:%M")
)
dat
          DateTime
1 2012-05-21 00:00
2 2012-05-21 01:00
3 2012-05-21 02:00
4 2012-05-21 03:00
5 2012-05-21 04:00 
```

拆分超时：

```
data.frame(
  DateTime=dat$DateTime,
  time=format(as.POSIXct(dat$DateTime, format="%Y-%m-%d %H:%M"), format="%H:%M")
)

          DateTime  time
1 2012-05-21 00:00 00:00
2 2012-05-21 01:00 01:00
3 2012-05-21 02:00 02:00
4 2012-05-21 03:00 03:00
5 2012-05-21 04:00 04:00 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:24:41.053

或者一般来说，不将它们视为日期，您可以使用以下内容，前提是正确填充时间和日期。

```
library(stringr)
df <- data.frame(DateTime = c("2010-01-01 00:00", "2010-01-01 01:00", "2010-01-01 02:00", "2010-01-01 03:00"))
df <- data.frame(df, Time = str_sub(df$DateTime, -5, -1)) 
```

这真的取决于你的需求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T02:42:00.313

使用`lubridate`

```
library(stringr)
library(lubridate)
library(plyr)

df <- data.frame(DateTime = c("2010-01-01 00:00", "2010-01-01 01:00", "2010-01-01 02:00", "2010-01-01 03:00"))

df <- mutate(df, DateTime = ymd_hm(DateTime),
                 time  = str_c(hour(DateTime), str_pad(minute(DateTime), 2, side = 'right', pad = '0'), sep = ':')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-07T15:54:53.483

在更一般的说明中，对于从谷歌来到这里并且可能想要按小时分组的任何人：

这里的关键是：`lubridate::hour(datetime)`

p22 在 cran 文档中：[https ://cran.r-project.org/web/packages/lubridate/lubridate.pdf](https://cran.r-project.org/web/packages/lubridate/lubridate.pdf)

# java - Netbeans GUI：带有双单元格的 JTable 在键入而不是替换时添加到当前条目

> ID：10683226
> 
> 赞同：0
> 
> 时间：2012-05-21T10:05:26.327
> 
> 标签：java, swing, netbeans

我有一个在 Netbeans 7.2 中设计为表单的 GUI。我有一个行为麻烦的 JTable。表格模型设计为右键单击 -> 属性 -> 模型并设置 1 行和 12 列，类型为 Long 和 Double 用于可编辑的数字字段。

![在此处输入图像描述](../Images/ea01377b813b66d98a5599368979f423.png)

现在，如果我导航到包含例如“0.0”的单元格并开始输入“123”，我会得到“0.0123”而不是“123”。我希望它能够工作，如果您刚开始输入，则从一个空白值开始 - 如果条目被“单击”，那么您开始编辑单元格，并且您输入的任何内容都会插入到光标位置。

这可以轻松完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:03:49.107

我发现[https://stackoverflow.com/a/8493016/53897](https://stackoverflow.com/a/8493016/53897)可以工作。

添加代码的方法是在导航器中右键单击JTable，然后选择“代码定制器”。在将`new javax.swing.JTable()`下拉框更改为“自定义创建”的行中，您现在可以编辑该片段，包括添加`{...@Override public void changeSelection(...)...}`所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:35:28.950

*   标准 Swing 有什么问题`JTable`？`DefaultTableModel`

*   确定缺少一些关于生产代码的想法（让事情变得更好）......，选择所有用于编辑器，单元格对齐，背景，前景，剥离，字体，外观和感觉等......（大多数自定义外观和感觉没有' t 与 Netbeans Swing 框架中的内置组件托盘一起正常工作），

*   SwingX 有用于 Netbeans 的组件托盘，更好和最安全的方式，也许你看过......

![在此处输入图像描述](../Images/34c47a3185e1a9674472bd4a1c171f1c.png)

```
import java.awt.*;
import java.awt.event.*;
import java.text.NumberFormat;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.table.*;

public class EditorTest {

    private JScrollPane getTableComponent() {
        String[] colNames = {"Stock", "Price", "Shares", "Quantity", "Action", "Action", "Holder"
        };
        final Object[][] data = {{"MSFT", Double.valueOf(12.21), Integer.valueOf(10),
                Integer.valueOf(0), "Buy", "Sell", "Bill"}, {"IBM", Double.valueOf(13.21), Integer.valueOf(12),
                Integer.valueOf(0), "Buy", "Sell", "Tim"}, {"ORACLE", Double.valueOf(21.22), Integer.valueOf(11),
                Integer.valueOf(0), "Buy", "Sell", "Tom"}
        };
        DefaultTableModel model = new DefaultTableModel(data, colNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int col) {
                return data[0][col].getClass();
            }
        };
        JTable table = new JTable(model);
        TableColumnModel colModel = table.getColumnModel();
        colModel.getColumn(1).setCellRenderer(new DoubleRenderer());
        colModel.getColumn(3).setCellRenderer(new SpinnerRenderer());
        colModel.getColumn(4).setCellRenderer(new ButtonRenderer());
        colModel.getColumn(5).setCellRenderer(new ButtonRenderer());
        colModel.getColumn(3).setCellEditor(new SpinnerEditor());
        colModel.getColumn(4).setCellEditor(new ButtonEditorA(table));
        colModel.getColumn(5).setCellEditor(new ButtonEditorA(table));
        table.setCellSelectionEnabled(true);
        Dimension d = table.getPreferredSize();
        table.setPreferredScrollableViewportSize(d);
        return new JScrollPane(table);
    }

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new EditorTest().getTableComponent());
        f.pack();
        f.setLocation(100, 100);
        f.setVisible(true);
    }
}

class SpinnerEditor extends AbstractCellEditor implements TableCellEditor {

    private static final long serialVersionUID = 1L;
    private SpinnerNumberModel model = new SpinnerNumberModel(0, 0, null, 1);
    private JSpinner spinner = new JSpinner(model);
    private int clickCountToStart = 1;

    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        spinner.setValue(((Integer) value).intValue());
        return spinner;
    }

    public Object getCellEditorValue() {
        return (Integer) spinner.getValue();
    }

    @Override
    public boolean isCellEditable(EventObject anEvent) {
        if (anEvent instanceof MouseEvent) {
            return ((MouseEvent) anEvent).getClickCount() >= clickCountToStart;
        }
        return true;
    }

    @Override
    public boolean shouldSelectCell(EventObject anEvent) {
        return true;
    }

    @Override
    public boolean stopCellEditing() {
        return super.stopCellEditing();
    }

    @Override
    public void cancelCellEditing() {
        super.cancelCellEditing();
    }
}

class ButtonEditorA extends AbstractCellEditor implements TableCellEditor, ActionListener {

    private static final long serialVersionUID = 1L;
    private JTable table;
    private JButton button = new JButton();
    private NumberFormat nf = NumberFormat.getCurrencyInstance();
    private int clickCountToStart = 1;

    public ButtonEditorA(JTable table) {
        this.table = table;
        button.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        StringBuilder sb = new StringBuilder();
        int row = table.getEditingRow();
        int col = table.getEditingColumn();
        //System.out.printf("row = %d  col = %d%n", row, col);
        sb.append((String) table.getValueAt(row, 6));
        sb.append(" has ");
        sb.append(((col == 4) ? "bought " : "sold "));
        sb.append(((Integer) table.getValueAt(row, 3)).toString());
        sb.append(" shares of " + (String) table.getValueAt(row, 0));
        sb.append(" at " + nf.format(((Double) table.getValueAt(row, 1)).doubleValue()));
        stopCellEditing();
        System.out.println(sb.toString());
    }

    public Component getTableCellEditorComponent(JTable table,
            Object value,
            boolean isSelected,
            int row, int column) {
        button.setText(value.toString());
        return button;
    }

    public Object getCellEditorValue() {
        return button.getText();
    }

    @Override
    public boolean isCellEditable(EventObject anEvent) {
        if (anEvent instanceof MouseEvent) {
            return ((MouseEvent) anEvent).getClickCount() >= clickCountToStart;
        }
        return true;
    }

    @Override
    public boolean shouldSelectCell(EventObject anEvent) {
        return true;
    }

    @Override
    public boolean stopCellEditing() {
        return super.stopCellEditing();
    }

    @Override
    public void cancelCellEditing() {
        super.cancelCellEditing();
    }
}

class SpinnerRenderer implements TableCellRenderer {

    private SpinnerNumberModel model = new SpinnerNumberModel(0, 0, null, 1);
    private JSpinner spinner = new JSpinner(model);

    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        spinner.setValue(((Integer) value).intValue());
        return spinner;
    }
}

class ButtonRendererA implements TableCellRenderer {

    private JButton button = new JButton();

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        button.setText(value.toString());
        return button;
    }
}

class DoubleRenderer extends DefaultTableCellRenderer {

    private static final long serialVersionUID = 1L;
    private NumberFormat nf = NumberFormat.getCurrencyInstance();

    public DoubleRenderer() {
        setHorizontalAlignment(RIGHT);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        setText(nf.format(((Double) value).doubleValue()));
        return this;
    }
} 
```

# iphone - 我可以自定义 UITableView 中的复选标记位置吗？

> ID：10683227
> 
> 赞同：0
> 
> 时间：2012-05-21T10:05:27.773
> 
> 标签：iphone, uitableview

我正在使用allowMultipleSelectionDuringEditing = true处理UITable，然后在编辑时在表格中得到一个圆圈和红色复选标记：

![](../Images/1658b0654b54749dace7bb5b33bc1e01.png)

问题是，我需要自定义表格视图单元格，以便单元格有一些背景图像，并且单元格左侧需要更大的边距。我可以为内容位置自定义单元格 contentView，但是有没有办法可以**自定义复选标记和圆圈位置**？

我可以使用自己的多选逻辑和视图实现自定义表格视图单元格，但是有没有办法使用内置的多选实现来做到这一点？如果没有，您会推荐一种惯用的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:12:02.213

可以更改复选标记的位置，

请制作一个表格视图单元格 XIB 并给它一个背景图像和复选标记图像和一个标签..

复选标记的隐藏和显示将由 XIB 的关联类管理。

它会为你工作。

** 祝一切顺利

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T05:12:07.070

要回答我自己的问题，您不能使用公共 API 移动红色复选标记和圆圈（编辑控件）。

但是，您可以覆盖**UITableViewCell layoutSubviews**方法。在其中找到作为“ **UITableViewCellEditControl** ”的子视图，并根据需要修改其位置。

# javascript - 如何解决“资源解释为脚本但使用 MIME 类型文本/html 传输”

> ID：10683228
> 
> 赞同：2
> 
> 时间：2012-05-21T10:05:30.300
> 
> 标签：javascript, html, django

我在我的应用程序中使用 Django，由于一些奇怪的原因，当我尝试在浏览器上加载页面时，一个正在开发的新项目开始出现以下错误。

> 资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://127.0.0.1:8000/site_media/js/jquery-1.7.js”

我的观点是这样的；

```
@csrf_exepmt
def home(request):
   render_to_response("myapp/home.html",{}, context_instance=RequestContext(request)) 
```

我的 HTML 模板：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Home</title>
    <script type="text/javascript" src="jquery-1.7.js"></script>
</head>
<body>
<h1>Welcome Home!</h1>
</body>
</html> 
```

我过去从未在我的任何项目中看到过这样的事情。

我正在 Windows、Chrome 18.0 上进行测试。我也尝试过 FF6，Firebug 在我的 html 文件的第一行抛出了一些错误。

我正在尝试的所有来自网络的建议都不起作用。

我还尝试使用通过[django](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/)渲染快捷方式手动提供 MIME 类型的技术，但没有运气。

我错过了什么？即使没有 MIME 设置，我的其他项目也能正常工作。

注意：如果我将脚本标签的“src”属性留空，则页面加载良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:28:57.640

我解决了这个问题！问题是格式错误的 url conf 模式。

我在 url 模式中的第一行看起来像这样

```
url(r'$', 'myapp.views.home'), 
```

代替

```
url(r'^$', 'myapp.views.home'), 
```

**请注意，我在“$”**符号之前缺少**“^” 。**

 **谢谢你。**

# java - 阻止 Java 画布在重绘时清除

> ID：10683232
> 
> 赞同：1
> 
> 时间：2012-05-21T10:05:58.597
> 
> 标签：java, canvas, awt, repaint, vlcj

下面的代码只是在一个窗口中打开了一个画布，它的内容只是用红色填充。但是，在调整窗口大小时，它会闪烁很多，因为在每次重新绘制之前，画布似乎都会自行清除。经过一些琐碎的搜索后，它似乎是因为`update()`调用的方法`g.clearRect()`，但我现在已经覆盖了它并且闪烁仍然存在，画布在重新绘制之前仍在清除自身。

我玩过双缓冲，据我所知，这似乎并不能解决问题 - 我不确定它有多大帮助，因为问题似乎更多的是阻止画布清除在重新粉刷之前。

顺便说一句，在每个人都冲进来提出建议之前，我*必须*在这种情况下使用 Canvas，而不是 JPanel，因为在不同的时间点，我使用相同的 Canvas 来播放 VLCJ 的原生视频。

```
public class MyCanvas extends Canvas {

    @Override
    public void update(Graphics g) {
        paint(g);
    }

    @Override
    public void paint(Graphics g) {
        //By the time we get here, the canvas has been cleared to its background colour
        g.setColor(Color.RED);
        g.fillRect(0, 0, getWidth(), getHeight());
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        MyCanvas c = new MyCanvas();
        frame.add(c);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:58:46.090

正如预期的那样，双缓冲结果不是问题 - 无论哪种方式，画布都在从似乎深入 AWT 库内部的代码进行绘制之前被清除。

在跟踪相关内部之后，似乎“绘制前清除”行为可以被属性覆盖：

```
System.setProperty("sun.awt.noerasebackground", "true"); 
```

添加以下内容会阻止背景在重新绘制之前在画布上被擦除，从而阻止相关的闪烁。

应该注意的是，这个属性显然是特定于 Sun VM 的，因此不知道您是否在另一个 VM 上获得了类似的行为。但是，它确实适用于我的用例。

# overlapping - 片段重叠

> ID：10683235
> 
> 赞同：1
> 
> 时间：2012-05-21T10:06:08.340
> 
> 标签：overlapping

在我使用片段显示设置屏幕的应用程序中，我有一些用于某些选项的内部片段。从我的应用程序的视图中选择一个内部片段时，显示该内部片段，但是当我在我的设置屏幕中选择一些其他片段并选择返回片段时重叠。

如何处理这些**片段重叠**。

提前致谢，

# objective-c - NSMutableArray EXC_BAD_ACCESS（代码=1）

> ID：10683238
> 
> 赞同：2
> 
> 时间：2012-05-21T10:06:18.163
> 
> 标签：objective-c, xcode

我不知道为什么，但我的 NSMutableArray 'items' 不会超过 5 个元素。

有人可以帮忙吗？我正在关注 Big Nerd Ranch iOS Programming 一书。

此代码工作正常：

```
NSMutableArray *items = [[NSMutableArray alloc] init];
for (int i = 5; i < 10; i++) {
    BNRItem *p = [BNRItem randomItem];
    [items addObject:p];
} 
```

但是，如果我将 i 的初始值更改为 4 或更少，则程序在退出 for 循环时崩溃：

```
NSMutableArray *items = [[NSMutableArray alloc] init];
for (int i = 4; i < 10; i++) {
    BNRItem *p = [BNRItem randomItem];
    [items addObject:p];
} 
```

错误截图：[http ://db.tt/3CdueSYh](http://db.tt/3CdueSYh)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T10:59:31.043

改变你的

```
NSArray *randomNounList = [NSArray arrayWithObjects:@"Bear", @"Spork", "Mac", nil]; 
```

至：

```
NSArray *randomNounList = [NSArray arrayWithObjects:@"Bear", @"Spork", @"Mac", nil]; 
```

`@`你之前忘记了`"Mac"`

希望能帮助到你

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:59:51.927

在您在评论中发布的屏幕截图中，您正在将 C 字符串 , 添加`"Mac"`到`randomNounList`数组中。您需要将其设为带有 @ 符号的 NSString。

我怀疑随机选择此条目时会发生崩溃。

我很惊讶这个编译，我怀疑你忽略了一些警告。

# jquery - 如何在 Heroku 上显示来自 /vendors/assets 的图像

> ID：10683241
> 
> 赞同：3
> 
> 时间：2012-05-21T10:06:29.260
> 
> 标签：jquery, jquery-ui, ruby-on-rails-3.1, heroku

**里面是来自jQuery-UI**库`/vendor/assets/stylesheets/jquery_ui/images`的所有图像。在 localhost 上一切正常，但是当我将应用程序（Rails 3.2）部署到 heroku 时，没有显示任何放置在**供应商**目录中的图像。

 ****我尝试将这些图像放在`/public`目录中，`/app/assets/`目录，也运行命令`rake assets:precompile`，但没有任何效果。

jQuery 在 Heroku 上运行良好，但它的图像仍然不行。

我还缺少什么？我已经不知道要尝试什么了...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T09:13:38.450

You can check the image path which is created after parsing using inspect element. the path is not properly created obviously.****

# java - 如何使用java swing在水晶报表中在运行时切换数据库连接

> ID：10683249
> 
> 赞同：1
> 
> 时间：2012-05-21T10:07:03.527
> 
> 标签：java, swing, crystal-reports, crystal-reports-xi

请帮忙。我正在开发一个可以打开使用水晶报表 xi 制作的报表的摇摆应用程序。我想做的是打开一个报告并将连接信息传递给该报告，以便我可以动态更改报告的数据库。但由于某种原因，它无法正常工作，并且该报告仍会从最初设置的数据库中生成信息。有人可以告诉我我做错了什么吗？顺便说一句，当我尝试使用 com.crystaldecisions.sdk.occa.report.application.ReportClientDocument 时，我得到一个未找到服务器的错误。但是当我尝试使用 import com.crystaldecisions.reports.sdk.ReportClientDocument; 它不工作。我不确定报表服务器是什么，我认为我没有在我的计算机上设置它。请帮忙。这是我的代码：

```
import com.crystaldecisions.sdk.occa.report.application.ReportClientDocument;

ReportClientDocument rpt =  new ReportClientDocument();
    rpt.open(reportPath+fileName, 0);
    Fields fields = null;

    IConnectionInfo connInfo = rpt.getDatabaseController().getConnectionInfos(null).getConnectionInfo(0);

     PropertyBag innerProp = connInfo.getAttributes();
        innerProp.clear();

        PropertyBag propertyBag = new PropertyBag();
        propertyBag.put("Server Type", "JDBC (JNDI)");
        propertyBag.put("Database DLL", "crdb_jdbc.dll");
        propertyBag.put("Database Class Name", "com.mysql.jdbc.Driver");
        propertyBag.put("Use JDBC", "true");
        propertyBag.put("Server Name", DBConnect.getServer());
        propertyBag.put("Generic JDBC Driver Behavior", "No");
        propertyBag.put("URI", "!com.mysql.jdbc.Driver!jdbc:mysql://"+DBConnect.getServer()+":"+DBConnect.getPort()+"/"+DBConnect.getDatabase()+"!ServerType=29!QuoteChar=`");

        connInfo.setAttributes(innerProp);
        connInfo.setPassword(DBConnect.getPassword());
        connInfo.setUserName(DBConnect.getUsername());

    int replaceParams = DBOptions._ignoreCurrentTableQualifiers + DBOptions._doNotVerifyDB;
    rpt.getDatabaseController().replaceConnection(rpt.getDatabaseController().getConnectionInfos(null).getConnectionInfo(0), connInfo, fields, replaceParams); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:31:55.263

您没有使用添加到 propertyBag 的属性。您应该将属性添加到 innerProp，将 propertyBag.put(...) 替换为 innerProp.put(...) 或将 connInfo.setAttributes(innerProp) 更改为 connInfo.setAttributes(propertyBag)。我建议第一种方法。

# redirect - nginx + varnish 将服务器 IP 重定向到 url

> ID：10683250
> 
> 赞同：0
> 
> 时间：2012-05-21T10:07:06.367
> 
> 标签：redirect, nginx, varnish

我在端口 8080 上有 nginx，位于端口 80 上运行的清漆后面。我的服务器上只有一个网站。问题是您也可以通过服务器的 IP 地址访问它，而不仅仅是 url。谷歌索引了这个IP，我害怕重复内容的问题。

如何将发送到 IP 地址的请求重定向到我的 URL？我尝试了这段代码，但最终出现循环重定向错误。

```
server {
    listen 180.10.1.1:80;
    server_name 180.10.1.1;
    rewrite .* http://www.mysite.com$request_uri permanent;
} 
```

谢谢

编辑：vcl的其余部分

```
server {
    listen   8080;
    server_name  site.com;
    access_log  /var/log/nginx/localhost.access.log;
    error_page 502  /502.html;

## Default location
    location / {
        root   /home/site.com/public_html;
        index  index.php;
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:53:14.987

有几种方法可以解决这个问题。如果 Nginx 在您访问服务器 IP 地址时也在为 site.com 提供服务，那么您应该调整 Nginx 配置，以便任何指向该 IP 地址的请求都重定向到 site.com。然后重启 Nginx 和 Varnish。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:30:44.700

好的，问题是listen指令中的“180.10.1.1：”。我只保留在那里“听 80”，现在它工作正常:)

# java - 如何查明 ReentrantReadWriteLock 的 ReadLock 是否在 API 级别 9 之前持有

> ID：10683252
> 
> 赞同：0
> 
> 时间：2012-05-21T10:07:08.993
> 
> 标签：java, android, concurrency, reentrantreadwritelock

我注意到，Java`ReentrantReadWriteLock`在 API 版本 <9 和 >=9 中有所不同。对我来说尤其重要的是，该方法`getReadHoldCount()`在旧版本中不可用。

现在我的问题是，如果没有此方法，如何检测当前线程是否持有 ReadLock？我只看到手动计数器或包装类的可能性，有没有内置的方法来实现这一点？

# ruby-on-rails - 如何为每个用户创建单独的数据库

> ID：10683260
> 
> 赞同：0
> 
> 时间：2012-05-21T10:07:40.070
> 
> 标签：ruby-on-rails

我正在使用 Rails 3，并且希望无论何时创建用户，都应该为新创建的用户创建单独的数据库。

例如，如果我的应用程序中有 13 个迁移，那么应该为新创建的用户创建 13 个表。

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:46:11.837

[还可以在http://www.confreaks.com/videos/889-railsconf2012-ten-things-you-didn-t-know-rails-could-do](http://www.confreaks.com/videos/889-railsconf2012-ten-things-you-didn-t-know-rails-could-do)上查看随 James 幻灯片一起播放的音频/视频。对于每个数据库一个用户的部分，前进到 15:30 左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:36:34.720

在 Rails 中处理许多数据库是一个非常糟糕的主意！

`user_id`例如，您可以在需要分离的每个表中添加一个字段，然后将其应用于`default_scope`各自的模型（或使用`default_scope`via创建一个抽象模型并`self.abstract_class = true`从中继承您的“可共享”模型）。

您`default_scope`可能会猜到，您的 应该如下所示：

```
default_scope lambda { where(user_id: current_user_id) } 
```

您可能会问，如何获取当前用户？

模型无法访问`session`，因此您可以进行以下“破解”以使您的范围正常工作：

```
#in ApplicationController
before_filter do
    user_id = session[:user_id]
    ActiveRecord::Base.class.send :define_method, :current_user_id, lambda { user_id }
end 
```

我想你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:43:18.420

这是我关注并解决我的问题的最佳帖子

```
 http://7fff.com/2010/12/02/activerecord-dropcreate-database-run-migrations-outside-of-rails/ 
```

# android - 如何相互显示两个表面？

> ID：10683262
> 
> 赞同：1
> 
> 时间：2012-05-21T10:07:44.673
> 
> 标签：android, surfaceview, augmented-reality

我有一个 3D 立方体，我打开相机预览，我想看到这个旋转的立方体显示在相机上。

我尝试的是，在实现的类的 SurfaceChanged 方法中`surfaceHolder.callback`，我调用`camera.setPreviewCallback(new PreviewCallback(){ }` 如下：

```
public void surfaceChanged(SurfaceHolder holder, int format, int width,int height) {
.......
.......
.......
camera.setPreviewCallback(new PreviewCallback() {
        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            glSurface.setRenderer( new MyRender());
            setContentView(glSurface);
        }
    }); 
```

此代码导致显示相机预览几秒钟，直到表面发生变化，然后，相机预览消失，3D 立方体出现在黑色背景上。

无论如何要显示两个表面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:17:32.157

据我记得，您必须在 GlView 上设置 CameraPreview。那不直观，但应该可以。这是一个可以帮助您的链接：http: [//digitalbreed.com/2009/android-render-opengl-on-top-of-camera-preview](http://digitalbreed.com/2009/android-render-opengl-on-top-of-camera-preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:43:01.927

您可以进行自己的离屏合成，然后将结果绘制到单个 SurfaceView 中。有关详细信息，请参阅[此示例代码](https://github.com/ldo/3D-Compass)。

# javascript - 一次设置多个选项 javascript (MooTools) 对象

> ID：10683263
> 
> 赞同：0
> 
> 时间：2012-05-21T10:07:47.210
> 
> 标签：javascript, class, mootools

我有这样的东西

```
var obj = new someClass(el, {
    onOne: function () {
        doThis();
    },
    onTwo: function () {
        doThis();
    },
    onThree: function () {
        doThis();
    },
    onFour: function () {
        doThat();
    }
}); 
```

所以，前三个事件的结果相同，只有第四个不同。像这样，似乎有点重复，所以我希望我能做这样的事情

```
var obj = new someClass(el, {
    onOne: 
    onTwo: 
    onThree: function () {
        doThis();
    },
    onFour: function () {
        doThat();
    }
}); 
```

但我不能。
我想知道，是否有某种方法*可以*做类似的事情（不改变课程本身）。认为它会使代码更清晰，更易于维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:14:38.627

预定义函数怎么样？

```
var myHandler = function() {
    doThis();
};

var obj = new Class(el, {
    onOne: myHandler,
    onTwo: myHandler,
    onThree: myHandler,
    onFour: function () {
        doThat();
    }
}); 
```

如果您知道对象的键，您还可以尝试使用`for`循环，例如

```
var passIt = { 
    onFour: function() { 
        doThat(); 
    } 
};

var keys = ['onOne', 'onTwo', 'onThree'];
var l = keys.length;
for (var i = 0; i < l; i++) {
    passIt[keys[i]] = myHandler;
}

var obj = new Class(el, passIt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:57:02.953

函数是JavaScript 世界中[的一等公民](http://en.wikipedia.org/wiki/First-class_function)。除非您在匿名函数中省略了额外的处理，否则以下内容应该有效：

```
var obj = new Class(el, { 
    onOne   : doThis
  , onTwo   : doThis
  , onThree : doThis
  , onFour  : doThat
}) 
```

`doThis`它为on `obj`、 named `onOne`、`onTwo`和创建了三个方法别名，并为on named创建`onThree`了一个方法别名。`doThat``obj``onFour`

当您调用`obj.onOne(...)`时，它[相当于](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call) `doThis.call(obj, ...)`.

**注意**：我不确定您在`Class()`示例中是否正确使用了 MooTool 的构造函数。阅读[文档](http://mootools.net/docs/core/Class/Class)，看起来`Class`只有一个参数`properties`除外，即新创建的对象将从中继承的对象（或函数）。如果代码不起作用，请尝试删除属性`el`并将其添加`'Extends' : el`到对象文字。不过，我从未亲自使用过 MooTools，所以我不确定会发生什么。

# wcf - WCF如何并排缓冲和流模式

> ID：10683265
> 
> 赞同：1
> 
> 时间：2012-05-21T10:07:55.303
> 
> 标签：wcf

我已经运行了带有 transferMode=Buffered WCF 服务的 basicHttpBinding，用于从客户端发送少量数据。

现在，作为增强功能的一部分，需要上传多张图片，每张图片大小约为 5-10 MB。

我计划实施流式传输以上传大文件（逐个文件）。

我的问题 1.缓冲和流传输模式可以并存吗？2.我可以使用相同的配置吗？（端点、绑定等）用于缓冲和流式传输 3\. 我是否需要有单独的服务合同，它可以成为现有服务合同的一部分吗？4\. 我可以有示例工作代码吗？5\. 如果您有其他更好的建议，我愿意采纳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:40:56.310

您可以与一些使用流式传输的操作和一些不使用流式传输的操作签订一份合同。

但是，Learning WCF book 建议与流操作有单独的合同。这样，您就有了单独的端点，其绑定具有`TransferMode=Streamed`.

对于示例工作代码 - 您只需要设置

```
<basicHttpBinding>
        <binding transferMode="StreamedRequest"/>
      </basicHttpBinding> 
```

在绑定配置中，您的合约操作必须只有 Stream 作为参数（或返回类型）

```
void Upload(Stream input) 
```

# asp.net - 如何在 Ie8 中自动展开下拉列表

> ID：10683266
> 
> 赞同：-1
> 
> 时间：2012-05-21T10:07:57.973
> 
> 标签：asp.net, html, css, internet-explorer

固定宽度的asp:dropdownlist无法根据Ie8中内容的长度自动展开选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:44:45.667

尝试使用 min-width 属性而不是宽度。这样，如果它需要扩展，它可以。例子：

```
select {
    min-width:300px;
} 
```

# sql-server-2000 - 使用 GROUP BY 的 SQL 2000 行编号

> ID：10683271
> 
> 赞同：2
> 
> 时间：2012-05-21T10:08:36.327
> 
> 标签：sql-server-2000

这是我的桌子

```
################################
# id_formfield # ID # int_Sort #
################################
#      1       # 1  #     2    #
#      2       # 1  #     3    #
#      3       # 1  #     4    #
#      4       # 1  #     4    #
#      5       # 1  #     4    #
#      6       # 2  #     1    #
#      7       # 2  #     3    #
#      8       # 2  #     3    #
#      9       # 2  #     4    # 
```

正如您所看到的，我的 int_sort 列以某种方式被相同的数字弄乱了，我想使它与行号一起排序，并在 ID 更改时重置行号。这应该是结果：

```
############################################
# id_formfield # ID # int_Sort # rownumber #
############################################
#      1       # 1  #     2    #     1     #
#      2       # 1  #     3    #     2     #
#      3       # 1  #     4    #     3     #
#      4       # 1  #     4    #     4     #
#      5       # 1  #     4    #     5     #
#      6       # 2  #     1    #     1     #
#      7       # 2  #     3    #     2     #
#      8       # 2  #     3    #     3     #
#      9       # 2  #     4    #     4     # 
```

编辑： id_formfield 是我的主键，并按 int_sort 升序排列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:30:55.597

以下脚本应该可以帮助您入门。简而言之，脚本

*   创建一个临时表，添加一`IDENTITY`列作为行号
*   将原始数据插入临时表
*   用于`MIN(Rownumber)`每个`ID`获得偏移量。
*   `JOIN`具有计算出的偏移量的临时表以重新开始每个组的计数。

**SQL 语句**

```
CREATE TABLE #TempTable (Rownumber INTEGER IDENTITY(1, 1), ID INTEGER)
SET IDENTITY_INSERT #TempTable OFF

INSERT INTO #TempTable
SELECT      *
FROM        YourOriginalTable
ORDER BY    ID, int_Sort

SELECT    t.ID, t.Rownumber, t.Rownumber - o.Offset
FROM      #TempTable t
          INNER JOIN (
            SELECT    ID, MIN(Rownumber) - 1 AS Offset
            FROM      #TempTable
            GROUP BY  ID
          ) o ON o.ID = t.ID            

DROP TABLE #TempTable 
```

**测试脚本**

```
DECLARE @YourTable TABLE (ID VARCHAR(1))
CREATE TABLE #TempTable (Rownumber INTEGER IDENTITY(1, 1), ID INTEGER)

SET IDENTITY_INSERT #TempTable OFF
INSERT INTO @YourTable (ID) VALUES (1)
INSERT INTO @YourTable (ID) VALUES (1)
INSERT INTO @YourTable (ID) VALUES (1)
INSERT INTO @YourTable (ID) VALUES (1)
INSERT INTO @YourTable (ID) VALUES (1)
INSERT INTO @YourTable (ID) VALUES (2)
INSERT INTO @YourTable (ID) VALUES (2)
INSERT INTO @YourTable (ID) VALUES (2)
INSERT INTO @YourTable (ID) VALUES (2)

INSERT INTO #TempTable
SELECT      *
FROM        @YourTable
ORDER BY    ID

SELECT    t.ID, t.Rownumber, t.Rownumber - o.Offset
FROM      #TempTable t
          INNER JOIN (
            SELECT    ID, MIN(Rownumber) - 1 AS Offset
            FROM      #TempTable
            GROUP BY  ID
          ) o ON o.ID = t.ID            

DROP TABLE #TempTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:52:00.137

我假设您的表中有一个主键被调用`PK`并且您想要更新该列`int_sort`。

```
select cast(PK as int) as PK,
       ID,
       identity(int, 1, 1) as rownumber
into #T
from YourTable
order by ID, int_sort

update YourTable
set int_sort = T.rownumber - T2.rownumber + 1 
from #T as T
  inner join (
               select ID, min(rownumber) as rownumber
               from #T
               group by ID
             ) as T2
    on T.ID = T2.ID
where T.PK = YourTable.PK

drop table #T 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:54:58.630

我假设您的主键列名为`idpk`. 您可以使用以下查询获取所需的行号：

```
SELECT ts.id, ts.int_sort,
  (SELECT count(*) FROM tosort
    WHERE id = ts.id AND int_sort <= ts.int_sort
      AND idpk <= ts.idpk) AS row_number
  FROM tosort AS ts
 ORDER BY ts.id, ts.int_sort, ts.idpk; 
```

我在[SQL Fiddle](http://www.sqlfiddle.com/#!3/47b2f/5)创建了一个示例案例，尽管那里只有 2008 R2 可用。我希望这将适用于 SQL Server 2000。

# iphone - 如何从Objective-c中的另一个方法调用手势滑动方法

> ID：10683274
> 
> 赞同：1
> 
> 时间：2012-05-21T10:08:49.453
> 
> 标签：iphone, objective-c, ios, uiswipegesturerecognizer

我有这个手势滑动方法，我想从另一个方法调用

[self performSelector:@selector(handleSwipeGesture:) withObject:nil afterDelay:10];

我无法弄清楚要放入**@selector()的语法**

任何帮助表示赞赏。这是我的代码：

```
 - (IBAction)handleSwipeGesture:(UISwipeGestureRecognizer *)sender { 
        if(sender.direction == UISwipeGestureRecognizerDirectionLeft) {
            NSLog(@"swipe left");
            TutorialMenuViewController *tutorialMenuViewController = [[TutorialMenuViewController alloc]
                                                          initWithNibName:@"TutorialMenuViewController" bundle:nil];
            [self.navigationController pushViewController:tutorialMenuViewController animated:YES];
            [tutorialMenuViewController release];
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:22:07.507

如果您想以`TutorialMenuViewController`手势或时间延迟呈现，最好将其呈现抽象为不同的方法

```
- (IBAction)handleSwipeGesture:(UISwipeGestureRecognizer *)sender { 
    if(sender.direction == UISwipeGestureRecognizerDirectionLeft) {
        [self presentTutorial];
    }
}

- (void)presentTutorial;
{
    TutorialMenuViewController *tutorialMenuViewController = [[TutorialMenuViewController alloc]
                                                      initWithNibName:@"TutorialMenuViewController" bundle:nil];
    [self.navigationController pushViewController:tutorialMenuViewController animated:YES];
    [tutorialMenuViewController release];
} 
```

现在您可以简单地调用

```
[self performSelector:@selector(presentTutorial) withObject:nil afterDelay:10]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:25:38.720

```
- (IBAction)handleSwipeGesture:(UISwipeGestureRecognizer *)sender { 
if(sender.direction == UISwipeGestureRecognizerDirectionLeft) {
    NSLog(@"swipe left");
    //TutorialMenuViewController *tutorialMenuViewController = [[TutorialMenuViewController alloc]
    //                                                        initWithNibName:@"TutorialMenuViewController" bundle:nil];
    //[self.navigationController pushViewController:tutorialMenuViewController animated:YES];
    //[tutorialMenuViewController release];
}
} 
```

像这样称呼它：

```
 UISwipeGestureRecognizer *leftSwipe  =  [[UISwipeGestureRecognizer alloc] initWithTarget:nil action:nil];
[leftSwipe setDirection:(UISwipeGestureRecognizerDirectionLeft)];
[self performSelector:@selector(handleSwipeGesture:) withObject:leftSwipe afterDelay:1];
[leftSwipe release]; 
```

# php - 将 HTML 传递给 javascript 函数

> ID：10683276
> 
> 赞同：1
> 
> 时间：2012-05-21T10:08:52.100
> 
> 标签：php, javascript, html

我有一个变量，其中保存了完整的 html。$body= $myhtmlpage;

```
<a onclick="openWin(' <?php echo htmlspecialchars(json_encode($body)) ?>');" href="javascript:void(0);"> Click </a> 
```

我有这个 javascript 函数，它在新窗口中显示文本。

```
 <script type="text/javascript">
function openWin( str )
{
myWindow=window.open('','','width=400,height=400');
myWindow.document.write(str+"<p>This is 'myWindow'</p>");
myWindow.focus();
}
</script> 
```

当我的身体里有简单的文字时，它工作得很好。但如果有一些 html 则不会显示，我是 javascript 新手。请告诉我如何准备我的 HTML 以将其传递给 Javascript html。我尝试**`htmlspecialchars(json_encode($body))`** 了功能，但仍然有问题。

```
Uncaught SyntaxError: Unexpected identifier 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:12:37.907

你将经历一场漫长的战斗，试图让大量的 HTML 在 Javascript 中作为字符串变量工作。最好将该标记放在标记中的隐藏块（如 DIV）中，然后获取该标记的内容并将其显示在您的窗口中。

这具有允许验证隐藏标记的额外优势。调试大量填充到字符串变量中的 html 标记非常困难，但是当将其作为真正的标记包含在 DOM 中时，它会让您的生活变得更加轻松。

更新：添加一些示例代码：

```
<div id="my_hidden_content" style="display:none;">
<?php echo $body; ?>
</div>

<a onclick="openWin('my_hidden_content');" href="javascript:void(0);"> Click </a> 
```

现在的javascript：

```
function openWin( contentId )
{
    var contentContainer = document.getElementById(contentId);
    var content = contentContainer.innerHTML;
    myWindow=window.open('','','width=400,height=400');
    myWindow.document.write(content+"<p>This is 'myWindow'</p>");
    myWindow.focus();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:12:39.240

首先，您不需要使用`json_encode()`，这只会使情况混乱。

其次，问题在于您的 HTML 包含引号。这将导致您输出的 HTML 出现语法错误，因为`htmlspecialchars()`不会转义引号。

[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)与`ENT_QUOTES`标志一起使用。因此，将行更改为：

```
<a onclick="openWin('<?php echo htmlentities($body, ENT_QUOTES) ?>');" href="javascript:void(0);">Click</a> 
```

第三（虽然它可能应该是第一，因为它是最重要的一点）你的方法都是错误的。如果您打开一个新窗口，您应该让它从服务器加载一个页面并在窗口打开时生成 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:20:01.040

您可以在 php 代码中尝试 html 代码，而不是 html 中的 php 代码。例如

```
<?php
echo "<a onclick='openWin(\" ".htmlspecialchars(json_encode($body))." \")'>Click</a>";
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:11:22.953

那是因为，HTML 不是 JSON。为此，只需使用：`htmlspecialchars($body)`

# integration - Pentaho Kettle 错误：“错误关闭准备好的语句”

> ID：10683278
> 
> 赞同：1
> 
> 时间：2012-05-21T10:08:55.947
> 
> 标签：integration, pentaho, firebird, kettle

有一个 Pentaho 数据集成 (Kettle) 作业，我试图在客户端的工作站上运行。它产生以下错误：

```
2012/05/21 11:38:21 - Update Case Capital.0 - ERROR (version 4.3.0-GA, build 16753 from 2012-04-18 21.39.30 by buildguy) : Unable to commit Update connection [Voyager] :org.pentaho.di.core.exception.KettleDatabaseException: 
2012/05/21 11:38:21 - Update Case Capital.0 - ERROR (version 4.3.0-GA, build 16753 from 2012-04-18 21.39.30 by buildguy) : Error closing prepared statement
2012/05/21 11:38:21 - Update Case Capital.0 - ERROR (version 4.3.0-GA, build 16753 from 2012-04-18 21.39.30 by buildguy) : This statement is already closed. 
```

该作业在我的计算机上的测试数据库上运行良好，并且在客户端上运行也没有任何问题。其他 Kettle Jobs 也会在客户端失败，并出现相同的错误。

在完成任意数量的更新后，错误发生在更新步骤（运行 SQL UPDATE 语句）中。使用的数据库是 Firebird 2.5.1.26351（超级经典）。

关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:50:08.357

鉴于错误消息*错误关闭准备好的语句*和 *此语句已关闭。*，我认为您在 Jaybird 2.1.6 及更早版本中遇到了一个错误，其中多次关闭语句将引发 SQLException（而 JDBC api 文档指定如果 a`close()`已经关闭，则应忽略）。

该错误已在 Jaybird 2.2 中修复（尚未发布，但测试版可在[http://www.firebirdsql.org/en/jdbc-driver/](http://www.firebirdsql.org/en/jdbc-driver/)获得）

我希望您可以测试这是否确实解决了问题，否则我将不胜感激[http://tracker.firebirdsql.org/browse/JDBC上的更详细的错误报告](http://tracker.firebirdsql.org/browse/JDBC)

全面披露：我是 Jaybird 的开发人员之一。

# jquery - jquery UI 禁用主题样式

> ID：10683280
> 
> 赞同：4
> 
> 时间：2012-05-21T10:09:00.017
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-tabs

我想知道，如何让 jquery UI 在初始化时不添加任何类`$.tabs()`？

这是我的html结构

```
<link href="smoothness/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" />
...
<link href="estilos_scoreboard.css" rel="stylesheet" type="text/css" />
...

<div id="tab_container">
    <ul class="ui-tabs-nav">
        <li><a href="#tab_equipos"><span>Equipos</span></a></li>
        <li><a href="#tab_jugadores"><span>Jugadores</span></a></li>
        <li><a href="#tab_partidos"><span>Partidos</span></a></li>
        <li><a href="#tab_directos"><span>Directos</span></a></li>
    </ul>

    <div id="tab_equipos">... cargando ...</div>
    <div id="tab_jugadores">... cargando ...</div>
    <div id="tab_partidos">... cargando ...</div>
    <div id="tab_directos">... cargando ...</div>       
</div> 
```

javascript代码：

```
$(document).ready(function(){
    $('div#tab_container').tabs();
    $('div#tab_equipos').load('lv_equipos.php');
}); 
```

在`estilos_scoreboard.css`我有我的 css 样式，如果我不加载它会很好用`smoothness/jquery-ui-1.8.20.custom.css`

所以我想知道，有没有办法告诉`$.tabs()`不要应用它的任何样式？

//注意：我问这个是因为我不是这样编码的人，而是应用快速修复的人，我需要`smoothness/jquery-ui-1.8.20.custom.css`jquery UI 自动完成和其他功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:22:33.730

据我所知，这不能通过默认代码/选项来完成。但是，您可以在应用选项卡后删除所有 jQuery 类。

jQuery 库`ui-`为所有类使用前缀，因此您可以在应用选项卡/插件后立即删除所有这些类。

这应该有效：

```
removeByClassPrefix(document.getElementById("element"), "ui-");

function removeClassByPrefix(el, prefix) {
    var regx = new RegExp('\\b' + prefix + '.*?\\b', 'g');
    el.className = el.className.replace(regx, '');
    return el;
} 
```

或者：

```
$("#element").className = $("#element").className.replace(/\bui-.*?\b/g, ''); 
```

上面的函数感谢`Prestaul`这个答案：[删除所有以某个字符串开头的类](https://stackoverflow.com/questions/57812/jquery-remove-all-classes-that-begin-with-a-certain-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:38:41.843

好吧，我决定只使用一个简单的 if：

```
<?php if($_ADM['mod'] == 'scoreboard') {  ?>
    <link href="estilos_scoreboard.css" rel="stylesheet" type="text/css" />
<?php } else { ?>
    <link href="<?=BASE_URL;?>assets/css/smoothness/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" />
<?php } ?> 
```

# php - 根据 URL 的存在显示图像

> ID：10683281
> 
> 赞同：0
> 
> 时间：2012-05-21T10:09:07.927
> 
> 标签：php, image, url, foreach, fopen

如果 URL 存在/活动，我想添加图像。我自己尝试了很多事情来让它发挥作用，但没有成功。

我想要的是：如果 url1 存在，则显示 image1，否则什么都没有，如果 url2 存在，则显示 image2，否则什么都没有，等等。

```
foreach ($urlsArray as $url) {
  if(@fopen($url,'r')){
    echo 'Exist';
  }
  else {
      echo 'Doesnt exist';
  }
} 
```

对不起，我必须更具体！

```
$urlArray = array(
'http://www.domain.com/page1.php' => 'images/image1.jpg',
'http://www.domain.com/page2.php' => 'images/image2.jpg', 
etc);

foreach($urlsArray as $url){
    if(@fopen($url,'r')){
        echo '<img src="$image" />' /* if url1 exist show image1, etc */
    }else{
        echo '';  
    }
} 
```

如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:17:39.113

就我的知识和以往经验而言`fopen`，外部 URL 需要`allow_url_fopen`设置为“开”。通常它会在部署环境中作为安全措施被禁用，建议使用一些替代方法（如[cURL](http://us2.php.net/manual/en/ref.curl.php)）来检查 URL 是否存在以及返回的 http 响应代码。然后根据响应代码继续显示或不显示图像。

示例代码：

```
$url_exists_1 = check_url($url1);
if ($url_exists_1) {
  // show image 1;
}
else {
  // don't;
}
function check_url($url='') {
  if (!function_exists('curl_init')) {
    die("Please enable curl");
  }
  $curl_options_array = array(
    CURLOPT_URL => $url,
    CURLOPT_RETURNTRANSFER => TRUE,
    CURLOPT_FOLLOWLOCATION => TRUE,
    CURLOPT_MAXREDIRS => 5
  );
  if ($url != '') {
    $ch = curl_init();
    curl_setopt_array($ch, $curl_options_array);
    curl_exec($ch);
    $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    if ($code == 200) {
      return TRUE;
    }
    else {
      return FALSE;
    }
  } 
  else {
    return FALSE;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:13:31.260

假设`$url = path/to/pic/pic.gif`- 意味着 url 实际上会导致要显示的图片

```
foreach ($urlsArray as $url) {
  if(@fopen($url,'r')){
    echo '<img src="'.$url.'" />';
  }
} 
```

* * *

更新（为您的 foreach 使用 $key => $value）：

```
foreach ($urlsArray as $url => $img)  {
  if(@fopen($url,'r')){
    echo '<img src="'.$img.'" />';
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:14:21.977

也许这会有所帮助？：

```
<?php

foreach($urlsArray as $url){
    if(!empty(file_get_contents($url))){
        echo "exist";
    }else{
        echo "Doesn\'t exist";  
    }
}

?> 
```

# objective-c - 在 XML 文档中使用“小于”字符 (<) 并对其进行解析

> ID：10683282
> 
> 赞同：1
> 
> 时间：2012-05-21T10:09:16.857
> 
> 标签：objective-c, ios, xml, parsing, gdataxml

我需要解析一个 XML 文档，其中存在类似以下示例的条件：

`<element condition="var < 5">element name</element>`

问题是解析器不允许这个“小于”（<）字符。

我试过 GDataXML -> 它给了我一个错误，说有一个非法字符。

我也试过 TBXML -> 它没有考虑到这个字符所在的属性。

我想其他解析器也是如此。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:11:31.670

你应该替换`<`为`&lt;`

# c# - ASP.NET MVC 3 服务器错误

> ID：10683284
> 
> 赞同：0
> 
> 时间：2012-05-21T10:09:29.720
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有以下控制器：

```
public class ItemController : Controller
{
    private SomeDbEntities _db= new SomeDbEntities ();

    //
    // GET: /Item/

    public ActionResult Index()
    {
        var items = _db.Items.ToList();

        return View(items);
    }

    public ActionResult Decription(int id)
    {
        var item = _db.Items.Single(a => a.ItemID == id);

        return View(item); 
    }

} 
```

和 2 个视图：

**索引.cshmtl**

```
@model IEnumerable<Web.Models.Item>

@{
    ViewBag.Title = "Index";
 }

<h2>Index</h2>

<ul>
@foreach (var item in Model)
{

    <li>@Html.ActionLink(item.Name, "Description", new { id = item.ItemID})</li>
} 
```

**说明.cshtml**

```
@model Web.Models.Item

@{
    ViewBag.Title = "Decription";
 }

 <h2>Decription</h2>
 <p>@Model.Description</p> 
```

**路线**

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Item", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

    } 
```

当我尝试访问时，即`http://localhost:12952/Item/Description/2`出现服务器错误：

`HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:14:52.477

您的操作名称是“描述”，而网址是“../Description/..”。他们不匹配。

# c++ - boost asio，如何取消异步操作

> ID：10683287
> 
> 赞同：0
> 
> 时间：2012-05-21T10:09:42.560
> 
> 标签：c++, boost, boost-asio

我写了一个使用boost asio的代理服务程序，代理服务器有两个socket(client_socket_,server_socket_)，如果一个socket断开另一个保持活动状态。例如如果从client_socket_读取导致错误，我会关闭client_socket_ 然后等待客户端重新连接，客户端重新连接后，我从一个套接字读取并写入另一个。

问题是，当我关闭client_socket_时如何取消server_socket_中的异步操作？如果我不这样做，之前的异步操作将在客户端连接后执行。下面是handler跟踪，handler 19需要取消。

```
E:\code\vdoctor-r\code\dnc\Debug>forwardserver.exe
@asio|1337591080.941830|0*1|socket@0012FA58.async_accept
@asio|1337591107.009440|>1|ec=system:0
@asio|1337591107.009440|1*2|strand@003E8340.dispatch
@asio|1337591107.009440|>2|
@asio|1337591107.009440|2*3|socket@0012FAB0.async_connect
@asio|1337591107.025059|2*4|socket@0012FA58.async_accept
@asio|1337591107.025059|<2|
@asio|1337591107.025059|<1|
@asio|1337591107.025059|>3|ec=system:0
@asio|1337591107.025059|3*5|strand@003E8340.dispatch
@asio|1337591107.025059|>5|
2012-May-21 17:05:07 [info]-[e:\code\vdoctor-r\code\dnc\forwardserver\forward_se
rver.cpp(114):forward_server::handle_connect_to_server] connect to server succes
sful, start to receive data from both sides
@asio|1337591107.040678|5*6|socket@003E83D4.async_receive
@asio|1337591107.040678|5*7|socket@0012FAB0.async_receive
@asio|1337591107.040678|<5|
@asio|1337591107.040678|<3|
@asio|1337591107.040678|>6|ec=system:0,bytes_transferred=20
@asio|1337591107.040678|6*8|strand@003E8340.dispatch
@asio|1337591107.040678|>8|
@asio|1337591107.040678|8*9|socket@003E83D4.async_receive
@asio|1337591107.040678|<8|
@asio|1337591107.040678|<6|
@asio|1337591107.040678|>9|ec=system:0,bytes_transferred=17
@asio|1337591107.040678|9*10|strand@003E8340.dispatch
@asio|1337591107.040678|>10|
@asio|1337591107.040678|10*11|socket@0012FAB0.async_send
@asio|1337591107.056296|<10|
@asio|1337591107.056296|<9|
@asio|1337591107.056296|>11|ec=system:0,bytes_transferred=37
@asio|1337591107.056296|11*12|strand@003E8340.dispatch
@asio|1337591107.056296|>12|
@asio|1337591107.056296|12*13|socket@003E83D4.async_receive
@asio|1337591107.056296|<12|
@asio|1337591107.056296|<11|
@asio|1337591107.071915|>7|ec=system:0,bytes_transferred=20
@asio|1337591107.071915|7*14|strand@003E8340.dispatch
@asio|1337591107.071915|>14|
@asio|1337591107.071915|14*15|socket@0012FAB0.async_receive
@asio|1337591107.071915|<14|
@asio|1337591107.071915|<7|
@asio|1337591107.071915|>15|ec=system:0,bytes_transferred=18
@asio|1337591107.071915|15*16|strand@003E8340.dispatch
@asio|1337591107.071915|>16|
@asio|1337591107.071915|16*17|socket@003E83D4.async_send
@asio|1337591107.071915|<16|
@asio|1337591107.071915|<15|
@asio|1337591107.087534|>17|ec=system:0,bytes_transferred=38
@asio|1337591107.087534|17*18|strand@003E8340.dispatch
@asio|1337591107.087534|>18|
@asio|1337591107.087534|18*19|socket@0012FAB0.async_receive
@asio|1337591107.087534|<18|
@asio|1337591107.087534|<17|
@asio|1337591107.884087|>13|ec=asio.misc:2,bytes_transferred=0
@asio|1337591107.884087|13*20|strand@003E8340.dispatch
@asio|1337591107.884087|>20|
2012-May-21 17:05:07 [error]-[e:\code\vdoctor-r\code\dnc\forwardserver\forward_s
erver.cpp(273):forward_server::handle_read_header_from_client] read header from
client error,End of file
@asio|1337591107.884087|20|socket@003E83D4.close
@asio|1337591107.884087|<20|
@asio|1337591107.884087|<13|
@asio|1337591222.813720|>4|ec=system:0
@asio|1337591222.813720|4*21|strand@003E8340.dispatch
@asio|1337591222.813720|>21|
@asio|1337591222.813720|21*22|socket@003ECF2C.async_receive
@asio|1337591222.813720|21*23|socket@0012FAB0.async_receive
@asio|1337591222.813720|21*24|socket@0012FA58.async_accept
@asio|1337591222.813720|<21|
@asio|1337591222.813720|<4|
@asio|1337591222.813720|>22|ec=system:0,bytes_transferred=20
@asio|1337591222.813720|22*25|strand@003E8340.dispatch
@asio|1337591222.813720|>25|
@asio|1337591222.813720|25*26|socket@003ECF2C.async_receive
@asio|1337591222.813720|<25|
@asio|1337591222.813720|<22|
@asio|1337591222.813720|>26|ec=system:0,bytes_transferred=17
@asio|1337591222.813720|26*27|strand@003E8340.dispatch
@asio|1337591222.813720|>27|
@asio|1337591222.813720|27*28|socket@0012FAB0.async_send
@asio|1337591222.813720|<27|
@asio|1337591222.813720|<26|
@asio|1337591222.813720|>28|ec=system:0,bytes_transferred=37
@asio|1337591222.813720|28*29|strand@003E8340.dispatch
@asio|1337591222.813720|>29|
@asio|1337591222.813720|29*30|socket@003ECF2C.async_receive
@asio|1337591222.813720|<29|
@asio|1337591222.813720|<28|
@asio|1337591222.813720|>19|ec=system:0,bytes_transferred=20
@asio|1337591222.813720|19*31|strand@003E8340.dispatch
@asio|1337591222.813720|>31|
@asio|1337591222.813720|31*32|socket@0012FAB0.async_receive
@asio|1337591222.813720|<31|
@asio|1337591222.813720|<19|
@asio|1337591222.813720|>23|ec=system:0,bytes_transferred=18
@asio|1337591222.813720|23*33|strand@003E8340.dispatch
@asio|1337591222.829340|>33|
@asio|1337591222.829340|33*34|socket@0012FAB0.async_receive
@asio|1337591222.829340|<33|
@asio|1337591222.829340|<23| 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:54:51.803

取消 server_socket_ 上的 async.operations 的唯一可移植且可靠的方法是关闭它。有关详细信息，请参阅[以下链接](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_stream_socket/cancel/overload2.html)。

# parsing - 黑莓中的萨克斯解析

> ID：10683296
> 
> 赞同：0
> 
> 时间：2012-05-21T10:10:20.263
> 
> 标签：parsing, blackberry, sax

我正在尝试解析 xml 资源，但我无法解析。

xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
    <elencoanagrafiche trovati="7" errStatus="0">
        <anagrafica>
            <idAnagrafica>75</idAnagrafica>
            <nome><![CDATA[Alberto]]></nome>
            <cognome><![CDATA[Pippo]]></cognome>
            <email><![CDATA[aaa.bbb@ccc.it]]></email>
            <dataDiNascita><![CDATA[26/07/1478]]></dataDiNascita>
        </anagrafica>
        <anagrafica>
        .
        .
        </anagrafica>
    </elencoanagrafiche> 
```

我的萨克斯解析课：

```
package mypackage;

import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.RichTextField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.xml.parsers.SAXParser;
import net.rim.device.api.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XMLSAXParser extends MainScreen {

    private ButtonField _bIndietro = null;
    private UiApplication _uiApp;
    LabelField lbLine = new LabelField("-------------");

    public XMLSAXParser() {

        //setup della pagina(layout, bottoni, text)
        add(new RichTextField(ConnectionClass.url));

        _bIndietro = new ButtonField("Indietro", Field.FIELD_HCENTER | ButtonField.CONSUME_CLICK);
        _bIndietro.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field, int context) {
                ConnectionClass.connect();
                _uiApp.popScreen(XMLSAXParser.this);
            }
        });

        add(_bIndietro);

        _uiApp = UiApplication.getUiApplication();

        try {

            SAXParserFactory factory = SAXParserFactory.newInstance();
            SAXParser saxParser = factory.newSAXParser();

            DefaultHandler handler = new DefaultHandler() {

                boolean bidAnagrafica, belencoanagrafiche = false;
                boolean bname, banagrafica = false;
                boolean bcognome = false;

                public void startElement(String uri, String localName, String qName, Attributes attributes)
                        throws SAXException {

                    System.out.println("Start Element :" + qName);

                    if (qName.equalsIgnoreCase("elencoanagrafiche")) {
                        belencoanagrafiche = true;
                    }
                    if (qName.equalsIgnoreCase("anagrafica")) {
                        banagrafica = true;                 
                    }
                    if (qName.equalsIgnoreCase("idAnagrafica")) {
                        bidAnagrafica = true;
                    }
                    if (qName.equalsIgnoreCase("nome")) {
                        bname = true;                       
                    }
                    if (qName.equalsIgnoreCase("cognome")) {
                        bcognome = true;
                    }
                }

                public void endElement(String uri, String localName, String qName) throws SAXException {
                    System.out.println("End Element :" + qName);            
                }

                public void characters(char ch[], int start, int length) throws SAXException {

                    if (belencoanagrafiche) {
                        LabelField lb = new LabelField("elencoanagrafiche : " + new String(ch, start, length));
                        HorizontalFieldManager sr = new HorizontalFieldManager();
                        sr.add(lb);
                        add(sr);
                        belencoanagrafiche = false;
                    }

                    if (banagrafica) {
                        LabelField lb = new LabelField("anagrafica : " + new String(ch, start, length));
                        HorizontalFieldManager sr = new HorizontalFieldManager();
                        sr.add(lb);
                        add(sr);
                        add(new LabelField("-----"));
                        banagrafica = false;
                    }

                    if (bidAnagrafica) {
                        LabelField lb = new LabelField("idAnagrafica : " + new String(ch, start, length));
                        HorizontalFieldManager sr = new HorizontalFieldManager();
                        sr.add(lb);
                        add(sr);
                        bidAnagrafica = false;
                    }

                    if (bname) {
                        LabelField lb = new LabelField("Nome :" + new String(ch, start, length));
                        HorizontalFieldManager sr = new HorizontalFieldManager();
                        sr.add(lb);
                        add(sr);
                        bname = false;
                    }

                    if (bcognome) {
                        LabelField lb = new LabelField("Cognome : " + new String(ch, start, length));
                        HorizontalFieldManager sr = new HorizontalFieldManager();
                        sr.add(lb);
                        add(sr);
                        bcognome = false;
                    }
                }

            };

            InputStream inputStream = ConnectionClass.httpConn.openInputStream();
            Reader reader = new InputStreamReader(inputStream,"UTF-8");

            InputSource is = new InputSource(reader);
            is.setEncoding("UTF-8");

            //InputStream inputStream = ConnectionClass.httpConn.openInputStream();

            saxParser.parse(inputStream, handler);

        } catch (Exception e) {
            e.printStackTrace();
            Dialog.alert("Exception Error: " + e.toString());
        }
    }
} 
```

现在我的问题是我没有得到任何元素值，如姓名、认知、电子邮件等。我只得到了 id 标识符，但没有得到 . 所以我的问题是如何获取 CDATA 中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:40:44.357

我的猜测：characters() 方法被多次调用，第一次调用时会得到一个空字符串，并将布尔标志设置为 false。您应该在随后的 characters() 调用中使用 StringBuffer，如下所示：

```
private StringBuffer buffer = new StringBuffer();

...

public void characters(final char[] ch, final int start, final int length) throws SAXException
{
    buffer.append(new String(ch, start, length).trim());
} 
```

并将处理留给 endElement() 方法（完成后清除缓冲区）。

# c - 在 C 程序中调用默认的 windows 可执行文件

> ID：10683302
> 
> 赞同：5
> 
> 时间：2012-05-21T10:10:40.100
> 
> 标签：c, windows, winapi

我使用`system()`函数来调用`certmgr.exe`我的 C 代码。一旦我启动我的可执行文件，就会出现一个命令提示符，显示证书已成功安装。

但我不希望打开命令提示符。怎么做？？

任何其他可用于调用 C 语言中的“exe”的方法..

谢谢，，，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:17:50.683

在 Windows 上执行此操作的最简单方法是调用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153.aspx). 通过`SW_HIDE`以确保不显示任何控制台窗口。

您也可以使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425.aspx)，但调用起来有点棘手。使用该`CREATE_NO_WINDOW`标志来抑制控制台窗口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:20:14.400

我不会使用系统来运行任何东西..这就是为什么：[http ://www.cplusplus.com/forum/articles/11153/](http://www.cplusplus.com/forum/articles/11153/)

您可以使用 ShellExecute 运行应用程序[http://msdn.microsoft.com/en-us/library/bb762153(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb762153%28VS.85%29.aspx)通过 SW_HIDE 就完成了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T10:17:20.830

没有办法`cmd.exe`静默/在后台运行。但是，请查看`start`命令及其相关`/B`选项：

> 启动一个单独的窗口以运行指定的程序或命令。
> 
> START ["title"] [/D 路径] [/I] [/MIN] [/MAX] [/SEPARATE | /共享] [/低 | /正常 | /高 | /实时 | /高于正常 | /BELOWNORMAL] [/AFFINITY ] [/WAIT] [/B​​] [命令/程序] [参数]
> 
> [...] B 在不创建新窗口的情况下启动应用程序。应用程序忽略了 ^C 处理。除非应用程序启用 ^C 处理，否则 ^Break 是中断应用程序的唯一方法。

你会过得更好[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T10:18:25.893

WINAPI 有一个[`CreateProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数可以用来运行另一个可执行文件。此函数有几个参数*可以*提供不显示控制台窗口的机制`certmgr.exe`（来自[进程创建标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)参数）：

> CREATE_NO_WINDOW 该进程是一个在没有控制台窗口的情况下运行的控制台应用程序。因此，未设置应用程序的控制台句柄。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T04:40:41.707

TED 在[此链接](https://stackoverflow.com/questions/2030331/system-function-opens-a-window)中的回答最终帮助了我...

这可能对将来的某些人有所帮助...

其他人提到使用 CreateProcess （大概是为了重定向输出）。发生这种情况的一般原因是您通过“系统”运行的程序是命令行程序。如果它是您自己编译的东西，您可以通过将其构建为 GUI 程序来摆脱控制台窗口。您应该能够通过包含 Windows.h 并使用 WinMain() 作为入口点而不是 main() 来做到这一点

# javascript - Facebook 评论小部件使页面在 IE7 IE8 中跳到底部

> ID：10683304
> 
> 赞同：0
> 
> 时间：2012-05-21T10:10:43.377
> 
> 标签：javascript, html, facebook, internet-explorer, loading

我有一个相当长的页面，底部有 Facebook 评论小部件。有了这个小部件，页面在 IE7 和 IE8 中加载时跳转到底部。每当我删除小部件时，页面都会正常加载。这不会发生在任何其他浏览器上。谁能建议任何方法来防止这种情况？我尝试在文档准备好时附加 .fb-comments div 并在其上调用 FB.XFBML.parse() ，但这种情况下的行为是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:27:30.307

这是一个 Facebook 错误。我认为他们正在努力。如果你去 FB 上的开发者专区，会有一个讨论它的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:34:48.767

也出现在 IE9 中，最近几周我的 Web 应用程序没有更新，应该是 facebook 错误或 IE 错误

# svn - svn pre-commit hook 来阻止提交而不合并

> ID：10683308
> 
> 赞同：0
> 
> 时间：2012-05-21T10:11:06.917
> 
> 标签：svn

如果修订不是合并的，我试图编写一个预提交挂钩来阻止开发人员提交到发布分支。仅允许开发人员提交合并的修订。

这是我计划好的行动

svn:mergeinfo 属性将跟踪合并的修订。所以如果我设法获得即将提交的修订，则在我的预提交挂钩中。我可以根据 mergeinfo 输出检查它以查看修订是否是合并的.

从理论上讲，这似乎很容易。问题是我怎样才能得到修订。

我如何从 SVNLOOK 命令中获取修订号

如果我的问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:49:06.033

如果您的开发人员没有那么受过教育，那么他们可能不会意识到您的 svn 钩子在做什么，并且如果他们故意编辑 svn:mergeinfo 属性纯粹是为了提交到发布分支而不是合并，那么您会遇到更大的问题。

此脚本检查提交是否针对发布分支。然后它使用 svnlook diff 检查是否有属性更改以及 svn:mergeinfo 是否已更改。

```
!#/bin/bash
REPOS="$1"
TXN="$2"

#Make the release branch only accept merge commits
if svnlook changed $REPOS -t $TXN |grep -q "my-release-branch-name/" ; then
    if svnlook diff $REPOS -t $TXN |grep 'Modified: svn:mergeinfo' && svnlook diff $REPOS -t $TXN |grep 'Property changes on:'; then
        #Assume that someone hasn't gone to the trouble of making a commit look like a merge!
        exit 0
    else
        echo "Branch my-release-branch-name only accepts merge commits! " 1>&2
        exit 1
    fi
fi

# All checks passed, so allow the commit.
exit 0 
```

# java - 使用 JSlider 移动 JScrollPanel？

> ID：10683310
> 
> 赞同：2
> 
> 时间：2012-05-21T10:11:28.067
> 
> 标签：java, image, swing, jscrollpane, jslider

我正在制作一个 Java 应用程序，它可以在时间轴内查看一组图像。我的想法是使用 JScrollPane 以及在网格布局中设置的所有图像集，但我不想使用传统的滚动条滚动窗格，而是想使用类似 JSlider 的东西。

这样做的目的是让用户更好地控制和了解图像子集的显示时间，并提供更好的时间线效果。我在下面制作了一个简单的视觉示例来说明我的想法：

![在此处输入图像描述](../Images/1a2906ce79af8c3d52db2f4ab782e5ac.png)

我想知道这是否可能，因为经过广泛的研究，我还没有看到任何类似的例子。非常感谢任何可能的解决方案的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:20:14.673

一些想法：将图像放入 JPanel 并将此 JPanel 放入完全没有滚动条的[JScrollPane中。](http://docs.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html#setViewport%28javax.swing.JViewport%29)然后将滑块 (ChangeListener) 与 JViewPort 同步。

或者（更简单）使用水平滚动条作为滑块并使用标签自定义 JScrollBar。

# php - 如何将多种不同类型的产品添加到购物车

> ID：10683314
> 
> 赞同：0
> 
> 时间：2012-05-21T10:11:34.983
> 
> 标签：php, mysql

我正在创建一个购物车，我试图在其中添加不同类型的产品，例如`Mobiles`等`clothes`。我创建了一个`add_to_cart`方法并将产品添加到会话中，最后我将所有产品保存到数据库表中。但是现在我很困惑如何添加不同的产品，因为不同产品的参数不同，例如

```
1\. product_id, quantity, price for mobile.
2\. product_id, quantity, price, size for cloths.
.... 
```

`add_to_cart()`我应该为不同类型的产品创建不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:18:36.953

只要产品至少有一些共同的领域，编写不同的方法并不完全合理。

其他属性可以简单地作为键值对传递。

将数据写入数据库时​​，可以应用[EAV 建模](http://www.iwilldomybest.com/2008/08/php-mysql-tip-3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:41:24.120

您可以将基本常见的东西保留在主数组和规范数组中，如下所示 Products[mobile] =>array(name => 'test1', price =>'20' specification=array('color'=>red,model= >'N70'等......））

Products[cloths] =>array(name => 'test1', price =>'30' specification=array('size'=>'XL',color=>'yello',etc......))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:14:53.990

在您的场景中，最好将产品选项作为 JSON 字符串发送，然后在服务器端对其进行解码，这样您就不必担心每个产品的不同选项。

所以产品一可能有如下选项：

```
{color: "black", size: "large"} 
```

产品二可能有：

```
{memory: "2 GB", harddisk: "750 GB"} 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:27:42.107

您可以继续使用**add_to_cart()**

相反，您将添加一个数组参数，例如“属性”或“额外”，并在那里添加*特定/唯一的*产品值键。

然后在数据库中创建一个可变大小的“属性”列，例如。VARCHAR(128) 并添加那些编码为**JSON的属性**

您仍然可以使用 "LIKE '%"attribute" :%'" (json) 搜索任何产品

这不会强迫您为每个新产品属性创建额外的列。

# iphone - 如何在 iOS 上检测图像中的向上箭头？

> ID：10683317
> 
> 赞同：1
> 
> 时间：2012-05-21T10:11:41.023
> 
> 标签：iphone, ios, image-processing, opencv

我有一个图像，其左侧包含一个向上的箭头。我希望能够检测到该方向的特定形状，如果存在，则仅捕获图像的该部分。如果箭头朝下，我希望它被忽略。

我已经研究过使用 SURF 描述符和 OpenCV 来检测和匹配这样的形状，但是围绕 SURF 算法存在许可问题。我可以使用哪些替代方法在 iOS 上的图像中以这个特定方向检测这个形状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:43:05.917

一个简单的模板匹配可以解决这个问题。构建模板（或从现有图像裁剪）“向上箭头”。然后使用归一化互相关查看测试图像中所有“向上箭头”的位置。由于您只在图像左侧寻找“向上箭头”，因此请限制该区域中的归一化互相关搜索。这是一个很好的教程： http: [//www.mathworks.com/products/demos/image/cross_correlation/imreg.html](http://www.mathworks.com/products/demos/image/cross_correlation/imreg.html)

# jsf-2 - 有没有办法让 h:panelGrid 可以访问？

> ID：10683340
> 
> 赞同：1
> 
> 时间：2012-05-21T10:13:23.920
> 
> 标签：jsf-2, accessibility

我正在使用 JSF2.0，但在使用 panelGrid 时遇到了可访问性问题。

在这种情况下，我使用了两个嵌套的 panelGrid：

```
<h:panelGrid id="inq" columns="1" 
    columnClasses="columnclass-noborders" >
<h:panelGrid  columns="2" 
    columnClasses="columnclass-noborders columnclass-right-padding, 
    columnclass-noborders"
    cellspacing="0" cellpadding="0"> 
```

网站[http://achecker.ca/checker/index.php](http://achecker.ca/checker/index.php)

返回以下错误。

有没有办法按照 WCAG 2.0 AA 的要求获取 panelGrid 可访问的设置 ID 和标题？

1.3 适应性：创建可以以不同方式呈现的内容（例如更简单的布局），而不会丢失信息或结构。

成功标准 1.3.1 信息和关系 (A)

检查 245：具有多于一行/列标题的数据表不使用 id 和 headers 属性来识别单元格。修复：将 id 和 headers 属性添加到表格单元格，以便它们识别与标题相关的单元格。

错误第 61 行，第 22 列：

```
<table id="form:inq">
<tbody>
<tr>
<td class="columnclass-noborders"><table cellpadding="0" cells ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T15:13:33.797

在没有看到完整代码的情况下，我假设您使用第一个 panelGrid 作为标题行，第二个保存数据。看起来[http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGrid.html](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_panelGrid.html)上的表格可以部分访问。你或许可以从中得到一些想法。该链接使用：

```
<f:facet name="header">
 <h:outputText value="#{bundle.signInMessage}"/>
</f:facet> 
```

看起来像控制`<th>`. 您将需要控制标题和 ID，如下所示：[http ://www.w3.org/TR/html4/struct/tables.html#h-11.4.1](http://www.w3.org/TR/html4/struct/tables.html#h-11.4.1)

# xml - XSLT - 将字符串附加到变量并将其打印在不同的文件中

> ID：10683343
> 
> 赞同：2
> 
> 时间：2012-05-21T10:13:32.730
> 
> 标签：xml, function, xslt

我有这样的**XML**：

```
<article>
   <title>Article 1 title</title>
   <text>Lorem ipsum...</text>
   <image>http://example.com/img_01.jpg</image>
</article>
<article>
   <title>Article 2 title</title>
   <text>Dolor sit amet...</text>
   <image>http://example.com/img_02.jpg</image>
</article> 
```

我只需要显示图像的相对路径，并且我希望将绝对路径写入另一个文件。让我们称之为`img_to_download.html`。

这是我的想法。我有一个名为的全局变量`image_src_download`，我在 for-each 的每次迭代期间附加一个绝对路径字符串（使用函数`f:download`并给它一个参数`image_src`）。然后当 for-each 完成后，我将变量的内容放到`image_src_download`一个单独的文件`img_to_download.html`中。

我的**XSLT**看起来像这样：

```
 <xsl:output method="html" encoding="UTF-8"/>

        <xsl:variable name="image_src"/> <!-- this is for a single entry-->
        <xsl:variable name="image_src_download"/> <!-- this should carry all sources to images -->

<!-- This function should append new string to the existing one in variable image_src_download -->
        <xsl:function name="f:download">
            <xsl:param name="newLink"/>
            <xsl:variable name="image_src_download">
                <xsl:value-of select="concat($image_src_download, $newLink, '\n')"/>
            </xsl:variable>
        </xsl:function>

        <xsl:template match="/">
            <html>
                <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
                    <title>All articles</title>
                </head>
                <body>
                    <xsl:for-each select="article">
                        <h1><xsl:value-of select="title"/></h1>
                        <p><xsl:value-of select="text"/></p>

                        <xsl:variable name="image_src">
                            <xsl:value-of select="image"/>
                        </xsl:variable>
                        <xsl:variable name="image_src_rel">
                            <xsl:value-of select="substring($image_src, 20)"/> <!-- Strips beggining of the absolute URL and leaves just relative path to the file -->
                        </xsl:variable>

                            <xsl:value-of select="f:download($image_src)"/> <!-- This should append absolute path string of the current article image to variable image_src_download -->
                            <p><img src="{$image_src_rel}" /></p>
                    </xsl:for-each>

                </body>
            </html>

            <!-- Generates new file where there are absolute paths to images on each line-->
            <xsl:result-document href="img_to_download.html" method="html">
                <html>
                    <head>
                        <title>IMG to download</title>
                    </head>
                    <body>
                        <xsl:value-of select="$image_src_download"/>
                    </body>
                </html>
            </xsl:result-document>
        </xsl:template> 
```

我**想要的输出**是两个文件。`articles.html`看起来像这样的文件：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title>All articles</title>
    </head>
    <body>
      <h1>Article 1 title</h1>
      <p>Lorem ipsum...</p>
      <p><img src="img_01.jpg"/></p>

      <h1>Article 2 title</h1>
      <p>Dolor sit amet...</p>
      <p><img src="img_02.jpg"/></p>
    </body>
</html> 
```

`img_to_download.html`看起来像这样的文件：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      <title>IMG to download</title>
    </head>
    <body>
      <p>
        http://example.com/img_01.jpg<br/>
        http://example.com/img_02.jpg<br/>    
      </p>
    </body>
</html> 
```

拜托，你知道如何使这项工作吗？

一切顺利，约翰尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:46:36.700

在 XSLT 中，一旦变量初始化，您就无法更改它们。相反，使用不同的模式处理 XML 节点两次，以便为*文章*元素生成不同的输出。也许类似以下的内容足以完成您的任务：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>

  <xsl:template match="/">
    <html>
      <head>...</head>
      <body>
        <xsl:apply-templates/>
      </body>
    </html>
    <xsl:result-document href="img_to_download.html" method="html">
      <html>
        <head>...</head>
        <body>
          <p>
            <xsl:apply-templates mode="extern"/>
          </p>
        </body>
      </html>
    </xsl:result-document>    
  </xsl:template>

  <xsl:template match="article">
    <h1><xsl:value-of select="title"/></h1>
    <p><xsl:value-of select="text"/></p>
    <p><img src="{tokenize(image, '/')[last()]}"/></p>
  </xsl:template>

  <xsl:template match="article" mode="extern">
    <img src="{image}"/>
    <br/>
  </xsl:template>

  <xsl:template match="text()" mode="#all"/>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T03:39:33.267

**这很容易做到**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:result-document href="articles.html">
     <html>
       <head>
          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
          <title>All articles</title>
        </head>
        <body>
         <xsl:apply-templates/>
        </body>
    </html>
     </xsl:result-document>

     <xsl:result-document href="img_to_download.html">
    <html>
       <head>
          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
          <title>IMG to download</title>
        </head>
        <body>
          <p>
           <xsl:apply-templates mode="url"/>
          </p>
        </body>
    </html>
     </xsl:result-document>
 </xsl:template>

 <xsl:template match="title/text()">
  <h1><xsl:value-of select="."/></h1>
 </xsl:template>

 <xsl:template match="text/text()">
  <p><xsl:value-of select="."/></p>
 </xsl:template>

 <xsl:template match="image">
  <xsl:variable name="vSrc" select=
   "replace(., 'http://((.+/)*)(.+)', '$3')"/>
  <p><img src="{$vSrc}"/></p>
 </xsl:template>

 <xsl:template match="*[not(self::image)]/text()" mode="url"/>

 <xsl:template match="image/text()" mode="url">
  <xsl:text>&#xA;</xsl:text>
  <xsl:value-of select="."/><br/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<html>
    <article>
        <title>Article 1 title</title>
        <text>Lorem ipsum...</text>
        <image>http://example.com/img_01.jpg</image>
    </article>
    <article>
        <title>Article 2 title</title>
        <text>Dolor sit amet...</text>
        <image>http://example.com/img_02.jpg</image>
    </article>
</html> 
```

**以下两个文件创建于`C:\Program Files\Java\jre6\bin`：**

文章.html：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>All articles</title>
   </head>
   <body>
      <h1>Article 1 title</h1>
      <p>Lorem ipsum...</p>
      <p><img src="img_01.jpg"></p>
      <h1>Article 2 title</h1>
      <p>Dolor sit amet...</p>
      <p><img src="img_02.jpg"></p>
   </body>
</html> 
```

img_to_download.html：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>IMG to download</title>
   </head>
   <body>
      <p>
         http://example.com/img_01.jpg<br>
         http://example.com/img_02.jpg<br></p>
   </body>
</html> 
```

**并且可以看出文件中包含的正是想要的结果**。

# android - adb push 复制不好

> ID：10683348
> 
> 赞同：0
> 
> 时间：2012-05-21T10:13:48.843
> 
> 标签：android, adb

我在使用命令时遇到问题`adb push`。当我在第一次迭代时不执行循环时，其余部分本身。

任何想法？

```
public void export_APK(String dir, String nom_fich, String dir_padre) throws IOException, InterruptedException{ 

        Process p6;

        Runtime.getRuntime().exec("cmd /c adb wait-for-device");               
        Runtime.getRuntime().exec("cmd /c adb install -r " + dir);

            Runtime.getRuntime().exec("adb shell rm -r /sdcard/Alumno");        
            Runtime.getRuntime().exec("adb shell mount /sdcard");
            Runtime.getRuntime().exec("adb shell mkdir /sdcard/Alumno");            

  for (Integer i=1;i<6;i++){                              
    p6 = Runtime.getRuntime().exec("adb push c:\image\photo" + i + " /sdcard/Alumno/Actividad"+i);            
    p6.waitFor();                
  }                                     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:17:50.050

// 你的 for 循环是错误的

```
 for (int i=1;i<6;i++){                              
    Process p6 = Runtime.getRuntime().exec("adb push c:\image\photo" + i + " /sdcard/Alumno/Actividad"+i);            
    p6.waitFor(); 
Log.d("Inside loop","---i==="+i);

      } 
```

# linux - 强制 bash 扩展从文件加载的字符串中的变量

> ID：10683349
> 
> 赞同：104
> 
> 时间：2012-05-21T10:13:49.630
> 
> 标签：linux, bash, shell, unix

我正在尝试研究如何使 bash （强制？）扩展字符串中的变量（从文件中加载）。

我有一个名为“something.txt”的文件，内容如下：

```
hello $FOO world 
```

然后我跑

```
export FOO=42
echo $(cat something.txt) 
```

这返回：

```
 hello $FOO world 
```

即使设置了变量，它也没有扩展 $FOO。我无法评估或获取文件 - 因为它会尝试执行它（它不是可执行的 - 我只想要插入变量的字符串）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2015-08-10T18:13:41.730

我偶然发现了我认为是这个问题的答案： `envsubst`命令。

```
envsubst < something.txt 
```

示例：替换文件 source.txt 中的变量并将其写入destination.txt 以进行进一步处理

```
envsubst < "source.txt" > "destination.txt" 
```

## 如果它在您的发行版中尚不可用，则它位于 GNU 包`gettext`中。

@Rockallite

*   我写了一个小包装脚本来处理“$”问题。

（顺便说一句，envsubst 有一个“功能”，在 [https://unix.stackexchange.com/a/294400/7088](https://unix.stackexchange.com/a/294400/7088)解释了 仅扩展输入中的一些变量，但我同意转义异常更多方便的。）

这是我的脚本：

```
#! /bin/bash
      ## -*-Shell-Script-*-
CmdName=${0##*/}
Usage="usage: $CmdName runs envsubst, but allows '\$' to  keep variables from
    being expanded.
  With option   -sl   '\$' keeps the back-slash.
  Default is to replace  '\$' with '$'
"

if [[ $1 = -h ]]  ;then echo -e >&2  "$Usage" ; exit 1 ;fi
if [[ $1 = -sl ]] ;then  sl='\'  ; shift ;fi

sed 's/\\\$/\${EnVsUbDolR}/g' |  EnVsUbDolR=$sl\$  envsubst  "$@" 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-12-01T20:01:58.773

许多答案使用`eval`和`echo`工作，但在各种事情上中断，例如多行，试图转义 shell 元字符，在模板内转义不打算由 bash 扩展等。

我遇到了同样的问题，并编写了这个 shell 函数，据我所知，它可以正确处理所有内容。由于 bash 的命令替换规则，这仍然只会从模板中删除尾随换行符，但只要其他所有内容保持不变，我就从未发现这是一个问题。

```
apply_shell_expansion() {
    declare file="$1"
    declare data=$(< "$file")
    declare delimiter="__apply_shell_expansion_delimiter__"
    declare command="cat <<$delimiter"$'\n'"$data"$'\n'"$delimiter"
    eval "$command"
} 
```

例如，您可以将它与 a 一起使用，它`parameters.cfg`实际上是一个仅设置变量的 shell 脚本，而 a`template.txt`是使用这些变量的模板：

```
. parameters.cfg
printf "%s\n" "$(apply_shell_expansion template.txt)" > result.txt 
```

在实践中，我将其用作一种轻量级模板系统。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-21T11:14:21.957

你可以试试

```
echo $(eval echo $(cat something.txt)) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-21T10:23:10.967

您不想打印每一行，而是想对其*进行评估*，以便 Bash 可以执行变量替换。

```
FOO=42
while read; do
    eval echo "$REPLY"
done < something.txt 
```

有关更多信息，请参阅`help eval`或 Bash 手册。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-05-22T02:27:50.870

另一种方法（这看起来很恶心，但我还是把它放在这里）：

将 something.txt 的内容写入临时文件，并在其周围加上 echo 语句：

```
something=$(cat something.txt)

echo "echo \"" > temp.out
echo "$something" >> temp.out
echo "\"" >> temp.out 
```

然后将其重新输入到变量中：

```
RESULT=$(source temp.out) 
```

并且 $RESULT 将使其全部扩展。但似乎大错特错！

* * *

不需要临时文件的单行解决方案：

```
RESULT=$(source <(echo "echo \"$(cat something.txt)\""))
#or
RESULT=$(source <(echo "echo \"$(<something.txt)\"")) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-13T20:25:11.003

如果您只想扩展变量引用（我自己的目标），您可以执行以下操作。

```
contents="$(cat something.txt)"
echo $(eval echo \"$contents\") 
```

（$contents 周围的转义引号是这里的关键）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-07T17:53:47.463

1.  如果*某事*.txt只有*一行*，一个`bash`方法，（迈克尔尼尔[*的*“icky”答案](https://stackoverflow.com/a/10695043/6136214)的较短版本），使用*过程*和*命令替换*：

    ```
    FOO=42 . <(echo -e echo $(<something.txt)) 
    ```

    输出：

    ```
    hello 42 world 
    ```

    请注意，这`export`不是必需的。

2.  如果*something.txt*有一行或多行，*GNU* *评估*方法：`sed` **`e`**

     *```
    FOO=42 sed 's/"/\\\"/g;s/.*/echo "&"/e' something.txt 
    ```* 

 ** * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-16T18:09:49.113

以下解决方案：

*   允许替换定义的变量

*   保留未定义的变量占位符不变。这在自动部署期间特别有用。

*   支持以下格式的变量替换：

    `${var_NAME}`

    `$var_NAME`

*   报告哪些变量未在环境中定义并针对此类情况返回错误代码

```
 TARGET_FILE=someFile.txt;
    ERR_CNT=0;

    for VARNAME in $(grep -P -o -e '\$[\{]?(\w+)*[\}]?' ${TARGET_FILE} | sort -u); do     
      VAR_VALUE=${!VARNAME};
      VARNAME2=$(echo $VARNAME| sed -e 's|^\${||g' -e 's|}$||g' -e 's|^\$||g' );
      VAR_VALUE2=${!VARNAME2};

      if [ "xxx" = "xxx$VAR_VALUE2" ]; then
         echo "$VARNAME is undefined ";
         ERR_CNT=$((ERR_CNT+1));
      else
         echo "replacing $VARNAME with $VAR_VALUE2" ;
         sed -i "s|$VARNAME|$VAR_VALUE2|g" ${TARGET_FILE}; 
      fi      
    done

    if [ ${ERR_CNT} -gt 0 ]; then
        echo "Found $ERR_CNT undefined environment variables";
        exit 1 
    fi 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-11T15:51:12.967

```
foo=45
file=something.txt       # in a file is written: Hello $foo world!
eval echo $(cat $file) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-27T20:21:29.513

```
$ eval echo $(cat something.txt)
hello 42 world
$ bash --version
GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin17)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-08-21T09:14:52.583

`envsubst`如果您要替换的内容具有“合理”的长度，这是一个很好的解决方案（请参阅 LenW 的答案）。

就我而言，我需要替换文件的内容来替换变量名。`envsubst`要求将内容导出为环境变量，而bash在导出超过1兆字节左右的环境变量时会出现问题。

## awk 解决方案

从另一个问题使用 cuonglm 的[解决方案：](https://unix.stackexchange.com/a/141398/149244)

```
needle="doc1_base64" # The "variable name" in the file. (A $ is not needed.)
needle_file="doc1_base64.txt" # Will be substituted for the needle 
haystack=$requestfile1 # File containing the needle
out=$requestfile2
awk "BEGIN{getline l < \"${needle_file}\"}/${needle}/{gsub(\"${needle}\",l)}1" $haystack > $out 
```

该解决方案甚至适用于大文件。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-02-16T14:16:43.770

```
expenv () {
    LF=$'\n'
    echo "cat <<END_OF_TEXT${LF}$(< "$1")${LF}END_OF_TEXT" | bash
    return $?
}

expenv "file name" 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2018-04-17T11:35:09.187

以下作品：`bash -c "echo \"$(cat something.txt)"\"`*

# jquery - 使用 jQuery Ajax 调用 SOAP-XML Web 服务 - 缩小实现？

> ID：10683350
> 
> 赞同：1
> 
> 时间：2012-05-21T10:13:55.880
> 
> 标签：jquery, ajax, web-services, soap

我正在使用以下直接的 jQuery 实现

```
 var soapMessage = '<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">\
    <soap:Body xmlns:ns1="http://site.com/">\
        <ns1:insertLocationElement>\
            <ns1:location>\
                <ns1:locationName>' + sName + '</ns1:locationName>\
                <ns1:locRadius>' + sRadius + '</ns1:locRadius>\
                <ns1:lngGPS>' + gLongitude + '</ns1:lngGPS>\
                <ns1:latGPS>' + gLatitude + '</ns1:latGPS>\
                <ns1:locationAddress>' + sAddress + '</ns1:locationAddress>\
            </ns1:location>\
        </ns1:insertLocationElement>\
    </soap:Body>\
</soap:Envelope>';

    $.ajax({
        type : "POST",
        url : service,
        data : soapMessage,
        contentType : "text/xml; charset=ansi",
        dataType : "xml",
        success : AjaxSucceededInsert,
        error : AjaxFailedGeneral
    }); 
```

我想知道 - 有没有其他方法可以调用此类 Web 服务，而不包括整个 SOAP 信封？它使代码完全不干净IMO。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:27:59.337

SOAP 协议消息格式定义了 3 个元素：Envelope、Header 和 Body。这三个中，Header 是可选的，可以省略，另外两个是强制性的（[SOAP 1.1 Specification: 4\. SOAP Envelope](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383494)，[SOAP 1.2 Specification: 5\. SOAP Message Construct](http://www.w3.org/TR/2007/REC-soap12-part1-20070427/#soapenv)）。

因此，您不能完全摆脱 Envelope 元素，因为它是 SOAP 协议消息格式所要求的。但是，您可以使用一些现成的库来隐式地为您准备消息，这样您就不必处理它。它还允许您将 SOAP 消息构造代码保存在您看不到的深处某个地方。它肯定会让你的代码更干净。

快速谷歌搜索告诉我们有一个名为[jqSOAPClient](http://plugins.jquery.com/project/jqSOAPClient)的 jQuery 插件可供我们使用，但不幸的是，jQuery 插件网站目前处于离线状态。其他替代方法是[JavaScript SOAP Client](http://www.guru4.net/articoli/javascript-soap-client/en/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:47:21.383

有一个相对较新的插件可用：

[http://plugins.jquery.com/soap/](http://plugins.jquery.com/soap/)

我分叉了这个项目，并且一直在进行一些修改（插件没有处理我正在使用的服务）。我希望在某个时候合并我的更新，但很高兴收到任何反馈。

[https://github.com/zachofalltrades/jquery.soap](https://github.com/zachofalltrades/jquery.soap)

这个插件的真正好处是它会为你构建 XML。您提供一个 JSON 数据结构，以及几个额外的参数。该插件构建 XML，将其发送到服务，并将响应转换回 JSON。

# internet-explorer - IE COM 的 querySelectorAll 在 IE 8 中不起作用

> ID：10683351
> 
> 赞同：3
> 
> 时间：2012-05-21T10:14:00.240
> 
> 标签：internet-explorer, powershell, com, internet-explorer-8, powershell-2.0

我正在`InternetExplorer.Application`通过 Powershell 访问 COM。我正在尝试使用 的`querySelector`，`document`但它不返回任何结果。我目前正在使用 IE8。

```
$ie = New-Object -com "InternetExplorer.Application"
$ie.visible = $true
$ie.Navigate("www.google.com")

if ($ie.Busy) { Start-Sleep 1 }

# This statement works
@($ie.Document.getElementsByTagName("a"))[0]

# This statement doesn't work, though querySelectorAll 
# exist in the document object
@($ie.Document.querySelectorAll("a"))[0]

# I tried this
$ie.Document.querySelectorAll("a") -eq $null # evaluates to True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:53:02.090

使用[IDocumentSelector](http://msdn.microsoft.com/en-us/library/cc288530)前缀来引用该方法，使用如下内容：

```
$ie.Document.IDocumentSelector_querySelectorAll("a") 
```

有[一](http://poshcode.org/561)[两个](https://stackoverflow.com/questions/6065359/powershell-ie9-and-getelementbyid)powershell 浏览器API 故障排除资源可能会有所帮助。如果[文档](http://code.google.com/p/selenium/issues/detail?id=2202)类型导致浏览器呈现几乎是标准或怪癖模式（不支持 querySelectorAll），则[Sizzle可能会有所帮助。](http://code.google.com/p/selenium/issues/detail?id=823)

# python - 将正在运行的守护程序重新连接到标准输出

> ID：10683356
> 
> 赞同：0
> 
> 时间：2012-05-21T10:14:43.023
> 
> 标签：python, multithreading, python-3.x, stdout, pyro

我有一个对象在 py3k 中作为守护进程运行。为此，我在线程中使用[Pyro4](http://pypi.python.org/pypi/Pyro4)模块（基于Sander Marechal[的代码](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)[daemon.py](http://paste.mart-e.be/xebikijima.py)）。

```
class MyDaemon(Daemon):

    def run(self):
        mo = MyObject()
        daemon = Pyro4.Daemon(host=HOST, port=PORT)
        uri = daemon.register(mo, USER)
        logging.debug("MyObject ready. Object uri = {0}".format(uri))

        daemon.requestLoop() 
```

并在需要时，我得到对象

```
mo = Pyro4.Proxy("PYRO:%s@%s:%i" % (USER, HOST, PORT))
mo.myAction(my_args) 
```

现在我希望 MyObject 模块将文本输出到 sdtout。问题是，在线程中运行时，它没有连接到`sys.__stdout__`.

```
class MyObject():
    def greeting(self):
        print("Hello world") # lost 
```

我试图创建一个`mo.reconnect(sys.__stdout__)`函数来将当前标准输出绑定到线程中的标准输出，但 Pyro4 不接受缓冲区作为参数。

一个解决方案可能是在我的函数末尾简单地返回文本，该文本将由 Pyro4 代理接收，但我也希望能够在函数内显示信息。

这个问题也适用于标准输入。

有没有办法实现我正在寻找的东西？有什么我没有得到并且我过于复杂的东西吗？也许 Pyro4 不是最好的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T19:21:10.733

为什么你希望你的守护进程与标准输入和标准输出交互？它是一个守护进程这一事实意味着它不应该与“用户”（stdin 和 stdout 的目标用户）交互。

一切都取决于您希望通过将其输入和输出连接到标准输入或输出来实现的目标：

*   如果你想要用户交互，你应该让你的主代码充当处理输入和输出的守护进程的代理，而守护进程只是做处理。即你的守护进程的接口应该将输入字符串（或对象，如果更容易的话）作为参数，并输出你的代理将接受并输出给用户的类似对象。

*   如果你想调试输出，一个快速的补丁是直接从`/tmp/sdaemon.log`所有守护进程输出所在的文件中读取（根据[第 44 行](http://paste.mart-e.be/xebikijima.py)）。一个更体面的解决方法是在整个代码中实现[正确的日志记录。](http://docs.python.org/library/logging.html)

# cocos2d-iphone - 将 cocos2d 场景添加到 UIView 的步骤

> ID：10683357
> 
> 赞同：1
> 
> 时间：2012-05-21T10:14:46.823
> 
> 标签：cocos2d-iphone

谁能说出将`cocos2d`场景添加到 uikit 项目的步骤。我是新手`cocos2d`，不知道如何添加相关文件`cocos2d`，还请解释在 ui 文件中添加 eagl 视图的位置。

并且还分享一个`cocos2d`在uiview中添加a的链接，而不是相反。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:44:06.440

在我看来，将 uikit 与 cocos2d 混合并不是一个好主意。您可以在任何 cocos2d 模板中找到创建 eaglview 的示例。在这里您可以阅读如何安装 cocos2d 模板。

[http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_1._install_test](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:lesson_1._install_test)

# java - org.xmlpull.v1.XmlPullParserException

> ID：10683363
> 
> 赞同：0
> 
> 时间：2012-05-21T10:15:05.970
> 
> 标签：java, eclipse, unmarshalling, jibx, xmlpullparser

我正在尝试将 xml 文件（作为 a `byte[]`）绑定到 java 对象。这是我的代码-

```
public voidinputConfigXML(String xmlfile, byte[] xmlData) {
    IBindingFactory bFact = BindingDirectory.getFactory(GroupsDTO.class);
                IUnmarshallingContext uctx = bFact.createUnmarshallingContext();
                groups = (GroupsDTO) uctx.unmarshalDocument(new ByteArrayInputStream(xmlData), "UTF8");
} 
```

这`unmarshalDocument()`给了我这个例外。我该怎么办？

**仅供参考：作为 JUnit 测试用例运行**

以下是堆栈跟踪 -

```
 Error parsing document (line 1, col 1)
    org.xmlpull.v1.XmlPullParserException: only whitespace content allowed before start tag and not \u0 (position: START_DOCUMENT seen \u0... @1:1) 
        at org.xmlpull.mxp1.MXParser.parseProlog(MXParser.java:1519)
        at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1395)
        at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)
        at org.jibx.runtime.impl.XMLPullReaderFactory$XMLPullReader.next(XMLPullReaderFactory.java:291)
        at org.jibx.runtime.impl.UnmarshallingContext.toStart(UnmarshallingContext.java:451)
        at org.jibx.runtime.impl.UnmarshallingContext.unmarshalElement(UnmarshallingContext.java:2755)
        at org.jibx.runtime.impl.UnmarshallingContext.unmarshalDocument(UnmarshallingContext.java:2905)
        at abc.dra.DRAAPI.inputConfigXML(DRAAPI.java:31)
        at abc.dra.XMLToObject_Test.test(XMLToObject_Test.java:34)
        [...] 
```

这是我形成字节[]的代码-

```
void test() {
String xmlfile = "output.xml"
File file = new File(xmlfile);
byte[] xmlData = new byte[(int) file.length()];
groups = dra.inputConfigXML(xmlfile, xmlData);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:36:19.900

ByteArrayInputstream 为空：

```
only whitespace content allowed before start tag and not \u0 
(position: START_DOCUMENT seen \u0... @1:1) 
```

意味着，在 XML 中发现了一个 \u0 位作为第一个字符。

确保您的内容中有内容，`byte[]`并且 UTF-8 不以[BOM](http://en.wikipedia.org/wiki/Byte_Order_Mark)开头。

我不认为 BOM 是你的问题，但我经常遇到关于 BOM 和 java 的问题。

**更新**

你没有填写`byte[]`. 您必须将文件内容读入`byte[]`：阅读此：[Java 中的文件到字节 []](https://stackoverflow.com/questions/858980/file-to-byte-in-java)

顺便说一句：`byte[] xmlData = new byte[(int) file.length()];`是不好的代码风格，因为你会遇到更大的 XML 文件的问题。如果它们大于`Integer.MAX_VALUE`您将读取损坏的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:22:28.420

Hari，
JiBX 需要字符作为输入。我认为您指定的编码不正确。试试这个代码：

```
FileInputStream fis = new FileInputStream("output.xml");
InputStreamReader isr = new InputStreamReader(fis, "UTF8");
groups = (GroupsDTO) uctx.unmarshalDocument(isr); 
```

如果您必须使用您编写的代码，我会尝试将文本输出到控制台 (System.put.println(xxx)) 以确保您正确解码 utf-8。

大学教师

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:08:32.607

转到 mvn 存储库路径并删除 xml 文件的该文件夹。

# html - 渐变在 Chrome 中不起作用，但在 Firefox 中起作用

> ID：10683364
> 
> 赞同：3
> 
> 时间：2012-05-21T10:15:09.023
> 
> 标签：html, css, firefox, google-chrome

我正在尝试为 Chrome 使用 webkit 渐变标签，但它根本不起作用。我已经在 Firefox 中尝试了它`background:-moz-linear-gradient(#000, #888);`，它工作得很好。

但是，`background: -webkit-gradient(linear, from(#000), to(#888));`它不起作用。这是我的一段代码：

```
 echo "<tr style='background:-moz-linear-gradient(#000, #888); background: -webkit-gradient(linear, from(#000), to(#888));'><td width='65'><img src='images/avatar/defaultuser.jpg' height='65' width='65'>"; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T10:18:41.837

该`-webkit-gradient`属性已弃用。使用[新的渐变语法](http://www.webkit.org/blog/1424/css3-gradients/)：

```
 background: -webkit-linear-gradient(#000, #888); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:17:40.137

使用[colorzilla 渐变生成器](http://www.colorzilla.com/gradient-editor/)进行跨浏览器渐变

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T10:18:16.500

改用这个：

```
background: -webkit-linear-gradient(#000, #888); 
```

`-webkit-gradient`适用于 Chrome v2 ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:18:21.290

尝试

```
-webkit-linear-gradient(#000, #888); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T10:20:31.637

webkit 需要更多东西：

你在 Firefox 中的哪个地方写：

```
background:-moz-linear-gradient(top, #d39637, #000000); /* Firefox 3.6+ */ 
```

在铬你写：

```
background:-webkit-gradient(linear, left top, left bottom, from(#d39637), to(#000000)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T10:38:42.210

Webkit 有自己的渐变语法

```
 background-image: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0, rgba(0,0,0,1)),
        color-stop(1, rgba(136,136,136,1))
    ); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-21T10:46:06.970

chrome 和 Mozilla 的渐变色

背景图像：-webkit-gradient（线性，左下，左上，颜色停止（0.10，#72abe0），颜色停止（0.90，#eceaeb））；背景图像：-moz-linear-gradient（中心底部，#72abe0 10%，#eceaeb 90%）；

# mysql - 如何在 mySQL 中创建 QUOTENAME 函数

> ID：10683365
> 
> 赞同：3
> 
> 时间：2012-05-21T10:15:21.440
> 
> 标签：mysql, function

我想在 mySQL 中创建一个 QUOTENAME() 函数，就像 M$ SQL Server 中存在的那样。

这就是它的作用：

> QUOTENAME 返回一个 Unicode 字符串，并添加了分隔符以使输入字符串成为有效标识符。QUOTENAME 函数使用以下语法：
> 
> ```
> QUOTENAME ( 'string' [ , 'delimiter' ] ) 
> ```
> 
> 您传递 QUOTENAME 一个要分隔的字符串和一个用作分隔符的单字符字符串。分隔符可以是方括号或单引号或双引号。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:35:54.503

你可以从这样的事情开始——以eggyal的评论为基础

```
DROP FUNCTION IF EXISTS QUOTENAME;

CREATE FUNCTION QUOTENAME (s varchar(50), d CHAR(1))
RETURNS VARCHAR(52)
RETURN CONCAT (d, REPLACE(s, d, CONCAT(d,d)), d); 
```

然后添加您的特殊情况和附加功能。

# c# - 在Datagridview中设置ComboBox的显示文本

> ID：10683366
> 
> 赞同：-2
> 
> 时间：2012-05-21T10:15:37.977
> 
> 标签：c#, vb.net, datagridview, combobox

如何将 Datagridview 中组合框的显示文本设置为例如：“选择组合框”

在组合框中设置文本很简单，但将文本设置为 Datagridviewcombobox 不像组合框

任何找到有用链接的人请帮助我，因为我没有找到与我的问题相关的任何链接

***编辑：***

我的意思是，我想在用户点击之前在组合框中显示一个文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:45:35.200

在所有的反对票之后，我建立了我的解决方案！！！

首先，我将我的项目添加到组合框（我使用 datareader 从 sql server 数据库中获取数据并将它们添加到组合框）然后我将此属性添加到我的 datagridviewcolumn(dgv_col) 中：

```
dgv_col.DataPropertyName="name"
dgv_col.DisplayMember="name"
dgv_col.ValueMember="id" 
```

name 是我表中的一个字段，id 是每个名称的标识

最后它解决了:)

# javascript - Javascript 检查 div 样式，如果为空，则将文本添加到 div

> ID：10683369
> 
> 赞同：0
> 
> 时间：2012-05-21T10:15:49.053
> 
> 标签：javascript

嗨，已经寻​​找了几个解决方案，但由于 JS 不是我的专长，所以我很挣扎！

目前，我有一个空且隐藏的 div（生成但 BigCommerce 生成的页面）。它是一个空的 div，但有一个类，并通过“样式显示：无”隐藏。

我想尝试做的是：

1.  检查命名的 div 是否具有 display none 的样式。
2.  如果以上为真，则检查 div 是否包含任何内容（空字符串虽然需要检查，因为可能是一些空格）
3.  如果以上两个都是真的，在div里面加一些简单的文字，改变样式显示（或者去掉显示none。）

div 中的 display: none 样式是内联的。

如果有人可以提供帮助，请提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:28:25.180

好吧，既然你没有提供任何代码，我会做一些假设（你没有使用 jQuery，样式是内联的）但是你想要这样的东西......

```
 <div id="myDiv" style="display:none"></div>
    <script>

    var theDiv = document.getElementById("myDiv");

    if(theDiv.style.display == "none" && theDiv.innerHTML.length == 0){
        theDiv.innerHTML = "Some sample content";
        theDiv.style.display="inline";
    }

  </script> 
```

将来最好添加您已经制作的内容，否则您应该重新表述您的问题“有人可以为我做这件事吗”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:26:35.483

如果你熟悉**jQuery**。添加 div 一个 ID 'myDiv' 并使用以下内容：

```
var contents = $('#myDiv').text();
contents =$.trim(contents);

if($('#myDiv').is(":hidden") && contents == ''){

    $('#myDiv').html('Here are new contents').show();

} 
```

# c#-4.0 - 将项目拖出 Outlook - 记录邮件 ID

> ID：10683371
> 
> 赞同：3
> 
> 时间：2012-05-21T10:15:59.723
> 
> 标签：c#-4.0, drag-and-drop, outlook, office-interop

背景：

我正在设计一个应用程序，该应用程序允许将项目拖到它上面，并在它们上调用一些长时间运行的进程。这些项目通常会从文件系统和 Outlook 中拖入。我关心的是后者。

如何连接到 Outlook 以查明是否已将一条（或多条）消息拖出并拖到我的应用程序上，以及消息 ID 是什么？

我知道 Outlook 对象模型没有这样的拖放事件，一种解决方案是收听[Windows 消息](http://www.pcreview.co.uk/forums/implementing-drag-and-drop-events-outlook-t3843349.html)- 这在团队中是不可行的，因为我们的组合互操作知识不是很好。

我们将在 Visual Studio 2010 中使用 C# 4.0 来开发此应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T14:35:24.603

即使这是一个老问题，实际上也有办法。它是无证的，但我至少能够对它进行逆向工程。我不确定“选择”方法是否仍然更干净，但我更喜欢直接读取数据。

可以在此处找到示例和文档： [https ://github.com/yasoonOfficial/outlook-dndprotocol](https://github.com/yasoonOfficial/outlook-dndprotocol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:19:28.367

您无法通过通用拖放界面[`MailItem.EntryID`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.entryid.aspx)直接从 Outlook访问。[`IDataObject`](http://msdn.microsoft.com/en-us/library/system.windows.idataobject.aspx)如果您只想访问 MSG 数据，那么您可以使用[这个 CodeProject 示例](http://www.codeproject.com/Articles/28209/Outlook-Drag-and-Drop-in-C)。一旦将 MSG 复制到磁盘（*或剪贴板、拖放等*），它就会丢失对`EntryID`.

我知道访问 的唯一方法`EntryID`是使用[VSTO](http://msdn.microsoft.com/en-us/office/hh133430.aspx)并使用[`ActiveExplorer().Selection`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.explorerclass.selection)来查看在放置操作时选择了哪些项目。以下是在拖放命令期间[访问所选邮件正文的示例。](https://stackoverflow.com/a/7840474/175679)一旦看到使用的一般模式，您应该能够找到大量示例。

# android - 在android中以编程方式设置片段参数

> ID：10683374
> 
> 赞同：2
> 
> 时间：2012-05-21T10:16:10.520
> 
> 标签：android, android-fragments, compatibility

如何以编程方式设置片段的高度、宽度、边距等参数。我正在添加片段，例如

```
 FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    MyListFragment myListFragment = new MyListFragment();
    fragmentTransaction.add(1, myListFragment);

    DetailFragment detailFragment = new DetailFragment();
    fragmentTransaction.add(1, detailFragment);

    fragmentTransaction.commit(); 
```

我也在使用像 android-support-v4.jar 这样的兼容 jar。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:16:09.967

> 如何以编程方式设置片段的高度、宽度、边距等参数

片段没有“高度、宽度、边距等参数”。`View`并`ViewGroup`具有“高度、宽度、边距等参数”。因此，您要么调整放置片段的容器（出于某种奇怪的原因，您已`1`在上面的示例中声明了该容器），要么`View`调整`Fragment`从`onCreateView()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T03:40:08.450

CommonsWare 的附加信息表明您可以调整 onCreateView() 返回的视图，这让我想到了另一种方法：只需获取 Fragments 视图，然后调整它的 LayoutParams。

```
// use the appropriate LayoutParams type and appropriate size/behavior
FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(left, top, right, bottom);
theFragment().getView().setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-01T08:26:31.307

我认为这里有一个有效的案例，可以在片段视图上以编程方式添加边距，而不是在它膨胀到的容器上。

例如，如果你想让你的容器布局与其他视图共享。

在我的例子中，我有一个`FrameLayout`在顶部包含一个按钮的全屏，然后整个屏幕被膨胀的片段占据。我可以将两个`FrameLayout`s 嵌套在另一个中，但这对绘制性能不利，更好的选择是将片段直接膨胀到 root`FrameLayout`中，但`view` `topMargin`要防止它隐藏按钮。

这是一些代码：

```
FragmentManager fm = getSupportFragmentManager();
Fragment fragment = new MyFragment();
fm.beginTransaction().add(R.id.container, fragment, "main").commit();

// wait for the fragment to inflate its view within container
container.addOnLayoutChangeListener(new OnLayoutChangeListener() {
    @Override
    public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {
        if (fragment.getView() != null) {
            LayoutParams lp = new LayoutParams(MATCH_PARENT, MATCH_PARENT);
            lp.topMargin = 50; // you need to translate DP to PX here!
            fragment.getView().setLayoutParams(lp);

            container.removeOnLayoutChangeListener(this); // prevent infinite loops
        }
    }
}); 
```

# ios - iOS 应用程序的 cookie 在终止时会被清除。如何防止这种情况，或保留这个cookie？

> ID：10683378
> 
> 赞同：3
> 
> 时间：2012-05-21T10:16:31.730
> 
> 标签：ios, session-cookies

我正在发送带有存储在设备端的 session-cookie 的 http 请求。问题是我想在应用程序终止时保留它。但似乎我的应用程序的所有 cookie 都被删除了。我在模拟器和设备上都试过了，他们得到了相同的行为。

是否有任何 iOS 方法可以防止此 cookie 删除？如果没有，如何将其保存到磁盘并恢复？

为了安全起见，我打算将此 cookie 保存在 iOS 钥匙串中。而且我认为所有 NSHTTPCookie 属性都可以安全地转换为 NSString。所以我目前的想法是从**NSHTTPCookie -> NSDictionary -> String -> Save in Keychain**转换，然后向后使用获取原始cookie。问题是我不想经历转换**NSDictionary -> String**和解析**String -> NSDictionary**的麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:47:46.947

找到了一种很好的干净方法。诀窍是使用`JSONKit`（RestKit 附带）使用 JSON 格式在 NSString 和 NSDictionary 之间进行转换。在这里我`SFHFKeychainUtils`用来帮助我处理钥匙串的东西。这样您就不必担心 cookie 中的每个属性以及所有的转换工作。:)

```
#import "RestKit/JSONKit.h"

#define WSC_serviceName @"WSC_serviceName"
#define WSC_username    @"WSC_username"
#define WSC_cookieName  @"_your_cookie_name" // name of the session cookie

- (void)saveSessionCookieToKeyChain {
    for (NSHTTPCookie *c in [NSHTTPCookieStorage sharedHTTPCookieStorage].cookies) {
        if ([c.name isEqualToString:WSC_cookieName]) {
            NSString *cookieString = [c.properties JSONString];
            NSLog(@"cookieString: %@",cookieString);
            NSError *saveError = nil;
            [SFHFKeychainUtils storeUsername:WSC_username
                                 andPassword:cookieString 
                              forServiceName:WSC_serviceName 
                              updateExisting:YES error:&saveError];
        }
    }
}

- (BOOL)readsSessionCookieFromKeyChain {
    NSError *readError = nil;
    NSString *jsonString = [SFHFKeychainUtils getPasswordForUsername:WSC_username
                                                      andServiceName:WSC_serviceName 
                                                               error:&readError];
    if (!jsonString) return NO;
    NSData* jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding]; // be sure that data is in UTF8 or it won't work
    JSONDecoder* decoder = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];
    NSDictionary* jsonDict = (NSDictionary*)[decoder objectWithData:jsonData];
    NSLog(@"jsonDict: %@",jsonDict);

    NSHTTPCookie *cookie = [[NSHTTPCookie alloc] initWithProperties:jsonDict];
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];

    return cookie!=nil;
}

- (void)clearSessionCookieAndRemoveFromKeyChain {
    for (NSHTTPCookie *c in [NSHTTPCookieStorage sharedHTTPCookieStorage].cookies) {
        [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:c];
    }
    NSError *deleteError = nil;
    [SFHFKeychainUtils deleteItemForUsername:WSC_username 
                              andServiceName:WSC_serviceName 
                                       error:&deleteError];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:42:09.957

假设你有一个 NSHTTPURLResponse，你可以得到一个像这样的 cookie 数组：

```
NSDictionary * headers = [(NSHTTPURLResponse *)response allHeaderFields];
NSArray * cookies = [NSHTTPCookie cookiesWithResponseHeaderFields:headers forURL:response.URL]; 
```

`response`NSHTTPURLResponse在哪里。

您将在 NSURLConnectionDelegate 的这 2 个方法中获得 NSURLResponses

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse;
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response; 
```

NSHTTPCookie 有一个`properties`返回 的属性`NSDictionary`，所以你可以保存它们。然后可以使用相同的字典创建它们`-initWithProperties:`

要发送它们，您需要为 a 的 Cookie 标头创建自己的字符串`NSURLRequest`。就像是：

```
NSMutableString * cookieString = [[NSMutableString alloc] init];
for (NSHTTPCookie * cookie in myLoadedCookies){
    [cookieString appendFormat:@"%@=%@; ", cookie.name, cookie.value];
}
[request setValue:cookieString forHTTPHeaderField:@"Cookie"];
[cookieString release]; 
```

`request`一个在哪里`NSMutableURLRequest`。

您还应该确保停止 iOS 管理 cookie 本身：

```
[request setHTTPShouldHandleCookies:NO]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T11:17:14.243

**===== 总结 =====**

好吧，我将创建另一个答案，以总结保持 NSDictionary 的可能方法（当然不包含对象！）。

最简单的方法是使用 NSDictionary 的`writeToFile:`方法。这将生成一个 plist 文件。（也可在 NSArray 中使用）如果您担心安全性，请将数组加密为 NSData 对象并写入。

另一种方法（虽然不是最快的方法）是使用工具将 NSDictionary 转换为字符串格式，例如 JSON 或 XML。您可以将此字符串保存在 iOS 钥匙串中，以便以后轻松检索。（`SFHFKeychainUtils`非常适合帮助处理钥匙串）。使用钥匙串的好处是它会自动加密。

# linux - cp：无法创建目录权限被拒绝

> ID：10683379
> 
> 赞同：3
> 
> 时间：2012-05-21T10:16:34.053
> 
> 标签：linux

我的目录中有一个名为“Parser”的文件夹。

我正在尝试将此文件夹（解析器）从我自己的目录复制到 /home/vinay 下的同事目录

但我得到了这个例外

cp：无法创建目录`/home/vinay/Parser'：权限被拒绝

这些是我执行的命令。

```
-bash-3.00$  cp -r Parser /home/vinay/

cp: cannot create directory `/home/vinay/Parser': Permission denied 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:21:07.240

这是因为您无权写入 vinay 的主文件夹。

您可以作为 root 用户执行此操作（如果您在 sudoer 列表中），或者您可以将文件放在某个公共位置（例如 /tmp）并告诉 vinay 到那里获取它。

这是[一篇关于 linux 文件权限的文章](http://www.comptechdoc.org/os/linux/usersguide/linux_ugfilesp.html)。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:20:20.700

错误消息显示**Permission denied**，这意味着您 - 一个用户 - 没有权限写入 vinay - 另一个人 - 主目录。[更多阅读](http://www.perlfect.com/articles/chmod.shtml)

# java - ess wav文件加载和播放

> ID：10683386
> 
> 赞同：0
> 
> 时间：2012-05-21T10:17:09.763
> 
> 标签：java, audio, wav

我一直在尝试简单地将 wav 文件加载到 AudioChannel 对象中并播放它，但它一直给我一个错误，指出“无法加载声音 test.wav”

我正在做的是：

```
AudioChannel currentsound;
Ess.start(this);
currentsound = new AudioChannel("test.wav");
currentsound.play(); 
```

音频文件也在工作目录中，知道为什么它不会加载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:41:17.957

工作目录是指草图中的数据子目录吗？处理从 Sketch 文件夹中的“数据/”读取。保存发生在 Sketch 文件夹本身中。

试试这个：

```
 currentsound = new AudioChannel("../test.wav"); 
```

# asp.net - 在打开 UAC 的服务器（Windows 2008 R2）上重新启动 Windows 服务（来自 ASP.NET 应用程序）

> ID：10683399
> 
> 赞同：0
> 
> 时间：2012-05-21T10:17:52.490
> 
> 标签：asp.net, windows-services, windows-server-2008, uac

我正在尝试从我的 ASP.NET (.Net 4) 应用程序重新启动 Windows 服务（应用程序的一部分），但它失败并出现错误：

```
Cannot open <ServiceName> service on computer '.'.
Inner Exception: Access is denied
StackTrace:  at System.ServiceProcess.ServiceController.GetServiceHandle(Int32 desiredAccess)
   at System.ServiceProcess.ServiceController.Start(String[] args)
   at NetClient.AvailabilityConfiguration.StartAvailabilityService(ServiceController serviceName, TimeSpan timeout) 
```

该代码在我的开发机器（Windoes 7）和测试服务器（Windows 2008 R2）上运行良好，但在生产服务器上失败。唯一（也是最大的）区别是 UAC 在生产服务器上打开，而在开发和测试服务器上它是关闭的。

我尝试将 app.manifest 文件添加到 Web 应用程序以获取提升的权限，但它似乎不起作用。我已将 app.manifest 的“requestedExecutionLevel”属性配置为“requireAdministrator”，但似乎没有效果。

任何帮助将不胜感激。

谢谢阿朱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:55:15.970

我认为很明显，运行您的网络池的帐户无权管理服务（特别是启动、停止、暂停命令）。

查看您的池在哪个帐户下运行，并授予他管理服务器服务的权限。您可以使用组策略执行此操作，或打开安全模板。

阅读官方详细步骤，了解[如何授予用户在 Windows Server 中管理服务的权限](http://support.microsoft.com/kb/325349)

# opengl-es - 检索顶点坐标

> ID：10683400
> 
> 赞同：0
> 
> 时间：2012-05-21T10:17:54.333
> 
> 标签：opengl-es, coordinates, vertex

我的问题是：

有没有办法在平移或旋转后检索顶点的坐标？

示例：x = 10，y = 10，z = 0

在对 glTranslate 或 glRotate 的一系列调用之后，我如何知道 x、y 和 z 的实际状态？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T13:47:25.380

这是不可能的...... opengl 将您的顶点数据发送到 GPU，并且只有在 GPU 上，您才能在转换后获取它们。

要获得变换的顶点，您必须自己将它们乘以矩阵

```
for each vertex:
   vertex_transformed = matrix * vertex 
```

在旧的 OpenGL 中：

```
glGetFloatv(GL_MODELVIEW_MATRIX, m);
x = pos.x*m[0] + pos.y*m[4] + pos.z*m[8] + m[12];
y = pos.x*m[1] + pos.y*m[5] + pos.z*m[9] + m[13];
z = pos.x*m[2] + pos.y*m[6] + pos.z*m[10] + m[14]; 
```

一些更高级的方法是使用变换反馈并将这些变换的顶点存储到缓冲区中（但该缓冲区仍将存储在 GPU 上）。

# iphone - 如何从 iPhone 中的用户帐户获取所有上传的视频

> ID：10683408
> 
> 赞同：0
> 
> 时间：2012-05-21T10:18:11.773
> 
> 标签：iphone, objective-c, ios, ipad

我有一个场景，我想从 TableView 中的用户帐户上传所有视频。我不想要其他视频。我知道要使用搜索关键字获取视频。但我想要它只通过我的帐户上传。

我通过了很多东西并搜索了它，但无法得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:42:35.737

当我读到你的问题时，我想知道 3 件事：

1.  你指的是什么类型的账户？
2.  视频上传到哪里，如何上传？
3.  如果我假设您正在开发一个应用程序，用户可以从该应用程序登录并将视频上传到某种服务，我是否会做出正确的猜测？

假设 3 的答案是肯定的，那么这里是您的问题的建议答案：

在您的应用程序中创建一个 SQLite 数据库，其中包含一个名为“视频”之类的表。让该表包含视频 ID、名称、长度、上传日期和任何其他可能对您的应用有用的信息的列。每当用户从您的应用上传视频时，在您的 SQlite 表中插入一个新行，其中包含有关该视频的信息。

此表应包含您需要在应用的 TableView 中显示的信息。当用户单击视频或您需要执行其他操作（例如显示缩略图）时，请使用存储在表中的 ID 或名称从 iPhone 加载视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:01:17.543

您可以使用从您的帐户上传视频时设置为 true 的标志变量。当您请求视频列表时，传递参数以发送仅上传视频的列表。

# android - Android 源代码构建错误：“未知伪操作：.cfi_sections”

> ID：10683409
> 
> 赞同：1
> 
> 时间：2012-05-21T10:18:14.153
> 
> 标签：android, gcc, g++, android-source

我正在尝试构建 Android 源代码并收到以下错误：

```
host C: acp <= build/tools/acp/acp.c
host C: libhost <= build/libs/host/CopyFile.c
host C: libneo_util <= external/clearsilver/util/neo_misc.c
host C++: libhost <= build/libs/host/pseudolocalize.cpp
/tmp/ccMWrTaD.s: Assembler messages:
/tmp/ccMWrTaD.s:10: Error: unknown pseudo-op: `.cfi_sections' 
```

GCC 版本：4.4.5
G++ 版本：4.4.5
binutils 版本：2.20.51

搜索但没有太多关于如何处理此错误的信息：

```
Error: unknown pseudo-op: `.cfi_sections' 
```

在构建过程中是否需要使用任何开关，或者我可以更改设置以解决此问题的配置文件？

欢迎任何指点！

# javascript - 如何防止 IE8 的 javascript 库加载

> ID：10683411
> 
> 赞同：2
> 
> 时间：2012-05-21T10:18:17.033
> 
> 标签：javascript, internet-explorer

如何防止加载 IE8（及以下）的 D3 库？

```
<head>
    <script src="../lib/d3/d3.v2.min.js" type="text/javascript"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:21:41.407

```
<head>
    <!--[if !IE || gte IE 9]><!-->
        <script src="../lib/d3/d3.v2.min.js" type="text/javascript"></script>
    <!-- <![endif]-->
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:20:30.260

```
<!--[if gt IE 8]>
<script src="../lib/d3/d3.v2.min.js" type="text/javascript"></script>
<![endif]--> 
```

# ios - 在 uiviewcontroller 中添加子视图使其正常运行

> ID：10683412
> 
> 赞同：1
> 
> 时间：2012-05-21T10:18:19.747
> 
> 标签：ios, uiview, uiviewcontroller, addsubview

我有一个自定义`UIView`需要添加为`UIViewController`.

但是，如果我使用`[self.view addSubview:newView];`该应用程序会进入无限循环并且不会启动。但如果我使用`self.view = newView`它，它会起作用。但我需要它作为子视图。

包含自定义按钮的`UIView`网格布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:31:17.863

我猜你在`loadView`方法中这样做了。你不能调用`view`视图控制器的方法，`loadView`因为它本身会调用`loadView`！但是调用`setView:`（例如`self.view = newView`）是可以的。

我的建议是在`viewDidLoad`.

# javascript - Node app.js - 同步读取文件？

> ID：10683414
> 
> 赞同：0
> 
> 时间：2012-05-21T10:18:21.760
> 
> 标签：javascript, node.js, asynchronous

我一直在阅读示例应用程序尝试学习节点。我注意到有几个在 boot() 上加载模型和控制器时使用 readdirSync 方法。

例如：

```
 var models_path = __dirname + '/app/models'
var model_files = fs.readdirSync(models_path)
model_files.forEach(function(file){
  if (file == 'user.js')
    User = require(models_path+'/'+file)
  else
    require(models_path+'/'+file)
}) 
```

这对我来说似乎是反节点。这与节点喜欢的“尝试使一切异步”相反。

何时以及为什么像这样读取同步文件是个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:24:39.733

更有可能的是，让初始化更简单——当为了速度而异步并不重要时；我们并没有尝试为许多并发请求提供服务。

同样，如果您需要访问在启动时初始化的某个变量，该变量将在应用程序的整个生命周期中使用，您不希望将整个应用程序包装在回调中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:23:50.217

当您必须在继续之前确定所有数据都可用并且您需要保持序列有序时，*需要*同步读取。换句话说，如果您需要阻止进程并且无法（对任何人）执行任何其他操作，例如在您启动服务器时（例如读取 HTTPS 的证书文件）。

正如 Len 所建议的那样，在其他时间可能*需要*同步读取以保持编码更简单。但是，您正在按照您的建议在简单性和性能之间进行权衡。事实上，在这种情况下，最好使用许多测序辅助库之一。这些通过处理嵌套回调和序列问题大大简化了您的代码。

当然，您作为示例提供的代码是相当危险的——如果读取失败会发生什么？

以下是其中的 3 个库：

*   [Streamline.js](https://github.com/Sage/streamlinejs)允许您编写异步 js/coffeescript，就好像它是同步的一样。只需将回调替换为“_”即可。但是您要么必须编译脚本，要么通过加载程序运行它们。
*   [async](https://github.com/caolan/async) - 似乎是经过深思熟虑和记录在案的最佳方法，并被一些构建了真实应用程序的人推荐。
*   [async.js](https://github.com/fjakobs/async.js) - 可链接，也公开 fs（包括 readdir、walkfiles、glob、abspath、copy、rm - 专注于 fs 而不是泛型

此链接也可能有用：[The Tale of Harry](http://bjouhier.wordpress.com/2011/01/09/asynchronous-javascript-the-tale-of-harry/) - 解释神话程序员如何从传统编程转向基于回调的编程以及他最终使用的模式。也是对异步库中呈现的模式的有用洞察。

# php - 使用 PHP 用 div 包裹 HTML 段（并从 HTML 标记生成目录）

> ID：10683421
> 
> 赞同：2
> 
> 时间：2012-05-21T10:18:32.547
> 
> 标签：php, regex, dom

我的原始 HTML 看起来像这样：

```
<h1>Page Title</h1>

<h2>Title of segment one</h2>
<img src="img.jpg" alt="An image of segment one" />
<p>Paragraph one of segment one</p>

<h2>Title of segment two</h2>
<p>Here is a list of blabla of segment two</p>
<ul>
  <li>List item of segment two</li>
  <li>Second list item of segment two</li>
</ul> 
```

现在，使用 PHP（不是 jQuery），我想改变它，像这样：

```
<h1>Page Title</h1>

<div class="pane">
  <h2>Title of segment one</h2>
  <img src="img.jpg" alt="An image of segment one" />
  <p>Paragraph one of segment one</p>
</div>

<div class="pane">
   <h2>Title of segment two</h2>
   <p>Here is a list of blabla of segment two</p>
   <ul>
     <li>List item of segment two</li>
     <li>Second list item of segment two</li>
   </ul>
</div> 
```

所以基本上，我希望在`<h2></h2>`标签集之间包装所有 HTML`<div class="pane" />`上面的 HTML 已经允许我用 jQuery 创建一个手风琴，这很好，但我想更进一步：

我希望为所有`<h2></h2>`受影响的集合创建一个 ul ，如下所示：

```
<ul class="tabs">
  <li><a href="#">Title of segment one</a></li>
  <li><a href="#">Title of segment two</a></li>
</ul> 
```

请注意，我使用 jQuery 工具选项卡来实现该系统的 JavaScript 部分，并且它不需要 .tabs 的 href 指向其特定的 h2 对应项。

我的第一个猜测是使用正则表达式，但我也看到一些人在谈论[DOM Document](http://be.php.net/domdocument)

在 jQuery 中这个问题存在两种解决方案，但我真的需要一个 PHP 等价物：

*   [https://stackoverflow.com/questions/7968303/wrapping-a-series-of-elements-between-two-h2-tags-with-jquery](https://stackoverflow.com/questions/4912275/automatically-generate-nested-table-of-contents-based-on-heading-tags)
*   [根据标题标签自动生成嵌套目录](https://stackoverflow.com/questions/4912275/automatically-generate-nested-table-of-contents-based-on-heading-tags)

任何人都可以请实际帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:21:35.530

DOMDocument 可以帮助您。我之前回答过一个类似的问题：

[使用正则表达式将图像包装在标签中](https://stackoverflow.com/questions/10330763/using-regex-to-wrap-images-in-tags/10331514#10331514)

**更新**

完整的代码示例包括：

```
$d = new DOMDocument;
libxml_use_internal_errors(true);
$d->loadHTML($html);
libxml_clear_errors();

$segments = array(); $pane = null;

foreach ($d->getElementsByTagName('h2') as $h2) {
    // first collect all nodes
    $pane_nodes = array($h2);
    // iterate until another h2 or no more siblings
    for ($next = $h2->nextSibling; $next && $next->nodeName != 'h2'; $next = $next->nextSibling) {
        $pane_nodes[] = $next;
    }

    // create the wrapper node
    $pane = $d->createElement('div');
    $pane->setAttribute('class', 'pane');

    // replace the h2 with the new pane
    $h2->parentNode->replaceChild($pane, $h2);
    // and move all nodes into the newly created pane
    foreach ($pane_nodes as $node) {
        $pane->appendChild($node);
    }
    // keep title of the original h2
    $segments[] = $h2->nodeValue;
}

//  make sure we have segments (pane is the last inserted pane in the dom)
if ($segments && $pane) {
    $ul = $d->createElement('ul');
    foreach ($segments as $title) {
        $li = $d->createElement('li');

        $a = $d->createElement('a', $title);
        $a->setAttribute('href', '#');

        $li->appendChild($a);
        $ul->appendChild($li);
    }

    // add as sibling of last pane added
    $pane->parentNode->appendChild($ul);
}

echo $d->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:20:22.350

使用 PHP [DOM](http://www.php.net/manual/en/book.dom.php)函数来执行此任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:36:14.650

.. 一个不错的 PHP html 解析器是您所需要的。 [这个](http://simplehtmldom.sourceforge.net/)不错。它是一个相当于 jquery 的 PHP。

# erlang - 如何将远程 pid 转换为节点名称？

> ID：10683423
> 
> 赞同：4
> 
> 时间：2012-05-21T10:18:37.937
> 
> 标签：erlang

在决定一个客户端参数结构到一个`OTP`gen_server时，是否需要将两者都`Pid`插入`Node name`参数结构中？

给定一个遥控器`pid`，是否可以转换`pid`为`node name`？我的意思是完整的节点名称，比如`"emacs@yus-iMac.local".`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:08:44.757

调用`node(Pid)`将返回`Pid`所在节点的名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:28:49.843

[有人可以解释 Erlang 中 Pid 的结构吗？](https://stackoverflow.com/questions/243363/can-someone-explain-the-structure-of-a-pid-in-erlang)

[如何找出运行 erlang 进程的节点？](https://stackoverflow.com/questions/7083980/how-do-i-found-out-which-node-an-erlang-process-is-running-on)

# c# - 有没有办法（如调试器或其他东西）获得相当于 XAML 规范的 WPF 图形源代码生成效果？

> ID：10683429
> 
> 赞同：1
> 
> 时间：2012-05-21T10:18:59.910
> 
> 标签：c#, wpf, debugging, xaml, .net-4.0

因为 XAML 是一种声明性语言，我猜想当 WPF 应用程序执行它时，它会以某种方式解析 XAML 并使用基于 XAML 中数值的参数逐行执行相关的 API 命令。那么，我能否以某种方式提取这些命令，以便可以在不使用 XAML 的情况下将它们作为 C# 程序的一部分运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:05:04.823

这是在构建时完成的，您会在项目的 obj\Debug 目录中找到自动生成的 .g.cs 文件。不完全是您想要编写的那种代码，它只是正确的代码，而不是漂亮的代码。典型的代码生成器。但可以肯定的是，研究它并了解如何将 XAML 声明转换为等效的 C# 代码会很有帮助。

# javascript - JSDoc：如何记录父“类”的“选项”对象文字？

> ID：10683430
> 
> 赞同：43
> 
> 时间：2012-05-21T10:19:09.777
> 
> 标签：javascript, jsdoc

我正在使用`$.widget()`提供方法的 jQuery 的基“类” `option()`。由于该方法不在我的代码中，因此我没有地方记录该参数。

我试图将 jsDoc 放在默认选项文字中的字段上，但它们根本没有被拾取。然后我尝试在同一个对象字面量上使用`@class`and`@lends`标记，但这可能会让人很困惑，因为对象字面量并不是真正的类。

我尝试过的另一种选择是将类似的东西`@param options.field description`放在构造函数的 jsDoc 中。但是，这样做的缺点是将文档与代码分开。此外，构造函数实际上没有调用参数`options`，因为它全部由 jQuery 处理。

您的 Javascript 专家如何处理这个问题？是否应该提出一个新标签？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-11T20:50:46.023

如果我正确理解您的问题，您有一个带有选项对象的函数，并且您想记录它的所有成员？

如何在 JSDoc 中执行此操作的粗略示例如下：

```
/**
 * @description
 * Compliment someone on their something.
 *
 * @param {Object} options
 * @param {String} options.name    A person's name
 * @param {String} options.feature A person's property
 */
function flatter (options) {
  options = options || {};
  console.log('%s, loving your %s!', options.name, options.feature);
} 
```

# artificial-intelligence - 使用 Kinect 的机器人导航

> ID：10683431
> 
> 赞同：0
> 
> 时间：2012-05-21T10:19:13.090
> 
> 标签：artificial-intelligence, kinect, emgucv, lego

到目前为止，我已经能够创建一个 Kinect 传感器在一个地方的应用程序。我使用语音识别 EmguCV (open cv) 和 Aforge.NET 来帮助我处理图像、学习和识别对象。一切正常，但总是有改进的余地，我提出了一些问题：[忽略前三个我想要第四个的答案]

1.  帧率太吓人了。即使它应该像 30 fps，它也像 5 fps。（这是没有所有处理）我的应用程序运行良好，它从相机获取颜色和深度帧并显示它。帧率还是很差。样本运行得非常好，大约 25 fps。即使我从样本中运行了完全相同的代码，它也不会让步。:-( [不需要代码，请告诉我可能的问题。]

2.  我想创建一个小机器人，在上面安装 kinect 和我的笔记本电脑。我尝试使用 Mindstorms 套件，但低扭矩电机无法解决问题。请告诉我我将如何实现这一目标。

3.  如何在船上供电？我知道 Kinect 使用 12 伏的电机。但它是从交流适配器获得的。[我不想剪断电缆并用 12 伏电池代替它]

4.  最大的问题：在这个世界上它将如何导航。我已经完成了 A* 和洪水填充算法。我把[这篇](http://www.cs.washington.edu/ai/Mobile_Robotics/rgbd-workshop-2011/camera_ready/cunha-rgbd11-localization.pdf)论文读了一千遍，却一无所获。我脑子里有导航算法，但它到底如何定位自己？[它不应该使用 GPS 或任何其他类型的传感器，只使用它的眼睛，即 Kinect]

帮助我会很棒。我是新手，所以请不要指望我什么都知道。我已经上网 2 周了，但没有运气。

多谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:52:39.877

本地化是一项棘手的任务，因为它取决于事先了解您的机器人将被放置的环境（*即*您的房子的地图）。虽然存在用于同时定位和映射的算法，但它们往往是特定于域的，因此不适用于将机器人放置在任意位置并让它自主映射其环境的一般情况。

但是，如果您的机器人*确实*对其环境的外观有一个粗略的（概率性）概念，那么[蒙特卡洛定位](http://en.wikipedia.org/wiki/Monte_Carlo_localization)是一个不错的选择。在高层次上，它类似于：

1.  首先，机器人应该对它可能在其已知环境中的位置进行大量随机猜测（称为*粒子）。*
2.  随着传感器的每次更新（即机器人移动了一小段距离之后），它使用其当前传感器数据的统计模型来调整其每个随机猜测正确的概率。如果机器人进行 360º 传感器测量，这可能会特别有效，但这并不是完全必要的。

[伦敦帝国理工学院 Andrew Davison 的这次讲座](http://www.doc.ic.ac.uk/~ajd/Robotics/RoboticsResources/lecture5.pdf)很好地概述了所涉及的数学。（考虑到您要创建的内容，本课程的其余部分很可能对您也很感兴趣）。祝你好运！

# iphone - Facebook IOS SDK 可选权限

> ID：10683435
> 
> 赞同：3
> 
> 时间：2012-05-21T10:19:37.023
> 
> 标签：iphone, objective-c, ios, facebook, facebook-ios-sdk

我的 IOS 应用程序向用户询问“publish_stream”权限，问题是当出现可选权限屏幕并且用户单击“允许”时，facebook sdk 不会执行此操作，因为该应用程序可以在用户墙上发布。当我检查 Facebook 帐户上的设置时，我看到存在“代表您发布”权限。这是代码：

```
NSArray* permissions = [[NSArray alloc] initWithObjects:@"publish_stream", @"email",
                               @"user_birthday",@"user_relationships", @"user_location", @"user_hometown", nil]; 
```

* * *

```
-(void)loginToFacebook
{
    [facebook authorize:permissions];} 
```

* * *

```
- (void)fbDidLogin 
{
    NSLog(@"did login");

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebookAgent accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebookAgent expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

[facebook requestWithGraphPath:@"me/permissions" andDelegate:self];
} 
```

* * *

```
- (void)request:(FBRequest *)request didLoad:(id)result
{
    NSLog(@"%@",result);
} 
```

如果用户在可选权限页面中单击 Allow non ，则 request:didLoad 方法的结果是：

```
{
    data =     (
                {
            "create_note" = 1;
            email = 1;
            installed = 1;
            "photo_upload" = 1;
            "publish_actions" = 1;
            "publish_stream" = 1;
            "share_item" = 1;
            "status_update" = 1;
            "user_birthday" = 1;
            "user_hometown" = 1;
            "user_location" = 1;
            "user_relationships" = 1;
            "video_upload" = 1;
        }
    );
} 
```

这是邮政编码：

```
-(void)publishToFacebook
{   
    NSDictionary* attachment = [NSDictionary dictionaryWithObjectsAndKeys:
                                @"Name", @"name",
                                @"Caption", @"caption",
                                @"Message", @"message",
                                @"http://url...", @"link", 
                                @"http://imageUrl...", @"picture", nil];

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithDictionary:attachment];

    [facebook requestWithGraphPath:@"me/feed" 
                            andParams:params
                        andHttpMethod:@"POST"
                            andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:23:18.113

感谢这篇文章。[在https://developers.facebook.com/bugs/111727002307769](https://developers.facebook.com/bugs/111727002307769)提交了一个与此相关的错误， 并且正在分配它。一旦我们把它修好，你应该很高兴。谢谢你的耐心。

# asp.net-mvc-3 - MVC3 REST 服务 - 如何访问 PUT 或 POST 请求的请求正文内容？

> ID：10683438
> 
> 赞同：1
> 
> 时间：2012-05-21T10:19:55.827
> 
> 标签：asp.net-mvc-3, rest, request

我正在创建一个 ASP.NET MVC3 RESTful Web 服务，以允许从一组服务器上传报告。创建新报告时，我希望客户端应用程序执行 PUT 到

*   [http://MyApp/Servers/[ServerName]/Reports/[ReportTime]](http://MyApp/Servers/[ServerName]/Reports/[ReportTime])

在请求的正文中将报告的内容作为 XML 传递。

我的问题是：如何在我的控制器中访问报告的内容？我想它在 HttpContext.Request 对象中的某处可用，但我不愿意从我的控制器访问它，因为不可能（？）对其进行单元测试。是否可以调整路由以允许将内容作为一个或多个参数传递到控制器方法中？结果需要是 RESTful 的，即它必须 PUT 或 POST 到上述 URL。

目前我的路线是：

```
routes.MapRoute(
    "SaveReport",
    "Servers/{serverName}/Reports/{reportTime",
    new { controller = "Reports", action = "Put" },
    new { httpMethod = new HttpMethodConstraint("PUT") }); 
```

有没有办法修改它以将内容从 HTTP 请求正文传递到控制器方法？控制器方法目前是：

```
public class ReportsController : Controller
{
    [HttpPut]
    public ActionResult Put(string serverName, string reportTime)
    {
        // Code here to decode and save the report
    }
} 
```

我试图 PUT 到 URL 的对象是：

```
public class Report
{
    public int SuccessCount { get; set; }
    public int FailureOneCount { get; set; }
    public int FailureTwoCount { get; set; }
    // Other stuff
} 
```

[这个问题](https://stackoverflow.com/questions/7227524/how-do-i-access-the-request-body-in-xml-format-in-a-wcf-rest-service)看起来很相似，但没有任何答案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:50:18.950

似乎您只需要使用标准的[ASP.NET MVC 模型绑定](http://msdn.microsoft.com/en-us/library/dd410405.aspx)功能，但您会使用 HTTP PUT 而不是更常见的 HTTP POST。本[系列文章](http://www.codeproject.com/Articles/159749/ASP-NET-MVC-Model-Binding-Part1)有一些很好的示例来了解如何使用模型绑定。

您的控制器代码将如下所示：

```
public class ReportsController : Controller
{
    [HttpPut]
    public ActionResult Put(Report report, string serverName, string reportTime)
    {
        if (ModelState.IsValid)
        {
            // Do biz logic and return appropriate view
        }
        else
        {
            // Return invalid request handling "view"
        }
    }
} 
```

编辑：=====================>>>

作为修复的一部分，乔恩将此代码添加到他的评论中，因此我将其添加到其他人的答案中：

创建自定义 ModelBinder：

```
public class ReportModelBinder : IModelBinder
{
    public object BindModel(
        ControllerContext controllerContext,
        ModelBindingContext bindingContext)
    {
        var xs = new XmlSerializer(typeof(Report));
        return (Report)xs.Deserialize(
            controllerContext.HttpContext.Request.InputStream);
    }
} 
```

修改 Global.asax.cs 以针对 Report 类型注册此模型绑定器：

```
ModelBinders.Binders[typeof(Report)] = new Models.ReportModelBinder(); 
```

# c# - 如何在 C# 中将 Masterpage 中的函数调用为新表单

> ID：10683440
> 
> 赞同：0
> 
> 时间：2012-05-21T10:19:59.083
> 
> 标签：c#, asp.net

我有一个母版页，其中包含一个`DropDownList`. 我有一个绑定主列表的功能，它工作正常。

我的问题是：我将如何从不是上述母版页的子表单的表单中调用该母版页函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:25:52.603

请参阅此处的[文章](http://odetocode.com/blogs/scott/archive/2005/07/16/mastertype-in-asp-net-2-0.aspx)。

这是 ASP.NET 2.0 中新的编译模型带来的好处。假设您将自定义属性添加到母版页代码隐藏文件，如下所示：

```
partial class otcMaster : System.Web.UI.MasterPage
{

public string FooterText {
    get { return Footer.Text; }
    set { Footer.Text = value; }
}

 } 
```

您可以使用继承的 Master 属性访问 Web 表单的母版页，该属性返回 MasterPage 引用。但是，要访问 otcMasterPage 中定义的属性，您可能认为需要使用强制转换。

```
((otcMaster)Master).FooterText == "foo" 
```

在使用框架和静态类型语言时，转换为派生类型只是生活的一部分，但有更好的方法。在 ASPX 中使用 @MasterType 指令。

```
<%@ MasterType VirtualPath="~/otc.master"  %> 
```

现在，当 ASP.NET 对页面进行代码生成时，它会将以下内容放入部分类定义中。请注意 Shadows 关键字（这将是分号区域中的新关键字 [是的，我正在尝试其他语言]）。

```
public new otc Master {
get { return (otcMaster)base.Master; }
} 
```

结果是一个强类型的母版页。我们不需要演员表，我们可以直接进入 Master.FooterText 属性。另一种方法是在 @MasterType 指令中指定一个 TypeName。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:25:58.830

在您的 中提供一个公共方法`MasterPage`，然后您需要将 ContentPage 的`Master`属性转换为适当的类型：

```
public void DataBindDropDowns()
{
    // ...
} 
```

然后您可以通过以下方式从您的 ContentPages 调用它（假设您的母版页的类型称为`SiteMaster`：

```
((SiteMaster)this.Page.Master).DataBindDropDowns(); 
```

**编辑**：

> ...这**不是**上述母版页的子级

我想这意味着它不是`ContentPage`那个大师的，对吗？**那么除了**以下情况外，就不可能获得对 master 的引用：

*   master 的方法是静态的，在这个用例中是**不可能**的，因为你想在 master 上绑定控件
*   您有一个页面的引用，该页面的母版属于该类型，但同样**不可能**，因为当前[`HTTP-Handler`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.handler.aspx)是另一个不使用该母版的页面

**请注意**，母版页实际上是 a 的子页`ContentPage`，并将与其合并。不可能获得对**不存在**的对象的引用！

来自[MSDN](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)：

> 请注意，母版页成为内容页的一部分。实际上，母版页的行为方式与用户控件的行为方式非常相似——作为内容页面的子页面和该页面中的容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:23:51.543

将其放入您的页面代码中（其中 MyMasterPage 是您的母版页对象）：

```
MyMasterPage masterPage = (MyMasterPage) this.Master;

masterPage.MyBindDropDownListFunction(); // Replace with your public function name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:24:02.427

您需要参考 MasterPage 属性，转换为您的母版页类型并调用您的方法。

```
((MyMasterPage)this.Master).MyBindingFunction(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T11:48:26.507

为了更好的设计，使用 EventAggregator 模式。创建您的自定义事件并在母版页中处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T10:37:04.487

如果您经常使用它，您可以创建一个`BasePage`派生自`System.Web.UI.Page`，并将其用作表单的包页。

在那里，您可以添加母版页类型的属性，这将使您可以访问母版页的所有公共成员。

如果你的母版页类是`Site1`，你可以在你的`BasePage`.

```
public class BasePage : System.Web.UI.Page
{
    protected Site1 Site1Master
    {
        get { return Master as Site1; }
    }
} 
```

然后在需要访问母版页方法的页面中替换：

```
 public partial class DefaultPage : System.Web.UI.Page 
```

和

```
 public partial class DefaultPage : BasePage 
```

然后，您将在页面中拥有可用的属性 Site1Master，并且您可以像这样使用它的任何公共成员：

```
 Site1Master.MyBindingFunction(...); 
```

您还可以在 BasePage 中添加任何其他所需的功能。

注意：如果要确保页面中的属性不为空，可以添加检查以查看页面是否具有`Site1`母版，如下所示：

```
 protected Site1 Site1Master
    {
        get 
        { 
           if (!(Master is Site1))
              throw new Exception("This page doesn's have Site1 as master page");
           return Master as Site1; 
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-21T10:38:01.250

为了访问母版页的成员，页面内容上公开了一个 Master 属性。首先，您必须指定 @MasterType 指令：

```
<%@ Page  masterPageFile="~/MasterPage.master"%>
<%@ MasterType  virtualPath="~/MasterPage.master"%> 
```

然后在母版页中创建一个**公共**功能，在您的内容页中，您只需调用

```
Master.MethodNameInMaster() 
```

# sql - SQL Server重复记录删除最旧的记录并保持最新

> ID：10683453
> 
> 赞同：1
> 
> 时间：2012-05-21T10:20:35.677
> 
> 标签：sql, sql-server, date, duplicate-removal

我在 SQL Server 中有一个类似于此的表：

```
Emp#        CourseID        DateComplete        Status
1           Course1         21/05/2012          Failed
1           Course1         22/05/2012          Passed
2           Course2         22/05/2012          Passed
3           Course3         22/05/2012          Passed
4           Course1         31/01/2012          Failed
4           Course1         28/02/2012          Passed
4           Course2         28/02/2012          Passed 
```

尝试为每个 emp# 捕获每个课程的最新记录。如果在同一天尝试了相同的课程，则捕获“通过”课程记录。

沿着这些思路思考：

```
SELECT DISTINCT .....
        INTO Dup_Table
        FROM MainTable
GROUP BY ........
HAVING COUNT(*) > 1

DELETE MainTable
        WHERE Emp# IN (SELECT Emp# FROM Dup_Table)

INSERT MainTable SELECT * FROM Dup_Table

Drop Table Dup_Table
GO 
```

但不确定这是不是

1.  最好的方法和
2.  如何将 Emp#/courseID/DateComplete/Status 放在一起。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T10:33:22.447

```
;WITH cte 
     AS (SELECT Row_number() OVER (partition BY EMPID, courseid ORDER BY 
                DateComplete 
                DESC, 
                status DESC) RN 
         FROM   MainTable) 
DELETE FROM cte 
WHERE  RN > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:39:28.397

您可以使用`row_number()`按分区和按范围排序来获取最后一条记录

```
Select *
From  (
    Select *,
           Row_Number() Over (Partition By Emp#, CourseID Order By DateComplete DESC, Case When Status = 'Passed' Then 1 Else 2 End  ) AS RecordNumber
    From #Emp)Z
Where Z.RecordNumber = 1 
```

# ios - 如何使 UIWebView 中显示的 SVG 文件的元素居中？

> ID：10683458
> 
> 赞同：3
> 
> 时间：2012-05-21T10:21:05.347
> 
> 标签：ios, uiwebview, svg

我有一个 SVG 文件显示在`UIWebView`. 此 SVG 包含许多`<a>`指示可触摸元素的标签。加载 SVG 文件后，我想滚动视图，使特定元素位于屏幕中心附近。

我到目前为止是这样的：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [diagramView stringByEvaluatingJavaScriptFromString:@""
        "var e = document.getElementById('myelement');"
        "var top = e.offsetTop;"
        "while (e.offsetParent) {"
        "    e = e.offsetParent;"
        "    top += e.offsetTop;"
        "}"
        "alert(top);"
        //"scrollTo(0, top);"
    ];
} 
```

但是，`top`无论何时运行，最终都会为 0。该元素`e`指向`<a>`SVG 文件的正确元素（使用 进行检查`alert(e.id)`）。我似乎找不到给我实际偏移量的元素属性的正确组合。

我可以硬编码一组合适的偏移量，但我真的不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T15:57:41.500

请参阅`getBBox`，记录在`http://www.w3.org/TR/SVG11/types.html#__svg__SVGLocatable__getBBox`（抱歉不能作为链接发布，所以错误）

一个快速演示是使用 Chrome加载[https://upload.wikimedia.org/wikipedia/commons/0/07/Wikipedia_logo_(svg).svg并运行](https://upload.wikimedia.org/wikipedia/commons/0/07/Wikipedia_logo_(svg).svg)`$('#path3695').getBBox().y`

特别是对于您，只需使用：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [diagramView stringByEvaluatingJavaScriptFromString:@""
        "var e = document.getElementById('myelement');"
        "var top = e.getBBox().y;"
        "alert(top);"
        "scrollTo(0, top);"
    ];
} 
```

# eclipse - Jersey + Eclipse + Jetty：多态类型的序列化结果为 java.lang.NoSuchFieldError: Ubuntu 12.04 上的 EXTERNAL_PROPERTY 异常

> ID：10683468
> 
> 赞同：1
> 
> 时间：2012-05-21T10:21:47.787
> 
> 标签：eclipse, jetty, jersey, polymorphism

我遇到了一个非常奇怪的问题，我没有找到任何帮助来解决它。我正在使用 Jersey 开发一个应用程序，以提供 GWT 网站访问的 RESTfull 服务。服务生成由 RestyGWT 反序列化的 Json 内容。一切正常，直到我想序列化多态类型。我还使用 Shiro 来保护未经授权的用户返回的值。

序列化过程在使用 Eclipse Indigo 的 Mac OS X Lion 上运行良好，并将 Jetty 作为网络服务器。使用 Tomcat 6 也能很好地工作。当我在 Linux（Ubuntu 12.04 发行版）上时，应用程序使用 Tomcat 6 运行良好，但是当我使用 Ecplise 包含的 Jetty 作为网络服务器时，总是抛出以下异常。

正如我在一些帖子中所读到的，我尝试将每个库更新到最新的稳定版本。有没有人遇到过这个问题？

提前谢谢你。

```
java.lang.NoSuchFieldError: EXTERNAL_PROPERTY
    at org.codehaus.jackson.map.introspect.JacksonAnnotationIntrospector._findTypeResolver(JacksonAnnotationIntrospector.java:781)
    at org.codehaus.jackson.map.introspect.JacksonAnnotationIntrospector.findTypeResolver(JacksonAnnotationIntrospector.java:199)
    at org.codehaus.jackson.map.AnnotationIntrospector$Pair.findTypeResolver(AnnotationIntrospector.java:1032)
    at org.codehaus.jackson.map.ser.BasicSerializerFactory.createTypeSerializer(BasicSerializerFactory.java:200)
    at org.codehaus.jackson.map.ser.BasicSerializerFactory.buildContainerSerializer(BasicSerializerFactory.java:406)
    at org.codehaus.jackson.map.ser.BeanSerializerFactory.createSerializer(BeanSerializerFactory.java:268)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._createUntypedSerializer(StdSerializerProvider.java:782)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._createAndCacheUntypedSerializer(StdSerializerProvider.java:735)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.findValueSerializer(StdSerializerProvider.java:344)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.findTypedValueSerializer(StdSerializerProvider.java:420)
    at org.codehaus.jackson.map.ser.StdSerializerProvider._serializeValue(StdSerializerProvider.java:601)
    at org.codehaus.jackson.map.ser.StdSerializerProvider.serializeValue(StdSerializerProvider.java:256)
    at org.codehaus.jackson.map.ObjectMapper.writeValue(ObjectMapper.java:1613)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.writeTo(JacksonJsonProvider.java:558)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1451)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1097)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:380)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:829)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:37:59.753

在我的情况下，同样的异常是由于类路径上有 restygwt 库引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:22:50.453

RestGwt 在它自己的源代码树中包含了 Jackson 注释类。这导致了 Jackson 库和 RestyGwt 之间的版本冲突，从 Jackson 1.9 开始，在 JsonTypeInfo 类中引入了 As Enum 的新枚举值 (EXTERNAL_PROPERTY)，它在运行时解决，因此导致上述异常。我的解决方案是回到 Jackson 的 1.7.1 版本。请注意：从我的角度来看，源代码的冗余包含不是解决依赖关系的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:55:41.483

检查您的版本`Jackson`是 1.9 或更高版本，因为此枚举是在 1.9 中添加的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T11:25:44.957

我最近在使用 Jackson 1.9.7 和 RestyGWT 1.3 的 GWT 2.4 应用程序中遇到了同样的问题。

我们正在使用[Thomas Broyer 的原型](https://github.com/tbroyer/gwt-maven-archetypes)之一，它为 GWT 应用程序生成三个不同的 Maven 项目。我们将 RestyGWT 作为依赖项包含在客户端和共享项目中。因为服务器项目对共享项目有依赖关系，所以我们在服务器项目上对 RestyGWT 有一个依赖关系（以传递方式接收）。因此，为了使其工作，我在设置服务器项目的共享项目依赖项时排除了 RestyGWT 依赖项：

```
<dependency>
    <groupId>io.pst</groupId>
    <artifactId>accounts-ui-shared</artifactId>
    <exclusions>
       <exclusion>
           <groupId>org.fusesource.restygwt</groupId>
           <artifactId>restygwt</artifactId>
       </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-19T18:19:35.397

一个简单的解决方法是从您的 RestyGWT 依赖项中排除旧的 Jackson 库，同时确保最新的库将取代它：

```
<dependency>
   <groupId>org.fusesource.restygwt</groupId>
   <artifactId>restygwt</artifactId>
   <version>1.3</version>
   <exclusions>
      <exclusion>
          <groupId>org.codehaus.jackson</groupId>
          <artifactId>*</artifactId>
      </exclusion>
   </exclusions>
</dependency>

<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.9</version>
</dependency> 
```

# iphone - UINavigationController 建议

> ID：10683474
> 
> 赞同：1
> 
> 时间：2012-05-21T10:22:20.593
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

`UINavigationController`当您想从 n 个屏幕跳到第一个屏幕时，我已经读过这是最好的选择。这样做需要以下代码：

```
NSMutableArray *array=[[NSMutableArray alloc]initWithArray:self.navigationController.viewController];
[array removeObjectAtIndex:1];
[array removeObjectAtIndex:1];
[array removeObjectAtIndex:1];
self.navigationController.ViewController=array;
[self.navigationController popViewController:YES]; 
```

通过使用此代码，我可以直接从第四个屏幕直接转到第一个屏幕。如果我不使用导航控制器，那么也可以通过在第四个屏幕中制作 firstScreen 的对象，我可以在几行内实现相同的目标。那为什么要使用导航控制器呢？如果答案是内存优化，那么我们将自动释放 firstViewController 的对象，现在我们正在使用自动引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:27:30.013

首先这是流行的错误方法。真正的一个是

```
[self.navigationController popToRootViewController:YES]; 
```

第二件事是，如果您在 4 个屏幕上，那么通过弹出到特定的视图控制器将不会弹出所有屏幕。这是内存问题。

另一个问题是，有时您不想丢失父屏幕数据。如果你对特定的viewcontroller使用pop的方法，数据会随着有数据的对象被释放而丢失。你做了一个新的。

关键是这取决于您的情况，适合您的场景。但正常和通常的方法是不要使用特定的弹出技术，因为它可能会导致问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:16:26.037

您可以使用

`[self.navigationController popToViewController:(UIViewController *) animated:(BOOL)];`

你只需要传递你想要直接移动的 ViewController 的对象......并且在视图控制器之间会自动弹出

希望这可以帮助你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:48:50.313

同意“萨德”

另一件事是，如果您有各种屏幕显示来自服务器的数据。在首先加载数据的同时渲染（用户交互）屏幕将非常困难。

与所有其他同级视图相同。

# jsf-2 - selectOneMenu 验证错误

> ID：10683475
> 
> 赞同：0
> 
> 时间：2012-05-21T10:22:21.240
> 
> 标签：jsf-2

我实现了允许我显示依赖于另一个下拉列表的代码。一切正常，除了当我尝试检索和显示两个字段的值时，它会引发以下错误：

> form:parcours : erreur : de 验证。不正确的价值

用英语 ：

> form:parcours : 验证错误。值无效

我正在使用 JSF 2.0、EJB 3.0、JPA 2.0 和 PrimeFaces 3.2。

看法：

```
 <h:form id="form" >

<!-- <p:growl id="msgs" showDetail="true"/> -->
<h:messages globalOnly="true"/>
<p:growl   id="msgs" showDetail="true" />

<p:panel header="Double Combo" style="margin-bottom:10px;">
    <h:panelGrid columns="2" cellpadding="5">

        <p:selectOneMenu id="countries" value="#{plansEtude.selectedDep}">
            <f:selectItem itemLabel="Select Country" itemValue="" />
            <f:selectItems value="#{plansEtude.depList}" var="c" itemLabel="#{c.nomDepFr}" itemValue="#{c.id}"/>
            <p:ajax update="parcours,parcoursTab"
                    listener="#{plansEtude.handleDepChange}" />
        </p:selectOneMenu>
        <p:selectOneMenu id="parcours" value="#{plansEtude.selectedParcours}" >
            <f:convertNumber maxFractionDigits="0"/>
            <f:selectItem itemLabel="Select City" itemValue="" />
            <f:selectItems value="#{plansEtude.parcoursList}" var="ct" itemLabel="#{ct.designParcours}" itemValue="#{ct.id}"   />

        </p:selectOneMenu>

    </h:panelGrid>
    <p:separator />

        <p:commandButton value="Submit" update="msgs" actionListener="#{plansEtude.displayLocation}" id="btnSubmit"/>

    </p:panel> 
```

控制器 ：

```
@EJB
private DepartementFacade departementFacade;
@EJB
private ParcoursFacade parcoursFacade;
private List<Departement> depList;
private List<Parcours> parcoursList;
private Integer selectedDep;
private Integer selectedParcours;

public PlansEtude() {
}

public DepartementFacade getDepartementFacade() {
    return departementFacade;
}

public void setDepartementFacade(DepartementFacade departementFacade) {
    this.departementFacade = departementFacade;
}

public ParcoursFacade getParcoursFacade() {
    return parcoursFacade;
}

public void setParcoursFacade(ParcoursFacade parcoursFacade) {
    this.parcoursFacade = parcoursFacade;
}

public List<Departement> getDepList() {
    depList = getDepartementFacade().findAll();
    return depList;
}

public void setDepList(List<Departement> depList) {

    this.depList = depList;
}

public List<Parcours> getParcoursList() {
    return parcoursList;
}

public void setParcoursList(List<Parcours> parcoursList) {
    this.parcoursList = parcoursList;
}

public Integer getSelectedDep() {
    return selectedDep;
}

public void setSelectedDep(Integer selectedDep) {
    this.selectedDep = selectedDep;
}

public Integer getSelectedParcours() {
    return selectedParcours;
}

public void setSelectedParcours(Integer selectedParcours) {
    this.selectedParcours = selectedParcours;
}

public void handleDepChange(){
     if(selectedDep !=null && !selectedDep.equals(""))  

       parcoursList = parcoursFacade.findParcoursInDep(selectedDep);  
   else  
        parcoursList = new ArrayList<Parcours>();

}

public void handleParcoursChange(){

}

public void displayLocation() {  
    String monMessage="Departement :" + selectedDep + ", Parcours : " + selectedParcours;
    FacesMessage msg = new FacesMessage("Selected", monMessage);  

    FacesContext.getCurrentInstance().addMessage(null, msg);  
} 
```

}

parcoursFacade :

```
 public List<Parcours> findParcoursInDep(Integer dep){
    Query query = em.createNamedQuery("Parcours.findParcoursInDep");
    query.setParameter("dep", dep);
    return (List<Parcours>)query.getResultList();
} 
```

命名查询：

```
 @NamedQuery(name = "Parcours.findParcoursInDep", query = "SELECT p FROM Parcours p WHERE p.departementid.id = :dep"), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:01:12.453

`<f:convertNumber maxFractionDigits="0"/>`从您的 parcours 下拉列表中删除。这没有道理。它只会`BigDecimal`在您需要时将数字转换为`Integer`.

另一个可能的原因是`#{plansEtude.parcoursList}`在表单提交期间发生了不兼容的更改，因为托管 bean 是请求范围的。您需要确保托管 bean 至少放置在视图范围内，以便`parcoursList`为提交保留。

# bash - bash：自动输入密码

> ID：10683480
> 
> 赞同：-2
> 
> 时间：2012-05-21T10:22:41.887
> 
> 标签：bash, rsync

我想将一些文件从远程服务器同步到本地系统。因为文件很大，可能会持续几个小时，所以我想以 nohup 运行它：

```
nohup rsync -r <user>@<remote>:<dir> <local-dir> & 
```

问题是它提示输入远程服务器的密码，但是在我输入密码后，bash只是说

`-bash: mypassword: command not found`

我也尝试过 --password-file 选项，但似乎 --password-file 不适用于 SSH 帐户，而是用于 rsync 服务。

有人可以告诉我如何在保留 nohup 的同时自动输入密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:26:29.563

您不想为这种用例输入密码。`ssh-keygen -f ~/.ssh/id_rsa_that_key`但是您可以使用受密码保护的 ssh 密钥 ( )，并将`ssh-add ~/.ssh/id_rsa_that_key`该密码保存在缓存中。事实上，它与程序员无关......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:35:04.030

从手册页：

> 远程守护程序上的某些模块可能需要身份验证。如果是这样，您将在连接时收到密码提示。您可以通过将环境变量 RSYNC_PASSWORD 设置为您要使用的密码或使用 --password-file 选项来避免密码提示。这在编写 rsync 脚本时可能很有用。
> 
> 警告：在某些系统上，所有用户都可以看到环境变量。建议在那些使用 --password-file 的系统上。

在我看来，您的错误是因为您将密码分配给一个变量，并且它被您的 bash 脚本解释为命令。

尝试设置上述环境变量，从 bash 脚本中删除“mypassword”，然后再试一次！

# jquery - 使用 jquery 分配静态文件上传器值

> ID：10683482
> 
> 赞同：1
> 
> 时间：2012-05-21T10:22:46.277
> 
> 标签：jquery, html

我尝试在文件上传器中获取已经存在的文件名，但无法获取它。我在 jsfiddle 中有我尝试的示例。
[http://jsfiddle.net/shree/a4PKG/3/](http://jsfiddle.net/shree/a4PKG/3/)
但是当我点击时文件上传器总是空的。`GetImage`警报给出了正确的长度但上传器是空的。找不到我的错误。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:36:40.977

我希望这就是你要问的......如果我错了，请告诉我......

[http://jsfiddle.net/a4PKG/6/](http://jsfiddle.net/a4PKG/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:38:05.383

您是 AJAX 更新面板吗？如果您正在使用更新面板，则 AJAX 更新面板文件内容长度为零，然后删除更新面板并检查。

# elasticsearch - Elasticsearch 中的嵌套查询

> ID：10683484
> 
> 赞同：0
> 
> 时间：2012-05-21T10:22:59.220
> 
> 标签：elasticsearch

我有json数据如下

```
{
  "_index": "project",
  "_type": "ts_order_snapshot",
  "_id": "1",
  "_version": 1,
  "exists": true,
  "_source": {
    "order_id": "100000001",
    "order_data": "Order Data:{\"entity_id\":\"1\",\"state\":\"canceled\"}"
  }
} 
```

现在我想获取状态为已取消的所有订单 ID 的列表。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:15:36.277

`order_data`是一个序列化的、json 编码的字符串，而不是结构化的 json 映射。如果将其提升为实际的 json，则可以构造一个类似`?q=order_data.state:canceled&fields=order_id`.

# android - 将 Android 库导出到 JAR 并使用 progruard 加密

> ID：10683486
> 
> 赞同：1
> 
> 时间：2012-05-21T10:23:05.010
> 
> 标签：android, ant, export, proguard

我想为我们的客户导出我的一个 android 库并使用 progruard 混淆代码。目前，谷歌不允许这样做。有没有人尝试过这样做？我认为选择是编写我自己的 ANT 脚本

# c# - 从字典中读取数据

> ID：10683490
> 
> 赞同：0
> 
> 时间：2012-05-21T10:23:24.023
> 
> 标签：c#, json

我在 C# 中解析 JSON 数组时遇到问题

```
{
    "details" : [{
            "state" : "myState1",
            "place" : [{
                    "name" : "placeName",
                    "age" : 13
                }
            ]
        }, {
            "state" : "myState2",
            "place" : [{
                    "name1" : "placeName"
                }
            ]
        }, {
            "state" : "myState3",
            "place" : [{
                    "name2" : "placeName"
                }
            ]
        }
    ]
} 
```

我的代码是：

```
static void Main(string[] args) 
{ 
    string txt = File.ReadAllText("MyJSONFile.txt"); 
    JavaScriptSerializer ser = new JavaScriptSerializer(); 
    var data = ser.Deserialize(txt); 
}

public class Wrap
{ 
    public List<Dictionary<string, object>> details { get; set; } 
} 
```

如何从这些字典中读取数据？有时 JSON 仅包含 1 个设施的详细信息，但有时数组中包含 30 多个项目。正在从数据库中提取此数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-27T04:53:25.553

您可以使用以下 C# 类结构：

```
public class Place
{
    public string name { get; set; }
    public int age { get; set; }
    public string name1 { get; set; }
    public string name2 { get; set; }
}

public class Detail
{
    public string state { get; set; }
    public List<Place> place { get; set; }
}

public class Root
{
    public List<Detail> details { get; set; }
}

public class Program 
{
    static void Main(string[] args) 
    { 
        string txt = File.ReadAllText("MyJSONFile.txt"); 
        JavaScriptSerializer ser = new JavaScriptSerializer(); 
        var data = ser.Deserialize<Root>(txt); 

        Console.WriteLine(data.details.Count); // 3
        Console.WriteLine(data.details[0].state); // myState1
        Console.WriteLine(data.details[1].place.Count); // 1
        Console.WriteLine(data.details[1].place[0].age); // 13
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T07:46:11.807

您使用的类结构是错误的。您将必须使用如下结构，它对应于您的 JSON。这个结构是使用[json2csharp生成的](http://json2csharp.com/)

```
public class Place
{
    public string name { get; set; }
    public int age { get; set; }
    public string name1 { get; set; }
    public string name2 { get; set; }
}

public class Detail
{
    public string state { get; set; }
    public List<Place> place { get; set; }
}

public class RootObject
{
    public List<Detail> details { get; set; }
} 
```

现在在您的代码中，您可以使用 Newtonsoft.Json 对其进行反序列化，如下所示：

```
static void Main(string[] args)
{
     string jsonText = System.IO.File.ReadAllText("MyJSONFile.txt");
     var rootObj = Newtonsoft.Json.JsonConvert.DeserializeObject<RootObject>(jsonText);
     rootObj.details.ForEach(detail =>
     {
         Console.WriteLine(detail.state);
         detail.place.ForEach(p =>
         {
             if (string.IsNullOrWhiteSpace(p.name) == false)
             {
                  Console.WriteLine(p.name);
             }
             if (string.IsNullOrWhiteSpace(p.name1) == false)
             {
                  Console.WriteLine(p.name1);
             }
             if (string.IsNullOrWhiteSpace(p.name2) == false)
             {
                  Console.WriteLine(p.name2);
             }
             if (p.age > 0)
             {
                  Console.WriteLine(p.age);
             }
             Console.WriteLine(string.Empty);
         });
     });
     Console.ReadKey(true);
} 
```

# java - Android：如何知道 IP 地址是 Wifi IP 地址？

> ID：10683495
> 
> 赞同：5
> 
> 时间：2012-05-21T10:23:40.827
> 
> 标签：java, android, android-networking

我想知道Android设备的IP地址是Data IP还是Wifi IP。

1）设备先连接到3G，现在设备将分配到网络IP。
2）稍后设备连接到WIFI，现在设备将被分配到WIFI IP。
3）任何可以让我们知道IP地址是Wifi IP地址或网络IP的Android API？

在 2.3.5 中使用以下，一切都很好，但在 4.0.3 中，ICS 有一些问题..

```
 /**
 * Is the IP Address a a Wifi Ip Address.
 * @param ipAddr
 * @return boolean
 */
public boolean isWifiIp(byte[] ipAddr){
    try{
        WifiManager mgr = (WifiManager)mCxt.getSystemService(Context.WIFI_SERVICE);
        int wifiIP = mgr.getConnectionInfo().getIpAddress();
        int reverseWifiIP = Integer.reverseBytes(wifiIP);  
        int byteArrayToInt = byteArrayToInt(ipAddr,0);

        if(byteArrayToInt == wifiIP || byteArrayToInt == reverseWifiIP)
            return true;
    }catch (Exception e) {
        Logger.d(TAG, e);
    }
    return false;
}

/**
 * Convert IP Address in bytes to int value.
 * @param arr
 * @param offset
 * @return int
 */
public static final int byteArrayToInt(byte[] arr, int offset) {
    if (arr == null || arr.length - offset < 4)
        return -1;

    int r0 = (arr[offset] & 0xFF) << 24;
    int r1 = (arr[offset + 1] & 0xFF) << 16;
    int r2 = (arr[offset + 2] & 0xFF) << 8;
    int r3 = arr[offset + 3] & 0xFF;
    return r0 + r1 + r2 + r3;
}

/**
 *  Fetches the IP Address of the Client. There is Delay of 2 Seconds for the API to return.
 */
public String getClientIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if(isWifiIp(inetAddress.getAddress())){
                    Logger.d(TAG, "-------- Local IP Address; Not Valid: "+inetAddress.getHostAddress());
                    continue;
                }
                if (!inetAddress.isLoopbackAddress()) {
                    String ipAddress = Formatter.formatIpAddress(inetAddress.hashCode());
                    Logger.d(TAG, "-------- Some Valid IPv4 is ---"+ipAddress);
                    return ipAddress;
                }
            }
        }
    } catch (SocketException ex) {
        Logger.e(TAG, ex.toString());
    }
    return null;
} 
```

请帮助

4) 当我关闭移动数据网络并且 Wifi 开启时，我仍然得到一些有效的 IPv4 地址，这在 2.3.5 及以下版本中看不到。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:25:59.583

您无法根据 IP 地址检测连接类型，因为您的移动网络和家庭 WiFi 网络都可以分配私有 IP 地址。

您需要做的是首先检测您是否有移动网络或 WiFi 连接，然后根据该信息获取该连接的 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:33:27.983

试试这个代码

```
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.SocketException;
import java.util.Enumeration;

import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.widget.Toast;

import com.blundell.tut.R;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        checkAvailableConnection();
    }

    void checkAvailableConnection() {
        ConnectivityManager connMgr = (ConnectivityManager) this
                .getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo wifi = connMgr
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        final android.net.NetworkInfo mobile = connMgr
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if (wifi.isAvailable()) {

            WifiManager myWifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
            WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();
            int ipAddress = myWifiInfo.getIpAddress();
            System.out.println("WiFi address is "
                    + android.text.format.Formatter.formatIpAddress(ipAddress));

        } else if (mobile.isAvailable()) {

            GetLocalIpAddress();
            Toast.makeText(this, "3G Available", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(this, "No Network Available", Toast.LENGTH_LONG)
                    .show();
        }
    }

    private String GetLocalIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface
                    .getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf
                        .getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) {
                        return inetAddress.getHostAddress().toString();
                    }
                }
            }
        } catch (SocketException ex) {
            return "ERROR Obtaining IP";
        }
        return "No IP Available";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T22:18:08.807

找到了窍门.. [http://developer.android.com/reference/java/net/NetworkInterface.html#getName()](http://developer.android.com/reference/java/net/NetworkInterface.html#getName())

WiFi 的 getName 将以 wlan 开头..使用此验证 WiFi IP。

# android - 如何从android中的drawable文件夹中获取图像？

> ID：10683501
> 
> 赞同：1
> 
> 时间：2012-05-21T10:23:58.627
> 
> 标签：android

我正在开发测验应用程序。我将列数据以下列形式存储在 sqlite 数据库中。 ![在此处输入图像描述](../Images/ef0b84413d1e4441cb9a00f52b260a07.png)

我能够检索问题，但现在我需要检索该特定问题的图像。我将图像保存在可绘制文件夹中。但我需要更改`i.e src="/test/image1.png" to src="/drawable/image1.png"`. 如果我像在 sqlite 列中的图像路径一样更改路径，那么我可以获得保存在可绘制文件夹中的图像吗？请帮我解决这个问题...

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T10:27:42.493

我会坚持在数据库中你可以只给出图像的名称，然后你可以使用获取图像[`getIdentifier`](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)，

```
getResources().getIdentifier(name,"drawable", getPackageName()); 
```

其中 name 将是您的图像的名称，即 -`"image1"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T10:49:48.973

也可以这样做：

```
 Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker); 
```

这里指的是实际活动的上下文。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T10:36:58.077

getResources().getIdentifier(name,"drawable", getPackageName());

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:06:01.493

只需命名 src="image1.png" 并将文件放入您的资产文件夹图像和 html

# iphone - 如何在iphone中实现自动更新功能？

> ID：10683503
> 
> 赞同：1
> 
> 时间：2012-05-21T10:24:08.650
> 
> 标签：iphone

我正在开发一个 iPhone 应用程序。它有一个称为自动更新的选项。它可以每周/每月/6个月自动更新一次。您能否让我知道即使用户没有打开我的应用程序，我如何才能根据此设置调用我想要的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:27:35.547

你不能，用户需要打开应用程序，没有办法安排更新程序。

您可以通知用户他/她需要使用 更新`UILocalNotification`，但我建议仅在用户启动时更新您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:48:44.820

您可以做的是在从 UIlocalNotification 接收通知时增加应用程序图标的徽章计数。

当用户打开应用程序时，检查应用程序徽章计数是否大于零应用您的逻辑来更新应用程序。

否则将不会有更新弹出客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:34:29.230

在您的应用程序中推送更新的应用程序是违反苹果规则的。您必须重新提交到应用商店。

# wpf - 在 WPF MVVM 中使用行为？

> ID：10683504
> 
> 赞同：9
> 
> 时间：2012-05-21T10:24:10.260
> 
> 标签：wpf, mvvm

我是 WPF MVVM 的新手 .. 有人清楚 WPF 中 MVVM 应用程序中行为的用法吗？为什么即使我们在 WPF MVVM 中有 Method 操作，我们也应该选择 Behavior ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:27:39.983

行为是您附加到元素的东西，并指定应用程序应何时响应。

Action 附加到行为上，并定义了当行为被触发时应用程序应该做什么。

[从这篇文章：](http://blogs.msdn.com/b/expression/archive/2009/03/30/behaviors-under-the-hood-api-details-and-constraining-the-type.aspx)

> 乍一看，一个行为看起来类似于一个动作：一个独立的功能单元。主要区别在于动作期望被调用，并且当被调用时，它们将执行一些操作。一个行为没有调用的概念；相反，它更多地充当对象的附加组件：如果需要，可以附加到对象的可选功能。它可能会响应来自环境的刺激做某些事情，但不能保证用户可以控制这个刺激是什么：由行为作者决定什么可以定制，什么不能定制。

[从这篇文章中](http://electricbeach.org/?p=148)：

> 行为让您可以将多个相关或依赖的活动以及状态封装在一个可重用的单元中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T09:32:37.177

我强烈推荐阅读[WPF 中的附加行为简介，](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)它演示了：

*   什么是依附行为
*   它有什么替代品
*   与类似问题的替代解决方案相比，它的优势

> 这个想法是您在元素上设置附加属性，以便您可以从公开附加属性的类中访问该元素。一旦该类可以访问该元素，它就可以在其上挂钩事件，并响应这些事件触发，使该元素执行它通常不会执行的操作。它是创建和使用子类的一种非常方便的替代方法，并且对 XAML 非常友好。

上述文章的结论：

> Hooking an event on an object and doing something when it fires is certainly not a breakthrough innovation, by any stretch of the imagination. In that sense, attached behaviors are just another way to do the same old thing. However, the importance of this technique is that it has a name, which is probably the most important aspect of any design pattern. In addition, you can create attached behaviors and apply them to any element without having to modify any other part of the system. It is a clean solution to the problem raised by Pascal Binggeli, and many, many other problems. It's a very useful tool to have in your toolbox.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:04:06.410

在 MVVM 中，如果您的 ViewModel 公开方法而不是命令，您可能需要从视图中调用方法。行为允许这样做。

您声明“我们在 WPF MVVM 中有方法操作”，但据我所知，“方法操作”不是 WPF 的一部分。如果您使用的是辅助 MVVM 库，它可能会提供可以将方法封装在命令中的“方法操作”。在这种情况下，使用方法的 MVVM 模式不需要行为。

但请注意，这些行为在 MVVM 之外还有其他用途。

# c# - 具有多列的列表框

> ID：10683508
> 
> 赞同：2
> 
> 时间：2012-05-21T10:24:22.673
> 
> 标签：c#, wpf, xaml, listbox

我想在列表框中有多个列，其中包含我通过从数据库中获取值动态创建的复选框。代码是这样的：

```
<StackPanel Width="250" Height="80">
<ListBox Name="listBoxZone" ItemsSource="{Binding TheList}" Height="115"    Background="Azure">
 <ListBox.ItemTemplate>
    <DataTemplate>
       <CheckBox Name="CheckBoxZone" Content="{Binding TheText}" Tag="{Binding TheValue}" Checked="CheckBoxZone_Checked" Margin="0,5,0,0"/>
     </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

但是这里的复选框一个接一个水平出现......我想在 5 个复选框之后更改列......我在这里使用了 wrap 面板，但它把所有复选框都垂直排列成一行。

那么现在该怎么办呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:43:38.323

你应该试试这个：

```
<ListBox Name="listBoxZone" ItemsSource="{Binding TheList}" Height="115"    Background="Azure">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Width="{Binding (FrameworkElement.ActualWidth), RelativeSource={RelativeSource AncestorType=ScrollContentPresenter}}"
                        ItemWidth="{Binding (ListBox.View).ItemWidth, RelativeSource={RelativeSource AncestorType=ListBox}}"
                        MinWidth="{Binding ItemWidth, RelativeSource={RelativeSource Self}}"
                        ItemHeight="{Binding (ListBox.View).ItemHeight, RelativeSource={RelativeSource AncestorType=ListBox}}" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <CheckBox Name="CheckBoxZone" Content="{Binding TheText}" Tag="{Binding TheValue}" Checked="CheckBoxZone_Checked" Margin="0,5,0,0"/>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

当到达控件的宽度边界而不是项目数达到 5 时，此代码将换行。如果这不符合您的要求，那么我建议您使用 Grid 而不是 ListBox。

# apache - Apache URL 指向根目录

> ID：10683517
> 
> 赞同：0
> 
> 时间：2012-05-21T10:25:15.850
> 
> 标签：apache, url, routing, virtualhost

是否可以在 apache 中路由任何 URL 以始终指向我的 VirtualHost 中的 DocumentRoot？

所以 f.ex:`/foo/bar/`将始终请求`/`.

我在想类似的东西（请原谅我的新手伪代码）：

```
AliasMatch ^/.* DocumentRoot 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:33:35.157

像下面这样的东西似乎是大多数 CMS 使用的模式。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

# javascript - 将数组传递给 var 函数

> ID：10683519
> 
> 赞同：1
> 
> 时间：2012-05-21T10:25:37.183
> 
> 标签：javascript, jquery

```
var reguser = function(btn,url,form_data,op) {
    $(btn).click(function(){
        postLoad(url,form_data,op);
        return false;
    });
}

var postLoad = function(url,form_data,op,fade) {
    $.post(base_url(url),form_data,function(q){$(op).html(q);});
}

var getVal = function(link) {
    return $(link).val();
};

var base_url = function(link) {
    return 'http://localhost/cw/' + link;
} 
```

我这里有三个 var 函数。我觉得奇怪的是，当我想传递一个数组变量时，它没有在我的 AJAX 中传递。

这是我执行代码的方式（这已在 $(document).ready(); 中声明）。上面的代码存储在一个单独的文件中。

```
reguser('#add-acct','ctrl_register/AJAXreguser',{call:1,fname:getVal('#fname')},'#acct-detail'); 
```

结果：

> 数组 ( [call] => 1 [fname] => )

表格代码

```
 <form action="http://localhost/cw/ctrl_register" class="form-vertical" method="post" accept-charset="utf-8">
<label for="fname">First Name</label>
    <input type="text" name="fname" value="" class="span8 input-small"id="fname" placeholder="First Name" />
    <label for="mname">Middle Name</label>
<input type="text" name="mname" value="" class="span8 input-small"id="mname" placeholder="Middle Name" />
<label for="lname">Last Name</label>
<input type="text" name="lname" value="" class="span8 input-small"id="lname" placeholder="Last Name" />
<label for="user">Username</label>
<input type="text" name="user" value="" class="span8 input-small"id="user" placeholder="Username" />
<label for="pass">Password</label>
<input type="password" name="pass" value="" class="span8 input-small"id="pass" placeholder="Password" />
<label for="pass2">Confirm Password</label>
<input type="password" name="pass2" value="" class="span8 input-small"id="pass" placeholder="Confirm Password" />
</br><input type="submit" name="Add-acct" value="Add Account" class="btn btn-primary" id="add-acct" />
</form> 
```

![在此处输入图像描述](../Images/2f083afc86f9f968977152391824babe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:38:55.753

此代码适用于我：http: [//jsfiddle.net/flocsy/WC336/1/](http://jsfiddle.net/flocsy/WC336/1/)

问题是，在注册用户中，您想为您传递的按钮注册 onclick，但在同一调用中，您传递了 fname.val()，它是空的，因为您尚未填写它。

解决方案是从寄存器中删除 onclick 并将其放在 document.ready 中：

```
var reguser = function(btn,url,form_data,op) {
    console.log(form_data);
//    $(btn).click(function(){
        postLoad(url,form_data,op);
        return false;
//    });
};

$(document).ready(function(){
    $("#add-acct").on("click",function(){
        var fn=getVal('#fname');
        var dat = {'call':1,'fname':fn};
        reguser('#add-acct','ctrl_register/AJAXreguser',dat,'#acct-detail');
        return false;
    });
});
​ 
```

# dom - 为 mule 显式指定 DOM 解析器

> ID：10683529
> 
> 赞同：1
> 
> 时间：2012-05-21T10:26:34.653
> 
> 标签：dom, mule, xerces

我有一个服务器端 Web 应用程序代码，它使用 mule 来使用 xml 消息并进行一些处理。最近我已经转移到一个新的tomcat版本。当 mule 尝试将 xml 转换为 dom 时，我看到以下错误。

```
Exception Stack trace: 
```

1\. org.apache.xerces.parsers.XIncludeAwareParserConfiguration 不能转换为 org.apache.xerces.xni.parser.XMLParserConfiguration (java.lang.ClassCastException) org.apache.xerces.parsers.DOMParser:-1 (null) 2\. org.apache.xerces.parsers.XIncludeAwareParserConfiguration 不能转换为 org.apache.xerces.xni.parser.XMLParserConfiguration (java.lang.ClassCastException) (org.mule.api.transformer.TransformerException) org.mule.module.xml。转换器.XmlToDomDocument:64 (http://www.mulesource.org/docs/site/current2/apidocs/org/mule/api/transformer/TransformerException.html)

根异常堆栈跟踪：java.lang.ClassCastException：org.apache.xerces.parsers.XIncludeAwareParserConfiguration 无法在 org.apache.xerces.parsers.DOMParser 中转换为 org.apache.xerces.xni.parser.XMLParserConfiguration。（未知来源）在 org.apache.xerces.parsers.DOMParser.(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderImpl.(Unknown Source) at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(Unknown Source) at com.sun .org.apache.xalan.internal.xsltc.trax.SAX2DOM.createDocument(SAX2DOM.java:324) 在 com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.(SAX2DOM.java:84) 在com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory.getSerializationHandler(TransletOutputHandlerFactory.java:187) 在 com.sun.org.apache.xalan.internal。xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:392) 在 com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:298) 在 org.mule.module.xml。 org.mule.transformer.AbstractTransformer.transform(AbstractTransformer.java:254) 上的transformer.XmlToDomDocument.doTransform(XmlToDomDocument.java:58)

我认为这是因为我的 WEB-INF/lib 目录中的 xerces 2.9.1 造成的。我取下了罐子，一切正常。问题是我需要在我的库中使用该 jar，因为库中有一些其他遗留的 3rd pary jar 需要在类路径中使用 xerces 版本。

1.  有没有一种方法可以让我指定一个不同的 DOM 解析器并让 mule 从类路径中获取它。
2.  我检查了 xerces java doc，XIncludeAwareParserConfiguration 确实实现了 XMLParserConfiguration。想知道为什么它会抛出一个类广播吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:51:49.190

Mule 的[AbstractXmlTransformer](http://www.mulesoft.org/docs/site/current3/apidocs/index.html?org/mule/module/xml/transformer/AbstractXmlTransformer.html)提供了几个配置选项，`setXMLInputFactory`我认为这些选项可以帮助您实现目标。

问题是 XML 级别不提供这些配置选项，因此您必须将[XmlToDomDocument](http://www.mulesoft.org/docs/site/current3/apidocs/index.html?org/mule/module/xml/transformer/XmlToDomDocument.html)声明为自定义转换器才能在其上设置不同的属性。

# nginx - 如何实现在底层服务器宕机时出现的nginx智能维护页面？

> ID：10683536
> 
> 赞同：5
> 
> 时间：2012-05-21T10:27:03.673
> 
> 标签：nginx

我正在寻找一个 nginx 解决方案，它会在下属服务器关闭时显示临时关闭消息。

我正在寻找或类似这样的解决方案：

*   如果上游服务器关闭，则显示维护页面 (503)
*   如果上游服务器在 60 秒内没有返回任何内容，则显示超时 (504)（返回整个内容可能需要更多时间）
*   可选：找到一种方法来衡量从服务第一次关闭时所花费的时间，以便我可以显示维护消息：但如果这种情况仍然发生超过 5 分钟，请向管理员发送电子邮件。

重申一下，重点是进行配置，允许服务器管理员重新启动上游服务器，而无需管理维护消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:31:27.817

如果您根据自己的喜好设置代理或 fcgi 请求的超时值（取决于您的设置），您确实可以使用该`error_page`指令为特定错误代码配置不同的错误页面。

[正如kashyap](https://stackoverflow.com/users/662530/kashyap)已经指出的那样，[nginx 文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#error_page)有详细信息。

您的可选要求基本上相当于监控服务，这很可能不是最好在前端服务器内完成的事情。

# javascript - Extracting entire column of data from HTML table into array using jQuery

> ID：10683537
> 
> 赞同：13
> 
> 时间：2012-05-21T10:27:15.957
> 
> 标签：javascript, jquery, arrays, html-table

Could not find a clear and recent explanation of how to achieve this. Does jQuery have a straightforward method for taking the entire third column from a HTML table with id="table1" and populating an array with one cell value per array element. I am relatively new to jQuery and have not explored its features fully. Some of jQuery's shortcuts have amazed me so thought it might be wiser to ask here than to go on mashing code together and seeing no results.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T10:39:17.723

To build a array out of all elements from 3rd column you can using the following code

```
var colArray = $('#table1 td:nth-child(3)').map(function(){
       return $(this).text();
   }).get()​; 
```

here What I am doing is selecting all cells in 3rd column by `nth-child` selector. Then using [$.map](http://api.jquery.com/map/) function to loop through to and use their value to build a array.

[Working Fiddle](http://jsfiddle.net/joycse06/tmfxr/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T10:32:49.153

You can try this :

```
var myArray = new Array();
$(document).ready(function() { 
    $("#table1 tr td:nth-child(3)").each(function(i){
       myArray.push($(this).text());
    });
}); 
```

Here is an example [http://jsfiddle.net/nU6bg/](http://jsfiddle.net/nU6bg/)

# css - Bootstrap 流体网格系统 Issue Opera 11.64

> ID：10683539
> 
> 赞同：1
> 
> 时间：2012-05-21T10:27:22.993
> 
> 标签：css, twitter-bootstrap

```
<!-- html -->
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12 slider">Text 1</div>
    </div>
</div>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span8 main">
             Text  2
        </div>
        <div class="span4 login">
             Text  3
        </div>
    </div>
</div>

/* CSS */
.login, .main {
    border: 1px solid #aeaeae;
    border-radius: 10px;
    margin-top: 15px;
}
.slider {
    height: 120px;
    border: 1px solid #aeaeae;
    border-radius: 10px;
    background-image: url(../Images/divFonWithoutBorder.png);
} 
```

**歌剧**

![我的问题](../Images/2cd60b205f51f4e6695cc883606fcc4f.png)

![在引导文档页面上](../Images/b461c6dfc0efad29abedc0a9efa2b4bd.png)

**在其他浏览器中**

![在其他浏览器中](../Images/5de45cdff8241dfac16b540e9d4de271.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T02:09:49.093

原因是 Opera 中的一个错误，其中小数百分比向下舍入到最接近的整数百分比，例如 5.98% 变为 5%。据我所知，Opera 从来没有正确处理过这个问题。

我不知道一个好的解决方案。一种选择是接受它（当错误仍然存​​在时）。随着百分比向下舍入，结果应该只会在美学上令人不快，不会出现行溢出到两行的问题。另一种选择是避免使用流体网格系统。

为此，我在 Opera 上打开了一个错误，编号为 DSK-364769（但是无法跟踪进度）。

# sql - 选择进入 sql - 用户函数

> ID：10683541
> 
> 赞同：1
> 
> 时间：2012-05-21T10:27:33.517
> 
> 标签：sql, sql-function

我想从不同的表中获取相同的列，所以我使用用户函数。但我想在 Return 之前对结果表进行排序。在这段代码中，我尝试使用临时表来执行此操作。sql 返回：'@Result' 附近的语法不正确。' 我怎样才能做到这一点？

谢谢

这里的代码：

```
CREATE FUNCTION sp_GetAllNotConfirmedOrders
()
RETURNS @Result TABLE 
(
    OrderId int,
    CreationDate datetime,
    BusinessName nvarchar(150),
    BusinessPhone nvarchar(20),
    UserType int
)
AS
BEGIN
    DECLARE @TempData TABLE
    (
        OrderId int,
        CreationDate datetime,
        BusinessName nvarchar(150),
        BusinessPhone nvarchar(20),
        UserType int
    )

    INSERT INTO @TempData
        SELECT     Orders.OrderId, ZimmerOrders.CreationDate,Zimmers.OwnerName, Zimmers.PhoneNUmber1, 2
        FROM         Orders INNER JOIN
                  ZimmerOrders ON Orders.OrderId = ZimmerOrders.OrederId INNER JOIN
                  ZimmerRooms ON ZimmerOrders.RoomId = ZimmerRooms.RoomId INNER JOIN
                  Zimmers ON ZimmerRooms.ZimmerId = Zimmers.UserId
        WHERE     (Orders.IsConfirm = 0)

    INSERT INTO @TempData
        SELECT     Orders.OrderId, HotelOrders.CreationDate, Hotels.PhoneNumber1, Hotels.HotelName, 4
        FROM         HotelOrders INNER JOIN
                      HotelRooms ON HotelOrders.RoomId = HotelRooms.RoomId INNER JOIN
                      Hotels ON HotelRooms.HotelId = Hotels.UserId INNER JOIN
                      Orders ON HotelOrders.OrderId = Orders.OrderId
        WHERE     (Orders.IsConfirm = 0)

    SELECT * INTO @Result FROM @TempData ORDER BY CreationDate
    RETURN 
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:30:28.767

你可以这样做：

```
INSERT INTO @Result
SELECT OrderId, CreationDate, BusinessName, BusinessPhone, UserType
FROM @TempData
ORDER BY CreationDate 
```

# jquery - Django内联登录处理：获取当前活动的反向url名称

> ID：10683547
> 
> 赞同：0
> 
> 时间：2012-05-21T10:27:43.760
> 
> 标签：jquery, ajax, django, url, login

我目前正在开发一个模式登录框，它可以在不重新加载页面的情况下提交和处理登录请求。登录成功后，有两种可能的结果：

1.  用户想事先点击一个链接，该链接仅供登录用户访问：用户在登录后被重定向到该页面

2.  用户单击了一个触发 AJAX 调用的元素，该调用只有登录用户才能访问：登录后再次触发 ajax 调用

## 模板

```
{% load url from future %}
<form action="{% url 'login' %}" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Login" />
</form> 
```

现在，我不知道该怎么做。我的主要问题是确定登录后需要处理哪个 URL。成功登录后，我如何知道哪个 URL 当前在队列中等待处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:58:46.373

当您被重定向到登录页面时，通常会在请求中传递下一个参数。对于 ajax 请求也是如此。您只需在表单中添加一个隐藏的输入字段，即可将“next”参数与未登录用户尝试获取的 url 一起传递：

```
{% load url from future %}
<form action="{% url 'login' %}" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Login" />
<input style="hidden" name="next" value="some_url">
</form> 
```

然后，标准登录视图将返回一个 HttpResponseRedirect，对于您的类似 ajax 的登录，这不是您想要的。因此，您必须自己编写登录视图并覆盖该行为。

# wcf - 在我使用自我跟踪实体时实施方法

> ID：10683548
> 
> 赞同：0
> 
> 时间：2012-05-21T10:27:44.570
> 
> 标签：wcf, entity-framework, self-tracking-entities

我如何使用 WCF 服务中的自我跟踪实体来实现 ServiceContract

这是我在**IPbService.cs中的 ServiceContract**

```
namespace PhoneBookService
{
     [ServiceContract]
     public interface IPbService
     {
          [OperationContract]
          List<User> GetAllUser();

          [OperationContract]
          string AddUser(User user);

          [OperationContract]
          string DeleteUser(int id);

          [OperationContract]
          string UpdateUser(User user);

          [OperationContract]
          List<Contact> GetContactsByUser(int id);

          [OperationContract]
          string AddContact(Contact contact, string userName);

          [OperationContract]
          string DeleteContact(int id);

          [OperationContract]
          string UpdateContact(Contact contact);

     }
} 
```

这是我在**PbService.svc.cs中的实现类**

```
namespace PhoneBookService
{
     public class PbService : IPbService
     {
          readonly PhoneBookDBEntities _context = new PhoneBookDBEntities();

          public List<User> GetAllUser()
          {
                return _context.Users.OrderBy(u => u.Name).ToList();
          }

          public string AddUser(User user)
          {
            try
            {
                _context.Users.AddObject(user);
                 _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }
          }

          public string DeleteUser(int id)
          {
            try
            {
                User user = _context.Users.FirstOrDefault(u => u.UserID == id);
                _context.Users.DeleteObject(user);
                _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }

          }

          public string UpdateUser(User user)
          {
            try
            {
                if (user == null) throw new ArgumentNullException("user");
                User oldUser = _context.Users.FirstOrDefault(u => u.UserID == user.UserID);
                if (oldUser != null)
                {
                    oldUser.Name = user.Name;
                    oldUser.Password = user.Password;
                    oldUser.UserName = user.UserName;
                    oldUser.Email = user.Email;
                    oldUser.CreationDate = DateTime.Now;
                }
                _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }

          }

          public List<Contact> GetContactsByUser(int id)
          {
                User user = _context.Users.FirstOrDefault(u => u.UserID == id);
                if (user == null) throw new ArgumentNullException("id");
                return user.Contacts.OrderBy(c=>c.Name).ToList();
          }

          public string AddContact(Contact contact, string userName)
          {
            try
            {
                User user = _context.Users.FirstOrDefault(u => u.UserName == userName);
                if (user != null) user.Contacts.Add(contact);
                _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }

          }

          public string DeleteContact(int id)
          {
            try
            {
                Contact contact = _context.Contacts.FirstOrDefault(c => c.ContactID == id);
                _context.Contacts.DeleteObject(contact);
                _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }
          }

          public string UpdateContact(Contact contact)
          {
            try
            {
                Contact oldContact = _context.Contacts.FirstOrDefault(c => c.ContactID == contact.ContactID);
                if (oldContact != null)
                {
                    oldContact.Name = contact.Name;
                    oldContact.PhoneNumber = contact.PhoneNumber;
                    oldContact.Email = contact.Email;
                    oldContact.Mobil = contact.Mobil;
                    oldContact.Address = contact.Address;
                }
                _context.SaveChanges();
                return "";
            }
            catch (Exception e)
            {
                return e.Message;
            }
          }

     }
} 
```

![在此处输入图像描述](../Images/ae4532f70a9b33073cab430e82c1ad84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:51:05.747

在您的 WCF 项目中，您只需要引用您的 EntityClasses 项目。这么简单？！大概吧...

您的自我跟踪实体已经为其携带的属性配备了正确的 DataMember 属性。

另一件事...我看到您使用不同的方法进行添加、更新和删除。我总是使用一个 Persist 方法，它是这样的：

```
using(Entities context = new Entities())
{
  try
  {
    context.ApplyChanges(user);
    context.SaveChanges();
  }
  catch
  {
    ...
  }
} 
```

自跟踪实体上下文“知道”如何根据 STE 携带的 ChangeTracker 应用对实体所做的更改。所以你根本不需要单独的方法。非常容易维护。

因此，当您在某些客户端应用程序中创建新实体时，ChangeTracker.State 将为 ObjectChangeTrackerState.Add，而在修改现有实体时，当您使用 entity.MarkAsDeleted() 时，它将被修改和删除。

希望能帮助到你。

# redirect - 如何实现仅重定向的基于机架的 heroku 应用程序？

> ID：10683549
> 
> 赞同：3
> 
> 时间：2012-05-21T10:27:47.073
> 
> 标签：redirect, heroku, rack, http-status-code-301

我想创建一个用于部署 heroku 的机架应用程序，以创建一些到其他子域的 301 重定向。

如果这条路能延续下去，那就太好了。

我从以下代码开始，但它不起作用：

```
require 'rack-force_domain'

use Rack::ForceDomain, ENV["DOMAIN"]

run lambda { |env| [200, {'Content-Type'=>'text/plain'}, StringIO.new("Hello World!\n")] } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T11:59:06.013

我通过使用`sinatra`finally 解决了这个问题。那是我的`config.ru`：

```
require 'sinatra'

get %r{(.*)} do
  redirect to("http://custom.domain#{params[:captures].first}"), 301
end

run Sinatra::Application 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:29:39.680

只是这样做，它非常简单：

宝石文件：

```
source 'https://rubygems.org'

ruby '2.0.0'

gem 'rack'
gem 'rack-rewrite' 
```

配置.ru：

```
require 'rack/rewrite'

use Rack::Rewrite do
  ...
end

run lambda { |env| [200, {'Content-Type'=>'text/plain'}, StringIO.new("Nothing Here!\n")] } 
```

任何与您的重定向规则不匹配的内容都只会返回 200 并带有文本“Nothing Here！”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:37:01.093

看看 rack-rewrite - [https://github.com/jtrupiano/rack-rewrite](https://github.com/jtrupiano/rack-rewrite)，它有一个你想要实现的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T15:24:47.193

我稍微调整了@rriemann 的答案。我发现我希望重定向完整路径，包括参数。另外，插入用户提供的字符串不是很危险吗？这对我有用：

```
require 'sinatra'

get "*" do
  redirect to("http://custom.domain" + request.fullpath), 301
end

run Sinatra::Application 
```

此外，如果有人需要，这里是我的实现的[github 链接。](https://github.com/marchinilab/redirector)

# jquery - 模态对话框确认框文本消失

> ID：10683550
> 
> 赞同：0
> 
> 时间：2012-05-21T10:27:49.757
> 
> 标签：jquery, jquery-ui, modal-dialog

我想知道是否有人可以帮助我。

我已经把[这个](http://www.mapmyfinds.co.uk/development/testgallery.php)画廊页面放在一起。

使用每个图像下的图标，用户可以删除他们想要的任何图像。我没有立即删除图像，而是尝试实现模态确认对话框，因此用户可以选择取消删除。

我可以让 onlick 事件起作用，但是询问用户是否要删除图像的文本在单击时会从对话框中消失。

我确实遇到了页面加载时出现在页面顶部的对话框文本的问题。为了克服这个问题，我使用了以下方法：

我尝试添加以下内容来防止这种情况：

```
.hide{   display: none !important;   }  

<div id="dialog-confirm" class="hide" title="Delete This Image?"> 
```

所以我知道这个问题很可能是由这个引起的，但我不确定如何克服这两个问题。

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:17:10.887

你没有提到你的代码，但我认为问题是这样的，你的类“ `.hide`”正在正确应用，其中包含“ `display:none`”。

但是您在早期代码中为您的“对话框确认”框定义了“ `display:block`”属性“**内联”。**

**并且定义为“ inline** ”的css属性总是比“ **class** ”中定义的属性具有更高的优先级。

所以`display:none`被“ `display:block`”覆盖。

尝试通过“ `.addClass()/.removeClass()`”或“内联”在两个位置提供属性，这可能对你有帮助！因为它在同样的情况下对我有用

我也是这个领域的新手，所以如果我错了，请其他人纠正我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:30:35.510

请删除页面上的以下样式定义。然后它将起作用：

```
.hide{   display: none !important;   } 
```

您需要使用选项定义对话框，`autoOpen: false` 并且需要在单击删除按钮（使用`.live`代码的位置）时使用打开命令调用。请修改代码如下：

```
 $( "#dialog-confirm" ).dialog({
                resizable: false,
                modal: true,
                autoOpen: false
                buttons: {
                    "Delete image": function() {
                    var img = $(this).closest(".galleria-image").find("img"); 
                            // send the AJAX request
                    $.ajax({
                    url : 'delete.php',
                    type : 'post',
                    data : { image : img.attr('src'),  userid: "VALUE", locationid: "VALUE"},
                    success : function(){
                    img.parent().fadeOut('slow');
                    }
                    });
                    },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
                }
            }); 

    $(".btn-delete").live("click", function(){      
        $( "#dialog-confirm" ).dialog( "open" );
    return false;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:51:10.623

您可以`autoOpen: false`在对话框调用中传递该选项以隐藏它，直到它被调用；

```
$( "#dialog-confirm" ).dialog({
    autoOpen: false
}); 
```

有了这个选项，对话框应该在视图中隐藏，直到它被调用。

此外，您已将`.hide`类放在`<style>..</style>`标签之外，并显示在页面顶部。

# java - Tomcat 7 多部分表单数据

> ID：10683552
> 
> 赞同：2
> 
> 时间：2012-05-21T10:28:03.087
> 
> 标签：java, scala, playframework, tomcat7, playframework-2.0

我有一个用 Scala 编写的 Play 2.0 Web 应用程序。我使用 play war 插件生成了一个 WAR 文件并部署在 tomcat 7.0.27 上。

当我使用 enctype="multipart/form-data" 提交表单时，请求失败。错误似乎与播放框架没有找到数据的“边界”有关。

我已经尝试过放置 allowCasualMultipartParsing="true" 但它没有帮助

相同的代码在播放服务器上运行良好。我在Tomcat上缺少什么？是否有启用/抑制多部分的特定配置？

相关表格代码为：

```
<form method="POST" action="/create" id="myform" class="form-horizontal" enctype="multipart/form-data"> 
<input type="file" name="logo" id="logo"  placeholder="Logo Image" class="input-xlarge" />
<input type="submit" value="Save Details" class="btn btn-info"/>
</form> 
```

控制器代码如下所示：

```
val hash_string = "xxxxxxxxxxxx"
var logoFile: String = null

request.body.asMultipartFormData.map { x => x.file("logo").map { logo => logoFile = uploadFile(hash_string, logo) } } 
```

即使我不上传文件，我仍然会收到 BadRequest - 转储如下：

```
Map(HOST -> non-empty iterator, ACCEPT-ENCODING -> non-empty iterator, 
ACCEPT-LANGUAGE -> non-empty iterator, REFERER -> non-empty iterator, 
CONTENT-LENGTH -> non-empty iterator, ORIGIN -> non-empty iterator, 
ACCEPT-CHARSET -> non-empty iterator, CONNECTION -> non-empty 
iterator, CONTENT-TYPE -> empty iterator, CACHE-CONTROL -> non-empty 
iterator, ACCEPT -> non-empty iterator, COOKIE -> empty iterator, USER- 
AGENT -> non-empty iterator) Map(utmc -> Cookie(utmc, 
84437902,-1,/,None,false,false), utmz -> Cookie(utmz, 
84437902.1337318013.1.1.utmcsr,-1,/,None,false,false), PLAYSESSION -> 
Cookie(PLAY_SESSION,11cd5ffd7e2b56910a6a118e0de60be50c963697-email 
%3Axxxxxxxxxxx,-1,/,None,false,false), __utma -> Cookie(utma, 
84437902.1740292094.1337318013.1337510573.1337583859.6,-1,/,None,false,fals e), 
__utmb -> Cookie(_utmb, 
84437902.2.10.1337583859,-1,/,None,false,false))' [Missing boundary 
header] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:03:46.950

问题是，如果您像我在代码中使用的那样使用“request.body.asMultipartFormData”，它可以与游戏一起使用，但不能在 tomcat 上使用。但是，如果您使用 'parse.multipartFormData' BodyParser，则可以。不知道为什么，但它现在这样做了，我的方法看起来像：

```
def create = IsMultipartAuthenticated(parse.multipartFormData) { user 
  => implicit request => 
  ... 
  request.body.file("logo").map { logo => ... } 
  ... 
  Ok 
} 
```

我为 Secured trait 添加了一个方法：

```
def IsMultipartAuthenticated(p: BodyParser[MultipartFormData[TemporaryFile]])(f: => String => 
  Request[MultipartFormData[TemporaryFile]] => Result) = 
  Security.Authenticated(username, onUnauthorized) { user => 
    Action(p)(request => f(user)(request)) 
  } 
```

# html - css3 按钮中的问题

> ID：10683553
> 
> 赞同：0
> 
> 时间：2012-05-21T10:28:03.167
> 
> 标签：html, css

我正在尝试基于 ipad 创建一个后退按钮。我有一个按钮和箭头，似乎无法降低箭头的高度以与按钮匹配。如果我降低箭头的高度，它不会正确显示。

感谢 Sandeep 的箭头风格..

这是我到目前为止所做的代码 [http://jsfiddle.net/dVbJr/5/](http://jsfiddle.net/dVbJr/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:48:10.253

你可以用一种更简单的方式来完成它，只需使用按钮。没有多余的元素。

**编辑**：像这样的东西：

```
.backLstBtn {
    margin: 125px;
    padding: 7px;
    border: 1px solid #999;
    border-left: none;
    border-radius: 0 7px 7px 0;
    position: relative;
    font-size: 11px;
    font-weight: bold;
    background: linear-gradient(#FDFDFD, #F4F4F4);
    cursor: pointer;
}
.backLstBtn:before {
    left: -13px;
    top: 1px;
    height: 25px;
    width: 24px;
    border-radius: 7px;
    transform: rotate(45deg);
    border-left: solid 1px #999;
    border-bottom: solid 1px #999;
    position: absolute;
    z-index: -1;
    background: linear-gradient(-45deg, #FDFDFD, #F4F4F4);
    content: '';
} 
```

你可以在这里看到它的运行[http://dabblet.com/gist/2761845](http://dabblet.com/gist/2761845)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:55:08.027

这可以简单得多。那里有一些非常好的生成器：例如[http://cssarrowplease.com/ 。](http://cssarrowplease.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:33:03.107

如果要使用大图像，请减少 Photoshop 中的图像高度，然后使用 HTMl 标记并在 css 中控制高度...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:37:38.473

你可以很容易地通过这个 css：-

```
.arrow:after{
    -moz-transform: rotate(45deg);
    background: none repeat scroll 0 0 #F4F4F4;
    border: 1px solid #999999;
    border-radius: 10px 10px 10px 10px;
    content: "";
    height: 75px;
    position: absolute;
    right: -53px;
    top: -33px;
    width: 45px;
} 
```

看演示：- [http://jsfiddle.net/dVbJr/11/](http://jsfiddle.net/dVbJr/11/)

**更新**

请用这个更新你的CSS： -

```
 .arrow:after{
     -moz-transform: rotate(45deg);
    -webkit-transform: rotate(45deg);
    transform: rotate(45deg);
    background: none repeat scroll 0 0 #F4F4F4;
    border: 1px solid #999999;
    border-radius: 10px 10px 10px 10px;
    content: "";
    height: 75px;
    position: absolute;
    right: -53px;
    top: -33px;
    width: 45px;
} 
```

现在它的工作网络套件浏览器......

有关基于纯 css 形状的更多信息，请阅读本文：- [http://www.css3shapes.com/](http://www.css3shapes.com/)

# android - 从我的位置到android中目标位置的距离计算

> ID：10683554
> 
> 赞同：13
> 
> 时间：2012-05-21T10:28:03.757
> 
> 标签：android, location, distance

我必须制作一个项目，我需要计算从我的位置到目的地位置的距离并将其显示在文本视图中。请注意，当我的位置更改时，此距离会更新。是否可以制作这种类型的项目？

[注意：没有实施谷歌地图，我必须制作它。目的地 lon ，lat 是已知的。只需找到我的位置并进行计算]

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-21T10:33:02.167

查看 google android dev 页面上的文档，了解如何监听位置变化。[http://developer.android.com/guide/topics/location/obtaining-user-location.html](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

您可以使用此功能来确定当前（起点）点与目标点之间的距离。

```
 /**
 * using WSG84
 * using the Metric system
 */
public static float getDistance(double startLati, double startLongi, double goalLati, double goalLongi){
    float[] resultArray = new float[99];
    Location.distanceBetween(startLati, startLongi, goalLati, goalLongi, resultArray);
    return resultArray[0];
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T06:43:54.067

`Location.distanceBetween`将给出两点之间的直线距离。如果您想要两个地理点之间的 PATH 距离，那么您可以使用此类：

```
public class GetDistance {

public String GetRoutDistane(double startLat, double startLong, double endLat, double endLong)
{
  String Distance = "error";
  String Status = "error";
  try {
      Log.e("Distance Link : ", "http://maps.googleapis.com/maps/api/directions/json?origin="+ startLat +","+ startLong +"&destination="+ endLat +","+ endLong +"&sensor=false");
        JSONObject jsonObj = parser_Json.getJSONfromURL("http://maps.googleapis.com/maps/api/directions/json?origin="+ startLat +","+ startLong +"&destination="+ endLat +","+ endLong +"&sensor=false"); 
        Status = jsonObj.getString("status");
        if(Status.equalsIgnoreCase("OK"))
        {
        JSONArray routes = jsonObj.getJSONArray("routes"); 
         JSONObject zero = routes.getJSONObject(0);
         JSONArray legs = zero.getJSONArray("legs");
         JSONObject zero2 = legs.getJSONObject(0);
         JSONObject dist = zero2.getJSONObject("distance");
         Distance = dist.getString("text");
        }
        else
        {
            Distance = "Too Far";
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
return Distance;

} 
```

}

这将为您提供两点之间的路径/道路的距离或长度。

**这是解析 JSON api 的 parser_Json 类**

```
 public class parser_Json {

public static JSONObject getJSONfromURL(String url){

    //initialize
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    //http post
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    //try parse the string to a JSON object
    try{
            jArray = new JSONObject(result);
    }catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
    }

    return jArray;
}

 public static InputStream retrieveStream(String url) {

        DefaultHttpClient client = new DefaultHttpClient(); 

        HttpGet getRequest = new HttpGet(url);

        try {

           HttpResponse getResponse = client.execute(getRequest);
           final int statusCode = getResponse.getStatusLine().getStatusCode();

           if (statusCode != HttpStatus.SC_OK) { 

              return null;
           }

           HttpEntity getResponseEntity = getResponse.getEntity();
           return getResponseEntity.getContent();

        } 
        catch (IOException e) {
           getRequest.abort();

        }

        return null;

     } 
```

}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T12:00:05.213

**[我在这个问题](https://stackoverflow.com/questions/7696112/gettting-different-distance-when-using-the-google-map-and-user-defined-function/7752341#7752341)**中写下了 2 个不同的答案来计算两个地理点之间的差异，所以不要在这里复制粘贴，

第二件事也看到**[了这个例子](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)**，你需要以同样的方式来实现`Locationlistener`获取`onLocationChanged`事件。

在那种情况下，使用上面给定的函数计算差异并适当地使用它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-21T10:32:19.443

这非常简单，`LocationServices`可用于确定您的位置并`TextView`在每次收到更新时使用新距离更新您的位置。

# erlang - otp gen_server 的 info、call、cast 消息队列中是否有不同的优先级？

> ID：10683555
> 
> 赞同：3
> 
> 时间：2012-05-21T10:28:08.160
> 
> 标签：erlang, message-queue, gen-server

写代码时，我会问自己应该使用`call`哪种类型的消息，应该使用哪种类型的消息`info`？

在这个问题下面，还有一个长期以来的疑问，`info, cast, call`消息之间是否存在优先级差异？这 3 种类型的消息是否共享同一个队列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:24:04.990

消息的优先级是相同的。快速查看 gen_server.erl，您会发现接收所有数据的简单循环。

```
loop(Parent, Name, State, Mod, hibernate, Debug) ->
    proc_lib:hibernate(?MODULE,wake_hib,[Parent, Name, State, Mod, Debug]);
loop(Parent, Name, State, Mod, Time, Debug) ->
    Msg = receive
          Input ->
            Input
      after Time ->
          timeout
      end,
    decode_msg(Msg, Parent, Name, State, Mod, Time, Debug, false). 
```

关于[handle_info](http://www.erlang.org/doc/man/gen_server.html#Module:handle_info-2)：

> 当发生超时或接收到任何其他消息而不是同步或异步请求（或系统消息）时，该函数由 gen_server 调用。

例如 timeout、tcp、udp、EXIT、sytem info 和许多其他不适合 handle_call 或 handle_cast 的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T11:36:33.397

你的意思是什么时候使用`call`，什么时候使用`cast`？`info`用于超时或服务器接收到其他类型的消息`call`时。`cast`

要决定是否使用`call`或`cast`我认为您应该问“发件人是否要等待此类消息的答案？”这个问题。如果是`call`，则使用同步，如果不使用`cast`，则使用异步。

但是我已经有一段时间没有使用 Erlang 了。

# git - Git repo - 在网络服务器上

> ID：10683556
> 
> 赞同：1
> 
> 时间：2012-05-21T10:28:09.967
> 
> 标签：git, apache

在一些开发人员共享的网络服务器上拥有一个网络项目，促使我为该项目设置 Git 存储库。
但是我仍然对如何组织它有一些疑问。

假设我有我的网络项目`/var/www/`

我希望收到评论的一些问题和想法：

`init`将 git 存储库放在同一个发布文件夹中，**还是**在这些项目副本中创建`/var/repo/`、复制内容和`init`repos更好？

在第一种情况下，我可以将项目分支为 a`superuser`并让人们在这个分支上工作......然后决定在测试后合并分支？但在这种情况下，我认为人们无法在网络服务器上轻松测试他们的工作......他们应该需要一个本地环境。设置为测试。

如果我创建，创建like让开发人员测试他们提交的工作`/var/repo/domain.com`会很好。`Vhosts``http://git.domain.com`

如果我有`/var/repo/project.com`并且想发布已提交的工作（例如将文件复制到`/var/www/project.com`），我应该如何执行此复制操作？与`cp -R`？是否已经有工具可以在需要时执行此更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:36:34.397

首先，您真的不应该将您的 Web 项目作为存储库本身。首先，您应该设置一个存储库供所有人访问。你可以有一个 master 和一个 development 分支，每个人也可以有自己的分支，用于 web 应用程序的特殊部分。最好的解决方案是将您的存储库与您的实时系统放在不同的服务器上。如果您不想在本地进行测试，您应该设置一个开发/登台服务器，以便人们可以在那里进行测试。最好的方法是为此使用部署脚本，例如 Capistrano。

您的程序应该是这样的： 服务器 A：具有主分支和暂存分支的存储库以及开发需要的其他分支。服务器 B：实时系统（您可以使用 capistrano 在此处部署主分支 - 如果您想成为唯一能够部署到实时系统的人，则不应向服务器添加任何 ssh 密钥，但您的服务器或使用另一个身份验证方法）服务器 C：测试环境（也可以像您的存储库一样在同一台服务器上，但我个人也更喜欢这种分离）

现在使用 capistrano 将 live 系统与 master 分支连接起来，将测试系统与 dev/staging 分支连接起来。人们当然应该对登台服务器具有 ssh 访问权限。

他们可以使用 dev/staging 分支将更改推送到存储库。之后，他们可以使用“cap staging deploy”将 dev/staging 分支部署到开发服务器以测试他们的工作。如果一切正常，您可以简单地拉出 dev 分支并签出 master。使用 'git merge staging' 将 dev/staging 分支合并到 master 并将其推送到 master 存储库。之后，“上限生产部署”将在您的实时系统上安装所有内容。

它很容易设置 - 只需为每个人做一些配置事情，你就会有一个很棒的工作流程。

希望它有所帮助。

# algorithm - 有效切割三角剖分（找到子三角剖分）

> ID：10683558
> 
> 赞同：0
> 
> 时间：2012-05-21T10:28:22.160
> 
> 标签：algorithm, visualization, computational-geometry, triangulation, terrain

我目前正在研究地形渲染工具。我必须从给定的 Delaunay 三角剖分中切出一块。假设给出以下三角剖分：

![三角测量](../Images/750a7f7316dddb65138dfec82c690c0f.png)

红色方块描绘了从原始三角剖分中切割的区域，即找到与原始三角剖分相同的点的子三角剖分加上正方形边界上的点。

有没有一种有效的算法来执行这种切割？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:49:53.990

您需要使用受[约束的 Delaunay triangulation](http://en.wikipedia.org/wiki/Constrained_Delaunay_triangulation)。

例如，[CGAL](http://www.cgal.org)库提供了C++[实现](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_2/Chapter_main.html#Section_37.8)。当你谈论地形时，你也应该看看这个[例子](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_2/Chapter_main.html#Subsection_37.5.2)。

如果您对 java 或 python 实现感兴趣，可以[在此处](http://code.google.com/p/cgal-bindings/)获得一些使用 SWIG 编写的绑定。

# oracle - SQL*Plus 禁用或跳过 ACCEPT PROMPT

> ID：10683561
> 
> 赞同：2
> 
> 时间：2012-05-21T10:28:29.780
> 
> 标签：oracle, maven, plsql, maven-plugin, sqlplus

## 问题

我们有一个由 DBA 提供的包装脚本，用于执行构成给定软件版本的许多底层 sql 脚本。

包装脚本输出一些关于将要执行的调试信息，然后询问用户是否希望继续，使用以下 sqlplus 命令

```
ACCEPT DB_OK PROMPT "Do you wish to Continue Y/[N]? : " DEFAULT N 
```

我们正在尝试使用 maven 在构建中自动创建数据库...构建挂起等待用户输入:-(

```
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>exec-maven-plugin</artifactId>
 <version>1.2.1</version>
 <executions>
  <execution>
   <phase>pre-integration-test</phase>
   <goals>
    <goal>exec</goal>
    </goals>
    <configuration>
     <executable>sqlplus</executable>
     <arguments>
      <argument>${db.user}/${db.password}@${db.service.name}</argument>
      <argument>@${project.build.directory}/test-resources/create-db.sql</argument>
      </arguments>
      <workingDirectory>${project.build.directory}/test-resources</workingDirectory>
     </configuration>                
    </execution>
   </executions>
  </plugin> 
```

## 尝试的解决方案

我试图将 ACCEPT 调用包装在 plsql IF/ELSE 块中，但这会导致有关“ACCEPT”的错误和不正确的语法，我想这是因为我正在混合使用 plsql 和 sqlplus 命令。

## 问题

那么，有谁知道如何在 sqlplus 中禁用 ACCEPT 提示，类似于传统替换变量的 SET DEFINE OFF？

我可以对包装脚本进行一些小修改，但如果我要进行批量重构，DBA 可能会抱怨。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T13:29:12.220

SQL*Plus 使用位置表示法来传递参数。所以这将`42`作为预期的第一个（也是唯一的）参数传递`some_script.sql`

```
$ sqlplus scott/tiger@orcl @@$HOME/scripts/some_script.sql 42 
```

这将使任何 ACCEPT 调用短路。

所以，如果我正确理解了你的 Maven 插件是如何工作的，我认为你可以实现同样的事情：

```
 <executable>sqlplus</executable>
     <arguments>
          <argument>${db.user}/${db.password}@${db.service.name</argument>              
          <argument>@${project.build.directory}/test-resources/create-db.sql</argument>
          <argument>Y</argument>
    </arguments> 
```

也就是说，`Y`作为 sqlplus 命令字符串中的下一个参数传递（假设`DB_OK`是第一个预期参数 - 你会比我更了解你的脚本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:18:41.300

您可以使用[PRODUCT_USER_PROFILE](http://docs.oracle.com/cd/B13789_01/server.101/b12170/ch10.htm)`ACCEPT`为正在运行脚本的用户禁用命令

# php - 用 php 发布最近的股票和活动，但不在墙上

> ID：10683563
> 
> 赞同：0
> 
> 时间：2012-05-21T10:28:34.970
> 
> 标签：php, facebook, post, action, facebook-timeline

我的问题很简单。如何使用 PHP 在最近的股票和活动上发布但不在墙上（时间线）上。（发布动作）。我已经用 javascript 完成了，但我想要它在 php 中

我已经测试过了：

```
$params = array(
            'message'       =>  "This post is a test",
            'name'          =>  "Titre de mon test",
            'caption'       =>  "My Caption",
            'description'   =>  "Some Description...",
            'link'          =>  "http://stackoverflow.com",
            'actions' => array('name'=>'Recipe','link'=>'url'),
            'picture'       =>  "http://i.imgur.com/VUBz8.png",
        );

        $post = $facebook->api("/$user/feed","POST",$params); 
```

谢谢。

我发现编辑：

我发现

```
<meta property="og:title" content="My article" />
<meta property="og:type" content="namespace:recipe" />
<meta property="og:url" content="http://url/" />
<meta property="og:image" content="" />
<meta property="fb:app_id" content="apikey" />
<meta property="og:description" content="My wonderful article" /> 
```

和php

```
try {
        $action = array('name' => 'recipe', 'link' => 'http://url/');
        $actions = json_encode($action);
        $params = array('recipe'=>'http://url/','access_token'=>$facebook->getAccessToken(), 'actions'=> urlencode($actions));
        $out = $facebook->api('/me/namespace:cook','post',$params);
        echo "Your post was successfully posted to UID: $user";

    }
    catch (FacebookApiException $e) {
       $result = $e->getResult();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:32:57.663

为了发布活动，您需要创建一个动作和对象。您需要按照[http://developers.facebook.com/docs/opengraph/keyconcepts/](http://developers.facebook.com/docs/opengraph/keyconcepts/)上的说明进行操作。

您在问题中指定的 PHP 和 JavaScript 代码对于将操作发布到用户的个人资料是正确的，前提是您已请求`publish_actions`用户的许可。该操作还需要得到 Facebook 的批准，然后用户才能使用它。

```
$params = array( 'recipe'=>'http://url/' );
$out = $facebook->api( '/me/namespace:cook','post', $params );
if ( $out )
    echo "Activity posted";
else
    echo "Post was unsuccessful"; 
```

# .net - 如何将 ListViewItem 绑定到 Grid？

> ID：10683564
> 
> 赞同：0
> 
> 时间：2012-05-21T10:28:34.970
> 
> 标签：.net, wpf, xaml, datatemplate

如何在 Listview 数据模板中将网格绑定到 ListViewItem 的内容，如下所示：

```
<ListView ItemsSource="{Binding AListInMyViewModel}">
    <ListView.View>
      <GridView >
        <GridViewColumn Header="VariableDetails" Width="10">
          <GridViewColumn.CellTemplate>
            <DataTemplate >
               <ContentPresenter Content="{Binding DetailPanel,UpdateSourceTrigger=PropertyChanged}" DataContext="{Binding}" />
               </DataTemplate>
            </GridViewColumn.CellTemplate>
         </GridViewColumn>
      </GridView>
   </ListView.View>
</ListView> 
```

在我的 ViewModel 我有 AListInMyViewModel 它的每个项目都有这样的属性：

```
Panel DetailPanel{
  get
    {
       Grid MyGrid=new Grid();

       ...
       return MyGrid;
    } 
```

现在我想在 MyListView 的单元格中显示指定的网格（DetailPanel）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T13:00:22.633

尝试指定您的`Panel`is `public`。另外，你是如何宣布你的名单的？我不确定您在 XAML 中设置 DataContext 的方式——我以前从未这样做过。只是为了消除潜在问题，请尝试在代码隐藏中将 DataContext 设置为您的视图模型。此外，请记住在启动应用程序后查看输出窗口，以查看数据绑定可能出现的问题，并将这些消息添加到您的问题中。

# jquery - ajax zend 参数

> ID：10683566
> 
> 赞同：1
> 
> 时间：2012-05-21T10:28:44.713
> 
> 标签：jquery, ajax, zend-framework

我正在处理从 ajax 调用接收动作中的参数。

一旦在视图中，我得到一些值（地理位置）然后我进行 ajax 调用（$.get()），比如

```
controller/action/lat/xxx/long/xxx 
```

查询数据库。

在我调用的动作中，我尝试通过

```
$lat = $this->_request->getParam("lat");
$long = $this->_request->getParam("long"); 
```

但，

我正在获取我所在的网址的参数（浏览器网址，而不是 ajax 网址）

有什么光吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:43:52.957

如果您不想通过 url 发送参数，请使用[$.post()](http://api.jquery.com/jQuery.post/)而不是。`$.get()`

```
public function indexAction()
{
  $ret = array();
  $lat = $this->_getParam('lat');
  $long = $this->_getParam('long');
   //save it in your database
   $ret['msg'] = 'Record saved';
  $this->_helper->json($ret); 

} 
```

# jquery - jQuery 不会在新创建的元素上自动触发

> ID：10683568
> 
> 赞同：-1
> 
> 时间：2012-05-21T10:28:57.550
> 
> 标签：jquery, html

我有一个带有按钮的页面，当用户单击该按钮时，将出现新的“选择标签”

那个新`select`的有“选择器”类，并且在那个调用上有一个 jQuery 调用，但不会触发

# html代码

```
<ul id="ul">
    <li>
        <select class='selector'></select>
        <input type='button' value='new select' id='newSelect'/>
    </li>
</ul>​ 
```

# jQuery代码

```
$(document).ready(function (){
    var options = "<option>Select Name</option>";
    options +="<option>Roma</option>";
    options +="<option>Milano</option>";
    $('#ul .selector').html(options);
});
$(document).ready(function(){
    $('#ul').on('click','#newSelect',function(){
        $('#ul').append("<li><select class='.selector'></select></li>");
    });
}); 
```

​<a href="http://jsfiddle.net/Wiliam_Kinaan/puUcp/12/" rel="nofollow">请查看这里的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:32:56.443

您应该删除此行中的点：

```
$('#ul').append("<li><select class='.selector'></select></li>"); 
```

到

```
$('#ul').append("<li><select class='selector'></select></li>"); 
```

如果您想像第一次那样填充选择列表，可以这样做：http:
[//jsfiddle.net/puUcp/19/](http://jsfiddle.net/puUcp/19/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:36:23.107

看起来您只需要在每次想要添加新元素时克隆第一个选择元素（已经）。这看起来像

```
$(document).ready(function(){
    $('#ul').on('click','#newSelect',function(){
        $('#ul').append($("#ul > li:first-child").clone());
    });
}); 
```

**[看到它在行动](http://jsfiddle.net/DvD6k/)**。

但是，您不应该*完全*按照上述操作，因为`$("#ul > li:first-child")`包括具有`id`-- 和`id`s 的按钮在 DOM 中应该是唯一的。从按钮中删除`id`会使事情正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:36:18.763

实际上，填充选择器只会在文档加载时触发，并且应该从新的选择类中删除点，并且应该在单击时填充选择器。所以新的代码应该是：

```
$(document).ready(function (){
    var options = "<option>Select Name</option>";
    options +="<option>Roma</option>";
    options +="<option>Milano</option>";
    $('#ul .selector').html(options);

    $('#ul').on('click','#newSelect',function(){
        $('#ul').append("<li><select class='selector'></select></li>");
        $('#ul .selector').html(options);
    });
}); 
```

# c# - 将 Datagridview 值更新到数据库中

> ID：10683570
> 
> 赞同：4
> 
> 时间：2012-05-21T10:29:03.260
> 
> 标签：c#

我正在开发一个表单应用程序，用户可以在其中将表数据从数据库获取到可编辑的 gridviewcontrol 中，以便用户可以更新网格中的一些数据，并且当用户单击表单上的更新按钮时，更新的数据网格值应该在数据库中更新。用户可以一次更新更多列值。我第一次使用数据网格，我设法从数据库中获取数据并显示在数据网格中，但我无法将编辑后的数据更新回顶部数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T10:48:48.070

检查下面的链接。

[http://www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data](http://www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data)

[C# 问题：如何将在 DataGridView 中所做的更改保存回使用的 DataTable？](https://stackoverflow.com/questions/520051/c-sharp-issue-how-do-i-save-changes-made-in-a-datagridview-back-to-the-datatabl)

[WinForms DataGridView - 更新数据库](https://stackoverflow.com/questions/2623548/winforms-datagridview-update-database)

[C# WinForms - 如何将更新从 DataGridView 发送到数据库](https://stackoverflow.com/questions/4051390/c-sharp-winforms-how-to-send-updates-from-datagridview-to-database)

[在 dataGridView 中保存更改](https://stackoverflow.com/questions/3796908/visual-studio-2010-c-sharp-datagridview-save-changes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:50:12.480

如果您使用 DataTable 作为 DataGrid 的源，这不应该那么难，您可以使用 datatable.getchanges() 获取 DataTable 中的更改 // 在 getchanges() 中搜索示例

然后使用行的唯一键（我假设您有一个）更新已更改的每一行。

如果您需要知道如何更新回数据库，那么您应该检查 msdn 以了解您必须使用的确切方法，当然这取决于您用来将数据加载到网格的方法。

# wpf - WPF 路由命令启用适用于菜单，但不适用于按钮

> ID：10683574
> 
> 赞同：2
> 
> 时间：2012-05-21T10:29:25.107
> 
> 标签：wpf, command

在下面的示例中，当文本获得焦点而不是按钮时，菜单被启用。我只用按钮和文本框试过了，但行为是一样的。

```
<Window x:Class="WpfPopup.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<DockPanel>
    <Menu DockPanel.Dock="Top">
        <MenuItem  Command="ApplicationCommands.Paste" />
    </Menu>
    <TextBox BorderBrush="Black" BorderThickness="2" Margin="25" TextWrapping="Wrap" x:Name="text1" Height="58" Width="203" >
        The MenuItem will not be enabled until
        this TextBox gets keyboard focus
    </TextBox>        
    <Button Content="Button" Height="23" Name="button1" Width="93" Command="ApplicationCommands.Paste" />
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:42:26.917

有两种简单的方法可以解决这个问题：

1）使用 FocusManager.IsFocusScope：

```
 <Button Content="Button" Height="23" Name="button1" Width="93" Command="ApplicationCommands.Paste" FocusManager.IsFocusScope="True"/> 
```

2）手动设置按钮上的CommandTarget：

```
<Button Content="Button" Height="23" Name="button1" Width="93" Command="ApplicationCommands.Paste" CommandTarget="{Binding ElementName=text1}" /> 
```

您可能想知道为什么这适用于菜单项？如果您阅读[FocusManager.IsFocusScope](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.isfocusscope.aspx)附加属性的文档，您将得到答案：

> 默认情况下，Window 类是焦点范围，Menu、ContextMenu 和 ToolBar 类也是如此。作为焦点范围的元素将 IsFocusScope 设置为 true。

当你不知道的时候非常混乱！

# c# - 找不到路径“/”的控制器或未实现 IController

> ID：10683577
> 
> 赞同：1
> 
> 时间：2012-05-21T10:29:36.833
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, orchardcms

我的解决方案在 Orchard CMS 1.4.1 中，当我运行解决方案时出现错误

`The controller for path '/' was not found or does not implement IController.` 如果我重新单击运行按钮，那么我会收到此消息

`Not found` `The page you are looking for does not exist.`

问：为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:42:14.580

我知道这是一个旧线程，但这可能会帮助未来的谷歌人（比如我自己）：

我有一个非常简单的配方，可以启用一些模块和主题。其中一个模块提供了一个“主页路由”，它基本上覆盖了“/”路径以转到模块内的控制器。但是-一旦我删除了这条路线，我就开始遇到与 OP 相同的错误。

原来，问题是由于我没有检查主页属性的内容页面（由于简单的配方，我实际上根本没有任何内容页面）。

解决方案是转到 /admin （它仍然有效，因为管理控制器处理此路由）并创建一个新页面，并勾选主页复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:17:51.727

我的回答并非特定于[orchardcms](/questions/tagged/orchardcms "显示标记为“orchardcms”的问题")，但可能会有所帮助：

我得到了这个完全相同的错误，因为我在`@Html.Action("Action", "NewController")`没有实际创建的情况下将调用添加到视图中`NewController`！

也许您缺少控制器？

# java - 您能否建议围绕 GSM AT 命令的 JAVA API 包装器？

> ID：10683579
> 
> 赞同：3
> 
> 时间：2012-05-21T10:29:50.543
> 
> 标签：java, api, gsm, at-command

想围绕一个可以通过 AT 命令控制的 gsm 语音调制解调器编写一个自动应答（GSM 呼叫）程序。

您能否建议一个围绕 GSM AT 命令的不错的 Java API 包装器。

以前从未在此类应用程序上工作过，因此如果您发现此方法有任何问题，请告诉我。

-ak

PS> Modem 不支持 TAPI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:31:02.593

我不确定您是否有特定的调制解调器或正在考虑通用实用程序。如果后者记住不同的调制解调器和电话将支持不同的 AT 命令。看：

[关于 AT 命令支持的问题](https://stackoverflow.com/questions/7015357/cellular-at-command-sets-how-universal-are-they/7094395#7094395)

无论哪种方式，都有一些有用的链接（谷歌“Hayes command api”或您之前可能尝试过的任何将“AT”替换为“Hayes”的链接，您还会发现其他链接）：

[http://en.wikibooks.org/wiki/Serial_Programming/Serial_Java](http://en.wikibooks.org/wiki/Serial_Programming/Serial_Java)

[http://jcs.mobile-utopia.com/jcs/13774_AtParser.java](http://jcs.mobile-utopia.com/jcs/13774_AtParser.java)

[http://embeddedfreak.wordpress.com/2008/11/03/simple-hayes-at-command-parser/](http://embeddedfreak.wordpress.com/2008/11/03/simple-hayes-at-command-parser/)

如果您的应用程序非常简单，这些可能会有点过大——AT 命令实际上只是通过串行端口发送和接收的文本字符，因此您可以使用非常简单的代码，但这些链接可能会给您足够的想法来决定。

# design-patterns - 方法参数的设计模式

> ID：10683581
> 
> 赞同：0
> 
> 时间：2012-05-21T10:29:53.370
> 
> 标签：design-patterns

我有一个特定的要求，例如：

```
serviceUtility.invokeService(requestObj) 
```

上述方法采用`requestObj`，它并不总是同一个对象。它可以包含任何对象，具体取决于功能。但是，`invokeService`一般的方法必须基于对象来处理请求。我想自动化，以便它动态识别对象并对其采取行动。这意味着`serviceUtility`类中的实现适用于任何类型的对象。因为每个人的逻辑都是一样的。现在我正在检查对象类型并执行逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:39:30.860

根据您的编程语言，您可以使用反射动态地执行此操作（例如在 Java/C# 中）；但它会很混乱，很难让它完美地工作。

如果可能，您应该重新组织您的代码并创建一个公共接口，所有相关类都实现该接口。然后你*确定*他们有正确的方法并且可以调用它们而不必发现它们的确切类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:22:18.753

> 因为每个人的逻辑都是一样的

在这种情况下，您需要使用[通用编程](http://en.wikipedia.org/wiki/Generic_programming)。例如，在 Java 中：

```
public <T extends Request> void invokeService(T object) {
  object.run();
} 
```

后来，在客户端：

```
utility.invokeService(new FooRequest());
utility.invokeService(new BarRequest()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:42:23.917

您正在寻找名为“工厂方法”的创建设计模式。

[http://www.oodesign.com/factory-method-pattern.html](http://www.oodesign.com/factory-method-pattern.html)

# sql - 需要 SQL 删除与其他表字段匹配但仅在给定日期之前的数据

> ID：10683583
> 
> 赞同：0
> 
> 时间：2012-05-21T10:30:08.460
> 
> 标签：sql, ms-access-2007

我有一个访问数据库，该数据库当前正在删除在单独的表 CPExcl（在 CP 列内）中找到字段 CP 的所有行。但是，我想更改它，以便它仅在它与 CPExcl 表匹配并且在 2012 年 9 月 5 日之前的情况下删除它。我编写了以下代码，但没有任何结果：

```
[CP] not in (select distinct [CP] from CPExcl) 
AND ([CP] in (select distinct [CP] from CPExcl) 
AND LUD >9/5/2012); 
```

任何帮助将不胜感激！

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:53:36.967

“但是，我想更改它，因此它仅在它与 CPExcl 表匹配且在 2012 年 9 月 5 日之前的情况**下****删除**它”

 **在你删除之前，先尝试选择它：

```
([CP] not in (select distinct [CP] from CPExcl) 
AND LUD < #9/5/2012#) -- before 9/5/2012\. so change it to less than
OR ([CP] in (select distinct [CP] from CPExcl) 
```

IIRC，访问的日期类型使用井号（#）。所以把这个 9/5/2012 改成 #9/5/2012#；否则将变为整数

并且没有必要使用 DISTINCT。IN/NOT IN 自动对相关查询应用 distinct。

```
([CP] not in (select [CP] from CPExcl) 
AND LUD < #9/5/2012#) -- before 9/5/2012\. so change it to less than
OR ([CP] in (select [CP] from CPExcl) 
```

**编辑**

“'我想要所有 CP 不在 CPExcl 的 CP 列中的东西'，但是我也想要那些 'CP 在 CPExcl 的 CP 列中并且 LUD 是 2012 年 5 月 9 日的那些”

```
[CP] not in (select [CP] from CPExcl) 
OR
(
    [CP] in (select [CP] from CPExcl) 
    AND LUD < #9/5/2012# -- before 9/5/2012\. so change it to less than
) 
```

你可以把它短路到这个：

```
[CP] not in (select [CP] from CPExcl) 
OR
LUD < #9/5/2012# -- before 9/5/2012\. so change it to less than 
```

作为预防措施，在删除之前选择，检查逻辑是否适合问题。快乐编码！ツ</p>**

# groovy - log4j 没有在 ubuntu 上用 groovy 打印任何东西

> ID：10683584
> 
> 赞同：1
> 
> 时间：2012-05-21T10:30:15.597
> 
> 标签：groovy, log4j

我正在尝试让 Hello World 应用程序与 groovy/log4j/ubuntu 一起工作（与 Groovy 1.7.10 一起工作）。默认情况下，我没有输出到控制台：

*   创建 ~/.groovy/lib，并将最新的 log4j jar 下载到那里。
*   创建了一个.groovy：

猫 a.groovy：

```
#! /usr/bin/groovy
import org.apache.log4j.Logger
def log = Logger.getLogger(getClass())

println "Log starting"
log.info("This is Info")
log.error("This is error")
println "Log finished" 
```

授予它权限并运行它，并得到：

```
Log starting
Log finished 
```

默认配置不应该创建一个控制台附加程序并输出到控制台吗？

根据[这个答案](https://stackoverflow.com/a/1228151/11236)，我尝试添加对 的调用`org.apache.log4j.BasicConfigurator.configure();`，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:34:00.390

您需要设置级别，以便它显示`INFO`消息...

尝试这个：

```
#! /usr/bin/groovy

// Grab Log4j
@Grab( 'log4j:log4j:1.2.16' )
import org.apache.log4j.Level
import org.apache.log4j.Logger

def log = Logger.getLogger( getClass() )

Logger.rootLogger.level = Level.INFO

println "Log starting"
log.info "This is Info"
log.error "This is error"
println "Log finished" 
```

我发现这里有[一篇博客文章](http://robertmaldon.blogspot.co.uk/2007/09/programmatically-configuring-log4j-and.html)显示了以编程方式设置 Log4j

或者，正如[sreejith 所说](https://stackoverflow.com/a/10683682/6509)，将 log4j 属性文件添加到您的类路径（或加载它）

要更改默认的根附加程序，您可以执行以下操作：

```
@Grab( 'log4j:log4j:1.2.16' )
import org.apache.log4j.Level
import org.apache.log4j.ConsoleAppender
import org.apache.log4j.PatternLayout
import org.apache.log4j.Logger
def log = Logger.getLogger(getClass())

Logger.rootLogger.with {
  level = Level.INFO
  removeAllAppenders()
  addAppender( new ConsoleAppender( new PatternLayout( '%d %-5p [%t]: %m%n' ) ) )
}

println "Log starting"
log.info "This is Info"
log.error "This is error"
println "Log finished" 
```

打印：

```
2012-05-21 11:48:48,225 INFO  [Thread-29]: This is Info 
```

[可以在这里找到](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)不同的模式符号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:36:37.943

尝试创建一个包含以下内容的文件

log4j.rootCategory=INFO，标准输出

log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %40.40c:% 4L - %m%n

并将其添加到项目的类路径中。

# google-maps - 如何在谷歌地图 v3 上旋转自定义标记图像

> ID：10683585
> 
> 赞同：0
> 
> 时间：2012-05-21T10:30:24.467
> 
> 标签：google-maps, rotation, google-maps-markers

在谷歌搜索如何在谷歌地图 v3 上旋转自定义标记图像 4-5 小时后，我在这里发布了这个问题。请通过示例提出任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T08:20:21.437

Code by`user1884506`非常有用，但它会旋转默认图标。

您无法旋转自定义图像。参考 [https://developers.google.com/maps/documentation/javascript/3.exp/reference#Symbol](https://developers.google.com/maps/documentation/javascript/3.exp/reference#Symbol)

**符号的路径，即内置符号路径，或使用 SVG 路径表示法表示的自定义路径。必需的。**

为此，您需要使用 SVG（可缩放矢量图形）创建图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:22:53.260

**请参考以下代码**

```
<script type="text/javascript" >
function kh(i, j, k) {
    var a;
    var b;
    if (j != null && k != null) {
        a = j;
        b = k;
    }
    else {
        a = 12.9540112248064; b = 77.6991748809814;
    }
    if (i != null) {
        var angleDegrees = i;
    }
    else {
        angleDegrees = 0;
    }
    var angle = 45;

    var myLatlng = new google.maps.LatLng(a, b);
    var mapOptions = {
        zoom: 16,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var arrowIcon = new Image();
    arrowIcon.src = "../Image/CarNew.png";
    var image = '../Image/add.jpg';
    var myLatLng = new google.maps.LatLng(a, b);
    var beachMarker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        icon: {
        path: google.maps.SymbolPath.FORWARD_OPEN_ARROW,
scale: 2,
rotation: angleDegrees           }    

     });document.getElementById("HiddenField1").value=a;

document.getElementById("HiddenField2").value = b;
} 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-01-15T06:20:49.050

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.IO;

public partial class NewFolder1_Rotatev3 : System.Web.UI.Page
{
string line;
System.IO.StreamReader file = null;
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        file = new System.IO.StreamReader("D:\\GoogleMapsDemo\\Files\\closepoints.txt");
        ScriptManager.RegisterStartupScript(Page, typeof(Page), "_ShowHideBusiJust_", "i();", true);
        Session["file"] = file;
    }
}
protected void Timer1_Tick(object sender, EventArgs e)
{
    file = (System.IO.StreamReader)Session["file"];
    string[] strdata = null;
    line = file.ReadLine();
    if (line != null)
    {
        strdata = line.Split('\t');
        string j = strdata[0];
        string k = strdata[1];
        Session["Lat"] = j;
        Session["Long"] = k;
        int R = 6371; // km
        double lat1 =HiddenField1.Value != null ? Convert.ToDouble(HiddenField1.Value) : 0;
        double lat2 = Convert.ToDouble(j);
        double lon1 = HiddenField2.Value != null ? Convert.ToDouble(HiddenField2.Value) : 0;
        double lon2 =Convert.ToDouble(k);
        if (!(lat2 == 0 && lon2 == 0))
            {

            var dLat = DegreeToRadian((lat2 - lat1));
            var dLon = DegreeToRadian((lon2 - lon1));
            lat1 = DegreeToRadian(lat1);
            lat2 = DegreeToRadian(lat2);
            var a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2) +
            Math.Sin(dLon / 2) * Math.Sin(dLon / 2) * Math.Cos(lat1) * Math.Cos(lat2);
            var c = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));
            var d = R * c;
            var y = Math.Sin(dLon) * Math.Cos(lat2);
            var x = Math.Cos(lat1) * Math.Sin(lat2) -
                    Math.Sin(lat1) * Math.Cos(lat2) * Math.Cos(dLon);
            var brng = (Math.Atan2(y, x));
            var last = RadianToDegree(brng);
            Label2.Text = Convert.ToString(d);
            string i = Convert.ToString(last);
            Session["Angle"] = i;
            string script = string.Format("i({0},{1},{2});",
                              i.ToString(), j.ToString(), k.ToString());
        ClientScript.RegisterStartupScript(this.GetType(), "RefreshOpener", script, true);
        //System.Threading.Thread.Sleep(1000);
        //strdata[0]   - Latitude
        //strdata[1]   - Langitude
            }

    }
    else
    {
        string i = Convert.ToString(Session["Angle"]);
        string j = Convert.ToString(Session["Lat"]);
        string k = Convert.ToString(Session["Long"]);
        string script = string.Format("i({0},{1},{2});",
                              i.ToString(), j.ToString(), k.ToString());
        ClientScript.RegisterStartupScript(this.GetType(), "RefreshOpener", script, true);
        Timer1.Enabled = false;

    }
    Session["file"] = file;
}
 private double DegreeToRadian(double angle)
{
    return Math.PI * angle / 180.0;
}
private double RadianToDegree(double angle)
{
    return angle * (180.0 / Math.PI);
}

} 
```

# python - 多处理队列不释放内存

> ID：10683586
> 
> 赞同：3
> 
> 时间：2012-05-21T10:30:24.647
> 
> 标签：python, queue, multiprocessing

当 queue.put() 的速度快于 queue.get() 的速度时，我发现 P1 进程将使用大内存（因为 P1 不断地从大文本文件中放置行）。甚至 P2 随后也完成了从队列中取线。P1 使用的内存仍未释放。如何解决这个问题？下面是示例和测试代码。

谢谢！

```
import time
from multiprocessing import Process, Queue

def addline(q):
   f = file('a big text file','r')
   line = True
   while line:
      line = f.readline()
      q.put(line, False)
   f.close()
   print "P1:finished"
   while 1:
      time.sleep(2)

def getline(q):
   f = file('/tmp/bak','w') 
   line = True
   while line:
      line=q.get()
      f.write(line)
      time.sleep(0.01)
   f.close()
   print "p2:finished"

if __name__ == "__main__":
   q = Queue()
   p1 = Process(name="addline", target=addline, args=(q,))
   p2 = Process(name="getline", target=getline, args=(q,))
   p1.start()
   p2.start() 
```

**编辑：** 我尝试读取一个文本文件（44MB）并观察/proc/pid/smaps。我发现尚未释放的内存在堆中变成了Private_Dirty。

```
00fb3000-04643000 rw-p 00000000 00:00 0                                  [heap]
Size:              55872 kB
Rss:               55844 kB
Pss:               55163 kB
Shared_Clean:          0 kB
Shared_Dirty:       1024 kB
Private_Clean:         0 kB
Private_Dirty:     54820 kB
Referenced:        54972 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:47:38.290

一旦对象不再被引用，Python 的垃圾收集器就会立即删除它。只要写入速率可以跟上存储硬件的读取速率，就必须可以在不增加内存且内存占用量小的情况下，从两个独立的线程/进程同时读取文件内容并同时写入文件内容。我相信当您使用更适合您的用例的 Python 语言结构时，您的问题就会消失。我会尝试对此发表评论。

要逐行读取文件，您应该使用以下概念：

```
with open('filepath') as f:
    for line in f:
        do_something_with(line) 
```

您不必显式地显示`.close()`该文件。这同样适用于写入文件。在此处阅读该`with`声明：http: [//effbot.org/zone/python-with-statement.htm](http://effbot.org/zone/python-with-statement.htm)

从我的角度来看，对于您提出的用例，由于“类流”应用程序，a`multiprocessing.Pipe`而不是 a`multiprocessing.Queue`会更合适。将原始文件内容表示为队列中的项目似乎很奇怪。`os.pipe`此外，如果您使用线程而不是独立的子进程（那么您应该使用线程间通信）** ，您可以摆脱大量的通信开销。在任何情况下，您都应该`join()`在启动它们之后创建线程和子进程。

** 对于您的用例（复制文件），全局解释器锁 (GIL) 不会成为性能问题。

# c# - 如何更新中间没有公共字段且有两个条件的单个表？

> ID：10683589
> 
> 赞同：0
> 
> 时间：2012-05-21T10:30:41.113
> 
> 标签：c#, asp.net, mysql, database, web-services

我正在用 c# 和 MYSQL 在 asp.net 中制作 web 服务。

我想根据两个条件更新一个表。但是它们之间没有任何共同的领域。

可能吗 ？

```
 **EDITED** - 
```

我已将代码用作-

```
 using (MySqlConnection con1 = new MySqlConnection(conString))
             {

                string update = "UPDATE tbl_UserInfo U SET Chips= @param1 where UserName = @param2 AND QuestionID = @param3";

                using (MySqlCommand cmd1 = new MySqlCommand(update, con1))
                {
                    cmd1.Parameters.AddWithValue("@param1", getChips(answerby));
                    cmd1.Parameters.AddWithValue("@param2", answerby);
                    cmd1.Parameters.AddWithValue("@param3", queid);
                    con1.Open();
                    success = cmd1.ExecuteNonQuery();
                    con1.Close();

                    if (success > 0)
                    {
                       return success;
                    }
                     else
                         return 0;

                }

            } 
```

但它给出了一个错误

```
 Unknown column QuestionID in where clause 
```

可能是什么问题？

等待解决...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:37:30.617

您必须使用 SqlCommand 类并提供参数，并将输入传递给其中之一：

```
 using(SqlConnection conn = new SqlConnection("connString"))
    {
        string incrementChips = "UPDATE tbl_UserInfo U SET Chips= @param1 where UserName = @param2 AND QuestionID = @param3";
        // no need to use U.Chips or U.UserName, since you do not update in 2 or more table (where can be same fields)
        using(SqlCommand cmd = new SqlCommand(incrementChips, conn))
        {
           //input parameter:
           cmd.Parameters.Add("@param1", SqlDbType.VarChar, 50).Value = "your input string";
           //and condition parameters:
           cmd.Parameters.Add("@param2", SqlDbType.VarChar, 50).Value = "answerby";
           cmd.Parameters.Add("@param3", SqlDbType.VarChar, 50).Value = "queid";
           try
           {
               conn.Open();
               cmd.ExecuteNonQuery();
           }
           catch(Exception ex)
           {
               //show exception to user (if it happens)
           }
       }
   } 
```

# actionscript-3 - 无法接收网络组事件

> ID：10683595
> 
> 赞同：2
> 
> 时间：2012-05-21T10:30:58.813
> 
> 标签：actionscript-3, flash-media-server

我正在使用 FMS (rtmfp) 连接到网络组。我可以连接到网络组（接收 NetStatusEvent "NetGroup.Connect.Success"），但仅此而已。我无法发布任何内容或看到有人加入了网络组，没有触发 NetStatusEvent。我错过了什么吗？

这是代码：

```
public function connect(url:String):void {                  
    _nc = new NetConnection();
    _nc.client = this;
    _nc.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);

    _nc.connect(url);   
}

private function netStatusHandler(event:NetStatusEvent):void {
    switch (event.info.code){
        case "NetConnection.Connect.Success":               
            createGroup();
            break;              
        case "NetGroup.Connect.Success":                    
            //post msg to the group
            var message:Object = new Object;                    
            message.text = "Hello";                 
            message.sender = _nc.nearID;                    
            _netGroup.post(message);
            break;
        default:                    
            trace("event.info.code: " + event.info.code);           
            break;
    }               
}

private function createGroup():void {
    _groupSpecifier = new GroupSpecifier("test_group"); 
    _groupSpecifier.postingEnabled = true; 
    _groupSpecifier.multicastEnabled = true;            
    _groupSpecifier.serverChannelEnabled = true; 

    _netGroup = new NetGroup(_nc, _groupSpecifier.groupspecWithAuthorizations()); 
    _netGroup.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:40:45.113

您选择发布消息的位置可能存在问题。发布来自 Connect.sucess ，因此邻居未连接到对等方。只有在邻居连接后，该消息才会发布给其他对等方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:39:24.823

您需要在 switch 块中检查“NetGroup.Posting.Notify”，并使用 NetGroup 类的 post 方法！

```
private function netStatusHandler(event:NetStatusEvent):void {
switch (event.info.code){
    case "NetConnection.Connect.Success":               
        createGroup();
        break;              
    case "NetGroup.Connect.Success":                    
        break;
    case "NetGroup.Posting.Notify" :
        receiveMessage(event.info.message);
        break;

    default:                    
        trace("event.info.code: " + event.info.code);           
        break;
} 
```

}

然后在receiveMessage函数中：

```
private function receiveMessage(message:Object):void
    {   
        trace(message.text)
    } 
```

最后是发送功能：

```
private function sendMessage(txt:String):void
    {
        var message:Object = new Object();
        message.text = txt;

        netGroup.post(message);
    } 
```

现在您可以在按下发送按钮时调用 sendMessage("text")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T06:37:30.190

为了完成您所询问的任务，您应该在听到“NetGroup.Neighbor.Connect”时触发 post()。如果您在连接到组时立即触发 post()，那么您可能会在连接到邻居之前触发它。将您连接到群组和群组邻居不会同时发生。P2P 连接依赖于对邻居可用的确认，以便消息可以在整个组中传播。

要接收 post() 消息，您需要监听“NetGroup.Posting.Notify”。您创建的消息是一个简单地称为*消息*的对象，其中附加了两条信息。此时，您可以获取*消息*并将其打印到文本字段。

我根据您编写的内容发布了一些示例代码（不会开箱即用）。您可以看到我们正在等待，直到我们可以确认与组内的邻居的连接，然后才发出 post()。

```
private function netStatusHandler(event:NetStatusEvent):void {
    switch (event.info.code){
        case "NetConnection.Connect.Success":               
            createGroup();
            break;              
        case "NetGroup.Connect.Success":                    
            connected = true;
               break;

        case "NetGroup.Neighbor.Connect":
            //post msg to the group
               var message:Object = new Object;                    
               message.text = "Hello";                 
               message.sender = _nc.nearID;                    
               _netGroup.post(message);

        case "NetGroup.Posting.Notify":
            writeText(message.sender + ": " message.text);
        default:                    
               trace("event.info.code: " + event.info.code);           
               break;
    }               
} 
```

这些课程可以为您做很多事情，所以请继续学习。您不仅限于短信，而且您可以从字面上传递任何对象。可以处理流数据，但有特定的类。

我引用的链接将进一步帮助您：

[组说明符](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/GroupSpecifier.html)

[网络状态事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/NetStatusEvent.html)

# python - 有效计算适应边界的邻域平均值

> ID：10683596
> 
> 赞同：6
> 
> 时间：2012-05-21T10:31:11.300
> 
> 标签：python, performance, image-processing, filter, boundary

我有一个值从 0 到 1 的图像。我喜欢做的是简单的平均。
但是，更具体地说，对于图像边界处的单元格，我想计算位于图像范围内的邻域/内核部分的像素平均值。事实上，这归结为适应“平均公式”的分母，即总和除以的像素数。

我设法做到这一点，如下所示`scipy.ndimage.generic_filter`，但这远非省时。

```
def fnc(buffer, count):
    n = float(sum(buffer < 2.0))
    sum = sum(buffer) - ((count - b) * 2.0)
    return (sum / n)

avg = scipy.ndimage.generic_filter(image, fnc, footprint = kernel, \
                                   mode = 'constant', cval = 2.0,   \
                                   extra_keywords = {'count': countkernel}) 
```

**细节**

*   `kernel`= 方阵（圆圈由一表示）
*   用 2 填充而不是用零填充，从那时起我无法正确分离填充区域的零和实际栅格的零
*   `countkernel`= 中的个数`kernel`
*   `n``image`=通过排除由值 2 标识的填充区域的单元格，位于其中的单元格数
*   `sum`通过从原始邻域总和中减去（填充单元数 * 2.0）来纠正

**更新）**

1) 使用 NaN 填充使计算量增加约 30%：

```
 def fnc(buffer):
        return (numpy.nansum(buffer) / numpy.sum([~numpy.isnan(buffer)]))

    avg = scipy.ndimage.generic_filter(image, fnc, footprint = kernel, \
                                       mode = 'constant', cval = float(numpy.nan) 
```

*2）应用Yves Daoust*提出的解决方案（已接受的答案），无疑将处理时间减少到最低限度：

```
 def fnc(buffer):
        return numpy.sum(buffer)

    sumbigimage = scipy.ndimage.generic_filter(image, fnc, \
                                               footprint = kernel, \
                                               mode = 'constant', \
                                               cval = 0.0)
    summask     = scipy.ndimage.generic_filter(mask, fnc, \
                                               footprint = kernel, \
                                               mode = 'constant', \
                                               cval = 0.0)
    avg = sumbigimage / summask 
```

3) 基于*Yves 的*提示使用附加的二值图像，实际上是在应用掩码，我偶然发现了[掩码数组](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)的原理。因此，只需处理一个数组，因为掩码数组将图像和掩码数组“混合”在一起。
关于掩码数组的一个小细节：不要像之前的更新那样用 1 填充内部（原始图像的范围）并用 0 填充外部（边框），反之亦然。掩码数组中的 1 表示“无效”，0 表示“有效”。
此代码甚至比更新 2 中提供的代码快 50%）：

```
 maskedimg = numpy.ma.masked_array(imgarray, mask = maskarray)

    def fnc(buffer):
        return numpy.mean(buffer)

    avg = scipy.ndimage.generic_filter(maskedimg, fnc, footprint = kernel, \
                                       mode = 'constant', cval = 0.0) 
```

***--> 我必须在这里纠正自己！***
在验证过程中我一定是误会了，因为在运行了一些计算之后，似乎`scipy.ndimage.<filters>`无法处理 masked_arrays，因为在过滤操作期间没有考虑掩码。
其他一些人也提到了这一点，比如[这里](http://projects.scipy.org/scipy/ticket/1155)和[这里](http://old.nabble.com/ndimage-aware-of-masked-arrays--td25803414.html)。

* * *

图像的力量...

*   灰色：要处理的图像范围
*   白色：填充区域（在我的情况下填充 2.0）
*   红色阴影：内核范围
    *   深红色：有效邻居
    *   浅红色：邻里的一部分被忽略

![在此处输入图像描述](../Images/6c7ce5156656fb556ed3441e526da295.png)

* * *

如何更改这段相当实用的代码以提高计算性能？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:02:51.460

不确定这是否有帮助，因为我不精通 scipy：在灰色区域使用 1 的辅助图像，在白色区域使用 0 的辅助图像（在源图像中也使用 0）。然后通过简单的求和将过滤器应用于两个图像。

如果 scipy 提供具有内置求和函数的过滤器的专用版本，则有一些加速的希望。

完成后，您将需要逐个像素地划分两个图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T19:06:25.470

我不确定这有多有效，但我使用的是一个更简单`nan`的公式，它可以处理边框和蒙版。

无口罩情况：

```
avg = scipy.ndimage.generic_filter(image, np.nanmean, mode='constant', cval=np.nan, footprint=kernel) 
```

口罩盒：

```
masked_image = np.where(mask, image, np.nan)
avg = scipy.ndimage.generic_filter(masked_image, np.nanmean, mode='constant', cval=np.nan, footprint=kernel) 
```

您可以使用所有`numpy`功能`nan`。

# javascript - 谷歌地理编码器+谷歌地图添加标记

> ID：10683599
> 
> 赞同：0
> 
> 时间：2012-05-21T10:31:18.937
> 
> 标签：javascript, jquery, google-maps, geocoding

我想要做的是在地理编码器完成解析为 latlng 时添加一个标记......这是我的代码：

```
function parseLocation() {
    var user1Location = "Mechelen, Belgium";
    var geocoder = new google.maps.Geocoder();
    //convert location into longitude and latitude
    geocoder.geocode({
        address: user1Location
    }, function (locResult) {
        lat1 = locResult[0].geometry.location.lat();
        lng1 = locResult[0].geometry.location.lng();
        if (status == google.maps.GeocoderStatus.OK) {
            $('#map_canvas').bind('init', function () {
                $('#map_canvas').gmap('addMarker', {
                    'position': lat1 + ',' + lng1
                }).click(function () {
                    $('#map_canvas').gmap('openInfoWindow', {
                        'content': lat1 + ',' + lng1
                    }, this);
                });
            });
        }
    });
} 
```

当我提醒初始化函数中的变量它们未定义时，我知道这个地理编码器是异步的，但我正在等待状态正常...知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:59:49.320

尝试一下。地理编码器是异步的，但多次调用回调函数。

```
geocoder.geocode({"address":user1Location}, function(locResult, status) {
     if (status == google.maps.GeocoderStatus.OK) {
        lat1 = locResult[0].geometry.location.lat();
        lng1 = locResult[0].geometry.location.lng();
     }
}); 
```

那是在同一代码中的链接上工作。

[http://jsfiddle.net/2jbTX/2/](http://jsfiddle.net/2jbTX/2/)

# spring - 组合 hibernate @Transactional & ehcache @Cacheable 总是创建数据库事务

> ID：10683603
> 
> 赞同：11
> 
> 时间：2012-05-21T10:31:36.630
> 
> 标签：spring, hibernate, annotations, ehcache

在对我们的应用程序进行负载测试时，我注意到如果您使用 @Transactional 和 @Cacheable 注释，休眠总是会创建一个数据库事务。有没有简单的方法来防止这种情况？在 spring 中解决这个问题的一种更简单的方法是使用以下类/接口

*   服务层接口
*   可缓存的注释类，它只是一个代理/转发到
*   事务注解实现类

**会发生以下情况**

呼叫 1：

1.  事务被创建
2.  类方法被调用
3.  结果缓存并返回

呼叫 2：

1.  事务被创建
2.  缓存的结果被返回

**首选结果应该是：**

呼叫 1：

1.  事务被创建
2.  类方法被调用
3.  结果缓存并返回

呼叫 2：

1.  缓存的结果被返回

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-21T11:03:38.297

您需要更改`@Transactional`和`@Cacheable`方面的相对顺序。

可以使用和`order`的属性进行配置。有关订单值的含义，请参见[8.2.4.7 建议订购。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-ataspectj-advice-ordering)`<tx:annotation-driven>``<cache:annotation-driven>`

# c++ - 如何在同一个程序中创建多个套接字。？

> ID：10683605
> 
> 赞同：0
> 
> 时间：2012-05-21T10:31:46.163
> 
> 标签：c++, sockets, winsock, resource-cleanup

我正在编写一个程序，它有两个绑定到两个不同端口的套​​接字。我创建了另一个程序的对象，该对象位于一个单独的文件中（它还有一个已初始化的套接字并绑定到一个单独的端口）。我得到一个运行时异常，当我尝试打印 WSAGetLastError 时，它返回了错误代码：10093。

我想知道的是，我如何使用 WSAStartup() 和 WSACleanup()。我是否需要为每个套接字调用 WSAStartup() 并调用 WSACleanup() 三次。

有人可以帮我克服这个问题。提前致谢..：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:35:44.440

您应该在每个程序的基础上调用`WSAStartup()`/ `WSACleanup()`，即每个程序一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:40:11.740

当您使用 winsock dll 时，您只需要调用 WSAStartup 一次（在您的地址空间\进程中），并在完成使用套接字时调用 WSACleanup。

我通常通过执行以下操作来实现启动\清理：（这实际上只对单线程应用程序安全，但对多线程使用互斥锁并不困难......）

```
class HigherLevelSocketWrapper
{
private:
    static int m_iInstanceCount = 0;

public:
    HigherLevelSocketWrapper()
    { 
        //Check if m_iInstanceCount is 0, if so, call WSAStartup.
        //increment m_iInstanceCount
    }
    virtual ~HigherLevelSocketWrapper()
    { 
        //decrement m_iInstanceCount
        //Check if m_iInstanceCount is 0, if so, call WSACleanup.
    }
}; 
```

# sql - 排除验证两个条件的记录

> ID：10683607
> 
> 赞同：6
> 
> 时间：2012-05-21T10:31:49.907
> 
> 标签：sql, sql-server, select

```
select * from table_name
 where BaseDocEntry=15 and BaseDocType='PRRH' and ItemCode='TestStudy2'
   and WhseCode='01' and (currentdoctype<>'PUSH' and CurrentDocEntry<>15) 
```

根据我上面写的查询，将获取来自 INS2 的数据，不包括 currentdoctype [PUSH] 和 CurrentDocEntry 不是 15 的所有数据。我希望我的查询是，它必须排除数据只有当这种组合即currentdoctype=PUSH 和 CurrentDocEntry=15 出现在同一行中，然后排除该行。

你能修复这个查询吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-21T10:34:59.137

用这个：

```
and not (currentdoctype='PUSH' and CurrentDocEntry=15) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:36:43.957

由于您正在使用`AND`并且`OR`当 currentdoctype 与“PUSH”不同且 CurrentDocEntry 与 15 不同时，查询不被排除。

如果您想要 currentdoctype=PUSH 和 CurrentDocEntry=15 只需将这些条件改为：

```
select * from ins2
where BaseDocEntry=15 and BaseDocType='PRRH' and ItemCode='TestStudy2'
and WhseCode='01' and (currentdoctype='PUSH' and CurrentDocEntry=15) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T23:59:31.823

在某些情况下 NOT 不起作用，您可以使用简单的 case 和 where 子句来解决它。这将仅排除 currentdoctype ='PUSH' AND CurrentDocEntry = 15 的情况。

```
SELECT *,
CASE
WHEN currentdoctype ='PUSH' AND CurrentDocEntry = 15 THEN 'c1'
ELSE 'c2'
END AS com_con
FROM table_name
WHERE  BaseDocEntry=15 AND BaseDocType='PRRH' AND ItemCode='TestStudy2'
   AND WhseCode='01' AND com_con = 'c2'; 
```

# javascript - 为什么 jquery 选项选择不起作用

> ID：10683610
> 
> 赞同：1
> 
> 时间：2012-05-21T10:32:07.963
> 
> 标签：javascript, jquery, combobox

我目前正在使用 javascript 和 JQuery 构建自定义控件，并且具有以下功能。

```
$(document).ready(function() {
    $('select').each(function() {
        var parent = this;
        $('#comboBoxData li').on('click', 'li', function() {
            alert('found');
            var value = $(this).prop('id');
            alert(value);
            $(parent).val(value);
        });
    });
}); 
```

这是标记：

```
<select style="display:none">
    <option value='1'>1</option>
    <option vlaue='2'>2</option>
</select>
<ul id="comboBoxData">
    <li id='1'>1</li>
    <li id='2'>2</li>
</ul> 
```

我希望当我单击“#comboBoxData li”元素时，该元素的 ID 属性用于从父输入中选择一个选项。我已经验证了“值”变量正在填充正确的数据，并且正在访问函数本身，但由于某种原因未选择该选项。出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:49:04.587

试试下面的代码，你会发现它有效：

```
$('#comboBoxData li').each(function () {
          $(this).bind('click', function () {
          var value = $(this).prop('id');
          $(this).parent().prev("select").val(value);
     });
}); 
```

[http://jsfiddle.net/quAQm/9/](http://jsfiddle.net/quAQm/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:14:08.617

我一直在查看您的代码，并认为我会发布我的版本。

从外观上看，您希望有多个`select`列表来实现此增强功能。此外，由于这是一项增强功能，我相信`ul`应该即时生成。这是代码和演示：

```
$('.selectEnhance').each(function (){

    // Setup
    $selectElement = $(this);
    $selectElement.css("display","none");

    // Build the list
    var $listEnhancement = $(buildListEnhancement($(this)));

    // Attach events
    $listEnhancement.find('li').click({selectElement: $selectElement}, function(event){
       event.data.selectElement.val($(this).text());
    });

    // Insert into DOM
    $(this).after($listEnhancement);
}); 
```

`ul`以及从项目构建我们的基本功能`select`：

```
function buildListEnhancement(selectElement)
{
          var listElements = "";
          selectElement.find('option').each(
            function(){
                   listElements += "<li>" + $(this).val() + "</li>";
            });

        return "<ul>" + listElements + "</ul>";
} 
```

您现在可以简单地为`select`要增强的元素指定一个类名 ( `class="selectEnhance"`)

[这是一个工作示例。](http://jsfiddle.net/fvkJU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:57:15.253

特别感谢 James Allardice 和 Jamie Dixon。以下标记解决了我的问题：

```
$('#comboBoxData').on('click', 'li', function() {
    var value = $(this).prop('id');
    $(parent).val(value);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T10:40:33.140

我不是 jQuery 专家，但逻辑对我来说有点不对劲。在我的脑海中（需要检查属性选择器，这可能过于复杂）这可能会帮助你进步......

```
$("#comboBoxData li").on("click", function(e) {
  var value = $(this).attr("id");
  var option = $(parent).find("option[value='" + value + "']");
  option.attr("selected", "selected");
}); 
```

这里的一个关键点虽然不一定与您的问题直接相关，但您可以绑定一组元素，并且不需要循环每个元素以将单个元素绑定到同一事件。重要的是，我认为，我正在做的是明确指定`selected`选项的属性，而不是指定`val`select 元素的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T10:37:00.207

您的 HTML 示例中的组合框不是`<ul>`. 您需要使用`prev()`jQuery 的 th 方法返回到前一个兄弟，在这种情况下是您的选择框。

```
$('#comboBoxData li').bind('click', function () {                         
   var value = $(this).prop('id');                         
   $(this).parent().prev().val(value);    
}); 
```

**编辑：**

忘记了您将单击事件绑定到每个`li`，因此您`parent()`首先需要选择器，然后`prev()`选择器才能到达组合框

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-21T10:38:37.193

可能你的`parent`识别码错了。这对我有用：

```
$('#comboBoxData li').click(function () {
   var value = $(this).prop('id');
   $(this).parent().prev().val(value);
}); 
```

[​http://jsfiddle.net/6PJdU/](http://jsfiddle.net/6PJdU/)

# android - Android：UUID 无法序列化

> ID：10683611
> 
> 赞同：2
> 
> 时间：2012-05-21T10:32:07.947
> 
> 标签：android, wcf, ksoap2, uuid

我正在尝试将 UUID 传递给 Web 服务，但是当我尝试发送每个参数时，它返回一个错误，指出无法序列化，然后它出现 UUID 的值，除非我将它作为字符串值传递，就像在代码，但是当它发送到 Web 服务时，它给出了意外的类型文本流阅读器错误

如果你们中的任何人可以帮助我，这是代码：

```
 package go.pw.exe;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import java.util.Calendar;
import java.util.UUID;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class Ex1Activity extends Activity {
    private static final String SOAP_ACTION="http://vitalcare.hydra.pt/IHealthRecordService/CreateWeightRecord";
    private static final String METHOD_NAME = "CreateWeightRecord";
    private static final String NAMESPACE = "http://vitalcare.hydra.pt/";
    private static final String URL = "http://www.hydra.pt:8070/HealthRecordService.svc?wsdl";

    Calendar c;
    String data;
    TextView msg;
    UUID weightId;
    Button send;
    EditText weight;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        send = (Button) findViewById(R.id.button1);
        weight = (EditText) findViewById(R.id.et_weight);

        send.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {  

                int userWeight = Integer.valueOf(weight.getText().toString());
                c = Calendar.getInstance();
                weightId= UUID.randomUUID(); 
                data = c.get(Calendar.YEAR)+ "-" + (c.get(Calendar.MONTH)+1) + "-"+c.get(Calendar.DAY_OF_MONTH)+ " " + c.get(Calendar.HOUR_OF_DAY) + ":" + c.get(Calendar.MINUTE)+":"+c.get(Calendar.SECOND);
                String Id = UUID.randomUUID().toString();

                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                request.addProperty("UserId", "3e1c7765-7370-4295-8170-92a1d2dc542c");
                request.addProperty("CreationDate", data);
                request.addProperty("WeightId", Id);
                request.addProperty("When", data);
                request.addProperty("WeightInKilos", userWeight);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet=true;
                envelope.setOutputSoapObject(request);

                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                try{
                androidHttpTransport.call(SOAP_ACTION, envelope);  
           }  
           catch (Exception e) {  
             e.printStackTrace();
             Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();

                  }  
                }
            });
        }
    } 
```

# php - UDP 流式传输到 Android 上的 PHP 网页？

> ID：10683623
> 
> 赞同：0
> 
> 时间：2012-05-21T10:32:49.717
> 
> 标签：php, android, udp

我工作的公司正在开发一个 android BS 客户端，Web 服务器使用 PHP 脚本。单击一个按钮时，服务器将向客户端发送 UDP 视频流。但是网络浏览器如何显示视频？wy的想法是开发一个浏览器插件，插件调用MediaPlayer库。这是正确的？谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:44:30.940

首先，我相信 Android 本身并不支持 UDP 流（参见[这个](https://stackoverflow.com/questions/8313995/udp-video-streaming-on-android)问题）。另一方面，如果您需要在媒体播放器中打开以平台[支持的格式](http://developer.android.com/guide/appendix/media-formats.html)之一编码的视频文件，只需使用视频的 url 和正确的视频 mime 类型创建一个意图。像这样的东西应该有效；

```
Intent intent = new Intent(Intent.ACTION_VIEW)
intent.setDataAndType(Uri.parse(url), "video/mp4"); // URL to video, with the correct media type
startActivity(intent); 
```

# google-chrome - chrome扩展程序

> ID：10683633
> 
> 赞同：0
> 
> 时间：2012-05-21T10:33:21.730
> 
> 标签：google-chrome, google-chrome-extension

我是开发 Chrome 扩展程序的初学者，遇到以下问题：

如何为当前打开的页面执行脚本？我想使用`background.html`. 我已经尝试运行

```
document.addEventListener('DOMContentLoaded', exec_fun); 
```

或者

```
window.addEventListener('DOMContentLoaded', exec_fun); 
```

并且还注册`backgroung.html`了`manifest.json`执行该`exec_fun()`功能，但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:40:15.137

如果您想在每个页面上运行一个脚本，您应该编写一个内容脚本： [http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

内容脚本在页面内运行，因此您可以访问其 DOM 并使用其事件。

另一方面，background.html 仅在扩展程序启动时运行一次（通常是在浏览器打开时），并且它独立于任何选项卡或页面。它是您的扩展“运营基地”。这不是您要放置脚本的地方，除了您使用侦听器通过 onUpdated 捕获每个页面更改，每次选项卡的 url 更改时都会触发：

[http://code.google.com/chrome/extensions/tabs.html#event-onUpdated](http://code.google.com/chrome/extensions/tabs.html#event-onUpdated)

“并且还在 manifest.json 中注册了 backgroung.html 来执行 exec_fun() 函数”

你是怎么做到的？我认为那不是办法。

# javascript - 谷歌地图显示友好的内联错误

> ID：10683640
> 
> 赞同：2
> 
> 时间：2012-05-21T10:33:58.413
> 
> 标签：javascript, google-maps, google-maps-api-3, popup

这里的主要问题是当许可证密钥无效时，谷歌地图 api 将返回一个烦人的 javascript 弹出警报框。

由于这是部署到多个用户并且每个用户都需要自己注册谷歌地图许可证，有没有办法检测恼人的弹出消息并将其更改为友好的内联 div？

```
<html>

<head>
</head>

<body>

<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=00000000AIzaSyAeST3KV26OghAb7TE7qiNXVQCWGkKSN9s" type="text/javascript"></script>

<script language="javascript"> load();addMarker( "(Unknown City?), (Unknown Country?)", "IP (aa)", "../images/marker_purple.png");addMarker( "", "IP (bb)", "../images/marker_red.png");addMarker( "test address 2", "Billing & Shipping Address", "../images/marker_green.png");</script>

</body>

</html> 
```

# android - 在 Android 4 ICS 上使用 SSL 客户端证书的 WebView

> ID：10683643
> 
> 赞同：8
> 
> 时间：2012-05-21T10:34:01.437
> 
> 标签：android, ssl, https, webview, certificate

我对 Android 上的本机 WebView 有疑问。我需要使用 SSL 客户端证书对站点进行身份验证。Android WebView 似乎不支持这一点。作为一种解决方法，我使用了 WebView 的修改版本：

[https://github.com/yonekawa/webview-with-client-certificate](https://github.com/yonekawa/webview-with-client-certificate)

修改后的 WebView 通过将正确配置的 SslSocketFactory 注入标准 Android WebView 来工作。这在 Android 2.x 设备上运行良好。但是，对于 Android 4 ICS，它不再工作了。SslSocketFactory 仍然存在于 ICS 中，但是，它似乎不再使用了。

所以我的问题是：有没有人成功地在 ICS 上配置 Android WebView 以便它与客户端证书一起使用？或者有其他选择吗？

我已经尝试过的：

*   将 SSL 客户端证书导入 Android 密钥库并仅使用 WebView 而不进行任何修改。这不起作用，客户端证书不会与请求一起发送。不过，它可以在本机浏览器中运行。

*   使用 HttpClient 自己创建 SSL 连接，获取站点的 HTML 并将其交给 WebView。这基本上可行，但我需要拦截 WebView 发出的所有请求并自己处理它们。但是，WebView 不提供 POST 请求的数据，这使我无法使用这种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T08:16:55.077

我认为您想要的是覆盖以下隐藏方法：

```
public void onReceivedClientCertRequest(WebView view,
ClientCertRequestHandler handler, String host_and_port) { 
```

默认情况下，这将取消请求。

我在这个例子之后使用了这个方法来使用隐藏的 API： [http ://devmaze.wordpress.com/2011/01/19/using-com-android-internal-part-5-summary-and-example/](http://devmaze.wordpress.com/2011/01/19/using-com-android-internal-part-5-summary-and-example/)

抱歉回复晚了。刚刚偶然发现你的问题......希望它仍然有帮助。

# jquery - jquery动画悬停并在一定时间后停止

> ID：10683648
> 
> 赞同：1
> 
> 时间：2012-05-21T10:34:14.587
> 
> 标签：jquery, jquery-animate, clearinterval

比如说我有一个在悬停时执行的动画，自然很容易停止我们的回调函数——我需要在 1 秒后停止动画，我会用 ClearInterval 来做吗？我的实际功能可以在这里看到[http://jsfiddle.net/7hujh/](http://jsfiddle.net/7hujh/)

```
$(elem).hover(function() {

  // animate

}, function () {

  // stop animating

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:37:40.250

是的，只需在一秒钟后清除间隔：

```
setTimeout(function() {clearInterval(vibrateIndex);}, 1000); 
```

[小提琴](http://jsfiddle.net/7hujh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:49:07.503

```
$(elem).hover(function() {

   $("#item").animate({property:value},interval).delay(1000).stop(0,0);

}, function () {

  // stop animating

}); 
```

# python - Django 无法使用“python manage.py syncdb”命令创建默认表

> ID：10683650
> 
> 赞同：1
> 
> 时间：2012-05-21T10:34:17.647
> 
> 标签：python, django

我是 Django 的新手。我正在按照[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)中的说明进行操作。当我运行时`python manage.py syncdb`，我收到以下错误：

```
D:\MyDev\DjnagoProject\mysite>python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 9, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 420, in execute_from_command_
line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 359, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "C:\Python27\lib\site-packages\django\db\backends\dummy\base.py", line 15, in complain
    raise ImproperlyConfigured("You haven't set the database ENGINE setting yet.")
django.core.exceptions.ImproperlyConfigured: You haven't set the database ENGINE setting yet. 
```

添加信息：Python 版本：2.7.2，django 版本：(1, 4, 0, 'alpha', 1) 操作系统：windows XP

请让我知道我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:36:03.760

阅读您的错误消息：

> 配置不当：**您尚未设置数据库 ENGINE 设置。**

签[`DATABASES`入您的`settings.py`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-DATABASES). 你至少需要[`ENGINE`](https://docs.djangoproject.com/en/dev/ref/settings/#engine)和[数据库`NAME`](https://docs.djangoproject.com/en/dev/ref/settings/#name)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:06:53.073

你需要在 settings.py 中做以下两件事

1.  在数据库字典中添加数据库引擎和凭据。

> ```
> DATABASES = {
>     'default': {
>         'ENGINE': 'django.db.backends.sqllite3',
>         'NAME': '/home/yourname/mydb', 
>         'USER': '',   
>         'PASSWORD': '',  
>         'HOST': '',        
>         'PORT': '',  
> }
> } 
> ```

1.  将您的应用添加到 installed_app 列表

> ```
> INSTALLED_APPS = (
>     'com.example.myapp',
>     .... 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:37:30.540

```
You haven't set the database ENGINE setting yet. 
```

确保您在 settings.py 中拥有正确[的数据库凭据](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-DATABASES)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-19T14:42:32.257

我在 settings.py 文件中添加了数据库配置：

现在在**Django 1.8.x**上，它完全支持**迁移**。

**syncdb**将在 1.9 版中完全删除

尝试使用**makemigrations**并改为**migrate**

```
python manage.py makemigrations app1 app2 app3 
```

将在每个应用迁移文件夹中制作迁移脚本

```
python manage.py migrate 
```

将查看数据库**django_migrations**表和迁移文件夹并将迁移更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-28T21:34:43.010

安装 MySQL-python 为我工作！

# mfc - MFC - 放大镜 VC++

> ID：10683652
> 
> 赞同：0
> 
> 时间：2012-05-21T10:34:18.000
> 
> 标签：mfc

我正在使用 MFC 开发 Visual C++。我想在我目前正在开发的图像处理应用程序中集成一个放大镜。我在放大镜项目上做了一些谷歌搜索，但有些是 gobble-de-gook windows 编程，有些太简单了。任何人都可以通过一些链接或代码以更明智的意见指导我如何解决这个问题吗？

注意：当放大镜越过特定区域时，我还知道创建设备上下文并在其上绘制位图。我什至有一个项目。但它似乎缺乏一些功能，比如改变放大镜的大小等，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:37:47.840

不确定你是否看过[这个](http://www.codeproject.com/Articles/1602/Magnifying-Glass)，但我认为它有你需要的一切。

我建议发布您在问题中阅读过的链接并解释您的意思

> 狼吞虎咽的windows编程

# python - 找出序列可以重新排列的方式数

> ID：10683659
> 
> 赞同：1
> 
> 时间：2012-05-21T10:35:08.810
> 
> 标签：python, permutation, combinatorics

如何找到可以重新排列数字序列（可能包含类似项目）的方式的数量，以便数字不会放置在与其或类似数字相同的位置。

例如，`[0,0,0,1,1,1]`只能以一种方式重新排列，即`[1,1,1,0,0,0]`.

`[0,0,0,1,1,1,1]`不能以任何方式安排。

`[1,2,2,14]`可以以两种方式排列，即`[2,1,14,2], [2,14,1,2]`。

`[1,1,2,2,14]`可以以 4 种方式排列，即`[14,2,1,1,2], [2,2,14,1,1], [2,2,1,14,1], [2,14,1,1,2]`。

数学解决方案是可用的，但我正在考虑使用编程概念的一些简单方法。数学代码有点像这样..（对不起，我不能以正确的格式发布）

```
∫∞0 Ln1(x)..Lnr(x)e−xdx 
```

其中 r 是项目数，ni 是项目 i 的出现次数，Lk 是第 k 个拉盖尔多项式。例如，对于 1,1,2,2,14，我们有 r=3，n1=2，n2=2，n3=1，所以直到一个符号，重排的数量是

```
∫∞0 L2(x)L2(x)L1(x)e−xdx 
= ∫∞0 12(x2−4x+2)12(x2−4x+2)(1−x)e−xdx 
= ∫∞0(−14x5+94x4−7x3+9x2−5x+1)e−xdx
= −4 
```

但我在想是否有任何 python 库可以根据我们的需要生成所有排列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:47:08.313

您是否尝试过 itertools.permutations？

[http://docs.python.org/library/itertools.html#itertools.permutations](http://docs.python.org/library/itertools.html#itertools.permutations)

```
import itertools

def my_combos(val):
    results = []
    l = itertools.permutations(val, len(val))
    for c in l:
        if all([x != y for (x,y) in zip(c,val)]):
            results.append(c)
    return list(set(results))

print my_combos([0,0,0,1,1,1])
print my_combos([1,1,2,2,14]) 
```

产量：

```
[(1, 1, 1, 0, 0, 0)]
[(2, 14, 1, 1, 2), (2, 2, 1, 14, 1), (14, 2, 1, 1, 2), (2, 2, 14, 1, 1)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T14:35:10.067

涉及更多，但在长输入序列上应该更快：

```
from collections import Counter

def _rearrange(orig, rem):
    if len(orig)==1:
        v = rem[0][0]
        if v != orig[0]:
            yield [v]
    else:
        o, orig = orig[0], orig[1:]
        for i,(v,c) in enumerate(rem):
            if v != o:
                for r in _rearrange(orig, rem[:i]+([(v,c-1)] if c>1 else [])+rem[i+1:]):
                    yield [v]+r

def rearrange(orig):
    if len(orig) > 1:
        return list(_rearrange(orig, Counter(orig).items()))
    else:
        return []

def main():
    print rearrange([0,0,0,1,1,1])
    print rearrange([1,1,2,2,14])

if __name__=="__main__":
    main() 
```

结果是

```
[[1, 1, 1, 0, 0, 0]]
[[2, 2, 1, 14, 1], [2, 2, 14, 1, 1], [2, 14, 1, 1, 2], [14, 2, 1, 1, 2]] 
```

.

**编辑：**比较函数的运行时，我得到：

![在此处输入图像描述](../Images/d535cbcac7ce365ade13e58bb821417e.png)

（蒂姆的蓝色，我的绿色；点是数据，线最适合（数据对数的最小二乘）；x 轴是序列长度，y 轴是以秒为单位的运行时间（对数刻度）。数据点是十个中最好的对每个序列长度的 20 个随机序列中的每一个运行。）

结论：

*   Tim 的 fn 的运行时间增长为 7.44 * * n；我的增长为 3.69 * * n。

*   在十项序列中，他的 fn 平均为 53.9 秒，而我的为 0.93 秒；序列中每个额外项目的差异略多于两倍。

*   他的 fn 运行时间更加一致；我的是高度可变的，取决于序列中重复项目的数量。

*   直线拟合看起来不是最好的预测器；运行时应该是 n! 的函数，而不是 k * * n。不过，我不确定如何建模。建议？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:00:37.423

蛮力使用`itertools`：

```
import itertools
def arrangements(arr):
    p = itertools.permutations(arr)
    return set(item for item in p if all(x!=y for x,y in zip(item,arr))) 
```

结果：

```
>>> arrangements([0,0,0,1,1,1])
{(1, 1, 1, 0, 0, 0)}
>>> arrangements([0,0,0,1,1,1,1])
set()
>>> arrangements([1,2,2,14])
{(2, 14, 1, 2), (2, 1, 14, 2)}
>>> arrangements([1,1,2,2,14])
{(2, 14, 1, 1, 2), (2, 2, 1, 14, 1), (14, 2, 1, 1, 2), (2, 2, 14, 1, 1)} 
```

# wpf - 具有未在 UI 上更新的依赖属性的自定义 UserControl？

> ID：10683660
> 
> 赞同：0
> 
> 时间：2012-05-21T10:35:13.147
> 
> 标签：wpf, user-controls, dependency-properties

我制作了以下示例用户控件：

```
<UserControl x:Class="DLSAdministration.Controls.CombinedTextBoxControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         d:DesignHeight="30"
         d:DesignWidth="250"
         mc:Ignorable="d">
<UserControl.Resources>
    <SolidColorBrush x:Key="BGBrush" Color="#3A3A3A" />
    <SolidColorBrush x:Key="BorderBrush" Color="#656565" />
</UserControl.Resources>
<Grid Width="{Binding Path=Width, ElementName=tb}" Height="{Binding Path=Height, ElementName=tb}">
    <TextBox Name="tb"
             Grid.Row="0"
             Grid.Column="0"
             Background="{StaticResource BGBrush}"
             BorderBrush="{StaticResource BorderBrush}"
             BorderThickness="2"
             FontFamily="Calibri"
             FontSize="16"
             Foreground="Snow">
        Content
    </TextBox>
    <TextBlock Margin="0,5,5,5"
               HorizontalAlignment="Right"
               FontStyle="Italic"
               Foreground="Red"
               Padding="2">
        Label
    </TextBlock>
</Grid> 
```

使用文件后面的代码：

```
 public partial class CombinedTextBoxControl : UserControl
{
    public CombinedTextBoxControl()
    {
        InitializeComponent();
    }

    // the exposed instance public properties.
    public string TextboxText
    {
        get { return (string) GetValue(TextboxTextProperty); }
        set { SetValue(TextboxTextProperty, value); }
    }

    public string TextBlockText
    {
        get { return (string)GetValue(TextBlockTextProperty); }
        set { SetValue(TextBlockTextProperty, value); }
    }

    private static readonly DependencyProperty TextboxTextProperty =
        DependencyProperty.Register
            (
                "TextboxText",
                typeof (string),
                typeof (CombinedTextBoxControl),
                new FrameworkPropertyMetadata("TextboxText")
            );

    private static readonly DependencyProperty TextBlockTextProperty =
        DependencyProperty.Register
            (
                "TextBlockText",
                typeof(string),
                typeof(CombinedTextBoxControl),
                new FrameworkPropertyMetadata("TextBlockText ")
            );
} 
```

我的 UserControl 是这样使用的：

```
 <my:CombinedTextBoxControl x:Name="combinedTextBoxControl1"
                               Grid.Column="1"
                               Width="182"
                               Margin="77,76,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               TextBlockText="Name"
                               TextboxText="Ibrar Mumtaz" /> 
```

我什至没有将任何数据绑定到此控件，***我什至无法让它显示我通过 xaml 提供的一些示例数据？***你能发现错误吗？我环顾四周，注意到其他人的错误，但我没有犯任何明显的错误，所以我完全被这个难住了....：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:52:18.740

你期望它如何工作？您的 CombinedTextBoxControl 中有一个依赖属性，但您没有在任何地方使用它。您想将此属性分配给控件模板中的子控件，这是一种方法：

给你的用户控件起一个名字

```
 <UserControl x:Class="DLSAdministration.Controls.CombinedTextBoxControl" 
            x:Name="myControl" 
```

并将绑定添加到您的文本框和文本块，例如

```
Text="{Binding ElementName=myControl, TextBlockText}" 
```

只是另一个注意事项：您的布局是错误的。你有一个只有一个单元格的网格，你在其中放置了一个文本块和一个文本框，一个放在另一个上。尝试添加 2 个 ColumnDefinitions 一个用于标签，一个用于文本框，并在两个控件上设置正确的附加属性（文本块上的 Grid.Column="0"，文本框上的 Grid.Column="1"）。

# asp.net - 如何创建滑块

> ID：10683661
> 
> 赞同：1
> 
> 时间：2012-05-21T10:35:13.717
> 
> 标签：asp.net, visual-studio-2010

我正在使用 Visual Studio 2010 创建一个网站。我想使用一个滑块，当用户使用它时，它会更改标签的值。但我在工具箱上找不到任何类型的滑块。Visual Studio 不提供这么标准的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:41:21.017

您可以获得[asp.net Ajax Control Toolkit](http://ajaxcontroltoolkit.codeplex.com/)，它是一个带有更多控件的附加组件

这是一个滑块示例：

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Slider/Slider.aspx)

# javascript - 淘汰赛错误：dataToRetain 未定义

> ID：10683663
> 
> 赞同：2
> 
> 时间：2012-05-21T10:35:22.180
> 
> 标签：javascript, knockout.js

我遇到了多个 observableArray 的问题，并在一个视图模型中使用它们添加/删除项目。

该场景基本上是一个联系人管理表单，所以我试图让他们输入多个电子邮件地址/电话号码等。

这是一个测试用例：

[http://jsfiddle.net/8rhv9/](http://jsfiddle.net/8rhv9/)

尝试添加一些电子邮件和电话号码，直到错误发生。

如果有帮助，我在 Firefox 12 上。

我的代码基于淘汰网站上的这个示例：

[http://knockoutjs.com/examples/gridEditor.html](http://knockoutjs.com/examples/gridEditor.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:01:30.787

您忘记`var self = this;`了电话和电子邮件的定义。此处修复了 jsfiddle 示例：

[http://jsfiddle.net/8rhv9/1/](http://jsfiddle.net/8rhv9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:12:21.480

我改变了它，所以这些函数确实 var self = this..... 似乎现在可以正常工作

```
var self = this;
            self.Number = ko.observable();
            self.Notes = ko.observable();
            self.ContactType = ko.observable();
        };

        var email = function () {
            var self = this;
            self.Email = ko.observable();
            self.Notes = ko.observable();
            self.ContactType = ko.observable();
        }; 
```

# ruby-on-rails - Rails：在创建类之前运行初始化程序

> ID：10683666
> 
> 赞同：4
> 
> 时间：2012-05-21T10:35:34.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeresource, initializer

基本上我有一个让一切`initializer class`都`RAILS_ROOT/config/initialiers/app_constant.rb`易于控制的能力。

```
class AppConstant
  APIURL = 'http://path.to.api'
end 
```

在 中`RAILS_ROOT/model/user.rb`，我有以下设置：

```
class User < ActiveResource::Base
  self.site = AppConstant::APIURL
end 
```

运行时`rails s`，出现以下错误

```
<class:User>: uninitialized constant User::AppConstant::APIURL 
```

我知道问题是因为 Rails 在创建类之后运行 Initializers。在 Rails 设置它的类之前，有什么方法可以让一些 Initializers 运行？

* * *

最后，这个问题通过在 Rails 加载模型之前添加`require "#{Rails.root}\conf\initializers\app_constant.rb"`到加载来解决。`application.rb`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:42:36.293

要在 Rails 本身加载之前运行代码，请将其`require 'rails/all'`放在`config/application.rb`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T12:41:02.763

另一种解决方案是将常量包装在一个方法中，以便在加载类时不对其进行评估，而仅在稍后调用该方法时对其进行评估：

```
def self.site
  AppConstant::APIURL
end 
```

如果它也需要可设置：

```
def self.site=(url)
  @site = url
end

def self.site
  @site ||= AppConstant::APIURL
end 
```

# c++ - 食人魔点场景保存

> ID：10683670
> 
> 赞同：2
> 
> 时间：2012-05-21T10:35:50.243
> 
> 标签：c++, ogre3d, ogre, scene

我正在使用 Ogre3d 制作视频游戏。我使用最新的 tinyxml dotscene 加载器加载 .scene 文件。现在我想将修改后的场景保存回 .scene 文件。有人可以给我一个例子或提示如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:24:13.620

您需要编写完全相反的过程：

1.  循环遍历所有相关的场景对象，并为每个对象添加所需的 TiXmlElements 到 TiXmlDocument。
2.  最后，保存 TiXmlDocument。

这个[TinyXml 教程](http://www.grinninglizard.com/tinyxmldocs/tutorial0.html)展示了 XML 生成方面所需的代码部分。

一个真实的例子是 Ogitor（一个 WYSIWYG Ogre 编辑器），其中每个编辑器对象都有[一个方法 TiXmlElement* CXXXEditor::exportDotScene(TiXmlElement *pParent)](https://bitbucket.org/jacmoe/ogitor/src/2495109e50fc/Ogitor/src/EntityEditor.cpp?at=default#cl-290)将所有相关的属性/状态移动到 TinyXml 结构中，然后再保存到文件。

# spring - junit 测试因 NoSuchMethodError BridgeMethodResolver.isVisibilityBridgeMethodPair 而失败

> ID：10683672
> 
> 赞同：3
> 
> 时间：2012-05-21T10:36:12.063
> 
> 标签：spring, maven, junit

我升级了我的 Maven 项目以使用 Spring 3.0.7（来自 3.0.5）。现在，我所有使用

```
@RunWith(SpringJUnit4ClassRunner.class) 
```

注释失败（以下例外），但仅在从 Eclipse 中运行时。我正在运行“Eclipse Indigo Service Release 2”。当我从 linux 控制台运行时，一切都会过去。

有人遇到过这个吗？

```
java.lang.NoSuchMethodError: org.springframework.core.BridgeMethodResolver.isVisibilityBridgeMethodPair(Ljava/lang/reflect/Method;Ljava/lang/reflect/Method;)Z
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.buildAutowiringMetadata(AutowiredAnnotationBeanPostProcessor.java:346)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.findAutowiringMetadata(AutowiredAnnotationBeanPostProcessor.java:317)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(AutowiredAnnotationBeanPostProcessor.java:216)
at  
etc & so forth... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:59:36.630

解决了 - 归结为在类路径上同时拥有 3.0.5 和 3.0.7 JAR。我从这个问题中得到了一个线索：[Error loading Jar file with Tomcat 7, Spring 3 and Camel 2.9.1](https://stackoverflow.com/q/9673217/156477)

尽管 Eclipse 报告所有 spring jar 文件都是 3.0.7，但我发现它挂在对旧 jar (3.0.5) 的引用上。我通过从我的 Maven 存储库中删除所有现有的 spring 文件并重建来发现这一点。然后我开始收到关于缺少 $M2_REPO/com/spring...../3.0.5 jar 文件的明确消息。

# android - android中Editext中纯文本输入类型和人名输入类型的区别

> ID：10683678
> 
> 赞同：8
> 
> 时间：2012-05-21T10:36:26.007
> 
> 标签：android, android-widget

当我们在 Android 中使用 EditText 小部件时，使用纯文本输入类型和人名输入类型的基本区别是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T10:46:52.790

两者之间没有真正的区别。当我说没有真正的区别时，为了澄清我的意思，人名输入只是具有属性`android:inputType="textPersonName"`预设。用户点击空格按钮后，人名编辑文本将大写每个单词的第一个字符。

它只是为需要将`inputType`属性设置为 EditTex 视图的开发人员提供一些便利。您会在 Android SDK 的 ADT 中找到一些类似的预设文本字段。通过使用上面提到的属性，您也可以对纯文本字段产生相同的效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T10:44:42.853

根据您的输入类型，软键盘显示将动态变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T10:55:12.427

用于人名输入类型 - 单行编辑文本

对于纯文本 -edittext 的多行编辑文本框高度根据您的数据更改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:57:13.987

从[Android Developers](http://developer.android.com/reference/android/widget/EditText.html) 链接，`EditText`可以定义为它是一个薄的单板`TextView`，将自身配置为可编辑。

1.  inputType PersonName 可以给出为 -`android:inputType="textPersonName"`
2.  inputType 普通文本可以给出为 -`android:inputType = "text"`

**注意：**根据输入类型，软键盘显示将动态更改。

# python - Python dot notation dict 是否会为连字符键中断？

> ID：10683679
> 
> 赞同：0
> 
> 时间：2012-05-21T10:36:27.427
> 
> 标签：python

我正在使用[此处](https://stackoverflow.com/questions/224026/javascript-style-dot-notation-for-dictionary-keys-unpythonic)讨论的 Javascript 样式的字典。执行：

```
class DotDict(dict):
    def __getattr__(self, attr):
        return self.get(attr, None)
    __setattr__= dict.__setitem__
    __delattr__= dict.__delitem__ 
```

我已经使用这种结构一段时间没有问题，但最近需要一个带有连字符键的字典，如下所示：

```
 foo = DotDict()
    foo.a = 'a'        #Business as usual
    foo.a-b = 'ab'     #Broken 
```

分配给 foo.ab 会导致：

```
SyntaxError: can't assign to operator 
```

这会中断，因为“-”被视为减号操作，而不是键名的一部分。是否有另一种方法来创建具有点式成员访问权限的字典？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:37:54.340

`a-b`不是 Python 中的有效标识符。有效标识符可以由字母、数字和下划线 ( `_`) 组成。任何其他字符在变量名中都是不合法的。

> 是否有另一种方法来创建具有点式成员访问权限的字典？

**无法**使用不是有效标识符的键进行点式访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-21T10:46:14.293

我不知道你为什么感到惊讶。在 JavaScript 中，同样的表达式也会引发错误：

```
>>> foo.a-b = 'ab'
ReferenceError: invalid assignment left-hand side 
```

因此，就像在 JavaScript 中一样，回退到：

```
>>> foo['a-b'] = 'ab' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T10:40:24.297

这是不可能的。最好的方法是允许混合访问——就像你已经做的那样——并使用它。或者，`setattr()/getattr()`如[Not_a_Golfer 建议](https://stackoverflow.com/a/10683728/296974)的那样，使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:40:07.693

嗯，这是有可能的，但你真的不想这样做。

```
>>> class foo():
...    pass
... 
>>> f = foo()
>>> setattr(f, 'foo-bar', 1)
>>> getattr(f, 'foo-bar')
1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T10:41:05.980

`a-b`不是有效标识符，但使用运算符 被解释为表达式`-`。您可以设置此类字段：`setattr(foo, 'a-b', 'ab')`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-21T18:12:48.113

它可能不适合您尝试实现的成语，但如果您用下划线替换连字符，则代码将起作用：

```
foo.a_b = 'ab' 
```

# jquery - 表格太小时jQuery宽度返回错误值

> ID：10683680
> 
> 赞同：1
> 
> 时间：2012-05-21T10:36:29.200
> 
> 标签：jquery, iphone, width

我有一张液体宽度的桌子。我试图使用 jQuery 来获取表格单元格的宽度（一个具有 calAv 类），并使所有单元格具有相同的高度，因此它们都是方形的。

以下代码似乎在 Firefox、Chrome 和 Safari 中运行良好。

```
function calHeightSet () { 
    calWidth = $('.calMonth .calAv').width();
    //alert (calWidth);
    $('.calMonth tr').css('height',calWidth);
} 
```

到目前为止，我测试过的唯一移动设备是 iPhone 3G，它似乎没有添加高度值。如果我取消注释警报，则警报的像素值就是表格单元格的高度。但是，这个高度与我完全删除此代码时相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:40:02.457

你可以试试 jQuery [height()](http://api.jquery.com/height/)函数：

```
$('.calMonth tr').height(calWidth); 
```

或者，您可能需要更具体并包括`td`：

```
$('.calMonth tr td').height(calWidth); 
```

# entity-framework - 使用多对多关系进行查询的正确方法

> ID：10683685
> 
> 赞同：0
> 
> 时间：2012-05-21T10:36:55.843
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我创建了三个表 - Podcast、Category 和 CategoryLink。CategoryLink 表仅包含两列 - PodcastId 和 CategoryId。[如本文](http://blogs.microsoft.co.il/blogs/gilf/archive/2011/08/01/creating-a-many-to-many-mapping-using-code-first.aspx)所述，我已经描述了这些表之间的多对多关系。一切正常，但我不知道如何正确进行查询。现在我通过以下方式做到这一点：

```
var ps = db.Podcasts.Where(p => p.Status.SysStatus > 0);
if (category_id.HasValue)
    ps = ps.Where(p => p.Categories.Where(c => c.Id == category_id.Value).FirstOrDefault() != null); 
```

它有效，但我认为这有点肮脏:-)

它给了我以下 SQL 查询（我删除了多余的列和字符串）：

```
 SELECT 
[Project2].[Id] AS [Id]
FROM ( SELECT 
    [Extent1].[Id] AS [Id], 
    (SELECT TOP (1) 
        [Extent3].[CategoryId] AS [CategoryId]
        FROM [dbo].[CategoryLink] AS [Extent3]
        WHERE ([Extent1].[Id] = [Extent3].[PodcastId]) AND ([Extent3].[CategoryId] = 1)) AS [C1]
    FROM  [dbo].[Podcast] AS [Extent1]
    INNER JOIN [dbo].[PodcastStatus] AS [Extent2] ON [Extent1].[StatusId] = [Extent2].[Id]
    WHERE [Extent2].[SysStatus] > 0
)  AS [Project2]
WHERE [Project2].[C1] IS NOT NULL 
```

问题是如何进行查询，以便我可以在`inner join`没有子查询的情况下获得“正常”？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:49:20.200

我不确定您要完成什么。多对多在对象映射中与多对一没有太大区别，只是可以从双方访问关系：

```
using System.Data.Entity; // For .Include Extension

// Eager-load Categories
var podcasts = db.Prodcasts.Include(x => x.Categories);
foreach (var p in podcats)
{
    foreach (var c in p.Categories)
    {
    }
}

var categories = db.Categories.Include(x => x.Podcasts);
foreach (var c in categories)
{
    foreach (var p in c.Podcasts)
    {
    }
 } 
```

根据您尝试完成的任务，您可能还想做这样的事情：

```
from c in Customers
join p in Purchases on c.ID equals p.CustomerID           // first join
join pi in PurchaseItems on p.ID equals pi.PurchaseID     // second join
select new
{
c.Name, p.Description, pi.Detail
} 
```

如果您是 LINQ 新手，我建议您看看[LinqPad](http://www.linqpad.net/)。它包含很多示例，可以让您了解它的工作原理。

**更新**：

你能详细说明你真正想要得到什么吗？

我的第二个示例中的选择也可以在没有`PurchaseItems`类的情况下完成：

```
var q = (from p in db.Prodcasts
        from c in p.Categories // note that it is using "p" instead of db.Categories
        select new 
        {
            Podcast = p.Name,
            CategoryName = c.Name
        }).ToList(); 
```

# javascript - 替换对象数组中的元素

> ID：10683692
> 
> 赞同：8
> 
> 时间：2012-05-21T10:37:24.907
> 
> 标签：javascript

我想替换数组中的整个对象。

[http://jsfiddle.net/CWSbJ/](http://jsfiddle.net/CWSbJ/)

```
var array = [ {name: "name1" }, { name: "name2" } ];
var element = array[0];
element = {name: "name3"};
alert(array[0].name); 
```

在这段代码中，我希望输出 name3，为什么我不能像这样替换数组中的整个对象？什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-21T10:39:36.350

正确的方法是

```
array[0] = {name: "name3"}; 
```

您现有的代码无法按预期工作，因为您将引用 * 引用到第一个元素

```
var element = array[0]; 
```

然后你用另一个对象*替换这个局部变量的值。*这使原始数组保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:40:52.767

试试这个 ：

```
var array = [ {name: "name1" }, { name: "name2" } ];
array[0] = {name: "name3"};
alert(array[0].name); 
```

`element`不是实际的数组 - 它是数组的副本

# php - 灯箱显示乱码而不是图像

> ID：10683700
> 
> 赞同：1
> 
> 时间：2012-05-21T10:37:56.617
> 
> 标签：php, jquery, character-encoding, gd, lightbox

我在我的网站上安装了一个灯箱脚本。当灯箱弹出时，显示的是乱码而不是大图：

```
����JFIF��;CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 90 ��C     ��C    ����"�� ���}!1AQa"q2���#B��R��$3br� %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz������������������� 
```

这是什么？看起来它与图像文件有关，但我不明白是什么导致了这个问题......有什么建议吗？

编辑：[这是图像的整个代码](http://www.sendspace.com/file/gbpbcc)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:42:13.063

在您使用 GD 库动态创建图像的 php 文件中，编写以下代码。

```
header("content-type:image/jpg"); 
```

或者，如果它是一个 png 图像，那么

```
header("content-type:image/png"); 
```

从代码来看，它似乎是一个 jpg 文件。但是你应该知道格式。

基本上这是php文件而不是灯箱的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T21:04:34.853

在我做一些随机任务之后才得到这个。在我尝试将它们加载到灯箱中之前，无法看到为什么图像显示正常，结果是 html 属性在文件名的末尾有非显示字符。

```
<a href="image1.jpg"><img src="image1.jpg" /></a> 
```

已经变成：

```
<a href="image1.jpg
"><img src="image1.jpg
" /></a> 
```

修剪文件名（在我的例子中使用 PHP 的 trim() 函数）以删除这些错误字符使其行为正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-03T15:41:56.393

您必须更新 colorbox js 文件，如下所示：

```
photoRegex: /\.(gif|jfif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,
```

# iphone - 从 iCloud 获取应用程序列表

> ID：10683704
> 
> 赞同：2
> 
> 时间：2012-05-21T10:38:07.880
> 
> 标签：iphone, ipad, ios5, icloud, icloud-api

有没有办法以编程方式获取 iCloud 中的应用程序列表？我只需要获取应用程序列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:32:57.117

不，Apple 的沙盒会阻止您访问用户已安装的支持 iCloud 的应用程序列表。

# matlab - Matlab importdata 忽略带有 txt 文件的分隔符和 nheaderlines

> ID：10683705
> 
> 赞同：2
> 
> 时间：2012-05-21T10:38:09.830
> 
> 标签：matlab, file-io

我有几个看起来像这样的 txt 文件：

```
Experiment ended at 5/8/12 10:00 AM
Number of Tunings 9
0 14.0 82 43.305 
1 34.142857142857146 95 23.432 
2 5.857142857142857 82 31.573 
3 37.42857142857143 83 22.387 
4 5.0 93 14.664 
...etc 
```

我想加载这些数据，以便忽略前两行，并且我得到基于空格的列作为分隔符，所以上面的内容将变为：

```
0  14.0                82  43.305 
1  34.142857142857146  95  23.432 
2  5.857142857142857   82  31.573 
3  37.42857142857143   83  22.387 
4  5.0                 93  14.664 
```

该功能`importdata(FILENAME, DELIM, NHEADERLINES)`声称可以做到这一点。然而，当我调用这个函数时，`importfile('pathtofile', ' ', 2)`我得到一个包含文件中所有字符的字符串，就像这样：

```
Experiment ended at 5/8/12 10:00 AM Number of Tunings 9 0 14.0 82 43.305 1 34.142857142857146 95 23.432 ...etc 
```

如何让 importdata 正确解析我的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:52:03.623

你也可以`dlmread`这样使用：

```
dlmread('filename.txt', ' ', 2, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:29:59.570

`>> help importdata has the following note:`

> 如果 importdata 识别出文件扩展名，它会调用 MATLAB 帮助函数，用于导入关联的文件格式。否则，importdata 会将文件解释为分隔的 ASCII 文件。

也许 .txt 触发 importdata 以将文件作为文本加载。但在我的 MATLAB 版本中，importdata 可以很好地处理名为 .txt 的文件中的示例数据。你用的是什么版本？

如果一切都失败了，您可以使用 MATLAB 内部的 copyfile 进行重命名

```
fname = 'sample.txt';
barename = regexprep(fname, '\.txt$', '');
copyfile(fname, barename);
importdata(barename, ' ', 2); 
```

# php - 将 javascript 变量传递给 php 变量的安全问题

> ID：10683706
> 
> 赞同：0
> 
> 时间：2012-05-21T10:38:35.463
> 
> 标签：php, javascript, database-security

> **可能的重复：**
> [防止欺诈性提交到记分牌](https://stackoverflow.com/questions/674201/preventing-fraudulent-submission-to-a-scoreboard)
> [防止在 Javascript 游戏中作弊](https://stackoverflow.com/questions/7171101/prevent-cheating-on-javascript-game)

我找到了一种通过使用以下方法将我的 javascript 变量传递给 php 变量的方法：

```
window.location.href = ".../gameover.php?points=" + points+"&speed="+window.speed; 
```

在`gameover.php`我使用的网站 中

```
$_GET[speed]   // and 
$_GET[points] 
```

访问我的变量。然后这些值作为 hiscores 存储到数据库中。但我的问题来了：如果用户只是输入例如

```
.../gameover.php?points=500000&speed=85 
```

在地址栏中，它还存储这些变量。

我发现了一些有助于避免这种情况的方法，但你仍然可以绕过它。在我的主页上，我创建了一个 cookie 'notcheatated'，如果用户访问该页面并且 notcheated isset 那么它会破坏 cookie 并将值存储在我的 hiscores 但如果用户访问主页然后输入上述地址例如然后cookie isset 但他还没有玩过游戏，然后这些值也会被存储。

有人有什么建议来保护我的网站，这样人们就不能只输入他们自己的 hiscores。

**编辑：**我曾尝试使用 javascript 帖子来做到这一点，但没有奏效。也许我做错了什么，有人可以给我举个例子来说明我应该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:48:09.473

防止这种情况的唯一方法是在服务器端，在您的 PHP 代码中执行游戏逻辑。如果您从客户端向服务器发送任何积分值，则用户可以作弊。

例子：

```
/sell.php?money=10 
```

可以通过将 10 更改为 1000000 来破解上述内容。相反，请考虑以下情况：

```
/sell.php?itemid=1234 
```

然后服务器将物品从玩家的库存中移除，并将适当数量的钱添加到他们的帐户中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:56:50.617

如果你的游戏完全基于 javascript，那么除了修补补丁外，几乎没有什么可以做的；高级用户将始终获得高分。

如果您的游戏不时发送一些 ajax（在游戏中），您可以获取这些信息并将它们放入**$_SESSION**中，因此也可以使用它们来更新游戏。如果在 ajax 调用之间发送了异常值，则用户以某种方式被黑客入侵。

最后，您可以使用那些**$_SESSION** -ed 值而不是有害的 URL。Cookies 也可以在用户的​​浏览器中被禁用，不要太依赖它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:00:40.223

您至少可以通过发送 POST 请求来限制高级用户可能作弊 - 地址栏中不会显示该请求：[https ://stackoverflow.com/a/133997/1106393](https://stackoverflow.com/a/133997/1106393)

```
function post_to_url(path, params, method) {
    method = method || "post"; // Set method to post by default, if not specified.

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
         }
    }

    document.body.appendChild(form);
    form.submit();
} 
```

但这是一个糟糕的解决方案，因为它也很容易伪造。

另一种解决方案是在发送之前对值进行编码。因此，它们的含义并不明显。查看 Google 中的“Javascript Base64 编码/解码”，例如：

```
value='1234'      // plain
value='MTIzNA=='  // base64-encoded 
```

可以在此处找到用于 base64 编码的 JavaScript 函数：[https ://stackoverflow.com/a/133997/1106393](https://stackoverflow.com/a/133997/1106393)

在服务器上，您将使用以下内容：

```
$speed = base64_decode($_POST['speed']); 
```

[http://www.php.net/manual/en/function.base64-decode.php](http://www.php.net/manual/en/function.base64-decode.php)

# c++ - 无法将大小 QMainWindow 设置为小于 200x100 像素

> ID：10683707
> 
> 赞同：0
> 
> 时间：2012-05-21T10:38:36.210
> 
> 标签：c++, qt, size, stylesheet, qmainwindow

目前我正在尝试使用 qss 样式表设置 QMainWindow 样式。它工作得很好，除了设置大小。我正在使用以下 qss 参数：宽度、高度、最小宽度、最小高度。样式表文件中的最大宽度、最大高度。不幸的是，无论我做什么，我都不能强制窗口小于 200x100 像素。在 ui 表单中，几何、sizePolicy、minimumSize 和 maximumSize 等属性没有定义，因为我想完全使用 qss 文件对其进行样式设置。我会很感激任何提示:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:42:35.403

将窗口的最小尺寸设置为 0。

```
window->setMinimumSize(QSize(0,0)); 
```

并且还将窗口的最大尺寸设置为一个很大的值，（1000,1000）就可以了。

```
window->setMaximumSize(QSize(1000,1000)); 
```

在您的表单（ui）中设置此属性。或者在上面的构造函数中。

现在您可以设置任何您希望的尺寸`css`，考虑到最小 0 尺寸和最大 1000 尺寸将使您可以自由设置几乎任何值`practically`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:34:17.143

注意：如果您想在单独的 UI/样式文件中定义整个 UI/样式，我建议检查 QML 和 QtQuick。对于传统的 QWidget 应用程序，我们尝试尽可能多地使用 Qt 样式表，但我们总是遇到一些限制（例如您不能从 Qt 样式表中设置大小策略）。

如果您的项目不是关键任务，我建议尝试 QML。它不像 QWidget 解决方案那样成熟，但在不久的将来会改进很多（尤其是使用 Qt5）。如果 QML 不是一个选项，那么您可能不得不不时在代码/QtDesigner 中设置一些参数。

QWidget + Qt 样式表也存在一些已知问题，例如 Mac OS X QAbstractButton 大小问题（例如：[QAbstractButton 样式表问题](https://bugreports.qt-project.org/browse/QTBUG-13050)- 要解决此问题，您必须修改 Qt 源代码或设置按钮的 setFlat() 参数）。

# html - HTML表格排序

> ID：10683712
> 
> 赞同：33
> 
> 时间：2012-05-21T10:38:52.660
> 
> 标签：html, sorting

所以基本上我正在运行一个 mysql 查询，该查询从我的数据库中获取数据并以易于阅读的布局显示给我的用户。

```
Name-----Address----Sales Person 
```

你明白要点了。现在我想让用户按销售人员对 html 表进行排序。我如何使用下拉菜单轻松做到这一点？

```
<div class='menu'>
  <ul>
    <li><a href='#'><span>Sales Person</span></a>
      <ul>
        <li><a href='#'><span>Melissa</span></a></li>
        <li><a href='#'><span>Justin</span></a></li>
        <li><a href='#'><span>Judy</span></a></li>
        <li><a href='#'><span>Skipper</span></a></li>
        <li><a href='#'><span>Alex</span></a></li>
      </ul>
    </li>
  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-21T10:46:07.163

检查您是否可以使用下面提到的任何 JQuery 插件。简直太棒了，并提供了广泛的工作选项，并且减少了集成的痛苦。:)

[https://github.com/paulopmx/Flexigrid](https://github.com/paulopmx/Flexigrid) - Flexgrid
[http://datatables.net/index](http://datatables.net/index) - 数据表。
[https://github.com/tonytomov/jqGrid](https://github.com/tonytomov/jqGrid)

如果没有，您需要有一个链接到那些调用服务器端脚本来调用排序的表头。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2019-04-17T15:13:57.820

这是另一个图书馆。

所需的更改是 -

1.  添加排序表js

2.  将类名添加`sortable`到表中。

单击**表格标题**以对表格进行相应的排序：

```
<script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>

<table class="sortable">
  <tr>
    <th>Name</th>
    <th>Address</th>
    <th>Sales Person</th>
  </tr>

  <tr class="item">
    <td>user:0001</td>
    <td>UK</td>
    <td>Melissa</td>
  </tr>
  <tr class="item">
    <td>user:0002</td>
    <td>France</td>
    <td>Justin</td>
  </tr>
  <tr class="item">
    <td>user:0003</td>
    <td>San Francisco</td>
    <td>Judy</td>
  </tr>
  <tr class="item">
    <td>user:0004</td>
    <td>Canada</td>
    <td>Skipper</td>
  </tr>
  <tr class="item">
    <td>user:0005</td>
    <td>Christchurch</td>
    <td>Alex</td>
  </tr>

</table>
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-07-17T16:09:14.327

我在浏览器中对 HTML 表格进行排序的方式是使用纯朴的 Javascript。

基本流程是：

1.  为每个表头添加一个点击处理程序
2.  点击处理程序记录要排序的列的索引
3.  表格被转换为数组数组（行和单元格）
4.  该数组使用 javascript 排序函数进行排序
5.  排序数组中的数据被插入回 HTML 表中

当然，该表应该是漂亮的 HTML。像这样的东西...

```
<table>
 <thead>
  <tr><th>Name</th><th>Age</th></tr>
 </thead>
 <tbody>
  <tr><td>Sioned</td><td>62</td></tr>
  <tr><td>Dylan</td><td>37</td></tr>
  ...etc...
 </tbody>
</table> 
```

所以，首先添加点击处理程序......

```
const table = document.querySelector('table'); //get the table to be sorted

table.querySelectorAll('th') // get all the table header elements
  .forEach((element, columnNo)=>{ // add a click handler for each 
    element.addEventListener('click', event => {
        sortTable(table, columnNo); //call a function which sorts the table by a given column number
    })
  }) 
```

这现在不起作用，因为`sortTable`在事件处理程序中调用的函数不存在。

让我们写...

```
function sortTable(table, sortColumn){
  // get the data from the table cells
  const tableBody = table.querySelector('tbody')
  const tableData = table2data(tableBody);
  // sort the extracted data
  tableData.sort((a, b)=>{
    if(a[sortColumn] > b[sortColumn]){
      return 1;
    }
    return -1;
  })
  // put the sorted data back into the table
  data2table(tableBody, tableData);
} 
```

所以现在我们解决了问题的核心，我们需要创建函数`table2data`来从表中取出数据，并`data2table`在排序后将其放回原处。

他们来了 ...

```
// this function gets data from the rows and cells 
// within an html tbody element
function table2data(tableBody){
  const tableData = []; // create the array that'll hold the data rows
  tableBody.querySelectorAll('tr')
    .forEach(row=>{  // for each table row...
      const rowData = [];  // make an array for that row
      row.querySelectorAll('td')  // for each cell in that row
        .forEach(cell=>{
          rowData.push(cell.innerText);  // add it to the row data
        })
      tableData.push(rowData);  // add the full row to the table data 
    });
  return tableData;
}

// this function puts data into an html tbody element
function data2table(tableBody, tableData){
  tableBody.querySelectorAll('tr') // for each table row...
    .forEach((row, i)=>{  
      const rowData = tableData[i]; // get the array for the row data
      row.querySelectorAll('td')  // for each table cell ...
        .forEach((cell, j)=>{
          cell.innerText = rowData[j]; // put the appropriate array element into the cell
        })
    });
} 
```

那应该这样做。

您可能希望添加的几件事（或您可能希望使用现成解决方案的原因）：更改排序方向和类型的选项，即您可能希望对某些列进行数字排序（`"10" > "2"`是错误的，因为它们' 是字符串，可能不是你想要的）。将列标记为已排序的能力。某种数据验证。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-08-02T08:02:26.780

另一种对 HTML 表格进行排序的方法。（基于**[W3.JS HTML 排序](https://www.w3schools.com/w3js/w3js_sort.asp)**）

```
let tid = "#usersTable";
let headers = document.querySelectorAll(tid + " th");

// Sort the table element when clicking on the table headers
headers.forEach(function(element, i) {
  element.addEventListener("click", function() {
    w3.sortHTML(tid, ".item", "td:nth-child(" + (i + 1) + ")");
  });
});
```

```
th {
  cursor: pointer;
  background-color: coral;
}
```

```
<script src="https://www.w3schools.com/lib/w3.js"></script>
<link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet" />
<p>Click the <strong>table headers</strong> to sort the table accordingly:</p>

<table id="usersTable" class="w3-table-all">
  <!--     
  <tr>
    <th onclick="w3.sortHTML('#usersTable', '.item', 'td:nth-child(1)')">Name</th>
    <th onclick="w3.sortHTML('#usersTable', '.item', 'td:nth-child(2)')">Address</th>
    <th onclick="w3.sortHTML('#usersTable', '.item', 'td:nth-child(3)')">Sales Person</th>
  </tr> 
  -->
  <tr>
    <th>Name</th>
    <th>Address</th>
    <th>Sales Person</th>
  </tr>

  <tr class="item">
    <td>user:2911002</td>
    <td>UK</td>
    <td>Melissa</td>
  </tr>
  <tr class="item">
    <td>user:2201002</td>
    <td>France</td>
    <td>Justin</td>
  </tr>
  <tr class="item">
    <td>user:2901092</td>
    <td>San Francisco</td>
    <td>Judy</td>
  </tr>
  <tr class="item">
    <td>user:2801002</td>
    <td>Canada</td>
    <td>Skipper</td>
  </tr>
  <tr class="item">
    <td>user:2901009</td>
    <td>Christchurch</td>
    <td>Alex</td>
  </tr>

</table>
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2019-02-17T10:44:11.700

使用 flexbox 属性“order”可以轻松地对基于 Flexbox 的表进行排序。

这是一个例子：

```
function sortTable() {
  let table = document.querySelector("#table")
  let children = [...table.children]
  let sortedArr = children.map(e => e.innerText).sort((a, b) => a.localeCompare(b));

  children.forEach(child => {
    child.style.order = sortedArr.indexOf(child.innerText)
  })
}

document.querySelector("#sort").addEventListener("click", sortTable)
```

```
#table {
  display: flex;
  flex-direction: column
}
```

```
<div id="table">
  <div>Melissa</div>
  <div>Justin</div>
  <div>Judy</div>
  <div>Skipper</div>
  <div>Alex</div>
</div>
<button id="sort"> sort </button>
```

**解释**

该`sortTable`函数将表的数据提取到一个数组中，然后按字母顺序排序。之后，我们循环遍历表项并分配 CSS 属性`order`等于排序数组中项数据的索引。

# python - （Python C API）PyRun_StringFlags 缺少内置函数？

> ID：10683713
> 
> 赞同：10
> 
> 时间：2012-05-21T10:38:58.363
> 
> 标签：python, python-c-api, python-embedding

我正在尝试在我的宠物项目中嵌入一些 python。我已将问题简化为以下代码：

```
#include <Python.h>
#include "iostream"

int main(int argc, char *argv[])
{
    Py_Initialize();

    PyObject *globals = Py_BuildValue("{}");
    PyObject *locals = Py_BuildValue("{}");

    PyObject *string_result = PyRun_StringFlags(
        "a=5\n"
        "s='hello'\n"
        "d=dict()\n"
        ,
        Py_file_input, globals, locals, NULL);
    if ( PyErr_Occurred() ) {PyErr_Print();PyErr_Clear();return 1;}
    return 0;
} 
```

（我知道我没有清理任何参考资料。这是一个例子。）

它可以编译为

```
c++ $(python-config --includes) $(python-config --libs) test.cpp -o test 
```

如果我运行它，我会收到以下错误：

```
$ ./test 
Traceback (most recent call last):
  File "<string>", line 3, in <module>
NameError: name 'dict' is not defined 
```

似乎未加载内置函数。我也`import`无能为力。我知道那`__import__`是缺失的。如何加载缺少的模块或我缺少的任何东西？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-21T11:10:45.087

单程：

```
g = PyDict_New();
if (!g)
    return NULL;

PyDict_SetItemString(g, "__builtins__", PyEval_GetBuiltins()); 
```

然后传递`g`为`globals`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T22:56:48.917

`__main__`您还可以在模块命名空间内执行代码：

```
PyObject *globals = PyModule_GetDict(PyImport_AddModule("__main__"));
PyObject *obj = PyRun_String("...", Py_file_input, globals, globals);
Py_DECREF(obj); 
```

这实际上是[`PyRun_SimpleStringFlags`](http://hg.python.org/cpython/file/tip/Python/pythonrun.c#l1457)内部所做的。

# regex - 如何排除字符串

> ID：10683718
> 
> 赞同：0
> 
> 时间：2012-05-21T10:39:13.137
> 
> 标签：regex

我想从消息中排除字符串“VSS”

> VSS 编写器内存不足

我用于模式匹配的正则表达式是

```
[O,o]ut of [M,m]emory 
```

但如果 VSS 出现在消息中，我想排除整个消息。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:43:38.697

您可以使用否定的[前瞻断言](http://www.regular-expressions.info/lookaround.html)来解决此问题：

```
(?i)^(?!.*VSS).*out of memory 
```

**解释：**

```
(?i)           # Make the regex case-insensitive
^              # Match the start of the string
(?!.*VSS)      # Assert that there is no "VSS" in the string
.*             # Match any number of characters
out of memory  # Match "out of memory" 
```

顺便说一句，`[O,o]`匹配 an `O`， an`o` ***或 a`,`***，所以这可能不是你的意思。

# apache - .htaccess 错误

> ID：10683725
> 
> 赞同：0
> 
> 时间：2012-05-21T10:39:45.600
> 
> 标签：apache, .htaccess

htaccess 在我的一个站点中，但是当我尝试使用[http://www.online4movies.com/](http://www.online4movies.com/)打开站点时出现有趣的错误，它不起作用，如果我不使用[http://online4movies.com/](http://online4movies.com/)它起作用

这是代码

```
<ifmodule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^www.online4movies.com
    RewriteRule (.*) http://www.online4movies.com/$1 [R=301,L]
    RewriteCond %{request_filename} -f
    RewriteRule ^(.*) $1 [L]
    RewriteRule ^([a-z]+)(/([^/]{0,32})(/.+)?)?$  index.php?a=$1&q=$3    [L]

</ifmodule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:46:06.730

上述规则有几处错误，但真正导致您出现问题的是您`!`在第一个的正确操作数前面忘记了 a `RewriteCond`。

其他错误的事情包括：

*   点`.`必须被转义才能在正则表达式中具有其字面意义，这就是第二个参数`RewriteCond`。
*   `(.*)`如果你包括在内会更安全`^$`
*   `request_filename`应该大写
*   将 URL 重写为自身是令人困惑且不必要的，只需将`-`其作为第二个参数传递给`RewriteRule`。但是不需要该规则，只需将其取反`RewriteCond`并将其应用于下一条规则即可。

试试这个文件：

```
<ifmodule mod_rewrite.c>

    # Turn mod_rewrite on
    RewriteEngine on

    # Force a www on the beginning of the URL
    RewriteCond %{HTTP_HOST} !^www\.online4movies\.com
    RewriteRule ^(.*)$ http://www.online4movies.com/$1 [R=301,L]

    # Parse URLs for files that don't exist and send them through index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^([a-z]+)(/([^/]{0,32})(/.+)?)?$  index.php?a=$1&q=$3 [L]

</ifmodule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:45:15.887

我发现了一些与同一问题相关的东西..

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^my-domain\.com$ [NC]
RewriteRule ^(.*)$ http://my-domain.com/$1 [R=301,L] 
```

“或者”

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

链接：-[通用 htaccess 将 www 重定向到非 www](https://stackoverflow.com/questions/234723/generic-htaccess-redirect-www-to-non-www)

# ef-code-first - EF 4.3 Code First Migrations __MigrationHistory 表中存储的压缩模型是如何创建的？

> ID：10683726
> 
> 赞同：5
> 
> 时间：2012-05-21T10:39:57.583
> 
> 标签：ef-code-first, entity-framework-4.3, entity-framework-migrations

我正在使用 Code First Migrations (Entity Framework 4.3)，我想获得当前模型的压缩二进制版本，以便我可以手动将其与`__MigrationHistory`表中存储的最新模型（或我拥有的模型进行比较）存储在文本文件中）。

~~有这种`EdmMetadata.TryGetModelHash()`方法，但它被标记为已弃用，如果可能的话，我想避免它（出于面向未来的原因）。~~

我将如何在 EF 4.3 下执行此操作？

**编辑：**通过更多调查和[Pawel 回答](https://stackoverflow.com/a/10694348/43140)中的信息，我发现该字段不再存储哈希，而是模型的压缩二进制表示。这就是我想要创造的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T00:28:52.520

`__MigrationHistory`表不再包含模型的哈希。相反，它现在包含压缩形式的模型。此外，验证模型是否更改不再依赖于仅比较哈希值，因为迁移需要“知道”发生了什么变化以及它是如何变化的。

`EdmMetadata`是在 4.3/5.0 中将迁移集成到 Entity Framowork 之前使用的表，不会在 EF 4.3+ 创建的数据库中创建。您还可以在此处找到一些其他详细信息：http: [//blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)

# javascript - 休息 POST 请求给出未知错误？

> ID：10683729
> 
> 赞同：0
> 
> 时间：2012-05-21T10:40:11.663
> 
> 标签：javascript, jquery, ajax, xml, exist-db

我正在使用 jQuery ajax 从 javascript 向 eXist db 发送 REST POST 请求。在 eXist db 中，我创建了一个名为“test”的集合，现在我从 html 页面获取输入并在通过 POST 请求发送 XML 之后将它们转换为 XML。

这是我的示例代码

```
<HTML>
<body> <script type="text/javascript" src="../jquery-1.7.2.js"></script>
<script type="text/javascript" >

function OnSubmitForm()
{
    var Ip = document.myForm.ip.value;
    var Type = document.myForm.type.value;

if(!((Ip=="" )|| (Ip==null)))
{    
 var re = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;

            var stringText="<?xml version='1.0' encoding='utf-8'?> ";       
            stringText+="\n<Configuration>\n<IP>"+Ip+"</IP>";

            stringText+="\n<Type>"+Type+"</Type>\n</Configuration>";

            var url = "http://localhost/exist/rest//db/test/";
            var ajax = new XMLHttpRequest();
            jQuery.support.cors = true;
            $.ajax({
                url: url ,
                async: false,
                type: 'POST',
                contentType: "application/xml",
                username: 'admin',
                password:'' ,
                data: stringText,
                success: function(msg) 
                {
                  alert(msg);
                },
                error: function(request, msg, error) 
                {
                 alert(error);
                }
           });
    return true;
   }
};

</script>
<form name="myForm" onsubmit="return OnSubmitForm();">
<table cellspacing="2" cellpadding="2" border="1">
 <tr>
  <td align="right">IP or IP's</td>
  <td><input type="text" name="ip" /></td>
 </tr>

 <tr>
  <td align="right">Type</td>
  <td><input type="text" name="type" /></td>
 </tr>
 <tr>
  <td align="right"></td>
  <td><input type="submit" value="Submit" /></td>
 </tr>
 </table>
</form>
</body>
</HTML> 
```

但是，如果我提交表单，它会给出错误，例如

“未知+XML+根+元素%3A+配置”

这是什么错误？我怎样才能将这个xml存储在db中？请回答。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:52:24.780

你失踪了 > 在

```
stringText+="\n<Type>"+Type+"</Type\n</Configuration>"; 
```

# servicestack - 要删除的服务堆栈 arrayof

> ID：10683732
> 
> 赞同：1
> 
> 时间：2012-05-21T10:40:19.070
> 
> 标签：servicestack

我将我的 dto 定义为

```
[DataContract(Name = "Tuner", Namespace = "")]
public class TunerDto
{
     [DataMember(Name = "TunerName", Order = 1)]
    public string TunerName { get; set; }
} 
```

我正在返回一个论文数组，这些论文在正文中给出了我的 XML：

```
 <ArrayOfTuner>
    <Tuner>
       <Name>Test1</Name>
    </Tuner>
    ...

 </ArrayOfTuner> 
```

有没有办法用 Tuners 代替 ArrayOfTuner？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:35:34.297

您应该将数组包装在一个类中，这样您就可以添加一个`[CollectionDataContract]`属性来修改序列化输出：

```
[CollectionDataContract(ItemName = "Tuner")]
public class Tuners : List<TunerDto>
{
    public  Tuners() { }
    public  Tuners(IEnumerable<TunerDto> collection) : base(collection) { }
} 
```

# .net - 如何从数据库中更新 PetaPoco 模型？

> ID：10683738
> 
> 赞同：0
> 
> 时间：2012-05-21T10:40:34.190
> 
> 标签：.net, visual-studio-2010, orm, petapoco

我在我的 ASP.NET 4.0 项目中使用[PetaPoco Micro-ORM 。](http://www.toptensoftware.com/petapoco)

PetaPoco T4 模板 (Database.tt) 生成了一个文件 Database.cs。我想更改这个自动生成的文件的名称和位置，其中包含到数据库表的映射。因此，我将此文件复制到我的解决方案资源管理器的 APP_DATA 文件夹中，并将其重命名为 EmployeePOCO.cs。

问题是当我想从数据库中更新模型（EmployeePOCO.cs）时。每次我删除旧的 Database.cs 文件并使用 Database.tt 重新生成它。然后我将这个新的 Database.cs 文件复制到 APP_DATA 并将其重命名为 EmployeePOCO.cs。

有没有办法更新现有的 EmployeePOCO.cs 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T05:02:36.287

你为什么不把`Database.tt`with`PetaPoco.Core.ttinclude`和`PetaPoco.Generator.ttinclude`它本身复制进去`App_Data`呢？这样，您的 Database.cs 将在其中生成`App_Data`，您不必在文件夹之间复制粘贴。

进一步更改 T4 模板本身的名称更改它`EmployeePoco.tt`，您将拥有它对应的`EmployeePoco.cs`. 还要更改`RepoName`Database.tt 中的参数并将其值更改为`EmployeePoco`. 你应该很好去追求。

*可以说*，更好的方法是将一个新的类库项目添加到您的项目解决方案中，并将它的引用添加到您的 Web 项目中。类库应该包含所有这些数据访问代码（PetaPoco.cs 和其他 T4 模板以及其他数据访问类），而不是您的 App_Data 文件夹。您可以使用 PetaPoco 的存储库模式。

看看这篇博文：

[http://programmerdave.com/mvc3-petapoco-repository/](http://programmerdave.com/mvc3-petapoco-repository/)

您可以根据您的项目自定义此类，但这是一个很好的起点。

# asp.net-mvc-3 - 将自定义数据属性添加到 html MVC Razor 视图中 @Html.EditorFor 中的标记

> ID：10683741
> 
> 赞同：0
> 
> 时间：2012-05-21T10:41:03.503
> 
> 标签：asp.net-mvc-3, razor

我想为我的选择列表中的每个选项添加一个自定义数据属性，我可以使用 jQuery.data() 或 .attr() 来实现。

但是，我正在使用以下 html 帮助程序设置我的选择列表：

```
@Html.EditorFor(x => x.MySelect, MVC.Shared.Views.EditorTemplates.KeyValuePairSelectList, new { SelectListOptions = Model.MySelectList}) 
```

有没有办法在 EditorFor 的新{} 方法中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:34:57.577

我将尝试使用以下两种方法中的任何一种，

**1.使用自定义编辑器模板**

假设我们要将`MyModel`数组显示为下拉列表，并将属性`SomeProperty1`显示`SomeProperty2`为**<option>**元素中的**数据**属性。

 **```
 public class MyModel
    {
      public int Id { get; set; }
      public string Value { get; set; }
      public string SomeProperty1 { get; set; }
      public string SomeProperty2 { get; set; }
    }

  // CustomSelectList.cshtml (editor template)
  @model MyModel[]

  <select>
  @foreach (var i in Model)
  {
    <option name="@i.Id" data-attr-1="@i.SomeProperty1" data-attr-2="@i.SomeProperty2">@i.Value</option>
  }
  </select> 
```

**2\. 使用[模板化的 Razor 代理](http://haacked.com/archive/2011/02/27/templated-razor-delegates.aspx)**

```
 public static class RazorExtensions
    {
      public static HelperResult List<T>(this IEnumerable<T> items,
        Func<T, HelperResult> template)
      {
        return new HelperResult(writer =>
        {
          foreach (var item in items)
          {
            template(item).WriteTo(writer);
          }
        });
      }
    }

  // Model is MyModel[]
  <select>
  @Model.List(@<option name="@item.Id" data-attr-1="@item.SomeProperty1" data-attr-2="@item.SomeProperty2">@item.Value</option>)
  </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:45:43.423

我认为您可能需要拥有自己的编辑器扩展来执行此操作。**

# uitableview - 单元格视图上的水平滚动

> ID：10683742
> 
> 赞同：0
> 
> 时间：2012-05-21T10:41:03.737
> 
> 标签：uitableview, ios5, cell, horizontal-scrolling

我想在具有垂直滚动的表格视图内的单元格上进行水平滚动。我有那个应用程序：[http](http://www.realmacsoftware.com/clear/) ://www.realmacsoftware.com/clear/就像一个例子。在交互方面，我想做类似的事情。

你有一些想法，关于最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:42:40.940

您将必须创建一个自定义单元（使用 XIB）或以编程方式。然后在单元格中插入一个自定义 UIView 子类，并在该 UIView 上处理手势。抱歉，这看起来很复杂，但没有直接的内置方法可以做到这一点，除非您使用自己的 UIView 自定义单元格。

# java - 在休眠中多次调用插入？

> ID：10683745
> 
> 赞同：1
> 
> 时间：2012-05-21T10:41:14.080
> 
> 标签：java, hibernate

嗨，我有一个应用程序，我首先检查数据库表中的值，如果不存在，则生成一个新值并插入数据库，这个循环大约一百万次，我怎样才能加快速度？

在我的工人阶级中：-

```
session=HibernateSessionFactory.getSession();       
    for(----loop 

    i check

    i generate

    then:-

    MyTable myTable=new MyTable();
            myTable.setName("dasdas");
            myTable.setww("ss");
            myTable.setaa("daaasdas");

    hibernateRepositoy.save(dgCcno,session);

} 
```

保存方法我另一个类： -

```
 public void save(Object obj,Session session)  {       

            Transaction tx = null;
            try {
                tx = session.beginTransaction();
                session.saveOrUpdate(obj);
                session.flush();

                session.clear();
                tx.commit();
            }
            catch (HibernateException e) {
                e.printStackTrace();
                logger.error(e.getMessage(), e);            

                if(tx!=null){
                    tx.rollback();
                }
            } 
            catch (Exception e) {
                e.printStackTrace();

                logger.error(e.getMessage(), e);        

            }
        } 
```

我怎样才能加快速度，或者这是正确的方法？

补充：-我不能使用批量更新，我必须立即插入值，因为下一个选择查询中的值可能是相同的..然后必须从数据库中给出值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T10:51:55.467

*   不要每行使用一个事务，而是将所有内容（或至少重要的子集）包含在单个事务中
*   发出单个查询以一次验证多行的存在
*   遵循[参考文档的建议](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#batch-inserts)

# mysql - SQL 查询以显示对“总计”列的更改

> ID：10683748
> 
> 赞同：5
> 
> 时间：2012-05-21T10:41:22.973
> 
> 标签：mysql, sql

我有一个包含股票交易的表：

```
+------+----------------------+------------------+
| Item | Running Stock Total  | Transaction Time |
+------+----------------------+------------------+
| foo  | 4                    | 2012-05-12 11:07 |
| bar  | 3                    | 2012-05-12 10:42 |
| bar  | 3                    | 2012-05-12 9:42  |
| bar  | 2                    | 2012-05-11 15:42 |
| foo  | 3                    | 2012-05-11 10:02 |
| bar  | 3                    | 2012-05-10 13:44 |
...etc...
+------+----------------------+------------------+ 
```

即，每当库存发生任何事情时，都会在此表中创建一行 - 这可能意味着库存水平上升（订购新库存）、下降（已售出库存）或保持不变（重新定位库存）。

我需要创建一个 sql 查询，它只返回特定零件的库存水平实际发生变化的行，并且它需要在“库存增加”和“库存减少”列中显示变化。

即1`Item='bar'`

```
+------+-----------+------------+----------------------+------------------+
| Item | Stock Up  | Stock Down | Running Stock Total  | Transaction Time |
+------+-----------+------------+----------------------+------------------+
| bar  |      1    |     0      |  3                   | 2012-05-12 9:42  |
| bar  |      0    |     1      |  2                   | 2012-05-11 15:42 |
| bar  |      1    |     0      |  3                   | 2012-05-10 13:44 |
+------+-----------+------------+----------------------+------------------+ 
```

例2`Item='foo'`

```
+------+-----------+------------+----------------------+------------------+
| Item | Stock Up  | Stock Down | Running Stock Total  | Transaction Time |
+------+-----------+------------+----------------------+------------------+
| foo  |      1    |     0      |  4                   | 2012-05-12 11:07 |
| foo  |      2    |     0      |  3                   | 2012-05-11 10:02 |
+------+-----------+------------+----------------------+------------------+ 
```

所以像...

```
SELECT 
  Item, {xyz} as 'Stock Up', {abc} as 'Stock Down',  `Running Stock Total`, `Transaction Time`
FROM
  `StockTransactions`
WHERE
  `Item`='foo'
HAVING 
  ('Stock Up'>0 or 'Stock Down'>0) 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:19:20.770

```
SELECT   `Item`,
         `Stock Up`,
         `Stock Down`,
         `Running Stock Total`,
         `Transaction Time`

FROM (
  SELECT   `Item`,
           GREATEST(`Running Stock Total` - @`last_total`, 0) AS `Stock Up`,
           GREATEST(@`last_total` - `Running Stock Total`, 0) AS `Stock Down`,
           `Running Stock Total`,
           `Transaction Time`,
           @`last_total` := `Running Stock Total`
  FROM     `StockTransactions` JOIN (SELECT @`last_total` := 0) AS lt
  WHERE    `Item` = 'bar'
  ORDER BY `Transaction Time` ASC
) AS t

ORDER BY `Transaction Time` DESC 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/22939/1)上查看。`last_total`如果您对按事务时间升序排列的结果和额外的列感到满意，显然可以省略外部查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:40:38.107

我的解决方案基于以下假设工作​​，即`Transaction Time`每个`Item`.

我正在`row_number()`通过我创建的辅助视图模拟分析功能：

```
CREATE VIEW running_stock AS
SELECT s.item,s.running_total,s.transaction_dt,
  (SELECT count(*) FROM stock WHERE item=s.item
      AND transaction_dt <= s.transaction_dt) AS row_number
  FROM stock s
 ORDER BY 1, 4; 
```

视图到位后，您可以使用以下查询获得所需的结果：

```
SELECT c.item AS "Item",
  greatest(c.running_total - p.running_total, 0) AS "Stock Up",
  greatest(p.running_total - c.running_total, 0) AS "Stock Down",
  c.running_total AS "Running Total",
  c.transaction_dt AS "Transaction Time"
FROM running_stock c
LEFT JOIN running_stock p ON c.item = p.item
      AND p.row_number + 1 = c.row_number
WHERE c.row_number > 1
ORDER BY 1, 5; 
```

您可以在[SQL Fiddle](http://www.sqlfiddle.com/#!2/32afa/2)上使用此查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:12:17.263

我不知道您的 SQL 风格，但在 Oracle 中有一些`LAG()`分析`LEAD()`函数允许您访问结果集中上一行或下一行的列值。您可以使用`LAG()`查看先前结果和当前结果之间的差异，并确定是向上还是向下。您的 SQL 中是否有类似的内容？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:06:39.637

我会尝试设置一个包含旧股票价格的变量。首先按项目对表格进行排序，以便您可以单独处理每只股票的所有数据。

然后你可以说类似 int counter = 0; 十进制起始价格 = 0; 小数成本 = 0;

```
 var list = new List<Decimal>();
        Decimal[] positivePercentagesToTest = new Decimal[] { 1.02m, 1.03m, 1.04m, 1.10m, 100 };
        Decimal[] negativePercentagesToTest = new Decimal[] { 0.99m, 0.985m, 0.98m, 0.95m, 0.9m };

        for (int i = 0; i <= positivePercentagesToTest.Count() -1 ;i++ )
        {
            foreach (var s in stocks)
            {
                //if(s.Ticker == "BAC")
                {
                    if (counter == 0)
                    {
                        startingPrice = s.Open;
                    }
                    counter++;

                    var openPrice = s.Open;

                    if (openPrice > (startingPrice * positivePercentagesToTest[i]) || openPrice < (startingPrice * negativePercentagesToTest[i]))
                    {
                        //sell
                        //same as percentage gain
                        var percentage = openPrice/startingPrice - 1;

                        list.Add(Math.Round(percentage, 2));
                        counter = 0;
                    }

                }

            }

            var amount = list.Sum();
            var profitToAdd = new Profits();
            profitToAdd.Amount = amount; 
```

这是 C# 代码。如果你在 sql 中需要它，请告诉我。这只是我会使用的逻辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T10:58:42.067

一种解决方案可能是：

1.  使光标一次选择每一行
2.  检查值是否已更改，如果更改，请将信息插入 #temp 表
3.  从#temp 表中选择所有数据

如果您可以按顺序识别所有行，则可以使用 while 循环而不是游标。

# java - 如何检测此符号：Android 中的“￼”（虚线框中的 OBJ）

> ID：10683749
> 
> 赞同：0
> 
> 时间：2012-05-21T10:41:38.813
> 
> 标签：java, android, wordpress

我正在构建一个从 Wordpress 站点解析 XML 的应用程序。因为它经常在 Wordpress 上运行，所以使用的 HTML 实际上是作为文本的一部分存储在数据库中的，当我尝试删除 HTML 时，会出现这个符号：

￼</p>

不确定它是否会在此处正确显示，但它是虚线框中的一个小 OBJ 符号，每当 HTML 解析器尝试解析图像时，它就会出现在文本中。基本上，我想要检测何时发生这种情况并将其删除，但我无法在我的代码中检测到它。

我开始使用的 HTML 代码如下所示：

```
 05-21 11:26:05.402: I/System.out(6546): 
    <a id="dd_start"></a><p><strong><a href="http://movieboozer.com/wp-content/uploads/2012/05/the-avengers-poster.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2Fthe-avengers-poster.jpg','the-avengers-poster')"><img class="alignleft  wp-image-22470" style="margin-left: 10px; margin-right: 10px;" title="the-avengers-poster" src="http://movieboozer.com/wp-content/uploads/2012/05/the-avengers-poster.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2Fthe-avengers-poster.jpg','the-avengers-poster')" alt="" width="208" height="308" /></a>By: <a href="http://neauxreelidea.blogspot.com/" onclick="return TrackClick('http%3A%2F%2Fneauxreelidea.blogspot.com%2F','Bill+Arceneaux')">Bill Arceneaux</a> </strong><strong></strong><strong>(<a href="#verdict">A Toast</a>)<br /></strong><strong>Note: There is a rating embedded within this post, please visit this post to rate it.  </strong></p><p>I used to collect comic books. Yes, I admit it. I got swept up in the fantasy of characters with unique abilities beyond those of normal people, fighting over exaggerated villains in an effort to save their hometown, and in some cases, the world. I mostly focused on the Superman comics &#8211; during the period of time when he became pure energy (I was probably one of the few that liked that story arc) &#8211; but I certainly hadn’t chosen a side in the DC vs. Marvel fight. Why pigeonhole yourself to just one brand?<span id="more-22462"></span></p><p><a href="http://movieboozer.com/wp-content/uploads/2012/05/200px-Action_Comics_1.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2F200px-Action_Comics_1.jpg','200px-Action_Comics_1')"><img class="aligncenter size-full wp-image-22467" title="200px-Action_Comics_1" src="http://movieboozer.com/wp-content/uploads/2012/05/200px-Action_Comics_1.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2F200px-Action_Comics_1.jpg','200px-Action_Comics_1')" alt="" width="200" height="277" /></a></p><p style="text-align: center;">Never got my hands on that issue.</p><p>My collection eventually stopped &#8211; only a little more than a handful of issues remain. Was this just a passing fancy? I think, personally, I just yearned for something more; something to give the pages a new life in my eyes, without insulting my devotion to the mythology. In the last decade, we’ve seen movies that range from bastardized toy commercials to unique creative interpretations. But, have we seen the best that comic book movies can be?</p><p>If we haven’t yet, <em>The Avengers</em> might just be it. The culmination of millions of dollars in production budgets and years of origin stories, this story has HIGH expectations:</p><p>After finding his way out of a cosmic abyss (as seen in <em>Thor</em>), Loki (Tom Hiddleston) makes a play and captures the Tesseract (as seen in <em>Captain America: The First Avenger</em>) – a cube of energy that could prove dangerous if in the wrong hands – from S.H.I.E.L.D. (as seen in all previous Marvel Cinematic Universe films). Nick Fury (Samuel L. Jackson) is forced to restart the Avengers Initiative – a program to bring together Earth’s mightiest heroes – in a last ditch effort to get the cube back and stop Loki from leading an alien army.</p><p>Of course, this means that Fury must bring together a group of people who probably shouldn’t be in the same room together; Iron Man (Robert Downey Jr.), CaptainAmerica(Chris Evans), Dr. Bruce Banner AKA The Hulk (Mark Ruffalo), Thor (Chris Hemsworth), Black Widow (Scarlett Johansson) and Hawkeye (Jeremy Renner). Can these heroes put their difference aside and conquer their own inner problems in time to save the world?</p><p><strong>A Toast</strong></p><p>Have you ever had an awesome-gasm? … Did I just invent a new word to describe a movie?</p><p><a href="http://movieboozer.com/wp-content/uploads/2012/05/hulk.jpg" onclick="r....... 
```

这就是它之后的样子：

```
 05-21 11:26:05.585: I/System.out(6546): : Bill Arceneaux (A Toast)
   05-21 11:26:05.585: I/System.out(6546): Note: There is a rating embedded within this post, please visit this post to rate it.  
   05-21 11:26:05.585: I/System.out(6546): I used to collect comic books. Yes, I admit it. I got swept up in the fantasy of characters with unique abilities beyond those of normal people, fighting over exaggerated villains in an effort to save their hometown, and in some cases, the world. I mostly focused on the Superman comics – during the period of time when he became pure energy (I was probably one of the few that liked that story arc) – but I certainly hadn’t chosen a side in the DC vs. Marvel fight. Why pigeonhole yourself to just one brand?
   05-21 11:26:05.585: I/System.out(6546): ￼
   05-21 11:26:05.585: I/System.out(6546): Never got my hands on that issue.
   05-21 11:26:05.585: I/System.out(6546): My collection eventually stopped – only a little more than a handful of issues remain. Was this just a passing fancy? I think, personally, I just yearned for something more; something to give the pages a new life in my eyes, without insulting my devotion to the mythology. In the last decade, we’ve seen movies that range from bastardized toy commercials to unique creative interpretations. But, have we seen the best that comic book movies can be?
   05-21 11:26:05.585: I/System.out(6546): If we haven’t yet, The Avengers might just be it. The culmination of millions of dollars in production budgets and years of origin stories, this story has HIGH expectations:
   05-21 11:26:05.589: I/System.out(6546): After finding his way out of a cosmic abyss (as seen in Thor), Loki (Tom Hiddleston) makes a play and captures the Tesseract (as seen in Captain America: The First Avenger) – a cube of energy that could prove dangerous if in the wrong hands – from S.H.I.E.L.D. (as seen in all previous Marvel Cinematic Universe films). Nick Fury (Samuel L. Jackson) is forced to restart the Avengers Initiative – a program to bring together Earth’s mightiest heroes – in a last ditch effort to get the cube back and stop Loki from leading an alien army.
   05-21 11:26:05.589: I/System.out(6546): Of course, this means that Fury must bring together a group of people who probably shouldn’t be in the same room together; Iron Man (Robert Downey Jr.), CaptainAmerica(Chris Evans), Dr. Bruce Banner AKA The Hulk (Mark Ruffalo), Thor (Chris Hemsworth), Black Widow (Scarlett Johansson) and Hawkeye (Jeremy Renner). Can these heroes put their difference aside and conquer their own inner problems in time to save the world?
   05-21 11:26:05.589: I/System.out(6546): A Toast
   05-21 11:26:05.589: I/System.out(6546): Have you ever had an awesome-gasm? … Did I just invent a new word to describe a movie?
   05-21 11:26:05.589: I/System.out(6546): ￼
   05-21 11:26:05.589: I/System.out(6546): HULK SMASH EXPECTATIONS!
   05-21 11:26:05.589: I/System.out(6546): With a cast of characters and actors this big, you would think things might get a bit muddled. But, with lots of clever photography, editing and dialogue, everything works out. Each hero – even Hawkeye and Black Widow – gets time to shine. And I don’t just mean moments where they look pretty and badass; each hero has personality and conflict. We actually get a little bit of depth here! It could have easily been a dumb action film, but instead chose to be a really good comic book.
   05-21 11:26:05.589: I/System.out(6546): Marvel could’ve easily picked a team of hack writers and a yes man director to helm this project, expecting to make their money back on brand recognition alone. Instead, they picked a fan friendly writer/director who understands how the audience feels about these characters, and really delivered something special. Sure, the depth I described doesn’t go into superhero psychology levels, but it’s exactly where we need it to be. This really is just about perfect.
   05-21 11:26:05.589: I/System.out(6546): Create a Drink
   05-21 11:26:05.589: I/System.out(6546): At one point in the film, Loki is offered a drink. He turns it down, but that doesn’t mean you shouldn’t. Just for fun, come up with your own Loki inspired beverage (but be safe about it). Some people at the midnight screening I attended were dressed as their favorite characters; why not pay homage to them in liquid courage form?
   05-21 11:26:05.589: I/System.out(6546): Verdict
   05-21 11:26:05.589: I/System.out(6546): ￼
   05-21 11:26:05.589: I/System.out(6546): Comic book movies rarely get any better than this. This isn’t to knock the other superhero flicks coming out this year (they’ll probably be great for different reasons), but the bar has been reset. Maybe the genre should be split into comic book, graphic novel and one off categories, in an effort to better tell the good from the bad? All I know for sure is, I feel like dusting off my old Action Comics issues. 
```

我有一种感觉，这个问题可能与 java 一样多，因为它是 android 系统

谢谢你的帮助！

编辑：这是符号出现在 HTML 中的第一个位置：

```
<span id="more-22462"></span></p><p><a href="http://movieboozer.com/wp-content/uploads/2012/05/200px-Action_Comics_1.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2F200px-Action_Comics_1.jpg','200px-Action_Comics_1')"><img class="aligncenter size-full wp-image-22467" title="200px-Action_Comics_1" src="http://movieboozer.com/wp-content/uploads/2012/05/200px-Action_Comics_1.jpg" onclick="return TrackClick('http%3A%2F%2Fmovieboozer.com%2Fwp-content%2Fuploads%2F2012%2F05%2F200px-Action_Comics_1.jpg','200px-Action_Comics_1')" alt="" width="200" height="277" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:54:17.873

您可以使用[`Html.fromHtml`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)从 HTML 内容中检索可显示的样式文本。要从样式文本中删除图像信息，请使用以下代码：

```
public static Spanned removeImageSpanObjects(String inStr) {
    SpannableStringBuilder spannedStr = (SpannableStringBuilder) Html
            .fromHtml(inStr.trim());
    Object[] spannedObjects = spannedStr.getSpans(0, spannedStr.length(),
            Object.class);
    for (int i = 0; i < spannedObjects.length; i++) {
        if (spannedObjects[i] instanceof ImageSpan) {
            ImageSpan imageSpan = (ImageSpan) spannedObjects[i];
            spannedStr.replace(spannedStr.getSpanStart(imageSpan),
                    spannedStr.getSpanEnd(imageSpan), "");
        }
    }
    return spannedStr;
} 
```

# r - NA在R中从另一个数字中减去一个数字时出现

> ID：10683751
> 
> 赞同：0
> 
> 时间：2012-05-21T10:41:43.400
> 
> 标签：r

我在 R 中有以下格式的数据：

```
Col1 Col2 
1    1
2    1
4    0
0    0
2    2
.    .
.    .
.    . 
```

我正在使用以下脚本来计算每行中 Col1 和 Col2 之间的百分比差异。

```
temp <- matrix(numeric(),dim(data)[1],1)

for (i in 1:dim(data)[1])
{
 temp[i,1]<- ((data[i,1]-data[i,2)/data[i,1])*100
} 
```

出于某种原因，我的输出文件 (temp) 中有一些 NA。即使在 0-0 时，它们也会发生。有谁知道为什么它不只是产生 0 而不是 NA？一些 0-0 的总和产生 0 而不是 NA 所以我看不到任何真实的模式。

任何帮助将非常感激。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:51:26.437

您正在通过零错误进行经典除法。R 将其报告为`NaN`- 不是数字，这是正确的。

```
x <-structure(list(
  Col1 = c(1L, 2L, 4L, 0L, 2L), Col2 = c(1L, 1L, 0L, 0L, 2L)), 
  .Names = c("Col1", "Col2"), class = "data.frame", row.names = c(NA, -5L))

with(x, (Col2-Col1)/Col1)
[1]  0.0 -0.5 -1.0  NaN  0.0 
```

* * *

解决此问题的一种方法是在以下情况下使用`ifelse`返回零`Col==0`：

```
with(x, ifelse(Col1==0, 0, (Col2-Col1)/Col1))
[1]  0.0 -0.5 -1.0  0.0  0.0 
```

* * *

如果您不想使用`with`，请像这样编写代码（更详细但相同）：

```
ifelse(x$Col1==0, 0, (x$Col2-x$Col1)/x$Col1)
[1]  0.0 -0.5 -1.0  0.0  0.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:48:59.450

对于这些条目，您将除以零：

```
(0 - 0) / 0 
```

从数学上讲，这种除法的结果是[没有定义](http://en.wikipedia.org/wiki/Division_by_zero)的。为了表明这一点，R 评估`0/0`为[`NaN`](http://en.wikipedia.org/wiki/NaN)。

这是一次计算所有百分比的简洁方法，对于`Col1`和`Col2`都为零的条目返回零：

```
> data <- data.frame(Col1=c(1,2,4,0,2), Col2=c(1,1,0,0,2))
> pmax(100.0*(data$Col1-data$Col2)/data$Col1, 0, na.rm=T)
[1]   0  50 100   0   0 
```

# mysql - 在 UNION 查询中防止重复时增加字段

> ID：10683755
> 
> 赞同：0
> 
> 时间：2012-05-21T10:42:09.243
> 
> 标签：mysql

我有多个 SELECT 查询联合。复合主键可以防止重复，这就是我想要的。每当阻止从联合查询之一插入重复行时，是否有办法增加某个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:52:20.237

您可以使用`UNION ALL`保留重复项，然后将结果与外部查询分组：

```
SELECT a, b, c, COUNT(*)
FROM (
  SELECT a, b, c FROM ...
  UNION ALL
  SELECT a, b, c FROM ...
) AS t
GROUP BY a, b, c 
```

# android - 旋转后在屏幕上保留图像

> ID：10683764
> 
> 赞同：2
> 
> 时间：2012-05-21T10:42:58.307
> 
> 标签：android, imageview, rotation

我的应用程序生成一个 bitnap，它在创建后立即保存到磁盘。然后将其显示在图像视图中。我希望应用程序的 UI 能够旋转，但图像在旋转后无法恢复。我无法将它保存到捆绑包中以在旋转后恢复它。

如何将其保留在屏幕上？

# javascript - 如何调整 Jquery Mobile 中所有元素的大小以适合 iframe？

> ID：10683768
> 
> 赞同：0
> 
> 时间：2012-05-21T10:43:30.643
> 
> 标签：javascript, css, iframe, jquery-mobile, resize

我正在使用 jQuery Mobile 编写一个应用程序，该应用程序将在浏览器中充当本机移动应用程序的*预览*。

我打算将 webapp 放在一个 iframe 中，就像一个小型智能手机模拟。文本的易读性*并不*重要，重要的是颜色、图像和整体外观。

问题是在我们的网站中，预览区域很小`height="330" width="220"`（

我试图申请`font-size: 50%;`或`width: 220px; height: 330px;`在移动应用程序的正文中，但没有运气。元视口也没有帮助。

我的 iframe 是这样的：

```
<iframe id="webapp" frameborder="0" height="330" width="220"
  src="http://jquerymobile.com/demos/1.1.0/">​ 
```

我需要使 JQM webapp 更小或“缩小”，但找不到好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:12:11.130

经过一些顽固的研究，我找到了一种在 iframe 中缩小 webapp 的优雅方法。通过使用 CSS3 2D 变换：

```
transform:scale(0.5,0.5);
-ms-transform:scale(0.5,0.5); /* IE 9 */
-moz-transform:scale(0.5,0.5); /* Firefox */
-webkit-transform:scale(0.5,0.5); /* Safari and Chrome */
-o-transform:scale(0.5,0.5); /* Opera */ 
```

这种样式将使 iframe 缩小 50%。

缺点是只支持 IE9+，但这没关系，因为我们都讨厌 IE。对？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:02:15.747

你看过body { width: 220px; 高度：330px；和元视口标签？您实际上应该将其设置为 320x480，因为大多数屏幕都具有该分辨率。

# facebook - Silex/Symfony 应用程序可以运行，但在 Facebook 中不可用

> ID：10683771
> 
> 赞同：4
> 
> 时间：2012-05-21T10:43:34.087
> 
> 标签：facebook, symfony, silex

我有一个 Silex + Twig 应用程序在没有 iframe 的情况下在 Heroku 上运行得很好，但是当在 Facebook 中进行 iframe 时，它​​会引发异常。

> MethodNotAllowedHttpException：找不到“POST /”的路由：不允许方法（允许：GET）

Silex 是否有任何特殊的方式可以通过 Facebook 处理任何请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:49:03.967

如果您的应用程序在 facebook 中加载（在 iframe 中），第一个请求是 POST，而不是 GET。您的路线被定义为仅限获取。将其更改为`->method()`（或什至`->post()`，但我推荐方法），它会工作。

# javascript - JavaScript 中的“未定义 x 1”是什么？

> ID：10683773
> 
> 赞同：29
> 
> 时间：2012-05-21T10:43:38.010
> 
> 标签：javascript, arrays, oop, arguments

我正在根据[***这个博客条目***](http://perfectionkills.com/understanding-delete/)做一些小实验。

我正在 Google Chrome 的调试器中进行这项研究，困难的部分来了。

![这是什么鬼？！](../Images/33e8c971aa56d7d6ee88d45de9cd8517.png)

我知道我不能删除局部变量（因为它们不是对象属性）。我知道我可以从名为“arguments”的数组中“读出”传递给函数的所有参数。我什至知道我不能删除和数组的元素，只能实现具有**`array[0]`**未定义的值。

有人可以向我解释**`undefined x 1`**嵌入图像的含义吗？

当我覆盖函数**`foo`**以返回 时**`arguments[0]`**，我得到了通常和“正常”的未定义。

这只是一个实验，但看起来很有趣，有人知道**`undefined x 1`**指的是什么吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-21T10:46:40.280

这似乎是 Chrome 在数组（和*类似数组的*对象）中显示未初始化索引的新方法：

```
> Array(100)
[undefined × 100] 
```

这肯定比印刷`[undefined, undefined, undefined,...]`或以前更好。

虽然，如果只有一个`undefined`值，他们可以删除`x 1`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-30T14:00:52.453

较新版本的 Chrome 使用`empty`而不是`undefined`使差异更加清晰。

例如，`[,,undefined,,]`在 DevTools 控制台中输入会导致：

```
▼(4) [empty × 2, undefined, empty]
   2: undefined
   length: 4
  ▶__proto__: Array(0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T07:38:03.860

谷歌浏览器似乎选择使用这种表示法来显示[稀疏数组](http://books.google.com/books?id=6TAODdEIxrgC&pg=PA144&lpg=PA144&dq=sparse%20array%20definitive&source=bl&ots=obbpIWPuUG&sig=16mc9YQ6QNeaTFZ9YP704Mf5xSA&hl=en&sa=X&ei=NDFxUPPrDJOo8AS3s4GoDg&ved=0CC4Q6AEwAA#v=onepage&q=sparse%20array%20definitive&f=false)`undefined x n`。它将显示`[undefined, undefined]`它是否不是稀疏数组：

```
var arr = new Array(2);
console.log(arr);

var arr2 = [];
arr2[3] = 123;
console.log(arr2);

var arr3 = [,,,];
console.log(arr3)

var arr4 = [,];
console.log(arr4)

var arr5 = [undefined, undefined]
console.log(arr5)

var arr6 = [undefined]
console.log(arr6) 
```

arr1 到 arr4 都是稀疏数组，而 arr5 和 arr6 则不是。Chrome 会将它们显示为：

```
[undefined × 2] 
[undefined × 3, 123] 
[undefined × 3] 
[undefined × 1] 
[undefined, undefined] 
[undefined] 
```

注意`[undefined x 1]`稀疏数组的 。

由于您删除了一个元素，因此：[如果您从数组中删除一个元素，则该数组将变得稀疏。](http://books.google.com/books?id=6TAODdEIxrgC&lpg=PA144&ots=obbpIWPuUG&dq=sparse%20array%20definitive&pg=PA146#v=onepage&q=sparse%20array%20definitive&f=false)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-14T18:05:28.547

这是它的外观，将此代码键入 chrome devtools 控制台：-

```
arr = new Array(4);
arr[2] = "adf";
console.log(arr);    // [undefined × 2, "adf", undefined × 1] 
```

查看 *2 表示的前两个连续的“未定义”，表明那里有两个连续的未定义

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T22:22:45.063

它也发生在我身上。在另一个浏览器中打开相同的内容并将数组输出/记录到控制台。只要它在 crome 和 Firefox 中都以相同的方式工作（因为即使输出具有 undefinedx1，访问元素也能正常工作），我认为它是 Chrome 中的某种错误，不会在内部刷新某些内容。您实际上可以通过以下方式对其进行测试：

1.  我正在向数组中添加元素，并触发 console.log() 来记录元素，以检查它是否未定义。它们都被定义了。

2.  在 push() 之后，我记录了数组，似乎发生这种情况时，它始终是 Chrome 上未定义 x 1 的最后一个。

3.  然后我尝试了更多次和更晚的记录，但结果相同。

4.  但是，当我（为了输出）通过索引访问元素时，它返回了正确的值（有趣）。

5.  之后我再次记录了数组，它说最后一个索引是未定义的 x 1（我刚刚成功访问的那个索引！）。

6.  然后我在数组上做了一个 for 循环，记录或使用每个元素，一切都很好。

7.  然后在阵列上的另一个日志，仍然是错误的。

    我最初使用的代码检查了 undefined 并且它们没有触发，但是我在控制台中看到了所有这些 un​​defined 并且它困扰着我（不是双关语）。

还值得一读：[仅使用 Array.push 时数组中的单元化变量？](https://stackoverflow.com/questions/10763274/unitialized-variables-in-an-array-when-using-only-array-push)我在我的代码中也使用了 pop()，这是一个合理的解释，即控制台日志实际上代表了不同的时间状态（当代码“停止”时）。

# c++ - 如何在带有 Xcode 的 C++ 库中使用 __IPHONE_4_0 定义？

> ID：10683777
> 
> 赞同：3
> 
> 时间：2012-05-21T10:44:05.257
> 
> 标签：c++, ios5, static-libraries, native-code

我正在尝试为 iOS 应用程序开发 C++ 库。该库加载 GLES 和 OpenAL 函数。这个想法是用 C++ 开发一个库，并在 iOS 和 Android 中使用相同的代码（都作为本机编译）。我只使用 iOS 实现，并且我已经使用库完成了一个示例应用程序，并且我在库中有这个块：

```
#ifdef _IPHONE_4_0

    #warning "Including iPhone SDK 4.0 working here" // 编译警告被激活

    #include <OpenGLES/ES2/gl.h>
    #include <OpenGLES/ES2/gext.h>

    #include <OpenAL/al.h>
    #include <OpenAL/alc.h>

    ...

#elif __ANDROID_API_ // 安卓

    #warning "Including Android working here" // 编译警告未激活
        ...

＃万一

```

所以，问题出在“#ifdef _IPHONE_4_0”这句话上。如果我使用它，Xcode 找不到包含文件，但如果我评论所有*if* clausule（android 部分），Xcode 可以找到所有这些文件。

*#warning*语句显示编译器在编译时正在读取 iphone 部分（有和没有注释的行）。我是否需要以其他方式使用该定义？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:06:25.010

查看这篇文章[如何在 C 预处理器中可靠地检测 Mac OS X、iOS、Linux、Windows？](https://stackoverflow.com/questions/5919996/how-to-detect-reliably-mac-os-x-ios-linux-windows-in-c-preprocessor)

另外，据我所知，__IPHONE_4_0 宏仅在 iOS 4.0 SDK 中定义。因此，如果您使用的是其他版本的 SDK，该代码将无法正常工作。

另一种方法是在 Xcode 项目构建设置（“预处理器宏”字段）中定义您自己的宏，并将其命名为 IOS_BUILD，例如。它将在 Objective-c 和 c++ 代码中都可用

# java - 是否可以使用 Timer 为 JButton 创建淡入效果？

> ID：10683780
> 
> 赞同：3
> 
> 时间：2012-05-21T10:44:23.413
> 
> 标签：java, swing, jbutton, fadein

我想在我的程序按钮上添加一些效果。当我按下 时`button`，`button`应该淡入。

使用 a`timer`来更改`Opaque`in的值`new Color()`是一种方法，但它也可以应用于`JButton`吗？因为`JButton`有边界。

所以，我想问一下，是否可以为`JButton`使用 a创建淡入淡出效果`Timer`？

如果是，我可以举个例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T10:59:57.940

> 是否可以使用 Timer 为 JButton 创建淡入效果？

我认为这没有问题，

> 如果是，我可以举个例子吗？

为什么不

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.Color;
import java.awt.AlphaComposite;
import javax.swing.*;
import javax.swing.UIManager.LookAndFeelInfo;

public class ButtonTest {

    private JFrame frame;
    private JButton opaqueButton1;
    private JButton opaqueButton2;
    private SoftJButton softButton1;
    private SoftJButton softButton2;
    private Timer alphaChanger;

    public void createAndShowGUI() {
        opaqueButton1 = new JButton("Opaque Button");
        opaqueButton2 = new JButton("Opaque Button");
        softButton1 = new SoftJButton("Transparent Button");
        softButton2 = new SoftJButton("Transparent Button");
        opaqueButton1.setBackground(Color.GREEN);
        softButton1.setBackground(Color.GREEN);
        frame = new JFrame();
        frame.getContentPane().setLayout(new java.awt.GridLayout(2, 2, 10, 10));
        frame.add(opaqueButton1);
        frame.add(softButton1);
        frame.add(opaqueButton2);
        frame.add(softButton2);
        frame.setSize(700, 300);
        frame.setLocation(150, 100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        alphaChanger = new Timer(30, new ActionListener() {

            private float incrementer = -.03f;

            @Override
            public void actionPerformed(ActionEvent e) {
                float newAlpha = softButton1.getAlpha() + incrementer;
                if (newAlpha < 0) {
                    newAlpha = 0;
                    incrementer = -incrementer;
                } else if (newAlpha > 1f) {
                    newAlpha = 1f;
                    incrementer = -incrementer;
                }
                softButton1.setAlpha(newAlpha);
                softButton2.setAlpha(newAlpha);
            }
        });
        alphaChanger.start();
        Timer uiChanger = new Timer(3500, new ActionListener() {

            private final LookAndFeelInfo[] laf = UIManager.getInstalledLookAndFeels();
            private int index = 1;

            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    UIManager.setLookAndFeel(laf[index].getClassName());
                    SwingUtilities.updateComponentTreeUI(frame);
                    opaqueButton1.setText(laf[index].getClassName());
                    softButton1.setText(laf[index].getClassName());
                } catch (Exception exc) {
                    exc.printStackTrace();
                }
                index = (index + 1) % laf.length;
            }
        });
        uiChanger.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ButtonTest().createAndShowGUI();
            }
        });
    }

    private static class SoftJButton extends JButton {

        private static final JButton lafDeterminer = new JButton();
        private static final long serialVersionUID = 1L;
        private boolean rectangularLAF;
        private float alpha = 1f;

        SoftJButton() {
            this(null, null);
        }

        SoftJButton(String text) {
            this(text, null);
        }

        SoftJButton(String text, Icon icon) {
            super(text, icon);
            setOpaque(false);
            setFocusPainted(false);
        }

        public float getAlpha() {
            return alpha;
        }

        public void setAlpha(float alpha) {
            this.alpha = alpha;
            repaint();
        }

        @Override
        public void paintComponent(java.awt.Graphics g) {
            java.awt.Graphics2D g2 = (java.awt.Graphics2D) g;
            g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha));
            if (rectangularLAF && isBackgroundSet()) {
                Color c = getBackground();
                g2.setColor(c);
                g.fillRect(0, 0, getWidth(), getHeight());
            }
            super.paintComponent(g2);
        }

        @Override
        public void updateUI() {
            super.updateUI();
            lafDeterminer.updateUI();
            rectangularLAF = lafDeterminer.isOpaque();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:05:28.380

是的，这应该是可能的。您可以根据 alpha（或不透明度）指定颜色`RGBA`，`A`然后将此颜色（或具有相同 alpha 值的单独颜色，如果您愿意）应用到边框、背景和前景或 JButton。

```
button.setForeground( *colour* );
button.setBackground( *colour* );
button.setBorder( BorderFactory.createBevelBorder( BevelBorder.RAISED, *highlight colour*, *shadow colour* ) ); 
```

# asp.net - 如何使用 Radeditor 在 Asp.Net 中编辑模板？

> ID：10683784
> 
> 赞同：0
> 
> 时间：2012-05-21T10:44:34.703
> 
> 标签：asp.net, radeditor

我是一名软件开发人员，目前在 NCPL 工作。这里我有一个关于在不同位置编辑模板的问题。

我们有一个 ASP.net 软件，我们在其中多次向客户发送电子邮件。对于那些事件，我们选择模板并编辑其中的数据或图像并将其发送给我们的客户。这里的问题是我使用了一个 radeditor 组件并试图在其中插入一个模板。但无法以编程方式在不同位置编辑它。所以我请求您尽快解决我的问题。我还附上了演示图像供您参考。等待您的回复...

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:59:16.480

我不确定“但无法以编程方式在不同位置编辑它..”是什么意思

RadEditor 的内容区域是一个标准的可编辑 iframe/div，如果您能够使用可编辑 div 实现您的场景，您也可以使用 RadEditor 实现它。

# plone - Diazo: css:if-content 和 css:if-not-content 都匹配

> ID：10683786
> 
> 赞同：3
> 
> 时间：2012-05-21T10:44:38.477
> 
> 标签：plone, diazo

我在一个 Plone (4.2) 站点中使用 Diazo，在 rules.xml 文件中我有这样的东西（这是简化的，但我也测试了这个简化版本）。：

```
 <rules css:if-not-content=".add-post-link">
        <replace css:content="#content" css:theme="#document-content" />
    </rules>

    <rules css:if-content=".add-post-link">
        <drop css:content=".documentFirstHeading" />
    </rules> 
```

问题是“replace”和“drop”指令都被应用了，这意味着“css:if-content”和“css:if-not-content”两个条件都得到满足，即使它们是互补的，即一次只有一个应该为真。（顺便说一下，如果我切换两个“规则”指令的顺序，结果是一样的）

有人理解这种行为吗？这是一个错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:56:21.773

听起来像。请将其减少到一个最小的失败示例（最好是可以使用 diazorun 从命令行运行的示例）并将其发布到[https://dev.plone.org/](https://dev.plone.org/)上的错误跟踪器，并带有 diazo 标签，我会尝试看一看。

# android - 在现有的 Android 和 iOS 应用程序中嵌入 Flash 内容

> ID：10683793
> 
> 赞同：0
> 
> 时间：2012-05-21T10:45:25.263
> 
> 标签：android, ios, flash

我正在寻找一种在应用程序中嵌入 Flash 内容的方法（不是 Android 的 WebView，据我所知太慢了）。在花了一天时间寻找没有成功的解决方案后，我决定来这里询问是否有人对此有任何运气......我猜应该有可用的解决方案，但我可能错了。

请注意，我并不关心是否需要以某种方式处理/编译 SWF 以在自定义引擎中运行，这也可以。

有任何想法吗？谢谢。

**编辑**：我已经研究过 Adob​​e Air 并没有看到将内容嵌入到现有应用程序中的方法，有点希望在那里找到一些东西......

**编辑**：请注意，这是针对我公司的，因此付费解决方案也可以。

**编辑**：Scaleform 可能是一个解决方案，但我仍然需要对其进行评估并弄清楚许可证是多少。

# c++ - 所有公共方法都应该对应业务逻辑吗？

> ID：10683794
> 
> 赞同：0
> 
> 时间：2012-05-21T10:45:26.013
> 
> 标签：c++, oop

所有公共方法都应该对应业务逻辑吗？

*   如果**是**，如何处理两个对象需要在较低的设计层进行通信，从而需要一些非业务方法公开的情况？（或者这是反模式？）
*   如果**不是**，如何明确区分 public 和 business public 方法？

这些是我知道的选项：

*   创建业务逻辑接口（正如 Attila 和 ArjunShankar 建议的那样）
*   `#define BUSINESS`（在 C++ 中）然后用作`BUSINESS void myMethod()`- 不确定这是否是个好主意

还有其他可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:50:09.147

`public`只是意味着类外的代码可以访问（例如调用，if 方法）成员，它与业务逻辑无关。

如果您需要将对象的接口限制为使用它的某些代码，您可以让该类实现一个仅列出所需方法的接口，并通过该接口传递对象（即方法参数的类型是接口），所以对对象进行操作的代码只能访问所需的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:03:13.897

如果您的语言支持接口，您可以使用它来让它根据上下文公开不同的行为（如果您的语言支持多重继承，请使用它）：

```
Interface Kickable /* For 'business logic'.  */
  method kick (Direction)
  method dribble (Technique)

Interface PhysicsObject /* For collaboration with other objects.  */
  method collide_with (PhysicsObject)
  method fall (gravity)

Class Football Implements <Kickable, PhysicsObject> 
```

这很干净，因为没有人可以看到他们不应该看到的方法：

```
Football football = new Football ();
/* Let the physics engine deal with PhysicsObjects.  */
physics_engine.add (PhysicsObject (football));

/* Let players deal with it Kickables.  */
game.set_ball (Kickable (football)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:32:19.253

真的有可能知道哪些方法要在外部使用，哪些方法不应该？以我的经验，用于类之间内部通信的方法通常会随着用户需求的变化而以意想不到的方式使用。所以我首先建议编写好的单元测试来验证你的类的所有公共方法的行为。

话虽如此，C++ 中有一个成语可以实现您的目标，即 pimpl 成语：[为什么要使用“PIMPL”成语？](https://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used)

# javascript - createRange 函数在 IE 以外的其他浏览器中不起作用

> ID：10683795
> 
> 赞同：1
> 
> 时间：2012-05-21T10:45:33.423
> 
> 标签：javascript

我有一个文本框。当我写第一个 text 时，java script 函数会触发来检查它是否是一个数字。

对于 IE ，以下代码返回 -1 值，但其他浏览器不会提醒任何值。请帮我

```
var selected = document.selection.createRange();
var decInSel = selected.text.indexOf('.');
hasNegInSel  = selected.text.indexOf('-') != -1;
alert(decInSel); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:50:28.750

`document.selection.createRange()`仅是 IE < 9 ...您可以使用以下跨浏览器支持功能

```
function getSelectedText() {
  if (window.getSelection) {  // all browsers, except IE before version 9
    var selectionRange = window.getSelection ();                                        
    return selectionRange.toString();
  } else {
    if (document.selection.type == 'None') {
        return "";
    } else {
        var textRange = document.selection.createRange();
        return textRange.text;
    }
  }
} 
```

[参考这里](http://help.dottoro.com/ljefwsqm.php)

所以你的完整代码看起来像这样：

```
var selected = getSelectedText()
var decInSel = selected.indexOf('.');
hasNegInSel  = selected.indexOf('-') != -1;
alert(decInSel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T10:50:37.040

利用

> 窗口.getSelection()

[chrome是否支持document.selection？](https://stackoverflow.com/questions/7003784/does-chrome-supports-document-selection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:52:07.103

其他浏览器使用文本框`selectionStart`和`selectionEnd`属性。您可以使用以下方法在这些浏览器的文本框中获取选定的文本：

```
var input = document.getElementById("textBox");
var selectedText = input.value.slice(input.selectionStart, input.selectionEnd); 
```

# c# - ajaxtabcontainer 做完整的回发，如何控制它

> ID：10683802
> 
> 赞同：0
> 
> 时间：2012-05-21T10:45:58.203
> 
> 标签：c#, asp.net, ajax

我在 masterpage 中使用 scriptManager，因为每个内容页面都是 ajxify。

在内容页面中，我使用`UpdatePanel`并且一切正常，但是在我使用的内容页面的情况下`TabCOntainer`，每次当我从一个选项卡移动到另一个选项卡时，页面都是完整的回发。

在这里，我注意到一件事，当我`ScriptManager`从母版页中删除并在其中使用时，它`contentPage`可以`tabContainer`正常工作。

这种类型的条件有什么可能的解决方案？

**母版**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">

 <head id="Head1" runat="server">
 </head>

 <body>

   <form id="form1" runat="server">

  <asp:ScriptManager ID="ScriptManager1" runat="server">
   </asp:ScriptManager>

 <asp:UpdatePanel ID="UpdatePanel_Register" runat="server">
     <ContentTemplate>
        //Update Panel work at Master Page
      </ContentTemplate>
</asp:UpdatePanel>

           <asp:ContentPlaceHolder ID="showcase" runat="server">

            </asp:ContentPlaceHolder> 
```

**内容页**

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/MasterDashBoard.master" AutoEventWireup="true"
CodeFile="messages.aspx.cs" Inherits="messages" %>

  <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

  <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">

   <asp:UpdatePanel ID="UpdatePanel_msg" runat="server" >

      <ContentTemplate>

        <cc1:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" AutoPostBack="True"
                        OnActiveTabChanged="TabContainer1_ActiveTabChanged">

           <cc1:TabPanel runat="server" HeaderText="TabPanel1" ID="TabPanel1" ToolTip="Compose Message">

               <HeaderTemplate>
                                Compose
               </HeaderTemplate>

               <ContentTemplate>
                        Some Work

               </ContentTemplate>

   </cc1:TabPanel>

       <cc1:TabPanel runat="server" HeaderText="TabPanel2" ID="TabPanel2">

                <HeaderTemplate>
                                inbox
                </HeaderTemplate>

                 <ContentTemplate>
            SOme Work
                 </ContentTemplate>
        </cc1:TabPanel>

      </cc1:TabContainer>
    </ContentTemplate>
 </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:57:14.593

我有一个类似的用例和 set `UpdateMode="Conditional"`，`ChildrenAsTriggers="true"`并`AsyncPostbackTriggers`用于`ActiveTabChanged`事件。在`ActiveTabChanged`事件处理程序中，我切换包含控件的可见性并调用[`Update`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)相应的 UpdatePanel，最后调用周围的`UpdatePanel`。这还允许通过仅在需要时加载它们的内容来延迟加载选项卡。

```
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <asp:ScriptManagerProxy ID="ScriptManagerProxy1" runat="server">
    </asp:ScriptManagerProxy>
    <div>
        <asp:UpdatePanel ID="UpdTabContainer" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
            <ContentTemplate>
                <asp:TabContainer ID="TabContainer1" runat="server" AutoPostBack="true">
                    <asp:TabPanel ID="TabDeliveryControl" runat="server" HeaderText="Delivery-Control">
                        <HeaderTemplate>
                            <asp:Panel ID="PnlTabDeliveryControl" runat="server" ToolTip="Delivery-Control">
                                Delivery-Control
                            </asp:Panel>
                        </HeaderTemplate>
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <SVCS:SVCSDeliveryControl id="SVCSDeliveryControl" runat="server" Visible="false" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="TabContainer1" EventName="ActiveTabChanged" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </asp:TabPanel>
                    <asp:TabPanel ID="TabRepair" runat="server" HeaderText="Repair-Area" >
                        <HeaderTemplate>
                            <asp:Panel ID="PnlTabRepair" runat="server" ToolTip="Repair-Area">
                                Repair-Area
                            </asp:Panel>
                        </HeaderTemplate>
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel4" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <SVCS:SVCSRepair id="SVCSRepair" runat="server" Visible="false" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="TabContainer1" EventName="ActiveTabChanged" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </asp:TabPanel>
                    <asp:TabPanel ID="TabShipping" runat="server" HeaderText="Shipping" Visible="false">
                        <HeaderTemplate>
                            <asp:Panel ID="PnlTabShipping" runat="server" ToolTip="Shipping">
                                Shipping
                            </asp:Panel>
                        </HeaderTemplate>
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel5" runat="server" UpdateMode="Conditional">
                                <ContentTemplate>
                                    <SVCS:SVCSShipping id="SVCSShipping" runat="server" Visible="false" />
                                </ContentTemplate>
                                <Triggers>
                                    <asp:AsyncPostBackTrigger ControlID="TabContainer1" EventName="ActiveTabChanged" />
                                </Triggers>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </asp:TabPanel>
                </asp:TabContainer>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</asp:Content> 
```

# asp.net-mvc - 使用 asp.net mvc 时如何查找包含模板内容的 *.html 文件

> ID：10683812
> 
> 赞同：1
> 
> 时间：2012-05-21T10:46:43.623
> 
> 标签：asp.net-mvc, knockout.js

我在asp.net mvc3 中使用带有[external-template-engile的knockoutJS。](https://github.com/ifandelse/Knockout.js-External-Template-Engine)我将模板内容存储在 template.html 文件中，但它会创建 404 not found 错误，无法找到“template.html”文件。我猜这是因为 asp.net mvc 禁止直接访问 Views 文件夹下的特定视图文件，例如 localhost/home/template.html”如何解决这个 404 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:50:21.497

您是正确的，MVC 中视图文件夹中的 web.config 禁止所有文件请求。我不建议更改此设置。替代方法是将 html 文件放在远离视图文件夹的单独文件夹中。

或者，将您的模板文件创建为 .cshtml 文件，添加一个路由，例如“/templates”，然后路由到它。这将是我的首选。这是一个更好的 url，如果您希望将来使模板页面稍微动态化，您可以。

希望这可以帮助。

# internet-explorer-8 - raphael.js IE8透明描边

> ID：10683813
> 
> 赞同：4
> 
> 时间：2012-05-21T10:46:48.770
> 
> 标签：internet-explorer-8, transparency, raphael, vml

我创建了一个阳光明媚的天空，两个物体遵循随机透明路径`raphaël.js`：

[http://jsfiddle.net/vcX4U/1/](http://jsfiddle.net/vcX4U/1/)

这在所有适当的浏览器中都可以正常工作： ![好天空](../Images/a43477300131b2aeb72ac92813d9bb2f.png)

只有 IE8 - 由于 WinXP 用户，我必须支持 - 显示黑色路径和上方太阳光线上的翻转渐变（这不是关键）：

![坏天空](../Images/77acd812be4cf2b714284dfe6d0724d4.png)

我很确定这与`raphaël.js`将 VML 用于 IE6-8 和将 SVG 用于所有其他浏览器有关。但这可能是解释而不是解决方案...

想法？

编辑@amadan：感谢您的努力。但这会使飞机“坠毁”：

![在此处输入图像描述](../Images/7f36bcde6157bb6f1b67b2b6cb5fd645.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:22:41.953

现在只是部分解决方案，但是

```
var c = paper.path(route).attr({stroke:"transparent","opacity":"0.01"}); 
```

解决您的中风问题。稍后我会看看 ray 问题。

# eclipse - Liferay：使用 Liferay IDE 和自己的项目文件夹组织修复 eclipse 中的错误

> ID：10683817
> 
> 赞同：2
> 
> 时间：2012-05-21T10:47:21.970
> 
> 标签：eclipse, ide, liferay, liferay-ide

我想使用 Liferay IDE，但我不想将我的 portlet 放到`~/liferay-sdk/portlets/`文件夹中。可能吗？目前我在eclipse中得到错误：

```
No Liferay Plugin SDK configured on project CMS-portlet 
```

并且 Liferay SDK 的选择是空的。

![在此处输入图像描述](../Images/a3fe799ca114d82cbf1100739544c4a3.png)

当我将此 portlet 复制到`~/liferay-sdk/portlets/`文件夹时，一切正常。但这对我来说是没有办法的，我不想把我的项目放到 sdk-folder 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T22:43:41.363

I found the workaround thats work for me. Simple disable the Liferay SDK validaton:

![enter image description here](../Images/fb275c47f16efb46e221f0b89daa33ea.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:27:17.880

AFAIK 当前版本的 Liferay IDE 依赖于插件 sdk 的 ant 脚本集成，因此需要有可用的 ant 基础设施（这存在于 SDK 中）。

您可能对 maven 项目有更多的运气，但 Liferay IDE 并不直接支持它们，但是，您可以将它们与普通 eclipse 一起使用。此外，即使你没有使用 Maven，你也可以使用普通的 Eclipse。

# pdf - 如何将 rdlc 报告打印为双面打印，某些页面始终位于正面？

> ID：10683818
> 
> 赞同：1
> 
> 时间：2012-05-21T10:47:25.630
> 
> 标签：pdf, printing, report, rdlc

有什么方法可以确保 rdlc 报告中的页面始终打印在双面打印的正面？

我正在动态创建 rdlc，我尝试使用分页符，但我不想在 pdf 文件中有空白页。

# codeigniter - Codeigniter URL：如何在 URL 中显示 id 和文章标题

> ID：10683820
> 
> 赞同：3
> 
> 时间：2012-05-21T10:47:36.300
> 
> 标签：codeigniter, codeigniter-2, codeigniter-routing

请看以下链接结构

```
http://stackoverflow.com/questions/10672712/voting-system-like-stackoverflow 
```

在上面的链接中，`10672712`我猜是问题 ID，因为如果您检查以下链接，您将到达与上面相同的位置：

```
 http://stackoverflow.com/questions/10672712 
```

现在，如果您使用上面的链接，那么您会注意到在浏览器的地址栏中，该链接会自动在问题 ID 之后添加问题标题（作为 slug），并且它看起来就像上面的第一个链接一样。

我正在尝试使用 Codeigniter 创建一个基于文章的网站。要显示特定文章，我有一个如下所示的控制器：

```
function articles(){

    $id=$this->uri->segment(3);

    $this->load->model('mod_articles');
    $data['records']=$this->mod_articles->list_articles($id);
    $this->load->view('view_article',$data);
     } 
```

我的模型：

```
 function list_articles($id)

       $this->db->select('*');
        $this->db->from('cx_article');
        $this->db->join('cx_author', 'cx_author.author_id = cx_article.author_id');
        $this->db->where('article_id', $id); 
        $query = $this->db->get();

       if ($query->num_rows() > 0)
        { return $query->row_array();
        }
        else {return NULL;}

    } 
```

如果你点击这个->`localhost/my_base_url/my_controller/my_funtion/article_id`那么我的文章就会出现。现在我想要实现的是，如果有人点击`localhost/my_base_url/my_controller/my_funtion/article_id`我想在 article_id 之后自动将文章标题添加为 slug。（就像我上面给出的示例一样）

你能告诉我该怎么做吗？

谢谢：）

PS 在我的数据库表中，我有一个名为 的列`article_slug`，其中我将文章标题存储为 slug（例如：voting-system-like-stackoverflow）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T11:00:12.970

**控制器/my_controller.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class My_controller extends CI_Controller {

    function my_function($int_id = NULL, $str_slug = '') {

        $row = $this->db->get_where('cx_article', array('article_id' => $int_id))->row();

        if ($row and ! $str_slug) {

            $this->load->helper('url');

            $str_slug = url_title($row->title, 'dash', TRUE);
            redirect("my_controller/my_function/{$int_id}/{$str_slug}");

        }

        // Run the rest of the code here

    }

} 
```

在你的数据库中有一个 slug 列是没有意义的，因为你没有根据你的 slug 识别任何东西，它也不是唯一的。

# firefox - 为什么 firefox 不会在 redhat 5.6 上的 selenium 2 webdriver 下启动

> ID：10683834
> 
> 赞同：7
> 
> 时间：2012-05-21T10:49:03.400
> 
> 标签：firefox, selenium, webdriver, redhat

我想知道是否有人对我如何找出为什么我似乎可以通过 selenium webdriver 运行 Firefox 有任何想法。当我运行时会发生什么：

```
self.driver=webdriver.Firefox() 
```

我的桌面上有一个空白对话。我在 Redhat 5.6 上运行，我的 selenium 版本是 2.21.3。我尽可能地调试了代码，并且在 firefox_binary 模块中的以下代码出现空白对话框后，我可以确定代码冻结：

```
Popen([self._start_cmd, "-slient"], stdout=PIPE, stderr=STDOUT, env=self._filefox_env).wait() 
```

我打开了一个 cmd 提示符并手动运行了上述命令，并且没有出现这样的空白对话框。这会让我认为这不是 Firefox 错误。我找不到这个错误会出现在哪里。有任何想法吗？

**更新**

我安装了 centos 6 并安装了 firefox 10.0.6 和 selenium webdriver 使用该版本

**更新**

除了使用 centos 6，我还需要在 redhat 上解决这个问题，所以这里有更多细节和我发现的内容。我将为此提供赏金，因为它需要解决：

我对此进行了更多研究，发现问题出在使用 32 位库的 selenium 上。我在使用 Firefox ESR 10.0.6（64 位）的 Redhat Enterprise Linux Server 版本 5.6 (x86_64) 上有 selenium 版本 2.25.0。我更改了 firefoxBinary 类中的 _start_from_profile_path 方法，以查看问题出在哪里：

```
p=open("/tmp/ffoutput.txt", "w+")
Popen([self._start_cmd, "-silent"], stdout=p, stderr=STDOUT, env=self._firefox_env).communicate() 
```

我跟踪 /tmp/ffoutput.txt 我发现 selenium 正在尝试使用 32 位库：

```
Failed to dlopen /usr/lib/libX11.so.6
dlerror says: /usr/lib/libX11.so.6: wrong ELF class: ELFCLASS32 
```

此消息连续出现，Firefox 挂起并显示一个空白对话框。我用谷歌搜索了这个问题，发现有些人抱怨但没有解决方案（我尝试在移动 32 位库后将 64 位库软链接到 32 位库目录，但这导致 geko 崩溃，我尝试将连续错误发送到 /dev /null 但这没有解决任何问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T13:33:40.417

如果您指的是 Selenium 中报告的此问题 [http://code.google.com/p/selenium/issues/detail?id=2852](http://code.google.com/p/selenium/issues/detail?id=2852)

在 64 位 linux 发行版上的解决方法是发出以下命令：

```
sudo mv /usr/lib/libX11.so.6 /usr/lib/libX11.so.6.old
sudo ln -s /usr/lib64/libX11.so.6.3.0 /usr/lib/libX11.so.6 
```

这在我的盒子上对我有用。

# iphone - 无法获得过去的权限

> ID：10683836
> 
> 赞同：4
> 
> 时间：2012-05-21T10:49:04.560
> 
> 标签：iphone, ios, facebook-graph-api

我遇到的问题是登录后，然后在 Safari 中按 OKAY。

不能再进一步了！Safari 无法打开。 [https://m.facebook.com/dialog/permissions.request](https://m.facebook.com/dialog/permissions.request) （在 .plist 中我添加了正确的 URL 类型（fb[yourappid]host）

```
facebook = [[Facebook alloc] initWithAppId:@"myappId" 
                           urlSchemeSuffix:@"host" 
                               andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_likes", 
                        @"read_stream",
                        nil];

if (![facebook isSessionValid]) {
    [facebook authorize:permissions];
    [permissions release];
} 
```

登录后的登录界面图片：

![http://tinyurl.com/chc5urf](../Images/9ae39aa3604cf2da874a5584ceae55ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:20:21.220

阅读此内容并确保您`urlSchemeSuffix`以正确的格式编写

> urlSchemeSuffix 是附加到用于 SSO 的基本 URL 方案的小写字母字符串。例如，如果您的 facebook ID 是“350685531728”并且您将 urlSchemeSuffix 设置为
> “abcd”，则 Facebook 应用程序将期望您的应用程序绑定到
> 以下 URL 方案：“fb350685531728abcd”。如果您有多个 iOS 应用程序共享一个 Facebook 应用程序 ID（例如，如果您在同一个应用程序上有免费和付费版本）并且您希望对这两个应用程序使用 SSO，这将非常有用。为这两个应用程序提供不同的 urlSchemeSuffix 值将允许 Facebook 应用程序消除其 URL 方案的歧义，并始终将用户重定向回正确的应用程序，即使设备上同时安装了免费应用程序和应用程序。3.4.1 版支持 urlSchemeSuffix 和Facebook 应用程序的上方。如果用户安装了较旧版本的 Facebook 应用程序并且您的应用程序使用 urlSchemeSuffix 参数，则 SDK 将继续执行，就像设备上未安装 Facebook 应用程序一样，并将用户重定向到 Safari。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T12:55:46.750

直接在“信息”选项卡下的应用程序目标中检查 URL 类型部分，并检查如果您有 facebookID=1234，则 URLSchemes 是 fb1234。

根据 Xcode 版本，它将只是 Custom iOS Target 属性中的另一个字段，或者它将位于底部称为 URL 类型的不同部分中

# android - 在通话中显示信息

> ID：10683841
> 
> 赞同：16
> 
> 时间：2012-05-21T10:49:30.153
> 
> 标签：android, phone-call

我想在通话过程中在该屏幕上显示一些信息，例如天气信息或类似的 Facebook 更新，任何人都可以帮助我。

请参阅下面我想要的更新的屏幕截图。

![在此处输入图像描述](../Images/97b36a11ce5119e6688afeabf69dd22b.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-21T11:00:42.540

检查此[堆栈溢出答案](https://stackoverflow.com/questions/5948961/how-to-know-whether-i-am-in-a-call-on-android)。在该答案中，您可以看到一个显示不同调用状态的 toast。而不是那个 toast 制作一个自定义 toast 并通过该自定义 toast 显示您的更新。

如果您想显示活动而不是 toast，请在您的 CustomPhoneStateListener 中尝试此代码

```
 public class CustomPhoneStateListener extends PhoneStateListener {

      ActivityManager activityManager;
      Intent i1;
      public CustomPhoneStateListener(Context context) {
          super();
          this.context = context;
          i1 = new Intent(context, TelephoneyWithoutToastActivity.class);
          i1.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
      }

      @Override
      public void onCallStateChanged(int state, String incomingNumber) {
          super.onCallStateChanged(state, incomingNumber);

          switch (state) {
          case TelephonyManager.CALL_STATE_IDLE:
              //when Idle i.e no call
              Toast.makeText(context, "Phone state Idle", Toast.LENGTH_LONG).show();

              break;
          case TelephonyManager.CALL_STATE_OFFHOOK:

              //when Off hook i.e in call
              //Make intent and start your service here
              Toast.makeText(context, "Phone state Off hook", Toast.LENGTH_LONG).show();

              break;
          case TelephonyManager.CALL_STATE_RINGING:

              ActivityManager localActivityManager = (ActivityManager) this.context.getSystemService("activity");
              for (String str = ((ActivityManager.RunningTaskInfo) localActivityManager.getRunningTasks(1).get(0)).topActivity.flattenToString();; str = ((ActivityManager.RunningTaskInfo) localActivityManager.getRunningTasks(1).get(0)).topActivity.flattenToString()) {
                  if ((!str.contains("com.android.phone.InCallScreen")))
                      continue;
                  Log.d("IncomingCallPlus", "*****************************************************");   
                  context.startActivity(i1);
                  return;
              }    

          default:
              break;
          }
      }    
  } 
```

将此添加到您的活动中以激活默认呼叫屏幕上的触摸。

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL); 
```

此功能将触摸来电屏幕和弹出窗口

```
public void addInvitePopup(final String number, Context c) {

    //check if pref is ok with invite in call
    // if(!Preferences.getInstance(c.getInviteInCall())){return ; }
    // sets the WindowManager

    WindowManager wm = (WindowManager) c.getSystemService(Context.WINDOW_SERVICE);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        LayoutParams.WRAP_CONTENT,
        LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.TYPE_SYSTEM_ALERT |
        WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
        PixelFormat.TRANSLUCENT);
    params.x = 250;
    params.height = LayoutParams.WRAP_CONTENT;
    params.width = LayoutParams.WRAP_CONTENT;
    params.format = PixelFormat.TRANSLUCENT;
    final Context ct = c;

    params.gravity = Gravity.TOP;
    params.setTitle("Testing");

    LinearLayout ly = new LinearLayout(c);
    ly.setOrientation(LinearLayout.VERTICAL);

    Button inviteButton = new Button(c);
    inviteButton.setClickable(true);
    inviteButton.setBackgroundDrawable(c.getResources().getDrawable(R.drawable.ic_launcher));

    inviteButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "adding to blacklist..", Toast.LENGTH_LONG).show();
            v.setBackgroundDrawable(ct.getResources().getDrawable(R.drawable.images));
            v.setClickable(false);
            // sendMessage(v, number);

            //Track this event:
            //MixPanelTracking.setPropKeyValue(getApplicationContext(), null, null, "Add friend - During Call");
        }
    });

    inviteButton.setWidth(30);
    inviteButton.setHeight(30);
    //   inviteButton.setLayoutParams(WindowManager.LayoutParams.WRAP_CONTENT,
    //   WindowManager.LayoutParams.WRAP_CONTENT);

    ly.addView(inviteButton);

    wm.addView(ly, params);
    // wm.addView( inviteButton, params);
    Log.i("TTT", "after add view");
} 
```

在清单文件中添加此权限

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
```

# android - 在 PhoneGap 中处理后退按钮事件时“[undefined] 不是函数”

> ID：10683842
> 
> 赞同：2
> 
> 时间：2012-05-21T10:49:31.137
> 
> 标签：android, cordova, back-button

我正在尝试在[PhoneGap 文档](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)的帮助下使用后退按钮，并且[Override Android Backbutton 行为仅适用于 PhoneGap 的第一页](https://stackoverflow.com/questions/9631933/override-android-backbutton-behavior-only-works-on-the-first-page-with-phonegap)。

我的代码：

```
<script>
document.addEventListener("deviceready", onDeviceReady, false);
  function onDeviceReady() {
    alert("df");
        console.log("PhoneGap Ready!");
         document.addEventListener("backbutton", handleBackButton, false);
    }

    function handleBackButton() {
        console.log("Back Button Pressed!");
        alert("df");

    }
</script> 
```

但我得到这个错误：

> 05-21 16:00:03.248：E/Web 控制台（1615）：TypeError：表达式“PhoneGap.fireDocumentEvent”[未定义] 的结果不是函数。在未定义：1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T11:58:34.557

检查您是否为平台链接了正确的 phonegap-x.js，对于 android、iOS 等，javascript 代码是不同的。

在 Android 中按下后退按钮时，会触发事件“后退按钮”，因此如果您想返回导航历史记录，您应该将以下处理程序附加到它：

```
document.addEventListener("backbutton", function(e){
    e.preventDefault();
    navigator.app.backHistory();
}, true); 
```

# performance - Prolog - 普通规则是否比列表具有更好的性能？

> ID：10683843
> 
> 赞同：0
> 
> 时间：2012-05-21T10:49:44.303
> 
> 标签：performance, prolog, dcg

我有一套 DCG 规则（在这种情况下是德语人称代词）：

```
% personal pronoun (person, case, number, genus)
ppers(1,0,sg,_) --> [ich].
ppers(1,1,sg,_) --> [meiner].
ppers(1,2,sg,_) --> [mir].
ppers(1,3,sg,_) --> [mich].
ppers(2,0,sg,_) --> [du].
ppers(2,1,sg,_) --> [deiner].
ppers(2,2,sg,_) --> [dir].
ppers(2,3,sg,_) --> [dich].
... 
```

因为它们在语义上是相连的，所以通过将它们移动到列表中（例如按人分组）而不是不相关的规则来保留这些信息对我来说是有意义的。这也使事情变得更整洁：

```
ppers(1,sg,_,[ich, meiner, mir, mich]).
ppers(2,sg,_,[du,deiner,dir,dich]).
... 
```

然后我会选择我想要的项目，我`nth0()`需要的案例是列表中的索引。

但是，我在跟踪程序时注意到，在检查德语句子的语法是否正确并尝试查找某个部分是否是人称代词时，当我使用上层版本（普通规则）时，Prolog 不会遍历每个实例，但是当我使用下面的列表版本时，将浏览每个列表。

这是否意味着如果我使用列表和 nth0 与普通规则相比，性能会更差？还是 Prolog 跟踪器没有像对列表那样显示对普通规则的爬行？

（我希望我可以使我的问题足够明显，否则我会扩展。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T13:08:13.393

很可能速度和跟踪差异不是由索引（*）引起的，而是由子句头部统一和主体调用 nth 之间的速度和跟踪差异引起的。如果您真的想利用索引并希望在大多数 Prolog 系统中具有可移植性（**），则需要为第一个参数索引重新制定问题。

一种方法是通过附加谓词。假设您最初有这些 DCG 规则：

```
cat(Attr1, .., Attrn) --> [Terminal1, .., Terminaln].
.. 
```

将其转换为：

```
cat(X1, .., Xn) --> [Y], cat2(Y, X1, .., Xn).

cat2(Terminal1, Attr1, .., Attrn) --> [Terminal2, .., Terminaln].
.. 
```

当我们将此应用于您的示例时，我们会得到：

```
% personal pronoun (person, case, number, genus)
ppers(X1,X2,X3,X4) --> [Y], ppers2(Y,X1,X2,X3,X4).

% personal pronoun 2 (first word, person, case, number, genus)
ppers2(ich,1,0,sg,_) --> [].
ppers2(meiner,1,1,sg,_) --> [].
ppers2(mir,1,2,sg,_) --> [].
ppers2(mich,1,3,sg,_) --> [].
ppers2(du,2,0,sg,_) --> [].
ppers2(deiner,2,1,sg,_) --> [].
ppers2(dir,2,2,sg,_) --> [].
ppers2(dich,2,3,sg,_) --> []. 
```

您可以对代码中的每个类别执行此操作，这是一种词典表。以上工作独立于 DCG 的翻译方式，如果存在第一个参数索引，它将非常快。

再见

(*) 即使您的 Prolog 系统可以进行多参数索引，它可能仍然无法进行复杂的术语索引。为了索引 [ich|X]，Prolog 系统需要下降到列表中，但很可能它不会下降并且只索引 (.)/2，因此所有子句看起来都相同，并且索引没有积极影响。

(**) 我猜 Prolog 系统中唯一与索引有关的共同点是第一个参数索引。除此之外，并非所有的 Prolog 系统都可以将终端放入头部。有些可能在正文中使用 =/2，有些可能在正文中使用 'C'/3。DCG 目前在终端建模方面没有标准化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:56:01.397

通常，跟踪器会向您展示实际发生的情况，所以是的，如果它迭代替代公式通过匹配直接访问目标术语的位置，那么当您不查看时也会发生这种情况。但要确定这是否真的意味着更差的性能，您*必须*在真实场景中测量和比较这两种选择。即使跟踪器没有将其显示为单独的步骤，统一也可能会很慢，或者您的运行时系统可能会进行优化甚至编译在`trace`. 或者它可能会更慢但不足以担心。与往常一样，这里的黄金法则是：先衡量，*然后再*优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:19:28.360

你为什么用nth0？也许可能是性能杀手的罪魁祸首，请改用 memberchk。

除此之外，我认为您对表演的直觉在“参数索引”方面具有良好的背景。DCG 通常用 Prolog 翻译（我在这里使用 SWI-Prolog）：

```
ppers(1,0,sg,_) --> [ich]. 
```

变成

```
ppers(1, 0, sg, _, [ich|A], A). 
```

最近对 SWI-Prolog 虚拟引擎的优化（我认为）受 YAP 的启发，自动为具有足够绑定参数的谓词构建所有索引。

因此，您可以期望使用您的第一个方案进行解析（使用 SWI-Prolog）会更有效。

以前，只实现了“第一个参数索引”，在这种情况下（或者如果您使用没有索引功能的 Prolog），您应该会发现这些方案之间的时序非常相似。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:52:29.690

语法规则被编译成谓词子句，通常被索引。大多数（如果不是全部）Prolog 编译器使用第一个参数索引（默认情况下）来避免在证明目标时尝试永远不会成为证明树一部分的子句。因此，根据您的调用模式，并且正如您使用 Prolog 编译器跟踪支持所观察到的那样，不会单步执行每个谓词子句。此外，使用实例化索引调用 nth0/3 谓词仍然需要对列表进行线性遍历，直到达到指定的索引。与其他人建议的一样，如果您使用 memberchk/2 谓词，则相同。列表就是列表。

# html - chrome的边框问题

> ID：10683844
> 
> 赞同：2
> 
> 时间：2012-05-21T10:49:48.250
> 
> 标签：html, css

我在表单字段中使用了边界半径。它工作正常。但是它的镀铬在场周围出现了一些线条。请参考小提琴。

[http://jsfiddle.net/JKdzc/](http://jsfiddle.net/JKdzc/)

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:53:36.797

你指的是橙色亮点吗？如果是这样，请添加此样式：

```
outline:none; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:28:32.287

当用户专注于输入时，Chrome 会添加黄色/橙色**轮廓。**像这样删除它：

```
input:focus
{
    outline: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T16:20:40.407

橙色轮廓是 Chrome 将用户注意力集中在他们点击的内容上的方式。如前所述，摆脱这种情况的最佳方法是`outline:none;`在 CSS 中。

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T10:54:25.687

可能这只是 WebKit 中的一个错误。WebKit 在`border-radius`.

您可以检查该错误是否已添加到[buglist](http://code.google.com/p/chromium/issues/list?can=2&q=border+radius&colspec=ID+Pri+Mstone+ReleaseBlock+Area+Feature+Status+Owner+Summary&cells=tiles)中。

**更新**

正如[jezternz 所指出](https://stackoverflow.com/questions/10683844/border-issue-in-chrome/10683900#comment-13865272)的，您可以通过使用该`style`属性来解决此问题。`select`或者，您可以在元素周围添加一个包装器并对其进行[样式设置](http://jsfiddle.net/JKdzc/6/)。

# android - 如何为地图上的每个人设置多个具有相关活动的 GeoPoint

> ID：10683848
> 
> 赞同：2
> 
> 时间：2012-05-21T10:49:56.270
> 
> 标签：android, google-maps, geolocation, android-mapview, android-maps

我有一个 Home 列表，每个 Home 都是一个带有纬度、经度、名称和描述的对象。现在我想在 android MapView 中将所有房屋视为地理点。

我在网站上搜索了一些关于的内容，并且我看到需要地图叠加层。

所以我在 SearchHome Activity 中完成了这个（即带有地图和搜索框的活动）

```
MapLocationOverlay mapLocationOverlay = new MapLocationOverlay(SearchHome.this, elementi, SearchHome.this.getResources().getDrawable(R.drawable.home_icon));
            overlays = mapView.getOverlays();
            overlays.add(mapLocationOverlay); 
```

我的 MapOverlay 课程是：

```
public class MapLocationOverlay extends ItemizedOverlay<OverlayItem> {

   private List<Home> homeList;
   private Context context;

   public MapLocationOverlay(Context context, List<Home> homeList, Drawable marker) {
      super(boundCenterBottom(marker));
      this.context = context;
      this.homeList = homeList;
      if (homeList == null) {
          homeList = new ArrayList<Home>();
      }
      populate();
   }

   @Override
   protected OverlayItem createItem(int i) {
       Home c=homeList.get(i);
       GeoPoint point =
               new GeoPoint((int) ((Double.valueOf(c.getLatitude()) * 1e6)), (int) ((Double.valueOf(c.getLongitude()) * 1e6)));
      return new OverlayItem(point, c.getNameHouse(), null);
   }

   @Override
   public boolean onTap(final int index) {
      Home h = homelist.get(index);
      AlertDialog.Builder builder = new AlertDialog.Builder(context);
      builder.setTitle("HomeLocation")
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int id) {
                     Intent i = new Intent(context, HouseDetails.class);
                     i.putExtra(HomeMapApp.index, index);
                     context.startActivity(i);
                  }
               }).setNegativeButton("No", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int id) {
                     dialog.cancel();
                  }
               });
      AlertDialog alert = builder.create();
      alert.show();

      return true; // we'll handle the event here (true) not pass to another overlay (false)
   }

   @Override
   public int size() {
      return homeList.size();
   }
} 
```

**但我不知道如何配置监听器 onTap 以使用 GeoPoint 正确处理地图中的相关 House 项目。**

例如，如果我单击*纽约的地理点 MyHouse，*我应该获取相应 House java 对象的所有数据并将其发送到 HouseDetail 类以显示信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:06:12.663

我已经回答了相同类型的问题 看看我的回答很可能会回答你的问题

[使用 osmdroid 覆盖项目的自定义信息气泡](https://stackoverflow.com/questions/9362137/custom-information-bubble-on-tap-for-overlay-items-using-osmdroid/9461841#9461841)

# iphone - 我可以修复崩溃，但我不明白为什么会发生

> ID：10683852
> 
> 赞同：3
> 
> 时间：2012-05-21T10:49:59.810
> 
> 标签：iphone, objective-c, ios, xcode

我有一个滚动视图。我在此滚动视图中添加了一个按钮，然后将其释放。

```
UIButton * saveButton = [UIButton buttonWithType:UIButtonTypeCustom];
saveButton.frame = CGRectMake(415.0, 473, 80, 38);
saveButton.titleLabel.font = [UIFont fontWithName:@"Heiti TC" size:24];
[saveButton setTitle:@"" forState:UIControlStateNormal];
[saveButton setContentEdgeInsets:UIEdgeInsetsMake(2, 0, 0, 0)];
saveButton.backgroundColor = [UIColor clearColor];
[saveButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal ];
[saveButton setBackgroundImage:[UIImage imageNamed:@"save.png"] forState:UIControlStateNormal];
[saveButton addTarget:self action:@selector(save) forControlEvents:UIControlEventTouchUpInside];
saveButton.hidden = NO;
[self.scrollview addSubview:saveButton];
[saveButton release]; 
```

当视图出现在屏幕上时应用程序崩溃，我尝试触摸屏幕的任何部分。

如果我注释掉

```
[saveButton release]; 
```

该应用程序完美运行。

我认为一旦将按钮添加到滚动视图中，按钮的保留计数就会增加，因此释放按钮对我来说是安全的。

这里发生了什么？将某些内容添加到滚动视图与将其添加到主视图中不同，如下所示？

```
[self.view addSubview:saveButton]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T10:52:11.137

`buttonWithType:`是一个方便的构造函数，所以它已经创建了一个自动释放的实例，不需要释放对象。

这意味着以下代码行是错误的：

```
[saveButton release]; 
```

您不应该发送`release`，因为该实例已经自动释放。

检查[`UIButton`参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)以获取详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:54:06.740

```
UIButton * saveButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

根据[内存管理规则](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)，此代码返回一个自动释放的对象，您不必在完成工作时释放它。当您将其添加为视图的子视图时，您将其添加到的视图将保留它，您不负责其内存管理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T10:59:50.210

这里没有`alloc/init/new`用到，所以会自动发布。如果你有这样的东西，`UIButton *savebutton = [[UIButton alloc]init];`那么你将不得不使用发布，如：`[saveButton release];`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T10:54:49.103

这里的问题是

```
[UIButton buttonWithType:UIButtonTypeCustom] 
```

方法返回一个仅由自动释放池保留的自动释放对象（它将在当前事件队列的末尾释放该对象）。这意味着您对它没有所有权（它没有被保留）。将它添加到滚动视图会使保留计数增加一个，但是您会立即通过发送释放消息在下一行中将其销毁。

执行此操作的正确方法是删除发布调用（您将完全清楚内存管理）。

[您可以在此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)阅读有关 iOS 内存管理的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T10:58:34.003

您还没有为按钮对象分配内存。那你怎么能释放它。

```
UIButton * saveButton = [UIButton buttonWithType:UIButtonTypeCustom]; 
```

您调用了一个静态方法，该方法本身负责内存管理。这是应用程序崩溃的唯一原因。

# tcp - JMeter TCP 采样器错误地报告 500

> ID：10683853
> 
> 赞同：5
> 
> 时间：2012-05-21T10:50:02.897
> 
> 标签：tcp, smtp, jmeter

我正在使用 JMeter 对我们的 SMTP 服务器进行负载测试，使用 TCP 采样器（BinaryTCPClientImpl 类）来触发 HELO，等待 30 秒然后退出。

SMTP 服务器接受 HELO 并做出相应响应，JMeter 记录了正确的响应，但是它似乎没有找到响应，而是遇到响应超时并显示请求失败 500。

在 JMeter 日志中它说：

```
ERROR - jmeter.protocol.tcp.sampler.TCPSampler:      org.apache.jmeter.protocol.tcp.sampler.ReadException:
at org.apache.jmeter.protocol.tcp.sampler.BinaryTCPClientImpl.read(BinaryTCPClientImpl.java:137)
at org.apache.jmeter.protocol.tcp.sampler.TCPSampler.sample(TCPSampler.java:350)
at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:416)
at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:271)
at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at org.apache.jmeter.protocol.tcp.sampler.BinaryTCPClientImpl.read(BinaryTCPClientImpl.java:123) 
```

尽管事实上它设法记录了预期的响应！

我猜 JMeter 不知何故未能发现响应的结束？

任何有关如何解决或调试此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T11:00:13.337

如果您不定义[EOM 字节](http://jmeter.apache.org/api/org/apache/jmeter/protocol/tcp/sampler/AbstractTCPClient.html#useEolByte)，它会一直读取[到流结束](http://jmeter.apache.org/api/org/apache/jmeter/protocol/tcp/sampler/BinaryTCPClientImpl.html#read%28java.io.InputStream%29)。由于流不会结束，它会超时。您必须为您使用的协议正确设置 EOM 字节。

# embedded - 是否可以检测 Cortex M3 上的 DMA 通道何时空闲？

> ID：10683856
> 
> 赞同：3
> 
> 时间：2012-05-21T10:50:14.403
> 
> 标签：embedded, arm, dma, cortex-m3

我刚刚接手了一个为 STM32 Cortex M3 微控制器开发 C 代码的项目。

我立即遇到的一个问题是我有一个自由运行的 DMA 通道，可以在 2 个 USART 之间传输数据，但有时需要将来自另一个源的数据发送到目标 USART。

有什么方法可以检测 DMA 何时忙于传输数据或空闲，或者传输完成时是否触发了任何中断。

非常感谢您的任何回复，

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T16:35:32.267

DMA 完成既可以是轮询的，也可以是中断驱动的。详细信息在您特定部分的参考手册中 - *“STM32 Cortex-M3”*不够具体，无法将其缩小到您需要的文档，但您可以从[ST 的网站](http://www.st.com/internet/mcu/subclass/1169.jsp)下载。

实现 DMA 的最简单方法是使用[STM32 标准外设库](http://www.st.com/internet/com/SOFTWARE_RESOURCES/SW_COMPONENT/FIRMWARE/stm32f10x_stdperiph_lib.zip)。它包括所有外设的示例项目，包括 USART 的 DMA 轮询和 DMA 中断示例。您的工具链可能已经包含该库，但可能不是所有示例。即使您已经拥有该库，最好检查它是否为最新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T10:56:36.247

这是我检查 DMA 操作是否已完成的操作：

```
DMA_Cmd(DMA2_Channel5, ENABLE); // start
while (!DMA_GetFlagStatus(DMA2_FLAG_TC5)); // wait to finish
DMA_ClearFlag(DMA2_FLAG_TC5); // clear flag (needed?) 
```

# objective-c - UIWebView 复制/粘贴

> ID：10683861
> 
> 赞同：0
> 
> 时间：2012-05-21T10:50:56.750
> 
> 标签：objective-c, ios, xcode, uiwebview

我有一个单视图应用程序，它只包含一个 Web 视图和一个类似于地址栏的文本字段。选择网页的一部分后，我想按下一个按钮来复制它（包括文本和图片在内的所有选择）并自动将其粘贴到另一个视图中。我可以在编辑菜单中添加一个按钮（虽然我不知道如何删除复制和粘贴按钮），但我不知道如何获得选择。

我曾尝试使用手势识别器来做到这一点，但我找不到获得选择的方法。我将我的视图控制器设置为 a `UIWebViewDelegate`and an`UIGestureRecognizerDelegate`并尝试实现`touchesBegan`, `touchesMoved`and `touchesEnded`，但是在开始选择时它们不会被调用。你知道这样的例子吗，或者至少为我指明了好的方向？谢谢！

```
UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Copy String" action:@selector(stringFromSelection:)];
UIMenuController *menuController = [UIMenuController sharedMenuController];
menuController.menuItems = [NSArray arrayWithObject:menuItem];

-(void)stringFromSelection:(id)sender
{
NSString *selectionString = [browserView stringByEvaluatingJavaScriptFromString:@"window.getSelection()"];    //browserView is UIWebView class
NSLog(@"selected string = %@",selectionString);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T16:00:59.373

获取所选文本并将其复制以添加`.ToString()`到您的功能的解决方案..最后它将是：

```
-(void)stringFromSelection:(id)sender
{
NSString *selectionString = [browserView stringByEvaluatingJavaScriptFromString:@"window.getSelection().ToString()"];
NSLog(@"selected string = %@",selectionString);
} 
```

我不确定这是否也适用于图像.. 测试它。

# unit-testing - NUnit：单元测试，关于存储测试数据文件的建议

> ID：10683865
> 
> 赞同：0
> 
> 时间：2012-05-21T10:51:55.300
> 
> 标签：unit-testing, junit, nunit, mstest

我已经开始研究基于 OpenXml 的引擎，我们正在使用大量 pptx 文件进行测试。我们不希望这些文件存储在源代码管理中。对此有什么建议吗？可能存储在网络共享或映射驱动器等中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T10:57:01.177

为什么不将测试文件存储在源代码管理中？显然，它们是测试套件的一部分，因此它们属于测试。

这样想：您编写测试以发现您的代码是否有问题。如果代码现在通过了测试，那么如果您更改代码本身或测试（包括驱动测试的测试文件），它可能会失败。因此，您希望将测试文件与测试一起保存在源代码管理中，这样您就可以控制准确执行的测试。

随着时间的推移，您可能会更改这些文件以更好地反映需求的变化。此时，您不想纠结哪个版本的测试文件属于哪个版本的源/测试代码，如果您将它们分开保存，就会发生这种情况

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T10:58:09.400

存储它们的逻辑位置是在版本控制中。这样您就可以修改它们，而不必担心破坏以前版本的测试代码。将它们存储在网络共享上将经常导致问题。您的版本控制系统将记录对文件的每一次更改以及所做的更改。您的网络共享不太可能提供类似的设施。如果您担心文件的大小，以及您的版本控制系统是否能够应对，请获得一个不错的版本控制系统。

# mysql - 我应该合并我的 MySQL 表吗？

> ID：10683867
> 
> 赞同：1
> 
> 时间：2012-05-21T10:51:55.760
> 
> 标签：mysql

我目前有一个用于 GPS 跟踪的大型数据库。每次有新人开始向我发送位置时，我都会创建一个具有唯一名称的新数据库。然后我开始向这个表中添加行。有海拔，经度，纬度等列。

情况是其中一些表可能包含超过 100,000 个位置（行）。我现在在数据库中也有大约 600 个表。搜索所有这些表非常困难，它需要我运行“显示表”查询，然后对每个表运行查询以获取我需要的数据。

问题分解为：我是否应该将所有这些表合并到一个包含超过 1,000,000 行的巨大表中。然后，我将添加一列来分隔不同的用户。这将使运行查询变得更加容易，因为我现在需要一个查询而不是多个。

这会使系统更快还是更慢？您是否需要更多信息才能回答这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T10:59:04.780

1,000,000 行以上的正确索引可能工作正常，但由于行会不断增加，您很快就会等待查询执行。我不认为这真的是一个好主意。您可以做的是，创建这样的表，将所有行插入其中并尝试对其进行一些查询。您将亲眼看到它的表现如何。然后为了确定，生成一些随机数据并增加数百万（达到预期大小）。如果它仍然表现良好，那么你就有了答案。查询速度也很大程度上取决于硬件，因此回答此类问题并不容易。尝试做一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:01:58.040

为什么没有包含 location_id、高度、经度和纬度的表格。有一个结合高度、经度和纬度的唯一键。

有另一个表，可能是 user_location，带有 user_id 和 location_id。location_id 这里是上表的外键。

由于 user_id 和 location_id 是它们各自表中的主键，这意味着自动索引，那么它应该没有问题。

此外，位置表会在一段时间内饱和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:59:28.393

如果您打算同时定期搜索所有表，那么几乎肯定值得组合这些表并添加一个用户标识符列。向该表添加索引（对于您经常搜索的列）将大大提高性能。

单个查询几乎*总是*比跨不同表的多个查询快，尤其是在对结果进行排序时。

# axapta - 仅找到 DAT 公司

> ID：10683877
> 
> 赞同：1
> 
> 时间：2012-05-21T10:52:25.173
> 
> 标签：axapta, microsoft-dynamics, ax, dynamics-ax-2012

我已经安装了 Dynamic AX 2012 并检查了 AOS。

在配置 Dynamics AX 的步骤后，我重新启动它，当我想去合法公司 CEU 或其他我不能！

我只有一个名为 DAT 的窗口。

只有 DAT 在 Dynamics ax 2012 中找到！

如何访问 CEU 并找到 AOT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:09:56.987

据我了解，您只能访问 DAT 公司而没有任何权利？

这将不提供或提供很少的菜单项。

最可能的过程：您更改了用户的角​​色或安全组。如果可能，请尝试使用具有管理员权限的其他用户。

**更新：** 如果失败，您将不得不恢复数据库的备份副本。首先进行 SQL 日志备份，然后将时间点还原到配置设置之前的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T09:01:33.060

我希望这会有所帮助 - 我在新客户端初始化后也遇到了这个错误，我没有出现任何模块，并且我得到了关于无权限的信息日志。我必须卸载所有东西，重新安装数据库（这会设置一个新的 SQL Server 数据库）、应用程序文件、AOS 和客户端/调试器。在设置过程中确保您使用正确的登录名（我认为这是权限错误的开始），但它也可能来自导入的数据（虽然不太确定）。在此之后，我启动了 AOS（第一次需要一些时间），然后在客户端初始化期间设置客户端并导入数据。另一件事，确保您已更新任何服务包，并将最新版本引入应用程序文件夹。

# eclipse - 在 Eclipse 插件中，在 StyledText 中绘制不会在滚动时移动的框

> ID：10683878
> 
> 赞同：3
> 
> 时间：2012-05-21T10:52:27.390
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在尝试在我正在开发的 Eclipse 插件中的文本编辑器的背景上绘制框。我设法做到了，但问题是当我在文本编辑器中滚动代码时，框也在我滚动的方向上移动。有人知道如何使盒子保持初始位置吗？我的绘图代码是：

```
<!-- language: lang-java -->

    public class BoxHighLighting {

    protected StyledText boxText;
    private Color bc;
    int startingChar;
    int endingChar; 

    public BoxHighLighting(StyledText boxText, int startingChar, int endingChar, Color color){
        this.boxText = boxText;
        this.startingChar = startingChar;
        this.endingChar = endingChar;
        bc = color;
        setStyledText();
    }

    public void setStyledText() {

        //boxText.getOffsetAtLine(3);

        if (boxText == null)
            return;

        Rectangle r0 = boxText.getClientArea();

        if ((r0.width < 1) || (r0.height < 1)) {
            return;
        }
        int xOffset = this.boxText.getHorizontalPixel();
        int yOffset = this.boxText.getTopPixel();

        Image newImage = new Image(null, r0.width, r0.height);
        GC gc = new GC(newImage);
        Rectangle rec = boxText.getTextBounds(startingChar, endingChar);
        Rectangle editorWin = newImage.getBounds();
        fillRectangle(bc, gc, rec.x, rec.y, editorWin.width, rec.height);
        gc.drawRectangle(rec.x, rec.y, editorWin.width, rec.height);
        Image oldImage = this.boxText.getBackgroundImage();
        this.boxText.setBackgroundImage(newImage);
        if (oldImage != null)
            oldImage.dispose();
        gc.dispose();
    }

    void fillRectangle(Color c, GC gc, int x, int y, int width, int height) {
        if (c == null) {
            return;
        }
         gc.setBackground(c);
                 gc.fillRoundRectangle(x, y, width, height, 5, 5);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:19:09.423

您可以在 ITextEditor StyledText 属性上放置一个绘画侦听器，并检测滚动 x,y 位置何时发生变化，然后在人滚动时重绘您的框

```
styledText.addPaintListener(new PaintListener() {
    private int oldXOffset = 0;
    private int oldYOffset = 0;

    private boolean offsetMoved(int xOffset, int yOffset) {
       if ((xOffset != oldXOffset) || (yOffset != oldYOffset)) {
         oldXOffset = xOffset;
         oldYOffset = yOffset;
         return true;
       }
       return false;
    }

    public void paintControl(PaintEvent event) {
        if(event.getSource() instanceof StyledText)  {
            StyledText st = (StyledText) event.getSource();
            if(offsetMoved(st.getHorizontalPixel(), st.getTopPixel())) {
                    // do a redraw of the rectangles here!!!!
            }
         }
    } 
```

});

# bash - 从脚本调用时，svn propset 不起作用

> ID：10683881
> 
> 赞同：0
> 
> 时间：2012-05-21T10:52:42.600
> 
> 标签：bash, svn, unix, svn-propset

我的`svn propset`命令在从提示符调用时有效，但在 bash 脚本的 while 循环内调用时不能正常工作。

我的命令如下所示，

`svn propset -r945 --revprop svn:log '[Release ] [story]' blahReport.sh`

我的脚本在下面，

```
[[ ! -n $1 ]] && echo "Please enter the release number" && exit 1

[[ ! -e $AC_SYSTEM/releases/filesforrelease.$1.txt ]] && rm $AC_SYSTEM/releases/filesforrelease.$1.txt

cat $AC_SYSTEM/releases/release_$1.txt >> $AC_SYSTEM/releases/filesforrelease.$1.txt

sed "s/^/#/g" $AC_SYSTEM/releases/filesforrelease.$1.txt >> /tmp/filesforrelease.$1.txt

mv /tmp/filesforrelease.$1.txt $AC_SYSTEM/releases/filesforrelease.$1.txt

svnlink="http://sublime-ssi/blah/blah/trunk"

while read -r story

do

if [[ ! -e $story.file ]];

then

while read -r storyline

 do

        revNum=`echo $storyline | cut -d"|" -f1`

        fileName=`echo $storyline | cut -d"|" -f2`

        echo "$revNum ~ac/$fileName" >> $AC_SYSTEM/releases/filesforrelease.$1.txt

svn propset -r"$revNum" --revprop svn:log "[$1] [$story]" "$svnlink"/"$fileName"

        done<$AC_SYSTEM/stories/$story.file

else

echo "story file for $story does not exist..please check the story directory"

exit 1

fi

done</export/home/acdba/ac/releases/release_$1.txt 
```

我在脚本上做了一个 set -x 但对我来说看起来不错。

不知道缺少什么..这对其他人来说可能是显而易见的，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T13:00:04.620

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

我终于通过在 svn 命令中提供用户名和密码作为参数来解决这个问题。svn propset --username $USER --password $PASSWORD --revision "$OLD_VERSION" --revprop svn:log "$NEW_COMMENT" "$svnlink"/"$FILE" – BratVaddi

# javascript - Webkit 似乎不支持层上的 $.focus() 而 IE9 支持。无论如何让webkit浏览器也这样做？

> ID：10683884
> 
> 赞同：0
> 
> 时间：2012-05-21T10:53:02.460
> 
> 标签：javascript, jquery

请参阅下面的小提琴。两个焦点事件都将在 IE 中触发，只有一个用于输入的事件将在 webkit 浏览器和 firefox 中工作。

我需要在图层上使用 .focus() ，因为在我的页面中，根据用户是单击控制栏还是单击图层下方的空白区域来启用和禁用控件。使用 .click() 之类的东西不会削减它，因为每次我单击所述空白区域上的任何链接/文本时都会触发事件，奇怪的是也仅在非 IE 浏览器中。

[http://jsfiddle.net/X2Pxw/11/](http://jsfiddle.net/X2Pxw/11/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:26:56.317

我已经修改了 jQuery 代码。它可能会做你真正想做的事情。

[http://jsfiddle.net/X2Pxw/20/](http://jsfiddle.net/X2Pxw/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:21:40.667

根据[此处](https://stackoverflow.com/questions/334489/jquery-focus)评分最高的答案，除非具有属性`div`，否则无法获得焦点。`tabindex`据我了解，这与 HTML 4.01 相矛盾，但有效......

# php - 如何读取 BLOB 格式的文本？

> ID：10683885
> 
> 赞同：1
> 
> 时间：2012-05-21T10:53:11.860
> 
> 标签：php, apache2, type-conversion, blob, binary-data

我通过将它们保存为 blob 格式将 pdf/word 文档保存在数据库中。现在我想把它读成字符串。我的意图只是将保存的 blob 内容读取为字符串，以便我可以搜索文本。

例如：如果上传了几个不同类型的文档，我想在其中搜索文本。

何能实现？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:27:08.637

首先，BLOB 是一个 BINARY LOB，您正确使用了它 - 将 tha 文件存储到数据库中。由于它是 BINARY，因此该列中的数据也以其二进制形式存储。因此，我不确定您是否可以在二进制数据中搜索文本...

无论如何，您应该能够通过以下方式做到这一点：

```
$conn = oci_connect('user', 'pass', 'server');
$q = "SELECT blob_column FROM my_blob_table WHERE my_blob_id = :id";
$stmt = oci_parse($conn, $q);
oci_bind_by_name($stmt, ':id', $id);
oci_execute($stmt);
$res = oci_fetch_assoc($stmt);
$blob = $res['blob_column']->read($res['blob_column']->size());
var_dump($blob); 
```

如果要将数据存储为文本，请改用 CLOB (CHARACTER LOB) 列。

# windows-phone-7 - WP7.1 缺少资源

> ID：10683891
> 
> 赞同：0
> 
> 时间：2012-05-21T10:53:37.637
> 
> 标签：windows-phone-7

当我在VS2010中启动项目时，即使我选择wp7.1作为目标，项目也以7.0 OS版本启动。一旦我从属性切换到“Target Windows Phone OS Version”WP7.1，一些资源引用显然被破坏了，即：

```
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}" 
```

在设计器模式下找不到其他的。如果我在模拟器中启动应用程序，它就可以工作。不幸的是，我在设计器模式下看不到我的页面，这很烦人。任何想法 ？

# visual-studio-2010 - 如何在 Visual Studio 2010 中将自定义文本添加为 工具箱？

> ID：10683893
> 
> 赞同：2
> 
> 时间：2012-05-21T10:53:50.677
> 
> 标签：visual-studio-2010

例如，我从不介意 jquery animate 的语法：

```
$('#book').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'
  }, 5000, function() {
    // Animation complete.
  }); 
```

我想将它存储到 Visual Studio 2010 中。所以，将来，如果我需要使用它，就像“打开工具箱”-> 拖放 jquery 动画文本之类的东西。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-27T09:30:52.287

实际上有一种更简单的方法可以做到这一点。

只需打开工具箱选项卡，单击并将所选文本拖动到它 [![在此处输入图像描述](../Images/2765ce3360fbc219881af870bc511f50.png)](https://i.stack.imgur.com/B5apG.png)

一旦它在那里，右键单击它并将其重命名为您喜欢的名称。

然后只需将其拖到您喜欢的任何地方... [![在此处输入图像描述](../Images/77574e24e30b95e750dd6363e3080ce9.png)](https://i.stack.imgur.com/3MpWl.png)

（请注意，我的图像来自 VS2017，尽管这也适用于 VS2010）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:31:39.957

好的，首先，打开`Tools->Code Snippets Manager`（Ctrl-K，Ctrl-B）。您可以查看现有的并在那里添加您自己的。

然后，当编辑给定类型的文件（例如 HTML）时，右键菜单中将显示两个上下文选项 -`Insert Snippet`和`Surround With`. 它们使用起来简单直观，谷歌搜索肯定会对您有所帮助。

# android - 来自数据库的列表视图

> ID：10683894
> 
> 赞同：1
> 
> 时间：2012-05-21T10:53:59.777
> 
> 标签：android, database, listview

在我的应用程序中，我有 1 个数据库，我需要使用 ListView 显示该数据库中的数据。任何人请帮助我。

这就是我从数据库中获取数据的方式：

```
db.open();
    Cursor c = db.getAllTitles();
    if (c.moveToFirst()) {
       do {
            //in this i have to display the data
            DisplayTitle(c)
       } while (c.moveToNext());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:01:43.950

`SimpleCursorAdapter`您的案例适合`ListView` 更多详细信息，请查看此[链接](http://thinkandroid.wordpress.com/2010/01/09/simplecursoradapters-and-listviews/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:04:53.570

这些链接应该对您有所帮助。

[Android、ListView 和数据库](http://alltechsolution.wordpress.com/2012/02/07/android-and-lists-and-databases/)

[来自 SQLiteDatabase 的数据的 ListView - Android](http://saigeethamn.blogspot.com/2011/02/listview-of-data-from-sqlitedatabase.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T11:06:14.607

`SimpleCursorAdapter`可用于从 中获取数据`database`并显示在 中`ListView`。

这是实现您的要求的示例代码：

```
 int[] names = new int[] {R.id.Full_Name,R.id.name};
 private static final String fields[] = {"DatabaseColumn_Name1", "DatabaseColumn_Name2"}; 
  ListView = (ListView)findViewById(R.id.list1);
  DataBaseHelper myDbHelper = new DataBaseHelper(null);
  myDbHelper = new DataBaseHelper(this);
  String sql ="SELECT STATEMENT";
  Cursor cdata = myDbHelper.getView(sql);
  if (cdata != null) 
{
    cdata.moveToFirst();
    while (cdata.isAfterLast() == false) {
        String tx = (cdata.getString(2));
        cdata.moveToNext();
}
startManagingCursor(cdata); 
CursorAdapter adaptr = new MyCursorAdapter( 
            getApplicationContext(), R.layout.listview1, cdata, fields, names); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T11:12:18.313

```
private void fillData() {
    Cursor notesCursor = mDbHelper.fetchAllNotes();
    startManagingCursor(notesCursor);

    // Create an array to specify the fields we want to display in the list (only TITLE)
    String[] from = new String[]{NoteDb.KEY_TITLE, NoteDb.KEY_SDATE, NoteDb.KEY_STIME};

    // and an array of the fields we want to bind those fields to (in this case just text1)
    int[] to = new int[]{R.id.text1 , R.id.dateInNotes, R.id.timeInNotes};

    // Now create a simple cursor adapter and set it to display
    SimpleCursorAdapter notes = 
        new SimpleCursorAdapter(this, R.layout.notes_row, notesCursor, from, to);
    setListAdapter(notes);

    //notesCursor.close();

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T11:07:54.503

您可以将数据存储在 arrayList 中，并使用 basedapter 扩展布局

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-21T12:35:52.240

```
nombresC = (Cursor) ayudabbdd.getCursorNombres();   
        startManagingCursor(nombresC);
        nombresC.moveToFirst();

        //Para crear un simpleCursorAdapter necesitamos
        //Contexto this
        //Layour donde se mostrara el resultado, generalmente un textview
        //Cursor 
        //Cual sera el campo que recibiremos de la BBDD
        //Donde tenemos que poner esa informacion, generalmente el ID correspondiente al textvies del layour del segundo parametro

        String[] deNombre = new String[]{DataBaseHelper.CNOMBRE};
        int[] aNombre = new int[]{R.id.nombreLugar};
        lugaresNombre = new SimpleCursorAdapter(this, R.layout.entrada_lista, nombresC, deNombre, aNombre);
        setListAdapter(lugaresNombre);
        listaview= getListView(); 
```

# c# - 如何在 C# 的 XML 文件中设置节点的属性

> ID：10683898
> 
> 赞同：0
> 
> 时间：2012-05-21T10:54:08.927
> 
> 标签：c#, xml

我有一个这样的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfOffice xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<Offices>
<Office>
<OfficeId>5</OfficeId>
<OfficeName>NewOne1</OfficeName>
<City>Mehsana1</City>
<Country>India1</Country>
</Office>
<Office>
<OfficeId>8</OfficeId>
<OfficeName>NewOne</OfficeName>
<City>Mehsna1</City>
<Country>Country</Country>
</Office>
<Office>
<OfficeId>9</OfficeId>
<OfficeName>Nataraj</OfficeName>
<City>Mehsana</City>
<Country>India</Country>
</Office>
<Office>
<OfficeId>10</OfficeId>
<OfficeName>Nere1</OfficeName>
<City>Nere1</City>
<Country>USA1</Country>
</Office>
<Office>
<OfficeId>11</OfficeId>
<OfficeName>Nataraj</OfficeName>
<City>Mehsana</City>
<Country>India</Country>
</Office>
<Office>
<OfficeId>15</OfficeId>
<OfficeName>Nere1</OfficeName>
<City>Nere1</City>
<Country>USA1</Country>
</Office>
</Offices>
</ArrayOfOffice> 
```

现在我想在`<Offices>`标签中添加一个属性，例如`<Offices Multi="Y">..........</Offices>`

如何使用 C#`Multi="Y"`在`Offices`Node 中设置它？我是否必须编辑 xml 文件并保存回该 xml 文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:00:52.737

您可以使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)加载 XML 文件，将`Multi`属性添加到`Offices`标记并将其保存回来：

```
var doc = XDocument.Load("test.xml");
var offices = doc.Element("ArrayOfOffice").Element("Offices");
offices.Add(new XAttribute("Multi", "Y"));
doc.Save("test.xml"); 
```

或者，如果您使用的是 .NET 3.5 之前的版本，则使用[XmlDocument ：](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

```
var doc = new XmlDocument();
doc.Load("test.xml");
var offices = doc.DocumentElement.SelectSingleNode("Offices");
var multi = doc.CreateAttribute("Multi");
multi.Value = "Y";
offices.Attributes.Append(multi);
doc.Save("test.xml"); 
```

# ruby-on-rails - 如何从 Rails 初始化程序中混合模块

> ID：10683905
> 
> 赞同：0
> 
> 时间：2012-05-21T10:54:55.843
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我想将我的 gem Monkey 补丁放入例如 /lib/gem_ext/i18n.rb 中：

```
module GemExt
  module I18n
    def self.translate(*args)
      raise 'ok'
    end
  end
end 
```

...并通过 Rails 初始化程序 gem_ext.rb 混入到 gem 中。

我试过：

```
a) I18n.send :include, GemExt::I18n

b) I18n.send :include, GemExt::I18nExt

c) I18n.module_eval { include ::GemExt::I18n }

d) I18n.module_eval { include ::GemExt::I18nExt } 
```

但是在重新启动 Rails 控制台后，它不会在 I18n.translate("key") 上引发此异常，但会显示原始行为，并且新声明的方法会引发 NoMethodError。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:17:01.160

如果你想monkeypatch`I18n.translate`方法只需写在/lib/gem_ext/i18n.rb 不需要GemExt 模块。

```
module I18n
 def self.translate(*args)
   raise 'ok'
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:32:25.517

**配置/初始化程序/gem_ext.rb**

```
Dir[Rails.root.join("lib/gem_ext/**/*.rb")].each {|f| require f} 
```

**lib/gem_ext/i18n.rb**

```
module GemExt::I18n
  extend ActiveSupport::Concern

  included do
    class << self
      def translate(*args)
        raise 'ok'
      end
    end
  end
end

I18n.send(:include, ::GemExt::I18n) 
```

# asp.net - 在第一次页面加载时无法获得母版页控件的值

> ID：10683907
> 
> 赞同：1
> 
> 时间：2012-05-21T10:55:02.803
> 
> 标签：asp.net, vb.net

我在用

```
<%@ MasterType virtualpath="~/__.Master" %> 
```

将我的母版页内容嵌入子页以访问控制属于母版页。

我`DropDownList`在母版页中有一个。我想`SelectedValue`在我的子页面中访问它。

问题是当页面第一次加载并且我试图通过在子页面中写入来访问 DropDownList 的选定值 - “ `Master.DropDownList.SelectedValue`”。

我无法获得 DropDownList 的值。它的显示是空白的。

但是当`Page.IsPostBack`我能够做到`SelectedValue`这一点时`DropDownList`。

有什么方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:47:14.693

来源[http://forums.asp.net/t/1511003.aspx/1](http://forums.asp.net/t/1511003.aspx/1)
以下是母版页与内容页合并时事件发生的顺序：

母版页控制 Init 事件。

内容控制 Init 事件。

母版页初始化事件。

内容页面初始化事件。

内容页面加载事件。

母版页加载事件。

内容控件加载事件。

内容页面 PreRender 事件。

母版页 PreRender 事件。

母版页控制 PreRender 事件。

内容控制 PreRender 事件。

因此，如果您将值加载到 Master's Page_Load 的下拉菜单中，这就是原因，您的 Page_Load 位于 Masters Page_Load 之前

# dynatree - 初始化后如何从dynatree获取关键节点

> ID：10683913
> 
> 赞同：0
> 
> 时间：2012-05-21T10:55:36.653
> 
> 标签：dynatree

您好，我想在创建树后从 dynatree 获取密钥。我用

```
$("#tree").dynatree("getTree").persistence.activeKey; 
```

但它返回 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T12:13:01.277

```
var rootNode = $("#tree").dynatree("getRoot");

alert(rootNode.data.key);

var children=rootNode .getChildren() ;
for(i=0;i<children.length;i++){
alert("child key:"+children[i].data.key);
} 
```

# sql - 使用命名管道的 SQL Server 连接

> ID：10683914
> 
> 赞同：0
> 
> 时间：2012-05-21T10:55:42.123
> 
> 标签：sql, vb.net, sql-server-2008

我正在尝试使用 vb.net 通过命名管道从我的 Windows 应用程序连接到 SQL Server 2008。

我做了一些浏览，我发现，要通过命名管道连接，我们只需要提及“初始目录 =Test_DB；数据源 = np:Server_Name；集成安全 =SSPI；”。

但这根本不连接到服务器。这是使用命名管道连接到 sql server 的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:03:05.083

连接失败时您收到什么错误消息？

我发现当我安装 SQL Server 2008 express 时，命名管道默认被禁用。尝试打开 SQL Server 配置管理器。现在在左侧窗格中打开 SQL Server Network Configuration，然后单击 Protocaols for SQLEXPRESS。在右侧窗格中检查命名管道是否已启用。重新启动 SQL 服务器以使更改生效。

# spring-roo - Spring roo 1.2如何将finder添加到repository层

> ID：10683915
> 
> 赞同：1
> 
> 时间：2012-05-21T10:55:42.130
> 
> 标签：spring-roo

我创建了一个带有字段的实体

```
entity jpa --class ~.domain.Account
field string --fieldName email
field string --fieldName password 
```

当我创建一个存储库

存储库 jpa --interface ~.repositories.AccountRepository --entity ~.domain.Account

我想向存储库添加一个查找器，有没有类似的方法来添加一个查找器，比如在实体中添加查找器？

```
finder add findAccountsByEmail 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T23:01:01.687

查找器仅适用于活动记录实体。要使用存储库生成查询，请在存储库类中创建一个新方法，用 @Query 注释装饰它并使用 JPQL 编写查询。你的例子是：

```
@Query("select a from Account as a where a.email = :email")
@Transactional(readOnly = true)
List<Account> findAccountsByEmail(@Param("email") String email) 
```

# android - 安卓通知栏

> ID：10683917
> 
> 赞同：2
> 
> 时间：2012-05-21T10:55:43.957
> 
> 标签：android

我有一个包含 Junit 测试用例的测试项目。

我有一个测试用例，我需要访问通知栏并单击通过 Internet 到达我的应用程序的消息。

我怎样才能做到这一点。如何点击通知栏中的通知消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:57:55.373

这是一个例子参考这个

```
 public class SimpleNotification extends Activity {

private NotificationManager mNotificationManager;
private int SIMPLE_NOTFICATION_ID;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mNotificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    final Notification notifyDetails = new Notification(R.drawable.android,"New Alert, Click Me!",System.currentTimeMillis());

    Button start = (Button)findViewById(R.id.notifyButton);
    Button cancel = (Button)findViewById(R.id.cancelButton);

    start.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Context context = getApplicationContext();
            CharSequence contentTitle = "Notification Details...";
            CharSequence contentText = "Browse Android Official Site by clicking me";
            Intent notifyIntent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://www.android.com"));
            PendingIntent intent = 
                PendingIntent.getActivity(SimpleNotification.this, 0, 
                notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);

            notifyDetails.setLatestEventInfo(context, contentTitle, contentText, intent);
            mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
        }
    });

    cancel.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            mNotificationManager.cancel(SIMPLE_NOTFICATION_ID);
        }
    });
} 
```

}

# java - 如何检查发送到 JMS 队列的消息不成功？

> ID：10683919
> 
> 赞同：2
> 
> 时间：2012-05-21T10:55:50.587
> 
> 标签：java, jakarta-ee, queue, jms, publish

如果 JMS 消息尚未发送到队列，我需要记录错误消息。

如何查看消息是否未发送？

**代码：**

```
...
...   
QueueSender send = session.createSender(queue);
TextMessage tm = session.createTextMessage(message);

send.send(tm);
log.debug("Sent text=" + tm.getText());
...
... 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:32:16.480

从发送调用中捕获异常就足够了。无需将传递模式设置为 PERSISTENT，因为此选项使所有消息都保持不变，即使您希望消息是非持久的。

```
try
{
  qsender.Send(msg);
}
catch(JMSException je)
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:59:37.190

使用 DeliveryMode.PERSISTENT 确保它将被持久化和交付，并捕获如果 send() 失败时引发的 JMSException？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T05:48:23.957

[Oracle 文档](http://docs.oracle.com/cd/E19798-01/821-1796/6nmonffeb/index.html)说：

> 为了获得更大的灵活性，Message Queue 允许您自定义 JMS 客户端确认模式。`acknowledge()`在客户端确认模式下，客户端通过调用消息对象的方法显式确认消息消费。

# c# - 设置默认值并在复选框中显示

> ID：10683922
> 
> 赞同：0
> 
> 时间：2012-05-21T10:55:59.017
> 
> 标签：c#, sql

好的，所以这是一个双重问题问题，但它们都是相关的。第一个问题是我如何为我的列设置一个默认值，因为我希望它是 true/1（如果你没有猜到，这是一个位列），第二个问题是我有一排复选框，我希望在我将值设置为 true 时勾选这些，我当前的命令是：

```
cmd.CommandText = "ALTER TABLE tbl_ecom_cat_feature ADD display_on_search BIT"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:29:43.643

获取默认值使用：SELECT * FROM INFORMATION_SCHEMA.COLUMNS where ...

对于设置默认值使用：ALTER TABLE {TABLENAME} ADD {COLUMNNAME} {TYPE} {NULL|NOT NULL} CONSTRAINT {CONSTRAINT_NAME} DEFAULT {DEFAULT_VALUE}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:00:44.733

假设您已经创建了该列，您可以发送此命令

```
cmd.CommandText = "ALTER TABLE tbl_ecom_cat_feature ADD CONSTRAINT [DF_tbl_ecom_cat_feature_display_on_search]  DEFAULT (1) FOR [display_on_search] 
```

要回答您的第二个问题，我需要知道您在哪里显示数据。
如果它是 DataGridView，那么我认为您应该将相应的列设置为 DataGridViewCheckBoxColumn，如此[处所述](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcheckboxcolumn.aspx)

# actionscript-3 - 关闭 Flex 中没有对象的警报框

> ID：10683923
> 
> 赞同：1
> 
> 时间：2012-05-21T10:56:01.140
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, flex3

我有一个包含两个状态（state1 和 state2）的应用程序。最初是 state1 弹出窗口，然后是 state2 弹出窗口。在 state2 上有许多显示警报的操作。现在，如果我单击注销，State2 窗口将关闭并且 state1 弹出窗口，但仍会弹出警报，现在我没有要使用 PopUpmanger.removepopup() 删除的警报对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:38:23.233

您可以做的另一种解决方法是，如果警报打开，则将所有警报推送到数组中，如果警报关闭，您可以弹出它。如果警报在注销时打开，您可以获得警报对象，然后您可以通过 for 循环使用 PopUpManager.removePopUp() 删除。

```
//Global array for your application// 
private var tempArray:Array = new Array();

//When you open first alert
var alert1:Alert = Alert.show("First Alert", "Alert");
tempArray.push(alert1);

//When you open second alert
var alert2:Alert = Alert.show("SecondAlert", "Alert");
tempArray.push(alert2); 
```

//像这样的东西....未测试....

```
for(var i:int=tempArray.length-1;0< i;i--){
PopUpManager.removePopUp(tempArray[i]);
tempArray.pop();
} 
```

//以下代码未测试或

```
PopUpManager.removeAllPopUps() 
```

或者

```
public function closeAllPopup():void
{
var systemManager:SystemManager = Application.application.systemManager
var childList:IChildList = systemManager.rawChildren
for (var i:int=childList.numChildren-1; i >=0; i– )
{
var childObject:* = childList.getChildAt(i)
if (childObject is UIComponent)
{
var uiComponent:UIComponent = childObject as UIComponent
if (uiComponent.isPopUp)
{
PopUpManager.removePopUp(uiComponent)
}
}
}
} 
```

或查看以下链接：-

```
http://www.devahead.com/blog/2009/12/getting-all-the-popups-in-a-flex-application/ 
```

# opengl - 是否可以用简单的循环替换 glutMainLoop() ？

> ID：10683925
> 
> 赞同：8
> 
> 时间：2012-05-21T10:56:13.923
> 
> 标签：opengl, glut

是否可以`glutMainLoop()`用简单的循环（例如`while`or `for`）替换，并且在这个循环中只调用所有回调？

我已经这样做了，图片显示正常，但窗口（其中显示图片）没有响应（无法移动它）。

`glutMainLoop()`调用多于回调吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-21T11:07:42.167

如果您使用的是 FreeGLUT，则可以使用[`glutMainLoopEvent`](http://freeglut.sourceforge.net/docs/api.php#EventProcessing). 它对事件循环进行一个循环处理，因此您可以循环调用它。

```
while(...)
{
  glutMainLoopEvent();
  //do other stuff.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T10:59:37.573

`glutMainLoop`还处理所有窗口通信，因此如果要替换它，您将需要为此使用（另一个）库，或者编写系统特定的代码解析来自操作系统的通信。不过，Internet 上有很多示例，至少对于 MS Windows。

[这是关于 Win32 主要功能的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/bb384843.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:44:30.610

> glutMainLoop() 调用的不仅仅是回调吗？

是的，它负责整个事件管理，例如从图形系统获取事件。然后它使用事件数据调用回调。

如果您想做自己的事件处理，请不要使用 GLUT。还有其他框架，可以让您对事件进行较低级别的访问，并期望您完成所有事件分派。看看 GLFW 和 SDL。

# android - 具有自定义背景的微调器不显示文本

> ID：10683927
> 
> 赞同：1
> 
> 时间：2012-05-21T10:56:29.610
> 
> 标签：android, drawable, nine-patch, android-spinner

我有一对完全按预期工作的 Spinner，但是当我在它们上放置一个可绘制对象时，文本就消失了。这是 Layout 和 Drawable 的 XML。这里唯一的问题是drawable不会让文本显示出来。

ttd_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<include
    android:id="@+id/include1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/action_bar" />

<LinearLayout
    android:id="@+id/ll1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" android:background="@color/gray">

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:descendantFocusability="beforeDescendants"
        android:focusableInTouchMode="true"
        android:paddingBottom="8dip" >

        <AutoCompleteTextView
            android:id="@+id/autoCompleteThingsToDo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="8dip"
            android:layout_toLeftOf="@+id/buttonSearchThingsToDo"
            android:textColor="#000000" >
        </AutoCompleteTextView>

        <Button
            android:id="@+id/buttonSearchThingsToDo"
            style="@style/StandardButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/autoCompleteThingsToDo"
            android:text="@string/search" />
    </RelativeLayout>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="8dip" >

        <Spinner
            android:id="@+id/spinnerCategories"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/spinner_filters" />

        <View
            android:layout_width="10dip"
            android:layout_height="match_parent" />

        <Spinner
            android:id="@+id/spinnerSortOrder"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/spinner_filters" />
    </TableRow>
</LinearLayout>

<ListView
    android:id="@+id/listViewThingsToDo"
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >
</ListView> 
```

spinner_filters.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/spinnerbg" android:state_pressed="true"><shape>
        <solid android:color="@color/blue" />

        <stroke android:color="@color/blue" />

        <corners android:radius="3dp" />
    </shape></item>
<item android:drawable="@drawable/spinnerbg" ><shape>
        <solid android:color="#00000000" />

        <corners android:radius="3dp" />
    </shape></item>

</selector> 
```

spinnerbg.9.png：

![在此处输入图像描述](../Images/4e5daa6fc447e049a6556ed3eca12bb8.png)

关于为什么文本不显示的任何想法？

编辑：好的，已经解决了。问题出在 9.png 文件中，它的设计不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:02:30.823

里面的文字可能是白色的。尝试更改背景的颜色，以确保...

# sql-server-2008 - 想要通过从同一个表中获取一行或多行来在具有计算列的表中插入一行

> ID：10683934
> 
> 赞同：1
> 
> 时间：2012-05-21T10:57:13.533
> 
> 标签：sql-server-2008

我有一张有 50 列的表。它插入了两行。我想通过仅从该表中获取值来添​​加第三行。

```
insert into Sample([IDX],[CODE]
      ,[NAME]
      ,[LABEL]
      ,[BILLING_ADDRESS]
      ,[PRIMARY_CONTACT_NAME]
      ,[PRIMARY_CONTACT_EMAIL]
      ,[SECONDARY_CONTACT_NAME]
      ,[SECONDARY_CONTATCT_EMAIL]
      ,[RDBMS_SERVER]
      ,[RDBMS_DB_NAME]
      ,[RDBMS_LOGIN]
      ,[RDBMS_PWD]
      ,[ETL_FOLDER_PATH])
values (select [IDX],[CODE]
      ,[NAME]
      ,[LABEL]
      ,[BILLING_ADDRESS]
      ,[PRIMARY_CONTACT_NAME]
      ,[PRIMARY_CONTACT_EMAIL]
      ,[SECONDARY_CONTACT_NAME]
      ,[SECONDARY_CONTATCT_EMAIL]
      ,[RDBMS_SERVER]
      ,[RDBMS_DB_NAME]
      ,[RDBMS_LOGIN]
      ,[RDBMS_PWD]
      ,[ETL_FOLDER_PATH] 
     from Sample where IDX = 2
) 
```

在上面的例子中，我只取了几列。在尝试执行此查询时，它显示如下消息。

> INSERT 语句中的列多于 VALUES 子句中指定的值。VALUES 子句中的值数必须与 INSERT 语句中指定的列数相匹配。

这里标签字段是计算值。[标签] = [代码]+[名称] 如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:01:49.257

采用：

插入样本（[IDX]，[CODE]，[NAME]，[BILLING_ADDRESS]，[PRIMARY_CONTACT_NAME]，[PRIMARY_CONTACT_EMAIL]，[SECONDARY_CONTACT_NAME]，[SECONDARY_CONTACTT_EMAIL]，[RDBMS_SERVER]，[RDBMS_DB_NAME]，[RDBMS_LOGIN]，[RDBMS_PWD ] ,[ETL_FOLDER_PATH]) 选择 [IDX],[CODE],[NAME],[BILLING_ADDRESS],[PRIMARY_CONTACT_NAME] ,[PRIMARY_CONTACT_EMAIL] ,[SECONDARY_CONTACT_NAME] ,[SECONDARY_CONTACTT_EMAIL] ,[RDBMS_SERVER] ,[RDBMS_DB_NAME] ,[RDBMS_LOGIN] ,[RDBMS_PWD] ,[ETL_FOLDER_PATH] 来自 IDX = 2 的示例

[标签] 将自行计算，无需插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:03:48.203

不要使用`values`

```
insert into Sample([IDX],[CODE]
      ,[NAME]
      ,[LABEL]
      ,[BILLING_ADDRESS]
      ,[PRIMARY_CONTACT_NAME]
      ,[PRIMARY_CONTACT_EMAIL]
      ,[SECONDARY_CONTACT_NAME]
      ,[SECONDARY_CONTATCT_EMAIL]
      ,[RDBMS_SERVER]
      ,[RDBMS_DB_NAME]
      ,[RDBMS_LOGIN]
      ,[RDBMS_PWD]
      ,[ETL_FOLDER_PATH])
select [IDX],[CODE]
      ,[NAME]
      ,[LABEL]
      ,[BILLING_ADDRESS]
      ,[PRIMARY_CONTACT_NAME]
      ,[PRIMARY_CONTACT_EMAIL]
      ,[SECONDARY_CONTACT_NAME]
      ,[SECONDARY_CONTATCT_EMAIL]
      ,[RDBMS_SERVER]
      ,[RDBMS_DB_NAME]
      ,[RDBMS_LOGIN]
      ,[RDBMS_PWD]
      ,[ETL_FOLDER_PATH] 
     from Sample where IDX = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:08:54.760

如果要插入一行静态数据（不是查询的结果），则应使用“值”。

要插入作为查询结果的多行（或单行），请使用语法：

```
insert into (column, column, ...)
  select column, column
    from xxxx 
```

# bash - 错误：意外的运算符

> ID：10683939
> 
> 赞同：0
> 
> 时间：2012-05-21T10:57:15.070
> 
> 标签：bash

```
test `find /mnt/backups/mysql/information_schema-20120521-*.sql -type f -mmin -1500` 
```

我正在尝试检查文件的年龄，但我收到“预期的一元运算符”和“意外的运算符”错误，具体取决于脚本中使用的 bash / sh。

我怎样才能避免它？

如果我不使用通配符“*”，那么一切正常，但必须使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:44:08.473

我会尝试

```
find /mnt/backups/mysql/ -name "information_schema-20120521-*.sql" -type f -mmin -1500 
```

如果您只想要 /mnt/backups/mysql/ 下的文件，也许添加 --maxdepth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T11:01:10.973

尝试引用这个论点，因为通配符`find`似乎会导致 bash 出现问题：

```
test `find '/mnt/backups/mysql/information_schema-20120521-*.sql' -type f -mmin -1500` 
```

# jqgrid - JQGrid xmlreader 自定义 id

> ID：10683940
> 
> 赞同：2
> 
> 时间：2012-05-21T10:57:25.943
> 
> 标签：jqgrid, jquery-selectors, xmlreader

我需要将自定义 id 传递给 xmlreader 结构，以便 JQGrid 从 xml 数据中的节点组合中获取唯一标识行。我目前有这个版本工作

```
var feedXmlReaderOptions = {
    root: "feed",
    row: "entry",
    repeatitems: false,
    id: "d|clmNum,d|seqNum"
}; 
```

它连接 clmNum 和 seqNum xml 节点以构建行的唯一标识符。

顺便说一句，d| 指的是xml中使用的命名空间，所以请忽略它，它与这个问题无关。这里的问题是我需要 clmNum 和 seqNum 之间的分隔符，以便稍后在

```
ajaxRowOptions: {
        beforeSend:...
} 
```

事件，以便我可以动态构建需要发布到的 URL。发布到的 URL 显然侦听与网格行相同的 id，因此您可以看到连接。考虑到所使用的 CSS 选择器样式，我尝试的是 CSS 伪元素，通过它可以将自定义的、不存在的元素插入到选择器中：

```
d|clmNum:after { content: "_" },d|seqNum
d|clmNum.after('_'),d|seqNum 
```

但它不起作用......jQuery 选择器抱怨 {，而 jquery .after() 就像 .before() 一样，似乎在选择器返回结果之后作为方法而不是参数内联工作。

那么，有人知道如何做到这一点吗？在创建 xml 期间返回连接键的替代方法不起作用，xml 不受我的控制。

谢谢一堆。serban@nj，美国

为澄清而添加：我的 XML 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?> 
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xml:base="http://localhost:8888/eClaimWS/olddispatch.svc/">
<title type="text">DispatchManualInfo</title> 
<id>http://localhost:8888/eClaimWS/olddispatch.svc/DispatchManualInfo</id> 
<updated>2012-05-21T18:13:44Z</updated> 
<link rel="self" title="DispatchManualInfo" href="DispatchManualInfo" /> 
<entry>
<id>http://localhost:8888/eClaimWS/olddispatch.svc/DispatchManualInfo(clmNum='00C1400J0025',seqNum=1)</id> 
<title type="text" /> 
<updated>2012-05-21T18:13:44Z</updated> 
<author>
<name /> 
</author>
<link rel="edit" title="DispatchManualInfo" href="DispatchManualInfo(clmNum='00C1400J0025',seqNum=1)" /> 
<category term="eClaimDispatchProdModel.DispatchManualInfo" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" /> 
<content type="application/xml">
<m:properties>
<d:busPhone /> 
<d:damDesc>cat</d:damDesc> 
<d:vehColor /> 
<d:totLssInd /> 
<d:dispTransCtr m:type="Edm.Int32" m:null="true" /> 
<d:clmntCity /> 
<d:companyCd>01</d:companyCd> 
<d:insZip>07470</d:insZip> 
<d:adjZip>07701 565</d:adjZip> 
<d:vehLocSt>NJ</d:vehLocSt> 
<d:vehMake /> 
<d:lossTypeAbbr>WIND</d:lossTypeAbbr> 
<d:homePhone>201-301-5411</d:homePhone> 
<d:insLstNm>derti</d:insLstNm> 
<d:city>wayne</d:city> 
<d:adjLocalPhone>973-434-2482</d:adjLocalPhone> 
<d:vehVin>UNK99999999999999</d:vehVin> 
<d:adjName>Elaine Maniscalco</d:adjName> 
<d:lstChgUser>Vendor</d:lstChgUser> 
<d:seqNum m:type="Edm.Int32">1</d:seqNum> 
<d:clmNum>00C1400J0025</d:clmNum> 
</m:properties>
</content>
</entry>
......
</feed> 
```

我不能使用 feed>entry>id 来配置 xmlreader id 参数，因为 id 节点太大并且作为网格的 rowid 会导致各种问题......我需要的是 id 节点的短版本，一些像 00C1400J0025_1。由于 clmNum 和 seqNum 在 XML 中也独立存在，我想将 xmlreader 与

```
id: "d|clmNum:after { content: "_" },d|seqNum" 
```

那没有用。和

```
id: "d|clmNum,d|seqNum" 
```

rowid 变为 00C1400J00251 并且我很难解析它，因为 clmNum 可以是任何长度的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:18:31.800

我建议您使用`beforeProcessing`回调来规范化元素的`<id>`值`<entry>`

```
<id>http://localhost:8888/eClaimWS/olddispatch.svc/DispatchManualInfo(clmNum='00C1400J0025',seqNum=1)</id> 
```

至

```
<id>00C1400J0025_1</id> 
```

要实现这一点，您可以使用`RegEx`例如。

之后，您可以轻松地用您需要的信息填充网格。要从具有命名空间或其他一些特殊字符的元素中读取信息，您可以使用两个反斜杠转义该字符：（`\\`请参阅[此处](http://api.jquery.com/category/selectors/)有关转义元字符的信息）。例如要读取元素`d:adjName`，您可以使用`xmlmap: 'd\\:adjName'`. 该方法在除 webkit 浏览器（Chrome、Safari）之外的所有浏览器中都能完美运行。作为一种可以使用的解决方法，`xmlmap: 'd\\:adjName, adjName'`因为它可以`xmlmap: 'adjName'`在 Chrome 和 Safari 中使用。我个人发现使用`getElementsByTagNameNS`.

[演示](http://www.ok-soft-gmbh.com/jqGrid/CustomXmlReader.htm)看起来像：

![在此处输入图像描述](../Images/72da39729b0e11c210df354fdb067676.png)

并具有以下代码

```
$("#list").jqGrid({
    url: "CustomXmlReader.xml",
    colModel: [
        {name: 'id'}, // optional
        {name: 'updated', formatter: 'date'},
        {name: 'adjName', xmlmap: function (entry) { // 'd\\:adjName, adjName'
                var nodes;
                if (entry.getElementsByTagNameNS) {
                    nodes = entry.getElementsByTagNameNS("http://schemas.microsoft.com/ado/2007/08/dataservices", "adjName");
                } else {
                    // old IE browsers
                    nodes = entry.getElementsByTagName("d:adjName");
                }
                return nodes.length > 0 ? nodes[0].firstChild.nodeValue : "";
            }}
    ],
    gridview: true,
    height: "auto",
    xmlReader: {
        root: "feed",
        row: "entry",
        repeatitems: false,
        id: "id"
    },
    beforeProcessing: function (data) {
        $(data).children("feed").children("entry").each(function () {
            var id = $(this).find(">id"),
                res = /\(clmNum='([0-9A-Z]+)',seqNum=(\d+)\)$/g.exec(id.text());
            id.text(res[1] + "_" + res[2]);
        });
    }
}); 
```

# c++ - 安全清除内存并重新分配

> ID：10683941
> 
> 赞同：25
> 
> 时间：2012-05-21T10:57:39.673
> 
> 标签：c++, security, memory, cryptography, passwords

按照[这里](https://stackoverflow.com/questions/5698002/how-does-one-securely-clear-stdstring)的讨论，如果你想有一个安全的类来在内存上存储敏感信息（例如密码），你必须：

*   memset/在释放内存之前清除内存
*   重新分配也必须遵循相同的规则——不要使用 realloc，而是使用 malloc 创建一个新的内存区域，将旧内存复制到新内存，然后在最终释放之前 memset/clear 旧内存

所以这听起来不错，我创建了一个测试类来看看这是否有效。所以我做了一个简单的测试用例，我不断添加单词“LOL”和“WUT”，然后在这个安全缓冲区类中添加一个数字大约一千次，销毁该对象，然后最终执行导致核心转储的操作。

由于该类应该在销毁之前安全地清除内存，因此我不应该能够在 coredump 上找到“LOLWUT”。但是，我还是设法找到了它们，并想知道我的实现是否只是错误。但是，我使用 CryptoPP 库的 SecByteBlock 尝试了同样的事情：

```
#include <cryptopp/osrng.h>
#include <cryptopp/dh.h>
#include <cryptopp/sha.h>
#include <cryptopp/aes.h>
#include <cryptopp/modes.h>
#include <cryptopp/filters.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
using namespace std;

int main(){
   {
      CryptoPP::SecByteBlock moo;

      int i;
      for(i = 0; i < 234; i++){
         moo += (CryptoPP::SecByteBlock((byte*)"LOL", 3));
         moo += (CryptoPP::SecByteBlock((byte*)"WUT", 3));

         char buffer[33];
         sprintf(buffer, "%d", i);
         string thenumber (buffer);

         moo += (CryptoPP::SecByteBlock((byte*)thenumber.c_str(), thenumber.size()));
      }

      moo.CleanNew(0);

   }

   sleep(1);

   *((int*)NULL) = 1;

   return 0;
} 
```

然后编译使用：

```
g++ clearer.cpp -lcryptopp -O0 
```

然后启用核心转储

```
ulimit -c 99999999 
```

但是，启用核心转储并运行它

```
./a.out ; grep LOLWUT core ; echo hello 
```

给出以下输出

```
Segmentation fault (core dumped)
Binary file core matches
hello 
```

这是什么原因造成的？由于 SecByteBlock 的追加引起的重新分配，应用程序的整个内存区域是否重新分配了？

另外，[这是 SecByteBlock 的文档](http://www.cryptopp.com/docs/ref/class_sec_block.html)

**编辑**：使用 vim 检查核心转储后，我得到了这个：http: [//imgur.com/owkaw](https://imgur.com/owkaw)

**edit2**：更新了代码，使其更容易编译，以及编译说明

**最终编辑3**：看起来 memcpy 是罪魁祸首。请参阅 Rasmus`mymemcpy`在下面的回答中的实施。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T20:48:46.800

尽管出现在 coredump 中，但在清除缓冲区后，密码实际上不再存在于内存中。问题是`memcpy`足够长的字符串会将密码泄漏到 SSE 寄存器中，而*这些* 正是 coredump 中显示的内容。

当`size`to 的参数`memcpy`大于某个阈值时——<a href="http://opensource.apple.com/source/Libc/Libc-825.25/x86_64/string/bcopy_sse42.s">mac 上的 80 字节——那么SSE 指令用于进行内存复制。这些指令速度更快，因为它们可以一次并行复制 16 个字节，而不是逐个字符、逐字节或逐字地复制。[以下是 Mac 上 Libc](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc183.htm)源代码的关键部分 ：

```
LAlignedLoop:               // loop over 64-byte chunks
    movdqa  (%rsi,%rcx),%xmm0
    movdqa  16(%rsi,%rcx),%xmm1
    movdqa  32(%rsi,%rcx),%xmm2
    movdqa  48(%rsi,%rcx),%xmm3

    movdqa  %xmm0,(%rdi,%rcx)
    movdqa  %xmm1,16(%rdi,%rcx)
    movdqa  %xmm2,32(%rdi,%rcx)
    movdqa  %xmm3,48(%rdi,%rcx)

    addq    $64,%rcx
    jnz     LAlignedLoop

    jmp     LShort                  // copy remaining 0..63 bytes and done 
```

`%rcx`是循环索引寄存器，是`%rsi`源地址寄存器，*是**目标*地址寄存器。每次循环运行，64 个字节从源缓冲区复制到 4 个 16 字节 SSE 寄存器 ；然后将这些寄存器中的值复制到目标缓冲区。`%rdi`*`xmm{0,1,2,3}`*

 *该源文件中有更多内容，以确保副本仅发生在对齐的地址上，以填充在执行 64 字节块后剩余的副本部分，并处理源和目标重叠的情况。

但是—<strong>使用后不会清除 SSE 寄存器！这意味着被复制的 64 字节缓冲区仍然存在于`xmm{0,1,2,3}`寄存器中。

这是对 Rasmus 程序的修改，它显示了这一点：

```
#include <ctype.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <emmintrin.h>

inline void SecureWipeBuffer(char* buf, size_t n){
  volatile char* p = buf;
  asm volatile("rep stosb" : "+c"(n), "+D"(p) : "a"(0) : "memory");
}

int main(){
  const size_t size1 = 200;
  const size_t size2 = 400;

  char* b = new char[size1];
  for(int j=0;j<size1-10;j+=10){
    memcpy(b+j, "LOL", 3);
    memcpy(b+j+3, "WUT", 3);
    sprintf((char*) (b+j+6), "%d", j);
  }
  char* nb = new char[size2];
  memcpy(nb, b, size1);
  SecureWipeBuffer(b,size1);
  SecureWipeBuffer(nb,size2);

  /* Password is now in SSE registers used by memcpy() */
  union {
    __m128i a[4];
    char c;
  };
  asm ("MOVDQA %%xmm0, %0": "=x"(a[0]));
  asm ("MOVDQA %%xmm1, %0": "=x"(a[1]));
  asm ("MOVDQA %%xmm2, %0": "=x"(a[2]));
  asm ("MOVDQA %%xmm3, %0": "=x"(a[3]));
  for (int i = 0; i < 64; i++) {
      char p = *(&c + i);
      if (isprint(p)) {
        putchar(p);
      } else {
          printf("\\%x", p);
      }
  }
  putchar('\n');

  return 0;
} 
```

在我的 Mac 上，打印：

```
0\0LOLWUT130\0LOLWUT140\0LOLWUT150\0LOLWUT160\0LOLWUT170\0LOLWUT180\0\0\0 
```

现在，检查核心转储，密码只出现一次，并且是那个确切的`0\0LOLWUT130\0...180\0\0\0`字符串。核心转储必须包含所有寄存器的副本，这就是该字符串存在的原因——它是`xmm{0,1,2,4}`寄存器的值。

因此**，在调用 之后，密码实际上不再在 RAM 中 `SecureWipeBuffer`，这只是**因为它实际上是在某些只出现在 coredump 中的寄存器中。如果您担心 `memcpy`存在可能被 RAM 冻结利用的漏洞，请不要再担心。如果在寄存器中有密码副本困扰您，请使用`memcpy`不使用 SSE2 寄存器的修改，或在完成后清除它们。如果您对此真的很偏执，请继续测试您的核心转储，以确保编译器不会优化您的密码清除代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-22T07:53:25.130

这是另一个更直接地重现问题的程序：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

inline void SecureWipeBuffer(char* buf, size_t n){
  volatile char* p = buf;
  asm volatile("rep stosb" : "+c"(n), "+D"(p) : "a"(0) : "memory");
}

void mymemcpy(char* b, const char* a, size_t n){
  char* s1 = b;
  const char* s2= a;
  for(; 0<n; --n) *s1++ = *s2++;
}

int main(){
  const size_t size1 = 200;
  const size_t size2 = 400;

  char* b = new char[size1];
  for(int j=0;j<size1-10;j+=10){
    memcpy(b+j, "LOL", 3);
    memcpy(b+j+3, "WUT", 3);
    sprintf((char*) (b+j+6), "%d", j);
  }
  char* nb = new char[size2];
  memcpy(nb, b, size1);
  //mymemcpy(nb, b, size1);
  SecureWipeBuffer(b,size1);
  SecureWipeBuffer(nb,size2);

  *((int*)NULL) = 1;

  return 0;    
} 
```

如果你用更小的尺寸替换`memcpy`或`mymemcpy`使用更小的尺寸，问题就会消失，所以我最好的猜测是内置的 memcpy 做了一些事情，将部分复制的数据留在内存中。

我想这只是表明从内存中清除敏感数据实际上是不可能的，除非它是从头开始设计到整个系统中的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T02:43:33.810

字符串文字将存储在内存中，不由 SecByteBlock 类管理。

另一个SO问题很好地解释了它： [C++中的字符串文字是在静态内存中创建的吗？](https://stackoverflow.com/questions/349025/is-a-string-literal-in-c-created-in-static-memory)

您可以通过查看获得的匹配数来尝试确认字符串文字是否可以解释 grep 匹配。您还可以打印出 SecByteBlock 缓冲区的内存位置，并尝试查看它们是否与核心转储中与您的标记匹配的位置相对应。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T00:14:41.723

在不检查 的详细信息的情况下`memcpy_s`，我怀疑您看到的是一个临时堆栈缓冲区，用于`memcpy_s`复制小内存缓冲区。您可以通过在调试器中运行并`LOLWUT`查看查看堆栈内存时是否显示来验证这一点。

[在调整内存分配大小时`reallocate`使用 Crypto++ 中的实现`memcpy_s`，这就是为什么您能够`LOLWUT`在内存中找到一些字符串的原因。此外，该转储中许多不同的`LOLWUT`字符串重叠的事实表明它是一个正在被重用的临时缓冲区。]

它的自定义版本`memcpy`只是一个简单的循环，不需要计数器之外的临时存储，因此这肯定比`memcpy_s`实现方式更安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T14:12:10.413

我建议这样做的方法是*加密*内存中的数据。这样，无论数据是否仍在内存中，数据始终是安全的。当然，缺点是每次访问数据时加密/解密数据的开销。*

# xcode - 更改 Xcode 项目的路径？

> ID：10683945
> 
> 赞同：0
> 
> 时间：2012-05-21T10:58:09.703
> 
> 标签：xcode, path, directory

我开始了一个测试项目，我将它保存到我的 Dropbox 文件夹中，该项目发展成为真正的交易。我需要将该项目移动到我本地的 Git 存储库，但是 Xcode 不允许我这样做。我已将内容复制到新文件夹，但如果我从新文件夹打开项目并进行任何更改，它们将保存到原始文件夹。我已经用谷歌搜索并尝试了我找到的所有内容，但无论如何，我的代码总是保存到 Dropbox 原始文件中。

如果我删除 Dropbox 文件夹，当我打开 Xcode 并进行任何更改时，Xcode 会崩溃。放回去，Xcode 会自动运行，但所有新更改都会保存到 Dropbox 文件夹中。

我可能错过的任何想法或链接？

干杯。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-22T13:13:48.547

答案是在 Xcode 中关闭项目，然后重新打开新/移动的项目文件。

# php - 图算法的PHP实现

> ID：10683950
> 
> 赞同：3
> 
> 时间：2012-05-21T10:58:34.563
> 
> 标签：php, graph-algorithm, depth-first-search

我不是 PHP 程序员，但我需要编写一个脚本，并且我想在 PHP 中准备一些 DFS 算法。我认为所有编程语言都应该至少有一些用于处理图形的库，所以我不会被迫自己实现它。

有经验的 PHP 程序员能否告诉我，我在哪里可以找到一些可以让我执行 DFS 的免费库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T11:12:53.520

[http://mirkules.com/blog/?p=20](http://mirkules.com/blog/?p=20)

# c# - 将已安装的 C# 应用程序连接到本地 SQL Server 2005 Express - 用户未与受信任的 sql 连接关联

> ID：10683954
> 
> 赞同：2
> 
> 时间：2012-05-21T10:58:56.573
> 
> 标签：c#, sql-server-2005

（我知道网上有很多这样的问题，我已经花了几天时间试图解决这个问题，但我没有得到任何结果。我是新手，所以请多多包涵）

**1.问题**

在我的朋友计算机（Vista Home Premium）上安装我的应用程序 SQL Server 2005 Express 并将数据库（mdf 文件）附加到新的 SQL 服务器后，每当我启动我的应用程序或在应用程序中打开一个新表单（C# windows 表单）时，我收到以下消息：

> System.Data.SqlClient.SqlException：用户“”登录失败。用户未与受信任的 SQL Server 连接关联。

如果我单击“继续”，我可以读取/写入数据库并且应用程序按预期工作（直到我打开一个新表单并再次收到相同的消息）。

**2.所以这就是我到目前为止所做的：**

我已经打开了“SQL Server 和 Windows 身份验证模式”，因为我已经看到很多线程都建议这样做，但这并没有帮助。

我当前的连接字符串：

> “数据源=.\SQLEXPRESS；初始目录=pj；集成安全=SSPI；”

由于我的连接字符串包含“.\SQLEXPRESS”，它将尝试连接“计算机名\用户名”，在我的情况下为“TONY-COMPUTER\TONY”，所以我添加了一个具有该名称的 SQL 用户以及角色成员身份 db_datareader 和db_datawriter 能够读取/写入数据库。

我还尝试了一个连接字符串，例如：

> “数据源=.\SQLEXPRESS；初始目录=pj；用户ID=Tony；密码=123；”

然后添加 SQL 用户“Tony”。

但我不断收到同样的错误。令我困惑的是错误消息中没有用户名，我希望看到“TONY-COMPUTER\TONY”或“Tony”，但它是空白的。

非常感谢任何帮助！

/托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:25:54.133

如果您收到 Sql 身份验证错误，但您的程序仍然能够访问您的数据库，那么这表明您正在尝试以两种不同的方式访问数据库。

你确定你没有一些不必要的代码来尝试访问数据库可能使用一些硬编码的连接字符串？

如果您使用 Visual Studio 设计器定义了连接，有时可能会发生这种情况，其设置可能存储在 Designer.cs 文件中，但随后可能会在运行时使用正确的连接字符串被覆盖。在您的开发机器上，硬编码的连接字符串可能会起作用，因此不会被注意到。

这也可以解释为什么错误与实际连接字符串没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T13:39:59.680

你在视觉工作室编程吗？如果是，您是否尝试在服务器资源管理器中添加数据连接？如果你有，你可以右键单击你的连接，选择属性，然后你可以选择连接字符串。只需更改用户名和密码。

还有什么可以帮助的[是](http://www.connectionstrings.com/)

# android - 使用 DefaultHttpClient 从 Web 下载文件

> ID：10683955
> 
> 赞同：-2
> 
> 时间：2012-05-21T10:59:01.497
> 
> 标签：android

任何人都知道如何使用 Android 中的 DefaultHttpClient 从 Web 下载文件？
我尝试了大多数可能的选项，是 openurl 连接，但我需要使用 DefaultHttpClient

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:17:51.357

我可以举一个例子，它肯定会帮助你 HttpClient httpclient = new DefaultHttpClient();

```
 // Prepare a request object
 HttpGet httpget = new HttpGet("http://www.apache.org/");

 // Execute the request
 HttpResponse response = httpclient.execute(httpget);

 // Examine the response status
 System.out.println(response.getStatusLine());

 // Get hold of the response entity
 HttpEntity entity = response.getEntity();

 // If the response does not enclose an entity, there is no need
 // to worry about connection release
 if (entity != null) {
     InputStream instream = entity.getContent();
     try {

         BufferedReader reader = new BufferedReader(
                 new InputStreamReader(instream));
         // do something useful with the response
         System.out.println(reader.readLine());

     } catch (IOException ex) {

         // In case of an IOException the connection will be released
         // back to the connection manager automatically
         throw ex;

     } catch (RuntimeException ex) {

         // In case of an unexpected exception you may want to abort
         // the HTTP request in order to shut down the underlying
         // connection and release it back to the connection manager.
         httpget.abort();
         throw ex;

     } finally {

         // Closing the input stream will trigger connection release
         instream.close();

     }

     // When HttpClient instance is no longer needed,
     // shut down the connection manager to ensure
     // immediate deallocation of all system resources
     httpclient.getConnectionManager().shutdown();
 } 
```

# python-3.x - python 3.2.3 Tkinter缩放小部件嵌套在Frame中时挂起

> ID：10683957
> 
> 赞同：0
> 
> 时间：2012-05-21T10:59:02.613
> 
> 标签：python-3.x, tkinter, tk

我对 Tk 相对缺乏经验，但我之前做过一些简单的项目，这让我很难过：

我有一个代表时间滑块的比例小部件。threading.Timer 每隔一段时间就会关闭以移动比例小部件。按下按钮时，线程被禁用；在按钮上，线程被重新启用。因此，用户可以单击并拖动时间滑块来重新定位应用程序的“时间”。到目前为止，在 UI 操作期间禁用线程已经防止了我认为与线程安全有关的崩溃（看似不确定的崩溃，发生在线程试图更新滑块的时间）。

唯一的其他“活动” UI 元素是一系列按钮，这些按钮使用 command=fnc 参数进行配置。规模是我使用绑定（）的唯一地方。该应用程序是全屏应用程序，因此我在根级别使用 self.root.overridedirect(1) 和 geometry() 来删除菜单和边框，并使其全屏显示。

我已经更改了代码，因此缩放小部件现在位于 Frame 内，而不是绝对根级别：

```
self.scale_timescrub = tkinter.Scale(self.root.master, from_=0, to=60, width=height_one, orient=tkinter.HORIZONTAL, showvalue=0)
self.scale_timescrub.grid(row=2,column=0,sticky=tkinter.N+tkinter.S+tkinter.E+tkinter.W)
self.scale_timescrub.bind('<Button-1>', self.press_scrub)
self.scale_timescrub.bind('<ButtonRelease-1>', self.release_scrub) 
```

现在，每当我尝试使用缩放小部件进行任何 UI 操作时，应用程序都会挂起。按下滑块上的任何位置都会锁定 CPU，并且应用程序永远不会返回。我知道这与育儿有关，因为当我破解应用程序以将规模放回根级别时，它又可以工作了。当它是框架的父级时，小部件似乎永远不会进入它的绑定函数，如 press_scrub。

谁能告诉我我在这里做错了什么？

在 Windows 7 上运行 python 3.2.3 64b。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:10:53.013

您写道：“一个 threading.Timer 每隔一段时间就会关闭以移动比例小部件”。在处理此计时器事件时，您是否从另一个线程调用小部件方法？如果是这样，那肯定是问题所在。您根本无法从另一个线程更改 UI。

你不应该需要一个 Timer 对象——你知道你可以安排一些东西定期运行`after`吗？

要考虑的另一件事，但不能通过查看您的代码片段来确定，是您是否`pack`在同一个容器小部件中使用。结合`pack`和`grid`在同一个主人中会导致你看到的行为。通常，在这种情况下，您会在启动时看到这种行为，但并非总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T19:55:18.427

问题似乎在于我使用“master”关键字作为全窗口 Frame 对象的名称。当我将 self.root.master 批量重命名为 self.root.full_frame 时，一切都按预期工作。感谢 Bryan 指出线程危险，我将用它来重新评估我的应用程序的其他方面。感谢 mgilson 对可重现性表现出兴趣。在发布之前，我没有配对可复制，因为我认为我设置了太多奇怪的配置，以至于其中任何一个都可能涉及。无论如何，谢谢大家。自我提醒：不要称任何东西为“大师”。

# ruby-on-rails - 当我在其中渲染部分时，Rails js.erb 模板代码未触发，为什么会发生这种情况？

> ID：10683960
> 
> 赞同：0
> 
> 时间：2012-05-21T10:59:05.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我有一个允许用户发布微博的应用程序，当发布微博时，我使用 ajax 和 jquery 更新页面上的帖子而不刷新页面。

直到几天前，这一切正常，但突然之间它随机运行，有时它不起作用，有时它会。发布了微博并更新了数据库，但我渲染的 js 模板似乎大部分时间都没有被触发。

**Microposts 控制器创建动作：**

```
def create
     @micropost = current_user.microposts.build(params[:micropost])

        respond_to do |format|
            if @micropost.save
            format.js   { render :post_on_wall }
            end
        end

end 
```

**Post_on_wall js 模板：**

```
$('form#new_micropost').off().on('ajax:success', function(e){
  alert('working');

    e.preventDefault();

    var micropostsContainer = $(this).parent('div.microposts');

    micropostsContainer.find('div.postsContainer').prepend('<%= j render("users/partials/micropost") %>');
    micropostsContainer.find('div.postHolder:first').hide().slideDown(250);
    micropostsContainer.find('textarea#micropostBox')
        .removeClass("micropost_content_expanded")
        .addClass("micropost_content")
        .val("");
    micropostsContainer.find('div#micropostOptions').addClass('micropostExtraOptions');
    micropostsContainer.find('div#postOptions').hide();
    micropostsContainer.find('div.imagePreview').css({
                                                  marginBottom:'0px',
                                                  marginTop:'0px'
                                                  })
                            .children().remove();

}); 
```

这就是奇怪的地方。如果我删除 js 模板中的所有代码，除了警报之外，它就会被触发。放回所有代码后，警报不会被触发。现在，如果我删除呈现 micropost 部分的 erb 代码并在字符串中添加一些文本，则会触发 js 模板警报并使用文本更新页面。

我不知道为什么会这样。我什至从几天前回到了我的应用程序的一个版本，我遇到了同样的问题。我唯一改变的是rails版本。我从 3.2.0 升级到 3.2.3。

考虑到微帖子的任何方式仍在发布到数据库，知道为什么我会遇到这个 JS Ajax 问题吗？我实际上已经接近取消在我的表单中使用 remote_to 而是直接使用 JQuery $.ajax ，但我不应该这样做。我喜欢利用 rails 提供的功能。

这是我的堆栈跟踪：

```
Started POST "/microposts" for 127.0.0.1 at 2012-05-21 11:41:31 +0100
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1] Processing by MicropostsController#create as JS
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Parameters: {"utf8"=>"✓", "authenticity_token"=>"4KVkocVy4ONTrhQ7DqBWsJXcZC8uYDOjmv6C1DlcRxg=", "micropost"=>{"photo_attributes"=>{"photo_album_id"=>"25"}, "user_id"=>"2", "content"=>"lkkllk", "link"=>""}, "commit"=>"Post"}
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]    (0.1ms)  BEGIN
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   SQL (0.3ms)  INSERT INTO `microposts` (`content`, `created_at`, `image`, `link`, `poster_id`, `updated_at`, `user_id`) VALUES ('lkkllk', '2012-05-21 10:41:31', NULL, '', NULL, '2012-05-21 10:41:31', 2)
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]    (0.3ms)  COMMIT
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Micropost Load (0.7ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Profile Load (0.3ms)  SELECT `profiles`.* FROM `profiles` WHERE `profiles`.`user_id` = 2 LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Photo Load (0.2ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 3 LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Photo Load (0.3ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`micropost_id` = 4892 LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]    (0.2ms)  SELECT COUNT(*) FROM `comments` WHERE `comments`.`micropost_id` = 4892
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT COUNT(*) FROM `comments` WHERE `comments`.`micropost_id` = 4892
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Photo Load (1.9ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 3 LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   CACHE (0.0ms)  SELECT `microposts`.* FROM `microposts` WHERE `microposts`.`user_id` = 2 ORDER BY microposts.created_at DESC LIMIT 1
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Rendered users/partials/_micropost.html.erb (19.3ms)
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1]   Rendered microposts/post_on_wall.js.erb (20.8ms)
[afb16a524c6d01fd7408e9944dbf30f9] [127.0.0.1] Completed 200 OK in 33ms (Views: 20.0ms | ActiveRecord: 4.5ms | Sphinx: 0.0ms) 
```

我真的很感激对可能发生的事情有所了解，以便我可以修复它。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T20:41:03.270

Rails 不知道要渲染哪个实例变量。要么在 :locals 散列中传递 @micropost，要么只是“渲染 @micropost”。

请参阅这个非常有用的 railscast 以获得出色的模型：[http ://railscasts.com/episodes/136-jquery](http://railscasts.com/episodes/136-jquery)

# r - 如何将 tapply 与包含复制、样本和求和的函数结合使用？

> ID：10683964
> 
> 赞同：1
> 
> 时间：2012-05-21T10:59:34.093
> 
> 标签：r, replicate, tapply

我有一个 csv 文件，其中包含来自不同学校的学生及其体重的详细信息

例如

```
School  School code Weight  Age Height
A   1   91  15  1.6
A   1   60  16  2.0
B   2   61  14  1.8
B   2   92  13  1.7
B   2   67  14  1.5
B   2   56  15  1.7
C   3   95  16  1.7
C   3   72  17  1.5
A   1   62  15  2.0
A   1   96  15  1.9
D   4   84  17  2.0
D   4   51  17  1.6
D   4   99  18  1.6
C   3   79  17  1.8
C   3   83  17  2.0
C   3   81  16  1.9
D   4   93  17  1.6
D   4   62  18  1.5
B   2   98  14  2.0
B   2   73  13  1.6 
```

我想反复对 n 个权重进行替换采样，对我的 n 个权重求和，然后计算出结果分布的第 95 个分位数。我想为 200 所学校中的每一所学校的学生执行此操作，从 1 到 25 改变 n 以最终得到以下输出：

```
n=1 2   3   4   …   25
School code =1                  
2                   
3                   
4           95th percentile of distrinution     
5                   
…                   
200 
```

我正在使用 tapply() 为所有 200 所学校找到 n=1 的答案

```
tapply(weight,schoolcode,quantile,probs=0.95) 
```

我正在使用 replilcate()、sum() 和 sample() 来模拟将两个权重加在一起的 1000 种组合。

```
nstudents=replicate(1000, sum(sample(weight, size=n, replace=TRUE) 
```

我无法将上述两者结合起来，以便在 tapply 函数中复制 sum 和 sample。

请指教。

我是 R 的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:35:42.720

把它放在一个函数中，然后将该函数与 一起使用`tapply()`，例如：

```
Myrepfun <- function(x,n){
    nstudents <- replicate(1000,sum(sample(x, size=n,replace=TRUE)))
    quantile(nstudents,probs=0.95)
}

tapply(weight,schoolcode,Myrepfun,n=2) 
```

这为您提供了每所学校的 0.95 分位数。如果您正在考虑引导，您可能需要检查：

[http://www.statoo.com/en/publications/bootstrap_scgn_v131.pdf](http://www.statoo.com/en/publications/bootstrap_scgn_v131.pdf)

[http://www.statmethods.net/advstats/bootstrapping.html](http://www.statmethods.net/advstats/bootstrapping.html)

了解其他可能的情况。

# web.py - web.py 处理程序类的参数

> ID：10683968
> 
> 赞同：6
> 
> 时间：2012-05-21T10:59:40.337
> 
> 标签：web.py

有没有办法将参数传递给 web.py 处理程序类构造函数？

例如，这些参数可能来自命令行（当主 web.py 脚本运行时），在第一个 arg（作为端口号）之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T16:08:03.437

当然，具体取决于您的意思。毕竟都是python。

考虑你有可用`web.config`的，它是一个`Storage`随处可见的对象。我经常使用它来放置系统范围的配置信息（并更改调试输出，如您将在示例中看到的那样）。

作为一个存储对象，您可以在其中添加自己的配置项，然后在您的 url 处理程序中访问它们。

```
if __name__ == '__main__':
    app = web.application(urls, globals())
    web.config.debug_sql = '--debug_sql' in sys.argv
    app.run() 
```

# php - PHP：读取输入字段的值

> ID：10683972
> 
> 赞同：0
> 
> 时间：2012-05-21T10:59:53.220
> 
> 标签：php, post

我有一个关于 PHP 的非常基本的问题。所以，有`index.php`一个表格。此表单包含输入字段`field1`：

**索引.php**

```
 <div id="container1">
    <form name="optform" method="post" action="processing.php">
                <div class = "box">
                    <label for="field1"><span>Bla bla bla:</span></label>
                    <input type="text" class="input-text" value="5" size="11" maxlength="11" name="field1" id="field1">
                </div>
                <br/>
            <div class="buttons">
                <a href="" class="regular" onclick="click_function();return false;">Run</a>
            </div>
    </form>
    </div>

    <div id="container2">

    </div>

    <script language="javascript">
    function click_function() {
         $('#container2').load('processing.php');
    }
    </script> 
```

我需要使用`field1`另一个名为 as 的 PHP 文件中的值`processing.php`。那么，我怎样才能从中读取这个值`processing.php`呢？我应该在 : 中做这样的事情`processing.php`吗？

**处理.php**

```
$field1value = $_POST["field1"]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T11:02:17.360

action 属性指定浏览器将提交到的 URL。也就是目前`index.php`。

如果你想使用代码`processing.php`来处理表单数据，那么*index 必须包含 processing*，而不是相反。（就代码而言，`processing.php`根本不会涉及，所以不能包含任何东西）。

或者，将操作更改为指向`processing.php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T11:02:38.093

你应该`POST`把表格`processing.php`

```
<form name="optform" method="post" action="processing.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:02:51.080

根据您想要的方式，您可以将其存储在[$_SESSION](http://php.net/manual/en/features.sessions.php)
中 ，您可以将`action`属性放入“processing.php”，这会将所有 POST 值提交到该文件。
您还可以在 index.php 中[包含](http://php.net/manual/en/function.include.php)processing.php

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:03:19.473

由于您的操作设置为 index.php，因此我感觉的数据将被 POST 到 index.php 本身。取而代之的是，为什么不包括 action="processing.php" ？

# javascript - 在 CRM 2011 Javascript 中设置和获取备注字段

> ID：10683977
> 
> 赞同：0
> 
> 时间：2012-05-21T11:00:22.853
> 
> 标签：javascript, dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我需要将 Notes 字段设置为 CRM 2011 表单中其他实体中的 Notes 字段值。所以，我需要知道如何使用 Javascript 获取和设置 Notes 字段。而且我无法在该部分中获取 Notes 字段的名称，如下图所示。

![在此处输入图像描述](../Images/d9f64c5be09c894208ec4b3976cc79e7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:08:37.563

CRM 中的注释在底层被称为“注释”。您可以像创建任何其他 CRM 记录类型一样创建注释，然后将该注释与感兴趣的实体记录相关联。我没有尝试从 javascript 中显式检索注释字段（我通常通过插件完成此操作，该插件记录在 SDK 中）。但是，我认为您没有理由无法执行 oData 查询来检索关联实体记录为实体类型 X 的注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:58:04.950

好的，这里需要两种方法。

@Philip_Rich 指出，现有记录的注释会在它们失去焦点时立即创建，因此可以进行查询。您应该能够很容易地找到现有代码（如果没有，请在此处询问）。

您自己承认，对于新的（未保存的）记录，在保存父记录之前不会保存注释。此时没有支持访问注释字段中的值的方法，但是这段讨厌的代码应该会获得您寻求的值。请注意，由于它不受支持，因此很容易受到表单中 DOM 更改的影响：

```
var myNotesText = document.getElementById("notescontrol").contentWindow.document.getElementById("NotesTable").children[1].children[4].children[0].innerText; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T05:16:58.077

在 JS 中你不需要做分配，你只需创建一个注释。

但是您必须先创建一个实体，然后才能将注释附加到它。

笔记可以是笔记和附件两种类型。

这是如何从 JS 创建简单（文本）注释（注释）的示例。

```
function _createAnnotation(entity, subject, text) {
    var orgService = GetOrganizationService();
    var annotation = {};
    annotation.Name = "annotation";
    annotation._properties = [];
    annotation._propertyTypes = [];
    annotation._properties['objectid'] = entity;
    annotation._propertyTypes['objectid'] = 'lookup';
    annotation._properties['subject'] = subject;
    annotation._propertyTypes['subject'] = 'string';
    annotation._properties['notetext'] = text;
    annotation._propertyTypes['notetext'] = 'string';
    annotation._properties['isdocument'] = 'false';
    annotation._propertyTypes['isdocument'] = 'boolean';
    annotation._properties['mimetype'] = 'text/html';
    annotation._propertyTypes['mimetype'] = 'string';
    orgService.Create(annotation);
} 
```

在哪里：

**entity** - 您要附加注释的实体的 (EntityReference)。

**主题**- （字符串）笔记的主题。

**text** - （字符串）注释的正文。

如果要附加 MS Office 文档，则需要更改*isdocument*和*mimetype*参数。

# jquery - 如何将 HTML (divs) + jQuery 代码变成生成 HTML 的 jQuery

> ID：10683990
> 
> 赞同：0
> 
> 时间：2012-05-21T11:01:03.847
> 
> 标签：jquery

我在页面上有一些 HTML，我使用 jQuery 从数组中修改/添加数据。如果可能的话，我想使用 jQuery 来生成 HTML/Divs 和 img src，以免不得不手动编辑每个页面以及 HTML 中所需的 div 数量。我无权为此访问数据库。

HTML 标记看起来像这样，我必须复制并粘贴数组中的项目数量：

```
<!-- START ITEM --><div class="itemWrapper"><a href="" class="itemLink">
<!-- IMG  --><img src="" class="itemImage"></a>
<!-- TITLE --><div class="itemTitle">T</div>
<!-- INFO --><div class="itemDesc"></div></div>
<!-- END ITEM --> 
```

jQuery 在 document.ready 上：

```
var infoArray = [
      'ABC12_square','Square','Square Description Here',
      'ABC13_polygon','Polygon','Polygon Description Here',
      'ABC14_triangle','Triangle','Triangle Description Here',
    ];
      $BoP = 'tag+info+here';

      i0 = 0;
      i1 = 1;
      i2 = 2;

    $('.itemImage').each(function(index) {
      $(this).attr("src", infoArray[i0]);
      i0 = i0+3;
      var prR = $(this).attr("src");
      var subprR = jQuery.trim(prR).substring(0, 5);
      $(this).attr("src", "/images/info/"+prR+"_M.jpg");
      $(this).parent().attr("href", "/iteminfopopup.htm?codes="+prR+"&BoP="+$BoP).attr('rel', 'mygroup').addClass('BoP8 fancybox.iframe');
      $(this).parent().append('<img src="/images/info/'+subprR+'_H.jpg" class="itemHover" border="0" width="250" height="354">');
    });

    $(".itemTitle").each(function(index) {
      $(this).text(infoArray[i1]);
      i1 = i1+3;
    });

    $(".itemDesc").each(function(index) {
      $(this).text(infoArray[i2]);
      i2 = i2+3;
    });
    // Setup Fancybox
  $(".BoP8").fancybox({
      closeBtn    : true,
      maxWidth  : 467,
      maxHeight  : 609,
      fitToView  : false,
      padding   : '5',
      openEffect  : 'none',
      loop: false,
      closeEffect  : 'none',
      nextEffect : 'none',
      prevEffect : 'none'
  });
    // Create image hover animation
  $(".itemImage").hover(
     function() {$(this).animate({"opacity": "0"}, "fast");},
     function() {$(this).animate({"opacity": "1"}, "fast");}
   ); 
```

小提琴：http: [//jsfiddle.net/ZuPnp/](http://jsfiddle.net/ZuPnp/)

我看过追加，但它总是出现可怕的错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T11:07:29.417

看看 jQuery 中的 Clone 函数。那可能就是你要找的东西。更多信息可以在这里找到：

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

这是一个如何使用它的示例：

```
<div id="holder">
<div class="itemWrapper"><a href="" class="itemLink">
<img src="" class="itemImage"></a>
<div class="itemTitle">T</div>
<div class="itemDesc"></div></div>
</div>

<script type="text/javascript">
    var infoArray = [
          'ABC12_square','Square','Square Description Here',
          'ABC13_polygon','Polygon','Polygon Description Here',
          'ABC14_triangle','Triangle','Triangle Description Here',
        ];

$.each(infoArray, function(index, val){
    //Dont forget to set the new values offcourse.
    $("div.itemWrapper").clone().appendTo("div#holder");
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:16:23.217

更好地`.prependTo()` 使用 `.clone()`

`See example` [http://jsfiddle.net/ipsjolly/fSAHp/](http://jsfiddle.net/ipsjolly/fSAHp/)

如果要显示固定数字，可以使用 for 循环