# StackOverflow 问答 12452000-12452999

# startup - Micro Cloud Foundry 微控制台启动

> ID：12452002
> 
> 赞同：0
> 
> 时间：2012-09-17T00:52:30.173
> 
> 标签：startup, init, cloud-foundry

因此，我一直在查看 init.d 脚本和 bashrc 文件，但找不到在初始登录时启动微控制台二进制文件的位置。谁能告诉我它在哪里？

另外，MCF 是否支持一次运行两个微控制台实例？我的 IaaS 提供商仅支持 SSH。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:15:33.287

我不完全确定您要在这里实现什么。您尝试使用 IaaS 提供商托管 MCF？比如EC2？如果是这种情况，我建议安装 VCAP，MCF 不会像 VCAP 项目那样保持最新。

在 Ubuntu 10.04 上安装非常简单，Github 项目页面上有说明，这里... [https://github.com/cloudfoundry/vcap](https://github.com/cloudfoundry/vcap)

# ios - iOS 辅助功能：捆绑显示名称的自定义语音文本

> ID：12452003
> 
> 赞同：28
> 
> 时间：2012-09-17T00:52:38.877
> 
> 标签：ios, accessibility, voiceover

iOS 配音无法正确读出我的公司名称。例如，它读出“dog”而不是“DOG”（不是我的真实公司名称，但你明白了）

我们通过告诉应用程序在读出公司名称的所有地方读出“DO G”来解决这个问题。

但是，语音在应用程序图标上和应用程序完成启动后都错误地读出了捆绑显示名称。

有没有办法让我的应用在应用启动后读出“DO G”而不是“狗”？我会强制应用程序在应用程序启动后不读出捆绑显示名称，然后手动读出“DO G”。

（我假设您无法为应用程序图标设置自定义配音，但任何知道我是否可以的人都可以获得奖励积分）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T12:46:49.337

我认为您不能为 VoiceOver 提供备用捆绑包名称字符串。但是，我能够找到一种可以在您的特定情况下工作的技巧：

VoiceOver 似乎以不同的方式解释各种控制字符。`\u7f`是拆分 VoiceOver 单词但不会破坏启动板中显示的字符之一。因此，将捆绑名称定义为：

```
CFBundleDisplayName="D\U007fO\U007fG"; 
```

in`InfoPlist.strings`似乎达到了你所需要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-25T00:55:28.573

从 iOS 8 开始，您可以通过将 CFBundleSpokenName 键添加到 Info.plist 来实现此目的。

[https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/plist/info/CFBundleSpokenName](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/plist/info/CFBundleSpokenName)

# regex - 在 bash 中，如何匹配 [SOME_ALPHA_NUM_WORD] 形式的字符串？

> ID：12452009
> 
> 赞同：0
> 
> 时间：2012-09-17T00:53:02.200
> 
> 标签：regex, bash

我已经尝试过`=~ "\[[A-Za-z0-9]+\]"`我期望会起作用但没有用的东西。我也试过`"[[A-Za-z0-9]+]"`和`"\[[:alnum:]+\]"`。我究竟做错了什么？我要匹配的示例行：（`[RTNUT18]`我正在遍历一个文件，有些行是这种形式）

这是我的代码片段：

```
while read line;
do
    if [[ $line =~ "^\[[A-Za-z0-9]+\]$" ]]; then
        echo match
    else
        echo no match
    fi
done < $1 
```

这是一个示例文件：

```
[RBPAT7]
Whatever=foo,bla
Otherline
RRR 
```

我跑：

```
./script.sh thefile.txt 
```

我根本没有受到`[RBPAT7]`打击

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:56:06.460

那样的东西是不够的。您必须在`[[`.

```
$ [[ [foo] =~ ^\[[A-Za-z0-9]+\]$ ]] ; echo $?
0 
```

**编辑：**

与`test`,不同，`[[`它的参数不需要引号。您的代码不匹配任何内容，因为您不能`"`在行首之前，也不能在行`"`尾之后。删除引号。

# google-drive-api - .Net 控制台应用程序模拟所有域用户

> ID：12452012
> 
> 赞同：1
> 
> 时间：2012-09-17T00:53:29.773
> 
> 标签：google-drive-api

我正在尝试编写一些代码 - 只是一个控制台应用程序 - 可以访问所有用户的驱动器文件。

使用 Document List v3，这很容易 - 只需将列表查询的“默认”替换为用户名，您就可以离开（使用客户端登录和管理员凭据）。

Drive api的执行方式是什么？如何检索特定用户的文件？

这个问题有一个 java 版本（我认为），但我在 .Net api OAuth Google API for Java 中找不到任何匹配的东西，[无法模拟用户](https://stackoverflow.com/questions/11660666/oauth-google-api-for-java-unable-to-impersonate-user)

# jquery - 使用链接触发时，jQuery 验证引擎不起作用

> ID：12452016
> 
> 赞同：0
> 
> 时间：2012-09-17T00:54:34.940
> 
> 标签：jquery, triggers, click, submit, jquery-validation-engine

当我通过链接（调用`submitlogin()`）提交表单时，它会返回一个 AJAX 错误，但如果我把它放在`alert('hello')`后面`submitlogin()`，它就可以工作。当我以这种方式触发提交时，似乎 AJAX 被调用了两次。谁能解释如何正确使用我的 AJAX 表单的链接表单提交？

**我的表格：**

```
<form id="loginForm" name='loginForm' class=" clean" action="{$base_url}/login" method="post">
    <input  type="text" name="Username" id="Username" class=" field"  value="" size="23" />
    <input  type="password" name="Password" id="Password" class="field"  size="23" />
    <input type="submit" name="submit" id="loginsubmit"  class="button icon-signin" value="Login" style="float:left;" />
    <a href=""  onclick="submitlogin();"  >Login</a>
</form> 
```

**我的 jQuery 表单验证：**

```
$('#loginForm').validationEngine({ajaxFormValidation: true,
    ajaxFormValidationURL :BASE_URL+"login/submit/",
    onAjaxFormComplete: function(status, form, json, options)
    {
        if(status && json.false==null) // no error messages
        {
            window.location=BASE_URL;
        }
    },
    onBeforeAjaxFormValidation: beforeCall
}); 
```

`button`当我手动单击提交时，以上工作正常。但是当我点击 时`link`，它失败了。我试过不同的版本`submitlogin()`，都失败了。

```
// 1
function submitlogin()
{
    $('#loginForm').validationEngine('triggersubmit');
    return false;
}    

// 2
function submitlogin()
{
    $('#loginForm').submit();
}       

// 3
function submitlogin()
{
    $('#loginForm').trigger('submit');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:04:34.353

我认为您可以尝试以下方法：

```
$("#login_link").click(function() {

    $('#loginForm').validationEngine({ajaxFormValidation: true,
        ajaxFormValidationURL :BASE_URL+"login/submit/",
        onAjaxFormComplete: function(status, form, json, options)
        {
            if(status && json.false==null) // no error messages
            {
                window.location=BASE_URL;
            }
        },
        onBeforeAjaxFormValidation: beforeCall
    });

}); 
```

`#login_link`你的链接在哪里：

```
<form id="loginForm" name='loginForm' class=" clean" action="{$base_url}/login" method="post">
    <input  type="text" name="Username" id="Username" class=" field"  value="" size="23" />
    <input  type="password" name="Password" id="Password" class="field"  size="23" />
    <input type="submit" name="submit" id="loginsubmit"  class="button icon-signin" value="Login" style="float:left;" />

    <!-- YOUR LINK "#login_link" -->
    <a href="" id="login_link" >Login</a>

</form> 
```

希望这对你有用。让我知道你的结果伙伴。

# python - Python垃圾收集器有问题吗？

> ID：12452017
> 
> 赞同：4
> 
> 时间：2012-09-17T00:55:01.833
> 
> 标签：python, numpy, h5py

我有一个简单的程序，它读取一个包含几百万行的大文件，解析每一行（`numpy array`）并转换成一个双精度数组（`python array`），然后写入一个`hdf5 file`. 我重复这个循环好几天。读取每个文件后，我删除所有对象并调用垃圾收集器。当我运行程序时，第一天解析没有任何错误，但第二天我得到了`MemoryError`. 我监控了我的程序的内存使用情况，在解析的第一天，内存使用量约为**1.5 GB**。第一天解析完成后，内存使用量下降到**50 MB**。现在当第二天开始时，我尝试从我得到的文件中读取行`MemoryError`。以下是程序的输出。

```
source file extracted at C:\rfadump\au\2012.08.07.txt
parsing started
current time: 2012-09-16 22:40:16.829000
500000 lines parsed
1000000 lines parsed
1500000 lines parsed
2000000 lines parsed
2500000 lines parsed
3000000 lines parsed
3500000 lines parsed
4000000 lines parsed
4500000 lines parsed
5000000 lines parsed
parsing done.
end time is 2012-09-16 23:34:19.931000
total time elapsed 0:54:03.102000
repacking file
done
> s:\users\aaj\projects\pythonhf\rfadumptohdf.py(132)generateFiles()
-> while single_date <= self.end_date:
(Pdb) c
*** 2012-08-08 ***
source file extracted at C:\rfadump\au\2012.08.08.txt
cought an exception while generating file for day 2012-08-08.
Traceback (most recent call last):
  File "rfaDumpToHDF.py", line 175, in generateFile
    lines = self.rawfile.read().split('|\n')
MemoryError 
```

我非常确定 Windows 系统任务管理器显示此进程的内存使用量为**50 MB**。看起来 Python 的垃圾收集器或内存管理器没有正确计算可用内存。应该有很多可用内存，但它认为没有足够的内存。

任何的想法？

**编辑**

在这里添加我的代码

我将放置我的部分代码。我是 python 新手，请原谅我的 python 编码风格。

**模块 1**

```
def generateFile(self, current_date):
    try:
        print "*** %s ***" % current_date.strftime("%Y-%m-%d")
        weekday=current_date.weekday()
        if weekday >= 5:
            print "skipping weekend"
            return
        self.taqdb = taqDB(self.index, self.offset)
        cache_filename = os.path.join(self.cache_dir,current_date.strftime("%Y.%m.%d.h5"))
        outputFile = config.hdf5.filePath(self.index, date=current_date)
        print "cache file: ", cache_filename
        print "output file: ", outputFile

        tempdir = "C:\\rfadump\\"+self.region+"\\"  
        input_filename = tempdir + filename
        print "source file extracted at %s " % input_filename

        ## universe
        reader = rfaTextToTAQ.rfaTextToTAQ(self.tickobj)  ## PARSER
        count = 0
        self.rawfile = open(input_filename, 'r')
        lines = self.rawfile.read().split('|\n')
        total_lines = len(lines)
        self.rawfile.close()
        del self.rawfile
        print "parsing started"
        start_time = dt.datetime.now()
        print "current time: %s" % start_time
        #while(len(lines) > 0):
        while(count < total_lines):
            #line = lines.pop(0) ## This slows down processing
            result = reader.parseline(lines[count]+"|")
            count += 1
            if(count % 500000 == 0):
                print "%d lines parsed" %(count)
            if(result == None): 
                continue
            ric, timestamp, quotes, trades, levelsUpdated, tradeupdate = result
            if(len(levelsUpdated) == 0 and tradeupdate == False):
                continue
            self.taqdb.insert(result)

        ## write to hdf5 TODO
        writer = h5Writer.h5Writer(cache_filename, self.tickobj)
        writer.write(self.taqdb.groups)
        writer.close()

        del lines
        del self.taqdb, self.tickobj
        ##########################################################
        print "parsing done." 
        end_time = dt.datetime.now()
        print "end time is %s" % end_time
        print "total time elapsed %s" % (end_time - start_time)

        defragger = hdf.HDF5Defragmenter()
        defragger.Defrag(cache_filename,outputFile)
        del defragger
        print "done"
        gc.collect(2)
    except:
        print "cought an exception while generating file for day %s." % current_date.strftime("%Y-%m-%d")
        tb = traceback.format_exc()
        print tb 
```

**模块 2 - taqdb - 将解析后的数据存储在数组中**

```
class taqDB:
  def __init__(self, index, offset):
    self.index = index
    self.tickcfg = config.hdf5.getTickConfig(index)
    self.offset = offset
    self.groups = {}

  def getGroup(self,ric):
    if (self.groups.has_key(ric) == False):
        self.groups[ric] = {}
    return self.groups[ric]

  def getOrderbookArray(self, ric, group):
    datasetname = orderBookName
    prodtype = self.tickcfg.getProdType(ric)
    if(prodtype == ProdType.INDEX):
        return
    orderbookArrayShape = self.tickcfg.getOrderBookArrayShape(prodtype)
    if(group.has_key(datasetname) == False):
        group[datasetname] = array.array("d")
        orderbookArray = self.tickcfg.getOrderBookArray(prodtype)
        return orderbookArray
    else:
        orderbookArray = group[datasetname]
        if(len(orderbookArray) == 0):
            return self.tickcfg.getOrderBookArray(prodtype)
        lastOrderbook = orderbookArray[-orderbookArrayShape[1]:]
        return np.array([lastOrderbook])

  def addToDataset(self, group, datasetname, timestamp, arr):
    if(group.has_key(datasetname) == False):
        group[datasetname] = array.array("d")
    arr[0,0]=timestamp
    a1 = group[datasetname]
    a1.extend(arr[0])

  def addToOrderBook(self, group, timestamp, arr):
    self.addToDataset(self, group, orderBookName, timestamp, arr)

  def insert(self, data):
    ric, timestamp, quotes, trades, levelsUpdated, tradeupdate = data
    delta = dt.timedelta(hours=timestamp.hour,minutes=timestamp.minute, seconds=timestamp.second, microseconds=(timestamp.microsecond/1000))
    timestamp = float(str(delta.seconds)+'.'+str(delta.microseconds)) + self.offset
    ## write to array
    group = self.getGroup(ric)

    orderbookUpdate = False
    orderbookArray = self.getOrderbookArray(ric, group)
    nonzero = quotes.nonzero()
    orderbookArray[nonzero] = quotes[nonzero] 
    if(np.any(nonzero)):
        self.addToDataset(group, orderBookName, timestamp, orderbookArray)
    if(tradeupdate == True):
        self.addToDataset(group, tradeName, timestamp, trades) 
```

**模块 3- 解析器**

```
class rfaTextToTAQ:
  """RFA Raw dump file reader. Readers single line (record) and returns an array or array of fid value pairs."""
  def __init__(self,tickconfig):
    self.tickconfig = tickconfig
    self.token = ''
    self.state = ReadState.SEQ_NUM
    self.fvstate = fvstate.FID
    self.quotes = np.array([]) # read from tickconfig
    self.trades = np.array([]) # read from tickconfig
    self.prodtype = ProdType.STOCK
    self.allquotes = {}
    self.alltrades = {}
    self.acvol = 0
    self.levelsUpdated = []
    self.quoteUpdate = False
    self.tradeUpdate = False
    self.depth = 0

  def updateLevel(self, index):
    if(self.levelsUpdated.__contains__(index) == False):
        self.levelsUpdated.append(index)

  def updateQuote(self, fidindex, field):
    self.value = float(self.value)
    if(self.depth == 1):
        index = fidindex[0]+(len(self.tickconfig.stkQuotes)*(self.depth - 1))
        self.quotes[index[0]][fidindex[1][0]] = self.value
        self.updateLevel(index[0])
    else:
        self.quotes[fidindex] = self.value
        self.updateLevel(fidindex[0][0])
    self.quoteUpdate = True

  def updateTrade(self, fidindex, field):
    #self.value = float(self.value)
    if(self.tickconfig.tradeUpdate(self.depth) == False):
        return
    newacvol = float(self.value)
    if(field == acvol):
        if(self.value > self.acvol):
            tradesize = newacvol - self.acvol
            self.acvol = newacvol
            self.trades[fidindex] = tradesize
            if(self.trades.__contains__(0) == False):
                self.tradeUpdate = True
    else:
        self.trades[fidindex] = self.value
        if(not (self.trades[0,1]==0 or self.trades[0,2]==0)):
            self.tradeUpdate = True

  def updateResult(self):
    field = ''
    valid, field = field_dict.FIDToField(int(self.fid), field)
    if(valid == False):
        return
    if(self.value == '0'):
        return
    if(self.prodtype == ProdType.STOCK):
        fidindex = np.where(self.tickconfig.stkQuotes == field)
        if(len(fidindex[0]) == 0):
            fidindex = np.where(self.tickconfig.stkTrades == field)
            if(len(fidindex[0]) == 0):
                return
            else:
                self.updateTrade(fidindex, field)
        else:
            self.updateQuote(fidindex, field)
    else:
        fidindex = np.where(self.tickconfig.futQuotes == field)
        if(len(fidindex[0]) == 0):
            fidindex = np.where(self.tickconfig.futTrades == field)
            if(len(fidindex[0]) == 0):
                return
            else:
                self.updateTrade(fidindex, field)
        else:
            self.updateQuote(fidindex, field)

  def getOrderBookTrade(self):
    if (self.allquotes.has_key(self.ric) == False):
        acvol = 0
        self.allquotes[self.ric] = self.tickconfig.getOrderBookArray(self.prodtype)
        trades = self.tickconfig.getTradesArray()
        self.alltrades[self.ric] = [trades, acvol]
    return self.allquotes[self.ric], self.alltrades[self.ric]

  def parseline(self, line):
    self.tradeUpdate = False
    self.levelsUpdated = []
    pos = 0
    length = len(line)
    self.state = ReadState.SEQ_NUM
    self.fvstate = fvstate.FID
    self.token = ''
    ch = ''
    while(pos < length):
        prevChar = ch
        ch = line[pos]
        pos += 1
        #SEQ_NUM
        if(self.state == ReadState.SEQ_NUM):
            if(ch != ','):
                self.token += ch
            else:
                self.seq_num = int(self.token)
                self.state = ReadState.TIMESTAMP
                self.token = ''
        # TIMESTAMP
        elif(self.state == ReadState.TIMESTAMP):
            if(ch == ' '):
                self.token = ''
            elif(ch != ','):
                self.token += ch
            else:
                if(len(self.token) != 12):
                    print "Invalid timestamp format. %s. skipping line.\n", self.token
                    self.state = ReadState.SKIPLINE
                else:
                    self.timestamp = datetime.strptime(self.token,'%H:%M:%S.%f') 
                    self.state = ReadState.RIC
                self.token = ''
        # RIC
        elif(self.state == ReadState.RIC):
            if(ch != ','):
                self.token += ch
            else:
                self.ric = self.token
                self.token = ''
                self.ric, self.depth = self.tickconfig.replaceRic(self.ric)
                self.prodtype = self.tickconfig.getProdType(self.ric)
                if(self.tickconfig.subscribed(self.ric)):
                    self.state = ReadState.UPDATE_TYPE
                    self.quotes, trades = self.getOrderBookTrade()
                    self.trades = trades[0]
                    self.acvol = trades[1]
                else:
                    self.state = ReadState.SKIPLINE
        # UPDATE_TYPE
        elif(self.state == ReadState.UPDATE_TYPE):
            if(ch != '|'):
                self.token += ch
            else:
                self.update_type = self.token
                self.token = ''
                self.state = ReadState.FVPAIRS
        #SKIPLINE
        elif(self.state == ReadState.SKIPLINE):
            return None
        # FV PAIRS
        elif(self.state == ReadState.FVPAIRS):
            # FID
            if(self.fvstate == fvstate.FID):
                if(ch != ','):
                    if(ch.isdigit() == False):
                        self.token = self.value+ch
                        self.fvstate = fvstate.FIDVALUE
                        self.state = ReadState.FVPAIRS
                    else:
                        self.token += ch
                else:
                    self.fid = self.token
                    self.token = ''
                    self.fvstate = fvstate.FIDVALUE
                    self.state = ReadState.FVPAIRS
            # FIDVALUE
            elif(self.fvstate == fvstate.FIDVALUE):
                if(ch != '|'):
                    self.token += ch
                else:
                    self.value = self.token
                    self.token = ''
                    self.state = ReadState.FVPAIRS
                    self.fvstate = fvstate.FID
                    # TODO set value
                    self.updateResult()
    return self.ric, self.timestamp, self.quotes, self.trades, self.levelsUpdated, self.tradeUpdate 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:15:05.007

[释放内存的唯一可靠方法是终止进程。](https://stackoverflow.com/questions/1316767/how-can-i-explicitly-free-memory-in-python/1316799#1316799)

因此，如果您的主程序[生成一个工作进程](http://docs.python.org/library/multiprocessing.html#the-process-class)来完成大部分工作（一天内完成的工作），那么当该工作进程完成时，使用的内存将被释放：

```
import multiprocessing as mp

def work(date):
    # Do most of the memory-intensive work here
    ...

while single_date <= self.end_date:
    proc = mp.Process(target = work, args = (single_date,))
    proc.start()
    proc.join() 
```

# c - fprintf 没有写入文件

> ID：12452018
> 
> 赞同：3
> 
> 时间：2012-09-17T00:55:18.243
> 
> 标签：c, printf

我正在尝试使用以下 C 代码打印出我传入的数组。它应该在每一行以十六进制格式输出文本，并且打开文件没有问题。当我第一次编写它时，我没有遇到任何问题，我打开了输出文件，我的数组就在那里。我更改了`fileOutName`参数，现在我无法打印出任何我尝试将其更改回来的东西以及其他一些东西，但似乎没有任何效果。另外，当我调试时，它似乎`pOutfile`是一个错误的指针，但就像我说的那样，它仍然会创建文件，只是不会在其中写入任何内容。任何帮助，将不胜感激。谢谢

```
printoutput(int output[], char * fileOutName){
    int i = 0;
    FILE * pOutfile;
    pOutfile = fopen( fileOutName, "w" );
    while(output[i] != 0){
        fprintf( pOutfile, "0x%0.4X\n", output[i] );
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T01:02:23.783

总是在自己之后清理。你缺少一个`fclose(pOutfile)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T00:58:17.527

> 它应该在每行输出一个十六进制格式的文本...

这条线

```
fprintf( pOutfile, "0x%0.4X\n", 5 ); 
```

总是格式化相同的数字 - `5`。应该是

```
fprintf( pOutfile, "0x%0.4X\n", output[i] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:30:09.063

您指望超出数组边界的元素为 0，除非您明确设置它，否则情况可能并非如此。如果你是，那没关系。通常，传递数组及其大小；这更安全、更容易阅读、更便携。

```
printoutput(int output[], int size, char * fileOutName){
    int i=0;
    FILE * pOutfile;
    pOutfile = fopen( fileOutName, "w" );
    while(i!=size){
        fprintf( pOutfile, "0x%0.4X\n", output[i] );
        ++i;
        }
    fclose(pOutfile)
} 
```

另外，我强烈建议习惯使用前增量运算符而不是后增量。在这种情况下，它可能不会产生影响，但对于大输入或复杂类型，它可以减少执行时间。因此，++i 而不是 i++。

# wcf - 在 WCF 或机器级别，我在哪里可以找到 Known Pii 的列表

> ID：12452020
> 
> 赞同：0
> 
> 时间：2012-09-17T00:56:00.123
> 
> 标签：wcf, pii

要在 Windows 中记录已知的个人身份信息，可以配置 machine.config 文件，如下所示...

```
<configuration>
    <system.serviceModel>
        <machineSettings enableLoggingKnownPii="true" />
    </system.serviceModel>
</configuration> 
```

并且在 WCF 配置文件中需要如下配置

```
<configuration>
    <system.diagnostics>
        <sources>
            <source name="System.ServiceModel.MessageLogging" logKnownPii="true">
                <listeners> 
                ... 
                </listeners>
            </source>
            <source name="System.ServiceModel" switchValue="Verbose, ActivityTracing">
            <listeners>
        ... 
            </listeners>
            </source>
        </sources>
    </system.diagnostics>
</configuration> 
```

现在的问题是当 logKnownPii=false 时不会记录所有信息，或者以其他方式打开设置后我可以在日志文件中看到的所有信息日志（logKnownPii=true）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:57:50.367

我得到了下面的博客，它解释了如何将 [PII] 属性添加到数据合同，这就是我一直在寻找的。

[http://blogs.msdn.com/b/martijnh/archive/2008/08/18/suppressing-personal-identifiable-information-pii-in-wcf-log-files.aspx](http://blogs.msdn.com/b/martijnh/archive/2008/08/18/suppressing-personal-identifiable-information-pii-in-wcf-log-files.aspx)

# c++ - g++：用闭包类型初始化的 std::function 总是使用堆分配？

> ID：12452022
> 
> 赞同：10
> 
> 时间：2012-09-17T00:56:44.870
> 
> 标签：c++, lambda, c++11, std-function

互联网上的一些消息来源（特别是[这个](http://www.drdobbs.com/cpp/efficient-use-of-lambda-expressions-and/232500059)）说 std::function 使用小闭包优化，例如，如果闭包大小低于一定数量的数据，它不会分配堆（上面的链接表示 gcc 为 16 个字节）

所以我去挖掘 g++ 标头

看起来是否应用这种优化是由“功能”标头中的这段代码决定的（g ++ 4.6.3）

```
static void
_M_init_functor(_Any_data& __functor, _Functor&& __f)
{ _M_init_functor(__functor, std::move(__f), _Local_storage()); } 
```

和一些线路：

```
static void
_M_init_functor(_Any_data& __functor, _Functor&& __f, true_type)
{ new (__functor._M_access()) _Functor(std::move(__f)); }

static void
_M_init_functor(_Any_data& __functor, _Functor&& __f, false_type)
{ __functor._M_access<_Functor*>() = new _Functor(std::move(__f)); }
  }; 
```

例如，如果 _Local_storage() 为 true_type，则调用placement-new，否则 - 常规 new

_Local_storage 的定义如下：

```
typedef integral_constant<bool, __stored_locally> _Local_storage; 
```

和 __stored_locally：

```
static const std::size_t _M_max_size = sizeof(_Nocopy_types);
static const std::size_t _M_max_align = __alignof__(_Nocopy_types);

static const bool __stored_locally =
(__is_location_invariant<_Functor>::value
 && sizeof(_Functor) <= _M_max_size
 && __alignof__(_Functor) <= _M_max_align
 && (_M_max_align % __alignof__(_Functor) == 0)); 
```

最后：__is_location_invariant：

```
template<typename _Tp>
struct __is_location_invariant
: integral_constant<bool, (is_pointer<_Tp>::value
               || is_member_pointer<_Tp>::value)>
{ }; 
```

所以。据我所知，闭包类型既不是指针也不是成员指针。为了验证我什至写了一个小测试程序：

```
#include <functional>
#include <iostream>

int main(int argc, char* argv[])
{
  std::cout << "max stored locally size: " << sizeof(std::_Nocopy_types) << ", align: " << __alignof__(std::_Nocopy_types) << std::endl;

  auto lambda = [](){};

  typedef decltype(lambda) lambda_t;

  std::cout << "lambda size: " << sizeof(lambda_t) << std::endl;
  std::cout << "lambda align: " << __alignof__(lambda_t) << std::endl;

  std::cout << "stored locally: " << ((std::__is_location_invariant<lambda_t>::value
     && sizeof(lambda_t) <= std::_Function_base::_M_max_size
     && __alignof__(lambda_t) <= std::_Function_base::_M_max_align
     && (std::_Function_base::_M_max_align % __alignof__(lambda_t) == 0)) ? "true" : "false") << std::endl;
} 
```

输出是：

```
max stored locally size: 16, align: 8
lambda size: 1
lambda align: 1
stored locally: false 
```

所以，我的问题如下：用 lambda 初始化 std::function 是否总是导致堆分配？还是我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-24T14:51:24.060

从 GCC 4.8.1 开始，libstdc++ 中的 std::function 仅针对指向函数和方法的指针进行优化。因此，无论您的仿函数（包括 lambda）的大小如何，从中初始化一个 std::function 都会触发堆分配。不幸的是，也不支持自定义分配器。

Visual C++ 2012 和 LLVM libc++ 确实避免分配任何足够小的仿函数。

请注意，要让您的仿函数启动此优化，应该满足 std::is_nothrow_move_constructible。这是为了支持 noexcept std::function::swap()。幸运的是，如果所有捕获的值都满足，则 lambdas 满足此要求。

您可以编写一个简单的程序来检查各种编译器的行为：

```
#include <functional>
#include <iostream>

// noexpect missing in MSVC11
#ifdef _MSC_VER
# define NOEXCEPT
#else
# define NOEXCEPT noexcept
#endif

struct A
{
    A() { }
    A(const A&) { }
    A(A&& other) NOEXCEPT { std::cout << "A(A&&)\n"; }

    void operator()() const { std::cout << "A()\n"; }

    char data[FUNCTOR_SIZE];
};

int main()
{
    std::function<void ()> f((A()));
    f();

    // prints "A(A&&)" if small functor optimization employed
    auto f2 = std::move(f); 

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T01:31:07.627

我敢打赌，如果你添加了这个：

```
std::cout << "std::__is_location_invariant: " << std::__is_location_invariant<lambda_t>::value << std::endl; 
```

你会回来：

```
std::__is_location_invariant: 0 
```

至少[ideone是这么说](http://ideone.com/3ttpp)的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T01:05:37.737

std::function 的分配是一个实现细节；但是最后我检查了一下，msvc 的最大仿函数大小是 12 个字节，gcc 是 16 个字节，boost+msvc 是 24 个字节。

# c# - 从文本中剥离 MediaWiki 标记

> ID：12452023
> 
> 赞同：1
> 
> 时间：2012-09-17T00:56:48.867
> 
> 标签：c#, mediawiki, text-processing, strip-tags

如果有办法使用 C# 从文本中删除所有 MediaWiki 标记“代码”？

例如，我有以下文本：

```
<h2><span class="editsection">[<a href="/w/index.php?title=Roger_Zelazny&amp;action=edit&amp;section=1" title="Edit section: Biography">edit</a>]</span> <span class="mw-headline" id="Biography">Biography</span></h2>
<p>Roger Zelazny was born in <a href="/wiki/Euclid,_Ohio" title="Euclid, Ohio">Euclid, Ohio</a>, the only child of Polish immigrant Joseph Frank Zelazny and <a href="/wiki/Irish-American" title="Irish-American" class="mw-redirect">Irish-American</a> Josephine Flora Sweet. In high school, he became the editor of the school newspaper and joined the Creative Writing Club.<sup id="cite_ref-Roger_Zelazny_2009_0-0" class="reference">
<a href="#cite_note-Roger_Zelazny_2009-0"><span>[</span>1<span>]</span></a></sup> In the fall of 1955, he began attending <a href="/wiki/Case_Western_Reserve_University" title="Case Western Reserve University">Western Reserve University</a> and graduated with a B.A. in English in 1959.<sup id="cite_ref-Roger_Zelazny_2009_0-1" class="reference"><a href="#cite_note-Roger_Zelazny_2009-0"><span>[</span>1<span>]</span></a></sup> He was accepted to <a href="/wiki/Columbia_University" title="Columbia University">Columbia University</a> in New York and specialized in Elizabethan and Jacobean drama, graduating with an M.A. in 1962.<sup id="cite_ref-Roger_Zelazny_2009_0-2" class="reference">
<a href="#cite_note-Roger_Zelazny_2009-0"><span>[</span>1<span>]</span></a></sup> His M.A. thesis was entitled <i>Two traditions and <a href="/wiki/Cyril_Tourneur" title="Cyril Tourneur">Cyril Tourneur</a>: an examination of morality and humor comedy conventions in</i> <a href="/wiki/The_Revenger%27s_Tragedy" title="The Revenger's Tragedy">The Revenger's Tragedy</a>. Between 1962 and 1969 he worked for the U.S. <a href="/wiki/Social_Security_Administration" title="Social Security Administration">Social Security Administration</a> in <a href="/wiki/Cleveland,_Ohio" title="Cleveland, Ohio" class="mw-redirect">Cleveland, Ohio</a> and then in <a href="/wiki/Baltimore,_Maryland" title="Baltimore, Maryland" class="mw-redirect">Baltimore, Maryland</a> spending his evenings writing science fiction.<sup id="cite_ref-Roger_Zelazny_2009_0-3" class="reference"><a href="#cite_note-Roger_Zelazny_2009-0"><span>[</span>1<span>]</span></a></sup><sup id="cite_ref-AndCall_1-0" class="reference"><a href="#cite_note-AndCall-1"><span>[</span>2<span>]</span></a></sup> 
He deliberately progressed from short-shorts to novelettes to novellas and finally to novel-length works by 1965.<sup id="cite_ref-Roger_Zelazny_2009_0-4" class="reference"><a href="#cite_note-Roger_Zelazny_2009-0"><span>[</span>1<span>]</span></a></sup> On May 1, 1969, he quit to become a full-time writer, and thereafter concentrated on writing novels in order to maintain his income.<sup id="cite_ref-AndCall_1-1" class="reference"><a href="#cite_note-AndCall-1"><span>[</span>2<span>]</span></a></sup>
During this period, he was an active and vocal member of the Baltimore Science Fiction Society, whose members included writers <a href="/wiki/Jack_Chalker" title="Jack Chalker" class="mw-redirect">Jack Chalker</a> and <a href="/wiki/Joe_Haldeman" title="Joe Haldeman">Joe</a> and <a href="/wiki/Jack_Haldeman" title="Jack Haldeman" class="mw-redirect">Jack Haldeman</a> among others.</p> 
```

以下 Html 表示：

> ## [[编辑](/w/index.php?title=Roger_Zelazny&action=edit&section=1 "编辑部分：传记")] 传记
> 
> 罗杰·泽拉兹尼出生在[俄亥俄州的欧几里得，](/wiki/Euclid,_Ohio "俄亥俄州欧几里得")是波兰移民约瑟夫·弗兰克·泽拉兹尼和爱尔兰裔美国人约瑟芬·弗洛拉·斯威特的独生子。高中时，他成为校报的编辑，并加入了创意写作俱乐部。[1] 1955 年秋天，他开始就读[西储大学](/wiki/Case_Western_Reserve_University "凯斯西储大学")，并于 1959 年获得英语学士学位。 [1] 他被纽约[哥伦比亚大学](/wiki/Columbia_University "哥伦比亚大学")录取，专攻伊丽莎白时代和雅各布时代的戏剧，并于 1962 年获得硕士学位。 [1] 他的硕士学位论文题为“*两种传统和[Cyril Tourneur](/wiki/Cyril_Tourneur "西里尔·图尔内尔")：审查* [复仇者的悲剧](/wiki/The_Revenger%27s_Tragedy "复仇者的悲剧")中的道德和幽默喜剧惯例” . 1962 年至 1969 年间，他在美国工作俄亥俄州克利夫兰的[社会保障局和马里兰州巴尔的摩的社会保障局晚上都在写科幻小说。[1][2]](/wiki/Social_Security_Administration "社会保障局") 他刻意从短篇小说发展到中篇小说，再到中篇小说，最后到 1965 年创作长篇小说。 [1] 1969年5月1日，他辞去专职作家的职务，此后专心写小说以维持收入。 [2] 在此期间，他是巴尔的摩科幻协会的活跃和直言不讳的成员，该协会的成员包括作家杰克·查克、[乔](/wiki/Joe_Haldeman "乔·霍尔德曼")和杰克·霍尔德曼等。

我正在寻找一种方法*不仅*可以去除 HTML 标签，还可以去除参考、维基“链接”等内容 - 我想删除维基百科完成的所有格式和“处理”，只保留文本...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:31:21.747

解析 HTML 不会让您走得太远，因为几乎不可能分辨什么是“内容”，什么不是。您需要的是一个 MediaWiki 标记解析器，虽然有几十个，但[mediawiki.org 上的规范列表](http://www.mediawiki.org/wiki/Alternative_parsers)（在撰写本文时）似乎没有任何 C#。

如果您最终调用任何外部库，[mwlib](http://pediapress.com/code/)可能是最成熟的。

# java - 导入扫描仪类的问题

> ID：12452024
> 
> 赞同：4
> 
> 时间：2012-09-17T00:56:53.610
> 
> 标签：java

我正在尝试执行以下代码，但不断收到此错误：

> 错误：在 ScannerDemo 类中找不到 Main 方法，请将 main 方法定义为： `public static void main(String[] args)`

```
import java.util.Scanner;
class ScannerDemo
public class Main {

    public static void main (String [] args)
    {
        Scanner sc = new Scanner(System.in);
        String userName;

        System.out.println("Enter a number");
        username = sc.nextLine();
        System.out.println("your number is" + username + "enter your next number");
        username2 = sc.nextline();
        System.out.println("your total is" + username2 );     
    }
} 
```

我想我一定是错误地导入了 Scanner 类，我尝试了不同的方法，但还没有对我有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T00:58:39.947

您在顶部连续有两个类声明！这是错误的。你的导入没问题。尝试：

```
import java.util.Scanner;
public class ScannerDemo {
  public static void main(String[] args) {
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T00:58:48.730

你的类定义是错误的。您正在尝试定义两个类，`ScannerDemo`并且`Main`. 代替：

```
class ScannerDemo
 public class Main 
```

只需：

```
public class ScannerDemo 
```

此外，在您的`main`方法中，您应该引用`userName`变量，而不是`username`，并且您没有定义`username2`. 请注意，Java 标识符*区分*大小写：

```
public static void main (String [] args)
{
  Scanner sc = new Scanner(System.in);
  System.out.println("Enter a number");
  String userName = sc.nextLine();
  System.out.println("your number is" + username + "enter your next number");
  String username2 = sc.nextline();
  System.out.println("your total is" + username2 );
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-25T19:52:01.980

```
import java.util.Scanner;

public class ScannerDemo {

    public static void main (String [] args)
    {
        Scanner sc = new Scanner(System.in);
        String userName;

        System.out.println("Enter a number");
        username = sc.nextLine();
        System.out.println("your number is" + username + "enter your next number");
        username2 = sc.nextline();
        System.out.println("your total is" + username2 );     
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-06T03:11:55.743

```
 import java.util.Scanner;

 public class ScannerDemo {

      public static void main (String [] args) {

         Scanner sc = new Scanner(System.in);
         String userName;

         System.out.println("Enter a number");
         int userName = sc.nextInt();
         System.out.println("your number is " + userName);
         System.out.println("enter your next number");
         int userName2 = sc.nextInt();
         System.out.println("your total is " + (userName2 + userName));     
     }
 } 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-06-02T19:23:55.240

```
import java.util.Scanner;

public class ScannerDemo {

public static void main (String [] args) {

        Scanner sc = new Scanner(System.in);
        String userName;

        System.out.println("Enter a number");
        int username = sc.nextInt();
        System.out.println("your number is " + username);
        System.out.println("enter your next number");
        int username2 = sc.nextInt();
        System.out.println("your total is " + (username2 + username));     
    }
} 
```

# vba - 使用唯一值填充组合框

> ID：12452026
> 
> 赞同：2
> 
> 时间：2012-09-17T00:57:41.507
> 
> 标签：vba, excel, combobox

我正在寻找仅使用列中唯一文本值填充组合框。如果列中的值是空的（即“”），那么它将从左侧相邻列中获取值（仍然确保它不是重复的）。

我在 Userform 模块中嵌入了一个 Public Sub 以添加不重复的项目：

```
Public Sub addIfUnique(CB As ComboBox, value As String)

If CB.ListCount = 0 Then GoTo doAdd
    Dim i As Integer
    For i = 0 To CB.ListCount - 1
        If CB.List(i) = value Then Exit Sub
    Next
    doAdd:
        CB.AddItem value

End Sub 
```

但是，当我尝试调用 sub 时，它告诉我需要一个对象。到目前为止，我得到的如下：

```
Worksheets("Scrapers").Activate
Range("M9").Activate

Dim intX As Integer
Dim value As String

push_lt_cbo.Clear

Do Until ActiveCell.Offset(0, -1).value = 0
    If ActiveCell.value = "" Then
        value = ActiveCell.Offset(0, -1).Text
        Call addIfUnique((push_lt_cbo), (value))
    Else
        value = ActiveCell.Text
        Call addIfUnique((CB), (value))
    End If
Loop 
```

任何帮助将非常感激！

长宽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:50:41.350

你很接近：

```
Option Explicit 'Add this if you don't already have it

Private Sub UserForm_Initialize()
    Worksheets("Scrapers").Activate
    Range("M9").Activate

    Dim intX As Integer
    Dim value As String

    push_lt_cbo.Clear

    'Your loop will never end like this:
    'Do Until ActiveCell.Offset(0, -1).value = 0

    'Instead use a variable:
    Dim rowOffset As Integer
    rowOffset = 0
    Do Until ActiveCell.Offset(rowOffset, -1).value = 0
        'There was a lot of extra stuff here.  Simplifying:
        value = ActiveCell.Offset(rowOffset, -1).value

        'Remove optional CALL keyword.
        'Also remove paranthesis; they caused the error:
        addIfUnique push_lt_cbo, value

        'increment offset:
        rowOffset = rowOffset + 1
    Loop
End Sub
'Use 'msforms.ComboBox' to clarify.
Public Sub addIfUnique(CB As msforms.ComboBox, value As String)

If CB.ListCount = 0 Then GoTo doAdd
    Dim i As Integer
    For i = 0 To CB.ListCount - 1
        If CB.List(i) = value Then Exit Sub
    Next
doAdd:
        CB.AddItem value

End Sub 
```

# string - SNMP 获取连接到交换机端口的 MAC 地址

> ID：12452029
> 
> 赞同：2
> 
> 时间：2012-09-17T00:58:24.420
> 
> 标签：string, snmp

[我按照http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00801c9199.shtml](http://www.cisco.com/en/US/tech/tk648/tk362/technologies_tech_note09186a00801c9199.shtml)中的说明运行 snmpwak -v2c -c public switchname .1.3.6.1.2.1.17.4.3.1.1 。我有很多十六进制字符串和字符串。

像这样的十六进制字符串：

```
SNMPv2-SMI::mib-2.17.4.3.1.1.244.109.4.97.116.234 = Hex-STRING: F4 6D 04 61 74 E0 
```

像这样的字符串：

```
SNMPv2-SMI::mib-2.17.4.3.1.1.44.39.215.46.139.92 = STRING: ",'×.<\\"
SNMPv2-SMI::mib-2.17.4.3.1.1.44.39.215.46.142.98 = STRING: ",'×.Zb"
SNMPv2-SMI::mib-2.17.4.3.1.1.44.39.215.46.145.38 = STRING: ",'×.'&" 
```

有些 Mac 可以在 Hex-STRING 中找到，但有些则不能。也许某些 Mac 隐藏在 STRING 中？如何将这些字符串转换为十六进制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:48:36.453

MIB中mib-2.17.4.3.1.1后面的六个十进制值确实是十进制形式的MAC地址。

```
SNMPv2-SMI::mib-2.17.4.3.1.1.44.39.215.46.139.92

44 (2c) 39 (27) 215 (d7) 46 (2e) 139 (8b) 92 (5c)

2c:27:d7:2e:8b:5c  OUI search: HP 
```

# java - 如果在 WSDL 中定义了 `xsd:struct` (Key => Value Map)，如何处理 Wsdl2Java？

> ID：12452030
> 
> 赞同：3
> 
> 时间：2012-09-17T00:58:29.693
> 
> 标签：java, php, soap, wsdl, axis

现有的 Soap WebServices 正在提供一个 WSDL 文件，该文件指定一个`xsd:struct`. WebService 是用 PHP 编写的。

如果我尝试在我的 Java、Maven、Spring-ws、Axis 环境中执行 Wsdl2Java 目标，它会失败说：

```
[INFO] [axistools:wsdl2java {execution: default}]
[INFO] about to add compile source root
[INFO] Processing wsdl: /home/foobar/workspace/com.foobar/src/main/wsdl/foobar.wsdl
Sep 17, 2012 2:29:42 AM org.apache.axis.utils.JavaUtils isAttachmentSupported
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error generating Java code from WSDL.

Embedded error: Error running Axis
Type {http://www.w3.org/2001/XMLSchema}struct is referenced but not defined. 
```

任何想法如何解决这一问题？

WSDL 如下所示：

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://foobar.service.de/service/v2" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="Soap_Manager" targetNamespace="http://foobar.service.de/service/v2">
    <types>
        <xsd:schema targetNamespace="http://foobar.service.de/service/v2"/>
    </types>
    <portType name="Soap_ManagerPort">
        <operation name="searchFoo">
            <documentation>searchFoo</documentation>
            <input message="tns:searchFooIn"/>
            <output message="tns:searchFooOut"/>
        </operation>
    </portType>
    <binding name="Soap_ManagerBinding" type="tns:Soap_ManagerPort">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="searchFoo">
            <soap:operation soapAction="http://foobar.service.de/service/v2#searchFoo"/>
            <input>
                <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://foobar.service.de/service/v2"/>
            </input>
            <output>
                <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://foobar.service.de/service/v2"/>
            </output>
        </operation>
    </binding>
    <service name="Soap_ManagerService">
        <port name="Soap_ManagerPort" binding="tns:Soap_ManagerBinding">
            <soap:address location="http://foobar.service.de/service/v2"/>
        </port>
    </service>
    <message name="searchFooIn">
        <part name="param" type="xsd:struct"/>
    </message>
    <message name="searchFooOut">
        <part name="return" type="xsd:struct"/>
    </message>
</definitions> 
```

谢谢你的帮助。

编辑1：

这个[参考](http://old.apisnetworks.com/soap-wsdl.php)说： `...It's xsd:struct, which means it should be treated as an array with multiple values. Most languages render xsd:struct types as hashes with a key => value notation....`

但是如何使用 Apache Axis 做到这一点？

编辑2：

这是当前的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
...
    <build>
        <plugins>
...
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>axistools-maven-plugin</artifactId>
                <version>1.4</version>
                <configuration>
                    <urls>
                        <url>http://foobar.service.de/wsdlv2.wsdl</url>
                    </urls>
                    <packageSpace>com.foobar.wsdl</packageSpace>
                    <testCases>true</testCases>
                    <serverSide>true</serverSide>
                    <subPackageByFileName>true</subPackageByFileName>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsdl2java</goal>
                        </goals>
                    </execution>
                </executions>

                <dependencies>      
                    <dependency>
                        <groupId>javax.activation</groupId>
                        <artifactId>activation</artifactId>
                        <version>1.1.1</version>
                    </dependency>

                    <dependency>
                        <groupId>javax.mail</groupId>
                        <artifactId>mail</artifactId>
                        <version>1.4.5</version>
                    </dependency>
                </dependencies>

            </plugin>

        </plugins>
...
    </build>
... 
```

编辑3：

一个有效的肥皂请求看起来像这样（我从文档中得到它并用soap-ui测试它）：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:emn="interface.foobar">
<soap:Header/>
<soap:Body>
    <emn:searchFoobar>
    <emn:searchParameter>
        <emn:username>xxxx</emn:username>
        <emn:password>xxxx</emn:password>
        <emn:maxHitCount>1</emn:maxHitCount>
        <emn:sorting>distance</emn:sorting>
        <emn:searchtext>example</emn:searchtext>        
    </emn:searchParameter>
    </emn:searchFoobar>
</soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:02:52.100

```
Unable to find required classes (javax.activation.DataHandler 
```

您缺少类路径中的 jar 文件。可能是activation.jar。请看[这里](http://www.jarfinder.com/index.php/java/info/javax.activation.DataHandler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:12:11.457

它看起来更好:)

```
<emn:searchFoobar>
<emn:searchParameter>
    <emn:username>xxxx</emn:username>
    <emn:password>xxxx</emn:password>
    <emn:maxHitCount>1</emn:maxHitCount>
    <emn:sorting>distance</emn:sorting>
    <emn:searchtext>example</emn:searchtext>        
</emn:searchParameter>
</emn:searchFoobar> 
```

在 php 中，我会创建一个类：`searchFooInParamWrapper`class.

那将有：`username`, `password`, `maxHitCount`, `sorting`,`searchtext`文件。希望 PHP 到 WSDL 引擎会创建一个类：

并删除结构。与修复第三方库/错误相比，问题更容易解决

# c# - 相同的声音重叠使其非常响亮。提示与技巧？

> ID：12452032
> 
> 赞同：0
> 
> 时间：2012-09-17T00:58:42.053
> 
> 标签：c#, audio, xna

我正在制作的游戏中有多个对象，并且在弄清楚如何播放声音而不播放*相同*的声音两次或更多次时遇到了重大问题。我想知道你是否有任何技巧/提示如何让声音只播放一次，无论它制作了多少个实例并保持平衡，而不是让它播放 50 次是超级响亮的。

我正在使用 XNA.Framework.Audio.SoundEffectInstance 播放声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:27:04.040

在实例类中，您可以创建一个布尔值的静态变量。

当一个实例发出声音时，首先让它检查静态变量。如果变量为真，则不播放声音。如果为假，则播放声音。

声音播放完毕后，将静态变量设置为 false，以便下一个实例可以播放声音。

例子：

```
public static bool is_playing = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:02:32.327

这更像是一个混合问题而不是编程问题。播放两次样本总是会产生更完整的效果。

从程序化的角度来看，您可以确保声音不会同时播放两次。为此，请在每次播放声音时设置一个布尔值。在播放声音之前，请确保布尔值为 false 或取消事件。播放声音后，将布尔值设置为 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T01:03:26.370

这是一个非常通用的答案，但也许您可以创建不同的声音类（例如，射击声音、移动声音、环境声音）。

播放声音时，您可以播放每个班级的当前声音，同时静音该班级的所有其他声音。

例如，对于每一次枪声，每次枪声之间的时间可能比播放声音所需的时间短。对于每一次新的枪声，只需将射击声音池中的所有其他声音静音即可。

为此，您可以将射击声音对象添加到射击声音数组中，并且对于每个游戏帧，检查以确保没有新声音。如果有新声音，请在播放新声音之前遍历声音数组以使所有内容静音。

然后，您可以制作多个声音阵列（行走/环境），这样您的拍摄声音就不会切断行走声音/环境声音。

# vba - VBA修剪访问表中的所有单元格

> ID：12452035
> 
> 赞同：2
> 
> 时间：2012-09-17T00:59:07.853
> 
> 标签：vba, ms-access, loops, trim

我在面向对象编程方面相对有经验，但这是我第一次在 Office 中使用 VBA 工作，我完全被语法难住了。在过去的一个小时左右，我一直在做一些搜索和弄乱它，但实际上很难获得一个成功运行并满足我需要的宏。

我正在尝试遍历 Access 表中的每个单元格并将 Trim 函数应用于该单元格的内容，作为奖励，我想删除字符串中的所有额外空格（如果有的话）。即`" Trim this__string "`会简单地变成`"Trim this string"`（我使用下划线来表示单个的多个空格，因为 StackOverflow 不想显示我的多个空格）。

任何做这样的事情的代码示例，或者至少让我接近然后我可以修改它的任何代码示例，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T01:06:26.750

`Trim()`您可以使用查询中的函数删除前导和尾随空格。

```
UPDATE YourTable
SET text_field = Trim(text_field); 
```

如果您将在 Access 会话中执行此操作，则可以使用`Replace()`一个空格替换两个空格的序列。

```
UPDATE YourTable
SET text_field = Replace(text_field, '  ', ' '); 
```

但是，您可能需要`Replace()`多次运行该查询才能将所有连续的空格字符减少到一个。

您还可以使用用户定义的函数进行基于正则表达式的替换。不过，我不知道这是否值得。用户定义的函数也只能在 Access 应用程序会话中使用。

我忽略了“表格中的每个单元格”方面。这使得这更具挑战性，我认为您无法使用标准宏或查询来解决它。但是，您可以使用 VBA 代码检查`TableDef`，并遍历其字段...然后在数据类型为文本或备忘录的任何字段上调用您的`Trim`和/或操作。`Replace`

这是一个粗略的代码大纲，用于识别给定表的哪些字段是文本类型。

```
Public Sub FindTextFields(ByVal WhichTable As String)
    Dim db As DAO.Database
    Dim tdf As DAO.TableDef
    Dim fld As DAO.Field
    Set db = CurrentDb
    Set tdf = db.TableDefs(WhichTable)
    For Each fld In tdf.Fields
        If fld.Type = dbText Or fld.Type = dbMemo Then
            Debug.Print "Do something with " & fld.Name
        End If
    Next
    Set fld = Nothing
    Set tdf = Nothing
    Set db = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:17:27.230

选项比较数据库

```
Private Sub Command3_Click()
Call findField(Text1.Value)
End Sub

Public Function findField(p_myFieldName)
Dim db As Database, _
    tb As TableDef, _
    fd As Field

 '''''''''Clearing the contents of the table
 DoCmd.RunSQL "delete * from Field_Match_Found"

Set db = CurrentDb
For Each tb In db.TableDefs
    For Each fd In tb.Fields
        If fd.Name = p_myFieldName Then

            strsql = "INSERT INTO Field_Match_Found Values (""" & tb.Name & """, """ & fd.Name & """)"

            DoCmd.RunSQL strsql

        End If
    Next fd
Next tb
Set fd = Nothing
Set tb = Nothing
Set db = Nothing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:22:54.353

If DCount("Account_number", "Field_Match_Found") = 0 Then MsgBox ("No match was found") Else MsgBox ("Check Table Field_Match_Found for your output")

```
''''''''''making textbox blank for next time
Text1.Value = "" 
```

结束功能

# permissions - 子域上的符号链接文件夹给出 403 Forbidden

> ID：12452037
> 
> 赞同：3
> 
> 时间：2012-09-17T00:59:35.527
> 
> 标签：permissions, symlink, apache

我正在尝试将本地开发服务器上的网站转移到实时服务器。顶级域工作正常，但当我尝试访问子域时，我收到 403 禁止错误。

这是错误日志中的消息：

```
[Sun Sep 16 13:54:38 2012] [error] [client 108.176.142.194] 
(13)Permission denied: Can't open directory for index: 
/home/www/htdocs/weatherbell.com/models/html/neytiri/, 
referer: http://models.weather-bell.com/html/ 
```

中的目录是指向（在驱动器的根目录上）`neytiri`的`/home/www/htdocs/weatherbell.com/models/html/`符号链接。`/neytiri`

我已将我能找到的所有内容的权限设置为 755，并将所有者和组设置为 root，但它仍然不起作用。

这是我的 httpd.conf：

```
ServerRoot "/etc/httpd/"
Listen 80
ServerName weatherbell.com
ServerAdmin root@weatherbell.com
DocumentRoot "/home/www/htdocs/weatherbell.com"
NameVirtualHost *:80

DirectoryIndex index.html index.html.var index.php
Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5

<IfModule prefork.c>
  StartServers 4
  MinSpareServers 5
  MaxSpareServers 10
  ServerLimit 69
  MaxClients 69
  MaxRequestsPerChild 1000 
  LoadModule php5_module modules/libphp5.so
</IfModule>
<IfModule worker.c>
  StartServers 4
  MaxClients 1024
  MinSpareThreads 64
  MaxSpareThreads 192
  ThreadsPerChild 64
  MaxRequestsPerChild 0
  LoadModule php5_module modules/libphp5-zts.so
</IfModule>
<IfModule mod_status.c>
  ExtendedStatus On
  <Location /server-status>
    SetHandler server-status
    Order deny,allow
    Deny from all
    Allow from all
  </Location>
</IfModule>
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_alias_module modules/mod_authn_alias.so
LoadModule authn_anon_module modules/mod_authn_anon.so
LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule authz_owner_module modules/mod_authz_owner.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule ldap_module modules/mod_ldap.so
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
LoadModule include_module modules/mod_include.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule logio_module modules/mod_logio.so
LoadModule env_module modules/mod_env.so
LoadModule ext_filter_module modules/mod_ext_filter.so
LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule expires_module modules/mod_expires.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule headers_module modules/mod_headers.so
LoadModule usertrack_module modules/mod_usertrack.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule mime_module modules/mod_mime.so
LoadModule dav_module modules/mod_dav.so
LoadModule status_module modules/mod_status.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule info_module modules/mod_info.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule dir_module modules/mod_dir.so
LoadModule actions_module modules/mod_actions.so
LoadModule speling_module modules/mod_speling.so
LoadModule userdir_module modules/mod_userdir.so
LoadModule alias_module modules/mod_alias.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule cache_module modules/mod_cache.so
LoadModule suexec_module modules/mod_suexec.so
LoadModule disk_cache_module modules/mod_disk_cache.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule version_module modules/mod_version.so
UseCanonicalName Off
<IfModule !mpm_netware_module>
  <IfModule !mpm_winnt_module>
    User daemon
    Group daemon
  </IfModule>
</IfModule>

<IfModule mod_userdir.c>
  UserDir "disable"
</IfModule>
AccessFileName ".htaccess"
<Files ~ "^\.ht">
  Order allow,deny
  Deny from all
</Files>
<IfModule mod_mime_magic.c>
  MIMEMagicFile "conf/magic"
</IfModule>
HostnameLookups Off
ErrorLog "logs/error.log"
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>
<Directory "/home/www/htdocs/weatherbell.com">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<IfModule dir_module>
    DirectoryIndex index.html
</IfModule>
ErrorLog "logs/error.log"
LogLevel warn
<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    <IfModule logio_module>
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>
    CustomLog "logs/access.log" common
</IfModule>
Alias /icons/ "/home/www/icons/"
Alias /dompdf "/home/www/dompdf/"
Alias /mpdf "/home/www/mpdf/"
<IfModule mod_dav_fs.c>
  DAVLockDB "/var/lib/dav/lockdb"
</IfModule>

<IfModule alias_module>
    ScriptAlias /cgi-bin/ "/home/www/cgi-bin/"
</IfModule>
<IfModule cgid_module>
</IfModule>
<Directory "/home/www/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>
DefaultType text/plain
<IfModule mime_module>
    TypesConfig conf/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
</IfModule>
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>
IndexOptions FancyIndexing VersionSort NameWidth=* HTMLTable Charset=UTF-8
AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip
  AddIconByType (TXT,/icons/text.gif) text/*
  AddIconByType (IMG,/icons/image2.gif) image/*
  AddIconByType (SND,/icons/sound2.gif) audio/*
  AddIconByType (VID,/icons/movie.gif) video/*
  AddIcon /icons/binary.gif .bin .exe
  AddIcon /icons/binhex.gif .hqx
  AddIcon /icons/tar.gif .tar
  AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
  AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
  AddIcon /icons/a.gif .ps .ai .eps
  AddIcon /icons/layout.gif .html .shtml .htm .pdf
  AddIcon /icons/text.gif .txt
  AddIcon /icons/c.gif .c
  AddIcon /icons/p.gif .pl .py
  AddIcon /icons/f.gif .for
  AddIcon /icons/dvi.gif .dvi
  AddIcon /icons/uuencoded.gif .uu
  AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
  AddIcon /icons/tex.gif .tex
  AddIcon /icons/bomb.gif core
  AddIcon /icons/back.gif ..
  AddIcon /icons/hand.right.gif README
  AddIcon /icons/folder.gif ^^DIRECTORY^^
  AddIcon /icons/blank.gif ^^BLANKICON^^
DefaultIcon "/icons/unknown.gif"
ReadmeName "README.html"
HeaderName "HEADER.html"
  AddLanguage ca .ca
  AddLanguage cs .cz .cs
  AddLanguage da .dk
  AddLanguage de .de
  AddLanguage el .el
  AddLanguage en .en
  AddLanguage eo .eo
  AddLanguage es .es
  AddLanguage et .et
  AddLanguage fr .fr
  AddLanguage he .he
  AddLanguage hr .hr
  AddLanguage it .it
  AddLanguage ja .ja
  AddLanguage ko .ko
  AddLanguage ltz .ltz
  AddLanguage nl .nl
  AddLanguage nn .nn
  AddLanguage no .no
  AddLanguage pl .po
  AddLanguage pt .pt
  AddLanguage pt-BR .pt-br
  AddLanguage ru .ru
  AddLanguage sv .sv
  AddLanguage zh-CN .zh-cn
  AddLanguage zh-TW .zh-tw
LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no pl pt pt-BR ru sv zh-CN zh-TW
ForceLanguagePriority Prefer Fallback
AddDefaultCharset UTF-8
AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz
AddHandler type-map var
AddType text/html .shtml
AddHandler php5-script .php
AddType text/html .php

AddOutputFilter INCLUDES .shtml
<IfModule mod_negotiation.c>
  <IfModule mod_include.c>
    <Directory "/error">
      AllowOverride None
      Options IncludesNOEXEC
      AddOutputFilter Includes html
      AddHandler type-map var
      Order allow,deny
      Allow from all
      LanguagePriority en es de fr
      ForceLanguagePriority Prefer Fallback
    </Directory>
  </IfModule>
</IfModule>
  BrowserMatch "Mozilla/2" nokeepalive
  BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0 force-response-1.0
  BrowserMatch "RealPlayer 4\.0" force-response-1.0
  BrowserMatch "Java/1\.0" force-response-1.0
  BrowserMatch "JDK/1\.0" force-response-1.0
  BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
  BrowserMatch "MS FrontPage" redirect-carefully
  BrowserMatch "^WebDrive" redirect-carefully
  BrowserMatch "^WebDAVFS/1.[0123]" redirect-carefully
  BrowserMatch "^gnome-vfs/1.0" redirect-carefully
  BrowserMatch "^XML Spy" redirect-carefully
  BrowserMatch "^Dreamweaver-WebDAV-SCM1" redirect-carefully
  Alias /tropical "/weatherbell.com/models/neytiri/maue/tropical"
Alias /weather "/weatherbell.com/models/neytiri/maue/weather"
Alias /~maue "/weatherbell.com/models/neytiri/maue/public_html"
<Directory />
    #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>
<Directory "/home/www/htdocs">
  Options FollowSymLinks Indexes
  Allow from all
  Order allow,deny
  AllowOverride All
</Directory>
<Directory "/home/www/htdocs/weatherbell.com">
  Options FollowSymLinks Indexes
  Allow from All
  Order Allow,Deny
  AllowOverride All
</Directory>
<Directory "/home/www/htdocs/weatherbell.com/models">
  #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>
<Directory "/home/www/icons">
  Options FollowSymLinks Indexes MultiViews
  Allow from all
  Order allow,deny
  AllowOverride None
</Directory>
<Directory "/home/www/dompdf">
  Options FollowSymLinks Indexes MultiViews
  Allow from all
  Order allow,deny
  AllowOverride All
</Directory>
<Directory "/home/www/mpdf">
  Options FollowSymLinks Indexes MultiViews
  Allow from all
  Order allow,deny
  AllowOverride All
</Directory>
<Directory "/home/www/cgi-bin">
  Options None
  Allow from all
  Order allow,deny
  AllowOverride None
</Directory>
<Directory "/neytiri/">
   #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>
<Directory "/neytiri/maue/weather/">
   #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>
<Directory "/home/www/htdocs/weatherbell.com/models">
   #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>
<Directory "/home/www/htdocs/weatherbell.com/models/neytiri">
   #Options FollowSymLinks
    Options Indexes FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
</Directory>

<VirtualHost *:80>
  ServerName weather-bell.com
  DocumentRoot "/home/www/htdocs/weatherbell.com/public"
  ServerAdmin webmaster@dummy-host.example.com
  ErrorLog "logs/weatherbell.com-error.log"
  CustomLog "logs/weatherbell.com-access.log" common
</VirtualHost>
<VirtualHost *:80>
  ServerName models.weather-bell.com
  DocumentRoot "/home/www/htdocs/weatherbell.com/models"
  Alias /weather "/neytiri/maue/weather"
  ServerAdmin webmaster@dummy-host.example.com
  ErrorLog "logs/models.weatherbell.com-error.log"
  CustomLog "logs/models.weatherbell.com-access.log" common
</VirtualHost>
<VirtualHost *:80>
  <Directory "/home/www/htdocs">
    Options +Indexes
    Allow from all
  </Directory>
</VirtualHost>
<VirtualHost *:443>
  DocumentRoot "/home/www/htdocs"
  <Directory "/home/www/htdocs">
    Options +Indexes
    Allow from all
  </Directory>
</VirtualHost> 
```

# iframe - AddThis twtthubframe 阻止点击ie7

> ID：12452040
> 
> 赞同：0
> 
> 时间：2012-09-17T01:00:53.597
> 
> 标签：iframe, twitter, internet-explorer-7, click, addthis

我正在使用 Add-This 将“Tweet”和“Like”按钮添加到我的页面。

我包含的脚本如下：

[http://s7.addthis.com/js/250/addthis_widget.js](http://s7.addthis.com/js/250/addthis_widget.js)

它将稍微著名的#twttrhubframe 和#twttrhubframesecure iframe 添加到页面顶部的正文标记内。

在大多数浏览器上，这些 iframe 是隐藏的、最左对齐（左：-9999px）等，不会引起问题。

在 IE7 中，当我包含上述脚本时，我无法单击任何链接或在页面上的任何位置选择任何文本。这表明 twttr iframe 覆盖了我的页面并阻止了我的鼠标事件。

我有以下附加样式无效：

```
#twttrHubFrame, #twttrHubFrameSecure  { 
    left:-100000px; 
    width:0px; 
    height:0px;
    display:none;
    visibility:hidden;
    z-index:-100;
} 
```

如果我删除脚本（从而停止包含 iframe），所有点击都可以正常工作。

有没有人遇到过这个并解决了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:32:00.813

这可能是由于 position:relative; 设置在身体上。

# objective-c - 在自定义设置器中自动修剪 NSString？

> ID：12452041
> 
> 赞同：0
> 
> 时间：2012-09-17T01:01:31.373
> 
> 标签：objective-c, ios, nsstring, setter, getter-setter

我有一个带有 NSString 属性的对象。我想为此属性使用自定义设置器，以便在设置字符串时始终修剪所有空格。

通常这是用 完成的`NSString *blah2 = [blah stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];`，但我不确定如何为自定义设置器制定这个。在 setter 中使用这样的自动释放对象不是很糟糕吗？我应该改用可变字符串然后将其转换为不可变字符串吗？

感谢你们提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:20:46.083

我打算假设ARC。

```
#import <Foundation/Foundation.h>

@interface Foo:NSObject
@property (nonatomic,copy) NSString *myString;
@end

@implementation Foo
@synthesize myString = _myString;

- (void)setMyString:(NSString *)aString;
{
    _myString = [[aString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] copy];
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        Foo *someFoo = [[Foo alloc] init];
        someFoo.myString = @"Blah     ";
        NSLog(@"Length = %ld",[[someFoo myString] length]);  // prints 4
    }
} 
```

在 setter 中，如果有人试图提供一个实例，我会复制 setter 的参数`NSMutableString`- 假设它`Foo`不会修改原始字符串。

**编辑**：或者如果手动引用计数，设置器可能是：

```
- (void)setMyString:(NSString *)aString;
{
    if( aString != _myString ) {
        [_myString release];
        _myString = [[aString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] copy];
    }
} 
```

# git - Git错误：src refspec master不匹配任何错误：未能推送一些参考

> ID：12452042
> 
> 赞同：58
> 
> 时间：2012-09-17T01:01:34.203
> 
> 标签：git, bitbucket, git-push, refspec

我正在尝试将文件添加到 BitBucket 上的存储库中，但遇到了麻烦。

我正在使用 GIT，这就是我输入的内容

```
$ cd lis4368/assignments
$ git remote
$ git remote -v
$ git remote rm origin 
```

然后我输入这个（这是 BitBucket 告诉我输入的）

```
$ git remote add origin https://cpb09e@bitbucket.org/cpb09e/cpb09e.git
$ git push -u origin master 
```

我不断收到此错误消息：

```
error: src refspec master does not match any.
error: failed to push some refs to 'https://cpb09e@bitbucket.org/cpb09e/cpb09e.git' 
```

有人可以帮我吗？我已经尝试了从 git commit 到 rm -rf * 的所有方法，但我根本无法工作。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-09T06:07:43.023

此消息的一个典型根本原因是：

*   当 repo 被初始化时 ( `git init lis4368/assignments`)，
*   但**从来没有提交过**

即，如果您至少没有添加和提交一次，则不会有本地`master`分支可以推送。

首先尝试创建一个提交：

*   然后通过添加 ( `git add .`) `git commit -m "first commit"`
    （假设您有正确的文件可以添加到索引中）
*   或通过创建第一个空提交：`git commit --allow-empty -m "Initial empty commit"`

然后再试`git push -u origin master`一次。

有关更多信息，请参阅“[为什么我需要显式推送新分支？](https://stackoverflow.com/a/17096880/6309) ”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-05T05:23:30.303

它不承认你有一个 master 分支，但我找到了一种绕过它的方法。我发现 master 分支没有什么特别之处，你可以创建另一个分支并将其称为 master 分支，这就是我所做的。

创建主分支：

```
git checkout -b master 
```

你可以解决这个问题。

# linux - 如何从命令行从流中删除最后一个新行

> ID：12452043
> 
> 赞同：0
> 
> 时间：2012-09-17T01:02:16.063
> 
> 标签：linux, bash, sed, newline

我有这个命令行：

```
xclip -o -sel clip | sed -e 's/^ *"\(.*\)"+\?/\1/g' | tr -d '\n' |
    sed -e 's/.\{,55\}/"&"+\n/g' |
    sed -e "2,$ s/^/$(seq 22 | xargs -I{} echo -n ' ')/" |
    sed -e '$ s/+$//' | xclip -sel clip 
```

源代码中的哪个格式字符串（我用它来格式化 javascript 文件中的长字符串 - 55 和 22 是硬编码的宽度和缩进）

```
var foo = "Lorem ipsum dolor sit amet, consectetur adipiscing elit"+
          ". Nulla sed dolor nisl, in suscipit justo. Donec a enim"+
          " et est porttitor semper at vitae augue. Proin at nulla"+
          " at dui mattis mattis. Nam a volutpat ante. Aliquam con"+
          "sequat dui eu sem convallis ullamcorper." 
```

但是当我在括号内复制过去的代码时，`var foo = foo.bar()`我得到了这个

```
var foo = foo.bar("Lorem ipsum dolor sit amet, consectetur adipiscing elit"+
                  ". Nulla sed dolor nisl, in suscipit justo. Donec a enim"+
                  " et est porttitor semper at vitae augue. Proin at nulla"+
                  " at dui mattis mattis. Nam a volutpat ante. Aliquam con"+
                  "sequat dui eu sem convallis ullamcorper."
) 
```

最后报价后的新行，没什么大不了的，但有人知道我怎样才能删除最后一个新行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:10:45.883

这是一种方法，使用`awk`. 将`RS`(record separator) 设置为空字符串`awk`表示将空行（即两个连续`\n`的 ）视为记录分隔符。设置`FS`为`\n`导致`awk`作为`\n`字段分隔符而不是空格。（设置`RS`为空字符串也会导致`\n`用作字段分隔符，但我们希望避免识别其他空格。）最后，我们将`OFS`（输出字段分隔符）设置为我们想要的行之间的字符串（右引号，加上，换行符、22 个空格、开引号）和设置`ORS`（输出记录分隔符）为空字符串会导致`awk`在末尾不写任何换行符。

我`fold`习惯将行拆分为 55 字节的块而不是 sed，部分原因是它看起来更整洁，部分原因是，`sed`与.

看似多余的`$1=$1`原因`awk`recreate `$0`，其效果是`OFS`用作字段之间的输出字段分隔符。否则，它仅用于分隔单独的打印参数。

第一行和最后一行与 OP 保持不变。

```
xclip -o -sel clip | sed -e 's/^ *"\(.*\)"+\?/\1/g' | tr -d '\n' |
fold -b -w55 |
awk -vFS=$'\n' -vOFS="$(printf '"+\n%22s"' '')" \
    -vRS='' -vORS='' \
    '{$1=$1; print "\"" $0 "\""}' |
xclip -sel clip 
```

# c# - 在 C# 中绘制 XY 图 - Win CE 5.0 (C#)

> ID：12452050
> 
> 赞同：1
> 
> 时间：2012-09-17T01:03:19.777
> 
> 标签：c#, windows-ce

我是 Windows CE 的新手，我正在开发一个对话框应用程序，我必须在其中绘制一个 XY 图。在互联网上搜索无法获得任何有用的信息。如果有人帮助我找到一个简单的图形库，我可以在我的 c# 程序中使用它来绘制图形，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:43:51.897

这些可能符合您的标准，它们是本机 C#。不确定他们是否支持 CE。

.NET 中包含的默认图表组件； [http://codeabout.wordpress.com/2011/05/15/easy-way-to-plot-graphs-in-c-and-visual-studio-2010/](http://codeabout.wordpress.com/2011/05/15/easy-way-to-plot-graphs-in-c-and-visual-studio-2010/)

两个替代品 [http://www.codeproject.com/Articles/32836/A-simple-C-library-for-graph-plotting](http://www.codeproject.com/Articles/32836/A-simple-C-library-for-graph-plotting) http://sourceforge.net/projects/zedgraph/

# css - 如何添加一些 CSS/html5 效果来让它产生火热的错觉？

> ID：12452053
> 
> 赞同：1
> 
> 时间：2012-09-17T01:03:30.310
> 
> 标签：css, html, animation, visual-effects

我刚刚尝试并学习了 html5 中的点点滴滴。我基本上有这个小动画： http: [//jsfiddle.net/Hazza/dJgC9/4/](http://jsfiddle.net/Hazza/dJgC9/4/)它只是一些图像反复从天上掉下来。乐趣。我只是想知道是否有某种方法可以让它们看起来更令人兴奋。它们应该是流星之类的。所以我想尝试给它们添加火的幻觉。我想我可以有一些具有不同 CSS 效果（如模糊）的不同图像，并在它们掉落时随机加载它们。但它看起来......是的。迟钝。这有点像我想要的效果：http: [//gw2101.gtm.guildwars2.com/en/](http://gw2101.gtm.guildwars2.com/en/)。那是闪光。而且看起来很花哨。

你认为这有可能吗？还是最好留给 Photoshop，然后在几张不同的图像之间交替？我很讨厌photoshopping。:D

不管怎样，我只是在玩玩。我已经暗自为我那可怕的小风暴感到骄傲，但是嘿，这是一个开始。感谢您的任何意见或见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:52:07.277

试试这个，我的朋友。[http://mentadreams.com/2011/03/fire-effect-with-css3/](http://mentadreams.com/2011/03/fire-effect-with-css3/)

# android - 如何将选项卡添加到操作栏外的视图？

> ID：12452060
> 
> 赞同：1
> 
> 时间：2012-09-17T01:06:14.400
> 
> 标签：android, android-layout, tabs, android-tabhost, android-tabs

我有一个布局，我需要[子布局内的](https://stackoverflow.com/a/12416617/403455)选项卡，而不是操作栏中的选项卡。即，选项卡不适用于整个屏幕显示，仅适用于其中一个窗格。

如何在 Android 4.0+ 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:09:56.337

您可以使用支持库和 FragmentTabHost 来执行此操作。[谷歌在这里](http://developer.android.com/reference/android/app/TabActivity.html)有一个例子。在您的布局文件中，您可以将`android.support.v4.app.FragmentTabHost`示例中显示的内容嵌入到另一个布局中，例如窗格。

另一种选择是使用可滚动标签。它们也可以嵌入布局中的任何位置。[谷歌在这里](http://developer.android.com/training/implementing-navigation/lateral.html#horizontal-paging)给出了一个代码示例。您将嵌入窗格中的视图是`android.support.v4.view.ViewPager`带有`android.support.v4.view.PagerTitleStrip`子视图的视图。此示例还有一个示例项目，您可以下载（该示例项目没有嵌入另一个布局中的可滚动选项卡，但它是一个很好的起点）。

# algorithm - 用于在二部图中找到最大独立顶点集的蛮力算法？

> ID：12452063
> 
> 赞同：3
> 
> 时间：2012-09-17T01:07:18.310
> 
> 标签：algorithm, graph, big-o, bipartite

有谁知道用于在二分图中找到最大独立顶点集的蛮力算法的通用轮廓？

我知道还有其他算法，例如用于查找 MIS 的 König 定理，但我想知道蛮力方法的伪代码是什么？

此外，这种蛮力算法的运行时间复杂度是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:11:16.750

蛮力算法只是遍历所有顶点集并检查它们是否独立。有`2^n`一组顶点并遍历所有边以检查独立性`O(m)`，因此这是成本`O(2^n*m)`。

# java - 如何正确配置 jax-rs web service web.xml

> ID：12452064
> 
> 赞同：3
> 
> 时间：2012-09-17T01:07:19.500
> 
> 标签：java, web-applications, servlets, jax-rs

我正在尝试使用 jersey 框架实现 jax-rs Web 服务。我已经编写了 Web 服务，但我不完全理解 web.xml 标记的含义，所以我不知道我是否已正确配置它，但是当我尝试访问该服务时出现错误。这是网络服务：

```
package org.LMS.Controller;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path ("/test")
public class Test {
    private String name = "Worked";

    @GET
    @Produces (MediaType.APPLICATION_XHTML_XML)
    public String getTest ()
    {
        return name;
    }
} 
```

我的 web.xml 是：

```
 <!-- Test web service mapping -->
  <servlet> 
    <display-name>Test</display-name>
    <servlet-name>Test</servlet-name>
    <servlet-class>org.LMS.Controller</servlet-class>
    <init-param>
        <param-name>org.LMS.Controller.Test</param-name>
        <param-value>eduscope</param-value>
    </init-param>
  </servlet>
  <servlet-mapping>
    <servlet-name>Test</servlet-name>
    <url-pattern>/test</url-pattern>
  </servlet-mapping>
<!--end Test web service mapping --> 
```

这是我尝试访问我的应用程序时遇到的错误：HTTP Status 500 - type Exception report message

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
javax.servlet.ServletException: Wrapper cannot find servlet class org.LMS.Controller or a class it depends on
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:679)
root cause

java.lang.ClassNotFoundException: org.LMS.Controller
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    java.lang.Thread.run(Thread.java:679) 
```

你们能告诉我我做错了什么并解释 web.xml 文件中的每个标签的含义与 Web 服务有关吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:19:39.350

您设置了错误的 servlet。假设您使用的是[Jersey](http://jersey.java.net)，您需要按如下方式指定您的 servlet：

```
<servlet>
    <servlet-name>Rest</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>org.LMS.Controller.Test</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Rest</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

当你想访问它时，你使用下面的 url

```
http://(host)[:port]/(context path)/rest/test
e.g. 
http://localhost:8080/MyRestProject/rest/test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-18T13:34:46.047

要使用 jersey 配置 jax-rs webservice，您可以在 web.xml 上使用最简单且只有 2 个配置进行配置（在 java 代码和注释中使用更多步骤），请按照以下步骤操作：

**1）编写应用程序（Java代码）：**

```
package your.package.example;

import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.core.Application;

public class ExampleApplication extends Application {

     public Set<Class<?>> getClasses() {
           Set<Class<?>> s = new HashSet<Class<?>>();

           // Annotated @Path endpoint
           s.add(ExampleWebServiceRestClass.class); 

           return s;
       }
} 
```

**2) 在您的 web.xml 中添加配置引用（到应用程序代码）：**

```
<web-app>

    <servlet>
        <servlet-name>your.package.example.ExampleApplication
        </servlet-name>

        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>

    </servlet>
    <servlet-mapping>
        <servlet-name>your.package.example.ExampleApplication
        </servlet-name>
        <url-pattern>/wspath/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T10:46:04.567

当我们当时配置 REST Web 服务时，

需要设置 init-param 和 init-value 来扫描 Web 服务类实现，如下面的 Jersey 类进行扫描：-

```
<init-param>
   <param-name>com.sun.jersey.config.property.packages</param-name>
   <param-value>yourpackegeName</param-value>
</init-param> 
```

# jquery - 由模板控制的主干列表项视图标签

> ID：12452067
> 
> 赞同：0
> 
> 时间：2012-09-17T01:08:41.013
> 
> 标签：jquery, templates, backbone.js, idioms

我有一个 ListView，里面有一堆 ListItemView，使用 html 文件中的模板。我很快发现 Backbone 期望视图控制所涉及的元素，以便它可以委托事件等。[这个答案](https://stackoverflow.com/a/8218085/410882)显示了自定义外部标记中常见事物（如 id）的标准方法。

我只是觉得我的模板中没有外部标签有点奇怪。如果我想分配一个类甚至改变元素的种类，在模板 IMO 中似乎更直观。在大多数情况下，我可以将视图分配给现有元素，但对于集合的项目视图，它必须从头开始创建新视图和元素。

我可以使用 setElement 将字符串分配给 el 并委托事件。但是，当稍后重新呈现控件时（例如在编辑之后），这会中断与 DOM 的连接。我的解决方案是包装 setSelement，使用 jQuery 的 replaceWith 将旧元素切换为新元素：

```
window.Backbone.View.prototype.replaceElement = (element) ->
  old = @$el
  @setElement element, true
  old.replaceWith @$el 
```

然后我可以在视图中使用它：

```
render: () ->
  @replaceElement @template @model.toJSON()
  return @ 
```

带模板：

```
<script id="actionTemplate" type="text/x-handlebars-template">
    <li id="{{id}}"><input type="checkbox" />{{name}}</li>
</script> 
```

任何人都可以看到任何陷阱吗？我主要担心的是，它可能比从现有标签中交换 html 慢，更重要的是它还不够惯用吗？当框架真的希望我只保留模板中标签的内容时，也许我很愚蠢地与框架作斗争？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:35:51.893

您的方法的问题在于您的`@el`视图仍然是您已用新视图替换的原始视图。所以你的所有事件监听器仍然监听这个旧元素。所以你必须写这样的东西：

```
window.Backbone.View.prototype.replaceElement = (element) ->
  old = @$el
  @setElement element, true
  old.replaceWith @$el
  @setElement element 
```

除此之外，如果您只是想创建一个项目列表，那么为每个项目创建一个新的视图实例并不是一个好主意。一个视图包含一个`ul`元素和一个迭代列表的模板就足够了。

```
<script id="actionTemplate" type="text/x-handlebars-template">
    <ul>
    {{each items}}
        <li id="{{id}}"><input type="checkbox" />{{name}}</li>
    {{/each}}
    </ul>
</script> 
```

# c++ - 嵌入式 Ruby GC 和包装结构

> ID：12452069
> 
> 赞同：1
> 
> 时间：2012-09-17T01:09:07.313
> 
> 标签：c++, ruby, garbage-collection

我有一个嵌入了 ruby​​ 1.9.3 的 win32 控制台应用程序，并且我遇到了 ruby​​ GC 和带有包含指向大数据的指针的包装 C 结构的对象的问题。

经过一些测试，当孤立对象占用一些内存时，ruby 似乎会运行 GC。问题是ruby没有考虑结构指针占用的内存大小，因此它不会启动GC，因为它认为那些孤立对象太小并且不占用太多内存。

我制作了一个示例应用程序，该应用程序会在其包装结构中创建大量包含大数据的对象时崩溃，代码如下：

```
#include <ruby.h>

typedef struct TestClassStructS {
    byte* bytes;
} TestClassStruct;

static void testClassFree(TestClassStruct *p) {
    delete p->bytes;
    delete p;
}

VALUE testClassNew(VALUE klass) {
    TestClassStruct* ptr = new TestClassStruct();
    ptr->bytes = new byte[1024 * 1024 * 5]();
    VALUE obj = Data_Wrap_Struct(klass, NULL, testClassFree, ptr);
    rb_obj_call_init(obj, 0, 0);
    return obj;
}

VALUE testClassInitialize(VALUE self) {
    return self;
}

typedef VALUE (*rubyfunc)(...);

VALUE require_wrap(VALUE arg)
{
    return rb_eval_string("GC.enable; loop do; TestClass.new; end");
}

int main(int argc, char** argv[])
{
    RUBY_INIT_STACK;
    ruby_init();
    //freopen("CON", "w", stdout);
    ruby_init_loadpath();
    ruby_sysinit(&argc, argv);

    VALUE testClass = rb_define_class("TestClass", rb_cObject);
    rb_define_singleton_method(testClass, "new", (rubyfunc)testClassNew, 0);
    rb_define_method(testClass, "initialize", (rubyfunc)testClassInitialize, 0);

    int error;
    VALUE result = rb_protect(require_wrap, 0, &error);
    if (error) 
    {
        VALUE lasterr = rb_gv_get("$!");
        VALUE message = rb_obj_as_string(lasterr);

        printf(StringValuePtr(message));
    }

    return ruby_cleanup(0);
} 
```

这不是一个真实的案例场景，但让我担心在某些情况下，如果没有启动 GC，我的应用程序可能会占用太多内存。

我可以通过定期调用 GC.start 来解决这个问题，但这对我来说似乎是一个肮脏的解决方案。

如果有一种方法可以让 ruby​​ 在某些对象被孤立时优先考虑垃圾收集或告诉 ruby​​ c 结构在内存中占用的实际大小，这将是一个不错的解决方案，但我不知道 ruby​​ api 是否包含这样的东西，我找不到类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:46:44.697

如果可以，请使用 xmalloc（我认为来自 ruby​​.h）来分配内存。也就是说，到目前为止，确保分配的内存在下一次​​ GC 触发时得到考虑的唯一方法。

有一个用包装的 C 结构注册的新 dsize 函数，但它似乎（还没有？）在 ruby​​ 1.9.3 中使用

# php - 如何显示自定义帖子类型及其所有帖子？

> ID：12452070
> 
> 赞同：0
> 
> 时间：2012-09-17T01:09:15.377
> 
> 标签：php, loops

我为健身房的课程创建了一个自定义帖子类型。我有一个名为 classes 的页面，它有一个标题和一个简短的描述。

我想在它下面显示自定义帖子类型。我想显示自定义帖子类型中的所有帖子。

这是我想要的布局：

标题 - 类简短文本。

自定义帖子类型帖子 - 标题

自定义帖子类型帖子 - 文本

自定义帖子类型帖子 - 标题

自定义帖子类型帖子 - 文本

目前我正在使用以下内容：

```
 <?php query_posts( 'post_type=Beaudesert-Class'); ?>
  <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
    <?php if ( is_front_page() ) { ?>
    <?php } else { ?>
    <?php } ?> 
```

这仅显示其中一篇文章，我无法再显示课程页面的标题和内容。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:22:45.117

我认为当您尝试遍历帖子时出现语法错误。根据您编写代码的方式，`the_post`需要检查它是否是首页。

```
<?php 
query_posts('post_type=Beaudesert-Class');
while ( have_posts() ) : the_post ){
    if ( is_front_page(the_post) ) { 
    }
    else { 
    }
  }
?> 
```

也请让我们知道您使用当前代码收到的错误消息。

# ruby-on-rails - 尝试为 ror 应用程序设置 postgres，出现错误 - fe_sendauth：未提供密码

> ID：12452073
> 
> 赞同：26
> 
> 时间：2012-09-17T01:09:36.343
> 
> 标签：ruby-on-rails, ruby, postgresql, passwords, pg

得到：

```
An error has occurred:

Error connecting to the server: fe_sendauth: no password supplied 
```

中的设置`database.yml`与其他机器上的应用程序设置相同。

如何进行设置，以便我不需要硬编码密码？

我可以使用 PgAdmin-III 查看 db ok。

我宁愿没有密码，`database.yml`因为使用此应用程序的其他机器没有/不需要它，所以这似乎与我的 Pg 安装有关。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-17T01:48:56.053

你需要改变你的改变你的`pg_hba.conf`. 这是我的一个例子：

`pg_hba.conf`：

```
TYPE  DATABASE        USER            ADDRESS                 METHOD

host    all             all             127.0.0.1/32            trust

host    all             PC             127.0.0.1/32            trust

host    all             all             ::1/128                 trust 
```

请注意，这`trust`意味着`address`（在本例中为 localhost）上的任何人都可以作为列出的用户（或在本例中为他们选择的任何用户）连接。这实际上只适用于数据不重要的开发配置。**不要在生产中使用它**。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-11T19:08:36.727

@rodrigo-zurek 出现在现场；你必须改变`pg_hba.conf`. 只想为 OSX 用户添加此答案，因为`pg_hba.conf`默认情况下位于不同的位置。

```
sudo su - postgres
vim /Library/PostgreSQL/<YOUR_VERSION>/data/pg_hba.conf 
```

默认值将`md5`在列`METHOD`中，但将所有这些替换为`trust`：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust 
```

然后，在 Applications/PostgreSQL 9.X 中打开 pgAdmin III，右键单击数据库（例如`PostgreSQL 9.4 (localhost)`），然后单击`Reload Configuration`。在此之后，我能够`rake db:create`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:33:57.917

未提供密码意味着您已将其设置为要求密码验证并且未提供密码。这是 9.0 的文档：[http ://www.postgresql.org/docs/9.0/static/auth-methods.html](http://www.postgresql.org/docs/9.0/static/auth-methods.html)

请记住，本地身份验证在 9.1 中已从“ident”更改为“peer”以避免混淆。[请参阅http://www.postgresql.org/docs/9.1/static/auth-methods.html](http://www.postgresql.org/docs/9.1/static/auth-methods.html)上的 9.1 文档

还要记住，这是一个有序的规则集，具有第一次匹配管理。此外，本地和本地主机是不同的。Local 用于本地 UNIX 域套接字连接，而主机 localhost 用于到 localhost 的网络连接。因此，听起来您需要进行一些故障排除，但希望文档可以提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T16:20:51.143

```
#appveyor.yml
services: postgresql
test_script:
  - SET PGUSER=postgres
  - SET PGPASSWORD=Password12!
  - PATH=C:\Program Files\PostgreSQL\9.6\bin\;%PATH% 
```

# c++ - 从 OpenNI 检索音频流的峰值

> ID：12452075
> 
> 赞同：1
> 
> 时间：2012-09-17T01:09:43.643
> 
> 标签：c++, kinect, openni

我正在尝试使用 OpenNI 从 Kinect 的音频流中获取峰值电平（分贝电平或诸如此类）。

我找到了这些：

[http://openni.org/docs2/Reference/classxn_1_1_audio_meta_data.html](http://openni.org/docs2/Reference/classxn_1_1_audio_meta_data.html)

[http://openni.org/docs2/tutorial/smpl_audio.html](http://openni.org/docs2/tutorial/smpl_audio.html)

但我很难把它拼凑起来。我只需要某种整数来计算 kinect 周围区域的响度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:56:39.597

我试过使用 OpenNI 提供的音频 API 没有运气，甚至没有提供的示例。不久前我也有[同样的问题](https://stackoverflow.com/questions/8465209/how-can-i-access-kinect-audio-data-with-openni)。

如果您在 osx/linux 上，您可以同时使用 openni/libfreenect（仅作为 linux 上的管理员），并且 libfreenect 具有一些实验性音频支持。

与此同时，我发现了另外两个看起来很有趣的项目：

1.  [听](http://winnie.kuis.kyoto-u.ac.jp/HARK/wiki.cgi?page=HARK-KINECT)
2.  [MS Kinect-OpenNI 桥接器](http://code.google.com/p/kinect-mssdk-openni-bridge/)

我没用过，虽然第二个看起来很有希望，所以应该可以通过 MS SDK 访问音频并使用 OpenNI 处理数据。

# php - 警告：缺少参数 1

> ID：12452078
> 
> 赞同：5
> 
> 时间：2012-09-17T01:09:50.543
> 
> 标签：php, class

我的 php 代码有一些问题：所有信息都返回，但我不知道为什么会出现错误。对于我的索引页，我只包含了实际使用该类的代码行，除了一些包含之外，实际上没有其他代码。我确定这是我构建 __contstruct 的方式，但我不确定这样做的适当方式。我在如何从索引页面调用它时遗漏了一些东西。

我的 __construct 的这行代码在没有错误的情况下工作，但我不希望在我的类中分配变量。

```
public function __construct(){
    $this->user_id = '235454';
    $this->user_type = 'Full Time Employee';

} 
```

**这是我的课**

```
<?php 

class User
{
protected $user_id;
protected $user_type;
protected $name;
public $first_name;
public $last_name;
public $email_address;

public function __construct($user_id){
    $this->user_id = $user_id;
    $this->user_type = 'Full Time Employee';

}

public function __set($name, $value){
    $this->$name = $value;

}

public function __get($name){
    return $this->$name;

}

public function __destroy(){

}

 }

 ?> 
```

**这是我的索引页中的代码：**

```
<?php

ini_set('display_errors', 'On'); 
error_reporting(E_ALL);

 $employee_id = new User(2365);
 $employee_type = new User();   

echo 'Your employee ID is ' . '"' .$employee_id->user_id. '"' . ' your employement status is a n ' . '"' .$employee_type->user_type. '"';

echo '<br/>';

 ?> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T01:11:56.487

问题是：

```
$employee_type = new User(); 
```

构造函数期望一个参数，但您什么也不发送。

改变

```
public function __construct($user_id) { 
```

至

```
public function __construct($user_id = '') { 
```

查看输出

```
$employee_id = new User(2365);
echo $employee_id->user_id; // Output: 2365
echo $employee_id->user_type; // Output: Full Time Employee
$employee_type = new User();
echo $employee_type->user_id; // Output nothing
echo $employee_type->user_type; // Output: Full Time Employee 
```

如果您有一个用户，您可以这样做：

```
$employer = new User(2365);
$employer->user_type = 'A user type';

echo 'Your employee ID is "' . $employer->user_id . '" your employement status is "' . $employer->user_type . '"'; 
```

哪个输出：

```
Your employee ID is "2365" your employement status is "A user type" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T01:28:29.713

我不是 PHP 专家，但看起来您正在创建 2 个新的类 user 实例，并且在第二次实例化时，您没有将 user_id 传递给构造函数：

```
$employee_id = new User(2365); 
```

在我看来，这正在创建一个新的 User 实例并将该实例分配给变量 $employee_id - 我认为这不是您想要的吗？

```
$employee_type = new User(); 
```

这看起来像您正在实例化 User 的另一个实例并将其分配给变量 $employee_type - 但是您调用了构造函数 User() 而没有按要求传递 ID - 因此出现错误（缺少参数）。

您的返回脚本内容看起来不错的原因是因为 User 类的第一个实例有一个 ID（因为您传入了它），而第二个实例有一个员工类型，因为这是在构造函数中设置的。

就像我说的，我不知道 PHP，但我猜你想要更多的东西：

```
$new_user = new User(2365);
echo 'Your employee ID is ' . '"' .$new_user->user_id. '"' . ' your employement status is a n ' . '"' .$new_user->employee_type. '"'; 
```

在这里，您正在实例化分配给变量 $new_user 的用户类的单个实例，然后访问该单个实例的属性。

编辑：.....Aaaaaaaaand - 我太慢了:-)

# css - Twitter Bootstrap：按布局宽度更改列数量

> ID：12452080
> 
> 赞同：0
> 
> 时间：2012-09-17T01:10:30.000
> 
> 标签：css, twitter-bootstrap

我有一些狭窄的内容，我想为大型桌面（> = 1200px）占用 3 列，但默认只有 2 列（980px-1199px）？

Twitter Bootstrap 可以做到这一点吗？宁愿不使用javascript...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:54:51.097

我最终手动编写了浮动的 css 规则，即：

```
li {
  width: 33%; float:left;
}
@media (max-width: 1200px) {
  width:50%;
} 
```

# .net - 为什么“发布”不是 Dataflow.TransformBlock 的方法？不编译

> ID：12452081
> 
> 赞同：0
> 
> 时间：2012-09-17T01:10:31.647
> 
> 标签：.net, vb.net, task-parallel-library, tpl-dataflow

在[网络上的示例中](http://www.intertech.com/Blog/Post/Async-CTP-TPL-Dataflow-TransformBlock-Tin-Tout.aspx)，我看到有一个方法`Dataflow.TransformBlock.Post()`，但我无法编译：

```
Dim q As New Dataflow.TransformBlock(Of Integer, Integer)(Function(x As Integer) As Integer
                                                                  Return x
                                                              End Function)
q.post(5) 
```

错误是：

> “post”不是“System.Threading.Tasks.Dataflow.TransformBlock(Of Integer, Integer)”的成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:41:31.443

[`Post()`](http://msdn.microsoft.com/en-us/library/hh194836.aspx)是一个扩展方法，这意味着您需要导入 TPL Dataflow 命名空间：

```
Imports System.Threading.Tasks.Dataflow 
```

如果这样做，您还可以`Dataflow.`从块类名称中删除前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:45:21.250

根据[MSDN](http://msdn.microsoft.com/en-us/library/hh194836.aspx) ，这仅在 .NET 4.5 中可用 - 也许您使用的是较旧的 .NET 版本和/或没有在您的项目中执行`Imports System.Threading.Tasks.Dataflow`和/或不引用。`System.Threading.Tasks.Dataflow.dll`

# python - 从特定目录导入包的开发版本

> ID：12452084
> 
> 赞同：0
> 
> 时间：2012-09-17T01:10:56.467
> 
> 标签：python

我正在尝试将流行库的开发版本加载到我的项目中。显然，它们将具有相同的包名称，因此不能在没有歧义的情况下共存。

我对 python 模块管理的理解并没有超出站点包、模块搜索路径和标准导入语句。

我的代码以以下导入开头：

```
from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget
from IPython.frontend.qt.embedded_kernelmanager import QtEmbeddedKernelManager
from IPython.frontend.qt.kernelmanager import QtKernelManager
from IPython.lib import guisupport 
```

如何让 IPython 符号指向用户提供的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:12:58.900

将该目录添加到`PYTHONPATH`. 您可以通过设置`PYTHONPATH`环境变量或在导入之前执行以下操作来执行此操作：

```
import sys
sys.path.insert(0, "/path/to/dev/IPython/dir") 
```

另一种选择是使用该`virtualenv`包创建一个环境，让您可以沙盒控制安装的 Python 包。

```
$ pip install virtualenv
$ virtualenv venv
$ source venv/bin/activate
(venv)$ pip install path/to/IPython/dev/package
(venv)$ python some_script.py 
```

# mysql - 在函数中找不到返回

> ID：12452085
> 
> 赞同：4
> 
> 时间：2012-09-17T01:11:14.110
> 
> 标签：mysql

我四处浏览，其他解决方案似乎对我不起作用。尝试在 MySQL 中创建此函数时，我不断收到“未找到函数返回”错误。知道为什么吗？

```
CREATE FUNCTION `mydb`.`myfunction`(Name varchar(20))
RETURNS int
LANGUAGE SQL
NOT DETERMINISTIC
SELECT SUM(Transaction.Bought) INTO @Qty FROM Transaction WHERE Transaction.Name = Name;
RETURN @Qty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:15:52.047

或者，试试这个，

```
DELIMITER $$
CREATE FUNCTION `myfunction`(Name varchar(20))
RETURNS int
LANGUAGE SQL
NOT DETERMINISTIC
BEGIN

  DECLARE returnVal int;

  SELECT SUM(`Transaction`.Bought) INTO returnVal 
  FROM `Transaction` 
  WHERE `Transaction`.Name = Name;

  RETURN returnVal;

END$$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:41:34.680

尝试这个

```
DELIMITER $$
CREATE FUNCTION `myfunction`(`Name` VARCHAR(20) CHARSET utf8) RETURNS INT NOT DETERMINISTIC
READS SQL DATA
MAIN: BEGIN
DECLARE returnVal int;
SELECT SUM(`Transaction`.Bought) INTO returnVal FROM `Transaction` WHERE `Transaction`.Name = Name;
RETURN returnVal;
END MAIN;$$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T01:20:19.537

```
delimiter //
create function myfun1234 (i int,j int)
returns int 
begin 
      declare x int ;
       declare    y int ;
        declare  z int ;
      set x=10;
      set y=20;
      if (1<=x && j>=y )then 
      set z=i+j;
      end if;
    return z;
      end; //

-- error1   FUNCTION myfun12 ended without RETURN 
```

# regex - Perl 正则表达式字符串部分到数组

> ID：12452087
> 
> 赞同：1
> 
> 时间：2012-09-17T01:11:55.177
> 
> 标签：regex, arrays, string, perl, split

我有一个字符串：

```
"2012-szept-17 02:55 - someproblem: 192.167.1.1 since - $somevariables[0] $morevariables[-1]" 
```

我想把这些放到一个数组中

```
$somevariables[0]
$morevariables[-1] 
```

问题是这些变量可以命名为其他任何名称，并且它们可以位于字符串中的任何位置。我对它们的唯一了解是它们从开始`$`到`[sg]`结束。

这是我用正则表达式得到的最远距离

```
my @fuu = $notimsg =~ m/(\$.+\[.+\])/g; 
```

问题是表达式正在使它变成`"$somevariables[0] $morevariables[-1]"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:25:41.183

如果它们必须是有效的变量名（标识符），请尝试

```
m/(\$\w+\[[^]]+\])/g 
```

正如@Borodin 指出的那样，如果您真的想确保只匹配标识符（而不是奇怪的东西`$3abc[12]`），您可以使用

```
m/(\$[a-z_]\w*\[[^]]+\])/gi 
```

# javascript - 使用 Phonegap 和 Wordpress 的 XML-RPC 将图像上传到 wordpress

> ID：12452092
> 
> 赞同：0
> 
> 时间：2012-09-17T01:13:01.417
> 
> 标签：javascript, wordpress, cordova, xml-rpc

我正在尝试使用 wp.uploadFile() 将图像上传到 WordPress，但它没有编码为 JPG。[正如 api ( http://codex.wordpress.org/XML-RPC_WordPress_API/Media#wp.uploadFile](http://codex.wordpress.org/XML-RPC_WordPress_API/Media#wp.uploadFile) ) 所说，我发送了一个 Base64 编码的字符串，但是当我下载图像时，它只是带有我发送的字符串的文本。我从 Phonegaps API 获取照片，并得到一个 base64 编码的字符串，所以我认为数据没有格式错误。

顺便说一句，我将这个库用于 WordPress API：[https ://github.com/developerworks/wordpress-xmlrpc-javascript-api](https://github.com/developerworks/wordpress-xmlrpc-javascript-api)

编辑：这是我目前使用的代码。这很丑陋，但我只是在测试。

```
navigator.camera.getPicture(function(source_image){
var image = document.getElementById('Photo');
image.src = "data:image/jpeg;base64," + source_image;
var hoy = getDate();
photo = wp.uploadFile(1, {
    name: hoy+'.jpg',
    type: 'image/jpg',
    bits: source_image,
    overwrite: false
});
console.log("Photo uploaded!");
}, function(a){console.log(a);alert('imagen no subida');}, cam_options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T18:42:15.167

这是成功的“uploadFile”调用的 XML 有效负载的片段：

```
...
<member>
<name>bits</name>
<value>
<base64>...base64-encoded string...</base64>
</value>
</member>
... 
```

"wordpress-xmlrpc-javascript-api" 可以生成它，但是您需要传递 Base64 对象（Base64 类是用于此 API 的 librarymimic.js 的一部分）。下面是它的工作原理：

```
bits: new Base64( atob(dataURI.split(',')[1]) ); 
```

`dataURI`数据 URI 字符串在哪里：`"data:image/png;base64,iVBOR......"`

# java - Applet 信任库 API 代码

> ID：12452095
> 
> 赞同：0
> 
> 时间：2012-09-17T01:13:22.850
> 
> 标签：java, sockets, ssl, tcp, applet

我制作了一个小程序，用于创建与 Cpp 服务器的 SSL 套接字连接。我知道需要一个信任库来与 Java 客户端和 SSL 服务器建立 SSL 套接字连接。我的问题是关于如何使用 Java API 代码让小程序知道我想要使用的信任库的名称和密码（比如 mytruststore）。我有一些旧代码曾经可以工作，但由于最近的 Java 更新而不再可用（可能是为了修补安全问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:52:41.030

> 我知道需要一个信任库来与 Java 客户端和 SSL 服务器建立 SSL 套接字连接。

仅当服务器使用自签名证书时。如果是这样，如果你可以改变它，那就改变它，这是一种糟糕的安全实践，它会给你的客户带来额外的复杂性和成本。如果服务器使用 CA 签名证书，则默认 Java 信任库将起作用。

> 我的问题是关于如何使用 Java API 代码让小程序知道我想要使用的信任库的名称和密码（比如 mytruststore）。

您不需要信任库的密码，只需要密钥库（即包含私钥）。如果您真的必须包含自己的信任库，只需硬编码其名称即可。

# c++ - XCode Mach-O 链接器错误

> ID：12452098
> 
> 赞同：0
> 
> 时间：2012-09-17T01:14:44.653
> 
> 标签：c++, xcode, linker, mach-o

从 XCode 4.3 + llvm 3.1 升级到 XCode 4.5 GM 后，我开始收到以下链接器错误。我已验证定义“_InvokeBridge”的静态库已正确链接。

知道什么可能导致错误吗？此外，是否有一般调查 Mach-o 链接器错误的提示？

```
undefined symbols for architecture i386:
  "void     pplx::details::_UnrealizedChore::_InvokeBridge<pplx::details::_PPLTaskHandle<std::__1::shared_ptr<BI::Url const>, pplx::task<std::__1::shared_ptr<BI::Url const> >::_InitialTaskHandle<std::__1::shared_ptr<BI::Url const>, BI::ServicesDocumentSession::GetViewUriAsync()::$_3, pplx::details::_TypeSelectorNoAsync>, pplx::details::_UnrealizedChore> >(pplx::details::_PPLTaskHandle<std::__1::shared_ptr<BI::Url const>, pplx::task<std::__1::shared_ptr<BI::Url const> >::_InitialTaskHandle<std::__1::shared_ptr<BI::Url const>, BI::ServicesDocumentSession::GetViewUriAsync()::$_3, pplx::details::_TypeSelectorNoAsync>, pplx::details::_UnrealizedChore>*)", referenced from:
  pplx::details::_PPLTaskHandle<std::__1::shared_ptr<BI::Url const>, pplx::task<std::__1::shared_ptr<BI::Url const> >::_InitialTaskHandle<std::__1::shared_ptr<BI::Url const>, BI::ServicesDocumentSession::GetViewUriAsync()::$_3, pplx::details::_TypeSelectorNoAsync>, pplx::details::_UnrealizedChore>::_PPLTaskHandle(std::__1::shared_ptr<pplx::details::_Task_impl<std::__1::shared_ptr<BI::Url const> > > const&) in libDataPlatform.a(ServicesDocumentSession.o) 
```

非常感谢，A

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:45:29.203

尝试这个：

转到项目目标，构建设置，然后将**架构**设置为其他，

删除 $(ARCHS_STANDARD_32_BIT) ，然后写**armv7**

让我知道这是否有效，我也有类似的问题。

# python - Python 函数的文本

> ID：12452100
> 
> 赞同：2
> 
> 时间：2012-09-17T01:16:20.003
> 
> 标签：python, couchdb

> **可能重复：**
> [如何获取 Python 函数的源代码？](https://stackoverflow.com/questions/427453/how-can-i-get-the-source-code-of-a-python-function)

首先，让我定义我的问题。之后我会给一个动力。

## 问题：

```
def map(doc):
  yield doc['type'], 1

# How do I get the textual representation of the function map above,
# as in getting the string "def map(doc):\n  yield doc['yield'], 1"?
print repr(map)  # Does not work. It prints <function fun at 0x10049c8c0> instead. 
```

## 动机：

对于那些熟悉 CouchDB 视图的人，我正在编写一个 Python 脚本来生成 CouchDB 视图，这些视图是嵌入了 map 和 reduce 函数的 JSON。例如，

```
{
  "language": "python",
  "views": {
    "pytest": {
      "map": "def fun(doc):\n  yield doc['type'], 1",
      "reduce": "def fun(key, values, rereduce):\n  return sum(values)"
    }
  }
} 
```

但是，为了可读性，我更愿意先在 Python 脚本中本地编写`map`and`reduce`函数，然后使用此问题的答案构造上述 JSON。

## 解决方案：

根据[BrenBarn 的回应](https://stackoverflow.com/a/12452106/560074)，使用`inspect.getsource`.

```
#!/usr/bin/env python

import inspect

def map(doc):
  yield doc['type'], 1

def reduce(key, values, rereduce):
  return sum(values)

couchdb_views = {
  "language": "python",
  "views": {
     "pytest": {
       "map": inspect.getsource(map),
       "reduce": inspect.getsource(reduce),
     }
  }
}

# Yay!
print couchdb_views 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:18:16.587

您可以使用该[`inspect.getsource`](http://docs.python.org/library/inspect.html#inspect.getsource)函数来获取函数的来源。请注意，要使其工作，必须从文件中加载函数（例如，它不适用于交互式解释器中定义的函数）。

# shell - 如何在 shell 脚本中复制和重命名文件

> ID：12452101
> 
> 赞同：0
> 
> 时间：2012-09-17T01:16:46.603
> 
> 标签：shell, copy, rename

我有一个文件夹“test”，其中还有 20 个其他文件夹，名称不同，例如 A、B ....（实际上它们是人的名字而不是 A、B ...）我想编写一个 shell 脚本去每个文件夹，如 test/A 并用 A[1,2..] 重命名所有 .c 文件并将它们复制到“test”文件夹。我是这样开始的，但我不知道如何完成它！

```
#!/bin/sh
for file in `find test/* -name '*.c'`; do mv $file $*; done 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T16:06:42.167

```
#!/bin/bash

## Find folders under test. This assumes you are already where test exists OR give PATH before "test"
folders="$(find test -maxdepth 1 -type d)"

## Look into each folder in $folders and find folder[0-9]*.c file n move them to test folder, right?
for folder in $folders;
do
   ##Find folder-named-.c files.
   leaf_folder="${folder##*/}"
   folder_named_c_files="$(find $folder -type f -name "*.c" | grep "${leaf_folder}[0-9]")"

   ## Move these folder_named_c_files to test folder. basename will hold just the file name.
   ## Don't know as you didn't mention what name the file to rename to, so tweak mv command acc..
   for file in $folder_named_c_files; do basename=$file; mv $file test/$basename; done
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T01:45:49.260

这段代码应该让你接近。我试图准确地记录我在做什么。

它确实依赖 BASH 和 GNU 版本的 find 来处理文件名中的空格。我在 .DOC 文件的目录填充上对其进行了测试，因此您也需要更改扩展名。

```
#!/bin/bash
V=1
SRC="."
DEST="/tmp"

#The last path we saw -- make it garbage, but not blank.  (Or it will break the '[' test command
LPATH="/////" 
#Let us find the files we want
find $SRC -iname "*.doc" -print0 | while read -d $'\0' i
  do
  echo "We found the file name... $i";

  #Now, we rip off the off just the file name.
  FNAME=$(basename "$i" .doc)
  echo "And the basename is $FNAME";
  #Now we get the last chunk of the directory
  ZPATH=$(dirname "$i"  | awk -F'/' '{ print $NF}' )
  echo "And the last chunk of the path is... $ZPATH"

  # If we are down a new path, then reset our counter.
  if [ $LPATH == $ZPATH ]; then
    V=1
  fi;
  LPATH=$ZPATH

  # Eat the error message
  mkdir $DEST/$ZPATH 2> /dev/null 
  echo cp \"$i\" \"$DEST/${ZPATH}/${FNAME}${V}\"
  cp "$i" "$DEST/${ZPATH}/${FNAME}${V}"
done 
```

# domain-driven-design - 解决贫血域模型示例

> ID：12452102
> 
> 赞同：2
> 
> 时间：2012-09-17T01:17:17.897
> 
> 标签：domain-driven-design, anemic-domain-model

我正在审查可以优化我的抵押贷款计算工具设计的领域，主要用于学习目的。在阅读了贫血领域模型之后，我对创建丰富模型产生了兴趣，并注意到我当前的实现可能有贫血！这是伪代码中的当前实现：

```
class MortgageCalculator {
  Mortgage mortgage; // mortgage object containing loanAmount, interest rate, etc.;
  calculateMonthlyPayment(); // calculates monthly payments using mortgage object's properties
}

class Mortgage { // Anemic?
  loanAmount;
  interestRate;
} 
```

目前 Mortgage 对象主要用于对象之间的数据传输等。

以下是我正在考虑的一些修订选项：

1.  将 Mortgage 对象从 MortgageCalculator 中移除，并将 Mortgage 纯粹用作 DTO，而计算器的方法带有参数（例如，calculateMonthlyPayment(loanAmount,interestRate)。这将有助于将 MortgageCalculator 与 Mortgage 对象分离，但仍会将 Mortgage 作为贫血模型.
2.  将这两个类合并为一个“丰富的” MortgageCalculator 模型，该模型包含业务逻辑（例如，calculateMonthlyPayment）和抵押属性（例如，loanAmount）。我在这里担心的是我不确定计算器对象是否有必要将其操作数作为实例变量保存，但它们会促进数据传输、存储并可能解决贫血问题？

我想知道理想的方法是什么，或者我是否错过了重点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:41:57.923

Perhaps the `Mortgage` object can perform parts of the calculation. For example, consider an object that calculates an order total:

```
for (Line line : orderLines)
  int total += line.getPrice() * line.getQuantity(); 
```

This is a known as [Feature Envy](http://c2.com/cgi/wiki?FeatureEnvySmell), and could be:

```
for (Line line : orderLines)
  int total += line.calculateTotal(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T04:49:40.917

`MortgageCalculator`实际上不是域实体，因为它没有填充到数据库中，因此为避免*贫血*，您可以将逻辑合并到`Mortgage`实体中：

```
class Mortgage {
   loanAmount;
   interestRate;

   calculateMonthlyPayment();
} 
```

还有一点：DTO 与域实体不同，DTO 是用于在分布式环境中传输数据，而域实体是专注于域逻辑。

您可以将域实体用作 DTO，因为在某些情况下，DTO 与域实体具有相同的属性。但是，大多数情况下，取决于每个客户端，也许他们需要获取需要多个域实体的数据。因此，为了关注点分离和更易于维护，建议创建与域实体分离的 DTO：

```
class MortgageDto {
   loanAmount;
   interestRate;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T07:09:14.257

如果您不知道有界上下文 (BC)，则无法执行 DDD。那么在这种情况下，BC 是什么？因为一切都取决于此。

根据我对你的理解，我认为你有一个 MortageCalculator 很好，因为你可以有多种计算抵押贷款的方法。这个类可以有一个方法，该方法将采用 Mortgage 参数。当然，我所说的可能是错误的，因为我不知道您的域。

如果一个人碰巧不是所需领域的专家，就很难回答有关 DDD 的具体问题。但一切都从 BC 开始，那么您的 BC 是什么，抵押贷款的业务角色是什么？

# python - 正则表达式 - 匹配两个字符串之间的所有文本

> ID：12452105
> 
> 赞同：2
> 
> 时间：2012-09-17T01:17:55.180
> 
> 标签：python, regex, regex-negation

我目前正在解析具有以下结构的日志文件：

1) 时间戳，前面是 # 字符，后面是 \n

2) 在该时间戳之后发生的任意 # 个事件，所有事件后跟 \n

3) 重复..

这是一个例子：

```
#100
04!
03!
02!
#1299
0L
0K
0J
0E
#1335
06!
0X#
0[#
b1010 Z$
b1x [$
... 
```

请原谅看似神秘的值，它们是代表某些“事件”的编码。

**注意：事件编码也可以使用 # 字符。**

我想做的是计算在某个时间发生的事件的数量。

换句话说，在时间 100，发生了 3 个事件。

我正在尝试匹配两个时间戳之间的所有文本 - 并通过简单地计算匹配文本中包含的换行符数来计算事件数。

我正在使用 Python 的正则表达式引擎，并且正在使用以下表达式：

`pattern = re.compile('(#[0-9]{2,}.*)(?!#[0-9]+)')`

注意： {2,} 是因为我想要至少有两位数字的时间戳。

我匹配一个时间戳，继续匹配任何其他字符，直到达到另一个时间戳 - 结束匹配。

这返回的是：

```
#100
#1299
#1335 
```

所以，我得到了时间戳——但没有任何事件数据——我真正关心的！

我认为这样做的原因是消极的后视是“贪婪的”——但我并不完全确定。

可能有一个完全不同的正则表达式可以让这变得更简单 - 接受任何建议！

任何帮助深表感谢！

-k

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:43:07.280

我认为正则表达式不是这里工作的好工具。你可以只使用一个循环..

```
>>> import collections
>>> d = collections.defaultdict(list)
>>> with open('/tmp/spam.txt') as f:
...   t = 'initial'
...   for line in f:
...     if line.startswith('#'):
...       t = line.strip()
...     else:
...       d[t].append(line.strip())
... 
>>> for k,v in d.iteritems():
...   print k, len(v)
... 
#1299 4
#100 3
#1335 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:23:32.010

原因是点不匹配换行符，所以你的表达式只会匹配包含时间戳的行；比赛不会跨越多条线。您可以将[“dotall”标志](http://docs.python.org/library/re.html#re.S)传递给，`re.compile`以便您的表达式将匹配多行。由于您说“事件编码”也可能包含一个`#`字符，因此您可能还想使用多行标志并`^`在开头锚定您的匹配项，以便它仅匹配`#`行首的 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T01:24:24.940

您可以逐行遍历数据并拥有一个仅存储与每个时间戳关联的事件数量的字典；不需要正则表达式。例如：

```
with open('exampleData') as example:
    eventCountsDict = {}
    currEvent = None
    for line in example:
        if line[0] == '#': # replace this line with more specific timestamp details if event encodings can start with a '#'
            eventCountsDict[line] = 0
            currEvent = line
        else:
            eventCountsDict[currEvent] += 1

print eventCountsDict 
```

该代码为您的示例数据打印`{'#1299\n': 4, '#1335\n': 5, '#100\n': 3}`（不包括`...`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T12:11:37.850

如果您坚持使用基于正则表达式的解决方案，我建议：

```
>>> pat = re.compile(r'(^#[0-9]{2,})\s*\n((?:[^#].*\n)*)', re.MULTILINE)
>>> for t, e in pat.findall(s):
...     print t, e.count('\n')
...
#100 3
#1299 4
#1335 6 
```

解释：

```
(              
  ^            anchor to start of line in multiline mode
  #[0-9]{2,}   line starting with # followed by numbers
)
\s*            skip whitespace just in case (eg. Windows line separator)
\n             new line
(
  (?:          repeat non-capturing group inside capturing group to capture 
               all repetitions
    [^#].*\n   line not starting with #
  )*
) 
```

您似乎误解了负前瞻的作用。紧随其后时`.*`，正则表达式引擎首先尝试使用尽可能多的字符，然后才检查前瞻模式。如果前瞻不匹配，它将逐个字符回溯，直到匹配为止。

但是，您可以将*积极*的前瞻与非贪婪的`.*?`. 在这里，`.*?`将使用字符，直到前瞻在行的开头看到 # 或整个字符串的结尾：

```
re.compile(r'(^#[0-9]{2,})\s*\n(.*?)(?=^#|\Z)', re.DOTALL | re.MULTILINE) 
```

# iphone - 如何在视图控制器导入的类中引用视图控制器？

> ID：12452107
> 
> 赞同：0
> 
> 时间：2012-09-17T01:18:18.973
> 
> 标签：iphone, objective-c, xcode

我的应用程序中有两个类，`GHHaiku`（ 的子类`NSObject`）和`GHViewController`，它们导入`GHHaiku`. 在`GHViewController`我`GHHaiku`这样实例化：

```
@property (nonatomic, strong) GHHaiku *ghhaiku; 
```

所以当我需要从`GHHaiku`in调用方法时`GHViewController`，我可以这样做`[self.ghhaiku callThisMethod];`

但是，如果`GHHaiku`需要来自`GHViewController`. 例如，有一个`UISegmentedControl`in ，并且有一个方法 in需要知道选择了哪个段。我如何获得这些信息？我想我可以在 in 中创建一个属性，然后将 in的值分配给该属性，但这似乎很麻烦，我无法想象没有更优雅的方法可以做到这一点。`GHViewController``GHHaiku``UISegmentedControl``int``GHHaiku``GHViewController``UISegmentedControl`

所以我该怎么做？

（我怀疑[另一个类引用主视图控制器属性](https://stackoverflow.com/questions/11189236/refer-to-a-main-view-controller-property-by-another-class)可能会回答我的问题，但我还不够先进，无法理解给出的答案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:27:18.423

这是一个架构问题，可以从考虑[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)和更清楚地大致沿 MVC（模型/视图/控制器）线分解事物中受益。请参阅Cocoa[中](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)的 MVC 能力。

是`GHHaiku`模型对象吗？如果是这样，那么它不应该真正“知道”视图层中发生的事情。

# r - R：如何为要通过 lm 或 nls 估计的模型添加约束？

> ID：12452108
> 
> 赞同：4
> 
> 时间：2012-09-17T01:18:26.040
> 
> 标签：r, nls

我在 R 中估计了一个模型，我想添加约束，强制其中一个系数小于另一个系数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T02:55:20.647

If you really need to use either lm or nls and can't use anything that lets you specify constraints, one way is to reparameterize the model so that the difference in coefficients is itself a parameter.

For example if you have a model with b1*x1+b2*x2 in it, but where b2 > b1 you could code that as b1*x3+d*x2 where x3=x1+x2 and d represents b2-b1\. Now you need to force d > 0\. You simply reparameterize again, d = exp(k), say, and use nls to fit the new model b1*x3+exp(k)*x2 where your parameters are b1 and k. Once estimated, you can then compute an estimate of b2 as b1+exp(k). Then b1 is guaranteed to be less than b2.

However, nls allows you to specify upper and lower bounds, so you should be able to just put 0 in as a lower bound for d (though that may not guarantee a strict inequality).

Hope that helps.

# c# - ASP.Net 2012 使用 jQuery 进行不显眼的验证

> ID：12452109
> 
> 赞同：57
> 
> 时间：2012-09-17T01:18:58.777
> 
> 标签：c#, asp.net

我正在使用 Visual Studio 2012 并创建了一个**空的 ASP.Net Web Application**，当我尝试将*传统的验证器控件*添加到新页面时，会发生此错误：

> WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。

修复它的步骤是什么？

这是我的页面标记：

```
<asp:Panel runat="server" ID="pnlUsername" GroupingText="Username settings">
    <div>
        <asp:Label ID="usernameLabel" Text="Please enter your username" runat="server" AssociatedControlID="username" />
    </div>
    <div>
        <asp:TextBox runat="server" ID="username" />
        <asp:RequiredFieldValidator ErrorMessage="The username is required" ControlToValidate="username" runat="server" Text=" - Required" />
    </div>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-05T23:06:44.133

似乎有很多关于 ValidationSettings:UnobtrusiveValidationMode 值的不正确信息。要**禁用**它，您需要执行以下操作。

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> 
```

应该使用 None，而不是 WebForms 这个词来禁用此功能。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-17T03:30:00.523

这是[来自 MS Connect 论坛的 Microsoft 官方回答](http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work)。我正在复制下面的相关文本：-

面向 .NET 4.5 时，默认启用非侵入式验证。你需要在你的项目中有 jQuery 并且在 Global.asax 中有这样的东西来正确注册 jQuery：

```
ScriptManager.ScriptResourceMapping.AddDefinition("jquery", 
    new ScriptResourceDefinition {
        Path = "~/scripts/jquery-1.4.1.min.js",
        DebugPath = "~/scripts/jquery-1.4.1.js",
        CdnPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.min.js",
        CdnDebugPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.js"
    }); 
```

用您正在使用的版本替换 jQuery 的版本。

您还可以通过删除以下行在 web.config 中禁用此新功能：

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" /> 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-05T04:38:35.637

有关 ValidationSettings的更多信息**[：UnobtrusiveValidationMode](http://msdn.microsoft.com/en-us/library/hh975440.aspx)**

指定 ASP.NET 如何全局启用内置验证器控件以将不显眼的 JavaScript 用于客户端验证逻辑。

类型：UnobtrusiveValidationMode

默认值：无

备注：如果此键值设置为**“无”** [默认]，则 ASP.NET 应用程序将使用**4.5 之前的行为**（页面中的 JavaScript 内联）进行客户端验证逻辑。如果此键值设置为**"WebForms"**，则 ASP.NET 使用**HTML5 数据属性和来自添加的脚本引用的后期绑定 JavaScript**用于客户端验证逻辑。

例子：

```
 <appSettings>
      <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
    </appSettings> 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-07-22T21:58:21.883

除了`ScriptResourceDefinition`Global.asax 中所需的“jquery”（使用您自己的路径）：

```
 protected void Application_Start(object sender, EventArgs e)
    {            
        ScriptManager.ScriptResourceMapping.AddDefinition(
            "jquery",
            new ScriptResourceDefinition
            {
                Path = "/static/scripts/jquery-1.8.3.min.js",
                DebugPath = "/static/scripts/jquery-1.8.3.js",
                CdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js",
                CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.js",
                CdnSupportsSecureConnection = true,
                LoadSuccessExpression = "jQuery"
            });
    } 
```

您还只需要在（最重要的部分）中的“jquery”**之后显式添加“WebUIValidation.js”：**`ScriptReference``ScriptManager`

```
 <asp:ScriptManager runat="server" EnableScriptGlobalization="True" EnableCdn="True">
            <Scripts>
                <asp:ScriptReference Name="jquery" />
                <asp:ScriptReference Name="WebUIValidation.js" Assembly="System.Web" />
            </Scripts>
        </asp:ScriptManager> 
```

如果您在“jquery”之前添加它，或者您根本不添加它们中的任何一个或两者（`ASP.Net`然后会在“jquery”之前自动添加它） - 客户端验证将被完全破坏：

[http://connect.microsoft.com/VisualStudio/feedback/details/748064/unobtrusive-validation-breaks-with-a-script-manager-on-the-page](http://connect.microsoft.com/VisualStudio/feedback/details/748064/unobtrusive-validation-breaks-with-a-script-manager-on-the-page)

您根本不需要任何这些 NuGet 包，也不需要您的博客中提到的任何其他包`ScriptReference`（其中一些只是重复的，甚至是完全不必要的膨胀——如果需要，它们会自动添加）。`ASP.Net`

**编辑：**您也不需要显式添加“WebForms.js”（从示例中删除它） - 如果您这样做，它`LoadSuccessExpression`会由于某种原因被忽略

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-28T21:08:01.287

所有验证器错误都已通过此解决

```
 <appSettings>
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/> 
```

错误必须消失享受....

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-12-02T16:41:03.033

`Microsoft.JScript`在您的应用程序中添加对如下的引用`web.config`：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="Microsoft.JScript, Version=10.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
      </assemblies>
    </compilation>
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="none"/>
  </appSettings>
</configuration> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-11T05:58:32.857

只需在您的项目中复制并粘贴任何 JQuery 文件，然后添加一个`Global.asax`文件并进行如下修改：

我只是将 JQuery 文件粘贴到我的项目中，并在 Global.asax 文件中添加一个引用：

```
protected void Application_Start(object sender, EventArgs e)
    {
        ScriptManager.ScriptResourceMapping.AddDefinition(
        "jquery",
        new ScriptResourceDefinition
        {
            Path = "~/jquery-1.10.2.js",
            DebugPath = "~/jquery-1.10.2.js",
            CdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.2.min.js",
            CdnDebugPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.10.2.js",
            CdnSupportsSecureConnection = true,
            LoadSuccessExpression = "jQuery"
        });
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-20T13:07:01.933

在 Nuget 包管理器中搜索 AspNet.ScriptManager.jQuery 而不是 jquery。这样您就不必自己设置映射，只需单击一个简单的安装项目即可运行。

或者通过将此行添加到项目中 web.config 文件的 Configuration 标记来禁用 Unobtrusive Validation。

```
 <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" /> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-28T11:01:30.500

在“配置文件”中，改为以下行：

```
<compilation debug="true" targetFramework="4.5" />
<httpRuntime targetFramework="4.5" /> 
```

通过这行：

```
<compilation debug="true" targetFramework="4.0" />
<httpRuntime targetFramework="4.0" /> 
```

此错误是因为在 4.0 版中属于“asp:RequiredFieldValidator”的库存在，但在 4.5 版中不存在库，因此您需要自己添加库

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-16T11:30:39.183

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" /> 
```

此行不在我的 WebConfig 中，所以：我通过将目标 .Net 版本降级到 4.0 来简单地**解决了这个问题:)**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-01T02:34:26.230

在 web.config 中的 Visual Studio 2012 中，将 targetFramework=4.5 更改为 targetFramework=4.0

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-08-28T10:27:32.643

我建议改为这条线

```
<div>
    <asp:TextBox runat="server" ID="username" />
    <asp:RequiredFieldValidator ErrorMessage="The username is required" ControlToValidate="username" runat="server" Text=" - Required" />
</div> 
```

通过这条线

```
<div>
    <asp:TextBox runat="server" ID="username" required />
</div> 
```

# ruby-on-rails - Rails 3：Mongoid 返回 # 带数组的标签

> ID：12452110
> 
> 赞同：1
> 
> 时间：2012-09-17T01:19:03.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, iteration

我有一组 @contacts 在不同的模型控制器视图上迭代：

```
<%= @contacts.each do |item| %>
<p>
<%= item.name %>
</p>
<% end %> 
```

这是控制器的样子：

```
@user = current_user
@contacts =  Contact.desc('created_at').where(:user_id => @user.id) 
```

它按预期运行，但在迭代文本中删除了这一行：

```
#<Mongoid::Contextual::Mongo:0x007fe0bc0efbd8> 
```

到底他妈发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T01:22:30.263

改变

```
<%= @contacts.each do |item| %> 
```

到

```
<% @contacts.each do |item| %> 
```

（删除=）

# php - 如何从这个多维数组形成 JSON

> ID：12452113
> 
> 赞同：0
> 
> 时间：2012-09-17T01:19:35.430
> 
> 标签：php, javascript, arrays, json, multidimensional-array

我的查询返回以下内容：

```
post_id    post_type    post_text
1          text         bla1
2          pic          bla2
3          text         bla3 
```

我循环遍历这个结果如下：

```
$posts = array();
foreach ($query->result() as $row) {
    $post = array();
    $post['post_id']         = $row->post_id;
    $post['post_type']       = $row->post_type;
    $post['post_text']       = $row->post_text;
    $posts[] = $post;
}
$data['posts'] = $posts;

return $data; 
```

如果我`json_encode`和我的控制器的输出我得到这个：

```
{
    "stream": {
        "posts": [{
            "post_id": "1",
            "post_type": "text",
            "post_text": "bla1",
        },
        {
            "post_id": "2",
            "post_type": "pic",
            "post_text": "bla2",
        },
        {
            "post_id": "3",
            "post_type": "text",
            "post_text": "bla3",            
        }]
    }
} 
```

但是，如果帖子有评论，我的查询会返回

```
post_id    post_type    post_text    comment_id    comment_text
1          text         bla1         7             asd
1          text         bla1         8             sdf
2          pic          bla2
3          text         bla3         10            rty
3          text         bla3         11            yuo 
```

我应该如何设置 foreach 循环来构建一个将像这样输出 JSON 的数组？

```
{
    "stream": {
        "posts": [{
            "post_id": "1",
            "post_type": "text",
            "post_text": "bla1",
            "comment": [{
                "comment_id": "7",
                "comment_text": "asd",
            },
            {
                "comment_id": "8",
                "comment_text": "sdf",
            }],
        },
        {
            "post_id": "2",
            "post_type": "pic",
            "post_text": "bla2",
        },
        {
            "post_id": "3",
            "post_type": "text",
            "post_text": "bla3",            
            "comment": [{
                "comment_id": "10",
                "comment_text": "rty",
            },
            {
                "comment_id": "11",
                "comment_text": "yuo",
            }],
        }]
    }
} 
```

这个 JSON 在 Secha 框架上使用如下：

```
 proxy: {
                        type: 'jsonp',
                        url: 'http://myurl',
                        reader: {
                            type: 'json',
                            rootProperty: 'stream.posts'
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:58:46.913

尽管我更喜欢单独查询每个帖子是否存在评论，但这里将尝试使用一个查询来构造数组。

```
$posts=array();
$data = array();
foreach($query->result() as $row){
  // if the post hasn't been created in the array
  // create it
  if(!isset($posts[$row['post_id']])){
    $posts[$row['post_id']] = array(
      "post_type" => $row['post_type'],
      "post_text" => $row['post_text']
    );
  }
  // if a comment is found
  if(isset($row['comment_id'])){
    $posts[$row['post_id']]['comments'][] = array(
      "comment_id" => $row['comment_id'];
      "comment_text" => $row['comment_text'];
    );
  }

}
$data['posts'] = $posts; 
```

JSON 编码这个数组会创建类似...

```
{ "posts" :
   {
     1 : {
       "post_type" : "something",
       "post_text" : "something else"
     },
     2 : {
       "post_type" : "something",
       "post_text" : "something else",
       "comments" : [
         {"comment_id":1,"comment_text":"something"},
         {"comment_id":2,"comment_text":"something"}
       ]
     },
    ....
   }
 } 
```

我不能保证这段代码完全可以工作，因为我没有测试过它，但它应该是一个开始。同样，如果我是你，我只会单独查询每个帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T01:32:05.860

我不知道 PHP 语法，所以我不会编写代码。然而，这不是 PHP 问题，而是算法问题。

您可以分三个步骤处理这些数据，中间结果将是一个帖子字典。在这本字典中，键是帖子 ID，值是帖子。

1/ 遍历查询返回的行。对于每一行，检查该行所涉及的帖子是否存在于字典中。否 -> 添加一个新的帖子对象。是 -> 只需将评论添加到现有的帖子对象。

2/ 遍历您的字典以将其中包含的每个帖子添加到一个数组中。

3/ 按帖子的 id 对数组进行排序（这里我假设 id 与帖子的顺序相同，但只是一点建议：您可能应该有一个发布日期并按发布日期排序）。

如果您掌握 PHP 语法，您应该能够轻松实现它。如果您知道 PHP 语法，请不要犹豫提交编辑。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T23:26:32.383

这段代码

```
 foreach($query->result() as $row){
      // if the post hasn't been created in the array
      // create it
        if(!isset($post[$row->post_id])){
            $post[$row->post_id] = array(
              "post_id" => $row->post_id,
              "post_text" => $row->post_text
            );
        }
        // if a comment is found
        if(isset($row->comment_id)){
            $post[$row->post_id]['comments'][] = array(
              "comment_id" => $row->comment_id,
              "comment_text" => $row->comment_text
            );
        }
    }

    return $posts[] = array_values($post); 
```

返回这个（我需要的）：

```
 [
     {
       "post_id"   : "something",
       "post_text" : "something else"
     },
     {
       "post_id"   : "something",
       "post_text" : "something else",
       "comments" : [
         {"comment_id":1,"comment_text":"something"},
         {"comment_id":2,"comment_text":"something"}
       ]
     },
    ....
   ] 
```

# django - Django 找不到模板

> ID：12452115
> 
> 赞同：1
> 
> 时间：2012-09-17T01:19:51.383
> 
> 标签：django, django-templates, django-settings

所以我一直在尝试设置一个 django 设置模块来检查环境变量和加载设置。

这是我的设置模块的样子

```
/templates
    home.html

/settings
    base.py
    prod.py
    dev.py
    test.py 
```

基础.py

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))

TEMPLATE_DIRS = [
os.path.join(PROJECT_ROOT, "templates"),
]

urls.py

from django.views.generic.simple import direct_to_template

urlpatterns = patterns('',
url(r"^$", direct_to_template, {'template' : 'home.html' }, name="home"),
) 
```

当我将所有设置都放在一个文件中时，这工作得很好，但是由于我将文件拆分，我得到了错误：

```
TemplateDoesNotExist at /

home.html

Template-loader postmortem

Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/Users/Tulsa/Apps/tulsa-applications-co/tulsa/tulsa/settings/templates/home.html (File does not exist)
Using loader django.template.loaders.app_directories.Loader:
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/django/contrib/auth/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/django/contrib/admindocs/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/grappelli/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/django/contrib/admin/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/pagination/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/djangosaml2/templates/home.html (File does not exist)
/Users/Tulsa/Apps/tulsa-applications-co/tulsa/tulsa/apps/profiles/templates/home.html (File does not exist)
/Users/Tulsa/.Apps/tulsa_io/lib/python2.7/site-packages/debug_toolbar/templates/home.html (File does not exist)

Using loader django.template.loaders.eggs.Loader: 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T23:59:50.257

上面的所有答案都需要配置 TEMPLATE_DIRS 或 TEMPLATE_LOADERS，这不是必需的和正确的。您只需将您的应用程序放入 INSTALLED_APPS。

例如，如果您的应用程序位于 MyMegaApp（settigs.py 所在的位置）中，换句话说，您的项目结构如下所示

```
MyMegaApp
   MyMegaApp
      templates
         index.html
      settings.py 
   manage.py 
```

然后你必须像这样添加你的应用程序

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'MyMegaApp'
) 
```

之后，您的**index.html**模板将在**MyMegaApp/templates**文件夹中找到

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T03:13:27.767

这里的问题是，在您的设置中，您`PROJECT_ROOT`评估的是运行`manage.py`.

您可以为`TEMPLATE_DIRS`设置执行此操作

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
print PROJECT_ROOT 
```

现在，`../../`相对于`PROJECT_ROOT`. 像这样的东西：

```
PROJECT_ROOT = os.path.abspath(os.path.join(os.path.dirname(os.path.abspath(__file__)), '../../'))

TEMPLATE_DIRS = [
    os.path.join(PROJECT_ROOT, "templates"),
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T05:44:42.957

将您更改`PROJECT_ROOT`为：

```
PROJECT_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) 
```

并确保您的`TEMPLATE_LOADERS`变量设置正确。

**解释：**

`abspath`给你完整的路径`base.py`，即`/home/some-path/project-folder/settings/base.py`

因此，首先`dirname`给你给定路径的 dir 路径名（上面获得），即`/home/some-path/project-folder/settings/`

然后，第二个`dirname`给你给定路径的 dir 路径名（上面获得），即`/home/some-path/project-folder/`

所以，现在当你加入这条路径时`templates`，一切都开始正常了。

有关更多信息，请参阅[python 文档](http://docs.python.org/library/os.path.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:40:21.117

你可以测试如下吗？

我认为您的代码会将 PROJECT_ROOT 设置为 '/some/path/to/settings'

```
from os.path import dirname, abspath, normpath, join
PROJECT_ROOT = dirname(dirname(abspath(__file__)))
TEMPLATE_DIRS = (
normpath(join(PROJECT_ROOT, 'templates')),
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T06:30:38.160

将此包含在设置中

```
TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(SITE_ROOT, 'appname/templates'),

) 
```

将此添加到 urls.py

```
from django.conf.urls.defaults import *
from  django.views.generic.simple.direct_to_template import direct_to_template
from appname.views import * 
```

调用网址

```
 urlpatterns = patterns('django.views.generic.simple',
    (r'^foo/$',             'direct_to_template', {'template': 'foo_index.html'}),
    (r'^foo/(?P<id>\d+)/$', 'direct_to_template', {'template': 'foo_detail.html'}),
  ) 
```

# ios - 在 Xcode 的界面生成器中，如何相对于彼此而不是超级视图自动调整大小/空间控件

> ID：12452116
> 
> 赞同：0
> 
> 时间：2012-09-17T01:20:25.107
> 
> 标签：ios, xcode, interface-builder

似乎您可以指定 AutoSizing/Spacing 的唯一方法是相对于超级视图。有没有办法可以将相对 AutoSizing/Spacing 指定到另一个视图？假设我希望超级视图内的两个视图在调整超级视图大小时始终具有 6 像素的间距。有什么方法可以在 IB 中做到这一点，还是我必须手动对其进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:29:16.210

在 IB 中，单击文件检查器（第一个图标），然后确保未选中自动布局。然后转到尺寸检查器（第 5 个图标）并进行更改。

**编辑：**

[![](../Images/4ba1151182f5650143cd30fa8feaa6d3.png)](https://i.stack.imgur.com/RWRZL.png)
[（来源：[fredandrandall.com](http://fredandrandall.com/blog/wp-content/uploads/2011/08/saveasautolayout.png)）]

# c# - TextWriter.WriteLine IO 异常 - 指定的网络名称不再可用

> ID：12452117
> 
> 赞同：1
> 
> 时间：2012-09-17T01:20:26.047
> 
> 标签：c#, console-application, windows-server-2003, ioexception, streamwriter

在从控制台应用程序中的大型制表符分隔的文本文件中读取后，我正在尝试编写文本文件。问题是，如果我在服务器上同时运行此 exe 的多个实例，它会在 TextWriter.WriteLine 处给我运行时错误，然后由于未处理的异常而导致应用程序崩溃。所有实例都会发生这种情况。我无法理解这种行为的原因。是因为我没有使用 StringBuilder 会动态使用内存吗？

我的代码如下：

```
 StreamReader sr = new StreamReader(@FilePath, System.Text.Encoding.Default);
 string mainLine = sr.ReadLine();
 string[] fileHeaders = mainLine.Split(new string[] { "\t" }, StringSplitOptions.None);
 string newLine = "";

 System.IO.StreamWriter outFileSw = new System.IO.StreamWriter(@outFile);

 while (!sr.EndOfStream)
 {
    mainLine = sr.ReadLine();
    string[] originalLine = mainLine.Split(new string[] { "\t" }, StringSplitOptions.None);

   newLine = "";
   for (int i = 0; i < fileHeaders.Length; i++)
   {
      if(fileHeaders[i].Trim() != "")
       newLine = newLine + fileHeaders[i].Trim() + "=" + originalLine[i].Trim() + "&";
   }

outFileSw.WriteLine(newLine.Remove(newLine.Length - 1));
FileInfo fileInfo = new FileInfo(@outFile);

  if (fileInfo.Length > (1.3 * 1024.0 * 1024.0 * 1024.0)) // greater than 1.3 GB  
  {
          outFileSw.Close();
          outFileNumber = outFileNumber + 1;
          outFileSw = new System.IO.StreamWriter(@outFile + outFileNumber.ToString() + ".txt");
  }

}
outFileSw.Dispose();
sr.Close();
sr.Dispose(); 
```

错误详情如下：

```
Exception Message: The specified network name is no longer available.

Stack Trace:    at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
 at System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count)
 at System.IO.FileStream.Write(Byte[] array, Int32 offset, Int32 count)
 at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
 at System.IO.StreamWriter.Write(Char[] buffer, Int32 index, Int32 count)
 at System.IO.TextWriter.WriteLine(String value)
 at ExampleExe.ExampleProcess.FnFiles()

 Unhandled Exception: System.IO.IOException: The specified network name is no longer available.

 at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
 at System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count)
 at System.IO.FileStream.FlushWrite(Boolean calledFromFinalizer)
 at System.IO.FileStream.Dispose(Boolean disposing)
 at System.IO.FileStream.Finalize() 
```

谢谢，卡努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:42:43.533

这是一个带有 StringBuilder 缓冲区的 FileWriter。它使用单独的线程进行写入，而主线程不断累积数据。一次写入 10MB 缓冲区。缓冲数据保存在 Queue 对象中；writer 线程从此队列中删除项目，并使用 File.AppendAllText 方法将其全部写出。

```
private Queue<StringBuilder> writeQueue;
private bool isComplete;

public void FileWriter()
{
    this.isComplete = false;
    this.writeQueue = new Queue<StringBuilder>();

    var writer = new Action<string>(this.StartWriting);
    var writerAsync = writer.BeginInvoke(@"outputfile.txt", null, null);

    using (StreamReader sr = new StreamReader(@"inputfile.txt"))
    {
        var fileHeaders = sr.ReadLine()
            .Split('\t')
            .Where(i => !string.IsNullOrEmpty(i))
            .Select(j => j.Trim())
            .ToList();

        var buffer = new StringBuilder();
        while (!sr.EndOfStream)
        {
            var originalLine = sr.ReadLine()
                .Split('\t')
                .Where(i => !string.IsNullOrEmpty(i))
                .Select(j => j.Trim())
                .ToList();

            var line = new StringBuilder();
            //Must have same number of items
            if (originalLine.Count == fileHeaders.Count)
            {
                for (int i = 0; i < fileHeaders.Count(); i++)
                {
                    line.AppendFormat("{0}={1}&", fileHeaders[i], originalLine[i]);
                }
                line.AppendLine();
            }

            buffer.AppendLine(line.ToString());
            if (buffer.Length > 1024 * 1024 * 10)//approx 10MB 
            {
                lock (this.writeQueue)
                {
                    this.writeQueue.Enqueue(buffer);
                }
                buffer = new StringBuilder();
            }
        }
        //Queue any final remaining data
        if (buffer.Length>0) lock (this.writeQueue)
        {
            this.writeQueue.Enqueue(buffer);
        }
    }
    this.isComplete = true;
    writer.EndInvoke(writerAsync);
}

private void StartWriting(string outFilePath)
{
    while (!this.isComplete || this.writeQueue.Count > 0)
    {
        StringBuilder queuedItem;
        if (this.writeQueue.Count > 0)
        {
            lock (this.writeQueue)
            {
                queuedItem = this.writeQueue.Dequeue();
            }
            File.AppendAllText(outFilePath, queuedItem.ToString());
        }
        System.Threading.Thread.Sleep(5000); //Sleep 5sec
    }
} 
```

# c++ - 在 OpenCV 中 waitKey (30) 是什么意思？

> ID：12452118
> 
> 赞同：32
> 
> 时间：2012-09-17T01:20:27.403
> 
> 标签：c++, opencv

> **可能重复：**
> [OpenCV - cvWaitKey()](https://stackoverflow.com/questions/5217519/opencv-cvwaitkey)

我想过滤视频帧。

```
for(;;)
{
cap.read( frame);
medianBlur(frame,framedst,5);
imshow("frame",frame);
imshow("framedst",framedst);    
if( waitKey (30) >= 0) break;
} 
```

是什么`waitKey(30)`意思？因为如果我注释掉这一行`if( waitKey (30) >= 0) break;`，上面的代码就不起作用了！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T01:25:38.613

该函数`waitKey()`等待按键事件“延迟”（此处为 30 毫秒）。正如[OpenCV 文档](https://docs.opencv.org/2.4/modules/highgui/doc/user_interface.html?highlight=waitkey#waitkey)中所解释的，HighGui（`imshow()`是 HighGui 的一个函数）需要定期调用 waitKey，以处理其事件循环。

即，如果您不调用waitKey，HighGui 将无法处理重绘、调整大小、输入事件等Windows 事件。所以只需调用它，即使有1ms 延迟:)

# c++ - 虚函数的 STK 回调振荡器问题

> ID：12452125
> 
> 赞同：0
> 
> 时间：2012-09-17T01:23:25.937
> 
> 标签：c++, visual-c++, audio, abstract, sound-synthesis

我正在使用正弦振荡器回调处理其中一个 STK 程序。由于生成器类中的虚函数导致我的 ToneGen 类抽象，我在从生成器类继承的 ToneGen 类创建对象时遇到问题。我已经尝试过指针，但似乎导致将数据获取到适当的方法时出现问题。如果我使用指针，我的代码会在 ToneGen.h 文件中中断

```
void setRate( StkFloat rate ) { rate_ = rate; }; 
```

否则没有指针我得到这个错误

```
src\crtToneGen.cpp(36): error C2259: 'stk::ToneGen' : cannot instantiate abstract class
          due to following members:
          'stk::StkFrames &stk::Generator::tick(stk::StkFrames &,unsigned int)' : is abstract
          C:\VS10 Projects\StkNewInst\crtToneGen\include\Generator.h(43) : see declaration of 'stk::Generator::tick' 
```

这是生成器类中的虚函数

```
virtual StkFrames& tick( StkFrames& frames, unsigned int channel = 0 )=0; 
```

无论如何要避免这种情况，我在其他帖子上尝试了其他几种技术，但还没有运气。

我正在修改的代码可以在[这里找到](https://ccrma.stanford.edu/software/stk/crealtime.html)

我在 VisualStudio 2010 windows 7 32 位上执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:44:31.210

```
stk::StkFrames &stk::Generator::tick(stk::StkFrames &,unsigned int) 
```

是抽象的，需要在你的派生类中实现

```
class ToneGen: public stk::Generator
{
  stk::stkFrames& tick(stk::StkFrames& frames,unsigned int something)
  {
     return stk::stkFrames(); // Don't do this, return something useful.
  }
} 
```

您必须在派生类中实现此功能，因为基类不提供此方法的功能。它在`stk`标题中的声明将是：

```
stk::StkFrames &stk::Generator::tick(stk::StkFrames &,unsigned int) = 0; 
```

# java - Ant 构建文件配置

> ID：12452126
> 
> 赞同：0
> 
> 时间：2012-09-17T01:23:30.290
> 
> 标签：java, ant

使用 Ant 用 Ja​​va 编译简单的 Hello World 程序，但有些东西不能正常工作。我知道 Java 代码是正确的，因为它使用 javac 运行。我的 Any 配置文件有问题，我无法弄清楚它是什么。[http://pastebin.com/q50L5b0D](http://pastebin.com/q50L5b0D)

和我得到的命令行错误：

```
 **Exception in thread "main" java.lang.NoClassDefFoundError: Proj0/class
Caused by: java.lang.ClassNotFoundException: Proj0.class
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Proj0.class. Program will exit.
** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:42:12.863

它只是告诉您在尝试使用您定义的目标`Proj0`运行您的应用程序时找不到该类。`ANT`你确定这条线是正确的吗？

```
<property name="Proj0.class" value="package.names.Proj0"/> 
```

这`package.names.Proj0`是一个奇怪的包名称，也许您想要使用名为的属性的实际值之类的东西`package.names`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:57:36.107

对于您的`javac`任务，需要正确设置`classpath`, `srcdir`。正如文森特写的那样，你错过了这`Proj0`门课。请[在此处](http://ant.apache.org/manual/Tasks/javac.html)查看如何设置`javac`任务。

# html - Twitter Bootstrap 导航栏 - 右对齐下拉菜单

> ID：12452134
> 
> 赞同：35
> 
> 时间：2012-09-17T01:25:00.230
> 
> 标签：html, css, twitter-bootstrap

我正在使用带有 PHP 站点的 Twitter Bootstrap (v2.1.1)。我在 php 脚本中动态生成导航栏，因为如果用户登录或退出站点，导航栏将具有不同的内容。

我想将最后一个下拉菜单对齐到屏幕右侧，但到目前为止还没有。这是一个显示简化版本的 jsFiddle：

[http://jsfiddle.net/fmdataweb/AUgEA/](http://jsfiddle.net/fmdataweb/AUgEA/)

我希望菜单 2 下拉菜单右对齐。最后一个下拉列表的代码与其他下拉列表的代码相同：

```
<li class="dropdown pull-right">
<a href="properties.php?type=showall" class="dropdown-toggle" data-toggle="dropdown">Menu 2<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="propertiesSearch.php">Logout</a></li>
</ul>
</li> 
```

我尝试将其更改为：

```
<li class="dropdown pull-right"> 
```

但这没有什么区别。任何人都知道如何像使用表单和`<p>`文本一样将下拉菜单拉到右侧？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-17T02:08:53.113

您需要将`.pull-right`类更改为`ul`element 而不是`li`.

**HTML**

```
<ul class="nav pull-right">
  <li class="dropdown">
    <a href="properties.php?type=showall" class="dropdown-toggle" data-toggle="dropdown">
      Menu 2
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li><a href="propertiesSearch.php">Logout</a></li>
    </ul>
  </li>
</ul> 
```

* * *

**版本 2.1.1**

我重写了您的代码，仅包括必要的 JavaScript 插件 (bootstrap-dropdown.js)、最新版本的 Twitter Bootstrap (2.1.1) 和对响应式设计的支持。

[http://jsfiddle.net/caio/gvw7j/](http://jsfiddle.net/caio/gvw7j/)

如果您在上面的链接中看到响应式菜单，则可以在此链接中看到“宽结果”：

[http://jsfiddle.net/caio/gvw7j/embedded/result/](http://jsfiddle.net/caio/gvw7j/embedded/result/)

`.pull-right`定义为：

```
.pull-right {
  float: right !important;
} 
```

* * *

**版本 3.1.1**

这堂课没有变化。您可能会看到[助手类](http://getbootstrap.com/css/#helper-classes-floats)部分。

但是，文档建议使用该类`.navbar-right`，因为与该类不同，它具有一些特定的优化`pull-right`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-05T19:51:43.320

如果您来到这里试图右对齐常规引导程序`.dropdown-menu`而**不是**a `.nav`，并且正在使用**Bootstrap 3**，则要添加的正确类是`.dropdown-menu-right`

这是[引导文档](http://getbootstrap.com/components/#dropdowns)：

```
<ul class="dropdown-menu dropdown-menu-right">
  ...
</ul> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-24T03:40:59.477

对于那些使用**Bootstrap 3**的人来说，`.navbar-right`可以做到这一点。

例如，

```
<ul class="nav navbar-nav navbar-right">
.
.
</ul> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-17T01:48:33.657

与其将`li`元素拉到左边，不如简单地包含您希望在其自己的`ul`列表中右对齐的元素，然后像这样拉它：

**HTML**

```
<ul class="nav pull-right">
    <li class="dropdown">
        <a href="properties.php?type=showall" class="dropdown-toggle" data-toggle="dropdown">Menu 2<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="propertiesSearch.php">Logout</a></li>
        </ul>
    </li>    
</ul> 
```

演示：http: [//jsfiddle.net/AUgEA/1/](http://jsfiddle.net/AUgEA/1/)

# java - Android/Java 如何为片段添加线性布局？

> ID：12452135
> 
> 赞同：2
> 
> 时间：2012-09-17T01:25:01.360
> 
> 标签：java, android, android-layout, android-4.0-ice-cream-sandwich

我目前正在开发一个应用程序，但我需要帮助。我怎么能在你有一个列表的地方找到它，当你按下一个项目时，它会进入它的描述。可以在此应用程序上找到示例 [https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLmFjdGlvbmJhcnNoZXJsb2NrLnNhbXBsZS5mcmFnbWVudHMiXQ](https://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.fragments&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLmFjdGlvbmJhcnNoZXJsb2NrLnNhbXBsZS5mcmFnbWVudHMiXQ) ..

当你按布局时，我怎样才能得到你得到的东西。

我有标签，但我无法获取列表。这是主要的活动代码。

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding tab.
    // We can also use ActionBar.Tab#select() to do this if we have a reference to the
    // Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        @Override
        public void onPageSelected(int position) {
            actionBar.setSelectedNavigationItem(position);
        }
    });

    // For each of the sections in the app, add a tab to the action bar.
    for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
        // Create a tab with text corresponding to the page title defined by the adapter.
        // Also specify this Activity object, which implements the TabListener interface, as the
        // listener for when this tab is selected.
        actionBar.addTab(
                actionBar.newTab()
                        .setText(mSectionsPagerAdapter.getPageTitle(i))
                        .setTabListener(this));
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section4).toUpperCase();
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        TextView textView = new TextView(getActivity());
        textView.setGravity(Gravity.CENTER);
        Bundle args = getArguments();
        textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
        return textView;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:14:14.790

我认为您正在寻找开箱即用的解决方案。我最近不得不做同样的事情，但我没有找到开箱即用的解决方案。我做了什么？我创建了一个带有 alpha 动画的不可见视图，当用户单击我的列表视图时，我启动动画并显示包含内容的填充视图。

通过创建自定义对话框并从 xml 文件扩展视图，还有其他方法可以做到这一点。

更简单的是，如果您不需要与描述视图进行交互，那么您可以使用带有修改视图的 Toast 并设置用户阅读的时间。

# java - Java 泛型 - 为什么它不输出变量？

> ID：12452137
> 
> 赞同：0
> 
> 时间：2012-09-17T01:25:18.177
> 
> 标签：java, generics

我已经搜索和搜索了，我觉得我在使用它们的步骤方面遗漏了一些非常小的东西。

通用类文件：

```
public class Point <T> {
    private T xPos, yPos;

    public Point(T xPos, T yPos) {
        this.xPos = xPos;
        this.yPos = yPos;
    }

    public T getXPos() {
        return xPos;
    }

    public void setXPos(T xPos) {
        this.xPos = xPos;
    }

    public T getYPos() {
        return yPos;
    }

    public void setYPos(T yPos) {
        this.yPos = yPos;
    }
} 
```

演示文件：

```
public class PointTester {
    public static void main(String[] args) {
        Point<Integer> point1 = new Point<Integer>(10,20);
        Point<Double> point2 = new Point<Double>(14.5, 15.6);
        Point<String> point3 = new Point<String>("topleftx", "toplefty");
        System.out.println(point1);
        System.out.println(point2);
        System.out.println(point3);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T01:27:21.973

要定义一个类的打印方式，您需要重写标准`toString()`方法。在你的例子中，你会做类似的事情

```
public String toString() {
  return "(" + xPos + ", " + yPos + ")";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T01:27:40.997

我认为它正在打印“某物”，但“某物”没有帮助。

我相信您缺少的是“toString”方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:28:07.060

您需要覆盖将返回您要打印的内容的`toString`in 。`Point`

例如

```
@Override
public String toString() {
    return /* what you want ... */;
} 
```

# html - 我需要帮助尝试使 div 只有水平滚动条

> ID：12452143
> 
> 赞同：0
> 
> 时间：2012-09-17T01:26:14.173
> 
> 标签：html, horizontal-scrolling

> **可能重复：**
> [CSS - 仅使用水平滚动条](https://stackoverflow.com/questions/3742416/css-use-a-horizontal-scrollbar-only)

我对使用 HTML 还是比较陌生，但我正在尝试制作布局，我想要一个宽度为 370px x 199px 的 div 作为高度，我只想拥有水平滚动条。

这是我正在使用的代码。

```
<div class="camodule" style="position: absolute; left: 727px; top:202px; width: 370px; height:199px; overflow: auto;"> 
    Images that go here are (h)199px by (w)119px
</div> 
```

我需要更改什么才能***只有***水平滚动条？

**[编辑]**我的意思是我有不同大小的框，只希望其中两个框水平滚动。我想要 (h)199px x (w)119px 的图片并让它们一起流动，我试图通过将多张图片 (6) 并排放置来修复它。但是当我查看内容时，它只显示了我放入 div 的 6 张图片中的 3 张。

这是整个代码，以及我试图用来让它一起滚动的内容，比如 6 张图像等。

这是我目前正在使用的代码[确切代码，如您所见，它不起作用。](http://jsfiddle.net/bethmariechaos/v3k4p/)我希望它只有两个框的滚动条，而不是我拥有的所有大小不同的框。我已经看到了我想要实现的目标，所以我知道它必须以某种方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:34:22.507

您需要将内部潜水设置为比外部 div 更长，然后独立设置`overflow-x`and`overflow-y`属性（同时删除现有的溢出规则）。

**[jsFiddle 示例](http://jsfiddle.net/xEy9E/1/)**

```
<div class="camodule" style="position: absolute; left: 10px; top:10px; width: 370px; height:199px;-ms-overflow-x: auto; overflow-x: auto;overflow-y:hidden;-ms-overflow-y: hidden; "><div style="width:1000px">Your long content here.</div></div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:42:51.273

HTML

```
<div class="camodule" style="overflow-x: hidden; overflow-y: scroll; position: absolute; left: 727px; top:202px; width: 370px; height:199px;"></div> 
```

该属性`overflow-x`控制水平滚动并`overflow-y`控制垂直。

`CSS`在样式表中或使用样式标签也更容易使用：

```
.camodule {    
    overflow-x: hidden;
    overflow-y: scroll;
    position: absolute;
    left: 727px;
    top:202px;
    width: 370px;
    height: 199px;    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T01:57:02.860

您可能也应该将您的 CSS 切换为外部样式表。[这里的例子](http://jsfiddle.net/xEy9E/2/)。

HTML

```
<div class="camodule">
    <div class="camoduleContent">
        Content That Scrolls
    </div>
</div>​ 
```

CSS

```
.camodule{
    position: absolute;
    left: 10px;
    top:10px;
    width: 370px;
    height:199px;
    -ms-overflow-x: auto;
    overflow-x: auto;
    overflow-y:hidden
}
.camoduleContent{
    width:1000px;
}

​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T01:35:40.120

您应该能够将溢出更改为`overflow-x: scroll; overflow-y: hidden;`某些浏览器可能仍显示 y 滚动，但它会变灰。

# ruby-on-rails - 在使用 Mongoid 的 Rails 中只允许一个使用“has_one”的模型条目

> ID：12452146
> 
> 赞同：0
> 
> 时间：2012-09-17T01:26:49.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

```
class User
 include Mongoid::Document
 has_one :profile
end

class Profile
  include Mongoid::Document
  belongs_to :user
end 
```

我可以成功创建与用户关联的配置文件。但是，似乎我实际上可以创建许多与用户关联的配置文件。如何只允许为每个用户创建一个配置文件？顺便说一句，我是新手，所以请随时建议可能有帮助的其他阅读材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:36:40.897

我还没有尝试过，但是您应该能够在 profile 的 user_id 字段上创建唯一索引，以防止具有相同 user_id 的多个配置文件文档

```
index({ user_id: 1 }, { unique: true, name: "user_id_index" }) 
```

# java - Java：纠错码计算器

> ID：12452147
> 
> 赞同：0
> 
> 时间：2012-09-17T01:26:51.280
> 
> 标签：java, calculator

如何纠正线路错误

```
char oper = entrada.next(); //ERROR HERE 
```

在代码中：

```
/*
 * Calculator
 */
package list01;

import java.util.Scanner;

public class ex04 {

    public void metodoEx04() {
        Scanner entrada = new Scanner(System.in);
        System.out.print("First number: ");
        int A = entrada.nextInt();
        System.out.print("Second number: ");
        int B = entrada.nextInt();
        System.out.print("Operator +, -, *, ou /: ");
        char oper = entrada.next(); //ERROR HERE
        double res = calculadora(A, B, oper);
        System.out.println(res);
    }

    static double calculadora(int n1, int n2, char operador) {
        double res;
        switch (operador) {
            case '+':
                res = soma(n1, n2);
                return res;
            case '-':
                res = subtracao(n1, n2);
                return res;
            case '*':
                res = multiplicacao(n1, n2);
                return res;
            default:
                res = divisao(n1, n2);
                return res;
        }
    }

    static double soma(int num1, int num2) {
        double res;
        res = num1 + num2;
        return res;
    }

    static double subtracao(int num1, int num2) {
        double res;
        res = num1 - num2;
        return res;
    }

    static double multiplicacao(int num1, int num2) {
        double res;
        res = num1 * num2;
        return res;
    }

    static double divisao(int num1, int num2) {
        double res;
        if (num2 != 0) {
            res = num1 / num2;
            return res;
        } else {
            System.out.println("Impossible.");
            return 0.0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:52:07.120

next 给出一个字符串，你想要一个字符。你可以试试

```
char oper = entrada.next().charAt(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:54:04.647

```
public String next() 
```

`next()`正在返回一个`String`对象，如果要存储一个字符，则需要：

```
entrada.next().charAt(0); 
```

以后发布错误时，请发布实际错误。

# javascript - RegExp.exec 在 Firefox 上的奇怪行为

> ID：12452153
> 
> 赞同：1
> 
> 时间：2012-09-17T01:27:45.890
> 
> 标签：javascript, regex, firefox

我正在尝试获取页面上的第一个图像标签。下面的正则表达式适用于 Chrome 和 Opera，但不适用于 Firefox。

```
var ex = /<img src=".+">/; 
```

我只得到了没有结束标签的图像标签，`/>`所以这行得通。

这是我将使用它的字符串：

```
var str = 'dd<div><img src="http://img.png" alt="" align="none"></div><div>ddd</div>' 
```

在 Firefox 中执行返回 null：

```
ex.exec(str) 
```

但在 Chrome 和 Opera 中，它返回一个数组。我只需要在其中`[0]`获取图像标签。

有任何想法吗？似乎 Firefox 不喜欢我的正则表达式。我只需要第一场比赛，这就是我不使用该`g`选项的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:48:06.443

这会做

```
var ex = /<img[^>]+>/; 
```

# jsf - JSF 托管 bean 不出现在 JSF 页面中

> ID：12452155
> 
> 赞同：0
> 
> 时间：2012-09-17T01:27:58.107
> 
> 标签：jsf, jakarta-ee, netbeans

我正在使用 JPA 开发一个 JSF 应用程序，该应用程序目前在 Netbeans 中有 76 个托管 bean。它们是使用 @ManagedBean @SessionScopedWhen 注释添加的，而不是添加到配置文件中。我想添加更多托管 bean，但是新添加的 bean 没有出现在 JSF 页面中。我正在使用 Netbeans 添加新的托管 bean，方法是右键单击包并选择新建 > JSF 托管 bean。即使用不同的名称应对现有的耐火豆，也没有变化。

例如，下面显示了一个新添加的 bean。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package gov.sp.health.bean;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

/**
 *
 * @author buddhika
 */
@ManagedBean
@RequestScoped
public class TemBean {

    /**
     * Creates a new instance of TemBean
     */
    public TemBean() {
    }

    public String toIndex(){
        return "index";
    }

} 
```

错误的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:27:58.107

我重新启动了Netbeans，一切正常，但不知道为什么？

# emacs - 如何在 org 模式下恢复稀疏树视图？

> ID：12452165
> 
> 赞同：46
> 
> 时间：2012-09-17T01:29:27.567
> 
> 标签：emacs, org-mode

我正在学习 org 模式，并且刚刚了解了稀疏树（Cc / t 及其亲属）。我怎样才能回到我的组织文档的原始、非稀疏视图？

我通过反复试验发现 TAB 循环顶部节点有效，有没有更好的方法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-17T23:29:57.900

`C-c C-c`应该清除稀疏树的隐藏和突出显示，但据我所知，你不能只回到你对它的“最后一个视图”。如果要返回全视图，请使用`Shift-Tab`循环所有条目。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-22T17:48:22.630

所以，现在是 2018 年，（AFAIK）这个功能仍然不存在。

到目前为止，我发现的最佳解决方法是创建一个间接缓冲区（Cx 4 c），然后在其中运行 org-sparse-tree。原始窗口不受影响，因此您保留视图，对间接缓冲区的更改将更新原始缓冲区（反之亦然）。完成后，您只需关闭间接缓冲区。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-23T12:57:19.140

我通常只是运行`org-mode`似乎让我回到第一方的命令。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-11-29T09:09:26.767

很晚才来到这里，我注意到选择所有标签然后取消突出显示/取消缩小似乎做正确的事情。

```
C-c \ *
C-c C-c 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-31T16:12:11.607

Ben K. was on the right track. Indirect buffers are one of emacs' most powerful features.

This function does what I would have expected `org-show-todo-tree` to do: create a new buffer showing undone TODO items, don't screw up my org file's tree state, and clear the unnecessary occur highlighting.

```
(defun org-todo-buffer ()
  "Create new indirect buffer with sparse tree of undone TODO items"
  (interactive)
  (clone-indirect-buffer "*org TODO undone*" t)
  (org-show-todo-tree nil) ; mimics interactive usage
  (org-remove-occur-highlights)
) 
```

In this new buffer you can change TODO item states which are reflected in your org file, and you can simply kill the indirect buffer when you are done with it.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-17T05:53:22.117

任何地方的 TAB 循环仅隐藏由 突出显示的条目`org-sparse-tree`。

要删除覆盖，您需要实际编辑缓冲区。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-13T02:00:08.810

正如您所说，您可以使用 S-TAB 进行能见度骑行，但我个人不喜欢能见度骑行，因为我不确定自己在循环中的哪个位置。

所以我刚刚创建了这个简单的 org-agenda-custom-command，它显示所有内容而不突出显示。只需将其添加到您的 .emacs 文件中即可。

```
 (setq org-agenda-custom-commands
        ; ... other commands
        `(("z"  "All" occur-tree "."
           ((org-show-entry-below t)
            (org-highlight-sparse-tree-matches nil))))) 
```

可能有更好的方法来做到这一点，SO 的美妙之处在于有人会告诉我们:)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-19T14:03:23.730

我通常会使用`C-x C-v RET`(find-alternate-file) 或`M-x revert-buffer`. 这仅在您没有未保存的编辑时才有效。

# jquery - 更改事件未在 jquery mobile 中的选择菜单上触发

> ID：12452166
> 
> 赞同：0
> 
> 时间：2012-09-17T01:29:33.307
> 
> 标签：jquery, jquery-mobile

这是我到目前为止写的代码

```
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Registration</title>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="apple-touch-fullscreen" content="YES" />
    <meta name="apple-touch-fullscreen" content="YES" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes" />

    <link rel="stylesheet" media="all" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js "></script>
    <script type="text/javascript" src="my.js"></script>

    <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <script type="text/javascript">

    $('#mothertongue').live("change",function() {

   alert($(this).val());
});​

    </script>
</head>

<body>

    <div data-role="page" data-theme="e" id="page3" data-add-back-btn="true">
        <div  data-theme="e" data-role="header">
            <h3></h3>
            <a href="index.html" class="ui-btn-right" data-icon="home" data-iconpos="notext"
            data-direction="reverse">Home</a>
        </div>
        <div data-role="content" style="padding: 15px">

                <div data-role="fieldcontain">
                    <label for="selectmenu3">
                        <p>
                            Mother Tongue
                        </p> </label>
                    <select name="mothertongue" id="mothertongue" >
                        <option selected="selected" value="-1">Select Mother Tongue</option>
                        <option value="Telugu">Telugu</option>
                        <option value="Kannada">Kannada</option>
                        <option value="Hindi">Hindi</option>
                        <option value="Marathi">Marathi</option>
                        <option value="Tamil">Tamil</option>
                        <option value="Assamese">Assamese</option>
                        <option value="Bengali" >Bengali</option>
                        <option value="Coorgi">Coorgi</option>
                        <option value="Dogri">Dogri</option>
                        <option value="English">English</option>
                        <option value="Garhwali">Garhwali</option>
                        <option value="Gujarati">Gujarati</option>
                        <option value="Kashmiri">Kashmiri</option>
                        <option value="Konkani">Konkani</option>
                        <option value="Kumaoni">Kumaoni</option>
                        <option value="Kutchi">Kutchi</option>
                        <option value="Magahi">Maithili</option>
                        <option value="Malayalam">Malayalam</option>
                        <option value="Manipuri">Manipuri</option>
                        <option value="Marwari">Marwari</option>
                        <option value="Nepali">Nepali</option>
                        <option value="Oriya">Oriya</option>
                        <option value="Punjabi">Punjabi</option>
                        <option value="Sindhi">Sindhi</option>
                        <option value="Tulu">Tulu</option>
                        <option value="Urdu">Urdu</option>
                    </select>
                </div>

                </div>

        </div>
    </div>

</body>
</html> 
```

母语的更改事件根本没有触发。我已经为更改事件编写了这个脚本，但它根本不会触发。

```
<script type="text/javascript">

    $('#mothertongue').live("change",function() {

   alert($(this).val());
});​

    </script> 
```

我整晚都在为这个问题拉头发。请帮助我，否则我可能会秃头:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:12:50.067

您可能想查看 [https://forum.jquery.com/topic/jquery-mobile-equivalent-of-document-ready](https://forum.jquery.com/topic/jquery-mobile-equivalent-of-document-ready)

并使用类似的东西

```
$('#PageId').live('pagecreate', function() {
    $('#element').click(function () {
        //Do something
    });
}); 
```

重要的是，必须在链接到 Jquery 库和 jquery.mobile 之间放置代码，例如：

```
<script src="@Url.Content("~/Scripts/lib/jquery-1.7.1.js")" type="text/javascript"></script>
<script>MobileInit();</script>
<script src="@Url.Content("~/Scripts/lib/jquery.mobile-1.1.1.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:37:03.363

由于您将链接发布到您的实时页面，因此错误似乎出现`Uncaught SyntaxError: Unexpected token ILLEGAL`在 chrome 开发人员控制台中。

在十六进制编辑器中打开您的 html 文件。或者在 alert() 调用之后和 body 标记之前删除并重新创建所有文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:59:14.393

Live 在 jQuery 1.7 中被弃用，使用“delegate”甚至更好的“on”

[http://api.jquery.com/live/](http://api.jquery.com/live/)

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T22:02:45.243

我有一个类似的问题。您的问题可能是“.on”范围 - #mothertongu 可能过于具体。尝试类似：

```
$('#PageID').on("change", '#mothertongue', function() {
   ...
});​ 
```

还要记住，在 jQuery Mobile 中提交表单时，默认是在下一页中使用 ajax。所以你的代码可能在最后一页上工作，但不是提交结果。看看[http://jquerymobile.com/demos/1.2.1/docs/forms/forms-sample.html](http://jquerymobile.com/demos/1.2.1/docs/forms/forms-sample.html)你可能只需要添加 data-ajax="false" 到表单标签。

# youtube-api - Youtube 嵌入广告收入

> ID：12452167
> 
> 赞同：-1
> 
> 时间：2012-09-17T01:29:47.060
> 
> 标签：youtube-api

是否有任何程序可供开发人员/网站所有者分享嵌入式视频的广告收入，类似于网站所有者如何通过显示谷歌广告词来赚钱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:38:04.407

这些广告直接与视频的帐户持有人相关联，因此我认为这是不可能的。您将展示该视频的广告，从而为视频所有者创造收入，而您自己却一分钱都看不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T01:50:44.477

我有有广告的视频。我可以控制广告的展示位置以及视频的展示位置，但除非您与内容制作者就视频带来的流量达成私人协议，否则您将无法获得任何广告收入。

# xml - poAsyncLoad 选项是否对 TXMLDocument 执行任何操作？

> ID：12452171
> 
> 赞同：2
> 
> 时间：2012-09-17T01:30:35.397
> 
> 标签：xml, delphi, txmldocument

我一直在玩 TXMLDocument，并且一直在尝试弄清楚 poAsyncLoad 在 ParseOptions 中的作用。帮助表明它可能会提高大型 XML 文件的性能（它似乎没有）。该名称表明它应该在后台线程中执行操作，但 UI 在加载大型 XML 文件时仍会冻结。

有谁知道这是做什么的？我正在使用德尔福 XE3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:59:42.503

启用`poAsyncLoad`会告诉底层 DOM 提供者允许异步加载，但这并不能保证实际使用异步加载。这实际上取决于底层 DOM 提供者的能力。在 Windows 上，默认情况下是 MSXML，它确实支持异步加载，但也许其他因素告诉它不支持。但如果是这样，您还应该为事件分配一个事件处理程序，`TXMLDocument.OnAsyncLoad`以便您可以获得异步状态更新，否则您将不得`TXMLDocument.AsyncLoadState`不定期读取该属性。

# java - 在循环 Java 7 中强制转换泛型类型

> ID：12452176
> 
> 赞同：3
> 
> 时间：2012-09-17T01:31:46.153
> 
> 标签：java, generics, java-7

我有两种不同类型的集合需要迭代，并且集合对象的值之一需要求和。我如何使用泛型来做到这一点，即不为每种类型的 Set 编写两个求和方法？

```
private Double calculateFooScoreSum(final Set<Foo> fooScoreSet)
{
    Double sum = 0.0;
    for (final Foo score : fooScoreSet)
    {
        sum += score.getScore();
    }
    return sum;
}

private Double calculateBarScoreSum(final Set<Bar> barScoreSet)
{
    Double sum = 0.0;
    for (final Bar score : barScoreSet)
    {
        sum += score.getScore();
    }
    return sum;
} 
```

如何使用泛型作为单一方法编写上述两种方法。就像是：

```
private static Double calculateScoreSum(Set<?> scoreSet)
{
    Double sum = 0.0;
    for(Object scoreObj : scoreSet){
        //Some casting magic 
        sum+=score.getScore();
    }
    return sum;
} 
```

如果有帮助，`getScore()`方法在类`Foo`和`Bar`. 任何想法和建议都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:34:17.630

定义一个通用接口，比如`Scorable`：

```
public interface Scorable {
  int getScore();
} 
```

`Foo`并用and实现它`Bar`：

```
public class Foo implements Scorable {
  public int getScore () { return 1; }
}

public class Bar implements Scorable {
  public int getScore () { return 2; }    
} 
```

然后，使用[通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)定义一个可以接受**任何**类型的方法：`Scorable`

```
private static Double calculateScoreSum(Set<? extends Scorable> scoreSet) {
    Double sum = 0.0;
    for (Scorable score : scoreSet){
        sum += score.getScore();
    }
    return sum;
} 
```

哪个可以接收，`Set<Foo>`或者`Set<Bar>`因为它们都实现`Scorable`。

# sql - 单个表上的多个字符串查询

> ID：12452177
> 
> 赞同：1
> 
> 时间：2012-09-17T01:31:57.957
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

为游戏预告片制作一个网站，在首页上我根据游戏的类别组织游戏，所以我最终这样做了（rails）：

```
 def index
    @newGames = Game.order("created_at DESC").limit(3)
    @casualGames = Game.where("category = 'casual'").limit(9)
    @actionGames = Game.where("category = 'action'").limit(8)
    @strategyGames = Game.where("category = 'strategy'").limit(9)
    @adventureGames = Game.where("category = 'adventure'").limit(8)
    @puzzleGames = Game.where("category = 'puzzle'").limit(9)
  end 
```

有没有办法完成同样的事情，但无需对 sable 表进行 6 个单独的查询？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:57:57.807

由于您的搜索参数不同，因此多次查询数据库是不可避免的。但是，您可以使控制器变瘦。在 Game 类中创建一个类方法，并在哈希中收集并返回您需要的所有内容。

**游戏.rb**

```
def self.for_index_page
    games = {}
    games.merge!(new: order("created_at DESC").limit(3))
    games.merge!(casual: category_with_limit('casual', 9)
    games.merge!(action: category_with_limit('action', 8)
    ...
end

def self.category_with_limit(category, limit)
    where(category: category).limit(limit)
end 
```

**游戏控制器.rb**

```
def index
    @games = Game.for_index_page
end 
```

**索引.erb**

```
<%=@games[:new] %>
<%=@games[:casual] %>

... 
```

# html - 不能让我的页脚粘贴并为内容提供滚动条

> ID：12452185
> 
> 赞同：0
> 
> 时间：2012-09-17T01:33:54.510
> 
> 标签：html, css, sticky-footer

我已经用谷歌搜索并阅读了关于制作“粘性页脚”的所有内容，但由于某种原因，我无法让它正常工作。这是我的 html/body div、主要内容 div 和页脚 div 的 CSS 代码：

```
body, html {
margin-top: 5px;
margin-bottom: 5px;
padding: 0px;
height: 100%;
font-family: Cooper Black, Copperplate Gothic Bold, Britannic Bold, Garamond, Arial;
font-size: 1em;
color: #666666;
background-color: #EDF5FC;}

#main {
position: relative;
top: 380px;
width: 90%;
height:100%;
min-height: 100%;
margin: 0px 5% -20px 5%;
z-index: 10;
padding-top: 0px;
padding-bottom: 20px;
overflow:scroll;}

#footer {
clear:both;
position:fixed;
margin-left:auto;
margin-right:auto;
margin-bottom:0px;
margin-top: -20px; /* negative value of footer height */
width:98%;
height:20px;
padding-top:3px;
background: #0E28B1;
text-align: center;
color: #ffffff;
font-size: .7em;
font-weight:bold;
z-index:1;} 
```

我的页脚 div 在我的主 div 之外（网站的主要内容在主 div 内，然后我关闭它并拥有页脚 div。）我可以通过使用固定位置和 margin-bottom 让它粘在底部： 0，但是我的内容没有滚动条。

这根本行不通。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:16:12.310

我终于找到了适合我的解决方案！我找到了这个网站：[http](http://boagworld.com/dev/fixed-footers-without-javascript/) ://boagworld.com/dev/fixed-footers-without-javascript/并稍微修改了代码，以便我的页脚文本很好地垂直和水平居中，并添加了我的页面顶部主（内容）div 的高度。我想如果没有第三个“#Wrapper” div 包含所有内容，这将无法正常工作 - 所以现在这是我的包装器，主要和页脚 css，用于那些有同样问题的人：

```
#wrapper {
display: block; 
position: absolute; 
min-height: 100%; }

#main {
display: block;
top: 400px;
width: 90%; 
margin-bottom: 20px; }

#footer {
position: fixed; 
display: block; 
bottom: 0; 
height: 20px; 
background: #0E28B1;
width: 98%;
margin-right:auto;
margin-left:auto;
font-size: .7em;
font-weight:bold;
font-family: Cooper Black, Copperplate Gothic Bold, Britannic Bold, Garamond, Arial;
color: #ffffff;
text-align:center;
z-index:2;
padding-top:3px;} 
```

我必须在页脚 2 中设置 z-index 而不是 1，以将页脚保持在内容文本的顶部。但现在它起作用了。在找到此解决方案之前，我已经搜索了很多网站（包括这个），所以我希望这对某人有所帮助。

# objective-c - 在不使用 reloadData 的情况下动态更新 UITableView 的部分

> ID：12452187
> 
> 赞同：3
> 
> 时间：2012-09-17T01:33:59.770
> 
> 标签：objective-c, ios, uitableview

首先，如果已经回答，我真诚地道歉。我已经和这个斗争了太久了。我将不胜感激任何帮助。

我正在开发一个应用程序，它从不同的 Web 源异步获取数据并将其解析为由我的主模型处理的对象。该模型为 UITableView 提供信息。接收和解析数据后，我需要修改表格视图中的部分和行数。我首先接收决定节数的数据，然后异步接收修改每个节中的行数及其内容的数据。我设置了表格视图数据源。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.

    return [self.sijainti.pysakit count];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    //if ([[[self.sijainti.pysakit objectAtIndex:section] ajatStr] count] == 0) return 1;
    NSLog(@"ajatStr of section: %d  count: %d",section, [[[self.sijainti.pysakit objectAtIndex:section] ajatStr] count]);
    return [[[self.sijainti.pysakit objectAtIndex:section] ajatStr] count];
} 
```

对象名称是芬兰语（长话短说）。numberOfRowsInSection 的第二行被注释以简化调试。现在，因为数据是动态的，所以当我准备好显示数据时，我需要更新界面，否则用户在滚动并再次滚动之前不会知道它。我有一个方法：

```
- (void)updateRowWithCell:(SCPysakki *)valmisPysakki {
    if (!valmisPysakki.isInArray) return;

    int section = [self.sijainti.pysakit indexOfObject:valmisPysakki];

    [self.tableView beginUpdates];
    NSIndexSet *sectionSet = [NSIndexSet indexSetWithIndex:section];
    [self.tableView reloadSections:sectionSet withRowAnimation:UITableViewRowAnimationFade];
    [self.tableView endUpdates];
} 
```

仅在知道节数后才调用此方法。由于效率和动画，我不想使用 reloadData。我曾经进行过这样的设置，因此我只有行，并且只是在行内绘制行。但是一旦行变得比iphone屏幕高，就变得很不清楚，因为你看不到标题。所以我把它们做成了部分，这些行绘制了真正的行。然后我突然面临一个问题。reloadRowsAtIndexPaths: withRowAnimation: 工作得很好，但是使用 reloadSections: withRowAnimation: 给了我这个例外：

> ***断言失败 -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037
> 
> 2012-09-17 04:11:27.769 pysappi [2351:f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 1 节中的行数无效。现有节中包含的行数更新后 (1) 必须等于更新前该节中包含的行数 (0)，加上或减去从该节中插入或删除的行数（0 插入，0 删除），再加上或减去移入或移出该部分的行数（0移入，0移出）。

我可以通过将 [self.tableView endUpdate] 和 [self.tableView endUpdate] 添加到更新方法来消除这种情况。但是哦，不，只有当我：

1.  在接收到决定部分数量的数据后使用 reloadData（这反过来又缩短了 tableview 以便在每次更新后整个更新后用户在表顶部。我宁愿动态更新部分，而不使用 reloadData，除了删除部分时，但如果我尝试这样做，我会再次遇到异常。）

2.  在仅接收一行的数据后更新这些部分（因此，如果我在收到所有数据后尝试更新该部分中的所有行，我会再次遇到异常。）

现在，这造成了创建良好用户界面变得不可能的情况。我确信根本问题并没有通过 start 和 end 更新调用来解决，但这只是出于一些非常奇怪的原因而解决了它。

我还尝试使用 insertRowsAtIndexPaths: 手动添加行并手动更新它们，但这会返回完全相同的错误。在长时间的调试过程中，我已经能够确定此异常在 cellForRowAtIndexPath: 被调用后出现，并且它为更新期间添加的新行之一返回一个单元格，即使 numberOfRowsInSection 应该已经更新了行数。我还认为，如果这几种情况适用，这就是开始和结束更新方法使行更新起作用的原因。

除了我上面解释的内容之外，唯一有效的方法是仅使用 reloadData，但考虑到更新量，这实际上是不可能的。

这变得比我想象的要长得多，而且是凌晨 4.30。由于这个例外，我不是第一次起这么晚了。如果您需要更多信息，请询问。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T17:16:32.753

（在评论中回答。转换为社区 wiki 答案。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

@deleted_user 写道：

> 更新后现有部分中包含的行数 (1) 必须等于更新前该部分中包含的行数 (0)，-您有一个包含零行的部分并使用一行进行了更新-可可没把它当作插入物，让你失望了

# multithreading - 多进程系统中与 sigwait 相关的混淆

> ID：12452191
> 
> 赞同：4
> 
> 时间：2012-09-17T01:34:50.187
> 
> 标签：multithreading, multiprocessing

我很难理解多进程系统中的 IPC。我有这个系统，其中有三个子进程向它们的进程组发送两种类型的信号。有四种类型的信号处理过程负责特定类型的信号。

有一个监视过程等待两个信号，然后进行相应的处理。当我运行这个程序一段时间后，监控进程似乎并没有像信号处理进程一样接收到信号。我可以在日志中看到信号只是在生成但根本没有处理。

我的代码如下

```
#include <cstdlib>
#include <iostream>
#include <iomanip>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/time.h>
#include <signal.h>
#include <unistd.h>
#include <fcntl.h>
#include <cstdio>
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

using namespace std;

double timestamp() {
  struct timeval tp;
  gettimeofday(&tp, NULL);
  return (double)tp.tv_sec + tp.tv_usec / 1000000.;
}

double getinterval() { 
  srand(time(NULL));
  int r = rand()%10 + 1;
  double s = (double)r/100;
}

int count;
int count_1;
int count_2;
double time_1[10];
double time_2[10];

pid_t senders[1];
pid_t handlers[4];
pid_t reporter;

void catcher(int sig) {
  printf("Signal catcher called for %d",sig);
}

int main(int argc, char *argv[]) {

  void signal_catcher_int(int);

  pid_t pid,w;
  int status;

  if(signal(SIGUSR1, SIG_IGN) == SIG_ERR) {
    perror("1");
    return 1;
  }

  if(signal(SIGUSR2 ,SIG_IGN) == SIG_ERR) {
    perror("2");
    return 2;
  }

  if(signal(SIGINT,signal_catcher_int) == SIG_ERR) {
    perror("3");
    return 2;
  }

  //Registering the signal handler
  for(int i=0; i<4; i++) {
    if((pid = fork()) == 0) {
      cout << i << endl;
      //struct sigaction sigact;
      sigset_t sigset;
      int sig;
      int result = 0;

      sigemptyset(&sigset);

      if(i%2 == 0) {

        if(signal(SIGUSR2, SIG_IGN) == SIG_ERR) {
          perror("2");
          return 2;
        }

        sigaddset(&sigset, SIGUSR1);
        sigprocmask(SIG_BLOCK, &sigset, NULL);
      } else {
            if(signal(SIGUSR1, SIG_IGN) == SIG_ERR) {
          perror("2");
          return 2;
        }

        sigaddset(&sigset, SIGUSR2);
        sigprocmask(SIG_BLOCK, &sigset, NULL);
      }

      while(true) {
        int result = sigwait(&sigset, &sig);
        if(result == 0) {
          cout << "The caught signal is " << sig << endl;
        }
      }
      exit(0);

    } else {
      cout << "Registerd the handler " << pid << endl;
      handlers[i] = pid;
    }
  }

  //Registering the monitoring process
  if((pid = fork()) == 0) {
    sigset_t sigset;
    int sig;
    int result = 0;

    sigemptyset(&sigset);
    sigaddset(&sigset, SIGUSR1);
    sigaddset(&sigset, SIGUSR2);

    sigprocmask(SIG_BLOCK, &sigset, NULL);

    while(true) {
      int result = sigwait(&sigset, &sig);
      if(result == 0) {
        cout << "The monitored signal is " << sig << endl;
      } else {
        cout << "error" << endl;
      } 
    }

  } else {
    reporter = pid;
  }

  sleep(3);
  //Registering the signal generator
  for(int i=0; i<1; i++) {
    if((pid = fork()) == 0) {

      if(signal(SIGUSR1, SIG_IGN) == SIG_ERR) {
        perror("1");
        return 1;
      }

      if(signal(SIGUSR2, SIG_IGN) == SIG_ERR) {
        perror("2");
        return 2;
      }
      srand(time(0));
      while(true) {
        volatile int signal_id = rand()%2 + 1;
        cout << "Generating the signal " << signal_id << endl;
        if(signal_id == 1) {
          killpg(getpgid(getpid()), SIGUSR1);
        } else {
              killpg(getpgid(getpid()), SIGUSR2);
        }     
        int r = rand()%10 + 1;
        double s = (double)r/100;  
        sleep(s);
      }

      exit(0); 
    } else {
      cout << "Registered the sender " << pid << endl;
      senders[i] = pid;

    } 

  }

  while(w = wait(&status)) {
    cout << "Wait on PID " << w << endl;
  }

}

void signal_catcher_int(int the_sig) {
  //cout << "Handling the Ctrl C signal " << endl;
  for(int i=0; i<1; i++) {
    kill(senders[i],SIGKILL);
  }

  for(int i=0; i<4; i++) {
    kill(handlers[i],SIGKILL);
  }

  kill(reporter,SIGKILL);

  exit(3);
} 
```

有什么建议么？

这是输出的示例

在一开始的时候

```
Registerd the handler 9544
Registerd the handler 9545
1
Registerd the handler 9546
Registerd the handler 9547
2
3
0
Registered the sender 9550
Generating the signal 1
The caught signal is 10
The monitored signal is 10
The caught signal is 10
Generating the signal 1
The caught signal is 10
The monitored signal is 10
The caught signal is 10
Generating the signal 1
The caught signal is 10
The monitored signal is 10
The caught signal is 10
Generating the signal 1
The caught signal is 10
The monitored signal is 10
The caught signal is 10
Generating the signal 2
The caught signal is 12
The caught signal is 12
The monitored signal is 12
Generating the signal 2
Generating the signal 2
The caught signal is 12
The caught signal is 12
Generating the signal 1
The caught signal is 12
The monitored signal is 10
The monitored signal is 12
Generating the signal 1
Generating the signal 2
The caught signal is 12
Generating the signal 1
Generating the signal 2
10
The monitored signal is 10
The caught signal is 12
Generating the signal 1
The caught signal is 12
The monitored signal is GenThe caught signal is TheThe caught signal is 10
Generating the signal 2 
```

稍后的

```
The monitored signal is GenThe monitored signal is 10
Generating the signal 1
Generating the signal 2
The caught signal is 10
The caught signal is 10
The caught signal is 10
The caught signal is 12
Generating the signal 1
Generating the signal 2
Generating the signal 1
Generating the signal 1
Generating the signal 2
Generating the signal 2
Generating the signal 2
Generating the signal 2
Generating the signal 2
Generating the signal 1
The caught signal is 12
The caught signal is 10
The caught signal is 10
Generating the signal 2
Generating the signal 1
Generating the signal 1
Generating the signal 2
Generating the signal 1
Generating the signal 2
Generating the signal 2
Generating the signal 2
Generating the signal 1
Generating the signal 2
Generating the signal 1
Generating the signal 2
Generating the signal 2
The caught signal is 10
Generating the signal 2
Generating the signal 1
Generating the signal 1 
```

正如您最初看到的那样，信号是由我的信号处理程序和监视进程生成和处理的。但后来产生了很多信号，但它的处理量并不像以前那样大。此外，我可以看到监控过程的信号处理非常少

任何人都可以提供一些见解。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:24:26.007

如果有多个相同类型的信号处于挂起状态，Linux 默认只提供一个这样的信号。这与[sigwait 文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sigwait.html)一致：

> 如果在调用 sigwait() 之前存在单个信号编号的多个未决实例，则在成功返回后是否还有该信号编号的任何剩余未决信号取决于实现。

所以你的程序的输出取决于调度器，如果 kill 被多次调用并且调度器没有同时唤醒监控进程，相同类型的信号将被合并为一个。

Linux 允许[更改](https://stackoverflow.com/questions/6343871/about-the-delivery-of-standard-signals)默认行为。

# .net - Micro Focus Visual COBOL 是否直接编译为 MSIL？

> ID：12452194
> 
> 赞同：0
> 
> 时间：2012-09-17T01:35:29.710
> 
> 标签：.net, cobol, cil, il, cobol.net

我正在审查将 COBOL 代码迁移到 .NET 运行时的解决方案。我在网上找到的两个最有前途的解决方案是[NetCOBOL](http://www.netcobol.com)和[Micro Focus Visual COBOL](http://www.microfocus.com/products/micro-focus-developer/index.aspx)。

NetCOBOL 直接编译为 MSIL 并具有 Visual Studio 集成。通过“直接编译”，我的意思是发出的 MSIL 代表 COBOL 代码中的实际调用。这与 MSIL 代码将对 COBOL 代码执行词法分析然后解释/执行它的方法形成对比。

Micro Focus Visual COBOL 肯定有 Visual Studio 集成，但我无法在网站上找到关于 COBOL 代码是**直接编译**为 MSIL 还是由解释器处理的明确答案。

*我不确定我在这里使用的语义是否 100% 准确，但是对于如何更清楚地表达“直接编译”的发出代码和“解释”的发出代码之间的区别，我持开放态度。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:22:55.067

你应该做一个更好的互联网搜索，并将范围限制在 microfocus.com，

[http://community.microfocus.com/microfocus/cobol/visual_cobol/w/wiki/470.managed-cobol-an-overview.aspx](http://community.microfocus.com/microfocus/cobol/visual_cobol/w/wiki/470.managed-cobol-an-overview.aspx)

然后你可以明显看到

> **ilgen 指令编译为 CIL**

本文还说明 Visual COBOL 如何为 JVM 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:00:49.467

从来没有真正将 COBOL 用于任何事情。我想他们都会将它们编译为 CIL，可能使用 DLR。因此，也许要密切注意您分发的系统，如果它是 .NET 紧凑型安装，它将不支持 DLR。

老实说，我会用更现代的语言重写它，因为您可能必须更改代码才能在 .NET 框架上正常工作，因为您没有标准库。除非这些编译器中的任何一个都实现了标准库包装器。

C# 很容易理解，如果您使用动态类型，您可以使用 IronPython 或 IronRuby。

如果您打算使用 COBOL，我相信这两个编译器都会编译为 CIL，否则它们在技术上就是解释器或字节码编译器。我怀疑有人会制作编译为 CIL 的字节码编译器/解释器。

# functional-programming - 是否有纯粹的声明性通用编程语言？

> ID：12452205
> 
> 赞同：6
> 
> 时间：2012-09-17T01:38:19.557
> 
> 标签：functional-programming, declarative, logic-programming

我一直在研究声明性语言，似乎声明性只是逻辑和函数语言的总称。还是我错了？是否有任何通用的声明性编程语言不能归类为功能或逻辑（al），而只是“声明性”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:13:47.647

声明性语言要求您为想要发生的事情编写代码，而不是使用命令式语言编写**应该****如何**完成计算的代码。

一般来说，这意味着声明性语言不允许副作用，而命令式语言几乎需要带有副作用的编码。

为了使通用语言成为通用语言，它们需要编写副作用的能力。因此，这使它们难以声明。

像 F# 这样的语言在函数式编程中有很强的基础，但也有任何允许 OO 编程和副作用的结构。这使得 F# 成为一种通用语言，但通过允许将命令式编码与声明式编码混合来实现这一点。

尽管并非完全不可能，但我怀疑仅根据定义没有“纯声明性”通用编程语言。

# iphone - 使用 dateWithTimeIntervalSinceNow 执行方法：

> ID：12452207
> 
> 赞同：0
> 
> 时间：2012-09-17T01:38:43.427
> 
> 标签：iphone, ios, nsdate

我想使用 dateWithTimeIntervalSinceNow: 检查应用程序上次使用以来的时间，或者我可以每 4 小时左右向我的数据库发送请求但不确定应该如何使用 dateWithTimeIntervalSinceNow 的东西？

使用它的原因是为了检查用户数据版本是否每 4/8 小时或类似的东西是最新的。如果可能的话，可能会在用户访问应用程序时检查...这将允许我执行任何可能需要执行的方法以使用户数据保持最新等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:54:57.127

当您第一次启动应用程序时，以及之后每次您进行数据库刷新时，存储该数据库刷新时间（例如在 NSUserDefaults 中）。

```
[[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"LastDatabaseRefreshTime"]; 
```

然后，每当应用程序变为活动状态时，检查它自上次数据库刷新时间以来是否超过 4 小时。所以在你的

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    NSDate *dbRefreshDate = [[NSUserDefaults standardUserDefaults] objectForKey:@"LastDatabaseRefreshTime"];
    dbRefreshDatePlus4hrs = [NSDate dateWithTimeInterval:(4*60*60) sinceDate:dbRefreshDate];

    NSDate *nowTime = [NSDate date];
    if ([dbRefreshDatePlus4hrs compare:nowTime] == NSOrderedAscending) {
          // Its more than 4 hours since the last refresh so
          // add code to call for another database refresh here
    }
} 
```

# python - Cython：在结构中嵌套联合

> ID：12452210
> 
> 赞同：13
> 
> 时间：2012-09-17T01:39:17.157
> 
> 标签：python, c, struct, cython, unions

在 Cython 胶水声明中，如何表示`struct`包含匿名联合的 C 类型？例如，如果我有一个 C 头文件`mystruct.h`，其中包含

```
struct mystruct
{
    union {
        double da;
        uint64_t ia;
    };
}; 
```

然后，在相应的`.pyd`文件中

```
cdef extern from "mystruct.h":
    struct mystruct:
        # what goes here??? 
```

我试过这个：

```
cdef extern from "mystruct.h":
    struct mystruct:
        union {double da; uint64_t ia;}; 
```

但这只给了我“C变量声明中的语法错误”就`union`行了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-15T01:12:29.727

对于那些通过谷歌来到这里的人，我找到了解决方案。如果你有一个结构：

```
typedef struct {
    union {
        int a;
        struct {
            int b;
            int c;
        };
    }
} outer; 
```

您可以在 Cython 声明中将其全部展平，如下所示：

```
ctypedef struct outer:
    int a
    int b
    int c 
```

Cython 不会生成任何对结构的内存布局做出任何假设的代码。你只是通过告诉它生成什么语法来调用它来告诉它你所调用的事实上的结构。因此，如果您的结构有一个 size`int`可以作为 访问的成员`((outer) x).a`，那么您可以抛出`a`结构定义并且它将起作用。它在文本替换上运行，而不是内存布局，所以它不关心这些东西是在匿名联合还是在结构中，或者你有什么。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T01:54:36.680

据我所知，您不能嵌套声明，而且 Cython 不支持匿名联合 AFAIK。

尝试以下操作：

```
cdef union mystruct_union:
    double lower_d
    uint64_t lower

cdef struct mystruct:
    mystruct_union un 
```

`un.lower_d`现在以和访问联合成员`un.lower`。

# extjs - Sencha - 使用 JSONP 将存储同步到 MySQL 数据库？

> ID：12452213
> 
> 赞同：1
> 
> 时间：2012-09-17T01:40:40.177
> 
> 标签：extjs, jsonp, sencha-touch-2

我正在尝试从外部 MySQL 数据库中的数据显示列表，并从 Sencha Touch 应用程序将记录插入同一数据库。经过一番困惑后，我能够使用以下方法阅读和显示记录：

```
Ext.define("App.store.Share", {
extend: "Ext.data.Store",
required: "App.model.Share",
config: {
    model: "App.model.Share",
    proxy: {
        type: 'jsonp',
        api: {
            create: "http://127.0.0.1/submit.php?action=create",
            read: "http://127.0.0.1/submit.php?action=read",
            update: "http://127.0.0.1/submit.php?action=update",
            destroy: "http://127.0.0.1/submit.php?action=delete",
        },
        reader: {
            type: 'json',
            root: "ideas",
            totalProperty: "total"
        },
        writer: {
            type: 'json',
            writeAllFields: true
        }
    },
    pageSize: 3,
    autoLoad: true,
    autoSync: true
}
}); 
```

但是，当我尝试向数据库添加记录时，出现错误：

```
Uncaught Error: [ERROR][Ext.data.proxy.Server#create] JsonP proxies can only be used to read data. 
```

我最初使用的是 ajax 代理，但由于整个跨域恶作剧，我也不能使用它。那么如果我不能用JsonP写，又不能用ajax，那怎么办呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:00:52.680

您可以使用 AJAX，但您必须在服务器上启用跨域调用。为此，您必须将`Access-Control-Allow-Origin`HTML 标头添加到您的响应中，例如：

启用所有域：

```
Access-Control-Allow-Origin: * 
```

启用域列表：

```
Access-Control-Allow-Origin: http://mydomain.com:8080 http://foo.otherdomain.com 
```

[您可以在此处](http://enable-cors.org/)找到如何配置不同 Web 服务器的示例。

# c++ - 在 Eclipse 中为 OpenGL 使用 MinGW

> ID：12452214
> 
> 赞同：2
> 
> 时间：2012-09-17T01:40:58.773
> 
> 标签：c++, c, eclipse, opengl, mingw

我在 Windows 7 上安装了 Eclipse Juno x86_64 的香草版本，添加了一些东西，如 CDT（用于 C/C++ OpenGL 开发）。我还单独安装了 MinGW，看看是否能解决问题。

**问题：**当尝试 `#include <GL/gl.h>` `#include <GL/glu.h>` Eclipse 时告诉我它是一个未解决的包含（如果我尝试构建，则会出错）。

尽管 Internet 似乎同意这些文件默认位于 Windows 中，但我安装了 MinGW 并且它们出现在其中（尽管我在*Microsoft SDK文件夹中找到了**glu32.a*之类的文件）。

 *我已将 MinGW/bin 添加到我的 PATH 和环境变量中，选择的工具是*GNU C*，我已将 GlU32.Lib 和 OpenGL32.Lib 添加到路径和符号中的库中，有/没有 MinGW，重新启动 Eclipse，移动文件到不同的位置等

我发现的很多文章/教程都已过时，对我不起作用，和/或不适用于 Windows Eclipse。我更喜欢使用 Eclipse 而不是 MS Visual Studio，并且强烈建议我使用 Windows 而不是 Linux。我是 OpenGL 的初学者，现在已经精疲力尽了，所以我希望这会有所帮助。*

# python - 用列表中的元素替换行

> ID：12452218
> 
> 赞同：3
> 
> 时间：2012-09-17T01:41:38.667
> 
> 标签：python

我正在读取一个文件并在其中寻找一个特定的字符串，如下所示：

```
template = open('/temp/template.txt','r')
new_elements = ["movie1","movies2"]

for i in template.readlines():
    if "movie" in i:
        print "replace me" 
```

这一切都很好，但我想用 "new_elements" 中的元素替换找到的行。我假设找到的字符串的数量将始终与“new_elements”列表中的元素数量相匹配。我只是不知道如何在寻找要替换的行时遍历 new_elements 。

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T01:44:39.307

一种方法是创建`new_elements`一个迭代器：

```
template = open('/temp/template.txt','r')
new_elements = iter(["movie1","movies2"])

for i in template.readlines():
    if "movie" in i:
        print "replace line with", new_elements.next() 
```

你还没有说你想如何进行替换——例如，你是否想将它写入一个新文件——但这将适合你使用的任何代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T01:44:26.580

您正在寻找的非常简单：[`.pop()`](http://docs.python.org/tutorial/datastructures.html)列表方法。这将获得列表中的下一个条目，并将其删除；您对该函数的下一次调用将返回下一项。根本不需要做任何迭代。

如果没有参数，它将弹出最后一个元素。如果要弹出第一个，可以使用`new_elements.pop(0)`，尽管这会比从末尾弹出要慢。

# php - Shopify 订单项更新时使用 webhook

> ID：12452220
> 
> 赞同：0
> 
> 时间：2012-09-17T01:42:12.197
> 
> 标签：php, xml, shopify

我正在使用 shopify webhook 在订单更新时更新我的​​ sql server 的“数量”字段，下面是我的 php 代码

```
?php
$xmlData = fopen('php://input' , 'rb'); 
while (!feof($xmlData)) { $xmlString .= fread($xmlData, 4096); }
fclose($xmlData);
$xml = new SimplexmlElement($xmlString);

file_put_contents('orders/order' . '.xml', $xmlString);

$dom = new DomDocument();

$dom->load('orders/order.xml');

$itemList = $dom->getElementsByTagName('line-item');
foreach($itemList as $item) {
  $sku='';
  $qty='';
  foreach($item->childNodes as $child) {
    if ($child->localName == 'sku') {
      $sku = $child->textContent;
    }
    if ($child->localName == 'quantity') {
      $qty = $child->textContent;
    }
  }
  mysql_connect ("?????????????????????????");
mysql_select_db("??????????");

$query = "UPDATE xcart_categories SET product_count = product_count - $qty WHERE description='$sku';";

mysql_query($query);
} 
```

下面是我从 shopify webhook 获取的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<order>
  <buyer-accepts-marketing type="boolean">true</buyer-accepts-marketing>
  <closed-at type="datetime" nil="true"></closed-at>
  <currency>USD</currency>
  <email>yeongju_l@yahoo.com</email>
  <financial-status>pending</financial-status>
  <fulfillment-status>fulfilled</fulfillment-status>
  <gateway>Local Pick-Up</gateway>
  <id type="integer">140303247</id>
  <name>#1012</name>
  <note></note>
  <number type="integer">12</number>
  <subtotal-price type="decimal">0.2</subtotal-price>
  <taxes-included type="boolean">false</taxes-included>
  <total-discounts type="decimal">0.0</total-discounts>
  <total-line-items-price type="decimal">0.2</total-line-items-price>
  <total-price type="decimal">0.2</total-price>
  <total-price-usd type="decimal">0.2</total-price-usd>
  <total-tax type="decimal">0.0</total-tax>
  <total-weight type="integer">0</total-weight>
  <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
  <created-at type="datetime">2012-09-16T21:08:30-04:00</created-at>
  <token>dcf523d93c68159c15a7c8d1fabbee07</token>
  <landing-site>/products/test</landing-site>
  <referring-site></referring-site>
  <cancelled-at type="datetime" nil="true"></cancelled-at>
  <cancel-reason nil="true"></cancel-reason>
  <cart-token>a9a7bc5d8103f6a3bb45e827f0cb8928</cart-token>
  <browser-ip nil="true"></browser-ip>
  <landing-site-ref nil="true"></landing-site-ref>
  <order-number type="integer">1012</order-number>
  <discount-codes type="array"/>
  <note-attributes type="array">
  </note-attributes>
  <processing-method>manual</processing-method>
  <line-items type="array">
    <line-item>
      <id type="integer">228531213</id>
      <requires-shipping type="boolean">false</requires-shipping>
      <fulfillment-service>manual</fulfillment-service>
      <grams type="integer">0</grams>
      <price type="decimal">0.2</price>
      <quantity type="integer">1</quantity>
      <sku>1234567</sku>
      <title>test</title>
      <product-id type="integer">104663831</product-id>
      <variant-id type="integer">240660979</variant-id>
      <vendor>5 Second</vendor>
      <variant-title nil="true"></variant-title>
      <fulfillment-status>fulfilled</fulfillment-status>
      <name>test</name>
      <variant-inventory-management></variant-inventory-management>
      <properties type="array">
      </properties>
    </line-item>
  </line-items>
  <shipping-lines type="array"/>
  <tax-lines type="array">
    <tax-line>
      <title>NY State Tax</title>
      <price type="decimal">0.0</price>
      <rate type="float">0.04</rate>
    </tax-line>
    <tax-line>
      <title>Queens County Tax</title>
      <price type="decimal">0.0</price>
      <rate type="float">0.04875</rate>
    </tax-line>
  </tax-lines>
  <billing-address>
    <first-name>Yeongju</first-name>
    <last-name>Lee</last-name>
    <address1>14809 northern blvd</address1>
    <address2></address2>
    <city>Flushing</city>
    <company></company>
    <country>United States</country>
    <phone></phone>
    <province>New York</province>
    <zip>11354</zip>
    <latitude type="decimal">40.76529</latitude>
    <longitude type="decimal">-73.81831</longitude>
    <name>Yeongju Lee</name>
    <country-code>US</country-code>
    <province-code>NY</province-code>
  </billing-address>
  <fulfillments type="array">
    <fulfillment>
      <id type="integer">67712419</id>
      <order-id type="integer">140303247</order-id>
      <created-at type="datetime">2012-09-16T21:20:07-04:00</created-at>
      <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
      <tracking-number nil="true"></tracking-number>
      <tracking-company nil="true"></tracking-company>
      <status>success</status>
      <service>manual</service>
      <tracking-url>http://www.google.com/search?q=</tracking-url>
      <receipt>
      </receipt>
      <line-items type="array">
        <line-item>
          <id type="integer">228531213</id>
          <requires-shipping type="boolean">false</requires-shipping>
          <fulfillment-service>manual</fulfillment-service>
          <grams type="integer">0</grams>
          <price type="decimal">0.2</price>
          <quantity type="integer">1</quantity>
          <sku>1234567</sku>
          <title>test</title>
          <product-id type="integer">104663831</product-id>
          <variant-id type="integer">240660979</variant-id>
          <vendor>5 Second</vendor>
          <variant-title nil="true"></variant-title>
          <fulfillment-status>fulfilled</fulfillment-status>
          <name>test</name>
          <variant-inventory-management></variant-inventory-management>
          <properties type="array">
          </properties>
        </line-item>
      </line-items>
    </fulfillment>
  </fulfillments>
  <customer>
    <id type="integer">96489088</id>
    <email>yeongju_l@yahoo.com</email>
    <accepts-marketing type="boolean">true</accepts-marketing>
    <first-name>Yeongju</first-name>
    <last-name>Lee</last-name>
    <orders-count type="integer">12</orders-count>
    <total-spent type="decimal">16.26</total-spent>
    <note nil="true"></note>
    <created-at type="datetime">2012-08-17T11:31:50-04:00</created-at>
    <updated-at type="datetime">2012-09-16T21:20:07-04:00</updated-at>
    <state>enabled</state>
    <last-order-id type="integer">140303509</last-order-id>
    <tags>C</tags>
    <last-order-name>#1013</last-order-name>
  </customer>
</order> 
```

就像您看到的那样，由于重复的行项目，我得到了两个 sku 和数量，例如，当客户订购一个“产品名称 - 在这种情况下进行测试时，我在我的 sql server sku 测试字段中得到了“-2”数量更新，但是当我在创建订单时使用 webhook 事件它起作用我的意思是我只看到一个订单项，但所有其他情况（当订单更新时、订单付款时、订单完成时......）即使只订购了一件商品，也会向我显示重复的订单项

任何有想法解决这个问题的人？提前非常感谢你们......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:25:03.193

您正在糟糕地解析您的 XML。您会注意到其中一个`line-items`标签位于响应的根目录中，而另一个标签嵌套在`fulfillments`节点下。前者是订单行项目的完整列表，后者是针对订单进行的各个履行的记录（可能有几个）。

我会找到一个 XML 解析器并将其用于处理数据，这样您就可以以结构化的方式访问它，并且只从第一个`line-items`节点中提取行项目。

# javascript - onbeforeunload 在卸载中不起作用

> ID：12452224
> 
> 赞同：1
> 
> 时间：2012-09-17T01:42:51.560
> 
> 标签：javascript, jquery

我编写了以下代码来在卸载中运行 onbeforeunload。但是，这似乎不起作用。有谁知道我的代码有什么问题，无论如何要让它工作？

```
$(window).unload(function () {
    if ($('.submitAction').val() == "" && isChange) {
        window.onbeforeunload = confirmExit;
    }
});

function confirmExit() {
    return "If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:46:33.643

该`onunload`事件是当用户离开页面或关闭浏览器时触发的[绝对最后一个事件。](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)

`onbeforeunload`在事件*中*绑定到事件`onunload`将毫无意义，因为该事件已经发生（因此名称为*onbeforeunload*）。*解决方案是在事件实际发生之前*绑定到`onbeforeunload`事件，例如在页面加载时。

 *像这样的东西（未经测试）：

```
$(window).bind('beforeunload', function () {
    if ($('.submitAction').val() == "" && isChange) {
       return "If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?";
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T01:49:22.723

此行返回一个字符串：

```
return "If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?"; 
```

我想你的意思是：

```
return window.confirm("If you have made any changes to the fields without clicking the Save button, your changes will be lost.  Are you sure you want to exit this page?"); 
```*

# php - 如何在 PHP 中使用 HighCharts 调用函数来制作图形

> ID：12452225
> 
> 赞同：2
> 
> 时间：2012-09-17T01:42:56.767
> 
> 标签：php, javascript, highcharts

我开始学习 PHP、JavaScript、JQuery ......
我需要制作一个图表，并且我将使用 HighCharts。我有一个带有 3 个选择和一个按钮的表单。当我按下按钮时，我想显示图表。做图的函数在例子上，但是不知道是不是需要把函数放到另一个PHP文件，或者JavaScript文件中，函数怎么调用，怎么传参数...
制作代码图表是这样的：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
 <script type="text/javascript">
 $(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
           chart: {
                renderTo: 'container',
                type: 'bar'
            },
            title: {
                text: 'Historic World Population by Region'
            },
            subtitle: {
            text: 'Source: Wikipedia.org'
            },
            xAxis: {
                categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania'],
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Population (millions)',
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +' millions';
                }
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                         enabled: true
                    }
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -100,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            credits: {
                enabled: false
            },
            series: [{
               name: 'Year 1800',
                data: [107, 31, 635, 203, 2]
            }, {
                name: 'Year 1900',
                data: [133, 156, 947, 408, 6]
            }, {
                name: 'Year 2008',
                data: [973, 914, 4054, 732, 34]
            }]
        });
    });
});
</script>
<script src="../../js/highcharts.js"></script>
<script src="../../js/modules/exporting.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:52:15.263

由于您不依赖于对服务器的任何 ajax 调用，因此您根本不需要涉及 PHP。一旦您需要与数据库通信或进行其他服务器端处理，这就是您需要 PHP 的地方。

只需将该代码放入 html 文件（例如 index.html）的正文中，它应该可以正常工作。

# ruby-on-rails - Rubygem：处理语言的 ruby gem

> ID：12452228
> 
> 赞同：-1
> 
> 时间：2012-09-17T01:43:21.583
> 
> 标签：ruby-on-rails, ruby, algorithm, nlp

我正在尝试找到一个可以让我处理英语的红宝石。

我想知道是否有一种宝石可以轻松检测短语及其谓词中的主语。

如果没有宝石，红宝石中是否有一个简单的算法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:07:05.287

他们需要的关键搜索短语是自然语言处理或 NLP。以下是有关该主题的一些较旧的 SO 问题：

[https://stackoverflow.com/questions/3776361/ruby-nlp-libraries](https://stackoverflow.com/questions/3776361/ruby-nlp-libraries)

[Ruby 中的自然语言处理](https://stackoverflow.com/questions/999410/natural-language-processing-in-ruby)

# linux - 在linux中动态库共享全局变量

> ID：12452232
> 
> 赞同：2
> 
> 时间：2012-09-17T01:44:38.353
> 
> 标签：linux, shared-libraries, dynamic-linking, dynamic-loading

众所周知，linux调用`ldconfig`加载所有`*.so`库，然后链接使用共享库的应用程序。但是，我很困惑全局变量在这种情况下是如何工作的。由于所有这些应用程序中只有一个共享库副本，它们是否共享共享库中的全局变量？如果是，那么它们如何同步？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T01:48:04.203

不，它不是共享的 - 库的代码/文本部分是共享的 - 数据部分对于使用库的每个进程都是唯一的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:46:32.030

正如我评论的那样：

*   Levine 的关于[链接器和加载器](http://www.iecc.com/linker/)的书是一本有用的参考书。

*   Linux 动态链接器`ld.so`是免费软件，是[GNU libc](http://www.gnu.org/software/libc/)的一部分，您可以学习和改进其源代码

*   动态链接器`ld.so`不是`ldconfig`（它只是更新了使用的缓存信息`ld.so`）。

*   `ld.so`链接器正在使用[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)系统调用将一些段`.so`投影到进程的虚拟地址空间中；“文本”段（用于代码和只读常量）使用`MAP_SHARED`with `PROT_READ`。“数据”段（用于 C 或 C++ 中的全局或静态变量）`MAP_PRIVATE`与`PROT_WRITE`

*   `strace`通过对程序进行操作以了解所涉及的系统调用，您将学到很多东西。

# asp.net-mvc - 使用 DDD 在 ASP.NET MVC 中使用数据注释

> ID：12452234
> 
> 赞同：1
> 
> 时间：2012-09-17T01:44:42.880
> 
> 标签：asp.net-mvc, entity-framework, domain-driven-design

我已经开始使用实体框架开发 ASP.NET MVC 应用程序，我希望使用 DDD。这是我第一次在 ASP.NET 中使用 DDD（直到现在在 PHP 中使用），所以我有点困惑。我使用的是代码优先的方法，所以我在核心中创建我的实体，然后在基础设施中创建 DbContext。

我的问题是关于数据注释的：可以对核心中的实体进行注释吗？使用Required、DataType 等，或者我必须使用纯C# 验证（在setter 和getter 中）创建条目，然后为数据库创建创建映射对象？

例如，我得到：

```
public class Account
{
    public string AccountName { get; set; }
} 
```

我可以用 [Required] 对 AccountName 进行 annonate，或者我需要创建一个映射类，它只反映 Account 类中完全相同的属性，但具有属性，这将是我将在 Entity Framework DbContext 中使用的类？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:31:01.887

两者都不。

您的实体应该几乎没有任何公共 getter 或 setter。领域模型是行为模型，而不是数据模型。您的实体应该具有更改实体状态的私有字段和方法。这些方法应该具有商业意义并且应该保护实体不变量（验证输入）。例如 - 我们有 UserAddress 并想要更改它。只是`user.Address = newAddress`吗？不。改变它有什么意义？也许您的用户想要`FixMistypedAddress(str)`。或者也许你的`UserMoved(newLocation)`？不同的业务规则可能适用于这些场景。例如，当 UserMoved() 我们想给他送香槟瓶时，而不是在他刚刚修正了一个错字的时候。您应该已经看到这里没有使用数据注释，因为我们不只是设置属性，而是进行有意义的操作。

实体应始终有效。这意味着应该没有办法将其置于无效状态。数据注释只允许您检查对象是否有效。他们不保证始终有效。

IMO 数据注释适用于：

1.  在 CRUD 应用程序中使用实体框架（未应用 DDD）
2.  在 DTO 或 ViewModel 中。换句话说 - 用于验证用户表单，而不是实体。

所以你的第一个问题是：你是在做 CRUD 还是 DDD？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T01:50:19.977

我会说任何一种方式都很好。

如果您想要一种更纯粹的方法，您将创建一个包含元数据的[伙伴类](https://stackoverflow.com/questions/2999936/using-dataannotations-with-entity-framework)，但是也可以将其直接放在域类上。

归根结底，这取决于您想保持多少“纯洁”，以及您想为维护伙伴班付出多少额外的工作，并不是说这是一件坏事。

# java - “预期的类、接口或枚举”Java 语法错误的原因？

> ID：12452236
> 
> 赞同：2
> 
> 时间：2012-09-17T01:45:40.207
> 
> 标签：java, arrays, syntax-error

我从这一行收到错误“预期的类、接口或枚举”。

```
image RenderList[] = new image[99]; 
```

image 是我做的一个类。我阅读了许多教程/线程，询问如何制作对象数组，他们都同意这一行。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T18:49:32.303

您需要使用括号和方括号。

`image RenderList[] = new image()[99];`

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:42:41.963

如果您是 Java 新手，最简单的方法是确保特定程序的所有类都在同一个目录中。也许您在另一个目录中创建了“图像”类。当编译器找不到它时，你只会得到你遇到的那种错误。这是我的学生中常见的错误。

正如几位受访者指出的那样，请记住给类名加上首字母大写，Image。编译器不在乎，但它是 Java 程序员之间的通用约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T01:48:51.140

我确定这有效：

```
package cruft;

public class Image {

    private String name;

    public Image(String name) {
        this.name = name;
    }

    public static void main(String [] args) {
        Image [] images = new Image[args.length];
        int i = 0;
        for (String name : args) {
            images[i++] = new Image(name);            
        }
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append("Image");
        sb.append("{name='").append(name).append('\'');
        sb.append('}');
        return sb.toString();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T01:49:41.787

如果那是导致错误的行，那么它只是`image`不解析为类型（例如类）。javacc 编译器还应该发出带有“^”的以下行，以准确指示该语句的哪个部分无效。（请记住在帖子中包含*完整*的编译器错误。）

确保`image`该类是*真正*被调用的（该类可能应该`Image`根据 Java 命名约定来调用），并且如果“图像”类位于不同的命名空间中，则使用任何必需的导入。如果编译器没有查看 JAR/".class"/".java" 文件的正确位置，也可能只是编译器找不到相应的“图像”类。

提供更多的上下文（例如“图像”类的定义和代码的两个部分所在的名称空间）将导致明确的问题识别以及如何解决它。

# objective-c - 使用值作为对象以外的任何内容创建字典

> ID：12452239
> 
> 赞同：-1
> 
> 时间：2012-09-17T01:46:02.333
> 
> 标签：objective-c

我以 PHP 背景的人的身份问这个问题。在 php 中，创建数组非常简单： $numberArray = array('minute'=>$minute, 'hour'=$hour) 等。

当我进入 Obj-c / Cocoa 时，我注意到 NSArray 只存储平面数组，

```
 NSMuteableArray *numberArray = [[NSMuteableArray init] alloc];
 [numberArray insertObject:minute atIndex:0];
 // not sure if above is correct, but it's a moot point
 // Creates a non-associate array (numberArray = '1', '2', '3', etc.) 
```

NSDictionary 允许您创建关联数组，但值必须是对象。

```
 NSMuteableDictionary *numberArray = [[NSMuteableDictionary alloc] init];
 [numberArray setObject:minute forKey:@"minutes"];
// numberArray creates array of ('minute'=>minuteObject, 'hour'=>hourObject, etc.) 
```

这是我的问题：什么数组或字典格式允许您创建一个数组，其中 VALUE 是一个对象以外的东西？我正在尝试创建一种方法来获取当前时间的分钟/小时，然后将它们插入到数组中。通过该方法，当我在应用程序的其他地方需要它时，我可以调用此方法并从键中获取适当的值。这是我的完整代码：

```
NSDate *now = [NSDate date];
NSCalendar *gregorianCal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComps = [gregorianCal components: (NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate: now];
// Then use it
NSUInteger minute = [dateComps minute];
NSUInteger hour = [dateComps hour];

NSMutableDictionary *timeArray = [[NSMutableDictionary alloc] init];
[timeArray setValue:minute forKey:@"minute"]; 
```

如果我的任何假设有误，请纠正我。作为一个刚接触应用程序开发的人，我之前的陈述更多的是“这是我到目前为止所学到的，如果我错了请纠正我”，而不是“我是对的，你错了”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:15:26.087

NSDictionary 和 NSArray 都存储对象；包括其他字典和数组。

如果您想将数字粘贴到它们中，则需要将数字“装箱”到 NSNumber 的实例中。

您的代码不正确；你需要做：

```
[timeArray setValue:[NSNumber numberWithUnsignedInteger:minute] forKey:@"minute"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:18:14.117

使用 Cocoa 框架，与许多面向对象的框架/语言一样（类似于 PHP 在后台所做的），您只能将对象存储在集合中。要存储原始值类型，请将它们包装为对象。对于数字，类是`NSNumber`。

将最后一行更改为：

```
[timeArray setValue:[NSNumber numberWithUnsignedInteger:minute] forKey:@"minute"]; 
```

它应该可以工作。要`NSUInteger`退出，您需要打开包装`NSNumber`，类似于以下内容：

```
[[timeArray objectForKey:@"minute"] unsignedIntegerValue]; 
```

# c# - 可以使用 MVP 方法在 Main 中实例化演示者吗？

> ID：12452240
> 
> 赞同：2
> 
> 时间：2012-09-17T01:46:25.873
> 
> 标签：c#, winforms, mvp

我想使用“演示者优先”的方法（演示者通过构造函数调用使用依赖注入将自己附加到构造函数中的视图和模型）。

我的表单是一个 MainForm 包含两个用户控件，每个控件都有自己的演示者，但共享模型，因此我在 Main 中创建所有演示者，通过具有从 FormMain 公开这些控件的属性将相关用户控件传递给演示者，并将模型的单个实例传递给所有演示者。

```
static void Main()
{
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);

IDocumotiveCaptureView view = new DocumotiveCaptureView(); //this is the MainForm
IDocumentModel model = new DocumentModel(); //single model
IDocumotiveCapturePresenter Presenter = new DocumotiveCapturePresenter(view, model); //MainForm's presenter
IControlsPresenter ControlsPresenter = new ControlsPresenter(view.ControlsView, model); //ControlsPresenter - attached to the user control via view.ControlsView
IDocumentPresenter DocumentPresenter = new DocumentPresenter(view.DocumentView, model);//DocumentPresenter - attached to the user control via view.DocumentView)

Application.Run((Form)view);                                                         
} 
```

任何人都可以在这种方法中看到任何本质上不好或错误的东西吗？我意识到这可能是主观的，但我对 MVP 很陌生，希望得到一些反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:25:21.957

如果它适合你，那当然没问题。MVP不是一种宗教。它甚至不再被视为单一模式。现在最流行的两种解释似乎是被动视图和监督控制器。

在您的情况下，主要方法是**您的** *作文根*（搜索 Mark Seeman 的任何答案），它是一个很好的地方来做您所做的事情。但这不是唯一的地方。

更多 WinForms MVP，请参阅 WinForms 中[的 Model-View-Presenter](https://stackoverflow.com/questions/4794121/model-view-presenter-in-winforms)

# java - 为什么我的二进制到十进制程序给出不正确的输出？

> ID：12452247
> 
> 赞同：10
> 
> 时间：2012-09-17T01:47:23.707
> 
> 标签：java, binary, decimal

我正在开发这个程序，该程序采用二进制字符串并将其转换为十进制，使用[本指南](http://www.wikihow.com/Convert-from-Binary-to-Decimal)将二进制转换为十进制。当我在脑海中运行 for 循环时，我得到了正确的输出。然而，当我运行我的程序时，我得到了这个奇怪的输出：

```
1
3
7
15
31
63
127 
```

实际输出应如下所示：

```
1
2
5
11
22
44
89 
```

我这辈子都想不通。为什么我的程序会这样做？这是当前的源代码：

```
public class BinaryToDecimal
{
public static void main(String[] args)
{
    String binary = "1011001";
    int toMultiplyBy;
    int decimalValue = 0;
    for (int i = 1; i <= binary.length(); i++)
    {
        int whatNumber = binary.indexOf(i);
        if (whatNumber == 0)
        {
            toMultiplyBy = 0;
        }
        else
        {
            toMultiplyBy = 1;
        }
        decimalValue = ((decimalValue * 2) + toMultiplyBy);
        System.out.println(decimalValue);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:51:03.157

字符串是基于 0 的，因此您应该遍历从 0 到 < 字符串长度的字符串，但是`indexOf(...)`, 不是您想要使用的，因为这将搜索小整数字符串中的位置，这是没有意义的。您不关心 2 的 char 等价物在 String 中的什么位置，或者即使它根本不在 String 中。

相反，您想使用`charAt(...)`or`subString(...)`然后解析为 int。我会用

```
for (int i = 0; i < binary.length(); i++) {
    int whatNumber = charAt(i) - '0'; // converts a numeric char into it's int
    //... 
```

要查看它在做什么，请创建并运行：

```
public class CheckChars {
   public static void main(String[] args) {
      String foo = "0123456789";

      for (int i = 0; i < foo.length(); i++) {
         char myChar = foo.charAt(i);
         int actualIntHeld = (int) myChar;
         int numberIWant = actualIntHeld - '0';

         System.out.printf("'%s' - '0' is the same as %d - %d = %d%n", 
               myChar, actualIntHeld, (int)'0', numberIWant);
      }
   }
} 
```

返回：

```
'0' - '0' is the same as 48 - 48 = 0
'1' - '0' is the same as 49 - 48 = 1
'2' - '0' is the same as 50 - 48 = 2
'3' - '0' is the same as 51 - 48 = 3
'4' - '0' is the same as 52 - 48 = 4
'5' - '0' is the same as 53 - 48 = 5
'6' - '0' is the same as 54 - 48 = 6
'7' - '0' is the same as 55 - 48 = 7
'8' - '0' is the same as 56 - 48 = 8
'9' - '0' is the same as 57 - 48 = 9 
```

表示字符的数字基于旧的 ASCII 表，该表为每个符号提供了数字表示。有关这方面的更多信息，请查看此处：[ASCII 表](http://en.wikipedia.org/wiki/ASCII)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T02:02:32.717

两点：

1.  数组索引从零开始，而不是 1，所以你的循环应该是 `for (int i=0; i
2.  你`indexOf()`对`substring()`. 在您的情况下，请`binary.indexOf(i)`执行以下操作。首先，将整数`i`转换为字符串。然后`binary`从左到右搜索与 的字符串值匹配的子字符串`i`。第一次通过循环`i==1`。这将返回零，因为 中的`1`索引为零`binary`。第二次， 的`i`值为`2`。没有`2`in `binary`，所以返回零。对于`i==3`，您正在寻找 中的字符串`3`，`binary`这永远不会是真的。

看一下`String#substring()`方法，我相信这就是你的意图。

# monitoring - 您如何监控您的网站？

> ID：12452248
> 
> 赞同：-1
> 
> 时间：2012-09-17T01:47:42.643
> 
> 标签：monitoring

我的团队负责一个高流量网站，该网站非常活跃，拥有大约 350 万个唯一网址。我们每周部署大约 1 个应用程序，我们有一个每周更新大约 100 个更新的 CMS，我们的内部数据源也每周发布大约 1 个，并且我们使用大约 10 个其他公共 Web 服务。我们的团队始终负责确保一切正常运行。

我们使用 pingdom 来确保其中一些已启动，但它仅限于一些检查，并且它不能处理我们需要的尽可能多的 url。

我们也使用 Nagios，但它有点像黑盒子，我们的开发团队还没有完全采用。我们的大多数开发人员都专注于 Windows，一想到所有配置就会畏缩。

我们需要的大部分只是监控几个 url，当事情发生故障或变化时可以通知我的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:28:27.170

我认为你应该像单元测试一样，对每个网站发布前后进行内部测试。您的应用程序也应该具有出色的异常处理能力，并且应该记录和监视异常。

[如果您通过 pingdom 或www.downnotifier.com](http://www.downnotifier.com)之类的工具使用外部监控，您可以在每个页面时间检查一个 url。例如：一篇新闻文章、一个文本页面和一个产品页面。

# python - Go - Python 的“通行证”相当于什么？

> ID：12452254
> 
> 赞同：17
> 
> 时间：2012-09-17T01:48:30.617
> 
> 标签：python, select, go

我在 select 语句中有一个默认原因，我什么都不想做，继续，但是将行留空会阻止语句中的任何事情发生

```
 select {
        case quit_status := <-quit:
            if quit_status == true {
                fmt.Printf("********************* GOROUTINE [%d] Received QUIT MSG\n", id)
                return
            }
        default:
            fmt.Printf("GOROUTINE [%d] step: %d, NO QUIT MSG\n", id, i)
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T02:00:28.410

语句中的`default`case`select`旨在为通道读取和写入提供非阻塞 I/O。`default`只要任何案例中的任何通道都没有准备好读取/写入，就会执行案例中的代码。

因此，在您的情况下，`default`如果退出通道无话可说，则会执行该块。您可以简单地删除默认案例，它会阻止`quit_status := <-quit`案例，直到 .. 中的值可用，`quit`这可能是您在这种情况下所追求的。

如果你想在 select 语句之后立即继续执行代码，你应该在一个单独的 goroutine 中运行这个 select 语句：

```
go func() {
    select {
    case quit_status := <-quit:
        ...

    }
}()

// Execution continues here immediately. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-08T10:29:15.867

正如@StephenWeinberg 指出的那样，go 中没有 pass 语句。当频道击中某些东西时，只需在案例中放置任何内容。

```
select {
    case <-ch:
        // do something
    case <-time.After(2*time.Second):
        // timeout
    default:
        // do nothing aka pass
} 
```

# ruby - 急切加载多个关联时重复 sql 查询 (ActiveRecord)

> ID：12452256
> 
> 赞同：0
> 
> 时间：2012-09-17T01:48:38.570
> 
> 标签：ruby, activerecord

鉴于以下情况：

```
class Item < ActiveRecord::Base
  has_many :order_items
  has_many :orders, through: :order_items

  attr_accessible :rent_price, :sale_price
end

class Order < ActiveRecord::Base
  has_many :order_items, dependent: :destroy

  def total
    order_items.map(&:price).reduce(:+)
  end
end

class OrderItem < ActiveRecord::Base
  belongs_to :item
  belongs_to :order

  attr_accessible :type, :quantity

  def item_price
    item.send("#{type}_price")
  end

  def price
    quantity * item_price
  end
end 
```

Order#order_items 和 Order#total 产生 sql 查询：

```
irb(main):055:0> o = Order.last
  订单加载 (0.4ms) SELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1
=> #, balance: #, notes: nil, shipping_method: nil, shipping_details: nil, created_at: "2012-09-16 17:27:39", updated_at: "2012-09-16 21:09:56">

irb(main):056:0> oi = o.order_items.includes(item::photos)
  OrderItem Load (0.4ms) SELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 143
  项目加载（0.2 毫秒）选择“项目”。* FROM “项目” WHERE “项目”。“id” IN (227)
  照片加载（0.1ms）选择“照片”。*从“照片”WHERE“照片”。“item_id”IN（227）
=> [#，数量：1，大小：95，类型：“租”，starts_on：“2012-09-17”，ends_on：“2012-09-18”，created_at：“2012-09-16 20:03 :33", updated_at: "2012-09-16 21:09:56">]

irb(main):057:0> o.order_items
  OrderItem Load (0.4ms) SELECT "order_items".* FROM "order_items" WHERE "order_items"."order_id" = 143
=> [#，数量：1，大小：95，类型：“租”，starts_on：“2012-09-17”，ends_on：“2012-09-18”，created_at：“2012-09-16 20:03 :33", updated_at: "2012-09-16 21:09:56">]

irb(main):058:0> o.total
  项目加载 (0.4ms) SELECT "items".* FROM "items" WHERE "items"."id" = 227 LIMIT 1
=> #

```

应该怎么做才能摆脱多余的 sql 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:19:52.667

`oi = o.order_items.includes(item: :photos)`不会改变 o.order_items，向其中添加包含：它返回一个新的对象数组，其中应用了额外的选项。

使用`o = Order.includes(order_items: {item: photos}).last`then o.order_items 不会执行任何查询

# jquery - Phonegap windows phone ajax 调用

> ID：12452257
> 
> 赞同：0
> 
> 时间：2012-09-17T01:48:42.470
> 
> 标签：jquery, ajax, windows-phone-7, cordova, cordova-2.0.0

我将失去头发，因为我已经构建了一个在 IOS 和 Android 上运行良好但所有 ajax 调用都失败的简单应用程序我尝试了很多 mojo jojo 技巧，不同版本的cordova，但没有任何帮助

我的代码看起来像

```
$("#twitter").live('pageshow', function() {

    // Empty the list of recorded tracks
    $("#tweets_list").empty();

    var tmpTweet = "";

    //regex for urls
    var output = $("#tweets_list");
    $.ajax({
        url: "http://twitter.com/status/user_timeline/mysecretathens.json?count=20&_nocache=" + cacheBuster,

        jsonp: 'jsoncallback',
        timeout: 5000,
        beforeSend: function() {
            $('#loader').show();
        },
        complete: function() {
            $('#loader').hide();
        },
        success: function(data, status) {
            $.each(data, function(i, item) {
                var tmpTweet = item.text;
                //replace links
                tmpTweet = item.text.replace(/(http:\/\/\S+)/g, "<a href='$1'>$1</a>");

                var singleTweet = "<li class='twitter-feed'>" + item.text + "</li>";

                output.append(singleTweet).listview('refresh');
            });
        },
        error: function() {
            output.text('There was an error loading the data.');
        }
    });
    $("#tweets_list").listview('refresh');

});​ 
```

我已放置 S.support.cors= true; 和 $.mobile.allowCrossDomainPages= true 还尝试了其他一些技巧

唯一有效的方法是 Simon 的[[link]](https://stackoverflow.com/questions/8924482/phonegap-jquery-ajax-request-does-not-work) 但我想使用我的原始代码，我目前在 Visual Studio 上使用 Cordova 2.0.0 和 windows phone sdk 7.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:29:13.233

几个问题：

1.  您是否确认您从 AJAX 调用中得到了什么错误？（例如，使用 Fiddler 检查响应）

2.  您是否确认 JqueryMobile mobileinit 事件正在触发？一个简单的 console.log 就足够了。您指定脚本标签的顺序*非常*重要。看到这个帖子。 [如何在 jQuery Mobile 中绑定“mobileinit”事件？](https://stackoverflow.com/questions/10214083/how-to-bind-mobileinit-event-in-jquery-mobile/10214362#comment17013914_10214362)

# algorithm - 在图像中产生线条失真

> ID：12452262
> 
> 赞同：1
> 
> 时间：2012-09-17T01:49:18.930
> 
> 标签：algorithm, image-processing, graphics

（我在理论计算机科学论坛上发布了同样的问题，但我怀疑它会得到很多关注，因为它更实用而不是理论）

我正在寻找一种算法，它可以让我生成一条线，就好像它是手工绘制的一样，给定一条样本线。

换句话说，我有一条线（一幅画）需要重新创建几次，就像人类在描图纸上描摹原始画作时所做的那样。

自然地，人类会将绘图与原件非常接近，但会出现一些小错误。所以我想知道是否存在会扭曲绘图的算法，以使结果看起来像一个人制作的追踪原件。

这是用于动画绘图的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:15:52.433

唔。这是一个有趣的问题。我不知道 Perlin 噪音看起来有多逼真，

但在这里我已经包含了[布朗运动](http://en.wikipedia.org/wiki/Brownian_motion)类型噪声的测试用例（例如，当给定点的直线扰动 = 先前扰动的总和 + 具有零中心和某个 sigma 的高斯随机数时：

![不同程度的摇晃](../Images/b39f0c6429846a7464c400da80b1fa76.png)

图像从左到右显示作为 sigma 函数的绘图（从左到右递减）

这是代码：

```
import numpy as np, numpy.random
import matplotlib.pyplot as plt
np.random.seed(1)
N = 1000
xs = np.arange(N)
thi =  6
sig =  0.00045
def getrand():
        return np.cumsum(np.random.normal(0, sig, size=len(xs)))
        # returns the cumulative sum of the set of random 
        # normally distributed numbers
plt.figure(1)
plt.plot(xs, getrand() * N, linewidth=thi, color='black')
plt.plot(xs, N + getrand() * N, linewidth=thi, color='black')
plt.plot(N + getrand() * N, xs, linewidth=thi, color='black')
plt.plot(getrand() * N, xs, linewidth=thi, color='black') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:24:53.300

一种方法是使用 Perlin Noise。您可以在此处的答案中找到有用的链接：[Perlin Noise for 1D？](https://stackoverflow.com/questions/8798771/perlin-noise-for-1d)

# c - 分段错误在c中打印二维数组

> ID：12452263
> 
> 赞同：2
> 
> 时间：2012-09-17T01:49:19.383
> 
> 标签：c, segmentation-fault, multidimensional-array

我正在尝试在 C 中分配和打印一个二维数组，我的方法似乎有效，但是在打印我的数组时出现分段错误。有任何想法吗？

```
#include <stdio.h>
#include<stdlib.h>

#define WALL 1;
#define EMPTY 0;

int rows;
int columns;

int startRow, startCol;

void getPuzzleParams();
void printMaze();
int solve(char** puzzle, int, int);
void findStartAndEnd(char** puzzle);

main() {
getPuzzleParams();

char **puzzle;
puzzle = (char **)malloc(sizeof(char *)*rows);
int y;
for(y = 0; y < rows;y++)
    puzzle[y] = (char *)malloc(sizeof(char)*columns);

FILE *fptr;
char c;
char file_name[20];
int i,j;

printf("Type in the name of the file containing the Field\n");
scanf("%s",file_name);
fptr=fopen(file_name,"r");
for (i=0; i<rows; i++)
    for (j=0; j<columns; j++){
        c=fgetc(fptr); 
        while ( !((c == '1')||(c =='0')) ) c=fgetc(fptr);
        puzzle[i][j]=c;
    }
fclose(fptr);

for (i=0; i<rows; i++) {
    for (j=0; j<columns; j++)  {
        if (j == 0) printf("\n");                
        printf("%c  ",puzzle[i][j]);
    }
}
printf("\n");

printf("print");
//printMaze(puzzle);
printf("find");
findStartAndEnd(puzzle);
printMaze(puzzle);
solve(puzzle, 1, 2);
}

void getPuzzleParams() {
printf("Enter the dimensions of the puzzle which need to be between 5 and 100\n");
printf("Enter the desired number of Rows: ");
scanf("%d", &rows); 
printf("Enter the desired number of Columns: ");
scanf("%d", &columns);
printf("Rows: %d, Columns: %d\n", rows, columns);
if(rows > 100 || rows < 5 || columns > 100 || columns < 5) {
    getPuzzleParams();
}

}

void printMaze(char** puzzle) {
int i,j;
for (i=0; i<rows; i++)
    for (j=0; j<columns; j++)  {
        if (j == 0) printf("\n");                
        printf("%c  ",puzzle[i][j]);
    }
printf("\n");
printf("sdfsdF");
}

void findStartAndEnd(char** puzzle) {
int foundEnterence = 0;
int i;
printf("start");
for(i = 0; i < columns; i++) {
    printf("top row");
    if(puzzle[0][i]=='0') {
        if(!foundEnterence) {
            foundEnterence = 1;
            startRow = 0;
            startCol = i;
            puzzle[0][i] = 'S';
        } else {
            puzzle[0][i] = 'G';
        }
    }
}
for(i = 0; i < rows; i++) {
    if(puzzle[i][rows]=='0') {
        if(!foundEnterence) {
            foundEnterence = 1;
            startRow = i;
            startCol = rows;
            puzzle[i][rows] = 'S';
        } else {
            puzzle[i][rows] = 'G';
        }
    }
}
for(i = columns; i >= 0; i--) {
    if(puzzle[rows][i]=='0') {
        if(!foundEnterence) {
            foundEnterence = 1;
            startRow = rows;
            startCol = i;
            puzzle[rows][i] = 'S';
        } else {
            puzzle[rows][i] = 'G';
        }
    }
}
for(i = rows; i >= 0; i++) {
    if(puzzle[i][0]=='0') {
        if(!foundEnterence) {
            foundEnterence = 1;
            startRow = i;
            startCol = 0;
            puzzle[i][0] = 'S';
        } else {
            puzzle[i][0] = 'G';
        }
    }
}
}

int solve(char** puzzle, int x, int y) {
printf("%c",puzzle[x][y]);

} 
```

使用不当可能是 malloc 的问题，但我尝试了一些不同的初始化，但均未成功。

编辑：命令行输出是：

```
Enter the dimensions of the puzzle which need to be between 5 and 100
Enter the desired number of Rows: 12
Enter the desired number of Columns: 10
Rows: 12, Columns: 10
Type in the name of the file containing the Field
maze.txt

1  1  1  1  1  1  1  0  1  1  
1  1  0  0  1  0  0  0  0  1  
1  0  0  0  1  0  0  1  1  1  
1  0  0  0  0  0  0  0  0  1  
1  0  1  0  0  1  0  1  1  0  
1  1  0  0  0  1  0  1  1  1  
1  1  0  1  1  0  0  0  0  1  
1  0  1  0  0  1  0  1  0  1  
1  1  1  0  1  0  1  0  1  1  
1  0  0  1  0  1  0  0  0  1  
1  0  0  0  1  1  1  0  1  1  
1  1  1  1  1  1  1  1  1  1  
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:15:55.880

您在未粘贴的代码中崩溃。打印完成，没有错误。如您所见，整个迷宫已被打印出来。您没有看到`print`或者`find`因为它们位于您尚未刷新的输出缓冲区中——您在代码有机会刷新它之前就崩溃了。

使用一个好的调试器来查看故障发生在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:53:03.340

错误可能在`findStartAndEnd`，你有这样的行：

```
if(puzzle[i][rows]=='0') { 
```

和

```
if(puzzle[rows][i]=='0') { 
```

首先，变量`rows`是行数，你应该知道数组的索引是从`0`到`(size - 1)`，所以索引应该是`rows - 1`。另一件事是您`rows`同时使用第一个*和*第二个维度，并且由于一个维度只有 10 而另一个维度是 12，您超出了分配的内存的限制。

# assembly - 在 HC12 中，我可以在一条指令中执行 (1<<8) 吗？

> ID：12452269
> 
> 赞同：1
> 
> 时间：2012-09-17T01:49:56.433
> 
> 标签：assembly, bit-shift, 68hc12

我注意到指令集有一个 LSL（逻辑左移），它执行 r << 1（将寄存器左移 1）。我希望能够左移任意数字。我需要循环执行此操作，还是有一条指令可以为我执行此操作？

我想只移动 1 位的原因是进位总是可以的，但在我的情况下，我会将 8 位无符号数字向左移动最多 8 位，以获得无符号 16 位数字......所以我觉得我应该没事吧？

谢谢，

z。

ps完全披露：我是一名学生，但这只是作业的一小部分。任务是在没有 MUL 的情况下实现乘法。我想我应该在一个循环中做多个添加......但我想做一些不同的事情。所以我用位移递归地实现它！这只是我解决问题的道路上的绊脚石之一。

# java - 在不扩展 JFrame 的情况下覆盖绘制

> ID：12452274
> 
> 赞同：0
> 
> 时间：2012-09-17T01:51:07.583
> 
> 标签：java, swing, jframe, paint

是否可以覆盖paint方法，或者在不扩展JFrame的情况下使用Graphics对象绘制到JFrame上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T01:55:48.083

是的。您应该扩展 JPanel 或 JComponent 并覆盖`paintComponent(...)`，然后将该组件添加到 JFrame 的 contentPane。不理会 JFrame 的`paint(...)`方法，事实上您只是很少（如果有的话）想要扩展 JFrame。

# google-chrome-extension - chrome 扩展开发中的“Storage.set 期间出错：超出配额”

> ID：12452275
> 
> 赞同：6
> 
> 时间：2012-09-17T01:51:12.613
> 
> 标签：google-chrome-extension, storage

```
var bk = new Bookmark();
bk.link=blink;
bk.title=btitle;
bk.tags=["11","22"];
for(var i=0;i<20;i++)
{
bks.push(bk);}
chrome.storage.sync.set({"bookmarks":bks}); 
```

我正在开发一个简单的 chrome 扩展。我使用 chrome.storage 来存储数据，因为它可以保存对象。当我存储一个小数组时，它得到“存储期间出错。设置：超出配额”，数组的大小太小了，我在权限中设置了“unlimitedStorage”。“permissions”：[“tabs”，“http： // */* ","cookies","storage","unlimitedStorage"] 谁能帮忙？非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T16:00:58.183

unlimitedStorage 仅适用于客户端存储。chrome.storage.sync 的存储限制只有 100kb，每个项目只有 4kb。

# ios6 - 如何使用 iOS 6 启动计划应用程序

> ID：12452276
> 
> 赞同：-1
> 
> 时间：2012-09-17T01:51:13.610
> 
> 标签：ios6

如何启动新的 iOS 6 Plan 应用程序？

对于以前的 iOS，我使用：

```
UIApplication *app = [UIApplication sharedApplication];
[app openURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://maps.google.com/maps?ll=%f,%f",self.mapView.userLocation.coordinate.latitude,self.mapView.userLocation.coordinate.longitude]]]; 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:13:38.887

我认为您的意思是地图应用程序。您应该使用**maps.apple.com更改****maps.google.com**部分

# wolfram-mathematica - Mathematica 中的薛定谔方程

> ID：12452282
> 
> 赞同：6
> 
> 时间：2012-09-17T01:52:17.197
> 
> 标签：wolfram-mathematica

我想知道是否有任何方法可以让 Mathematica 找到以原点为中心的粒子的薛定谔方程 [(−h^2/2m)(d^2ψ/dx^2) + kx^2ψ=Eψ] 的解。当我尝试输入和评估方程式时，我不断收到 Tag Plus Protected 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T05:59:55.943

如果你输入

```
 eqn = (-h^2/2 m) D[\[Psi][x], {x, 2}] + k x^2 \[Psi][x] == e \[Psi][x]

 DSolve[eqn, \[Psi][x], x] 
```

Mathematica 将回归

```
\[Psi](x)->Subscript[c, 1] Subscript[D, (Sqrt[2] e-h Sqrt[k] Sqrt[m])/(2 h Sqrt[k] Sqrt[m])]
 ((2^(3/4) Power[k, (4)^-1] x)/(Sqrt[h] Power[m, (4)^-1]))+Subscript[c, 2] 
 Subscript[D, (-Sqrt[2] e-h Sqrt[k] Sqrt[m])/(2 h Sqrt[k] Sqrt[m])]((I 2^(3/4) 
 Power[k, (4)^-1] x)/(Sqrt[h] Power[m, (4)^-1])) 
```

这是记住 D 代表 ParabolicCylinderD 并且 Subscript[c, 1] 和 Subscript[c, 2] 是积分常数的解决方案。

# ruby-on-rails - Rails 类别有很多类别？

> ID：12452284
> 
> 赞同：3
> 
> 时间：2012-09-17T01:53:03.127
> 
> 标签：ruby-on-rails, ruby

我正在为我的未婚夫构建一个 Rails 应用程序来进行一些非常基本的库存跟踪。我们已经经历了几个选择，因为无论如何我都想学习 Rails，所以我们想出了为什么不学习。无论如何，如果我可以将一些产品分类为这样，那么产品的结构方式会有所帮助。

```
 A = Parent Category
    B = Child Category
    C = Product Category 
```

就这样。

```
 A->Product
    A->B->Product
    A->B->Product->C 
```

这甚至有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:12:59.827

这些称为自联接，它们受 Active Record 支持：

[http://guides.rubyonrails.org/association_basics.html#self-joins](http://guides.rubyonrails.org/association_basics.html#self-joins)

在您的示例中，类别可能如下所示：

```
class Category < ActiveRecord::Base
  has_many :subcategories, :class_name => "Category",
    :foreign_key => "parent_category_id"
  belongs_to :parent_category, :class_name => "Category"
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T02:30:35.237

我最近使用了[Ancestry gem](https://github.com/stefankroes/ancestry)，它完美地满足了我的需求。我使用它的网站与您的请求非常相似，我认为您会发现它很有用。

使用 gem 的唯一缺点是您也不会学习 Rails 框架的内部结构。但是，奖励是你得到了大量为你编写的代码。

这是一个[RailsCasts 插曲](http://railscasts.com/episodes/262-trees-with-ancestry)，展示了如何使用 Ancestry。

# python - 使用 python 打印文本文档中 10 个最不常用的单词

> ID：12452287
> 
> 赞同：0
> 
> 时间：2012-09-17T01:53:34.450
> 
> 标签：python, python-2.6, defaultdict

我有一个小的 python 脚本，可以打印文本文档中最常用的 10 个单词（每个单词是 2 个或更多字母），我需要继续脚本来打印文档中最不常用的 10 个单词。我有一个相对有效的脚本，除了它打印的 10 个最不常见的单词是数字（整数和浮点数），而它们应该是单词。如何仅迭代单词并排除数字？这是我的完整脚本：

```
# Most Frequent Words:
from string import punctuation
from collections import defaultdict

number = 10
words = {}

with open("charactermask.txt") as txt_file:
    words = [x.strip(punctuation).lower() for x in txt_file.read().split()]

counter = defaultdict(int)

for word in words:
  if len(word) >= 2:
    counter[word] += 1

top_words = sorted(counter.iteritems(),
                    key=lambda(word, count): (-count, word))[:number] 

for word, frequency in top_words:
    print "%s: %d" % (word, frequency)

# Least Frequent Words:
least_words = sorted(counter.iteritems(),
                    key=lambda (word, count): (count, word))[:number]

for word, frequency in least_words:
    print "%s: %d" % (word, frequency) 
```

**编辑：**文档的结尾（`# Least Frequent Words`评论下的部分）是需要修复的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:01:55.300

您需要一个函数 ，`letters_only()`它将运行正则表达式匹配`[0-9]`，如果找到任何匹配项，则返回 False。像这样的东西::

```
def letters_only(word):
    return re.search(r'[0-9]', word) is None 
```

然后，在你说的地方`for word in words`，而不是说`for word in filter(letters_only, words)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:08:32.397

您将需要一个过滤器 - 更改正则表达式以匹配但是您想定义一个“单词”：

```
import re
alphaonly = re.compile(r"^[a-z]{2,}$") 
```

现在，您是否希望词频表首先*不包含数字*？

```
counter = defaultdict(int)

with open("charactermask.txt") as txt_file:
    for line in txt_file:
        for word in line.strip().split():
          word = word.strip(punctuation).lower()
          if alphaonly.match(word):
              counter[word] += 1 
```

或者您只是想在从表中提取最不常用的单词时*跳过数字？*

```
words_by_freq = sorted(counter.iteritems(),
                       key=lambda(word, count): (count, word))

i = 0
for word, frequency in words_by_freq:
    if alphaonly.match(word):
        i += 1
        sys.stdout.write("{}: {}\n".format(word, frequency))
    if i == number: break 
```

# ruby - 获取哈希子数组

> ID：12452295
> 
> 赞同：0
> 
> 时间：2012-09-17T01:54:54.303
> 
> 标签：ruby, arrays, sorting, hash

我有一个这样的哈希数组，按以下值排序`:a`：

```
[{:a=>0, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}] 
```

我怎样才能得到这个数组的一个子集，它的哈希值是最小值`:a`？在这里，最小值`:a`是`0`，所以我需要：

```
[{:a=>0, :b=>10}, {:a=>0, :b=>35}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T01:59:40.897

```
z = [{:a=>0, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}]
z.select{|y| y[:a] == z.first[:a]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:48:09.137

在我看来，接受的答案似乎假设`:a`数组中第一个元素的值是最小值。因此，如果数组`:a => 1`在第一个元素的位置被修改，那么结果是不正确的。这是示例：

```
# original
z = [{:a=>0, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}]
puts z.select{|y| y[:a] == z.first[:a]}.inspect
# => [{:a=>0, :b=>10}, {:a=>0, :b=>35}] the result is the expected one

# modified :a of first element
z = [{:a=>1, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}]
puts z.select{|y| y[:a] == z.first[:a]}.inspect
# => [{:a=>1, :b=>10}, {:a=>1, :b=>20}] here result does not have min :a 
```

现在，不做那个假设，我正在采取额外的步骤来找到最小值`:a`

```
z = [{:a=>0, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}]
# find the min :a
m = z.map { |y| y[:a] }.min
puts z.select{|y| y[:a] == m}.inspect
# => [{:a=>0, :b=>10}, {:a=>0, :b=>35}]

# modified :a of first element
z = [{:a=>1, :b=>10}, {:a=>0, :b=>35}, {:a=>1, :b=>20}, {:a=>2, :b=>0}]
m = z.map { |y| y[:a] }.min
puts z.select{|y| y[:a] == m}.inspect
# => [{:a=>0, :b=>35}] 
```

# bash - bash命令在特定的行号范围打印列

> ID：12452298
> 
> 赞同：1
> 
> 时间：2012-09-17T01:55:55.090
> 
> 标签：bash, awk

我试图在第 5 到 5 + Y 行获取 X 列中的值。我猜有一种快速的方法可以使用`awk`. 这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:59:38.117

我认为这对你有用，未经测试：

```
awk 'NR >= 5 && NR <= 5 + Y { print $X }' file.txt 
```

显然，用`X`和`Y`代替一些真实的价值。

**编辑：**

如果`X`和`Y`是 shell 变量：

```
awk -v column="$X" -v range="$Y" 'NR >= 5 && NR <= 5 + range { print $column }' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-23T08:19:55.260

如果通过“列”表示您有一个文件，其中包含逗号分隔的字段，并且您想要提取特定字段，那么接受的答案就可以很好地做到这一点。回顾一下，

```
awk -F , 'NR==5 { print $6 }' file 
```

从逗号分隔文件的第 5 行中提取第六个字段。如果您的分隔符不是逗号，请将其他内容作为参数传递给`-F`选项。（使用 GNU Awk，您可以将正则表达式传递`-F`给指定相当复杂的列分隔符，但如果您需要，请查找有关该特定场景的更具体的问题。）

如果“列”是指一行中的固定字符位置，则该`substr`函数会执行此操作。

```
awk 'NR == 5 { print substr($0, 6) }' file 
```

打印第六列及其之后的所有内容。如果要限制为固定宽度，

```
awk 'NR == 5 { print substr($0, 6, 7) }' file 
```

在第 5 行打印从偏移量 6 开始的七个字符（Awk 索引从 1 开始，因此偏移量 1 是行上的第一个字符）。如果您不知道要提取多少个字符，但想要一个数字，Awk 很方便允许您从字符串的开头提取数字：

```
awk 'NR == 5 { print 0 + substr($0, 6, 7) }' file 
```

将提取相同的 7 个字符，然后将结果强制转换为数字，有效地修剪任何非数字后缀，然后打印出来。

在最一般的情况下，您可能希望对提取的值执行进一步拆分。

```
awk 'NR == 5 { split(substr($0, 6), a, /:/); print a[1] }' file 
```

将在正则表达式上提取的子字符串`/:/`（在这种简单的情况下，正则表达式仅匹配文字冒号字符）到数组`a`中。然后我们打印 的第一个元素`a`，这意味着我们放弃从子字符串中的第一个冒号开始的所有内容，该冒号从索引 6 开始，一直延伸到第 5 行的行尾。

（为了让您不必查找它，`$0`是整个当前输入行。Awk 逐行处理一个文件，依次在每一行上运行脚本的主体。如果您需要将 shell 变量公开给 Awk，`awk -v awkvariable="$shellvariable"`这样做.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-26T17:20:20.930

使用 awk 打印第 5 到 10 行的第 2 列：

```
awk 'NR==5,NR==10 {print $2}' <file                           # white space delim. columns
awk 'NR==5,NR==10 {print $2}; NR==10 {exit}' <file            # optimized
awk -F: 'NR==5,NR==10 {print $2}; NR==10 {exit}' </etc/passwd # colon delimited columns 
```

优化是它在打印所需范围的最后一行后退出。

使用了*范围模式*：

> 范围模式由两个用逗号分隔的模式组成，格式为“begpat, endpat”。它用于匹配连续输入记录的范围。
> [https://www.gnu.org/software/gawk/manual/html_node/Ranges.html](https://www.gnu.org/software/gawk/manual/html_node/Ranges.html)

*模式*可以是正则*表达式模式*或*表达式模式*。以上使用*表达式模式*与 NR 进行比较。

我假设用空格分隔列，但提供了一个使用该`-F`选项指定不同分隔符的示例。

# ruby-on-rails-3 - 从 Rails 3 Asset Pipeline 提供自定义 MIME 类型

> ID：12452300
> 
> 赞同：0
> 
> 时间：2012-09-17T01:55:58.957
> 
> 标签：ruby-on-rails-3, asset-pipeline, mime-types, ogg

我正在尝试从 rails 提供 Opus 音频文件。我有文件在`vendor/assets/my_custom_folder_for_audio/file.opus`. 我可以通过访问来访问该文件`localhost:3000/assets/file.opus`。但是，如果我尝试将文件作为音频元素的 src 加载，则会收到有关 MIME 类型`application/octet-stream`何时应该为`audio/ogg`. Rails 有一个文件`config/initializers/mime_types.rb`，但它看起来像是用于 respond_to 块，您不将其用于资产管道。音频文件应该在`public/`吗？这仍然不能解决 MIME 类型问题。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:32:16.723

因此，我通过进行以下更改使其工作：

`vendor/assets/my_custom_folder_for_audio/file.opus`->`vendor/assets/audio/file.ogg`

# java - android，返回命令并没有真正返回

> ID：12452301
> 
> 赞同：1
> 
> 时间：2012-09-17T01:56:21.703
> 
> 标签：java, android, google-maps-api-3

我在调试以下函数时遇到了一个奇怪的行为（上下文是 Android，但这可能是一个一般的 java 问题）。即使 if 条件为真并且光标跳转到“return true”，它也会继续移动并跳转到“return false”。并且行为是可重现的！这怎么可能？

```
public boolean onTap(GeoPoint p, MapView mapView) {
    if(super.onTap(p, mapView)) {//We tapped on an overlay item

        return true;
    }

    Log.i(TAG, "jumping to return false");
    return  false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:05:57.037

我在 Eclipse 调试器中见过很多次。该方法返回 true，但调试器让用户认为它返回 false :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:28:27.980

确保在调试文件时已编辑此 java 文件。例如，删除一行或添加一行然后调试行不是真的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:48:28.230

别担心。真的，它只是 eclipsedebugger 行为方式的一个函数。请放心，在您的示例中不会执行“return false”。我已经看过很多次了，所以我确切地知道你看到的问题，但就像我说的，这只是调试器的行为方式，但如果条件失败，实际上只会返回 true。

# java - 会阻塞 ConcurrentHashMap 吗？

> ID：12452303
> 
> 赞同：1
> 
> 时间：2012-09-17T01:56:41.327
> 
> 标签：java, android

片段1：

```
private void startLoadingName() {
    for (ConcurrentHashMap.Entry<TextView, Long> entry : mPendingNameRequest.entrySet()) {
        long callId = (Long)entry.getValue();
        NameHolder nameHolder = mNameCache.get(callId);
        nameHolder.name = QueryUtils.loadNameFromDb(mContext, callId);
        nameHolder.status = NameHolder.LOADED;
        // mNameCache is a ConcurrentHashMap
        mNameCache.put(callId, nameHolder);

        updateContactCachedName(callId, nameHolder);
    }

    GsItemLoader.this.sendEmptyMessage(MESSAGE_SET_NAME);
} 
```

此代码段在 UI 线程以外的线程上运行。每次执行时，ListView 滚动总是变慢，所以代码片段中肯定有一些东西阻塞了 UI 线程。

我发现这`NameHolder nameHolder = mNameCache.get(callId);`会阻塞`mNameCache`直到`mNameCache.put(callId, nameHolder);`. 但是文档说“ConcurrentHashMap”不会阻止检索操作。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:25:36.870

AFAIK，它可能会阻塞。

（如果我对 ConcurrentHashMap 的理解有误，请纠正我）。

ConcurrentHashMap 的整个想法是，用一个大数组存储哈希表，每个人都锁定整个表，它被分成多个分区（你可以在 ConcurrentHashMap 的源代码中看到内部类“Segment”）。只有当您正在读取或写入不同的分区时才会出现“没有争用”的情况。

仔细查看另一个答案中引用的源代码 Stephen C，您`lock()`可以`unlock()`在`readValueUnderLock()`. 如果两个线程正在访问同一个分区，它将锁定该段并完成其工作。

因此，如果您的 UI 线程正在`put`使用相同的键（或同一段中的其他键），它将阻塞，直到您完成`get()`

但是，从您在问题中谈论的意义上说，它并没有阻塞。它只在访问期间阻塞（get/put 等），一旦操作完成，锁就会被释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:00:24.907

简单回答是不。除非您没有告诉我们其他事情，否则`get`呼叫不会阻塞超过一微秒左右。

该`get`方法及其辅助方法的源代码如下。如您所见，大部分工作都是在没有任何锁的情况下完成的。条目值的最终获取是在锁下完成的，但锁几乎会立即释放......在一个`finally`块中。

可以肯定地说，`get()`电话不是您问题的原因。

* * *

```
 /**
     * Reads value field of an entry under lock. Called if value
     * field ever appears to be null. This is possible only if a
     * compiler happens to reorder a HashEntry initialization with
     * its table assignment, which is legal under memory model
     * but is not known to ever occur.
     */
    V readValueUnderLock(HashEntry<K,V> e) {
        lock();
        try {
            return e.value;
        } finally {
            unlock();
        }
    }

    /* Specialized implementations of map methods */

    V get(Object key, int hash) {
        if (count != 0) { // read-volatile
            HashEntry<K,V> e = getFirst(hash);
            while (e != null) {
                if (e.hash == hash && key.equals(e.key)) {
                    V v = e.value;
                    if (v != null)
                        return v;
                    return readValueUnderLock(e); // recheck
                }
                e = e.next;
            }
        }
        return null;
    } 
```

来源：[http ://www.java2s.com/Open-Source/Android/android-core/platform-libcore/java/util/concurrent/ConcurrentHashMap.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/java/util/concurrent/ConcurrentHashMap.java.htm)

（如果链接断开，谷歌“ConcurrentHashMap android source”。）

# javascript - 按比例缩放图像以适合当前文档尺寸

> ID：12452305
> 
> 赞同：1
> 
> 时间：2012-09-17T01:57:01.317
> 
> 标签：javascript, jquery, resize, image-resizing, jquery-events

我有一个尺寸为`alfa`x`beta`像素的图像。

然后我`onDocumentReady`计算`onWindowResize`当前文档尺寸。

任务是按比例缩放图像，直到达到其中一个维度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T01:57:01.317

```
$(document).ready(function() {

    scaleStart();

});

$(window).resize(function() {

    scaleStart();

});

function scaleStart() {

    $("#myImage").css("min-width", 0);
    $("#myImage").css("min-height", 0);

    var originalWidth = 1762;
    var originalHeight = 1041;

    var safeWidth = $(document).width() - 100;
    var safeHeight = $(document).height() - 100;

    var scaleWidth = originalWidth / safeWidth;
    var scaleHeight = originalHeight / safeHeight;

    if (scaleWidth > scaleHeight)
    {
        $("#myImage").css("min-width", originalWidth / scaleWidth);
        $("#myImage").css("min-height", originalHeight / scaleWidth);
    }

    else
    {
        $("#myImage").css("min-width", originalWidth / scaleHeight);
        $("#myImage").css("min-height", originalHeight / scaleHeight);
    }

} 
```

# php - cronjob dos 屏幕显示

> ID：12452308
> 
> 赞同：0
> 
> 时间：2012-09-17T01:57:12.117
> 
> 标签：php, cron, windows-server-2008, dos

我正在使用 Windows Server 2008 上的任务调度程序为 php 运行 cron 作业

我已将任务设置为每 5 分钟运行一次。

现在，当任务在服务器上运行时，我每 5 分钟就会看到一个空白的 dos 屏幕。

是否有任何方法可以使 DOS 窗口不每 5 分钟显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:06:22.510

设置任务调度程序以使用以下命令运行您的命令：

```
start /b cmd /c call [your command here] 
```

`/b`用于背景。

`/c`完成后关闭。

# c - 关于 C 的语法和工作原理的问题

> ID：12452311
> 
> 赞同：0
> 
> 时间：2012-09-17T01:57:32.030
> 
> 标签：c

首先，我要感谢大家为我所做的一切，无论他们是否知道。我是第一次海报长期潜伏者。

我正在开始一个基于 C 及其几个变体的新课程。问题是它假设你至少有 C++ 的经验，不幸的是我只学了几个学期的 Java 和 Mips。我现在正在努力学习 C，没有任何书籍或课程计划。我使用 Google 度过了第一个月。但是我今天的问题似乎无法解决，虽然我知道这是基本的，但我希望在理解我的作业中代码的工作方面得到一些帮助。

教授为我们提供了以下代码：

```
#include <stdio.h>
#include <string.h>

void encrypt(int offset, char *str) {

    int i,l;

    l=strlen(str);

    printf("\nUnencrypted str = \n%s\n", str);

    for(i=0;i<l;i++)
        if (str[i]!=32)
            str[i] = str[i]+ offset;

    printf("\nEncrypted str = \n%s \nlength = %d\n", str, l);
}   

void decrypt(int offset, char *str) {

}   

void main(void) {

    char str[1024];

    printf ("Please enter a line of text, max %d characters\n", sizeof(str));

    if (fgets(str, sizeof(str), stdin) != NULL)
    {
        encrypt(5, str);    // What is the value of str after calling "encrypt"?

        // add your method call here:
    }
} 
```

因此，作业的问题在代码中列出，但要明确这不是我所追求的。我想了解这个程序到目前为止是如何工作的。

具体来说：

1.  为什么写`char str[1024]`

2.  究竟在`if (fgets(str, sizeof(str), stdin) != NULL)`做什么？我有一个不错的想法，但我不知道它背后的原因。

3.最后（我希望）在

```
if (str[i]!=32)
    str[i] = str[i]+ offset; 
```

为什么我们担心`str[i]`不等于 32？

如果有很多问题，我很抱歉，但我真的很想了解这一点。

另外，如果您知道 C 的任何精彩读物，请告诉我，因为此时我相当担心本学期的剩余时间。

编辑：

只是想非常感谢所有回答我的人。不幸的是，我不是那些立即喜欢继续提出更多问题以承认您帮助了我的人之一。所以对于那些我没有直接感谢或评论的人，非常感谢。现在，我对 30 分钟前还感到紧张的一些非常基本的概念有了更牢固的把握。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:07:18.690

1.  您使用`char str[1024]`C 是因为 C 没有任何字符串的概念，只有`char`由 NUL aka 0 终止的数组。它没有任何您自己没有明确实现的“可拉伸”容器的概念。因此，如果您想在不编写大量自己的输入处理的情况下读取输入字符串，您可以猜测某个最大长度（在本例中为 1024）并提前为此腾出空间。
2.  `fgets`读取一个字符串（当您在 C 中说“字符串”时，这意味着“`char`由 0 终止的数组，如上所述）。您传入`str`which 是指向存储开始的指针，并且`sizeof(str)`在编译时将其评估为数字`str`占用的字节数。这意味着`1024`在这种情况下，如果您更改行，它将跟踪更改`char str`。该参数阻止`fgets`写入超出分配的空间`str`。请记住，它不是一个有弹性的字符串。
3.  ASCII 32 是空格。写起来会更清楚`str[i] != ' '`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T02:16:22.643

*Kernighan + Ritchie 的书The C Programming Language*将是一个很好的开始。
亚马逊：[这里](https://rads.stackoverflow.com/amzn/click/com/0131103628)

另请参阅[权威 C 书籍指南和列表](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:03:18.113

1.  这表示这`str`是一个 1024`char`秒的数组
2.  *“fgets() 从流中最多读取一个小于 size 的字符并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符之后停止读取。如果读取换行符，则将其存储到缓冲区中。终止空字节 ('\0') 存储在缓冲区中的最后一个字符之后。"*
3.  显然，值为 32 的字符不应“加密”。找一张 ASCII 表，看看 32 是什么特殊字符...

附言。*“gets() 和 fgets() 在成功时返回 s，在错误时或在未读取任何字符时出现文件结尾时返回 NULL。”*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T02:11:54.607

```
char str[1024]; 
```

声明`str`为 1024 个元素的数组`char`。

```
fgets(str, sizeof (str), stdin) 
```

从（标准输入，基本上是您的控制台）读取多达`sizeof (str)`(1024) 个字符`stdin`并将这些字符存储到`str`. `fgets`如果在读取过程中出现错误，将返回 NULL，所以

```
if (fgets(std, sizeof(str), stdin) != NULL)
{
  encrypt(...);
  ...
} 
```

`if`仅当我们成功读取输入字符串时才会执行语句的主体。

`32`是空格 ( `' '`) 字符的 ASCII 码；无论出于何种原因，加密算法都会在字符串中保留空格字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T02:15:41.577

### 第一个问题：

在 Java 中，您必须拥有`new`所有数组，例如`char[] arr = new char[1024]`. 在 C（和 C++）中，您可以选择像 Java 一样动态分配数组（`malloc`在 C 和`new []`C++ 中使用），或者使用固定大小（`char str[1024]`您在此处看到）静态分配数组。

在 C 语言中，因为所有内存都需要手动管理`malloc`and `free`，所以静态分配的缓冲区会节省一些麻烦，因为它们会在函数退出时自动释放。在 Java 中，您很少处理内存分配，因为运行时会自动*垃圾收集*未使用的对象。

在 Java 中，你有`String`，它包装了一个`char`. 在 C 中，您只有 char 数组，通常表示为第一个字符 ( )的数组`char`或指针。`char *`还要注意，Java`char`在处理 Unicode 时是 16 位（2 个字节）宽；C`char`的大小只有 8 位（1 个字节）。

最后，请注意，在 C 中，所有字符串都以空字节结尾`'\0'`。因此，字符串必须足够大以容纳内容和终止的空字节——未能计算空字节可能会导致缓冲区溢出。

### 第二个问题：

在Java 中，您可以使用`readLine`从文件或用户输入中读取一行文本。在 C 中，您使用`fgets`. 然而，在 Java 中，运行时会动态分配一个足够大的字符串来容纳输入行（不管该行有多长）；在 C 中，由于缓冲区通常由程序员分配，因此函数只能读取缓冲区允许的字符数（读取缓冲区末尾的字符称为*缓冲区溢出*，这是安全漏洞的常见原因）。

`fgets`因此需要三个参数：要读取的缓冲区、缓冲区的大小以及要从中读取的文件（此处`stdin`为控制台）。

### 第三个问题：

C 中的字符串是简单的 ASCII 字符序列。所以，只有当字符不是 32 时，代码才会加密字符（通过添加这个“偏移量”）——一个空格字符。结果是所有非空格都将被转换为乱码，而空格则完好无损。

# mysql - category_ids 到 magento 中的类别

> ID：12452316
> 
> 赞同：0
> 
> 时间：2012-09-17T01:58:32.373
> 
> 标签：mysql, magento

我正在将 magento 1.3 中的产品导出到 magento 1.6，在 magento 1.3 的 .csv 中它有一个 category_ids 字段，而在 magento 1.6 的 .csv 中有一个 _category 字段。我只想拥有与 .csv ma​​gento 1.6 相同的 magento 1.3 的 .csv 属性字段，以便我可以将 magento 1.3 中的 .csv 导入 magento 1.6。

我现在的问题是如何在我的 mysql 中查询以从 magento 1.3 中的 category_ids 获取类别名称？

我查看了 magento 1.3 中的表格，但那里没有类别名称。

在 magento 1.3 的 .csv 中，它有这个表

```
category_ids
------------
154
154
154
59
63,88
63
61 
```

我尝试这个 sql 查询，但没有任何返回..

```
SELECT catalog_category_entity_varchar.value FROM catalog_category_entity_varchar WHERE value_id = 154; 
```

有人知道我的案子吗？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:02:47.460

像这样试试

要获取所有类别，请使用以下查询：

```
SELECT * FROM catalog_category_entity_varchar where attribute_id=111; 
```

您将获得以下值 value_id、entity_type_id、attribute_id、store_id、entity_id、value。

这里，entity_id - CategoryID，Value 是 Category Name。

```
value_id     entity_type_id       attribute_id      store_id     entity_id      value
   1               9                111                 0            3       'Root Catalog'
   4               9                111                 0            4       'Shirts'
   7               9                111                 0            5       'Shoes' 
```

如果要按特定获取类别名称，则使用以下查询：

```
SELECT catalog_category_entity_varchar.value FROM catalog_category_entity_varchar where attribute_id=111 and entity_id=4; 
```

4- 类别 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:50:51.570

我现在得到查询，就是这样......

```
SELECT * FROM catalog_category_entity_varchar WHERE entity_id = 40 
```

# mixed - 使用 ezMixed 指定混合模型并使用 ezPlot2（ez 包）获取预测和绘图

> ID：12452318
> 
> 赞同：1
> 
> 时间：2012-09-17T01:59:02.737
> 
> 标签：mixed, lme4

我是一个 ez 包新手，我一直在尝试使用 ezMixed 运行混合效应 anova，因为我的重复测量数据不平衡，并且某些重复观察的数据丢失了一些。我的响应变量“计数”是计数数据的平均值，不遵循泊松分布。首先，我不确定我是否使用 ezMixed 正确指定了我的模型。使用 lme()，我的模型看起来像这样：

```
lmefitmix2 = lme(count ~ MPA*timepointID,random=~1|siteID/timepointID ,na.action=na.omit,data = notolabrusMav2,method="ML") 
```

我的重复测量（在因子内）是嵌套在我的随机因子 siteID 中的 timepointID。我有兴趣测试分组变量“MPA”（效果之间）的主要效果以及重复测量“时间点 ID”的效果以及它们的相互作用。我知道如果我的设计是平衡的，我可以使用 ezAnova 并指定 wid=.siteID 和 within=.timepoint ID，但我不知道如何在 ezMixed 中翻译它。我的尝试如下，但它看起来像 siteID 和 timepointID 交叉：

```
er = ezMixed(
    data = notolabrusmav2
    , dv = .(count)
    , random = .(siteID,timepointID)
    , fixed = .(MPA,timepointID)
    , family = 'gaussian'
)
print(er$summary) 
```

我怎样才能解决这个问题？

此外， print(er$summary) 命令给了我以下结果：

```
er$summary

           effect errors warnings       bits

1             MPA  FALSE    FALSE   1.710731

2     timepointID  FALSE    FALSE  26.514379

3 MPA:timepointID  FALSE    FALSE -24.895950 
```

所以我理解这里证据强度最大的主要影响是'timepointID'，而两者的相互作用显示证据强度很小。

我尝试使用 ezPredict 和 ezPlot2 生成和绘制预测，如下所示：

```
myFit = er$models$timepointID$unrestricted
myPreds = ezPredict(myFit)
myPlot = ezPlot2(preds=myPreds,x=timepointID)
print(myPlot$plot) 
```

这给了我以下错误消息：

```
Error in order(boots$iteration) : argument 1 is not a vector
 print(myPlot$plot)
Error in print(myPlot$plot) : 
  error in evaluating the argument 'x' in selecting a method for function 'print': Error: object 'myPlot' not found 
```

我一直在谷歌上搜索它，但我似乎无法找到帮助我修复它的提示......

感谢您的帮助；0

# symfony - symfony 中的 provider 和 chain_provider 的问题

> ID：12452328
> 
> 赞同：2
> 
> 时间：2012-09-17T01:59:58.173
> 
> 标签：symfony, provider

我收到以下错误，代码如下：

```
ServiceNotFoundException: The service "security.firewall.map.context.main" has a dependency on a non-existent service "security.user.provider.concrete.fos_user_bundle". 
```

这发生在我`chain_provider:`在其中添加提供程序之后，如果我删除它，它就可以正常工作。知道为什么吗？

```
security: 
    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        fos_userbundle:
            id: fos_user.user_provider.username_email
        my_fos_facebook_provider:
            id: my.facebook.user
        chain_provider:
            chain:
                providers: [fos_user_bundle, my_fos_facebook_provider]
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    firewalls:
        main:
            pattern: ^/.*
            form_login:
                login_path: fos_user_security_login
                check_path: fos_user_security_check   
                provider: fos_userbundle
            fos_facebook:
                app_url: "http://apps.facebook.com/myapp/"
                server_url: "http://localhost/Symfony/web/app_dev.php"
                login_path: fos_user_security_login
                check_path: fos_user_security_check
                default_target_path: /
                provider: my_fos_facebook_provider
            anonymous: true
            logout: 
                path:   /logout
                target: / 
                handlers: ["fos_facebook.logout_handler"]
            #http_basic:
            #    realm: "Secured Demo Area"
        login:
            pattern:  ^/login$
            security: false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:19:44.497

这是 FOSFacebookBundle 文档中的一个错误。您必须使用 fos_userbundle 而不是 fos_user_bundle（注意下划线）作为提供者名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:07:28.050

您添加了“my_fos_facebook_provider”吗？您必须将其绑定到“my.facebook.user service”（最后 2 行）：

```
 providers:
        chainprovider:
            chain:
                providers: [fos_userbundle, my_fos_facebook_provider]
    fos_userbundle:
        id: fos_user.user_provider.username
    my_fos_facebook_provider:
        id: my.facebook.user 
```

# java - junit：找不到测试类

> ID：12452329
> 
> 赞同：3
> 
> 时间：2012-09-17T02:00:01.667
> 
> 标签：java, junit

我在这里和其他地方查看了重复的问题，包括 JUnit 常见问题解答 (http://junit.sourceforge.net/doc/faq/faq.htm#running_1)。

junit-4.10.jar 位于 /Library/Java/Extensions 中，它自动位于类路径中。

我的测试类在我的工作目录中编译。它不是任何软件包的一部分。但是，这些都不起作用：

```
java org.junit.runner.JUnitCore TestBoard
java -cp . org.junit.runner.JUnitCore TestBoard 
```

两者都返回：

```
JUnit version 4.10
Could not find class: TestBoard

Time: 0.001

OK (0 tests) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T18:25:41.910

最近我的junits测试也遇到了类似的问题。运行测试（在我的例子中是'mvn test'）导致了几种误导性的异常。事实证明，我在我的项目中使用了 jdk 1.6。当我切换到 jdk 1.7 时，一切都结束了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T17:29:05.363

确定这是 JUnit 问题还是您的类和/或类路径问题的最佳方法是将 main 方法添加到您的测试类：

```
public class TestBoard extends TestCase {

  public void testThatShouldFail() {
    fail();
  }

  public static void main(String[] args) {
    System.err.println("Hello World!");
  }
} 
```

然后你可以运行：

```
javac TestBoard.java
java TestBoard 
```

如果这不打印“Hello World！” 那么这是您的环境（类路径问题等）或您的测试类的一些问题。

我最好的猜测是你忘了公开课程。

# unit-testing - 在 PyCharm 中，调用nose.tools.assert_equals 时我有一个未解决的引用？

> ID：12452330
> 
> 赞同：1
> 
> 时间：2012-09-17T02:00:06.220
> 
> 标签：unit-testing, pycharm, nose, nosetests

当我尝试将 pycharm 与鼻子一起使用时，在调用 assert_raises 时会出现带有“未解析的引用”的红色下划线。我正在使用 virtualenv 解释器，但是安装了nose并且可以从ipython运行。此外，在实际测试中运行鼻子测试没有显示错误。

我正在运行的代码是：

```
from nose.tools import *

def test1():
    assert_equals(1,1) 
```

同样，nose 运行良好，但 pycharm 中的 linting 机制认为这是一个错误。对配置pycharm有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:36:49.110

我已重现该问题并向 YouTrack[提交了一个错误](http://youtrack.jetbrains.com/issue/PY-7614)，请为该问题加注星标/投票以跟踪进度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T15:00:04.127

问题已在 PyCharm 3.0 中修复

# java - jsoup 获得特定值

> ID：12452331
> 
> 赞同：1
> 
> 时间：2012-09-17T02:00:06.617
> 
> 标签：java, jsoup

```
<div id="studentInfo">
<p id="studentdetails">
<span>Placeofbirth:</span>
   <span class="hidden" itemtype="http://xxxx.com" itemscope="">
    <a itemprop="url" href="xxx.xom">
    <span itemprop="title">Greg</span>
    </a>
    <span itemtype="http://xxxx1.com" itemscope="" itemprop="child">
    <a itemprop="url" href="/c/san-diego/indpak">
<span itemprop="title">Greg is one of the Best student</span>
</a>
</span>
</span>
<span id="cat_display">
<a href="xxx.com"> Greg can be promoted </a>
</span> 
```

我做了一个

```
Element studentname = doc.select("div p ").first(); 
```

当我这样做时：我得到 Greg Greg 是 Greg 可以晋升的最佳学生之一。

我只想打印：Greg 可以升职

当我执行 p 并尝试打印 studentname.text() 时，它正在打印所有存在的文本，我正在寻找一个特定的文本。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:53:33.873

希望这是您的解决方案

```
Elements students = document.select("div p #cat_display");
System.out.println(students.text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-24T12:30:48.957

这是更好的解决方案，速度更快

```
String sText= document.select("span#cat_display").text();
System.out.println(sText); 
```

# c++ - 我应该如何生成 OpenNI 示例中所示的 UserCalibration.bin 文件 - NiUserTracker

> ID：12452337
> 
> 赞同：0
> 
> 时间：2012-09-17T02:01:25.543
> 
> 标签：c++, windows, visual-studio-2010, openni

此代码片段取自名为 NiUserTracker 的 OpenNI 示例

```
//... some codes...

#define XN_CALIBRATION_FILE_NAME "UserCalibration.bin"

// Save calibration to file
void SaveCalibration()
{
    XnUserID aUserIDs[20] = {0};
    XnUInt16 nUsers = 20;
    g_UserGenerator.GetUsers(aUserIDs, nUsers);
    for (int i = 0; i < nUsers; ++i)
    {
        // Find a user who is already calibrated
        if (g_UserGenerator.GetSkeletonCap().IsCalibrated(aUserIDs[i]))
        {
            // Save user's calibration to file
            g_UserGenerator.GetSkeletonCap().SaveCalibrationDataToFile(aUserIDs[i], XN_CALIBRATION_FILE_NAME);
            break;
        }
    }
}

//... some codes ...
//... some codes ...

 void glutKeyboard (unsigned char key, int x, int y)
{
    switch (key)
    {
        case 27:
            CleanupExit();

        //... some codes...

        case 'S':
            SaveCalibration();
            break;
        case 'L':
            LoadCalibration();
            break;
        }
    } 
```

当我按下 Shift+s 或 S（大写锁定）时，它不会生成“UserCalibration.bin”。我完全搜索了我的硬盘驱动器，但没有找到这样的文件。之后，我禁用了 OpenNI 文件夹中的“只读”属性。控制台，当我执行 NiUserTracker.exe 时，没有报告任何错误。

我对它的在线校准最满意，校准需要一点时间，我认为通过加载用户校准的文件可以更快地完成这个过程。

能否指出我正确的方向，为什么我无法生成这个“UserCalibration.bin”文件？我正在使用带有 64 位 OpenNI 的 Win7 64 位和 Visual Studio 2010 Ultimate（由我们大学提供用于研究目的）。

非常感激。

问候， 伊克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:54:26.443

我刚刚使用两种不同的配置进行了快速测试：

1.  osx 10.6.8 与 OpenNI 开发 64 位（OpenNI1.5.2.7，Nite1.5.2.7，avin2 SensorKinect5.0.5.2）
2.  WinXP SP3 with OpenNI dev 32bit (OpenNI1.5.4.0,Nite1.5.2.21,avin2 SensorKinect5.1.2.1)

看起来不像是权限问题。我稍微修改了 SaveCalibration 函数：

```
// Save calibration to file
void SaveCalibration()
{
    XnUserID aUserIDs[20] = {0};
    XnUInt16 nUsers = 20;
    g_UserGenerator.GetUsers(aUserIDs, nUsers);
    for (int i = 0; i < nUsers; ++i)
    {
        // Find a user who is already calibrated
        if (g_UserGenerator.GetSkeletonCap().IsCalibrated(aUserIDs[i]))
        {
            // Save user's calibration to file
                        XnStatus saveStatus = g_UserGenerator.GetSkeletonCap().SaveCalibrationDataToFile(aUserIDs[i], XN_CALIBRATION_FILE_NAME);
                        std::cout << "saveStatus: " << saveStatus << std::endl;
                        if(saveStatus == XN_STATUS_OK) std::cout << "calibration saved to file" << std::endl;
                        if(saveStatus == XN_STATUS_NOT_IMPLEMENTED) std::cout << "not implemented, calibration wasn't saved" << std::endl;
            break;
        }
    }
} 
```

我在 osx 上有 STATUS_OK，但在 Windows 上有 XN_STATUS_NOT_IMPLEMENTED（值 65550）。我[在 OpenNI group 上发现了一篇有趣的帖子](https://groups.google.com/forum/?fromgroups=#!topic/openni-dev/dCeOgwAUm90)。我不是 100% 确定，但听起来 SaveCalibrationDataToFile 可能在较新的版本中被弃用。这是有道理的，因为校准不再需要 psi(Ψ) 姿势。

尝试恢复到旧版本。我在 osx 上使用的 OpenNI 配置可以工作（保存校准文件，但这个版本也可以跟踪骨架而不需要 psi(Ψ) 姿势）。

高温高压

# node.js - 为什么这个 node.js 脚本不会在终端中保持打开状态？

> ID：12452342
> 
> 赞同：3
> 
> 时间：2012-09-17T02:02:07.990
> 
> 标签：node.js, ubuntu

我想知道如何在不进入`node script_name.js`终端的情况下运行这个脚本。当我从终端启动脚本时会显示提示，但是当我尝试将脚本作为程序运行（从文件管理器，而不是命令行）时，它只是打开和关闭终端，而不显示提示。

```
#!/usr/local/bin/node

var prompt = require('prompt');

//var stuff = require("./stuff");

  prompt.start();

  prompt.get(['username', 'email'], function (err, result) {
    if (err) { return onErr(err); }
    console.log('Command-line input received:');
    console.log('  Username: ' + result.username);
    console.log('  Email: ' + result.email);
  });

  function onErr(err) {
    console.log(err);
    return 1;
  } 
```

这是该程序的预期输出（带输入）：

```
anderson@anderson-Ideapad-Z560:~/AeroFS/node.js examples$ node node_prompt_demo.js
prompt: username:  blah
prompt: email:  blah@example.com
Command-line input received:
  Username: blah
  Email: blah@example.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:11:19.273

这几乎肯定与控制 tty 有关。我猜你正在使用的文件管理器不会给你一个`stdin`附加到任何东西的文件，它只是在没有任何输入的情况下退出。

你最好的办法是把它包装在一个可以给它一个有效的程序中`stdin`。例如，在 Mac 上，我在*Terminal.app*中运行节点脚本，因此它始终获得有效的标准输入。应该能够在 XWindows 中做类似的事情。如果您没有使用窗口管理器，您也可以尝试使用“ `expect`”和“ `screen`”。这些的组合应该让你得到你想要的。

# css - A.CLASS:LINK 仅适用于 Firefox 中的第一个元素

> ID：12452345
> 
> 赞同：1
> 
> 时间：2012-09-17T02:02:29.987
> 
> 标签：css, class, firefox, hyperlink

对于我的导航，我为 3 个链接设置了一个类：链接和悬停。在 Firefox (3.6.28) 中，只有第一个链接会选择我设置的规范（如 :link），但在 Safari (4.1.3) 中它们都显示得很好。但是， :hover 类规范在两种浏览器中都可以正常显示。

似乎是最简单的问题，但我不知道为什么会这样。它们嵌套在一个表中，我将它们隔离在表外，但仍然没有区别。我在 Stack 和 Google 上搜索了答案，但找不到任何相关的东西。

```
A.ANAV:LINK {color:#ac1700; font-family:Tahoma,Geneva,sans-serif; font-size:20px; letter-spacing:; font-weight:bold; text-shadow: 1px 1px 2px #006924; text-decoration:none;}
A.ANAV:HOVER    {color:#ac1700; font-family:Tahoma,Geneva,sans-serif; font-size:20px; letter-spacing:; font-weight:bold; text-shadow: 1px 1px 2px #000000; text-decoration:none;}

<a href="index.php" class="ANAV">HOME</a>
<a href="services.php" class="ANAV">SERVICES</a>
<a href="photos.php" class="ANAV">PHOTOS</a> 
```

这是供参考的网站 - [The Weed Guys](http://www.theweedguys.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:10:53.397

+1 用于回答您自己的问题并将其发布:)

做这样的事情可能不是一个糟糕的主意，`a, a:link {color:red}`然后你就覆盖了所有的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:41:07.290

`:link`仅匹配未访问的链接。你在 Firefox 中访问过 services.php 和 photos.php 吗？

如果要匹配所有链接，则还必须设置样式`:visited`。

# sqlite - 为sql数据输入创建for循环

> ID：12452347
> 
> 赞同：0
> 
> 时间：2012-09-17T02:03:00.557
> 
> 标签：sqlite, loops, for-loop

目前我有这个设置：

```
String string1 = ....
String string2 = ....
String string3 = ....
String string4 = .... 
```

等等

接着

```
db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + string1 + ");");
db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + string2 + ");");
db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + string3 + ");");
db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + string4 + ");"); 
```

等等

有没有办法创建一个贯穿 1 到 x 实现所有的 for 循环？例如我试过：

```
for (int number = 0; number <= 4; number++) { 
    String s = "string" + number; 
    db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + s + ");"); 
```

然而这并没有奏效。然后我尝试设置：

```
String x[] = {string1, string2, string3, string4}` 
```

然后

```
for (int number = 0; number <= 4; number++) { 
     String s = "string" + number; 
     db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES (" + x[number] + ");"); 
```

但这也没有用。

对不起，如果这是一个新手问题。我到处寻找，但找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:45:48.313

为了将来参考，这是我实现它的方式

```
String[] sqlString = {string1, string2, string3...etc.}

db.beginTransaction();

        try {
            for (int n = 1; n < sqlString.length; n++) {

                db.execSQL("INSERT INTO " + DATABASE_TABLE + " VALUES ("
                        + sqlString[n] + ");");

            }
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        } 
```

# javascript - 方向更改后的移动视口高度

> ID：12452349
> 
> 赞同：43
> 
> 时间：2012-09-17T02:03:28.163
> 
> 标签：javascript, html, mobile, viewport, orientation-changes

我正在为[`orientationchange`](https://developer.mozilla.org/en-US/docs/Web/Events/orientationchange)事件附加一个侦听器：

```
window.addEventListener('orientationchange', function () {
    console.log(window.innerHeight);
}); 
```

我需要在`orientationchange`. 但是，该事件在轮换完成之前触发。因此，记录的高度反映了实际方向变化之前的状态。

如何注册一个事件以允许我在方向更改完成后捕获元素尺寸？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-03-20T11:40:59.390

**使用调整大小事件**

**resize**事件将在**orientationchange**之后包含适当的宽度和高度，但您不想监听所有resize 事件。因此，我们在方向更改后添加一次性调整大小事件侦听器：

*Javascript*：

```
window.addEventListener('orientationchange', function() {
    // After orientationchange, add a one-time resize event
    var afterOrientationChange = function() {
        // YOUR POST-ORIENTATION CODE HERE
        // Remove the resize event listener after it has executed
        window.removeEventListener('resize', afterOrientationChange);
    };
    window.addEventListener('resize', afterOrientationChange);
}); 
```

*jQuery* :

```
$(window).on('orientationchange', function() {
    // After orientationchange, add a one-time resize event
    $(window).one('resize', function() {
        // YOUR POST-ORIENTATION CODE HERE
    });
}); 
```

**不要使用超时**

超时是不可靠的——一些设备将无法在您的硬编码超时内捕捉到它们的方向变化；这可能是由于不可预见的原因，或者是因为设备运行缓慢。快速设备反过来会在代码中产生不必要的延迟。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-06-16T02:11:09.077

Gajus 和 burtelli 的解决方案很强大，但开销很大。这是一个在 2017 年相当快的超薄版本，使用`requestAnimationFrame`：

```
// Wait until innerheight changes, for max 120 frames
function orientationChanged() {
  const timeout = 120;
  return new window.Promise(function(resolve) {
    const go = (i, height0) => {
      window.innerHeight != height0 || i >= timeout ?
        resolve() :
        window.requestAnimationFrame(() => go(i + 1, height0));
    };
    go(0, window.innerHeight);
  });
} 
```

像这样使用它：

```
window.addEventListener('orientationchange', function () {
    orientationChanged().then(function() {
      // Profit
    });
}); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-11-09T14:43:00.243

无法捕获方向更改事件的结束，因为对方向更改的处理因浏览器而异。在检测方向变化结束的最可靠和最快的方法之间取得平衡需要比赛间隔和超时。

一个监听器附加到`orientationchange`. 调用侦听器会启动一个间隔。区间跟踪 和 的`window.innerWidth`状态`window.innerHeight`。当后续迭代次数未检测到值突变或毫秒后`orientationchangeend`触发该事件，以先发生者为准。`noChangeCountToEnd``noEndTimeout`

```
var noChangeCountToEnd = 100,
    noEndTimeout = 1000;

window
    .addEventListener('orientationchange', function () {
        var interval,
            timeout,
            end,
            lastInnerWidth,
            lastInnerHeight,
            noChangeCount;

        end = function () {
            clearInterval(interval);
            clearTimeout(timeout);

            interval = null;
            timeout = null;

            // "orientationchangeend"
        };

        interval = setInterval(function () {
            if (global.innerWidth === lastInnerWidth && global.innerHeight === lastInnerHeight) {
                noChangeCount++;

                if (noChangeCount === noChangeCountToEnd) {
                    // The interval resolved the issue first.

                    end();
                }
            } else {
                lastInnerWidth = global.innerWidth;
                lastInnerHeight = global.innerHeight;
                noChangeCount = 0;
            }
        });
        timeout = setTimeout(function () {
            // The timeout happened first.

            end();
        }, noEndTimeout);
    }); 
```

我正在维护一个[`orientationchangeend`](https://github.com/gajus/orientationchangeend)基于上述逻辑的实现。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-23T22:47:24.073

方向变化需要延迟才能适应新的高度和宽度。这在 80% 的时间里都有效。

```
window.setTimeout(function() {
    //insert logic with height or width calulations here.
}, 200); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-06T12:26:48.417

我使用了一段时间由 Gajus Kuizunas 提出的解决方法，虽然有点慢，但它是可靠的。谢谢，无论如何，它完成了工作！

如果您使用的是 Cordova 或 Phonegap，我找到了一个更快的解决方案 - 以防其他人将来遇到这个问题。此插件立即返回正确的宽度/高度值：[https ://github.com/pbakondy/cordova-plugin-screensize](https://github.com/pbakondy/cordova-plugin-screensize)

返回的高度和宽度反映了实际分辨率，因此您可能必须使用 window.devicePixelRatio 来获取视口像素。标题栏（电池、时间等）也包含在返回的高度中。我最初使用了这个回调函数（onDeviceReady）

```
var successCallback = function(result){
    var ratio = window.devicePixelRatio;            
    settings.titleBar = result.height/ratio-window.innerHeight; 
    console.log("NEW TITLE BAR HEIGHT: " + settings.titleBar);
}; 
```

在您的方向更改事件处理程序中，您可以使用：

```
height = result.height/ratio - settings.titleBar; 
```

立即获得innerHeight。希望这对某人有帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-01T23:54:25.680

我结合上述几个解决方案解决了这个问题。调整大小会触发 4-5 次。使用 .one，它启动得太早了。克里斯托弗·布尔的解决方案中添加了一个短暂的时间就可以了。

```
$(window).on('orientationchange', function () {
  $(window).one('resize', function () {
    setTimeout(reference_to_function, 100);
  });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-26T06:38:18.373

我也面临同样的问题。所以我最终使用：

```
window.onresize = function(){ getHeight(); } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-06T13:31:38.527

需要注意的是，orientationchange不会得到改变后的高度，而是之前的。使用调整大小来完成此操作。

```
$(window).bind('orientationchange', function (e) {
    var windowHeight = $(window).innerHeight();
    console.log('Before Orientation: Height = ' + windowHeight);

    $(window).resize(function () {
        windowHeight = $(window).innerHeight();
        console.log('After Orientation: Height = ' + windowHeight);
    });
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-06T20:46:05.757

这是一项实验性功能，在屏幕方向更改后会提供正确的 innerHeight 和 innerWidth 。

```
window.screen.orientation.addEventListener('change', function(){
    console.log(window.innerHeight)
}) 
```

我认为收听窗口调整大小是实现屏幕方向更改逻辑的最安全方法。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-07-22T10:10:31.943

对于那些只想要`innerHeight`window 对象之后的人来说，`orientationchange`有一个简单的解决方案。使用`window.innerWidth`. 活动`innerWidth`期间是完成后：`orientationchange``innerHeight``orientationchange`

```
window.addEventListener('orientationchange', function () {
    var innerHeightAfterEvent = window.innerWidth;
    console.log(innerHeightAfterEvent);
    var innerWidthAfterEvent = window.innerHeight;
    console.log(innerWidthAfterEvent);
    console.log(screen.orientation.angle);
}); 
```

我不确定 180 度的变化是否以两个 90 度的步长完成。无法在开发者工具的帮助下在浏览器中模拟。但是，如果您想防止完整的 180、270 或 360 旋转可能性，则应该可以使用`screen.orientation.angle`来计算角度并使用正确的高度和宽度。事件`screen.orientation.angle`期间是事件的目标角度`orientationchange`。

# java - Java中使用的长字符串

> ID：12452354
> 
> 赞同：0
> 
> 时间：2012-09-17T02:03:51.987
> 
> 标签：java, string, file

假设我必须在我的 java 程序中使用两段字符串。对此最好的方法是什么？段落是否应该保存在文件中并在使用时检索？还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:06:14.603

这取决于。如果段落永远不会改变，那么将它们直接嵌入到源代码中可能是有意义的。这样做的好处是不需要额外的文件来运行您的代码。

如果您预计段落可能会更改，最好将它们放在外部文件中，因为这样可以让某人修改文本而无需重新编译程序。如果修改的人不是程序员，这可能是有益的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:30:58.557

如果您需要将这两个段落字符串连接在一起，只需添加一个更好的方法是使用 StringBuffer 类并附加它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:36:45.327

我唯一一次看到具有这种长度的字符串是在国际化的[属性文件](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)中。这使它们与逻辑分开，并使编辑段落/必要代码更简单。

简而言之，是的，更好的方法是将字符串存储在自己的单独文件中。但是，不应该有任何理由拥有*那么*长的文件——即使是属性文件，最好也将它们分开。

# node.js - expressjs 中的车把 .hbs 视图不加载我的部分

> ID：12452355
> 
> 赞同：1
> 
> 时间：2012-09-17T02:03:56.393
> 
> 标签：node.js, express, handlebars.js

```
 # app.js
  app.set('view engine', 'hbs');

  # ./views/layout.hbs
      {{> nav}}

  # ./views/nav.hbs
      <a href="#">home</a> 
```

layout.hbs 文件没有找到我的部分 nav.hbs

我在 node app.js 控制台上收到以下错误：

throw new Handlebars.Exception("部分 " + name + " 不能被 fo ^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T17:39:42.117

您需要先注册要使用的部分“导航”。我在 Express.js hbs 模块中找到了答案[- 从 .hbs 文件中注册部分内容](https://stackoverflow.com/questions/8059914/express-js-hbs-module-register-partials-from-hbs-file)对我来说效果很好。要点是：

```
var template = fs.readFileSync(partialsDir + '/' + filename, 'utf8');
hbs.registerPartial(name, template) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:07:00.643

您的问题是您使用的是 express 3.x，它显着改变了它在 2.x 中处理模板的方式。特别是，2.x 对部分模板如何适合整体布局做出了一系列假设，而 3.x 则将其留给布局引擎本身。但是 ejs 在 express 3.x 下将继续具有相同的行为。

> **注意：**将我的评论变成了答案，因为它是针对您的问题的

# c++ - 为什么 std::max_element 需要 ForwardIterator？

> ID：12452356
> 
> 赞同：12
> 
> 时间：2012-09-17T02:04:08.263
> 
> 标签：c++, stl, iterator, max, stl-algorithm

C++ 标准库的`max_element`算法需要将迭代器作为输入传递给 model `ForwardIterator`。

我的理解是，通过指定您可以使用 a在同一范围内多次迭代来进行`ForwardIterator`细化。因此，多遍算法需要s。`InputIterator``ForwardIterator``ForwardIterator`

但是，`max_element`它不是多遍算法 - 在一个范围内迭代一次以确定其最大元素就足够了。那么为什么`max_element`需要额外的能力`ForwardIterator`呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T02:07:31.240

`std::max_element`返回最大元素的迭代器。如果您提供一个单遍范围，则该迭代器将不再有效，因为算法必须在该范围上执行完整遍。

在单个通过范围内，您不能将可用的迭代器保留为先前的值。这是由于`++r`标准中表 107 中给出的后置条件：

> post: 之前的值的任何副本`r`都不再需要是可解引用的或在 的域中`==`。

基本上，单次通过范围是在您通过它时“消失”的范围，并且`std::max_element`需要一个持续存在的范围以便将迭代器返回到（可能）它的中间。

可以编写一种算法来计算返回实际最大值的最大值而不是迭代器，但这需要这些值是可复制的，以便按值返回。Movable 是不够的，因为移动会阻止使用 const 迭代器。通过引用返回也不是一种选择，因为这意味着范围实际上会停留在附近。

# ios - 旋转 UIImage 单点触控

> ID：12452358
> 
> 赞同：4
> 
> 时间：2012-09-17T02:04:20.827
> 
> 标签：ios, xamarin.ios

我正在尝试将图像从手机上传到我的网络服务，并注意到上传图像时图像方向丢失。在上传之前我需要做些什么来确保图像以正确的方向上传吗？

我还查看了其他地方，找到了用于旋转图像的 Objective-C 代码，我将其转换为 C#，但是每次使用旋转方法时，图像都会变黑，即我猜什么都没有显示。

我附上我的代码供您参考，如果有人能告诉我我做错了什么，我将非常非常感激。谢谢！

```
 public static UIImage RotateImage(this UIImage image)
    {
        UIImage imageToReturn = null;
        if(image.Orientation == UIImageOrientation.Up)
        {
            imageToReturn = image;
        }
        else 
        {
            CGAffineTransform transform = CGAffineTransform.MakeIdentity();

            switch (image.Orientation) {
                case UIImageOrientation.Down:
                case UIImageOrientation.DownMirrored:
                    transform.Translate(image.Size.Width, image.Size.Height);
                    transform.Rotate((float)Math.PI);
                    break;

                case UIImageOrientation.Left:
                case UIImageOrientation.LeftMirrored:
                    transform.Translate(image.Size.Width, 0);
                    transform.Rotate((float)Math.PI/2);
                    break;

                case UIImageOrientation.Right:
                case UIImageOrientation.RightMirrored:
                    transform.Translate(0, image.Size.Height);
                    transform.Rotate((float)-Math.PI/2);
                    break;
                case UIImageOrientation.Up:
                case UIImageOrientation.UpMirrored:
                    break;
            }

            switch (image.Orientation) {
                case UIImageOrientation.UpMirrored:
                case UIImageOrientation.DownMirrored:
                    transform.Translate(image.Size.Width, 0);
                    transform.Scale(-1, 1);
                    break;

                case UIImageOrientation.LeftMirrored:
                case UIImageOrientation.RightMirrored:
                    transform.Translate(image.Size.Height, 0);
                    transform.Scale(-1, 1);
                    break;
                case UIImageOrientation.Up:
                case UIImageOrientation.Down:
                case UIImageOrientation.Left:
                case UIImageOrientation.Right:
                    break;
            }

            //now draw image
            using(var context = new CGBitmapContext(IntPtr.Zero,
                                                    (int)image.Size.Width, 
                                                    (int)image.Size.Height, 
                                                    image.CGImage.BitsPerComponent,
                                                    image.CGImage.BytesPerRow,
                                                    image.CGImage.ColorSpace,
                                                    image.CGImage.BitmapInfo)){
                context.ConcatCTM(transform);
                switch (image.Orientation) 
                {
                    case UIImageOrientation.Left:
                    case UIImageOrientation.LeftMirrored:
                    case UIImageOrientation.Right:
                    case UIImageOrientation.RightMirrored:
                        // Grr...
                        context.DrawImage(new RectangleF(PointF.Empty,new SizeF(image.Size.Height, image.Size.Width)), image.CGImage);
                        break;
                    default:
                        context.DrawImage(new RectangleF(PointF.Empty, new SizeF(image.Size.Width, image.Size.Height)), image.CGImage);
                        break;
                }

                using(var imageRef = context.ToImage())
                {
                    imageToReturn = new UIImage(imageRef);
                }
            }
        }

        return imageToReturn;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:41:39.173

你得到黑色图像的原因是翻译和旋转调用是向后的。iPod/iphone 上的正常人像图片是“右”方向。转换它们的正确代码使用：

```
 case UIImageOrientation.Right:
        case UIImageOrientation.RightMirrored:
            transform.Rotate (-(float)Math.PI / 2);
            transform.Translate (0, input.Size.Height);
            break; 
```

变换函数是顺序相关的。此代码将其旋转到正确的方向，但由于旋转大约是左下角的 0,0 坐标，因此图像现在刚好离开框架的底部。然后翻译将它推到它所属的位置。

原始代码将侧向图像推离框架顶部，然后旋转将转动物体，使图像向右转，但远离框架右侧。

使用较小的高度值，如 100 或 200 和 pi/4 将很容易显示更改这些函数的顺序时得到的差异，因为某些原始图像将始终可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-24T11:57:56.393

使用@Random 提供的信息，我更正了原始代码以使其正常工作：

```
 private byte[] RotateImage(UIImage image)
    {
        UIImage imageToReturn = null;
        if (image.Orientation == UIImageOrientation.Up)
        {
            imageToReturn = image;
        }
        else
        {
            CGAffineTransform transform = CGAffineTransform.MakeIdentity();

            switch (image.Orientation)
            {
                case UIImageOrientation.Down:
                case UIImageOrientation.DownMirrored:
                    transform.Rotate((float)Math.PI);
                    transform.Translate(image.Size.Width, image.Size.Height);
                    break;

                case UIImageOrientation.Left:
                case UIImageOrientation.LeftMirrored:
                    transform.Rotate((float)Math.PI / 2);
                    transform.Translate(image.Size.Width, 0);
                    break;

                case UIImageOrientation.Right:
                case UIImageOrientation.RightMirrored:
                    transform.Rotate(-(float)Math.PI / 2);
                    transform.Translate(0, image.Size.Height);
                    break;
                case UIImageOrientation.Up:
                case UIImageOrientation.UpMirrored:
                    break;
            }

            switch (image.Orientation)
            {
                case UIImageOrientation.UpMirrored:
                case UIImageOrientation.DownMirrored:
                    transform.Translate(image.Size.Width, 0);
                    transform.Scale(-1, 1);
                    break;

                case UIImageOrientation.LeftMirrored:
                case UIImageOrientation.RightMirrored:
                    transform.Translate(image.Size.Height, 0);
                    transform.Scale(-1, 1);
                    break;
                case UIImageOrientation.Up:
                case UIImageOrientation.Down:
                case UIImageOrientation.Left:
                case UIImageOrientation.Right:
                    break;
            }

            //now draw image
            using (var context = new CGBitmapContext(IntPtr.Zero,
                                                    (int)image.Size.Width,
                                                    (int)image.Size.Height,
                                                    image.CGImage.BitsPerComponent,
                                                    image.CGImage.BytesPerRow,
                                                    image.CGImage.ColorSpace,
                                                    image.CGImage.BitmapInfo))
            {
                context.ConcatCTM(transform);
                switch (image.Orientation)
                {
                    case UIImageOrientation.Left:
                    case UIImageOrientation.LeftMirrored:
                    case UIImageOrientation.Right:
                    case UIImageOrientation.RightMirrored:
                        // Grr...
                        context.DrawImage(new RectangleF(PointF.Empty, new SizeF((float)image.Size.Height, (float)image.Size.Width)), image.CGImage);
                        break;
                    default:
                        context.DrawImage(new RectangleF(PointF.Empty, new SizeF((float)image.Size.Width, (float)image.Size.Height)), image.CGImage);
                        break;
                }

                using (var imageRef = context.ToImage())
                {
                    imageToReturn = new UIImage(imageRef);
                }
            }
        }

        using (NSData imageData = imageToReturn.AsJPEG())
        {
            Byte[] byteArray = new Byte[imageData.Length];
            System.Runtime.InteropServices.Marshal.Copy(imageData.Bytes, byteArray, 0, Convert.ToInt32(imageData.Length));
            return byteArray;
        }
    } 
```

非常有用的一段代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T09:34:54.863

我通过[这个问题找到](https://stackoverflow.com/questions/4739231/uiimage-data-always-in-landscape-mode)[了这个要点](https://gist.github.com/nicwise/890460)。希望这段代码对你有用！

# permissions - 使用 Drupal 7 VBO 和规则组件操作集取消阻止用户 - 权限不足

> ID：12452361
> 
> 赞同：1
> 
> 时间：2012-09-17T02:05:54.600
> 
> 标签：permissions, drupal-7, drupal-views

当用户加入我正在创建的站点时，他们的帐户被阻止。

我想让具有特殊角色（用户管理员）的用户能够批准这些新用户，但我不想向该用户授予可能影响其他用户和用户数据的全局权限。

我创建了一个带有 VBO 的视图，该视图访问了一个规则组件操作集，该操作集只是取消阻止它传递的用户。但是，运行此操作会导致以下消息：

*由于权限不足，跳过了在用户新用户上激活用户。*

为了使操作成功运行，我必须授予用户管理员角色**管理用户**权限。但是，一旦我这样做了，我的用户管理员就能够处理比我希望他们能够做的更多的事情（包括阻止用户和更改用户数据）。

我尝试使用 Actions 权限模块来提供此操作的权限，但作为一个规则组件，它没有被列出（自述文件表明有一个打开的功能请求来添加此功能，*但查看它，它已经在规则中实施，并且似乎使我能够限制组件的使用，我已经这样做了，但如果用户无权执行这些操作，则不允许对操作进行更改 -即，我想要一种 sudo 形式，如果你愿意的话*）。

如果有的话，我有什么选择？

# c++ - 如何在 MFC 中快速闪烁标题栏

> ID：12452363
> 
> 赞同：0
> 
> 时间：2012-09-17T02:05:57.607
> 
> 标签：c++, mfc

I want to replicate the behaviour that you get when you try to click outside a modal dialog such as created by AfxMessageBox(). The title bar flashes rapdily several times, and a beep sounds. Using CWnd::FlashWindow() I can only get one or two very slow flashes. What is the missing link?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:18:30.403

查看[文档](http://msdn.microsoft.com/en-us/library/as6dxfy6%28v=vs.80%29.aspx)，我发现`CWnd::FlashWindowEx`它可以让您指定每次闪光之间的超时时间。如果您希望五次闪烁总共花费一秒，请将超时值（毫秒）指定为 200，将闪烁次数指定为 5。

```
windowObject.FlashWindowEx(FLASHW_CAPTION, 5, 200); 
```

对于哔声，您可以执行类似于 native 的操作[`MessageBeep`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680356%28v=vs.85%29.aspx)：

```
MessageBeep(MB_OK); 
```

# c++ - 从函数参数 const string(&) 设置值

> ID：12452367
> 
> 赞同：1
> 
> 时间：2012-09-17T02:06:41.463
> 
> 标签：c++

非常noobish，简单的问题，希望有一个简单的答案。我的问题基本上归结为函数参数上的一行代码：

```
void className::read(const string &)
{
  ifstream fin;
  fin.open(fname);
  /* ...function code */
  fin.close()
} 
```

输入在 main 中建立为字符串 fname (ie `object.read(fname)`)。当我这样做时，它告诉我 fname 尚未在此范围内声明。因此，我的问题是如何使用输入 fname 作为 fin.open() 中的文件名。感谢所有已经帮助过的人，并为之前对这个问题的糟糕解释感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:11:14.163

如果 fname 可以很好地引用函数参数，因为它有一个 const 修饰符。所以你必须删除 const 修饰符。一旦完成，就像分配给任何其他变量一样。

但是，如果您的意思是在函数中使用 fname 的值，那就更简单了，您只需创建一个新变量并分配它：

```
std::string newVariable = fname; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:13:33.973

我可能过于简单化了，但这就是你想要的吗？的命名参数`fname`？

```
void className::read(const string& fname)
{
  printf(fname.c_str()); // Do what you want with the string.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T02:16:52.127

我不确定我是否理解你的问题。您是在问是否可以`fname`在函数内进行修改？如果这是您想要的，您需要修改`read`函数的签名以获取非常量引用。

```
void className::read( string& fname )
{
  fname = "something else";  // this change is visible even after the 
                             // function returns
} 
```

或者您是在问如何创建一个本地字符串，它是 的副本`fname`？

```
void className::read( const string& fname )
{
  std::string local = fname;  // local contains a copy of fname
} 
```

# php - 增加实时视图计数的最快方法是什么？

> ID：12452369
> 
> 赞同：2
> 
> 时间：2012-09-17T02:06:53.400
> 
> 标签：php, mysql, performance

我经营一个网站，上面有视频。我想要一个所有用户随时都可以使用的每个视频的观看次数。

通常我会使用以下内容：

```
UPDATE videos SET views = views+1 WHERE id = ... 
```

有没有更快和/或更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:10:57.500

除非您使用事务/锁来处理它们，否则这种特定方式会受到并发错误的影响。

我会更倾向于命中计数，例如：

```
INSERT DELAYED INTO video_hits (video_id, time) VALUES (:video_id, NOW()); 
```

这样，您可以获得计数，还可以获得一段时间内的观看次数统计信息。

注意：这`DELAYED`仅适用于 MyISAM，这很好，因为它会立即返回，并且`COUNT(*)`在 MyISAM 表上速度很快。对于 InnoDB，您可以省略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:15:43.447

是的。使用 Memcached。 [http://www.php.net/manual/en/memcached.increment.php](http://www.php.net/manual/en/memcached.increment.php)

然后编写一个 cron 脚本，它会不时将更改的值写入表中，以防万一。我不认为查看次数是一个特别重要的信息——在服务器崩溃的情况下丢失几分钟的数据应该没问题。

Redis 也是一种选择，尽管它更难设置。作为奖励，您将获得持久性和排序集，因此根本不需要涉及 MySQL。

如果您确实需要将 MySQL 与 InnoDB 一起使用，您唯一的选择就是摆弄 . `innodb_flush_log_at_trx_commit`，但这有点危险。MyISAM 根本不起作用（每次写入都会锁定整个表）。

# grails - Grails Spring 安全引导

> ID：12452377
> 
> 赞同：0
> 
> 时间：2012-09-17T02:08:13.173
> 
> 标签：grails, spring-security, grails-plugin

我在`Grails 2.1.1`和`Spring Security Core Plugin 1.2.7.3`。

我正在尝试将角色分配给用户`BootStrap.groovy`并保留这些分配。我在 BootStrap 中创建了我的角色和管理员用户。

我找到了以下博客文章：[为 Spring Security 创建用户角色](http://mrhaki.blogspot.com/2009/03/create-userroles-for-spring-security.html)

当我尝试这种方法时，我得到：

> 2012-09-16 22:00:56,762 错误 [org.codehaus.groovy.grails.web.context.GrailsContextLoader] 执行引导程序时出错：
> 
> groovy.lang.MissingMethodException：没有方法签名：User.addToAuthorities() 适用于参数类型：（角色）值：可能的解决方案：getAuthorities()

我也试过

```
class BootStrap {

    def init = { servletContext ->
        ....
        admin.getAuthorities().add(adminRole) 
        admin.save(flush: true)
        ....
    }
} 
```

但是，当我检查`user_role`表时，它是空的（我检查了管理员用户和管理员角色的条目在各自的用户和角色表中，而不是关联）。

任何人都可以为我提供一些关于我做错了什么的指导或见解吗？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:34:23.587

该博客文章已有 3 年历史，并且在两个方面对于当前插件是错误的。一，不要对密码进行编码，它在 User 类中为您完成。还有两个（您现在看到的问题）不调用集合方法（addTo、removeFrom），因为不使用集合。`UserRole.create admin, adminRole`按照插件文档中的说明调用：http: [//grails-plugins.github.com/grails-spring-security-core/docs/manual/index.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/index.html)（特别是第 23.1 节中的教程）。

# uml - 处理组合或聚合的办公室

> ID：12452380
> 
> 赞同：1
> 
> 时间：2012-09-17T02:08:35.050
> 
> 标签：uml, class-diagram

我试图理解组合和聚合之间的区别，到目前为止我所理解的关键区别在于对象的生命周期。

那么如果我有一个办公室和一个地址类，那么关系是类图中的组合还是聚合？

我对这个概念很陌生。任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:56:37.727

定义 OMG UML 上层结构规范的关键特性是

在组合中，对象的生命周期受容器的限制。

在聚合中，对象的生命周期是相互独立的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:06:00.730

在两个类之间具有聚合关系意味着该类的对象包含其他类的一个或多个对象。示例：部门-员工。一个部门包含多名员工。

组合关系本身就是一种聚合关系。除了上述之外，它还说整体和部分的生命周期是紧密耦合的。即整体不能没有部分而存在，部分不能没有整体而存在。示例：办公室-部门。办公室没有部门就无法存在，而没有办公室的部门也没有任何意义。部门-员工不是复合关系，因为员工可以轻松地辞掉工作、退休或被公共汽车碾过，而不会影响公司。公司可能会破产，员工仍然可以继续生活。

在您的示例中，我会说，办公室地址关系既不是聚合也不是组合，因为一个不包含另一个。这是一个相当简单的关联（两端没有菱形）。

# python - 谷歌应用引擎文件上传

> ID：12452385
> 
> 赞同：0
> 
> 时间：2012-09-17T02:09:09.210
> 
> 标签：python, google-app-engine, file-upload

我希望能够将文件上传到我的 python 脚本同一目录下的文件夹中，这与使用 php 的方式非常相似。我尝试使用 blobstore，但该文件没有出现在与我的文件相同的目录中（或者如果出现了，我没有看到它），这对于我的应用程序来说是必须的。

那么，如何将文件上传到文件夹中的文件夹，即与我的 python 脚本位于同一目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:38:58.323

GAE 文件系统是只读的，不能写入。只能通过项目更新过程 ( `appcfg`) 更改文件。

所以你试图做的事情是不可能的。

如果您正在寻找一种动态上传 python 代码并执行它的方法，那么这是可能的：[https ://stackoverflow.com/a/3506164/248432](https://stackoverflow.com/a/3506164/248432)

# c - 使用opnet进行协同仿真的问题

> ID：12452387
> 
> 赞同：1
> 
> 时间：2012-09-17T02:09:17.120
> 
> 标签：c

请在我编译我的 C 程序（VC++ 6.0）时回答我这个错误非常感谢，我将不胜感激。注意：我的程序是通过使用外部协同仿真在 OPNET modeler 14.5 和 VC++ 之间执行协同仿真控制器 C 程序 .... 我在 SD 文件中将 use_esa_main 设置为“是”。所以，我需要一个 .dll 文件。但是当我使用 VC++ 生成 .dll 文件时，错误来自：

```
正在链接...
   创建库 Debug/ESA_DLL.lib 和对象 Debug/ESA_DLL.exp$ESA_DLL.OBJ : 错误
LNK2001：未解析的外部符号 __imp__Esa_Interface_Value_Set$ESA_DLL.OBJ：错误
LNK2001：未解析的外部符号 __imp__Esa_Interface_Value_Get$ESA_DLL.OBJ：错误
LNK2001：未解析的外部符号 __imp__Esa_Execute_Until$ESA_DLL.OBJ：错误
LNK2001：未解析的外部符号 __imp__Esa_Interface_Callback_Register$ESA_DLL.OBJ：错误
LNK2001：未解析的外部符号 __imp__Esa_Interface_Group_Get$ESA_DLL.OBJ：错误
LNK2001：未解析的外部符号 __imp__Esa_Load$ESA_DLL.OBJ：错误
LNK2001：无法解析的外部符号 __imp__Esa_Init$Debug/ESA_DLL.dll：致命错误
LNK1120：8 个未解决的外部 $ 执行 link.exe 时出错。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:13:59.300

您需要将 Opnet 库添加到您的 C 程序中以进行协同仿真，即 opsim.lib，这些错误将消失

# sql - Postgres 中 LIKE 和 ~ 的区别

> ID：12452395
> 
> 赞同：94
> 
> 时间：2012-09-17T02:11:31.800
> 
> 标签：sql, regex, postgresql, syntax

我被指示“不要打扰`LIKE`”并`~`改为使用。有什么问题，有什么`LIKE`不同`~`？

在这种情况下是否`~`有名称或人们是否说“使用波浪号运算符”？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-17T02:16:06.550

`~`是正则表达式运算符，并具有其中隐含的功能。您可以指定全范围的正则表达式通配符和量词；有关详细信息，请参阅[文档](https://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)。它肯定比 更强大`LIKE`，并且应该在需要该功能时使用，但它们用于不同的目的。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-17T02:32:46.803

没有任何问题，`LIKE`而且，IMO，没有理由赞成`~`它。而是相反。[`LIKE`](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-LIKE)是 SQL 标准的。也是[`SIMILAR TO`](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP)，但它没有得到广泛支持。PostgreSQL [`~ operator`](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)（或*posix 正则表达式匹配运算符*）不是 SQL 标准。

出于这个原因，我更喜欢`LIKE`在表达能力足够的地方使用，并且我只`~`在需要完整正则表达式的功能时使用。如果我需要移植数据库，那就少了一件伤害的事情。我倾向于使用`SIMILAR TO`when`LIKE`不够强大，但在 Erwin 的评论之后，我想我会停止这样做并使用`~`when`LIKE`不能完成这项工作。

此外，PostgreSQL 可以使用 b-tree 索引进行前缀搜索（例如`LIKE 'TEST%'`），`LIKE`如果`SIMILAR TO`数据库位于区域设置中`C`或索引具有 `text_pattern_ops`与我之前写的相反，Pg 也可以将这样的索引用于左锚定的 posix 正则表达式，它只需要一个显式的 '^TEST.*' 所以正则表达式只能从头开始匹配。我之前的帖子错误地指出`~`不能使用索引进行前缀搜索。消除了这种差异，这实际上取决于您是否要尽可能地坚持标准兼容功能。

请参阅[此演示 SQLFiddle](http://sqlfiddle.com/#!1/4bad6/9)；注意不同的执行计划。`~ '1234.*'`注意和之间的区别`~ '^1234.*'`。

给定样本数据：

```
create table test (
   blah text
);
insert into test (blah)  select x::text from generate_series(1,10000) x;
create index test_blah_txtpat_idx ON test(blah text_pattern_ops); 
```

请注意，`~`即使使用 seqscan 的成本要高得多（人为地因为 seqscan），因为它在使用索引`enable_seqscan`时别无选择。`LIKE`但是，使用左锚的更正`~`也使用索引：

```
regress=# SET enable_seqscan = 'f';
SET
regress=# explain select 1 from test where blah ~ '12.*';
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Seq Scan on test  (cost=10000000000.00..10000000118.69 rows=2122 width=0)
   Filter: (blah ~ '12.*'::text)
(2 rows)
regress=# explain select 1 from test where blah like '12%';
                                     QUERY PLAN                                     
------------------------------------------------------------------------------------
 Bitmap Heap Scan on test  (cost=4.55..46.76 rows=29 width=0)
   Filter: (blah ~~ '12%'::text)
   ->  Bitmap Index Scan on test_blah_txtpat_idx  (cost=0.00..4.54 rows=29 width=0)
         Index Cond: ((blah ~>=~ '12'::text) AND (blah ~<~ '13'::text))
(4 rows)
regress=# explain select 1 from test where blah ~ '^12.*';
                                     QUERY PLAN                                      
-------------------------------------------------------------------------------------
 Bitmap Heap Scan on test  (cost=5.28..51.53 rows=101 width=0)
   Filter: (blah ~ '^12.*'::text)
   ->  Bitmap Index Scan on test_blah_txtpat_idx  (cost=0.00..5.25 rows=100 width=0)
         Index Cond: ((blah ~>=~ '12'::text) AND (blah ~<~ '13'::text))
(4 rows) 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-09-17T12:57:02.827

### 概述

`LIKE`,`SIMILAR TO`并且是[PostgreSQL](https://www.postgresql.org/docs/current/functions-matching.html)`~`中的基本模式匹配运算符。

如果可以，请使用**`LIKE`**( **`~~`**)，它是最快和最简单的。
如果不能，请使用正则表达式 ( **`~`**)，它更强大。
从不用户~~**`SIMILAR TO`**~~. 这是毫无意义。见下文。

安装[附加模块 pg_trgm](https://www.postgresql.org/docs/current/pgtrgm.html)添加高级索引选项和[相似性运算符**`%`**](https://www.postgresql.org/docs/current/pgtrgm.html#PGTRGM-OP-TABLE)。
还有带有自己的基础设施和[运营商](https://www.postgresql.org/docs/current/functions-textsearch.html#TEXTSEARCH-OPERATORS-TABLE)（等等）的[文本搜索。](https://www.postgresql.org/docs/current/functions-textsearch.html)[**`@@`**](https://www.postgresql.org/docs/current/functions-textsearch.html#TEXTSEARCH-OPERATORS-TABLE)

这些运算符中的每一个都可以在不同程度上使用索引支持。它经常胜过其他选项的性能。但是在细节上还有很大的余地，即使有索引。

### 索引支持

***如果没有*pg_trgm**，则只有*左锚定*搜索模式的索引支持。如果您的数据库集群使用非 C 语言环境（典型情况）运行，您需要一个[带有特殊运算符类](https://www.postgresql.org/docs/current/indexes-opclass.html)的索引，例如`text_pattern_ops`or`varchar_pattern_ops`。它也支持基本的左锚定正则表达式。例子：

```
CREATE TABLE tbl(string text);

INSERT INTO  tbl(string)
SELECT x::text FROM generate_series(1, 10000) x;

CREATE INDEX tbl_string_text_pattern_idx ON tbl(string text_pattern_ops);

SELECT * FROM tbl WHERE string ~ '^1234';  -- left anchored pattern 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=37cdd0c124d38a91de2795ef5e371151)*

***安装pg_trgm*后**，GIN 或 GiST 索引可以使用操作符类`gist_trgm_ops`或`gin_trgm_ops`. 这些索引支持*任何* `LIKE`表达式，而不仅仅是左锚定。并且，[引用手册：](https://www.postgresql.org/docs/current/pgtrgm.html#id-1.11.7.40.7)

> 从 PostgreSQL 9.3 开始，这些索引类型也支持正则表达式匹配的索引搜索。

细节：

*   [PostgreSQL LIKE 查询性能变化](https://stackoverflow.com/questions/1566717/postgresql-like-query-performance-variations/13452528#13452528)

* * *

**`SIMILAR TO`**是一个非常奇怪的结构。PostgreSQL 只实现它，因为它是在 SQL 标准的早期版本中定义的。在内部，每个`SIMILAR TO`表达式都用正则表达式重写。因此，对于任何给定的表达式，至少有一个正则表达式*可以更快*`SIMILAR TO`地完成相同的工作。我***从不***使用.***`SIMILAR TO`***

 ***进一步阅读：

*   [在 PostgreSQL 中使用 LIKE、SIMILAR TO 或正则表达式进行模式匹配](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql/10696#10696)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-17T02:15:40.807

[运算符`~~`等价于。`LIKE`](http://www.postgresql.org/docs/current/static/functions-matching.html) `~`另一方面，[将使用 POSIX 正则表达式进行匹配](http://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-06T19:33:41.833

*我只是做了一个快速简单的基准测试，以查看不涉及索引时*两个运算符之间的性能差异：

```
postgres=# \timing
Timing is on.
postgres=# SELECT count(1) FROM (SELECT val from generate_series(1, 10000000) x(val) WHERE val::text LIKE '%5%') AS x;
  count
─────────
 5217031
(1 row)

Time: 5631.662 ms
postgres=# SELECT count(1) FROM (SELECT val from generate_series(1, 10000000) x(val) WHERE val::text ~ '5') AS x;
  count
─────────
 5217031
(1 row)

Time: 10612.406 ms 
```

在这个例子中，`LIKE`算子的速度几乎是算子的两倍`~`。因此，如果速度至关重要，我会倾向于`LIKE`，但要注意不要过早优化。`~`给你更多的灵活性。

对于那些有兴趣的人，`EXPLAIN`以下是上述查询的计划：

```
postgres=# EXPLAIN ANALYZE SELECT count(1) FROM (SELECT val from generate_series(1, 10000000) x(val) WHERE val::text LIKE '%5%') AS x;
                                                              QUERY PLAN
──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 Aggregate  (cost=20.00..20.01 rows=1 width=0) (actual time=9967.748..9967.749 rows=1 loops=1)
   ->  Function Scan on generate_series x  (cost=0.00..17.50 rows=1000 width=0) (actual time=1732.084..7404.755 rows=5217031 loops=1)
         Filter: ((val)::text ~~ '%5%'::text)
         Rows Removed by Filter: 4782969
 Total runtime: 9997.587 ms
(5 rows)

postgres=# EXPLAIN ANALYZE SELECT count(1) FROM (SELECT val from generate_series(1, 10000000) x(val) WHERE val::text ~ '5') AS x;
                                                              QUERY PLAN
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 Aggregate  (cost=20.00..20.01 rows=1 width=0) (actual time=15118.061..15118.061 rows=1 loops=1)
   ->  Function Scan on generate_series x  (cost=0.00..17.50 rows=1000 width=0) (actual time=1724.591..12516.996 rows=5217031 loops=1)
         Filter: ((val)::text ~ '5'::text)
         Rows Removed by Filter: 4782969
 Total runtime: 15147.950 ms
(5 rows) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-08-30T15:15:05.577

Like 只是在开头或结尾或中间匹配字符串的一部分而倾斜 (~) 与正则表达式匹配

为了进一步解释这一点，让我们创建一个表并插入一些值

```
# create table users(id serial primary key, name character varying); 
```

现在让我们在表中插入一些值

```
# insert into users (name) VALUES ('Alex'), ('Jon Snow'), ('Christopher'), ('Arya'),('Sandip Debnath'), ('Lakshmi'),('alex@gmail.com'),('@sandip5004'), ('lakshmi@gmail.com'); 
```

现在你的桌子应该是这样的

```
 id |       name        
----+-------------------
  1 | Alex
  2 | Jon Snow
  3 | Christopher
  4 | Arya
  5 | Sandip Debnath
  6 | Lakshmi
  7 | alex@gmail.com
  8 | lakshmi@gmail.com
  9 | @sandip5004 
```

## 案例喜欢

```
# select * from users where name like 'A%';
 id | name 
----+------
  1 | Alex
  4 | Arya
(2 rows) 
```

如您所见 `'A%'`，我们只会得到名称以大写 A 开头的值。

```
# select * from users where name like '%a%';
 id |       name        
----+-------------------
  4 | Arya
  5 | Sandip Debnath
  6 | Lakshmi
  7 | alex@gmail.com
  8 | lakshmi@gmail.com 
```

如您所见 `'%a%'`，我们只会得到名称`a`介于名称之间的值。

```
# select * from users where name like '%a';

 id | name 
----+------
  4 | Arya 
```

如您所见 `'%a'`，我们只会得到名称以 . 结尾的值`a`。

## 案例~（倾斜）

```
# select * from users where name ~* 't';
 id |      name      
----+----------------
  3 | Christopher
  5 | Sandip Debnath 
```

正如你所看到 `name ~* 't'`的，我们只会得到名字有的值`t`。 `~`表示区分大小写， ~* 表示不区分大小写，所以

```
# select * from users where name ~ 'T';
 id | name 
----+------
(0 rows) 
```

上面的查询给了我们 0 行，因为`T`没有与任何条目匹配

现在让我们考虑一种情况，我们只需要获取电子邮件 ID，我们不知道邮件 ID 有什么，但我们知道电子邮件的模式，即会有一些字母或数字或 _ 或 。或 - 然后是 @，然后是更多的字母或数字或 - 然后。然后`com`或`in`或`org` `etc`我们可以使用正则表达式创建模式。

现在让我们尝试使用正则表达式获取结果

```
# select * from users where name ~* '[a-z0-9\.\-\_]+@[a-z0-9\-]+\.[a-z]{2,5}';
 id |       name        
----+-------------------
  7 | alex@gmail.com
  8 | lakshmi@gmail.com 
```

同样，我们可以获取一些中间有空格的名称

```
#select * from users where name ~* '[a-z]+\s[a-z]+';
 id |      name      
----+----------------
  2 | Jon Snow
  5 | Sandip Debnath 
```

[az]+ 表示可以有从 a 到 z 的任何字母，+ 表示它可能出现 1 次或多次，\s 表示之后之间会有一个空格，然后是一组可以出现 1 次或多次的字母次。

希望这个详细的分析有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-17T02:32:27.940

是的，它代表 POSIX 正则表达式。另一种选择是使用带有“SIMILAR TO”运算符的正则表达式的 SQL 标准方法，虽然它提供了更有限的一组功能，但可能更容易理解。我认为这是 dba 交换的一个很好的参考： [https ://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql)***

# sql - SQL - 按总计对结果进行分组

> ID：12452396
> 
> 赞同：1
> 
> 时间：2012-09-17T02:11:35.130
> 
> 标签：sql, oracle

下面的查询给了我两列的输出：

```
Day Num_Users_Retained
0   209312
1   22139
2   11457 
```

依此类推，一直到 259（2012 年的每一天）..但是我希望第 0 天包含 num_users_retained 中从 0 到 259 的所有值的总和...然后我希望第 1 天包含从 1 到 259 的所有值的总和，依此类推，直到我到达最后一天。这是原始查询：

```
--Retention since January 1,2012--
select retention as Day,count(retention) as Num_Users_Retained
from (select player_id,round(init_dtime-create_dtime,0) as retention
from player
where Trunc(Create_Dtime) >= To_Date('2012-jan-01','yyyy-mon-dd')
and init_dtime is not null)
Group by retention
order by 1 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:12:38.420

使用分析函数

```
select
    day,
    num_users_retained,
    sum(num_users_retained) over (order by day) as total_num_users_retained
from churn 
```

[http://www.sqlfiddle.com/#!4/24e02/1](http://www.sqlfiddle.com/#!4/24e02/1)

此查询写入您的结果集。您可以将其应用于您的原始查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:02:34.350

```
select retention as Day
     , Sum(count(retention)) over(order by retention desc) as Num_Users_Retained
 from (select player_id
            , round(init_dtime-create_dtime,0) as retention
        from player
       where Trunc(Create_Dtime) >= To_Date('2012-jan-01','yyyy-mon-dd')
         and init_dtime is not null
       )
Group by retention
order by retention 
```

# java - 对 OSGi kf 框架的引导类路径扩展支持

> ID：12452397
> 
> 赞同：1
> 
> 时间：2012-09-17T02:11:50.387
> 
> 标签：java, osgi, knopflerfish

kf 框架是否支持引导类路径扩展？如果支持，我该如何配置以将属性设置为始终为真？

我尝试将 org.osgi.supports.bootclasspath.extension 属性设置为 true 但无济于事。

从下面提取的代码（取自 FWProps.java，initProperties 方法）中，似乎该属性将始终设置为 false，除非它不是第一个与代码中的注释相矛盾的框架。

```
// Only first framework can support bootclasspath extension 
// NYI! Improve this in the future 
if(getBooleanProperty(Constants.SUPPORTS_BOOTCLASSPATH_EXTENSION) &&
   !(getClass().getClassLoader() instanceof URLClassLoader && fwCtx.id == 1))
{
    props.put(Constants.SUPPORTS_BOOTCLASSPATH_EXTENSION, FALSE); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:31:56.177

您不能设置该属性。该属性是告诉您它支持引导类路径扩展的框架。大多数常用框架不支持它，因为它需要特殊编码才能与 JVM 集成。设置 bootclasspath 不是 JVM 的标准选项，以及如何重新启动 JVM 以使更改生效。因此，它需要为特定的 JVM 和可能的部署定制框架实现。

# ember.js - Ember.Router 无法响应状态为 root.paginated 的事件 paginateUsers

> ID：12452399
> 
> 赞同：2
> 
> 时间：2012-09-17T02:11:55.887
> 
> 标签：ember.js, ember-old-router

我有一个相当大的例子，但问题是当我第一次过渡到分页路线时 - 一切都很好。但是，如果我尝试单击另一个（启动分页事件），我会收到以下错误

我没有 jsfiddle，因为这是使用 ember-data 并且对象数据绑定到我的 REST 端点。

ember 版本是 pre 1.0，使用最新的 ember-data + handlebars-1.0.0.beta.6 和 jQuery 1.7.2

> 未捕获的错误：无法响应状态为 root.paginated 的事件 paginateUsers。

这是我的模板和 ember 应用程序

```
<script type="text/x-handlebars" data-template-name="person">

<table>
<thead></thead>
<tbody>
   {{#each person in controller.paginatedContent}}
    <tr>
      <td>{{person.id}}</td>
      <td>{{view Ember.TextField valueBinding="person.username"}}</td>
      <td><input type="submit" value="update" {{action updatePerson person}}/></td>
      <td><input type="submit" value="delete" {{action removePerson person}}/></td>
    </tr>
   {{/each}}
</tbody>
</table>
<ul class="pagination gui-text">
  <li name="prev"><span class="paginator" {{action prevPage href=true target="controller"}}>Prev>
  {{#each pages}}
    {{view PersonApp.PaginationItemView contentBinding="this"}}
  {{/each}}
  <li name="next"><span class="paginator" {{action nextPage href=true target="controller"}}>Next>
</ul></li>

</script>

<script type="text/x-handlebars" data-template-name="pagination_item">

{{#with view}}
<a {{action paginateUsers content href=true}}>
  <span {{bindAttr class="spanClasses isActive:active"}}>{{content.page_id}}</span>
</a>
{{/with}}

</script>

PersonApp = Ember.Application.create({});

PersonApp.ApplicationController = Ember.ObjectController.extend({});

PersonApp.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

PersonApp.PersonView = Ember.View.extend({
  templateName: 'person',
  addPerson: function(event) {
    var username = event.context.username;
    if (username) {
      this.get('controller.target').send('addPerson', username);
      event.context.set('username', '');
    }
  }
});

PersonApp.Person = DS.Model.extend({
  id: DS.attr('number'),
  username: DS.attr('string')
});

PersonApp.Store = DS.Store.extend({
  revision: 4,
  adapter: DS.DjangoRESTAdapter.create({
    bulkCommit: false,
    plurals: {
      person: 'people'
    }
  })
});

PersonApp.PaginationItemView = Ember.View.extend({
  templateName: 'pagination_item',

  tagName: 'li',
  spanClasses: 'paginator pageNumber',

  isActive: function() {
    var currentPage = this.get('parentView.controller.currentPage');
    var page_id = this.get('content.page_id');

    if(currentPage) {
      return currentPage.toString() === page_id.toString();
    } else {
      return false;
    }
  }.property('parentView.controller.currentPage')
});

PersonApp.PersonController = Ember.ArrayController.extend({
  content: [],
  sortProperties: ['id'],
  pages: function() {
    var availablePages = this.get('availablePages'),
    pages = [],
    page;

    for (i = 0; i < availablePages; i++) {
      page = i + 1;
      pages.push({ page_id: page.toString() });
    }

    return pages;
  }.property('availablePages'),

  currentPage: function() {
    return this.get('selectedPage') || 1;
  }.property('selectedPage'),

  nextPage: function() {
    var availablePages = this.get('availablePages');
    var currentPage = parseInt(this.get('currentPage'), 10);
    var pages = this.get('pages');
    var nextPage;

    nextPage = currentPage + 1;

    if(nextPage > availablePages) {
      nextPage = nextPage - availablePages;
    }

    PersonApp.get('router').send('paginateUsers', pages[nextPage - 1]);
  },

  prevPage: function() {
    var availablePages = this.get('availablePages');
    var currentPage = parseInt(this.get('currentPage'), 10);
    var pages = this.get('pages');
    var nextPage;

    nextPage = currentPage - 1;

    if(nextPage <= 0) {
      nextPage = nextPage + availablePages;
    }

    PersonApp.get('router').send('paginateUsers', pages[nextPage - 1]);
  },

  availablePages: function() {
    var length = this.get('filteredContent.length');
    var itemsPerPage = 2;

    return (length / itemsPerPage) || 1;
  }.property('filteredContent.length'),

  paginatedContent: function() {
    var filteredContent = this.get('filteredContent');
    var selectedPage = this.get('selectedPage') || 1;

    var itemsPerPage = 2;
    var upperBound = (selectedPage * itemsPerPage);
    var lowerBound = (selectedPage * itemsPerPage) - itemsPerPage;

    return this.get('filteredContent').slice(lowerBound, upperBound);
  }.property('selectedPage', 'filteredContent.@each'),

  filteredContent: function() {
    return this.get('content');
  }.property('content.@each')
});

PersonApp.Router = Ember.Router.create({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      paginateUsers: Ember.Route.transitionTo('paginated'),
      addPerson: function(router, username) {
        PersonApp.Person.createRecord({ username: username });
        router.get('store').commit();
      },
      updatePerson: function(router, event) {
        router.get('store').commit();
      },
      removePerson: function(router, event) {
        event.context.deleteRecord();
        router.get('store').commit();
      },
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('person', router.get('store').findAll(PersonApp.Person));
      }
    }),

    paginated: Ember.Route.extend({
      route: '/page/:page_id',

      connectOutlets: function(router, context) {
        router.get('personController').set('selectedPage', context.page_id);
      },

      exit: function(router) {
        router.get('personController').set('selectedPage', undefined);
      }
    })
  })
});

$(function () {
  PersonApp.initialize(PersonApp.Router);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:57:31.143

Your paginated route needs a `paginateUsers` action.

# haskell - 使用 ExistentialQuantification 扩展时派生节目？

> ID：12452400
> 
> 赞同：5
> 
> 时间：2012-09-17T02:11:56.683
> 
> 标签：haskell, existential-type

为什么我不能在这里导出 Show？

```
{-# LANGUAGE ExistentialQuantification #-}
data Obj = forall a. (Show a) => Item_Obj {get :: a, rest :: Obj} | No_Obj deriving Show

xs :: Obj
xs = Item_Obj 1 $ Item_Obj "foo" $ Item_Obj 'c' $ No_Obj

main :: IO ()
main = putStrLn . show $ xs 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T02:35:05.460

haskell-98 数据类型中不允许这种上下文。读[这个](http://www.haskell.org/haskellwiki/GHC/Stand-alone_deriving_declarations)

当然，您可以使用`StandaloneDeriving`扩展编写独立实例，让 ghc 完成其余的工作。

```
deriving instance Show Obj 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T02:31:10.190

基本上是因为当你尝试这样做时，GHC 的头部会爆炸。换句话说，它根本没有被教导如何为存在类型派生实例。等待几个版本号通过，然后重试。

# sql - Sql server rtrim 不适合我，建议？

> ID：12452403
> 
> 赞同：3
> 
> 时间：2012-09-17T02:12:04.577
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我有点惊讶我找不到快速解决我所面临的问题的方法，这似乎是一件很常见的事情。我无法摆脱选择查询中的尾随空格。我想将数据放入 csv 文件中。如果这更容易的话，我很乐意从 SSMS“结果到文本”中复制/粘贴结果。无论哪种方式，我的查询是：

```
declare @maxDate date = (select MAX(TradeDate) from tblDailyPricingAndVol)

select p.Symbol, ','
from tblDailyPricingAndVol p
where p.Volume > 1000000 and p.Clse <= 40 and p.TradeDate = @maxDate
order by p.Symbol 
```

它返回：

```
A       ,
AA      ,
ABB     , 
```

等。 p.Symbol 字段周围的 Rtrim 没有帮助。如果我能找出最佳解决方案，我会得到以下结果：

```
A,AA,ABB 
```

等等。有接盘侠吗？一如既往地提前感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:17:38.103

`p.Symbol`被定义为 CHAR(8)，并且 CHAR 值不能被修剪。在修剪之前转换为 N/VARCHAR(8)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:32:31.390

从您的预期结果来看，您似乎希望将`symbol`所有行中的值连接到一个逗号分隔字符串中。

为了做到这一点，你可以这样做： -

```
DECLARE @str VARCHAR(MAX)
SELECT @str = COALESCE(@str+',' ,'') + LTRIM(RTRIM((p.Symbol)))
FROM tblDailyPricingAndVol p
WHERE p.Volume > 1000000 and p.Clse <= 40 and p.TradeDate = @maxDate
ORDER by p.Symbol
SELECT @str
GO 
```

其他替代方法也可以参考[这里](http://blog.sqlauthority.com/2007/05/06/sql-server-creating-comma-separate-values-list-from-table-udf-sp/)

关于`RTRIM`不工作的问题，这似乎很奇怪。为了安全起见，我已添加`LTRIM + RTRIM`到上述查询中。但是，只要您的`symbol`专栏是某种`varchar`，就真的没有理由`RTRIM`不工作。

你能澄清`symbol`一下表中列的数据类型吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:00:00.510

由于您使用的是 SQL Server 2008，因此您可以这样做：

```
SELECT  STUFF((SELECT ', ' + rtrim(p.Symbol)
          from tblDailyPricingAndVol p FOR XML PATH('')),1,2,'') as Symbol
WHERE    p.Volume > 1000000 
AND      p.Clse <= 40 
AND      p.TradeDate = @maxDate
ORDER BY p.Symbol 
```

# r - 从多个变量中提取列以在 R 中构建一个新变量

> ID：12452405
> 
> 赞同：0
> 
> 时间：2012-09-17T02:12:11.180
> 
> 标签：r

我将一堆 CSV 文件加载到 R 中。我对如何从加载的数据中提取第二列并创建一个新变量有疑问。我想我想知道 R 中是否有任何函数可以将提取行“追加”到这个新变量中。我当前的代码只保留最后一个变量的第二列。很抱歉询问这样的基本操作。

下面是我的 R 代码：

```
filenames=dir() #Scan file names
 for (i in filenames){
  adt = substr(x = i, start = 1, stop = nchar(i)-4)
  name=paste("data_", adt, sep="")
  tmp <- read.csv(i, header=TRUE, sep=",")
  assign(name, tmp, pos=.GlobalEnv)  #save all the imported CSV content
  FB_d <- data.frame(cbind(tmp[,2]))  # I would like add the second column to a new variable, and I failed here...
} 
```

感谢您的任何建议。

# 更新

我试过`FB_d <- cbind(FB_d,tmp2[,1])`了，但由于找不到而出错`'FB_d'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:14:44.263

我会选择更像这样的东西：

```
write.csv(mtcars[1:5,],file = "~/Desktop/folder/file1.csv")
write.csv(mtcars[6:10,],file = "~/Desktop/folder/file2.csv")

setwd("~/Desktop/folder")

f <- list.files("~/Desktop/folder")

dat <- lapply(f,read.csv)
names(dat) <- paste0("data_",substr(f,1,nchar(f)-4))

do.call(cbind,lapply(dat,'[[',2)) 
```

即尽可能使用矢量化和列表结构。另外，我会（暂时）`assign`从你的词汇表中删除。它是一种高级功能，用于在特定情况下非常特殊的用途，不应普遍用于“普通”目的。

我还应该添加一个警告，即`cbind`大量（大）列将很快变得相当慢，该问题的解决方案是首先初始化您的数据结构（预分配），然后分配给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:26:04.903

我喜欢使用这种方法加载 csv，如果不是特别有效的话：

```
fileList = list.files(path='path/to/files', pattern='xxxx.csv') 
FB_d <- vector()
dat<-lapply(fileList,read.csv,header=T,sep = "\t") #and then 
for(i in 1:length(dat)) {
  #do stuff here
  data_from_csv <- as.data.frame(dat[i])

  ##EDIT--adding to vector for each loop
  FB_d <- append(FB_d, data_from_csv[,2])

} 
```

# c# - 在 SLXNA 游戏中制作加载页面 [WP7]

> ID：12452407
> 
> 赞同：0
> 
> 时间：2012-09-17T02:12:29.117
> 
> 标签：c#, windows-phone-7, xna

我正在为 Windows Phone 7 开发游戏，我正在使用版本 SLXNA (Silvelight + XNA) 和我拥有的一切，问题是导航游戏页面 (GamePage.xaml) 需要很多时间，我想制作一个显示“正在加载..”的页面，因为应用程序会一直停留在原处，直到您看到游戏页面。

感谢您的回答。问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:42:25.463

You have a few options:

*   [Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)
*   [BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.95%29.aspx)
*   Async code

It really depends where do you want the loading to happen. Is it a game loop or a SL page. XNA Thread example:

```
 private Thread thread;
    private bool isLoading;
    private void LoadResources()
    {
        // Start loading the resources in an additional thread
        thread = new Thread(new ThreadStart(gameplayScreen.LoadAssets));

        thread.Start();
        isLoading = true;
    } 
```

For example LoadResources method is called when user press tap the screen

```
 if (!isLoading)
        {
            if (input.Gestures.Count > 0)
            {
                if (input.Gestures[0].GestureType == GestureType.Tap)
                {
                    LoadResources();
                }
            }
        } 
```

In the game update loop

```
 if (null != thread)
        {
            // If additional thread finished loading and the screen is not
            // exiting
            if (thread.ThreadState == ThreadState.Stopped && !IsExiting)
            {
               //start the level
            }
        } 
```

It's good idea to show something to the user e.g.

```
 private static readonly string loadingText = "Loading..."; 
```

and in the draw loop

```
 if (isLoading)
        {
            Vector2 size = smallFont.MeasureString(loadingText);
            Vector2 messagePosition = new Vector2(
                (ScreenManager.GraphicsDevice.Viewport.Width - size.X) / 2,
                (ScreenManager.GraphicsDevice.Viewport.Height - size.Y) / 2);
            spriteBatch.DrawStringBlackAndWhite(smallFont, loadingText, messagePosition);
        } 
```

# android - 如何使用 listview 显示 alertdialog？

> ID：12452411
> 
> 赞同：0
> 
> 时间：2012-09-17T02:12:52.313
> 
> 标签：android, eclipse, listview, android-alertdialog

当我点击我的活动的列表视图时，我想显示 alertdialog，我有一个显示 alertdialog 的代码，但我知道我的代码有问题，我不知道如何修复它，警报没有像我想要的那样显示. 这是我的代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    new bike_type_dao(responsetype).view_bike_type();

    final Entity_Brand brand = adapterBrand.getItem(position);

    builder = new Dialog(this);
    builder.setTitle(brand.getBrand_name());
    LayoutInflater li = (LayoutInflater) this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = li.inflate(R.layout.tab_brand_activity, null, false);
    builder.setContentView(view);
    builder.setCancelable(true);

    listtype = (ListView) builder.findViewById(R.id.list_sepeda);
    listtype.setOnItemClickListener((OnItemClickListener) this);
    listtype.setAdapter(new ArrayAdapter<Entity_Bike_Type>(this,
            android.R.layout.simple_list_item_1, arrayList));
    listtype.showContextMenu();

    builder.show();

} 
```

我希望有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:16:50.670

我猜你的活动会扩展`ListActivity`（否则它一开始就没有`onListItemClick`覆盖的方法。

根据 API 文档，当您单击 listView 中的某个项目时，`onListItemClick`会调用该项目。此时，您还将活动设置为`OnItemClickListener`，这意味着您也在`OnItemClick`此活动的某处定义方法。你可以把那个代码放进去，`onListItemClick`因为它会做同样的事情。

至于`alertDialog`你想展示的，我通常只是坚持使用`AlertDialog.Builder`来制作和展示简单的alertDialogs。它可以工作，并且可能比`Dialog`直接使用类更简单。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle(brand.getBrand_name());
builder.setCancelable(true);
builder.show(); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:16:44.210

嗯，让我澄清一下，当您单击整个列表视图而不是其中的项目时，您想显示一个警报对话框吗？.. 如果是这样，我认为您应该实现 onclick 侦听器而不是 onitemclick 侦听器，尽管我从未尝试过实现警报单击列表视图时的对话框，但我认为应该这样做

# r - R提取文本直到并且不包括x

> ID：12452413
> 
> 赞同：1
> 
> 时间：2012-09-17T02:13:04.493
> 
> 标签：r, regex

我有一堆混合长度的字符串，但都嵌入了一年。我正在尝试仅提取文本部分，即数字开始*之前*的所有内容，并且假设这是此类提取的正确方法，并且在前瞻断言方面遇到问题。

这是我所拥有的（返回不匹配）：

`>grep("\\b.(?=\\d{4})","foo_1234_bar",perl=T,value=T)`

在示例中，我只是希望提取，`foo`但可能有几个混合长度，`_`在年份部分之前分开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:52:04.757

在这里，前瞻可能有点矫枉过正。使用下划线和 4 位数字作为结构，结合非贪婪量词以防止“点”吞噬所有内容：

```
/(.+?)_\d{4}/ 
```

-第一个匹配组 ($1) 持有 'foo'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T02:39:44.590

这将抓取所有内容，直到第一个数字

```
x <- c("asdfas_1987asdf", "asd_das_12")
regmatches(x, regexpr("^[^[:digit:]]*", x))
#[1] "asdfas_"  "asd_das_" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T02:54:02.270

另一种方法（我经常发现 strsplit 比正则表达式搜索更快，但并非总是如此（尽管这确实使用了一点正则表达式）：

```
x <- c("asdfas_1987asdf", "asd_das_12") #shamelessly stealing Dason's example
sapply(strsplit(x, "[0-9]+"), "[[", 1) 
```

# java - 如何渲染 在页面方向而不是行方向？

> ID：12452418
> 
> 赞同：2
> 
> 时间：2012-09-17T02:14:27.727
> 
> 标签：java, jsp, spring-mvc, spring-webflow, jspx

我需要绑定`Map<Long, String>`到表单中的复选框。

这是我的代码：

```
<form:form modelAttribute="flowForm" action="${flowExecutionUrl}">
  <table style="width: 100%">
    <tr>
      <td width="30%">Select A Group Please !</td>
    </tr>
    <td>
      <form:checkboxes items="${selectableQuestionarieGroups}" path="id" />
    </td> 
```

它工作得很好：

![在此处输入图像描述](../Images/50d0f1d6a7b703df69656b366cb7b98c.png)

但是，我需要在每个复选框后换行，我该如何实现呢？

# linux - 用于更新配置文件的 Shell 命令

> ID：12452419
> 
> 赞同：2
> 
> 时间：2012-09-17T02:14:30.687
> 
> 标签：linux, bash, shell, unix

寻找一种在 CentOS 中自动启用 yum 存储库的方法。默认情况下，配置文件如下所示：

```
[remi]
name=Les RPM de remi pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/remi/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/remi/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi
failovermethod=priority

[remi-test]
name=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi 
```

注意`enabled=0`在`[remi]`块中。这就是需要翻转的东西。问题是我不能只搜索，`enable=0`因为该`remi-test`块也有它，但我不想启用测试 repo。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T09:42:45.030

尝试这个：

```
sed -i '/\[remi\]/,/^ *\[/ s/enabled=0/enabled=1/' your_repo_file 
```

where:`/[remi]/,/^ *[/`告诉`sed`只查找从`[remi]`到下一个`repo`条目的文本块，它以 . 开头`[`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T03:41:16.867

```
sed -i '0,/enabled=0/s//enabled=1/' /etc/yum.repos.d/remi.repo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-21T05:24:52.033

```
yum-config-manager [--enable|--disable] rhel-6-server-rpms 
```

这在 RHEL 中有效，您应该能够在 CentOS 中执行相同的操作。从以下位置获取 repo 名称：

```
yum repolist [all|enabled|disabled] 
```

该命令将向您显示已启用/未启用的内容，但在系统上的 /etc/yum.repos.d/.repo 文件中进行了配置。

yum-config-manager 是 RHEL6 上的 yum-utils 软件包的一部分，可能是 EL 发行版。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-05T09:27:08.603

`sed(1)`不会就地编辑文件，而是将编辑内容发送到其输出。要就地编辑，您需要提供`-i`(or `--in-place`) 标志。此外，您正在做的是编辑包含 的行`[remi].*enabled`，而您只是找不到这些行。您希望将替换限制在以`[remi]`next 结尾的部分开头`[`：

```
sed -i -e '/\[remi\]/,/^\[/s/enabled=0/enabled=1/' /etc/yum.repos.d/remi.repo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T06:46:16.827

```
awk 'BEGIN{prev=1;}{if($0~/remi-test/)prev=0;else if($0~/\[remi\]/)prev=1;if(prev &&$0~/enabled/)print "enabled=1";else print}' your_file 
```

测试如下：

```
> cat temp
[remi]
name=Les RPM de remi pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/remi/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/remi/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi
failovermethod=priority

[remi-test]
name=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi

[remi-test]
name=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi

> awk 'BEGIN{prev=1;}{if($0~/remi-test/)prev=0;else if($0~/\[remi\]/)prev=1;if(prev &&$0~/enabled/)print "enabled=1";else print}' temp
[remi]
name=Les RPM de remi pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/remi/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/remi/mirror
enabled=1
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi
failovermethod=priority

[remi-test]
name=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi

[remi-test]
name=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch
#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/
mirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror
enabled=0
gpgcheck=1
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi
> 
```

# javascript - ajax 表单发布教程

> ID：12452420
> 
> 赞同：0
> 
> 时间：2012-09-17T02:14:58.833
> 
> 标签：javascript, ajax, wordpress, comments, wordpress-theming

我正在寻找使用 ajax 和 POST 发布表单数据的简短教程。更具体地说，用于自定义 wordpress 主题中的评论。

到目前为止，我只发现了这个：[http](http://www.simonerodriguez.com/ajax-form-submit-example/) ://www.simonerodriguez.com/ajax-form-submit-example/但是 js 文件很大，所以我认为有很多膨胀（无法全部破译）。我也在这个网站上搜索过，但大多数线程都使用 jQuery 或者不涵盖我正在寻找的内容。

你们中有人知道这方面的教程吗，或者有人可以向我解释基本代码吗？

非常感谢您的帮助和建议！

PS请不要推荐jQuery，因为我没有使用它并且想学习纯Js :)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:12:59.367

```
function initiateRequest() 
{
  if(window.XMLHttpRequest) {
        return new XMLHttpRequest();
  } else {
        return new ActiveXObject("Microsoft.XMLHTTP");
  }
}

function createClearingHouse() {

    parameters = "name=" + document.getElementById("username").value;
    url = EnginePath + "/clearingHouse/persist"
    request = initiateRequest();
    request.open("POST", url, false);
    request.send(parameters);
    if(request.readyState==4  && (request.status == 200)) {         
       alert("success");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:05:55.323

正如我被要求的那样......这是一个非常完整的链接：

[http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)

干杯，S。

# iphone - 从 url 下载图像时如何使用 UIactivityindicatorview

> ID：12452423
> 
> 赞同：1
> 
> 时间：2012-09-17T02:15:25.163
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我实现了一种从 URL 下载图像并将其显示在 TableView 单元格中的方法。代码工作正常，但我还需要实现另外两个功能，

1) 一个 UIActivityIndi​​cator 来显示图像正在被下载。2) 检查镜像是否已经下载。仅当单元格为空时才下载。

这是我的代码。

```
-(void) downloadImage
{
    NSURL *url = [NSURL URLWithString:@"http://cdn.iphonehacks.com/wp-content/uploads/2012/09/iphone5-front-back.jpg"];
    UIImage *image = [[UIImage alloc] initWithData: [NSData dataWithContentsOfURL:url]];

    [dCellImageView setImage:image];

    [image release];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:25:19.240

使用 [NSData dataWithContentsOfURL:URL options:NSDataReadingMapped error:&error]。这是一种同步方法。所以可能在发送消息之前启动activityIndi​​cator，并检查错误，然后停止activityIndi​​cator。“单元格为空”是什么意思？您是将图像存储在磁盘中还是仅存储在内存中。如果是前者，请使用 NSFileManager 检查文件是否存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:33:05.223

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; 
```

它会在状态栏的左侧显示一个指示器。如果您愿意，也可以使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

如果你想在下载之前检查图像是否已经下载，你需要在你的核心数据或属性列表中存储一个密钥。

# python - 在 python 中，我如何打乱文件名和内容，为什么我的尝试会产生奇怪的结果？

> ID：12452424
> 
> 赞同：0
> 
> 时间：2012-09-17T02:15:36.987
> 
> 标签：python, encryption, replace, scramble

我正在尝试制作一个可以在 Windows 机器上打乱文件夹文件和文件内容的脚本。

这是我第一次尝试打乱文件夹中的文件名。我知道在性能方面它可能很糟糕，而且看起来很可悲，但我是新手，并试图自学。

```
import os
import sys
import re
root = 'C:/Users/Any/Desktop/test'

for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' A', ' ಌ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' B', ' ௷'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' C', ' അ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' D', 'ጯ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' E', 'ᚙ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' F', ' ᚘ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' G', ' ௲ '))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' H', ' ණ '))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' I', ' ┩'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' J', ' ວ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' K', ' ʥ '))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' L', ' ቄ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' M', ' ఈ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' N', '㏁'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' O', ' Ꮄ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' P', '♙'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' Q', ' Ꮬ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' R', ' ꡤ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' S', ' ⏎'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' T', ' ௷'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' U', ' ヌ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' V', ' ஹ '))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' W', '  ̉'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' X', ' ฟ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' Y', ' ॢ'))
for item in os.listdir(root):
    fullpath = os.path.join(root, item)
    os.rename(fullpath, fullpath.replace(' Z', ' ╔')) 
```

运行脚本之前的文件夹内容为：

```
FILENAMEABCDEFGHIJKLMNOPQRSTUVWSTXYZ.docx
TEST PICTURE.jpg
TEST SCRIPT.bat
TEST TEXT.txt 
```

运行脚本后：

```
FILENAMEABCDEFGHIJKLMNOPQRSTUVWSTXYZ.docx
TEST à¯·EXT.txt
TEST âŽCRIPT.bat
TESTâ™™ICTURE.jpg 
```

那么到底发生了什么？本来就是这么简单，怎么会产生这样的结果呢？我应该怎么做才能尝试制作一个加扰脚本，它不一定是预先的，因为我想理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T02:44:07.417

你的方法有几个问题。

1.  每个搜索字符串都以空格开头，因此它只会替换空格和紧随其后的字符。
2.  您的替换字符是 unicode 文字，但您没有在脚本中指定编码（或使用 unicode 文字）。结果可能是来自文本编辑器的 UTF-8 编码字节被 Python 解释为 latin-1 并作为 Unicode 代码点发送到操作系统——即 mojibake。
3.  您正在使用一种非常低效的方法来执行替换。使用`.translate`字符串的方法，传入一个字符到 Unicode 替换的映射表；那么你只需要遍历你的文件一次，并使用有效的查找而不是冗长的一系列`replace`s 来执行翻译。每当你发现自己需要复制粘贴一段代码 3 次或更多次时，问问自己循环或其他技术是否会更好——没有任何充分的理由重复自己 26 次。
4.  你`import re`但实际上并没有使用它。

考虑到上述所有注释，这是我编写代码的内容：

```
import os

# unicode.translate translates *code points* to unicode literals,
# so we apply ord to the letters to get code points
# We also specify our Unicode literals using escape notation to avoid encoding issues.
TRANSTABLE = {
    ord(u'A'): u'\u0123',
    ord(u'B'): u'\u2931',
    # etc
}

# Unicode literal so that os.listdir produces Unicode filenames
# Raw (r) literal so that backslashes are interpreted literally
ROOT = ur'C:\Users\Any\Desktop\test'

for filename in os.listdir(ROOT):
    newname = filename.translate(TRANSTABLE)
    # Don't translate ROOT (avoids translating e.g. the C in C:\)
    os.rename(os.path.join(ROOT, filename), os.path.join(ROOT, newname)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:36:39.257

您的每个搜索和替换字符串前面都有一个空格，因此它只会匹配空格后的第一个字母。

# java - 是否可以将已被正则表达式替换的请求 URL 保存到 apache access.log 中？

> ID：12452429
> 
> 赞同：0
> 
> 时间：2012-09-17T02:15:55.553
> 
> 标签：java, apache

> **可能重复：**
> [是否可以在 apache 访问日志中排除指定的 GET 参数？](https://stackoverflow.com/questions/9467405/is-it-possible-to-exclude-specified-get-parameters-in-apache-access-logs)

apache的日志中隐藏了一个安全漏洞：

比如如果你在浏览器中输入一个关于**[http://localhost/meeting/import.php?cmd=admin&password=pass&userName=hsh&meetingID=123](http://localhost/meeting/import.php?cmd=admin&password=pass&userName=hsh&meetingID=123)**的 URL，那么 access.log 会完整记录它，所以这是一个安全问题，因为它记录安全参数：**cmd=admin&password=pass&userName=hsh&meetingID=123**。

现在，我想控制我的日志打印，使参数替换为@符号，如果我执行一个不包含安全参数的 url，例如**[http://localhost/meeting/op.do](http://localhost/meeting/op.do)**， access.log 必须记录它，**但是**如果我输入一个包含安全参数的 url，例如**[http://localhost/meeting/import.php](http://localhost/meeting/import.php) >?cmd=admin&password=pass&userName=hsh&meetingID=123**，那么正则表达式替换必须起作用，它会解决： **[http:// localhost/meeting/import.php?cmd=@@&password=@@&userName=@@&meetingID=@@](http://localhost/meeting/import.php?cmd=@@&password=@@&userName=@@&meetingID=@@)**进入日志，我应该去实现什么？提醒：我的开发环境是W7。谢谢！

# sql - 使用 SQL 2012 Server 将 UTC 时间转换为本地时间

> ID：12452430
> 
> 赞同：1
> 
> 时间：2012-09-17T02:15:57.847
> 
> 标签：sql, sql-server

我正在解析 Reddit RSS 提要并注意到时间是 UTC。服务器位于 EST。服务器位于距 UTC 为 -5 小时的时区。如何将 UTC 时间码转换为 EST？

注意：我还读到 UTC 不遵循夏令时 (DST)，稍后我将确定是否使用日期范围调整小时差。

RSS 提要中的 Reddit 项目节点

```
<item>
<title>blah blah</title>
<link>http://blah.com</link>
<guid isPermaLink="true">http://www.reddit.com/r/blah/comments/blah</guid>
<pubDate>Sun, 16 Sep 2012 21:39:17 -0700</pubDate>
<description>blah description</description>
</item> 
```

到目前为止，我想出了这个：

```
DECLARE @d DATETIMEOFFSET;
SET @d = 'Sep 2012 21:39:17 -07:00'

DECLARE @off datetime
SET @off = SWITCHOFFSET(@d, '-05:00')

DECLARE @dates TABLE (
converteddate DATETIME
);

insert into @dates (converteddate)
Values (@off)

select * from @dates 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:08:29.607

我的例子似乎是我读过的答案。如果您通过服务器的 UTC 时间偏移来偏移 UTC 时间，您将获得服务器的本地时间。在这种特殊情况下，服务器是 UTC -05:00

在这个例子中，pubDate 的节点是：

```
Sun, 16 Sep 2012 21:39:17 -0700 
```

我解析 Reddit RSS 提要并将 pubDate 节点作为文本发送到 SQL。我将 pubDate 的字符串重新格式化为：

```
Sep 2012 21:39:17 -07:00 
```

我想出的存储过程：

```
--@pubdate was sent to SQL from web app as 'Sep 2012 21:39:17 -07:00'

@pubdate varchar(50)

DECLARE @d DATETIMEOFFSET;
SET @d = @pubdate

DECLARE @off datetime
SET @off = SWITCHOFFSET(@d, '-05:00')

INSERT INTO feed (pubdate)
VALUES (@off) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:58:21.110

您可以将内置 SQL Server 函数 GETDATE() 与 GETUTCDATE() 的结果进行比较，并使用结果调整传入的 RSS 提要日期。有关更多详细信息，请参阅此博客文章：http: [//sqlserverperformance.wordpress.com/2007/04/25/one-way-to-convert-from-utc-time-to-local-time/](http://sqlserverperformance.wordpress.com/2007/04/25/one-way-to-convert-from-utc-time-to-local-time/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T11:36:33.017

DECLARE @Mydate SET @Mydate = DATEADD(minute, DATEDIFF(minute,GETDATE(), GETUTCDATE()), @DateToConvert)

# netbeans - 有jre7；JAR 是 jre6 编译的；不能跑

> ID：12452434
> 
> 赞同：0
> 
> 时间：2012-09-17T02:16:29.470
> 
> 标签：netbeans, jar, java-7, backwards-compatibility, jdk1.6

我在 NetBeans 中构建了一个 JAR，将 Source/Binary Format 设置为 JDK6。所以编译成jre6。我可以使用 JAR（在 IDE 之外），但如果我将它发送到带有 的机器`jre7`，我必须更改环境变量以使其从 JAR 中执行。

1.  Java不是向后兼容吗？这不应该在 jre7 上毫不费力地工作吗？我在这个程序中没有做任何花哨的事情。它是几千字节，几百行，`Map`从`java.util`.
2.  java是否有命令行选项可以使用较旧的运行时或要写入的注释来将类文件标识为版本6？

很尴尬，我找不到能回答这些问题的规格。

# python - 乘法游戏python

> ID：12452438
> 
> 赞同：4
> 
> 时间：2012-09-17T02:16:56.130
> 
> 标签：python, random, multiplication

我应该在 python 中编写一个程序，询问用户他们想要多少个乘法问题，它随机给他们问题的值从 1 到 10。然后它吐出他们正确的百分比。我的代码不断重复相同的一组数字，而且它也不会停留在用户要求的数字上。你能告诉我有什么问题吗？

```
import random
import math

gamenumber = int(input("How many probems do you want?\n"))
num_1 = random.randint(1,10)
num_2 = random.randint(1,10)

def main():

    random.seed()
    count = 0
    while count < gamenumber:
        guess = int(input("What is " + str(num_1) + "x" + str(num_2) + "."))

        answer = str(num_1*num_2)
        correct = guess == answer

        if guess == answer:
            print("Correct!")
        else wrong:
            print("Sorry, the answer is", answer, ".")

        result = correct/wrong   

    print("You got ", "%.1f"%result, "of the problems.")

main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:20:08.967

`num_1`你只分配`num_2`一次。他们的价值观永远不会改变；你的数字怎么会改变？此外，您不会递增`count`，因此始终将其原始值与`gamenumber`.

您需要为您的两个变量分配一个新的随机数并增加您的计数器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T02:20:21.997

您忘记`count`在循环中递增`num_1`并且`num_2`没有获得新值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T07:50:08.370

## 你提到的问题

> 我的代码不断重复相同的一组数字

这并不奇怪，因为您将`num_1`and `num_2`(1) 设置在`main`函数之外， (2) 设置在主`while`循环之外。一个简单的修正是：

```
 while count < gamenumber:
        num_1 = random.randint(1,10)
        num_2 = random.randint(1,10) 
```

> 我的代码不会停留在要求的数字上：

再一次，毫不奇怪，因为你从不增加`count`计数器：你总是有`count < gamenumber`. 一个简单的修正是：

```
 while count < gamenumber:
        num_1 = random.randint(1,10)
        num_2 = random.randint(1,10)
        guess = int(input("What is " + str(num_1) + "x" + str(num_2) + "."))
        answer = str(num_1*num_2)

        count += 1 
```

在这里，`count += 1`手段`add 1 to count *in place*`。您也可以这样做，但是由于您创建了一个您并不真正需要`count = count + 1`的临时变量 ( )，因此效率会降低一些。`count + 1`

## 其他问题

*   你从不定义`wrong`
*   您`gamenumber`在函数外部定义。`gamenumber`虽然在这种情况下这不是问题，但将其用作 的参数会更容易`main`，因为它是驱动游戏的变量。
*   你`result`是在循环中定义的。您可能希望为每个好的答案增加一个计数器并在主循环之后打印结果。
*   您`result`的计算方式为`correct/wrong`。虽然我确定您的意思是`correct/gamenumber`，但您必须格外小心：`count`and`gamenumber`是整数，并且整数除法与浮点数除法不同。例如，`2/3`给`0`，但`2/float(3)`给`0.6666666`。所以，我们必须在某处使用浮点数。
*   你想打印一个百分比：你`result`应该是`result=correct*100./gamenumber`.
*   你不想`gamenumber`成为 0，否则你`result`将是未定义的。

所以，总而言之，你的`main`功能应该是

```
def main(gamenumber):
    random.seed()
    count = 0
    correct = 0
    while count < gamenumber:
        num_1 = random.randint(1,10)
        num_2 = random.randint(1,10)
        guess = int(input("What is " + str(num_1) + "x" + str(num_2) + "."))
        answer = str(num_1*num_2)
        count += 1

        if guess == answer:
            correct += 1
            print("Correct!")
        else wrong:
            print("Sorry, the answer is", answer, ".")

    if gamenumber > 1:
        result = correct * 100./gamenumber  

    print("You got ", "%.1f"%result, "of the problems.") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T02:20:11.297

对我来说最明显的问题是你有一个无限循环；你不会`count`在任何地方增加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T02:23:54.093

1.  在开始循环之前，您只生成一次问题编号。在向用户提问之前，您需要每次生成 num_1 和 num_2。

2.  初始化后您从未真正更新计数值，因此您的循环将永远持续下去。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T04:56:12.607

```
import random
import math 
```

“问题”的拼写错误

```
gamenumber = int(input("How many probems do you want?\n")) 
```

在循环内移动接下来的两行

```
num_1 = random.randint(1,10)
num_2 = random.randint(1,10)

def main():

    random.seed()
    count = 0
    while count < gamenumber: 
```

你可以`"What is {}x{}?".format(num1, num2)`在这里使用。

```
 guess = int(input("What is " + str(num_1) + "x" + str(num_2) + "."))

        answer = str(num_1*num_2) 
```

这应该计算正确答案吗？应该`correct += guess == answer`

```
 correct = guess == answer 
```

你的意思是计算错误答案的数量？`wrong += guess != answer`

```
 if guess == answer:
            print("Correct!") 
```

`else wrong:``else: #wrong`也许是语法错误 ？

```
 else wrong:
            print("Sorry, the answer is", answer, ".") 
```

这不是计算百分比的方法。您应该使用`correct*100/gamenumber`和 dedent 来匹配`print()`

```
 result = correct/wrong   

    print("You got ", "%.1f"%result, "of the problems.")

main() 
```

你也没有`count`在任何地方增加。使用起来更容易

```
for count in range(gamenumber): 
```

而不是`while`循环

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T02:42:04.807

Python 是一种过程语言。它在你的方法体中从上到下执行语句。这一行：

`num_1 = random.randint(1,10)`

是一个赋值语句。它不*等同*于`num_1`评估其价值的随机过程；它评估一个表达式 - 通过调用`random.randint(1,10)`- 并将该值分配给`num_1`, 一次。

您必须强制再次调用 random.randint 以获得另一个随机数，并且每次您希望 num_1 的值更改时，您必须有一个语句为 num_1 分配一个值。

# javascript - Navigationview 标签面板、子标签面板

> ID：12452440
> 
> 赞同：0
> 
> 时间：2012-09-17T02:17:58.960
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我试图在标签面板中有一个子标签面板。我做了一些答案，但不太明白:(

例如，在这里，当我单击选项卡 3 时，如何显示选项卡 3、4 和 5 并在顶部显示一个后退按钮？（我所做的一切：标签 1、2 和 3 都留在那里......）

谢谢 ：）

**主.js：**

```
Ext.define('MyApp.view.MyNavigationView', {
    extend: 'Ext.navigation.View',

    config: {
        ui: 'light',
        items: [
            {
                xtype: 'tabpanel',
                title: 'MyTabPanel1',
                layout: {
                    animation: 'fade',
                    type: 'card'
                },
                items: [
                    {
                        xtype: 'container',
                        title: 'Tab 1',
                        iconCls: 'info'
                    },
                    {
                        xtype: 'container',
                        title: 'Tab 2',
                        iconCls: 'info'
                    },
                    {
                        xtype: 'container',
                        title: 'Tab 3',
                        iconCls: 'info'
                    }
                ],
                tabBar: {
                    docked: 'bottom'
                }
            },
            {
                xtype: 'tabpanel',
                title: 'MyTabPanel',
                items: [
                    {
                        xtype: 'container',
                        title: 'Tab 3',
                        iconCls: 'info'
                    },
                    {
                        xtype: 'container',
                        title: 'Tab 4',
                        iconCls: 'info'
                    },
                    {
                        xtype: 'container',
                        title: 'Tab 5',
                        iconCls: 'info'
                    }
                ],
                tabBar: {
                    docked: 'bottom'
                }
            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:18:39.307

在您的情况下，您一次将两个选项卡面板推送到导航视图中。但是第一次你只需要显示第一个面板。为此，您只需将第一个面板添加到导航视图中。仅当用户在第一个 tabPanel 上选择第三个选项卡时，您才需要将第二个面板添加到导航视图。为此，您应该收听“acitveitemchange”事件并确定超过 3 个选项卡变为活动状态。然后按第二个选项卡窗格。

看这个例子

```
Ext.define('MyApp.view.MyNavigationView', {
    extend: 'Ext.navigation.View',

    config: {
        ui: 'light',
        autoDestroy: false

    },

    constructor : function(){
        this.callParent(arguments);

        this.firstTabPanel = Ext.create('Ext.tab.Panel',{
            title: 'MyTabPanel1',
            layout: {
                animation: 'fade',
                type: 'card'
            },
            items: [
                {
                    xtype: 'container',
                    title: 'Tab 1',
                    iconCls: 'info',
                    html : 'TAB 1'
                },
                {
                    xtype: 'container',
                    title: 'Tab 2',
                    iconCls: 'info',
                    html : 'TAB 2'
                },
                {
                    xtype: 'container',
                    title: 'Tab 3',
                    iconCls: 'info',
                    html : 'TAB 3'
                }
            ],
            tabBar: {
                docked: 'bottom'
            }
        });

        this.secondTabPanel = Ext.create('Ext.tab.Panel',{
            title: 'MyTabPanel',
            items: [
                {
                    xtype: 'container',
                    title: 'Tab 3',
                    iconCls: 'info',
                    html : 'TAB 3'
                },
                {
                    xtype: 'container',
                    title: 'Tab 4',
                    iconCls: 'info',
                    html : 'TAB 4'
                },
                {
                    xtype: 'container',
                    title: 'Tab 5',
                    iconCls: 'info',
                    html : 'TAB 5'
                }
            ],
            tabBar: {
                docked: 'bottom'
            }
        });

        this.firstTabPanel.on('activeitemchange', this.tabPanel1ActiveItemChange, this);

        //show first tab panel
        this.push(this.firstTabPanel);
    },

    tabPanel1ActiveItemChange : function(tabpanel, newtab){
        //if newtab is third tab than show second tab panel
        if(this.firstTabPanel.getInnerItems().indexOf(newtab)=== 2){
            this.push(this.secondTabPanel);
        }

    }
}); 
```

# java - 使用 2 个不同的线程时应该有什么期望值？

> ID：12452444
> 
> 赞同：0
> 
> 时间：2012-09-17T02:18:33.680
> 
> 标签：java, multithreading

我在课堂上被问到一个问题，'a 的可能最终值是多少？（假设每条语句是一个执行单元。你不需要在指令级考虑问题。）'。附加信息：

线程 A：a = 3 (A1) 和 a = a + 1 (A2)

线程 B：a = 5 (B1) 和 a = a + 7 (B2)

所以经过一些思考，第一个线程输出应该是 4，第二个线程输出应该是 12。

所以我做了测试脚本，看看这是否正确，输出显示了我预期的线程 A：4 和线程 B：12。

问题是，我应该期待其他值吗？或者，也许我只是错误地执行了这个问题？如果可能，我如何调整此代码以获取其他值？这是一个棘手的问题，还是只有我一个人？

编辑：由于我的家庭作业真的不需要代码，所以让我们专注于此类问题的理论实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:58:31.103

如果您曾经更正此问题以使其真正表现出线程而不是顺序执行，那么正确的答案将是在没有任何类型的同步的情况下，行为是未定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:53:47.560

假设您确实修复了代码以正确实现线程，考虑到今天的 CPU 速度和启动线程/调度的开销，我打赌您不会看到任何并发错误，因为第一个线程或第二个线程将`a`在另一个有机会开始，所以你可能总是得到 4 和 12 作为结果。

要发生数据竞争，您将需要更多冗长的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T02:49:30.990

`FirstThread`您对and的调用`SecondThread`正在主线程上运行，而不是`threadA`or `threadB`。此外，该`run()`方法什么也不做。

在这个问题中对线程的任何引用都只是误导（噪音），与输出无关。

（还有方法名称`FirstThread`，并且`SecondThread`应该以小写字母开头以匹配 Java 约定）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T09:12:16.223

如果我正确理解您的问题，那么您提供的代码不是作为作业问题的一部分给出的，而是代表您尝试回答它。鉴于此，正如 Tudor 已经指出的那样，即使在正确的实现中，即使您运行该程序几百次，您也可能看不到任何“令人惊讶”的值。通过测试很难发现并发错误。

我理解正确答案的提示如下：假设你正在和你爱的人一起做两道菜作为晚餐。您可以先煮（辣）主菜，然后再煮（甜）沙漠。（无线程）。或者你同时烹饪它们，在两种食谱之间切换。它们都可能指的是平底锅（最初充满空气），一个告诉你用鸡蛋代替锅里的东西，另一个告诉你用油代替里面的东西，然后加入香料。因为你是一个糟糕的厨师（你还没有学习同步）你先放油，然后用鸡蛋代替里面的所有东西，加糖，然后回到第一个食谱并加入香料......味道会怎样像？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T02:35:48.127

> > > 您可以获得其他值，但您需要做一些事情来使程序执行，因为线程是随机的并且很难控制。您可以尝试我的代码，我认为您的代码有问题，但我不会更改它，好的？

```
public class Threads implements Runnable
{
    int a = 0;

    public void run() { }

    public int FirstThread()
    {
        a = 3;
        Thread.sleep(2000);
        a = a + 1;

        return a;
    }

    public int SecondThread()
    {
        a = 5;
        a = a + 7;

        return a;
    }
} 
```

或使用这个

```
public class Threads implements Runnable
{
    int a = 0;

    public void run() { }

    public int FirstThread()
    {
        a = 3;
        a = a + 1;

        return a;
    }

    public int SecondThread()
    {
        a = 5;
        Thread.sleep(2000);
        a = a + 7;

        return a;
    }
} 
```

就试一试吧！！！

# java - java“hello world”的简单ant文件

> ID：12452447
> 
> 赞同：2
> 
> 时间：2012-09-17T02:19:22.587
> 
> 标签：java, ant

我正在尝试运行 ant 文件，但我不断收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError 
```

我的 build.xml 文件包含以下内容：

```
<project name="Proj0" default="compile" basedir=".">

  <description>
    Proj0 build file
  </description>

  <!-- global properties for this build file -->
  <property name="source.dir" location="src"/>
  <property name="build.dir" location="bin"/>
  <property name="doc.dir" location="doc"/>
  <property name="main.class" value="proj0.Proj0.java"/>

  <!-- set up some directories used by this project -->
  <target name="init" description="setup project directories">
    <mkdir dir="${build.dir}"/>
    <mkdir dir="${doc.dir}"/>
  </target>

  <!-- Compile the java code in ${src.dir} into ${build.dir} -->
  <target name="compile" depends="init" description="compile java sources">
    <javac srcdir="${source.dir}" destdir="${build.dir}"/>
  </target>

  <!-- execute the program with the fully qualified name in ${build.dir} -->
  <target name="run" description="run the project">
    <java dir="${build.dir}" classname="${main.class}" fork="yes">
        <arg line="${args}"/>
    </java>
  </target>

  <!-- Delete the build & doc directories and Emacs backup (*~) files -->
  <target name="clean" description="tidy up the workspace">
    <delete dir="${build.dir}"/>
    <delete dir="${doc.dir}"/>
    <delete>
      <fileset defaultexcludes="no" dir="${source.dir}" includes="**/*~"/>
    </delete>
  </target>

  <!-- Generate javadocs for current project into ${doc.dir} -->
  <target name="doc" depends="init" description="generate documentation">
    <javadoc sourcepath="${source.dir}" destdir="${doc.dir}"/>
  </target>

</project> 
```

如何解决此错误？

**编辑：这是我的 Proj0.java 文件和堆栈跟踪的样子：**

```
package proj0;

public class Proj0 
{
    public static void main(String[] args)
    {
        System.out.println("Hello World");
    }
} 
```

* * *

```
Buildfile: build.xml

run:
     [java] Exception in thread "main" java.lang.NoClassDefFoundError: proj0/Proj0
     [java] Caused by: java.lang.ClassNotFoundException: proj0.Proj0
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
     [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
     [java] Could not find the main class: proj0.Proj0\. Program will exit.
     [java] Java Result: 1

BUILD SUCCESSFUL
Total time: 0 seconds 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:25:09.177

```
 <property name="main.class" value="proj0.Proj0.java"/> 
```

那应该是

```
 <property name="main.class" value="proj0.Proj0"/> 
```

（类名，而不是源文件名）。

# ios - iPhone 设备令牌的大小

> ID：12452448
> 
> 赞同：20
> 
> 时间：2012-09-17T02:19:49.757
> 
> 标签：ios, apple-push-notifications

APNs（Apple Push Notification）生成的设备令牌的大小是多少。我正在尝试将服务器端的设备令牌存储在 mysql 数据库中，并想知道生成的设备令牌的最大大小

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-17T02:28:26.617

你被告知，但它目前是 32 字节。[苹果表示令牌长度是可变的，并且不会对其进行硬编码](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW14)

当您收到通知时，它有一个标头，当前大小为 35 个字节。安排如下：

*   **字节 1：**命令
*   **字节 2-3：**令牌长度
*   **字节 4-35：**令牌

资料来源： http: [//mark.aufflick.com/files/view/talks/apns.pdf](http://mark.aufflick.com/files/view/talks/apns.pdf)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-02T23:17:24.510

[Apple Push Notification Service Programming guide](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW14)非常清楚地说：

> “重要提示：APN 设备令牌的长度可变。不要对它们的大小进行硬编码。”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T02:36:48.743

根据 Apple 的 iOS 开发人员库，正如 Philip 所说，它是 32 个字节。

这是他们关于“本地和推送通知编程”页面的链接，其中可能包含有关该主题的其他有用信息。

[https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/Introduction.html](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/Introduction.html)

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2014-06-11T17:03:14.333

据报道，iOS8 中的限制为 2k。仍然是 GCM 4k 大小的一半，但我怀疑大多数人将不得不改变他们的表来处理新的 iOS8 令牌限制。

# json - WebInvoke 参数为 NULL

> ID：12452466
> 
> 赞同：0
> 
> 时间：2012-09-17T02:23:03.723
> 
> 标签：json, wcf, rest, webinvoke

我有一项服务，其操作合同如下所示。我有一个 WebInvoke 属性，并且方法设置为 POST。我确实有一个 UriTemplate。实际的服务方法名称是 SaveUser。我正在尝试传入一个用户对象（具有注释为数据成员属性的属性的数据协定）。

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "SaveUser", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json)]
User SaveUser(User user); 
```

客户端如下所示。为简单起见，我排除了令牌和授权等：

```
using (WebClient webClient = new WebClient())
{
    try
    {
        Random r = new Random();
        var partitionKey = Guid.NewGuid().ToString();
        var rowKey = r.Next(999900, 999999).ToString();

        User u = new User()
        {
            UserId = partitionKey,
            FirstName = "First-" + DateTime.Now.Ticks.ToString(),
            LastName = "Last-" + DateTime.Now.Ticks.ToString(),
            LoginName = rowKey,
            Password = "password1",
            PayPalEmailAddress = "First" + DateTime.Now.Ticks.ToString() + "@verascend.com",
            PhoneNumber = "+1206" + r.Next(1234567, 9999999).ToString()
        };

        string url = serviceBaseUrl + "/SaveUser";

        webClient.Headers["Content-type"] = "application/json; charset=utf-8";
        // webClient.Headers[HttpRequestHeader.Authorization] = authToken;

        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(User));

        using (var memStream = new MemoryStream())
        {
            ser.WriteObject(memStream, u);

            Debug.WriteLine("-------------> "+ByteArrayToString(memStream.ToArray()));

            webClient.UploadData(url, "POST", memStream.ToArray());

        }
    }
    catch (WebException ex)
    {
        if (ex.Status == WebExceptionStatus.ProtocolError)
        {
            string responseText = string.Empty;

            using (Stream responseStream = ((HttpWebResponse)ex.Response).GetResponseStream())
            {
                using (StreamReader streamReader = new StreamReader(responseStream))
                {
                    responseText = streamReader.ReadToEnd();
                }
            }

            throw new Exception(responseText);
        }
        else
        {
            throw new Exception(ex.Message.ToString());
        }
    }
} 
```

**问题：**服务方法（实际服务）接收参数（用户）为 NULL。我究竟做错了什么？我尝试在服务合同中添加已知类型，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:58:10.070

您的问题是您将操作定义为具有包装的请求。这意味着参数必须包装在 JSON 对象中，而不是作为“普通”JSON 对象发送，并且成员名称必须与参数名称相对应（在您的情况下为`user`）。下面的代码进行包装；您可以看到现在该参数已被服务器正确接收。另一种选择是将`BodyStyle`属性更改为`Bare`而不是`WrappedRequest`您所拥有的（在这种情况下，您需要将*纯*对象发送到服务操作）。

```
public class StackOverflow_12452466
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "SaveUser", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json)]
        User SaveUser(User user);
    }

    public class Service : ITest
    {
        public User SaveUser(User user)
        {
            Console.WriteLine("User: {0}", user);
            return user;
        }
    }

    public class User
    {
        public string UserId { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string LoginName { get; set; }
        public string Password { get; set; }
        public string PayPalEmailAddress { get; set; }
        public string PhoneNumber { get; set; }

        public override string ToString()
        {
            return string.Format("Id={0},First={1},Last={2},Login={3},Pwd={4},PayPal={5},Phone={6}",
                UserId, FirstName, LastName, LoginName, Password, PayPalEmailAddress, PhoneNumber);
        }
    }

    public static void Test()
    {
        string serviceBaseUrl = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(serviceBaseUrl));
        host.AddServiceEndpoint(typeof(ITest), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
        host.Open();

        Random r = new Random();
        User u = new User()
        {
            UserId = "partitionKey",
            FirstName = "First-" + DateTime.Now.Ticks.ToString(),
            LastName = "Last-" + DateTime.Now.Ticks.ToString(),
            LoginName = "rowKey",
            Password = "password1",
            PayPalEmailAddress = "First" + DateTime.Now.Ticks.ToString() + "@verascend.com",
            PhoneNumber = "+1206" + r.Next(1234567, 9999999).ToString()
        };

        string url = serviceBaseUrl + "/SaveUser";

        WebClient webClient = new WebClient();
        webClient.Headers["Content-type"] = "application/json; charset=utf-8";

        Func<byte[], string> ByteArrayToString = (b) => Encoding.UTF8.GetString(b);
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(User));

        try
        {
            using (var memStream = new MemoryStream())
            {
                byte[] wrappingStart = Encoding.UTF8.GetBytes("{\"user\":");
                memStream.Write(wrappingStart, 0, wrappingStart.Length);
                ser.WriteObject(memStream, u);
                byte[] wrappingEnd = Encoding.UTF8.GetBytes("}");
                memStream.Write(wrappingEnd, 0, wrappingEnd.Length);

                Debug.WriteLine("-------------> " + ByteArrayToString(memStream.ToArray()));

                webClient.UploadData(url, "POST", memStream.ToArray());
            }
        }
        catch (WebException ex)
        {
            if (ex.Status == WebExceptionStatus.ProtocolError)
            {
                string responseText = string.Empty;

                using (Stream responseStream = ((HttpWebResponse)ex.Response).GetResponseStream())
                {
                    using (StreamReader streamReader = new StreamReader(responseStream))
                    {
                        responseText = streamReader.ReadToEnd();
                    }
                }

                throw new Exception(responseText);
            }
            else
            {
                throw new Exception(ex.Message.ToString());
            }
        }
    }
} 
```

# javascript - 对传递给 JS 函数的变量进行插值

> ID：12452469
> 
> 赞同：1
> 
> 时间：2012-09-17T02:23:39.473
> 
> 标签：javascript, jquery

我正在创建一个这样的函数：

```
function ajaxinate(divId) {
  ('divId .anotherDiv').toggle();
} 
```

有人可以告诉我如何在函数中装饰 divId 参数，以便它从传入的内容中进行插值吗？例如，当我打电话时

```
ajaxinate('#myAjaxinatedDiv'); 
```

我希望函数看起来像：

```
('#myAjaxinatedDiv .anotherDiv').toggle(); 
```

出于某种原因，我无法将分配为 divID 的变量插入到函数中。我已经尝试用单引号和 + 符号以及几乎所有可能的排序组合来装饰 divId ......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:24:51.110

将变量传递给字符串：

```
function ajaxinate(divId) {
  $(divId + ' .anotherDiv').toggle();
} 
```

（另外，我假设您打算`$`用于 jQuery。）

# php - 在放入 CSV 之前删除变量中包含特定字符的行

> ID：12452473
> 
> 赞同：0
> 
> 时间：2012-09-17T02:24:09.820
> 
> 标签：php

我想问一下实现这一目标的有效方法是什么。

我有一个变量来保存下面要传递到 CSV 文件中的数据。

```
"Name","Address","Email","Comment"
", <=, ",", <=, ",", <=, ",", <=, "
"John Smith","USA","john@john.net","No Comment" 
```

我想要实现的是删除第二行，以便在我将数据推送到 CSV 之前，这些字符已经被删除。

```
", <=, ",", <=, ",", <=, ",", <=, " 
```

我现在唯一能做的就是将数据保存到文件中，然后对其进行操作，然后将其用于 CSV，但我确信有一种更快的操作方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:18:23.297

你的线总是这样？正如大衮建议的那样：

```
$yourdata = str_replace('", <=, ",", <=, ",", <=, ",", <=, "', '', $yourdata); 
```

[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

如果垃圾数据总是每隔一行出现，那么在将数据重新构建到变量中时跳过它会更有效，逐行读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:31:42.740

您可以设置一个小型过滤器，以便在遇到这些行时自动丢弃它们。像这样简单的东西：

```
function filtered_fputcsv($fp, $fields) {
  if ($fields ...has relevant data...) {
    fputcsv($fp, $fields);
  }
} 
```

并使用它代替标准编写器（或类似的阅读版本）。

# python - 在 Telit GE-865 模块上使用 Python 创建二维码

> ID：12452475
> 
> 赞同：1
> 
> 时间：2012-09-17T02:24:31.427
> 
> 标签：python, embedded, qr-code

我正在尝试创建一种使用 Telit GE-865 作为主控制器在小型显示器上显示 QR 码的方法。简而言之，Telit 会收到一条短信并将该字符串以二维码的形式发送到显示器上。我发现了一些不同的 python 二维码库（大部分来自 fukuchi 端口），但我不确定它们是否可以导入 Telit 模块。如果有人有在 Telit 模块上运行 python 的经验，我很想听听您的经验，并了解您对这是否可行的想法。

提前致谢！

是的，对不起。忘记详细说明了。我特别担心的是 Telit 为示例提供的脚本引用了 Python 的 1 个版本。我找到的 QR 编码库中的所有内容通常都需要 2.6 或更高版本。我不确定 Telit 模块是否可以使用其 PIL 库处理 QR 编码脚本。在我开始弄清楚如何将库实际加载到模块上之前，我真的只是想把我的头全部包起来。我还发现这个网站似乎有关于这个主题的大量信息。链接 – user1667373

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:41:34.020

该设备使用 Python 1.5.2 的定制版本。您可能需要向后移植要使用的任何库以使用此旧版本的 Python。另请注意，并非所有标准 Python 模块都可用，并且不支持浮点数学。

请参阅“Telit Easy Script in Python”手册的第 5 节，了解包含和不包含的内容的详细信息。你可以在这里找到它：[http ://www.telit.com/en/products/gsm-gprs.php?p_id=12&p_ac=show&p=47](http://www.telit.com/en/products/gsm-gprs.php?p_id=12&p_ac=show&p=47)

# javascript - 输入类型 = 'tel' 在 IE 中不起作用

> ID：12452476
> 
> 赞同：8
> 
> 时间：2012-09-17T02:24:42.080
> 
> 标签：javascript, tel

我已经设法解决了这个问题，但作为一个 JavaScript 涉猎者，我只是想知道它为什么会发生，以及是否有办法让 IE 识别输入类型 =“tel”。

背景故事：我需要在调查网站托管的调查的一些文本输入旁边添加单位（美元/分钟/年）。以下代码运行良好，直到我将类型更改为“tel”（以便为移动设备获取适当的数字键盘）。之后它仍然可以在 FF、Safari 和 Chrome 中运行，但不能在 IE 中运行。我已经评论了我如何在我的情况下修复它。

```
 SurveyEngine.addOnload(function()
{
/*Place Your Javascript Below This Line*/
  var questionId = this.questionId;
  var inputs = $(questionId).getElementsByTagName('input');
  var telId = "QR~"+questionId;

//get numeric keypad for mobile devices
// this is where I put "if (isIE()==false){" to get around the problem

document.getElementById(telId).type = 'tel'; //IE tells me this argument is invalid

//append "minutes"
for(var x = 0; x<inputs.length;x++){
var input = inputs[x];
if(input.id != undefined && input.type =='tel') //obviously in my fix added "|| type=='text'" to pick up the IEs
{
  var id = input.id;
  $(id).up().innerHTML = $(id).up().innerHTML + "minutes";
}}
}); 
```

html元素是

```
<div class='QuestionBody'>
    <div class='ChoiceStructure'>
                <input type='TEXT' autocomplete="off" id='QR~QID18' value='' class='InputText' name='QR~QID18~TEXT' style="width: 80px;" >
    </div>
</div> 
```

关于为什么 IE 在这里阻塞的任何想法都会很有趣并且可能有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T02:42:42.257

不幸的是，IE 不支持[IE10](http://msdn.microsoft.com/en-us/library/ie/hh673544%28v=vs.85%29.aspx#telephone_state)`TYPE=TEL`之前的版本。在标记中使用这种类型是完全有效的：

```
<input id="test" type="tel" /> 
```

但是，这将被忽略，IE 将默认为该`text`类型。在脚本中设置此类型将导致错误，因为 IE 不将此视为有效类型。因此，您必须先检测您的浏览器是否支持它。您可以执行以下操作：

```
function TelTest()
{
   var test = document.getElementById('test');
   return test.type == 'tel';
} 
```

如果`TelTest()`返回 true，则意味着浏览器*没有*恢复到默认`text`类型并且它理解该`tel`类型。

工作[JSFiddle](http://jsfiddle.net/q8rVm/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:54:33.800

我将从标记中的正确属性值开始（而不是使用 JS 更改它）：

```
<input type="number" id="QR~QID18" ... /> 
```

如果不支持数字输入，它将回退为纯文本输入，如果您追求一致的跨浏览器体验，请尝试为不支持某些 HTML5 的浏览器使用 polyfill[回退](https://github.com/jonstipe/number-polyfill)或[webshims 。](http://afarkas.github.com/webshim/demos/demos/webforms.html)

此外，对于您特定的前缀需求，使用不改变值的[解决方法](https://stackoverflow.com/questions/2913236/html-text-input-field-with-currency-symbol)可能更合适。

*旁注：您不应该真正将`tel`类型用于非电话号码，而是`input[type=number]`更正确。*

# android - 实现Handlers的基本方式

> ID：12452478
> 
> 赞同：1
> 
> 时间：2012-09-17T02:25:07.603
> 
> 标签：android, android-handler

我在处理程序上有这个示例应用程序，它在某个时间触发一个日志，但是当我单击我的开始按钮时它似乎不起作用。下面是我的代码。

```
public class Main extends Activity {
    private long selectedTimeInMills;
    private Handler handler;
    private static final Calendar CALENDAR = Calendar.getInstance();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TimePicker timepicker = (TimePicker) findViewById(R.id.timePicker1);
        final TextView timeText = (TextView) findViewById(R.id.time);

        Button start = (Button) findViewById(R.id.button1);
        handler = new Handler();
        String textTime = formatDate(CALENDAR.getTimeInMillis(), "hh:mm a");
        timeText.setText(textTime);

        timepicker.setOnTimeChangedListener(new OnTimeChangedListener() {

            public void onTimeChanged(TimePicker view, int hourOfDay, int minute) {
                CALENDAR.set(Calendar.HOUR_OF_DAY, hourOfDay);
                CALENDAR.set(Calendar.MINUTE, minute);
                selectedTimeInMills = CALENDAR.getTimeInMillis();
                String textTime = formatDate(CALENDAR.getTimeInMillis(), "hh:mm a");
                timeText.setText(textTime);
            }
        });

        start.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Runnable runnable =  new Runnable() {

                    public void run() {
                        Log.d("HandlerCheck", "Handler Fired! @ ("+selectedTimeInMills+") "+formatDate(selectedTimeInMills, "hh:mm a"));
                    }
                };
                boolean flag = handler.postAtTime(runnable, selectedTimeInMills);

                Toast.makeText(Main.this, "Handler is Fired?:: "+flag, Toast.LENGTH_LONG).show();
            }

        });

    }
} 
```

注意：当我点击我的按钮并实现`handler.postAtTime()`它返回`true`但它仍然不会在 DDMS 上显示日志，即使我已将我的时间选择器设置为距当前时间 1 分钟仍然不会在 DDMS 上触发日志消息

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T03:39:57.403

[`postAtTime`](http://developer.android.com/reference/android/os/Handler.html#postAtTime%28java.lang.Runnable,%20long%29)类中的方法`Handler`从状态中获取时间（以毫秒为单位）；不是`Calendar`时间（这是你正在传递的）。你应该用它`SystemClock.uptimeMillis()`来计算时间。

或者，您可以使用`postDelayed`函数在设定的时间段（以毫秒为单位）后调用 Runnable 对象。

```
// Introduce a new private variable
private long delayedTimeInMillis;

// Update delayedTimeInMillis inside onTimeChanged method:
delayedTimeInMillis = selectedTimeInMills - Calendar.getInstance().getTimeInMillis();

// replace handler.postAtTime(runnable, selectedTimeInMills); line with this:
handler.postDelayed(runnable, delayedTimeInMillis) 
```

# c# - 我可以将我们现有的项目转换为 MVVM 吗？

> ID：12452487
> 
> 赞同：0
> 
> 时间：2012-09-17T02:26:19.877
> 
> 标签：c#, silverlight

我在 Silverlight 中有一个大型现有项目，其中有许多用户控件，其中包含用于复杂业务逻辑的代码隐藏文件。我不知道我是否仍然可以将我的代码迁移到 MVVM 模式（我对这种模式很陌生）。我的意思是，如果迁移现有代码很容易，或者我必须重写所有内容来满足这个 MVVM 要求？

此外，业务应用程序模板似乎是一种 MVVM。这是我应该使用的最流行的模板吗？有没有在线教程来学习这个模板？

非常感谢，

魏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:40:43.160

我很少建议迁移现有代码以适应新的设计模式。如果项目相当小并且您正在迁移以准备进行大量更改（然后将受益于“改进”模式），这实际上是具有成本效益的。另外请注意，像 MVVM 这样的模式有些延迟（学习该模式需要花费大量时间，因此您需要能够容忍短期内增加的成本和延迟。）如果我站在你的立场上，我会在新模式上练习 MVVM项目或应用程序的合理隔离的附加功能。要么从事一些个人的业余项目；要么 弗兰肯斯坦软件重构项目是维护工程师最可怕的噩梦。

# c# - SqlDependency 可靠性？

> ID：12452488
> 
> 赞同：44
> 
> 时间：2012-09-17T02:26:21.847
> 
> 标签：c#, sql-server, sql-server-2008, sqldependency

我目前的情况是我有一个应用程序需要在新数据到达数据库表时得到通知。数据来自外部来源（我无法控制——这是唯一的集成选项）。当新数据到达时，我的应用程序需要采取某些操作——基本上是查询新数据、处理它、将结果插入本地表等。

如果可能的话，我想避免轮询，因为数据应该是实时处理的。也就是说，确保不会丢失任何数据是第一要务。

我的问题：

1.  SqlDependency 通常被认为是可靠的吗？
2.  我是否需要关注竞争条件，例如当另一个更改到达时我正在处理一个更改？
3.  当数据库重新启动时会发生什么？我的应用程序会恢复并再次开始接收更改，还是需要某种故障安全计时器来定期重新订阅通知？
4.  我读过的大部分文章都是关于 SQL Server 2005 的主题。我使用的是 SQL Server 2008 R2。是否有比 SqlDependency 更受欢迎的新技术？
5.  （编辑）另外，如果应用程序出现故障怎么办？我想我必须在启动时查询丢失的数据？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-17T06:58:25.387

1）是的，我认为它是可靠的，因为它正确地完成了设计目的（缓存失效）

2) 不可以。这就是为什么您只能通过发出查询来订阅的原因，这样可以确保在获取数据和通知新更新之间没有竞争

3) 数据库（或实例）重新启动信号所有挂起的查询通知，其[`SqlNotificationInfo`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlnotificationinfo.aspx)值为`Restart`。阅读[SqlDependency 和如何基于 Query Notification](http://rusanu.com/2006/06/17/the-mysterious-notification/)以获得更好的理解。由于始终保持与数据库的打开连接，因此甚至在任何显式查询通知之前`SqlDependency`都会检测到数据库不可用`SqlDependency`

4）不。更多关于这进一步...

5) 没有“丢失的数据”。查询通知（以及因此的 SqlDependency）永远不会通知您更改了*哪些数据。*它只通知您*它已更改*。您总是应该返回并读取*所有*数据以查看发生了什么变化（我建议您返回第 2 个问题/答案）。新启动的应用程序还没有查询到开始的数据，因此没有需要通知的更改。只有*在*它第一次查询数据后才能收到通知。

根据您对问题的描述，我不相信您需要查询通知。在我看来，您想对任何更改采取行动，无论何时发生，**即使您的应用程序没有运行**。这当然不是缓存失效，而是更改跟踪。因此，您需要部署变更跟踪技术，例如[Change Data Capture](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)或[Change Tracking](http://msdn.microsoft.com/en-us/library/cc280462%28v=sql.105%29.aspx)，这两种技术都仅适用于 SQL Server 2008 及更高版本（在 SQL Server 2005 中不可用）。[使用 SQL Server 2005 部署触发器并为Service Broker](http://msdn.microsoft.com/en-us/library/ms345108%28v=sql.90%29.aspx)排队消息以处理您尝试处理的相同问题（检测更改、对每一行新数据做出反应）的情况并不少见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-20T14:56:11.583

从 .net 开发人员的角度来看，只是想将其用于缓存失效，这是一个真正的痛苦，而且并不完全可靠。

设置和故障排除特别痛苦，我们让它在一个环境中正常工作，但在另一个环境中却无法工作。找出原因既困难又耗时。

即使它全部运行，它也不是完全可靠的。如果 SQL Server 负载过重并且存在已知问题与它重新启动和通知不恢复，则 SQL Server 可以丢弃通知：[http ://connect.microsoft.com/SQLServer/feedback/details/543921/sqldependency-incorrect-behaviour-after-sql -服务器重启](http://connect.microsoft.com/SQLServer/feedback/details/543921/sqldependency-incorrect-behaviour-after-sql-server-restarts)。

如果有替代技术可以满足您的需求并且不那么麻烦，我会避免。

# mysql-workbench - MySQL 工作台有时会显示非英文字符的方框

> ID：12452493
> 
> 赞同：2
> 
> 时间：2012-09-17T02:27:38.787
> 
> 标签：mysql-workbench

我已经阅读了具有不同字节大小的不同语言（例如英语和日语），因此必须相应地设置配置（排序规则、字符集）。但我意识到的一件事是，有时当我运行 MySQL 工作台时，它会显示正确的字符，有时显示方框。这是 MySQL 工作台中的错误，还是我没有正确完成的其他事情？有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-10-08T03:34:33.583

我在新安装我的 mysql 工作台时遇到了这个问题，所以我所做的只是重新打开它并修复了它。我认为这是因为应用程序没有正确安装。

# objective-c - Objective-C，将 IBAction 绑定到 NSTextField

> ID：12452499
> 
> 赞同：-1
> 
> 时间：2012-09-17T02:29:18.257
> 
> 标签：objective-c, cocoa, binding

我有一个 NSTextField 可以根据结果重新填充自己；我想自动执行 IBAction（通常通过单击应用程序中的 NSButton 来控制）。如何根据结果自动执行点击或 IBAction？

```
appDelegate.h

@interface main : NSView <NSApplicationDelegate>
{
NSView *main;
IBOutlet NSTextField *textValue;
IBOutlet NSWindow* window1;
IBOutlet NSWindow* window2;
}
- (void)textUpdated;
- (IBAction)switchWindow:(id)sender; 
```

我想触发或绑定到（IBAction）switchWindow：

```
appDelegate.m

- (void)textUpdated
{
[textValue setStringValue:[NSString stringWithFormat:@"%@, Switching Window", stringValue]];
[self switchWindow:sender];
}

- (IBAction)switchWindow:(id)sender {
    [self performSelector:[NSApp keyWindow]==window?@selector(openWindow):@selector(closeWindow) withObject:nil afterDelay:0.0];
}

- (void)openWindow {
    [window1 showWindow:window2 open:YES];
}

- (void)closeWindow {
    [window2 showWindow:window1 open:NO];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:28:00.443

切换到真实代码可以改善问题，但仍然很难准确理解您在问什么。正如 Josh Caswell 所指出的，动作只是一种方法，您可以自己调用它。您似乎已经在 中这样做了`-textUpdated`，但是您断言“它仍然没有做任何事情”并没有给我们太多继续。所以：

*   `-textUpdated`会被调用吗？如果没有，那就是你的问题。

*   `-switchWindow:`会被调用吗？在该方法中设置一个断点，看看是否停在那里。（提示：如果您对第一个问题的回答是“是”，您将停在那里。）

*   你期望发生什么没有发生的事情？

*   各种变量（ivars 和局部变量）的值是您所期望的吗？

*   做`-openWindow`和`-closeWindow`得到适当的调用？

*   返回什么`[NSApp keyWindow]`？它是否*曾经*返回一个等同于 的指针`window`？（顺便说一句，告诉我们这里是什么`window`意思也没什么坏处。）

*   您是否打算写类似的东西（注意“窗口”后面的“1”）：

    `[self performSelector:[NSApp keyWindow] == window1 ? @selector(openWindow) : @selector(closeWindow) withObject:nil afterDelay:0.0];`

*   如果您一次只做一件事，您的代码可能更容易理解。是的，它的行数更多，但调试起来要容易得多：

    ```
    NSWindow *keyWindow = [NSApp keyWindow];
    if (keyWindow == window1) {
        [自开窗口];
    }
    否则 if (keyWindow == window2) {
        [自我关闭窗口];
    }

    ```

# php - 高效调平系统

> ID：12452500
> 
> 赞同：0
> 
> 时间：2012-09-17T02:29:19.317
> 
> 标签：php

我正在根据您在网站上的经验制作一个调平系统。我已经弄清楚了所有的经验，以及我想如何进行练级，但我需要一种更有效的方法来做到这一点。我知道这可能会使用数组来实现，但我真的不知道如何去做。够啰嗦了，不过，这就是我想要做的......

级别 1 将是任何低于 150 的经验 然后我将乘以 1.5，所以级别 2 将低于 225 级 3 将低于 337.5，依此类推。这是我打算做的低效方式。

```
if($xp < 150){
$level = "1";
}elseif($xp < 225){
$level = "2";
}elseif($xp < 337.5){
$level = "3";
} 
```

我可以使用一个变量来表示数字和乘以 1.5 ( ) 的倍数`$number*1.5`，但就像我之前所说的那样，我真的不知道它是如何工作的。

*更多信息..我在每个页面上都包含一个会话文件，并且每次获得新经验时我都会检查查询，并且此代码将用于自动更新数据库上的级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:33:42.200

尝试

```
$level = min(max((int)(log($xp / 100, 1.5) + 1), 1), $maxLevel); 
```

这需要xp/100 的以*1.5*为底的对数（即，您必须将 100 乘以得到 $xp 的次数），然后加一（因为如果 $x 是 log($x, 1.5) 则小于一小于 1.5)。该`min(max(..., minLevel), maxLevel)`构造允许您将级别限制在 1 和 之间`$maxLevel`，同时避免负级别的任何问题（如果`$xp`足够小于 150）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T03:09:19.890

这是我如何做我的水平系统。技能点比较高级。。

```
 <?php
    $level_up = ($level + 1);
if ($exp >= $max_exp)
    {
    $sql = "UPDATE users SET level=(level + 1) , max_exp=(exp * 1.05) , skill_points=(skill_points + 3) WHERE id='".$id."' LIMIT 1";
    $res = mysql_query($sql);
if ($exp >= $max_exp)
        echo '<div class="Leveled">' . 'You sucessfully leveled up to ' . $level_up . '!' . ' As a reward you were given 3 skill points!' . '</div>';
    }
    else
    {
    } 
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:34:55.493

我同意。对象或数组都是最好的。

就像是：

```
$array = array(
    array(
        'xp_required' => 150,
        'level' => 1
    ),
    array(
        'xp_required' => 225,
        'level' => 2
    ),
    array(
        'xp_required' => 337.5,
        'level' => 3
    )
);
$current_xp = 155;
foreach( $array as $reqs ){
    if( $current_xp > $reqs['xp_required'] ){
        $level = $reqs['level'];
    }
}
echo $level'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T02:44:56.647

现在，一旦您获取用户 exp，您就可以将该代码块作为一个函数来不断检查 exp 级别的变化，但使用范围语句

```
 if($xp < 150){
     $level = "1";
  }elseif($xp > 150 && $xp < 225 ){
    $level = "2";
  }elseif($xp > 225 && $xp < 337.5){
    $level = "3";
  } 
```

# excel - 简单的锦标赛支架系统

> ID：12452501
> 
> 赞同：0
> 
> 时间：2012-09-17T02:29:29.970
> 
> 标签：excel

我正在制作一个简单的锦标赛支架系统..

所以基本上我有表 A，其中有两个值。我有一个单元格，其中定义了一个值。

我需要在表 A 中查找该值并将 OTHER 值复制到新单元格..???

所以表的值是“Hello”和“World”。在查找单元格中，我有“你好”这个词。现在我需要将新单元格设为“世界”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:40:33.300

给定单元格 A1:B4 中的 2 x 4 表格，其中一对是“Hello”和“World”，以下函数将获取“World”：

```
=VLOOKUP("Hello", A1:B4, 2) 
```

# go - 如何在go中订购不同结构类型的列表

> ID：12452502
> 
> 赞同：4
> 
> 时间：2012-09-17T02:29:29.987
> 
> 标签：go

我只用 Go 工作了几天。我定义了少量不同的结构类型，每个都包含一个日期。

不知何故，我需要按日期顺序处理这些结构，但这种排序必须跨越多种不同的结构类型。在像 Python 这样的动态类型语言中，很容易创建所有按日期键入的对象的哈希（如果它们不是唯一的，则创建列表的哈希）。在 C 中，我可以使用指针联合或 void*。但我不知道如何在 Go 中做到这一点。

我想我可以保留每种类型的排序列表并随时进行手动合并排序。看起来很笨拙？

我读到的关于处理这种情况的内容似乎指向使用接口，但我真的不知道如何在这种情况下使用它们。

为了争论，假设我有类似的东西：

```
type A struct {
    Date string
    Info string
}

type B struct {
    Date string
    Info int
} 
```

（尽管实际上有更多的结构，并且它们更复杂，具有多个字段），并且只需要按日期顺序打印每个结构的（未排序的）数组的内容。

有没有办法创建一个非统一对象类型的列表（日期、指针）对？

* * *

根据以下第一个建议：

```
package main
import "fmt"

type A struct {
    Date string
    Info string
}
func (x *A) GetDate() string {
    return x.Date
}
type B struct {
    Date string
    Info int
}
func (x *B) GetDate() string {
    return x.Date
}

type Dater interface {
    GetDate() string
}

type Daters []Dater
func (s Daters) Len() int      { return len(s) }
func (s Daters) Swap(i, j int) { s[i], s[j] = s[j], s[i] }
type ByDate struct{ Daters }
func (s ByDate) Less(i, j int) bool {
    return s.Daters[i].GetDate() < s.Daters[j].GetDate()
}   

func main() {
    // lista and listb are just examples. They really come from elsewhere
    lista := []A{{"2012/08/01", "one"}, {"2012/08/03", "three"}}
    listb := []B{{"2012/08/02", 2}, {"2012/08/04", 4}}

    x := make([]Dater, len(lista) + len(listb))
    index := 0
    for i := range(lista) {
        x[index] = &lista[i]
        index++
    }
    for i := range(listb) {
        x[index] = &listb[i]
        index++
    }
    sort.Sort(ByDate{x})
    for _,v := range(x) {
        fmt.Printf("%#v\n", v)
    }
} 
```

这样可行！所以接口的基本使用没问题，我开始更好地理解接口了——谢谢！

注意： x 的创建非常丑陋。我看不到更清洁/更惯用的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:04:35.853

使用方法（例如返回 Date 的 getDate()）定义接口（例如 Dated）。然后让所有结构（A，B，C）实现 Dated 接口。然后你可以定义使用 []Dated 来保存你的类型值。

您可能需要检查包“时间”和“排序”以简化实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:11:24.800

您也许可以使用[嵌入](http://golang.org/doc/effective_go.html#embedding)。

您将定义一个只包含日期的结构，然后将其嵌入到其他结构中。这样，您只需执行一次 GetDate()。您还可以随时扩展 Date 结构，而无需修改其他结构。

```
package main

type Dater interface {
    GetDate() string
}

type Date struct {
    Date string
}

func (d *Date) GetDate() string {
    return d.Date
}

type A struct {
    Date
    Info string
}

type B struct {
    Date
    Info []byte
}

type C struct {
    Date
    Info int32
} 
```

您现在可以在 A、B 和 C 上调用 GetDate()。

# c# - 在浏览器中创建由 en 事件调用的 C# windows 服务

> ID：12452503
> 
> 赞同：0
> 
> 时间：2012-09-17T02:29:49.677
> 
> 标签：c#, c++, dll, windows-services

我是一名 Java 开发人员，对 C# 和 C++ 非常陌生。我正在尝试在 C# 中创建一个 Windows 服务，另一个 Web 应用程序将调用它来关闭 C++ 中的一个项目。我已经用 c++ 创建了一个 dll 文件，其中包含关闭应用程序的方法。

[我创建了http://www.cjvandyk.com/blog/Articles/How-do-I--Create-a-Windows-Service-application-using-Visual-Studio-2010.aspx](http://www.cjvandyk.com/blog/Articles/How-do-I--Create-a-Windows-Service-application-using-Visual-Studio-2010.aspx)中指定的 Web 服务。但是，我不确定如何从 Web 应用程序调用此服务。

有人可以建议我或将我推荐到可以学习如何做到这一点的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:38:00.933

不知道你为什么要走 Windows 服务路线。您的 Web 应用程序应该能够在服务器端执行所有操作。

如果必须使用 Windows 服务，则需要公开某种服务；例如 wcf net.tcp 服务接受关闭您的应用程序的调用。

我建议您重新审视使​​用 Windows 服务的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:23:46.243

您可以尝试 Eltima 公司的软件实用程序应用程序即服务。它提供任何应用程序即服务并提供不同的选项。因此，如果我对您的理解正确-它将对您有所帮助。

[http://download.cnet.com/Application-As-Service/3000-2094_4-10338474.html?tag=mncol;9](http://download.cnet.com/Application-As-Service/3000-2094_4-10338474.html?tag=mncol;9)

# asp.net-mvc-4 - 使用 StructureMap 的 Web API 和 MVC 4 控制器中的问题

> ID：12452510
> 
> 赞同：1
> 
> 时间：2012-09-17T02:31:22.453
> 
> 标签：asp.net-mvc-4, asp.net-web-api, structuremap

我已经启动了一个 Web API 项目，并将其扩展为一个普通的 MVC 项目。我的意思是我有一些控制器`ApiController`来自`Controller`.

这是我的 DependencyResolver：

```
public class StructureMapDependencyResolver :IDependencyResolver
{
    public IDependencyScope BeginScope()
    {
        return this;
    }

    public StructureMapDependencyResolver(IContainer container)
    {
        _container = container;
    }

    public object GetService(Type serviceType)
    {
        if (serviceType.IsAbstract || serviceType.IsInterface)
            return _container.TryGetInstance(serviceType);

        return _container.GetInstance(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.GetAllInstances<object>()
                         .Where(s => s.GetType() == serviceType);
    }

    private readonly IContainer _container;

    public void Dispose() { }
} 
```

这是我的 Global.asax.cs：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);

    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);

    ObjectFactory.Initialize(x =>
        {
            x.For<IDataService>().Use<MockDataService>();
        });
    ObjectFactory.Configure(x => x.Scan(scan =>
        {
            scan.AssembliesFromApplicationBaseDirectory();
            scan.LookForRegistries();
            scan.TheCallingAssembly();
            scan.WithDefaultConventions();
        }));

    var container = ObjectFactory.Container;
    GlobalConfiguration.Configuration.DependencyResolver = 
               new StructureMapDependencyResolver(container);
} 
```

Web API 控制器运行良好，但我无法让构造函数注入在 -`Controller`派生的控制器中工作。当然，这是通常的`No parameterless constructor defined for this object`错误消息。

我在这里有点不知所措……这是我第一次涉足 Web API，所以我不确定我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:43:48.657

您需要调用[DependencyResolver.SetResolver](http://msdn.microsoft.com/en-us/library/gg401985%28v=vs.108%29.aspx)到您的 MVC IOC 容器。确保你的容器也实现了 MVC 的 IDependencyResolver，否则它不适用于 MVC。

# node.js - 登录前阻止来自 NodeJS 和 Sockei.io 的响应

> ID：12452517
> 
> 赞同：2
> 
> 时间：2012-09-17T02:32:44.697
> 
> 标签：node.js, socket.io

在客户端获取会话 cookie 之前，我希望阻止 NodeJS 响应连接尝试，除非对 /login url 发出请求。我添加了以下侦听器以在请求时关闭套接字：

```
server.listeners("request").unshift (request, response)->
  if(request and request.url == "/login")
    # Set /login as the only entrance point to the server
    # A session cookie will be set here
  else
    # Authenticate based on the session cookie
    # if the session is invalid or doesn't exist abort the connection
    request.connection.destroy() 
```

该解决方案是否足以满足我的要求，或者服务器是否会尝试与客户端协商或在请求时间之前做出响应？我在同一个端口上通过 socket.io 使用 https 和 websocket。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:55:20.810

在发出请求时，服务器已经在接受来自客户端的数据。对此您无能为力，但除非您担心有人向您提供大量数据，否则这不是什么大问题。

您所拥有的足以满足您的要求，但请记住，您的解决方案的安全性在很大程度上取决于该会话验证。特别是，防止会话由与最初启动的 IP 地址不同的 IP 地址打开是明智的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:12:37.500

我发现服务器仍然会响应任何连接的 ssl 握手，这意味着我的解决方案是不够的。我将对其进行研究，并可能就如何完成我想要的事情提出一个单独的问题。

# sql-server - 为 xml 列执行“仅在不存在具有特定值的节点时插入”的有效方法

> ID：12452522
> 
> 赞同：2
> 
> 时间：2012-09-17T02:33:05.930
> 
> 标签：sql-server, xml, tsql, xquery-sql

说，我有一个看起来像这样的 xml 列：

```
<mi>
  <m>42</m>
</mi> 
```

假设表：

```
Word(WordId:bigint, Wordtext:nvarchar, MessageIndex:xml) 
```

如果 @MessageId 已经存在于 Messageindex 的 xml 树中的某个位置，我不希望以下参数化查询插入新的 xml 节点，而是要么失败并出现确定性错误代码，要么静默：

```
begin try
    insert into Word (WordText, MessageIndex) values (@WordText, '<mi></mi>');
    update Word set MessageIndex.modify('insert (<m>{sql:variable(""@MessageId"")}</m>) into(/mi)[1]') where WordId = scope_identity();
end try
begin catch
    if error_number() = 2627
    begin
        update Word set
            MessageIndex.modify('insert (<m>{sql:variable(""@MessageId"")}</m>) into(/mi)[1]')
        where
            WordText = @WordText;
    end
    else
        throw
end catch 
```

从 Word 中选择 WordId，其中 WordText = @WordText;

**我如何有效地**做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T00:12:10.893

像这样的东西适合你吗？

```
DECLARE @Word TABLE (WordId bigint identity, Wordtext NVARCHAR(20), MessageIndex xml ) 

insert into @word ( messageIndex )
select '<mi> 
  <m>42</m> 
</mi>'

DECLARE @WordText NVARCHAR(20) = 'wordText'
DECLARE @messageId INT = 42

begin try 

    if exists ( select 1 from @Word where MessageIndex.exist('//mi[.=sql:variable("@MessageId")]') = 0 )
    begin
        insert into @Word (WordText, MessageIndex) values (@WordText, '<mi></mi>'); 

        update @Word set MessageIndex.modify('insert <m>{sql:variable("@MessageId")}</m> into (mi)[1]') 
        where WordId = scope_identity(); 

    end
    --else
        -- do something here?

end try 
begin catch 
    if error_number() = 2627 
    begin 
        update @Word set MessageIndex.modify('insert <m>{sql:variable("@MessageId")}</m> into (mi)[1]') 
        where WordText = @WordText; 
    end 
    else 
        throw 
end catch 

select * from @Word 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-14T17:11:46.223

这是一篇较旧的帖子，但我想分享我的解决方案，当**元素****存在**或**不**存在时适用：

首先，当元素（varchar 类型）存在时，我们需要更新：

```
UPDATE PD 
SET  
[ValuesXml].modify('replace value of
(/Employee/KeyValue/text())[1] with (sql:column("x.KeyValue"))')
FROM Pdetail PD  
INNER JOIN TableXml x ON PD.PId = x.PId 
WHERE PD.[ValuesXml].exist('/Employee/KeyValue') = 1 
```

其次，我们需要在元素不存在时插入：

```
UPDATE PD
SET 
[ValuesXml].modify(
'insert <KeyValue>{sql:column("x.KeyValue")}</KeyValue> into (/Employee)[1]')
FROM RK.Pdetail PD 
INNER JOIN TableXml x ON PD.PId = x.PId 
WHERE PD.[ValuesXml].exist('/Employee/KeyValue') = 0 
```

如果您需要使用 XML 中的多个实体实例，则需要使用 CROSS APPLY 并删除 [1] 单例指示器。

# java - Rabin-Karp 哈希码太大

> ID：12452527
> 
> 赞同：1
> 
> 时间：2012-09-17T02:34:15.460
> 
> 标签：java, algorithm, hash, string-matching

如何处理滚动哈希 Rabin-Karp 算法中的大哈希码值？我使用模运算来避免负数，但是当哈希码超过我的模数（N = 83559671）时会出现问题。我将我的基数设置为素数（计算哈希码的数字）以及模数（非常大），但它不适用于长字符串。任何人都可以看到问题吗？

这是我的代码。

```
 public static void main(String [] args){

       int P = 13;         // base
       long M = 83559671;
       long iHash = 0;    
       String word = "abcbadccaaaabbbb";
       int WINDOW = 9;

       for(int i = 0; i < WINDOW; i++){
            iHash = int_mod(int_mod(iHash*P, M) + word[i], M);
       }

       for(int i = WINDOW; i < word.length; i++){
            iHash = int_mod(iHash - word[i-WINDOW] * get_pow(P, WINDOW-1, M), M);
            iHash = int_mod(iHash * P, M);
            iHash = int_mod(iHash + word[i], M);
       }

   }
   public static long get_pow(int p, int t, long M){
        long a = 1;
        for(int i = 0 ; i < t; i++){
              a = int_mod(a * p, M);
        }
        return a;
   }

   public static long int_mod(long a, long b){
        return (a % b+ b) % b;
   } 
```

问题是当我有任何字符串的长度超过 8 时，字符串的哈希码超过了模数 83559671，当我进行比较时会导致错误的答案。任何较短的字符串都可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T17:23:01.800

你根本不需要做模数。这是一个演示：

```
public class Foo {
  private static int hash(String s) {
    int hash = 0;
    for (int i = 0; i < s.length(); i++) {
      hash *= 31;
      hash += s.charAt(i);
    }
    return hash;
  }

  public static void main(String[] args) {
    String s1 = "abcdefghij";
    String s2 = s1.substring(1) + "k";
    int pow = 1;
    for (int i = 0; i < s1.length(); i++) {
      pow *= 31;
    }
    System.out.printf("hash(%s) = %d%n", s1, hash(s1));
    System.out.printf("hash(%s) = %d%n31 * hash(%s) - (31^%d * %s) + %s = %s%n",
        s2,
        hash(s2),
        s1,
        s1.length(),
        s1.charAt(0),
        s2.charAt(s2.length() - 1),
        31 * hash(s1) - (pow * s1.charAt(0)) + s2.charAt(s2.length() - 1));
  }
} 
```

这（正确）打印出来：

```
hash(abcdefghij) = -634317659
hash(bcdefghijk) = 21611845
31 * hash(abcdefghij) - (31^10 * a) + k = 21611845 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:39:59.950

为什么不将字符串视为多项式？假设您有一个`S`长度为的字符串`n`。现在看看下面的函数：`F(x) = S[0]*x^(n-1) + S[1]*x^(n-2) + ... + S[i]*x^(n-i-1) + ... + S[n - 2]*x + S[n-1]`. 如果您尝试计算`F(P)`，`P`代码片段的基础在哪里，会发生什么？好吧，你会得到 string 的 Rabin-Karp 哈希值`S`。但由于`F(x)`是多项式，我们可以使用[霍纳规则](http://en.wikipedia.org/wiki/Horner%27s_method)来计算`F(P)`. 结果值可能非常大，因此我们使用模运算：

```
static final long M = 83559671;
static final int Base = 13;

static long hash(String s, int from, int to) {
    int iHash = 0;
    for(int i = from; i < to; i++) {
        iHash *= Base;
        iHash += s.charAt(i);
        iHash %= M;
    }
    return iHash;
} 
```

您可以使用此函数获取要在文本中找到的字符串的哈希值。而对于文本中的初始窗口。然后您可以移动窗口并重新计算哈希：

```
static void find(String pattern, String text) {
    if(text.length() < pattern.length()) return;
    int len = pattern.length();
    long ph = hash(pattern, 0, len);
    long h = hash(text, 0, len);
    long basePower = mpow(Base, len);

    if(h == ph) System.out.println("match at 0");
    for(int i = len; i < text.length(); i++) {
        h *= Base;
        h += text.charAt(i);
        h -= basePower * text.charAt(i - len);
        h = mod(h);
        if(h == ph) System.out.println("match at " + (i - len + 1));
    }
}

static long mod(long a) {
    a %= M;
    if(a < 0) {
        a += M;
    }
    return a;
}

static long mpow(long x, int k) {
    long result = 1;
    for(; k > 0; k >>= 1) {
        if(k % 2 == 1) {
            result = mod(result * x);
        }
        x = mod(x * x);
    }
    return result;
}

public static void main(String[] args) {
    find("abracadabra", "abracadabracadabra");
} 
```

有关此方法的更多信息，我建议参考[CLRS](http://en.wikipedia.org/wiki/Introduction_to_Algorithms)。

# jquery - 如何按显示顺序获取 jQuery Chosen 的值？

> ID：12452531
> 
> 赞同：1
> 
> 时间：2012-09-17T02:34:44.837
> 
> 标签：jquery, jquery-chosen

我正在使用“Chosen”插件使选择看起来更好，我的问题是，我如何才能在显示时按顺序获取所选项目的值，表单提交和 val() 都为您提供顺序中的值它是如何被列出的。

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

```
<!DOCTYPE html>
<html><head><title></title>
<link rel="stylesheet" type="text/css" href="chosen.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="chosen.jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#CheckValue').click(function() {
        alert($('#test').val());
    });
    $('#test').chosen();
});
</script></head><body>
<?PHP if(isset($_REQUEST['test'])) var_dump($_REQUEST['test']); ?>
<form method='post'>
<select id='test' name='test[]' multiple style='width:200px;'>
    <option value=1>1</option>
    <option value=2>2</option>
    <option value=3>3</option>
    <option value=4>4</option>
    <option value=5>5</option>
</select><br />
<input type=button id='CheckValue' value='CheckValue' />
<input type=submit value='Submit' />
</form></body></html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:46:41.273

![在此处输入图像描述](../Images/a4fca3575d9a1b8e505feae5c58e635d.png)

看看图片，你会看到一个 id 为 selTJI_chzn 的 div，其中显示了一些 li 元素。你可以像上面那样做

```
$(function(){
    var ret = [];
    $('#selTJI_chzn').find('.search-choice').each(function(){
      var selectedValue = $(this).find('span').text();
      ret.push(selectedValue);  
    })
    console.log(ret);
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T17:50:54.550

我知道的老问题......但我有同样的问题，遇到了这个小插件，允许简单的获取/设置选择的多选：[https ://github.com/tristanjahier/chosen-order](https://github.com/tristanjahier/chosen-order)

# postgresql - 嵌套查询作为 PostGIS 函数参数

> ID：12452533
> 
> 赞同：2
> 
> 时间：2012-09-17T02:34:58.657
> 
> 标签：postgresql, postgis, postgresql-9.1, npgsql, nested-query

我有一个 PostGIS 查询，我确实需要在 PostGIS 函数调用中进行嵌套查询：

```
UPDATE raw.geocoding
SET the_geom = ST_Centroid(
   ST_Collect(
     SELECT the_geom
     FROM raw.geocoding
     WHERE hash = ((E'0101000020090C000081610F9CC5DC3341EE672E6E723B3241')::varchar),
     SELECT the_geom
     FROM raw.geocoding
     WHERE hash = ((E'0101000020090C00002CF887E0C5DC3341C9E5B2DF2A383241')::varchar)
    )
  )
WHERE hash = ((E'3e638a27c6c38f05026252f4a0b57b2e')::varchar) 
```

不幸的是，这不起作用。在嵌套查询开始时出现语法错误：

```
ERROR:  syntax error at or near "SELECT"
LINE 4:          SELECT the_geom
                 ^

********** Error **********

ERROR: syntax error at or near "SELECT"
SQL state: 42601
Character: 86 
```

看起来我不能将嵌套查询作为 PostGIS 函数参数？

我仔细阅读了 PostGIS 文档，但找不到任何明确的指导来处理这个问题。

似乎 Postgres 有一种在 pgSQL 中处理变量的方法，但我不清楚如何在标准查询中实现这一点。这是一个将从 C# 程序运行数万或数十万次的查询。除此之外，如果需要，我可以执行 pgSQL 存储过程；只是想先确定没有更简单的替代方案。

如果您想知道，查询看起来很混乱，因为它是 npgsql 生成的参数化查询的结果。我认为可以公平地说 npgsql 对多余的输入和转义非常谨慎。

我正在运行 PostGIS 2.0.1、Postgres 9.1.5 和 npgsql 2.0.12。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:45:29.697

It sounds like you want a [scalar subquery](http://www.postgresql.org/docs/current/static/sql-expressions.html#SQL-SYNTAX-SCALAR-SUBQUERIES), an expression written like `(SELECT ....)` (note enclosing parentheses) that contains a query returning either zero rows (NULL result) or one field from one row.

You were most of the way there, you just needed the parens:

```
UPDATE raw.geocoding
SET the_geom = ST_Centroid(
   ST_Collect(
     (SELECT the_geom
     FROM raw.geocoding
     WHERE hash = ((E'0101000020090C000081610F9CC5DC3341EE672E6E723B3241')::varchar)),
     (SELECT the_geom
     FROM raw.geocoding
     WHERE hash = ((E'0101000020090C00002CF887E0C5DC3341C9E5B2DF2A383241')::varchar))
    )
  )
WHERE hash = ((E'3e638a27c6c38f05026252f4a0b57b2e')::varchar) 
```

Note that subqueries can be used in other places too - table returning subqueries can appear in `FROM`, for example. The [PostgreSQL manual](http://www.postgresql.org/docs/current/static/index.html) teaches about all this, and is well worth a cover-to-cover read.

If you're doing a lot of these updates, you may find it more efficient to formulate the `UPDATE` as a join using the PostgreSQL extension `UPDATE ... FROM ... WHERE` rather than running lots of individual `UPDATE`s over and over. I just wanted to raise the possibility. See [*from-list* in `UPDATE`](http://www.postgresql.org/docs/current/static/sql-update.html)

# ios - 将包含日志的文本文件插入 SQLite 数据库

> ID：12452536
> 
> 赞同：1
> 
> 时间：2012-09-17T02:35:40.143
> 
> 标签：ios, ios5, logging, sqlite

我曾使用一种方法将我的所有日​​志重定向到一个文本文件中。问题是我不知道如何将文本文件存储到 SQLite 数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:44:39.143

I would use Blob fields. [here](http://effbot.org/zone/sqlite-blob.htm) is a description how to do it. And of course the content of the file should be stored. The file itself can be stored elsewhere, with a HTTP POST...

# java - 如何在 wsdl 中指定 java.util.HashMap (key ==> value)

> ID：12452537
> 
> 赞同：2
> 
> 时间：2012-09-17T02:35:42.680
> 
> 标签：java, soap, wsdl

现有的 WebService（用 PHP 编写）将 Key、Value Store 指定为`xsd:struct`. 因为 Axis 不知道如何解释这一点，所以我喜欢下载并修补 Wsdl 以供我个人使用。

最后，生成的请求应如下所示：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:emn="interface.foobar">
<soap:Header/>
<soap:Body>
    <emn:searchFoobar>
    <emn:searchParameter>
        <emn:username>xxxx</emn:username>
        <emn:password>xxxx</emn:password>
        <emn:maxHitCount>1</emn:maxHitCount>
        <emn:sorting>distance</emn:sorting>
        <emn:searchtext>example</emn:searchtext>        
    </emn:searchParameter>
    </emn:searchFoobar>
</soap:Body>
</soap:Envelope> 
```

在此示例中，它在我的客户端上`searchParameter`用作。`java.util.HashMap`它的子项是 Key 和 Value 条目。

就像这样：

```
<emn:hashmapName>
    <key1>value1</key1>
    <key2>value2</key2>
    <key3>value3</key3>
</emn:hashmapName> 
```

完整的 WSDL 如下所示（最后我喜欢用 替换`xsd:struct`）`java.util.HashMap`：

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://foobar.service.de/service/v2" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="Soap_Manager" targetNamespace="http://foobar.service.de/service/v2">
    <types>
        <xsd:schema targetNamespace="http://foobar.service.de/service/v2"/>
    </types>
    <portType name="Soap_ManagerPort">
        <operation name="searchFoo">
            <documentation>searchFoo</documentation>
            <input message="tns:searchFooIn"/>
            <output message="tns:searchFooOut"/>
        </operation>
    </portType>
    <binding name="Soap_ManagerBinding" type="tns:Soap_ManagerPort">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="searchFoo">
            <soap:operation soapAction="http://foobar.service.de/service/v2#searchFoo"/>
            <input>
                <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://foobar.service.de/service/v2"/>
            </input>
            <output>
                <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://foobar.service.de/service/v2"/>
            </output>
        </operation>
    </binding>
    <service name="Soap_ManagerService">
        <port name="Soap_ManagerPort" binding="tns:Soap_ManagerBinding">
            <soap:address location="http://foobar.service.de/service/v2"/>
        </port>
    </service>
    <message name="searchFooIn">
        <part name="param" type="xsd:struct"/>
    </message>
    <message name="searchFooOut">
        <part name="return" type="xsd:struct"/>
    </message>
</definitions> 
```

有人可以告诉我如何`java.util.HashMap`为这种用途指定 a 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T03:48:45.143

从这里下载 apache axis[链接下载](http://axis.apache.org/axis2/java/core/download.cgi#std-bin)

下载后，解压缩或按照安装说明进行操作。它带有一个名为 wsdl2java 的实用程序，它将读取您的 wsdl 文件并为其构建 java 类。

我将您的 wsdl 从上面保存到名为 c:\temp\test.wsdl 的文件中

然后我像这样对它运行 wsdl2java 命令：

```
wsdl2java -uri c:\temp\test.wsdl 
```

它生成了一个源文件夹，其中包含来自您的 wsdl 的包名称和 2 个可用于调用该服务的 java 类。

# php - 在php中拦截mysql流量

> ID：12452539
> 
> 赞同：0
> 
> 时间：2012-09-17T02:35:55.830
> 
> 标签：php, sockets, mysqli

我不认为有办法使用 PHP 拦截 mysql_query 发送的内容并在发送之前重写它？

mysqli::__construct 有一个选项参数 $socket。如果可以为该参数传递流，那么您可以将 php://memory 传递给它，但它似乎不是那样工作的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:59:19.330

您可以使用 squid 之类的东西设置代理服务器，该代理服务器将从前端转发到数据库服务器。

# c - Valgrind 报告 OS X 10.8.1 内存泄漏

> ID：12452541
> 
> 赞同：5
> 
> 时间：2012-09-17T02:36:23.857
> 
> 标签：c, memory-leaks, valgrind, osx-mountain-lion

我在 OS X 10.8.1、Mountain Lion 上使用 Valgrind 3.8.0 版。关于与 10.8.1 的兼容性，[Valgrind 的网站](http://valgrind.org/downloads/)说（我的斜体字）：

> *Valgrind 3.8.0 适用于*{x86,amd64}-darwin（Mac OS X 10.6 和 10.7，对 10.8 的支持有限）。

那么，我知道 10.8.1 只有“有限支持”。尽管如此，[这个错误报告](https://bugs.kde.org/show_bug.cgi?id=304259)说（斜体是我的）：

> 这*（最新的 3.8.0 版本）*使*Valgrind* 能够编译并能够在 OSX 10.8 上运行小程序。但请注意，它仍然适用于更大的应用程序，并且根本没有正确检查 32 位程序（Memcheck 遗漏了大多数错误）。

没关系。所以 Valgrind 应该可以在 10.8.1 上工作，如果有气质的话。所以现在我的问题：

我能够让 Valgrind 在 10.8.1 上轻松编译，但是当我在几个小型 C 程序上运行它时，我看到了一些奇怪的结果。为了尝试减少问题的可能原因，我最终编写了以下“程序”：

```
int main () {                                                               
    return 0;
} 
```

我会说，这不是很令人兴奋，而且几乎没有错误的空间。然后，我编译并通过 Valgrind 运行它：

```
gcc testC.c
valgrind ./a.out 
```

这是我的输出：

```
==45417== Command: ./a.out
==45417== 
==45417== WARNING: Support on MacOS 10.8 is experimental and mostly broken.
==45417== WARNING: Expect incorrect results, assertions and crashes.
==45417== WARNING: In particular, Memcheck on 32-bit programs will fail to
==45417== WARNING: detect any errors associated with heap-allocated data.
==45417== 
--45417-- ./a.out:
--45417-- dSYM directory is missing; consider using --dsymutil=yes
==45417== 
==45417== HEAP SUMMARY:
==45417==     in use at exit: 58,576 bytes in 363 blocks
==45417==   total heap usage: 514 allocs, 151 frees, 62,442 bytes allocated
==45417== 
==45417== LEAK SUMMARY:
==45417==    definitely lost: 8,624 bytes in 14 blocks
==45417==    indirectly lost: 1,168 bytes in 5 blocks
==45417==      possibly lost: 4,925 bytes in 68 blocks
==45417==    still reachable: 43,859 bytes in 276 blocks
==45417==         suppressed: 0 bytes in 0 blocks
==45417== Rerun with --leak-check=full to see details of leaked memory
==45417== 
==45417== For counts of detected and suppressed errors, rerun with: -v
==45417== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

我知道 Valgrind 还没有准备好迎接 10.8.1 的黄金时段。尽管如此，我还是希望能够在这里使用它——我只需要在小程序上使用它，而且对于即时的结果来说，没有什么是关键任务。但很明显，它报告了一个似乎不太可能泄漏的程序中的大量泄漏。因此：

**我应该怎么做才能解决这个问题？**

* * *

其他信息：

*   添加一个故意泄露的整数*确实*会将“肯定丢失”的计数增加适当的 4 个字节。
*   同样，通过不释放内存而故意泄漏对 malloc 的调用*确实会*适当地增加堆分配计数。
*   使用标志编译`-g`然后运行到 Valgrind（以解决`dSYM directory is missing`错误）确实会导致该错误消失，但*不会*改变报告大量内存泄漏的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T05:09:26.290

它在那里告诉你：

> 预期不正确的结果、断言和崩溃。

如果您仍想运行它，请打印有关虚假泄漏的详细信息 ( `--leak-check=full`) 并使用它来[隐藏](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)有关它们的消息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T18:07:13.057

Valgrind 树干似乎已经改进到现在可以使用的程度。我还没有看到它崩溃，但确实有很多误报，可以使用抑制文件来处理。

现在，我的抑制文件如下所示：

```
# OS X 10.8 isn't supported, has a bunch of 'leaks' in the loader
{
   osx_1080_loader_false_positive_1
   Memcheck:Leak
   ...
   fun:_ZN11ImageLoader23recursiveInitializationERKNS_11LinkContextEjRNS_21InitializerTimingListE
   ...
}
{
   osx_1080_loader_false_positive_2
   Memcheck:Leak
   ...
   fun:_ZN16ImageLoaderMachO16doInitializationERKN11ImageLoader11LinkContextE
   ...
}
{
   osx_1080_loader_false_positive_3
   Memcheck:Leak
   ...
   fun:map_images_nolock
   ...
}
{
   osx_1080_loader_false_positive_4
   Memcheck:Leak
   ...
   fun:_objc_fetch_pthread_data
   fun:_ZL27_fetchInitializingClassLista
   fun:_class_initialize
   fun:_class_initialize
   fun:_class_initialize
   fun:_class_initialize
   fun:prepareForMethodLookup
   fun:lookUpMethod
   fun:objc_msgSend
   fun:_libxpc_initializer
   fun:libSystem_initializer
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T21:09:14.043

我还在 mac osx 10.8 上从 macports 运行 valgrind。它运行时不会崩溃，但确实会产生一些疯狂的结果，就像这个 stackoverflow 帖子中的结果一样，[Valgrind 的混淆输出显示间接丢失的内存泄漏，但没有绝对丢失或可能丢失](https://stackoverflow.com/questions/22670130/confusing-output-from-valgrind-shows-indirectly-lost-memory-leaks-but-no-definit/22672976#22672976)。

# c# - 尝试在 C# 中调用 ArrayList 中索引的对象的方法

> ID：12452542
> 
> 赞同：2
> 
> 时间：2012-09-17T02:36:31.753
> 
> 标签：c#, object, methods, arraylist

我是 C# 新手，我正在编写一个程序，其中有一个`ArrayList` *( `unitArray`)*对象，`Unit`并试图`non-static`在`ArrayList`. 我尝试访问特定对象并调用它的方法，但它不起作用。我将不胜感激帮助解决此问题。

```
Unit.unitArray[selectedUnit].DisplayUnitAttributes() 
```

我得到以下异常：

```
'object' does not contain a definition for 'DisplayUnitAttributes' and no extension method 'DisplayUnitAttributes' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:41:21.297

您需要将对象转换为其类型。代替下面的 MyClass，替换您的实际班级类型。

```
(Unit.unitArray[selectedUnit] as MyClass).DisplayUnitAttributes() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T02:49:59.470

`ArrayList`从 an中提取的元素类型`System.Object`是 C# 中所有对象的基类。

您必须将 element 转换为派生类型才能访问方法，或者更好地使用`System.Generic.List<T>`其中 T 是列表中元素的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T02:58:39.330

您可以使用[Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)来获取必要的子数组。像这样的东西：

```
foreach (YourClass obj in Unit.unitArray.OfType<YourClass>())
    obj.DisplayUnitAttributes(); 
```

# unix - Unix cp 命令目的地 = . （点）？

> ID：12452546
> 
> 赞同：1
> 
> 时间：2012-09-17T02:36:46.193
> 
> 标签：unix, command-line, copy, command

`.`（点）作为命令的目的地是什么意思`cp`？

例如：

```
cp ~dir1/dir2/dir3/executableFile.x . 
```

执行此操作时，它会使用正确的文件名成功复制文件，但我想知道这是 '.' 的目的地。会一直做还是有其他目的？

在我看到的参考资料中，文件前面使用点表示“隐藏”，但这与上面的命令无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:38:22.103

dot 代表当前目录，而 dotdot 是父目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:21:27.470

正如 EvilTeach 的回答所说，`.`是当前目录，并且`..`是父目录。

基本上有两种使用`cp`命令的方法：

```
cp file1 file2 
```

将复制`file1`到`file2`，如果它不存在则创建`file2`，或者（取决于权限）如果存在则可能破坏它。

另一种方式是：

```
cp file1 file2 ... dir 
```

`dir`现有目录在哪里。使用这种形式，您可以指定一个或多个文件，它们*都将*`dir` *以其现有名称*复制到指定目录中。

（有时这可能是一个陷阱；`cp foo bar`根据是否存在名为 的现有目录，其行为会非常不同`bar`。）

正如您所提到的，名称以开头的文件（包括目录）`.`是*hidden*。这意味着（a）该`ls`命令不会列出它们（除非您使用`-a`or`-A`选项），以及（b）一个 shell 通配符，例如`*`or`*.txt`将省略它们。（如 Nautilus 之类的 GUI 目录管理器也可能会忽略它们，具体取决于您的设置。）

这适用于当前目录`.`和父目录`..`。 `ls`不会在其输出中包含`.`and`..`条目；`ls -a`将要。

# php - 从 php 中的内联数据创建父子数组

> ID：12452548
> 
> 赞同：0
> 
> 时间：2012-09-17T02:36:49.747
> 
> 标签：php, arrays

实际上我有一个简单的问题，但我忘记了如何解决它.. :D 我在表格上有以下格式的数据
`01 Johson 01 Craig`
`01 Johson 02 Daniel`
`01 Johson 03 Abbey`
`02 Dawson 01 Brown`
`02 Dawson 02 Agust`
`03 Brick 01 Chev`
`03 Brick 01 Flinch`

所以我希望它成为一个像这样的数组
`01 Johson => 01 Craig`
```````````````02 Daniel`
````````````````03 Abey` `等等......
如何遍历数据并使其成为这样的数组......我是PHP的新手:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:35:23.147

这是你想要的吗？

```
$results = array();
while ($row = mysqli_fetch_assoc($query_result)) {
  $parent = $row['parentid'].' '.$row['parentname'];
  if (!array_key_exists($parent, $results)) {
    $results[$parent] = array();
  }
  $results[$parent][] = $row['childid'].' '.$row['childname'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:01:39.597

有很多方法可以得到结果，尽管我偏爱使用[mysql 组 concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
select 
    col1, 
    group_concat(col2) as col2 
from 
    tableName 
group by 
    col1; 
```

这将以逗号分隔的字符串形式返回特定的数据列，然后您可以很容易地在 PHP 代码中[爆炸](http://php.net/manual/en/function.explode.php)，因为它来自数据库。

即使逗号是 group_concat 的默认值，您也可以轻松更改它以连接不同字符串上的数据行。

# r - 在 R RasterStack 上为每个单元实现 which.max()

> ID：12452549
> 
> 赞同：-1
> 
> 时间：2012-09-17T02:37:04.053
> 
> 标签：r, max, apply, raster

2012 年 9 月 17 日更新

这是一段使用自包含数据的代码，可以重现我的问题：

请记住，我拥有的实际数据维度是巨大的......

尺寸：3105、7025、21812625、12（nrow、ncol、ncell、nlayers）

我需要的是每一行的最大值的索引，列在图层上。所有 NA 应返回 NA 并且多个最大副本应返回第一个最大索引（或其他内容，必须一致）

```
# Create a test RasterStack

require(raster)

a <- raster(matrix(c(11,11,11,
                     NA,11,11,
                     11,11,13),nrow=3))

b <- raster(matrix(c(12,12,12,
                     NA,12,12,
                     40,12,13),nrow=3))

c <- raster(matrix(c(13,9,13,
                     NA,13,13,
                     13,NA,13),nrow=3))

d <- raster(matrix(c(10,10,10,
                     NA,10,10,
                     10,10,10),nrow=3))

corr_max <- raster(matrix(c(13,12,13,
                            NA,13,13,
                            40,12,13),nrow=3))

stack <- stack(a,b,c,d)

which.max2 <- function(x, ...)which.max(x)

# stackApply method
max_v_sApp <- stackApply(stack,rep(1,4),which.max2,na.rm=NULL)

# calc method
max_v_calc <- calc(stack,which.max) 
```

希望这提供了足够的信息。

更新：

这可能有效......现在测试：

```
which.max2 <- function(x, ...){
  max_idx <- which.max(x)   # Get the max
  ifelse(length(max_idx)==0,return(NA),return(max_idx))
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:07:56.073

这是一个解决方案的猜测。这不是因为 which.max 不“支持” na.rm 论点，只是它已经假设它并且只有“空间”用于数据论点。对取自帮助页面的小测试用例进行了测试，但未对您的数据进行测试。您可以使用以下任何一种：

```
require(raster)
 which.max2 <- function(x, ...) which.max(x)           # helper function to absorb "na.rm"
 wsa <- stackApply(PRISM_stack, rep(1,12), fun=which.max2, na.rm=NULL) 
```

显然，这种方法不需要辅助函数来剥离 na.rm：

```
calc(PRISM_stack, which.max) 
```

对于一个单元格中所有 NA 的新问题，这似乎可以通过任何一种方法成功：

```
which.max2 <- function(x, ...) ifelse( length(x) ==sum(is.na(x) ), 0, which.max(x)) 
```

就像这样：

```
which.max2 <- function(x, ...) ifelse( length(x) ==sum(is.na(x) ), NA, which.max(x)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:05:28.100

所以，这是我发现的最后一个问题和我的解决方案。

我遇到的问题 which.max() 是它如何处理所有 NA 的向量

```
>which.max(c(NA,NA,NA))
integer(0)
> 
```

当 stackApply() 函数尝试将此值写入新的 RasterLayer 时，它会失败。在函数应该返回 NA 的地方，它返回长度 = 0 的整数（0）。

解决方案（我的解决方案）是为 which.max() 编写一个包装器

```
which.max.na <- function(x, ...){
   max_idx <- which.max(x)
   ifelse(length(max_idx)==0,return(NA),return(max_idx))
} 
```

这个，在我原来的 RasterStack 上实现的效果很好。感谢所有人的帮助，如果您有这些解决方案，请提出替代方案！

谢谢！凯尔

# c# - C# 不能声明 Int 的公共双精度数组：字段永远不会分配给，并且始终具有其默认值 null

> ID：12452551
> 
> 赞同：1
> 
> 时间：2012-09-17T02:37:09.877
> 
> 标签：c#, multidimensional-array, compiler-errors

我在这一行收到一个错误：

`public int[][] mySpiros;`

错误如下：

`Field Spirograph.myList.mySpiros is never assigned to, and will always have its default value null`.

现在这一行写在一个类中。我只想创建一个双精度数组，这样我就可以为用户生成的每个绘图（螺旋图）存储我的未来参数。

编辑：似乎实例化多个数组`integers`不是微软最喜欢的动作：

![在此处输入图像描述](../Images/309746103438bc391f20bd22e7a255ad.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:45:00.457

You're creating [array of arrays](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx) so you need to instantiate arrays like:

```
public int[][] mySpiros;

//create three reference variables to hold array references
mySpiros=new int[3][];

mySpiros[0]=new int[4];
mySpiros[1]=new int[] {11,22,33,44};
mySpiros[2]=new int[40]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:44:53.483

This is usually a warning, and not an error. Make sure you haven't set "Treat Warning as Error" in the Project setting. Right click on project->Properties and set this: [Screenshot](http://lh4.ggpht.com/_MtIkzYP1hdI/TdoCKJWdBJI/AAAAAAAAAJA/qMusgujgX6Q/treat%20warnings%20as%20errors%5B6%5D.png)

Make sure it is set to "None". That should allow you to build and run.

Be aware, this warning means your code is never creating an instance of this field, which in turn will generate null reference exception!

# ios - 约束必须包含第一个布局项 NSLayoutConstraint

> ID：12452556
> 
> 赞同：16
> 
> 时间：2012-09-17T02:39:25.563
> 
> 标签：ios, autolayout, nslayoutconstraint

我的 LayoutConstraints 工作正常，然后突然间我在将约束添加到我的视图时开始得到这个。

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** +[NSLayoutConstraint constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:]: Constraint must contain a first layout item'
*** First throw call stack:
(0x7cd012 0x2017e7e 0x7ccdeb 0xde6bf1 0x9c487 0x994a3 0x414fb 0x20224 0x5c6c0 0xc30e83 0x78c376 0x78be06 0x773a82 0x772f44 0x772e1b 0x28eb7e3 0x28eb668 0x149465c 0x2cfd 0x2c25)
libc++abi.dylib: terminate called throwing an exception 
```

互联网上或 Apple Docs 上没有关于错误消息含义的即时文档。

只是想知道是否有人遇到过这个错误，并且知道我可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-25T10:45:05.743

此错误/崩溃的另一个原因可能是，传递给 [NSLayoutContraint constraintWithItem ...] 方法的视图为零。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-17T02:42:14.517

Ah, found the issue. For anyone who has this issue, it's because the view hasn't been created in the nib/UIView yet, so no constraints can apply.

I moved the Constraint code from the initWithNib method to viewDidLoad and the error naturally stopped occurring.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-17T01:22:09.897

如果您坚持对属性的看法，请确保它们很强大！这可以解释他们为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T12:11:56.257

如果您出于某种原因关闭自动布局，也会发生这种情况，但您仍然通过代码向任何子视图添加约束（例如，用于处理方向更改）

当我使用 iPhone 和 iPad 的不同 NIB 并在使用通用 .m 文件时仅关闭 iPhone NIB 的自动布局时，这发生在我身上。

解决方案是检查设备类型并在不需要的地方跳过布局添加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-08T09:08:53.430

当我不小心删除了我的一个 UI 元素的“引用插座”时，就会发生这种情况。

# c++ - 如何访问作为双指针传递的数组元素？

> ID：12452558
> 
> 赞同：0
> 
> 时间：2012-09-17T02:39:49.580
> 
> 标签：c++

这是函数的原型`sum`，我用来对两个任意数组的元素求和。

```
double **sum(double **A, double **B, int M, int N); 
```

它们都作为双指针传递（不要问为什么），`M`并且`N`应该分别是数组的维度。

我遇到的麻烦是，在函数的实现中，访问数组的元素。我已经尝试“推迟”数组（或者我认为）但无济于事。以下是我尝试过的事情：

```
> *A;  // Gives me an address, 0xf5c28f5c, not a number
> **A; // Error
> &A;  // Gives me the address of A 
```

如果有帮助，这就是我将数组传递给的方式`sum`：

```
double a[] = {5.34, 5.23, 6.5, 3.51};
double b[] = {74.3, 42.1, 642.2, 54.2};

sum( (double **) a, (double **) b, 4, 4); 
```

所以问题是，当通过指针/双指针传递时，我应该如何获取数组中的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:20:24.097

您对函数的数组通道是完全不正确的。最好将双指针视为指向指针的指针。同样，指针是一个变量，它在某个地方保存指向内存的地址，指向指针的指针保存一个类似的地址，它所引用的内存恰好是另一个指针占用的内存。这最好通过示例来描述：

```
include <stdio.h>

int main(int argc, char* argv[])
{
    int a = 5;
    int *p = &a;
    int **pp = &p;
    printf("pp=%p, &p=%p, p=%p, &a=%p *p=%d\n", pp, &p, p, &a, *p);
    return 0;
} 
```

在我的 MBA 64 位上，这给了我们：

```
pp=0x7fff50828bc8, &p=0x7fff50828bc8, p=0x7fff50828bd4, &a=0x7fff50828bd4 *p=5 
```

掌握这一点，我想你会在你的代码中找到你的问题，其中第一个是硬转换为'a'和'b'的双指针。也许试试他们的地址。其次，您可能希望重新审视如何在函数中使用这些指针进行取消引用，因为这也可能需要工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T04:08:24.270

问题不在于从`double**`函数内部的 when 检索值，这很简单。问题是您正在创建一个**数组**而不是一组指针。您的函数不能接受 this 作为参数，并且当您尝试使用`(double**)`该`A`参数进行强制转换时，当像`**`.

```
double** sum(double** A, int size)
{
  printf("First element: %f", A[0][0]); // Print the first element      
  printf("Last element: %f", A[size-1][size-1]); // Print the last element.
  return A;
}

const unsigned int SIZE = 4;
double** a = new double*[SIZE];
for(int i=0; i<SIZE; i++)
{
  a[i] = new double[SIZE];
}

a = sum(a, SIZE); 
```

使用这样的指针（而不是容器，专门设计用于处理这些情况......）的最大痛苦是您的内存管理可能会失控。

```
for(int i=0; i<SIZE; i++)
{
  delete [] a[i]; // Free the inner array
}
delete [] a; // Free the outer array. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T02:43:48.667

If the function takes a pointer to pointer to `double`, and you begin with an actual array, then you'll need to make a copy of the address of the array, and then pass a reference to that:

```
double a[] = {5.34, 5.23, 6.5, 3.51};
double b[] = {74.3, 42.1, 642.2, 54.2};

double *aPtr = a;
double *bPtr = b;
sum(&aPtr, &bbtr, 4, 4); 
```

In the `sum` function, de-reference to get back to the arrays: `*A[0]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T04:16:02.750

显而易见的解决方案是将数组作为指针而不是双指针传递：

```
double sum(double *A, double *B, int M, int N)
{
   double ret = 0.0;
   for (int i=0; i<M; i++) ret += A[i];
   for (int j=0; j<N; j++) ret += B[j];
   return ret;
}

double a[] = {5.34, 5.23, 6.5, 3.51};
double b[] = {74.3, 42.1, 642.2, 54.2};
double s = sum( a, b, 4, 4);
printf("The sum is %f\n", s); 
```

......这样做将是最简单的事情。但是，如果您被现有 API 限制为使用双指针的函数签名，那可能是因为 API 希望允许被调用函数能够修改传递给它的指针。如果需要，传递指向指针的指针允许被调用函数写入指向指针，例如：

```
double sum_and_change_pointers(double ** A, double ** B, int M, int N)
{
   // Compute sum
   double ret = 0.0;
   for (int i=0; i<M; i++) ret += (*A)[i];
   for (int j=0; j<N; j++) ret += (*B)[j];

   // And just for fun, modify the caller's pointer-values too
   static double some_other_array[5] = {0,0,0,0,0};
   *A = some_other_array;
   *B = some_other_array;

   return ret;
} 
```

在这种情况下，函数会这样调用：

```
double a[] = {5.34, 5.23, 6.5, 3.51};
double b[] = {74.3, 42.1, 642.2, 54.2};
double * pa = a;  // copy address of arrays into pointers
double * pb = b;  // because changing the address of an array itself wouldn't work
printf("Before calling sum_and_change_pointers, pa=%p and pb=%p\n", pa, pb);
double s = sum_and_change_pointers( &pa, &pb, 4, 4);
printf("After calling sum_and_change_pointers, s=%f, pa=%p and pb=%p\n", s, pa, pb); 
```

另一个注意事项：在您发布的代码中，您的函数返回 (double**) 而不是双精度值。我认为这不容易奏效。首先，一个名为 sum 的函数可能返回一个双精度浮点值，而不是一个指向指针的指针，所以让它返回一个 (double**) 是没有意义的......但是即使您确实（出于某种原因）想要这样做，您也需要确保您返回的指向指针的指针指向内存中的有效位置（并且该位置指向一个内存中的有效位置），这在函数内部很棘手，因为当函数返回时，函数的所有局部变量都会消失。如果您不介意失去线程安全性，我想您可以使用静态或全局变量来做到这一点：

```
double ** sub (double ** A, double ** B, int M, int N)
{
   // Compute sum
   double ret = 0.0;
   for (int i=0; i<M; i++) ret += (*A)[i];
   for (int j=0; j<N; j++) ret += (*B)[j];

   static double result;
   result = ret;

   static double * pointerToResult;
   pointerToResult = &ret;
   return &pointerToResult;
}

[...]
double ** s = sum( a, b, 4, 4);
printf("Sum's result was %f\n", **s); 
```

......但是，这又是丑陋的，不安全的，而且实际上做起来也无济于事。为您想做的工作使用正确的类型要好得多。

# objective-c - 将 NSManagedObject 保持在 CoreData NSManagedObjectContext 块之外

> ID：12452559
> 
> 赞同：0
> 
> 时间：2012-09-17T02:40:13.917
> 
> 标签：objective-c, ios, xcode, core-data, nsmanagedobject

我使用辅助类来获取一个包含 NSManagedObjectContext 的块。

```
+ (void)openTheDocumentAndPerformBlock:(completion_handle_t)completionBlock; 
```

现在我想将其中一个 NSManagedObject 保留在块之外，因为我想不断地与它进行交互。而且如果不能保存在ViewController中，每次需要的时候都要去查询，真的很麻烦。

1，我可以通过segue将NSManagedObject传递给另一个VC吗？
2，当那些东西附加时，UIManagedDocument 是否必须一直打开？
3、我可以在块外编辑NSManagedObject，并保存在块中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:12:10.580

如果我正确理解您的问题，您只需要`NSManagedObject`在您的类（视图控制器类）中添加一个类型的实例变量，以便您可以将您在块中查询的托管对象分配给该变量。你可以在任何你想要的地方使用它。
至于您的其他问题：
1\. 希望以下代码片段有效：在您的目标视图控制器类中声明一个实例变量来存储传递的对象。

```
@property (strong) NSManagedObject *container; 
```

在`prepareForSegue:`源视图控制器的方法中获取目标 vc 并传递托管对象：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    UIViewController *destVC = [segue destinationViewController];
    [destVC setValue:<managed object from block> forKey:@"container"]
} 
```

是的，您可以在块内部和外部使用 NSManagedObject，只要它与您使用的托管对象上下文相同。

我不知道你的第二个问题的答案。

# c++ - 给定偶数个顶点，如何根据邻近度找到最优的对集？

> ID：12452562
> 
> 赞同：4
> 
> 时间：2012-09-17T02:40:59.843
> 
> 标签：c++, algorithm, math, 3d

问题：

*   我们在 3D 欧几里得空间中有一组 n 个顶点，这些顶点的数量是偶数。

*   我们希望根据它们的接近程度将它们配对。换句话说，我们希望能够找到一组顶点对，其中每对中的顶点尽可能靠近。

*   在此过程中，我们希望尽可能减少牺牲任何其他对的顶点之间的接近度。

*   我不是在寻找*最佳*解决方案（如果它甚至严格存在/可以完成），只是一个可以相对快速计算的合理解决方案。

一种相对可怕的蛮力方法包括选择一个顶点并遍历其余顶点以找到其最近的邻居，然后重复直到没有剩余。当然，当我们接近列表末尾时，最近的顶点可能很远，但这是唯一的选择，因此在上面的第三点上可能会严重失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T08:12:16.957

解决这类问题（尤其是当 n 很大时）的常用方法是预先计算空间索引结构，例如[kd 树](http://en.wikipedia.org/wiki/K-d_tree)或[八叉](http://en.wikipedia.org/wiki/Octree)树，并在它的帮助下执行[最近邻](http://en.wikipedia.org/wiki/Nearest_neighbor_search)搜索。通过八叉树的节点，可用点被放入bins，所以你可以确定它们是相互靠近的。您还可以最大限度地减少比较次数。

带有八叉树的实现草图：您需要一个 Node 类来存储其边界框。派生的 LeafNode 类最多存储少量点（例如 k = 20），这些点是通过插入函数添加的。派生的 NonLeafNode 类存储对 8 个子节点（可能是 Leaf 和 NonLeafNodes）的引用。

树由一个根节点表示，所有的插入和查询都从这里开始。树是通过将前 k 个点插入到 LeafNode 开始构建的。如果插入第 k+1 个点，则将边界框拆分为 8 个子框，并将包含的点排序到其中。当前的 LeafNode 被替换为一个具有 8 个子节点的 NonLeafNode。重复此操作，直到所有点都在树中。

对于最近邻搜索，通过与边界框比较，从根节点开始遍历树。如果查询点在节点的边界框内，则遍历进入该节点。请注意，如果您找到了最近的候选者，您还需要检查八叉树中的相邻节点。

对于 kdtree 实现，请查看 wikipedia 页面，看起来非常简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T03:56:18.877

由于您不是在寻找最佳解决方案，因此您可以考虑以下启发式方法。

对于每个点 p 计算两个点：分别离 p 最近和最远的最近邻和最远邻。现在让 q 是具有最大最远邻居的点（q 是输入中的极值点）。将 q 与其最近的邻居匹配，删除它们并递归计算剩余点的匹配。

这当然不是最优的，但它似乎在小输入集上做得相当好。如果您需要最佳解决方案，您应该阅读[欧几里得匹配问题](http://www.cs.duke.edu/courses/fall08/cps234/projects/sayan_proj.pdf)。

# c++ - Customising std::shared_ptr or boost::shared_ptr to throw an exception on NULL dereference

> ID：12452565
> 
> 赞同：6
> 
> 时间：2012-09-17T02:41:32.027
> 
> 标签：c++, exception, c++11, shared-ptr, libc++

I have a few projects that use `boost::shared_ptr` or `std::shared_ptr` extensively (I can convert to either implementation soon enough, if there is a good answer to this question for one, but not the other). The Boost implementation uses Boost.Assert to avoid returning in the case of encountering an empty (NULL) pointer in `operator*` or `operator->` at runtime; while the libc++ implementation seems to lack any check.

While of course the validity of a `shared_ptr` should be checked before use, a large, mixed-paradigm codebase leads me to want to try an exception-throwing variation; as most of the code is relatively exception-aware and will at most fail to a high-level but resumable state, rather than `std::terminate()` or segfault.

How should I best customise these accessors while maintaining the robustness of `shared_ptr`? It seems that encapsulating `shared_ptr` in a `throwing_shared_ptr` may be the best option, but I'm wary of breaking the magic. Am I best off copying the Boost source and just changing the `ASSERT`s to an appropriate `throw` statement?

* * *

The actual type name used everywhere for the appropriate `smart_ptr<T>` type is a typedef expanded from a macro; i.e. `ForwardDeclarePtr(Class)` expands to something like:

```
class Class;
typedef boost::smart_ptr<Class> ClassPtr; 
```

Everything passes, takes, or stores a `ClassPtr` - so I can replace the underlying type pretty freely; and I suspect this alleviates the potential slicing/hiding issue.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:47:39.193

There's really no "magic" in `std::shared_ptr<T>` that would be removed if you wrapped it inside a custom class that would throw an exception when dereferencing a `NULL` shared pointer. So I don't see why that approach wouldn't work, as long as your new wrapper-class follows all the semantics of the `std::shared_ptr<T>` type.

BTW, you could also take a slightly different approach, and that is create a wrapper-class that simply won't allow others to pass `NULL` pointers to the wrapped `std::shared_ptr<T>` data-member in the first-place. Basically it would be a class that would enforce the `std::make_shared<T>` idiom in its constructor. I'm not sure, based on the workings of your code if this is possible, but it's another way to circumvent the problem using a RAII approach rather than throwing exceptions.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T02:47:53.840

Just subclass `std::shared_ptr` into `throwing_shared_ptr`, override those two methods, and have them assert and call through to `std::shared_ptr`'s impl. This should work fine as long as you use `throwing_shared_ptr` everywhere instead of slicing it to a `std::shared_ptr`.

# oop - simple oophp function not working

> ID：12452572
> 
> 赞同：0
> 
> 时间：2012-09-17T02:42:38.377
> 
> 标签：oop, model-view-controller

I'm new to oop and MVC and I'm trying to test the flow between my index, controller, and model files. All of the test functions work except for 'check status'. What's the problem? The function is highlighted in BOLD. (INDEX)

```
$Controller = new Controller;
$Controller->ShowRegisterLogin(); 
```

?> (CONTROLLER)

Class Controller {

```
function ShowRegisterLogin() {
    echo 'ShowRegisterLogin Function works';
    $Model = new Model;
    $Model->TestModel();
    **$Model->checkStatus();**      
    } 
```

}

?> (MODEL)

```
class Model {

    Var $Status = 'return works';

    function TestModel() {
        echo 'Test Model Works';
    }
    **function checkStatus() {
        return $this->Status;
    }**

} 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:44:28.187

You need to echo the value if you want to see it

```
echo $Model->checkStatus(); 
```

Otherwise, nothing gets done with the return value and it disappears.

# jquery - How to add jquery rollover effect

> ID：12452578
> 
> 赞同：-2
> 
> 时间：2012-09-17T02:44:30.520
> 
> 标签：jquery, css, toggle

I have a toggle button and it works perfectly but now I want to see if there is a way to get a hover effect in addition to the toggle effect.

I checked out some tutorials on google but nothing showed me how to add onto the current configuration.

You can view the fiddle at [http://jsfiddle.net/TC5kn/](http://jsfiddle.net/TC5kn/)

I didn't know how to input images into the fiddle but I was trying to show that when the green portion is clicked the arrow changes direction from down to up.

In addition to the arrow changing direction I wanted to change the hover color.

It was very late when I asked this and obviously it was a simple fix. The answer given is correct.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T03:08:24.070

你为什么不在 CSS 中做悬停效果呢？

```
.content:hover {background:red} 
```

# ruby-on-rails - 如何使用来自多列的输入设置默认范围顺序

> ID：12452588
> 
> 赞同：1
> 
> 时间：2012-09-17T02:45:52.797
> 
> 标签：ruby-on-rails, activerecord

我的应用程序有一个用户模型，除了通常的和列之外，还有两个整数列`:votes`和。`:badges``:id``:timestamp`

目前，用户的默认范围是：

```
default_scope order: 'users.created_at DESC' 
```

如何通过由 :votes :badges 组成的排名算法更新默认范围以进行排序？

我的算法是：

```
ranking = 2 * votes + badges 
```

做这个的最好方式是什么？

我希望能够在模型中创建如下方法，但这不起作用

```
def ranking
  2 * self.votes + self.badges
end 
```

我需要`ranking`在我的数据库中创建一个列吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:06:02.170

你应该可以写

```
default_scope order("votes * 2 + badges") 
```

# ios - 是否可以双向实现分页 UIScrollView？

> ID：12452590
> 
> 赞同：2
> 
> 时间：2012-09-17T02:46:14.200
> 
> 标签：ios, cocoa-touch, uiview, uiscrollview

我想实现一个`UIScrollView`将在两个方向（垂直和水平）滚动的分页。UIScrollView 的默认行为是一个，或者另一个。不是都。

是否可以实现一个允许双向分页的 UIScrollView？例如，用户可以通过 UIScrollView 中的分页向左和向上滚动浏览上一页，向右和向下滚动浏览下一页。

我可以使用 UIScrollView 通过分页实现水平滚动，但我看不到 UIScrollView 如何在分页时双向滚动。我怎样才能实现这种行为？滚动视图？还是 CAScrollLayer？还是别的什么？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:05:28.410

您似乎在这里谈论两个不同的事情：滚动和分页。

滚动只是轻弹以将屏幕的视口移动到比屏幕本身更大的视图上。通常，您通过提供一个`UIScrollView`比它大的子视图来设置它，并将`UIScrollView`'s设置`contentSize`为较大事物的大小。

它没有什么神奇之处。如果`contentSize`高于`UIScrollView`的大小，则滚动视图将垂直滚动。如果`contentSize`更宽，它将水平滚动。如果`contentSize`既高又宽，那么您将同时垂直*和*水平滚动。

分页是另一回事。要知道如何做到“你可以向左和向上滚动到上一页”，我们需要知道页面在你的程序中是什么样子的，它是如何表示的，等等。从你给出的小描述中，我认为`UIScrollView`可能不是要走的路。相反，查看`UIPanGestureRecognizer`视图之间的某种动画过渡？

但如果这没有帮助，您需要向我们提供更多细节以供使用。

# html - 如何在进度条标签内添加标签？

> ID：12452594
> 
> 赞同：20
> 
> 时间：2012-09-17T02:47:17.577
> 
> 标签：html, progress-bar

我想在我的进度条标签中添加一个标签，就像这个漂亮的例子一样：

![在此处输入图像描述](../Images/403bde78936748ab8ff7104ea9902196.png)

假设蓝色是值，红色是最大值，我怎样才能在里面添加一个标签，比如我的“35”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:50:34.853

使用 CSS`position:relative`将文本移动到栏上。

短杆的快速而肮脏的解决方案是：

```
position: relative;
left: -100px; 
```

where left 强制将在其顶部的栏旁边的文本。

在评论中，Matthias 指出`left`如果进度条是 100% 宽度则不起作用。

它不起作用，因为它强制栏下方的文本。对于足以强制下面的文本的任何宽度的条，它都会失败。

相反，您必须变得更加聪明，并执行以下操作：

```
 position: relative;
    top: -1.5em;
    margin-left: 50%; 
```

这里 top:-1.5em 替换了 jsFiddle 中的左侧调整。margin-left 是一种使文本居中的尝试。它实际上应该略低于 50%。

如果有人有更好的解决方案将文本居中放置在比手动波浪 50%ish 边距更少 hacky 的栏上，请随时评论它，我会再次调整它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-18T05:18:33.277

我试图自己做这件事，最后遇到了一个解决方法。

使用伪元素：在你可以用不同的方式做之前

您使用*content: attr(value)*像这样：[https](https://jsfiddle.net/96z0gwv7/1/) ://jsfiddle.net/96z0gwv7/1/ - 链接上的更多 CSS 样式

```
progress
{
  text-align:center;
}

progress:before {
  content: 'Value is ' attr(value);
}

<progress value="6" max="10"></progress>
<progress value="9" max="10"></progress> 
```

如果您不希望每次都使用相同的文本格式，那么您可以使用 data 属性（即*data-label*）

```
.unique:before {
   content: attr(data-label);
}

<progress class="unique" value="9" max="10" data-label="90% completed"></progress>
<progress class="unique" value="0" max="10" data-label="About to begin"></progress> 
```

# python - Trying to print simple text program but will not work

> ID：12452595
> 
> 赞同：-1
> 
> 时间：2012-09-17T02:47:33.737
> 
> 标签：python, python-3.x

I'm just trying to have a .py open and print on black console this quotation. Is input () the same as `system("PAUSE")` in C++?

```
print(“Quote: If people do not believe that mathematics is simple, it's")
print("       only because they do not realize how complicated life is.”)
print("By: John von Neumann")
input() 
```

Thanks I'm really trying to get this to work!

Here is output:

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]
Type "help", "copyright", "credits" or "license" for more information.
[evaluate untitled-1.py]
Traceback (most recent call last):
  File "None", line 4, in <module>
Syntax Error: print (“Quote: If people do not believe that mathematics is simple, it's): None, line 415 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T02:54:09.493

# javascript - jQuery .html() returning null

> ID：12452596
> 
> 赞同：2
> 
> 时间：2012-09-17T02:47:34.623
> 
> 标签：javascript, jquery

I have an input field with the the id "id_email". A user will enter his email into this field on my form. I am trying to run some validation code on the email that the user inputs. I would like to pass the inputted value to the server to compare it to the database, but jQuery keeps returning a blank string.

HTML:

```
<div class="fieldWrapper">
                <label for="email">Email</label>
                <input type="text" placeholder="Email" id="id_email" name="email" maxlength="75">
           </div> 
```

Javascript:

```
function CheckDuplicateEmail(invalidForm)
{
  $("#id_email").focusout(function()
  {
    $.ajax({ type: "POST",
             url: "/CheckDuplicateEmail/",
             dataType: "json",
             data: {"email" : $("#id_email").html()},
             success: function(jsonObject) 
             { 
                if (jsonObject === "exists")
                {
                    $("this").append("<ul class=\"errorlist\"><li>This email already exists<li></ul>")
                    invalidForm = true;
                }
                else
                {
                    invalidForm = false;
                }
             }
    });
  });
} 
```

When I look at the AJAX post that is being sent to the server, I can see that email is blank. The line $("#id_email").html() is failing. I know that the selector is working correctly because the AJAX request is sent to the server. This implies that $("#id_email").focusout is working correctly. Since this statement uses the same selector as the $("#id_email").html() statement, I have to assume the html() function is wrong. Note that I tried the text() function with the same results.

Does anyone have any idea what is wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:50:29.277

更改此行`data: {"email" : $("#id_email").html()},`

至

`data: {"email" : $("#id_email").val()},`

`.html()`不适用于输入元素。您需要使用`.val()`来获取输入值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T02:50:42.327

利用`$("#id_email").val()`

```
function CheckDuplicateEmail(invalidForm)
{
  $("#id_email").focusout(function()
  {
    $.ajax({ type: "POST",
             url: "/CheckDuplicateEmail/",
             dataType: "json",
             data: {"email" : $("#id_email").val()},
             success: function(jsonObject) 
             { 
                if (jsonObject === "exists")
                {
                    $("this").append("<ul class=\"errorlist\"><li>This email already exists<li></ul>")
                    invalidForm = true;
                }
                else
                {
                    invalidForm = false;
                }
             }
    });
  });
} 
```

您可以查看[这篇文章](http://www.tutorialsdesk.com/2012/09/jquery-getting-and-setting-content-text.html)以了解更多何时使用 getter`.html()`和`.val()``.text()`

# visual-studio-2010 - Finding Visual Studio shortcut by key?

> ID：12452601
> 
> 赞同：0
> 
> 时间：2012-09-17T02:48:08.803
> 
> 标签：visual-studio-2010, keyboard-shortcuts

There's option menu to set shortcuts to a command.

But is there any way to find the command that binded with spefic key?

For example, I want to bind Ctrl + Alt + End for something.

But It's already binded with some other command and THIS is the command when I press Ctrl + Alt + End.

So I want to find the command and remove the bind.

Is there a way to do this with searching all the command list?

I'm using Visual Studio 2010.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:49:57.840

进入键绑定部分并选择任何项目，然后键入快捷方式，它会告诉您当前分配给该快捷方式的内容，并让您能够覆盖它。 ![在此处输入图像描述](../Images/610ec94e2046d5bda50c834ee2d1ea86.png)

# struts2 - struts2 参数映射

> ID：12452602
> 
> 赞同：0
> 
> 时间：2012-09-17T02:48:33.887
> 
> 标签：struts2

表单是通过 Ajax 请求提交的，表单中的所有参数都带有一个随机数前缀。前任：

123456567_name, 123456567_age（编号123456567是动态的）

我想将这些参数映射到名称和年龄的操作字段。

有没有办法告诉 struts2 这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:35:12.937

普通参数注入功能由[ParametersInterceptor](http://struts.apache.org/2.1.6/struts2-core/apidocs/com/opensymphony/xwork2/interceptor/ParametersInterceptor.html)拦截器提供。我不知道您可以配置此拦截器以实现您需要的行为的任何方式，但您始终可以选择扩展拦截器。

因此，您可以通过扩展 ParametersInterceptor 类来[创建自己的拦截器。](http://www.mkyong.com/struts2/struts-2-creating-own-interceptor/)这是一个如何做到这一点的示例：

```
import java.util.HashMap;
import java.util.Map;

import com.opensymphony.xwork2.interceptor.ParametersInterceptor;
import com.opensymphony.xwork2.util.ValueStack;

/**
 *  WARNING: Untested code !
 */
public class CustomParameterInterceptor extends ParametersInterceptor{
    private static final long serialVersionUID = -3673037400195648706L;

    @Override
    protected void setParameters(Object action, ValueStack stack, final Map<String, Object> parameters) {
        super.setParameters(action, stack, getRealParamMap(parameters));
    }

    protected Map<String, Object> getRealParamMap(Map<String, Object> parameters) {
        Map<String, Object> result = new HashMap<String, Object>();
        for (Map.Entry<String, Object> e  : parameters.entrySet()) {
            result.put(e.getKey().split("_")[1], e.getValue());
        }
        return result;
    }
} 
```

如果您打算使用它，您可能应该用更强大的方法替换我的 getRealParamMap 方法。

# t4 - 将 T4 模板生成为公共

> ID：12452604
> 
> 赞同：2
> 
> 时间：2012-09-17T02:48:55.110
> 
> 标签：t4

我正在尝试创建一个 T4 模板，该模板继承自另一个程序集中的另一个模板。问题是，如果我使用 TextTemplatingFileGenerator 自定义工具（模板指令的可见性属性设置为 true），则不会生成引用程序集中的 T4 模板，但前提是我使用 TextTemplatingFilePreprocessor 自定义工具。

我是否以错误的方式使用它？我应该改用不同的技术（包括，或类似[这里](https://stackoverflow.com/questions/3636094/running-t4-templates-from-other-t4-template)建议的东西）吗？

**更新**

评论中要求的有关该场景的一些细节：在我的公司中，我们需要一个可重用的框架来生成对象之间的转换器/映射器（通常是数据库实体到 DTO，反之亦然）。

我们已经厌倦了隐藏它们在内部所做的工作并且通常会导致运行时异常的框架，尤其是对于集合。

我想定义一个模板以在数据映射项目中重用，我们通过反射从另一个程序集中获取对象的定义，并使用映射扩展方法生成静态类。

谢谢弗朗西斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:41:35.517

如果您想在第一个程序集中将模板用作独立模板并在第二个程序集中从它继承，那么您最好在第一个程序集中创建两个模板。

对于第一个模板，使用 TextTemplatingFileGenerator 并包含实际的模板文本。对于第二个模板，使用 TextTemplatingFilePreprocessor 并让内容只是一个 <#@ include #> 指令以包含第一个模板文件。

# sql - 我是否在数据库上错误地使用了正则表达式？

> ID：12452606
> 
> 赞同：1
> 
> 时间：2012-09-17T02:49:15.790
> 
> 标签：sql, regex, postgresql

这有效：
`SELECT * FROM aTable WHERE junk='foo bar';`
这永远挂起：
`SELECT * FROM aTable WHERE junk~'foo bar';`
这永远挂起：
`SELECT * FROM aTable WHERE junk~'foo b.*';`
有什么问题？

编辑：是否有提交 sql 查询但没有给出答复的*情况*？例如无限循环、错误的语法等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:09:37.557

这三个都是正确的，但是如果您检查查询计划，[`EXPLAIN`](http://www.postgresql.org/docs/current/static/sql-explain.html)您会发现计划非常不同。

请参阅[此 SQLFiddle](http://sqlfiddle.com/#!1/5357f/3) - 注意不同的执行时间。使用“查看执行计划”检查查询计划。

在您的情况下，这`=`可能是对单个值使用 b-tree 索引查找，这应该非常快，而`~`版本可能正在执行顺序扫描 - 并且非常耗费 CPU，因为它必须尝试正则表达式针对每一行。

我刚刚写了这篇文章来回答另一篇文章。请参阅[此答案](https://stackoverflow.com/a/12452518/398670)，该答案解释了这一点，`LIKE`并且`SIMILAR TO`可以像您正在做的那样使用适当创建的索引进行前缀匹配，但`~`不能。

尝试创建一个索引，`CREATE INDEX atable_junk_txt_idx ON aTable(junk text_pattern_ops)`然后使用`LIKE 'foo b%'`.

请注意，每个额外的索引都会减慢每次插入、更新和删除的速度，因此不要创建不必要的索引。

请参阅Pg wiki 上的[使用说明。](http://wiki.postgresql.org/wiki/Using_EXPLAIN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T02:56:51.197

没有任何错误。

您的 2 个使用正则表达式的查询都不能使用索引进行优化。

所以你有完整的扫描结果，因此需要一些时间。

# android - 无限ViewPager寻呼机适配器android

> ID：12452615
> 
> 赞同：0
> 
> 时间：2012-09-17T02:50:33.433
> 
> 标签：android

我有一个制作 LinearLayouts 的类。当有人滚动浏览每个页面时，我想使用这个类来创建 LinearLayouts。

每个布局都是一个月的视图，所以每个滚动都应该显示下一个（或上一个）月份。理想情况下，在任何给定时间，只有 3 个月的可用时间，这样应用程序就不会占用太多资源。

我一生都无法弄清楚如何创建一个可行的 ViewPager / Page Adapter。任何人都可以提出任何建议吗？到目前为止，这是我的代码：

我的主要活动：

```
public class MainActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MyPagerAdapter adapter = new MyPagerAdapter(this);
        ViewPager myPager = (ViewPager) findViewById(R.id.mypanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);

    } 
```

寻呼机适配器：

```
 public class MyPagerAdapter extends PagerAdapter {

@Override
public int getCount() {
    return 3;
}

public Object instantiateItem(ViewGroup collection, int position){
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

 /* not sure what goes here*/

} 
```

这是我创建 LinearLayouts 的类。

```
public class NewMonth {
...
newParentLayout = new LinearLayout(context);
newParentLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
newParentLayout.setOrientation(LinearLayout.VERTICAL);
...
} 
```

我打算只引用线性布局，例如：

```
NewMonth example = new NewMonth(context, 1, 2012);
setContentView(example.newParentLayout); 
```

# sql - 2 个日期之间的天数差异 Oracle SQL

> ID：12452619
> 
> 赞同：0
> 
> 时间：2012-09-17T02:50:52.110
> 
> 标签：sql, oracle, datediff

好吧，所以我检查了stackoverflow上的许多其他帖子，看看是否在任何地方提到了这一点，并且提供的答案对我来说不太有意义......我认为他们在谈论完全不同的东西。

这是我想做的，使用 Oracle SQL Developer：

- 从 purch_date 检索条目

- 获取当前年份的 purch_date 和圣诞节之间的天数差异

*** *因此，“2012”不能在那里硬编码。我需要找回它。

这是在 MySQL 中 100% 有效的查询：

```
SELECT purch_id AS PURCH_ID, 
DATEDIFF(CONCAT(YEAR(NOW()),'-12-25'), purch_date) AS DAYS_TO_CHRISTMAS
FROM CS260USER.candy_purchase; 
```

几乎，我需要它才能在 Oracle 中工作。

谁能帮我这个？

非常感谢！

-马修

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:18:10.053

假设`purch_date`定义为`DATE`

```
SELECT purch_id,
       (trunc(sysdate, 'YYYY') +
         interval '11' month +
         interval '24' day) -
        purch_date days_to_christmas
  FROM CS260USER.candy_purchase; 
```

一些笔记

1.  如果`purch_date`有时间组件，您可能希望截断日期减法的结果。
2.  如果此查询在 12 月 26 日到 12 月 31 日之间执行，那么您仍然会查看今年的圣诞节（即过去的日期）而不是明年的圣诞节。`purch_date`例如，如果是 12 月 30 日，我会希望结果是下一个圣诞节前 360 天，而不是上一个圣诞节前 -5 天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T06:28:39.683

最简单的方法是在 oracle 中编写一个函数，例如 mysql 中的 DATEDIFF，id 这样做如下：

```
function        datediff( p_what in varchar2, p_d1 in date, p_d2 in date) return number as  l_result    number; 
BEGIN
      select (p_d2-p_d1) * 
             decode( upper(p_what), 'SS', 24*60*60, 'MI', 24*60, 'HH', 24, NULL ) 
       into l_result from dual; 

      return l_result; 

END; 
```

并像这样调用这个函数：

```
DATEDIFF('YYYY-MM-DD', SYSTIMESTAMP, SYSTIMESTAMP) 
```

在你的 sql 命令中

# java - JAVA：如何在文本文件的一行中解析整数（由可变数量的空格分隔）

> ID：12452622
> 
> 赞同：5
> 
> 时间：2012-09-17T02:51:08.520
> 
> 标签：java, parsing, integer, line, text-files

我想逐行解析文本文件的一行中的数字。例如，将 _ 想象成一个空格

我的文本文件内容如下所示：

```
___34_______45
_12___1000
____4______167
... 
```

我想你明白了。每行可能有可变数量的空格分隔数字，这意味着根本没有模式。最简单的解决方案可以逐个字符地读取并检查它是否是一个数字，然后像这样一直到数字字符串的末尾并解析它。但一定有别的办法。我怎样才能在 Java 中自动读取它，以便我可以进入某个数据结构，比如数组

```
[34,45]
[12,1000]
[4,167] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T02:55:49.703

使用`java.util.Scanner`. 它有`nextInt()`方法，它完全符合您的要求。我认为您必须“手动”将它们放入数组中。

```
import java.util.Scanner;
public class A {
  public static void main(String[] args) {
    Scanner in = new Scanner(System.in);
    int v1 = in.nextInt(); //34
    int v2 = in.nextInt(); //45
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T02:55:47.453

如果您只需要数据结构中的数字，例如平面数组，那么您可以使用[`Scanner`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)一个简单的循环读取文件。`Scanner`使用空格作为默认分隔符，跳过多个空格。

给定`List ints`：

```
Scanner scan = new Scanner(file); // or pass an InputStream, String
while (scan.hasNext())
{
    ints.add(scan.nextInt());
    // ... 
```

您需要处理`Scanner.nextInt`.

但是您建议的输出数据结构使用多个数组，每行一个。您可以使用来读取文件`Scanner.nextLine()`以获取单独的行作为`String`. 然后使用`String.split`正则表达式拆分空格：

```
Scanner scan = new Scanner(file); // or InputStream
String line;
String[] strs;    
while (scan.hasNextLine())
{
    line = scan.nextLine();

    // trim so that we get rid of leading whitespace, which will end
    //    up in strs as an empty string
    strs = line.trim().split("\\s+");

    // convert strs to ints
} 
```

您还可以使用一秒钟`Scanner`来标记内部循环中的每一行。`Scanner`将为您丢弃任何前导空格，因此您可以省略`trim`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T03:03:21.690

`BufferedReader`用和 String 的`split()`功能把它搞砸了：

```
BufferedReader in = null;
try {
    in = new BufferedReader(new FileReader(inputFile));
    String line;
    while ((line = in.readLine()) != null) {
        String[] inputLine = line.split("\\s+");
        // do something with your input array
    }
} catch (Exception e) {
    // error logging
} finally {
    if (in != null) {
        try {
            in.close();
        } catch (Exception ignored) {}
    }
} 
```

（如果您使用的是 Java 7，`finally`那么如果您使用 try-with-resources，则不需要该块。）

这会将`______45___23`（其中 _ 是空格）之类的内容更改为 array `["45", "23"]`。如果您需要将它们作为整数，编写一个将 String 数组转换为 int 数组的函数非常简单：

```
public int[] convert(String[] s) {
    int[] out = new int[s.length];
    for (int i=0; i < out.length; i++) {
        out[i] = Integer.parseInt(s[i]);
    }
    return out;
} 
```

# javascript - 正则表达式匹配——以某个字符结尾......但有一个转折

> ID：12452623
> 
> 赞同：0
> 
> 时间：2012-09-17T02:51:15.257
> 
> 标签：javascript, regex

好的，所以我无法解决使用 JAVASCRIPT 的正则表达式和我正在制作的小时间应用程序的问题。

要在我的应用程序中创建一个变量，用户输入会以下列格式接收： 以 {**以 }** **开头 has var(varName,YES OR NOT IN HERE)= ANYTHING** 

例子：

> {var(myVar,YES)=tryHard}

或者

> {var(someOther,NO)=552*232}

这是我目前用来验证这种格式的正则表达式：

```
/{var\([\d\w]{1,10},(YES|NO)\)=.*}$/ 
```

问题是验证以下文本：

```
someGarbageHere{var(myVar,YES)=2*5}moreGarbagehere 
```

有任何想法吗？我在想会有某种标志，但没有成功。另外我在想可能以 . 开头的字符串。<< 任何字符都可能是一个解决方案，但我真的只想要用花括号括起来的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T02:53:25.597

您是否希望该文本被接受？如果是，请取出正则表达式末尾的 $。如果不是，则在正则表达式的开头放置一个 ^（$ 匹配字符串结尾，^ 匹配字符串开头）。

# c++ - 从我的 C/C++ 代码中获取汇编等效代码 - x86 和 ARM

> ID：12452625
> 
> 赞同：1
> 
> 时间：2012-09-17T02:51:47.210
> 
> 标签：c++, c, assembly, x86, arm

拥有 C 或 C++ 源代码如何在 x86 和 ARM 程序集中转换这些语句？我的意思是一个纯文本文件，其中包含来自我的 C/C++ 等效源代码的汇编编写源代码。

编辑：

我使用 GCC/CNU 工具链

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:55:14.663

您将需要一个可以同时执行两者的交叉编译器，然后只需使用

```
g++ -S [Plus all you other switch's and cross compile ones] 
```

这将为您节省中间汇编程序

# regex - 正则表达式：只有字母和必需的连字符

> ID：12452632
> 
> 赞同：0
> 
> 时间：2012-09-17T02:53:15.413
> 
> 标签：regex

我需要构建一个只允许字母和连字符的正则表达式，但它需要连字符。

我试过了：

*   `^[a-z]+[a-z\-]+[a-z]+$`（没有连字符的匹配通过）
*   `([A-Za-z\-]+)`（没有连字符的匹配也通过）
*   `[a-zA-Z][\-]+`（它没有工作）

有人可以写给我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:58:10.000

其他答案都不*需要*连字符。尝试`[a-zA-Z-]*[-][a-zA-Z-]*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:54:56.677

You need a look ahead:

```
^(?=.*-)[a-zA-Z-]+$ 
```

That little expression `(?=.*-)` is a "look ahead", which is a non-consuming assertion that `.*-` appears somewhere ahead, which means "there needs to be hyphen in the input"

Also, when put first or last the hyphen is a *literal* hyphen that doesn't need escaping, otherwise a hyphen denotes a range.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:06:43.393

我不确定您的问题是否列出了所有要求。从你所说的一切开始，这种模式将允许字母和连字符，并且至少需要 1 个连字符。

```
[a-zA-Z-]*-[a-zA-Z-]* 
```

这允许字符串“-”可以吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T02:56:06.620

你没有说是哪种语言，所以这里是 Javascript：

```
Code-> "te-st".match(/[A-Za-z-]+/)
Result -> ["te-st"] 
```

# c++ - 最易读（以代码术语）的方式来填充地图 包含 C++03 中的构造数据

> ID：12452634
> 
> 赞同：0
> 
> 时间：2012-09-17T02:53:30.727
> 
> 标签：c++, map

我有一个`map<string, string>`，我需要在构造时用默认对填充它。喜欢`"Sam" : "good", "ram" : "bad"`。如何在 C++03 中以最易读的方式在构造代码方面做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:11:41.340

[`boost::assign::map_list_of`](http://www.boost.org/libs/assign/doc/index.html#map_list_of)让你用一些漂亮的语法来做到这一点，但如果你不能使用 Boost，你可以自己写。

```
#include <map>
#include <string>

template< class Key, class Type, class Traits = std::less<Key>,
          class Allocator = std::allocator< std::pair <const Key, Type> > >
class MapInit
{
  std::map<Key, Type, Traits, Allocator> myMap_;

  /* Disallow default construction */
  MapInit();

public:
  typedef MapInit<Key, Type, Traits, Allocator> self_type;
  typedef typename std::map<Key, Type, Traits, Allocator>::value_type value_type;

  MapInit( const Key& key, const Type& value )
  {
    myMap_[key] = value;
  }

  self_type& operator()( const Key& key, const Type& value )
  {
    myMap_[key] = value;
    return *this;
  }

  operator std::map<Key, Type, Traits, Allocator>()
  {
    return myMap_;
  }
};

int main()
{
  std::map<int, std::string> myMap = 
    MapInit<int, std::string>(10, "ten")
                             (20, "twenty")
                             (30, "thirty");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T02:58:31.243

你可以在 C++03 中做到这一点的唯一方法是

`mapName["Key"] = "Value";`

如果你有很多，你可以有一个初始化它的函数。

```
map<std::string,std::string> makeMap() {
   map<std::string,std::string> example;
   example["Sam"] = "good";
   example["Ram"] = "bad";
   return example;
} 
```

# java - Oracle 的 Java 7 for Mac OS X 是否有 com.apple.eawt.CocoaComponent 或类似的？

> ID：12452637
> 
> 赞同：5
> 
> 时间：2012-09-17T02:54:05.270
> 
> 标签：java, macos, cocoa

Apple 的 Java，在我的机器上的版本 6 上，有一个`com.apple.eawt.CocoaComponent`用于将 AWT/Swing 应用程序连接到 Cocoa 组件的类。使用示例：在 Java 应用程序中显示 AudioUnit（它是 Cocoa 视图）的 UI。我想使用 Java 7，但我在其中找不到这个类。任何人都知道它是否在那里，某处？或者如果有替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:41:46.900

`com.apple.eawt`从 7u4 到最新（截至 2012 年 10 月 30 日）7u9，这些类确实包含在 Oracle JDK 中。有关示例用法，请参阅[OSX Lion 上 Java 应用程序的全屏功能](https://stackoverflow.com/questions/6873568/fullscreen-feature-for-java-apps-on-osx-lion)或[全屏 Swing 组件无法在 Mac OS X Mountain Lion 上的 Java 7 上接收键盘输入](https://stackoverflow.com/questions/13064607/fullscreen-swing-components-fail-to-receive-keyboard-input-on-java-7-on-mac-os-x)

一个问题是[他们目前似乎没有为这些类构建 javadoc](http://lists.apple.com/archives/java-dev/2012/Aug/msg00112.html)，因此查找最新的 API 相当困难。我求助于在线搜索 .java 文件。您可能还[对 developer.apple.com 上的旧 API 参考](https://developer.apple.com/library/mac/#documentation/Java/Reference/JavaSE6_AppleExtensionsRef/api/index.html)有一些运气，尽管这不包括像 FullScreenUtilities 这样的新类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:01:36.117

例如，在 Marven repo 有，你可以拉它：[这里](http://mavenhub.com/c/com/apple/eawt/CocoaComponent/jar)

希望能帮助到你

# authentication - Grails Spring Security - 在身份验证中使用其他属性

> ID：12452642
> 
> 赞同：1
> 
> 时间：2012-09-17T02:54:53.447
> 
> 标签：authentication, grails, spring-security

我只想问是否可以使用除域类的用户名和密码之外的其他属性进行登录？

例如，我有一个与`Person`域类有`one-to-one`关系的`Account`域类。我想使用他们在域类中找到的`firstName`&`birthDate`属性对我的用户进行身份验证。`Person`

有没有我可以做的配置来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:40:10.693

是的。这是可能的。

您必须编写一个自定义`authentication-provider`的，您可以在其中获取您喜欢的参数来进行身份验证。

例如，您可能有这样的事情：

```
public class MyUserDetailsService implements UserDetailsService{
    @Override
    public UserDetails loadUserByUsername(String username){
        //You have to override this method to have your desired action
        //If those criteria are not satisfied you may return null
        //Otherwise have an UserDetails filled and returned
        org.springframework.security.core.userdetails.User userDetails = new org.springframework.security.core.userdetails.User(user.getUsername(), user.getPassword(), user.getIsActive(), true, true, true, getAuthorities(user));
        return userDetails

    } 
```

在您的 bean 配置中，使用您自己的，`authentication-provider`如下所示：

```
<sec:authentication-manager alias="authenticationManager">
    <sec:authentication-provider user-service-ref="myUserDetailsService"/>
</sec:authentication-manager> 
```

# ruby-on-rails - Rails 3 "Could not find activesupport-3.2.3 in any of the sources"

> ID：12452643
> 
> 赞同：1
> 
> 时间：2012-09-17T02:54:54.220
> 
> 标签：ruby-on-rails, ruby, macos, bundler, activesupport

Helo. I recently reformatted my Mac to a fresh install of Lion, and then upgraded to Mountain Lion. I installed homebrew and installed ruby and put usr/local/bin before usr/bin in my path. I used gem to install rails, bundler, and I ran bundle install on my app. The app bundles successfully, however when I go to start the application I get the error

> Could not find activesupport-3.2.3 in any of the sources

despite the fact that bundle install claims that the gem successfully installed, and gem install activesupport -v 3.2.3 succeeds as well. If I do install activesupport then I prompted with the next gem to install.

bundle exec rails s gives me a different, very long error that begins with:

> /Library/Ruby/Gems/1.8/gems/pg-0.14.1/lib/pg_ext.bundle: [BUG] Segmentation fault ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin12.1.0]

Which seems to have something to do with postgres. Anyone have any ideas ?

# garbage-collection - IBM J9 JavaCore中LocalGC/GlobalGC/SystemGC是什么意思

> ID：12452650
> 
> 赞同：4
> 
> 时间：2012-09-17T02:56:05.663
> 
> 标签：garbage-collection, jvm

jvm 崩溃时我得到了一个 javacore，但我无法理解 GC 历史记录段。LocalGC/GlobalGC/SystemGC 代表什么？非常感谢！

```
1STGCHTYPE GC历史  
3STHSTTYPE 06:49:48:918796000 GMT j9mm.60 - 类卸载开始
3STHSTTYPE 06:49:48:918781000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:49:48:912430000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:49:48:912413000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:49:48:872687000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:49:48:872660000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2853 soft=1164 phantom=20 finalizers=384 globalcount=231 scavengecount=397
3STHSTTYPE 06:49:48:872300000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.073 newspace=4022424/60397568 oldspace=981846840/1006632960 loa=50331648/50331648
3STHSTTYPE 06:49:22:649438000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90138 flipbytes=5837752 newspace=54236992/60397568 oldspace= 981848832/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:22:637242000 GMT j9mm.64 - LocalGC 开始：globalcount=230 scavengecount=397 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:22:637218000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:21:424334000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=88056 flipbytes=5740288 newspace=54540368/60397568 oldspace= 981935408/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:21:395216000 GMT j9mm.64 - LocalGC 开始：globalcount=230 scavengecount=396 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:21:395186000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:20:118355000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=89809 flipbytes=5913320 newspace=54403616/6039=7568 oldspace 982408904/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:20:89486000 GMT j9mm.64 - LocalGC 开始：globalcount=230 scavengecount=395 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:20:89455000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:18:876887000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90096 flipbytes=5943112 newspace=54281264/60397568 oldspace= 982614504/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:18:862146000 GMT j9mm.64 - LocalGC 开始：globalcount=230 scavengecount=394 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:18:862121000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:17:692277000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90207 flipbytes=5949208 newspace=54112984/60397568 oldspace= 982793112/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:17:670489000 GMT j9mm.64 - LocalGC 开始： globalcount=230 scavengecount=393 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:17:670464000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:16:455289000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90332 flipbytes=5952640 newspace=54113200/60397568 oldspace= 982975872/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:16:433555000 GMT j9mm.64 - LocalGC 开始： globalcount=230 scavengecount=392 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:16:433529000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:15:304510000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90287 flipbytes=5947072 newspace=54283360/60397568 oldspace= 983168536/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:15:283058000 GMT j9mm.64 - LocalGC 开始： globalcount=230 scavengecount=391 weakrefs=2840 soft=1158 phantom=20 finalizers=376
3STHSTTYPE 06:49:15:283032000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:13:959191000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90616 flipbytes=5964184 newspace=54011616/60269568 oldspace= 983360752/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:13:945970000 GMT j9mm.64 - LocalGC 开始： globalcount=230 scavengecount=390 weakrefs=2840 soft=1162 phantom=20 finalizers=378
3STHSTTYPE 06:49:13:945946000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:49:12:907889000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=90406 flipbytes=5767016 newspace=53103184/59038720 oldspace= 983591256/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:49:12:893607000 GMT j9mm.64 - LocalGC 开始：globalcount=230 scavengecount=389 weakrefs=2846 soft=1165 phantom=20 finalizers=403
3STHSTTYPE 06:49:12:893581000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:48:48:870649000 GMT j9mm.51 - SystemGC 结束：newspace=57301424/60397568 oldspace=983842608/1006632960 loa=50331648/50331648
3STHSTTYPE 06:48:48:870622000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2846 soft=1148 phantom=20 finalizers=376 newspace=57301424/60397568 oldspace=983842608/1006632960/503 loa=3163831
3STHSTTYPE 06:48:48:870543000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:48:48:864220000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:48:48:864208000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:48:48:809822000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:48:48:809795000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2850 soft=1264 phantom=20 finalizers=384 globalcount=230 scavengecount=388
3STHSTTYPE 06:48:48:809430000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.077 newspace=9527800/60397568 oldspace=983755144/1006632960 loa=50331648/50331648
3STHSTTYPE 06:47:48:808722000 GMT j9mm.51 - SystemGC 结束：newspace=57401760/60397568 oldspace=983759440/1006632960 loa=50331648/50331648
3STHSTTYPE 06:47:48:808694000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2846 soft=1162 phantom=20 finalizers=376 newspace=57401760/60397568 oldspace=983759440/1006632960/503 loa=3163831
3STHSTTYPE 06:47:48:808616000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:47:48:802436000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:47:48:802423000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:47:48:746999000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:47:48:746972000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2850 soft=1220 phantom=20 finalizers=380 globalcount=229 scavengecount=388
3STHSTTYPE 06:47:48:746605000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.074 newspace=33698008/60397568 oldspace=983693288/1006632960 loa=50331648/50331648
3STHSTTYPE 06:47:06:502600000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=40139 flipbytes=3022592 newspace=57224568/60397568 oldspace= 983693336/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:47:06:491846000 GMT j9mm.64 - LocalGC 开始：globalcount=228 scavengecount=388 weakrefs=2845 soft=1240 phantom=20 finalizers=387
3STHSTTYPE 06:47:06:491822000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:46:48:746220000 GMT j9mm.51 - SystemGC 结束：newspace=57167480/60397568 oldspace=983884056/1006632960 loa=50331648/50331648
3STHSTTYPE 06:46:48:746192000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2838 soft=1168 phantom=20 finalizers=374 newspace=57167480/60397568 oldspace=983884056/10066329608/5031=3163831
3STHSTTYPE 06:46:48:746104000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:46:48:741406000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:46:48:741392000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:46:48:697422000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:46:48:697395000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2838 soft=1176 phantom=20 finalizers=377 globalcount=228 scavengecount=387
3STHSTTYPE 06:46:48:697043000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.067 newspace=47752152/60397568 oldspace=983878128/1006632960 loa=50331648/50331648
3STHSTTYPE 06:45:48:694718000 GMT j9mm.51 - SystemGC 结束：newspace=57327272/60397568 oldspace=983878176/1006632960 loa=50331648/50331648
3STHSTTYPE 06:45:48:694692000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2838 soft=1173 phantom=20 finalizers=374 newspace=57327272/60397568 oldspace=983878176/1006632946/50313163831
3STHSTTYPE 06:45:48:694601000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:45:48:688358000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:45:48:688344000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:45:48:633645000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:45:48:633618000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2878 soft=1268 phantom=20 finalizers=386 globalcount=227 scavengecount=387
3STHSTTYPE 06:45:48:633260000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.075 newspace=30163040/60397568 oldspace=983836992/1006632960 loa=50331648/50331648
3STHSTTYPE 06:44:48:632920000 GMT j9mm.51 - SystemGC 结束：newspace=57252560/60397568 oldspace=983839584/1006632960 loa=50331648/50331648
3STHSTTYPE 06:44:48:632891000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2848 soft=1171 phantom=20 finalizers=376 newspace=57252560/60397568 oldspace=983839584/1006632946/50313163831
3STHSTTYPE 06:44:48:632802000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:44:48:628101000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:44:48:628087000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:44:48:575421000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:44:48:575393000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2852 soft=1227 phantom=20 finalizers=380 globalcount=226 scavengecount=387
3STHSTTYPE 06:44:48:575028000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.076 newspace=34103512/60397568 oldspace=983829536/1006632960 loa=50331648/50331648
3STHSTTYPE 06:43:48:565148000 GMT j9mm.51 - SystemGC 结束：newspace=57376224/60397568 oldspace=983829584/1006632960 loa=50331648/50331648
3STHSTTYPE 06:43:48:565121000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2834 soft=1173 phantom=20 finalizers=374 newspace=57376224/60397568 oldspace=983829584/1006632960/503 loa=3163831
3STHSTTYPE 06:43:48:565031000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:43:48:558842000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:43:48:558829000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:43:48:525392000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:43:48:525364000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2834 soft=1199 phantom=20 finalizers=381 globalcount=225 scavengecount=387
3STHSTTYPE 06:43:48:524995000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.083 newspace=36182232/60397568 oldspace=983808712/1006632960 loa=50331648/50331648
3STHSTTYPE 06:42:48:524638000 GMT j9mm.51 - SystemGC 结束：newspace=57386424/60397568 oldspace=983810240/1006632960 loa=50331648/50331648
3STHSTTYPE 06:42:48:524610000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2834 soft=1176 phantom=20 finalizers=374 newspace=57386424/60397568 oldspace=983810240/10066329608/5031=3163831
3STHSTTYPE 06:42:48:524523000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:42:48:518725000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:42:48:518712000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:42:48:464206000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:42:48:464178000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2834 soft=1216 phantom=20 finalizers=381 globalcount=224 scavengecount=387
3STHSTTYPE 06:42:48:463815000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.080 newspace=39931504/60397568 oldspace=983810192/1006632960 loa=50331648/50331648
3STHSTTYPE 06:41:48:454217000 GMT j9mm.51 - SystemGC 结束：newspace=57537296/60397568 oldspace=983810240/1006632960 loa=50331648/50331648
3STHSTTYPE 06:41:48:454190000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2834 soft=1176 phantom=20 finalizers=374 newspace=57537296/60397568 oldspace=983810240/10066329608/5031=3163831
3STHSTTYPE 06:41:48:454111000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:41:48:447998000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:41:48:447985000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:41:48:393305000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:41:48:393277000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2840 soft=1180 phantom=20 finalizers=375 globalcount=223 scavengecount=387
3STHSTTYPE 06:41:48:392909000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.081 newspace=52249608/60397568 oldspace=983787400/1006632960 loa=50331648/50331648
3STHSTTYPE 06:41:21:359379000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=41832 flipbytes=2898488 newspace=57385008/60397568 oldspace= 983787448/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:41:21:345579000 GMT j9mm.64 - LocalGC 开始：globalcount=222 scavengecount=387 weakrefs=2842 soft=1229 phantom=20 finalizers=384
3STHSTTYPE 06:41:21:345556000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:41:04:671043000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=68569 flipbytes=4083904 newspace=56170240/6039=7568 oldspace 984957880/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:41:04:661273000 GMT j9mm.64 - LocalGC 开始：globalcount=222 scavengecount=386 weakrefs=2840 soft=1179 phantom=20 finalizers=374
3STHSTTYPE 06:41:04:661250000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:41:03:789521000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=65831 flipbytes=3909376 newspace=56302368/60397568 oldspace 984957880/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:41:03:779410000 GMT j9mm.64 - LocalGC 开始：globalcount=222 scavengecount=385 weakrefs=2840 soft=1259 phantom=20 finalizers=381
3STHSTTYPE 06:41:03:779386000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:40:48:388752000 GMT j9mm.51 - SystemGC 结束：newspace=56524640/60397568 oldspace=984965784/1006632960 loa=50331648/50331648
3STHSTTYPE 06:40:48:388725000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2834 soft=1174 phantom=20 finalizers=374 newspace=56524640/60397568 oldspace=984965784/1006632960/50331668/5031
3STHSTTYPE 06:40:48:388635000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:40:48:382147000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:40:48:382133000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:40:48:327465000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:40:48:327437000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2848 soft=1380 phantom=20 finalizers=392 globalcount=222 scavengecount=384
3STHSTTYPE 06:40:48:327100000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.087 newspace=9458328/60397568 oldspace=984746256/1006632960 loa=50331648/50331648
3STHSTTYPE 06:39:48:326740000 GMT j9mm.51 - SystemGC 结束：newspace=56644528/60397568 oldspace=984750984/1006632960 loa=50331648/50331648
3STHSTTYPE 06:39:48:326711000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2844 soft=1176 phantom=20 finalizers=375 newspace=56644528/60397568 oldspace=984750984/1006632960/50313163831
3STHSTTYPE 06:39:48:326623000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:39:48:321384000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:39:48:321372000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:39:48:267053000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:39:48:267026000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2844 soft=1194 phantom=20 finalizers=377 globalcount=221 scavengecount=384
3STHSTTYPE 06:39:48:266665000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.087 newspace=50544576/60397568 oldspace=984643408/1006632960 loa=50331648/50331648
3STHSTTYPE 06:38:48:266051000 GMT j9mm.51 - SystemGC 结束：newspace=56680224/60397568 oldspace=984643456/1006632960 loa=50331648/50331648
3STHSTTYPE 06:38:48:266020000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0weakrefs=2838 soft=1182 phantom=20 finalizers=373 newspace=56680224/60397568 oldspace=984643456/10066329608/5031=3163831
3STHSTTYPE 06:38:48:265943000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:38:48:259764000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:38:48:259754000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:38:48:225660000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:38:48:225633000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2852 soft=1251 phantom=20 finalizers=378 globalcount=220 scavengecount=384
3STHSTTYPE 06:38:48:225289000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.087 newspace=29104864/60397568 oldspace=984623848/1006632960 loa=50331648/50331648
3STHSTTYPE 06:38:21:598485000 GMT j9mm.65 - LocalGC 结束：rememberedsetoverflow=0 引起rememberedsetoverflow=0 scancacheoverflow=0 failedflipcount=0 failedflipbytes=0 failedtenurecount=0 failedtenurebytes=0 flipcount=61526 flipbytes=3939664 newspace=56256360/60397568 oldspace= 984627960/1006632960 loa=50331648/50331648 任期=14
3STHSTTYPE 06:38:21:584740000 GMT j9mm.64 - LocalGC 开始：globalcount=219 scavengecount=384 weakrefs=2861 soft=1329 phantom=20 finalizers=386
3STHSTTYPE 06:38:21:584717000 GMT j9mm.63 - 设置清道夫退出标志 = false
3STHSTTYPE 06:37:48:224903000 GMT j9mm.51 - SystemGC 结束：newspace=56398880/60397568 oldspace=984627960/1006632960 loa=50331648/50331648
3STHSTTYPE 06:37:48:224875000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2849 soft=1185 phantom=20 finalizers=373 newspace=56398880/60397568 oldspace=984627960/1006632960/503 loa=3163831
3STHSTTYPE 06:37:48:224786000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:37:48:218806000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:37:48:218793000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:37:48:163746000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:37:48:163718000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2856 soft=1267 phantom=20 finalizers=382 globalcount=219 scavengecount=383
3STHSTTYPE 06:37:48:163343000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.085 newspace=12010848/60397568 oldspace=984587896/1006632960 loa=50331648/50331648
3STHSTTYPE 06:36:48:156116000 GMT j9mm.51 - SystemGC 结束：newspace=56649080/60397568 oldspace=984594952/1006632960 loa=50331648/50331648
3STHSTTYPE 06:36:48:156084000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0weakrefs=2839 soft=1186 phantom=19 finalizers=373 newspace=56649080/60397568 oldspace=984594952/1006632960/503 loa=3163831
3STHSTTYPE 06:36:48:156000000 GMT j9mm.57 - 扫描结束
3STHSTTYPE 06:36:48:148638000 GMT j9mm.56 - 扫描开始
3STHSTTYPE 06:36:48:148620000 GMT j9mm.55 - 标记结束
3STHSTTYPE 06:36:48:83794000 GMT j9mm.54 - 标记开始
3STHSTTYPE 06:36:48:83761000 GMT j9mm.52 - GlobalGC 开始：weakrefs=2862 soft=1387 phantom=19 finalizers=385 globalcount=218 scavengecount=383
3STHSTTYPE 06:36:48:83361000 GMT j9mm.50 - SystemGC 开始：exclusiveaccessms=0.108 newspace=2142152/60397568 oldspace=984581856/1006632960 loa=50331648/50331648
3STHSTTYPE 06:35:48:76369000 GMT j9mm.51 - SystemGC 结束：newspace=56774872/60397568 oldspace=984586272/1006632960 loa=50331648/50331648
3STHSTTYPE 06:35:48:76342000 GMT j9mm.53 - GlobalGC 结束：workstackoverflow=0 overflowcount=0 weakrefs=2848 soft=1184 phantom=19 finalizers=373 newspace=56774872/60397568 oldspace=984586272/1006632960/5038316 loa=5034316

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-28T19:38:41.633

如果您在 IBM Java VM 上使用 gencon 分代垃圾收集器，则会看到此条目。

LocalGC 只收集 Nursery 空间，这是创建所有小对象的空间。这也称为清理，并且 scavengecount 值告诉您自 JVM 启动以来运行了多少。

GlobalGC 收集终身空间。

SystemGC 是通过 java.lang.System.gc() 方法调用调用的全局 GC。请注意，通过 SIGQUIT 创建堆转储时，会在转储之前调用 System.gc() 以确保更小的转储大小。

有关 Nursery 和 Tenured Spaces 的更多信息，请参阅 Java 诊断指南。

# c++ - 用于 Boost Array 的 SWIG/Lua 类型映射

> ID：12452652
> 
> 赞同：0
> 
> 时间：2012-09-17T02:56:27.447
> 
> 标签：c++, boost, lua, swig

我正在尝试构建一个 typemap(in) 以与 C++ boost scoped_arrays 一起使用。我有采用 boost 数组的 C++ 函数，但我想将它们传递给 Lua 列表。

我看过 Python 的示例，但它们似乎包含太多 Python 特定的代码。

有没有人得到帮助或指向一个例子来让我开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T10:39:55.217

您可能可以使用类似的东西：

```
%{
#include <boost/scoped_array.hpp>
%}

namespace boost {

template<class T>
class scoped_array {
public:
    scoped_array();
    ~scoped_array();

    void reset();
    void swap(scoped_array& b);

    %extend
    {
        scoped_array(unsigned n)
        {
            return new scoped_array<T>(new T[n]);
        }
        T __getitem__(unsigned int idx)
        {
            return (*self)[idx];
        }
        void __setitem__(unsigned int idx,T val)
        {
            (*self)[idx]=val;
        }
    };
};

} 
```

作为起点。它公开了SWIG 在其标准类型映射库中[`boost::scoped_array`](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/scoped_array.htm)的实现的重要部分，并且松散地基于实现。`std::vector`

它添加了特殊的成员函数和一个新的构造函数，同时也分配了一些存储空间。它没有向 SWIG 显示一些定义，因为我在您的目标语言中看不到它们的用途。

注意：我*没有*编译和检查这个。SWIG 对此很满意，并且生成的包装器看起来很正常。

# iphone - UILabel 显示异常的非常奇怪的事情

> ID：12452654
> 
> 赞同：2
> 
> 时间：2012-09-17T02:57:20.700
> 
> 标签：iphone, ios

我很难描述这个问题，我将使用屏幕截图。它们都来自我的模拟器，当我在我的模拟器中测试时`iPodTouch4`，它是一样的。我有几个`UILabel`s，它们是图片中的矩形。

![1.Retina显示，UILabels](../Images/e7c2addab34772cdf1235c6aea7b7a7f.png)

请注意，某些矩形的右侧有黑线，这是出乎意料的，因为除了背景颜色和框架之外，我没有编写任何额外的行为。

当我更改`UILabel`为`UIView`（没有其他更改）时，一切都变得正常！ ![视网膜显示，UIViews](../Images/6b9d05ea69583aaf500a58b86b7146dc.png)

并且当`UILabel`不用于视网膜显示器时，我们可以清楚地看到一些矩形具有不同的宽度，但根据我的代码和日志，它们具有相同的宽度！真的很奇怪！ ![没有视网膜显示UILabel](../Images/128b6ad2c86be09549aa2f635b009d86.png)

我不知道为什么。它可能有一些特别之处`UILabel`，但我在文档中找不到任何地方。

[这就是我创建标签的方式]

```
NSMutableArray *labels = [NSMutableArray array];
for (NSString *day in [self getDaysOfTheWeek]) {
    UILabel *dayOfWeekLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    [labels addObject:dayOfWeekLabel];
} 
self.dayOfWeekLabels = labels; 
```

[这是我设置框架的地方]

```
int count = 0;
for (UILabel *dayLabel in self.dayOfWeekLabels) {
    dayLabel.frame = CGRectMake(CELL_BORDER_WIDTH + count*(self.cellWidth+CELL_BORDER_WIDTH), CELL_BORDER_WIDTH, self.cellWidth, self.daysHeader.frame.size.height);
    dayLabel.backgroundColor = self.dateBackgroundColor;
    count++;
} 
```

正如我上面提到的，只需在这些代码中将这些 UILabel 更改为 UIView 即可使它们看起来不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T07:25:41.050

你能做一个

```
dayLabel.autoresizingMask = 0;
dayLabel.frame = [...];
NSLog(@"frame: %@", NSStringFromCGRect(dayLabel.frame)); 
```

?

检查您是否**只有整数非分数维度**（42.000 或 1337.000，而不是 42.500 或 1337.1234）。这可能是您的显示问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:21:51.910

如果您是通过 xib 创建的，则取消选中启用阴影框，看看它是否对您有帮助。

# hardware - If 语句 VHDL

> ID：12452657
> 
> 赞同：7
> 
> 时间：2012-09-17T02:58:02.757
> 
> 标签：hardware, vhdl, if-statement

有人可以解释为什么编写 VHDL 时的黄金法则是 if-then-else 语句必须在一个进程中。是不是因为在流程内部，语句是按顺序执行的，而在外部则不是。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T10:19:47.113

简单的答案是“因为这就是语言的语法”！

如果您想从一些代码*不在*进程中的选项中进行选择，您可以执行以下操作：

```
sig <= a when sel = 1 else
       b when sel = 2 else 
       default_value; 
```

或者

```
with sel select
   sig <= a when 1,
          b when 2,
          default_value when others; 
```

[有关多路复用器的许多示例，请参见此处](http://www.quicknet.se/hdc/hdl/educaton/mux4_1/index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:52:07.733

我可能错了，但我认为 if 语句需要在进程中的主要原因是 if 语句可能分配给多个信号，如果你想在进程之外做同样的事情，你需要使用多个条件信号分配。

例如：

```
process(C0, C1, A, B, C) is
begin
  if C0 = '1' then
    F <= A;
    G <= C;
  elsif C1 = '1' then
    F <= B;
    G <= B;
  else
    F <= C;
    G <= A;
  end if;
end process; 
```

流程之外的等效条件信号分配将是：

```
F <= A when C0 = '1' else B when C1 = '1' else C;
G <= C when C0 = '1' else B when C1 = '1' else A; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-18T07:26:16.220

if else 语句：-

```
Syntax:
if then
statements
...
[
elsif then
statements
...
else
statements
...
]
endif; 
```

有关更多信息，请检查[此](http://electronicsgyan.com/ifelsestatement.aspx)

# java - 在 Android 中使用空指针异常强制关闭

> ID：12452663
> 
> 赞同：1
> 
> 时间：2012-09-17T02:58:51.343
> 
> 标签：java, android

我有下面的代码，我首先尝试在模拟器上进行测试，以确保它工作正常，然后我可以开始在真实设备上测试它。

下面的代码`Google Map`在 Android 屏幕的上半部分和下半部分创建`TextView`. 据我所知，每当您启动具有 Google Map 的应用程序时，您都需要从 DDMS 角度传递纬度和经度坐标。

但就我而言，我没有传递任何位置坐标，下面的程序正在抛出`NULL POINTER EXCEPTION`这一行 -

```
mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints); 
```

我不确定为什么会这样，据我所知，`Google Map`应该首先加载，然后它应该等待从 DDMS 角度传递位置坐标，但是一旦我启动我的应用程序，我就会`force closed`得到`NPE`.

任何想法为什么会发生？

以下是完整代码-

```
private MapView mapView;
private ListView listView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = (MapView) findViewById(R.id.mapView);
    listView = (ListView) findViewById(R.id.mylist);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);    

    locationListener = new GPSLocationListener(mapView);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            35000, 
            0, 
            locationListener);

    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(15);
} 
```

位置更新类-

```
 private class GPSLocationListener implements LocationListener {

    MapOverlay mapOverlay;

    public GPSLocationListener(MapView mapView) {
        mapOverlay = new MapOverlay(this,android.R.drawable.star_on);
        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.add(mapOverlay);
    }

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            mapController.animateTo(point);
            mapController.setZoom(15);

            mapOverlay.setPointToDraw(point);
            mapView.invalidate();
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

下面是在当前位置的地图上绘制一个圆圈的类，而**NPE 仅在该类中发生**-

```
 class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;
    int[] imageNames=new int[6];
    private Point mScreenPoints;
    private Bitmap mBitmap;
    private Paint mCirclePaint;

    public MapOverlay(GPSLocationListener gpsLocationListener, int currentUser) {
        imageNames[0]=currentUser;
        mCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCirclePaint.setColor(0x30000000);
        mCirclePaint.setStyle(Style.FILL_AND_STROKE);
        mBitmap = BitmapFactory.decodeResource(getResources(),imageNames[0]);
        mScreenPoints = new Point();
    }

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);

                   // NPE happening here
        mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints);

        int totalCircle=4;
        int radius=40;
        int centerimagesize=35;

        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, i*radius, mCirclePaint); 
        } 

        canvas.drawBitmap(mBitmap, (mScreenPoints.x-(centerimagesize/2)),(mScreenPoints.y-(centerimagesize/2)), null);
        super.draw(canvas,mapView,shadow);

        return true;
    }
} 
```

**更新：-**

我发现了问题，我猜当我将叠加层添加到列表时，它总是会立即开始绘制。我是否得到一个位置并不重要。**我怎样才能有一种安全有效的方法来添加不添加覆盖，直到有一个位置来设置。？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:40:08.513

```
mapView = (MapView) findViewById(R.id.mapView); 
```

它将创建地图视图并开始加载地图。

```
locationManager.requestLocationUpdates 
```

您正在请求位置，但它会稍后到达，谁知道何时，也许 50 秒后！

```
public void onLocationChanged(Location location) {
        if (location != null) {
            GeoPoint point = new GeoPoint(
                    (int) (location.getLatitude() * 1E6), 
                    (int) (location.getLongitude() * 1E6));

            mapController.animateTo(point);
            mapController.setZoom(15);

            mapOverlay.setPointToDraw(point);
            mapView.invalidate();
        }
    } 
```

只有在这里你设置点，什么时候到达位置

```
mapOverlay.setPointToDraw(point); 
```

但是地图已经显示并且 draw() 已被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:45:56.830

安全方式：

```
public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
    if(pointToDraw == null){ // it isn't found the location yet.
         return super.draw(canvas, mapView, shadow); // do the default
    }        

   // else:
    super.draw(canvas, mapView, shadow);

                   // NPE happening here
        mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints);

        int totalCircle=4;
        int radius=40;
        int centerimagesize=35;

        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, i*radius, mCirclePaint); 
        } 

        canvas.drawBitmap(mBitmap, (mScreenPoints.x-(centerimagesize/2)),(mScreenPoints.y-(centerimagesize/2)), null);
        super.draw(canvas,mapView,shadow);

        return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:23:17.020

```
if(mapView != null){
    Projection projection = mapView.getProjection();
    if(projection != null){
          mScreenPoints = projection.toPixels(pointToDraw, mScreenPoints);
    }
    else{
      // log it projection is null
    }
}
else{
   //log it mapView is null
} 
```

现在空指针在哪里？

# c++ - 如何根据模板参数返回不同的类型

> ID：12452664
> 
> 赞同：0
> 
> 时间：2012-09-17T02:59:05.257
> 
> 标签：c++, visual-studio-2010, templates, visual-c++, template-meta-programming

我想创建一个模板函数，它返回`int`或`std::vector<int>`取决于模板参数。例如：

```
struct ReturnInt {};
struct ReturnVec {};

[...]

int num = func<ReturnInt>();
std::vector<int> nums = func<ReturnVec>(); 
```

基于我对 TMP 的非常有限的经验，我一直在天真地尝试实现这一点。我觉得它应该涉及一些类似于显式模板专业化`std::enable_if`、、、`std::conditional`和/或 SFINAE 的内容。但是我编写的代码都不会编译，更不用说在简单的测试中运行了。

这种返回类型的切换将如何实现？

**编辑：**如评论中所述，这是对我的实际问题的简化。如果有帮助，我有一个接受模板参数的类。根据参数，我希望它的`get()`方法返回单个对象/值或对象/值的标准容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:07:37.567

根据您的编辑，您只需要一个沼泽标准模板专业化

```
struct ReturnsInt{};
struct ReturnsVec{};

template<typename T>
class Foo {};

template<>
class Foo<ReturnsInt> {
public:
    int get() { return 3; }
};

template<>
class Foo<ReturnsVec> {
public:
    std::vector<int> get() {
        return {3};
    }
}; 
```

* * *

如果你只想基于模板修改一个成员函数，但重用类定义的其余部分，你可以使用辅助类

```
struct ReturnsInt{};
struct ReturnsVec{};

class helper_Foo {
public:
    string bar() {
        return "this is a shared method";
    }
};

template<typename T>
class Foo : public helper_Foo {};

template<>
class Foo<ReturnsInt> : public helper_Foo {
public:
    int get() { return 3; }
};

template<>
class Foo<ReturnsVec> : public helper_Foo {
public:
    std::vector<int> get() {
        return {3};
    }
}; 
```

# jquery - JQuery 删除和合并数组

> ID：12452665
> 
> 赞同：0
> 
> 时间：2012-09-17T02:59:07.427
> 
> 标签：jquery, arrays, dynamic-tables

所以我的页面上有一个动态表，用户可以添加、编辑和删除条目。这是我用于从表中删除一行的 jquery 代码：

```
$("#table").on("click", "button", function() {
       $(this).closest("tr").remove(); 
       num_rows--;
       delete fname_new[num_row];
       delete lname_new[num_row];
       delete phone_new[num_row];
       delete email_new[num_row];
       delete ethnicity_new[num_row];
    }); 
```

但问题是，假设 fname_new 数组有 4 行中的 4 个条目。所以 fname_new 将包含每行的名字数据，所以它看起来像这样：

```
[row0,row1,row2,row3] 
```

但是假设用户删除了第 2 行，我从上面的代码中删除了，但是 fname_new 数组看起来像这样：

```
[row0, ,row2,row3] 
```

但我想巩固它并使它看起来像这样：

```
[row0,row2,row3] 
```

我怎么做？我尝试使用 grep 但这没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:08:13.823

`num_row`假设是从零开始的，用这个替换你的“删除”语句。

```
 fname_new.splice(num_row, 1);
  lname_new.splice(num_row, 1);
  phone_new.splice(num_row, 1);
  email_new.splice(num_row, 1);
  ethnicity_new.splice(num_row, 1); 
```

# ios - GPUImage：如何使用子视图保存 imageView

> ID：12452666
> 
> 赞同：1
> 
> 时间：2012-09-17T02:59:12.117
> 
> 标签：ios, gpuimage

我使用来自github的名为DLCImagePickerController的代码。示例只是告诉我如何使用过滤器然后保存，现在我在imageView上创建一个subImageView来显示框架（只是一些图片），当我想保存时，我不知道如何保存

# regex - perl 删除连续的重复行

> ID：12452668
> 
> 赞同：3
> 
> 时间：2012-09-17T03:00:00.110
> 
> 标签：regex, perl, delete-row

我想删除连续的重复行。即例如

```
**test.txt**
car
speed is good
bike 
slower than car
plane
super fast
super fast
bullet train 
super fast 
```

这将删除除第一次出现之外的所有重复行。

```
perl -ne 'print unless $a{$_}++' 
```

但我希望输出是

```
 **test.txt**
    car
    speed is good
    bike 
    slower than car
    plane
    super fast
    bullet train 
    super fast 
```

我试过这个 oneliner 但这并没有做任何事情，只是打印输入。

```
perl -00 -F'<\w+>|</\w+>' -i.bak -lane 'foreach(@F){if ($_=~/\w+/ && ($a ne $_)){print "$_";$a=$_;}}' 
```

这该怎么做？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T03:08:02.870

你为什么不直接使用`uniq`？

```
uniq file.txt 
```

结果：

```
car
speed is good
bike 
slower than car
plane
super fast
bullet train 
super fast 
```

你也可以这样做`awk`：

```
awk 'line != $0; { line = $0 }' file.txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T03:04:31.407

```
$ perl -ne 'print $_ unless $_ eq $prev; $prev = $_' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T03:04:40.373

尝试：

```
perl -ne 'print unless (defined($prev) && ($_ eq $prev)); $prev=$_' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T14:18:01.993

我还想跟踪有多少重复被抑制并且只跳过连续的重复。

虽然这并不完全是 OP 所要求的，但它是其他人可能会发现有用的变体：

```
perl -ne 'if (defined($pr) && ($_ eq $pr)) {$cnt++;} else {print "... (+$cnt)\n" if ($cnt); print; $cnt=0; $pr=$_;}' 
```

它用我的数据（数据库恢复日志）产生了类似的东西：

```
COPY 9
COPY 0
... (+2)
COPY 5
COPY 0
... (+1)
COPY 24
ALTER TABLE
... (+23)
CREATE INDEX
... (+73) 
```

# ruby-on-rails - 根到rails中的子域

> ID：12452670
> 
> 赞同：2
> 
> 时间：2012-09-17T03:00:36.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, dns, subdomain

我有网站 www.Meer.li，我想更改根 url，这样人们在输入网站名称时就会进入 www.iphone.meer.li。我该如何管理？

我已经有一些代码，但它不起作用：

```
root :to => 'designs#featured', :subdomain => "iphone" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:59:28.250

好吧，这行得通，但我不确定这样做的正确方法有多少……

```
match "/" => redirect(:subdomain => "iphone") 
```

# python - 扩展 python 日志处理程序，获取“级别不是整数或有效字符串”

> ID：12452671
> 
> 赞同：1
> 
> 时间：2012-09-17T03:00:39.417
> 
> 标签：python, django, logging, extend

我正在尝试创建自己的日志处理程序，它扩展了 logging.Handler

```
import logging
from logging import Handler

class DBHandler(Handler,object):
    model = None
    def __init__(self, model):
        super(DBHandler, self).__init__(self)
        mod = __import__(model)
        components = name.split('.')
        for comp in components[1:]:
            mod = getattr(mod, comp)
        self.model = mod

    def emit(self,record):
        log_entry = self.model(level=record.levelname, message=record.msg)
        log_entry.save() 
```

这是日志配置：

```
'search_log':{
    'level': 'INFO',
    'class': 'logger.handlers.DBHandler',
    'model': 'logger.models.SearchLog',
    'formatter': 'verbose',
     } 
```

但是我收到以下错误，请参阅stacktrace：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
    app_name = get_commands()[subcommand]
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/conf/__init__.py", line 135, in __init__
    logging_config_func(self.LOGGING)
  File "/usr/lib/python2.7/logging/config.py", line 777, in dictConfig
    dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 575, in configure
    '%r: %s' % (name, e))
ValueError: Unable to configure handler 'search_log': Level not an integer or a valid string: <logger.handlers.DBHandler object at 0x2df1710> 
```

我一直在查看 python 日志记录源代码，但无法弄清楚我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:02:38.133

问题出在这一行：

```
super(DBHandler, self).__init__(self) 
```

`self`如果您使用`super`这种方式，您不应该通过。您`self`有效地传递了两次，并且`logging`模块试图将第二次解释`self`为日志记录级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-20T13:02:12.650

我通过将 level='Debug' 更改为 level=30 python 3.9.0 解决了同样的问题

"级别不是整数或有效字符串：'%r%' 级别

# proxy - Play Framework 可以充当代理服务器还是反向代理？

> ID：12452674
> 
> 赞同：6
> 
> 时间：2012-09-17T03:01:32.033
> 
> 标签：proxy, playframework, reverse-proxy

我有客户端：**C**，服务器：**S**（例如在端口 7000 上的本地 ip 10.0.0.1 上）和 Web 服务器：**W**（例如在 www.example.com 上）

C 想通过 web 路径联系 S：[http ://www.example.com/path_for_server_S](http://www.example.com/path_for_server_S)

所以 W 充当**正向代理**

现在 S 将通过相同的路径联系 C：[http ://www.example.com/path_for_server_S](http://www.example.com/path_for_server_S)

所以现在 W 充当**反向代理**

然后在 Apache 中，这将是一个常见的配置，如下所示：

```
ProxyPass /path_for_server_S http://10.0.0.1:7000
ProxyPassReverse /path_for_server_S http://10.0.0.1:7000 
```

**已经内置 Web 服务器**的 Play Framework可以处理这种情况吗？****

 **搜索了很多，没有发现任何关于此事的信息：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:59:28.523

您当然可以在任何现代 Web 框架中手动编写代理组件，方法是从控制器[触发 HTTPS 请求](https://github.com/playframework/Play20/wiki/Javahttp)，然后将结果传回响应中。

不过，如果您获得 Nginx 级别的性能，我会感到惊讶。**

# python - 计算 Python 列表中出现次数的最快方法

> ID：12452678
> 
> 赞同：44
> 
> 时间：2012-09-17T03:02:24.820
> 
> 标签：python, list, repeat

`'1'`我有一个 Python 列表，我想知道在这个列表中计算项目出现次数的最快方法是什么。在我的实际情况下，该项目可能会出现数万次，这就是我想要一种快速方法的原因。

```
['1', '1', '1', '1', '1', '1', '2', '2', '2', '2', '7', '7', '7', '10', '10'] 
```

哪种方法：`.count`或者`collections.Counter`可能更优化？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-09-17T03:03:54.947

```
a = ['1', '1', '1', '1', '1', '1', '2', '2', '2', '2', '7', '7', '7', '10', '10']
print a.count("1") 
```

它可能在 C 级别进行了大量优化。

编辑：我随机生成了一个大列表。

```
In [8]: len(a)
Out[8]: 6339347

In [9]: %timeit a.count("1")
10 loops, best of 3: 86.4 ms per loop 
```

编辑编辑：这可以通过[collections.Counter来完成](http://docs.python.org/library/collections.html#collections.Counter)

```
a = Counter(your_list)
print a['1'] 
```

在我上一个计时示例中使用相同的列表

```
In [17]: %timeit Counter(a)['1']
1 loops, best of 3: 1.52 s per loop 
```

我的时间安排很简单，并且取决于许多不同的因素，但它为您提供了关于性能的良好线索。

这是一些简介

```
In [24]: profile.run("a.count('1')")
         3 function calls in 0.091 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.091    0.091 <string>:1(<module>)
        1    0.091    0.091    0.091    0.091 {method 'count' of 'list' objects}

        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Prof
iler' objects}

In [25]: profile.run("b = Counter(a); b['1']")
         6339356 function calls in 2.143 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    2.143    2.143 <string>:1(<module>)
        2    0.000    0.000    0.000    0.000 _weakrefset.py:68(__contains__)
        1    0.000    0.000    0.000    0.000 abc.py:128(__instancecheck__)
        1    0.000    0.000    2.143    2.143 collections.py:407(__init__)
        1    1.788    1.788    2.143    2.143 collections.py:470(update)
        1    0.000    0.000    0.000    0.000 {getattr}
        1    0.000    0.000    0.000    0.000 {isinstance}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Prof
iler' objects}
  6339347    0.356    0.000    0.356    0.000 {method 'get' of 'dict' objects} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-02-11T09:52:58.803

通过使用**Counter**字典以最有效的方式计算所有元素的出现以及 python 列表中最常见的元素的出现值。

如果我们的 python 列表是：-

```
l=['1', '1', '1', '1', '1', '1', '2', '2', '2', '2', '7', '7', '7', '10', '10'] 
```

**要查找 python 列表中每个项目的出现，请使用以下命令：-**

```
\>>from collections import Counter

\>>c=Counter(l)

\>>print c

Counter({'1': 6, '2': 4, '7': 3, '10': 2}) 
```

**要在 python 列表中查找最多/最高出现的项目：-**

```
\>>k=c.most_common()

\>>k

[('1', 6), ('2', 4), ('7', 3), ('10', 2)] 
```

**对于最高的一个**：-

```
\>>k[0][1]

6 
```

对于该项目，只需使用 k[0][0]

```
\>>k[0][0]

'1' 
```

**对于第 n 个最高项目及其在列表中出现的次数，请使用以下内容：-**

**对于 n=2 **

```
\>>print k[n-1][0] # For item

2

\>>print k[n-1][1] # For value

4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-09T07:43:03.417

您可以`pandas`通过将 , 转换`list`为 a`pd.Series`然后简单地使用`.value_counts()`

```
import pandas as pd
a = ['1', '1', '1', '1', '1', '1', '2', '2', '2', '2', '7', '7', '7', '10', '10']
a_cnts = pd.Series(a).value_counts().to_dict()

Input  >> a_cnts["1"], a_cnts["10"]
Output >> (6, 2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-16T03:44:57.797

结合 lambda 和 map 函数也可以完成这项工作：

```
list_ = ['a', 'b', 'b', 'c']
sum(map(lambda x: x=="b", list_))
:2 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-03T18:18:18.490

您可以将字符串中的列表转换为以空格分隔的元素，并根据要搜索的数字/字符将其拆分。

对于大型列表将是干净和快速的..

```
>>>L = [2,1,1,2,1,3]
>>>strL = " ".join(str(x) for x in L)
>>>strL
2 1 1 2 1 3
>>>count=len(strL.split(" 1"))-1
>>>count
3 
```

# .net - 蓝牙控制库

> ID：12452681
> 
> 赞同：0
> 
> 时间：2012-09-17T03:02:58.590
> 
> 标签：.net, bluetooth, frequency, rssi

我正在寻找一个实现蓝牙堆栈的库。

我需要能够更改发送参数，即跳频、信号功率。

最好在 .NET 中，但任何库都可以。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:11:19.873

你可以试试[32feet.NET](http://32feet.codeplex.com/)库

# c# - 如何从我的列表中删除 外部网站的链接？

> ID：12452682
> 
> 赞同：2
> 
> 时间：2012-09-17T03:03:07.167
> 
> 标签：c#

我有这个代码：

```
private void ToLocalSiteOnlyToolStripMenuItem_Click(object sender, EventArgs e)
        {
            if (buttonSwitch == true)
            {
                ToLocalSiteOnlyToolStripMenuItem.ForeColor = Color.Red;
                buttonSwitch = false;
                removeExt = true;
            }
            else
            {
                ToLocalSiteOnlyToolStripMenuItem.ForeColor = Color.Black;
                buttonSwitch = true;
                removeExt = false;
            }
        }

private void removeExternals(List<string> externals)
    {

        for (int i = 0; i < externals.Count; i++)
        {
            if (!externals[i].StartsWith(mainUrl))
            {
                externals.RemoveAt(i);
            }
        }
    } 
```

当我点击菜单和它的红色然后我在这里调用函数 removeExternals ：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {

            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            try
            {
                doc = hw.Load(url);
                webSites = getLinks(doc);
                removeDupes(webSites);
                if (removeExt == true)
                {
                    removeExternals(webSites);
                } 
```

现在网站列表包含网站的链接，例如：

```
www.ynet.co.il
www.hot.co.il
www.walla.co.il 
```

现在变量 mainUrl 是[http://www.ynet.co.il](http://www.ynet.co.il) 我希望每个 iertion 即时调用测试函数，然后网站每次都有不同的链接列表以删除所有不以[http://www开头的链接.ynet.co.il](http://www.ynet.co.il)

所以最后每次我都会在网站上出现仅以以下链接开头的链接：[http ://www.ynet.co.il](http://www.ynet.co.il)

但似乎我的 removeExternals 函数并没有像我想要的那样运行良好。

问题出在哪里以及如何修复？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:08:28.307

问题出在你的循环中：

```
 for (int i = 0; i < externals.Count; i++)
  {
      if (!externals[i].StartsWith(mainUrl))
      {
          externals.RemoveAt(i);
      }
  } 
```

每次调用`RemoveAt()`时，都会更改所有索引。如果您调用`RemoveAt(1)`，则 1 之后的所有内容都会向下移动。我建议以相反的顺序循环，例如：

```
 for (int i = externals.Count - 1; i >= 0; i--)
  {
      if (!externals[i].StartsWith(mainUrl))
      {
          externals.RemoveAt(i);
      }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T03:12:32.107

同意迈克克里斯滕森关于您的问题的原因。这是我推荐的，而不是循环：

```
externals.RemoveAll(s => s.StartsWith(mainUrl)); 
```

你可以用这条线替换你的`removeExternals`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:10:04.603

我注意到的第一件事是您的 removeExternals 方法正在从零元素中删除项目，这可能导致不正确的删除，因为编号的元素会随着索引删除而变化。要解决该问题，请反转循环以从结尾到开头，这将保证删除以正确的顺序完成。

# uitableview - 使用 UITextView 的标签属性将 UITextView 添加到 UITableViewCell 时遇到问题

> ID：12452689
> 
> 赞同：0
> 
> 时间：2012-09-17T03:04:42.780
> 
> 标签：uitableview

我有一个分组表，其中每一行都是它自己的部分。我试图让其中两行将 UITextViews 作为 UITableViewCell 的 contentView 的子视图。这是我的 cellForRowAtIndexPath 方法（相关部分）：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:LeftDetailCellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:LeftDetailCellIdentifier];
}
if (section == kFirstSection) {// some code }

else if (section == kNameSection) {
    cell.textLabel.text = @"name";

    UITextView *nameTextView = [[UITextView alloc] initWithFrame:CGRectMake(80, 12, kTextViewWidth, kTextViewHeight)];
    nameTextView.text = self.address.name;

    nameTextView.font = [UIFont boldSystemFontOfSize:12.0];
    nameTextView.tag = kNameTextViewTag;
    nameTextView.backgroundColor = [UIColor blueColor];
    nameTextView.delegate = self;

    [cell.contentView addSubview:nameTextView];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
else if (section == kNotesSection) {
    cell.textLabel.text = @"notes";

    UITextView *notesTextView = [[UITextView alloc] initWithFrame:CGRectMake(80, 12, kTextViewWidth, kTextViewHeight)];
    notesTextView.text = self.address.notes;

    notesTextView.font = [UIFont boldSystemFontOfSize:12.0];
    notesTextView.tag = kNotesTextViewTag;
    notesTextView.backgroundColor = [UIColor orangeColor];
    notesTextView.delegate = self;

    [cell.contentView addSubview:notesTextView];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
} 
```

我知道我的部分是正确的，因为在我的 UI 中，我会看到相应的名称和注释。但是，我的 UITextViews 最终都具有橙色颜色。（我不想要颜色，但我试图解决为什么我在我的 textView 委托方法中得到错误的值）。

在我的常量文件中，我将标签声明为：

```
const NSInteger kNameTextViewTag = 10;
const NSInteger kNotesTextViewTag = 20; 
```

出于某种原因，我的 tableViewCell 最终在其中包含错误的 textView。是否有一个原因？我假设它与 dequeuReusableCellWithIdentifier 方法有关，但不确定。谢谢！

**编辑** 从马丁的评论中，我尝试了这个，但仍然无法正常工作：

```
 static NSString *NameTextViewCellIdentifier = @"NameTextViewCellIdentifier";
    static NSString *NotesTextViewCellIdentifier = @"NotesTextViewCellIdentifier";

else if (section == kNameSection) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:NameTextViewCellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:LeftDetailCellIdentifier];
        }

        cell.textLabel.text = @"name";

        UITextView *nameTextView = [[UITextView alloc] initWithFrame:CGRectMake(80, 12, kTextViewWidth, kTextViewHeight)];
        nameTextView.text = self.address.name;

        nameTextView.font = [UIFont boldSystemFontOfSize:12.0];
        nameTextView.tag = kNameTextViewTag;
        nameTextView.backgroundColor = [UIColor blueColor];
        nameTextView.delegate = self;

        [cell.contentView addSubview:nameTextView];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        return cell;
    }
    else if (section == kNotesSection) {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:NotesTextViewCellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:LeftDetailCellIdentifier];
        }

        cell.textLabel.text = @"notes";

        UITextView *notesTextView = [[UITextView alloc] initWithFrame:CGRectMake(80, 12, kTextViewWidth, kTextViewHeight)];
        notesTextView.text = self.address.notes;

        notesTextView.font = [UIFont boldSystemFontOfSize:12.0];
        notesTextView.tag = kNotesTextViewTag;
        notesTextView.backgroundColor = [UIColor orangeColor];
        notesTextView.delegate = self;

        [cell.contentView addSubview:notesTextView];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        return cell;
    } 
```

我在这个类的父类中有 UITextViewDelegate，因为我有另一个类也使用代码按需调整 UITextView 的大小。

```
- (void)textViewDidChange:(UITextView *)textView {
    // Calculate the size of the text to reload the height for that table row
    NSString *tempString = textView.text;
    NSString *trimmedString = [tempString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSLog(@"tag: %i ", textView.tag);
    if (textView.tag = kNameTextViewTag) {
        self.address.name = trimmedString;
    }
    else {
        self.address.notes = trimmedString;
    }

    [self setTextViewSize:textView]; // set proper text view size

    UIView *contentView = textView.superview;
    // (1) the padding above and below the UITextView should each be 6px, so UITextView's
    // height + 12 should equal the height of the UITableViewCell
    // (2) if they are not equal, then update the height of the UITableViewCell
    if ((textView.frame.size.height + 12.0f) != contentView.frame.size.height) {
        [self.tableView beginUpdates];
        [self.tableView endUpdates];

        [contentView setFrame:CGRectMake(0,
                                         0,
                                         contentView.frame.size.width,
                                         (textView.frame.size.height+12.0f))];
    }
} 
```

所以我的标签仍然不正确。当这个委托方法被名称 textView 调用时，会记录正确的标签索引。但是，当我更新注释 textview 时，它会为一个键条目记录正确的 textView，然后再次开始记录名称 textView。不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:45:20.487

在创建了一个可以运行的测试项目之后，我重新查看了我的代码，看看它在哪里出错了。在我的 textViewDidChange 方法中，我犯了 = 而不是 == 的 noob 错误。抱歉，添麻烦了！

```
if (textView.tag = kNameTextViewTag) {
        self.address.name = trimmedString;
    }
    else {
        self.address.notes = trimmedString;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:58:23.220

您应该为每种单元格类型使用不同的重用标识符，否则您为“注释部分”构建的单元格稍后可能会被重用于“名称部分”，反之亦然。

# php - 调用未定义的方法 DateTime::add() - PHP 版本 5.4.6

> ID：12452690
> 
> 赞同：1
> 
> 时间：2012-09-17T03:04:58.660
> 
> 标签：php, undefined, dateinterval

我有以下功能，我在[这个主题上得到了帮助](https://stackoverflow.com/questions/12400154/compare-day-with-day-and-find-next-date-of-day-in-php/12400494)

```
function nextDelivery($day,$o_date,$oc) {
    $day_names = array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
    $day_num = array_search($day, $day_names);
    $o_date = new DateTime($o_date);
    $o_day_num = $o_date->format('w');
    $day_diff = ($day_num - $o_day_num) % 7;
    if($day_diff<0){$day_diff=7+$day_diff;}elseif($day_diff==0){$day_diff=7;}
    if($oc==2){$day_diff+7;}
    $order_day = clone $o_date;
    $order_day->add(new DateInterval("P".$day_diff."D"));
    return $order_day->format('Y-m-d H:i:s');
} 
```

现在我刚刚将时间戳更改为太平洋/奥克兰，因为我的东道主是美国/丹佛。这改变了一切，除了使用 Cron Jobs 运行的文件，它们仍在输出旧的时间戳。现在，如果我在我网站的页面上运行此功能，它可以正常工作，但是如果使用完全相同的功能运行 cron 作业文件，我会收到以下错误

`PHP Fatal error: Call to undefined method DateTime::add() in ***** on line 156`

这是`$order_day->add(new DateInterval("P".$day_diff."D"));`

这是我的信息[http://www.dpdesignz.co.nz/homefresh/lib/php_info.php](http://www.dpdesignz.co.nz/homefresh/lib/php_info.php)

有没有人知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:12:20.857

[`DateTime::add`在 PHP 5.3.0 中添加。](http://php.net/manual/en/datetime.add.php)您的 cron 作业可能使用的是旧版本。尝试升级，或更改它使用的版本。如果您不能这样做，那么，如注释中所述：[`DateTime::modify`是一种替代方法](http://php.net/manual/en/datetime.modify.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:16:35.857

PHP 使用不同的 php.ini 文件，具体取决于它是从 CLI 运行还是作为来自网络服务器的 CGI 运行。听起来 CLI php.ini 可能指向不正确的东西。

# ruby-on-rails - 生成作用域模型 ID

> ID：12452692
> 
> 赞同：0
> 
> 时间：2012-09-17T03:05:43.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

给定

```
class Account < ActiveRecord::Base
  has_many :orders
end 
```

我需要为每个帐户生成唯一的订单号。每个帐户可以有订单 1000 但订单 1000 不能存在于同一帐户中。

```
@account1 = Account.first
@account1.orders.create(:price => 1.20) # order 1000 auto generated, next will be 1001 
```

account1 则不能有两个编号为 1000 的订单，但其他帐户可以。

我正在努力寻找实现这一点的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:05:16.540

我会添加验证，例如将以下内容添加到您的订单模型中：

```
validates :order_no, :uniqueness => { :scope => :account, :message => "Try again saving, a deadlock might have occurred!"} 
```

为了确保，ID 实际上是唯一的并且没有发生死锁。然后添加以下验证：

```
before_validation :generate_and_set_uniq_order_no 
```

和

```
def generate_and_set_uniq_order_no
  # insert Amit's solution here, or anything else (e.g. sorting/unifying/incrementing)
end 
```

真正获得唯一的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:14:11.990

使用[表排序](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Table_sequencing)，其中一个表将保存每个帐户的最后一个 ID。你的桌子的结构想要

```
ACCOUNT_ID  CURRENT_ID
3283    1000
5078    1000
9000       1 
```

每次创建订单增量时，将其用作订单 ID 并更新帐户的 CURRENT_ID。

请注意，此解决方案的问题是[并发和死锁](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Concurrency_and_Deadlocks)

# c# - 通过实体框架保存收益回报的变化

> ID：12452696
> 
> 赞同：0
> 
> 时间：2012-09-17T03:06:24.200
> 
> 标签：c#, entity-framework, return, yield, savechanges

我在让实体框架正确保存收益返回的结果时遇到问题。为了说明问题，我创建了两组方法，一组返回一个实体，另一组使用 yield return 返回一个 IEnumerable。期刊引用 UserProfile。

设置 1：

```
public static UserProfile CreateUser()
{
    return new UserProfile() { 
                 UserId = Guid.Parse("60a3987c-0aa6-4a93-  a5d2-68c51122858b"), 
                 UserName = "jason"
               };
}
public static Journal CreateJournal(UserProfile userProfile)
{
    return new Journal() { UserProfile = userProfile };
} 
```

第 2 组：

```
public static IEnumerable<UserProfile> CreateUsers()
{
     yield return new UserProfile() { 
                          UserId = 
                             Guid.Parse("02cd1e9f-5947-4b08-9616-5b4f4033d074"), 
                          UserName = "john"
                      };
}
public static IEnumerable<Journal> CreateJournals(UserProfile userProfile)
{
    yield return new Journal() { UserProfile = userProfile };
} 
```

TestSet1 和 TestSet2 分别保存来自 Set1 和 Set2 的结果。TestSet1 有效，但 TestSet2 引发违反主键约束“PK_dbo.UserProfiles”的异常。另一个观察结果 - 如果我初始化一个 List 并返回它而不是 yield return 那么它就可以工作。

```
public static void TestSet1()
{
   var u = CreateUser();
   var j = CreateJournal(u);
   _db.UserProfiles.Add(u);
   _db.Journals.Add(j);
   _db.Commit();
}

public static void TestSet2()
{
   var uList = CreateUsers();
   var jList = CreateJournals(uList.ElementAt(0));
   _db.UserProfiles.Add(uList.ElementAt(0));
   _db.Journals.Add(jList.ElementAt(0));
   _db.Commit();
} 
```

您对为什么 Set2 中的收益回报不起作用有何看法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:14:14.800

发生的事情是因为您实际上并没有具体化列表，所以您正在创建 2 个 UserProfile 对象。如果您在此行上放置断点，您可以看到这一点：

```
yield return new UserProfile() { UserId = Guid.Parse("02cd1e9f-5947-4b08-9616-5b4f4033d074"), UserName = "john"}; 
```

您会注意到它被调用了两次——因此 jList 函数不是获取为 uList 创建的原始 UserProfile，而是获取一个**新**的UserProfile 对象。现在，虽然它们具有相同的 Guid，但它们在技术上并不相等，因为它们是引用类型并且它们没有指向同一个地方。然后 ChangeTracker 将看到它们不相等并尝试在数据库中创建 2 个对象，一个用于 UserProfiles.Add()，然后将第二个附加到您的 jList，具有相同的 Guid，这就是您得到错误的方式.

您可以通过在 Test2 函数中调用 CreateUsers 上的 ToList() 来修复代码，将列表具体化到内存中，以便所有内容都匹配。

```
public static void TestSet2()
{
   var uList = CreateUsers().ToList();
   var jList = CreateJournals(uList.ElementAt(0));
   _db.UserProfiles.Add(uList.ElementAt(0));
   _db.Journals.Add(jList.ElementAt(0));
   _db.Commit();
} 
```

有关 yield 关键字如何工作的更多信息，请参见[此处](http://blogs.msdn.com/b/oldnewthing/archive/2008/08/12/8849519.aspx)、[此处](http://www.robmiles.com/journal/2011/4/8/c-yield-return-fun.html)和[此处](https://stackoverflow.com/questions/3438670/how-does-this-function-work-in-detail)

# java - wshttpbinding 仅适用于 .net 客户端？

> ID：12452699
> 
> 赞同：2
> 
> 时间：2012-09-17T03:07:07.287
> 
> 标签：java, wcf, wshttpbinding

**wsHttpBinding**是否仅适用于**.NET 客户端**？

因为在 wsHttpBinding 中默认启用了安全性，所以数据传输带有加密。那么非 .NET 客户端（如**java 或 php**）如何使用此类 WCF 服务呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:32:29.503

我相信，WsHttpBinding 的默认消息安全设置为“Windows”。这很可能是因为这将使安全工作开箱即用，至少对于 WCF 服务和客户端而言。

如果您需要可互操作，但很容易改变它。您可以将其设置为以下任何一项：

*   窗户（默认）
*   没有任何
*   用户名
*   证书
*   已发行令牌

有关更多详细信息，请参阅[“wsHttpBinding 的消息”MSDN 页面](http://msdn.microsoft.com/en-us/library/ms731346.aspx)。要测试与 Java 或 PHP 客户端的通信，您可以暂时禁用安全性：

```
<wsHttpBinding>
  <binding>
    <security mode="Message">
      <!-- Not recommended! Use only for testing. -->
      <message clientCredentialType="None" />
    </security>
  </binding>
</wsHttpBinding> 
```

在您完成工作后，您可以切换到 - 例如 - 使用证书，具体取决于您的非 WCF 端支持的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:30:28.647

正如 Jeroen 所说，默认情况下 wsHttpBinding 默认为消息安全和 Windows 凭据

对于非 Windows 客户端，您需要更改身份验证模式。但是，如果您保持消息安全性，您还需要任何使用工具包来实现 WS-Security（和 WS-Trust / WS-SecureConversation）。

您正在使用 wsHttpBinding 的哪些功能，这意味着 basicHttpBinding 不合适？BasicHttpBinding 是一种更简单的绑定，可以在互操作场景中工作

# bash - 跟踪连接的 wifi 设备 bash 脚本

> ID：12452700
> 
> 赞同：1
> 
> 时间：2012-09-17T03:07:18.007
> 
> 标签：bash

我正在尝试编写一个 bash 脚本，该脚本将通过 mac 地址记录 wifi 连接的连接状态，但我在代码的语法上遇到了一些问题。

```
#!/bin/sh

client="E1:FA:41:23:00:AC"
logfile="/var/logs/wificonn.log"
timestamp=$(date +"%Y%d%m %T")
assoclist=$(wl assoclist | grep $client)
loglast=$(tail -n 1 $logfile | grep $client Not Connected)
notconnmsg="$timestamp $client Not Connected"
connmsg="$timestamp $client Connected"

if [ ! -f $logfile ]; then
    touch $logfile
fi

if [ -z $assoclist  ]; then # Client is not connected
  if [ -n $loglast ]; then # Last log is connected show not connected message
    echo $notconnmsg
    echo $notconnmsg >> $logfile
  fi  
else # Client is connected
  if [ -z $loglast ]; then  # Last log is not connected show connected message
    echo $connmsg
    echo $connmsg >> $logfile
  fi  
fi 
```

这将作为 cron 作业每 60 秒运行一次，并且仅在相反的情况下才希望它显示/记录已连接或未连接的事件。我试图通过检查最后一个日志条目来实现这一点。例如，如果最后一个日志未连接而现在已连接，则记录到文件。这就是问题所在。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:13:08.490

我更改了代码并得到了这个可行的解决方案，以防有人想使用它

```
#!/bin/sh

client="XX:XX:XX:XX:XX:XX"
logfile="/var/log/wifilog-$(date +"%m%d")-$client.log"
assoclist=$(wl assoclist | grep $client)
notconnmsg="$(date +"%T") Disconnected"
connmsg="$(date +"%T") Connected"

if [ ! -f $logfile ]; then
    echo $notconnmsg > $logfile
fi

if [ -z $assoclist  ]; then # Client is not connected
  echo $(tail -n 1 $logfile) - $notconnmsg
  if [ -z $(tail -n 1 $logfile | grep "Disconnected") ]; then # Last log is connected show not connected message
    echo $notconnmsg >> $logfile    
  fi  
else # Client is connected
  echo $(tail -n 1 $logfile) - $connmsg
  if [ -z $(tail -n 1 $logfile | grep "Connected") ]; then  # Last log is not connected show connected message
    echo $connmsg >> $logfile    
  fi   
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T04:13:20.650

```
if [ -n $loglast ]; then 
```

尝试`$loglast`用双引号括起来：

```
if [ -n "$loglast" ]; then 
```

当`$loglast`为空时，bash 看到`if [ -n ]`. 你不是在评估一个空的论点，你在评估什么。您可以尝试以下方法来查看差异：

```
$ loglast=""
$ if [ -n "$loglast" ]; then echo 'yep'; fi
# <no output>
$ if [ -n $loglast ]; then echo 'yep'; fi
# yep 
```

# c# - 遍历 Datagridview 列标题

> ID：12452701
> 
> 赞同：3
> 
> 时间：2012-09-17T03:07:28.777
> 
> 标签：c#, .net, winforms, datagridview

给定一个 DataGridView，我想遍历 datagridivew **column headers**。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T03:13:45.817

```
foreach (DataGridViewColumn column in myDataGridView.Columns)
{
   DataGridViewColumnHeaderCell headerCell = column.HeaderCell;
   string headerCaptionText = column.HeaderText;
   string columnName = column.Name; // Used as a key to myDataGridView.Columns['key_name'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:11:22.697

您可以像[本示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.columns.aspx)中那样通过属性遍历`DataGridView.Columns`属性以检索其标头。现在，如果您设置了关联的标题单元格，那么您需要改用[HeaderText](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.headertext.aspx)属性。`Name`

# android - Android 2.3.3 应用程序列表菜单代码示例？

> ID：12452703
> 
> 赞同：1
> 
> 时间：2012-09-17T03:07:40.287
> 
> 标签：android, list, menu, scrollable, animated

只是想知道在哪里可以找到有关菜单列表的代码示例，其中包含您的 android 手机中的所有应用程序作为图像图标。您可以在应用程序图标中向下滚动，并且您的手指移动速度。此外，多个部分将图标划分为部分：如部分下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:15:29.107

在 android-sdk 中有一个示例作为**apidemos示例的一部分。**如果您在手机或模拟器中安装了 APIDemos，则可以浏览到**App->Loader->Custom**。它应该如下图所示。

![在此处输入图像描述](../Images/b7d2df188423aac95b1afa89a49f8f42.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:11:59.223

看看 Github 上的 Android Git 镜像：[管理应用程序的设置应用程序部分的源代码可能是您正在寻找的](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/applications/ManageApplications.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:05:29.627

2.3.3 中的应用列表是这样的，代码在哪里？

[这里](http://static5.businessinsider.com/image/4e0cb6e0cadcbbc53f020000-590/the-galaxy-s-ii-runs-android-version-233-not-a-huge-fan-of-the-touchwiz-skin-though.jpg)

# javascript - Windows 8 网络摄像头分辨率

> ID：12452705
> 
> 赞同：2
> 
> 时间：2012-09-17T03:07:44.790
> 
> 标签：javascript, windows-8, windows-runtime, webcam, resolution

我正在使用 JavaScript 进行 Windows 8 Metro App 开发；但是，C# 并非不可能。我正在尝试找到一种方法来指定我的网络摄像头可以支持照片拍摄的最高分辨率。到目前为止，我一直在使用[MediaCapture](http://msdn.microsoft.com/library/windows/apps/BR241124)类，这样我就可以预览并捕捉图像。我注意到 CaptureUI 支持[MaxPhotoResolution](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureuimaxphotoresolution)选项。但是，我希望这是自动的，不需要用户交互。我的想法不多了。这是针对信息亭应用程序的，因此欢迎使用变通方法，因为我可以完全控制设备。有什么想法或建议吗？

对于测试，我使用的是 LifeCam Studio。相机应用程序拍摄 1920x1080，而我的应用程序拍摄 640x480 的照片。此外，驱动程序附带的软件可以完美运行！这是我无法控制的吗？

**更新**

我一直在研究设置特定的相机设置；[这](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/80fe32ac-46de-4231-8259-e2cc4e02168e)突然出现了；但是，到目前为止，我还没有运气......

**9月18日更新**

我一直在挖掘并想出了[这个](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/751b8d83-e646-4ce9-b019-f3c8599e18e0)。返回分辨率属性；但是，setMediaStreamPropertiesAsync 方法无效！我的想法不多了。

**12月13日更新**

我决定最后一次尝试，并使用 18 日描述的一些方法，它通过 JavaScript 和 Lifecam Studio 在官方 Windows 8 版本上运行。至于为什么，我不知道。这是我使用的代码：

```
//media=MediaCapture object
function setBestResolution(media) {
    //Gets collection of objects each describing the resolution, etc.
    var resolutions = media.videoDeviceController.getAvailableMediaStreamProperties(Windows.Media.Capture.MediaStreamType.photo);
    var numResolutions=resolutions.length;

    for (var r = 0; r<resolutions;r++){
        var res = resolutions[r];
        //.width and .height are props. Debug to see all.
    }

    //I chose 40 as best option; however, programmatically you can choose any. I have dedicated kiosk app and same webcam and therefore don't need to.
    media.videoDeviceController.setMediaStreamPropertiesAsync(Windows.Media.Capture.MediaStreamType.photo, resolutions[40]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:04:36.760

我有点不清楚你想做什么。您想捕捉特定的照片分辨率还是想以特定的纵横比捕捉问题？

使用 CameraCaptureUI 时，您可以使用 PhotoSettings 属性设置捕获照片的条件：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.photosettings.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.photosettings.aspx)

例如，您可以设置**CroppedAspectRatio**以确保图像始终为 4:3 或 16:9。您还可以设置**MaxResolution**属性来限制拍摄照片时的像素尺寸。

仅当您希望将自定义捕获体验作为应用程序的一部分而不是使用系统对话框时，才需要**MediaCapture类。**MediCapture 的默认初始化以最高分辨率初始化设备（我相信，虽然我没有测试过）。可以覆盖您希望 MediaCapture 捕获的分辨率，但您仅限于设备支持的分辨率。您可以列举设备支持的分辨率，您链接到的论坛帖子显示如何：

[http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/751b8d83-e646-4ce9-b019-f3c8599e18e0](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/751b8d83-e646-4ce9-b019-f3c8599e18e0)

当然，您的设备支持的分辨率可能不是您真正想要保持的分辨率或纵横比。因此，您最终可能不得不向用户展示裁剪照片的能力，并且最终可能不得不进一步调整图像大小。这将需要您需要构建的额外代码和额外的 UI 部分。如果您有代码允许用户裁剪，并且如果您有代码将图像大小（或下采样）调整为您想要的确切分辨率，那么实际上不需要更改 MediaCapture 设备初始化的分辨率。

一种策略是在**ApplicationData.Current.TemporaryFolder**中创建一个临时文件并在该临时文件上调用**MediaCapture.CapturePhotoToStreamAsync**。然后在您自己的 UI 中显示该文件以允许裁剪并最终将其大小调整为您想要的分辨率，然后再将最终图像保存到真正的目标文件夹。

尽管您必须创建自己的 UI 以允许用户选择他们想要保留的图像区域，但 CodePlex 上的 WriteableBitmapEx 项目可能会证明对实际裁剪和调整大小非常有帮助：

[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

# c++ - 为什么类类型的静态和全局变量很危险？

> ID：12452707
> 
> 赞同：1
> 
> 时间：2012-09-17T03:07:51.840
> 
> 标签：c++, c++11, global-variables

[http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Static_and_Global_Variables](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Static_and_Global_Variables)

> 类类型的静态或全局变量是被禁止的：由于构造和销毁的不确定顺序，它们会导致难以发现的错误。

如果类类型的全局变量不依赖于其他全局变量，例如`std::string strvar("abc")`，那么使用它有什么问题/不安全？

该指南还说：

> ...除了禁止类类型的全局变量外，我们不允许使用函数的结果来初始化静态 POD 变量，除非该函数（例如 getenv() 或 getpid()）本身不依赖于任何其他全局变量。

我认为`strvar`出于同样的原因很好：它的构造函数本身不依赖于任何其他全局变量。

另外我想知道 C++11 对 POD 的更宽松的定义在这方面是否有任何反映？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:15:51.583

谷歌显然试图保持规则简单。因此，虽然在某些情况下它可能非常安全，但描述这些例外情况会很困难。允许这些例外的好处可能不足以保证这种额外的复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:03:15.247

类的全局和静态实例的问题在于它们的构造/销毁顺序取决于实现。这意味着，如果您的代码依赖于它们在某个时间出现，您很可能会得到一个不受欢迎的惊喜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:12:37.330

许多类的实现，尤其是 Google 标准库中的类，依赖于在程序开始时初始化的全局状态。类构造函数可以打开网络连接或以不明显引用其他全局变量的方式获取单例。

一般来说，构造函数应该可以自由地假设它们声明的全局变量已经被初始化，如果它们碰巧在链接器初始化的对象上被静态调用，这就会中断。

# c# - Openxml - 锁定所有内容控件

> ID：12452718
> 
> 赞同：2
> 
> 时间：2012-09-17T03:10:15.443
> 
> 标签：c#, .net, openxml

我想以编程方式锁定所有内容控件，以便用户无法删除它们。

我正在使用以下代码，但我的问题是在某些情况下我`null`在调用`elem.SdtProperties.ChildElements.First<WP.Lock>()`.

有人可以帮我完成下面提到的代码吗？

```
static void MakeContentControlsNonDeletable()
        {
            using (P.WordprocessingDocument wordDoc =
              P.WordprocessingDocument.Open(@"c:\XYZ.docx", true))
            {
                IEnumerable<WP.SdtElement> elements =
                  wordDoc.MainDocumentPart.Document.Descendants<WP.SdtElement>();

                foreach (WP.SdtElement elem in elements)
                {
                    if (elem.SdtProperties != null)
                    {
                        WP.Lock l = elem.SdtProperties.ChildElements.First<WP.Lock>();

                        if (l == null)
                        {
                            //Please help here
                            //Please help here
                            //Please help here
                            //Please help here
                        }

                        if (l.Val != WP.LockingValues.SdtContentLocked && l.Val != WP.LockingValues.SdtLocked)
                        {
                            Console.WriteLine("Unlock content element...");
                            l.Val = WP.LockingValues.SdtLocked;
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T15:57:52.603

看来你的代码很好。在另一个有某个对象并且它返回 null 的情况下，我之前也遇到过同样的问题。那时我不知道 openxml sdk 有什么问题，但我可以告诉你我是如何解决我的问题的。

问题基本上是，在结构深处的某些点上，您知道有一个元素应该被解释为 Lock 对象，但 sdk 只能将其视为 OpenXmlElement（而不是其子类 Lock 对象），这就是为什么当您这样做`First<WP.Lock>()`时期待一个 Lock 对象，你知道它在那里，但你只是得到空值。我所做的是将所有内容都视为 OpenXmlElement 并忘记强类型。

```
static void MakeContentControlsNonDeletable()
    {
        using (P.WordprocessingDocument wordDoc =
          P.WordprocessingDocument.Open(@"c:\XYZ.docx", true))
        {
            IEnumerable<OpenXmlElement> elements =
              wordDoc.MainDocumentPart.Document.Descendants<>(child => child.LocalName == "sdt");

            foreach (OpenXmlElement elem in elements)
            {
                if (elem.ChildElements.Any(child => child.LocalName == "sdtPr"))
                {
                    OpenXmlElement sdtPr = elem.ChildElements.FirstOrDefault(child => child.LocalName == "sdtPr");
                    OpenXmlElement l = sdtPr.ChildElements.FirstOrDefault(child => child.LocalName == "lock");

                    if (l == null) //At this point if you have your lock object this isn't null
                    {
                        //Please help here
                        //Please help here
                        //Please help here
                    }

                    OpenXmlAttribute valAttribute = l.GetAttribute("val", "http://schemas.openxmlformats.org/wordprocessingml/2006/main");
                    if (valAttribute != null) {
                         valAttribute = new OpenXmlAttribute();
                    }

                    if (valAttribute.Value != "sdtContentLocked" && valAttribute.Value != "sdtLocked")
                    {
                        Console.WriteLine("Unlock content element...");
                        valAttribute.Value = "sdtLocked";
                    }
                }
            }
        } 
```

我知道这不是它应该的方式，我知道所有对象都应该被强类型化到其各自的 openxml sdk 类，但这是经常发生的事情，这就是我这样做的原因。

希望能帮助到你

# logging - 主管空日志文件

> ID：12452723
> 
> 赞同：1
> 
> 时间：2012-09-17T03:10:46.683
> 
> 标签：logging, supervisord

我一直在搞乱主管日志文件的功能。程序写入标准输出：

```
ruby sample.rb
>>0.9668821900023237 [tps] 
>>61.91346356232367 [tps] 
>>Heartbeat....
>>58.84168122263758 [tps] 
>>Heartbeat.... 
```

当我从主管运行它时，我已经创建了日志文件，但`stdout_logfile`总是空的。当我把东西弄乱了`sample.rb`，所以我有任何异常，它被成功写入`stdout_logfile`由于`redirect_stderr`.

主管配置文件：

```
[program:sample]
priority=50
command=/usr/bin/ruby sample.rb
numprocs=1
directory=/home/myapp/myapp
autorestart=true
autostart=true
startsecs=10
stopwaitsecs=90
redirect_stderr=true
stdout_logfile=/var/log/sample.out.log
user=myapp 
```

为什么我看不到输出`stdout_logfile`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:54:40.507

`flush`只需调用标准输出即可解决此问题。

```
puts "hello world"
$stdout.flush 
```

相关： [在 Ruby 脚本中重定向标准输出的问题](https://stackoverflow.com/questions/6700726/problem-redirecting-stdout-in-ruby-script)

# sql-server - 在 SSIS 中使用小数字段

> ID：12452727
> 
> 赞同：3
> 
> 时间：2012-09-17T03:11:19.643
> 
> 标签：sql-server, sql-server-2008, ssis

我正在使用带有 SP2 的 SQL Server 2008。

我有一个传入的 decimal(9,2) 字段通过我的**OLE DB 转换**传入我的**记录集目标转换**。而且我看到，当我单击目标转换的输入和输出属性选项卡时，出于某种原因，它将此特定字段显示为类型 DT_NUMERIC。就好像它把它当作小数以外的东西来读？我不知道..我不是 SSIS 大师。

所以继续......我遇到的问题从我试图将值填充到这个十进制字段的变量中开始。在**foreach 循环**中，我有一个**变量**来表示这个十进制字段，所以我可以使用它。

我认为众所周知的第一个问题是*SSIS 变量没有小数类型*。从我自己的测试和我在那里读到的内容来看，人们正在使用类型**对象**作为变量来使 SSIS 对十进制值“满意”？这让我很开心。

但是，然后在我的 foreach 循环中，我有**一个 for 循环**。在里面我使用了一个 E* *xecute SQL Task transformation* *. 在其中，我需要**创建一个**到我的**变量**的参数映射，以便我可以在此处的 T-SQL 调用中使用该十进制字段。所以现在我看到参数的类型小数并使用它并将其设置为指向我的变量。

*当我运行 SSIS 并遇到我的 SQL 调用时，我会在输出窗口中看到它。*：

```
 The type is not supported.DBTYPE_DECIMAL 
```

所以我在这里碰壁。我想做的就是使用小数！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:43:53.350

我会尝试在数据流任务中将值转换为 double 或 varchar 而不是对象。请注意，您可能必须在执行 sql 任务中使用 cast 或 convert 语句才能在您的事务处理 sql 语句中将类型更改回十进制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T01:15:54.527

我遇到过类似的问题，对于我的解决方案，我使用了十进制到 Int 转换器。

# php - 操作接收对象 Zend Soap Server

> ID：12452735
> 
> 赞同：1
> 
> 时间：2012-09-17T03:12:43.877
> 
> 标签：php, soap, soap-client, zend-soap

我正在创建一个 Web 服务，我添加了一个接收对象但我的肥皂客户端无法识别其属性的操作

```
<?php
class Application_Model_Contact {

    private $id;
    private $name;
    private $phone;

    /**
     * 
     * @param String $nome
     * @param String $phone
     */
    public function __construct($nome = null, $phone = null) {
    ....    
    }

} 
```

...

```
class Application_Model_WebServices
{    
    /**
     * 
     * @param Application_Model_Contact $contact
     * @return boolean
     */
    public function adicionar(Application_Model_Contact $contact){
        return true;
    }

} 
```

……

```
if (isset($_GET['wsdl'])) {
    $autodiscover = new Zend_Soap_AutoDiscover();
    $autodiscover->setClass('Application_Model_WebServices');
    $autodiscover->handle();
} else {
    $server = new Zend_Soap_Server();
    $server->setOptions(array(
        'soap_version' => SOAP_1_2,
        'actor' => 'http://localhost/AgendaTelefonicaPHPSOAP/public/webservice.php',
        'encoding' => 'UTF-8'
    ));
    $server->setWsdl('http://localhost/AgendaTelefonicaPHPSOAP/public/webservice.php?wsdl');
    $server->setClass('Application_Model_WebServices');
    $server->handle();
} 
```

使用soapUI，我得到以下xml来添加这个对象

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://localhost/AgendaTelefonicaPHPSOAP/public/webservice.php">
   <soapenv:Header/>
   <soapenv:Body>
      <web:adicionar soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <contact xsi:type="web:Application_Model_Contact"/>
      </web:adicionar>
   </soapenv:Body>
</soapenv:Envelope> 
```

为什么我的类属性没有被识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:05:32.583

为了`Zend_Soap_Autodiscover`向 WSDL 添加复杂类型，它需要能够使用反射查看属性，并且需要 docblocks 来告知它每个属性的类型。

因此，为了让您的 WSDL 包含这些复杂类型，从而允许您的客户端在 SOAP 请求中传递这些类型，您需要`Applicaton_Model_Contact`按如下方式调整类：

```
class Application_Model_Contact {

    /** @var string */
    public $id;
    /** @var string */
    public $name;
    /** @var string */
    public $phone;

    /**
     * 
     * @param String $nome
     * @param String $phone
     */
    public function __construct($nome = null, $phone = null) {
    ....    
    }

} 
```

我在修改前后运行了您的代码，可以确认修改后联系人记录的属性已成功传递到`adicionar()`方法中。

# c - 如何拦截对文件系统的调用

> ID：12452736
> 
> 赞同：5
> 
> 时间：2012-09-17T03:12:46.350
> 
> 标签：c, linux, operating-system

我有兴趣拦截与文件系统相关的所有系统调用，而是让我自己的代码运行。例如，调用 creat、write、close、lseek、getcwd 等。我的目标是创建一个类似 execve 的函数，该函数将所有文件 I/O 从生成的程序捕获到由调用进程管理的内存文件系统中。这样，调用程序就可以在没有文件系统开销的情况下检查输出。

我的用例是使用没有 API 或库的大型数值模拟程序。这些程序仅通过输入和输出文件进行通信。如果这些文件很大，它可能会占用运行时的大部分时间来执行 I/O。在某些具有超级用户权限的计算机上，可以设置位于 RAM 中的文件系统（例如 Linux 上的 tmpfs），但如果没有超级用户权限，或者以某种方式配置的机器，这是不可能的.

我知道使用 LD_PRELOAD 可以调用自定义代码而不是 libc 中的函数。但是，这只适用于动态链接的程序，它不能回答如何在调用程序（我想托管内存文件系统）和被调用者之间执行 IPC 的问题。这种方法的问题是如何最好地执行 IPC。我应该使用管道、unix 域套接字还是一些共享内存？

我还将 ptrace 视为拦截系统调用的一种方式。这似乎可行，但我对这种方法有两个问题。首先，如何防止发生实际的系统调用（而不是像我在一些示例中看到的那样仅修改系统调用的参数）。第二，ptrace是否允许高性能读取被调用者的内存空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:18:20.710

使用`LD_PRELOAD`，您可以让您的拦截代码在被调用方的内存空间中运行。使用库构造函数 ( `__attribute__((constructor))`)，您可以让您选择的代码在库首次启动时运行，例如`mmap`创建您的虚拟文件系统并对其进行初始化。

然后，当您使用预加载的库拦截调用时，库的函数正在目标进程中运行，可以访问构建的文件系统——无需 IPC。

如果调用进程必须管理文件系统，则与它通信会产生开销。我建议在子进程中映射文件系统的重要部分（可能作为共享内存区域），而不是在子进程中使用侦听器来监视来自父进程的文件系统更改（在文件系统操作周围进行适当的锁定）。由于带宽要求较低，您可以使用简单的管道进行更改通知。

还可以查看[Plash](http://plash.beasts.org/contents.html)，这是一个半虚拟化系统，它通过提供修改后的 Glibc 来沙盒文件系统访问。

# c++ - 如何获得队列的最小值和最大值？

> ID：12452737
> 
> 赞同：3
> 
> 时间：2012-09-17T03:12:54.533
> 
> 标签：c++, data-structures, stl, queue

你能设计一个数据结构，就像一个包含'enqueue'、'dequeue'、'minimum'和'maximum'的队列吗？我知道一种使用 2 个堆栈创建队列以分别找到最小值和最大值的方法，但是我怎样才能同时获得两者？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:15:05.180

使用标准容器，像 a 这样的完全有序的数据结构[`std::set`](http://en.cppreference.com/w/cpp/container/set)将提供对两个极值的访问，例如使用[`*s.begin()`](http://en.cppreference.com/w/cpp/container/set/begin)and [`*s.rbegin()`](http://en.cppreference.com/w/cpp/container/set/rbegin)。如果您有多个具有相同优先级的对象，您可能希望以任意方式打破关系，或者使用 a[`std::multiset`](http://en.cppreference.com/w/cpp/container/multiset)代替。

大多数实现可能会使用某种形式的[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)来实现这样的集合。由于数据结构将始终保持排序，[渐近性能](http://en.wikipedia.org/wiki/Big_O_notation)可能比常规单端基于[堆的](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)给您的性能更差，但对于许多应用程序来说，差异并不重要，因此实现的工作量应避免使用自定义数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:36:21.820

使用优先队列！

C++ STL

```
#include<queue> 
```

通常，优先级队列是由 Binary-Heap 实现的。但它不能同时保持最大值和最小值。@_@

也许平衡搜索树，例如 AVL、Splay 或红黑树应该是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T14:55:38.050

通常使用某种[堆结构来实现](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)。有一种称为[min-max 堆](http://en.wikipedia.org/wiki/Min-max_heap)的变体，它允许对最大和最小元素进行恒定时间访问。已经有[一个问题](https://stackoverflow.com/questions/4077101/minmax-heap-algorithm-implementation)要求 C++ 实现这种最小-最大堆。它的答案也应该对你有用。

*[Paul Dixon的](https://stackoverflow.com/users/48206/paul-dixon)[这篇评论](https://stackoverflow.com/questions/12452737/how-to-get-the-minimum-and-maximum-of-a-queue#comment16747008_12452795)首先提到了 min-max heaps，而Chris [Mansley的](https://stackoverflow.com/users/1080745/chris-mansley)[这篇评论](https://stackoverflow.com/questions/12452737/how-to-get-the-minimum-and-maximum-of-a-queue#comment16747235_12452737)指出了 Stack Overflow 上的实现问题。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T03:21:32.137

数据结构是一种众所周知的结构，称为优先级队列。队列中的每个元素都有一个关联的优先级，并且队列保持从高到低的排序顺序。

队列中的每个元素都必须携带一个优先级，并且代码必须维护订单合约。

一些 STL 包含优先级队列实现，但现在我看它，我不确定整个队列是否保持优先级顺序。

# php - 用户通过 $_POST 方法使用登录凭据（密码和用户名）提交表单后如何设置 cookie？

> ID：12452738
> 
> 赞同：1
> 
> 时间：2012-09-17T03:13:03.580
> 
> 标签：php, html

假设用户输入他/她的用户名和密码并单击提交按钮，该按钮使用表单上的 $_POST 方法。要成功登录，显然用户名和密码必须与我的 mysql 数据库中的内容匹配，这是通过一系列“if”语句完成的。如果凭据错误，表单和“if”语句必须位于 html 标记内以显示正确的错误消息。在用户名和密码成功满足位于 html 标记内的所有“if”语句后，我显然想设置一个 cookie。但是，我无法在 html 标记中设置 cookie。

```
/*setcook() function can ONLY be placed HERE before the <html> tags, but that does not work with my php code*/
<html>
<head><title></title><body>

<?php
if (isset($_POST['username']) OR isset($_POST['password']))
{ 
/*bunch of "if" statements go here to confirm the credentials are correct and match what's in the database. if the username and password are correct, all of the "if" statements here are passed, and then i WANT to set a cookie HERE so the user is logged in but i can't*/
}

else echo <<<_END
<form action="login.php" method="post">
Username: <input type="text" name="username"/>
Password: <input type="password" name="password" />
<input type="submit" value="Submit" />"; //this is the form that the user fills out and submits
</form>
_END;
?>

</body>
</html> 
```

但是，setcookie() 函数仅在 html 标记之前有效。在位于 html 标记内的 PHP 代码中验证所有用户名和密码凭据后，如何设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:14:32.500

您不应该将这样的逻辑与您的 HTML 混在一起。在发送任何输出之前，将所有 PHP 用于验证凭据。然后，您可以设置任何您想要的 cookie。

稍后无法设置 cookie 的原因是 cookie 被设置为标头的一部分，这些标头在输出开始时已完成发送。您可以通过启用输出缓冲来解决这个问题......但不要这样做。这是不好的做法，并不总是在其他服务器上启用，并且有可能减慢速度。

我还建议使用 PHP 会话。如果你这样做了，你可以在任何你想要的地方设置数据，因为数据存储在服务器端。您只需要确保立即开始会话，以便设置 cookie 并且会话数据可用于您的应用程序。

# vim - gvim 更改文件字符 utf-8，但其他编辑器显示 ansi

> ID：12452740
> 
> 赞同：1
> 
> 时间：2012-09-17T03:13:13.710
> 
> 标签：vim, character, editplus

系统是Win7

我的 vimrc：

```
set encoding=utf-8
set ffs=unix,dos,mac 
set fencs=utf-8,ucs-bom,euc-jp,gb18030,gbk,gb2312,cp936 
set fenc=utf-8 
```

用 gvim 保存文件后，我在 editplus 中打开文件：

![在此处输入图像描述](../Images/162dd0feb889bb0dd561d11014bbc269.png)

PS：editplus的默认字符设置是ANSI。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:30:35.147

UTF-8 编码的美妙之处在于，只要文本是纯 7 位 ASCII（即只有普通的英文字符），它就与 ANSI/ASCII 没有区别。因此，其他编辑器将文件显示为 ANSI 可能没问题。

当您插入非 ASCII 字符时（例如 A UMLAUT = Ä；您可以在 Vim 中将其作为二合字母输入，按`Ctrl`+ `K`，然后按`A` `:`），但其他编辑器应该正确检测 UTF-8（或者它们可能会显示两部分取而代之的是垃圾）。

如果这是另一种 Unicode 编码，您可以通过插入*字节顺序标记*（`:setlocal bomb`在 Vim 中）来帮助其他编辑器，但对于 UTF-8，没有高/低字节排序问题，并且很少使用 BOM（和一些应用程序不能很好地应对它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:21:07.843

Vim 必须在其中添加一些特殊字符或更改某些内容。您可以将文件复制到其他地方然后将其保存在 gvim 中，并在[http://www.diffchecker.com/](http://www.diffchecker.com/)或类似的网站上附加原始版本和 gvim 保存的版本吗？这应该可以准确地告诉您 gvim 对其进行了哪些修改。

# centos - unixODBC 和 FreeTDS 配置问题

> ID：12452747
> 
> 赞同：1
> 
> 时间：2012-09-17T03:13:57.633
> 
> 标签：centos, freetds, unixodbc

我一直在研究这个太久了，似乎无法弄清楚。我确定我的 freetds.conf、odbc.ini 或 odbcinst.ini 有问题。我可以使用 tsql 连接到我的 mssql 2008 服务器，但仍然不能使用 isql 或当然通过 php。

我在 CentOS 5.6 上。

任何人都可以提供一些帮助吗？

谢谢！肖恩

这是在我的 sqltrace.log 中：

```
 [ODBC][12249][1347850711.939084][__handles.c][459]
    Exit:[SQL_SUCCESS]
    Environment = 0x1b5fc6c0
    [ODBC][12249][1347850711.939149][SQLAllocHandle.c][375]
    Entry:
        Handle Type = 2
            Input Handle = 0x1b5fc6c0
[ODBC][12249][1347850711.939187][SQLAllocHandle.c][493]
        Exit:[SQL_SUCCESS]
            Output Handle = 0x1b5fcff0
[ODBC][12249][1347850711.939231][SQLConnect.c][3654]
        Entry:
            Connection = 0x1b5fcff0
            Server Name = [MSSQL_DSN][length = 9 (SQL_NTS)]
            User Name = [InetIndyArtsRemote][length = 18 (SQL_NTS)]
            Authentication = [**********][length = 10 (SQL_NTS)]
        UNICODE Using encoding ASCII 'ISO8859-1' and UNICODE 'UCS-2LE'

        DIAG [01000] [FreeTDS][SQL Server]Unexpected EOF from the server

        DIAG [01000] [FreeTDS][SQL Server]Adaptive Server connection failed

        DIAG [S1000] [FreeTDS][SQL Server]Unable to connect to data source

[ODBC][12249][1347850711.949640][SQLConnect.c][4021]
        Exit:[SQL_ERROR]
[ODBC][12249][1347850711.949694][SQLFreeHandle.c][286]
        Entry:
            Handle Type = 2
            Input Handle = 0x1b5fcff0
[ODBC][12249][1347850711.949735][SQLFreeHandle.c][337]
        Exit:[SQL_SUCCESS]
[ODBC][12249][1347850711.949773][SQLFreeHandle.c][219]
        Entry:
            Handle Type = 1
            Input Handle = 0x1b5fc6c0 
```

freetds.conf：

```
 #   $Id: freetds.conf,v 1.12 2007/12/25 06:02:36 jklowden Exp $
    #
    # This file is installed by FreeTDS if no file by the same
    # name is found in the installation directory.
    #
    # For information about the layout of this file and its settings,
    # see the freetds.conf manpage "man freetds.conf".

    # Global settings are overridden by those in a database
    # server specific section
    [global]
            # TDS protocol version
            tds version = 8.0

            # Whether to write a TDSDUMP file for diagnostic purposes
            # (setting this to /tmp is insecure on a multi-user system)
            dump file = /tmp/freetds.log
            debug flags = 0xffff
            dump file append = yes

            # Command and connection timeouts
    ;       timeout = 10
    ;       connect timeout = 10

            # If you get out-of-memory errors, it may mean that your client
            # is trying to allocate a huge buffer for a TEXT field.
            # Try setting 'text size' to a more reasonable limit
            text size = 64512

[IndyArtsDB]
        host = xxx.xx.xxx.xx
        port = 1433
        tds version = 8.0
        client charset = UTF-8 
```

ODBC.INI

```
[MSSQL_DSN]
Driver=FreeTDS
Description=IndyArts DB on Rackspace
Trace=No
Server=xxx.xx.xxx.xx
Port=1433
Database=DBName 
```

ODCBINST.INI

```
[ODBC]
DEBUG=1
TraceFile=/home/ftp/sqltrace.log
Trace=Yes

[FreeTDS]
Description=MSSQL Driver
Driver=/usr/local/lib/libtdsodbc.so
UsageCount=1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T14:04:39.873

查看您的 sqltrace.log 它在我看来就像一个身份验证错误 - 您在身份验证后立即收到“来自服务器的意外 EOF”消息...

远程服务器是否有可能完全或在端口 1433 上阻止来自您的 CentOS 服务器的连接？freetds.conf 中的“client charset = UTF-8”是否有可能导致问题？

这是我在 Ubuntu 12.04（Precise Pangolin）机器上的（工作）设置。

这是我的 /etc/odbc.ini 文件：

```
[xyz]
Description             = XYZ Server
Driver                  = freetds
Database                = MyDB
ServerName              = xyz
TDS_Version             = 8.0 
```

还有我的 /etc/odbcinst.ini 文件：

```
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1 
```

最后是我的 /etc/freetds/freetds.conf 文件：

```
[global]
        # TDS protocol version
;       tds version = 4.2

        # Whether to write a TDSDUMP file for diagnostic purposes
        # (setting this to /tmp is insecure on a multi-user system)
;       dump file = /tmp/freetds.log
;       debug flags = 0xffff

        # Command and connection timeouts
;       timeout = 10
;       connect timeout = 10

        # If you get out-of-memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.  
        # Try setting 'text size' to a more reasonable limit 
        text size = 64512

# A typical Sybase server
[egServer50]
        host = symachine.domain.com
        port = 5000
        tds version = 5.0

# A typical Microsoft server
[egServer70]
        host = ntmachine.domain.com
        port = 1433
        tds version = 7.0

# The XYZ database
[xyz]
        host = XYZ
        port = 1433
        tds version = 8.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T08:34:32.903

看起来 FreeTDS 中的版本号已从 8.0 更改为 7.1 和 9.0 更改为 7.2。见[http://www.freetds.org/userguide/choosingtdsprotocol.htm](http://www.freetds.org/userguide/choosingtdsprotocol.htm)

# c# - winform主机渲染问题

> ID：12452748
> 
> 赞同：1
> 
> 时间：2012-09-17T03:13:59.420
> 
> 标签：c#, wpf, winforms, rendering, winforms-interop

我的应用程序中有一个用于托管 datagridview 的 winform 主机。一切正常，但是当数据加载到 datagridview 中时，窗口的不透明度会发生变化，直到我物理移动窗口它才会消失。你能告诉我我应该如何解决它吗？谢谢，

示例代码：

```
 windowsFormsHost1.Child = _MyDataGrid;
            windowsFormsHost1.InvalidateVisual();
            windowsFormsHost1.InvalidateArrange();
            this.Height = 450;
            windowsFormsHost1.Visibility = System.Windows.Visibility.Visible;
            windowsFormsHost1.UpdateLayout(); 
```

![窗口渲染不透明度的图片](../Images/3789765a1cdca4816e7a1dd48f56ba2d.png)

# scheme - SICP 5.2 汇编器

> ID：12452752
> 
> 赞同：2
> 
> 时间：2012-09-17T03:14:37.360
> 
> 标签：scheme, sicp

我一直在阅读 sicp 的第 5 章，并被困在一段代码上——即 5.2 中提供的汇编程序。这是它的样子：

```
(define (extract-labels text receive)
    (if (null? text) 
        (receive '() '())
        (extract-labels (cdr text)
        (lambda (insts labels)
            (let ((next-inst (car text)))
                (if (symbol? next-inst)
                    (receive insts
                             (cons (make-label-entry next-inst insts)
                                   labels))
                     (receive (cons (make-instruction next-inst) insts)
                              lables))))))) 
```

不是只有当文本为空时才会调用 lambda 吗？那么我们如何才能要求'文本'的汽车呢？

*编辑*

感谢您的回答，但我仍然没有看到它。如果文本不为空，提取标签不会递归调用自身，直到文本为空？这种情况下怎么叫车呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:30:08.463

lambda 获得适当的范围：在定义 lambda 时`text`不为空，因此调用`car text`工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:30:40.403

`if`最多需要三个参数：一个条件、一个`if-true`(then) 表达式和一个`if-false`(else) 表达式。缩进很奇怪，所以看起来不对。

它应该显示为

```
(define (extract-labels text receive)
    (if (null? text) 
        (receive '() '())
        (extract-labels (cdr text)
            (lambda (insts labels)
                (let ((next-inst (car text)))
                    (if (symbol? next-inst)
                        (receive insts
                                 (cons (make-label-entry next-inst insts)
                                       labels))
                        (receive (cons (make-instruction next-inst) insts)
                                  labels))))))) 
```

观察表达式的结果是`(receive '() '())`if`text`为 null，`(extract-labels ...)`否则为 null。

# extjs4 - Store.reload() -> 如何在 ExtJs4 中通过 lastParam 进行查询

> ID：12452757
> 
> 赞同：0
> 
> 时间：2012-09-17T03:15:39.303
> 
> 标签：extjs4, store

我有一个网格。获取数据代码代码：

```
var myParam = {
   typeId : 1,
   xxxx : 'xxxx' //some else 
}
grid.store.load(myParam); 
```

什么时候做一些事情，比如时间更新代码：

```
grid.store.reload(); 
```

但是这个丢失的参数。

在 ExtJs3 中有一个 LastParam 的配置。如何在 Extjs4 中做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:54:22.580

使用代理的 extraParams 配置。

```
grid.store.getProxy().extraParams = myParam;
grid.store.load();
grid.store.reload(); 
```

这样，参数将被发送，直到您再次使用代码修改额外的参数。

# javascript - 如何使用 JSON 对用户定义的类进行字符串化/解析

> ID：12452758
> 
> 赞同：0
> 
> 时间：2012-09-17T03:15:50.720
> 
> 标签：javascript, jquery, json

> **可能的重复：**
> [在 JavaScript 中将 JSON 字符串解析为特定的对象原型](https://stackoverflow.com/questions/5873624/parse-json-string-into-a-particular-object-prototype-in-javascript)

所以我定义了一个类

```
function ThisClass (a,b,c) {
    this.a = a;
    this.b = b;
    this.c = c;
}
ThisClass.prototype.a_method = function(param) {
    //stuff
}

var instance = new MyClass(a,b,c);
var stringified = JSON.stringify(instance);
var parsed = JSON.parse(stringified); 
```

当我将其字符串化并将其存储在数据库中时，一切都很酷。但是，当我在检索后解析它时，它会丢失其类类型，因此在 chrome 的检查工具中解析后查看它时，该对象仅显示为常规对象，`instance: Object`而不是`instance: MyClass`.

因此，新解析的变量`parsed`在实例化时没有任何与之关联的原型方法。任何知道如何做到这一点，或者如果我做错了？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-17T03:17:43.747

您不能，JSON 仅用于序列化非循环数据对象变量。

这是有关更多详细信息的[规范](http://www.json.org/)。

# c++ - 多态对象销毁和并发

> ID：12452759
> 
> 赞同：0
> 
> 时间：2012-09-17T03:15:52.500
> 
> 标签：c++, multithreading, c++11, parallel-processing, delete-operator

我有一个多态对象`o`和两个线程`T1`和`T2`.

的最派生类的析构函数在返回之前`o`等待终止。`T2`

在调用某些虚函数时让`T1`delete是否安全？（我的意思是不使用互斥或​​任何其他类型的同步机制）`o``T2``o`

* * *

我相信它应该是安全的，除非在调用的第一个析构函数完成之前`delete`允许修改`o`（比如它指向 vtable 的指针）。是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:59:55.527

首先，如果你能避免这种情况，它很脆弱并且容易出错。你可以让它工作，但代码中的小改动可能会破坏它。

如果完整对象析构函数中的块唯一要做的就是等待另一个线程的完成，并假设基础对象具有虚拟析构函数或完整对象被直接销毁，*那么*这样做是*安全*的。在析构函数的主体完成之前，对象的任何成员都不会被销毁，基础也不会被销毁。这意味着其他线程正在使用的任何子对象都不会在它完成之前被销毁（并让第一个线程完成析构函数的主体）。

话虽如此，再次尝试重新设计代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:21:57.760

想象一下您的类有一些动态分配的成员的场景，
`T1`析构函数可能会在`T2`仍在访问这些成员的同时释放这些成员。
这将导致未定义的行为。

只要你能确保`T1`' 的析构函数和`T2`' 的函数不在同一个成员上运行，你是安全的，但如果你不能确保它，那么你肯定需要一些同步。

请注意，基本逻辑保持不变，没有两个线程可以在同一个实体上同时读取和写入，否则您最终会遇到竞争条件和同步问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:36:41.047

如前所述，这是有风险的，但您可以采取一些措施来降低风险。线程同步的责任应该是最派生类的单一责任。特别是，这个最派生的类不应该有除析构函数之外的任何虚函数。

这种设计意味着 T2 不能调用最派生类中的任何函数。充其量它可以依赖于基类的成员`o`，并且这些成员在最派生的 dtor 返回之前都是有效的——这将在 T2 退出之后。这意味着以下序列不会重新排序，除了可能的步骤 2 和 3（无害）

1.  `T2`可以访问的基类方法`o`
2.  在线程中，输入`T1`dtor 的`o`
3.  线程`T2`退出。
4.  在线程中，返回`T1`的 dtor`o`
5.  `o`不能再调用基类方法。

# c++ - 使用 GNU G++ 编译器的 char* 常量值 ERROR

> ID：12452765
> 
> 赞同：0
> 
> 时间：2012-09-17T03:17:22.950
> 
> 标签：c++

我写了几个文件，关系如下：

档案啊：

```
#ifndef MACRO_HEADER
#define MACRO_HEADER
const char* CONST_CHAR_NAME = "name";
#endif 
```

file Bh(B.cpp) 和 file Ch(C.cpp) 也包含这个通用类型定义头 Ah 当g++最终将obj文件合并到lib时，它给出了他重新定义的错误。我承认我犯了一个错误，我应将常量定义为：

```
const char* const CONST_CHAR_NAME = "name"; //This is OK 
```

但是为什么编译器会给我一个重新定义的错误呢？const char* 不是常量值吗？但我使用 typeid.name 来检查`const char *`and 的类型`cosnt char* const`。它们是相同的：**char const ***。我对错误感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:48:13.227

问题是您在多个地方定义了相同的变量名，即每个包含.h 的源文件。

`static`您可以通过使用关键字将每个定义声明为源文件的本地来消除链接器错误：

```
static const char* CONST_CHAR_NAME = "name"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:27:44.990

它给出了错误，因为在多个“翻译单元”`CONST_CHAR_NAME`中*定义*（翻译单元基本上是单个源文件和所有包含的头文件）。您必须*声明*它，`extern`然后在一个源文件中*定义*常量。

所以在头文件中：

```
extern const char* CONST_CHAR_NAME; 
```

在**一个**源文件中：

```
const char* CONST_CHAR_NAME = "name"; 
```

**编辑：**`const char*`和之间的区别`const char* const`

宣言

```
const char* CONST_CHAR_NAME; 
```

创建一个指向常量字符串的指针。你可以给它赋值，只要它指向一个常量字符串。即以下两行都可以：

```
CONST_CHAR_NAME = "foo";
CONST_CHAR_NAME = "bar"; 
```

另一方面，你有

```
const char* const CONST_CHAR_NAME; 
```

上面创建了一个指向常量字符串的常量指针。这意味着你不能再给指针赋值，所以上面的两个赋值*都不*行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T03:32:52.523

实际上，您应该将其声明为：

```
const char CONST_CHAR_NAME[] = "name"; 
```

# javascript - 我想匹配不以字母 [aoieu] 开头的单词，但正则表达式不起作用

> ID：12452771
> 
> 赞同：0
> 
> 时间：2012-09-17T03:17:55.800
> 
> 标签：javascript, regex

```
var  str = ")shenmajs-(shenmajsb)hghghg";
var reg = /\b[^aoieu][a-z]*\b/g;
str.match(reg);

//returns ["shenmajs", "shenmajsb", ")hghghg"] 
```

我想匹配不以字母 [aoieu] 开头的单词。返回数组的第一项是“shenmajs”，但第三项是“)hghghg”。我不明白为什么“）”可以包含该项目。你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:20:41.997

这是您在 regexr 上的案例的在线视图：http://gskinner.com/RegExr/? [325rr](http://gskinner.com/RegExr/?325rr)

包含“)”是因为正则表达式`[^aeiou]`表示*任何*不是 a、e、i、o 或 u 的字符。这包括“）”。

您的正则表达式的工作方式与`\b`解释锚的方式有关。从[这个页面](http://www.regular-expressions.info/wordboundaries.html)

> 有资格作为单词边界的三个不同位置：
> 
> 1.  在字符串中的第一个字符之前，如果第一个字符是一个单词字符。
>     
>     
> 2.  在字符串的最后一个字符之后，如果最后一个字符是单词字符。
>     
>     
> 3.  在字符串中的两个字符之间，其中一个是单词字符，另一个不是单词字符。

所以你的第一个`\b`匹配是在第一个 s 之前，*而不是*在最初的 ")" 之前（因为你没有按照规则 1 获得初始单词边界）。第一场比赛以破折号前的锚点结束。下一场比赛从 "(" 和 s 之间的锚点开始，因为你无法从破折号开始匹配！（试试看！）。你的第三场比赛现在将从 b 和 " 之间的锚点开始)”。由于*没有*“）” ，`[aeiou]`因此可以开始您的下一场比赛。而且它的效果也很好：紧随其后的是零个或多个带有结尾单词边界的 az！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:31:45.293

您的正则表达式正在选择`")hghghg"`，因为它以一个不是 a、o、i、e 或 u 的字符开头，然后是 0 个或多个字母。

尝试：

```
var reg = /\b[a-z-[aeiuo]][a-z]*\b/g; 
```

也就是说，所有单词都以非元音字母（a、e、i、o 或 u）开头，然后是 0 个或多个字母。

# c++ - 这是做什么的？C++

> ID：12452772
> 
> 赞同：0
> 
> 时间：2012-09-17T03:17:56.763
> 
> 标签：c++, function, declaration

> **可能重复：**
> [构造函数中这个奇怪的冒号成员语法是什么？](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)
> [C++ 初始化](https://stackoverflow.com/questions/9948283/c-initialization)

我刚刚收到一个 C++ 程序中的头文件，我无法弄清楚这行代码的作用：

```
Card(Value faceValue=deuce, Suit suit = clubs):
suit(suit), faceValue(faceValue) {} 
```

这是什么`:`意思，为什么用`;`（我认为我应该）替换它会破坏代码？

抱歉这个问题的笼统性，但有人可以解释这两行的目的吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:20:07.137

这看起来像类的构造函数`Card`。之后的部分`:`是初始化列表，初始化成员变量（或父类，但我认为这不适用于这种情况）的值。构造函数的主体是空的，因为它需要做的所有事情都在初始化列表中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T03:21:27.980

: 后面是初始化列表。使用它而不是在构造函数主体中分配成员变量的原因是，如果您在构造函数主体中执行此操作，则会首先调用默认构造函数，然后再调用复制构造函数或赋值运算符。通过使用初始化列表，您可以跳过第一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T03:19:51.630

初始化列表。这是在 C++ 中初始化类构造函数的首选方式。

使用它是因为它允许初始化`const`类的成员而不会出现编译错误。

# java - Android Java 将单维字节数组添加到双维字节数组

> ID：12452775
> 
> 赞同：0
> 
> 时间：2012-09-17T03:18:10.390
> 
> 标签：java

我需要将另一个字节数组（一维）附加到恰好是二维的现有字节数组中。

```
public static byte[][] ALL_MESSAGES = new byte[][] {SMART_POSTER_NO_TEXT, ENGLISH_PLAIN_TEXT, SMART_POSTER_URL_AND_TEXT};

public void AddOtherMessages()
{
    OtherMessageClass messages = new OtherMessageClass();

    for(NMessage m : messages.Ntexts)
    {
        ArrayUtil.addAll(ALL_MESSAGES, m);
    }

} 
```

显然，上面的代码不起作用，因为我正在使用 AddAll 将两个数组（一个是多维数组）添加到另一个数组，一个单维数组。我需要一些帮助，将**m**附加到 ALL_MESSAGES。

另外，我需要导入什么 Java 命名空间才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:41:30.090

如果我理解正确，你想添加额外的数组`ALL_MESSAGES`吗？在这种情况下，我认为您应该考虑使用列表：

```
List<byte[]> list = new ArrayList<byte[]>(); 
```

然后您可以添加任意数量的`byte[]`数组：

```
list.add(new byte[] {1,2,3}); //just an example 
```

您可以轻松地全部检索它们：

```
for(byte [] array : list)
{
    //do whatever you like with your individual arrays
} 
```

您还可以获得单个元素（就像使用索引运算符一样）：

```
byte [] array = list.get(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:33:10.223

ArrayUtil 是 'org.apache.commons.lang' 包的一部分。因此，您还必须包含相应的 jar 文件才能使用它。

> 您将需要 apache-commons-lang.jar，并且必须导入 org.apache.commons.lang.ArrayUtils。有关更多详细信息，请参阅[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)

```
 for(NMessage m : messages.Ntexts)
    {
        ArrayUtil.addAll(ALL_MESSAGES, m);
    } 
```

上面的代码将不起作用 m 不是字节 [] []。如果 m 是 byte[] 你应该使用 'add()' 方法。如果 messages.Ntexts 返回 byte[][] 你也可以使用 'addAll()' 方法。

# php - 如果控制器是小写的，则页面未找到错误，但如果 Zend Framework 应用程序中的首字母为大写，则可以使用

> ID：12452779
> 
> 赞同：0
> 
> 时间：2012-09-17T03:19:08.547
> 
> 标签：php, model-view-controller, zend-framework

这很奇怪，我已经为这个错误破解了一段时间。它似乎只显示在部署服务器上。我有一个完美工作的控制器，名为 holiday - 这是控制器的结构和视图：

```
controllers
-> HolidaysController.php

<?php

class HolidaysController extends App_Controller_Action {

  public function indexAction() {
.....
  }
}

?> 
```

我的意见文件在

```
views/scripts/holidays/index.phtml 
```

当我导航到`website.com/holidays`它时给我这个错误：

```
An error occurred
Page not found
Exception information:

Message: Action "index" does not exist and was not trapped in __call()
Stack trace:

#0 /home/bookitfa/bookings/library/Zend/Controller/Action.php(515): Zend_Controller_Action->__call('indexAction', Array)
#1 /home/bookitfa/bookings/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#2 /home/bookitfa/bookings/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#3 /home/bookitfa/bookings/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#4 /home/bookitfa/bookings/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#5 /home/bookitfa/bookings/public/index.php(29): Zend_Application->run()
#6 {main}  

Request Parameters:

array (
  'controller' => 'holidays',
  'action' => 'index',
  'module' => 'default',
) 
```

但是当我导航到`website.com/Holidays`它时，出于某种奇怪的原因。所有其他控制器都可以正常工作，除了这个特定的控制器似乎只有在控制器名称的第一个字母大写时才能工作。这是为什么？这是一个基于 zend 框架的应用程序。我所有的网址都会像这样不合适。编辑 =======

奇怪的是，无论我保留什么文件名，即 HolidaysController.php 或 holidayController.php - 在线我只能通过 /Holidays 而不是 /holidays 访问它，这是一个非常严重的问题，我已经用完了关于如何解决它的想法:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:41:29.463

Zend 中的类名区分大小写 - 在 Linux 上。

为什么？因为它只加载它需要的类文件，而且Linux上的文件名是区分大小写的。

您可能正在 Windows 上开发，它不区分大小写。当请求文件“holidaysController.php”时，窗口将返回 HolidaysController.php、holidayscontroller.php 或 HoliDaYsCoNtRoLlEr.php - 你明白了！它查找文件，然后仅加载该文件。

在 Linux（和 Mac）上，这 4 个文件名都是不同的。即使您根据文档命名了类（类的大写，动作的骆驼），您也需要使用相同的大小写调用路由器 - 否则将找不到并加载文件。

为什么会让人困惑：Zend 尝试将其规范化为小写，因此它首先查找“holidayController.php”（当您输入“Holiday”时）。混合大小写有点复杂：请参阅[此页面](http://framework.zend.com/manual/1.12/en/zend.controller.basics.html)上的黄色框：因此它未能找到规范化的，因此将其视为混合大小写，然后可以工作。当您输入“holiday”时，它无法找到该文件，但由于它没有被规范化或驼峰式，它不需要寻找任何其他文件。它只是失败了。

Your options: stay with "Holidays" as the route for that file, or rename the file as "holidayController.php" and you can run with Holiday or holiday. (Leave the class as HolidayController - that bit is not case sensitive).

# iphone - 使用 NSManagedObject 表达式初始化 __strong 的不兼容指针类型

> ID：12452793
> 
> 赞同：3
> 
> 时间：2012-09-17T03:21:29.523
> 
> 标签：iphone, core-data

所以当谈到核心数据时，我很菜鸟。我有两个 NSManagedObjects，Map 和 AddressAnnotation。在我的一个 ViewControllers 中，我这样做：

```
Map *aMap = (NSManagedObject *)[self.address map]; 
```

我得到了警告

```
Incompatible pointer types initializing 'Map *__strong' with an expression of 'NSManagedObject *' 
```

为什么我会收到此警告？谢谢！

编辑：地址属性的声明：@property (nonatomic, strong) AddressAnnotation *address;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T07:07:18.640

假设`Map`是 的子类`NSManagedObject`，您要求编译器隐式向下转换。（`NSManagedObject`到`Map`）。`Map`are的所有实例`NSManagedObject`，但反过来不一定是正确的...转换为`id`or `Map*`。

# javascript - 使用 window.history.replaceState() 有效删除页面历史

> ID：12452794
> 
> 赞同：0
> 
> 时间：2012-09-17T03:21:30.967
> 
> 标签：javascript, html

我有一个页面只能*在*另一个页面之后访问。比如说，在浏览网站时，您会访问**之前**>**之后**>**其他**页面。如果用户在浏览器中按下*Back*，他们将被带到**After**，这显然是不可取的。

我对解决方案的第一次尝试是操纵浏览器的历史记录。我知道我们不能删除历史记录中的页面，但我想如果我将**After**历史记录条目更改为**Before**，那就足够了。

```
window.history.replaceState({},'','before.php'); 
```

但它不起作用。相反，这样做：

遍历**Before** , **After** , **Other** ... 当我*回到*历史...

*   加载**后**（网址是**Before#**）
*   加载**后**（网址是**之前**）
*   **之前**加载

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:48:12.003

在您的 After 页面中，当转到 Other 时，使用`location.replace()`.

## 之后.html

`<a href="other.htm" onclick="location.replace(this.href);return false;">go</a>`**

# python - Python - 列表切片行为列表

> ID：12452800
> 
> 赞同：1
> 
> 时间：2012-09-17T03:22:25.623
> 
> 标签：python, list, list-comprehension

当我定义一个列表并尝试像这样更改单个项目时：

```
list_of_lists = [['a', 'a', 'a'], ['a', 'a', 'a'], ['a', 'a', 'a']]
list_of_lists[1][1] = 'b'
for row in list_of_lists:
    print row 
```

它按预期工作。但是当我尝试使用列表理解来创建列表时：

```
row = ['a' for range in xrange(3)]
list_of_lists = [row for range in xrange(3)]
list_of_lists[1][1] = 'b'
for row in list_of_lists:
    print row 
```

它会导致列表中的一整列项目被更改。为什么是这样？如何通过列表理解达到预期的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T03:35:23.707

想想如果你这样做：

```
>>> row = ['a' for range in xrange(3)]
>>> row2 = row
>>> row2[0] = 'b'
>>> row
['b', 'a', 'a'] 
```

发生这种情况是因为`row`and是*同一个列表*`row2`的两个不同名称（您有）-您的嵌套列表示例只会稍微掩盖这一点。*`row is row2`*

 *要使它们成为不同的列表，您可以使其每次重新运行列表创建代码，而不是进行变量赋值：

```
list_of_lists = [['a' for range in xrange(3)] for _ in xrange(3)] 
```

或者，每次使用完整旧列表的一部分创建一个新列表：

```
list_of_lists = [row[:] for range in xrange(3)] 
```

虽然这不能保证对所有序列都适用——只是列表切片会为切片创建一个新列表。这不会发生在例如 numpy 数组中——其中的切片是数组一部分的视图，而不是副本。如果您需要更一般地工作而不仅仅是列表，请使用该`copy`模块：

```
from copy import copy
list_of_lists = [copy(row) for range in xrange(3)] 
```

另外，请注意，这`range`不是变量的最佳名称，因为它会隐藏内置函数 - 对于像这样的一次性使用，`_`是相当常见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T03:38:24.033

发生这种情况是因为 python 中的大多数对象（字符串和数字除外）都通过引用（不完全是通过引用，但[在这里](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)你有更好的解释）所以当你尝试以“列表全面”的方式进行时，你会得到一个列表对同一列表的 3 个引用（您称为“行”的那个）。因此，当您更改一行的值时，您会看到所有行的值都发生了变化）

所以你要做的就是像这样改变你的“矩阵”创建：

```
list_of_lists = [list(row) for range in xrange(3)] 
```

[在这里](http://henry.precheur.org/python/copy_list)，您对如何正确获取列表副本有一些想法。根据您要执行的操作，您可以使用一种或另一种...

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:24:51.900

复制列表而不仅仅是引用。

```
list_of_lists = [row[:] for range in xrange(3)] 
```*

# c++ - 为什么 boost 可选引用不是 T* 的包装器？

> ID：12452801
> 
> 赞同：18
> 
> 时间：2012-09-17T03:23:13.743
> 
> 标签：c++, memory, pointers, boost, reference

既然`boost::optional<T&>`已经是一个专业化，为什么不把它作为一个包装器来实现`T*`呢？这将允许它占用更少的空间，因为不需要`m_initialized`布尔值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-17T13:13:55.280

由于[boost 1.61](http://www.boost.org/users/history/version_1_61_0.html) optional 在引用的情况下进行了优化。

发行说明提到：

```
sizeof(optional<T&>) == sizeof(T*) 
```

因此，在这种情况下，它肯定是作为指针实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:48:35.187

可能是这样，因为未初始化的`boost::optional<T*>`对象必须不同于已`boost::optional<T*>`初始化的对象`NULL`，例如，*此函数不能返回任何值、a`NULL`或非`NULL`指针*。

在这种情况下，你为什么不使用一个`NULL`没有值的普通指针。无需在此之上添加更多复杂性`boost::optional<>`。我的意思是，让事情变得更大或更复杂很容易，但很难让它们变得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:10:12.237

首先，`boost::optional<T&>`不是专业。如果您查看代码，您会发现它确实执行了一些基于标记的调度来自定义引用类型的行为，但`boost::optional_base<T>`类模板本身并不是专门的。

然而，为什么不实施这种空间优化仍然是一个合理的问题。可能是因为它*不是*专业的，所以这项工作要困难得多，我不知道。

关于为什么您更喜欢`optional<T&>`原始指针的问题是一个完全独立的问题，因此请随时单独询问...

# html - 配置添加此 URL

> ID：12452803
> 
> 赞同：2
> 
> 时间：2012-09-17T03:23:36.643
> 
> 标签：html, share, addthis

我在共享选项中使用插件 addthis 我使用默认值（共享网页），但在喜欢（facebook）、twitter 和 google+ 中我想要我的定义。这是我的代码：

```
<div class="addthis_toolbox addthis_default_style" style="float:left">
<a class="addthis_button_facebook_like" fb:like:layout="button_count" href="http://www.website.com/"></a>
<a class="addthis_button_tweet" href="http://www.website.com/"></a>
<a class="addthis_button_google_plusone" g:plusone:size="medium" href="http://www.website.com/"></a>
<a class="addthis_counter addthis_pill_style"></a> 
```

但是这段代码在我的网络中不起作用..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T14:27:24.717

将“href”替换为“addthis:url”。要同时指定标题，请使用“addthis:title”。完整的文档可以在这里找到：

[http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#.UFczI6SXRuo](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#.UFczI6SXRuo)

这是您的代码应如下所示：

```
<div class="addthis_toolbox addthis_default_style" style="float:left">
<a class="addthis_button_facebook_like" fb:like:layout="button_count" addthis:url="http://www.website.com/"></a>
<a class="addthis_button_tweet" addthis:url="http://www.website.com/"></a>
<a class="addthis_button_google_plusone" g:plusone:size="medium" addthis:url="http://www.website.com/"></a>
<a class="addthis_counter addthis_pill_style" addthis:url="http://www.website.com"></a>
</div> 
```

# c++ - 有效删除所有重复记录

> ID：12452804
> 
> 赞同：4
> 
> 时间：2012-09-17T03:23:47.007
> 
> 标签：c++, algorithm, data-structures

我有一个可能是**30+GB**或更多的文件。该文件中的每一行称为一条记录，由*2 个 cols*组成，如下所示

> id1 id2

所有这 2 个 id 都是整数（32 位）。我的工作是编写一个程序来删除所有重复记录，使记录唯一，最后将唯一的 id2 输出到文件中。

有一些限制，最多允许**30G 内存**，最好由**非多线程/进程程序**有效地完成工作。

最初我想出了一个想法：由于内存限制，我决定读取文件**n**次，每次只将那些记录在内存中`id1 % n = i (i = 0,1,2,..,n-1)`。我使用的数据结构是 a `std::map<int, std::set<int> >`，它以 id1 为 key，并将 id2 放在 id1's 中`std::set`。

这样，不会违反内存约束，但速度很慢。我认为这是因为随着`std::map`和`std::set`变大，插入速度会下降。此外，我需要读取文件 n 次，当每一轮完成后，我必须清除`std::map`下一轮的文件，这也需要一些时间。

我也尝试过**hash**，但它也不能让我满意，我认为即使使用**300W**桶也可能存在太多冲突。

所以，我在这里发布我的问题，帮助你们提供更好的数据结构或算法。

非常感谢。

附言

需要脚本（shell、python），如果它可以有效地做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T03:44:28.243

除非我忽略了一个要求，否则应该可以在 Linux shell 上这样做

```
sort -u inputfile > outputfile 
```

许多实现也使您能够`sort`以并行方式使用：

```
sort --parallel=4 -u inputfile > outputfile 
```

最多四个并行执行。

请注意，可能会暂时`sort`使用大量空间。`/tmp`如果那里的磁盘空间不足，您可以使用该`-T`选项将其指向磁盘上的另一个位置以用作临时目录。

* * *

（编辑：）关于效率的一些评论：

*   在执行期间花费的大部分时间（任何解决您的问题的方法）将花费在 IO 上，这`sort`是高度优化的。
*   除非您有非常多的 RAM，否则您的解决方案可能最终会在磁盘上执行一些工作（就像`sort`）。同样，优化这意味着大量的工作，而`sort`所有这些工作都已经完成。
*   一个缺点`sort`是它对输入行的字符串表示进行操作。如果您要编写自己的代码，您可以做的一件事（类似于您已经建议的）是将输入行转换为 64 位整数并散列它们。`sort`如果您有足够的 RAM，如果您使 IO 和整数转换非常快，那么这可能是一种在速度方面击败的方法。我怀疑它可能不值得付出努力，因为`sort`它易于使用并且——我认为——足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:38:58.067

而不是`std::map<int, std::set<int> >`使用`std::unordered_multimap<int,int>`. 如果您不能使用 C++11 - 请自己编写。

它`std::map`是基于节点的，它在每次插入时调用 malloc，这可能是它很慢的原因。使用未排序的映射（哈希表），如果您知道记录数，则可以预先分配。即使您不这样做，malloc 的数量也将`O(log N)`代替`O(N)`with `std::map`。

我敢打赌，这将比使用 external 快几倍，内存效率更高`sort -u`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T10:02:42.087

当文件中没有太多重复记录时，这种方法可能会有所帮助。

第一次通过。[为Bloom filter](http://en.wikipedia.org/wiki/Bloom_filter)分配大部分内存。从输入文件中散列每一对并将结果放入布隆过滤器。将 Bloom 过滤器找到的每个重复项写入临时文件（该文件还将包含一些误报，它们不是重复项）。

第 2 次通过。加载临时文件并根据其记录构建地图。键是`std::pair<int,int>`，值是布尔标志。该映射可以实现为 std::unordered_map/boost::unordered_map 或 std::map。

第三关。再次读取输入文件，搜索映射中的每条记录，`id2`如果未找到或尚未设置标志，则输出其，然后设置此标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T04:28:29.980

我只是认为如果不使用一堆磁盘就无法有效地做到这一点。任何形式的数据结构都会引入如此多的内存和/或存储开销，从而使您的算法受到影响。所以我希望排序解决方案在这里是最好的。

我认为您可以一次对文件的大块进行排序，然后在之后合并（*即*从合并排序）这些块。对一个块进行排序后，显然它必须回到磁盘。您可以只替换输入文件中的数据（假设它是二进制文件），或写入临时文件。

就记录而言，您只有一堆 64 位值。借助 30GB RAM，您一次可以保存近 40 亿条记录。这很甜蜜。您可以使用快速排序就地排序那么多，或者使用归并排序一半。您可能不会获得该大小的连续内存块。所以你将不得不打破它。这将使快速排序有点棘手，因此您可能还想在 RAM 中使用合并排序。

在最终合并期间，丢弃重复项是微不足道的。合并可能完全基于文件，但在最坏的情况下，您将使用相当于输入文件中记录数量两倍的磁盘量（一个文件用于暂存，一个文件用于输出）。如果您可以将输入文件用作临时文件，那么您没有超出 RAM 限制或磁盘限制（如果有）。

我认为这里的关键是它不应该是多线程的要求。这非常适合基于磁盘的存储。您的大部分时间将花在磁盘访问上。所以你要确保尽可能高效地做到这一点。特别是，当您进行合并排序时，您希望最大限度地减少搜索量。你有大量的内存作为缓冲区，所以我相信你可以让它变得非常高效。

所以假设你的文件是 60GB（我假设它是二进制的），所以大约有 80 亿条记录。如果您在 RAM 中进行合并排序，则一次可以处理 15GB。这相当于一次读取和（覆盖）写入文件。现在有四个块。如果你想做纯粹的合并排序，那么你总是只处理两个数组。这意味着您再读取和写入文件两次：一次将每个 15GB 块合并为 30GB，最后一次合并这些文件（包括丢弃重复项）。

我不认为这太糟糕了。三进三出。如果您找到了一种快速排序的好方法，那么您可以通过更少的文件来完成此操作。我想像这样的数据结构`deque`可以很好地工作，因为它可以处理不连续的内存块......但是您可能想要构建自己的并微调您的排序算法以利用它。

# jquery-ui - jQuery 模态关闭回调

> ID：12452805
> 
> 赞同：1
> 
> 时间：2012-09-17T03:23:55.000
> 
> 标签：jquery-ui

如何设置在模式对话框关闭时运行的回调函数，而无需单击按钮或关闭 (x) 图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:26:53.860

为什么不尝试[`close`](http://jqueryui.com/demos/dialog/#event-close)jQuery UI 对话框的事件？

代码示例

提供一个回调函数来处理关闭事件作为初始化选项。

```
$( ".selector" ).dialog({
   close: function(event, ui) { ... }
}); 
```

按类型绑定到关闭事件：dialogclose。

```
$( ".selector" ).bind( "dialogclose", function(event, ui) {
  ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T03:31:02.360

你也可以试试，

```
$( ".selector" ).dialog({
   beforeClose: function(event, ui) { ... }
}); 
```

当对话框试图关闭时触发此事件。如果`beforeClose`事件处理程序（回调函数）返回 false，则将阻止关闭。

# c# - 如何对字母数字列表框进行排序？

> ID：12452806
> 
> 赞同：1
> 
> 时间：2012-09-17T03:24:31.070
> 
> 标签：c#, asp.net, linq, sorting, listbox

我有一个列表框，其中包含 B1、B2、...B7000...等列表项值。每次将项目附加到列表框时，我都需要对整个列表框进行排序。

目前，它们以 B1、B100、B1000、B2、B200 等方式排序，这是不合逻辑的。

我怎样才能排序，使它像 B1，B2，B3 ......？

我一直在尝试使用 LINQ，但它不起作用：

```
List<ListItem> list = new List<ListItem>(ListBox7.Items.Cast<ListItem>());
list = list.OrderBy(li => li.Text).ToList<ListItem>();
ListBox7.Items.Clear();
ListBox7.Items.AddRange(list.ToArray<ListItem>()); 
```

请帮忙！我到处找，找不到解决办法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T03:30:47.473

```
var list = listBox.Items.Cast<ListItem>()
            .OrderBy(item => int.Parse(item.Text.TrimStart('B')));

listBox.Items.Clear();
listBox.Items.AddRange(list.ToArray()); 
```

# wpf - WPF 在 Windows 窗体上运行命令

> ID：12452807
> 
> 赞同：0
> 
> 时间：2012-09-17T03:24:40.280
> 
> 标签：wpf, vb.net, winforms

我有一个 WPF 项目，我在其中添加了一个 Windows 窗体。

windows窗体有一个方法`runme()`。但我想从 WPF 表单中调用它。

目前我用过

```
Dim wpfForm as new wpfForm
wpfForm.Show() 
```

从 Windows 窗体显示 WPF 窗体。

我不确定如何发回命令。

我试过了：

```
Me.parent.runme() 
```

但这给了我错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:37:42.837

我能想到的唯一方法是为您的 Winform 创建一个自定义构造函数并将对 Wpf 窗口的引用传递给它。[似乎没有简单的方法](http://www.codingtiger.com/questions/wpf/How-to-use-a-FolderBrowserDialog-from-a-WPF-application.html)可以将 WPF 窗口分配为 Winforms 窗口的所有者/父级。

**窗体**

```
Public Class Form1
    Dim myParent As System.Windows.Window
    Public Sub New()
        InitializeComponent()
    End Sub

    Public Sub New(parent As System.Windows.Window)
        myParent = parent
        InitializeComponent()
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        CType(myParent, MainWindow).runMe()
    End Sub

End Class 
```

**Wpf 表单**

```
Class MainWindow 
    Dim winForm As Form1
    Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click
        winForm = New Form1(Me)
        winForm.Show()
    End Sub
    Public Sub runMe()
        Me.Background = Brushes.Red
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T08:26:10.867

最终起作用的是按照 Cyborgx37 的建议创建一个界面

```
Interface ILogOut
    Sub DoIt()
End Interface

Class WinFormWindow : Implements ILogOut
    Public Sub DoIt() Implements ILogOut.DoIt
        MsgBox("Message Received!")
    End Sub
End Class 
```

然后，您可以使用 ILogOut 接口将消息从 WPF 窗口发送到 Windows 窗体窗口

# ios - 在 iOS 6 上不推荐使用 groupTableViewBackgroundColor 吗？

> ID：12452810
> 
> 赞同：36
> 
> 时间：2012-09-17T03:25:01.720
> 
> 标签：ios, view, background, tableview, ios6

我只是在使用 iOS 6.0 和 Xcode 4.5GM 测试我的应用程序，我设置了这样的视图：

```
[self.view setBackgroundColor:[UIColor groupTableViewBackgroundColor]]; 
```

因此，视图与普通表视图具有相同的模式。

这在 iOS 4 和 5 上运行良好，但在 iOS 6 中它只是给了我一个白色背景。

这是否已弃用？如果是这样，我该如何更换它？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-17T03:33:00.207

这个方法将在 6.0 种子程序中被弃用 如果你想在你自己的视图中有一个看起来像 table view 背景的背景，那么你应该创建一个空的 table view 并将它放在你的内容后面。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-29T16:16:59.960

首先，将此添加到您的**viewDidLoad**：

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tableViewBackground.png"]]; 
```

或者

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"tableViewBackground.png"]]; 
```

然后将此图像添加到您的应用程序中：

**[tableViewBackground.png](https://i.stack.imgur.com/73fZ4.png)**

![tableViewBackground.png](../Images/a153d837a494f455aea4ae83dc200e6b.png)

**[tableViewBackground@2x.png](https://i.stack.imgur.com/2H43D.png)**

![tableViewBackground@2x.png](../Images/de141ade11edf0ddbef438f9b43013e9.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-01T10:47:30.753

我写了一个`UIColor`类别来替换`groupTableViewBackgroundColor`：

```
@interface UIColor (UITableViewBackground)
+ (UIColor *)groupTableViewBackgroundColor;    
@end

@implementation UIColor (UITableViewBackground)

+ (UIColor *)groupTableViewBackgroundColor
{
    __strong static UIImage* tableViewBackgroundImage = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(7.f, 1.f), NO, 0.0);
        CGContextRef c = UIGraphicsGetCurrentContext();
        [[self colorWithRed:185/255.f green:192/255.f blue:202/255.f alpha:1.f] setFill];
        CGContextFillRect(c, CGRectMake(0, 0, 4, 1));
        [[self colorWithRed:185/255.f green:193/255.f blue:200/255.f alpha:1.f] setFill];
        CGContextFillRect(c, CGRectMake(4, 0, 1, 1));
        [[self colorWithRed:192/255.f green:200/255.f blue:207/255.f alpha:1.f] setFill];
        CGContextFillRect(c, CGRectMake(5, 0, 2, 1));
        tableViewBackgroundImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    });
    return [self colorWithPatternImage:tableViewBackgroundImage];
}

@end 
```

此解决方案还允许调整背景的外观。随意更改绘图代码:)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-09-26T15:47:45.243

在 iOS6 SKD 中，UIInterface.h 中的注释建议如下：

> 组样式表视图背景不能再用简单的颜色表示。如果你想在你自己的视图中有一个看起来像表格视图背景的背景，那么你应该创建一个空的表格视图并将它放在你的内容后面。
> 
> 此方法将在 6.0 种子程序期间被弃用

一个简单的解决方案是使用等效的 RGB 值设置背景：

```
[self.view setBackgroundColor:[UIColor colorWithRed:215.0/255.0 green:217.0/255.0 blue:223.0/255.0 alpha:1.0]]; 
```

您可以在 xib 中将视图背景设置为白色或任何您喜欢的颜色以抑制警告。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-13T14:19:39.707

如果它对任何人有帮助，这就是我在自定义视图中为获得此背景所做的具体操作（使用 Beloeuvre 先生的提示）

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor clearColor];
    UITableView *tv = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStyleGrouped];
    [self.view addSubview:tv];
    [self.view sendSubviewToBack:tv];
    // ...
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-03T08:04:17.787

试试这个：

```
[myTableView setBackgroundView:nil];
[myTableView setBackgroundView:[[[UIView alloc] init] autorelease]]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-03T22:28:30.047

如果您使用故事板并且有很多视图，您可能很难找到视图。您可以单击右上角的“显示版本编辑器”按钮。这会将故事视图更改为 XML 文本视图。搜索“groupTableViewBackGroundColor”。您应该找到具有此属性的视图。

![在此处输入图像描述](../Images/27c35460f0a6eaa22d26c56d8cbc269e.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-02T16:46:45.013

对以前的 iOs 版本使用标准方法是个好主意。所以我改进了 James Boucher 的解决方案：

```
+ (void)setBackgroundColorForTableView:(UITableView*) tableView
{
    UIColor* color = [UIColor whiteColor];
    NSString* version = [[UIDevice currentDevice] systemVersion];
    if([version floatValue] < 6.0)
    {
        tableView.backgroundColor = color;
    }
    else
    {
        tableView.backgroundView = nil;
        UIView* bv = [[UIView alloc] init];
        bv.backgroundColor = color;
        tableView.backgroundView = bv;
        [bv release];
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-13T09:39:14.450

详细说明@NSElvis 的解决方案，这里是相同的分组表视图背景资源（它足够宽，因此您不会在横向上获得有趣的效果）

[back-tableview@2x.png](http://imgur.com/dE4dvtx)

要使用它，只需执行

```
[YOUR_VIEW setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"back-tableview"]]]; 
```

# iphone - 在 SQLITE 数据库中插入值

> ID：12452813
> 
> 赞同：3
> 
> 时间：2012-09-17T03:25:39.493
> 
> 标签：iphone, ios, database, ios5, sqlite

我试图在 sqlite3 数据库中插入值，但它无法在我的应用程序上运行。我遵循这段代码，其中表中的所有这些值都是 varchar。

```
sqlite3_stmt *statement;

NSString *docsDir;
NSArray *dirPaths;
int ID;
// Get the documents directory
dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

docsDir = [dirPaths objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [docsDir stringByAppendingPathComponent: @"weather.sqlite"]];

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &contactDB) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO satish VALUES ('jodhpur','hazy1','68','7','700','30','28','10sept')"];

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(contactDB, insert_stmt, -1, &statement, NULL);
    {
        NSLog(@"%@",statement);
        sqlite3_bind_text(statement, 1, insert_stmt, -1, SQLITE_TRANSIENT );

        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            ID = sqlite3_last_insert_rowid(contactDB);

            NSLog(@"Data inserted successfully ");

        } 
        else{             
            NSLog(@"Failed to add contact");
        }
    }
    sqlite3_finalize(statement);
    sqlite3_close(contactDB);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:51:44.857

```
//tyr this code    
// you must give the column name to insert values in DB   

     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
            NSString *documentsDir = [paths objectAtIndex:0];

            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSError *error;
            NSString *dbPath =[documentsDir stringByAppendingPathComponent:@"register.sqlite"];
            BOOL success = [fileManager fileExistsAtPath:dbPath]; 
            sqlite3_stmt *selectstmt;
            if(!success)
            {
                NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"register.sqlite"];
                success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];

                if (!success) 
                    NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
            }

            if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {
                //*************** insert value in database******************************\\ 

                const char *sql = "insert into satish (firstname,lastname,email,company,phone) VALUES ('sdcbb','bbbb','bbbb','bbbb',1111122)";
                sqlite3_prepare_v2(database,sql, -1, &selectstmt, NULL); 
                if(sqlite3_step(selectstmt)==SQLITE_DONE)
                {
                    NSLog(@"insert successfully");
                }
                else
                {
                    NSLog(@"insert not successfully");

                }
            sqlite3_finalize(selectstmt);
                sqlite3_close(database);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:32:31.910

我看不到您将数据库从捆绑包复制到文档目录的位置。如果您不复制预制的 SQLite 数据库，那么您的公开调用将创建一个新的空数据库。由于您尚未在空数据库中创建表，因此 Insert 调用将失败。解决方案 1：编写文件例程以将带有名为 satish 的表的预制 SQLite 数据库复制到您的文档目录中。解决方案2：如果不想预先制作sqlite数据库，请先在SQLite中使用create语句创建satish表。

# ruby-on-rails - 如何在 arch-linux 中为所有用户安装 gem rails

> ID：12452815
> 
> 赞同：0
> 
> 时间：2012-09-17T03:25:51.897
> 
> 标签：ruby-on-rails, ruby, rubygems, archlinux

安装导轨时

```
sudo gem install rails 
```

或使用root用户，此安装`$HOME/.gem`仅适用于实际用户，如何为系统中的所有用户安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T09:29:57.090

您可以注释掉 gem: --user-install from /etc/gemrc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T01:26:37.943

您可以使用 AUR 中提供的 pacgem：[https ://aur.archlinux.org/packages/pacgem](https://aur.archlinux.org/packages/pacgem)

# google-chrome-extension - 是否可以为 Chrome Web Store 之外的私人分发创建 Chrome 扩展程序？

> ID：12452817
> 
> 赞同：78
> 
> 时间：2012-09-17T03:26:27.647
> 
> 标签：google-chrome-extension, chrome-web-store

我们有一个我们开发的 Chrome 扩展应用程序，并希望仅将其分发给有限数量的内部用户。

这将是一个私人应用程序，但要安装它，用户现在必须按照手动步骤转到设置 -> 扩展 -> 单击开发人员模式 -> 将 .crx 放在那里。

我想知道是否有办法让私有 App Store 私下分发这个应用程序，而不是在 Chrome Web Store 上供任何人查看/下载/使用。

提前感谢您的帮助---

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-17T13:48:42.650

您使用 Chrome 网上应用店。有 2 个选项可用：

1.  从 Chrome 网上应用店共享一个不公开的 Chrome 扩展程序（知道链接的任何人都可以安装它）
2.  使用 G Suite 或 Education 的 Chrome 客户可以使用 Chrome 网上应用店来托管仅限同一域中的用户使用的私有应用程序。

## 请参阅[https://support.google.com/chrome/a/answer/2663860](https://support.google.com/chrome/a/answer/2663860)

* * *

2016 年 5 月 20 日更新：来自[https://support.google.com/chrome/a/answer/2663860?hl=en](https://support.google.com/chrome/a/answer/2663860?hl=en)

> 使用 Google Apps for Work 或 Education 的 Chrome 客户可以使用 Chrome 网上应用店来托管仅限其用户或您与之共享应用程序直接链接的人的私有应用程序。来自同一 Chrome 网域的用户会在 Chrome 网上应用店的私人收藏集中看到其组织的私人应用。

2015 年 10 月 27 日更新：Google 更新了安装政策，试图遏制 Windows 上的恶意扩展活动。在[chrome 扩展托管页面上](https://developer.chrome.com/extensions/hosting)：

> 警告：从 Chrome 33 开始，Windows 用户只能下载托管在 Chrome 网上商店中的扩展程序，但通过企业策略或开发人员模式进行的安装除外（请参阅保护 Windows 用户免受恶意扩展程序的侵害）。从 Chrome 44 开始，不允许从 Mac 上本地 .crx 的路径进行外部安装（请参阅继续保护 Chrome 用户免受恶意扩展程序的侵害）。

使用最新版本的 Google Chrome，用户将不再能够仅单击下载链接并使用正确的 HTTP 标头进行安装。这为您提供了 4 个可能的选项：

*   [用户下载扩展，然后将文件拖到扩展管理页面](http://support.google.com/chrome_webstore/bin/answer.py?hl=en&answer=2664769&p=crx_warning)（这不再适用于 Windows 每个更新说明）
*   [更改用户计算机上的注册表设置](http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources)
*   用户在扩展管理页面下载扩展源文件夹并从源加载扩展
*   按照 Rob W 的建议，[使用命令行标志重新启用扩展安装](https://stackoverflow.com/questions/12049366/re-enabling-extension-installs/12071194#12071194)

我在公司内部私下创建并分发了几个不同的 Google Chrome 扩展，并选择了第一个选项。这对用户来说是一个额外的步骤，但这没什么大不了的。用户无需在其 Chrome 浏览器中启用开发者模式即可使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-29T23:29:15.020

是的你可以。您需要通过 google chrome“扩展”页面创建 crx 文件（访问：chrome://extensions/ 注意：您**不能单击**必须手动复制和粘贴的链接，chrome 不允许您访问来自参考文献）

在扩展页面上，选中“开发者模式”复选框，选择“打包扩展”。

![包扩展](../Images/bf251b4eb44e28d0441a6a20705d73a8.png)

现在你得到以下弹出窗口。单击“浏览”`Extension root directory`并导航到包含您的扩展程序的文件夹（包含 manifest.json 的文件夹）。

![包扩展 2](../Images/4531a4ca6319d614e61db8b3cd58ba5a.png)

第一次执行此操作时，请忽略私钥文件。它会自动为您生成一个并将其保存到同一文件夹中。

当您发布新版本的扩展时，请使用生成的私钥文件。这样，某人更新扩展程序时，它就不会再次请求权限。

* * *

**安装**

*   要安装扩展，只需让每个用户手动将新创建的扩展 crx 拖到扩展页面 (chrome://extensions/) 中。
*   第一次它会请求权限，就像从 Chrome 网上应用店安装时一样。
*   对于每个新版本，只要您为每个新版本使用相同的私钥文件，用户只需将新版本以相同的方式拖到扩展页面中，除非他们不会再次被要求授予权限。它只会更新扩展。

* * *

**警告：**

*   请注意您分发扩展 crx 文件的方式。当用户在 Google Chrome 中下载扩展 .crx 文件时，它会认为您正在尝试从该页面安装扩展，并出现“无法从该站点安装”的警告。您需要确保用户知道忽略该错误，并检查他们的下载文件夹以手动安装扩展。
*   每当您下载 .crx 文件时，Chrome 都会向用户发出警告，说明它可能包含病毒。没有办法解决这个问题。即使您压缩文件，Chrome 也会读取内容并给出相同的警告。一些用户因此不会安装。一种解决方法是将 .crx 重命名为其他名称，例如 .RENAME_TO_CRX，但这很麻烦，很多用户要么不想，要么无法弄清楚。
*   您无法自动更新扩展程序。这是不可能的，因为 Chrome 手动阻止了此功能。

* * *

注意：另一种方法是在 Chrome 商店中发布它，但仅限于某些用户（不公开）。只有知道链接的人才能安装，或者你可以让它只有某些人可以安装，即使你有链接但不是组的一部分，他们也无法查看扩展。这里唯一的问题是如果您不希望 Google 看到扩展程序。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-16T05:39:17.010

如果您使用 Google Apps，现在似乎有一种方法可以将应用程序和扩展程序发布到 Chrome 网上应用店，但只能让该域的用户看到。

[https://support.google.com/chrome/a/answer/2663860?hl=en](https://support.google.com/chrome/a/answer/2663860?hl=en)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T09:24:34.700

由于它是内部的，您可以更改他们计算机上的注册表设置吗？
因为如果是这样，您可以使用它们来允许从网上商店外部轻松安装扩展或在他们的机器上强制安装扩展。
看这里....
[http://www.chromium.org/administrators/policy-templates](http://www.chromium.org/administrators/policy-templates)
[http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources](http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources) http://www.chromium.org/管理员/policy-list-3#ExtensionInstallForcelist

# php - twilio 短信，无法在消息中发送 goo.gl 链接

> ID：12452823
> 
> 赞同：3
> 
> 时间：2012-09-17T03:28:04.297
> 
> 标签：php, twilio, goo.gl

我正在尝试使用 twilio 通过 php 发送一些短信，最后有一些简短的文字广告，其中包括一个链接。我正在使用 google url 缩短器缩短链接以降低消息长度。问题在于，twilio 似乎不想发送带有 goo.gl 链接的消息。其他链接工作正常，包括使用 tinyurl 缩短的链接。显然，它与我的代码无关，因为我在尝试直接从 twilio Web 界面发送消息时遇到了同样的问题。

谁能告诉我为什么会这样？我在任何地方或谷歌的文档中都找不到对它的任何引用。

要复制，只需访问 www.twilio.com 并尝试发送一条短信，例如：http: [//goo.gl/nqUc5](http://goo.gl/nqUc5)

注意：问题不在于消息的长度。仅更改一个字母以使 url 不是 goo.gl 将使其工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T22:37:02.587

我问 Twilio 发生了什么事。这是他们的回应：

> “goo.gl”链接最近开始被某些运营商过滤。我们已将此问题上报给运营商 [并且] 一直在努力尝试移除过滤器。不幸的是，我们 [不] 对我们正在取得的进展感到鼓舞，这最终可能是永久性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:16:02.690

确实这是 twilio 客户支持团队的问题，也许对特定的短 url 服务有一些限制，因为我怀疑它有时用来伪装狡猾的链接，如果他们有这样的系统，他们可能会为您的帐户解除地方。 [https://www.twilio.com/help/contact](https://www.twilio.com/help/contact)

还有一个社区论坛你可以问：http: [//forum.twilio.com/twilio/?from_gsfn=true](http://forum.twilio.com/twilio/?from_gsfn=true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T00:46:36.663

我想补充一下 Andrew McKinlay 的回答。我有一个在 AT&T 上运行良好的应用程序，但 Verizon 手机不会收到包含 goo.gl 链接的消息。

（我似乎没有代表发表评论或投票......很抱歉改为回答，但希望这会帮助其他人解决这个问题。）

# jquery - 防止多个jQuery动画同时发生

> ID：12452827
> 
> 赞同：3
> 
> 时间：2012-09-17T03:28:16.847
> 
> 标签：jquery, resize, jquery-animate

这个问题可能看起来与其他关于防止动画排队的问题相似，但这个问题是不同的。

出于说明目的，我在 jsFiddle 上创建了一个简化示例。（在本例中，#box 可以设置为 width:50%，但我正在处理的实际应用程序更复杂，需要对框元素进行复杂计算）。

我有一个容器，里面有一个盒子。当容器调整大小时，盒子应该动画并调整到一定大小。

但是，如果您缓慢地调整结果框的大小（超过 1 秒），#box 会以不平稳的方式调整大小。

[http://jsfiddle.net/B7UGm/](http://jsfiddle.net/B7UGm/)

```
$('#container').resize(function() {
    $("#box").animate({'width':$('#container').width() * 0.5});
}); 
```

理想情况下，我想将动画合并为一个，以便它以一种非常流畅的方式改变大小。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T03:31:26.520

设置`stop(true, true)`。

```
$('#container').resize(function() {
    $("#box").stop(true, true).animate({'width':$('#container').width() * 0.5});
}); 
```

***[演示](http://jsfiddle.net/B7UGm/2/)***

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T03:32:32.713

您可以使用 css3 转换，例如：

```
#box
{
transition: width 2s;
-moz-transition: width 2s; /* Firefox 4 */
-webkit-transition: width 2s; /* Safari and Chrome */
-o-transition: width 2s; /* Opera */
} 
```

让我知道这个是否奏效 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:05:41.030

你也可以使用 .delay() 例如：

```
$('#foo').slideUp(300).delay(800).fadeIn(400); 
```

# c# - 使用 C# 中的表单应用程序使用 DirectX 而不是 Windows 媒体播放器播放视频文件

> ID：12452836
> 
> 赞同：1
> 
> 时间：2012-09-17T03:30:15.500
> 
> 标签：c#, video

我想用 C# 播放视频。我搜索了相关教程，我发现[了这个](http://www.dreamincode.net/forums/topic/111181-adding-video-to-an-application/)。我遵循完全相同，但视频不会出现。

这是我的代码。

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Microsoft.DirectX.AudioVideoPlayback;

namespace WindowsFormsApplication4
{    
public partial class Form1 : Form
{
    Video video;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            // store the original size of the panel
            int width = panel1.Width;
            int height = panel1.Height;

            // load the selected video file
            //video = new Video("C:\\Users\\HDAdmin\\Desktop\\Example.avi");
            video = new Video(openFileDialog1.FileName);

            // set the panel as the video object’s owner
            video.Owner = panel1;

            // stop the video
            video.Stop();

            // resize the video to the size original size of the panel
            panel1.Size = new Size(width, height);

            try
            {
                video.Audio.Volume = 100;
            }
            catch { }
        }

    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (video.State != StateFlags.Running)
        {
            video.Play();
        }

    }

    private void button3_Click(object sender, EventArgs e)
    {
        if (video.State == StateFlags.Running)
        {
            video.Pause();
        }

    }

    private void button4_Click(object sender, EventArgs e)
    {
        if (video.State != StateFlags.Stopped)
        {
            video.Stop();
        }

    }
    }
} 
```

我什至试图像这样放置视频的路径：

```
video = new Video("C:\\Users\\HDAdmin\\Desktop\\Example.avi"); 
```

但两者都会显示如下图所示的错误。 ![在此处输入图像描述](../Images/066921ece06330950170e05b4f5f771a.png)

我的问题是，我想如何通过在 c# 中使用 windows 窗体应用程序来查看和播放视频？

p/s：我只想使用 Directx，不想在 windows 媒体播放器中播放视频。

# mongodb - 检查 mongo 数据库中的数据

> ID：12452846
> 
> 赞同：0
> 
> 时间：2012-09-17T03:31:47.417
> 
> 标签：mongodb

我正在玩这个使用 Sinatra、backbone.js 和 mongodb 作为数据库的教程。这是我第一次使用 mongo。据我了解，该应用程序同时使用本地存储和数据库。它有数据库的这些路由。例如，它有这些路线

```
get '/api/:thing' do
  DB.collection(params[:thing]).find.to_a.map{|t| from_bson_id(t)}.to_json
end

get '/api/:thing/:id' do
  from_bson_id(DB.collection(params[:thing]).find_one(to_bson_id(params[:id]))).to_json
end

post '/api/:thing' do
  oid = DB.collection(params[:thing]).insert(JSON.parse(request.body.read.to_s))
  "{\"_id\": \"#{oid.to_s}\"}"
end 
```

关闭然后再打开服务器后，我可以看到服务器从数据库路由中获取数据

127.0.0.1 - - [17/Sep/2012 08:21:58] “GET /api/todos HTTP/1.1”200 430 0.0033

我的问题是，如何从 mongo shell 中检查数据是否在数据库中？

我启动了 mongo shell

```
 ./bin/mongo 
```

我选择了数据库 `'use mydb'`

然后查看文档（http://www.mongodb.org/display/DOCS/Tutorial）我尝试了诸如

```
> var cursor = db.things.find();
> while (cursor.hasNext()) printjson(cursor.next()); 
```

但他们没有返回任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:36:09.037

您实际上不必为了读取一些数据而创建游标。

```
% mongo
MongoDB shell version: 2.2.0
connecting to: test
> use mydb
switched to db mydb
> show collections
system.indexes
things
> db.things.find()
{ "_id" : ObjectId("50569a52c0ba23837b5dd811"), "name" : "TV set" }
{ "_id" : ObjectId("50569a5bc0ba23837b5dd812"), "name" : "car" } 
```

如果`db.things.find()`不打印任何内容，则该集合中没有数据（或者您输入了错误的名称，或者使用了错误的数据库）。

# android - 收到错误消息：“哎呀：没有找到预期的签名

> ID：12452850
> 
> 赞同：1
> 
> 时间：2012-09-17T03:32:25.367
> 
> 标签：android, android-emulator, centos, adb

使用 adb 安装命令将简单的 APK 安装到模拟器时，我收到此错误消息：adb install

错误信息：

```
[root@localhost MobileBenchmark]# cd /opt/android-sdk/platform-tools
[root@localhost platform-tools]# adb install JotaTextEditor.apk
Whoops: didn't find expected signature
read_central_directory_entry failed
file 'JotaTextEditor.apk' is not a valid zip file
rm failed for /data/local/tmp/JotaTextEditor.apk, No such file or directory 
```

我正在使用 Linux CentOS、最新的 Android SDK 和模拟器：平台 4.1，API 级别：16。

可能是什么问题呢？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:46:02.100

您是否已经在模拟器中安装了此应用程序？我建议您通过转到设置应用程序来删除已安装的应用程序，或者`"adb uninstall <package-name>."`在执行此操作后使用命令重试。

# scripting - 哪种方式可以最有效地控制旋转？

> ID：12452856
> 
> 赞同：1
> 
> 时间：2012-09-17T03:32:55.660
> 
> 标签：scripting, random, models, unity3d, updates

既然大量模型都是随机旋转的，那么哪种方式可以最有效地控制旋转呢？是否将每个模型上的脚本与更新中的轮换绑定？

PS：我们在使用untiy3d引擎时遇到了一些问题。我们使用版本：3.5.0 和 Legacy Particles 的 Ellipsoid Particle Emitter 和 ios 目标平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:08:40.143

使用模型和脚本创建预制件是使用许多相似对象填充场景的最常见且可能最有效的方法。

你可以用`Update()`它来控制它，但你应该用它`FixedUpdate()`来处理物理的东西。

你也可以有一个脚本——在另一个游戏对象中，它只是这个脚本的容器——来实例化这些资产对象，而不是拖放每个对象，如果对象的数量足够大来补偿工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T08:48:02.503

**解释：**

随机模型在身体纹理和其他属性上是否相同？

**如果是，那么可以帮助您实例**[化](http://docs.unity3d.com/Manual/InstantiatingPrefabs.html) 预制件，您可以帮助您只需将旋转代码拖放到一个敌人上，预制件可以随机访问它，或者您也可以通过公开旋转率来访问它。

之后这一切都取决于您的代码逻辑。

# jquery - 使用 Ajax 后单击处理程序

> ID：12452859
> 
> 赞同：0
> 
> 时间：2012-09-17T03:34:16.940
> 
> 标签：jquery

我有一个播放流的网站。一旦有人按下按钮，我就会对服务器执行 AJAX 调用。

```
<input type="submit" class="play" data-type="<?php echo $result_cameras[$i]["camera_type"]; ?>" data-hash="<?php echo $result_cameras[$i]["camera_hash"]; ?>" value="<?php echo $result_cameras[$i]["camera_name"]; ?>"> 
```

这会打印出一组用户可以选择的按钮。这由以下代码处理：

```
<script>
$(document).ready(function(){

$(".play").click(function(){
    var camerahash = $(this).data('hash');
    var cameratype = $(this).data('type');
    function doAjax(){
        $.ajax({
            url: 'index.php?option=streaming&task=playstream&id_hash=<?php echo $id_hash; ?>&camera_hash='+camerahash+'&format=raw',
            success: function(data) {
                if (data == 'Initializing...please wait')
                {
                    $('#quote p').html(data);
                    setTimeout(doAjax, 2000);
                }
                else
                {
                    if (cameratype == "WEBCAM" && data == 'Stream is ready...')
                    {
                        $('#quote p').html(data);
                        window.location = 'rtsp://<?php echo DEVSTREAMWEB; ?>/<?php echo $session_id;?>/'+camerahash;
                    }
                    else if (cameratype == "AXIS" && data == 'Stream is ready...')
                    {
                        $('#quote p').html(data);
                        window.location = 'rtsp://<?php echo DEVSTREAMIP; ?>/<?php echo $session_id;?>/'+camerahash;
                    }
                    else
                    {
                        $('#quote p').html(data);
                    }

                }

            }
        });

    }
    doAjax();
});
});
</script> 
```

服务器返回诸如`Stream is ready...`. 我的问题是，除了点击额外的按钮外，一切都很好。特别是当他们获得成功（视频播放）并退出时，如果他们单击另一个按钮，他们不会收到任何其他消息。就好像没有触发点击事件一样。我需要对点击处理程序做些什么来响应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:36:16.830

对动态加载的按钮使用委托事件。要实现委托事件，请使用 jQuery***[`on()`](http://api.jquery.com/on)***方法。

的语法`.on()`：

```
$(parent).on(eventName, target, handler); 
```

# javascript - javascript不会执行嵌套的for循环

> ID：12452863
> 
> 赞同：2
> 
> 时间：2012-09-17T03:34:46.393
> 
> 标签：javascript, html, xml, for-loop, xmlhttprequest

提前感谢您的所有帮助！

我对javascript相当陌生，但我在java方面有相当强的背景，所以我想我会在我正在做的这个项目上尝试一下。

本质上，我要做的是从 xml 文件中读取数据并为我正在制作的页面创建 html 代码。[我使用了此处](http://goo.gl/T2vUI)找到的 w3schools 的脚本。我已经对其进行了更改，并让它从我自己的 xml 中提取数据，甚至可以生成我需要的更基本的 html 代码。

这是我用于所有测试/构建的页面：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>xml test table</title>
<script>
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.open("GET","SWPlanetData.xml",false);
    xmlhttp.send();
    swDoc=xmlhttp.responseXML;
    var s=swDoc.getElementsByTagName("planet");
</script>
</head>
<body>
<div class="planets-info-container"> 
    <script>
            for (i=0;i<s.length;i++)
            {
                var plName
                    = s[i].getElementsByTagName("planetName")[0].childNodes[0].nodeValue;
            var plDesc
                = s[i].getElementsByTagName("description")[0].childNodes[0].nodeValue;
            var plUrl
                = s[i].getElementsByTagName("linkUrl")[0].childNodes[0].nodeValue;
            var plUrlTxt
                = s[i].getElementsByTagName("linkText")[0].childNodes[0].nodeValue;
            var plShowsList
                = s[i].getElementsByTagName("show");
            var plGamesList 
                = s[i].getElementsByTagName("videoGame");

            // test section
            var test = ''
            test += '<div><table border = "1">\n' +
                '<tr><td>' + s[i].getElementsByTagName("showText")[0].childNodes[0].nodeValue
                + '</td><td>' + s[i].getElementsByTagName("showUrl")[0].childNodes[0].nodeValue  + '</td></tr>' 
                + '<tr><td>' + s[i].getElementsByTagName("gameText")[0].childNodes[0].nodeValue + '</td><td>'
                +   s[i].getElementsByTagName("gameUrl")[0].childNodes[0].nodeValue + '</td></tr>'
                + '</tr></table></div>'                 
                document.write(test);
                document.close();
            // end section

            document.write("<div class=\"planet-info-container\" id=\""+plName+"-container\">");
                document.write("<div class=\"name-row\"><div class=\"planet-name\">"+plName+"</div></div>");
                document.write("<div class=\"desc-row\">");
                    document.write("<div class=\"planet-desc\">"+plDesc+"</div>");
                document.write("</div>");
                document.write("<div class=\"appearances-row\"><ol class=\"shows\"><li>shows list</li>");
                for(j=0;j<plShows.length;j++){
                    document.write("nested for");
                    var showUrl = s[i].getElementsByTagName("showUrl")[j].childNodes[0].nodeValue;
                    var showText = s[i].getElementByTagName("showText")[j].childNodes[0].nodeValue;
                    document.write("<li><a href=\""+showUrl+"\">"+showText+"</a></li>");
                }
                document.write("</ol><ol class=\"games\"> games list");
                for(j=0;j<s[i].getElementByTagName("videoGame").length;j++){
                    var gameUrl = s[i].getElementsByTagName("gameUrl")[j].childNodes[0].nodeValue;
                    var gameText = s[i].getElementByTagName("gameText")[j].childNodes[0].nodeValue;
                    document.write("<li><a href=\""+gameUrl+"\">"+gameText+"</a></li>");
                }
                document.write("</ol></div>");
                document.write("<div class=\"locs-row\">");
                document.write("</div>");
                document.write("<div class=\"races-row\">");
                document.write("</div>");
                document.write("<div class=\"chars-row\">");
                document.write("</div>");
                document.write("<div class=\"links-row\">");
                    document.write("<div class=\""+plName+"-link\"><a href=\""+plUrl+"\">"+plUrlTxt+"</a></div>");
                document.write("</div>");
                document.write("</div><br />");
            }
        </script> 
</div>
</body> 
```

代码在最后的嵌套 for 循环处中断，在那里它完成了 document.write 并将“显示列表”打印到页面，但随后永远不会到达 document.write 里面。

如果有帮助，xml 包含来自星球大战宇宙的行星列表，其组织方式如下：

```
<planets>
<planet>
    <planetName>planet</planetName>
    <description>some text</description>
    <appearances>
        <show>
            <showUrl>url</showUrl>
            <showText>hyperlink text</showText>
        </show>
        <videoGame>
            <gameUrl>url</gameUrl>
            <gameText>hyperlink text</gameText>
        </videoGame>
    </appearances>
    <locationsOfInterest>
        <location>location name</location>
    </locationsOfInterest>
    <famousCharactersRelatedTo>
        <character>a character</character>
    </famousCharactersRelatedTo>
    <externalLinks>
        <link>
            <linkUrl>url</linkUrl>
            <linkText>hyperlink text</linkText>
        </link>
    </externalLinks>
</planet> 
```

编辑：我试图减少代码以减少混乱，使这变得比它必须的更难，但我遗漏了一些重要的东西/我输入的内容有误，所以我用整个页面替换了我之前的代码 -是。

再次编辑：我已经取得了一些进展，但我仍然遇到嵌套循环的问题。它将进入第一个，但在设置第二个变量的第一次迭代之前中断：

`var showText = s[i].getElementsByTagName("showText")[j].childNodes[0].nodeValue;`

谁能明白为什么这会破坏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T03:57:15.003

在您的代码中：

```
> var s = swDoc.getElementsByTagName("planet"); 
```

希望*swDoc*是对 XML 文档的引用。

```
> var plShowsArr = s[i].getElementsByTagName("show"); 
```

您还没有显示在哪里`i`声明或初始化，所以我预计这里会出错。此外，名称`plShowsArr`暗示您认为它是一个数组，它不是，[getElementsByTagName](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-A6C9094)返回一个[NodeList](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)，它与数组类似，因为它具有自调整长度属性并且可以通过索引访问成员。但这就是相似性结束的地方。

```
> document.write("<div><table border = \"1\">"); 
```

您可以嵌套单引号和双引号以避免引用，例如

```
 document.write('<div><table border="1">'); 
```

但使用`document.write`这种方式并不是最优的。如果文档已完成加载，则调用`document.write`将首先清除整个文档，然后再写入新内容。在任何情况下，创建单个标记字符串，然后使用`document.write`（如果合适的话）或将标记设置为某个容器元素的 innerHTML 会更有效。

所以你可能会这样做：

```
var markup = ''
...
  markup += '<div><table border="1">';

...
// If writing to a child window
document.write(markup);
document.close();

// If assigning to the innerHTML of a container element
var container = document.getElementById('containerID');
if (container) {
  container.innerHTML = markup;
} 
```

后来你有：

```
> document.write('<div class="appearances-row"><ol class="shows">shows list'); 
```

这会插入一个文本节点作为 OL 元素的子节点。这是不允许的，接下来发生的任何事情都取决于实现，你的猜测和我的一样好。你已经让用户代理陷入了困境。

然后：

```
>  for(j=0;j<plShows.length;j++){ 
```

另一个未声明的变量：*j*在执行此行时成为全局变量。

我还没有分析柜台在做什么，我将把它留给你。

### 编辑

使用调试器（Firefox 中的 Firebug 可以）显示以下内容：

1.  XML 缺少关闭行星标记

2.  在完成对文档的所有写入之前不要使用，在加载文档`document.close`时使用它是没有必要的，`document.write`并且在脚本之后还有更多要加载的内容。

3.  在该行`for (j=0; j<plshows.length; j++){`中，变量`plshows`未定义，替换为`plShowsList`

4.  在该行`document.write("</ol><ol class=\"games\"> games list");`中，应在 OL 之后和文本之前插入 LI。

5.  在行`var showText = s[i].getElementByTagName...`中，引用`s[i]`没有方法`getElementByTagName`，方法是`getElementsByTagName`（有两行出现此错误-复制粘贴？）

在您的代码中添加一些空格，它非常不可读。并将所有这些 document.writes 更改为连接字符串并作为 div 的 innerHTML 插入一次（将脚本移动到 div 之后）。

修复以上所有问题，它“工作”。您的发票在邮件中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:01:03.560

至少我认为你需要两个改变。

移动以下两行：

```
var plShowsArr = s[i].getElementsByTagName("show");
var plGamesArr = s[i].getElementsByTagName("videoGame"); 
```

...到外循环*内部。*`for`这两行都试图访问由`i`变量索引的当前“行星”元素的子元素。

更新`for`目前正在使用`plShows.length`但应该使用的内部语句`plShowsArr.length`。

可选地，可以通过从当前“show”中选择“showUrl”和“showText”来改进内部循环，而不是从当前“planet”中选择它们：

```
 for(j=0;j<plShowsArr.length;j++){
            document.write("nested for");
            var showUrl = plShowsArr[j].getElementsByTagName("showUrl")[0].childNodes[0].nodeValue;
            var showText = plShowsArr[j].getElementByTagName("showText")[0].childNodes[0].nodeValue;
            document.write("<li><a href=\""+showUrl+"\">"+showText+"</a></li>");
        } 
```

可以进行许多其他改进，但它们（可能？）与您当前的问题没有直接关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:35:00.933

如果你想知道，这对我来说是个愚蠢的行为。最大的区别

```
var showUrl = plShowsArr[j].getElementsByTagName("showUrl")[0].childNodes[0].nodeValue; 
```

和

```
var showText = plShowsArr[j].getElementByTagName("showText")[0].childNodes[0].nodeValue; 
```

就在这里：

![如何成为像 n00b 一样的代码....](../Images/0bebccbad454897b8f0dddb92d94de1f.png)

# java - 无法对非静态类型 MyRunnable 进行静态引用

> ID：12452864
> 
> 赞同：3
> 
> 时间：2012-09-17T03:34:54.147
> 
> 标签：java, static-methods

这是整个代码：

```
import java.util.ArrayList;

    public class Test<E extends Comparable<E>>{

    ThreadLocal<ArrayList<E>>arraylist=new ThreadLocal<ArrayList<E>>(){
        @Override
        protected ArrayList<E> initialValue() {
            // TODO Auto-generated method stub
            //return super.initialValue();
            ArrayList<E>arraylist=new ArrayList<E>();
            for(int i=0;i<=20;i++)
            arraylist.add((E) new Integer(i));
            return arraylist;
        }
    };

    class MyRunnable implements Runnable{

        private Test mytest;

        public MyRunnable(Test test){
            mytest=test;
            // TODO Auto-generated constructor stub
        }
        @Override
        public void run() {
                System.out.println("before"+mytest.arraylist.toString());
                ArrayList<E>myarraylist=(ArrayList<E>) mytest.arraylist.get();
                myarraylist.add((E) new Double(Math.random()));
                mytest.arraylist.set(myarraylist);
                System.out.println("after"+mytest.arraylist.toString());
            }

            // TODO Auto-generated method stub

        }
    public static void main(String[] args){

        Test test=new Test<Double>();

        System.out.println(test.arraylist.toString());

        new Thread(new MyRunnable(test)).start();

        new Thread(new MyRunnable(test)).start();

        System.out.println(arraylist.toString());

    }

} 
```

我的问题是：

1.  为什么`new Thread(new MyRunnable(test)).start();`会导致错误：
    `Cannot make a static reference to the non-static type MyRunnable`？
2.  术语“静态引用”指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:37:37.060

您在没有`static`关键字的测试类中声明了 MyRunnable 类，因此它是一个“内部”类。您只能在外部类的实例中实例化内部类。您试图在静态方法中实例化它，因此没有外部实例。我的猜测是您的意图是让 MyRunnable 类成为嵌套类而不是内部类，因此您应该将 static 关键字添加到类定义中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:37:38.403

> 问题一：为什么是 new Thread(new MyRunnable(test)).start(); 导致错误：无法对非静态类型 MyRunnable 进行静态引用？
> 
> 答案 1：因为您不能直接在静态上下文中实例化内部类。`main`方法总是`static`。为避免此错误，您可以使用外部类引用来初始化将内部类绑定到指定引用的内部类。

```
 new Thread(test.new MyRunnable(test)).start();//Use test object to create new 
```

> 问题2：术语“静态引用”指的是什么？
> 
> 答案 2：`new MyRunnable(test)`不是静态的，你必须使`MyRunnable`静态才能像这样访问。

**您以最低效的方式使用泛型:)**

声明`MyRunnable<E>`因为`Generics in static context is different than in normal object context`

如果我对您的理解正确，您希望`MyRunnable`班级了解`E`传递给`Test`班级的内容。这是不可能的，就像你正在做的那样。

您必须`MyRunnable`先了解`E`，然后才能访问它。

```
static class MyRunnable<E extends Comparable<E>> implements Runnable {

    private Test<E> mytest;

    public MyRunnable(Test<E> test) {
        mytest = test;
        // TODO Auto-generated constructor stub
    }

    @Override
    public void run() {
        Test<Double> test = new Test<Double>();
        ArrayList<Double> doubles = test.arraylist.get();
        doubles.add(new Double(Math.random()));//No type cast needed
    }
    // TODO Auto-generated method stub

 } 
```

# javascript - Mongoose 不创建索引

> ID：12452865
> 
> 赞同：32
> 
> 时间：2012-09-17T03:35:04.630
> 
> 标签：javascript, node.js, mongodb, mongoose

尝试创建 MongoDB 索引。使用 Mongoose ODM 并在下面的模式定义中，我将用户名字段设置为唯一索引。集合和文档都已正确创建，只是索引不起作用。所有文档都说 ensureIndex 命令应该在启动时运行以创建任何索引，但没有创建任何索引。如果这很重要，我正在使用 MongoLab 进行托管。我也多次放弃收藏。怎么了。

```
var schemaUser = new mongoose.Schema({
    username: {type: String, index: { unique: true }, required: true},
    hash: String,
    created: {type: Date, default: Date.now}
}, { collection:'Users' });

var User = mongoose.model('Users', schemaUser);
var newUser = new Users({username:'wintzer'})
newUser.save(function(err) {
    if (err) console.log(err);
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-17T04:13:32.380

将`'index'`事件挂在模型上，查看异步创建索引时是否发生错误：

```
User.on('index', function(err) {
    if (err) {
        console.error('User index error: %s', err);
    } else {
        console.info('User indexing complete');
    }
}); 
```

此外，通过调用启用 Mongoose 的调试日志记录：

```
mongoose.set('debug', true); 
```

调试日志将向您显示`ensureIndex`它为您创建索引所做的调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-24T09:25:52.603

Mongoose 声明[“如果数据库上已经存在索引，则不会被替换”](http://mongoosejs.com/docs/2.7.x/docs/schematypes.html)（[信用](https://stackoverflow.com/questions/7955040/mongodb-mongoose-unique-if-not-null#comment28910460_9693138)）。

例如，如果您之前定义了索引`{unique: true}`，但您想将其更改为，`{unique: true, sparse: true}`那么不幸的是 Mongoose 根本不会这样做，因为数据库中该字段已经存在索引。

在这种情况下，您可以删除现有索引，然后 mongoose 会从新创建一个新索引：

```
$ mongo
> use MyDB
> db.myCollection.dropIndexes();
> exit
$ restart node app 
```

请注意，这是一项[繁重的操作](http://mongoosejs.com/docs/api.html#model_Model.ensureIndexes)，因此在生产系统上要小心！

* * *

在另一种情况下，我的索引没有被创建，所以我使用了 JohnnyHK 推荐的错误报告技术。当我这样做时，我得到了以下回复：

```
E11000 duplicate key error collection 
```

这是因为我的新索引正在添加约束`unique: true`，但集合中存在不唯一的现有文档，因此 Mongo 无法创建索引。

在这种情况下，我需要修复或删除具有重复字段的文档，然后再尝试创建索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-11T05:48:24.490

它可能会解决你的问题

```
var schema = mongoose.Schema({
speed: Number,
watchDate: Number,
meterReading: Number,
status: Number,
openTrack: Boolean,
 });
schema.index({ openTrack: 1 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-24T06:09:51.273

就我而言，我必须**明确指定`autoIndex: true`：**

```
const User = new mongoose.Schema({
    name: String,
    email: String,
    password: String
 },
 {autoIndex: true}
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-14T03:35:06.280

当我在不起作用的模型上挂钩索引事件时，我开始在控制台上收到错误消息，指出“字段'retryWrites'对于索引规范无效。” 我的应用程序中唯一引用“retryWrites”的地方是我的连接字符串的末尾。我删除了这个，重新启动了应用程序，索引重建成功。我把 retryWrites 放回原处，重新启动应用程序，错误就消失了。我的用户集合（一直给我带来问题）是空的，所以当我使用 Postman 创建新记录时，我看到（通过 Mongo Compass 社区）创建了新记录并且现在出现了索引。我不知道 retryWrites 做了什么——今天是我使用它的第一天——但它似乎是我问题的根源。

哦，我为什么用它？它被添加到我从 Mongo 的 Atlas Cloud 站点中提取的连接字符串上。看起来很重要。唔。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-24T01:00:46.877

正如您在 mongoose 文档[https://mongoosejs.com/docs/guide.html#indexes](https://mongoosejs.com/docs/guide.html#indexes)中看到的那样，我们需要定义 schema.index 来创建索引。看看下面的代码进行测试：

*   请注意，更新架构后重新启动服务器以进行检查。

```
const schemaUser = new mongoose.Schema(
  {
    username: {
      type: String,
      required: true,
      index: true,
      unique: true,
      dropDups: true,
    },
    hash: String,
    created: {
      type: Date,
      default: Date.now,
    },
  },
  {
    autoCreate: true, // auto create collection
    autoIndex: true, // auto create indexes
  }
)
// define indexes to be create
schemaUser.index({ username: 1 })

const User = mongoose.model('Users', schemaUser)
const newUser = new Users({ username: 'wintzer' })
newUser.save(function (err) {
  if (err) console.log(err)
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-02T17:41:52.970

检查猫鼬连接选项是否未指定：

```
autoIndex: false 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-09T12:56:52.347

我在编写数据导入命令行实用程序时遇到了这个问题。执行结束后，创建了一些索引，有些没有。

`await model.ensureIndexes()`解决方案是在终止脚本之前调用。无论`autoIndex`期权价值如何，它都有效。

# css - CSS3 盒子阴影淡出效果

> ID：12452866
> 
> 赞同：5
> 
> 时间：2012-09-17T03:35:06.477
> 
> 标签：css, insets

是否可以使用 CSS3 Box Shadow 实现淡出效果？

这是我到目前为止所拥有的 这只会在垂直边添加嵌入/内阴影，但我需要在顶部实现淡出效果。

```
-moz-box-shadow: inset 5px 0 7px -5px #a4a4a4, inset -5px 0 7px -5px #a4a4a4;
-webkit-box-shadow: inset 5px 0 5px -5px #a4a4a4, inset -5px 0 5px -5px #a4a4a4;
box-shadow: inset 5px 0 7px -5px #a4a4a4, inset -5px 0 7px -5px #a4a4a4; 
```

请参阅下图以查看预期结果和我目前拥有的结果。

![预期和当前结果](../Images/527858ea756fe3b6b2ec4b16720f885b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:50:10.850

我还需要这样的东西：

基本上它是关于给外部 div a`drop-shadow`并将内部 div 放置`position:relativ`到外部 div 中，渐变从透明到所需的背景颜色：

[http://jsfiddle.net/vBuxt/1/](http://jsfiddle.net/vBuxt/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-10T22:48:27.943

下面是一个 codepen 示例，说明我是如何为我最近从事的一个项目解决这个问题的：

[http://codepen.io/byronj/pen/waOxqM](http://codepen.io/byronj/pen/waOxqM)

我在我的主要内容部分添加了一个***盒子阴影。***然后我在内容部分的底部添加了一个***绝对定位的 div，其中包含一个******CSS 渐变***，一端为内容背景颜色，另一端为透明背景，如下所示：

```
.container {
   width: 1024px;
   margin: 0 auto;
 }

.container article {
   background-color: #fff;
   margin: -6em auto 10em auto;
   padding-top: 2em;
   width: 100%;
   box-shadow: 0px -2px 20px 2px rgba(0, 0, 0, 0.4);
}

/** GRADIENT **/
.bottom-gradient {
   position: absolute;
   width: 115%;
   height: 60%;
   z-index: 1;
   bottom: -20px;
   background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.59) 10%, white 50%, white 100%);
} 
```

为了确保内容不被渐变覆盖，我将“p”元素设置为***position:relative***，***z-index***为 2，如下所示：

```
p {
  padding: 1em 3em;
  position: relative;
  z-index: 2;
  margin: 1em auto;
  font-size: 1.3em;
  line-height: 1.5em;
} 
```

对于 Eric 的情况，您可以通过将渐变放置在包含 box-shadow 的元素的顶部来反转这种效果。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:22:30.400

您不能转换包含多个值的 CSS3 样式 -：

您可以在 CSS3 中从一种颜色转换到另一种颜色，但您不能在 CSS3 中的渐变之间转换，因为它与多个值混淆，它与您的多个阴影值也是相同的。

啊，我想我看到了你想要达到的目标。一个解决方案可能是尝试在不使用阴影的情况下重现您所追求的外观 - 下面的链接显示了使用边框而不是阴影的可能解决方案，看看您的想法。[http://css-tricks.com/examples/GradientBorder/](http://css-tricks.com/examples/GradientBorder/)

# iphone - 带有 UIImageViews 的分页 UIScrollView 仅显示第一个 UIImageVIew

> ID：12452869
> 
> 赞同：0
> 
> 时间：2012-09-17T03:35:30.507
> 
> 标签：iphone, objective-c, uiscrollview

我正在处理一个分页的 UIScrollView，但它只想在其中显示第一个 UIImageView。我将每个 UIImageView 添加到滚动视图宽度的偏移处，这样应该会创建每个页面。运行时，它说滚动视图是正确的页数，但图像不显示。

任何帮助将非常感激！

```
int numSlides = NUM_TUTORIAL_SLIDES;
    NSString *fileName;
    UIImageView *slideImageView;
    CGRect slideFrame;

    for (int i = 1; i <= numSlides; i++)
    {
        slideFrame.origin.x = self.tutorialScrollView.frame.size.width * (i-1);
        slideFrame.origin.y = 0;
        slideFrame.size = self.tutorialScrollView.frame.size;

        slideImageView = [[UIImageView alloc] initWithFrame:slideFrame];

        if([[AppManager sharedManager] is4inchScreen])
        {
            fileName = [NSString stringWithFormat:@"Slide%d4in@2x.png", i];
        }

        else
        {
            fileName = [NSString stringWithFormat:@"Slide%d@2x.png", i];
        }

        slideImageView.image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:fileName ofType:nil]];

        [self.tutorialScrollView addSubview:slideImageView];

        [slideImageView release];
    }

    self.tutorialScrollView.contentSize = CGSizeMake(self.tutorialScrollView.frame.size.width * numSlides, self.tutorialScrollView.frame.size.height);

    self.tutorialScrollView.delegate = self; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:01:27.500

也许更改以下代码会有所帮助

```
 slideImageView.image = [UIImage imageNamed:fileName]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:15:04.090

事实证明，这个问题与滚动视图的圆角有关。

我有这个代码：

```
//Round header image
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.tutorialScrollView.bounds
                                               byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight)
                                                     cornerRadii:CGSizeMake(DEFAULT_CORNER_RADIUS_HEADER, DEFAULT_CORNER_RADIUS_HEADER)];
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.path = maskPath.CGPath;
self.tutorialScrollView.layer.mask = maskLayer; 
```

显然这会导致滚动视图出现问题

# c# - 如何使用带有嵌入文件和文件夹的 Windows 应用程序复制到目标？

> ID：12452871
> 
> 赞同：1
> 
> 时间：2012-09-17T03:35:55.187
> 
> 标签：c#, windows, forms

我正在尝试编写一个小应用程序，其唯一目的是将一些文件夹和 .cs 源文件复制到用户指定的目录中，我可以通过简单地让应用程序在其自己的安装目录中查找文件和文件夹来做到这一点然后将它们复制到他们的目标目录，但我想知道是否可以将文件夹和文件嵌入到应用程序中，这样当您运行应用程序时，它会创建或将文件夹和文件从 exe 应用程序直接复制到安装目录，而不是在应用程序安装目录中搜索它们然后将它们复制过来。基本上我试图只拥有一个 exe 文件，而不是拥有一个 exe 文件和一堆文件夹和文件。

这是否可能只使用 Windows 窗体应用程序而不使用实际的安装程序类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:41:15.003

是的。将文件作为嵌入式资源嵌入到应用程序可执行文件中。然后，当您的应用程序运行时，访问嵌入的文件并将它们写入所需目录结构中的磁盘。

下面是如何从应用程序程序集中嵌入和访问嵌入资源的示例。

[http://support.microsoft.com/kb/319292](http://support.microsoft.com/kb/319292)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:41:07.960

当然可以，将[BuildAction](https://stackoverflow.com/questions/145752/what-are-the-various-build-action-settings-in-vs-net-project-properties-and-wh)属性用作内容或资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:07:01.953

根据文件/文件夹的数量和结构，您还可以考虑嵌入一个 zip 文件并使用 sharpziplib 或类似的方法将其解压缩。

# ruby-on-rails - 如何使用条件导入索引

> ID：12452877
> 
> 赞同：2
> 
> 时间：2012-09-17T03:37:29.877
> 
> 标签：ruby-on-rails, elasticsearch, tire

我的 Rails 3 中有一个名为 Article 的模型，我用`rake environment tire:import CLASS='Article' FORCE=true`它来做索引。但我只希望将字段`deleted`等于 false 的文章编入索引。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:39:54.450

您可以使用作用域方法。

```
rake environment tire:import CLASS='Article.scoped(:conditions => {:deleted => false})' FORCE=true 
```

参考：由[karmi](https://stackoverflow.com/users/95696/karmi)回答@ [https://github.com/karmi/tire/issues/458](https://github.com/karmi/tire/issues/458)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T10:49:42.280

[以上解决方案](https://stackoverflow.com/questions/12452877/how-to-import-index-with-condition/14481118#14481118)似乎不起作用。

我们传递给`CLASS`环境变量的内容仅用于查找轮胎指数和计算`total`进度条。检查`Line 97: total = klass.count rescue nil`并`Line 49: klass.tire.import(params) do |documents|`从[https://github.com/karmi/retire/blob/master/lib/tire/tasks.rb](https://github.com/karmi/retire/blob/master/lib/tire/tasks.rb)

我找到的唯一可行的解​​决方案（使用 mongoid）是，

```
Tire.index "articles" do
   import Article.scoped(:conditions => {:deleted => false}) 
end 
```

这就像`Article.index.import( Article.scoped(:conditions => {:deleted => false}))`karmi @ [https://github.com/karmi/tire/issues/458回答的一样好](https://github.com/karmi/tire/issues/458)

但是使用上述方法的优点是当我们需要自定义映射时。像下面

```
Tire.index "articles" do
   import Article.scoped(:conditions => {:deleted => false}) do|documents|
     documents.map{|document| document[:content].downcase!; document}
   end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T17:18:43.513

在最新的轮胎宝石中，这对我不起作用。它在轮胎 v0.5.4 中确实有效，但在 v0.6.2 中无效。所以，为了创建一个 rake 任务，我这样做了......

```
desc 'Index articles'
task :index => :environment do
  Article.where(:deleted => false).find_in_batches do |batch|
    Tire.index(Article.index_name).import batch
  end
end 
```

[自述](https://github.com/karmi/retire/blob/master/README.markdown#activemodel-integration)文件中推荐使用 find_in_batches 。

# c# - 在不允许用户修改的情况下访问本地 HTML 文件

> ID：12452879
> 
> 赞同：2
> 
> 时间：2012-09-17T03:37:32.937
> 
> 标签：c#, html

我有一个客户端应用程序，它当前通过 HTTPS 从服务器访问静态 HTML 文件。由于这些文件永远不会改变，我希望我的应用程序从本地文件系统访问它们。但是，我不希望用户能够修改 HTML，所以我想以某种方式将文件嵌入到我的程序集中，所以没有人可以修改它们。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T05:10:33.557

假设本地文件系统对每个文件都有某种“上次修改日期”，只需将文件存储在文件系统中即可。还要计算每个文件内容的哈希值，并保留您知道的哈希值应该是什么的私有（隐藏）记录。然后，当您的应用程序获取文件时，让它也获取上次更改的日期并重新计算内容哈希。如果上次更改的日期或哈希与您知道的不同，请让您的应用通过 https: 获取新副本并使用它。

（如果用户 [hacker?] 真的决心阻止您的计划并且可以物理访问计算机，那么无论您做什么，他们都会找到方法。如果物理访问是可能的，那么您就不可能是完美的 [尽管您可以通过使用户认为不值得如此耗时来防止“大多数”修改]。）

# c# - 找不到属性的吸气剂

> ID：12452882
> 
> 赞同：0
> 
> 时间：2012-09-17T03:37:46.393
> 
> 标签：c#, nhibernate

我在 C# 中使用 NHibernate，在编译时它给了我这个错误：

```
 {"Could not find a getter for property 'idOrder' in class 'FrancosPoS.DBMapping.ordPsf'"} 
```

我找到了这个问题，但我不知道如何为我使用它： [Nhibernate - 找不到属性的吸气剂](https://stackoverflow.com/questions/11863837/nhibernate-could-not-find-a-getter-for-property)

这是我的映射类：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="FrancosPoS" namespace="FrancosPoS.DBMapping" xmlns="urn:nhibernate-mapping-2.2">
  <class name="ordPsf" table="ord_psf" lazy="true" >
    <id name="idOrdPastaF">
      <generator class="identity" />
      <!--<column name="idOrdPastaF" sql-type="int(11)" not-null="true" />-->
    </id>
    <many-to-one insert="false" update="false" lazy="false" name="idOrder">
      <column name="idOrder" sql-type="int(11)" not-null="true" />
    </many-to-one>
    <property name="idOrder">
      <column name="idOrder" sql-type="int(11)" not-null="true" />
    </property>
    <many-to-one insert="false" update="false" lazy="false" name="idPastaF">
      <column name="idPastaF" sql-type="int(11)" not-null="true" />
    </many-to-one>
    <property name="idPastaF">
      <column name="idPastaF" sql-type="int(11)" not-null="true" />
    </property>
    .
    .
    .
    <property name="obs">
      <column name="obs" sql-type="varchar(50)" not-null="false" />
    </property>
    <property name="price">
      <column name="price" sql-type="decimal(8,4)" not-null="true" />
    </property>
  </class>
</hibernate-mapping> 
```

这是我的cs课：

```
namespace FrancosPoS.DBMapping {

    public partial class ordPsf {
        public ordPsf() { }
        public virtual int idOrdPastaF { get; set; }
        public virtual order order { get; set; }
        public virtual pastaFeast pastaFeast { get; set; }
        public virtual salad salad { get; set; }
        public virtual onTheSide onTheSide { get; set; }
        public virtual string obs { get; set; }
        public virtual string price { get; set; }
    }
} 
```

我的猜测是我做错了映射。由于显而易见的原因，我不想有一个 idOrder 获取/设置，因为我需要使用该对象。（此外，我猜在修复这个之后，其他 id 也会出现同样的错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:58:25.583

我不知道你在这里尝试什么。根据映射，您的类必须是：

```
public partial class ordPsf {
    public ordPsf() { }
    public virtual int idOrder { get; set; }
    public virtual int idPastaF{ get; set; }
    .....
    public virtual string obs { get; set; }
    public virtual decimal price { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:07:14.970

如果您不想将属性与公共访问器一起使用，则可以[映射到私有字段](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)：

```
<column ... access="field" .../> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:04:42.543

我发现问题在于 <property> 与 <many-to-one> 关系“冲突”：

```
<property name="idOrder">
  <column name="idOrder" sql-type="int(11)" not-null="true" />
</property> 
```

我们不需要这个，因为多对一将处理订单对象（和 id）。

通过查看如何映射多对一关系找到： http: [//ajlopez.wordpress.com/2011/05/19/nhibernate-3-part-6-one-to-many-with-many-to -一/](http://ajlopez.wordpress.com/2011/05/19/nhibernate-3-part-6-one-to-many-with-many-to-one/)

# c# - 类库中的 Nlog 配置

> ID：12452883
> 
> 赞同：1
> 
> 时间：2012-09-17T03:38:06.793
> 
> 标签：c#, nlog

我有一个名为`Logging`. 在解决方案中，我有许多项目：ASP.NET MVC 应用程序、WCF 服务和其他项目。问题在于我必须为每个项目放置配置文件。我希望配置文件仅位于类库中的一个位置。这可能吗？

我正在使用 NLog。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:16:00.217

您可以将现有项目（类库中的 NLog.config）作为链接添加到所有其他项目。您将能够在一个地方管理 NLog 配置。

1）右键单击一个项目-添加->现有项目...

![在此处输入图像描述](../Images/51e50996613dc250a8f4206fc3b1e1c0.png)

2) 导航到您的类库文件夹，选择 NLog.config 文件并将其添加为链接。 ![在此处输入图像描述](../Images/3704a5c3450af0c4ccf53b81bdb45f70.png)

# java - 如何在我的场景中使用客户异常

> ID：12452886
> 
> 赞同：0
> 
> 时间：2012-09-17T03:38:31.723
> 
> 标签：java, exception-handling, dao

最初我在阅读java中的一些异常知识。我经历了一些建议，例如如果jdk中已经存在明确定义的异常，则不要使用客户异常，不要使用客户异常来处理工作流程。我同意这些观点，它们是绝对正确的。现在我正在考虑如何处理这种情况。这很简单。用户登录。

1 用户名不存在 2 密码错误

这些将在 DAO 层中知道，我必须（最终）将有用的信息填充到控制器层，并让控制器知道发生了什么并在视图中显示有用的提示。

当我第一次学习java时，我是这样做的

这些是伪代码；

```
 if(usernotexit)
     {throw usernotExistException()}
   if(password_wrong)
     {throw passwordWrongException()} 
```

这是一个好习惯吗？如果没有，如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:41:22.657

假设堆栈较高的一些代码正在捕获异常并显示有用的信息，那么这种通用方法没有问题。

但是，对于这种情况下的安全异常，明智的做法是不要在发给用户的消息中区分这两个条件。如果您告诉用户哪一个是错误的，则此信息可用于探测有效用户。

对于任一条件返回给用户的响应都应该是“身份验证失败”。这样你就没有泄露任何有用的信息（例如，用户存在）。

请注意，在*内部*，您可能希望区分这些案例以用于记录目的。只是不要告诉用户发生了哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:44:26.597

尝试结合这两种情况：

```
 if(usernotexit || password_wrong)
     {
        throw user_password_Not_Match()
     } 
```

出于安全原因，告诉最终用户是用户名错误还是密码不是一个好习惯。出于更高的安全目的，您应该抛出一般异常。

# android - 蓝牙配对并连接设备

> ID：12452888
> 
> 赞同：4
> 
> 时间：2012-09-17T03:39:48.607
> 
> 标签：android, bluetooth, connect

我想配对设备并连接它，但我有一个问题，我只能配对设备但我无法连接它们。我想知道如何解决这个问题。恐怕，我没有很好地解释我的问题，我无法连接意味着，将你的手机连接到蓝牙耳机，我只能配对，这是代码

```
 if (btAdapt.isEnabled()) {
                    tbtnSwitch.setChecked(false);
            } else {
                    tbtnSwitch.setChecked(true);
            }
            // ============================================================

            IntentFilter intent = new IntentFilter();
            intent.addAction(BluetoothDevice.ACTION_FOUND);
            intent.addAction(BluetoothDevice.ACTION_BOND_STATE_CHANGED);
            intent.addAction(BluetoothAdapter.ACTION_SCAN_MODE_CHANGED);
            intent.addAction(BluetoothAdapter.ACTION_STATE_CHANGED);
            registerReceiver(searchDevices, intent);
    }

    private BroadcastReceiver searchDevices = new BroadcastReceiver() {

            public void onReceive(Context context, Intent intent) {
                    String action = intent.getAction();
                    Bundle b = intent.getExtras();
                    Object[] lstName = b.keySet().toArray();

                    for (int i = 0; i < lstName.length; i++) {
                            String keyName = lstName[i].toString();
                            Log.e(keyName, String.valueOf(b.get(keyName)));
                    }
                    BluetoothDevice device = null;

                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                            device = intent
                                            .getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                            if (device.getBondState() == BluetoothDevice.BOND_NONE) {
                                    String str = "no pair|" + device.getName() + "|"
                                                    + device.getAddress();
                                    if (lstDevices.indexOf(str) == -1)
                                            lstDevices.add(str); 
                                    adtDevices.notifyDataSetChanged();
                            }
                    }else if(BluetoothDevice.ACTION_BOND_STATE_CHANGED.equals(action)){
                            device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                            switch (device.getBondState()) {
                            case BluetoothDevice.BOND_BONDING:
                                    Log.d("BlueToothTestActivity", "it is pairing");
                                    break;
                            case BluetoothDevice.BOND_BONDED:
                                    Log.d("BlueToothTestActivity", "finish");
                                    connect(device);
                                    break;
                            case BluetoothDevice.BOND_NONE:
                                    Log.d("BlueToothTestActivity", "cancel");
                            default:
                                    break;
                            }
                    }

            }
    };

    @Override
    protected void onDestroy() {
            this.unregisterReceiver(searchDevices);
            super.onDestroy();
            android.os.Process.killProcess(android.os.Process.myPid());
    }

    class ItemClickEvent implements AdapterView.OnItemClickListener {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
            {
                    if(btAdapt.isDiscovering())btAdapt.cancelDiscovery();
                    String str = lstDevices.get(arg2);
                    String[] values = str.split("\\|");
                    String address = values[2];
                    Log.e("address", values[2]);
                    BluetoothDevice btDev = btAdapt.getRemoteDevice(address);
                    try {
                            Boolean returnValue = false;
                            if (btDev.getBondState() == BluetoothDevice.BOND_NONE) {
                                  BluetoothDevice.createBond(BluetoothDevice remoteDevice);
                                    Method createBondMethod = BluetoothDevice.class
                                                    .getMethod("createBond");
                                    Log.d("BlueToothTestActivity", "start");
                                    returnValue = (Boolean) createBondMethod.invoke(btDev);

                            }else if(btDev.getBondState() == BluetoothDevice.BOND_BONDED){
                                    connect(btDev);
                            }
                    } catch (Exception e) {
                            e.printStackTrace();
                    }

            }

    }

    private void connect(BluetoothDevice btDev) {
            UUID uuid = UUID.fromString(SPP_UUID);
            try {
                    btSocket = btDev.createInsecureRfcommSocketToServiceRecord(uuid);
                    Log.d("BlueToothTestActivity", "connecting...");
                    btSocket.connect();
            } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }
    }

    class ClickEvent implements View.OnClickListener {
            public void onClick(View v) {
                    if (v == btnSearch)
                    {
                            if (btAdapt.getState() == BluetoothAdapter.STATE_OFF) {
                                    Toast.makeText(BlueToothTestActivity.this, "please open", 1000)
                                                    .show();
                                    return;
                            }
                            if (btAdapt.isDiscovering())
                                    btAdapt.cancelDiscovery();
                            lstDevices.clear();
                            Object[] lstDevice = btAdapt.getBondedDevices().toArray();
                            for (int i = 0; i < lstDevice.length; i++) {
                                    BluetoothDevice device = (BluetoothDevice) lstDevice[i];
                                    String str = "pair|" + device.getName() + "|"
                                                    + device.getAddress();
                                    lstDevices.add(str); 
                                    adtDevices.notifyDataSetChanged();
                            }
                            setTitle("address：" + btAdapt.getAddress());
                            btAdapt.startDiscovery();
                    } else if (v == tbtnSwitch) {
                            if (tbtnSwitch.isChecked() == false)
                                    btAdapt.enable();

                            else if (tbtnSwitch.isChecked() == true)
                                    btAdapt.disable();
                    } else if (v == btnDis)
                    {
                            Intent discoverableIntent = new Intent(
                                            BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                            discoverableIntent.putExtra(
                                            BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
                            startActivity(discoverableIntent);
                    } else if (v == btnExit) {
                            try {
                                    if (btSocket != null)
                                            btSocket.close();
                            } catch (IOException e) {
                                    e.printStackTrace();
                            }
                            BlueToothTestActivity.this.finish();
                    }
            }

    } 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-24T16:10:45.410

您尚未指定，但我认为您的问题出在套接字创建部分而不是实际的 connect() 调用中。这是事情通常出错的地方。

怎么修？

1.  您的代码假定耳机支持不安全的 BT 通信。在许多情况下，这是真的，但并非完全如此。尝试调用 createRfcommSocketToServiceRecord()

2.  您的代码使用默认的 SPP UUID 进行 RFCOMM 通道查找。对于 API 版本 >= 15，这是错误的做法。而是尝试调用 device.getUuids() 并使用第一个返回的 UUID 作为创建参数。根据我自己的经验，即使对于 15 之前的 API 版本，您仍然可以调用 getUuids() 并获得良好的结果，但您需要通过反射来完成。仅当上述失败时，您才应尝试使用默认 SPP UUID 创建套接字

3.  如果上述方法失败，作为最后的手段，您可以尝试激活“createRfcommSocket”隐藏 API。这对我有用好几次，并且适用于多个 Android 版本。使用 java 反射来激活此调用，并且由于本质上不安全，因此使用 try catch 保护它。

4.  请记住将您的逻辑放在 AsyncTask 或其他东西中。您不希望 UI 线程阻塞此类任务！

最后随意使用[https://github.com/giladHaimov/BTWiz](https://github.com/giladHaimov/BTWiz)来更简单地处理蓝牙连接和简单的异步 IO 接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T14:40:29.643

引用您的代码：

```
 btSocket = btDev.createInsecureRfcommSocketToServiceRecord(uuid);
 Log.d("BlueToothTestActivity", "connecting...");
 btSocket.connect(); 
```

[您可以在此处](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAClient)找到有关以客户端身份连接的官方 Android 文档的代码。

我可以看到可能导致问题的 4 件事：

*   你应该在一个单独的线程中连接！.connect() 是一个阻塞调用 - 见上面的链接
*   并非所有设备都接受不安全的连接
*   对于 2.3.3 以下的 Android 设备，此方法不起作用。您必须通过反射调用私有方法 - 请参阅[此](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)。另外，我认为您会在 SO 上找到它。
*   围绕 .create.... 使用 try/catch 并在 Logcat 上发布错误。

您可以发布您的 Logcat 日志吗？

# python - 如何引用 python 配置文件中不同部分的值？

> ID：12452899
> 
> 赞同：0
> 
> 时间：2012-09-17T03:41:57.413
> 
> 标签：python, config

> **可能重复：**
> [如何使用已在 ConfigParser 中定义的变量](https://stackoverflow.com/questions/4999190/how-to-use-variables-already-defined-in-configparser)

例如，我有以下配置文件：

```
[Sec1]
opt1 = 1

[Sec2]
opt2 = 1 
```

我想明确设置`opt2`等于`opt1`，这样如果我`opt1`稍后更新，`opt2`也会更新。

但我找不到办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:30:10.873

您可以将插值与`ConfigParser`或一起使用`SafeConfigParser`。但是，您不能在配置中的部分之间进行插值，除非其中之一是`DEFAULT`：

```
[DEFAULT]
opt1 = 1

[Sec2]
opt2 = %(opt1)s 
```

请务必注意，这些`DEFAULT`选项会掩盖在其他部分中使用它们的任何进一步尝试，并且您不能通过 重新分配`opt1`。`Sec2.opt2`

# php - 如何在magento 1.7中为产品描述显示所见即所得编辑器，而不在弹出窗口中显示？

> ID：12452901
> 
> 赞同：6
> 
> 时间：2012-09-17T03:42:35.113
> 
> 标签：php, magento, wysiwyg, product, magento-1.7

我尝试修改magento 1.7产品描述以默认显示所见即所得编辑器，而无需用户单击“所见即所得编辑器”按钮，但我找不到要编辑的代码，任何人都可以在这里给出一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:43:03.290

我确定 Magento 管理员中有一个选项：

管理 -> 系统 -> 配置 -> 内容管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T20:55:39.773

我相信安德鲁的回答应该是正确的。Magento 表单应该检查是否启用了所见即所得。

```
Mage::getSingleton('cms/wysiwyg_config')->isEnabled() 
```

这只是检查您正在使用先前发布的答案更改的设置：

管理 -> 系统 -> 配置 -> 内容管理

默认情况下，这将显示漂亮的界面，而不是强制弹出或操作来启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T20:54:06.250

这个问题的答案最初由[Nikitas](https://stackoverflow.com/users/1091082/nikitas)发布在这里： [https ://stackoverflow.com/a/20307722/3254362](https://stackoverflow.com/a/20307722/3254362)

为了简单起见，我在这里复制答案...

* * *

经过一番研究，我发现了它。

1）将此代码放在您希望编辑器直接出现的.phtml文件中。

2) 在代码的第 6 行，您可以看到`elements: "short_description"`. 您可以`"short_description"`使用所需的元素 ID 进行更改。您可以添加多个元素 ID，以逗号分隔且不包含空格。

**示例：**我输入此代码是`app/design/adminhtml/default/default/template/catalog/product/edit.phtml`因为我希望编辑器在我编辑产品描述、简短描述等时直接出现。

编码：

```
<script type="text/javascript">
window.onload=function()
{
   tinyMCE.init({
    mode : "exact",
    elements: "short_description",
    theme : "advanced",
    plugins : "inlinepopups,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras",
    theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
    theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
    theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,|,visualchars,nonbreaking",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_path_location : "bottom",
    extended_valid_elements : "a[name|href|target|title|onclick],img[class|src|border=0|alt|title|hspace|vspace|width|height|align|onmouseover|onmouseout|name],hr[class|width|size|noshade],font[face|size|color|style],span[class|align|style]",
    theme_advanced_resize_horizontal : 'true',
    theme_advanced_resizing : 'true',
    apply_source_formatting : 'true',
    convert_urls : 'false',
    force_br_newlines : 'true',
    doctype : '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'

  });
};
</script> 
```

# python - 自定义 python 数据库记录器，具有循环导入

> ID：12452904
> 
> 赞同：1
> 
> 时间：2012-09-17T03:43:55.930
> 
> 标签：python, logging, handler

我正在尝试创建自己的日志处理程序以记录到数据库模型，它扩展了 logging.Handler

```
import logging
from logging import Handler
from logger.models import SearchLog

class DBHandler(Handler,object):
    model = None
    def __init__(self, model):
        super(DBHandler, self).__init__()
        mod = __import__(model)
        components = name.split('.')
        for comp in components[1:]:
            mod = getattr(mod, comp)
        self.model = mod

    def emit(self,record):
        log_entry = self.model(level=record.levelname, message=record.msg)
        log_entry.save() 
```

这是日志配置：

```
'db_search_log':{
    'level': 'INFO',
    'class': 'db_logger.handlers.DBHandler',
    'model': 'db_logger.models.SearchLog',
    'formatter': 'verbose',
     } 
```

但是我收到以下错误，请参阅stacktrace：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 252, in fetch_command
    app_name = get_commands()[subcommand]
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 101, in get_commands
    apps = settings.INSTALLED_APPS
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/home/james/virtualenv/hydrogen/local/lib/python2.7/site-packages/django/conf/__init__.py", line 135, in __init__
    logging_config_func(self.LOGGING)
  File "/usr/lib/python2.7/logging/config.py", line 777, in dictConfig
    dictConfigClass(config).configure()
  File "/usr/lib/python2.7/logging/config.py", line 575, in configure
    '%r: %s' % (name, e))
ValueError: Unable to configure handler 'db_search_log': Unable to configure handler 'db_search_log': 'module' object has no attribute 'handlers' 
```

▾

```
db_logger/                                                                                                                                                                                                
    __init__.py                
    __init__.pyc
    handlers.py
    handlers.pyc
    log_handlers.pyc
    models.py
    models.pyc
    router.py
    router.pyc
    tests.py
    views.py 
```

感谢@istruble 指出这是由于循环导入设置，我怎样才能避免它并仍然登录到数据库模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:08:05.587

我刚刚想出了另一种使用延迟导入实现它的更规范的方法，我最初的问题是尝试在**init**函数中导入模型：

```
from logging import Handler

class DBHandler(Handler,object):
    model_name = None

    def __init__(self, model=""):
        super(DBHandler,self).__init__()
        self.model_name = model

    def emit(self,record):
        # instantiate the model
        try:
            model = self.get_model(self.model_name)
        except:
            from logger.models import GeneralLog as model

        log_entry = model(level=record.levelname, message=self.format(record))

        log_entry.save()

    def get_model(self, name):
        names = name.split('.')
        mod = __import__('.'.join(names[:-1]), fromlist=names[-1:])
        return getattr(mod, names[-1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T22:34:20.710

我有一个解决方法，我承认它看起来像一个 hack，它在实际记录点使用模型注入，像这样

```
from logging import Handler

class DBHandler(Handler,object):
    def __init__(self):
        super(DBHandler, self).__init__()

    def emit(self,record):
        model = record.model
        log_entry = model(level=record.levelname, message=record.msg)
        log_entry.save() 
```

并通过执行以下操作将其记录到正确的模型：

```
import logging
import logger.models.TheModel

logger = logging.getLogger(__name__)
logger.info(123, extra={'model':TheModel}) 
```

# windows-phone-7 - 如何获取推特趋势列表

> ID：12452906
> 
> 赞同：0
> 
> 时间：2012-09-17T03:44:24.607
> 
> 标签：windows-phone-7, twitter

我一直在尝试获取 twitter 趋势，但我不确定如何使用 json 来做到这一点。我也没有找到任何可以成功完成此任务的好的教程。到目前为止，我一直在使用 Hammock 来获取我的状态、提及等。有没有完全描述如何做到这一点的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:52:44.763

最好的方法是使用[Twitter 官方 API (JSON)](https://dev.twitter.com/docs/api/1/get/trends/available)。你可以看看[例子](https://api.twitter.com/1/trends/available.json)。

无论如何，我找到了一个可能对您有所帮助的链接：[Windows Phone 7 – Asynchronous Programming](http://blog.csainty.com/2010/10/windows-phone-7asynchronous-programming.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:54:44.277

您所要做的就是使用[这个 API 方法](https://dev.twitter.com/docs/api/1/get/trends/available)，使用未经身份验证的 HTTP 请求。

鉴于您是初学者，这里有一些入门提示：

*   [如何执行 HTTP 请求](http://dandesousa.com/2010/08/30/windows-phone-7-making-an-http-request/)
*   [使用 JSON.NET 解析 JSON](http://james.newtonking.com/pages/json-net.aspx)

# android - 尝试在 android 中获得 USSD 响应

> ID：12452910
> 
> 赞同：10
> 
> 时间：2012-09-17T03:45:08.360
> 
> 标签：android

我想找到一种从 USSD 代码中获得响应的方法。

我已经找到了这些链接[实现 USSD 功能。将服务绑定到 PhoneUtils 而无需在每次更新时重新启动手机](https://stackoverflow.com/questions/10722178/android-implementing-ussd-features-binding-a-service-to-the-phoneutils-withou) 和 [https://play.google.com/store/apps/details?id=com.iba.ussdchecker&hl=en](https://play.google.com/store/apps/details?id=com.iba.ussdchecker&hl=en.I) 。我发现了很多关于获取 USSD 响应的相关问题但问题没有完整的答案。

我正在使用索尼爱立信 Xperia Ray。我只在手机屏幕上找到了弹出消息。我没有从后台得到任何响应代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T18:56:49.067

不幸的是，没有通用的解决方案。由于安全原因，它被限制了。

# linux-kernel - 当我打印一个在用户空间中初始化的 char * 时会发生什么？

> ID：12452912
> 
> 赞同：0
> 
> 时间：2012-09-17T03:45:20.777
> 
> 标签：linux-kernel, system-calls, kernel, printk

我实现了一个新的系统调用作为介绍练习。它所做的只是接收一个缓冲区并打印该缓冲区。后来我了解到正确的做法是使用 copy_from_user。

这只是验证地址的预防措施，还是我的系统调用导致了一些我看不到的错误（页面错误？）？

如果这只是一种预防措施，那么它可以防止什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T03:58:04.513

有几个原因。

1.  一些架构采用分段内存，其中有一个单独的段用于用户内存。在这种情况下，`copy_from_user`对于实际获得正确的内存地址至关重要。
2.  内核可以访问所有内容，包括（几乎按照定义）许多特权信息。`copy_from_user`如果用户传入内核地址，则不使用可能会导致信息泄露。更糟糕的是，如果您在没有 的情况下写入用户提供的缓冲区`copy_to_user`，则用户可能会覆盖内核内存。
3.  你想防止用户仅仅通过传入一个错误的指针来使内核模块崩溃；using`copy_from_user`可以防止错误，例如系统调用处理程序可以返回`EFAULT`以响应错误的用户指针。

# python - {0,1} Every5-Two0 的确定性有限自动机

> ID：12452914
> 
> 赞同：1
> 
> 时间：2012-09-17T03:45:45.237
> 
> 标签：python, dfa

问题：

定义一个 DFA，它接受 {0,1} 上的所有字符串，这样五个连续位置的每个块都至少包含两个 0。请仔细阅读问题。问问自己：这是否允许 e (epsilon (empty string)) 被接受？0101怎么样？这样的英文描述可以在各种书籍中找到，我想确保您知道如何阅读和解释。

讲师提示：““5 块”DFA 可以通过编程方式轻松生成。我两种方式都可以（手动和编程方式）。因为我擅长 Emacs 和键盘宏，我什至可以手动完成' 机械且相当快。但程序化不太容易出错且紧凑。“

* * *

我把这件事画出来了，我认为我做错了，因为它已经失控了。

我在 python 中制作 DFA 之前的草图： ![在此处输入图像描述](../Images/1274370ea19ff884615171e396e772a1.png)

但是，这是不对的，因为索引 2、3、4、5 和 6 构成了一个由五个连续位置组成的块，所以我需要在其中考虑至少两个零。哦，太好了，我一直认为它需要两个 1，而不是两个 0。我会以完全错误的方式解决这个问题吗？因为按照我的想法，这将有大量的状态。

（回到画这个大的 DFA）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:43:46.587

我要解决的方法是为每个可能的 5 位字符串定义一个状态，代表看到的最后 5 位。从代表 00000 的状态开始，自然地从一个状态移动到另一个状态，并用 2 个或多个零标记每个状态为接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:33:35.207

如果你想用老派的方式来做：

```
def check(s):
    buffer = s[:5]
    i = 5
    count0, count1 = 0, 0
    while i < len(s):
        if len(buffer) == 5:
            first = buffer[0]
            if first == '0':
                count0 -= 1
            else:
                count1 -= 1
            buffer = buffer[1:]
        buffer += s[i]
        if buffer[-1] == '0':
            count0 += 1
        else:
            count1 += 1
        if count0 < 2:
            return "REJECT"
        i += 1
    if buffer.count('0') >= 2:
        return "ACCEPT"
    else:
        return "REJECT" 
```

稍微聪明一点的方法：

```
def check(s):
    return all(ss.count('0')>=2 for ss in (s[i:i+5] for i in xrange(len(s)-4))) 
```

上述方法的详细代码：

```
def check(s):
    subs = (s[i:i+5] for i in xrange(len(s)-4))
    for sub in subs:
        if sub.count('0') < 2:
            return "REJECT"
    return "ACCEPT" 
```

尚未测试此代码，但它应该可以工作。你的教授可能想要第三种方法。

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T04:56:21.093

实际上有~~11~~ 16 个状态，包括单个拒绝状态。这些状态对应于最多四个字符的历史记录，在最近的第二个零处被截断。只需要四个字符，因为转换构成了块中的第五个字符；如果转换字符不是 0 并且四字符历史中没有两个零，则转换失败。

我手动生成了转换，因为键入比编写 Python 更快，所以我将把广义 (k, n)（n 块中的 k 个零）问题留作编码练习。（我在州名中插入了 x 以使其更好地排列。）

```
sxx00 (0)->sxx00 (1)->sx001
sx001 (0)->sx010 (1)->s0011
sx010 (0)->sxx00 (1)->s0101
s0011 (0)->s0110 (1)->s0111
s0101 (0)->sx010 (1)->s1011
s0110 (0)->sxx00 (1)->s1101
s0111 (0)->s1110 (1)->sFAIL
s1011 (0)->s0110 (1)->sFAIL
s1101 (0)->sx010 (1)->sFAIL
s1110 (0)->sxx00 (1)->sFAIL
sFAIL (0)->sFAIL (1)->sFAIL 
```

[编辑]：这实际上不太正确，因为（当我阅读问题时）应该接受字符串 '1111'。（其中每个五个字符的块都有两个零，很简单，因为没有五个字符的块。）所以还有一些额外的启动状态：

```
start (0)->sxx00 (1)->s1
s1    (0)->sx010 (1)->s11
s11   (0)->s0110 (1)->s111
s111  (0)->s1110 (1)->s1111
s1111 (0)->sFAIL (1)->sFAIL 
```

看起来很像 sFAIL 的最后一个状态是不同的，因为它是一个接受状态。

# silverstripe - Silverstripe 3：小部件错误中的 has_one 图像

> ID：12452923
> 
> 赞同：2
> 
> 时间：2012-09-17T03:49:30.480
> 
> 标签：silverstripe

我正在为我正在处理的项目创建一些小部件，似乎小部件无法从小部件外部访问任何其他类。我尝试为图像和 SiteTree 类添加一个 has_one 静态（参见下面的图像示例），当我尝试添加 cms 字段时遇到相同的错误：致命错误：调用成员函数 FormAction()第 139 行 /..../sapphire/forms/FormField.php 中的非对象

```
<?php
class AdBoxWidget extends Widget{
    static $title = "";
    static $cmsTitle = "Ad Box Widget";
    static $description = "Ad Box widget. To add an image, Title and Link";

    static $db = array(
        "Title" => "Text",
        "Link" => "Text",
        "AdLinkText" => "Text"
    );

    static $defaults = array(
        "Title" => 'Ad Title',
        "Link" => 'http://',        
        "AdLinkText" => 'Click here for more info',
    );

    static $has_one = array(
        'AdImage' => 'Image'
    );

    function getCMSFields(){
        return new FieldList(
            new TextField("Title", "Ad Title"),
            new TextField("Link", "Ad Link"),
            new TextField("AdLinkText", "Text for Link"),
            new UploadField("AdImage", "Ad image")
        );
    }

    function getAd(){
        $output = new ArrayList();
        $output->push(
            new ArrayData(
                array(
                    "Title" => $this->Title,
                    "Link" => $this->Link,
                    "AdLinkText" => $this->AdLinkText
                )
            )
        );
        return $output;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:11:47.470

为防止出现这种情况，您可以从一个 Ad 中创建一个 DataObject。
提供 ModelAdmin 来编辑广告数据对象。

在您的小部件中，您可以只使用带有 DropDownField 的 has_one 来选择小部件的广告。

这不会解决小部件模块的实际问题，但它可以解决。

# google-app-engine - Google App Engine Entity.getProperty 返回中文为？

> ID：12452924
> 
> 赞同：0
> 
> 时间：2012-09-17T03:50:24.973
> 
> 标签：google-app-engine, character-encoding

将一条记录插入到 GAE 数据存储中，中文是可以的，从 GAE 管理控制台“数据存储查看器”中，如[链接](https://appengine.google.com/datastore/explorer?&app_id=s~andrewwang1-app&version_id=3.361798798511158961)。

但是如果我从 servlet 浏览它，中文显示为“????”。servlet 代码为

```
resp.setContentType("application/json; charset=utf-8");
...
Entity e = entities.iterator().next();      
String d = (String) e.getProperty("date");
String c = (String) e.getProperty("course");                    
resp.getWriter().println(d + " " + c); 
```

真的很麻烦我，任何线索都有帮助。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:34:34.520

这是开发服务器管理页面的一个已知缺陷。

您的代码或数据没有任何问题，只是数据在开发服务器管理页面中的显示方式。我对斯洛文尼亚人的角色也有同样的看法，但在制作中一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:39:47.523

它在 Google App Engine 上，而不是在开发服务器上。但最后我知道为什么我忘记在 Servlet doGet() 方法中调用 super.doGet() 了。

之后中文就正常显示了...

顺便说一句，谢谢...

# database - 音乐流媒体网站 (Grooveshark) 播放列表，存储在本地还是在服务器上？

> ID：12452925
> 
> 赞同：1
> 
> 时间：2012-09-17T03:50:51.040
> 
> 标签：database, database-schema

我正在建立一个音乐流媒体网站，很像grooveshark.com，我对如何实现播放列表功能有点迷茫。

该网站对公众开放，这意味着您不必创建帐户即可使用播放列表功能。那么当用户开始构建播放列表时，我应该将其存储在本地还是服务器上？以前，我构建它以将所有内容本地存储在 cookie 上，但由于 cookie 限制，我认为这不是正确的方法（而且它很hacky）。

那么我应该在服务器上创建一个播放列表并在每次用户添加/删除/跳过/暂停/等音乐时与之交互吗？数据库结构是什么样的？每当访问者开始构建播放列表时创建 GUID 播放列表，将 GUID 本地存储在用户的计算机 cookie 上并使用它与服务器通信？

# lisp - Racket Lisp：new-if 和 if 之间的比较

> ID：12452927
> 
> 赞同：4
> 
> 时间：2012-09-17T03:51:50.093
> 
> 标签：lisp, scheme, racket, sicp

```
(define (sqrt-iter guess x)
    (if (good-enough? guess x)
        guess
        (sqrt-iter(improve guess x)
                  x)))

(define (improve guess x)
  (average guess(/ x guess)))

(define (average x y)
  (/ (+ x y) 2))

(define (good-enough? guess x)
  (< (abs (- (square guess) x)) 0.0001))

(define (square x)
  (* x x))

(define (sqrt-g x)
  (sqrt-iter 1.0 x)) 
```

这是一个用于 sqrt 的程序。问题是当您尝试使用 new-if 将 if 替换为 new-if 时会发生什么。

```
(define (sqrt-iter guess x)
    (if (good-enough? guess x)
        guess
        (sqrt-iter(improve guess x)
                  x))) 
```

这是新的，如果

```
 (define (new-if predicate then-clause else-clause)
      (cond (predicate then-clause)
            (else else-clause))) 
```

我的意见是两个程序的结果是一样的。因为 new-if 和 if 可以产生相同的结果。

但是，new-if 被证明是错误的，因为当我尝试时它是一个死循环。

所以为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T04:35:44.037

`new-if`是一个函数。函数的所有参数都在调用函数*之前*进行评估。但是`sqrt-iter`是一个递归函数，你需要避免在参数已经足够好的情况下进行递归调用。

内置`if`is 语法，并且仅根据条件的值评估 then-branch 或 else-branch。

您可以使用宏来编写`new-if`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T09:43:28.690

这是演示代数步进器的完美示例！在代数步进器中，您可以看到计算过程与您的预期有何不同。在这里，您必须注意例如 (new-if 1 2 3) 和 (if 1 2 3) 的评估差异。

如果您之前没有尝试过代数步进器，请查看此[答案](https://stackoverflow.com/questions/10499514/y-combinator-discussion-in-the-little-schemer/10500358#10500358)以了解它的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-03T23:14:38.797

`new-if`由于球拍是一个应用程序，因此is的第三个参数`(sqrt-iter(improve guess x) x))`。由于`sqrt-iter`是递归的，因此第三个参数永远不会分配给它的值。因此，您永远不会进入`new-if`评估函数的过程。

# java - JDBC 是否采取任何措施保护我的密码和用户名不被嗅探？

> ID：12452928
> 
> 赞同：3
> 
> 时间：2012-09-17T03:52:00.167
> 
> 标签：java, mysql, security, jdbc

我正在为我设置的数据库做前端工作，我想知道如果我只使用这段代码，如果有人在嗅探，我的密码和用户名会以纯文本形式显示吗？

```
String url = "jdbc:mysql://" + address + "/table";
String user = user_Name;
String password = complete_Password;

Connection conn = null;
try {
    conn = DriverManager.getConnection(url, user, password);
    return conn;
} catch (SQLException ex) {
    System.out.println(ex);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:11:17.080

这取决于 JDBC 驱动程序是如何实现的，MySQL JDBC 驱动程序不会以明文形式传输您的密码。[您可以在MysqlIO](http://www.docjar.com/html/api/com/mysql/jdbc/MysqlIO.java.html)类中看到这种情况（查找`changeUser`方法）。

[您还可以在其客户端-服务器协议文档](http://dev.mysql.com/doc/internals/en/authentication-method.html#packet-Authentication%3a%3aNative41)中查看 MySQL 提供的各种类型的身份验证（包括非常不安全的明文密码）。

我严重怀疑任何供应商生产的数据库驱动程序都会通过网络以明文形式发送您的密码数据。至少我知道 MySQL 和 PosgreSQL JDBC 驱动程序不会这样做。例如，PostgreSQL 会生成密码的哈希值并发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:02:01.030

JDBC 只是一个 API。每个 JDBC 驱动程序实现都是不同的，因此这取决于您使用的特定驱动程序。

# java - 这条线的问题 transport.call(Soap_Action,envelope); 调试器在这里停止。安卓网络服务

> ID：12452929
> 
> 赞同：1
> 
> 时间：2012-09-17T03:52:07.187
> 
> 标签：java, android, web-services, axis2, tomcat7

这是我的 Android main.java 我从这里调用 web 服务。但是我有一些问题，但我不知道哪个是失败的。我正在使用 android 调试器，但它在 transpor.call() 行中停止...

谢谢大家

```
package org.exa.prueba2android;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;

import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;

import android.widget.TextView;

public class Main extends Activity {

    private static final String accionSoap="http://CartaWS.restaurante.org/showItems";
    private static final String Metodo = "showItems";
    private static final String namespace="http://CartaWS.restaurante.org";
    private static final String url="http://192.168.2.5:8080/CartaWSPrueba/services/CartaWS.CartaWSHttpSoap11Endpoint/";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv = (TextView) findViewById(R.id.text);

        try{

            SoapObject request= new SoapObject(namespace, Metodo);
            //modelo sobre
            SoapSerializationEnvelope sobre = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            sobre.dotNet = true;
            sobre.setOutputSoapObject(request);

            HttpTransportSE transporte = new HttpTransportSE(url);
            //LLAMADA 

            //   **HERE IS THE PROBLEM**

             transporte.call(accionSoap, sobre)`;

        //Result
        SoapPrimitive result = (SoapPrimitive)sobre.getResponse();
        tv.setText("BEBIDAS: "+result.toString());

        } catch (Exception e){}

    }

} 
```

我正在使用 Tomcat7、axis2、java、android、ksoap 2.6.1。Android 调试器停在这一行

```
transporte.call(accionSoap, sobre); 
```

或者下一个

```
SoapPrimitive result = (SoapPrimitive)sobre.getResponse(); 
```

我是新来的，谢谢你所做的一切。

# java - 什么是 Android/Java 中的“被动数据结构”？

> ID：12452930
> 
> 赞同：16
> 
> 时间：2012-09-17T03:52:30.817
> 
> 标签：java, android

从 Android 开发者网页链接： http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)，你可以发现它说“它（Intent）基本上是一个被动的数据结构，持有一个抽象描述要执行的操作。” 但我不明白什么是“被动数据结构”？谁能帮忙解释一下？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T04:01:34.023

被动数据结构（与*主动数据结构*或*功能数据结构*相反）是由外部线程专门管理的数据结构。也就是说，它没有一些关联的线程对其执行操作。

基本上，它就像一个信息容器；您创建它，设置它的所有信息，它只是为了被其他进程（在 Android 中`Activity`，通常是对象）访问而存在。因此，它不是主动访问（因此它不是“主动”），并且它没有被操作（不是“功能性”），所以它应该被认为是被动的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T04:00:19.427

我认为这个想法是 Intent 不知道如何进行*活动*，它只包含*描述*需要做什么的信息。由接收者使用 Intent 的信息实际执行操作。因此，Intent 对于所产生的动作是“被动的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:00:52.683

Intent 不代表一个动作，它只代表一个动作的意图，所以它只描述一个动作，因此它是一个被动的数据结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-21T19:21:24.373

引用[NIST 算法和数据结构词典](https://xlinux.nist.gov/dads//HTML/passiveDataStruc.html)

*   **被动数据结构**是一种只能由外部线程或进程更改的数据结构
*   **活动数据结构**是一种数据结构，它执行内部操作以给出另一个数据结构的外部行为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-10T02:57:51.207

被动数据结构 (PDS) 是一个仅保存数据的对象。该数据由其他消息处理。你可以说它是一个传输对象，它从一个对象传递到另一个对象。有时，在 Java 中，具有 getter/setter（或 mutator）方法的 POJO 对象被视为 PDS 对象，但它们不是。它们打破了封装规则，不考虑 PDS 对象。

即使在 Android 中，Intent 类也只是保存数据但不处理它。

请参阅此链接以获得更清晰的信息： [https ://en.wikipedia.org/wiki/Passive_data_structure](https://en.wikipedia.org/wiki/Passive_data_structure)

# adobe - Adobe Livecycle Designer 中的客户端 javascript 代码通过在数字字段中输入数字来增加表中的行数

> ID：12452931
> 
> 赞同：-2
> 
> 时间：2012-09-17T03:52:42.863
> 
> 标签：adobe

请任何人向我提供 Adob​​e Livecycle Designer 中的客户端 JavaScript 代码，以便在数字字段中输入数字时增加表中的行数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:45:18.380

在 JavaScript 中类似于：

```
for (var i=0; i<NumberFieldName.rawValue; i++) {
   TableName._RowName.addInstance(0);
} 
```

# ssh - 腻子选美协议？

> ID：12452933
> 
> 赞同：8
> 
> 时间：2012-09-17T03:52:45.943
> 
> 标签：ssh, putty, ssh-agent, pageant

ssh-agent 有一个协议，可以将数据发送给它以由特定的私钥签名：

[http://api.libssh.org/rfc/PROTOCOL.agent](http://api.libssh.org/rfc/PROTOCOL.agent)

在 Linux 中，使用 ssh-agent，您可以打开一个 Unix 域套接字到 SSH_AUTH_SOCK 并将数据包发送到该套接字。但是，Windows 没有 Unix 域套接字。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T05:12:52.800

putty 和 pageant 之间的通信是使用 WIN32 API 在共享内存上完成的。我已经使用 JNA 在 Java 中实现了该协议。如果你对它的协议感兴趣并想了解它是如何在 Windows 上运行的，下面的文件可能会有用，

[https://github.com/ymnk/jsch-agent-proxy/blob/master/jsch-agent-proxy-pageant/src/main/java/com/jcraft/jsch/agentproxy/connector/PageantConnector.java](https://github.com/ymnk/jsch-agent-proxy/blob/master/jsch-agent-proxy-pageant/src/main/java/com/jcraft/jsch/agentproxy/connector/PageantConnector.java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T17:54:02.957

如果您在 C 中实现协议，您可能会参考[规范的 PuTTY 实现](https://github.com/Yasushi/putty/blob/master/windows/winpgntc.c#L155)。如果您在 Python 中实现它，paramiko 项目[实现了 Putty Pageant 协议](https://github.com/paramiko/paramiko/blob/master/paramiko/win_pageant.py)。

就我所知，协议是相同的，但传输方式不同，使用共享内存而不是套接字。

# magento - 如何在magento中制作条件？

> ID：12452936
> 
> 赞同：1
> 
> 时间：2012-09-17T03:53:32.590
> 
> 标签：magento

现在，我想在用户注册我的网站时输出一些东西，如何制作条件，即：

```
If() 
```

如果用户注册我的网站，则在页面上回显某些内容。例如：

当用户未在我的网站上注册时，页面会回显“test”。如果他在我的网站上注册，则回显“你好”。但是当他第二次登录我的网站时，页面也应该回显“test”。

条件如何。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:26:13.297

尝试这个

```
if(Mage::helper('customer')->isLoggedIn()){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:49:46.560

据我了解，捕获登录事件可能对您想要实现的目标有用。请参阅[此详细教程](http://inchoo.net/ecommerce/magento/custom-magento-events-customer-first-order/)，了解如何做与您正在尝试的事情非常相似的事情。在这种情况下，他们为客户的第一笔订单提供奖励。

我一直在为一项更大的任务而苦苦挣扎，而我的中间步骤之一是捕捉一个事件，这是我通过遵循之前发布的链接完成的。这非常有用。

这是[我关于 subjetct](https://stackoverflow.com/questions/12364478/magento-redirect-from-adminthtml-page-to-a-frontend-action)（捕获事件和重定向）的问题之一，也许它也可以帮助你。

# sql - 使用当前年份而不是在 Oracle 中硬编码

> ID：12452937
> 
> 赞同：0
> 
> 时间：2012-09-17T03:54:21.097
> 
> 标签：sql, database, oracle, date-arithmetic

这是一个正确且有效的声明：

```
SELECT purch_id AS PURCH_ID
       ,TO_DATE('25-DEC-12') - purch_date AS DAYS_TO_CHRISTMAS
FROM CS260USER.candy_purchase; 
```

我想修改它，而不是在表达式末尾硬编码 2012（或 12），我希望它抓住当前的系统年份并在最后拍打那个傻瓜。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:24:23.300

```
SELECT purch_id AS PURCH_ID,
       (trunc(sysdate,'yyyy') +
          interval '11' month +
          interval '24' day) - purch_date AS DAYS_TO_CHRISTMAS
  FROM CS260USER.candy_purchase; 
```

将工作。你也可以通过字符串操作来做到这一点

```
SELECT purch_id AS PURCH_ID,
       to_date( '12-25-' || to_char(sysdate,'yyyy'), 'mm-dd-yyyy') 
         - purch_date AS DAYS_TO_CHRISTMAS
  FROM CS260USER.candy_purchase; 
```

我更喜欢对日期进行日期操作，并对字符串进行字符串操作，尽管这里的字符串操作可能更清楚。

# c++ - 虚拟函数不返回具有多级继承的派生类型

> ID：12452941
> 
> 赞同：2
> 
> 时间：2012-09-17T03:55:38.427
> 
> 标签：c++, inheritance, virtual-functions

我有一个具有多个继承级别的类层次结构。

1.  `cloneable`声明一个纯虚成员函数返回`cloneable *`.
2.  `base`派生自`cloneable`，但不声明任何成员函数。
3.  最后，从虚函数`derived`派生`base`并定义，但将返回类型覆盖为`derived *`.

通过`base`指向`derived`对象的指针调用虚函数返回`cloneable *`。我期待`base *`，因为虚函数的实现返回`derived *`可转换为`base *`. 这里发生了什么？

如果我在 中声明纯虚函数`base`，我终于可以`base *`从中得到，但我不明白为什么这个声明是必要的。

代码：

```
struct cloneable
{
  virtual cloneable * clone() = 0;
};

struct base : cloneable 
{
// virtual base * clone() = 0;    // this line resolves the compile error
};

struct derived : base
{
  virtual derived * clone () { return new derived; }
};

int main(int, char**)
{
  derived d;
  base * bp = &d;
  base * bbp = bp->clone();  // error: invalid conversion 
                             // from ‘cloneable*’ to ‘base*’      
  return 0;  
} 
```

注意：我故意省略了虚拟析构函数以缩短代码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:01:04.463

你认为编译器应该如何猜测你想要一个返回 a 的版本`base*`，没有任何声明？

* * *

虽然上述问题回答了您的直接问题，但我觉得我还应该添加一些建议。

首先，

*   做这个`clone`函数`const`，以便可以在`const`对象上或通过右值表达式调用它。

IE，

```
virtual cloneable* clone() const; 
```

其次，要创建对象的*克隆*，

*   返回`new T( *this )`（使用复制构造函数），而不是`new T`（使用默认构造函数）。

第三，

*   为了安全起见，对于公开可用的`clone`操作，返回一个智能指针，例如 a `unique_ptr<MyClass>`，而不是原始指针。

但是，随着返回类型更改为智能指针，您将不再直接受益于 C++ 对**协变函数结果**的支持，后者仅适用于原始指针和引用。因此，一种方法是使用非`public`原始指针结果实现，它可以具有协变结果类型，并且只是一个`public`返回智能指针的类型化包装器。实际上，您正在自己实现公共接口的协方差，它看起来像这样：

```
#include <memory>       // std::unique_ptr
using namespace std;

class Base
{
private:
    virtual Base* virtualClone() const
    {
        return new Base( *this );
    }

public:
    unique_ptr< Base > clone() const
    {
        return unique_ptr< Base >( virtualClone() );
    }
};

class Derived
    : public Base
{
private:
    virtual Derived* virtualClone() const
    {
        return new Derived( *this );
    }

public:
    unique_ptr< Derived > clone() const
    {
        return unique_ptr< Derived >( virtualClone() );
    }
};

int main()
{
  Derived d;
  Base* bp = &d;
  unique_ptr< Base > bbp = bp->clone();
} 
```

# image-processing - 从图像中去除胡椒噪声和盐噪声

> ID：12452942
> 
> 赞同：2
> 
> 时间：2012-09-17T03:55:43.840
> 
> 标签：image-processing, computer-vision

我正在尝试在 Matlab 中处理带有盐噪声和胡椒噪声的图像。

哪个过滤器：`median`、、`opening`或`closing`在去除盐噪声（白色像素）方面表现最好？

哪一个最适合胡椒噪声（黑色像素）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:01:41.563

中值滤波器应该对椒盐噪声都有好处，因为它们出现在随机像素上。打开和关闭也会影响其他物体，因此它们不是去除盐和胡椒的一般方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T17:57:15.963

**开**- 是 和 的复合`dilation`函数`erosion`。这意味着它是先腐蚀后膨胀。侵蚀的意思是，如果我们有一个结构元素 a `3 X 3 matrix`，中心像素将被 中最暗的像素代替`3 X 3 neighborhood`。打开是先腐蚀后膨胀，这使其**非常适合去除盐噪声（白点）**并确保关键特征相对清晰。

**关闭**是膨胀，然后是腐蚀。膨胀意味着中心像素将被附近最亮的像素（过滤器结构元素）替换。**非常适合去除胡椒噪音**并确保关键特征相对清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:26:23.650

使用简单的自适应`median`滤波器：
对于`pixels`图像中的所有
像素，如果黑色或白色像素用其邻居的中值替换像素。

当然有更好的方法，但它们更复杂。

欢呼

# asp.net-mvc - Json.Encode MVC4

> ID：12452944
> 
> 赞同：3
> 
> 时间：2012-09-17T03:56:38.160
> 
> 标签：asp.net-mvc, json, visual-studio-2010, asp.net-mvc-4

简单的问题 - 我目前正在测试 MVC4，并注意到我可以在任何视图中使用 Json.Encode 方法（**而不是**控制器中的 Json 方法）。

命名空间 (System.Web.Helpers) 应该在 web.config 中，并且简单地直接引用对象是行不通的。

引用在项目的引用列表中，但是查看 Json 对象的库也不存在。

我尝试再次添加 System.web.helpers 库，它添加了 Json 对象但是无法访问它。

任何帮助将非常感激

# sql-server-2008 - ADO 连接字符串错误

> ID：12452946
> 
> 赞同：0
> 
> 时间：2012-09-17T03:57:09.730
> 
> 标签：sql-server-2008, connection-string, ado

对不起，混乱的前景。这基本上是一个用于 ASP 网站的 .inc 文件。目前，我们已经从当前的 MySQL 迁移到 MSSQL 2008。在 MySQL 中，我能够连接到数据库。但我无法在 MSSQL 2008 下连接它。该脚本在 MySQL 中运行良好。请帮忙。

`Information 1 : I'm using Dreamweaver.`

`Information 2 : I have tried strConnect = "Provider=sqloledb;Library=DBMSSOCN;Data Source=xx.xx.xx.xx;1433; Initial Catalog=mydatabasename;User Id=userID;Password=password;"`

`Information 3 : I can't access to the database thru the website, this is the error msg i get 500 - Internal server error. There is a problem with the resource you are looking for, and it cannot be displayed.`

`Information 4 :i'm lost for ideas. I searched everywhere in http://www.connectionstrings.com/sql-server-2008, http://support.microsoft.com/kb/238949, still no luck.`

`Information 5 : I have tried using .udl file to get the connection string. Whenever i test connection, it works perfectly shows connection passed`

```
`<% On Error Resume Next
Set objConn = Nothing
strConnect = "Provider=sqloledb;Network Library=DBMSSOCN;Data Source=ABC-EF-SQLS01"
    "Initial Catalog=mydatabasename;"
    "User Id=userID;Password=password;" 
Set objConn = Server.CreateObject("ADODB.Connection")
objConn.Open strConnect

Function UserIP()

    UserIP = Request.ServerVariables ( "HTTP_X_FORWARD_FOR" )

    If UserIP = "" Then

        UserIP = Request.ServerVariables ( "REMOTE_ADDR" )

    End If

End Function 

Function BinaryToString(Binary)

  Dim cl1, cl2, cl3, pl1, pl2, pl3
  Dim L
  cl1 = 1
  cl2 = 1
  cl3 = 1
  L = LenB(Binary)

  Do While cl1<=L
    pl3 = pl3 & Chr(AscB(MidB(Binary,cl1,1)))
    cl1 = cl1 + 1
    cl3 = cl3 + 1
    If cl3>300 Then
      pl2 = pl2 & pl3
      pl3 = ""
      cl3 = 1
      cl2 = cl2 + 1
      If cl2>200 Then
    pl1 = pl1 & pl2
    pl2 = ""
    cl2 = 1
      End If
    End If
  Loop
  BinaryToString = nl2br(pl1 & pl2 & pl3)
End Function

Function nl2br(str)
    If Not isNull(str) Then
        nl2br=replace(str,VbCrLf, "<br >&nbsp; ")
    End If
End function

Function AddZeros(str)

    iLength = len(str)
    iZeros = 9 - iLength

    For i=1 to iZeros

        str = "0" & str

    Next

    AddZeros = "<font color=green><b>AKC-"&str&"</b></font>"

End Function

Function DisplayDateFormat(str)
    arrDate = Split(CStr(str),"/")
    DisplayDateFormat = arrDate(1)&"-"&arrDate(0)&"-"&arrDate(2)

End Function

Function DBDateFormat(str)

End Function

Function doubleQuote(ByVal fixText)
    doubleQuote = Replace(fixText, "'", "''")
End Function 
```

%>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T01:07:13.357

应该

提供者=sqloledb；网络库=DBMSSOCN；数据源=xx.xx.xx.xx,1433

注意显式端口和网络字的逗号。

虽然最好只使用 Data Source=xxxx;

并通过 cliconfg 中的 xxxx 别名设置网络库细节

# image-processing - 内核大小对中值滤波器的影响？

> ID：12452949
> 
> 赞同：0
> 
> 时间：2012-09-17T03:57:28.690
> 
> 标签：image-processing, computer-vision

应用中值滤波器时内核大小的直接影响是什么？

在 a 的情况下会发生什么变化`3 X 3 kernel size`，`5 X 5 kernel size`或者`9 X 9 kernel size`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:18:59.180

它在一定程度上取决于滤镜孔径的形状（通常为方形或圆形），但基本上图像中小于孔径尺寸的特征会被滤除，而图像中大于孔径尺寸的特征之间会保留相对锐利的边缘。

与边缘不同，中值滤波器不能很好地保留角点，并且往往会模糊到与中值滤波器大小成正比的程度。

# ssl - httpd.conf 和 ssl.conf 的区别

> ID：12452950
> 
> 赞同：5
> 
> 时间：2012-09-17T03:57:48.810
> 
> 标签：ssl, apache, httpd.conf

`httpd.conf(/etc/httpd/conf/httpd.conf)`和`ssl.conf(/etc/httpd/conf.d/ssl.conf)`文件有什么区别？

我正在尝试在我的网站上设置 ssl，发现这些文件具有相似的令牌。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T04:30:25.503

`httpd.conf`可以划分为单独的文件，例如，将 ssl 配置分隔为`ssl.conf`.

因此，如果您将 ssl 配置放入其中，它也会起作用`httpd.conf`，但最好放入`ssl.conf`.

# iphone - 来自子类的 NSArray v. 视图控制器中的 NSArray

> ID：12452951
> 
> 赞同：0
> 
> 时间：2012-09-17T03:57:49.553
> 
> 标签：iphone, objective-c, xcode

我有两个班级： `GHHaiku`和`GHViewController`。在`GHHaiku`，我声明`@property (nonatomic, strong) NSArray *arrayAfterFiltering;`。

在`GHViewController`我实例`GHHaiku`化为`@property (nonatomic, strong) GHHaiku *ghhaiku;`，然后稍后使用以下代码：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"category == %@", cat];
        NSArray *filteredArray = [self.haiku filteredArrayUsingPredicate:predicate];  //haiku is an NSMutableArray property of `GHViewController`
        NSLog(@"%d",filteredArray.count); 
```

这里的 NSLog 产生正确的计数，116。

但是当我使用下面的代码时，

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"category == %@", cat];
        self.ghhaiku.arrayAfterFiltering = [self.haiku filteredArrayUsingPredicate:predicate];
        NSLog(@"%d",self.ghhaiku.arrayAfterFiltering.count); 
```

NSLog 产生的计数为 0。

为什么这有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:06:18.857

问题是当你说你实例化`@property (nonatomic, strong) GHHaiku *ghhaiku`. 你没有。你所做的就是声明财产。所以你有财产，但财产没有价值；它是零。nil 也是如此`self.ghhaiku`，在您的第二个示例中，您向 nil 发送消息是徒劳的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:08:17.710

尝试做分配

```
self.ghhaiku.arrayAfterFiltering =[[NSArray alloc] initWithArray: [self.haiku filteredArrayUsingPredicate:predicate]]; 
```

# jquery - ajax gif 加载器在第二次点击后不工作，cakephp

> ID：12452953
> 
> 赞同：1
> 
> 时间：2012-09-17T03:58:04.540
> 
> 标签：jquery, ajax, internet-explorer, cakephp

我很难解决这个问题。我制作了一个网站，其中几个链接使用 ajax 将一些内容加载到 div 中。然后我设置了一个 gif 来告诉 ppl 何时加载。问题是它工作得很好，但是在 ie 中，它只在我第一次单击这些链接时加载，然后在我第二次单击链接时它不会再次显示。这里的代码：

```
 <li><?php echo $this->Js->link('Sign up', array('controller'=> 'Users', 'action'=>'add'), array('evalScripts' => true, 'before' => $this->Js->get('#busy-indicator')->effect('fadeIn', array('buffer' => false)),'complete' => $this->Js->get('#busy-indicator')->effect('fadeOut', array('buffer' => false)), 'update'=>'#center', 'class'=>'nav4')); $this->Js->get('.nav4'); $this->Js->event('click', '$(".crumb_navigation").html("Home > Sign up")'); 
```

这是视图代码：

```
<div class="center_content" id="center"><div class="center2">sdfadsf<?php echo $this->Html->image('/images/ajax-loader.gif', array('id' => 'busy-indicator')); ?></div></div> 
```

所以我想知道你们中是否有人遇到过这个问题，你的加载 gif 只加载一次（在 iexplorer 中），其余时间你点击链接，没有任何反应。但在任何其他浏览器中都能完美运行。

更新：

我现在已经尝试了一切，似乎没有什么能让我与 iexplorer 休息一下。我已经使用了 .on() .live() 我尝试过自己编写这段代码，而不是使用 js 助手，但它只会变得最糟糕哈哈。但并不是所有的东西都丢失了我的朋友们！！！我只需要从 appController 禁用缓存，它就开始工作了！！！

```
public function beforeFilter() {

    $this->Currency->setVal('UYU', 'USD');
    $this->disableCache();
    $description = __('The place where you can ask for things and they will come to you!');
    $this->set('description', $description);
    $this->Auth->allow('index','view','account','add');
    $this->set('usuario', $this->Auth->user('role'));

} 
```

哒哒！

# git - Git下载优化：整个office拉一次

> ID：12452957
> 
> 赞同：3
> 
> 时间：2012-09-17T03:58:25.410
> 
> 标签：git

从我们办公室到 GitHub.com 的连接通常很慢，而且文件通常很大。

有没有一种简单的方法可以只使用一台机器与 GitHub 同步，并让其他机器通过 LAN 拉到那台机器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:20:55.813

只要您的同事可以访问公共共享驱动器，就足以在一个工作站上克隆 GitHub 存储库，并在另一个工作站上多次克隆该本地存储库。

在推回 GitHub 之前，一个人可以负责整合人们对该中间仓库的贡献。

# weather - 如何在 AccuWeather 中获取城市代码天气？

> ID：12452961
> 
> 赞同：6
> 
> 时间：2012-09-17T03:59:19.253
> 
> 标签：weather

有人曾经使用 AccuWeather 搜索您所在国家/地区的天气吗？我想在 AccuWeather 中获取我的城市天气代码，谁能帮助我？生成的代码格式如下：EUR|DE|GM014|TORGAU。我找不到我的城市代码（柬埔寨金边）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T09:48:33.397

要查找您的位置，请使用 ubuntu 中帮助提供的此链接

[http://thale.accu-weather.com/widget/thale/city-find.asp?location=](http://thale.accu-weather.com/widget/thale/city-find.asp?location=)

在链接末尾添加您的位置

*[http://thale.accu-weather.com/widget/thale/city-find.asp?location=PARIS](http://thale.accu-weather.com/widget/thale/city-find.asp?location=PARIS)*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T21:55:04.613

对于金边，您寻找的代码是 ASI|KH|CB012|PHNOM PENH。

现在一般来说，获得这种旧式格式是很困难的，因为在 2009 年底 / 2010 年初，他们取消了这种编码站风格，取而代之的是一种更新的，也许更友好的模型。这么新的款式，

[http://www.accuweather.com/en/kh/phnom-penh/49785/weather-forecast/49785](http://www.accuweather.com/en/kh/phnom-penh/49785/weather-forecast/49785)

将为您提供金边的当前信息。

如果你真的真的需要找到旧式代码，这里有一个很棒的[列表](http://pastebin.com/dbtemx5F)。我建议您从此处下载列表，因为此时它是黄金，然后您可以通过编程方式访问它，但您认为合适。正则表达式将是一个不错的选择，因为格式似乎非常一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-21T00:42:09.050

在这里找到您（最近的）城市：http: [//pastebin.com/dbtemx5F](http://pastebin.com/dbtemx5F)

# javascript - 如何从 jquery-ui 滑块输入中删除美元符号？

> ID：12452964
> 
> 赞同：0
> 
> 时间：2012-09-17T04:00:32.743
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试使用 jquery-ui 滑块（[http://jqueryui.com/demos/slider/#steps](http://jqueryui.com/demos/slider/#steps)），其中滑块位置的值显示在输入框中，并且输入框值的更改重新定位滑块指数。

js片段：

```
$("#slider, ").slider({
    range: "min",
    value: 1,
    step: 4,
    min: 1,
    max: 18,
    slide: function( event, ui ) {
        $( ".slider_input" ).val( "$" + ui.value );

        //$( ".slider_input" ).val(  ui.value );
    }

   });

$(".slider_input").change(function () {
    var value = this.value.substring(1);

    $("#slider").slider("value", parseInt(value));
}); 
```

html:

```
<div id="slider"></div>

<input class="slider_input" /> 
```

但我想从输入中删除美元符号。如果我使用`$( ".slider_input" ).val( ui.value );`而不是`$( ".slider_input" ).val( ui.value );`，则手动更改输入框值不会按预期移动滑块索引位置。

如何删除美元符号并使滑块相应地工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:01:56.080

您可以使用吐功能。

```
> "$42.00".split('$')
[ '', '42.00' ]

> "$42.00".substring(1)
'42.00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:02:59.187

用于从值`replace`中删除。`$`

```
 $( ".slider_input" ).val( ui.value.replace("$","") ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:21:22.983

这是一个工作小提琴：http: [//jsfiddle.net/ranjith19/wm8Dh/5/](http://jsfiddle.net/ranjith19/wm8Dh/5/)

# sql - SQL Server 2008中公式的额外括号更改结果

> ID：12452968
> 
> 赞同：5
> 
> 时间：2012-09-17T04:00:56.580
> 
> 标签：sql, sql-server, arithmetic-expressions

在所有其他语言（通常是算术引擎）中，在相同优先级的运算符周围放置一组额外的括号不会影响结果。但最近在一个测试项目中，我注意到 MS SQL 服务器在这些情况下改变了结果。请查看下面的查询，如果您有任何想法（或 SQL Server 管理中的设置）或任何指向 MSDN 文章的链接来解释该行为，请告诉我。

```
select (0.55 * 287.61 / 0.66) calc_no_parens
,(0.55 * (287.61 / 0.66)) calc_parens
,round(0.55 * 287.61 / 0.66,2) no_paren_round
,round(0.55 * (287.61 / 0.66),2) paren_round; 
```

结果

```
Column  Record 1
calc_no_parens  239.6750000
calc_parens     239.67499985
no_paren_round  239.6800000
paren_round     239.67000000 
```

对我来说，他们中的前两个应该返回 239.675，回合应该返回 239.68。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:35:45.003

如果您将每个值声明为 ，您将获得所需的结果`Float`。

```
DECLARE @Float1 float, @Float2 float, @Float3 float;
SET @Float1 = 0.55;
SET @Float2 = 287.61;
SET @Float3 = 0.66;

select (@Float1 * @Float2 / @Float3) calc_no_parens
,(@Float1* (@Float2/ @Float3)) calc_parens
,round(@Float1 * @Float2/ @Float3,2) no_paren_round
,round(@Float1* (@Float2/ @Float3),2) paren_round; 
```

输出

```
calc_no_parens  calc_parens no_paren_round  paren_round
239.675          239.675    239.68           239.68 
```

您可能想看这篇文章：[所谓的“精确”数字根本不精确！](http://sqlblog.com/blogs/hugo_kornelis/archive/2007/10/17/so-called-exact-numerics-are-not-at-all-exact.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T04:36:21.363

我可以看到正在发生的事情，但我认为没有解决办法。

SQL 将函数的每个部分计算并存储为 SQL 数据类型（在本例中为浮点数）。

287.61/0.66 产生 435.7727272727272727272727272... SQL 将存储为浮点数以达到一定程度的准确性，但它并不准确（毕竟，它是一个浮点数）。

有关浮点数的更多信息：浮点数[是如何存储的？什么时候重要？](https://stackoverflow.com/questions/56947/how-is-floating-point-stored-when-does-it-matter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:57:35.407

Habib 的回答让我认为这必须是我的列使用的十进制数据类型。经过一番研究，我发现了这个 [Precision, Scale, and Length (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms190476%28v=sql.100%29.aspx)

正如您在那篇文章中看到的那样，除法运算显着改变了结果小数的比例和精度。然后我尝试了我的查询的变体，这次在乘法运算周围添加了额外的括号。

```
select distinct (0.55 * 287.61 / 0.66) calc_no_parens
,(0.55 * (287.61 / 0.66)) calc_parens_div
,((0.55 * 287.61) / 0.66) calc_parens_mult
,round(0.55 * 287.61 / 0.66,2) no_paren_round
,round(0.55 * (287.61 / 0.66),2) paren_round
,round((0.55 * 287.61) / 0.66,2) paren_round2; 
```

结果

```
Column              Record 1
calc_no_parens      239.6750000
calc_parens_div     239.67499985
calc_parens_mult    239.6750000
no_paren_round      239.6800000
paren_round         239.67000000
paren_round2        239.6800000 
```

因此，只要除法是公式中的最后一个运算符，我们就会得到正确的答案。它不是解决问题的方法，而是在任何未来的测试项目中学习自我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T03:51:53.250

当您使用数字 SQL 尝试动态转换它们：

{

```
SELECT 
0.55*(287.61 / 0.66) PrecisionError, 
0.55* (CONVERT(NUMERIC(24,12), 287.61) / CONVERT(NUMERIC(24,12), 0.66)) NotPrecisionError

DECLARE @V SQL_VARIANT
SET @V = 0.55*(287.61 / 0.66)

SELECT 
Value = @V
,[TYPE] = CONVERT(SYSNAME, sql_variant_property(@V, 'BaseType')) + '(' + 
          CONVERT(VARCHAR(10), sql_variant_property(@V, 'Precision')) + ',' + 
          CONVERT(VARCHAR(10), sql_variant_property(@V, 'Scale')) + ')'  

SET @V = 0.55 * (CONVERT(NUMERIC(24,14), 287.61) / CONVERT(NUMERIC(24,14), 0.66))
SELECT 
Value = @V
,[TYPE] = CONVERT(SYSNAME, sql_variant_property(@V, 'BaseType')) + '(' + 
          CONVERT(VARCHAR(10), sql_variant_property(@V, 'Precision')) + ',' + 
          CONVERT(VARCHAR(10), sql_variant_property(@V, 'Scale')) + ')' 
```

}

> **结果**

## **PrecisionError** **NotPrecisionError**

239.67499985 239.6750000000000

## **价值** **类型**

239.67499985 数字（14,8）

## **价值** **类型**

239.6750000000000 数字（38,13）

# excel - 如何公开设置 - 公开声明的变量？

> ID：12452970
> 
> 赞同：1
> 
> 时间：2012-09-17T04:00:59.677
> 
> 标签：excel, variables, vba

我有一个单独的模块来声明公共变量

```
Public ws1, ws2 As Worksheet 
```

在每个模块上，在每个过程中，我必须重复以下内容：

```
Set ws1 = Sheets("Sun")
Set ws2 = Sheets("Moon") 
```

...然后 - 编写代码。

那么，我可以在哪里以及如何设置这些变量，以便它们已经在每个模块、每个子或函数上设置 - 作为表太阳和月亮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:13:43.490

设置完成后，其他模块仍然可以使用它。所以我建议你设置它`Workbook_Open`。此外，您当前的代码没有`ws1`作为工作表进行标注，所以我建议您使用

**`Standard Module`**

```
Public ws1 As Worksheet, ws2 As Worksheet 
```

**`ThisWorkbook Module`**

```
Private Sub Workbook_Open()
Set ws1 = ThisWorkbook.Sheets("Sun")
End Sub 
```

# mdx - MDX AllMembers 不显示计算成员

> ID：12452977
> 
> 赞同：0
> 
> 时间：2012-09-17T04:01:55.227
> 
> 标签：mdx

假设我有`[Rank].[Rank]`三个成员的层次结构

```
[Rank].[Rank].&[Boss]
[Rank].[Rank].&[Manager]
[Rank].[Rank].&[Supervisor]
[Rank].[Rank].&[Serf] 
```

然后在查询中创建一个计算成员

```
MEMBER [Rank].[Rank].[Middle Managers] AS 
      [Rank].[Rank].&[Manager] + [Rank].[Rank].&[Supervisor] 
```

如果我说

```
with 

member [Rank].[Rank].[Middle Managers] AS 
           [Rank].[Rank].&[Manager] + [Rank].[Rank].&[Supervisor]

select
   {
     [Measures].[Hours] 
   }
   on 0

   , [Rank].[Rank].[Rank].ALLMEMBERS
   on 1
from 
  some_cube 
```

我没有得到 [Rank].[Rank].[Middle Managers] 出现在结果集中，但如果我使用

```
with 

member [Rank].[Rank].[Middle Managers] AS 
           [Rank].[Rank].&[Manager] + [Rank].[Rank].&[Supervisor]

select
   {
     [Measures].[Hours On Stack Overflow] 
   }
   on 0

   , [Rank].[Rank].[Rank].ALLMEMBERS + [Rank].[Rank].[Middle Managers]
   on 1
from 
  some_cube 
```

我明白了。

但我的印象是 ALLMEMBERS 包括计算成员。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:14:37.873

您的命名有点混乱（[Rank].[Rank].[Rank] vs [Rank].[Rank] 用法）；您可以尝试（注意名称中额外的 [Rank]）：

```
with member [Rank].[Rank].[Rank].[Middle Managers] AS 
           [Rank].[Rank].&[Manager] + [Rank].[Rank].&[Supervisor] 
```

[编辑] 附上你的计算。成员转换为 [Rank] 以上级别的成员工作：

```
with member [Rank].[Rank].&[Boss].parent.[Middle Managers] AS 
           [Rank].[Rank].&[Manager] + [Rank].[Rank].&[Supervisor] 
```

# java - 在一个简单的练习中被束缚

> ID：12452980
> 
> 赞同：1
> 
> 时间：2012-09-17T04:02:05.350
> 
> 标签：java, algorithm

我正在尝试解决这个练习，这似乎很容易[，](http://wcipeg.com/problem/ccc10j1)但我无法理解约束 - 规则，它说：

1.  数字可以用一只手或两只手表示；
2.  **如果数字用两只手表示，则先给出较大的数字**

    规则编号 2 我无法理解例如，如果它说 3，我有 3、2+1、1+2（这不是因为它重复），如果它说 6 我们有 6、5+1、4+2， 3+3, 2+4 + 1+5 但正确的输出是 3，有人可以指导我解决这个问题吗？因为 7 是 2，8 是 2，9 是 1，10 是 1。

这是我的代码：

```
import java.util.Scanner;

class j1 {

    public static void main(String args[]) {
        Scanner sc = new Scanner(System.in);
        int tot = 5;
        int n = sc.nextInt();
        int sum = 0;
        int count = 1;

        for (int i = 1; i <= tot; i++) {

            for (int j = 1; j <= tot; j++) {
                sum = i + j;
                if (sum == n) {

                    System.out.println(i);
                    System.out.println(j);
                    count++;
                }
              }

        }

        System.out.println(count);
        sc.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:07:21.573

它很简单 - 如果您要使用双手（2 只手）给出数字，那么您首先需要给出包含总数的较大数字 -

例如 7 (4+3 OR 5+2) 当用 2 手表示时 - 先给 4 ！

7 (3+4, 2+5) 的其他选项无效，因为它会使我们首先列出违反规则 #2 的较小数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:08:29.747

秒针的编号必须始终小于或等于第一针的编号。我相信下面的代码会起作用。

```
import java.util.Scanner;

class j1 {

    public static void main(String args[]) {
        Scanner sc = new Scanner(System.in);
        int tot = 5;
        int n = sc.nextInt();
        int sum = 0;
        int count = 1;

        for (int i = 1; i <= tot; i++) {

            for (int j = 1; j <= i; j++) {
                sum = i + j;
                if (sum == n) {

                    System.out.println(i);
                    System.out.println(j);
                    count++;
                }
              }

        }

        System.out.println(count);
        sc.close();
    }
} 
```

# ms-access - 是否可以在 VBA 中为 MS Access 2007 表单中的滑块启用 MoveToPoint 和 SnapToTick？还有滑块默认值？

> ID：12452982
> 
> 赞同：0
> 
> 时间：2012-09-17T04:02:36.603
> 
> 标签：ms-access, vba, slider

我在 MS Access 2007 中有一个表单，其中有一个滑块在工作，但界面不是它需要的。我使用 ActiveX MS Slider Control 6.0 (SP4) 插入了滑块。

您可以单击并拖动鼠标来设置值。但是您不能在刻度线附近单击来设置值。我的滑块从最小值 1 变为最大值 5。如果拇指位于 1，并且我指向 2 并单击，拇指会跳到 5。

此外，每次打开表单时，我的拇指从 1 开始，这对应于“非常不同意”。我希望每次打开表单时拇指从 3 开始，这样用户就不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:51:28.373

设置`LargeChange`为 1 使点击每次只移动 1
设置`Value`为 3 设置默认值 将滑块设置在中间
![在此处输入图像描述](../Images/d252c614ba6f7db397232055cd3330da.png)

# ms-access - 替换 DLookup 以在 Access 中自动填充具有多个值的表单

> ID：12452983
> 
> 赞同：0
> 
> 时间：2012-09-17T04:02:38.807
> 
> 标签：ms-access

我目前有一个表单，其中包含一个与我创建的每个表相关的单独组合框。其中包括：
- 业务流程区域
- 标题
- ReportDescription
- ProcessChain
- MultiProvider
- InfoProvider

我有多个问题，但现在我将其缩小到一个。
如果您选择较低的组合框，我希望表单自动填充，例如，如果您选择报告描述，它将填充标题和业务流程区域。我目前正在使用 DLookup 来执行此操作，并且工作正常。问题出现在表格的下方。
ReportDescription 和 ProcessChain 之间以及 ProcessChain 和 MultiProvider 之间存在多对多的关系。所以目前你可以选择一个 MultiProvider，它只会选择第一个 ProcessChain 并继续从那里填写表格。
我底部组合框中的 Current DLookup 代码是：

```
If IsNull(cmbMultiProvider) Then
    cmbMultiProvider = DLookup("MultiProviderID", "MultiProvider", "MultiProviderID =" & Me.cmbInfoProvider.Column(2))
End If

If IsNull(cmbProcessChain) Then
    cmbProcessChain = DLookup("ProcessChainID", "ProcessChainMultiProvider", "ProcessChainID =" & Me.cmbMultiProvider.Column(2))
End If

If IsNull(cmbReportDesc) Then
    cmbReportDesc = DLookup("ReportID", "ReportDescription", "ReportID =" & Me.cmbProcessChain.Column(2))
End If 
```

所以第四。
因此，如果下面的选择与上面的多个字段相关，我想将这些 DLookup 语句替换为将在组合框中停止的内容，就像在组合框中选择的 MultiProvider 与许多流程链相关时，组合框将下拉并仅包含相关字段。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:30:58.043

所以你要“倒退”级联组合？也就是说，在大多数情况下，您会按降序选择这些项目，但您会按升序向上移动。例如，如果您想深入了解汽车，通常首先选择年份，然后是品牌，然后是型号等。

相反，您要选择品牌，并让模型自动填充（假设该特定模型只有一个品牌），然后将年份留空（因为品牌和模型可能有几年）。

如果是这样，你能告诉我们更多关于你的数据结构的信息吗？您的表格中的报告描述、流程链和多提供者如何相关？

# algorithm - 任何人都可以解释拼图“修复道路”的测试用例吗？

> ID：12452986
> 
> 赞同：2
> 
> 时间：2012-09-17T04:03:05.227
> 
> 标签：algorithm, graph, programming-languages

我正在尝试解决以下难题。我对其中一个测试用例感到困惑。

这是问题所在：

Byteland 国家包含 N 个城市，它们之间有 N-1 条双向道路，因此在任何两个城市之间都有一条路径。Byteland 的道路是很久以前修建的，现在需要维修。你被雇来修理所有的道路。您打算通过在某些道路上派遣机器人来做到这一点。每个机器人都会修复他当前所在的道路，然后移动到相邻的未修复道路之一。修好那个之后，他会搬到另一条相邻的未修过的道路上，修那个等等。

如果两条道路在其端点之一具有相同的城市，则它们是相邻的。为了使过程高效，没有两个机器人可以修复同一条道路，也没有道路可以访问两次。完成任务所需的最少机器人数量是多少？

输入：第一行包含测试用例 T 的数量。接下来是 T 测试用例。每个测试用例的第一行包含 N，即 Byteland 中的城市数。城市编号为 0..N - 1。以下 N - 1 行包含对道路的描述。第 i 行包含两个整数 ai 和 bi，表示有一条道路连接城市，数字为 ai 和 bi。

输出：输出 T 行，一行对应于包含该测试用例所需答案的每个测试用例。

约束：1 <= T <= 20
1 <= N <= 10000
0 <= ai,bi < N

现在下面是我感到困惑的测试用例：

> 1
> 15
> 0 11
> 1 7
> 1 11
> 2 11
> 2 14
> 3 4
> 4 10
> 4 13
> 4 8
> 5 13
> 6 10
> 7 9
> 8 11
> 11 12
> 
> 正确答案是 2，但为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:23:39.790

请注意此处“相邻道路”的定义 - 您不是在寻找机器人仅通过每条道路一次的遍历。

使用该定义，您在此图中有四个“终端道路”，6 10、5 13、2 14 和 7 9 - 它们不能位于序列的中间，因为它们只有一条相邻的道路。这是您可以使用两个机器人（从其中两个开始，到另外两个结束）的第一个迹象。请注意，Byteland 几乎分为两个子国家，只有 4 8 11 是唯一的连接道路，所以你不能让两个机器人在两半之间通过，自然而然的是一个机器人将修理每一半。

从那里开始，构建样本遍历（颜色 - 机器人，数字 - 序列）相当简单，当然有很多，因为您可以反转开始/结束并在两者之间打乱一些顺序

![测试用例的示例解决方案](../Images/f693dd622a86284722dd344c0043393b.png)

这一切都归功于[Graphviz](http://www.graphviz.org/)和我的视觉皮层，但无论如何您并没有要求通用解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-02T13:06:40.053

在这个问题中提到，没有两个机器人会修复同一条道路，也没有道路可以访问两次。
1>如果其中一个分支端点的距离大于1，则需要向该方向发送机器人。
2> 端点到任何顶点的距离 =1 然后不需要任何额外的机器人

[https://i.stack.imgur.com/o7zm6.png](https://i.stack.imgur.com/o7zm6.png)

# c++ - 关于 OOP 类的概念

> ID：12452990
> 
> 赞同：0
> 
> 时间：2012-09-17T04:04:23.447
> 
> 标签：c++, oop

我对 OOP 类的一些概念有疑问，可以说我有以下类：

*   Parser 类，其中包含用于解析流数据的数据
*   包含用于解析流数据的字符串操作的字符串类
*   包含用于解析流数据的整数操作的整数类

所以 String 和 Integer 类继承了 Parser 类，因为它们都需要关于流的特定信息，如位置、长度等。

现在问题来了，当我有一个同时使用 String 和 Integer 函数的函数时。

让我们将这个新函数放在一个名为 MultipleOperations 的类中。MultipleOperations 需要 String 和 Integer 类，因此它同时继承，但 String 和 Integer 类已经继承 Parser，因此当尝试从 Parser 类访问某些数据时是模棱两可的。

另一方面，如果设置 String 和 Integer 类具有 MultipleOperations 的组合，那么我将无法访问 Parser 类。

此外，我不太了解“具有”的概念，因为在大多数情况下，我需要引用基类中的数据，因此使其成为“是”。

这是我的问题的一个例子：

```
class Parser{
private:
    int errorcode;
    char comment;
    const char* address;
    const char* maxaddress;
    unsigned int position;
public:
    Parser(const char* _address, const char* _maxaddress) : errorcode(NO_ERROR_PRESENT) {};
    const char* s_address(const char* _address) {address = _address;}
    const char* s_maxaddress(const char* _maxaddress) {maxaddress = _maxaddress;}
    const char* s_position(unsigned int _pos) {position = _pos;}
    char r_comment() const {return comment;}
    const char* r_address() const {return address + position;}
    const char* r_maxaddress() const {return maxaddress;}
    unsigned int r_position() const {return position;}

    int geterror();
    void set_error(int code) {errorcode = code;}

    void set_comment(const char char_comment);
    void set_position(unsigned int position);
    void resetboundary(unsigned int address, unsigned int maxaddress);
};

class Integer: public Parser {
public:
    //Get an int token
    int GetInt();
};

class String: public Parser {
private:
    int NullByToken(char*, int, char);                          //Null a string by token
    void CleanString(std::string string);                       //Clean an string to its simple form (removing spaces, tabs, etc)
    public:
        Displacement* GetEndOfLine();                           //Get len till end of line
        Displacement* GetSimpleString();
        bool SplitByChar(const char token, SplitString* setstrings);
};

class MultiOperation: public String, public Integer {
    void* GetDataByPrefix(unsigned int Type, char token, const char* prefixcmp);
}; 
```

函数 GetDataByPrefix 需要访问 Parser 类并且需要访问 String 和 Integer 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:16:02.033

这是一个已知的菱形层次结构问题，仅存在于 C++ 中。尽管实现多个接口很好，但您应该避免类的多重继承。这就是为什么更现代的语言（例如 c# 和 java）不允许多重继承的原因。

至于您的课程，我看不到任何 is-a 关系。您应该使用 has-a （引用而不是继承）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:17:11.083

你的问题叫做[钻石问题](http://en.wikipedia.org/wiki/Multiple_inheritance)。

对此有多种解决方案，仅举一个，您可能会觉得[它很](http://en.wikipedia.org/wiki/Virtual_inheritance)有趣。我建议你google一下。

# vb.net - 如何在 VB.NET 中正确读取随机访问文件

> ID：12452991
> 
> 赞同：1
> 
> 时间：2012-09-17T04:04:29.153
> 
> 标签：vb.net

我正在尝试读取随机访问文件，但在第一个文件上出现以下错误`Error 5 (unable to read beyond end of the stream)`。我不确定我在这里做错了什么，我该如何解决这个问题？

```
Structure StdSections
    'UPGRADE_WARNING: Fixed-length string size must fit in the buffer. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="3C1E4426-0B80-443E-B943-0627CD55D48B"'
    <VBFixedString(15), System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=15)> Public A() As Char 'BEAM  --- complete beam designation          15
    'UPGRADE_WARNING: Fixed-length string size must fit in the buffer. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="3C1E4426-0B80-443E-B943-0627CD55D48B"'
    <VBFixedString(2), System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=2)> Public B() As Char 'DSG   --- shape  ie "W" or "C"                2
    Dim C As Single 'DN    --- nominal depth of section            4
    Dim d As Single 'WGT   --- weight                              4
    .
    .
    .
End structure
''Note 'File1'is the existing RAF and holds complete path!

        Dim i,ffr,fLength,lastmembNo as integer
        sectionFound = False
        Dim std As new StdSections 
        fLength = Len(std)
        If fLength = 0 Then fLength = 168 ' 177
        ffr = FreeFile()
        FileOpen(ffr, File1, OpenMode.Random, OpenAccess.Read, OpenShare.LockRead, fLength)
        lastmembNo = CInt(LOF(ffr)) \ fLength

        For i = 1 To lastmembNo
            FileGet(ffr, std, i)
            >>Error 5 (unable to read beyond end of the stream) <<<                  
            If Trim(memberID) = Trim(std.A) Then
                    sectionFound = True
                end if
        next i 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:32:09.157

哇免费文件！那是来自过去的爆炸！

我在 VB.NET 中并没有真正使用过旧的 OpenFile 等文件访问方法，所以我只是在推测，但在 .NET 中，许多变量类型的大小都发生了变化。例如，一个 Integer 现在是 32 位（4 个字节），我认为 Boolean 是不同的，尽管 Single 仍然是 4 个字节。

此外，.NET 中的字符串默认为 Unicode，而不是 ASCII，因此您不能依赖 .NET 字符串变量中的 1 个字符 = 1 个字节。事实上，.NET 实际上是在运行之前在 PC 上“JIT 编译”程序，所以你不能像过去那样在内存中轻松布局结构。

如果您想切换到新的基于“流”的对象，这里有一些代码可以帮助您入门：

```
 Dim strFilename As String = "C:\Junk\Junk.txt"
    Dim strTest As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    Call My.Computer.FileSystem.WriteAllText(strFilename, strTest, False)
    Dim byt(2) As Byte
    Using fs As New FileStream(strFilename, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite)
      fs.Seek(16, SeekOrigin.Begin)
      fs.Read(byt, 0, 3)
      Dim s As String = Chr(byt(0)) & Chr(byt(1)) & Chr(byt(2))
      MsgBox(s)
      fs.Seek(5, SeekOrigin.Begin)
      fs.Write(byt, 0, 3)
    End Using
    Dim strModded As String = My.Computer.FileSystem.ReadAllText(strFilename)
    MsgBox(strModded) 
```

不过，我不会责怪您保留旧方法：使用新方法，您需要定义一个类，然后有一个自定义例程将 Byte() 转换为该类的属性。比简单地将文件中的字节加载到内存中更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:54:24.067

OK，我觉得你应该切换到“.NET方式”，如下：

```
Imports System.IO
Imports System.Xml

Public Class Form1

  Public Const gintRecLen_CONST As Integer = 177

  Class StdSections2
    Private mstrA As String
    Public Property A() As String
      Get
        Return mstrA
      End Get
      Set(ByVal value As String)
        If value.Length <> 15 Then
          Throw New Exception("Wrong size")
        End If
        mstrA = value
      End Set
    End Property

    Private mstrB As String
    Public Property B() As String
      Get
        Return mstrB
      End Get
      Set(ByVal value As String)
        If value.Length <> 2 Then
          Throw New Exception("Wrong size")
        End If
        mstrB = value
      End Set
    End Property

    Public C(39) As Single

    Public Shared Function FromBytes(byt() As Byte) As StdSections2
      Dim output As New StdSections2

      If byt.Length <> gintRecLen_CONST Then
        Throw New Exception("Wrong size")
      End If
      For i As Integer = 0 To 14
        output.mstrA &= Chr(byt(i))
      Next i
      For i As Integer = 15 To 16
        output.mstrB &= Chr(byt(i))
      Next i
      For i As Integer = 0 To 39
        Dim bytTemp(3) As Byte
        output.C(i) = BitConverter.ToSingle(byt, 17 + 4 * i)
      Next i
      Return output
    End Function
  End Class

  Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.

  End Sub

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim strFilename As String = "C:\Junk\Junk.txt"
    Dim strMemberID As String = "foo"
    Dim intRecCount As Integer = CInt(My.Computer.FileSystem.GetFileInfo(strFilename).Length) \ gintRecLen_CONST
    Dim blnSectionFound As Boolean = False
    Using fs As New FileStream(strFilename, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)
      For intRec As Integer = 0 To intRecCount - 1
        Dim intRecPos As Integer = gintRecLen_CONST * intRec
        fs.Seek(intRecPos, SeekOrigin.Begin)
        Dim byt(gintRecLen_CONST - 1) As Byte
        fs.Read(byt, 0, gintRecLen_CONST)
        Dim ss2 As StdSections2 = StdSections2.FromBytes(byt)
        'MsgBox(ss2.A & ":" & ss2.C(3)) 'debugging
        If strMemberID.Trim = ss2.A.Trim Then
          blnSectionFound = True
          Exit For
        End If
      Next intRec
    End Using
    MsgBox(blnSectionFound.ToString)

  End Sub
End Class 
```

我们定义了一个名为 StdSections2 的类，它使用 .NET 字符串和一个 Singles 数组。我们到处使用基于 0 的数组。我们使用新的 FileStream 对象加载文件，并使用 Seek() 命令找到我们想要的位置。然后我们从文件中加载原始字节，并使用 Chr() 和 BitConverter.ToSingle() 将原始字节转换为字符串和单曲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T10:34:04.097

我不确定您的示例，但是这个示例有效：

```
Public Class Form1

Const maxLenName = 30

Structure person
    <VBFixedString(maxLenName)> Dim name As String
    Dim age As Byte
End Structure

Private Sub Form1_Load(sender As [Object], e As EventArgs) Handles MyBase.Load

    Dim entryIn As New person
    Dim recordLen As Integer = Len(entryIn)
    Dim entry As person

    If FileIO.FileSystem.FileExists("test.raf") Then Kill("test.raf")
    FileOpen(1, "test.raf", OpenMode.Random,,, recordLen)

    'write
    entry.name = LSet("Bill", maxLenName)
    entry.age = 25
    FilePut(1, entry, 6) 'write to 6th record

    'read
    Dim nRecords As Integer = LOF(1) \ recordLen
    FileGet(1, entryIn, nRecords)
    FileClose(1)

    Dim personName As String = RTrim(entryIn.name)
    Dim personAge As Byte = entryIn.age

    MsgBox(personName & "'s age is " & personAge)
End Sub
End Class 
```

# c# - 使用 Datagridview 进行反射

> ID：12452995
> 
> 赞同：1
> 
> 时间：2012-09-17T04:06:01.977
> 
> 标签：c#, .net, reflection, datagridview

在我的 DataGridView 中，我将我的值分配给这样的单元格：

```
for (int i = 0; i < count; i++)
{
    int j = i + 1;
    DGVPointCtrl.Rows.Add(new DataGridViewRow());

    DGVPointCtrl.Rows[j].Cells["pointidentifier"].Value = pointCommonInfo[i].pointidentifier;
    DGVPointCtrl.Rows[j].Cells["pointname"].Value = pointCommonInfo[i].pointname;
    DGVPointCtrl.Rows[j].Cells["backup"].Value = pointCommonInfo[i].backup;
    DGVPointCtrl.Rows[j].Cells["covenable"].Value = pointCommonInfo[i].covenable;
    DGVPointCtrl.Rows[j].Cells["covlifetime"].Value = pointCommonInfo[i].covlifetime;
    DGVPointCtrl.Rows[j].Cells["covtarget"].Value = pointCommonInfo[i].covtarget;
    DGVPointCtrl.Rows[j].Cells["description"].Value = pointCommonInfo[i].description;
    DGVPointCtrl.Rows[j].Cells["historyenable"].Value = pointCommonInfo[i].historyenable;
    DGVPointCtrl.Rows[j].Cells["pointaddress"].Value = pointCommonInfo[i].pointaddress;
    DGVPointCtrl.Rows[j].Cells["pointtype"].Value = pointCommonInfo[i].pointtype;
    DGVPointCtrl.Rows[j].Cells["activetext"].Value = pointSpecificInfo[i].activetext;
    DGVPointCtrl.Rows[j].Cells["alarmenable"].Value = pointSpecificInfo[i].alarmenable;

    DGVPointCtrl.Rows[i].Cells["alarmenablehigh"].Value = pointSpecificInfo[i].alarmenablehigh;
    DGVPointCtrl.Rows[i].Cells["alarmenablelow"].Value = pointSpecificInfo[i].alarmenablelow;
    DGVPointCtrl.Rows[j].Cells["alarmvalue"].Value = pointSpecificInfo[i].alarmvalue;
    DGVPointCtrl.Rows[j].Cells["correctvalue"].Value = pointSpecificInfo[i].correctvalue;
    DGVPointCtrl.Rows[j].Cells["covincrement"].Value = pointSpecificInfo[i].covincrement;
    ... 
```

很脏的东西。单元格名称与我的 pointCommonInfo 和 pointSpecificInfo 列表的属性相匹配，因此我决定使用反射：

```
for (int i = 0; i < count; i++)
{
    int j = i + 1;
    DGVPointCtrl.Rows.Add(new DataGridViewRow());
    FieldInfo[] fieldCommon = typeof(PointCommonInformation).GetFields();
    FieldInfo[] fieldSpecific = typeof(PointSpecificInformation).GetFields();
    foreach (FieldInfo field in fieldCommon)
    {
        DGVPointCtrl.Rows[j].Cells[field.Name].Value = //?
    }

    foreach (FieldInfo field in fieldSpecific)
    {
        DGVPointCtrl.Rows[j].Cells[field.Name].Value = //?
    }   
} 
```

我可以获得该字段的名称，但我不知道如何使用反射来实际访问它们。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:25:42.793

如果您说 - 单元名称与 pointCommonInfo 和 pointSpecificInfo 的属性匹配 - 那么您应该使用 GetProperties() 而不是 GetFields()。您可以通过以下方式实现它：

```
Type commonType = typeof(PointCommonInformation);

foreach (PropertyInfo item in commonType.GetProperties())
{
        object propertyObject = item.GetValue(pointCommonInfo, null);
        string propertyValue = propertyObject == null ? string.Empty : propertyObject.ToString();
        DGVPointCtrl.Rows[j].Cells[item.Name].Value = propertyValue;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:18:36.730

只需使用`FieldInfo.GetValue`方法：http: [//msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)。

```
foreach (FieldInfo field in fieldCommon)
{
    DGVPointCtrl.Rows[j].Cells[field.Name].Value = field.GetValue(pointCommonInfo[i]);
}

foreach (FieldInfo field in fieldSpecific)
{
    DGVPointCtrl.Rows[j].Cells[field.Name].Value = field.GetValue(pointCommonInfo[i]);
} 
```

# android - Android相机中screenSize、previewSize和pictureSize是什么关系？

> ID：12452996
> 
> 赞同：1
> 
> 时间：2012-09-17T04:06:02.243
> 
> 标签：android, camera

我想很多人都像我一样对这几个尺寸感到困惑。
让我声明一下：比率 = 宽度/高度。

在surfaceView中，我们设置previewSize和pictureSize作为参数。
但是如何选择最佳尺寸？
如果我想捕获全屏图像，previewSize 和pictureSize 应该设置为什么？
有些情况下预览是全屏的，但保存的图片比预览屏幕的图片大，为什么？
还有，如果previewSize和pictureSize的比例不同，有什么问题吗？
而且，是否需要将 previewSize 和 screenSize 的比例设置为相同？
老实说，我只是想截取全屏图片保存为jpg/png，保存的图片的宽高和预览图完全一样，怎么办？
我只是对screenSize、previewSize和pictureSize之间的关系感到困惑。感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T04:47:01.413

所以让我们从定义开始，据我所知。

**ScreenSize**：物理显示器的物理尺寸，这是设备可用于向用户显示内容的最大像素尺寸。这几乎是一个静态值。

**PreviewSize**：这通常是光学传感器可以在本地快速预览帧的图像大小。传感器通常提供支持值的列表。这些通常都是相同的纵横比。支持的 previewSize 可能与 ScreenSize**重叠**。如果是这样，并且您想显示全尺寸的相机视图，那就太好了！不管是什么，都是你想要的。否则，它可能只是最接近的值，之后由您决定。

**PictureSize**：这是传感器实际捕获的大小。这实际上与其他两个值无关。它通常肯定会与某些 previewSize 支持的值重叠。但它的范围可以更大，并且通常支持更好的分辨率，因为这毕竟是最终产品。很多时候，在能够显示比**ScreenSize**更好的分辨率的设备上，捕获效果可能会更好，这些方面可能会有所不同。

**屏幕尺寸**和**预览尺寸**通常在扫描潜在图像时与图像的呈现最相关。这些通常是传感器目前能够看到的任何内容的真正不集中的​​快速渲染，并将它们显示给用户（在某种意义上几乎就像一个视频源）。在这些情况下，您希望尽可能提供最好的，但有时可能无法设置相机以充分利用显示器。即前置摄像头通常以这样一种方式安装，即它被设置为捕获纵向类型的图像，并且预览可能不会利用屏幕的纵横比。如果您没有对预览帧进行任何操作，只是将它们显示在屏幕上，这纯粹是装饰性的。否则，如果这是一个问题，那么它在那个时候更具体。例如，前置摄像头可能有 4：3 previewSize 和 ScreenSize 的比例为 16:9。您最终会得到可能适合您正在做的事情的信箱或拉伸解决方案。

**就开发人员而言，**CaptureSize**通常与**PreviewSize完全无关。**仅在捕获的文件只会显示在给定设备上并且从不被操纵的情况下，它与**ScreenSize**有轻微的相关性。即，如果您只为这个应用程序拍摄图像并且只在这个应用程序上显示它们。如果捕获尺寸很大，而屏幕很小，则有点浪费空间。另一方面，如果捕获小于屏幕尺寸并且唯一的目的是在屏幕上显示图像，如果捕获小于屏幕，您可能需要放大。它通常与内存、文件大小和捕获质量的权衡更相关，以便稍后在某些其他活动或过程中进行操作。**

 **几乎可以归结为这一点。如果你有足够的带宽、存储空间和内存来做所有事情，那么高分辨率是很棒的。如果没有，您可以随时扩展。如果按比例缩放，我通常更喜欢按比例缩小，因为它通常会产生更好的显示图像，而不是按比例放大。

我想得越多，总体上这是一个模糊的问题。希望这会带来一些好处。**

# ruby-on-rails - Rails + Carrierwave + facebook like + amazon s3

> ID：12452998
> 
> 赞同：0
> 
> 时间：2012-09-17T04:06:25.153
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, amazon-s3, carrierwave

我试图在我的产品页面中设置一个喜欢的按钮，我希望它在有人喜欢它时显示产品的图像，我确定那是 og:image 元标记，但是当我产生我的元标记时，我得到了这个

```
<meta property="og:image" content="https://amelias3.s3.amazonaws.com/uploads/product/image/21/prod_pAERO1-11302691t386x450.jpg/"> 
```

而不是这个

```
<meta property="og:image" content="https://amelias3.s3.amazonaws.com/uploads/product/image/21/prod_pAERO1-11302691t386x450.jpg"> 
```

带有最后一个反斜杠的 s3 url 给出了拒绝访问错误，有人知道为什么吗？

# c++ - c++ 在单链表中插入节点

> ID：12452999
> 
> 赞同：1
> 
> 时间：2012-09-17T04:06:35.893
> 
> 标签：c++

有人可以帮我理解我做错了什么。我需要在链表中插入一个字符。

它需要像人名这样的输入，而不是反转它。然后它告诉用户选择一个位置来添加一个字符。

```
void insert_char(Node* plist, char x, int p){
  Node* d=plist;
  for (int i=1; i<p and 0!=d; i++)
    d=d->next;
  if (0 !=d)
    d->x=x; 
```

但是，此代码更改了字符，而不是添加了字符。

更新：

我还是想不通。

```
void insert_char(Node* plist, char x, int p){
    Node* d=plist;
    Node* d2=0;
    for (int i=1; i<p and 0!=d; i++)
        d2->next=d->next;
    d->next=d2;
    if (0 !=d)
        d2->x=x;
    return;
} 
```

我收到分段错误。

好的，所以我想通了，我真正想要的是什么。感谢帮助

```
 void insert_char(Node* plist, char x, int p){
  Node* d=plist;
  Node* d2= new Node();
  for (int i=1; i<p and d; i++)
    d2->next=d->next;
    d->next=d2;
  if (0 !=d)
    d2->x=x;
  return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:13:24.873

```
d->x=x; 
```

正在覆盖以前存在的任何字符。你期望会发生什么？

```
0!=d 
```

可以简化为刚刚`d`，无需比较`0`。

使用大括号也可能会有所帮助。我知道能够用这样的一行来忽略它们很好，但它最终会有一天回来咬你。

**至于您的 update**，由于以下几行，您总是会遇到段错误：

```
Node* d2=0;
d2->next=d->next;
d2->x=x; 
```

你正在创建一个`Node*`并且从不分配任何东西给它，也不分配内存。您正在取消引用未初始化的指针。

你确定你不想这样做吗？

```
void insert_char(Node* plist, char x, int p){
  Node* d=plist;
  for (int i=1; i<p && d; i++)
    d=d->next;
  if (!d) // If this node is empty..
  {
    d = new Node; // Store a new node at the position.
    d->x = x; // Set the char value for the new node.
  }
  else // If this node is not empty..
  {        
    Node* next = d->next(); // Get the next node.
    d = new Node; // Create a new node and insert.
    d->x = x; // Set the char for this node.
    if(next) // If there was a mode above our insertion..
    {          
      newNode->next = next; // Store it in the next member of our new node.
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:12:54.377

目前，您的最终 if 语句的主体只是覆盖当前节点的 x 值。为了将新节点粘贴到链表中，您需要这样做。1\. 创建一个新节点 2\. 在列表中为新节点选择一个位置（您已经这样做了） 3\. 将前一个节点指向您的节点 4\. 将您的节点指向下一个节点

完成所有这些需要一些细微差别，但希望这足以开始。